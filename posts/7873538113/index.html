<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>【SLAM】在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3 | 慕雪的寒舍</title><meta name="author" content="慕雪年华"><meta name="copyright" content="慕雪年华"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3的介绍"><meta property="og:type" content="article"><meta property="og:title" content="【SLAM】在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3"><meta property="og:url" content="https://blog.musnow.top/posts/7873538113/index.html"><meta property="og:site_name" content="慕雪的寒舍"><meta property="og:description" content="在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3的介绍"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.musnow.top/i/2025/02/fb081dc6226497056b3613b2220e9aa9.png"><meta property="article:published_time" content="2025-02-04T00:36:23.000Z"><meta property="article:modified_time" content="2025-02-09T08:49:00.000Z"><meta property="article:author" content="慕雪年华"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Cpp"><meta property="article:tag" content="SLAM"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.musnow.top/i/2025/02/fb081dc6226497056b3613b2220e9aa9.png"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.musnow.top/posts/7873538113/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="iR4A6ntiwhI9JX_YDe2ZFY6DerPD7c-NaLyIDlrDguY"><meta name="msvalidate.01" content="D5CD621F38EE3FB5071F785AD4977161"><meta name="baidu-site-verification" content="codeva-aZGKJiqRSI"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"距离上次更新本文已经过去了","messageNext":"天，文章部分内容可能已经过时，请注意甄别"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":420},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":600,"languages":{"author":"作者: 慕雪年华","link":"链接: ","source":"来源: 慕雪的寒舍","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"【SLAM】在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-02-09 16:49:00"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/equipment/equipment.css?1"><link rel="stylesheet" href="/rating/rating.css?1"><script>!function(r){"use strict";!function(){var t=window,s=document,e=r,c="".concat("https:"===s.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),i=s.createElement("script"),n=s.getElementsByTagName("script")[0];i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.async=!0,i.src=c,i.id="LA_COLLECT",e.d=i;function o(){t.LA.ids.push(e)}t.LA?t.LA.ids&&o():(t.LA=r,t.LA.ids=[],o()),n.parentNode.insertBefore(i,n)}()}({id:"JwxEfuZ8fwQ1GPEq",ck:"JwxEfuZ8fwQ1GPEq"})</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="慕雪的寒舍" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/favicon.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">429</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">73</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/rating/"><i class="fa-fw fas fa-film"></i><span> 书·影</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-friends"></i><span> 友人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> 朋友圈</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> 虫洞</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-glass-whiskey"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fab fa-blackberry"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> 背包</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> 说说</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url(https://img.musnow.top/i/2025/02/fb081dc6226497056b3613b2220e9aa9.png)"><nav id="nav"><span id="blog-info"><a href="/" title="慕雪的寒舍"><img class="site-icon" src="/favicon.jpg"><span class="site-name">慕雪的寒舍</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/rating/"><i class="fa-fw fas fa-film"></i><span> 书·影</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-friends"></i><span> 友人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> 朋友圈</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> 虫洞</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-glass-whiskey"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fab fa-blackberry"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> 背包</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> 说说</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【SLAM】在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-04T00:36:23.000Z" title="发表于 2025-02-04 08:36:23">2025-02-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-09T08:49:00.000Z" title="更新于 2025-02-09 16:49:00">2025-02-09</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/">编程学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="【SLAM】在本地虚拟机和AutoDL云端环境以TUM-RGBD数据集运行ORB_SLAM3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="ArtalkPV"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>在本地虚拟机和AutoDL云端环境运行ORB_SLAM3的介绍。</p><h2 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1. 介绍"></a>1. 介绍</h2><p>ORB-SLAM3是西班牙萨拉戈萨大学于2020年7月中旬开源的作品，与ORB-SLAM、ORB-SLAM2一脉相承，是一个能够使用单目、立体、RGB-D相机，兼容针孔及鱼眼相机模型进行视觉、视觉+惯导和多地图的综合性SLAM方案。</p><ul><li>论文：<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2007.11898">ORB-SLAM3: An Accurate Open-Source Library for Visual, Visual-Inertial and Multi-Map SLAM</a>;</li><li>源码：<a target="_blank" rel="noopener" href="https://github.com/UZ-SLAMLab/ORB_SLAM3">github.com&#x2F;UZ-SLAMLab&#x2F;ORB_SLAM3</a></li></ul><p>本文不关注ORB-SLAM3的理论实现，仅记录如何在本地环境中运行ORB-SLAM3。</p><p>更多参考资料：</p><ul><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45947476/article/details/123595935">ORB-SLAM3论文详细解读_orbslam3论文-CSDN博客</a>；</li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/hhaowang/article/details/117318737">ORB-SLAM3技术详解（1）简介与论文解读_西班牙zaragoza大学于2020年7月最新开源了orb-slam3的论文和源码-CSDN博客</a>；</li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_37605642/article/details/134016846">ORB-SLAM系列算法相关介绍（综合版）_orb slam-CSDN博客</a>；</li></ul><p>因为之前折腾过GCNv2-SLAM，在本地运行ORB-SLAM3比GCNv2-SLAM更简单。</p><h2 id="2-依赖安装"><a href="#2-依赖安装" class="headerlink" title="2. 依赖安装"></a>2. 依赖安装</h2><p>ORB-SLAM3的依赖项和GCNv2几乎完全一致，且ORB-SLAM3不需要PyTorch，依赖项如下所示：</p><ul><li>opencv大于3.0版本；</li><li>eigen3大于3.1.0版本；</li><li>Pangolin没有版本要求，用6.0没问题；</li><li>需要<code>libpython2.7-dev</code>包；</li></ul><p>ubuntu18.04系统安装依赖项可以参考我先前编写的GCNv2博客：</p><ul><li><a href="https://blog.musnow.top/posts/1589125738/">【SLAM】于ubuntu18.04上纯CPU运行GCNv2_SLAM的记录（ARM64&#x2F;AMD64） | 慕雪的寒舍</a>；</li><li><a href="https://blog.musnow.top/posts/1071165018/">【SLAM】于AutoDL云上GPU运行GCNv2_SLAM的记录 | 慕雪的寒舍</a>；</li></ul><p>参考博客里面的步骤安装opencv、eigen3、Pangolin6.0就可以了，不需要安装libtorch。</p><p>如果你想使用AutoDL云端环境运行，选择2080ti的PyTorch1.5.1版本镜像即可。</p><h2 id="3-编译项目"><a href="#3-编译项目" class="headerlink" title="3. 编译项目"></a>3. 编译项目</h2><p>项目的编译非常简单，安装好所有依赖项后，直接使用根目录下的build.sh脚本编译就可以了，不需要修改该脚本。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/UZ-SLAMLab/ORB_SLAM3.git ORB_SLAM3</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ORB_SLAM3</span><br><span class="line"><span class="built_in">chmod</span> +x build.sh</span><br><span class="line">./build.sh</span><br></pre></td></tr></table></figure><p>初次编译的时候，会遇到如下cmake告警，提示需要opencv 4.4版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CMake Warning at CMakeLists.txt:33 (find_package):</span><br><span class="line">  Could not find a configuration file for package &quot;OpenCV&quot; that is compatible</span><br><span class="line">  with requested version &quot;4.4&quot;.</span><br><span class="line"></span><br><span class="line">  The following configuration files were considered but not accepted:</span><br><span class="line"></span><br><span class="line">    /usr/local/share/OpenCV/OpenCVConfig.cmake, version: 3.4.5</span><br><span class="line">    /usr/share/OpenCV/OpenCVConfig.cmake, version: 3.2.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CMake Error at CMakeLists.txt:35 (message):</span><br><span class="line">  OpenCV &gt; 4.4 not found.</span><br></pre></td></tr></table></figure><p>但实际上Github的项目README里面已经说了只需要opencv大于3.0版本就可以了。根据Github Issue：<a target="_blank" rel="noopener" href="https://github.com/UZ-SLAMLab/ORB_SLAM3/issues/456">github.com&#x2F;UZ-SLAMLab&#x2F;ORB_SLAM3&#x2F;issues&#x2F;456</a>，直接修改项目根目录下的<code>CMakeLists.txt</code>文件就能解决此问题，将如下部分从4.4改成3.4即可。</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(OpenCV <span class="number">3.4</span>)</span><br><span class="line">   <span class="keyword">if</span>(<span class="keyword">NOT</span> OpenCV_FOUND)</span><br><span class="line">      <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;OpenCV &gt; 3.4 not found.&quot;</span>)</span><br><span class="line">   <span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure><p>修改了之后，需要先删除刚刚的编译缓存，重新运行脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf Thirdparty/g2o/build/</span><br><span class="line"><span class="built_in">rm</span> -rf Thirdparty/DBoW2/build/</span><br><span class="line"><span class="built_in">rm</span> -rf Thirdparty/Sophus/build/</span><br><span class="line"><span class="built_in">rm</span> -rf Vocabulary/*.bin</span><br><span class="line"><span class="built_in">rm</span> -rf ./build</span><br></pre></td></tr></table></figure><p>AutoDL云端环境正常编译通过</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/907029347552b7f2d693eaeced1f865e.png" alt="image.png"></p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/32a03247e02290a884a86a8584e3a60d.png" alt="image.png"></p><p>本地arm64虚拟机ubuntu 18.04 docker容器内也能正常编译</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/ab0369af6d4ce3e2453b6fddb247f759.png" alt="image.png"></p><h2 id="4-使用TUM-RGB-D数据集运行项目"><a href="#4-使用TUM-RGB-D数据集运行项目" class="headerlink" title="4. 使用TUM RGB-D数据集运行项目"></a>4. 使用TUM RGB-D数据集运行项目</h2><h3 id="4-1-下载和处理数据集"><a href="#4-1-下载和处理数据集" class="headerlink" title="4.1. 下载和处理数据集"></a>4.1. 下载和处理数据集</h3><p>这里需要的操作和GCNv2是一样的，下载了RGB-D数据集后需要用python脚本处理一下。</p><p>下载地址：<a target="_blank" rel="noopener" href="https://cvg.cit.tum.de/data/datasets/rgbd-dataset/download">cvg.cit.tum.de&#x2F;data&#x2F;datasets&#x2F;rgbd-dataset&#x2F;download</a></p><p>下载<code>fr1/desk</code>数据集，这是一个桌子的RGBD数据</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/01/6ebeb1fe9366e07ea5dd7f0697b72d4f.png" alt="image.png"></p><p>在GCNv2_SLAM工程下新建<code>datasets/TUM</code>,将数据集下载到其中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建datasets/TUM数据集文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> -p datasets/TUM </span><br><span class="line"><span class="built_in">cd</span> datasets/TUM</span><br><span class="line"><span class="comment"># 下载数据集到datasets/TUM文件夹内</span></span><br><span class="line">wget -O rgbd_dataset_freiburg1_desk.tgz https://cvg.cit.tum.de/rgbd/dataset/freiburg1/rgbd_dataset_freiburg1_desk.tgz</span><br><span class="line"><span class="comment"># 解压数据集</span></span><br><span class="line">tar -xvf rgbd_dataset_freiburg1_desk.tgz</span><br></pre></td></tr></table></figure><p>然后还需要下载一个<code>associate.py</code>脚本来处理一下数据集才能正常运行</p><p>下载地址：<a target="_blank" rel="noopener" href="https://svncvpr.in.tum.de/cvpr-ros-pkg/trunk/rgbd_benchmark/rgbd_benchmark_tools/src/rgbd_benchmark_tools/associate.py">svncvpr.in.tum.de</a>，同时在<a target="_blank" rel="noopener" href="https://github.com/musnows/GCNv2_SLAM/blob/86c1efc0cc6c40669df20c0a62017815e18771b7/docker/associate.py">我的Github仓库</a>也做了留档。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O associate.py https://svncvpr.in.tum.de/cvpr-ros-pkg/trunk/rgbd_benchmark/rgbd_benchmark_tools/src/rgbd_benchmark_tools/associate.py</span><br></pre></td></tr></table></figure><p>这个脚本只能用python2运行，需要下载numpy库。注意AutoDL的环境中python绑定到了python3，环境中的python2被拦掉了，所以需要安装独立的python2命令来运行python2。</p><p>在Pytorch1.5.1版本的AutoDL镜像中，可以直接使用下面的命令来安装python2和pip2：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install -y python-dev python-pip</span><br></pre></td></tr></table></figure><blockquote><p>安装了以后，云端AutoDL环境需要使用python2和pip2命令，本地虚拟机中使用python和pip命令就可以了（本地的python和pip命令一般绑定的都是python2）</p></blockquote><p>随后安装numpy库就ok了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@autodl-container-e39d46b8d3-01da7b14:~/autodl-tmp/GCNv2_SLAM/datasets/TUM# pip2 install numpy</span><br><span class="line">DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.</span><br><span class="line">Looking in indexes: http://mirrors.aliyun.com/pypi/simple</span><br><span class="line">Collecting numpy</span><br><span class="line">  Downloading http://mirrors.aliyun.com/pypi/packages/3a/5f/47e578b3ae79e2624e205445ab77a1848acdaa2929a00eeef6b16eaaeb20/numpy-1.16.6-cp27-cp27mu-manylinux1_x86_64.whl (17.0 MB)</span><br><span class="line">     |████████████████████████████████| 17.0 MB 21.1 MB/s </span><br><span class="line">Installing collected packages: numpy</span><br><span class="line">Successfully installed numpy-1.16.6</span><br></pre></td></tr></table></figure><p>执行脚本来处理两个文件，在数据文件夹里执行命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python2 associate.py rgbd_dataset_freiburg1_desk/rgb.txt rgbd_dataset_freiburg1_desk/depth.txt &gt; rgbd_dataset_freiburg1_desk/associate.txt</span><br></pre></td></tr></table></figure><p>执行python命令后可以看看合并成功了没有，如下应该就是没问题了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1305031472.895713 rgb/1305031472.895713.png 1305031472.892944 depth/1305031472.892944.png</span><br><span class="line">1305031472.927685 rgb/1305031472.927685.png 1305031472.924814 depth/1305031472.924814.png</span><br><span class="line">1305031472.963756 rgb/1305031472.963756.png 1305031472.961213 depth/1305031472.961213.png</span><br></pre></td></tr></table></figure><p>在同一个网站下载的其他TUM数据集也需要用相同的方式进行处理。</p><p>更新：突然发现其实在<code>ORB_SLAM3/Examples/RGB-D/associations</code>目录里面已经有处理好的文件了。但是这不代表不需要下载数据集，依旧需要下载TUM数据集获取原始的图像文件。</p><h3 id="4-2-运行项目"><a href="#4-2-运行项目" class="headerlink" title="4.2. 运行项目"></a>4.2. 运行项目</h3><p>在项目根目录下，使用如下命令运行项目，最后两个参数指向数据集的路径以及数据集整理后的<code>associate.txt</code>文件路径。第三个参数<code>TUM1.yaml</code>对应我们下载的freiburg1数据集。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./Examples/RGB-D/rgbd_tum \</span><br><span class="line">    ./Vocabulary/ORBvoc.txt \</span><br><span class="line">    ./Examples/RGB-D/TUM1.yaml \</span><br><span class="line">    ./datasets/TUM/rgbd_dataset_freiburg1_desk \</span><br><span class="line">    ./datasets/TUM/rgbd_dataset_freiburg1_desk/associate.txt</span><br></pre></td></tr></table></figure><p>注意，最后两个参数一定要填对，如果你填写了错误的目录或文件名，执行命令后程序会阻塞，不会有任何有效输出（第一次运行的时候我就填错目录了，一直阻塞在那里，傻等了好久）</p><p>正常情况下，项目运行输出如下</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/a7fd2ea5ca2df3e3eedb44f18fb28660.png" alt="image.png"></p><h3 id="4-3-AutoDL云端运行"><a href="#4-3-AutoDL云端运行" class="headerlink" title="4.3. AutoDL云端运行"></a>4.3. AutoDL云端运行</h3><p>云端运行，VNC中能正常显示画面</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/081d1078f247d6de3efc232436fd7ef0.png" alt="image.png"></p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/d981c22438e163a0519b6446fcac1ef9.png" alt="image.png"></p><p>AutoDL云端运行后的输出如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">[root@autodl-container-0d454391d6-b3b7582b:~/gcn/ORB_SLAM3]$ ./Examples/RGB-D/rgbd_tum \</span><br><span class="line">&gt;     ./Vocabulary/ORBvoc.txt \</span><br><span class="line">&gt;     ./Examples/RGB-D/TUM1.yaml \</span><br><span class="line">&gt;     ./datasets/TUM/rgbd_dataset_freiburg1_desk \</span><br><span class="line">&gt;     ./datasets/TUM/rgbd_dataset_freiburg1_desk/associate.txt</span><br><span class="line"></span><br><span class="line">ORB-SLAM3 Copyright (C) 2017-2020 Carlos Campos, Richard Elvira, Juan J. Gómez, José M.M. Montiel and Juan D. Tardós, University of Zaragoza.</span><br><span class="line">ORB-SLAM2 Copyright (C) 2014-2016 Raúl Mur-Artal, José M.M. Montiel and Juan D. Tardós, University of Zaragoza.</span><br><span class="line">This program comes with ABSOLUTELY NO WARRANTY;</span><br><span class="line">This is free software, and you are welcome to redistribute it</span><br><span class="line">under certain conditions. See LICENSE.txt.</span><br><span class="line"></span><br><span class="line">Input sensor was set to: RGB-D</span><br><span class="line">Loading settings from ./Examples/RGB-D/TUM1.yaml</span><br><span class="line">        -Loaded camera 1</span><br><span class="line">Camera.newHeight optional parameter does not exist...</span><br><span class="line">Camera.newWidth optional parameter does not exist...</span><br><span class="line">        -Loaded image info</span><br><span class="line">        -Loaded RGB-D calibration</span><br><span class="line">        -Loaded ORB settings</span><br><span class="line">Viewer.imageViewScale optional parameter does not exist...</span><br><span class="line">        -Loaded viewer settings</span><br><span class="line">System.LoadAtlasFromFile optional parameter does not exist...</span><br><span class="line">System.SaveAtlasToFile optional parameter does not exist...</span><br><span class="line">        -Loaded Atlas settings</span><br><span class="line">System.thFarPoints optional parameter does not exist...</span><br><span class="line">        -Loaded misc parameters</span><br><span class="line">----------------------------------</span><br><span class="line">SLAM settings: </span><br><span class="line">        -Camera 1 parameters (Pinhole): [ 517.306 516.469 318.643 255.314 ]</span><br><span class="line">        -Camera 1 distortion parameters: [  0.262383 -0.953104 -0.005358 0.002628 1.16331 ]</span><br><span class="line">        -Original image size: [ 640 , 480 ]</span><br><span class="line">        -Current image size: [ 640 , 480 ]</span><br><span class="line">        -Sequence FPS: 30</span><br><span class="line">        -RGB-D depth map factor: 5000</span><br><span class="line">        -Features per image: 1000</span><br><span class="line">        -ORB scale factor: 1.2</span><br><span class="line">        -ORB number of scales: 8</span><br><span class="line">        -Initial FAST threshold: 20</span><br><span class="line">        -Min FAST threshold: 7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Loading ORB Vocabulary. This could take a while...</span><br><span class="line">Vocabulary loaded!</span><br><span class="line"></span><br><span class="line">Initialization of Atlas from scratch </span><br><span class="line">Creation of new map with id: 0</span><br><span class="line">Creation of new map with last KF id: 0</span><br><span class="line">Seq. Name: </span><br><span class="line">There are 1 cameras in the atlas</span><br><span class="line">Camera 0 is pinhole</span><br><span class="line"></span><br><span class="line">-------</span><br><span class="line">Start processing sequence ...</span><br><span class="line">Images in the sequence: 573</span><br><span class="line"></span><br><span class="line">First KF:0; Map init KF:0</span><br><span class="line">New Map created with 937 points</span><br><span class="line">Framebuffer with requested attributes not available. Using available framebuffer. You may see visual artifacts.Starting the Viewer</span><br><span class="line">Shutdown</span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">median tracking time: 0.0371458</span><br><span class="line">mean tracking time: 0.0415715</span><br><span class="line"></span><br><span class="line">Saving camera trajectory to CameraTrajectory.txt ...</span><br><span class="line"></span><br><span class="line">Saving keyframe trajectory to KeyFrameTrajectory.txt ...</span><br></pre></td></tr></table></figure><h3 id="4-4-本地虚拟机运行"><a href="#4-4-本地虚拟机运行" class="headerlink" title="4.4. 本地虚拟机运行"></a>4.4. 本地虚拟机运行</h3><p>示例环境：ubuntu 22.04 arm虚拟机下启动的ubuntu18.04 docker容器。</p><h4 id="4-4-1-解决段错误"><a href="#4-4-1-解决段错误" class="headerlink" title="4.4.1. 解决段错误"></a>4.4.1. 解决段错误</h4><p>本地虚拟机初次运行的时候遇到了段错误（有图像输出，主要是Shutdown的时候段错误）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-------</span><br><span class="line">Start processing sequence ...</span><br><span class="line">Images in the sequence: 573</span><br><span class="line"></span><br><span class="line">First KF:0; Map init KF:0</span><br><span class="line">New Map created with 939 points</span><br><span class="line">Starting the Viewer</span><br><span class="line">Shutdown</span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">median tracking time: 0.0136386</span><br><span class="line">mean tracking time: 0.0140401</span><br><span class="line"></span><br><span class="line">Saving camera trajectory to CameraTrajectory.txt ...</span><br><span class="line"></span><br><span class="line">Saving keyframe trajectory to KeyFrameTrajectory.txt ...</span><br><span class="line">Segmentation fault (core dumped)</span><br></pre></td></tr></table></figure><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/fb081dc6226497056b3613b2220e9aa9.png" alt="image.png"></p><p>根据：<a target="_blank" rel="noopener" href="https://github.com/UZ-SLAMLab/ORB_SLAM3/issues/452">github.com&#x2F;UZ-SLAMLab&#x2F;ORB_SLAM3&#x2F;issues&#x2F;452</a>，需要修改代码，主要修改<code>ORB_SLAM3/src/System.cc</code>中的<code>System::Shutdown()</code>函数，将函数中原有的注释去掉，并将最后一部分的<code>&quot;ORB-SLAM2: Map Viewer&quot;</code>改成<code>&quot;ORB-SLAM3: Map Viewer&quot;</code>。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">System::Shutdown</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function">unique_lock&lt;mutex&gt; <span class="title">lock</span><span class="params">(mMutexReset)</span></span>;</span><br><span class="line">        mbShutDown = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Shutdown&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    mpLocalMapper-&gt;<span class="built_in">RequestFinish</span>();</span><br><span class="line">    mpLoopCloser-&gt;<span class="built_in">RequestFinish</span>();</span><br><span class="line">    <span class="comment">// 取消这里代码的注释</span></span><br><span class="line">    <span class="keyword">if</span>(mpViewer)</span><br><span class="line">    &#123;</span><br><span class="line">        mpViewer-&gt;<span class="built_in">RequestFinish</span>();</span><br><span class="line">        <span class="keyword">while</span>(!mpViewer-&gt;<span class="built_in">isFinished</span>())</span><br><span class="line">            <span class="built_in">usleep</span>(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait until all thread have effectively stopped</span></span><br><span class="line">    <span class="keyword">while</span>(!mpLocalMapper-&gt;<span class="built_in">isFinished</span>() || !mpLoopCloser-&gt;<span class="built_in">isFinished</span>() || mpLoopCloser-&gt;<span class="built_in">isRunningGBA</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!mpLocalMapper-&gt;<span class="built_in">isFinished</span>())</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;mpLocalMapper is not finished&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span>(!mpLoopCloser-&gt;<span class="built_in">isFinished</span>())</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;mpLoopCloser is not finished&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span>(mpLoopCloser-&gt;<span class="built_in">isRunningGBA</span>())&#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;mpLoopCloser is running GBA&quot;</span> &lt;&lt; endl;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;break anyway...&quot;</span> &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">usleep</span>(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!mStrSaveAtlasToFile.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        Verbose::<span class="built_in">PrintMess</span>(<span class="string">&quot;Atlas saving to file &quot;</span> + mStrSaveAtlasToFile, Verbose::VERBOSITY_NORMAL);</span><br><span class="line">        <span class="built_in">SaveAtlas</span>(FileType::BINARY_FILE);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 此处注释取消并将ORB-SLAM2改成ORB-SLAM3</span></span><br><span class="line">    <span class="keyword">if</span>(mpViewer)</span><br><span class="line">        pangolin::<span class="built_in">BindToContext</span>(<span class="string">&quot;ORB-SLAM3: Map Viewer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> REGISTER_TIMES</span></span><br><span class="line">    mpTracker-&gt;<span class="built_in">PrintTimeStats</span>();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改后需要删除项目根目录下的build目录，重新编译</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/76d5b1f7b348d27099c2c4d5c075dee1.png" alt="image.png"></p><h4 id="4-4-2-运行结果"><a href="#4-4-2-运行结果" class="headerlink" title="4.4.2. 运行结果"></a>4.4.2. 运行结果</h4><p>重新编译后再次运行</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/02/7eaf968e45c9b489dff7572e15f1ca82.png" alt="image.png"></p><p>本地虚拟机运行结束后完整输出如下，这次没有段错误了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu-linux-22-04-02-desktop:/work/ORB_SLAM3# ./Examples/RGB-D/rgbd_tum \</span><br><span class="line">&gt;     ./Vocabulary/ORBvoc.txt \</span><br><span class="line">&gt;     ./Examples/RGB-D/TUM1.yaml \</span><br><span class="line">&gt;     ./datasets/TUM/rgbd_dataset_freiburg1_desk \</span><br><span class="line">&gt;     ./datasets/TUM/rgbd_dataset_freiburg1_desk/associate.txt</span><br><span class="line"></span><br><span class="line">ORB-SLAM3 Copyright (C) 2017-2020 Carlos Campos, Richard Elvira, Juan J. Gómez, José M.M. Montiel and Juan D. Tardós, University of Zaragoza.</span><br><span class="line">ORB-SLAM2 Copyright (C) 2014-2016 Raúl Mur-Artal, José M.M. Montiel and Juan D. Tardós, University of Zaragoza.</span><br><span class="line">This program comes with ABSOLUTELY NO WARRANTY;</span><br><span class="line">This is free software, and you are welcome to redistribute it</span><br><span class="line">under certain conditions. See LICENSE.txt.</span><br><span class="line"></span><br><span class="line">Input sensor was set to: RGB-D</span><br><span class="line">Loading settings from ./Examples/RGB-D/TUM1.yaml</span><br><span class="line">	-Loaded camera 1</span><br><span class="line">Camera.newHeight optional parameter does not exist...</span><br><span class="line">Camera.newWidth optional parameter does not exist...</span><br><span class="line">	-Loaded image info</span><br><span class="line">	-Loaded RGB-D calibration</span><br><span class="line">	-Loaded ORB settings</span><br><span class="line">Viewer.imageViewScale optional parameter does not exist...</span><br><span class="line">	-Loaded viewer settings</span><br><span class="line">System.LoadAtlasFromFile optional parameter does not exist...</span><br><span class="line">System.SaveAtlasToFile optional parameter does not exist...</span><br><span class="line">	-Loaded Atlas settings</span><br><span class="line">System.thFarPoints optional parameter does not exist...</span><br><span class="line">	-Loaded misc parameters</span><br><span class="line">----------------------------------</span><br><span class="line">SLAM settings: </span><br><span class="line">	-Camera 1 parameters (Pinhole): [ 517.306 516.469 318.643 255.314 ]</span><br><span class="line">	-Camera 1 distortion parameters: [  0.262383 -0.953104 -0.005358 0.002628 1.16331 ]</span><br><span class="line">	-Original image size: [ 640 , 480 ]</span><br><span class="line">	-Current image size: [ 640 , 480 ]</span><br><span class="line">	-Sequence FPS: 30</span><br><span class="line">	-RGB-D depth map factor: 5000</span><br><span class="line">	-Features per image: 1000</span><br><span class="line">	-ORB scale factor: 1.2</span><br><span class="line">	-ORB number of scales: 8</span><br><span class="line">	-Initial FAST threshold: 20</span><br><span class="line">	-Min FAST threshold: 7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Loading ORB Vocabulary. This could take a while...</span><br><span class="line">Vocabulary loaded!</span><br><span class="line"></span><br><span class="line">Initialization of Atlas from scratch </span><br><span class="line">Creation of new map with id: 0</span><br><span class="line">Creation of new map with last KF id: 0</span><br><span class="line">Seq. Name: </span><br><span class="line">There are 1 cameras in the atlas</span><br><span class="line">Camera 0 is pinhole</span><br><span class="line"></span><br><span class="line">-------</span><br><span class="line">Start processing sequence ...</span><br><span class="line">Images in the sequence: 573</span><br><span class="line"></span><br><span class="line">First KF:0; Map init KF:0</span><br><span class="line">New Map created with 939 points</span><br><span class="line">Starting the Viewer</span><br><span class="line">Shutdown</span><br><span class="line">-------</span><br><span class="line"></span><br><span class="line">median tracking time: 0.0124658</span><br><span class="line">mean tracking time: 0.0127179</span><br><span class="line"></span><br><span class="line">Saving camera trajectory to CameraTrajectory.txt ...</span><br><span class="line"></span><br><span class="line">Saving keyframe trajectory to KeyFrameTrajectory.txt ...</span><br><span class="line">root@ubuntu-linux-22-04-02-desktop:/work/ORB_SLAM3# </span><br></pre></td></tr></table></figure><h3 id="4-5-结果对比"><a href="#4-5-结果对比" class="headerlink" title="4.5. 结果对比"></a>4.5. 结果对比</h3><p>从输出结果来看，本地4核8G的虚拟机环境运行速度为<code>0.0124658</code>，约合<code>80.2 HZ</code>，快于AutoDL云端12核+2080ti环境运行的<code>0.0371458</code>，约合<code>26.9 HZ</code>。由于ORB-SLAM3不依赖于PyTorch，<strong>应该</strong>没有使用显卡的解算能力（俺不确定哈），这部分差异主要是由于CPU造成的。云端CPU和GPU都是容器化共享的，因此影响了性能。</p><p>而且，在GCNv2的本地纯CPU运行中（相同环境），由于缺少显卡，只跑出了可怜巴巴的<code>0.5HZ</code>的速度，可见在无显卡环境中ORB-SLAM3运行速度快于GCNv2-SLAM。至于二者的性能和精度，暂时不太清楚如何对比。</p><h2 id="5-The-end"><a href="#5-The-end" class="headerlink" title="5. The end"></a>5. The end</h2><p>本文简单介绍了如何使用ORB-SLAM3运行TUM RGB-D数据集，纯CPU运行快于GCNv2-SLAM。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.musnow.top">慕雪年华</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.musnow.top/posts/7873538113/">https://blog.musnow.top/posts/7873538113/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.musnow.top" target="_blank">慕雪的寒舍</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Cpp/">Cpp</a><a class="post-meta__tags" href="/tags/SLAM/">SLAM</a></div><div class="post_share"><div class="social-share" data-image="https://img.musnow.top/i/2025/02/fb081dc6226497056b3613b2220e9aa9.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://ifdian.net/a/128ahri" target="_blank"><img class="post-qr-code-img" src="/img/ico/aifadian.png" alt="爱发电"></a><div class="post-qr-code-desc">爱发电</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/4031478666/" title="【Linux】解决使用apt时“unable to initialize frontend: Dialog”的警告"><img class="cover" src="/img/bg/gm12.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【Linux】解决使用apt时“unable to initialize frontend: Dialog”的警告</div></div></a></div><div class="next-post pull-right"><a href="/posts/1071165018/" title="【SLAM】于AutoDL云上GPU运行GCNv2_SLAM的记录"><img class="cover" src="https://img.musnow.top/i/2025/02/c16bf7fe837c06718a76843ba7b923eb.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【SLAM】于AutoDL云上GPU运行GCNv2_SLAM的记录</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/1589125738/" title="【SLAM】于ubuntu18.04上纯CPU运行GCNv2_SLAM的记录（ARM64&#x2F;AMD64）"><img class="cover" src="https://img.musnow.top/i/2025/01/1cf6ea0426239abcba02e8a38ce24bea.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-31</div><div class="title">【SLAM】于ubuntu18.04上纯CPU运行GCNv2_SLAM的记录（ARM64&#x2F;AMD64）</div></div></a></div><div><a href="/posts/1071165018/" title="【SLAM】于AutoDL云上GPU运行GCNv2_SLAM的记录"><img class="cover" src="https://img.musnow.top/i/2025/02/c16bf7fe837c06718a76843ba7b923eb.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-02</div><div class="title">【SLAM】于AutoDL云上GPU运行GCNv2_SLAM的记录</div></div></a></div><div><a href="/posts/5090585017/" title="【SLAM】在 ubuntu 18.04 arm 中以ROS环境编译与运行ORB_SLAM3"><img class="cover" src="https://img.musnow.top/i/2025/02/4532d161bce1a806b99e91a7f55c5097.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-02-09</div><div class="title">【SLAM】在 ubuntu 18.04 arm 中以ROS环境编译与运行ORB_SLAM3</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/favicon.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">慕雪年华</div><div class="author-info__description">爱折腾的代码初学者</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">429</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">73</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/musnows"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:muxue@musnow.top" target="_blank" title="email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://gitee.com/musnows" target="_blank" title="Gitee"><i class="fa-sharp fa-solid fa-g"></i></a><a class="social-icon" href="https://blog.csdn.net/muxuen" target="_blank" title="CSDN"><i class="fa-brands fa-blogger-b"></i></a><a class="social-icon" href="https://musnow.top/?utm_source=blog" target="_blank" title="个人主页"><i class="fas fa-globe-asia"></i></a><a class="social-icon" href="https://web.musnow.top/?utm_source=blog" target="_blank" title="导航站点"><i class="fas fa-server"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到寒舍</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1. 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85"><span class="toc-text">2. 依赖安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE"><span class="toc-text">3. 编译项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8TUM-RGB-D%E6%95%B0%E6%8D%AE%E9%9B%86%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-text">4. 使用TUM RGB-D数据集运行项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%8B%E8%BD%BD%E5%92%8C%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E9%9B%86"><span class="toc-text">4.1. 下载和处理数据集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-text">4.2. 运行项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-AutoDL%E4%BA%91%E7%AB%AF%E8%BF%90%E8%A1%8C"><span class="toc-text">4.3. AutoDL云端运行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E6%9C%AC%E5%9C%B0%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%BF%90%E8%A1%8C"><span class="toc-text">4.4. 本地虚拟机运行</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-1-%E8%A7%A3%E5%86%B3%E6%AE%B5%E9%94%99%E8%AF%AF"><span class="toc-text">4.4.1. 解决段错误</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-2-%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-text">4.4.2. 运行结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%BB%93%E6%9E%9C%E5%AF%B9%E6%AF%94"><span class="toc-text">4.5. 结果对比</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-The-end"><span class="toc-text">5. The end</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/8855455861/" title="【Hexo】hexo-butterfly主题添加影评书评页面">【Hexo】hexo-butterfly主题添加影评书评页面</a><time datetime="2025-02-12T05:49:29.000Z" title="发表于 2025-02-12 13:49:29">2025-02-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/5090585017/" title="【SLAM】在 ubuntu 18.04 arm 中以ROS环境编译与运行ORB_SLAM3">【SLAM】在 ubuntu 18.04 arm 中以ROS环境编译与运行ORB_SLAM3</a><time datetime="2025-02-09T08:18:59.000Z" title="发表于 2025-02-09 16:18:59">2025-02-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/3771271576/" title="【Linux】在 ubuntu 18.04 arm 容器中安装ROS环境">【Linux】在 ubuntu 18.04 arm 容器中安装ROS环境</a><time datetime="2025-02-09T05:06:07.000Z" title="发表于 2025-02-09 13:06:07">2025-02-09</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4031478666/" title="【Linux】解决使用apt时“unable to initialize frontend: Dialog”的警告">【Linux】解决使用apt时“unable to initialize frontend: Dialog”的警告</a><time datetime="2025-02-08T09:39:23.000Z" title="发表于 2025-02-08 17:39:23">2025-02-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/main/mothra.webp)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2025 By 慕雪年华</div><div class="footer_custom_text"><img src="/img/ico/gonganbeian.png" height="15">&nbsp;<a href="https://beian.mps.gov.cn/#/query/webSearch?code=44190002007715" rel="noreferrer" target="_blank">粤公网安备44190002007715</a><br><a href="https://icp.gov.moe/?keyword=20230054" target="_blank"><img src="/img/badge/-%E8%90%8CICP%E5%A4%8720230054-ff69b4.svg" height="20px"></a>&nbsp<a href="/sitemap.xml" target="_blank"><img src="/img/badge/-SITEMAP-00CDCD.svg" height="20px"></a>&nbsp<a href="https://beian.miit.gov.cn/" target="_blank"><img src="/img/badge/%E7%B2%A4ICP%E5%A4%872023007189-red.svg" height="20px"></a><br><a href="https://www.foreverblog.cn/go.html" target="_blank"><img src="/img/ico/wormhole_1_tp.gif" height="25px"></a>&nbsp<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="/img/ico/upyun_cdn_w.png" height="25px"></a>&nbsp<a href="https://www.travellings.cn/go.html" target="_blank"><img src="/img/ico/travelling_icon.gif" height="25px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/main.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/17.8.3/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.2/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadArtalk () {
  function initArtalk () {
    window.artalkItem = new Artalk(Object.assign({
      el: '#artalk-wrap',
      server: 'https://artk.musnow.top',
      site: 'mublog',
      pageKey: location.pathname,
      darkMode: document.documentElement.getAttribute('data-theme') === 'dark',
      countEl: '.artalk-count'
    },null))

    if (GLOBAL_CONFIG.lightbox === 'null') return
    window.artalkItem.use(ctx => {
      ctx.on('list-loaded', () => {
        ctx.getCommentList().forEach(comment => {
          const $content = comment.getRender().$content
          btf.loadLightbox($content.querySelectorAll('img:not([atk-emoticon])'))
        })
      })
    })
  }

  if (typeof window.artalkItem === 'object') initArtalk()
  else {
    getCSS('https://cdnjs.cloudflare.com/ajax/libs/artalk/2.5.5/Artalk.min.css').then(()=>{
      getScript('https://cdnjs.cloudflare.com/ajax/libs/artalk/2.5.5/Artalk.min.js').then(initArtalk)
    })
  }
}

function artalkChangeMode (theme) {
  const artalkWrap = document.getElementById('artalk-wrap')
  if (!(artalkWrap && artalkWrap.children.length)) return
  const isDark = theme === 'dark'
  window.artalkItem.setDarkMode(isDark)
}

btf.addModeChange('artalk', artalkChangeMode)

if ('Artalk' === 'Artalk' || !false) {
  if (false) btf.loadComment(document.getElementById('artalk-wrap'), loadArtalk)
  else loadArtalk()
} else {
  function loadOtherComment () {
    loadArtalk()
  }
}</script></div><script src="/js/domain_check.js"></script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async mobile="false"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/search/local-search.min.js"></script></div></div></body></html>