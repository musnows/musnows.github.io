<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>【思源笔记】思源笔记配置S3同步 | 慕雪的寒舍</title><meta name="author" content="慕雪年华"><meta name="copyright" content="慕雪年华"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一步一步引导诸位配置思源笔记的S3同步。"><meta property="og:type" content="article"><meta property="og:title" content="【思源笔记】思源笔记配置S3同步"><meta property="og:url" content="https://blog.musnow.top/posts/1277165852/index.html"><meta property="og:site_name" content="慕雪的寒舍"><meta property="og:description" content="一步一步引导诸位配置思源笔记的S3同步。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.musnow.top/i/2024/07/2a32b8f8acb8cc9f68982a7041db8297.png"><meta property="article:published_time" content="2024-07-16T12:41:44.000Z"><meta property="article:modified_time" content="2024-09-20T22:57:26.000Z"><meta property="article:author" content="慕雪年华"><meta property="article:tag" content="Docker"><meta property="article:tag" content="思源笔记"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.musnow.top/i/2024/07/2a32b8f8acb8cc9f68982a7041db8297.png"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.musnow.top/posts/1277165852/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="google-site-verification" content="iR4A6ntiwhI9JX_YDe2ZFY6DerPD7c-NaLyIDlrDguY"><meta name="msvalidate.01" content="D5CD621F38EE3FB5071F785AD4977161"><meta name="baidu-site-verification" content="codeva-aZGKJiqRSI"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: {"limitDay":180,"position":"top","messagePrev":"距离上次更新本文已经过去了","messageNext":"天，文章部分内容可能已经过时，请注意甄别"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":420},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":600,"languages":{"author":"作者: 慕雪年华","link":"链接: ","source":"来源: 慕雪的寒舍","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"【思源笔记】思源笔记配置S3同步",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-09-21 06:57:26"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/equipment/equipment.css?1"><script>!function(r){"use strict";!function(){var t=window,s=document,e=r,c="".concat("https:"===s.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),i=s.createElement("script"),n=s.getElementsByTagName("script")[0];i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.async=!0,i.src=c,i.id="LA_COLLECT",e.d=i;function o(){t.LA.ids.push(e)}t.LA?t.LA.ids&&o():(t.LA=r,t.LA.ids=[],o()),n.parentNode.insertBefore(i,n)}()}({id:"JwxEfuZ8fwQ1GPEq",ck:"JwxEfuZ8fwQ1GPEq"})</script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="慕雪的寒舍" type="application/atom+xml"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/favicon.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">412</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-friends"></i><span> 友人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> 朋友圈</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> 虫洞</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-glass-whiskey"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fab fa-blackberry"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> 背包</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> 说说</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url(https://img.musnow.top/i/2024/07/2a32b8f8acb8cc9f68982a7041db8297.png)"><nav id="nav"><span id="blog-info"><a href="/" title="慕雪的寒舍"><img class="site-icon" src="/favicon.jpg"><span class="site-name">慕雪的寒舍</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-user-friends"></i><span> 友人</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> 朋友圈</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> 开往</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> 虫洞</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> 异次元</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-glass-whiskey"></i><span> 镜像</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fab fa-blackberry"></i><span> 更多</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> 画廊</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> 背包</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> 说说</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">【思源笔记】思源笔记配置S3同步</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-07-16T12:41:44.000Z" title="发表于 2024-07-16 20:41:44">2024-07-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-09-20T22:57:26.000Z" title="更新于 2024-09-21 06:57:26">2024-09-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/">编程学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0/Docker%E7%9C%9F%E5%A5%BD%E7%8E%A9/">Docker真好玩</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="【思源笔记】思源笔记配置S3同步"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="ArtalkPV"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-写在前面"><a href="#1-写在前面" class="headerlink" title="1. 写在前面"></a>1. 写在前面</h2><p><a target="_blank" rel="noopener" href="https://b3log.org/siyuan/">思源笔记</a>是一款由国人开发的本地优先，支持双链、块级的开源笔记软件。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/2a32b8f8acb8cc9f68982a7041db8297.png" alt="image.png"></p><p>思源笔记采用json作为数据存储格式，编辑器兼容MarkDown语法且编辑体验极佳（堪比Typora）。最重要的是，<strong>自带同步功能</strong>。它是我目前使用过的所有笔记软件中，最适合个人多设备使用的笔记软件，既能简单的实现多设备同步，又能保证数据本地化，不受在线笔记产品会员资费、云服务宕机的困扰。</p><blockquote><p>你可以在官网找到下载页面，也可以去Github Release中下载：<a target="_blank" rel="noopener" href="https://b3log.org/siyuan/download.html">https://b3log.org/siyuan/download.html</a></p></blockquote><p>思源笔记基础版本提供了几乎所有笔记相关的功能，会员版本分为永久买断功能特性和年付订阅，详见<a target="_blank" rel="noopener" href="https://b3log.org/siyuan/pricing.html">价格页面</a>:</p><ul><li>永久买断：在所有基础功能的基础上，提供S3&#x2F;WEBDAV同步功能（需自行使用第三方服务）</li><li>年付订阅：在永久买断的基础上，提供官方的同步功能（8GB空间），且支持图床（可以将自己的图片上传至官方图床并在博客中引用）和剪藏、微信收集箱（通过微信公众号实时记录笔记并保存到思源笔记中）功能。</li><li>注意，若年付订阅者想使用S3&#x2F;WEBDAV同步功能，<strong>则需要保持按年付费</strong>，会员失效后无法使用S3&#x2F;WEBDAV功能，若想永久使用这两个功能，也需要购买永久买断的功能特性。</li></ul><p>如下图所示，<strong>付费版本和免费版本的区别只有同步功能是否可以使用</strong>，不会存在基础笔记共的限制。个人感觉目前64元买断的价格还是非常香的（之前早鸟付费是48元）。考虑到这里标了个原价96，建议对思源笔记感兴趣，且使用后觉得确实不错的老哥趁早购买功能特性，不排除后续可能会恢复原价96的情况。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/bd7cf06a72bae304c8222f78bf126f94.png" alt="image.png"></p><p>另外，除非你不太想折腾S3同步（本文就是教你怎么做的），个人其实不太建议购买年付订阅：</p><ul><li>一是提供的同步空间有点小（社区里不少用户反馈认为8GB太少了，虽然对于我来说是够用）；</li><li>二是S3的配置并不算麻烦，而官方提供的同步功能和S3同步基本没有体验差异。只要敢于尝试配置S3，完全可以省下这笔钱。</li></ul><p>不过这里有个小提醒，不管是功能特性还是年付订阅均<strong>不支持退款</strong>，付款前请三思。</p><h2 id="2-什么是思源笔记的S3-x2F-WEBDAV同步？"><a href="#2-什么是思源笔记的S3-x2F-WEBDAV同步？" class="headerlink" title="2. 什么是思源笔记的S3&#x2F;WEBDAV同步？"></a>2. 什么是思源笔记的S3&#x2F;WEBDAV同步？</h2><h3 id="2-1-说明"><a href="#2-1-说明" class="headerlink" title="2.1. 说明"></a>2.1. 说明</h3><p>思源笔记本身是一个<strong>本地</strong>的笔记软件，提供了端到端加密的S3&#x2F;WEBDAV或官方提供的同步功能。当你安装思源笔记后，在默认的思源用户指南笔记本中，可以看到有一整个章节都是关于数据安全的描述：</p><ul><li>思源云端同步使用端到端加密，密码在本地通过内置密钥加密保存，除使用者之外的任何第三方均无法在云端获得明文数据。</li><li>加密和解密过程完全在本地设备上进行</li><li>加密算法为业界公认安全的 AES GCM；</li></ul><p>端到端加密同步功能，简单来说，就是思源笔记使用一个密钥，先在你的电脑上将需要同步的笔记内容加密成密文，然后发送给云端。当这些数据在网络中开始流动时，它们已经是加密后的内容了，最终存放在云端服务商里面的内容也是加密后的，<strong>对于不知道密钥的其他人来说，这一堆数据和乱码没有区别</strong>。在你需要同步的<strong>另外一台设备</strong>中，它会下载云端的加密内容，数据在流入这台设备之前也是一堆乱码，只能在你的设备中，通过相同的密钥才能正确解密，还原出最初的笔记内容。</p><p>这个功能的启用，意味着除非你自己知道你的数据库密钥，否则即便别人获取到了你存放在云端的全量同步数据，<strong>也无法解密内容</strong>。这样一来也完全避免了云端服务商可能存在的扫盘而带来的隐私担忧。与之对应的是，<strong>如果你忘记了你的数据库密钥</strong>，且没有进行其他备份的话，那么任何人都没有办法解密你的<strong>云端</strong>笔记数据了。</p><p>思源提供S3和WEBDAV这两个不同的云端存储服务协议进行同步。<strong>其中S3协议的可靠性和稳定性远远优于WEBDAV</strong>，除非特殊情况，否则百分百不推荐使用WEBDAV进行同步。</p><p>当你配置了S3&#x2F;WEBDAV同步之后，只需要在其他设备上使用相同的同步配置以及数据库密钥，即可以实现多设备的同步。思源提供了<strong>三种同步选项</strong>，分别是完全手动、半自动（客户端开启和关闭的时候会自动同步一次，其余时间手动同步）、自动同步（停止修改后30S自动同步一次）。</p><blockquote><p>这里推荐手机APP采用<strong>全手动</strong>模式，因为手机端界面按钮较小，极其容易误触导致意外修改一些内容，完全手动同步可以避免这些意外修改的内容被上传。电脑客户端根据您自己的需要选择半自动或全自动。另外，手机APP也可以在设置中配置为<strong>默认只读</strong>状态，这样可以避免修改笔记内容。</p></blockquote><p>但需要注意的是，思源的加密仅限于同步到云端的数据，你的<strong>笔记在设备本地是明文存储的</strong>。也就是说，如果你的设备丢失，那么任何人都可以<strong>在设备本地的硬盘中读取到你的笔记明文内容</strong>。除非你对笔记所在文件夹使用其他软件或系统功能进行了加密，比如微软的BitLocker。</p><p>作为一个本地优先的笔记软件，配置了同步后，即便没有网络，也丝毫不影响你浏览本地已有笔记内容（只不过会有一个无法同步的提示）。这一点对于我个人来说非常重要，我已经遇到过两次因为云端服务商产品协议更改或服务器访问波动导致我急需阅读笔记的时候无法阅读了。在那之后，我就把我所有的笔记内容全都转为纯本地了，包括笔记内的图片附件。</p><p>思源对大文本（超过4W字）的笔记支持也非常不错，毕竟是个本地笔记软件，性能基本取决于你的电脑配置。不过要注意尽量别把思源的工作空间放在机械硬盘上。</p><blockquote><p>我曾使用过语雀存放我计算机网络的笔记（大约5.7W字），语雀会直接卡到完全不能动弹，整个页面都卡死了。即便我过几天再上去打开那个文档，也依旧是这样。不过flowus对这种大文本支持也还算不错，不会卡死。但是flowus的免费用户直接限制成了200MB的存储空间也太抠了，我一个计算机网络笔记里面的图片和附件就不止这么多了。</p></blockquote><p>咳咳，不跑题了，回到正文。</p><h3 id="2-2-思源的同步配置和工作空间"><a href="#2-2-思源的同步配置和工作空间" class="headerlink" title="2.2. 思源的同步配置和工作空间"></a>2.2. 思源的同步配置和工作空间</h3><blockquote><p>本文将以2024-07-17可下载到的最新思源版本<code>V3.1.1</code>做演示。</p></blockquote><p>思源笔记以<code>工作空间</code>为基础，独立进行各类主题、设置、密钥、同步配置。工作空间就是你的电脑上的一个文件夹，在这个工作空间中产生的各类笔记本和附件，都会被存放到这个工作空间的文件夹中。每个工作空间之间相互独立，没有任何关联，也需要进行独立的同步配置，和obisidian的vault是同一个概念。</p><p>为了避免出现同步错误，每个工作空间不可共用S3的bucket或同一个WEBDAV的同步路径。正确配置方式是每一个工作空间<strong>独立使用</strong>一个S3同步的bucket或者WEBDAV同步目录。</p><p>另外，因为思源笔记经常会实时进行本地文件的索引，所以不能将思源笔记的工作空间文件夹选择放在坚果云、OneDrive这类会进行实时同步的同步目录中，<strong>必须将思源的工作空间文件夹存放在一个和其他任何软件都没有任何关系的文件目录中</strong>。若想同步，请使用思源笔记自带的同步功能；若想备份，思源笔记的设置中有一个<code>导出-导出DATA</code>功能，这个功能会将整个工作空间的笔记和附件全量导出为一个压缩包，可以在另外一个设备上进行导入或上传至云盘进行备份。</p><p>在你初次打开思源笔记的界面下，也会有相关的提示。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/92ce5419aa5e159e68dca2e1a39ca0be.png" alt="image.png"></p><p>选择工作空间文件夹的时候也会有提示，不能放在同步盘的路径中。如上文所述，在一个和其他任何软件都没有关系的独立文件夹中创建一个文件夹来存放思源笔记的工作空间，选中这个文件夹后，下方的弹窗点击确定就可以了。</p><p><strong>这只是个每次都会出现的提示</strong>，并不代表你当前选中的文件夹有这些第三方同步盘配置。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/7f858cb23ae59c2d46d4491f8fdabaca.png" alt="image.png"></p><h3 id="2-3-什么是S3协议？"><a href="#2-3-什么是S3协议？" class="headerlink" title="2.3. 什么是S3协议？"></a>2.3. 什么是S3协议？</h3><p>S3是一个对象存储的公共协议，目前国内主流的云服务厂商如阿里云、腾讯云、七牛云等等都会提供兼容S3协议的对象存储的服务。您可以选择任意一家您熟悉的支持对象存储的服务提供商来配置思源的S3同步，并不局限于本文举例的服务商。</p><p>如果您是第一次使用思源笔记，且没有接触过S3对象存储，个人推荐有免费额度的<strong>七牛云</strong>作为入门选择。我已经使用七牛云超过一年了，暂未遇到过收到影响的无法访问的情况，稳定性还是不错的。</p><p>几乎所有服务商的对象存储服务，都是分为两个计费项的：</p><ul><li>流量计费；</li><li>存储空间计费；</li></ul><p>存储空间计费比较好理解，就是为你存储空间占用的硬盘容量付钱。流量付费对于小白来说可能没有听说过，因为商用宽带是很贵的，所以云服务厂家为您提供服务时，需要收取带宽的流量费用。一般情况下来说，都是<strong>上传不计费（公网流入不计费），下载才计费（外网流出计费）</strong>。举个例子，您使用思源笔记，将本地的文件同步到S3时，使用的是<code>上传</code>宽带，这一部分是不计费的；而在另外一台设备上，将云端的内容同步到本地时，使用的是<code>下载</code>操作，会产生公网流出流量，这一部分就需要计费了。</p><blockquote><p>公网&#x2F;外网流出：“流出”是针对于云服务而言的，您从云服务上下载文件，对于云服务器来说是把文件发送给您的设备，数据流向是从云服务器到您的设备上的，这会产生从云服务器出去的流量，即为公网流出&#x2F;外网流出流量。</p></blockquote><p>如果您的设备不多，这部分由同步产生的下载流量费用是不高的。以我个人举例，我使用的思源笔记目前存储空间只有1GB，在七牛云产生的资费只有极低的外网流出流量的费用。</p><p>如下是2024年6月的账单，可以看到存储空间容量直接扣除了免费的额度，不用钱。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/e246955816ceef383e0dceb4f7c02a5c.png" alt="image.png"></p><p>外网流出流量2.68GB，扣费0.77元。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/58892f2e7d28d94f96bc41efa0ef47d7.png" alt="image.png"></p><p>PUT&#x2F;DELETE和GET请求都没有超过免费额度，都不用钱。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/9b7bc32056f81b49039199e2b4d9743a.png" alt="image.png"></p><p>还需要解释的一点是，假设您的某个工作空间A只在设备B上存在，并配置了S3同步。此时虽然没有第二个设备去访问这个S3存储桶进行<code>下载</code>同步操作，但实际上你的当前设备B也会需要去访问云端空间，下载数据库进行与本地的对比和验证操作的，这样思源才能知道本地的工作空间A已经成功同步到S3的bucket中了。<strong>所以即便您的工作空间只存在于B设备上，但依旧会产生少许的外网流出流量</strong>。</p><h2 id="3-配置思源S3同步"><a href="#3-配置思源S3同步" class="headerlink" title="3. 配置思源S3同步"></a>3. 配置思源S3同步</h2><h3 id="3-1-初始化数据仓库密钥"><a href="#3-1-初始化数据仓库密钥" class="headerlink" title="3.1. 初始化数据仓库密钥"></a>3.1. 初始化数据仓库密钥</h3><p>初次使用思源时，创建了一个工作空间后，要做的第一件事是在<code>设置-关于</code>中，初始化你的仓库密钥。思源会使用这个密钥进行端到端加密，密钥只有你当前使用的设备能知道。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/1003cc7ab75d392c3a727ceaf8b29f08.png" alt="image.png"></p><p>点击自动生成密钥，这里会提示您如果在其他设备上已经有工作空间时，应该选择导入密钥。而我们当前是新建的一个工作空间，需要初始化密钥，点击确定即可。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/3dd380d46081974cce118403a3e06d5d.png" alt="image.png"></p><p>密钥初始化完毕后，这里会显示复制密钥字符串，如果你需要在其他设备上同步这个工作空间的内容，可以在这里复制密钥，然后在另外一台设备上（比如手机app或者另外一台电脑）思源app设置的<code>设置-关于-数据仓库密钥</code>中，选择<strong>导入密钥</strong>。两台设备只有密钥一致，才能正确解密云端同步的数据。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/7521b39d5081c25ee529b5ccc488b8c9.png" alt="image.png"></p><h3 id="3-2-思源S3同步界面"><a href="#3-2-思源S3同步界面" class="headerlink" title="3.2. 思源S3同步界面"></a>3.2. 思源S3同步界面</h3><p>思源的S3同步界面是在<code>右上角按钮-设置-云端</code>里面的，在使用同步功能之前，需要先在<strong>账户</strong>一栏登录你的思源账户（用于验证是否购买了订阅）。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/2df437c04fb0dc9213678ff62a421653.png" alt="image.png"></p><p>登录了之后，云端选项就会开放，在下拉菜单中选择S3即可。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/480859be7370f05529b8829c01904a60.png" alt="image.png"></p><p>你可以先记住这里的几个配置条目，后文会一一说明它们的对应内容。</p><h3 id="3-3-配置七牛云KODO"><a href="#3-3-配置七牛云KODO" class="headerlink" title="3.3. 配置七牛云KODO"></a>3.3. 配置七牛云KODO</h3><p>使用浏览器搜索并打开 <a target="_blank" rel="noopener" href="https://s.qiniu.com/JJ3aAf">七牛云</a> 官网，注册账户。</p><p>七牛云的S3对象存储服务名为KODO，在它的<a target="_blank" rel="noopener" href="https://www.qiniu.com/prices/kodo">定价页面</a>，你可以看到七牛云提供了每月10GB的免费存储空间和10GB的CDN回源流量额度。对于思源笔记的用途而言，CDN是用不上的，所以这个10G的CDN回源流量额度是用不到的，<strong>但10GB的存储空间额度可以用上了</strong>。至于后续的PUT&#x2F;DELETE还有GET的免费额度可以不用管，基本是用不完的。</p><p>这里也说明了上传流量是免费的，符合前文关于S3计费项目的介绍。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/284ac975a2928deb82469434bd5426c0.png" alt="image.png"></p><p>另外，在这个页面也有一个<a target="_blank" rel="noopener" href="https://www.qiniu.com/prices/kodo?tab=calc">价格计算器</a>，你可以根据你的存储空间容量和设备数量来估计你最终会流出多少流量以及产生的资费。思源笔记的容量大小可以打开本地工作空间的文件夹查看内部data文件夹的占用空间。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/db52829d391cd219ec5be752b65a4bf3.png" alt="image.png"></p><p>每个月的外网流出流量（也就是你的同步下载流量）平均到每月大概是在笔记本容量的1.5倍左右。注意：这只是个我根据个人情况<strong>猜测出来的大概比例</strong>，不代表实际情况，只用于预估价格。</p><p>如下图所示，假设你有10GB的笔记容量空间，那么外网流出流量一个月可能会需要15GB，那么每个月产生的资费是4.35元左右。这只是流出流量的费用，因为10GB的存储空间是免费的，<strong>只有超出10GB存储空间的免费额度，才需要对存储空间进行按量计费</strong>。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/9ca445e8b78103c7743e4aeeaae6d5a9.png" alt="image.png"></p><p>现在你已经了解定价啦，建议给七牛云充值5元，避免超出免费额度的扣费导致服务终止。</p><p>接下来，看看怎么配置七牛云的S3同步吧。</p><p>登录七牛云后，点击右上角账户旁边的控制台按钮，进入后台，点击产品与方案，选择对象存储kodo。你可以在这里选择将其钉住，这样会直接显示在侧边栏上。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/0706e3ee43433f31fa2789e222f35a35.png" alt="image.png"></p><p>在对象存储栏目中，点击空间管理，点击新建空间，这会创建一个bucket，也对应的思源S3同步中bucket一栏的填写项。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/b9463c8ecd8c05327a5155b9145cc241.png" alt="image.png"></p><p>bucket的名字根据你的喜好填写，<strong>建议填写辨识度高的名字</strong>，而不要填写一个诸如siyuan这类没有什么辨识度的名字。辨识度高的名字方便你后续创建更多bucket来对应其他思源工作空间或其他软件。</p><p>地域的选择采取就近原则，除非你人在国外，否则请不要选择非大陆地域。</p><p>访问控制选择<strong>私有</strong>，这代表只有拥有你的七牛云账户和相关密钥的软件可以访问这个bucket，其他任何人都没有办法直接访问这个bucket。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/384a403c846ce69b5d0437b53008dbe2.png" alt="image.png"></p><p>点击确定后，会弹出如下的提示。这里是很多新手朋友不太理解的一点，什么是测试域名？为什么有效期只有30天？实际上，这个域名是用于<strong>公开bucket</strong>的访问的，刚刚我们创建bucket的时候已经选择了私有，<strong>这个域名对于思源同步来说没有任何用处</strong>，也就不用管他的30天过期说明！直接点击<code>好的,我知道了</code>忽略这个提示即可！</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/ea73be35361f1647eb68fa5b810e2258.png" alt="image.png"></p><p>现在我们已经创建了一个新的bucket，点击它的名字，即可进入bucket的管理页面</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/ca825415de2154c81ad5fc4e82c60b8d.png" alt="image.png"></p><p>在bucket的空间概览中，可以看到当前bucket的存储空间占用量，以及外网流出流量统计。我们需要记录的是右下角的这个存储空间域名。这个存储空间域名的格式如下所示</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http(s)://siyuan-bucket-1.s3.cn-east-1.qiniucs.com</span><br><span class="line">http(s)://&lt;bucket名字&gt;.s3.cn-east-1.qiniucs.com</span><br><span class="line">http(s)://&lt;bucket名字&gt;.&lt;协议&gt;.cn-east-1.qiniucs.com</span><br><span class="line">http(s)://&lt;bucket名字&gt;.&lt;协议&gt;.&lt;区域名字&gt;.qiniucs.com</span><br></pre></td></tr></table></figure><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/f8bf7b43794bb2c22fd9a51f7988c20a.png" alt="image.png"></p><p>回到思源的配置中，现在可以填写一部分内容了</p><ul><li>Bucket：对应刚刚你创建的存储空间的名字，在我的示例中，是<code>siyuan-bucket-1</code>;</li><li>Endpoint：填写域名中除了bucket名字以外的部分，即<code>https://s3.cn-east-1.qiniucs.com</code>，开头是<code>https://</code>，不能带括号；</li><li>Region：填写域名中显示的区域名字，即<code>cn-east-1</code>；</li></ul><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/d6d18a4d349bb3384f256082620f76b3.png" alt="image.png"></p><p>还剩下两个内容分别是Access Key和Secret Key，正如它们的名字翻译过来的结果，这两个是访问你这个bucket的用户密钥，也是你的七牛云账户的密钥。这是你的<strong>私密信息</strong>，请一定<strong>不要将用户密钥发送给任何人或发送到论坛上</strong>！</p><p>这两个密钥的获取位置是在七牛云界面的右上角，鼠标移动到你的用户头像位置，会弹出一个选择框，点击里面的密钥管理。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/4ab349939ae1115bf41ecc1c2c60f8c6.png" alt="image.png"></p><p>这里我已经创建过两组密钥了，我不记得新用户进到这个界面时是否会有一个创建密钥的提示了。总之你可以创建一组密钥，然后分别复制这里的<strong>AK和SK</strong>，填写到思源笔记的Access Key和Secret Key中，同步配置就完成了！</p><blockquote><p>如果你认为你的七牛云密钥已经泄漏，可以选择停用密钥，停用后删除这个密钥，再重新创建一个新密钥即可。这样原本的密钥就失效了。</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/723f04ab1bc1f51300e4bf2dfe07706d.png" alt="image.png"></p><p>填写完毕后，点击下方的启用云端同步</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/9082891d4b4817ef75a96e99354c2c09.png" alt="image.png"></p><p>在同步方式中，可以选择前文提到过的三种不同方式：</p><ul><li>对于电脑客户端而言，选择自动同步或者手动同步都是可以的；</li><li>对于手机APP而言，强烈推荐选择完全手动同步，并在思源<code>设置-编辑器</code>中，将默认只读模式开启，避免在手机上误操作修改笔记。</li></ul><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/731b4f2549605e64575e9e63bc1e68ad.png" alt="image.png"></p><p>这里又会出现另外一个会让小白感到困扰的设置：在<strong>云端同步目录</strong>的设置中，你会发现你的七牛云账户里面的所有bucket都会显示出来。但是！刚刚在S3的同步配置中有一个Bucket填写项，我们使用的Bucket已经在填写项目中被<strong>固定</strong>了，所以云端同步目录这里面bucket选项是毫无意义的！<strong>它是留给WEBDAV协议选择文件路径使用的</strong>！使用了S3协议后，请忽略这个<code>云端同步目录</code>配置项。</p><p>正如前文提到过的，请针对<strong>每一个工作空间配置一个对应的Bucket</strong>，思源不支持多个工作空间共用同一个S3 Bucket！</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/846620eca1ae0a2485b07f2df3d45a2f.png" alt="image.png"></p><p>S3配置好了，现在我创建了一个测试笔记本，点击思源笔记左上角的这个<strong>小云图标</strong>，即可进行同步操作。</p><blockquote><p>顺带提一嘴，你可能会在文档树中看到<code>思源用户指南</code>这个笔记本，请不要在这个笔记中记录任何笔记！每次启动思源的时候，<strong>这个笔记本都会被重置</strong>！他是一个说明书，并不是一个可用的笔记本。一定要在文档树中<code>右键-新建笔记本</code>来做你的记录！</p></blockquote><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/2e07bd704af10290cb5ef8449fb28b5c.png" alt="image.png"></p><p>同步时，左下角会显示实时进度，同步完成后会显示已经同步。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/70b0e714f197963591e412662e5a966d.png" alt="image.png"></p><p>同步完毕后，我们可以来到七牛云的bucket的文件管理中，查看是否有新增的数据。如下图所示，刚刚我新建的bucket中已经出现了一个repo文件夹，且内部已有文件，这就代表你的同步配置完成啦！</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/92474957afc3dfd8203b51a2336ebd5d.png" alt="image.png"></p><p>这里的repo文件和本地工作空间路径中的repo文件夹内容是一致的，都是使用数据库密钥加密后的笔记内容。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/f47a493cc9fdd4cab4084f24c307ef69.png" alt="image.png"></p><p>如果你使用七牛云进行S3同步总是遇到<strong>网络问题</strong>，且确认了自己的S3配置项没有填写错误，可以尝试将Addressing选项的Virtual-hosted-style改成Path-style后重试。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/09/4ce90fed52166c7c183e9f1c4893a0d9.png" alt="image.png"></p><p>如果修改后还是无效，请在<code>设置-关于-导出系统日志</code>选项中导出思源的日志，在链滴论坛发帖求助，记得在咨询贴中贴出日志附件。</p><h3 id="3-4-如何将同步配置导入其他设备？"><a href="#3-4-如何将同步配置导入其他设备？" class="headerlink" title="3.4. 如何将同步配置导入其他设备？"></a>3.4. 如何将同步配置导入其他设备？</h3><p>注意：<strong>两台设备请保证思源的版本一致，数据仓库密钥一致，再进行同步</strong>。在你初次配置云端的思源客户端的设置中，选择<code>关于 - 数据仓库密钥 - 复制数据库密钥</code>，然后在其他设备上的相同设置中<code>关于 - 数据库仓库密钥 - 导入数据库密钥</code>导入这个密钥，这样就保持了多设备密钥同步了。</p><p>个人建议所有设备都<strong>关闭思源客户端的自动更新</strong>功能，只要你使用当前版本没有遇到任何问题，建议维持版本，不进行更新。我现在还在使用<code>v2.11.4</code>老版本呢。</p><p>在<code>设置-云端</code>中，会有一个导入和导出的按钮，在这里可以快捷的导出你的云端配置，并在其他设备的云端设置中进行导入。</p><blockquote><p>请注意区分 云端的导入&#x2F;导出 和 设置中的导出 选项，<code>设置-导出-导出DATA</code>是将你的全量笔记数据导出为一个压缩包，方便在其他设备上直接导入笔记或备份笔记。而<code>设置-云端-导出</code>则只是导出你的云端配置项目，方便在其他设备上直接引用相同的云端配置项而不需要重新填写而已！</p></blockquote><p>注意：导出的压缩包内文件是明文存储的，你的AccessKey和SecretKey都是明文。所以，<strong>请在导入其他设备后，尽快删除压缩包</strong>，避免AccessKey和SecretKey泄漏！</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/697b546ceaecff9365b3b46bce82d4d8.png" alt="image.png"></p><p>在其他设备导入云端配置后，启用云端同步，将同步选项改为<code>完全手动同步</code>，并手动点击小云图标，选择下载数据。等待云端的数据被下载完毕之后，再修改为其他同步方式。这样能最大限度的保障同步数据不出错！</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/cc7ca5c616e1c0670d32a9ea35141f3b.png" alt="image.png"></p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/72a6d2b5d430eb96520a5750e2e4803a.png" alt="image.png"></p><p>另外，如果你尝试用QQ或微信的文件传输助手将这个云端同步压缩包发送给手机，需要注意的是QQ的文件传输助手收到的压缩包文件，没有办法在手机自带的文件管理器中被找到，也就没有办法导入思源APP中。<strong>建议使用数据线连接手机和电脑，将导出的云端同步配置压缩包传输到手机上</strong>。您还可以同时把导出的DATA压缩包也传至手机，先在手机APP中导入DATA和云端配置，再执行一次下载云端数据到本地，这样可以节省一部分流量费用。</p><h2 id="4-其他服务商的配置教程"><a href="#4-其他服务商的配置教程" class="headerlink" title="4. 其他服务商的配置教程"></a>4. 其他服务商的配置教程</h2><p>这里给大家贴出其他服务商配置思源S3的教程。因为上文第三点已经带大家走过一遍配置流程了，其他云服务厂商的配置都是大同小异，所以这里就只贴出其他服务商如何找到思源S3所需配置项的条目，对应填入云端配置项中就OK啦。需要特别注意一点，不管您使用哪一个服务商，在开通对象存储服务的时候，一定要选<strong>标准</strong>的对象存储类型，不要选择低频访问、冷归档之类的对象存储类型！</p><ul><li>七牛云KODO：<a target="_blank" rel="noopener" href="https://developer.qiniu.com/kodo/4088/s3-access-domainname">AWS S3 兼容 - 服务域名</a>，<a target="_blank" rel="noopener" href="https://developer.qiniu.com/af/kb/1479/how-to-access-or-locate-the-access-key-and-secret-key">怎么获取或者找到 Access Key 和 Secret Key</a>;</li><li>阿里云OSS：<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/oss/user-guide/regions-and-endpoints">OSS访问域名</a>，<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/ram/user-guide/create-an-accesskey-pair?spm=a2c4g.53045.0.0.68147f80YkG9tZ#task-2245479">创建AccessKey</a>;</li><li>腾讯云COS：<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/436/41284">在兼容 S3 的第三方应用中使用 COS 的通用配置</a>;</li><li>又拍云存储：<a target="_blank" rel="noopener" href="https://help.upyun.com/knowledge-base/aws-s3%e5%85%bc%e5%ae%b9/">AWS S3协议兼容</a>;</li></ul><p>这里再次对对象存储服务的资费做一个解释，毕竟这是初次接触这类云服务的小白最容易看不懂的东西。</p><p>以<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/oss/product-overview/billable-items/">阿里云OSS</a>为例，你会看到阿里云OSS提供存储的资源包，如下图所示，40GB的标准存储一年是费用是9元。这个40GB的资源包和七牛云提供的免费10GB存储容量一样，<strong>都是只抵消了存储空间的按量付费</strong>！即如果您使用阿里云OSS，购买了这个40GB的资源包后，40GB以内的存储空间都不会进行按量计费，只有超过40GB的空间才会需要按量计费。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/a0d141b1d102562cec42a2ce4ea0a30c.png" alt="image-20240719064441734"></p><p>那么我们需不需要购买这个资费包呢？可以来算一笔账，看看按量付费要多少GB的存储空间才需要9元。根据阿里云<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/oss/product-overview/storage-fees">OSS存储空间资费</a>文档，<strong>标准本地冗余存储</strong>的<strong>按量付费</strong>的计算公式如下<br>$$<br>存储费用&#x3D;存储量（GB）×月单价<br>$$<br>在<a target="_blank" rel="noopener" href="https://www.aliyun.com/price/product?spm=a2c4g.11186623.0.0.387e7bbezYDEsc#/oss/detail/ossbag">价格页面</a>可以看到OSS的存储空间按量付费单价和外网流出流量的付费单价。</p><p><img src="/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2024/07/1f67a335d5b937023c0e66f248810b76.png" alt="image-20240719065211076"></p><p>根据<code>0.12元/GB/月</code>，我们可以算出一年是<code>1.44元/GB</code>，进一步计算<code>9 ÷ 1.44 = 6.25</code>，得出结论，当你的存储空间容量低于<code>6.25GB</code>时，可以不用去购买OSS的存储空间资费包。如果您的思源笔记内容庞大，则在存储空间占用大于6GB的时候，就可以考虑购买40GB的资费包了！</p><p>顺带计算一下外网流出流量的价格，还是以上文提到的每月平均外网流出流量是占用存储空间的1.5倍计算，假设你有占用了6GB存储空间的笔记，那么每个月的外网流出流量预估是9GB，直接按忙时价格计算，外网流出流量资费是<code>4.5元/月</code>，同时还需<code>0.72元</code>的6GB月存储空间费用，合计<code>5.22元</code>每月。</p><p>对于阿里云OSS的新用户，您可以领取一次<a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/oss/product-overview/free-quota-for-new-users">20GB存储空间和2GB外网流出流量&#x2F;3月</a>的免费额度，这篇文档中还提到了一些地域的OSS会有每月5GB的标准存储和外网流出流量的免费额度，但根据思源论坛的反馈，中国香港地域和海外地域的OSS在大陆访问效果并不好，连通性差，不建议省这笔钱！</p><h2 id="5-The-end"><a href="#5-The-end" class="headerlink" title="5. The end"></a>5. The end</h2><p>到这里，云端的配置就大功告成啦！主要是如何找到对象存储服务地域节点的域名，以及用户的AccessKey和SecretKey。这一部分操作都可以去查阅各大云服务厂商编写过的文档。想必聪明的你已经学会啦！</p><p>感谢大家支持！如果在配置过程中有任何问题，都可以在评论区与我交流。如果本文帮助到了你，也可以在评论区互动一下，这会让慕雪感觉自己的努力有收获，非常感谢！</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.musnow.top">慕雪年华</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.musnow.top/posts/1277165852/">https://blog.musnow.top/posts/1277165852/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.musnow.top" target="_blank">慕雪的寒舍</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0/">思源笔记</a></div><div class="post_share"><div class="social-share" data-image="https://img.musnow.top/i/2024/07/2a32b8f8acb8cc9f68982a7041db8297.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://ifdian.net/a/128ahri" target="_blank"><img class="post-qr-code-img" src="/img/ico/aifadian.png" alt="爱发电"></a><div class="post-qr-code-desc">爱发电</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3987990807/" title="【Docker】如何让子用户直接使用docker命令"><img class="cover" src="/img/bg/gm14.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【Docker】如何让子用户直接使用docker命令</div></div></a></div><div class="next-post pull-right"><a href="/posts/3816992778/" title="【leetcode】647.回文子串"><img class="cover" src="/img/bg/gm8.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【leetcode】647.回文子串</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/1936212186/" title="【Docker】以思源笔记为例，谈谈什么是端到端加密"><img class="cover" src="https://img.musnow.top/i/2024/07/16e335bfa9f613a7449e038713b6823a.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-28</div><div class="title">【Docker】以思源笔记为例，谈谈什么是端到端加密</div></div></a></div><div><a href="/posts/3021867507/" title="【Docker】Linux系统以及威联通QNAP部署思源笔记的通用教程"><img class="cover" src="https://img.musnow.top/i/2024/07/f8ea69957b82b5254b0f40f9d5120c4a.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-31</div><div class="title">【Docker】Linux系统以及威联通QNAP部署思源笔记的通用教程</div></div></a></div><div><a href="/posts/2869712310/" title="【win】windows部署minio，实现内网S3同步思源"><img class="cover" src="https://img.musnow.top/i/2024/08/28e0f104efc9a54c5f4b968b11e570d3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-24</div><div class="title">【win】windows部署minio，实现内网S3同步思源</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/favicon.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">慕雪年华</div><div class="author-info__description">爱折腾的代码初学者</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">412</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">74</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/musnows"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:muxue@musnow.top" target="_blank" title="email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://gitee.com/musnows" target="_blank" title="Gitee"><i class="fa-sharp fa-solid fa-g"></i></a><a class="social-icon" href="https://blog.csdn.net/muxuen" target="_blank" title="CSDN"><i class="fa-brands fa-blogger-b"></i></a><a class="social-icon" href="https://musnow.top/?utm_source=blog" target="_blank" title="个人主页"><i class="fas fa-globe-asia"></i></a><a class="social-icon" href="https://web.musnow.top/?utm_source=blog" target="_blank" title="导航站点"><i class="fas fa-server"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到寒舍</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-text">1. 写在前面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BB%80%E4%B9%88%E6%98%AF%E6%80%9D%E6%BA%90%E7%AC%94%E8%AE%B0%E7%9A%84S3-x2F-WEBDAV%E5%90%8C%E6%AD%A5%EF%BC%9F"><span class="toc-text">2. 什么是思源笔记的S3&#x2F;WEBDAV同步？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E8%AF%B4%E6%98%8E"><span class="toc-text">2.1. 说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%80%9D%E6%BA%90%E7%9A%84%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E5%92%8C%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4"><span class="toc-text">2.2. 思源的同步配置和工作空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BB%80%E4%B9%88%E6%98%AFS3%E5%8D%8F%E8%AE%AE%EF%BC%9F"><span class="toc-text">2.3. 什么是S3协议？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E6%80%9D%E6%BA%90S3%E5%90%8C%E6%AD%A5"><span class="toc-text">3. 配置思源S3同步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%AF%86%E9%92%A5"><span class="toc-text">3.1. 初始化数据仓库密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%80%9D%E6%BA%90S3%E5%90%8C%E6%AD%A5%E7%95%8C%E9%9D%A2"><span class="toc-text">3.2. 思源S3同步界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E9%85%8D%E7%BD%AE%E4%B8%83%E7%89%9B%E4%BA%91KODO"><span class="toc-text">3.3. 配置七牛云KODO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%A6%82%E4%BD%95%E5%B0%86%E5%90%8C%E6%AD%A5%E9%85%8D%E7%BD%AE%E5%AF%BC%E5%85%A5%E5%85%B6%E4%BB%96%E8%AE%BE%E5%A4%87%EF%BC%9F"><span class="toc-text">3.4. 如何将同步配置导入其他设备？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E6%9C%8D%E5%8A%A1%E5%95%86%E7%9A%84%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B"><span class="toc-text">4. 其他服务商的配置教程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-The-end"><span class="toc-text">5. The end</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/1547470773/" title="【Python】从peewee切换到tortoise-orm异步orm库">【Python】从peewee切换到tortoise-orm异步orm库</a><time datetime="2024-10-23T22:58:58.000Z" title="发表于 2024-10-24 06:58:58">2024-10-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/368684172/" title="【Hexo】通过hexo-hide-posts插件隐藏文章">【Hexo】通过hexo-hide-posts插件隐藏文章</a><time datetime="2024-09-21T02:24:23.000Z" title="发表于 2024-09-21 10:24:23">2024-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/612440692/" title="【思源】思源笔记代码片段收集">【思源】思源笔记代码片段收集</a><time datetime="2024-09-12T11:03:37.000Z" title="发表于 2024-09-12 19:03:37">2024-09-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4149071678/" title="【博客】记录一次针对本站评论系统的恶意攻击">【博客】记录一次针对本站评论系统的恶意攻击</a><time datetime="2024-09-03T07:54:23.000Z" title="发表于 2024-09-03 15:54:23">2024-09-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/main/mothra.webp)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2024 By 慕雪年华</div><div class="footer_custom_text"><img src="/img/ico/gonganbeian.png" height="15">&nbsp;<a href="https://beian.mps.gov.cn/#/query/webSearch?code=44190002007715" rel="noreferrer" target="_blank">粤公网安备44190002007715</a><br><a href="https://icp.gov.moe/?keyword=20230054" target="_blank"><img src="/img/badge/-%E8%90%8CICP%E5%A4%8720230054-ff69b4.svg" height="20px"></a>&nbsp<a href="/sitemap.xml" target="_blank"><img src="/img/badge/-SITEMAP-00CDCD.svg" height="20px"></a>&nbsp<a href="https://beian.miit.gov.cn/" target="_blank"><img src="/img/badge/%E7%B2%A4ICP%E5%A4%872023007189-red.svg" height="20px"></a><br><a href="https://www.foreverblog.cn/go.html" target="_blank"><img src="/img/ico/wormhole_1_tp.gif" height="25px"></a>&nbsp<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="/img/ico/upyun_cdn_w.png" height="25px"></a>&nbsp<a href="https://www.travellings.cn/go.html" target="_blank"><img src="/img/ico/travelling_icon.gif" height="25px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/utils.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/main.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.19/fancybox/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/17.8.3/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.2/mermaid.min.js').then(runMermaid)
  }

  btf.addModeChange('mermaid', runMermaid)

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>function loadArtalk () {
  function initArtalk () {
    window.artalkItem = new Artalk(Object.assign({
      el: '#artalk-wrap',
      server: 'https://artk.musnow.top',
      site: 'mublog',
      pageKey: location.pathname,
      darkMode: document.documentElement.getAttribute('data-theme') === 'dark',
      countEl: '.artalk-count'
    },null))

    if (GLOBAL_CONFIG.lightbox === 'null') return
    window.artalkItem.use(ctx => {
      ctx.on('list-loaded', () => {
        ctx.getCommentList().forEach(comment => {
          const $content = comment.getRender().$content
          btf.loadLightbox($content.querySelectorAll('img:not([atk-emoticon])'))
        })
      })
    })
  }

  if (typeof window.artalkItem === 'object') initArtalk()
  else {
    getCSS('https://cdnjs.cloudflare.com/ajax/libs/artalk/2.5.5/Artalk.min.css').then(()=>{
      getScript('https://cdnjs.cloudflare.com/ajax/libs/artalk/2.5.5/Artalk.min.js').then(initArtalk)
    })
  }
}

function artalkChangeMode (theme) {
  const artalkWrap = document.getElementById('artalk-wrap')
  if (!(artalkWrap && artalkWrap.children.length)) return
  const isDark = theme === 'dark'
  window.artalkItem.setDarkMode(isDark)
}

btf.addModeChange('artalk', artalkChangeMode)

if ('Artalk' === 'Artalk' || !false) {
  if (false) btf.loadComment(document.getElementById('artalk-wrap'), loadArtalk)
  else loadArtalk()
} else {
  function loadOtherComment () {
    loadArtalk()
  }
}</script></div><script src="/js/domain_check.js"></script><script id="click-heart" src="https://cdnjs.cloudflare.com/ajax/libs/butterfly-extsrc/1.1.3/click-heart.min.js" async mobile="false"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-theme-butterfly/4.9.0/js/search/local-search.min.js"></script></div></div></body></html>