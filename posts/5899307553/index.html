<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦ | æ…•é›ªçš„å¯’èˆ</title><meta name="author" content="æ…•é›ªå¹´å"><meta name="copyright" content="æ…•é›ªå¹´å"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å‚è€ƒå¤§ä½¬çš„æ•™ç¨‹ï¼Œä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šäº†ç¦»çº¿çš„AIæ‘˜è¦">
<meta property="og:type" content="article">
<meta property="og:title" content="ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦">
<meta property="og:url" content="https://blog.musnow.top/posts/5899307553/index.html">
<meta property="og:site_name" content="æ…•é›ªçš„å¯’èˆ">
<meta property="og:description" content="å‚è€ƒå¤§ä½¬çš„æ•™ç¨‹ï¼Œä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šäº†ç¦»çº¿çš„AIæ‘˜è¦">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.musnow.top/i/2025/10/c6196305a1fec8f97e7ca2e8c715b158.webp">
<meta property="article:published_time" content="2025-10-02T01:08:21.000Z">
<meta property="article:modified_time" content="2025-10-02T03:29:39.000Z">
<meta property="article:author" content="æ…•é›ªå¹´å">
<meta property="article:tag" content="åšå®¢å»ºç«™">
<meta property="article:tag" content="Hexo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.musnow.top/i/2025/10/c6196305a1fec8f97e7ca2e8c715b158.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦",
  "url": "https://blog.musnow.top/posts/5899307553/",
  "image": "https://img.musnow.top/i/2025/10/c6196305a1fec8f97e7ca2e8c715b158.webp",
  "datePublished": "2025-10-02T01:08:21.000Z",
  "dateModified": "2025-10-02T03:29:39.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "æ…•é›ªå¹´å",
      "url": "https://blog.musnow.top/"
    }
  ]
}</script><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://blog.musnow.top/posts/5899307553/index.html"><link rel="preconnect"/><meta name="google-site-verification" content="iR4A6ntiwhI9JX_YDe2ZFY6DerPD7c-NaLyIDlrDguY"/><meta name="msvalidate.01" content="D5CD621F38EE3FB5071F785AD4977161"/><meta name="baidu-site-verification" content="codeva-aZGKJiqRSI"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":420,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":600,"languages":{"author":"ä½œè€…: æ…•é›ªå¹´å","link":"é“¾æ¥: ","source":"æ¥æº: æ…•é›ªçš„å¯’èˆ","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: '/pluginsSrc/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/equipment/equipment.css?1"><link rel="stylesheet" href="/rating/rating.css?1"><script src="/js/typing_style.js"></script><script>var _hmt = _hmt || [];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?f444e8de702765e309d1a751aa12203e";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="æ…•é›ªçš„å¯’èˆ" type="application/atom+xml">
</head><body><div id="web_bg" style="background-image: url(/img/main/mothra.webp);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/favicon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">460</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">76</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">24</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> å½’æ¡£</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ–‡ç« </span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/rating/"><i class="fa-fw fas fa-film"></i><span> ä¹¦Â·å½±</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> ç•™è¨€</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-user-friends"></i><span> å‹äºº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> å¼€å¾€</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> è™«æ´</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> å¼‚æ¬¡å…ƒ</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-glass-whiskey"></i><span> é•œåƒ</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fab fa-blackberry"></i><span> æ›´å¤š</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç”»å»Š</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> èƒŒåŒ…</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> è¯´è¯´</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url(https://img.musnow.top/i/2025/10/c6196305a1fec8f97e7ca2e8c715b158.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/favicon.jpg" alt="Logo"><span class="site-name">æ…•é›ªçš„å¯’èˆ</span></a><a class="nav-page-title" href="/"><span class="site-name">ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> å½’æ¡£</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ–‡ç« </span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/rating/"><i class="fa-fw fas fa-film"></i><span> ä¹¦Â·å½±</span></a></div><div class="menus_item"><a class="site-page" href="/qa/"><i class="fa-fw fa-fw fas fa-comment-dots"></i><span> ç•™è¨€</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-user-friends"></i><span> å‹äºº</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></li><li><a class="site-page child" href="/fcircle/"><i class="fa-fw fas fa-link"></i><span> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fas fa-train"></i><span> å¼€å¾€</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.foreverblog.cn/go.html"><i class="fa-fw fab fa-superpowers"></i><span> è™«æ´</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://travel.moe/go.html?travel=on"><i class="fa-fw fas fa-globe-americas"></i><span> å¼‚æ¬¡å…ƒ</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-glass-whiskey"></i><span> é•œåƒ</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="https://blog.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-home"></i><span> Main</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog1.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-battle-net"></i><span> Netlify</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnows.github.io/?utm_source=mirror"><i class="fa-fw fa-brands fa-square-github"></i><span> Github</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog2.musnow.top/?utm_source=mirror"><i class="fa-fw fa-solid fa-square-caret-up"></i><span> Vercel</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog3.musnow.top/?utm_source=mirror"><i class="fa-fw fas fa-cloud"></i><span> Cloudflare</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://keep-hexo.musnow.top/?utm_source=mirror"><i class="fa-fw fa-brands fa-kickstarter"></i><span> KeepTheme</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://musnow.blog.csdn.net/"><i class="fa-fw fas fa-copyright"></i><span> CSDN</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog.51cto.com/u_15307009"><i class="fa-fw fas fa-dice-five"></i><span> 51CTO</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fab fa-blackberry"></i><span> æ›´å¤š</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fas fa-images"></i><span> ç”»å»Š</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fas fa-laptop"></i><span> èƒŒåŒ…</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://memos.musnow.top"><i class="fa-fw fas fa-map-signs"></i><span> è¯´è¯´</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://stats.uptimerobot.com/qrNpVSLkgV"><i class="fa-fw fas fa-chart-bar"></i><span> Uptime</span></a></li><li><a class="site-page child" href="/atom.xml"><i class="fa-fw fas fa-rss-square"></i><span> RSS</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-10-02T01:08:21.000Z" title="å‘è¡¨äº 2025-10-02 09:08:21">2025-10-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-10-02T03:29:39.000Z" title="æ›´æ–°äº 2025-10-02 11:29:39">2025-10-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%AE%E7%94%9F%E6%96%87%E5%85%B7%E5%A4%9A/">å·®ç”Ÿæ–‡å…·å¤š</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%AE%E7%94%9F%E6%96%87%E5%85%B7%E5%A4%9A/%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99/">åšå®¢å»ºç«™</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">æ€»å­—æ•°:</span><span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>20åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="ArtalkPV"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div class="ai-summary"><div class="ai-explanation" style="display: block;" data-summary="è¿™é‡Œæ˜¯æ…•é›ªçš„å°åŠ©æ‰‹ï¼Œè¿™ç¯‡æ–‡ç« ä»‹ç»äº†å¦‚ä½•ä¸ºHexoåšå®¢æ·»åŠ ç¦»çº¿AIæ‘˜è¦åŠŸèƒ½ï¼Œé€šè¿‡å®‰è£…`hexo-ai-summary-liushen`æ’ä»¶å¹¶é…ç½®AIæ¥å£ï¼Œç”Ÿæˆæ–‡ç« æ‘˜è¦å¹¶å±•ç¤ºåœ¨åšå®¢å‰ç«¯ï¼ŒåŒæ—¶è¯¦ç»†è¯´æ˜äº†æ’ä»¶å®‰è£…ã€é…ç½®æ–‡ä»¶ä¿®æ”¹ã€butterflyä¸»é¢˜è°ƒæ•´ç­‰æ­¥éª¤ï¼Œç¡®ä¿å®ç°é«˜æ•ˆä¸”å…è´¹çš„æ‘˜è¦ç”Ÿæˆä¸å±•ç¤ºã€‚">æ…•é›ªçš„å°åŠ©æ‰‹æ­£åœ¨ç»å°½è„‘æ±Â·Â·Â·</div><div class="ai-title"> <div class="ai-title-left"> <i class="fa-brands fa-slack"></i><div class="ai-title-text">æ…•é›ªå°åŠ©æ‰‹çš„æ€»ç»“</div></div><div class="ai-tag" id="ai-tag">LongCat-Flash-Chat</div></div></div><div id="post-outdate-notice" data="{&quot;limitDay&quot;:180,&quot;messagePrev&quot;:&quot;è·ç¦»ä¸Šæ¬¡æ›´æ–°æœ¬æ–‡å·²ç»è¿‡å»äº†&quot;,&quot;messageNext&quot;:&quot;å¤©ï¼Œæ–‡ç« éƒ¨åˆ†å†…å®¹å¯èƒ½å·²ç»è¿‡æ—¶ï¼Œè¯·æ³¨æ„ç”„åˆ«ã€‚&quot;,&quot;postUpdate&quot;:&quot;2025-10-02 11:29:39&quot;}" hidden></div><p>å‚è€ƒå¤§ä½¬çš„æ•™ç¨‹ï¼Œä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šäº†ç¦»çº¿çš„AIæ‘˜è¦ã€‚</p>
<h2 id="1-å†™åœ¨å‰é¢">1. å†™åœ¨å‰é¢</h2>
<p>ä¹‹å‰é€›ä¸ªä¸ªå¤§ä½¬çš„ä¸ªäººåšå®¢çš„æ—¶å€™ï¼Œå‘ç°æœ‰ä¸å°‘å¤§ä½¬éƒ½ç»™è‡ªå·±çš„åšå®¢æ–‡ç« å¼€å¤´åŠ ä¸Šäº†ä¸€ä¸ªAIæ‘˜è¦çš„åŠŸèƒ½ã€‚æˆ‘ä¹Ÿæƒ³è¿‡ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯å½“æ—¶ä»¥ä¸ºè¿™äº›AIæ‘˜è¦éƒ½æ˜¯å®æ—¶è¯·æ±‚çš„ï¼Œä¼šå¤ªæ¶ˆè€—Tokenï¼Œäºæ˜¯å°±æ²¡æœ‰å¤„ç†äº†ã€‚</p>
<p>ä»Šå¤©å¿ƒè¡€æ¥æ½®åˆå»æœäº†ä¸€ä¸‹ç›¸å…³çš„æ•™ç¨‹ï¼Œæ‰¾åˆ°äº†LiuShenå¤§ä½¬forkåˆ¶ä½œçš„ä¸€ä»½åªéœ€è¦hexoçš„front-matterå°±èƒ½åœ¨å‰ç«¯æ˜¾ç¤ºAIæ‘˜è¦çš„æ’ä»¶ã€‚è¿™ä¸ªæ’ä»¶å°±æ¯”è¾ƒç¬¦åˆæˆ‘çš„éœ€æ±‚äº†ï¼Œå› ä¸ºæˆ‘ä¸æƒ³è¦ä¸€ä¸ªå®æ—¶çš„AIè¯·æ±‚ï¼Œç¦»çº¿åœ¨æœ¬åœ°ç»™hexoæ–‡ç« çš„front-matteråŠ ä¸ŠAIæ‘˜è¦ï¼Œå·²ç»è¶³å¤Ÿäº†ã€‚</p>
<blockquote>
<p>å‚è€ƒåšå®¢ï¼š<a target="_blank" rel="noopener" href="https://blog.liushen.fun/posts/40702a0d/">https://blog.liushen.fun/posts/40702a0d/</a>ï¼›<br>
ä»“åº“å¼€æºåœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/willow-god/hexo-ai-summary">https://github.com/willow-god/hexo-ai-summary</a></p>
</blockquote>
<p>å¤§ä½¬ç”¨çš„ä¹Ÿæ˜¯butterflyä¸»é¢˜ï¼Œæ‰€ä»¥é’ˆå¯¹ä¸»é¢˜çš„ä¿®æ”¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œå¯ä»¥ç›´æ¥å¥—ç”¨ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€æ•´ï¼</p>
<h2 id="2-é…ç½®">2. é…ç½®</h2>
<h3 id="2-1-å®‰è£…æ’ä»¶">2.1. å®‰è£…æ’ä»¶</h3>
<p>é¦–å…ˆæ˜¯å®‰è£…å¤§ä½¬æå®šçš„æ’ä»¶</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-ai-summary-liushen --save</span><br><span class="line"><span class="comment"># æ£€æŸ¥ä¸€ä¸‹ä½ çš„hexoæœ‰æ²¡æœ‰ä¸‹é¢è¿™äº›ä¾èµ–ï¼Œæ²¡æœ‰éœ€è¦å®‰è£…</span></span><br><span class="line">npm install axios p-limit node-fetch --save</span><br></pre></td></tr></table></figure>
<p>å®‰è£…äº†ä¹‹åï¼Œåœ¨Hexoçš„é…ç½®æ–‡ä»¶<code>_config.yml</code>é‡Œé¢è¿½åŠ å¦‚ä¸‹å†…å®¹ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-ai-summary-liushen</span></span><br><span class="line"><span class="comment"># docs on : https://github.com/willow-god/hexo-ai-summary</span></span><br><span class="line"><span class="attr">aisummary:</span></span><br><span class="line">  <span class="comment"># åŸºæœ¬æ§åˆ¶</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>               <span class="comment"># æ˜¯å¦å¯ç”¨æ’ä»¶ï¼Œå¦‚æœå…³é—­ï¼Œä¹Ÿå¯ä»¥åœ¨æ–‡ç« é¡¶éƒ¨çš„is_summaryå­—æ®µå•ç‹¬è®¾ç½®æ˜¯å¦å¯ç”¨ï¼Œåä¹‹ä¹Ÿå¯ä»¥é…ç½®æ˜¯å¦å•ç‹¬ç¦ç”¨</span></span><br><span class="line">  <span class="attr">cover_all:</span> <span class="literal">false</span>           <span class="comment"># æ˜¯å¦è¦†ç›–å·²æœ‰æ‘˜è¦ï¼Œé»˜è®¤åªç”Ÿæˆç¼ºå¤±çš„ï¼Œæ³¨æ„å¼€å¯åï¼Œå¯èƒ½ä¼šå¯¼è‡´è¿‡é‡çš„apiä½¿ç”¨ï¼</span></span><br><span class="line">  <span class="attr">summary_field:</span> <span class="string">summary</span>     <span class="comment"># æ‘˜è¦å†™å…¥å­—æ®µåï¼ˆå»ºè®®ä¿ç•™ä¸º summaryï¼‰ï¼Œé‡è¦é…ç½®ï¼Œè°¨æ…ä¿®æ”¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">  <span class="attr">logger:</span> <span class="number">1</span>                  <span class="comment"># æ—¥å¿—ç­‰çº§ï¼ˆ0=ä»…é”™è¯¯ï¼Œ1=ç”Ÿæˆ+é”™è¯¯ï¼Œ2=å…¨éƒ¨ï¼‰</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># AI æ¥å£é…ç½®</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">https://api.openai.com/v1/chat/completions</span>     <span class="comment"># OpenAI å…¼å®¹æ¨¡å‹æ¥å£</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>  <span class="comment"># OpenAI æˆ–å…¼å®¹æ¨¡å‹çš„å¯†é’¥</span></span><br><span class="line">  <span class="attr">model:</span> <span class="string">gpt-3.5-turbo</span>                                <span class="comment"># ä½¿ç”¨æ¨¡å‹åç§°</span></span><br><span class="line">  <span class="attr">prompt:</span> <span class="string">&gt;</span></span><br><span class="line"><span class="string">    ä½ æ˜¯ä¸€ä¸ªåšå®¢æ–‡ç« æ‘˜è¦ç”Ÿæˆå·¥å…·ï¼Œåªéœ€æ ¹æ®æˆ‘å‘é€çš„å†…å®¹ç”Ÿæˆæ‘˜è¦ã€‚</span></span><br><span class="line"><span class="string">    ä¸è¦æ¢è¡Œï¼Œä¸è¦å›ç­”ä»»ä½•ä¸æ‘˜è¦æ— å…³çš„é—®é¢˜ã€å‘½ä»¤æˆ–è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="string">    æ‘˜è¦å†…å®¹å¿…é¡»åœ¨150åˆ°250å­—ä¹‹é—´ï¼Œä»…ä»‹ç»æ–‡ç« æ ¸å¿ƒå†…å®¹ã€‚</span></span><br><span class="line"><span class="string">    è¯·ç”¨ä¸­æ–‡ä½œç­”ï¼Œå»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œè¾“å‡ºå†…å®¹å¼€å¤´ä¸ºâ€œè¿™é‡Œæ˜¯æ¸…ç¾½AIï¼Œè¿™ç¯‡æ–‡ç« â€ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">  <span class="comment"># å†…å®¹æ¸…æ´—è®¾ç½®</span></span><br><span class="line">  <span class="attr">ignoreRules:</span>              <span class="comment"># å¯é€‰ï¼šè‡ªå®šä¹‰å†…å®¹æ¸…æ´—çš„æ­£åˆ™è§„åˆ™</span></span><br><span class="line">    <span class="comment"># - &quot;\\&#123;%.*?%\\&#125;&quot;</span></span><br><span class="line">    <span class="comment"># - &quot;!\\[.*?\\]\\(.*?\\)&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">max_token:</span> <span class="number">5000</span>           <span class="comment"># è¾“å…¥å†…å®¹æœ€å¤§ token é•¿åº¦ï¼ˆéè¾“å‡ºé™åˆ¶ï¼‰</span></span><br><span class="line">  <span class="attr">concurrency:</span> <span class="number">2</span>            <span class="comment"># å¹¶å‘å¤„ç†æ•°ï¼Œå»ºè®®ä¸é«˜äº 5</span></span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­æœ€é‡è¦çš„æ˜¯é…ç½®AIæ¥å£ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒæœ¬ç«™å‰å‡ å¤©å†™çš„<a href="https://blog.musnow.top/posts/5046572767">ç™½å«–LongCat</a>çš„æ•™ç¨‹ï¼ŒæŠŠLongCatå…è´¹çš„apiå¼„ä¸Šå»ã€‚LongCatè¿˜æœ‰ä¸ªä¼˜åŠ¿å°±æ˜¯å¿«ï¼Œå¯¹æˆ‘è¿™ç§å·²ç»æœ‰å¾ˆå¤šç¯‡æ–‡ç« ï¼Œéƒ½éœ€è¦é‡æ–°è¿›è¡ŒAIæ‘˜è¦çš„æƒ…å†µéå¸¸åˆé€‚ï¼Œä¸ç„¶ä½ è¦æ˜¯ç”¨ç¡…åŸºæµåŠ¨å…è´¹çš„8Bå°æ¨¡å‹ä¹‹ç±»çš„ï¼Œé‚£å¤„ç†æ•ˆæœå·®ä¸è¯´ï¼Œé€Ÿåº¦å¯è¿˜æ…¢çš„è¦æ­»ï¼Œæœ‰å¾—ä¸€ç­‰äº†ã€‚</p>
<h3 id="2-2-æµ‹è¯•è¿è¡Œæ‘˜è¦ç”Ÿæˆ">2.2. æµ‹è¯•è¿è¡Œæ‘˜è¦ç”Ÿæˆ</h3>
<p>é…ç½®äº†ä¸Šè¿°ä¸¤ä¸ªå†…å®¹ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹ç”ŸæˆAIæ‘˜è¦äº†ã€‚è¿™ä¸ªæ’ä»¶ä¼šç»™ä½ çš„hexoåšå®¢å¼€å¤´è¿½åŠ ä¸€ä¸ªsummaryå­—æ®µï¼Œå­—æ®µå†…å®¹å°±æ˜¯AIç”Ÿæˆçš„æ‘˜è¦ã€‚</p>
<p>æ³¨æ„ï¼Œæ’ä»¶ä¼šä¸»åŠ¨ä¿®æ”¹front-matterï¼Œä¸ºäº†é¿å…æ’ä»¶å¯èƒ½æœ‰bugå¯¼è‡´å†™å›å‡ºé”™ï¼Œè¦†ç›–ä½ çš„æ‰€æœ‰å†…å®¹ï¼Œ<strong>ä¸€å®šè¦åœ¨é¦–æ¬¡å°è¯•ä¹‹å‰è¿›è¡Œåšå®¢æºæ–‡ä»¶çš„å¤‡ä»½</strong>ï¼é¿å…AIå¤„ç†å‡ºé”™æŠŠä½ çš„é…ç½®å…¨è¦†ç›–äº†ï¼Œä½ è¿˜æ²¡æœ‰å¤‡ä»½ï¼Œé‚£å°±éº»çƒ¦äº†ï¼</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br><span class="line">hexo g  <span class="comment"># å¼€å§‹è¿›è¡Œæ‘˜è¦ç”Ÿæˆ</span></span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/10/43fa9f1af383e27ef346e322cdec9861.webp" alt="image.png"></p>
<p>æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼ŒæˆåŠŸç”Ÿæˆäº†æ‘˜è¦</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/10/ffcdfe1fd81b8d60a4471516ceb5113f.webp" alt="image.png"></p>
<h3 id="2-3-ä¿®æ”¹butterflyä¸»é¢˜">2.3. ä¿®æ”¹butterflyä¸»é¢˜</h3>
<h4 id="2-3-1-ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹">2.3.1. ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹</h4>
<p>é¦–å…ˆéœ€è¦ä¿®æ”¹ä¸»é¢˜çš„é…ç½®æ–‡ä»¶<code>_config.butterfly.yaml</code>ï¼Œè¿½åŠ å¦‚ä¸‹é…ç½®ã€‚å…¶ä¸­enableæ˜¯è¿™ä¸ªåŠŸèƒ½çš„å¼€å…³ï¼Œåé¢çš„æ–‡å­—éƒ½æ˜¯å ä½ç¬¦ï¼Œå¯ä»¥æ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># æ–‡ç« è®¾ç½®</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"><span class="comment"># æ–‡ç« AIæ‘˜è¦æ˜¯å¦å¼€å¯ï¼Œä¼šè‡ªåŠ¨æ£€ç´¢æ–‡ç« summaryå­—æ®µï¼Œè‹¥æ²¡æœ‰åˆ™ä¸æ˜¾ç¤º</span></span><br><span class="line"><span class="attr">ai_summary:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">æ…•é›ªå°åŠ©æ‰‹çš„æ€»ç»“</span>  <span class="comment"># å·¦ä¸‹è§’æ˜¾ç¤ºçš„æ ‡é¢˜</span></span><br><span class="line">  <span class="attr">loadingText:</span> <span class="string">æ…•é›ªçš„å°åŠ©æ‰‹æ­£åœ¨ç»å°½è„‘æ±Â·Â·Â·</span></span><br><span class="line">  <span class="attr">modelName:</span> <span class="string">LongCat-Flash-Chat</span>  <span class="comment"># æ˜¾ç¤ºçš„æ¨¡å‹åç§°</span></span><br></pre></td></tr></table></figure>
<h4 id="2-3-2-ä¸»é¢˜pugä¿®æ”¹">2.3.2. ä¸»é¢˜pugä¿®æ”¹</h4>
<p>éšåéœ€è¦ä¿®æ”¹ä¸»é¢˜æºç æ–‡ä»¶ï¼Œæ–°å¢é’ˆå¯¹AIæ‘˜è¦çš„å¤„ç†ã€‚</p>
<p>é¦–å…ˆæ˜¯ä¿®æ”¹<code>theme/butterfly/layout/post.pug</code>æ–‡ä»¶ï¼Œåœ¨ç¬¬8è¡Œä¹‹åæ–°å¢ä¸¤è¡Œå†…å®¹ã€‚æ³¨æ„æ·»åŠ çš„æ—¶å€™éœ€è¦ä¸¥æ ¼ç¼©è¿›ï¼Œé¿å…æ ¼å¼é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">article#article-container.container.post-content</span><br><span class="line">  //- æ·»åŠ ä¸‹é¢è¿™ä¸¤è¡Œ</span><br><span class="line">  if page.summary &amp;&amp; theme.ai_summary.enable</span><br><span class="line">    include includes/post/post-summary.pug</span><br></pre></td></tr></table></figure>
<p><img src= "/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/10/a7d4c09ae8413735421b60f4f9b8d315.webp" alt="image.png"></p>
<p>ç„¶åæ·»åŠ ç»„ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶<code>theme/butterfly/layout/includes/post/post-summary.pug</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.ai-summary</span><br><span class="line">    .ai-explanation(style=&quot;display: block;&quot; data-summary=page.summary)=theme.ai_summary.loadingText</span><br><span class="line">    .ai-title </span><br><span class="line">        .ai-title-left </span><br><span class="line">            i.fa-brands.fa-slack</span><br><span class="line">            .ai-title-text=theme.ai_summary.title</span><br><span class="line">        .ai-tag#ai-tag= theme.ai_summary.modelName</span><br></pre></td></tr></table></figure>
<h4 id="2-3-3-ä¸»é¢˜æ ·å¼ä¿®æ”¹">2.3.3. ä¸»é¢˜æ ·å¼ä¿®æ”¹</h4>
<p>ç„¶åæ·»åŠ æ ·å¼åˆ°<code>theme/butterfly/source/css/_layout/ai-summary.styl</code>æ–‡ä»¶</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">// ===================</span><br><span class="line">// ğŸŒ— ä¸»é¢˜å˜é‡å®šä¹‰ï¼ˆä»…ä½¿ç”¨é¡¹ï¼‰</span><br><span class="line">// ===================</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span></span><br><span class="line">  // ai_summary</span><br><span class="line">  <span class="attr">--liushen-title-font-color</span>: <span class="number">#0883b7</span></span><br><span class="line">  --liushen-maskbg: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>)</span><br><span class="line">  --liushen-ai-bg: <span class="built_in">conic-gradient</span>(from <span class="number">1.5708rad</span> at <span class="number">50%</span> <span class="number">50%</span>, <span class="number">#d6b300</span> <span class="number">0%</span>, <span class="number">#42A2FF</span> <span class="number">54%</span>, <span class="number">#d6b300</span> <span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">  // card èƒŒæ™¯</span><br><span class="line">  --liushen-card-secondbg: <span class="number">#f1f3f8</span></span><br><span class="line"></span><br><span class="line">  // text</span><br><span class="line">  --liushen-text: <span class="number">#4c4948</span></span><br><span class="line">  --liushen-secondtext: <span class="number">#3c3c43cc</span></span><br><span class="line"></span><br><span class="line">[data-theme=<span class="string">&#x27;dark&#x27;</span>]</span><br><span class="line">  // ai_summary</span><br><span class="line">  --liushen-title-font-color: <span class="number">#0883b7</span></span><br><span class="line">  --liushen-maskbg: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.85</span>)</span><br><span class="line">  --liushen-ai-bg: <span class="built_in">conic-gradient</span>(from <span class="number">1.5708rad</span> at <span class="number">50%</span> <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">214</span>, <span class="number">178</span>, <span class="number">0</span>, <span class="number">0.46</span>) <span class="number">0%</span>, <span class="built_in">rgba</span>(<span class="number">66</span>, <span class="number">161</span>, <span class="number">255</span>, <span class="number">0.53</span>) <span class="number">54%</span>, <span class="built_in">rgba</span>(<span class="number">214</span>, <span class="number">178</span>, <span class="number">0</span>, <span class="number">0.49</span>) <span class="number">100%</span>)</span><br><span class="line"></span><br><span class="line">  // card èƒŒæ™¯</span><br><span class="line">  --liushen-card-secondbg: <span class="number">#3e3f41</span></span><br><span class="line"></span><br><span class="line">  // text</span><br><span class="line">  --liushen-text: <span class="number">#ffffffb3</span></span><br><span class="line">  --liushen-secondtext: <span class="number">#a1a2b8</span></span><br><span class="line"></span><br><span class="line">// ===================</span><br><span class="line">// ğŸ“˜ AI æ‘˜è¦æ¨¡å—æ ·å¼</span><br><span class="line">// ===================</span><br><span class="line"></span><br><span class="line">if <span class="built_in">hexo-config</span>(<span class="string">&#x27;ai_summary.enable&#x27;</span>)</span><br><span class="line">  .ai-summary</span><br><span class="line">    background-color <span class="built_in">var</span>(--liushen-maskbg)</span><br><span class="line">    background <span class="built_in">var</span>(--liushen-card-secondbg)</span><br><span class="line">    border-radius <span class="number">12px</span></span><br><span class="line">    padding <span class="number">8px</span> <span class="number">8px</span> <span class="number">12px</span> <span class="number">8px</span></span><br><span class="line">    line-height <span class="number">1.3</span></span><br><span class="line">    flex-direction column</span><br><span class="line">    margin-bottom <span class="number">24px</span></span><br><span class="line">    display flex</span><br><span class="line">    gap <span class="number">5px</span></span><br><span class="line">    position relative</span><br><span class="line"></span><br><span class="line">    &amp;::before</span><br><span class="line">      content <span class="string">&#x27;&#x27;</span></span><br><span class="line">      position absolute</span><br><span class="line">      top <span class="number">0</span></span><br><span class="line">      left <span class="number">0</span></span><br><span class="line">      width <span class="number">100%</span></span><br><span class="line">      height <span class="number">100%</span></span><br><span class="line">      z-index <span class="number">1</span></span><br><span class="line">      filter <span class="built_in">blur</span>(<span class="number">8px</span>)</span><br><span class="line">      opacity .<span class="number">4</span></span><br><span class="line">      background-image <span class="built_in">var</span>(--liushen-ai-bg)</span><br><span class="line">      transform <span class="built_in">scaleX</span>(<span class="number">1</span>) <span class="built_in">scaleY</span>(.<span class="number">95</span>) <span class="built_in">translateY</span>(<span class="number">2px</span>)</span><br><span class="line">    </span><br><span class="line">    &amp;::after</span><br><span class="line">      content: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">var</span>(--liushen-maskbg);</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.ai-explanation</span></span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">10</span></span><br><span class="line">      <span class="attribute">padding</span> <span class="number">8px</span> <span class="number">12px</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">15px</span></span><br><span class="line">      <span class="attribute">line-height</span> <span class="number">1.4</span></span><br><span class="line">      <span class="attribute">color</span> <span class="selector-tag">var</span>(<span class="attr">--liushen-text</span>)</span><br><span class="line">      <span class="attribute">text-align</span> justify</span><br><span class="line"></span><br><span class="line">      // âœ… æ‰“å­—æœºå…‰æ ‡åŠ¨ç”»</span><br><span class="line">      &amp;<span class="selector-pseudo">::after</span></span><br><span class="line">        <span class="attribute">content</span> &#x27;&#x27;</span><br><span class="line">        <span class="attribute">display</span> inline-block</span><br><span class="line">        <span class="attribute">width</span> <span class="number">8px</span></span><br><span class="line">        <span class="attribute">height</span> <span class="number">2px</span></span><br><span class="line">        <span class="attribute">margin-left</span> <span class="number">2px</span></span><br><span class="line">        <span class="attribute">background</span> <span class="selector-tag">var</span>(<span class="attr">--liushen-text</span>)</span><br><span class="line">        <span class="attribute">vertical-align</span> <span class="attribute">bottom</span></span><br><span class="line">        <span class="attribute">animation</span> blink-underline <span class="number">1s</span> ease-in-out infinite</span><br><span class="line">        <span class="attribute">transition</span> <span class="attribute">all</span> .<span class="number">3s</span></span><br><span class="line">        <span class="attribute">position</span> relative</span><br><span class="line">        <span class="attribute">bottom</span> <span class="number">3px</span></span><br><span class="line"></span><br><span class="line">      // å¹³æ»‘æ»šåŠ¨åŠ¨ç”»</span><br><span class="line">      // <span class="selector-class">.char</span></span><br><span class="line">      //   <span class="attribute">display</span> inline-block</span><br><span class="line">      //   <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">      //   <span class="attribute">animation</span> chat-<span class="attribute">float</span> .<span class="number">5s</span> ease forwards</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.ai-title</span></span><br><span class="line">      <span class="attribute">z-index</span> <span class="number">10</span></span><br><span class="line">      <span class="attribute">font-size</span> <span class="number">14px</span></span><br><span class="line">      <span class="attribute">display</span> <span class="attribute">flex</span></span><br><span class="line">      <span class="attribute">border-radius</span> <span class="number">8px</span></span><br><span class="line">      <span class="attribute">align-items</span> center</span><br><span class="line">      <span class="attribute">position</span> relative</span><br><span class="line">      <span class="attribute">padding</span> <span class="number">0</span> <span class="number">12px</span></span><br><span class="line">      <span class="attribute">cursor</span> default</span><br><span class="line">      <span class="attribute">user-select</span> <span class="attribute">none</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.ai-title-left</span></span><br><span class="line">        <span class="attribute">display</span> <span class="attribute">flex</span></span><br><span class="line">        <span class="attribute">align-items</span> center</span><br><span class="line">        <span class="attribute">color</span> <span class="selector-tag">var</span>(<span class="attr">--liushen-title-font-color</span>)</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">i</span></span><br><span class="line">          <span class="attribute">margin-right</span> <span class="number">3px</span></span><br><span class="line">          <span class="attribute">display</span> <span class="attribute">flex</span></span><br><span class="line">          <span class="attribute">color</span> <span class="selector-tag">var</span>(<span class="attr">--liushen-title-font-color</span>)</span><br><span class="line">          <span class="attribute">border-radius</span> <span class="number">20px</span></span><br><span class="line">          <span class="attribute">justify-content</span> center</span><br><span class="line">          <span class="attribute">align-items</span> center</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.ai-title-text</span></span><br><span class="line">          <span class="attribute">font-weight</span> <span class="number">500</span></span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.ai-tag</span></span><br><span class="line">        <span class="attribute">color</span> <span class="selector-tag">var</span>(<span class="attr">--liushen-secondtext</span>)</span><br><span class="line">        <span class="attribute">font-weight</span> <span class="number">300</span></span><br><span class="line">        <span class="attribute">margin-left</span> auto</span><br><span class="line">        <span class="attribute">display</span> <span class="attribute">flex</span></span><br><span class="line">        <span class="attribute">align-items</span> center</span><br><span class="line">        <span class="attribute">justify-content</span> center</span><br><span class="line">        <span class="attribute">transition</span> .<span class="number">3s</span></span><br><span class="line"></span><br><span class="line">  // å¹³æ»‘æ»šåŠ¨åŠ¨ç”»</span><br><span class="line">  // <span class="keyword">@keyframes</span> chat-float</span><br><span class="line">  //   <span class="number">0%</span> </span><br><span class="line">  //     opacity <span class="number">0</span></span><br><span class="line">  //     transform translateY(<span class="number">20px</span>)</span><br><span class="line">  //   <span class="number">100%</span> </span><br><span class="line">  //       opacity <span class="number">1</span></span><br><span class="line">  //       transform translateY(<span class="number">0</span>)</span><br><span class="line">  </span><br><span class="line">  // âœ… æ‰“å­—æœºå…‰æ ‡é—ªçƒåŠ¨ç”»</span><br><span class="line">  @keyframes blink-underline</span><br><span class="line">    <span class="number">0%</span>, <span class="number">100%</span></span><br><span class="line">      opacity <span class="number">1</span></span><br><span class="line">    <span class="number">50%</span></span><br><span class="line">      opacity <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-3-4-è¿½åŠ æ‰“å­—æœºJS">2.3.4. è¿½åŠ æ‰“å­—æœºJS</h4>
<p>ä¸‹é¢çš„jsæ–‡ä»¶å¯ä»¥éšæ„æ”¾åˆ°ä¸€ä¸ªsourceç›®å½•ä¸‹ï¼Œåœ¨ä¸»é¢˜é‡Œé¢å¼•ç”¨ä¸Šå°±è¡Œäº†ã€‚</p>
<p>è¿™é‡Œæˆ‘æ˜¯æ”¾åˆ°äº†<code>source/js/typing_style.js</code>é‡Œé¢ï¼Œç„¶åä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œåœ¨headeré‡Œé¢å¼•å…¥äº†è¿™ä¸ªjsæ–‡ä»¶ã€‚</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject</span></span><br><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># aiæ€»ç»“èƒ½åŠ›æ‰“å­—æœºæ•ˆæœ</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/typing_style.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>jsæ–‡ä»¶å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰“å­—æœºæ•ˆæœ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">typeTextMachineStyle</span>(<span class="params">text, targetSelector, options = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        delay = <span class="number">50</span>,</span><br><span class="line">        startDelay = <span class="number">2000</span>,</span><br><span class="line">        onComplete = <span class="literal">null</span>,</span><br><span class="line">        clearBefore = <span class="literal">true</span>,</span><br><span class="line">        eraseBefore = <span class="literal">true</span>, <span class="comment">// æ–°å¢ï¼šæ˜¯å¦ä»¥æ‰“å­—æœºæ–¹å¼æ¸…é™¤åŸæ–‡æœ¬</span></span><br><span class="line">        eraseDelay = <span class="number">30</span>,    <span class="comment">// æ–°å¢ï¼šåˆ é™¤æ¯ä¸ªå­—ç¬¦çš„é—´éš”</span></span><br><span class="line">    &#125; = options;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(targetSelector);</span><br><span class="line">    <span class="keyword">if</span> (!el || <span class="keyword">typeof</span> text !== <span class="string">&quot;string&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">startTyping</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">renderChar</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt;= text.<span class="property">length</span>) &#123;</span><br><span class="line">                    el.<span class="property">textContent</span> = text.<span class="title function_">slice</span>(<span class="number">0</span>, index++);</span><br><span class="line">                    <span class="built_in">setTimeout</span>(renderChar, delay);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    onComplete &amp;&amp; <span class="title function_">onComplete</span>(el);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="title function_">renderChar</span>();</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (clearBefore) &#123;</span><br><span class="line">            <span class="keyword">if</span> (eraseBefore &amp;&amp; el.<span class="property">textContent</span>.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> currentText = el.<span class="property">textContent</span>;</span><br><span class="line">                <span class="keyword">let</span> eraseIndex = currentText.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">function</span> <span class="title function_">eraseChar</span>(<span class="params"></span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (eraseIndex &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        el.<span class="property">textContent</span> = currentText.<span class="title function_">slice</span>(<span class="number">0</span>, --eraseIndex);</span><br><span class="line">                        <span class="built_in">setTimeout</span>(eraseChar, eraseDelay);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="title function_">startTyping</span>(); <span class="comment">// åˆ é™¤å®Œæ¯•åå¼€å§‹æ‰“å­—</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="title function_">eraseChar</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                el.<span class="property">textContent</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="title function_">startTyping</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">startTyping</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, startDelay);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">renderAISummary</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> summaryEl = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ai-summary .ai-explanation&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!summaryEl) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> summaryText = summaryEl.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-summary&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (summaryText) &#123;</span><br><span class="line">        <span class="title function_">typeTextMachineStyle</span>(summaryText, <span class="string">&quot;.ai-summary .ai-explanation&quot;</span>); <span class="comment">// å¦‚æœéœ€è¦åˆ‡æ¢ï¼Œåœ¨è¿™é‡Œè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°å³å¯</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pjax:complete&#x27;</span>, renderAISummary);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, renderAISummary);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-æœ€ç»ˆæ•ˆæœ">3. æœ€ç»ˆæ•ˆæœ</h2>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œæ•ˆæœä¸é”™ï¼Œå¯è¡Œï¼</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://img.musnow.top/i/2025/10/69c09b7076c4cbce910c615ea2aba44b.webp" alt="image.png"></p>
<p>å°Tipsï¼šå¦‚æœä½ è§‰å¾—è¿™ä¸ªAIæ€»ç»“æ¡†å’Œæ­£æ–‡é—´éš”å¤ªå°äº†ï¼Œå¯ä»¥ä¿®æ”¹<code>theme/butterfly/source/css/_layout/ai-summary.styl</code>é‡Œé¢çš„<code>.ai-summary</code>çš„<code>margin-bottom 24px</code>ï¼ŒæŠŠ24pxè¿›ä¸€æ­¥åŠ å¤§å³å¯ï¼Œæœ¬ç«™è®¾ç½®æˆäº†36pxã€‚</p>
<h2 id="4-å‘ç°æ’ä»¶çš„å‡ ä¸ªå°é—®é¢˜">4. å‘ç°æ’ä»¶çš„å‡ ä¸ªå°é—®é¢˜</h2>
<h3 id="4-1-è¯·æ±‚è¶…è¿‡RPM">4.1. è¯·æ±‚è¶…è¿‡RPM</h3>
<p>ç„¶åæˆ‘å°±å‘ç°äº†å‡ ä¸ªå°é—®é¢˜ï¼Œé¦–å…ˆï¼ŒLongCatå®åœ¨æ˜¯è¿”å›çš„å¤ªå¿«äº†ï¼ä¼šå‡ºç°è¶…RPMçš„æƒ…å†µ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚è¿™éœ€è¦åœ¨æ’ä»¶é‡Œé¢æ–°å¢ä¸€ä¸ªé…ç½®é¡¹ï¼Œæ¯æ¬¡è¯·æ±‚ä¹‹åéƒ½sleepç­‰å¾…å†å‘èµ·ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Hexo-AI-Summary-LiuShen] åŸå§‹å­—ç¬¦ä¸²é•¿åº¦ï¼š 8728</span><br><span class="line">[Hexo-AI-Summary-LiuShen] æœ€ç»ˆè¾“å‡ºé•¿åº¦ï¼š 1945</span><br><span class="line">[Hexo-AI-Summary-LiuShen] ç”Ÿæˆæ‘˜è¦å¤±è´¥ï¼šã€Cè¯­è¨€ã€‘ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨</span><br><span class="line">AI è¯·æ±‚å¤±è´¥: AI è¯·æ±‚å¤±è´¥ (429): &#123;&quot;error&quot;:&#123;&quot;message&quot;:&quot;App:**xxxxåœ¨æ¨¡å‹:longcat-flash-chatai-apiæ¯åˆ†é’Ÿè¯·æ±‚æ¬¡æ•°è¶…è¿‡é™åˆ¶&quot;,&quot;type&quot;:&quot;rate_limit_error&quot;,&quot;code&quot;:&quot;rate_limit_exceeded&quot;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé—®é¢˜æˆ‘å·²ç»æäº¤äº†PRï¼š<a target="_blank" rel="noopener" href="https://github.com/willow-god/hexo-ai-summary/pull/2">https://github.com/willow-god/hexo-ai-summary/pull/2</a>ï¼Œç­‰å¾…åŸä½œè€…åˆå¹¶ã€‚å¦‚æœä½ ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ä¸”PRè¿˜æ²¡æœ‰åˆå¹¶ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹æœ¬åœ°<code>node_moudles</code>ä¸‹çš„ä»£ç <code>node_modules/hexo-ai-summary-liushen/index.js</code>ï¼Œå†™æ­»ä¸€ä¸ªä¼‘çœ æ—¶é—´ï¼Œç¿»åˆ°æ–‡ä»¶çš„æœ€åï¼Œåœ¨return dataä¹‹å‰åŠ ä¸€ä¸ªä¼‘çœ æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰å°±è¡Œäº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="comment">// è¿™é‡Œæ–°å¢ä¸€ä¸ªä¼‘çœ æ—¶é—´ï¼Œ2000mså°±æ˜¯2ç§’</span></span><br><span class="line">        <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">2000</span>))</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæœ¬åœ°<code>node_moudles</code>çš„ä¿®æ”¹åªé’ˆå¯¹æœ¬åœ°ç”Ÿæ•ˆï¼Œå¦‚æœä½ ç”¨äº†vercelã€netlifyç­‰éƒ¨ç½²å¹³å°ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚</p>
<h3 id="4-2-AIè¿”å›çš„ç»“æœé‡Œé¢å¯èƒ½æœ‰æ¢è¡Œ">4.2. AIè¿”å›çš„ç»“æœé‡Œé¢å¯èƒ½æœ‰æ¢è¡Œ</h3>
<p>é™¤äº†è¶…RPMçš„é—®é¢˜ï¼Œæ…•é›ªè¿˜é‡åˆ°äº†AIè¿”å›çš„ç»“æœå‡ºç°äº†æ¢è¡Œçš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œéœ€è¦åœ¨æ’ä»¶å¯¹AIç»“æœçš„è§£æä¸­ï¼ŒæŠŠæ‰€æœ‰æ¢è¡Œç¬¦<code>\n</code>å˜æˆç©ºæ ¼ã€‚<strong>è¿™éƒ¨åˆ†æˆ‘çœ‹æ’ä»¶çš„ai.jsçš„ç¬¬42è¡Œå·²ç»æœ‰äº†</strong>ï¼Œç”¨æ­£åˆ™è¿›è¡Œäº†æ›¿æ¢ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åå¤„ç†ä¸æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">const</span> cleaned = reply</span><br><span class="line">  .<span class="title function_">replace</span>(<span class="regexp">/[\r\n]+/g</span>, <span class="string">&#x27; &#x27;</span>) <span class="comment">// å»æ¢è¡Œ</span></span><br><span class="line">  .<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&#x27; &#x27;</span>)     <span class="comment">// åˆå¹¶å¤šç©ºæ ¼</span></span><br><span class="line">  .<span class="title function_">trim</span>()</span><br></pre></td></tr></table></figure>
<p>åæ¥åˆæŸ¥äº†æŸ¥èµ„æ–™ï¼Œäº†è§£åˆ°yamlåªè¦ç”¨<code>&gt;-</code>å¼€å¤´ï¼Œåç»­çš„å†…å®¹éƒ½ä¼šåˆå¹¶æˆä¸€è¡Œæ˜¾ç¤ºçš„ï¼Œæ˜¯ç¬¦åˆè¯­æ³•è§„åˆ™çš„ï¼Œæ‰€ä»¥æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å¯ä»¥åœ¨prompté‡Œé¢è¿›ä¸€æ­¥è­¦ç¤ºAIâ€œç¦æ­¢è¾“å‡ºä»»ä½•æ¢è¡Œâ€ï¼Œè®©ä»–åˆ«è¾“å‡ºæœ‰æ¢è¡Œçš„å†…å®¹ã€‚</p>
<h3 id="4-3-ä½¿ç”¨vercelã€netlifyç­‰å¹³å°å¦‚ä½•è¿›è¡ŒåŒæ­¥ï¼Ÿ">4.3. ä½¿ç”¨vercelã€netlifyç­‰å¹³å°å¦‚ä½•è¿›è¡ŒåŒæ­¥ï¼Ÿ</h3>
<p>è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœä½ åƒæ…•é›ªä¸€æ ·ï¼Œç”¨äº†vercelã€netlifyç­‰å¹³å°è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ï¼Œé‚£ä¹ˆhexoä¸‰æ¿æ–§éƒ½æ˜¯åœ¨vercelå’ŒnetlifyæœåŠ¡å™¨ä¸Šè¿›è¡Œçš„ï¼Œè™½ç„¶ä¹Ÿä¼šè¯·æ±‚AIï¼Œä¿®æ”¹hexoæ–‡ä»¶ï¼Œä½†æ˜¯<strong>ç”Ÿæˆçš„æ‘˜è¦å’Œä¿®æ”¹åçš„æ–‡ä»¶éƒ½æ˜¯åœ¨vercelå’Œnetlifyçš„æœåŠ¡å™¨ä¸Š</strong>ï¼Œä¸ä¼šå†™åˆ°ä½ çš„hexoé…ç½®ä»“åº“é‡Œé¢ã€‚</p>
<p>è¿™å°±ä¼šå¯¼è‡´ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨æœ¬åœ°è¿è¡Œhexo gå‘½ä»¤æ‰‹åŠ¨æ‰§è¡Œæ’ä»¶ï¼Œé‚£ä¹ˆä½ æ–°å¢çš„åšå®¢å°±æ°¸è¿œä¸ä¼šæœ‰summaryæ€»ç»“å­—æ®µäº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼Œæœ€å¥½è¿˜æ˜¯å®šæœŸæ‰‹åŠ¨å»ä½ çš„hexoä»“åº“é‡Œé¢æ‰§è¡Œä¸€ä¸‹hexo gï¼ŒæŠŠæ–°å¢çš„åšå®¢å…¨éƒ½æä¸Šï¼Œå…å¾—æ¯æ¬¡Vercelå’ŒNetlifyéƒ¨ç½²çš„æ—¶å€™ï¼Œéƒ½éœ€è¦ç»™æ²¡æœ‰æ‘˜è¦çš„åšå®¢é‡æ–°ç”Ÿæˆæ‘˜è¦ã€‚</p>
<h2 id="5-å½“å‰æœ¬ç«™ä½¿ç”¨çš„æ„å»ºæ–¹æ¡ˆçš„å›°å¢ƒ">5. å½“å‰æœ¬ç«™ä½¿ç”¨çš„æ„å»ºæ–¹æ¡ˆçš„å›°å¢ƒ</h2>
<p>æ…•é›ªç°åœ¨ä½¿ç”¨çš„hexoéƒ¨ç½²æ–¹æ¡ˆï¼Œæ˜¯ä»obsidianç›´æ¥è§¦å‘çš„<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼ŒåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>obsidianå†…ä½¿ç”¨äº†gitæ’ä»¶ï¼Œè‡ªåŠ¨commit+pushåˆ°obsidianä»“åº“</li>
<li>obsidianä»“åº“é…ç½®äº†Github Actionï¼Œä¼šè‡ªåŠ¨æŠŠobsidiançš„åšå®¢æ–‡ä»¶å¤¹å’ŒHexoæºé…ç½®ä»“åº“çš„<code>source/_post</code>ç›®å½•è¿›è¡ŒåŒæ­¥ï¼Œå°†obsidianä¿®æ”¹çš„åšå®¢æ¨é€åˆ°Hexoæºé…ç½®ä»“åº“ã€‚</li>
<li>Vercelã€Netlifyã€Cloudflare Workersç­‰CICDå¹³å°ï¼Œæ£€æµ‹åˆ°Hexoæºç é…ç½®ä»“åº“æ›´æ–°åï¼Œè‡ªåŠ¨è¿›è¡Œhexoä¸‰æ¿æ–§æ“ä½œæ„å»ºå¹¶éƒ¨ç½²ã€‚</li>
</ul>
<p>è¿™æ•´ä¸ªæµç¨‹æˆ‘åœ¨æœ¬åœ°ä¸Šéƒ½åªç”¨åœ¨obsidiané‡Œé¢æ“ä½œï¼Œé™¤éæˆ‘éœ€è¦ä¿®æ”¹hexoä¸»é¢˜çš„é…ç½®ï¼Œæ‰éœ€è¦æ‰“å¼€hexoä»“åº“æ“ä½œã€‚</p>
<p>è¿™å°±å¯¼è‡´å³ä¾¿æˆ‘å»äº†<code>hexo g</code>é‡Œé¢æ‰‹åŠ¨è§¦å‘äº†æ’ä»¶ï¼Œæ–°å¢äº†summaryçš„æ–‡ä»¶ä¹Ÿæ˜¯åœ¨hexoä»“åº“é‡Œé¢ï¼Œåœ¨æˆ‘çš„obsidianä»“åº“é‡Œé¢æ²¡æœ‰ã€‚è¿™ä¸ªé—®é¢˜åœ¨abbrlinkæ’ä»¶ä¸­ä¹Ÿä¼šå‡ºç°ï¼Œå½“æ—¶çš„è§£å†³åŠæ³•æ˜¯æˆ‘ç”¨pythonè„šæœ¬å»ç”Ÿæˆäº†ä¸å†²çªçš„abbrlinkï¼Œç„¶åæ‰‹åŠ¨é…ç½®åˆ°åšå®¢é‡Œé¢ã€‚</p>
<p>æ‰€ä»¥ï¼Œç°åœ¨è¿™ä¸ªAI summaryæˆ‘ä¹Ÿå¾—ç”¨ç±»ä¼¼çš„æ–¹æ¡ˆäº†ï¼Œå†™äº†ä¸€ä¸ªPythonè„šæœ¬ï¼Œæ¥ç”Ÿæˆæ€»ç»“ã€‚åç»­å°±åœ¨obisdianä»“åº“é‡Œé¢è¿è¡Œè¿™ä¸ªpythonè„šæœ¬å³å¯ã€‚</p>
<p>å…ˆç”¨<code>pip3</code>å®‰è£…ä¾èµ–é¡¹ï¼Œä¸»è¦æ˜¯é€šè¿‡openaiåº“å»è¯·æ±‚AIã€‚</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install openai</span><br><span class="line">pip3 install python-dotenv</span><br><span class="line">pip3 install PyYAML</span><br></pre></td></tr></table></figure>
<p>è„šæœ¬å¦‚ä¸‹ï¼Œä½ éœ€è¦é€šè¿‡æœ€åçš„å‡ ä¸ª<strong>ç¯å¢ƒå˜é‡</strong>ï¼ˆå¯ä»¥åœ¨è„šæœ¬æ‰€åœ¨ç›®å½•ä¸‹æ”¾ä¸€ä¸ª.envæ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼‰é…ç½®ä½ çš„OPENAIè¯·æ±‚åœ°å€ã€æ¨¡å‹å’ŒAPI Keyï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹è„šæœ¬é‡Œé¢çš„<code>MD_FILE_PATHS</code>æŒ‡å®šä½ çš„obsidianåšå®¢mdæ–‡ä»¶åœ¨å“ªä¸€ä¸ªç›®å½•ã€‚</p>
<p>è¿™é‡Œ<code>MD_FILE_PATHS</code>æˆ‘è®¾ç½®æˆäº†ä¸€ä¸ªlistæ˜¯å› ä¸ºpythonè„šæœ¬è¿è¡Œçš„æ—¶å€™pwdå¯èƒ½ä¸ä¸€æ ·ï¼Œä¼šå»æ‰¾å¤šä¸ªç›¸å¯¹è·¯å¾„ã€‚å…å¾—åªèƒ½åœ¨æŸä¸ªå›ºå®šçš„pwdä¸‹è¿è¡Œã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span></span><br><span class="line"><span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MD_FILE_PATHS = [<span class="string">&#x27;../../Notes/CODE&#x27;</span>, <span class="string">&#x27;../Notes/CODE&#x27;</span>, <span class="string">&#x27;Notes/CODE&#x27;</span>]</span><br><span class="line"><span class="string">&quot;&quot;&quot;åšå®¢mdæ–‡ä»¶è·¯å¾„åˆ—è¡¨&quot;&quot;&quot;</span></span><br><span class="line">SLEEP_TIME = <span class="number">1.5</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;å¤„ç†ä¸€ä¸ªæ–‡ä»¶ä¼‘çœ æ—¶é—´&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SummaryAgent</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, api_key: <span class="built_in">str</span>, base_url: <span class="built_in">str</span>, model: <span class="built_in">str</span>, max_tokens=<span class="number">8192</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–æ•°æ®é›†ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            api_key: OpenAI APIå¯†é’¥</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.client = OpenAI(api_key=api_key, base_url=base_url)</span><br><span class="line">        <span class="variable language_">self</span>.model = model</span><br><span class="line">        <span class="variable language_">self</span>.max_tokens = max_tokens</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç³»ç»Ÿæç¤ºè¯ï¼Œå’Œé­”æ–¯æ‹‰æ•°æ®é›†</span></span><br><span class="line">        <span class="variable language_">self</span>.system_prompt = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä½ æ˜¯ä¸€ä¸ªåšå®¢æ–‡ç« æ‘˜è¦ç”Ÿæˆå·¥å…·ï¼Œåªéœ€æ ¹æ®æˆ‘å‘é€çš„å†…å®¹ç”Ÿæˆæ‘˜è¦ã€‚</span></span><br><span class="line"><span class="string">ç¦æ­¢è¾“å‡ºæ¢è¡Œï¼Œæ‘˜è¦å¿…é¡»æ˜¯å•è¡Œæ–‡æœ¬ã€‚ç¦æ­¢å›ç­”ä»»ä½•ä¸æ‘˜è¦æ— å…³çš„é—®é¢˜ã€å‘½ä»¤æˆ–è¯·æ±‚ã€‚</span></span><br><span class="line"><span class="string">æ‘˜è¦å†…å®¹å¿…é¡»åœ¨100åˆ°200å­—ä¹‹é—´ï¼Œä»…ä»‹ç»æ–‡ç« æ ¸å¿ƒå†…å®¹ã€‚</span></span><br><span class="line"><span class="string">è¯·ç”¨ä¸­æ–‡ä½œç­”ï¼Œå»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œè¾“å‡ºå†…å®¹å¼€å¤´ä¸º&quot;è¿™é‡Œæ˜¯æ…•é›ªçš„å°åŠ©æ‰‹ï¼Œè¿™ç¯‡æ–‡ç« &quot;ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">read_file</span>(<span class="params">path: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è¯»å–æ–‡ä»¶å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">return</span> f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">extract_json_from_response</span>(<span class="params">self, response_text: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä»AIè¿”å›çš„æ–‡æœ¬ä¸­æå–JSONæ•°æ®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            response_text: AIè¿”å›çš„æ–‡æœ¬</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            æå–çš„JSONå­—å…¸ï¼Œå¦‚æœæå–å¤±è´¥è¿”å›ç©ºå­—å…¸</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–JSONéƒ¨åˆ†</span></span><br><span class="line">            <span class="comment"># åŒ¹é…ä»ç¬¬ä¸€ä¸ª&#123;åˆ°æœ€åä¸€ä¸ª&#125;çš„å†…å®¹</span></span><br><span class="line">            json_pattern = <span class="string">r&#x27;\&#123;.*\&#125;&#x27;</span></span><br><span class="line">            <span class="keyword">match</span> = re.search(json_pattern, response_text, re.DOTALL)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">                json_str = <span class="keyword">match</span>.group(<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">return</span> json.loads(json_str)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æœªåœ¨å“åº”ä¸­æ‰¾åˆ°JSONæ ¼å¼æ•°æ®&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> json.JSONDecodeError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;JSONè§£æé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æå–JSONæ—¶å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">self, prompt: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è°ƒç”¨aiç”Ÿæˆæ‘˜è¦&quot;&quot;&quot;</span></span><br><span class="line">        response = <span class="variable language_">self</span>.client.chat.completions.create(model=<span class="variable language_">self</span>.model,</span><br><span class="line">                                                       messages=[&#123;</span><br><span class="line">                                                           <span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>,</span><br><span class="line">                                                           <span class="string">&quot;content&quot;</span>: <span class="variable language_">self</span>.system_prompt</span><br><span class="line">                                                       &#125;, &#123;</span><br><span class="line">                                                           <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">                                                           <span class="string">&quot;content&quot;</span>: prompt</span><br><span class="line">                                                       &#125;],</span><br><span class="line">                                                       temperature=<span class="number">0.7</span>,</span><br><span class="line">                                                       max_tokens=<span class="variable language_">self</span>.max_tokens)</span><br><span class="line"></span><br><span class="line">        response_text = response.choices[<span class="number">0</span>].message.content</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;[AI]  AIå“åº”é•¿åº¦: <span class="subst">&#123;<span class="built_in">len</span>(response_text)&#125;</span> å­—ç¬¦&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> response_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MarkdownProcessor</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Markdownæ–‡ä»¶å¤„ç†å™¨&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_markdown_files</span>(<span class="params">notes_dirs: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æŸ¥æ‰¾å¤šä¸ªNotesç›®å½•ä¸­çš„æ‰€æœ‰markdownæ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        all_md_files = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> notes_dir <span class="keyword">in</span> notes_dirs:</span><br><span class="line">            notes_path = Path(notes_dir)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> notes_path.exists():</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è·³è¿‡ï¼šNotesç›®å½•ä¸å­˜åœ¨: <span class="subst">&#123;notes_dir&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            md_files = <span class="built_in">list</span>(notes_path.rglob(<span class="string">&quot;*.md&quot;</span>))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;åœ¨ <span class="subst">&#123;notes_dir&#125;</span> ä¸­æ‰¾åˆ° <span class="subst">&#123;<span class="built_in">len</span>(md_files)&#125;</span> ä¸ªmarkdownæ–‡ä»¶&quot;</span>)</span><br><span class="line">            all_md_files.extend([<span class="built_in">str</span>(f) <span class="keyword">for</span> f <span class="keyword">in</span> md_files])</span><br><span class="line">            <span class="keyword">break</span> <span class="comment"># åªå¤„ç†ä¸€ä¸ªç›®å½•</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ€»å…±æ‰¾åˆ° <span class="subst">&#123;<span class="built_in">len</span>(all_md_files)&#125;</span> ä¸ªmarkdownæ–‡ä»¶&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> all_md_files</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse_front_matter</span>(<span class="params">content: <span class="built_in">str</span></span>) -&gt; <span class="built_in">tuple</span>[<span class="type">Dict</span>, <span class="built_in">str</span>, <span class="built_in">str</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è§£æfront-matterå¹¶è¿”å›front-matterå­—å…¸å’Œå‰©ä½™å†…å®¹</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            tuple: (front_matter_dict, front_matter_str, content_without_front_matter)</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        front_matter_pattern = <span class="string">r&#x27;^---\s*\n(.*?)\n---\s*\n&#x27;</span></span><br><span class="line">        <span class="keyword">match</span> = re.search(front_matter_pattern, content, re.DOTALL)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">            front_matter_str = <span class="keyword">match</span>.group(<span class="number">1</span>)</span><br><span class="line">            content_without_front_matter = content[<span class="keyword">match</span>.end():]</span><br><span class="line"></span><br><span class="line">            <span class="comment"># ä½¿ç”¨yamlåº“è§£æYAML front-matter</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                front_matter = yaml.safe_load(front_matter_str) <span class="keyword">or</span> &#123;&#125;</span><br><span class="line">            <span class="keyword">except</span> yaml.YAMLError <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;YAMLè§£æé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                front_matter = &#123;&#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> front_matter, front_matter_str, content_without_front_matter</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># å¦‚æœæ²¡æœ‰front-matterï¼Œè¿”å›ç©ºçš„front-matterå’Œå®Œæ•´å†…å®¹</span></span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;, <span class="string">&quot;&quot;</span>, content</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_summary_to_front_matter</span>(<span class="params">content: <span class="built_in">str</span>, summary: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åœ¨front-matterä¸­æ·»åŠ summaryå­—æ®µ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            content: åŸå§‹æ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="string">            summary: è¦æ·»åŠ çš„æ‘˜è¦</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            ä¿®æ”¹åçš„æ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        front_matter, _, remaining_content = MarkdownProcessor.parse_front_matter(content)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç¡®ä¿summaryæ˜¯å•è¡Œ</span></span><br><span class="line">        summary = summary.replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27; &#x27;</span>).strip()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æœ‰front-matterï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> front_matter:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">f&quot;---\nsummary: <span class="subst">&#123;summary&#125;</span>\n---\n<span class="subst">&#123;content&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœå·²ç»æœ‰summaryå­—æ®µï¼Œæ›¿æ¢å®ƒ</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;summary&#x27;</span> <span class="keyword">in</span> front_matter:</span><br><span class="line">            front_matter[<span class="string">&#x27;summary&#x27;</span>] = summary</span><br><span class="line">            <span class="comment"># ä½¿ç”¨yamlåº“é‡æ–°æ„å»ºfront-matterå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                front_matter_yaml = yaml.dump(front_matter, allow_unicode=<span class="literal">True</span>, default_flow_style=<span class="literal">False</span>)</span><br><span class="line">                new_front_matter_str = <span class="string">f&quot;---\n<span class="subst">&#123;front_matter_yaml&#125;</span>---\n&quot;</span></span><br><span class="line">            <span class="keyword">except</span> yaml.YAMLError <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;YAMLåºåˆ—åŒ–é”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="comment"># å¦‚æœyamlåºåˆ—åŒ–å¤±è´¥ï¼Œä½¿ç”¨ç®€å•æ ¼å¼</span></span><br><span class="line">                new_front_matter_lines = [<span class="string">&#x27;---&#x27;</span>]</span><br><span class="line">                <span class="keyword">for</span> key, value <span class="keyword">in</span> front_matter.items():</span><br><span class="line">                    new_front_matter_lines.append(<span class="string">f&quot;<span class="subst">&#123;key&#125;</span>: <span class="subst">&#123;value&#125;</span>&quot;</span>)</span><br><span class="line">                new_front_matter_lines.append(<span class="string">&#x27;---\n&#x27;</span>)</span><br><span class="line">                new_front_matter_str = <span class="string">&#x27;\n&#x27;</span>.join(new_front_matter_lines)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># å¦‚æœæ²¡æœ‰summaryå­—æ®µï¼Œç›´æ¥åœ¨front-matteræœ«å°¾æ·»åŠ </span></span><br><span class="line">            <span class="comment"># æŸ¥æ‰¾æœ€åä¸€ä¸ª---çš„ä½ç½®</span></span><br><span class="line">            last_end = content.find(<span class="string">&#x27;---\n&#x27;</span>, content.find(<span class="string">&#x27;---&#x27;</span>) + <span class="number">3</span>)</span><br><span class="line">            <span class="keyword">if</span> last_end == -<span class="number">1</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ­£ç¡®çš„ç»“æŸæ ‡è®°ï¼Œå°±åœ¨å¼€å¤´æ’å…¥</span></span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;---\nsummary: <span class="subst">&#123;summary&#125;</span>\n---\n<span class="subst">&#123;content&#125;</span>&quot;</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># åœ¨---ä¹‹å‰æ’å…¥summaryå­—æ®µ</span></span><br><span class="line">                before = content[:last_end]</span><br><span class="line">                after = content[last_end:]</span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;before&#125;</span>summary: <span class="subst">&#123;summary&#125;</span>\n<span class="subst">&#123;after&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> new_front_matter_str + remaining_content</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_file</span>(<span class="params">file_path: <span class="built_in">str</span>, summary_agent: SummaryAgent</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¤„ç†å•ä¸ªmarkdownæ–‡ä»¶ï¼Œç”Ÿæˆæ‘˜è¦å¹¶æ·»åŠ åˆ°front-matter&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            content = SummaryAgent.read_file(file_path)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ£€æŸ¥æ˜¯å¦æœ‰front-matter</span></span><br><span class="line">            front_matter, _, article_content = MarkdownProcessor.parse_front_matter(content)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> front_matter:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è·³è¿‡ <span class="subst">&#123;file_path&#125;</span> - æ²¡æœ‰front-matter&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ£€æŸ¥æ˜¯å¦æœ‰abbrlinkå­—æ®µæˆ–abbrlinkä¸ºç©º</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;abbrlink&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> front_matter <span class="keyword">or</span> <span class="keyword">not</span> front_matter[<span class="string">&#x27;abbrlink&#x27;</span>] <span class="keyword">or</span> <span class="built_in">str</span>(front_matter[<span class="string">&#x27;abbrlink&#x27;</span>]).strip() == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è·³è¿‡ <span class="subst">&#123;file_path&#125;</span> - abbrlinkå­—æ®µä¸ºç©ºæˆ–ä¸å­˜åœ¨&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰summaryå­—æ®µ</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;summary&#x27;</span> <span class="keyword">in</span> front_matter:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è·³è¿‡ <span class="subst">&#123;file_path&#125;</span> - å·²å­˜åœ¨summaryå­—æ®µ&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># é™åˆ¶å†…å®¹é•¿åº¦ä»¥é¿å…tokené™åˆ¶</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(article_content) &gt; <span class="number">4000</span>:</span><br><span class="line">                article_content = article_content[:<span class="number">4000</span>] + <span class="string">&quot;...&quot;</span></span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ­£åœ¨ä¸º <span class="subst">&#123;file_path&#125;</span> ç”Ÿæˆæ‘˜è¦...&quot;</span>)</span><br><span class="line">            summary = summary_agent.query(article_content)</span><br><span class="line">            time.sleep(SLEEP_TIME)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ›´æ–°æ–‡ä»¶å†…å®¹</span></span><br><span class="line">            new_content = MarkdownProcessor.add_summary_to_front_matter(content, summary)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(new_content)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âœ“ æˆåŠŸä¸º <span class="subst">&#123;file_path&#125;</span> æ·»åŠ æ‘˜è¦&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âœ— å¤„ç†æ–‡ä»¶ <span class="subst">&#123;file_path&#125;</span> æ—¶å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># åŠ è½½.envæ–‡ä»¶</span></span><br><span class="line">    load_dotenv(override=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    api_key = os.getenv(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line">    base_url = os.getenv(<span class="string">&quot;OPENAI_BASE_URL&quot;</span>)</span><br><span class="line">    model = os.getenv(<span class="string">&quot;OPENAI_MODEL&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> api_key <span class="keyword">or</span> <span class="keyword">not</span> base_url <span class="keyword">or</span> <span class="keyword">not</span> model:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šæœªæä¾› API å¯†é’¥æˆ–åŸºç¡€ URLã€‚è¯·æ£€æŸ¥ç¯å¢ƒå˜é‡ã€‚&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    mothra = SummaryAgent(api_key=api_key, base_url=base_url, model=model)</span><br><span class="line">    processor = MarkdownProcessor()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¤„ç†æ•´ä¸ªNotesç›®å½•</span></span><br><span class="line">    md_files = processor.find_markdown_files(MD_FILE_PATHS)</span><br><span class="line">    processed_count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file_path <span class="keyword">in</span> md_files:</span><br><span class="line">        <span class="keyword">if</span> processor.process_file(file_path, mothra):</span><br><span class="line">            processed_count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\nå¤„ç†å®Œæˆï¼å…±å¤„ç†äº† <span class="subst">&#123;processed_count&#125;</span> ä¸ªæ–‡ä»¶&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="The-end">The end</h2>
<p>ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæœ¬ç«™ä¹Ÿç®—æ˜¯æˆåŠŸæ¥å…¥äº†AIæ€»ç»“çš„æ˜¾ç¤ºèƒ½åŠ›å•¦ï¼è™½ç„¶æœ‰ç‚¹éº»çƒ¦ï¼Œä½†æ€»å¥½è¿‡æ²¡æœ‰ã€‚å¾ˆå¤šé—®é¢˜éƒ½æ˜¯å¯ä»¥è§£å†³çš„ã€‚</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>ä¹‹å‰æ…•é›ªç”¨pythonè„šæœ¬æµ‹è¯•è¿‡LongCatçš„OpenAIæ¥å£çš„rpmï¼Œçº¦ä¸º30ï¼Œä¹Ÿå°±æ˜¯ä¸€åˆ†é’Ÿåªèƒ½è¯·æ±‚30æ¬¡ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>
<li id="fn2" class="footnote-item"><p>obsidianè§¦å‘hexoè¯¦æƒ…å¯è§ï¼š<a href="https://blog.musnow.top/posts/8608489065">https://blog.musnow.top/posts/8608489065</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p>
</li>
</ol>
</section>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://blog.musnow.top">æ…•é›ªå¹´å</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://blog.musnow.top/posts/5899307553/">https://blog.musnow.top/posts/5899307553/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://blog.musnow.top" target="_blank">æ…•é›ªçš„å¯’èˆ</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8D%9A%E5%AE%A2%E5%BB%BA%E7%AB%99/">åšå®¢å»ºç«™</a><a class="post-meta__tags" href="/tags/Hexo/">Hexo</a></div><div class="post-share"><div class="social-share" data-image="https://img.musnow.top/i/2025/10/c6196305a1fec8f97e7ca2e8c715b158.webp" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="/pluginsSrc/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="/pluginsSrc/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>èµåŠ©</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://ifdian.net/a/128ahri" target="_blank"><img class="post-qr-code-img" src="/img/ico/aifadian.webp" alt="çˆ±å‘ç”µ"/></a><div class="post-qr-code-desc">çˆ±å‘ç”µ</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/posts/4044218607/" title="ã€Agent.04ã€‘AIæ—¶ä»£çš„hello worldï¼šè°ƒç”¨OpenAIæ¥å£ï¼Œä¸å¤§æ¨¡å‹äº¤äº’"><img class="cover" src="/img/bg/gm1.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">ã€Agent.04ã€‘AIæ—¶ä»£çš„hello worldï¼šè°ƒç”¨OpenAIæ¥å£ï¼Œä¸å¤§æ¨¡å‹äº¤äº’</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨pythonå‘é€è¯·æ±‚ï¼Œè°ƒç”¨OpenAIçš„APIï¼Œä¸å¤§æ¨¡å‹äº¤äº’ï¼Œè·å–åˆ°å¤§æ¨¡å‹å…³äºhelloçš„å“åº”ã€‚</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/955376979/" title="ã€å…¬å‘Šã€‘2025-04-12 æœ¬ç«™butterflyä¸»é¢˜æ›´æ–°è‡³5.3.5ç‰ˆæœ¬"><img class="cover" src="/img/bg/gm9.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-01-09</div><div class="info-item-2">ã€å…¬å‘Šã€‘2025-04-12 æœ¬ç«™butterflyä¸»é¢˜æ›´æ–°è‡³5.3.5ç‰ˆæœ¬</div></div><div class="info-2"><div class="info-item-1">æœ¬ç«™hexo-butterflyä¸»é¢˜ä»4.9.0ç‰ˆæœ¬æ›´æ–°è‡³5.3.5ç‰ˆæœ¬ï¼ŒåŒæ—¶ç«™ç‚¹è¯„è®ºArtalkä»2.5.5æ›´æ–°è‡³2.9.1ç‰ˆæœ¬ã€‚</div></div></div></a><a class="pagination-related" href="/posts/3781449179/" title="ã€å»ºç«™ã€‘ä½¿ç”¨mrdocå’Œ1panelçš„æ—¶å€™å¦‚ä½•æ·»åŠ bingç«™é•¿éªŒè¯"><img class="cover" src="https://img.musnow.top/i/2024/05/7a6fa237a7d29ca8ab2f9f1da1b52a38.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-19</div><div class="info-item-2">ã€å»ºç«™ã€‘ä½¿ç”¨mrdocå’Œ1panelçš„æ—¶å€™å¦‚ä½•æ·»åŠ bingç«™é•¿éªŒè¯</div></div><div class="info-2"><div class="info-item-1">ä½¿ç”¨mrdocå’Œ1panelçš„æ—¶å€™å¦‚ä½•æ·»åŠ bingç«™é•¿éªŒè¯</div></div></div></a><a class="pagination-related" href="/posts/9909449770/" title="ã€Nginxã€‘é…ç½®nginxæ‹¦æˆªéæµè§ˆå™¨è¯·æ±‚"><img class="cover" src="/img/bg/gm15.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-08-09</div><div class="info-item-2">ã€Nginxã€‘é…ç½®nginxæ‹¦æˆªéæµè§ˆå™¨è¯·æ±‚</div></div><div class="info-2"><div class="info-item-1">é…ç½®nginxæ‹¦æˆªéæµè§ˆå™¨è¯·æ±‚ï¼Œé¿å…æœ‰è„šæœ¬åˆ·Artalkè¯„è®º</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="artalk-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/favicon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">æ…•é›ªå¹´å</div><div class="author-info-description">çˆ±æŠ˜è…¾çš„ä»£ç åˆå­¦è€…</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">460</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">76</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/musnows/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://musnow.top/?utm_source=blog" target="_blank" title="ä¸ªäººä¸»é¡µ"><i class="fa fa-home"></i></a><a class="social-icon" href="mailto:muxue@musnow.top" target="_blank" title="email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://web.musnow.top/?utm_source=blog" target="_blank" title="å¯¼èˆªç«™ç‚¹"><i class="fas fa-server"></i></a><a class="social-icon" href="https://gitee.com/musnows" target="_blank" title="Gitee"><i class="fa-sharp fa-solid fa-g"></i></a><a class="social-icon" href="https://blog.csdn.net/muxuen" target="_blank" title="CSDN"><i class="fa-brands fa-blogger-b"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss-square"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥åˆ°å¯’èˆï¼Œè¿‘æ¥å¯å¥½ï¼Ÿ</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-text">1. å†™åœ¨å‰é¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%85%8D%E7%BD%AE"><span class="toc-text">2. é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-text">2.1. å®‰è£…æ’ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%B5%8B%E8%AF%95%E8%BF%90%E8%A1%8C%E6%91%98%E8%A6%81%E7%94%9F%E6%88%90"><span class="toc-text">2.2. æµ‹è¯•è¿è¡Œæ‘˜è¦ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BF%AE%E6%94%B9butterfly%E4%B8%BB%E9%A2%98"><span class="toc-text">2.3. ä¿®æ”¹butterflyä¸»é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%AE%E6%94%B9"><span class="toc-text">2.3.1. ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E4%B8%BB%E9%A2%98pug%E4%BF%AE%E6%94%B9"><span class="toc-text">2.3.2. ä¸»é¢˜pugä¿®æ”¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-%E4%B8%BB%E9%A2%98%E6%A0%B7%E5%BC%8F%E4%BF%AE%E6%94%B9"><span class="toc-text">2.3.3. ä¸»é¢˜æ ·å¼ä¿®æ”¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-%E8%BF%BD%E5%8A%A0%E6%89%93%E5%AD%97%E6%9C%BAJS"><span class="toc-text">2.3.4. è¿½åŠ æ‰“å­—æœºJS</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%9C%80%E7%BB%88%E6%95%88%E6%9E%9C"><span class="toc-text">3. æœ€ç»ˆæ•ˆæœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%8F%91%E7%8E%B0%E6%8F%92%E4%BB%B6%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B0%8F%E9%97%AE%E9%A2%98"><span class="toc-text">4. å‘ç°æ’ä»¶çš„å‡ ä¸ªå°é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%AF%B7%E6%B1%82%E8%B6%85%E8%BF%87RPM"><span class="toc-text">4.1. è¯·æ±‚è¶…è¿‡RPM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-AI%E8%BF%94%E5%9B%9E%E7%9A%84%E7%BB%93%E6%9E%9C%E9%87%8C%E9%9D%A2%E5%8F%AF%E8%83%BD%E6%9C%89%E6%8D%A2%E8%A1%8C"><span class="toc-text">4.2. AIè¿”å›çš„ç»“æœé‡Œé¢å¯èƒ½æœ‰æ¢è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E4%BD%BF%E7%94%A8vercel%E3%80%81netlify%E7%AD%89%E5%B9%B3%E5%8F%B0%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%90%8C%E6%AD%A5%EF%BC%9F"><span class="toc-text">4.3. ä½¿ç”¨vercelã€netlifyç­‰å¹³å°å¦‚ä½•è¿›è¡ŒåŒæ­¥ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%BD%93%E5%89%8D%E6%9C%AC%E7%AB%99%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9E%84%E5%BB%BA%E6%96%B9%E6%A1%88%E7%9A%84%E5%9B%B0%E5%A2%83"><span class="toc-text">5. å½“å‰æœ¬ç«™ä½¿ç”¨çš„æ„å»ºæ–¹æ¡ˆçš„å›°å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#The-end"><span class="toc-text">The end</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/5899307553/" title="ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦">ã€Hexoã€‘ä¸ºè‡ªå·±çš„åšå®¢ç«™ç‚¹åŠ ä¸Šç¦»çº¿çš„AIæ‘˜è¦</a><time datetime="2025-10-02T01:08:21.000Z" title="å‘è¡¨äº 2025-10-02 09:08:21">2025-10-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4044218607/" title="ã€Agent.04ã€‘AIæ—¶ä»£çš„hello worldï¼šè°ƒç”¨OpenAIæ¥å£ï¼Œä¸å¤§æ¨¡å‹äº¤äº’">ã€Agent.04ã€‘AIæ—¶ä»£çš„hello worldï¼šè°ƒç”¨OpenAIæ¥å£ï¼Œä¸å¤§æ¨¡å‹äº¤äº’</a><time datetime="2025-09-30T07:25:08.000Z" title="å‘è¡¨äº 2025-09-30 15:25:08">2025-09-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/3454235760/" title="ã€é¢è¯•ã€‘æ±‚èŒé¢è¯•å¤§å¿Œï¼šè‡ªæ–­åè·¯">ã€é¢è¯•ã€‘æ±‚èŒé¢è¯•å¤§å¿Œï¼šè‡ªæ–­åè·¯</a><time datetime="2025-09-29T11:31:10.000Z" title="å‘è¡¨äº 2025-09-29 19:31:10">2025-09-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4200815612/" title="ã€AIã€‘é…ç½®claude-code-routerè½¬å‘Claude Codeè¯·æ±‚è‡³OpenAI APIæ ¼å¼">ã€AIã€‘é…ç½®claude-code-routerè½¬å‘Claude Codeè¯·æ±‚è‡³OpenAI APIæ ¼å¼</a><time datetime="2025-09-27T12:33:46.000Z" title="å‘è¡¨äº 2025-09-27 20:33:46">2025-09-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/main/mothra.webp);"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2025 By æ…•é›ªå¹´å</div><div class="footer_custom_text"><img src="/img/ico/gonganbeian.png" height="15" style="position:relative; top:2px;">&nbsp;<a href="https://beian.mps.gov.cn/#/query/webSearch?code=44190002007715" rel="noreferrer" target="_blank">ç²¤å…¬ç½‘å®‰å¤‡44190002007715</a></br><a href="https://icp.gov.moe/?keyword=20230054" target="_blank"><img src="/img/badge/-%E8%90%8CICP%E5%A4%8720230054-ff69b4.svg" height="20px"></a>&nbsp<a href="/sitemap.xml" target="_blank"><img src="/img/badge/-SITEMAP-00CDCD.svg" height="20px"></a>&nbsp<a href="https://beian.miit.gov.cn/" target="_blank"><img src="/img/badge/%E7%B2%A4ICP%E5%A4%872023007189-red.svg" height="20px"></a></br><a href="https://travel.moe/go.html" target="_blank"><img src="/img/ico/moe-default-white.png" style="width:auto;height:25px" title="å¼‚æ¬¡å…ƒä¹‹æ—…-è·ƒè¿-æˆ‘ä»¬ä¸€èµ·å»èŒç«™æˆå‘˜çš„æ˜Ÿçƒæ—…è¡Œå§ï¼"></a>&nbsp<a href="https://www.foreverblog.cn/go.html" target="_blank"><img src="/img/ico/wormhole_1_tp.gif" height="25px"></a>&nbsp<a href="https://www.travellings.cn/go.html" target="_blank"><img src="/img/ico/travelling_icon.gif" height="25px"></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox/fancybox.umd.js"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = '/pluginsSrc/mathjax/es5/tex-mml-chtml.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('/pluginsSrc/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  let artalkItem = null
  const option = null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'

  const destroyArtalk = () => {
    if (artalkItem) {
      artalkItem.destroy()
      artalkItem = null
    }
  }

  const artalkChangeMode = theme => artalkItem && artalkItem.setDarkMode(theme === 'dark')

  const initArtalk = (el = document, pageKey = location.pathname) => {
    artalkItem = Artalk.init({
      el: el.querySelector('#artalk-wrap'),
      server: 'https://artk.musnow.top',
      site: 'mublog',
      darkMode: document.documentElement.getAttribute('data-theme') === 'dark',
      ...option,
      pageKey: isShuoshuo ? pageKey : (option && option.pageKey) || pageKey
    })

    if (GLOBAL_CONFIG.lightbox === 'null') return
    artalkItem.on('list-loaded', () => {
      artalkItem.ctx.get('list').getCommentNodes().forEach(comment => {
        const $content = comment.getRender().$content
        btf.loadLightbox($content.querySelectorAll('img:not([atk-emoticon])'))
      })
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyArtalk = () => {
        destroyArtalk()
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    btf.addGlobalFn('pjaxSendOnce', destroyArtalk, 'destroyArtalk')
    btf.addGlobalFn('themeChange', artalkChangeMode, 'artalk')
  }

  const loadArtalk = async (el, pageKey) => {
    if (typeof Artalk === 'object') initArtalk(el, pageKey)
    else {
      await btf.getCSS('/pluginsSrc/artalk/dist/Artalk.css')
      await btf.getScript('/pluginsSrc/artalk/dist/Artalk.js')
      initArtalk(el, pageKey)
    }
  }

  if (isShuoshuo) {
    'Artalk' === 'Artalk'
      ? window.shuoshuoComment = { loadComment: loadArtalk }
      : window.loadOtherComment = loadArtalk
    return
  }

  if ('Artalk' === 'Artalk' || !false) {
    if (false) btf.loadComment(document.getElementById('artalk-wrap'), loadArtalk)
    else setTimeout(loadArtalk, 100)
  } else {
    window.loadOtherComment = loadArtalk
  }
})()</script></div><script src="/js/domain_check.js"></script><script>document.addEventListener('DOMContentLoaded',()=>{if(window.location.pathname.includes('/posts')){const e=document.querySelector('.footnotes');e&&e.insertBefore(document.createElement('strong').appendChild(document.createTextNode('è„šæ³¨ï¼š')).parentNode,e.firstChild);}});</script><script id="click-heart" src="/pluginsSrc/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>