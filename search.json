[{"title":"ã€æ•™ç¨‹ã€‘hexoæ­å»ºåšå®¢+keepä¸»é¢˜ç¾åŒ–","url":"/2022/04/16/%E4%BD%BF%E7%94%A8HEXO%E5%92%8Ckeep%E4%B8%BB%E9%A2%98%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","content":"æ„Ÿè°¢ä½ æ¥åˆ°æœ¬å°ç«™ï¼Œå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºğŸ˜˜ï¼\n\n\næŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œç®—æ˜¯æŠŠåŸºæœ¬çš„åšå®¢ç¯å¢ƒç»™æ­å»ºå¥½äº†ï¼Œé¡µé¢æ•ˆæœè¿˜æ˜¯æŒºä¸é”™çš„ï¼åç»­å¯¹å¯’èˆæœ‰ä»€ä¹ˆæ–°æ“ä½œä¼šå¯¹æœ¬æ–‡è¿›è¡Œæ›´æ–°ï¼Œå¯ä»¥å¤šå¤šå…³æ³¨ä¸€ä¸‹å“¦\n\næœ¬åšå®¢ä¿®æ”¹è¿‡çš„keepä¸»é¢˜æ–‡ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ğŸ‘‰Aewait&#x2F;hexo-theme-keep \n1.åŸºæœ¬é…ç½®æˆ‘æœ€å¼€å§‹ä½¿ç”¨çš„å¹³å°æ˜¯HEXO+Giteeï¼Œå‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰åŸºäºGitee+Hexoæ­å»ºä¸ªäººåšå®¢\nç°åœ¨æˆ‘ä¸å»ºè®®ä½ ä½¿ç”¨gitee pagesï¼Œå…·ä½“è¯·çœ‹ 4.1 \nå¯ä»¥æ ¹æ®æœ¬æ–‡å‘å¯¼é…ç½® github pagesï¼Œæœ‰é—®é¢˜å¯ä»¥è¯„è®ºæå‡ºå“¦â•°(*Â°â–½Â°*)â•¯\n\næ“ä½œä¹‹å‰ï¼Œéœ€è¦ä¸‹è½½ä¸¤ä¸ªè½¯ä»¶ï¼›å…ˆä¸‹è½½å®‰è£…å¥½node.jsåå†è¿›è¡Œgitæ“ä½œ\nnode.jsï¼šå®˜ç½‘https://nodejs.org/zh-cn/gitï¼šå®˜ç½‘https://git-scm.com/\n\n1.1 å®‰è£…hexoå®‰è£…å¥½è¿™ä¸¤ä¸ªå·¥å…·åï¼Œæˆ‘ä»¬å…ˆæ‰“å¼€git bashï¼ˆä¸€èˆ¬å³é”®èœå•é‡Œé¢å°±ä¼šæœ‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¯¥è½¯ä»¶è¯·å…¨å±€æœç´¢ï¼‰å¦‚æœä½ å®‰è£…çš„æ—¶å€™æœ‰é€‰æ‹©æ·»åŠ åˆ°å‘½ä»¤è¡Œï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥ç›´æ¥ç”¨windowsçš„cmdæ¥æ“ä½œgitçš„ã€‚è¿™é‡Œé¿å…ä½ å®‰è£…çš„æ—¶å€™æ²¡æœ‰é€‰æ‹©æ­¤é¡¹ï¼Œå‡ç”¨git bashæ¥æ¼”ç¤º\n\nã€Gitã€‘åœ¨Windows CMDä¸­å’ŒVScodeä¸­é…ç½®å·²ç»å®‰è£…å¥½çš„git\n\næ‰“å¼€ä¹‹åçš„ç•Œé¢åº”è¯¥æ˜¯è¿™æ ·çš„\n\næˆ‘ä»¬cdè¿›å…¥ä½ æƒ³è¦åˆ›å»ºhexoæœ¬åœ°æ–‡ä»¶çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘æƒ³åœ¨Dç›˜é‡Œé¢åˆ›å»ºæˆ‘çš„hexoåšå®¢ï¼Œé‚£ä¹ˆå°±cdè¿›å…¥ä½ æƒ³è¦çš„è·¯å¾„ï¼›å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•å¡«å†™è·¯å¾„ï¼Œå¯ä»¥å³é”®é¡¶æ å°†è·¯å¾„å¤åˆ¶ä¸ºæ–‡æœ¬\n\nç„¶ååœ¨git bashä¸­ï¼Œä½¿ç”¨ shift+insert(ins) è¿›è¡Œç²˜è´´\ncd D:\\example\n\nè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸè¿›å…¥æˆ‘ä»¬æƒ³è¦çš„æ–‡ä»¶å¤¹äº†\n\nè¾“å…¥ node -v å‘½ä»¤ï¼Œæµ‹è¯• node.js æ˜¯å¦å®‰è£…æˆåŠŸä¸”å¯ç”¨ï¼›å¦‚æœå‡ºç°ç‰ˆæœ¬å·ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼ˆè¯·ç¡®è®¤node.jsçš„ç‰ˆæœ¬å¤§äºv16ï¼‰\n$ node -vv16.13.1\n\néšååœ¨è¿™é‡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\nnpm -g install npm #å®‰è£…npmåŒ…ç®¡ç†å™¨npm -g install cnpm --registry=https://registry.npm.taobao.org# å¦‚æœå®‰è£…npmå¤±è´¥ï¼Œåˆ™ä½¿ç”¨é•œåƒæºå®‰è£…æ·˜å®çš„cnpm# å¦‚æœå®‰è£…äº†cnpmï¼Œæ³¨æ„åç»­æ‰€æœ‰npmå‘½ä»¤è¦ç”¨cnpmä»£æ›¿\n\nå®‰è£…æˆåŠŸåï¼Œå®‰è£…hexo\nnpm install -g hexo-cli\n\næµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…\nmoth@LAPTOP-R9S2524B MINGW32 /d/example$ hexo versionhexo-cli: 4.3.0os: win32 10.0.22000node: 16.13.1v8: 9.4.146.24-node.14uv: 1.42.0zlib: 1.2.11brotli: 1.0.9ares: 1.18.1modules: 93nghttp2: 1.45.1napi: 8llhttp: 6.0.4openssl: 1.1.1l+quiccldr: 39.0icu: 69.1tz: 2021aunicode: 13.0ngtcp2: 0.1.0-DEVnghttp3: 0.1.0-DEV\n\nå‡ºç°ä¸Šé¢çš„å­—æ ·ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼›å› ä¸ºæˆ‘æ˜¯2022å¹´\n4æœˆæ“ä½œçš„ï¼Œè¿™é‡Œå®‰è£…çš„ç‰ˆæœ¬æœ‰ç‚¹è€ï¼Œä¸è¿‡ä¸å½±å“ä½¿ç”¨ï¼Œé‚£å°±ä¸å‡çº§äº†ğŸ˜¶â€ğŸŒ«ï¸\n\næ¸©é¦¨æç¤ºï¼šè¿™äº›éƒ½æ˜¯ä¾èµ–é¡¹ï¼Œå¦‚æœä¸å½±å“ä½ çš„ä½¿ç”¨ï¼Œé‚£å°±ä¸è¦å‡çº§ï¼\nä¸è¦å‡çº§ï¼ä¸è¦å‡çº§ï¼ï¼ä¸è¦å‡çº§ï¼ï¼ï¼\n\nè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªblogæ–‡ä»¶å¤¹ï¼Œhexoä¼šåœ¨é‡Œé¢å…‹éš†åŸºç¡€hexoéœ€è¦ç”¨çš„æ–‡ä»¶\n$ hexo init blogINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitfatal: unable to access &#x27;https://github.com/hexojs/hexo-starter.git/&#x27;: OpenSSL SSL_read: Connection was reset, errno 10054WARN  git clone failed. Copying data insteadINFO  Install dependenciesINFO  Start blogging with Hexo!\n\nä½¿ç”¨cdå‘½ä»¤è¿›å…¥blogæ–‡ä»¶å¤¹\ncd blog\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…ä¸€ä¸‹ä¾èµ–é¡¹\nnpm install\n\n\néšåè¾“å…¥ä¸‹é¢ä¸‰ä¸ªå‘½ä»¤\nhexo cl #hexo cleançš„ç¼©å†™hexo g #ç”Ÿæˆæ–‡ä»¶hexo s #å¼€å¯æœ¬åœ°é¢„è§ˆ\n\nè¾“å‡ºçš„ç»“æœå¦‚ä¸‹\nmoth@LAPTOP MINGW32 /d/example/blog$ hexo clINFO  Validating configmoth@LAPTOP MINGW32 /d/example/blog$ hexo gINFO  Validating configINFO  Start processingINFO  Files loaded in 94 msINFO  Generated: archives/index.htmlINFO  Generated: archives/2023/index.htmlINFO  Generated: archives/2023/01/index.htmlINFO  Generated: index.htmlINFO  Generated: fancybox/blank.gifINFO  Generated: fancybox/helpers/fancybox_buttons.pngINFO  Generated: fancybox/fancybox_loading@2x.gifINFO  Generated: css/fonts/fontawesome-webfont.ttfINFO  Generated: fancybox/fancybox_loading.gifINFO  Generated: js/script.jsINFO  Generated: fancybox/fancybox_overlay.pngINFO  Generated: fancybox/fancybox_sprite@2x.pngINFO  Generated: fancybox/fancybox_sprite.pngINFO  Generated: css/fonts/FontAwesome.otfINFO  Generated: fancybox/jquery.fancybox.cssINFO  Generated: fancybox/helpers/jquery.fancybox-buttons.cssINFO  Generated: css/images/banner.jpgINFO  Generated: css/style.cssINFO  Generated: fancybox/helpers/jquery.fancybox-buttons.jsINFO  Generated: fancybox/jquery.fancybox.jsINFO  Generated: fancybox/helpers/jquery.fancybox-media.jsINFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.cssINFO  Generated: fancybox/jquery.fancybox.pack.jsINFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.jsINFO  Generated: 2023/01/10/hello-world/index.htmlINFO  Generated: css/fonts/fontawesome-webfont.svgINFO  Generated: css/fonts/fontawesome-webfont.woffINFO  Generated: css/fonts/fontawesome-webfont.eotINFO  28 files generated in 232 msmoth@LAPTOP MINGW32 /d/example/blog$ hexo sINFO  Validating configINFO  Start processingINFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.\n\næµè§ˆå™¨æ‰“å¼€ http://localhost:4000ï¼Œçœ‹åˆ°ä¸‹é¢çš„é¢„è§ˆï¼Œé‚£å°±OKäº†ï¼\n\n1.2 éƒ¨ç½²åˆ°github pagesåœ¨Githubåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼Œåå­—ä¸º ç”¨æˆ·å.github.io\næ‰¾åˆ°blogç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª_config.yml æ–‡ä»¶ï¼Œè¿™æ˜¯hexoçš„é…ç½®æ–‡ä»¶ã€‚åœ¨é‡Œé¢æ‰¾åˆ°ä¸‹é¢çš„å­—æ®µï¼Œå¡«å…¥ä½ çš„githubä»“åº“åœ°å€\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: https://github.com/musnows/Aewait.github.io.git  branch: master\n\nå¦‚æœä½ æƒ³åŒæ—¶éƒ¨ç½²åˆ° gitee&#x2F;githubï¼Œå¯ä»¥è¿™æ ·å†™\ndeploy:  type: git  repo: \t  github: https://github.com/musnows/Aewait.github.io.git\t  gitee: git@gitee.com:ewait/ewait.git  branch: master\n\néšåï¼Œæˆ‘ä»¬æ‰§è¡Œhexo d éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“\nhexo d #éƒ¨ç½²hexo g --d #ç”Ÿæˆæ–‡ä»¶çš„åŒæ—¶éƒ¨ç½²ï¼Œæ¨èä½¿ç”¨è¿™ä¸ª\n\nå¦‚æœå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼Œé‚£æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®‰è£…éƒ¨ç½²çš„ä¾èµ–é¡¹\nERROR Deployer not found: git\n\nå®‰è£… hexo-deployer-git\nnpm install hexo-deployer-git --save\n\nå†æ¬¡æ‰§è¡Œhexo g --dï¼Œè¾“å…¥ä½ çš„githubè´¦æˆ·ï¼ˆé‚®ç®±ï¼‰å’Œå¯†ç ï¼Œè¿›è¡Œéƒ¨ç½²ã€‚\nå¯ä»¥çœ‹åˆ°githubä»“åº“å¤šäº†ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œå…¶å†…éƒ¨å°±æ˜¯æˆ‘ä»¬çš„è¿œç«¯æ–‡ä»¶ã€‚\nè¿›å…¥ä»“åº“çš„è®¾ç½®ï¼Œæ‰¾åˆ°github pagesçš„è®¾ç½®ï¼Œé€‰æ‹©masteråˆ†æ”¯éƒ¨ç½²ï¼ŒæŒ‰ä¸‹å›¾é…ç½®\n\nç­‰å¾…éƒ¨ç½²æˆåŠŸåï¼Œå°±å¯ä»¥æ‰“å¼€ https://ä½ çš„åå­—.github.io å°±å¯ä»¥è®¿é—®äº†ï¼\nåšå®Œä¸Šé¢çš„æ­¥éª¤ï¼Œæ­¤æ—¶å°±å¯ä»¥æ¥å®‰è£…ä¸€ä¸ªä¸»é¢˜äº†ã€‚æ¯•ç«Ÿé»˜è®¤çš„landscapeä¸»é¢˜è¿˜æ˜¯ä¸å¤Ÿå¥½ç”¨çš„ğŸ˜˜\n\nsshå…å¯†éƒ¨ç½²æ“ä½œï¼Œå‚è€ƒç¬¬4ç‚¹\n\n1.2 keepä¸»é¢˜Hexoä¸‹keepä¸»é¢˜åˆå§‹åŒ–æ“ä½œæ˜¯æ ¹æ®å¼€å‘è€…å¤§å“¥çš„å¸®åŠ©æ–‡æ¡£è¿›è¡Œçš„\næœ¬æ–‡æ˜¯å¯¹ç›¸å…³è¸©å‘æ“ä½œçš„ä¸€ç‚¹è¯´æ˜ï¼Œå»ºè®®ä½ å…ˆç²—ç•¥æµè§ˆå®Œæœ¬æ–‡ï¼Œçœ‹çœ‹æœ‰å•¥å‘ğŸ•³ï¼ˆæŒºå¤šçš„ï¼‰å†è¿›è¡Œkeepä¸»é¢˜çš„é…ç½®\n\nKeepå¿«é€Ÿå¼€å§‹\n\nå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–hexoä¸»é¢˜ï¼Œå»ºè®®é€‰æ‹©æœ‰ä¸­æ–‡å¸®åŠ©æ–‡æ¡£çš„HEXOä¸»é¢˜ï¼Œä¸ç„¶å°±å¾—å•ƒè‹±è¯­äº†ã€‚\nåé¢æœ¬ç«™æ ·å¼å¯èƒ½ä¼šåšå…¶ä»–çš„æ›´æ”¹ï¼Œå¾…æˆ‘ææ¸…æ¥šè¿›é˜¶æ“ä½œå†è¯´ã€‚æ¯•ç«Ÿå’±å¯¹CSSå’ŒHTMLä»£ç æ˜¯å®Œå…¨ä¸æ‡‚ï¼ˆè¿™æ˜¯å‰ç«¯çš„å†…å®¹ï¼Œç›®å‰æ²¡æœ‰è‡ªå­¦è®¡åˆ’ï¼‰\n\nå‰äººæ ½æ ‘åäººä¹˜å‡‰ï¼Œåœ¨keepå¼€å‘è€…åšå®¢çš„å‹é“¾ä¸­æ‰¾åˆ°äº†é­”æ”¹äº†ä¸»é¢˜çš„è€å“¥ï¼Œç›´æ¥å­¦ä¹ èµ·æ¥ğŸ˜ï¼hexoä¸»é¢˜é­”æ”¹æ±‡æ€»å’Œæ€»ç»“\næ›´å¤šå†…å®¹è¯¦è§æœ¬æ–‡ ç¬¬8ç‚¹\n\nå½“å‰ä½ çœ‹åˆ°çš„ä¸»é¡µå·²ç»æ˜¯ä¿®æ”¹keepä¸»é¢˜è¿‡åçš„å•¦ï¼æ„Ÿè§‰å¦‚ä½•ï¼Ÿ\n1.3 keepä¸»é¢˜å®‰è£…ç›®å½•åœ¨å“ªï¼Ÿå¦‚æœä½ æ›´å…·keepçš„å®˜æ–¹æ–‡æ¡£ç”¨npmå®‰è£…ï¼Œä½ å¯èƒ½å‘ç°åœ¨themesé‡Œé¢æ²¡æœ‰keepä¸»é¢˜çš„æ–‡ä»¶å¤¹ï¼Œé‚£å®ƒåˆ°å“ªå„¿å»äº†å‘¢ï¼Ÿ\n\næ‰¾ä¸€æ‰¾å°±èƒ½å‘ç°ï¼Œå…¶å®åœ¨è¿™é‡Œ blog\\node_modules\\hexo-theme-keepã€‚è¿™æ˜¯å› ä¸ºæˆ‘çš„ä¸»é¢˜æ˜¯ç”¨npmå®‰è£…çš„ï¼Œnode_modulesæ˜¯åœ¨å½“å‰ç›®å½•å®‰è£…çš„åŒ…çš„ä½ç½®ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™ç§æƒ…å†µ\n\néœ€è¦æ³¨æ„ï¼Œåç»­ä¿®æ”¹_comfig.ymlçš„æ—¶å€™ï¼Œæœ‰çš„æ—¶å€™éœ€è¦ä¿®æ”¹çš„æ˜¯ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰äº›æ˜¯HEXOå®˜æ–¹çš„é…ç½®æ–‡ä»¶ï¼Œä¸è¦æŠŠäºŒè€…å¼„æ··äº†ï¼\nå»ºè®®åœ¨hexoæ›´ç›®å½•çš„source/_data æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªkeep.ymlï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶åªéœ€è¦ä¿®æ”¹è¿™é‡Œçš„keep.ymlå³å¯ï¼Œæ–¹ä¾¿ä»¥åè¿›è¡Œå¹³æ»‘å‡çº§\n1.4 ä¸»é¢˜é¡µé¢è®¾ç½®æˆä¸­æ–‡keepä¸»é¢˜é»˜è®¤çš„é¡µé¢æ˜¯è‹±æ–‡çš„æŒ‰é’®ï¼Œéœ€è¦åœ¨HEXOé…ç½®æ–‡ä»¶_comfig.ymlä¸­ä¿®æ”¹è¯­è¨€ä¸ºzh-CNç„¶åé¡µé¢å°±å˜æˆä¸­æ–‡å•¦ï¼\n\n2.å¦‚ä½•æ·»åŠ åšå®¢æ–‡ç« HEXOé‡‡ç”¨çš„æ˜¯markdownè¯­æ³•ï¼Œåªéœ€è¦åœ¨æœ¬åœ°çš„source/_postsæ–‡ä»¶å¤¹æ·»åŠ mdæºæ–‡ä»¶ï¼Œå°±èƒ½åœ¨ä¸ªäººåšå®¢ä¸­æ˜¾ç¤º\nä»¥keepæ¨¡æ¿ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨mdæºæ–‡ä»¶çš„æ­£æ–‡ä¹‹å‰æ·»åŠ å¦‚ä¸‹è¯­å¥ï¼Œæ¥è®¾ç½®åšå®¢çš„æ ‡é¢˜ã€ä¸Šä¼ æ—¶é—´ã€tagã€åˆ†ç±»ï¼Œä»¥åŠæ˜¯å¦ç½®é¡¶\n\nå¦‚æœè¦è®¾ç½®å¤šä¸ªtagï¼Œæ ·å¼ä¸º[Hexo,typora,åšå®¢]\nå¤šä¸ªåˆ†ç±»categoriesåŒç†\n\n---title: ä½¿ç”¨hexo+giteeæ­å»ºä¸ªäººåšå®¢date: 2022-04-23 13:30:14tags: [Hexo]categories: [å·®ç”Ÿæ–‡å…·å¤š]sticky: 999 ---\n\n2.1 é¦–é¡µç½®é¡¶æ¯”å¦‚æœ¬æ–‡ä»¶çš„stickyæˆ‘è®¾ç½®æˆäº†999ï¼Œä½ çœ‹åˆ°çš„å°±æ˜¯æœ¬æ–‡åœ¨æˆ‘çš„é¦–é¡µç½®é¡¶äº†ã€‚å¦‚æœä¸è®¾ç½®stickyï¼Œé¦–é¡µé»˜è®¤æ˜¯ä»¥æ—¶é—´é™åºæ’åˆ—æ–‡ç« ï¼ˆåå‘å¸ƒçš„åœ¨å‰å¤´ï¼‰\n\n\n2.2 æ­å»ºå›¾åºŠï¼ˆå¿…åšï¼‰æœ¬æ“ä½œå¿…åšï¼ä¸ºäº†ä¿è¯ä½ ä¸Šä¼ çš„mdæ–‡ä»¶ä¸­çš„å›¾ç‰‡èƒ½åœ¨ä¸ªäººåšå®¢ä¸Šæ­£å¸¸æ˜¾ç¤ºï¼Œè¯·å…ˆé…ç½®ä½ çš„ä¸ªäººå›¾åºŠğŸ‘‰å›¾åºŠæ­å»ºæ•™ç¨‹\nå¦‚æœä½ å¼€å¯äº†é˜¿é‡Œäº‘OSSçš„bucketé˜²ç›—é“¾ï¼Œè¿˜éœ€è¦å°†ä½ çš„ç«™ç‚¹åŠ å…¥ç™½åå•ï¼\n2.3 å¦‚ä½•å¯¼å‡ºCSDNçš„åšå®¢å¦‚æœä½ ä¹‹å‰çš„åšå®¢æ˜¯åœ¨CSDNä¸Šå†™çš„ï¼Œå¯ä»¥åœ¨markdownç¼–è¾‘å™¨çš„æ–‡ç« ç®¡ç†é¢æ¿ä¸­å¯¼å‡ºä¸ºmdæ–‡ä»¶\n\nä¸ºäº†é¿å…å›¾ç‰‡åç»­æ— æ³•è®¿é—®ï¼Œå»ºè®®ä¸Šä¼ ä¸€ä¸‹csdnçš„å›¾ç‰‡åˆ°è‡ªå·±çš„å›¾åºŠï¼ˆå¯ä»¥é€šè¿‡obsidiançš„æ’ä»¶å¿«æ·ä¸Šä¼ å…¨æ–‡å›¾ç‰‡ï¼‰\n\n3.å›¾ç‰‡æ— æ³•æ˜¾ç¤ºé—®é¢˜3.1 è§£å†³ï¼šè®¾ç½®ç©ºreferreræˆ‘ä»¬çš„åšå®¢ç½‘ç«™å‘å…¶ä»–ç«™ç‚¹è®¿é—®å›¾ç‰‡çš„æ—¶å€™ï¼Œä¼šå‘é€ä¸€ä¸ª referrer ã€‚æœ‰äº›ç«™ç‚¹æ˜¯ä¼šblockæ‰ä½ çš„åšå®¢è®¿é—®çš„ï¼Œæ¯”å¦‚CSDNçš„å›¾ç‰‡é“¾æ¥ã€‚\nè¿™éƒ¨åˆ†æ˜¯æˆ‘åœ¨è®¾ç½®å‹é“¾çš„æ—¶å€™å‘ç°çš„ï¼Œæœ‰äº›æœ‹å‹ç»™æˆ‘çš„å¤´åƒé“¾æ¥æ˜¯CSDNçš„å›¾ç‰‡é“¾æ¥ï¼Œä½†æ˜¯è®¾ç½®å®Œæ¯•åå¤´åƒå›¾ç‰‡ä¸æ˜¾ç¤ºã€‚\nåŒ…æ‹¬ä½ çš„å›¾åºŠå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸º referrer é—®é¢˜ï¼›æ¯”å¦‚æˆ‘å°±å‘ç°æˆ‘çš„é˜¿é‡Œäº‘OSSå›¾ç‰‡ï¼Œåœ¨æœ¬åœ° HEXO S çš„æ—¶å€™ï¼Œåšå®¢ä¸­çš„å›¾ç‰‡æ— æ³•åŠ è½½\n\nè§£å†³åŠæ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰Hexoåšå®¢ä¸æ˜¾ç¤ºå›¾åºŠå›¾ç‰‡çš„è§£å†³æ–¹æ³•\n\nå…·ä½“æ“ä½œæ˜¯æ‰“å¼€HEXOä¸»é¢˜ä¸­åŒ…å«å…¨å±€ç½‘é¡µheadä¿¡æ¯çš„æ–‡ä»¶ï¼ˆä¸åŒä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·ï¼Œéœ€è¦ä½ æ‰¾åˆ°ä¸»é¢˜çš„å®‰è£…è·¯å¾„ï¼‰keepä¸»é¢˜æ˜¯hexo-theme-keep\\layout\\_partial\\head.ejs\n\næ‰“å¼€ååœ¨é‡Œé¢æ·»åŠ è¿™ä¸ªè¯­å¥ï¼Œè®¾ç½®referrerä¸ºç©º\n&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;\n\n\nè®¾ç½®å®Œæ¯•åï¼Œåº”è¯¥å°±å¯ä»¥æ­£å¸¸è®¿é—®å›¾åºŠå›¾ç‰‡å’ŒCSDNçš„å›¾ç‰‡å¤–é“¾äº†\n3.2 å…³äºosså®‰å…¨çš„æ³¨é‡Šè®¾ç½®ç©ºreferreréœ€è¦åœ¨ossçš„é˜²ç›—é“¾è®¾ç½®ä¸­å¼€å¯ å…è®¸ç©ºreferrerï¼Œè¿™èƒ½è®©ç”¨æˆ·ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä½ çš„å›¾ç‰‡èµ„æºï¼ŒæŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼\nä¸ºäº†æé«˜ossä¸€éƒ¨åˆ†çš„å®‰å…¨æ€§ï¼Œå»ºè®®å…³é—­å…è®¸ç©ºreferrerçš„åŠŸèƒ½ï¼Œä½†è¿™å¯èƒ½ä¼šè®©ä½ çš„ localhost æœ¬åœ°æµ‹è¯•çš„æ—¶å€™æ— æ³•æ˜¾ç¤ºå‡ºå›¾ç‰‡ï¼ˆå‰é¢ä¹Ÿæåˆ°è¿‡ï¼‰ä¹Ÿæ— æ³•è®©typoraæ˜¾ç¤ºå‡ºå›¾ç‰‡ï¼›\næ‰€ä»¥æ€ä¹ˆé€‰æ‹©å°±çœ‹ä½ è‡ªå·±äº†ï¼\n4.sshå…å¯†éƒ¨ç½²hexo cl //æ¸…é™¤å·²æœ‰æ ¼å¼hexo g --d //å°†æ›´æ”¹æ›´æ–° å¹¶pushåˆ°gitä»“åº“\n\ngitæœ¬åœ°ç”¨å‘½ä»¤è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½æ¯ä¸€æ¬¡hexo g --dæ“ä½œéƒ½ä¼šè®©ä½ è¾“å…¥ä¸€æ¬¡è´¦æˆ·å’Œå¯†ç ï¼Œæˆ‘ä»¬åªéœ€è¦ç”Ÿæˆä¸€ä¸ªSSHå…¬é’¥ç»™gitä»“åº“ï¼Œå°±èƒ½è·³è¿‡è¿™ä¸ªæ“ä½œ\n\nå…·ä½“ç”Ÿæˆæ“ä½œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªåšå®¢ğŸ‘‰å¦‚ä½•ä½¿ç”¨sshå¯†é’¥é…ç½®git\n\nåœ¨è®¾ç½®å¥½åï¼Œè®°å¾—æŠŠhexoçš„_configæ–‡ä»¶ä¸­çš„httpsé“¾æ¥æ›´æ¢ä¸ºsshé“¾æ¥ï¼\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: git@github.com:Aewait/Aewait.github.io.git  branch: master\n\n\n\n4.1 å…³äºgiteeå’Œgithubçš„ä¼˜åŠ£å’³å’³ï¼Œgiteeçš„ä¸€äº›exæ“ä½œè®©æˆ‘ä¸å¾—ä¸æ¢åˆ°äº†githubï¼è€Œä¸”è¯´å¥å®è¯ï¼Œè™½ç„¶giteeæœåŠ¡å™¨åœ¨å›½å†…ï¼Œå…¶gitee pagesçš„è®¿é—®é€Ÿåº¦çœŸä¸è§å¾—æ¯”githubå¿«å¤šå°‘\n\ngithubæ— å®¡æŸ¥ï¼›giteeè¯´æˆ‘å†™çš„æŠ€æœ¯åšå®¢æœ‰é—®é¢˜ï¼Œä¸ç»™æˆ‘éƒ¨ç½²ï¼Œæˆ‘ä¸€è„¸è’™è”½\ngithubåœ¨hexo g --déƒ¨ç½²äº†ä¹‹åèƒ½è‡ªåŠ¨æ›´æ–°ï¼›giteeè¿˜éœ€è¦ä½ è‡ªå·±ç‚¹ä¸€ä¸‹æ›´æ–°æŒ‰é’®ï¼Œå¾ˆçƒ¦\ngithubå¯ä»¥å…è´¹ç»‘å®šä½ è‡ªå·±çš„åŸŸåï¼›giteeåªæœ‰ä¼ä¸šç‰ˆæ‰è¡Œ\n\nhexoåˆ‡æ¢åˆ°githubéå¸¸æ–¹ä¾¿ï¼Œåœ¨githubä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·å.github.ioçš„ä»“åº“ï¼Œå°†ä½ çš„hexoä¸­_config.ymlçš„è¿œç«¯ä»“åº“è·¯å¾„ä¸€æ”¹ï¼Œéƒ¨ç½²äº†ä¹‹åï¼Œç›´æ¥å°±èƒ½æ­£å¸¸è®¿é—®ï¼\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  #repo: git@gitee.com:ewait/ewait.git  #branch: master  repo: git@github.com:Aewait/Aewait.github.io.git  branch: master\n\nå¯¹äº‹ä¸å¯¹äººï¼Œå¹³å°åªæ˜¯ä¸€ä¸ªè½½ä½“ï¼Œåˆ†äº«æŠ€æœ¯æ‰æ˜¯é‡è¦çš„ï¼\n4.2 netlifynetlifyçš„éƒ¨ç½²éå¸¸å®¹æ˜“ï¼Œå…¶è®¿é—®é€Ÿåº¦æ¯” github pages å¿«å¤šäº†ï¼å®æµ‹netlifyçš„å»¶è¿Ÿåªæœ‰80msï¼Œè€Œ github pages æ˜¯200ms\n\néƒ¨ç½²å‚è€ƒğŸ¦‹Hexo+Github+Netlifyéƒ¨ç½²ä¸ªäººåšå®¢\n\næœ€æœ€æœ€æ£’çš„ä¸€ç‚¹æ˜¯ï¼Œnetlifyçš„éƒ¨ç½²é€Ÿåº¦å¾ˆå¿«ï¼Œå‡ ä¹æ˜¯ä½  hexo d åˆšåˆšä¸Šä¼ åˆ°ä»“åº“ï¼Œæ²¡è¿‡å‡ ç§’ä»–å°±éƒ¨ç½²æˆåŠŸäº†ï¼\nä½ å¯ä»¥ä¸»è¦ä½¿ç”¨netlifyï¼Œå°† github.io ä½œä¸ºé•œåƒç«™ï¼›ä¸è¿‡è¿™æ ·çš„è¯ï¼Œè¯„è®ºç³»ç»Ÿå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œè¦æ³¨æ„è®¾ç½®ä¸»ç«™çš„urlï¼Œåˆ«æŠŠè¯„è®ºç³»ç»Ÿå¼„boomäº†ï¼\n\næ“ä½œå¾ˆç®€å•ï¼Œgithubç™»é™†åï¼Œé€‰æ‹©ä½ çš„githubä»“åº“\n\nå†é€‰æ‹©å¯¹åº”çš„åˆ†æ”¯ï¼Œç‚¹å‡»åº•éƒ¨çš„deploy siteï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼\n\nç­‰å¾…è¿™é‡Œå‡ºç°publishedçš„å­—æ ·ï¼Œå°±å¯ä»¥è®¿é—®ä½ çš„ç«™ç‚¹äº†ã€‚åŸŸååœ¨domain settingsé‡Œé¢è®¾ç½®å°±OK\n\n4.3 vercelvercelåŒç†ï¼Œä¹Ÿæ˜¯é€‰æ‹©Aewait.github.ioï¼Œæ³¨æ„æ¨¡æ¿ä¸èƒ½é€‰æ‹©hexoï¼Œå¦åˆ™ä¼šéƒ¨ç½²å¤±è´¥ã€‚\næ¨¡æ¿é€‰æ‹©otherï¼Œè¿‡ä¸€ä¼šå°±èƒ½éƒ¨ç½²æˆåŠŸï¼›è¿™æ ·å°±ç›¸å½“äºä¸€ä¸ªç«™ç‚¹æœ‰3ä¸ªå¤‡ä»½äº†ï¼Œå®Œç¾ï¼\n\n5.å…³äºhexoæ–‡å†…tocé—®é¢˜keepæ¨¡æ¿å·²ç»è‡ªå¸¦äº†è¾¹æ tocï¼Œå¯ä»¥åœ¨å³ä¸Šè§’æ‰“å¼€\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡hexo-tocæ’ä»¶å®ç°ç±»ä¼¼CSDNå’Œtyporaçš„æ–‡ç« å†…tocï¼ˆè¿™ä¸ªåŠŸèƒ½å¾ˆå¤šmarkdownç¼–è¾‘å™¨éƒ½ä¸æ”¯æŒï¼Œæ¯”å¦‚obsidianï¼‰\n\n\næ–‡å†…tocæ’ä»¶å®‰è£…å‚è€ƒäº†è¿™ç¯‡çŸ¥ä¹æ–‡ç« ğŸ‘‰ä¼ é€é—¨\n\nåœ¨gité‡Œé¢è¾“å…¥ä»¥ä¸‹å‘½ä»¤\nnpm install hexo-toc --save\n\næ’ä»¶å®‰è£…å®Œæ¯•åï¼Œå°±å¯ä»¥åœ¨mdæ–‡ä»¶çš„å¤´éƒ¨æ’å…¥&lt;!-- toc --&gt; æ¥ç”Ÿæˆç›®å½•ï¼ˆåœ¨typoraå’Œcsdnä¸­æ˜¯[TOC]æ ¼å¼ï¼‰\nä½†æ˜¯è¿™ä¸ªæ’ä»¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ— æ³•å’Œkeepæ¨¡æ¿çš„è¾¹æ tocåŒæ—¶ä½¿ç”¨ã€‚å³ä½¿ç”¨äº†è¯¥æ’ä»¶åï¼Œè¾¹æ tocæ— æ³•è·³è½¬ï¼Œå°±åªèƒ½äºŒé€‰ä¸€äº†ã€‚\næ— å¥ˆåªèƒ½å¸è½½è¿™ä¸ªæ’ä»¶äº†ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯è¾¹æ tocé‡è¦ä¸€ç‚¹\nnpm remove hexo-toc --save\n\n6.è‡ªå®šä¹‰é¦–é¡µæ–‡ç« é¢„è§ˆå†…å®¹hexoæœ¬èº«æ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶é¢„è§ˆæ ¼å¼ï¼Œåœ¨mdæ–‡ä»¶ä¸­æ·»åŠ &lt;!-- more --&gt;å°±å¯ä»¥è‡ªå®šä¹‰æ–‡ç« é¢„è§ˆæ˜¾ç¤ºçš„å†…å®¹\næ•ˆæœå¦‚ä¸‹ğŸ‘‡ å»ºè®®ä¸è¦åœ¨éœ€è¦é¢„è§ˆçš„å†…å®¹ä¸­è®¾ç½®æ ‡é¢˜ï¼Œä¸ç„¶çœ‹èµ·æ¥ä¼šéå¸¸æ€ªå¼‚\n\n7.è¯„è®ºç³»ç»Ÿ7.1 Valineè¯„è®ºç³»ç»Ÿåå°å¦‚ä½•æŸ¥çœ‹è¯„è®ºåœ¨é…ç½®å¥½Valineè¯„è®ºç³»ç»Ÿåï¼Œå¯ä»¥åœ¨leancloudåå°ç®¡ç†ä¸­çœ‹åˆ°è¯„è®ºçš„htmlæºç ã€‚\nä½†é»˜è®¤çš„æ’åºçš„é—®é¢˜æ˜¯ï¼Œçœ‹ä¸åˆ°ç”¨æˆ·æ˜¯åœ¨é‚£ä¸€ç¯‡æ–‡ç« ä¸‹é¢è¯„è®ºçš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´å†…å®¹æ’åºï¼ˆå³ä¸Šè§’é‚£ä¸ªå¸¦æ©™è‰²åœ†ç‚¹çš„æŒ‰é’®ï¼‰ï¼ŒæŠŠurlå¾€å‰ç§»åŠ¨ï¼Œè¿™æ ·å°±èƒ½æ›´æ–¹ä¾¿åœ°çœ‹åˆ°æ˜¯è°è¯„è®ºäº†è‡ªå·±çš„åšå®¢ï¼Œä»¥åŠè¯„è®ºæ–‡ç« çš„ä½ç½®\n\n7.1.1 leancloudé‚®ç®±æé†’ä½ å¯ä»¥åˆ©ç”¨valineæ’ä»¶adminæ¥å®ç°é‚®ç®±æé†’\n\nGithubé¡¹ç›®åœ°å€ï¼šDesertsP&#x2F;Valine-Admin\n\nä½†æ˜¯è¿™ä¸ªæ’ä»¶éœ€è¦ä½ æœ‰ä¸€ä¸ªå¤‡æ¡ˆè¿‡çš„åŸŸåï¼ï¼ï¼ï¼\nç„¶åæˆ‘å°±åœ¨22-04-27è¿™å¤©å‘ç°ï¼Œå…¶å®æˆ‘è®¾ç½®çš„é‚®ç®±æé†’å·²ç»ç”Ÿæ•ˆäº†ï¼ğŸ˜‚çœŸæ˜¯ä¸€æ³¢ä¸‰æŠ˜ï¼ˆç„¶ååˆæŒ‚äº†ï¼Œå‚çœ‹ 7.2 ğŸ˜¥ï¼‰\nå¤§å®¶æ ¹æ®è¿™ç¯‡åšå®¢çš„æ•™ç¨‹è¿›è¡Œé‚®ä»¶æé†’çš„é…ç½®å°±OKäº†ï¼valineè¯„è®ºç³»ç»Ÿä½¿ç”¨\n\n7.1.2 å…³äºäº‘å¼•æ“500æŠ¥é”™æœ¬éƒ¨åˆ†æ›´æ–°äº2023-01-05ï¼Œä»Šå¤©æ›´æ–°äº†åšå®¢çš„urlåœ°å€ï¼Œç„¶åå°±å‘ç°leancloudçš„é‚®ç®±æé†’æŒ‚æ‰äº†ï¼Œçœ‹åå°ä¼šæœ‰ä¸€ä¸ªè¿™æ ·çš„æŠ¥é”™\n[2023-01-06T03:20:03.518063400Z][instance:web1] LeanEngine: /self_wake: 500: Error: undefined is not a valid uri or options object.[2023-01-06T03:20:03.518111500Z][instance:web1]     at request (/home/leanengine/app/node_modules/request/index.js:44:11)[2023-01-06T03:20:03.518117400Z][instance:web1]     at /home/leanengine/app/cloud.js:54:5[2023-01-06T03:20:03.518121000Z][instance:web1]     at /home/leanengine/app/node_modules/leanengine/lib/leanengine.js:202:14[2023-01-06T03:20:03.518124500Z][instance:web1]     at processTicksAndRejections (internal/process/task_queues.js:97:5)\n\næœ€ç»ˆæˆ‘ç™¾åº¦åˆ°äº†è¿™ä¸ªissueï¼Œé‡Œé¢æåˆ°çš„å’Œæˆ‘çš„æƒ…å†µä¸€æ¨¡ä¸€æ ·ï¼šé‚®ä»¶æé†’æŠ¥é”™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆError: undefined is not a valid uri or options object. #138 \nç®€å•è¯´æ¥ï¼Œå°±æ˜¯äº‘å¼•æ“éœ€è¦ç»‘å®šåŸŸå\nè€Œæˆ‘æœ€å¼€å§‹é€‰æ‹©çš„leadcouldæ˜¯åœ¨å›½å†…ï¼ŒåŸŸåå¿…é¡»è¦ipcå¤‡æ¡ˆæ‰èƒ½æ­£å¸¸ç»‘å®šï¼›å¦‚æœéœ€è¦ç”¨ç‹¬ç«‹IPï¼Œé‚£è¿˜å¾—é¢å¤–æé’±ï¼Œ50ä¸€ä¸ªæœˆå®åœ¨æ˜¯è´Ÿæ‹…ä¸èµ·ğŸ˜¥\n\nè‡³äºä¹‹å‰ä¸ºå•¥é‚®ç®±æé†’èƒ½ç”¨å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼›æˆ‘çŒœæ˜¯leancloudæœ€è¿‘æ›´æ–°äº†ç­–ç•¥ï¼Œå°±éœ€è¦å¼ºåˆ¶ç»‘å®šæ‰èƒ½ç”¨äº†â€¦â€¦\n\nè§£å†³æ–¹æ³•ï¼Œä½¿ç”¨å›½é™…ç‰ˆleancloudï¼\n7.2 ä½¿ç”¨ Walineè¯„è®ºç³»ç»Ÿè¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒWalineçš„å¸®åŠ©æ–‡æ¡£ï¼Œæœ¬ç«™çš„è¯„è®ºç³»ç»Ÿä¹Ÿäº 2023-01-06 ä» valine æ›´æ¢ä¸ºäº† walineï¼Œkeepç‰ˆæœ¬3.4.5-&gt;3.5.2\n\nWaline.js.org\nkeepä½¿ç”¨waline\n\né…ç½®å¥½äº† vercel çš„è‡ªå®šä¹‰çš„åŸŸåä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ–¹å¼æ¥å¿«æ·ç®¡ç†\nè¯„è®ºç³»ç»Ÿï¼šexample.yourdomain.comè¯„è®ºç®¡ç†ï¼šexample.yourdomain.com/ui\n\nä¸‹å›¾ä¸ºæ›´æ–°å‰çš„valineè¯„è®ºç•Œé¢\n\nä»¥ä¸‹ä¸ºæ›´æ–°åçš„waline ç•Œé¢ï¼Œå…¶æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼å¯æƒœé»˜è®¤åªæ”¯æŒ128kbï¼Œæš‚æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°ä¿®æ”¹è¯¥é™åˆ¶çš„åŠæ³•ï¼›å¯¹äºæˆ‘æ¥è¯´ï¼Œwalineæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯é‚®ç®±æé†’åŠŸèƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨vecelçš„ç¯å¢ƒå˜é‡æå®šï¼Œæ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼\n\n7.2.1 è‡ªå®šä¹‰walineé‚®ç®±æé†’æ¨¡æ¿\nå‚è€ƒğŸ‘‰waline é‚®ä»¶é€šçŸ¥æ¨¡æ¿æ ·å¼ä¸€è§ˆ\n\nä¸ºäº†é¿å…æºç«™æ— æ³•è®¿é—®ï¼Œè¿™é‡Œè´´å‡ºå½“å‰æˆ‘ä½¿ç”¨çš„é‚®ä»¶é€šçŸ¥æ¨¡æ¿;\næ³¨æ„ï¼Œæˆ‘æ˜¯ç”¨verceléƒ¨ç½²çš„ï¼Œæ‰€ä»¥åªéœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡å°±è¡Œäº†ã€‚å¦‚æœä½ æ˜¯å…¶ä»–éƒ¨ç½²æ–¹å¼ï¼Œè¯·å‚è€ƒä¸Šé¢åšå®¢ä¸­çš„è¯¦ç»†æ•™ç¨‹!\nMAIL_SUBJECT\n&#123;&#123;parent.nick | safe&#125;&#125;ï¼Œæ‚¨åœ¨ã€&#123;&#123;site.name | safe&#125;&#125;ã€ä¸Šçš„è¯„è®ºæ”¶åˆ°äº†æ¥è‡ª  &#123;&#123;self.nick | safe&#125;&#125; çš„å›å¤\n\nMAIL_SUBJECT_ADMIN\nã€&#123;&#123;site.name | safe&#125;&#125;ã€ ä¸Šæœ‰æ–°è¯„è®ºäº†\n\nMAIL_TEMPLATE\n&lt;div style=&quot;border-radius: 10px 10px 10px 10px;font-size:14px;color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,å¾®è½¯é›…é»‘,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);&quot;&gt;&lt;div style=&quot;width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;&quot;&gt;&lt;p style=&quot;font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;&quot;&gt;æ‚¨åœ¨&lt;a style=&quot;text-decoration:none;color: #ffffff;&quot; href=&quot;&#123;&#123;site.url&#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ä¸Šçš„ç•™è¨€æœ‰æ–°å›å¤å•¦ï¼&lt;/p&gt;&lt;/div&gt;&lt;div style=&quot;margin:40px auto;width:90%&quot;&gt;&lt;p&gt;Hi, &#123;&#123;parent.nick&#125;&#125;ï¼Œæ‚¨æ›¾åœ¨æ–‡ç« ä¸Šå‘è¡¨è¯„è®ºï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;&gt;&#123;&#123;parent.comment | safe&#125;&#125;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&#123;&#123;self.nick&#125;&#125;&lt;/strong&gt; ç»™æ‚¨çš„å›å¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;&gt;&#123;&#123;self.comment | safe&#125;&#125;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥ç‚¹å‡»&lt;a style=&quot;text-decoration:none; color:#12addb&quot; href=&quot;&#123;&#123;site.postUrl&#125;&#125;&quot; target=&quot;_blank&quot;&gt;æŸ¥çœ‹å›å¤çš„å®Œæ•´å…§å®¹&lt;/a&gt;ï¼Œæ¬¢è¿å†æ¬¡å…‰ä¸´&lt;a style=&quot;text-decoration:none; color:#12addb&quot; href=&quot;&#123;&#123;site.url&#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ã€‚&lt;hr /&gt;&lt;p style=&quot;font-size:12px;color:#b7adad&quot;&gt;æœ¬é‚®ä»¶ä¸ºç³»ç»Ÿè‡ªåŠ¨å‘é€ï¼Œè¯·å‹¿ç›´æ¥å›å¤é‚®ä»¶å“¦ï¼Œå¯åˆ°åšæ–‡å†…å®¹å›å¤ã€‚&lt;/p&gt;&lt;/p&gt;&lt;style type=&quot;text/css&quot;&gt;a:link&#123;text-decoration:none&#125;a:visited&#123;text-decoration:none&#125;a:hover&#123;text-decoration:none&#125;a:active&#123;text-decoration:none&#125;&lt;/style&gt;&lt;/div&gt;&lt;/div&gt;\n\nMAIL_TEMPLATE_ADMIN\n&lt;div style=&quot;background-image: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/bg.jpg);;padding:20px 0px 20px;margin:0px;background-color:#ded8ca;width:100%;&quot;&gt;&lt;div style=&quot;background: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/leisi-714x62.png) repeat-y scroll top;&quot;&gt;&lt;div style=&quot;border-radius: 10px 10px 10px 10px;font-size:14px;color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,å¾®è½¯é›…é»‘,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffe8dd61;box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);margin:auto&quot;&gt;&lt;img class=&quot;headerimg no-lightbox entered loaded&quot;src=&quot;https://npm.elemecdn.com/sarakale-assets@v1/bg/bg3.jpg&quot;style=&quot;width:100%;overflow:hidden;pointer-events:none&quot;data-ll-status=&quot;loaded&quot;&gt;&lt;div style=&quot;width:100%;color:#9d2850;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;background: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/line034_666x66.png) left top no-repeat;&quot;&gt;&lt;p style=&quot;font-size:16px;font-weight: bold;text-align:center;word-break:break-all;padding: 23px 32px;margin:0;border-radius: 10px 10px 0 0;&quot;&gt;æ‚¨åœ¨&lt;a style=&quot;text-decoration:none;color: #9d2850;&quot;href=&quot;&#123;&#123;site.url&#125;&#125;&quot;target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ä¸Šçš„æ–‡ç« æœ‰äº†æ–°çš„è¯„è®º&lt;/p&gt;&lt;/div&gt;&lt;div style=&quot;margin:40px auto;width:90%;&quot;&gt;&lt;p&gt;&lt;strong&gt;&#123;&#123;self.nick&#125;&#125;&lt;/strong&gt;å›å¤è¯´ï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:15px;color:#555555;&quot;&gt;&#123;&#123;self.comment|safe&#125;&#125;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥ç‚¹å‡»&lt;a style=&quot;text-decoration:none; color:#cf5c83&quot;href=&quot;&#123;&#123;site.postUrl&#125;&#125;&quot;target=&quot;_blank&quot;&gt;æŸ¥çœ‹å›å¤çš„å®Œæ•´å…§å®¹&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n\n7.2.2 163é‚®ç®±è‡ªå®šä¹‰å‘ä»¶äººåå­—è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå®˜æ–¹ç»™å‡ºäº†ä¸¤ä¸ªè‡ªå®šä¹‰é‚®ç®±å‘ä»¶äººå’Œå‘ä»¶é‚®ç®±çš„ç¯å¢ƒå˜é‡ï¼Œå…¶å¯¹äºç½‘æ˜“çš„163å’Œ126é‚®ç®±æ¥è¯´ï¼Œä½ å¿…é¡»è¦è®¾ç½®æˆä½ çš„ç™»å½•é‚®ç®±æ‰å¯ä»¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ²¡åŠæ³•å‘é€é‚®ç®±\nSENDER_EMAIL ç”¨æ¥è‡ªå®šä¹‰å‘ä»¶é‚®ç®±ï¼Œä½†æ˜¯ç½‘æ˜“é‚®ç®±ä¸æ”¯æŒSENDER_NAME  è‡ªå®šä¹‰å‘ä»¶äºº\n\nè€Œä¸”è¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡éœ€è¦éƒ½åŠ ä¸Šï¼Œé‚®ç®±è‡ªå®šä¹‰å‘ä»¶äººæ‰èƒ½ç”Ÿæ•ˆï¼›\nå¦‚æœä½ åªè®¾ç½®äº† SENDER_NAME ç¯å¢ƒå˜é‡ï¼Œè€Œæ²¡æœ‰è®¾ç½® SENDER_EMAILï¼Œé‚£ä¹ˆå‘ä»¶äººæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œæ­¤æ—¶å‘ä»¶äººä¼šæ˜¯ä½ çš„é‚®ç®±ï¼Œå¾ˆéš¾çœ‹ï¼›\n\n8.éƒ¨åˆ†keepé­”æ”¹è®°å½•é™¤äº†ç¬¬ä¸€ç‚¹é‡Œé¢æåˆ°çš„åšå®¢ï¼Œæˆ‘è¿˜ä¿®æ”¹äº†å…¶ä»–ä¸€äº›å†…å®¹ï¼Œå¹¶å¯¹keep v3.5.2æ›´æ–°äº†çš„é…ç½®æ–‡ä»¶è¿›è¡Œè¯´æ˜ï¼›ä»¥ä¸‹æ˜¯å„ä¸ªæ¡†çš„æ ‡å·\n\n\nä»¥ä¸‹æ˜¯ä¸åŒæ¡†å¯¹åº”çš„é…ç½®æ–‡ä»¶è·¯å¾„å’Œå¯¹åº”çš„ç±»ï¼Œå¸®åŠ©ä½ æ‰¾åˆ°ä»–ä»¬çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼›æ›´è¯¦ç»†çš„ä»‹ç»å‚è€ƒ hexo-keepé¦–é¡µæ ·å¼è‡ªå®šä¹‰\n1  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\header.styl   .header-wrapper &#123;&#125;2  Hexo\\themes\\keep\\source\\css\\layout\\page.styl   .page-container &#123;&#125;3  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\first-screen.styl   .description &#123;&#125;4  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\first-screen.styl   .s-icon-list &#123;&#125;5  Hexo\\themes\\keep\\source\\css\\layout\\page.styl   .page-main-content &#123;&#125;6  Hexo\\themes\\keep\\source\\css\\layout\\home-content.styl   .home-content-container &#123;&#125;7  Hexo\\themes\\keep\\source\\css\\layout\\home-content.styl   .home-article-item &#123;&#125;\n\nç‰ˆæœ¬åŸºäºKEEP V3.5.2ï¼Œå¦‚æœä½ å‘ç°é…ç½®æ–‡ä»¶ä½ç½®æœ‰å˜åŠ¨ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€å‘ŠçŸ¥\nå¤‡æ³¨ï¼škeepä¸æ”¯æŒæ·±å±‚æ¬¡çš„è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½æ˜¯é’ˆå¯¹ npm åŒ…è¿›è¡Œçš„ï¼Œä¼šåœ¨ä½ æ›´æ–°keepçš„æ—¶å€™ä¸¢å¤±ï¼æ‰€ä»¥æƒ³æŠ˜è…¾ï¼Œå»ºè®®åšå¥½ä¸å†æ›´æ–°keepçš„å‡†å¤‡å“¦ï¼ˆé™¤éä½ æ„¿æ„æ¯æ¬¡éƒ½æ”¹ä¸€éï¼‰ğŸ¤£\n\nblog&#x2F;node_modules&#x2F;hexo-theme-keep\n\nå¦‚æœè§‰å¾—æœ¬ç«™ä¿®æ”¹è¿‡åçš„æ ·å¼å¾ˆä¸é”™ï¼Œé‚£å¯ä»¥å»æˆ‘çš„Githubä»“åº“ï¼Œç›´æ¥æŠŠkeepçš„æ¨¡ç»„ä¸‹è½½åæ”¾åˆ°ä½ çš„æœ¬åœ°å°±å¯ä»¥äº†ï¼›è¿™æ ·å°±åªéœ€è¦ä¿®æ”¹ keep/source/css/layout/page.stylé‡Œé¢çš„ä¸¤ä¸ªèƒŒæ™¯å›¾urlå°±å¯ä»¥äº†ï¼\n\n8.1 é›ªèŠ±é£˜é£˜æˆ‘çš„ä¸»é¡µæœ‰é£˜åŠ¨çš„é›ªèŠ±ï¼Œæƒ³çŸ¥é“æ€ä¹ˆå¼„çš„ï¼Ÿé‚£å°±å¾€ä¸‹çœ‹å§ï¼\n\né›ªèŠ±ä»£ç æ¥è‡ªåšå®¢ğŸ‘‰hexo+nextæ·»åŠ é›ªèŠ±é£˜è½èƒŒæ™¯æ•ˆæœ\n\nåœ¨Hexo-themes-keep\\source\\jsä¸‹æ–°å»ºæ–‡ä»¶snow.js\n/*æ ·å¼äºŒ*//* æ§åˆ¶ä¸‹é›ª */function snowFall(snow) &#123;    /* å¯é…ç½®å±æ€§ */    snow = snow || &#123;&#125;;    this.maxFlake = snow.maxFlake || 200; /* æœ€å¤šç‰‡æ•° */    this.flakeSize = snow.flakeSize || 10; /* é›ªèŠ±å½¢çŠ¶ */    this.fallSpeed = snow.fallSpeed || 1; /* å è½é€Ÿåº¦ */&#125;/* å…¼å®¹å†™æ³• */requestAnimationFrame = window.requestAnimationFrame ||    window.mozRequestAnimationFrame ||    window.webkitRequestAnimationFrame ||    window.msRequestAnimationFrame ||    window.oRequestAnimationFrame ||    function (callback) &#123;        setTimeout(callback, 1000 / 60);    &#125;;cancelAnimationFrame = window.cancelAnimationFrame ||    window.mozCancelAnimationFrame ||    window.webkitCancelAnimationFrame ||    window.msCancelAnimationFrame ||    window.oCancelAnimationFrame;/* å¼€å§‹ä¸‹é›ª */snowFall.prototype.start = function () &#123;    /* åˆ›å»ºç”»å¸ƒ */    snowCanvas.apply(this);    /* åˆ›å»ºé›ªèŠ±å½¢çŠ¶ */    createFlakes.apply(this);    /* ç”»é›ª */    drawSnow.apply(this)&#125;/* åˆ›å»ºç”»å¸ƒ */function snowCanvas() &#123;    /* æ·»åŠ Domç»“ç‚¹ */    var snowcanvas = document.createElement(&quot;canvas&quot;);    snowcanvas.id = &quot;snowfall&quot;;    snowcanvas.width = window.innerWidth;    snowcanvas.height = document.body.clientHeight;    snowcanvas.setAttribute(&quot;style&quot;, &quot;position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;&quot;);    document.getElementsByTagName(&quot;body&quot;)[0].appendChild(snowcanvas);    this.canvas = snowcanvas;    this.ctx = snowcanvas.getContext(&quot;2d&quot;);    /* çª—å£å¤§å°æ”¹å˜çš„å¤„ç† */    window.onresize = function () &#123;        snowcanvas.width = window.innerWidth;        /* snowcanvas.height = window.innerHeight */    &#125;&#125;/* é›ªè¿åŠ¨å¯¹è±¡ */function flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) &#123;    this.x = Math.floor(Math.random() * canvasWidth); /* xåæ ‡ */    this.y = Math.floor(Math.random() * canvasHeight); /* yåæ ‡ */    this.size = Math.random() * flakeSize + 2; /* å½¢çŠ¶ */    this.maxSize = flakeSize; /* æœ€å¤§å½¢çŠ¶ */    this.speed = Math.random() * 1 + fallSpeed; /* å è½é€Ÿåº¦ */    this.fallSpeed = fallSpeed; /* å è½é€Ÿåº¦ */    this.velY = this.speed; /* Yæ–¹å‘é€Ÿåº¦ */    this.velX = 0; /* Xæ–¹å‘é€Ÿåº¦ */    this.stepSize = Math.random() / 30; /* æ­¥é•¿ */    this.step = 0 /* æ­¥æ•° */&#125;flakeMove.prototype.update = function () &#123;    var x = this.x,        y = this.y;    /* å·¦å³æ‘†åŠ¨(ä½™å¼¦) */    this.velX *= 0.98;    if (this.velY &lt;= this.speed) &#123;        this.velY = this.speed    &#125;    this.velX += Math.cos(this.step += .05) * this.stepSize;    this.y += this.velY;    this.x += this.velX;    /* é£å‡ºè¾¹ç•Œçš„å¤„ç† */    if (this.x &gt;= canvas.width || this.x &lt;= 0 || this.y &gt;= canvas.height || this.y &lt;= 0) &#123;        this.reset(canvas.width, canvas.height)    &#125;&#125;;/* é£å‡ºè¾¹ç•Œ-æ”¾ç½®æœ€é¡¶ç«¯ç»§ç»­å è½ */flakeMove.prototype.reset = function (width, height) &#123;    this.x = Math.floor(Math.random() * width);    this.y = 0;    this.size = Math.random() * this.maxSize + 2;    this.speed = Math.random() * 1 + this.fallSpeed;    this.velY = this.speed;    this.velX = 0;&#125;;// æ¸²æŸ“é›ªèŠ±-éšæœºå½¢çŠ¶ï¼ˆæ­¤å¤„å¯ä¿®æ”¹é›ªèŠ±é¢œè‰²ï¼ï¼ï¼ï¼‰flakeMove.prototype.render = function (ctx) &#123;    var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);    snowFlake.addColorStop(0, &quot;rgba(255, 255, 255, 0.9)&quot;); /* æ­¤å¤„æ˜¯é›ªèŠ±é¢œè‰²ï¼Œé»˜è®¤æ˜¯ç™½è‰² */    snowFlake.addColorStop(.5, &quot;rgba(255, 255, 255, 0.5)&quot;); /* è‹¥è¦æ”¹ä¸ºå…¶ä»–é¢œè‰²ï¼Œè¯·è‡ªè¡ŒæŸ¥ */    snowFlake.addColorStop(1, &quot;rgba(255, 255, 255, 0)&quot;); /* æ‰¾16è¿›åˆ¶çš„RGB é¢œè‰²ä»£ç ã€‚ */    ctx.save();    ctx.fillStyle = snowFlake;    ctx.beginPath();    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);    ctx.fill();    ctx.restore();&#125;;/* åˆ›å»ºé›ªèŠ±-å®šä¹‰å½¢çŠ¶ */function createFlakes() &#123;    var maxFlake = this.maxFlake,        flakes = this.flakes = [],        canvas = this.canvas;    for (var i = 0; i &lt; maxFlake; i++) &#123;        flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed))    &#125;&#125;/* ç”»é›ª */function drawSnow() &#123;    var maxFlake = this.maxFlake,        flakes = this.flakes;    ctx = this.ctx, canvas = this.canvas, that = this;    /* æ¸…ç©ºé›ªèŠ± */    ctx.clearRect(0, 0, canvas.width, canvas.height);    for (var e = 0; e &lt; maxFlake; e++) &#123;        flakes[e].update();        flakes[e].render(ctx);    &#125;    /*  ä¸€å¸§ä¸€å¸§çš„ç”» */    this.loop = requestAnimationFrame(function () &#123;        drawSnow.apply(that);    &#125;);&#125;/* è°ƒç”¨åŠæ§åˆ¶æ–¹æ³• */var snow = new snowFall(&#123;    maxFlake: 60&#125;);snow.start();\n\næ·»åŠ å®Œæˆåï¼Œåœ¨ hexo-theme-keep\\layout\\layout.ejs ä¸­æ·»åŠ å¦‚ä¸‹å¼•ç”¨\n&lt;script type = &quot;text/javascript&quot; src=&quot;/js/snow.js&quot;&gt;&lt;/script&gt;\n\næ·»åŠ å®Œæˆåçš„ layout.ejs æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&lt;%= config.language %&gt;&quot;&gt;&lt;%- partial(&#x27;_partial/head&#x27;) %&gt;&lt;body&gt;&lt;%- body %&gt;&lt;%- partial(&#x27;_partial/scripts&#x27;) %&gt;&lt;script type = &quot;text/javascript&quot; src=&quot;/js/snow.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n\né‡æ–°éƒ¨ç½²ï¼Œå°±OKå•¦ï¼\n8.2 é¦–é¡µæè¿°å­—ä½“çš„èƒŒæ™¯æ¡†å’Œé€æ˜åº¦è¿™é‡Œå¯¹åº”çš„æ˜¯3å·æ¡†çš„æ–‡å­—\nä¿®æ”¹hexo-theme-keep\\source\\css\\layout\\_partial\\first-screen.stylä¸­ä»¥ä¸‹éƒ¨åˆ†ï¼Œæœ‰æ³¨é‡Šçš„åœ°æ–¹å°±æ˜¯æˆ‘ä¿®æ”¹äº†çš„åœ°æ–¹\n.description &#123;  /*color $first-screen-font-color*/  color: rgb(255 250 250) /*å­—ä½“é¢œè‰²*/  font-weight bold  font-size $first-screen-font-size  line-height 1.8  text-align center  background: rgba(50,50,50,0.3); /*å­—ä½“èƒŒæ™¯é¢œè‰²å’Œé€æ˜çš„*/  padding: 3px 15px; /*å­—ä½“èƒŒæ™¯æ¡†çš„å¤§å°*/  border-radius: 5px; /*åœ†è§’*/        .desc-item &#123;    /*color $first-screen-font-color*/    color: rgb(255 250 250) /*å­—ä½“é¢œè‰²*/  &#125;  +keep-tablet() &#123;    font-size $first-screen-font-size * 0.9  &#125;&#125;\n\nä¿®æ”¹äº†ä¹‹åï¼Œé¦–é¡µå±…ä¸­çš„ä»‹ç»æ–‡å­—å°±ä¼šå˜æˆå½“å‰çš„æ¨¡æ ·ï¼ˆä¹‹å‰çš„æ ·å¼æ²¡æœ‰èƒŒæ™¯æ¡†ï¼Œåœ¨è‡ªå®šä¹‰èƒŒæ™¯åå¾ˆå®¹æ˜“å°±çœ‹ä¸æ¸…ï¼‰\n\nåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹4å·æ¡†ï¼Œç»™å®ƒæ·»åŠ ä¸€ä¸ªèƒ½å¤Ÿè®©å®ƒçœ‹å¾—æ¸…çš„èƒŒæ™¯æ¡†ï¼ˆå›¾æ ‡é¢œè‰²æ²¡æœ‰åŠæ³•ä¿®æ”¹ï¼Œåªèƒ½ä¿®æ”¹èƒŒæ™¯æ¡†é¢œè‰²ï¼‰\n\n4å·æ¡†æ‰€åœ¨é…ç½®æ–‡ä»¶å’Œ3å·æ¡†ç›¸åŒï¼Œæ‰¾åˆ°.s-icon-listå­—æ®µï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹\n.s-icon-list &#123;  background: rgba(220 220 220,0.3); /*å­—ä½“èƒŒæ™¯é¢œè‰²å’Œé€æ˜çš„*/  padding:4px 11px 4px 11px; /*å­—ä½“èƒŒæ™¯æ¡†çš„å¤§å°*/  border-radius: 5px; /*åœ†è§’*/  ...   &#125;\n\n8.3 é¡¶éƒ¨å­—ä½“åŠ ç²—\nhexoé¡¶éƒ¨åº•éƒ¨é€æ˜åº¦æ¸å˜\n\nå‚è€ƒè¿™ç¯‡åšå®¢çš„ 1-2, ä¿®æ”¹ keep\\source\\css\\layout\\_partial\\header.styl\næ‰¾åˆ°ä»¥ä¸‹ä»£ç \n.menu-item &#123;\tfloat: left;\tposition: relative;\tmargin-left: 30px;\tfont-size: 1rem;\tcursor: pointer;\tcolor: var(--default-text-color);\t......\n\nåŠ ä¸€æ¡font-weight: boldï¼Œä¿®æ”¹ç»“æœï¼š\n.menu-item &#123;\tfloat: left;\tposition: relative;\tmargin-left: 30px;\tfont-size: 1rem;\tfont-weight: bold;\tcursor: pointer;\tcolor: var(--default-text-color);\t......\n\né¡¶æ å’Œåº•æ é€æ˜åº¦æ¸å˜ä¿®æ”¹å‚è€ƒ 8.5ï¼Œæˆ‘æ›´æ–°è¿‡åçš„æ–¹æ³•å¯ä»¥è®©é¡¶æ å’Œåº•æ çš„é€æ˜åº¦æ¸å˜éšç€æ˜æš—æ¨¡å¼å˜åŒ–\n8.4 æ–‡ç« ä¾§è¾¹æ tocæ›´æ–°äº†ä¹‹åçš„ä¾§è¾¹æ å˜åˆ°äº†é¡µé¢çš„å³è¾¹ï¼Œä¸”é»˜è®¤ä¸‹æ˜¯æ²¡æœ‰èƒŒæ™¯çš„ï¼ˆå› ä¸ºé»˜è®¤åœ¨æ–‡ç« é¡µé¢ä¹Ÿæ˜¯çº¯ç™½çš„ï¼Œæ²¡æœ‰èƒŒæ™¯ä¹Ÿèƒ½çœ‹å¾—æ¸…ï¼‰\nä½†æ˜¯å½“ä¸‹æˆ‘å·²ç»è®¾ç½®äº†å…¨å±€èƒŒæ™¯ï¼Œæ‰€ä»¥å°±éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼\nkeepæ›´æ–°3.5.2ä¹‹åçš„ä¾§è¾¹æ é…ç½®æ–‡ä»¶å˜äº†,ç°åœ¨æ˜¯åœ¨keep/source/css/layout/_partial/ä¸­çš„toc.styl\n.post-toc-wrap &#123;  position relative  box-sizing border-box  width 100%  height 100%  overflow-y auto  font-size 0.92rem  font-weight: bold /*å­—ä½“åŠ ç²—*/  border-radius: 5px; /*åœ†è§’*/  ...&#125;\n\næ·»åŠ æˆ‘æ³¨é‡Šäº†çš„è¿™å‡ é¡¹å°±OKäº†ï¼Œå¦‚æœä½ æƒ³è¦æ—§ç‰ˆæ ·å¼ï¼ˆå›ºå®šåœ¨å·¦ä¾§ï¼‰å¯ä»¥å°è¯•å°†positionä¿®æ”¹ä¸ºfixed\n8.5 æ˜æš—æ¨¡å¼é€‚é…ä¿®æ”¹å®ŒèƒŒæ™¯é¢œè‰²å’ŒèƒŒæ™¯å›¾ä¹‹åï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼šå¦‚æœæœ‰ç”¨æˆ·çš„ç”µè„‘æ˜¯æš—è‰²æ¨¡å¼ï¼Œè¿›å…¥åšå®¢çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°å­—å®Œå…¨çœ‹ä¸æ¸…ï¼Œæ•´ä¸ªç•Œé¢éƒ½å¾ˆéš¾çœ‹\n\nè§£å†³åŠæ³•é‚£å°±æ˜¯éœ€è¦è®©æˆ‘ä»¬çš„èƒŒæ™¯é¢œè‰²èƒ½æ ¹æ®æ˜æš—è‡ªåŠ¨åˆ‡æ¢ï¼\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨ hexo-theme-keep\\source\\css\\ ä¸­æ·»åŠ ä¸€ä¸ª my æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å†…éƒ¨æ·»åŠ ä¸€ä¸ª user-style.styl\n// å…¨å±€èƒŒæ™¯çš„çš„é¢œè‰²åˆ‡æ¢.dark-mode&#123;    --content-background-color:#37383fe6;&#125;.light-mode&#123;    --content-background-color:#ffffffe6;&#125;// tocæ å¤§å°.post-toc-wrap .post-toc .nav&#123;  padding:21px&#125;// ä½¿tocèƒ½å¤Ÿæ›´å…·æ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢é¢œè‰².light-mode .post-toc-wrap &#123;    background-color: #ffffffe6;&#125;.dark-mode .post-toc-wrap &#123;    background-color: #37383fe6;&#125;// é¡¶éƒ¨èƒŒæ™¯é€æ˜åº¦æ¸å˜ï¼Œæ˜æš—å˜åŒ–.light-mode .header-wrapper &#123;    background: linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.4));&#125;.dark-mode .header-wrapper &#123;    background: linear-gradient(to bottom, rgba(30, 30, 30, 1), rgba(30, 30, 30, 0.4));&#125;// åº•éƒ¨èƒŒæ™¯é€æ˜åº¦æ¸å˜ï¼Œæ˜æš—å˜åŒ–.light-mode .page-main-content-bottom &#123;  background: linear-gradient(to top, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))/*é€æ˜åº¦è®¾ç½®*/&#125;.dark-mode .page-main-content-bottom &#123;  background: linear-gradient(to top, rgba(30, 30, 30, 0.9), rgba(30, 30, 30, 0.4));&#125;\n\nå†™å®Œåï¼Œåœ¨ css/style.styl ä¸­å¼•ç”¨è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†\n@import &quot;my/user-style.styl&quot;\n\nåˆšå¼€å§‹æˆ‘ç”¨çš„åŠæ³•å¤ªè ¢äº†ï¼Œæµªè´¹äº†å¥½å¤šæ—¶é—´ï¼Œè€Œä¸”ç»å¸¸å¤±æ•ˆã€‚åæ¥è¯·æ•™äº†ä¸€ä½ä¼šå‰ç«¯çš„æœ‹å‹ï¼Œä»–ä¸€ä¸‹å°±å¸®æˆ‘æå®šäº†ï¼Œå‘œå‘œå‘œå‘œğŸ˜«\n\næŒ‰ç…§ä¸Šé¢ä¿®æ”¹äº†é¡¶æ å’Œåº•æ æ ·å¼åï¼Œè¯·ä¸è¦å¼€å¯keepé…ç½®æ–‡ä»¶ä¸­çš„header_transparentï¼Œå¦åˆ™ä¸¤ä¸ªæ•ˆæœå åŠ ï¼Œä¸»é¡µé¡¶æ ä¼šå˜å¾—æœ‰äº›éš¾çœ‹\n# Set transparent background for header.header_transparent: false  # Option values: true | false\n\n8.6 é¡µè„šè‡ªå®šä¹‰8.6.1 æ·»åŠ ç«™ç‚¹è¿è¡Œæ—¶é—´2023-01-09 æ·»åŠ äº†ç«™ç‚¹è¿è¡Œæ—¶é—´ï¼Œåˆ é™¤äº†hexoçš„æç¤º\n\nä¿®æ”¹ä¹‹åçš„å®Œæ•´æ–‡ä»¶è¯·å»æˆ‘çš„ Githubä»“åº“ æŸ¥çœ‹\n\nè¦æƒ³æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ï¼Œkeepä¸»é¢˜ä¿®æ”¹ keep/layout/_partial/footer.ejsï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç \n&lt;% if (f_upyun) &#123; %&gt;    &lt;div class=&quot;ypyun-info info-item&quot;&gt;        &lt;a target=&quot;_blank&quot; rel=&quot;nofollow&quot; href=&quot;&lt;%= f_upyun %&gt;&quot;&gt;        &lt;%- __(&#x27;footer_upyun&#x27;, &#x27;&lt;img src=&quot;/images/upyun.png&quot; height=&quot;20&quot;&gt;&#x27;) %&gt;        &lt;/a&gt;    &lt;/div&gt;&lt;% &#125; %&gt;    \n\nåœ¨ä¸‹æ–¹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œæ¥è‡ªğŸ‘‰hexo+yiliaæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´\næºç«™çš„ä»£ç æœ‰ç‚¹é—®é¢˜ï¼Œè¯¦è§è¯¥é¡µé¢è¯„è®ºï¼ˆæœ‰äººæŒ‡å‡ºï¼Œä½†ä½œè€…æ²¡æœ‰æ›´æ–°æ­£æ–‡ï¼‰\n&lt;!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ --&gt;        &lt;% if (theme.running_time &amp;&amp; theme.running_time.enable &amp;&amp; theme.running_time.create_time) &#123; %&gt;            &lt;div class=&quot;timerun-info info-item&quot;&gt;                &lt;span id=&quot;timeDate&quot;&gt;è½½å…¥å¤©æ•°...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;è½½å…¥æ—¶åˆ†ç§’...&lt;/span&gt;                &lt;script&gt;                var now = new Date();                function createtime() &#123;                    //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´                    var create_time = &#x27;&lt;%- theme.running_time.create_time %&gt;&#x27;;                    var grt = new Date(create_time);                    now.setTime(now.getTime() + 250);                    days = (now - grt) / 1000 / 60 / 60 / 24;                    dnum = Math.floor(days);                    hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);                    hnum = Math.floor(hours);                    if (String(hnum).length == 1) &#123;                        hnum = &quot;0&quot; + hnum;                    &#125;                    minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);                    mnum = Math.floor(minutes);                    if (String(mnum).length == 1) &#123;                        mnum = &quot;0&quot; + mnum;                    &#125;                    seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);                    snum = Math.round(seconds);                    if (String(snum).length == 1) &#123;                        snum = &quot;0&quot; + snum;                    &#125;                    document.getElementById(&quot;timeDate&quot;).innerHTML = &quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ &quot; + dnum + &quot; å¤© &quot;;                    document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; å°æ—¶ &quot; + mnum + &quot; åˆ† &quot; + snum + &quot; ç§’&quot;;                &#125;                setInterval(&quot;createtime()&quot;, 250);                &lt;/script&gt;            &lt;/div&gt;        &lt;% &#125; %&gt;        &lt;!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ --&gt;\n\nè¿™é‡Œä¿®æ”¹å®Œæ¯•åï¼Œè¿˜éœ€è¦åœ¨keepçš„é…ç½®æ–‡ä»¶é‡Œé¢æ·»åŠ ä¸‹é¢è¿™ä¸€é¡¹ï¼›å¦‚æœåç»­ä¸æƒ³è¦äº†ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºfalseç¦ç”¨è¿™ä¸€æ \n# ç½‘ç«™è¿è¡Œæ—¶é—´ï¼Œæ ¼å¼å½¢å¦‚ï¼šâ€œæœ¬ç«™å·²å®‰å…¨è¿è¡Œ 101 å¤© 12 å°æ—¶ 13 åˆ† 41 ç§’â€# Runing Timerunning_time:Â  enable: trueÂ  create_time: &#x27;01/01/2021 00:00:00&#x27; #æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´\n\nå¦‚æœä½ æƒ³åˆ é™¤hexoçš„æç¤ºï¼Œé‚£å°±æ³¨é‡Šæ‰ footer.ejs çš„è¿™äº›ä»£ç \n&lt;!--æ³¨é‡Šæ‰è¿™é‡Œçš„ä»£ç ï¼Œå°±å¯ä»¥å–æ¶ˆåº•éƒ¨çš„hexoæ ‡è¯†--&gt;&lt;!-- &lt;div class=&quot;theme-info info-item&quot;&gt;    &lt;%- __(&#x27;powered_by&#x27;, &#x27;&lt;a target=&quot;_blank&quot; href=&quot;https://hexo.io&quot;&gt;Hexo&lt;/a&gt;&#x27;) %&gt;&amp;nbsp;|&amp;nbsp;&lt;%- __(&#x27;theme&#x27;) %&gt;&amp;nbsp;&lt;a class=&quot;theme-version&quot; target=&quot;_blank&quot; href=&quot;https://github.com/XPoet/hexo-theme-keep&quot;&gt;Keep v3.5.2&lt;/a&gt;&lt;/div&gt; --&gt;\n\n8.6.2 ä¿®æ”¹é¡µè„šå†…å®¹åˆ°åº•éƒ¨çš„è·ç¦»å¦‚å›¾ï¼Œè¿™ä¸ªé¡µè„šåˆ°åº•éƒ¨çš„è·ç¦»å®åœ¨æœ‰ç‚¹å®½ï¼Œå¼„å¾—èƒŒæ™¯å›¾éƒ½è¢«æŒ¡ä½äº†å¥½å¤§ä¸€éƒ¨åˆ†ï¼›å¯¹äºå¼ºè¿«ç—‡æ¥è¯´ï¼Œè¿™è°å—å¾—äº†ï¼Œæ”¹äº†ï¼\n\næ‰¾åˆ° hexo-theme-keep\\source\\css\\layout\\_partial ä¿®æ”¹ footer.styl çš„ padding-bottom\n.info-container &#123;  padding-bottom 1rem  text-align center&#125;\n\né»˜è®¤æ˜¯ 1remï¼Œè¿™é‡Œæˆ‘ç›´æ¥æ”¹æˆ 0 çœ‹çœ‹æ˜¯ä¸æ˜¯ä¿®æ”¹å¯¹åœ°æ–¹äº†ï¼›hexo s ä¸€çœ‹ï¼Œç›´æ¥é åº•äº†ï¼Œè¯´æ˜æˆ‘ä»¬æ”¹å¯¹åœ°æ–¹äº†ï¼\n\néšåæˆ‘å°±ä¿®æ”¹æˆäº† 0.3remï¼Œè¿˜æ˜¯éœ€è¦ç•™ä¸€ç‚¹è¾¹è·çš„\n8.6.3 ä¿®æ”¹é¡µè„šå­—ä½“é¢œè‰²\né…ç½®äº†èƒŒæ™¯å›¾ä¹‹åï¼Œé¡µè„šçš„å­—ä½“é¢œè‰²ä¸é‚£ä¹ˆå®¹æ˜“çœ‹æ¸…æ¥šï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠï¼Ÿæ”¹ä»–ä¸«çš„ï¼\nåœ¨æµè§ˆå™¨æŒ‰F12è¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œç”¨æˆªå›¾è½¯ä»¶ï¼ˆqqæˆªå›¾æˆ–è€…sanipasteï¼‰é€‰å–åˆ°è¿™ä¸ªæ¡†ä¸Šï¼Œå°±èƒ½çœ‹åˆ°é¢œè‰²çš„è‰²å€¼\n\nå¤åˆ¶è¯¥è‰²å€¼ï¼Œåœ¨F12æ‰€æ‰“å¼€çš„å¼€å‘è€…é¢æ¿ä¸­çš„é¡µé¢ä¸€æ ï¼Œç²˜è´´æœç´¢ï¼Œå¯ä»¥çœ‹åˆ° --text-color-4 æ­£å¥½å°±å¯¹åº”äº†è¿™ä¸ªé¢œè‰²\n\næ”¹æˆé»‘å¤œæ¨¡å¼ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶é¢œè‰²ä¾æ—§å¯¹åº”çš„æ˜¯ --text-color-4 é‚£ä¹ˆå°±å®é”¤äº†è¯¥å˜é‡å³ä¸ºé¡µè„šå­—ä½“é¢œè‰²çš„å˜é‡\n\nç›´æ¥åœ¨ 8.5 ä¸­é…ç½®å¥½çš„ user-style.styl é‡Œé¢æ·»åŠ ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªé¢œè‰²ï¼›æˆ‘ä»¬çš„éœ€æ±‚æ˜¯è®©é»‘å¤œæ¨¡å¼çš„å­—ä½“æ›´äº®ï¼Œç™½å¤©æ¨¡å¼çš„å­—ä½“æ›´é»‘\n.dark-mode&#123;    --content-background-color:#37383fe6;    --text-color-4:\t#F5F5F5; //é»‘å¤œæ¨¡å¼åº•éƒ¨å­—ä½“é¢œè‰²&#125;.light-mode&#123;    --content-background-color:#ffffffe6;    --text-color-4: #242424; //ç™½å¤©æ¨¡å¼åº•éƒ¨å­—ä½“é¢œè‰²&#125;//...\n\nå¤§åŠŸå‘Šæˆï¼\n\n8.6.4 é¡µè„šæ·»åŠ shields.ioçš„å›¾æ ‡ä¸ºäº†æ›´å¥½çš„å±•ç¤ºä¸€éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µè„šåŠ ä¸Šä¸€äº›å›¾æ ‡ï¼Œå¹¶è®©è¿™äº›å›¾æ ‡å¯ä»¥ç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼\n\nhttps://shields.io/\n\nä¿®æ”¹ hexo-theme-keep\\source\\css\\layout\\_partial\\footer.ejsï¼Œåœ¨ä¸­é—´éƒ¨åˆ†æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆç›´æ¥è·Ÿåœ¨ 8.6.1 é…ç½®çš„ç«™ç‚¹è¿è¡Œæ—¶é—´ä¹‹åï¼‰\nå¦‚æœä½ ä¸çŸ¥é“å…·ä½“çš„ä½ç½®ï¼Œè¿˜è¯·ç§»æ­¥æˆ‘çš„Githubä»“åº“æŸ¥çœ‹æ›´æ”¹åçš„æ–‡ä»¶\n&lt;div class=&quot;shields-info info-item&quot;&gt;\t&lt;a href=&quot;link for click&quot; &gt;        &lt;img src=&quot;img url&quot; height=&quot;20px&quot;&gt;     &lt;/a&gt;&lt;/div&gt;\n\nè¿™é‡Œçš„hrefåè·Ÿéšçš„æ˜¯ç‚¹å‡»å›¾æ ‡ä¼šè·³è½¬çš„ç½‘é¡µï¼Œimg srcåé¢è·Ÿéšçš„æ˜¯å›¾ç‰‡çš„urlï¼›\n\næ¯”å¦‚æˆ‘è¿™æ ·é…ç½®äº†ä¹‹åï¼Œé¡µè„šå°±ä¼šå‡ºç°ä¸€ä¸ªè¿™æ ·çš„å›¾æ ‡ï¼Œç”¨äºæ ‡è¯†æˆ‘çš„hexoä¸»é¢˜ç‰ˆæœ¬\n\nç‚¹å‡»è¿™ä¸ªå›¾æ ‡ï¼Œä¼šè·³è½¬åˆ°keep ä¸»é¢˜çš„Githubä»“åº“ï¼›\n\nä¸ºäº†æ–¹ä¾¿é…ç½®ï¼Œå†™æˆä¸‹é¢çš„å¾ªç¯+ifåˆ¤æ–­çš„å½¢å¼ï¼›å¹¶ä¸”å°†å›¾æ ‡çš„æå®šé”å®šä¸º20pxï¼Œé¿å…ä¸åŒå›¾æ ‡å¤§å°å¯¼è‡´ä¸ç»Ÿä¸€ï¼Œå¾ˆéš¾çœ‹\n&lt;!-- æ·»åŠ åº•éƒ¨çš„shields ioå›¾ç‰‡ --&gt;      &lt;% if (theme.shields &amp;&amp; theme.shields.enable) &#123; %&gt;          &lt;div class=&quot;shields-info info-item&quot;&gt;              &lt;% for (var i in theme.shields.data)&#123; %&gt;                  &lt;% if (theme.shields.data[i].img) &#123; %&gt;                      &lt;a href=&quot;&lt;%= theme.shields.data[i].link%&gt;&quot; &gt;                          &lt;img src=&quot;&lt;%= theme.shields.data[i].img%&gt;&quot; height=&quot;20px&quot;&gt;                      &lt;/a&gt;                  &lt;% &#125; %&gt;              &lt;% &#125; %&gt;          &lt;/div&gt;      &lt;% &#125; %&gt;\n\nè¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ–°çš„å›¾æ ‡å’Œurlï¼Œä¸éœ€è¦æ¥è¿™é‡Œä¿®æ”¹æºç äº†ï¼ğŸ˜\nè½¬åˆ°æˆ‘ä»¬keep.ymlé…ç½®æ–‡ä»¶ï¼Œåœ¨æœ€åº•éƒ¨æ·»åŠ å¦‚ä¸‹ä»£ç \n# Add shields.io in footershields:  enable: true # Option values: true | false  data:    hexo:      link: https://github.com/XPoet/hexo-theme-keep      img: https://img.shields.io/badge/hexo-keep%20v3.5.2-brightgreen\n\nè¿™æ ·å°±èƒ½åœ¨åº•éƒ¨æ·»åŠ ä¸€ä¸ªä¸Šé¢æåˆ°è¿‡çš„hexoä¸»é¢˜å›¾æ ‡\nè¦æƒ³è¿½åŠ ï¼Œé‚£å°±ç»§ç»­åœ¨åé¢ä»¥ç›¸åŒæ ¼å¼å¡«å†™\n# Add shields.io in footershields:  enable: true # Option values: true | false  data:    hexo:      link: https://github.com/XPoet/hexo-theme-keep      img: https://img.shields.io/badge/hexo-keep%20v3.5.2-brightgreen    travelling:      link: https://www.travellings.cn/go.html      img: https://img1.imgtp.com/2023/01/09/c02alTih.gif\n\nä»£ç ä¼šè‡ªåŠ¨åˆ¤æ–­imgæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœimgä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ·»åŠ è¯¥æ¨¡å—ï¼›linké¡¹å¯ä»¥ä¸ºç©ºï¼Œæ­¤æ—¶ç‚¹å‡»å›¾æ ‡ä¸ä¼šè·³è½¬åˆ°å…¶ä»–é¡µé¢ã€‚\næ•ˆæœè¿˜æ˜¯ä¸é”™å“’ï¼æ‚¨å¯ä»¥åœ¨æœ¬é¡µé¡µè„šæŸ¥çœ‹ğŸ˜¶â€ğŸŒ«ï¸\n8.7 ç‚¹å‡»å¤´åƒè·³è½¬å…³äºé¡µé¢è¿™ä¸ªæ“ä½œå°±æ˜¯æŠŠæ²¡æœ‰å¤šå°‘äººçœ‹çš„å…³äºé¡µé¢ç»™è—èµ·æ¥ï¼Œè¿™æ ·å°±ä¸éœ€è¦å ç”¨é¡¶æ çš„ä¸€ä¸ªmenuäº†\nä¿®æ”¹æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨keepä¸»é¢˜ä¸­ï¼Œé»˜è®¤ç‚¹å‡»å¤´åƒçš„æ“ä½œæ˜¯è·³è½¬åˆ°å½“å‰é¡µé¢ï¼ˆå¯ä»¥ç†è§£ä¸ºå•¥éƒ½ä¸åšï¼‰\næˆ‘ä»¬åªéœ€è¦æŠŠé“¾æ¥æ”¹æˆè·³è½¬åˆ°å…³äºé¡µé¢å°±è¡Œäº†ï¼\nthemes/keep/layout/_partial/header.ejs\n\nä¿®æ”¹ä»¥ä¸‹å­—æ®µ\n&lt;% if (s_logo || bi_logo_img) &#123; %&gt;    &lt;a class=&quot;logo-image&quot; href=&quot;/&quot;&gt;        &lt;%- image_tag(s_logo || bi_logo_img) %&gt;    &lt;/a&gt;&lt;% &#125; %&gt;\n\nä¿®æ”¹ä¹‹å\n&lt;% if (s_logo || bi_logo_img) &#123; %&gt;    &lt;a class=&quot;logo-image&quot; href=&quot;/about/&quot;&gt;        &lt;%- image_tag(s_logo || bi_logo_img) %&gt;    &lt;/a&gt;&lt;% &#125; %&gt;\n\nå¦‚æœä½ æƒ³è®©ç‚¹å‡»ç½‘ç«™æ ‡é¢˜ä¹Ÿè·³è½¬åˆ°å…³äºé¡µé¢ï¼Œé‚£å°±æŠŠä¸‹é¢çš„logo-titleä¹Ÿç»™æ”¹æ‰\n&lt;a class=&quot;logo-title&quot; href=&quot;/about/&quot;&gt;   &lt;%= bi_title || config_title || &#x27;Keep Theme&#x27; %&gt;&lt;/a&gt;\n\néšåè¿›å…¥keepçš„configæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰memuä¸­çš„abouté¡µé¢ï¼Œè¿™å¹¶ä¸ä»£è¡¨abouté¡µé¢ä¼šè¢«åˆ é™¤ï¼Œåªæ˜¯ä¸æ˜¾ç¤ºåœ¨menuä¸Š\nmenu:  Home: /  Archives: /archives  Categories: /categories  Tags: /tags  ç•™è¨€: /qa  Links: /links  #About: /about\n\næå®šï¼\næœªå®Œå¾…ç»­â€¦æœŸå¾…åç»­çš„æ›´æ–°ï¼Œäº¦æˆ–è€…æ˜¯æˆ‘èƒ½ä»æŠ˜è…¾ä¸­èµ°å‡ºæ¥ï¼Œåˆ«å†çæäº†â€¦â€¦\nä»Šå¤©çš„å‡çº§éƒ¨ç½²å°±èŠ±äº†å‡ ä¹ä¸€æ•´å¤©çš„æ—¶é—´ğŸ˜¥\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["Hexo"]},{"title":"ã€å…¬å‘Šã€‘2023-02-03 åŸŸåæ›´æ¢","url":"/2023/01/09/%E5%8D%9A%E5%AE%A2%E5%8A%A8%E6%80%81/","content":"åŸŸåæ›´æ¢ä¸º blog.musnow.top, æ›´æœ‰ä¸ªäººæ ‡è¯†åº¦\n\n\n2023-02-01 å…³äºé¡µé¢è—èµ·æ¥äº†æˆ‘æŠŠå…³äºé¡µé¢è—èµ·æ¥å•¦ï¼Œçœ‹çœ‹ä½ èƒ½ä¸èƒ½æ‰¾åˆ°å®ƒçš„ä½ç½®å‘¢ï¼Ÿ\n2023-01-18 ä¹‹å‰valineçš„è¯„è®ºå·²å¯¼å…¥å·²ä»leancloudå›½å†…ç‰ˆæœ¬å¯¼å…¥äº†ä¹‹å‰valineçš„è¯„è®ºåˆ°walineï¼Œå¹¶ä¿®æ”¹äº†æ•°æ®åº“ä¸­æœ‰å˜åŠ¨çš„url\n2023-01-13 ç«™ç‚¹æ›´æ–°keepç‰ˆæœ¬ï¼Œä½¿ç”¨gitç®¡ç†ä¸»é¢˜ç°åœ¨ä½¿ç”¨gitçš„submodule æ¥ç®¡ç†keepä¸»é¢˜æ–‡ä»¶\nhttps://zhuanlan.zhihu.com/p/87053283\nä»Šå¤©å‘ç° jsdelivr çš„ cdnæŒ‚æ‰äº†ï¼Œå¯¼è‡´å¾ˆå¤šèµ„æºéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œè½¬ä¸ºç”¨nmpkgäº†ã€‚åŒæ—¶æˆ‘ç¼“å­˜äº† 2.4.16 ç‰ˆæœ¬çš„walineæ–‡ä»¶ï¼Œå…¨éƒ½æ”¾åœ¨é˜¿é‡Œäº‘äº†ã€‚\n2023-01-09 ç«™ç‚¹é¡µè„šæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ä»Šå¤©ç»™ç«™ç‚¹é¡µè„šæ·»åŠ äº†ç½‘ç«™è¿è¡Œæ—¶é—´ï¼ŒåŒæ—¶æ³¨é‡Šæ‰äº†åº•éƒ¨çš„hexoæç¤ºæ¡†ï¼›è¿˜æ·»åŠ äº†ä¸€äº›shields.ioçš„å›¾æ ‡ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼\nå‚è€ƒåšå®¢ hexo+yiliaæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ï¼ŒICPå¤‡æ¡ˆä¿¡æ¯ï¼Œè®¾å®šç«™ç‚¹å»ºç«‹æ—¶é—´\n\n\nä»Šå¤©åŠ å…¥äº†èŒICPå¤‡ï¼Œå’ŒçœŸçš„ICPå¤‡æ¡ˆæ²¡æœ‰å…³ç³»ï¼Œå…¶æœ¬è´¨å’Œå¼€å¾€æ˜¯ä¸€ä¸ªç±»å‹çš„é¡¹ç›®ã€‚\n2023-01-08 æ›´æ–°åšå®¢é‚®ç®±æé†’çš„æ¨¡æ¿æ ¹æ®æ•™ç¨‹æ›´æ–°äº†vecrelä¸­walineæ‰€ä½¿ç”¨çš„è¯„è®ºæé†’æ¨¡æ¿ï¼Œå“åº”é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œè€Œä¸”é…ç½®æ²¡æœ‰leancloudçš„é‚®ç®±æé†’é‚£ä¹ˆéº»çƒ¦ï¼›\nä¸è¿‡æˆ‘å‘ç°vercelçš„è®¿é—®å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¿«é€Ÿï¼Œæœ‰çš„æ—¶å€™ä¼šå‡ºç°è¯„è®ºåŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œéœ€è¦å¤šåˆ·æ–°å‡ æ¬¡ï¼\næ›´è¯¦ç»†çš„å†…å®¹è¯·çœ‹ğŸ‘‰7-2-ä½¿ç”¨-Walineè¯„è®ºç³»ç»Ÿ\n2023-01-07 åŠ å…¥å¼€å¾€è¿™ä¸ªä¹Ÿæ˜¯åœ¨é€›åˆ«äººçš„ä¸»é¡µçš„æ—¶å€™çœ‹åˆ°çš„ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼é‚£å°±åŠ å…¥å§ï¼\n\nå¼€å¾€é“¾æ¥ https://www.travellings.cn/\nå¼€å¾€æ˜¯ä¸€ä¸ªä»¥è·³è½¬åŠŸèƒ½ä¸ºä¸»çš„å‹é“¾æ¥åŠ›é¡¹ç›®ï¼Œå…¶åå­—â€œå¼€å¾€â€å–è‡ªâ€œå¼€æ”¾çš„ç½‘ç»œâ€ã€‚\nå°†å¼€å¾€æ”¾å…¥æ‚¨çš„ç½‘é¡µï¼Œè¡¨ç¤ºæ‚¨ä¹äºåˆ†äº«å¹¶æ”¯æŒå¼€æ”¾çš„ç½‘ç»œã€‚\næ¯å½“æœ‰äººè®¿é—®åŠ å…¥å¼€å¾€çš„ç½‘é¡µæ—¶ï¼Œç‚¹å‡»â€œå¼€å¾€â€œä¼šéšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µã€‚ä¹‹åï¼Œå†æ¬¡ç‚¹å‡»ç½‘é¡µä¸Šçš„â€å¼€å¾€â€œæˆ–åé€€ç½‘é¡µï¼Œå°†ç»§ç»­éšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µã€‚\n\n2023-01-06 æ›´æ–°keepç‰ˆæœ¬å•Šå‘€å‘€ï¼Œä»Šå¤©æŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œæ‰æŠŠkeepä»3.4.5 -&gt; 3.5.2ï¼Œå› ä¸ºæˆ‘ä¹‹å‰ç«™ç‚¹çš„ä¸ªæ€§åŒ–é…ç½®éƒ½æ˜¯ä¿®æ”¹çš„npmåŒ…ï¼Œç»“æœå‘ç°ä¸€æ›´æ–°ï¼ŒåŒ…é‡Œé¢ä¿®æ”¹è¿‡çš„å†…å®¹å…¨æ²¡äº†ï¼ğŸ˜¥ğŸ˜¥\näºæ˜¯åˆæ ¹æ®è‡ªå·±å†™çš„æ•™ç¨‹ï¼Œé‡æ–°ä¿®æ”¹äº†ä¸€ç•ªï¼Œå¹¶ç»™è‡ªå®šä¹‰è¿‡çš„èƒŒæ™¯æ·»åŠ äº†æ ¹æ®æ˜æš—è‡ªåŠ¨å˜åŒ–é¢œè‰²çš„åŠŸèƒ½ï¼ˆä¹‹å‰æ˜¯æ²¡æœ‰çš„ï¼‰\nè€Œä¸”è¯„è®ºç³»ç»Ÿä¹Ÿä» valine -&gt; walineï¼Œå…¶ä¸»è¦çš„å¥½å¤„å°±æ˜¯ï¼Œwaline æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼Œç”¨æ¥åœ¨è¯„è®ºåŒºå›ç­”ä¸€éƒ¨åˆ†é—®é¢˜çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä¸éœ€è¦ç”¨æˆ·è¿˜å»æ‰¾ä¸ªå›¾åºŠäº†ã€‚\næˆ‘é€šè¿‡æ›¿æ¢keepä¸»é¢˜cdnå¯¼å…¥çš„ waline.js æ–‡ä»¶çš„æ–¹å¼ï¼Œä¿®æ”¹äº† waline é»˜è®¤çš„å›¾ç‰‡ä¸Šä¼ é™åˆ¶ 128KB -&gt; 1024KB\n\næˆ‘è¿™ç§ä¿®æ”¹åŠæ³•è‚¯å®šéå¸¸éå¸¸ä¸è§„èŒƒï¼Œä½†æ˜¯çš„ç¡®ç”Ÿæ•ˆäº†ğŸ¤£ï¼Ÿå°±æ˜¯ä¸çŸ¥é“åç»­ä¼šä¸ä¼šå‡ºç°bugï¼Œå¸Œæœ›ä¸è¦æœ‰ğŸ˜¶â€ğŸŒ«ï¸\n\nè™½ç„¶æŠ˜è…¾äº†éå¸¸éå¸¸ä¹…ï¼Œè¿˜åšäº†ä¸€äº›æ— ç”¨åŠŸï¼Œä½†æ˜¯çœŸçš„æå®šçš„æ—¶å€™ï¼Œè¿˜æ˜¯å¾ˆå¼€å¿ƒå“’ï¼\n2022-04-16 å»ºç«™ä»Šå¤©ï¼ŒåŸºäº HEXO + KEEP ä¸»é¢˜çš„ç«™ç‚¹ç»ˆäºå»ºç«‹èµ·æ¥å•¦ï¼\næ­å»ºè¿™ä¸ªç«™ç‚¹çš„çµæ„Ÿæ¥æºäºæˆ‘åœ¨é€›CSDNæ—¶å€™é‡åˆ°çš„ä¸€ä¸ªåšä¸»çš„ä¸ªäººç«™ç‚¹ï¼Œå¹¶å‘ç°äº†HEXOè¿™ä¸ªå¼€æºçš„åšå®¢æ­å»ºæ¡†æ¶\né¦–ä¸ªç‰ˆæœ¬æ˜¯åŸºäº Gitee Pages çš„ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼\nä½¿ç”¨hexoå’Œkeepä¸»é¢˜æ­å»ºä¸ªäººåšå®¢\n"},{"title":"ã€å›¾åºŠã€‘åšå®¢è¡¨æƒ…åŒ…","url":"/2022/12/23/%E5%8D%9A%E5%AE%A2%E8%A1%A8%E6%83%85%E5%8C%85/","content":"è¿™é‡Œæ˜¯åšå®¢ä¸­å¯ä»¥ç”¨åˆ°çš„è¡¨æƒ…åŒ…åˆ—è¡¨ï¼Œä¸€å¹¶ä¸Šä¼ ï¼Œé¿å…å¤šæ¬¡ä¸Šä¼ å ç”¨é˜¿é‡Œäº‘ç©ºé—´;\nå¤§å®¶è§‰å¾—ä¸é”™çš„å¯ä»¥ä¿å­˜ä¸‹æ¥ğŸ˜ä½†æ˜¯ä¸è¦æ¶æ„ä½¿ç”¨ï¼\n\n\nè¡¨æƒ…åŒ…\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["å›¾åºŠ"]},{"title":"ã€Artalkã€‘åœ¨wiki jsç«™ç‚¹ä¸Šä½¿ç”¨Artalkè¯„è®ºç³»ç»Ÿ","url":"/2023/01/05/docker/1wikijs%E4%BD%BF%E7%94%A8artalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•åœ¨wiki jsç«™ç‚¹ä¸Šä½¿ç”¨artalkè¯„è®ºç³»ç»Ÿ\n\n\n[TOC]\n1.ä»‹ç»1.1 wiki js\nhttps://github.com/requarks/wiki/\n\nwiki jsæ˜¯ä¸€ä¸ªå¼€æºçš„wikiç«™ç‚¹ï¼Œå¯ä»¥åœ¨çº¿ç¼–è¾‘é¡µé¢ã€‚\né¡µé¢ä»¥markdownç¼–è¾‘ï¼ŒåŒæ—¶æ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼ï¼›å› ä¸ºå…¶ç”¨gitæ¥ç®¡ç†æäº¤å†å²ï¼Œä¸”åœ¨çº¿ç¼–è¾‘ä¸éœ€è¦ç”¨æˆ·çŸ¥é“å¦‚ä½•æ“ä½œgitï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šäººåä½œæ’°å†™æ–‡æ¡£\n\nå¦‚æœä½ åªæ˜¯æƒ³è¦ä¸€ä¸ªåšå®¢ç«™ç‚¹ï¼Œæ²¡æœ‰å¤šäººåä½œéœ€æ±‚ï¼Œé‚£ä¹ˆhexoä¼šæ›´åˆé€‚æ‚¨\n\nå…±äº«æ–‡æ¡£ï¼ˆå¦‚é‡‘å±±æ–‡æ¡£ï¼‰çš„æäº¤å†å²å¤§å¤šæ•°éƒ½ä¸å¤Ÿè¯¦ç»†ï¼Œè™½ç„¶æœ‰æ’å…¥/åˆ é™¤å†å²ï¼Œä½†æ˜¯å…¶æ²¡æœ‰æ ‡æ˜ä¸Šä¸‹æ–‡ï¼Œä½ éœ€è¦çŒœä»–æ˜¯åœ¨æ–‡æ¡£çš„å•¥åœ°æ–¹æ”¹äº†ä¸œè¥¿ï¼Œéå¸¸ä¸æ–¹ä¾¿ï¼\ngitæ˜¯ä¸€ä¸ªç‰ˆæœ¬ç®¡ç†è½¯ä»¶ï¼Œèƒ½æ¸…æ¥šåœ°çŸ¥é“xxç”¨æˆ·ä¿®æ”¹äº†xxæ–‡æ¡£çš„xxè¡Œï¼Œå¹¶èƒ½çœ‹åˆ°ä¿®æ”¹ä¹‹å‰å’Œä¿®æ”¹ä¹‹åçš„æäº¤å¯¹æ¯”ã€‚è¿™éƒ¨åˆ†å°±ä¸èµ˜è¿°äº†\nwiki jsè¿˜æœ‰å¾ˆæ£’çš„ä¸€ç‚¹å°±æ˜¯ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªgitä»“åº“ä½œä¸ºæ–‡æ¡£çš„å¤‡ä»½ï¼Œå…¶ä¼šå®šæ—¶æŠŠæ•´ä¸ªç«™ç‚¹çš„æ‰€æœ‰é¡µé¢ï¼ˆåŒ…æ‹¬å›¾ç‰‡ï¼‰éƒ½ä¸Šä¼ åˆ°è¿™ä¸ªgitä»“åº“é‡Œé¢ã€‚å³ä¾¿ç«™ç‚¹å› ä¸ºæŸäº›åŸå› å‡ºé—®é¢˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰gitä»“åº“çš„å¤‡ä»½ğŸ˜\n\nwiki jsçš„å®‰è£…å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œå»ºè®®ç”¨dockeréƒ¨ç½²ï¼Œæ–¹ä¾¿çš„å¾ˆï¼Œç›´æ¥å¯¹ç€æ•²å‘½ä»¤å°±è¡Œäº†ã€‚è¿›å…¥ç³»ç»Ÿåˆ›å»ºç®¡ç†å‘˜è´¦æˆ·åï¼Œå¯ä»¥åœ¨è®¾ç½®çš„localé‡Œé¢æ‰¾åˆ°è¯­è¨€é€‰æ‹©ï¼Œä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…å³å¯æ”¹æˆä¸­æ–‡é¡µé¢ï¼\n\n\nWik jsè‡ªå¸¦äº†è¯„è®ºç³»ç»Ÿï¼Œä¹Ÿæ”¯æŒmarkdownè¯„è®ºï¼Œä½†æ˜¯å®ƒè¿æœ€åŸºç¡€çš„å›å¤è¯„è®ºéƒ½ä¸æ”¯æŒï¼Œå®åœ¨æ˜¯æœ‰äº›æ‰æ€¥ï¼Œæ‰€ä»¥æ‰éœ€è¦é…ç½®ä¸€ä¸‹artalkæ¥ä½œä¸ºè¯„è®ºç³»ç»Ÿ\n1.2 artalk\nhttps://artalk.js.org/\n\nartalkåŒæ ·æ˜¯ä¸€ä¸ªå¼€æºçš„è¯„è®ºç³»ç»Ÿï¼Œä½œè€…å†™v1çš„æ—¶å€™è¿˜æ˜¯ä¸€åé«˜ä¸­ç”Ÿï¼ˆäººæ¯”äººæ°”æ­»äººï¼Œæˆ‘å¤ªèœäº†ï¼‰\nå’³å’³ï¼Œè¿™ä¸æ˜¯é‡ç‚¹ï¼\n\nartalkæ”¯æŒmarkdownå‘é€è¯„è®ºï¼Œæ”¯æŒå‘é€è¡¨æƒ…ï¼Œè¿˜æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼ä½œä¸ºwikijsçš„è¯„è®ºç³»ç»Ÿå†åˆé€‚ä¸è¿‡äº†~\nemmï¼Œå…¶å®è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŸå› ï¼Œé‚£å°±æ˜¯wiki jsç›®å‰æ”¯æŒçš„3ä¸ªç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œä¼¼ä¹åªæœ‰artalkæ˜¯å…è´¹çš„ğŸ˜¥\n\n2.å®‰è£…artalkåç«¯2.1 docker-composeå®‰è£…åŸºæœ¬å®‰è£…æ–¹å¼å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¸ªäººæ›´åŠ æ¨èç”¨docker composeéƒ¨ç½²\n\nhttps://artalk.js.org/guide/deploy.html#docker-compose-%E9%83%A8%E7%BD%B2\n\nåˆšå¼€å§‹æˆ‘æ‹‰å–é•œåƒçš„æ—¶å€™ï¼Œä¸€ç›´å‡ºç°505é”™è¯¯ï¼ˆæ·»åŠ äº†é•œåƒæºï¼‰åç»­åœ¨é•œåƒåé¢åŠ ä¸Šæœ€æ–°çš„ç‰ˆæœ¬å·æ‰æ­£å¸¸æ‹‰å–äº†é•œåƒ\nversion: &quot;3.5&quot;services:  artalk:    container_name: artalk-go    image: artalk/artalk-go:2.3.0    ports:      - 8080:23366    volumes:      - ./data:/data\n\nåˆ›å»ºå¥½docker-compose.yamlæ–‡æ¡£åï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œ\ndocker-compose up -d\n\næŸ¥çœ‹ä½ æœåŠ¡å™¨çš„8080ç«¯å£ï¼ˆè®°å¾—åœ¨äº‘æœåŠ¡å™¨é˜²ç«å¢™é‡Œé¢å¼€æ”¾ç«¯å£ï¼‰å¦‚æœèƒ½æ‰“å¼€ä¸‹é¢çš„åç«¯é¡µé¢ï¼Œé‚£å°±æ˜¯okäº†\n\n2.2 å¼€æ”¾ç®¡ç†å‘˜è´¦æˆ·é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜è´¦æˆ·æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬éœ€è¦å…³é—­å®¹å™¨åï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å¼€æ”¾ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·\ndocker-compose stop\n\ncdè¿›å…¥dataç›®å½•ï¼ˆè¿™é‡Œçš„dataç›®å½•æ˜¯ä½ åœ¨docker composeä¸­æ˜ å°„çš„æœ¬åœ°è·¯å¾„ï¼Œé»˜è®¤åº”è¯¥å°±åœ¨docker-compose.yamlæ‰€åœ¨è·¯å¾„ä¸‹ä¼šå‡ºç°ä¸€ä¸ªdataæ–‡ä»¶å¤¹ï¼‰\nå¯ä»¥çœ‹åˆ°ä¸€ä¸ªartalk-go.ymlæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢çš„å­—æ®µï¼Œå¯¹åº”ä¿®æ”¹åä¿å­˜\n\nå…³äºå¯†ç çš„éƒ¨åˆ†å‚è€ƒæ–‡æ¡£ https://artalk.js.org/guide/backend/multi-site.html#%E7%AE%A1%E7%90%86%E5%91%98%E9%85%8D%E7%BD%AE\n\n\ndocker-compose up -d\n\né‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç”¨åˆšåˆšè®¾ç½®å¥½çš„è´¦æˆ·ç™»å½•ï¼›åå°çš„ç®¡ç†é¡µé¢å¯ä»¥ä¿®æ”¹å¾ˆå¤šé…ç½®ï¼Œæˆ‘ä»¬ä¸éœ€è¦åŠ¨é…ç½®æ–‡ä»¶äº†ï¼\n2.3 é…ç½®sslwiki jså¿…é¡»è¦ç”¨sslå’Œhttpsæ‰èƒ½æ­£å¸¸ä½¿ç”¨artalkï¼Œæˆ‘å°è¯•äº†å…¬ç½‘IP:ç«¯å£çš„æ–¹å¼ï¼Œå®ƒè®¤ä¸å‡ºæ¥ğŸ˜¥\næ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨artalkçš„åå°é…ç½®ä¸€ä¸‹sslï¼ˆè®°å¾—ç‚¹ç•Œé¢å³ä¸‹è§’çš„åº”ç”¨ï¼‰\n\nå†æ¬¡ç”¨åŸŸåæ‰“å¼€é¡µé¢ï¼Œæ­¤æ—¶å°±æ²¡æœ‰æŠ¥é”™äº†\n\nå¤‡æ³¨ï¼šæˆ‘æ˜¯ç”¨frpç©¿é€åˆ°é¦™æ¸¯æ¥æ˜ å°„åŸŸåçš„ï¼Œæ‰€ä»¥sslè¿˜éœ€è¦åœ¨frpé‡Œé¢è®¾ç½®ä¸€ä¸‹ï¼Œè¯·æ ¹æ®æ‚¨è‡ªå·±çš„æƒ…å†µé…ç½®sslï¼\n2.4 å›¾ç‰‡ä¸Šä¼ å¦‚æœæƒ³è®©ç”¨æˆ·èƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œè¿˜éœ€è¦åšä¸€äº›å°æ“ä½œï¼›é¦–å…ˆæ˜¯å¯ç”¨å›¾ç‰‡ä¸Šä¼ ï¼ˆè®°å¾—ç‚¹ç•Œé¢å³ä¸‹è§’çš„åº”ç”¨ï¼‰\n\nç„¶åéœ€è¦å»åå°åœ¨dataç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªartalk-imgæ–‡ä»¶å¤¹ï¼ˆæˆ‘åˆšå¼€å§‹æ²¡æœ‰åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œæ²¡æœ‰åŠæ³•æ­£ç¡®ä¸Šä¼ å›¾ç‰‡ï¼‰\nå›åˆ°wiki jsçš„ç•Œé¢æµ‹è¯•ä¸€ä¸‹ï¼Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸ\n\n2.5 é‚®ç®±æé†’é¿å…æœ‰è€å“¥ä¹‹å‰æ²¡æœ‰ç”¨è¿‡stmpæœåŠ¡ï¼Œè¿™é‡Œä¹Ÿç®€å•è¯´ä¸€ä¸‹å§\nå¯ä»¥æ³¨å†Œä¸€ä¸ªç½‘æ˜“çš„163æˆ–è€…126é‚®ç®±ï¼Œæ‰¾åˆ°è®¾ç½®é‡Œé¢ä¼šæœ‰ä¸€ä¸ªstmp\n\nè¿›å…¥åï¼Œå…ˆæŠŠè¿™ä¸¤ä¸ªæœåŠ¡éƒ½å¼€å¯\n\nå†ç‚¹å‡»è¿™é‡Œæ–°å¢æˆæƒå¯†ç ï¼Œä¼šå¼¹å‡ºæ¥ä¸€ä¸ªäºŒç»´ç ç è®©ä½ ç”¨æ‰‹æœºç»™ä¸€ä¸ªå·ç å‘ä¸ªçŸ­ä¿¡ï¼Œç„¶åå°±ä¼šå‡ºç°ä¸€ä¸ªæˆæƒç ï¼Œè®°ä½è¿™ä¸ªæˆæƒç \n\nå›åˆ°artalkçš„åå°è¿›è¡Œå¦‚ä¸‹é…ç½®\n\nè¿™æ ·å°±OKäº†ï¼Œæ‰¾æœ‹å‹å‘æ¡è¯„è®ºå¹¶å›å¤ï¼Œæµ‹è¯•ä¸€ä¸‹é‚®ç®±æé†’èƒ½å¦æ­£å¸¸ä½¿ç”¨å§ï¼\n3.wiki jsä½¿ç”¨è¿™éƒ¨åˆ†å°±å¾ˆå‚»ç“œäº†ï¼Œç›´æ¥ç”¨èµ·æ¥å°±å¯ä»¥äº†\n3.1 artalkåˆ›å»ºç«™ç‚¹artalkè™½ç„¶ä¼šæœ‰ä¸€ä¸ªé»˜è®¤ç«™ç‚¹ï¼Œä½†æ˜¯é‚£ä¸ªwiki jsä¸ä¸€å®šèƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªç«™ç‚¹\n\néœ€è¦å¡«å†™ç«™ç‚¹åç§°å’Œurlï¼Œåç§°å»ºè®®ç”¨è‹±æ–‡ï¼Œé¿å…ç¼–ç é—®é¢˜\n\nç„¶åä¸ºäº†é¿å…é”™è¯¯ï¼Œè¿˜å¯ä»¥åœ¨è®¾ç½®é‡Œé¢æ·»åŠ ä¸€ä¸‹å¯ä¿¡åŸŸå\n\n3.2 wiki jsä½¿ç”¨è¿›å…¥wiki jsçš„ç®¡ç†é¡µï¼Œæ‰¾åˆ°è¯„è®ºï¼Œé€‰æ‹©artalk\n\nå¡«å…¥åŸŸåå’Œåœ¨artalké‡Œé¢é…ç½®çš„ç«™ç‚¹åå­—åï¼Œç‚¹å‡»åº”ç”¨\nå›åˆ°wikijsçš„é¡µé¢ï¼Œæ­¤æ—¶å°±å¯ä»¥çœ‹åˆ°artalkçš„ç•Œé¢å•¦ï¼\n\n3.3 bugæˆ‘ä½¿ç”¨çš„æ—¶å€™é‡åˆ°äº†è¯„è®ºæ¡†é£åˆ°é¡¶æ ä¸Šé¢çš„bugï¼Œå·²ç»åœ¨wikiçš„ä»“åº“ä¸­å‘è¯„è®ºäº†\n\nhttps://github.com/requarks/wiki/discussions/6015\nå¸Œæœ›èƒ½å°½å¿«ä¿®å¤è¿™ä¸ªbug~\næœªå®Œå¾…ç»­åç»­æœ‰å•¥é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œè¡¥å……çš„~\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["wikijs","Docker"]},{"title":"ã€Dockerã€‘ç”¨å¼€æºumamiç›‘æ§ä½ çš„ç«™ç‚¹è®¿é—®é‡","url":"/2023/01/22/docker/2umami%E7%9B%91%E7%9C%8B%E7%AB%99%E7%82%B9/","content":"æ–°å¹´åˆ°ï¼Œç¥å¤§å®¶å…”å¹´å‰ç¥¥ï¼ğŸ‰\n\n\n1.ä»‹ç»umamiæ˜¯ä¸€ä¸ªå¼€æºçš„ç«™ç‚¹è®¿é—®é‡ç›‘çœ‹ç¨‹åºï¼Œå…¶æ”¯æŒdockeréƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚ç›¸æ¯”è¾ƒç™¾åº¦ç­‰æ”¶è´¹çš„ç½‘ç«™ä¿¡æ¯ç›‘çœ‹ï¼Œè¿™ç§æ–¹å¼å¯¹äºå°ç«™é•¿æ¥è¯´æ›´åŠ å®æƒ ä¸€äº›\n2.dockerå®‰è£…çš„å‘2.1 docker-composeä»¥ä¸‹æ˜¯å®˜æ–¹æä¾›çš„ymlæ–‡ä»¶ï¼Œæˆ‘åªæ˜¯å°†æ•°æ®åº“dockerçš„åå­—æ”¹æˆäº†umi-dbï¼Œå°†3000ç«¯å£æ˜ å°„ç»™äº†æœ¬æœºçš„3010ç«¯å£\nversion: &#x27;3&#x27;services:  umami:    image: ghcr.io/umami-software/umami:postgresql-latest    ports:      - &quot;3010:3000&quot;    environment:      DATABASE_URL: postgresql://umami:umami@umi-db:5432/umami      DATABASE_TYPE: postgresql      HASH_SALT: adsfadsfa23421313dfabadsf32rl    depends_on:      - umi-db    restart: always  umi-db:    image: postgres:12-alpine    environment:      POSTGRES_DB: umami      POSTGRES_USER: umami      POSTGRES_PASSWORD: umami    volumes:      - ./sql/schema.postgresql.sql:/docker-entrypoint-initdb.d/schema.postgresql.sql:ro      - umami-db-data:/var/lib/postgresql/data    restart: alwaysvolumes:  umami-db-data:\n\nå†™å¥½æ–‡ä»¶åï¼Œä½¿ç”¨docker-compose up -då‘½ä»¤ï¼Œè¿è¡Œé•œåƒã€‚è¿‡ä¸€ä¼šå†ä½¿ç”¨docker-compose psï¼Œåªè¦ä¸¤ä¸ªé•œåƒéƒ½æ˜¯æ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œé‚£å°±okäº†\n2.2 å‘è¿™é‡Œæœ‰ä¸€ä¸ªå°ğŸ•³ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦è®¾ç½®æ•°æ®åº“çš„ç«¯å£ã€‚åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šï¼Œ5432ç«¯å£å·²ç»è¢«å¦å¤–ä¸€ä¸ªå®¹å™¨å é¢†äº†ï¼Œäºæ˜¯æˆ‘å°±ä½¿ç”¨äº†ä¸‹é¢çš„è¯­æ³•ï¼Œæƒ³æŠŠæ•°æ®åº“æ˜ å°„ç»™5433ç«¯å£\nå¤‡æ³¨ï¼šä¸‹é¢çš„è¿™ä¸ªæ˜¯é”™è¯¯å†™æ³•ï¼Œumamiå®¹å™¨ä¼šå› ä¸ºè¿ä¸ä¸Šæ•°æ®åº“è€Œä¸€ç›´é‡å¯ï¼\nversion: &#x27;3&#x27;services:  umami:    image: ghcr.io/umami-software/umami:postgresql-latest    ports:      - &quot;3010:3000&quot;    environment:      DATABASE_URL: postgresql://umami:umami@umi-db:5433/umami      DATABASE_TYPE: postgresql      HASH_SALT: adsfadsfa23421313dfabadsf32rl    depends_on:      - umi-db    restart: always  umi-db:    image: postgres:12-alpine    environment:      POSTGRES_DB: umami      POSTGRES_USER: umami      POSTGRES_PASSWORD: umami    ports:      - &quot;5433:5432&quot;    volumes:      - ./sql/schema.postgresql.sql:/docker-entrypoint-initdb.d/schema.postgresql.sql:ro      - umami-db-data:/var/lib/postgresql/data    restart: alwaysvolumes:  umami-db-data:\n\nå®é™…ä¸Šå¹¶ä¸éœ€è¦è¿™ä¹ˆæ“ä½œï¼Œå› ä¸ºé»˜è®¤çŠ¶æ€ä¸‹ï¼Œè¿™ä¸ªæ•°æ®åº“çš„ç«¯å£éƒ½æ²¡æœ‰æ˜ å°„åˆ°æœ¬æœºï¼Œå¹¶ä¸ä¼šå’Œå·²æœ‰çš„ç«¯å£å†²çªï¼\nDATABASE_URL: postgresql://umami:umami@umi-db:5432/umami\n\nè¿™é‡Œå…¶å®å·²ç»æŒ‡å®šäº†ï¼Œæ˜¯ä½¿ç”¨umi-dbå®¹å™¨å†…éƒ¨çš„5432ç«¯å£ï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨äº‘æœåŠ¡å™¨çš„5332ç«¯å£ï¼ŒäºŒè€…æ˜¯ä¸ä¸€æ ·çš„ã€‚\nç›´æ¥ä½¿ç”¨å®˜æ–¹åŸæœ‰çš„docker-composeæ–‡ä»¶å°±æ²¡é—®é¢˜äº†ï¼\n3.è¿›å…¥ç®¡ç†é¡µé¢å®‰è£…å®Œæ¯•åï¼Œä½¿ç”¨äº‘æœåŠ¡å™¨ip:ç«¯å£çš„æ–¹å¼è®¿é—®ï¼Œè¿›å…¥åå°ã€‚\né»˜è®¤ç”¨æˆ·åæ˜¯adminï¼Œé»˜è®¤å¯†ç æ˜¯umamiï¼Œè¿›å…¥ä¹‹åè¯·ç«‹åˆ»ä¿®æ”¹å¯†ç ã€‚\n3.1 ä¿®æ”¹ä¸­æ–‡ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œè¿›å…¥profileï¼Œè®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡ã€‚\n\n3.2 æ·»åŠ ç«™ç‚¹éšååœ¨ç½‘ç«™é€‰é¡¹æ æ·»åŠ ç½‘ç«™ï¼Œå¡«å…¥ä½ çš„ç«™ç‚¹urlå’Œåå­—\n\n3.3 æ·»åŠ åˆ°hexoåšå®¢ä¸Šä¿å­˜äº†ä¹‹åï¼Œç‚¹å‡»å³ä¾§çš„è¿™ä¸ªä»£ç å—å›¾æ ‡ï¼Œå¤åˆ¶é‡Œé¢çš„ä»£ç \n\nåˆ°æœ¬åœ°çš„hexoä¸»é¢˜æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°headæ–‡ä»¶ï¼Œä¿®æ”¹&lt;head&gt;å¤„çš„ä»£ç ï¼ŒåŠ å…¥åˆšåˆšå¤åˆ¶çš„ä»£ç \nkeepä¸»é¢˜æ–‡ä»¶ä½ç½® themes\\keep\\layout\\_partial\\head.ejs\n\né‡æ–°éƒ¨ç½²åšå®¢å³å¯ï¼Œæ•°æ®è¿‡å‡ å°æ—¶å°±ä¼šç”Ÿæ•ˆ\n3.4 æ·»åŠ åˆ°wikijswiki jsçš„ç®¡ç†é¡µé¢ï¼Œç½‘ç«™åˆ†æä¸€æ å°±æœ‰umami\n\nå¡«å…¥ä½ éƒ¨ç½²umamiçš„æœåŠ¡å™¨urlå’Œç«™ç‚¹idå³å¯ï¼Œåœˆå‡ºæ¥çš„éƒ¨åˆ†å°±æ˜¯ç½‘ç«™idï¼Œå¹¶ä¸æ˜¯ä½ åœ¨umamié‡Œé¢è®¾ç½®çš„ç«™ç‚¹åå­—\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["wikijs","Docker","hexo"]},{"title":"ã€Nginxã€‘é…ç½®è·¨åŸŸè¯·æ±‚é—®é¢˜","url":"/2023/01/24/docker/3nginx%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82/","content":"ngnixé…ç½®è·¨åŸŸè¯·æ±‚é—®é¢˜\n\n\n1.é—®é¢˜ä»Šå¤©åœ¨å°è¯•å†™ä¸€ä¸ªhtmlä»£ç ï¼ˆæŠ„csdnçš„ï¼‰è¯·æ±‚æˆ‘è‡ªå·±çš„valorant apiçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚çš„æ„æ€å°±æ˜¯ï¼Œå½“å‰æˆ‘çš„apiæœåŠ¡å™¨ä¸æ”¯æŒè·¨åŸŸè¯·æ±‚ã€‚\næ­¤æ—¶è¯·æ±‚å…¶å®å·²ç»å®Œæˆäº†ï¼ˆåç«¯æ—¥å¿—æ˜¾ç¤ºå·²ç»è¿”å›äº†ç»“æœï¼‰åœ¨è¿”å›åˆ°æµè§ˆå™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ£€æŸ¥äº†åç«¯çš„è®¾ç½®ï¼Œå‘ç°åç«¯ä¸å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œæ‰€ä»¥å±è”½äº†æˆ‘ä»¬çš„è®¿é—®\n2.è§£å†³éœ€è¦é…ç½®çš„æ˜¯nginxï¼Œåœ¨è½¬å‘è§„åˆ™é‡Œé¢æ·»åŠ ä¸‹é¢çš„å†…å®¹\nlocation / &#123;      add_header Access-Control-Allow-Origin *;    add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;    add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;    if ($request_method = &#x27;OPTIONS&#x27;) &#123;        return 204;    &#125;&#125; \n\nç°åœ¨å°±OKäº†\n\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒYoungä¸¶ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/agonie201218/article/details/112562252\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Docker","Linux"]},{"title":"ã€Dockerã€‘é…ç½®lsky proå…°ç©ºå›¾åºŠ","url":"/2023/01/28/docker/5docker%E9%85%8D%E7%BD%AElskyPro%E5%9B%BE%E5%BA%8A/","content":"Docker éƒ¨ç½² lsky pro å…°ç©ºå›¾åºŠçš„æ•™ç¨‹\n\n\n1.ä½¿ç”¨Dockeréƒ¨ç½²å‘½ä»¤æ¯”è¾ƒç®€å•ï¼Œç”¨ä¸‹é¢çš„å³å¯\ndocker run -d \\--name lsky \\-p 14728:80 \\-v /root/docker/lsky:/var/www/html \\halcyonazure/lsky-pro-docker:latest\n\n\n--name è®¾ç½®å®¹å™¨åå­—ä¸º lsky\n-p è®¾ç½®ç«¯å£éšå°„ï¼Œå®¹å™¨çš„80ç«¯å£æ˜ å°„ç»™æœ¬åœ°çš„14728ç«¯å£\n-v è®¾ç½®å­˜å‚¨æ˜ å°„ï¼Œæœ¬åœ°çš„/root/docker/lsky æ˜ å°„ç»™ /var/www/html\n\nå®Œæˆåï¼Œè¿›å…¥IP:14728 å³å¯æ‰“å¼€ä½ çš„å›¾åºŠé¡µé¢\n2.åˆå§‹åŒ–æ–°ç”¨æˆ·ç›´æ¥ç”¨sqliteå³å¯ï¼Œå¦‚æœå¯¹æ€§èƒ½æœ‰æ›´é«˜è¦æ±‚ï¼Œå»ºè®®ä½¿ç”¨mysqlã€‚\n\nå› ä¸ºæˆ‘å°±æ˜¯ç»™è‡ªå·±ä½œå›¾åºŠè€Œå·²ï¼Œå¯¹mysqlçš„è®¤çŸ¥è¿‘ä¹ä¸º0ï¼Œæ‰€ä»¥ç›´æ¥ç”¨sqliteæ–¹ä¾¿å¤šäº†ã€‚\n\nåç»­æ‰“å¼€ä¸»é¡µé¢å°±èƒ½ä¸Šä¼ æ–‡ä»¶äº†\n2.1 è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·æ€»å®¹é‡é¦–å…ˆå½“ç„¶æ˜¯è¿›å…¥ç”¨æˆ·ç»„è®¾ç½®ï¼ŒæŠŠè‡ªå·±è¿™ä¸ªç®¡ç†å‘˜ç”¨æˆ·çš„æ€»å®¹é‡æ”¹æˆ5gbï¼ˆé»˜è®¤500mbï¼‰\n\nåœ¨ç³»ç»Ÿè®¾ç½®é‡Œå¯ä»¥æ”¹ç”¨æˆ·çš„åˆå§‹å®¹é‡ï¼Œçœ‹ä½ çš„æƒ…å†µè¦ä¸è¦å¢åŠ \n\n2.2 æ–°å»ºè§’è‰²ç»„å…¶æ¬¡ï¼Œå¯ä»¥åœ¨è§’è‰²ç»„é‡Œé¢æ–°å¢ä¸€ä¸ªç®¡ç†å‘˜ç»„ï¼Œè®¾ç½®ä¸€ä¸‹å•å›¾å¤§å°é™åˆ¶ï¼ˆé»˜è®¤5mbï¼‰ä»¥åŠæ¯å¤©&#x2F;æ¯å‘¨&#x2F;æ¯æœˆçš„å›¾ç‰‡ä¸Šä¼ æ•°é‡é™åˆ¶ï¼›åŒæ—¶ï¼Œåœ¨è§’è‰²ç»„è¿™é‡Œè¿˜å¯ä»¥ä¿®æ”¹å‘½åæ ¼å¼\n\nä¸ªäººå»ºè®®å»æ‰è·¯å¾„å‘½åä¸­çš„æ—¥æœŸï¼Œè¿™æ ·èƒ½ä¸€å®šç¨‹åº¦ä¸Šçš„é¿å…åŒä¸€å›¾ç‰‡çš„äºŒæ¬¡å­˜å‚¨ã€‚\n\nå¦‚æœä½ ä¸Šä¼ äº†ä¸¤ä¸ªå®Œå…¨ä¸€æ ·çš„å›¾ç‰‡ï¼Œåœ¨æˆ‘çš„å›¾ç‰‡é‡Œé¢ä¼šæ˜¾ç¤ºä¸¤ä¸ªï¼Œä½†æ˜¯åªä¼šæœ‰ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ã€‚\n\næ–‡ä»¶çš„å‘½åé™¤äº†éšæœºå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥é€‰æ‹©md5ã€æ—¶é—´æˆ³å‘½å\n\n2.3 è®¾ç½®é˜¿é‡Œäº‘OSSä¸ºå­˜å‚¨è¿™éƒ¨åˆ†å¾ˆç®€å•ï¼Œç…§ç€æ ‡è¯†çš„å¡«å°±è¡Œäº†ã€‚ä¸ªäººè¿˜æ˜¯é€‰æ‹©äº†æœ¬åœ°å­˜å‚¨çš„æ–¹å¼ï¼ˆé˜¿é‡Œäº‘OSSæ‰¹é‡å¯¼å‡ºæ•°æ®å¾ˆéº»çƒ¦ï¼‰\n\nå¡«äº†ä¹‹åï¼Œä¸Šä¼ çš„å›¾ç‰‡ä¼šç›´æ¥è¿”å›é˜¿é‡Œäº‘OSSçš„é“¾æ¥\n2.4 æƒé™é—®é¢˜å¦‚æœä½ æœ‰ä¸€äº›æœ¬åœ°çš„å›¾ç‰‡ï¼Œæƒ³æ·»åŠ åˆ°lskyå›¾åºŠçš„æ ¹ç›®å½•æ–¹ä¾¿è®¿é—®çš„è¯ï¼Œå°±éœ€è¦é…ç½®ä¸€ä¸‹ç›®å½•çš„å›¾ç‰‡\nä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€å›¾ç‰‡çš„å‹ç¼©åŒ…ï¼Œæˆ‘æƒ³å°†å…¶æ”¾å…¥lskyçš„stroage/appçš„myæ–‡ä»¶å¤¹é‡Œé¢ï¼Œé‚£ä¹ˆåˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œå°±éœ€è¦ä¿®æ”¹å®ƒçš„æƒé™\nchown 33:tape my # é…ç½®myæ–‡ä»¶å¤¹çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„# 33å’Œtapeæ˜¯dockeré…ç½®lskyçš„é»˜è®¤ç”¨æˆ·åå’Œç”¨æˆ·ç»„\n\nå¦åˆ™lskyå›¾åºŠæ²¡æœ‰åŠæ³•æ­£ç¡®è¯»å–æˆ–è€…å¾€è¿™ä¸ªç›®å½•å†™å…¥ï¼Œä»è€Œå¯¼è‡´ä¸Šä¼ é”™è¯¯\n3.httpsè®¿é—®3.1 ä¿®æ”¹ä»£ç å‚è€ƒ https://github.com/lsky-org/lsky-pro/issues/321\néœ€è¦æ·»åŠ ä»£ç ï¼Œdockerç”¨ä¸‹é¢çš„æ–¹å¼æ·»åŠ åé‡å¯å³å¯\ndocker exec -it å®¹å™¨åå­— sed -i &#x27;32 a \\\\\\Illuminate\\\\Support\\\\Facades\\\\URL::forceScheme(&#x27;&quot;&#x27;&quot;&#x27;https&#x27;&quot;&#x27;&quot;&#x27;);&#x27; /var/www/html/app/Providers/AppServiceProvider.php\n\nä¸ªäººæ„Ÿè§‰ï¼Œè¯¥issueå·²ç»æå‡ºäº†å°†è¿‘ä¸€å¹´ï¼Œlskyè¿˜æ˜¯ä¸æ”¯æŒåœ¨å‰ç«¯åå°æˆ–è€…é…ç½®æ–‡ä»¶ä¸­ç›´æ¥é…ç½®httpsï¼Œå®åœ¨æœ‰ç‚¹ä¸å¤ªåº”è¯¥ã€‚æˆ–è®¸ç»´æŠ¤è€…æ˜¯è®¤ä¸ºè¯¥ä¿®æ”¹ä»£ç çš„æ“ä½œå¹¶ä¸å›°éš¾ï¼Œå°±æ²¡æœ‰å†™å…¥é…ç½®æ–‡ä»¶ä¸­ã€‚\nä¸è¿‡è¿™åªæ˜¯é¸¡è›‹é‡ŒæŒ‘éª¨å¤´ï¼Œlskyæ•´ä½“è¿˜æ˜¯éå¸¸å¥½ç”¨çš„\n3.2 nginxé…ç½®å®‰è£…nginxï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„ nginxå®‰è£…åšå®¢\nserver &#123;    listen 443 ssl;    server_name img.text.top img1.text.top;  # åŸŸå    # æ³¨æ„æ–‡ä»¶ä½ç½®ï¼Œæ˜¯ä»/etc/nginx/ä¸‹å¼€å§‹ç®—èµ·çš„    ssl_certificate cert/img.text.top.crt; # åŸŸåè¯ä¹¦æ–‡ä»¶crt    ssl_certificate_key cert/img.text.top.key; # åŸŸåè¯ä¹¦key    ssl_session_timeout 5m;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;    ssl_prefer_server_ciphers on;    client_max_body_size 1024m;    location / &#123;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $host;        proxy_set_header Upgrade-Insecure-Requests 1;        proxy_set_header X-Forwarded-Proto https;        # å› ä¸ºæ˜¯dockeréƒ¨ç½²çš„nginxï¼Œæ‰€ä»¥è¦å¡«äº‘æœåŠ¡å™¨å…¬ç½‘ip        proxy_pass http://äº‘æœåŠ¡å™¨å…¬ç½‘IP:ç«¯å£;    &#125;&#125;# å¼ºåˆ¶é‡å®šå‘server &#123;    listen 80; # ç›‘å¬80ç«¯å£    server_name img.text.top img1.text.top;  # åŸŸå    #æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps    return 301 https://$host$request_uri; &#125;\n\nå†™å…¥é…ç½®æ–‡ä»¶åï¼Œé‡å¯nginxå®¹å™¨ï¼Œå¹¶å°†åŸŸåçš„è§£æè®¾ç½®æˆä½ äº‘æœåŠ¡å™¨çš„å…¬ç½‘ipï¼Œå³å¯ä»¥ç”¨img.text.topæˆ–img1.text.topè®¿é—®ä½ çš„lskyå›¾åºŠ\n3.3 åˆæ‹äº‘cdnåœ¨æˆ‘çš„é…ç½®é¡¹ä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠimg1å’Œimgéƒ½è§£æåˆ°äº‘æœåŠ¡å™¨ï¼Œè€Œæ˜¯å°†img1ä½œä¸ºcdnåŠ é€Ÿçš„åŸŸå\nè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯åˆæ‹äº‘CDNï¼Œæ³¨æ„ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦ç”³è¯·å¥½è¿™ä¸¤ä¸ªå­åŸŸåçš„httpsè¯ä¹¦ï¼Œå¯ä»¥æ˜¯å•åŸŸåè¯ä¹¦ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šé…ç¬¦è¯ä¹¦ã€‚å•åŸŸåè¯ä¹¦èƒ½åœ¨åˆæ‹äº‘CDNä¸­å…è´¹ç”³è¯·\n\næ¨èå¤§å®¶å»ç”³è¯·ä¸€ä¸ªåˆæ‹äº‘è”ç›Ÿï¼Œåªéœ€è¦åœ¨ç½‘ç«™é¡µè„šè´´ä¸€ä¸ªlogoï¼Œå°±èƒ½ç™½å«–ä¸€å¹´67å…ƒçš„ä»£é‡‘åˆ¸ã€‚æ–°äººç”¨æˆ·ä¹Ÿæœ‰ä¸€ä¸ªæœˆçš„61å…ƒä»£é‡‘åˆ¸\n\n\n3.3.1 åˆ›å»ºCDNæœåŠ¡è¿›å…¥æ§åˆ¶å°ï¼Œç‚¹å‡»åˆ›å»ºCDNæœåŠ¡ï¼ŒæŒ‰å¦‚ä¸‹æ ¼å¼å¡«å†™\n\nåˆ›å»ºå¥½äº†ä¹‹åï¼Œå¦‚æœè®¿é—®img1.text.topï¼Œé‚£ä¹ˆå°±æ˜¯ç»è¿‡äº†cdnçš„ï¼Œå¦‚æœè®¿é—®img.text.topå³ä¸ºæºç«™\næ­¤æ—¶ä½ å¯ä»¥ä¿®æ”¹lsky proå­˜å‚¨ç­–ç•¥ä¸­çš„å›¾ç‰‡è®¿é—®urlï¼Œè®©lskyç›´æ¥è¿”å›img1.text.topçš„è¿æ¥\n\n3.3.2 å›æºhoståˆ›å»ºå¥½äº†ä¹‹åï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ã€‚åœ¨å›æºç®¡ç†ä¸­ï¼Œä¿®æ”¹å›æºhostä¸ºæºç«™åŸŸåã€‚å¦‚æœæ˜¯ğŸ‘†å›¾åˆ›å»ºçš„æ ·å¼ï¼Œé‚£ä¹ˆæºç«™åŸŸåå°±æ˜¯img.text.top\n\nè§£é‡Šä¸€ä¸‹è¿™é‡Œçš„å›æºhost\n\nç®€å•æ¥è¯´å°±æ˜¯æµè§ˆå™¨åœ¨è®¿é—®img1.text.topåŠ é€ŸåŸŸåçš„æ—¶å€™ï¼Œåˆæ‹äº‘æœåŠ¡å™¨ä¼šè®¿é—®img.text.topè¿›è¡Œå›æºæ“ä½œ\næ­¤æ—¶ä»–ä¼šå‘é€ä¸€ä¸ªhostï¼Œå¦‚æœè¿™é‡Œä¸è®¾ç½®ï¼Œé»˜è®¤çš„hostå°±æ˜¯è®¿é—®åŸŸåï¼Œå³img1.text.top\nä½†æ˜¯æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨ä¸­nginxå¯èƒ½æ²¡æœ‰é…ç½®img1.text.topçš„åä»£è§„åˆ™ï¼Œæ­¤æ—¶å°±ä¼šè¢«éšæœºè·³åˆ°ä¸€ä¸ªé…ç½®äº†åä»£çš„ç«¯å£ä¸Šï¼Œæ— æ³•æ­£ç¡®è·³è½¬åˆ°img.text.topï¼ˆæ­¤æƒ…å†µæ˜¯é…ç½®äº†å¤šä¸ªnginxåä»£ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæœåŠ¡ï¼Œå¯èƒ½ä¸ä¼šå‡ºç°è·³è½¬é”™è¯¯ï¼‰\né…ç½®äº†hostä¸ºimg.text.topåï¼ŒCDNè¿›è¡Œå›æºçš„æ—¶å€™ï¼Œå°±ä¼šå‘Šè¯‰æœåŠ¡å™¨æˆ‘æ˜¯img.text.topï¼ŒæœåŠ¡å™¨çš„åä»£å°±èƒ½æ­£ç¡®è¯†åˆ«å¹¶è¿”å›æœåŠ¡\n\nè¿™ä¸ªå›æºhoståœ¨åŠ é€Ÿè¯¸å¦‚vercelã€netlifyã€GitHub Pagesç­‰å…·æœ‰åŸŸåè®¿é—®æ§åˆ¶çš„æœåŠ¡çš„æ—¶å€™å°¤ä¸ºé‡è¦ã€‚æ¯”å¦‚ä¸‹å›¾å°±æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰é…ç½®hostï¼Œå¯¼è‡´CDNåŠ é€Ÿå‘é€çš„è¯·æ±‚åŸŸåå¹¶æ²¡æœ‰è¢«vercelæ”¶å½•ï¼Œä¹Ÿå°±ä¸çŸ¥é“è¦è½¬åˆ°é‚£ä¸ªæœåŠ¡ä¸Šï¼Œäºæ˜¯ä¾¿æ— æ³•è®¿é—®\n\n3.3.3 httpsè®¾ç½®ä½¿ç”¨cdnåŠ é€Ÿåï¼Œå³ä¾¿ä½ æºç«™æœ‰sslè¯ä¹¦ï¼ŒcdnåŠ é€Ÿåçš„åŸŸåä¹Ÿä¸ä¸€å®šèƒ½æ­£å¸¸è®¿é—®\n\næ­¤æ—¶å°±éœ€è¦åœ¨cdnçš„é…ç½®ä¸­æ·»åŠ httpsè¯ä¹¦\n\nè¿™é‡Œå¯ä»¥æ·»åŠ è‡ªæœ‰è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥åœ¨åˆæ‹äº‘CDNç”³è¯·å•åŸŸåè¯ä¹¦ã€‚åˆæ‹äº‘ç”³è¯·sslè¯ä¹¦çš„æ“ä½œè¿˜æ˜¯æŒºå¿«çš„ï¼Œå‡ åˆ†é’Ÿå°±å¥½äº†ï¼Œè¿™ç‚¹å€¼å¾—è¡¨æ‰¬\n\n3.3.4 ç¼“å­˜æ§åˆ¶è¿™é‡Œè¿˜éœ€è¦é…ç½®ä¸€ä¸‹ç¼“å­˜æ§åˆ¶ï¼Œå¦åˆ™é»˜è®¤ä¼šæ˜¯å…¨ç«™åŠ é€Ÿ\n\nå¯¹äºlskyæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦åŠ é€Ÿçš„åªæ˜¯å›¾ç‰‡èµ„æºä½ ï¼Œå¹¶ä¸éœ€è¦åŠ é€Ÿç®¡ç†é¡µé¢\n\nå¦‚æœé…ç½®äº†ç¼“å­˜è§„åˆ™ä¹‹åï¼Œè¿›å…¥ç®¡ç†é¡µé¢å‡ºç°äº†é—®é¢˜ï¼Œé‚£å°±éœ€è¦é…ç½®ä¸€ä¸‹ä¸ç¼“å­˜è§„åˆ™ï¼ŒæŠŠç®¡ç†é¡µé¢ã€è®¾ç½®é¡µé¢ç»™åŠ å…¥è¿›å»\n\n3.3.5 æºç«™é™æ€èµ„æºè¿ç§»åœ¨å›æºè®¾ç½®é‡Œé¢æœ‰ä¸€æ¡æ˜¯é™æ€èµ„æºè¿ç§»ï¼Œè¿™ä¸ªè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼\n\nå› ä¸ºåˆæ‹äº‘çš„CDNå›æºåˆ°bucketæ˜¯ä¸ç”¨é’±çš„ï¼Œè¿™æ ·å°±ç›¸å½“äºåªéœ€è¦ä»˜å­˜å‚¨çš„è´¹ç”¨å°±è¡Œäº†ã€‚å› ä¸ºæˆ‘çš„ç«™ç‚¹è®¿é—®é‡å°ï¼Œå¯¹äºCDNå›æºè€Œäº§ç”Ÿçš„å­˜å‚¨è‚¯å®šå°‘çš„å¯æ€œï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒè´¹ç”¨é—®é¢˜\n\néœ€è¦æ“ä½œçš„å°±æ˜¯æ·»åŠ ä¸€ä¸ªäº‘å­˜å‚¨\n\né…ç½®ä¸€ä¸ªæ“ä½œå‘˜ï¼Œæä¾›å†™å…¥å’Œè¯»å–æƒé™ï¼Œå°±OKäº†ã€‚ä¸éœ€è¦ç»‘å®šåŸŸå\n\nåœ¨é™æ€èµ„æºè¿ç§»é‡Œé¢é€‰æ‹©è¿™ä¸ªäº‘å­˜å‚¨å³å¯\n4.picgoéƒ½ç”¨å›¾åºŠäº†ï¼Œè‚¯å®šä¸èƒ½å°‘äº†è€æœ‹å‹Picgo\nåœ¨æ’ä»¶å•†åº—å¯ä»¥æœåˆ°lankongæ’ä»¶ï¼Œå¼€æºåœ°å€ hellodk34&#x2F;picgo-plugin-lankong\n\né…ç½®æ’ä»¶å‚è€ƒREADMEï¼›æˆ‘è¿™é‡Œå‘ç°2.3.0 BATA8æ— æ³•æ­£å¸¸è¿è¡Œæ’ä»¶ï¼Œåªæœ‰2.3.1ç‰ˆæœ¬çš„picgoå¯ä»¥ç”¨\n\nå…¶ä¸­å…³äºpermissionéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè®¾ç½®çš„æ˜¯å…°ç©ºå›¾åºŠçš„æƒé™ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸Šä¼ çš„å›¾ç‰‡èƒ½ä¸èƒ½åœ¨å›¾åºŠç½‘ç«™ä¸Šç›´æ¥è¢«çœ‹åˆ°ã€‚å¹¶ä¸æ˜¯é˜¿é‡Œäº‘OSSé‚£ç§å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®çš„ç§æœ‰æƒé™ã€‚\næ³¨æ„å•Šæ³¨æ„å•Šï¼Œtokenéœ€è¦ä½ è‡ªå·±è°ƒç”¨curlæˆ–è€…ç”¨postman/apifoxè°ƒç”¨apiè·å–\nåˆ«åƒæˆ‘ä¸€æ ·å‚»ä¹ä¹çš„ï¼Œç”¨è¿™ä¸ªç¤ºä¾‹å€¼è¯•äº†å¥½ä¹…ğŸ˜¥\n\n5.nsfwjs é‰´hé™¤éä½ çš„å›¾åºŠä¸æ‰“ç®—å…¬å¼€ç»™ä»»ä½•äººç”¨ï¼Œå…³é—­äº†æ³¨å†Œ&#x2F;æ¸¸å®¢ä¸Šä¼ çš„åŠŸèƒ½ï¼›é‚£ä¹ˆæˆ‘å»ºè®®ä½ è®¾ç½®ä¸€ä¸‹é‰´hæ“ä½œã€‚\nå…°ç©ºå›¾åºŠæ”¯æŒé˜¿é‡Œäº‘&#x2F;è…¾è®¯äº‘çš„å†…å®¹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¿©ç©æ„è¯´å®è¯ï¼Œå¯¹äºä¸€ä¸ªæ— äººé—®æ´¥çš„å°ç«™ç‚¹è€Œè¨€ï¼Œä»·æ ¼å¤ªææ€–äº†ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼Œnsfwå¯ä»¥ç›´æ¥ç”¨dockeréƒ¨ç½²ï¼Œç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œæ•ˆæœè¿˜æ˜¯ä¸é”™çš„\nversion: &#x27;3&#x27;services:  nsfw-api:    image: penndu/nsfw-api:latest    restart: unless-stopped    hostname: nsfw-api    container_name: nsfw-api    ports:      - &quot;14727:3000&quot;\n\nåœ¨è§’è‰²ç»„è®¾ç½®é‡Œé¢ï¼Œå¯ä»¥è®¾ç½®å›¾ç‰‡å®¡æ ¸ã€‚é…ç½®å¥½dockerä¹‹åï¼Œurlæœ«å°¾éœ€è¦å¸¦ä¸€ä¸ª/classifyæ‰èƒ½æ­£å¸¸è°ƒç”¨ã€‚é»˜è®¤çš„é˜ˆå€¼æ˜¯60ï¼Œå®åœ¨å¤ªä½äº†ï¼Œä¿é™©èµ·è§ï¼Œè¶Šä½è¶Šå¥½ã€‚è¿™é‡Œæˆ‘è®¾ç½®æˆäº†15ï¼Œèƒ½å±è”½æ‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„hå›¾\n\nä½†æ˜¯è¿åå…¶ä»–è§„å®šçš„å›¾ç‰‡å°±éœ€è¦ä½ äººå·¥å®¡æ ¸ï¼ˆæˆ–è€…å»ä¹°é˜¿é‡Œäº‘&#x2F;è…¾è®¯çš„å†…å®¹å®¡æ ¸ï¼‰äº†\nä¸ªäººå»ºè®®ï¼Œå…³é—­æ¸¸å®¢ä¸Šä¼ &#x2F;æ³¨å†ŒåŠŸèƒ½â€”â€”é™¤éä½ æ‰“ç®—å»ºç«‹ä¸€ä¸ªå®Œå…¨å…¬å¼€çš„å›¾åºŠç«™ç‚¹ï¼Œå¹¶å¯¹ä½ å›¾åºŠçš„å†…å®¹è´Ÿè´£ã€‚\n\né…ç½®å¥½äº†ä¹‹åï¼Œå¦‚æœæœ‰ç”¨æˆ·ä¸Šä¼ å¥‡æ€ªçš„å›¾ç‰‡ï¼Œä¼šç›´æ¥ç¦æ­¢ï¼Œä¸Šä¼ å¤±è´¥\n6.ä¿®æ”¹é¡µè„šè¿›å…¥lskyçš„æ˜ å°„åˆ°æœ¬åœ°çš„æ–‡ä»¶å¤¹ï¼Œæœç´¢\npresent Lsky Pro. All rights reserved.\n\næœ‰ä¸¤ä¸ªæ–‡ä»¶ä¸­éƒ½åŒ…å«äº†é¡µè„šä¿¡æ¯ï¼Œéƒ½ç»™ä»–ä¿®æ”¹äº†å°±è¡Œï¼›ä¿®æ”¹åé‡å¯å®¹å™¨å°±èƒ½ç”Ÿæ•ˆ\n\nMoreæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®º\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ","Docker"]},{"title":"ã€Nginxã€‘Dockeré…ç½®ngnixï¼Œå®ç°åŒæœåŠ¡å™¨ipå¤šç«™ç‚¹å¤šåŸŸå","url":"/2023/01/24/docker/4docker%E9%85%8Dnginx%E5%AE%9E%E7%8E%B0%E5%90%8C%E6%9C%8D%E5%8A%A1%E5%99%A8IP%E5%A4%9A%E5%9F%9F%E5%90%8D%E5%A4%9A%E7%AB%99%E7%82%B9/","content":"Dockeré…ç½®ngnixï¼Œå®ç°åŒæœåŠ¡å™¨ipï¼Œå¤šåŸŸåæ˜ å°„å¤šç«™ç‚¹\n\n\n1.è¯´æ˜ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„åŸŸåæ˜ å°„åˆ°ipåï¼Œé»˜è®¤è®¿é—®çš„æ˜¯80ç«¯å£ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨åªéƒ¨ç½²äº†ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ ·ä¹Ÿæ˜¯å¤Ÿç”¨çš„ã€‚\nä½†æ˜¯å¾ˆå¤šé¡¹ç›®å¯¹æ€§èƒ½çš„å ç”¨å¹¶æ²¡æœ‰é‚£ä¹ˆå¤¸å¼ ï¼Œä¸€ä¸ªæœåŠ¡å™¨ä¸€ä¸ªç«™ç‚¹æœªå…æœ‰äº›æµªè´¹äº†ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥ç”¨åŸŸå:ç«¯å£æ¥è®¿é—®ï¼Œä½†æ˜¯è¿™æ ·å¯¹äºç”¨æˆ·æ¥è¯´å¹¶ä¸å‹å¥½ï¼Œå¯¹äºå¼ºè¿«ç—‡æ¥è¯´çœ‹ç€å¾ˆä¸èˆ’æœğŸ¤£\nè¿™æ—¶å€™ï¼Œå°±éœ€è¦é…ç½®åå‘ä»£ç†æ¥å®ç°ä¸åŒåŸŸååˆ°æœåŠ¡å™¨ä¸åŒç«¯å£çš„æ˜ å°„ã€‚\n1.1 åå‘ä»£ç†ä½ å¯ä»¥ç†è§£ä¸ºï¼Œåå‘ä»£ç†æ˜¯æœåŠ¡å™¨çš„ä¸€ä¸ªä¸­é—´å•†ï¼Œå…¶èƒ½å°†80ç«¯å£çš„ï¼Œä¸åŒåŸŸåæ¥æºçš„è¯·æ±‚ï¼Œå¯¼å‘åˆ°æœåŠ¡å™¨ä¸Šçš„ä¸åŒç«¯å£\nwww.example.com æŒ‡å‘ 8080ç«¯å£aaa.example.com æŒ‡å‘ 3000ç«¯å£è¿™ä¸¤ä¸ªåŸŸåéƒ½æ˜ å°„åˆ°æœåŠ¡å™¨å…¬ç½‘ip 114.514.8.8\n\nå½“ä½ è®¿é—®www.example.comæ—¶ï¼Œè¯·æ±‚çš„æ˜¯114.514.8.8:80ç«¯å£ï¼Œä¹Ÿå°±æ˜¯åå‘ä»£ç†çš„æœåŠ¡ã€‚æ­¤æ—¶åå‘ä»£ç†èƒ½çŸ¥é“ä½ çš„æ¥æºæ˜¯www.example.comï¼Œäºæ˜¯å°±æŠŠä½ å¸¦åˆ°äº†8080ç«¯å£çš„æœåŠ¡ä¸Šï¼›\nåŒç†ï¼Œè®¿é—®aaa.example.comæ—¶ï¼Œå°±ä¼šè¢«å¸¦åˆ°3000ç«¯å£ã€‚\n\nè¿™é‡Œç”¨nginxä½œæ¼”ç¤ºï¼Œnginxæ˜¯æœ€å¸¸ç”¨çš„åå‘ä»£ç†æœåŠ¡\n2.dockerå®‰è£…nginx\næœ¬æ–‡å‚è€ƒï¼šhttps://www.jianshu.com/p/6b317192480c\n\nç”¨å…¶ä»–æ–¹å¼è¿˜å¾—æ•´ä¸€å¤§å †ä¾èµ–é¡¹ï¼Œè¿™é‡Œç›´æ¥ç”¨dockerï¼Œæ–¹ä¾¿åˆå¿«æ·;\næœåŠ¡å™¨å®‰è£…dockerçš„æ–¹å¼ï¼Œæ ¹æ®ä½ çš„ç³»ç»Ÿï¼Œè‡ªè¡Œç™¾åº¦\ndocker pull nginx\n\n2.1 é…ç½®å¯åŠ¨ä¹‹å‰ï¼Œå…ˆåœ¨ä½ çš„å½“å‰è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆæˆ‘è¿™é‡Œæ˜¯rootç”¨æˆ·ï¼‰\nmkdir /root/docker/ngnix\n\néšåç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨nginxå®¹å™¨\ndocker run \\--name=ngx \\-p 80:80 -p 443:443 \\-v /root/docker/nginx/conf.d:/etc/nginx/conf.d \\-v /root/docker/nginx/cert:/etc/nginx/cert \\-d nginx\n\nå¯¹ä¸€äº›å‚æ•°è¿›è¡Œè¯´æ˜\n\n-på‘½ä»¤æ˜ å°„ç«¯å£ï¼Œå°†80ç«¯å£æ˜ å°„ç»™æœåŠ¡å™¨çš„80ç«¯å£ï¼ˆå³ä¾§å®¹å™¨ç«¯å£ï¼Œå·¦ä¾§æœ¬åœ°ç«¯å£\n-vå‘½åæ˜ å°„ç›®å½•ï¼Œå°†æœ¬åœ°çš„/root/nginx/conf.dæ˜ å°„åˆ°dockeré‡Œé¢çš„/etc/nginx/conf.d è¿™æ˜¯nginxçš„é…ç½®æ–‡ä»¶è·¯å¾„\n--nameè®¾ç½®å®¹å™¨çš„åå­—ï¼Œå’Œé•œåƒåå­—æ— å…³\n\nå®‰è£…å®Œæˆåï¼Œæ‰“å¼€äº‘æœåŠ¡å™¨çš„ipï¼Œå°±èƒ½çœ‹åˆ°nginxçš„åˆå§‹é¡µé¢\n\n3.ç¼–è¾‘é…ç½®æ–‡ä»¶nginx.conf é…ç½®æ–‡ä»¶æˆ‘ä»¬ç›´æ¥ç”¨å®˜æ–¹é»˜è®¤çš„å°±è¡Œï¼Œè¿™é‡Œä¸»è¦å¯¹ç«™ç‚¹çš„é…ç½®æ–‡ä»¶åšè¯´æ˜ï¼›\n3.1 httpså¦‚æœä¸éœ€è¦httpsåŠ å¯†ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„é…ç½®æ–‡ä»¶æ¥æ“ä½œï¼Œå½“ä½¿ç”¨test.comè®¿é—®ä½ çš„äº‘æœåŠ¡å™¨ipæ—¶ï¼Œä¼šè¢«è½¬åˆ°4000ç«¯å£\nserver &#123;    listen 80;  # ç›‘å¬80ç«¯å£    server_name test.com;  # è‡ªå·±çš„åŸŸå        location / &#123;\t\t# è®¾ç½®ç¼“å†²åŒºå¤§å°\t\tproxy_buffer_size 64k;        proxy_buffers   32 32k;        proxy_busy_buffers_size 128k;\t\t        proxy_set_header HOST $host;        proxy_set_header X-Forwarded-Proto $scheme;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\t\t# éœ€è¦ä»£ç†çš„åœ°å€:ç«¯å£ï¼ˆå› ä¸ºæ˜¯dockeréƒ¨ç½²çš„ï¼Œéœ€è¦å¡«å…¬ç½‘ipï¼‰        proxy_pass http://IP:4000;    &#125;&#125;\n\n3.1.1 å…³äºproxy_passè¿™é‡Œå¿…é¡»è¦æ³¨æ„ä¸€ä¸‹proxy_pass\nå› ä¸ºæˆ‘ä»¬çš„nginxæ˜¯ç”¨dockeréƒ¨ç½²çš„ï¼Œæ­¤æ—¶ä½ å¡« 127.0.0.1æˆ–localhostï¼Œå®é™…ä¸Šè®¿é—®çš„éƒ½æ˜¯nginxè¿™ä¸ªdockerå†…éƒ¨çš„ç«¯å£ï¼Œæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä¼šå¼¹å‡º502 gatewayæŠ¥é”™ï¼\næ­£ç¡®çš„åŠæ³•å°±æ˜¯å¡«äº‘æœåŠ¡å™¨çš„å…¬ç½‘ip+ç«¯å£\n3.2 httpsé…ç½®httpså¦‚ä¸‹ï¼Œè¿™æ ·é…ç½®ä¼šå°†80ç«¯å£çš„httpè®¿é—®å¼ºåˆ¶è½¬æˆhttps\nåŸŸåçš„è¯ä¹¦å¯ä»¥åœ¨åŸŸåæä¾›å•†é‡Œé¢ç”³è¯·ï¼Œè…¾è®¯äº‘æ”¯æŒç”³è¯·å•åŸŸå1å¹´çš„å…è´¹è¯ä¹¦ã€‚è¿˜å¯ä»¥å»joysslï¼Œç”³è¯·90å¤©çš„åŸŸåé€šé…ç¬¦è¯ä¹¦\nå› ä¸ºåœ¨å¯åŠ¨dockerå®¹å™¨çš„æ—¶å€™ï¼Œæˆ‘é…ç½®äº†è·¯å¾„æ˜ å°„ï¼Œè¯ä¹¦é…ç½®çš„cert/å¯¹åº”çš„å…¶å®æ˜¯ /root/docker/nginx/cert/ç›®å½•ï¼Œå°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•ä¸‹å³å¯\nserver &#123;    listen 443 ssl;    server_name img.text.top;  # åŸŸå    # æ³¨æ„æ–‡ä»¶ä½ç½®ï¼Œæ˜¯ä»/etc/nginx/ä¸‹å¼€å§‹ç®—èµ·çš„    ssl_certificate cert/img.text.top.crt; # åŸŸåè¯ä¹¦æ–‡ä»¶crt    ssl_certificate_key cert/img.text.top.key; # åŸŸåè¯ä¹¦key    ssl_session_timeout 5m;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;    ssl_prefer_server_ciphers on;    client_max_body_size 1024m;    location / &#123;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $host;        proxy_set_header Upgrade-Insecure-Requests 1;        proxy_set_header X-Forwarded-Proto https;        # å› ä¸ºæ˜¯dockeréƒ¨ç½²çš„nginxï¼Œæ‰€ä»¥è¦å¡«äº‘æœåŠ¡å™¨å…¬ç½‘ip        proxy_pass http://äº‘æœåŠ¡å™¨å…¬ç½‘IP:ç«¯å£;    &#125;&#125;# å¼ºåˆ¶é‡å®šå‘server &#123;    listen 80; # ç›‘å¬80ç«¯å£    server_name img.text.top;  # åŸŸå    #æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps    return 301 https://$host$request_uri; &#125;\n\nä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯nginxçš„å®¹å™¨ï¼Œå³å¯æ­£å¸¸è®¿é—®\n\næ›´å¤šï¼šç”¨portainerç®¡ç†dockerportaineræ˜¯ä¸€ä¸ªå›¾å½¢åŒ–ç®¡ç†dockeré•œåƒå’Œå®¹å™¨çš„é¡¹ç›®ï¼Œè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼›ç¼ºç‚¹å°±æ˜¯åªæœ‰è‹±æ–‡ï¼Œæƒ³è¦ä¸­æ–‡å¯ä»¥é…ç½®ä¸­æ–‡åŒ…ï¼Œä½†æ˜¯ä¸­æ–‡åŒ…å·²ç»éå¸¸éå¸¸ä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œç´¢æ€§ç›´æ¥ç”¨è‹±æ–‡ç‰ˆ\ndocker run -p 14730:9000 -p 14729:8000 --name portainer \\--restart=always \\-v /var/run/docker.sock:/var/run/docker.sock \\-v /root/docker/portainer/data:/data \\-d portainer/portainer","categories":["ç©ä¸ŠLinux"],"tags":["Docker","Linux"]},{"title":"ã€Vercelã€‘æ•™ä½ éƒ¨ç½²imsyy/homeä¸ªäººä¸»é¡µ","url":"/2023/01/29/docker/6vercel%E9%83%A8%E7%BD%B2home/","content":"æœ¬ç¯‡åšå®¢æ•™ä½ å¦‚ä½•éƒ¨ç½²ä¸€ä¸ªè‡ªå·±çš„ä¸ªäººä¸»é¡µ\né¡¹ç›®åœ°å€ï¼šhttps://github.com/imsyy/home\n\n\n1.forkä»“åº“+verceléƒ¨ç½²é¦–å…ˆæˆ‘ä»¬ç‚¹å‡»forkï¼Œå°†ä»“åº“å¤åˆ»åˆ°è‡ªå·±çš„è´¦æˆ·\n\néšåè¿›å…¥vercelï¼Œç‚¹å‡»dashboard-add new-project\n\né€‰æ‹©ä½ å¤åˆ»çš„ä»“åº“\n\nç„¶åä»€ä¹ˆéƒ½ä¸ç”¨æ”¹ï¼Œç›´æ¥deploy\n\nç­‰å¾…éƒ¨ç½²æˆåŠŸï¼Œç‚¹å‡»domainsï¼Œåœ¨è¿™é‡Œæ·»åŠ ä¸ªä½ è‡ªå·±çš„åŸŸå+è§£æã€‚å¦åˆ™vercelé»˜è®¤çš„åŸŸåæ— æ³•ç›´æ¥è®¿é—®\n\nåˆ°è¿™é‡Œå°±å·²ç»éƒ¨ç½²æˆåŠŸäº†ï¼Œå¯ä»¥ä¸ç”¨ç®¡verceläº†ï¼›\nå…‹éš†ä¸‹æˆ‘ä»¬forkçš„ä»“åº“ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼\n\nå¤‡æ³¨ï¼Œenvä¸­å·²æœ‰çš„é…ç½®åœ¨è¿™é‡Œä¸æ\n\n1.1 æœ¬åœ°é¢„è§ˆæœ¬åœ°é¢„è§ˆéœ€è¦æˆ‘ä»¬åœ¨æœ¬åœ°å®‰è£…å¥½node.jsç¯å¢ƒä»¥åŠnpmåŒ…ç®¡ç†å™¨ï¼Œéšåå®‰è£…yarn\nnpm install yarn\n\nå®‰è£…å®Œæˆåï¼Œå…ˆæ‰§è¡Œyarn installå®‰è£…ä¾èµ–é¡¹\nyarn install\n\nä¾èµ–é¡¹æå®šäº†ï¼Œç”¨devæŸ¥çœ‹é¢„è§ˆé¡µé¢\nyarn dev\n\næ³¨æ„ï¼Œç¬¬ä¸€æ¬¡æŸ¥çœ‹é¢„è§ˆé¡µé¢çš„æ—¶å€™ï¼ŒåŠ è½½ä¼šéå¸¸æ…¢ï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µ\nVITE v3.1.8  ready in 844 msâœ  Local:   http://127.0.0.1:3000/                       âœ  Network: use --host to expose    \n\nåç»­çš„ä¿®æ”¹ï¼Œå¯ä»¥å…ˆåœ¨æœ¬åœ°é¢„è§ˆæˆåŠŸåï¼Œå†éƒ¨ç½²åˆ°vercel\n\n1.2 éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨å¦‚æœä½ æƒ³éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œåˆ™ä½¿ç”¨\nyarn build\n\nä¼šç”Ÿæˆä¸€ä¸ªdistæ–‡ä»¶å¤¹ï¼Œå¼„åˆ°äº‘æœåŠ¡å™¨ä¸Šå°±å¯ä»¥äº†ï¼ˆä¸ä¼šç”¨ï¼Œæ²¡è¯•è¿‡ï¼‰\n1.3 vercelè®¿é—®é—®é¢˜å¦‚æœæ ¹æ®ä¸Šé¢çš„æ­¥éª¤è®¾ç½®äº†è§£æåï¼Œè¿˜æ˜¯å‡ºç°è®¿é—®ç¼“æ…¢ç”šè‡³æ— æ³•è®¿é—®çš„é—®é¢˜ï¼Œå¯ä»¥å°†åŸŸåçš„Aæˆ–è€…cnameè§£ææ›´æ”¹ä¸ºä¸‹é¢çš„å›½å†…è®¿é—®è¾ƒå¿«çš„è§£æ\n76.223.126.88cname-china.vercel-dns.com\n\n\n2.ç¤¾äº¤é“¾æ¥è¿™é‡Œå…‰æ˜¯ä¿®æ”¹.envæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºä½œè€…æš‚æ—¶è¿˜æ²¡æœ‰å†™ç¤¾äº¤é“¾æ¥çš„åˆ¤æ–­ï¼Œå³ä¾¿ä½ æŠŠæ‰€æœ‰ç¤¾äº¤é“¾æ¥çš„ç¯å¢ƒå˜é‡éƒ½æ³¨é‡Šæ‰ï¼Œä»–è¿˜æ˜¯ä¼šæ˜¾ç¤ºå‡ºæ¥\nè¿™é‡Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œä¸ç®—éš¾ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å°±è¡Œ\nsrc\\components\\SocialLinks\\index.vue\n\næ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæœ€é¡¶éƒ¨æ˜¯&lt;/template&gt;åŒ…è£¹çš„ä¸€ä¸ªdiv\n&lt;template&gt;  &lt;!-- ç¤¾äº¤é“¾æ¥ --&gt;  &lt;div class=&quot;social&quot;&gt;  ....  &lt;/div&gt;&lt;/template&gt;\n\næˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„å°±æ˜¯è¿™é‡Œé¢çš„ä»£ç \n2.1 æ³¨é‡Šæ‰ä¸éœ€è¦çš„æ¯”å¦‚ä¸‹é¢è¿™ä¸€ä¸ª&lt;a &lt;/a&gt; åŒ…è£¹çš„å°±æ˜¯tgçš„ç¤¾äº¤é“¾æ¥ã€‚å¦‚æœä½ ä¸éœ€è¦ï¼Œé‚£å°±ç›´æ¥æŠŠå®ƒæ³¨é‡Šæ‰\n&lt;!-- &lt;a   id=&quot;telegram&quot;   :href=&quot;socialLinks.telegram&quot;   target=&quot;_blank&quot;   @mouseenter=&quot;changeTip&quot;   @mouseleave=&quot;leaveTip&quot;   &gt;    &lt;Icon size=&quot;24&quot;&gt;        &lt;Telegram /&gt;    &lt;/Icon&gt;&lt;/a&gt; --&gt;\n\n2.2 å¢åŠ æ²¡æœ‰çš„ç¤¾äº¤é“¾æ¥æ ¹æ®ä¸Šé¢è¿™ä¸ªæ¨¡æ¿çš„æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å¢è‡ªå·±éœ€è¦çš„ç¤¾äº¤é“¾æ¥ï¼Œæ¯”å¦‚æˆ‘å°±æ–°å¢äº†ä¸€ä¸ªgiteeçš„é“¾æ¥ã€‚éœ€è¦ä¿®æ”¹çš„åªæœ‰idå’Œiconé‡Œé¢çš„å›¾æ ‡åå­—GitSquare\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;Icon size=&quot;24&quot;&gt;    &lt;GitSquare /&gt;  &lt;/Icon&gt;&lt;/a&gt;\n\nè¿™é‡Œçš„Iconå›¾æ ‡éƒ½æ˜¯ä»ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¯¼å…¥çš„ï¼Œæ–‡ä»¶è·¯å¾„ä¸º\nnode_modules\\@vicons\\fa\\es\\index.d.ts\n\nä½ å¯ä»¥åœ¨è¿™é‡Œé¢æœç´¢å·²æœ‰çš„å›¾æ ‡åå­—ï¼Œå¹¶å›åˆ°ç¤¾äº¤é“¾æ¥çš„ src\\components\\SocialLinks\\index.vue æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚å›¾æ‰€ç¤ºçš„ä»£ç ï¼Œæ–°å¢å›¾æ ‡ï¼ˆå¿…é¡»è¦åœ¨è¿™é‡Œæ–°å¢ï¼Œ å†å»htmlé‡Œé¢å¼•ç”¨ï¼‰\nimport &#123; Github, Qq, Telegram, Twitter,GitSquare &#125; from &quot;@vicons/fa&quot;;\n\n\næœ€åï¼Œåœ¨TipDataä¸­æ–°å¢ä¸€ä¸ªç‚¹å‡»ä¼šæ˜¾ç¤ºçš„æ–‡å­—ï¼Œè¿™é‡Œçš„idè¦å’Œä¸Šé¢å†™çš„ä¸€æ ·\nlet socialTipData = &#123;  github: &quot;å» Github çœ‹çœ‹&quot;,  gitee: &quot;å» Gitee çœ‹çœ‹&quot;,  qq: &quot;æœ‰ä»€ä¹ˆäº‹å—&quot;,  email: &quot;æ¥å° Email&quot;,  telegram: &quot;ä½ æ‡‚çš„ ~&quot;,  twitter: &quot;ä½ æ‡‚çš„ ~&quot;,&#125;;\n\nåœ¨ç¤¾äº¤é“¾æ¥çš„åœ°å€é‡Œé¢ï¼Œæ–°å¢giteeçš„åœ°å€ï¼Œå‚è€ƒå·²æœ‰çš„githubçš„åœ°å€çš„å†™æ³•\nconst socialLinks = reactive(&#123;  github: &quot;https://github.com/&quot; + import.meta.env.VITE_SOCIAL_GITHUB,  gitee: &quot;https://gitee.com/&quot; + import.meta.env.VITE_SOCIAL_GITEE,  ...\n\næœ€åï¼Œè¿˜éœ€è¦åœ¨é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶ä¸­ï¼Œæ–°å¢ä¸€ä¸ªcaseï¼Œç…§ç€å·²æœ‰çš„æŠ„å°±è¡Œ\ncase &quot;gitee&quot;:  socialTip.value = socialTipData.gitee;  return true;\n\næœ€åçš„æœ€åï¼Œå›åˆ°.envç¯å¢ƒå˜é‡ï¼Œæ–°å¢ä¸€ä¸ªVITE_SOCIAL_GITEEï¼Œå¡«å†™ä½ çš„giteeç”¨æˆ·å\nVITE_SOCIAL_GITEE = &quot;ewait&quot;\n\næå®šå•¦ï¼\n\n2.3 æ·»åŠ æ²¡æœ‰çš„iconå¦‚æœä¸€ä¸ªå›¾æ ‡åœ¨æœ¬åœ°è·¯å¾„æ²¡æœ‰ï¼Œå¯ä»¥è¯•ç€ç”¨ä¸‹é¢çš„åŠæ³•å¯¼å…¥ä¸€ä¸ªæœ¬åœ°å›¾ç‰‡ï¼Œæˆ–è€…æ˜¯å›¾ç‰‡url\næœ¬åœ°å›¾ç‰‡çš„å­˜å‚¨è·¯å¾„ä¸ºpublic/images/\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;img     src=&quot;/images/icon/gitee.png&quot; height=&quot;24&quot;  /&gt;&lt;/a&gt;\n\nä½†æ˜¯ä¸Šé¢è¿™æ ·å¼„ä¼šæœ‰è¾¹è·é—®é¢˜ï¼Œå¯ä»¥çœ‹åˆ°giteeå’Œqqä¹‹é—´çš„è¾¹è·æ¯”å³ä¾§æ›´çŸ­ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°è§£å†³åŠæ³•\n\nå—¨å—¨å—¨ï¼Œç»è¿‡åŠå°æ—¶çš„æŠ˜è…¾ï¼Œæˆ‘æ‰¾åˆ°è§£å†³åŠæ³•äº†ã€‚åœ¨æœ¬åœ°yarn devä¸­f12æ‰¾åˆ°å¦‚ä¸‹çš„ä»£ç ï¼Œè¿™é‡Œè¦åšçš„å°±æ˜¯çœ‹å…¶ä»–å›¾æ ‡çš„ä»£ç æ˜¯æ€ä¹ˆå†™çš„\n\nè¿™é‡Œèƒ½çœ‹åˆ°ï¼Œä»–ä»¬éƒ½ç”¨äº†ä¸€ä¸ªspançš„xicon classï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯ç»™è¿™ä¸ªimgä¹ŸåŠ ä¸Šä¸€ä¸ªxicon\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;span class=&quot;xicon&quot; style=&quot;font-size: 24px;&quot;&gt;    &lt;img src=&quot;/images/icon/gitee.png&quot; height=&quot;24&quot;/&gt;  &lt;/span&gt;&lt;/a&gt;\n\nç°åœ¨å°±OKäº†ï¼\n\n2.4 æ·»åŠ envåˆ¤æ–­ï¼Œè‹¥ä¸ºç©ºä¸æ˜¾ç¤ºä½œè€…å†™çš„ç‰ˆæœ¬æ˜¯å†™æ­»çš„ï¼Œå³ä¾¿ä½ çš„envé‡Œé¢æ²¡æœ‰é‚£ä¸ªç¤¾äº¤é“¾æ¥ï¼Œä»–è¿˜æ˜¯ä¼šå±•ç¤ºåœ¨ä¸»é¡µä¸Šã€‚æˆ‘çš„éœ€æ±‚å°±æ˜¯å¦‚æœenvé‡Œé¢æ²¡æœ‰è¿™ä¸ªç¤¾äº¤é“¾æ¥/ä¸ºç©ºï¼Œé‚£å°±ä¸å±•ç¤ºè¿™ä¸ªç¤¾äº¤é“¾æ¥çš„å›¾æ ‡\n# ç¤¾äº¤é“¾æ¥VITE_SOCIAL_GITHUB = &quot;Aewait&quot;VITE_SOCIAL_GITEE = &quot;ewait&quot;VITE_SOCIAL_QQ = &quot;&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;\n\næ¯”å¦‚æˆ‘ä¸ªäººçš„éœ€æ±‚å°±ä¸éœ€è¦åé¢çš„3ä¸ªï¼Œé‚£å°±æŠŠç¯å¢ƒå˜é‡è®¾ç½®ä¸ºç©ºï¼Œä¸”è‡ªåŠ¨ä¸å±•ç¤º\nè¿™æ—¶å€™è¦åšçš„å°±æ˜¯ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªåˆ¤æ–­è¯­å¥ï¼ˆæˆ‘æ²¡å­¦è¿‡å‰ç«¯ï¼Œç™¾åº¦åˆ°çš„ï¼‰\nå…ˆåœ¨ç¤¾äº¤é“¾æ¥çš„æ–‡ä»¶é‡Œé¢ï¼Œæ·»åŠ ä¸‹é¢è¿™ä¸ªå˜é‡å®šä¹‰ï¼ˆå¯ä»¥ç†è§£ä¸ºä»–å°±æ˜¯ä¸€ä¸ªç±»ï¼Œé€šè¿‡ç±»å.å˜é‡çš„æ–¹å¼è®¿é—®ï¼‰\nlet socialEnv = &#123;  github: import.meta.env.VITE_SOCIAL_GITHUB,  gitee: import.meta.env.VITE_SOCIAL_GITEE,  kook: import.meta.env.VITE_SOCIAL_KOOK,  qq: import.meta.env.VITE_SOCIAL_QQ,  email: import.meta.env.VITE_SOCIAL_EMAIL,  telegram: import.meta.env.VITE_SOCIAL_TELEGRAM,  twitter: import.meta.env.VITE_SOCIAL_TWITTER,  travellings: import.meta.env.VITE_SOCIAL_TRAVELLINGS,&#125;\n\néšåè¦åšçš„ï¼Œå°±æ˜¯åœ¨æœ€ä¸Šé¢çš„div class=&quot;link&quot;é‡Œé¢æ·»åŠ ä¸€ä¸ªåˆ¤æ–­è¯­å¥ï¼ˆéœ€è¦ç»™æ¯ä¸€é¡¹éƒ½æ·»åŠ ï¼Œæ³¨æ„åå­—åˆ«ææ··äº†ï¼‰\n&lt;span v-if=&quot;socialEnv.twitter&quot;&gt;  &lt;a    id=&quot;twitter&quot;    :href=&quot;socialLinks.twitter&quot;    target=&quot;_blank&quot;    @mouseenter=&quot;changeTip&quot;    @mouseleave=&quot;leaveTip&quot;  &gt;    &lt;Icon size=&quot;24&quot;&gt;      &lt;Twitter /&gt;    &lt;/Icon&gt;  &lt;/a&gt;&lt;/span&gt;\n\nè¿™æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨åˆ¤æ–­è¿™ä¸ªç¯å¢ƒå˜é‡æ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºé‚£å°±ä¸æ˜¾ç¤º\n\næµ‹è¯•ä¸€ä¸‹VITE_SOCIAL_GITHUB = &quot;Aewait&quot;VITE_SOCIAL_GITEE = &quot;ewait&quot;VITE_SOCIAL_KOOK = &quot;https://kook.top/gpbTwZ&quot;VITE_SOCIAL_QQ = &quot;&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;VITE_SOCIAL_TWITTER = &quot;&quot;VITE_SOCIAL_TRAVELLINGS = &quot;https://www.travellings.cn/go.html&quot;\n\n\nVITE_SOCIAL_GITHUB = &quot;&quot;VITE_SOCIAL_GITEE = &quot;ewait&quot;VITE_SOCIAL_KOOK = &quot;https://kook.top/gpbTwZ&quot;VITE_SOCIAL_QQ = &quot;111&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;VITE_SOCIAL_TWITTER = &quot;&quot;VITE_SOCIAL_TRAVELLINGS = &quot;https://www.travellings.cn/go.html&quot;\n\n\nå®Œç¾è¾¾æˆç›®æ ‡ï¼\nå˜é‡å¤ç”¨å¯ä»¥æŠŠåŸæœ¬çš„socialLinksæ”¹æˆä½¿ç”¨socialEnvï¼Œé¿å…ä¸¤ä¸ªéƒ½æ˜¯importï¼Œå¤ªé•¿äº†ä¸å¥½çœ‹\nlet socialEnv = &#123;  github: import.meta.env.VITE_SOCIAL_GITHUB,  gitee: import.meta.env.VITE_SOCIAL_GITEE,  kook: import.meta.env.VITE_SOCIAL_KOOK,  qq: import.meta.env.VITE_SOCIAL_QQ,  email: import.meta.env.VITE_SOCIAL_EMAIL,  telegram: import.meta.env.VITE_SOCIAL_TELEGRAM,  twitter: import.meta.env.VITE_SOCIAL_TWITTER,  travellings: import.meta.env.VITE_SOCIAL_TRAVELLINGS,&#125;// ç¤¾äº¤é“¾æ¥åœ°å€const socialLinks = reactive(&#123;  github: &quot;https://github.com/&quot; + socialEnv.github,  gitee: &quot;https://gitee.com/&quot; + socialEnv.gitee,  kook: socialEnv.kook,  qq: &quot;https://wpa.qq.com/msgrd?v=3&amp;uin=&quot; +    socialEnv.qq +    &quot;&amp;site=qq&amp;menu=yes&quot;,  email: &quot;mailto:&quot; + socialEnv.email,  telegram: &quot;https://t.me/&quot; + socialEnv.telegram,  twitter: &quot;https://twitter.com/&quot; + socialEnv.twitter,  travellings: socialEnv.travellings,&#125;);\n\n3.ç«™ç‚¹é¦–é¡µæ–‡å­—å­—ä½“\nhttps://github.com/imsyy/home/issues/49\n\nå¦‚æœä½ ä¿®æ”¹äº†ç«™ç‚¹é¦–é¡µçš„æ–‡å­—ï¼Œä¼šå‘ç°ä¸€éƒ¨åˆ†æ–‡å­—æ²¡åŠæ³•æ­£å¸¸æ˜¾ç¤º\n\næ ¹æ®ä½œè€…åœ¨issueé‡Œé¢æä¾›çš„é“¾æ¥ï¼Œä¸‹è½½äº†å®Œæ•´çš„å­—ä½“æ–‡ä»¶\nhttps://file.4everland.app/font/Other/Pacifico-Regular.ttfå¦‚æœä¸Šé¢çš„é“¾æ¥åäº†ï¼Œå¯ä»¥å»æˆ‘çš„ä»“åº“é‡Œé¢ä¸‹https://github.com/musnows/Aewait/blob/main/Pacifico-Regular.ttf\n\nå°†å…¶ç²˜è´´åˆ°ä»¥ä¸‹è·¯å¾„ï¼Œè¦†ç›–åŸæœ¬çš„å­—ä½“æ–‡ä»¶\npublic/font\n\nç°åœ¨å°±Okäº†\n\n4.ç½‘ç«™logoé…ç½®4.1 æµè§ˆå™¨é¡¶éƒ¨å›¾æ ‡ä¿®æ”¹index.htmlä¸­çš„å¦‚ä¸‹å­—æ®µ\n&lt;link rel=&quot;stylesheet&quot; href=&quot;https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css&quot; /&gt;&lt;link rel=&quot;icon&quot; href=&quot;/images/icon/myPNG.jpg&quot;&gt;&lt;link rel=&quot;apple-touch-icon&quot; href=&quot;/images/icon/myPNG-r.jpg&quot;&gt;\n\nå°†ä½ è‡ªå·±çš„logoå›¾æ ‡æ”¾åˆ°public/imagesä¸‹å³å¯ã€‚è¿™é‡Œä¿®æ”¹çš„æ˜¯æµè§ˆå™¨é¡¶éƒ¨çš„å›¾æ ‡\n4.2 ä¸»é¡µå›¾æ ‡ä¸»é¡µå›¾æ ‡çš„è·¯å¾„å¦‚ä¸‹\nsrc/components/Message/index.vue\n\né‡Œé¢æœ‰æ³¨é‡Šï¼Œæ‰¾åˆ°å­—æ®µä¿®æ”¹å³å¯\n&lt;!-- Logo --&gt;&lt;div class=&quot;logo&quot;&gt;  &lt;img class=&quot;logo-img&quot; src=&quot;/images/icon/logo.png&quot; alt=&quot;logo&quot; /&gt;  &lt;div class=&quot;name&quot;&gt;    &lt;span class=&quot;bg&quot;&gt;&#123;&#123; siteUrl[0] &#125;&#125;&lt;/span&gt;    &lt;span class=&quot;sm&quot;&gt;.&#123;&#123; siteUrl[1] &#125;&#125;&lt;/span&gt;  &lt;/div&gt;&lt;/div&gt;\n\n5.ç½‘ç«™é“¾æ¥é…ç½®åœ¨ç¯å¢ƒå˜é‡.envä¸­å†™æ˜äº†é…ç½®ç½‘ç«™çš„ä½ç½®\n# ç½‘ç«™é“¾æ¥## è¯·åœ¨ src/components/Links/index.vue ä¸­è®¾ç½®\n\né¦–å…ˆæ˜¯è¿™é‡Œçš„å›¾æ ‡ï¼Œè¿˜æ˜¯åœ¨è€ä½ç½®node_modules\\@vicons\\fa\\es\\index.d.tsï¼Œæ‰¾ä½ éœ€è¦çš„å›¾æ ‡å¯¼å…¥\nimport &#123;  Link,  Blog,  CompactDisc,  Cloud,  Compass,  Book,  Flask,  GitSquare,  Image,  GitAlt&#125; from &quot;@vicons/fa&quot;;\n\néšåç½‘ç«™é“¾æ¥å°±ç…§ç€æŠ„ï¼Œèµ·ä¸€ä¸ªæ–°çš„å°±å¯ä»¥äº†\n&#123;  icon: Compass,  name: &quot;èµ·å§‹é¡µ&quot;,  link: &quot;https://nav.imsyy.top/&quot;,&#125;,\n\nå»ºè®®é“¾æ¥ä¸è¶…è¿‡6ä¸ªï¼Œä¸ç„¶å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·\n\n6.footeré…ç½®src\\components\\Footer\\index.vue\n\nåœ¨é¡µè„šé…ç½®ç½‘ç«™ç”¨æˆ·å’Œé“¾æ¥ï¼Œä¿®æ”¹å¦‚ä¸‹å­—æ®µ\n&lt;span  &gt;Copyright&amp;nbsp;&amp;copy;&amp;nbsp;&#123;&#123; fullYear &#125;&#125;  &lt;a href=&quot;é“¾æ¥&quot;&gt;åå­—&lt;/a&gt;&lt;/span&gt;\n\nå¦‚æœä½ çš„ç«™ç‚¹ç»è¿‡äº†å¤‡æ¡ˆï¼Œä¿®æ”¹å¦‚ä¸‹å­—æ®µ\n&lt;a href=&quot;https://beian.miit.gov.cn&quot; target=&quot;_blank&quot;  &gt;è±«ICPå¤‡2022018134å·-1&lt;/a&gt;\n\nå¦‚æœæ²¡æœ‰å¤‡æ¡ˆï¼Œå¯ä»¥æŠŠè¿™éƒ¨åˆ†æ³¨é‡Šæ‰\n7.éŸ³ä¹æ’­æ”¾å™¨é…ç½®è¿™éƒ¨åˆ†å¯èƒ½æœ‰è€å“¥ä¸å¤ªæ¸…æ¥šï¼Œæˆ‘é¡ºä¾¿è¯´ä¸€ä¸‹å§!\nåœ¨ç¯å¢ƒå˜é‡é‡Œé¢ï¼Œä¿®æ”¹æœ€åº•éƒ¨çš„æ’­æ”¾idå°±å¯ä»¥äº†\n# æ­Œæ›² API åœ°å€## å¤‡ç”¨ï¼šhttps://api.wuenci.com/meting/api/VITE_SONG_API = &quot;https://api-meting.imsyy.top&quot;# æ­Œæ›²æœåŠ¡å™¨ ( netease-ç½‘æ˜“äº‘, tencent-qqéŸ³ä¹ )VITE_SONG_SERVER = &quot;netease&quot;# æ’­æ”¾ç±»å‹ ( song-æ­Œæ›², playlist-æ’­æ”¾åˆ—è¡¨, album-ä¸“è¾‘, search-æœç´¢, artist-è‰ºæœ¯å®¶ )VITE_SONG_TYPE = &quot;playlist&quot;# æ’­æ”¾ IDVITE_SONG_ID = &quot;2893005411&quot;\n\nidåœ¨å“ªå„¿æ‰¾ï¼Ÿç™»é™†ä½ çš„ç½‘é¡µç‰ˆç½‘æ˜“äº‘&#x2F;QQéŸ³ä¹ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ­Œå•\n\næ­¤å¤„ç½‘é¡µé“¾æ¥é‡Œé¢çš„IDå°±æ˜¯æ’­æ”¾idï¼Œå¤åˆ¶è¿‡æ¥å°±OKäº†\nhttps://music.163.com/#/playlist?id=2024518101IDæ˜¯2024518101\n\n8.èƒŒæ™¯å›¾è®¾ç½®src/components/store/index.vue\n\nè¿™é‡Œæœ‰ä¸å°‘é…ç½®é¡¹ï¼Œå…¶ä¸­å…³äºå£çº¸ç§ç±»æœ‰3ä¸­\nstate: () =&gt; &#123;    return &#123;        innerWidth: null, // å½“å‰çª—å£å®½åº¦        coverType: &quot;0&quot;, // å£çº¸ç§ç±»        musicIsOk: false, // éŸ³ä¹æ˜¯å¦åŠ è½½å®Œæˆ        musicVolume: 0, // éŸ³ä¹éŸ³é‡;        musicOpenState: false, // éŸ³ä¹é¢æ¿å¼€å¯çŠ¶æ€        backgroundShow: false, // å£çº¸å±•ç¤ºçŠ¶æ€        boxOpenState: false, // ç›’å­å¼€å¯çŠ¶æ€        mobileOpenState: true, // ç§»åŠ¨ç«¯å¼€å¯çŠ¶æ€        mobileFuncState: false, // ç§»åŠ¨ç«¯åŠŸèƒ½åŒºå¼€å¯çŠ¶æ€        setOpenState: false, // è®¾ç½®é¡µé¢å¼€å¯çŠ¶æ€        playerState: false, // å½“å‰æ’­æ”¾çŠ¶æ€        playerTitle: null, // å½“å‰æ’­æ”¾æ­Œæ›²å        playerArtist: null, // å½“å‰æ’­æ”¾æ­Œæ‰‹å        playerLrc: &quot;æ­Œè¯åŠ è½½ä¸­&quot;, // å½“å‰æ’­æ”¾æ­Œè¯    &#125;&#125;,\n\nå¯ä»¥åœ¨backgoundé‡Œé¢æ‰¾åˆ°å£çº¸3ä¸ªç§ç±»çš„ä¸åŒï¼š0æ˜¯æœ¬åœ°å£çº¸ï¼Œéšæœº1åˆ°10ï¼ˆå¯ä»¥åœ¨æœ¬åœ°æ–°å¢ä½ å–œæ¬¢çš„å£çº¸ï¼Œå¹¶ä¿®æ”¹è¿™é‡Œçš„éšæœºæ•°èŒƒå›´ï¼‰\n0æ˜¯é»˜è®¤çš„å‡ å¼ æœ¬åœ°å£çº¸ï¼Œ1æ˜¯bingï¼Œ2æ˜¯éšæœºé£æ™¯ï¼Œ3æ˜¯éšæœºäºŒåˆºèˆğŸ‘»\n&lt;el-radio label=&quot;0&quot; size=&quot;large&quot; border&gt;é»˜è®¤å£çº¸&lt;/el-radio&gt;&lt;el-radio label=&quot;1&quot; size=&quot;large&quot; border&gt;æ¯æ—¥ä¸€å›¾&lt;/el-radio&gt;&lt;el-radio label=&quot;2&quot; size=&quot;large&quot; border&gt;éšæœºé£æ™¯&lt;/el-radio&gt;&lt;el-radio label=&quot;3&quot; size=&quot;large&quot; border&gt;éšæœºåŠ¨æ¼«&lt;/el-radio&gt;\n\nå’³å’³ï¼Œæ‰å‘ç°åŸæ¥èƒŒæ™¯å›¾å¯ä»¥åœ¨å‰ç«¯ç›´æ¥è®¾ç½®å‘€ï¼Ÿç‚¹å‡»å·¦ä¾§ç•™è¨€ï¼Œå†ç‚¹å‡»æ—¶é—´èƒ¶å›Šå³ä¾§çš„è®¾ç½®æŒ‰é’®ã€‚ä¸è¿‡ç›®å‰åªèƒ½è®¾ç½®è¿™ä¸€ä¸ªå†…å®¹ï¼Œè€Œä¸”è¿™ä¸ªè®¾ç½®éšç€ç½‘é¡µåˆ·æ–°ä¼šè¢«è¦†ç›–æ‰ï¼Œå»ºè®®åœ¨åç«¯è®¾ç½®å¥½é»˜è®¤çš„å£çº¸\n\n9.æ—¶é—´èƒ¶å›Šå¢åŠ ç«™ç‚¹è¿è¡Œæ—¶é—´ç‚¹å‡»å·¦ä¾§çš„ç½‘ç«™ä»‹ç»ï¼ˆå°±æ˜¯ç¤¾äº¤é“¾æ¥ä¸Šé¢é‚£ä¸ªé¢æ¿ï¼‰èƒ½æ‰“å¼€æ—¶é—´èƒ¶å›Šã€‚é»˜è®¤æ˜¾ç¤ºçš„ä¿¡æ¯æŒºä¸é”™çš„ï¼Œä½†æ˜¯è¿˜ç©ºäº†ä¸€å—ï¼Œè¿™ä¸å¾—æŠŠç«™ç‚¹è¿è¡Œæ—¶é—´ç»™åŠ ä¸Šï¼Ÿ\n\nå‚è€ƒ https://blog.csdn.net/jay_chou345/article/details/110201897\n\nå°†è¿™ä¸€ä¸²ä»£ç æ·»åŠ åˆ°src/components/TimeCapsuleçš„&lt;script setup&gt;å’Œ&lt;/script&gt;ä¹‹é—´\n// ç«™ç‚¹å­˜æ´»æ—¶é—´let runTime = &#123;  year: import.meta.env.VITE_SITE_YAER,  month: import.meta.env.VITE_SITE_MONTH,  day: import.meta.env.VITE_SITE_DAY,&#125;function secondToDate(second) &#123;  if (!second) &#123;      return 0;  &#125;  var time = new Array(0, 0, 0, 0, 0);  if (second &gt;= 365 * 24 * 3600) &#123;      time[0] = parseInt(second / (365 * 24 * 3600));      second %= 365 * 24 * 3600;  &#125;  if (second &gt;= 24 * 3600) &#123;      time[1] = parseInt(second / (24 * 3600));      second %= 24 * 3600;  &#125;  if (second &gt;= 3600) &#123;      time[2] = parseInt(second / 3600);      second %= 3600;  &#125;  if (second &gt;= 60) &#123;      time[3] = parseInt(second / 60);      second %= 60;  &#125;  if (second &gt; 0) &#123;      time[4] = second;  &#125;  return time;&#125;function setTime() &#123;  //monthè¦å°‘ä¸€ä¸ªæœˆï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜ã€‚å³monthçš„èŒƒå›´ä¸º 0-11  var create_time = Math.round(new Date(Date.UTC(runTime.year, runTime.month,runTime.day, 0, 0, 0)).getTime() / 1000);  var timestamp = Math.round((new Date().getTime() + 8 * 60 * 60 * 1000) / 1000);  var currentTime = secondToDate((  timestamp-create_time));  var currentTimeHtml = currentTime[0] + &#x27; å¹´ &#x27; + currentTime[1] + &#x27; å¤© &#x27;      + currentTime[2] + &#x27; æ—¶ &#x27; + currentTime[3] + &#x27; åˆ† &#x27; + currentTime[4]      + &#x27; ç§’&#x27;;  if(document.getElementById(&quot;htmer_time&quot;)!=null)      document.getElementById(&quot;htmer_time&quot;).innerHTML = &quot;æœ¬ç«™å·²ç»è‹Ÿæ´» &quot;+currentTimeHtml;&#125;// å³æ—¶åˆ·æ–°ç«™ç‚¹å­˜æ´»æ—¶é—´setInterval(setTime, 1000);\n\néšååœ¨é¡¶éƒ¨çš„æ¨¡æ¿æœ«å°¾çš„&lt;/div&gt;å‰æ·»åŠ å¦‚ä¸‹ä»£ç \n&lt;span class=&quot;text&quot;&gt;  &lt;p id=&quot;htmer_time&quot;&gt;&lt;/p&gt;&lt;/span&gt;\n\nç¯å¢ƒå˜é‡.envä¸­æ·»åŠ å¦‚ä¸‹å­—æ®µ\n# ç«™ç‚¹è¿è¡Œæ—¶é—´ï¼ˆæ˜¾ç¤ºåœ¨æ—¶é—´èƒ¶å›Šä¸­ï¼‰## æ³¨æ„ï¼šæœˆä»½çš„èŒƒå›´æ˜¯0-11ï¼Œå¦åˆ™ä¼šæœ‰bugVITE_SITE_YAER = 2023VITE_SITE_MONTH = 0VITE_SITE_DAY  = 1\n\nè¿™æ ·å°±OKå•¦ï¼\n\nå½“æˆ‘å¼€äº†ä¸€ä¸ªpull requeståï¼Œæºé¡¹ç›®ä½œè€…æä¾›äº†ä¸€ä¸ªæ›´ç®€å•çš„ä»£ç ç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬æ›´åŠ ç²¾ç®€ï¼Œä½†æ˜¯ä¸èƒ½æ˜¾ç¤ºç§’æ•°ï¼Œä¸è¿‡å®Œå…¨å¤Ÿç”¨äº†ï¼\n\nhttps://github.com/imsyy/home/pull/63\n\nç¯å¢ƒå˜é‡\nVITE_SITE_START = &quot;2020-10-24&quot;\n\nvueä¸­ä»£ç \n&lt;span class=&quot;text&quot;&gt;    &lt;p id=&quot;htmer_time&quot;&gt;&#123;&#123; startDateText &#125;&#125;&lt;/p&gt;&lt;/span&gt;\n\nlet startDate = ref(import.meta.env.VITE_SITE_START);let startDateText = ref(null);// å»ºç«™æ—¥æœŸç»Ÿè®¡å‡½æ•°const siteDateStatistics = (startDate) =&gt; &#123;    const currentDate = new Date();    const differenceInTime = currentDate.getTime() - startDate.getTime();    const differenceInDays = differenceInTime / (1000 * 3600 * 24);    const differenceInMonths = differenceInDays / 30;    const differenceInYears = differenceInMonths / 12;    if (differenceInYears &gt;= 1) &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.floor(differenceInYears)&#125; å¹´ $&#123;Math.floor(differenceInMonths % 12)&#125; æœˆ $&#123;Math.round(differenceInDays % 30)&#125; å¤©`;    &#125; else if (differenceInMonths &gt;= 1) &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.floor(differenceInMonths)&#125; æœˆ $&#123;Math.round(differenceInDays % 30)&#125; å¤©`;    &#125; else &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.round(differenceInDays)&#125; å¤©`;    &#125;&#125;onMounted(() =&gt; &#123;    startDateText.value = siteDateStatistics(new Date(startDate.value));&#125;);\n\n\n\n10.å…³é—­æ–°æ˜¥ç¯ç¬¼æ˜¥èŠ‚å‡æœŸç»“æŸè¾£ï¼æˆ‘ä»¬é¦–é¡µçš„æ–°æ˜¥ç¯ç¬¼ä¹Ÿè¦å–ä¸‹æ¥äº†\næ‰¾åˆ°App.vue,æ³¨é‡Šæ‰é‡Œé¢çš„import\n// æ–°æ˜¥ç¯ç¬¼// import &quot;@/utils/lantern.js&quot;;\n\n\nMoreâ€¦æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºæé—®\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["hexo","git","vercel"]},{"title":"ã€Dockerã€‘é…ç½®wiki js","url":"/2023/02/02/docker/7docker%E9%83%A8%E7%BD%B2wikijs/","content":"wikijsæ˜¯ä¸€ä¸ªåœ¨çº¿å¤šäººåä½œï¼ˆå¸¦gitç‰ˆæœ¬ç®¡ç†ï¼‰çš„wikiå¥—ä»¶\n\n\nç›¸æ¯”äºå…¶ä»–wikiçš„å±•ç¤ºåŠŸèƒ½ä¸ºä¸»ï¼Œwikijså°†æƒé™ç®¡ç†+å¤šäººåä½œä½œä¸ºäº†é¦–ä¸ªè¦ç´ ï¼Œå…¶æ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘å™¨&#x2F;mardownç¼–è¾‘å™¨&#x2F;htmlæºç ç¼–è¾‘\n1.Docker-cliéƒ¨ç½²\nåœ¨äº‘æœåŠ¡å™¨å®‰è£… https://docs.requarks.io/install/ubuntu\n\nå¯ä»¥è·Ÿç€å®˜æ–¹çš„æŒ‡ä»¤èµ°ï¼Œä¸‹é¢èŠ‚é€‰äº†æœ€ç»ˆ3ä¸ªåˆ›å»ºå®¹å™¨çš„å‘½ä»¤\n\né…ç½®å¯†é’¥\nmkdir -p /etc/wiki# Generate DB secretopenssl rand -base64 32 &gt; /etc/wiki/.db-secret# Create internal docker networkdocker network create wikinet# Create data volume for PostgreSQLdocker volume create pgdata\n\né…ç½®æ•°æ®åº“\ndocker create \\--name=db \\-e POSTGRES_DB=wiki \\-e POSTGRES_USER=wiki \\-e POSTGRES_PASSWORD_FILE=/etc/wiki/.db-secret \\-v /etc/wiki/.db-secret:/etc/wiki/.db-secret:ro \\-v pgdata:/var/lib/postgresql/data \\--restart=unless-stopped \\-h db \\--network=wikinet \\postgres:11\né…ç½®ä¸»å®¹å™¨\ndocker create --name=wiki \\-e DB_TYPE=postgres \\-e DB_HOST=db \\-e DB_PORT=5432 \\-e DB_PASS_FILE=/etc/wiki/.db-secret \\-v /etc/wiki/.db-secret:/etc/wiki/.db-secret:ro \\-e DB_USER=wiki \\-e DB_NAME=wiki \\-e UPGRADE_COMPANION=1 \\--restart=unless-stopped \\-h wiki \\--network=wikinet \\-p 3000:3000 -p 3443:3443 \\ghcr.io/requarks/wiki:2\n\nå‡çº§ä¼´ä¾£\ndocker create \\--name=wiki-update-companion \\-v /var/run/docker.sock:/var/run/docker.sock:ro \\--restart=unless-stopped \\-h wiki-update-companion \\--network=wikinet \\ghcr.io/requarks/wiki-update-companion:latest\n\né…ç½®é˜²ç«å¢™\nsudo ufw allow sshsudo ufw allow httpsudo ufw allow httpssudo ufw --force enable\n\nè¿è¡Œå®¹å™¨\ndocker start dbdocker start wikidocker start wiki-update-companion\n\nåˆ°è¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥ç”¨3000ç«¯å£è®¿é—®äº†\n2.docker-composeéƒ¨ç½²ï¼ˆæ¨èï¼‰https://docs.requarks.io/install/docker\ndocker-composeæœ€å¥½çš„ä¸€ç‚¹å°±æ˜¯æ–¹ä¾¿ç®¡ç†ï¼Œä¸éœ€è¦å•ç‹¬ç®¡ç†ä¸Šé¢çš„3ä¸ªå®¹å™¨ï¼Œè€Œæ˜¯ç”¨ä¸€æ¡å‘½ä»¤å°±èƒ½åŒæ—¶å¯åœå®¹å™¨\nversion: &quot;3&quot;services:  db:    image: postgres:11-alpine    environment:      POSTGRES_DB: wiki      POSTGRES_PASSWORD: wikijsrocks      POSTGRES_USER: wikijs    logging:      driver: &quot;none&quot;    restart: unless-stopped    volumes:      - db-data:/var/lib/postgresql/data  wiki:    image: ghcr.io/requarks/wiki:2    depends_on:      - db    environment:      DB_TYPE: postgres      DB_HOST: db      DB_PORT: 5432      DB_USER: wikijs      DB_PASS: wikijsrocks      DB_NAME: wiki    restart: unless-stopped    ports:      - &quot;80:3000&quot;volumes:  db-data:\n\n3.é…ç½®è¯ä¹¦letâ€™s encrpyé…ç½®è¯ä¹¦éœ€è¦å¤šæŒ‡å®šä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œåˆ†åˆ«æ˜¯ä½ çš„åŸŸåä»¥åŠç”¨äºç”³è¯·è¯ä¹¦çš„é‚®ç®±\n-e &quot;LETSENCRYPT_DOMAIN=wiki.example.com&quot; \\-e &quot;LETSENCRYPT_EMAIL=admin@example.com&quot; \\-p 443:3443\n\nå¦‚æœä¸è¿™ä¹ˆåšï¼Œåˆ™éœ€è¦åœ¨nginxåå‘ä»£ç†ä¸Šé…ç½®è¯ä¹¦\n4.è¯„è®ºé»˜è®¤çš„è¯„è®ºè¿å›å¤éƒ½ä¸æ”¯æŒï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªç®¡ç†é¡µé¢å’Œé€šçŸ¥ï¼Œå¦‚æœè¦æŠŠwikiå±•ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±éå¸¸ä¸æ–¹ä¾¿\nå»ºè®®é…ç½®ä¸€ä¸‹artalkè¯„è®ºç³»ç»Ÿ æ•™ç¨‹\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["wikijs","Docker"]},{"title":"ã€Dockerã€‘é…ç½®CentOSå®¹å™¨æ—¶å‡ºç° Error Failed to download metadata for repo 'appstream' Cannot prepare internal mirrorlist","url":"/2023/02/23/docker/8docker%E5%AE%89%E8%A3%85centos%E9%81%87%E5%88%B0%E6%8A%A5%E9%94%99/","content":"æœ¬ç«™ç»å¸¸æ¬è¿ä¸€äº›å…¶ä»–åšä¸»æ–‡ç« ï¼Œä¸»è¦æ˜¯ä¸ºäº†æŒä¹…åŒ–è®¿é—®ã€‚é¿å…æ—¥åä»–äººåˆ æ–‡oråŸæ–‡æ— æ³•è®¿é—®ï¼›æ‰€æœ‰æ¬è¿çš„æ–‡ç« éƒ½ä¼šå†™æ˜åŸæ–‡åœ°å€ï¼Œå¹¶ä¸”ä¸ä¼šå±•ç¤ºæœ¬ç«™çš„copyright_info\n\n\nä¸‹æ–‡æ‰€å‡ºç°çš„åœºæ™¯ï¼Œæ˜¯æˆ‘åœ¨linuxä¸Šä½¿ç”¨dockerå®‰è£…centoså®¹å™¨æ—¶å‡ºç°çš„ï¼\n\nâœ¨åœ¨å­¦ä¹ ä½¿ç”¨ docker æŠ€æœ¯è¿‡ç¨‹ä¸­ï¼ŒåŸºäº centos é•œåƒè‡ªå®šä¹‰æ–°çš„é•œåƒï¼Œå…¶ä¸­åŸºç¡€é•œåƒ centos éœ€è¦æå‰å®‰è£…å¥½ vim å’Œ net-toolsï¼Œç„¶è€Œåœ¨åˆšå¼€å§‹é€šè¿‡ yum -y install vim å®‰è£… vim æ—¶ï¼Œä¾¿å‡ºç°äº†é”™è¯¯æç¤ºä¿¡æ¯ï¼š\nError: Failed to download metadata for repo &#39;appstream&#39;: Cannot prepare internal mirrorlist: No URLs in mirrorlist\n\nâœ¨ä¸Šé¢çš„æŠ¥é”™ä¿¡æ¯æ„æ€æ˜¯ï¼Œä»ä»“åº“ â€˜appstreamâ€™ ä¸‹è½½å…ƒæ•°æ®å¤±è´¥ï¼šç”±äºé•œåƒåˆ—è¡¨ä¸­æ²¡æœ‰ URLï¼Œä¸èƒ½å‡†å¤‡å†…éƒ¨é•œåƒåˆ—è¡¨ã€‚\nğŸ¥é—®é¢˜åˆ†æï¼š\nâœ¨ç¬¬ä¸€ç§å¯èƒ½çš„æƒ…å†µä¾¿æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ã€‚æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿æ¥å¤–éƒ¨ç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨ ping baidu.com æŸ¥çœ‹æ˜¯å¦æœ‰ä¸¢åŒ…æƒ…å†µã€‚å¦‚æœä¸¢åŒ…ï¼Œåˆ™è¿›ä¸€æ­¥æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼›å¦‚æœæ²¡æœ‰ä¸¢åŒ…ï¼Œç»§ç»­é˜…è¯»ä¸‹æ–‡\nâœ¨é‚£ä¹ˆç¬¬äºŒç§æƒ…å†µï¼Œä¾¿æ˜¯ CentOS å·²ç»åœæ­¢ç»´æŠ¤çš„é—®é¢˜ã€‚2020 å¹´ 12 æœˆ 8 å·ï¼ŒCentOS å®˜æ–¹å®£å¸ƒäº†åœæ­¢ç»´æŠ¤ CentOS Linux çš„è®¡åˆ’ï¼Œå¹¶æ¨å‡ºäº† CentOS Stream é¡¹ç›®ï¼ŒCentOS Linux 8 ä½œä¸º RHEL 8 çš„å¤åˆ»ç‰ˆæœ¬ï¼Œç”Ÿå‘½å‘¨æœŸç¼©çŸ­ï¼Œäº 2021 å¹´ 12 æœˆ 31 æ—¥åœæ­¢æ›´æ–°å¹¶åœæ­¢ç»´æŠ¤ï¼ˆEOLï¼‰ï¼Œ\næ›´å¤šçš„ä¿¡æ¯å¯ä»¥æŸ¥çœ‹ CentOS å®˜æ–¹å…¬å‘Šã€‚å¦‚æœéœ€è¦æ›´æ–° CentOSï¼Œéœ€è¦å°†é•œåƒä» mirror.centos.org æ›´æ”¹ä¸º vault.centos.org\n\nğŸ¥é‚£ä¹ˆé’ˆå¯¹ä¸Šé¢æåˆ°çš„ç¬¬äºŒç§æƒ…å†µï¼Œç»™å‡ºçš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š\nğŸ”” é¦–å…ˆï¼Œè¿›å…¥åˆ° yum çš„ repos ç›®å½•\ncd /etc/yum.repos.d/\n\nğŸ””å…¶æ¬¡ï¼Œä¿®æ”¹ centos æ–‡ä»¶å†…å®¹\nsed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*\n\nğŸ”” ç„¶åï¼Œç”Ÿæˆç¼“å­˜æ›´æ–°ï¼ˆç¬¬ä¸€æ¬¡æ›´æ–°ï¼Œé€Ÿåº¦ç¨å¾®æœ‰ç‚¹æ…¢ï¼Œè€å¿ƒç­‰å¾…ä¸¤åˆ†é’Ÿå·¦å³ï¼‰\nyum makecache\n\nğŸ”” æœ€åï¼Œè¿è¡Œ yum update å¹¶é‡æ–°å®‰è£… vim\nyum update -yyum -y install vim\n\nğŸ‰è‡³æ­¤ï¼Œé’ˆå¯¹ç¬¬äºŒç§æƒ…å†µå‡ºç°çš„é—®é¢˜æˆåŠŸè§£å†³ï¼\nåŸæ–‡ä½œè€…ï¼šReadThroughLifeåŸæ–‡åœ°å€ï¼šhttps://blog.csdn.net/weixin_43252521/article/details/124409151\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["Docker","CentOS"]},{"title":"ã€leetcodeã€‘001.ä¸¤æ•°ä¹‹å’Œï¼ˆCè¯­è¨€ï¼Œè¶…è¯¦ç»†ï¼‰","url":"/2021/10/31/leetcode/001%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/","content":"è¿™æ˜¯åˆå­¦Cæ—¶å€™å†™çš„é¢˜è§£ï¼Œå¯èƒ½æœ‰æ€ç»´æ¼æ´ï¼Œåé¢é‡æ–°åˆ·é¢˜çš„æ—¶å€™ä¼šæ›´æ”¹ï¼\n\n\n\nPSï¼šå·²é‡æ–°æ›´æ­£å¹¶æ·»åŠ äº†C++çš„å“ˆå¸Œè§£æ³•\n\n[toc]\n\né¢˜ç›®æ¥æºä¸¤æ•°ä¹‹å’Œ leetcode-001\nå¦‚ä¸‹å›¾æ‰€ç¤º\n\nå³ä¾§ç»™å‡ºäº†é¢˜ç›®çš„åŸºæœ¬æ¨¡æ¿\n/** * Note: The returned array must be malloced, assume caller calls free(). */int* twoSum(int* nums, int numsSize, int target, int* returnSize)&#123;&#125;\n\n\né¢˜ç›®è¦æ±‚åšé¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¢³ç†å‡ºé¢˜ç›®çš„å„é¡¹è¦æ±‚\nç®—æ³•é¢˜ç›®éœ€è¦æˆ‘ä»¬éå¸¸ç»†è‡´ï¼Œå› ä¸ºä¸€ä¸ªå°è¦æ±‚çš„æœªå®Œæˆï¼Œå°±ä¼šå¯¼è‡´æ ¼å¼å‡ºé—®é¢˜æˆ–è€…ç»“æœå‡ºé—®é¢˜ï¼Œæ— æ³•é€šè¿‡ç³»ç»Ÿçš„æµ‹è¯•\né¢˜ç›®è¦æ±‚å¦‚ä¸‹ï¼š\n\nåœ¨ç»™å®šæ•°ç»„numsä¸­æ‰¾å‡ºç›¸åŠ ä¸ºtargetçš„ä¸¤ä¸ªæ•°å­—\nåŒä¸€ä¸ªæ•°å­—ä¸èƒ½é‡å¤\nå‡è®¾æ¯ä¸€ä¸ªtargetåªå¯¹åº”ä¸€ç§ç­”æ¡ˆ\næ‰¾åˆ°æ•°å­—åè¿”å›å…ƒç´ çš„ä¸‹æ ‡\nä¸èƒ½æ›´æ”¹æ‘¸æ¿é‡Œçš„ä»£ç \n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„éšè—æ¡ä»¶ï¼\n\nç›¸åŠ çš„ä¸¤ä¸ªæ•°å­—åœ¨æ•°ç»„ä¸­æ˜¯è¿ç»­çš„\n\nè¿™ä¸ªæ¡ä»¶æ˜¯è§‚å¯Ÿ3ä¸ªç¤ºä¾‹å¾—å‡ºçš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡ä»¶ï¼Œè¿™é“é¢˜ç›®å°±éœ€è¦æˆ‘ä»¬åœ¨æ•°ç»„ä¸­è¿›è¡Œå®Œå…¨æœç´¢ï¼\næˆ‘åšè¿™é“é¢˜ç›®çš„æ—¶å€™å°±å¡åœ¨äº†è¿™ä¸ªåœ°æ–¹ï¼\n\nå®ç°æ­¥éª¤1.æ¨¡æ¿ä¸­å››ä¸ªå€¼çš„æ„ä¹‰é¦–å…ˆæˆ‘ä»¬è¦å¼„æ˜ç™½æ‘¸æ¿é‡Œçš„4ä¸ªå€¼åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆä¸œè¥¿\nint* twoSum(int* nums, int numsSize, int target, int* returnSize)\n\n\nint* numsâ€”â€”numsæ•°ç»„ï¼ˆ æ­¤å½¢å¼ç­‰åŒäºint nums[] )\nnumsSizeâ€”â€”æ•°ç»„å…ƒç´ çš„ä¸ªæ•°\ntargetâ€”â€”éœ€è¦æ±‚å’Œçš„ç»“æœ\nint* returnSizeâ€”â€”è¿”å›å€¼çš„ä¸ªæ•°ï¼ˆè¿™ä¸ªä¸å¯ä»¥çœç•¥ï¼ï¼‰\n\nå†æ¥çœ‹é¢˜ç›®çš„è¦æ±‚\n\néœ€è¦åœ¨ç»™å®šæ•°ç»„ä¸­æ‰¾åˆ°ç›¸åŠ &#x3D;targetçš„ä¸¤ä¸ªè¿ç»­çš„æ•°å­—\n\n2.åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªè¿ç»­çš„å…ƒç´ ä¸€èˆ¬åœ¨æ•°ç»„é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬éƒ½ä¼šæƒ³åˆ°ä½¿ç”¨forå¾ªç¯\nè¿™é‡Œéœ€è¦æŸ¥æ‰¾ä¸¤ä¸ªè¿ç»­çš„æ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªåµŒå¥—çš„forå¾ªç¯ä»¥åŠä¸¤ä¸ªå¾ªç¯å˜é‡æ¥å®ç°\n\næ›´æ–°ï¼šå®é™…ä¸Šè¿™ä¸¤ä¸ªæ•°å­—ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œç”¨åŒå¾ªç¯çš„æš´åŠ›å†™æ³•ï¼Œéè¿ç»­æ•°å­—å…¶å®ä¹Ÿæ˜¯èƒ½æå®šçš„\n\nint i=0ï¼›int j=i+1;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œjæ¯”iå¤§äº†1ï¼Œä¸ºäº†é˜²æ­¢æ•°ç»„è¶Šç•Œè®¿é—®\nforå¾ªç¯é‡Œé¢çš„åˆ¤æ–­å˜é‡ä¹Ÿè¦ç›¸åº”çš„å·®1\nfor(int i = 0; i &lt; numsSize - 1; i++) &#123;     for(int j = i+1; j &lt; numsSize; j++)     &#123;              &#125; &#125;\n\n3.åˆ¤æ–­ç›¸åŠ æ˜¯å¦ç­‰äºtargetåœ¨æ•°ç»„ä¸­æ‰¾åˆ°å…ƒç´ åï¼Œéœ€è¦åˆ¤æ–­å®ƒä»¬ä¸¤ä¸ªç›¸åŠ æ˜¯å¦ç­‰äºtarget\nif(nums[i] + nums[j] == target)\n\n4.è¿”å›å…ƒç´ ä¸‹æ ‡å½“ä»£ç æˆåŠŸæ‰¾åˆ°äº†ä¸¤ä¸ªç›¸åŠ ç­‰äºtargetçš„å…ƒç´ åï¼Œæˆ‘ä»¬è¦è¿”å›è¿™ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡\nè¿™é‡Œå°±éœ€è¦ä¸€ä¸ªæ–°çš„æ•°ç»„æ¥æ¥æ”¶è¿™ä¸¤ä¸ªä¸‹æ ‡ï¼Œè¿™æ¯”å•çº¯çš„ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ›´æ–¹ä¾¿\nåˆ›å»ºè¿™ä¸ªæ•°ç»„æœ‰ä¸¤ç§æ–¹æ³•\n\nä½¿ç”¨arr[2]æ¥åˆ›å»º\nä½¿ç”¨mallocå‡½æ•°æ¥åˆ›å»º\n\nå…¶ä¸­æ–¹æ³•äºŒï¼Œæ˜¯é¢˜ç›®æ‰€ç»™æç¤ºé‡Œçš„å‡½æ•°ï¼Œåç»­å°†æåŠ\n/* Note: The returned array must be malloced, assume caller calls free(). */\n\n\nä»£ç ç¤ºä¾‹1\næ³¨ï¼šleetcodeçš„å‡½æ•°é¢˜ç›®åªéœ€è¦è¡¥å…¨è‡ªå®šä¹‰å‡½æ•°ï¼Œæ— éœ€å†™mainå‡½æ•°\n\nåœ¨ç¤ºä¾‹1é‡Œé¢ï¼Œä½¿ç”¨æ™®é€šçš„æ–¹å¼åˆ›å»ºresult[2]æ•°ç»„\nint* twoSum(int* nums, int numsSize, int target,int* returnSize) &#123;    static int result[2] = &#123;0&#125;;//staticä¿®é¥°åï¼Œreturnçš„åœ°å€æ‰èƒ½è¢«mainæ¥æ”¶    for(int i = 0; i &lt; numsSize - 1; i++)    &#123;        for(int j = i+1; j &lt; numsSize; j++)        &#123;            if(nums[i] + nums[j] == target)            &#123;                result[0] = i;                result[1] = j;                *returnSize = 2;//è¿™ä¸ªä¸èƒ½åˆ é™¤                return result;            &#125;        &#125;    &#125;    return NULL;&#125;\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨mainå‡½æ•°é‡Œé¢ä½¿ç”¨resultæ•°ç»„çš„å€¼ï¼Œæ‰€ä»¥éœ€è¦ç”¨staticæ¥ä¿®é¥°è¿™ä¸ªæ•°ç»„\nä¸ç”¨staticä¿®é¥°çš„è¯ï¼Œå‡ºäº†è‡ªå®šä¹‰å‡½æ•°åï¼Œresultæ•°ç»„çš„å†…å­˜ç©ºé—´å°†è¢«é‡Šæ”¾\nå³ä¾¿æˆ‘ä»¬returnäº†è¿™ä¸ªæ•°ç»„ï¼Œå®ƒä¹Ÿä¸èƒ½è¢«ä¸»å‡½æ•°æ¥æ”¶\n\nstaticçš„ä½œç”¨\nä¿®é¥°å‡½æ•°\nä¿®é¥°å…¨å±€å˜é‡\nä¿®é¥°å±€éƒ¨å˜é‡\n\nè¿™é‡Œä½¿ç”¨çš„æ˜¯staticçš„ç¬¬3ä¸ªä½œç”¨ï¼Œå°†å±€éƒ¨å˜é‡æ•°ç»„resultï¼Œå˜æˆé™æ€å±€éƒ¨å˜é‡\nå³æ•°ç»„resultä¸ä¼šåœ¨å‡ºè‡ªå®šä¹‰å‡½æ•°åé”€æ¯\n\n*returnSizeæ˜¯ä»€ä¹ˆï¼Ÿ\nå±å¹•å‰çš„ä½ æ˜¯å¦å’Œæˆ‘æœ‰ä¸€æ ·çš„ç–‘æƒ‘ï¼Œæ­¤*returnSizeåœ¨è‡ªå®šä¹‰å‡½æ•°é‡Œé¢æ²¡æœ‰æ„ä¹‰\né‚£ä¸ºä»€ä¹ˆä¸èƒ½åˆ é™¤ï¼Ÿ\n\nè¦çŸ¥é“ï¼Œè¿™é‡Œçš„*returnSizeæ˜¯é¢˜ç›®çš„æ¨¡æ¿ç»™æˆ‘ä»¬çš„\nè€Œä¸”é¢˜ç›®æ²¡æœ‰è¦æ±‚æˆ‘ä»¬ä¹¦å†™mainå‡½æ•°\nå…¶å®è¿™é‡Œçš„*returnSizeåœ¨mainå‡½æ•°æ˜¯æœ‰å˜é‡ä¼ è¿‡æ¥çš„\nåˆ é™¤åè‡ªå®šä¹‰å‡½æ•°é‡Œç¼ºå°‘å˜é‡æ¥æ¥å—ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œè‡ªç„¶ä¼šæŠ¥é”™\n*returnSize = 2;\n\nåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ifè¯­å¥ä¸­å°†å®ƒå®šä¹‰ä¸º2ï¼Œå³ä¸ºè¿”å›å€¼çš„ä¸ªæ•°\nå…·ä½“çš„åˆ†æå‚è€ƒè¿™ç¯‡åšå®¢&#x3D;&#x3D;&gt; é“¾æ¥\n\nä»£ç ç¤ºä¾‹2è¯´ç¬¬äºŒç§æ–¹æ³•å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå¼„æ˜ç™½mallocå‡½æ•°æ˜¯ä»€ä¹ˆ\n\nä»€ä¹ˆæ˜¯mallocå‡½æ•°ï¼Ÿåœ¨cplusplusç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°mallocå‡½æ•°çš„å®šä¹‰\nè¯¥å‡½æ•°å¯¹åº”çš„å¤´æ–‡ä»¶ä¸ºcstdlibï¼Œå³cè¯­è¨€ä¸­çš„&lt;stdlib.h&gt;\n\nå®ƒçš„ä½œç”¨ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¯¹åº”å­—èŠ‚çš„ç©ºé—´ï¼Œèµ‹äºˆç»™ä¸€ä¸ªæŒ‡é’ˆå˜é‡\nint *pa = malloc(sizeof(int));\n\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„æ„ä¹‰æ˜¯ï¼Œå¼€è¾Ÿä¸€ä¸ªintç±»å‹ï¼ˆå³4ä¸ªå­—èŠ‚ï¼‰çš„ç©ºé—´ï¼Œèµ‹ç»™æŒ‡é’ˆå˜é‡*pa\n\nå…¶ä¸­çš„sizeof(int)å¯ä»¥æ¢æˆ(4)ï¼›ä¹Ÿå¯ä»¥åœ¨åé¢ä¹˜ä¸Šä¸€ä¸ªæ•°sizeof(int)*2è¡¨ç¤º8ä¸ªå­—èŠ‚\n\næœ¬é¢˜éœ€è¦çš„æ˜¯å­˜æ”¾ä¸¤ä¸ªintæ•´å½¢çš„æ•°ç»„ï¼Œmallocå‡½æ•°å¯ä»¥è¿™ä¹ˆå†™\nint *num = malloc(sizeof(int)*2);\n\ncpluspluså¯¹mallocå‡½æ•°ä¸­çš„å®šä¹‰é‡Œæœ‰ä¸€å¥è¯\n\nIf the function failed to allocate the requested block of memory, a null pointer is returned.\n\nå¦‚æœæŒ‡é’ˆåˆ†é…é”™è¯¯ï¼Œå‡½æ•°å°†è¿”å›ä¸€ä¸ªNULLï¼Œç©ºæŒ‡é’ˆ\n\nmallocä½¿ç”¨åfreeé‡Šæ”¾åœ¨ä½¿ç”¨å®Œmallocå‡½æ•°å\n\néœ€è¦ç”¨freeå‡½æ•°æ¥é‡Šæ”¾mallocåˆ›å»ºçš„å†…å­˜ç©ºé—´\néœ€è¦å°†åˆ›å»ºçš„æŒ‡é’ˆå˜é‡æŒ‡å‘ç©ºæŒ‡é’ˆï¼Œä»¥é˜²ç¨‹åºé”™è¯¯è°ƒç”¨\n\nfree(pa);pa = NULL;\n\nè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯é…å¯¹çš„\n\nå¦‚æœç”³è¯·åä¸é‡Šæ”¾ï¼Œä¼šå†…å­˜æ³„éœ²\n\nå¦‚æœæ— æ•…é‡Šæ”¾ï¼Œé‚£å°±æ˜¯ä»€ä¹ˆä¹Ÿæ²¡æœ‰åš\n\n\nå†…å­˜æ³„æ¼å‚è€ƒè¿™ç¯‡åšå®¢ &#x3D;&#x3D;&gt; é“¾æ¥\n\nä»¥ä¸‹å°±æ˜¯æ–¹æ³•2çš„å®Œæ•´ä»£ç \n/** * Note: The returned array must be malloced, assume caller calls free(). */int* twoSum(int* nums, int numsSize, int target, int* returnSize)&#123;    int *num = malloc(sizeof(int)*2);    for(int i = 0; i &lt; numsSize - 1; i++)    &#123;        for(int j = i + 1; j &lt; numsSize; j++)        &#123;            if(nums[i] + nums[j] == target)            &#123;                num[0] = i;                num[1] = j;                *returnSize = 2;                return num;            &#125;        &#125;    &#125;    return NULL;&#125;\n\nä¸ºä»€ä¹ˆæœ¬é¢˜ä½¿ç”¨å®Œmallocå‡½æ•°åæ²¡æœ‰freeå‘¢ï¼Ÿ\nåŸå› è¿˜æ˜¯åœ¨æœ¬é¢˜çš„æç¤ºé‡Œ\n/*Note: The returned array must be malloced, assume caller calls free()*/\n\nè¿™ä¸ªè¯­å¥çš„å¤§æ¦‚æ„æ€åº”è¯¥æ˜¯ï¼šå‡è®¾mainå‡½æ•°é‡Œé¢å·²æœ‰ä¸€ä¸ªfreeå‡½æ•°æ¥é‡Šæ”¾å†…å­˜\næ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±åŠ ä¸Šfreeå‡½æ•°;\n\nè‡ªå·±å†™ä»£ç çš„æ—¶å€™ä¸€å®šåˆ«å¿˜äº†åŠ å“¦ï¼\n\n\nåˆå­¦æ€»ç»“è™½ç„¶è¿™åªæ˜¯leetcodeçš„ç¬¬ä¸€é¢˜ï¼Œç½‘ç«™æ‰“ä¸Šçš„éš¾åº¦æ˜¯â€œç®€å•â€\nä½†å¯¹äºæˆ‘è¿™ä¸ªå­¦è‰ºä¸ç²¾çš„åˆå­¦è€…æ¥è¯´ï¼Œè¿˜æ˜¯è´¹äº†ä¸€ç•ªåŠŸå¤«å»å®Œæˆè¿™é“é¢˜å¹¶ç†è§£å®ƒ\næœ¬ç‰‡åšå®¢å°±æ˜¯æˆ‘æ±‚è§£è¿™é“é¢˜çš„è¿‡ç¨‹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©\n\nå°å£°åæ§½ï¼šcsdnå¤ªå¤šç¹æ‚çš„ä¸œè¥¿äº†ï¼Œæœ‰çš„åšå®¢ä»£ç ä¸è´´ä»£ç å—ï¼Œæœ‰çš„ç­”æ¡ˆä»£ç éƒ½æ˜¯é”™çš„ã€‚\nè¿˜æœ‰äº›äººå°±è¿™ä¹ˆä¸€é“é¢˜çš„ç­”æ¡ˆéƒ½ç»™ä½ ä¸Šä¼ ä¸€ä¸ªä»˜è´¹æ–‡ä»¶ï¼ˆæ— å¤´åƒæ— idæ— ç®€ä»‹ï¼Œä¸Šä¼ å‡ åƒä¸ªèµ„æºï¼Œæ€€ç–‘æ˜¯æœºå™¨äººçˆ¬è™«ï¼‰\n\nä¸ç®¡æ€ä¹ˆæ ·ï¼Œè‡³å°‘æˆ‘å¼„æ‡‚è¿™é“é¢˜å•¦ï¼\næ„Ÿè°¢å¼•ç”¨çš„ä¸¤ç¯‡åšå®¢çš„ä½œè€…ï¼Œè‹¥ä¸æ˜¯ä»–ä»¬ï¼Œæˆ‘ä¹Ÿå¼„ä¸æ˜ç™½è¿™é“é¢˜ï¼\nç‚¹ä¸ªğŸ‘å†èµ°å§ï¼Œçƒçƒäº†ï¼è¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦å•Šï¼\nå›é¡¾å·²ç»æ˜¯2023å¹´çš„2æœˆä»½äº†ï¼Œè·ç¦»æˆ‘å†™ä¸‹è¿™ç¯‡æ–‡ï¼Œå·²ç»è¿‡å»äº†ä¸€å¹´å¤šçš„æ—¶å…‰ã€‚å›é¡¾çœ‹æ¥ï¼Œå½“æ—¶å†™çš„æ•™ç¨‹ç€å®ä¸å¤ªå¥½ï¼Œäºæ˜¯è¿”å›æ¥æ›´æ­£ä¸€ç•ª\nä»£ç ç¤ºä¾‹3æ­¤é¢˜æœ€ä½³çš„è§£å†³æ–¹æ¡ˆæ˜¯å“ˆå¸Œæ€æƒ³ã€‚å“ˆå¸Œå°±æ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚\n\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Œå»ºè®®æš‚æ—¶å…ˆé‡‡ç”¨ä¸Šé¢çš„åŒå¾ªç¯æš´åŠ›è§£æ³•ã€‚ç­‰åç»­å­¦ä¹ äº†å“ˆå¸Œæ€æƒ³ä»¥åŠå®ç°ä¹‹åï¼Œå†å›å¤´æ¥é‡åšæ­¤é¢˜\n\næˆ‘ä»¬å¯ä»¥å°†æ•°ç»„ä¸­çš„æ•°æ®å’Œå…¶å¯¹åº”çš„ä¸‹æ ‡æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œç”±äºå“ˆå¸Œè¡¨çš„æœç´¢æ•ˆç‡æ¥è¿‘O(1)ï¼ŒæŸ¥æ‰¾çš„é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œæ­¤é¢˜çš„æ•´ä½“æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº†O(N)\næ€è·¯å¦‚ä¸‹ï¼š\n\næŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­ï¼Œæ˜¯å¦æœ‰å’Œï¼ˆç›®æ ‡-å½“å‰å€¼ï¼‰ç›¸åŒçš„å…ƒç´ \nå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå¾—åˆ°ç­”æ¡ˆã€‚è¿”å›å½“å‰éå†åˆ°çš„ä¸‹æ ‡ï¼Œä»¥åŠæŸ¥æ‰¾åˆ°çš„å…ƒç´ çš„ä¸‹æ ‡\nå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±æŠŠå½“å‰å…ƒç´ -å…ƒç´ ä¸‹æ ‡ä½œä¸ºé”®å€¼å¯¹ï¼Œæ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­\n\nå› ä¸ºæœ¬é¢˜æ˜¯ä¸€å®šæœ‰è§£çš„ï¼Œè¿™æ ·ä¸€æ¬¡å¾ªç¯ä¹‹åï¼Œä¸€å®šèƒ½æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„é‚£ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡\nclass Solution &#123;public:    vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;        unordered_map&lt;int,int&gt; m;//å“ˆå¸Œè¡¨ æ•°æ®-ä¸‹æ ‡        vector&lt;int&gt; ret;//è¿”å›å€¼        for(int i=0;i&lt;nums.size();i++)        &#123;\t        //æ‰¾æœ‰æ²¡æœ‰å’Œï¼ˆç›®æ ‡-å½“å‰å€¼ï¼‰ç›¸åŒçš„å…ƒç´             auto it = m.find(target-nums[i]);            if(it!=m.end())//æ‰¾åˆ°äº†            &#123;                ret.push_back(it-&gt;second);//æ’å…¥å“ˆå¸Œè¡¨ä¸­ä¸‹æ ‡                ret.push_back(i);//æ’å…¥å½“å‰ä¸‹æ ‡                break;//é€€å‡ºå¾ªç¯            &#125;            else            &#123;                m.insert(&#123;nums[i],i&#125;);//æ’å…¥å…ƒç´ å’Œä¸‹æ ‡            &#125;        &#125;        return ret;    &#125;   &#125;;\n\n\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","leetcode","Cè¯­è¨€"]},{"title":"ã€leetcodeã€‘102. äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆCè¯­è¨€+é˜Ÿåˆ—ï¼‰","url":"/2022/04/20/leetcode/102%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86/","content":"è¿™é“äºŒå‰æ ‘çš„é¢˜ç›®ç›¸å¯¹æ¥è¯´æ¯•ç«Ÿéš¾ï¼Œæ‰€ä»¥åˆå•ç‹¬æ‹¿å‡ºæ¥å‘ä¸€ç¯‡é¢˜è§£\n\n\n[TOC]\n102 å±‚åºéå†ï¼ˆè¾ƒéš¾ğŸ˜¥ï¼‰\nleetcodeï¼š102. äºŒå‰æ ‘çš„å±‚åºéå†\n\n\nè¿™é“é¢˜ç›¸å¯¹æ¥è¯´å°±ä¹ˆæœ‰é‚£ä¹ˆå®¹æ˜“äº†ï¼Œä½ å¯èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå‹æ ¹æ²¡çœ‹æ˜ç™½é¢˜ç›®è¦æ±‚ä¸­çš„åä¸¤ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¹²å˜›çš„\n\n/** * Return an array of arrays of size *returnSize. * The sizes of the arrays are returned as *returnColumnSizes array. * Note: Both returned array and *columnSizes array must be malloced, assume caller calls free(). */int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes)&#123;&#125;\n\nçœ‹äº†ä¸€äº›é¢˜è§£ï¼Œè¿™æ‰ç®—ç†è§£äº†è¿™é“é¢˜çš„è¦æ±‚\n\n*returnSizeï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘çš„å±‚æ•°\n**returnColumnSizesï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿”å›å€¼è¦æ±‚æ˜¯int**ï¼šéœ€è¦è¿”å›ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ•°ç»„Aï¼Œæ•°ç»„Aä¿å­˜äº†äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\n\n\n0.é”™è¯¯æ€è·¯æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œç”¨å•ç‹¬çš„å‡½æ•°è®¡ç®—å‡ºæ ‘çš„èŠ‚ç‚¹ä¸ªæ•°å’Œå±‚çº§ï¼Œå†è¿›è¡Œä¸€æ¬¡å±‚åºéå†æ¥å¾—åˆ°æ ‘çš„å€¼ã€‚\nä½†å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸€æ€è·¯åœ¨æœ¬é¢˜æ˜¯æä¸é€šçš„ï¼ğŸ¤”\n1.æ•°ç»„é˜Ÿåˆ—åˆå§‹åŒ–åœ¨é“¾å¼äºŒå‰æ ‘åšå®¢ä¸­ï¼Œæˆ‘è®²è¿°äº†åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°å±‚åºéå†çš„æ€è·¯ã€‚è¿™é“OJé¢˜ç›®æˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚ä¸åŒçš„æ˜¯ï¼Œåœ¨æˆ‘è‡ªå·±å†™çš„é˜Ÿåˆ—å®ç°é‡Œï¼Œä½¿ç”¨çš„æ˜¯é“¾å¼é˜Ÿåˆ—ã€‚è€Œæœ¬é¢˜ä½¿ç”¨æ•°ç»„é˜Ÿåˆ—ä¼šå¥½ä¸€ç‚¹ï¼\n#define MAX 2000int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes) &#123;    if (root == NULL)        return;    struct TreeNode* Queue[MAX];//é˜Ÿåˆ—ï¼Œå­˜æ”¾èŠ‚ç‚¹çš„åœ°å€    int front = 0, tail = 0;//æŒ‡å‘é˜Ÿå¤´å’Œé˜Ÿå°¾\n\n2.åˆå§‹åŒ–æ•°ç»„è¿™éƒ¨åˆ†ä¼šæ¯•ç«Ÿç»•ï¼Œå…ˆä¸€æ­¥ä¸€æ­¥æ¥ç†è§£\n*returnSize = 0;//å°†äºŒå‰æ ‘å±‚çº§åˆå§‹åŒ–ä¸º0//å­˜æ”¾äºŒå‰æ ‘çš„æ¯ä¸€å±‚èŠ‚ç‚¹çš„å€¼int** ret = (int**)malloc(sizeof(int*) * MAX);//å¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°*returnColumnSizes = (int*)malloc(sizeof(int*) * (MAX / 2));\n\n\nretæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾çš„æ˜¯æ•°ç»„Aï¼Œæ•°ç»„Aé‡Œé¢æ˜¯æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ã€‚retä¹Ÿå°±æ˜¯é¢˜ç›®è¦æ±‚çš„è¿”å›å€¼\n*returnColumnSizeså¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°\n\nè¿™é‡Œå…¶å®returnColumnSizesæ²¡æœ‰å•¥äºŒçº§æŒ‡é’ˆçš„å¿…è¦ï¼Œä½†æ˜¯æ—¢ç„¶é¢˜ç›®ç»™äº†æ˜¯int**ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆ*è§£å¼•ç”¨å†mallocå¼€è¾Ÿæ•°ç»„\n3.é˜Ÿåˆ—æ“ä½œæ€è·¯\nå…ˆè®©æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ï¼Œtail++\nå¤–å±‚å¾ªç¯åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦éç©ºï¼Œå¦‚æœéç©ºå°±åœæ­¢æ“ä½œ\nå†…å±‚å¾ªç¯è¿›è¡Œæ¯ä¸€å±‚çš„å…¥é˜Ÿæ“ä½œï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼å’ŒèŠ‚ç‚¹ä¸ªæ•°\nåœ¨å†…å±‚å¾ªç¯ä¸­åˆ›å»ºretæ•°ç»„çš„å­æ•°ç»„ï¼Œå•ç‹¬å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\næœ€åå°†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°èµ‹å€¼ç»™*returnColumnSizesæ•°ç»„ï¼Œ*returnSize++ä¸€æ¬¡\n\n   struct TreeNode* head;   Queue[tail++] = root;//æ ¹èŠ‚ç‚¹å…¥é˜Ÿ   while (front != tail)   &#123;       int Csize = 0;//æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       int end = tail;       //endæ˜¯æ¯ä¸€å±‚æœ€æœ«ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚åœ¨åç»­çš„å…¥é˜Ÿåˆ—æ“ä½œä¸­tailä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦ä¿å­˜tailçš„å€¼       ret[*returnSize] = (int*)malloc(sizeof(int*) * (end - front));       //ä¸ºæ¯ä¸€å±‚å¼€è¾Ÿä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥å­˜æ”¾å€¼       while (front &lt; end)       &#123;           head = Queue[front++];           ret[*returnSize][Csize++] = head-&gt;val;           //æ•°ç»„èµ‹å€¼ï¼ŒåŒæ—¶æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°Csize++           if (head-&gt;left != NULL)               Queue[tail++] = head-&gt;left;           if (head-&gt;right != NULL)               Queue[tail++] = head-&gt;right;       &#125;       (*returnColumnSizes)[*returnSize] = Csize;//èµ‹å€¼æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       (*returnSize)++;//å±‚æ•°+1   &#125;return ret;\n\nå¤–å±‚å¾ªç¯ç»“æŸåï¼Œæ­¤æ—¶retæ•°ç»„å°±æ˜¯é¢˜ç›®è¦æ±‚çš„ç»“æœäº†ï¼Œè¿”å›retå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå½“æ ‘ä¸ºç©ºæ ‘æ—¶ï¼Œå±‚çº§åº”è¯¥æ˜¯0ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è¡Œèµ‹å€¼*returnSize = 0;ä¸ç„¶ä¼šæ‰§è¡Œå‡ºé”™\n\n\nè¿™é“é¢˜çš„æ€è·¯æ˜¯æˆ‘çœ‹è¿‡é¢˜è§£ä¹‹åæ‰ææ˜ç™½çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„åªæ˜¯ä¸€ä¸ªæ€è·¯çš„å¤ç°ğŸ˜­è¿˜æ˜¯å¤ªèœäº†ï¼\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","leetcode","Cè¯­è¨€"]},{"title":"ã€leetcodeã€‘150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼","url":"/2022/07/18/leetcode/150%E9%80%86%E6%B3%A2%E5%85%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F/","content":"é¢˜ç›®æ¥æº\n150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼\n\n\næ€è·¯é€†æ³¢å…°è¡¨è¾¾å¼åˆç§°ä¸ºåç¼€è¡¨è¾¾å¼\n\nä¸­ç¼€ 1 + 2 * 3\nåç¼€ 1 2 3 + *\n\næˆ‘ä»¬éœ€è¦å°†é€†æ³¢å…°è¡¨è¾¾å¼åŒ–ä¸ºæ­£å¸¸å¯è®¡ç®—çš„ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå†è¿›è¡Œè®¡ç®—ã€‚é¢˜ç›®æ‰€ç»™çš„å‚æ•°æ˜¯åç¼€è¡¨è¾¾å¼ï¼Œå…¶æ“ä½œçš„æ€è·¯å¦‚ä¸‹ï¼š\n\né‡åˆ°æ“ä½œæ•°ï¼Œå…¥æ ˆ\né‡åˆ°è¿ç®—ç¬¦ï¼Œå–æ ˆé¡¶ä¸¤ä¸ªè¿ç»­æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå†å°†è®¡ç®—ç»“æœå…¥æ ˆ\n\nçœ‹èµ·æ¥ä¸éš¾ï¼Œæ˜¯å› ä¸ºè¿™é“é¢˜å·²ç»æ˜¯ç®€åŒ–åçš„ç‰ˆæœ¬ï¼Œå…¶æ‰€ç»™åç¼€è¡¨è¾¾å¼ä¸­æ²¡æœ‰å‡ºç°()è¿™ç§ç‰¹æ®Šä¼˜å…ˆçº§çš„æ“ä½œã€‚ä¸‹é¢è¯´ä¸€ä¸‹æŠŠä¸­ç¼€è½¬åç¼€çš„æ€è·¯ï¼ˆæœ¬é¢˜æ²¡æœ‰æ¶‰åŠï¼‰\nå¦‚ä½•å°†ä¸­ç¼€è¡¨è¾¾å¼è½¬ä¸ºåç¼€ï¼Ÿæ‰‹å·¥åšæ³•ï¼š\nä»¥ä¾‹2ç»™å‡ºçš„ä¸­ç¼€è¡¨è¾¾å¼ä¸ºä¾‹ï¼Œä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼çš„æ‰‹å·¥åšæ³•ä¸ºï¼š\næŒ‰ç…§è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å¯¹æ‰€æœ‰çš„è¿ç®—å•ä½åŠ æ‹¬å·ã€‚ä¾‹ï¼š ((a/b) + (((c*d) - (e*f))/g))æŠŠè¿ç®—ç¬¦å·ç§»åŠ¨åˆ°å¯¹åº”æ‹¬å·çš„åé¢ï¼Œç„¶åå»æ‰æ‹¬å·ã€‚ä¾‹ï¼š((ab)/ (((cd)*(ef)*)-g)/+ï¼Œå»æ‰æ‹¬å·ab/cd*ef*-g/+\n\nä»¥è¿™ä¸ªä¸­ç¼€è¡¨è¾¾å¼ä¸ºä¾‹\n1 + 2 * 3 / 2 -5\n\næˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿ç®—é¡ºåºåº”è¯¥æ˜¯å…ˆè®¡ç®—2*3ç„¶ååœ¨è®¡ç®—6/2ï¼Œæœ€åè®¡ç®—1+3-5å¾—å‡ºç»“æœ-1\nå› ä¸º* /æ“ä½œç¬¦çš„ä¼˜å…ˆçº§é«˜äºåŠ å‡ï¼Œè¿™é‡Œå°±éœ€è¦æ³¨æ„è¿™ç§æƒ…å†µã€‚æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæ ˆæ¥å­˜æ”¾æ“ä½œç¬¦\n\né‡åˆ°æ“ä½œæ•°çš„æ—¶å€™ å…ˆè¾“å‡º\né‡åˆ°æ“ä½œç¬¦ï¼Œå’Œæ ˆé¡¶è¿›è¡Œæ¯”è¾ƒ\nå¦‚æœæ ˆä¸ºç©º&#x2F;æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶ï¼Œå…¥æ ˆ\næ“ä½œç¬¦ä¼˜å…ˆçº§ä½äºæ ˆé¡¶æˆ–å’Œæ ˆé¡¶ç›¸åŒï¼Œå‡ºæ ˆé¡¶æ“ä½œç¬¦\n\n\næœ€åå°†æ ˆä¸­çš„æ“ä½œç¬¦å…¨éƒ¨å‡ºæ ˆï¼Œå°±å¯ä»¥è·å¾—åç¼€è¡¨è¾¾å¼\n\nç”¨ä¸Šé¢è¿™ä¸ªæ€è·¯èµ°ä¸€éï¼Œå³ä¸ºä¸‹é¢çš„æƒ…å†µï¼ˆä¸çŸ¥é“è¿™æ ·å†™çš„å¤§å®¶èƒ½ä¸èƒ½çœ‹æ˜ç™½ï¼‰\n\næœ€ç»ˆå¾—åˆ°çš„ç»“æœå¦‚ä¸‹\n1 2 3 * 2 / + 5 -\n\nå³éœ€è¦çš„åç¼€è¡¨è¾¾å¼\næˆ‘ä»¬å¯ä»¥ç”¨æœ¬é¢˜ä»£ç æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªç”¨ä¾‹ï¼Œå¾—å‡ºçš„ç»“æœä¹Ÿæ˜¯-1ï¼Œæ­£ç¡®ï¼\n\nåç¼€è½¬ä¸­ç¼€https://blog.csdn.net/qq_29462849/article/details/93652583\n\nå®Œæ•´ä»£ç //https://leetcode.cn/problems/evaluate-reverse-polish-notation/submissions///150é€†æ³¢å…°è¡¨è¾¾å¼class Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                switch(ch[0])                &#123;                    case &#x27;+&#x27;:                        s.push(left+right);                        break;                    case &#x27;-&#x27;:                        s.push(left-right);                        break;                    case &#x27;*&#x27;:                        s.push(left*right);                        break;                    case &#x27;/&#x27;:                        s.push(left/right);                        break;                    default:                        break;                &#125;            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\n\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","leetcode","C++"]},{"title":"ã€leetcodeã€‘189. è½®è½¬æ•°ç»„ï¼ˆCè¯­è¨€ï¼‰","url":"/2022/03/13/leetcode/189%E6%97%8B%E8%BD%AC%E6%95%B0%E7%BB%84/","content":"é—®é¢˜æ¥æº\nleetcode 189. è½®è½¬æ•°ç»„\n\nç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚\nè¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3è¾“å‡º: [5,6,7,1,2,3,4]è§£é‡Š:å‘å³è½®è½¬ 1 æ­¥: [7,1,2,3,4,5,6]å‘å³è½®è½¬ 2 æ­¥: [6,7,1,2,3,4,5]å‘å³è½®è½¬ 3 æ­¥: [5,6,7,1,2,3,4]\n\nè¿™é“é¢˜çš„åº•éƒ¨æœ‰ä¸€ä¸ªè¿›é˜¶è¦æ±‚ï¼š\n\nè¿›é˜¶ï¼š\n\nå°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ ä¸‰ç§ ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nä½ å¯ä»¥ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ åŸåœ° ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—\n\n\næ­£å¥½æœ€è¿‘å­¦ä¹ äº†ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œå¯ä»¥ç”¨äºç»ƒä¹ \n\næ–¹æ³•1-åŸºæœ¬æ–¹æ³•æœ€åŸºæœ¬çš„æ–¹æ³•å°±æ˜¯ç›´æ¥æ—‹è½¬ï¼ŒæŠŠæœ€åä¸€ä½æ•°å­—ç§»åŠ¨åˆ°æ•°ç»„çš„ç¬¬ä¸€ä½ï¼Œç„¶åå°†ç¬¬äºŒä½å¼€å§‹çš„æ¯ä¸€ä½å¾€å‰ç§»åŠ¨ä¸€ä½\n\néœ€è¦å…ˆæ‰§è¡Œç§»åŠ¨æ“ä½œå†æ›¿æ¢ç¬¬ä¸€ä¸ªæ•°\n\nvoid rotate(int* nums, int numsSize, int k) &#123;    k %= numsSize;    for (int i = 0; i &lt; k; i++)    &#123;        int tmp = nums[numsSize - 1];        for (int j = numsSize - 1; j &gt;0; j--)        &#123;            nums[j] = nums[j-1];        &#125;        nums[0] = tmp;    &#125;    return;&#125;\n\nè¿™ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(k*N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)\nè¿™é“é¢˜çš„kæ˜¯å¸¸æ•°ï¼Œå¯ä»¥çœç•¥\n\nä½†å¾ˆä¸å¹¸ï¼Œå®ƒåœ¨è·‘leetcodeä¸­éå¸¸é•¿çš„æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ï¼Œè¿˜æ˜¯æ²¡æœ‰è·‘è¿‡å»ï¼Œè¶…æ—¶äº†\n\næ–¹æ³•2-é¢å¤–å¼€ä¸€ä¸ªæ•°ç»„è¿™ç§æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œé¢å¤–å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨éœ€è¦æ—‹è½¬çš„å‡ ä¸ªæ•°å­—ï¼Œç„¶åå°†å®ƒä»¬ä¹‹å‰çš„æ•°æ®å­˜å‚¨åˆ°è¯¥æ•°ç»„çš„ååŠéƒ¨åˆ†\næœ€åå†æŠŠæ–°æ•°ç»„å¤åˆ¶å›åŸæ¥çš„æ•°ç»„ä¸­\nvoid rotate(int* nums, int numsSize, int k) &#123;    k %= numsSize;    int* num1 = (int*)malloc(sizeof(int) * numsSize);    int h = 0;    for (int i = numsSize - k; i &lt; numsSize; i++)    &#123;        num1[h++] = nums[i];    &#125;    for (int i = 0; i &lt; numsSize - k; i++)    &#123;        num1[i + k] = nums[i];    &#125;    memcpy(nums, num1, sizeof(int) * numsSize);    return;&#125;\n\nè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€åçš„æ‰§è¡Œç»“æœåªæ‰“è´¥äº†leetcodeå¾ˆå°ä¸€éƒ¨åˆ†äºº\n\nåŒæ—¶è¿™ä¸ªç®—æ³•ä¹Ÿä¸ç¬¦åˆè¿›é˜¶è¦æ±‚ä¸­çš„â€œåŸåœ°â€\n\næ–¹æ³•3-ä¸‰æ—‹æ³•ï¼ˆæœ€ä¼˜ï¼‰å’Œä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ç›¸æ¯”ï¼Œä¸‰æ—‹æ³•ç›¸å¯¹æ¥è¯´è¾ƒä¼˜ï¼Œè€Œä¸”ç¬¦åˆé¢˜ç›®çš„è¿›é˜¶è¦æ±‚\nä½†æ˜¯å®ƒéœ€è¦ä¸€å®šçš„ç†è§£èƒ½åŠ›ï¼š\nå‡è®¾æˆ‘ä»¬éœ€è¦æ—‹è½¬3ä¸ªæ•°å­—\n\nå…ˆå°†å‰SZ-Kä¸ªæ•°å­—é€†ç½®\nå†å°†åkä¸ªæ•°å­—é€†ç½®\næœ€åæ•´ä½“é€†ç½®\n\nè¿™æ ·å°±èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼\n1 2 3 4 5 6 7 //æ—‹è½¬3ä¸ª4 3 2 1 5 6 7 //å…ˆé€†ç½®å‰7-3=4ä¸ª4 3 2 1 7 6 5 //å†é€†ç½®å3ä¸ª5 6 7 1 2 3 4 //æœ€åæ•´ä½“é€†ç½®ï¼Œå³ä¸ºç»“æœ\n\nä»£ç å¦‚ä¸‹\nvoid Swap(int* nums, int sz)&#123;    int i = 0;    while (i &lt;  (sz/2))    &#123;        int tmp = *(nums+i);        *(nums + i) = *(nums + sz - i-1);        *(nums + sz - i - 1) = tmp;        i++;    &#125;&#125;void rotate(int* nums, int numsSize, int k)&#123;    k%=numsSize;    Swap(nums,numsSize-k);    Swap(nums+numsSize-k,k);    Swap(nums,numsSize);    return ;&#125;\n\nè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ï¼Œç¬¦åˆé¢˜ç›®è¿›é˜¶è¦æ±‚\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆæ‰§è¡Œç»“æœæ¯”ä¹‹å‰ä¼˜ç§€å¤šäº†ï¼\n\n230219é‡å†™æ­¤é¢˜ï¼Œç›¸åŒæ€è·¯ï¼›æ—‹è½¬ä¸‰æ¬¡ã€‚æ³¨æ„ä¸€å®šè¦å¤„ç†kï¼Œå¦åˆ™ä¼šæœ‰æ ˆæº¢å‡ºçš„é—®é¢˜\n// æ—‹è½¬å‚æ•°çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰void ReverseArr(int* arr,int begin,int end)&#123;    while(begin&lt;end)    &#123;        int tmp = arr[end];        arr[end] = arr[begin];        arr[begin] = tmp;        end--;        begin++;    &#125;&#125;void rotate(int* nums, int numsSize, int k) &#123;    k%=numsSize;    ReverseArr(nums,numsSize-k,numsSize-1);    ReverseArr(nums,0,numsSize-k-1);    ReverseArr(nums,0,numsSize-1);    return;&#125;\n\n\n\nç»“è¯­å¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘æ”¯æŒä¸€ä¸‹ï¼\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","leetcode","Cè¯­è¨€"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘HJ92 åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºè¿ç»­æœ€é•¿çš„æ•°å­—ä¸²","url":"/2022/09/07/leetcode/HJ92%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%89%BE%E5%87%BA%E8%BF%9E%E7%BB%AD%E6%9C%80%E9%95%BF%E7%9A%84%E6%95%B0%E5%AD%97%E4%B8%B2/","content":"HJ92 åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºè¿ç»­æœ€é•¿çš„æ•°å­—ä¸²\né¢˜ç›®æ¥æº ç‰›å®¢ç½‘ HJ92\n\næè¿°è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å…¶æœ€é•¿çš„æ•°å­—å­ä¸²ï¼Œä»¥åŠå…¶é•¿åº¦ã€‚è‹¥æœ‰å¤šä¸ªæœ€é•¿çš„æ•°å­—å­ä¸²ï¼Œåˆ™å°†å®ƒä»¬å…¨éƒ¨è¾“å‡ºï¼ˆæŒ‰åŸå­—ç¬¦ä¸²çš„ç›¸å¯¹ä½ç½®ï¼‰\næœ¬é¢˜å«æœ‰å¤šç»„æ ·ä¾‹è¾“å…¥ã€‚\næ•°æ®èŒƒå›´ï¼šå­—ç¬¦ä¸²é•¿åº¦ 1 \\le n \\le 200 \\1â‰¤nâ‰¤200 ï¼Œ ä¿è¯æ¯ç»„è¾“å…¥éƒ½è‡³å°‘å«æœ‰ä¸€ä¸ªæ•°å­—\nè¾“å…¥æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚1&lt;&#x3D;len(å­—ç¬¦ä¸²)&lt;&#x3D;200\nè¾“å‡ºæè¿°ï¼šè¾“å‡ºå­—ç¬¦ä¸²ä¸­æœ€é•¿çš„æ•°å­—å­—ç¬¦ä¸²å’Œå®ƒçš„é•¿åº¦ï¼Œä¸­é—´ç”¨é€—å·é—´éš”ã€‚å¦‚æœæœ‰ç›¸åŒé•¿åº¦çš„ä¸²ï¼Œåˆ™è¦ä¸€å—å„¿è¾“å‡ºï¼ˆä¸­é—´ä¸è¦è¾“å‡ºç©ºæ ¼ï¼‰\nè¾“å…¥ï¼šabcd12345ed125ss123058789a8a72a6a5yy98y65ee1r2è¾“å‡ºï¼š123058789,9729865,2è¯´æ˜ï¼šæ ·ä¾‹ä¸€æœ€é•¿çš„æ•°å­—å­ä¸²ä¸º123058789ï¼Œé•¿åº¦ä¸º9æ ·ä¾‹äºŒæœ€é•¿çš„æ•°å­—å­ä¸²æœ‰72,98,65ï¼Œé•¿åº¦éƒ½ä¸º2    \n\n\né¢˜è§£ä»£ç è¿™é“é¢˜çš„æ€è·¯å¾ˆç®€ç­”ï¼Œä»å‰å¾€åéå†ä¸€éï¼Œé‡åˆ°å­—ç¬¦ä¸²å°±å¼€å§‹è®¡ç®—countï¼Œå¹¶è®°å½•èµ·å§‹ä½ç½®ã€‚æœ€åå†æŠŠèµ·å§‹ä½ç½®å’Œå­ä¸²é•¿åº¦æ’å…¥ä¸€ä¸ªpairé‡Œé¢ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå¿…é¡»è¦ç”¨pairï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚ä¸­æåˆ°äº†ï¼Œå¦‚æœæœ‰å¤šä¸ªç›¸åŒé•¿åº¦çš„æ•°å­—ä¸²ï¼Œå°±éœ€è¦ä¸€å¹¶è¾“å‡ºï¼Œå¹¶åŠ ä¸Šæœ€åä½çš„,é•¿åº¦\n#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;using namespace std;//ç»™å®šä¸€ä¸ª256å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œè¾“å‡ºå†…éƒ¨æœ€é•¿æ•°å­—å­ä¸²bool isNumStr(const char&amp; c)&#123;    return (c &gt;= &#x27;0&#x27; &amp;&amp; c &lt;= &#x27;9&#x27;);&#125;int main()&#123;    string s;//æ¥æº    while(getline(cin, s))    &#123;        //cout&lt;&lt;s&lt;&lt;endl;        //string ret_s;//ç»“æœ        vector&lt;pair&lt;int,int&gt;&gt; v;//ç”¨æ¥å­˜æ”¾æ•°å­—å­ä¸²çš„ä½ç½®        int begin = 0;//æ ‡è®°æ•°å­—ä¸²çš„å¼€å§‹        int count = 0;//æ ‡è®°é•¿åº¦        int max = 0, mbegin;//ä¸Šä¸€æ¬¡è·å–åˆ°çš„æ•°æ®ä¸²é•¿åº¦å’Œèµ·å§‹ä½ç½®        int flag = 0;//æ ‡è®°ä½        for (int i = 0; i &lt; s.size(); i++)        &#123;            if (i &lt; s.size() - 1 &amp;&amp; isNumStr(s[i]) &amp;&amp; isNumStr(s[i + 1]))            &#123;                count++;                if (flag != 1) &#123;                    begin = i;//è¯´æ˜å¼€å§‹è®¡ç®—äº†                    flag = 1;                &#125;                //cout&lt;&lt;&quot;i&quot;&lt;&lt;i&lt;&lt;&quot; c&quot;&lt;&lt;count&lt;&lt;&quot; b&quot;&lt;&lt;begin&lt;&lt;endl;            &#125;            else if (isNumStr(s[i]))//è‡ªå·±è¿˜æ˜¯æ•°å­—ï¼Œä½†æ˜¯ä¸‹ä¸€ä½ä¸æ˜¯            &#123;                count++;                //cout&lt;&lt;&quot;i&quot;&lt;&lt;i&lt;&lt;&quot; c&quot;&lt;&lt;count&lt;&lt;&quot; b&quot;&lt;&lt;begin&lt;&lt;endl;            &#125;            else &#123;                if (count &gt;= max) &#123;                    max = count;//æœ€å¤§çš„é•¿åº¦                    mbegin = begin;//æœ€å¤§é•¿åº¦çš„èµ·å§‹ä½ç½®                    v.push_back(make_pair(count, begin));                &#125;                count = 0;//ç½®é›¶                flag = 0;            &#125;        &#125;                            if (count &gt;= max)        &#123;//å¾ªç¯ç»“æŸåè¿˜éœ€è¦ä¸€æ¬¡åˆ¤æ–­ï¼Œé¿å…æœ€åä¸€ä¸ªå­—ç¬¦ä¾æ—§æ˜¯æ•°å­—çš„æƒ…å†µ            max = count;            mbegin = begin;            v.push_back(make_pair(count, begin));        &#125;                for(auto e:v)        &#123;            if(e.first==max)            &#123;                for(int i = e.second;i&lt;e.second+e.first;i++)                &#123;                    cout&lt;&lt;s[i];                &#125;            &#125;        &#125;        cout&lt;&lt;&quot;,&quot;&lt;&lt;max&lt;&lt;endl;//ç»“æŸåç»Ÿä¸€è¾“å‡ºmax    &#125;    return 0;&#125;// é€šè¿‡å…¨éƒ¨ç”¨ä¾‹  è¿è¡Œæ—¶é—´4ms å ç”¨å†…å­˜448KB\n\nåšè¿™é“é¢˜çš„èµ·å› -å¦å¤–ä¸€é“é¢˜å’³å’³ï¼Œåœ¨å­¦æ ¡ä¸Šè¯¾çš„æ—¶å€™é‡åˆ°äº†å¦å¤–ä¸€é“é¢˜ç›®ï¼Œè¿™é“é¢˜ç›®åªéœ€è¾“å‡ºä¸€ä¸ªæœ€é•¿æ•°å­—å­ä¸²å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å…³å¿ƒé•¿åº¦ç›¸åŒçš„é—®é¢˜ã€‚\n\næˆ‘çš„æ€è·¯å’ŒHJ92ä¸€æ ·ï¼Œå°±æ˜¯éå†æ‰¾åˆ°æ•°å­—å­ä¸²çš„é•¿åº¦å’Œèµ·å§‹ä½ç½®ï¼Œç„¶åæ’å…¥ä¸€ä¸ªæ–°çš„stringå†coutè¿›è¡Œè¾“å‡ºã€‚å…¶ä¸­så’Œret_sè¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯string\nç„¶åæˆ‘å°±é‡åˆ°äº†â€œå¥‡è‘©æƒ…å†µâ€\n\næˆ‘è¿˜åœ¨æœ¬åœ°æµ‹è¯•äº†ä¸¤æ¬¡ï¼Œå‘ç°â€œåº”è¯¥â€æ˜¯ä¸ä¼šå¤šæ‰“å°ç©ºæ ¼ä»€ä¹ˆçš„\n\nä¸Šå›¾Linux G++ï¼Œä¸‹å›¾VS2019\n\nè€Œæˆ‘é€šè¿‡äº†ä¸Šé¢çš„HJ92é‚£é“é¢˜ï¼Œè¯´æ˜ä»£ç çš„æ€è·¯æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œé—®é¢˜å°±å‡ºåœ¨è¾“å‡ºè¿™é‡Œ\n\nåœ¨ç»“æŸä¹‹åï¼ˆè¿™é“é¢˜é™æ—¶ï¼Œæˆ‘æ²¡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰æˆ‘æ‰å‘ç°è‡ªå·±æ˜¯ä¸ªå¤§ç¬¨è›‹ï¼\nè§£å†³æ–¹æ³•1ï¼šåŠ æ–œæ 0æ³¨æ„ï¼ŒåŠ endlçš„æ–¹æ³•æˆ‘å·²ç»è¯•è¿‡äº†ï¼Œä¹Ÿä¸è¡Œ\nå…¶å®åœ¨è¿™é‡Œï¼Œæˆ‘æ˜¯æœ‰æƒ³è¿‡åŠ \\0çš„ï¼Œä½†æ˜¯æˆ‘-åŠ -é”™-ä½-ç½®äº†ï¼ï¼ï¼åº”è¯¥ç»™ret_SåŠ ï¼Œå“¼å“¼å•Šå•Šå•Šå•Š\n\n\nè§£å†³æ–¹æ³•2ï¼šç›´æ¥foræ‰“å°è¿™ä¸ªæ–¹æ³•æˆ‘ä¹Ÿæ²¡æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘éƒ½å·²ç»çŸ¥é“èµ·å§‹ä½ç½®å’Œå­ä¸²é•¿åº¦äº†ï¼Œä¸ºå•¥ä¸ç›´æ¥æ‰“å°åŸæœ¬stringé‡Œé¢çš„å†…å®¹å‘¢ï¼Ÿç›´æ¥foræ‰“å°ä¸€ä¸‹ä¸å°±è¡Œäº†???\nåªèƒ½è¯´è‡ªå·±å¯¹å®¹å™¨çš„ä½¿ç”¨è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼ŒçŸ¥è¯†æ²¡å­¦åˆ°ä½å•Šï¼Œå“­\n\næŠŠè‡ªå·±æŒ‚åœ¨è¿™é‡Œå‘Šè¯«åæ¥è€…\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","C++","ç‰›å®¢ç½‘"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘JZ65:ä¸ç”¨å››åˆ™è¿ç®—ç¬¦å®ç°ä¸¤æ•°ç›¸åŠ ","url":"/2022/02/05/leetcode/JZ65%E4%B8%8D%E7%94%A8%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97%E7%AC%A6%E8%BF%9B%E8%A1%8C%E5%9B%9B%E5%88%99%E8%BF%90%E7%AE%97/","content":"[TOC]\né—®é¢˜æ¥æº\nç‰›å®¢ç½‘æ•°æ®ç»“æ„é¢˜ç›®ğŸ‘‰JZ65\n\né¢˜ç›®è¦æ±‚å¦‚å›¾\n\n\næ€è€ƒä¸èƒ½ä½¿ç”¨å››åˆ™è¿ç®—ï¼Œæ ¹æ®è¿‡å¾€çš„å­¦ä¹ ç»å†ï¼Œæˆ‘å”¯ä¸€èƒ½æƒ³åˆ°çš„å°±æ˜¯ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦\nä¾‹ï¼šä½¿ç”¨ä½æ“ä½œç¬¦è¿›è¡Œintå˜é‡äº¤æ¢\n\nä½æ“ä½œç¬¦çš„ä½¿ç”¨å…ˆæ¥å›é¡¾ä¸€ä¸‹ä½æ“ä½œç¬¦çš„ä½œç”¨\nä½æ“ä½œç¬¦æ“ä½œçš„æ˜¯æ•´å½¢çš„äºŒè¿›åˆ¶ä½ï¼Œå®ƒçš„æ“ä½œæ•°æ˜¯2ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•´å‹çš„äºŒè¿›åˆ¶ä½\n\n&amp;æŒ‰ä½ä¸ï¼šå¯¹åº”çš„äºŒè¿›åˆ¶ å…¨ä¸º1æ‰æ˜¯1ï¼Œå¦åˆ™0\n|æŒ‰ä½æˆ–ï¼šå¯¹åº”çš„äºŒè¿›åˆ¶ æœ‰1ä¸º1ï¼Œå…¨ä¸º0æ‰ä¸º0\n^æŒ‰ä½å¼‚æˆ–ï¼šç›¸åŒä¸º0ï¼Œä¸åŒä¸º1\n\n\næ¯”è¾ƒä¸€ä¸‹æ­£å¸¸çš„äºŒè¿›åˆ¶ç›¸åŠ å’ŒæŒ‰ä½å¼‚æˆ–ï¼Œå‘ç°æŒ‰ä½å¼‚æˆ–æ˜¯æ²¡æœ‰è¿›ä½çš„ç›¸åŠ \n\n\nåŸæœ¬åº”è¯¥æ˜¯010ï¼Œä½†æ˜¯æŒ‰ä½å¼‚æˆ–åæ˜¯000\n1+1éœ€è¦è¿›ä½çš„1å¹¶æ²¡æœ‰è¿›åˆ°ä¸‹ä¸€ä½é‡Œå»\n\nè€Œä½¿ç”¨æŒ‰ä½ä¸æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸¤ä¸ªæ•°ç›¸åŠ éœ€ä¸éœ€è¦è¿›ä½\n0 0 10 0 1//æŒ‰ä½ä¸-å…¨1ä¸º10 0 1//&lt;&lt; -å·¦ç§»1ä½0 1 0\n\nè¿™æ—¶å€™å°†æŒ‰ä½ä¸ä¹‹åçš„ç»“æœå’ŒæŒ‰ä½å¼‚æˆ–ç›¸åŠ ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ç­”æ¡ˆäº†\nä½†æ˜¯é¢˜ç›®è¦æ±‚ä¸èƒ½ä½¿ç”¨åŠ å‡\n\nå†å°†æŒ‰ä½ä¸çš„ç»“æœ0 1 0ä¸ æŒ‰ä½å¼‚æˆ–ç»“æœ0 0 0è¿›è¡ŒæŒ‰ä½ä¸\nå¾—åˆ°0 0 0 ï¼Œä»£è¡¨æ— éœ€è¿›ä½\nè¿™æ—¶å€™å°†0 1 0ä¸0 0 0 è¿›è¡ŒæŒ‰ä½å¼‚æˆ–ï¼Œå³å¾—å‡ºç›¸åŠ åçš„ç»“æœ0 1 0\n\n\nè¿™ä¸ªä¾‹å­æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥å†ç”¨å¤æ‚ä¸€ç‚¹çš„ä¾‹å­å†è¯æ˜å®ƒçš„å¯è¡Œæ€§\n3ï¼š0011å’Œ5ï¼š0101\n\n\n\næ“ä½œ\nç»“æœ\n\n\n\n\n1ï¼šæŒ‰ä½ä¸å’Œå·¦ç§»\n0 0 1 0\néœ€è¦è¿›ä½\n\n\n2ï¼šæŒ‰ä½å¼‚æˆ–\n0 1 1 0\n\n\n\n3ï¼š1å’Œ2æŒ‰ä½ä¸ï¼Œå·¦ç§»\n0 1 0 0\néœ€è¦è¿›ä½\n\n\n4ï¼š1å’Œ2æŒ‰ä½å¼‚æˆ–\n0 1 0 0\n\n\n\n5ï¼š3å’Œ4æŒ‰ä½ä¸ï¼Œå·¦ç§»\n1 0 0 0\néœ€è¦è¿›ä½\n\n\n6ï¼š3å’Œ4æŒ‰ä½å¼‚æˆ–\n0 0 0 0\n\n\n\n7ï¼š5å’Œ6æŒ‰ä½ä¸ï¼Œå·¦ç§»\n0 0 0 0\næ— éœ€è¿›ä½\n\n\n8ï¼š5å’Œ6æŒ‰ä½å¼‚æˆ–\n1 0 0 0\nå¾—åˆ°ç»“æœä¸º8\n\n\næ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å®Œæˆäº†3å’Œ5çš„ç›¸åŠ \n\nä»£ç å®ç°æœ¬é¢˜æ˜¯æ¥å£å‹é¢˜ç›®ï¼Œæˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œå®ç°ç›¸åŠ çš„åŠŸèƒ½\n/** * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯ * *  * @param num1 intæ•´å‹  * @param num2 intæ•´å‹  * @return intæ•´å‹ * * Cè¯­è¨€å£°æ˜å®šä¹‰å…¨å±€å˜é‡è¯·åŠ ä¸Šstaticï¼Œé˜²æ­¢é‡å¤å®šä¹‰ */int Add(int num1, int num2) &#123;    while(num2)    &#123;        int t = (num1 &amp; num2) &lt;&lt; 1;        num1 ^= num2;        num2 = t;    &#125;    return num1;&#125;\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªä¸»å‡½æ•°æ¥æµ‹è¯•å®ƒçš„å¯è¡Œæ€§\nå¦‚å›¾ï¼Œå‡½æ•°æ­£ç¡®ç®—å‡ºäº†ä¸¤ä¸ªæ•°çš„å’Œ\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¸®åˆ°äº†ä½ ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå•¦~\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cè¯­è¨€","ç‰›å®¢ç½‘"]},{"title":"ã€leetcodeã€‘å‰‘æŒ‡ Offer 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼ˆCè¯­è¨€ï¼‰","url":"/2022/03/06/leetcode/%E5%89%91%E6%8C%87%20Offer%2056%20-%20I.%20%E6%95%B0%E7%BB%84%E4%B8%AD%E6%95%B0%E5%AD%97%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0/","content":"[TOC]\né¢˜ç›®è¯´æ˜\næ¥æºï¼šå‰‘æŒ‡ Offer 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°å¦å¤–ï¼Œ260åªå‡ºç°ä»¥æ­¤çš„æ•°å­—3è¿™é“é¢˜å’Œæœ¬é¢˜æ˜¯ä¸€æ ·çš„\n\néš¾åº¦ï¼šä¸­ç­‰\nä¸€ä¸ªæ•´å‹æ•°ç»„ nums é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [4,1,4,6]è¾“å‡ºï¼š[1,6] æˆ– [6,1]\n\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,10,4,1,4,3,3]è¾“å‡ºï¼š[2,10] æˆ– [10,2]\n\n\né™åˆ¶ï¼š2 &lt;= nums.length &lt;= 10000\n\næ–¹æ³•1ï¼šå¸¸è§„åšæ³•æœ€å®¹æ˜“æƒ³åˆ°çš„å¸¸è§„åšæ³•ï¼š\n\nå…ˆå¯¹è¯¥æ•°ç»„è¿›è¡Œqsortæ’åºï¼Œå†ç”¨forå¾ªç¯éå†ï¼Œæ‰¾åˆ°æ•°ç»„ä¸­ä¸‹æ ‡iå’Œi+1ä¸ç›¸ç­‰çš„å“ªä¸€é¡¹ï¼Œè¿™ä¸€é¡¹iå³ä¸ºåªå‡ºç°äº†ä¸€æ¬¡çš„æ•°å­—ã€‚\n\nè‹¥æœ€æœ«å°¾çš„æ•°æ˜¯ç›®æ ‡æ•°ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­å¹¶breakï¼Œé˜²æ­¢è¶Šç•Œè®¿é—®æ•°ç»„\n\n\n\nå¦‚æœä½ ä¸äº†è§£qsortï¼Œå¯ä»¥çœ‹è¿™ç¯‡åšå®¢å­¦ä¹ ä¸€ä¸‹ğŸ‘‰ç‚¹æˆ‘\n\n//æ–¹æ³•1ï¼Œå¤ªè¿‡ç®€å•ï¼Œä¸å¤Ÿé«˜çº§cmp(const void* e1, const void* e2)&#123;    return *(int*)e1 - *(int*)e2;&#125;int* singleNumbers(int* nums, int numsSize, int* returnSize) &#123;    int* result = (int*)calloc(2, sizeof(int));    int k = 0;    qsort(nums, numsSize, sizeof(int), cmp);//å¯¹åŸæ•°ç»„è¿›è¡Œæ’åº       int i = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        if (i == numsSize-1)//å¦‚æœiæ˜¯æœ«å°¾æ•°ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­        &#123;            result[k] = nums[i];            break;        &#125;        if (nums[i] == nums[i + 1])        &#123;            i ++;        &#125;        else        &#123;            result[k] = nums[i];            k++;        &#125;    &#125;    *returnSize = 2;    return result;&#125;\n\n\n\næ–¹æ³•2ï¼šå¼‚æˆ–æ±‚è§£å¤ä¹ ä¸€ä¸‹ä½æ“ä½œç¬¦å¾ˆå°¬å°´çš„æ˜¯ï¼Œæœ¬äººå¯¹ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦å¹¶ä¸ç†Ÿæ‚‰ã€‚ç»å¸¸æŠŠå®ƒä»¬è®°æ··ã€‚å‡ æ¬¡æµ‹è¯•çš„æ—¶å€™ï¼Œæ¶‰åŠåˆ°è¿™ä¸¤ä¸ªæ“ä½œç¬¦çš„é¢˜ç›®å°±æ˜¯çè’™ã€‚\nåæ¥å‘ç°ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦ä¼¼ä¹æ˜¯æµ‹è¯•ä¸­ç»å¸¸è€ƒå¯Ÿçš„å¯¹è±¡ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶ä¸€å®šè¦æŠŠå®ƒä»¬å¼„æ‡‚ï¼\n\n\n\nè¯­å¥\næ“ä½œç¬¦\nå¯¹åº”ç»“æœ\n\n\n\nc &#x3D; a &amp; b\n&amp;æŒ‰ä½ä¸\nå…¨1ä¸º1ï¼Œå¦åˆ™0\n\n\nc &#x3D; a | b\n| æŒ‰ä½æˆ–\næœ‰1ä¸º1ï¼Œå¦åˆ™0\n\n\nc &#x3D; a ^ b\n^æŒ‰ä½å¼‚æˆ–\nç›¸åŒä¸º0ï¼Œä¸åŒä¸º1\n\n\n\né¢˜è§£å¼‚æˆ–æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œa^a=0ï¼Œa^0=a\n\næ¡ˆä¾‹1è¾“å…¥ï¼šnums = [1,2,10,4,1,4,3,3]è¾“å‡ºï¼š[2,10] æˆ– [10,2]\n\nä»¥é¢˜ç›®æ‰€ç»™å‚è€ƒ2ä¸ºä¾‹\n1^2^10^4^1^4^3^3 = 2^10\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æŠŠæ‰€ç»™æ•°æ®å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå…¶ç»“æœæ­£å¥½æ˜¯æˆ‘ä»¬éœ€è¦çš„ä¸¤ä¸ªæ•°ç›¸å¼‚æˆ–ã€‚\nä½†æ˜¯æˆ‘ä»¬å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æŠŠå·²ç»å¼‚æˆ–äº†çš„ä¸¤ä¸ªæ•°æ‹†å¼€\nè¿™æ—¶å€™å°±éœ€è¦å¯¹å¾…æŸ¥æ‰¾çš„æ•°æ®è¿›è¡Œåˆ†ç»„\n\nåˆ†ç»„çš„ç›®çš„ï¼šè®©ä¸¤ä¸ªå•èº«ç‹—åˆ†å¼€åˆ°ä¸¤ç»„æ•°æ®ä¸­\nè¿™ä¸¤ç»„æ•°æ®ï¼Œé™¤ä¸¤ä¸ªå•èº«ç‹—å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡\n\n1 1 3 3 4 4 2 10\n\nä¸ºä»€ä¹ˆæ˜¯è¿™ä¹ˆåˆ†çš„å‘¢ï¼Ÿ\n10: 10102:  001010^2=1000\n\nå¯è§å•èº«ç‹—10å’Œ2ä¹‹é—´ï¼Œæºç ç¬¬å››ä½æ‰æœ‰å·®åˆ«\n1ï¼š 00012ï¼š 00103ï¼š 00114ï¼š 010010ï¼š1010\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç¬¬4ä½çš„å·®è·ï¼Œå°†æ•°æ®åˆ†ä¸ºä¸¤ç»„\n\nç¬¬ä¸€ç»„æ˜¯1~4ï¼Œå®ƒä»¬çš„ç¬¬4ä½éƒ½æ˜¯0\n\nç¬¬äºŒç»„æ˜¯10ï¼Œåªæœ‰å®ƒçš„ç¬¬å››ä½æ˜¯1\n\n\nå†æ ¹æ®å‰é¢å¼‚æˆ–çš„ç‰¹ç‚¹ï¼Œå¯¹è¿™ä¸¤ç»„æ•°å­—è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå³å¯å¾—åˆ°å•ç”Ÿç‹—10å’Œ2\n1^1^3^3^4^4^2 = 210 = 10\n\n\næ¡ˆä¾‹2ä¸Šé¢è¿™ç»„æ•°æ®æœ‰äº›ç‰¹æ®Šï¼Œç¬¬äºŒç»„é‡Œé¢åªæœ‰10ä¸€ä¸ªæ•°å­—\næˆ‘ä»¬å†æ¥çœ‹ä¸€ç»„æ•°æ®\n1 2 3 4 5 1 2 3 4 6\n\nè¿™ä¸€ç»„æ•°æ®ä¸­ï¼Œå•èº«ç‹—æ˜¯5å’Œ6\n5ï¼š01016ï¼š01105^6 = 0011\n\nå¯è§5å’Œ6çš„æºç ä¸­ï¼Œç¬¬ä¸€ã€äºŒä½éƒ½æœ‰åŒºåˆ«\nè¿™é‡Œæˆ‘ä»¬å–ç¬¬ä¸€ä½æ¥åˆ†ç±»å³å¯\n1ï¼š00012ï¼š00103ï¼š00114ï¼š01005ï¼š01016ï¼š0110\n\näºŒè¿›åˆ¶ç¬¬ä¸€ä½ä¸º1çš„æ•°ï¼Œæ”¾å…¥ä¸€ç»„\n1 1 3 3 52 2 4 4 6\n\nå¯¹å®ƒä»¬è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°å•èº«ç‹—5å’Œ6\n\næ•²ä»£ç //æ–¹æ³•2-å¼‚æˆ–int* singleNumbers(int* nums, int numsSize, int* returnSize) &#123;\t//1.å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·    int i = 0;    int k = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        k ^= nums[i];        //4^1^4^6 = 1^6    &#125;    //2.åˆ¤æ–­kçš„äºŒè¿›åˆ¶ç¬¬å‡ ä½æ˜¯1    int set = 0;    for (i = 0; i &lt; 32; i++)    &#123;        if (((k &gt;&gt; i) &amp; 1) == 1)//æ³¨æ„æ“ä½œç¬¦ä¼˜å…ˆçº§        &#123;            set = i;//ç¬¬iä½ä¸º1            break;        &#125;    &#125;    //3.ä»¥ç¬¬setä½ä¸º1è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ•°åˆ†å¼€    int n = 0;    int m = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        if (((nums[i] &gt;&gt; set) &amp; 1) == 1)        &#123;            n ^= nums[i];        &#125;        else        &#123;            m ^= nums[i];        &#125;    &#125;        int* result = (int*)calloc(2, sizeof(int));    //è¿”å›çš„æ•°ç»„å¿…é¡»ç”¨åŠ¨æ€å†…å­˜ç®¡ç†æ¥åˆ›å»º    result[0] = n;    result[1] = m;    *returnSize = 2;    return result;&#125;\n\néªŒè¯è‡ªå·±æ•´ä¸€ä¸ªmainå‡½æ•°æ¥æµ‹è¯•ä¸€ä¸‹ä»£ç æ˜¯å¦èƒ½è¾¾åˆ°è¦æ±‚ï¼ŒæˆåŠŸï¼\n\nåšæ¥å£é¢˜çš„æ—¶å€™ï¼Œå¦‚æœå‡ºç°è¾“å‡ºé”™è¯¯çš„æƒ…å†µï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªmainå‡½æ•°å¹¶è°ƒè¯•æ¥æ‰¾å‡ºé”™è¯¯\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œçš„ç”¨æ—¶è¿œè¿œå°äºæ–¹æ³•1çš„ç”¨æ—¶\nå‡»è´¥äº†92.9%çš„ç”¨æˆ·ï¼\n\nä½ å­¦ä¼šäº†å—ğŸ˜\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªğŸ‘å†èµ°å‘—~\n\næ‘¸é±¼ä¹‹å‘ç°å¦å¤–ä¸€é“ä¸€æ ·çš„é¢˜\nhttps://leetcode.cn/problems/single-number-iii/submissions/\n\nclass Solution &#123;public:    vector&lt;int&gt; singleNumber(vector&lt;int&gt;&amp; nums) &#123;        //1.å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·        int numsSize=nums.size();        int i = 0;        int k = 0;        for (i = 0; i &lt; numsSize; i++)        &#123;            k ^= nums[i];            //4^1^4^6 = 1^6        &#125;        //2.åˆ¤æ–­kçš„äºŒè¿›åˆ¶ç¬¬å‡ ä½æ˜¯1        int set = 0;        for (i = 0; i &lt; 32; i++)        &#123;            if (((k &gt;&gt; i) &amp; 1) == 1)//æ³¨æ„æ“ä½œç¬¦ä¼˜å…ˆçº§            &#123;                set = i;//ç¬¬iä½ä¸º1                break;            &#125;        &#125;        //3.ä»¥ç¬¬setä½ä¸º1è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ•°åˆ†å¼€        int n = 0;        int m = 0;        for (i = 0; i &lt; numsSize; i++)        &#123;            if (((nums[i] &gt;&gt; set) &amp; 1) == 1)            &#123;                n ^= nums[i];            &#125;            else            &#123;                m ^= nums[i];            &#125;        &#125;                vector&lt;int&gt; retV;        retV.push_back(n);        retV.push_back(m);        return retV;    &#125;&#125;;\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","leetcode"]},{"title":"ã€Cè¯­è¨€ã€‘è“æ¡¥æ¯/ACMç«èµ›å…¥é—¨ A+B for Input-Output Practice","url":"/2021/10/26/leetcode/%E8%93%9D%E6%A1%A5%E6%9D%AFA+B/","content":"[TOC]\nã€Cè¯­è¨€ã€‘è“æ¡¥æ¯&#x2F;ACMç«èµ›&#x2F;A+Bä¸Šæ¬¡å‚åŠ äº†å­¦æ ¡çš„è“æ¡¥æ¯æ ¡é˜Ÿé€‰æ‹”â€œé›†è®­â€\nç¬¬ä¸€æ¬¡â€œæµ‹è¯•â€å°±ç›´æ¥è¢«è€ƒå‚»äº†ï¼Œè™½ç„¶éƒ½æ˜¯æˆ‘â€œå¥½åƒâ€å­¦è¿‡çš„å†…å®¹ï¼Œä½†æˆ‘é‡Œé‡Œå¤–å¤–çœŸçš„çœ‹ä¸å‡ºæ¥åˆ°åº•æ€ä¹ˆå†™ï¼Œå¤ªç¦»è°±äº†ï¼\nè€Œä¸”å­¦é•¿ç”¨çš„éƒ½æ˜¯C++ï¼Œæˆ‘åªå­¦äº†cè¯­è¨€ï¼Œåé¢çš„é¢˜ç›®å®Œå…¨çœ‹ä¸æ‡‚äº†ã€‚\nå½“ç„¶ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯æˆ‘å¤ªèœäº†\nåœ¨è¿™é‡ŒæŠŠæˆ‘æäº†å¥½ä¹…ç»ˆäºå¼„æ‡‚çš„A+Bé¢˜ç›®åˆ†äº«ç»™å¤§å®¶\n\nå¼€å§‹é›†è®­ï¼šA+Bä¸æœ‰æ‰‹å°±è¡Œï¼Ÿ\nç»“æŸåï¼šæˆ‘æ‰‹å‘¢?\n\n\næ³¨ï¼šé¢˜ç›®æ˜¯è‹±æ–‡çš„ï¼ï¼ï¼ï¼\n\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(I)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nTooâ€‚easy?!â€‚Ofâ€‚course!â€‚Iâ€‚speciallyâ€‚designedâ€‚theâ€‚problemâ€‚forâ€‚acmâ€‚beginners.â€‚â€‚\nYouâ€‚mustâ€‚haveâ€‚foundâ€‚thatâ€‚someâ€‚problemsâ€‚haveâ€‚theâ€‚sameâ€‚titlesâ€‚withâ€‚thisâ€‚one,â€‚yes,â€‚allâ€‚theseâ€‚problemsâ€‚wereâ€‚designedâ€‚forâ€‚theâ€‚sameâ€‚aim.â€‚â€‚\nInputâ€‚\nTheâ€‚inputâ€‚willâ€‚consistâ€‚ofâ€‚aâ€‚seriesâ€‚ofâ€‚pairsâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚separatedâ€‚byâ€‚aâ€‚space,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚â€‚â€‚â€‚\nSampleâ€‚Inputâ€‚\n1â€‚510â€‚20\n\nSampleâ€‚Outputâ€‚\n630â€‚\n\n\n\nè¿™é“é¢˜çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œæˆ‘ä¸€ä¸Šæ¥å°±æ‰“ä¸Šäº†ä¸¤è¡Œscanfï¼Œå•ªçš„ä¸€ä¸‹å°±æäº¤äº†\nç„¶åç³»ç»Ÿå•ªçš„ä¸€ä¸‹ç»™æˆ‘è¿”å›äº†ä¸€ä¸ªå¤§å¤§çš„çº¢è‰²WRONG ANSWER\næ­£ç¡®åšæ³•å¦‚ä¸‹ï¼š\n#include&lt;stdio.h&gt;â€‚â€‚int main()â€‚â€‚&#123;â€‚â€‚â€‚â€‚intâ€‚a,b;â€‚â€‚â€‚â€‚while(scanf(&quot;%d%d&quot;,&amp;a,&amp;b)!=EOF)       printf(&quot;%d\\n&quot;,a+b);â€‚â€‚&#125;â€‚â€‚â€‚\n\nä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸¤è¡Œscanfçš„åŸå› æ˜¯\né¢˜ç›®éœ€è¦çš„æ˜¯è¿™ä¸²ä»£ç èƒ½å®Œæ•´åœ°ä½¿ç”¨å¤šæ¬¡ï¼Œè€Œä¸æ˜¯ç®€å•çš„åªæ‰§è¡Œä¸¤æ¬¡\nåœ¨whileé‡Œä½¿ç”¨EOFçš„åŸå› è¿™é‡Œä½¿ç”¨eofï¼Œå¯ä»¥è®©ç¨‹åºåœ¨æœªè¾“å…¥é”™è¯¯çš„æƒ…å†µä¸‹ä¸€ç›´è¿›è¡Œå¾ªç¯è®¡ç®—a+b\nscanfå‡½æ•°çš„è¿”å›å€¼\nscanfå‡½æ•°è¿”å›æˆåŠŸè¯»å…¥çš„æ•°æ®é¡¹æ•°ï¼Œè¯»å…¥æ•°æ®æ—¶é‡åˆ°äº†â€œæ–‡ä»¶ç»“æŸâ€åˆ™è¿”å›EOFã€‚\nå¦‚ï¼šscanf(â€œ%d %dâ€,&amp;a,&amp;b);\nå‡½æ•°è¿”å›å€¼ä¸ºintå‹ã€‚å¦‚æœaå’Œbéƒ½è¢«æˆåŠŸè¯»å…¥ï¼Œé‚£ä¹ˆscanfçš„è¿”å›å€¼å°±æ˜¯2ï¼›\nå¦‚æœåªæœ‰aè¢«æˆåŠŸè¯»å…¥ï¼Œè¿”å›å€¼ä¸º1ï¼›\nå¦‚æœaå’Œbéƒ½æœªè¢«æˆåŠŸè¯»å…¥ï¼Œè¿”å›å€¼ä¸º0ï¼›\nå¦‚æœé‡åˆ°é”™è¯¯æˆ–é‡åˆ°end of fileï¼Œè¿”å›å€¼ä¸ºEOFã€‚end of fileä¸ºCtrl+z æˆ–è€…Ctrl+dã€‚\n[æ‘˜è‡ªç™¾åº¦çŸ¥é“ç”¨æˆ·@çºµæ¨ªç«–å±çš„å›ç­”]\n\nEOFçš„å€¼ä¸º-1ï¼Œä½†ä¸èƒ½ç®€å•çš„ç”¨-1ä»£æ›¿EOF\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(II)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nInputâ€‚\nInputâ€‚containsâ€‚anâ€‚integerâ€‚Nâ€‚inâ€‚theâ€‚firstâ€‚line,â€‚andâ€‚thenâ€‚Nâ€‚linesâ€‚follow.â€‚Eachâ€‚lineâ€‚consistsâ€‚ofâ€‚aâ€‚pairâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚separatedâ€‚byâ€‚aâ€‚space,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚\nSampleâ€‚Inputâ€‚\n21â€‚510â€‚20\n\nSampleâ€‚Outputâ€‚\n630\n\n\n\nè¿™é“é¢˜çš„æ„æ€å…¶å®å°±æ˜¯åœ¨é”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ä¹‹å‰ï¼Œå…ˆé”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ç»„æ•°ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºè¡Œæ•°ï¼‰\nè¦æ±‚æˆ‘ä»¬ç”¨å¾ªç¯çš„æ–¹å¼å®Œæˆâ€œç›¸åŠ æ•°å­—è¡Œæ•°â€çš„æ“ä½œ\nå®Œæˆnè¡Œåéœ€è¦è·³å‡ºè¯¥a+bçš„å¾ªç¯\n#include&lt;stdio.h&gt;int main()&#123;    int a, b;    int i, j;    int n;    scanf(&quot;%d&quot;, &amp;n);//nå³ä¸ºè¡Œæ•°    int sum[20] = &#123; 0 &#125;;    for (i = 0; i &lt; n; i++)    &#123;        scanf(&quot;%d %d&quot;, &amp;a, &amp;b);        sum[i] = a + b;    &#125;    for (j = 0; j &lt; n; j++)    &#123;        printf(&quot;%d\\n&quot;, sum[j]);    &#125;&#125;\n\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(III)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nInputâ€‚\nInputâ€‚containsâ€‚multipleâ€‚testâ€‚cases.â€‚Eachâ€‚testâ€‚caseâ€‚containsâ€‚aâ€‚pairâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚Aâ€‚testâ€‚caseâ€‚containingâ€‚0â€‚0â€‚terminatesâ€‚theâ€‚inputâ€‚andâ€‚thisâ€‚testâ€‚caseâ€‚isâ€‚notâ€‚toâ€‚beâ€‚processed.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚\nSampleâ€‚Inputâ€‚\n1â€‚5â€‚10â€‚200â€‚0â€‚\n\nSampleâ€‚Outputâ€‚\n630\n\nè¿™é“é¢˜çš„è¦æ±‚æ˜¯a+bçš„ç¨‹åºåœ¨è¯»å–åˆ°ä¸¤ä¸ª0 0çš„æ—¶å€™ä¼šé€€å‡ºå¾ªç¯\nä¸”ä»£ç ä¸ä¼šå¤„ç†è¿™ä¸¤ä¸ª0 0ï¼ˆæŠŠå®ƒä»¬å½“ä½œå¾ªç¯ç»“æŸæ ‡å¿—ï¼‰\n#include&lt;stdio.h&gt;int main()&#123;\tint a = 0, b = 0, c;\twhile (1)\t&#123;\t\tscanf(&quot;%d%d&quot;, &amp;a, &amp;b);\t\tif (a == 0 &amp;&amp; b == 0)//åˆ¤æ–­é”®å…¥çš„æ˜¯å¦ä¸º0 0\t\t&#123;\t\t\tbreak;//æ˜¯0 0ï¼Œé€€å‡ºå¾ªç¯\t\t&#125;\t\telse//ä¸æ˜¯0 0ï¼Œç»§ç»­è¿è¡Œa+b\t\t&#123;\t\t\tc = a + b;\t\t\tprintf(&quot;%d\\n&quot;, c);\t\t&#125;\t\t\t&#125;\treturn 0;&#125;\n\n\nA+B  for  Input-Output  Practice (IV)Description:\nYour task is to Calculate the sum of some integers.\nInput:\nInput contains multiple test cases. Each test case contains a integer N, and then N integers follow in the same line. A test case starting with 0 terminates the input and this test case is not to be processed.\nOutput:\nFor each group of input integers you should output their sum in one line, and with one line of output for each line in input.\nSample Input:\n4 1 2 3 45 1 2 3 4 50 \n\nSample Output:\n1015\n\nä¸å‰é¢çš„ä¸¤ä¸ªæ•°å­—ç›¸åŠ ä¸åŒï¼Œè¿™é“é¢˜çš„è¦æ±‚æ˜¯ï¼Œå…ˆè¾“å…¥ä½ éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°ï¼Œå†ä¾æ¬¡é”®å…¥æ•°å­—\né‡åˆ°0çš„æ—¶å€™åœæ­¢å¾ªç¯\n\nè¿™ä¸ª0å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå³ä»£è¡¨éœ€è¦â€œ0ä¸ªæ•°å­—ç›¸åŠ â€\nå¦‚æœæ˜¯éœ€è¦ç›¸åŠ çš„æ•°å­—é‡Œæœ‰0ï¼Œä¸åº”é€€å‡ºå¾ªç¯\n\n#include&lt;stdio.h&gt;int main() &#123;\tint n, sum, i, t;\twhile (scanf(&quot;%d&quot;, &amp;n) != EOF &amp;&amp; n != 0) //åˆ¤æ–­æ˜¯å¦ç­‰äº0\t&#123;\t\tsum = 0;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;t);\t\t\tsum = sum + t;//ä¸æ–­å¾€sumé‡Œé¢åŠ æ•°å­—\t\t&#125;\t\tprintf(&quot;%d\\n&quot;, sum);\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (V)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains an integer N in the first line, and then N lines follow. Each line starts with a integer M, and then M integers follow in the same line.\nOutput:\nFor each group of input integers you should output their sum in one line, and with one line of output for each line in input.\nSample Input:\n24 1 2 3 45 1 2 3 4 5\n\nSample Output:\n1015\n\nè¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜çš„è¦æ±‚å·®ä¸å¤šï¼Œç»“åˆäº†ç¬¬äºŒé¢˜çš„å†…å®¹ï¼Œå³æˆ‘ä»¬åœ¨é”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ä¹‹å‰ï¼Œè¦å…ˆé”®å…¥â€œè¡Œæ•°â€\nå½“ç„¶å®ƒä¹Ÿå°‘äº†åœ¨é‡åˆ°0çš„æ—¶å€™é€€å‡ºå¾ªç¯\n#include&lt;stdio.h&gt;int main() &#123;\tint n, a, b, i, j, sum;\tsum = 0;\twhile (scanf(&quot;%d\\n&quot;, &amp;n) != EOF) \t&#123;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;b);\t\t\tfor (j = 0; j &lt; b; j++) \t\t\t&#123;\t\t\t\tscanf(&quot;%d&quot;, &amp;a);\t\t\t\tsum += a;\t\t\t&#125;\t\t\tprintf(&quot;%d\\n&quot;, sum);\t\t\tsum = 0;\t\t&#125;\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (VI)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains multiple test cases, and one case one line. Each case starts with an integer N, and then N integers follow in the same line.\nOutput:\nFor each test case you should output the sum of N integers in one line, and with one line of output for each line in input.\nSample Input:\n4 1 2 3 45 1 2 3 4 5\n\nSample Output:\n1015\n\nè¿™é“é¢˜å’Œç¬¬å››é¢˜å¾ˆåƒï¼Œå°±ç¼ºå°‘äº†é‡åˆ°0åœæ­¢\n#include&lt;stdio.h&gt;int main() &#123;\tint n, sum, i, t;\twhile (scanf(&quot;%d&quot;, &amp;n) != EOF) \t&#123;\t\tsum = 0;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;t);\t\t\tsum = sum + t;\t\t&#125;\t\tprintf(&quot;%d\\n&quot;, sum);\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (VII)Description:\nYour task is to Calculate a + b.\nInput:\nThe input will consist of a series of pairs of integers a and b, separated by a space, one pair of integers per line.\nOutput:\nFor each pair of input integers a and b you should output the sum of a and b, and followed by a blank line.\nSample Input:\n1 510 20\n\nSample Output:\n630\n\nè¿™é“é¢˜å¤šäº†ä¸€ä¸ªè¦æ±‚ï¼Œâ€œfollowed by a blank line.â€\néœ€è¦æˆ‘ä»¬åœ¨ä»£ç å®Œæˆåï¼Œè·Ÿç€æ‰“å°ä¸€ä¸ªç©ºè¡Œï¼Œä¹Ÿå°±æ˜¯\\n\n#include&lt;stdio.h&gt;int main()&#123;    int a, b;    while (scanf(&quot;%d %d&quot;, &amp;a, &amp;b) != EOF)        printf(&quot;%d\\n&quot;, a + b);        printf(&quot;\\n&quot;);//æ‰“å°ç©ºè¡Œ    return 0;&#125;\n\n\nA+B  for  Input-Output  Practice (VIII)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains an integer N in the first line, and then N lines follow. Each line starts with a integer M, and then M integers follow in the same line.\nOutput:\nFor each group of input integers you should output their sum in one line, and you must note that there is a blank line between outputs.\nSample Input:\n34 1 2 3 45 1 2 3 4 53 1 2 3\n\nSample Output:\n10156\n\nè¿™é“é¢˜çš„è¦æ±‚ç»“åˆäº†ä¸Šé¢çš„é¢˜ç›®\n\néœ€è¦å…ˆé”®å…¥â€œè¡Œæ•°â€\néœ€è¦åœ¨ç›¸åŠ ä¹‹å‰é”®å…¥ éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°\næ‰“å°ç­”æ¡ˆåéœ€è¦å†æ‰“å°ä¸€ä¸ª ç©ºè¡Œ\n\nä¹Ÿä¸æ€•å¤§å®¶ç¬‘è¯ï¼Œè¿™é“é¢˜æ˜¯æˆ‘æŠ„çš„ï¼ŒåŸåšå®¢åœ¨è¿™ [ç‚¹æˆ‘]\n\nåŸåšå®¢ä¸­åœ¨forå¾ªç¯çš„scanfå‰å¤šäº†ä¸€ä¸ªif(i&#x3D;&#x3D;0)çš„ä»£ç ï¼Œæˆ‘å®åœ¨æ²¡çœ‹æ‡‚è¿™å¥ä»£ç çš„æ„ä¹‰ï¼Œå»æ‰ä¹‹åç³»ç»Ÿä¾æ—§åˆ¤å¯¹ï¼\n\n#include&lt;stdio.h&gt;int main()&#123;    int test,t=0;     scanf(&quot;%d&quot;,&amp;test);//è¡Œæ•°    while(test--)//æ¯æ‰§è¡Œä¸€æ¬¡ï¼Œå‡å°‘ä¸€è¡Œ    &#123;    int s=0,i;    int n,a[1000];//ç”¨æ•°ç»„çš„æ–¹å¼å®Œæˆç›¸åŠ     scanf(&quot;%d&quot;,&amp;n);//éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°    for(i=0;i&lt;n;i++)    &#123;            scanf(&quot;%d&quot;,&amp;a[i]);            s+=a[i];    &#125;    t++;    if(t&gt;1)        printf(&quot;\\n&quot;);    printf(&quot;%d\\n&quot;,s);    &#125; return 0;&#125;\n\n\nå‘¼ï¼ç»ˆäºå†™å®Œè¿™ç¯‡åšå®¢äº†\nå¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµå…³æ³¨æ”¶è—å§ï¼\nè¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼\n","categories":["æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜"]},{"title":"ã€Nasã€‘ç»¿è”å®‰è£…CentOS8å®¹å™¨","url":"/2023/02/23/nas/10%E7%BB%BF%E8%81%94%E5%AE%89%E8%A3%85centos/","content":"ç»¿è”å®‰è£…CentOS8å®¹å™¨\n\n\n1.åˆ›å»ºå®¹å™¨å…ˆåœ¨å®¢æˆ·ç«¯å®‰è£…å®¹å™¨ï¼Œéšåç”¨xshellè¿›å…¥ç»¿è”çš„sshï¼ˆå¦‚ä½•å¼€å¯sshå‚è€ƒè§†é¢‘ï¼‰\n\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯åœ¨å®¢æˆ·ç«¯é‡Œé¢å¼€å¯è¿œç¨‹è°ƒè¯•ï¼Œå°†è¿œç¨‹è°ƒè¯•çš„éªŒè¯ç å’Œä¸‹é¢çš„å¯†ç æ‹¼èµ·æ¥ï¼Œå°±æ˜¯ç»¿è”sshçš„rootå¯†ç \nL#W$%W1uGa\n\nç«¯å£æ˜¯922ï¼Œåˆ©ç”¨puttyæˆ–è€…xshellç­‰è½¯ä»¶é“¾æ¥ï¼ˆæ¨èxshellï¼‰\nssh ç»¿è”æœ¬åœ°ip:922\n\nä¼šå‡ºç°æç¤ºæ¡†è¦ä½ è¾“å…¥è´¦æˆ·å’Œå¯†ç ï¼Œè´¦æˆ·å†™rootï¼Œå¯†ç ç”¨ä¸Šé¢æ‹¼å¥½çš„å¯†ç ï¼Œç›´æ¥å¤åˆ¶åï¼Œshift+insç²˜è´´åˆ°ç»ˆç«¯åå›è½¦\næ³¨æ„ï¼Œç»ˆç«¯å†…å¡«å†™å¯†ç æ˜¯ä¸ä¼šæœ‰ä»»ä½•æç¤ºçš„ï¼Œéœ€è¦ç›²æ•²\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä»¥ç‰¹æƒæ¨¡å¼åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œå¹¶å°†å®¹å™¨å†…çš„22ç«¯å£æ˜ å°„ç»™ä¸»æœºçš„22222ç«¯å£\ndocker run -d \\-p 22222:22 \\--name centos \\--privileged=true \\centos:latest \\/usr/sbin/init\n\næå®šäº†ä¹‹åï¼Œè¿›ç»¿è”å®¢æˆ·ç«¯ï¼Œåœæ­¢å®¹å™¨è¿è¡Œï¼Œè®¾ç½®ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ç»™å®¹å™¨å†…éƒ¨ï¼Œæ–¹ä¾¿dockerå®¹å™¨å’Œnasèµ„æ–™äº’ä¼ ï¼ˆä¸è®¾ç½®ä¹Ÿä¸æ˜¯ä¸è¡Œï¼‰\n\næ³¨æ„ï¼Œåœ¨å®¢æˆ·ç«¯é…ç½®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ‰€æœ‰èƒ½ç»™çš„é€‰é¡¹ï¼ˆ-i -t é«˜çº§é€‰é¡¹ï¼‰å…¨éƒ½å‹¾ä¸Šï¼Œé¿å…dockerå®‰è£…çš„centosç¼ºå°‘æƒé™ï¼›\n\nå›åˆ°ç»¿è”çš„sshç»ˆç«¯ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨\ndocker exec -it centos /bin/bash\n\nä½ ä¹Ÿå¯ä»¥ç”¨å®¢æˆ·ç«¯é‡Œé¢çš„ç»ˆç«¯åŠŸèƒ½ï¼Œä½†æ˜¯é‚£ä¸ªå¤ªç®€é™‹äº†ï¼Œä¸å¤ªå¥½ç”¨ã€‚æ—¢ç„¶éƒ½å·²ç»èƒ½sshè¿ä¸Šç»¿è”äº†ï¼Œé‚£å®Œå…¨æ²¡å¿…è¦ç”¨å®¢æˆ·ç«¯\n1.1 åˆ¤æ–­æ˜¯å¦æˆåŠŸä»¥ç‰¹æƒæ¨¡å¼å®‰è£…systemctl \n\næ‰§è¡Œæ­¤å‘½ä»¤ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å¦‚ä¸‹è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰ï¼Œä»£è¡¨æ²¡æœ‰æˆåŠŸä»¥ç‰¹æƒæ¨¡å¼å®‰è£…ã€‚systemctlåœ¨linuxä¸­å¾ˆå¸¸ç”¨ï¼Œä¸”å¼€å¯å®¹å™¨çš„sshä¹Ÿéœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤ï¼\n\nå¦‚æœæ²¡èƒ½æˆåŠŸä½¿ç”¨ï¼Œè¯·é‡è¯•ä¸Šé¢çš„æ­¥éª¤\n2.æ›´æ–°è½¯ä»¶yum update -y &amp;&amp; yum upgrade -y\n\nç¬¬ä¸€æ¬¡æ‰§è¡Œæ­¤å‘½ä»¤çš„æ—¶å€™ï¼Œå¤§æ¦‚ç‡ä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™\nError: Failed to download metadata for repo &#x27;appstream&#x27;: Cannot prepare internal mirrorlist\n\nå‚è€ƒ Error: Failed to download metadata for repo â€˜appstreamâ€˜: Cannot prepare internal mirrorlist åšå®¢ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è§£å†³è¿™ä¸ªé—®é¢˜\ncd /etc/yum.repos.d/\n\nsed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*\n\nyum makecache\n\næ‰§è¡Œmakecacheåï¼Œç³»ç»Ÿä¼šè·å–ä¸€äº›å†…å®¹ï¼Œè®©åæˆ‘ä»¬é‡æ–°æŒ‡å‘å¦‚ä¸‹å‘½ä»¤\nyum update -y &amp;&amp; yum upgrade -y\n\nä¼šè¿›è¡Œä¸€è¿ä¸²çš„æ›´æ–°ï¼Œç›´åˆ°å‡ºç°ä¸‹é¢çš„completeçª—å£ï¼Œä»£è¡¨æˆåŠŸï¼\n\n\n3.sshé“¾æ¥3.1 å®‰è£…passwdä¸€ä¸ªlinuxç³»ç»Ÿï¼Œä¸èƒ½sshé“¾æ¥å¯ä¸è¡Œï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°ä¸€ä¸‹å†…å®¹ï¼Œå®ç°sshé“¾æ¥\nyum install passwd\n\nå…ˆå®‰è£…passwdå‘½ä»¤ï¼Œè®¾ç½®rootçš„å¯†ç \npasswd\n\nä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥å¯†ç ï¼Œç›²æ•²å°±è¡Œ\n3.2 å®‰è£…vimå’Œopensshç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…vimå’Œopenssh\nyum install vim openssh-server openssh-clients -y\n\nå®‰è£…å®Œæ¯•åï¼Œä¿®æ”¹sshçš„é…ç½®æ–‡ä»¶ï¼ˆvimçš„ä½¿ç”¨è¯·ç™¾åº¦ï¼‰\nvim /etc/ssh/sshd_config\n\nå–æ¶ˆæ³¨é‡Šä¸‹é¢çš„å­—æ®µå³å¯å¼€å¯ssh\nPort 22ListenAddress 0.0.0.0ListenAddress ::PermitRootLogin yesPubkeyAuthentication yesAuthorizedKeysFile .ssh/authorized_keys\n\nä¿®æ”¹å¥½äº†ä¹‹åï¼Œé€€å‡ºç»ˆç«¯ï¼›\nç”¨ä¸‹é¢çš„å‘½ä»¤é‡å¯sshæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨ssh\nsystemctl restart sshd.servicesystemctl enable sshd.service\n\nå¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤åº”è¯¥ä»€ä¹ˆéƒ½ä¸ä¼šè¾“å‡ºï¼\n3.3 å°è¯•sshé“¾æ¥ssh ç»¿è”æœ¬åœ°ip:22222\n\nä¼šå¼¹å‡ºæ¥è®©ä½ éªŒè¯ç™»å½•ï¼Œåˆ°è¿™é‡Œå°±æ˜¯okäº†\n\n3.4 é…ç½®lså‘½ä»¤é¢œè‰²vim /etc/profile\n\nåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹å­—æ®µ\nexport LS_OPTIONS=&#x27;--color=auto&#x27;alias ls=&#x27;ls $LS_OPTIONS&#x27;alias ll=&#x27;ls $LS_OPTIONS -lA&#x27;\n\néšåé‡å¯å®¹å™¨å³å¯\n3.5 é…ç½®yumé˜¿ç‹¸æºå¤‡ä»½åŸæœ‰æº\ntar -zcvf CentOS-bk.tar.gz /etc/yum.repos.d/CentOS-*\n\nçœ‹çœ‹æœ¬åœ°çš„centosæ˜¯ä»€ä¹ˆç‰ˆæœ¬\ncat /etc/redhat-release\n\næˆ‘è¿™é‡Œçš„ç‰ˆæœ¬æ˜¯8.5\nCentOS Linux release 8.5.2111\n\næ›¿æ¢é˜¿é‡Œæº\ncurl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repocurl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-8.repo\n\né‡æ–°ç”Ÿæˆç¼“å­˜\nyum clean allyum makecache\n\n\nç°åœ¨é€Ÿåº¦å¿«å¤šäº†ï¼\nå¼€ç”¨ï¼åç»­çš„ä½¿ç”¨å°±ä¸å†å¤šè¯´æ‹‰ï¼æ—¢ç„¶ä½ æƒ³å®‰è£…centosï¼Œæƒ³å¿…å¯¹linuxçš„äº†è§£è‚¯å®šæ¯”æˆ‘å¤šğŸ˜‚\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["CentOS","nas"]},{"title":"ã€Nasã€‘å¨è”é€šts216æŠ˜è…¾æ—¥å¿—ï¼ˆå·²å‡ºæ‰‹ï¼‰","url":"/2022/11/06/nas/1%E5%A8%81%E8%81%94%E9%80%9Ats216%E6%8A%98%E8%85%BE/","content":"æœ¬ç¯‡åšå®¢è®°å½•äº†æˆ‘ä½¿ç”¨å¨è”é€šts216çš„æŠ˜è…¾è®°å½•ã€‚nasè´­å…¥äº2022å¹´åŒ11ï¼Œäº¬ä¸œè‡ªè¥\n\n\nå…³äºç³»ç»Ÿåˆå§‹åŒ–ç­‰å†…å®¹ä¸åšè®°å½•ï¼Œè¿™éƒ¨åˆ†ç½‘ä¸Šå¯ä»¥æ‰¾åˆ°å¾ˆå¤šæ•™ç¨‹ï¼Œåªè¦æ˜¯å¨è”é€šï¼Œæ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„\n\nåˆå§‹åŒ–å‚è€ƒè§†é¢‘ ã€æ‘é›¨ã€‘å¨è”é€šNASæ•™ç¨‹åˆé›†ï¼ˆé•¿æœŸæ›´æ–°ï¼‰\nå¼€å¯adminè´¦æˆ·ã€å¼€å¯sshéƒ½å¯å‚è€ƒä¸Šé¢è¿™ä¸ªè§†é¢‘çš„æ•™ç¨‹\n\næœ¬åšå®¢ä¸»è¦è®°å½•ä¸€äº›ç½‘ä¸Šä¸å¥½æ‰¾åˆ°çš„è¸©å‘è®°å½•\n\nå¦‚æœæ‚¨è¿˜æ²¡æœ‰é€‰è´­nasï¼Œé‚£ä¹ˆæˆ‘ç»å¯¹ä¸æ¨èæ‚¨è´­ä¹°TS216ï¼›å¨è”é€šçš„ç³»ç»Ÿåœ¨è¿™å—arm CPUä¸Šé¢éå¸¸ä¹‹å¡å¡å¡ï¼é™¤éæ‚¨çš„éœ€æ±‚åªæ˜¯æœ€åŸºæœ¬çš„å¤‡ä»½ï¼Œå¦åˆ™è¿™ä¸ªç³»ç»Ÿä¼šæŠŠä½ å¡åˆ°æ€€ç–‘äººç”ŸğŸ˜¡æ‰“å¼€ä¸€ä¸ªfile stationæ–‡ä»¶ç®¡ç†å™¨å°±è¦15sï¼Œå¦‚æœä½ çš„ç³»ç»Ÿç›˜æ˜¯æœºæ¢°ï¼Œå…³æœºç”šè‡³èŠ±äº†6åˆ†é’Ÿ\n\n\n[TOC]\n1.å…³äºå‚¨å­˜å·çš„é€‰æ‹©å…ˆè¯´ç»“è®ºï¼Œæˆ‘å»ºè®®ç›´æ¥ç”¨å•ä¸ªssdé™æ€å·ä½œä¸ºç³»ç»Ÿç›˜ï¼Œä¸ç”¨raid1å’Œqtier\n\nåè¯è§£é‡Šï¼š\n\nraid0ï¼šä¸¤ä¸ªç›˜åˆå¹¶æˆä¸€ä¸ªç›˜ï¼Œå®¹é‡å’Œé€Ÿåº¦ä¸ºè¿™ä¸¤ä¸ªç›˜çš„å’Œï¼›å¦‚æœå…¶ä¸­ä¸€ä¸ªç›˜æŸåï¼Œåˆ™ä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼ˆæå…¶ä¸å®‰å…¨ï¼Œå®Œå…¨ä¸æ¨èï¼‰\nraid1ï¼šä¸¤ä¸ªç›˜åˆå¹¶æˆä¸€ä¸ªç›˜ï¼Œèµ„æ–™ä¼šåœ¨è¿™ä¸¤ä¸ªç›˜ä¸Šé¢å­˜å‚¨ï¼›æŸå¤±ä¸€ä¸ªç›˜çš„ç©ºé—´ï¼›å¦‚æœä¸¤ä¸ªç›˜çš„å®¹é‡ä¸ä¸€æ ·ï¼Œraid1æœ€åçš„å®¹é‡ç”±å°å®¹é‡çš„ç›˜å†³å®š\nå¨è”é€šqtierï¼šåˆ©ç”¨ssdå’Œæœºæ¢°ç»„æˆæ··åˆå­˜å‚¨ï¼Œå¸¸è®¿é—®çš„æ•°æ®æ”¾ssdï¼Œä¸å¸¸è®¿é—®çš„æ”¾æœºæ¢°ï¼›å¦‚æœå…¶ä¸­ä¸€ä¸ªç›˜æŸåï¼Œä¹Ÿä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±\n\n\n1.1 ä¸ºä»€ä¹ˆåªæ¨èå•ä¸€é™æ€å·ï¼Ÿts216æ˜¯2+2ç›˜ä½çš„nasï¼Œä¸¤ä¸ªm2+ä¸¤ä¸ª3.5\nå’Œç¾¤æ™–ssdåªèƒ½ç”¨äºåŠ é€Ÿä¸åŒï¼Œå¨è”é€šæ˜¯å¯ä»¥æŠŠssdå½“åšä¸€ä¸ªæ­£å¸¸ç›˜ï¼Œæ¥åšç³»ç»Ÿç›˜orå‚¨å­˜ç›˜oråŠ é€Ÿç›˜\nä½†æ˜¯ï¼ï¼ï¼ts216ç”±äºæ˜¯ä½ç«¯å‹å·ï¼Œä¸æ”¯æŒå°†ssdä½œä¸ºå…¨å±€ç¼“å­˜åŠ é€Ÿã€‚æœ€ç›´è§‚çš„è¯æ˜ï¼Œä¾¿æ˜¯å…¶è®¾ç½®ä¸­å‹æ ¹æ²¡æœ‰é«˜é€Ÿç¼“å­˜åŠ é€Ÿè¿™ä¸ªé€‰é¡¹\n\n\næˆ‘è¿˜ä»¥ä¸ºå¨è”é€šè™šå‡å®£ä¼ ã€‚è¯¢é—®å®¢æœåï¼Œæ‰å¾—çŸ¥ts216å¦‚æœæƒ³ç”¨ssdåŠ é€Ÿï¼Œåªèƒ½ç”¨ssdå’Œæœºæ¢°ç»„qtierå·\nä¸è¿‡æˆ‘ä¸ªäººä¸æ¨èä½ è¿™ä¹ˆåšï¼\n\nqtierçš„æƒ…å†µä»¥ä¸‹æ˜¯æˆ‘å¯¹qtieræŠ€æœ¯çš„å°ç»“ï¼Œä¿¡æ¯æºäºäº¬ä¸œè‡ªè¥å®¢æœ\n\nqtierè‡³å°‘éœ€è¦ä¸€ä¸ªssdå’Œä¸€ä¸ªæœºæ¢°ï¼Œç»å¸¸ä½¿ç”¨çš„æ•°æ®ä¼šä»æœºæ¢°ç›˜è½¬ç§»åˆ°ssdä¸­ï¼Œæé«˜è¯»å†™é€Ÿåº¦ã€‚ä¸å¸¸ç”¨çš„æ•°æ®ä¼šæ”¾å›æœºæ¢°å­˜å‚¨\nå¦‚æœè¿™ä¸¤ä¸ªç›˜ä¸­ä»»æ„ä¸€ä¸ªç›˜æŸåï¼Œéƒ½ä¼šå¯¼è‡´qtierå­˜å‚¨æ± ä¸­çš„æ•°æ®ä¸¢å¤±ï¼ˆä½†ä¸ä¼šå¯¼è‡´ç›˜è¿å¸¦æŸåï¼Œåªæ˜¯æ•°æ®æ²¡äº†ï¼‰\nè¿™ä¸€åˆ‡éƒ½æ˜¯å¨è”é€šç³»ç»Ÿå†³å®šçš„ï¼Œä½ æ— æ³•å¾—çŸ¥åˆ°åº•æ•°æ®åœ¨ssdè¿˜æ˜¯åœ¨æœºæ¢°ä¸Š\n\nå¨è”é€šçš„ç³»ç»Ÿéœ€è¦å•ç‹¬æŒ‡å®šæŸä¸€ä¸ªå·å®‰è£…ï¼Œå¦‚æœç”¨qtieræ¥è£…ç³»ç»Ÿï¼Œåè€Œå¢å¤§äº†æ•°æ®ä¸¢å¤±çš„é£é™©ï¼\nä¸¾ä¾‹å¦‚ä¸‹\n\nç›˜Aåçš„å‡ ç‡æ˜¯1%ï¼Œç›˜Båçš„å‡ ç‡1% å®ƒä»¬åŒæ—¶åçš„å‡ ç‡æ˜¯A*Bï¼Œå…¶ä¸­ä¸€ä¸ªåçš„å‡ ç‡æ˜¯A+B\nå‡è®¾æˆ‘ä»¬æŠŠoså®‰è£…åˆ°ç›˜Aå•ç‹¬çš„é™æ€å·ä¸­ï¼Œç³»ç»Ÿæ˜¯å¦å®Œå¥½ï¼Œåªå–å†³äºAç›˜åä¸å\nå‡è®¾æˆ‘ä»¬æŠŠoså®‰è£…åˆ°ç›˜ABçš„qtierä¸­ï¼Œåè€Œå˜æˆäº†åªè¦ABä¸­æœ‰ä¸€ä¸ªç›˜åäº†ï¼Œç³»ç»Ÿç›˜å°±æ— äº†ã€‚ç›¸å½“äºè¦æ‰¿æ‹…ä¸¤ä¸ªç›˜å…¶ä¸­ä¸€ä¸ªåæ‰çš„å‡ ç‡ï¼Œå‡ ç‡å¢å¤§ï¼\nå‡è®¾æˆ‘ä»¬æŠŠoså®‰è£…åˆ°ssd1å’Œssd2çš„raid1é˜µåˆ—ï¼Œosåæ‰çš„å‡ ç‡ä¾æ—§æ˜¯ä¸¤ssdå…¶ä¸­ä¸€ä¸ªåæ‰çš„å‡ ç‡ï¼ˆæ³¨: r1åªèƒ½è®©ä½ æ•°æ®ä¸ä¸¢å¤±ï¼Œä½†å¹¶ä¸æ„å‘³ç€ä½ ä¸éœ€è¦é‡æ–°é…ç½®ç³»ç»Ÿï¼‰\n\nç³»ç»Ÿå‚¨å­˜æ± æŸåä¼šå¯¼è‡´ä»€ä¹ˆï¼Ÿ\n\næ‰€æœ‰è½¯ä»¶æ•°æ®ä¸¢å¤±ï¼Œé…ç½®ä¸¢å¤±ã€‚éœ€è¦é‡æ–°é…ç½®\nå’Œç³»ç»Ÿå‚¨å­˜æ± æ— å…³çš„ç›˜ä¸å—ä»»ä½•å½±å“\n\næ ¹æ®ä»¥ä¸Šçš„æ¡ä»¶å¯çŸ¥ï¼Œå¦‚æœä½ æƒ³æé«˜ç³»ç»Ÿè®¿é—®é€Ÿåº¦ï¼Œç›´æ¥å°†ç³»ç»Ÿè£…å…¥å•ä¸ªå›ºæ€åè€Œæ˜¯æœ€ç¨³å¦¥çš„åŠæ³•ã€‚\nç»“è®ºï¼šä½¿ç”¨å•ä¸ªssdï¼Œè®¾ç½®ä¸ºé™æ€å·ï¼Œä½œä¸ºç³»ç»Ÿç›˜ï¼›å¦å¤–ä¸€ä¸ªm2å£å¯ä»¥ç”¨æ¥åšçƒ­æ•°æ®ç›˜ï¼Œæ¯”å¦‚éŸ³ä¹è¿™ç§ç»å¸¸å¬çš„ä¸œè¥¿ï¼Œå°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›˜é‡Œé¢ã€‚\n\nä¸ªäººä¸æ¨èä¸Šqtier\n\nå¦‚æœä½ å¯¹æ•°æ®å®‰å…¨è¦æ±‚é«˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªssdç»„raid1è£…ç³»ç»Ÿã€‚è¿™æ ·è‡³å°‘èƒ½ä¿è¯æ•°æ®ä¸ä¼šä¸¢ï¼Œé‡æ–°é…ç½®ç¯å¢ƒéƒ½æ˜¯åè¯äº†ã€‚\n\nå¯å¦‚æœç³»ç»Ÿç›˜é‡Œé¢ä¸å­˜èµ„æ–™ï¼Œåˆä½•å¿…åœ¨æ„é‡Œé¢çš„æ•°æ®å‘¢ï¼ŸğŸ˜‚çœé’±getï¼\n\nå…³äºå›ºæ€çš„é€‰è´­ts216çš„å›ºæ€å£æ˜¯pcie3.0x1çš„ï¼Œç†è®ºæœ€å¤§é€Ÿåº¦æ˜¯1Gb/sï¼Œå‡ ä¹æ‰€æœ‰nvmeç›˜çš„é€Ÿåº¦éƒ½å¤§äºè¯¥é€Ÿåº¦ï¼ˆç°åœ¨åŸºæœ¬çœ‹ä¸åˆ°m2çš„sataç›˜äº†ï¼‰\næ‰€ä»¥ï¼Œä½ ä¸éœ€è¦ä¹°ä¸‰æ˜Ÿ980pè¿™ç§é«˜ç«¯ç©æ„ï¼Œåªéœ€è¦ä¹°ä¸€ä¸ªåŸç‰‡çš„ç›˜å°±è¡Œäº†ï¼Œä¸ªäººæ¨èå¦‚ä¸‹ï¼š\n\né—ªè¿ªï¼ˆå…¶å®å°±æ˜¯sn570çš„æ¢çš®ï¼‰\nè¥¿éƒ¨æ•°æ®sn570\né“ ä¾ rc20ï¼ˆé“ ä¾ æ˜¯ä¸œèŠçš„ï¼‰\n\nå®¹é‡å»ºè®®256èµ·æ­¥ï¼Œå¦‚æœç³»ç»Ÿç›˜ä¸å­˜æ•°æ®ï¼Œè¶³å¤Ÿç”¨äº†ã€‚ä½†å¦‚æœä½ æƒ³ç”¨ç³»ç»Ÿç›˜ä½œä¸ºbtä¸‹è½½çš„ç¼“å­˜ç›˜ï¼Œè€Œä½ ç»å¸¸ä¸‹å‡ ågbçš„å¤§ç”µå½±ï¼Œé‚£å»ºè®®è´­ä¹°512gbçš„\n\næˆ‘ä¸ªäººä½¿ç”¨çš„æ˜¯å½±é©°é»‘å°†pro256gbï¼Œä½ å¯èƒ½ä¼šè¯´è¿™ä¸ªç›˜é“å®šä¸ç¨³å•Šï¼\nå’³å’³ï¼Œå½“åˆæˆ‘æ˜¯æƒ³ç€æ‹¿è¿™ä¸ªç›˜ä½œä¸ºå…¨å±€åŠ é€Ÿç›˜çš„ï¼æ²¡æƒ³åˆ°ts216ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œæ— å¥ˆä¹‹ä¸‹åªèƒ½ç”¨æ¥åšç³»ç»Ÿäº†ã€‚åæ­£ç³»ç»Ÿç›˜åäº†ä¹Ÿä¸å½±å“å…¶ä»–æ•°æ®ï¼Œå°±è¿™æ ·å§ï¼Œæ­£å¥½çœ‹çœ‹å®ƒèƒ½ç”¨å¤šä¹…\n\nå»ºè®®å…ˆæ’å…¥å›ºæ€ï¼Œç­‰åˆå§‹åŒ–ç³»ç»Ÿå®Œæˆä¹‹åï¼Œå†æ’å…¥å…¶ä»–ç›˜ã€‚\nåœ¨å­˜å‚¨ä¸å¿«ç…§æ€»ç®¡ä¸­å¯ä»¥çœ‹åˆ°ssdçš„å¯¿å‘½ç™¾åˆ†æ¯”ï¼Œå½“è¿™ä¸ªè·Œåˆ°94%å·¦å³çš„æ—¶å€™ï¼Œå°±å»ºè®®ä½ æ›´æ¢ssdäº†\n\nä¸è¿‡æˆ‘æ²¡æœ‰æ‰¾åˆ°ç³»ç»Ÿè¿ç§»çš„åŠæ³•ï¼Œä¼¼ä¹åªèƒ½é‡æ–°åšç³»ç»Ÿç›˜ï¼Œæ‰€æœ‰è½¯ä»¶çš„é…ç½®éƒ½ä¼šä¸¢å¤±â€¦â€¦\n1.2 HBS3æ–‡ä»¶å¤‡ä»½åŒæ ·çš„ï¼Œä¸¤å—æœºæ¢°ä¹Ÿæ²¡æœ‰å¿…è¦ç»„raid1ï¼Œå› ä¸ºå¨è”é€šè‡ªå¸¦äº†ä¸€ä¸ªHBS3æ–‡ä»¶å¤‡ä»½ä¸­å¿ƒ\nè¿™ä¸ªå¤‡ä»½ä¸­å¿ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\n\næ”¯æŒæœ¬åœ°nasä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹‹é—´çš„ç›¸äº’å¤‡ä»½\næ”¯æŒç™¾åº¦äº‘ã€OneDriveã€é˜¿é‡Œäº‘ossã€è…¾è®¯äº‘ç­‰ç­‰ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯çš„åŒæ­¥\næ”¯æŒä»å¤–æ¥è®¾å¤‡ï¼ˆusbï¼‰å¤‡ä»½æ•°æ®åˆ°nas\n\nè¿™æ ·åšæ¯”raid1å¥½åœ¨å“ªé‡Œï¼Ÿ\n\næ•°æ®åœ¨å¤šä¸ªç›˜ä¸­å­˜å‚¨\næ¯”raid1èŠ‚çœå¤§é‡ç©ºé—´ï¼\n\nä»¥æˆ‘è‡ªå·±ä¸ºä¾‹ï¼Œæˆ‘ä¸ªäººå‹æ ¹æ²¡æœ‰å¤ªå¤šé‡è¦æ•°æ®ï¼šè‡ªå·±æ‹çš„ç…§ç‰‡ã€ä¸‹çš„éŸ³ä¹ç”µå½±ã€ä¸€äº›ä¸å¥½æ‰¾çš„è½¯ä»¶ç­‰ç­‰\nè¿™é‡Œé¢çœŸæ­£é‡è¦çš„ï¼Œææ€•åªæœ‰ç…§ç‰‡å’Œä¸€äº›æ­£ç»çš„å­¦æ ¡èµ„æ–™ğŸ˜‚å…¶ä»–éƒ½æ˜¯æ— æ‰€è°“çš„\nç›®å‰æˆ‘çš„ç…§ç‰‡åŠ èµ·æ¥åªæœ‰å¯æ€œçš„5.6GBï¼Œè¿˜æ²¡æœ‰ä¸€éƒ¨ç”µå½±å¤§ï¼\n\nå¦‚æœå¼„raid1ï¼Œå°±ç›¸å½“äºç™½ç™½æµªè´¹ä¸€ä¸ªç›˜çš„ç©ºé—´ï¼Œèˆæœ¬é€æœ«äº†å±äºæ˜¯\nè¿™åªæ˜¯æˆ‘ä¸ªäººçš„æƒ…å†µï¼å¦‚æœä½ è®¤ä¸ºä½ çš„é‡è¦æ•°æ®è¶…è¿‡äº†æœºæ¢°ç›˜å®¹é‡çš„1/3ï¼Œé‚£å¯ä»¥è€ƒè™‘ä¸Šraid1\næœ¬åœ°åŒç›˜å¤‡ä»½å…ˆé€‰æ‹©ä¸€ä¸ªæº\n\nåœ¨é€‰æ‹©ç›®æ ‡ï¼Œå¯ä»¥é€‰æ‹©å½“å‰nasï¼Œæ”¯æŒçš„ç»ˆç«¯éå¸¸å¤š\n\nè®¾ç½®ä½œä¸šåç§°ï¼Œä»–ä¼šåœ¨ç›®æ ‡æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªå’Œä½œä¸šåç§°ç›¸åŒçš„æ–‡ä»¶å¤¹\n\nç„¶åæ˜¯é€‰æ‹©å¤‡ä»½è®¡åˆ’ï¼Œå¯ä»¥é€‰æ‹©æ¯å¤©ã€æ¯å‘¨çš„æŸå‡ å¤©ã€æ¯ä¸ªæœˆçš„æŸå‡ å¤©è¿›è¡Œå¤‡ä»½\n\né…ç½®å¥½äº†ä¹‹åï¼Œå¯ä»¥ç‚¹å‡»ç«‹å³å¤‡ä»½ï¼Œå…ˆå¼€å§‹æ‹·è´ä¸€ä»½èµ„æ–™åˆ°ç›®æ ‡ä¸­ï¼Œ\nè¿™æ ·å°±èƒ½ä¿è¯æˆ‘ä»¬çš„æ•°æ®åœ¨ä¸¤ä¸ªç›˜ä¸­éƒ½å­˜ç€ã€‚å¦‚æœä½ æƒ³ï¼Œä½ è¿˜å¯ä»¥ç»™ssdä¸­ä¹Ÿå¤‡ä»½ä¸€ä»½ï¼Œå°±ç›¸å½“äº3ä¸ªç›˜ä¸­éƒ½æœ‰è¿™ä¸ªæ•°æ®\nä¸‰ä¸ªç›˜ä¸€èµ·åçš„æ¦‚ç‡â€¦â€¦å¦‚æœä½ çœŸé‡åˆ°äº†ï¼Œä¸€å®šè¦å»ä¹°ä¸ªå½©ç¥¨æ­¢æŸï¼ğŸ˜‚\n\nå¦‚æœä½ è¿˜æ˜¯æ‹…å¿ƒï¼Œå°±å¾€ç™¾åº¦äº‘ç›˜é‡Œé¢å†å¤‡ä»½ä¸€ä»½ï¼Œè¿™å°±åšåˆ°äº†å¤šä¸ªä»‹è´¨å­˜å‚¨+å¼‚åœ°å¤‡ä»½\næ³¨æ„ï¼Œä¸Šé¢çš„å¤‡ä»½å¹¶ä¸æ˜¯å®æ—¶çš„ï¼Œå¦‚æœä½ éœ€è¦å®æ—¶çš„åŒæ­¥ã€‚åˆ™éœ€è¦åœ¨ä¸‹é¢çš„é¡µé¢é€‰æ‹©ğŸ‘‡\n\n\nå¤‡ä»½åˆ°ç™¾åº¦äº‘ç›˜å‰é¢çš„æ­¥éª¤éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¤‡ä»½çš„æ—¶å€™é€‰æ‹©ç™¾åº¦äº‘ä½œä¸ºç›®çš„åœ°ï¼Œç™»å½•ä½ çš„ç™¾åº¦äº‘è´¦æˆ·ã€‚\nä½ ä¼šå‘ç°è´¦æˆ·ç›®å½•ä¸‹é¢æ˜¯ç©ºçš„ï¼Œå› ä¸ºé»˜è®¤å®ƒåœ¨ç™¾åº¦äº‘ç›˜çš„æˆ‘çš„åº”ç”¨æ•°æ®ä¸‹æ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¨è”é€šæ²¡æœ‰æƒé™å¤‡ä»½åˆ°ç™¾åº¦äº‘ç›˜çš„å…¶ä»–ç›®å½•ï¼Œåªèƒ½åœ¨å®ƒåˆ›å»ºçš„è¿™ä¸ªæ–‡ä»¶å¤¹å†…éƒ¨è¿›è¡Œå¤‡ä»½\n\né€‰æ‹©ç™¾åº¦ç½‘ç›˜ä¹‹åï¼Œå…¶å®æ²¡æœ‰å¿…è¦æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå› ä¸ºå¨è”é€šä¼šé»˜è®¤ç”¨å¤‡ä»½ä½œä¸šååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å¦‚æœä½ è‡ªå·±å†åˆ›å»ºä¸€ä¸ªï¼Œæ–‡ä»¶å¤¹å±‚çº§å°±ä¼šå˜å¾—éå¸¸å¤šï¼ˆç”¨è¿‡ä½ å°±çŸ¥é“äº†ï¼‰\n\nå¤‡ä»½çš„æ—¶å€™å†™æ¸…æ¥šä½œä¸šåï¼Œä¾¿ä¼šè‡ªåŠ¨åœ¨ç™¾åº¦äº‘ç›˜é‚£å„¿åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹\n\nç”±äºæ˜¯å’Œäº‘ç«¯å¤‡ä»½ï¼Œå¯èƒ½ä¼šå‡ºç°æ²¡æœ‰å®Œæ•´ä¸Šä¼ çš„æƒ…å†µï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®ä¸€ä¸‹æ•°æ®å®Œæ•´æ€§çš„æ£€æŸ¥\n\né‡ç‚¹æ¥äº†ï¼å¨è”é€šå’Œç¾¤æ™–çš„å¤‡ä»½ä¸­å¿ƒéƒ½æœ‰ä¸€ä¸ªæ•°æ®åŠ å¯†åŠŸèƒ½ï¼Œä¼šå°†ä½ çš„æ•°æ®æœ¬åœ°åŠ å¯†ä¹‹åï¼Œå†ä¸Šä¼ åˆ°ç™¾åº¦äº‘ã€‚è€ƒè™‘åˆ°ç™¾åº¦äº‘æ‰«ç”¨æˆ·æ–‡ä»¶çš„æƒ…å†µï¼Œè¿™ä¸ªåŠŸèƒ½ä¸€å®šè¦åŠ ä¸Šï¼\n\né€‰æ‹©äº†ä¹‹åéœ€è¦å¡«å†™å¯†ç ï¼Œè¿™ä¸ªå¯†ç å¿…é¡»è®°ä½ï¼Œå¦åˆ™ä½ å†ä¹Ÿæ‰“ä¸å¼€äº‘ç«¯çš„æ–‡ä»¶äº†\n\nå¯ä»¥å»å¨è”é€šå®˜ç½‘ä¸‹è½½è§£å¯†è½¯ä»¶ï¼Œå³ä¾¿ä¸ç”¨nasä¹Ÿå¯ä»¥é€šè¿‡å¯†ç è§£å¯†å‡ºç½‘ç›˜ä¸­çš„èµ„æ–™\n\nå¦‚æœä½ çš„æ•°æ®è¿˜æ¶‰åŠåˆ°ä¸€äº›ç‰¹åˆ«éšç§çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®å‹ç¼©è¿›ä¸€æ­¥æé«˜å®‰å…¨æ€§ï¼å› ä¸ºå¨è”é€šè¿™ä¸ªæ•°æ®å‹ç¼©çš„æ ¼å¼.qnap.bz2ç™¾åº¦äº‘ç›˜æ˜¯ä¸æ”¯æŒè¯†åˆ«çš„\n\nè®¾ç½®å®Œæ¯•åï¼Œnasä¾¿ä¼šå®šæ—¶å¾€ç™¾åº¦äº‘ä¸Šå¤‡ä»½ä½ çš„èµ„æ–™ã€‚ä½†æ˜¯ç”±äºå¨è”é€šæ²¡åŠæ³•å•ç‹¬æŸ¥çœ‹hbs3ç½‘ç»œä½¿ç”¨æƒ…å†µï¼Œåªèƒ½ä¼°ç®—ä¸€ä¸‹ä¸Šä¼ çš„é€Ÿåº¦ï¼ˆæ— ç™¾åº¦ç½‘ç›˜ä¼šå‘˜ï¼‰\n2.56GBçš„æ–‡ä»¶å¤§æ¦‚ç”¨äº†23åˆ†é’Ÿä¸Šä¼ å®Œæ¯•ï¼Œå¹³å‡é€Ÿåº¦1.8mb/s\n\n\næˆ‘æ²¡æœ‰é€‰æ‹©å‹ç¼©æ–‡ä»¶ï¼Œåœ¨ç™¾åº¦ç½‘ç›˜appä¸­æŸ¥çœ‹ï¼Œå›¾ç‰‡æ–‡ä»¶åè™½ç„¶ä¾æ—§æ˜¯æ˜æ–‡ï¼Œä½†æ˜¯æ— æ³•ç›´æ¥é¢„è§ˆï¼›ä¸‹è½½åˆ°æ‰‹æœºåï¼ŒåŒæ ·æ— æ³•é¢„è§ˆè¯¥å›¾ç‰‡ã€‚\nè¿™å°±æ˜¯åŠ å¯†ä¹‹åçš„æ•ˆæœï¼å…å»äº†æˆ‘ä»¬æ‰‹åŠ¨æ‰“å‹ç¼©åŒ…+å¯†ç çš„ç¹çæ“ä½œï¼Œå®‰å¿ƒ\n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œå›½äº§çš„è½»nasæµ·åº·ã€è”æƒ³ã€æç©ºé—´ã€ç»¿è”éƒ½æ”¯æŒå¤‡ä»½åˆ°ç™¾åº¦äº‘ç›˜ï¼Œä½†æ®æˆ‘æ‰€çŸ¥éƒ½ä¸æ”¯æŒåŠ å¯†åŠŸèƒ½ã€‚\nä¸çŸ¥é“å¤šä¹…èƒ½çœ‹åˆ°å›½äº§nasåŠ ä¸Šè¿™ç±»åŠŸèƒ½ï¼Œåœ¨äº‘ç›˜æ™®éä¹±æ‰«ç”¨æˆ·æ–‡ä»¶çš„ç¯å¢ƒä¸‹ï¼Œè¿™ä¸ªåŠŸèƒ½çœŸçš„å¾ˆé‡è¦ï¼è°éƒ½ä¸æƒ³çœ‹åˆ°è‡ªå·±æ‹çš„ç…§ç‰‡è¢«æ²³èŸ¹ğŸ™ƒä¹‹å‰åœ¨è´´å§çœ‹åˆ°ä¸€ä½çˆ¶äº²è¯´ï¼Œè‡ªå·±æ‹çš„å®å®ç…§ç‰‡ï¼Œå…‰ppçš„éƒ½è¢«æ²³èŸ¹äº†ğŸ˜‚\n2.qbittorrent2.1 ä»€ä¹ˆæ˜¯btä¸‹è½½ï¼Ÿä¹‹å‰çš„æˆ‘ä¹Ÿä¸æ˜¯å¾ˆäº†è§£è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œç°åœ¨çœ‹äº†å‡ ç¯‡æ–‡ç« ï¼Œå¤§æ¦‚çŸ¥æ™“äº†è¿™ä¸ªæŠ€æœ¯çš„åŸºæœ¬æ€è·¯ï¼Œå¤è¿°å¦‚ä¸‹ï¼š\n\nç”¨æˆ·aæœ‰ä¸€ä»½èµ„æºzï¼Œä»–åšå‡ºäº†ç¬¬ä¸€é¢—è¯¥èµ„æºçš„ç§å­ï¼Œå¹¶åˆ†äº«åˆ°ç½‘ä¸Š\nç”¨æˆ·bé¦–æ¬¡ä¸‹è½½äº†è¯¥èµ„æºï¼Œæ³¨æ„ï¼Œæ­¤æ—¶è¿™ä¸ªzèµ„æºåªæœ‰ä¸€ä¸ªä¸Šä¼ ç«¯ï¼Œé‚£å°±æ˜¯açš„ç”µè„‘ã€‚ç”¨æˆ·bçš„ä¸‹è½½é€Ÿåº¦ï¼Œå–å†³äºaçš„ä¸Šä¼ é€Ÿåº¦ä»¥åŠabä¹‹é—´çš„ç½‘ç»œç¯å¢ƒ\nç”¨æˆ·bä¸‹è½½å®Œè¯¥èµ„æºåï¼Œä¹Ÿé€‰æ‹©åšç§ã€‚æ­¤æ—¶ï¼Œèµ„æºzå°±æœ‰äº†abä¸¤ä¸ªä¸Šä¼ ç«¯ã€‚\nç”¨æˆ·cä½œä¸ºç¬¬äºŒä¸ªä¸‹è½½zçš„äººï¼Œä»–æ˜¯ä»aå’Œbé‚£å„¿ä¸€èµ·ä¸‹çš„ã€‚å¯ä»¥ç®€å•ç†è§£ä¸ºzçš„å‰åŠéƒ¨åˆ†æ˜¯ä»aé‚£å„¿ææ¥çš„ï¼ŒååŠéƒ¨åˆ†æ˜¯ä»bé‚£å„¿ææ¥çš„\nä»¥æ­¤ç±»æ¨ï¼Œåªè¦ä¸‹è½½zçš„äººè¶Šæ¥è¶Šå¤šï¼Œè€Œä¸”è¿™äº›ç”¨æˆ·éƒ½é€‰æ‹©äº†åšç§ï¼Œé‚£ä¹ˆzèµ„æºçš„ä¸‹è½½é€Ÿåº¦å°±ä¼šè¶Šæ¥è¶Šå¿«ï¼\n\n\nåšç§ï¼šå³æˆä¸ºè¯¥èµ„æºçš„ä¸Šä¼ ç«¯\n\n2.2 ä½•ä¸ºâ€œå¸è¡€â€ï¼Ÿä½ å¯èƒ½å¬åˆ°è¿‡å¾ˆå¤šäººåæ§½è¿…é›·æ˜¯å¸è¡€é›·ï¼Œè¿™æ˜¯ä¸ºä½•ï¼Ÿå¸è¡€åˆæ˜¯ä»€ä¹ˆï¼Ÿ\nå…ˆæ¥å¤ç›˜ä¸€ä¸‹ä¸Šé¢çš„æ€è·¯ï¼Œç”¨æˆ·ä»¬ä¸‹è½½èµ„æºzåï¼Œåšç§æˆä¸ºäº†zçš„ä¸Šä¼ ç«¯\nè¿…é›·ä¹Ÿæ˜¯é€šè¿‡è¿™äº›ç”¨æˆ·ï¼Œä¸‹è½½èµ„æºzçš„ã€‚ä¸‹è½½å®Œèµ„æºzåï¼Œå®ƒä¹Ÿåšäº†ç§ï¼Œä½†æ˜¯ï¼è¿…é›·ä¸ç»™å…¶ä»–ç”¨æˆ·ä½¿ç”¨ä»–åšçš„ç§ï¼\n\nç”¨æˆ·dæ˜¯è¿…é›·ç”¨æˆ·ï¼Œä»–ä½¿ç”¨è¿…é›·ä¸‹è½½äº†zèµ„æº\nè¿…é›·ä»ä¹‹å‰abcç”¨æˆ·é‚£å„¿ä¸‹è½½æ¥äº†èµ„æºzï¼Œä¸‹è½½å®Œæˆåï¼Œå¹¶ç”¨dçš„ç”µè„‘ç»™zåšäº†ç§\nè¿…é›·å±è”½äº†å…¶ä»–btä¸‹è½½å®¢æˆ·ç«¯çš„è®¿é—®ï¼Œdåšçš„ç§åªæœ‰è¿…é›·ç”¨æˆ·èƒ½ä½¿ç”¨\nè¿…é›·å‡­å€Ÿå¹¿å¤§çš„ç”¨æˆ·åŸºæ•°ï¼Œå¯¹zåšçš„ç§è¶Šæ¥è¶Šå¤š\nä¹…è€Œä¹…ä¹‹ï¼Œå‡ºç°äº†ç”¨è¿…é›·ä¸‹è½½zèµ„æºï¼Œæ¯”å…¶ä»–å®¢æˆ·ç«¯ä¸‹è½½zçš„é€Ÿåº¦å¿«å‡ å€çš„æƒ…å†µï¼\nå› ä¸ºè¿…é›·ä¸‹è½½æ¯”å…¶ä»–å®¢æˆ·ç«¯å¿«ï¼Œä½¿ç”¨è¿…é›·ä¸‹è½½çš„ç”¨æˆ·è¶Šæ¥è¶Šå¤š\nä¸‹è½½é€Ÿåº¦çš„å·®è·è¶Šæ¥è¶Šå¤§â€¦â€¦å¹¶é‡å¤ä¸Šä¸€ç‚¹çš„æƒ…å†µâ€¦â€¦\n\nè¿™å°±å‡ºç°äº†ä¸€ä¸ªæ— è§£çš„æ­»å¾ªç¯ï¼\nå¾ˆæŠ±æ­‰çš„æ˜¯ï¼Œè¿™ä¸ªæƒ…å†µå·²ç»å‘ç”Ÿäº†ï¼šç™¾åº¦ä¸€æœï¼Œå¤„å¤„å¯ä»¥çœ‹åˆ°ä¸å°‘äººå‘å¸–è¯¢é—®ä¸ºä½•è¿…é›·é€Ÿåº¦æ¯”å…¶ä»–å®¢æˆ·ç«¯å¿«å¾ˆå¤šï¼Œç”šè‡³å‡ºç°æŸäº›èµ„æºåªæœ‰è¿…é›·èƒ½ä¸‹è½½çš„æƒ…å†µï¼\nè€Œè¿™æ˜¯å¤§ç¯å¢ƒçš„é—®é¢˜ï¼Œç‰µæ¶‰åˆ°å›½äººä½¿ç”¨è½¯ä»¶çš„ä¹ æƒ¯ã€å›½å†…ç½‘ç»œç¯å¢ƒç­‰ç­‰æƒ…å†µï¼Œå¹¶ä¸æ˜¯è¯´ä½ æˆ‘åšç§çš„æ—¶å€™ï¼Œbanæ‰è¿…é›·ä»è‡ªå·±è¿™é‡Œä¸‹è½½å°±èƒ½è§£å†³çš„ã€‚\n\nå…·ä½“å‚çœ‹ https://zhuanlan.zhihu.com/p/87193566\n\nqbtçš„å¢å¼ºç‰ˆæœ¬qbteeå¯ä»¥å±è”½è¿…é›·ï¼Œä½†æ˜¯å¾ˆå¤šptç«™ç‚¹éƒ½ä¸æ”¯æŒç”¨qbteeè¿›è¡Œä¸‹è½½ã€‚å¦‚ä½•é€‰æ‹©å°±çœ‹å¤§å®¶è‡ªå·±äº†ğŸ˜\n\n22.11.20æ›´æ–°ï¼šä»Šå¤©ä¸‹è½½çˆ±æƒ…å…¬å¯“çš„æ—¶å€™å‘ç°äº†ä¸‹é¢è¿™ä¸ªæƒ…å†µï¼Œæœ€åä¸€ä¸ªXLå¼€å¤´çš„å®¢æˆ·ç«¯å°±æ˜¯è¿…é›·ï¼Œä¼¼ä¹æ˜¯æˆ‘ä»è¿…é›·ç”¨æˆ·å“ªå„¿ä¸‹èµ°äº†100mbçš„èµ„æºã€‚çœ‹æ¥è¿…é›·ä¹Ÿä¸è‡³äºå®Œå…¨ä¸ä¼šä¸Šä¼ ğŸ˜‹\n\nçŸ¥ä¹è€å“¥è¯´ï¼Œè¿…é›·ä¹Ÿåˆ†ç‰ˆæœ¬ï¼Œæœ‰äº›ç‰ˆæœ¬æ˜¯ä¼šä¸Šä¼ çš„\n\n2.3 dockerå®‰è£…åœ¨ontainer-stationé‡Œé¢ï¼Œæœç´¢qbittorrentï¼ˆåæ–‡ç®€ç§°qbtï¼‰\nå¼ºçƒˆæ¨èå®‰è£…2.3.2ä¸­çš„johngong/qbittorrenté•œåƒ\n2.3.1 80X86æˆ‘æœ€å¼€å§‹ä¸‹è½½çš„æ˜¯80X86å¤§ä½¬åˆ¶ä½œçš„é•œåƒï¼Œå¬è¯´è¿™ä¸ªæ¯”è¾ƒå¥½ç”¨ã€‚ç‰ˆæœ¬è¦é€‰æ‹©armçš„ï¼Œå¦åˆ™ts216æ— æ³•ä½¿ç”¨ã€‚å¦‚æœä½ æ˜¯x86çš„nasï¼Œåˆ™é€‰æ‹©amd64ç‰ˆæœ¬\n\nä¸‹è½½å¥½ä¹‹åï¼Œéœ€è¦é…ç½®ä¸€äº›ä¸œè¥¿ğŸ‘‡\ncpué™åˆ¶ä¸º30%ï¼Œå†…å­˜é™åˆ¶ä¸º512mbï¼ˆqbtçš„è´Ÿè½½ä¸é«˜ï¼Œæ·»åŠ é™åˆ¶é¿å…å¡æ­»ç³»ç»Ÿï¼‰\nç‚¹å‡»é«˜çº§è®¾ç½®ï¼Œå¼„å¥½ä¸‹é¢ä¸‰ä¸ªç«¯å£è½¬å‘\n8089-tcp8999-tcp8999-udp\n\n\néšåéœ€è¦æŒ‚è½½ä¸‰ä¸ªæ–‡ä»¶å¤¹ç»™qbtï¼Œå»ºè®®å…ˆåˆ›å»ºå¥½æ–‡ä»¶å¤¹åï¼Œå†æ¥è¿™é‡ŒæŒ‚è½½å…±äº«æ–‡ä»¶å¤¹\n/downloads å»ºè®®æŒ‚è½½æœºæ¢°ç›˜/data å»ºè®®æŒ‚è½½åˆ°ssd/config å»ºè®®æŒ‚è½½åˆ°ssd\n\n\n\né…ç½®å¥½ä¹‹åï¼Œç‚¹å‡»ç¡®è®¤åˆ›å»ºå®¹å™¨ã€‚ä½ å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªæŠ¥é”™ï¼Œç›´æ¥å¿½ç•¥ï¼Œå› ä¸ºå®¹å™¨å·²ç»åˆ›å»ºæˆåŠŸäº†ï¼ˆts216ä¼¼ä¹åˆ›å»ºä»»ä½•å®¹å™¨éƒ½ä¼šè§¦å‘æ­¤æŠ¥é”™ï¼‰\n\n2.3.2 johngong (æ¨è)å‰é¢æåˆ°äº†qbtçš„é«˜çº§ç‰ˆæœ¬æ”¯æŒé˜²å¸è¡€ï¼Œæˆ‘ä»¥ä¸ºé«˜çº§ç‰ˆæœ¬æ²¡æœ‰dockerçš„armé•œåƒï¼Œå®é™…ä¸Šæ˜¯æœ‰çš„ï¼\nè¿™é‡Œæ¨èå¤§å®¶ä¸‹è½½johngong/qbittorrentï¼Œç›´æ¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬å°±å¯ä»¥äº†ï¼\n\nä¸‹é¢æ˜¯åŒä¸€ä¸ªç§å­ï¼Œä¸¤ä¸ªç‰ˆæœ¬çš„ä¸‹è½½é€Ÿåº¦å·®è·ï¼\n\n\n80X86 712KB/SğŸ‘† \nå¢å¼ºç‰ˆæœ¬ 3.6MB/SğŸ‘‡å®é™…ä¸Šè¿˜è·‘åˆ°äº†6mbä½†æ˜¯æ²¡æˆªåˆ°å›¾\n\n\né€Ÿåº¦å·®è·å¯ä¸å°ï¼è€Œä¸”åšç§çš„é€Ÿåº¦ä¹Ÿå˜å¿«äº†ï¼Œè¿™è¿˜æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è§è‡ªå·±åšç§é€Ÿåº¦ä¸Šäº†1mb/s\n\næˆ‘ä»¬è¿˜å¯ä»¥åœ¨è®¾ç½®é«˜çº§é€‰é¡¹ä¸­é…ç½®ï¼š\n\nåŒæ—¶å’Œæ‰€æœ‰åŒçº§trackeré€šä¿¡ï¼ˆé¿å…qbtåªæœ‰ä¸€ä¸¤ä¸ªtrackerå¤„äºå·¥ä½œçŠ¶æ€çš„æƒ…å†µï¼‰\n\n\n\nbanæ‰æœªçŸ¥çš„å®¢æˆ·ç«¯ï¼ˆé˜²æ­¢è¿…é›·å¸è¡€ï¼‰\n\n\nå®‰è£…æ–¹å¼å‚è€ƒå¤§ä½¬çš„dockeré¡µé¢readme \n\nhttps://registry.hub.docker.com/r/johngong/qbittorrent/#!\n\nè¿™é‡Œåªå¯¹ä¸€äº›é—®é¢˜è¿›è¡Œè¯´æ˜ï¼š\n\nç¯å¢ƒå˜é‡ä¸­çš„QB_EE_BINè®¾ç½®ä¸ºtrueï¼Œè¿™æ ·èƒ½å¼€å¯qbtçš„å¢å¼ºç‰ˆï¼Œæœ‰é˜²å¸è¡€åŠŸèƒ½\ntracker-urlçš„liståœ°å€å¯ä»¥åç»­åœ¨web uiä¸­é…ç½®ï¼Œä¸éœ€è¦æ”¹ç¯å¢ƒå˜é‡\n\n\nåˆæ¬¡é…ç½®çš„æ—¶å€™ï¼Œå»ºè®®å•¥éƒ½ä¸è®¾ç½®ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œç„¶ååˆ é™¤è¿™ä¸ªå®¹å™¨ï¼Œé‡æ–°åœ¨æœ¬åœ°é•œåƒä¸­é€‰æ‹©åé…ç½®ã€‚\n\nå› ä¸ºé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸ä¼šæ˜¾ç¤ºä»»ä½•ç¯å¢ƒå˜é‡çš„ï¼Œéœ€è¦ä½ ä¸€ä¸ªä¸€ä¸ªè®¾ç½®ã€‚ç”¨è¿™ä¸ªåŠæ³•ä¹‹åï¼Œé»˜è®¤çš„ç¯å¢ƒå˜é‡å°±ä¼šè¢«å†™å…¥ï¼Œæ­¤æ—¶åªéœ€è¦ä¿®æ”¹å€¼å°±è¡Œäº†ï¼\n\né…ç½®å¥½äº†ä¹‹åï¼Œå¦‚æœä½ é‡åˆ°äº†WEBåå°æ˜¾ç¤ºunauthorizedçš„é—®é¢˜ï¼Œç›´æ¥åœ¨æµè§ˆå™¨urlå“ªä¸€æ æŒ‰ä¸€ä¸‹å›è½¦ï¼Œå°±èƒ½è¿›å…¥webç•Œé¢\n\nå¦‚æœæŒ‰äº†å›è½¦ä¹‹åè¿˜æ˜¯ä¸è¡Œï¼Œåˆ™ä¿®æ”¹qbittorrenté…ç½®æ–‡ä»¶ä¸­çš„qbittorrent.confï¼Œæ·»åŠ \nWebUI\\HostHeaderValidation=false\n\n\nè¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘åŠå°æ—¶ï¼Œè¿˜ä»¥ä¸ºå®¹å™¨è®¾ç½®ä¸å¯¹ã€‚æœ€åè¿˜æ˜¯åœ¨true nasçš„ç¤¾åŒºæ‰¾åˆ°çš„è§£å†³åŠæ³•\n\nhttps://www.truenas.com/community/threads/qbittorrent-unauthorized.100991/\n\næœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n2.4 é…ç½®trackeråˆšå¼€å§‹ä¸‹è½½çš„æ—¶å€™ï¼Œæ¯«æ— é€Ÿåº¦ï¼Œæœ‰äº›èµ„æºè¿…é›·ä¹Ÿæ˜¯0kb\näºæ˜¯ç™¾åº¦äº†ä¸€ä¸‹ï¼Œçœ‹åˆ°äº†çŸ¥ä¹çš„æ–‡ç« \n\nè§£å†³ qBittorrent æ— é€Ÿåº¦ï¼šæ·»åŠ è‡ªå®šä¹‰ Tracker\n\nåœ¨qbçš„å·¥å…·-è®¾ç½®ï¼Œbté‡Œé¢ï¼Œæ·»åŠ tracker\n\nhttps://trackerslist.com/#/zh?id=%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8\n\nè¿™ä¸ªç½‘ç«™æœ‰æ•™ç¨‹å’Œtrakerï¼Œå¾ˆå…¨é¢ï¼ŒåŠ äº†ä¹‹åï¼Œé€Ÿåº¦ç›´æ¥ä¸Š6mb\n\næ³¨æ„ï¼Œtrackeråªå¯¹çƒ­é—¨èµ„æºæœ‰ç”¨ã€‚ä¸€äº›å†·é—¨èµ„æºï¼Œè¿å¸è¡€é›·éƒ½æ²¡æœ‰é€Ÿåº¦ï¼Œtrackerä¹Ÿæ— æµäºäº‹\ntrackerç•™æ¡£ä¸ºäº†é¿å…tracketlistç½‘ç«™å¤±æ•ˆæˆ–æ— æ³•è®¿é—®ï¼Œè¿™é‡Œè´´å‡ºé‡Œé¢çš„trackeråˆ—è¡¨ ğŸ‘‰ç‚¹æˆ‘\n\n2.5 åšç§ä¸‹è½½å®Œæˆä¹‹åï¼Œqbtä¼šè‡ªåŠ¨åšç§\nä¸‹å›¾æ˜¯æˆ‘æ˜¨æ™šä¸‹å¥½çš„ã€Šè¥¿çº¿æ— æˆ˜äº‹ã€‹å·²ç»å¼€å§‹åšç§äº†ï¼Œå½“å‰æ¯”ç‡ä¸º0.1ï¼Œä»£è¡¨å…¶ä»–ç”¨æˆ·ä»æˆ‘è¿™é‡Œä¸‹èµ°äº†æ•´ä¸ªèµ„æºçš„10%\n\nè¿™é‡Œå»ºè®®åœ¨è®¾ç½®-BitTorrentå†…è®¾ç½®åˆ†äº«ç‡ä¸º1ï¼Œå³å…¶ä»–ç”¨æˆ·ç´¯è®¡åœ¨ä½ è¿™é‡Œä¸‹èµ°äº†ä¸€ä»½å®Œæ•´çš„èµ„æºï¼Œç›¸å½“äº1æ¢1\n\nå¦‚æœä½ ä¸åœ¨ä¹è‡ªå·±å†…ç½‘ä¸€ç›´æœ‰ä¸Šä¼ ï¼Œä¹Ÿå¯ä»¥ä¸é™åˆ¶åˆ†äº«ç‡ï¼Œè´¡çŒ®è‚¯å®šæ˜¯è¶Šå¤šè¶Šå¥½çš„ï¼\nåŒæ—¶ä½ è¿˜å¯ä»¥é™åˆ¶ä¸€ä¸‹ä¸Šä¼ å’Œä¸‹è½½é€Ÿåº¦ï¼Œé¿å…nasçš„ä¸‹è½½å½±å“æˆ‘ä»¬çš„ç½‘ç»œç¯å¢ƒã€‚æ¯•ç«Ÿè°éƒ½ä¸æƒ³nasåœ¨å’Œæ‰“æ¸¸æˆçš„è‡ªå·±æŠ¢wifiå¸¦å®½\n\n2.6 è¾…ç§å‰é¢æåˆ°è¿‡åšç§ï¼Œå†æ¥è°ˆè°ˆè¾…ç§\nç®€å•æ¥è¯´ï¼Œè¾…ç§å°±æ˜¯ä½ åœ¨Aç«™ç‚¹ä¸‹è½½äº†ä¸€ä¸ªèµ„æºï¼Œå‘ç°åœ¨Bç«™ç‚¹æœ‰ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„çš„èµ„æºï¼ŒåŒ…æ‹¬æ–‡ä»¶ç»“æ„ã€æ–‡ä»¶å®¹é‡å¤§å°ã€æ–‡ä»¶æ ¼å¼ã€æ–‡ä»¶å‘½åç­‰ç­‰ä¿¡æ¯éƒ½å®Œå…¨ä¸€æ ·\nè¿™å°±ä»£è¡¨ä½ ç¡¬ç›˜ä¸Šçš„Aç«™ç‚¹èµ„æºå’ŒBç«™ç‚¹çš„èµ„æºæ˜¯å®Œå…¨ä¸€è‡´çš„\n\nè¿™ä¹Ÿé€‚ç”¨äºæŸäº›å¥‡æ€ªçš„èµ„æºï¼Œqbtä¸‹è½½ä¸ä¸‹æ¥ï¼Œä½†æ˜¯è¿…é›·å¯ä»¥ä¸‹è½½çš„èµ„æºï¼›æˆ–è€…æ˜¯è¿…é›·ä¸‹è½½é€Ÿåº¦æ˜¯qbtå‡ åå€çš„èµ„æº\nä¸‹è½½å¥½äº†ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨qbtæ¥è¾…ç§ï¼Œæå‡ä»–äººçš„ä¸‹è½½é€Ÿåº¦ã€‚è®©åäººä¸è¦å› ä¸ºå’Œä½ ä¸€æ ·çš„åŸå› å»ä½¿ç”¨è¿…é›·ä¸‹è½½è¯¥èµ„æº\n\nä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œæˆ‘çš„ç¡¬ç›˜ä¸Šæœ‰ä¸€ä¸ªã€Šçˆ±æ­»æœº ç¬¬ä¸€å­£ã€‹çš„èµ„æºï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰åšç§ã€‚æ­¤æ—¶å°±å¯ä»¥ä»èµ„æºç«™ç‚¹ä¸‹è½½ç§å­æ–‡ä»¶ï¼ˆå¦‚æœè¯¥ç«™ç‚¹åªæä¾›äº†ç£é“¾ï¼Œå¯ä»¥ç”¨ä¸€äº›åœ¨çº¿å·¥å…·å°†è¯¥ç£é“¾è½¬æˆç§å­æ–‡ä»¶ï¼‰\n\nä¸Šä¼ è¯¥ç§å­æ–‡ä»¶ï¼Œä¸‹è½½åœ°å€è¦é€‰æ‹©å’Œä½ ç¡¬ç›˜ä¸Šè¯¥ç§å­åœ°å€çš„ä¸Šçº§ç›®å½•\n\nå› ä¸ºç§å­ä¸€èˆ¬æ˜¯ä»¥ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹è½½ä¸‹æ¥çš„ï¼Œä½ åº”è¯¥é€‰æ‹©çš„æ˜¯è¿™ä¸ªæ–‡ä»¶å¤¹æ‰€åœ¨ç›®å½•ï¼Œè€Œä¸èƒ½ç›´æ¥é€‰æ‹©è¯¥ç§å­çš„æ–‡ä»¶å¤¹\n\nå¦‚ä¸‹å›¾ï¼Œæˆ‘çš„èµ„æºæ˜¯å¤„äºLove.Death.and.Robots (2019)ç›®å½•ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¡«å†™çš„æ—¶å€™å°±åªéœ€è¦å¡«å†™é“è¿™ä¸€çº§å°±è¡Œäº†ã€‚\næ­£ç¡®è·¯å¾„downloads/season/Love.Death.and.Robots (2019)/é”™è¯¯è·¯å¾„downloads/season/Love.Death.and.Robots (2019)/Love.Death.and.Robots.S01.1080p.NF.WEBRip.DDP5.1.x264-NTG[rartv]/\n\næ³¨æ„ï¼Œæˆ‘è¿™é‡Œæ˜¯å°†æœ¬åœ°çš„downloadæ–‡ä»¶å¤¹æ˜ å°„ç»™qbtçš„downloadsæ–‡ä»¶å¤¹ï¼Œåå­—æœ‰ä¸€ä¸¢ä¸¢åŒºåˆ«\n\nå¦‚æœè®¾ç½®æˆåŠŸäº†ï¼Œä¸Šä¼ ç§å­ä¹‹åï¼Œåº”è¯¥æ˜¾ç¤ºçš„æ˜¯æ ¡éªŒï¼Œè€Œä¸æ˜¯é‡æ–°ä¸‹è½½\n\nå¦‚æœå‡ºç°äº†é‡æ–°ä¸‹è½½ï¼Œè¯´æ˜ä½ å’Œè¯¥ç§å­çš„èµ„æºæ–‡ä»¶å¤¹åå­—ä¸åŒï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹æ–‡ä»¶å¤¹åå­—\nä¹Ÿæœ‰å¯èƒ½ä½ çš„èµ„æºå’Œè¯¥ç§å­å¹¶ä¸æ˜¯ä¸€ä¸ªèµ„æºï¼Œæ— æ³•è¿›è¡Œè¾…ç§\n\nä¸‹å›¾ä¾¿æ˜¯è®¾ç½®æˆåŠŸäº†ï¼Œqbtæ­£åœ¨æ ¡éªŒæ–‡ä»¶\n\næ–‡ä»¶æ ¡éªŒæˆåŠŸï¼Œå¼€å§‹è¾…ç§ï¼ï¼ˆè¿™é‡Œæˆ‘åœ¨qbtå†…ä¿®æ”¹äº†ä¸€ä¸‹ç§å­çš„åå­—ï¼‰\n\nè¿™æ ·å°±OKäº†ï¼ä½ å¯ä»¥å°†ä¸€ä¸ªä¸‹è½½å¥½çš„èµ„æºçš„åšç§åˆ é™¤ï¼Œå°è¯•ä¸€ä¸‹è¿™ä¸ªæ­¥éª¤\n\n3.jellyfin ç”µå½±æµ·æŠ¥å¢™å¨è”é€šè‡ªå¸¦çš„vedio stationæŒºä¸å¥½ç”¨çš„ã€‚ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œæˆ‘è¿™é‡Œåœ¨åå°ç‚¹å‡»å¤§æ–‡ä»¶éƒ½æ— æ³•æ’­æ”¾ï¼Œè€Œæ˜¯ç›´æ¥ä¸‹è½½ã€‚è¿™ä¸æ˜¯æˆ‘æƒ³è¦çš„æ•ˆæœã€‚\nè€Œä¸”å¨è”é€šä¸‹è½½å¤ªå¤šè½¯ä»¶ä¼šå½±å“ç³»ç»Ÿè¿è¡Œé€Ÿåº¦ï¼Œè¿˜ä¸å¦‚ä¸ä¸‹ï¼\nè¿™é‡Œæ¨èå¤§å®¶dockerä¸‹è½½jellyfinï¼Œæ•ˆæœå¾ˆä¸é”™ï¼Œèƒ½æœ‰æµ·æŠ¥å¢™\nè‡³äºç”µå½±ä»‹ç»ç­‰ç­‰ï¼Œå®ƒå¯èƒ½å› ä¸ºç½‘ç»œç¯å¢ƒåˆ·ä¸å‡ºæ¥ï¼Œä½†æˆ‘ä¸ªäººå…¶å®è¦æµ·æŠ¥å°±å¤Ÿäº†\n\n3.1 dockerå®‰è£…åœ¨container-stationä¸­æœç´¢jellyfinï¼Œä¸‹è½½jellyfin/jellyfinè¿™ä¸ªé•œåƒ\nåŒæ ·çš„ï¼Œè®°å¾—é€‰æ‹©armç‰ˆæœ¬\n\nCPUé™åˆ¶60%ï¼Œå†…å­˜é™åˆ¶1024mb\nç«¯å£è½¬å‘8096-TCP\n\næŒ‚è½½æ–‡ä»¶éœ€è¦æŒ‚è½½ä¸‹é¢ä¸‰ä¸ªï¼ŒåŒæ ·çš„ï¼Œcacheå’Œconfigæ–‡ä»¶å¤¹å»ºè®®æŒ‚è½½åˆ°ssdä¸Šï¼Œmediaåˆ™æŒ‚è½½ä¸€ä¸ªè£…ç”µå½±çš„å…±äº«æ–‡ä»¶å¤¹\n\nç‚¹å‡»åº”ç”¨ï¼Œç­‰å¾…é…ç½®æˆåŠŸ\nå…³äºç¬¬äºŒæ¬¡é…ç½®æ— æ³•è¿æ¥é—®é¢˜å¦‚æœä½ æ˜¯ç¬¬äºŒæ¬¡é…ç½®jfï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨çš„æŠ¥é”™\n\nè§£å†³æ–¹æ¡ˆï¼šå³é”®åˆ é™¤æ—§çš„æœåŠ¡å™¨ä¸»æœºï¼Œctrl+f5æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œå°±èƒ½è¿›å…¥jfçš„åˆå§‹åŒ–é…ç½®ç•Œé¢\n\n3.2 å¦‚ä½•é…ç½®åª’ä½“åº“è¿™é‡Œçš„æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»åŠ å·ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¹‹å‰éšå°„çš„/mediaæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼Œé€‰æ‹©ä½ è‡ªå·±çš„ç”µå½±å­˜æ”¾ä½ç½®å³å¯\n\nåœ°åŒºå’Œè¯­è¨€è®¾ç½®å¦‚ä¸‹\n\nå»ºè®®å‹¾é€‰ä¸‹é¢è¿™ä¸ªï¼Œä¿å­˜æµ·æŠ¥å›¾åˆ°ç”µå½±åŒç›®å½•ä¸‹\n\njfçš„åˆ®å‰Šå™¨ï¼ˆæŒ‡è‡ªåŠ¨ä¸‹è½½ç”µå½±ä¿¡æ¯ï¼‰æ˜¯ä¸éœ€è¦æ¢¯å­çš„ï¼Œç‚¹èµï¼\né…ç½®å¥½åª’ä½“åº“åï¼Œç­‰jellyfinæ‰«æä½ çš„ç”µå½±ã€‚è¿™éƒ¨åˆ†å¾ˆæ¼«é•¿ï¼Œç­‰å®ƒæ…¢æ…¢æ‰«å®Œå§ï¼\n3.3 ç”µå½±å‘½åé—®é¢˜jellyfinå®˜æ–¹æä¾›äº†ä¸€ä¸ªç”µå½±å‘½åæ¨¡æ¿ï¼Œå®é™…ä¸Šä½ æ²¡å¿…è¦å‚è€ƒé‚£ä¸ªæ¨¡æ¿å‘½å\n\nå‚è€ƒæ¨¡æ¿è‚¯å®šæ˜¯æ›´å¥½çš„\n\nä»–è¿˜æ˜¯å¾ˆæ™ºèƒ½çš„ï¼Œä½ åªè¦ä¿è¯ç”µå½±åå­—é‡Œé¢ï¼Œæœ‰è¯¥ç”µå½±çš„è‹±æ–‡å+å¹´ä»½å³å¯\næˆ‘çš„ç”µå½±ä¹‹å‰è‡ªå·±å‘½åçš„æ—¶å€™ï¼Œéƒ½åœ¨å‰é¢åŠ äº†ä¸€ä¸ªä¸­æ–‡åï¼Œjfä¾æ—§æ­£ç¡®åˆ·å‡ºäº†ç”µå½±æµ·æŠ¥~\n\nå¦‚æœå®ƒæ‰¾ä¸åˆ°çš„ç”µå½±ï¼Œjfä¼šä»ç”µå½±ä¸­æˆªä¸ªå›¾ä½œä¸ºå°é¢ã€‚ä½†æ˜¯è¿™ä¸ªæˆªå›¾ï¼Œemmmå¾ˆé˜´é—´ï¼\nå»ºè®®æ‰¾ä¸åˆ°çš„ç”µå½±ï¼Œè‡ªå·±å»è±†ç“£ä¸‹è½½ä¸€ä¸ªæµ·æŠ¥ï¼Œç„¶åæ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹\n\njfæ˜¯æœ‰ä¸€ä¸ªè±†ç“£åˆ®å‰Šå™¨çš„æ’ä»¶çš„ï¼Œä½†æ˜¯è¯¥æ’ä»¶å¾ˆä¹…æ²¡æœ‰æ›´æ–°ï¼Œç°åœ¨å·²ç»ä¸æ”¯æŒæœ€æ–°ç‰ˆæœ¬10.8.Xçš„jfäº†\nhttps://github.com/Libitum/jellyfin-plugin-douban\n\n\n3.4 ä¸­æ–‡å­—å¹•ä¹±ç é—®é¢˜å¦‚æœä½ çš„ç”µå½±æ˜¯å¤–æŒ‚å­—å¹•ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸­æ–‡å­—å¹•æ˜¯å£å£å£çš„é—®é¢˜\nè¿™éœ€è¦æˆ‘ä»¬å»ä¹‹å‰ç»™jfæ˜ å°„çš„configæ–‡ä»¶å¤¹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªfontsæ–‡ä»¶å¤¹\n\nå»ç½‘ä¸Šä¸‹è½½ä¸€ä¸ªä¸­æ–‡å­—ä½“ï¼Œä¸¢è¿›å»ï¼ˆå»ºè®®å­—ä½“æ–‡ä»¶ä¸è¦å¤§äº20mbï¼‰\næ³¨æ„ï¼šjfä¸æ”¯æŒé€‰æ‹©å­—ä½“ï¼Œæ‰€ä»¥è¯·ä¸è¦ä¸‹è½½å¤šä¸ªå­—ä½“ï¼Œä¸‹è½½ä¸€ä¸ªå°±è¡Œäº†ï¼\n\næ”¾è¿›å»åï¼Œåœ¨jfçš„æ§åˆ¶å°-æ’­æ”¾ä¸­ï¼Œè®¾ç½®å¤‡ç”¨å­—ä½“è·¯å¾„+å¯ç”¨å¤‡ç”¨å­—ä½“\n\nè®¾ç½®å¥½äº†ä¹‹åï¼Œæ§åˆ¶å°-æ‰«ææ‰€æœ‰åª’ä½“åº“\néœ€è¦é‡æ–°æ‰«ä¸€ä¸‹åª’ä½“åº“ï¼Œè¿™æ ·å°±èƒ½è§£å†³å£å£å£çš„é—®é¢˜äº†\n\n4.navidrome éŸ³ä¹è¿™æ˜¯ä¸€ä¸ªä¸ªäººéŸ³é¢‘æµåª’ä½“æœåŠ¡å™¨ï¼Œç±»ä¼¼äºjf\nå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼ŒéŸ³ä¹å¾ˆå¤šï¼Œé‚£å°±å¯ä»¥ç”¨å®ƒèŠ‚çœä¸€äº›æ‰‹æœºçš„ç©ºé—´ï¼\nå¨è”é€šè‡ªå¸¦çš„éŸ³ä¹å¥—ä»¶å¯ä»¥è¯´ä¸å¯ç”¨ï¼Œæˆ‘è¿™è¾¹å®æµ‹å¾ˆå¤šflacéƒ½æ”¾ä¸å‡ºæ¥ğŸ¤”\n4.1 å®‰è£…åŒæ ·æ˜¯å»docker stationé‡Œé¢ä¸‹è½½ï¼Œæ³¨æ„è¦ä¸‹è½½deluan/navidrome\n\nå¼„æœ€æ–°ç‰ˆæœ¬å°±è¡Œäº†ï¼Œä¸åˆ†x86å’Œarm\né…ç½®ä¹Ÿå¾ˆç®€å•\n\ncpué™åˆ¶20%ï¼Œå†…å­˜é™åˆ¶ä¸º256mb\nè¯¥å®¹å™¨è´Ÿè½½æä½ï¼Œå…·ä½“æƒ…å†µçœ‹æ­Œæ›²çš„æ•°é‡\nç«¯å£è½¬å‘4533-TCP\n\n\nå¼„ä¸€ä¸ªdataæ–‡ä»¶å¤¹å’Œä¸€ä¸ªéŸ³ä¹æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»ç¡®è®¤åˆ›å»ºå®¹å™¨\n\n4.2 é…ç½®é…ç½®ï¼Ÿä¸éœ€è¦ï¼å®ƒä¼šè‡ªåŠ¨æ‰«æä½ çš„musicæ–‡ä»¶å¤¹ï¼Œä½ ä»€ä¹ˆéƒ½ä¸éœ€è¦åšï¼\n\né»˜è®¤çš„ç•Œé¢æ˜¯è‹±è¯­çš„ï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒ-Personalï¼Œè¯­è¨€æ”¹æˆç®€ä½“ä¸­æ–‡å°±è¡Œäº†\n\næ€ä¹ˆä½¿ç”¨å°±ä¸ä»‹ç»äº†ï¼Œå’ŒéŸ³ä¹æ’­æ”¾å™¨å®Œå…¨ä¸€æ ·\n\nå®‰å“appï¼šsubtrackerã€substreamerï¼ˆéœ€è¦å»è°·æ­Œå•†åº—ä¸‹è½½ï¼‰\nç”µè„‘å®¢æˆ·ç«¯ï¼šSonixd\n\n4.3 è¯¥å®¹å™¨çš„ç¼ºç‚¹æ¥è¯´ä¸€è¯´æˆ‘å‘ç°çš„ä¸€äº›ç¼ºç‚¹\n\nå¦‚æœä½ å‘ç°åŒä¸€ä¸ªä¸“è¾‘å‡ºç°äº†å¤šä¸ªæ˜¾ç¤ºï¼Œéœ€è¦ç”¨foobar2000ç­‰æœ¬åœ°æ’­æ”¾å™¨ï¼ŒæŠŠæºæ–‡ä»¶çš„ä¸“è¾‘æ­Œæ‰‹æ”¹æˆä¸€æ ·çš„ï¼ˆæ­¤æƒ…å†µä¸»è¦å‡ºç°äºæŸä¸€ä¸ªä¸“è¾‘å†…æœ‰å¤šä¸ªæ­Œæ‰‹åˆå”±çš„æƒ…å†µï¼‰\nä¸æ”¯æŒdsdæ’­æ”¾\nä¸æ”¯æŒm4aæ’­æ”¾\nä¸æ”¯æŒlrcå¤–æŒ‚æ­Œè¯ï¼Œæ­Œè¯å¿…é¡»å†™å…¥æ–‡ä»¶å±æ€§ä¸­ï¼ˆè¿™ä¸ªçœŸçš„å¾ˆéš¾å—ï¼‰\n\næ³¨æ„ï¼Œå®‰å“æ‰‹æœºappä¼šåœ¨ç¬¬ä¸€æ¬¡è¿æ¥çš„æ—¶å€™ï¼Œåˆå§‹åŒ–æ‰€æœ‰ä¸“è¾‘å°é¢ä¿¡æ¯ã€‚å¦‚æœä½ çš„æ­Œæ›²è¾ƒå¤šï¼Œå¤–ç½‘è®¿é—®å°±éœ€è¦è¾ƒå¤§çš„å¸¦å®½ï¼Œå¦åˆ™appä¼šç›´æ¥é—ªé€€â€¦â€¦\n\n5.æœªå®Œå¾…ç»­ç­‰å¾…åç»­æ›´æ–°å§â€¦â€¦\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas"]},{"title":"ã€Nasã€‘btçš„trackerç•™æ¡£","url":"/2022/11/06/nas/2%E5%A8%81%E8%81%94%E9%80%9Aqbt%E7%9A%84tracker/","content":"ä»¥ä¸‹trackeræ¥è‡ªç½‘ç«™trackerslist.com\n\nhttps://trackerslist.com/#/zh?id=%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8\n\nè´´å‡ºæ¥æ˜¯ä¸ºäº†ç•™æ¡£ï¼Œé¿å…è¯¥ç½‘ç«™æ— æ³•è®¿é—®\nåœ¨qbittorrent-å·¥å…·-è®¾ç½®-bittorent-trackerä¸­æ·»åŠ å³å¯\nhttp://1337.abcvg.info:80/announcehttp://207.241.226.111:6969/announcehttp://207.241.231.226:6969/announcehttp://[2001:1b10:1000:8101:0:242:ac11:2]:6969/announcehttp://[2a04:ac00:1:3dd8::1:2710]:2710/announcehttp://chouchou.top:8080/announcehttp://fxtt.ru:80/announcehttp://incine.ru:6969/announcehttp://ipv4announce.sktorrent.eu:6969/announcehttp://movies.zsw.ca:6969/announcehttp://nyaa.tracker.wf:7777/announcehttp://open-v6.demonoid.ch:6969/announcehttp://open.acgnxtracker.com:80/announcehttp://open.acgtracker.com:1096/announcehttp://parag.rs:6969/announcehttp://retracker.hotplug.ru:2710/announcehttp://share.camoe.cn:8080/announcehttp://t.acg.rip:6699/announcehttp://t.nyaatracker.com:80/announcehttp://t.overflow.biz:6969/announcehttp://torrentsmd.com:8080/announcehttp://tr.cili001.com:8070/announcehttp://tracker.birkenwald.de:6969/announcehttp://tracker.bt4g.com:2095/announcehttp://tracker.dler.com:6969/announcehttp://tracker.dler.org:6969/announcehttp://tracker.electro-torrent.pl:80/announcehttp://tracker.fansub.id:80/announcehttp://tracker.files.fm:6969/announcehttp://tracker.gbitt.info:80/announcehttp://tracker.ipv6tracker.ru:80/announcehttp://tracker.mywaifu.best:6969/announcehttp://tracker.opentrackr.org:1337/announcehttp://tracker.srv00.com:6969/announcehttp://tracker.vrpnet.org:6969/announcehttp://tracker.zerobytes.xyz:1337/announcehttp://tracker1.itzmx.com:8080/announcehttp://tracker2.dler.org:80/announcehttp://tracker3.itzmx.com:6961/announcehttp://tracker4.itzmx.com:2710/announcehttp://trackme.theom.nz:80/announcehttp://vps-dd0a0715.vps.ovh.net:6969/announcehttp://vps02.net.orel.ru:80/announcehttp://wepzone.net:6969/announcehttp://www.all4nothin.net:80/announce.phphttp://www.wareztorrent.com:80/announcehttps://1337.abcvg.info:443/announcehttps://opentracker.i2p.rocks:443/announcehttps://t1.hloli.org:443/announcehttps://tr.abiir.top:443/announcehttps://tr.abir.ga:443/announcehttps://tr.burnabyhighstar.com:443/announcehttps://tr.fuckbitcoin.xyz:443/announcehttps://tracker.cyber-hub.net:443/announcehttps://tracker.expli.top:443/announcehttps://tracker.foreverpirates.co:443/announcehttps://tracker.gbitt.info:443/announcehttps://tracker.imgoingto.icu:443/announcehttps://tracker.kuroy.me:443/announcehttps://tracker.lilithraws.cf:443/announcehttps://tracker.lilithraws.org:443/announcehttps://tracker.loligirl.cn:443/announcehttps://tracker.m-team.cc:443/announce.phphttps://tracker.nanoha.org:443/announcehttps://tracker.tamersunion.org:443/announcehttps://tracker1.520.jp:443/announcehttps://trackme.theom.nz:443/announcehttps://xtremex.herokuapp.com:443/announceudp://184.105.151.166:6969/announceudp://207.241.226.111:6969/announceudp://207.241.231.226:6969/announceudp://52.58.128.163:6969/announceudp://6ahddutb1ucc3cp.ru:6969/announceudp://9.rarbg.com:2810/announceudp://91.216.110.52:451/announceudp://94-227-232-84.access.telenet.be:6969/announceudp://960303.xyz:6969/announceudp://[2001:1b10:1000:8101:0:242:ac11:2]:6969/announceudp://[2001:470:1:189:0:1:2:3]:6969/announceudp://[2a03:7220:8083:cd00::1]:451/announceudp://[2a04:ac00:1:3dd8::1:2710]:2710/announceudp://[2a0f:e586:f:f::220]:6969/announceudp://aarsen.me:6969/announceudp://admin.52ywp.com:6969/announceudp://admin.videoenpoche.info:6969/announceudp://astrr.ru:6969/announceudp://black-bird.ynh.fr:6969/announceudp://bt.ktrackers.com:6666/announceudp://bt1.archive.org:6969/announceudp://bt2.archive.org:6969/announceudp://buddyfly.top:6969/announceudp://camera.lei001.com:6969/announceudp://chouchou.top:8080/announceudp://concen.org:6969/announceudp://creative.7o7.cx:6969/announceudp://cutiegirl.ru:6969/announceudp://cutscloud.duckdns.org:6969/announceudp://epider.me:6969/announceudp://exodus.desync.com:6969/announceudp://f1sh.de:6969/announceudp://fe.dealclub.de:6969/announceudp://fh2.cmp-gaming.com:6969/announceudp://ftp.pet:2710/announceudp://htz3.noho.st:6969/announceudp://ipv4.tracker.harry.lu:80/announceudp://ipv6.tracker.harry.lu:80/announceudp://jutone.com:6969/announceudp://laze.cc:6969/announceudp://leefafa.tk:6969/announceudp://mail.artixlinux.org:6969/announceudp://mail.zasaonsk.ga:6969/announceudp://mirror.aptus.co.tz:6969/announceudp://moonburrow.club:6969/announceudp://movies.zsw.ca:6969/announceudp://new-line.net:6969/announceudp://open.4ever.tk:6969/announceudp://open.demonii.com:1337/announceudp://open.dstud.io:6969/announceudp://open.free-tracker.ga:6969/announceudp://open.publictracker.xyz:6969/announceudp://open.stealth.si:80/announceudp://open.tracker.ink:6969/announceudp://opentor.org:2710/announceudp://opentracker.i2p.rocks:6969/announceudp://p4p.arenabg.com:1337/announceudp://psyco.fr:6969/announceudp://public.publictracker.xyz:6969/announceudp://public.tracker.vraphim.com:6969/announceudp://qtstm32fan.ru:6969/announceudp://rep-art.ynh.fr:6969/announceudp://retracker.hotplug.ru:2710/announceudp://retracker.lanta-net.ru:2710/announceudp://run.publictracker.xyz:6969/announceudp://sanincode.com:6969/announceudp://slicie.icon256.com:8000/announceudp://smtp-relay.odysseylabel.com.au:6969/announceudp://static.54.161.216.95.clients.your-server.de:6969/announceudp://sx.xxtor.com:6969/announceudp://tamas3.ynh.fr:6969/announceudp://theodoric.fr:6969/announceudp://thinking.duckdns.org:6969/announceudp://thouvenin.cloud:6969/announceudp://torrentclub.space:6969/announceudp://torrents.artixlinux.org:6969/announceudp://tr.bangumi.moe:6969/announceudp://tr.cili001.com:8070/announceudp://tracker-udp.gbitt.info:80/announceudp://tracker.4.babico.name.tr:3131/announceudp://tracker.altrosky.nl:6969/announceudp://tracker.artixlinux.org:6969/announceudp://tracker.auctor.tv:6969/announceudp://tracker.beeimg.com:6969/announceudp://tracker.birkenwald.de:6969/announceudp://tracker.bitsearch.to:1337/announceudp://tracker.cubonegro.xyz:6969/announceudp://tracker.cyberia.is:6969/announceudp://tracker.ddunlimited.net:6969/announceudp://tracker.dler.com:6969/announceudp://tracker.dler.org:6969/announceudp://tracker.encrypted-data.xyz:1337/announceudp://tracker.filemail.com:6969/announceudp://tracker.jonaslsa.com:6969/announceudp://tracker.joybomb.tw:6969/announceudp://tracker.leech.ie:1337/announceudp://tracker.moeking.me:6969/announceudp://tracker.monitorit4.me:6969/announceudp://tracker.novaopcj.eu.org:6969/announceudp://tracker.openbittorrent.com:6969/announceudp://tracker.openbtba.com:6969/announceudp://tracker.opentrackr.org:1337/announceudp://tracker.pimpmyworld.to:6969/announceudp://tracker.pomf.se:80/announceudp://tracker.publictracker.xyz:6969/announceudp://tracker.skynetcloud.site:6969/announceudp://tracker.skyts.net:6969/announceudp://tracker.srv00.com:6969/announceudp://tracker.swateam.org.uk:2710/announceudp://tracker.tcp.exchange:6969/announceudp://tracker.theoks.net:6969/announceudp://tracker.tiny-vps.com:6969/announceudp://tracker.torrent.eu.org:451/announceudp://tracker.yangxiaoguozi.cn:6969/announceudp://tracker.zerobytes.xyz:1337/announceudp://tracker1.bt.moack.co.kr:80/announceudp://tracker1.itzmx.com:8080/announceudp://tracker1.myporn.club:9337/announceudp://tracker2.dler.com:80/announceudp://tracker2.dler.org:80/announceudp://tracker2.itzmx.com:6961/announceudp://tracker3.itzmx.com:6961/announceudp://tracker4.itzmx.com:2710/announceudp://tracker6.lelux.fi:6969/announceudp://uploads.gamecoast.net:6969/announceudp://v1046920.hosted-by-vdsina.ru:6969/announceudp://vibe.sleepyinternetfun.xyz:1738/announceudp://wepzone.net:6969/announceudp://www.torrent.eu.org:451/announceudp://zecircle.xyz:6969/announcews://hub.bugout.link:80/announcewss://tracker.openwebtorrent.com:443/announce\n\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas"]},{"title":"ã€Nasã€‘æ¨±èŠ±frpå†…ç½‘ç©¿é€","url":"/2022/12/10/nas/3%E6%A8%B1%E8%8A%B1frp%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/","content":"æ¨±èŠ±frpåŒæ ·å¯ä»¥ç”¨æ¥å†…ç½‘ç©¿é€ï¼Œå…¶å®˜æ–¹çš„å¸®åŠ©æ–‡æ¡£ååˆ†è¯¦ç»†ï¼Œé…ç½®å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£\n\n\n\nç¾¤æ™– https://doc.natfrp.com/#/app/synology\nå¨è”é€š https://doc.natfrp.com/#/app/qnap\nunraid https://doc.natfrp.com/#/app/unraid\nç»¿è” https://doc.natfrp.com/#/app/ugreen\næç©ºé—´ å‚è€ƒç¾¤æ™–çš„æ•™ç¨‹ï¼Œæ–¹æ³•ä¸€æ¨¡ä¸€æ ·\n\nå¦‚æœä½ çš„nasæ”¯æŒsshï¼Œé‚£é…ç½®sslè¯ä¹¦å¾ˆæ–¹ä¾¿ï¼Œå‚è€ƒ doc.natfrp.com&#x2F;#&#x2F;frpc&#x2F;ssl æ•™ç¨‹å°±å¯ä»¥äº†\næœ¬æ–‡å¯¹ä¸æ”¯æŒsshçš„nasï¼ˆå¦‚æç©ºé—´å’Œç»¿è”ï¼‰å¦‚ä½•é…ç½®åŸŸåsslè¯ä¹¦è¿›è¡Œè¯´æ˜\nå¦‚æœä½ æ²¡æœ‰åŸŸåï¼Œåˆ™æ— é¡»çœ‹æœ¬æ•™ç¨‹ï¼Œç›´æ¥ä½¿ç”¨æ¨±èŠ±frpæä¾›çš„ç½‘ç«™urlå³å¯\n\næ‰€ç”¨nasï¼šç»¿è”dh2600\n\n1.å…³äºæ¨±èŠ±frpcé»˜è®¤çš„è¿è¡Œè·¯å¾„\nhttps://doc.natfrp.com/#/faq/site-inaccessible?id=frpc-auto-https\n\n\nåœ¨å®˜æ–¹å¸®åŠ©æ–‡æ¡£ä¸­æœ‰è¯´æ˜ï¼ˆè™½ç„¶è—èµ·æ¥äº†ï¼‰dockerä¸­æ¨±èŠ±frpcçš„é»˜è®¤å·¥ä½œè·¯å¾„ä¸º/run/frpcï¼Œå¦‚æœnasæ”¯æŒsshï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸ç®€å•çš„sshè¿æ¥åˆ°ç»ˆç«¯æŠŠè¯ä¹¦æ–‡ä»¶.keyå’Œ.crtä¸¢è¿›å»å³å¯\nå¯æˆ‘çš„ç»¿è”nasä¸æ”¯æŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»ç”¨æ–‡ä»¶æ˜ å°„åŠŸèƒ½ï¼Œå°†è¯ä¹¦æ–‡ä»¶æ˜ å°„åˆ°è¿™ä¸ªè·¯å¾„ä¸­\n2.dockerä¸­æ˜ å°„æ–‡ä»¶åˆ°è·¯å¾„æŒ‰ä¸‹å›¾è¿›è¡Œæ˜ å°„å³å¯ï¼Œæ³¨æ„æ–‡ä»¶åä¸€å®šè¦å†™å…¨ï¼Œä¸èƒ½ç›´æ¥æ˜ å°„åˆ°/run/frpcï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\né‡å¯dockerï¼Œè¿™æ—¶å€™å°±ä¸ä¼šæœ‰ä¸å®‰å…¨çš„æŠ¥é”™äº†\n\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas","docker"]},{"title":"ã€Nasã€‘tailscaleå†…ç½‘ç©¿é€","url":"/2022/12/11/nas/5tailscale/","content":"\nè½¬è½½å·²è·å¾—åŸä½œè€…æˆæƒhttps://post.smzdm.com/p/agqd5k87/\n\n\n\n\nä½¿ç”¨tailscaleå†…ç½‘ç©¿é€è®¿é—®ä½ å®¶çš„æç©ºé—´\nåŒ¿åç”¨æˆ· 2022-11-25 16:14:13 18ç‚¹èµ 139æ”¶è— 16è¯„è®º\n\nç›¸æ¯”äºå…¶ä»–çš„å‡ ç§å†…ç½‘ç©¿é€æ–¹æ¡ˆï¼Œè¿™ä¸ªåº”è¯¥çœ‹èµ·æ¥å¾ˆç®€å•è€Œä¸”å®Œå…¨å…è´¹ã€‚\nç›¸æ¯”å®˜æ–¹çš„å†…ç½‘ç©¿é€ï¼Œè¿˜æ˜¯æœ‰ä»¥ä¸‹ä¼˜ç‚¹çš„ï¼š\n\nç›¸æ¯”å®˜æ–¹çš„å°æ°´ç®¡ï¼Œæ‰“æ´æˆåŠŸçš„tailscaleèƒ½è·‘æ»¡ä½ å®¶çš„ä¸Šè¡Œå¸¦å®½\n\nèƒ½è®¿é—®ä½ éƒ¨ç½²çš„dockeræœåŠ¡ï¼Œä¾‹å¦‚aria2ã€alistç­‰\n\n\n1ã€æ³¨å†Œtailscaleç½‘å€åœ¨è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šæœ‰æ‰‹å°±è¡Œï¼Œtailscaleå®˜ç½‘\n\n2ã€ç™»é™†åœ¨ä½ çš„è®¾å¤‡(pcã€macã€androidã€ios)ä¸Šä¸‹è½½å¯¹åº”çš„å®¢æˆ·ç«¯ï¼Œç™»é™†å°±è¡Œï¼Œç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ç½‘é¡µç‰ˆæ§åˆ¶å°ï¼Œå°±è¿™ä¸ªç½‘å€\nhttps://login.tailscale.com/admin/settings/keys\nç”Ÿæˆä¸€ä¸ªkeyï¼Œå¤åˆ¶å®ƒï¼Œä½ åªæœ‰ä¸€ç›´æœºä¼šåç»­å°±ä¸å†å‡ºç°äº†\n\n3ã€dockeréƒ¨ç½²è¿™é‡Œæœ‰dockerçš„å®˜æ–¹ä»‹ç»ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ç…ä¸€çœ¼ã€‚https://hub.docker.com/r/tailscale/tailscaleï¼Œçœ‹ä¸çœ‹éƒ½è¡Œ\nç„¶ååœ¨ä½ çš„dockerä»“åº“æœç´¢ tailscaleï¼Œä¸‹è½½å®ƒ\n\nç„¶åæ·»åŠ åˆ°å®¹å™¨ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„çš„æ˜¯æœ‰ä¸¤ä¸ªæŒ‚è½½è·¯å¾„ï¼Œå¯¹åº”å¡«ä¸Šå°±è¡Œ\n/var/lib/dev/net/tun  \n\n\nç½‘ç»œé€‰æ‹©host\n\nç¯å¢ƒéœ€è¦åŠ ä¸€ä¸ª TS_AUTH_KEYï¼ŒæŠŠä½ åœ¨tailscaleæ§åˆ¶å°è·å–çš„keyç²˜è´´åœ¨è¿™é‡Œå°±è¡Œäº†\nå†åŠ ä¸€ä¸ªTS_ROUTESï¼Œåé¢å°±æ˜¯ä½ å®¶è·¯ç”±å™¨çš„å±€åŸŸç½‘åœ°å€ï¼Œåé¢çš„&#x2F;24å›ºå®šçš„ï¼Œä¸ç”¨æ”¹\n\næ³¨æ„ï¼Œè¿™é‡Œçš„è·¯ç”±å™¨å±€åŸŸç½‘åœ°å€åº”è¯¥æ˜¯ä»¥.0ç»“å°¾çš„ï¼Œå¹¶ä¸æ˜¯è·¯ç”±å™¨çš„ç®¡ç†ipæ¯”å¦‚ä½ çš„è·¯ç”±å™¨ç®¡ç†åå°ipæ˜¯192.168.32.1é‚£ä¹ˆå°±åº”è¯¥å¡«192.168.32.0/24ã€‚\n\n\nç„¶åå¯åŠ¨å°±è¡Œäº†\n4ã€è·å–ip\næ‰“å¼€tailscaleæ§åˆ¶å° machinesä¸‹é¢åº”è¯¥å°±èƒ½çœ‹åˆ°ä½ æ–°åŠ å…¥çš„è®¾å¤‡äº†ï¼Œè®°å¾—æ‰“å¼€subnet routesï¼Œè¿™æ ·æ— è®ºå†…å¤–è®¿é—®éƒ½æ˜¯ç›¸åŒçš„ipåœ°å€\n\n\n5ã€è®¿é—®\nè®¿é—®ä¹‹å‰ï¼Œä½ éœ€è¦åœ¨ä½ çš„ç”µè„‘&#x2F;æ‰‹æœºä¸Šä¸‹è½½tailscaleå®¢æˆ·ç«¯æˆ–app\n\nä¸Šä¸€æ­¥è·å–åˆ°çš„ipï¼Œå…¶å®å°±å¯ä»¥æ›¿ä»£ä½ åŸæ¥nasçš„ å†…ç½‘ipäº†\næ¯”å¦‚ï¼Œä½ ä¹‹å‰ alistçš„è®¿é—®æ–¹å¼æ˜¯ 192.168.1.200:5244ï¼Œé‚£ç°åœ¨ä½ è¿œç¨‹è®¿é—®çš„å°±æ˜¯ tailscaleçš„ip:5244ã€‚\næ­¤å¤–ï¼Œå¦‚æœä½ å¼€å¯äº†subnet routesï¼Œå¤–ç½‘çš„è®¿é—®åœ°å€è¿˜æ˜¯192.168.1.200:5244ï¼Œæ˜¯ä¸æ˜¯æ›´æ–¹ä¾¿äº†\n\n6ã€å…³äºé‡å¯æµ‹è¯•åå‘ç°ï¼Œæ¯æ¬¡é‡å¯éƒ½ä¼šå¯¼è‡´èŠ‚ç‚¹å˜æ›´ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨å¼€å¯subnetï¼Œåæ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£åï¼Œå¯ä»¥è¿›è¡Œä¸€ä¸‹é¢å¤–é…ç½®ã€‚\né¦–å…ˆåœ¨Aclsé‡Œé¢æ·»åŠ è¿™ä¸¤ä¸ª\n\næ·»åŠ tag\n\nè®¾ç½®autoApprovers\n\n\n&#123;    &quot;tagOwners&quot;: &#123;      &quot;tag:docker&quot;: [&quot;æ¢æˆä½ çš„è´¦æˆ·é‚®ç®±&quot;],     &#125;,    &quot;autoApprovers&quot;: &#123;      // Alice can create subnet routers advertising routes in 10.0.0.0/24 that are auto-approved    \t&quot;routes&quot;: &#123;    \t\t&quot;192.168.32.0/24&quot;: [&quot;æ¢æˆä½ çš„è´¦æˆ·é‚®ç®±&quot;],    \t&#125;,    \t// A device tagged security can advertise exit nodes that are auto-approved    \t&quot;exitNode&quot;: [&quot;tag:docker&quot;],    &#125;,  &#125;  \n\né‚£ä¸ª192.168.32.0è®°å¾—æ¢æˆä½ è‡ªå®¶çš„å±€åŸŸç½‘é“¾æ¥ï¼Œç„¶åç‚¹saveä¿å­˜\n\nåœ¨é‡æ–°å»ç”Ÿæˆä¸€ä¸ªkeyï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ resuableã€Ephemeraléƒ½éœ€è¦æ‰“å¼€ï¼Œtagé€‰ä½ åˆšåˆšåœ¨aclé…ç½®çš„é‚£ä¸ªtagï¼Œç®€å•è¯´æ˜ä¸‹\nReusableæ‰“å¼€å¯ä»¥è®©ä½ çš„keyåœ¨é‡å¯åä¹Ÿèƒ½å†æ¬¡ä½¿ç”¨\nEphemeralæ‰“å¼€å¯ä»¥åœ¨è®¾å¤‡ç¦»çº¿çš„æ—¶å€™ï¼Œè‡ªåŠ¨ç§»é™¤èŠ‚ç‚¹ï¼Œé‡å¯çš„æ—¶å€™åœ¨ç”Ÿæˆä¸€ä¸ªï¼Œé¿å…å‡ºç°Z4-1ã€Z2-2ã€Z4-3è¿™ç§æƒ…å†µ\nTagsé€‰æ‹©åï¼Œèƒ½é€šè¿‡autoApproversï¼Œåœ¨è®¾å¤‡å›å¤ä¸Šçº¿åï¼Œè‡ªåŠ¨é…ç½®subnet\n\nä½œè€…å£°æ˜æœ¬æ–‡æ— åˆ©ç›Šç›¸å…³ï¼Œæ¬¢è¿å€¼å‹ç†æ€§äº¤æµï¼Œå’Œè°è®¨è®ºï½\nTHE END\n\næµ‹è¯•æƒ…å†µæ²¡æœ‰å¼€å¯tailsacleæ—¶ï¼Œæ— æ³•è®¿é—®æœ¬åœ°Ip\nå¼€å¯ä¹‹åï¼Œå»¶è¿Ÿè¿˜ç®—ä¸é”™ã€‚å¦‚æœä½ çš„å»¶è¿Ÿæ˜¯å‡ ç™¾msï¼Œé‚£ä¹ˆè¯´æ˜ç©¿é€å¤±è´¥äº†ï¼Œæˆ–è€…ç©¿é€çš„æ˜¯ç±³å›½çš„èŠ‚ç‚¹\n\nè™½ç„¶å¯ä»¥æ­£å¸¸æ‰“å¼€qbtçš„webuiï¼Œä¹Ÿèƒ½é“¾æ¥ä¸Šjellyfinï¼Œä½†æ˜¯é€Ÿåº¦æœ‰ç‚¹æ„Ÿäººã€‚å‡ GBçš„è§†é¢‘ä¹Ÿçœ‹ä¸äº†ï¼Œæ‹–åŠ¨è¿›åº¦æ¡å°±ä¼šå¡ä½ã€‚\nç¨³å®šçš„æ—¶å€™å¤§æ¦‚èƒ½æœ‰ 2-3mb&#x2F;s çš„é€Ÿåº¦ï¼Œä¹Ÿç®—æ˜¯ç»™å†…ç½‘ç©¿é€å¤šä¸€ç§é€‰æ‹©å§ï¼\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas","docker"]},{"title":"ã€Nasã€‘ç»¿è”naséƒ¨ç½²qbittorrent","url":"/2022/12/10/nas/4%E7%BB%BF%E8%81%94nas%E9%83%A8%E7%BD%B2qbt/","content":"qbittorrentæ˜¯btä¸‹è½½æœ€çƒ­é—¨çš„å®¢æˆ·ç«¯ä¹‹ä¸€ã€‚å…¶èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä¸‹è½½ç§å­æ–‡ä»¶ï¼Œå¹¶å®ç°åšç§ã€‚\n\n\n\næœ¬æ–‡åç»­ç”¨qbtä¸ºqbittorrentçš„ç®€ç§°ï¼Œæ‰€ç”¨nasï¼šç»¿è”DH2600\n\n1.dockerå®‰è£…1.1 ä¸‹è½½é•œåƒä¸ºäº†ä¿è¯æœ¬æ•™ç¨‹åœ¨å„ä¸ªå¹³å°éƒ½å¯ç”¨ï¼Œæ­¤å¤„ä½¿ç”¨linuxserver/qbittorrentï¼Œä¸‹è½½v4.4.5ç‰ˆæœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬æ›´æ–°äº†uiï¼Œä½†æ˜¯æœ‰bugï¼‰\n\n1.2 å®‰è£…é…ç½®ä¸‹è½½å®Œæˆåï¼Œé€‰æ‹©é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ã€‚\nç½‘ç»œæ¨¡å¼é€‰æ‹©bridgeï¼Œå­˜å‚¨ç©ºé—´ä¸­é»˜è®¤åªæœ‰/configæ–‡ä»¶å¤¹ï¼Œæ˜ å°„ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ä½œä¸ºqbtçš„é…ç½®æ–‡ä»¶è·¯å¾„ã€‚ç„¶åæ·»åŠ ä¸€ä¸ª/downloadsæ–‡ä»¶å¤¹ä½œä¸ºqbtçš„ä¸‹è½½è·¯å¾„ã€‚è¿™é‡Œå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„æƒ…å†µæ˜ å°„å¤šä¸ªç›®å½•\n\nç«¯å£è®¾ç½®ä¸­ï¼Œé»˜è®¤tcp&#x2F;udpçš„6881ç«¯å£ä¸€å®šè¦ä¿®æ”¹ï¼Œå› ä¸ºå¾ˆå¤šè¿è¥å•†éƒ½banäº†688xç«¯å£ï¼Œptç«™ç‚¹ä¹Ÿä¸å…è®¸ä½¿ç”¨688xç«¯å£è¿æ¥ã€‚\n\n\n\nå»ºè®®ä¿®æ”¹ä¸ºä¸€ä¸ªä¸å¸¸ç”¨çš„äº”ä½æ•°ç«¯å£ï¼Œwebuiçš„ç®¡ç†ç«¯å£è‡ªè¡Œè®¾ç½®ä¸€ä¸ªä¸å†²çªçš„å³å¯\n\næ­¤æ—¶å°±å·²ç»é…ç½®å®Œæˆäº†ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œåˆ›å»ºå®¹å™¨\n2.ä½¿ç”¨WebUiåœ¨æµè§ˆå™¨ä¸­è¾“å…¥nasçš„ipå’Œä½ åˆšåˆšé…ç½®çš„web uiç«¯å£\nnasçš„ip:ç«¯å£\nå³å¯æ‰“å¼€qbtçš„web uiç®¡ç†å™¨\n\né»˜è®¤çš„è´¦æˆ·å¯†ç å¦‚ä¸‹\né»˜è®¤è´¦æˆ·adminé»˜è®¤å¯†ç adminadmin\nè¿›å…¥web uiåå°åï¼Œä½ è¿˜éœ€è¦åšä»¥ä¸‹å‡ ä¸ªè®¾ç½®:\n2.2 ä¿®æ”¹ç›‘å¬ç«¯å£åœ¨å·¥å…·-é€‰é¡¹ä¸€æ ä¸­ï¼Œä¿®æ”¹è¿æ¥çš„ç«¯å£ä¸ºåˆšåˆšåœ¨dockerä¸­é…ç½®çš„ç«¯å£ã€‚æ¯”å¦‚ç¬¬äºŒæ­¥å›¾ä¸­æˆ‘è®¾ç½®çš„ç«¯å£ä¸º54000ï¼Œé‚£ä¹ˆè¿™é‡Œçš„ç«¯å£å°±åº”è¯¥è®¾ç½®ä¸º54000ã€‚è®¾ç½®å®Œæˆåï¼Œæ»‘å€’æ­¤é¡µæœ€åº•éƒ¨ç‚¹å‡»ç¡®å®šï¼Œåº”ç”¨è®¾ç½®\n\n2.3 æ€»æ˜¯å‘trackeræ±‡æŠ¥è½¬åˆ°é«˜çº§ï¼Œæ»‘å€’åº•éƒ¨ï¼Œå°†æ€»æ˜¯å‘trackeræ±‡æŠ¥çš„ä¸¤ä¸ªé€‰é¡¹éƒ½æ‰“å¼€\n2.4 é…ç½®trackerå¦‚æœä½ éœ€è¦ä¸‹è½½å…¬ç½‘BTçš„èµ„æºï¼ˆå…¬ç½‘BTå°±æ˜¯ç™¾åº¦ä¸Šèƒ½ç›´æ¥æœåˆ°çš„ç£é“¾ä»¥åŠç§å­æ–‡ä»¶ï¼‰é‚£ä¹ˆå°±éœ€è¦é…ç½®trackerä»¥æé«˜ä¸‹è½½é€Ÿåº¦ã€‚\n\nç›¸å…³æ¦‚å¿µå¯è§ ä¸€èµ·ç©PTï¼ŒtrackeræœåŠ¡å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¿«åœ°æ‰¾åˆ°å¹¶é“¾æ¥ä¸Šå…¶ä»–åšç§çš„ç”¨æˆ·\n\nå¥½ç”¨çš„trackerå¯ä»¥åœ¨ trackerslist.com ä¸Šæ‰¾åˆ°\nhttps://jsd.cdn.zzko.cn/gh/XIU2/TrackersListCollection/all.txt\n\n\nå¦‚æœä½ æ— æ³•è®¿é—®æ­¤ç«™ç‚¹ï¼Œå¯ä»¥åœ¨ 05-trackerç•™æ¡£ ä¸­æŸ¥çœ‹è½¬è½½çš„å†…å®¹\n\n\nå¤åˆ¶æ­¤é¡µé¢çš„å†…å®¹ï¼Œå¡«å…¥qbtçš„å·¥å…·-é€‰é¡¹-bittorrentåº•éƒ¨çš„trackerä¸­ï¼Œå¹¶å…³é—­torrentæ’é˜Ÿ\n\nå¦‚æœä½ å‘ç°æœ‰ä¸€äº›ä¸‹è½½å®Œæˆä¹‹åçš„ç§å­æ˜¯ç­‰å¾…çŠ¶æ€è€Œä¸æ˜¯åšç§çŠ¶æ€ï¼Œé‚£å°±æ˜¯å› ä¸ºä½ æ²¡æœ‰å…³é—­torrentæ’é˜Ÿ\n\n\né…ç½®å®Œæˆä¹‹åï¼Œä½ å°±å¯ä»¥å¼€å§‹ç”¨qbtä¸‹è½½èµ„æºå•¦\n3.WebUiæç¤ºunauthorizedç¬¬ä¸€æ¬¡æ‰“å¼€çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„æƒ…å†µ\n\næ–¹æ³•ä¸€ï¼šåœ¨æµè§ˆå™¨urlåé¢æŒ‰ä¸€ä¸‹å›è½¦æœ‰çš„æ—¶å€™æŒ‰ä¸€ä¸‹å›è½¦å°±èƒ½æ˜¾ç¤ºå‡ºé¡µé¢\n\næ–¹æ³•äºŒï¼šä¿®æ”¹é…ç½®æ–‡ä»¶å…³é—­qbtå®¹å™¨åï¼Œæ‰¾åˆ°ä½ qbtçš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä¿®æ”¹ qbittorrent.conf æ–‡ä»¶\nå¦‚æœæœ‰è¿™é¡¹ä¸ºtrueï¼Œåˆ™ä¿®æ”¹ä¸ºfalseã€‚å¦‚æœæ²¡æœ‰æ­¤é¡¹ï¼Œåˆ™åœ¨æœ«å°¾æ·»åŠ \nWebUI\\HostHeaderValidation=false\n\nå¦‚æœä½ çš„nasä¸æ”¯æŒç›´æ¥ä¿®æ”¹ï¼Œé‚£å°±æŠŠæ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°ï¼Œä¿®æ”¹å®Œæˆåå†è¦†ç›–æ‰nasä¸­çš„æ–‡ä»¶\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas","docker"]},{"title":"ã€Nasã€‘ç»¿è”dockeréƒ¨ç½²mysql","url":"/2022/12/11/nas/6%E7%BB%BF%E8%81%94%E9%83%A8%E7%BD%B2mysql/","content":"æœ¬æ–‡ä¸ºdockerä¸Šmysqlçš„é…ç½®æ•™ç¨‹ã€‚\n\n\nmysqlæ˜¯ä¼—å¤šæ•°æ®åº“ä¹‹ä¸€ï¼Œå¾ˆå¤šå…¶ä»–çš„dockerå®¹å™¨éƒ½éœ€è¦ç”¨åˆ°æ•°æ®åº“ã€‚æ¯”å¦‚å›¾åºŠã€wikijs\n\næ‰€ç”¨nasï¼šç»¿è”dh2600\n\ndockerå®‰è£…1.ä¸‹è½½é•œåƒåœ¨ç»¿è”çš„dockerå¥—ä»¶-æœ¬åœ°é•œåƒ-æ·»åŠ -å®˜æ–¹åº“ï¼Œæœç´¢mysql\n\né€‰æ‹©æœ€æ–°ç‰ˆæœ¬ï¼Œç‚¹å‡»ç¡®å®šï¼Œç­‰å¾…é•œåƒæ‹‰å–å®Œæ¯•\n\n2.åˆ›å»ºå®¹å™¨éšååœ¨æœ¬åœ°é•œåƒåˆ—è¡¨ä¸­é€‰æ‹©åˆšåˆšä¸‹è½½çš„mysqlé•œåƒï¼Œç‚¹å‡»+åˆ›å»ºå®¹å™¨ã€‚\næœªæåŠçš„é€‰é¡¹éƒ½æ— éœ€è®¾ç½®\n\nè‹¥éœ€è¦å¯¹å®¹å™¨è¿›è¡Œèµ„æºé™åˆ¶ï¼Œåˆ™è‡³å°‘ç»™1Gå†…å­˜\nç½‘ç»œé€‰æ‹©bridge\nå­˜å‚¨ç©ºé—´å»ºè®®æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œæ˜ å°„ï¼Œè£…è½½è·¯å¾„ä¸º/val/lib/mysql\n\n\n\nç«¯å£æ˜ å°„ï¼Œå…¶ä¸­3306æ˜¯httpï¼Œ33060æ˜¯httpsï¼Œè¿™éƒ¨åˆ†æœ¬åœ°æ˜ å°„ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„ç«¯å£å³å¯\n\n\n\nç¯å¢ƒå˜é‡å¤„æ·»åŠ MYSQL_ROOT_PASSWORDï¼Œå€¼ä¸ºmysqlçš„åˆå§‹å¯†ç \n\n\nç‚¹å‡»ä¸‹ä¸€æ­¥-ç¡®å®šï¼Œå®¹å™¨åˆ›å»ºå®Œæ¯•ï¼\n3.ç¡®è®¤å®‰è£…æˆåŠŸå®¹å™¨å¼€å§‹è¿è¡Œåï¼Œç‚¹å‡»è¯¦ç»†-ç»ˆç«¯ï¼Œè¿æ¥/bin/bash\n\nè‹¥é…ç½®æ­£ç¡®ï¼Œåˆ™åº”è¯¥å‡ºç°ä¸‹é¢çš„ç”»é¢\n\nè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œè¿›å…¥mysqlæ§åˆ¶å°\nmysql -uroot -på¯†ç \nè¿™é‡Œçš„å¯†ç æ˜¯åˆšåˆšè½½ç¯å¢ƒå˜é‡ä¸­è®¾ç½®çš„å¯†ç ï¼Œæ¯”å¦‚ä¸Šé¢æ¼”ç¤ºçš„å¯†ç æ˜¯123456ï¼Œé‚£ä¹ˆå°±åº”è¯¥ç”¨ä¸‹é¢çš„è¯­å¥\nmysql -uroot -p123456\nå¦‚æœå‡ºç°ä¸‹é¢çš„å†…å®¹ï¼Œåˆ™ä»£è¡¨mysqlå®‰è£…æˆåŠŸï¼\n4.åˆ›å»ºæ•°æ®åº“ä½†æœ‰mysqlè¿˜ä¸å¤Ÿï¼Œå¦‚æœæƒ³ç»™å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºæ•°æ®åº“\nä»¥WIKI JSä¸ºä¾‹ï¼Œå…ˆè¾“å…¥ä»¥ä¸‹è¯­å¥è¿›å…¥æ•°æ®åº“\nmysql -uroot -på¯†ç \n\nè¾“å…¥ä»¥ä¸‹è¯­å¥ï¼Œåˆ›å»ºæ•°æ®åº“ã€‚å¯ä»¥å¤åˆ¶åæŒ‰shift+insç²˜è´´ï¼Œä¸è¦ç”¨ctrl+vç²˜è´´\nCREATE DATABASE æ•°æ®åº“å;\nåˆ›å»ºä¸€ä¸ªåä¸ºWIKIJSçš„æ•°æ®åº“\nCREATE DATABASE WIKIJS;\n\n5.åˆ›å»ºç”¨æˆ·è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼ŒæŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ç”¨æˆ·\nselect user from mysql.user;\næ˜¾ç¤ºçš„ç»“æœå¦‚ä¸‹ï¼ˆä¸çŸ¥é“ä¸ºå•¥æˆ‘è¿™é‡Œæœ‰ä¸¤ä¸ªrootï¼Œä¸å½±å“ä½¿ç”¨ï¼‰\nmysql&gt; select user from mysql.user;+------------------+| user             |+------------------+| root             || mysql.infoschema || mysql.session    || mysql.sys        || root             |+------------------+6 rows in set (0.00 sec)mysql&gt; \n\nä¸ºä¾‹æ–¹ä¾¿å®¹å™¨ç®¡ç†ï¼Œæˆ‘ä»¬ç»™WIKI JSåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ï¼Œåä¸ºWIKI\nCREATE USER &#x27;WIKI&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªWIKIç”¨æˆ·ï¼Œå¯†ç ä¸º123456\t\nåˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™è¿™ä¸ªç”¨æˆ·æˆæƒï¼Œè®©å…¶æœ‰èƒ½åŠ›å¤„ç†æ•°æ®åº“\nGRANT ALL ON WIKIJS.* TO &#x27;WIKI&#x27;@&#x27;%&#x27;;\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„æ„æ€ä¸ºï¼ŒæˆäºˆWIKIç”¨æˆ·åœ¨æ•°æ®åº“WIKIJSä¸­æ‰€æœ‰æƒé™ï¼ˆALL)\nè¿™æ ·ï¼ŒWIKIç”¨æˆ·å’ŒWIKIJSæ•°æ®åº“éƒ½åˆ›å»ºå®Œæ¯•äº†ï¼Œå¯ä»¥åœ¨ WIKI JS çš„ç¯å¢ƒå˜é‡ä¸­è¿›è¡Œé…ç½®äº†\nå®é™…è¿ç”¨å¦‚æœä½ ä¸æ˜¯ç¨‹åºçŒ¿ï¼Œå•ç‹¬çš„mysqlå®¹å™¨å¯èƒ½æ²¡å•¥ç”¨ï¼Œä½ å¯ä»¥è€ƒè™‘éƒ¨ç½²ä¸€ä¸ªwikijså®¹å™¨ï¼Œäº¦æˆ–è€…æ˜¯lskyproå›¾åºŠï¼\nå‚è€ƒ\nç¾¤æ™–å†…é€šè¿‡Dockerå®‰è£…MySQL5.7.34\nMySQL åˆ›å»ºç”¨æˆ·ï¼Œè®¾ç½®å¯†ç \nMySQL åˆ›å»ºæ•°æ®åº“\n\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas","docker","mysql"]},{"title":"ã€Nasã€‘ç»¿è”dockeréƒ¨ç½²wiki js","url":"/2022/12/11/nas/7%E7%BB%BF%E8%81%94%E9%83%A8%E7%BD%B2wikijs/","content":"åœ¨æ‰§è¡Œæœ¬é¡µé¢æ“ä½œä¹‹å‰ï¼Œè¯·ç¡®è®¤æ‚¨å·²ç»å®‰è£…äº†mysqlå®¹å™¨\n\n\nwikijsè‡³å°‘éœ€è¦1Gå†…å­˜ï¼ŒåŠ ä¸Šmysqlå®¹å™¨ï¼Œæ€»å…±è‡³å°‘éœ€è¦2Gå†…å­˜ã€‚è¯·ç¡®è®¤æ‚¨nasçš„å†…å­˜è¶³å¤Ÿï¼Œå†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼›å®é™…è¿è¡Œæ—¶ï¼Œwikijså¹¶ä¸éœ€è¦å ç”¨é‚£ä¹ˆå¤šå†…å­˜\n\næ‰€ç”¨nasï¼šç»¿è”dh2600\n\n1.WIKI JS1.1 æ˜¯ä»€ä¹ˆwikijså°±æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å‘ˆç°æ–¹å¼ã€‚è¯¥ç«™ç‚¹å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹\n\næ•°æ®å­˜æœ¬åœ°ï¼Œå®‰å…¨æ€§é«˜\nå¤šç”¨æˆ·åœ¨çº¿ç¼–è¾‘ï¼Œå¯è¿›è¡Œæƒé™ç®¡ç†\næœ‰å†å²ç‰ˆæœ¬ç®¡ç†ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ—§ç‰ˆæœ¬æƒ…å†µ\nè‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†æ–‡æ¡£è‡ªåŠ¨åŒæ­¥åˆ°äº‘å­˜å‚¨å¹³å°å¤‡ä»½ï¼Œå¦‚gitä»“åº“\nå¯å¯¼å‡ºæ•°æ®åˆ°æœ¬åœ°ï¼Œå‡ä¸ºmarkdownæ ¼å¼ã€‚è„±ç¦»wiki jsä¹Ÿå¯ä»¥ç”¨typoraç­‰æ”¯æŒmarkdownçš„è½¯ä»¶æ‰“å¼€\n\n1.2 æœ‰å•¥ç”¨ä½ å¯èƒ½è§‰å¾—ï¼Œè¿™ç©æ„å¯¹å®¶åº­ç”¨æˆ·æ¥è¯´æ²¡å•¥ç”¨å•Šï¼Ÿå®é™…ä¸Šï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªæå…¶ä¸é”™çš„å®¶åº­è®°äº‹æœ¬ï¼\næ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜åœ¨ä½ æœ¬åœ°çš„nasä¸Šçš„ï¼Œåªè¦åœ¨å®¶å°±å¯ä»¥ç®€å•åœ°é€šè¿‡ip+ç«¯å£çš„æ–¹å¼è®¿é—®wikijsã€‚ç”µè„‘æ‰‹æœºéƒ½èƒ½ç›´æ¥åœ¨çº¿ç¼–è¾‘ï¼Œå…å»äº†å¤šç«¯åŒæ­¥çš„çƒ¦æ¼ã€‚\nå¦‚æœä½ æœ‰å…¬ç½‘ipï¼Œè¿˜å¯ä»¥åœ¨å¤–ç½‘ç›´æ¥è®¿é—®ï¼›æ²¡æœ‰å…¬ç½‘ipçš„ä¹Ÿå¯ä»¥ç”¨æ¨±èŠ±frpè¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå…è´¹10må¸¦å®½è¶³å¤Ÿwiki jsä½¿ç”¨äº†ï¼ˆæ¨±èŠ±frpçš„dockerå®‰è£…æ•™ç¨‹è§å®˜ç½‘å¸®åŠ©æ–‡æ¡£ï¼‰\n2.dockerå®‰è£…2.1 ä¸‹è½½é•œåƒè€åœ°æ–¹ï¼Œæ·»åŠ é•œåƒï¼Œé€‰æ‹© linuxserver/wikijs çš„latestç‰ˆæœ¬å³å¯\n\n2.2 å®‰è£…é…ç½®ç½‘ç»œæ¨¡å¼é€‰æ‹©bridge\nåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œæ˜ å°„ç»™wikijsçš„/configï¼Œè®°å¾—ä¿®æ”¹æƒé™ä¸ºè¯»å†™\n\nwikijsçš„ç«¯å£åªæœ‰ä¸€ä¸ªï¼Œè®¾ç½®ä¸€ä¸ªä¸å†²çªçš„å³å¯\n\nç¯å¢ƒå˜é‡éœ€è¦æˆ‘ä»¬é…ç½®å¾ˆå¤šï¼åˆ’é‡ç‚¹ï¼ï¼\n\nåœ¨é…ç½®ç¯å¢ƒå˜é‡å‰ï¼Œè¯·å…ˆå‚è€ƒ 01-mysql ä¸­çš„æ•™ç¨‹ï¼Œåœ¨mysqlä¸­åˆ›å»ºä¸€ä¸ªWIKIJSæ•°æ®åº“ï¼Œå’ŒWIKIç”¨æˆ·\n\n\n\n\nç¯å¢ƒå˜é‡\nå€¼\n\n\n\nDB_TYPE\nmysql\n\n\nDB_HOST\næ•°æ®åº“ä¸»æœºåæˆ–ipï¼Œç›´æ¥å¡«å†™nasçš„ipå³å¯\n\n\nDB_PROT\nmysqlå®¹å™¨çš„ç«¯å£\n\n\nDB_USER\næ•°æ®åº“ç”¨æˆ·å\n\n\nDB_PASS\næ•°æ®åº“ç”¨æˆ·çš„å¯†ç \n\n\nDB_NAME\næ•°æ®åº“åç§°\n\n\nå…¶ä¸­DB_TYPEä¸ºæ•°æ®åº“ç±»å‹ï¼Œæ”¯æŒ mysql, postgres, mariadb, mssql, sqliteï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯mysql\nä¸‹å›¾ä¸ºä¸€ä¸ªé…ç½®åçš„ç¤ºä¾‹\n\né…ç½®å®Œç¯å¢ƒå˜é‡åï¼Œå®¹å™¨å°±é…ç½®å®Œæˆäº†ï¼Œç‚¹å‡»ç¡®å®š\n3.ä½¿ç”¨wikijsåœ¨æµè§ˆå™¨é¡µé¢è¾“å…¥ä½ nasçš„ip+ç«¯å£ï¼Œå³å¯æ‰“å¼€wiki jsçš„ç½‘é¡µã€‚\næ˜¯è‹±è¯­çš„å’‹åŠï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿›å»ä¹‹åå°±å¯ä»¥æ”¹æˆä¸­æ–‡äº†ã€‚\n\nAdministrator Email ç®¡ç†å‘˜é‚®ç®±ï¼Œè¾“å…¥ä¸€ä¸ªä½ è‡ªå·±çš„é‚®ç®±å³å¯\nPasswd å¯†ç \nConfirm Passwd ç¡®è®¤å¯†ç \n\nurlè¿™é‡Œå¯ä»¥ä¸å¡«ï¼Œå¡«å®Œä¿¡æ¯åç›´æ¥ç‚¹å‡»ä¸‹é¢çš„INSTALLå³å¯\n\nåˆæ¬¡ä½¿ç”¨çš„æ—¶å€™éœ€è¦ä¸‹è½½ä¸€äº›ä¾èµ–é¡¹ï¼Œä¸‹è½½å®Œæˆåï¼Œå³å¯è¿›å…¥ç™»å½•é¡µé¢ã€‚è¾“å…¥ä½ åˆšåˆšè®¾ç½®çš„è´¦æˆ·é‚®ç®±ï¼Œç‚¹å‡»log inè¿›å…¥wikijsçš„ç®¡ç†åå°\n\nè¿›å…¥ä¹‹åä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªé€‰é¡¹ï¼ˆæ— æˆªå›¾ï¼‰ç›´æ¥ç‚¹å‡»å³è¾¹é‚£ä¸ªè¿›å…¥ç®¡ç†é¡µé¢ğŸ‘‡\n\nè¿›å…¥åé€‰æ‹©Localeï¼Œåœ¨å³ä¾§å¯ä»¥çœ‹åˆ°ä¸­æ–‡ï¼Œä¸‹è½½ä¹‹åï¼Œé€‰æ‹©ä¸­æ–‡å†ç‚¹å‡»å³ä¸Šè§’ç»¿è‰²çš„APPLYï¼Œé¡µé¢å°±å˜æˆä¸­æ–‡äº†\n\néšåå°±åˆ›å»ºä¸€ä¸ªé¡µé¢å§ï¼\nå­¦ä¹ markdownè¯­æ³•å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ä»»ä½•markdownè¯­æ³•ï¼Œåˆ™å¯ä»¥é€‰æ‹©å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\n\nä¸ªäººå»ºè®®å­¦ä¹ ä¸€ä¸‹åŸºæœ¬çš„markdownè¯­æ³•ï¼Œéå¸¸ç®€å•ï¼åœ¨å¾ˆå¤šå¹³å°ï¼ˆCSDNã€çŸ¥ä¹ã€åšå®¢å›­ï¼‰ä»¥åŠå¾ˆå¤šç¬”è®°è½¯ä»¶ï¼ˆä¸ºçŸ¥ã€æœ‰é“äº‘ã€flowusç­‰ï¼‰éƒ½æ˜¯æ”¯æŒmarkdownçš„ã€‚\n\nå­¦ä¹ mdè¯­æ³•å¯ä»¥æŸ¥çœ‹æ­¤ç½‘ç«™ ğŸ‘‰ markdown.com.cn\n\nOVER!ç°åœ¨ä½ å·²ç»å¯ä»¥å°†wiki jsä½œä¸ºå¤šäººåä½œæ–‡æ¡£ç¼–è¾‘ç«™ç‚¹ï¼Œæˆ–è€…æ˜¯ä½ çš„å®¶åº­è®°äº‹æœ¬äº†ï¼\néšæ—¶å¯çœ‹ï¼Œéšæ—¶å¯ç¼–è¾‘ï¼\n\nå‚è€ƒ è½»é‡ä½†åŠŸèƒ½å¼ºå¤§çš„Wiki.js\n\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["wikijs","nas","docker","mysql"]},{"title":"ã€Nasã€‘ä¸€äº›æ—¥å¿—è®°å½•","url":"/2022/12/11/nas/8%E7%89%B9%E6%AE%8A%E5%9F%BA%E6%9C%AC%E5%90%8D%E8%AF%8D%E7%9A%84%E8%A7%A3%E9%87%8A/","content":"\n  7a17c05aac2d226c4143c6ce3f176c59f02663df3989cec5147588e644d9cc286315d96a8a9a139ec6708bd41cce0e3420d85753e573db8bb4890dec13c497ac2391c7c7f42b7a6cda9ead8fc1b720c87f2b937be0d6bacc6a32d5aa184486eae96c31f79f08fa8664a5418d9a91fa5d653059535f6c888b89f54a0195191e86f9c0f91e2146820516867459fa4705b94a19616259cc9dbf1d5b67b13f17bf78a4e50ea5574befd704b74ddd44e74b4177592a99fd6a4a66bcf645786d2e064f88b3ebb65bbcb13a22c56992ce1a71e86305f2089b7ff2e0e90cd58b6187db60c10cc9b683f091af76606354d11d88cba6fdea8e0ecfdd930a0e55278b7cb8a370af7eccc70816a6c510785558a2b6ef2a7a996c7b9516e119f21b39e2f564d9bdf988dc8a207a3423f13b2c56cb86303ccaf5ed9754a04f4e1d1714636b7048d83ce2a675c535b63a7096e6e3c831d5a4d6eb58462caa649d14ef68194b957f8ec4e4157b14f11413085380e494d17e5d038207a38d10935f7c0b2a11f1fb0be3d28696aacfac5c261e0dbd46ed39c559a55bcc8299305f3a67c783348f74a8a18996c1ae22bc1ad4b1dec3dd518ef715aaffa7e44443a7e5fb18559f3c5d98c719ab682a489be7aedad79f2448136c3ccd8b478d5f7fceeccce34403a79c7abe26fc9009ed0b0f8eecadfb984982cf5d9260332ecafc515efb55521448dcfd54388b39f811f53bdc1c6a11f2f1f4534097b971350a5506a6eb53493e86d45389f58c44a1dcb6223c514722545815f146f7e4e22c4146baa63b8e9da3fba2aa6d38025a0b76030cca8a461eac67a88715ad400e96ac419ecd16e0da06967167306c30a835bcf64e33425cd5830a311908b73ad76c99113ae8d2c60df7f0e7288773262ba7ab55ae3d4fdc9ed51add997968f33c4008cda6b46dd45db25384da9c222612518c7f8d0b675f5056b51d80000e7b5b37fcdd42fd5f1cf9464b4cf9f1f7d2aabe5924556676241bf3cf9a6083705ae1e1eb1c815db2f5f861a43b5e4821beaaf8c67753191538f69c91590538e669efcc75eecc4684aca4d18aa10f8cd48680c2bc295b62e42079347d0511b0f3f7b78904a3a3e29619ad2c0d835a6174f768368943d32a38a6b65c59847c7cc23ed0f1a4d3c7104208d5f2dfb1a66eeee8250a328a2b57e80f44dc6024483380b7c985e1498534fcdb1c63f7edcae8c6fa0ec7d38542e5d570e72015af468e86680141d1297aff0bfecf07bc74f1ee242e3478227e4271301fc2a43d828105d8d342c58c5213b874477f1a3759d7d85bfdbd40d0cba28eb6cfe70c0cfa959ffff450066f7f75b416a23b8e030fb1764609c8537716b5f9878ac7093a87cf63e7563cb3c92bd1db788627b3a98bef9ce8c46d621030bac050c71e324aa9045af040d84938e7819538673b346a03be87d6b6a8a20eb2829f4b2c2c2f9e399fce0cb0e8bd9579502c3d4cb4c58f6a429d4424c0c0903e9941cda3e68a474e2066ef29db3f7fd26572f4a31aec983956b3341bbc0cd962edc5fb9554f0a05e37eec284bed3737c06c4f7f56f1d4c887e7bfb785a24d64361523b4e4d3ccf72d0614e8381549ac422b8ebdafd47374613607a2766adbc9a8527240c8bd2a3e813e2667272cfc000040efb4c1b9f582cf50c3a20fd61175bfdcaaa6ef384585397f4a596434db0d69e37b71b544f0c567c519937f40912b489c389f4917ae7f1e966b6d857c7aac2fedb367a43003e6cb49d693192197550930b4089a2c16de3acb9f249ee39699ccb5d647dd78747b3e50cd3bb3de87bb7a2ab668aafacc84ff0804f84b060920d114d36eda44d15e1ff52fd942b7d868c2bf5d3bf33dd58e3cea0a9628cabef7c4e38900a852b6db15fe2d87c64f2641665fd8a0d3a53dcab056a09785a1d78ab3b16b71634758cecdc9d5370469ce66a4133997f517a39e83bdd6aadf23d299c619c721c8fbe0e59068452493f0ba664de209e53e1d835250e06dae0a5d28a45afc33a99e7216c21b4f2f206d66b36337c78f11587f1498aaf8ce6adf4cd32ff1074d4ab932db16d0a0da2943a4bcbf6870b191a9c0ded7893a965fcecb67fcc974cfe6973100645475ac8e4a6a43f33ebc24691701c02c2ae6b0fc4ce7efe638f5a68277b3a616e06e55f10f360920ab6a1f7117d8d6d2b05439b93c3b7d73713a6f3d9eee2fcfcb1d59bc526b9501c467cacb68687ed0bc03f8f96d89f8a89a639c5c3c7491767ac8d4061351d43b06bfb02e69879d2a91fff4f933721fe6f752acb8be326d086647aa1330c3cfb87caa00babe963347058992649b9df12425c5d8dee3ae458aba2b34ca5f703b232faed74db8cdef8c74815085bbc0f644738b8e6cae18b6d904ddcb3645e85d7de947b89ecdc74a23609a04e61607c1bcc8464e4b59493149167f2026c206670ccb87c20abb2b684d6ca7887a7e9966d80ea15815cfddfac4cb58d533d27616cd29d436fe0c85ef637b646b8ff823893f1c7e2f30a41cbf8521e27e2cb1eca9c3446060b77aaa5a9c7872471bcd6d34d0e70bd5bff52091ce92cdccae0fc40c4f9c2a5c72b1834386500512cf3025c1f979680fde9291d7bbf415c7787fb70d6a6dad9151369c35942e0c7f149d287f29b4b86954be4aa1f235b0e48b1724365c85c9dbd763af31c51e95baded978920d65b6406218f1e6db51834e9961a43c614d9ef664439e1b4333e7b8d74274ac139b7b09da4b15301c243e4cbf0fee10e4f36b76ac589e64655ad7d9db2143bf5d1b41bd36a3d6c9d214c4278816a8dd144666e1098bbc1367a85ff94b8366bd55248737af3a6678e0cf528a93b7ba5b334626b1497c8bea8580795110e1169564cc7ee508e360fc9c594e55f3aad980f32c03353c1ae7ba5e8fb55fc0e5e90201f31955a0fc9964da41824e7eead8ec0f7ad62e27522c466edb15da9df913eaabbfef137aff08ca3ff93d771b3537994d3e51f1fd62f532ee2e040e53252b7fc59e1b5407bba51ab14b1239c2d84d9e82c7bda3fbae57e5e10a25bce2f4d1d6cc0b97c0483df33c90ce3694b482bef2f3958335a18c101cc5691cbe88378d3d55411bf5e00f5b6f1dfe56f374df73599179d0612f626ef2b2db47d9608061421a755e28940b8db409203dd3d3998061b011cdc9f76f4a330913abad3237b7c60a5b8b2d943b8854a6d87cd553444492fa17035635282d2a14afceb679a1c0b7be1ff6f55c97dff946e6473d764c2bcc6d1cb72425c22808b9d01610ba7f1582bb29fde47c986319606538a8aa83d4017392dac7a2f10190b7021b62a6a87925ce9ffee2e25b16b00feaa4e4a123c140aa5cd7c2b1ba5be66be0e851bbb07919aaca424e910dddfec9471c2a327c5718efa35c3dad8f96506d972662eaaaf450e4c6ea4edbbc9a99889644cbb8f43babf7f23b1b4eaacdf39637de0a91364945c0893597f1a3f89f58a3f14501c06699cd96e4a3f0c76e10855fa2ac319b37ccf3cdc544b725afb8039f2c812fd25b690bd5e7e625e751557c172ab8464b3a8b9215c6c3f903df51c6db78599116d307109c920210dd727d9dbea2a4b2c4dfd15ff29802b9aef04d912ef8bc7618514e85342e333c900ab4f6a82c86fe4358755fd046c38fe76f29644dd72eb094d417e89c650009a32fa52d832e0b2817a2b1cccfca5c8d086cbf5d3ab3bb96b2b9f0eda03f31fe6a30913505b9c27bfe92e32d0807067823d09d2260aadc53a7bfe5e43c9a7434ce7dec9224e83613114250947e5510c02501c625de2d67bea535e8059a4fda01308ee824499dabaa49bf6632bc2db16c9baac18893d4d31cfe730d57328391b4d801b04fc7de6c80b1a86d3e5ab70f873b435b5bbc9b669078d8e1002d08f35ed97a52a087c8627f5cef538ddc5c5378a488c7083e8ee7fe3d5a9916931384ef2d25650849d91ea260294899cbd200cffa4b8d25348c2a38e38880335c512ec374ea72994b3a10674b3d9582fffd12b43ed8aff6c307cb6f29f42c4d88a462a9712ffc6e1666d0a775909ea48cfac72435d38380b9a595e38272a06173f0887121bce908c77e67572baa92af857a05b7dd54e806d9d161cb37eeb5ce09674ded8f7105bcc44ca9daca577b2fc1a7fa24e461270e73a6ff49556360d40eebda61a7245bbc8a04dda71318e8fbccecda216844f68f36c242cc168f4ed737ea56aa60cb8e9dc401f4461debf9466a3cb0bc8e50cc2550b7dd4b1232c77c9dd94afb66b2fc98d346163c4bdc6cb3a2f2a992617debcabf86695f39e6c3c875c55799efafd4b032520b223f18fb1e91cb6f09b6fa28b9124b757968a748128bc79c62de1ab9f2bcc44f2df97172d33c29417a2d87b8e62a187a56cb0411e1241f12f73f07c3059c2c69af14852a7a220196d6ae7ec641577b237d1c0732eeb0121c63eb723c5867ee1fc2457a060f37fc830edf071477a4db0fccff6f387854101823e619e14535e8becdfb7c47e9ca56408f1c775a60768765524645aa9688dda9694ee9ce74ab56073a5309de38f24d936e4ddfa63aef6ac795c7212b71e6331c0967840be06aaa29226e5452bf664fa90f6ce13528dd897b74369340eb7bd04de111188b698c91f4525439c18422c523bdea008c7eacdc148e7f9f83a1f853a5140318d21555833890c6d6362152861fb2f7c338ddcbe7072cd7048903e14768a6ff52724b087545afb0dcc706dc46d214e8a1b456fff45db6e2698a67daa3f7cd3a215a76a60eff2ce1d90d87354f129b3b89b839370a556237c8481ad9f1b6fdf58eb86f690201ca882c3e5d51c61a760d8f3c1a27d39509a2324bcad6a75d4635af8d88321fc73e1b740295672a5c24bd5595adc7425810715659cfb8848ace2c19563f24d197424bde4f9ed9180ec8cfa183f3aff8248ae55aa0613686483fd27c8192bbb1d5595c52b94f45d7b056add3bac42e1ebe48cebc70b94e1b3ed992819a1989f0d84bc2da88aaeb541cef3f71b7f05025939b1088e8faf5778134c7ba39fccac7e517fd29589157d2de670b658ffaefd926adaf18487bdf7a41c34385d1f8c39e5e09b9819762c3a3cfa3d38a843bb99e763faa68faf4f8a775fb11f91adb681a5b730575932c09f768a9aafda09eea85917c3100e17293f3430cd968626f1625f58771dc7aded10907e26222092363d022b66a96a0a44da39130a35c22c937737cb640739ea45a9c7687ea0b17504b672b0a1e728152173d54844871e7fcf857eb97e29340af07b0ea57b7524cc13e904a4ec8cd9338f4fa6a60a5572be0a281500e2b9fca153573a2efa16dbdfb89491bd188b5bcd2ceddd56b797d25e2af27e01d1aee7dd521495ba60a31deda72022269b67771a3b738c34555747b5ba2c40e626e44abb3b7de5ee22aa385c9dec02341d6cd6a55255bc16909c11829bff3f363f6a74e0d27b339831076cfb965dd53cb9aac4c76fdeb6bd063dd6c4c26d1254f05fcab23bd5f4dbef28c87e027b15093962a2b90c91f6cd18a554caf0b9eb3b6e27716f5ca79f81d4e6b8e3e17bfe395b9f9087cccf5dbf87d8e7f37ce21ac72c6966e0482d0d1a6a97c7678804736bff831909f38e8021e2c71bf4856c60c318a80b3f8c0b6a2d1cd9b8b8bd689de785386f117766f2ec3fa668376be7e402a25721609d139ad0cd456c24f0785eacadb42a595f708d44158a4a53c7b65b7bc5404b2aa58aaeb1f244a4e086afb8d0605221ca648e2c94ef94ca84925d79fbf0ac793572380de5e2381d9c8fe9e70ed7dbf73c53b89b3eb468d13ce8ae7f169170273af7b0f6073e91325859f8dff3217f618bc51cd4d63c14d4f5fd259d78abd0a24394ebc6796fb4934a6b9d1d2a7c6d976597cbca1731dbdbbed371d1619f2850bea157dcbfb613c6e29bda7574f518a8fac02d34366361260a920d506d8797e09e80720319940e604130002f703dcf00a783ca5cb1988bb861902b48774da1847a34fdcdd25a688105483cf844b410ad13d7c2494af6b1fd85d695c825ef8626c4d56932bb35970d7244516d6573eab8e23b5d4681eccf26555ca2f7c6b06cac744dee04383388d7a3a8fb5fb1f6e8fb3adc29aecd8e7dbd0fd88437306caf4ccacad5c5d298e0cdfb2c5ab2243dba57572f104f81d7a748d9ddae9201eacab52692018c0f1fa48e6f50d27ffad9017ca13494821ea01dcca2ce2770b567c770af66c380fe5ed53d57b810e8a5a09517f2ccc99e0911f06681981a47594fe2a2dbed7288906cb8978b7a42155c13104cc770d43f35c113cfeb13159f668169f8a04b74c6e5fde7f0a9716d02633d3be65d4b32ce2fb4ecd9e16686a9892ce634675998f031684ca338e485a970130cfc31cc40280c26f8dbd352f543e1007ae827eccb96148247f7cf83f301a23e94744c1210e117cc7fe3c8af872848c9a8e0dc93d3e1341bd257be3c4b4a9b495b02d08774a5ac18e1e3148e7932e2613e1e2f8a4393e4f9b351d91aa5db67f9aeae977056fa99356c91d17f89c15d7508c086857c0d4c6814df7e44f54f2e4fd17a584fb85be05f51b11a369e631b2c921bc1e2e86dc86a391f3da149407e61b4111ce0eb5e1dc08c517602324c38a2704ef5025579e21e684b16fa5dd9a3ef2123148e99466be9bad4a24154369856e88409d16b6eb7e71b1dfe0cfba35ddd14e061c2c30bc81f33384bed38ef75ed199c915e2554c5672a0862e4501c36a31b783c2539180ceaeef4628d2a6c32b7d8259d4d5888465f2d97be7d914d6ba1bcf456d82b2b9ea4cb77a0f586f372d1190a1854c06c5886f4a371d67a6bd82374b0a3625f8e634e982d9fba86df6db698888a8932a23a628c537f68c9bdfb5a01bbdb4d8933060cc1f9c46217cc9ca15fe3453f9ea14f657d340491d8995a5007f75a03e94d53429703ff28bf640cda59d97b93f821a5789664c779706c13e729d7df6db50603695fedeae1cbb53e74244c5ce8d5b0b47a989232eebd4b4a618d63bb456c7db25dc7793adedc7e7d11665acfb70e1eb66019e0daaecb893d0a92af61fd3fd46aef167ce07339df05244fe797e502def46e51d8293f4f8b28ca395efcb269dac10cd09ad77aa1c9cbe255a3874c548c1a0072115f899018ab8a362e4152cd7ab6808960ed4950e9cba2ad0ff2390bf55cf916203d5942c3592156732508b1321ebb6f11c738847a5fdf83d552f1814bb5971467ffa23e6a672cc1b12d4f06048953deb40e6e46876a90b533c22ba51375f3e060d5db80cdbd0d0905279a72867e9cf50aa066e9b6b61150165901e1c133ab890d9e62bcf0acefcac78adb561d938b2935b84808f02967445402659215fb141e286be76bcd4efdce34e806ade4d5e7f2481a44b40172142b3a5ed5a995800d72c581dd94294dd518b8239d7b5335ccf5985dd47139203ff54d83536a0825654df191571c1c774e3cd6c7c860773ef05564b5cdd24584e8663dc564e5a4a69f61502aff405424b9229bc2f0454ba8742bf8e40fc101b7af0e8a5eba829009b3b6e1d278e073efedfc05649ed5be0c4e4ef65f5cac7af5fc06d61d4b5ca32a05e6a191e0a165bedad4023dc7abc8736dc61d52a95c07bf59d6535538503249ecd1830bfb638f44e731678e2445ec0a6658384a1a9156c9de248029e7d7c2b6e09eba1e25381442b7b290c0fb6d0cba86a0adc9e35d1e889e3beb3834d1f86bc5923b6e5579bcd90ae87a0b5b276b34296c1493e6cf4efce924dc5888a12708fd70664316636a945f4ddbdec8f819c7f9222a0f23edc7eb30bd49f2c230199d68e8899d5599eaadb51276d3933550ec7504c6bdc5e0d91dadf9b0b9c70b8978e59737107cdb11a7e2b967a025f2740a0702bd00ace263ff04032043d828ca3ed31f89f908ff0c2ec4c491fa59977d3c882f2e6e7054c02c20dd2af24063570f54dc6a266215559416b85583f3c11d3dc3b2e612b71ef747a92c713a1f576a3183dcf9fa6b70065350bc66611a28a3f710285c5765810c7dae0f4d39485bd87df3ba07fa131d2ad41d30cbc95f1acddce2f5db743ac3d083aaff097271fb3bb206f8d3d238ea4dfe41875d07a4c1dfbbc5fc7f3cc8b7e926ead4e14d202d80cc47ed77d3ec63b67dece6a75cb3a06b20e816c5edf2ac743dc6f1afc2e2a90337502ab018515dc89917d8e660bd33c1650fbd4b71edcb03bd036b32aaff7c9342e6b514a5ea401ce69c15d905ac6e101743f1dc47da1b79590bbed5a5b63995ea79785b6ebcba1582b83ec6b606a7460028daa8cf3ef00196dc351ef7160536146f5f9cb5105f141ec011f3247b7872eee39dc8b9e53114da6f62435799891168a877718c510d059d146f3ff7101f9cfd0c5aeea5231fe9daf52d352ed4fc33dacc02927c1bb5a9707f1745fe199c03425ea672c454d95f9490f5037698a08078c9e5c75e1760add795a53da0dfc9af1b326270ef4915562ee77cbde1312b737af054ca1e5c4b686d37b9669c856d0cb725317b408927a25d76f2bb98259718555e4dcab7316fbc8ca6ffdb8fd5c359f3ff425dd8ada72ef91774e27f1645f8e8145a51a47ad596d3211d06fa1a1e8b8523fe6ebfb60d31ef310784ac615bc47c865be4b6f0c565a5a67778261ad8430ecdfed00299effd2a2930fc3b2856163e014bc268c0e0c2fd94d221f3caf658ea4ee28c6603275906c1428191cb9f9ee04e6d08f259c3db086642b7094d933d11e567b5f933d8f649f70e38262253fb7579c56a766b7b6a976ec63d46324a600448a78e28512652f33ac2d6b82be8227c56f49d497f7717219fad372be40ae4a4e92013523a62921d64807cea815ba559d5d3d071ef69449c74e727005605003f88b445d0201f994c07a8110ed201c5e8bd5d4ec90a65e7c07b3e22847f283af76778e86f067bc446c1b41c4d93598c1953e3e21b17f69cf0a75082e24f28f764aedbd55bf215beae0e214982c5d99f7a5684e1ebd8bd00f919518039c23b28dcffc70caa900043b0bc5f867035edd9f8ffe0f3ae8fc25802e30bd11aceb32a725d55b2e6d9fd3dcf63df491fdbcdd612a2990ab8954a5a22b56d9756c7f27994a749b63a4c8b0ac6b4bc311c05c6f47ffad8bf77d8918a77573caf013f0221c7e996a07b8c5848036a9c1f29d5edf6f4381ceea89a1790bf57f2cbb7affd1b9f919ea9a36eedc89086e4e6da3b5141573bbec87bee2b6b5f1a88333e94e695702dec15c82a9ea69cef3e3e1ece8cfccf17448d78ffbb6deeec5641e5327ad05ccf75e0f91675e855efcdf3891b6edc90ba9e97de459b2a50c6c0560c5013b5d6001161d0f1191e5d124e0e8586e5ed88bf99d65b7f9240cd9c6587b00cb59ac04674ca664189636adef20ebf54a73faa431796a0e34608f98561db4b20babeca52072da2690430dae36780b37997265be9cf5a915abe2636e3250b96d9f4e9906c8204b8d2ded2de65cfc0b6900cff147c61e9334af2d3ebaa0a8838f711db994ccef6465ad3fbe62d22cc4d0d9308fddadd1e335ad06ec3ad511122a58e8e0c8c50054e9aa2090d0660e5998dccc0f415cb5e89349c9ec32be3c063887cf996507e8efeb2ae713f04969fed73e67ce1b051ee206ca3dcb09c51ce5f7bb39f636f0c264bfcf88f306b4641bcf4b6c44a7fdc494c0d3beaa4442646e36ec244ddc66258590e6cefec18465ff7a4cba6c648aeff3ae59f0e0b976c03aff412a1302b1aa496e3a5b9e306482ab201e335ea1e54f120e28f00a978909aab7a9204c1fa14c4851a8af41e10add68734ce2a58e23fd9b9844ddd3e8c16c35fe1dd20f07546741339ceebda59a5b37c0a8a533b19a477031def1d0e008ee4dd2e54a06da30f89c95ee00fdf2b1cd385bb96f1e78810dd26e6d24100f059ede6c7c24b8d626a80bc4d600e8aa41414ecde2e57d4709183d886c95c6ba0ab534bc927e04746665126163f8c61bf18b29106150c1055247415dda588d498a302241dfe7d3f84fdfbd6a884e1241af50b0210e4da78861f1b50bb6353b120f35771ae2b5a5836f295391fd3a9dfbeed1efee14239cc529382140dbc45b27c21958ff4fc1eaac671a78a1d3eb2e194fea9d2699eeecc25e5a82947e143866de3d89c65debd28a87874951cfab74d07f64325a4ab87e7e7c05a5673d73e29b3e2a6431ee49b916f14ce8b19ed6c9e2a43d5721b34a749302affb7ebf097bba2084ae4786d10101d4c4356c704f4e75f666f841b154473c6daccd6d37ff051d325656abaf6514de597d0b08c44863d56e7ac280faa240f00083e0be18e2506b561c260d1bf1b42ba7dc7cb8a2024eebd3b2037f04e2377a1484450e24a77859e16d3a89fd7ec66ed5de670fc6aad4dfba6369bdcc9a1f373590c71d45355c5276f6f910d216227baa2bbf97ef0430ded86c9d56fba39e72d798366c170481bc3fe6a688ca0698e6699e971dd4b440397cb44f7c24ea3cec66313038897a225e5f8968fee053757ec215b698d8861a4544beafb54ad86339cee18f6b61005f7e40fa901e9914b870b7faffd4da0cd9be92da2794fcc8477b4cc4b350850c1cf2c8914242e2af4eeba0e1b05aa39460f93dc2747e4c9d695e1294f0222eb56ee95f872599cfcb9543dd0e5d3a5e00d525053a91b120354e834be32a807545b3e504f71bd5b5033933541f4759cacdda5603f2a25b7316db1afbb2638b846460a7831509540d065ce1e324a8d4c5c6b12741fd678471cf893c15775070dc8095585996e1bf900bd2897d43f5df6fac0181ff9574166d53fac5aca80b0fdbdea036614d5ab5ada8d6093d2f4272e024ac1fda114bbd9400c690ab7633c68d918e6baae968cac9bc168d7e4417959cfab26575a55e0e92f67c685f812dc35bcd8e6123669847a4a9a5ed554437a3cd4ac958d823977e4742e005c1a0fbb5a37b5e537ff33e4729bd8554f34391aa10201b436a24ce65039ec288d7007a15bb2ecbb3111bc34f79d29322fcb245d61da4beb844fda618ab3d4c499020dcf8196e55a4ba83e4ea30c0a4503df81eb383d34268c6f30272efe5f8a128ebae1194f97784a128e7e4e137b051e3753cc1421752eff12a39e552a9cf13d34c93bae6a5ff47241ecc43be29a476820a6e66b3720edd3ebfab4b608abd4778d4895414d71046219b0804b3ac81b79e3400038f02e95c09640aaa979f4125340099c610d11c16e49d92e4122ca675a638ffd467b2028a906235d5cd6e3f6422ee85a819fba54074ba1a55f09276b085a88c7cd1270eda16c3bb760081ef096484e9d7d7e45cba477faa579a62049c0409130064394213cab1ad00c11b7a39a4f54f4f904d4590470df5f4e728abd24dd20a8494495b338d11fce50b78730cef775d71da2cfba8d0774e4668103b0e45d4df08721feda8d3fe6e5e6a38f058195a66c61a55a2753d16cd2aad8c952d28abfafd00581df132fdaa8ca9236e76454e111007ada1a849cfb24a29e8a6d25897b5dd9412c0697ad284a7d94e2a593498cd9b6a6587559d5a5c7c537788ac95f2222d6a135d0c1098b399bbb0998faa0696c786a527e9c1034e98fc40409455e2f52d2addf7a9004471bf02d50a54c51095f6a4b23a1a8b79e946f1924a39d539e5337140e317f0a1ba6e2c5621230e5a9114cb9dfa0a60342cf39063e4abbf330e3f2ab4ffee5bbdfb299adea86c51d225c573ecb5cbe45762f8daf9e48ac8c9eedbc15d3be55941949878ffecef37eca07bbe86f55fb7de8c68b11214c2ba257906f94bcdac32d381915b6fda1a6f41664354de72842195579897a5358957cccf133f0e06de89bc733548e94f057ea82c48ae4988e3c13f242801fabe7f82eb9c0743e6c3edc6d994e68e69a71143521811386a9684bc7a7329efbb30d9302523fb8877abc8738520d5eb6c1e297f2ee6f4a64bff236a3df5126c77987bd1e69c7df7d68f09c6c09780f343dc5389e2590842839a5ed86f60c0a5ae71c8cc1f531537108fc95393a1827cb3f4bcae7759268fb3a9537d16d85acbfcf2d4005f3866a97b55f791f45e965701de82970a622397cc095c4583923d84b9ab098feb1153e64f1765b7bd2f98668420f43e1f9c3584eacfc8cdc6a9ba7b57b1c9952fe4af3d2a8926b13897c17d059705a55e601bb8e60599ef97e08f9b3ac471a2aac9c49066900d5d8b632f6a666c478bc2015d6c8cd790f7fbc8b165aef36d056f4cba34d075f387686b267372a66759bef7fe32311bcbf5f541b825496cbf2a07738d4139540b1aea87e9c9faf1ca265fd97ebe26517cc7d9b9138b15b5d244f807cc60d22f42d8520cd31532a66e0c0de4224d5ce75da225ced4b9d0be9ca02e585c213b96e04093eb4f8164d628ed5ddfa7b3866f49e20ded52a827211420d323cb54c9a6ad83f347edeb3648b68d92aae5d3b0ae28b442f9bc869f60a95173c64af6c1c5f10b8ac54005718f1c7ab42a93240b25260c63be85a374b3cd0636928e90dff164c016f3b4abcde94de97eee6bf7765109036cb595eaa7e8056a2d48828b20305a8a0c942f43465465188bc9e1eb495bc80dc25c942e3bc1f797f8ff23874f740e6814a3342bbee7796cf7e99da08134d6f141d3e0e4dcc7ab3edc31b203045e61dbafbd3ce3299f70b93dff12ccd4ef4efda1cb5efa72155942ee591f6ef87b69157a24271df88b2bc84d0c53687be3d9345782fda9f5a6b30c70abca62e622cb3ef958a70b3cb18c26420ab38f2d9b4b54285419e383b650fffb68bf99855c38707a39671edb60057c3520983a21fba2119bbceed026993e1668aa93430a586128e663bd9396716211412522db8d3659f940726e4642975dba153fa4bb80aac58a344e1621f3d8eead652694ff0dca202949f374129be08da916ed62a0e40420195f34d34e0b1607e3face45cbf9a78c6194acf57195317dcf9731183fba952c022710074204510debc06b0f0fbc72f09424c7b8ad3a366030e15bec14101938547c1f6c911a8baa658ed3a7f32ee065c04d715e30d160ae5edb0952b1f0a28ce0a7a58f5269e0376a4e9c2fa0b0d4a0d1db94c786adbcc5ea8d126ad8bf01c20c611f2d12ee882eb0fdcf9135445b88a7d94908395f35f2ca2cb9bef5af85780b8110333a3265c019836d7a9476c92e2090e61e33cb171b91e293af276758cf51936177752f83f83cdc39f65aa9a18e27e673c1a5b0c9ab4c88c53569689720c313eb3dc607d2ebc1a699c401762bcdb80ec0a44a67a79068382d99754c5257f103ab7ce7075c29a4f36606c660f2499ac23cccae93c70a34e7c6c317fd8b8c23dc27f61d3c9a26d89ab44c4b5b9dad72da13f498496a2589e0a6ac34335bb740bc38c683b7e853f8b61eff64667186f643e162887cd8d9056ea540978e16f7bb4150462e9abc95f14f702c5244c822542bcd905364b367bf9108a25091a62b8b5d035aea04b30f1bceac3dcbba8d4c53dc98aab52ce304a20bafbacef2326efb509e376cce83754782d04964885f9f1cca944cf537fd1f10e827aa317be0d67b90c52f7ade3705c66c4735cb45ebf50d4e1d4d32d09299833fffd20374117aaab2cbb34b2c8e4a3d3dcf2f5bb8aac5bbbc82155232dcb91a7590c892b0dd6422484d9f86f147b07d89f9b9bd31ba55651acf84696c26282fb1728becb583e4756671be555b12f7d79d665ad58a14e10a4fde81bd854ccdd27131d93c316625e3977b51f63afd54bd4f52f293c41ca29d4f3baf0b08c62b91fe4a0c1e2d0c748584175e1026ea27577cba79c149cf64fda22b895cf15f1c05f6b5d38a743c31b49ac7c6a81047ccbb4fc72f858c158cdc46478a71eb9a9a5c2014bf79b8931b1643b7b92bc58e64a75c1aa9fdea3c5668368f8d7ccb92a4018b40aef8a693be61f9e0583bf714a2137acd813da7979eb1a41f7ea690a3cdd91157e6290af3b6b1cf33feeea536529d6008b184aaeb430aea80aae54c400eb2ee5a1d7305dc6dfcd47570cbbe2d8010a3732e8b28bc396e507686872e3204809aee3944766e2925179bf6adf43ad31c66eaac0f6550a3aaf2a7d82d32a49beb04568ff84256cf17c98ff7727ef65c62fa1f937de8a98e21d58e45633b11ddf4b1b22e05185f39488548efd65e4535343f4b88233f077df8439c6f48b6d95a7afca0f4df07650f502d9752707c5b8d4d7e1b40344023eeb3f8395d876966929495d97810468d22f5426d8dfc847e2871b16b4511a6b00cffbf27f984900ecd3ad078af9197e79c16526f22514d386625629443cfdf0828508afaf28d39a117a3d3a5a4cb12fcccb9572846eddf33b74398d4618431d1be651368c0273d0d07f876d6dd7efdf097e3a6491eeb0260a40a7081058f1eb0520f932d3be628845296816b6e7fd0be19eed15002234b182ba5d57d9c2434c08420c0ad4fea8e0d20ce390e836fa65731c167dc906ff8e47f7e7bdaca179d22666b40670db637cb20073cf50650de4e218ca38c3b2e1da6f4bd647a66d3aa689944627a1e3af9ac0e3dac1203a8533ae0532ba394d6a372423a3c66b4cdf189922063f8919cafe98648d760379fb17d51903c0ade31a5adc82ca437cd0a9d46075cc939d6ed060dbe08970c34804512cd67a765366635747411537c0cb708f85a8f8540d7755122cca864e2f971d22d5b280099209f20773e10d5f93250178aa34bc724e258e07c9aef1f7e0883becd96af8f396aa701559faed790affbd9c2ebdf7cf0249c6b38924b3ee04b785299c3f735232a0d2cf8487cb17d4cc641cf3661a5d6c3cdcd0605ed46c8e377b25a4e3f7414837643bb28ed5212c3c70f91e15aeab4672e1672cac77a152a982469b52fa46a787913f45b7496eef19ddba5dad42d2e5dd2a6adb661d1c557af21a4d108c4be4e3bd64c0fd81dc31b37f21cf60798fb903a346c104aa2ae27980e2c5b149ddedd134d4082ea3bc487d73bab0cd1c323311504ddaa44833bfc08196dc27ce03ef8cc0d937d9e89d3cd2114be43967f0dc0df7422650a45e6f38842a14b88ca7e05c21c08f164da12923020033c8c366d1615379b8fbb6e2633e18fa0239691164e2242c0f51ac2d022657f272dc71e94b65d2157693882f86f6ce31aef59ece3359e14461120c6b9adc8ebb7b07f79851a74032bcb3723fd5046a64deadc16df670e7aca88f7be4a0b9c1954d5e9407cada068f63de5d21bf7251d1edc7f8c5c9fa2a9eae24517685924662835d723e48d9fd15961cdf9caee32cc3d7b17b41adf9538fc96c1e60a3b02c98d2714b141f5fec647136990d3d84b1a7eda56d3f04d1f7f91cd356c96da46656616fabe6ecee7df369afb1efc174f658345366aa1c35cffa6b3f3d03a5d27609846c0b1844785b06b6c6cf1d98cf2097c17dcda5286115594b559edb4a62f68748f31e8d87277bb4e5e316bb38ff305462b3111cff1497a22c5b056736bdd8062dab48cfab14cdbce432bcc4235af90c48fce8f6b50092129add1a653a98258729185954d4d342a5de55bacd1be7028f19ee3e5b6d3faacbf093ea4c8fe00526777368844d4ce555c0e2d5e6a04b376d5f1489e2360c4b0a17f1312e0aa878adbeca7419eef63b3f2fcd01f3ffb9b7ad52001a6d09e021b9ffa8c9a85e1781ea8872312faba66803dec178b037c5572a1c10ba2cf103143161581050a96882e0cce7dcd22daede9d1df19182387d522a5b99bad88bb5fc07917c9a0f0c2ff104e33ec3a773b062c000c11a9f4c61f8bf2e8be4fbb23021706a61fff62f075afd741d378cb0e142d245762de837be8ed28a1ca573f4a740646e67efebeb2217d2152b76a57ed69c808a30c97c5cb78a67e32f8bce87be306b8bf6a7708509ad7ee9e44df3bf82f04370fba8a92e06b0983e14ed3e9ca94524b168c434a8d4b1bc04ada3a1bc3201b102d7e94fe06368de41beb5671bc7e55c53a4dde94544ea3b0a9e9569650398d5dbef4f055edb8c5d17a9e04ea69ccd27972cd62d01c8b6c450ddf9b36e0cec34f81a281bf53adf8f242babaa1864563fc405d580250ef2e1fa3a9b336638a4b7ae451637bd0e10f5804ada9d24d78a6a9c5fa2b634a5b707d84b0e3ac7e0e8f6a4dedd5dfb1751edd831c478011706af94c899a7b7daed783c0e0d80b1869d53e2b97c965f5dc839fdc35dc29a844160227f63c9be6a3b2e4d9e2ee4da481327bb317b16bf3e53237e557f96e420b4e356f18a8def26f5716df57d8b574a15c68f1c592cc6ee22466daeea5283a7548a1d69ca4670af213673f0984c49f60e8d080fe7d73ffc9c409c4cdc3452465a14e2b4fcb31412ac0796066c06308e2688b292083484e2d76b33014ebb7aff96e30e51430be74fc03eeceee603ad188777d742c07c9d5e69761d4fa59b376d47511f15ba9070c1492ffd877d3e70cbd6b46a0ea70309de1d632e87d4b9cf23dffb36f22d9096b6ad9a5a36d95253c5280b0becd08d0fb0733e0041941ac02a8d6ca75276944db9736b0e567a80b711bfd4ec72df13ddc2dfe3083388fa6fe0beb4afda8c20595339ea21891097d4889776f3b9539c0634b7644085cd7a7121def119b5aea72b86b89b32cc5ff6cbf8811869132dbe568506f8e8334a163ac5f29b061d4625e0194f8dd0bde09b5f34f044c2a5bf3a68ecfdda791f74c82863d10f8dc8208f0eba5ba19cf1b241b900ddfb2bc6fd0564585fa6495aceb14c8dcfaf142492588a1947ce13bc9f042deb596bc566a31e2cf3e21ac54a30ec374e7f90e8865c0ef273aa88660fa118e90d14767e4478263b1127fb1c8c95c70757f58972f36a398bb0bb965d98677a415b5e7907ef6b58f0463da62139762203107c33bd7cb5bffb93f2f2f59483a6e047da17bc9161a963fad55df282ee4130a27b6eb283dab87da3c93b04beb6f60be5499da27fecfd982cb4024f0418a3f501cd6e4fb81728289d102c247d0b87c754a2f0bf5ff5520b85caa3629efa029c779d36bd9ff8b0bd4c1431676c99e598f4ddd0d70ef98862104c24d7f49ff3db341c41996393791d303530b47bfa91ff7d5a9f3abf44563f51074383d6458a0bb373be00399d9d219a6a102a26a1ec9857ac66018ea261cda39ad0b2873ff8395d08867ad5d7bd63f27b4effcc680e9a138e8a97061a8ce88f19ec279c6fa46df1302c90610d1f6ace33a6f323d784fa8e66355e11ebe9997eefa5f7525e21665d94122955afd595fd770c5038ff8d30e3396cca9c0c8004571fffbbfa7b9056a3cce2055c65910e20d65ec51d461023da1711e791c630db1719d7baa001f1ddfdd5d65eeb630140b0a81202b4cb6eee484b251d5fd49a6874606fc556563882964ef35d482197c5b1b7a6466d7cf241443fbf0d2ca772e15c5b6dea936e880046db6a7eb1e2d312cafb8637eff2a829c542d9883e5922710be51e7ee9a26a7c962c889ae8cb67fe35380cdb536682385ddea84fdcc58c70277cf5cce4e9ede7969546529b2f19982938e03e0e450320671f17dbb84ef5d1de9452215f801fe53c7d25cb0a7ceaf04dcbad9cd3234bbb7febffa8c6afcb88f08efcfecda4203816a3f8da2d5f18bedbcfd838bfec2500e686b0cf418c800bf5f90a37fc4a545dd8020ac274694a8d2d932297f01ad5aa15459ea62a2e97b94b1f3522c20b74723839e310be8e72b5bc695e544f9889c5296aae7911b9b085d19bcbb2d1a0d4774a74630f1d555ebf8792259a6602d56a794be561d78a674882e42fef8855cb073c2ed3f3dc5ce7e458fc9f93a521b1080789188453236b56d94534e7075221ed0eee2856c9ab3696c742fb39cc8d6789e2e0121f5029a9e33392f9a5a12468d690d96b6d955c6160c0f07e87a862dff986375fa6ad34e0b43d834d4d83d940bbd9422fa1e2fcba1a36b7d8e5a5b56c997a2b4d70184f9eac2c48b72e0dbb7c956aaac30bd3af33f2c48e45287c70a8e128442f3644bfd74ea2750d252c4629060d03a64ee6d876c3b550cee9c74465efd6e3d4c765f9a944d755a583b1e36ad148abfde68895d7acbce02c270779ca5e88e43b434c960d53f5ca8590e4aa5207c753ade6fc4de62fc4a3eb4a22819ca710872d05a4c2c3ad8b89b5202e470a412ba249d2efe2dd20fc7a1c3b97c354b601b3bff2cefb0ad66c3e022aa94f466e934ca60f7d798082729f2510de8c20aefb29085ff8366b5c42c5f2231019d67acdefea5827ec1d3b9145f1af7082ba6394b088c48355c2c3c08ef4126a5905a26ac6ae98243c4a2ae265f65d8e8a601364d510d866825477012de08aec628d7670076caab3638627afdc7a92e9ab571e297fd2b3e1cf3554256b3dccc4bd6cbe000fe3e549b4cf6155fa49637ddae6328dd5298ebf140c80f6461a697ef6f644962c0737565642d96464a2970d9aada455c29e188083786af3790ad821e2c42d69ff60146dd63d0606b117b844d5453ece6b0f7b321fcc81c362e3425075805da711d694dfdeb4f72b3c2d37dafcb1e1eb9a7e6d199a9effb2008dbc81cf5df21fc56575a875d7fe669a9fec753086ceb2687a652dac69ead74e38bd4edb49cbc015e60dde69c60bd96a5900e46e8da03ef960e23f18e28fe1b2a278a6c4f904d77d47a2212772fa719a7ea73a5385a132d74ed3c5f6e7dbe60c6cca4a0385ce22bd54e86f1b07ca40db0112a9daff6c9de039ca9dafec1208e8101393e69ce2fd812955481025ddf0aa8548ba769775ed933726ac845a07b25848695ed4c5eddc07518b47c5e0ca0ca1a99d0d3a9caedde0cdda2e4ba5bd000dfc9dec78659950caeafb73a127b085767168d153261b6a08d81f9cd795339b25b7c0fb864776a80b3f36f42f6d5c93cf2b5d5c565e68a94d40c515883fbded8f60c962892c9c6ff741cb249406eee11e93c4de4546ecb28be965ae9abc391648a92d245051f9fd7cffe97c53da3c3a6abcfcb6e227f25259bc78170d3e0fc85d57d6804ddcb482a06a520b2b60bed9d81a536e0217f17c65db28b6981525a97c4e31ceec5b7e31f132cf631e69129810b9c45d647f8204d18f4a454f53a6ad27379ac96c5768e61fd1081e3ef95b6304761719a9d2c15020b3b7c8338df696249637730aafb3b6a0cf47e501b7cade16a036f38e48b5f0341b0f78e88fd132dba3873f848d3b43c55620abedca194b2216525de28e601be15081471b5116cca52bb5dca48dae022758099c691c1edf1685d9126680864466d7c26bc6681e06597917fcf3c34d85bbf8d768befc6a14b53d6f44a7d29dccd50b0db7fbe9a47ee6dc4937c3bca3f3762f213894faa1fde754cc56c1392b6c6b8f248ed6d83b356ba33b89cc6b5c7c555bb693b9e7a7cb0c27ddfd199397c754fd366e865736b460569dd3c6bc84ce6a0428f1d691f178af79ab7a55c21173ee4d4cad3d7f43caa3e6146f8be9c33ddf107e81650a4c3f661747ba85d19e0a4810076cde53d8ba9522c93717f9cf9b52954820aa14074058ec530dafebd761cb87f679ed52295a08258f2f8772310003f341dd8e9ed8f4c89b256c9a243323b2d5d10e5b4b0977adfbf6a91539a94037d04fe88e9320de983931723dfc46272921281e401c9d11ed5441fc8dab5cc58e203c1f68e0be5763e744c91d2e97b0b79399f20702cc778bfdaec9ebdc395d9a26703f4841b6d4c0c7ca3e0ecd4f6b462380412d0c37224cb18158f306209438e27d5c119d4b4367206fb8768d0432caeb2f28db61e3a9f15cf064ad0cf2d39060ab188f758dfebc59acdc078c75f3ce5fe2969a55fccbb79ec2cfcf933ad42db8dcf19d01fad8b512fdbd62342e4ce9090fb9dcbe6d44a97ab84cdc6a37a46b4813eecc3e03b9969910a39e0b4d482b606cbfaabbcd6d9bedbc982288e029e4f26c984011ded8ed8acfd928a279f440a9d55ddafcec97e6dbbe6d7958fb801445055e6e215f0bba4a64b8aad6fe2aa8da3b5191b11fa9573f43af2de6511705d9922598f39beff01856d0767f5e59f998fdf1910b89cac19e6978c4618d20a114319a528ebc86a745a0e84f92ec37e03e79784929798587fce2269fbe7d502703a17ef06dc5c220c3ad47498c90a9a1745af86c61e81fd361a3140deb552ae44036ac1019e8f651bf20c7b2c2c8011f66faf6a0b2eda070d61a6fff073bed44fac88f0f01fd3ff08bc68350dd9b111dd0114e8814a4021ccd6dbee3b62fb7d8f3827529445f357adab83a2bec2e6bf88d9abd9af42812fe1d48a0f548b39e9559a6119df6496e4aa65c176c599d2144a0d0725b1cae2ba2f1fc57d2d0ef1a05d4e16481bb77ccd15ad3224dd2c7bd03e987dddf15ebcbf291553e739dbb4d0644792ecd4232ec625db5b6deefde8485877112b5b7abf87e390d87eb4efd0481d8e71850f2d6b5fbe661ff38d1e936fa0660927214c0dbf0f556fc9a90a0255d1ea35a51c0417fd8af6f26a6d6293aff9a8ce710159ddab079761f1e8bc9736e487bbfbffb91abc034a6c9ffe06379d125eb13abb70416dab8af8e8d4818b21cab881ffb00803228d31be83dc1763c110e84efd6544b51224828ba7c93449d8f58eb7a36b28b121a687e2f7bbc05e4ca01e513cd6930f6e013d5e7374d4b9b248f9899a98fa960d05b1a9352a726d6d6a0712678a04a16da5e5db37da7fdbac2ae301fc118b0958151d5b314b45a8dbdc3793717816b0e72a5ef3261c89652c20ca0a73a0cc2c9fd5dcfcb1e87eab7d82593db11a589867b98c831a00f2bdf37db4aa19ada0db9b7fc83548348da26d79d5fed7bc9e32320ee786fecc27d4a8eca2a3983115a2564374a6501ac5087e422fefaf304ea9fc069642dc30423809148070ececcc5ab9a4a36c31a153d5df5eefb225f5d8e72d5715444c86654c67ce9a110d9009582ac964504d6c8da91fc318aa2a9f636155a11c4b83ea8c35d08da38e1a30a1fdc7c2e6341c938cd6ec8ad26007dd66fdbed0c8a0586ebe28aeb1e372f9d0659fe02f7773d045094329153ebc89fc61c7d08d4b5b499636b72b27e83481a538258f7d9909fe08b0b9e1bec9d8ccc1f54a840833892e1fed70de7401d2580cf73d1eb48de200c41cf3ae692251b9eff19a714ee325ce4af1b8841bb5c287d5403872822d9f476d9c7c407ae820d5d586e78185f9b185d7c0ed54176a9cfd0db55703dc796c6f6152b06e44dfab76f29c638840e0841413de259353cf511e76cd26a5402c6edbb883e167fdfe8d1e928d3127a9c0049904e3806d17da3a15894bd2a94e9ddb39ab31125029c552d28388646b6c9bcc7d810dd06589513d281b0fa6d0ed9a42f6327e97080b303889abf37e000a8c31249c21ffc1524c0ab79248306e844831eab33a5815615f8b8001c0df842d8f645ee40774fca2fff5f5b6b88357561f45c73acb804f86d7515ad7e686f7b506957ba10e44cb11c7703e7cef8bf8f96c5b8d7f006180ee464735a131ac2fa796bd96d8440683df81c730533a063fba277ab1fae8d97e2c2a42abd2a1f62f8678d1f651927ac8a1ce0e604e485e75fce69a94670ef7bc6bb6cffee1c8eaa83d3ed9110a9febce44f680b0b2107700e8270f1eaab6bdacdf951ce7755536008aef21b3356de6186fba02febdd4072bfbbc2e0ea5c34bb163444cee983e6c8da17db08804eee7ea419b19a99639e6c83c9fd66cfb8906e8e6453cbf403278f8040b4cef7390b941818eeaa9e0414afab766341f3ffdbf441523a7e77e082ff2833620ac9876577ddfc2058a8f5b7981be52c6a6fc0e4163a9077dc62f376f4776b63e6d0c0134fad1870f5d61e91ff837e10231e0122b0a930d9ce608d974ebae93687c6559728163e547c30d267ff347248b14ade893294ffd9faf898c9481b25f3a2ae666075eec70b1dd576657855ad13ad8eabc2d748ef53781d15492e7da1ffa29b8d8bc96945143866ff8b308b5ab6fad756ce421c96a540bbd9bac4bb7bf8fd6cda47ae566bb7f57b34e77255c0b75cd018c8a052aead3a0ff5b99d3599412edddcde7f7a3b2a4c4aab2df074b95b7cf21049ec219b8246d4d92587835272beee208f4c98b0bf314ae4d97a99e2be30bfa02f6c6d6759d07f3f36880d58f19db70c654e1bf67ceeefc260a1eb5b190553e175317fdbaaa2700b7e816e654665863a4cdb9d58304c7fa95ae39219f9c37306caf183ad2df62d977a7d09693a2a4c936ba8d81fb00a633720a4224057b2524fe572861b28ae74f058ad2d27a58f0c1b08d4ab9d156bc0c7afdc959ef591f83e60b500f922ea69520a7ca15f760c168325e6bfed55cd82e5b34b420c4935dce27548757dadce4f038bd7f28196f7d1b66b29783e702673dcec9f3aa69c4460f7bcd552f42c4c02e3b53e8354dd2b3aba999310ce82b09acb23d37c786957575650250a690f5a51a7a2264e991629182b441a8dcbb475d71a877728d21ec59363bdbdb9d13a11595ef38215b983ddb2dc407ae0ef483fbd3441cd2ac9c4807e9ac88690c1c19841b843b5820ab59bf6ec529cea84f223de21de4c9c8cf08427d1b5a3d0252c6f9280cacfae3f21ecc056b2b81093f794d34b10342074824999f9410cb3c13bbc0eb905e23ef6459fa832d8c11235cd0ee17646cd813879f893f680836bc75d0e25c1ba414c4a598d77d47907ed94d2fafb14b3183cf0e4ccb8db5244232019f7cc275bf4ef167ea9d86addb547d948cebdd250f77347967ea7ebf7028b2a4020e7e6f79ab133e3419c8496fac0e64ddd0b4213eb76cbd3add0cd10652e156f2b094e2735c56e25c66ae17c682439740e9f57fad89201880d7adcbb8d70af75739b63e28dfd6095e516822b89b3b700b8b1183f26c44be3dbd129cf292c56969f681b623ebb303d6a9aa933ec8bc28e156e20bc55bf89ca5bb4620f3daf047d2202537cc019123dc02eaa49e3bfc5e3dea03ad576fd6107a86a2d2064f56d3b63cef6c6c658c6075c72fa52f8308d90c4b4becf257877de3dd2d5a33caa6a887fe836e378f21247197f8ee9f74a4121cb57a5d1cc70d54c2b75d1c5623bcae552ceea0bc489d7a3f12827d3ecf9e8400234c0c1bb58db772d74934bf46ca308095d741c43bc5cb1a27f749f70e875b94b8dfc41f257d73c92c011b0212a64b0c3b63db6c473ce67479826d18c2f515e13442c6de5447cf0b7c236ae199ea11097004f771324f85bd680e1d4ab603bfb1f4a1d867167f8c8fd970958b92ff30999546804d46e17444f1edfd3e97b5381f958e5f65656fb165798f5f1fa181c3dced05bdcbd3ef83e7220bbc130477622e97302add1538a40eff381a766751d2f8fe26605f526bc3fc02a736f019373d30661e1353b5ac1e354d9780d107cbc2f08b13bfd19f8b92cfa34da54d97b2271e07b577fb14ea1f4762cb06c6ef026533eb1623032adfdaa3587ec7e8a735a9f288b5a7933d2cb88e43c85ac591f001c1aec4f80611dfdae9852f93e74afc3042541baa7f190bfd26be5a67b129ee0238e7aa37f078c6550d652c1eecd75cbfa6860af1b3f663e35f99d90c1fde6254f61613456c9dc7ffd30eceb65b9d648b35c6701c32ccb4df3e9e0d16b9a14176c605cd3b46c4da7bc1fd82911403d96a71f2288f3fc3816b303312f0fa003fe8fbfd8f3b27f73ad06dc228e8f7736f43b10f23be4dfe245dc8e45dcc153010ce772f52c09214052de4b54c4b76c0ce4b74d2284b3a822b01fd9b82547c35492e70958b981fa9cada38fbad74ab84beb683f14ef7b880692a0ed7c3afbf588ccdc26edebb3f5d239ac838fac236919c5cab8a835400ca809f33250632db9b2ea1bd3df06d5b7c6cbdd3dcf5806c6ef3d42a8b87cab2ed7213eda144f2299f50164a5e3eb9918a1e9b97257f0cef94cc33a248f6982da9c167fd2372cd72515a104e5937e9424d600d847c1476fadbb3d983cf10a2cec41c8ec4ac3be598cfa6c60efc6fa66a7e9705dc5d87cabcd088ad4870e6b1387ac31f98c3e2f32f46e9d86b28325bd4836d0243a58f71a46fee49415b4556d0968fa87225b88f0430d58189f1a143120832c10139de6b79e7ab5935ee569256c35e88b67c4342fd92d5a55df2cd4937195e4a307c08f33130ab0f585b8ec076797baecb2545af8fc037ab233eacdbc8184a8f2ba529a5b8bf41931fd0a04071dfa3da14dac9ce03881b2c0814e98a2ec349a14640a7d41f60f20c804762ea17d66b42513c6b3228741bbcafa0dac27b87b55c9b5ea868777e4df368635e8c80f3593a7371d8b425b1e420818484961c6e20ffcf9be1121a06cb97344c6ed7c85354c38018dd53e66e24c83501cd57f1b416496bc17a1482ee8aa3ec9cf2bcff427094229835c09606afc8a7efa171b5480489bb2850873959fb2712e27b78e0bf90c0bbb564c76efdf82107e17a0131d1975c014733e9e1c1f5b38a86dffd4a4eac269ba8c08e654062f3ab55e6eaf4728bad5bad042962bd08d3ebccd7e9630249dbe48c7ff02b627b4560c38420d37c2c591cb42be6d6efb7926bd7179a30b7321e14435f06cc2140635a9abc0144a5569f34b6362ee27e84c7f74997332ce91cd636e3a24e50af2203222aac6af523f27172c62e183cdad39224de99c401e26f28bf66867f3e6cc9739cdc315612b26d03ac2f2fefb6dd44361c6b52346982557ee421aefadc8782ebd801847d1048ccac55c226b1ad95774d06b6355b4b078e598a75fc96cf8510e937bb9edc023e87a81f851486c983aad4cec63d58892de056c12cedf58f515301ae9d67596a9a7f8138226f5ed37705c4dde6a3cd86779e2d0a0dd3aa8dcac8d04cb63f373aee417088e49abfa6ca668c3b0a377fb94f30971dafd340516b0d4a69e46921133173a4c47512acd19d1bad397cf870285c6447d7b307e9000f4422ee38f577aea6d167fafbc4adaa0770aec95b039d3901cecdf1fa8b03081092eb0f9a1a8c42b2e58467e0c1ccf113f3035dcd317e04e56917b31675457d0e35d47a6bd099efe975e81c7abfd5e8c6ed3bff1ddee1227f0f08b9f171c6cd04dd4d40267ad3e81f609a95577b4ec0e90f426ce1b4ff44eb46f48aef03b6a1673b14a75ee87de0f460e92e73fbb0393737bca813d79258249da58e0737b0acae6fdbe974f5c890be6704e9b964afbe6c5c3fc597c1fb43fc90e1a26b5cf1c708893280534680d201c37a288b14f0b66332a0be148ccbab0da91cb89add9130aa8c52d823ce4b4e7de49ee45ed3b14b75454600bc36e7c82fd57fa2608b0f886df207417667a05c9e4e34693b2d1bce950335e38655f719310cb5a109001bc7a966e6b6ab114f716cd090be90c737d2643162cbbc6ee35c13522f55cac99349b245b0f4de7911cd9744eeb280c09f728ec1b780776ce223ac3648dc0108472bf65e1b191d2a408b8e2cfce4837853fbd5d47c4193184989976bad274b82c323f57d6f25a21feccf8d9d55fb6881c4c4e802e7a0061db804bcbd8cb88536cca7978e9917817d5fbfffffcf8719047d6611054eb4705d16257631a3e02d6ecdfaf2d000fff08204bfdb3114311039d13b3ed543383eaad734762244c4376fd823f4d65e57ab20d3f122a6362ca5e4a9bb60b42eb7cd20bcd0c92ac8323c5f8900af33522c34979b14b8f3f28b6d45499107068f21bace1f184b76bbc578733917a4d16fb4da553df9769e387ecac1862f1f9aa49df59001cc23f3880a31f81c86f300672119f8a89b50fc3c0d735f11d5553ae4e2d19476c1d70d31ef256fc3b16fcfe019c07346057d93cd42784b8c1244ad931690325a0e29f17b61712518f10a201024a6f734bbf7a5dae3cc3fbb889954ac8c6f945a6740805c1204e09cd0418ee1134f02034e6495b35351ffa95d9693469d305f506ebbc4e450d07b5f313dd19027b60a1e4d7dc5e909db9a61be853a9d786cf72b8b142a87d13508b6e7f013863a94b4b71c162ce9c00123834d6fefac1a7993b55baf3fbebaff9db9af40269a816cdd37939b2aaa001b8596c1ef99ccf13bd6ab04b4050f3358b2c3d4f1d75f5ac7e362a44857add5195c408d29f604bb0f2356adf7025d6300e65e9c1e0018c393f2779cc2757b26c9ffd111011afd8a68a56a3523daf8ad7b74155f5963b5a3509e4bab8103635a0007ac7e38108faf34fe36fc1a8e559cb2e491ed7f4304bf2dd313da3c3dea1812535004dd2ef6ef7b990ec852bbb21cdb7feacbf945d3bee8477942993c9e1ef571294597459fb5c85bb91402f02d8eebc277bbc4537889724db298c5e8249c9526a1191e7e48b15914a62b6a8f8d7e479aea8240ab7922678d0baba5eaa7aec2bc00ee227f1259b89c94b3f1ed56da09f604b9d95498a7a756c583dfdff0381458a4ac2a6b8ce50f91245419cc465d44148eac9db4b5d7cd5c32ee923f62b15aa41caafa12766a1f8bb8cc1b0a8a75686493b9488525a9bdc2e380169fd1a25955818ccad205a57a0703a5c830c7b8867d323cefe2d0bed7d6442f8d6e25977c355607153b707bd153fc2f2edb976eeb34c80b2f01b1738188d76170181f2c07566ac48d30ef082bcb1e0caca09c9efc9863c371e8d22aa3ef5feebc82334d156a8ec16d8fd22e6b1f7bc97f900bf5c0a8a58028925560b39bea45a0696aecaba432522f1d0cae4cae446f28ba61df125b7ac2c687ace2fbbc13a9df65d459297a458d4a26bbabbf64b6714935c204794a12f6787447611c8ecccc29aa5c4092c3565e3c2a76e1fc325ff8e2c626538608044ed72c692651803be83248c81e74877442ed00a926e3891b8ffd8c3f5f6c53b6361e50a6556681c12692983c6b5e8eea14195bb9895ec3ef75160a1045921133294a672d809ceab4b8ed85605d9935b89326c069d7437a607c2fbc0ca2c5a65b624e7f27dd2f825972ad73335e50ef1a6f2c47a2dc2b41f2aa8681370b5d4ce23000a7e77e62e448c5a3ebfde3c73c2e47fb40e9bf4df2c739f53df418b8a19cee146869317ec2dbd40952e1e6a426aaf44a9b9a464ff5d07da590633f9a509485dc2cc0b3a1e3a632dad833893c82af801b26b9ab8ff74d92f968515992a9f415b078cf1817fafec0f230e54d2f21e9e92bed977e988a75e2dc379002d94711c407486fa7dd38353749753b0e813e0493de03163b3951a6cb3b073a0c5e35fafac3439b3dc04c19c0bad8939ad7229a13d494cceefed7440378c5a6cf095aed6c0522a87064a7191217b3689209c14e0992747f332f8f1af688113221c5356262adf13b586108da0cce49a9a3940a4432453c2350bff797f4cb211b67a59c230131d4d3c3cc1e378081a8610075b2ee2ab0dea627451ea588beeacccfe4a0a7dab5c5537e39acb36e72a1cc0d8601ed33c0079062f8d6f03e3be6bfebcbf01cf9e222f19fdbcbb2dc0d7994f54eb779b486aa5597b28735279dea8b720cc8f884b4375268bf57ba96595dc15938bae556a2d2ac2b9833ae3951706093e00ba56a08f06d729275452f6f42939ff693444b2b1a2a8a143defb4bfbe3c1e293c4a34f4d2098f50de842640bbe9e080fa790702898e038a0a08805ef9bfed4b59e1e942eae0a06ce47177168dc67fe0a9c41cec18ea0046aa413f28b74e9ea91af625959fdd7041a971f389b150c98d88bea15333cb89471ba25d0940d13676c31e9ffb83d3772e60a3239a422d0bbb1f589b32ea7b76b820478509aa148059bc48a705c1b2eaec053c5954b7fd0ed078ad6c8da60476b3eded4481ccf5ea66c06a86ac9dc37b95cce2de827a408fcf9ba030b33196446396f406b11a5a4dbf648600c67b1f46b0186bc8e383e1f8d576d853f5c8855484f65dec8b5d1b21ee24e4c71076dcdb3a45d27f5815f1d304e90d34250723dd523affef7e8e67ee261225b3e03c55e3fbcf489abcfac256bdaedc1b3a23bb6f0b2f09f3b10b519d19edb24c57090b7411fdd2077f625bd703e3a594f5ae4797ac3b11dd12766bdfdd0c1fcaaaf3f6426c86a414cf322401d4e97fc40e162f0d2f671ea663a921451342e31aa7a83f26404f61fdd73e4f7b0139c56998563bf8794b4ec483826450afb8ce382618fce9d7b63d950b7f9672cf4c9cd1e643cd5cffcda48f2d612a1f7ce324bf9e1130ca781b211ac2a1039db9011d7432fe1d9b4fc0d1856e0a1dbac63f2042f25f17e063867fa7f89e9ba8f98fd986cbd65e82c800f156b15aec44fd509b388858bda0eee5831f1de5a3919fba15e3c4eaf63f57be79f858c15c145665a5046842bb93fef4dd8501f65ff3c4ec36518cff4875706d4521fe156cbd54534fcb725f9b774de3787aa3aece9dbdd886049c1eea91b2cff55c6bbc2e886ff9373bbf2c17f8d36d1cf6ea10e8f8db7e939207dafc2ec98ced2754b31ba7a0f2e8b77f08fb37d03f87a1e1d10fbeb7145ba2ad3d67684d4e2e9f459930fa0d86d402f6e60e29761df78aa5f589f67bbc0b2fe0e7e73fc9b8fdfb038ace1a96daa6ba9377f3a6aecee34a868007f31bafb0464bf95094059752abe61493d42e7cdeb807d5aed2c3ab054fd0e61fa29ba28a18030b268083a19426f1c3176939d63ddd9dbecae2cd0bf555ea3b4c33e87eb187318c60a0ca5b8c0fca659ddf90f73e5d6ae7f5831408265cbd9abacd9ab032d460ac4b612cb580834ad0b7c405e8d396c550501e8946a81efe0e449bda200f5c7e1a3fa7429f893bfbcce13eef997e1ed3ed76958262b61b35b81df6cd611a86a8246b911fbc9bfc66120043d7faa7bb220059c822c5d0ab4386af01f1e98e0d0355c24ac3434ffcb0ccce77b4248ab3a1c9fbf662bcc190d81c678716f57d0289972580b900155ef2b1222f7347f149a984cde367022d6727d27d8ad312963b763ef59318efc1b2af99825263aa1cba10d88ce35a4334cad15dfcea0b8b5dd42413d2cb75917c29be16f4e5bdb0279a42210ab0c6a3b4a0b2defdb46309f7bd9b0b21e5f2341bae447c980d4e7402b0051f803a2fa9abadb242dc6c1a5963787cfe1f788e0bc5faaf26db43e984320985f9e03df6f0c23c896f455a754bea44a0cfdb744377d8a299da6dd0677a38cfbc06b69a1b0bec1ecb71b54de9bbe83d3e53df25249bdf2386f3360c727cd1249a072806220bfe4b9f21cd60de6e10a8aa6c0fa136b72c99abf379f1223b01c7181a0e2d9e5f60bb8d19b393f5872fae9ae2cbf686291f36823dfd1cbb2fc5f33f09d3d4fd9cd8bb22ecf1c2de1089c3ace6c8f7455c4d2c620d021b443107d705cf98ce677eb2c9c9847c04f0183c5f5eb7d8aaf556b2448e175d557e10b7b0528510ce8ad0c3005b194e42bd83825c48ee175b07ab827d1b92f1da4d81c64aade6e0e4c3020b789eedbfc3c5c905c649dbe45dbf61e65a26fed588fa42c36633b4558edecb14a157eead8bc8f40e4da25e1e4b31aa4ee41d67ceea69915dda2aa3dea73e3e866d40b842c3e391dfcc937482721b03956326392dee7b4885bb371c8e4a255c4f69a20283ab2fcc331a4670358705248204e8a17e2073cc4ce5f8a5c391c44412740f250a35f2f82a976f9b2f79f99ec763b41757eccfa67f2a0a8b5113b9390f8dd0c1fcc12e45cbc63d97c8a81e459c808efb966a13e9c011dfa3b8ae752887a0e27bec5d9d1188b8e8bb48e6253b42c717eaec3bda8b1687dea719aaa54aec501b81df19e1a5c11b112da047951c43b1bf9e676998e661ec6a26995ea4fc6f0d2f19de8c4c501b1250aa4ed49883e5d0e6c8c8c06a561afcd01c8063149dc08525af5062bdc5bc4dc3f15493426eebf1a08d684904463ff87aa76fde13e362b209f7c6d712136f03fdc9fa6dc5d4feba21ca70c6c90f9d6f4d405335e8deda3989e9ad412b53bc0ba79221148a7baa84ef9d8a370c91746d4c88737df3c1fb7c31b8d35d08ce4dbaf9700bdfdb41a35662254856b4f0abeda06f6902640e1fc11d66f8771cf5b3c2aa00682fbac35255a89cb6dd24c552bf25b281a326bb07cd5a7bdccc0d0e4b4975473252994276b6bb50ccc464151fce4da72ca8dff0a4e2945ccc1d10cafa78b061b5f2e8c956c740ffb2ac80ec3960515fbb900d856af0317664da689446fa5f24061a4e73c67e4b8f6e958e38dbe343bb7b3273634142a649cee66099ba1a3d4371f98ed1858973c27d6f527cf95084249ecd6db48e42cd7e7ec190ecd009e092dcbd75b7dd9da238312438b762a1e7a86b8144965bdf6a274c693696547b5dd46cc4e8ac09f39666fdafc2810c9c4508cc8835bc9e43507987af990354720baa469d4cb9847a1aaf083bfd9c4ff27932c49670073fc0f124bb2d9d6a06d0c5fcc488a64cf71a306d7c78eeadd718fd21bcd6782c35b607a77f55ba316afae35f92f18fe53c8ed3ef61cd4e29ecea42fdb261eeea7069132ff8662b68e2642ba0162bc621036247fc92ed759ef4f34537eb4252d7abf4fef6b64a484c9da5e0c27768c5765b15ab88f90fe21d63b545c64938325319c2e7f9feee19df3609913aef7c6b4d7e004119de5f2ae773fdca404e402d933300246e7b006232380caad3d3403645a83871d6debc06edc6cdbf8dbf5446b10b887d09213cfa6968e96419282afad4257e2c6a86e55fd5194945b3f6f45532f6f51e2ed731e5844b98a57d9b0196de9edd1e9b7405123a40c58d52cdf4ba3429b2e7beae69de6ef67ca1ea9e6a9a91b924e4f8bc06bd9aeb2f98e35ce85eac1651856501feb1f61a31f4f68e6e164301c6fa1eadcfb16fe29b671fdfe38ebd3a53eb5f469f4c62da06b53d32d8da76780b23a68209fd4c2e629cd480e47790c3d2b81f77dda4384a7d474c116df24d19447e8385f12c329ae356b256edaadc77ec37fe90a190f4ba27bf294804f4596c150a20d3be9c9b0d24804f3438ad4677cc2e1fbbf9c83613889234d8ac8abc22fe62b2aed8d75af4e9073bd0ea941e174922555c5a1a558dd6955d0577c9cd5ec0e7f5ff73b109cd845aeed047231e33cc5b776508d091f9b4e692bcaf00faf6baee1c7709efff084b08a7d4702e5a848cbe3702281b9dde59336325b510f979b47e2370290215bd05610e61be97aaf4699dba2b2e98d2fd97f58735b87b077043a2ad04c6dec6a81ee01bc7b42155eceaf5924c18cd01651e15d2c62019446289ec4e8e1464d264d5daeace91e5812ac3b1c4f905b2ec361baada90fed25bc43cad040ffc4a2194c289926f1718d99a13b9056eb53a34124e01eca97ecf92dfb191aa5deb6c89c612503898c8bd503a85333a0d355978ad7ae5c2a27293b0fe8f8e22ded461e20d14fcd07baf1992d867b4dc2785a91bb71713e42f5c2f94e1e8ed13ce52794e2d985811300696aa74c8a41c6d7bd152c36a1cba4f073e1a2d55b2608fd0c7738b5e639438c0058e1b2f416f3c6961dde69415603dd5cc7510a6d0f987ff8d4c51b44a57529bc372f90fdca4409548ebb24eb1070031b3f6b1306e0f8ce048b2ca0974218f1fa7a62fdaacddec06449862eb21a0fd4fec2803dbb40f9a807ebf77e4cea4091fd4465e68eae2942812876c49f2684846ac21f8ab178fb42501b20b24ec0ffee9eb1fe4ec89e9a19eb39937fc185748e1d07474c116be2bf6525409d484a3c97523709bef21777bcf6b0f789b15bb17f7c41eb1ec777dcf378e3985359630b3151ac906a12018723c32e4a8f46c02a057a3df949b30ec8e628bab4f9211b3c43c0ef86aecb87218cf803640bb8184415cd1cf137f19dff5ef81d2863422d7e425689e4bbd18f672e5eaa703c8b895becac5a24fd7c47abe8eb8a778e231ef7b521dd71ae7a5f01d9913a628fe1700ab569dd7be7085aa5d1fdc2b9023a1b64a3ff297af7c0cddf97b212eb6c9d927788ed7fd0ba5db837563a7b953e27c9a82b272f0186b36aa4bf0fdda4a42a9e1e75352f256422bb2e5dd76a2e84a16e385e8b6ce017bdd40ba12c750ba1e06224ce921d0725d9e519262d5456cdbe93d885d08950376e7a6237e9cf4cb2eaf62da44ad0aa2604be1e36db23bc99c0d7a97a8656d93d455433f34843ad0b2843e7f045ddaf761b89364bdcc4e104ed7c3db95c981188dd0f026b5065e572a523efabfd03c50deff54e67b18ab7366b6020d1f9d89cc13989934a9111a2b40f7672bf2fd5d1e89683653463b9f09523664a0db9b362082b6f7d8985673a6b4494b7b5090720df7f907ccff11fd1b09a1d1a82c0a9c3e109e440fb14960434db245a02bd9de7cb192cd8941180275f7769276eece7662d3762abe191cc4ac6527d22d7c7fa7548f19442c6a0dc3a8b61c9d420cbd3964a8381c370f09d9526187b44697825f5217003c3a066ce8b7f2376c269f83fda5bf0fa90aa0f5f1bbd70be02b1c3c9f909756c00d39a33d6d6751cfc72f4984d7ccdbdf92024ba8b5877b4eaed8867edf94cc8885afa9111cf93a8cb37bb993d7a5ed3200a0b2c0d83e89d63b7e9023b2dd84138fe76a54be948ce28d84831866dbfaa1b640f521d4c1b11dca3f077d488418927cc82770d037323da4adc85a33002ae9df0a201f7b0e1fda3582f6c822ce4cc6b0318cfe1b28580076dd203b6a5864836f8ebd76f904a2ac37e35d85a30240f6986c206d6f21955b8346c5791e9600f4595f8aab67e54cbbaf44e929efe539ea928134312f57aec8da81f42b56676635702bc1ef7e9b9e13f2a997d5ce5ee7373666866386435d9f3e2fd59558a9243c9005e86de5afab833ab66c6c2f9cff1576b2a704a894488758d0a784e4683185767c77b9c1087bd59b3593cdbeb4ea2ec258a48b1c69380ac9a35b334015776f864dd1cf4bbbf98fde5507c0467f61275f675a91ac0082fe168fc0940118490313cadb9a4104d6efa02cf3eabe08746038bfb60df4260914decc85a31513373ac772c68d18c2af586590f8b095cfe837f518c69a214c9e5c96fa0593b5c3b1e9dfffd00ce30fe537408e9ac940a1bc0029271573bb753b91cce7a4a16fb2973ff3fd86ca8763fd80f4a1c82b61706bcecc97d75f609812a76c7a7c707ed216e93045575cdaf2895f9fac4dbf9354800af79fa30c459cac2317061f429243b74e92d8f37837e0be426a5a9aca1cd2bc6fda1f292c2b396a413c8e9f066c26bbb4c613536e2c027fa3b2d8be4c809f73c848a8c58b1767761668caa0065941806ca5da2cea219315395b145b2a31a89d224f1df909ea2dc586b74bb4e05c5698bfb6ab003d6d15e6d4044b7f1ae388ea4538f9e12947dbefac9f49bf1e8321fd355a7652b6aafca17036b3e592cf8aa36da2e24e9532676a49126105cf11151de465f1f00f2314215e84a9aa5f3f06a27aaeb00d753f062c9350089920cd70e9c1026c39c8108c7cd48d036ada8e44b4671be51a43f4b38e346806983c8cea7f54d75ea5b145990a4c30de15f4aa40d3b06f278f4b166e2985af96c8bc324704624aaf535699689b564de1e8c4da052f6afce6730a6a956498e6fdc20682d6b698bd409f61769632f127879acb5d49cd0263a8fa21adf7b77625174763c09735d99cf6a0febd9d1f134d287ffbdb1d9e3c0505a669bc6f17afe29c9ef99491dd3a48108230a6a2faef68839154f468f3519eebef1fcb00ba5be5b2087a170f652bdb51a4814b71d38ce7bc84852e33b0b718bf6fecdef44238ae89c706943ded60317f60a94267e364c64d2f3b737ab711ecb0a9643600cbfed2690659de80a45f418965a2da4f02c94d363e15f31dcb0cd9531a41a05fd2f76905f99b5a6818103af0be705dade286e99adc8aa7d49d5bcfb4b77389fc3628ff5651e10d3e3864f5fe9199afd421fc3f54242bdbd7a6e2584010e0391815e6e5121c0d0429ed0f9e4b7e6c5c263275bb33835efbd895e62016422b5ca39f6ec6faee09921826ffa420d8dd57291e60dd61071d5a6b211165a9ea699e23f008fa89ea3572703b1b3485f486cf5ed64a8c0a429a1a0d3f6612cbd7f53f54cd5f886f273f82326f16c49c0b47807934ad42602d879716a6dfe17ddf2dcb117cacb22df5f9fe52565cb6b7ac2f81105714e3a1b262b04eb03dbfac89c13614c71e4ed057fcbd3c79eedc087dc0472537132601a26eab753a7df8591c610f7c65bd1136f1478c9041daa11f79d6775c807e9880c11979a468426dc86834af45b88b7e0a8ebfaace79e0ab506992615fb51cf3b7fa98b314b0a42cd5f9ad432b61579a9c48efe053c26c0eda58a0766cf3e73987c663f6702772392522c6aebe2e5642df25b2c6a1e3c80cb91cb1a6e0524c08633e106114a14399b0b7274280bb51dc8a091bd53c2e6bb434a06b9ede9af8b8b327463b7ded39bcc9db9a1405b4b884e9bae8b79831942c0734636edb8db62c10430a12cf11318e40206372553f91bb129d301a09dbd3f63272bddcbec86456ad5af8062ade764f2fa1b33d7e8bc61317815c1aa15730d565477449d42dbaa020f61a568b9bdf9b2a8b5ace124006a3244f2299b0bffab67cc4d22c4d9863fb407ac8761c8e9321c9b56d6aec4b9c685ce67e00ba31b681437445acc7596f1a754dc97b08a44282a4497f70c1370509a815ac5e8615395e83eb47ec19cd01839f4c0022f77fac502c15b040f6f3035ee9ad7cd3ab9aa1c797876c11316a0054fb4593bc751d0b6eeb1ad98694e7d77e2fadb47a19cad44ca57f454019835ca6a56333599b7a6888ebc29acebafded0033ea27cd99de956be9bb2df5ca68bb61898327309d21075396928e236c95d1bcd2ea3d7d81e5ef0cc55bb6635a1927f356db72f6cb0b2731aa654dc0c0afbacc093fac3cd0f69bea08f3ede5b9e240a7d4ff4984d16053075682235a6e02a1fee6bbe6830c548ca76dfc7cff4e67ea124f8535faa2120c7d8657e114571e2e2283417123ae91449e33cea7e2cdd308f4ed19617e713737bbdd91cd495c94019015a68a2e6631598f620748d2189326774585e93577a3510e06958e62904607e4af0b8db921cea18c4fdda7c73be844ae0aceff0e4c5a12989181d56e18c8322cb63091c5026e84d88f6648a3a36c14b9df4ce0ccc83430970b28e4b51217a7d81e14ea5cfb7a51c7caeb80b6e1bc0f76751038666197ba51b11174a57489e8601dddd841a73ef332533ff8dc65467fdb5c3a79162b503a73cd3dd4e659356e7bf7126662b1c1b5907c782761de72b67f82078015623c7125ce445fd3b513421fe34b986d40a3eba973d6ff64bc0d63bbebd811c578baf1cfa5d4715d54aee612e9d97404976bdd3304373958d20489a586adccde313d05bd00e21acab68664f668c80d8639eee8a8265e764c22e6f15eb5eacf12a552dbf275441bb26fd196254b279cf24e0dd5df520fea752b1157e9f5bfa8de0c77fb5d720454ea62a020980d57ca9dd578feda1c4b6f0c12c0e8351044d6a368c45b6a4088c656342425ecd0e9fb38cc7ce08227acf19cb49f6df559ade5d131ea733be4947863bdbb60e33b123f8228324fa287fcacd4741d250dbf38107e901dc9d3b581881f50c30c2d1e75e604b89611bfed59fb230a9150720047681c3832225029a6161b7429918334e1049ea8faa4db60b1162965a1133e821b10845087155e228b08b10fb2b187636d75767cea31106cf19e3513fcc7a76d21e63bcecfc22aacb183b4da6baa02b9882b22602dc82b11fb7478b3e11f387fbe6efb739a6a5c0f2eddd853a1036d3eb5d3b27d0e1684b9d685db8dcd38f59e5c1445ae5590a1be15efb732078aec64800d6ffa8826caff4667c6af3e071746a56a810ad17435fe411799c36b91731d3ec7c80c0724998394c3de8255fd0a6030bf3657759fc5c27805be26c527e0e06a18570b49cf719414ddb6fc2ba9734591e38f7afd2f29f13af189f16ca24d83d2b39db370554c522c272b39ba51ae14740fabad549873704856d5d2072605833c0c6c08119fcd31e3adcf789869b43862eed42101ce69db92aece41e38af6b0e63d102b4f9cb0e8ff6d92929fab44151bcbe08c89ee803d567d373468e4a7b0b389b23cd2d36b3031d23d234d2e89d5642f3adf2a34dfc4fbede0db202597b54186be96ec8fbac8ad4574f4bc64ae5d79dd7f0680120e494ca83eb8ac52490a2b6acfbf63529b3ad8c5dff590eac0f557ed54fc9f0a655c511dafd10b4ff905217468ca4d40ff325e49f82d0d82648bf53b1effec1c547ba8476331243355c4e926a22a8323ee61a74fafcfffa97f892d6a3a15388960fd5b004a91ea5a6f209d64a8080751e1c6bafcb01be815531b629e394d0f0df25817739b5c9e2dd5d131e16abc4784d92b79ac8954c208687cfc54b5b6803174efe79b6d2fa8510b3f7ebf34683eddd31694956b3b40474a78c73486bc69234a5926c55ecb8681ca5435893136cd79ca2ebdb52143511ccf8e134c3f974ab8179a81667d36ec1e881bbb37040a5643dda35ba78eaa4495c8cab68a43fdebc8bb24444f5c8f561e2bab45a936608bd6a4856452bd09e0901f6f394bdbd347ed0f6842f1f4b2b66f1cedd51b322dea987198a819303d511eb90c1a717d16d20a913e5f3ed4cc63309a3d501d88bca622641c9c06a9061c636337a6a90c9f61c3284ba2e0def67ba695e976742669224f375f7403a734f38f72289587d997cf68aa47c04854525b9bc07c7c0fa86d262d97c09779b5e83cd43e3557aa8010f8f8ec2900d0f6b8e81642be5869612ef0d1c9e3f636c45826d13f965c4545d2ae889609a530832c310f09bd110f97972cdc481fbbb385573499b63d1acefe74af647c86c9a2341399b174274ba283a68c3876bd67a1bc4e17d8cb8526475b2628dab6e6d10fef61b06c162f71a78bf8d7ec8ffc320bc0d219666aebd44eea879b248acf48b15fb60b93f78a84a4de5c2a266949821f71c7a7deda9cb7bf8395b9d92b38c25ebb362d913aed8ae7803c6153f5200cf425411b19955226c4180c7ce91ff0ff81764cf65fe5ec82ee1d920a0d2077829e56f72c847154de11e865a908b0b2111c7eeff4cb36cb14b4c505c10b04843bafd0f8796ec37cb77b579a375c94cc58ff907721032935f3000573880e084d7f0e77897e020464cfe2dc005b0e5352f05651d29e59368175a11db6986b377cabcb1a8b29385adea027e2eb68ab20ddaeb31a8fe1fb1d387308f8591c5d67089f153dc01298fa66c2bf64818a782609af1f35b566b210cd45203efac7edb19776ce95e7c97d18a74226f57e152b7b275eb13e1e35148ad161f01550a9717c73c9ece105108f31f7e768414d59f4b0c40a63e6b54ec20598da2654cc6adba925978afaff1cd1ebe9b137b8d1d5206d6fef826474468a3480a4a7732b83dc5e1f6a54b5d6df6bcb08d3e5fc975f4334c3377a5a885003052eac8d903593958b80f7197f968df50db2ca29ae8c71e25e4fbb452f1e358dfba3cae4b906140d25a04697c49bc0d159095f2c9e5b28ef402fe964c0de2e1ca2c45e354d218fd06f697f160341233d4a09974b0d0b05feeecb32af3d56d669a2f9afd8dd7aaa73b428f470aa45c3bab8f88fb4fe77462b3a6a0e9862feefd534901ea0ba1bd9087a7131f99c6bb94217f9d7842b3a25143ead3ab7f8e624ce2e36d3603baf188d306cc44b87d320a745e3a128e1133f373022dc8ef71eeb7e5ebea88ff0ec1a27ae001501e0523b7a2c7cb0145276c90b78b1cd6de8be3a6d891689054dcbe86ddb91375ccaf7dc74caade36ad9c32e71183eb17f421dfec5e0270e2ca602431d0e798558185d8ae2744c1d335232c5000d8db5d79e32f412fda6f7cc79fdd80de4ad173c6e66f5f7c71082646396de5f0e52ed5ce2e198aa717ec090622d02a438ebfbd6b9bf424856dd403696bd3395b667b0ace69fa1facbacc63845543c5ea4902dc8177b140325582e915c771d498688f99779c782bb9dc8d852fb07ea83930fd8b34aad0203a5e947c6a79d78b7154aef5681a23f57d4da2a81980fdc9159a2a4340261757d01e9f1a8f5320096bcb9f87163118059c56db2b0de7fb03e9ffc2752c2136883e121b7d0dbfc6ceb0b21dd8d5452d1abe8e8b2b518631395138663c642013ace1d43955b42dc226b14202772cb2bd0bf3c2b2bfca550c4aa5d948f5a9fb82f8131893b3a7a723f1133df237cdb577a87c53b611d59e2f87eab48d56fb3cae438faf853027ecf9f0a79b23cbc453444d9197d2f8e7110c882e72dd926e96c31095e8e828c10bf40f703c93c4e17ae117341f433b22410a9980a010b5dabebf6270ccbb5cf17157c9b72e21cb55311ef5acf2420f73199418970cd9955395242140d3130b69378f27050f8ef7dea6396ebfcb900c23dd39ed57195d9953c2596b79ef51c81524719d343da2b999cc88683dfd87d327ae52e88d4fef3705cdd284b73cfee7c5e1598f604c7dd75da28fc3224eb387d201201ee9c954f9c581d9ac9e046498d4a4a660007a6e4c071f43f4c9c293618b7c127ecb012021163f328c9a650db3fc37a2891bfc9d70f0df6672a5a830de307086ce522ceac83e369031e0b59da4a4538dfe572a26fdb9af41fbc229ad62bfc1d47f4127e0535ebbe17b3a854236704ba09dcc17938f970e1743bd7fb37a0ccb20230ed9ccea6ff318289ba5febbe2b2798118f6bfe347037db37157e072ce32ae65d7c75c35a273cd599b9d54ab027ca1cb91653d45ff4c9a66675f7dd8bec501e9f9d0f7f30450ddf2697c95166bc9d4e28291df52165918edd62946cb4a86890061dad5275828b62ef3fea8699ab1d9cc28ad9e3a249614070942a5fb46c7ba9a0209467734e82ebc60a955dfa52e354d502960dbd7ad2a0a9a99d297957048c76855114fe20999d27fcaacb63b2cd741c0f7f7ceec19b5f2d8f1e2b7b064e993e43afee651235d7a5c5f852b5862bb50f1ef7d19a41167a9096165f48a9af7823c57123118facb0756ba4488027d3481b11657ec3172f761b321dde0b598bf520140c1e691c6419fb69bd1f0f0d172ad100bbcda8b6882038e8845cdfd596c81937d32258de699e1208f9d8282a8d973143cd305fc150613fb3a8743087d6647b8a47ac3f631ebdce15eb6acaa18ea3823033b3384202e69a42535618d7029bab6b96701d8f74a1567d1b1803cdcf619463e208d31fadf80929d2469b52c75e0ba577f2e1f18edf6b371191fe26e7c1c78e8240697cf2c1029811c3b9b8cbd27a613e04b57f4f1f364246414f6a886475ae04fbc4c433704a5d727d168bf4d4a34db4dce6cf882c6ed66b9c68f1d988427ef2a0099cae6d723cc9c4ee5790aca13633c96de90e65029b6f7ce7fb368681cada7a2f0fc9aa24369e1320cd404dbe43223bb2a6bd538ce065ae467a72b568b88f412dc821c4f038a898e600ed964d8aa8e3c693385f8e4faa06e5656d68df70691e68d04453e4fab5f222f15696d5969d2a3bfe8a5d9130fbff850d17837216e17b762ef4fdd8b17cd37afd9322128979019f6bcf1b3aa404c75bbd7e700ea91de118769e25eb241a6b559da31bcb737f8f636d0eaa335ce8a633c8a31dd9175c7d9067867c559c0f6ad0ea24a1cf7cf0e934be59a2a7a70c7ff5d4495e1a3336d5faf9853ec44fb982d004b7da277a6f8ed65f327deb7b1996a198fb0b3c24cf910f60353f99dc79f0f5a0d5c2d4ad9073c3fafec9319612b44eb7a5ee063087e2f92a6c92ea27eaab2644bc441e21c1bdb045936fcb72c12b8c7857c82728b9c13933db1f0c23ba027c86fd119230f92cf67910b179ba019dedd82a0bf1d16994e0d121dd3f2a374cf469fdcf19cccc397f5ae8078b416db2745aa174e3ba7ce9321e2ea55069934d3a39d6beb0919a5c3f0f42c350ed26fd4257fd7e2f7abdb4d3daba6dcea7baf160d57be6ddd8851731cf2a0715f15594ee960e1af5037c23c875e6c808c28a4d3938f9a3b720b4a7b9008ff63cd60b38fafd2556322203152c1de87fe04dc74063ee17e09891aa3d250f2e8cb12b7256da533d7c57a11c7f599c2433348109987b5228a682619001411e918516e65c6c01ac9db27cdf118c69de6d400ab65339f3fa9e7866dcfc3e764fe627e785e919ae8cdea64d42c56e11d598698afc35688e35d5653460dc9d1f28224cbeefb10021e13e2127c48630a6dd812aa2e41c8ef825fa4f9718187e61ada5c3a8f907e9e425471c607076862613f73672f99dad220e77d44a725681b735f74b47f88e158943c2d5b73d00bc8028f135b0510ae4aa11749da7ec1071c3a28cbb58d8559f2aa552f5c51bef27d10c2a6a4c1a97232ee929d8bfb5b58edf6594a40fab9d6f5b6ae91253d66e6c526b512482a8b5cc66374e24ce46aac2a8460586d4e14b4b26a2f35da8d01d9b5eae909e03bf7317f2512ebd153fac44f038126a4829b7197d41740417b4effa5a51b2fab336aa8be2e85c4e0115d1dc90c6f8d09fa4eda6521ca65269636b63aa1a9a943e85cdff40517762be18a6b43734c891eb23fa4611469a1556f7d1ab75deca330757252ceeec48c5b0b1e81be23f53dd3e515c91cbc2ee2adb5ed3423d7bb6ee87be9445fd0ea5877e123dae2be222e31cc8a6e2dfd7a625d02527688de1b92b7683471385941dd56c0cd2516c32a66fae4ba10942e850c0e326c318c3918a22c2d3cd7cc4194168c37def6ebfe59f60111e6b5339b98b86df6522e3e6a6816fd6c158b2ca2334b133655a450ecbf0b67e42378dd78b46cd5d1253463506d57db18875233b9f4a2b5921a0163a1cbfacaca30b48149e9c96200f716e3ef68e7640144546d4eb2e09d35967bbd4f20d31248590757e0238948224de6e36c71ab5c4228c3934ae2eb6e2b8a2ef1ead91cb5dd440310bb42fdbda3ed489f657bd1396a87d0a24d843fbeeb35cf0337f646bf0f14150520cc593e37da2a8e26be37205bf6dadc8cb95d8595be2fa66ed373156443b906b408d91e10f2ec1e42c22b5c997cb329095986c8b8db8087a7b778e48d163ac73d14be7bcd4ec37ddbc78db8de6278f70217934c0bcac158534c5845cb96b56a81ef774ed30c8942b6228af6c875d3b4493cdd868d7fe42eb336a51bf0777da336c72cd08a16fabd0b6e307f21b77b132c909235a2e5712491f78182628b7c844d1aef6084b73b123d168d2b305351be0d517d7b2ac0de00cdae72ec21d0cb09d264eca5762aee1c91c7cc4ee3ebd6f5eee1e1e1c930cad1fa3d0e02f88e0d766e5f5b6ae042c791b0cf0ad30152c71bde19115b6a6b748bf228cbc7f626937c5224a2dbfbcfc4ae8fcf83b37a65763a9e552b218830e2c175611b3925b1c38fc185758d96121719110027a8e6322855bfe733b19105543e178654c46cbbda7ad1a71eaceac32ca111469be63a7a68eb4b2b1309e1e49e3d7b9543e119a35a2949e890daa06abfa07ff8846ac5bf659bb60ebb3d22f7d93e31025279dd5110fe7f0409295f71d47a432181692d917e624420e0dcb7a99f60ea6484e04ff0cf4a0c2b9544bfb1371730480c4eac2fd3d58912480afd5740100ad3b564ff20ea6de2ea052dd52bf6e50facc29e57c6f136edd2e9897d7a3bef1c2d69316c825b636a10d14a157563240c00091cc1c835ea47f922666e5d495fe1c995199b3f4f51a73ea441b8a60d99aea5f523d8983717543a9cebc88bc5ed0bba0adf8b0018cfc6fd2b3717cff14a9e68080507e9022e0681863dc1245bb75ea06e0c56e75742c63af388a32b0723286028136750bfdc79cee9f12bf01212db897941a8517d6f1ca6d78506b42e1ba6cfb6e50296d348ff9170ed1b02992899744ea2946c831d0cbdc7ffdee77440f80d69dcb679afd34a06a7800c028443ba14f269267ee056a5851ad52db41b8e595eae661c744cc39adfc709c19afb34d877974b54d47312333eb429b6e277dab11c32b2e1d05a209810db64872c076476e744b33f09bf7884756d09e8e184cb2d2d75c0943101a4f21aa2573e51fb118fb27af03116de9f120f698817b40942340e9904a46b5f34d296b630f8db8b295aa5a9d54991f5fb7e7414c469a7dc89c4575278ca73986ac75af7cd3a059890ceee063d114b36c55ad2bd8ec00a37537bf7183e50baf2d79b4e7599770dcb26d211a7483c44161c00af234fa9568e362c2023448b71f07a1a3a21b8fdbb648d6f766ab9e852115c9ba899360b1a0f5dbe6f0195a22f53e8e4b9e04325f14036d43124fd422867927e8fb51656ec89c836f63186d540b2f3e825d227c69c1aa04ec6a868573f7c6665d4a1d9dd664cb39fac10846b0f18e612d104aeca55557bc2cfeb14ffc3f21ef2293046d4a5bf2e9385978cabc627be184137423e36c90cc86a99bdb9a972521fe908ccb88b90937b97eecbcf729d9f98be364862f8354e363fe0aaf0ae9e6ba25aaca1e158c29201b429ecf90cc371804192489c7b6f93bd17c95ce5905a56494b94979239a54bdadc3e19f7853a1284544492e8d5154f4c812f891c4604eb4d3df61ff1140f3506baa7c2d4da1766ba58fb3017c2e6fa27d7aac7739c4224c2b5942a709ecb3510a152eafbe1e71adc00c98cf65e0a990c1b04f406c85366c69f243452555e00d32518dcce1400de5ac00c965d759643ba03631365cfcd047d70e73a87cb19d3e6cbc9e6d7eb106f634483694d8d0d65439a41e178bf188f1621e0a4f72d1393dc93f93d389a4524ba76d6be0f9ee5783cdcd42d70791262413d4a368183264373b213db72062823ead2658f846ec5792a9857c90d3ba79f3190f56fd677cab9960bc72c5878a5e2ebb19e954a54bd2ba0074c6b783a3e220521782e169467f7e08563ae706292e61947458d1c997ce98611142aa1160ee29a88e7b5fc227d5eda2d6d5e5e9b8e8a7a02085c6aebfe1dd415cbd2698bf95dd47eed13f278aae38778151de3d697b78d21f61ef964f12b846247ff912a0be819232e3d7533b8c8bed56ece5794aa37b3ea37d226cf81112f900dc9e48e2859ededc3fcd72f34c5796709dd2e0e75efaf632c2bf1ab1c33e5aa830c9db13ca5ab60e1b7c002bb5571da740495a41f741ca965b98168551a88f892e6eb7cf294b65a420d270eaccd24d50482c0aeef1c34e1044f54aa9f41ee29678c7f1d0093bf76ff2e557a374afaa9c9df3776e44f8c34e999346c1101759b7a9f419f9328a6a6531a5761c777703d5eb0845b998b3c92bf463b721f53ce96b8fcd6b2ecbf91eba8cb9bba45c6d7416ac31a92e4dc068b4e93f2436301a9166f7b7c506bd457f67fe9869467837450ce2cef0bb4da05d5904f3744f1faa383bfd0a661447819dbd830e7efbde4bcae70af3407929eca34589f1239cf7cb2994fe0ad6baad8d18bf222fce18dcd8f1baf6f21796af345d18a90382de24c54c502410a503cddbeb2573d2c1dc6fe0e491c39c490c8602abe49dacb1ad2780fdfd6fed7dd2320dc89f78edf27e13b2ff05190023e3d5deccc03183f5e074e464ce2c120a74a788bcebbe438e139d84cd25b4b89e9fce156f0cfed552b1fdecdceb4ae1e75fb0a23260087c5aba2050836ac7cb3aaed212e20d947a20584e7f8f4065fabb3c508410578e0de81a5c298dcf56eb153ef1988b0398ce701547b39a1ced8172490e05fe61ebca821b93a3f08b3d44397370c7da60ae5ce94be840105273171743b9639638d1cf08b7e28f6d9bfdd6438420dcad50fc825007349d4bd4efd2c12abb1576b3682048065af4654462f40045606f6ae866a325535578803491d0f7e521d0b25fbe4f850354cd39981a28847c7e2048ae8f9030b0cea7d8359f3269203a9bf51256c1cdb19f7f01c1a6cc1693c13408d83ebdd75781cc2c494fee90465698b374019aba4ff10c4f1df44cdb4c0bb79c194d4cf25ee2cc3558aa6fa13feadf99fd14736017efe14c182c634c2cce73157e45fba2fe3bb4825aa99c08d001ac4f1ac9d77613d2a9f17fe03a447c2b854a0c11fbe6af31b48fc64074702d816e2ed29aeab5ff8a2fc14db0023f03115ebc95bb5c19d64ad2e7787b126a4b6b2893f21179eb5aa79b5e562be1d6e9e8ecbe0ac32194de7f46e98b65790ab635d9e883d9d63605fdfc8f6d31279df32c38d11d0aca85d5f2b9283abd7c9970875c5153aa6caa4bb26bcf30919ea4eab64fef08b00fa8facdfffc69b19bc55389dfd955a5abe2f2baa46cd45d59b7f0dcae032864c73695c271da78567b1d3ac1888c37bd336e370b62d59768ba1dbfcfb81e9163d3bb37156dcd81e17b582ace8f98e8ae99d63729aa5e0296988d6f25b06b553c7ccf98a3bda84b664c30da1ba0d44f6201b13bc95f9355f6ee83d9b78828009daf0116652898ae884d7d58875b90d125d5f583006b5b3a798e0f4a21edd831e242adb8cf351ebe40f70a39f2357df1c6f385a2d9aa417eeb546007dc8d9790623cf0233e9647ab5877c78c00a8ed532957cb41f6c17272092577e0ce2b131bbc65cd4f9ee7c90f2169bc77ef3ea4c333bd611b6229bbdba154206476e67a8dff350598ed0adda7f8827284d9a92a8e1468e8dcf48f3075e5a7a930bc9573802449f102c070e7c5163dffcd7de5a7abbd698a42e9c8413661ccfcc544a1e360d35010ba75f9d5373c62a383e4f8370db623444630b01585003c11421e9642bb2746b26b982fe618242c2779c1cabe723c8ef41794bb3fec5c86f456b74c1b0e5668cd84e6d9e3ff1b484de3d3741e65bf8d4b05e4c2850011a17b05baa0f532531284c3934afd8745d0eddd536bcc7f78d2b3cc75133d17683d7752ec425a1c81ccbe233208367f863c42b774ee9489550d7013ab4bb0101b43a12372f0978fa80ec9f879f74dfb1dc47615d3b58171273acaffdb4b5d820c60272a524c17c4fbcff3d68da804fdfd41a32c0a6aab3c8a2c0b55437600b5b051382c8a0ca006c4042cebf3cfc28de0e6b61fe20a3ceb7f6f614e916840fef4f0f770562d3223ba388155a0776a27691859ea71a61317de17a45a323a09903989eae13b350370e594c30f08b42e913cb8b135fdf31b5e6be59818c84743d285be4e04cb8e73292eea46951ca0d6315cf864f49a2ab6301cac96a4a44f5cd0ca4390bca4782d5f412d486034bdcd889181d065bf5d75db6a9168b9467e5870a25ceb74d12b44d884a751425d7676c7607e2a24c66e45c67f1543df128f7f9b89ba3d703ddc79cb80afd0568ff24f237fb2649f6adc2b7a9b18f0938b8c91eb3244583c656066b8da9df05dd356693b8e983c8a94b6e70aebb0c503fb907b9332592d4c181ff339a28baf79c3fc713117bab3098ddad0c11f1f8ddf76bb362209374f03aa2b3ec6b1f366a294cea2f865b87fcb65dda87aa50ae4d511db34c40daec7036ab9d388004b927111cd8880204ca7e21550151d76c33ad50b355bb70a236c9b74b993ee1acbf5eeb3e7e55fb78b034632b14eac705725ecdbaa29042f6f72f929d6c9b709ea58c66bf4d5d097467ba500d997120d2\n  \n    \n      \n      \n        è¾“å…¥å¯†ç ä»¥è®¿é—®\n      \n    \n  \n\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas"]},{"title":"ã€Nasã€‘tmmåˆ®å‰Šå™¨æ— æ³•è¿æ¥tmdbçš„è§£å†³åŠæ³•ï¼ˆæ”¹hostï¼‰","url":"/2023/02/15/nas/9tmm%E5%88%AE%E5%89%8A%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/","content":"tmmåˆ®å‰Šå™¨æ— æ³•è¿æ¥tmdbçš„è§£å†³åŠæ³•ï¼ˆæ”¹hostï¼‰\n\n\nå¦‚é¢˜ï¼Œæœ€è¿‘å‘ç°è‡ªå·±windowsç”µè„‘ä¸Šçš„tmmåˆæ— æ³•åˆ®å‰Šäº†ï¼Œæ‰“å¼€ç³»ç»Ÿhostç›®ä¸€çœ‹ï¼Œå‘ç°æ–‡ä»¶è¢«æ¸…ç©ºäº†ï¼Œå¾—è‡ªå·±é‡æ–°å†æä¸€é\n1.æ€è·¯æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å½“å‰è®¿é—® api.themoviedb.orgçš„åŸŸåï¼Œæ²¡æœ‰åŠæ³•æ‰¾åˆ°ä¸€ä¸ªå›½å†…èƒ½æˆåŠŸè®¿é—®çš„ipã€‚æ‰€ä»¥å°±ä¼šæŠ¥é”™ timeout\nä¿®æ”¹hostçš„ä½œç”¨ï¼Œå°±æ˜¯å‘Šè¯‰ç³»ç»Ÿï¼Œè®¿é—®api.themoviedb.orgçš„æ—¶å€™ï¼Œå…ˆåœ¨æœ¬åœ°hostsæ–‡ä»¶é‡Œé¢æœ‰çš„è¿™äº›ä¸»æœºè¯•ä¸€è¯•ï¼Œèƒ½æˆåŠŸå°±ä¸éœ€è¦å»ä¸»åŠ¨æ‰¾hostæœåŠ¡å™¨äº†\næ‰€ä»¥æˆ‘ä»¬åªè¦å°†å›½å†…èƒ½è®¿é—®çš„ipå†™å…¥hostå°±å¯ä»¥äº†\n2.æ‰¾å¯»å¯ç”¨hostæœ‰äº†ä¸Šé¢çš„æ€è·¯ï¼Œä¸‹é¢è¦åšçš„å°±æ˜¯çœ‹çœ‹é‚£äº›hostå¯ä»¥è®¿é—®\né€šè¿‡ ITDOGç½‘ç«™ï¼Œåœ¨çº¿ping api.themoviedb.orgç«™ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°å¤§éƒ¨åˆ†åœ°åŒºçš„è®¿é—®éƒ½æ˜¯è¶…æ—¶çš„\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯æ‰¾åˆ°æ²¡æœ‰è¶…æ—¶çš„è¿™äº›ipï¼Œè®°å½•ä¸‹æ¥ã€‚ç‰¹åˆ«æ˜¯é¦™æ¸¯å’Œå°æ¹¾çš„\n\n\nè¦æƒ³çŸ¥é“è¿™äº›ipåœ¨ä½ è¿™ä¸ªåœ°æ–¹èƒ½ä¸èƒ½è®¿é—®ï¼Œé‚£å°±é‡‡ç”¨windowså‘½ä»¤è¡Œè¿›è¡Œpingï¼Œèƒ½è·å–åˆ°ä¿¡æ¯å°±æ˜¯okçš„\n\n3.æ”¹hostwindowsä¸‹çš„æ–‡ä»¶è·¯å¾„æ˜¯\nC:\\Windows\\System32\\drivers\\etc\\hosts\n\nä¸‹é¢æä¾›å¯ç”¨çš„hostï¼Œå»ºè®®é‡‡ç”¨ä¸Šé¢çš„åŠæ³•è‡ªå·±æ‰¾ä¸€ä¸‹ï¼Œå› ä¸ºipæ˜¯ä¼šå˜åŠ¨çš„\n13.224.161.52 api.themoviedb.org99.84.192.81 api.themoviedb.org13.33.33.60 api.themoviedb.org13.224.167.74 api.themoviedb.org13.35.166.20 api.themoviedb.org202.182.98.125 api.themoviedb.org13.224.205.59 api.themoviedb.org54.230.184.46 api.themoviedb.org31.13.67.19 api.themoviedb.org99.84.224.92 api.themoviedb.org99.84.224.149 api.themoviedb.org99.86.149.118 api.themoviedb.org65.9.83.54 api.themoviedb.org99.86.149.118 api.themoviedb.org13.224.163.98 api.themoviedb.org\n\næ·»åŠ å®Œæ¯•åï¼Œä»¥ç®¡ç†å‘˜èº«ä»½ä¿å­˜æ–‡ä»¶ï¼ˆå¦åˆ™æƒé™ä¸è¶³æ— æ³•å†™å…¥ï¼‰\nç°åœ¨åº”è¯¥å°±å¯ä»¥äº†\n","categories":["æ£é¼“æŠ˜è…¾nas"],"tags":["nas"]},{"title":"ã€Linuxã€‘ä½¿ç”¨è…¾è®¯äº‘æ­å»ºCentOSçš„Linuxç¼–ç¨‹å­¦ä¹ ç¯å¢ƒï¼Œå®ç°å¤šç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªäº‘æœåŠ¡å™¨","url":"/2022/05/06/note_Linux/0%E8%85%BE%E8%AE%AF%E4%BA%91%E5%88%9D%E5%A7%8B%E5%8C%96CentOS7.6/","content":"ä¸ºäº†å¸®åŠ©è‡ªå·±ç³»ç»Ÿåœ°å­¦ä¹ Linuxç³»ç»Ÿå’Œå‘½ä»¤è¡Œæ“ä½œï¼Œæˆ‘è´­å…¥äº†è…¾è®¯äº‘çš„è½»é‡äº‘æœåŠ¡å™¨ï¼Œé¢„è£…äº†CentOS7.6ç³»ç»Ÿ\n\n\næœ¬ç¯‡åšå®¢æ˜¯ä¸€ä¸ªç¬”è®°ï¼Œè®°å½•äº†åˆ›å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š\n\näº‘æœåŠ¡å™¨å¤šç”¨æˆ·éš”ç¦»ä½¿ç”¨ï¼ˆå› ä¸ºæˆ‘çš„æœåŠ¡å™¨æ˜¯å’ŒåŒå­¦ä¸€èµ·æ‹¼è´­çš„ï¼‰\ngitä»“åº“sshå¯†åŒ™è®¾ç½®\nè®¾ç½®Xshellç”¨æˆ·åçš„æ˜¾ç¤ºé¢œè‰²\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯¼è¯»ã€‚å…¶å®ä¸ç®¡æ˜¯æœä¸»è¿˜æ˜¯ä¸ªäººç”¨æˆ·ï¼Œéƒ½æ¨èä½¿ç”¨ä»¥ä¸‹é˜…è¯»é¡ºåº\n\nå¦‚æœä½ æ˜¯æœä¸»ï¼Œçœ‹æœ¬æ–‡çš„é¡ºåºæ˜¯1â†’2(å…¶ä¸­2.1è·³è¿‡)â†’6â†’8â†’4.1\né…ç½®å¥½ç¯å¢ƒå¹¶ä¸‹è½½å¥½gitåï¼Œæœä¸»å°±ä¸éœ€è¦åšå…¶ä»–ä»€ä¹ˆçš„äº†ï¼Œå°±å’Œå…¶ä»–äººä¸€èµ·çœ‹å®Œæœ¬æ–‡ğŸ‘‡\nå¦‚æœä½ ä¸æ˜¯æœä¸»ï¼Œåªéœ€è¦çœ‹2.2.4è¿æ¥ä¸Šä½ çš„è´¦æˆ·ï¼Œå³å¯å¼€å§‹æ“ä½œç¬¬3ã€4ã€5ã€7ç‚¹ï¼Œå¯è·³è¿‡4.2å’Œ4.3\n\n\n[TOC]\n1.äº‘æœåŠ¡å™¨åˆå§‹åŒ–è¿™éƒ¨åˆ†txäº‘å…¶å®æ˜¯æœ‰å¸®åŠ©æ–‡æ¡£çš„ï¼Œä½†æ˜¯å®ƒå°±æ˜¯ä¸åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œé¢ä»å¤´åˆ°å°¾å†™å…¨ï¼Œå¯¼è‡´ä½ éœ€è¦ç¿»æ¥ç¿»å»æ‰¾å…·ä½“çš„æ“ä½œï¼Œå¾ˆæ¼ç«\n1.1è´­ä¹°äº‘æœåŠ¡å™¨\n23.02.16æ›´æ–°ï¼šå½“å‰å­¦ç”Ÿä¼˜æƒ å·²ç»æ— äº†ï¼Œè¯·ä»¥å®˜ç½‘å®é™…ä»·æ ¼ä¸ºå‡†ï¼Œæœ¬æ–‡ä»…ä¾›å‚è€ƒ\n\né€‰æ‹©è…¾è®¯äº‘çš„ç†ç”±å¾ˆç®€å•ï¼Œç°åœ¨å®ƒæ¯”é˜¿é‡Œäº‘ä¾¿å®œï¼Œ2æ ¸å¿ƒ4GBçš„ç‰ˆæœ¬åªéœ€è¦168ä¸€å¹´ï¼ˆä½œä¸ºå¯¹æ¯”ï¼ŒåŒæ—¶æœŸé˜¿é‡Œäº‘æ²¡æœ‰æ‰“æŠ˜ï¼Œ1æ ¸2GBçš„ç‰ˆæœ¬99ä¸€å¹´ï¼‰\n\nè…¾è®¯äº‘æ ¡å›­è®¡åˆ’https://cloud.tencent.com/act/campus\n\næ³¨æ„ï¼šå¦‚æœä½ åªä¹°ä¸€å¹´ï¼Œè¯·ä¸è¦è´­ä¹°ä¸‹é¢çš„æ ¡å›­æœåŠ¡å™¨ï¼ï¼ï¼ï¼è´­ä¹°æ ¡å›­æœåŠ¡å™¨çš„èµ„æ ¼åªæœ‰ä¸€æ¬¡ï¼Œåªä¹°ä¸€å¹´å°±èŠ±æ‰è¿™ä¸ªèµ„æ ¼å¤ªä¸åˆ’ç®—äº†ï¼ï¼ï¼\nè€Œä¸”æ ¡å›­äº‘æœåŠ¡å™¨å› ä¸ºæ˜¯â€œé¦–å•ç‰¹æƒ â€ï¼Œæ˜¯ä¸æ”¯æŒåŒä»·ç»­è´¹çš„ï¼Œç»­è´¹ä»·æ ¼ä¹Ÿæ˜¯å¤©ä»·ï¼ï¼ï¼ï¼ˆç»­è´¹è¦900å¤šä¸€å¹´ï¼‰\nåœ¨è½»é‡åº”ç”¨æœåŠ¡å™¨é‡Œé¢è¿˜æœ‰ä¸€ä¸ªä¾¿å®œçš„ç‰ˆæœ¬ï¼Œ2æ ¸2GBåªè¦58ä¸€å¹´ï¼Œä½†æ˜¯é‚£ä¸ªåªèƒ½ä¹°ä¸€å¹´ï¼Œç»­è´¹çš„ä»·æ ¼å¾ˆè´µï¼ï¼ï¼\n\nå¦‚æœè¦ä¹°2-3å¹´ï¼Œè¯·è´­ä¹°ä¸Šé¢çš„æ ¡å›­æœåŠ¡å™¨\nå¦‚æœåªä¹°ä¸€å¹´ï¼Œè¯·è´­ä¹°ä¸‹é¢çš„è¿™ä¸ª58/å¹´çš„ç‰ˆæœ¬ã€é“¾æ¥ã€‘\n\n\n\næ³¨å†Œè…¾è®¯äº‘è´¦æˆ·å¹¶å®åè®¤è¯åï¼Œå°±å¯ä»¥æ­£å¸¸è´­ä¹°ã€‚è¿™é‡Œä¸èµ˜è¿°äº†ã€‚\næˆ‘é€‰æ‹©çš„ç³»ç»Ÿæ˜¯CentOS7.6ï¼Œè¿™ä¸ªç³»ç»Ÿéå¸¸é€‚åˆæˆ‘ä»¬åˆå­¦Linux\n\n\n1.2æ§åˆ¶å°ç®¡ç†åˆ›å»ºå®Œå®ä¾‹åï¼Œä½ åº”è¯¥å°±èƒ½åœ¨æ§åˆ¶å°é‡Œé¢çœ‹åˆ°ä½ çš„äº‘æœåŠ¡å™¨äº†ï¼Œå³ä¸‹è§’æ˜¾ç¤ºçš„æ˜¯å…¬ç½‘IPï¼Œæˆ‘ä»¬åç»­ä½¿ç”¨Xshellé“¾æ¥çš„æ—¶å€™éœ€è¦å®ƒ\n\nè¿›å…¥ååšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å……å€¼ä½ çš„rootè´¦æˆ·å¯†ç ã€‚å»ºè®®è®¾ç½®çš„ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä¸€å®šè¦ç”¨å°æœ¬æœ¬è®°ä¸‹æ¥ï¼\n\n1.3ä¸‹è½½Xshellæˆ‘ä»¬éœ€è¦ç”¨Xshellå’ŒXftpä½œä¸ºæˆ‘ä»¬çš„linuxé“¾æ¥ç»ˆç«¯ï¼Œç‚¹å‡»å®˜ç½‘é“¾æ¥ä¸‹è½½\n\nhttps://www.xshell.com/zh/free-for-home-school/\n\nå®¶åº­å’Œæ ¡å›­ä½¿ç”¨æ˜¯å…è´¹çš„ï¼ˆä¸ªäººç”¨æˆ·ï¼‰å¡«äº†é‚®ç®±å°±å¯ä»¥äº†ï¼Œå®˜æ–¹ä¼šå¾€ä½ çš„é‚®ç®±é‡Œé¢å‘ä¸€ä¸ªä¸‹è½½è½¯ä»¶çš„é“¾æ¥\nå®Œæˆä¸Šé¢ä¸‰æ­¥åï¼Œç°åœ¨å·²ç»å¯ä»¥è¿æ¥æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨äº†\n\n2.è¿æ¥äº‘æœåŠ¡å™¨2.0ç›´æ¥è¿æ¥rootè´¦æˆ·ä½ å¯ä»¥å…ˆä½¿ç”¨rootçš„è´¦æˆ·å¯†ç ä»¥åŠå…¬ç½‘ipè¿æ¥æœåŠ¡å™¨\n\nè¾“å…¥å…¬ç½‘IPï¼Œç«¯å£å·22ä¸è¦æ”¹\n\nç„¶åç‚¹å‡»ç¡®è®¤ï¼Œç³»ç»Ÿä¼šè®©ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä½¿ç”¨ç”¨æˆ·årootå’Œä½ åˆšåˆšè®¾ç½®çš„rootå¯†ç å°±å¯ä»¥ç™»å½•äº†\n\nè¿˜å¯ä»¥åœ¨txäº‘è¿™é‡Œç›´æ¥ç‚¹ç™»å½•ï¼Œä¼šä½¿ç”¨txäº‘çš„é»˜è®¤è´¦æˆ·lighthouseè¿æ¥ä½ çš„äº‘ä¸»æœº\n\n\n\nè¿™ä¸ªæ–¹æ³•åªé€‚åˆåŸºç¡€ä½¿ç”¨ï¼Œä¸‹é¢è®²è§£ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•\n\n\n2.1ä½¿ç”¨SSHå¯†é’¥å› ä¸ºXshellæ¯”è¾ƒèªæ˜ï¼Œä¼šå¸®æˆ‘ä»¬è®°ä½è´¦æˆ·å¯†ç ï¼Œè‡ªåŠ¨è¾“å…¥ã€‚ä½†æ˜¯åœ¨å¾ˆå¤šè½¯ä»¶ï¼ˆæ¯”å¦‚puttyï¼‰æ¯æ¬¡å¼€å¯è¿æ¥éƒ½éœ€è¦è¾“å…¥è´¦æˆ·å’Œå¯†ç ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´åŠ å®‰å…¨çš„åŠ å¯†SSHæ–¹å¼è¿æ¥æˆ‘ä»¬çš„ç»ˆç«¯\n\nå¦‚æœä½ æƒ³è¾¾åˆ°å¤šäººä¸€æœºçš„ç›®çš„ï¼Œè¯·è·³è¿‡æœ¬æ­¥éª¤ï¼Œç›´æ¥çœ‹2.2\n\n2.1.1åˆ›å»ºæœ¬åœ°å¯†é’¥åœ¨Xshellçš„é€‰é¡¹å¡ä¸­ï¼Œæ–°å»ºä¸€ä¸ªå¯†åŒ™\n\næ— éœ€ä¿®æ”¹é»˜è®¤å‚æ•°\n\nè¿™é‡Œä¼šè®©ä½ è¾“å…¥å¯†åŒ™åç§°å’Œå¯†ç ï¼Œè¯·è®°ä½è¿™é‡Œçš„å¯†ç ï¼å¦‚æœå¿˜è®°äº†å°±åªèƒ½é‡æ–°ç”Ÿæˆä¸€ä¸ªå¯†åŒ™äº†\n\n\nç”Ÿæˆå®Œæ¯•åï¼Œç‚¹å‡»ç”¨æˆ·å¯†åŒ™ç®¡ç†è€…\n\næ‰¾åˆ°åˆšåˆšç”Ÿæˆçš„å¯†åŒ™ï¼Œç‚¹å‡»å±æ€§-å…¬é’¥ï¼ŒæŠŠè¿™é‡Œçš„å†…å®¹å¤åˆ¶ä¸‹æ¥\n\n2.1.2ç»‘å®šå®ä¾‹ç„¶åæ¥åˆ°txäº‘æ§åˆ¶å°ï¼Œå¯†é’¥ï¼Œç‚¹å‡»åˆ›å»ºå¯†é’¥\n\né€‰æ‹©å·²æœ‰å…¬é’¥ï¼ŒæŠŠåˆšåˆšå¤åˆ¶çš„å†…å®¹ä¸¢è¿›å»å¹¶èµ·ä¸ªåå­—ã€‚æ³¨æ„è¿™é‡Œçš„åœ°åŸŸå¿…é¡»å’Œäº‘æœåŠ¡é€‰æ‹©çš„ç›¸åŒï¼\n\næå®šåï¼Œåœ¨äº‘æœåŠ¡å™¨çš„å¯†é’¥å¯¹ç•Œé¢ä¸­ç»‘å®šå¯†é’¥ï¼ˆéœ€è¦å…ˆæŠŠäº‘æœåŠ¡å™¨å…³æœºï¼‰\n\nç»‘å®šæˆåŠŸåï¼Œé‡å¯äº‘æœåŠ¡å™¨\n2.1.3Xshellä¼šè¯è®¾ç½®æ–°å»ºä¸€ä¸ªä¼šè¯ï¼Œè¿™é‡ŒåŒæ ·å¡«å…¬ç½‘ip\n\nç„¶åéœ€è¦è®¾ç½®ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œè¿™é‡Œå¾ˆé‡è¦ï¼Xshellæç¤ºâ€œå¯†é’¥æ²¡æœ‰å’Œäº‘æœåŠ¡å™¨ç»‘å®šâ€éƒ½æ˜¯å› ä¸ºè¿™é‡Œæ²¡æœ‰è®¾ç½®ï¼\n\né€‰æ‹©ä½ åˆ›å»ºçš„æœ¬åœ°å¯†åŒ™ï¼Œè¾“å…¥åˆ›å»ºå¯†åŒ™æ—¶çš„å¯†ç ï¼\n\nä¸å‡ºæ„å¤–ï¼Œè®¾ç½®å®Œæ¯•åï¼Œä½ å°±å¯ä»¥å…ç™»å½•è¿æ¥åˆ°äº‘æœåŠ¡å™¨çš„rootç”¨æˆ·äº†\n\nè¿™ä¸ªæ–¹æ¡ˆåªé€‚ç”¨äºå•ç”¨æˆ·ä½¿ç”¨ï¼Œå¦‚æœå¤šä¸ªç”¨æˆ·æƒ³ç”¨è¿™ä¸ªæ–¹æ³•è¿æ¥åŒä¸€ä¸ªäº‘æœåŠ¡å™¨ï¼Œå°±ä¼šå‡ºç°å¤§å®¶ä¸€èµ·ç”¨ä¸€ä¸ªæ–‡ä»¶è·¯å¾„çš„é—®é¢˜ï¼ˆå°±æ¯”å¦‚æˆ‘å’ŒåŒå­¦æ‹¼ï¼Œå¤§å®¶éƒ½ç”¨SSHè¿æ¥äº†rootç”¨æˆ·ï¼Œç™½æï¼‰\n\nç›®å‰æˆ‘æ²¡æ‰¾åˆ°å¦‚ä½•ç”¨SSHå¯†åŒ™è¿æ¥åˆ°äº‘æœåŠ¡å™¨æŒ‡å®šç”¨æˆ·ä¸‹\n\n2.2ä½¿ç”¨è´¦æˆ·å¯†ç ç™»å½•å®ç°å¤šäººä¸€æœºLinuxç³»ç»Ÿæ˜¯å¯ä»¥å®ç°å¤šç”¨æˆ·ç®¡ç†çš„ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·\n\nå‚è€ƒhttps://cloud.tencent.com/developer/ask/24465\n\n2.2.1åˆ›å»ºæ–°ç”¨æˆ·å…ˆç”¨rootè¿æ¥ç»ˆç«¯ï¼Œè¾“å…¥\nsudo useradd -g root ç”¨æˆ·å\n\nè¿™ä¸ªå‘½ä»¤çš„å«ä¹‰æ˜¯åœ¨rootåˆ†ç»„ä¸‹ï¼ˆè¿™ä¸ªæ˜¯é»˜è®¤çš„åˆ†ç»„ï¼‰å»ºç«‹ä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼Œç”¨æˆ·åè‡ªå®šä¹‰\nsudo passwd ç”¨æˆ·å\n\nç„¶åä½¿ç”¨è¿™ä¸ªå‘½ä»¤è®¾ç½®åˆšåˆšåˆ›å»ºçš„é‚£ä¸ªç”¨æˆ·çš„å¯†ç \néšåï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤æµ‹è¯•è¿›å…¥å¦å¤–ä¸€ä¸ªç”¨æˆ·\nsu - ç”¨æˆ·å\n\nå› ä¸ºæˆ‘ä»¬æ˜¯ä»å…·æœ‰æœ€é«˜æƒé™çš„rootç”¨æˆ·è¿›å…¥å­ç”¨æˆ·ï¼Œæ‰€ä»¥æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç çš„ï¼Œä½†æ˜¯å¦‚æœä½ ä»å­ç”¨æˆ·å¾€rootè·‘ï¼Œå°±éœ€è¦è¾“å…¥rootç”¨æˆ·çš„å¯†ç ï¼\n\nä½ å¯ä»¥åœ¨rootç”¨æˆ·å’Œå­ç”¨æˆ·ç»ˆç«¯ä¸‹ç”¨mkdir æ–‡ä»¶å¤¹åå­—åˆ›å»ºä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶å¤¹ï¼ŒlsæŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹\nä½ ä¼šå‘ç°ï¼Œrootå’Œå¦å¤–ä¸€ä¸ªç”¨æˆ·ç›´æ¥æ˜¯ç›¸äº’çœ‹ä¸åˆ°å¯¹æ–¹çš„æ–‡ä»¶å¤¹çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è¾¾åˆ°çš„éš”ç¦»æ•ˆæœï¼ç›¸å½“äºäº’ä¸å¹²æ‰°ï¼\nä»å­ç”¨æˆ·Aè·‘åˆ°å­ç”¨æˆ·Bä¸­ï¼Œéœ€è¦è¾“å…¥å­ç”¨æˆ·Bçš„å¯†ç ã€‚\nè¿™éœ€è¦rootç”¨æˆ·åœ¨é‡Œé¢åˆ›å»ºæ–°çš„ç”¨æˆ·ï¼Œæ‰€ä»¥æœä¸»æ˜¯çŸ¥é“æ¯ä¸ªç”¨æˆ·çš„å¯†ç çš„ã€‚è¿™å°±çœ‹ä½ ä»¬çš„ä¿¡ä»»é—®é¢˜äº†ã€‚å¦‚æœçœŸçš„ä¿¡ä¸è¿‡ï¼Œå°±è®©æ¯ä¸ªäººè¿›rootè´¦æˆ·ï¼Œè‡ªå·±è®¾ç½®è‡ªå·±è´¦æˆ·çš„å¯†ç ï¼Œé‚£å°±æ²¡å•¥é—®é¢˜äº†\n2.2.2ä¿®æ”¹å¯†ç å®é™…ä¸Šï¼Œåœ¨è‡ªå·±çš„ç”¨æˆ·åä¸‹ï¼Œæ˜¯å¯ä»¥æ›´æ”¹å½“å‰ç”¨æˆ·åçš„å¯†ç çš„\npasswd\n\n\næ‰€ä»¥å¯ä»¥è®©æœä¸»åˆ›å»ºå¥½ç”¨æˆ·åï¼Œè‡ªå·±ç™»é™†è¿›å»ï¼ŒæŠŠè‡ªå·±çš„å¯†ç æ”¹æ‰\n\næ³¨æ„ï¼šLinuxå­¦ä¹ ä¸­æœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›æŒ‡ä»¤åªæœ‰rootç”¨æˆ·èƒ½å¹²ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯ä¸è¦é‚£ä¹ˆåœ¨ä¹è¿™äº›â€œéšç§é—®é¢˜â€ï¼Œrootä¹Ÿå…¬å¼€ç»™å¤§å®¶ä½¿ç”¨å°±è¡Œäº†\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨æŸä¸€ä¸ªè¯­å¥ä¹‹å‰åŠ sudoï¼Œå°±ä¼šç”¨ä¸Šrootæƒé™\n2.2.3è…¾è®¯äº‘å¤šç”¨æˆ·ç®¡ç†å¦å¤–ï¼Œè…¾è®¯äº‘æ”¯æŒå¤šç”¨æˆ·ç®¡ç†ï¼Œä½ å¯ä»¥åœ¨ç”¨æˆ·ç»„è¿™é‡Œé‚€è¯·å…¶ä»–äººï¼Œä»–ä»¬å°±èƒ½åœ¨è‡ªå·±çš„æ§åˆ¶å°é‡Œé¢çœ‹åˆ°ä½ çš„äº‘æœåŠ¡å™¨äº†\n\n\n2.2.4Xshellä½¿ç”¨è´¦æˆ·å¯†ç è¿æ¥è¿™æ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨sshå¯†é’¥ç™»å½•äº†ï¼Œè€Œæ˜¯ä½¿ç”¨è´¦æˆ·å’Œå¯†ç \n\nä½¿ç”¨è¿™ä¸ªæ–¹å¼å‰ï¼Œè²Œä¼¼éœ€è¦åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°è§£ç»‘æ‰€æœ‰SSHå¯†é’¥\n\nåˆšå¼€å§‹ç›´æ¥è¿æ¥ä¼šæ˜¾ç¤ºâ€œSSHæœåŠ¡å™¨æ‹’ç»äº†å¯†ç â€ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¼€å¯å…è®¸å¯†ç ç™»å½•\n\n\nå‚è€ƒhttps://cloud.tencent.com/developer/article/1909909\n\nåœ¨rootç”¨æˆ·ä¸‹ï¼Œä½¿ç”¨vimæ‰“å¼€ä¸‹é¢è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœä½ ä¸ä¼šä½¿ç”¨vimç¼–è¾‘å™¨ï¼Œè¯·è§æœ¬æ–‡çš„ç¬¬ä¸‰ç‚¹\nvim /etc/ssh/sshd_config\n\nåœ¨æœ€åæ·»åŠ ä¸‹é¢çš„è¿™ä¸ªè¯­å¥ï¼Œ:wq!ä¿å­˜å¹¶é€€å‡º\nPasswordAuthentication=yes\n\n\næå®šåï¼Œé‡å¯äº‘ä¸»æœºï¼Œå³å¯ç”¨è´¦å·å¯†ç ç™»å½•å…¶ä»–è´¦æˆ·\n\nå¦‚æœè®¾ç½®äº†è¿™ä¸ªè¿˜æ˜¯ä¸è¡Œï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­ç›´æ¥é‡ç½®rootå¯†ç ã€‚é‡ç½®å¯†ç çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®ä½ è®¾ç½®å¥½è¿™ä¸ªï¼ˆå¦‚æœæ²¡æœ‰å°±å†æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ï¼Œå“ˆå“ˆï¼‰\n\n\n\nåœ¨Xshellä¸­ç›´æ¥ç”¨å¯¹åº”çš„è´¦æˆ·å’Œå¯†ç ç™»å½•ï¼Œå°±å¯ä»¥æ‰“å¼€æ¯ä¸ªå•ç‹¬çš„è´¦æˆ·\n\nX11è­¦å‘Šæ˜¯æ­£å¸¸ç°è±¡ï¼Œè¯·å¿½ç•¥å®ƒ\n\nåˆ°è¿™é‡Œï¼Œä½ å°±å¯ä»¥å’Œå¥½åŸºå‹åˆ†äº«è¿™ä¸ªæœåŠ¡å™¨äº†ï¼æˆæœ¬å¤§å¤§é™ä½\n2.3æŸ¥çœ‹å½“å‰ä½¿ç”¨äº‘æœåŠ¡å™¨çš„ç”¨æˆ·åœ¨Xshellç»ˆç«¯ä¸­è¾“å…¥whoï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰æœ‰è°è¿æ¥äº†äº‘æœåŠ¡å™¨\nè¿™é‡Œä¼šæ˜¾ç¤ºè¿æ¥äº‘æœåŠ¡å™¨çš„æ—¶é—´ï¼Œptsä»£è¡¨è¿œç¨‹è¿æ¥ï¼Œ/2ä»£è¡¨ä¸åŒçš„è¿œç¨‹è¿æ¥ç«¯å£\n\n\n3.ä¸€äº›åŸºæœ¬çš„LinuxæŒ‡ä»¤ä¹‹å‰å†™åšå®¢çš„æ—¶å€™ï¼Œå¿½ç•¥äº†å¤§å®¶å¯èƒ½éƒ½æ˜¯ç¬¬ä¸€æ¬¡ä¸Šæ‰‹linuxï¼Œå¯¹linuxå‘½ä»¤è¡Œä¸€çªä¸é€šçš„ã€‚æœ‰æœ‹å‹ååº”åé¢çš„gitæ“ä½œï¼Œå¾ˆå¤šéƒ¨åˆ†éƒ½æä¸æ˜ç™½æ€ä¹ˆç”¨\nè¿™é‡Œåˆ—å‡ºæœ¬ç¯‡åšå®¢éœ€è¦ç”¨åˆ°çš„ä¸€äº›linuxæŒ‡ä»¤å’Œvimç¼–è¾‘å™¨çš„æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåªæ˜¯å¸®åŠ©ä½ å®Œæˆæœ¬ç¯‡åšå®¢å‘å¯¼åç»­çš„gitè®¾ç½®ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤è¡Œæ•™å­¦ã€‚å»ºè®®è‡ªè¡Œæœç´¢gitå‘½ä»¤è¡Œä»¥åŠLinuxå‘½ä»¤è¡Œè¿›è¡Œå­¦ä¹ \n3.1LinuxæŒ‡ä»¤ls #æ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ls -a #æ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹åŒ…æ‹¬éšè—æ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶cd æ–‡ä»¶è·¯å¾„   #æ‰“å¼€å¯¹åº”æ–‡ä»¶è·¯å¾„cd ..   #å›åˆ°ä¸Šä¸€ä¸ªæ–‡ä»¶ç›®å½•cd ~   #å›åˆ°ç”¨æˆ·çš„æ ¹ç›®å½•touch æ–‡ä»¶å  #åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶mkdir æ–‡ä»¶å¤¹åå­— #åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹mv æºè·¯å¾„ ç›®æ ‡è·¯å¾„ #ç§»åŠ¨æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶#mvè¯­å¥è¿˜ç”¨äºé‡å‘½åæ–‡ä»¶ï¼Œæ“ä½œæ˜¯mv åŸæ¥çš„åå­— æ–°åå­—cat æ–‡ä»¶åå­—  #æ˜¾ç¤ºå¯¹åº”æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹#å¦‚cat .gitconfigï¼Œä¼šæ˜¾ç¤º.gitconfigæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹\n\nä¸‹å›¾æ¼”ç¤ºäº†éƒ¨åˆ†è¯­å¥ï¼Œèƒ½å¸®åŠ©ä½ ç†è§£è¿™äº›å‘½ä»¤çš„ä½œç”¨\n\nå¦‚æœä½ ä¸å°å¿ƒè¾“é”™äº†æŸäº›æŒ‡ä»¤æˆ–è€…æŒ‡ä»¤æ²¡è¾“å…¥å®Œæ¯•å°±æŒ‰äº†å›è½¦ï¼Œå¯ä»¥ä½¿ç”¨ctrl+cç»ˆæ­¢å½“å‰æ“ä½œï¼Œlinuxä¼šå¦èµ·ä¸€ä¸ªæ–°çš„å…¥å£ç»™ä½ è¾“å…¥å‘½ä»¤\n\n3.2vimç¼–è¾‘å™¨æ“ä½œvim æ–‡ä»¶å #æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶è¿›è¡Œå†™å…¥\n\nè¿™é‡Œæˆ‘ç›´æ¥ä»¥ç¼–è¾‘ä¸€ä¸ªC++ç¨‹åºä¸ºä¾‹ï¼Œæ¼”ç¤ºvimçš„æ“ä½œ\n\næ‰“å¼€åæ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºä½ çš„vimç¼–è¾‘å™¨è¿˜æ²¡æœ‰è®¾ç½®ï¼ˆè§æœ¬æ–‡ç¬¬5ç‚¹ï¼‰ï¼Œæ‰€ä»¥å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸å½±å“æˆ‘ä»¬çš„æ“ä½œã€‚\næ³¨æ„å·¦ä¸‹è§’æ˜¯vimæŒ‡ä»¤è¾“å…¥çš„ä½ç½®ä»¥åŠvimå½“å‰æ¨¡å¼çš„æç¤ºä½ç½®\n\nç°åœ¨å¾€è¿™ä¸ªæ–‡ä»¶ä¸­é”®å…¥å†…å®¹ï¼Œä½ ä¼šå‘ç°æ— æ³•é”®å…¥ï¼Œè¿™æ˜¯å› ä¸ºvimæ˜¯æŸ¥çœ‹æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è‹±æ–‡æ¨¡å¼ä¸‹æŒ‰é”®ç›˜ä¸Šçš„çš„iï¼ˆä¸­æ–‡æ¨¡å¼æŒ‰iæ˜¯æ²¡æœ‰ååº”çš„ï¼‰å¼€å¯vimçš„æ’å…¥æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯insertæ¨¡å¼ï¼‰\n\nå¼€å¯æ’å…¥æ¨¡å¼åï¼Œä½ å°±å¯ä»¥å¾€è¿™ä¸ªæ–‡ä»¶é‡Œé¢å†™å…¥å†…å®¹äº†ã€‚æ³¨æ„vimç¼–è¾‘å™¨æ˜¯åŸºäºé”®ç›˜çš„ï¼Œä½ éœ€è¦ç”¨é”®ç›˜æ–¹å‘é”®å®šä½ä½ç½®ï¼Œè€Œä¸æ˜¯ç”¨é¼ æ ‡\n\næˆ‘å¾€æ–‡ä»¶ä¸­æ–°å¢äº†c++è¯­æ³•çš„å†…å®¹ï¼Œç°åœ¨æˆ‘æƒ³ä¿å­˜è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶é€€å‡ºvimç¼–è¾‘å™¨\næ“ä½œæ˜¯å…ˆåœ¨è‹±æ–‡æ¨¡å¼ä¸‹æŒ‰é”®ç›˜çš„ESCé€€å‡ºæ’å…¥æ¨¡å¼ï¼Œç„¶åè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶\n\nè¿™å°±å›åˆ°äº†ä¹‹å‰çš„linuxå‘½ä»¤è¡Œç•Œé¢\n\nä¸‹é¢ç»™å‡ºä¸€äº›å¸¸ç”¨çš„vimæŒ‡ä»¤ï¼Œåç»­é…ç½®gitçš„æ—¶å€™ä¼šç”¨åˆ°\n:w  #ä¿å­˜æ–‡ä»¶ï¼Œç›¸å½“äºwindowsçš„ctrl+s:q  #é€€å‡ºæ–‡ä»¶ï¼Œå‰ææ˜¯è¿™ä¸ªæ–‡ä»¶æ²¡æœ‰è¢«æ›´æ”¹#å¦‚æœä½ ä¸æƒ³ä¿å­˜åˆšåˆšçš„æ›´æ”¹ï¼Œå¯ä»¥ä½¿ç”¨:q! #å¼ºåˆ¶é€€å‡ºæ–‡ä»¶:wq #ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶:wq! #å› ä¸ºéƒ¨åˆ†æ–‡ä»¶æ˜¯é…ç½®æ–‡ä»¶ï¼Œç³»ç»Ÿæƒé™ä¸å¤Ÿï¼Œæ‰€ä»¥éœ€è¦åŠ !ç»•å¼€#åç»­åœ¨ç¼–è¾‘gitconfigæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨:wq!\n\n\nå¦‚æœä½ æƒ³ä»windowsä¸­å¤åˆ¶å†…å®¹ï¼Œç²˜è´´åˆ°ç»ˆç«¯ä¸­ï¼Œéœ€è¦ä½¿ç”¨shift+insé”®è€Œä¸æ˜¯ä½¿ç”¨ctrl+v\nå¤åˆ¶ctrl+insï¼Œç²˜è´´ shift+ins\nå¦‚æœä½ ä¸å°å¿ƒä¹ æƒ¯æ€§åœ°æŒ‰äº†ctrl+så¹¶å‘ç°ç³»ç»Ÿå¡ä½äº†ï¼Œé‚£æ˜¯å› ä¸ºè¿™ä¸ªå¿«æ·é”®åœ¨Linuxä¸­æ˜¯æš‚åœç»ˆç«¯ï¼Œå¯ä»¥æŒ‰ctrl+qå¤åŸ\n\nä¸Šé¢è®²è¿°äº†vimçš„ä¸€äº›æ“ä½œï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ç¼–ä¸€ä¸ªä»£ç \n3.3å°è¯•ç¼–è¯‘ä»£ç C++éœ€è¦ä½¿ç”¨g++ç¼–è¯‘å™¨æ¥ç¼–è¯‘ä»£ç ï¼Œå¦‚æœæ˜¯Cè¯­è¨€å†…å®¹ï¼Œåˆ™ä½¿ç”¨gccæ¥ç¼–è¯‘ï¼Œæ“ä½œæ˜¯ä¸€æ ·çš„\nä»¥ä¸‹é¢çš„æŒ‡ä»¤ç¼–è¯‘æˆ‘ä»¬åˆšåˆšå†™çš„ä»£ç æ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ng++ test.cpp -o TEST\n\nå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨æŠ¥é”™äº†ï¼Œæˆ‘ä»¬å†vimå›å»ä¿®æ”¹ä»£ç \n\nä¿®æ”¹å®Œæ¯•åï¼Œé‡æ–°ç¼–è¯‘æˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ²¡æœ‰æŠ¥é”™ï¼Œç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶TEST\n\nä½¿ç”¨./TESTè¯­å¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶TESTï¼Œå³å¯çœ‹åˆ°ç¨‹åºè¾“å‡ºç»“æœ\n\nå¥½äº†ï¼Œå­¦ä¼šè¿™äº›åï¼Œä½ åº”è¯¥å°±èƒ½å®Œæˆåé¢gitçš„é…ç½®æ“ä½œäº†ï¼ğŸ˜‹\n\n4.Linuxçš„gitè®¾ç½®è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼æ¥é…ç½®æˆ‘ä»¬çš„gitï¼Œå› ä¸ºsshå¯†é’¥çš„æ–¹å¼å‡ºç°äº†äº›è®¸bug\n4.1ä¸‹è½½gitè¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤æŸ¥çœ‹gitçš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°ï¼Œé‚£è¯´æ˜gitæ²¡æœ‰è¢«å®‰è£…\ngit --version\n\nCentOSä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤å®‰è£…ï¼Œå¿…é¡»ä½¿ç”¨rootç”¨æˆ·ã€‚å…¶ä»–LINUXç³»ç»Ÿéœ€è¦æŠŠyumæ”¹æˆapt-get\nsudo yum install git\n\n\nå› ä¸ºæˆ‘ä¹‹å‰ç”¨äº†æ ‘è“æ´¾ï¼Œä½¿ç”¨çš„æ˜¯apt-getã€‚åœ¨è¿™ä¸Šé¢ä¸ç®¡ç”¨ï¼Œæˆ‘è¿˜å»æœäº†å¥½ä¹…ä¸ºå•¥sudo: apt-get: command not foundğŸ˜¥\nåé¢æ‰çŸ¥é“CentOSä½¿ç”¨çš„æ–¹æ³•ä¸ä¸€æ ·\n4.2åˆ›å»ºSSHå¯†åŒ™å¦‚æœä½ æƒ³å­¦ä¹ SSHçš„æ–¹å¼ä½¿ç”¨gitï¼Œé‚£ä¹Ÿå¯ä»¥è¯•è¯•ğŸ‘‰ä¼ é€é—¨\n\næ³¨ï¼šå¦‚æœä½ æ˜¯githubç”¨æˆ·ï¼Œä¸”ä½¿ç”¨httpsçš„gitä»“åº“é“¾æ¥æ—¶ï¼Œå¤šæ¬¡é‡åˆ°å„ç§å„æ ·çš„æ— æ³•è¿æ¥é—®é¢˜ï¼Œåˆ™éœ€è¦åˆ‡æ¢ä½¿ç”¨sshæ–¹å¼ä¸githubé€šä¿¡ï¼è¿™èƒ½è§£å†³å¤§éƒ¨åˆ†ç±»ä¼¼time outçš„ç½‘ç»œé—®é¢˜\n\n\n4.3ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼æ“ä½œgitå…¶å®åœ¨é…ç½®ä¹‹å‰ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“git configå¯ä¸å¯ä»¥å®ç°å¤šç”¨æˆ·ç‹¬ç«‹ä¸Šä¼ ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ï¼ˆä»¥ä¸ºï¼‰SSHè‚¯å®šå¯ä»¥ğŸ˜‚\n4.3.1 é…ç½®å…¨å±€gitè®¾ç½®ç›´æ¥ä½¿ç”¨ä¸‹é¢3ä¸ªè¯­å¥æ¥è®¾ç½®æŸä¸ªLinuxç”¨æˆ·ä¸‹çš„å…¨å±€gité‚®ç®±å’Œç”¨æˆ·å\ngit config --global user.email &quot;you@example.com&quot;git config --global user.name &quot;Your Name&quot;git config --global push.default current\n\næµ‹è¯•äº†ä¸€ä¸‹--globalæŒ‡ä»¤åï¼Œå‘ç°å®ƒä¿å­˜çš„æ–‡ä»¶æ˜¯æˆ‘ä»¬ç”¨æˆ·è·¯å¾„ä¸‹çš„ï¼Œè€Œä¸æ˜¯rootä¸‹çš„å…¨å±€ç›®å½•ã€‚ç»è¿‡æˆ‘å’ŒåŒå­¦çš„æµ‹è¯•ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨æ¯ä¸€æ¬¡è¿æ¥ç»ˆç«¯çš„æ—¶å€™éƒ½ä¿å­˜ä¸‹æ¥ï¼Œä¸ä¼šå‡ºç°SSHé‚£ä¸ªéœ€è¦é‡æ–°è®¾ç½®çš„æƒ…å†µ\nä½¿ç”¨ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤å¯ä»¥æŸ¥çœ‹gité…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œæ¯ä¸ªä¸åŒçš„Linuxç”¨æˆ·ä¸­ï¼Œé…ç½®æ–‡ä»¶äº’ä¸å½±å“\ncat .gitconfig \n\n\nä½¿ç”¨SSHçš„å¥½å¤„æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨gitæŒ‡ä»¤æ¥è®©gitä¿å­˜ä½ çš„å¯†ç ï¼Œè¿™æ ·ä¹Ÿèƒ½åœ¨ä¹‹åçš„ä¸Šä¼ ä¸­ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œæ“ä½œæ˜¯ç¼–è¾‘.gitconfig æ–‡ä»¶ï¼Œåœ¨æœ€ååŠ ä¸Šè¿™ä¸¤è¡Œï¼šä½œç”¨æ˜¯åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œgit pushæ“ä½œçš„æ—¶å€™ï¼Œä¿å­˜ç”¨æˆ·åå’Œå¯†ç \n[credential]          helper = store\n\nä½¿ç”¨vim .gitconfigä¿®æ”¹åçš„é…ç½®æ–‡ä»¶åº”è¯¥å’Œæˆ‘è¿™ä¸ªç›¸åŒ\n[user]\temail = ä½ çš„giteeé‚®ç®±\tname = ç”¨æˆ·å[push]\tdefault = current[credential]\thelper = store\n\n\n4.3.2 å…‹éš†å’Œä¸Šä¼ æ“ä½œä½¿ç”¨mkdir æ–‡ä»¶å¤¹ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œcdè¿›å»åï¼Œæ‰§è¡Œcloneå·¥ä½œï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨çš„æ˜¯HTTPSé“¾æ¥\n\ngit clone è¿œç¨‹ä»“åº“çš„httpsé“¾æ¥\n\n\nå¦‚æœä½ ä¹‹å‰ä½¿ç”¨äº†SSHå…‹éš†äº†ä»“åº“ï¼Œå¯ä»¥è€ƒè™‘é‡æ–°å…‹éš†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ›´æ”¹ä»“åº“URLï¼Œæ³¨æ„è¿™é‡Œçš„URLæ˜¯æ–°çš„åœ°å€\ngit remote set-url origin URL \n\ncdè¿›å…¥ä»“åº“ç›®å½•ï¼Œå³å¯ä¿®æ”¹ä»“åº“ä¸­çš„æ–‡ä»¶\n\nä¿®æ”¹å®Œæ¯•åï¼Œå…ˆç”¨git statusæŸ¥çœ‹å½“å‰çŠ¶æ€\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œåˆ—å‡ºæ¥æˆ‘ä»¬çš„READMEæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œä¸‹é¢æ‰§è¡Œä¸€æ¬¡git pushæ“ä½œã€‚è¿™éƒ¨åˆ†æ¶‰åŠåˆ°gitå‘½ä»¤è¡Œæ“ä½œï¼Œå¦‚æœä½ ä¸ä¼šï¼Œå¯ä»¥æœå‡ ç¯‡gitçš„åšå®¢å­¦ä¹ ä¸€ä¸‹\ngit add æ–‡ä»¶å¤¹ #æ·»åŠ éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„git commit -m &quot;è¾“å…¥pushä¿¡æ¯&quot; #git pushçš„ä¿¡æ¯\n\nè¿™é‡Œçš„git addå¯ä»¥æ·»åŠ å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ•´ä¸ªæ–‡ä»¶å¤¹\n\ngit push #å’Œè¿œç¨‹ä»“åº“åŒæ­¥\n\næœ€ågit pushçš„æ—¶å€™ï¼Œä¼šæç¤ºè®©ä½ è¾“å…¥è¿œç¨‹ä»“åº“çš„ç”¨æˆ·åå’Œå¯†ç \næˆ‘åŒå­¦å°è¯•çš„æ—¶å€™ï¼Œè¿™é‡Œå‡ºç°äº†æŠ¥é”™ã€‚æœ¬æ¥æˆ‘ä»¬ä»¥ä¸ºæ˜¯ç”¨æˆ·åæˆ–è€…å¯†ç æœ‰é—®é¢˜ï¼Œä¸€ç›´åœ¨æ‰¾åˆ°åº•æ˜¯å“ªé‡Œå‡ºé”™äº†\nfatal: Authentication failed for &#x27;https://gitee.com/â€¦â€¦&#x27;\n\nå®é™…ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬å¡«é”™äº†ï¼ï¼ï¼é“¾æ¥\n\næ­£ç¡®çš„å¡«å†™æ–¹æ³•åº”è¯¥æ˜¯è¿™æ ·ï¼ï¼ï¼æˆ‘ä»¬é”™è¯¯çš„æŠŠç¬¬ä¸€ä¸ªå¡«äº†giteeçš„ç”¨æˆ·åï¼Œåº”è¯¥è¦å¡«å†™çš„æ˜¯giteeè´¦æˆ·çš„é‚®ç®±\nUsername for &#x27;https://gitee.com&#x27;: ä½ çš„giteeé‚®ç®±Password for &#x27;https://xxxxx@gitee.com&#x27;: å¡«giteeå¯†ç \n\næ³¨ï¼šè¿™é‡Œå¡«å†™å¯†ç çš„æ—¶å€™æ˜¯ä¸ä¼šæ˜¾ç¤ºå†…å®¹çš„ï¼Œç›´æ¥ç›²æ‰“å°±å¯ä»¥äº†\nä¿®æ”¹æ­£ç¡®ä¹‹åå°±å¯ä»¥æ­£å¸¸PUSHä»£ç äº†\n\nç»è¿‡æˆ‘å’ŒåŒå­¦çš„æµ‹è¯•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå› ä¸ºç»ˆç«¯å…³é—­è€Œé‡ç½®ï¼Œå¯ä»¥å¤šæ¬¡å¤ç”¨ä¸”ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥gitçš„è´¦æˆ·å’Œå¯†ç ï¼Œè®¡åˆ’é€šï¼\n\ngitå‘½ä»¤è¡Œè¯­å¥çš„è¿›é˜¶å­¦ä¹ ğŸ‘‰ä¼ é€é—¨\n\n\n5.vimç¼–è¾‘å™¨è®¾ç½®è…¾è®¯äº‘çš„CentOSå·²ç»é»˜è®¤å®‰è£…äº†vimç¼–è¾‘å™¨ï¼Œä½†æ˜¯vimç¼–è¾‘å™¨æœ¬èº«çš„é»˜è®¤è®¾ç½®å’Œæˆ‘ä»¬çš„ä¹ æƒ¯ä¸åŒï¼Œæ¯”å¦‚tapå®ƒé»˜è®¤æ˜¯8ä¸ªç©ºæ ¼ï¼ˆwindowsä¸‹æ˜¯4ä¸ªï¼‰ä»¥åŠç¼©è¿›çš„ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±è®¾ç½®ä¸€ä¸‹vimç¼–è¾‘å™¨\nvim  ~/.vimrc\n\nç”¨ä¸Šé¢çš„è¯­å¥æ‰“å¼€vimç¼–è¾‘å™¨åï¼Œç”¨iå¼€å¯vimçš„æ’å…¥æ¨¡å¼ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤\nsyntax on #å¼€å¯è¯­æ³•é«˜äº®set nu  #æ˜¾ç¤ºè¡Œå·set tabstop=4 #è®¾ç½®tapä¸º4ä¸ªç©ºæ ¼set softtabstop=4 set shiftwidth=4 set autoindent #è‡ªåŠ¨å¯¹é½\n\nå†™å®Œåï¼Œ:wq!ä¿å­˜å³å¯\n\nè¿™é‡Œæˆ‘ç»™å‡ºäº†æ³¨é‡Šï¼Œå®é™…å†™å…¥é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œè¯·å»æ‰æ³¨é‡Š\n\n6.å°†Linuxå‘½ä»¤è¡Œè®¾ç½®ä¸ºä¸­æ–‡ä»¥CentOSä¸ºä¾‹ï¼Œé»˜è®¤çš„å‘½ä»¤è¡Œæ˜¾ç¤ºæ˜¯å…¨è‹±æ–‡çš„ï¼ˆä½†è¿™ä¸ä»£è¡¨ä½ ä¸èƒ½åœ¨é‡Œé¢è®¾ç½®ä¸­æ–‡çš„æ–‡ä»¶å¤¹åå­—ï¼‰\næˆ‘ä»¬æ‰“å¼€äº‘æœåŠ¡å™¨çš„rootè´¦æˆ·ï¼ˆå¿…é¡»æ˜¯rootè´¦æˆ·ï¼‰\nlocale\n\nä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªæŒ‡ä»¤æŸ¥çœ‹ç°åœ¨çš„è¯­è¨€ï¼Œå‘ç°æ˜¯enè‹±æ–‡\n\nlocale -a\n\nä½¿ç”¨ä¸Šè¿°å‘½ä»¤æŸ¥çœ‹å½“å‰æ”¯æŒçš„è¯­è¨€ï¼Œä¼šæ˜¾ç¤ºä¸€å¤§å †ï¼Œæ»‘åˆ°æœ€åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘è¿™ä¸ªç³»ç»Ÿé‡Œé¢å·²ç»æœ‰äº†zh-CNï¼Œæ”¯æŒä¸­æ–‡ï¼\n\n\nå¦‚æœlocale -aå‘ç°æ²¡æœ‰å‡ºç°zhï¼Œé‚£å°±ä¸‹è½½ä¸­æ–‡æ”¯æŒåŒ…\n&gt;yum install kde-l10n-Chinese\n\nè…¾è®¯äº‘çš„CentOSé‡Œé¢å·²ç»æœ‰ä¸­æ–‡äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œè¿™ä¸€æ­¥æ“ä½œ\n\n\nä¿®æ”¹ç³»ç»Ÿè¯­è¨€ä¸ºä¸­æ–‡\nlocalectl set-locale LANG=zh_CN.utf8\n\né‡å¯Xshellç»ˆç«¯ï¼ˆä¸æ˜¯é‡å¯äº‘æœåŠ¡å™¨ï¼‰ï¼Œå†æ¬¡ä½¿ç”¨localeæŒ‡ä»¤æŸ¥çœ‹ï¼Œå‘ç°å·²ç»è®¾ç½®æˆäº†ä¸­æ–‡è¯­è¨€åŒ…\n\né‡å¯Xshellç»ˆç«¯ï¼ˆä¸æ˜¯é‡å¯äº‘æœåŠ¡å™¨ï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œgitè¿™é‡Œçš„æç¤ºå·²ç»å˜æˆäº†ä¸­æ–‡ã€‚ä¸ç„¶å°±æ˜¯ä¸Šæ–‡å‡ºç°è¿‡çš„çš„è‹±æ–‡é¡µé¢ğŸ‘‰å›åˆ°ä¸Šå¤´åº·åº·\n\nä¿®æ”¹Xshellä¸­æ–‡æ˜¾ç¤ºå­—ä½“å¦‚æœä½ è§‰å¾—é»˜è®¤çš„ä¸­æ–‡å­—ä½“å¾ˆéš¾çœ‹ï¼Œå¯ä»¥åœ¨Xshellä¸­ä¿®æ”¹ä¸€ä¸‹ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„æ–‡ä»¶-å½“å‰ä¼šè¯å±æ€§\n\næ‰¾åˆ°å¤–è§‚ï¼ŒæŠŠäºšæ´²å­—ä½“æ”¹æˆé»‘ä½“ï¼Œçœ‹èµ·æ¥å°±èˆ’æœå¤šäº†\n\nè¿™é‡Œè¿˜å¯ä»¥æ›´æ”¹æ¸¸æ ‡çš„æ ·å¼ï¼Œæˆ‘æ”¹æˆäº†åœ¨windowsä¸­æ›´ç†Ÿæ‚‰çš„ç«–çº¿æ ·å¼\n7.Xshellè®¾ç½®ç”¨æˆ·åæ˜¾ç¤ºé¢œè‰²\nå‚è€ƒhttps://blog.csdn.net/nmb_jiang/article/details/105195981\n\né»˜è®¤æƒ…å†µä¸‹ï¼ŒXshellæ˜¾ç¤ºçš„æœåŠ¡å™¨ç”¨æˆ·åå’Œåå­—éƒ½æ˜¯ç™½è‰²çš„\n\næ•²çš„å‘½ä»¤å¤šäº†ä¹‹åï¼Œå°±åˆ†ä¸æ¸…å•¥æ˜¯å•¥äº†ï¼Œçœ¼ç›éƒ½å¾—çæ‰\næˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸‹ï¼Œä»¥CentOSä¸ºä¾‹ï¼Œéœ€è¦ç”¨vimç¼–è¾‘å™¨æ‰“å¼€.bashrcæ–‡ä»¶\nvim .bashrc\n\nåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­ï¼Œé”®å…¥iå¼€å¯vimçš„ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨æ–‡ä»¶çš„æœ«å°¾è¾“å…¥\nPS1=&#x27;[\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]]\\$ &#x27;\n\nè¾“å…¥å®Œæ¯•åï¼ŒæŒ‰escé€€å‡ºæ’å…¥æ¨¡å¼ï¼Œè¾“å…¥:wq!ä¿å­˜è¯¥æ–‡ä»¶\nç„¶åè¿è¡Œä¸‹é¢çš„æŒ‡ä»¤ä½¿å…¶ç”Ÿæ•ˆ\nsource .bashrc\n\n\nçœ‹èµ·æ¥å°±èˆ’æœå¤šäº†\nå¦å¤–ï¼Œå»ºè®®æŠŠrootæ”¹æˆé»„è‰²+ç»¿è‰²çš„ç»„åˆï¼Œå’Œå­ç”¨æˆ·åŒºåˆ†å¼€æ¥ã€‚ä¿®æ”¹çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„\nPS1=&#x27;[\\[\\033[01;33m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;32m\\]\\w\\[\\033[00m\\]]\\$ &#x27;\n\n8.å‡ºç°is not in the sudoers fileè§£å†³æ–¹æ³•\nå½“æˆ‘ä»¬ä½¿ç”¨sudoå‘½ä»¤åˆ‡æ¢ç”¨æˆ·çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°æç¤ºä»¥ä¸‹é”™è¯¯ï¼šç”¨æˆ·å is not in the sudoers file.\n\næˆ‘ä»¬éœ€è¦æŠŠå½“å‰ç”¨æˆ·åŠ å…¥sudoçš„é…ç½®æ–‡ä»¶ä¸­\nåœ¨rootç”¨æˆ·ä¸‹ï¼Œæ‰“å¼€sudoçš„é…ç½®æ–‡ä»¶\nvim /etc/sudoers\n\næ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘ç°è…¾è®¯äº‘çš„é»˜è®¤ç”¨æˆ·lighthouseå·²ç»æ·»åŠ è¿‡è¿™ä¸ªè¯­å¥äº†ã€‚æˆ‘ä»¬åœ¨æœ€ååŠ ä¸Šxxx ALL=(ALL) ALLï¼Œå…¶ä¸­xxxä»£è¡¨ç”¨æˆ·å\n\nç»“è¯­çœ‹åˆ°è¿™é‡Œï¼Œäº‘Linuxç¼–ç¨‹å­¦ä¹ ç¯å¢ƒå°±æ­å»ºå¥½å•¦ï¼\né€Ÿé€Ÿå¼€å§‹å­¦ä¹ Linuxå‘½ä»¤è¡Œå§ï¼ğŸ‘\n\n\næœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","git"]},{"title":"ã€Linuxã€‘ç¯å¢ƒå˜é‡","url":"/2022/10/05/note_Linux/10%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/","content":"æœ¬ç¯‡åšå®¢è®°å½•äº†Linuxä¸‹ä¸€äº›æ¦‚å¿µçš„è§£é‡Šï¼Œä»¥åŠç¯å¢ƒå˜é‡çš„ç›¸å…³æ“ä½œ\n\n\n\næ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n1.æ¦‚å¿µè§£é‡Š1.1 è¿›ç¨‹ç«äº‰æ€§ç³»ç»Ÿè¿›ç¨‹çš„æ•°ç›®è¾ƒå¤šã€‚è€ŒCPUèµ„æºç­‰å…¶ä»–èµ„æºä¸å¤Ÿç”¨ï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´å­˜åœ¨ç«äº‰æ€§ï¼Œä¹Ÿå°±å‡ºç°äº†ä¼˜å…ˆçº§ï¼Œè¿™åœ¨ä¸Šç¯‡åšå®¢ä¸­æœ‰è¿‡ä»‹ç»\n1.2 è¿›ç¨‹ç‹¬ç«‹æ€§è¿›ç¨‹è¿è¡Œå…·æœ‰ç‹¬ç«‹æ€§ï¼Œä¸ä¼šå› ä¸ºæŸä¸ªè¿›ç¨‹å‡ºé”™ï¼Œè€Œå½±å“å…¶ä»–è¿›ç¨‹çš„è¿è¡Œ\næˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯å†…æ ¸ç»“æ„task_truck+ä»£ç å’Œæ•°æ®ç»„æˆçš„ã€‚è€Œlinuxç³»ç»Ÿæ˜¯é€šè¿‡è¿›ç¨‹åœ°å€ç©ºé—´æ–¹å¼æ¥ä¿è¯è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼Œé‚£æ˜¯ä¸‹ç¯‡åšå®¢ä¼šè®²åˆ°çš„å†…å®¹\n1.3 å¹¶è¡Œå¹¶è¡Œï¼šå¤šä¸ªè¿›ç¨‹åœ¨å¤šä¸ªCPUä¸‹åˆ†å‰²ï¼ŒåŒæ—¶è¿è¡Œ\n\næˆ‘ä»¬ä¸€èˆ¬çš„ç”µè„‘éƒ½æ˜¯åªæœ‰1ä¸ªcpuï¼Œé‚£æ˜¯æ€ä¹ˆåšåˆ°å¤šä¸ªè¿›ç¨‹è¿è¡Œçš„ï¼Ÿ\næ³¨æ„ï¼šå¤šä¸ªè¿›ç¨‹éƒ½åœ¨ç³»ç»Ÿä¸­è¿è¡Œâ‰ å¤šä¸ªè¿›ç¨‹åœ¨ç³»ç»Ÿä¸­åŒæ—¶è¿è¡Œã€‚è¦æƒ³çŸ¥é“è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œéœ€è¦äº†è§£å¹¶å‘çš„æ¦‚å¿µ\n1.4 å¹¶å‘å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿéƒ½æ˜¯åˆ†æ—¶çš„ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™æ¯ä¸€ä¸ªè¿›ç¨‹èµ‹äºˆä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­ï¼Œå¯ä»¥è°ƒç”¨åˆ°æ¯ä¸€ä¸ªéœ€è¦è¿è¡Œçš„è¿›ç¨‹ã€‚\nè¿™æ ·ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œå¤šä¸ªè¿›ç¨‹ä¼šé€šè¿‡äº¤å‰è¿è¡Œçš„æ–¹å¼ï¼Œè®©æ¯ä¸€ä¸ªè¿›ç¨‹çš„ä»£ç ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…éƒ½èƒ½å¾—åˆ°è¿è¡Œ\n\næ¯”å¦‚æ¯ä¸€ä¸ªè¿›ç¨‹è¿è¡Œ10msï¼Œå‡è®¾æœ‰10ä¸ªè¿›ç¨‹éœ€è¦è¿è¡Œï¼Œé‚£ä¹ˆåœ¨1så†…ï¼Œè¿™10ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«è¿è¡Œ10æ¬¡ã€‚1s=1000ms\n\ncpuè¿›è¡Œå¤šä¸ªè¿›ç¨‹çš„å¿«é€Ÿäº¤æ›¿è¿è¡Œï¼Œä»¥å®ç°æˆ‘ä»¬çœ‹åˆ°çš„å•cpuè¿è¡Œå¤šä¸ªè¿›ç¨‹çš„æƒ…å†µ\nè¿™ç§æƒ…å†µå°±å«åšå¹¶å‘\n\n1.5  è¿›ç¨‹ä¼˜å…ˆçº§ç®¡ç†æ“ä½œç³»ç»Ÿæ­£åœ¨è¿è¡Œä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹çš„æ—¶å€™ï¼Œçªç„¶æ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§æ•°æ®æ€ä¹ˆåŠï¼Ÿ\n\næ“ä½œç³»ç»Ÿæ”¯æŒä¸åŒä¼˜å…ˆçº§è¿›ç¨‹çš„å­˜åœ¨\nåŒä¸€ä¸ªä¼˜å…ˆçº§çš„è¿›ç¨‹å¯ä»¥å­˜åœ¨å¤šä¸ª\næ“ä½œç³»ç»Ÿæ˜¯ç”¨é˜Ÿåˆ—æ¥ç®¡ç†è¿›ç¨‹çš„ï¼Œé˜Ÿåˆ—åªæ”¯æŒæ”¯æŒå°¾åˆ å°¾æ’\n\nè¿™ç§æƒ…å†µè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå¦‚æœç»™é˜Ÿåˆ—å¤´æ’ï¼Œé‚£ä¸å°±ç ´åäº†é˜Ÿåˆ—çš„å±æ€§äº†ï¼Ÿ\nå®é™…ä¸Šï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯ç”¨å•ä¸€é˜Ÿåˆ—æ¥è¿›è¡Œç®¡ç†çš„ï¼Œè€Œæ˜¯ç”¨äº†ä¸€ä¸ªå“ˆå¸Œæ¡¶æ¥è¿›è¡Œå¤„ç†\n\nå¯ä»¥ç†è§£ä¸ºå“ˆå¸Œæ¡¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåé¢é“¾æ¥äº†ä¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹\nå½“ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹éœ€è¦è¿è¡Œçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåªéœ€è¦æ”¹å˜cpuå½“å‰è¿è¡Œé˜Ÿåˆ—åœ¨å“ˆå¸Œæ¡¶é‡Œé¢çš„æŒ‡å‘ï¼Œå³å¯é©¬ä¸Šå®Œæˆé«˜ä½ä¼˜å…ˆçº§è¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢\næ“ä½œç³»ç»Ÿè¿˜ä¼šç®¡ç†ä¸€ä¸ªä½å›¾ï¼Œç”¨äºæ ‡è¯†æŸä¸€ä¸ªä¼˜å…ˆçº§å†…æ˜¯å¦å­˜åœ¨è¿›ç¨‹\n\nå“ˆå¸Œå’Œä½å›¾è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„éƒ½ä¼šåœ¨C++çš„åšå®¢ä¸­è®²è§£\n\né™¤äº†ä½å›¾å’Œå“ˆå¸Œè¡¨ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¼šç®¡ç†ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºæ ‡è¯†ç›®å‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹å“ˆå¸Œæ¡¶activeï¼Œä»¥åŠæ–°è¿›ç¨‹çš„ç®¡ç†æ¡¶old\nstruct runqueue&#123;\thash_queue* active;\thash_queue* old;&#125;;\n\nå½“å‡ºç°æ–°è¿›ç¨‹çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¸ä¼šæŠŠå®ƒç›´æ¥é“¾æ¥åˆ°activeé‡Œé¢ï¼Œè€Œæ˜¯æ”¾å…¥oldä¸­ï¼›\nactiveå†…éƒ¨çš„è¿›ç¨‹è¿è¡Œå®Œäº†ä¹‹åï¼Œåªéœ€è¦swapä¸€ä¸‹active/oldæŒ‡é’ˆï¼Œå³å¯å®Œæˆæ–°è¿›ç¨‹è¡¨å’Œè¿è¡Œå®Œçš„æ—§è¡¨ä¹‹é—´çš„äº¤æ¢ï¼\n\nè¿™ç§è°ƒåº¦ç®—æ³•ä¹Ÿè¢«ç§°ä¸ºå¤§O(1)è°ƒåº¦æ³•\n\n1.6 è¿›ç¨‹é—´åˆ‡æ¢CPUå­˜åœ¨å¯„å­˜å™¨ï¼Œè¿™äº›å¯„å­˜å™¨å‚¨å­˜äº†è¿›ç¨‹çš„ä¸´æ—¶æ•°æ®\n\nå¯„å­˜å™¨åˆ†ä¸ºå¯è§å¯„å­˜å™¨ï¼ˆeax&#x2F;ebxï¼‰å’Œä¸å¯è§å¯„å­˜å™¨\n\nå½“è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå„ç§ä¸´æ—¶æ•°æ®\nint test()&#123;\tint a = 10;\treturn a;&#125;int main()&#123;    int b = test();    return 0;&#125;\n\næˆ‘ä»¬çŸ¥é“ï¼Œå®šä¹‰åœ¨å‡½æ•°testä¸­çš„aæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå‡ºäº†ä½œç”¨åŸŸå°±ä¼šé”€æ¯ï¼Œé‚£ä¹ˆmainå‡½æ•°é‡Œé¢çš„bæ˜¯æ€ä¹ˆæ‹¿åˆ°testçš„è¿”å›å€¼çš„ï¼Ÿ\nè¿™é‡Œå°±ç”¨åˆ°äº†å¯„å­˜å™¨ï¼šaçš„å€¼ä¼šå…ˆæ”¾å…¥å¯„å­˜å™¨ä¸­ï¼Œé”€æ¯äº†ä¹‹åï¼Œå†æŠŠå¯„å­˜å™¨é‡Œé¢çš„å€¼èµ‹å€¼ç»™b\nå’Œå†…å­˜ä¸€æ ·ï¼ŒCPUåªæœ‰ä¸€å¥—å¯„å­˜å™¨ã€‚è¿™ä¸€å¥—å¯„å­˜å™¨åœ¨è¿è¡Œä¸åŒè¿›ç¨‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¿å­˜ä¸åŒçš„ä¸´æ—¶æ•°æ®\n\nè¿™æ—¶å€™å¦‚æœæ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹Aï¼Œç›´æ¥è¦†ç›–äº†æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹BåŠå…¶å¯„å­˜å™¨ä¸­çš„æ•°æ®ï¼Œå°±å¯èƒ½å¯¼è‡´è¿›ç¨‹Bå­˜åœ¨å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¸¢å¤±ï¼Œå¯¼è‡´Bæ— æ³•ç»§ç»­è¿è¡Œ\n\næ‰€ä»¥ï¼Œåœ¨è¿›ç¨‹çš„task_structç»“æ„ä½“ä¸­ï¼Œå°±æœ‰ä¸€ä¸ªä¸“é—¨çš„æˆå‘˜ç”¨äºä¿å­˜è¿›ç¨‹çš„ä¸Šä¸‹æ–‡æ•°æ®\n\nä¸Šä¸‹æ–‡æ•°æ®ï¼šè¿›ç¨‹åœ¨è¿è¡Œä¸­äº§ç”Ÿçš„å„ç§ä¸´æ—¶æ•°æ®\nå½“è¿›ç¨‹è¢«å‰¥ç¦»çš„æ—¶å€™ï¼Œéœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡æ•°æ®\nå½“è¿›ç¨‹æ¢å¤è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åŠ è½½ä¸Šä¸‹æ–‡æ•°æ®\n\n\nå…³äºè¿›ç¨‹pcbå’Œtask_structçš„å†…å®¹å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ è¿›ç¨‹æ¦‚å¿µ\n\n2.ç¯å¢ƒå˜é‡2.1 å¼•å…¥ç¯å¢ƒå˜é‡å½“æˆ‘ä»¬è¿è¡Œè‡ªå·±ç¼–è¯‘çš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å¸¦ä¸Š./æŒ‡å®šè·¯å¾„\n\nä½¿ç”¨fileå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿçš„ç›¸å…³æŒ‡ä»¤ï¼Œä½ ä¼šå‘ç°å®ƒä»¬å’Œæˆ‘ä»¬è‡ªå·±å†™çš„mytestæœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªexecutableçš„å¯æ‰§è¡Œæ–‡ä»¶\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file /bin/ls/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=c8ada1f7095f6b2bb7ddc848e088c2d615c3743e, stripped[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file /bin/gcc/bin/gcc: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=84ea48c51fa70f8cd586b7801bc655487156db7b, stripped[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file mytestmytest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=db352023d208d9f48899641c3536a8c13b7bc7bf, not stripped\n\né‚£ä¸ºä½•è¿è¡Œè¯¸å¦‚ls pwd gccç­‰ç­‰ç³»ç»Ÿå‘½ä»¤çš„æ—¶å€™ï¼Œä¸éœ€è¦åœ¨å‰é¢å¸¦ä¸Š./è·¯å¾„æ¥è¿è¡Œå‘¢ï¼Ÿ\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ mytest-bash: mytest: command not found[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ lsmakefile  mytest  mytest.c\n\nè¿™æ˜¯å› ä¸ºï¼šæŒ‡å‘ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå‰ææ˜¯éœ€è¦æ‰¾åˆ°å®ƒï¼\nlinuxç³»ç»Ÿåªèƒ½æ‰¾åˆ°å®ƒè‡ªå·±é¢„è®¾å¥½çš„å‘½ä»¤ï¼Œæ‰¾ä¸åˆ°æˆ‘ä»¬çš„mytest\nåœ¨linuxå‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥envå³å¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡\n\nå…¶ä¸­PATHå°±æ˜¯å¯æ‰§è¡Œç¨‹åºå­˜æ”¾çš„è·¯å¾„ï¼ç³»ç»Ÿå°±æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åºçš„\n2.2 æ·»åŠ åˆ é™¤ç¯å¢ƒå˜é‡åˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ·»åŠ ç¯å¢ƒå˜é‡ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„bashå‘½ä»¤è¡Œé‡Œé¢æ˜¯å¯ä»¥å®šä¹‰å˜é‡çš„ï¼Œå˜é‡åˆ†ä¸ºä¸¤ç§ç±»å‹\n\næœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨ï¼‰\nç¯å¢ƒå˜é‡ï¼ˆå…¨å±€ï¼‰\n\nç›´æ¥ä½¿ç”¨å˜é‡å=å€¼çš„æ–¹å¼ï¼Œå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæœ¬åœ°å˜é‡ã€‚ä½¿ç”¨echoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ä¸ªæœ¬åœ°å˜é‡ã€‚è¿™æ—¶å€™æˆ‘ä»¬ç”¨env | grep å˜é‡ååœ¨ç¯å¢ƒå˜é‡é‡Œé¢æŸ¥æ‰¾ï¼Œä¼šå‘ç°å½“å‰çš„ç¯å¢ƒå˜é‡é‡Œé¢æ²¡æœ‰è¿™ä¸ªä¸œè¥¿\n[muxue@bt-7274:~]$ aaaa=1234[muxue@bt-7274:~]$ echo $aaaa1234[muxue@bt-7274:~]$ env | grep aaaa[muxue@bt-7274:~]$\n\nè¿™æ—¶å€™éœ€è¦ç”¨exportå‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªç¯å¢ƒå˜é‡\n[muxue@bt-7274:~]$ export bbbb=4321[muxue@bt-7274:~]$ env | grep bbbbbbbb=4321\n\næˆ–è€…å¯ä»¥å¯¼å…¥å½“å‰çš„æœ¬åœ°å˜é‡\n[muxue@bt-7274:~]$ export aaaa[muxue@bt-7274:~]$ env | grep aaaaaaaa=1234\n\nåˆ é™¤çš„æ—¶å€™åˆ™ä½¿ç”¨unsetå‘½ä»¤å–æ¶ˆç¯å¢ƒå˜é‡\n[muxue@bt-7274:~]$ unset bbbb[muxue@bt-7274:~]$ env | grep bbbb[muxue@bt-7274:~]$ \n\næŸ¥çœ‹ç¯å¢ƒå˜é‡\necho: æ˜¾ç¤ºæŸä¸ªç¯å¢ƒå˜é‡å€¼\nexport: è®¾ç½®ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡\nenv: æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡\nunset: æ¸…é™¤ç¯å¢ƒå˜é‡\nset: æ˜¾ç¤ºæœ¬åœ°å®šä¹‰çš„shellå˜é‡å’Œç¯å¢ƒå˜é‡\n\necho $ç¯å¢ƒå˜é‡å #æŸ¥çœ‹ç¯å¢ƒå˜é‡set | less #æŸ¥çœ‹æ‰€æœ‰çš„shellå˜é‡å’Œç¯å¢ƒå˜é‡\n\nè®¤è¯†ä¸€äº›ç¯å¢ƒå˜é‡\nUSERï¼šå½“å‰ç™»å½•çš„ç”¨æˆ·\nHOMEï¼šå½“å‰ç”¨æˆ·çš„å·¥ä½œè·¯å¾„\nLANGï¼šå½“å‰çš„è¯­è¨€å’Œç¼–ç è®¾å®š\nPATHï¼šå¯æ‰§è¡Œå‘½ä»¤çš„è·¯å¾„\nSHELLï¼šå½“å‰ä½¿ç”¨çš„å‘½ä»¤è¡Œæ˜¯å•¥\nLOGNAMEï¼šå½“å‰ç™»å½•çš„ç”¨æˆ·å\nPWDï¼šå½“å‰æ‰€å¤„è·¯å¾„\nOLDPWDï¼šä¸Šä¸€ä¸ªè·¯å¾„ï¼Œä½¿ç”¨cd -è·³å›ä¸Šä¸€ä¸ªè·¯å¾„\nHISTSIZEï¼šç³»ç»Ÿä¼šè®°å½•çš„å†å²å‘½ä»¤æ¡æ•°\n\næˆ‘ä»¬å¯ä»¥ç”¨historyå‘½ä»¤æŸ¥çœ‹ä¹‹å‰è¿è¡Œè¿‡çš„å‘½ä»¤ï¼Œè¿™é‡Œé¢ä¿å­˜çš„æ­£å¥½æ˜¯3000æ¡ï¼Œå’Œç¯å¢ƒå˜é‡HISTSIZEçš„è®¾ç½®ä¸€è‡´ï¼\n[muxue@bt-7274:~]$ env | grep $HISTSIZEHISTSIZE=3000[muxue@bt-7274:~]$ history | wc --l3000\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»Ÿé¢„è½½çš„ç¯å¢ƒå˜é‡éƒ½æ˜¯åœ¨é…ç½®æ–‡ä»¶é‡Œé¢çš„ã€‚å½“å‰æˆ‘ä»¬å¯¹ç¯å¢ƒå˜é‡åšçš„ä»»ä½•æ“ä½œéƒ½åªä¼šä¸´æ—¶ä¿å­˜ã€‚å…³é—­å½“å‰çš„å‘½ä»¤è¡Œé‡æ–°å¼€ä¸€ä¸ªï¼Œä¹‹å‰è®¾ç½®çš„ç¯å¢ƒå˜é‡å°±ä¼šæ¶ˆå¤±\n[muxue@bt-7274:~]$ cat /etc/bashrc\n\nç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸º/etc/bashrcï¼Œç”¨æˆ·çš„åˆ™ä¸ºå·¥ä½œç›®å½•ä¸‹çš„.bashrcä»¥åŠ.bash_profile\n\n2.3 ç¯å¢ƒå˜é‡PATHä½¿ç”¨echo $PATHæŸ¥çœ‹å½“å‰ç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„\nè¿™é‡Œçš„è·¯å¾„éƒ½ä»¥:ä½œä¸ºåˆ†å‰²ï¼ŒlinuxæŸ¥æ‰¾å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨ä¸‹é¢çš„è¿™äº›è·¯å¾„é‡Œé¢æŸ¥æ‰¾\n[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin\n\né™¤äº†ç›´æ¥ä½¿ç”¨lsï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è·¯å¾„çš„æ–¹å¼æ¥è°ƒç”¨ls\n[muxue@bt-7274:~]$ /usr/bin/ls bin  git  install.sh  kook  mon\n\nè€Œå¦‚æœæƒ³è®©ç³»ç»Ÿèƒ½æ‰¾åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºï¼Œå°±å¯ä»¥ç›´æ¥æŠŠå¯æ‰§è¡Œç¨‹åºå¤åˆ¶åˆ°è¿™äº›è·¯å¾„ä¸­ï¼\nç»™PATHä¸­æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ cp mytest ~/bin[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ mytesthello world!hello world!\n\næ¯”å¦‚ç°åœ¨ï¼Œæˆ‘æŠŠmytestè¿™ä¸ªå¯æ‰§è¡Œç¨‹åºå¤åˆ¶åˆ°äº†~/binä¹Ÿå°±æ˜¯/home/muxue/binçš„è·¯å¾„ä¸‹ï¼Œæ­¤æ—¶ç›´æ¥ä½¿ç”¨mytestå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„å‘½ä»¤äº†ï¼\né™¤äº†è¿™ç§åŠæ³•ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå½“å‰çš„è·¯å¾„å†™å…¥PATHç¯å¢ƒå˜é‡ä¸­\n[muxue@bt-7274:~]$ export PATH=$PATH:/home/muxue/git/raspi/code/test#è¿™æ ·å†™æ˜¯åœ¨åŸæœ¬çš„pathåé¢è¿½åŠ å†…å®¹ã€‚ä¸èƒ½ç›´æ¥path=è‡ªå·±çš„è·¯å¾„ï¼Œä¼šç›´æ¥è¦†ç›–[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin:/home/muxue/git/raspi/code/test\n\nè¿™æ—¶å€™ç›´æ¥æ‰§è¡Œmytestä¹ŸæˆåŠŸäº†ï¼\n[muxue@bt-7274:~]$ mytesthello world!hello world!hello world!\n\nå‰é¢æåˆ°äº†æˆ‘ä»¬è®¾ç½®çš„è¿™ä¸ªç¯å¢ƒå˜é‡éƒ½æ˜¯ä¸´æ—¶çš„ï¼Œæ‰€ä»¥é‡å¯äº†ä¹‹åï¼Œè‡ªå·±è®¾ç½®çš„è¿™ä¸ªè·¯å¾„ä¹Ÿä¼šæ¶ˆå¤±\n[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin\n\næ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä¸å»ºè®®åœ¨linuxç³»ç»Ÿè·¯å¾„ä¸­å®‰è£…è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºï¼Œå› ä¸ºè¿™æ ·ä¼šæ±¡æŸ“ç³»ç»Ÿçš„å‘½ä»¤ç¯å¢ƒï¼\n3.C&#x2F;C++è·å–ç¯å¢ƒå˜é‡3.1 mainå‡½æ•°çš„å‚æ•°ä¹‹å‰ä¸€ç›´æ²¡æœ‰äº†è§£è¿‡è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼ŒC&#x2F;C++çš„mainå‡½æ•°æ˜¯å¯ä»¥å¸¦å‚æ•°çš„ï¼\n#include&lt;stdio.h&gt;//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²int main(int arg,char* argv[])&#123;    printf(&quot;arg: %d\\n&quot;,arg);    for(int i =0;i&lt;arg;i++)    &#123;        printf(&quot;argv[%d]: %s\\n&quot;,i,argv[i]);    &#125;    return 0;&#125;\n\n\næœ‰äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å®ƒå†™ä¸€ä¸ªå‘½ä»¤è¡Œç‰ˆæœ¬çš„è®¡ç®—å™¨\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;//mainå‡½æ•°å¯ä»¥å¸¦å‚æ•°//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²int main(int arg,char* argv[],char *envs[])&#123;    if(arg != 4)    &#123;        printf(&quot;Usage: %s [-a|-s|-m|-d] first second\\n&quot;, argv[0]);        return 0;    &#125;    int x = atoi(argv[2]);    int y = atoi(argv[3]);    if(strcmp(&quot;-a&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d+%d=%d\\n&quot;,x, y, x + y);    &#125;    else if(strcmp(&quot;-s&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d-%d=%d\\n&quot;,x, y, x - y);    &#125;    else if(strcmp(&quot;-m&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d*%d=%d\\n&quot;,x, y, x * y);    &#125;    else if(strcmp(&quot;-d&quot;, argv[1]) ==0 &amp;&amp; y != 0)    &#123;        printf(&quot;%d/%d=%d\\n&quot;,x, y, x / y);    &#125;    else    &#123;        printf(&quot;Usage: %s [-a|-s|-m|-d] first second\\n&quot;, argv[0]);    &#125;    return 0;&#125;\n\nå®ç°éå¸¸ç®€å•ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ğŸ‘‡\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ gcc test.c -o test -std=c99[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -a 10 2010+20=30[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -s 10 2010-20=-10[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -m 10 3010*30=300[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -d 30 1030/10=3[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test 1 1 1 1 Usage: ./test [-a|-s|-m|-d] first second\n\nä¸Šé¢è¿™ä¸ªå°ç¨‹åºæ¼”ç¤ºäº†mainå‡½æ•°çš„å‚æ•°çš„ä½œç”¨ã€‚\nçœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…ä½ åº”è¯¥ä¸éš¾ç†è§£linuxç³»ç»Ÿçš„å‘½ä»¤æ˜¯å¦‚ä½•ä½¿ç”¨å‚æ•°çš„ï¼Œè¯¸å¦‚ls -lç­‰ç­‰é€‰é¡¹ï¼Œå…¶å®éƒ½æ˜¯é€šè¿‡mainå‡½æ•°çš„å‚æ•°å®ç°çš„ï¼\né€šè¿‡mainå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥è®©åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¾æ®å‘½ä»¤è¾“å‡ºä¸åŒçš„ç»“æœï¼\n3.2 ä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è·å–ç¯å¢ƒå˜é‡é™¤äº†ä¸Šé¢æåˆ°çš„mainå‡½æ•°å‰ä¸¤ä¸ªå‚æ•°ï¼Œå®é™…ä¸Šmainå‡½æ•°è¿˜å¯ä»¥å¸¦ç¬¬ä¸‰ä¸ªå‚æ•°ï¼\n//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²//ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºå¯¼å…¥ç¯å¢ƒå˜é‡ï¼int main(int arg,char* argv[],char *envs[])&#123;    for(int i =0;envs[i];i++)    &#123;        printf(&quot;envs[%d]: %s\\n&quot;,i,envs[i]);    &#125;\treturn 0;&#125;\n\nå› ä¸ºenvsæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡åˆ¤ç©ºæ¥ç»ˆæ­¢forå¾ªç¯\n\nåœ¨è¿™ä¸ªæ•°ç»„çš„æœ€åï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ‰§è¡Œçš„å‘½ä»¤ä¹Ÿè¢«å†™å…¥äº†ç¯å¢ƒå˜é‡\n\né™¤äº†ä¸Šé¢è¿™ä¸ªåŠæ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥è·å–ç¯å¢ƒå˜é‡\nenvironå¤–éƒ¨å¯¼å…¥ç¯å¢ƒå˜é‡Cè¯­è¨€æä¾›äº†ä¸€ä¸ªenvironæ¥å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œå…¶ä½œç”¨å’Œmainå‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„\n\nextern char ** environ;printf(&quot;get env from [environ]\\n&quot;);for(int i = 0; environ[i]; i++)&#123;    printf(&quot;%d: %s\\n&quot;, i, environ[i]);&#125;\n\n\nå…¶è¾“å‡ºçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„\ngetenvå‡½æ•°man getenv\n\n\nè¿™ä¸ªå‡½æ•°å°±èƒ½å®ç°ä¸€äº›éªšæ“ä½œï¼Œæ¯”å¦‚å†™ä¸€ä¸ªåªæœ‰æˆ‘è‡ªå·±å¯ä»¥è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶\nint main(int arg,char* argv[],char *envs[])&#123;    char* user = getenv(&quot;USER&quot;);    if(strcasecmp(user,&quot;muxue&quot;)!=0)//strcasecmpå¿½ç•¥å¤§å°å†™    &#123;        printf(&quot;æƒé™ç¦æ­¢ï¼\\n&quot;);        return -1;    &#125;    printf(&quot;æˆåŠŸæ‰§è¡Œï¼\\n&quot;);    return 0;&#125;\n\né€šè¿‡getenvå‡½æ•°è·å–åˆ°ç¯å¢ƒå˜é‡ä¸­çš„USERï¼Œåˆ¤æ–­å…¶ä¸æˆ‘è‡ªå·±è®¾å®šçš„useræ˜¯å¦ç›¸åŒã€‚å¦‚æœä¸åŒå°±æ‹’ç»æ‰§è¡Œï¼Œç›¸åŒæ‰æˆåŠŸæ‰§è¡Œ\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./testæˆåŠŸæ‰§è¡Œï¼[root@bt-7274:/home/muxue/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]# ./testæƒé™ç¦æ­¢ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œå“ªæ€•æ˜¯rootç”¨æˆ·ä¹Ÿæä¸æ¥è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºï¼\n\n4.å…³äºæœ¬åœ°å˜é‡çš„è¯´æ˜åœ¨2.2ä¸­æåˆ°äº†æœ¬åœ°å˜é‡å’Œç¯å¢ƒå˜é‡çš„åŒºåˆ«\n\næœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨ï¼‰\nç¯å¢ƒå˜é‡ï¼ˆå…¨å±€ï¼‰\n\næ‰€è°“çš„æœ¬åœ°å˜é‡ï¼Œå…¶å®æ˜¯bashå†…éƒ¨å®šä¹‰çš„å˜é‡ã€‚\næˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£çš„æ˜¯ï¼Œlinuxä¸‹å¤§éƒ¨åˆ†çš„è¿›ç¨‹æˆ–å‘½ä»¤éƒ½æ˜¯ä»¥å­è¿›ç¨‹æ–¹å¼è¿è¡Œçš„ï¼Œå…¶çˆ¶è¿›ç¨‹éƒ½æ˜¯å½“å‰æ‰“å¼€çš„bash\nç”±æ­¤å¯çŸ¥ï¼Œbashå†…éƒ¨çš„æœ¬åœ°å˜é‡ï¼Œå¹¶ä¸ä¼šè¢«è¿™äº›å­è¿›ç¨‹æ‰€ç»§æ‰¿\nè€Œç¯å¢ƒå˜é‡å…·æœ‰å…¨å±€å±æ€§ï¼Œå¯ä»¥è¢«å­è¿›ç¨‹ç»§æ‰¿å¹¶è·å–ï¼\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œexport/echoä¹Ÿæ˜¯å‘½ä»¤ã€‚å¦‚æœå®ƒä»¬ä¹Ÿæ˜¯å­è¿›ç¨‹ï¼Œé‚£å®ƒä»¬æ˜¯æ€ä¹ˆè·å–åˆ°bashå†…éƒ¨çš„æœ¬åœ°å˜é‡ï¼Œå¹¶å°†å…¶å¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­çš„å‘¢ï¼Ÿ\nnopeï¼å®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ç”±bashè‡ªå·±æ‰§è¡Œçš„ï¼ˆè°ƒç”¨è‡ªå·±çš„å¯¹åº”çš„å‡½æ•°å®ŒæˆåŠŸèƒ½ï¼‰æˆ‘ä»¬æŠŠè¿™ç§å‘½ä»¤ç§°ä½œå†…å»ºå‘½ä»¤\nç»“è¯­å…³äºç¯å¢ƒå˜é‡çš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±OVERå•¦ã€‚æœ¬åšå®¢æ˜¯æˆ‘çš„è¯¾å ‚ç¬”è®°ï¼Œéš¾å…ä¼šæœ‰é—®é¢˜ï¼Œè¿˜è¯·å„ä½å¤§ä½¬æŒ‡å‡º~\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è¿›ç¨‹åœ°å€ç©ºé—´","url":"/2022/10/07/note_Linux/11%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4_%E9%A1%B5%E8%A1%A8/","content":"æœ¬ç¯‡åšå®¢æ¥è®¤è¯†ä¸€ä¸‹linuxä¸‹ç¨‹åºåœ°å€ç©ºé—´çš„æ¦‚å¿µ\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n[TOC]\n1.å¼•å…¥ç¨‹åºåœ°å€ç©ºé—´ä¹‹å‰å­¦ä¹ C/C++çš„æ—¶å€™ï¼Œå¤šå°‘åº”è¯¥éƒ½å¬è¿‡æ ˆåŒº&#x2F;å †åŒº&#x2F;é™æ€åŒº&#x2F;å…¨å±€åŒºçš„æ¦‚å¿µï¼Œè¿˜æœ‰ä¸€å¼ å¾ˆç»å…¸çš„æ¼”ç¤ºå›¾ï¼Œå¤§éƒ¨åˆ†è®²è§£è¿™å‡ ä¸ªå†…å­˜åŒºåŸŸçš„å›¾ç‰‡éƒ½å’Œä¸‹å›¾ç±»ä¼¼\n\nä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œçš„ç¨‹åºåœ°å€ç©ºé—´ï¼Œæ˜¯æˆ‘ä»¬çš„ç‰©ç†å†…å­˜ä¸Šçš„ä¸œè¥¿å—ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼\n\nç¨‹åº&#x2F;è¿›ç¨‹åœ°å€ç©ºé—´æ˜¯æ“ä½œç³»ç»Ÿä¸Šçš„æ¦‚å¿µï¼Œå®ƒå’Œæˆ‘ä»¬ç‰©ç†å†…å­˜æœ¬èº«ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿\n\n\n1.1 éªŒè¯ä¸åŒåŒºåŸŸç”¨ä¸‹é¢è¿™ä¸ªä»£ç æ¥ç®€å•éªŒè¯ä¸€ä¸‹ä¸åŒåŒºåŸŸä¸Šçš„åŒºåˆ«\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;int un_global_val;//æœªåˆå§‹åŒ–å…¨å±€å˜é‡int global_val=100;//å·²åˆå§‹åŒ–å…¨å±€å˜é‡//mainå‡½æ•°çš„å‚æ•°int main(int argc, char *argv[], char *env[])&#123;    printf(&quot;code addr         : %p\\n&quot;, main);    printf(&quot;init global addr  : %p\\n&quot;, &amp;global_val);    printf(&quot;uninit global addr: %p\\n&quot;, &amp;un_global_val);    char *m1 = (char*)malloc(100);    char *m2 = (char*)malloc(100);    char *m3 = (char*)malloc(100);    char *m4 = (char*)malloc(100);    int a = 100;    static int s = 100;    printf(&quot;heap addr         : %p\\n&quot;, m1);    printf(&quot;heap addr         : %p\\n&quot;, m2);    printf(&quot;heap addr         : %p\\n&quot;, m3);    printf(&quot;heap addr         : %p\\n&quot;, m4);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m1);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m2);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m3);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m4);    printf(&quot;stack addr a      : %p\\n&quot;, &amp;a);    printf(&quot;stack addr s      : %p\\n&quot;, &amp;s);    printf(&quot;\\n&quot;);    for(int i = 0; i &lt; argc; i++)    &#123;        printf(&quot;argv addr         : %p\\n&quot;, argv[i]);    &#125;    printf(&quot;\\n&quot;);    for(int i =0 ; env[i];i++)    &#123;        printf(&quot;env addr          : %p\\n&quot;, env[i]);    &#125;    return 0;&#125;\n\n\né€šè¿‡ä¸Šé¢çš„æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°å…¶ç»“æœå’Œæ–‡ç« æœ€å¼€å§‹çš„é‚£å¼ å›¾ç›¸åŒã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹å‘ä¸Š/å‘ä¸‹çš„å«ä¹‰\n\nå‘ä¸Šå¢é•¿ï¼šå‘åœ°å€å¢å¤§çš„æ–¹å‘å¢é•¿\nå‘ä¸‹å¢é•¿ï¼šå‘åœ°å€å‡å°çš„æ–¹å‘å¢é•¿\n\nä¸è¿‡é‚£ä¸ªå›¾ç‰‡å†…éƒ¨è¿˜å°‘äº†ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚å‘½ä»¤è¡Œå‚æ•°å’Œç¯å¢ƒå˜é‡å…¶å®æ˜¯å­˜æ”¾åœ¨æ ˆåŒºä¹‹ä¸Šçš„ã€‚è¡¥å…¨ä¹‹åçš„å›¾ç‰‡å¦‚ä¸‹\n\nå…¶ä¸­æˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œæ ˆåŒºå’Œå †åŒºä¹‹é—´æœ‰éå¸¸å¤§çš„å†…å­˜ç©ºéš™\nheap addr         : 0x1a140f0heap addr         : 0x1a14160stack addr        : 0x7ffe6671ec60stack addr        : 0x7ffe6671ec58\n\nå› ä¸ºåœ¨C&#x2F;C++ä¸­å®šä¹‰çš„å˜é‡éƒ½æ˜¯åœ¨æ ˆä¸Šä¿å­˜çš„ï¼Œæ ˆå‘ä¸‹å¢é•¿ï¼Œå…ˆå®šä¹‰çš„å˜é‡åœ°å€è¾ƒé«˜ï¼\nint a = 100;static int s = 100;\n\nå…³äºå‡½æ•°ä¸­staticä¿®é¥°çš„å˜é‡ï¼Œå¯ä»¥çœ‹åˆ°å…¶åœ°å€ç©ºé—´å±äºå…¨å±€é™æ€åŒºã€‚è™½ç„¶åœ¨å‡½æ•°ä¸­ç”¨staticä¿®é¥°æ˜¯é™åˆ¶å…¶åªèƒ½åœ¨è¯¥å‡½æ•°å†…è®¿é—®ï¼Œä½†æ˜¯è¯¥å˜é‡çš„å£°æ˜å‘¨æœŸæ˜¯è·Ÿéšæ•´ä¸ªç¨‹åºçš„ï¼\nstack addr a      : 0x7ffe6671ec44stack addr s      : 0x601048\n\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬ä¹Ÿæ²¡çœ‹çœ‹å‡ºæ¥ç¨‹åºåœ°å€ç©ºé—´åœ¨å“ªå„¿å•Šï¼Ÿ\n1.2 forkæ„ŸçŸ¥åœ°å€ç©ºé—´çš„å­˜åœ¨ä¸‹é¢å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„forkä»£ç æ¥ç¡®è®¤ç¨‹åºåœ°å€ç©ºé—´çš„å­˜åœ¨ï¼\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    int test = 10;    int ret = fork();    if(ret == 0)    &#123;        while(1)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%d,ppid:%d,test:%d,&amp;test: %p\\n\\n&quot;,getpid(),getppid(),test,&amp;test);            sleep(1);        &#125;    &#125;    else    &#123;            while(1)        &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%d,ppid:%d,test:%d,&amp;test: %p\\n\\n&quot;,getpid(),getppid(),test,&amp;test);            sleep(1);        &#125;    &#125;           return 0;&#125;\n\nä¾æ—§æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªforkä»£ç ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒäºŒè€…æ‰“å°çš„ç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼\n\nå¯å¦‚æœæˆ‘ä»¬åœ¨å­è¿›ç¨‹ä¸­ä¿®æ”¹ä¸€ä¸‹testå‘¢ï¼Ÿ\n\nè¿™æ—¶å€™å°±ä¼šå‘ç°ä¸€ä¸ªç¦»è°±çš„ç°è±¡ï¼šå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹æ‰“å°çš„testå€¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯å…¶åœ°å€å´å®Œå…¨ç›¸åŒï¼\nå¦‚æœæˆ‘ä»¬åœ¨C/C++ä¸­ä½¿ç”¨çš„åœ°å€å°±æ˜¯ç‰©ç†åœ°å€ï¼Œæ˜¯ä¸å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µçš„ï¼æ€ä¹ˆå¯èƒ½åœ¨ç‰©ç†å†…å­˜çš„åŒä¸€ä¸ªåœ°å€è®¿é—®å‡ºä¸¤ä¸ªä¸åŒçš„ç»“æœå‘¢ï¼Ÿ\n\nå°±å¥½æ¯”å¼ ä¸‰å’Œæå››åœ¨åŒä¸€å¤©çš„åŒä¸€æ—¶é—´å»äº†AAè·¯30å·è¿™ä¸ªåœ°å€ï¼Œä¸å¯èƒ½ä¼šå‡ºç°å¼ ä¸‰å»äº†å‘ç°æ˜¯è¶…å¸‚ï¼Œè€Œæå››å»äº†å‘ç°æ˜¯åŒ»é™¢çš„æƒ…å†µ\n\nè¿™ä¾¿å‘Šè¯‰æˆ‘ä»¬äº†ç¨‹åºåœ°å€ç©ºé—´çš„å­˜åœ¨ï¼Œäº¦æˆ–è€…è¯´ï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨çš„åœ°å€éƒ½æ˜¯è™šæ‹Ÿåœ°å€\n2.ç®€è¿°ç¨‹åºåœ°å€ç©ºé—´æ¯ä¸€ä¸ªè¿›ç¨‹åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œéƒ½ä¼šè®©æ“ä½œç³»ç»Ÿç»™å…¶åˆ†é…ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œè¿™å°±æ˜¯è¿›ç¨‹åœ°å€ç©ºé—´\n\nä»¥å…ˆæè¿°å†ç»„ç»‡çš„ç†å¿µï¼Œè¿›ç¨‹åœ°å€ç©ºé—´å…¶å®æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä¸€ä¸ªæ•°æ®ç»“æ„struct mm_struct\nä¹‹å‰æåˆ°è¿‡è¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼Œåœ¨å¤šè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç‹¬äº«å„ç§èµ„æºã€‚è€Œè¿›ç¨‹åœ°å€ç©ºé—´çš„ä½œç”¨ï¼Œå°±æ˜¯è®©è¿›ç¨‹è®¤ä¸ºè‡ªå·±æ˜¯ç‹¬å æ“ä½œç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºï¼\n\nè¿™ä¸ªæ“ä½œï¼Œå…¶å®å°±æ˜¯æ“ä½œç³»ç»Ÿç»™è¯¥è¿›è¿›ç¨‹ç”»äº†ä¸€ä¸ªå‡çš„å†…å­˜ï¼ˆè™šæ‹Ÿåœ°å€ï¼‰è¿›ç¨‹éœ€è¦å†…å­˜çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šåœ¨é¡µè¡¨é‡Œé¢ç”»ä¸€ä¸ªåœ°å€ç»™ä»–ï¼Œå†å°†è¯¥åœ°å€æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šé¢\n\né—®é¢˜ï¼šä¸€ä¸ªåˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œåœ°å€é•¿åº¦ä¸º 32 ä½ï¼Œå…¶ä¸­é¡µå·å  8 ä½ï¼Œåˆ™é¡µè¡¨é•¿åº¦æ˜¯ï¼Ÿ\nè§£æï¼šé¡µå·å³é¡µè¡¨é¡¹çš„åºå·ï¼Œæ€»å…±å 8ä¸ªäºŒè¿›åˆ¶ä½ï¼Œæ„å‘³ç€é¡µè¡¨é¡¹çš„ä¸ªæ•°å°±æ˜¯2^8\n\n\nè€Œå½“è¿›ç¨‹éœ€è¦ç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œæœ¬è´¨å°±æ˜¯æ“ä½œç³»ç»Ÿåœ¨mm_strcutä¸­ä¿®æ”¹ä¸åŒåŒºåŸŸçš„endç½¢äº†ï¼\nåœ¨Linuxæºç ä¸­å¯ä»¥çœ‹åˆ°è¿™ç©æ„çš„å­˜åœ¨ï¼Œå…¶ä¸­çš„struct vm_area_struct * mmap;å°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬çš„è™šæ‹Ÿåœ°å€ç®¡ç†çš„å†…æ ¸\n\nè¿™é‡Œå°±èƒ½çœ‹åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´çš„startå’Œendäº†ï¼\n\n2.1 ç¨‹åºåœ°å€ç©ºé—´å’Œä»£ç ç¼–è¯‘\nç¨‹åºåœ°å€ç©ºé—´ä¸ä»…æ˜¯æ“ä½œç³»ç»Ÿéœ€è¦è€ƒè™‘ï¼Œæˆ‘ä»¬ç”¨çš„ç¼–è¯‘å™¨ä¹Ÿä¼šè€ƒè™‘è¿™éƒ¨åˆ†çš„å†…å®¹\n\næˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€ä»£ç éœ€è¦ç»è¿‡é¢„å¤„ç†-ç¼–è¯‘-é“¾æ¥-æ±‡ç¼–è¿™å‡ ä¸ªæ­¥éª¤\n\nç¨‹åºç¼–è¯‘å‡ºæ¥ï¼Œæ²¡æœ‰è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¨‹åºå†…éƒ¨æœ‰åœ°å€ï¼ˆå¦‚æœæ²¡æœ‰åœ°å€ï¼Œæ— æ³•è¿›è¡Œé“¾æ¥ï¼‰\nç¨‹åºç¼–è¯‘å‡ºæ¥ï¼Œæ²¡æœ‰è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¨‹åºå†…éƒ¨æœ‰åŒºåŸŸï¼ˆreadelf -s å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥æŸ¥çœ‹åŒºåŸŸï¼‰\n\n[muxue@bt-7274:~/git/raspi/code/22-10-07_ç¨‹åºåœ°å€ç©ºé—´]$ readelf -S testThere are 30 section headers, starting at offset 0x19f8:Section Headers:  [Nr] Name              Type             Address           Offset       Size              EntSize          Flags  Link  Info  Align  [ 0]                   NULL             0000000000000000  00000000       0000000000000000  0000000000000000           0     0     0  [ 1] .interp           PROGBITS         0000000000400238  00000238       000000000000001c  0000000000000000   A       0     0     1  [ 2] .note.ABI-tag     NOTE             0000000000400254  00000254       0000000000000020  0000000000000000   A       0     0     4  [ 3] .note.gnu.build-i NOTE             0000000000400274  00000274       0000000000000024  0000000000000000   A       0     0     4  [ 4] .gnu.hash         GNU_HASH         0000000000400298  00000298       000000000000001c  0000000000000000   A       5     0     8  [ 5] .dynsym           DYNSYM           00000000004002b8  000002b8       00000000000000c0  0000000000000018   A       6     1     8  [ 6] .dynstr           STRTAB           0000000000400378  00000378       0000000000000059  0000000000000000   A       0     0     1  [ 7] .gnu.version      VERSYM           00000000004003d2  000003d2       0000000000000010  0000000000000002   A       5     0     2  [ 8] .gnu.version_r    VERNEED          00000000004003e8  000003e8       0000000000000020  0000000000000000   A       6     1     8  [ 9] .rela.dyn         RELA             0000000000400408  00000408       0000000000000018  0000000000000018   A       5     0     8  [10] .rela.plt         RELA             0000000000400420  00000420       00000000000000a8  0000000000000018  AI       5    23     8  [11] .init             PROGBITS         00000000004004c8  000004c8       000000000000001a  0000000000000000  AX       0     0     4  [12] .plt              PROGBITS         00000000004004f0  000004f0       0000000000000080  0000000000000010  AX       0     0     16  [13] .text             PROGBITS         0000000000400570  00000570       00000000000001e2  0000000000000000  AX       0     0     16  [14] .fini             PROGBITS         0000000000400754  00000754       0000000000000009  0000000000000000  AX       0     0     4  [15] .rodata           PROGBITS         0000000000400760  00000760       000000000000005e  0000000000000000   A       0     0     8  [16] .eh_frame_hdr     PROGBITS         00000000004007c0  000007c0       0000000000000034  0000000000000000   A       0     0     4  [17] .eh_frame         PROGBITS         00000000004007f8  000007f8       00000000000000f4  0000000000000000   A       0     0     8  [18] .init_array       INIT_ARRAY       0000000000600e10  00000e10       0000000000000008  0000000000000008  WA       0     0     8  [19] .fini_array       FINI_ARRAY       0000000000600e18  00000e18       0000000000000008  0000000000000008  WA       0     0     8  [20] .jcr              PROGBITS         0000000000600e20  00000e20       0000000000000008  0000000000000000  WA       0     0     8  [21] .dynamic          DYNAMIC          0000000000600e28  00000e28       00000000000001d0  0000000000000010  WA       6     0     8  [22] .got              PROGBITS         0000000000600ff8  00000ff8       0000000000000008  0000000000000008  WA       0     0     8  [23] .got.plt          PROGBITS         0000000000601000  00001000       0000000000000050  0000000000000008  WA       0     0     8  [24] .data             PROGBITS         0000000000601050  00001050       0000000000000004  0000000000000000  WA       0     0     1  [25] .bss              NOBITS           0000000000601054  00001054       0000000000000004  0000000000000000  WA       0     0     1  [26] .comment          PROGBITS         0000000000000000  00001054       000000000000002d  0000000000000001  MS       0     0     1  [27] .symtab           SYMTAB           0000000000000000  00001088       0000000000000648  0000000000000018          28    46     8  [28] .strtab           STRTAB           0000000000000000  000016d0       000000000000021e  0000000000000000           0     0     1  [29] .shstrtab         STRTAB           0000000000000000  000018ee       0000000000000108  0000000000000000           0     0     1Key to Flags:  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),  L (link order), O (extra OS processing required), G (group), T (TLS),  C (compressed), x (unknown), o (OS specific), E (exclude),  l (large), p (processor specific)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¨‹åºå†…éƒ¨çš„åœ°å€ï¼Œå’Œå†…å­˜çš„åœ°å€æ²¡æœ‰å…³ç³»\nå¯ä»¥ç†è§£ä¸ºï¼Œæˆ‘ä»¬ç¨‹åºå†…éƒ¨éƒ½å­˜æ”¾çš„æ˜¯ä¸€ä¸ªç›¸å¯¹åœ°å€ã€‚ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œè®¤ä¸ºç¨‹åºæ˜¯æŒ‰ç…§0000~FFFFè¿›è¡Œç¼–å€çš„ã€‚\nå½“ç¨‹åºè¢«åŠ è½½åˆ°å†…å­˜å½“ä¸­æ—¶ï¼Œå‡è®¾ç³»ç»Ÿå°†è¯¥ç¨‹åºçš„ä»£ç ä»å†…å­˜0x100å¼€å§‹åŠ è½½ï¼Œå°±å¯ä»¥ä¾ç…§ç¨‹åºç¼–å€çš„æ•°æ®åŠ ä¸Šè¿™ä¸ªåç§»é‡ï¼Œä»è€Œå­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚\næ¯”å¦‚ç¨‹åºä¸­æœ‰ä¸€ä¸ªä»£ç æ®µçš„ä½ç½®æ˜¯0x1Fï¼Œè¿™æ—¶å€™åœ¨åŠ è½½ç¨‹åºçš„æ—¶å€™ï¼Œå°±ä¼šæŠŠè¿™ä¸ªä»£ç æ®µåŠ ä¸Šåç§»é‡æ¥åŠ è½½\n\n\n\nä»£ç åœ°å€\nè™šæ‹Ÿåœ°å€\n\n\n\n0x1f\n0x11f\n\n\n0x20\n0x120\n\n\nå¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œå§å“©å§å•¦â€¦â€¦\n2.2 å†™æ—¶æ‹·è´ç°åœ¨å°±å¯ä»¥æ¥è§£ç­”ä¸€ä¸‹1.2ä¸­å‡ºç°çš„é—®é¢˜äº†\n\nå½“å­è¿›ç¨‹å°è¯•ä¿®æ”¹testå˜é‡çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå¼€å§‹ä¸€ä¸ªå†™æ—¶æ‹·è´ï¼Œå¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œå°†å¯¹åº”çš„å€¼è€ƒå…¥è¯¥ç©ºé—´ï¼Œå†é‡æ–°æ˜ å°„é¡µè¡¨ã€‚\nè¿™æ—¶å€™ï¼Œè™½ç„¶é¡µè¡¨å·¦ä¾§çš„è™šæ‹Ÿåœ°å€æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯æ˜ å°„çš„ç‰©ç†åœ°å€å·²ç»ä¸ä¸€æ ·äº†ï¼\n\nè¿™æ ·å°±èƒ½ä¿è¯çˆ¶å­è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼Œè°ä¿®æ”¹å˜é‡éƒ½äº’ä¸å½±å“ï¼\n\nç±»ä¼¼C++ä¸­å®ç°çš„æ·±æ‹·è´ï¼\n\n2.2.1 forkä¸¤ä¸ªè¿”å›å€¼çš„è§£é‡Špid_t idè¿™ä¸ªå˜é‡å±äºçˆ¶è¿›ç¨‹æ ˆç©ºé—´ä¸­å®šä¹‰çš„å˜é‡ï¼Œä½†æ˜¯forkå†…éƒ¨ï¼Œreturnä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼ˆreturnçš„æœ¬è´¨æ˜¯é€šè¿‡å¯„å­˜å™¨å°†è¿”å›å€¼å†™å…¥åˆ°æ¥æ”¶è¿”å›å€¼çš„å˜é‡ä¸­ï¼‰\nå½“id = fork()çš„æ—¶å€™ï¼Œè°å…ˆè¿”å›ï¼Œè°å°±ä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´ã€‚æ‰€ä»¥åŒä¸€ä¸ªå˜é‡æœ‰ä¸åŒçš„å†…å®¹å€¼ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯åŒä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¯¹åº”äº†ä¸åŒç‰©ç†åœ°å€çš„ä½“ç°ï¼\n\næ‰“å°forkçš„è¿”å›å€¼ï¼Œå³å¯è§‚å¯Ÿåˆ°å’Œ1.2ä¸­ä¸€æ ·çš„æƒ…å†µï¼Œè™šæ‹Ÿåœ°å€ç›¸åŒï¼Œä½†æ˜¯retçš„å€¼ä¸åŒ\n\n\n3.ç¨‹åºåœ°å€ç©ºé—´çš„ä½œç”¨éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†…å­˜ä½œä¸ºä¸€ä¸ªç¡¬ä»¶ï¼Œæ²¡æœ‰åŠæ³•æ‹’ç»ä½ çš„è¯»å†™ï¼å†…å­˜æ˜¯ä¸å¸¦æ§åˆ¶åŠŸèƒ½çš„ï¼\nç›´æ¥è®©ç”¨æˆ·ä¿®æ”¹ç‰©ç†å†…å­˜é£é™©æå¤§ï¼š\n\né‡æŒ‡é’ˆé—®é¢˜\nç”¨æˆ·å¯èƒ½ç›´æ¥ä¿®æ”¹æ“ä½œç³»ç»Ÿéœ€è¦ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œå¯¼è‡´ç³»ç»Ÿboom\n\nç¨‹åºåœ°å€ç©ºé—´è®©è®¿é—®å†…å­˜æ—¶æ·»åŠ äº†ä¸€å±‚è½¯ç¡¬ä»¶å±‚ï¼Œå¯ä»¥å¯¹è½¬åŒ–è¿‡ç¨‹è¿›è¡Œå®¡æ ¸ï¼Œæ‹¦æˆªéæ³•çš„è®¿é—®\n\næ¯”å¦‚æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿›ç¨‹åœ¨å¾€è™šæ‹Ÿåœ°å€çš„å¸¸é‡åŒºè¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¸åšé˜»æ‹¦ï¼›ä½†æ˜¯å¾€å¸¸é‡åŒºå†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ‹¦æˆªã€‚è¿™æ‰æ˜¯æ— æ³•ä¿®æ”¹å¸¸é‡æ•°æ®çš„çœŸæ­£åŸç†\n\n\nä¿æŠ¤å†…å­˜\nå¯ä»¥ä½¿ç”¨è¿›ç¨‹ç®¡ç†æ›´å¥½çš„å¯¹åŠŸèƒ½æ¨¡å—è¿›è¡Œè§£è€¦ï¼ˆlinuxå†…å­˜ç®¡ç†ï¼‰\nè®©ç¨‹åº&#x2F;è¿›ç¨‹å¯ä»¥ç”¨ç»Ÿä¸€çš„æ–¹å¼&#x2F;è§†è§’æ¥çœ‹å¾…å†…å­˜ï¼Œä»¥ç»Ÿä¸€çš„æ–¹å¼ç¼–è¯‘åŠ è½½æ‰€æœ‰å¯æ‰§è¡Œç¨‹åºï¼Œç®€åŒ–ç¨‹åºæœ¬èº«çš„è®¾è®¡å’Œå®ç°\n\nåŒæ—¶ï¼Œç¨‹åºåœ°å€ç©ºé—´è¿˜å¯ä»¥å»¶è¿Ÿç”¨æˆ·çš„å†…å­˜ä½¿ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬ç°åœ¨mallocäº†100ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œå®é™…ä¸Šæ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šç«‹é©¬ç»™ä½ ç”³è¯·ç©ºé—´ï¼Œè€Œæ˜¯æ“ä½œä½ çš„mm_structè®©è¿›ç¨‹ä»¥ä¸ºè‡ªå·±å·²ç»ç”³è¯·æˆåŠŸäº†ã€‚å½“ç¨‹åºçœŸæ­£ä½¿ç”¨è¿™ä¸ªç©ºé—´çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šå»ç‰©ç†å†…å­˜ä¸­è¿›è¡Œæ˜ å°„ï¼\n\nç”³è¯·çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡linuxçš„å†…å­˜ç®¡ç†æ¨¡å—è¿›è¡Œæ“ä½œçš„ã€‚åŒæ—¶ï¼Œå†™æ—¶æ‹·è´ä¹Ÿæ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ¨¡å—æ¥å®Œæˆçš„ï¼\n\nè¿™ç§â€œå»¶è¿Ÿè®¿é—®â€ï¼Œå¯ä»¥é¿å…æŸäº›ç¨‹åºç”³è¯·äº†å†…å­˜è€Œåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰ä½¿ç”¨çš„é—®é¢˜ï¼é¿å…äº†å†…å­˜èµ„æºçš„æ— æ•ˆå ç”¨ï¼ˆä¹Ÿæ˜¯ä¸€ç§æµªè´¹ï¼‰\n4.é¡µè¡¨å‰é¢åªæ˜¯å¯¹é¡µè¡¨åšäº†ä¸€ä¸ªåŸºæœ¬çš„è§£é‡Šï¼Œä½†é¡µè¡¨å¹¶ä¸å•çº¯è¿›è¡Œè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„ï¼Œå…¶è¿˜ä¼šå¢æ·»æƒé™ï¼Œæ˜¯å¦å‘½ä¸­çš„åˆ¤æ–­ï¼Œä»¥åŠU/Kæƒé™çš„æ ‡è¯†\n\n\næƒé™ï¼šé¿å…ä½ ä¿®æ”¹constå±æ€§çš„æ•°æ®\næ˜¯å¦å‘½ä¸­ï¼šå¦‚æœå¯¹äºç‰©ç†å†…å­˜å¤„æ²¡æœ‰æ•°æ®ï¼Œåˆ™æ²¡æœ‰å‘½ä¸­ï¼›éœ€è¦ä»ç¡¬ç›˜ä¸­åŠ è½½æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œå°†æ˜¯å¦å‘½ä¸­æ›´æ”¹ä¸ºæ˜¯\nU&#x2F;Kæƒé™ï¼šç”¨æˆ·çº§å’Œå†…æ ¸çº§çš„å·®åˆ«ï¼Œå‚è€ƒ linuxä¿¡å· 5.1ä¸­å…³äºç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„æè¿°ï¼›é¿å…ç”¨æˆ·æ€çš„è¿›ç¨‹æ‰§è¡Œå†…æ ¸æ€çš„æºç \n\nå‰é¢æåˆ°ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºåœ°å€ç©ºé—´ã€‚è¦æ˜¯é¡µè¡¨åªæœ‰ä¸€å¼ çš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿ\nä»¥32ä½ç³»ç»Ÿä¸ºä¾‹ï¼š\n\nå†…å­˜ä¸€å…±æœ‰2^32æ¬¡æ–¹ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯4Gb\nå‡è®¾é¡µè¡¨æ¯ä¸€ä¸ªå­—èŠ‚çš„æ¡ç›®éœ€è¦8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œé‚£å°±éœ€è¦32Gçš„ç©ºé—´æ¥å­˜æ”¾é¡µè¡¨ï¼\né¡µè¡¨è‚¯å®šä¸èƒ½å­˜åœ¨ç¡¬ç›˜é‡Œé¢ï¼Œä½†è¿™ä¹ˆå¤§çš„ç©ºé—´ä¸€èˆ¬ç”µè„‘çš„å†…å­˜å¯æ”¾ä¸ä¸‹\nè¿™ä¹Ÿå°±å‘Šè¯‰æˆ‘ä»¬ï¼Œé¡µè¡¨å¹¶ä¸æ˜¯åªæœ‰ä¸€å¼ ï¼\n\né¡µè¡¨å®é™…ä¸Šæ˜¯æœ‰å¤šå¼ çš„ğŸ‘Œ\n4.1 åˆ†é¡µå­˜å‚¨å½“cpuè®¿é—®è¿›ç¨‹åœ°å€ç©ºé—´çš„æ—¶å€™ï¼Œå…¶è®¿é—®çš„å…¶å®æ˜¯è™šæ‹Ÿåœ°å€\n32ä½ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯åœ°å€èƒ½è¦†ç›–åˆ°æ‰€æœ‰ä½ç½®ï¼Œæ¯ä¸€ä¸ªåœ°å€éƒ½æœ‰32ä¸ªæ¯”ç‰¹ä½ï¼›å½“MMUæ‹¿åˆ°è™šæ‹Ÿåœ°å€çš„æ—¶å€™ï¼Œå…¶å®ä¼šå°†è™šæ‹Ÿåœ°å€æ‹†åˆ†\n10     +    10     +    1201010101 00 01000111 11 00001011 1001xxxxxxxx xx yyyyyyyy yy zzzzzzzz zzzz\n\n\nè¿™é‡Œé¢çš„å‰10ä½ä¼šç”¨äºåœ¨é¡µç›®å½•ä¸­ï¼Œç”¨äºæŸ¥æ‰¾äºŒçº§é¡µè¡¨\nä¸­é—´10ä½ä¼šåœ¨äºŒçº§é¡µè¡¨ä¸­æŸ¥æ‰¾é¡µï¼ŒæŒ‡å‘çš„æ˜¯é¡µåœ¨ç‰©ç†å†…å­˜ä¸­çš„èµ·å§‹åœ°å€\næœ€åçš„12å­—èŠ‚ï¼Œä¸€å…±æ˜¯2^12=4kbï¼Œå¯ä»¥è¦†ç›–å•ä¸ªé¡µçš„å¤§å°ï¼Œæ˜¯å•ä¸ªé¡µä¸­çš„åç§»é‡\n\nè¿™é‡Œåˆæ¶‰åŠåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œé‚£ä¾¿æ˜¯Linuxä¸‹IOçš„åŸºæœ¬å•ä½æ˜¯4kb\næœ‰äº†è¿™ä¸¤çº§çš„é¡µè¡¨åï¼Œç¬¬ä¸€çº§é¡µè¡¨åªéœ€è¦2^10ä¸ªæ¡ç›®ï¼Œç¬¬äºŒçº§é¡µè¡¨æœ‰å¤šä¸ªï¼Œæ¯ä¸€ä¸ªä¹Ÿæ˜¯2^10ä¸ªæ¡ç›®ï¼Œæœ€åå†æŒ‡å‘4kbçš„é¡µ\nlinuxä¸‹æœ‰ä¸“é—¨çš„ç»“æ„ä½“æ¥æè¿°å•ä¸ªé¡µï¼Œå’Œå…¶ä»–ç³»ç»Ÿä¸€æ ·ï¼Œæœ‰äº†å¯¹å•ä¸ªé¡µçš„æè¿°åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„å°†é¡µç»™ç®¡ç†èµ·æ¥ã€‚æ­¤æ—¶å¯¹å†…å­˜çš„ç®¡ç†ï¼Œå°±è½¬æ¢æˆäº†å¯¹æ•°ç»„çš„å¢åˆ æŸ¥æ”¹\nstruct page&#123;&#125;;\n\né¡µè¡¨å®ç°äº†åˆ†ç¦»ä¹‹åï¼Œå°±å¯ä»¥æŒ‰éœ€åˆ›å»ºï¼Œä¸ä¼šå‡ºç°ä¸€æ¬¡æ€§åˆ›å»ºä¸€ä¸ªéå¸¸å¤§çš„é¡µè¡¨ï¼Œå¯¼è‡´å†…å­˜ç©ºé—´éƒ½è¢«å æ»¡çš„æƒ…å†µï¼\n\næœ€åˆçš„ç®—æ³•å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºé¡µè¡¨çš„æ˜ å°„å¹¶ä¸éœ€è¦å¯¹æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œæ˜ å°„ã€‚åªéœ€è¦æ˜ å°„åˆ°4kbå³å¯ï¼Œæ€»å…±çš„æ¡ç›®æ˜¯2^32 / 2^12 = 2^20ä¸ªï¼Œæ‰€å ç”¨ç©ºé—´ä¹Ÿæ²¡é‚£ä¹ˆå¤§äº†\n\n4.2 åŠ è½½å¦‚æœåœ¨å¯»å€çš„æ—¶å€™ï¼Œå‘ç°äºŒçº§é¡µè¡¨ä¸­æ‰€å¯¹åº”çš„pageæ˜¯NULLï¼Œé‚£ä¹ˆä»£è¡¨è¯¥ä»£ç çš„æ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°å†…å­˜ä¸­\næ­¤æ—¶å°±å¯ä»¥ä»ç¡¬ç›˜ä¸­åŠ è½½ï¼Œå¹¶æŠŠpageçš„é¦–åœ°å€ç»™æ˜ å°„è¿›äºŒçº§é¡µè¡¨ä¸­\n\nç»“è¯­å…³äºè¿™éƒ¨åˆ†çš„ç†è§£å…¶å®å¹¶ä¸ç®—ååˆ†é€å½»ï¼Œæˆ–è®¸åœ¨æ—¥åçš„é¡¹ç›®å®è·µä¸­èƒ½åŠ æ·±ç†è§£å‘¢~\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ§åˆ¶","url":"/2022/10/15/note_Linux/12%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/","content":"é˜¿å·´é˜¿å·´ï¼Œè¿›ç¨‹æ¦‚å¿µç»“æŸäº†ï¼Œç°åœ¨è¯¥å­¦ä¹ å¦‚ä½•æ§åˆ¶ä¸€ä¸ªè¿›ç¨‹äº†\n\n\n\næ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n[TOC]\n1.è¿›ç¨‹åˆ›å»º1.1 forkå…³äºlinuxä¸‹çš„è¿›ç¨‹åˆ›å»ºå…¶å®æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡äº†ï¼Œé‚£ä¾¿æ˜¯ä½¿ç”¨forkå‡½æ•°æ¥è¿›è¡Œæ“ä½œ\npid_t ret = fork();\n\nforkçš„è¿”å›å€¼ï¼šå­è¿›ç¨‹è¿”å›0ã€çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹pidï¼›å‡ºé”™è¿”å›-1\n\nå°tipsï¼Œå…¶å®pid_tå°±æ˜¯intç±»å‹ï¼\ntypedef __pid_t pid_t;\n\nåœ¨ä¸Šç¯‡ç¨‹åºåœ°å€ç©ºé—´çš„åšå®¢ä¸­å·²ç»æåˆ°ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨forkå‡½æ•°çš„æ—¶å€™\n\næ“ä½œç³»ç»Ÿä¼šç»™å­è¿›ç¨‹åˆ†é…ä¸€ä¸ªæ–°çš„å†…å­˜å—mm_struct+é¡µè¡¨å’Œå†…æ ¸æ•°æ®ç»“æ„task_strcutç»™å­è¿›ç¨‹\nå°†çˆ¶è¿›ç¨‹çš„éƒ¨åˆ†æ•°æ®ç»“æ„æ‹·è´è‡ªå­è¿›ç¨‹ï¼ˆå†™æ—¶æ‹·è´ï¼‰\nå°†å­è¿›ç¨‹æ·»åŠ ç³»ç»Ÿè¿›ç¨‹åˆ—è¡¨å½“ä¸­\nforkè¿”å›ï¼Œå¼€å§‹è°ƒåº¦å™¨è°ƒåº¦\n\nç®€å•è¯´æ¥ï¼Œä¾¿æ˜¯forkä¹‹å‰åªæœ‰çˆ¶è¿›ç¨‹å•ç‹¬è¿è¡Œã€‚forkä¹‹åçˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œæµä¼šåˆ†åˆ«æ‰§è¡Œï¼Œä¸”ç›¸äº’ç‹¬ç«‹\n\nforkä¹‹åï¼Œæ˜¯çˆ¶è¿›ç¨‹å…ˆæ‰§è¡Œè¿˜æ˜¯å­è¿›ç¨‹å…ˆæ‰§è¡Œä¾èµ–äºè°ƒåº¦å™¨çš„è°ƒåº¦ã€‚å¹¶éä¸€å®šæ˜¯çˆ¶è¿›ç¨‹å…ˆæ‰§è¡Œï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­è¿›ç¨‹è™½ç„¶å…±äº«çˆ¶è¿›ç¨‹çš„æ‰€æœ‰ä»£ç ï¼Œä½†æ˜¯å®ƒåªèƒ½ä»forkä¹‹åå¼€å§‹æ‰§è¡Œ\nè¿™é‡Œæ¶‰åŠåˆ°äº†cpuçš„eipç¨‹åºè®¡æ•°å™¨ï¼ˆåˆç§°pcæŒ‡é’ˆï¼‰è¿™ç©æ„çš„ä½œç”¨å°±æ˜¯ä¿å­˜å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼\n\næ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯CPUæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œå¹¶élinuxä¸‹bashé‡Œé¢çš„å‘½ä»¤\n\neipç¨‹åºè®¡æ•°å™¨ä¼šæŠŠä¸‹ä¸€ä¸ªæŒ‡ä»¤æ‹·è´ç»™å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å°±ä¼šä»è¯¥eipæ‰€æŒ‡å‘çš„ä»£ç å¤„ï¼ˆå³forkä¹‹åçš„ä»£ç ï¼‰å¼€å§‹è¿è¡Œ\nforkå•¥æ—¶å€™ä¼šå‡ºé”™å¦‚æœä½ å†™ä¸€ä¸ªå¾ªç¯ä»£ç ä¸€ç›´åˆ›å»ºå­è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åˆ›å»ºå¤±è´¥ï¼\nèƒ½å¤Ÿåˆ›å»ºçš„å­è¿›ç¨‹ä¸ªæ•°ä¾èµ–äºä»£ç çš„å¤æ‚åº¦\nforkçš„å°é¢˜ç›®\n1.2 å†™æ—¶æ‹·è´ä¹‹å‰å·²ç»æåˆ°è¿‡å†™æ—¶æ‹·è´çš„æ¦‚å¿µï¼Œè¿™é‡Œå†æ¬¡è¯´æ˜ä¸€ç•ª\n\n\nä¸ºä»€ä¹ˆè¦å†™æ—¶æ‹·è´ï¼Œåˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ç›´æ¥æŠŠæ•°æ®åˆ†å¼€ä¸è¡Œå—\n\nç­”ï¼Œè¿™æ ·ä¼šå­˜åœ¨å†…å­˜æµªè´¹ï¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œçˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œä¼šå‡ºç°ä¸‹é¢çš„ä¸€äº›æƒ…å†µ\n\nçˆ¶è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®ï¼Œå­è¿›ç¨‹ä¸ä¸€å®šå…¨éƒ¨éƒ½ä¼šä½¿ç”¨ã€‚å³ä¾¿ä½¿ç”¨ã€ä¹Ÿä¸ä¸€å®šä¼šè¿›è¡Œä¿®æ”¹\nç†æƒ³çŠ¶æ€ä¸‹ï¼Œå¯ä»¥æŠŠçˆ¶å­è¿›ç¨‹ä¼šä¿®æ”¹çš„å†…å®¹è¿›è¡Œåˆ†ç¦»ï¼Œä¸ä¼šä¿®æ”¹çš„éƒ¨åˆ†å…±äº«å³å¯ã€‚ä½†æ˜¯è¿™æ ·çš„å®ç°éå¸¸å¤æ‚\nå¦‚æœforkçš„æ—¶å€™ï¼Œå°±ç›´æ¥åˆ†ç¦»çˆ¶å­è¿›ç¨‹çš„æ•°æ®ï¼Œä¼šå¢åŠ forkè¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦\n\næ‰€ä»¥æœ€ç»ˆlinuxé‡‡ç”¨äº†å†™æ—¶æ‹·è´çš„æ–¹å¼ï¼Œåªä¼šåœ¨éœ€è¦çš„æ—¶å€™ï¼Œæ‹·è´çˆ¶å­éœ€è¦ä¿®æ”¹çš„æ•°æ®ã€‚è¿™æ ·å»¶è¿Ÿæ‹·è´ï¼Œå˜ç›¸æé«˜äº†å†…å­˜çš„ä½¿ç”¨ç‡\n2.è¿›ç¨‹ç»ˆæ­¢2.1 ç¨‹åºé€€å‡ºç åœ¨ä¹‹å‰å­¦ä¹ C&#x2F;C++çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“mainå‡½æ•°æ˜¯ä¸€ä¸ªç¨‹åºçš„å…¥å£å‡½æ•°ï¼Œé‚£ä¹ˆä½ çŸ¥é“mainå‡½æ•°å†…éƒ¨çš„è¿”å›æœ‰ä½•ç”¨ï¼Œåˆè¢«è°æ¥æ”¶äº†å—ï¼Ÿ\nint main()&#123;\treturn 0;&#125;\n\nä½¿ç”¨echo $?å‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿›ç¨‹çš„æ¨å‡ºç \n\nint main()&#123;\treturn 10;&#125;\n\nä¿®æ”¹å¯¹åº”çš„è¿”å›å€¼ï¼Œå†æ¬¡è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒçš„ç»“æœ\n\nçŸ¥è¯†ç‚¹ï¼š?ç¯å¢ƒå˜é‡å­˜æ”¾çš„æ˜¯ä¸Šä¸€æ¬¡è¿è¡Œçš„ç¨‹åºçš„é€€å‡ºç \n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ echo $?10[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ echo $?0\n\næ¯”å¦‚è¿™é‡Œæˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è®¿é—®è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡çš„ç»“æœæ˜¯æˆ‘ä»¬è‡ªå·±è¿è¡Œçš„ç¨‹åºè¿”å›çš„10ï¼Œç¬¬äºŒæ¬¡çš„ç»“æœæ˜¯0ï¼ˆechoå‘½ä»¤çš„è¿”å›å€¼ï¼‰\n\n2.1.1 strerroré‚£ä¹ˆï¼Œè¿™ä¸ªç¨‹åºé€€å‡ºç æœ‰ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨forå¾ªç¯æ‰“å°ä¸€ä¸‹åº“å‡½æ•°ä¸­strerrrorå‡½æ•°å†…è®°å½•çš„é”™è¯¯ç \n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    int i=0;    for(i=0;i&lt;100;i++)    &#123;        printf(&quot;[%d] %s\\n&quot;,i,strerror(i));    &#125;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œ100ä¸ªé”™è¯¯ç è¢«æ‰“å°äº†å‡ºæ¥\n\nè¿›ä¸€æ­¥åŠ å¤§å¾ªç¯çš„æ¬¡æ•°ï¼Œèƒ½çœ‹åˆ°Cè¯­è¨€ä¸­å®šä¹‰çš„é”™è¯¯ç ä¸€å…±æ˜¯134ä¸ªã€‚åç»­å…¨éƒ¨æ‰“å°unknown error\n\næˆ‘ä»¬è®¾è®¡ç¨‹åºçš„é€€å‡ºç çš„æ—¶å€™ï¼Œå¯ä»¥å‚ç…§Cè¯­è¨€åº“å‡½æ•°çš„é”™è¯¯ç æ¥è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·èƒ½æ›´å¥½åœ°å’Œåº“å†…éƒ¨è¿›è¡Œå¯¹æ¥ï¼Œæˆ–ç”¨strerrorå‡½æ•°æ¥è·å–åˆ°é”™è¯¯ä¿¡æ¯\n\nè¿™å°±æ˜¯ç”¨é”™è¯¯ç æ¥å®ç°çš„å¼‚å¸¸ç®¡ç†\n\n2.2 ç¨‹åºé€€å‡ºçš„å‡ ç§çŠ¶æ€ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºæœ‰ä¸‹é¢çš„å‡ ç§é€€å‡ºçŠ¶æ€ï¼š\n\nä»£ç è·‘å®Œï¼Œç»“æœä¸é¢„æœŸç›¸ç¬¦\nä»£ç è·‘å®Œï¼Œç»“æœæœ‰é—®é¢˜\nä»£ç æ²¡æœ‰è·‘å®Œï¼Œæå‰å‡ºç°å¼‚å¸¸ç»ˆæ­¢ï¼Œæˆ–è€…è¢«å¤–éƒ¨å…³é—­\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šå»åœ¨ä¹ä¸€ä¸ªè¿›ç¨‹ä¸ºä½•ä¼šæˆåŠŸï¼›è€Œæ›´åœ¨ä¹ä¸€ä¸ªé”™è¯¯çš„è¿›ç¨‹åˆ°åº•å“ªå„¿æœ‰bugã€‚æ‰€ä»¥å°±éœ€è¦æƒ³åŠæ³•è·å–åˆ°è¿™ä¸ªè¿›ç¨‹çš„é”™è¯¯ç \né”™è¯¯ç è¡¨å¾äº†ç¨‹åºé€€å‡ºçš„ä¿¡æ¯ï¼Œäº¤ç”±çˆ¶è¿›ç¨‹è¿›è¡Œè¯»å–\nä¸Šé¢æˆ‘ä»¬åœ¨bashä¸­èƒ½é€šè¿‡echoè¯»å–ä¸Šä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºç ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è‡ªå·±è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºï¼Œå…¶çˆ¶è¿›ç¨‹å°±ä¸ºå½“å‰çš„bashã€‚bashæ¥å—äº†æˆ‘ä»¬è¿›ç¨‹çš„é€€å‡ºç ï¼Œæ”¾å…¥åˆ°äº†ç¯å¢ƒå˜é‡ä¸­\n\n2.3 ç»ˆæ­¢çš„å¸¸è§åšæ³•ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨mainå‡½æ•°ä¸­returnï¼Œæˆ–è€…åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨exit()æ¥ç»ˆæ­¢ç¨‹åº\nè¿™é‡Œè¿˜éœ€è¦æåŠå¦å¤–ä¸€ä¸ªç‰ˆæœ¬çš„exit()ï¼Œå³_exit\n\næœ€å¯è§çš„åŒºåˆ«ä¾¿æ˜¯ï¼Œexitä¼šåˆ·æ–°ç¼“å†²åŒºï¼Œè€Œ_exitä¸ä¼š\nvoid test2()&#123;    printf(&quot;i&#x27;m good, exit&quot;);    exit(0);&#125;void test3()&#123;    printf(&quot;i&#x27;m good, _exit&quot;);    _exit(0);&#125;\n\nè¿™é‡Œæˆ‘å…ˆè°ƒç”¨test2å‡½æ•°ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯è¿™æ ·çš„ğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ gcc test_strerror.c -o test &amp;&amp; ./testi&#x27;m good, exit[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ \n\nå¦‚æœè°ƒç”¨çš„æ˜¯test3ï¼Œåˆ™ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µ\n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ gcc test_strerror.c -o test &amp;&amp; ./test[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ \n\nç¨‹åºä»€ä¹ˆéƒ½æ²¡æœ‰æ‰“å°ï¼\nç¼“å†²åŒºè¿™éƒ¨åˆ†æ˜¯åŸºç¡€IOçš„çŸ¥è¯†\nlinuxä¸‹æœ‰ä¸€ä¸ªè¾“å…¥è¾“å‡ºçš„ç¼“å†²åŒºï¼Œå½“æˆ‘ä»¬è°ƒç”¨printfçš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šç«‹é©¬æ‰“å°ï¼Œè€Œæ˜¯ä¼šå°†å¾…æ‰“å°çš„å†…å®¹å…ˆå†™å…¥ç¼“å†²åŒºï¼Œç›´åˆ°æˆ‘ä»¬è¾“å‡º\\næˆ–è€…è°ƒç”¨fflushå‡½æ•°æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒºã€‚\nfflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\n\nexitå’Œ_exitåœ¨_exitçš„manæ‰‹å†Œä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³å¹²æ‰è¿™ä¸ªè¿›ç¨‹ï¼›è€Œexitè¿˜ä¼šåšä¸€äº›å…¶ä»–çš„æ“ä½œ\n\n2.4 ç»ˆæ­¢çš„æ—¶å€™ï¼Œå†…æ ¸åšäº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œè¿›ç¨‹&#x3D;å†…æ ¸ç»“æ„task/mm_structç­‰+è¿›ç¨‹ä»£ç ã€æ•°æ®\næ“ä½œç³»ç»Ÿå¯èƒ½å¹¶ä¸ä¼šé‡Šæ”¾è¯¥è¿›ç¨‹çš„task_struct/mm_structï¼Œè€Œæ˜¯ç•™ç»™ä¸‹ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼\nè¦çŸ¥é“ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“ï¼Œå°±éœ€è¦å¯¹å®ƒè¿›è¡Œå¼€ç©ºé—´å’Œåˆå§‹åŒ–æ“ä½œã€‚è€Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œåˆ›å»ºã€ç»ˆæ­¢è¿›ç¨‹æ˜¯ä¸€ä¸ªéå¸¸é«˜é¢‘çš„æ“ä½œã€‚å¦‚æœæ€»æ˜¯ä¸æ–­çš„åˆ›å»ºå†…æ ¸ç»“æ„å†é‡Šæ”¾ï¼Œå…¶å†…å­˜åˆ©ç”¨ç‡å°±å¾ˆä½ï¼Œè€Œä¸”æ‹–æ…¢ç³»ç»Ÿè¿è¡Œé€Ÿåº¦ã€‚\nè¿™æ—¶å€™ç³»ç»Ÿå°±ä¼šä½¿ç”¨å†…æ ¸çš„æ•°æ®ç»“æ„ç¼“å†²æ± ï¼Œåˆç§°slabåˆ†æ´¾å™¨ï¼Œæ¥ç®¡ç†è¿™äº›ä»å¾…ä½¿ç”¨çš„å†…æ ¸ç»“æ„ã€‚å½“æœ‰æ–°è¿›ç¨‹å‡ºç°çš„æ—¶å€™ï¼Œæ›´æ–°å†…æ ¸ç»“æ„çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°è¿è¡Œé˜Ÿåˆ—ä¸­\n\n3.è¿›ç¨‹ç­‰å¾…ä¹‹å‰è®²è¿‡å­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹å¦‚æœä¸ç®¡ä¸é¡¾ï¼Œå°±ä¼šé€ æˆåƒµå°¸è¿›ç¨‹çš„é—®é¢˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ç­‰ä¸€ç³»åˆ—é—®é¢˜\n\nå¦å¤–ï¼Œåƒµå°¸è¿›ç¨‹ä¸€æ—¦å‡ºç°ï¼Œå³ä¾¿æ˜¯kill -9ä¹Ÿæ— æ³•æ€æ‰è¿™ä¸ªè¿›ç¨‹\n\næ‰€ä»¥çˆ¶è¿›ç¨‹éœ€è¦ç›‘çœ‹å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ“ä½œ\nçˆ¶è¿›ç¨‹é€šè¿‡è¿›ç¨‹ç­‰å¾…çš„æ–¹å¼å›æ”¶å­è¿›ç¨‹èµ„æºï¼Œè·å–å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\n\n3.1 å¦‚ä½•ç­‰å¾…è¿›ç¨‹ç­‰å¾…è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°\npid_t wait(int*status);pid_t waitpid(pid_t pid, int *status, int options);\n\nå®ƒä»¬çš„å¤´æ–‡ä»¶æ˜¯\n#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;\n\n3.2 waitå…ˆæ¥åº·åº·ç¬¬ä¸€ä¸ªï¼Œå…¶ä½œç”¨æ˜¯ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œstatusæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œå­è¿›ç¨‹é€€å‡ºåï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å–åˆ°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\n\nstatusæ˜¯ä»å­è¿›ç¨‹çš„task_structä¸­æ‹¿å‡ºæ¥çš„ï¼Œå­è¿›ç¨‹ä¼šå°†è‡ªå·±çš„é€€å‡ºç å†™å…¥task_struct\nå¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒå­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œåˆ™å¯ä»¥ç»™statusä¼ ä¸€ä¸ªNULLç©ºæŒ‡é’ˆ\nè‹¥ç­‰å¾…å¤±è´¥ï¼Œåˆ™è¿”å›-1\n\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = wait(&amp;status);        printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,status);        sleep(5);    &#125;           return 0;&#125;\n\n\nå—¯ï¼Œçœ‹èµ·æ¥æ²¡å•¥é—®é¢˜ï¼Œæˆ‘ä»¬æˆåŠŸè·å–äº†å­è¿›ç¨‹çš„pidä»¥åŠé€€å‡ºç 0\né‚£å¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å­è¿›ç¨‹ä¸­exitçš„å€¼å‘¢ï¼Ÿ\nexit(11);\n\n\nå‘€ï¼Œå‡ºé—®é¢˜äº†ï¼Œä¸ºä½•çŠ¶æ€ç å˜æˆ2816äº†ï¼Ÿ\n3.2.1 å…³äºstatuså®é™…ä¸Šï¼Œè¾“å‡ºå‹å‚æ•°ä¸­statusçš„å€¼å¹¶éæ˜¯å®Œæ•´çš„é€€å‡ºçŠ¶æ€ä¿¡æ¯ï¼Œå…¶åˆ†ä¸ºä¸‹é¢ä¸¤ç§æƒ…å†µ\n\næ‰€ä»¥è¯´ï¼Œæ­£ç¡®è®¿é—®çŠ¶æ€ç çš„æ–¹å¼ï¼Œæ˜¯å…ˆå°†statuså³ç§»8ä½ï¼Œå†ç”¨æŒ‰ä½ä¸å–å‡ºçŠ¶æ€ç \n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(11);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = wait(&amp;status);        //printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,status);//ç›´æ¥æ‰“å°statusæ˜¯é”™è¯¯çš„ï¼        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF);//0xffæ˜¯8ä¸ª1        sleep(5);    &#125;           return 0;&#125;\n\n\nå†æ¥ä¿®æ”¹ä¸€ä¸‹exitçš„å€¼ä¸º200ï¼Œä¾æ—§æ­£ç¡®ï¼\nå­è¿›ç¨‹é€€å‡ºç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:770, çŠ¶æ€ä¿¡æ¯ï¼š200\n\n\n3.3 waitpidè¯¥å‡½æ•°çš„åŸå‹å¦‚ä¸‹\npid_t waitpid(pid_t pid, int *status, int options);\n\n\npidï¼š&gt;0æŒ‡å®šç­‰å¾…å­è¿›ç¨‹pidï¼›-1ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹\nstatusï¼šåŒwaitï¼Œä¸ºè¾“å‡ºå‹å‚æ•°\noptionsï¼šè‹¥è®¾ç½®ä¸º0ï¼Œåˆ™è¿›è¡Œé˜»å¡ç­‰å¾…ï¼›å…¶ä½™é€‰é¡¹è§ä¸‹å›¾\n\n\nè¿”å›å€¼ï¼š\n\næ­£å¸¸ç­‰å¾…ï¼Œè¿”å›å­è¿›ç¨‹çš„pid\nå¦‚æœè®¾ç½®äº†optionsï¼Œè€Œwaitpidå‘ç°æ²¡æœ‰å·²é€€å‡ºçš„å­è¿›ç¨‹å¯æ”¶é›†ï¼Œè¿”å›0\nè°ƒç”¨ä¸­å‡ºé”™ï¼Œè¿”å›-1ã€‚æ­¤æ—¶errnoä¼šè¢«è®¾ç½®æˆç›¸å¯¹åº”çš„å€¼æ¥æ˜¾ç¤ºé”™è¯¯\n\nwait(): on success, returns the process ID of the terminated child; on error, -1 is returned.waitpid(): on success, returns the process ID of the child whose state has changed; if WNOHANG  was  specified  and  one  or  more child(ren) specified by pid exist, but have not yet changed state, then 0 is returned.  On error, -1 is returned.\n\nä»£ç ç¤ºä¾‹\nint main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 4;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF);//0xffæ˜¯8ä¸ª1        sleep(5);    &#125;          return 0;&#125;\n\n\n3.4 ä¿¡å·ç»ˆæ­¢ç›®å‰linuxæ”¯æŒçš„ä¿¡å·å¦‚ä¸‹ï¼Œåœ¨åç»­ä¿¡å·çš„ç« èŠ‚ä¼šå•ç‹¬è®²è§£ï¼\n\n\nå‰é¢æåˆ°äº†ï¼Œé™¤äº†æ­£å¸¸çš„ç»ˆæ­¢ï¼Œstatusä¸­è¿˜å¯ä»¥ä¿å­˜ä¿¡å·ç»ˆæ­¢çš„ä¿¡æ¯\n\nè¿™é‡Œçš„core dumpæ ‡å¿—æ˜¯ç”¨æ¥å¹²å˜›çš„æˆ‘ä»¬æš‚ä¸”ä¸æï¼ˆåç»­ä¿¡å·éƒ¨åˆ†ä¼šæœ‰è®²è§£ï¼‰å…ˆæ¥è¯•è¯•ç”¨killæ¥å¹²æ‰å­è¿›ç¨‹ï¼\nè¿™é‡Œæˆ‘ä»¬è¦å–å‡ºçš„æ˜¯statusä¸­æœ€ä½7ä½çš„æ•°æ®ï¼Œå°±éœ€è¦æŒ‰ä½ä¸ä¸€ä¸ªäºŒè¿›åˆ¶æœ«å°¾æ˜¯7ä¸ª1çš„æ•°å­—\næ³¨æ„ï¼šå¦‚æœå­è¿›ç¨‹æ˜¯å› ä¸ºä¿¡å·é€€å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸éœ€è¦å…³æ³¨é€€å‡ºç ï¼Œå…¶æ²¡æœ‰æ„ä¹‰ï¼\nint main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 20;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(30);        int status = 0;        pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF,status&amp;0x7F);//0xffæ˜¯8ä¸ª1        sleep(10);    &#125;          return 0;&#125;\n\n ç¨‹åºæœ€å¼€å§‹çš„æ—¶å€™ï¼Œå­è¿›ç¨‹æ­£å¸¸åˆ›å»ºï¼Œçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ\n\nè¿™é‡Œä½¿ç”¨killç»™å­è¿›ç¨‹å‘ä¿¡å·ï¼Œå¹²æ‰äº†å­è¿›ç¨‹\n[muxue@bt-7274:~/git/c_code]$ kill -9 5952[muxue@bt-7274:~/git/c_code]$ \n\nçˆ¶è¿›ç¨‹sleepç»“æŸåæ‰§è¡Œwaitpidè·å–åˆ°äº†å­è¿›ç¨‹çš„ç»“æŸä¿¡æ¯ä»¥åŠä¿¡å·9\n\nåŒæ—¶é€šè¿‡ä¹‹å‰å†™çš„æ£€æµ‹è„šæœ¬\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nèƒ½çœ‹åˆ°å­è¿›ç¨‹è¿›å…¥zåƒµå°¸çŠ¶æ€\n\nçˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹çš„è¿‡ç¨‹\n\næ¢ä¸€ä¸ªkillçš„ä¿¡å·ï¼Œçˆ¶è¿›ç¨‹ä¹Ÿèƒ½æ­£ç¡®è·å¾—å…¶ç»“æœ\n[muxue@bt-7274:~/git/c_code]$ kill -30 7607[muxue@bt-7274:~/git/c_code]$ \n\næˆ‘æ˜¯å­è¿›ç¨‹7607 , ppid:7606 , ret:0    , &amp;ret:0x7ffccf2aeb20æˆ‘æ˜¯å­è¿›ç¨‹7607 , ppid:7606 , ret:0    , &amp;ret:0x7ffccf2aeb20ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:7607, çŠ¶æ€ï¼š0ï¼Œä¿¡å·ï¼š30\n\né™¤äº†æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä½¿ç”¨kill ç»™è¿›ç¨‹å‘ä¿¡å·ï¼Œä¸€äº›é”™è¯¯ä¹Ÿä¼šè®©è¿›ç¨‹è‡ªå·±é€€å‡ºã€‚æ¯”å¦‚ä¿¡å·8å°±æ˜¯æµ®ç‚¹æ•°é”™è¯¯ï¼Œå¯ä»¥ç”¨é™¤0æ¥å¤ç°è¿™ä¸ªé”™è¯¯\næ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆçŸ¥é“æˆ‘ä»¬é™¤0äº†ï¼Ÿ\n\nåœ¨CPUå†…æœ‰ä¸€ä¸ªçŠ¶æ€å¯„å­˜å™¨ï¼Œå½“cpuè¿›è¡Œè¿ç®—çš„æ—¶å€™å‡ºé”™äº†ï¼Œä¼šæ›´æ–°çŠ¶æ€å¯„å­˜å™¨ã€‚æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°CPUç”¨çŠ¶æ€å¯„å­˜å™¨ç»™ä»–æŠ¥äº†ä¸ªé”™ï¼Œå°±ä¼šè¯†åˆ«é”™è¯¯ç±»å‹ï¼Œå¹¶é€šè¿‡ä¿¡å·å¹²æ‰å½“å‰è¿è¡Œçš„è¿›ç¨‹\næˆ‘ä»¬è¿è¡Œçš„è¿›ç¨‹ä¸­çš„è½¯ä»¶é”™è¯¯ï¼Œéƒ¨åˆ†æ˜¯ä¼šåœ¨ç¡¬ä»¶å±‚é¢ä¸Šä½“ç°çš„\n\n3.5 åº“é‡Œé¢æä¾›çš„å®è‡ªå·±å†™æŒ‰ä½ä¸å¤šéº»çƒ¦å‘€ï¼Œåº“é‡Œé¢æä¾›äº†å‡ ä¸ªå®ä¾›æˆ‘ä»¬ä½¿ç”¨\n\nWIFEXITED(status)  æŸ¥çœ‹å­è¿›ç¨‹æ˜¯å¦æ˜¯æ­£å¸¸é€€å‡ºçš„ï¼Œæ­£å¸¸é€€å‡ºä¸ºçœŸ\nWIFSIGNALED(status)æŸ¥çœ‹å­è¿›ç¨‹æ˜¯å¦ä¸ºä¿¡å·ç»ˆæ­¢ï¼Œä¿¡å·ç»ˆæ­¢è¿”å›çœŸ\nWEXITSTATUS(status) æå–å­è¿›ç¨‹é€€å‡ºç \nWTERMSIG(status) æå–å­è¿›ç¨‹é€€å‡ºä¿¡å·\n\n//å…¶ä½™éƒ¨åˆ†ä»£ç å’Œä¸Šé¢ç›¸åŒï¼Œå­è¿›ç¨‹exit(11)int status = 0;pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹if(WIFEXITED(status))//å­è¿›ç¨‹æ­£å¸¸é€€å‡ºè¿”å›çœŸ&#123;       printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,WEXITSTATUS(status),WTERMSIG(status));&#125;else&#123;    printf(&quot;éæ­£å¸¸é€€å‡º,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,WEXITSTATUS(status),WTERMSIG(status));&#125;\n\nä¸‹å›¾ä¸ºå­è¿›ç¨‹æ­£å¸¸exit\n\nä¸‹å›¾ä¸ºå­è¿›ç¨‹è¢«kill -9å¹²æ‰\n\n3.6 é˜»å¡ç­‰å¾…å’Œéé˜»å¡ç­‰å¾…å‰é¢çš„waitpidå‡½æ•°ä¸­çš„optionå‚æ•°å°±å’Œé˜»å¡&#x2F;éé˜»å¡ç­‰å¾…æœ‰å…³\n0       é˜»å¡WNOHANG éé˜»å¡\n\n3.6.1 é˜»å¡ç­‰å¾…å½“æˆ‘ä»¬è°ƒç”¨æŸäº›å‡½æ•°çš„æ—¶å€™ï¼Œå› ä¸ºæ¡ä»¶ä¸å°±ç»ªï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œé˜»å¡ç­‰å¾…\n\næœ¬è´¨ï¼šå½“å‰ç¨‹åºè‡ªå·±å˜æˆé˜»å¡çŠ¶æ€ï¼Œå½“ä¸€åˆ‡å°±ç»ªçš„æ—¶å€™å†è¢«å”¤é†’ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬ç­‰å¾…çš„ä¸æ˜¯ç¡¬ä»¶èµ„æºï¼Œè€Œæ˜¯ç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸï¼ˆè½¯ä»¶èµ„æºï¼‰\n\né˜»å¡ç­‰å¾…æ—¶ï¼Œå°†çˆ¶è¿›ç¨‹æ”¾å…¥å­è¿›ç¨‹task_structä¸­çš„ç­‰å¾…é˜Ÿåˆ—ã€‚å½“æ“ä½œç³»ç»Ÿæ£€æµ‹å‡ºå­è¿›ç¨‹é€€å‡ºï¼Œå°±ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’çˆ¶è¿›ç¨‹ï¼Œé˜»å¡ç­‰å¾…æˆåŠŸï¼\n\nç»™waitpidçš„optionä¼ å…¥0ï¼Œå³ä¸ºé˜»å¡ç­‰å¾…\npid_t st = waitpid(-1,&amp;status,0);//é˜»å¡ç­‰å¾…\n\nåœ¨å­è¿›ç¨‹è¢«ä¿¡å·å¹²æ‰æˆ–è€…æ‰§è¡Œå®Œæ¯•é€€å‡ºä¹‹å‰ï¼Œçˆ¶è¿›ç¨‹ä¸ä¼šå‘åæ‰§è¡Œä»£ç ã€‚åœ¨ç”¨æˆ·å±‚é¢çœ‹æ¥ï¼Œå°±æ˜¯ä¸€ä¸ªç¨‹åºå¡ä½äº†\n3.6.2 éé˜»å¡ç­‰å¾…ç»™waitpidçš„optionä¼ å…¥WNOHANGï¼Œå³ä¸ºéé˜»å¡ç­‰å¾…\nç­‰å¾…æœŸé—´ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å¹²å…¶ä»–çš„äº‹æƒ…\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int add(int a,int b)&#123;    return a+b;&#125;int pls(int a,int b)&#123;    return a*b;&#125;int main()&#123;    pid_t id = fork();    if(id == 0)    &#123;        // å­è¿›ç¨‹        int i =5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());            sleep(2);        &#125;        exit(0);    &#125;    else if(id &gt;0)    &#123;        // çˆ¶è¿›ç¨‹        // åŸºäºéé˜»å¡çš„è½®è¯¢ç­‰å¾…æ–¹æ¡ˆ        int status = 0;        int i = 1, j=2;        while(1)        &#123;            pid_t ret = waitpid(-1, &amp;status, WNOHANG);            if(ret &gt; 0)            &#123;                printf(&quot;ç­‰å¾…æˆåŠŸ, %d, exit code: %d, exit sig: %d\\n&quot;, ret, WIFEXITED(status), WTERMSIG(status));                break;            &#125;            else if(ret == 0)            &#123;                //ç­‰å¾…æˆåŠŸäº†ï¼Œä½†å­è¿›ç¨‹æ²¡æœ‰é€€å‡º                printf(&quot;å­è¿›ç¨‹å¥½äº†æ²¡ï¼Ÿæ²¡æœ‰ï¼Œçˆ¶è¿›ç¨‹åšå…¶ä»–äº‹æƒ…\\n&quot;);                printf(&quot;add %d  &quot;,add(i++,j++));                printf(&quot;pls %d\\n&quot;,pls(i++,j++));                sleep(1);            &#125;            else&#123;                //err                printf(&quot;çˆ¶è¿›ç¨‹ç­‰å¾…å‡ºé”™ï¼\\n&quot;);                break;            &#125;        &#125;    &#125;    return 0;&#125;\n\nè¿™é‡Œæˆ‘ä»¬ç»™çˆ¶è¿›ç¨‹å†™äº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸€ç›´ç­‰å¾…å­è¿›ç¨‹é€€å‡ºã€‚æ¯ä¸€æ¬¡å¾ªç¯éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡waitpidçš„æ¥å£ï¼Œç›´åˆ°æˆåŠŸè·å–äº†å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\nè¿™ç§å¤šæ¬¡è°ƒç”¨waitpidæ¥å£çš„æ–¹å¼åˆè¢«ç§°ä¸ºè½®è¯¢æ£€æµ‹\n\nä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªèŠå¤©è½¯ä»¶éœ€è¦åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹ï¼ˆèŠå¤©æ¡†ï¼‰å¯ä»¥å…ˆæ˜¾ç¤ºä¸€ä¸ªå›¾ç‰‡çš„åŠ è½½å›¾ï¼Œå‘Šè¯‰ä½ å›¾ç‰‡æ­£åœ¨åŠ è½½ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚è€Œä½ è¿˜æ˜¯å¯ä»¥æ­£å¸¸æµè§ˆå…¶ä»–äººçš„å‘è¨€ã€‚ç­‰å›¾ç‰‡åŠ è½½å®Œæ¯•ï¼ˆå­è¿›ç¨‹é€€å‡ºï¼‰ä¹‹åï¼Œçˆ¶è¿›ç¨‹å°±å¯ä»¥æŠŠé‚£ä¸ªä¸´æ—¶çš„åŠ è½½å›¾æ›¿æ¢æˆè·å–åˆ°çš„å›¾ç‰‡æœ¬èº«ï¼Œè¿™å°±æ˜¯ä¸€æ¬¡æˆåŠŸçš„éé˜»å¡ç­‰å¾…\n\n4.è¿›ç¨‹æ›¿æ¢åœ¨ä¹‹å‰çš„forkä¸­ï¼Œæˆ‘ä»¬çš„å­è¿›ç¨‹éƒ½æ˜¯è¿è¡Œçš„å·²ç»é¢„å…ˆå†™å¥½çš„ä»£ç ï¼Œæˆ–è€…è¯´æ˜¯ç»§æ‰¿äº†çˆ¶è¿›ç¨‹çš„ä»£ç ç»§ç»­å‘åæ‰§è¡Œã€‚\nè¿›ç¨‹æ›¿æ¢å°±æ˜¯è®©å­è¿›ç¨‹å¯ä»¥æ‰§è¡Œç£ç›˜é‡Œé¢å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿçš„å‘½ä»¤ã€å…¶ä»–è¯­è¨€å†™çš„ä»£ç py c++ phpç­‰ç­‰â€¦â€¦\n4.1 åŸç†å…¶å®å°±æ˜¯è®©å­è¿›ç¨‹é€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æ¥å£ï¼Œæ¥æ‰§è¡Œä¸€ä¸ªå·²æœ‰çš„å¯æ‰§è¡Œç¨‹åº\n\nè¿™ä¸ªè¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰åˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å½“å‰å­è¿›ç¨‹\n\nç¨‹åºæ›¿æ¢çš„è¿‡ç¨‹\n\nå°†ç£ç›˜ä¸­çš„ç¨‹åºåŠ è½½è¿›å…¥å†…æ ¸ç»“æ„\né‡æ–°å»ºç«‹é¡µè¡¨æ˜ å°„ï¼Œå› ä¸ºæ˜¯å­è¿›ç¨‹è°ƒç”¨çš„ç¨‹åºæ›¿æ¢ï¼Œé‚£ä¹ˆå°±ä¼šä¿®æ”¹å­è¿›ç¨‹çš„é¡µè¡¨æ˜ å°„\næ•ˆæœï¼šå­è¿›ç¨‹ä»£ç å’Œçˆ¶è¿›ç¨‹å½»åº•åˆ†ç¦»ï¼Œå­è¿›ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªå…¨æ–°çš„ç¨‹åº\n\n\n4.2 å¦‚ä½•æ›¿æ¢ç³»ç»Ÿæä¾›äº†éå¸¸å¤šçš„å‡½æ•°æ¥å£ï¼Œä¾›æˆ‘ä»¬åœ¨ä¸€ä¸ªç¨‹åºä¸­è°ƒç”¨ç³»ç»Ÿä¸­å…¶ä»–çš„å¯æ‰§è¡Œç¨‹åº\n\n\nè¦æƒ³è°ƒç”¨ï¼Œé¦–å…ˆè¦æ‰¾åˆ°è¿™ä¸ªç¨‹åºåœ¨é‚£å„¿ï¼Œä»¥åŠè¦ç”¨ä»€ä¹ˆåŠæ³•æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰ä¸‹é¢ä»¥å…·ä½“çš„ä¾‹å­æ¥äº†è§£ä¸€ä¸‹å§\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å…ˆç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå†è°ƒç”¨ä¸Šé¢è¿™äº›å‡½æ•°æ¥å£æ¥ä½¿ç”¨å…¶ä»–å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™äº›å‡½æ•°æ¥å£æœ¬èº«å¹¶ä¸ä¼šåˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼\n\n4.3 execlint execl(const char *path, const char *arg, ...);\n\n\npathæ˜¯éœ€è¦è¿è¡Œç¨‹åºçš„è·¯å¾„\nargä»£è¡¨éœ€è¦æ‰§è¡Œçš„ç¨‹åº\n...æ˜¯å¯å˜å‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸å®šé‡çš„å‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬å¡«å…¥çš„æ˜¯å‘½ä»¤è¡Œçš„å‚æ•°\n\nè¯´èµ·æ¥å­¦åˆ°äº†è¿™é‡Œæˆ‘æ‰çŸ¥é“åŸæ¥Cè¯­è¨€æ”¯æŒå¯å˜å‚æ•°â€¦â€¦\n#include&lt;stdlib.h&gt;#include&lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/bin/ls&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ %d\\n&quot;,ret);    return 0;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å¡«å…¥å‘½ä»¤è¡Œå‚æ•°çš„æ—¶å€™ï¼Œå¿…é¡»è¦ä»¥NULLä½œä¸ºå‚æ•°çš„ç»“å°¾\n\næˆ‘ä»¬ä¼šå‘ç°ï¼Œè°ƒç”¨äº†å…¶ä»–å¯æ‰§è¡Œç¨‹åºä¹‹åï¼Œåœ¨åé¢çš„printfå‡½æ•°å¹¶æ²¡æœ‰è¢«æ‰§è¡Œï¼\nè¿™æ˜¯å› ä¸ºï¼Œå½“æˆ‘ä»¬ç”¨è¿™ä¸ªå‡½æ•°æ¥è°ƒç”¨å…¶ä»–å¯æ‰§è¡Œç¨‹åºï¼Œæœ¬è´¨ä¸Šå·²ç»æŠŠå½“å‰çš„ä»£ç å’Œæ•°æ®æ›¿æ¢æ‰äº†ï¼æ—¢ç„¶æ˜¯æ›¿æ¢ï¼Œé‚£ä¹ˆåŸæœ¬çš„printf(&quot;æ‰§è¡Œç»“æŸ %d\\n&quot;,ret);è‚¯å®šä¹Ÿä¸ä¼šæ‰§è¡Œ\nè¿”å›å€¼é—®é¢˜é‚£execlä¸æ˜¯æœ‰ä¸€ä¸ªintç±»å‹çš„è¿”å›å€¼å—ï¼Ÿå¦‚æœç¨‹åºæ›¿æ¢äº†ä¹‹åä¸ä¼šæ‰§è¡Œåé¢çš„ä»£ç ï¼Œé‚£è¿™ä¸ªè¿”å›å€¼è¿˜æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\n\næŸ¥æ‰‹å†Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¿”å›å€¼åªæœ‰å‡ºé”™çš„æ—¶å€™æ‰ä¼šè¿”å›-1ï¼ŒåŒæ—¶ä¼šæ›´æ–°ERRNO\nint main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/bin/&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return 0;&#125;\n\nç°åœ¨æˆ‘ä»¬æŠŠæ‰§è¡Œæ–‡ä»¶æ”¹æˆusr/bin/è¿™ä¸ªé”™è¯¯æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨å¤±è´¥ï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°è°ƒç”¨å¤±è´¥çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰æƒé™å»æ‰§è¡Œ/usr/bin\n\nint ret = execl(&quot;/usr/erqer/&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);\n\nå¦‚æœæ”¹æˆä¸€ä¸ªä¹±ä¸ƒå…«ç³Ÿçš„è·¯å¾„ï¼Œä¹Ÿä¼šæ‰“å°å‡ºé”™è¯¯ç»“æœä¸ºâ€œæ–‡ä»¶æˆ–è·¯å¾„ä¸å­˜åœ¨â€\n\næ ¹æ®è¿™ä¸ªç‰¹æ•ˆï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œexecè¿™äº›æ›¿æ¢å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®æ²¡æœ‰å¿…è¦å»åˆ¤æ–­è¿”å›å€¼ã€‚å› ä¸ºè¿™äº›å‡½æ•°åªæœ‰å‡ºé”™çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ï¼\n\næ— éœ€åˆ¤æ–­è¿”å›å€¼ï¼Œç›´æ¥æ‰“å°errnoæ‰¾å‡ºé”™è¯¯åŸå› å³å¯\n\næ›¿æ¢åˆ«çš„ä»£ç ä¹‹å‰è¯´è¿‡ï¼Œæ›¿æ¢ä¸ä»…å¯ä»¥æ›¿æ¢ç³»ç»Ÿçš„å‘½ä»¤ï¼Œè¿˜å¯ä»¥æ›¿æ¢æˆå…¶ä»–è¯­è¨€çš„ä»£ç \næ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„pyä»£ç \nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)#pythonä¸­printä¼šé»˜è®¤æ¢ä¸€è¡Œ\n\næˆ‘ä»¬åœ¨Cä¸­åˆ©ç”¨execlæ¥è°ƒç”¨è¿™ä¸ªè‡ªå·±å†™çš„pythonç¨‹åºã€‚å¦‚æœä½ ä¸çŸ¥é“ä½ ç³»ç»Ÿä¸­æœ‰æ²¡æœ‰pythonï¼Œæˆ–è€…ä¸çŸ¥é“å®ƒçš„è·¯å¾„ï¼Œå¯ä»¥ç”¨whichæ¥æŸ¥çœ‹ä½ç½®\n\nint main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/local/bin/python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);    //int ret = execl(&quot;/usr/bin/ls&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œpythonç¨‹åºè¢«æˆåŠŸæ‰§è¡Œï¼\n\nå­è¿›ç¨‹æ›¿æ¢äº†è§£äº†æ›¿æ¢ç¨‹åºçš„åŸºæœ¬æ–¹æ³•äº†ä¹‹åï¼Œå¯ä»¥å…ˆæ¥è¯•è¯•å†™ä¸€ä¸ªçˆ¶å­è¿›ç¨‹\nè¿™é‡Œè®©çˆ¶è¿›ç¨‹è¿›è¡Œ3.6.2é‡Œé¢çš„è½®è¯¢æ£€æµ‹\nint add(int a,int b)&#123;    return a+b;&#125;int pls(int a,int b)&#123;    return a*b;&#125;int main()&#123;    pid_t id = fork();    if(id == 0)    &#123;        // å­è¿›ç¨‹        int i = 3;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());            sleep(2);//ä¾¿äºè§‚å¯Ÿ            int ret = execl(&quot;/usr/local/bin/python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);            printf(&quot;å­è¿›ç¨‹æ‰§è¡Œå‡ºé”™: %d\\n&quot;,ret);            printf(&quot;å­è¿›ç¨‹é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));            exit(-1);        &#125;    &#125;    else if(id &gt;0)    &#123;        // çˆ¶è¿›ç¨‹        // åŸºäºéé˜»å¡çš„è½®è¯¢ç­‰å¾…æ–¹æ¡ˆ        int status = 0;        int i = 1, j=2;        printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());        while(1)        &#123;            pid_t ret = waitpid(-1, &amp;status, WNOHANG);            if(ret &gt; 0)            &#123;                printf(&quot;ç­‰å¾…æˆåŠŸ, %d, exit code: %d, exit sig: %d\\n&quot;, ret, WIFEXITED(status), WTERMSIG(status));                break;            &#125;            else if(ret == 0)            &#123;                //ç­‰å¾…æˆåŠŸäº†ï¼Œä½†å­è¿›ç¨‹æ²¡æœ‰é€€å‡º                printf(&quot;å­è¿›ç¨‹å¥½äº†æ²¡ï¼Ÿæ²¡æœ‰ï¼Œçˆ¶è¿›ç¨‹åšå…¶ä»–äº‹æƒ…\\n&quot;);                printf(&quot;add %d  &quot;,add(i++,j++));                printf(&quot;pls %d\\n&quot;,pls(i++,j++));                sleep(1);            &#125;            else&#123;                //err                printf(&quot;çˆ¶è¿›ç¨‹ç­‰å¾…å‡ºé”™ï¼\\n&quot;);                break;            &#125;        &#125;    &#125;    return 0;&#125;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ›¿æ¢äº†pythonç¨‹åºæˆåŠŸäº†ä¹‹åï¼Œä¸ä¼šæ‰§è¡Œåé¢çš„printf\nè¿™é‡Œçš„exit codeä¹Ÿè¢«è®¾ç½®æˆäº†1\n\nè¿™é‡Œæˆ‘è‡ªå·±æƒ³å‡ºæ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œçš„exit codeå’Œæˆ‘ä»¬pythonç¨‹åºé‡Œé¢è®¾ç½®çš„æœ‰æ²¡æœ‰å…³ç³»å‘¢ï¼Ÿæ¥è¯•è¯•~\nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)exit(10)#execlçˆ¶è¿›ç¨‹æ¥æ”¶åˆ°çš„é€€å‡ºç å’Œè¿™é‡Œæ²¡æœ‰å…³ç³»\n\nemmç»“æœæ²¡å˜ï¼Œè¯´æ˜æ²¡æœ‰å…³ç³»\næˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼ç­‰å¾…æˆåŠŸ, 20333, exit code: 1, exit sig: 0\n\nå³ä¾¿æˆ‘ä»¬pythonç¨‹åºé‡Œé¢æœ‰bugï¼Œè¿™é‡Œä¹Ÿä¸ä¼šæœ‰å•¥å˜åŒ–\nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)a =10/0\n\næˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼Traceback (most recent call last):  File &quot;/home/muxue/git/linux/code/22-10-13_exec/test.py&quot;, line 3, in &lt;module&gt;    a =10/0ZeroDivisionError: division by zeroç­‰å¾…æˆåŠŸ, 21179, exit code: 1, exit sig: 0\n\nåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ‰§è¡Œç¨‹åºæ›¿æ¢ï¼Œæ˜¯ä¸ä¼šå½±å“çˆ¶è¿›ç¨‹çš„ï¼ˆè¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼‰\nè¿™æ˜¯å› ä¸ºæ•°æ®å‘ç”Ÿäº†å†™æ—¶æ‹·è´ï¼Œç¨‹åºæ›¿æ¢çš„æ—¶å€™å¯ä»¥ç†è§£ä¸ºä»£ç å’Œæ•°æ®éƒ½é€šè¿‡å†™æ—¶æ‹·è´è¿›è¡Œäº†çˆ¶å­çš„åˆ†ç¦»ï¼ˆæ³¨æ„åˆ†ç¦»çš„æ˜¯ä»£ç å’Œæ•°æ®ï¼Œå¹¶éçˆ¶å­å…³ç³»ï¼ï¼‰\n4.4 execvå­¦ä¼šäº†å‰é¢çš„execlï¼Œå†æ¥çœ‹çœ‹è¿™ä¸ª\nint execv(const char *path, char *const argv[]);\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°è«å¾—å¯å˜å‚æ•°ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ç”¨ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„æ¥ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼å…¶ä½™éƒ½æ˜¯ä¸€æ ·çš„ï¼\n\nå¤ä¹ ä¸€ä¸‹ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\n\nvoid testExecv()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;ls&quot;,        &quot;-l&quot;,        &quot;-a&quot;,        NULL    &#125;;    int ret = execv(&quot;/usr/bin/ls&quot;,arg);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nè°ƒç”¨æˆåŠŸï¼\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•total 36drwxrwxr-x  2 muxue muxue  4096 Oct 14 13:36 .drwxrwxr-x 12 muxue muxue  4096 Oct 13 15:19 ..-rw-rw-r--  1 muxue muxue    69 Oct 13 15:24 makefile-rwxrwxr-x  1 muxue muxue 13192 Oct 14 13:36 test-rw-rw-r--  1 muxue muxue  2402 Oct 14 13:37 test.c-rw-rw-r--  1 muxue muxue   111 Oct 14 13:23 test.py[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n\n4.5 execlpint execlp(const char *file, const char *arg, ...);\n\næ³¨æ„ï¼Œè¿™é‡Œå‚æ•°çš„è¯´æ˜ä»pathå˜æˆäº†file\nè¿™ä¸ªå‡½æ•°å’Œexeclçš„åŒºåˆ«åœ¨äºï¼Œå®ƒä¼šè‡ªå·±å»ç³»ç»Ÿç¯å¢ƒå˜é‡çš„PATHé‡Œé¢æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åº\n[muxue@bt-7274:~/git]$ echo $PATH/home/muxue/.vscode-server/bin/d045a5eda657f4d7b676dedbfa7aab8207f8a075/bin/remote-cli:/usr/local/bin:/usr/bin:/usr/local/python3/bin:/usr/local/python3/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin:/usr/local/python3/bin:/usr/local/python3/bin[muxue@bt-7274:~/git]$ \n\nåªæœ‰æ‰¾ä¸åˆ°è¿™ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæ‰ä¼šæŠ¥é”™ï¼\nvoid testExeclp()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execlp(&quot;python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nç»“æœå¦‚ä¸‹ï¼ŒæˆåŠŸè°ƒç”¨\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\néšæ„æŒ‡å®šä¸€ä¸ªç¨‹åºï¼Œå°±ä¼šæŠ¥é”™\nint ret = execlp(&quot;python3300&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);\n\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æ‰§è¡Œç»“æŸ: -1é”™è¯¯åŸå› : No such file or directory[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n4.6 execvpint execvp(const char *file, char *const argv[]);\n\nçŸ¥é“äº†execv/excelä¹‹é—´çš„åŒºåˆ«ï¼Œé‚£ä¹ˆexecvp/execlpä¹‹é—´çš„åŒºåˆ«ä¹Ÿå°±å¾ˆæ˜æ˜¾è¾£ï¼\nåŒæ ·ä¹Ÿæ˜¯åªæœ‰ä¼ å‚çš„åŒºåˆ«ï¼Œå…¶ä»–çš„æ“ä½œå®Œå…¨ä¸€æ ·\nvoid testExecvp()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;ls&quot;,        &quot;-l&quot;,        &quot;-a&quot;,        NULL    &#125;;    int ret = execvp(&quot;ls&quot;,arg);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•total 36drwxrwxr-x  2 muxue muxue  4096 Oct 14 13:48 .drwxrwxr-x 12 muxue muxue  4096 Oct 13 15:19 ..-rw-rw-r--  1 muxue muxue    69 Oct 13 15:24 makefile-rwxrwxr-x  1 muxue muxue 13368 Oct 14 13:48 test-rw-rw-r--  1 muxue muxue  2994 Oct 14 13:48 test.c-rw-rw-r--  1 muxue muxue   112 Oct 14 13:45 test.py[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n4.7 execle&#x2F;execvpe&#x2F;execveè¿™å‡ ä¸ªå‡½æ•°æ”¾åœ¨ä¸€èµ·äº†ï¼Œå› ä¸ºå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å¾ˆç›¸ä¼¼\nint execle(const char *path, const char *arg,                  ..., char * const envp[]);int execvpe(const char *file, char *const argv[],                   char *const envp[]);int execve(const char *filename, char *const argv[],           char *const envp[]);\n\né¦–å…ˆå®ƒä»¬çš„å‡½æ•°åä¸­éƒ½æœ‰ä¸ªeï¼Œè¿™ä¸ªeä»£è¡¨çš„æ˜¯ç¯å¢ƒå˜é‡ï¼Œä»£è¡¨æˆ‘ä»¬å¯ä»¥æŠŠç‰¹å®šçš„ç¯å¢ƒå˜é‡ä¼ å…¥å…¶ä¸­è¿›è¡Œå¤„ç†ã€‚å®ƒä»¬çš„ç¯å¢ƒå˜é‡éƒ½æ˜¯åœ¨æœ€æœ«å°¾ä¼ çš„\n\n\n\nå‡½æ•°\nå‚æ•°\nè¯´æ˜\n\n\n\nexecle\nå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨å¯å˜å‚æ•°ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°\n\n\nexecve\nå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨æ•°ç»„ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°\n\n\nexecvpe\nå¯æ‰§è¡Œæ–‡ä»¶åå­—ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨æ•°ç»„ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼›åªéœ€è¦ä¼ å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ï¼Œä¼šè‡ªåŠ¨åœ¨PATHé‡Œé¢æœç´¢\n\n\næµ‹è¯•è¿™é‡Œæˆ‘å…ˆç”¨C++å†™ä¸€ä¸ªæ‰“å°ç¨‹åºï¼Œæ¥æ‰“å°æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡\n#include &lt;iostream&gt;#include &lt;stdlib.h&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;hello c++&quot; &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;    cout &lt;&lt; &quot;PATH:&quot; &lt;&lt; getenv(&quot;PATH&quot;) &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;    cout &lt;&lt; &quot;MYPATH:&quot; &lt;&lt; getenv(&quot;MYPATH&quot;) &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;        return 0;&#125;\n\nåˆ©ç”¨g++å°†å…¶ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶mytest\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ lsmakefile  mytest  test  test.c  test.cpp  test.py\n\nä¸‹é¢å¼€å§‹æµ‹è¯•\nvoid testExecve()&#123;    extern char ** environ;//å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;./mytest&quot;,        NULL    &#125;;    int ret = execve(&quot;/home/muxue/git/linux/code/22-10-13_exec/mytest&quot;,arg,environ);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\n\nä»cppæ–‡ä»¶çš„æ‰“å°ç»“æœå¯ä»¥åˆ°ï¼Œæˆ‘ä»¬ä¼ å…¥äº†å®Œæ•´çš„ç¯å¢ƒå˜é‡ï¼ŒPATHæˆåŠŸæ‰“å°ï¼Œä½†æ˜¯MYPATHæ²¡æœ‰æ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯å› ä¸ºç¯å¢ƒå˜é‡é‡Œé¢æ²¡æœ‰è¿™ä¸ª\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ echo $MYPATH[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\nåˆ©ç”¨exportå¯¼å…¥ç¯å¢ƒå˜é‡\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ export MYPATH=4321[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ echo $MYPATH4321[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\nå†æ¬¡æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡éƒ½è¢«æ‰“å°å‡ºæ¥äº†\n\nè‡ªå·±ä¼ å…¥ç¯å¢ƒå˜é‡ä¸Šé¢æˆ‘ä»¬æ˜¯ç›´æ¥å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡\nextern char ** environ;//å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡\n\næˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±æ•´ä¸€ä¸ªæ•°ç»„æ¥ä¼ å…¥ç¯å¢ƒå˜é‡\nvoid testExecve()&#123;    extern char ** environ;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;./mytest&quot;,        NULL    &#125;;    char*const env[]=&#123;        &quot;MYPATH=this is c test&quot;,        NULL    &#125;;    int ret = execve(&quot;/home/muxue/git/linux/code/22-10-13_exec/mytest&quot;,arg,env);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nè¯¶ï¼Œæ€ä¹ˆè¿PATHéƒ½æ‰“å°ä¸å‡ºæ¥äº†ï¼Ÿï¼Ÿè¿™ä¸æ˜¯ç³»ç»Ÿé‡Œé¢æœ‰çš„ç¯å¢ƒå˜é‡å—ï¼Ÿ\n\nchar*const env[]=&#123;    &quot;PATH=path test&quot;,    &quot;MYPATH=this is c test&quot;,    NULL&#125;;\n\né‡æ–°è®¾ç½®ä¼ å…¥çš„ç¯å¢ƒå˜é‡ï¼ŒPATHæ‰èƒ½æˆåŠŸæ‰“å°\n\nè¿™è¯´æ˜è¿™å‡ ä¸ªå‡½æ•°çš„ç¯å¢ƒå˜é‡å‚æ•°ï¼Œåœ¨ä¼ å…¥çš„æ—¶å€™ï¼Œæ˜¯ä¼šè¦†ç›–æ‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡çš„ï¼\nå…³äºç¯å¢ƒå˜é‡å‚æ•°çš„é—®é¢˜å®é™…ä¸Šï¼Œå…¶ä½™ä¸å¸¦eçš„å‡½æ•°ï¼Œä¹Ÿæ˜¯èƒ½è·å–åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡çš„ï¼ˆç›´æ¥ç»§æ‰¿çˆ¶è¿›ç¨‹BASHçš„ç¯å¢ƒå˜é‡ï¼‰\nè€Œå¸¦eçš„å‡½æ•°å…è®¸æˆ‘ä»¬å•ç‹¬æ§åˆ¶ç¯å¢ƒå˜é‡\n\nç›´æ¥ä¼ å…¥extern char ** environ;çš„ç³»ç»Ÿç¯å¢ƒå˜é‡\nå°†ç‰¹å®šçš„ç¯å¢ƒå˜é‡ä¼ å…¥\nä¸´æ—¶è‡ªå®šä¹‰ä¸€éƒ¨åˆ†ç¯å¢ƒå˜é‡\n\n\næ³¨æ„PATHå’Œè‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºè¿™é‡Œåªå¯¹execvpeè¯´æ˜ä¸€ä¸‹ï¼Œå¦‚æœæƒ³ç”¨å®ƒè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„mytestï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠmytestæ”¾å…¥ç³»ç»ŸPATHé‡Œé¢ï¼Œä¸ç„¶æ˜¯æ‰¾ä¸åˆ°çš„ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æ‰§è¡Œç»“æŸ: -1é”™è¯¯åŸå› : No such file or directory\n\næ‰€ä»¥è¿˜æ˜¯ç”¨å®ƒæ¥è°ƒç”¨ç³»ç»Ÿçš„å‘½ä»¤å§\nchar*const arg_[]=&#123;    &quot;ls&quot;,    &quot;-l&quot;,    &quot;-a&quot;,    NULL&#125;;int ret = execvpe(&quot;ls&quot;,arg_,env);\n\n4.8 execveæ˜¯ç³»ç»Ÿæ¥å£å¦‚æœä½ æœ‰æ³¨æ„çœ‹ï¼Œåº”è¯¥ä¼šå‘ç°execveçš„manæ‰‹å†Œæ˜¯å•ç‹¬æ‹å‡ºæ¥çš„ï¼Œå·¦ä¸Šè§’çš„ç¼–å·ä¹Ÿä¸ä¸€æ ·\n\nè¿™æ˜¯å› ä¸ºï¼Œå®é™…ä¸Šåªæœ‰execveæ˜¯Linuxç³»ç»Ÿæä¾›çš„æ¥å£\nè€Œå…¶ä»–å‡½æ•°éƒ½æ˜¯Cè¯­è¨€åº“ä¸­å¯¹execveçš„äºŒæ¬¡å°è£…ï¼Œæ¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼\n4.9 å‡½æ•°å‘½åæ€»ç»“\nl(list)ï¼šä½¿ç”¨å¯å˜å‚æ•°åˆ—è¡¨\nv(vector)ï¼šç”¨æ•°ç»„ä¼ å‚\np(path)ï¼šè‡ªåŠ¨åœ¨ç¯å¢ƒå˜é‡PATHä¸­æœç´¢\ne(env)ï¼šè¡¨ç¤ºè‡ªå·±ç»´æŠ¤ç¯å¢ƒå˜é‡\n\n\nç»“è¯­è¿›ç¨‹æ§åˆ¶ç« èŠ‚çš„å†…å®¹åˆ°è¿™é‡Œå°±åŸºæœ¬ç»“æŸå•¦ï¼Œåç»­æœ‰è¡¥å……çš„å†…å®¹ä¼šåœ¨æœ¬åšå®¢é‡Œé¢æ–°å¢ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæœ‰å•¥é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘ç®€æ˜“shellçš„å®ç°","url":"/2022/10/17/note_Linux/13myshell/","content":"æœ¬ç¯‡åšå®¢ï¼Œæ¥æ•™å¤§å®¶ç”¨Cå†™ä¸€ä¸ªç®€æ˜“çš„linux shellï¼Œå¸®åŠ©ç†è§£ä¹‹å‰å­¦ä¹ çš„è¿›ç¨‹æ§åˆ¶ç›¸å…³çŸ¥è¯†\n\n\n\næ¼”ç¤ºç³»ç»Ÿï¼šCentOS7.6\n\n[TOC]\nå‰è¨€ä¹‹æ‰€ä»¥è¯´æ˜¯ç®€æ˜“çš„shellï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨çš„æ°´å¹³è‚¯å®šå†™ä¸å‡ºæ¥linuxç³»ç»Ÿé‡Œé¢é‚£ä¹ˆå¤æ‚çš„shellã€‚\næˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†å­¦ä¹ çˆ¶å­è¿›ç¨‹ã€è¿›ç¨‹æ›¿æ¢ã€å†…å»ºå‘½ä»¤ç­‰ç­‰çŸ¥è¯†ï¼Œå¹¶æŠŠè¿™äº›çŸ¥è¯†çš„ä½œç”¨é€šè¿‡è¿™ä¸ªå°shellä½“ç°å‡ºæ¥\n\næºç ä»“åº“ï¼šgitee\n\n\n1.åŸºç¡€æ¡†æ¶ä¹‹å‰çš„å­¦ä¹ ä¸­æœ‰æåˆ°è¿‡ï¼Œæˆ‘ä»¬åœ¨linuxå‘½ä»¤è¡Œå†…è¿è¡Œçš„å¾ˆå¤šè¿›ç¨‹ï¼Œéƒ½æ˜¯ä»¥å­è¿›ç¨‹çš„æ–¹å¼è¿è¡Œçš„ã€‚è¯´ç™½äº†å°±æ˜¯bashè¿›ç¨‹é‡Œé¢ç»™æˆ‘ä»¬forkåˆ›å»ºäº†å…¶ä»–å­è¿›ç¨‹ï¼Œå†ç”¨å­è¿›ç¨‹è¿›è¡Œè¿›ç¨‹æ›¿æ¢ï¼ŒæŒ‡å‘å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶\nè€Œéœ€è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦ä¸€æ­¥ä¸€æ­¥æ¥\n\nbashé¦–å…ˆè¦æ˜¾ç¤ºå‘½ä»¤è¡Œçš„æç¤ºç¬¦ç”¨æˆ·å@ä¸»æœºå è·¯å¾„ï¼ˆå‚è€ƒä¹‹å‰vimåšå®¢ä¸­çš„è¿›åº¦æ¡ç¨‹åºï¼‰\nè·å–ç”¨æˆ·çš„è¾“å…¥å†…å®¹\nä»ç”¨æˆ·çš„è¾“å…¥ä¸­ï¼Œä»¥&quot; &quot;ç©ºæ ¼ä¸ºåˆ†å‰²ï¼Œåˆ†ç¦»å‡ºå‘½ä»¤å’Œå‚æ•°\nforkåˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ‰§è¡Œè¿›ç¨‹æ›¿æ¢ï¼Œçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ\n\nè¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨ä¸€ä¸ªwhile(1)çš„æ­»å¾ªç¯é‡Œé¢æ‰§è¡Œçš„ï¼Œbashæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯çš„çˆ¶è¿›ç¨‹\n2.å¼€æ•´ä¸€ä¸ª2.1 æ‰“å°å‘½ä»¤è¡Œæç¤ºç¬¦å…ˆæ¥è¯•è¯•æ‰“å°å‡ºå‘½ä»¤è¡Œçš„æç¤ºç¬¦å§ï¼\nprintf(&quot;[æ…•é›ª@FS-1041 å½“å‰è·¯å¾„]# &quot;);fflush(stdout); //åˆ·æ–°ç¼“å†²åŒºï¼Œè¾¾åˆ°ä¸æ¢è¡Œçš„æ•ˆæœ\n\n\n\nä¸ºä½•è¦ä½¿ç”¨fflushï¼Ÿ\n\nå¦‚æœä¸è¿™ä¹ˆå¼„ï¼Œè€Œä½¿ç”¨\\næ¢è¡Œï¼Œå°±ä¼šå‡ºç°å‘½ä»¤è¡Œæç¤ºç¬¦ä¸€ç›´åœ¨é—ªåŠ¨æ‰“å°ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ\nå…‰æ˜¯æ‰“å°ä¸€ä¸ªåŸºæœ¬çš„è·¯å¾„å¯ä¸å¤ªå¤Ÿå“¦ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¯•ç€è·å–ç¯å¢ƒå˜é‡çš„PWDå¾—åˆ°å½“å‰çš„è·¯å¾„ï¼Œå†æ‰“å°å‡ºæ¥\nchar cur_pwd[SIZE] = &quot;~&quot;;int sz_pwd = strlen(getenv(&quot;HOME&quot;));strcat(cur_pwd, getenv(&quot;PWD&quot;) + sz_pwd);printf(&quot;[æ…•é›ª@FS-1041 %s]# &quot;, cur_pwd);fflush(stdout); //åˆ·æ–°ç¼“å†²åŒºï¼Œè¾¾åˆ°ä¸æ¢è¡Œçš„æ•ˆæœ\n\nè¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦å»æ‰PWDå‰é¢/home/ç”¨æˆ·åçš„å†…å®¹ï¼Œå°†å…¶æ›¿æ¢æˆ~\næ‰“å°å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬linuxçš„å‘½ä»¤è¡Œå¾ˆåƒå•¦ï¼\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nä½ è¿˜å¯ä»¥ä»ç¯å¢ƒå˜é‡ä¸­è·å–HOSTNAMEå’ŒUSERæ¥æ›¿æ¢æ‰å‰é¢çš„å†…å®¹\nè¿™é‡Œä¸ºäº†å’Œlinuxè‡ªå·±çš„shellåŒºåˆ†ä¸€ä¸‹ï¼Œæˆ‘å°±ä¸æ›¿æ¢äº†\n\n2.2 è·å–ç”¨æˆ·è¾“å…¥Cè¯­è¨€è·å–ç”¨æˆ·è¾“å…¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨çš„æ˜¯scanf\nä½†æ˜¯è¿™ä¸ªå‡½æ•°åœ¨ç°åœ¨è¿™ä¸ªåœ°æ–¹å¯ä¸é‚£ä¹ˆå¥½ç”¨å–½ï¼æˆ‘ä»¬è¾“å…¥å‘½ä»¤çš„æ—¶å€™éœ€è¦ç”¨ç©ºæ ¼åˆ†å¼€å‘½ä»¤è¡Œå‚æ•°ã€‚scanfä¼šå› ä¸ºç©ºæ ¼è€Œåœæ­¢æ¥å—\næˆ‘ä»¬å¯ä»¥ç”¨getså‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼\n#define NUM 1024char cmd_line[NUM]; //å‘½ä»¤è¡Œè¾“å…¥// 2.è·å–ç”¨æˆ·çš„è¾“å…¥å†…å®¹memset(cmd_line, &#x27;\\0&#x27;, sizeof(cmd_line) * sizeof(char));fgets(cmd_line, NUM, stdin);           //æ ‡å‡†è¾“å…¥stdinè·å–é”®ç›˜è¾“å…¥å†…å®¹\n\nè·å–äº†ä¹‹åå…ˆæ‰“å°ä¸€ä¸‹cmd_lineï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸè·å–äº†æˆ‘ä»¬è¾“å…¥çš„ç»“æœ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# test i k dtest i k d[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]#\n\nä½†ä¸ºä»€ä¹ˆå¤šæ‰“äº†ä¸€ä¸ªæ¢è¡Œå‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºfgetsåœ¨æ¥å—è¾“å…¥çš„æ—¶å€™ï¼ŒæŠŠæˆ‘ä»¬è¾“å…¥ç»“æŸçš„å›è½¦ä¹Ÿç»™æ”¶èµ·æ¥è¾£\ncmd_line[strlen(cmd_line) - 1] = &#x27;\\0&#x27;; // å»æ‰\\nå›è½¦\n\nå…‰æ˜¯å»æ‰å›è½¦è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åªæ•²äº†ä¸€ä¸ªå›è½¦ï¼Œåç»­æˆ‘ä»¬åˆ†ç¦»å‚æ•°çš„æ—¶å€™ï¼Œæ€»ä¸èƒ½å¯¹ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†å§ï¼Ÿ\næ‰€ä»¥è¿˜éœ€è¦å•ç‹¬åˆ¤æ–­strlen(cmd_line)==1çš„æƒ…å†µï¼Œç›´æ¥continue\nif(strlen(cmd_line)==1)&#123;    continue;//ç­‰äº1çš„æƒ…å†µåªèƒ½æ˜¯æ•²äº†ä¸€ä¸ªå›è½¦&#125;// å…¶ä»–æƒ…å†µå»æ‰\\nå›è½¦cmd_line[strlen(cmd_line) - 1] = &#x27;\\0&#x27;; \n\nè¿™æ ·æˆ‘ä»¬çš„bashå°±å’Œlinuxè‡ªå·±çš„bashä¸€æ ·ï¼Œæ•²å›è½¦ä¼šç›´æ¥æ–°èµ·ä¸€è¡Œï¼Œä¸åšä»»ä½•æ“ä½œ\n\nå¦‚æœä¸è¿™ä¹ˆå¤„ç†ï¼Œå°±ä¼šå¼•å‘æ®µé”™è¯¯å¯¼è‡´bashç›´æ¥ç»ˆæ­¢\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# Segmentation fault\n\n2.3 åˆ†ç¦»å‚æ•°è·å–å¥½ç”¨æˆ·è¾“å…¥å•¦ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åˆ†ç¦»å‚æ•°äº†ï¼\nè¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥ä½¿ç”¨strtokè¿™ä¸ªå‡½æ•°å³å¯ï¼\nchar * strtok ( char * str, const char * sep );\n\nå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®åˆ†éš”ç¬¦è¿”å›è¿™ä¸ªåˆ†éš”ç¬¦åœ¨å­—ç¬¦ä¸²é‡Œé¢çš„èµ·å§‹ä½ç½®ï¼›å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªNULLï¼Œåˆ™ä»ä¸Šä¸€æ¬¡å¤„ç†çš„ä½ç½®ç»§ç»­å¾€åå¤„ç†ã€‚\n\nstrtokå‡½æ•°æ‰¾åˆ°strä¸­çš„ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶ç”¨\\0ç»“å°¾ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ ‡è®°çš„æŒ‡é’ˆ\nå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨æ›´å¤šçš„æ ‡è®°ï¼Œåˆ™è¿”å› NULL æŒ‡é’ˆ\n\n\nè¯¥å‡½æ•°çš„è¯¦è§£å‚è€ƒæˆ‘çš„åšå®¢ ç‚¹æˆ‘ \n\nğŸ˜¥æœ€å¼€å§‹çš„æ—¶å€™æˆ‘å¿˜è®°äº†è¿™ä¸ªå‡½æ•°ï¼Œç›´æ¥è‡ªå·±å†™äº†ä¸€ä¸ªåˆ†ç¦»ç®—æ³•ï¼Œdebugäº†å¥½ä¹…æ‰å‹‰å¼ºæå‡ºæ¥ï¼Œå¤ªç¬¨è›‹äº†\n#define SEP &quot; &quot; //åˆ†éš”ç¬¦size_t cmd_args_num = 0;  //åˆ†ç¦»å‡ºæ¥çš„å‚æ•°ä¸ªæ•°char *cmd_args[SIZE];     //åˆ†ç¦»å‚æ•°cmd_args[0] = strtok(cmd_line, SEP);cmd_args_num = 1;while (cmd_args[cmd_args_num++] = strtok(NULL, SEP));cmd_args_num--;//è¿™é‡Œ-1æ˜¯å› ä¸ºwhileå¾ªç¯æœ€åä¼šå¤š++ 1æ¬¡\n\næ³¨æ„ï¼=èµ‹å€¼æ“ä½œç¬¦æ˜¯æœ‰è¿”å›å€¼çš„ï¼å®ƒçš„è¿”å›å€¼æ˜¯æˆ‘ä»¬çš„å·¦å€¼ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€æ¬¡è·å–åˆ°çš„strtokçš„ç»“æœï¼Œè¿™ä¸ªç»“æœè¢«cmd_args[cmd_args_num]æ‰€æ¥å—\né‚£ä¹ˆï¼Œå½“strtokè¿”å›NULLçš„æ—¶å€™ï¼Œwhileå°±ä¼šæ¥å—åˆ°=çš„è¿”å›å€¼ï¼Œä»è€Œåœæ­¢å¾ªç¯\nfor(int j=0;j&lt;cmd_args_num;j++)&#123;    printf(&quot;args[%d] %s\\n&quot;,j,cmd_args[j]);&#125;\n\né€šè¿‡æ‰“å°ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæˆåŠŸåˆ†ç¦»å‡ºæ¥äº†æˆ‘ä»¬çš„å‚æ•°\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ls -largs[0] lsargs[1] -l\n\nå•ç‹¬å¤„ç†lsåœ¨linuxçš„bashä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„lséƒ½æ˜¯å¸¦é¢œè‰²çš„ã€‚è¿™æ˜¯å› ä¸ºcentosçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå°†lsè®¾ç½®æˆäº†ls --color=autoçš„åˆ«åï¼Œè¦æƒ³æˆ‘ä»¬è‡ªå·±bashé‡Œé¢çš„lsä¹Ÿå¸¦ä¸Šé¢œè‰²ï¼Œåˆ™éœ€è¦å•ç‹¬å¤„ç†ä¸€ä¸‹ls\n// 3.åˆ†ç¦»å‡ºå‘½ä»¤å’Œå‚æ•°cmd_args[0] = strtok(cmd_line, SEP);cmd_args_num = 1;// ç»™lså‘½ä»¤æ·»åŠ é¢œè‰²if (strcmp(cmd_args[0], &quot;ls&quot;) == 0)    cmd_args[cmd_args_num++] = (char *)&quot;--color=auto&quot;;while (cmd_args[cmd_args_num++] = strtok(NULL, SEP));cmd_args_num--;//è¿™é‡Œ-1æ˜¯å› ä¸ºwhileå¾ªç¯æœ€åä¼šå¤š++ä¸€æ¬¡\n\næœ€ç»ˆls -låˆ†ç¦»å‡ºæ¥çš„å‚æ•°å¦‚ä¸‹\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ls -largs[0] lsargs[1] --color=autoargs[2] -l\n\n2.4 è¿›ç¨‹æ›¿æ¢å‚æ•°åˆ†ç¦»å‡ºæ¥äº†ï¼Œä¸‹ä¸€æ­¥è¦åšçš„ï¼Œä¾¿æ˜¯è¿›ç¨‹æ›¿æ¢äº†\næˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„æ˜¯execå‡½æ•°é‡Œé¢çš„å“ªä¸€ä¸ªå‘¢ï¼Ÿ\n\nå¸¦pçš„execå‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨å»PATHé‡Œé¢æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶\nå¸¦vçš„ï¼Œå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¼ å‚å·²ç»åˆ†ç¦»åœ¨äº†ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆæ•°ç»„é‡Œé¢\n\nåŸºæœ¬çš„ä»£ç å¦‚ä¸‹ï¼Œçˆ¶è¿›ç¨‹æ‰“å°å†…å®¹æ˜¯ä¸ºäº†æµ‹è¯•ï¼Œå®é™…çš„bashè‚¯å®šæ˜¯æ²¡æœ‰è¿™ä¸ªæ‰“å°çš„~\n// 6.åˆ›å»ºç¨‹åº æ›¿æ¢pid_t ret_id = fork();if (ret_id == 0) //å­è¿›ç¨‹&#123;    execvp(cmd_args[0], cmd_args); //ç¨‹åºæ›¿æ¢    exit(134);                     //æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå­è¿›ç¨‹ä¸€å®šæ›¿æ¢å¤±è´¥&#125;// çˆ¶è¿›ç¨‹int status = 0;pid_t ret = waitpid(ret_id, &amp;status, 0);printf(&quot;\\n&quot;);if (ret &gt; 0)&#123;    printf(&quot;bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: %d, sig: %d\\n&quot;, WEXITSTATUS(status), WTERMSIG(status));&#125;\n\nè¿è¡ŒæˆåŠŸï¼\n\næ‰§è¡Œpython3çš„æ–‡ä»¶ä¹Ÿæ˜¯okçš„\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# python3 test.pyargs[0] python3args[1] test.pyhello pythonbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]#\n\n3.å†…å»ºå‘½ä»¤å®Œæˆäº†ä¸Šé¢çš„å‡ æ­¥åï¼Œä¸€ä¸ªåŸºç¡€çš„bashå°±æå®šäº†\nä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿï¼Œä¸ä¿¡cdè¯•ä¸€ä¸‹ï¼Ÿ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# cd testbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\n è¯¶ï¼Œä¸ºä»€ä¹ˆcdäº†ä¹‹åï¼Œå†æ¬¡lsï¼Œè·¯å¾„æ²¡æœ‰å˜åŒ–å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„cdæ˜¯è¢«å­è¿›ç¨‹æ‰§è¡Œçš„ï¼Œåˆ‡æ¢çš„æ˜¯å­è¿›ç¨‹çš„å·¥ä½œç›®å½•ã€‚å¯å­è¿›ç¨‹æ‰§è¡Œå®Œcdä¹‹åå°±ç»“æŸè¿è¡Œäº†ï¼Œå®ƒæ ¹æœ¬æ²¡æœ‰å½±å“åˆ°çˆ¶è¿›ç¨‹bashï¼\n\nä¹‹å‰å­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°è¿‡å†…å»ºå‘½ä»¤è¿™ä¸€ä¸ªæ¦‚å¿µã€‚æœ‰ä¸€äº›å‘½ä»¤ä¸åº”è¯¥æ˜¯å­è¿›ç¨‹æ‰§è¡Œçš„ï¼Œè€Œåº”è¯¥æ˜¯bashè‡ªå·±æ‰§è¡Œçš„ï¼Œæ¯”å¦‚è¿™é‡Œçš„cdï¼Œè¿˜æœ‰å¯¼å…¥ç¯å¢ƒå˜é‡çš„export\nå…¶å®è¯´ç™½äº†å°±æ˜¯bashæ£€æµ‹åˆ°å†…å»ºå‘½ä»¤ï¼Œå°±æ‰§è¡Œä»–è‡ªå·±çš„ä¸€ä¸ªå‡½æ•°å‘—\n3.1 cdå’Œexportå‘½ä»¤cd/exportå‘½ä»¤ï¼Œcè¯­è¨€ä¸­éƒ½æœ‰ç°æˆçš„å‡½æ•°ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„\n//è¿™é‡Œå¯¼å…¥ç¯å¢ƒå˜é‡ä¹‹åï¼Œä¸ä¼šå½±å“linuxçš„shell//è€Œæ˜¯ä»æˆ‘ä»¬çš„myshellå¼€å§‹æ‰€æœ‰å­è¿›ç¨‹éƒ½ä¼šç»§æ‰¿int PutEnvIn(char *new_env)&#123;    putenv(new_env);    return 0;&#125;//ä¸ä½¿ç”¨å†…å»ºå‘½ä»¤ï¼Œåˆ™ä¸ä¼šç”Ÿæ•ˆint ChangeDir(const char *new_path)&#123;    chdir(new_path);    return 0; // è°ƒç”¨æˆåŠŸ&#125;\n\nä»¥ä¸‹æ˜¯mainå‡½æ•°é‡Œé¢çš„å†…å®¹ï¼Œå®Œæ•´ä»£ç è¯·å»æˆ‘çš„ä»£ç ä»“åº“æŸ¥çœ‹\n// 5.å†…å»ºå‘½ä»¤if (strcmp(cmd_args[0], &quot;cd&quot;) == 0 &amp;&amp; cmd_args[1] != NULL)&#123;    ChangeDir(cmd_args[1]); //è®©è°ƒç”¨æ–¹è¿›è¡Œè·¯å¾„åˆ‡æ¢, çˆ¶è¿›ç¨‹    continue;&#125;// ç›®å‰ï¼Œç¯å¢ƒå˜é‡ä¿¡æ¯åœ¨cmd_line,ä¼šè¢«æ¸…ç©º// æ­¤å¤„æˆ‘ä»¬éœ€è¦è‡ªå·±ä¿å­˜ä¸€ä¸‹ç¯å¢ƒå˜é‡å†…å®¹char env_buffer[SIZE][NUM];size_t env_num = 0; //ç¯å¢ƒå˜é‡çš„æ•°é‡if (strcmp(cmd_args[0], &quot;export&quot;) == 0 &amp;&amp; cmd_args[1] != NULL)&#123;    strcpy(env_buffer[env_num], cmd_args[1]);    PutEnvIn(env_buffer[env_num]);    env_num++;    continue;&#125;\n\nè¿™æ—¶å€™cdå°±èƒ½æ­£å¸¸æ‰§è¡Œäº†ï¼Œä¸è¿‡pwdè¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œæˆ‘æ²¡æƒ³å¥½è¦æ€ä¹ˆæ“ä½œæ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# cd test[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nè¯•ä¸€è¯•exportï¼Œä¹Ÿæ²¡é—®é¢˜å‘¢\n//test.cpp#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;ts= &quot; &lt;&lt; getenv(&quot;ts&quot;) &lt;&lt;endl;    return 0;&#125;\n\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# make testg++ test.cpp -o test -std=c++11bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# export ts=12341[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ./testts= 12341bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\n3.2 aliasåˆ«åè®¾ç½®ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤æœ‰ç°æˆçš„ï¼Œaliasçš„è®¾ç½®å°±éœ€è¦æˆ‘ä»¬æ‰‹å†™å•¦\n#define NUM 1024#define SIZE 128//å˜é‡ååˆ«åtypedef struct alias_cmd&#123;    char _cmd[SIZE];    char _acmd[SIZE];&#125; alias;alias cmd_alias[SIZE]; //ç¼“å­˜åˆ«åé”®å€¼å¯¹(ç»“æ„ä½“)size_t alias_num = 0;  //å·²ç¼“å­˜çš„åˆ«åä¸ªæ•°\n\nè¿™é‡Œæˆ‘å…ˆå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨æ¥å­˜æ”¾å˜é‡åˆ«åçš„é”®å€¼å¯¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ›¿æ¢\nç„¶åå°±æ˜¯æ¼«é•¿çš„æ›¿æ¢æ­¥éª¤ï¼Œè¿™éƒ¨åˆ†æˆ‘debugäº†éå¸¸ä¹…æ‰å†™å‡ºæ¥ï¼Œéƒ½å¸¦äº†æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹\n//è®¾ç½®åˆ«å(æ–°å‘½ä»¤ï¼ŒåŸå‘½ä»¤)void set_alias(char *cmd, char *acmd)&#123;    //æŸ¥æ‰¾åˆ«åé‡Œæ˜¯å¦å·²ç»æœ‰äº†è¿™ä¸ª    for (int i = 0; i &lt; alias_num; i++)    &#123;        if (strcmp(cmd_alias[i]._cmd, cmd) == 0) //æ˜¯å·²æœ‰çš„åˆ«å        &#123;            strcpy(cmd_alias[i]._acmd, acmd);            // printf(&quot;set cmd %s acmd %s\\n&quot;,cmd_alias[i]._cmd,cmd_alias[i]._acmd);            return;        &#125;    &#125;    //æ²¡æœ‰æå‰é€€å‡ºï¼Œè¯´æ˜æ˜¯æ–°å¢åˆ«å    strcpy(cmd_alias[alias_num]._cmd, cmd);    strcpy(cmd_alias[alias_num]._acmd, acmd);    alias_num++;&#125;//åˆ¤æ–­ä¸€ä¸ªå‘½ä»¤æ˜¯å¦æœ‰åˆ«åbool is_alias(char *cmd_args[], int sz)&#123;    int i = 0;    for (i = 0; i &lt; alias_num; i++)    &#123;        if (strcmp(cmd_alias[i]._cmd, cmd_args[0]) == 0) //æ˜¯åˆ«å        &#123;            size_t index = 1, j;            char *cmd_args_temp[SIZE];                                           //ä¸´æ—¶æ•°ç»„ç”¨äºåˆ†ç¦»åˆ«åé‡Œé¢çš„å‘½ä»¤            memset(cmd_line_alias, &#x27;\\0&#x27;, sizeof(cmd_line_alias) * sizeof(char)); //æ¸…ç©ºåˆ«åå‘½ä»¤ç¼“å­˜            //å…ˆæŠŠåˆ«åä¸­çš„å‘½ä»¤åˆ†å¼€            strcpy(cmd_line_alias, cmd_alias[i]._acmd); //ä¸èƒ½ç›´æ¥ä½¿ç”¨_acmdï¼Œä¸ç„¶ä¼šå½±å“ä¸‹æ¬¡åˆ«åä½¿ç”¨            cmd_args_temp[0] = strtok(cmd_line_alias, SEP);            //åˆ«åçš„æ—¶å€™ä¹Ÿéœ€è¦è®¾ç½®lsçš„é¢œè‰²ï¼ˆéœ€è¦ä¿è¯åŸæœ¬å‘½ä»¤çš„ç¬¬ä¸€ä¸ªä¸æ˜¯lsï¼Œä¸ç„¶æœ¬æ¥å°±å·²ç»æœ‰&quot;--color=auto&quot;äº†ï¼‰            if (strcmp(cmd_args_temp[0], &quot;ls&quot;) == 0 &amp;&amp; strcmp(cmd_args[0], &quot;ls&quot;) != 0)                cmd_args_temp[index++] = (char *)&quot;--color=auto&quot;;            while (cmd_args_temp[index++] = strtok(NULL, SEP))                ;            index--; // whileä¼šå¤š+1ï¼Œéœ€è¦é‡æ–°æ“ä½œä¸€ä¸‹            //ä»åŸæœ¬æ•°ç»„çš„ç¬¬äºŒä½å¼€å§‹å¾€åè®¾ç½®            for (j = 1; j &lt; cmd_args_num; j++)            &#123;                cmd_args_temp[index++] = cmd_args[j];            &#125;            //æ›¿æ¢æ‰åŸæœ¬çš„æ•°ç»„            cmd_args_num = index;              //æ­¤æ—¶çš„indexé•¿åº¦æ­£ç¡®ï¼Œä¸éœ€è¦-1            for (j = 0; j &lt; cmd_args_num; j++) //å› ä¸ºwhileæœ€åä¼šå¤š++ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦-1            &#123;                //åŸæœ¬çš„ä½ç½®æ²¡æœ‰é‚£ä¹ˆå¤§ç©ºé—´ï¼Œæ”¾ä¸ä¸‹ï¼Œä¸èƒ½æ‹·è´                // strcpy(cmd_args[j],cmd_args_temp[j]);                cmd_args[j] = cmd_args_temp[j];                // printf(&quot;temp[%d] %s   args[%d] %s\\n&quot;,j,cmd_args_temp[j],j,cmd_args[j]);            &#125;            cmd_args[j] = NULL; //æœ€åä¸€ä¸ªä½ç½®è®¾ç½®æˆNULL            return true;        &#125;    &#125;    return false;&#125;\n\nå…¶å®è‚¯å®šæ˜¯æœ‰æ›´å¥½çš„æ–¹æ¡ˆçš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æƒ³å‡ºæ¥å’‹å¼„ã€‚ç°åœ¨è¿™ä¸ªèƒ½è·‘å°±OKï¼Œå“ˆå“ˆ\nä»¥æœ€åŸºæœ¬çš„llå‘½ä»¤æ¥æµ‹è¯•ä»¥ä¸‹ï¼Œæ›¿æ¢æˆåŠŸï¼ä¿®æ”¹å·²æœ‰çš„åˆ«åä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# alias ll=&#x27;ls -l&#x27;[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lltotal 60-rw-rw-r-- 1 muxue muxue   136 Oct 15 23:21 makefile-rwxrwxr-x 1 muxue muxue 14040 Oct 16 17:05 myshell-rw-rw-r-- 1 muxue muxue  8217 Oct 16 16:59 myshell.c-rw-rw-r-- 1 muxue muxue  6942 Oct 15 22:38 myshell_err.c-rwxrwxr-x 1 muxue muxue  9072 Oct 16 17:08 test-rw-rw-r-- 1 muxue muxue   130 Oct 15 23:22 test.cpp-rw-rw-r-- 1 muxue muxue    21 Oct 16 00:11 test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# alias ll=&#x27;ls -l -a&#x27;[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lltotal 68drwxrwxr-x  2 muxue muxue  4096 Oct 16 17:08 .drwxrwxr-x 13 muxue muxue  4096 Oct 15 17:31 ..-rw-rw-r--  1 muxue muxue   136 Oct 15 23:21 makefile-rwxrwxr-x  1 muxue muxue 14040 Oct 16 17:05 myshell-rw-rw-r--  1 muxue muxue  8217 Oct 16 16:59 myshell.c-rw-rw-r--  1 muxue muxue  6942 Oct 15 22:38 myshell_err.c-rwxrwxr-x  1 muxue muxue  9072 Oct 16 17:08 test-rw-rw-r--  1 muxue muxue   130 Oct 15 23:22 test.cpp-rw-rw-r--  1 muxue muxue    21 Oct 16 00:11 test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nç»“è¯­å°±è¿™æ ·ï¼Œä¸€ä¸ªæœ€åŸºæœ¬çš„bashæˆ–è€…è¯´shellå°±è¢«æˆ‘ä»¬æå®šå•¦\nå…¶å®å†…å»ºå‘½ä»¤è¿œä¸æ­¢3é‡Œé¢æåˆ°çš„é‚£å‡ ä¸ªï¼Œä¸è¿‡æˆ‘ä»¬å­¦ä¹ çš„ç›®çš„å·²ç»è¾¾åˆ°äº†~ä¹Ÿæ²¡å¿…è¦æ­»ç£•åœ¨è¿™é‡Œ\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘æ–‡ä»¶IO","url":"/2022/11/01/note_Linux/14%E6%96%87%E4%BB%B6IO/","content":"è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹linuxä¸‹çš„æ–‡ä»¶æ¥å£å§ï¼\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šCentOS7.6\næœ¬æ–‡æ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨æˆ‘çš„giteeä»“åº“æŸ¥çœ‹ã€é“¾æ¥ã€‘\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿ\næ–‡ä»¶=æ–‡ä»¶å†…å®¹+æ–‡ä»¶å±æ€§ï¼Œæ–‡ä»¶å±æ€§ä¹Ÿæ˜¯æ•°æ®ï¼Œå³ä¾¿æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„\næ–‡ä»¶æ“ä½œ=æ–‡ä»¶å†…å®¹çš„æ“ä½œ+æ–‡ä»¶å±æ€§çš„æ“ä½œï¼Œåœ¨ä¹‹å‰linuxæƒé™çš„åšå®¢é‡Œé¢å°±æåˆ°è¿‡ï¼Œæ–‡ä»¶æ“ä½œæœ‰å¯èƒ½å³æ”¹å˜å†…å®¹ï¼Œåˆæ”¹å˜å±æ€§\næ–‡ä»¶æ‰“å¼€æ“ä½œå…¶å®æ˜¯æŠŠæ–‡ä»¶çš„å±æ€§å’Œå†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ²¡æœ‰è¢«æ‰“å¼€çš„æ–‡ä»¶ä¾æ—§å¤„äºç£ç›˜å½“ä¸­\nå½“å‰è·¯å¾„ä¸ºå½“å‰è¿›ç¨‹æ‰€å¤„çš„å·¥ä½œè·¯å¾„\n\næˆ‘ä»¬çš„æ‰“å¼€æ–‡ä»¶æ“ä½œéœ€è¦å’Œç£ç›˜è¿™ä¸ªç¡¬ä»¶æ‰“äº¤é“ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿæ‰èƒ½ç›´æ¥æ“ä½œç¡¬ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ–‡ä»¶æ“ä½œå…¶å®éƒ½æ˜¯è°ƒç”¨çš„ç³»ç»Ÿæ¥å£ã€‚\nå®é™…ä¸Šï¼Œæ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½å¯¹æ“ä½œç³»ç»Ÿæ¥å£è¿›è¡Œäº†å°è£…ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ä»–ä»¬çš„è·¨å¹³å°æ€§ã€‚å› ä¸ºä¸åŒæ“ä½œç³»ç»Ÿçš„å„ç§æ¥å£å„ä¸ç›¸åŒï¼Œå¦‚æœä¸è¿›è¡Œå°è£…ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿæ¥å£ï¼Œåˆ™è¯¥ä»£ç åªèƒ½åœ¨æŒ‡å®šç³»ç»Ÿä¸Šè·‘ï¼\n1.2 Cè¯­è¨€æ–‡ä»¶æ“ä½œåœ¨å­¦ä¹ Linuxä¸‹æ–‡ä»¶ç›¸å…³å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¤ä¹ ä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£\nvoid writetest()&#123;    char*file=&quot;test.txt&quot;;    FILE* f=fopen(file,&quot;w&quot;);    for(int i =0;i&lt;10;i++)    &#123;        fprintf(f,&quot;hello linux! %d\\n&quot;,i);    &#125;        fclose(f);    f=NULL;&#125;void readtest()&#123;    char*file=&quot;test.txt&quot;;    FILE* f=fopen(file,&quot;r&quot;);    char buff[128];//å°†è¯»å–åˆ°çš„æ•°æ®å†™å…¥buffæ•°ç»„é‡Œé¢    for(int i =0;i&lt;10;i++)    &#123;        fgets(buff,20,f);        printf(&quot;%s&quot;,buff);    &#125;    fclose(f);    f=NULL;&#125;\n\nè¿™é‡Œç”¨å¾ªç¯å…ˆå¾€test.txtå†…è¾“å…¥10è¡Œæ•°æ®ï¼Œå†è¯»å–å¹¶æ‰“å°åˆ°å±å¹•ä¸Š\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test1hello linux! 0hello linux! 1hello linux! 2hello linux! 3hello linux! 4hello linux! 5hello linux! 6hello linux! 7hello linux! 8hello linux! 9[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\né™¤äº†wå’Œræ–¹æ³•å¤–ï¼ŒCè¯­è¨€è¿˜æä¾›äº†w+ r+ aä»¥åŠå¸¦bçš„äºŒè¿›åˆ¶è¯»å†™\n\nè¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å»çœ‹çœ‹æˆ‘ä¹‹å‰çš„Cè¯­è¨€æ–‡ä»¶æ“ä½œåšå®¢ï¼\n\nCè¯­è¨€é»˜è®¤æ‰“å¼€äº†ä¸‰ä¸ªè¾“å…¥è¾“å‡ºæµï¼Œéƒ½æ˜¯ä¸€ä¸ªFILE*çš„æŒ‡é’ˆï¼Œåˆ†åˆ«ä¸ºstdin/stdout/stderrï¼Œè®°ä½è¿™ä¸ªç‚¹ï¼Œåé¢ä¼šç”¨åˆ°å“¦\n\n2.åˆè¯†Linuxç³»ç»Ÿçš„æ–‡ä»¶æ¥å£Linuxä¸‹çš„æ–‡ä»¶æ“ä½œç”¨çš„æ¥å£ä¸ºopen/write/readï¼Œéƒ½éœ€è¦å…ˆç”¨openæ‰“å¼€æ–‡ä»¶å¹¶æŒ‡å®šæ‰“å¼€æ–¹å¼åï¼Œå†ç”¨write/readæ“ä½œè¿›è¡Œè¯»å†™\n\næ³¨ï¼šmanæŸ¥è¯¢çš„æ—¶å€™éœ€è¦æŒ‡å®šman 2 openï¼Œå¦åˆ™æŸ¥è¯¢åˆ°çš„æ˜¯å‘½ä»¤ä¸æ˜¯å‡½æ•°æ¥å£\n\n\nè¿™é‡Œopenä¸€å…±æœ‰ä¸¤ä¸ªå‡½æ•°æ¥å£ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å‡½æ•°é‡è½½ï¼è¿™æ˜¯å› ä¸ºlinuxä¸‹çš„Cè¯­è¨€æ ‡å‡†å’Œæˆ‘ä»¬ä¹‹å‰åœ¨winä¸‹å­¦ä¹ æ‰€ç”¨çš„æ ‡å‡†æ˜¯ä¸ä¸€æ ·çš„ï¼\n\nç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpathnameï¼Œæ–‡ä»¶è·¯å¾„\nç¬¬äºŒä¸ªå‚æ•°ä¸ºflagsï¼Œæ‰“å¼€æ–‡ä»¶çš„æ–¹å¼\n\næ‰“å¼€æ–‡ä»¶çš„æ–¹å¼å¹¶ä¸åƒCè¯­è¨€ç”¨w/rç­‰ç­‰ä»£æ›¿ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ä¼ å…¥å¤šä¸ªflagè¿›è¡ŒæŒ‰ä½ä¸ï¼Œè¿™ä¸€ç‚¹å’ŒC++ä¸­çš„æ–‡ä»¶ç±»ä¸€æ ·ï¼\n\nè¿™é‡Œçš„flagå…¶å®æ˜¯ä¸€ç§ä½å›¾ç»“æ„ã€‚æ¯ä¸€ä¸ªflagåªéœ€è¦åœ¨ä¸€ä¸ªæ¯”ç‰¹ä½ä¸Šä¸º1ï¼ˆåè¿›åˆ¶2çš„å€æ•°ï¼‰å…¶ä½™ä½ä¸º0ï¼Œä¿è¯äº’ä¸å½±å“ã€‚è¿™æ ·åœ¨æŒ‰ä½ä¸çš„æ—¶å€™ï¼Œæ‰èƒ½æ­£ç¡®å‡‘åˆ°ä¸€èµ·ï¼Œå¹¶é€šè¿‡æŒ‰ä½æˆ–è¿›è¡Œflagçš„å–å‡º\n\n flagçš„å‚æ•°ä¸­ï¼Œä¸‹é¢è¿™ä¸‰ä¸ªå€¼ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªä¸”åªèƒ½æŒ‡å®šä¸€ä¸ª\n\nO_RDONLY: åªè¯»æ‰“å¼€\nO_WRONLY: åªå†™æ‰“å¼€\nO_RDWR: è¯»ï¼Œå†™æ‰“å¼€\n\nå‰©ä½™çš„å‚æ•°æ˜¯ç”¨ä½œé¢å¤–æ“ä½œçš„\n\nO_CREAT: è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›éœ€è¦ä¼ å…¥modeå‚æ•°ï¼Œæ¥æŒ‡æ˜æ–°æ–‡ä»¶çš„è®¿é—®æƒé™\nO_APPEND: è¿½åŠ å†™\nO_TRUNC: æ¸…ç©ºæ–‡ä»¶\nâ€¦â€¦\n\nå¸¸ç”¨çš„å‚æ•°å°±ä¸Šé¢è¿™äº›ï¼Œæ›´å¤šå‚æ•°å¯ä»¥ä½¿ç”¨man 2 openæŸ¥çœ‹å®Œæ•´flagåˆ—è¡¨\n\nè¿™ç§å¤§å†™+ä¸‹åˆ’çº¿çš„å‘½åæ–¹å¼å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒå…¶å®å°±æ˜¯ç³»ç»Ÿä¸­é¢„å…ˆå®šä¹‰å¥½çš„å®ï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œopenå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªintç±»å‹ï¼Œå®ƒè¢«ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼Œåé¢ä¼šæœ‰è¯¦è§£\n\n2.1 è¯»æ–‡ä»¶\nè¯»æ–‡ä»¶çš„æ“ä½œå’Œfgetsç±»ä¼¼ï¼Œéœ€è¦æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥åŠç”¨äºä¿å­˜æ–‡ä»¶å†…å®¹çš„bufï¼Œå’Œæ•°æ®é•¿åº¦count\n#define SIZE 256void test1()&#123;    char buf[SIZE];    int fd1 = open(&quot;test.txt&quot;, O_RDONLY);    read(fd1,buf,strlen(buf)-1);    ssize_t s = read(fd1, buf, sizeof(buf)-1);    if(s &gt; 0)    &#123;       buf[s] = &#x27;\\0&#x27;;       printf(&quot;%s&quot;, buf);    &#125;    close(fd1);&#125;\n\nssize_tæ˜¯æœ‰ç¬¦å·æ•´å‹ï¼Œå…¶å®å°±æ˜¯int\ntypedef int ssize_t\n\nè¿™é‡Œæˆ‘ä»¬æ‰“å¼€äº†åˆšåˆšæµ‹è¯•Cè¯­è¨€ç”¨çš„test.txtæ–‡ä»¶ï¼ŒæˆåŠŸè¯»å‡ºäº†é‡Œé¢çš„å†…å®¹\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testhello linux! 0hello linux! 1hello linux! 2hello linux! 3hello linux! 4hello linux! 5hello linux! 6hello linux! 7hello linux! 8hello linux! 9[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n2.2 å†™æ–‡ä»¶\næ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸åœ¨opençš„æ—¶å€™æŒ‡å®šç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå…¶åˆ›å»ºçš„æ–°æ–‡ä»¶ï¼Œæƒé™æ˜¯ä¹±æ‰çš„ã€‚è€Œå•ç»™ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥0666è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠç³»ç»Ÿçš„umaskåœ¨å½“å‰è¿›ç¨‹ä¸­è®¾ç½®ä¸º0ï¼Œä»¥é¿å…ç³»ç»Ÿumaskçš„é»˜è®¤å€¼å¯¹æˆ‘ä»¬åˆ›å»ºæ–‡ä»¶çš„æƒé™é€ æˆå½±å“\nvoid test2()&#123;    umask(0);//å…ˆæŠŠumaskè®¾ç½®ä¸º0ï¼Œä¿è¯æƒé™å€¼è®¾ç½®æ­£ç¡®ï¼Œä¸å—ç³»ç»Ÿumaskå½±å“    int fd = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);\t//è¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†0_CREATï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š0666ä½œä¸ºæƒé™å€¼    const char *str = &quot;bbbbbb\\n&quot;;    write(fd, str, strlen(str));    close(fd);&#125;\n\næ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®è¢«æˆåŠŸå†™å…¥\n\nè¿™é‡Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†O_TRUNCï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œæ–‡ä»¶å†…éƒ¨çš„å†…å®¹éƒ½ä¼šè¢«æ¸…ç©ºã€‚ä¿®æ”¹stråé‡æ–°è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°åŸæœ‰çš„å†…å®¹ä¸è§äº†\n\nå¦‚æœä¸æŒ‡å®šï¼Œå…¶ä¸ä¼šæ¸…ç©ºå·²æœ‰å†…å®¹ã€‚è€Œæ˜¯ä¼šä»å¼€å¤´è¿›è¡Œå†™å…¥ï¼Œè¦†ç›–å¼€å¤´å·²æœ‰çš„å†…å®¹ï¼ˆå·¦è¾¹ä¸ºå†™å…¥åï¼Œå³è¾¹ä¸ºå†™å…¥å‰ï¼‰\n\nå®é™…ä¸Šï¼ŒCè¯­è¨€çš„æ–‡ä»¶æ“ä½œï¼Œè°ƒç”¨çš„å°±æ˜¯linuxçš„æ–‡ä»¶æ¥å£\nfopen(&quot;test.txt&quot;, &quot;w&quot;); //åº•å±‚è°ƒç”¨openï¼ŒO_WRONLY | O_CREAT | O_TRUNCfopen(&quot;test.txt&quot;, &quot;a&quot;); //åº•å±‚è°ƒç”¨openï¼ŒO_WRONLY | O_CREAT | O_APPEND\n\nå†™æ–¹å¼è¦†ç›–ï¼Ÿåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„æƒ…å†µ\nvoid test2()&#123;    umask(0);//å…ˆæŠŠumaskè®¾ç½®ä¸º0ï¼Œä¿è¯æƒé™å€¼è®¾ç½®æ­£ç¡®ï¼Œä¸å—ç³»ç»Ÿumaskå½±å“    int fd1 = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT, 0666);    int fd2 = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fd1: %d  fd2: %d\\n&quot;,fd1,fd2);    const char *str = &quot;bbadsfasdfasdfa23123bbbb&quot;;    write(fd1, str, strlen(str));    close(fd1);&#125;\n\nè¿™é‡Œæˆ‘åˆ†åˆ«ç”¨fd1/fd2æ‰“å¼€äº†test.txtæ–‡ä»¶ï¼Œæ‰“å°å®ƒä»¬çš„æ–‡ä»¶æè¿°ç¬¦å¯ä»¥çœ‹åˆ°ï¼Œç»“æœä¸ä¸€æ ·\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testfd1: 3  fd2: 4[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nä½†æ˜¯ï¼Œæ‰§è¡Œçš„å†™å…¥ï¼Œå´æ˜¯ O_TRUNCçš„è¦†ç›–æ–¹æ³•ï¼\n\nå®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯fd2çš„å†™å…¥æ–¹æ³•è¦†ç›–äº†fd1çš„ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬ä½¿ç”¨ O_TRUNCæ–¹æ³•æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶é‡Œé¢çš„å†…å®¹å°±å·²ç»è¢«æ¸…ç©ºäº†ï¼\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œåˆšåˆšæ‰begin fd2çš„æ—¶å€™ï¼Œtest.txtçš„æ–‡ä»¶å¤§å°å°±å·²ç»å˜æˆ0äº†\nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå»ºè®®ä¸è¦åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢å¤šæ¬¡æ‰“å¼€ä¸€ä¸ªä¹‹å‰å·²ç»æ‰“å¼€è¿‡çš„æ–‡ä»¶ï¼\n3.æ–‡ä»¶æè¿°ç¬¦3.1 ä¸ºä»€ä¹ˆæ˜¯ä»3å¼€å§‹ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¸€æ¬¡æ€§æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œæ‰“å°ä»–ä»¬çš„æ–‡ä»¶æè¿°ç¬¦\nvoid test3()&#123;    int fda = open(&quot;loga.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdb = open(&quot;logb.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdc = open(&quot;logc.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdd = open(&quot;logd.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fde = open(&quot;loge.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fda: %d\\n&quot;, fda);    printf(&quot;fdb: %d\\n&quot;, fdb);    printf(&quot;fdc: %d\\n&quot;, fdc);    printf(&quot;fdd: %d\\n&quot;, fdd);    printf(&quot;fde: %d\\n&quot;, fde);&#125;\n\n\nä¼šå‘ç°æ‰“å°çš„æ–‡ä»¶æ˜¯ä»3å¼€å§‹çš„ã€‚è¿™å’Œæˆ‘ä»¬ä¹‹å‰æ˜¯å¦æœ‰æ‰“å¼€è¿‡æ–‡ä»¶æ²¡å…³ç³»ï¼Œä»»ä½•è¿›ç¨‹opençš„è‡ªå·±çš„æ–‡ä»¶éƒ½æ˜¯ä»3å¼€å§‹çš„ï¼\nè¿˜è®°å¾—å‰é¢Cè¯­è¨€éƒ¨åˆ†æåˆ°çš„stdin/stdout/stderrå—ï¼Ÿ\nlinuxç³»ç»Ÿä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè¿™ä¸‰ä¸ªå®¶ä¼™ä¹Ÿä¸ä¾‹å¤–ï¼æ—¢ç„¶Cè¯­è¨€çš„æ–‡ä»¶æ“ä½œå°è£…äº†ç³»ç»Ÿçš„æ¥å£ï¼Œé‚£ä¹ˆå…¶å†…éƒ¨è‚¯å®šæ˜¯æœ‰æ–‡ä»¶æè¿°ç¬¦çš„å­˜åœ¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°å®ƒå°±è¡Œäº†ã€‚\nè¿™ä¸€ç‚¹ï¼Œä»£ç è¡¥å…¨å°±å¯ä»¥å¸®å¿™äº†\n\nvoid test4()&#123;    //cè¯­è¨€ä¸­çš„FILEæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œé‡Œé¢ç®¡ç†äº†linuxç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦    printf(&quot;stdin %d\\n&quot;,stdin-&gt;_fileno);//  0    printf(&quot;stdout %d\\n&quot;,stdout-&gt;_fileno);// 1    printf(&quot;stderr %d\\n&quot;,stderr-&gt;_fileno);// 2    FILE* f1 = fopen(&quot;test.txt&quot;,&quot;w&quot;);    printf(&quot;f1 %d\\n&quot;,f1-&gt;_fileno);//3&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./teststdin 0stdout 1stderr 2f1 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\næ‰“å°ä¹‹åæˆ‘ä»¬å‘ç°ï¼Œå…¶0 1 2å°±æ˜¯è¢«Cè¯­è¨€çš„è¿™ä¸‰ä¸ªé»˜è®¤æ‰“å¼€çš„æ–‡ä»¶æµå ç”¨äº†ï¼Œè€Œæˆ‘ä»¬ç”¨Cè¯­è¨€fopenæ‰“å¼€çš„æ–‡ä»¶ï¼Œå…¶æ–‡ä»¶æè¿°ç¬¦ä¹Ÿæ˜¯ä»3å¼€å§‹çš„ï¼\n\nç”¨æ–‡ä»¶æè¿°ç¬¦è°ƒç”¨stdin&#x2F;outæ—¢ç„¶stdoutå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯1ï¼Œé‚£æˆ‘ä»¬å¯ä¸å¯ä»¥ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„æ¥å£å¾€å±å¹•ä¸Šè¾“å‡ºä¸œè¥¿å‘¢ï¼Ÿ\nvoid test5()&#123;    char buf[SIZE]=&quot;12345678910\\n&quot;;    write(1,buf,strlen(buf));&#125;\n\nå½“ç„¶æ˜¯å¯ä»¥çš„ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test12345678910[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nåŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·æ¥æ¥æ”¶ç”¨æˆ·è¾“å…¥\nvoid test6()&#123;    char buf[SIZE];    ssize_t s = read(0,buf,sizeof(buf));    if(s&gt;0)    &#123;        buf[s]=&#x27;\\0&#x27;;        printf(&quot;stdin: %s\\n&quot;,buf);    &#125;&#125;\n\n\nè¿è¡Œçš„æ—¶å€™ï¼Œç¨‹åºä¼šæŒ‚èµ·ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œç”±æ­¤å¯ä»¥æ‰“å°è·å–è¾“å…¥çš„ç»“æœğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ makegcc test.c -o test -std=c99[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testasdfasdfadfadfstdin: asdfasdfadfadf[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\n3.2 ä»0å¼€å§‹ï¼Ÿæ•°ç»„ä¸‹æ ‡ï¼\næ—¢ç„¶stdin/stdout/stderråˆ†åˆ«å¯¹åº”çš„æ˜¯0/1/2ï¼Œè€Œæˆ‘ä»¬æ‰“å¼€çš„è‡ªå·±çš„æ–‡ä»¶å¯¹åº”çš„æ˜¯3å¼€å§‹ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ï¼Œè¿™äº›æ•°å­—æ˜¯ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡å‘¢ï¼Ÿ\n\nä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ï¼Œå…¶æ•°æ®æ˜¯åœ¨å†…å­˜ä¸­çš„ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸è‚¯å®šéœ€è¦ç®¡ç†ä¸€ä¸ªè¿›ç¨‹å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ä¸‡ä¸€æœ‰â€œå¤§èªæ˜â€å¿˜è®°closeæ–‡ä»¶äº†ï¼Œè€Œæ“ä½œç³»ç»Ÿåˆæ²¡å»ç®¡ç†å·²æœ‰æ–‡ä»¶ï¼Œå…¶ä¸å°±ä¼šé€ æˆå†…å­˜æ³„æ¼å—ï¼Ÿ\nåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ä¸ªstruct fileï¼Œå…¶ç®¡ç†çš„å°±æ˜¯å·²ç»æ‰“å¼€äº†çš„æ–‡ä»¶\nstruct file&#123;    //åŒ…å«äº†æ–‡ä»¶çš„å†…å®¹+å±æ€§&#125;\n\nåŒæ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶å†…æ ¸è¿˜ä¼šè¢«æ’å…¥åˆ°è¿›ç¨‹çš„task_structä¸­ï¼Œå› ä¸ºä¸€ä¸ªè¿›ç¨‹æ˜¯å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶çš„ã€‚æ“ä½œç³»ç»Ÿåœ¨å¯¹å·²æ‰“å¼€æ–‡ä»¶è¿›è¡Œç®¡ç†çš„åŒæ—¶ï¼Œè¿˜éœ€è¦å¯¹ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼ˆçŸ¥é“æŸä¸ªæ–‡ä»¶æ˜¯è°æ‰“å¼€çš„ï¼‰\n\nä¸‹è½½çš„linuxæºç ä¸­ï¼Œtask_strcutçš„ä½ç½®å¦‚ä¸‹\nlinux-2.6.32.12/include/linux/sched.h\n\n\n\nè€Œæˆ‘ä»¬æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶å®å°±æ˜¯è¿›ç¨‹ä¸­ç®¡ç†æ–‡ä»¶çš„ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡ã€‚\n\nstruct files_struct &#123;  /*   * read mostly part   */\tatomic_t count;\tstruct fdtable *fdt;\tstruct fdtable fdtab;  /*   * written part on a separate cache line in SMP   */\tspinlock_t file_lock ____cacheline_aligned_in_smp;\tint next_fd;\tstruct embedded_fd_set close_on_exec_init;\tstruct embedded_fd_set open_fds_init;\tstruct file * fd_array[NR_OPEN_DEFAULT];//æ–‡ä»¶æ•°ç»„&#125;;\n\nè¿™æ ·å¯¹è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶çš„ç®¡ç†ï¼Œå°±è¢«è½¬åŒ–ä¸ºäº†å¯¹è¿™ä¸ªæ•°ç»„çš„å¢åˆ æŸ¥æ”¹\n3.3 Linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶æœ€åˆå­¦ä¹ Linuxçš„æ—¶å€™ï¼Œå°±æåˆ°äº†Linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å†…æ ¸ä¸­æ˜¯ç”¨fileç»“æ„ä½“æ¥ç®¡ç†æ–‡ä»¶çš„ï¼Œé‚£ä¹ˆï¼Œå®ƒæ˜¯æ€ä¹ˆç”¨æ–‡ä»¶æ¥ç®¡ç†é”®ç›˜ã€é¼ æ ‡ã€æ˜¾ç¤ºå™¨ã€ç£ç›˜ã€ç½‘å¡çš„å‘¢ï¼Ÿ\nè¿™æ—¶å€™å°±å¯ä»¥æ¥â€œæµ…æµ…â€çš„çœ‹ä¸€ä¸‹æºç äº†ï¼ä¸æ±‚çœ‹æ‡‚ä»£ç å®ç°ï¼Œåªæ±‚ç†è§£ç†å¿µ\n\nstruct fileä½äºinclude/linux/fs.hä¸­\n\nstruct file &#123;\t/*\t * fu_list becomes invalid after file_free is called and queued via\t * fu_rcuhead for RCU freeing\t */\tunion &#123;\t\tstruct list_head\tfu_list;\t\tstruct rcu_head \tfu_rcuhead;\t&#125; f_u;\tstruct path\t\tf_path;#define f_dentry\tf_path.dentry#define f_vfsmnt\tf_path.mnt\tconst struct file_operations\t*f_op;\tspinlock_t\t\tf_lock;  /* f_ep_links, f_flags, no IRQ */\tatomic_long_t\t\tf_count;\tunsigned int \t\tf_flags;\tfmode_t\t\t\tf_mode;\tloff_t\t\t\tf_pos;\tstruct fown_struct\tf_owner;\tconst struct cred\t*f_cred;\tstruct file_ra_state\tf_ra;\tu64\t\t\tf_version;#ifdef CONFIG_SECURITY\tvoid\t\t\t*f_security;#endif\t/* needed for tty driver, and maybe others */\tvoid\t\t\t*private_data;#ifdef CONFIG_EPOLL\t/* Used by fs/eventpoll.c to link all the hooks to this file */\tstruct list_head\tf_ep_links;#endif /* #ifdef CONFIG_EPOLL */\tstruct address_space\t*f_mapping;#ifdef CONFIG_DEBUG_WRITECOUNT\tunsigned long f_mnt_write_state;#endif&#125;;\n\nå…¶ä½™å†…å®¹ç”¨æ¥å¹²å“ˆå­çš„å’±æš‚ä¸”ä¸ç®¡ï¼Œç›®å…‰èšç„¦äºè¿™ä¸€ä¸ªç»“æ„ä½“\nconst struct file_operations\t*f_op;\n\nç¿»è¯‘è¿‡æ¥ï¼Œè¿™ä¸ªæˆå‘˜çš„åå­—ä¸ºæ–‡ä»¶æ“ä½œã€‚å†æ¥å¤ä¹ ä¸€ä¸‹constä¿®é¥°æŒ‡é’ˆçš„çŸ¥è¯†ç‚¹\n\nconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\n\nåœ¨è¿™ä¸ªç»“æ„ä½“ä¸­ï¼Œå°±æœ‰read/writeæ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°æŒ‡é’ˆ\nstruct file_operations &#123;\tstruct module *owner;\tloff_t (*llseek) (struct file *, loff_t, int);\tssize_t (*read) (struct file *, char __user *, size_t, loff_t *);\tssize_t (*write) (struct file *, const char __user *, size_t, loff_t *);\tssize_t (*aio_read) (struct kiocb *, const struct iovec *, unsigned long, loff_t);\tssize_t (*aio_write) (struct kiocb *, const struct iovec *, unsigned long, loff_t);\tint (*readdir) (struct file *, void *, filldir_t);\tunsigned int (*poll) (struct file *, struct poll_table_struct *);\tint (*ioctl) (struct inode *, struct file *, unsigned int, unsigned long);\tlong (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);\tlong (*compat_ioctl) (struct file *, unsigned int, unsigned long);\tint (*mmap) (struct file *, struct vm_area_struct *);\tint (*open) (struct inode *, struct file *);\tint (*flush) (struct file *, fl_owner_t id);\tint (*release) (struct inode *, struct file *);\tint (*fsync) (struct file *, struct dentry *, int datasync);\tint (*aio_fsync) (struct kiocb *, int datasync);\tint (*fasync) (int, struct file *, int);\tint (*lock) (struct file *, int, struct file_lock *);\tssize_t (*sendpage) (struct file *, struct page *, int, size_t, loff_t *, int);\tunsigned long (*get_unmapped_area)(struct file *, unsigned long, unsigned long, unsigned long, unsigned long);\tint (*check_flags)(int);\tint (*flock) (struct file *, int, struct file_lock *);\tssize_t (*splice_write)(struct pipe_inode_info *, struct file *, loff_t *, size_t, unsigned int);\tssize_t (*splice_read)(struct file *, loff_t *, struct pipe_inode_info *, size_t, unsigned int);\tint (*setlease)(struct file *, long, struct file_lock **);&#125;;\n\nlinuxæ“ä½œç³»ç»Ÿå†…çš„æ–‡ä»¶ç³»ç»Ÿä»¥ç»Ÿä¸€çš„æ–¹å¼çœ‹å¾…æ‰€æœ‰çš„è®¾å¤‡ã€‚\nç‰¹å®šçš„è®¾å¤‡çš„read/writeæ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œåªéœ€è¦åœ¨è¿™äº›ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºä¸­ç»™æ“ä½œç³»ç»Ÿæä¾›è¯»å†™è¿™ä¸ªè®¾å¤‡çš„å‡½æ•°å®ç°ï¼Œæ“ä½œç³»ç»Ÿåˆ™å°†å‡½æ•°æŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„å‡½æ•°ï¼Œä¾¿èƒ½å®ç°å¯¹æŸä¸€ä¸ªç¡¬ä»¶è®¾å¤‡çš„æ“ä½œï¼\næ¯”å¦‚è°ƒç”¨æ˜¾ç¤ºå™¨é©±åŠ¨çš„writeåˆ·æ–°æ˜¾ç¤ºå™¨çš„ç”»é¢ï¼Œè°ƒç”¨ç½‘å¡çš„read/writeæ¥ä¸‹è½½/ä¸Šä¼ æ•°æ®ç­‰ç­‰ï¼\n\n\n3.4 åˆ†é…è§„åˆ™åˆ†é…æ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™ï¼Œä¼šä»å¤´å¼€å§‹éå†fd_array[]ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ä¸‹æ ‡ï¼Œåˆ†é…ç»™æ–°çš„æ–‡ä»¶ï¼\nvoid test7()&#123;    int fda = open(&quot;loga.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdb = open(&quot;logb.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);        printf(&quot;fda: %d\\n&quot;, fda);    printf(&quot;fdb: %d\\n&quot;, fdb);    close(fda);    printf(&quot;\\n&quot;);    int fdc = open(&quot;logc.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fdc: %d\\n&quot;, fdc);&#125;\n\nä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆæ‰“å¼€äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰“å°å¯ä»¥çœ‹åˆ°å…¶æ–‡ä»¶æè¿°ç¬¦ä¸º3/4ï¼›å…³æ‰ç¬¬ä¸€ä¸ªæ–‡ä»¶åï¼Œå†æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶æè¿°ç¬¦è¿˜æ˜¯3ï¼ˆç¬¬ä¸€ä¸ªä¸ºç©ºçš„æ–‡ä»¶æè¿°ç¬¦ï¼‰\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testfda: 3fdb: 4fdc: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¾“å‡ºé‡å®šå‘åŒç†ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ‰“å¼€æ–‡ä»¶ä¹‹å‰ï¼Œå°±å…³é—­æ‰Cè¯­è¨€æ‰“å¼€çš„stdoutï¼Œé‚£ä¹ˆæ­¤æ—¶æ‰“å¼€æ–‡ä»¶çš„fdå°±ä¸º1ï¼Œæˆ‘ä»¬çš„printfåˆ™ä¼šæŠŠæ•°æ®æ‰“å°åˆ°è¯¥æ–‡ä»¶å½“ä¸­ï¼\nvoid test8()&#123;    //æ–‡ä»¶æè¿°ç¬¦åˆ†é…çš„æ—¶å€™ï¼Œä¼šåœ¨æ•°ç»„é‡Œé¢æ‰¾ç¬¬ä¸€ä¸ªä¸ºç©ºçš„æè¿°ç¬¦    printf(&quot;start test!\\n&quot;);//æ‰“å°åˆ°å±å¹•ä¸Š    close(1);//å…³é—­stdout    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fd: %d\\n&quot;,fd);//æ‰“å°åˆ°æ–‡ä»¶ä¸­    close(fd);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œ./testä¹‹å‰ï¼Œæ–‡ä»¶é‡Œé¢æ²¡æœ‰å†…å®¹ã€‚æ‰§è¡Œä¹‹åï¼Œå°±æŠŠæˆ‘ä»¬printfçš„æ•°æ®è¾“å‡ºåˆ°æ–‡ä»¶å½“ä¸­äº†ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./teststart test![muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtfd: 1[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¿™ç§æ“ä½œå°±å«åšè¾“å‡ºé‡å®šå‘ï¼\nå¦å¤–ä¸€ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å…³é—­stdoutä¹‹å‰ä¸è¿›è¡Œprintfï¼Œåˆ™ä¸ä¼šç«‹é©¬åˆ·æ–°åˆ°log.txtè€Œæ˜¯éœ€è¦æˆ‘ä»¬åˆ·æ–°äº†ç¼“å†²åŒºä¹‹åï¼Œæ‰ä¼šå†™å…¥åˆ°æ–‡ä»¶ä¸­\nclose(1);//å…³é—­stdoutint fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);printf(&quot;fd: %d\\n&quot;,fd);fflush(stdout);close(fd);\n\nè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§&gt;log.txtå¯ä»¥ç”¨æ¥æ¸…ç©ºæ–‡ä»¶çš„å†…å®¹\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$\n\n\n3.5 dup2ä¸Šé¢æ˜¯æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œçš„è¾“å‡ºé‡å®šå‘æ“ä½œã€‚æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œè¾“å‡ºé‡å®šå‘\nint dup2(int oldfd, int newfd);\n\n\nè¿™é‡Œæˆ‘ä»¬è¦ç”¨çš„æ˜¯dup2å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å¦‚ä¸‹\ndup2() makes newfd be the copy of oldfd, closing newfd first if necessary, but note the following:*  If oldfd is not a valid file descriptor, then the call fails, and newfd is not closed.*  If oldfd is a valid file descriptor, and newfd has the same value as oldfd, then dup2() does nothing, and returns newfd.\n\nä¸€å®šè¦çœ‹æ¸…æ¥šï¼Œæ˜¯å°†newfdå˜æˆoldfdçš„ä¸€ä¸ªæ‹·è´ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå°±åªå‰©oldfdäº†ï¼\nå¦‚æœnewfdåŸæœ¬å·²ç»æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ“ä½œä¼šå…ˆå°†newfdç»™å…³æ‰\nRETURN VALUEOn success, these system calls return the new descriptor.  On error, -1 is returned, and errno is set appropriately.\n\nè¯¥å‡½æ•°æˆåŠŸçš„æ—¶å€™ä¼šè¿”å›newfdï¼Œå¦åˆ™è¿”å›-1\n\nä¸‹é¢ä¸ºä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå‡è®¾æˆ‘ä»¬æƒ³å°†è¾“å‡ºçš„å†…å®¹é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨dup2å°†1æ›¿æ¢ä¸ºæˆ‘ä»¬è‡ªå·±çš„fdï¼Œæ­¤æ—¶oldfd=fd,newfd=1\nvoid test9()&#123;    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    dup2(fd, 1);    int ret = dup2(fd, 1);    if(ret &gt; 0)         close(fd);    printf(&quot;ret: %d\\n&quot;, ret);//retä¸ºnewfd    //æœ¬æ¥å¾€æ˜¾ç¤ºå™¨æ‰“å°ï¼Œæœ€ç»ˆå˜æˆå‘æŒ‡å®šæ–‡ä»¶æ‰“å° -&gt; é‡å®šå‘    fprintf(stdout, &quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: %d\\n&quot;, fd);    fflush(stdout);//åˆ·æ–°ç¼“å†²åŒº    close(fd);&#125;\n\nç»“æœå¦‚ä¸‹ï¼Œæˆ‘ä»¬æˆåŠŸçš„å°†å†…å®¹printfåˆ°äº†æŒ‡å®šæ–‡ä»¶ä¸­\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\nä¸ºä»€ä¹ˆè¿™é‡Œå¯ä»¥ç”¨stdoutæ¥è¾“å‡ºåˆ°æ–‡ä»¶ä¸­å‘¢ï¼Ÿ\n\nå› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨dup2çš„æ—¶å€™ï¼Œstdoutæ‰€æŒ‡å‘çš„æ–‡ä»¶æè¿°ç¬¦1å·²ç»è¢«æ›¿æ¢æˆäº†log.txtï¼Œæ­¤æ—¶å¯¹stdoutçš„æ“ä½œå°±æ˜¯å¯¹æˆ‘ä»¬è‡ªå·±çš„æ–‡ä»¶æ“ä½œ\n\nä¸ºä»€ä¹ˆè¿™é‡Œæˆ‘ä»¬å·²ç»æŠŠfdå…³æ‰äº†ï¼Œä½†æ˜¯æ›¿æ¢æ‰çš„æ–‡ä»¶æè¿°ç¬¦1ä¸å—å½±å“å‘¢ï¼Ÿ\n\nåŒä¸€ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥è¢«æ‰“å¼€å¤šæ¬¡çš„ï¼æ‰§è¡Œdup2çš„æ—¶å€™ï¼Œå¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿåˆä¸€æ¬¡æ‰“å¼€äº†fdæŒ‡å‘çš„æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶åº•å±‚ï¼Œåˆ™æœ‰ä¸€ä¸ªè®¡æ•°æ¥åˆ¤æ–­è¯¥æ–‡ä»¶è¢«æ‰“å¼€äº†å‡ æ¬¡ã€‚å½“æˆ‘ä»¬close(fd)çš„æ—¶å€™ï¼Œåªæ˜¯è®©è¯¥æ–‡ä»¶åº•å±‚struct fileçš„æ‰“å¼€è®¡æ•°-1ï¼Œå¹¶éå®Œå…¨å…³é—­äº†è¯¥æ–‡ä»¶ï¼æ­¤æ—¶1è¿˜èƒ½æ­£ç¡®æŒ‡å‘log.txtå‘¢\nè¿½åŠ é‡å®šå‘è¿™é‡Œåªéœ€è¦æˆ‘ä»¬æ”¹å˜fdæ‰“å¼€çš„æ–¹å¼ï¼ŒåŠ ä¸ŠO_APPENDå³å¯ï¼\nvoid test9()&#123;    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_APPEND, 0666);    dup2(fd, 1);    int ret = dup2(fd, 1);//    if(ret &gt; 0)         close(fd);    printf(&quot;ret: %d\\n&quot;, ret);//retä¸ºnewfd    //æœ¬æ¥å¾€æ˜¾ç¤ºå™¨æ‰“å°ï¼Œæœ€ç»ˆå˜æˆå‘æŒ‡å®šæ–‡ä»¶æ‰“å° -&gt; é‡å®šå‘    fprintf(stdout, &quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: %d\\n&quot;, fd);    fflush(stdout);//åˆ·æ–°ç¼“å†²åŒº    close(fd);&#125;\n\nè¿è¡Œå¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸåœ¨åé¢è¿½åŠ \n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¾“å…¥é‡å®šå‘//è¾“å…¥é‡å®šå‘void test11()&#123;    int fd = open(&quot;log.txt&quot;,O_RDONLY);    if(fd&lt;0)    &#123;        perror(&quot;open&quot;);        return ;    &#125;    int ret = dup2(fd,0);//é‡å®šå‘stdin    if(ret &gt; 0)         close(fd);    char buf[128];    while(fgets(buf,sizeof(buf),stdin)!=NULL)    &#123;        printf(&quot;%s&quot;,buf);    &#125;&#125;\n\næ­¤æ—¶æˆ‘ä»¬çš„stdinè¢«dup2æ›¿æ¢æˆäº†log.txtï¼Œå…¶è·å–è¾“å…¥çš„æ“ä½œè½¬ä¸ºäº†è¯»å–æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n3.6 æ ‡å‡†è¾“å‡º&#x2F;æ ‡å‡†é”™è¯¯ä¹‹å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸ç›´æ¥ä½¿ç”¨äº†printfæ¥æ‰“å°ä¸€äº›é”™è¯¯ä¿¡æ¯ï¼Œè€Œæ²¡æœ‰æ€ä¹ˆç”¨è¿‡perror/cerrè¿™ä¸¤ä¸ªåº“å‡½æ•°\né‚£ä¹ˆå®ƒä»¬å’Œprintf/coutåˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nint main()&#123;    // stdout    printf(&quot;hello printf\\n&quot;);    fprintf(stdout, &quot;hello fprintf to stdout\\n&quot;);    fputs(&quot;hello fputs to stdout\\n&quot;, stdout);    cout &lt;&lt; &quot;hello cout&quot; &lt;&lt; endl;    // stderr    perror(&quot;hello perror&quot;);    fprintf(stderr, &quot;hello fprintf to stderr\\n&quot;);    fputs(&quot;hello fputs to stderr\\n&quot;, stderr);    cerr &lt;&lt; &quot;hello cerr&quot; &lt;&lt; endl;    return 0;&#125;\n\næµ‹è¯•å‘ç°ï¼Œä¼¼ä¹æ²¡æœ‰å•¥åŒºåˆ«å•Šï¼Œä¸éƒ½æ‰“å°åˆ°å±å¹•ä¸Šäº†å—ï¼Ÿ\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./testhello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\néä¹Ÿï¼å½“æˆ‘ä»¬ä½¿ç”¨é‡å®šå‘çš„æ—¶å€™ï¼Œå°±å‡ºç°é—®é¢˜äº†\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &gt;log.txthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello cout[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\næ¬¸ï¼Ÿä¸æ˜¯ä½¿ç”¨äº†é‡å®šå‘å—ï¼Œä¸ºä»€ä¹ˆè¿˜åœ¨å±å¹•ä¸Šè¾“å‡ºäº†å†…å®¹å‘¢ï¼Ÿ\nä»”ç»†ä¸€çœ‹ï¼Œè¾“å‡ºçš„éƒ½æ˜¯stderrçš„å†…å®¹ï¼Œè€Œæ²¡æœ‰stdoutã€‚catæ–‡ä»¶ä¸€çœ‹ï¼Œstdoutçš„å†…å®¹éƒ½åœ¨æ–‡ä»¶é‡Œé¢å˜ï¼\nè¿˜è®°å¾—å—ï¼Ÿstdout/stderrå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯1/2ï¼Œè€Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½æŒ‡å‘çš„æ˜¯æ˜¾ç¤ºå™¨ã€‚\n\næ³¨æ„ï¼šè™½ç„¶å®ƒä»¬ä¸¤ä¸ªæŒ‡å‘éƒ½æ˜¯æ˜¾ç¤ºå™¨ï¼Œä½†å®ƒä»¬æ˜¯é€šè¿‡ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œç‹¬ç«‹åœ°å¾€æ˜¾ç¤ºå™¨ä¸Šæ‰“å°å†…å®¹çš„ï¼\n\næˆ‘ä»¬é‡å®šå‘çš„æ—¶å€™ï¼Œå…¶å®çœç•¥äº†ä¸€ä¸ª1ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé‡å®šå‘åªå¯¹1å·æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯stdoutæœ‰æ•ˆï¼\n./test &gt;log.txt./test 1&gt;log.txt\n\nå¦‚æœæˆ‘ä»¬æŠŠè¿™é‡Œçš„1æ¢æˆ2ï¼Œç»“æœå°±ä¸ä¸€æ ·äº†\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test 2&gt;log.txthello printfhello fprintf to stdouthello fputs to stdouthello cout[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\nå¯ä»¥çœ‹åˆ°ï¼Œstderrçš„å†…å®¹è¿›äº†æ–‡ä»¶ï¼Œè€Œstdoutçš„å†…å®¹è¾“å‡ºåˆ°äº†å±å¹•ä¸Š\nåŒºåˆ†é”™è¯¯å’Œæ­£å¸¸è¾“å‡ºè¿™ä¹ˆè®¾è®¡çš„æ„ä¹‰ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å®šä½é—®é¢˜ã€‚å°†é”™è¯¯å’Œæ­£å¸¸çš„æ‰“å°è¾“å‡ºå†™é“ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚å¦‚æœæˆ‘ä»¬åƒåªå…³æ³¨é”™è¯¯ï¼Œå°±åªéœ€è¦å»æŸ¥æ‰¾è®°å½•äº†é”™è¯¯ä¿¡æ¯çš„æ–‡ä»¶å³å¯\næ··åˆè¾“å‡º2&gt;&amp;1å¦‚æœæˆ‘ä»¬å°±æ˜¯ä¸å¬ä¸å¬ï¼Œéè¦æŠŠä»–ä¿©æ‰“ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåº”è¯¥æ€ä¹ˆå¼„å‘¢ï¼Ÿ\n./test &gt;log.txt 2&gt;&amp;1\n\nè¿™ä¸ª2&gt;&amp;1çš„æ“ä½œéœ€è¦æˆ‘ä»¬ç†è§£ï¼š\n\n./testè¿è¡Œå¯æ‰§è¡Œç¨‹åº\n&gt;log.txtä»£è¡¨é‡å®šå‘ï¼Œé»˜è®¤åªé‡å®šå‘äº†1\nç°åœ¨æŒ‡å‘log.txtçš„æ˜¯1å·æ–‡ä»¶æè¿°ç¬¦ï¼Œä»£è¡¨stdout\n2&gt;&amp;1ä»£è¡¨å°†2é‡å®šå‘åˆ°1ï¼Œå¯ä»¥ç†è§£ä¸ºdup2(1,2);\næ‰§è¡Œç»“æŸåï¼Œ2å°±æˆäº†1çš„ä¸€ä»½æ‹·è´ï¼Œç°åœ¨åªå‰©ä¸‹äº†1\nå› ä¸º1æŒ‡å‘çš„æ˜¯log.txtï¼Œæ‰€ä»¥2ä¹ŸæŒ‡å‘çš„æ˜¯ç›¸åŒæ–‡ä»¶\n\nè€Œè¿™ä¸ªè¯­å¥å¿…é¡»å†™åœ¨&gt;log.txtçš„åé¢ï¼Œ å¦åˆ™æ„ä¹‰å°±é”™è¯¯äº†ğŸ‘‡\n./test 2&gt;&amp;1 &gt;log.txt #é”™è¯¯å†™æ³•\n\n\n2&gt;&amp;1ä»£è¡¨å°†2é‡å®šå‘åˆ°1ï¼Œæ­¤æ—¶1æŒ‡å‘çš„æ˜¯å±å¹•ï¼Œæ‰€ä»¥2ä¹ŸæŒ‡å‘äº†å±å¹•\n&gt;log.txtä»£è¡¨å°†1æŒ‡å‘æ–‡ä»¶ï¼Œæ­¤æ—¶1æŒ‡å‘äº†æ–‡ä»¶ï¼Œä½†æ˜¯2è¿˜æ˜¯æŒ‡å‘å±å¹•\nç™½å†™ï¼\n\næ‰§è¡Œäº†æ­£ç¡®çš„å‘½ä»¤åï¼Œæ¥çœ‹çœ‹ç»“æœå§ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &gt;log.txt 2&gt;&amp;1[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\næ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºçš„å†…å®¹éƒ½è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­äº†ï¼\nä¸Šé¢çš„æ•´æ³•å®åœ¨æœ‰ç‚¹å¤ªé•¿äº†ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½è®°ä¸ä½å†™åäº†ã€‚æ‰€ä»¥æœ‰ä¸€ç§ç®€å†™çš„æ–¹å¼\n#ç®€å†™æ–¹å¼&amp;&gt;log.txt#ä¸Šé¢çš„å†™æ³•ç­‰åŒäº&gt;log.txt 2&gt;&amp;1\n\næµ‹è¯•ä¸€ä¸‹ï¼Œæ²¡é—®é¢˜ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &amp;&gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\n\nå…³äº2&gt;&amp;1çš„è¯¦è§£å‚è€ƒğŸ‘‰ ä¼ é€é—¨\n\n\n4.Cè¯­è¨€ç¼“å†²åŒº4.1 è§‚å¯Ÿç°è±¡å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼Œåˆ†åˆ«è°ƒç”¨Cè¯­è¨€çš„printfå’Œæ“ä½œç³»ç»Ÿçš„writeæ¥å£ï¼Œå¾€å±å¹•ä¸Šæ‰“å°å†…å®¹ã€‚ç»“æŸåsleep(3)\nvoid test1()&#123;    printf(&quot;test printf &quot;);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));    sleep(3);&#125;\n\n\næˆ‘ä»¬æƒŠå¥‡çš„å‘ç°ï¼Œç¬¬ä¸€ä¸ªæ‰“å°å‡ºæ¥çš„ç«Ÿç„¶æ˜¯writeï¼Œè€Œä¸æ˜¯åœ¨å®ƒä¹‹å‰çš„printfæ¥å£ï¼\nvoid test1()&#123;    printf(&quot;test printf &quot;);    fflush(stdout);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));        sleep(3);&#125;\n\nåªæœ‰åœ¨printfåç«‹é©¬è°ƒç”¨fflushåˆ·æ–°ç¼“å†²åŒºï¼Œæ‰èƒ½æŒ‰æ­£ç¡®çš„â€œé¡ºåºâ€æ‰“å°å‡ºå†…å®¹æ¥\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest printf test write [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nåœ¨è°ƒç”¨å…¶ä»–Cè¯­è¨€çš„å‡½æ•°ï¼Œå¾€å±å¹•ä¸Šè¾“å‡ºä¿¡æ¯ã€‚æˆ‘ä»¬ä¼šå‘ç°ç»“æœç›¸åŒï¼éƒ½æ˜¯å…ˆæ‰“å°å‡ºæ¥writeç»“æœï¼Œæ‰ä¸€æ¬¡æ€§æ‰“å°å‡ºæ‰€æœ‰Cè¯­è¨€å‡½æ•°çš„ç»“æœ\nvoid test2()&#123;    printf(&quot;test printf &quot;);    fprintf(stdout,&quot;test fprintf &quot;);    fputs(&quot;test fputs &quot;,stdout);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));        sleep(3);&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest write test printf test fprintf test fputs [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nç”±æ­¤å¯è§ï¼Œä¹‹å‰æˆ‘ä»¬ä¸€ç›´æåˆ°çš„ç¼“å†²åŒºï¼Œå…¶å®æ˜¯Cè¯­è¨€æä¾›çš„ï¼\n\næ³¨æ„ï¼šç¼“å†²åŒºä¸æ­¢Cè¯­è¨€å†…éƒ¨æœ‰ï¼Œæ“ä½œç³»ç»Ÿå†…ä¹Ÿæœ‰ã€‚æœ¬æ–‡åªè®¨è®ºCè¯­è¨€æä¾›çš„ç¼“å†²åŒº\n\n\n4.2 ç¼“å†²åŒºåœ¨å“ª?printf(&quot;test printf &quot;);fprintf(stdout,&quot;test fprintf &quot;);fputs(&quot;test fputs &quot;,stdout);\n\nä¸Šé¢è¿™å‡ ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå®ƒä»¬éƒ½å¾€stdouté‡Œé¢æ‰“å°äº†å†…å®¹ï¼\n\nprintfè™½ç„¶æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šstdoutï¼Œä½†æ˜¯åº•å±‚æ˜¯æœ‰çš„\n\næˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªFILEç±»å‹çš„ç»“æ„ä½“ã€‚è¯¥ç»“æ„ä½“å†…å°è£…äº†å¾ˆå¤šå±æ€§ï¼Œå…¶ä¸­stdoutçš„_filenoæ–‡ä»¶æè¿°ç¬¦ï¼Œå°±æ˜¯è¯¥FILEå¯¹åº”çš„è¯­è¨€çº§åˆ«çš„ç¼“å†²åŒºï¼\nå…³é—­æ–‡ä»¶æè¿°ç¬¦å¦‚æœæˆ‘ä»¬åœ¨æ•°æ®åˆ·æ–°ä¹‹å‰ï¼Œå…³é—­äº†stdoutå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nprintf(&quot;test printf &quot;);fprintf(stdout,&quot;test fprintf &quot;);fputs(&quot;test fputs &quot;,stdout);const char*msg = &quot;test write &quot;;write(stdout-&gt;_fileno,msg,strlen(msg));sleep(3);close(stdout-&gt;_fileno);\n\nç»“æœå°±æ˜¯ï¼Œå•¥éƒ½æ²¡æœ‰åˆ·æ–°ï¼\nç¼“å†²åŒºéƒ½è¢«å…³é—­äº†ï¼Œå…¶å†…éƒ¨çš„æ•°æ®éƒ½æ— äº†ï¼Œè‚¯å®šä¸ä¼šåˆ·æ–°å•¦~\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest write [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nè€Œåœ¨è¾“å‡ºé‡å®šå‘ä¸­ï¼Œæ‰“å°çš„å†…å®¹æ²¡æœ‰ç›´æ¥è¢«æ˜¾ç¤ºçš„ï¼Œä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨å…³é—­fdä¹‹å‰åˆ·æ–°stdoutï¼ˆæ­¤æ—¶æŒ‡å‘çš„æ˜¯fdï¼‰ä¸­çš„ç¼“å†²åŒº\nclose(1);//å…³é—­stdoutint fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);printf(&quot;fd: %d\\n&quot;,fd);fflush(stdout);close(fd);\n\nFILEæ—¢ç„¶stdoutçš„ç¼“å†²åŒºåœ¨FILEå†…éƒ¨ï¼Œæ¨è€Œå¹¿ä¹‹ï¼Œæ‰€æœ‰ç”¨Cè¯­è¨€æ‰“å¼€çš„æ–‡ä»¶ï¼ŒFILEä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œå®ƒè‡ªå·±çš„è¯­è¨€çº§åˆ«ç¼“å†²åŒº\ntypedef struct _IO_FILE FILE;\n\nåº“å‡½æ•°ä¸­çš„FILEæ˜¯ä¸€ä¸ªstruct _IO_FILEç±»å‹çš„ç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹\nstruct _IO_FILE &#123;  int _flags;\t\t/* High-order word is _IO_MAGIC; rest is flags. */#define _IO_file_flags _flags  //ä¸‹é¢è¿™äº›å°±æ˜¯å®ƒçš„ç¼“å†²åŒº  /* The following pointers correspond to the C++ streambuf protocol. */  /* Note:  Tk uses the _IO_read_ptr and _IO_read_end fields directly. */  char* _IO_read_ptr;\t/* Current read pointer */  char* _IO_read_end;\t/* End of get area. */  char* _IO_read_base;\t/* Start of putback+get area. */  char* _IO_write_base;\t/* Start of put area. */  char* _IO_write_ptr;\t/* Current put pointer. */  char* _IO_write_end;\t/* End of put area. */  char* _IO_buf_base;\t/* Start of reserve area. */  char* _IO_buf_end;\t/* End of reserve area. */  /* The following fields are used to support backing up and undo. */  char *_IO_save_base; /* Pointer to start of non-current get area. */  char *_IO_backup_base;  /* Pointer to first valid character of backup area */  char *_IO_save_end; /* Pointer to end of non-current get area. */  struct _IO_marker *_markers;  struct _IO_FILE *_chain;  int _fileno;//æ–‡ä»¶æè¿°ç¬¦#if 0  int _blksize;#else  int _flags2;#endif  _IO_off_t _old_offset; /* This used to be _offset but it&#x27;s too small.  */#define __HAVE_COLUMN /* temporary */  /* 1+column number of pbase(); 0 is unknown. */  unsigned short _cur_column;  signed char _vtable_offset;  char _shortbuf[1];  /*  char* _save_gptr;  char* _save_egptr; */  _IO_lock_t *_lock;#ifdef _IO_USE_OLD_IO_FILE&#125;;\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¤šä¸ªå˜é‡ç”¨äºç»´æŠ¤è¯¥æ–‡ä»¶çš„ç¼“å†²åŒºï¼Œä¹Ÿè¯å®äº†ç¼“å†²åŒºæ˜¯ç”±Cè¯­è¨€æä¾›çš„è¿™ä¸€ç»“è®ºã€‚\n4.3 ç¼“å†²åŒºçš„ä½œç”¨Cè¯­è¨€æä¾›ç¼“å†²åŒºçš„ç†ç”±å¾ˆç®€å•ï¼Œç›¸å¯¹äºå†…å­˜è€Œè¨€ï¼Œå…¶ä½™ç¡¬ä»¶éƒ½æ˜¯æ»¡è®¾å¤‡ã€‚\n\nä¸ºä»£ç æä¾›ç¼“å†²åŒºï¼Œå¯ä»¥æé«˜è¯¥ç¨‹åº&#x2F;è¿›ç¨‹è¾“å‡ºçš„æ•ˆç‡\nç¼“å†²åŒºå¯ä»¥é›†ä¸­å¤„ç†æ•°æ®åˆ·æ–°ï¼Œå‡å°‘IOçš„æ¬¡æ•°ï¼Œæé«˜äº†æ•´æœºè¿è¡Œæ•ˆç‡\n\n4.4 ä»€ä¹ˆæ—¶å€™åˆ·æ–°ç¼“å†²åŒºï¼Ÿä»€ä¹ˆæ—¶å€™åˆ·æ–°ç¼“å†²åŒºï¼Œå¯¹åº”çš„æ˜¯åˆ·æ–°ç­–ç•¥é—®é¢˜\nå¸¸è§„çš„åˆ·æ–°ç­–ç•¥\n\næ— ç¼“å†²ï¼ˆç«‹å³åˆ·æ–°ï¼‰\nè¡Œç¼“å†²ï¼ˆé€è¡Œåˆ·æ–°ï¼‰\nå…¨ç¼“å†²ï¼ˆç¼“å­˜åŒºæ»¡ï¼Œåˆ·æ–°ï¼‰\n\nç‰¹æ®Šæƒ…å†µ\n\nè¿›ç¨‹é€€å‡ºï¼ˆåˆ·æ–°ï¼‰\nç”¨æˆ·è°ƒç”¨å‡½æ•°ï¼Œå¼ºåˆ¶åˆ·æ–°\n\nåˆ·æ–°ä¸å­è¿›ç¨‹void test3()&#123;    const char*str1=&quot;test printf\\n&quot;;    const char*str2=&quot;test fprintf\\n&quot;;    const char*str3=&quot;test fputs\\n&quot;;    const char*str4=&quot;test write\\n&quot;;    //Cè¯­è¨€    printf(str1);//è¿™æ ·å†™ä¹Ÿæ˜¯okçš„    fprintf(stdout,str2);    fputs(str3,stdout);    //ç³»ç»Ÿæ¥å£    write(stdout-&gt;_fileno,str4,strlen(str4));    //å­è¿›ç¨‹åˆ›å»º    fork();&#125;\n\nä¸Šé¢çš„ä»£ç ï¼Œä¼šå‡ºç°ä¸¤ç§è¿è¡Œæƒ…å†µ\n\nå¦‚æœç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Šï¼Œæ‰“å°çš„é¡ºåºå’Œå†…å®¹éƒ½æ˜¯æ­£ç¡®çš„\nå¦‚æœé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œå´å‘ç°Cè¯­è¨€æ‰“å°çš„å†…å®¹éƒ½å¤šæ‰“äº†ä¸€æ¬¡ï¼\n\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest printftest fprintftest fputstest write[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./test &gt; log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txttest writetest printftest fprintftest fputstest printftest fprintftest fputs[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nåˆ·æ–°çš„æœ¬è´¨ï¼Œå…¶å®å°±æ˜¯æŠŠç¼“å†²åŒºä¸­æ•°æ®ï¼Œè°ƒç”¨writeæ¥å£é€šè¿‡æ“ä½œç³»ç»Ÿå†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚è€ŒFILEå†…éƒ¨çš„ç¼“å†²åŒºï¼Œæ˜¯å±äºçˆ¶è¿›ç¨‹å†…éƒ¨çš„æ•°æ®ã€‚\nå½“æˆ‘ä»¬åœ¨åˆ·æ–°ä¹‹å‰forkåˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´\nç»“æœå°±æ˜¯çˆ¶è¿›ç¨‹ã€å­è¿›ç¨‹å„åˆ·æ–°ä¸€æ¬¡ã€‚äºæ˜¯å°±å‡ºç°äº†ä¸Šé¢çš„Cè¯­è¨€çš„å†…å®¹å¤šäº†ä¸€ä»½çš„ç°è±¡ï¼\n\n4.5 ç®€å•æ¨¡æ‹Ÿå®ç°ç¼“å†²åŒºï¼Œæœ¬è´¨å°±æ˜¯Cè¯­è¨€åœ¨æ–‡ä»¶çš„ç»“æ„ä½“ä¸­ç»´æŠ¤çš„ä¸€ä¸ªæ•°ç»„ã€‚åŒæ—¶ç»´æŠ¤äº†å¤šç§åˆ·æ–°ç­–ç•¥ï¼Œåœ¨ä¸åŒçš„æ—¶åˆ»å°†è¯¥æ•°ç»„çš„å†…å®¹è°ƒç”¨ç³»ç»Ÿæ¥å£writeå†™å…¥æ–‡ä»¶\nè¿™é‡Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€å•çš„MyFILEç»“æ„ä½“ï¼Œå†…éƒ¨å°è£…æ–‡ä»¶æè¿°ç¬¦ã€åˆ·æ–°ç­–ç•¥ã€ç¼“å†²åŒº\n#define NONE_FLUSH 0x0 //æ— åˆ·#define LINE_FLUSH 0x1 //è¡Œåˆ·#define FULL_FLUSH 0x2 //å…¨ç¼“å­˜typedef struct MyFILE&#123;    int _fileno;    char _buffer[NUM];    int _end;//ç¼“å†²åŒºç»“å°¾    int _fflags; //åˆ·æ–°ç­–ç•¥&#125;MyFILE;\n\næœ‰äº†è‡ªå·±çš„æ–‡ä»¶ç»“æ„ä½“ï¼Œå¯¹åº”çš„ä¹Ÿéœ€è¦åˆ†è£…ä¸€ä¸‹ç³»ç»Ÿçš„open/read/write/closeç­‰æ¥å£ï¼Œè¿˜æœ‰fflushç”¨äºå¼ºåˆ¶åˆ·æ–°\n\nå°è£…æ¥å£ä¸ºäº†åšåˆ°å°½é‡ç®€å•ï¼Œè¿™é‡Œæš‚æ—¶åªå°è£…r/w/aä¸‰ç§æ‰“å¼€æ–¹æ³•\nMyFILE *my_fopen(const char *filename, const char *method)&#123;    assert(filename);    assert(method);    int flags = O_RDONLY;    if(strcmp(method, &quot;r&quot;) == 0)    &#123;        flags = O_RDONLY;    &#125;    else if(strcmp(method, &quot;w&quot;) == 0)    &#123;        flags = O_WRONLY | O_CREAT | O_TRUNC;    &#125;    else if(strcmp(method, &quot;a&quot;) == 0)    &#123;        flags = O_WRONLY | O_CREAT | O_APPEND;    &#125;    int fileno = open(filename, flags, 0666);    if(fileno &lt; 0)    &#123;        return NULL;    &#125;    MyFILE *fp = (MyFILE *)malloc(sizeof(MyFILE));    if(fp == NULL) return fp;    memset(fp, 0, sizeof(MyFILE));    fp-&gt;_fileno = fileno;    fp-&gt;_fflags |= LINE_FLUSH;//é»˜è®¤è¡Œç¼“å†²    fp-&gt;_end = 0;    return fp;&#125;\n\nè¿™é‡Œæš‚æ—¶åªç”¨è¡Œç¼“å†²å’Œå…¨ç¼“å†²æ¥ä½“éªŒä¸€ä¸‹ç¼“å†²åŒºçš„ä½œç”¨ã€‚åŒæ—¶åªå¯¹å­—ç¬¦ä¸²ç»“å°¾çš„\\nè¿›è¡Œäº†åˆ¤æ–­ï¼Œæƒ…å†µä¸å¤Ÿå…¨é¢ã€‚\n\nè¿™é‡Œå…¶å®æˆ‘å¾ˆå¥½å¥‡ï¼ŒCåº“é‡Œé¢æ˜¯æ€ä¹ˆå¤„ç†\\nçš„æï¼›æ€»ä¸èƒ½ç”¨éå†å§ï¼Ÿé‚£æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ã€‚ä¸ªäººçŒœæµ‹æ˜¯å’Œé¢„å…ˆè®¾ç½®çš„ç‰¹æ®Šå­—ç¬¦æœ‰å…³ç³»ã€‚\n\nvoid my_fwrite(MyFILE *fp, const char *start, int len)&#123;    assert(fp);    assert(start);    assert(len &gt; 0);    //å…ˆå†™å…¥åˆ°ç¼“å†²åŒºé‡Œé¢    strncpy(fp-&gt;_buffer+fp-&gt;_end, start, len); //å°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒºäº†    fp-&gt;_end += len;    if(fp-&gt;_fflags &amp; NONE_FLUSH)    &#123;&#125;    else if(fp-&gt;_fflags &amp; LINE_FLUSH)    &#123;        //è¿™é‡Œçš„åˆ¤æ–­åªæ˜¯æµ‹è¯•ï¼Œå®é™…ä¸Šè¿˜éœ€è¦åˆ¤æ–­ä¸­é—´æœ‰æ— \\n        if(fp-&gt;_end &gt; 0 &amp;&amp; fp-&gt;_buffer[fp-&gt;_end-1] == &#x27;\\n&#x27;)        &#123;            //å†™å…¥åˆ°å†…æ ¸ä¸­            write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);            fp-&gt;_end = 0;            syncfs(fp-&gt;_fileno);        &#125;    &#125;    else if(fp-&gt;_fflags &amp; FULL_FLUSH)    &#123;//æ»¡äº†åˆ·æ–°        if(fp-&gt;_end &gt; 0 &amp;&amp; fp-&gt;_end==NUM)        &#123;            //å†™å…¥åˆ°å†…æ ¸ä¸­            write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);            fp-&gt;_end = 0;            syncfs(fp-&gt;_fileno);        &#125;    &#125;&#125;\n\nè¿™é‡Œæœ‰ä¸€ä¸ªæ–°æ¥è§¦çš„å‡½æ•°syncfs\nint syncfs(int fd);\n\nè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œç”¨äºå°†æ–‡ä»¶å†…æ ¸ç¼“å†²åŒºå†…çš„æ•°æ®å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚\nå‰é¢æˆ‘ä»¬æåˆ°çš„ç¼“å†²åŒºï¼Œä¸€ç›´è¯´çš„éƒ½æ˜¯Cè¯­è¨€å†…éƒ¨ç»´æŠ¤çš„ã€‚ä»è¿™ä¸ªæ¥å£ä¹Ÿèƒ½çœ‹å‡ºï¼Œæ“ä½œç³»ç»ŸåŒæ ·å¯¹æ–‡ä»¶è¿›è¡Œäº†ç¼“å†²åŒºçš„ç»´æŠ¤ã€‚\n\nvoid my_fflush(MyFILE *fp)&#123;    assert(fp);    if(fp-&gt;_end &gt; 0)    &#123;        write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);        fp-&gt;_end = 0;        syncfs(fp-&gt;_fileno);    &#125;&#125;void my_fclose(MyFILE *fp)&#123;    my_fflush(fp);    close(fp-&gt;_fileno);    free(fp);&#125;\n\nè¿è¡Œæµ‹è¯•int main()&#123;    MyFILE *fp = my_fopen(&quot;log.txt&quot;, &quot;w&quot;);    if(fp == NULL)    &#123;        printf(&quot;my_fopen error\\n&quot;);        return 1;    &#125;        const char *a = &quot;hello my 111\\n&quot;;    my_fwrite(fp, a, strlen(a));    printf(&quot;æ¶ˆæ¯ç«‹å³åˆ·æ–°\\n&quot;);    sleep(3);    const char *b = &quot;hello my 222 &quot;;    my_fwrite(fp, b, strlen(b));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    const char *c = &quot;hello my 333 &quot;;    my_fwrite(fp, c, strlen(c));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    const char *d = &quot;end\\n&quot;;    my_fwrite(fp, d, strlen(d));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªæ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    my_fclose(fp);    printf(&quot;ç¨‹åºç»“æŸ\\n&quot;);&#125;\n\nåˆšå¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å†™å…¥äº†ä¸€ä¸ª\\nç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå…¶ç«‹é©¬å†™å…¥åˆ°äº†æ–‡ä»¶ä¸­\n\néšåå†™å…¥äº†ä¸¤ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶ä¸­æ²¡æœ‰å‡ºç°ç»“æœ\n\n\nè€Œå½“æˆ‘ä»¬å†™å…¥ä¸€ä¸ªæ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²åï¼Œç¼“å†²åŒºçš„å†…å®¹å°±åŒæ—¶è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­äº†ï¼\n\nå­è¿›ç¨‹æµ‹è¯•é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æµ‹è¯•ä¸€ä¸‹å­è¿›ç¨‹æ˜¯å¦ä¼šå‡ºç°åˆ·æ–°ä¸¤æ¬¡çš„æƒ…å†µ\nvoid test2(MyFILE * fp)&#123;    const char *s = &quot;-test &quot;;    my_fwrite(fp, s, strlen(s));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    fork();&#125;int main()&#123;    MyFILE *fp = my_fopen(&quot;log.txt&quot;, &quot;w&quot;);    if(fp == NULL)    &#123;        printf(&quot;my_fopen error\\n&quot;);        return 1;    &#125;    //test1(fp);    test2(fp);    //æ¨¡æ‹Ÿè¿›ç¨‹é€€å‡º    my_fclose(fp);    printf(&quot;ç¨‹åºç»“æŸ\\n&quot;);&#125;\n\nç»“æœå¦‚æˆ‘ä»¬æ‰€æ–™ï¼Œæ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤ä¸ª-test  ï¼ŒåŸå› åœ¨4.4ä¸­å·²åšè§£é‡Š\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./test1å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²ç¨‹åºç»“æŸç¨‹åºç»“æŸ[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt-test -test [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\n\n5.æ–‡ä»¶ç³»ç»Ÿä¹‹å‰æˆ‘ä»¬æåˆ°çš„è¿™äº›æ•°æ®ï¼Œéƒ½æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿è¦æ¥äº†è§£ä¸€ä¸‹æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•ç®¡ç†ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚\n\n5.1 ç£ç›˜çš„ç‰©ç†ç»“æ„ä»¥æœºæ¢°ç¡¬ç›˜ä¸ºä¾‹ï¼Œå…¶å†…éƒ¨ä¸»è¦ç”±ç›˜ç‰‡å’Œç£å¤´ç»„æˆã€‚\n\nå½“æˆ‘ä»¬æ”¹å˜ç£ç›˜ä¸ŠæŸä¸€ä¸ªä½ç½®çš„NSæï¼Œå°±å¥½æ¯”æ›´æ”¹äº†æ­¤å¤„ä¿å­˜çš„æ•°æ®0/1\n\nåœ¨æœºæ¢°ç¡¬ç›˜ä¸­ï¼Œä¸€ä¸ªç›˜ç‰‡å¯¹åº”ä¸€ä¸ªç£å¤´\n\næ¯ä¸ªç›˜ç‰‡è¢«åˆ†ä¸ºè¯ºå¹²ä¸ªåŒå¿ƒåœ†ï¼Œæ¯ä¸€ä¸ªåŒå¿ƒåœ†å°±æ˜¯ä¸€ä¸ªç£é“\næ¯ä¸ªç£é“è¢«åˆ’åˆ†ä¸ºè¯ºå¹²æ®µï¼ˆæ‰‡åŒºï¼‰\næ¯ä¸ªæ‰‡åŒºçš„å­˜å‚¨å®¹é‡ä¸º512å­—èŠ‚\n\nç”±æ­¤å¯è§ï¼Œå½“æˆ‘ä»¬è¯»å†™æœºæ¢°ç¡¬ç›˜çš„æ—¶å€™ï¼Œéœ€è¦å»æ‰¾æŸä¸€ä¸ªç›˜é¢ã€æŸä¸€ä¸ªç£é“çš„æŸä¸€ç‰‡æ‰‡åŒºï¼Œå°±èƒ½æ‰¾åˆ°è¯¥æ‰‡åŒºçš„æ•°æ®ï¼\n\nç›˜é¢ï¼ˆç£é¢ï¼‰æœ‰è‡ªå·±å¯¹åº”çš„ç£å¤´\nç£é“æ˜¯ç”±è·ç¦»åœ†å¿ƒçš„åŠå¾„å†³å®šçš„\næ‰‡åŒºæ˜¯ç”±ç›˜é¢æ—‹è½¬å†³å®šçš„\n\nè€Œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ‰€ä½œçš„å·¥ä½œï¼Œä¾¿æ˜¯å°†æ–‡ä»¶å’Œå…¶å¯¹åº”çš„æ‰‡åŒºè”ç³»èµ·æ¥ã€‚ç”¨ä¸Šé¢æåˆ°çš„åŠæ³•ï¼Œä¾¿å¯ä»¥æŸ¥æ‰¾åˆ°æ¯ä¸€ä¸ªæ‰‡åŒºï¼\n\nè¿™ç§æŸ¥æ‰¾æ•°æ®ä½ç½®çš„æ“ä½œï¼Œè¢«ç§°ä¸ºCHSå¯»å€ï¼ŒCHSåˆ†åˆ«å¯¹åº”ç£æŸ±ã€ç£é¢ã€æ‰‡åŒº\n5.2 CHSå’ŒLBA\næ›´è¯¦ç»†çš„è§£æå‚è€ƒï¼šhttps://blog.csdn.net/jadeshu/article/details/89072512\n\nå‡è®¾æˆ‘ä»¬æŠŠä¸€ä¸ªç£é“çš„æ•°æ®â€œæ‹‰ç›´â€ï¼Œå…¶å°±å˜æˆäº†ä¸€æ¡ç›´çº¿ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¯ä»¥æŠŠæ¯ä¸€ä¸ªç›˜é¢ä¸Šçš„æ¯ä¸€æ¡ç£é“éƒ½â€œæ‹‰ç›´â€\n\næœ€ç»ˆï¼Œå…¶ä¸å°±å˜æˆäº†å’Œä¸Šå›¾ç±»ä¼¼çš„â€œé•¿æ¡çŠ¶â€äº†å—ï¼Ÿæˆ‘ä»¬å­¦è¿‡çš„ä»€ä¹ˆæ•°æ®ç»“æ„ä¹Ÿæ˜¯çº¿æ€§é•¿æ¡çš„æï¼Ÿ\næ²¡é”™ï¼å°±æ˜¯æ•°ç»„ï¼\næ­¤æ—¶ï¼Œå¯¹ç£ç›˜æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå°±å¯ä»¥æŠ½è±¡æˆå¯¹å†…æ ¸ä¸­ä¸€ä¸ªæ•°ç»„çš„å¢åˆ æŸ¥æ”¹æ“ä½œï¼\nè¿™ç§æŠ½è±¡ä¹‹åçš„ç£ç›˜ï¼Œè¢«ç§°ä¸ºLBAé€»è¾‘å—åœ°å€ï¼Œä»–ä»¬ä¹‹ä¸­æœ‰ä¸€ä¸ªè½¬æ¢å…³ç³»ğŸ‘‡\nç”¨Cè¡¨ç¤ºå½“å‰æŸ±é¢å·ï¼ŒHè¡¨ç¤ºå½“å‰ç£å¤´å·ï¼ŒSè¡¨ç¤ºå½“å‰æ‰‡åŒºå·ï¼ŒCSè¡¨ç¤ºèµ·å§‹æŸ±é¢å·ï¼ŒHSè¡¨ç¤ºèµ·å§‹ç£å¤´å·ï¼ŒSSè¡¨ç¤ºèµ·å§‹æ‰‡åŒºå·ï¼ŒPSè¡¨ç¤ºæ¯ç£é“æœ‰å¤šå°‘ä¸ªæ‰‡åŒºï¼ŒPHè¡¨ç¤ºæ¯æŸ±é¢æœ‰å¤šå°‘ä¸ªç£é“ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š$$LBA &#x3D; ( C â€“ CS ) * PH * PS + ( H â€“ HS ) * PS + ( S â€“ SS )$$é€šè¿‡è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å°±èƒ½å°†ç£ç›˜ä¸­çš„ä¸€ä¸ªåŒºå—çš„æ•°æ®ï¼Œè½¬ä¸ºæ•°ç»„ä¸­çš„ä¸€ä¸ªä¸‹æ ‡ï¼Œæ¥æ–¹ä¾¿æ“ä½œç³»ç»Ÿè®¿é—®$$C &#x3D; LBA &#x2F; ( PH * PS ) + CS$$\n$$H &#x3D; ( LBA &#x2F; PS ) % PH + HS$$\n$$S &#x3D; LBA &#x2F; PS + SS$$ä¿®æ”¹äº†æ•°ç»„ä¸­çš„æ•°æ®ä¹‹åï¼Œæ“ä½œç³»ç»Ÿå°†LBAå¯¹åº”çš„CHSåœ°å€ç®—å‡ºæ¥äº¤ç»™ç£ç›˜ï¼Œè®©ç£ç›˜æ¥ä¿®æ”¹æŒ‡å®šæ‰‡åŒºçš„æ•°æ®ï¼Œä¾¿å®ç°äº†ä¿å­˜æ•°æ®åˆ°ç£ç›˜ä¸­çš„æ“ä½œ\n\n5.3 IOçš„åŸºæœ¬å•ä½å¯¹äºæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œä¸€æ¬¡IOçš„åŸºæœ¬å•ä½æ˜¯4kbï¼Œä¹Ÿå°±æ˜¯8ä¸ªæ‰‡åŒº8*512å­—èŠ‚\n\nç£ç›˜çš„åŸºæœ¬å•ä½ï¼šæ‰‡åŒºï¼ˆä¸€èˆ¬ä¸º512å­—èŠ‚)\næ–‡ä»¶ç³»ç»Ÿè®¿é—®ç£ç›˜çš„åŸºæœ¬å•ä½ï¼š4kb\n\nåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¼šå¯¹å‰é¢æåˆ°çš„é‚£ä¸ªâ€œæ•°ç»„â€è¿›ä¸€æ­¥æŠ½è±¡ï¼Œ8ä¸ªæ‰‡åŒºä¼šè¢«åˆå¹¶æˆä¸€ä¸ª4KBçš„åŒºå—ï¼Œç”¨äºå•æ¬¡IOã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†æ¯ä¸€ä¸ªåŒºå—ï¼Œåˆå°†å¤šä¸ªåŒºå—åˆå¹¶ï¼Œä½œä¸ºä¸€ä¸ªåˆ†åŒºè¿›è¡Œç®¡ç†\nè¿™ä¾¿æ˜¯æˆ‘ä»¬ç”µè„‘ä¸ŠåŒä¸€å—ç‰©ç†ç¡¬ç›˜å¯ä»¥å¯¹åº”ä¸åŒåˆ†åŒºçš„æ¥æºäº†ï¼\n\nä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿè¦ä»¥4kbä½œä¸ºIOçš„åŸºæœ¬å•ä½å‘¢ï¼Ÿ\n\nhttps://www.51cto.com/article/617936.html\n\nåœ¨ä¸Šæ–‡ä¸­æåˆ°ï¼ŒLinuxé€‰æ‹©4KBä½œä¸ºâ€œé¡µæ“ä½œâ€ï¼ˆå³è¯»å–å†…å­˜ï¼Œä»¥åŠä»å†…å­˜å†™å…¥ç£ç›˜ï¼‰çš„åŸºæœ¬å•ä½ç®—æ˜¯ä¸€ä¸ªå†å²é—ç•™é—®é¢˜äº†ã€‚\n\nè¿‡å°çš„é¡µå¤§å°ä¼šå¸¦æ¥è¾ƒå¤§çš„å¯»å€å¼€é”€\nè¿‡å¤§çš„é¡µå¤§å°æµªè´¹å†…å­˜ç©ºé—´ï¼Œé€ æˆå†…å­˜ç¢ç‰‡\n\nè€Œå½“åˆè¿™ä¹ˆé€‰æ‹©ï¼Œè‚¯å®šæ˜¯æœ‰å…¶åŠŸç”¨çš„ï¼\n\nèƒ½æé«˜IOæ•ˆç‡ï¼Œä¸éœ€è¦å¤šæ¬¡å†™å…¥512å­—èŠ‚çš„æ•°æ®\nä¸è®©æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡å’Œç£ç›˜æœ‰å¼ºç›¸å…³æ€§ï¼Œè§£è€¦åˆ\n\nå¯¹äºç¬¬äºŒç‚¹è¿›è¡Œè¯´æ˜ï¼Œå¦‚æœæ–‡ä»¶ç³»ç»Ÿä¸åœ¨æ‰‡åŒºå¤–é¢å¤–é€‰æ‹©ä¸€ä¸ªç©ºé—´ä½œä¸ºIOçš„åŸºæœ¬å•ä½ï¼Œé‚£ä¹ˆå…¶è®¾è®¡å¿…å®šä¼šä¾èµ–äºç£ç›˜æ‰‡åŒºå¤§å°ã€‚\nå¦‚æœæŸä¸€å¤©ï¼Œæ‰€æœ‰ç£ç›˜çš„æ‰‡åŒºå¤§å°éƒ½ä»512å­—èŠ‚å˜æˆäº†1024å­—èŠ‚ï¼Œé‚£å°±å¿…é¡»è¦ä¿®æ”¹æ“ä½œç³»ç»Ÿçš„æºç ï¼Œæ‰èƒ½æ­£ç¡®è®¿é—®æ–°çš„ç¡¬ç›˜ã€‚åŒæ—¶è¿˜éœ€è¦å¯¹æ—§ç›˜åšä¼˜åŒ–ï¼Œå¯è°“äº‹å€åŠŸåŠã€‚\nè€Œæå‰è®¾å®šå¥½ä¸€ä¸ªæ›´å¤§çš„IOåŸºæœ¬å•ä½ï¼Œä¾¿æ˜¯é¿å…äº†ç£ç›˜å˜åŠ¨è€Œé€ æˆçš„æ— æ³•è®¿é—®ã€‚æœ‰äº†è¿™ä¸ªæ›´å¤§çš„IOåŸºæœ¬å•ä½ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç£ç›˜çš„æ‰‡åŒºç»„æˆä¸€ä¸ª4kbå¤§å°çš„ç©ºé—´è¿›è¡ŒIOï¼Œä¸ç”¨ç®¡å…¶ç£ç›˜æ‰‡åŒºå¤§å°åˆ°åº•æ˜¯å¤šå°‘äº†ã€‚\n\nå½“ç„¶ï¼Œå¦‚æœå“ªå¤©æ‰‡åŒºå¤§å°å¤§äº4kbäº†ï¼Œææ€•å°±å¾—æ”¹æºç äº†ï¼Ÿ\nè¿™éƒ¨åˆ†æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚å‘¢ï¼Œä»¥ä¸Šåªæ˜¯ä¸ªäººæµ…æ˜¾çš„ç†è§£\n\n\n5.4 ç³»ç»Ÿç»“æ„ä¸‹å›¾å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªç£ç›˜æ˜¯å¦‚ä½•è¢«æ–‡ä»¶ç³»ç»Ÿâ€œæ‹†åˆ†â€çš„\né¦–å…ˆæ˜¯åˆ†åŒºï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªBootSectorå’Œæ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬ä¸»è¦å…³æ³¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå•ä¸ªBlock Groupé‡Œé¢çš„å†…å®¹\n\nlinuxé‡‡ç”¨çš„æ˜¯æ–‡ä»¶å†…å®¹ã€æ–‡ä»¶å±æ€§åˆ†å¼€å­˜æ”¾çš„å­˜å‚¨æ–¹å¼\n\næ–‡ä»¶çš„å±æ€§æ˜¯ç¨³å®šçš„\næ–‡ä»¶çš„å†…å®¹åœ¨ä¸æ–­å¢å¤š\n\ndata blocksï¼šä¿å­˜æ•°æ®å†…å®¹inode tableï¼šä¿å­˜æ–‡ä»¶çš„inodeinode bitmapï¼šä½å›¾ç»“æ„ï¼ŒæŒ‡ç¤ºinodeæ˜¯å¦è¢«ä½¿ç”¨GDTï¼šå…¨ç§°group descriptor tableï¼Œä¿å­˜äº†inodeä¸ªæ•°ã€èµ·å§‹inodeç¼–å·ã€å¤šå°‘inodeè¢«ä½¿ç”¨ã€å¤šå°‘data blocksè¢«ä½¿ç”¨â€¦â€¦Super Blocksï¼šè¯¥Block Groupæ–‡ä»¶ç³»ç»Ÿçš„é¡¶å±‚æ•°æ®ç»“æ„\n\ninodeè¿™é‡Œæåˆ°çš„inodeæ˜¯linuxä¸‹æ¯ä¸€ä¸ªæ–‡ä»¶çš„ç‹¬ç«‹ç¼–å·ã€‚linuxå¹¶ä¸ä»¥æ–‡ä»¶åæ¥è¯†åˆ«æ–‡ä»¶ï¼Œè€Œæ˜¯ç”¨æ–‡ä»¶ç¼–å·æ¥è¯†åˆ«å”¯ä¸€çš„æ–‡ä»¶çš„ã€‚\ninodeä¿å­˜äº†ä¸€ä¸ªæ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯\n\næ–‡ä»¶çš„å±æ€§\nrwxæƒé™\næ‰€å±ç”¨æˆ·ã€æ‰€å±ç»„\nç¡¬é“¾æ¥ä¸ªæ•°\næ–‡ä»¶è®¿é—®ã€ä¿®æ”¹ã€åˆ›å»ºçš„æ—¶é—´\næŒ‡å‘data blocksä¸­æ–‡ä»¶çš„å†…å®¹\n\n\nstruct inodeçš„ä½ç½®åœ¨/include/linux/fs.h\n\n\næŸ¥çœ‹inodeç¼–å·çš„æ–¹æ³•ä¸ºls -iï¼Œå…¶ä¸­è¿™ä¸²æ•°å­—ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„inodeç¼–å·\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -i1453833 makefile  1453832 test.cpp\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œ.å’Œ..è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„inodeç¼–å·çš„ï¼Œå°è¯äº†linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®å½•\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -ilatotal 161453831 drwxrwxr-x  2 muxue muxue 4096 Nov  2 09:58 .1443736 drwxrwxr-x 16 muxue muxue 4096 Nov  2 09:20 ..1453833 -rw-rw-r--  1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r--  1 muxue muxue  437 Nov  2 09:35 test.cpp\n\nstatå‘½ä»¤è¿˜å¯ä»¥ç”¨statå‘½ä»¤æ¥æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„inodeä¿¡æ¯\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ stat test.cpp  File: â€˜test.cppâ€™  Size: 437             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1453832     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-11-02 09:35:07.684160444 +0800Modify: 2022-11-02 09:35:04.328161202 +0800Change: 2022-11-02 09:35:04.328161202 +0800 Birth: -\n\ninodeå†…éƒ¨æœ‰ä¸€ä¸ªç»“æ„ï¼ŒæŒ‡å‘data blocksã€‚å‰é¢æåˆ°è¿‡ï¼Œæ–‡ä»¶ç³»ç»ŸIOçš„åŸºæœ¬å•ä½æ˜¯4KBï¼Œå¯¹åº”çš„ï¼Œä¸€ä¸ªblocksçš„å¤§å°å°±æ˜¯4KB\næ¯ä¸€ä¸ªæ–‡ä»¶éƒ½å¯¹åº”ä¸€ä¸ªinodeï¼Œè‡³å°‘å¯¹åº”ä¸€ä¸ªdata blocksï¼ˆinodeä¸­å‚¨å­˜äº†blocksç¼–å·ï¼‰\nå› ä¸ºinodeæ‰€èƒ½ä¿å­˜çš„ç¼–å·æœ‰é™ï¼Œæ‰€ä»¥å¯¹data blocksçš„ä¿å­˜åˆ†ä¸ºä¸¤ç§æƒ…å†µ\n\néƒ¨åˆ†data blocksç›´æ¥ä¿å­˜äº†æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœæ˜¯å°æ–‡ä»¶ï¼Œinodeä¸­ä¿å­˜çš„blockå°±è¶³å¤Ÿå­˜ä¸‹æ‰€æœ‰æ–‡ä»¶å†…å®¹äº†\nå¦‚æœæ˜¯å¤§æ–‡ä»¶ï¼Œinodeä¸­ä¸€éƒ¨åˆ†blocksä¼šç”¨æ¥ä¿å­˜è¯¥æ–‡ä»¶å‰©ä½™data blocksçš„ç¼–å·\n\nåœ¨å†…æ ¸ä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šå¯¹è¿™ä¸¤ç§æƒ…å†µè¿›è¡ŒåŒºåˆ†\næ³¨æ„\n\nå› ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½è‚¯å®šæœ‰ä¸€ä¸ªinodeä¸ä¹‹å¯¹åº”ï¼Œæ‰€ä»¥åˆ›å»ºç©ºæ–‡ä»¶ä¹Ÿæ˜¯å ç”¨ç£ç›˜ç©ºé—´çš„\nå¯èƒ½ä¼šå‡ºç°inodeè¢«ç”¨å®Œäº†ï¼Œç£ç›˜ç©ºé—´å´æ²¡æœ‰æ»¡çš„æƒ…å†µã€‚ä½†è¿™æ—¶å€™ä¹Ÿå·²ç»æ— æ³•åˆ›å»ºæ–°æ–‡ä»¶äº†\n\nğŸ˜‚ä½ å¯ä»¥å°è¯•å†™ä¸€ä¸ªwhile1å¾ªç¯ï¼Œä¸æ–­å¾€ç³»ç»Ÿä¸­åˆ›å»ºæ–°æ–‡ä»¶ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è¾¾åˆ°è¿™ä¸ªä¸´ç•Œå€¼ï¼ˆå’³å’³ï¼Œè™½ç„¶å¥½ç©ï¼Œä½†å¹¶ä¸æ¨èä½ è¿™ä¹ˆåšï¼‰\n\næ–‡ä»¶åå­˜åœ¨å“ªå„¿ï¼Ÿå‰é¢æåˆ°è¿‡ï¼Œinodeä¿å­˜äº†æ–‡ä»¶çš„å±æ€§ï¼Œæ–‡ä»¶åæ˜¯å¦ä¸ºæ–‡ä»¶çš„å±æ€§å‘¢ï¼Ÿä¹Ÿç®—ï¼\nä½†inodeä¸­å¹¶ä¸ä¿å­˜æ–‡ä»¶åå­—ï¼\nå®é™…ä¸Šï¼Œæ–‡ä»¶åæ˜¯å­˜åœ¨è¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶å†…å®¹ä¸­çš„\n\nç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œæ–‡ä»¶å°±æœ‰æ–‡ä»¶å±æ€§+æ–‡ä»¶å†…å®¹\n\nå¯ä»¥ç†è§£ä¸ºï¼Œç›®å½•çš„å†…å®¹ä¿å­˜çš„æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå…¶ä¸­keyä¸ºæ–‡ä»¶åï¼Œvalueä¸ºinodeç¼–å·\nè¿™ä¾¿æ˜¯ä¸ºä½•ä¸€ä¸ªç›®å½•ä¸­ä¸èƒ½å‡ºç°åŒåæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸æ”¯æŒé”®å€¼å†—ä½™çš„map(cpp-stl)\nç›®å½•æƒé™æ—¢ç„¶ç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¹Ÿæœ‰è‡ªå·±çš„æ–‡ä»¶æƒé™\n\nhttps://blog.csdn.net/muxuen/article/details/125776348\n\nåœ¨æˆ‘ä¹‹å‰å…³äºlinuxæ–‡ä»¶æƒé™çš„è®²è§£ä¸­ï¼Œå°±æåˆ°äº†å’Œç›®å½•æœ‰å…³çš„æƒé™é—®é¢˜\n\nè¿›å…¥ç›®å½•éœ€è¦xæƒé™\nåˆ›å»ºæ–‡ä»¶éœ€è¦wæƒé™\næŸ¥çœ‹æ–‡ä»¶åéœ€è¦ræƒé™\n\näº†è§£æ–‡ä»¶ç³»ç»Ÿäº†ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ä¸ºä»€ä¹ˆç›®å½•çš„æ“ä½œéœ€è¦è¿™äº›æƒé™äº†ã€‚åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œæœ¬è´¨å°±æ˜¯åœ¨ä¿®æ”¹ç›®å½•æ‰€å¯¹åº”çš„æ–‡ä»¶å†…å®¹ï¼\n\n5.5 åˆ›å»º&#x2F;åˆ é™¤æ–‡ä»¶å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶ç³»ç»Ÿåšäº†ä»€ä¹ˆæï¼Ÿ\n\nåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç»“æ„ä½“ï¼Œå’Œå¯¹åº”çš„inodeç¼–å·\næ ¹æ®ç›®å½•çš„inodeï¼Œæ‰¾åˆ°è¯¥ç›®å½•çš„data blocks\nå°†æ–‡ä»¶åå’Œinodeç¼–å·çš„å¯¹åº”å…³ç³»å†™å…¥åˆ°ç›®å½•çš„æ•°æ®å—ä¸­\n\nå½“æˆ‘ä»¬åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼š\n\næ“ä½œç³»ç»Ÿåªéœ€è¦åˆ é™¤å½“å‰ç›®å½•ä¸‹inodeå’Œæ–‡ä»¶åçš„å¯¹åº”å…³ç³»\nåŒæ—¶åœ¨inode bitmapä¸­å°†å¯¹åº”çš„inodeç½®ä¸º0ï¼ˆä»£è¡¨æ²¡æœ‰ä½¿ç”¨ï¼‰\n\nè¿™æ ·å°±ç®—æ˜¯åˆ é™¤è¯¥æ–‡ä»¶äº†ï¼å¥½æ¯”æˆ‘ä»¬æ“ä½œçº¿æ€§è¡¨è¿›è¡Œå°¾åˆ æ“ä½œï¼Œåªæ˜¯å¯¹size-1ï¼Œå¹¶æ²¡æœ‰çœŸçš„æŠŠè¯¥ä½ç½®çš„æ•°æ®åˆ é™¤\n\nè¿™ä¾¿èƒ½è§£é‡Šä¸ºä»€ä¹ˆå¤åˆ¶ç²˜è´´ä¸€ä¸ªæ–‡ä»¶çš„é€Ÿåº¦è¿œæ…¢äºåˆ é™¤æ–‡ä»¶çš„é€Ÿåº¦\nå› ä¸ºæ²¡æœ‰å°†æ–‡ä»¶çš„inodeå’Œdata blockæ¸…ç©ºï¼Œæ‰€ä»¥ç»™æˆ‘ä»¬æ¢å¤æ•°æ®å¸¦æ¥äº†å¯èƒ½ã€‚åªè¦è¯¥æ–‡ä»¶ä¹‹å‰ä½¿ç”¨çš„inode/data blockå¹¶æ²¡æœ‰è¢«å¤å†™ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½è¿˜åŸå‡ºè¯¥æ–‡ä»¶çš„æ•°æ®ï¼\n\n\n6.è½¯ç¡¬é“¾æ¥åœ¨æœ€åˆå­¦ä¹ linuxå‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œå°±å·²ç»å­¦ä¹ è¿‡äº†lnåˆ›å»ºæ–‡ä»¶é“¾æ¥çš„æ“ä½œ\n\n è¿™éƒ¨åˆ†æˆ‘æ²¡æœ‰å†™åšå®¢ï¼Œå› ä¸ºç½‘ä¸Šçš„æ•™ç¨‹å®åœ¨æ˜¯å¤ªå¤šå•¦\n\nä½†æ˜¯å½“æ—¶å¹¶ä¸çŸ¥é“è½¯é“¾æ¥/ç¡¬é“¾æ¥åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå­¦ä¹ äº†æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œå›å¤´å†æ¥çœ‹çœ‹\n\n6.1 æŸ¥çœ‹æ–‡ä»¶ç¡¬é“¾æ¥ä¸ªæ•°ls -li\n\nå½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªæ–‡ä»¶çš„å®Œæ•´å±æ€§\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -liatotal 161453831 drwxrwxr-x  2 muxue muxue 4096 Nov  2 09:58 .1443736 drwxrwxr-x 16 muxue muxue 4096 Nov  2 09:20 ..1453833 -rw-rw-r--  1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r--  1 muxue muxue  437 Nov  2 09:35 test.cpp\n\nå¯ä¹‹å‰ä¸€ç›´æ²¡æœ‰å»äº†è§£ï¼Œè¿™ä¸ªç¬¬ä¸‰åˆ—çš„2  16   1  1 åˆ°åº•æ˜¯ä»€ä¹ˆç©æ„å‘¢ï¼Ÿ\nä¸å–å…³å­ï¼Œå‰é¢æåˆ°inodeä¼šä¿å­˜æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼Œç¬¬ä¸‰åˆ—çš„æ•°å­—ï¼Œä»£è¡¨çš„ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼\nè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ mkdir test_r[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ touch test_f[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -litotal 121453833 -rw-rw-r-- 1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r-- 1 muxue muxue  437 Nov  2 09:35 test.cpp1453836 -rw-rw-r-- 1 muxue muxue    0 Nov  2 16:07 test_f1449813 drwxrwxr-x 2 muxue muxue 4096 Nov  2 16:07 test_r[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\nä½ ä¼šå‘ç°ï¼Œæ–‡ä»¶å¤¹é»˜è®¤çš„ç¡¬é“¾æ¥æ•°æ˜¯2ï¼Œè€Œæ–‡ä»¶é»˜è®¤çš„ç¡¬é“¾æ¥æ•°æ˜¯1\nä¸ºä»€ä¹ˆï¼Ÿå½“æˆ‘ä»¬cdè¿›å…¥ç›®å½•çš„æ—¶å€™ï¼Œlinuxä¾¿ä¼šæ‰¾åˆ°åº•å±‚çš„inodeï¼Œè¿›å…¥è¯¥inodeæ‰€å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚\nå¦‚æœæƒ³çŸ¥é“ä¸€ä¸ªç›®å½•çš„ç›®å½•åï¼Œæˆ‘ä»¬å¿…é¡»è¦å»è¯¥ç›®å½•çš„ä¸Šçº§æ‰¾ã€‚\nä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾å½“å‰ç›®å½•ä»¥åŠå…¶ä¸Šçº§ç›®å½•çš„inodeï¼Œæ¯ä¸€ä¸ªç›®å½•ä¸‹é¢ï¼Œé»˜è®¤éƒ½ä¼šæœ‰..å’Œ.è¿™ä¸¤ä¸ªç›®å½•æ–‡ä»¶ï¼\nè¿›å…¥åˆšåˆšæˆ‘ä»¬æ–°åˆ›çš„æ–‡ä»¶å¤¹çœ‹çœ‹ï¼Œä½ ä¼šå‘ç°ï¼Œ.æ–‡ä»¶çš„inodeå°±æ˜¯è¯¥æ–‡ä»¶å¤¹çš„inodeï¼\n\nä»è¿™é‡Œä¾¿å¼•å‡ºäº†è½¯è¿æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«\n6.2 è½¯ç¡¬é“¾æ¥åŒºåˆ«è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªtest.cæ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 41453842 -rw-rw-r-- 1 muxue muxue 78 Nov  2 16:13 test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nåŒæ—¶å¯¹è¯¥æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥å’Œè½¯è¿æ¥\nln -s æº ç›®æ ‡ #åˆ›å»ºè½¯è¿æ¥ln æº ç›®æ ‡ #åˆ›å»ºç¡¬é“¾æ¥\n\nåº·åº·ç»“æœğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ln -s test.c testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 41453842 -rw-rw-r-- 1 muxue muxue 78 Nov  2 16:13 test.c1453843 lrwxrwxrwx 1 muxue muxue  6 Nov  2 16:14 testSoft.c -&gt; test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ln test.c testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 81453842 -rw-rw-r-- 2 muxue muxue 78 Nov  2 16:13 test.c1453842 -rw-rw-r-- 2 muxue muxue 78 Nov  2 16:13 testHard.c1453843 lrwxrwxrwx 1 muxue muxue  6 Nov  2 16:14 testSoft.c -&gt; test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nä½ èƒ½çœ‹å‡ºåŒºåˆ«å—ï¼Ÿ\n\nè½¯é“¾æ¥çš„inodeå’Œæºæ–‡ä»¶ä¸ç›¸åŒï¼Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„æ–‡ä»¶\nç¡¬é“¾æ¥çš„inodeå’Œæºæ–‡ä»¶ç›¸åŒï¼åŒæ—¶å®ƒä»¬çš„ç¡¬é“¾æ¥æ•°+1\n\næŠŠè¿™äº›æ–‡ä»¶éƒ½ä»¥æŒ‡é’ˆç†è§£ï¼Œä¼šæ›´æ–¹ä¾¿ä¸€äº›\n\n\nè½¯è¿æ¥çš„æ–‡ä»¶å†…å®¹æ˜¯æ‰€æŒ‡å‘æ–‡ä»¶çš„è·¯å¾„\nç¡¬é“¾æ¥åªæ˜¯åœ¨å½“å‰ç›®å½•ä¸‹æ–°å¢æ–‡ä»¶åå’Œinodeç¼–å·çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å¯¹inodeä¸­ç¡¬é“¾æ¥ä¸ªæ•°+1\n\nå¦‚æœæˆ‘ä»¬åˆ é™¤äº†test.cï¼Œè½¯è¿æ¥å°±ä¼šå¤±æ•ˆï¼Œä½†ç¡¬é“¾æ¥å¹¶ä¸ä¼šï¼Œå› ä¸ºç¡¬é“¾æ¥æœ¬èº«å’Œtest.cæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼\n\nè€Œinodeä¸­å¯¹ç¡¬é“¾æ¥çš„è®¡æ•°ï¼Œå°±å¥½æ¯”C++ä¸­æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°ï¼Œå¦‚æœè¯¥è®¡æ•°ä¸º0ï¼Œå°±ä»£è¡¨è¿™ä¸ªæ–‡ä»¶éœ€è¦åˆ é™¤äº†ï¼\n\nè§£ç­”ï¼çŸ¥é“äº†åŒºåˆ«ï¼Œæˆ‘ä»¬ä¹Ÿä¾¿çŸ¥é“ä¸ºä½•ä¸€ä¸ªæ–°ç›®å½•çš„é»˜è®¤ç¡¬é“¾æ¥ä¸ªæ•°æ˜¯2äº†ï¼Œå…¶ä¾¿æ˜¯æ¯ä¸€ä¸ªç›®å½•éƒ½é»˜è®¤å¸¦çš„.æ–‡ä»¶ï¼Œç”¨äºæ ‡è¯†å½“å‰ç›®å½•çš„inodeï¼›å¦å¤–ä¸€ä¸ªæ˜¯è¯¥æ–‡ä»¶æœ¬èº«\n\næ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œé»˜è®¤éƒ½å’Œè‡ªå·±æ˜ å°„ï¼Œæ‰€ä»¥ç¡¬é“¾æ¥ä¸ªæ•°ä¸º1\n\nåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼Œå¿«é€ŸçŸ¥é“ä¸Šçº§ç›®å½•ä¸­æœ‰å¤šå°‘ä¸ªæ–‡ä»¶å¤¹ï¼ˆé™¤å»é»˜è®¤çš„.å’Œ..ï¼‰\nä¸Šçº§ç›®å½•å†…çš„æ–‡ä»¶å¤¹ä¸ªæ•° = å½“å‰ç›®å½•..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•° - 2æŸä¸€ä¸ªç›®å½•å†…çš„æ–‡ä»¶å¤¹ä¸ªæ•° = è¯¥ç›®å½•..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•° - 2\n\n6.3 unlinkå‘½ä»¤æˆ‘ä»¬å¯ä»¥é€šè¿‡unlinkå‘½ä»¤æ¥å–æ¶ˆé“¾æ¥\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ lstestHard.c  testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ unlink testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 121453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:39 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..1453842 -rw-rw-r--  1 muxue muxue   78 Nov  2 16:13 testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nunlinkä¹Ÿå¯ä»¥ç”¨æ¥åˆ é™¤æ­£å¸¸æ–‡ä»¶ï¼Œä½†ä¸€èˆ¬åªç”¨å®ƒæ¥åˆ é™¤é“¾æ¥æ–‡ä»¶ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 121453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:39 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..1453842 -rw-rw-r--  1 muxue muxue   78 Nov  2 16:13 testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ unlink testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 81453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:40 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..\n\n\nç»“è¯­linuxæ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ï¼Œåˆ°è¿™é‡Œå°±overè¾£ï¼åç»­å¦‚æœæœ‰ä»€ä¹ˆæ–°å¢çŸ¥è¯†ï¼Œä¼šæ¥è¿™é‡Œæ·»åŠ ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","æ–‡ä»¶"]},{"title":"ã€Linuxã€‘åŠ¨é™æ€åº“","url":"/2022/11/03/note_Linux/15%E5%8A%A8%E9%9D%99%E6%80%81%E5%BA%93/","content":"åœ¨æœ€åˆå­¦ä¹ GCCçš„ä½¿ç”¨çš„æ—¶å€™ï¼Œæåˆ°äº†åŠ¨æ€ã€é™æ€åº“çš„åˆ›å»ºåŠæ³•ã€‚ä»Šå¤©å°±è®©æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸€ç•ªï¼Œå®ƒä»¬ä¹‹é—´ç©¶ç«Ÿæœ‰ä½•ä¸åŒå§ï¼\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šcentos7.6\n\n[TOC]\n1.åŠ¨æ€åº“å’Œé™æ€åº“å…ˆæ¥äº†è§£ä¸€ä¸‹åŠ¨æ€åº“å’Œé™æ€åº“çš„åŸºæœ¬æ¦‚å¿µå§ï¼\n\né™æ€åº“.a ç¨‹åºç¼–è¯‘é“¾æ¥çš„æ—¶å€™ï¼ŒæŠŠé™æ€åº“çš„ä»£ç è¿æ¥åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œç¨‹åºè¿è¡Œçš„æ—¶å€™å°†ä¸å†éœ€è¦é™æ€åº“\nåŠ¨æ€åº“.so ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ‰å»é“¾æ¥åŠ¨æ€åº“çš„ä»£ç ï¼Œå¤šä¸ªç¨‹åºå…±äº«åº“çš„ä»£ç \n\n2.ç”Ÿæˆ\næµ‹è¯•æ‰€ç”¨ä»£ç  ğŸ‘‰ ç‚¹æˆ‘\n\næˆ‘å†™å¥½äº†ä¸¤ä¸ªå¤´æ–‡ä»¶å’Œä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸ºäº†å‡å°‘åšå®¢ç¯‡å¹…ï¼Œæ­¤å¤„åªè´´å‡º.cçš„å‡½æ•°å®ç°\n//myMath.c#include&quot;myMath.h&quot;int Add(int a,int b)&#123;    return a+b;&#125;//myPrint.c#include &quot;myPrint.h&quot;void Print(const char* msg)&#123;    printf(&quot;time: %d, msg: %s\\n&quot;,(unsigned int)time(NULL),msg);&#125;\n\n2.1 é™æ€åº“ç”Ÿæˆé™æ€åº“æ‰€ç”¨å‘½ä»¤ä¸ºar -rcï¼Œå¯¹åº”çš„å®Œæ•´makeæ“ä½œå¦‚ä¸‹\nlibMytest.a:myMath.o myPrint.o\tar -rc libMytest.a myMath.o myPrint.omyMath.o:myMath.c\tgcc -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -c myPrint.c -o myPrint.o\n\nç”Ÿæˆå¥½é™æ€åº“åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ar -två‘½ä»¤æ¥æŸ¥çœ‹è¯¥åº“çš„ç›®å½•åˆ—è¡¨\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ ar -tv libmytest.arw-rw-r-- 1001/1001   1240 Nov  3 09:28 2022 myMath.orw-rw-r-- 1001/1001   1632 Nov  3 09:28 2022 myPrint.o[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ \n\n2.2 åŠ¨æ€åº“åŠ¨æ€åº“çš„ç”Ÿæˆæ— éœ€é¢å¤–çš„å‘½ä»¤ï¼Œåªéœ€è¦åœ¨gccç¼–è¯‘çš„æ—¶å€™ï¼ŒæŒ‡å®š-sharedå³å¯\nåŒæ—¶ï¼Œä¾èµ–çš„.oæ–‡ä»¶ä¹Ÿéœ€è¦ç”¨-fPICæ¥ç¼–è¯‘\n-fPIC ä¸ä½ç½®æ— å…³ç ï¼Œå’ŒåŠ¨æ€åº“çš„ç‰¹æ€§æœ‰å…³-shared ä»£è¡¨éœ€è¦ç¼–è¯‘ä¸€ä¸ªåŠ¨æ€åº“\n\nå…¶makeæ“ä½œå¦‚ä¸‹\nlibmytest.so:myMath.o myPrint.o\tgcc -shared -o libmytest.so myMath.o myPrint.omyMath.o:myMath.c\tgcc -fPIC -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -fPIC -c myPrint.c -o myPrint.o\n\n2.3 ä¸€å¹¶å‘å¸ƒè¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„makefileï¼Œå¯ä»¥åŒæ—¶ç¼–è¯‘ç”ŸæˆåŠ¨é™æ€åº“ï¼Œå¹¶å°†å…¶æ‰“åŒ…åˆ°ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶å¤¹å†…\n.PHONY:allall:libmytest.so libmytest.a.PHONY:liblib:\tmkdir -p lib-static/lib\tmkdir -p lib-static/include\tcp *.a lib-static/lib\tcp *.h lib-static/include\tmkdir -p lib-dynamic/lib\tmkdir -p lib-dynamic/include\tcp *.so lib-dynamic/lib\tcp *.h lib-dynamic/includelibmytest.so:myMath.o myPrint.o\tgcc -shared -o libmytest.so myMath.o myPrint.omyMath.o:myMath.c\tgcc -fPIC -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -fPIC -c myPrint.c -o myPrint.olibmytest.a:myMath.o myPrint.o\tar -rc libmytest.a myMath.o myPrint.omyMath_s.o:myMath.c\tgcc -c myMath.c -o myMath_s.omyPrint_s.o:myPrint.c\tgcc -c myPrint.c -o myPrint_s.o.PHONY:cleanclean:\trm -rf *.o *.a *.so lib-static lib-dynamic\n\n3.ä½¿ç”¨#include &quot;myPrint.h&quot;#include &quot;myMath.h&quot;#include &quot;stdio.h&quot;int main()&#123;    printf(&quot;ret %d\\n&quot;,Add(1,2));    Print(&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&quot;);    return 0;&#125;\n\nå½“æˆ‘ä»¬ä½¿ç”¨äº†åŠ¨é™æ€åº“åï¼Œå°±æ²¡æœ‰åŠæ³•ç›´æ¥ç¼–è¯‘è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºäº†\nmuxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ gcc test.c/tmp/ccKHwYHv.o: In function `main&#x27;:test.c:(.text+0xf): undefined reference to `Add&#x27;test.c:(.text+0x2a): undefined reference to `Print&#x27;collect2: error: ld returned 1 exit status[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™æ˜¯å› ä¸ºï¼Œgccæ²¡åŠæ³•æ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„å¤´æ–‡ä»¶\n\n&quot;&quot;æ˜¯åœ¨å½“å‰è·¯å¾„ä¸‹æ‰¾\n&lt;&gt;æ˜¯åœ¨åº“ç›®å½•ä¸‹é¢æ‰¾\n\nå› ä¸ºæˆ‘ä»¬çš„å¤´æ–‡ä»¶æ—¢ä¸åœ¨å½“å‰è·¯å¾„ï¼Œä¹Ÿä¸åœ¨ç³»ç»Ÿçš„åº“ä¸­ï¼Œæ‰€ä»¥gccå°±æ²¡æœ‰åŠæ³•æ‰¾åˆ°å¤´æ–‡ä»¶å’Œå‡½æ•°å£°æ˜\n3.1 é™æ€åº“é“¾æ¥é™æ€åº“çš„æ–¹æ³•å¦‚ä¸‹\ngcc test.c -L../lib-static/lib/ -I../lib-static/include/ -lmytest -o test\n\n\n-Lé€‰é¡¹åå¸¦çš„æ˜¯åº“çš„è·¯å¾„\n-Ié€‰æ‹©åå¸¦çš„æ˜¯å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„\n-l(å°å†™çš„L)é€‰é¡¹å¸¦çš„æ˜¯åº“çš„åå­—ï¼Œéœ€è¦å»æ‰åº“æ–‡ä»¶åå‰é¢çš„libå’Œåç¼€.a\n-o testä»£è¡¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åä¸ºtest\n\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ gcc test.c -L../lib-static/lib/ -I ../lib-static/include/ -lmytest -o test[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testret 3time: 1667441311, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nç‰¹ç‚¹é™æ€åº“çš„ç‰¹ç‚¹ä¾¿æ˜¯ï¼Œå…¶åº“çš„å®ç°å·²ç»è¢«ç¼–è¯‘é“¾æ¥è¿›å…¥äº†å¯æ‰§è¡Œç¨‹åºï¼Œå³ä¾¿æˆ‘ä»¬å°†åº“ç»™åˆ é™¤ï¼Œä¹Ÿä¸å½±å“å¯æ‰§è¡Œç¨‹åºçš„è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ make cleanrm -rf *.o *.a *.so lib-static lib-dynamic[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ lltotal 24-rw-rw-r-- 1 muxue muxue  702 Nov  3 09:28 makefile-rw-rw-r-- 1 muxue muxue   60 Nov  3 08:52 myMath.c-rw-rw-r-- 1 muxue muxue   35 Nov  3 08:51 myMath.h-rw-rw-r-- 1 muxue muxue  117 Nov  3 09:01 myPrint.c-rw-rw-r-- 1 muxue muxue   77 Nov  3 09:01 myPrint.hdrwxrwxr-x 2 muxue muxue 4096 Nov  3 09:50 test[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ ./test/./testret 3time: 1667440486, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ \n\nå¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±çš„åº“çš„å®ç°ä¸¢å…¥äº†ç³»ç»Ÿçš„åº“ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬æ˜¯/lib64/ï¼‰ç¼–è¯‘çš„æ—¶å€™å°±ä¸éœ€è¦å¸¦-Lé€‰é¡¹äº†ï¼Œåªéœ€è¦ç”¨-læŒ‡å®šåº“åå³å¯\ngcc test.c -lmytest\n\nä½†æ˜¯å°†è‡ªå·±çš„åº“ä¸¢å…¥ç³»ç»Ÿåº“è·¯å¾„ä¸‹çš„æ“ä½œå¹¶ä¸æ¨èï¼Œå°±å’Œä½ å°†è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸¢å…¥/usr/binè·¯å¾„é‡Œé¢ä¸€æ ·ï¼Œä¼šæ±¡æŸ“ç³»ç»Ÿçš„ç¯å¢ƒ\n\n3.2 åŠ¨æ€åº“åŠ¨æ€åº“å’Œé™æ€åº“é“¾æ¥çš„åŸºæœ¬æ–¹å¼æ˜¯ä¸€æ ·çš„\ngcc test.c -L../lib-dynamic/lib/ -I ../lib-dynamic/include/ -lmytest -o testd\n\nè¿™é‡Œé€‰é¡¹çš„å«ä¹‰å’Œä¸Šé¢å®Œå…¨ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯è¿è¡Œçš„æ—¶å€™\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testd./testd: error while loading shared libraries: libmytest.so: cannot open shared object file: No such file or directory[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nç›´æ¥è¿è¡Œï¼Œä½ ä¼šå‘ç°æŠ¥é”™äº†ï¼è¿™ä¸ªæŠ¥é”™çš„å¤§æ¦‚æ„æ€å°±æ˜¯æ‰¾ä¸åˆ°åŠ¨æ€åº“æ–‡ä»¶\nlddå‘½ä»¤ä½¿ç”¨lddå‘½ä»¤æŸ¥çœ‹testdå¯æ‰§è¡Œæ–‡ä»¶çš„åŠ¨æ€åº“ç»“æ„ï¼Œä¼šå‘ç°æˆ‘ä»¬è‡ªå·±çš„åº“æ˜¯æ²¡æœ‰æ‰¾åˆ°çš„\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ldd testd        linux-vdso.so.1 =&gt;  (0x00007ffd051fe000)        /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007f7de6d19000)        libmytest.so =&gt; not found        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f7de6832000)        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f7de662e000)        /lib64/ld-linux-x86-64.so.2 (0x00007f7de6c00000)[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™æ˜¯å› ä¸ºï¼ŒåŠ¨æ€åº“çš„ç‰¹ç‚¹ä¾¿æ˜¯è¿è¡Œçš„æ—¶å€™ä¹Ÿéœ€è¦æŒ‡å®šï¼è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥çš„è¿‡ç¨‹ï¼\nåŠ¨æ€é“¾æ¥åŠ¨æ€åº“éœ€è¦æ‰§è¡ŒåŠ¨æ€é“¾æ¥ï¼šåœ¨å¯æ‰§è¡Œç¨‹åºå¼€å§‹è¿è¡Œä¹‹å‰ï¼Œå¤–éƒ¨å‡½æ•°çš„æœºå™¨ç ç”±æ“ä½œç³»ç»Ÿä»ç£ç›˜ä¸Šçš„è¯¥åŠ¨æ€åº“å¤åˆ¶åˆ°å†…å­˜ä¸­\nåˆšåˆšæˆ‘ä»¬çš„æŒ‡å®šåªæ˜¯å‘Šè¯‰äº†gccç¼–è¯‘å™¨åº“è·¯å¾„åœ¨å“ªå„¿ï¼Œä½†æ˜¯å¯æ‰§è¡Œç¨‹åºè¿è¡Œçš„æ—¶å€™å¹¶ä¸çŸ¥é“ï¼\né‚£ä¹ˆå¦‚ä½•è®©å¯æ‰§è¡Œç¨‹åºæ‰¾åˆ°æˆ‘ä»¬çš„åŠ¨æ€åº“å‘¢ï¼Ÿ\n\nå°†åŠ¨æ€åº“æ‹·è´åˆ°ç³»ç»Ÿçš„/lib64æ–‡ä»¶å¤¹ä¸­\né€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œç±»ä¼¼äºPATHï¼Œå¯æ‰§è¡Œç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ°LD_LIBRARY_PATHé‡Œé¢æ‰¾åŠ¨æ€åº“\nä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶\n\n3.3 æ‰¾åˆ°åŠ¨æ€åº“3.3.1 ç¯å¢ƒå˜é‡LD_LIBRARY_PATHå’Œä¿®æ”¹PATHçš„ç¯å¢ƒå˜é‡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹å¼å¢åŠ åŠ¨æ€åº“çš„æŸ¥æ‰¾è·¯å¾„\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/\n\nä¿®æ”¹äº†ä¹‹åçš„ç¯å¢ƒå˜é‡å¦‚ä¸‹\nLD_LIBRARY_PATH=:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/\n\nå†æ¬¡è¿è¡Œ./testd æˆåŠŸæ‰§è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testdret 3time: 1667443224, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•\n\nä¿®æ”¹é…ç½®æ–‡ä»¶çš„åŠæ³•ï¼Œä¾¿æ˜¯å°†è¯¥è·¯å¾„æ°¸ä¹…å†™å…¥ç¯å¢ƒå˜é‡ï¼ˆä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ“ä½œåªå¯¹å½“å‰bashæœ‰æ•ˆï¼‰è¿™é‡Œå°±ä¸æ¼”ç¤ºè¾£ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ldd testd        linux-vdso.so.1 =&gt;  (0x00007ffde04ea000)        /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007fe9000bc000)        libmytest.so =&gt; /home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/libmytest.so (0x00007fe8ffda1000)        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fe8ff9d3000)        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fe8ff7cf000)        /lib64/ld-linux-x86-64.so.2 (0x00007fe8fffa3000)\n\nlddå‘½ä»¤çš„ç»“æœä¹Ÿæ˜¾ç¤ºå‡ºäº†æˆ‘ä»¬è‡ªå·±å†™çš„åŠ¨æ€åº“çš„è·¯å¾„\n3.3.2 &#x2F;etc&#x2F;ld.so.conf.dé™¤äº†ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¿®æ”¹/etc/ld.so.conf.dä¸‹çš„æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ls /etc/ld.so.conf.dbind-export-x86_64.conf  kernel-3.10.0-1160.62.1.el7.x86_64.conf  kernel-3.10.0-1160.76.1.el7.x86_64.confdyninst-x86_64.conf      kernel-3.10.0-1160.71.1.el7.x86_64.conf  mariadb-x86_64.conf[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™é‡Œçš„æ“ä½œéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¯¥ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª.confæ–‡ä»¶ï¼Œå¹¶åœ¨é‡Œé¢å†™å…¥åŠ¨æ€åº“çš„ç»å¯¹è·¯å¾„å³å¯ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ls /etc/ld.so.conf.dbind-export-x86_64.conf  kernel-3.10.0-1160.62.1.el7.x86_64.conf  kernel-3.10.0-1160.76.1.el7.x86_64.conf  mytest.confdyninst-x86_64.conf      kernel-3.10.0-1160.71.1.el7.x86_64.conf  mariadb-x86_64.conf[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ cat /etc/ld.so.conf.d/mytest.conf/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè®¾ç½®äº†ä¹‹åï¼Œç¬¬ä¸€æ¬¡è¿è¡Œï¼Œè¿˜æ˜¯æ˜¾ç¤ºæ‰¾ä¸åˆ°åŠ¨æ€åº“\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testd./testd: error while loading shared libraries: libmytest.so: cannot open shared object file: No such file or directory[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\næˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è®©é…æ–‡ä»¶ç”Ÿæ•ˆï¼Œå°±OKäº†ï¼\nsudo ldconfig #å­ç”¨æˆ·æƒé™ä¸å¤Ÿï¼Œéœ€è¦åŠ sudo\n\næ‰§è¡Œå®Œè¯¥å‘½ä»¤åï¼Œå¯æ‰§è¡Œç¨‹åºä¹Ÿèƒ½æˆåŠŸè¿è¡Œäº†1\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ sudo ldconfig[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testdret 3time: 1667448942, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\næµ‹è¯•å®Œæ¯•ä¹‹åï¼Œå»ºè®®å°†é…ç½®æ–‡ä»¶åˆ é™¤ï¼Œå¹¶é‡æ–°åŠ è½½åŠ¨æ€åº“é…ç½®æ–‡ä»¶\nsudo rm /etc/ld.so.conf.d/mytest.confsudo ldconfig\n\nè¿™æ ·åšæ˜¯é¿å…æ±¡æŸ“\n3.3.3 åœ¨lib64ä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ln -s /home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/libmytest.so /lib64/libmytest.so\n\nåˆ›å»ºè½¯è¿æ¥çš„æ–¹å¼å’Œå°†æˆ‘ä»¬çš„æ–‡ä»¶å¤åˆ¶è¿›å»æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è½¯è¿æ¥åªæ˜¯ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæºç»™åˆ äº†ï¼Œè½¯è¿æ¥ä¹Ÿä¼šå¤±æ•ˆ\nè¿™éƒ¨åˆ†å°±ä¸åšæ¼”ç¤ºäº†\n\n4.ä¼˜åŠ£4.1 é™æ€åº“é™æ€åº“ç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œç¨‹åºå¯ä»¥è„±ç¦»é™æ€åº“è¿è¡Œï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“åº“çš„è·¯å¾„ã€‚\nå³ä¾¿è¿™ä¸ªåº“è¢«åˆ é™¤ï¼Œä¹Ÿä¸æ¯«ä¸å½±å“æˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åº\n4.2 åŠ¨æ€åº“åŠ¨æ€åº“çš„ä»£ç åªéœ€è¦ä¸€ä»½ï¼Œæ‰€æœ‰çš„å¯æ‰§è¡Œç¨‹åºä¾¿éƒ½å¯ä»¥ä½¿ç”¨\nåœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åº“å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹æ‰€å…±äº«ã€‚ä½†å‰ææ˜¯ï¼Œå¯æ‰§è¡Œç¨‹åºéœ€è¦çŸ¥é“è¯¥åŠ¨æ€åº“çš„è·¯å¾„ï¼Œä»¥ä¾¿å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼ˆæˆ–è€…æ‰¾åˆ°å®ƒåœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼‰\n\nè¿™æ ·å°±ä¿è¯äº†å¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªåº“ï¼ŒèŠ‚çœäº†å†…å­˜çš„æ¶ˆè€—ï¼Œä¹ŸèŠ‚çœäº†ç£ç›˜ç©ºé—´\n\nè¿™é‡ŒåŠ¨æ€åº“çš„å¯æ‰§è¡Œæ–‡ä»¶å¤§å°ï¼Œå°äºé™æ€åº“çš„å¯æ‰§è¡Œæ–‡ä»¶\n\nå› ä¸ºæµ‹è¯•çš„ä»£ç ä¸å¤šï¼Œæ‰€ä»¥å·®è·å°šä¸æ˜æ˜¾\n\n5.åŠ¨æ€åº“-fPICçš„ä½œç”¨\nå‚è€ƒhttps://blog.csdn.net/itworld123/article/details/117587091\n\ngcc -fPIC -c myMath.c -o myMath.o\n\nfPIC çš„å…¨ç§°æ˜¯ Position Independent Codeï¼Œ ç”¨äºç”Ÿæˆä½ç½®æ— å…³ä»£ç \n\nä»€ä¹ˆæ˜¯ä½ç½®æ— å…³ä»£ç ï¼Ÿ\nä¸ªäººç†è§£æ˜¯ä»£ç æ— ç»å¯¹è·³è½¬ï¼Œè·³è½¬éƒ½ä¸ºç›¸å¯¹è·³è½¬\n\nå¦‚æœæˆ‘ä»¬çš„é™æ€åº“ä¸­ï¼Œä¸ä½¿ç”¨å…¶ä»–åº“çš„ä»£ç ï¼ˆæ¯”å¦‚stdio.hï¼‰\nint fuc(int a)&#123;\treturn ++a;&#125;\n\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥å†ç¼–è¯‘çš„æ—¶å€™ä¸å¸¦-fPIC å¦åˆ™ä¼šæŠ¥é”™\n/usr/bin/ld: /tmp/ccCViivC.o: relocation R_X86_64_32 against `.rodata&#x27; can not be used when making a shared object; recompile with -fPIC/tmp/ccCViivC.o: could not read symbols: Bad value\n\nä½†æ˜¾ç„¶ï¼Œè¿™ç§æƒ…å†µæ˜¯éå¸¸å°‘è§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ç¼–è¯‘åŠ¨æ€åº“çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¸¦ä¸Šè¿™ä¸ªå‚æ•°ï¼Œæ¥å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„åŠ¨æ€åº“ç¼–è¯‘\n\n\nåŠ  fPIC é€‰é¡¹ç”Ÿæˆçš„åŠ¨æ€åº“ï¼Œæ˜¾ç„¶æ˜¯ä½ç½®æ— å…³çš„ï¼Œè¿™æ ·çš„ä»£ç æœ¬èº«å°±èƒ½è¢«æ”¾åˆ°çº¿æ€§åœ°å€ç©ºé—´çš„ä»»æ„ä½ç½®ï¼Œæ— éœ€ä¿®æ”¹å°±èƒ½æ­£ç¡®æ‰§è¡Œã€‚é€šå¸¸çš„æ–¹æ³•æ˜¯è·å–æŒ‡ä»¤æŒ‡é’ˆçš„å€¼ï¼ŒåŠ ä¸Šä¸€ä¸ªåç§»å¾—åˆ°å…¨å±€å˜é‡ &#x2F; å‡½æ•°çš„åœ°å€ã€‚\nåŠ  fPIC é€‰é¡¹çš„æºæ–‡ä»¶å¯¹äºå®ƒå¼•ç”¨çš„å‡½æ•°å¤´æ–‡ä»¶ç¼–å†™æœ‰å¾ˆå®½æ¾çš„å°ºåº¦ã€‚æ¯”å¦‚åªéœ€è¦åŒ…å«ä¸ªå£°æ˜çš„å‡½æ•°çš„å¤´æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰ç›¸åº”çš„ C æ–‡ä»¶æ¥å®ç°ï¼Œç¼–è¯‘æˆ so åº“ç…§æ ·å¯ä»¥é€šè¿‡ã€‚\nå¯¹äºä¸åŠ  fPICï¼Œåˆ™åŠ è½½ so æ–‡ä»¶æ—¶ï¼Œéœ€è¦å¯¹ä»£ç æ®µå¼•ç”¨çš„æ•°æ®å¯¹è±¡éœ€è¦é‡å®šä½ï¼Œé‡å®šä½ä¼šä¿®æ”¹ä»£ç æ®µçš„å†…å®¹ï¼Œè¿™å°±é€ æˆæ¯ä¸ªä½¿ç”¨è¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µçš„è¿›ç¨‹åœ¨å†…æ ¸é‡Œéƒ½ä¼šç”Ÿæˆè¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µçš„ copyã€‚æ¯ä¸ª copy éƒ½ä¸ä¸€æ ·ï¼Œå–å†³äºè¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µå’Œæ•°æ®æ®µå†…å­˜æ˜ å°„çš„ä½ç½®ã€‚è¿™ç§æ–¹å¼æ›´æ¶ˆè€—å†…å­˜ï¼Œä¼˜ç‚¹æ˜¯åŠ è½½é€Ÿåº¦å¯èƒ½ä¼šå¿«ä¸€ä¸¢ä¸¢ï¼Œå¼Šå¤§äºåˆ©\n\n\nç»“è¯­åŠ¨é™æ€åº“çš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±OVERè¾£ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»å°è¯•ä¸‹è½½ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ ‘è“æ´¾ä¸Šæœ€å¸¸ç”¨çš„wiringPiåº“ï¼Œè¿˜æœ‰C++çš„booståº“ç­‰ç­‰\nsudo yum install -y boost-devel\n\næœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | ç®¡é“","url":"/2022/11/11/note_Linux/16%E7%AE%A1%E9%81%93/","content":"ä»Šå¤©è®©æˆ‘ä»¬æ¥è®¤è¯†å¦‚ä½•ä½¿ç”¨ç®¡é“æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡\n\n\n[TOC]\n1.ä½•ä¸ºç®¡é“ï¼Ÿåœ¨æœ€åˆå­¦ä¹ linuxçš„åŸºç¡€å‘½ä»¤æ—¶ï¼Œæ¥è§¦è¿‡ç”¨|æ¥è¿æ¥å¤šä¸ªå‘½ä»¤çš„æ“ä½œã€‚å½“æ—¶ä¾¿æåˆ°äº†è¿™æ˜¯ä¸€ä¸ªç®¡é“æ“ä½œï¼Œä½†æ²¡æœ‰è¯¦è§£ç®¡é“åˆ°åº•æ˜¯ä»€ä¹ˆã€‚\n1.1 ç®¡é“æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ç®¡é“ç®¡é“ï¼Œå¦‚åŒå…¶åï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥è®©æ•°æ®åœ¨å†…éƒ¨æµåŠ¨çš„ä¸œè¥¿ã€‚åˆ›å»ºç®¡é“ï¼Œå°±å¥½æ¯”åœ¨ä¸¤ä¸ªé˜€é—¨ï¼ˆè¿›ç¨‹ï¼‰ä¹‹é—´æ­äº†ä¸€æ ¹æ°´ç®¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±æ§åˆ¶ç®¡é“ä¸­æ°´çš„æµå‘\nä¸è¿‡ï¼Œåœ¨Linuxç³»ç»Ÿä¸­æä¾›çš„ç®¡é“æ¥å£ï¼Œåªæ”¯æŒå•é¡¹æµåŠ¨ã€‚ä¸€ä¸ªç®¡é“åªæ”¯æŒä»A-&gt;Bï¼Œä¸æ”¯æŒB-&gt;A\nè¦æƒ³è¿›è¡ŒåŒå‘é€šä¿¡ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“\n1.2 è¿›ç¨‹é€šä¿¡æ—¢ç„¶ç®¡é“æ˜¯ç”¨æ¥è¿›ç¨‹é€šä¿¡çš„ï¼Œé‚£è¿›ç¨‹é€šä¿¡åˆæ˜¯ä»€ä¹ˆï¼Œå®ƒæœ‰ä½•ç”¨å‘¢ï¼Ÿ\nè¿›ç¨‹é€šä¿¡çš„ç›®çš„æ˜¯è®©ä¸¤ä¸ªè¿›ç¨‹å¯ä»¥ç›¸äº’äº¤æµï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š\n\næ•°æ®ä¼ è¾“ï¼Œä»è¿›ç¨‹Aå‘é€æ•°æ®é“è¿›ç¨‹B\nèµ„æºå…±äº«ï¼Œå¤šä¸ªè¿›ç¨‹ä½¿ç”¨åŒä¸€ä¸ªèµ„æº\né€šçŸ¥äº‹ä»¶ï¼Œè¿›ç¨‹Aå‘è¿›ç¨‹Bå‘é€æ¶ˆæ¯ï¼Œå‘ŠçŸ¥è¿›ç¨‹Bå‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶\nè¿›ç¨‹æ§åˆ¶ï¼Œçˆ¶è¿›ç¨‹é€šè¿‡ç®¡é“æ¥æ§åˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œï¼Œè¿›ç¨‹Aæ§åˆ¶è¿›ç¨‹Bçš„æ‰§è¡Œç­‰ç­‰\n\né™¤äº†ç®¡é“ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡systemV/POSIXæ¥å®ç°è¿›ç¨‹é€šä¿¡\nè¿›ç¨‹é€šä¿¡çš„æ ¸å¿ƒæ€æƒ³ï¼šè®©ä¸¤ä¸ªè¿›ç¨‹è·å–åˆ°åŒä¸€ä»½èµ„æº\n1.3 ç®¡é“åˆ†ç±»ç®¡é“åˆ†ä¸ºä¸¤ç§\n\nåŒ¿åç®¡é“ï¼Œpipe\nå‘½åç®¡é“ï¼Œç®¡é“æ–‡ä»¶\n\nä¸”å¬æˆ‘æ…¢æ…¢é“æ¥\n2.åŒ¿åç®¡é“åŒ¿åç®¡é“ä¸»è¦ç”¨äºçˆ¶å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå…¶ä½¿ç”¨pipeæ¥å£æ¥è¿›è¡Œåˆ›å»º\n\n\nç±»ä¼¼äºforkï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºäº†ä¹‹ååˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼å°±å¯ä»¥äº†\nå…¶ä¸­pipefd[2]æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œæˆ‘ä»¬è¦é¢„å…ˆåˆ›å»ºå¥½ä¸€ä¸ª2ä¸ªç©ºé—´çš„æ•°ç»„ï¼Œä¼ å…¥è¯¥å‡½æ•°ã€‚pipeä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåªå±äºè¯¥è¿›ç¨‹çš„ä¸´æ—¶æ–‡ä»¶ï¼‰å¹¶å°†è¯»ç«¯èµ‹å€¼ç»™pipefd[0]ï¼Œå†™ç«¯èµ‹å€¼ç»™pipefd[1]\n\nå¦‚æœæˆ‘ä»¬éœ€è¦çˆ¶è¿›ç¨‹å†™ï¼Œå­è¿›ç¨‹è¯»ï¼Œå°±åœ¨çˆ¶è¿›ç¨‹å…³é—­è¯»ç«¯ï¼Œå­è¿›ç¨‹å…³é—­å†™ç«¯\nå¦‚æœæˆ‘ä»¬éœ€è¦çˆ¶è¿›ç¨‹è¯»ï¼Œå­è¿›ç¨‹å†™ï¼Œå°±åœ¨çˆ¶è¿›ç¨‹å…³é—­å†™æ®µï¼Œå­è¿›ç¨‹å…³é—­è¯»ç«¯\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±åœ¨çˆ¶å­è¿›ç¨‹ä¸­æ‰“é€šäº†ä¸€ä¸ªç®¡é“ï¼Œå¯ä»¥è®©çˆ¶å­è¿›ç¨‹è¿›è¡Œä¸€å®šçš„äº¤æµ\nè€Œfdæ­£æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ è¿‡çš„Linuxä¸‹æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶ç®¡é“çš„è¯»å†™æ“ä½œå’Œè°ƒç”¨ç³»ç»Ÿæ¥å£è¯»å†™æ–‡ä»¶å®Œå…¨ç›¸åŒï¼\n\nåšå®¢ï¼šlinuxæ–‡ä»¶æ“ä½œ\n\n2.0 åº·åº·æºç /include/linux/pipe_fs_i.hä¸­å¯ä»¥æ‰¾åˆ°ç®¡é“æ“ä½œçš„æºç \nstruct pipe_buffer &#123;\tstruct page *page;\tunsigned int offset, len;\tconst struct pipe_buf_operations *ops;\tunsigned int flags;\tunsigned long private;&#125;;\n\nå…¶ä¸­æˆ‘ä»¬çš„ç®¡é“æ–‡ä»¶æ‹¥æœ‰ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºæœ‰ä¸€ä¸ªä¸“é—¨çš„struct pipe_buf_operationsç»“æ„ä½“ç”¨æ¥å¤„ç†å®ƒçš„è¾“å…¥è¾“å‡ºæ–¹æ³•ï¼Œä»¥åŠflagsç”¨æ¥æ ‡è¯†å½“å‰ç¼“å†²åŒºçš„è£…æ€\n2.1 åˆ›å»ºé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨pipeæ¥å£åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ï¼Œä½¿ç”¨å¹¶ä¸éš¾\n// 1.åˆ›å»ºç®¡é“int pipefd[2] = &#123;0&#125;;if(pipe(pipefd) != 0)&#123;    cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;    return 1;&#125;\n\nå› ä¸ºpipeæ˜¯é€šè¿‡pipefdè¿™ä¸ªè¾“å‡ºå‹å‚æ•°æ¥åˆ›å»ºç®¡é“çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€å•ç‹¬å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ¥å—è¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œç›´æ¥åœ¨ifè¯­å¥ä¸­è¿›è¡Œåˆ¤æ–­å³å¯\nvoid TestPipe2()&#123;     // 1.åˆ›å»ºç®¡é“    int pipefd[2] = &#123;0&#125;;    if(pipe(pipefd) != 0)    &#123;        cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;        return ;    &#125;    cout &lt;&lt; pipefd[0] &lt;&lt; &quot; &quot; &lt;&lt; pipefd[1] &lt;&lt; endl;&#125;\n\nå…ˆæ¥ä¸ªå°æµ‹è¯•ï¼Œæ‰“å°è¿™ä¸¤ä¸ªå€¼å¯ä»¥å‘ç°ï¼Œå®ƒå…¶å®æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ç³»ç»Ÿåˆ†åˆ«ç”¨è¯»æ–¹æ³•å’Œå†™æ–¹æ³•æ‰“å¼€äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¾›æˆ‘ä»¬ä½¿ç”¨\n\n0ä¸ºè¯»ç«¯ï¼›1ä¸ºå†™ç«¯\n\n[muxue@bt-7274:~/git/linux/code/22-11-04_pipe]$ ./test3 4[muxue@bt-7274:~/git/linux/code/22-11-04_pipe]$ \n\næˆ‘ä»¬è‡ªå·±æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯ä»3å¼€å§‹çš„ï¼Œ012å¯¹åº”çš„æ˜¯stdin/stdout/stderr\n2.2 çˆ¶å­é€šä¿¡æœ‰äº†åŒ¿åç®¡é“ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å°è¯•åœ¨çˆ¶å­è¿›ç¨‹ä¸­è¿›è¡Œé€šä¿¡äº†\nä»¥çˆ¶å†™å­è¯»ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å­è¿›ç¨‹å…³é—­å†™æ®µï¼Œçˆ¶è¿›ç¨‹å…³é—­è¯»ç«¯\npipefdæ˜¯çˆ¶è¿›ç¨‹çš„èµ„æºï¼Œforkåˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œè¯¥èµ„æºä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´ï¼Œä»¥ä¾›çˆ¶å­è¿›ç¨‹å…±äº«\n// 2.åˆ›å»ºå­è¿›ç¨‹pid_t id = fork();if(id &lt; 0)&#123;    cerr &lt;&lt; &quot;fork error&quot; &lt;&lt; endl;    return 2;&#125;else if (id == 0)&#123;    // 3.å­è¿›ç¨‹ç®¡é“    // å­è¿›ç¨‹è¯»å–, å…³æ‰å†™ç«¯    close(pipefd[1]);    //...&#125;else&#123;    // 4.çˆ¶è¿›ç¨‹ç®¡é“    // çˆ¶è¿›ç¨‹å†™å…¥ï¼Œå…³æ‰è¯»ç«¯    close(pipefd[0]);    //...&#125;\n\nå¤„ç†å®Œä¹‹åï¼Œåç»­çš„æ“ä½œä¾¿æ˜¯linuxçš„æ–‡ä»¶æ“ä½œäº†\nå®Œæ•´ä»£ç ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ï¼Œé€šè¿‡æ–‡ä»¶æ¥å£å¯¹pipefdè¿›è¡Œread/writeï¼Œå°±èƒ½è®©çˆ¶è¿›ç¨‹å‘é€çš„å­—ç¬¦ä¸²è¢«å­è¿›ç¨‹è¯»å–é“\n#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;using namespace std;#define NUM 1024//åŒ¿åç®¡é“int TestPipe()&#123;    // 1.åˆ›å»ºç®¡é“    int pipefd[2] = &#123;0&#125;;    if(pipe(pipefd) != 0)    &#123;        cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;        return 1;    &#125;    // 2.åˆ›å»ºå­è¿›ç¨‹    pid_t id = fork();    if(id &lt; 0)    &#123;        cerr &lt;&lt; &quot;fork error&quot; &lt;&lt; endl;        return 2;    &#125;    else if (id == 0)    &#123;        // 3.å­è¿›ç¨‹ç®¡é“        // å­è¿›ç¨‹æ¥è¿›è¡Œè¯»å–, å­è¿›ç¨‹å°±åº”è¯¥å…³æ‰å†™ç«¯        close(pipefd[1]);        char buffer[NUM];        while(1)        &#123;            cout &lt;&lt; &quot;time_stamp: &quot; &lt;&lt; (size_t)time(nullptr) &lt;&lt; endl;            // å­è¿›ç¨‹æ²¡æœ‰å¸¦sleepï¼Œä¸ºä»€ä¹ˆå­è¿›ç¨‹ä½ ä¹Ÿä¼šä¼‘çœ å‘¢ï¼Ÿï¼Ÿ            memset(buffer, 0, sizeof(buffer));            ssize_t s = read(pipefd[0], buffer, sizeof(buffer) - 1);            if(s &gt; 0)            &#123;                //è¯»å–æˆåŠŸ                buffer[s] = &#x27;\\0&#x27;;                cout &lt;&lt; &quot;å­è¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯,å†…å®¹æ˜¯: &quot; &lt;&lt; buffer &lt;&lt; endl;            &#125;            else if(s == 0)            &#123;                cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹å†™å®Œäº†ï¼Œæˆ‘ä¹Ÿé€€å‡ºå•¦&quot; &lt;&lt; endl;                break;            &#125;            else&#123;                cerr &lt;&lt; &quot;err while chlid read pipe&quot; &lt;&lt; endl;            &#125;        &#125;        close(pipefd[0]);        exit(0);    &#125;    else    &#123;        // 4.çˆ¶è¿›ç¨‹ç®¡é“        // çˆ¶è¿›ç¨‹æ¥è¿›è¡Œå†™å…¥ï¼Œå°±åº”è¯¥å…³æ‰è¯»ç«¯        close(pipefd[0]);        const char *msg = &quot;ä½ å¥½å­è¿›ç¨‹ï¼Œæˆ‘æ˜¯çˆ¶è¿›ç¨‹, è¿™æ¬¡å‘é€çš„ä¿¡æ¯ç¼–å·æ˜¯&quot;;        int cnt = 0;        while(cnt &lt; 10)        &#123;            char sendBuffer[1024];            sprintf(sendBuffer, &quot;%s : %d&quot;, msg, cnt);//æ ¼å¼åŒ–æ§åˆ¶å­—ç¬¦ä¸²            write(pipefd[1], sendBuffer, strlen(sendBuffer));            cnt++;            cout &lt;&lt; &quot;cnt: &quot; &lt;&lt; cnt &lt;&lt; endl;            sleep(1);        &#125;        close(pipefd[1]);        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹å†™å®Œäº†&quot; &lt;&lt; endl;    &#125;    // çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ    pid_t res = waitpid(id, nullptr, 0);    if(res &gt; 0)    &#123;        cout &lt;&lt; &quot;ç­‰å¾…å­è¿›ç¨‹æˆåŠŸ&quot; &lt;&lt; endl;    &#125;    cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹é€€å‡º&quot; &lt;&lt;endl;    return 0;&#125;\n\nè¿è¡ŒæˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°çˆ¶è¿›ç¨‹æ¯æ¬¡å†™å…¥ä¹‹åï¼Œå­è¿›ç¨‹è¯»å–\n\nçˆ¶è¿›ç¨‹ä¼‘çœ çš„æ—¶å€™ï¼Œå­è¿›ç¨‹çœ‹èµ·æ¥å•¥äº‹æ²¡æœ‰åš\nå®é™…ä¸Šï¼Œå­è¿›ç¨‹æ˜¯åœ¨ç­‰å¾…çˆ¶è¿›ç¨‹å¯¹ç®¡é“çš„å†™å…¥\n2.3 ç­‰å¾…ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡è¿›ç¨‹ç­‰å¾…ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå…¶ä¸­æåˆ°äº†è¿›ç¨‹æœ‰æ—¶å€™éœ€è¦ç­‰å¾…å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚æ¯”å¦‚çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œå®Œæˆï¼ˆä¸Šé¢çš„ä»£ç ä¹Ÿç”¨äº†waitpidç­‰å¾…ï¼‰\nè€Œç®¡é“ï¼Œå°±æ˜¯è¿›ç¨‹éœ€è¦ç­‰å¾…çš„èµ„æºä¹‹ä¸€\n\nå¦‚æœç®¡é“ä¸ºç©ºï¼Œè¯»ç«¯å¿…é¡»è¦ç­‰å¾…å†™ç«¯å†™å…¥ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œåé¢çš„ä»£ç \nå¦‚æœç®¡é“æ»¡äº†ï¼Œå†™æ®µå¿…é¡»ç­‰å¾…è¯»ç«¯å–èµ°æ•°æ®ï¼Œå¦åˆ™ä¸èƒ½å†™å…¥ã€‚å› ä¸ºæ­¤æ—¶å†™å…¥ä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®\n\né‚£ä¹ˆï¼Œè¿›ç¨‹æ˜¯åœ¨æ‰§è¡Œåˆ°ä»€ä¹ˆå‡½æ•°çš„æ—¶å€™å¼€å§‹ç­‰å¾…çš„å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ï¼šè¿›ç¨‹å°†åœ¨read/writeä¸­è¿›è¡Œé˜»å¡ç­‰å¾…ï¼\n\næ‰§è¡Œåˆ°readçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåˆ¤æ–­åŒ¿åç®¡é“ä¸­æ²¡æœ‰æœ‰æ•ˆæ•°æ®ï¼Œè®©æ‰§è¡Œreadçš„è¿›ç¨‹ç­‰å¾…ç®¡é“å†™å…¥\næ‰§è¡Œåˆ°writeçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåˆ¤æ–­ç®¡é“å·²ç»æ»¡äº†ï¼Œå°±è®©æ‰§è¡Œwriteçš„è¿›ç¨‹ç­‰å¾…ç®¡é“è¢«è¯»å–ï¼ˆè€Œä¸”éœ€è¦ç®¡é“è¢«æ¸…ç©ºäº†æ‰èƒ½ç»§ç»­å†™å…¥ï¼‰\nè¿™ä¸ªåˆ¤æ–­æœºåˆ¶æ˜¯ç®¡é“æ–‡ä»¶ä¸­è‡ªå¸¦çš„ï¼Œæ˜¯ä¸€ç§åŒæ­¥å’Œäº’æ–¥æœºåˆ¶\nç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å‘æ˜¾ç¤ºå™¨è¾“å‡ºçš„æ—¶å€™ï¼Œå°±æ²¡æœ‰è®¿é—®æ§åˆ¶ï¼Œçˆ¶å­è¿›ç¨‹å‘æ˜¾ç¤ºå™¨è¾“å‡ºå†…å®¹çš„é¡ºåºæ˜¯å®Œå…¨éšæœºçš„\n\næœ¬è´¨å°±æ˜¯å°†è¯¥è¿›ç¨‹çš„task_strcutæ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶å°†çŠ¶æ€ä»Rè®¾ç½®ä¸ºS/D/T\nå†™å…¥ç­‰å¾…å¯¹ç¬¬äºŒç‚¹è¿›è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œæˆ‘ä»¬æŠŠçˆ¶è¿›ç¨‹æ”¹æˆæ­»å¾ªç¯ï¼Œå­è¿›ç¨‹æ¯ä¼‘çœ 3sè¯»å–ä¸€æ¬¡ç®¡é“\n\næ‰§è¡Œåä¼šå‘ç°ï¼Œçˆ¶è¿›ç¨‹å‡ ä¹æ˜¯åœ¨ä¸€ç¬é—´å†™å…¥äº†1226æ¬¡æ•°æ®ï¼Œéšåå­è¿›ç¨‹å¼€å§‹è¯»å–ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°ï¼Œå°½ç®¡å­è¿›ç¨‹å·²ç»å¼€å§‹è¯»å–äº†ï¼Œä½†æ˜¯çˆ¶è¿›ç¨‹å´ç±³æœ‰åŠ¨é™ã€‚\n\nå­è¿›ç¨‹éœ€è¦å°†ç®¡é“å†…çš„æ•°æ®è¯»å–ä¸€éƒ¨åˆ†ï¼Œçˆ¶è¿›ç¨‹æ‰èƒ½ç»§ç»­æ‰§è¡Œå†™å…¥ã€‚\næ­¤æ—¶çˆ¶è¿›ç¨‹å°±æ˜¯åœ¨writeé‡Œé¢è¿›è¡Œç­‰å¾…çš„\n\nè¿›ä¸€æ­¥è§‚å¯Ÿä¼šå‘ç°ï¼Œå½“å­è¿›ç¨‹è¯»å–åˆ°77æ¬¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹åˆå¼€å§‹å¾€ç®¡é“é‡Œé¢å†™å…¥äº†\n\nå˜¿ï¼Œä½ çŒœæ€ä¹ˆç€ï¼Ÿçˆ¶è¿›ç¨‹åˆšå¥½å†™å…¥äº†74æ¬¡æ¶ˆæ¯ï¼è€Œå­è¿›ç¨‹ç»§ç»­è¯»å–ä¹‹å‰çš„ç®¡é“ä¿¡æ¯\n\nè¿™ä¾¿å‘Šè¯‰æˆ‘ä»¬ï¼Œçˆ¶è¿›ç¨‹éœ€è¦ç­‰å¾…å­è¿›ç¨‹å°†ç®¡é“å†…å®¹è¯»å–ä¸€éƒ¨åˆ†ï¼ˆæ¸…ç†æ‰ä¸€éƒ¨åˆ†ï¼‰ä¹‹åï¼Œæ‰èƒ½ç»§ç»­å¾€ç®¡é“å†…éƒ¨å†™å…¥ã€‚\n\nä½†åœ¨è¯»ç«¯ï¼Œè¿™ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†\nè¯»å–ç­‰å¾…æˆ‘ä»¬è®©çˆ¶è¿›ç¨‹ç›´æ¥ç¡ä¸Š20såœ¨è¿›è¡Œå†™å…¥ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ˜¯æ‰§è¡Œåˆ°readå¼€å§‹ç­‰å¾…çš„\n\nå½“çˆ¶è¿›ç¨‹ç¬¬ä¸€æ¬¡å†™å…¥ä¹‹åï¼Œå­è¿›ç¨‹ç«‹é©¬æ‰“å°å‡ºäº†æ¶ˆæ¯çš„å†…å®¹ã€‚éšåçˆ¶è¿›ç¨‹åˆè¿›å…¥äº†ä¼‘çœ ï¼Œå­è¿›ç¨‹å¼€å§‹äº†æ–°ä¸€æ¬¡ç­‰å¾…\n\nç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åªè¦ä½ ä¸å¾€ç®¡é“é‡Œé¢å†™ä¸œè¥¿ï¼Œå­è¿›ç¨‹å°±éœ€è¦ä¸€ç›´ç­‰ä¸‹å»ï¼\næºç ä¸­çš„ä½“ç°æºç ä¸­æœ‰ä¸€ä¸ªå•ç‹¬çš„ç»“æ„ä½“ï¼Œç”¨æ¥æ ‡è¯†ç®¡é“æ–‡ä»¶ã€‚å…¶ä¸­inodeä¾¿æ˜¯Linuxä¸‹çš„æ–‡ä»¶æè¿°ç¬¦\nstruct pipe_inode_info &#123;\twait_queue_head_t wait;\tunsigned int nrbufs, curbuf;\tstruct page *tmp_page;\tunsigned int readers;\tunsigned int writers;\tunsigned int waiting_writers;\tunsigned int r_counter;\tunsigned int w_counter;\tstruct fasync_struct *fasync_readers;\tstruct fasync_struct *fasync_writers;\tstruct inode *inode;\tstruct pipe_buffer bufs[PIPE_BUFFERS];&#125;;\n\nåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªwaitç»“æ„ä½“ï¼Œå…¶ä¸ºä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œç»´æŠ¤å†™å…¥å’Œè¯»å–çš„ç­‰å¾…\nstruct __wait_queue_head &#123;\tspinlock_t lock;\tstruct list_head task_list;&#125;;typedef struct __wait_queue_head wait_queue_head_t;\n\nspinlockæ˜¯ä½•æ–¹ç¥åœ£æˆ‘ä»¬æš‚ä¸”ä¸çŸ¥ï¼Œä½†list_headç»“æ„ä½“å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—çš„é“¾è¡¨\nstruct list_head &#123;\tstruct list_head *next, *prev;&#125;;\n\n\n2.4 æ§åˆ¶å¤šä¸ªå­è¿›ç¨‹ä¸Šé¢åªæ˜¯å®ç°äº†çˆ¶è¿›ç¨‹å’Œä¸€ä¸ªå­è¿›ç¨‹çš„é€šä¿¡ï¼Œåœ¨å®é™…åœºæ™¯ä¸­è¿™è¿œè¿œä¸å¤Ÿç”¨ã€‚æ¥ä¸‹æ¥å°±æ¥å®ç°ä¸€ä¸ªçˆ¶è¿›ç¨‹å’Œå¤šä¸ªå­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œé€šè¿‡ç®¡é“ç»™å­è¿›ç¨‹åˆ†é…ä¸åŒçš„ä»»åŠ¡ï¼\nå…·ä½“çš„æ“ä½œåœ¨æ³¨é‡Šä¸­æœ‰æ‰€æ ‡æ˜ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿è¯„è®ºæå‡ºï¼\n#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;functional&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;//æä¾›ä¸‰ä¸ªlambdaè¡¨è¾¾å¼auto func1 = []() &#123;cout &lt;&lt; &quot;this is func1,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;auto func2 = []() &#123;cout &lt;&lt; &quot;this is func2,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;auto func3 = []() &#123;cout &lt;&lt; &quot;this is func3,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;//é€šè¿‡funcå­˜åœ¨æ•°ç»„ä¸­vector&lt;function&lt;void()&gt;&gt; func_v;void LoadFunc()&#123;    func_v.push_back(func1);    func_v.push_back(func2);    func_v.push_back(func3);&#125;//æœ‰ä¸€ç§æ¦‚å¿µå«åšâ€è´Ÿè½½å‡è¡¡â€ï¼Œåœ¨å¤šçº¿ç¨‹/å¤šè¿›ç¨‹æ“ä½œä¸­è¾ƒå¤šä½¿ç”¨//å…¶ç†å¿µå°±æ˜¯æ¯ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹åˆ†åˆ°çš„ä»»åŠ¡åº”è¯¥æ˜¯å¹³å‡çš„ï¼Œé¿å…å‡ºç°æŸä¸€ä¸ªè¿›ç¨‹å¹²çš„æ´»æ¯”åˆ«äººå¤šçš„æƒ…å†µvoid BalanceDivide(const vector&lt;pair&lt;int,int&gt;&gt;&amp; processMap)&#123;    //è®¾ç½®åˆå§‹åŒ–    srand((size_t)time(nullptr));    int total = 15;//åˆ†é…20æ¬¡ä»»åŠ¡    while(total&gt;0)    &#123;        sleep(1);        // é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹, é€‰æ‹©è¿›ç¨‹æ˜¯éšæœºçš„ï¼Œæ²¡æœ‰å‹ç€ä¸€ä¸ªè¿›ç¨‹ç»™ä»»åŠ¡        // è¾ƒä¸ºå‡åŒ€çš„å°†ä»»åŠ¡ç»™æ‰€æœ‰çš„å­è¿›ç¨‹ --- è´Ÿè½½å‡è¡¡        int pick = rand() % processMap.size();        // é€‰æ‹©ä¸€ä¸ªä»»åŠ¡        int task = rand() % func_v.size();        // æŠŠä»»åŠ¡ç»™ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹        write(processMap[pick].second, &amp;task, sizeof(task));        // æ‰“å°å¯¹åº”çš„æç¤ºä¿¡æ¯        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹æŒ‡æ´¾ä»»åŠ¡-&gt;&quot; &lt;&lt; task &lt;&lt; &quot; ç»™è¿›ç¨‹: &quot; &lt;&lt; processMap[pick].first &lt;&lt; &quot; ç¼–å·: &quot; &lt;&lt; pick &lt;&lt; endl;        total--;    &#125;    //ç»“æŸåï¼Œå†™å…¥0ä»£è¡¨è¿›ç¨‹ç»ˆæ­¢    for(int i=0;i&lt;processMap.size();i++)    &#123;        int end = -1;        write(processMap[i].second, &amp;end, sizeof(end));        cout &lt;&lt; &quot;stopping process pid = &quot; &lt;&lt; processMap[i].first &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;assign task end!&quot; &lt;&lt; endl;&#125;//å­è¿›ç¨‹å·¥ä½œï¼Œå‚æ•°ä¸ºpipefd[0]void Working(int pfd)&#123;    cout &lt;&lt; &quot;chlid [&quot; &lt;&lt; getpid() &lt;&lt; &quot;] start working&quot; &lt;&lt; endl;    while(1)    &#123;        int optCode = 0;//è¯»å–ä»»åŠ¡ä¸‹æ ‡        ssize_t s = read(pfd, &amp;optCode, sizeof(optCode));        if(s == 0)        &#123;            break;//è¯»å–äº†0ä¸ªå­—èŠ‚ä»£è¡¨é”™è¯¯        &#125;        else if(optCode == -1)        &#123;            break;//è¯»å–åˆ°-1ï¼Œä»£è¡¨ç»ˆæ­¢        &#125;           assert(s == sizeof(int));//åˆ¤æ–­æ˜¯å¦ä¸ºæ­£ç¡®çš„size        // æ‰§è¡Œçˆ¶è¿›ç¨‹æä¾›çš„ä»»åŠ¡        if(optCode &lt; func_v.size())         &#123;            func_v[optCode]();        &#125;    &#125;    cout &lt;&lt; &quot;chlid [&quot; &lt;&lt; getpid() &lt;&lt; &quot;] end working&quot; &lt;&lt; endl;&#125;int main()&#123;       LoadFunc();//åŠ è½½    vector&lt;pair&lt;int,int&gt;&gt; assignMap;    int processNum = 5;    for(int i=0;i&lt;processNum;i++)    &#123;        int pipefd[2];        if(pipe(pipefd)!=0)        &#123;            cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;            continue;        &#125;        int pid = fork();        if(pid==0)//å­è¿›ç¨‹        &#123;            close(pipefd[1]);//å…³é—­å†™            //å¼€å§‹å·¥ä½œ            Working(pipefd[0]);            close(pipefd[0]);            exit(0);//é€€å‡ºå­è¿›ç¨‹        &#125;        close(pipefd[0]);//çˆ¶è¿›ç¨‹å…³é—­è¯»        pair&lt;int,int&gt; p = &#123;pid, pipefd[1]&#125;;//è¿›ç¨‹pidå’Œpipefdå†™ç«¯çš„é”®å€¼å¯¹        assignMap.push_back(p);        sleep(1);    &#125;    cout &lt;&lt; &quot;create all process success!&quot; &lt;&lt; endl;    BalanceDivide(assignMap);//åˆ†é…ä»»åŠ¡    //ç»“æŸåˆ†é…åï¼Œç­‰å¾…å­è¿›ç¨‹åœæ­¢è¿è¡Œ    for (int i = 0; i &lt; processNum; i++)    &#123;        if (waitpid(assignMap[i].first, nullptr, 0) &gt; 0)        &#123;            cout &lt;&lt; &quot;wait for pid = &quot; &lt;&lt; assignMap[i].first &lt;&lt; &quot; wait success! &quot;                 &lt;&lt; &quot;num: &quot; &lt;&lt; i &lt;&lt; endl;        &#125;        close(assignMap[i].second);    &#125;        return 0;&#125;\n\nå…ˆæ˜¯çˆ¶è¿›ç¨‹åˆ›å»ºäº†5ä¸ªå­è¿›ç¨‹\n\nå†å¼€å§‹ç”¨ç”Ÿæˆéšæœºæ•°çš„æ–¹å¼ï¼Œä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æŒ‡æ´¾ç›¸åº”çš„â€œä»»åŠ¡â€ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰\n\n15æ¬¡ä»»åŠ¡æŒ‡æ´¾å®Œæ¯•ä¹‹åï¼Œä»¥ä¸€ä¸ªå¾ªç¯ï¼Œé€šè¿‡ç®¡é“å†™å…¥-1ä½œä¸ºåœæ­¢ç¬¦ï¼Œè®©å­è¿›ç¨‹åœæ­¢å·¥ä½œã€‚åŒæ—¶mainå‡½æ•°ä¸­è¿›è¡Œwaitpidç­‰å¾…å­è¿›ç¨‹è¿è¡ŒæˆåŠŸï¼\n\n2.5 å‘½ä»¤è¡Œ |å‘½ä»¤è¡Œä¸­è¾“å…¥çš„|å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªåŒ¿åç®¡é“\n\nè¿™é‡Œæˆ‘ä»¬ç”¨|è¿è¡Œä¸¤ä¸ªsleepå‘½ä»¤ï¼Œå†æŸ¥çœ‹è¿™ä¸¤ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªè¿›ç¨‹æ˜¯å±äºåŒä¸€ä¸ªçˆ¶è¿›ç¨‹çš„ï¼Œè¿™è¯´æ˜è¿™ä¸¤ä¸ªsleepè¿›ç¨‹æ˜¯ä¸€å¯¹å…„å¼Ÿ~\n\nå½“çˆ¶è¿›ç¨‹åˆ›å»ºä¸€å¯¹ç®¡é“çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸¤ä¸ªå­è¿›ç¨‹ï¼Œå¹¶å°†ç®¡é“äº¤ä»˜ç»™å­è¿›ç¨‹è¿›è¡Œä½¿ç”¨\n\nçˆ¶è¿›ç¨‹åˆ›å»ºç®¡é“ï¼Œåˆ›å»ºå­è¿›ç¨‹AB\nçˆ¶è¿›ç¨‹å…³é—­pipefd[0]å’Œ[1]\nå­è¿›ç¨‹Aå…³é—­è¯»ç«¯ï¼Œæ‰§è¡Œå†™å…¥\nå­è¿›ç¨‹Bå…³é—­å†™æ®µï¼Œæ‰§è¡Œè¯»å–\n\nè€Œ|å°±æ˜¯å°†ä¿¡æ¯è½¬ç»™ä¸¤ä¸ªå­è¿›ç¨‹ä½¿ç”¨çš„ä¸€ç§åŒ¿åç®¡é“ï¼è¿™ä¹Ÿèƒ½è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆps ajxï¼Œå†ç”¨| grepåœ¨å†…éƒ¨æœç´¢å†…å®¹å¹¶æ‰“å°å‡ºæ¥ã€‚å…¶å°±æ˜¯é€šè¿‡åŒ¿åç®¡é“å®ç°äº†å‡ ä¸ªå‘½ä»¤ä¸­çš„ä¿¡æ¯å…±äº«\n\n3.å‘½åç®¡é“å’ŒåŒ¿åç®¡é“ä¸åŒçš„æ˜¯ï¼Œå‘½åç®¡é“æ˜¯é€šè¿‡ä¸€ä¸ªç®¡é“æ–‡ä»¶æ¥å®ç°çš„ï¼Œå…¶æœ‰ä¸€ä¸ªæ–‡ä»¶çš„â€œå®ä½“â€ï¼Œæ”¯æŒå¤šä¸ªè¿›ç¨‹æ‰“å¼€åŒä¸€ä¸ªç®¡é“æ–‡ä»¶ï¼Œæ‰§è¡Œè¯»å†™æ“ä½œï¼Œå®ç°ç®¡é“çš„äº¤æµ\n\næˆ‘ä»¬é€šè¿‡mkfifoæ¥å£åˆ›å»ºä¸€ä¸ªFIFO(front in front out/å…ˆè¿›å…ˆå‡º)çš„ç®¡é“æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ³¨é‡Šä¹Ÿè¡¨æ˜ä»–æ˜¯ä¸€ä¸ªå‘½åç®¡é“a named pipe\né™¤äº†å¯ä»¥ç”¨å‡½æ•°è°ƒç”¨ï¼ŒmkfifoåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤\nmkfifo ç®¡é“åå­—\n\n3.1 åˆ›å»ºç®¡é“æ–‡ä»¶æ“ä½œæ–¹æ³•å’Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼ŒæŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œå¹¶æŒ‡å®šè¯¥æ–‡ä»¶çš„æƒé™ã€‚ä¸ºäº†é¿å…å—ç³»ç»Ÿçš„æƒé™æ©ç å€¼çš„å½±å“ï¼Œæˆ‘ä»¬è¦ç”¨umaskå°†æƒé™æ©ç å€¼ç½®é›¶\numask(0);if(mkfifo(&quot;test.pipe&quot;, 0600) != 0)&#123;//å½“è¿”å›å€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œä»£è¡¨å‡ºç°äº†é”™è¯¯    cerr &lt;&lt; &quot;mkfifo error&quot; &lt;&lt; endl;    return 1;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚å…¶æ–‡ä»¶æƒé™å€¼çš„å¼€å¤´ä¸ºpï¼Œä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªç®¡é“æ–‡ä»¶\n\nä¹‹åçš„æ“ä½œåŒæ ·æ˜¯æ–‡ä»¶æ“ä½œï¼Œå› ä¸ºç®¡é“æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶\n\nå…ˆä½¿ç”¨openæ–¹æ³•ï¼ŒæŒ‡å®šç”¨è¯»ã€å†™æ–¹æ³•\nå†åˆ†åˆ«åœ¨è¯»å†™ç«¯read/writeæ“ä½œæ–‡ä»¶\næ“ä½œå®Œæˆä¹‹åï¼Œcloseæ–‡ä»¶ï¼Œå¹¶åˆ é™¤è¯¥æ–‡ä»¶\nå› ä¸ºç®¡é“æ–‡ä»¶æœ‰å”¯ä¸€çš„è·¯å¾„ï¼Œå…¶èƒ½å¤Ÿå®Œæˆè®©ä¸¤ä¸ªè¿›ç¨‹çœ‹åˆ°åŒä¸€ä»½èµ„æºï¼Œä¹Ÿå°±å®ç°äº†è¿›ç¨‹é€šä¿¡çš„åŠŸèƒ½ï¼\n\n3.2 å®ç°ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¸‹é¢é€šè¿‡ä¸€ä¸ªæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ä»£ç ï¼Œæ¥æ¼”ç¤ºå¤šè¿›ç¨‹é€šä¿¡ã€‚\n\næœåŠ¡ç«¯è´Ÿè´£åˆ›å»ºç®¡é“æ–‡ä»¶ï¼Œä»¥è¯»æ–¹å¼æ‰“å¼€è¯¥ç®¡é“æ–‡ä»¶\nå®¢æˆ·ç«¯ä»¥å†™æ–¹å¼æ‰“å¼€ç®¡é“æ–‡ä»¶ï¼Œå‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯\n\nå®Œæ•´ä»£ç å¦‚ä¸‹ï¼ŒåŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶å’Œä¸¤ä¸ªæºæ–‡ä»¶\n//MyPath.h#pragma once#include &lt;iostream&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;#define NUM 1024#define FILE_PATH &quot;test.pipe&quot;//server.cpp#include&quot;MyPath.h&quot;int main()&#123;    //åˆ›å»ºç®¡é“æ–‡ä»¶    umask(0);    if(mkfifo(FILE_PATH, 0600) != 0)    &#123;        cerr &lt;&lt; &quot;mkfifo error&quot; &lt;&lt; endl;        return 1;    &#125;    //æ‰“å¼€ç®¡é“æ–‡ä»¶    int pipeFd = open(FILE_PATH, O_RDONLY);    if(pipeFd &lt; 0)    &#123;        cerr &lt;&lt; &quot;open fifo error&quot; &lt;&lt; endl;        return 2;    &#125;    //å¼€å§‹é€šä¿¡    cout &lt;&lt; &quot;æœåŠ¡å™¨å¯åŠ¨&quot; &lt;&lt; endl;    char buffer[NUM];    while(1)    &#123;        //æœåŠ¡ç«¯æ‰§è¡Œè¯»        ssize_t s = read(pipeFd, buffer, sizeof(buffer)-1);        if(s &gt; 0)        &#123;            buffer[s] = &#x27;\\0&#x27;;            cout &lt;&lt; &quot;å®¢æˆ·ç«¯-&gt;æœåŠ¡å™¨# &quot; &lt;&lt; buffer &lt;&lt; endl;        &#125;        else if(s == 0)        &#123;            cout &lt;&lt; &quot;å®¢æˆ·ç«¯é€€å‡ºï¼ŒæœåŠ¡å™¨ç»ˆæ­¢æ¥æ”¶&quot; &lt;&lt; endl;            break;        &#125;        else        &#123;            cout &lt;&lt; &quot;read: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;            break;        &#125;    &#125;    close(pipeFd);    cout &lt;&lt; &quot;æœåŠ¡å™¨å…³é—­&quot; &lt;&lt; endl;    unlink(FILE_PATH);    return 0;&#125;//client.cpp#include&quot;MyPath.h&quot;int main()&#123;    int pipeFd = open(FILE_PATH, O_WRONLY);    if(pipeFd &lt; 0)    &#123;        cerr &lt;&lt; &quot;open: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        return 1;    &#125;    //å®¢æˆ·ç«¯æ‰§è¡Œç®¡é“å†™å…¥    char line[NUM];    while(true)    &#123;        printf(&quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;);        fflush(stdout);        memset(line, 0, sizeof(line));        //fgetsçš„ç»“å°¾ä¼šè‡ªåŠ¨æ·»åŠ \\0        if(fgets(line, sizeof(line), stdin) != nullptr)        &#123;            //è¿™é‡Œçš„æ„ä¹‰æ˜¯å»æ‰æ¥æ”¶åˆ°çš„å›è½¦\\n            //å¦‚ï¼šabcde\\n\\0 é€šè¿‡ä¸‹é¢çš„ä»£ç å»æ‰\\n            line[strlen(line) - 1] = &#x27;\\0&#x27;;            write(pipeFd, line, strlen(line));//ç®¡é“å†™å…¥        &#125;        else        &#123;            break;        &#125;    &#125;    close(pipeFd);    cout &lt;&lt; &quot;å®¢æˆ·ç«¯é€€å‡º&quot; &lt;&lt; endl;    return 0;&#125;\n\né€šè¿‡å¤´æ–‡ä»¶ä¸­çš„æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬èƒ½ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¤„äºåŒä¸€ä¸ªå·¥ä½œç›®å½•ä¸‹ï¼Œä»¥ä¾¿ä»–ä»¬æ­£ç¡®æ‰“å¼€åŒä¸€ä¸ªç®¡é“æ–‡ä»¶\nå…ˆè¿è¡Œserverï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰å‡ºç°æœåŠ¡å™¨å¯åŠ¨çš„æ‰“å°\n\nå®¢æˆ·ç«¯å¯åŠ¨äº†ä¹‹åï¼ŒæœåŠ¡å™¨ç«¯æ‰æ‰“å°å‡ºæœåŠ¡å™¨å¯åŠ¨\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®¢æˆ·ç«¯è¾“å…¥æ¶ˆæ¯ï¼Œè½¬åˆ°æœåŠ¡ç«¯è¯»å–\n\nè¿™å°±å®Œæˆäº†ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚è¿™ä¸¤ä¸ªè¿›è¡Œå¹¶éçˆ¶å­è¿›ç¨‹ï¼Œä¹Ÿä¸æ˜¯å…„å¼Ÿå…³ç³»ï¼\nå®¢æˆ·ç«¯CTRL+Cç»ˆæ­¢çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šé€€å‡ºï¼\n\nç­‰å¾…å‰é¢æåˆ°äº†ï¼Œå½“å®¢æˆ·ç«¯æ²¡æœ‰å¯åŠ¨çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯çš„æ‰“å°æ²¡æœ‰è¢«æ‰§è¡Œ\nè¿›ä¸€æ­¥æµ‹è¯•å‘ç°ï¼Œå½“æˆ‘ä»¬åŒæ—¶ç”¨å†™æ–¹å¼æ‰“å¼€ç®¡é“æ–‡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½ä¼šåœ¨openä¸­ç­‰å¾…ï¼Œè€Œä¸æ‰§è¡Œcout\n\n23776 31027 31027 23776 pts/23   31027 S+    1001   0:00 ./server23952 31043 31043 23952 pts/24   31043 S+    1001   0:00 ./client\n\nè¿™è¯´æ˜ï¼Œç®¡é“æ–‡ä»¶å¿…é¡»è¦åŒæ—¶ä»¥è¯»å†™æ–¹å¼æ‰“å¼€ï¼Œæ‰èƒ½æ­£å¸¸æ‰§è¡Œåç»­ä»£ç ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹ä»¥å†™æ–¹å¼æ‰“å¼€äº†ä¸€ä¸ªç®¡é“ï¼Œè€Œè¯¥ç®¡é“æ²¡æœ‰è¯»ç«¯ï¼ˆåè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ï¼Œè¯¥è¿›ç¨‹å°±ä¼šè¿›è¡Œé˜»å¡ç­‰å¾…\n\n4.ç®¡é“çš„ç‰¹æ€§\nå•ä¸ªç®¡é“åªæ”¯æŒå•å‘é€šä¿¡ï¼Œè¿™æ˜¯å†…æ ¸å®ç°å†³å®šçš„ã€‚åŠåŒå·¥çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ\nç®¡é“è‡ªå¸¦åŒæ­¥æœºåˆ¶ï¼Œèƒ½å¤Ÿåˆ¤æ–­ç®¡é“çš„çŠ¶æ€ï¼Œæ˜¯å¦å†™æ»¡ï¼Œæ˜¯å¦æ²¡æœ‰å†™å…¥ç­‰ç­‰\nç®¡é“æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œå…ˆå†™çš„å­—ç¬¦ä¸€å®šæ˜¯å…ˆè¢«è¯»å–çš„ï¼Œåœ¨2.3ä¸­æœ‰æ‰€ä½“ç°ã€‚éœ€è¦ç”¨æˆ·æ¥å®šä¹‰åŒºåˆ†å†…å®¹çš„è¾¹ç•Œï¼ˆæ¯”å¦‚ç½‘ç»œtcpåè®®ï¼‰\nç®¡é“æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç®¡é“çš„ç”Ÿå‘½å‘¨æœŸè·Ÿéšè¿›ç¨‹\n\n4.1 ä»€ä¹ˆæ˜¯åŠåŒå·¥ï¼ŸåŠåŒå·¥æ•°æ®ä¼ è¾“å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åˆ‡æ¢æ–¹å‘çš„å•å·¥é€šä¿¡ï¼›\nç®¡é“å°±æ˜¯ä¸€ç§åŠåŒå·¥çš„ç‰¹æ®Šæƒ…å†µï¼Œå› ä¸ºç®¡é“æœ¬èº«æ˜¯æ”¯æŒä»»æ„è¿›ç¨‹è¯»å†™çš„ã€‚å¯¹äºè¿›ç¨‹Aï¼Œå®ƒæ—¢å¯ä»¥æˆä¸ºç®¡é“çš„è¯»ç«¯ï¼Œåˆå¯ä»¥æˆä¸ºç®¡é“çš„å†™ç«¯ã€‚ä½†ä¸€æ—¦ç¡®è®¤ä¹‹åï¼Œç®¡é“çš„è¯»å†™æ–¹å‘å°±ä¸èƒ½è¢«æ”¹å˜ã€‚\næ‰€ä»¥ç®¡é“æ˜¯å±äºåŠåŒå·¥çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ\n4.2 æ‹“å±•ï¼šå•å·¥&#x2F;åŠåŒå·¥&#x2F;åŒå·¥å‚è€ƒèµ„æ–™æ¥æºï¼šåšå®¢å›­\n\nå•å·¥æ•°æ®ä¼ è¾“åªæ”¯æŒæ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼›\nåŠåŒå·¥æ•°æ®ä¼ è¾“å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åˆ‡æ¢æ–¹å‘çš„å•å·¥é€šä¿¡ï¼›\nå…¨åŒå·¥æ•°æ®é€šä¿¡å…è®¸æ•°æ®åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå› æ­¤ï¼Œå…¨åŒå·¥é€šä¿¡æ˜¯ä¸¤ä¸ªå•å·¥é€šä¿¡æ–¹å¼çš„ç»“åˆï¼Œå®ƒè¦æ±‚å‘é€è®¾å¤‡å’Œæ¥æ”¶è®¾å¤‡éƒ½æœ‰ç‹¬ç«‹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›ã€‚\n\nç»“è¯­é˜¿å·´é˜¿å·´ï¼Œå…³äºç®¡é“çš„å†…å®¹åˆ°è¿™é‡Œå°±åŸºæœ¬overäº†ï¼Œæˆ‘ä»¬é€šè¿‡åŒ¿åç®¡é“å®ç°äº†æ§åˆ¶å¤šä¸ªå­è¿›ç¨‹ã€‚é€šè¿‡å‘½åç®¡é“å®ç°äº†ä¸¤ä¸ªä¸ç›¸å¹²è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡\n\nä¸‹ç¯‡åšå®¢æ˜¯å…³äºå…±äº«å†…å­˜çš„\n\nå¦‚æœæœ‰å•¥é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | å…±äº«å†…å­˜ | ä¿¡å·é‡","url":"/2022/11/13/note_Linux/17%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98_%E4%BF%A1%E5%8F%B7%E9%87%8F/","content":"ä¸Šç¯‡Linuxçš„åšå®¢æ˜¯æœ‰å…³ç®¡é“çš„ï¼Œä»Šæ—¥å°±è®©æˆ‘ä»¬ç»§ç»­åº·åº·è¿›ç¨‹é—´é€šä¿¡çš„å¦å¤–ä¸€ç§æ–¹æ³•ï¼šå…±äº«å†…å­˜\n\n\nå®Œæ•´ä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“ ğŸ‘‡\n\nhttps://gitee.com/musnow/raspberry-practice/tree/master/code/22-11-12_systemV\n\n[TOC]\n1.å•¥æ˜¯å…±äº«å†…å­˜ï¼Ÿè¿›ç¨‹é—´é€šä¿¡çš„åŸºæœ¬æ–¹å¼ï¼Œå°±æ˜¯è®©ä¸¤ä¸ªè¿›ç¨‹çœ‹åˆ°åŒä¸€ä»½èµ„æºã€‚\nå…±äº«å†…å­˜çš„æ–¹å¼ï¼Œé€šè¿‡ç³»ç»Ÿæ¥å£å¼€è¾Ÿä¸€æ®µå†…å­˜ï¼Œå†è®©å¤šä¸ªè¿›ç¨‹å»è®¿é—®è¿™å—å†…å­˜ï¼Œå°±èƒ½åŒæ—¶çœ‹åˆ°ä¸€ä»½èµ„æºã€‚\n\nè¿™é‡Œè´´å‡ºä¹‹å‰åŠ¨æ€åº“åšå®¢ä¸­çš„å›¾ï¼Œå…±äº«å†…å­˜çš„æ–¹å¼å’Œè¯¥å›¾å±•ç¤ºçš„æ–¹å¼ç±»ä¼¼ã€‚è¿›ç¨‹éœ€è¦è°ƒç”¨ç³»ç»Ÿæ¥å£ï¼Œå°†å·²ç»å¼€è¾Ÿå¥½çš„å…±äº«å†…å­˜æ˜ å°„åˆ°è‡ªå·±çš„é¡µè¡¨ä¸­ï¼Œä»¥å®ç°è®¿é—®ã€‚\nè¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼š\n\næ“ä½œç³»ç»Ÿçš„æ¥å£æ€ä¹ˆçŸ¥é“è¿›ç¨‹è¦çš„æ˜¯é‚£ä¸€å—å…±äº«å†…å­˜ï¼Ÿå³å…±äº«å†…å­˜æ˜¯æ€ä¹ˆæ ‡è¯†çš„ï¼Ÿ\n\nè¦çŸ¥é“ï¼Œä¹‹å‰æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶ã€å¼€è¾Ÿç®¡é“ç­‰ç­‰ï¼Œéƒ½æ˜¯å…·æœ‰å”¯ä¸€çš„æ–‡ä»¶è·¯å¾„æ¥æ ‡è¯†æ–‡ä»¶çš„ã€‚å¦‚æœæŒ‰ä»¥å‰çš„æƒ³æ³•ï¼šæ‰“å¼€æ–‡ä»¶-&gt;ç³»ç»Ÿè¿”å›æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå…±äº«å†…å­˜åˆ™åº”è¯¥æ˜¯å¼€è¾Ÿå…±äº«å†…å­˜-&gt;ç³»ç»Ÿè¿”å›å…±äº«å†…å­˜çš„ç¼–å·\n\nè¿™å°±å‡ºç°äº†é—®é¢˜ï¼\n\nå‡è®¾è¿›ç¨‹Aå¼€è¾Ÿäº†ä¸€æ®µå…±äº«å†…å­˜ï¼Œç³»ç»Ÿè¿”å›äº†ç¼–å·123ï¼Œé‚£ä¹ˆè¿›ç¨‹Aè¦æ€ä¹ˆè®©å…¶ä»–æƒ³ä½¿ç”¨è¿™å—å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡çš„è¿›ç¨‹ï¼ŒçŸ¥é“å®ƒå¼€è¾Ÿçš„å…±äº«å†…å­˜ç¼–å·æ˜¯123å‘¢ï¼Ÿæ€»ä¸èƒ½å¼€ä¸ªç®¡é“å‘Šè¯‰å®ƒå§ï¼Ÿé‚£å²‚ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ğŸ˜‚\n\næ‰€ä»¥ï¼Œå…±äº«å†…å­˜çš„ç¼–å·å…¶å®å’Œå‘½åç®¡é“ä¸€æ ·ï¼Œæ˜¯ç”±ç”¨æˆ·æ‰‹åŠ¨åœ¨ä»£ç ä¸­æŒ‡å®šçš„ã€‚åªè¦è¿›ç¨‹ä½¿ç”¨è¿™ä¸ªç¼–å·å»è·å–å…±äº«å†…å­˜ï¼Œä»–ä»¬å°±èƒ½è·å–åˆ°åŒä¸€ä»½ï¼\n\n2.ç›¸å…³æ¥å£è¯´å®Œäº†åŸºæœ¬æ¦‚å¿µï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥åº·åº·å®ƒçš„ä½¿ç”¨\n2.1 ftokftok - convert a pathname and a project identifier to a System V IPC key\n#include &lt;sys/types.h&gt;#include &lt;sys/ipc.h&gt;key_t ftok(const char *pathname, int proj_id);\n\nå‰é¢æåˆ°äº†ï¼Œå…±äº«å†…å­˜çš„keyæ˜¯æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„ã€‚Linuxç³»ç»Ÿç»™å®šäº†ftokæ¥å£ï¼Œå°†ç”¨æˆ·æä¾›çš„pathnameå·¥ä½œè·¯å¾„ï¼Œä»¥åŠproj_idé¡¹ç›®ç¼–å·è½¬æ¢ä¸ºä¸€ä¸ªå…±äº«å†…å­˜çš„keyï¼ˆå…¶å®å°±æ˜¯intç±»å‹ï¼‰\n\nåªè¦æˆ‘ä»¬çš„å·¥ä½œè·¯å¾„å’Œé¡¹ç›®ç¼–å·ä¼ çš„æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå®ƒè¿”å›çš„keyå°±æ˜¯ä¸€æ ·çš„ï¼\n2.2 shmgetshmget - allocates a System V shared memory segment\n#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;int shmget(key_t key, size_t size, int shmflg);\nå‚æ•°åˆ†åˆ«ä¸ºkeyå€¼ï¼Œå…±äº«å†…å­˜çš„å¤§å°ï¼Œä»¥åŠåˆ›å»ºå…±äº«å†…å­˜çš„æ–¹å¼ã€‚\nkeyå€¼éœ€è¦é€šè¿‡ ftokå‡½æ•°è·å–ï¼›\nå…¶ä¸­å…±äº«å†…å­˜çš„å¤§å°æœ€å¥½è®¾ç½®ä¸º4kbçš„æ•´æ•°å€ï¼Œå› ä¸ºæ“ä½œç³»ç»ŸIOçš„åŸºæœ¬å•ä½æ˜¯4KBã€‚å¦‚æœä½ ç”³è¯·äº†ä¸æ˜¯4çš„æ•´æ•°å€çš„å­—èŠ‚ï¼Œæ¯”å¦‚15ä¸ªå­—èŠ‚ï¼Œå…¶è¿˜æ˜¯ä¼šç”³è¯·16ä¸ªå­—èŠ‚(4ä¸ªé¡µ)äº¤ç»™ä½ ï¼Œè€Œå…¶ä¸­æœ‰1kbçš„å†…å­˜ä½ æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå³é€ æˆäº†å†…å­˜æµªè´¹ğŸ˜¥\nåˆ›å»ºå…±äº«å†…å­˜çš„shmflg:\n\nIPC_CREATï¼šåˆ›å»ºå…±äº«å†…å­˜ã€‚å¦‚æœå­˜åœ¨åˆ™è·å–ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºåè·å–\nIPC_EXCLï¼šå¿…é¡»é…åˆIPC_CREATä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨æŒ‡å®šçš„å…±äº«å†…å­˜ï¼Œå°±è¿›è¡Œåˆ›å»ºï¼›å¦‚æœè¯¥å…±äº«å†…å­˜å­˜åœ¨ï¼Œåˆ™å‡ºé”™è¿”å›ï¼ˆå³ä¿è¯è·å–åˆ°çš„å…±äº«å†…å­˜ä¸€å®šæ˜¯å½“å‰è¿›ç¨‹åˆ›å»ºçš„ï¼Œæ˜¯ä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜ï¼‰\n\nè¿”å›å€¼æ˜¯ä¸€ä¸ªå…±äº«å†…å­˜çš„æ ‡è¯†ç¬¦\nRETURN VALUE       On success, a valid shared memory identifier is returned.  On errir, -1 is returned, and errno is set to indicate the error.\n\nè¿™äº›å·¥ä½œéƒ½æ˜¯æ“ä½œç³»ç»Ÿåšçš„ã€‚å…¶å†…æ ¸ä¸­æœ‰ä¸“é—¨çš„ç®¡ç†å•å…ƒæ¥åˆ¤æ–­ä¸€ä¸ªå…±äº«å†…å­˜æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠä½•æ—¶è¢«åˆ›å»ºã€è¢«ä½¿ç”¨ã€è¢«ä»€ä¹ˆè¿›ç¨‹ç»‘å®šç­‰ç­‰â€¦\nå‘½ä»¤è¡Œé”®å…¥man shmctlï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…æ ¸ç»“æ„\nstruct shmid_ds &#123;    struct ipc_perm shm_perm;    /* Ownership and permissions */    size_t          shm_segsz;   /* Size of segment (bytes) */    time_t          shm_atime;   /* Last attach time */    time_t          shm_dtime;   /* Last detach time */    time_t          shm_ctime;   /* Last change time */    pid_t           shm_cpid;    /* PID of creator */    pid_t           shm_lpid;    /* PID of last shmat(2)/shmdt(2) */    shmatt_t        shm_nattch;  /* No. of current attaches */    ...&#125;;struct ipc_perm &#123;    key_t          __key;    /* Key supplied to shmget(2) */    uid_t          uid;      /* Effective UID of owner */    gid_t          gid;      /* Effective GID of owner */    uid_t          cuid;     /* Effective UID of creator */    gid_t          cgid;     /* Effective GID of creator */    unsigned short mode;     /* Permissions + SHM_DEST and                                           SHM_LOCKED flags */    unsigned short __seq;    /* Sequence number */&#125;;\n\nå…±äº«å†…å­˜è¦è¢«ç®¡ç†ï¼Œå…¶å†…æ ¸ç»“æ„ä¸­ä¸€å®šæœ‰ä¸€ä¸ªå”¯ä¸€çš„keyå€¼æ¥æ ‡è¯†è¯¥å…±äº«å†…å­˜ï¼Œå³å’Œæ–‡ä»¶çš„inodeä¸€æ ·\nkey_t     __key; //å…±äº«å†…å­˜çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”±ç”¨æˆ·åœ¨shmgetä¸­æä¾›\n\nå…³äºkeyä¸ºä½•è¦è®©ç”¨æˆ·æä¾›ï¼Œå·²ç»åœ¨ä¸Šé¢åšå‡ºè¿‡è§£é‡ŠğŸ‘‰ å›é¡¾ä¸€ä¸‹\n\n2.3 shmat&#x2F;shmdtatå…¶å®æ˜¯attachç»‘å®šçš„ç¼©å†™ï¼Œè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå…±äº«å†…å­˜å’Œæˆ‘ä»¬å½“å‰çš„è¿›ç¨‹ç»‘å®šã€‚\nå…¶å®å°±æ˜¯å°†è¿™ä¸ªå…±äº«å†…å­˜æ˜ å°„åˆ°è¿›ç¨‹çš„é¡µè¡¨ä¸­ï¼ˆå †æ ˆä¹‹é—´ï¼‰\nshmat, shmdt - System V shared memory operations\n#include &lt;sys/types.h&gt;#include &lt;sys/shm.h&gt;void *shmat(int shmid, const void *shmaddr, int shmflg);int shmdt(const void *shmaddr);\n\nä¸€å…±æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºatå’Œdtï¼Œç”¨äºç»‘å®š&#x2F;è§£ç»‘å…±äº«å†…å­˜\nshmatçš„ä¸‰ä¸ªå‚æ•°å¦‚ä¸‹\n\nshmidï¼šä¸ºshmgetçš„è¿”å›å€¼\nshmaddrï¼šæŒ‡å®šå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ã€‚é€šå¸¸ä¸ºç©ºï¼Œè¡¨ç¤ºè®©ç³»ç»Ÿæ¥é€‰æ‹©å…±äº«å†…å­˜çš„åœ°å€ã€‚\nshmflgï¼šå¦‚æœæŒ‡å®šäº†SHM_RDONLYä½ï¼Œåˆ™ä»¥åªè¯»æ–¹å¼è¿æ¥æ­¤æ®µï¼›å¦åˆ™ä»¥è¯»å†™çš„æ–¹å¼è¿æ¥æ­¤æ®µï¼›é€šå¸¸è®¾ç½®ä¸º0\n\nè°ƒç”¨æˆåŠŸçš„æ—¶å€™ï¼Œè¿”å›æŒ‡å‘å…±äº«å†…å­˜ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼›å‡ºé”™è¿”å›-1\n\nshmdtçš„å‚æ•°ä¸ºshmatæ­£ç¡®è°ƒç”¨æ—¶çš„è¿”å›å€¼\n\nä»¥ä¸‹æ˜¯manæ‰‹å†Œä¸­å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿”å›å€¼çš„æè¿°ğŸ‘‡\nRETURN VALUE       On success shmat() returns the address of the attached shared memory segment; on error (void *) -1 is returned, and errno is set  to       indicate the cause of the error.       On success shmdt() returns 0; on error -1 is returned, and errno is set to indicate the cause of the error.\n\n2.4 shmctlè¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨äºæ“ä½œæˆ‘ä»¬çš„å…±äº«å†…å­˜\n#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;int shmctl(int shmid, int cmd, struct shmid_ds *buf);\n\nå…¶ä¸­cmdçš„å‚æ•°æœ‰ä¸‹é¢å‡ ç§\n\nIPC_RMID  åˆ é™¤è¯¥å…±äº«å†…å­˜\n\nIPC_STAT  æŠŠshmid_dsç»“æ„ä¸­çš„æ•°æ®è®¾ç½®ä¸ºå…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼ï¼Œå³ç”¨å…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼è¦†ç›–shmid_dsçš„å€¼\n\nIPC_SET å¦‚æœè¿›ç¨‹æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œå°±æŠŠå…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼è®¾ç½®ä¸ºshmid_dsç»“æ„ä¸­ç»™å‡ºçš„å€¼\n\n\næœ€åä¸€ä¸ªbufå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡å‘shmid_dsç»“æ„çš„æŒ‡é’ˆï¼Œä¸€èˆ¬è®¾ä¸ºNULL\nThe buf argument is a pointer to a shmid_ds structure\n\nshmid_dsçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹\nstruct shmid_ds&#123;    uid_t shm_perm.uid;    uid_t shm_perm.gid;    mode_t shm_perm.mode;&#125;;\n\nä»¥åˆ é™¤ä¸ºä¾‹ï¼Œå…¶æ“ä½œå¦‚ä¸‹\nshmctl(shmid, IPC_RMID, NULL);//åˆ é™¤shmidçš„å…±äº«å†…å­˜\n\n2.5 ipcså‘½ä»¤å…ˆæ¥åº·åº·å‡ ä¸ªipcså‘½ä»¤çš„é€‰é¡¹ï¼Œå…¶ä¸­æˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯-mæŸ¥çœ‹å…±äº«å†…å­˜\nipcs -c #æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—/å…±äº«å†…å­˜/ä¿¡å·é‡ipcs -s #å•ç‹¬æŸ¥çœ‹ä¿¡å·é‡ipcs -q #å•ç‹¬æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—ipcs -m #å•ç‹¬æŸ¥çœ‹å…±äº«å†…å­˜\n\næ‰§è¡Œäº†ä¹‹åï¼Œä¼šåˆ—å‡ºå½“å‰æ“ä½œç³»ç»Ÿä¸­å¼€è¾Ÿçš„å…±äº«å†…å­˜ï¼Œä»¥åŠå®ƒä»¬çš„åŸºæœ¬ä¿¡æ¯\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m ------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 1          muxue      0          1024       0    \n\nè¿™é‡Œçš„keyå’Œæˆ‘ä»¬ä½¿ç”¨ftokè·å–åˆ°çš„keyå€¼æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬æ‰“å°çš„æ—¶å€™æ˜¯åè¿›åˆ¶ï¼Œæ“ä½œç³»ç»Ÿåˆ—å‡ºæ¥çš„ä¸ºåå…­è¿›åˆ¶\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ipcrm -m å…±äº«å†…å­˜çš„shmidæ¥åˆ é™¤å…±äº«å†…å­˜\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 1          muxue      0          1024       0                       [muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcrm -m 1[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       \n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å…±äº«å†…å­˜å·²ç»è¢«åˆ é™¤äº†\n\næ¶ˆæ¯é˜Ÿåˆ—&#x2F;ä¿¡å·é‡çš„æ¥å£æ¶ˆæ¯é˜Ÿåˆ—å’Œä¿¡å·é‡çš„æ¥å£å’Œå…±äº«å†…å­˜å¾ˆç›¸ä¼¼\næ¶ˆæ¯é˜Ÿåˆ—ç”¨çš„ä¸å¤šï¼Œä¿¡å·é‡çš„éš¾åº¦å¾ˆé«˜ï¼ğŸ˜‚\n//æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³æ¥å£msgget //è·å–msgctl //æ“ä½œmsgsnd //å‘é€ä¿¡æ¯msgrcv //ä¿¡å·é‡semgetsemctlsemop\n\nipcrmè¿™ä¸ªå‘½ä»¤å¯ä»¥ç”¨ä¸åˆ é™¤ipcèµ„æºï¼ŒåŒ…æ‹¬å…±äº«å†…å­˜\nipcrm -m shmid #åˆ é™¤å…±äº«å†…å­˜\n\nä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•ç”¨è¯¥å‘½ä»¤åˆ é™¤ä¸€ä¸ªæ­£åœ¨è¢«ä½¿ç”¨çš„å…±äº«å†…å­˜æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šè¢«ç«‹å³åˆ é™¤ï¼ˆç«‹å³åˆ é™¤ä¼šå½±å“è¿›ç¨‹è¿è¡Œï¼‰\næ­¤æ—¶æ‰§è¡Œåˆ é™¤ï¼Œåœ¨å…±äº«å†…å­˜çš„statusåˆ—ä¼šå‡ºç°destï¼›è§‚å¯Ÿç»“æœï¼Œå½“è¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªå…±äº«å†…å­˜ä¼šè¢«ç›´æ¥åˆ é™¤ï¼ˆè¿›ç¨‹å†…éƒ¨å¹¶æ²¡æœ‰è°ƒç”¨shmctlæ¥å£ï¼‰\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 21         muxue      666        1024       2                       [muxue@bt-7274:~/git]$ ipcrm -m 21[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x00000000 21         muxue      666        1024       2          dest         [muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                 \n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä¸æ‰§è¡Œipcrmå‘½ä»¤+è¿›ç¨‹å†…éƒ¨ä¸è°ƒç”¨shmctlæ¥å£ï¼Œè¿™ä¸ªå…±äº«å†…å­˜å°±ä¼šä¸€ç›´å­˜åœ¨\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 22         muxue      666        1024       0                       \n\nç»“è®ºï¼šä½¿ç”¨ipcrm -må‘½ä»¤åˆ é™¤å…±äº«å†…å­˜ä¹‹åï¼Œå…¶å…±äº«å†…å­˜ä¸ä¸€å®šä¼šç«‹å³é‡Šæ”¾ã€‚å¦‚æœæœ‰è¿›ç¨‹å…³è”äº†è¯¥å…±äº«å†…å­˜ï¼Œåˆ™ä¼šåœ¨è¿›ç¨‹å»å…³è”ä¹‹åé‡Šæ”¾\n3.ä½¿ç”¨3.1 åˆ›å»ºå¹¶è·å–//å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šï¼Œä¸ºäº†åšå®¢ç¯‡å¹…ï¼Œè¿™é‡Œçœç•¥äº†#define NUM 1024#define PROJ_ID 0x20#define PATH_NAME &quot;/home/muxue/git/linux/code/22-11-12_systemV&quot;key_t CreateKey()&#123;    key_t key = ftok(PATH_NAME, PROJ_ID);    if(key &lt; 0)    &#123;        cerr &lt;&lt;&quot;ftok: &quot;&lt;&lt; strerror(errno) &lt;&lt; endl;        exit(1);//keyè·å–é”™è¯¯ç›´æ¥é€€å‡ºç¨‹åº    &#125;    return key;&#125;int main()&#123;    key_t key = CreateKey();    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    return 0;&#125;\n\nFile existsè¿™é‡Œä¼šå‘ç°ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œç¨‹åºæˆåŠŸè·å–äº†å…±äº«å†…å­˜ï¼›ä½†æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå´æŠ¥é”™è¯´File exists(æ–‡ä»¶å­˜åœ¨)\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget: 1[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget err: File exists\n\nè¿™æ˜¯å› ä¸ºå…±äº«å†…å­˜çš„å£°æ˜å‘¨æœŸæ˜¯éšå†…æ ¸çš„ã€‚å³åªè¦è¿™ä¸ªå…±äº«å†…å­˜ä¸è¢«åˆ é™¤ï¼Œä»–å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°å†…æ ¸å› ä¸ºæŸç§åŸå› é‡Šæ”¾æ‰å®ƒï¼Œäº¦æˆ–è€…æ“ä½œç³»ç»Ÿå…³æœº\né€šè¿‡ä¸Šé¢æåˆ°çš„ipcrm -m shmid å‘½ä»¤åˆ é™¤å…±äº«å†…å­˜ï¼Œæ‰èƒ½é‡æ–°è¿è¡Œä»£ç è·å–æ–°çš„å…±äº«å†…å­˜\n\nä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥åœ¨è¿›ç¨‹ç»“æŸåä½¿ç”¨shmctlæ¥å£åˆ é™¤å…±äº«å†…å­˜\n\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget success: 2[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 2          muxue      0          1024       0                       \n\nè®¾ç½®æƒé™å€¼é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å…±äº«å†…å­˜çš„permsæ˜¯0ï¼Œä»£è¡¨æ²¡æœ‰ç”¨æˆ·èƒ½è®¿é—®è¿™ä¸ªå…±äº«å†…å­˜ã€‚æ‰€ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨flagé‡Œé¢ç›´æ¥æˆ–ä¸Šè¿™ä¸ªå…±äº«å†…å­˜çš„æƒé™å€¼       \nä»£ç å¦‚ä¸‹ğŸ‘‡\nint main()&#123;    key_t key = CreateKey();    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(5);    shmctl(id,IPC_RMID,nullptr);    return 0;&#125;\n\nè¿™æ—¶å€™åˆ›å»ºçš„å…±äº«å†…å­˜å°±æœ‰æ­£ç¡®çš„æƒé™å€¼äº†\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 4          muxue      666        1024       0    \n\n3.2 æŒ‚æ¥&#x2F;å–æ¶ˆæŒ‚æ¥//å…³è”å…±äº«å†…å­˜char *str = (char*)shmat(id, nullptr, 0);\n\nå› ä¸ºshmatå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªvoid*æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä½¿ç”¨mallocä¸€æ ·çš„æ–¹å¼ä½¿æ¥æŒ‚æ¥å…±äº«å†…å­˜ã€‚éšåå¯¹è¿™ä¸ªå†…å­˜çš„æ“ä½œå°±æ˜¯æ­£å¸¸çš„æŒ‡é’ˆæ“ä½œäº†ï¼\nåŒæ ·çš„ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹Ÿéœ€è¦ç”¨åŒæ ·çš„æ–¹å¼æŒ‚æ¥å…±äº«å†…å­˜ï¼Œæ‰èƒ½è¯»å–åˆ°ç›¸åŒçš„æ•°æ®\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 4          muxue      666        1024       1   \n\næŒ‚æ¥æˆåŠŸåï¼Œå¯ä»¥å‘ç°nattchçš„å€¼ä»0å˜ä¸º1\nå–æ¶ˆ&#x2F;åˆ é™¤å–æ¶ˆæŒ‚æ¥çš„æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥æŠŠshmatçš„è¿”å›å€¼ä¼ å…¥å³å¯\nshmdt(str);//å–æ¶ˆæŒ‚æ¥\n\nå¦‚æœæ˜¯æœåŠ¡ç«¯ï¼Œåˆ™è¿˜éœ€è¦åœ¨å–æ¶ˆæŒ‚æ¥ä¹‹åï¼Œåˆ é™¤å…±äº«å†…å­˜ã€‚é¿å…ä¸‹æ¬¡ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ— æ³•é€šè¿‡keyè·å–åˆ°æ–°çš„å…±äº«å†…å­˜\nshmctl(id,IPC_RMID,nullptr);//åˆ é™¤å…±äº«å†…å­˜\n\n3.3 å†™å…¥å†…å®¹å› ä¸ºå…±äº«å†…å­˜æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå†…å­˜ï¼Œå…¶å’Œmallocå‡ºæ¥çš„å†…å­˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥ä½¿ç”¨å³å¯\nè¿™é‡Œè¿˜æ˜¯ç”¨ä¸€ä¸ªæœåŠ¡ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¿›è¡Œæ¼”ç¤º\n//server.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //åˆ›å»ºå…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[server] shmat success\\n&quot;);    //è¯»å–æ•°æ®ï¼Œsleep(1)    int i=0;    while(i&lt;=40)    &#123;        printf(&quot;[%03d] %s\\n&quot;,i,str);        i++;        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[server] shmdt(str)\\n&quot;);    //åˆ é™¤å…±äº«å†…å­˜    shmctl(id,IPC_RMID,nullptr);    printf(&quot;[server] exit\\n&quot;);    return 0;&#125;//client.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //è·å–å…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[client] shmat success\\n&quot;);    //å†™å…¥æ•°æ®    int i=0;    while(i&lt;26)    &#123;        char base = &#x27;A&#x27;;        str[i] = base+i;        str[i+1] = &#x27;\\0&#x27;;        printf(&quot;write times: %02d\\n&quot;,i);        i++;        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[client] shmdt &amp; exit\\n&quot;);    return 0;&#125;\n\nè·‘èµ·æ¥ä¹‹åï¼Œå®¢æˆ·ç«¯å‘å…±äº«å†…å­˜ä¸­å†™å…¥æ•°æ®ï¼ˆæ³¨æ„æ§åˆ¶\\0ï¼‰æœåŠ¡ç«¯è¿›è¡Œè¯»å–ã€‚è¿™ä¾¿å®ç°äº†æˆ‘ä»¬è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡\n\nä¸è¿‡æˆ‘ä»¬å‘ç°ï¼Œå®¢æˆ·ç«¯å·²ç»åœæ­¢å†™å…¥ä¹‹åï¼ŒæœåŠ¡ç«¯è¿˜æ˜¯åœ¨ä¸åœçš„è¯»å–ã€‚å¦‚æœæˆ‘ä»¬ä¸æ§åˆ¶whileå¾ªç¯çš„è¯ï¼Œå…¶ä¼šä¸€ç›´è¿™ä¹ˆè¯»å–ä¸‹å»\n\nè¿™ä¾¿ç‰µæ‰¯å‡ºå…±äº«å†…å­˜çš„ä¸€ä¸ªç‰¹æ€§äº†\nå…±äº«å†…å­˜æ²¡æœ‰è®¿é—®æ§åˆ¶åœ¨ç®¡é“çš„åšå®¢ä¸­æåˆ°ï¼Œç®¡é“æ˜¯æœ‰è®¿é—®æ§åˆ¶çš„è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼Œå†™ç«¯æ²¡æœ‰å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œè¯»ç«¯ä¼šåœ¨readä¸­è¿›è¡Œç­‰å¾…\nè€Œå…±äº«å†…å­˜å› ä¸ºæˆ‘ä»¬æ˜¯ç›´æ¥åƒæ“ä½œä¸€ä¸ªmallocå‡ºæ¥çš„ç©ºé—´ä¸€æ ·è®¿é—®ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•ç³»ç»Ÿæ¥å£ï¼ˆç›¸æ¯”ä¹‹ä¸‹ç®¡é“éœ€è¦ä½¿ç”¨read/writeï¼‰æ‰€ä»¥æ“ä½œç³»ç»Ÿæ²¡æœ‰åŠæ³•å¸®æˆ‘ä»¬è¿›è¡Œè®¿é—®æ§åˆ¶\nä¹Ÿæ­£æ˜¯å› ä¸ºæ²¡æœ‰ç­‰å¾…ï¼Œå…±äº«å†…å­˜æ˜¯è¿›ç¨‹ä¸­é€šä¿¡ä¸­æœ€å¿«çš„ä¸€ç§æ–¹å¼\né€šè¿‡ç®¡é“è¿›è¡Œå…±äº«å†…å­˜çš„æ§åˆ¶æ—¢ç„¶å…±äº«å†…å­˜æ²¡æœ‰è®¿é—®æ§åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç®¡é“æ¥è®©æ§åˆ¶å…±äº«å†…å­˜çš„è¯»å†™\n\nå†™ç«¯å†™å®Œåï¼Œå°†å®Œæˆä¿¡å·å†™å…¥ç®¡é“ï¼Œç”±è¯»ç«¯è¯»å–\nè¯»ç«¯ä»ç®¡é“ä¸­è·å–åˆ°ä¿¡å·åï¼Œè®¿é—®å…±äº«å†…å­˜è¯»å‡ºå†…å®¹\nå¦‚æœå†™ç«¯æ²¡æœ‰å†™å¥½ï¼Œè¯»ç«¯å°±ä¼šåœ¨ç®¡é“readå†…éƒ¨ç­‰å¾…\n\nä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥ç”¨ç®¡é“é€šä¿¡å‘¢ï¼Ÿ\n\nç®¡é“ä»…ä½œè®¿é—®æ§åˆ¶ï¼Œåªéœ€è¦ä¸€ä¸ªintä¹ƒè‡³ä¸€ä¸ªcharç±»å‹å³å¯ï¼›\nç›¸æ¯”ç›´æ¥ç®¡é“é€šä¿¡ï¼Œå†…å­˜çš„æ–¹å¼æ›´å¥½æ§åˆ¶ï¼ˆæ¯•ç«Ÿä½¿ç”¨å†…å­˜çš„æ–¹å¼å’Œä½¿ç”¨æŒ‡é’ˆä¸€æ ·ï¼Œç®¡é“è¿˜éœ€è¦æ–‡ä»¶æ“ä½œï¼‰\nè¯»å–å¾ˆé•¿ä¸€ä¸²æ•°æ®çš„æ—¶å€™ï¼Œå…±äº«å†…å­˜çš„é€Ÿåº¦ä¼˜åŠ¿èƒ½ä½“ç°å‡ºæ¥\n\nä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ğŸ‘‡\n//mykey.hpp#pragma once#include &lt;iostream&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;#define NUM 1024#define PROJ_ID 0x20#define PATH_NAME &quot;/home/muxue/git/linux/code/22-11-12_systemV&quot;#define FIFO_FILE &quot;sc.pipe&quot;key_t CreateKey()&#123;    key_t key = ftok(PATH_NAME, PROJ_ID);    if(key &lt; 0)    &#123;        cerr &lt;&lt;&quot;ftok: &quot;&lt;&lt; strerror(errno) &lt;&lt; endl;        exit(1);//keyè·å–é”™è¯¯ç›´æ¥é€€å‡ºç¨‹åº    &#125;    return key;&#125;void CreateFifo()&#123;    umask(0);    if(mkfifo(FIFO_FILE, 0666) &lt; 0)    &#123;        cerr &lt;&lt; &quot;fifo: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(2);    &#125;&#125;//æ‰“å¼€ç®¡é“æ–‡ä»¶int Open(int flags)&#123;    return open(FIFO_FILE, flags);&#125;//è®©è¯»ç«¯é€šè¿‡ç®¡é“ç­‰å¾…ssize_t Wait(int fd)&#123;    char val = 0;    //å¦‚æœå†™ç«¯æ²¡æœ‰å†™å…¥ï¼Œå…¶å°±ä¼šåœ¨readä¸­ç­‰å¾…    ssize_t s = read(fd, &amp;val, sizeof(val));    return s;&#125;//å‘é€å®Œæˆä¿¡æ¯int Signal(int fd)&#123;    char sig = &#x27;g&#x27;;    write(fd, &amp;sig, sizeof(sig));&#125;//server.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //åˆ›å»ºç®¡é“    CreateFifo();    //è·å–keyå€¼    key_t key = CreateKey();    //åˆ›å»ºå…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    //è·å–ç®¡é“    int fd = Open(O_RDONLY);    cout &lt;&lt; &quot;open fifo success: &quot; &lt;&lt; fd &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[server] shmat success\\n&quot;);    //è¯»å–æ•°æ®    int i=0;    while(i&lt;=40)    &#123;        ssize_t ret = Wait(fd);//é€šè¿‡ç®¡é“ç­‰å¾…        if(ret!=0)        &#123;            printf(&quot;[%03d] %s\\n&quot;,i,str);            i++;            sleep(1);        &#125;        else        &#123;            cout&lt;&lt;&quot;[server] wait finish, break&quot; &lt;&lt; endl;            break;        &#125;    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[server] shmdt(str)\\n&quot;);    //åˆ é™¤å…±äº«å†…å­˜    shmctl(id,IPC_RMID,nullptr);    close(fd);    unlink(FIFO_FILE);    printf(&quot;[server] exit\\n&quot;);    return 0;&#125;//client.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //è·å–å…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    //è·å–ç®¡é“    int fd = Open(O_WRONLY);    cout &lt;&lt; &quot;open fifo success: &quot; &lt;&lt; fd &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[client] shmat success\\n&quot;);    //å†™å…¥æ•°æ®    int i=0;    while(i&lt;26)    &#123;        char base = &#x27;A&#x27;;        str[i] = base+i;        str[i+1] = &#x27;\\0&#x27;;        printf(&quot;write times: %02d\\n&quot;,i);        i++;        Signal(fd);        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[client] shmdt &amp; exit\\n&quot;);    close(fd);    printf(&quot;[client] close fifo\\n&quot;);    return 0;&#125;\n\nè¿è¡Œç»“æœç®¡é“æ§åˆ¶äº†ä¹‹åï¼Œå½“å®¢æˆ·ç«¯é€€å‡ºçš„æ—¶å€™ï¼Œç®¡é“ä¹Ÿä¸ä¼šç»§ç»­è¯»å–ï¼Œè€Œæ˜¯åœ¨readå†…ç­‰å¾…\n\nå¦‚æœå®¢æˆ·ç«¯æœ€åå…³é—­äº†ç®¡é“çš„å†™æ®µï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šç›´æ¥é€€å‡ºã€‚è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†é€šè¿‡ç®¡é“æ§åˆ¶å…±äº«å†…å­˜çš„è¯»å†™ğŸ‘\n\n\n4.ç›¸å…³æ¦‚å¿µ4.0 ä¸´ç•Œèµ„æºèƒ½è¢«å¤šä¸ªè¿›ç¨‹çœ‹åˆ°çš„èµ„æºï¼Œè¢«ç§°ä¸ºä¸´ç•Œèµ„æº\nå¦‚æœä¸å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œè¿›ç¨‹å¯¹è¯¥èµ„æºçš„è®¿é—®å°±æ˜¯ä¹±åºçš„ï¼ˆæ¯”å¦‚çˆ¶å­è¿›ç¨‹å‘æ˜¾ç¤ºå™¨æ‰“å°å†…å®¹ï¼‰å¯èƒ½ä¼šå› ä¸ºæ•°æ®äº¤å‰å¯¼è‡´ä¹±ç ã€æ•°æ®ä¸å¯ç”¨ç­‰æƒ…å†µ\nä»¥æ­¤å¯è§ï¼Œæ˜¾ç¤ºå™¨ã€ç®¡é“ã€å…±äº«å†…å­˜éƒ½æ˜¯ä¸´ç•Œèµ„æº\n\nç®¡é“æ˜¯æœ‰è®¿é—®æ§åˆ¶çš„ä¸´ç•Œèµ„æº\n\nè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æºçš„ä»£ç ï¼Œç§°ä¸ºä¸´ç•ŒåŒº\n\nä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä»£ç éƒ½åœ¨è®¿é—®ä¸´ç•Œèµ„æºã€‚å¦‚ç®¡é“ä¸­ï¼Œå…¶å®åªæœ‰read/writeæ¥å£åœ¨è®¿é—®ä¸´ç•Œèµ„æº\n\näº’æ–¥ï¼šä»»ä½•æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æº\nåŸå­æ€§ï¼šä¸€ä»¶äº‹æƒ…åªæœ‰åšå®Œ/æ²¡åšä¸¤ç§çŠ¶æ€ï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€\nä¸‹é¢å¯¹ä¿¡å·é‡çš„æ¦‚å¿µè¿›è¡Œè®²è§£~åªç”¨åŸºæœ¬ç†è§£å³å¯\n4.1 ä¿¡å·é‡ä¿¡å·é‡æ˜¯å¯¹ä¸´ç•Œèµ„æºçš„æ§åˆ¶æ–¹å¼ä¹‹ä¸€ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªè®¡æ•°å™¨\n\nä¿¡å·é‡ä¿è¯ä¸ä¼šæœ‰å¤šä½™çš„è¿›ç¨‹è¿æ¥åˆ°è¿™ä»½ä¸´ç•Œèµ„æº\nè¿˜éœ€è¦ä¿è¯æ¯ä¸€ä¸ªè¿›ç¨‹çš„èƒ½å¤Ÿè®¿é—®åˆ°ä¸´ç•Œèµ„æºçš„ä¸åŒä½ç½®ï¼ˆæ ¹æ®ä¸Šå±‚ä¸šåŠ¡å†³å®šï¼‰\n\nä¿¡å·é‡æ ¹æ®æƒ…å†µçš„ä¸åŒåˆ†ä¸ºä¸¤ç§ï¼š\n\näºŒå…ƒä¿¡å·é‡ï¼ˆäº’æ–¥çŠ¶æ€ï¼Œå½“è¿›ç¨‹ä½¿ç”¨çš„æ—¶å€™ä¸º1ï¼Œæ²¡æœ‰è¿›ç¨‹ä½¿ç”¨çš„æ—¶å€™ä¸º0ï¼‰\nå¤šå…ƒä¿¡å·é‡ï¼ˆå¸¸è§„ï¼‰\n\nå¦‚æœä¸€ä¸ªè¿›ç¨‹æƒ³è®¿é—®ç”±ä¿¡å·é‡æ§åˆ¶çš„ä¸´ç•Œèµ„æºï¼Œå¿…é¡»å…ˆç”³è¯·ä¿¡å·é‡ã€‚ç”³è¯·æˆåŠŸï¼Œå°±ä¸€å®šèƒ½è®¿é—®åˆ°è¿™ä¸ªä¸´ç•Œèµ„æºä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ–è€…å…¨éƒ¨ï¼‰\nåŸå­æ€§çš„è¯´æ˜å…ˆæ¥æƒ³æƒ³ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªå˜é‡+1/-1éœ€è¦åšä»€ä¹ˆå·¥ä½œï¼š\n\nå°†è¿™ä¸ªå˜é‡ä»å†…å­˜ä¸­æ‹¿åˆ°CPUçš„å¯„å­˜å™¨ä¸­\nåœ¨å¯„å­˜å™¨ä¸­å®ŒæˆåŠ å‡æ“ä½œ\næ”¾å›å†…å­˜\n\nè¿™å…¶ä¸­æ˜¯æœ‰å¾ˆå¤šä¸ªä¸­é—´çŠ¶æ€çš„ï¼Œè®¾è¯¥å˜é‡åˆå§‹å€¼ä¸º100\n\nå‡è®¾ä¸€ä¸ªè¿›ç¨‹Aæ‹¿èµ°äº†è¿™ä¸ªå˜é‡ï¼Œæ”¾å…¥CPUçš„å¯„å­˜å™¨\nå¦å¤–ä¸€ä¸ªè¿›ç¨‹Bä¹Ÿæ¥æ‹¿èµ°äº†è¿™ä¸ªå˜é‡\næ­¤æ—¶Aå’ŒBæ‹¿åˆ°çš„éƒ½æ˜¯100\nAå¯¹è¯¥å˜é‡è¿›è¡Œäº†å¾ªç¯--æ“ä½œï¼Œæœ€ç»ˆè¯¥å˜é‡å˜æˆäº†50ï¼Œå°†å…¶æ”¾å›å†…å­˜\nBå¯¹è¯¥å˜é‡-1ï¼Œå°†å…¶æ”¾å›å†…å­˜\næœ€ç»ˆå¯¼è‡´Aå¯¹å˜é‡çš„æ“ä½œè¢«Bè¦†ç›–ï¼Œå‡ºç°äº†å˜é‡ä¸ç»Ÿä¸€çš„æƒ…å†µ\n\nè€Œæˆ‘ä»¬çš„ä¿¡å·é‡ä¸ºäº†ä¿è¯èƒ½å¤Ÿæ­£ç¡®çš„æ§åˆ¶è¿›ç¨‹çš„è®¿é—®ï¼Œå…¶å°±å¿…é¡»ç»´æŠ¤è‡ªèº«çš„åŸå­æ€§ï¼ä¸èƒ½æœ‰ä¸­é—´çŠ¶æ€\n\nè¯´äººè¯å°±æ˜¯ï¼Œå¦‚æœè¿›ç¨‹Aåœ¨è®¿é—®ä¿¡å·é‡ï¼Œè¿›ç¨‹Bæ¥äº†ï¼Œä¿¡å·é‡åº”è¯¥æ‹’ç»Bçš„è®¿é—®ï¼Œç›´åˆ°Aè®¿é—®ç»“æŸã€‚ä¸èƒ½è®©Bä¸­é€”æ’å…¥è®¿é—®ï¼Œä»è€Œå¯¼è‡´å¯èƒ½çš„æ•°æ®ä¸ç»Ÿä¸€\n\nå…±äº«å†…å­˜åŒæ ·å¯ä»¥é€šè¿‡ä¿¡å·é‡è¿›è¡Œè®¿é—®æ§åˆ¶\n\næ”¹å˜ä¿¡å·é‡çš„å€¼int semop(int semid, struct sembuf *sops, size_t nops);\n\nåŠŸèƒ½ï¼š æ“ä½œä¿¡å·é‡ï¼ŒP V æ“ä½œ\nå‚æ•°ï¼š \n\nsemid ä¸ºä¿¡å·é‡é›†çš„æ ‡è¯†ç¬¦ï¼›\nsops æŒ‡å‘è¿›è¡Œæ“ä½œçš„ç»“æ„ä½“æ•°ç»„çš„é¦–åœ°å€ï¼›\nnsops æŒ‡å‡ºå°†è¦è¿›è¡Œæ“ä½œçš„ä¿¡å·çš„ä¸ªæ•°ï¼›\n\nè¿”å›å€¼ï¼š æˆåŠŸè¿”å›0ï¼Œå‡ºé”™è¿”å›-1\nRETURN VALUE       If successful semop() and semtimedop() return 0; otherwise they return -1 with errno indicating the error.\n\n4.2 æ‰©å±• mmap\nè¿™éƒ¨åˆ†ä»…ä¾›å‚è€ƒï¼Œå¯èƒ½æœ‰é”™è¯¯ğŸ˜¥éƒ¨åˆ†èµ„æ–™å‚è€ƒ\n\n å‰é¢è´´å‡ºè¿‡IPCèµ„æºçš„å†…æ ¸ç»“æ„ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šç¬¬ä¸€ä¸ªæˆå‘˜éƒ½ç›¸åŒ\nstruct shmid_ds &#123;    struct ipc_perm shm_perm;    /* Ownership and permissions */    size_t          shm_segsz;   /* Size of segment (bytes) */    time_t          shm_atime;   /* Last attach time */    time_t          shm_dtime;   /* Last detach time */    time_t          shm_ctime;   /* Last change time */    pid_t           shm_cpid;    /* PID of creator */    pid_t           shm_lpid;    /* PID of last shmat(2)/shmdt(2) */    shmatt_t        shm_nattch;  /* No. of current attaches */    ...&#125;;struct semid_ds &#123;    struct ipc_perm sem_perm;  /* Ownership and permissions */    time_t          sem_otime; /* Last semop time */    time_t          sem_ctime; /* Last change time */    unsigned long   sem_nsems; /* No. of semaphores in set */&#125;;struct msqid_ds &#123;    struct ipc_perm msg_perm;     /* Ownership and permissions */    time_t          msg_stime;    /* Time of last msgsnd(2) */    time_t          msg_rtime;    /* Time of last msgrcv(2) */    time_t          msg_ctime;    /* Time of last change */    unsigned long   __msg_cbytes; /* Current number of bytes in                                                queue (nonstandard) */    msgqnum_t       msg_qnum;     /* Current number of messages                                                in queue */    msglen_t        msg_qbytes;   /* Maximum number of bytes                                                allowed in queue */    pid_t           msg_lspid;    /* PID of last msgsnd(2) */    pid_t           msg_lrpid;    /* PID of last msgrcv(2) */&#125;;\n\nå®ƒä»¬çš„ç¬¬ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªstruct ipc_permï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªä¿¡å·é‡çš„åŸºæœ¬ä¿¡æ¯\nstruct ipc_perm &#123;    key_t          __key;    /* Key supplied to shmget(2) */    uid_t          uid;      /* Effective UID of owner */    gid_t          gid;      /* Effective GID of owner */    uid_t          cuid;     /* Effective UID of creator */    gid_t          cgid;     /* Effective GID of creator */    unsigned short mode;     /* Permissions + SHM_DEST and                                           SHM_LOCKED flags */    unsigned short __seq;    /* Sequence number */&#125;;\n\nè€Œå†…æ ¸ä¸­å¯¹IPCèµ„æºçš„ç®¡ç†ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„è¿›è¡Œçš„ã€‚æˆ‘ä»¬æ‰€è·å–çš„shmidï¼Œå’Œæ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡\nå…¶ä¸­æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œä¾¿å‘ç°äº†ä¸€ç‚¹ï¼šæˆ‘ä»¬æ¯ä¸€æ¬¡è·å–çš„æ–°çš„å…±äº«å†…å­˜ï¼Œå®ƒçš„ç¼–å·éƒ½ä¼š+1ï¼Œè€Œä¸åƒæ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ï¼Œæä¾›ç¬¬ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ä¸‹æ ‡\nstruct ipc_ids &#123;    int in_use;//è¯´æ˜å·²åˆ†é…çš„èµ„æºä¸ªæ•°    int max_id;//åœ¨ä½¿ç”¨çš„æœ€å¤§çš„ä½ç½®ç´¢å¼•    unsigned short seq;//ä¸‹ä¸€ä¸ªåˆ†é…çš„ä½ç½®åºåˆ—å·    unsigned short seq_max;//æœ€å¤§ä½ç½®ä½¿ç”¨åºåˆ—    struct semaphore sem; //ä¿æŠ¤ ipc_idsçš„ä¿¡å·é‡    struct ipc_id_ary nullentry;//å¦‚æœIPCèµ„æºæ— æ³•åˆå§‹åŒ–ï¼Œåˆ™entrieså­—æ®µæŒ‡å‘ä¼ªæ•°æ®ç»“æ„    struct ipc_id_ary* entries;//æŒ‡å‘èµ„æºipc_id_aryæ•°æ®ç»“æ„çš„æŒ‡é’ˆ&#125;;\n\nåœ¨å†…æ ¸ä¸­ï¼Œstruct ipc_id_ary* entriesæ˜¯ä¸€ä¸ªæŒ‡å‘æ‰€æœ‰ipc_permçš„æŒ‡é’ˆæ•°ç»„ã€‚å…¶èƒ½å¤Ÿé€šè¿‡è¯¥æ•°ç»„æ‰¾åˆ°æˆ‘ä»¬å¯¹äºidï¼ˆä¸‹æ ‡ï¼‰çš„èµ„æºï¼Œå¯¹å…¶è¿›è¡Œè®¿é—®\nstruct ipc_id_ary&#123;        int size;        struct kern_ipc_perm *p[0];//æŒ‡é’ˆæ•°ç»„&#125;;\n\n\né‚£ä½ å¯èƒ½æƒ³é—®äº†ï¼Œè¿™é‡Œåªæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ å•Šï¼Ÿé‚£å¦‚æœæˆ‘æƒ³è®¿é—®shmid_dsç»“æ„çš„å…¶ä»–æˆå‘˜ï¼Œå²‚ä¸æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®äº†ï¼Ÿ\nè¦æ˜¯è¿™ä¹ˆæƒ³ï¼Œå°±è¿˜æ˜¯å¤ªå¹´è½»äº†ğŸ˜‚\n(strcut shmid_ds*)\n\næˆ‘ä»¬åªéœ€è¦å¯¹è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œå¼ºè½¬ï¼Œå°±èƒ½ç›´æ¥è®¿é—®å…¶ä»–æˆå‘˜ï¼\nè¿™æ˜¯å› ä¸ºï¼šCè¯­è¨€ä¸­ï¼Œç»“æ„ä½“ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œå’Œç»“æ„ä½“æ•´ä½“çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼\næŒ‡é’ˆçš„ç±»å‹ä¼šé™åˆ¶è¿™ä¸ªæŒ‡é’ˆè®¿é—®å…ƒç´ çš„èƒ½åŠ›ï¼Œåªè¦æˆ‘ä»¬è¿›è¡Œå¼ºè½¬ï¼Œå…¶å°±èƒ½ç›´æ¥è®¿é—®çˆ¶ç»“æ„ä½“çš„å…¶ä»–æˆå‘˜ï¼\n\nè¿™æ˜¯ä¸€ç§åˆ‡ç‰‡çš„æ€æƒ³\n\nç”¨è¿™ç§åŠæ³•ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„è§„åˆ™åœ¨å†…æ ¸ä¸­ç®¡ç†ä¸åŒçš„IPCèµ„æºï¼Œæ²¡æœ‰å¿…è¦å†ä¸ºæ¯ä¸€ä¸ªIPCèµ„æºå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥ç®¡ç†ã€‚\n\nä¸å¾—ä¸è¯´ï¼Œlinuså¤§ä½¬æ˜¯çœŸçš„ç‰›é€¼ï¼\n\nç»“è¯­å…³äºå…±äº«å†…å­˜çš„æ“ä½œåˆ°è¿™é‡Œå°±OVERäº†ï¼\næœ€åè¿˜äº†è§£äº†ä¸€äº›å†…æ ¸è®¾è®¡ä¸Šçš„å°å¦™æ‹›ï¼Œä¸å¾—ä¸è¯´ï¼ŒçœŸçš„ç‰›æ‰¹~\nå¦‚æœæœ¬æ–‡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡º\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | ä¿¡å·","url":"/2022/11/20/note_Linux/18%E4%BF%A1%E5%8F%B7/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬ä¸€èµ·æ¥åº·åº·ä¿¡å·éƒ¨åˆ†çš„å†…å®¹\n\nç³»ç»Ÿä¸ºCentOS7.6ï¼Œå®Œæ•´ä»£ç è§ Gitee\n\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯ä¿¡å·åœ¨è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å„ç§å„æ ·çš„æƒ…å†µã€‚æ“ä½œç³»ç»Ÿéœ€è¦ç”¨ä¸€å¥—æœºåˆ¶ï¼Œæ¥ç®¡ç†è¿›ç¨‹çš„äº‹ä»¶\n\nè¿›ç¨‹é€€å‡º\nè¿›ç¨‹åœæ­¢\nè¿›ç¨‹æ¢å¤è¿è¡Œ\nâ€¦â€¦\n\nåŒæ—¶ï¼Œè¿™å¥—ç®¡ç†æœºåˆ¶æ˜¯å¼‚æ­¥çš„ï¼Œå±äºä¸€ç§è½¯ï¼ˆä»¶ï¼‰ä¸­æ–­\n\nå’Œç¡¬ä»¶ä¸­æ–­æ‰“æ–­å¤„ç†å™¨ç±»ä¼¼ï¼Œè½¯ä»¶ä¸­æ–­æ‰“æ–­è¿›ç¨‹çš„æ‰§ï¼Œè®©å…¶æ‰§è¡Œå¯¹åº”ä»£ç è¿›è¡Œå“åº”\n\n1.1 ä½•ä¸ºå¼‚æ­¥?\nä»¥ç½‘è´­ç‰©å“ä¸ºä¾‹ï¼šå½“å•†å“å¯„åˆ°è‡ªæç‚¹çš„æ—¶å€™ï¼Œä¼šç»™ä½ å‘é€ä¸€æ¡å–ä»¶çš„çŸ­ä¿¡ï¼ˆä¿¡å·ï¼‰ã€‚æ­¤æ—¶æˆ‘æ­£åœ¨æ‰“æ¸¸æˆï¼Œæ²¡æ—¶é—´å»å¤„ç†è¿™ä¸ªå¿«é€’ï¼ˆå³å–å¿«é€’çš„è¡Œä¸ºå¹¶ä¸æ˜¯å¿…é¡»ç«‹é©¬æ‰§è¡Œï¼‰\nä½†è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘å·²ç»çŸ¥é“æœ‰ä¸€ä¸ªå¿«é€’åˆ°äº†ï¼ˆçŸ¥é“è‡ªå·±è·å–åˆ°äº†ä¸€ä¸ªä¿¡å·ï¼‰æœ¬è´¨ä¸Šå°±æ˜¯çŸ¥é“äº†ä¸€ä¼šè¦å»å–å¿«é€’ï¼ˆä¸€ä¼šè¦å¤„ç†ä¿¡å·ï¼‰\nå½“æ¸¸æˆä¸€æŠŠæ‰“å®Œäº†ï¼Œæˆ‘ä»¬å°±å»å–å¿«é€’äº†ï¼ˆå¤„ç†ä¿¡å·ï¼‰\n\nè¿™å°±æ˜¯ä¸€ç§å¼‚æ­¥çš„è¿‡ç¨‹ã€‚å› ä¸ºä½ ä¸çŸ¥é“ä½ çš„å¿«é€’ä»€ä¹ˆæ—¶å€™ä¼šåˆ°ç«™ç‚¹ï¼Œè¿›ç¨‹ä¹Ÿä¸çŸ¥é“è‡ªå·±ä»€ä¹ˆæ—¶å€™ä¼šæ”¶åˆ°ä¸€ä¸ªä¿¡å·\n1.2 ä¿¡å·çš„ç§ç±»ä½¿ç”¨kill -lå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å‰linuxç³»ç»Ÿä¸‹64ç§ä¸åŒçš„ç±»å‹ã€‚\nå…¶ä¸­å‰32ä¸ºæ ‡å‡†ï¼ˆStandardï¼‰ä¿¡å·ï¼Œå32ä¸ºå®æ—¶ï¼ˆReal-timeï¼‰ä¿¡å·ï¼›æœ¬ç¯‡åšå®¢åªå…³æ³¨æ ‡å‡†ä¿¡å·\n\nè¿™äº›ä¿¡å·ï¼Œéƒ½æ˜¯linuxç³»ç»Ÿä¸­é¢„å®šä¹‰çš„å®\n\nå…¶ä¸­æœ€å¸¸ç”¨çš„ä¾¿æ˜¯9å·ä¿¡å·ï¼Œæ¥ä¸­æ–­è¿›ç¨‹ã€‚å¹³æ—¶æˆ‘ä»¬æœ€å¸¸ç”¨çš„CTRL+Cï¼Œä¹Ÿæ˜¯é€šè¿‡å‘è¿›ç¨‹å‘2å·ä¿¡å·è®©è¿›ç¨‹é€€å‡ºçš„\n[muxue@bt-7274:~/git]$ kill -l 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR111) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+338) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+843) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+1348) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-1253) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-758) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-263) SIGRTMAX-1  64) SIGRTMAX\n\nåœ¨include/linux/signal.hä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹ä¿¡å·çš„è§£é‡Šï¼Œä»¥åŠå…¶é»˜è®¤å¤„ç†æ–¹æ³• default action\n/* * In POSIX a signal is sent either to a specific thread (Linux task) * or to the process as a whole (Linux thread group).  How the signal * is sent determines whether it&#x27;s to one thread or the whole group, * which determines which signal mask(s) are involved in blocking it * from being delivered until later.  When the signal is delivered, * either it&#x27;s caught or ignored by a user handler or it has a default * effect that applies to the whole thread group (POSIX process). * * The possible effects an unblocked signal set to SIG_DFL can have are: *   ignore\t- Nothing Happens *   terminate\t- kill the process, i.e. all threads in the group, * \t\t  similar to exit_group.  The group leader (only) reports *\t\t  WIFSIGNALED status to its parent. *   coredump\t- write a core dump file describing all threads using *\t\t  the same mm and then kill all those threads *   stop \t- stop all the threads in the group, i.e. TASK_STOPPED state * * SIGKILL and SIGSTOP cannot be caught, blocked, or ignored. * Other signals when not blocked and set to SIG_DFL behaves as follows. * The job control signals also have other special effects. * *\t+--------------------+------------------+ *\t|  POSIX signal      |  default action  | *\t+--------------------+------------------+ *\t|  SIGHUP            |  terminate\t| *\t|  SIGINT            |\tterminate\t| *\t|  SIGQUIT           |\tcoredump \t| *\t|  SIGILL            |\tcoredump \t| *\t|  SIGTRAP           |\tcoredump \t| *\t|  SIGABRT/SIGIOT    |\tcoredump \t| *\t|  SIGBUS            |\tcoredump \t| *\t|  SIGFPE            |\tcoredump \t| *\t|  SIGKILL           |\tterminate(+)\t| *\t|  SIGUSR1           |\tterminate\t| *\t|  SIGSEGV           |\tcoredump \t| *\t|  SIGUSR2           |\tterminate\t| *\t|  SIGPIPE           |\tterminate\t| *\t|  SIGALRM           |\tterminate\t| *\t|  SIGTERM           |\tterminate\t| *\t|  SIGCHLD           |\tignore   \t| *\t|  SIGCONT           |\tignore(*)\t| *\t|  SIGSTOP           |\tstop(*)(+)  \t| *\t|  SIGTSTP           |\tstop(*)  \t| *\t|  SIGTTIN           |\tstop(*)  \t| *\t|  SIGTTOU           |\tstop(*)  \t| *\t|  SIGURG            |\tignore   \t| *\t|  SIGXCPU           |\tcoredump \t| *\t|  SIGXFSZ           |\tcoredump \t| *\t|  SIGVTALRM         |\tterminate\t| *\t|  SIGPROF           |\tterminate\t| *\t|  SIGPOLL/SIGIO     |\tterminate\t| *\t|  SIGSYS/SIGUNUSED  |\tcoredump \t| *\t|  SIGSTKFLT         |\tterminate\t| *\t|  SIGWINCH          |\tignore   \t| *\t|  SIGPWR            |\tterminate\t| *\t|  SIGRTMIN-SIGRTMAX |\tterminate       | *\t+--------------------+------------------+ *\t|  non-POSIX signal  |  default action  | *\t+--------------------+------------------+ *\t|  SIGEMT            |  coredump\t| *\t+--------------------+------------------+ * * (+) For SIGKILL and SIGSTOP the action is &quot;always&quot;, not just &quot;default&quot;. * (*) Special job control effects: * When SIGCONT is sent, it resumes the process (all threads in the group) * from TASK_STOPPED state and also clears any pending/queued stop signals * (any of those marked with &quot;stop(*)&quot;).  This happens regardless of blocking, * catching, or ignoring SIGCONT.  When any stop signal is sent, it clears * any pending/queued SIGCONT signals; this happens regardless of blocking, * catching, or ignored the stop signal, though (except for SIGSTOP) the * default action of stopping the process may happen later or never. */\n\nè¿™ä¹Ÿæ„å‘³ç€ï¼šå³ä¾¿æ²¡æœ‰æ¥æ”¶åˆ°ä¿¡å·ï¼Œè¿›ç¨‹ä¹Ÿå…·å¤‡æœ‰è¯†åˆ«å’Œå¤„ç†è¿™ä¸ªä¿¡å·çš„èƒ½åŠ›ï¼å› ä¸ºåœ¨ç³»ç»Ÿä¸­ï¼Œå·²ç»ç»™æ¯ä¸€ä¸ªè¿›ç¨‹å’Œä¿¡å·æŒ‡å®šäº†é»˜è®¤åŠ¨ä½œï¼\n1.3 ä¿¡å·äº§ç”Ÿæœ‰å¾ˆå¤šæƒ…å†µä¼šäº§ç”Ÿä¿¡å·\n\nç³»ç»Ÿæ¥å£ï¼ˆkillå‘½ä»¤ï¼‰\né”®ç›˜äº§ç”Ÿï¼ˆCTRL+R  CTRL+\\)\nè½¯ä»¶æ¡ä»¶ï¼ˆè¿›ç¨‹åœæ­¢ï¼Œè¿›ç¨‹è¿è¡Œå®Œé€€å‡ºï¼‰\nç¡¬ä»¶å¼‚å¸¸ï¼ˆæ¯”å¦‚é™¤0é”™è¯¯ï¼‰\n\n1.4 ä¿¡å·åŠ¨ä½œæ—¢ç„¶æœ‰é»˜è®¤åŠ¨ä½œï¼Œé‚£è‚¯å®šä¹Ÿæœ‰éé»˜è®¤çš„äº†ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹å¯¹ä¿¡å·çš„å¤„ç†åˆ†ä¸ºä¸‰ç§ä¸åŒçš„æ–¹å¼\n\né»˜è®¤åŠ¨ä½œ\nè‡ªå®šä¹‰åŠ¨ä½œ\nå¿½ç•¥\n\nå‰é¢æåˆ°ï¼Œä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šéœ€è¦ç«‹åˆ»å¤„ç†ä¸€ä¸ªä¿¡å·ã€‚é‚£ä¹ˆå®ƒä¸€å®šéœ€è¦æœ‰ä¸€ä¸ªåŠæ³•æ¥è®°ä½è‡ªå·±æ”¶åˆ°çš„ä¿¡å·ã€‚\nè€Œå­˜å‚¨ä¿¡å·ï¼Œæ˜¯ç”±è¿›ç¨‹çš„PCBæ¥å®Œæˆçš„ï¼\nç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿›ç¨‹ä¸­çš„ä¿¡å·ä¸€å…±æ˜¯64ä¸ªï¼Œåˆšå¥½æ˜¯8ä¸ªå­—èŠ‚ï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½å›¾ç»“æ„ï¼Œç”¨ä¸¤ä¸ªintç±»å‹æ¥å­˜æ”¾ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°çš„å„ç§ä¿¡å·ã€‚\n\nåœ¨ç³»ç»Ÿå†…æ ¸ä¸­ï¼Œåˆ†åˆ«æœ‰ä¸‰ä¸ªè¡¨ï¼Œç”¨æ¥å­˜æ”¾è¿›ç¨‹çš„ä¿¡å·ã€‚è€Œè¿™äº›ä¿¡å·åœ¨ä½å›¾ä¸­çš„ä½ç½®ï¼Œå°±æ˜¯åœ¨handleræ–¹æ³•é›†ä¸­å¤„ç†åŠ¨ä½œçš„ä¸‹æ ‡\nblock - 1è¡¨ç¤ºè¯¥è¿›ç¨‹å±è”½è¿™ä¸ªä¿¡å·pending - è¡¨ç¤ºè¿›ç¨‹æ”¶åˆ°äº†ä»€ä¹ˆä¿¡å·ï¼Œ1ä»£è¡¨æ”¶åˆ°ä¸”æœªå¤„ç†handler - æ¯ä¸€ä¸ªä¿¡å·æ‰€å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œé»˜è®¤/å¿½ç•¥/è‡ªå®šä¹‰\n\nè¿™ä¸€åˆ‡éƒ½æ˜¯å¤„äºè¿›ç¨‹PCBä¸­çš„ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿèƒ½ä¸ºæˆ‘ä»¬ç®¡ç†ã€‚æ‰€ä»¥æ“ä½œç³»ç»Ÿæä¾›äº†ç›¸å…³çš„æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è¿›ç¨‹ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ã€‚\npendingè¡¨ä¸­çš„ä¿¡å·åªèƒ½ä¿å­˜ä¸€ä¸ªï¼Œå¦‚æœä¸€ä¸ªä¿¡å·å°šæœªå¤„ç†ï¼Œè¯¥ä½å›¾ä¸º1ï¼›å¦å¤–ä¸€ä¸ªç›¸åŒä¿¡å·åˆ°æ¥çš„æ—¶å€™ï¼Œä¼šè¢«ç›´æ¥ä¸¢å¼ƒæ‰ã€‚ï¼ˆpendingè¡¨åªèƒ½è®°ä½ä¸€ä¸ªä¿¡å·ï¼‰\nhandlerè¡¨ä¸­çš„ä¸¤ä¸ªå®å¦‚ä¸‹ï¼š\n\nSIG_DFL é»˜è®¤æ–¹æ³•\nSIG_IGN å¿½ç•¥\nå¿½ç•¥æ˜¯ä¿¡å·å¤„ç†çš„ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½æ­£å¸¸æ”¶åˆ°è¿™ä¸ªä¿¡å·ï¼Œå¤„ç†æ–¹æ³•æ˜¯ä¸ç®¡ä»–\n\n\n2.ç³»ç»Ÿæ¥å£2.1 signal#include &lt;signal.h&gt;typedef void (*sighandler_t)(int);sighandler_t signal(int signum, sighandler_t handler);\n\nè¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨äºè®¾ç½®æŸä¸ªä¿¡å·çš„å¤„ç†æ–¹æ³•ã€‚å¦‚æœè®¾ç½®æˆåŠŸï¼Œåˆ™è¿”å›è¿™ä¸ªä¿¡å·çš„æ—§å¤„ç†åŠ¨ä½œ\nRETURN VALUE   signal()  returns the previous value of the signal handler, or SIG_ERR on error. In the event of an error, errno is set to indicate the cause.\n\næ¯”å¦‚æˆ‘ä»¬å°†é”®ç›˜é€€å‡ºçš„2å·è‡ªå®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”¨ctrl+cç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;int main()&#123;    //å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    signal(2, handler);    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);    while (true)    &#123;        cout &lt;&lt; &quot;è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\n2.1.1 å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹è¿™é‡Œå¯¹ctrl+cçš„ä½œç”¨è¿›ä¸€æ­¥æè¿°ï¼Œå®ƒåªèƒ½ç”¨æ¥ä¸­æ–­ä¸€ä¸ªå‰å°è¿›ç¨‹\n./test #æˆ‘ä»¬ç›´æ¥è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå°±æ˜¯å‰å°è¿›ç¨‹\n\nä¹‹å‰è¿™ç§ç›´æ¥è¿è¡Œè¿›ç¨‹ï¼Œåœ¨bashä¸Šæ‰“å°å†…å®¹çš„æ–¹å¼ï¼Œéƒ½æ˜¯ä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œå¯ä»¥ç”¨ctrl+cç»ˆæ­¢ï¼›æˆ‘ä»¬å¯ä»¥åœ¨åé¢åŠ ä¸Š&amp;è®¾ç½®ä¸ºä¸€ä¸ªåå°è¿›ç¨‹\n\n&amp;åªæ˜¯ä¸´æ—¶åœ¨åå°è¿è¡Œï¼Œbashå…³é—­åä¼šç»ˆæ­¢ï¼›å¦‚æœæƒ³æŒä¹…åœ¨åå°è¿è¡Œï¼Œéœ€è¦åœ¨å‘½ä»¤æœ€å‰é¢åŠ ä¸Šnohup\n\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./test &amp;[1] 8898[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898^C[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898^C[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898\n\nè¿™æ—¶å€™è¿™ä¸ªè¿›ç¨‹ä¼šä¸€ç›´åœ¨å½“å‰bashçš„åå°æ‰“å°ï¼ŒæœŸé—´æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ï¼Œä½†æ˜¯å®ƒä¾æ—§ä¼šä¸åœçš„æ‰“å°ã€‚ctrl+cæ— æ³•ç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰åœ¨å‰å°è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ps jax | grep test22965  8898  8898 22965 pts/22   22965 S     1001   0:00 ./test\n\npså‘½ä»¤æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°å…¶è¿è¡Œæ€ä¸ºSï¼›è€Œå‰å°è¿›ç¨‹ï¼Œè¿è¡Œæ€ä¸ºS+\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ps jax | grep test22965  9664  9664 22965 pts/22    9664 S+    1001   0:00 ./test\n\nä¸è¿‡ï¼Œè™½ç„¶æˆ‘ä»¬ä¸èƒ½ç”¨CTRL+Cç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼Œä½†ä½¿ç”¨kill -2å‘é€2å·ä¿¡å·ï¼Œæ˜¯å¯ä»¥ç»ˆæ­¢æ‰è¿™ä¸ªè¿›ç¨‹çš„ï¼ˆå‰ææ˜¯æ²¡æœ‰è‡ªå®šä¹‰2å·ä¿¡å·çš„æ–¹æ³•ï¼‰\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464[1]+  Interrupt               ./test[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\n2.1.2 å¾ªç¯æ•æ‰æ‰€æœ‰ä¿¡å·æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œæ•æ‰æ‰€æœ‰çš„ä¿¡å·\n//.....//å…¶ä½™ä»£ç åŒä¸Šint main()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    //signal(2, handler);//å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);    while (true)    &#123;        cout &lt;&lt; &quot;è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\nè®¾ç½®äº†ä¹‹åï¼Œå¯¹åº”çš„ä¿¡å·éƒ½ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°ã€‚ä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œé‚£ä¾¿æ˜¯kill -9\n\n2.1.3 ä¿¡å·9&#x2F;19åœ¨LINUXä¸‹ï¼Œ9å·ä¿¡å·æ˜¯ä¸€ä¸ªç®¡ç†å‘˜ä¿¡å·ï¼Œå…·æœ‰æ€æ­»è¿›ç¨‹çš„æœ€é«˜æƒé™ï¼Œä¸èƒ½è¢«è‡ªå®šä¹‰æ•æ‰ï¼\n\nä½ æƒ³å•Šï¼Œè¦æ˜¯linuxä¸å¯¹9å·è¿›è¡Œé™åˆ¶ï¼Œé‚£æˆ‘æŠŠæ‰€æœ‰ä¿¡å·éƒ½æ•æ‰äº†ï¼Œå²‚ä¸æ˜¯è¿™ä¸ªè¿›è¡Œæ²¡æœ‰åŠæ³•è¢«å¤–éƒ¨ä¸­æ­¢äº†ï¼Ÿå°ç—…æ¯’å•Šï¼ğŸ˜‚\n\nå’Œ9å·ä¿¡å·ä¸€æ ·ä¸èƒ½è¢«å±è”½çš„ï¼Œè¿˜æœ‰19å·ä¿¡å·SIGSTOP\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process running: 7779process running: 7779process running: 7779process running: 7779process running: 7779[1]+  Stopped                 ./tsig[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nè€Œ6å·ä¿¡å·å¯ä»¥è¢«æ•æ‰ï¼Œè‡ªå®šä¹‰æ•æ‰æ–¹æ³•æ‰§è¡Œåï¼Œè¿›ç¨‹ä¾æ—§ä¼šé€€å‡ºã€‚å‚è€ƒ2.4 abort\n2.2 killkillä¸ä»…æ˜¯ä¸€ä¸ªç³»ç»Ÿå‘½ä»¤ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªç³»ç»Ÿæ¥å£ï¼›\n\nä¸€èˆ¬è¿™ç§æƒ…å†µï¼Œç”¨man killæŸ¥çœ‹å‘½ä»¤çš„æ–‡æ¡£ï¼Œman 2 killæŸ¥çœ‹æ¥å£å‡½æ•°\n\nä¹‹å‰æˆ‘ä»¥ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªç”¨æ¥å¹²æ‰è¿›ç¨‹çš„å‘½ä»¤ï¼ˆæ¯•ç«Ÿkillå°±æ˜¯è¿™ä¸ªæ„æ€ï¼‰ç°åœ¨æ‰çŸ¥é“åŸæ¥å®ƒçš„ä½œç”¨æ˜¯ç»™è¿›ç¨‹å‘ä¿¡å·\n//kill - send signal to a process#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;int kill(pid_t pid, int sig);\n\nå®ƒçš„è¿”å›å€¼å¾ˆç®€å•ï¼Œå¦‚æœæˆåŠŸå‘é€ä¿¡å·ï¼Œåˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›-1å¹¶ä¸”æ›´æ–°errno\nRETURN VALUE       On success (at least one signal was sent), zero is returned.  On error, -1 is returned, and errno is set appropriately\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°å®ç°ï¼Œæ¥åˆ¶ä½œä¸€ä¸ªè‡ªå·±çš„killå‘½ä»¤\nvoid mykill(int argc,char *argv[])&#123;    if(argc != 3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; signo-id process-id&quot; &lt;&lt;endl;        exit(1);    &#125;    if(kill(static_cast&lt;pid_t&gt;(atoi(argv[2])), atoi(argv[1])) == -1)    &#123;        cerr &lt;&lt; &quot;kill: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(2);//å‡ºç°é”™è¯¯    &#125;    exit(0);//æ­£å¸¸æ‰§è¡Œ&#125;//argcå’Œargvæ˜¯å‘½ä»¤è¡Œå‚æ•°//argcä¼ å…¥å‘½ä»¤ä¸ªæ•°ï¼ŒåŒ…æ‹¬./test//argvä¼ å…¥å‘½ä»¤çš„å­—ç¬¦ä¸²åœ°å€int main(int argc, char *argv[])&#123;    mykill(argc,argv);    return 0;&#125;\n\næˆåŠŸå‘é€äº†ä¿¡å·ï¼\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨é”™è¯¯çš„æ—¶å€™ï¼Œåˆ™ä¼šå‘é€æç¤ºä¿¡æ¯ğŸ‘\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./mkillUsage: ./mkill signo-id process-id\n\n2.2.1 killallè¿™ä¸ªæ¥å£å¯ä»¥é€šè¿‡è¿›ç¨‹åå‘æ‰€æœ‰è¿™ä¸ªåå­—çš„è¿›ç¨‹å‘ä¿¡å·\n[muxue@bt-7274:~/git]$ killall tsig\n\né€šè¿‡æµ‹è¯•å¯ä»¥å‘ç°ï¼Œå®ƒå‘é€çš„æ˜¯ç¬¬15å·ä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process running: 5846process running: 5846process 5846 get signal: 15process running: 5846process running: 5846\n\n\n2.3 raiseè¿™ä¸ªç³»ç»Ÿæ¥å£çš„ä½œç”¨æ˜¯ç»™è‡ªå·±å‘ä¿¡å·\n#include &lt;signal.h&gt;int raise(int sig);\n\nè¿”å›0ä»£è¡¨è°ƒç”¨æˆåŠŸï¼Œé0ä»£è¡¨å¤±è´¥\nRETURN VALUE       raise() returns 0 on success, and nonzero for failure.\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œè¿›ç¨‹ä¼šä¸æ–­çš„ç»™è‡ªå·±å‘é€2å·ä¿¡å·\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    signal(2, handler);//å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();//è®¾ç½®å¯¹è¿›ç¨‹ä¿¡å·çš„å±è”½    while(1)    &#123;        raise(2);        sleep(1);    &#125;        return 0;&#125;\n\næ­¤æ—¶èƒ½çœ‹åˆ°æ¯ä¸€ç§’ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„handleræ–¹æ³•ï¼Œæ‰“å°æ”¶åˆ°2å·ä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process get signal: 2process get signal: 2process get signal: 2process get signal: 2process get signal: 2\n\n2.4 abortå‘è‡ªå·±å‘é€6) SIGABRTä¿¡å·\n#include &lt;stdlib.h&gt;void abort(void);\n\nè¿˜æ˜¯2.3ä¸­çš„ä»£ç ï¼Œå°†raise(2)ä¿®æ”¹ä¸ºabort()ï¼ŒåŒæ—¶æ•æ‰6å·ä¿¡å·ã€‚\næ­¤æ—¶èƒ½è§‚å¯Ÿåˆ°æˆ‘ä»¬è‡ªå·±å†™çš„handleræ–¹æ³•çš„ç¡®è¢«è°ƒç”¨äº†ï¼Œä½†æ˜¯è¿›ç¨‹ä¾æ—§ç»ˆæ­¢äº†\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process get signal: 6Aborted[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nè¿™è¯´æ˜6å·ä¿¡å·æœ‰ä¸€ä¸ªç‰¹æ€§ï¼šå¯ä»¥è¢«æ•æ‰æ‰§è¡Œè‡ªå®šä¹‰æ–¹æ³•ï¼Œä½†æ‰§è¡Œå®Œæ¯•ä¹‹åéœ€è¦é€€å‡ºï¼\nç›¸æ¯”ä¹‹ä¸‹ï¼Œ9å·ä¿¡å·æ˜¯ä¸èƒ½è¢«æ•æ‰\n\n2.5 alarmè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè®¾å®šç§’æ•°ï¼Œæ—¶é—´åˆ°äº†ä¹‹åï¼Œä¼šæ”¶åˆ°14) SIGALRMä¿¡å·\n#include &lt;unistd.h&gt;unsigned int alarm(unsigned int seconds);\n\nRETURN VALUE    alarm()  returns  the number of seconds remaining until any previously scheduled alarm was due to be delivered, or zero if there was no previously scheduled alarm.\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();//è®¾ç½®å¯¹è¿›ç¨‹ä¿¡å·çš„å±è”½    alarm(4);//4såå‘è‡ªå·±å‘é€14ä¿¡å·    cout &lt;&lt; &quot;set alarm, sleep&quot; &lt;&lt; endl;    sleep(8);    cout &lt;&lt; &quot;sleep finish&quot;&lt;&lt;endl;        return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°åœ¨ä¼‘çœ æœŸé—´ï¼Œè¿›ç¨‹æ”¶åˆ°äº†14å·ä¿¡å·ã€‚æ­¤æ—¶è¿›ç¨‹å¹¶æ²¡æœ‰é€€å‡ºï¼Œè€Œæ˜¯ç»§ç»­ä¼‘çœ \n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†set alarm, sleepprocess get signal: 14sleep finish[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\nå¦‚æœæˆ‘ä»¬ä¸å¯¹14å·ä¿¡å·è‡ªå®šä¹‰æ•æ‰ï¼Œåˆ™ä¼šç›´æ¥é€€å‡ºè¿›ç¨‹\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigset alarm, sleepAlarm clock[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œalarmä¿¡å·æœ¬èº«ä¸ä¼šè®©è¿›ç¨‹ä¼‘çœ ã€‚å¦‚æœè¿›ç¨‹åœ¨alarmä¿¡å·è®¾å®šç§’æ•°ä¹‹å‰ç»“æŸï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…éƒ½ä¸ä¼šå‘ç”Ÿ\n2.6 sigset_tä¿¡å·é›†è¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œå…¶ä¸ºblock&#x2F;pendingä½å›¾çš„å­˜å‚¨ç»“æ„ï¼Œè¢«ç§°ä½œä¿¡å·é›†/ä¿¡å·å±è”½å­—\nè™½ç„¶æˆ‘ä»¬èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»å‹ï¼Œ ä½†æ˜¯å¯¹è¿™ä¸ªä¿¡å·é›†ä¸­çš„ä½å›¾æ“ä½œå¿…é¡»è¦è°ƒç”¨ç³»ç»Ÿæ¥å£æ¥å®Œæˆ\n#include &lt;signal.h&gt;int sigemptyset(sigset_t *set);//åˆå§‹åŒ–ä½å›¾(æ¸…ç©º)int sigfillset(sigset_t *set);//å…¨éƒ¨ç½®ä¸º1int sigaddset(sigset_t *set, int signum);//è®¾ç½®ä½å›¾ä¸­æŸä¸€ä½çš„æ•°æ®int sigdelset(sigset_t *set, int signum);//åˆ é™¤ä½å›¾ä¸­æŸä¸€ä½çš„æ•°æ®//åˆ¤æ–­æŸä¸€ä½ä¿¡å·æ˜¯å¦åœ¨è¯¥é›†åˆä¸­int sigismember(const sigset_t *set, int signum);\n\n2.7 sigprocmaskæ›´æ”¹æˆ–åˆ™è·å–å½“å‰è¿›ç¨‹çš„ä¿¡å·å±è”½å­—\n#include &lt;signal.h&gt;int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¤„ç†æ–¹æ³•ï¼Œåˆ†åˆ«æœ‰ä¸‹é¢ä¸‰ç§\n\nSIG_BLOCK å°†setå‚æ•°ä¸­åŒ…å«çš„ä½æ•°è®¾ç½®ä¸ºå±è”½\nSIG_UNBLOCK å°†setå‚æ•°ä¸­åŒ…å«çš„ä½æ•°è§£é™¤å±è”½\nSIG_SETMASK å°†å½“å‰çš„ä¿¡å·å±è”½å­—è®¾ç½®ä¸ºsetï¼ˆè¦†ç›–ï¼‰\n\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚å¦‚æœä¼ å…¥äº†oldsetï¼Œé‚£ä¹ˆæ—§çš„ä¿¡å·å±è”½å­—ä¼šè¢«æ”¾å…¥oldsetä¸­\nSIG_BLOCK  The set of blocked signals is the union of the current set and the set argument.SIG_UNBLOCK  The signals in set are removed from the current set of blocked signals.  It is permissible to attempt  to  unblock  a  signal which is not blocked.SIG_SETMASK   The set of blocked signals is set to the argument set.   If oldset is non-NULL, the previous value of the signal mask is stored in oldset.RETURN VALUE       sigprocmask() returns 0 on success and -1 on error.  In the event of an error, errno is set to indicate the cause.\n\nå¦‚æœç”¨è¯¥æ¥å£æ¥è§¦äº†å¯¹æŸä¸€ä¸ªä¿¡å·çš„é˜»å¡ï¼Œé‚£ä¹ˆåœ¨è¯¥å‡½æ•°returnå‰ï¼Œè‡³å°‘å…¶ä¸­ä¸€ä¸ªæ¶ˆæ¯è¢«é€è¾¾\n2.8 sigpendingè·å–å½“å‰è¿›ç¨‹çš„pendingä¿¡å·é›†\n#include &lt;signal.h&gt;int sigpending(sigset_t *set);\n\nå‚æ•°ä¸ºä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚æ­£ç¡®è·å–è¿”å›0ï¼Œå¦åˆ™-1\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥æ‰“å°å½“å‰è¿›ç¨‹çš„ä¿¡å·é›†äº†\n//æ‰“å°ä¿¡å·é›†çš„å†…å®¹void showPending(sigset_t* pdg_ptr)&#123;    for(int i=1;i&lt;32;i++)    &#123;        if(sigismember(pdg_ptr,i))        &#123;            cout &lt;&lt; &quot;1&quot;;        &#125;        else        &#123;            cout &lt;&lt; &quot;0&quot;;        &#125;    &#125;    cout &lt;&lt; endl;&#125;int main()&#123;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸€ç›´åœ¨æ‰“å°å½“å‰è¿›ç¨‹çš„ä¿¡å·é›†\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigstart process: 30981000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n\nä¸è¿‡æ­¤æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹ä¿¡å·è¿›è¡Œå±è”½ï¼Œæ‰€ä»¥ç»™è¿™ä¸ªè¿›ç¨‹å‘ä¿¡å·ä¼šè¢«ç«‹å³å¤„ç†ï¼ˆé€’è¾¾ï¼‰ä¸èƒ½åœ¨pendingè¡¨ä¸­è§‚å¯Ÿåˆ°ç°è±¡\n2.8.1 å±è”½2å·ä¿¡å·æ­¤æ—¶å°è¯•ä½¿ç”¨sigprocmaskæ¥å±è”½æŸä¸€ä¸ªä¿¡å·ï¼Œå†æ¥è§‚å¯Ÿæƒ…å†µ\nint main(int argc, char *argv[])&#123;    //blockæ‰2å·ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    sigaddset(&amp;nsig,2);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;        return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬é”®å…¥CTRL+Cçš„æ—¶å€™ï¼Œ2å·ä¿¡å·è¢«blockäº†æ²¡æœ‰å¤„ç†ï¼Œpendingè¡¨ä¸Šçš„2å·ä¿¡å·å°±ä¼šå˜ä¸º1ï¼Œä¸”å¤šæ¬¡CTRL+Cä¸ä¼šæœ‰å˜åŒ–\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigstart process: 360800000000000000000000000000000000000000000000000000000000000000^C0100000000000000000000000000000010000000000000000000000000000001000000000000000000000000000000100000000000000000000000000000^C01000000000000000000000000000000100000000000000000000000000000\n\n2.8.2 å±è”½æ‰€æœ‰ä¿¡å·å¯ä»¥ç”¨ä¸€ä¸ªå¾ªç¯è®¾ç½®æ‰€æœ‰çš„ä¿¡å·ä½ï¼Œè®©å½“å‰è¿›ç¨‹å±è”½æ‰æ‰€æœ‰ä¿¡å·\nint main(int argc, char *argv[])&#123;    //blockæ‰æ‰€æœ‰ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    for(int i=1;i&lt;32;i++)    &#123;        sigaddset(&amp;nsig,i);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    &#125;    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;        return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œä¸ç®¡ç»™è¿™ä¸ªè¿›ç¨‹å‘å‡ å·ä¿¡å·ï¼Œéƒ½ä¼šè¢«å±è”½æ˜¾ç¤ºåœ¨pendingé›†ä¸­ï¼›9å·ä¿¡å·ä¾æ—§æ˜¯è€å¤§å“¥ï¼Œä¸å—å½±å“ï¼Œä¾æ—§èƒ½å¹²æ‰è¿™ä¸ªè¿›ç¨‹\n\n2.8.3 è§£é™¤å±è”½å¦‚æœåœ¨è®¾ç½®å±è”½ä¹‹åï¼Œä¼‘çœ 15sï¼ˆåœ¨æ­¤æœŸé—´æ¥æ”¶ä¿¡å·ï¼‰å†æ¥è§¦å¯¹ä¿¡å·çš„å±è”½\nint main(int argc, char *argv[])&#123;    //blockæ‰æ‰€æœ‰ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    for(int i=1;i&lt;32;i++)    &#123;        sigaddset(&amp;nsig,i);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    &#125;    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    TestSignal();//è®¾ç½®ä¿¡å·è‡ªå®šä¹‰å¤„ç†    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    int k=15;    while(k--)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    //åˆ©ç”¨osigæ¢å¤ä¹‹å‰çš„blockè¡¨    sigprocmask(SIG_SETMASK,&amp;osig,nullptr);    sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†    if(sigpending(&amp;pdg)==0)//è·å–    &#123;        showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°    &#125;    sleep(10);    cout &lt;&lt; &quot;process quit&quot;&lt;&lt;endl;    return 0;&#125;\n\næ­¤æ—¶å°±èƒ½è§‚å¯Ÿåˆ°ï¼Œä¿¡å·è¢«ç«‹é©¬å¤„ç†ï¼Œpendingè¡¨å˜ä¸ºå…¨0\n\n2.9 sigaction#include &lt;signal.h&gt;int sigaction(int signum, const struct sigaction *act,\t\t\tstruct sigaction *oldact);\n\nè¿™ä¸ªå‡½æ•°çš„å‚æ•°å’Œsignalå‡½æ•°å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡éƒ½å˜ä¸ºäº†ä¸€ä¸ªç»“æ„ä½“ã€‚è¿™ä¸ªæ¥å£ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å®æ—¶ä¿¡å·ï¼ˆä¸åœ¨æ–‡æœ¬è€ƒè™‘èŒƒå›´å†…ï¼‰ \n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¤„ç†ä¿¡å·çš„ç¼–å·\nç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå®šä¹‰çš„action\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œå¯ä»¥è·å–åˆ°æ—§çš„å¤„ç†æ–¹æ³•\n\nè®¾ç½®æˆåŠŸåè¿”å›0ï¼Œå‡ºé”™è¿”å›-1\nè¿™ä¸ªç»“æ„ä½“çš„æˆå‘˜å¦‚ä¸‹\nstruct sigaction &#123;    void     (*sa_handler)(int);//å¯¹ä¿¡å·çš„å¤„ç†æ–¹æ³•    void     (*sa_sigaction)(int, siginfo_t *, void *);//å¯å¿½ç•¥    sigset_t   sa_mask;//å‚è€ƒ2.8ä¸­çš„å¤„ç†æ–¹æ³•    int        sa_flags;//è®¾ä¸º0    void     (*sa_restorer)(void);//å¯å¿½ç•¥&#125;;\n\n2.9.1 åŸºæœ¬ä½¿ç”¨#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;using namespace std;//æ‰“å°æ”¶åˆ°çš„ä¿¡å·void handler(int signo)&#123;    cout &lt;&lt; &quot;process &quot; &lt;&lt; getpid() &lt;&lt; &quot; get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;int main(int argc, char *argv[])&#123;    struct sigaction nact,oact;    nact.sa_flags = 0;    nact.sa_handler = handler;    sigemptyset(&amp;nact.sa_mask);//åˆå§‹åŒ–    sigaction(2,&amp;nact,&amp;oact);    while(1)    &#123;        cout &lt;&lt; &quot;process running: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(2);    &#125;    return 0;&#125;\n\nè¿è¡Œä¹‹åï¼Œæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†2å·ä¿¡å·ï¼ŒæˆåŠŸè°ƒç”¨è‡ªå·±çš„handleræ–¹æ³•ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigprocess running: 15029process running: 15029^Cprocess 15029 get signal: 2process running: 15029process running: 15029^Cprocess 15029 get signal: 2process running: 15029process running: 15029process running: 15029^\\Quit[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\n2.9.2 sa_maskè¿™ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªsigset_tç±»å‹ï¼Œç”¨äºå½“å¤„ç†ä¸€ä¸ªä¿¡å·çš„æ—¶å€™ï¼Œè¿å¸¦å±è”½å…¶ä»–ä¿¡å·ï¼›\n\nå½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†Aä¿¡å·çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠAä¿¡å·è‡ªåŠ¨æ·»åŠ å…¥Blockè¡¨ï¼Œå±è”½è¯¥ä¿¡å·ï¼ˆä¸å…è®¸åŒæ—¶å¤„ç†ä¸¤ä¸ªAä¿¡å·ï¼Œé¿å…ä¿¡å·Açš„é€’å½’å¼å¤„ç†ï¼‰\n\nå¦‚æœä½ æƒ³åœ¨å¤„ç†2å·ä¿¡å·çš„æ—¶å€™ï¼Œé˜»å¡æ‰3ã€4ã€5å·ä¿¡å·ï¼Œå°±å¯ä»¥å¯¹sa_maskè¿›è¡Œè®¾ç½®ï¼Œè®¾ç½®æ–¹æ³•å‚è€ƒ2.8çš„æ“ä½œ\nå› ä¸ºç°åœ¨æˆ‘æ¼”ç¤ºçš„è‡ªå®šä¹‰æ–¹æ³•åªæ˜¯ä¸€ä¸ªå†ç®€å•ä¸è¿‡çš„ç¤ºä¾‹ï¼Œå®é™…ä¸Šè¿›ç¨‹æ”¶åˆ°ä¿¡å·çš„æ—¶å€™éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œä¸åŒçš„è‡ªå®šä¹‰å¤„ç†ï¼Œè¿™äº›è‡ªå®šä¹‰å¤„ç†çš„è¿‡ç¨‹å¯èƒ½ä¼šå¾ˆé•¿ã€‚æ­¤æ—¶å°±å¯ä»¥blockæ‰å…¶ä»–çš„ä¿¡å·ï¼Œä¸è®©å®ƒä»¬å½±å“å½“å‰è¿›ç¨‹è¿è¡Œçš„è‡ªå®šä¹‰æ–¹æ³•\n3.è½¯ä»¶å´©æºƒçš„æœ¬è´¨ä¹‹å‰æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è½¯ä»¶å‡ºé”™å¥”æºƒçš„æƒ…å†µï¼Œé‚£ä¹ˆå¥”æºƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n3.1 æƒ…æ™¯æ¼”ç¤ºç”¨ä¸‹é¢çš„ä¸€ä¸ªé™¤é›¶é”™è¯¯ä½œä¸ºæ¼”ç¤º\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process &quot; &lt;&lt; getpid() &lt;&lt; &quot; get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();    int a = 10;    int b = 0;    try    &#123;        int c = a / b; // C++çš„é™¤0ä¸æ˜¯å¼‚å¸¸ï¼Œä¸ä¼šæŠ›å‡º        //æ‰€ä»¥ä¼šç›´æ¥linuxç³»ç»Ÿè¿è¡ŒæŠ¥é”™    &#125;    catch (const exception &amp;e)    &#123;        cerr &lt;&lt; &quot;a/0 err&quot; &lt;&lt; endl;        abort();    &#125;    catch (...)    &#123;        cout &lt;&lt; &quot;base catch&quot; &lt;&lt; endl;        abort();    &#125;    return 0;&#125;\n\nè¿è¡Œäº†ä¹‹åï¼Œè¯¥è¿›ç¨‹ä¼šä¸€ç›´æ”¶åˆ°8å·ä¿¡å·ï¼Œç›´åˆ°æˆ‘ä»¬æ‰‹åŠ¨killæ‰è¿™ä¸ªè¿›ç¨‹\nprocess 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8Killed\n\nä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œä¸æ˜¯ç”¨try/catchè¿›è¡Œäº†å¼‚å¸¸å¤„ç†å—ï¼Ÿä¸ºä»€ä¹ˆæ²¡æœ‰ç”¨å‘¢ï¼Ÿ\né‚£æ˜¯å› ä¸ºï¼Œåœ¨C++ä¸­ï¼Œå¹¶ä¸ä¼šå°†é™¤é›¶é”™è¯¯å½“ä½œä¸€ä¸ªå¼‚å¸¸è¿›è¡Œå¤„ç†ï¼\n\n\næˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†8å·ä¿¡å·ï¼Œæ²¡èƒ½è®©è¿›ç¨‹ç»ˆæ­¢ã€‚ä½†æ­¤æ—¶è¿™ä¸ªè¿›ç¨‹å·²ç»å‡ºç°äº†ä¸€ä¸ªä¸¥é‡çš„bugï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šä¸€ç›´ç»™è¿›ç¨‹å‘è¿™ä¸ªä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigFloating point exception[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä¸è‡ªå®šä¹‰æ•æ‰ï¼Œåˆ™ä¼šç›´æ¥æŠ¥é”™+ç»ˆæ­¢è¿›ç¨‹ï¼›\n8å·ä¿¡å·æ˜¯SIGFPEï¼ŒFPEå³ä¸ºFloating point exceptionçš„ç¼©å†™ï¼\n3.2 è¯´æ˜å´©æºƒçš„æœ¬è´¨ï¼Œæ˜¯è¯¥è¿›ç¨‹æ”¶åˆ°äº†å¼‚å¸¸ä¿¡å·ï¼Œä»è€Œç»ˆæ­¢ã€‚\nä»¥é™¤é›¶é”™è¯¯ä¸ºä¾‹ï¼ŒCPUå†…éƒ¨ä¼šæœ‰ä¸€ä¸ªçŠ¶æ€å¯„å­˜å™¨ï¼Œæ£€æµ‹åˆ°ç”¨æˆ·è¿›è¡Œé™¤é›¶è®¡ç®—çš„æ—¶å€™ï¼Œä¼šå°†çŠ¶æ€å¯„å­˜å™¨è®¾ç½®ä¸ºæµ®ç‚¹æ•°é”™è¯¯ã€‚å½“æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™ï¼Œä¾¿ä¼šå‘å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å‘é€8å·ä¿¡å·ã€‚è€Œæˆ‘ä»¬çš„è¿›ç¨‹åœ¨æ”¶åˆ°ä¿¡å·çš„æ—¶å€™ï¼Œä¼šå¤„ç†è¿™ä¸ªä¿¡å·ï¼Œé»˜è®¤çš„å¤„ç†æ–¹æ³•å°±æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼\nåŒç†ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªé‡æŒ‡é’ˆçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿèƒ½åœ¨è™šæ‹Ÿåœ°å€è½¬æ¢çš„æ—¶å€™å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œå‘æˆ‘ä»¬çš„è¿›ç¨‹å‘é€11å·ä¿¡å·\nint main(int argc, char *argv[])&#123;    TestSignal();    int *p;    *p=20;    return 0;&#125;\n\n11) SIGSEGV ä»£è¡¨æ®µé”™è¯¯ï¼Œå†™OJé¢˜ç›®çš„æ—¶å€™è¿™ä¸ªæŠ¥é”™å¾ˆå¸¸è§ğŸ˜‚\nprocess 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11Killed\n\n4.coredumpåœ¨è¿›ç¨‹æ§åˆ¶çš„åšå®¢ä¸­ï¼Œæåˆ°å½“è¿›ç¨‹å› ä¸ºä¿¡å·ç»ˆæ­¢çš„æ—¶å€™ï¼Œå…¶statusä¸­çš„0-7ä½ä¼šæ˜¯å¯¹åº”çš„ç»ˆæ­¢ä¿¡å·ï¼Œè€Œç¬¬8ä½æ˜¯è¯¥è¿›ç¨‹çš„core dumpæ ‡è®°ä½\n\nåœ¨1.2è´´å‡ºæ¥çš„æºç æ³¨é‡Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸å°‘ä¿¡å·çš„é»˜è®¤åŠ¨ä½œæ˜¯è¿›è¡Œcore dumpï¼Œæ¯”å¦‚8å·ä¿¡å·ã€‚é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿åˆ°åº•æ˜¯ä»€ä¹ˆç©æ„å‘¢ï¼Ÿ\n\né€šè¿‡forkåˆ›å»ºå­è¿›ç¨‹ï¼Œè®©å­è¿›ç¨‹é™¤é›¶äº§ç”Ÿ8å·ä¿¡å·ï¼Œå­è¿›ç¨‹é€€å‡º\nint main(int argc, char *argv[])&#123;    int status;    int id = fork();    if(id == 0)    &#123;        //å­è¿›ç¨‹        int b=0;        int a = 10/b;    &#125;        int ret = waitpid(id,&amp;status,0);    //æ‰“å°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯    printf(&quot;exitcode:%d signo:%d coredump: %d\\n&quot;,(status&gt;&gt;8)&amp;&amp;0xff,status&amp;0x7f,(status&gt;&gt;7)&amp;0x1);    return 0;&#125;\n\næ­¤æ—¶å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œcoredumpæ ‡è®°ä½ä¸º0\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigexitcode:0 signo:8 coredump: 0\n\n4.1 å¼€å¯è¯¥åŠŸèƒ½é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬äº‘æœåŠ¡å™¨çš„core dumpåŠŸèƒ½æ˜¯è¢«å…³é—­çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯ï¼›\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 0  #coredumpåŠŸèƒ½è¢«å…³é—­äº†data seg size           (kbytes, -d) unlimitedscheduling priority             (-e) 0file size               (blocks, -f) unlimitedpending signals                 (-i) 14691max locked memory       (kbytes, -l) unlimitedmax memory size         (kbytes, -m) unlimitedopen files                      (-n) 100002pipe size            (512 bytes, -p) 8POSIX message queues     (bytes, -q) 819200real-time priority              (-r) 0stack size              (kbytes, -s) 8192cpu time               (seconds, -t) unlimitedmax user processes              (-u) 14691virtual memory          (kbytes, -v) unlimitedfile locks                      (-x) unlimited[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\nä½¿ç”¨ulimit -aå‘½ä»¤æŒ‡å®šcore fileçš„å¤§å°\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -c 10000[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 10000\n\nå†æ¬¡è¿è¡Œåˆšåˆšçš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ ‡è®°ä½ä¸º1ï¼Œå¹¶ä¸”äº§ç”Ÿäº†ä¸€ä¸ªcore.27908æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç¼€æ˜¯äº§ç”Ÿcoredumpæ–‡ä»¶çš„è¿›ç¨‹pid\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigexitcode:0 signo:8 coredump: 1[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ lltotal 292-rw------- 1 muxue muxue 593920 Nov 20 12:34 core.27908-rw-rw-r-- 1 muxue muxue    194 Nov 20 10:31 makefile-rw-rw-r-- 1 muxue muxue    601 Nov 20 09:57 mkill.cc-rw-rw-r-- 1 muxue muxue    203 Nov 20 09:56 test.cc-rwxrwxr-x 1 muxue muxue  13768 Nov 20 12:34 tsig-rw-rw-r-- 1 muxue muxue   1772 Nov 20 12:34 tsignal.cpp[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\nvscodeå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶\n\nè¿™ä¸ªç°è±¡å‘Šè¯‰æˆ‘ä»¬ï¼Œé»˜è®¤åŠ¨ä½œæ˜¯coredumpçš„ä¿¡å·ï¼Œä¼šè®©è¿›ç¨‹é€€å‡ºï¼Œå°†coredumpæ ‡è®°ä½ç½®ä¸º1å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªcore.æ–‡ä»¶\n4.2 ä½¿ç”¨coredumpè¿™ä¸ªåŠŸèƒ½ä¼šå°†è¿›ç¨‹åœ¨è¿è¡Œä¸­äº§ç”Ÿå¼‚å¸¸çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼Œæ‰§è¡Œcore dumpï¼ˆæ ¸å¿ƒè½¬å‚¨ï¼‰ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬debug\nå¦‚ä¸‹æ‰€ç¤ºï¼Œä½¿ç”¨-gå‘½ä»¤ä»¥debugæ¨¡å¼ç¼–è¯‘test.cc,è¿è¡Œçš„æ—¶å€™å¯ä»¥çœ‹åˆ°é™¤é›¶é”™è¯¯ä¹‹åè·Ÿäº†ä¸€ä¸ª(core dumped)æç¤ºæˆ‘ä»¬è¿›è¡Œäº†core dumpæ“ä½œï¼Œå¯¹åº”äº§ç”Ÿäº†ä¸€ä¸ªcore.æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ g++ test.cc -g -o test[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./testFloating point exception (core dumped)\n\nè¿™æ—¶å€™æ‰“å¼€gdbï¼Œè¾“å…¥core-file æ–‡ä»¶ååŠ è½½æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥å®šä½åˆ°å‡ºé”™ä»£ç çš„ä½ç½®ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ gdb testGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7Copyright (C) 2013 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;and &quot;show warranty&quot; for details.This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.For bug reporting instructions, please see:&lt;http://www.gnu.org/software/gdb/bugs/&gt;...Reading symbols from /home/muxue/git/linux/code/22-11-16_signal/test...done.(gdb) core-file core.31997[New LWP 31997]Core was generated by `./test&#x27;.Program terminated with signal 8, Arithmetic exception.#0  0x000000000040065c in main () at test.cc:1313          int a=10/0;Missing separate debuginfos, use: debuginfo-install glibc-2.17-326.el7_9.x86_64 libgcc-4.8.5-44.el7.x86_64(gdb) (gdb) \n\nè¿™å¯æ¯”æˆ‘ä»¬æ‰‹åŠ¨debugæ‰¾é”™è¯¯æ–¹ä¾¿å¤šäº†\n\n4.3 ä¸ºä»€ä¹ˆé»˜è®¤å…³é—­ï¼Ÿä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸æŒºå¥½çš„å—ï¼Œä¸ºå•¥é»˜è®¤æ²¡æœ‰å¼€å¯å‘¢ï¼Ÿ\nå…ˆæ¥çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œè¶³è¶³æœ‰580KB\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ls -lht total 292K-rw-rw-r-- 1 muxue muxue 1.8K Nov 20 12:37 tsignal.cpp-rw------- 1 muxue muxue 580K Nov 20 12:34 core.27908\n\nä¸€èˆ¬è€Œè¨€ï¼ŒæœåŠ¡ç«¯è¿è¡Œçš„ä¸€äº›è¿›ç¨‹ï¼Œéƒ½éœ€è¦ä¿æŒç¨³å®šæ€§ã€‚æ¯”å¦‚Bç«™çš„æœåŠ¡å™¨æŒ‚äº†ï¼Œç¬¬ä¸€æ—¶é—´è¦åšçš„æ˜¯é‡å¯æœåŠ¡è¿›ç¨‹ï¼ˆå¹¶ä¸æ˜¯é‡å¯æœåŠ¡å™¨æœºå™¨ï¼‰\nå¦‚æœè®¾ç½®äº†è¿™ä¸ªcoredumpï¼Œå½“æœåŠ¡å™¨è¿›ç¨‹å› ä¸ºé”™è¯¯é€€å‡ºçš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªcore.æ–‡ä»¶ï¼›è¿™æ—¶å€™æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼ˆç”¨æ¥ç›‘è§†å¹¶åŠæ—¶é‡å¯æœåŠ¡å™¨è¿›ç¨‹ï¼‰å‘ç°æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºäº†ï¼Œå°±ä¼šé‡å¯å®ƒã€‚\nè¿™æ—¶å€™åˆé‡åˆ°äº†åˆšåˆšé‚£ä¸ªbugï¼ŒæœåŠ¡å™¨è¿›ç¨‹åˆé€€å‡ºäº†ï¼Œå®ˆæŠ¤è¿›ç¨‹åˆæ¥é‡å¯å®ƒâ€¦â€¦\nå¦‚æ­¤å¾€å¤ï¼Œå°±ä¼šç”Ÿæˆéå¸¸éå¸¸å¤šçš„core.æ–‡ä»¶ï¼Œå¡æ»¡æˆ‘ä»¬çš„ç¡¬ç›˜ã€‚\nå¯¹äºæ±‚ç¨³ä¸ºä¸»çš„æœåŠ¡å™¨è€Œè¨€ï¼Œè¿™å¯ä¸æ˜¯ä¸€ä¸ªå¥½äº‹ã€‚æ‰€ä»¥äº‘æœåŠ¡å™¨ä¸Šé»˜è®¤ç¦æ­¢äº†è¿™ä¸ªåŠŸèƒ½ã€‚\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -c 0[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 0\n\nç”¨umlimit -c 0æŒ‡å®šå¤§å°ä¸º0å…³é—­è¯¥åŠŸèƒ½\n\n5.è¿›ç¨‹å¤„ç†ä¿¡å·å‰é¢å…«å…«äº†è¿™ä¹ˆä¸€å¤§å †ï¼Œè¿›ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆæ—¶å€™æ¥å¤„ç†ä¿¡å·çš„å‘¢ï¼Ÿ\n\nå¼€é—¨è§å±±ï¼šè¿›ç¨‹ä»å†…æ ¸æ€åˆ‡æ¢æˆç”¨æˆ·æ€çš„æ—¶å€™ï¼Œå¤„ç†ä¿¡å·\n\n5.1 å†…æ ¸æ€&#x2F;ç”¨æˆ·æ€åœ¨ç¨‹åºåœ°å€ç©ºé—´çš„åšå®¢ä¸­ï¼Œæåˆ°äº†æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰1gbçš„å†…æ ¸ç©ºé—´ï¼›è¯¥å†…æ ¸ç©ºé—´ç”¨äºå†…æ ¸çº§é¡µè¡¨çš„æ˜ å°„ï¼Œå³æ˜ å°„æ“ä½œç³»ç»Ÿçš„ç‰©ç†å†…å­˜ï¼\n\næœ‰å†…æ ¸çº§é¡µè¡¨çš„å­˜åœ¨ï¼Œæ— è®ºè¿›ç¨‹æ€ä¹ˆåˆ‡æ¢ï¼Œéƒ½èƒ½æ‰¾åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä»£ç å’Œæ•°æ®ï¼Œå‰ææ˜¯æœ‰æƒé™è®¿é—®ã€‚\n\nCPUä¸­çš„CR3çŠ¶æ€å¯„å­˜å™¨ä¼šæ ‡è¯†å½“å‰è¿›ç¨‹å¤„äºå†…æ ¸æ€è¿˜æ˜¯ç”¨æˆ·æ€\nå†…æ ¸æ€å¯ä»¥è®¿é—®æ‰€æœ‰ä»£ç å’Œæ•°æ®ï¼Œæƒé™æœ€é«˜\nç”¨æˆ·æ€åªèƒ½è®¿é—®å½“å‰è¿›ç¨‹è‡ªå·±çš„æ•°æ®\n\nå½“æˆ‘ä»¬è¿›ç¨‹éœ€è¦æ‰§è¡Œå†…æ ¸æ¥å£çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†è¿›ç¨‹åˆ‡æ¢ä¸ºå†…æ ¸æ€ï¼›è¿è¡Œå®Œæ¯•ä¹‹åï¼Œåˆ‡æ¢å›ç”¨æˆ·æ€ã€‚\nå½“æˆ‘ä»¬è¿›ç¨‹å‡ºç°äº†å¼‚å¸¸ï¼Œä¼šä»ç”¨æˆ·æ€åˆ‡æ¢æˆå†…æ ¸æ€ï¼Œç”±æ“ä½œç³»ç»Ÿæ£€æµ‹ç›¸å…³å¼‚å¸¸å¹¶å‘è¿›ç¨‹å‘é€å¯¹åº”ä¿¡å·ã€‚\nå½“æˆ‘ä»¬è¿›ç¨‹çš„æ—¶é—´ç‰‡åˆ°äº†ï¼ˆéœ€è¦åˆ‡æ¢è¿›ç¨‹ï¼‰ä¹Ÿä¼šä»ç”¨æˆ·æ€è½¬ä¸ºå†…æ ¸æ€ï¼Œç”±æ“ä½œç³»ç»Ÿæ¥è¿›è¡Œè¿›ç¨‹åˆ‡æ¢ã€‚\n5.2 ä¿¡å·æ£€æµ‹å½“è¿›ç¨‹ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œä¿¡å·çš„æ£€æµ‹å’Œå¤„ç†ã€‚æ­¤æ—¶åˆ¤æ–­pendingè¡¨ä¸­æ˜¯å¦æœ‰æœªå¤„ç†ä¿¡å·ï¼Œä»¥åŠè¯¥ä¿¡å·æ˜¯å¦æœ‰è¢«blockã€‚å¦‚æœä¸€ä¸ªä¿¡å·æ²¡æœ‰è¢«blockï¼Œåˆ™å°†è¯¥ä¿¡å·é€’è¾¾ç»™è¿›ç¨‹ï¼Œæ‰§è¡Œå¯¹åº”çš„å¤„ç†æ–¹æ³•\n\næ‰§è¡Œç”¨æˆ·çš„è‡ªå®šä¹‰æ–¹æ³•æ—¶ï¼Œåº”è¯¥ä»¥ä»€ä¹ˆèº«ä»½æ‰§è¡Œï¼Ÿ\n\næ³¨æ„ï¼Œå½“æˆ‘ä»¬ç»™ä¸€ä¸ªä¿¡å·æŒ‡å®šäº†è‡ªå®šä¹‰å¤„ç†æ–¹æ³•ï¼Œå°±ä»£è¡¨è¯¥ä¿¡å·çš„å¤„ç†æ–¹æ³•æ˜¯ç”¨æˆ·æä¾›çš„ã€‚æ­¤æ—¶éœ€è¦ä»¥ç”¨æˆ·çš„èº«ä»½å»æ‰§è¡Œè¿™ä¸ªä»£ç ï¼Œæ‰èƒ½æ­£ç¡®è®¿é—®ç”¨æˆ·çº§é¡µè¡¨ã€‚\nè¿™ä¹ˆåšä¹Ÿèƒ½é¿å…æ¶æ„ä»£ç çš„æ³¨å…¥ã€‚å¦‚æœæœ‰äººåœ¨è‡ªå®šä¹‰æ–¹æ³•ä¸­å†™ä¸€ä¸ªä¿®æ”¹ç³»ç»Ÿå†…æ ¸çš„æ¶æ„ä»£ç ï¼Œä¹Ÿèƒ½è¢«æ“ä½œç³»ç»Ÿå‘ç°å¹¶é˜»æ­¢ã€‚\nè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ å›¾æ¥è§£é‡Šï¼ˆå¹¶éå®Œæ•´è¿‡ç¨‹ï¼Œä»…ä¾›å‚è€ƒç†è§£ï¼‰\n\næ¯æ¬¡å¤„ç†å®Œä¿¡å·åï¼Œä¼šè¿”å›ç”¨æˆ·è¿›ç¨‹ï¼Œä»ä¸Šä¸€æ¬¡ä¸­æ–­çš„ä½ç½®å¼€å§‹ç»§ç»­å¾€åè¿è¡Œ\n6.å¯é‡å…¥å‡½æ•°//å¤´æ’void insert(Node* p)&#123;\tp-&gt;next=head;\thead=p;&#125;\n\nä¸Šé¢è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„é“¾è¡¨å¤´æ’å‡½æ•°\nå¦‚æœæˆ‘ä»¬è¿™ä¸ªå¤´æ’å‡½æ•°å¤„ç†çš„æ˜¯ä¸€ä¸ªå…¨å±€çš„é“¾è¡¨ï¼Œå°±å¯èƒ½ä¼šå› ä¸ºç”¨æˆ·æ€ã€å†…æ ¸æ€çš„åˆ‡æ¢ï¼Œå‡½æ•°é‡å…¥é€ æˆé”™è¯¯\n\næ‰€ä»¥insertå°±æ˜¯ä¸€ä¸ªä¸å¯é‡å…¥å‡½æ•°ï¼é™¤äº†è¿™ä¸ªå¤´æ’ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‡½æ•°ä¹Ÿç¬¦åˆè¿™ä¸ªç‰¹æ•ˆï¼š\n\nè°ƒç”¨äº†mallocæˆ–è€…freeï¼ˆå¯èƒ½ä¼šå¤šæ¬¡mallocå’Œå¤šæ¬¡freeï¼‰\nè°ƒç”¨äº†I&#x2F;Oåº“çš„å‡½æ•°\nç»å¤§å¤šæ•°åº“å‡½æ•°éƒ½æ˜¯ä¸å¯é‡å…¥çš„ï¼Œæ¯”å¦‚C++çš„STLåº“\n\nä¾æ­¤ç±»æ¨ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°åªè®¿é—®ä»–è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œä¸ä¼šå½±å“å…¶ä»–å‚æ•°ã€‚é‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªå¯é‡å…¥å‡½æ•°\n6.1 åŸå­æ“ä½œæ‰€è°“åŸå­æ“ä½œæ˜¯æŒ‡ä¸ä¼šè¢« çº¿ç¨‹è°ƒåº¦ æœºåˆ¶æ‰“æ–­çš„æ“ä½œï¼›è¿™ç§æ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½• context switch ï¼ˆåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼‰\n\nå¦‚æœä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†å¯¹å…¨å±€å˜é‡çš„åŸå­æ“ä½œï¼Œé‚£ä¹ˆå®ƒä¹Ÿæ˜¯å¯é‡å…¥çš„å‡½æ•°ã€‚å› ä¸ºåŸå­æ“ä½œä¸åŒ…å«ä¸­é—´æ€\nå¦‚æœä¸€ä¸ªå‡½æ•°å¯¹å…¨å±€å˜é‡è¿›è¡Œäº†éåŸå­æ“ä½œï¼ˆæ¯”å¦‚ä¸Šé¢çš„é“¾è¡¨å¤´æ’ï¼‰é‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªä¸å¯é‡å…¥å‡½æ•°\n\n7.volatileä¹‹å‰çš„å­¦ä¹ ä¸­å°±å·²ç»çŸ¥é“ï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨æ˜¯æ¯ä¸€æ¬¡è®¿é—®å˜é‡çš„æ—¶å€™ï¼Œéƒ½å¿…é¡»è¦å»å†…å­˜ä¸­å–ã€‚\n\nå‡è®¾æˆ‘ä»¬è¿›ç¨‹ä¸­éœ€è¦é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡è¿›è¡Œæ¡ä»¶åˆ¤æ–­\nint flag=0;int main()&#123;    if(flags)    &#123;        //..    &#125;    else    &#123;        //..    &#125;    return 0;&#125;\n\nå¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†ä¸€ä¸ªä¿¡å·ï¼Œæ”¶åˆ°è¯¥ä¿¡å·çš„æ—¶å€™ï¼Œä¼šä¿®æ”¹flagï¼Œæ‰§è¡Œif&#x2F;elseè¯­å¥ä¸­å¯¹åº”çš„ä»£ç ã€‚\nç”±äºç¼–è¯‘å™¨çš„ä¼˜åŒ–é—®é¢˜ï¼Œæ¯ä¸€æ¬¡è®¿é—®flagçš„æ—¶å€™ï¼Œå®ƒå¯èƒ½ä¸ä¼šæ¯æ¬¡éƒ½å»å†…å­˜ä¸­å–ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜\n\nå¯„å­˜å™¨ä¸­ flag&#x3D;0\nç»è¿‡è‡ªå®šä¹‰æ•æ‰å‡½æ•°å¤„ç†ï¼Œå†…å­˜ä¸­ flag&#x3D;1\n\nè¿™ä¸¤ä¸ªflagåœ¨ifæ¡ä»¶ä¸­ä¼šå¯¼å‘ä¸åŒçš„ç»“æœï¼\nä¸ºäº†é¿å…è¿™ç§å¯èƒ½å› ä¸ºå¹³å°ã€ç¼–è¯‘å™¨ã€ä¼˜åŒ–é—®é¢˜å¯¼è‡´çš„ä»£ç bugï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰æ‰€æœ‰ç¼–è¯‘å™¨ï¼Œä¸å‡†å¯¹flagå˜é‡åšä»»ä½•ä¼˜åŒ–å¤„ç†ï¼Œå¿…é¡»è¦è€è€å®å®çš„å»å†…å­˜ä¸­æ‹¿è¿™ä¸ªå˜é‡çš„æ•°æ®ï¼\n//volatileä¿æŒå†…å­˜çš„å¯è§æ€§volatile int flag = 0;\n\n7.1 ç¤ºä¾‹\ngccç¼–è¯‘å™¨å¯ä»¥é€šè¿‡-O2æŒ‡å®šè¾ƒé«˜çš„ä¼˜åŒ–ç­‰çº§\n\nä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹\n#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;// ä¿æŒå†…å­˜çš„å¯è§æ€§int flag = 0;void handler(int signo)&#123;    flag = 1;    printf(&quot;\\næ›´æ”¹flags: 0-&gt;1\\n&quot;);&#125;int main()&#123;       printf(&quot;process start %d\\n&quot;,getpid());    signal(2, handler);//è‡ªå®šä¹‰æ•æ‰2å·ä¿¡å·    while (!flag)        ;//å•¥äº‹ä¸å¹²çš„å¾ªç¯       \tprintf(&quot;process exit!\\n&quot;);    return 0;&#125;\n\nè¿è¡Œä¹‹åï¼Œé”®å…¥CTRL+Cï¼Œä½ ä¼šå‘ç°è¿›ç¨‹ä¾æ—§æ²¡æœ‰é€€å‡ºï¼ç†è®ºä¸Šæ¥è¯´flags=1ï¼Œ!flagsä¸ºå‡ï¼Œåº”ç»ˆæ­¢å¾ªç¯ï¼Œé€€å‡ºè¿›ç¨‹æ‰å¯¹ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test -O2[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 22333^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^\\Quit[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ \n\nå¦‚æœæˆ‘ä»¬åŠ ä¸Švolatileå…³é”®å­—ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¿›ç¨‹èƒ½å¤Ÿæ­£å¸¸é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test -O2[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 23086^Cæ›´æ”¹flag: 0-&gt;1process exit![muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ \n\nå»æ‰gccç¼–è¯‘å™¨çš„ä¼˜åŒ–å‚æ•°ï¼Œå»æ‰volatileå…³é”®å­—ï¼Œä¼šå‘ç°è¿›ç¨‹ä¹Ÿèƒ½æ­£å¸¸é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 23224^Cæ›´æ”¹flag: 0-&gt;1process exit![muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ \n\nè¿™å°±æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–ä¸åŒçš„å½±å“ï¼åŠ ä¸Švolatileå…³é”®å­—èƒ½é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½¿ä»£ç è¿è¡Œèƒ½æœ‰å”¯ä¸€ç»“æœï¼\n8.å­è¿›ç¨‹å‘é€ä¿¡å·å½“å­è¿›ç¨‹çš„çŠ¶æ€å˜åŒ–çš„æ—¶å€™ï¼Œä¼šå‘çˆ¶è¿›ç¨‹å‘é€17å·ä¿¡å·\nvoid testfork()&#123;    int status;    int id = fork();    if(id == 0)    &#123;        //å­è¿›ç¨‹        cout &lt;&lt; &quot;chlid process: &quot; &lt;&lt;getpid()&lt;&lt;endl;        int b=0;        int a = 10/b;    &#125;    TestSignal();    int ret = waitpid(id,&amp;status,0);    //æ‰“å°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯    printf(&quot;exitcode:%d signo:%d coredump: %d\\n&quot;,(status&gt;&gt;8)&amp;&amp;0xff,status&amp;0x7f,(status&gt;&gt;7)&amp;0x1);&#125;\n\nè§‚å¯Ÿç»“æœï¼Œå¯ä»¥çœ‹åˆ°çˆ¶è¿›ç¨‹æ”¶åˆ°äº†å­è¿›ç¨‹çš„17å·ä¿¡å·ï¼Œæ­¤æ—¶å­è¿›ç¨‹å› ä¸ºé”™è¯¯é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†chlid process: 25319process 25318 get signal: 17exitcode:0 signo:8 coredump: 0[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ \n\né™¤äº†é€€å‡ºæ—¶ä¼šå‘é€ä¿¡å·ï¼Œå­è¿›ç¨‹æš‚åœã€ç»§ç»­è¿è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¿¡å·\n\n8.1 çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹æ—¢ç„¶çˆ¶è¿›ç¨‹èƒ½æ”¶å–åˆ°å­è¿›ç¨‹å‘é€çš„ä¿¡å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰17å·ä¿¡å·ï¼Œåœ¨å…¶ä¸­è°ƒç”¨waitpidï¼Œå³å¯åœ¨å­è¿›ç¨‹å‡ºé”™æˆ–æ‰§è¡Œå®Œæ¯•éœ€è¦é€€å‡ºçš„æ—¶å€™ï¼Œè¿›è¡Œçˆ¶è¿›ç¨‹å›æ”¶\n\nè¿™æ ·å°±ä¸éœ€è¦åœ¨mainå‡½æ•°ä¸­è¿›è¡Œä¸»åŠ¨waitäº†\n\næ“ä½œå¹¶ä¸éš¾ï¼Œæˆ‘ä»¬åªéœ€è¦å°†17å·ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œåœ¨æ•æ‰å‡½æ•°ä¸­æ‰§è¡Œwaitpidè¿›è¡Œç­‰å¾…å³å¯\n\næ³¨æ„ï¼šè¿™é‡Œçš„waitpidå¿…é¡»ä½¿ç”¨WNOHANGè¿›è¡Œéé˜»å¡ç­‰å¾…\nå½“çˆ¶è¿›ç¨‹æ­£åœ¨é˜»å¡ç­‰å¾…å­è¿›ç¨‹Açš„æ—¶å€™ï¼Œå®ƒåœ¨å¤„ç†17å·ä¿¡å·ï¼Œæ–°çš„17å·ä¿¡å·æ— æ³•æ”¶åˆ°\nè¿™å°±ä¼šå¯¼è‡´åœ¨Aä¹‹åç§å­çš„å­è¿›ç¨‹ï¼Œæ— æ³•å‘çˆ¶è¿›ç¨‹å‘é€æœ‰æ•ˆçš„17å·ä¿¡å·\nä»è€Œå‡ºç°äº†åƒµå°¸è¿›ç¨‹ï¼ˆæœªå›æ”¶çš„å­è¿›ç¨‹ï¼‰\n\nä½¿ç”¨éé˜»å¡ç­‰å¾…ï¼Œå³å¯ä»¥é¿å…æ­¤é—®é¢˜ï¼Œåˆèƒ½è®©çˆ¶è¿›ç¨‹åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­å¤„ç†è‡ªå·±çš„å…¶ä»–å·¥ä½œï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;#include &lt;cassert&gt;using namespace std;void FreeChld(int signo)&#123;    assert(signo == SIGCHLD);    while (true)    &#123;        //å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†ï¼Œwaitpidå°±ä¼šè°ƒç”¨å¤±è´¥        pid_t id = waitpid(-1, nullptr, WNOHANG); // éé˜»å¡ç­‰å¾…        if (id &gt; 0)        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æˆåŠŸ, child pid: &quot; &lt;&lt; id &lt;&lt; endl;        &#125;        else if(id == 0)        &#123;            //è¿˜æœ‰å­è¿›ç¨‹æ²¡æœ‰é€€å‡º            cout &lt;&lt; &quot;å°šæœ‰æœªé€€å‡ºçš„å­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œ&quot; &lt;&lt; endl;            break;//é€€å‡ºç­‰å¾…å­è¿›ç¨‹        &#125;        else        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ&quot; &lt;&lt; endl;            break;        &#125;    &#125;&#125;int main()&#123;    signal(SIGCHLD, FreeChld);    for (int i = 0; i &lt; 5; i++)    &#123;        pid_t id = fork();        if (id == 0)        &#123;            //å­è¿›ç¨‹            int cnt = 8;            while (cnt)            &#123;                cout &lt;&lt; &quot;å­è¿›ç¨‹ pid: &quot; &lt;&lt; getpid() &lt;&lt; &quot; cnt: &quot; &lt;&lt; cnt-- &lt;&lt; endl;                sleep(1);            &#125;            cout &lt;&lt; &quot;å­è¿›ç¨‹é€€å‡ºï¼Œè¿›å…¥åƒµå°¸çŠ¶æ€: &quot; &lt;&lt; i &lt;&lt; endl;            exit(0);        &#125;        sleep(2);    &#125;    while (true)    &#123;        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\nå¦‚ä¸‹å³å›¾ä¸­ï¼Œç¬¬0ä¸ªå­è¿›ç¨‹é€€å‡ºè¿›å…¥å°†æ˜¯çŠ¶æ€ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°17å·ä¿¡å·ï¼Œå°±å¼€å§‹å›æ”¶å­è¿›ç¨‹ã€‚æ­¤æ—¶è¿˜æœ‰4ä¸ªå­è¿›ç¨‹æ²¡æœ‰è¿è¡Œå®Œæ¯•ï¼Œçˆ¶è¿›ç¨‹ä¼šç»§ç»­è¿è¡Œï¼Œç­‰å¾…å…¶ä»–å­è¿›ç¨‹ç»“æŸ\n\nå½“æ‰€æœ‰å­è¿›ç¨‹éƒ½ç­‰å¾…ç»“æŸäº†ï¼Œwaitpidè¿”å›-1è®©çˆ¶è¿›ç¨‹é€€å‡ºå›æ”¶å­è¿›ç¨‹çš„å¾ªç¯ï¼Œç°åœ¨å°±åªæœ‰çˆ¶è¿›ç¨‹è‡ªå·±åœ¨å¹²æ´»äº†\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nååº”åˆ°ç›‘æ§ä¿¡æ¯ä¸Šï¼Œçˆ¶è¿›ç¨‹å…ˆæ˜¯åˆ›å»ºäº†5ä¸ªå­è¿›ç¨‹\n\néšåå½“ç¬¬ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å¼€å§‹å›æ”¶å­è¿›ç¨‹ã€‚è¿™é‡Œä¹Ÿèƒ½è§‚æµ‹åˆ°ï¼Œå›æ”¶æˆåŠŸï¼Œå¹¶æ²¡æœ‰å‡ºç°åƒµå°¸çŠ¶æ€çš„å­è¿›ç¨‹ã€‚\n\n8.2 çˆ¶è¿›ç¨‹å¿½ç•¥å­è¿›ç¨‹å‰é¢æåˆ°è¿‡ï¼ŒSIG_IGNçš„ä½œç”¨æ˜¯å¿½ç•¥è¿™ä¸ªå­è¿›ç¨‹ï¼›ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™ä¸å¯¹å•Šï¼Œå¿½ç•¥äº†å­è¿›ç¨‹çš„ä¿¡å·ï¼Œé‚£å²‚ä¸æ˜¯çˆ¶è¿›ç¨‹ä¸æƒ³æ­ç†å­è¿›ç¨‹äº†å—ï¼Ÿ\n*\t|  SIGCHLD           |\tignore   \t|\n\næŸ¥1.2è¡¨ä½ è¿˜ä¼šå‘ç°ï¼ŒSIGCHLDçš„é»˜è®¤åŠ¨ä½œä¸å°±æ˜¯å¿½ç•¥å—ï¼Ÿè‡ªå·±è®¾ç½®ä¸€ä¸‹æ˜¯ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Ÿ\nsignal(SIGCHLD, SIG_IGN);\n\nç„¶å¹¶ä¸æ˜¯è¿™æ ·ï¼Œå¯¹äºSIGCHLD17å·ä¿¡å·è€Œè¨€ï¼Œæˆ‘ä»¬ç»™çˆ¶è¿›ç¨‹è®¾ç½®äº†æ‰‹åŠ¨å¿½ç•¥åï¼Œå­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å°†è‡ªåŠ¨è¢«å›æ”¶\nè¿™ä¹ˆåšçš„å‰æï¼Œæ˜¯çˆ¶è¿›ç¨‹ä¸éœ€è¦å’Œå­è¿›ç¨‹åœ¨å›æ”¶èµ„æºçš„æ—¶å€™è¿›è¡Œå¤„ç†ï¼Œè¯´äººè¯å°±æ˜¯ï¼Œåªè¦çˆ¶è¿›ç¨‹ä¸æƒ³ç®¡ä»»ä½•å­è¿›ç¨‹çš„å·¥ä½œï¼Œé‚£å°±å¯ä»¥ç›´æ¥æŠŠ17å·ä¿¡å·æ‰‹åŠ¨è®¾ç½®æˆSIG_IGN\n\nç»“è¯­è¿›ç¨‹ä¿¡å·åˆ°è¿™é‡Œå°±åŸºæœ¬overäº†ï¼Œå¹²è´§æ»¡æ»¡ï¼\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå§ï¼ï¼ï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘å¦‚ä½•ä½¿ç”¨sshå¯†é’¥é…ç½®git","url":"/2022/05/09/note_Linux/1%E4%BD%BF%E7%94%A8ssh%E8%BF%9E%E6%8E%A5git/","content":"ä¹‹å‰çš„è…¾è®¯äº‘æ­å»ºLinuxç¯å¢ƒåšå®¢ä¸­åŒ…å«äº†æœ¬æ–‡ï¼Œä½†æ˜¯ç”±äºåœ¨æˆ‘çš„ç¯å¢ƒä¸‹SSHé…ç½®gitæ— æ³•å¤šæ¬¡ç”Ÿæ•ˆã€‚\nä¸ºäº†é¿å…è¯¯å¯¼ï¼Œæ‰€ä»¥æŠŠè¿™ä¸€éƒ¨åˆ†å•ç‹¬æˆæ–‡ï¼Œå¹¶åˆ é™¤åŸæ–‡ä¸­ç›¸å…³éƒ¨åˆ†\n\n22-06-19æ›´æ–°ï¼šé—®é¢˜å·²è§£å†³ï¼Œå¯æ”¾å¿ƒé˜…è¯»æœ¬æ–‡ï¼\n\n\n\n[TOC]\n1.åˆ›å»ºSSHå¯†é’¥â‘ æœ¬åœ°åˆ›å»ºsshå¯†é’¥è¾“å…¥è¿™ä¸ªè¯­å¥ï¼ˆgithubå•¥çš„éƒ½æ˜¯åŒç†ï¼‰\nssh-keygen -t rsa -C &quot;ä½ çš„giteeè´¦æˆ·é‚®ç®±&quot;\n\nç„¶åä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œç›´æ¥è¿æŒ‰3æ¬¡å›è½¦è·³è¿‡\nEnter file in which to save the key (/home/muxue/.ssh/id_rsa): id_rsa_ç”¨æˆ·åEnter passphrase (empty for no passphrase): Enter same passphrase again: \n\nåé¢å‡ºç°çš„passphraseè¯­å¥ç›´æ¥å›è½¦è·³è¿‡ï¼Œå‡ºç°ä¸‹é¢è¿™ä¸ªå°±æ˜¯é…ç½®å¥½äº†\nYour identification has been saved in id_rsa_ç”¨æˆ·åâ€¦â€¦#åé¢è¿˜æœ‰å¾ˆå¤šï¼Œè¿˜å‡ºç°äº†ä¸€ä¸ªæ–‡å­—ç»„æˆçš„å›¾ç‰‡\n\nâ‘¡æŠŠSSHå…¬é’¥æ·»åŠ åˆ°gitee&#x2F;githubè´¦æˆ·ä¸Šç›´æ¥cd .sshè¿›å…¥éšè—æ–‡ä»¶å¤¹ï¼Œcatä½ åˆšåˆšç”Ÿæˆçš„pubæ–‡ä»¶ï¼Œå°†å†…å®¹å¤åˆ¶\ncd .sshcat id_rsa.pub\n\nä½ è¿˜å¯ä»¥ä½¿ç”¨Xftpæ‰“å¼€åˆšåˆšåˆ›å»ºçš„å¯†é’¥æ–‡ä»¶ï¼ŒæŠŠé‡Œé¢ç”Ÿæˆçš„å†…å®¹å¤åˆ¶ä¸€ä»½\n\n\nåœ¨giteeè´¦æˆ·è®¾ç½®ä¸­æ‰¾åˆ°SSHå…¬é’¥ï¼Œæ·»åŠ å³å¯\n\ngithubåŒç†\n\nâ‘¢æµ‹è¯•sshè¿æ¥æå®šå¯†é’¥åï¼Œæµ‹è¯•æ˜¯å¦å¯ä»¥ç”¨sshè®¿é—®æˆ‘ä»¬çš„è¿œç¨‹ä»“åº“\nssh -T git@gitee.com//githubåªéœ€è¦æŠŠgiteeæ”¹æˆgithubå°±è¡Œäº†\n\nå‡ºç°ä¸‹é¢çš„å°±æ˜¯æˆåŠŸäº†\n\n\nâ‘£è¯¥æ–¹å¼æœ‰é”™è¯¯ï¼ˆå·²è§£å†³ï¼‰SSHæ–¹å¼ä¸çŸ¥ä¸ºä½•ï¼Œåœ¨æˆ‘çš„äº‘ä¸»æœºä¸Šï¼Œåªæœ‰å½“æ¬¡è®¾ç½®æœ‰æ•ˆï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯è¿æ¥äº‘æœåŠ¡å™¨ï¼ˆäº‘æœåŠ¡å™¨æ²¡æœ‰é‡å¯ï¼‰SSHå°±ä¼šå¤±æ•ˆã€‚åœ¨æˆ‘çš„Linuxç”¨æˆ·ç›®å½•ä¸‹ä»¥åŠæˆ‘æœ‹å‹çš„ç”¨æˆ·ç›®å½•ä¸‹éƒ½å‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼\n\nå¦‚æœä½ ä¹Ÿå‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼Œè¯·ç›´æ¥ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼ï¼Œè€Œä¸æ˜¯SSH\n\n22-06-19æ›´æ–°ï¼šåœ¨åŸå…ˆåšå®¢ä¸­ï¼Œæåˆ°äº†ä¸‹é¢è¿™ä¸ªæœ¬åœ°æ·»åŠ sshå¯†é’¥çš„æ­¥éª¤\n\næ‰§è¡Œä¸‹é¢ä¸¤ä¸ªè¯­å¥ï¼Œæ·»åŠ ä½ çš„sshå¯†é’¥åˆ°è®¾ç½®ä¸­ã€‚æ³¨æ„ï¼Œç”Ÿæˆçš„å¯†åŒ™åº”è¯¥æ˜¯åœ¨\nssh-agent bashssh-add ~/.ssh/id_rsa_ç”¨æˆ·å\n\n\n\nå®é™…ä¸Šï¼Œå‡ºç°æ— æ³•å¤šæ¬¡ä½¿ç”¨çš„é—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºè¿™è«é¡»æœ‰çš„ä¸€æ­¥æ“ä½œï¼\næ­£ç¡®æ–¹æ³•æ˜¯ï¼šåˆ«æ‰§è¡Œè¿™ä¸€æ­¥ï¼Œå°±OKäº†ï¼\nå¦‚æœä½ ä¹‹å‰åšäº†è¿™ä¸€æ­¥ï¼Œé‚£å°±é‡æ–°åˆ›å»ºä¸€ä¸ªsshå¯†é’¥\n\n2.å…‹éš†è¿œç¨‹ä»“åº“ä½¿ç”¨mkdir æ–‡ä»¶å¤¹ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒCDè¿›å»åï¼Œå…‹éš†æˆ‘ä»¬çš„è¿œç¨‹ä»“åº“\ngit clone è¿œç¨‹ä»“åº“çš„sshé“¾æ¥\n\nå› ä¸ºç°åœ¨æˆ‘ä»¬é…ç½®çš„æ˜¯SSHæ–¹å¼ï¼Œæ‰€ä»¥è¦ä½¿ç”¨SSHé“¾æ¥è€Œä¸æ˜¯https\n\n\nå…‹éš†æˆåŠŸåï¼Œcdè¿›å…¥è¯¥ç›®å½•ï¼Œgit statusæŸ¥çœ‹gitä»“åº“å½“å‰çŠ¶æ€ï¼Œåº”è¯¥æ˜¯up-to-dateçš„ã€‚\n3.ä¸Šä¼ ä»£ç éšä¾¿åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæµ‹è¯•èƒ½å¦æ­£å¸¸PUSHåˆ°è¿œç¨‹ä»“åº“\n\nè¿™éƒ¨åˆ†è®¾è®¡åˆ°gitå‘½ä»¤è¡Œæ“ä½œï¼Œå¦‚æœä½ ä¸ä¼šï¼Œå¯ä»¥æœå‡ ç¯‡gitçš„åšå®¢å­¦ä¹ ä¸€ä¸‹\n\ngit add æ–‡ä»¶å¤¹ #æ·»åŠ éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„git commit -m &quot;è¾“å…¥pushä¿¡æ¯&quot; #git pushçš„ä¿¡æ¯git push #å’Œè¿œç¨‹ä»“åº“åŒæ­¥\n\n\nå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œæ‰€ä»¥å‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™\n\nç”¨ä¸‹é¢çš„ä¸¤è¡Œå‘½ä»¤ï¼Œå¯ä»¥å•ç‹¬è®¾ç½®å½“å‰ä»“åº“çš„ç”¨æˆ·é‚®ç®±å’Œç”¨æˆ·åã€‚å¦‚æœéœ€è¦å…¨å±€è®¾ç½®ï¼Œåˆ™ä¾ç…§ä¸Šå›¾ä¸­çš„æ“ä½œï¼Œä½¿ç”¨git config --globalè¯­å¥å³å¯\ngit config  user.email &quot;you@example.com&quot;git config  user.name &quot;Your Name&quot;\n\nåŒæ—¶æˆ‘ä»¬éœ€è¦ç”¨ä¸‹é¢çš„è¿™ä¸ªå‘½ä»¤ï¼Œè®¾ç½®è®©gité»˜è®¤pushåˆ°å½“å‰åˆ†æ”¯ä¸Š\ngit config --global push.default current\n\n\nå†æ¬¡æµ‹è¯•git pushï¼ŒæˆåŠŸï¼\n\n\næœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","git"]},{"title":"ã€Linuxã€‘çº¿ç¨‹æ¦‚å¿µ | äº’æ–¥","url":"/2022/12/23/note_Linux/19%E7%BA%BF%E7%A8%8B%E4%BA%92%E6%96%A5/","content":"åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼Œç»ˆäºåˆ°å¤šçº¿ç¨‹æ–¹é¢çš„å­¦ä¹ äº†ï¼\n\n\n\næ‰€ç”¨ç³»ç»ŸCentos7.6  æœ¬æ–‡çš„æºç ğŸ‘‰ã€ä¼ é€é—¨ã€‘\n\n[TOC]\n1.çº¿ç¨‹çš„æ¦‚å¿µåœ¨ä¹‹å‰çš„linuxå­¦ä¹ ä¸­ï¼Œå·²ç»æ¥è§¦è¿‡äº†è¿›ç¨‹çš„æ¦‚å¿µï¼Œè¿›ç¨‹ç”±ä¸€ä¸ªtask_structç»“æ„ä½“åœ¨æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæè¿°ï¼ŒCPUåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šä¾ç…§è¿›ç¨‹æ—¶é—´ç‰‡è¿›è¡Œè½®è¯¢è°ƒåº¦ï¼Œè®©æ¯ä¸€ä¸ªè¿›ç¨‹çš„ä»£ç éƒ½å¾—ä»¥æ¨è¿›ï¼Œå®ç°å¤šä¸ªè¿›ç¨‹çš„åŒæ—¶è¿è¡Œ\nè€Œçº¿ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§è½»é‡åŒ–çš„è¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»£ç \nè¿›ç¨‹:çº¿ç¨‹ = 1:N\n\nåœ¨ä¹‹å‰çš„å¤šè¿›ç¨‹æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨forkæ¥å£åˆ›å»ºå­è¿›ç¨‹ï¼Œé€šè¿‡if/elseè¯­å¥åˆ¤æ–­ï¼Œå®ç°å¯¹ç‰¹å®šæ‰§è¡Œæµçš„åˆ’åˆ†\n\nåˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œéœ€è¦æ‹·è´ä¸€ä»½task_struct/mm_structå¹¶åˆ›å»ºé¡µè¡¨\nå½“å­è¿›ç¨‹ä¿®æ”¹äº†ä¸€éƒ¨åˆ†å˜é‡ï¼Œä¼šå‘ç”Ÿå†™æ—¶æ‹·è´ï¼Œä¿®æ”¹é¡µè¡¨åœ¨ç‰©ç†å†…å­˜ä¸Šçš„æ˜ å°„\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦åšä¸å°‘çš„å·¥ä½œ\n\n1.1 æ‰§è¡Œæµè®©æˆ‘ä»¬åº·åº·æ‰§è¡Œæµè¿™ä¸€æ¦‚å¿µï¼š\n\nå•æ‰§è¡Œæµè¿›ç¨‹ï¼šå†…éƒ¨åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµçš„è¿›ç¨‹\nå¤šæ‰§è¡Œæµè¿›ç¨‹ï¼šå†…éƒ¨æœ‰å¤šä¸ªæ‰§è¡Œæµçš„è¿›ç¨‹\n\nè¿›ç¨‹=å†…æ ¸æ•°æ®ç»“æ„+ä»£ç å’Œæ•°æ®ï¼Œåœ¨å†…æ ¸è§†è§’ä¸­ï¼Œè¿›ç¨‹æ˜¯æ‰¿æ‹…åˆ†é…ç³»ç»Ÿèµ„æºçš„åŸºæœ¬å®ä½“ï¼ˆè¿›ç¨‹çš„åŸºåº§å±æ€§ï¼‰\n\nè¿›ç¨‹ï¼šå‘ç³»ç»Ÿç”³è¯·èµ„æºçš„åŸºæœ¬å•ä½ï¼ˆç³»ç»Ÿåˆ†é…ï¼‰\nçº¿ç¨‹ï¼šç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½\n\n\n1.2 çº¿ç¨‹åˆ›å»ºæ—¶åšäº†ä»€ä¹ˆï¼Ÿé‚£çº¿ç¨‹çš„åˆ›å»ºéœ€è¦åšä»€ä¹ˆå‘¢ï¼Ÿ\n\nä¸åŒæ“ä½œç³»ç»Ÿçš„å®ç°ä¸åŒï¼Œä¸€èˆ¬ç”¨tcbæŒ‡ä»£æè¿°çº¿ç¨‹çš„ç»“æ„ä½“\n\nåœ¨linuxä¸­ï¼Œæ²¡æœ‰è¿›ç¨‹å’Œçº¿ç¨‹åœ¨æ¦‚å¿µä¸Šçš„åŒºåˆ†ï¼Œå…¶ä»¥æ‰§è¡Œæµä¸ºåŸºç¡€ï¼Œçº¿ç¨‹åªæ˜¯ç®€å•çš„å¯¹task_strcutè¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼›çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹å†…éƒ¨è¿è¡Œçš„æ‰§è¡Œæµ\n\nè¯´äººè¯ï¼šlinuxä¸‹çš„çº¿ç¨‹æ˜¯ç”¨è¿›ç¨‹æ¨¡æ‹Ÿçš„\næ¢å¥è¯ï¼šlinuxä¸‹çš„è¿›ç¨‹ä¹Ÿæ˜¯ä¸€ç§çº¿ç¨‹ï¼Œä½†æ˜¯å…¶åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµ\nå¯¹äºCPUè€Œè¨€ï¼Œå…¶çœ‹åˆ°çš„task_structéƒ½æ˜¯ä¸€ä¸ªæ‰§è¡Œæµ\n\nè€Œåˆ›å»ºçº¿ç¨‹æ—¶ä¹Ÿæœ‰è¯´æ³•ï¼Œçº¿ç¨‹éš¶å±äºæŸä¸€ä¸ªè¿›ç¨‹ä¸‹ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹çš„å­è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ›å»ºæ–°çš„mm_structå’Œé¡µè¡¨æ˜ å°„ï¼Œåˆ›å»ºçš„æ•ˆç‡é«˜äºå­è¿›ç¨‹ã€‚åªéœ€è¦å°†task_structæŒ‡å‘åŸæœ‰è¿›ç¨‹çš„mm_structå’Œé¡µè¡¨å³å¯ã€‚\n\nåŒæ ·çš„ï¼ŒCPUåœ¨æ¨è¡Œå¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™ï¼Œæ— é¡»æ‰§è¡Œpcbåˆ‡æ¢ï¼Œå°±èƒ½å®ç°å•è¿›ç¨‹å¤šä¸ªçº¿ç¨‹æ“ä½œçš„åŒæ—¶è¿›è¡Œï¼Œæ‰§è¡Œæ•ˆç‡å˜é«˜ï¼\n\nçº¿ç¨‹æ˜¯ä¸€ç§Light weight process è½»é‡çº§è¿›ç¨‹ï¼Œç®€ç§°LWP\n\n1.3 å†…æ ¸æºç ä¸­çš„ä½“ç°åœ¨task_strcutç»“æ„ä½“ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªå­—æ®µ\n/* CPU-specific state of this task */\tstruct thread_struct thread;\n\nè½¬åˆ°å®šä¹‰ï¼Œå…¶å†…éƒ¨éƒ½æ˜¯ä¸€äº›å¯„å­˜å™¨ä¿¡æ¯ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªçº¿ç¨‹çš„åŸºæœ¬ä¿¡æ¯ã€‚è¿™ä¹Ÿæ˜¯linuxä¸­æ²¡æœ‰å•ç‹¬å®ç°çº¿ç¨‹tcbçš„ä½“ç°ï¼Œè€Œæ˜¯ç”¨task_structæ¥æ¨¡æ‹Ÿçš„\nstruct thread_struct &#123;\t/* Cached TLS descriptors: */\tstruct desc_struct\ttls_array[GDT_ENTRY_TLS_ENTRIES];\tunsigned long\t\tsp0;\tunsigned long\t\tsp;#ifdef CONFIG_X86_32\tunsigned long\t\tsysenter_cs;#else\tunsigned long\t\tusersp;\t/* Copy from PDA */\tunsigned short\t\tes;\tunsigned short\t\tds;\tunsigned short\t\tfsindex;\tunsigned short\t\tgsindex;#endif#ifdef CONFIG_X86_32\tunsigned long\t\tip;#endif#ifdef CONFIG_X86_64\tunsigned long\t\tfs;#endif\tunsigned long\t\tgs;\t/* Hardware debugging registers: */\tunsigned long\t\tdebugreg0;\tunsigned long\t\tdebugreg1;\tunsigned long\t\tdebugreg2;\tunsigned long\t\tdebugreg3;\tunsigned long\t\tdebugreg6;\tunsigned long\t\tdebugreg7;\t/* Fault info: */\tunsigned long\t\tcr2;\tunsigned long\t\ttrap_no;\tunsigned long\t\terror_code;\t/* floating point and extended processor state */\tunion thread_xstate\t*xstate;#ifdef CONFIG_X86_32\t/* Virtual 86 mode info */\tstruct vm86_struct __user *vm86_info;\tunsigned long\t\tscreen_bitmap;\tunsigned long\t\tv86flags;\tunsigned long\t\tv86mask;\tunsigned long\t\tsaved_sp0;\tunsigned int\t\tsaved_fs;\tunsigned int\t\tsaved_gs;#endif\t/* IO permissions: */\tunsigned long\t\t*io_bitmap_ptr;\tunsigned long\t\tiopl;\t/* Max allowed port in the bitmap, in bytes: */\tunsigned\t\tio_bitmap_max;/* MSR_IA32_DEBUGCTLMSR value to switch in if TIF_DEBUGCTLMSR is set.  */\tunsigned long\tdebugctlmsr;\t/* Debug Store context; see asm/ds.h */\tstruct ds_context\t*ds_ctx;&#125;;\n\n1.4 çº¿ç¨‹çš„ç§æœ‰ç‰©æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ä½†æ˜¯çº¿ç¨‹å¹¶ä¸æ˜¯ï¼Œå› ä¸ºçº¿ç¨‹åªæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œæµåˆ†æ”¯ï¼Œå®ƒä»è¿›ç¨‹ç»§æ‰¿äº†ç»å¤§éƒ¨åˆ†å±æ€§ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯å…±äº«çš„ï¼‰\n\nç”¨æˆ·idå’Œç»„id\nè¿›ç¨‹id\nè¿›ç¨‹å·¥ä½œç›®å½•\næ–‡ä»¶æè¿°ç¬¦è¡¨\nä¿¡å·çš„å¤„ç†æ–¹å¼ï¼ˆå¦‚æœè¿›ç¨‹æœ‰å¯¹æŸä¸ªä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¼šå…±ç”¨è¿™ä¸ªè‡ªå®šä¹‰æ•æ‰ï¼‰\nå’Œè¿›ç¨‹å…±ç”¨ä¸€ä¸ªå †\n\nä½†çº¿ç¨‹ä¹Ÿä¼šæœ‰è‡ªå·±çš„ç§æœ‰ç‰©ï¼\n\nçº¿ç¨‹id\nçº¿ç¨‹ç‹¬ç«‹çš„å¯„å­˜å™¨ï¼ˆå› ä¸ºçº¿ç¨‹ä¹Ÿéœ€è¦æ‰§è¡Œä»£ç ï¼Œæœ‰ä¸Šä¸‹æ–‡æ•°æ®ï¼‰\næ ˆï¼ˆçº¿ç¨‹è¿è¡Œå‡½æ•°æ—¶ä¹Ÿéœ€è¦å‹æ ˆå’Œå‡ºæ ˆï¼Œå¿…é¡»ç‹¬ç«‹å¦åˆ™æ‰§è¡Œæµä¼šå‡ºé—®é¢˜ï¼‰\nerrnoï¼ˆå•ç‹¬çš„æŠ¥é”™ä¿¡æ¯ï¼‰\nä¿¡å·å±è”½å­—ï¼ˆå¯ä»¥å•ç‹¬é’ˆå¯¹æŸä¸ªä¿¡å·å¤„ç†ï¼‰\nçº¿ç¨‹è°ƒåº¦ä¼˜å…ˆçº§\n\n1.5 çº¿ç¨‹ä¼˜ç¼ºç‚¹1.5.1 ç¼ºç‚¹\nçº¿ç¨‹æ˜¯ç¼ºä¹ä¿æŠ¤çš„ï¼ˆä¸å…·å¤‡è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼‰è¿™ä¹Ÿè¢«ç§°ä¸ºå¥å£®æ€§ï¼›çº¿ç¨‹çš„å¥å£®æ€§ä½\n\nå½“è¿›ç¨‹è¢«åœæ­¢çš„æ—¶å€™ï¼Œå…¶ä¸‹çº¿ç¨‹ä¹Ÿä¼šè¢«åœæ­¢\nå½“æœ‰ä¸€ä¸ªçº¿ç¨‹å‡ºbugäº†ï¼Œä¼šè®©æ•´ä¸ªè¿›ç¨‹é€€å‡º\nå¤šçº¿ç¨‹ä¸­çš„å…¨å±€å˜é‡é—®é¢˜\n\n\nçº¿ç¨‹ç¼ºä¹è®¿é—®æ§åˆ¶ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨æŸäº›æ“ä½œç³»ç»Ÿçš„æ¥å£ä¼šå½±å“æ•´ä¸ªè¿›ç¨‹\n\ndebugå¤šçº¿ç¨‹è¾ƒéº»çƒ¦\n\nå¦‚æœåŒä¸€ä¸ªè¿›ç¨‹æ‰€ç”¨çº¿ç¨‹å¤ªå¤šï¼Œå¯èƒ½ä¼šæ— æ³•å……åˆ†åˆ©ç”¨cpuæ€§èƒ½è€Œé€ æˆæ€§èƒ½æŸå¤±\n\n\n1.5.2 ä¼˜ç‚¹\nå¼€è¾Ÿçš„æ¶ˆè€—ä½äºè¿›ç¨‹ï¼Œå ç”¨çš„èµ„æºä½äºè¿›ç¨‹\nåˆ‡æ¢çº¿ç¨‹æ— é¡»åˆ‡æ¢é¡µè¡¨ç­‰ç»“æ„ï¼Œé€Ÿåº¦å¿«\nç­‰å¾…æ…¢IOè®¾å¤‡æ—¶ï¼Œè¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œï¼›å°†éƒ¨åˆ†IOæ“ä½œé‡å ï¼Œèƒ½è®©è¿›ç¨‹åŒæ—¶ç­‰å¾…å¤šä¸ªIOæ“ä½œ\nèƒ½å……åˆ†åˆ©ç”¨å¤„ç†å™¨çš„å¯å¹¶è¡Œæ•°é‡\n\n\n2.åŸºç¡€å‡½æ•°linuxä¸‹æä¾›äº†pthreadåº“æ¥å®ç°çº¿ç¨‹æ“ä½œ\n2.1 pthread_createäººå¦‚å…¶åï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¥åˆ›å»ºæ–°è¿›ç¨‹çš„\n#include &lt;pthread.h&gt;int pthread_create(pthread_t *thread, const pthread_attr_t *attr,\t\t\t\t\tvoid *(*start_routine) (void *), void *arg);//Compile and link with -pthread.\n\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œä¸ºè¯¥çº¿ç¨‹çš„id\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºæŒ‡å®šçº¿ç¨‹çš„å±æ€§ï¼Œæš‚æ—¶è®¾ç½®ä¸ºNULLä½¿ç”¨é»˜è®¤å±æ€§\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è®©è¯¥è¿›ç¨‹æ‰§è¡Œçš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå‚æ•°å’Œè¿”å›å€¼éƒ½ä¸ºvoid*\nç¬¬å››ä¸ªå‚æ•°æ˜¯ä¼ ç»™ç¬¬ä¸‰ä¸ªæ‰§è¡Œå‡½æ•°çš„å‚æ•°\n\nåˆ›å»ºæ­£å¸¸åè¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ç \næ³¨æ„ï¼Œä½¿ç”¨äº†pthreadåº“åï¼Œéœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šé“¾æ¥ï¼Œ-lpthread\ntypedef unsigned long int pthread_t;//çº¿ç¨‹id\n\nåˆ›å»ºçº¿ç¨‹åæ‰“å°å¯ä»¥å‘ç°ï¼Œçº¿ç¨‹idæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„å€¼ï¼Œå¹¶ä¸åƒè¿›ç¨‹PIDé‚£ä¹ˆå°\n//cout &lt;&lt; &quot;pthread_create &quot;&lt;&lt; t1 &lt;&lt; &quot; &quot; &lt;&lt; t2 &lt;&lt; endl;pthread_create 140689524995840 140689516603136\n\nå¯ä»¥é€šè¿‡printf %xçš„æ–¹å¼æ¥å‡å°‘æ‰“å°é•¿åº¦\n//printf(&quot;0x%x  0x%x\\n&quot;,t1,t2);0x393d0700  0x38bcf700\n\n2.2 pthread_joinå…‰æ˜¯åˆ›å»ºè¿›ç¨‹è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿›ç¨‹è¿›è¡Œç­‰å¾…\n#include &lt;pthread.h&gt;int pthread_join(pthread_t thread, void **retval);//Compile and link with -pthread.\n\nè¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çº¿ç¨‹çš„idï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€\nç­‰å¾…æˆåŠŸåè¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ç \n\njoinå¯ä»¥åœ¨çº¿ç¨‹é€€å‡ºåï¼Œé‡Šæ”¾çº¿ç¨‹çš„èµ„æº\nåŒæ—¶è·å–çº¿ç¨‹å¯¹åº”çš„é€€å‡ºç \njoinè¿˜èƒ½ä¿è¯æ˜¯æ–°åˆ›å»ºçš„çº¿ç¨‹é€€å‡ºåï¼Œä¸»çº¿ç¨‹æ‰é€€å‡º\n\n2.2.1 åŸºç¡€çš„å¤šçº¿ç¨‹æ“ä½œæœ‰äº†è¿™ä¸¤ä¸ªï¼Œæˆ‘ä»¬å°±èƒ½å†™ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹æ“ä½œäº†\n#include&lt;iostream&gt;#include&lt;pthread.h&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;using namespace std;void* func1(void* arg)&#123;    while(1)    &#123;        cout &lt;&lt; &quot;func1 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;void* func2(void* arg)&#123;    while(1)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;int main()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main::&quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    return 0;&#125;\n\næ‰§è¡Œä¼šå‘ç°ï¼Œå¤šçº¿ç¨‹æ“ä½œæˆåŠŸå¯åŠ¨ï¼Œä¸”æ‰“å°çš„è¿›ç¨‹pidéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»£è¡¨å…¶éš¶å±äºåŒä¸€ä¸ªè¿›ç¨‹\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æ¥æŸ¥çœ‹è½»é‡çº§è¿›ç¨‹\nps -aL\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œäº†ç¨‹åºä¹‹åï¼Œå‡ºç°äº†3ä¸ªPIDç›¸åŒï¼ŒLWPä¸åŒçš„è½»é‡çº§è¿›ç¨‹ï¼Œè¿™å°±ä»£è¡¨æˆ‘ä»¬çš„å¤šçº¿ç¨‹æ“ä½œæˆåŠŸäº†ï¼›\nåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°ï¼Œåœ¨å¤šçº¿ç¨‹æ“ä½œæ—¶ï¼Œè°å…ˆè¿è¡Œæ˜¯ä¸ç¡®å®šçš„ã€‚è¿™æ˜¯ç”±ç³»ç»Ÿè°ƒåº¦éšæœºå†³å®šçš„\n\n2.2.2 C++çš„å¤šçº¿ç¨‹æ“ä½œC++11ä¹Ÿæ”¯æŒäº†å¤šçº¿ç¨‹æ“ä½œï¼Œå…¶å°è£…äº†æ“ä½œç³»ç»Ÿçš„pthreadæ¥å£ï¼ŒåŸºæœ¬çš„æ“ä½œå¾ˆç›¸ä¼¼\nvoid test2()&#123;    thread t1(func1,(char*)&quot;test1&quot;);    thread t2(func2,(char*)&quot;test2&quot;);       while(1)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    t1.join();    t2.join();&#125;\n\næ‰§è¡Œåçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒC++çš„threadåº“è¿˜å¯ä»¥ä¼ å…¥functionalå°è£…çš„å¯è°ƒç”¨å‡½æ•°ï¼Œå’Œlambdaè¡¨è¾¾å¼\n\n2.3 çº¿ç¨‹é€€å‡º2.3.1 retvalint pthread_join(pthread_t thread, void **retval);\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ¥è·å–çº¿ç¨‹æ‰€æ‰§è¡Œæ–¹æ³•çš„è¿”å›å€¼ã€‚retvalæ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°\n#include&lt;iostream&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;using namespace std;void* func1(void* arg)&#123;    int a = 5;    while(a--)    &#123;        cout &lt;&lt; &quot;func1 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func1 exit&quot; &lt;&lt; endl;    return (void*)100;&#125;void* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    return (void*)10;&#125;void test3()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    int a = 15;    while(a--)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    void* r1;    void* r2;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;int main()&#123;        test3();    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹é€€å‡ºä¹‹åï¼Œä¸»å‡½æ•°ä¸­æˆåŠŸæ‰“å°å‡ºäº†ä»–ä»¬çš„è¿”å›å€¼\n\næ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯å°†void*çš„æŒ‡é’ˆå¼ºè½¬ä¸ºintï¼Œå¦‚æœåœ¨æ‰“å°çš„æ—¶å€™å¼ºè½¬ä¸ºintï¼Œä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±çš„æŠ¥é”™ï¼Œéœ€è¦ä½¿ç”¨long longæ¥è§„é¿æŠ¥é”™\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ makeg++ test.cpp -o test -lpthread -std=c++11.test.cpp: In function â€˜void test3()â€™:test.cpp:88:35: error: cast from â€˜void*â€™ to â€˜intâ€™ loses precision [-fpermissive]     cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (int)r1 &lt;&lt; endl;                                   ^make: *** [test] Error 1\n\n2.3.2 pthread_exité™¤äº†ç›´æ¥returnï¼Œçº¿ç¨‹è¿˜å¯ä»¥è°ƒç”¨pthread_exitå‡½æ•°å®ç°é€€å‡º\n#include &lt;pthread.h&gt;void pthread_exit(void *retval);//Compile and link with -pthread.\n\næ•ˆæœå®Œå…¨ä¸€æ ·\n//return (void*)10;pthread_exit((void*)10);\n\næ³¨æ„ï¼Œä¸»çº¿ç¨‹mainä¸­è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¸ä¼šå¯¼è‡´è¿›ç¨‹é€€å‡º\nvoid* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; &quot; tid: &quot; &lt;&lt; syscall(SYS_gettid) &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    pthread_exit((void*)10);&#125;void test5()&#123;    pthread_t t1,t2;\t//func2ä¼šæ‰§è¡Œ10s    pthread_create(&amp;t1,nullptr,func2,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    sleep(1);    pthread_detach(t1);    pthread_detach(t2);    sleep(1);&#125;int main()&#123;        test5();    pthread_exit(0);//ä¸»çº¿ç¨‹æå‰é€€å‡º    cout &lt;&lt; &quot;main exit&quot; &lt;&lt; endl;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸»å‡½æ•°å·²ç»è°ƒç”¨äº†pthread_exité€€å‡ºäº†ï¼Œä½†æ˜¯çº¿ç¨‹è¿˜åœ¨è·‘\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476func2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476main exitfunc2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476\n\n2.3.3 ptrhead_cancelé™¤äº†ä¸Šé¢ä¿©ç§æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨mainé‡Œé¢ç›´æ¥æŠŠæŸä¸€ä¸ªçº¿ç¨‹ç»™å…³æ‰\n#include &lt;pthread.h&gt;int pthread_cancel(pthread_t thread);//Compile and link with -pthread.\n\nvoid test3()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    int a = 15;    while(a--)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);        if(a==11)        &#123;            pthread_cancel(t1);            pthread_cancel(t2);            break;        &#125;    &#125;    void* r1;    void* r2;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;\n\nè¢«æå‰ç»ˆæ­¢çš„è¿›ç¨‹ï¼Œè¿”å›å€¼éƒ½ä¸º-1\n\n2.3.4 ä¸ºä»€ä¹ˆè¿›ç¨‹é€€å‡ºä¸ä¼šå‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Ÿè¦ç†æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œè¿˜æ˜¯éœ€è¦æ·±çŸ¥ä¸€ä¸ªæ¦‚å¿µï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªæ‰§è¡Œæµï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚\nå…ˆæ¥å›é¡¾ä¸€ä¸‹è¿›ç¨‹é€€å‡ºçš„å‡ ç§æƒ…å†µï¼š\n\nä»£ç è·‘å®Œï¼Œç»“æœæ­£ç¡®\nä»£ç è·‘å®Œï¼Œç»“æœæœ‰é—®é¢˜\nä»£ç å‡ºé”™äº†ï¼Œå¼‚å¸¸\n\nçº¿ç¨‹é€€å‡ºçš„æƒ…å†µä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†çº¿ç¨‹å¦‚æœå› ä¸ºæŸäº›å¼‚å¸¸é€€å‡ºï¼Œè¿›ç¨‹ä¹Ÿä¼šåŒæ­¥é€€å‡ºï¼\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testthis is main:: 13845Floating point exception[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nç”±æ­¤å¯è§ï¼Œçº¿ç¨‹å¼‚å¸¸ = è¿›ç¨‹å¼‚å¸¸\nè¿™é‡Œä¹Ÿå°±æ¶‰åŠåˆ°1.5.1ä¸­æåˆ°çš„çº¿ç¨‹å¥å£®æ€§é—®é¢˜ï¼Œçº¿ç¨‹çš„å¼‚å¸¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹çš„è¿è¡Œï¼Œä¼šå¯¼è‡´è¿›ç¨‹æ•´ä½“å¼‚å¸¸é€€å‡ºã€‚\næ‰€ä»¥åœ¨joinç­‰å¾…çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘çº¿ç¨‹æ­£å¸¸é€€å‡ºçš„æƒ…å†µï¼›\n\nå¼‚å¸¸é€€å‡ºçš„æ—¶å€™ææ€•ä¹Ÿç­‰ä¸äº†ğŸ˜‚å› ä¸ºè¿›ç¨‹ä¹ŸæŒ‚äº†\n\n2.3.5 exitä»»ä½•ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œexit()å‡½æ•°ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹é€€å‡º\n\n2.4 pthread_detachç­‰å¾…æ˜¯æœ‰æ€§èƒ½æŸå¤±çš„ï¼é»˜è®¤åˆ›å»ºçš„è¿›ç¨‹æ˜¯joinableï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¢«ä¸»çº¿ç¨‹è¿›è¡Œpthread_joinç­‰å¾…çš„ï¼›\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è®©ä¸»çº¿ç¨‹ä¸ç®¡åˆ›å»ºå‡ºæ¥çš„å­çº¿ç¨‹ï¼Œä¹Ÿä¸ç”¨å»ç­‰å¾…å®ƒï¼Œç›¸å½“äºå–æ¶ˆäº†å®ƒçš„joinableå±æ€§ï¼›\nå°±å¥½æ¯”çˆ¶è¿›ç¨‹ä¸æƒ³ç®¡å­è¿›ç¨‹çš„æ—¶å€™ï¼Œå°†SIGCHLDè®¾ç½®ä¸ºSIG_IGN\n#include &lt;pthread.h&gt;int pthread_detach(pthread_t thread);//Compile and link with -pthread.\n\nä¸€ä¸ªçº¿ç¨‹æ˜¯å¦åº”è¯¥ç­‰å¾…ï¼Œå–å†³äºæ˜¯å¦éœ€è¦è·å–è¯¥çº¿ç¨‹çš„è¿”å›å€¼ï¼›å¦‚æœæ— é¡»è·å–è¿”å›å€¼ï¼Œåˆ™ä½¿ç”¨åˆ†ç¦»èƒ½æé«˜è¿è¡Œæ•ˆç‡\n\nå³ä¾¿çº¿ç¨‹æ‰€è¿è¡Œçš„å‡½æ•°returnæ˜¯æ— æ•ˆçš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨è¾“å‡ºå‹å‚æ•°æ¥è·å–è¿”å›å€¼\n\n2.4.1 å®æ“ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æŒ‡å®šçº¿ç¨‹çš„idå°±è¡Œäº†\nvoid test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    pthread_detach(t1);    pthread_detach(t2);&#125;\n\nè¿è¡Œä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯æˆ‘ä»¬å·²æ— æ³•è·å–åˆ°è¯¥çº¿ç¨‹çš„è¿”å›å€¼\n\n\n2.4.2 detachåjoinä½†å¦‚æœæˆ‘ä»¬åœ¨detachä¹‹ååˆè¿›è¡Œpthread_joinä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\nvoid* func3(void* arg)&#123;    pthread_detach(pthread_self());    int a = 7;    while(a--)    &#123;        printf(&quot;func thread:%s - global:%d - &amp;global:%p\\n&quot;,(char*)arg,global,&amp;global);        global++;        sleep(1);    &#125;    cout &lt;&lt; &quot;func exit&quot; &lt;&lt; endl;    return (void*)10;&#125;void test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    void* r1=nullptr;    void* r2=nullptr;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;\n\nè¯¶ï¼Œè¿™ä¸è¿˜æ˜¯è·å–åˆ°äº†è¿”å›å€¼å—ï¼Ÿè¿™ä¹ˆè¯´ï¼Œä»–è¿™ä¸ªdetachå²‚ä¸æ˜¯æ²¡ç”¨ï¼Ÿ\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:103 - &amp;global:0x7fb5648b06fcfunc thread:2 - global:103 - &amp;global:0x7fb5640af6fcfunc thread:1 - global:104 - &amp;global:0x7fb5648b06fcfunc thread:2 - global:104 - &amp;global:0x7fb5640af6fcfunc exitfunc exitretval 1 : 10retval 2 : 10[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬createä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œå®ƒä¼šå…ˆå»æ‰§è¡Œçº¿ç¨‹åˆ›å»ºçš„ç›¸å…³ä»£ç ï¼Œæ­¤æ—¶mainåˆç›´æ¥å»æ‰§è¡Œåé¢çš„ä»£ç äº†ï¼›æ­¤æ—¶pthread_joinçš„è°ƒç”¨æ˜¯æˆåŠŸçš„ï¼Œå› ä¸ºçº¿ç¨‹è‡ªå·±çš„detachä»£ç è¿˜æ²¡æœ‰è¢«æ‰§è¡Œï¼\n\nè€Œå¦‚æœæˆ‘ä»¬åœ¨createä¹‹åï¼Œç­‰çº¿ç¨‹å¼€å§‹è¿è¡Œäº†åœ¨æ‰§è¡Œdetachï¼Œæ­¤æ—¶joinå°±ä¼šå¤±è´¥\nvoid test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    sleep(2);    pthread_detach(t1);    pthread_detach(t2);    sleep(1);    void* r1=nullptr;    void* r2=nullptr;    int ret = pthread_join(t1,&amp;r1);    cout &lt;&lt; ret &lt;&lt; &quot;:&quot; &lt;&lt; strerror(ret) &lt;&lt; endl;    ret = pthread_join(t2,&amp;r2);    cout &lt;&lt; ret &lt;&lt; &quot;:&quot; &lt;&lt; strerror(ret) &lt;&lt; endl;    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;    sleep(20);&#125;\n\næ‰“å°é”™è¯¯ç ä¹Ÿèƒ½çœ‹åˆ°ï¼Œç³»ç»Ÿæç¤ºæˆ‘ä»¬ç»™joinä¼ å…¥äº†ä¸€ä¸ªæ— æ•ˆçš„å‚æ•°ï¼Œçº¿ç¨‹ä¾æ—§åœ¨æ­£å¸¸è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:101 - &amp;global:0x7f2d439136fcfunc thread:2 - global:101 - &amp;global:0x7f2d431126fcfunc thread:2 - global:102 - &amp;global:0x7f2d431126fcfunc thread:1 - global:102 - &amp;global:0x7f2d439136fc22:Invalid argument22:Invalid argumentretval 1 : 0retval 2 : 0func thread:2 - global:103 - &amp;global:0x7f2d431126fcfunc thread:1 - global:103 - &amp;global:0x7f2d439136fc\n\næ‰€ä»¥æ­£ç¡®çš„åšæ³•ï¼Œåº”è¯¥æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­åˆ†ç¦»çº¿ç¨‹ï¼Œä¸è¦åœ¨çº¿ç¨‹è‡ªå·±çš„ä»£ç ä¸­æ‰§è¡Œdetachï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¸Šé¢çš„åˆ†ç¦»å¤±è´¥çš„æƒ…å†µ\n2.4.3 çº¿ç¨‹åˆ†ç¦»åï¼Œä¸»çº¿ç¨‹å…ˆé€€å‡ºå¦‚æœæ‰§è¡Œå®Œæ¯•pthread_detachåï¼Œä¸»çº¿ç¨‹æå‰é€€å‡ºäº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nvoid test5()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    sleep(1);    pthread_detach(t1);    pthread_detach(t2);    sleep(2);    cout &lt;&lt; &quot;main exit&quot; &lt;&lt; endl;&#125;\n\næ˜¾è€Œæ˜“è§ï¼Œçº¿ç¨‹ä¹Ÿè·Ÿç€ä¸€å¹¶é€€å‡ºäº†\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:100 - &amp;global:0x7f01cd49a6fcfunc thread:2 - global:100 - &amp;global:0x7f01ccc996fcfunc thread:2 - global:101 - &amp;global:0x7f01ccc996fcfunc thread:1 - global:101 - &amp;global:0x7f01cd49a6fcfunc thread:2 - global:102 - &amp;global:0x7f01ccc996fcfunc thread:1 - global:102 - &amp;global:0x7f01cd49a6fcmain exit[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nå› ä¸ºçº¿ç¨‹æ²¡æœ‰ç‹¬ç«‹æ€§ï¼Œå®Œå…¨å±äºè¿™ä¸ªè¿›ç¨‹ã€‚ä¸å¯èƒ½å‡ºç°ä½ å®¶æˆ¿å­å¡Œäº†ï¼Œä½ è‡ªå·±çš„æˆ¿é—´è¿˜åœ¨çš„æƒ…å†µğŸ˜‚\n\nè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±å›æ”¶äº†è¿™ä¸ªè¿›ç¨‹çš„ç¨‹åºåœ°å€ç©ºé—´ï¼Œè¿èµ„æºéƒ½è¢«é‡Šæ”¾äº†ï¼Œçº¿ç¨‹å°±æ²¡æœ‰åŠæ³•ç»§ç»­è¿è¡Œï¼Œè‡ªç„¶å°±é€€å‡ºäº†ã€‚\n\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œä¸€èˆ¬æˆ‘ä»¬åˆ†ç¦»çº¿ç¨‹çš„æ—¶å€™ï¼Œéƒ½å€¾å‘äºè®©ä¸»çº¿ç¨‹ä¿æŒåœ¨åå°è¿è¡Œï¼ˆå¸¸é©»å†…å­˜çš„ç¨‹åºï¼‰\n2.5 gettid&#x2F;syscallè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£ï¼Œä½†å®ƒå¹¶ä¸èƒ½ç›´æ¥è¿è¡Œ\nNAME       gettid - get thread identificationSYNOPSIS       #include &lt;sys/types.h&gt;       pid_t gettid(void);       Note:  There  is  no  glibc wrapper for this system call; see       NOTES.\n\næˆ‘ä»¬éœ€è¦ç”¨syscallå‡½æ•°æ¥è°ƒç”¨è¯¥æ¥å£ï¼Œè¿™ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°syscallå‡½æ•°\n#define _GNU_SOURCE         /* See feature_test_macros(7) */#include &lt;unistd.h&gt;#include &lt;sys/syscall.h&gt;   /* For SYS_xxx definitions */int syscall(int number, ...);\n\nåœ¨syscallçš„manæ‰‹å†Œä¸­ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°è·å–çº¿ç¨‹idç›¸å…³çš„ç¤ºä¾‹\n//EXAMPLE#define _GNU_SOURCE#include &lt;unistd.h&gt;#include &lt;sys/syscall.h&gt;#include &lt;sys/types.h&gt;int main(int argc, char *argv[])&#123;    pid_t tid;    tid = syscall(SYS_gettid);    tid = syscall(SYS_tgkill, getpid(), tid);&#125;\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\nvoid* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; &quot; tid: &quot; &lt;&lt; syscall(SYS_gettid) &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    pthread_exit((void*)10);&#125;void test1()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func2,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);       while(1)    &#123;        printf(&quot;tis is main - pid:%d - tid:%d\\n&quot;,getpid(),syscall(SYS_gettid));        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;\n\nè¿è¡Œå¯ä»¥çœ‹åˆ°è¿›ç¨‹æ‰“å°å‡ºäº†ç›¸åŒçš„PIDå’Œä¸åŒçš„TIDï¼Œå…¶TIDå¯¹åº”çš„å°±æ˜¯ps -aLä¸­æ˜¾ç¤ºçš„LWPç¼–å·\n\n3.ç›¸å…³æ¦‚å¿µ3.1 çº¿ç¨‹idæ˜¯ä»€ä¹ˆï¼Ÿå‰é¢æåˆ°è¿‡ï¼Œpthread_tæ˜¯çº¿ç¨‹ç‹¬ç«‹çš„idï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— ç¬¦å·é•¿æ•´å½¢ï¼Œæ‰“å°å‡ºæ¥åï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ã€‚è¿™ä¸ªæ•°å­—æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å«ä¹‰å—ï¼Ÿ\nå…ˆæ¥å›é¡¾ä¸€ä¸‹çº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼š\n\nçº¿ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ‰§è¡Œæµ\nçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿè‡ªå·±çš„ä¸´æ—¶æ•°æ®\nçº¿ç¨‹è°ƒç”¨å‡½æ•°çš„å‹æ ˆå‡ºæ ˆæ“ä½œï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç»“æ„\n\nå› æ­¤ï¼Œæ—¢ç„¶æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ ˆç»“æ„ï¼Œå…¶å°±éœ€è¦æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥æŒ‡å‘è¿™ä¸ªæ ˆç»“æ„ï¼Œæ–¹ä¾¿ç¨‹åºè¿è¡Œçš„æ—¶å€™è¿›è¡Œè°ƒç”¨ï¼\næ‰€ä»¥ï¼Œpthread_tæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåœ°å€ï¼å…¶æŒ‡å‘çš„å°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„æ§åˆ¶å—ï¼Œå…¶å†…éƒ¨åŒ…å«äº†è¿™ä¸ªçº¿ç¨‹çš„ç‹¬ç«‹æ ˆç»“æ„ã€‚\n//printf(&quot;0x%x  0x%x\\n&quot;,t1,t2);0x393d0700  0x38bcf700 //æ‰“å°å‡ºæ¥çš„ç»“æœä¹Ÿå¾ˆåƒåœ°å€\n\n3.2 pthreadåº“pthreadåº“å¹¶ä¸æ˜¯ä¸€ä¸ªå†…æ ¸çº§çš„æ¥å£åº“ï¼Œå…¶å®é™…ä¸Šæ˜¯å°è£…äº†ç³»ç»Ÿçš„clone/vforkç­‰æ¥å£ï¼Œä»è€Œä¸ºæˆ‘ä»¬æä¾›çš„ç”¨æˆ·çº§çš„çº¿ç¨‹åº“ã€‚\nä½¿ç”¨pthreadåº“åˆ›å»ºçš„è¿›ç¨‹ï¼Œå’Œå†…æ ¸ä¸­çš„LWPæ˜¯1:1çš„\n\npthreadæ˜¯ä¸€ä¸ªåŠ¨æ€åº“ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦åŠ ä¸Šé“¾æ¥é€‰é¡¹\ng++ test.cpp -o test -lpthread\n\nåœ¨æˆ‘çš„ åŠ¨é™æ€åº“ çš„åšå®¢ä¸­æœ‰è®²è¿°è¿‡ï¼ŒåŠ¨æ€åº“æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€é“¾æ¥çš„ï¼Œå…¶ä¼šå°†åº“ä¸­çš„ä»£ç æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´çš„å…±äº«åŒºï¼Œä»è€Œè°ƒç”¨åŠ¨æ€åº“ä¸­çš„ä»£ç \n\nä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨pthead_createçš„æ—¶å€™ï¼Œè¿›ç¨‹ä¼šè·³åˆ°å…±äº«åŒºä¸­ï¼Œæ‰§è¡ŒåŠ¨æ€åº“ä¸­çš„ä»£ç ï¼Œåˆ›å»ºæˆåŠŸåè¿”å›è‡ªå·±çš„ä»£ç åŒºï¼Œå®Œæˆä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»º\n\nè€Œçº¿ç¨‹æ‰€ç”¨çš„ç‹¬ç«‹æ ˆï¼Œä¹Ÿæ˜¯pthreadåº“å¸®æˆ‘ä»¬ç®¡ç†çš„ã€‚å› ä¸ºæœ‰å…±äº«åŒºçš„å­˜åœ¨ï¼Œæˆ‘ä»¬èƒ½é€šè¿‡pthread_tç›´æ¥è®¿é—®åˆ°åŠ¨æ€åº“ä¸­ç®¡ç†çš„çº¿ç¨‹çš„æ§åˆ¶æ¨¡å—ï¼Œä»è€Œå®Œæˆçº¿ç¨‹çš„å‹æ ˆã€å‡ºæ ˆç­‰ç­‰æ“ä½œ\n\nä¸‹ä¸ºlinuxçš„pthreadtypes.hä¸­çš„éƒ¨åˆ†å†…å®¹\n# define __SIZEOF_PTHREAD_ATTR_T 36typedef unsigned long int pthread_t;union pthread_attr_t&#123;  char __size[__SIZEOF_PTHREAD_ATTR_T];  long int __align;&#125;;#ifndef __have_pthread_attr_ttypedef union pthread_attr_t pthread_attr_t;# define __have_pthread_attr_t\t1#endif\n\n3.3 çº¿ç¨‹çš„å±€éƒ¨å­˜å‚¨å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæˆ‘ä»¬æƒ³è®©åˆ›å»ºå‡ºæ¥çš„æ¯ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½èƒ½ç‹¬ç«‹çš„ä½¿ç”¨è¿™ä¸ªå…¨å±€å˜é‡ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°çº¿ç¨‹çš„å±€éƒ¨å­˜å‚¨\nint global = 10;//å…¨å±€å˜é‡void* func3(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func thread &quot; &lt;&lt; (char*)arg &lt;&lt;  &quot; - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func exit&quot; &lt;&lt; endl;&#125;void test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;\n\næ‰§è¡Œï¼Œä¸ç®¡æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œéƒ½æ‰“å°çš„æ˜¯ç›¸åŒçš„å€¼å’Œåœ°å€\n\nå¦‚æœåœ¨æ‰§è¡Œçš„å‡½æ•°func3ä¸­æ·»åŠ ä¸€ä¸ªglobal++ï¼Œåˆ™èƒ½è§‚å¯Ÿåˆ°æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å…¬ç”¨çš„ä¸€ä¸ªå˜é‡ï¼Œè¿™é‡Œçš„+æ˜¯åŒæ­¥çš„ã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³è®©int globalå˜æˆå±€éƒ¨å˜é‡ï¼Œåˆ™éœ€è¦åœ¨å®ƒä¹‹å‰åŠ ä¸Šä¸€ä¸ª__thread\n__thread int global = 100;//å¯ä»¥è®©çº¿ç¨‹ç‹¬ç«‹ä½¿ç”¨çš„å…¨å±€å˜é‡\n\næ­¤æ—¶å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªçº¿ç¨‹å’Œä¸»çº¿ç¨‹æ‰“å°çš„globalå˜é‡åœ°å€ä¸åŒï¼Œä»–ä»¬çš„++æ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œå˜é‡çš„å€¼ä¹Ÿæ˜¯ç‹¬ç«‹çš„\n\nè¿™å°±å®ç°äº†å°†æŸä¸€ä¸ªå˜é‡åˆ’åˆ†ç»™çº¿ç¨‹è¿›è¡Œå±€éƒ¨å­˜å‚¨\n4.çº¿ç¨‹äº’æ–¥é—®é¢˜4.1 ä¸´ç•Œèµ„æºåœ¨å…ˆå‰å…±äº«å†…å­˜ ä¿¡å·é‡çš„åšå®¢ä¸­ï¼Œå·²ç»æ¶‰åŠåˆ°äº†è¿™éƒ¨åˆ†çš„å†…å®¹ï¼›å³å…³äºæ“ä½œåŸå­æ€§å’Œè®¿é—®ä¸´ç•Œèµ„æº&#x2F;ä¸´ç•ŒåŒºçš„ç›¸å…³é—®é¢˜ã€‚\n\nèƒ½è¢«å¤šä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹çœ‹åˆ°çš„èµ„æºï¼Œè¢«ç§°ä¸ºä¸´ç•Œèµ„æº\nè¿›ç¨‹&#x2F;çº¿ç¨‹è®¿é—®ä¸´ç•Œèµ„æºçš„ä»£ç ï¼Œè¢«ç§°ä¸ºä¸´ç•ŒåŒº\n\nåœ¨çº¿ç¨‹ä¸­ï¼ŒåŒæ ·å­˜åœ¨è®¿é—®ä¸´ç•Œèµ„æºè€Œå¯¼è‡´çš„å†²çªï¼š\n\nçº¿ç¨‹Aå¯¹ä¸€ä¸ªå…¨å±€å˜é‡valè¿›è¡Œäº†-1æ“ä½œï¼Œå½“æ“ä½œæ‰§è¡Œåˆ°æ”¾å›å†…å­˜é‚£ä¸€æ­¥çš„æ—¶å€™ï¼Œå‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹Bå¼€å§‹å·¥ä½œ\nçº¿ç¨‹BåŒæ ·è®¿é—®äº†è¯¥å…¨å±€å˜é‡valï¼Œå¯¹å®ƒè¿›è¡Œäº†-10æ“ä½œï¼Œæ­¤æ—¶å› ä¸ºçº¿ç¨‹Açš„-1æ“ä½œå°šæœªå†™å›å†…å­˜ï¼Œå…¨å±€å˜é‡valè¿˜æ˜¯ä¿æŒåˆå€¼ã€‚çº¿ç¨‹bå°†-10ä¹‹åçš„å…¨å±€å˜é‡valå†™å›äº†å†…å­˜\nåˆå‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œè·³è½¬åˆ°çº¿ç¨‹Aåœæ­¢çš„çº¿ç¨‹ä¸Šä¸‹æ–‡æ•°æ®ä¸­å¼€å§‹æ‰§è¡Œï¼Œå°†å…¨å±€å˜é‡å†™å…¥å†…å­˜\nè¿™æ—¶å€™ï¼Œçº¿ç¨‹Bçš„-10æ“ä½œå°±è¢«Açš„å†™å…¥è¦†ç›–äº†ï¼\n\nä¸¾ä¸ªå®é™…ç‚¹çš„ä¾‹å­ï¼Œä»¥100ä¸ºå…¨å±€å˜é‡çš„åˆå§‹å€¼\n\nçº¿ç¨‹Aæ‰§è¡Œ-1ï¼Œ100-1=99ï¼Œè¿˜æœªå†™å…¥å†…å­˜æ—¶ï¼Œå°±çº¿ç¨‹åˆ‡æ¢\nçº¿ç¨‹Bå–åˆ°çš„å…¨å±€å˜é‡è¿˜æ˜¯100ï¼Œå¯¹å…¶æ‰§è¡Œ-10ï¼Œå¹¶å†™å…¥å†…å­˜ï¼Œ æ­¤æ—¶å…¨å±€å˜é‡ä¸º90\nè¿”å›çº¿ç¨‹Aç»§ç»­æ‰§è¡Œå†™å…¥å†…å­˜æ“ä½œï¼Œå…¨å±€å˜é‡åˆè¢«å¤å†™æˆäº†99ï¼›ç›¸å½“äºBçš„æ“ä½œæ˜¯æ— æ•ˆçš„\n\nè¿™ç§æ¡ä»¶ä¸‹ä¼šäº§ç”Ÿå¾ˆå¤šé—®é¢˜ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼\n4.2 åŸå­&#x2F;äº’æ–¥æ€§è¿™ç§æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿è¯è®¿é—®è¯¥å…¨å±€å˜é‡çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œä¸èƒ½å‡ºç°ä¸­é—´çŠ¶æ€ï¼›\nä¹Ÿåº”è¯¥æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä»½èµ„æºçš„æƒ…å†µ\n\näº’æ–¥æ€§ï¼šä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµåœ¨è®¿é—®æŸä¸€ä»½èµ„æº\n\n\nä¸ºäº†è¾¾æˆè¿™ä¸€ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™çº¿ç¨‹çš„æ“ä½œåŠ é”\n4.3 çº¿ç¨‹åŠ é”çº¿ç¨‹åŠ é”æ¶‰åŠåˆ°å‡ ä¸ªæ“ä½œï¼š\n\næä¾›ä¸€æŠŠé”\nåœ¨éœ€è¦ç»´æŒåŸå­æ€§ï¼ˆä¸´ç•ŒåŒºï¼‰çš„ä½ç½®åŠ ä¸Šé”\nè®¿é—®ä¸´ç•ŒåŒºç»“æŸåï¼Œæ‰“å¼€é”\nè¿›ç¨‹ç»“æŸåï¼ŒæŠŠé”ä¸¢äº†\n\næ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€ä¸€è§£å†³è¿™äº›é—®é¢˜\n4.3.1 pthread_mutex_initpthreadåœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°äº†è¿™ç§é—®é¢˜ï¼Œæ‰€ä»¥å®ƒä¾¿ç»™æˆ‘ä»¬æä¾›äº†åŠ é”ç›¸å…³çš„æ“ä½œ\n#include &lt;pthread.h&gt;int pthread_mutex_destroy(pthread_mutex_t *mutex);int pthread_mutex_init(pthread_mutex_t *restrict mutex,                       const pthread_mutexattr_t *restrict attr);pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€æŠŠé”ï¼Œç±»å‹æ˜¯pthread_mutex_t\n\nå¦‚æœæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€æŠŠå…¨å±€å˜é‡çš„é”ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨PTHREAD_MUTEX_INITIALIZERç»™è¿™æŠŠé”åˆå§‹åŒ–\nå¦‚æœæ˜¯ä¸€æŠŠå±€éƒ¨çš„é”ï¼Œåˆ™ä½¿ç”¨å‡½æ•°pthread_mutex_initè¿›è¡Œåˆå§‹åŒ–\n\nåˆå§‹åŒ–çš„æ–¹æ³•å¾ˆç®€å•ï¼Œä¼ å…¥é”å’Œå¯¹åº”çš„å±æ€§å°±è¡Œã€‚æ­¤æ—¶æˆ‘ä»¬å¿½ç•¥å±æ€§é—®é¢˜ï¼Œè®¾ç½®ä¸ºNULLä½¿ç”¨é»˜è®¤å±æ€§\n//ä½¿ç”¨é»˜è®¤å±æ€§çš„å…¨å±€é”oré™æ€staticé”//æ— é¡»è°ƒç”¨å‡½æ•°åˆå§‹åŒ–ï¼Œå¯ä»¥ç›´æ¥ç”¨pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;//ä½¿ç”¨å‡½æ•°è¿›è¡Œåˆå§‹åŒ–å±€éƒ¨çš„é”ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥åˆå§‹åŒ–å…¨å±€é”ï¼‰pthread_mutex_t mutex;//å®šä¹‰ä¸€æŠŠé”pthread_mutex_init(&amp;mutex, nullptr);//åˆå§‹åŒ–pthread_mutex_destroy(&amp;mutex);//é”€æ¯\n\n4.3.2 åŠ é”&#x2F;è§£é”æœ‰äº†é”ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨éœ€è¦çš„ä½ç½®åŠ ä¸Šè¿™æŠŠé”\n#include &lt;pthread.h&gt;int pthread_mutex_lock(pthread_mutex_t *mutex);int pthread_mutex_trylock(pthread_mutex_t *mutex);int pthread_mutex_unlock(pthread_mutex_t *mutex);\n\nå…¶ä¸­lockæ˜¯é˜»å¡å¼åŠ é”ï¼Œå¦‚æœä½ è°ƒç”¨è¿™ä¸ªæ¥å£çš„æ—¶å€™ï¼Œé”æ­£åœ¨è¢«åˆ«äººä½¿ç”¨ï¼Œåˆ™ä¼šåœ¨è¿™é‡Œç­‰å¾…ï¼›trylockæ˜¯éé˜»å¡åŠ é”ï¼Œå¦‚æœä½ è°ƒç”¨è¯¥æ¥å£æ—¶é”æ­£è¢«ä½¿ç”¨ï¼Œåˆ™ç›´æ¥returnè¿”å›\nThe pthread_mutex_trylock() function shall be equivalent to pthread_mutex_lock(), except that if the mutex object referenced  by  mutex  is  currently locked (by any thread, including the current thread), the call shall return immediately. \n\nåŠ äº†é”ä¹‹åï¼Œåœ¨éœ€è¦çš„ä½ç½®unlockè§£é”ï¼›\n\nåŠ é”å’Œè§£é”æ“ä½œæœ¬èº«æ˜¯åŸå­çš„ï¼Œä¸ä¼šå‡ºç°å†²çª\nåŠ äº†é”ä¹‹åï¼Œå¯ä»¥ç†è§£ä¸ºåŠ é”è§£é”æ“ä½œä¸­é—´çš„ä»£ç ä¹Ÿæ˜¯åŸå­æ€§çš„ï¼Œå¿…é¡»è¦è¿è¡Œåˆ°è§£é”ä½ç½®æ‰èƒ½è®©å¦å¤–ä¸€ä¸ªçº¿ç¨‹&#x2F;è¿›ç¨‹æ‰§è¡Œè¿™é‡Œçš„ä»£ç \nåŠ é”çš„æœ¬è´¨æ˜¯è®©çº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ä¸²è¡ŒåŒ–\n\n4.3.3 åŠ é”çš„æ³¨æ„äº‹é¡¹\nåªå¯¹ä¸´ç•ŒåŒºåŠ é”ï¼›é”ä¿æŠ¤çš„å°±æ˜¯ä¸´ç•ŒåŒº\nåŠ é”çš„ç²’åº¦è¶Šç»†è¶Šå¥½ï¼ˆå³åŠ é”çš„åŒºåŸŸè¶Šå°è¶Šå¥½ï¼‰\nåŠ é”æ˜¯ç¼–ç¨‹çš„ä¸€ç§è§„èŒƒï¼›åœ¨å®é™…é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬è¦ä¿è¯è®¿é—®æŸä¸€ä¸´ç•Œèµ„æºçš„æ‰€æœ‰æ“ä½œéƒ½è¦åŠ ä¸Šé”ã€‚ä¸èƒ½å‡ºç°å‡½æ•°AåŠ é”äº†ï¼Œä½†æ˜¯Bæ²¡æœ‰åŠ é”çš„æƒ…å†µï¼ˆè¿™æ ·ä¼šå¯¼è‡´Açš„åŠ é”ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼‰\n\n4.4 ç¤ºä¾‹-å€’æ°´é—®é¢˜\nä»¥å€’æ°´ä¸ºç¤ºä¾‹ï¼Œå‡è®¾æ¯å­å®¹é‡ä¸º10000ï¼Œè£…æ»¡äº†æ°´å°±ä¼šæº¢å‡ºã€‚æˆ‘ä»¬ä½¿ç”¨å¤šä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªæ¯å­åŠ æ°´ï¼Œç›´åˆ°æ»¡äº†ä¹‹åçº¿ç¨‹é€€å‡º\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;//ä¸´ç•Œèµ„æºint water = 0;//å…¨å±€å˜é‡int cup = 10000;//æ¯å­çš„å®¹é‡void* func(void* arg)&#123;    while(1)    &#123;        if(water&lt;cup)//ä¸´ç•ŒåŒº        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº† &quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;int main()&#123;    pthread_t t1,t2,t3,t4;//åˆ›å»º4ä¸ªçº¿ç¨‹    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    pthread_create(&amp;t4,nullptr,func,(void*)&quot;t4&quot;);    //ç›´æ¥åˆ†ç¦»çº¿ç¨‹    pthread_detach(t1);    pthread_detach(t2);    pthread_detach(t3);    pthread_detach(t4);    while(1)    &#123;        ;//å•¥éƒ½ä¸å¹²    &#125;    return 0;&#125;\n\nè¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼Œæ˜æ˜æ°´å·²ç»æ»¡äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰éƒ¨åˆ†çº¿ç¨‹æŠ¥å‘Šæ°´è¿˜æ²¡æœ‰æ»¡ï¼Œä¸”æ•°å­—æœ‰å¾ˆä¸¥é‡çš„åå·®\nt3 æ°´æ²¡æœ‰æ»¡ï¼š9993t3 æ°´æ²¡æœ‰æ»¡ï¼š9994t3 æ°´æ²¡æœ‰æ»¡ï¼š9995t3 æ°´æ²¡æœ‰æ»¡ï¼š9996t3 æ°´æ²¡æœ‰æ»¡ï¼š9997t3 æ°´æ²¡æœ‰æ»¡ï¼š9998t3 æ°´æ²¡æœ‰æ»¡ï¼š9999t3 æ°´å·²ç»æ»¡äº†t3 çº¿ç¨‹é€€å‡º æ°´æ²¡æœ‰æ»¡ï¼š2723t4 æ°´å·²ç»æ»¡äº†t4 çº¿ç¨‹é€€å‡º0t2 æ°´å·²ç»æ»¡äº†t2 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š9668t1 æ°´å·²ç»æ»¡äº†t1 çº¿ç¨‹é€€å‡º\n\nå¤šè¿è¡Œå‡ æ¬¡ï¼Œä¹Ÿèƒ½å‘ç°ç›¸åŒçš„é—®é¢˜\nt2 æ°´æ²¡æœ‰æ»¡ï¼š9997t2 æ°´æ²¡æœ‰æ»¡ï¼š9998t2 æ°´æ²¡æœ‰æ»¡ï¼š9999t2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡ºt4 æ°´æ²¡æœ‰æ»¡ï¼š1889t4 æ°´å·²ç»æ»¡äº† 10001t4 çº¿ç¨‹é€€å‡ºt3 æ°´æ²¡æœ‰æ»¡ï¼š0t3 æ°´å·²ç»æ»¡äº† 10002t3 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š0t1 æ°´å·²ç»æ»¡äº† 10003t1 çº¿ç¨‹é€€å‡º\n\n4.4.1 åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Ÿé™¤äº†åå·®å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå¾€å‰ç¿»æ‰“å°è®°å½•ï¼Œä¼šå‘ç°ä¸€ç›´éƒ½æ˜¯æŸä¸€ä¸ªçº¿ç¨‹åœ¨å€’æ°´ï¼Œå…¶ä»–çº¿ç¨‹ä¼¼ä¹å•¥äº‹æ²¡æœ‰å¹²ï¼Ÿ\nt3 æ°´æ²¡æœ‰æ»¡ï¼š9786t3 æ°´æ²¡æœ‰æ»¡ï¼š9787t3 æ°´æ²¡æœ‰æ»¡ï¼š9788t3 æ°´æ²¡æœ‰æ»¡ï¼š9789t3 æ°´æ²¡æœ‰æ»¡ï¼š9790\n\nè¿™æ˜¯å› ä¸ºå½“è¿è¡Œt3çš„æ—¶å€™ï¼Œt3åœ¨whileå¾ªç¯ä¸­ç»§ç»­è¿è¡Œçš„æ¶ˆè€—ï¼Œå°äºåˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹çš„æ¶ˆè€—ã€‚æ‰€ä»¥æ§åˆ¶å—å°±è®©t3ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å®ƒbreaké€€å‡ºå¾ªç¯\næ­¤æ—¶æˆ‘ä»¬åªéœ€è¦åŠ ä¸Šä¸€ä¸ªusleepï¼Œå¢åŠ æ¯ä¸€ä¸ªwhileå¾ªç¯ä¸­éœ€è¦å¤„ç†çš„è´Ÿæ‹…ï¼Œå°±èƒ½è®©æ‰€æœ‰çº¿ç¨‹éƒ½æ¥å€’æ°´\n//usleepåŠŸèƒ½æŠŠè¿›ç¨‹æŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œ å•ä½æ˜¯å¾®ç§’ï¼ˆç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ï¼‰#include &lt;unistd.h&gt;int usleep(useconds_t usec);\n\nè¿™æ˜¯å› ä¸ºçº¿ç¨‹åˆ‡æ¢åŒæ ·ä¹Ÿæ˜¯æ—¶é—´ç‰‡åˆ°äº†ï¼Œä»å†…æ ¸è¿”å›ç”¨æˆ·æ€çš„æ—¶å€™åšæ£€æµ‹ï¼Œåˆ‡æ¢è‡³å…¶ä»–çº¿ç¨‹ã€‚\næ·»åŠ usleepèƒ½åˆ›é€ æ›´å¤šå†…æ ¸&#x2F;ç”¨æˆ·çš„ä¸­é—´æ€ï¼Œä»è€Œå¢å¤šåˆ‡æ¢çº¿ç¨‹çš„æ¬¡æ•°\nvoid* func(void* arg)&#123;    while(1)    &#123;        if(water&lt;cup)        &#123;            usleep(100);//ä¼‘æ¯100å¾®ç§’            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº†&quot; &lt;&lt; &quot;\\n&quot;;            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;\n\nä½†æ˜¯è¿™è¿˜æ˜¯æ²¡æœ‰è§£å†³æ•°å­—å‡ºé”™çš„é—®é¢˜\nt4 æ°´æ²¡æœ‰æ»¡ï¼š9995t3 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t2 æ°´æ²¡æœ‰æ»¡ï¼š9998t4 æ°´æ²¡æœ‰æ»¡ï¼š9999t4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡ºt3 æ°´æ²¡æœ‰æ»¡ï¼š10000t3 æ°´å·²ç»æ»¡äº† 10001t3 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š10001t1 æ°´å·²ç»æ»¡äº† 10002t1 çº¿ç¨‹é€€å‡ºt2 æ°´æ²¡æœ‰æ»¡ï¼š10002t2 æ°´å·²ç»æ»¡äº† 10003t2 çº¿ç¨‹é€€å‡º\n\n4.4.2 åŠ é”-é—®é¢˜è§£å†³è¿™æ—¶å€™å°±éœ€è¦è¯·å‡ºæˆ‘ä»¬çš„é”äº†\n//çœç•¥å¤´æ–‡ä»¶int water = 0;//å…¨å±€å˜é‡int cup = 10000;//æ¯å­çš„å®¹é‡pthread_mutex_t mutex;void* func(void* arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;mutex);        if(water&lt;cup)        &#123;            usleep(100);            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;            pthread_mutex_unlock(&amp;mutex);            usleep(100);//å‡è£…å–æ°´        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº† &quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            pthread_mutex_unlock(&amp;mutex);            //æ­¤å¤„ä¹Ÿéœ€è¦åŠ é”ï¼Œå¦åˆ™breakå‡ºå»ä¹‹åå…¶ä»–çº¿ç¨‹ä¼šå› ä¸ºæ²¡æœ‰è§£é”è€ŒæŒ‚èµ·            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;// å¦‚æœé‡åˆ°2å·ä¿¡å·ï¼Œå°±åœ¨é”€æ¯é”åé€€å‡ºè¿›ç¨‹void des(int signo)&#123;    //é”€æ¯é”    pthread_mutex_destroy(&amp;mutex);    cout &lt;&lt; &quot;pthread_mutex_destroy, exit&quot; &lt;&lt; endl;    exit(0);&#125;int main()&#123;    signal(SIGINT,des);//è‡ªå®šä¹‰æ•æ‰2å·ä¿¡å·    pthread_mutex_init(&amp;mutex,nullptr);//åˆå§‹åŒ–é”    pthread_t t1,t2,t3,t4;//åˆ›å»º4ä¸ªçº¿ç¨‹    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    pthread_create(&amp;t4,nullptr,func,(void*)&quot;t4&quot;);    //ç›´æ¥åˆ†ç¦»çº¿ç¨‹    pthread_detach(t1);    pthread_detach(t2);    pthread_detach(t3);    pthread_detach(t4);    while(1)    &#123;        ;//å•¥éƒ½ä¸å¹²    &#125;    return 0;&#125;\n\nè¿è¡Œå¯è§ï¼Œæ•°å­—é”™è¯¯é—®é¢˜å°±æ²¡æœ‰å‡ºç°äº†ï¼›ä½†åˆå‡ºç°äº†åªæœ‰ä¸€ä¸ªçº¿ç¨‹å·¥ä½œçš„é—®é¢˜\nt1 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t1 æ°´æ²¡æœ‰æ»¡ï¼š9998t1 æ°´æ²¡æœ‰æ»¡ï¼š9999t1 æ°´å·²ç»æ»¡äº† 10000t1 çº¿ç¨‹é€€å‡ºt3 æ°´å·²ç»æ»¡äº† 10000t3 çº¿ç¨‹é€€å‡ºt4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡ºt2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡º^Cpthread_mutex_destroy, exit\n\nè¿™è¿˜æ˜¯å› ä¸ºçº¿ç¨‹åˆ‡æ¢çš„æ•ˆç‡é—®é¢˜ï¼›ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºå…¶å®ƒçº¿ç¨‹ç”³è¯·é”çš„æ—¶å€™ï¼Œå‘ç°t1åœ¨ç”¨ï¼Œå°±è¿›è¡Œäº†é˜»å¡ç­‰å¾…è€ŒæŒ‚èµ·\n\nåªéœ€è¦åœ¨è§£é”ä¹‹åæ·»åŠ ä¸€ä¸ªusleepæ¨¡æ‹Ÿå…¶ä»–å·¥ä½œï¼Œå°±èƒ½è®©æ‰€æœ‰çº¿ç¨‹éƒ½è·‘èµ·æ¥\npthread_mutex_lock(&amp;mutex);if(water&lt;cup)&#123;    usleep(100);    cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;    water++;    pthread_mutex_unlock(&amp;mutex);    usleep(100);//å‡è£…å–æ°´&#125;\n\næ²¡æœ‰å‡ºç°æ•°æ®é”™è¯¯ï¼ŒåŠ é”çš„ç›®çš„æˆåŠŸè¾¾åˆ°ï¼\nt1 æ°´æ²¡æœ‰æ»¡ï¼š9993t3 æ°´æ²¡æœ‰æ»¡ï¼š9994t4 æ°´æ²¡æœ‰æ»¡ï¼š9995t2 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t3 æ°´æ²¡æœ‰æ»¡ï¼š9998t4 æ°´æ²¡æœ‰æ»¡ï¼š9999t2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡ºt1 æ°´å·²ç»æ»¡äº† 10000t1 çº¿ç¨‹é€€å‡ºt3 æ°´å·²ç»æ»¡äº† 10000t3 çº¿ç¨‹é€€å‡ºt4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡º^Cpthread_mutex_destroy, exit\n\n4.5 åŠ é”çš„è¿›ä¸€æ­¥è§£é‡Šåœ¨è¿™ä¸ªä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»™ä¸­é—´çš„å‡ è¡Œä»£ç åŠ äº†é”ï¼›ä½†è¿™å¹¶ä¸æ„å‘³ç€æ‰§è¡Œä¸­é—´è¿™éƒ¨åˆ†ä»£ç çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢\npthread_mutex_lock(&amp;mutex);//åŠ é”if(water&lt;cup)&#123;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;    water++;&#125;pthread_mutex_unlock(&amp;mutex);//è§£é”\n\näº‹å®ä¸Šï¼Œä»£ç æ‰§è¡Œçš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯èƒ½å‘ç”Ÿè¿›ç¨‹&#x2F;çº¿ç¨‹çš„åˆ‡æ¢ã€‚ä½†å› ä¸ºæˆ‘ä»¬åŠ äº†é”ï¼Œåˆ‡æ¢çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹è¦æ¥è®¿é—®è¿™é‡Œçš„èµ„æºï¼Œå°±å¿…é¡»å…ˆç”³è¯·é”\næ­¤æ—¶é”åœ¨è¢«åˆ‡èµ°çš„è¿›çº¿ç¨‹æ‰‹ä¸Šï¼Œæ‰€ä»¥å…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®ä¸´ç•ŒåŒºçš„èµ„æºï¼Œä¹Ÿå°±ä¸ä¼šå‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚\n\n\næ¢è¨€ä¹‹ï¼Œåªè¦å¼ ä¸‰æ‹¿åˆ°äº†é”ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå°±ä¸æ‹…å¿ƒè‡ªå·±çš„å·¥ä½œä¼šè¢«åˆ«äººè¦†ç›–çš„é—®é¢˜ï¼›\nè€Œå¯¹å…¶ä»–çº¿ç¨‹è€Œè¨€ï¼Œå¼ ä¸‰è®¿é—®ä¸´ç•ŒåŒºçš„å·¥ä½œï¼Œåªæœ‰è¿˜æ²¡è¿›å…¥ä¸´ç•ŒåŒºå’Œè®¿é—®å®Œæ¯•ä¸´ç•ŒåŒºä¸¤ç§çŠ¶æ€\n\nå› æ­¤ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯çº¿ç¨‹åˆ‡æ¢çš„æ•ˆç‡è¾ƒä½ï¼Œå…¶ä»–çº¿ç¨‹å‡ºç°äº†é˜»å¡ç­‰å¾…çš„æƒ…å†µï¼›ä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥è®©è®¿é—®ä¸´ç•ŒåŒºçš„æ“ä½œå¿«å»å¿«å›ï¼Œå°½é‡ä¸è¦åœ¨ä¸´ç•ŒåŒºé‡Œé¢å¹²å•¥è€—æ—¶çš„äº‹æƒ…\n4.5.1 åŠ é”åŸå­æ€§çš„ä¿è¯\nå¤‡æ³¨ï¼šè¿™éƒ¨åˆ†ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œè‹¥æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡ºï¼\n\né‚£ä¹ˆåŠ é”è¿™ä¸ªæ“ä½œï¼Œæ˜¯å¦‚ä½•ä¿è¯å…¶è‡ªèº«çš„åŸå­æ€§å‘¢ï¼Ÿåœ¨åŠ é”çš„é€”ä¸­ä¸ä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢å—ï¼Ÿ\n\næˆ‘æ‰¾åˆ°äº†ä¸€å¼ èƒ½å¤§æ¦‚è¯´æ˜æ±‡ç¼–åŠ é”è¿‡ç¨‹çš„å›¾ç‰‡ï¼Œå…¶ä¸­movbçš„æ“ä½œå°±æ˜¯å°†alå¯„å­˜å™¨å†™ä¸º0ï¼Œxchgbçš„æ“ä½œæ˜¯å°†alå¯„å­˜å™¨çš„å†…å®¹å’Œå†…å­˜ä¸­mutexé”çš„å€¼è¿›è¡Œäº¤æ¢\n\nå¼€å§‹çš„æ—¶å€™ï¼Œé”è¢«æ­£å¸¸åˆå§‹åŒ–ï¼Œå†…å­˜ä¸­mutexçš„å€¼ä¸º1ï¼ˆé”åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼‰\nçº¿ç¨‹Aå¼€å§‹åŠ é”ï¼Œalå¯„å­˜å™¨å’Œmutexçš„å€¼å‘ç”Ÿäº¤æ¢ï¼Œæ­¤æ—¶å†…å­˜ä¸­çš„mutexä¸º0ï¼Œalä¸º1\nåˆ¤æ–­alä¸ä¸º0ï¼Œä»£è¡¨è·å–é”æˆåŠŸï¼Œçº¿ç¨‹AåŠ é”æˆåŠŸ\nçº¿ç¨‹Bä¹Ÿæ¥ç”³è¯·é”äº†ï¼Œmovbå°†alå¯„å­˜å™¨å†™ä¸º0ï¼Œå†å’Œå†…å­˜ä¸­çš„mutexäº¤æ¢åï¼Œå‘ç°è¿˜æ˜¯0ï¼Œåˆ™ä»£è¡¨é”åœ¨åˆ«äººæ‰‹ä¸Šï¼Œæ­¤æ—¶å°±éœ€è¦æŒ‚èµ·ç­‰å¾…\n\nå‰é¢ä¸€ç›´å¼ºè°ƒï¼Œçº¿ç¨‹æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç»“æ„å’Œä¸Šä¸‹æ–‡æ•°æ®çš„ï¼Œåœ¨åŠ é”çš„è¿™éƒ¨åˆ†æ±‡ç¼–æ“ä½œä¸­ï¼ŒåŒæ ·å¯èƒ½ä¼šåœ¨ä»»ä½•åœ°æ–¹å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ã€‚åˆ‡æ¢çš„æ—¶å€™ï¼Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼ˆå›¾ä¸­å¯„å­˜å™¨çš„çŠ¶æ€ï¼‰ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œéšè¿™ä¸ªçº¿ç¨‹ä¸€èµ·è¢«åˆ‡æ¢èµ°\næ‰€ä»¥çº¿ç¨‹Aè¢«åˆ‡æ¢çš„æ—¶å€™ï¼Œå±äºå®ƒä¸Šä¸‹æ–‡ä¸­é‚£ä¸ªå€¼ä¸º1çš„alå¯„å­˜å™¨ä¹Ÿè¢«åˆ‡èµ°äº†ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œåˆ‡èµ°çš„æ˜¯æ•°æ®ï¼Œalå¯„å­˜å™¨æœ¬èº«ä½œä¸ºç¡¬ä»¶ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼‰\nç”±æ­¤çœ‹æ¥ï¼ŒçœŸæ­£è·å–é”çš„æ“ä½œï¼Œå…¶å®åªæœ‰xchgbä¸€æ¡äº¤æ¢æŒ‡ä»¤æ¥å®Œæˆï¼Œä¿è¯åŠ é”æ“ä½œåªç”±ä¸€æ¡æ±‡ç¼–è¯­å¥å®ç°ï¼Œå°±èƒ½ä¿è¯è¯¥æ“ä½œçš„åŸå­æ€§ï¼\nè§£é”çš„æ–¹æ³•å°±å¾ˆç®€å•äº†ï¼Œmovbå°†1å†™å›mutexå˜é‡å³å¯ï¼Œä¹Ÿæ˜¯ä¸€æ¡æ±‡ç¼–å®Œæˆï¼›è€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè§£é”æ˜¯ä¸ä¼šæœ‰æ‰§è¡Œæµå’Œä½ æŠ¢çš„ã€‚\n\nå…¶å®åŠ é”è¿œä¸æ­¢ä¸€ç§æ–¹æ³•ï¼Œé”çš„ç§ç±»æœ‰éå¸¸å¤šï¼Œè¿˜æœ‰æ€»çº¿é”ã€æ—‹è½¬é”ç­‰ç­‰ï¼Œæ¯ä¸€ä¸ªé”çš„å®ç°éƒ½ä¸å¤ªä¸€æ ·ï¼ä¸Šé¢æåˆ°çš„ä¸ºäº’æ–¥é”\n\n4.5.2 æ€»çº¿é”ç°åœ¨çš„CPUä¸€èˆ¬éƒ½æœ‰è‡ªå·±çš„å†…éƒ¨ç¼“å­˜ï¼Œæ ¹æ®ä¸€äº›è§„åˆ™å°†å†…å­˜ä¸­çš„æ•°æ®è¯»å–åˆ°å†…éƒ¨ç¼“å­˜ä¸­æ¥ï¼Œä»¥åŠ å¿«é¢‘ç¹è¯»å–çš„é€Ÿåº¦ã€‚ç°åœ¨æœåŠ¡å™¨é€šå¸¸æ˜¯å¤š CPUï¼Œæ›´æ™®éçš„æ˜¯ï¼Œæ¯å—CPUé‡Œæœ‰å¤šä¸ªå†…æ ¸ï¼Œè€Œæ¯ä¸ªå†…æ ¸éƒ½ç»´æŠ¤äº†è‡ªå·±çš„ç¼“å­˜ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¤šçº¿ç¨‹å¹¶å‘å°±ä¼šå­˜åœ¨ç¼“å­˜ä¸ä¸€è‡´æ€§ï¼Œè¿™ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ã€‚\n\næ€»çº¿é”å°±æ˜¯å°†cpuå’Œå†…å­˜ä¹‹é—´çš„é€šä¿¡é”ä½ï¼Œä½¿å¾—åœ¨é”å®šæœŸé—´ï¼Œå…¶ä»–cpuå¤„ç†å™¨ä¸èƒ½æ“ä½œå…¶ä»–å†…å­˜ä¸­æ•°æ®ï¼Œæ•…æ€»çº¿é”å¼€é”€æ¯”è¾ƒå¤§ï¼\næ€»çº¿é”çš„å®ç°æ˜¯é‡‡ç”¨cpuæä¾›çš„LOCK#ä¿¡å·ï¼Œå½“ä¸€ä¸ªcpuåœ¨æ€»çº¿ä¸Šè¾“å‡ºæ­¤ä¿¡å·æ—¶ï¼Œå…¶ä»–cpuçš„è¯·æ±‚å°†è¢«é˜»å¡ï¼Œé‚£ä¹ˆè¯¥cpuåˆ™ç‹¬å å…±äº«å†…å­˜ï¼Œç›¸å½“äºé”ä½äº†\n\nä½•ä¸ºæ€»çº¿ï¼Ÿ\n\nCPUæ€»çº¿æ˜¯æ‰€æœ‰CPUä¸èŠ¯ç‰‡ç»„è¿æ¥çš„ä¸»å¹²é“ï¼Œè´Ÿè´£CPUä¸å¤–ç•Œæ‰€æœ‰éƒ¨ä»¶çš„é€šä¿¡ï¼ŒåŒ…æ‹¬é«˜é€Ÿç¼“å­˜ã€å†…å­˜ã€åŒ—æ¡¥ï¼Œå…¶æ§åˆ¶æ€»çº¿å‘å„ä¸ªéƒ¨ä»¶å‘é€æ§åˆ¶ä¿¡å·ã€é€šè¿‡åœ°å€æ€»çº¿å‘é€åœ°å€ä¿¡å·æŒ‡å®šå…¶è¦è®¿é—®çš„éƒ¨ä»¶ã€é€šè¿‡æ•°æ®æ€»çº¿åŒå‘ä¼ è¾“\n\n5.æ­»é”æ­»é”å°±æ˜¯ä¸€ç§å› ä¸ºä¸¤æ”¾éƒ½ä¸ä¼šé‡Šæ”¾å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œä»è€Œé™·å…¥çš„æ°¸ä¹…ç­‰å¾…çŠ¶æ€\n5.1 æ­»é”æƒ…å†µæ¼”ç¤ºä¸¾ä¸ªä¾‹å­ï¼Œå¼ ä¸‰æ‹¿äº†é”Aï¼Œç”³è¯·é”Bçš„æ—¶å€™ï¼Œå‘ç°é”Bæ— æ³•ç”³è¯·ï¼Œè€Œè¿›å…¥ç­‰å¾…ï¼›æå››æ‹¿äº†é”Bï¼Œæ¥ä¸‹æ¥ä»–æƒ³ç”³è¯·é”Aï¼Œç»“æœå‘ç°å¼ ä¸‰æ‹¿ç€é”Aï¼Œé‚£å°±åªèƒ½è¿›å…¥ç­‰å¾…ã€‚è¿™å°±é™·å…¥äº†ä¸€ä¸ªåƒµå±€ï¼Œå¼ ä¸‰æƒ³è¦æå››çš„ï¼Œæå››æƒ³è¦å¼ ä¸‰çš„ï¼Œè°éƒ½ä¸è®©è°\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;pthread_mutex_t m1;//é”1pthread_mutex_t m2;//é”2void* func1(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m1);        pthread_mutex_lock(&amp;m2);        cout &lt;&lt; &quot;func1 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;void* func2(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m2);        pthread_mutex_lock(&amp;m1);        cout &lt;&lt; &quot;func2 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;int main()&#123;    pthread_mutex_init(&amp;m1,nullptr);    pthread_mutex_init(&amp;m2,nullptr);    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;t2&quot;);    //åˆ†ç¦»    pthread_detach(t1);    pthread_detach(t2);    while(1)    &#123;        cout &lt;&lt; &quot;main running...&quot; &lt;&lt;endl;        sleep(1);    &#125;    pthread_mutex_destroy(&amp;m1);    pthread_mutex_destroy(&amp;m2);    return 0;&#125;\n\nä¸Šé¢çš„è¿™ä¸ªä»£ç ä¾¿èƒ½æ¨¡æ‹Ÿå‡ºè¿™ä¸ªæƒ…å†µï¼Œçº¿ç¨‹1å…ˆè¦äº†é”1ï¼Œå†è¦é”2ï¼›çº¿ç¨‹2å…ˆè¦é”2å†è¦é”1ï¼Œä»–ä»¬ä¿©å°±å®¹æ˜“æ‰“èµ·æ¥ï¼Œé€ æˆæ­»é”ã€‚\nè¿è¡Œä»£ç çš„æ—¶å€™æˆ‘ä»¬å´å‘ç°ï¼Œä¼¼ä¹å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œçº¿ç¨‹1å¥½åƒè¿˜æ˜¯æˆåŠŸæ‹¿åˆ°äº†ä¿©æŠŠé”ï¼Œå¹¶è¿è¡Œäº†èµ·æ¥\n[muxue@bt-7274:~/git/linux/code/22-12-23_çº¿ç¨‹æ­»é”]$ ./testmain running...func1 is running... t1func1 is running... t1main running...func1 is running... t1main running...func1 is running... t1main running...\n\né‚£æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ‰§è¡Œå…¶ä»–ä¸€äº›å·¥ä½œï¼Œä»è€Œå°†çº¿ç¨‹1å’Œ2ç”³è¯·é”çš„æ—¶é—´é”™å¼€\nå°†ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œåˆ©ç”¨usleepè®©ä¸¤ä¸ªçº¿ç¨‹ä¼‘çœ ä¸åŒæ—¶é—´ï¼Œç»“æœå°±ä¸åŒäº†\nvoid* func1(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m1);        usleep(200);        pthread_mutex_lock(&amp;m2);        cout &lt;&lt; &quot;func1 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;void* func2(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m2);        usleep(300);        pthread_mutex_lock(&amp;m1);        cout &lt;&lt; &quot;func2 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶åªæœ‰ä¸»çº¿ç¨‹åœ¨è¿è¡Œï¼Œçº¿ç¨‹t1å’Œt2å‡ºç°äº†æ­»é”ï¼\n[muxue@bt-7274:~/git/linux/code/22-12-23_çº¿ç¨‹æ­»é”]$ ./testmain running...main running...main running...main running...\n\n\n5.2 æ­»é”çš„æ¡ä»¶\näº’æ–¥æ¡ä»¶ï¼šæŸä»½èµ„æºåŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªæ‰§è¡Œæµè®¿é—®\nè¯·æ±‚ä¸ä¿æŒï¼šä¸€ä¸ªæ‰§è¡Œæµå› è¯·æ±‚æŸç§èµ„æºè¿›å…¥é˜»å¡ç­‰å¾…ï¼Œè€Œä¸é‡Šæ”¾è‡ªå·±çš„èµ„æºï¼ˆå¥½æ¯”ä¸Šé¢ä»£ç ä¾‹å­ä¸­ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¸é‡Šæ”¾è‡ªå·±çš„é”ï¼Œåˆæƒ³è¦åˆ«äººçš„é”ï¼‰\nä¸å‰¥å¤ºæ¡ä»¶ï¼šä¸€ä¸ªæ‰§è¡Œæµå·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨ä¹‹å‰ä¸èƒ½è¢«å‰¥å¤ºï¼ˆéƒ¨åˆ†é”æ˜¯å…è®¸è¢«å‰¥å¤ºçš„ï¼‰\nå¾ªç¯ç­‰å¾…ï¼šè‹¥å¹²æ‰§è¡Œæµä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºçš„çŠ¶æ€\n\nä¸€æŠŠé”ä¹Ÿèƒ½é€ æˆæ­»é”å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼\npthread_mutex_lock(&amp;m1);pthread_mutex_lock(&amp;m1);//ä¸¤æ¬¡ç”³è¯·åŒä¸€æŠŠé”\n\nå¦‚æœæœ‰äººå†™å‡ºè¿™ç§bugä»£ç ï¼Œé‚£å°±ä¼šå‡ºç°ä¸€æŠŠé”æŠŠè‡ªå·±æ­»é”äº†ï¼›æ­»é”æœ¬æ¥å°±æ˜¯ä»£ç çš„bugï¼Œæ‰€ä»¥è¿™ç§ä½çº§é”™è¯¯ä¹Ÿæ˜¯æ­»é”çš„æƒ…å†µä¹‹ä¸€ğŸ˜‚\n5.3 é¿å…æ­»é”é¿å…æ­»é”ï¼Œå…¶ä¸­æœ€ç®€å•æ˜äº†çš„åŠæ³•ï¼Œå°±æ˜¯ç ´åä¸Šé¢æåˆ°çš„æ­»é”çš„4ä¸ªæ¡ä»¶ï¼›å…¶ä¸­äº’æ–¥æ¡ä»¶æ²¡å•¥å¥½åŠæ³•ç ´åï¼ˆé™¤éä½ ä¸åŠ é”ï¼‰ï¼Œæ›´ä¸»è¦çš„æ˜¯çœ‹å¦å¤–3ä¸ªæ¡ä»¶æ˜¯å¦èƒ½ç ´åï¼\n\nä¿æŒåŠ é”é¡ºåºä¸€è‡´ï¼šä¸è¦å‡ºç°ä¸Šé¢ä»£ç ä¸­çš„çº¿ç¨‹aå…ˆç”³è¯·é”1ï¼Œçº¿ç¨‹bå…ˆç”³è¯·é”2çš„æƒ…å†µã€‚åœ¨ä¸åŒçš„æ‰§è¡Œæµä¸­ï¼ŒæŒ‰ç›¸åŒçš„é¡ºåºç”³è¯·é”ï¼ˆæ¯”å¦‚çº¿ç¨‹aå’Œbéƒ½æ˜¯æŒ‰é”1&#x2F;2çš„é¡ºåºç”³è¯·çš„ï¼‰ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶\né™ä½åŠ é”çš„ç²’åº¦ï¼šé”ä¿æŠ¤çš„åŒºåŸŸå˜å°ï¼ŒåŠ é”çš„ç²’åº¦å‡å°ï¼Œèƒ½ä¸€å®šç¨‹åº¦ä¸Šé¿å…é”æœªé‡Šæ”¾\nèµ„æºä¸€æ¬¡æ€§åˆ†é…ï¼šå‡å°‘ä¸´æ—¶èµ„æºåˆ†å¼€ç»™çš„æƒ…å†µ\nå…è®¸æŠ¢å ï¼šçº¿ç¨‹ä¹‹é—´ä¾é ä¼˜å…ˆçº§æŠ¢å¤ºé”ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯é”å…è®¸è¢«å‰¥å¤º\n\n\n6.çº¿ç¨‹å®‰å…¨çº¿ç¨‹å®‰å…¨ï¼šå¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡ŒåŒä¸€æ®µä»£ç çš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°ä¸åŒçš„ç»“æœ\nçº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼š\n\nä¸ä¿æŠ¤ä¸´ç•Œèµ„æº\nåœ¨å¤šçº¿ç¨‹æ“ä½œä¸­è°ƒç”¨ä¸å¯é‡å…¥å‡½æ•°ï¼ˆæ¦‚å¿µè§linuxä¿¡å·éƒ¨åˆ†ï¼‰\nè¿”å›æŒ‡å‘é™æ€å˜é‡çš„æŒ‡é’ˆçš„å‡½æ•°\n\nçº¿ç¨‹å®‰å…¨ï¼š\n\næ¯ä¸ªçº¿ç¨‹åªæ“ä½œå±€éƒ¨å˜é‡ï¼Œæˆ–è€…åªå¯¹å…¨å±€ã€é™æ€å˜é‡åªè¯»ä¸å†™\næ¥å£å¯¹çº¿ç¨‹æ¥è¯´æ˜¯åŸå­æ“ä½œï¼ˆè¢«é”ä¿æŠ¤ï¼‰\nå¤šä¸ªçº¿ç¨‹åˆ‡æ¢ä¸ä¼šä½¿å‡½æ•°æ¥å£çš„ç»“æœå‡ºç°äºŒä¹‰æ€§\nå¤šçº¿ç¨‹æ“ä½œä¸è°ƒç”¨ä¸å¯é‡å…¥å‡½æ•°\n\næ³¨æ„ï¼Œç»å¤§å¤šæ•°çš„ç³»ç»Ÿè‡ªå¸¦çš„åº“ï¼ˆæ¯”å¦‚C++çš„STLåº“ï¼‰éƒ½æ˜¯ä¸å¯é‡å…¥çš„\n\nä¸å¯é‡å…¥æ˜¯å‡½æ•°çš„ä¸€ç§æ€§è´¨ï¼Œå¹¶ä¸æ˜¯å®ƒçš„ç¼ºç‚¹ï¼å¦‚æœä¸€ä¸ªåº“å‡½æ•°æ˜æ˜å‘ŠçŸ¥ä½ äº†æˆ‘æ˜¯ä¸å¯é‡å…¥çš„ï¼Œä½ è¿˜ä¸åŠ ä¿æŠ¤çš„åœ¨å¤šçº¿ç¨‹æ“ä½œä¸­è°ƒç”¨å®ƒï¼Œé‚£ä¹ˆè¿™æ®µä»£ç æ˜¯æœ‰bugçš„ï¼Œå¹¶ä¸æ˜¯åº“å‡½æ•°æœ¬èº«æœ‰é—®é¢˜\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘tarå‘½ä»¤æ‰“åŒ… | æŸ¥çœ‹å‹ç¼©æ–‡ä»¶ | æ‰“åŒ…æ—¶å¿½ç•¥æ–‡ä»¶","url":"/2023/01/16/note_Linux/21tar%E5%8E%8B%E7%BC%A9/","content":"tarå‘½ä»¤æ‰“åŒ… | æŸ¥çœ‹å‹ç¼©æ–‡ä»¶ | æ‰“åŒ…æ—¶å¿½ç•¥æ–‡ä»¶ ç­‰æ“ä½œ\n\n\n1.èµ·å› ä»Šå¤©ä¸‹åˆå†™é˜¿ç‹¸botçš„ä»£ç çš„æ—¶å€™ï¼Œå†™é”™äº†aiofilesçš„ä¿å­˜æ“ä½œ\n# æ­£ç¡®å†™æ³•async def write_file_aio(path:str, value):    async with aiofiles.open(path, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as f:        await f.write(json.dumps(value, indent=2, sort_keys=True,ensure_ascii=False))        # é”™è¯¯å†™æ³•# å‰é¢æ˜¯ä¸€æ ·çš„await f.write(json.dump(value, indent=2, sort_keys=True,ensure_ascii=False))\n\næ³¨æ„è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯json.dumpï¼›ä¸€ä¸ªæ˜¯json.dumps\nå°±æ˜¯å› ä¸ºè¿™é‡Œå†™é”™äº†ï¼Œå¯¼è‡´botæ‰§è¡Œå…¨å±€å˜é‡ä¿å­˜çš„æ—¶å€™ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½æ²¡æœ‰æˆåŠŸä¿å­˜â€”â€”è¿˜ç›´æ¥æŠŠæœ¬åœ°æ–‡ä»¶æ¸…ç©ºäº†ï¼ï¼ï¼\n\nå½“æ—¶çš„æˆ‘æ˜¯çœŸçš„æ¬²å“­æ— æ³ªå•Šï¼Œéƒ½ä¸çŸ¥é“å¦‚ä½•æ˜¯å¥½\n\nvscodeçš„æ—¶é—´çº¿åŠŸèƒ½å¸®æˆ‘ä¿å­˜äº†ä¸€éƒ¨åˆ†æ–‡ä»¶ï¼Œå¯æ˜¯ç»å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¨‹åºç”Ÿæˆçš„ï¼Œæ²¡æœ‰ç»è¿‡vscodeï¼Œå…¶è‡ªç„¶ä¹Ÿå°±æ²¡æœ‰ä¿å­˜å†å²ç‰ˆæœ¬ï¼Œè¿™å¯ç»™æˆ‘æ•´éš¾å—äº†\n\n\nè¦ä¸æ˜¯ä¹‹å‰æœ‰ä¸€ä¸ªval-bot-testç›®å½•ç”¨äºä»£ç æµ‹è¯•ï¼Œé‚£å°±å‡ ä¹ç­‰åŒäºé˜¿ç‹¸botçš„ç”¨æˆ·ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼Œæœ€æœ€æœ€æœ€éš¾å—çš„ï¼Œè¿˜æ˜¯æˆ‘botè®°å½•äº†å¥½ä¹…çš„æœåŠ¡å™¨æ—¥å¿—å•Šï¼Œæœ¬æ¥æœ‰3wå¤šcmdçš„ï¼Œç°åœ¨æ¢å¤çš„æ–‡ä»¶è¿˜æ˜¯å‡ ä¸ªæœˆå‰çš„ï¼Œæ•°æ®é‡å°‘äº†å¥½å¤šâ€¦â€¦\n\nå”‰ï¼Œä¸è¯´è¿™äº›ç©æ„äº†ï¼Œä»Šå¤©æˆ‘ä»¬è¦æ¥åº·åº·æ€ä¹ˆåœ¨linuxä¸‹ç”¨tarå‘½ä»¤æ‰“åŒ…å’Œå‹ç¼©æ–‡ä»¶å¤¹ï¼Œç•™ä½œå¤‡ä»½ï¼\n2.tarå‘½ä»¤æ‰“åŒ…å‚è€ƒ https://blog.csdn.net/catoop/article/details/40651947\n2.1 å°†æ•´ä¸ªç›®å½•æ‰“åŒ…ä»¥å½“å‰ç›®å½•ä¸‹çš„codeæ–‡ä»¶å¤¹ä¸ºä¾‹\ntar -cvf ./code.tar ./code #ä»…æ‰“åŒ…ä¸å‹ç¼©tar -zcvf ./code.tar.gz ./code #æ‰“åŒ…ï¼Œgzipå‹ç¼©tar -jcvf ./code.tar.bz2 ./code #æ‰“åŒ…ï¼Œbzip2å‹ç¼©\n\næ³¨æ„ï¼Œè¿™é‡Œçš„./code.taræ˜¯ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ï¼Œ./codeæ˜¯æºè·¯å¾„ï¼›ç›®æ ‡æ–‡ä»¶çš„å‘½åæ²¡æœ‰è¦æ±‚ï¼Œå‘½åæˆtar.gz/tar.bz2åªæ˜¯ä¸€ä¸ªç”¨äºæ ‡æ˜çš„å¥½ä¹ æƒ¯\n2.2 æŸ¥çœ‹å‹ç¼©åŒ…é‡Œé¢çš„æ–‡ä»¶ä¸‹é¢çš„å‘½ä»¤æ˜¯åˆ†åˆ«æŸ¥çœ‹ä¸åŒå‹ç¼©æ ¼å¼çš„å‹ç¼©åŒ…é‡Œé¢çš„æ–‡ä»¶ç›®å½•çš„ï¼Œå…¶ä¼šç›´æ¥åœ¨bashæ‰“å°å‡ºæ¥\ntar -tvf ./code.tar tar -ztvf ./code.tar.gz tar -jtvf ./code.tar.bz2 \n\n2.3 è§£å‹æ–‡ä»¶è§£å‹çš„æ–‡ä»¶ä¼šé»˜è®¤å­˜åœ¨å½“å‰ç›®å½•\ntar -xvf ./code.tar tar -zxvf ./code.tar.gz tar -jxvf ./code.tar.bz2 \n\n2.4 è§£å‹ä¸€éƒ¨åˆ†æ–‡ä»¶å‡è®¾æˆ‘ä»¬éœ€è¦è§£å‹code.taré‡Œé¢testç›®å½•çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤\ntar -xvf ./code.tar test\n\nçŸ¥é“è¿™å‡ ä¸ªç”¨æ³•ï¼Œå°±åŸºæœ¬å¤Ÿç”¨äº†ï¼\n2.5 æ‰“åŒ…çš„æ—¶å€™å¿½ç•¥ä¸€äº›æ–‡ä»¶ç°åœ¨æˆ‘éœ€è¦å‹ç¼©çš„æ˜¯codeé‡Œé¢çš„pythonè¿è¡Œä»£ç ï¼Œå…¶ä¸­ä¼šæœ‰ä¸€ä¸ªæ²¡æœ‰ç”¨çš„__pycache_ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶å¿½ç•¥ï¼Œä»¥å‡å°å‹ç¼©åŒ…ä½“ç§¯\nä¸‹é¢çš„å‘½ä»¤å°±æ˜¯å¿½ç•¥codeè·¯å¾„ä¸‹æ‰€æœ‰__pycache__æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•\ntar -zcvf code.tar.gz --exclude=*__pycache__ code\n\næ³¨æ„ï¼Œå¿½ç•¥çš„è·¯å¾„åé¢ä¸éœ€è¦å¸¦/ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šè¢«æ‰“åŒ…ã€‚æ¯”å¦‚ä¸‹é¢çš„ç”¨æ³•å°±æ˜¯é”™çš„\ntar -zcvf code.tar.gz --exclude=*__pycache__/ code #é”™è¯¯\n\n3.ä¸€å®šè¦å¤šå¤šå¤‡ä»½åƒæˆ‘ä»Šå¤©å‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œå®åœ¨æ˜¯ä¸åº”è¯¥ï¼\né˜¿ç‹¸botæ˜¯æœ‰vipä¸šåŠ¡çš„ï¼Œvipä¿¡æ¯æ–‡ä»¶çš„ä¸¢å¤±ï¼Œä¹Ÿå¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´vipç”¨æˆ·çš„ä¸¢å¤±ã€‚æ›´åˆ«æè¿˜æœ‰å¹¿å¤§çš„æ™®é€šç”¨æˆ·åœ¨ä½¿ç”¨é˜¿ç‹¸å‘¢ã€‚\nå¹³æ—¶æˆ‘çŸ¥é“è¦åœ¨äº‘ç›˜ã€naså¤‡ä»½è‡ªå·±çš„ä»£ç ã€ç¬”è®°ã€å­¦ä¹ èµ„æ–™ç­‰ç­‰ä¸ªäººæ–‡ä»¶ï¼Œå´å¿˜è®°äº†äº‘æœåŠ¡å™¨ä¸Šçš„botåŒæ ·éœ€è¦å¤‡ä»½\n\nè¿™ä¸‹å¯ç®—æ˜¯å¸å–æ•™è®­äº†ï¼Œä¸€æ¬¡æ€§æŠŠæ‰€æœ‰botéƒ½ç»™å¤‡ä»½äº†ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python"]},{"title":"ã€Linuxã€‘çº¿ç¨‹æ¦‚å¿µ | åŒæ­¥","url":"/2022/12/30/note_Linux/20%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/","content":"é™¤äº†çº¿ç¨‹äº’æ–¥ï¼Œæˆ‘ä»¬è¿˜æœ‰çº¿ç¨‹åŒæ­¥ï¼Œæ¥åº·åº·å§\n\n\n[TOC]\n1.ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥åœ¨éƒ¨åˆ†æ¡ä»¶ä¸‹ï¼Œäº’æ–¥æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ä¸åˆç†ã€‚æ¯”å¦‚é£Ÿå ‚æ‰“é¥­çš„æ—¶å€™ï¼Œé£Ÿå ‚é˜¿å§¨ä¸€æ¬¡åªèƒ½ç»™ä¸€ä¸ªäººæ‰“é¥­ï¼Œäºæ˜¯å°±é€‰æ‹©é€šè¿‡ç«äº‰æ¥è·å¾—æ‰“é¥­çš„æƒåˆ©ã€‚æ­¤æ—¶å°±ä¼šå‡ºç°æœ‰äº›çº¿ç¨‹å› ä¸ºä¼˜å…ˆçº§è¿‡ä½æˆ–è€…CPUè°ƒåº¦é—®é¢˜ï¼Œä¸€ç›´æ‰“ä¸åˆ°é¥­ï¼Œäºæ˜¯å°±å‡ºç°äº†é¥¥é¥¿é—®é¢˜ã€‚\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯¹å¤šçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªèµ„æºæ²¡æœ‰è¿›è¡Œé™åˆ¶ï¼Œå…¨é CPUè°ƒåº¦æ¥å†³å®šè¿è¡Œé¡ºåºï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œä¸€å®šçš„æ§åˆ¶ï¼Œè¿™å°±æ˜¯çº¿ç¨‹åŒæ­¥çš„æ¦‚å¿µ\n\né¥¥é¥¿é—®é¢˜ï¼šæŸä¸€ä¸ªçº¿ç¨‹ä¸€ç›´æ— æ³•ç”³è¯·åˆ°æŸç§èµ„æºï¼ˆæ¯”å¦‚å› ä¸ºä¼˜å…ˆçº§è¿‡ä½ï¼‰\nåŒæ­¥ï¼šä¿è¯æ•°æ®å®‰å…¨ï¼ˆä¸´ç•Œèµ„æºè®¿é—®ï¼‰çš„å‰æä¸‹ï¼Œè®©çº¿ç¨‹æ ¹æ®ä¸€å®šæ¡ä»¶å’Œé¡ºåºè®¿é—®ä¸´ç•Œèµ„æºï¼Œä»è€Œé¿å…é¥¥é¥¿é—®é¢˜\nç«æ€æ¡ä»¶ï¼šå› ä¸ºæ—¶åºé—®é¢˜ï¼ˆCPUè°ƒåº¦ï¼‰è€Œå¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼›\n\n2.ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹è¿™ä¸ªæ¨¡å‹å…¶å®å¾ˆç®€å•ï¼Œæ¶ˆè´¹è€…å»è¶…å¸‚è´­ä¹°ä¸œè¥¿ï¼Œç”Ÿäº§è€…æŠŠå•†å“æŠ•æ”¾åˆ°è¶…å¸‚ä¸­ã€‚\n\nè¿™æ—¶å€™å°±ä¸éœ€è¦æ¶ˆè´¹è€…ç›´æ¥å»æ‰¾å·¥å‚é—®ä»–xxä¸œè¥¿åˆæ²¡æœ‰ç”Ÿäº§ï¼Œä»–éœ€è¦è´­ä¹°ï¼›è€Œæ˜¯è½¬å»è¶…å¸‚é‡Œé¢è´­ä¹°xxä¸œè¥¿ï¼›\nå¦‚æœxxä¸œè¥¿æ²¡æœ‰è´§äº†ï¼Œè¶…å¸‚å°±ä¼šé€šçŸ¥ç”Ÿäº§è€…è¿›è¡Œè¡¥è´§ã€‚å¦‚æœè¶…å¸‚é‡Œé¢çš„è´§æ¶å·²ç»æ»¡äº†ï¼Œå°±é€šçŸ¥ç”Ÿäº§è€…ä¸éœ€è¦ç»§ç»­ç”Ÿäº§äº†ï¼›\nå½“å•†å“æ²¡è´§äº†ï¼Œè¶…å¸‚ä¼šå‘ŠçŸ¥æ¶ˆè´¹è€…è¿™ä¸ªä¸œè¥¿æ²¡è´§ï¼Œæ¶ˆè´¹è€…ä¼šåœæ­¢æ¶ˆè´¹è¡Œä¸ºï¼›è€Œç”Ÿäº§è€…è¡¥è´§äº†ä¹‹åï¼Œè¶…å¸‚å°±ä¼šé€šçŸ¥æ¶ˆè´¹è€…è®©ä»–æ¥è´­ä¹°\n\n\nåœ¨åŸºç¡€æ¨¡å¼ä¸­ï¼Œæ¶ˆè´¹è€…è¦æƒ³çŸ¥é“ä¸€ä¸ªä¸œè¥¿æœ‰æ²¡æœ‰è´§ï¼Œéœ€è¦å»è¶…å¸‚é‡Œé¢çœ‹ï¼ˆç›¸å½“äºè½®å¾ªæ£€æµ‹ï¼‰\næˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªé€šçŸ¥æ–¹å¼ï¼Œæ¯”å¦‚è¶…å¸‚å¼€æ”¾ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼Œå‘ŠçŸ¥æ¶ˆè´¹è€…xxç‰©å“æ˜¯å¦æœ‰è´§ï¼Œä»¥åŠå‘ŠçŸ¥æ¶ˆè´¹è€…ä»€ä¹ˆæ—¶å€™éœ€è¦è¡¥è´§ï¼Œæ­¤æ—¶å°±ä¸éœ€è¦æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¸æ–­è¯¢é—®è¶…å¸‚å…³äºä¸€ä¸ªå•†å“çš„æƒ…å†µäº†ï¼è¿™å°±ç›¸å½“äºçº¿ç¨‹åŒæ­¥ï¼\n2.1 ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ä¸‹é¢æåˆ°çš„æ˜¯æ™®é€‚æƒ…å†µ\n\næ¶ˆè´¹è€…æœ‰å¤šä¸ªï¼Œä»–ä»¬ä¹‹é—´æ˜¯ç«äº‰å…³ç³»ï¼ˆäº’æ–¥ï¼‰ç«äº‰å•†å“çš„è´­ä¹°\nç”Ÿäº§è€…æœ‰å¤šä¸ªï¼Œä»–ä»¬ä¹‹é—´æ˜¯ç«äº‰å…³ç³»ï¼ˆäº’æ–¥ï¼‰ç«äº‰è¶…å¸‚çš„è´§æ¶\næ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹é—´ï¼Œæ—¢æœ‰äº’æ–¥å…³ç³»ï¼Œä¹Ÿæ˜¯åŒæ­¥å…³ç³»ï¼ˆéœ€è¦ç”Ÿäº§è€…ä¾›è´§äº†ä¹‹åï¼Œæ¶ˆè´¹è€…æ‰èƒ½æ¶ˆè´¹ï¼‰è¿™ä¸¤ä¸ªå…³ç³»å¹¶ä¸å†²çªï¼\n\né™¤äº†ä¸Šé¢æåˆ°çš„3ç§ç”Ÿäº§å…³ç³»ï¼Œè¿˜æœ‰ä¸‹é¢ä¿©ç‚¹\nåœ¨å®é™…ç¨‹åºä¸­ï¼Œæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…éƒ½æ˜¯ç”±çº¿ç¨‹æ‰¿æ‹…çš„ï¼ˆ2ç§è§’è‰²ï¼‰\nè¶…å¸‚æ˜¯å†…å­˜ä¸­ç‰¹å®šçš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä¹Ÿæ˜¯ä¸´ç•Œèµ„æºï¼ˆ1ä¸ªäº¤æ˜“åœºæ‰€ï¼‰\n\næˆ‘ä»¬å¯ä»¥ç”¨321åŸåˆ™æ¥å¿«é€Ÿè®°ä½è¿™å‡ æ¡ï¼Œè¿™æ ·å°±è®°ä½äº†ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹ï¼ğŸ‘\n\n2.2 ä»¥ç®€å•ä»£ç ä¸ºä¾‹åœ¨æ—§æ¨¡å¼ä¸­ï¼Œmainå‡½æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œæƒ³è·å¾—è¿”å›å€¼ï¼Œéœ€è¦ç­‰è¿™ä¸ªå‡½æ•°è¿è¡Œå®Œæ¯•ï¼›å¥½æ¯”æ¶ˆè´¹è€…è´­ä¹°ä¸œè¥¿ï¼Œéœ€è¦å»æ‰¾å‚å®¶å¹¶ç­‰å¾…å‚å®¶ç”Ÿäº§â€¦â€¦\n\nè€Œåœ¨ç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œmainä½œä¸ºä¸»çº¿ç¨‹ï¼Œåªéœ€è¦æŠŠå¾…å¤„ç†çš„æ•°æ®ä¸¢è¿›ç¼“å†²åŒºï¼›è€Œçº¿ç¨‹Bä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®ï¼Œå¤„ç†å®Œæ¯•åæ”¾å›ç¼“å†²åŒºã€‚mainå¯ä»¥å…ˆæ‰§è¡Œå…¶ä»–ä»£ç ï¼Œè¿‡ä¸€ä¼šå†è¿‡æ¥æ‹¿çº¿ç¨‹Bå¤„ç†å¥½çš„ç»“æœã€‚\nè¿™å°±å®ç°äº†ç”Ÿäº§å’Œæ¶ˆè´¹çš„è§£è€¦ï¼\n\n2.3 å¹¶å‘ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹çš„å¹¶å‘ï¼Œæ›´å¤šçš„ä½“ç°åœ¨æ¶ˆè´¹è€…åœ¨å¤„ç†ä»»åŠ¡çš„åŒæ—¶ï¼Œç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§ä»»åŠ¡ï¼›\nçº¿ç¨‹åˆ‡æ¢çš„æˆæœ¬ä½äºè¿›ç¨‹ï¼Œç”±æ­¤ä¾¿æé«˜äº†æ•°æ®å¤„ç†çš„æ•ˆç‡\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è§£å†³ä¸‹é¢è¿™äº›é—®é¢˜ğŸ˜\n1.å¦‚ä½•è®©å¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ç­‰å¾…å‘¢?åˆå¦‚ä½•è®©æ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’å‘¢?2.å¦‚ä½•è®©å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹ç­‰å¾…å‘¢?åˆå¦‚ä½•è®©ç”Ÿäº§è€…çº¿ç¨‹è¢«å”¤é†’å‘¢?3.å¦‚ä½•è¡¡é‡æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ‰€å…³å¿ƒçš„æ¡ä»¶æ˜¯å¦å°±ç»ªå‘¢?\n\nè€Œå‰é¢æåˆ°çš„é€šçŸ¥æ–¹å¼ï¼Œåœ¨linuxç³»ç»Ÿä¸­ï¼Œå°±æ˜¯æ¡ä»¶å˜é‡äº†ï¼\n3.æ¡ä»¶å˜é‡æ¥å£3.1 init&#x2F;destroyåŸºæœ¬çš„æ¥å£å’Œpthreadåº“çš„å…¶ä»–æ¥å£å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ç”¨æ³•ï¼›å…¶ä¸­atträ¹Ÿæ˜¯è®¾ç½®æ¡ä»¶å˜é‡çš„å±æ€§ï¼Œè¿™é‡Œç½®ä¸ºnullptrå³å¯\n#include &lt;pthread.h&gt;int pthread_cond_destroy(pthread_cond_t *cond);int pthread_cond_init(pthread_cond_t *restrict cond,                      const pthread_condattr_t *restrict attr);pthread_cond_t cond = PTHREAD_COND_INITIALIZER;\n\n3.2 pthread_cond_waitè¿™ä¸¤ä¸ªæ¥å£éƒ½æ˜¯è®©çº¿ç¨‹åœ¨ä¸€ä¸ªæ¡ä»¶å˜é‡ä¸‹è¿›è¡Œç­‰å¾…ï¼Œå…¶ä¸­timewaitæ¥å£å¯ä»¥è®¾ç½®ç­‰å¾…çš„æ—¶é—´ï¼ˆè¶…æ—¶äº†å°±ä¸ç­‰äº†ï¼‰\næ¡ä»¶å˜é‡ä¹Ÿæ˜¯ä¸´ç•Œèµ„æºï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªmutexé”æ¥ä¿è¯æ¡ä»¶å˜é‡è¯»å†™çš„åŸå­æ€§\n#include &lt;pthread.h&gt;int pthread_cond_timedwait(pthread_cond_t *restrict cond,                           pthread_mutex_t *restrict mutex,                           const struct timespec *restrict abstime);int pthread_cond_wait(pthread_cond_t *restrict cond,                      pthread_mutex_t *restrict mutex);\n\n3.3 pthrea_cond_signal&#x2F;broadcastè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯ç»™åœ¨æ¡ä»¶å˜é‡ä¸‹ç­‰å¾…çš„çº¿ç¨‹å‘ä¿¡å·\n#include &lt;pthread.h&gt;int pthread_cond_broadcast(pthread_cond_t *cond);int pthread_cond_signal(pthread_cond_t *cond);\n\nå…¶ä¸­broadcastæ˜¯ç»™åœ¨å½“å‰æ¡ä»¶å˜é‡ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹å‘ä¿¡å·ï¼Œè€Œsignalæ˜¯å‘é€ä¿¡å·ï¼Œåªå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼›\nå¦‚æœè°ƒç”¨æˆåŠŸï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šè¿”å›0ï¼›å¦åˆ™è¿”å›é”™è¯¯ç \nRETURN VALUE       If  successful, the pthread_cond_broadcast() and pthread_cond_signal() functions shall return zero; otherwise, an error number shall       be returned to indicate the error.\n\n3.4 ä»£ç ç¤ºä¾‹ä¸‹é¢è¿™ä¸ªä»£ç å¯ä»¥å¾ˆå¥½çš„æ¼”ç¤ºä¸Šé¢æåˆ°çš„å¤šä¸ªæ¥å£\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;//é”pthread_cond_t cond;//æ¡ä»¶å˜é‡volatile bool quit = false;void*func(void* arg)&#123;    while(!quit)//è¿™é‡Œæœ‰bugï¼Œåç»­ä¼šæåˆ°    &#123;        pthread_cond_wait(&amp;cond,&amp;mutex);        cout &lt;&lt; &quot;thread is running... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;    &#125;    cout &lt;&lt; &quot;thread quit... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;&#125;int main()&#123;    pthread_cond_init(&amp;cond,nullptr);    pthread_t t1,t2,t3;    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    char c;    while(1)    &#123;        cout &lt;&lt; &quot;[a/b]$ &quot;;        cin &gt;&gt; c;        if(c==&#x27;a&#x27;)        &#123;            pthread_cond_signal(&amp;cond);        &#125;        else if(c==&#x27;b&#x27;)        &#123;            pthread_cond_broadcast(&amp;cond);        &#125;        else        &#123;            quit = true;            break;        &#125;        usleep(500);    &#125;    cout &lt;&lt; &quot;main break: &quot; &lt;&lt; quit &lt;&lt; endl;    sleep(1);    pthread_cond_broadcast(&amp;cond);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    pthread_join(t3,nullptr);    return 0;&#125;\n\næ¯æ¬¡è¾“å…¥aï¼Œå°±signalä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼›æ¯æ¬¡è¾“å…¥bï¼Œä¼šè°ƒç”¨broadcastï¼Œå”¤é†’å½“å‰æ‰€æœ‰çº¿ç¨‹\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ athread is running... t1[a/b]$ athread is running... t2[a/b]$ athread is running... t3[a/b]$ bthread is running... t1thread is running... t2thread is running... t3\n\n3.4.1 å°bugä¸Šé¢çš„ä»£ç ç¤ºä¾‹ï¼Œä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼Œå³æˆ‘ä»¬è¾“å…¥é™¤äº†aå’Œbä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼Œéƒ½åº”è¯¥ä¼šæŠŠå…¨å±€å˜é‡quitæ”¹æˆtrueï¼Œè®©ä¸‰ä¸ªçº¿ç¨‹éƒ½é€€å‡º\nä½†è§‚å¯Ÿåˆ°çš„ç°è±¡å´æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹é€€å‡ºäº†ï¼Œå…¶ä»–çº¿ç¨‹é˜»å¡ç­‰å¾…äº†\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ qmain break: 1thread is running... t3thread quit... t3\n\nè¿™æ˜¯å› ä¸ºpthread_cond_waité‡Œé¢è¿›è¡Œäº†ç‹¬ç‰¹çš„æ“ä½œï¼Œå³ç­‰å¾…ä¹‹å‰ï¼Œå®ƒä¼šé‡Šæ”¾é”ï¼Œç­‰å¾…ä¹‹åï¼Œä»–ä¼šé‡æ–°ç”³è¯·é”\nint pthread_cond_wait(pthread_cond_t *restrict cond,                      pthread_mutex_t *restrict mutex)&#123;\tpthread_mutex_unlock(mutex);//å…ˆè§£é”    //é¿å…å› ä¸ºè¯¥çº¿ç¨‹æ‹¿ç€é”å»ä¼‘çœ äº†ï¼Œå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•ç”³è¯·è¯¥é”    \t//æ¡ä»¶å˜é‡ç›¸å…³ä»£ç \t    pthread_mutex_lock(mutex);//æ¡ä»¶æ»¡è¶³åï¼Œå†åŠ é”&#125;\n\nç¬¬ä¸€ä¸ªé€€å‡ºçš„çº¿ç¨‹ï¼Œé€€å‡ºä¹‹å‰ç”³è¯·äº†é”å´æ²¡æœ‰é‡Šæ”¾ï¼Œäºæ˜¯å°±å¯¼è‡´å…¶ä»–çº¿ç¨‹åœ¨æ¡ä»¶æ»¡è¶³åï¼Œæ²¡æœ‰åŠæ³•ç”³è¯·é”ï¼Œåªèƒ½é˜»å¡ç­‰å¾…ï¼\n3.4.2 ä¿®æ­£ä¿®æ­£çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨while(!quit)å¾ªç¯çš„é€€å‡ºæ¡ä»¶æ»¡è¶³ä¹‹åï¼Œé‡Šæ”¾ä¸€ä¸‹é”ï¼Œå°±OKäº†ï¼\nvoid*func(void* arg)&#123;    while(!quit)    &#123;        pthread_cond_wait(&amp;cond,&amp;mutex);        cout &lt;&lt; &quot;thread is running... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;            &#125;    pthread_mutex_unlock(&amp;mutex);//æ­£ç¡®æ“ä½œï¼šéœ€è¦åœ¨æ¡ä»¶æ»¡è¶³åï¼Œè§£é”    cout &lt;&lt; &quot;thread quit... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;&#125;\n\næ­¤æ—¶å°±èƒ½çœ‹åˆ°ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½æ­£å¸¸é€€å‡ºäº†ï¼\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ qmain break: 1thread is running... t1thread quit... t1thread is running... t2thread quit... t2thread is running... t3thread quit... t3[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$\n\n3.4.3 å…¸å‹é”™è¯¯æ ¹æ®è¿™ç‚¹ï¼Œå°±èƒ½å¼•å‡ºä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„é”™è¯¯\npthread_mutex_lock(&amp;mutex);while (condition_is_false) &#123;    pthread_mutex_unlock(&amp;mutex);    pthread_cond_wait(&amp;cond);//è§£é”å’ŒåŠ é”çš„æ“ä½œï¼Œè¯¥å‡½æ•°ä¼šå¸®æˆ‘ä»¬å®Œæˆ    pthread_mutex_lock(&amp;mutex);//äºŒæ¬¡ç”³è¯·åŒä¸€æŠŠé”ï¼Œå‡ºç°æ­»é”ï¼&#125;pthread_mutex_unlock(&amp;mutex);\n\nä¸¤æ¬¡ç”³è¯·åŒä¸€æŠŠé”ï¼Œå°±å¥½æ¯”è‡ªå·±æŠŠè‡ªå·±ç»Šå€’äº†ğŸ˜‚æˆ‘ä»¬è¦é¿å…å†™å‡ºè¿™æ ·çš„é”™è¯¯ä»£ç ï¼\n\n4.é˜»å¡é˜Ÿåˆ—-ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹å®ä¾‹è¿™ä¸ªé˜Ÿåˆ—çš„ä½œç”¨ï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªè¶…å¸‚ï¼Œä¾›ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›è¡Œæ•°æ®çš„äº¤æ¢\n\nç”Ÿäº§è€…ï¼Œå¾€é˜Ÿåˆ—é‡Œé¢pushæ•°æ®\næ¶ˆè´¹è€…ï¼Œä»é˜Ÿåˆ—é‡Œé¢popæ•°æ®\n\nçœ‹èµ·æ¥æœ‰äº›ç±»ä¼¼äºç®¡é“ï¼ŒåŒæ ·çš„ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨è¯»å–é˜»å¡é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¸ä»…éœ€è¦ä¿è¯è‡ªå·±çš„æ“ä½œæ˜¯åŸå­æ“ä½œï¼Œè¿˜éœ€è¦åšåˆ°ä¸€å®šçš„è®¿é—®æ§åˆ¶ï¼›å³æ¶ˆè´¹è€…åœ¨é˜Ÿåˆ—ç©ºçš„æ—¶å€™ä¸èƒ½ç»§ç»­popï¼Œç”Ÿäº§è€…åœ¨é˜Ÿåˆ—æ»¡çš„æ—¶å€™ä¸èƒ½ç»§ç»­push\næ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•å…¥ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šçš„é€šçŸ¥æ–¹å¼ï¼šä¸è¦è®©ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ç–¯ç‹‚æ£€æµ‹é˜»å¡é˜Ÿåˆ—ï¼Œè€Œæ˜¯å¼•å…¥æ¡ä»¶å˜é‡ï¼Œåœ¨é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œé€šçŸ¥æ¶ˆè´¹è€…ï¼›åœ¨é˜Ÿåˆ—ä¸ä¸ºæ»¡çš„æ—¶å€™ï¼Œé€šçŸ¥ç”Ÿäº§è€…ï¼›è¿™æ ·å°±è¾¾åˆ°äº†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚\n4.1 æˆå‘˜å˜é‡è¦å®ç°é˜»å¡é˜Ÿåˆ—ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†æ¸…æ¥šéœ€è¦ä»€ä¹ˆæˆå‘˜å˜é‡ï¼Œæ¥ä¿æŠ¤è¯¥é˜Ÿåˆ—\n\nç”¨äºè®¿é—®æ§åˆ¶çš„é”ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®é˜Ÿåˆ—\nç”¨æˆ·çº¿ç¨‹åŒæ­¥çš„æ¡ä»¶å˜é‡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹é€šçŸ¥ä¸åŒçš„äººï¼Œæ‰€ä»¥éœ€è¦2ä¸ªæ¡ä»¶å˜é‡\nä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œé‡‡ç”¨std::queueï¼Œè¿™æ ·å°±ä¸ç”¨è‡ªå·±é€ è½®å­äº†\n\nç†æ¸…æ¥šäº†ä¹‹åï¼Œå°±å¯ä»¥æ¥å†™æˆå‘˜å˜é‡å•¦ï¼›æˆ‘é‡‡ç”¨äº†æ¨¡æ¿ç±»å‹ï¼Œè¿™æ ·é˜»å¡é˜Ÿåˆ—å°±å¯ä»¥ç”¨æ¥å­˜æ”¾ä»»ä½•æˆ‘ä»¬æƒ³è¦çš„ç±»å‹äº†\ntemplate&lt;class T&gt;class BlockQueue&#123;private:    queue&lt;T&gt; _bq;//é˜Ÿåˆ—    size_t _size;//å¤§å°    pthread_mutex_t _mutex;//é”    pthread_cond_t _proInf;//é€šçŸ¥ç”Ÿäº§è€…    pthread_cond_t _conInf;//é€šçŸ¥æ¶ˆè´¹è€…public:    BlockQueue(int sz=5)        :_size(sz)    &#123;        pthread_mutex_init(&amp;_mutex,nullptr);        pthread_cond_init(&amp;_proInf,nullptr);        pthread_cond_init(&amp;_conInf,nullptr);    &#125;    ~BlockQueue()    &#123;        pthread_mutex_destroy(&amp;_mutex);        pthread_cond_destroy(&amp;_proInf);        pthread_cond_destroy(&amp;_conInf);    &#125;&#125;;\n\nä½ å¯èƒ½æƒ³é—®ï¼Œqueueä¸æ˜¯æœ‰å°è£…sizeå—ï¼Ÿå“ªè¿™é‡Œæˆ‘ä»¬è¿˜å®šä¹‰ä¸€ä¸ªå¤§å°å˜é‡ï¼Œä¼šä¸ä¼šæœ‰äº›å¤šä½™ï¼Ÿ\nnopeï¼å®é™…ä¸Šï¼Œè¿™é‡Œçš„è¿™ä¸ª_size å°±å¥½æ¯”æˆ‘ä»¬åœ¨Cè¯­è¨€å†™é¡ºåºè¡¨çš„æ—¶å€™ï¼Œæˆå‘˜capacityï¼›å…¶ä½œç”¨æ˜¯æ¥åˆ¤æ–­æˆ‘ä»¬çš„é˜Ÿåˆ—æœ‰æ²¡æœ‰æ»¡çš„ã€‚\n\n4.2 pushå’Œpopå¯¹äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œæœ€é‡è¦çš„æ“ä½œå°±æ˜¯åœ¨é˜Ÿå¤´å‡ºæ•°æ®ï¼Œé˜Ÿå°¾å…¥æ•°æ®\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯éœ€è¦åœ¨å¤„ç†é˜Ÿåˆ—æ•°æ®çš„æ—¶å€™è¿›è¡ŒåŠ é”ï¼Œä¿è¯åŸå­æ€§ï¼›\né™¤æ­¤ä»¥å¤–ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æœ‰ä¸åŒçš„æ“ä½œé€»è¾‘ï¼š\n\nç”Ÿäº§\nåˆ¤æ–­æ˜¯å¦ç¬¦åˆç”Ÿäº§æ¡ä»¶ï¼ˆé˜Ÿåˆ—æ²¡æœ‰æ»¡ï¼‰\næ»¡ï¼Œä¸ç”Ÿäº§ï¼›ä¸æ»¡ï¼Œç”Ÿäº§ï¼›\næ»¡äº†çš„æ—¶å€™ï¼Œç”Ÿäº§è€…åº”åœ¨æ¡ä»¶å˜é‡ä¸­ç­‰å¾…ï¼ˆç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹ï¼‰\nä¸æ»¡çš„æ—¶å€™ï¼Œç”Ÿäº§è€…ç”Ÿäº§ï¼Œå¹¶é€šçŸ¥æ¶ˆè´¹è€…æ¥æ¶ˆè´¹\n\n\næ¶ˆè´¹\nåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¶ˆè´¹æ¡ä»¶ï¼ˆé˜Ÿåˆ—ä¸ä¸ºç©ºï¼‰\nç©ºï¼Œä¸æ¶ˆè´¹ï¼›ä¸ç©ºï¼Œæ¶ˆè´¹ï¼›\nç©ºäº†çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…åº”è¯¥åœ¨æ¡ä»¶å˜é‡ä¸­ç­‰å¾…ï¼ˆç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§ï¼‰\nä¸ç©ºçš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå¹¶é€šçŸ¥ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§\n\n\n\nè¿™æ ·å°±å®ç°äº†é˜»å¡é˜Ÿåˆ—pushå’Œpopçš„åŸºæœ¬é€»è¾‘ï¼›ç”±æ­¤å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç \n//æ¶ˆè´¹è€…æ¶ˆè´¹T pop()&#123;    //åŠ é”    pthread_mutex_lock(&amp;_mutex);    //åˆ¤æ–­æ¡ä»¶    if(_size)//ç©ºï¼Œä¸æ¶ˆè´¹    &#123;        pthread_cond_wait(&amp;_conInf,&amp;_mutex);    &#125;    //æ¶ˆè´¹å¹¶é€šçŸ¥ç”Ÿäº§è€…    T tmp = _bq.front();    _bq.pop();    pthread_cond_signal(&amp;_proInf);    //è§£é”    pthread_mutex_unlock(&amp;_mutex);    return tmp;&#125;//ç”Ÿäº§è€…ç”Ÿäº§void Push(const T&amp; in)&#123;    //åŠ é”    pthread_mutex_lock(&amp;_mutex);    //åˆ¤æ–­æ¡ä»¶    if(bq.size()&gt;=_size)//æ»¡ï¼Œä¸ç”Ÿäº§    &#123;        pthread_cond_wait(&amp;_proInf,&amp;_mutex);    &#125;    //ç”Ÿäº§å¹¶é€šçŸ¥æ¶ˆè´¹è€…    _bq.push(in);    pthread_cond_signal(&amp;_conInf);    //è§£é”    pthread_mutex_unlock(&amp;_mutex);&#125;\n\n4.2.1 è¿è¡Œæµ‹è¯•æœ‰äº†è¿™ä¸ªåŸºæœ¬æ¡†æ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥æµ‹è¯•ä¸€ä¸‹ä»£ç å•¦ï¼\nå…ˆæ¥ä¸€ä¸ªç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åº·åº·å§\n#include &quot;blockqueue.hpp&quot;#include &lt;time.h&gt;#include &lt;stdlib.h&gt;void *consume(void *args)&#123;    BlockQueue&lt;int&gt; *bqp = (BlockQueue&lt;int&gt; *)args;    while(1)    &#123;        // æ¶ˆè´¹        int ret = bqp-&gt;pop();        cout &lt;&lt; &quot;consume &quot; &lt;&lt; pthread_self() &lt;&lt; &quot; æ¶ˆè´¹ï¼š&quot; &lt;&lt; ret &lt;&lt; endl;        sleep(1);    &#125;&#125;void *produce(void *args)&#123;    BlockQueue&lt;int&gt; *bqp = (BlockQueue&lt;int&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œ        cout &lt;&lt; &quot;########â†“&quot; &lt;&lt; endl;        int a = rand()%100;        // æŠ•æ”¾åˆ°è¶…å¸‚        bqp-&gt;push(a);        cout &lt;&lt; &quot;produce &quot; &lt;&lt; pthread_self() &lt;&lt; &quot; ç”Ÿäº§ï¼š&quot; &lt;&lt; a &lt;&lt; endl;        sleep(2);    &#125;&#125;int main()&#123;    srand((unsigned int)time(nullptr));    pthread_t t1,t2;    BlockQueue&lt;int&gt; bq(5);    pthread_create(&amp;t1,nullptr,produce,(void*)&amp;bq);    pthread_create(&amp;t2,nullptr,consume,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåˆšå¼€å§‹æ¶ˆè´¹è€…å¹¶æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯ç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§å‡ºæ•°æ®äº†ä¹‹åï¼Œå†å¼€å§‹æ¶ˆè´¹ï¼æˆ‘ä»¬çš„ç›®çš„æˆåŠŸè¾¾æˆï¼\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./test########â†“produce 139716365768448 ç”Ÿäº§ï¼š41########â†“produce 139716365768448 ç”Ÿäº§ï¼š11consume 139716357375744 æ¶ˆè´¹ï¼š41########â†“produce 139716365768448 ç”Ÿäº§ï¼š19consume 139716357375744 æ¶ˆè´¹ï¼š11########â†“produce 139716365768448 ç”Ÿäº§ï¼š19consume 139716357375744 æ¶ˆè´¹ï¼š19########â†“produce 139716365768448 ç”Ÿäº§ï¼š25consume 139716357375744 æ¶ˆè´¹ï¼š19########â†“produce 139716365768448 ç”Ÿäº§ï¼š63consume 139716357375744 æ¶ˆè´¹ï¼š25\n\nå¦‚æœå¢åŠ çº¿ç¨‹åˆ°2ç”Ÿäº§2æ¶ˆè´¹ï¼Œåˆ™ä¼šçœ‹åˆ°ä¸‹é¢çš„æƒ…å†µ\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./test########â†“produce 140483816179456 ç”Ÿäº§ï¼š51consume 140483807786752 æ¶ˆè´¹ï¼š51########â†“produce 140483799394048 ç”Ÿäº§ï¼š38consume 140483791001344 æ¶ˆè´¹ï¼š38########â†“produce 140483816179456 ç”Ÿäº§ï¼š37consume 140483807786752 æ¶ˆè´¹ï¼š37\n\næ¯æ¬¡è¢«å”¤é†’çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œäº¤æ›¿å”¤é†’\n4.2.2 è¿›ä¸€æ­¥å°è£…ä¸ºäº†ä»£ç çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹é˜»å¡é˜Ÿåˆ—è¿›ä¸€æ­¥å°è£…\n#include&lt;iostream&gt;#include&lt;queue&gt;#include&lt;pthread.h&gt;#include&lt;unistd.h&gt;using namespace std;template&lt;class T&gt;class BlockQueue&#123;private:    queue&lt;T&gt; _bq;//é˜Ÿåˆ—    size_t _size;//å¤§å°    pthread_mutex_t _mutex;//é”    pthread_cond_t _proInf;//é€šçŸ¥ç”Ÿäº§è€…    pthread_cond_t _conInf;//é€šçŸ¥æ¶ˆè´¹è€…public:    BlockQueue(int sz=5)        :_size(sz)    &#123;        pthread_mutex_init(&amp;_mutex,nullptr);        pthread_cond_init(&amp;_proInf,nullptr);        pthread_cond_init(&amp;_conInf,nullptr);    &#125;    ~BlockQueue()    &#123;        pthread_mutex_destroy(&amp;_mutex);        pthread_cond_destroy(&amp;_proInf);        pthread_cond_destroy(&amp;_conInf);    &#125;    //æ¶ˆè´¹è€…æ¶ˆè´¹    T pop()    &#123;        //åŠ é”        lock();        //åˆ¤æ–­æ¡ä»¶        if(isEmpty())//ç©ºï¼Œä¸æ¶ˆè´¹        &#123;            ConWait();        &#125;        //æ¶ˆè´¹å¹¶é€šçŸ¥ç”Ÿäº§è€…        T tmp = _bq.front();        _bq.pop();        WakeUpPro();        //è§£é”        unlock();        return tmp;    &#125;    //ç”Ÿäº§è€…ç”Ÿäº§    void push(const T&amp; in)    &#123;        //åŠ é”        lock();        //åˆ¤æ–­æ¡ä»¶        if(isFull())//æ»¡ï¼Œä¸ç”Ÿäº§        &#123;            ProWait();        &#125;        //ç”Ÿäº§å¹¶é€šçŸ¥æ¶ˆè´¹è€…        _bq.push(in);        WakeUpCon();        //è§£é”        unlock();    &#125;private:    void lock()    &#123;        pthread_mutex_lock(&amp;_mutex);    &#125;    void unlock()    &#123;        pthread_mutex_unlock(&amp;_mutex);    &#125;    //å”¤é†’æ¶ˆè´¹è€…    void WakeUpCon()    &#123;        pthread_cond_signal(&amp;_conInf);    &#125;    //å”¤é†’ç”Ÿäº§è€…    void WakeUpPro()    &#123;        pthread_cond_signal(&amp;_proInf);    &#125;    //æ¶ˆè´¹è€…ç­‰å¾…    void ConWait()    &#123;        pthread_cond_wait(&amp;_conInf,&amp;_mutex);    &#125;    //ç”Ÿäº§è€…ç­‰å¾…    void ProWait()    &#123;        pthread_cond_wait(&amp;_proInf,&amp;_mutex);    &#125;    //åˆ¤æ–­æ¡ä»¶    bool isFull()    &#123;        return _size == _bq.size();    &#125;    bool isEmpty()    &#123;        return _bq.empty();    &#125;&#125;;\n\n4.2.3 ä½¿ç”¨taskåˆ†é…è¿ç®—ä»»åŠ¡å› ä¸ºé˜»å¡é˜Ÿåˆ—æ˜¯ç”¨æ¨¡æ¿ç±»å‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªä»¿å‡½æ•°ï¼Œæ¥ç»™ç”Ÿäº§è€…æ¶ˆè´¹è€…åˆ†é…ä»»åŠ¡\n#pragma once#include &lt;iostream&gt;using namespace std;class Task&#123;public:    Task(int one=0, int two=0, char op=&quot;+&quot;)         : _elem1(one), _elem2(two), _operator(op)    &#123;&#125;    // ä»¿å‡½æ•°    int operator() ()    &#123;        return run();    &#125;    // è¿è¡Œä»¿å‡½æ•°    int run()    &#123;        int result = 0;        switch (_operator)        &#123;        case &#x27;+&#x27;:            result = _elem1 + _elem2;            break;        case &#x27;-&#x27;:            result = _elem1 - _elem2;            break;        case &#x27;*&#x27;:            result = _elem1 * _elem2;            break;        case &#x27;/&#x27;:        &#123;            if (_elem2 == 0)            &#123;                cout &lt;&lt; &quot;div zero, abort&quot; &lt;&lt; endl;                result = -1;            &#125;            else            &#123;                result = _elem1 / _elem2;            &#125;            break;        &#125;         case &#x27;%&#x27;:        &#123;            if (_elem2 == 0)            &#123;                cout &lt;&lt; &quot;mod zero, abort&quot; &lt;&lt; endl;                result = -1;            &#125;            else            &#123;                result = _elem1 % _elem2;            &#125;            break;        &#125;        default:            cout &lt;&lt; &quot;unknown: &quot; &lt;&lt; _operator &lt;&lt; endl;            break;        &#125;        return result;    &#125;    // è·å–å…ƒç´ ï¼Œæ–¹ä¾¿æ‰“å°    void get(int *e1, int *e2, char *op)    &#123;        *e1 = _elem1;        *e2 = _elem2;        *op = _operator;    &#125;private:    int _elem1;    int _elem2;    char _operator;&#125;;\n\næµ‹è¯•ä¸€ä¸‹\n#include &quot;blockqueue.hpp&quot;#include &quot;task.hpp&quot;#include &lt;time.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;string ops =&quot;+-*/%&quot;;void *consumer(void *args)&#123;    BlockQueue&lt;Task&gt; *bqp = (BlockQueue&lt;Task&gt; *)args;    while (1)    &#123;        Task t = bqp-&gt;pop();        int result = t();    //å¤„ç†ä»»åŠ¡        int one, two;        char op;        t.get(&amp;one, &amp;two, &amp;op);        cout &lt;&lt; &quot;consumer [&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = &quot; &lt;&lt; result &lt;&lt; endl;    &#125;&#125;void *producer(void *args)&#123;    BlockQueue&lt;Task&gt; *bqp = (BlockQueue&lt;Task&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œä»»åŠ¡        int one = rand() % 50;        int two = rand() % 20;        char op = ops[rand() % ops.size()];        Task t(one, two, op);        // æŠ•æ”¾ç»™æ¶ˆè´¹è€…ç”Ÿäº§        bqp-&gt;push(t);        cout &lt;&lt; &quot;producter[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = ?&quot; &lt;&lt; endl;        sleep(1);    &#125;&#125;void test2()&#123;    pthread_t t1,t2;    BlockQueue&lt;Task&gt; bq(5);    pthread_create(&amp;t1,nullptr,producer,(void*)&amp;bq);    sleep(1);    pthread_create(&amp;t2,nullptr,consumer,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;int main()&#123;    srand((unsigned long)time(nullptr));//ä¹˜ä¸€ä¸ªæ•°å­—æ·»åŠ éšæœºæ€§    test2();    return 0;&#125;\n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿäº§è€…ç”Ÿäº§äº†é—®é¢˜ä¹‹åï¼Œæ¶ˆè´¹è€…ä¼šå»è§£ç­”ã€‚æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦åœ¨çº¿ç¨‹ä¸­å–å›è¿ç®—å¥½çš„ç»“æœï¼Œå°±OKäº†ï¼\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./testproducter[140703422265088] 1673319321 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 43-16 = ?consumer [140703413872384] 1673319322 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 43-16 = 27producter[140703422265088] 1673319322 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 45/12 = ?consumer [140703413872384] 1673319322 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 45/12 = 3producter[140703422265088] 1673319323 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 17/7 = ?consumer [140703413872384] 1673319323 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 17/7 = 2producter[140703422265088] 1673319324 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 49-14 = ?consumer [140703413872384] 1673319324 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 49-14 = 35producter[140703422265088] 1673319325 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 4%4 = ?consumer [140703413872384] 1673319325 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 4%4 = 0\n\n\n5.é˜»å¡é˜Ÿåˆ—-å¾ªç¯é˜Ÿåˆ—5.0 ä¸ºå•¥ç”¨å¾ªç¯é˜Ÿåˆ—ä¸Šé¢çš„é˜Ÿåˆ—æ˜¯å°è£…äº†queueï¼Œä¸‹é¢æˆ‘ä»¬è¦åˆ©ç”¨ç¯å½¢é˜Ÿåˆ—çš„æ–¹å¼æ¥å®ç°ä¸€ä¸ªåŠŸèƒ½ç›¸åŒçš„ç¯å½¢é˜Ÿåˆ—ã€‚\næ‰€è°“å¾ªç¯é˜Ÿåˆ—ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¸­ï¼Œé€šè¿‡å¤´å°¾ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ¥æ ‡è¯†é˜Ÿåˆ—çš„å¤´å°¾ã€‚å¦‚æœæ•°æ®æ•°é‡è¶…å‡ºç©ºé—´æœ«å°¾ï¼Œåˆ™åœ¨ç©ºé—´çš„å¼€å¤´æ”¾å…¥ï¼Œå¹¶ç§»åŠ¨å°¾æŒ‡é’ˆ\n\nè¿™éƒ¨åˆ†å¯ä»¥çœ‹æˆ‘çš„åšå®¢ å¾ªç¯é˜Ÿåˆ—\n\nç”¨ä¸Šå¾ªç¯é˜Ÿåˆ—ï¼Œå°±æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ä¼˜åŠ¿ï¼šå› ä¸ºæˆ‘ä»¬è®¿é—®çš„ï¼ˆå‡è®¾æ˜¯æ•°ç»„ï¼‰æ˜¯ä¸åŒä¸‹æ ‡ä½ç½®ï¼Œå…¶å¹¶éåŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥åŒæ—¶è®¿é—®çš„ï¼è¿™æ ·å°±è¿›ä¸€æ­¥æ˜¾ç°äº†ç”Ÿäº§æ¶ˆè´¹çš„å¹¶å‘å±æ€§\nè¿™å°±ç›¸å½“äºæŠŠå¾ªç¯é˜Ÿåˆ—è¿™ä¸ªä¸´ç•Œèµ„æºåˆ†æˆäº†ä¸€å°å—ä¸€å°å—ï¼›åªæœ‰æ»¡&#x2F;ç©ºçš„æ—¶å€™ï¼Œå¤´å°¾æŒ‡é’ˆä¼šæŒ‡å‘åŒä¸€å—ç©ºé—´ï¼Œå…¶ä½™æ—¶é—´éƒ½æ˜¯ä¸å†²çªçš„ï¼\næ³¨æ„ï¼šè¿™éœ€è¦ç¨‹åºçŒ¿æ¥ä¿è¯ï¼Œè·å–äº†ä¿¡å·é‡ä¹‹åï¼Œè®¿é—®çš„è‚¯å®šæ˜¯ä¸´ç•Œèµ„æºä¸­çš„ä¸åŒåŒºåŸŸï¼Œå¦åˆ™æ˜¯ä¼šå‡ºé—®é¢˜çš„ï¼\n5.1 POSIXä¿¡å·é‡è¿™é‡Œåˆè¦é‡æ–°è®¤è¯†ä¸€ä¸‹ä¿¡å·é‡äº†ï¼Œåœ¨å…ˆå‰çš„åšå®¢ä¸­ï¼Œç®€å•æåˆ°äº†ä¿¡å·é‡çš„æ¦‚å¿µï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ã€‚\n\npæ“ä½œï¼šç”³è¯·èµ„æº\nvæ“ä½œï¼šå½’è¿˜èµ„æº\n\nå¯¹ä¿¡å·é‡çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œä¸ä¼šå› ä¸ºçº¿ç¨‹åˆ‡æ¢è€Œå‘ç”Ÿé”™è¯¯å’Œå†²çªã€‚\nå¾ªç¯é˜Ÿåˆ—éœ€è¦æœ‰ä¸¤ä¸ªæ ‡è¯†ç¬¦ï¼Œæ¥æ ‡è¯†å½“å‰æ•°æ®çš„å¤´å°¾ã€‚æ³¨æ„ï¼Œä¿¡å·é‡å¯ä¸èƒ½åšä¸‹æ ‡ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨intç±»å‹ï¼ŒåŠ é”æ¥è§£å†³åŸå­æ€§é—®é¢˜ï¼›\n\nä¿¡å·é‡åœ¨ç¯å½¢é˜Ÿåˆ—ä¸­çš„ä½œç”¨ï¼Œè¿˜æ˜¯ç”¨äºæ ‡è¯† ç©ºé—´å‰©ä½™/æ•°æ®æ•°é‡\nå› ä¸ºè¿™æ˜¯ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼š\n\nç”Ÿäº§è€…æ”¾å…¥æ•°æ®ï¼Œå¯¹åº”çš„æ˜¯ç©ºé—´ä¿¡å·é‡ï¼Œåªæœ‰æœ‰ç©ºé—´çš„æ—¶å€™ï¼Œæ‰èƒ½å¾€ç¯å½¢é˜Ÿåˆ—é‡Œé¢æ”¾å…¥\næ¶ˆè´¹è€…å–å‡ºæ•°æ®ï¼Œå¯¹åº”çš„æ˜¯æ•°æ®ä¿¡å·é‡ï¼Œæ²¡æœ‰æ•°æ®ä¹Ÿå°±ä¸èƒ½å–äº†\n\næ­¤æ—¶ï¼Œå…ˆå‰ä»‹ç»çš„semopå‡½æ•°åœ¨æ­¤ç¯èŠ‚ä¸å¤ªé€‚åˆï¼Œåœ¨æ­¤ä»‹ç»ä¸¤ä¸ªæ¥è‡ªpthreadåº“çš„æ–°æ¥å£ï¼›è¿™äº›æ¥å£åœ¨ç¼–è¯‘çš„æ—¶å€™éƒ½éœ€è¦å¸¦ä¸Š-lpthread\n5.1.1 sem_init&#x2F;destroy#include &lt;semaphore.h&gt;int sem_init(sem_t *sem, int pshared, unsigned int value);int sem_destroy(sem_t *sem);\n\nå› ä¸ºéƒ½æ˜¯pthreadåº“çš„ï¼Œå…¶ä½¿ç”¨æ–¹æ³•è¿˜æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¿¡å·é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ç»™å®šä¸€ä¸ªvalueä½œä¸ºä¿¡å·é‡çš„åˆå§‹å€¼ï¼›\nå¯¹initå‡½æ•°çš„psharedå‚æ•°åšä¸€å®šè®²è§£ï¼Œåœ¨manæ‰‹å†Œä¸­çš„ä»‹ç»æ˜¯è¿™æ ·çš„\n\nå¦‚æœæˆ‘ä»¬çš„ä¿¡å·é‡éœ€è¦åœ¨çº¿ç¨‹ä¸­å…±äº«ï¼Œé‚£å°±å°†è¯¥å‚æ•°è®¾ç½®ä¸º0ï¼›\nå¦‚æœä¿¡å·é‡éœ€è¦åœ¨è¿›ç¨‹ä¸­å…±äº«ï¼Œå…¶å°±åº”è¯¥å¤„åœ¨å…±äº«å†…å­˜åŒºåŸŸï¼Œå¯ä»¥å¯¹æ·»åŠ äº†å…±äº«å†…å­˜çš„è¿›ç¨‹ä¹‹é—´å…±äº«ï¼›\né˜»å¡é˜Ÿåˆ—æ˜¯ç»™çº¿ç¨‹ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®æˆ0å°±å¯ä»¥äº†ã€‚\n5.1.2 sem_waitè¿™ä¸ªæ¥å£å’Œé”&#x2F;æ¡ä»¶å˜é‡çš„waitæ˜¯ä¸€æ ·çš„ï¼Œå…¶ä½œç”¨æ˜¯ç”³è¯·ä¸€ä¸ªä¿¡å·é‡ï¼Œå¦‚æœä¿¡å·é‡ä¸º0ï¼Œåˆ™åœ¨æ­¤å¤„ç­‰å¾…ï¼Œç›´åˆ°ä¿¡å·é‡é0\nNAME       sem_wait, sem_timedwait, sem_trywait - lock a semaphoreSYNOPSIS       #include &lt;semaphore.h&gt;       int sem_wait(sem_t *sem);       int sem_trywait(sem_t *sem);       int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout);       Link with -pthread.\n\nå¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯è®©ä¿¡å·é‡-1\ntrywaitåˆ™æ˜¯éé˜»å¡æ£€æµ‹ï¼›timewaitæ˜¯è®¾ç½®ç­‰å¾…çš„æ—¶é—´ï¼Œè¶…æ—¶å°±ä¸ç­‰äº†ã€‚è¿™ç‚¹å’Œæ¡ä»¶å˜é‡çš„æ¥å£æ˜¯ä¸€æ ·çš„\n5.1.3  sem_postè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯é‡Šæ”¾ä¸€ä¸ªä¿¡å·é‡ï¼Œç›¸å½“äºç»™è¿™ä¸ªä¿¡å·é‡+1\nNAME       sem_post - unlock a semaphoreSYNOPSIS       #include &lt;semaphore.h&gt;       int sem_post(sem_t *sem);\n\n5.1.4 åœ¨å¾ªç¯é˜Ÿåˆ—é‡Œé¢ä½¿ç”¨çŸ¥é“äº†è¿™å‡ ä¸ªæ¥å£ï¼Œå¯¹äºæˆ‘ä»¬ç¯å½¢é˜Ÿåˆ—çš„ä½¿ç”¨å°±æ¯”è¾ƒæ˜äº†äº†\n\nå½“ç”Ÿäº§è€…å¼€å§‹ç”Ÿäº§çš„æ—¶å€™ï¼Œç”³è¯·ä¸€ä¸ªç©ºé—´ä¿¡å·é‡ï¼ˆå‰©ä½™ç©ºé—´-1ï¼‰ç”Ÿäº§å®Œæ¯•åï¼Œé‡Šæ”¾ä¸€ä¸ªæ•°é‡ä¿¡å·é‡ï¼ˆå‰©ä½™æ•°é‡+1ï¼‰\nå½“æ¶ˆè´¹è€…å¼€å§‹æ¶ˆè´¹çš„æ—¶å€™ï¼Œç”³è¯·ä¸€ä¸ªæ•°é‡ä¿¡å·é‡ï¼ˆå‰©ä½™æ•°é‡-1ï¼‰ç”Ÿäº§å®Œæ¯•åï¼Œé‡Šæ”¾ä¸€ä¸ªç©ºé—´ä¿¡å·é‡ï¼ˆå‰©ä½™ç©ºé—´+1ï¼‰\n\né™¤äº†è¿™ä¸¤ä¸ªä¿¡å·é‡ï¼Œç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ“ä½œå¤´å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿåˆ—æ­£ç¡®çš„ä½ç½®\n5.2 æˆå‘˜å˜é‡å‰é¢é“ºå«äº†é‚£ä¹ˆå¤šï¼Œç°åœ¨å°±å¯ä»¥æ¥è¯•è¯•æ°´äº†ï¼\nvector&lt;T&gt; _rq;//é˜Ÿåˆ—sem_t _spaceSem;//ç©ºé—´ä¿¡å·é‡sem_t _valueSem;//æ•°æ®ä¿¡å·é‡pthread_mutex_t _proMutex;//ç”Ÿäº§è€…çš„é”pthread_mutex_t _conMutex;//æ¶ˆè´¹è€…çš„é”size_t _rear;//å°¾æŒ‡é’ˆsize_t _front;//å¤´æŒ‡é’ˆ\n\nå› ä¸ºä¿¡å·é‡å°±å¯ä»¥å……å½“æ¡ä»¶å˜é‡çš„è§’è‰²ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸éœ€è¦æ¡ä»¶å˜é‡æ¥é€šçŸ¥ç”Ÿäº§è€…&#x2F;æ¶ˆè´¹è€…äº†\n5.3 æ„é€ &#x2F;ææ„æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯å†™æ„é€ &#x2F;ææ„äº†\nRingQueue(int capa = 5)    :_rq(capa),    _rear(0),    _front(0)&#123;    sem_init(&amp;_spaceSem,0,capa);//ç©ºé—´    sem_init(&amp;_valueSem,0,0);//æ•°é‡ä¸º0    pthread_mutex_init(&amp;_proMutex,nullptr);    pthread_mutex_init(&amp;_conMutex,nullptr);&#125;~RingQueue()&#123;    sem_destroy(&amp;_spaceSem);    sem_destroy(&amp;_valueSem);    pthread_mutex_destroy(&amp;_proMutex);    pthread_mutex_destroy(&amp;_conMutex);&#125;\n\n5.4 ç”Ÿäº§æ¶ˆè´¹é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå½“é˜Ÿåˆ—æ»¡&#x2F;ç©ºçš„æ—¶å€™ï¼Œåˆ†åˆ«å¯¹åº”å•¥æƒ…å†µ\n\næ»¡ï¼šç”Ÿäº§å¤ªå¤šäº†ï¼Œç”Ÿäº§è€…å¾—ä¼‘æ¯\nç©ºï¼šæ¶ˆè´¹å¤ªå¤šäº†ï¼Œæ¶ˆè´¹è€…å¾—ç¼“ç¼“\n\nå› ä¸ºæœ‰ä¿¡å·é‡å¸®æˆ‘ä»¬åšäº†è®¿é—®æ§åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—ä»€ä¹ˆæ—¶å€™ä¸ºæ»¡ï¼Œä»€ä¹ˆæ—¶å€™ä¸ºç©ºï¼š\n\næ»¡çš„æ—¶å€™ï¼šæ•°é‡&#x3D;é˜Ÿåˆ—å®¹é‡ï¼Œç©ºé—´ä¿¡å·é‡&#x3D;0ï¼Œæ— æ³•ç”³è¯·ç©ºé—´ï¼Œæ— æ³•ç”Ÿäº§\næ­¤æ—¶ç”Ÿäº§è€…ä¼šåœ¨ç©ºé—´ä¿¡å·é‡é‡Œé¢ç­‰å¾…ï¼Œä¸ä¼šç»§ç»­ç”Ÿäº§ï¼›æ¶ˆè´¹è€…ç»§ç»­æ¶ˆè´¹\nç©ºçš„æ—¶å€™ï¼šç©ºé—´&#x3D;é˜Ÿåˆ—å®¹é‡ï¼Œæ•°é‡ä¿¡å·é‡&#x3D;0ï¼Œæ²¡æœ‰å¯ä»¥æ¶ˆè´¹çš„\næ­¤æ—¶æ¶ˆè´¹è€…ä¼šåœ¨æ•°é‡ä¿¡å·é‡é‡Œé¢ç­‰å¾…ï¼Œä¸ä¼šç»§ç»­æ¶ˆè´¹ï¼›ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§\n\nè¿™ä¹Ÿæ˜¯ä¿¡å·é‡ä½œä¸ºè®¿é—®æ§åˆ¶çš„ä¸€å¤§ç‰¹å¾ï¼Œå½“ä½ ç”³è¯·æˆåŠŸäº†ï¼Œå°±ä»£è¡¨ä½ è‚¯å®šæœ‰ä¸´ç•Œèµ„æºçš„è®¿é—®æƒé™äº†ï¼›å†åŠ ä¸Šæˆ‘ä»¬ç»™è®¿é—®ä¸´ç•ŒåŒºåŠ äº†é”ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šå‡ºç°è¢«å…¶ä»–çº¿ç¨‹æŠ¢äº†çš„æƒ…å†µğŸ‰\n//ç”Ÿäº§è€…void Push(T&amp; in)&#123;    sem_wait(&amp;_spaceSem);//è·å–ç©ºé—´    pthread_mutex_lock(&amp;_proMutex);    _rq[_rear] = in; //ç”Ÿäº§    _rear++;         // å†™å…¥ä½ç½®åç§»    _rear %= _rq.size(); // æ›´æ–°ä¸‹æ ‡ï¼Œé¿å…è¶Šç•Œ    pthread_mutex_unlock(&amp;_proMutex);    sem_post(&amp;_valueSem);//é‡Šæ”¾æ•°é‡&#125;//æ¶ˆè´¹T pop()&#123;    sem_wait(&amp;_valueSem);    pthread_mutex_lock(&amp;_conMutex);    T tmp = _rq[_front];    _front++;    _front %= _rq.size();// æ›´æ–°ä¸‹æ ‡ï¼Œä¿è¯ç¯å½¢ç‰¹å¾    pthread_mutex_unlock(&amp;_conMutex);    sem_post(&amp;_spaceSem);    return tmp;&#125;\n\n5.5 æµ‹è¯•string ops =&quot;+-*/%&quot;;void *consumer(void *args)&#123;    RingQueue&lt;Task&gt; *bqp = (RingQueue&lt;Task&gt; *)args;    while (1)    &#123;        Task t = bqp-&gt;pop();        int result = t();    //å¤„ç†ä»»åŠ¡        int one, two;        char op;        t.get(&amp;one, &amp;two, &amp;op);        cout &lt;&lt; &quot;consumer [&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = &quot; &lt;&lt; result &lt;&lt; endl;    &#125;&#125;void *producer(void *args)&#123;    RingQueue&lt;Task&gt; *bqp = (RingQueue&lt;Task&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œä»»åŠ¡        int one = rand() % 50;        int two = rand() % 20;        char op = ops[rand() % ops.size()];        Task t(one, two, op);        // æŠ•æ”¾ç»™æ¶ˆè´¹è€…ç”Ÿäº§        bqp-&gt;push(t);        cout &lt;&lt; &quot;producter[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = ?&quot; &lt;&lt; endl;        sleep(1);    &#125;&#125;void test2()&#123;    pthread_t t1,t2;    RingQueue&lt;Task&gt; bq(5);    pthread_create(&amp;t1,nullptr,producer,(void*)&amp;bq);    sleep(1);    pthread_create(&amp;t2,nullptr,consumer,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;int main()&#123;    srand((unsigned long)time(nullptr));//ä¹˜ä¸€ä¸ªæ•°å­—æ·»åŠ éšæœºæ€§    test2();    return 0;&#125;\n\nåˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œå‘ç°äº†è¿™ä¸ªé”™è¯¯\n\nè¿™æ˜¯å› ä¸ºåœ¨taskä¸­ï¼Œæˆ‘ä»¬é‡å†™äº†æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆé»˜è®¤æ„é€ äº†\nTask(int one, int two, char op)     : _elem1(one), _elem2(two), _operator(op)&#123;&#125;\n\nè€Œåˆ›å»ºç¯å½¢é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚æ­¤æ—¶å‘ç°æ²¡æœ‰åŒ¹é…çš„æ„é€ å‡½æ•°ï¼ˆæ— å‚ï¼‰ï¼Œå°±ä¼šæŠ¥é”™ï¼\nè§£å†³åŠæ³•æ˜¯ï¼Œæ·»åŠ ä¸Šä¸€ä¸ªæ— å‚æ„é€ ï¼Œç›´æ¥ä½¿ç”¨defaultå…³é”®å­—å³å¯\nTask() = default;//ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„æ— å‚æ„é€ \n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿäº§æ¶ˆè´¹ç¨³å®šè·‘èµ·æ¥äº†ï¼\n[muxue@bt-7274:~/git/linux/code/23-01-17 ringqueue]$ ./testproducter[139758380586752] 1673936332 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 24-8 = ?producter[139758380586752] 1673936333 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 34/19 = ?consumer [139758372194048] 1673936333 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 24-8 = 16consumer [139758372194048] 1673936333 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 34/19 = 1producter[139758380586752] 1673936334 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 18*16 = ?consumer [139758372194048] 1673936334 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 18*16 = 288producter[139758380586752] 1673936335 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 48+15 = ?consumer [139758372194048] 1673936335 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 48+15 = 63\n\nå¢å¤šçº¿ç¨‹ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/23-01-17 ringqueue]$ ./testproducter[140344921630464] 1673936659 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 44-15 = ?consumer [140344913237760] 1673936660 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 44-15 = 29producter[140344921630464] 1673936660 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 33+14 = ?consumer [140344913237760] 1673936660 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 33+14 = 47producter[140344904845056] 1673936661 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 14/12 = ?consumer [140344896452352] 1673936661 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 14/12 = 1producter[140344921630464] 1673936661 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 24-16 = ?consumer [140344913237760] 1673936661 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 24-16 = 8producter[140344904845056] 1673936662 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 3-3 = ?consumer [140344896452352] 1673936662 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 3-3 = 0producter[140344921630464] 1673936662 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 36*7 = ?consumer [140344913237760] 1673936662 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 36*7 = 252producter[140344904845056] 1673936663 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 28+8 = ?consumer [140344896452352] 1673936663 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 28+8 = 36producter[140344921630464] 1673936663 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 26-5 = ?consumer [140344913237760] 1673936663 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 26-5 = 21\n\nç»“è¯­å…³äºçº¿ç¨‹åŒæ­¥çš„çŸ¥è¯†ç‚¹ï¼Œå¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚åšå®¢å†™çš„æ»¡æ»¡å½“å½“ï¼Œåœ¨ç†è§£äº†æ¥å£çš„åŸºæœ¬å‘½åå’Œä½¿ç”¨é€»è¾‘åï¼Œæ„Ÿè§‰å°±æ²¡æœ‰é‚£ä¹ˆéš¾äº†\nåŠ æ²¹å“¦ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘çº¿ç¨‹å®ä¾‹ | ç®€å•çº¿ç¨‹æ± ","url":"/2023/01/19/note_Linux/22%E7%BA%BF%E7%A8%8B%E6%B1%A0/","content":"ä»Šå¤©æ¥å†™ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„çº¿ç¨‹æ± \n\n\n1.å•¥æ˜¯çº¿ç¨‹æ± æ± å¡˜ï¼Œé¡¾åæ€ä¹‰ï¼Œçº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šçº¿ç¨‹çš„å®¹å™¨ã€‚\næˆ‘ä»¬åªéœ€è¦æŠŠä»»åŠ¡äº¤åˆ°è¿™ä¸ªçº¿ç¨‹çš„æ± å­é‡Œé¢ï¼Œå…¶å°±èƒ½å¸®æˆ‘ä»¬å¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè®¡ç®—å‡ºç»“æœã€‚\nä¸é˜»å¡é˜Ÿåˆ—ä¸åŒçš„æ˜¯ï¼Œçº¿ç¨‹æ± ä¸­å†…æœ‰ä¸€ä¸ªé˜Ÿåˆ—ç”¨äºä»»åŠ¡ç®¡ç†ï¼Œå¹¶å¸®æˆ‘ä»¬å°è£…äº†çº¿ç¨‹åˆ›å»ºçš„å·¥ä½œã€‚æˆ‘ä»¬ä¸å†éœ€è¦åœ¨ä¸»æ‰§è¡Œæµé‡Œé¢åˆ›å»ºçº¿ç¨‹ï¼ˆåˆ›å»ºçº¿ç¨‹ä¹Ÿæ˜¯æœ‰æ—¶é—´æ¶ˆè€—çš„ï¼‰ï¼Œè€Œæ˜¯åªå…³æ³¨äºä»»åŠ¡çš„åˆ›å»ºï¼Œäº¤ç»™çº¿ç¨‹æ± æ¥è¿è¡Œå¹¶äº§ç”Ÿç»“æœå°±OKäº†\nå‰é¢å·²ç»å­¦ä¹ è¿‡é˜»å¡é˜Ÿåˆ—äº†ï¼Œæ­¤æ—¶å†æ¥å†™çº¿ç¨‹æ± ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆå›°éš¾äº†ï¼\næœ¬æ¬¡çº¿ç¨‹æ± çš„è®¾è®¡è¿˜ä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼ŒåŒä¸€ä¸ªæ¨¡æ¿ç±»å‹çš„ä»»åŠ¡ï¼Œåªéœ€è¦ä¸€ä¸ªçº¿ç¨‹æ± å³å¯\n1.1 ç®€å•å¤ä¹ å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼åˆ†ä¸ºä¸¤ç§è®¾è®¡æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æ‡’æ±‰ï¼Œä¸€ä¸ªæ˜¯é¥¿æ±‰\n\næ‡’æ±‰ï¼šåˆšå¼€å§‹å…ˆä¸åˆ›å»ºå•ä¾‹ï¼Œç­‰ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™åœ¨åˆ›å»ºï¼›ç¼ºç‚¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å•ä¾‹éœ€è¦ç­‰å¾…ï¼Œä¼˜ç‚¹æ˜¯ç¨‹åºå¯åŠ¨å¿«\né¥¿æ±‰ï¼šmainå‡½æ•°æ‰§è¡Œå‰ï¼Œå°±å°†å•ä¾‹åˆ›å»ºèµ·æ¥ï¼›ç¼ºç‚¹æ˜¯ç¨‹åºå¯åŠ¨ä¼šæ¯”è¾ƒæ…¢ï¼Œä¼˜ç‚¹æ˜¯å¯åŠ¨ä¹‹åè·å–å•ä¾‹ä¼šå¿«\n\n2.ä»£ç ç¤ºä¾‹-å¤„ç†task2.1 æˆå‘˜å˜é‡å› ä¸ºæ˜¯çº¿ç¨‹æ± ï¼Œéœ€è¦åœ¨å†…éƒ¨åˆ›å»ºå‡ºçº¿ç¨‹æ¥è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªnumæ¥æ ‡è¯†éœ€è¦åˆ›å»ºçš„çº¿ç¨‹çš„æ•°é‡\ntemplate &lt;class T&gt;class ThreadPool&#123;private:\tbool _isStart;  // çº¿ç¨‹æ± å­æ˜¯å¦å¯åŠ¨    int _threadNum; // çº¿ç¨‹æ•°é‡    queue&lt;T&gt; _tq;   // ä»»åŠ¡é˜Ÿåˆ—    pthread_mutex_t _mutex;// é”    pthread_cond_t _cond;  // æ¡ä»¶å˜é‡    static ThreadPool&lt;T&gt; *instance; // å•ä¾‹æ¨¡å¼éœ€è¦ç”¨åˆ°çš„æŒ‡é’ˆ&#125;\n\nè¿™é‡Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¼„ä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾å·²ç»åˆ›å»ºçš„çº¿ç¨‹ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒçº¿ç¨‹çš„é€€å‡ºä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œç®¡ç†ã€‚åœ¨åˆ›å»ºå¥½çº¿ç¨‹ä¹‹åï¼Œç›´æ¥detachå³å¯\nstaticå˜é‡æˆ‘ä»¬éœ€è¦åœ¨ç±»å¤–åˆå§‹åŒ–ï¼Œå› ä¸ºæ˜¯æ¨¡æ¿ç±»å‹ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¸¦ä¸Štemplateå…³é”®å­—\n// åˆå§‹åŒ–staticå˜é‡template &lt;class T&gt;ThreadPool&lt;T&gt; *ThreadPool&lt;T&gt;::instance = nullptr;\n\n2.2 æ„é€ &#x2F;ææ„æœ¬æ¬¡ä½¿ç”¨çš„æ˜¯æ‡’æ±‰æ¨¡å¼çš„å•ä¾‹ï¼Œæä¾›ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºå•ä¾‹ï¼Œä¸å¼€æ”¾æ„é€ å‡½æ•°\nprivate:    ThreadPool(int num = DEFALUT_NUM)        : _threadNum(num),          _isStart(false)    &#123;        assert(num &gt; 0);        pthread_mutex_init(&amp;_mutex, nullptr);        pthread_cond_init(&amp;_cond, nullptr);    &#125;    ThreadPool(const ThreadPool&lt;T&gt; &amp;) = delete;//å–æ¶ˆæ‹·è´    void operator=(const ThreadPool&lt;T&gt; &amp;) = delete;//å–æ¶ˆèµ‹å€¼\n\nåŒæ—¶ï¼Œåˆ©ç”¨deleteå…³é”®å­—ï¼Œç¦æ­¢æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½ï¼›ææ„ä¾æ—§ä¿æŒå…¬æœ‰\n~ThreadPool()&#123;    pthread_mutex_destroy(&amp;_mutex);    pthread_cond_destroy(&amp;_cond);&#125;\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æœ‰ä¸€ä¸ªstaticæˆå‘˜å‡½æ•°æ¥è·å–å•ä¾‹ï¼›åœ¨ä¹‹å‰çš„å•ä¾‹æ¨¡å¼åšå®¢ä¸­ï¼Œæåˆ°å½“åˆå®ç°çš„æ‡’æ±‰æ¨¡å¼æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæ²¡æœ‰å¯¹çº¿ç¨‹è¿›è¡ŒåŠ é”ï¼Œé¿å…å¤šä¸ªæ‰§è¡ŒæµåŒæ—¶è·å–å•ä¾‹ï¼Œå¯¼è‡´å•ä¾‹å¯¹è±¡å†²çªçš„é—®é¢˜ã€‚\nç°åœ¨å­¦ä¹ äº†linuxçš„åŠ é”æ“ä½œï¼Œå°±å¯ä»¥é¿å…æ‰è¿™ä¸ªbugäº†\nä¸¤æ¬¡nullptråˆ¤æ–­å…¶ä¸­å…³äºä¸¤æ¬¡nullptråˆ¤æ–­çš„åŸå› ï¼Œè¯¦è§æ³¨é‡Š\n\nç¬¬ä¸€ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†ä¿è¯å•ä¾‹ï¼Œåªè¦å•ä¾‹å­˜åœ¨äº†ï¼Œå°±ä¸å†åˆ›å»ºå•ä¾‹\nç¬¬äºŒä¸ªåˆ¤æ–­æ˜¯ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¯èƒ½ä¼šå‡ºç°çº¿ç¨‹aåœ¨åˆ›å»ºå•ä¾‹ï¼Œçº¿ç¨‹båœ¨é”ä¸­ç­‰å¾…çš„æƒ…å†µï¼›æ­¤æ—¶å¦‚æœä¸è¿›è¡Œç¬¬äºŒæ¬¡nullptråˆ¤æ–­ï¼Œçº¿ç¨‹bä»é”ä¸­è¢«å”¤é†’åï¼Œåˆä¼šç»§ç»­æ‰§è¡Œï¼Œå¤šåˆ›å»ºäº†ä¸€ä¸ªå•ä¾‹ï¼\n\npublic:    static ThreadPool&lt;T&gt; *getInstance()    &#123;        static pthread_mutex_t mt;//ä½¿ç”¨staticï¼Œåªä¼šåˆ›å»ºä¸€æ¬¡ï¼›é¿å…å¤šæ¬¡å®ä¾‹åŒ–ï¼Œä¸€ä¸ªæ‰§è¡Œæµä¸€ä¸ªé”ï¼Œå¤±å»æ•ˆæœ        pthread_mutex_init(&amp;mt,nullptr);        if (instance == nullptr) // ç¬¬ä¸€æ¬¡åˆ¤æ–­        &#123;            pthread_mutex_lock(&amp;mt);// åŠ é”ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµèµ°åˆ°è¿™é‡Œ            if (instance == nullptr)// ç¬¬äºŒæ¬¡åˆ¤æ–­æ˜¯æ¥ç¡®è®¤çš„ï¼Œé¿å…å‡ºç°åœ¨åŠ é”å‰ï¼Œè¢«å…¶ä»–æ‰§è¡Œæµè·å–è¿‡å®ä¾‹äº†            &#123;                instance = new ThreadPool&lt;T&gt;();// ç¡®è®¤æ˜¯nullï¼Œåˆ›å»ºå•ä¾‹            &#125;        &#125;        pthread_mutex_unlock(&amp;mt);        pthread_mutex_destroy(&amp;mt);        return instance;    &#125;\n\n2.3 å¯åŠ¨çº¿ç¨‹æ± æœ‰äº†çº¿ç¨‹æ± ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å¯åŠ¨å®ƒğŸ˜\nå¯åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦assertåˆ¤æ–­ä¸€ä¸‹è¯¥çº¿ç¨‹æ± æ˜¯å¦å·²ç»å¯åŠ¨äº†ï¼Œé¿å…å¤šæ¬¡å¯åŠ¨çº¿ç¨‹æ± å‡ºç°é—®é¢˜ã€‚å¯åŠ¨å®Œæˆä¹‹åï¼Œæ›´æ–°isStartçš„çŠ¶æ€å€¼\nvoid start()&#123;    assert(!_isStart);//å¦‚æœå¼€å¯äº†ï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ‰§è¡Œè¯¥å‡½æ•°    for (int i = 0; i &lt; _threadNum; i++)    &#123;        pthread_t temp;        pthread_create(&amp;temp, nullptr, threadRoutine, this);//æŠŠthiså½“å‚æ•°ä¼ å…¥        usleep(100);        pthread_detach(temp);//åˆ†ç¦»çº¿ç¨‹    &#125;    _isStart = true;//æ ‡è¯†çŠ¶æ€ï¼Œä»£è¡¨çº¿ç¨‹æ± å·²ç»å¯åŠ¨äº†&#125;\n\nè¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªå‡½æ•°threadRoutineï¼Œè¿™æ˜¯æ¯ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå…¶ä¸ºstaticå‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬è·å–åˆ°çš„éƒ½æ˜¯å•ä¾‹çš„thisæŒ‡é’ˆï¼Œè®¿é—®æˆå‘˜éƒ½éœ€è¦é€šè¿‡thisæŒ‡é’ˆæ¥è®¿é—®\nstatic void *threadRoutine(void *args)&#123;    ThreadPool&lt;T&gt; *tp = static_cast&lt;ThreadPool&lt;T&gt; *&gt;(args);//c++å¼ºè½¬    while (1)    &#123;        tp-&gt;lockQueue();        while (!tp-&gt;haveTask())        &#123;            tp-&gt;waitForTask();        &#125;        // ä»»åŠ¡è¢«æ‹¿åˆ°äº†çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­        T t = tp-&gt;pop();        tp-&gt;unlockQueue();        // è§„å®šæ¯ä¸€ä¸ªå°è£…çš„taskå¯¹è±¡éƒ½éœ€è¦æœ‰ä¸€ä¸ªrunå‡½æ•°        t.resultPrint(t.run());//è¿è¡Œå¹¶æ‰“å°ç»“æœ    &#125;&#125;\n\n2.4 å°è£…çš„åŠ é”&#x2F;è§£é”&#x2F;é€šçŸ¥æ“ä½œè¿™éƒ¨åˆ†æ“ä½œæ¯”è¾ƒç®€å•ï¼Œå°±ä¸å¤šæäº†ã€‚å…¶å®å°±æ˜¯æŠŠå·²æœ‰çš„å‡½æ•°æ”¹ä¸ªåå­—ï¼Œå˜æˆæ— å‚å¯ç›´æ¥è°ƒç”¨çš„å‡½æ•°ç½¢äº†ã€‚\nprivate:    void lockQueue() &#123; pthread_mutex_lock(&amp;_mutex); &#125;    void unlockQueue() &#123; pthread_mutex_unlock(&amp;_mutex); &#125;    bool haveTask() &#123; return !_tq.empty(); &#125;    void waitForTask() &#123; pthread_cond_wait(&amp;_cond, &amp;_mutex); &#125;    void singalThread() &#123; pthread_cond_signal(&amp;_cond); &#125;    T pop()    &#123;        T temp = _tq.front();        _tq.pop();        return temp;    &#125;\n\nå…¶ä¸­pop()å‡½æ•°è®¾ç½®ä¸ºäº†ç§æœ‰ï¼Œå› ä¸ºçº¿ç¨‹æ± ä¼šè‡ªå·±å¼€å§‹å¤„ç†ä»»åŠ¡ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤–éƒ¨pop\n\n2.5 æ’å…¥ä»»åŠ¡æœ€åå°±åªå‰©ä¸‹ä»»åŠ¡çš„æ’å…¥äº†ï¼Œæ’å…¥ä¸€ä¸ªä»»åŠ¡åï¼Œä½¿ç”¨æ¡ä»¶å˜é‡ï¼Œå”¤é†’çº¿ç¨‹æ± ä¸­çš„ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼\n//å¾€çº¿ç¨‹æ± ä¸­ç»™ä»»åŠ¡void push(const T &amp;in)&#123;    lockQueue();    _tq.push(in);//æ’å…¥ä»»åŠ¡    singalThread();//ä»»åŠ¡æ’å…¥åï¼Œå”¤é†’ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ    unlockQueue();&#125;\n\nåˆ°è¿™é‡Œï¼Œçº¿ç¨‹æ± å°±å¤§åŠŸå‘Šæˆäº†ï¼\n3.æµ‹è¯•æœ¬æ¬¡æµ‹è¯•ä¾æ—§ä½¿ç”¨äº†åœ¨çº¿ç¨‹åšå®¢ä¸­æåˆ°è¿‡çš„task.hppï¼Œå®Œæ•´ä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“\nå› ä¸ºä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œä¸»æ‰§è¡Œæµåªéœ€è¦æ¥æ´¾å‘ä»»åŠ¡å³å¯ï¼›\n#include &quot;threadpool.hpp&quot;#include &quot;task.hpp&quot;#include &lt;string&gt;#include &lt;time.h&gt;int main()&#123;    const string operators = &quot;+/*/%&quot;;    ThreadPool&lt;Task&gt;*tp = ThreadPool&lt;Task&gt;::getInstance();    tp-&gt;start();    srand((unsigned long)time(nullptr) ^ getpid() ^ pthread_self());    // æ´¾å‘ä»»åŠ¡çš„çº¿ç¨‹    while(1)    &#123;        int one = rand()%50;        int two = rand()%10;        char oper = operators[rand()%operators.size()];        cout &lt;&lt; &quot;[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; oper &lt;&lt; two &lt;&lt; &quot;=?&quot; &lt;&lt; &quot;\\n&quot;;        Task t(one, two, oper);        tp-&gt;push(t);        sleep(1);    &#125;    &#125;\n\næ­¤æ—¶çº¿ç¨‹æ± å°±ä¼šå¸®æˆ‘ä»¬è¿è¡Œï¼Œå¹¶å°†ç»“æœè¾“å‡ºï¼\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ./test[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 14/8=?[140202973767424] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 14/8=1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 43*2=?[140202965374720] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 43*2=86[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 10/9=?[140202956982016] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 10/9=1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 25*9=?[140202948589312] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 25*9=225[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 8/0=?div zero, abort[140202940196608] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 8/0=-1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 38%1=?[140202973767424] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 38%1=0[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 23/7=?[140202965374720] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 23/7=3[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 4%4=?[140202956982016] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 4%4=0[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 44*8=?[140202948589312] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 44*8=352[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 4/2=?\n\n3.1 ä¿®æ”¹è½»é‡çº§è¿›ç¨‹çš„åå­—Linuxæä¾›äº†ä¸€ä¸ªæœ‰è¶£çš„æ¥å£ï¼Œå¯ä»¥å…è®¸æˆ‘ä»¬ä¿®æ”¹è½»é‡çº§è¿›ç¨‹çš„åå­—ï¼›\næ²¡æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œé»˜è®¤çš„åå­—éƒ½æ˜¯è¯¥è¿›ç¨‹çš„å¯æ‰§è¡Œç¨‹åºçš„åå­—\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ps -aL  PID   LWP TTY          TIME CMD 6592  6592 pts/7    00:00:00 test 6592  6593 pts/7    00:00:00 test 6592  6594 pts/7    00:00:00 test 6592  6595 pts/7    00:00:00 test 6592  6596 pts/7    00:00:00 test 6592  6597 pts/7    00:00:00 test 6730  6730 pts/8    00:00:00 ps\n\næˆ‘ä»¬ä½¿ç”¨prctlæ¥å£ï¼Œä¿®æ”¹åå­—ï¼›è¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å¯¹ä¸€ä¸ªè¿›ç¨‹è¿›è¡Œæ“ä½œã€‚\n#include &lt;sys/prctl.h&gt;int prctl(int option, unsigned long arg2, unsigned long arg3,\t\tunsigned long arg4, unsigned long arg5);\n\nå…¶ä¸­ä¿®æ”¹çº¿ç¨‹åå­—çš„æ“ä½œå¦‚ä¸‹\nprctl(PR_SET_NAME, &quot;handler&quot;);//ä¿®æ”¹çº¿ç¨‹åå­—ä¸ºhandler\n\nåˆ†åˆ«ä¿®æ”¹ä¸»æ‰§è¡Œæµå’Œçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„åå­—ï¼Œå³å¯è·å¾—ä¸ä¸€æ ·çš„ç»“æœ\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ps -aL  PID   LWP TTY          TIME CMD 7793  7793 pts/7    00:00:00 master 7793  7794 pts/7    00:00:00 handler 7793  7795 pts/7    00:00:00 handler 7793  7796 pts/7    00:00:00 handler 7793  7797 pts/7    00:00:00 handler 7793  7798 pts/7    00:00:00 handler 7828  7828 pts/8    00:00:00 ps\n\nè¿™æ ·å¯ä»¥ç”¨äºæ ‡è¯†çº¿ç¨‹çš„å±æ€§ï¼Œè¿˜æ˜¯æœ‰äº›ç”¨çš„ï¼\nThe endæœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±overå•¦ï¼Œæœ‰å•¥é—®é¢˜æ¬¢è¿è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘æ—‹è½¬é” | è¯»å†™é”","url":"/2023/01/20/note_Linux/23%E6%97%8B%E8%BD%AC%E9%94%81_%E8%AF%BB%E5%86%99%E9%94%81/","content":"åœ¨ä¹‹å‰çš„çº¿ç¨‹å­¦ä¹ ä¸­ï¼Œç”¨åˆ°çš„é”éƒ½æ˜¯æŒ‚èµ·ç­‰å¾…é”ï¼Œå¦‚æœç”³è¯·ä¸åˆ°é”ï¼Œé‚£å°±ä¼šåœ¨é”ä¸­ç­‰å¾…ï¼›\nè‡ªæ—‹é”åˆ™ä¸å¤§ç›¸ä¼¼\n\n\n[TOC]\n1.è‡ªæ—‹é”1.1 æ¦‚å¿µè‡ªæ—‹é”æ˜¯ä¸€ä¸ªè½®è¯¢æ£€æµ‹é”ï¼Œå…¶æ£€æµ‹æœºåˆ¶å¹¶ä¸æ˜¯æŒ‚èµ·ç­‰å¾…ï¼Œè€Œæ˜¯ä¸æ–­çš„è¯¢é—®é”æœ‰æ²¡æœ‰ç©ºé—²ï¼›ç±»ä¼¼äºä¸€ä¸ªwhile(1)å¾ªç¯çš„trylock()\nç”±äºå…¶éœ€è¦ä¸æ–­çš„è½®è¯¢æ£€æµ‹ï¼Œæ‰€ä»¥ä¼šå ç”¨ä¸€å®šçš„CPUèµ„æºï¼›å¦‚æœçº¿ç¨‹è¾ƒå¤šï¼Œå°±å®¹æ˜“ç»™cpué€ æˆè´Ÿè·ã€‚\nä½†æ˜¯è‡ªæ—‹é”æ— é¡»å”¤é†’æŒ‚èµ·ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå…¶æ¶ˆè€—è¾ƒå°ã€‚\næ€»ç»“ä¸€ä¸‹ï¼š\n\nè‡ªæ—‹é”é€‚åˆç«äº‰ä¸æ¿€çƒˆï¼Œä¸”ä¸´ç•ŒåŒºè¾ƒå°ï¼ˆå‘†çš„æ—¶é—´çŸ­ï¼‰çš„æƒ…å†µ\nè‡ªæ—‹é”ä¸é€‚åˆå¤§é‡çº¿ç¨‹ï¼Œä¸´ç•ŒåŒºé•¿çš„æƒ…å†µ\n\nè‡ªæ—‹é”çš„ä¼˜ç¼ºç‚¹åè¿‡æ¥ï¼Œä¾¿æ˜¯æŒ‚èµ·ç­‰å¾…é”çš„ä¼˜ç¼ºç‚¹äº†ã€‚æˆ‘ä»¬è¦æ ¹æ®ä¸åŒåœºæ™¯ï¼Œæ­£ç¡®é€‰æ‹©é”çš„ç±»å‹\n1.2 æ¥å£ç›¸å…³æ¥å£å’Œmutexéƒ½æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºä½¿ç”¨çš„æ•ˆæœäº†\n1.2.1 pthread_spin_init&#x2F;destroy#include &lt;pthread.h&gt;int pthread_spin_destroy(pthread_spinlock_t *lock);int pthread_spin_init(pthread_spinlock_t *lock, int pshared);\n\n1.2.2 pthread_spin_lockè‡ªæ—‹é”åŒæ ·æœ‰trylockæ¥å£ï¼Œç”¨äºåˆ¤æ–­é”æ˜¯å¦å°±ç»ª\n#include &lt;pthread.h&gt;int pthread_spin_lock(pthread_spinlock_t *lock);int pthread_spin_trylock(pthread_spinlock_t *lock);\n\n1.2.3 pthread_spin_unlock#include &lt;pthread.h&gt;int pthread_spin_unlock(pthread_spinlock_t *lock);\n2.è¯»å†™é”æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä»½configé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¼šæœ‰éå¸¸å¤šçš„çº¿ç¨‹è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯å¾ˆå°‘è¿›è¡Œä¿®æ”¹å’Œå†™å…¥ã€‚\næ­¤æ—¶æˆ‘ä»¬å¦‚æœå¯¹é…ç½®æ–‡ä»¶çš„è¯»å–è¿›è¡ŒåŠ é”ï¼Œå°±å®¹æ˜“å¯¼è‡´æ•ˆç‡é—®é¢˜ï¼Œä¼—å¤šçº¿ç¨‹ä¸æ–­è¢«é˜»å¡ï¼Œäº§ç”Ÿæ€§èƒ½æŸå¤±ã€‚\næ­¤æ—¶ï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ªä¸“é—¨çš„è¯»å†™é”ï¼Œå¯¹è¯»è€…å’Œå†™è€…åŠ ä¸åŒçš„é”ï¼Œåœ¨æå‡è¯»å–æ€§èƒ½çš„åŒæ—¶ï¼Œä¿è¯å†™å…¥ä¸å†²çª\n2.1 è¯»è€…å†™è€…çš„å…³ç³»å†™ç€å’Œå†™ç€ä¹‹é—´ä¸ç”¨å¤šè¯´ï¼Œè‚¯å®šæ˜¯äº’æ–¥å…³ç³»ï¼›\nè¯»è€…å’Œå†™è€…ä¹‹é—´ä¹Ÿæ˜¯äº’æ–¥å…³ç³»ï¼Œåœ¨å†™å…¥çš„æ—¶å€™ï¼Œä¸èƒ½è¿›è¡Œè¯»å–ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§é—®é¢˜ï¼›\n\nå†™è€…å†™å…¥äº†ä¸€ä¸ªaï¼Œçº¿ç¨‹ç”²æ¥è¯»å–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯a\nå†™è€…ç»§ç»­å†™å…¥äº†bï¼Œçº¿ç¨‹ä¹™æ¥è¯»å–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ab\n\nè¿™æ˜¯å› ä¸ºå†™è€…çš„å†™å…¥è¿˜æ²¡æœ‰å®Œæˆï¼Œå¯¼è‡´ç”²ä¹™è¯»è€…ä¼šè·å–åˆ°å®Œå…¨ä¸åŒçš„ç»“æœï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼›\nè¯»è€…å’Œè¯»è€…ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¯»è€…å¹¶ä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œä¹Ÿä¸ä¼šå–èµ°æ•°æ®ï¼Œå…¶å­˜åœ¨å¯¹ä¸´ç•Œèµ„æºæ²¡æœ‰å½±å“ã€‚\n\n2.2 æ¥å£2.2.1 init&#x2F;destroyè¯»å†™é”åªéœ€è¦åˆå§‹ä¸€ä¸ªé”å°±è¡Œäº†ï¼Œæ— é¡»å¯¹è¯»è€…å†™è€…åˆå§‹åŒ–ä¸¤ä¸ªä¸åŒçš„é”\n#include &lt;pthread.h&gt;int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock,\t\t\t\t\tconst pthread_rwlockattr_t *restrict attr);\n\n2.2.2 è¯»è€…åŠ é”è¯»å†™é”çš„è¯»è€…é”&#x2F;å†™è€…é”æ˜¯åˆ†å¼€çš„ï¼Œæˆ‘ä»¬è¦é’ˆå¯¹ä¸åŒçš„çº¿ç¨‹è°ƒç”¨ä¸åŒçš„é”\n#include &lt;pthread.h&gt;int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);\n\nä½†æ˜¯è§£é”çš„æ¥å£æ˜¯ä¸€æ ·çš„\n#include &lt;pthread.h&gt;int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);\n\n2.2.3 å†™è€…åŠ é”#include &lt;pthread.h&gt;int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);\n\n2.2.4 è®¾ç½®é”çš„å±æ€§\nå‚è€ƒ PTHREAD_RWLOCKATTR_SETKIND_NP - Linuxæ‰‹å†Œé¡µ\n\nè¯»å†™é”å¯ä»¥å…è®¸æˆ‘ä»¬è®¾ç½®æ˜¯è¯»è€…ä¼˜å…ˆè¿˜æ˜¯å†™è€…ä¼˜å…ˆã€‚å¦‚æœé‡‡ç”¨é»˜è®¤çš„å±æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°è¯»è€…ä¸€ç›´åœ¨è¯»ï¼Œå†™è€…æ²¡æœ‰åŠæ³•å†™å…¥çš„æƒ…å†µï¼ˆæ‰“å°é”™ä½æ˜¯æ­£å¸¸æƒ…å†µï¼‰\n[muxue@bt-7274:~/git/linux/code/23-01-20 rwlock]$ ./testreader [140484801697536]reader [140484801697536] 0reader [140484793304832]reader [reader [140484784912128140484793304832]reader [140484784912128] 0] 0reader [140484759734016]reader [140484759734016] 0reader [140484776519424]\n\næ­¤æ—¶å°±å‡ºç°äº†å†™è€…é¥¥é¥¿é—®é¢˜ï¼Œå†™è€…æ— æ³•è®¿é—®ä¸´ç•Œèµ„æºï¼Œé¥¿æ­»äº†ğŸ˜‚\næˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè®¾ç½®è¯»å†™é”çš„å±æ€§\nint pthread_rwlockattr_setkind_np(pthread_rwlockattr_t *attr, int pref); /* pref å…±æœ‰ 3 ç§é€‰æ‹©PTHREAD_RWLOCK_PREFER_READER_NP (é»˜è®¤è®¾ç½®) è¯»è€…ä¼˜å…ˆï¼Œå¯èƒ½ä¼šå¯¼è‡´å†™è€…é¥¥é¥¿æƒ…å†µPTHREAD_RWLOCK_PREFER_WRITER_NP å†™è€…ä¼˜å…ˆï¼Œç›®å‰æœ‰ BUGï¼Œå¯¼è‡´è¡¨ç°è¡Œä¸ºå’Œ PTHREAD_RWLOCK_PREFER_READER_NP ä¸€è‡´PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP å†™è€…ä¼˜å…ˆï¼Œä½†å†™è€…ä¸èƒ½é€’å½’åŠ é”ï¼Œé¿å…æ­»é”*/\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹\npthread_rwlock_t rwlock;//é”pthread_rwlockattr_t attr;//å±æ€§pthread_rwlockattr_init(&amp;attr);//åˆå§‹åŒ–å±æ€§pthread_rwlockattr_setkind_np(&amp;attr, PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP);//è®¾ç½®é”çš„å±æ€§ä¸ºå†™è€…ä¼˜å…ˆpthread_rwlock_init(&amp;rwlock, &amp;attr);//åˆå§‹åŒ–å¹¶è®¾ç½®è¯»å†™é”çš„å±æ€§\n\n2.3 ä»£ç #include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;pthread.h&gt;using namespace std;volatile int board = 0;//ä¸´ç•Œèµ„æºpthread_rwlock_t rw;//å…¨å±€è¯»å†™é”void *reader(void* args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;    //sleep(1);    while(true)    &#123;        pthread_rwlock_rdlock(&amp;rw);        cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;] &quot; &lt;&lt; board &lt;&lt; endl;        pthread_rwlock_unlock(&amp;rw);        usleep(110);    &#125;&#125;void *writer(void *args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    //sleep(1);    while(true)    &#123;        pthread_rwlock_wrlock(&amp;rw);        board++;        cout &lt;&lt; &quot;writer [&quot; &lt;&lt; pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;        pthread_rwlock_unlock(&amp;rw);        usleep(100);    &#125;&#125;int main()&#123;    pthread_rwlock_init(&amp;rw, nullptr);    pthread_t r1,r2,r3,r4,r5,r6, w1,w2;    pthread_create(&amp;r1, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r2, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r3, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r4, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r5, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r6, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;w1, nullptr, writer, (void*)&quot;writer&quot;);    pthread_create(&amp;w2, nullptr, writer, (void*)&quot;writer&quot;);    pthread_join(r1, nullptr);    pthread_join(r2, nullptr);    pthread_join(r3, nullptr);    pthread_join(r4, nullptr);    pthread_join(r5, nullptr);    pthread_join(r6, nullptr);    pthread_join(w1, nullptr);    pthread_join(w2, nullptr);    pthread_rwlock_destroy(&amp;rw);    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\nreader [140067523458816] 7086reader [140067548636928] 7086writer [140067515066112]writer [140067506673408]reader [140067540244224] 7088reader [140067565422336] 7088reader [140067557029632] 7088reader [140067531851520] 7088reader [140067523458816] 7088writer [140067515066112]writer [140067506673408]reader [140067548636928] 7090writer [140067515066112]reader [140067523458816] 7091writer [140067506673408]reader [140067548636928] 7092reader [140067557029632] 7092\n\nå¯ä»¥çœ‹åˆ°è¯»è€…çš„çº¿ç¨‹è¾ƒå¤šï¼Œä¸”èƒ½å¤Ÿæ­£ç¡®è¯»å–æ•°æ®ã€‚\nå¦‚æœåœ¨è¯»è€…çš„whiileä¸­åŠ ä¸Šsleep(10)\nvoid *reader(void* args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;    while(true)    &#123;        pthread_rwlock_rdlock(&amp;rw);        cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;] &quot; &lt;&lt; board &lt;&lt; endl;        sleep(10);//ç¡        pthread_rwlock_unlock(&amp;rw);        usleep(110);//é¿å…å‡ºç°åªæœ‰ä¸€ä¸ªçº¿ç¨‹å·¥ä½œ    &#125;&#125;\n\nèƒ½å¤Ÿçœ‹åˆ°å¤šä¸ªè¯»è€…ä¹‹é—´ä¸å†²çªï¼Œä¸ä¼šå‡ºç°è¯»è€…Aç”³è¯·é”åï¼Œè¯»è€…Bå°±æ— æ³•è®¿é—®ä¸´ç•ŒåŒºçš„æƒ…å†µã€‚å¦‚æœæ˜¯äº’æ–¥é”ï¼Œè¯»è€…Aç”³è¯·ä¹‹åè¿›å…¥ä¼‘çœ ï¼ŒBå°±æ— æ³•ç”³è¯·è¯¥é”ã€‚\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘è®¾ç½®ç³»ç»Ÿé˜²ç«å¢™ï¼Œè§£å†³æ§åˆ¶å°å¼€äº†é˜²ç«å¢™ä¾æ—§æ— æ³•è®¿é—®é—®é¢˜","url":"/2023/01/21/note_Linux/24%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A3%E9%97%AE%E9%A2%98/","content":"ä»Šå¤©åœ¨æ§åˆ¶å°å¼€æ”¾äº†è…¾è®¯äº‘æœåŠ¡å™¨çš„é˜²ç«å¢™ï¼Œå‘ç°ç”¨ip:ç«¯å£è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼ŒæŸ¥è¯¢äº†ä¹‹åï¼Œæ‰çŸ¥é“éœ€è¦è®¾ç½®ç³»ç»Ÿé‡Œé¢çš„é˜²ç«å¢™\n\n\n1.å‘½ä»¤firewall-cmd --zone=public --add-port=30100/tcp --permanentfirewall-cmd --reload\n\nè¯­å¥çš„æ„æ€æ˜¯å¼€æ”¾30100çš„tcpç«¯å£ï¼Œéšåé‡æ–°åŠ è½½é˜²ç«å¢™ã€‚\nå¦‚æœè¦å¼€æ”¾udpç«¯å£ï¼Œå§tcpæ”¹æˆudpå°±å¯ä»¥äº†\n2.ä½¿ç”¨ç¤ºä¾‹# firewall-cmd --zone=public --add-port=30100/tcp --permanentsuccess# firewall-cmd --reloadsuccess\n\nè°ƒç”¨å®Œä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ï¼Œè¿˜å¯ä»¥çœ‹çœ‹å½“å‰å¼€äº†ä»€ä¹ˆç«¯å£\n# firewall-cmd --list-ports30100/tcp\n\nå‡ºç°è¿™ä¸ªå°±æ˜¯okäº†\n3.å…³é—­ç«¯å£å¼€å¯äº†ï¼Œä¹Ÿå¾—å­¦ä¼šå…³é—­\nfirewall-cmd --zone=public --remove-port=3000/tcp --permanentfirewall-cmd --reload\n\n4.txäº‘é˜²ç«å¢™æ³¨æ„å•Šï¼Œé»˜è®¤è…¾è®¯äº‘æ§åˆ¶å°çš„é˜²ç«å¢™å¼€æ”¾çš„æ˜¯tcpçš„ï¼Œå¦‚æœä½ éœ€è¦æµ‹è¯•udpæœåŠ¡ï¼Œé‚£å°±éœ€è¦å•ç‹¬å¼€æ”¾ä¸€ä¸‹udpçš„ç«¯å£ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘ç½‘ç»œåŸç†","url":"/2023/01/25/note_Linux/25%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸€ä¸‹ç½‘ç»œçš„åŸºæœ¬åŸç†\n\n\n1.ç½‘ç»œå‘å±•èƒŒæ™¯å…³äºç½‘ç»œå‘å±•çš„å†å²èƒŒæ™¯è¿™ç§ä¸œè¥¿å°±ä¸å¤šbbäº†ï¼Œç½‘ä¸Šå¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°å‚è€ƒèµ„æ–™ï¼Œæˆ‘çš„ä¸“ä¸šæ€§æ¬ ç¼ºï¼Œæ–‡ç« å‚è€ƒæ„ä¹‰ä¹Ÿä¸å¤§ã€‚è¿™é‡Œåªåšç®€å•è¯´æ˜ã€‚\nç½‘ç»œå‘å±•ç»è¿‡äº†å¦‚ä¸‹å‡ ä¸ªæ¨¡å¼\n\nç‹¬ç«‹æ¨¡å¼ï¼šè®¡ç®—æœºä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œé äººç§»åŠ¨æ•°æ®\näº’è”æ¨¡å¼ï¼šå¤šå°è®¡ç®—æœºè¿æ¥åˆ°ä¸€èµ·ï¼Œå®ç°æ•°æ®å…±äº«\nå±€åŸŸç½‘LANï¼šè®¡ç®—æœºæ•°é‡å¢å¤šï¼Œé€šè¿‡äº¤æ¢æœº&#x2F;è·¯ç”±å™¨è¿æ¥åˆ°ä¸€èµ·\nå¹¿åŸŸç½‘WANï¼šå°†ç›¸éš”è·ç¦»éå¸¸è¿œçš„è®¡ç®—æœºè¿åœ¨ä¸€èµ·\n\näº¤æ¢æœºæ˜¯å•¥ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šç½‘å£çš„è®¾å¤‡ï¼Œå°†è®¾å¤‡æ’ä¸Šå»åï¼ˆä¸€èˆ¬ç”¨çš„éƒ½æ˜¯RJ45ç½‘çº¿ï¼‰å°±èƒ½ç›¸äº’äº¤æµä¿¡æ¯ã€‚\næˆ‘ä»¬å®¶ç”¨çš„WIFIè·¯ç”±å™¨å…¶å®å·²ç»é›†æˆäº†äº¤æ¢æœºçš„åŠŸèƒ½ï¼\n1.1 è®¡ç®—æœºè®¾å¤‡ä¹‹é—´æ˜¯æ€ä¹ˆäº¤æµçš„ï¼Ÿè®¡ç®—æœºå†…éƒ¨æœ‰éå¸¸å¤šçš„è®¾å¤‡ï¼Œåœ¨è®¾å¤‡å’Œè®¾å¤‡ä¹‹é—´ä¸€å®šè¦ç”¨â€œçº¿â€è¿›è¡Œè¿æ¥ã€‚è¿™æ ·è¿™äº›è®¾å¤‡æ‰èƒ½ç›¸äº’é€šä¿¡ã€‚æ¯”å¦‚ä¸»æ¿ä¸Šçš„æ€»çº¿ï¼Œé“¾æ¥ç¡¬ç›˜çš„sataçº¿ç­‰ç­‰ã€‚\nè€Œè¿™ä¸ªè®¡ç®—æœºçš„ç»“æ„æœ¬è´¨ä¸Šä¹Ÿèƒ½è¢«çœ‹ä½œä¸€ä¸ªå°å‹ç½‘ç»œã€‚\næ­¤æ—¶æˆ‘ä»¬å°†è®¡ç®—æœºAå’ŒBç”¨æ•°æ®çº¿è¿æ¥èµ·æ¥ï¼Œå°±èƒ½åœ¨ç‰©ç†å±‚é¢ä¸Šï¼Œè®©Aå’ŒBç›¸äº’é€šä¿¡ï¼ˆæ­¤æ—¶æš‚ä¸”ä¸è€ƒè™‘é€šè¿‡ä½•ç§æ–¹å¼é€šä¿¡ï¼Œåªè¦ç”¨æ•°æ®çº¿è¿èµ·æ¥äº†ï¼Œé‚£å°±ä¸€å®šèƒ½é€šä¿¡ï¼‰\n\nåœ¨ä¸»æœºå†…ï¼Œçº¿çŸ­\nè·¨ä¸»æœºï¼Œçº¿é•¿\n\nå½“æ•°æ®çº¿é•¿äº†ä¹‹åï¼Œçº¿è·¯å’Œçº¿è·¯ä¹‹é—´å°±å®¹æ˜“äº§ç”Ÿä¿¡å·çš„å¹²æ‰°ï¼Œå¯¼è‡´æ•°æ®çš„é”™è¯¯&#x2F;ä¸¢å¤±ã€‚æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ›´å¯é ã€é«˜æ•ˆçš„æ–¹å¼æ¥å®ç°è¿œè·ç¦»è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ï¼Œè¿™å°±æ˜¯ç½‘ç»œçš„æ„ä¹‰\n1.2 é›†ç¾¤è¿›ä¸€æ­¥æ‰©å¤§ï¼Œå®é™…ä¸Šï¼Œè¿˜å¯ä»¥ç”¨å¤šå°ä¸»æœºç›¸è¿ï¼Œå®ç°å•ä¸€çš„åŠŸèƒ½ã€‚è¿™æ—¶å€™ï¼Œè¿™ä¸€å †ä¸»æœºè¢«ç§°ä¸ºé›†ç¾¤\n\nå­˜å‚¨é›†ç¾¤ï¼šç¡¬ç›˜\nç¼“å­˜é›†ç¾¤ï¼šå†…å­˜\nè®¡ç®—é›†ç¾¤ï¼šCpu&#x2F;Gpu\n\nä¸åŒçš„é›†ç¾¤å¹²ä¸åŒçš„äº‹ï¼Œå†ç”¨æ•°æ®çº¿è¿èµ·æ¥ï¼Œå°±æˆäº†ä¸€å°ç”±å¤šä¸ªä¸»æœºå…±åŒæ„æˆçš„ç”µè„‘\n\nåœ¨å¤§å‹çš„æ•°æ®ä¸­å¿ƒé‡Œé¢ï¼Œå°±æ˜¯ç”¨è¿™ç§æ–¹å¼æ¥å¤„ç†æµ·é‡çš„æ•°æ®çš„ã€‚\n2.åè®®åè®®æ˜¯ä¸€ç§çº¦å®šï¼Œçº¦å®šå¥½ä¸¤å°è®¾å¤‡è¦ç”¨ä»€ä¹ˆæ–¹å¼æ¥äº¤æµã€‚\næ¯”å¦‚æˆ‘ä»¬éƒ½æ˜¯ä¸­å›½äººï¼Œå¯ä»¥ç”¨æ™®é€šè¯è¿™ä¸ªåè®®æ¥äº¤æµï¼›è€Œå¹¿ä¸œåœ°åŒºçš„äººï¼Œå¯ä»¥ç”¨ç²¤è¯­æ¥äº¤æµã€‚\nè®¡ç®—æœºä¹‹é—´æƒ³äº¤æµï¼Œè‚¯å®šä¹Ÿéœ€è¦ç¡®å®šå¥½ä¸€ä¸ªè¡Œä¸šé€šç”¨çš„åè®®ï¼\nå¦åˆ™ä¸åŒè®¡ç®—æœºçš„æ¶æ„/æ“ä½œç³»ç»Ÿ/ç¡¬ä»¶è®¾å¤‡ä¸ä¸€æ ·ï¼Œè‹¥åè®®ä¸ç»Ÿä¸€ï¼Œä¹Ÿå°±æ— æ³•æ­£å¸¸äº¤æµã€‚è¿™å°±å¥½æ¯”ä¸€ä¸ªè¯´è‹±è¯­çš„äººå¬ä¸æ‡‚æ™®é€šè¯ä¸€æ ·ã€‚\n2.1 åˆ†å±‚ç½‘ç»œçš„åè®®æ˜¯åˆ†å±‚çš„\n2.1.1 ä¸ºä»€ä¹ˆè¦åˆ†å±‚è½¯ä»¶åˆ†å±‚ï¼Œå°±å¥½æ¯”å°†ä¸»ä»£ç å’ŒåŠŸèƒ½ä»£ç ç»™åˆ†å¼€\n\næ­¤æ—¶åªè¦åŠŸèƒ½ä»£ç æä¾›çš„æ¥å£ä¸å˜ï¼Œä¸»ä»£ç çš„è°ƒç”¨æ–¹å¼å°±ä¸å˜\nä¸»ä»£ç æ— é¡»å…³å¿ƒåŠŸèƒ½ä»£ç æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œåªå…³å¿ƒå…¶å¤„ç†çš„ç»“æœï¼ˆè¿”å›å€¼ï¼‰\nå·¥ç¨‹å¸ˆä¿®æ”¹ä»£ç çš„æ—¶å€™ï¼Œåªéœ€è¦å®šä½åˆ°å…·ä½“æ¨¡å—è¿›è¡Œä¿®æ”¹ï¼Œä¸ä¼šå‡ºç°ç‰µä¸€å‘åŠ¨å…¨èº«çš„æƒ…å†µ\n\nè¿™æ ·ï¼Œå°±å®ç°äº†ä¸»æ¨¡å—å’ŒåŠŸèƒ½æ¨¡å—çš„è§£è€¦\n\nç”±äºç½‘ç»œæ¶‰åŠåˆ°äº†è½¯ä»¶åˆ°ç¡¬ä»¶å„ç§å±‚é¢çš„è®¾å¤‡æ“ä½œï¼Œæ‰€ä»¥å…¶å¿…é¡»é‡‡ç”¨åˆ†å±‚çš„åè®®ã€‚ä¸åŒè®¾å¤‡é‡‡ç”¨ä¸åŒçš„åè®®ï¼Œæ‰èƒ½æœ€å¤§å±‚é¢çš„ä¿è¯ç½‘ç»œç³»ç»Ÿæ•´ä½“ä¸å‡ºbug\n\nç½‘ç»œåè®®æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šåŒå±‚è®¾å¤‡éƒ½å¯ä»¥è®¤ä¸ºè‡ªå·±åœ¨ç›´æ¥å’Œå¯¹æ–¹é€šä¿¡\n2.1.2 ç”µè¯æœºä¾‹å­ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“ä¿©ä¸ªäººç”¨åº§æœºæ‰“ç”µè¯çš„æ—¶å€™ï¼Œä»–ä»¬ä¼šè®¤ä¸ºè‡ªå·±åœ¨ç›´æ¥å’Œå¯¹æ–¹äº¤æµï¼Œè€Œä¸ä¼šè®¤ä¸ºè‡ªå·±æ˜¯åœ¨å’Œç”µè¯æœºäº¤æµ\n\næ­¤æ—¶ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç³»ç»Ÿåˆ†3å±‚ï¼šåˆ†åˆ«æ˜¯ä¸¤äººä¹‹é—´çš„è¯­è¨€åè®®ï¼Œç”µè¯æœºå’Œç”µè¯æœºä¹‹é—´è¯»å–æ•°æ®çš„åè®®ï¼Œä»¥åŠæœ€åº•å±‚ç”¨äºä¼ è¾“ä¿¡å·çš„é€šä¿¡åè®®\n\nç”¨æˆ·ä¸ä¼šå»å…³å¿ƒç”µè¯æœºç”¨çš„æ˜¯ä»€ä¹ˆåè®®ï¼Œè€Œæ˜¯å…³å¿ƒè‡ªå·±åº”è¯¥ç”¨ä»€ä¹ˆè¯­è¨€å’Œå¯¹æ–¹äº¤æµ\nç”µè¯æœºä¸ä¼šå»å…³å¿ƒç”¨æˆ·æ˜¯ç”¨ä»€ä¹ˆè¯­è¨€äº¤æµçš„ï¼Œå…¶åªè´Ÿè´£æŠŠæ”¶åˆ°çš„å£°éŸ³è½¬æ¢æˆç”µä¿¡å·\né€šä¿¡åè®®ä¸ç®¡ç”µè¯æœºæ˜¯æ€ä¹ˆå°è£…çš„ï¼Œå…¶åªè´Ÿè´£ä¼ è¾“æ•°æ®\n\nè¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥ï¼Œä¸ä»…åŒå±‚çš„è®¾å¤‡å¯ä»¥è®¤ä¸ºè‡ªå·±æ˜¯ç›´æ¥å’Œå¯¹æ–¹äº¤æµï¼Œè€Œä¸”å®ƒè¿˜ä¸éœ€è¦ç®¡å…¶ä»–å±‚ç”¨çš„æ˜¯ä»€ä¹ˆåè®®ï¼\n\nç”µè¯æœºä¸ä¼šå› ä¸ºä½ è¯´è‹±è¯­è€Œç”¨ä¸äº†\n\nè¿™å°±æ˜¯åˆ†å±‚å®ç°è§£è€¦çš„æ•ˆæœï¼Œä¹Ÿç®—æ˜¯æ¯ä¸€å±‚éƒ½å®ç°äº†è‡ªå·±çš„å°è£…\n2.2 OSIä¸ƒå±‚æ¨¡å‹\nOSIï¼ˆOpen System Interconnectionï¼Œå¼€æ”¾ç³»ç»Ÿäº’è¿ï¼‰ä¸ƒå±‚ç½‘ç»œæ¨¡å‹ç§°ä¸ºå¼€æ”¾å¼ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹ï¼Œ æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„å®šä¹‰å’Œè§„èŒƒ; \nå®ƒæŠŠç½‘ç»œä»é€»è¾‘ä¸Šåˆ†ä¸ºäº†7å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰ç›¸å…³ã€ç›¸å¯¹åº”çš„ç‰©ç†è®¾å¤‡ï¼Œæ¯”å¦‚è·¯ç”±å™¨ï¼Œäº¤æ¢æœº;\nOSI ä¸ƒå±‚æ¨¡å‹æ˜¯ä¸€ç§æ¡†æ¶æ€§çš„è®¾è®¡æ–¹æ³•ï¼Œå…¶æœ€ä¸»è¦çš„åŠŸèƒ½ä½¿å°±æ˜¯å¸®åŠ©ä¸åŒç±»å‹çš„ä¸»æœºå®ç°æ•°æ®ä¼ è¾“;\nå®ƒçš„æœ€å¤§ä¼˜ç‚¹æ˜¯å°†æœåŠ¡ã€æ¥å£å’Œåè®®è¿™ä¸‰ä¸ªæ¦‚å¿µæ˜ç¡®åœ°åŒºåˆ†å¼€æ¥ï¼Œæ¦‚å¿µæ¸…æ¥šï¼Œç†è®ºä¹Ÿæ¯”è¾ƒå®Œæ•´ã€‚ é€šè¿‡ä¸ƒ ä¸ªå±‚æ¬¡åŒ–çš„ç»“æ„æ¨¡å‹ä½¿ä¸åŒçš„ç³»ç»Ÿä¸åŒçš„ç½‘ç»œä¹‹é—´å®ç°å¯é çš„é€šè®¯\n\n\nå¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªè¡¨æ ¼æ¥ç®€å•äº†è§£ä¸€ä¸‹æ¯ä¸€å±‚çš„åŠŸèƒ½\n\n\n\nåˆ†å±‚åç§°\nåŠŸèƒ½\næ¦‚è§ˆ\n\n\n\nåº”ç”¨\né’ˆå¯¹ç‰¹å®šåº”ç”¨çš„åè®®\nSTMPé‚®ä»¶&#x2F;è¿œç¨‹ç™»å½•&#x2F;æ–‡ä»¶ä¼ è¾“\n\n\nè¡¨ç¤º\næ•°æ®å›ºæœ‰æ ¼å¼å’Œç½‘ç»œæ ‡å‡†æ ¼å¼çš„è½¬æ¢\næ¥æ”¶ä¸åŒè¡¨ç°å½¢å¼çš„ä¿¡æ¯\n\n\nä¼šè¯\né€šä¿¡ç®¡ç†ï¼Œè´Ÿè´£å»ºç«‹&#x2F;æ–­å¼€é€šä¿¡è¿æ¥ï¼Œç»´æŒä¸åŒåº”ç”¨ç¨‹åºçš„é€šä¿¡\nä½•æ—¶å»ºç«‹&#x2F;ä½•æ—¶æ–­å¼€&#x2F;å»ºç«‹å¤šä¹…\n\n\nä¼ è¾“\nä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¼ è¾“\nç»´æŒä¼ è¾“å¯é æ€§\n\n\nç½‘ç»œ\nåœ°å€ç®¡ç†&#x2F;è·¯ç”±é€‰æ‹©ï¼ˆé€»è¾‘å¯»å€\nç¡®å®šæœ€ä½³è·¯å¾„\n\n\næ•°æ®é“¾è·¯\näº’è”è®¾å¤‡ä¹‹é—´ä¼ é€å’Œè¯†åˆ«æ•°æ®\nå°†æ•°æ®ç»„åˆæˆå­—èŠ‚\n\n\nç‰©ç†\nä»¥01äºŒè¿›åˆ¶è¿›è¡Œæ•°æ®ä¼ è¾“\nç½‘çº¿\n\n\nä½†æ˜¯OSIä¸ƒå±‚æ¨¡å‹ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„è¿˜æ˜¯TCP/IPæ¨¡å‹\n2.3 TCP&#x2F;IPTCP&#x2F;IPæ˜¯ä¸€ç»„åè®®çš„ä»£åè¯ï¼Œå®ƒå…¶ä¸­åŒ…æ‹¬å¾ˆå¤šåè®®ï¼Œç»„æˆäº†ä¸€ä¸ªæ•´ä½“\n\nTCP&#x2F;IPæ¨¡å‹å¯ä»¥è®¤ä¸ºæ˜¯4&#x2F;5å±‚ï¼Œæ¯ä¸€å±‚ä¹Ÿæœ‰è‡ªå·±ä¸åŒçš„åŠŸèƒ½ã€‚æ¯ä¸€å±‚éƒ½ä¼šè°ƒç”¨å¦å¤–ä¸€å±‚ï¼Œæ¥å®ç°è‡ªå·±çš„éœ€æ±‚\n\nç‰©ç†å±‚: è´Ÿè´£å…‰&#x2F;ç”µä¿¡å·çš„ä¼ é€’æ–¹å¼ã€‚ æ¯”å¦‚ç°åœ¨ä»¥å¤ªç½‘é€šç”¨çš„ç½‘çº¿(åŒç» çº¿)ã€æ—©æœŸä»¥å¤ªç½‘é‡‡ç”¨çš„çš„åŒè½´ç”µç¼† (ç°åœ¨ä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†)ã€å…‰çº¤, ç°åœ¨çš„wifiæ— çº¿ç½‘ä½¿ç”¨ç”µç£æ³¢ç­‰éƒ½å±äºç‰©ç†å±‚çš„æ¦‚å¿µã€‚ç‰©ç†å±‚çš„èƒ½åŠ›å†³ å®šäº†æœ€å¤§ä¼ è¾“é€Ÿç‡ã€ä¼ è¾“è·ç¦»ã€æŠ—å¹²æ‰°æ€§ç­‰ã€‚é›†çº¿å™¨(Hub)å·¥ä½œåœ¨ç‰©ç†å±‚\næ•°æ®é“¾è·¯å±‚: è´Ÿè´£è®¾å¤‡ä¹‹é—´çš„æ•°æ®å¸§çš„ä¼ é€å’Œè¯†åˆ«ã€‚ ä¾‹å¦‚ç½‘å¡è®¾å¤‡çš„é©±åŠ¨ã€å¸§åŒæ­¥(å°±æ˜¯è¯´ä»ç½‘çº¿ä¸Šæ£€æµ‹ åˆ°ä»€ä¹ˆä¿¡å·ç®—ä½œæ–°å¸§çš„å¼€å§‹)ã€å†²çªæ£€æµ‹(å¦‚æœæ£€æµ‹åˆ°å†²çªå°±è‡ªåŠ¨é‡å‘)ã€æ•°æ®å·®é”™æ ¡éªŒç­‰å·¥ä½œã€‚ æœ‰ä»¥å¤ª ç½‘ã€ä»¤ç‰Œç¯ç½‘, æ— çº¿LANç­‰æ ‡å‡†ã€‚äº¤æ¢æœº(Switch)å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚\nç½‘ç»œå±‚: è´Ÿè´£åœ°å€ç®¡ç†å’Œè·¯ç”±é€‰æ‹©ã€‚ ä¾‹å¦‚åœ¨IPåè®®ä¸­, é€šè¿‡IPåœ°å€æ¥æ ‡è¯†ä¸€å°ä¸»æœº, å¹¶é€šè¿‡è·¯ç”±è¡¨çš„æ–¹å¼è§„ åˆ’å‡ºä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“çš„çº¿è·¯(è·¯ç”±)ã€‚è·¯ç”±å™¨(Router)å·¥ä½œåœ¨ç½‘è·¯å±‚\nä¼ è¾“å±‚: è´Ÿè´£ä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ å¦‚ä¼ è¾“æ§åˆ¶åè®® (TCP)ï¼Œ èƒ½å¤Ÿç¡®ä¿æ•°æ®å¯é çš„ä»æºä¸»æœºå‘é€åˆ°ç›®æ ‡ ä¸»æœº\nåº”ç”¨å±‚: è´Ÿè´£åº”ç”¨ç¨‹åºé—´æ²Ÿé€šï¼Œå¦‚ç®€å•ç”µå­é‚®ä»¶ä¼ è¾“ï¼ˆSMTPï¼‰ã€æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ã€ç½‘ç»œè¿œç¨‹è®¿é—® åè®®ï¼ˆTelnetï¼‰ç­‰ã€‚ æˆ‘ä»¬çš„ç½‘ç»œç¼–ç¨‹ä¸»è¦å°±æ˜¯é’ˆå¯¹åº”ç”¨å±‚ã€‚\n\nä¸ºå•¥è¿™é‡Œæœ‰5å±‚ï¼Œå´æœ‰æ—¶å€™åˆè¯´æ˜¯4å±‚å‘¢ï¼ŸğŸ˜\nå› ä¸ºç‰©ç†å±‚å…³æ³¨çš„è¾ƒå°‘ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½åªæ³¨é‡äºå‰©ä¸‹çš„4å±‚\n3.ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„å…³ç³»ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚è¦æƒ³æˆåŠŸå‘é€ç»™å¯¹æ–¹ï¼Œé‚£å°±ä¸€å®šè¦ç»è¿‡ç½‘å¡è¿™ä¸ªç¡¬ä»¶ï¼›è€Œè¦ç»è¿‡ç½‘å¡ï¼Œé‚£å°±è‚¯å®šè¦ç»è¿‡æ“ä½œç³»ç»Ÿâ€”â€”åªæœ‰æ“ä½œç³»ç»Ÿèƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶ï¼\næ‰€ä»¥ï¼Œæ•°æ®åœ¨ä¸»æœºå†…æµåŠ¨çš„æ—¶å€™ï¼Œå°±ä¸€å®šä¼šä»ç”¨æˆ·èµ°åˆ°å†…æ ¸ï¼Œå†æœ€ç»ˆèµ°åˆ°ç‰©ç†å±‚è¿›è¡Œä¼ è¾“ï¼\n\nå› ä¸ºè®¡ç®—æœºçš„ä½“ç³»ç»“æ„å†³å®šäº†æ•°æ®æµåŠ¨çš„æ—¶å€™ï¼Œä¸€å®šè¦ç»è¿‡æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥è‚¯å®šä¼šæ˜¯è‡ªé¡¶å‘ä¸‹&#x2F;è‡ªåº•å‘ä¸Šè¿›è¡ŒæµåŠ¨çš„ï¼\n\nè¿™å°±å¼•å‡ºäº†äºŒè€…çš„å…³ç³»\n\nç½‘ç»œåè®®æ ˆæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸“é—¨æ¥å¤„ç†tcp&#x2F;ipåè®®çš„ã€‚\n\nå‰é¢æåˆ°ï¼Œæ¯ä¸€å±‚éƒ½å¯ä»¥è®¤ä¸ºè‡ªå·±æ˜¯åœ¨å’Œå¯¹æ–¹åŒå±‚çš„ç”¨æˆ·ç›´æ¥é€šä¿¡ã€‚è¿™æ ·åšæ˜¯æœ‰ä¸€å®šä»£ä»·çš„ï¼Œä¸”å¬æˆ‘ç»†ç»†é“æ¥ã€‚\n3.1 å¿«é€’ä¾‹å­å½“æˆ‘ä»¬ç½‘è´­å•†å“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½œä¸ºç”¨æˆ·ï¼Œæ˜¯ç›´æ¥å’Œå•†å®¶è”ç³»çš„ã€‚ä¸‹äº†è®¢å•åï¼Œå•†å®¶è¦å»åšä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ€ç»ˆæˆ‘ä»¬ä»å¿«é€’å°å“¥å¤„æ‹¿åˆ°äº†å•†å“\n\n\n\nå®¢æˆ·\nå•†å®¶\n\n\n\nåœ¨å•†å®¶å¤„ä¸‹è®¢å•\næ¥æ”¶åˆ°ç”¨æˆ·è®¢å•\n\n\nä»å¿«é€’å‘˜å¤„æ”¶åˆ°è´§ç‰©\nå°†è´§ç‰©äº¤ç»™å¿«é€’å‘˜\n\n\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\n\n\nä½†ï¼Œæˆ‘ä»¬æ”¶åˆ°çš„å¿«é€’å¹¶ä¸æ˜¯åªæœ‰æˆ‘ä»¬è¦çš„å•†å“ï¼Œå¾€å¾€è¿™é‡Œé¢éƒ½ä¼šå¤šå‡ºä¸€äº›ä¸œè¥¿\n\nå¦‚å›¾ï¼Œæˆ‘ä»¬çš„å•†å“è¢«ä¸€ä¸ªç›’å­åŒ…è£¹ç€ï¼Œå¤–å¤´è¿˜å¤šäº†ä¸€ä¸ªå¿«é€’å•\n\n\n\nå®¢æˆ·\nå•†å®¶\n\n\n\n\nåœ¨å•†å®¶å¤„ä¸‹è®¢å•\næ¥æ”¶åˆ°ç”¨æˆ·è®¢å•\nç»™å‡ºæ”¶ä»¶åœ°å€\n\n\nä»å¿«é€’å‘˜å¤„æ”¶åˆ°è´§ç‰©\nå°†è´§ç‰©äº¤ç»™å¿«é€’å‘˜\næ·»åŠ å¤–ç®±å¹¶å¡«å†™é‚®å¯„å•\n\n\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nå¼€å§‹è¿è¾“\n\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸€å±‚å…¶å®éƒ½ç»™å‡ºäº†è‡ªå·±çš„ç‹¬æœ‰åè®®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæœ€ä¸‹é¢çš„è¿è¾“å½“ä½œç‰©ç†å±‚ã€‚\nå¿«é€’å°å“¥åœ¨åŒ…è£…å¿«é€’çš„æ—¶å€™ï¼Œå°±ä¼šç»™å¿«é€’å¢åŠ ä¸€ä¸ªå¤–ç®±ï¼Œå¹¶å¡«å†™å¥½é‚®å¯„å•ã€‚å½“å¦å¤–ä¸€è¾¹çš„å¿«é€’å°å“¥æ”¶åˆ°è¿™ä¸ªè´§ç‰©çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ›´å…·é‚®å¯„å•ä¸Šçš„ä¿¡æ¯ï¼Œå°†å¿«é€’é€åˆ°ç”¨æˆ·æ‰‹ä¸Šã€‚\n3.2 æŠ¥å¤´&#x2F;è§£åŒ…æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ç»´æŠ¤å¿«é€’çš„å‡ºå‘åœ°/ç»ˆç‚¹åœ°ä¿¡æ¯ï¼Œå¿«é€’å‘˜ç»™è´§ç‰©æ·»åŠ ä¸Šäº†å®¢æˆ·ä¸éœ€è¦çš„ä¸œè¥¿ã€‚\n\nåœ¨ç½‘ç»œåè®®ä¸­ï¼Œæ¯ä¸€å±‚åè®®ï¼Œéƒ½ä¼šç»™æˆ‘ä»¬è¦ä¼ è¾“çš„æ•°æ®æ·»åŠ ä¸Šç‹¬æœ‰çš„åè®®ä¿¡æ¯ï¼Œå†äº¤ä»˜ç»™ä¸‹ä¸€å±‚ï¼›è¿™äº›ä¿¡æ¯æ˜¯ç”¨æ¥ç»´æŠ¤æ•°æ®çš„ï¼ˆå°±å¥½æ¯”å¿«é€’å•å·ä¸Šçš„åœ°å€ï¼‰\nå¤šå‡ºæ¥çš„åè®®æ•°æ®è¢«ç§°ä¸ºï¼šæŠ¥å¤´\n\n\næ”¶åˆ°ä¿¡æ¯åï¼ŒåŒå±‚åè®®ä¼šå–å‡ºè‡ªå·±çš„é‚£ä»½åè®®ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œå†äº¤ä»˜ç»™ä¸Šä¸€å±‚\næ‹†å¼€æ•°æ®çš„è¿‡ç¨‹è¢«ç§°ä¸ºï¼šè§£åŒ…\n\n\n\n\nä¸çŸ¥é“å¿«é€’çš„ä¾‹å­èƒ½å¦å¸®åŠ©ä½ ç†è§£è¿™ä¸ªè¿‡ç¨‹\n\n3.3 æŠ¥å¤´çš„ä½œç”¨æ•°æ®ä¼šæœ‰ä¸åŒçš„åº”ç”¨ï¼Œä¹Ÿå¯¹åº”äº†ä¸åŒçš„åè®®ã€‚åœ¨å°åŒ…çš„æ—¶å€™ï¼Œæ·»åŠ çš„æŠ¥å¤´ä¿¡æ¯é‡Œé¢å°±åº”åŒ…å«ç›®æ ‡çš„åè®®ä¿¡æ¯\n\næ¯”å¦‚æˆ‘çš„ä¿¡æ¯æ˜¯SMTPé‚®ç®±ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨ç›®æ ‡ä¸»æœºæ¥æ”¶åˆ°è¿›è¡Œè§£åŒ…äº†ä»¥åï¼Œä¹Ÿéœ€è¦å°†è¿™ä¸ªä¿¡æ¯äº¤ç»™æ”¯æŒSMTPçš„é‚®ç®±è½¯ä»¶è¿›è¡Œå¤„ç†\næŠ¥å¤´å±æ€§é‡Œé¢å°±éœ€è¦åŒ…å«æ”¯æŒåˆ†ç”¨ğŸ‘†çš„å±æ€§ï¼ˆè¿˜æœ‰ä¸€äº›å…¬å…±å±æ€§ï¼‰\næŠ¥å¤´å±æ€§é‡Œé¢è¿˜éœ€è¦åŒ…å«åŒºåˆ†æœ‰æ•ˆè½½è·å’ŒæŠ¥å¤´çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯å°†è¦å‘é€çš„æ•°æ®ï¼Œå’Œè¿™ä¸€å±‚çš„æŠ¥å¤´ç»™æ‹†å¼€ï¼Œä¸èƒ½åˆ°æ—¶å€™åˆ†ä¸å‡ºæ¥ï¼Œæ— æ³•æ­£å¸¸è§£åŒ…äº†\n\nè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªåˆ†ç”¨çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼ é€çš„ä¿¡æ¯ï¼Œè¢«ç§°ä¸ºæœ‰æ•ˆè½½è·\n\nå¿«é€’ç‚¹ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœå¿«é€’ç‚¹æ”¶åˆ°çš„éƒ½æ˜¯å•†å“è€Œæ²¡æœ‰å¿«é€’å•ï¼Œå¿«é€’å°å“¥ä¹Ÿå°±æ— æ³•çŸ¥é“å¿«é€’åº”è¯¥é€ç»™è°äº†\n4.å±€åŸŸç½‘ä»¥å¤ªç½‘çš„å‘½åæ¥è‡ªç‰©ç†å­¦ä¸­çš„ä»¥å¤ªï¼Œè¿™éƒ¨åˆ†çš„æ•…äº‹å¯ä»¥ç™¾åº¦ğŸ˜¶â€ğŸŒ«ï¸å¤§å­¦ç‰©ç†è¯¾ä¸Šä¹Ÿè®²è¿‡ã€‚\n\nå¦‚æœä¸¤å°ä¸»æœºï¼Œå¤„äºåŒä¸€å±€åŸŸç½‘ä¸­ï¼Œä»–ä»¬ä¹‹é—´èƒ½é€šä¿¡å—ï¼Ÿ\nå’ŒåŒå­¦å¼€æ‰‹æœºçƒ­ç‚¹è”æœºMCçš„ç»å†å‘Šè¯‰æˆ‘ğŸ˜ï¼Œæ˜¯å¯ä»¥çš„\n\n4.1 MACåœ°å€å±€åŸŸç½‘å°±å¥½æ¯”ä¸€ä¸ªé¤å…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šäººåœ¨èŠå¤©ã€‚å½“ä½ åœ¨é¤å…é‡Œé¢å’Œå¼ ä¸‰èŠå¤©çš„æ—¶å€™ï¼Œæ—è¾¹çš„äººä¹Ÿèƒ½å¬åˆ°ä½ ä»¬ä¿©äº¤æµçš„å†…å®¹ã€‚å±€åŸŸç½‘å†…ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\nè¦æƒ³åœ¨å±€åŸŸç½‘å†…å‡†ç¡®åœ°æ‰¾åˆ°ä¸€ä¸ªè®¾å¤‡ï¼Œé‚£å°±éœ€è¦ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç ã€‚å°±å¥½æ¯”æƒ³åœ¨æ•™å®¤é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªäººï¼Œéœ€è¦çŸ¥é“åå­—ä¸€æ ·ï¼ˆæ’é™¤åŒåé—®é¢˜ï¼‰\næ¯å°ä¸»æœºå”¯ä¸€çš„æ ‡è¯†ç ï¼Œå°±æ˜¯è¯¥ä¸»æœºå¯¹åº”çš„MACåœ°å€\n\nMACåœ°å€ç”¨æ¥è¯†åˆ«æ•°æ®é“¾è·¯å±‚ä¸­ç›¸è¿çš„èŠ‚ç‚¹\né•¿åº¦ä¸º48ä½, åŠ6ä¸ªå­—èŠ‚ã€‚ ä¸€èˆ¬ç”¨16è¿›åˆ¶æ•°å­—åŠ ä¸Šå†’å·çš„å½¢å¼æ¥è¡¨ç¤º(ä¾‹å¦‚: 08:01:27:04:fb:19) \nMACåœ°å€åœ¨ç½‘å¡å‡ºå‚æ—¶å°±ç¡®å®šäº†ï¼Œä¸èƒ½ä¿®æ”¹ï¼ ä¸”macåœ°å€é€šå¸¸æ˜¯å”¯ä¸€çš„ï¼ˆè™šæ‹Ÿæœºä¸­çš„macåœ°å€ä¸æ˜¯çœŸå®çš„macåœ°å€ï¼Œå¯èƒ½ä¼šå†²çªï¼›ä¹Ÿæœ‰äº›ç½‘å¡æ”¯æŒç”¨æˆ·é…ç½®macåœ°å€ï¼‰\n\nå±€åŸŸç½‘å†…æ²¡æœ‰å‘é€é™åˆ¶ï¼Œä»»ä½•ä¸€å°ä¸»æœºéšæ—¶éƒ½å¯å‘é€æ¶ˆæ¯ã€‚æ­¤æ—¶è¿˜éœ€è¦å¼•å…¥ç¢°æ’æ£€æµ‹æœºåˆ¶ï¼Œåœ¨æ²¡æœ‰äººå‘é€ä¿¡å·çš„æ—¶å€™ï¼Œæœ¬è®¾å¤‡å†å‘é€ä¿¡å·ã€‚é¿å…å¤šå°ä¸»æœºé€šä¿¡æ—¶ï¼Œå‡ºç°ä¿¡å·æ’åˆ°ä¸€èµ·ï¼ˆç¢°æ’åŸŸï¼‰è€Œå¯¼è‡´çš„ä¿¡æ¯ä¸¢å¤±ã€‚\nä»¥ç³»ç»Ÿç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œæ­¤æ—¶çš„å±€åŸŸç½‘å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æºã€‚ä¿è¯æ•°æ®ä¸è¢«ç¢°æ’ï¼Œå°±æ˜¯ä¿æŠ¤ä¸´ç•Œèµ„æºçš„ä¸€è‡´æ€§ï¼ğŸ˜›\n4.2 é€šä¿¡åŸç†å’Œå‰é¢æåˆ°çš„æŠ¥å¤´&#x2F;è§£åŒ…ä¸€æ ·ï¼Œå±€åŸŸç½‘å†…çš„æ•°æ®ï¼Œä¹Ÿæ˜¯è‡ªé¡¶å‘ä¸‹ã€è‡ªåº•å‘ä¸ŠæµåŠ¨çš„ã€‚\næ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åè®®ï¼Œä¹Ÿéœ€è¦åŠ ä¸Šè‡ªå·±çš„æŠ¥å¤´\n\n5.å¹¿åŸŸç½‘åœ¨å¹¿åŸŸç½‘å†…é€šä¿¡å°±æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ã€‚è¿™å°±å¥½æ¯”å”åƒ§å»è¥¿å¤©å–ç»ï¼Œä¸æ˜¯ç›´æ¥èµ°åˆ°è¥¿å¤©çš„ï¼Œè€Œæ˜¯éœ€è¦ç»è¿‡å¤šä¸ªé©¿ç«™ï¼ˆä¸­é€”åœ°ç‚¹ï¼‰\nåœ¨å¹¿åŸŸç½‘å†…é€šä¿¡ï¼Œæˆ‘ä»¬åˆ™æ˜¯é€šè¿‡ipåœ°å€æ¥åšé©¿ç«™ï¼Œæ¥æŸ¥æ‰¾ç›®æ ‡ä¸»æœºçš„\n\nåœ¨å±€åŸŸç½‘å†…ç”¨çš„æ˜¯macæ¥æ ‡è¯†ç›®æ ‡çš„å”¯ä¸€æ€§\nå¹¿åŸŸç½‘å†…é‡‡ç”¨ipæ¥æ ‡è¯†ç›®æ ‡çš„å”¯ä¸€æ€§\n\n5.1 IPåœ°å€IPåè®®æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒIPv4å’ŒIPv6ï¼ˆæœ¬æ–‡åªå…³æ³¨v4ï¼‰\nIPåœ°å€æ˜¯åœ¨IPåè®®ä¸­ï¼Œç”¨æ¥æ ‡è¯†ç½‘ç»œä¸­ä¸åŒä¸»æœºçš„åœ°å€ï¼›\nå¯¹äºIPv4æ¥è¯´ï¼ŒIPåœ°å€æ˜¯ä¸€ä¸ª4å­—èŠ‚ï¼Œ32ä½çš„æ•´æ•°ã€‚é€šå¸¸ä½¿ç”¨ â€œç‚¹åˆ†åè¿›åˆ¶â€ çš„å­—ç¬¦ä¸²è¡¨ç¤ºIPåœ°å€, ä¾‹å¦‚ 192.168.0.1ï¼›ç”¨ç‚¹åˆ†å‰²çš„æ¯ä¸€ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªå­—èŠ‚, èŒƒå›´æ˜¯ 0 - 255ï¼›\nå› ipv4çš„è§„å®šçš„å±€é™æ€§ï¼Œipv4çš„ipç°åœ¨å·²ç»é€æ¸æ¯ç«­ï¼Œå¾ˆå¤šåœ°æ–¹çš„è¿è¥å•†å·²ç»ä¸æä¾›å®¶ç”¨å®½å¸¦çš„å…¬ç½‘IPåœ°å€ã€‚\n5.2 é€šä¿¡è¿‡ç¨‹åœ¨å¹¿åŸŸç½‘é€šä¿¡çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½éœ€è¦æä¾›æºIPå’Œç›®æ ‡IPï¼Œè¿™å°±æ˜¯ä»å“ªå„¿æ¥/åˆ°å“ªå„¿å»ï¼›åŒæ—¶ï¼Œè¿˜éœ€è¦æä¾›æºMACå’Œç›®æ ‡MACè¿›è¡Œæ ‡è¯†ã€‚\nåœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰è·¯ç”±å™¨æ¥å‘Šè¯‰ä½ åº”è¯¥å»å“ªå„¿ã€‚åœ¨è¿™æœŸé—´ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¼šåœ¨ä¸åŒçš„å±€åŸŸç½‘å†…è¿›è¡Œåˆ‡æ¢ã€‚\n\nåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼Œè·¯ç”±å™¨ä¼šæ›´æ–°ä½ çš„æºIP&#x2F;MACï¼ˆç›®æ ‡IPä¸å˜ï¼‰å¹¶æä¾›ç›®æ ‡çš„MACåœ°å€\n\nå”åƒ§å»è¥¿å¤©å–ç»ï¼Œä»–çš„ç›®çš„åœ°æ˜¯ä¸ä¼šå˜çš„ï¼Œä½†æ˜¯ä¸Šä¸€ç«™&#x2F;ä¸‹ä¸€ç«™ä¼šä¸æ–­å˜åŒ–\n\nä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬çš„æ•°æ®èµ°åˆ°IPè¿™ä¸€å±‚æ—¶ï¼Œå°±ä¼šåŠ ä¸ŠIPåè®®çš„æŠ¥å¤´ã€‚å¹¶åœ¨è·¯ç”±å™¨å†…è¿›è¡Œè§£åŒ…ï¼Œå†æ¢ä¸Šæ–°çš„IPæŠ¥å¤´ã€‚\n\næ­¤æ—¶IPä¸€å±‚å°±å¯ä»¥å’Œå…¶ä»–å±‚åŒºåˆ†å¼€ï¼Œå› ä¸ºåœ¨IPå±‚ä¹‹ä¸Šï¼Œå‘é€/æ¥æ”¶ä¸»æœºæ”¶åˆ°çš„æ•°æ®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼\n\nIPå±‚æ˜¯ä¸€ä¸ªè½¯ä»¶å±‚ï¼Œä»»ä½•åº•å±‚çš„å·®å¼‚ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚è½¯ä»¶å±‚æ¥è§£å†³ã€‚è¿™æ˜¯ä¸€ç§è½¯ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œlinuxçš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿä½¿ç”¨äº†è¿™ç§æŠ€æœ¯\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡IPå±‚ï¼Œå¯ä»¥å±è”½åº•å±‚ç½‘ç»œçš„å·®è·ã€‚åœ¨é€šè¿‡ipé€šä¿¡çš„æ—¶å€™ï¼Œä¸éœ€è¦å…³æ³¨åº•å±‚çš„è·¯ç”±ç­‰ç¡¬ä»¶ä¿¡æ¯ä»¥åŠæ•°æ®ä¼ è¾“çš„å®ç°ã€‚\n5.3 ç«¯å£ä¸€å°ä¸»æœºé‡Œé¢æœ‰éå¸¸å¤šçš„è¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½èƒ½è®¿é—®ç½‘ç»œå‘é€ä¿¡æ¯ã€‚\nå…‰ç”¨IPåœ°å€ï¼Œæˆ‘ä»¬å®é™…ä¸Šåªèƒ½æ‰¾åˆ°å¯¹åº”çš„ä¸»æœºï¼Œå´æ— æ³•ç¡®å®šæ˜¯è¿™å°ä¸»æœºé‡Œé¢çš„xxåº”ç”¨å‘å‡ºçš„ä¿¡æ¯ã€‚\næ­¤æ—¶ï¼Œå°±éœ€è¦åˆ©ç”¨ç«¯å£å·æ¥ç¡®å®šæˆ‘ä»¬è¦è®¿é—®çš„è¿›ç¨‹æ˜¯ä»€ä¹ˆäº†ã€‚\n\nIPï¼šç¡®ä¿ä¸»æœºå”¯ä¸€æ€§\nç«¯å£portï¼šç¡®ä¿è¯¥ä¸»æœºä¸Šçš„è¿›ç¨‹å”¯ä¸€æ€§\n\nå¦‚æœä½ æœ‰ç”¨è¿‡dockerï¼Œé‚£è‚¯å®šå°±çŸ¥é“ç«¯å£å·è¿™ä¸€å­˜åœ¨ã€‚å¤§éƒ¨åˆ†dockeréƒ½éœ€è¦æ˜ å°„ä¸€ä¸ªç«¯å£ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚\nç½‘ç»œé—´çš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹é€šä¿¡\n\nç«¯å£å·æ˜¯ä¸€ä¸ª2å­—èŠ‚çš„æ•´æ•°ï¼Œé™å®šäº†ç«¯å£èŒƒå›´ï¼ˆ1-65,536ï¼‰\nç«¯å£å·ç”¨äºæ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Œå‘Šè¯‰ç³»ç»Ÿï¼Œå½“å‰çš„æ•°æ®åº”äº¤ç»™å“ªä¸€ä¸ªè¿›ç¨‹å»è¿è¡Œ\nåŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨å¤šä¸ªç«¯å£å·\nä½†æ˜¯ä¸€ä¸ªç«¯å£å·åªèƒ½å¯¹åº”ä¸€ä¸ªè¿›ç¨‹\n\nç½‘ç»œé€šä¿¡ä¸­ï¼Œæœ‰æºIPå’Œç›®æ ‡IPï¼Œä¹Ÿæœ‰æºç«¯å£å’Œç›®æ ‡ç«¯å£ã€‚æˆ‘ä»¬æŠŠè¿™ä¸€å¯¹IP+ç«¯å£è¢«ç§°ä¸ºsocketå¯¹\n5.3.1 ç«¯å£&#x2F;PIDçš„å…³ç³»åœ¨ä¸€å°ä¸»æœºé‡Œé¢ï¼ŒPIDä¹Ÿå¯ä»¥ç”¨äºæ ‡è¯†å”¯ä¸€çš„è¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œç«¯å£å·å’ŒPIDæ˜¯å±äºä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚\n\nå‡è®¾é¤å…é‡Œæœ‰ä¸€ä¸ªæ‰«æŠŠï¼Œé¤å…é›‡äº†ä¸ªä¿æ´å‘˜Aï¼Œè®©ä»–æ¥æ‰“æ‰«é¤å…çš„å«ç”Ÿã€‚æ­¤æ—¶å°±å¯ä»¥æŠŠæ‰«æŠŠè®¤ä¸ºæ˜¯ç«¯å£ï¼Œä¿æ´å‘˜Aæ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚\næœ‰ä¸€å¤©ï¼Œä¿æ´å‘˜Aç”Ÿç—…äº†ï¼Œè¯·å‡ä¸€å‘¨ã€‚äºæ˜¯è€æ¿åˆè¯·äº†ä¸€ä¸ªä¿æ´å‘˜Bï¼Œè®©ä»–æ¥æ‰“æ‰«ä¸€å‘¨çš„å«ç”Ÿã€‚æ­¤æ—¶ï¼Œä¿æ´å‘˜Bä¹Ÿèƒ½ä½¿ç”¨é¤å…é‡Œé¢å·²æœ‰çš„æ‰«æŠŠï¼Œæ¥è¿›è¡Œæ‰“æ‰«å·¥ä½œ\n\nä¿æ´å‘˜A&#x2F;ä¿æ´å‘˜Bå¹²çš„å·¥ä½œæ˜¯å®Œå…¨ä¸€è‡´çš„\nä»–ä»¬ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ‰«æŠŠ\n\n\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨linuxä¸­ï¼Œä¸€ä¸ªåŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒçš„è¿›ç¨‹PIDéƒ½æ˜¯ä¸åŒçš„ï¼›ä½†åŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå¹²çš„æ´»è‚¯å®šæ˜¯ä¸€æ ·çš„ã€‚\nä¿æ´å‘˜Aå’ŒBå°±å¯ä»¥çœ‹ä½œæ˜¯åŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œä»–ä»¬ç”¨çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªç«¯å£ï¼ˆæ‰«æŠŠï¼‰ï¼Œä½†ä¿æ´å‘˜Aå’ŒBçš„è¿›ç¨‹PIDæ˜¯ä¸ä¸€æ ·çš„ï¼\næ‰€ä»¥ï¼Œåœ¨ç½‘ç»œé€šä¿¡çš„æ—¶å€™ï¼Œé‡‡ç”¨äº†ç«¯å£è¿™ä¸ªæ‰«æŠŠæ¥æ ‡è¯†éœ€è¦è¿›è¡Œç½‘ç»œé€šä¿¡çš„è¿›ç¨‹ï¼Œè€Œä¸æ˜¯ç»§ç»­é‡‡ç”¨PIDæ¥æ ‡è¯†ğŸ‘»\n\næ“ä½œç³»ç»Ÿåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªç«¯å£å·å’Œè¿›ç¨‹çš„å“ˆå¸Œè¡¨ï¼Œå°±èƒ½å¿«é€Ÿåœ°é€šè¿‡ç«¯å£å·æ‰¾åˆ°å¯¹åº”çš„è¿›ç¨‹\n\n5.4 TCP&#x2F;UDPTCPï¼ˆTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®ï¼‰\n\nä¼ è¾“å±‚åè®®\næœ‰é“¾æ¥ï¼ˆå¿…é¡»è¦å’Œç›®æ ‡å»ºç«‹è¿æ¥ï¼Œæ‰èƒ½å¼€å§‹æ•°æ®ä¼ è¾“ï¼‰\nå¯é ä¼ è¾“ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰ä¸¢åŒ…ï¼Œéœ€è¦ä¿è¯æ•°æ®å®Œå…¨è¢«ä¼ è¾“åˆ°ç›®æ ‡ä¸»æœºï¼‰\né¢å‘å­—èŠ‚æµ\n\nUDPï¼ˆUser Datagram Protocol ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰\n\nä¼ è¾“å±‚åè®®\næ— è¿æ¥ï¼ˆæ— é¡»å»ºç«‹è¿æ¥ï¼Œæ¯”å¦‚æ‰€æœ‰äººéƒ½èƒ½ç»™ä½ çš„ç”µå­é‚®ç®±å‘é€é‚®ä»¶ï¼‰\nä¸å¯é ä¼ è¾“ï¼ˆä¸æ£€æŸ¥ä¸¢åŒ…ï¼‰\né¢å‘æ•°æ®æŠ¥\n\n6.ç½‘ç»œå­—èŠ‚åºåœ¨ä¹‹å‰å­¦ä¹ intç±»å‹çš„å­˜å‚¨çš„æ—¶å€™ï¼Œæåˆ°è¿‡å¤§ç«¯/å°ç«¯çš„æ¦‚å¿µ\n6.1 è¯´æ˜åœ¨ç½‘ç»œä¸­ï¼Œæ•°æ®æµåŒæ ·æœ‰å¤§ç«¯å°ç«¯ä¹‹åˆ†ã€‚TCP/IPåè®®è§„å®šï¼Œç½‘ç»œæ•°æ®æµåº”è¯¥é‡‡ç”¨å¤§ç«¯å­—èŠ‚åºï¼ˆä½åœ°å€é«˜å­—èŠ‚ï¼‰åå‘å‡ºçš„æ•°æ®æ˜¯é«˜åœ°å€\n\nå¦‚ä¸Šå›¾çš„1ä¸ºä¾‹ï¼Œå½“ç½‘ç»œä¸­å‘é€è¿™ä¸ªæ•°å­—1çš„æ—¶å€™ï¼Œä¼šå…ˆå‘é€00 00 00ï¼Œæœ€åå‘é€çš„æ˜¯01ã€‚è¿™æ ·èƒ½å¤Ÿæ–¹ä¾¿æ•°æ®çš„æ‹¼æ¥\n\nå‘é€ä¸»æœºå°†ç¼“å†²åŒºä¸­çš„æ•°æ®æŒ‰å†…å­˜åœ°å€ä»ä½åˆ°é«˜çš„é¡ºåºå‘å‡º\næ¥å—ä¸»æœºæŠŠæ•°æ®ä¾æ¬¡ä¿å­˜åˆ°ç¼“å­˜åŒºä¸­ï¼Œä¹Ÿæ˜¯æŒ‰åœ°å€ä»ä½åˆ°é«˜çš„é¡ºåºä¿å­˜\n\nè¿™ä¸ªè§„å®šæ›´é‡è¦çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å¯¹ç½‘ç»œå­—èŠ‚æ•°æ®çš„å¤§å°ç«¯åšå‡ºé™åˆ¶ï¼Œé‚£ä¹ˆç½‘ç»œé‡Œé¢å°±ä¼šå‡ºç°æ—¢æœ‰å¤§ç«¯åˆæœ‰å°ç«¯çš„æƒ…å†µï¼Œå¾—å†™ä¿©å¥—ä»£ç æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\nè€Œé™åˆ¶ä¸ºå¤§ç«¯ä¹‹åï¼Œå°ç«¯æœºå™¨å°±éœ€è¦åœ¨å‘é€ä¿¡æ¯ä¹‹å‰å°†æ•°æ®è½¬ä¸ºå¤§ç«¯ï¼Œåœ¨æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå°†æ•°æ®è½¬æ¢ä¸ºå°ç«¯ã€‚æ­¤æ—¶çš„å¤„ç†å°±æ˜¯æ“ä½œç³»ç»Ÿçš„å·¥ä½œäº†ï¼Œå’ŒTCP/IPåè®®æœ¬èº«æ²¡æœ‰å…³ç³»äº†ğŸ˜›\n6.2 è½¬æ¢æ¥å£ä¸ºäº†æé«˜å¯ä»¥ç§»æ¤æ€§ï¼Œæœ‰ä»¥ä¸‹çš„è¿™ä¸ªæ¥å£å°†ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºè¿›è¡Œè½¬æ¢\n#include &lt;arpa/inet.h&gt;uint32_t htonl(uint32_t hostlong);uint16_t htons(uint16_t hostshort);uint32_t ntohl(uint32_t hostlong);uint16_t ntohs(uint16_t hostshort);\n\nåœ¨å‘½åä¸­ï¼Œnä»£è¡¨networkï¼Œhä»£è¡¨hostï¼Œlä»£è¡¨longï¼Œsä»£è¡¨shortã€‚\nå¦‚æœä¸»æœºå°±æ˜¯å¤§ç«¯ï¼Œè¿™äº›å‡½æ•°ä»€ä¹ˆéƒ½ä¸ä¼šåšã€‚å¦‚æœä¸»æœºæ˜¯å°ç«¯ï¼Œåˆ™ä¼šå°†ä¸»æœºå­—èŠ‚åºè½¬æ¢æˆç½‘ç»œå­—èŠ‚åºï¼ˆæˆ–åä¹‹ï¼‰\næ›´å¤šâ€¦å…³äºç½‘ç»œåŸç†çš„å‰ç½®çŸ¥è¯†æš‚æ—¶å°±è®°å½•è¿™ä¹ˆå¤šï¼Œåç»­æœ‰æ–°å¢ä¼šæ¥æ›´æ–°æœ¬æ–‡\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","ç½‘ç»œ"]},{"title":"ã€Linuxã€‘CentOS7.6 å‡çº§ gcc/g++","url":"/2023/01/31/note_Linux/26%E5%8D%87%E7%BA%A7gcc/","content":"CentOS 7.6 å‡çº§ gcc&#x2F;g++çš„æ–¹æ³•ï¼Œä¸ä¸€å®šé€‚ç”¨äºå…¶ä»–linuxç³»ç»Ÿ\n\n\n1.æŸ¥çœ‹ç‰ˆæœ¬g++ -vgcc -v\n\nå½“å‰æŸ¥çœ‹ç‰ˆæœ¬ï¼Œå‘ç°æ˜¯4.8.5ï¼Œè¿™å·²ç»æ˜¯2015å¹´çš„æ—§ç‰ˆæœ¬äº†ï¼Œå¯¹c++11çš„æ”¯æŒä¸æ˜¯å¾ˆå®Œå–„ï¼Œä¸ºäº†æ–¹ä¾¿å­¦ä¹ å’Œç¼–å†™æ–°ç‰ˆæœ¬çš„ä»£ç ï¼Œå‡çº§ä¸€ä¸‹è¿˜æ˜¯å¯ä»¥çš„\nå¦‚æœä½ çš„ç³»ç»Ÿä¸Šæ²¡æœ‰gcc&#x2F;g++ï¼Œåˆ™å°è¯•ç”¨ä¸‹é¢çš„æ–¹æ³•å®‰è£…\nyum install -y gcc gcc-c++\n\nç¤ºä¾‹\n[root@bt-7274:~]# yum install -y gcc gcc-c++Loaded plugins: fastestmirror, langpacks, product-id, search-disabled-repos, subscription-managerThis system is not registered with an entitlement server. You can use subscription-manager to register.Repository epel is listed more than once in the configurationLoading mirror speeds from cached hostfile * centos-sclo-rh: ftp.sjtu.edu.cn * centos-sclo-sclo: ftp.sjtu.edu.cnPackage gcc-4.8.5-44.el7.x86_64 already installed and latest versionPackage gcc-c++-4.8.5-44.el7.x86_64 already installed and latest versionNothing to do\n\n2.å‡çº§yum list dev\\*gcc\n\nç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬æœ‰å“ªäº›\n\nå¯ä»¥çœ‹åˆ°æœ€æ–°ç‰ˆæœ¬å·²ç»æ˜¯11äº†ï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„å§\nyum install devtoolset-11-gcc devtoolset-11-gcc-c++\n\nInstalled:  devtoolset-11-gcc.x86_64 0:11.2.1-9.1.el7                                                     devtoolset-11-gcc-c++.x86_64 0:11.2.1-9.1.el7                                                    Dependency Installed:  devtoolset-11-binutils.x86_64 0:2.36.1-1.el7.2                 devtoolset-11-libstdc++-devel.x86_64 0:11.2.1-9.1.el7                 devtoolset-11-runtime.x86_64 0:11.1-2.el7                Complete!\n\nçœ‹åˆ°completeå°±ä»£è¡¨å®‰è£…overäº†\n3.ç”Ÿæ•ˆç°åœ¨è¦åšçš„å°±æ˜¯è®©æ–°å®‰è£…çš„ç‰ˆæœ¬ç”Ÿæ•ˆ\nsource /opt/rh/devtoolset-11/enable\n\n\nä¸è¿‡è¿™æ ·åšï¼Œåªèƒ½åœ¨å½“å‰bashç”Ÿæ•ˆï¼Œæ–°å»ºä¸€ä¸ªbashå°±ä¼šå‘ç°è¿˜æ˜¯4.8.5ã€‚è¦åšçš„å°±æ˜¯å§è¿™ä¸ªè¯­å¥å†™å…¥bashrcçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®©æ¯æ¬¡æ–°å»ºbashçš„æ—¶å€™è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡å°±OKäº†\nè¦ä¿®æ”¹çš„æ˜¯/etc/bashrcï¼Œå¼ºçƒˆå»ºè®®ä¿®æ”¹ä¹‹å‰å…ˆå¤‡ä»½ä¸€ä¸‹\ncp /etc/bashrc ~/bashrc.bak\n\néšåæ‰§è¡Œä¸‹é¢ä¿©å‘½ä»¤\necho &quot;source /opt/rh/devtoolset-11/enable&quot; &gt;&gt; /etc/bashrcsource /etc/bashrc\n\nç°åœ¨å°±OKäº†ï¼Œæ–°å»ºä¸€ä¸ªbashï¼Œå†gcc -vï¼Œå‘ç°å·²ç»æ˜¯æ–°ç‰ˆæœ¬äº†\n\n4.å…³äºmanå¤±æ•ˆé—®é¢˜å‡çº§äº†ç‰ˆæœ¬åï¼Œå¯èƒ½å¯¼è‡´manæ‰‹å†Œå¤±æ•ˆã€‚è¿™æ˜¯å› ä¸ºmançš„ç¯å¢ƒå˜é‡è¢«ä¿®æ”¹äº†\n# echo $MANPATH/opt/rh/devtoolset-11/root/usr/share/man\n\n\nå¦‚æœä½ éœ€è¦ä½¿ç”¨manå‘½ä»¤ï¼Œåˆ™è¿˜éœ€è¦é‡æ–°ä¿®æ”¹ä¸€ä¸‹MANPATHç¯å¢ƒå˜é‡\nexport MANPATH=/usr/share/man\n\nè§£å†³å‚è€ƒ manä»€ä¹ˆéƒ½æœä¸äº†çš„è§£å†³æ–¹æ¡ˆ\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘æ¥å†™ä¸€ä¸ªudpçš„æœåŠ¡ç«¯+å®¢æˆ·ç«¯","url":"/2023/02/01/note_Linux/27udp%E4%BB%A3%E7%A0%81/","content":"æ¥å†™ä¸€ä¸ªudpçš„ä»£ç \n\n\n1.socketç¼–ç¨‹æ¥å£// åˆ›å»º socket æ–‡ä»¶æè¿°ç¬¦ (TCP/UDP, å®¢æˆ·ç«¯ + æœåŠ¡å™¨)int socket(int domain, int type, int protocol);// ç»‘å®šç«¯å£å· (TCP/UDP, æœåŠ¡å™¨)      int bind(int socket, const struct sockaddr *address,         socklen_t address_len);// å¼€å§‹ç›‘å¬socket (TCP, æœåŠ¡å™¨)int listen(int socket, int backlog);// æ¥æ”¶è¯·æ±‚ (TCP, æœåŠ¡å™¨)int accept(int socket, struct sockaddr* address,         socklen_t* address_len);// å»ºç«‹è¿æ¥ (TCP, å®¢æˆ·ç«¯)int connect(int sockfd, const struct sockaddr *addr,         socklen_t addrlen);\n\nlinuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œsocketæ¥å£ä¹Ÿä¸ä¾‹å¤–ã€‚å…¶è¿”å›å€¼æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªfdæ–‡ä»¶æè¿°ç¬¦ï¼Œè¿™æ ·æˆ‘ä»¬å¯¹ç½‘ç»œçš„å‘é€&#x2F;æ¥æ”¶æ“ä½œï¼Œå°±è½¬æ¢æˆäº†å¯¹æ–‡ä»¶çš„å†™å…¥&#x2F;è¯»å–æ“ä½œäº†\nåœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç»“æ„sockaddréœ€è¦è¯´æ˜ä¸€ç•ª\n1.1 sockaddrsocketæ˜¯ä¸€å±‚æŠ½è±¡çš„ç½‘ç»œç¼–ç¨‹æ¥å£ï¼Œé€‚ç”¨äºå„ç§åº•å±‚ç½‘ç»œåè®®ï¼Œå¦‚IPv4&#x2F;IPv6ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ¥å£è¿˜å¯ä»¥ç”¨äºç³»ç»Ÿå†…éƒ¨çš„é€šä¿¡ã€‚è¿™å°±å®ç°äº†ç”¨ä¸€ä¸ªæ¥å£æ¥å¹²ä¸¤ä»¶äº‹ã€‚\nä¸ºæ­¤ï¼Œå°±å¿…é¡»è¦åœ¨ä¼ å€¼ä¸­è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è¯¥æ¥å£æ–°å¢äº†ä¸€ä¸ªsockaddrï¼Œç”¨æ¥æ¥æ”¶ç›®æ ‡ä¿¡æ¯ã€‚è¿™ä¸ªå€¼çš„å‚æ•°å¯ä»¥æ˜¯sockaddr_in/scokaddr_un/sockadd_in6ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªï¼ˆéœ€è¦å¼ºè½¬æŒ‡é’ˆï¼‰\nsockaddræœ¬èº«ä¸å­˜æ”¾ä»»ä½•ä¿¡æ¯ã€‚\nè¿™ä¸ªå‚æ•°å¯æ¥æ”¶çš„ç»“æ„ä½“ä¸­ï¼Œå›ºå®šå‰16ä½å°±æ˜¯ç”¨äºæ ‡è¯†ç¬¦çš„ã€‚ä¼ åˆ°å¤„ç†å‡½æ•°ä¸­ï¼Œå°±ä¼šåˆ¤æ–­å‰16ä½ä¸­çš„æ ‡è¯†ç¬¦çš„ç±»å‹ï¼Œä»¥ç¡®å®šä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œå†æ‰§è¡Œä¸åŒçš„å®ç°\n\næ¯”å¦‚ä¼ å…¥çš„scokaddr_unï¼Œå‰16ä½æ˜¯AF_UNIXï¼Œé‚£ä¹ˆå½“å‰ä½¿ç”¨çš„å°±æ˜¯æœ¬åœ°é€šä¿¡\nsockaddr_inæ˜¯ipv4é€šä¿¡ï¼Œsockaddr_in6æ˜¯ipv6é€šä¿¡\n\n\nä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæ—¢ç„¶sockaddrä¸å­˜æ”¾ä¿¡æ¯ï¼Œé‚£ä¸ºä½•ä¸æŠŠè¿™ä¸ªå‚æ•°è®¾ç½®ä¸ºä¸€ä¸ªvoid*çš„æŒ‡é’ˆï¼Ÿåæ­£æœ€åéƒ½æ˜¯è¿›äº†å‡½æ•°ä¹‹ååˆ¤æ–­å‚æ•°ç±»å‹ï¼Œvoid*æŒ‡é’ˆä¹Ÿèƒ½è¾¾æˆç›®æ ‡å‘€ğŸ§\nè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¾ˆç®€å•ï¼šå½“åˆè®¾è®¡è¿™å¥—æ¥å£çš„æ—¶å€™ï¼ŒCè¯­è¨€è¿˜ä¸æ”¯æŒvoid*ğŸ˜‚\n\n1.2 å­˜æ”¾ä½ç½®å› ä¸ºsockaddr_inè¿™ç±»çš„ç»“æ„ä½“ï¼Œæœ€ç»ˆéƒ½éœ€è¦è¢«æ“ä½œç³»ç»Ÿè½½å…¥å¹¶å®ç°ç½‘ç»œæ“ä½œã€‚æ‰€ä»¥å®ƒä»¬è‚¯å®šæ˜¯éœ€è¦è½½å…¥å†…æ ¸ä¸­çš„\nä½†è¿™å¹¶ä¸æ„å‘³ç€è¿™ç±»ç»“æ„ä½“æ˜¯å­˜æ”¾åœ¨å†…æ ¸é‡Œé¢çš„ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨ç”¨æˆ·æ ˆï¼Œç”¨æˆ·æ€å’Œå†…æ ¸æ€äº¤æ¢çš„æ—¶å€™ï¼Œé€šè¿‡æ¥å£ä¼ å€¼è½½å…¥åˆ°å†…æ ¸çš„ç©ºé—´è¿›è¡Œä½¿ç”¨\n2.serveräº†è§£äº†ä¸Šé¢çš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥ï¼Œè®¤è¯†ä¸€ä¸‹å¦‚æœæƒ³å»ºç«‹ä¸€ä¸ªudpserverï¼Œéœ€è¦æ€ä¹ˆæ“ä½œå§ï¼\nä»¥ä¸‹æ˜¯ä¸€ä¸ªserverçš„ç±»ï¼ŒåŒ…å«äº†ç«¯å£ã€ipã€socker fdä¸‰ä¸ªåŸºæœ¬ä¿¡æ¯\nclass UdpServer&#123;public:    UdpServer(uint16_t port,const string&amp; ip=&quot;&quot;)     : _port((uint16_t)port), _ip(ip), _sockfd(-1)    &#123;&#125;private:    // æœåŠ¡å™¨ç«¯å£å·    uint16_t _port;    // æœåŠ¡å™¨ipåœ°å€    string _ip;    // æœåŠ¡å™¨socket fdä¿¡æ¯    int _sockfd;&#125;;\n\n2.1 åˆ›å»ºå¥—æ¥å­—è¿™é‡Œéœ€è¦ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸ªæ¥å£\nint socket(int domain, int type, int protocol);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°domainæ ‡è¯†è¯¥sockerçš„ä½œç”¨åŸŸ\n\nå¯ä»¥è®¾ç½®ä¸ºæœ¬åœ°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç½‘ç»œã€‚æ”¯æŒå¦‚ä¸‹å‚æ•°\nName                Purpose                          Man pageAF_UNIX, AF_LOCAL   Local communication              unix(7)AF_INET             IPv4 Internet protocols          ip(7)AF_INET6            IPv6 Internet protocols          ipv6(7)AF_IPX              IPX - Novell protocolsAF_NETLINK          Kernel user interface device     netlink(7)AF_X25              ITU-T X.25 / ISO-8208 protocol   x25(7)AF_AX25             Amateur radio AX.25 protocolAF_ATMPVC           Access to raw ATM PVCsAF_APPLETALK        Appletalk                        ddp(7)AF_PACKET           Low level packet interface       packet(7)\n\nå› ä¸ºæˆ‘ä»¬è¦åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºAF_INETï¼Œä¹Ÿå°±æ˜¯IPV4çš„æœåŠ¡\n\nç¬¬äºŒä¸ªå‚æ•°typeæŒ‡ä»£å¥—æ¥å­—çš„ç±»å‹ï¼Œå†³å®šäº†é€šä¿¡æ—¶çš„æŠ¥æ–‡ç±»å‹\n\nè¿™é‡Œæ”¯æŒæµå¼ï¼ˆTCPï¼‰æˆ–è€…ç”¨æˆ·æ•°æ®æŠ¥ï¼ˆUDPï¼‰ï¼Œä»¥åŠRAWåŸå§‹æ ¼å¼ï¼ˆèƒ½å¤Ÿç›´æ¥è®¿é—®åè®®ï¼Œæ–¹ä¾¿debugï¼‰\nSOCK_STREAM   Provides sequenced, reliable, two-way, connection-based byte streams. An out-of-band data  transmission  mechanism  may  be supported.SOCK_DGRAM    Supports datagrams (connectionless, unreliable messages of a fixed maximum length). SOCK_RAW        Provides raw network protocol access.\n\næ›´å¤šæ”¯æŒçš„å‚æ•°å‚è€ƒmanæ‰‹å†Œ\n\nç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡ä»£åè®®ï¼Œåœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œè®¾ç½®ä¸º0å³å¯\n\nè¿”å›å€¼æ˜¯ä¸€ä¸ªlinuxç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦\nRETURN VALUE       On success, a file descriptor for the new socket is returned.  On error, -1 is returned, and errno is set appropriately.\n\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å†™å‡ºç¬¬ä¸€è¡Œä»£ç ï¼Œä»¥åŠå¯¹è¿™ä¸ªä»£ç çš„è¿”å›å€¼åˆ¤æ–­\n_sockfd = socket(AF_INET, SOCK_DGRAM, 0);if (_sockfd &lt; 0)&#123;    logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), _sockfd);    exit(1);&#125;\n\nå› ä¸ºsocketæ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ºäº†è§„èŒƒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ææ„å‡½æ•°é‡Œé¢è°ƒç”¨ä¸€ä¸‹close\n~UdpServer()&#123;    close(_sockfd);&#125;\n\n2.2 é…ç½®sockaddr_in// 2. ç»‘å®šç½‘ç»œä¿¡æ¯ï¼ŒæŒ‡æ˜ip+portstruct sockaddr_in local;memset(&amp;local,0,sizeof(local));//é…ç½®ä¸º 0\n\nå› ä¸ºç”¨çš„æ˜¯ipv4çš„ç½‘ç»œé€šä¿¡ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åˆå§‹åŒ–ä¸€ä¸ªsockaddr_inç±»å‹\næ­¤æ—¶åœ¨vscodeçš„ä»£ç è¡¥å…¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°4ä¸ªæˆå‘˜ï¼Œéœ€è¦å¯¹å®ƒä»¬èµ‹å€¼ä»¥é…ç½®æœåŠ¡å™¨ä¿¡æ¯\n\né¦–å…ˆæ˜¯æŠŠåè®®å®¶æ—è®¾ç½®ä¸ºIPV4ï¼Œç«¯å£é…ç½®ä¸ºå‡½æ•°å‚æ•°ä¸­çš„ç«¯å£\n// åè®®å®¶æ—ï¼Œè®¾ç½®ä¸ºipv4local.sin_family = AF_INET; // ç«¯å£ï¼Œéœ€è¦è¿›è¡Œ æœ¬åœ°-&gt;ç½‘ç»œè½¬æ¢local.sin_port = htons(_port);\n\néšåé…ç½®ip\n// å¦‚æœåˆå§‹åŒ–æ—¶å€™çš„ipä¸ºç©ºï¼Œåˆ™è°ƒç”¨INADDR_ANYä»£è¡¨ä»»æ„ipã€‚å¦åˆ™å¯¹ä¼ å…¥çš„ipè¿›è¡Œè½¬æ¢åèµ‹å€¼local.sin_addr.s_addr = _ip.empty() ? htonl(INADDR_ANY) : inet_addr(ip_.c_str());\n\nè¿™é‡Œé‡‡ç”¨äº†?:ä¸‰ç›®æ“ä½œç¬¦ï¼Œå¦‚æœç±»æ„é€ çš„æ—¶å€™ä¼ å…¥çš„ipæ˜¯ç©ºï¼ˆæ²¡æœ‰é…ç½®ipï¼‰é‚£å°±ç›´æ¥è®¾ç½®ä¸ºä»»æ„ipï¼Œå¦åˆ™ä¼ å…¥æˆå‘˜å˜é‡ï¼›\nè¿™æ ·å¯¹sockaddr_inçš„é…ç½®å°±å®Œæˆäº†ã€‚\n2.2.1 inet_addrè¿™é‡Œéœ€è¦ä½¿ç”¨inet_addrå‡½æ•°å¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²ç±»å‹çš„ipï¼ˆå¦‚192.168.0.1ï¼‰è¿›è¡Œè½¬æ¢\nin_addr_t inet_addr(const char *cp);//å¯¹å­—ç¬¦ä¸²ipè¿›è¡Œè½¬æ¢\n\nå› ä¸ºå¯¹äºç½‘ç»œæ¥è¯´ï¼Œå®ƒå¹¶ä¸è®¤è¯†å­—ç¬¦ä¸²ç±»å‹çš„ipï¼Œè€Œæ˜¯è¦ç”¨ç½‘ç»œå­—èŠ‚æµè§„å®šçš„ç±»å‹ã€‚\n/* Internet address.  */typedef uint32_t in_addr_t;struct in_addr  &#123;    in_addr_t s_addr;  &#125;;\n\nå¯¹äºè¯¥æ¥å£çš„åº•å±‚åšä¸€ä¸ªç®€å•çš„è¯´æ˜ï¼šå…¶å®å°±æ˜¯åˆ©ç”¨ä½æ®µï¼Œå°†æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹\n//ç¤ºä¾‹ï¼Œéåº•å±‚å®ç°struct ip&#123;    uint32_t part1:8;    uint32_t part2:8;    uint32_t part3:8;    uint32_t part4:8;&#125;\n\n2.2.2 inet_ntoaåŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½œä¸ºå®¢æˆ·ç«¯æ¥å—åˆ°äº†ç½‘ç»œè¯·æ±‚ä¸­çš„ipï¼Œå¯ä»¥ç”¨inet_ntoaå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚\nchar *inet_ntoa(struct in_addr in);\n\nè¿™é‡Œå°±å¼•ç”³å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šè¿”å›å€¼çš„char*æ˜¯å­˜åœ¨å“ªé‡Œçš„ï¼Ÿæ˜¯é™æ€åŒºè¿˜æ˜¯mallocï¼Ÿ\n\næ‰‹å†Œå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªstaticå˜é‡æ¥å­˜æ”¾è¿”å›çš„ipçš„ã€‚\nå› æ­¤ï¼Œè¯¥å‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å‡½æ•°ï¼Œåœ¨APUEä¸­æ˜ç¡®æ ‡æ˜äº†è¿™ä¸€ç‚¹\n\n2.3 bindç»‘å®šipç«¯å£#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int bind(int sockfd, const struct sockaddr *addr,         socklen_t addrlen);\n\nè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯æŒ‡å®šsocketå’Œsockaddrè¿›è¡Œç»‘å®šã€‚ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯addrå…ƒç´ çš„å¤§å°ï¼ˆä¸æ˜¯æŒ‡é’ˆå¤§å°ï¼Œåˆ«æé”™äº†ï¼‰\n// 2.2 ç»‘å®šipç«¯å£if (bind(_sockfd,(const struct sockaddr *)&amp;local, sizeof(local)) == -1)&#123;    logging(FATAL, &quot;bind: %s:%d&quot;, strerror(errno), _sockfd);    exit(2);&#125;logging(DEBUG,&quot;socket bind success: %d&quot;, _sockfd);\n\nç»‘å®šäº†ä¹‹åï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨å°±é…ç½®æˆåŠŸäº†\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¯‘æ²¡æœ‰æŠ¥é”™ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ make udpServerg++ -o udpServer udpServer.cpp -std=c++11[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServerDEBUG | 1675326460 | muxue | socket create success: 3DEBUG | 1675326460 | muxue | socket bind success: 3\n\n2.3.1 mainç°åœ¨å…ˆæ¥ç®€å•å†™ä¸€ä¸‹mainå‡½æ•°ä¸­å¯åŠ¨æœåŠ¡çš„å‘½ä»¤è¡Œå‚æ•°å§\nint main(int argc,char* argv[])&#123;    //å‚æ•°åªæœ‰ä¸¤ä¸ªï¼ˆç«¯å£/ipï¼‰æ‰€ä»¥å‚æ•°ä¸ªæ•°åº”è¯¥æ˜¯2-3    if(argc!=2 &amp;&amp; argc!=3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; port [ip]&quot; &lt;&lt; endl;        return 1;    &#125;        string ip;    // 3ä¸ªå‚æ•°ï¼Œæœ‰ip    if(argc==3)    &#123;        ip = argv[2];    &#125;    UdpServer s(atoi(argv[1]),ip);    s.start();    return 0;&#125;\n\nä¸ºäº†æµ‹è¯•ï¼Œå…ˆæŠŠstart()å‡½æ•°è®¾ç½®ä¸ºä¸€ä¸ªæ­»å¾ªç¯\nvoid start()&#123;    while(1)    &#123;        cout &lt;&lt; &quot;running &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;\n\nç¼–è¯‘è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°é”™è¯¯æç¤ºæ˜¯å¯ä»¥ç”¨çš„ã€‚æ­£ç¡®æ·»åŠ å‚æ•°ä¹‹åï¼Œä¹Ÿèƒ½ç»‘å®šå¹¶å¼€å§‹è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ make udpServerg++ -o udpServer udpServer.cpp -std=c++11[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServerUsage: ./udpServer port [ip][muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServer 8080DEBUG | 1675327610 | muxue | socket create success: 3DEBUG | 1675327610 | muxue | socket bind success: 3running 4467running 4467running 4467^C\n\næ³¨æ„ï¼Œbindè¿™ä¸ªå‡½æ•°æ˜¯ä¸å…è®¸ä½ ç»‘å®šäº‘æœåŠ¡å™¨çš„å…¬ç½‘ipçš„ã€‚å› ä¸ºäº‘æœåŠ¡å™¨å¹¶ä¸æ˜¯ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šçš„ï¼Œè€Œæ˜¯ç”±æä¾›å•†çš„å…¥å£æœåŠ¡å™¨è¿›å…¥å†…ç½‘ï¼Œåœ¨è¿›å…¥ä½ çš„æœåŠ¡å™¨ã€‚æ‰€ä»¥ä»–ä¸å…è®¸ä½ ç»‘å®šå…¬ç½‘ipï¼›\n$ ./udpServer 8080 äº‘æœåŠ¡å™¨å…¬ç½‘ipDEBUG | 1675327690 | muxue | socket create success: 3FATAL | 1675327690 | muxue | bind: Cannot assign requested address:3\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©ä¸ç»‘å®šipï¼Œæˆ–è€…ç»‘å®šæœ¬åœ°ç«¯å£127.0.0.1\n\nå¦‚æœç»‘å®šäº†127.0.0.1ï¼Œé‚£ä¹ˆæœåŠ¡åªæœ‰æœ¬åœ°å¯ä»¥è®¿é—®ã€‚ä¸ç»‘å®šç«¯å£ï¼Œå°±ä¼šé»˜è®¤ç»‘å®šæˆ0.0.0.0ï¼Œå…è®¸æœ¬åœ°å’Œè¿œç¨‹ç«¯å£è¿æ¥\n\n$ ./udpServer 8080 127.0.0.1DEBUG | 1675327757 | muxue | socket create success: 3DEBUG | 1675327757 | muxue | socket bind success: 3running 5067running 5067\n\n2.3.2 netstatå¯ä»¥ç”¨netstat -lnupå‘½ä»¤æŸ¥çœ‹å½“å‰å¼€æ”¾çš„ç«¯å£ä¿¡æ¯\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è¡Œå°±æ˜¯æˆ‘ä»¬çš„udpæœåŠ¡å™¨ï¼Œæœ¬åœ°ç«¯å£æ˜¯æˆ‘ä»¬ç»‘å®šçš„127.0.0.1:8080ï¼Œè¿œç¨‹ç«¯å£æ˜¯0.0.0.0:*ï¼Œä»£è¡¨å…è®¸ä»»ä½•è¿œç¨‹ipçš„ä»»ä½•ç«¯å£æ¥è®¿é—®\n2.4 å¼€å§‹è¿è¡Œä¸Šé¢çš„æ“ä½œåªæ˜¯åˆå§‹åŒ–äº†è¿™ä¸ªudpæœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰è®©å®ƒçœŸæ­£çš„è¿è¡Œèµ·æ¥ï¼›\næ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯è®©æœåŠ¡å™¨å¼€å§‹æ¥æ”¶ä¿¡æ¯ï¼Œå¹¶åœ¨å±å¹•ä¸Šæ‰“å°å‡ºæ¥\n2.4.1 recvfromè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯æ¥æ¥æ”¶ä¿¡æ¯\n#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,                 struct sockaddr *src_addr, socklen_t *addrlen);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‰é¢åˆ›å»ºçš„å¥—æ¥å­—\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥æ¥æ”¶ä¿¡æ¯çš„ç¼“å†²åŒº\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¼“å†²åŒºçš„å¤§å°\nç¬¬å››ä¸ªå‚æ•°æ˜¯æ ‡è¯†ç¬¦ï¼Œè®¾ç½®ä¸º0ï¼Œä»£è¡¨é˜»å¡ç­‰å¾…\nç¬¬äº”ä¸ªå‚æ•°ï¼Œè¾“å‡ºå‹å‚æ•°ï¼Œè·å–å‘é€æ–¹çš„ä¿¡æ¯\nç¬¬å…­ä¸ªå‚æ•°ï¼Œè¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦åˆå§‹åŒ–ä¸ºsizeof(src_addr)\n\nå‡½æ•°çš„è¿”å›å€¼æ˜¯æ¥æ”¶åˆ°çš„æ•°æ®çš„é•¿åº¦ï¼Œæ²¡æœ‰æ¥æ”¶åˆ°æˆ–è€…æ¥å—å¤±è´¥ï¼Œåˆ™ä¸º-1\nç¤ºä¾‹å¦‚ä¸‹\nchar inBuf[BUF_SIZE];struct sockaddr_in peer;      //è¾“å‡ºå‹å‚æ•°socklen_t len = sizeof(peer); //è¾“å…¥è¾“å‡ºå‹å‚æ•°// peerå’Œlenéƒ½æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œç”¨äºè·å–å‘é€æ–¹çš„ä¿¡æ¯// lenæ˜¯è¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦ä»¥sizeof(peer)åˆå§‹åŒ–åä¼ å…¥// ç¬¬ä¸‰ä¸ªå‚æ•°0ä¸ºé»˜è®¤ç­‰å¾…æ–¹å¼ï¼ˆé˜»å¡ç­‰å¾…ï¼‰ssize_t s = recvfrom(_sockfd, inBuf, sizeof(inBuf)-1,0,(struct sockaddr *)&amp;peer, &amp;len);if (s &gt; 0) // sä»£è¡¨è·å–åˆ°çš„æ•°æ®é•¿åº¦ï¼Œä¸ä¸º0ä»£è¡¨æˆåŠŸè·å–&#123;    inBuf[s] = &#x27;\\0&#x27;; //æœ«å°¾è¿½åŠ &#x27;\\0&#x27;&#125;else if (s == -1) // -1æ²¡æœ‰æ”¶åˆ°ä¿¡æ¯ï¼Œé”™è¯¯&#123;    logging(WARINING, &quot;recvfrom: %s:%d&quot;, strerror(errno), _sockfd);    continue;&#125;\n\nè¿™æ ·å°±èƒ½åœ¨inBufä¸­ç›´æ¥è·å–åˆ°å‘é€ä¿¡æ¯çš„å†…å®¹\n2.5 æœåŠ¡ç«¯startä»¥ä¸‹æ˜¯æœåŠ¡ç«¯è¿è¡Œçš„å®Œæ•´ä»£ç \nvoid start()&#123;    char inBuf[BUF_SIZE];//æ¥æ”¶åˆ°ä¿¡æ¯çš„ç¼“å†²åŒº    while(1)    &#123;        struct sockaddr_in peer;      //è¾“å‡ºå‹å‚æ•°        socklen_t len = sizeof(peer); //è¾“å…¥è¾“å‡ºå‹å‚æ•°        // peerå’Œlenéƒ½æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œç”¨äºè·å–å‘é€æ–¹çš„ä¿¡æ¯        // lenæ˜¯è¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦ä»¥sizeof(peer)åˆå§‹åŒ–åä¼ å…¥        // ç¬¬ä¸‰ä¸ªå‚æ•°0ä¸ºé»˜è®¤ç­‰å¾…æ–¹å¼ï¼ˆé˜»å¡ç­‰å¾…ï¼‰        ssize_t s = recvfrom(_sockfd, inBuf, sizeof(inBuf)-1,0,(struct sockaddr *)&amp;peer, &amp;len);        if (s &gt; 0) // sä»£è¡¨è·å–åˆ°çš„æ•°æ®é•¿åº¦ï¼Œä¸ä¸º0ä»£è¡¨æˆåŠŸè·å–        &#123;            inBuf[s] = &#x27;\\0&#x27;; //æœ«å°¾è¿½åŠ &#x27;\\0&#x27;        &#125;        else if (s == -1) // -1æ²¡æœ‰æ”¶åˆ°ä¿¡æ¯ï¼Œé”™è¯¯        &#123;            logging(WARINING, &quot;recvfrom: %s:%d&quot;, strerror(errno), _sockfd);            continue;        &#125;        string senderIP = inet_ntoa(peer.sin_addr);// æ¥æºip        uint16_t senderPort = ntohs(peer.sin_port); // æ¥æºç«¯å£        logging(NOTICE, &quot;[%s:%d]# %s&quot;, senderIP.c_str(),senderPort, inBuf);//æ‰“å°ä¿¡æ¯    &#125;&#125;\n\nå¦‚æœä½ æƒ³è®©å¦å¤–ä¸€å°ä¸»æœºè®¿é—®è¿™ä¸ªæœåŠ¡ï¼Œåˆ™éœ€è¦åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°å’Œlinuxç³»ç»Ÿä¸­åŒæ—¶å¼€æ”¾å¯¹åº”çš„udpç«¯å£\n\nå‚è€ƒ ã€Linuxã€‘è®¾ç½®ç³»ç»Ÿé˜²ç«å¢™\n\n3.clientæœ‰äº†æœåŠ¡ç«¯ï¼Œä¹Ÿè¦æœ‰å¯¹åº”çš„å®¢æˆ·ç«¯æ¥å‘é€æ¶ˆæ¯ï¼›é™¤äº†å‘é€æ¶ˆæ¯çš„éƒ¨åˆ†ï¼Œå…¶ä½™æ“ä½œå’ŒæœåŠ¡ç«¯åŸºæœ¬ä¸€è‡´ã€‚\n3.1 sendto#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;ssize_t send(int sockfd, const void *buf, size_t len, int flags);ssize_t sendto(int sockfd, const void *buf, size_t len, int flags,               const struct sockaddr *dest_addr, socklen_t addrlen);ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);\n\nè¿™é‡Œæˆ‘ä»¬è¦ç”¨çš„æ˜¯sendtoæ¥å£\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯socketå¥—æ¥å­—\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºè¾“å…¥çš„ç¼“å†²åŒº\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¼“å†²åŒºçš„ç±»å‹\nç¬¬å››ä¸ªå‚æ•°æ˜¯æ ‡è¯†ç¬¦ï¼Œä¹Ÿè®¾ç½®ä¸º0\nç¬¬äº”ä¸ªå‚æ•°å’Œç¬¬å…­ä¸ªå‚æ•°ä¸recvfromä¸€è‡´ï¼Œä¸ºç›®æ ‡æœåŠ¡å™¨çš„ä¿¡æ¯\n\nå…³äºflagå‚æ•°ï¼Œmanæ‰‹å†Œä¸­æœ‰æ›´å¤šé€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¾æ—§ä¼ å…¥0é‡‡ç”¨é»˜è®¤ç­–ç•¥\nThe flags argument is the bitwise OR of zero or more of the following flags.\n\n3.2 å®¢æˆ·ç«¯éœ€ä¸éœ€è¦æ‰‹åŠ¨bind?é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ç‚¹ï¼Œbindå‡½æ•°å¹¶æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯æœåŠ¡ç«¯æ‰èƒ½ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¸è¦ä½¿ç”¨bindæ˜¯ç¨‹åºçŒ¿è‡ªå·±çš„é€‰æ‹©ã€‚\nç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼šé‚£å°±æ˜¯ä¸éœ€è¦æ‰‹åŠ¨bind\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸€ç‚¹ï¼šå¦‚æœä¸€ä¸ªç½‘ç»œè¿›ç¨‹åœ¨å¯åŠ¨çš„æ—¶å€™æ²¡æœ‰æ‰‹åŠ¨bindç«¯å£ï¼Œç³»ç»Ÿæ˜¯ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£ç»™å®ƒçš„\n\nå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼ŒIP:ç«¯å£å¿…é¡»å›ºå®šï¼Œå¦åˆ™æ²¡æœ‰åŠæ³•ç»™å®¢æˆ·ç«¯æä¾›ç¨³å®šçš„æœåŠ¡ã€‚å®¢æˆ·åˆä¸èƒ½æ‹†äº†ä½ çš„åº”ç”¨ç¨‹åºä¿®æ”¹æºç ä¸­çš„ç«¯å£ï¼\nè€Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œç«¯å£åº”è¯¥è®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ã€‚å› ä¸ºè¿™æ ·èƒ½é¿å…å†²çªé—®é¢˜ã€‚ä¸ç„¶å¦‚æœæœ‰å¦å¤–ä¸€ä¸ªåº”ç”¨å ç”¨äº†å®¢æˆ·ç«¯bindçš„ç«¯å£ï¼Œé‚£è¿™ä¸ªç¨‹åºå°±ä¼šå› ä¸ºç«¯å£å†²çªè€Œä¸€ç›´æ‰“ä¸å¼€ï¼\n\næ‰€ä»¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦æˆ‘ä»¬è°ƒç”¨bindå‡½æ•°ï¼Œåªéœ€è¦é…ç½®å¥½æœåŠ¡ç«¯çš„ç›®æ ‡ipå’Œç›®æ ‡ç«¯å£å°±è¡Œäº†\n3.3 ä»£ç ç¤ºä¾‹#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstdlib&gt;#include &lt;cassert&gt;#include &lt;unistd.h&gt;#include &lt;strings.h&gt;#include &lt;netinet/in.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;using namespace std;struct sockaddr_in server;// ./udpClient server_ip server_port// å®¢æˆ·ç«¯è¦è¿æ¥serverï¼Œå¿…é¡»çŸ¥é“serverå¯¹åº”çš„ipå’Œportint main(int argc, char *argv[])&#123;    if (argc != 3)    &#123;        cout &lt;&lt; &quot;Usage:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; server_ip server_port&quot; &lt;&lt; endl;        return 1;    &#125;    // 1. æ ¹æ®å‘½ä»¤è¡Œï¼Œè®¾ç½®è¦è®¿é—®çš„æœåŠ¡å™¨IP    string server_ip = argv[1];    uint16_t server_port = atoi(argv[2]);    // 2. åˆ›å»ºå®¢æˆ·ç«¯    // 2.1 åˆ›å»ºsocket    int sockfd = socket(AF_INET, SOCK_DGRAM, 0);    if(sockfd&lt;0)    &#123;        cout &lt;&lt; &quot;socket åˆ›å»ºå¤±è´¥&quot; &lt;&lt; endl;        return 2;    &#125;    bzero(&amp;server, sizeof(server));//è¿™ä¸ªå‡½æ•°ç›¸å½“äºmemsetå…¨0    server.sin_family = AF_INET;//ipv4    server.sin_port = htons(server_port);//ç›®æ ‡æœåŠ¡å™¨ç«¯å£    server.sin_addr.s_addr = inet_addr(server_ip.c_str());//ç›®æ ‡ip    // 3. é€šè®¯è¿‡ç¨‹    string buffer;    while (true)    &#123;        cerr &lt;&lt; &quot;Please Enter# &quot;;        getline(cin, buffer);        // å‘é€æ¶ˆæ¯ç»™server        sendto(sockfd, buffer.c_str(), buffer.size(), 0,               (const struct sockaddr *)&amp;server, sizeof(server));         // é¦–æ¬¡è°ƒç”¨sendtoå‡½æ•°çš„æ—¶å€™ï¼Œclientä¼šè‡ªåŠ¨bindè‡ªå·±çš„ipå’Œport        // å®¢æˆ·ç«¯ä¸åº”è¯¥è‡ªå·±ç»‘å®šç«¯å£ï¼Œå¦åˆ™ç«¯å£è¢«å ç”¨=å®¢æˆ·ç«¯ä¸èƒ½ç”¨    &#125;    close(sockfd);    return 0;&#125;\n\n3.4 è¿è¡Œæµ‹è¯•è¿™é‡Œæä¾›ä¸€ä¸ªmakefileï¼Œæ¥å¿«é€Ÿç¼–è¯‘æœåŠ¡ç«¯&#x2F;å®¢æˆ·ç«¯çš„æºç \n.PHONY:allall:udpClient udpServerudpClient: udpClient.cpp\tg++ -o $@ $^ -std=c++11 -lpthreadudpServer:udpServer.cpp\tg++ -o $@ $^ -std=c++11.PHONY:cleanclean:\trm -f udpClient udpServer\n\nè¿è¡ŒæœåŠ¡å™¨ï¼ŒæŒ‡å®š8080ç«¯å£å¯åŠ¨ã€‚å†è¿è¡Œå®¢æˆ·ç«¯ï¼ŒæŒ‡å®š127.0.0.1æœ¬åœ°ipå’Œ8080ç«¯å£\n\nå¯ä»¥çœ‹åˆ°ï¼Œå³ä¾§æˆ‘ä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œéƒ½åœ¨å·¦ä¾§è¢«æ‰“å°äº†å‡ºæ¥ï¼ŒåŒæ—¶æ˜¾ç¤ºäº†æ¥æºipå’Œç«¯å£\n3.5 windowså®¢æˆ·ç«¯è®©æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œwindowsä¸Šç½‘ç»œçš„æ¥å£å’Œlinuxå¾ˆç›¸ä¼¼ï¼›è¿™é‡Œæä¾›ä¸€ä¸ªwindowsä¸‹çš„udpå®¢æˆ·ç«¯ï¼Œå‘æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨å‘é€ä¿¡æ¯\næ³¨ï¼šè¿›è¡Œæµ‹è¯•å‰ï¼Œä¸€å®šè¦åœ¨é˜²ç«å¢™é‡Œé¢å¼€æ”¾äº‘æœåŠ¡å™¨å¯¹åº”çš„udpç«¯å£\n#define _WINSOCK_DEPRECATED_NO_WARNINGS 1//å±è”½æŠ¥é”™#include&lt;winsock2.h&gt;#include&lt;stdio.h&gt;#include&lt;string.h&gt;#include&lt;string&gt;#include&lt;iostream&gt;using namespace std;#pragma comment(lib,&quot;ws2_32.lib&quot;)#define BUFFER_SIZE  1024    //ç¼“å†²åŒºå¤§å°int main() &#123;    WSADATA WSAData;    //åˆå§‹åŒ–    if (WSAStartup(MAKEWORD(2, 2), &amp;WSAData) != 0)     &#123;        printf(&quot;åˆå§‹åŒ–å¤±è´¥!&quot;);        return -1;    &#125;        //åˆ›å»ºå®¢æˆ·ç«¯ç”¨äºé€šä¿¡çš„Socket    SOCKET sock_Client = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);    //æœåŠ¡å™¨çš„åœ°å€æ•°æ®ç»“æ„    SOCKADDR_IN addr_server;       addr_server.sin_family = AF_INET;    addr_server.sin_port = htons(10000);// ç›®æ ‡ç«¯å£    addr_server.sin_addr.S_un.S_addr = inet_addr(&quot;127.0.0.1&quot;); //ç›®æ ‡å…¬ç½‘ip(éœ€è¦æ”¹æˆä½ è‡ªå·±çš„)    string sendBuf;    while (true)     &#123;        cout &lt;&lt; &quot;è¯·è¾“å…¥è¦ä¼ é€çš„æ•°æ®: &quot;;        getline(cin,sendBuf);        sendto(sock_Client, sendBuf.c_str(),sendBuf.size(), 0, (const SOCKADDR*)&amp;addr_server, sizeof(addr_server));        cout &lt;&lt; sendBuf.size() &lt;&lt; &quot;: &quot; &lt;&lt; sendBuf &lt;&lt; endl;    &#125;    closesocket(sock_Client);    WSACleanup();    return 0;&#125;\n\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°äº‘æœåŠ¡å™¨æˆåŠŸæ”¶åˆ°äº†ä¿¡æ¯ï¼Œä½†å› ä¸ºwindowså’Œlinuxçš„æ–‡å­—ç¼–ç é—®é¢˜ï¼Œæ²¡èƒ½æ­£ç¡®æ˜¾ç¤ºå‡ºä¸­æ–‡\n\nå‘é€è‹±æ–‡ä¿¡æ¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼\n\n4.æ›´è¿›ä¸€æ­¥4.1 è®°å½•ç”¨æˆ·æœ‰ç”¨æˆ·ç»™ä½ å‘é€ä¿¡æ¯ï¼Œç†è®ºä¸Šæ¥è¯´ï¼ŒæœåŠ¡ç«¯åº”è¯¥è®°å½•ä¸‹ç”¨æˆ·ï¼Œä»¥å¤‡debug;\nè¿™éƒ¨åˆ†å¹¶ä¸éš¾ï¼Œæˆ‘ä»¬è®°å½•ä¸‹ç”¨æˆ·çš„ipå’Œç«¯å£ï¼Œè¿˜æœ‰ç”¨æˆ·çš„peerç»“æ„ä½“ï¼Œåœ¨æœåŠ¡å™¨é‡Œé¢ç»´æŠ¤ä¸€ä¸ªmapæ¥å­˜æ”¾å°±å¯ä»¥äº†\nvoid CheckUser(struct sockaddr_in peer)&#123;    string tmp = inet_ntoa(peer.sin_addr);// æ¥æºip    tmp += &#x27;:&#x27;;    tmp += to_string(ntohs(peer.sin_port));// æ¥æºç«¯å£    // åœ¨mapä¸­ç”¨ipç«¯å£æ¥æ ‡è¯†ç”¨æˆ·    auto it = _usrMap.find(tmp);    if(it == _usrMap.end())// æ²¡æ‰¾åˆ°    &#123;        _usrMap.insert(&#123;tmp,peer&#125;);    &#125;&#125;\n\n4.2 å®¢æˆ·ç«¯æ¥æ”¶å›ä¿¡å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ç»™æœåŠ¡å™¨åï¼Œå¯ä»¥æ¥æ¥æ”¶ä¸€ä¸‹æœåŠ¡å™¨çš„å›ä¿¡ã€‚æ¯”å¦‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å‘é‚®ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…å¯¹æ–¹å›ä¿¡ï¼Œè¿™æ‰è¡¨æ˜ä½ çš„ä¿¡å¯¹æ–¹ç¡®å®æ”¶åˆ°äº†ï¼Œè€Œä¸æ˜¯ä¸¢åœ¨åŠè·¯ä¸Šäº†\n// ä½¿ç”¨å¤šçº¿ç¨‹æ“ä½œï¼Œæ¥è·å–æœåŠ¡å™¨ä¼ å›çš„ä¿¡æ¯pthread_t t;pthread_create(&amp;t, nullptr, recverAndPrint, (void *)&amp;sockfd);\n\nä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ¥æ“ä½œï¼›å®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å›ä¿¡åï¼Œä¼šæ‰“å°å‡ºæ¥\nvoid *recverAndPrint(void *args)&#123;    while (true)    &#123;        int sockfd = *(int *)args;        char buffer[1024];        struct sockaddr_in temp;        socklen_t len = sizeof(temp);        ssize_t s = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr *)&amp;temp, &amp;len);        if (s &gt; 0)        &#123;            buffer[s] = 0;//å°†æ¥æ”¶åˆ°çš„ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼ˆæœåŠ¡å™¨è¿”å›çš„ï¼‰            cout &lt;&lt; &quot;server echo# &quot; &lt;&lt; buffer &lt;&lt; &quot;\\n&quot;;        &#125;    &#125;&#125;\n\n4.3 æ¶ˆæ¯è·¯ç”±æ‰€è°“æ¶ˆæ¯è·¯ç”±ï¼Œå°±æ˜¯æŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰ç”¨æˆ·ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å•çš„èŠå¤©å®¤ã€‚\nä¸Šé¢æˆ‘ä»¬å·²ç»è·å–å¹¶è®°å½•äº†ä¿¡æ¯ï¼Œä¸‹é¢è¦åšçš„å°±æ˜¯æŠŠä¿¡æ¯é‡æ–°å‘ç»™å…¶ä»–ç”¨æˆ·ï¼›æ“ä½œå’Œå®¢æˆ·ç«¯çš„å‘é€æ˜¯ä¸€æ ·çš„\nvoid MsgRoute(const char* inBuf,size_t len)&#123;    struct sockaddr_in user;    for(auto e:_usrMap)    &#123;        user.sin_family = AF_INET;//ipv4        user.sin_port = e.second.sin_port;//ç”¨æˆ·ç«¯å£        user.sin_addr.s_addr = e.second.sin_addr.s_addr;//ç”¨æˆ·ip        // å‘ç”¨æˆ·å‘é€ä¿¡æ¯        sendto(_sockfd, inBuf, len, 0,               (const struct sockaddr *)&amp;user, sizeof(user));     &#125;&#125;\n\næµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡ç«¯æŠŠæ”¶åˆ°çš„æ¶ˆæ¯å‘é€ç»™äº†ç”¨æˆ·\n\nå†æ–°å¢ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå®¢æˆ·éƒ½æ”¶åˆ°äº†æœåŠ¡å™¨çš„å›ä¿¡\n\nè¿™é‡Œå¯¹äºèŠå¤©å®¤æ¥è¯´è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œé‚£å°±æ˜¯èŠå¤©æ¡†é‡Œé¢å¹¶ä¸ä¼šäºŒæ¬¡å‡ºç°ä½ çš„æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ä¸ä¼šæŠŠä½ å‘é€çš„æ¶ˆæ¯å†è½¬å‘ç»™ä½ ã€‚\næˆ‘ä»¬åœ¨æ¶ˆæ¯è·¯ç”±å‡½æ•°é‡Œé¢è¿›è¡Œåˆ¤æ–­å³å¯ï¼\nvoid MsgRoute(struct sockaddr_in peer,const char* inBuf,size_t len)&#123;    struct sockaddr_in user;    for(auto e:_usrMap)    &#123;        // å¦‚æœipå’Œç«¯å£éƒ½ç›¸ç­‰ï¼Œå°±ä»£è¡¨æ˜¯å‘é€æ¶ˆæ¯çš„ç”¨æˆ·        if(e.second.sin_port != peer.sin_port || e.second.sin_addr.s_addr != peer.sin_addr.s_addr)        &#123;            user.sin_family = AF_INET;//ipv4            user.sin_port = e.second.sin_port;//ç”¨æˆ·ç«¯å£            user.sin_addr.s_addr = e.second.sin_addr.s_addr;//ç”¨æˆ·ip            // å‘ç”¨æˆ·å‘é€ä¿¡æ¯            sendto(_sockfd, inBuf, len, 0,                   (const struct sockaddr *)&amp;user, sizeof(user));         &#125;    &#125;&#125;\n\nå› ä¸ºä¹±åºæ‰“å°çš„é—®é¢˜ï¼Œæ‰€ä»¥çœ‹çš„å¯èƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚ä½†æ˜¯æˆ‘ä»¬çš„ç›®çš„å·²ç»è¾¾åˆ°äº†ï¼\n\nè¿™æ ·æ‰“å°çœ‹çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå¯ä»¥ä½¿ç”¨ç®¡é“æ–‡ä»¶æ¥å®ç°è¾“å‡ºé‡å®šå‘\nmkfifo fifo #åˆ›å»ºä¸€ä¸ªfifoç®¡é“æ–‡ä»¶\n\nè¿è¡Œå®¢æˆ·ç«¯çš„æ—¶å€™ï¼ŒæŒ‡å®šè¾“å‡º\n./udpClient 127.0.0.1 1000 &gt; fifo\n\nåœ¨å¦å¤–ä¸€ä¸ªbashé‡Œé¢ï¼Œç”¨catæ¥è·å–è¾“å‡º\ncat &lt; fifo\n\nè¿™å°±ä¸ä¼šå‡ºç°ä¹±åºæ‰“å°çš„é—®é¢˜äº†ã€‚\nfifoæ˜¯ä¸€ä¸ªç®¡é“æ–‡ä»¶ï¼Œéœ€è¦æ‰§è¡Œcatåï¼ˆè¯»ç«¯ï¼‰ï¼Œå®¢æˆ·ç«¯ï¼ˆå†™ç«¯ï¼‰æ‰èƒ½è¿è¡Œ\n5.moreâ€¦å…³äºudpç¼–ç¨‹çš„æ“ä½œåˆ°è¿™é‡Œå°±Overå•¦ï¼Œç°åœ¨æˆ‘ä»¬è®¤è¯†äº†å¤§éƒ¨åˆ†çš„ç½‘ç»œæ¥å£ï¼Œä¸‹ä¸€æ­¥çš„ç›®æ ‡ï¼Œå°±æ˜¯å®ç°tcpæœåŠ¡å™¨å•¦ï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹","ç½‘ç»œ"]},{"title":"ã€Linuxã€‘manä»€ä¹ˆéƒ½æœä¸äº†ï¼ŒNo manual entry for xxxçš„è§£å†³æ–¹æ¡ˆ","url":"/2023/02/01/note_Linux/28man%E4%BB%80%E4%B9%88%E9%83%BD%E6%90%9C%E4%B8%8D%E4%BA%86%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","content":"manä»€ä¹ˆéƒ½æœä¸äº†ï¼ŒNo manual entry for xxxçš„è§£å†³æ–¹æ¡ˆ\n\n\n\nç³»ç»Ÿ CentOS 7.6\n\n1.é—®é¢˜æè¿°ä»Šå¤©æŸ¥æ‰‹å†Œçš„æ—¶å€™ï¼Œå‘ç°manä»€ä¹ˆéƒ½æŸ¥ä¸äº†ã€‚ä¸ç®¡æ˜¯ç³»ç»Ÿæ¥å£è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½æ˜¾ç¤ºæ²¡æœ‰å…¥å£æ–‡æ¡£ï¼ˆNo manual entry forï¼‰\n[muxue@bt-7274:~/git]$ man pthread_createNo manual entry for pthread_create[muxue@bt-7274:~/git]$ man bindNo manual entry for bind[muxue@bt-7274:~/git]$ man manNo manual entry for man[muxue@bt-7274:~/git]$ man lsNo manual entry for ls\n\nè¿™å¯å¾—éš¾å—äº†ï¼Œè¦çŸ¥é“ï¼Œæˆ‘çš„åšå®¢é‡Œé¢å…³äºæ¥å£å®šä¹‰çš„è¯´æ˜ï¼Œå¾ˆå¤šéƒ½æ˜¯ä»manæ‰‹å†Œé‡Œé¢å¤åˆ¶å‡ºæ¥çš„ã€‚\nåœ¨rootä¸‹å°è¯•äº†å®‰è£…ï¼Œå¹¶yum updateæ›´æ–°ä¹‹åï¼Œè¿˜æ˜¯æ— æ³•ä½¿ç”¨\n\näºæ˜¯æˆ‘å°±å»stackoverflowæäº†ä¸ªé—®é¢˜ ã€ç‚¹æˆ‘ã€‘ ç„¶ååˆè‡ªå·±è§£å†³äº†è¿™ä¸ªé—®é¢˜ğŸ˜‚\n2.è§£å†³æ„Ÿè°¢kooké¢‘é“çš„å¤§ä½¬ï¼Œä¸€çœ¼å°±çœ‹å‡ºæ¥è¿™ä¸ªæ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜\n2.1 é‡è£…manå…ˆè¯•è¯•reinstallé‡è£…\nyum reinstall man-pages\n\n\n2.2 æŸ¥çœ‹ç¯å¢ƒå˜é‡å®‰è£…å®Œæ¯•ï¼ŒæŸ¥çœ‹MANPATHçš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æŒ‡å‘çš„æ˜¯devtoolset-11é‡Œé¢çš„man\n# echo $MANPATH/opt/rh/devtoolset-11/root/usr/share/man\n\nç½ªé­ç¥¸é¦–å°±æ‰¾åˆ°äº†ï¼å‡ å¤©å‰ï¼Œæˆ‘å‡çº§äº†äº‘æœåŠ¡å™¨çš„gccç‰ˆæœ¬ã€æ•™ç¨‹ã€‘å½“æ—¶å®‰è£…çš„å°±æ˜¯devtoolset-11ï¼›\næ‰€ä»¥ï¼Œæƒ…å†µå°±æ˜¯å‡çº§çš„è¿‡ç¨‹ä¸­ï¼Œmançš„ç¯å¢ƒå˜é‡è¢«ä¿®æ”¹äº†ï¼\næˆ‘ä»¬è¦åšçš„å°±æ˜¯ç»™ä»–æ”¹å›æ¥\n2.3 ä¿®æ”¹æˆæ­£ç¡®çš„ç¯å¢ƒå˜é‡å…ˆç”¨whereis manæ‰¾ä¸€ä¸‹mançš„å®‰è£…è·¯å¾„ï¼Œä¸€èˆ¬éƒ½æ˜¯/usr/share/man\n# whereis manman: /usr/bin/man /usr/share/man /usr/share/man/man7/man.7.gz /usr/share/man/man1/man.1.gz /usr/share/man/man1p/man.1p.gz\n\nå°†/usr/share/manå¯¼å…¥åˆ°ç¯å¢ƒå˜é‡\nexport MANPATH=/usr/share/man\n\næ­¤æ—¶å†manï¼Œå‘ç°å·²ç»æ´»è¿‡æ¥äº†\nman man\n\n\n2.4 æ°¸ä¹…ç”Ÿæ•ˆexport MANPATH=/usr/share/manåªæ˜¯æš‚æ—¶ä¿®æ”¹å½“å‰bashçš„ç¯å¢ƒå˜é‡ï¼Œè¦æƒ³å®Œå…¨ç”Ÿæ•ˆï¼Œéœ€è¦ä¿®æ”¹bashçš„é…ç½®æ–‡ä»¶\næ³¨æ„ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦cpè¿›è¡Œå¤‡ä»½ï¼Œé¿å…ä¿®æ”¹boomï¼\n\nç”¨æˆ·ç›®å½•ä¸‹çš„.bashrc\n\nåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å‘½ä»¤\nMANPATH=/usr/share/man\n\nç„¶åå†sourceä½¿å…¶ç”Ÿæ•ˆ\nsource .bashrc\n\næ­¤æ—¶ï¼Œå½“å‰ç”¨æˆ·çš„bashå°±èƒ½æ­£å¸¸ä½¿ç”¨manäº†ï¼Œä½†æ˜¯å…¶ä»–ç”¨æˆ·è¿˜æ˜¯ä¸è¡Œã€‚è¿™å°±éœ€è¦æˆ‘ä»¬ä¿®æ”¹ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶\n\nç³»ç»Ÿé…ç½®æ–‡ä»¶/etc/bashrc\n\næ³¨æ„ï¼Œç³»ç»Ÿçš„é…ç½®æ–‡ä»¶éœ€è¦è¾“å…¥çš„æ˜¯å‘½ä»¤ã€‚åœ¨æ–°å»ºbashçš„æ—¶å€™ä¼šæ‰§è¡Œã€‚å¦‚ä¸‹\nexport MANPATH=/usr/share/man\n\nåŒæ ·çš„ï¼Œsourceä½¿å…¶ç”Ÿæ•ˆ\nsource /etc/bashrc\n\nç°åœ¨å°±OKäº†ï¼æ­¤æ—¶å…¶ä»–ç”¨æˆ·ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨manäº†\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘æ¥å†™ä¸€ä¸ªtcpçš„æœåŠ¡ç«¯+å®¢æˆ·ç«¯","url":"/2023/02/05/note_Linux/29tcp%E4%BB%A3%E7%A0%81/","content":"ä»Šå¤©è®©æˆ‘ä»¬æ¥å†™ä¸€ä¸ªtcpçš„æœåŠ¡å™¨&#x2F;å®¢æˆ·ç«¯ä»£ç \n\n\n\nå®Œæ•´ä»£ç è§æˆ‘çš„gitee è¿æ¥\né˜…è¯»æœ¬æ–‡å‰ï¼Œå»ºè®®å…ˆé˜…è¯»ğŸ‘‰ udpæœåŠ¡å™¨\n\n1.åŸºæœ¬æ¡†æ¶tcpçš„æœåŠ¡å™¨å’ŒudpæœåŠ¡å™¨åˆå§‹åŒ–æ¥å£æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼ŒåŒºåˆ«å°±åœ¨äºè¦é€‰æ‹©å­—èŠ‚æµè¿›è¡Œåˆå§‹åŒ–\nä½†æ˜¯åˆ°è¿è¡ŒçŠ¶æ€å°±ä¸åŒäº†\n\ntcpæ˜¯éœ€è¦è¿æ¥çš„\nudpä¸éœ€è¦è¿æ¥\n\næ‰€ä»¥å°±ä¼šå‡ºç°åˆ†æ­§ï¼šudpå¯ä»¥ç”¨sendtoå’Œreceveæ¥å‘é€&#x2F;æ¥æ”¶ä¿¡æ¯ï¼ŒæœåŠ¡ç«¯åªéœ€è¦ç›‘å¬ç‰¹å®šç«¯å£æ”¶åˆ°äº†ä»€ä¹ˆä¿¡æ¯ï¼›\nä½†tcpå¹¶ä¸èƒ½è¿™ä¹ˆåšï¼Œåœ¨é€šä¿¡ä¹‹å‰ï¼ŒtcpæœåŠ¡å™¨å¿…é¡»è¦å’Œå®¢æˆ·ç«¯å»ºç«‹é“¾æ¥ã€‚\nä¸¾ä¸ªä¸æ°å½“çš„ä¾‹å­ï¼ŒudpæœåŠ¡å™¨å¥½æ¯”ä¸€ä¸ªæ°´ç›†ï¼Œç­‰å¾…æ°´çš„æ³¨å…¥ï¼›è€ŒtcpæœåŠ¡å™¨æ˜¯ä¸ªæ°´ç®¡ï¼Œå¿…é¡»è¦ä¸¤å¤´è¿é€šäº†ï¼Œæ‰èƒ½å¼€å§‹æ³¨æ°´\n1.1 ç±»æˆå‘˜ç±»çš„æˆå‘˜å˜é‡å’Œudpå¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯éœ€è¦æœåŠ¡å™¨çš„ipã€ç«¯å£ã€sockfdè¿™äº›ä¿¡æ¯ã€‚ä¸ºäº†æ›´å®¹æ˜“åŒºåˆ†ï¼Œå°†tcpæœåŠ¡å™¨çš„socket fdæ”¹ä¸º_listenSockï¼Œæ„ä¸ºç›‘å¬ç«¯å£\nclass TcpServer&#123;private:    // æœåŠ¡å™¨ç«¯å£å·    uint16_t _port;    // æœåŠ¡å™¨ipåœ°å€    string _ip;    // æœåŠ¡å™¨socket fdä¿¡æ¯    int _listenSock;&#125;;\n\n1.2 å¤´æ–‡ä»¶è¿™é‡Œå¯¹å¤´æ–‡ä»¶è¿›è¡Œä¸€å®šçš„è¯´æ˜ï¼Œå› ä¸ºæœåŠ¡å™¨ä»£ç ä¸­çš„å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šäº†\nå½“ä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ¥å£çš„æ—¶å€™ï¼Œå¯ä»¥å»é‡‡ç”¨manæ‰‹å†Œæ¥è·å–è¯¥æ¥å£çš„å¤´æ–‡ä»¶ä¿¡æ¯\n#pragma once// å¤´æ–‡ä»¶å¤ªå¤šäº†ï¼Œæ‰€ä»¥æ–°èµ·ä¸€ä¸ªæ–‡ä»¶#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstring&gt;#include &lt;cstdlib&gt;#include &lt;cassert&gt;#include &lt;ctype.h&gt;//åˆ¤æ–­å­—ç¬¦ä¸²å¤§å†™å°å†™æ¥å£éœ€è¦çš„åº“#include &lt;unistd.h&gt; #include &lt;strings.h&gt;// å¿½ç•¥å¤§å°å†™æ¯”è¾ƒstrcasecmp#include &lt;sys/types.h&gt;  //å¾ˆå¤šliunxç³»ç»Ÿæ¥å£éƒ½éœ€è¦è¿™ä¸ª#include &lt;sys/socket.h&gt; // ç½‘ç»œ#include &lt;netinet/in.h&gt; // ç½‘ç»œ#include &lt;arpa/inet.h&gt; // ç½‘ç»œusing namespace std;#define SOCKET_ERR 1#define BIND_ERR   2#define LISTEN_ERR 3#define USAGE_ERR  4#define CONN_ERR   5#define BUFFER_SIZE 1024\n\n2.åˆå§‹åŒ–æ¥å£çš„ä»‹ç»å°±è·Ÿéšå®ç°ä¸€æ­¥ä¸€æ­¥æ¥å§\n2.1 æ„é€ sockè¿™é‡Œå‡ºç°äº†tcpå’Œudpç¬¬ä¸€ä¸ªä¸åŒä¹‹å¤„ï¼Œtcpæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œudpé¢å‘çš„æ˜¯æ•°æ®æŠ¥\nTcpServer(uint16_t port,const string&amp; ip=&quot;&quot;) :_port(port), _ip(ip), _listenSock(-1)&#123;    // 1.åˆ›å»ºsocketå¥—æ¥å­—,é‡‡ç”¨å­—èŠ‚æµï¼ˆå³tcpï¼‰    _listenSock = socket(AF_INET, SOCK_STREAM, 0); //æœ¬è´¨æ˜¯æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶    if (_listenSock &lt; 0)    &#123;        logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), _listenSock);        exit(1);    &#125;    logging(DEBUG, &quot;socket create success: %d&quot;, _listenSock);&#125;\n\n2.2 åˆå§‹åŒ–sockaddr_inç»§ç»­ï¼Œåˆå§‹åŒ–sockaddr_inçš„æ“ä½œå’Œudpæ˜¯å®Œå…¨ä¸€è‡´çš„\n// 2. ç»‘å®šç½‘ç»œä¿¡æ¯ï¼ŒæŒ‡æ˜ip+port// 2.1 å…ˆå¡«å……åŸºæœ¬ä¿¡æ¯åˆ° struct sockaddr_instruct sockaddr_in local;memset(&amp;local,0,sizeof(local));//åˆå§‹åŒ–// åè®®å®¶æ—ï¼Œè®¾ç½®ä¸ºipv4local.sin_family = AF_INET; // ç«¯å£ï¼Œéœ€è¦è¿›è¡Œ æœ¬åœ°-&gt;ç½‘ç»œè½¬æ¢local.sin_port = htons(_port);// é…ç½®ip// å¦‚æœåˆå§‹åŒ–æ—¶å€™çš„ipä¸ºç©ºï¼Œåˆ™è°ƒç”¨INADDR_ANYä»£è¡¨ä»»æ„ipã€‚å¦åˆ™å¯¹ä¼ å…¥çš„ipè¿›è¡Œè½¬æ¢åèµ‹å€¼local.sin_addr.s_addr = _ip.empty() ? htonl(INADDR_ANY) : inet_addr(_ip.c_str());\n\n2.3 bindä¹Ÿæ˜¯ä¸€æ ·ï¼Œç»‘å®šæœåŠ¡å™¨çš„ipå’Œç«¯å£\n// 2.2 ç»‘å®šipç«¯å£if (bind(_listenSock,(const struct sockaddr *)&amp;local, sizeof(local)) == -1)&#123;    logging(FATAL, &quot;bind: %s:%d&quot;, strerror(errno), _listenSock);    exit(2);&#125;logging(DEBUG,&quot;socket bind success: %d&quot;, _listenSock);\n\n2.4 ç›‘å¬listenå¯¹äºtcpæœåŠ¡å™¨æ¥è¯´ï¼Œæˆå‘˜å˜é‡çš„_listenSockæ˜¯ç”¨æ¥ç›‘å¬çš„ï¼Œå³æ‰¾ä¸ªè€å“¥ä¸€ç›´ç›¯ç€äº‘æœåŠ¡å™¨çš„è¿™ä¸ªç«¯å£ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰éœ€è¦è¿æ¥å®ƒçš„å®¢æˆ·ç«¯\n#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int listen(int sockfd, int backlog);\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬çš„_listenSockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºé™åˆ¶åœ¨é˜»å¡ç­‰å¾…è¿æ¥çš„æ•°é‡\nThe backlog argument defines the maximum length to which the queue of pending connections for sockfd may grow.   If  a connection  request arrives when the queue is full, the client may receive an error with an indication of ECONNREFUSED or, if the underlying protocol supports retransmission, the request may be ignored so that a later reattempt  at  conâ€nection succeeds.\n\nç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œbacklogå‚æ•°é™åˆ¶äº†èƒ½è¢«é˜»å¡ç­‰å¾…è¿æ¥çš„æ•°é‡ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªæ•°é‡ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªECONNREFUSEDé”™è¯¯ã€‚äº¦æˆ–è€…å¦‚æœåè®®æ”¯æŒé‡ä¼ ï¼Œå¤šä½™çš„è¯·æ±‚ä¼šè¢«å¿½ç•¥ï¼Œåç»­å¯ä»¥é‡ä¼ \nmanæ‰‹å†Œä¸‹é¢çš„notesè¿˜æœ‰æ›´å¤šè§£é‡Š\nThe behavior of the backlog argument on TCP sockets changed with Linux 2.2.  Now it specifies  the  queue  length  for completely  established  sockets waiting to be accepted, instead of the number of incomplete connection requests.  The maximum length of the queue for incomplete sockets can be set using /proc/sys/net/ipv4/tcp_max_syn_backlog.  When synâ€cookies are enabled there is no logical maximum length and this setting is ignored.  See tcp(7) for more information. If  the  backlog  argument is greater than the value in /proc/sys/net/core/somaxconn, then it is silently truncated to that value; the default value in this file is 128.  In kernels before 2.4.25, this  limit  was  a  hard  coded  value,SOMAXCONN, with the value 128.\n\nå¦‚æœbacklogå‚æ•°é«˜äº/proc/sys/net/core/somaxconnä¸­çš„é»˜è®¤å€¼128ï¼Œåˆ™ä¼šè¢«æˆªæ–­ä¸º128\n\nåœ¨æˆ‘ä»¬è¿™é‡Œï¼Œå°†å…¶è®¾ç½®ä¸º5å³å¯ï¼Œåæ­£ä¹Ÿæ˜¯åšæµ‹è¯•å˜›ï¼Œé—®é¢˜ä¸å¤§\n// 3.ç›‘å¬// tcpæœåŠ¡å™¨æ˜¯éœ€è¦è¿æ¥çš„ï¼Œè¿æ¥ä¹‹å‰è¦å…ˆç›‘å¬æœ‰æ²¡æœ‰äººæ¥è¿if (listen(_listenSock, 5) &lt; 0)&#123;    logging(FATAL, &quot;listen: %s&quot;, strerror(errno));    exit(LISTEN_ERR);&#125;logging(DEBUG, &quot;listen: %s, %d&quot;, strerror(errno), _listenSock);\n\n3.è¿è¡Œåˆå§‹åŒ–åˆ°è¿™å°±å®Œæ¯•äº†ï¼Œä¸‹é¢å°±æ˜¯å¼€è·‘äº†\n3.1 accept#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);\n\nè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±ç›¸å½“äºtcpä¸­çš„recevefromï¼Œä¼ å‚æ˜¯å®Œå…¨ç›¸åŒçš„ï¼›ä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå…¨æ–°çš„sockfd\n\ntcpéœ€è¦å’Œå®¢æˆ·ç«¯å»ºç«‹é“¾æ¥\né“¾æ¥éœ€è¦ç”¨socket fd æ¥ç®¡ç†\næ‰€ä»¥acceptå¿…é¡»è¿”å›æ–°çš„socket fdï¼Œè®©æœåŠ¡ç«¯æœ‰åŠæ³•ç®¡ç†æ–°çš„é“¾æ¥å’Œå·²æœ‰é“¾æ¥\nåŸæœ‰çš„socket fdä¸å—å½±å“\nå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥ï¼Œè¿›ç¨‹ä¼šåœ¨acceptå†…é˜»å¡ç­‰å¾…\n\nä¸‹ä¸ºmanæ‰‹å†Œä¸­çš„æè¿°\nThe  accept()  system  call  is  used  with connection-based socket types (SOCK_STREAM, SOCK_SEQPACKET).  It extracts the first connection request on the queue of pending connections for the listening socket, sockfd, creates a new connected  socket,  and  returns  a  new  file descriptor referring to that socket.  The newly created socket is not in the listening state.  The original socket sockfd is unaffected by this call.\n\nä¸¾ä¸ªä¾‹å­ï¼ŒtcpæœåŠ¡å™¨è‡ªèº«çš„socket fdåªä¼šç”¨æ¥ç›‘å¬ç«¯å£ä¸Šæœ‰æ²¡æœ‰æ¶ˆæ¯ï¼Œå½“ç›‘å¬åˆ°æœ‰æ¶ˆæ¯å¹¶é€šè¿‡acceptå»ºç«‹è¿æ¥åï¼Œå°±ä¼šè®©å¦å¤–ä¸€ä½æœåŠ¡å‘˜æ¥å¯¹è¿™ä¸ªè¿æ¥æä¾›æœåŠ¡ã€‚\nwhile(1)&#123;    struct sockaddr_in peer;    socklen_t len = sizeof(peer);    // è·å–è¿æ¥    int conet = accept(_listenSock,(struct sockaddr*)&amp;peer,&amp;len);    if(conet&lt;0)    &#123;        logging(FATAL, &quot;accept: %s&quot;, strerror(errno));        exit(CONN_ERR);//è¿æ¥é”™è¯¯    &#125;    //ã€‚ã€‚ã€‚&#125;\n\næ³¨æ„è¿™é‡Œlençš„å‚æ•°æ˜¯socklen_tï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´å½¢\ntypedef __socklen_t socklen_t;__STD_TYPE __U32_TYPE __socklen_t;#define __U32_TYPE\t\tunsigned int\n\n3.2 è·å–è¿æ¥ä¿¡æ¯è¿™éƒ¨åˆ†å’Œudpæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œé€šè¿‡acceptè¿”å›çš„socket fdï¼Œè·å–ç”¨æˆ·çš„ipå’Œç«¯å£è€¨\n// è·å–è¿æ¥ä¿¡æ¯string senderIP = inet_ntoa(peer.sin_addr);// æ¥æºipuint16_t senderPort = ntohs(peer.sin_port); // æ¥æºç«¯å£logging(DEBUG, &quot;accept: %s | %s[%d], socket fd: %d&quot;, strerror(errno), senderIP.c_str(), senderPort, conet);\n\nå…¶å®åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡ŒæœåŠ¡å™¨è¿›è¡Œæµ‹è¯•äº†ã€‚å› ä¸ºtcpçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†™å®¢æˆ·ç«¯ï¼Œç›´æ¥ç”¨æµè§ˆå™¨å°±èƒ½è¿ä¸ŠæœåŠ¡ç«¯\nint main(int argc,char* argv[])&#123;    //å‚æ•°åªæœ‰ä¸¤ä¸ªï¼ˆç«¯å£/ipï¼‰æ‰€ä»¥å‚æ•°ä¸ªæ•°åº”è¯¥æ˜¯2-3    if(argc!=2 &amp;&amp; argc!=3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; port [ip]&quot; &lt;&lt; endl;        return 1;    &#125;        string ip;    // 3ä¸ªå‚æ•°ï¼Œæœ‰ip    if(argc==3)    &#123;        ip = argv[2];    &#125;    TcpServer t(atoi(argv[1]),ip);    t.start();    return 0;&#125;\n\nå…ˆç¼–è¯‘åæ‰§è¡Œä»£ç ï¼Œè®©tcpæœåŠ¡å™¨è¿è¡Œèµ·æ¥\n\néšååœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥å…¬ç½‘ip:ç«¯å£ï¼ˆå…ˆè¦å¼€å¯é˜²ç«å¢™å†…çš„ç«¯å£ï¼‰\n\næ­¤æ—¶ä¼šå‘ç°ä»€ä¹ˆéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å†™å‰ç«¯ï¼Œä¹Ÿæ²¡æœ‰æä¾›ä»»ä½•æœåŠ¡ã€‚ä½†æ˜¯æ¥åˆ°åå°ï¼Œå¯ä»¥çœ‹åˆ°å‡ºç°äº†ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œå¹¶æ˜¾ç¤ºå‡ºäº†ip+ç«¯å£\n\n3.3 æä¾›æœåŠ¡ï¼ˆçº¿ç¨‹ï¼‰æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯å†™ä¸€ä¸ªç®€å•çš„æœåŠ¡äº†ï¼Œè¿™é‡Œæˆ‘å†™çš„æ˜¯å­—ç¬¦ä¸²è½¬ASCIIç ï¼Œä¼šå°†å‘å‡ºå»çš„å­—ç¬¦ä¸²çš„asciiç åŠ åŠ èµ·æ¥åè¿”å›\n3.3.1 é—®é¢˜1 å¦‚ä½•é€šä¿¡æ­¤æ—¶é—®é¢˜å°±æ¥äº†ï¼ŒtcpæœåŠ¡å™¨ä¸èƒ½ä½¿ç”¨recevefromå’Œsendtoï¼Œé‚£ä¹ˆè·å–åˆ°socketä¹‹åè¦æ€ä¹ˆè¿›è¡Œé€šä¿¡å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ï¼šç”¨linuxçš„æ–‡ä»¶è¯»å†™æ¥å£ï¼Œreadå’Œwriteã€‚åˆ«å¿˜äº†ï¼Œsocket fdæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªlinuxä¸‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼\n3.3.2 é—®é¢˜2 å¤šå®¢æˆ·ç«¯tcpæœåŠ¡å™¨è¦æƒ³ç»™å¤šä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œå°±å¿…é¡»é‡‡ç”¨å¤šçº¿ç¨‹&#x2F;å¤šè¿›ç¨‹çš„æ–¹å¼æ¥å®ç°æ“ä½œã€‚å¦åˆ™ä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼ŒæœåŠ¡ç«¯å› ä¸ºæä¾›æœåŠ¡è€Œæ²¡æœ‰acceptï¼Œæ— æ³•é“¾æ¥ä¸Šä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯\nwhile(1)&#123;    //accept è·å–åˆ°é“¾æ¥ä¸Šçš„å®¢æˆ·ç«¯        while(1)    &#123;         //å¦‚æœåœ¨è¿™é‡Œæä¾›æœåŠ¡ï¼Œåˆ™ä¼šå…¶ä»–è¿æ¥ä¼šåœ¨listené‡Œé¢é˜»å¡    \t//åªæœ‰å½“å‰æœåŠ¡ç»ˆæ­¢äº†ï¼Œå…¶ä»–å®¢æˆ·ç«¯çš„å…¶ä¸­ä¹‹ä¸€æ‰èƒ½è¿ä¸ŠæœåŠ¡å™¨    &#125;&#125;\n\n3.3.3 é—®é¢˜3 çº¿ç¨‹ä¼ å‚æ—¢ç„¶éœ€è¦é‡‡ç”¨å¤šçº¿ç¨‹æœåŠ¡ï¼Œé‚£å°±éœ€è¦è®¾å®šå¥½ç»™çº¿ç¨‹ä¼ çš„å‚æ•°ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥acceptçš„è¿”å›å€¼socket fdå³å¯è¿›è¡Œread/write\nä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰“å°debugæ¶ˆæ¯ï¼Œè¦çŸ¥é“å½“å‰æ˜¯è°å‘ä½ å‘é€äº†è¿™æ¡æ¶ˆæ¯ï¼Œipå’Œç«¯å£æ˜¯ä»€ä¹ˆã€‚\nä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œè¿™é‡Œå°è£…ä¸€ä¸ªç»“æ„ä½“ï¼Œå°†socket fdï¼Œå®¢æˆ·ç«¯çš„ip+ç«¯å£å°è£…æˆä¸€ä¸ªå‚æ•°è¿›è¡Œä¼ å‚ï¼ˆçº¿ç¨‹çš„å‡½æ•°åªèƒ½ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼‰\nstruct ClientData&#123;    int _fd;    uint16_t _port;    string _ip;    TcpServer* _this;    ClientData(int fd,uint16_t port,const string&amp; ip,TcpServer* this1)        :_fd(fd),_port(port), _ip(ip),_this(this1)    &#123;&#125;&#125;;\n\nä½ å¯èƒ½ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªåŠæ³•ï¼Œé‚£å°±æ˜¯åœ¨tcpæœåŠ¡å™¨çš„classä¸­æ–°å¢ä¸€ä¸ªmapæˆå‘˜å˜é‡ï¼Œç”¨äºæ˜ å°„socket fdå’Œå®¢æˆ·ç«¯ä¿¡æ¯çš„é”®å€¼å¯¹ï¼Œä½†æ˜¯è¿™æ— æ³•å®ç°ã€‚\nå› ä¸ºåœ¨ç±»ä¸­è®¾è®¡çš„å¤šçº¿ç¨‹å‡½æ•°ï¼Œä¸ºäº†å»æ‰é»˜è®¤ä¼ å…¥çš„thisæŒ‡é’ˆï¼Œå¿…é¡»è¦è®¾ç½®æˆstaticé™æ€çš„ï¼Œæ­¤æ—¶è¯¥é™æ€å‡½æ•°æ— æ³•è®¿é—®ç±»å†…æˆå‘˜ï¼\n// å› ä¸ºéœ€è¦å–æ¶ˆthisæŒ‡é’ˆï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®æˆé™æ€çš„static void* threadRoutine(void*args)&#123;       pthread_detach(pthread_self()); //è®¾ç½®çº¿ç¨‹åˆ†ç¦»    ClientData* data=(ClientData*)args;    // é€šè¿‡é¢„å…ˆè®¾ç½®çš„thisæŒ‡é’ˆæ¥è®¿é—®ç±»å†…æˆå‘˜ï¼Œå¹¶è¿›è¡Œä¼ å‚    data-&gt;_this-&gt;transService(data-&gt;_fd,data-&gt;_ip,data-&gt;_port);    delete data;    return nullptr;&#125;\n\n3.3.4 æœåŠ¡ä»£ç è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼Œå°±å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹çœ‹æœåŠ¡ç«¯çš„ä»£ç äº†\n// æä¾›æœåŠ¡pthread_t service;// å› ä¸ºè¿™ä¸ªæˆå‘˜ä½¿ç”¨èŒƒå›´æå°ï¼Œæ‰€ä»¥é‡‡ç”¨new/deleteï¼Œé¿å…å ç”¨å¤ªå¤šç©ºé—´ClientData* data = new ClientData(conet,senderPort,senderIP,this);pthread_create(&amp;service,nullptr,threadRoutine,(void*)data);\n\nåœ¨acceptä¹‹åï¼Œé€šè¿‡çº¿ç¨‹æ“ä½œç”¨çº¿ç¨‹æ¥æä¾›æœåŠ¡\nstatic void* threadRoutine(void*args)&#123;       pthread_detach(pthread_self()); //è®¾ç½®çº¿ç¨‹åˆ†ç¦»    ClientData* data=(ClientData*)args;    // é€šè¿‡é¢„å…ˆè®¾ç½®çš„thisæŒ‡é’ˆæ¥è®¿é—®ç±»å†…æˆå‘˜ï¼Œå¹¶è¿›è¡Œä¼ å‚    data-&gt;_this-&gt;transService(data-&gt;_fd,data-&gt;_ip,data-&gt;_port);    delete data;    return nullptr;&#125;\n\nthreadRoutineçš„ä½œç”¨å°±æ˜¯æŠŠçº¿ç¨‹çš„å•å‚æ•°è½¬ä¸ºå¤šå‚æ•°ï¼Œä¼ ç»™çœŸæ­£ç”¨æ¥æœåŠ¡çš„å‡½æ•°ã€‚å‡½æ•°çš„æ“ä½œå¾ˆç®€å•ï¼Œå°±æ˜¯Linuxä¸‹æ–‡ä»¶æ“ä½œçš„è¯»å†™ã€‚\nè¯»å†™æˆåŠŸåï¼Œå°†å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯è½¬æˆASCIIç çš„å’Œå‘å›ç»™å®¢æˆ·ç«¯\nvoid transService(int sockfd, const string &amp;clientIp, uint16_t clientPort)&#123;    assert(sockfd &gt;= 0);    assert(!clientIp.empty());    assert(clientPort&gt;0);    // å¼€å§‹æœåŠ¡    char buf[BUFFER_SIZE];    while(1)    &#123;        // è¯»å–å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯,sæ˜¯è¯»å–åˆ°çš„å­—èŠ‚æ•°        ssize_t s = read(sockfd, buf, sizeof(buf)-1);        if(s&gt;0)        &#123;            buf[s]=&#x27;\\0&#x27;;//æ‰‹åŠ¨æ·»åŠ å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦            if(strcasecmp(buf,&quot;quit&quot;)==0)            &#123;//å®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º                break;            &#125;            // æœåŠ¡            string tmp = buf;            int ret = str2ascii(tmp);//è·å–å­—ç¬¦ä¸²çš„asciiæ€»å’Œ            cout &lt;&lt; ret &lt;&lt; endl;            string retS =  to_string(ret);//è½¬å­—ç¬¦ä¸²            cout &lt;&lt; retS &lt;&lt; endl;            write(sockfd,retS.c_str(),retS.size());//å†™å…¥        &#125;        else if (s == 0)        &#123;//s == 0ä»£è¡¨å¯¹æ–¹å…³é—­,å®¢æˆ·ç«¯é€€å‡º            logging(DEBUG, &quot;client quit: %s[%d]&quot;, clientIp.c_str(), clientPort);            break;        &#125;        else        &#123;            logging(DEBUG, &quot;read err: %s[%d] -  %s&quot;, clientIp.c_str(), clientPort, strerror(errno));            continue;        &#125;    &#125;    close(sockfd);    logging(DEBUG,&quot;server quit %d&quot;,sockfd);&#125;private:    // æœåŠ¡å‡½æ•°å¯ä»¥ä¸æš´éœ²    int str2ascii(const string&amp; str)    &#123;        int ret = 0;        for(auto e:str)        &#123;            ret += e;        &#125;        return ret;    &#125;\n\n3.4 æä¾›æœåŠ¡ï¼ˆå­è¿›ç¨‹ï¼‰ä¸Šé¢çš„ä»£ç é‡‡ç”¨çš„æ˜¯çº¿ç¨‹æ¥æä¾›æœåŠ¡ï¼Œé™¤äº†çº¿ç¨‹ï¼Œæˆ‘ä»¬è¿˜æœ‰çˆ¶å­è¿›ç¨‹çš„æ–¹å¼ï¼Œä¹Ÿèƒ½é¿å…é˜»å¡\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçˆ¶å­è¿›ç¨‹éƒ½éœ€è¦å…³é—­æ‰å¯¹æ–¹ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œé¿å…å‡ºç°æ–‡ä»¶æè¿°ç¬¦åœ¨æœåŠ¡ç»“æŸåè¿˜æ²¡æœ‰å…³é—­çš„æƒ…å†µ\npid_t id = fork();if(id == 0)&#123;    close(_listenSock);//å› ä¸ºå­è¿›ç¨‹ä¸éœ€è¦ç›‘å¬ï¼Œæ‰€ä»¥å…³é—­æ‰ç›‘å¬socket    //å­è¿›ç¨‹    transService(conet, senderIP, senderPort);    exit(0);// æœåŠ¡ç»“æŸåï¼Œé€€å‡ºï¼Œå­è¿›ç¨‹ä¼šè¿›å…¥åƒµå°¸çŠ¶æ€ç­‰å¾…çˆ¶è¿›ç¨‹å›æ”¶&#125;// çˆ¶è¿›ç¨‹close(conet); // å› ä¸ºæ­¤æ—¶æ˜¯å­è¿›ç¨‹æä¾›æœåŠ¡ï¼Œconetä¼šæœ‰æ‹·è´ï¼Œç›¸å½“äºæœ‰ä¸¤ä¸ªè¿›ç¨‹æ‰“å¼€äº†è¯¥æ–‡ä»¶// å¦‚æœçˆ¶è¿›ç¨‹ä¸å…³é—­ï¼Œå³ä¾¿å­è¿›ç¨‹ç»“æŸæœåŠ¡äº†ï¼Œè¯¥æ–‡ä»¶æè¿°ç¬¦ä¹Ÿä¼šä¿æŒå¼€å¯pid_t ret = waitpid(id, nullptr, 0);\n\nç›´æ¥è¿™æ ·å†™æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯çˆ¶è¿›ç¨‹æ²¡æœ‰åŠæ³•æ­£å¸¸é‡Šæ”¾å­è¿›ç¨‹çš„èµ„æº\n\nå¦‚æœè¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œé‚£å°±è¿èƒŒäº†åˆè¡·ï¼Œå®Œå…¨æ²¡æœ‰æ„ä¹‰\nå¦‚æœè¿›è¡Œéé˜»å¡ç­‰å¾…ï¼Œåœ¨waitpidç»“æŸä¹‹åï¼Œçˆ¶è¿›ç¨‹ç›´æ¥å»å¹²å…¶ä»–äº‹äº†ï¼Œå®Œå…¨å¿˜è®°äº†è¿™é‡Œçš„è¿™ä¸ªå­è¿›ç¨‹\n\næ‰€ä»¥æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨å­è¿›ç¨‹é€€å‡ºï¼Œå‘çˆ¶è¿›ç¨‹å‘é€ä¿¡å·çš„æ—¶å€™å›æ”¶å­è¿›ç¨‹\n3.4.1 ä¿¡å·å›æ”¶signal(SIGCHLD, FreeChild);//è‡ªå®šä¹‰æ•æ‰\n\n// å›æ”¶å­è¿›ç¨‹void FreeChild(int signo)&#123;    assert(signo == SIGCHLD);    while (true)    &#123;        //å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†ï¼Œwaitpidå°±ä¼šè°ƒç”¨å¤±è´¥        pid_t id = waitpid(-1, nullptr, WNOHANG); // éé˜»å¡ç­‰å¾…        if (id &gt; 0)        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æˆåŠŸ, child pid: &quot; &lt;&lt; id &lt;&lt; endl;        &#125;        else if(id == 0)        &#123;            //è¿˜æœ‰å­è¿›ç¨‹æ²¡æœ‰é€€å‡º            cout &lt;&lt; &quot;å°šæœ‰æœªé€€å‡ºçš„å­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œ&quot; &lt;&lt; endl;            break;//é€€å‡ºç­‰å¾…å­è¿›ç¨‹        &#125;        else        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ&quot; &lt;&lt; endl;            break;        &#125;    &#125;&#125;\n\né™¤äº†è‡ªå®šä¹‰æ•æ‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®æˆignoreä¸æ­ç†å­è¿›ç¨‹ï¼Œè¿™æ ·å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å°±ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾\nsignal(SIGCHLD, SIG_IGN);\n\n3.4.2 çˆ·çˆ·è¿›ç¨‹è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªéªšæ“ä½œï¼Œé‚£å°±æ˜¯åœ¨åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œå†åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹\n// æä¾›æœåŠ¡ï¼ˆå­™å­è¿›ç¨‹ï¼‰-2pid_t id = fork();if(id == 0)&#123;    close(_listenSock);//å› ä¸ºå­è¿›ç¨‹ä¸éœ€è¦ç›‘å¬ï¼Œæ‰€ä»¥å…³é—­æ‰ç›‘å¬socket    //åˆåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¤§äº0ä»£è¡¨æ˜¯çˆ¶è¿›ç¨‹ï¼Œå³åˆ›å»ºå®Œå­è¿›ç¨‹åçˆ¶è¿›ç¨‹ç›´æ¥é€€å‡º    if(fork()&gt;0)&#123;        exit(0);    &#125;    // å­™å­è¿›ç¨‹æ‰§è¡Œ    transService(conet, senderIP, senderPort);    exit(0);// æœåŠ¡ç»“æŸåï¼Œé€€å‡ºï¼Œå­è¿›ç¨‹ä¼šè¿›å…¥åƒµå°¸çŠ¶æ€ç­‰å¾…çˆ¶è¿›ç¨‹å›æ”¶&#125;// çˆ·çˆ·è¿›ç¨‹close(conet); pid_t ret = waitpid(id, nullptr, 0); //æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ç”¨é˜»å¡å¼ç­‰å¾…äº†assert(ret &gt; 0);//retå¦‚æœä¸å¤§äº0ï¼Œåˆ™ä»£è¡¨ç­‰å¾…å‘ç”Ÿäº†é”™è¯¯\n\né‡‡ç”¨è¿™ç§åŠæ³•ä»¥åï¼Œç”±äºçˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œå­™å­è¿›ç¨‹ä¼šç›´æ¥è¢«æ“ä½œç³»ç»Ÿæ¥ç®¡ã€‚ä¸‹å›¾ä¸­èƒ½çœ‹åˆ°è¿™äº›è¿›ç¨‹çš„çˆ¶è¿›ç¨‹éƒ½æ˜¯1ï¼Œå³æ“ä½œç³»ç»Ÿã€‚è¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ‹…å¿ƒå­è¿›ç¨‹çš„é‡Šæ”¾é—®é¢˜äº†\n\n4.å®¢æˆ·ç«¯å®¢æˆ·ç«¯éƒ¨åˆ†çš„ä»£ç å’Œudpä¹Ÿå¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡å°†sendtoæ”¹æˆäº†write\nä¸‹æ–¹æä¾›äº†å®¢æˆ·ç«¯çš„ä»£ç ï¼Œéƒ½å†™äº†æ³¨é‡ŠğŸ˜\n#include &quot;utils.h&quot;// ./clientTcp serverIp serverPortint main(int argc, char *argv[])&#123;    if (argc != 3)//å®¢æˆ·ç«¯å¿…é¡»è¦æœ‰3ä¸ªå‚æ•°    &#123;        cerr &lt;&lt; &quot;Usage:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; serverIp serverPort&quot; &lt;&lt; endl;        cerr &lt;&lt; &quot;Example:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; 127.0.0.1 8080\\n&quot;                &lt;&lt; endl;        exit(USAGE_ERR);    &#125;    // è§£ææœåŠ¡ç«¯çš„ipå’Œç«¯å£    string serverIp = argv[1];    uint16_t serverPort = atoi(argv[2]);    // 1. åˆ›å»ºtcpçš„socket SOCK_STREAM    int sock = socket(AF_INET, SOCK_STREAM, 0);    if (sock &lt; 0)    &#123;        cerr &lt;&lt; &quot;socket: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(SOCKET_ERR);    &#125;    // 2. connectï¼Œå‘èµ·é“¾æ¥è¯·æ±‚ï¼Œä½ æƒ³è°å‘èµ·è¯·æ±‚å‘¢ï¼Ÿï¼Ÿå½“ç„¶æ˜¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚å–½    // 2.1 å…ˆå¡«å……éœ€è¦è¿æ¥çš„è¿œç«¯ä¸»æœºçš„åŸºæœ¬ä¿¡æ¯    struct sockaddr_in server;    memset(&amp;server, 0, sizeof(server));    server.sin_family = AF_INET;    server.sin_port = htons(serverPort);    inet_aton(serverIp.c_str(), &amp;server.sin_addr);    // 2.2 å‘èµ·è¯·æ±‚ï¼Œconnect ä¼šè‡ªåŠ¨bind    if (connect(sock, (const struct sockaddr *)&amp;server, sizeof(server)) != 0)    &#123;        cerr &lt;&lt; &quot;connect: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(CONN_ERR);    &#125;    cout &lt;&lt; &quot;connect success: &quot; &lt;&lt; sock &lt;&lt; endl;    // å®¢æˆ·ç«¯å‘ç°çš„æ¶ˆæ¯    string message;    while (1)    &#123;        message.clear();//æ¯æ¬¡å¾ªç¯å¼€å§‹ï¼Œéƒ½æ¸…ç©ºä¸€ä¸‹msg        cout &lt;&lt; &quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;;        getline(cin, message);//è·å–è¾“å…¥        // å¦‚æœå®¢æˆ·ç«¯è¾“å…¥äº†quitï¼Œåˆ™é€€å‡º        if (strcasecmp(message.c_str(), &quot;quit&quot;) == 0)            break;        // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯        ssize_t s = write(sock, message.c_str(), message.size());        if (s &gt; 0) // å†™å…¥æˆåŠŸ        &#123;            message.clear();//æ¸…ç©ºè¾“å…¥çš„æ¶ˆæ¯            message.resize(BUFFER_SIZE);            // å› ä¸ºstringçš„c_stræœ¬è´¨ä¸Šæ˜¯è¿”å›åœ°å€ï¼Œæ‰€ä»¥å¼ºè½¬åæ˜¯å¯ä»¥å¾€é‡Œé¢å†™å…¥çš„            s = read(sock, (char *)(message.c_str()), BUFFER_SIZE);// è·å–æœåŠ¡ç«¯çš„ç»“æœ            if (s &gt; 0)// è¯»å–æˆåŠŸ            &#123;                message[s] = &#x27;\\0&#x27;;//è¿½åŠ \\0            &#125;            // æ‰“å°è¿”å›å€¼            cout &lt;&lt; &quot;Server Echo# &quot; &lt;&lt; message &lt;&lt; endl;        &#125;        else if (s &lt;= 0) // å†™å…¥å¤±è´¥        &#123;            break;        &#125;    &#125;    // å…³é—­æ–‡ä»¶æè¿°ç¬¦    close(sock);    return 0;&#125;\n\n4.1 è¿è¡Œæµ‹è¯•å…ˆè¿è¡ŒæœåŠ¡ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è¾“å…¥åï¼ŒæœåŠ¡çŸ­ä¼šè¿”å›å­—ç¬¦ä¸²çš„asciiç æ€»å’Œ\n\nè€Œå®¢æˆ·ç«¯è¾“å…¥quitåï¼Œåœ¨æœåŠ¡ç«¯å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯é€€å‡ºï¼Œä½†æœåŠ¡ç«¯å¹¶æ²¡æœ‰æ¨å‡ºï¼Œæ­£åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿æ¥\n\n5.çº¿ç¨‹æ± åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼Œæ¯æ¬¡æä¾›æœåŠ¡éƒ½éœ€è¦å½“åœºæ–°å»ºä¸€ä¸ªçº¿ç¨‹ã€‚å¯¹äºtcpè¿™ç§è¦æ±‚é«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡å™¨è€Œè¨€ï¼Œå…¶å®æ˜¯ä¸å¤ªåˆé€‚çš„ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›è¶Šæ—©ç»™å®¢æˆ·å»ºç«‹è”ç³»è¶Šå¥½ï¼Œè€Œä¸æ˜¯é£Ÿå®¢éƒ½æ¥äº†è€æ¿æ‰å»ä¹°èœã€‚\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠæˆ‘ä»¬å†™çš„çº¿ç¨‹æ± å’ŒtcpæœåŠ¡å™¨ç»™è”ç³»èµ·æ¥ï¼\n\nçº¿ç¨‹æ± çš„ä»£ç è§æˆ‘çš„giteeï¼Œæ­¤å¤„åªè¯´æ˜taskç±»çš„ç¼–å†™\n\n5.1 taskå…ˆå‰ç¼–å†™çº¿ç¨‹æ± çš„æ—¶å€™ï¼Œå°†çº¿ç¨‹æ± è¦å¤„ç†çš„ä»»åŠ¡å†™æˆäº†ä¸€ä¸ªtaskç±»ï¼Œå¹¶è§„å®šæ‰€æœ‰taskç±»éƒ½éœ€è¦æä¾›ä¸€ä¸ª()æ“ä½œç¬¦é‡è½½ï¼Œå³ä»¿å‡½æ•°ã€‚è¿™æ ·çº¿ç¨‹æ± å°±å¯ä»¥ä¸€è§†åŒä»çš„å¤„ç†è¿™äº›å·¥ä½œï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ–°å¢çš„å·¥ä½œæ·»åŠ åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢\nclass Task&#123;    using callback_t = std::function&lt;void (int, std::string, uint16_t)&gt;;//ç›¸å½“äºtypedefpublic:    Task() = default;    // å°†éœ€è¦è°ƒç”¨çš„å‡½æ•°ä¼ å…¥ï¼Œç›¸å½“äºé€šç”¨    Task(int sockfd, const std::string &amp;clientIP, uint16_t clientPort,callback_t func)        : _sockfd(sockfd), _ip(clientIP), _port(clientPort),_func(func)    &#123;    &#125;    // ä»¿å‡½æ•°    void operator()()    &#123;        logging(DEBUG, &quot;TID[%p] = %s:%d START&quot;,\\            pthread_self(), _ip.c_str(), _port);        _func(_sockfd, _ip, _port);        logging(DEBUG, &quot;TID[%p] = %s:%d END  &quot;,\\            pthread_self(), _ip.c_str(), _port);    &#125;private:    int _sockfd;    std::string _ip;    uint16_t _port;    callback_t _func;&#125;;\n\nè¿™é‡Œï¼Œæˆ‘åˆå°†taské˜Ÿåˆ—ç»™å°è£…æˆäº†ä¸€ä¸ªå¯ä»¥æ¥æ”¶å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªè¦æˆ‘ä»¬ä»»åŠ¡çš„å‡½æ•°å‚æ•°ä¸º(SOCKET,IP,PROT)ï¼Œå°±èƒ½ä¼ å…¥ç»™è¿™ä¸ªtaskç±»ï¼Œè®©çº¿ç¨‹æ± æ¥è¿è¡Œ\n5.2 tcpServerçš„å¤„ç†å› ä¸ºéœ€è¦çº¿ç¨‹æ± ï¼Œæˆ‘ä»¬åœ¨tcpserverä¸­æ·»åŠ ä¸€ä¸ªçº¿ç¨‹æ± çš„æŒ‡é’ˆï¼Œé€šè¿‡çº¿ç¨‹æ± çš„ç±»åæ¥è·å–å•ä¾‹ï¼Œèµ‹å€¼ç»™æˆå‘˜å˜é‡ã€‚å¹¶è®©è·å–åˆ°çš„å•ä¾‹çº¿ç¨‹æ± å¼€å§‹è¿è¡Œ\n// 4.è·å–çº¿ç¨‹æ±  å•ä¾‹_tpool = ThreadPool&lt;Task&gt;::getInstance(4);_tpool-&gt;start();//å¼€å§‹è¿è¡Œ\n\nåœ¨startå‡½æ•°ä¸­ï¼Œåˆ™å°†ä¹‹å‰çš„ä»»åŠ¡å‡½æ•°å®ä¾‹åŒ–ä¸ºä¸€ä¸ªtaskï¼Œå¹¶å°†å…¶pushåˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­\n// æä¾›æœåŠ¡ï¼ˆé€šè¿‡çº¿ç¨‹æ± ï¼‰Task t(conet,senderIP,senderPort,transService);_tpool-&gt;push(t);\n\nè¿™æ ·ï¼Œå°±èƒ½é€šè¿‡çº¿ç¨‹æ± æ¥æä¾›æœåŠ¡äº†ï¼\n5.3 è¿è¡Œæµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„çº¿ç¨‹æ± æ­£ç¡®è¿è¡Œäº†ä»»åŠ¡ï¼Œç»™å®¢æˆ·ç«¯æä¾›äº†asciiè¿”å›å€¼\n\nä½¿ç”¨ps -aLå‘½ä»¤æŸ¥çœ‹è½»é‡çº§è¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰4ä¸ªçº¿ç¨‹åœ¨ä¸ºæˆ‘ä»¬æœåŠ¡\n PID   LWP TTY          TIME CMD7288  7288 pts/8    00:00:00 tcpServer7288  7289 pts/8    00:00:00 handler7288  7290 pts/8    00:00:00 handler7288  7291 pts/8    00:00:00 handler7288  7292 pts/8    00:00:00 handler7441  7441 pts/9    00:00:00 tcpClient7632  7632 pts/7    00:00:00 ps\n\næ­¤æ—¶ï¼Œå³ä¾¿æˆ‘ä»¬å¤šå¼€å‡ ä¸ªç»ˆç«¯ï¼ŒtcpæœåŠ¡å™¨ä¹Ÿèƒ½æ­£å¸¸æä¾›æœåŠ¡\n\nä½†æ˜¯ï¼å¦‚æœå‡ºç°äº†ä¸€ä¸ªå°´å°¬çš„æƒ…å†µï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹&lt;å½“å‰éœ€è¦è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n5.4 taskç­‰å¾…é—®é¢˜ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°†çº¿ç¨‹æ± å•ä¾‹ä¸­çš„çº¿ç¨‹ä¸ªæ•°åˆå§‹åŒ–ä¸º2ä¸ª\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬å‘ç°ç¬¬ä¸‰ä¸ªå®¢æˆ·ç«¯ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½†å®é™…ä¸Šå®ƒå·²ç»æˆåŠŸé“¾æ¥ä¸Šäº†æœåŠ¡å™¨ï¼Œtaskä¹Ÿè¢«æ’å…¥åˆ°äº†ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ï¼Œåªä¸è¿‡å½“å‰æ²¡æœ‰ç©ºé—²çš„çº¿ç¨‹æ¥è¿è¡Œå®ƒ\n\nå¦‚æœæˆ‘ä»¬æŠŠå·¦ä¾§å…¶ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯é€€å‡ºï¼Œæœ€å³ä¾§çš„å®¢æˆ·ç«¯å°±èƒ½æ­£å¸¸æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ç»“æœäº†\n\nè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦è®©çº¿ç¨‹æ± æœ‰èƒ½åŠ›åˆ¤æ–­æ˜¯å¦å‡ºç°äº†é˜»å¡é—®é¢˜ï¼Œå¹¶æ‰©å®¹çº¿ç¨‹æ¥è§£å†³é˜»å¡ã€‚\nå¯æ˜¯è¿™åˆå¼•å‡ºäº†å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœç©ºé—²äº†å¾ˆä¹…éƒ½æ²¡æœ‰ä»»åŠ¡è¿‡æ¥ï¼Œå¤šå‡ºæ¥çš„çº¿ç¨‹ä¸å°±æ˜¯åœ¨ç™½ç™½æ¶ˆè€—èµ„æºå—ï¼Ÿ\nå®é™…ä¸Šï¼Œçº¿ç¨‹æ± é€‚åˆå¤„ç†çš„ï¼Œåº”è¯¥æ˜¯çŸ­å°çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªwhile(1)å¾ªç¯ï¼›\n\nä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰å­¦ä¹ åˆ°å¦‚ä½•å°†å…¶ä¿®æ”¹ä¸ºæœåŠ¡äºçŸ­å°ä»»åŠ¡çš„çº¿ç¨‹æ± ï¼Œä»å¾…åç»­çš„ç²¾è¿›\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","çº¿ç¨‹","ç½‘ç»œ"]},{"title":"ã€Gitã€‘å¦‚ä½•åŒæ­¥Giteeå’ŒGithubçš„ä»“åº“ï¼ˆè¶…ç®€å•ï¼‰","url":"/2022/06/19/note_Linux/2%E5%A6%82%E4%BD%95%E5%90%8C%E6%AD%A5gitee%E5%92%8Cgithub%E4%BB%93%E5%BA%93%EF%BC%88%E8%B6%85%E7%AE%80%E5%8D%95%EF%BC%89/","content":"æœ¬ç¯‡åšå®¢çš„è®¾ç½®æ–¹æ³•åŒæ ·å¯ä»¥é€‚ç”¨äºgitlabç­‰å…¶ä»–å¹³å°\nä¸å¤šbbï¼Œç›´å…¥ä¸»é¢˜â²\n\n\nå®ç°ä¸¤ä¸ªä»“åº“çš„åŒæ­¥1.å‡†å¤‡ä¸¤ä¸ªä»“åº“åˆ†åˆ«åœ¨ä¸¤ä¸ªå¹³å°åˆ›å»ºä¸€ä¸ªç›¸åŒåå­—çš„ä»“åº“ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨aå¹³å°ä¸Šå¯¼å…¥bå¹³å°å·²æœ‰çš„ä»“åº“ï¼Œgithubå’Œgiteeç›®å‰éƒ½æ”¯æŒä»åˆ«çš„å¹³å°å¯¼å…¥ä»“åº“\nè¿™éƒ¨åˆ†æ“ä½œæƒ³å¿…å¤§å®¶éƒ½ä¼šï¼Œå°±ä¸æ¼”ç¤ºäº†\n2.å…‹éš†åˆ°æœ¬åœ°éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ è¦ä¿è¯å…¶ä¸­ä¸€ä¸ªæ˜¯ä¸»ä»“åº“ã€‚å¦‚æœæ˜¯å¤šäººåˆä½œä»“åº“çš„è¯ï¼Œæƒ³ä¸¤ä¸ªå¹³å°çš„è¿œç¨‹ä»“åº“åŒæ—¶å¤šäººåˆä½œå¹¶ä¿æŒåŒæ­¥æ˜¯ç›¸å¯¹å›°éš¾çš„ã€‚\n\nhttps://gitee.com/musnow/LetsOJ\n\n\nä»¥æˆ‘åˆ›ç«‹çš„è¿™ä¸ªå¤šäººOJæ‰“å¡ä»“åº“ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘æƒ³å¾—åˆ°çš„æ•ˆæœæ˜¯ï¼Œæˆ‘å’Œæœ‹å‹ä»¬åœ¨giteeä¸Šé¢è¿›è¡Œæ‰“å¡åä½œï¼Œç„¶åæˆ‘é€šè¿‡gitæ“ä½œå°†è¿™ä¸ªä»“åº“åŒæ­¥åˆ°githubä¸Šé¢ï¼Œä»…ä¾›å±•ç¤º\n\nå½“ç„¶å¦‚æœæœ‰å°ä¼™ä¼´æ„¿æ„ç”¨githubè¿›è¡Œforkå’Œpull requestæ“ä½œé‚£æˆ‘ä¹Ÿæ˜¯ä¸¾åŒæ‰‹åŒè„šèµåŒ+æ¬¢è¿çš„\n\néœ€è¦åšçš„æ˜¯ï¼Œæ—¢ç„¶giteeæ˜¯ä¸»æˆ˜åœºï¼Œé‚£å°±å¯¹giteeè¿›è¡Œå…‹éš†æ“ä½œ\ngit clone https://gitee.com/musnow/LetsOJ.git\n\n\n3.è®¾ç½®ç¬¬äºŒä¸ªä»“åº“çš„urlå…‹éš†å®Œæ¯•åï¼Œç›´æ¥è¿›å…¥è¯¥ä»“åº“çš„.gitæ–‡ä»¶å¤¹ï¼Œä¿®æ”¹configæ–‡ä»¶\n\nåœ¨åŸæœ¬giteeçš„urlåé¢ï¼Œæ·»åŠ githubçš„ä»“åº“url\n\næ‰§è¡Œgit remote -vï¼Œä½ å¯ä»¥çœ‹åˆ°githubé“¾æ¥çš„ä»“åº“ä¹Ÿæ˜¾ç¤ºäº†å‡ºæ¥ï¼Œåé¢å¸¦æœ‰pushåç¼€ï¼Œä»£è¡¨æˆ‘ä»¬åªèƒ½å¾€è¿™ä¸ªä»“åº“ä¸Šä¼ ï¼Œå¹¶ä¸èƒ½æ‰§è¡Œgit pullæ“ä½œ\n\nè¿™æ—¶å€™çš„è®¾ç½®å·²ç»å®Œæˆäº†ï¼Œä½ å¯ä»¥è¿›è¡Œä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶åçš„git pushæ“ä½œï¼Œä¸¤ä¸ªä»“åº“éƒ½å¯ä»¥åŒæ­¥ï¼è€Œä¸”ä¸Šä¼ çš„ç¼–å·éƒ½æ˜¯ç›¸åŒçš„ï¼\n\n\nè¿™æ—¶å€™çš„åŸºæœ¬è®¾ç½®å°±å·²ç»å®Œæ¯•äº†ï¼å¦‚æœä½ è¿˜æƒ³åšåˆ°èƒ½ä»githubä»“åº“ä¸­è¿›è¡Œpullæ“ä½œï¼Œé‚£å°±æ¥ç€å¾€ä¸‹çœ‹\n4.å…³äºpullæ“ä½œå‰é¢æåˆ°ï¼Œgithubä»“åº“çš„urlåé¢æœ‰ä¸€ä¸ªpushåç¼€ï¼Œä»£è¡¨æˆ‘ä»¬ä¸èƒ½ä»è¿™ä¸ªä»“åº“é‡Œé¢è·å–æ›´æ–°\nä½ å¦‚æœä¿®æ”¹äº†githubçš„ä»“åº“ï¼Œæ‰§è¡Œgit pullæ“ä½œï¼Œä¼šæ˜¾ç¤ºAlready up-to-date.å› ä¸ºç³»ç»Ÿæ£€ç´¢çš„æ˜¯giteeä»“åº“çš„ä¿®æ”¹ï¼Œå¹¶ä¸çŸ¥é“ä½ çš„githubä»“åº“æœ‰æ— ä¿®æ”¹\n\nè¿™æ—¶å€™å¯ä»¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥\ngit remote add github git@github.com:Aewait/Lets_OJ.git\n\nå†æ¬¡git remote -vï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿œç¨‹ä»“åº“ä¸­å¤šå‡ºæ¥äº†ä¸€ä¸ªgithubä¸ºåå­—çš„ä»“åº“ç±»å‹ï¼Œè€Œä¸”è¿™ä¸€æ¬¡çš„ä»“åº“æ˜¯å¯ä»¥fetchä¹Ÿå°±æ˜¯è·å–å†…å®¹çš„\n\nè¿™æ—¶å€™ä½ å¯ä»¥æ‰§è¡Œ\ngit pull github\n\nå³å¯è·å–githubä»“åº“çš„æœ€æ–°æ›´æ–°\nè¿™æ ·å°±å®ç°äº†giteeä»“åº“å’Œgithubä»“åº“çš„å¤šç«¯åŒæ­¥å•¦ï¼\n5.æ•ˆæœæ¼”ç¤ºç°åœ¨æˆ‘è®©æœ‹å‹åœ¨giteeçš„ä»“åº“ä¸­ä¸Šä¼ ä¸€ä¸ªå†…å®¹\n\næ‰§è¡Œgit pullï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿä»giteeçš„ä»“åº“ä¸­æ›´æ–°äº†å†…å®¹\n\nè¿™æ—¶å€™ä½ æ‰§è¡Œgit statusï¼Œç†è®ºä¸Šæ¥è¯´ä¼šå‡ºç°æ–°æ–‡ä»¶å¯¹å§ï¼Ÿå¹¶ä¸ä¼š\n\næ¯•ç«Ÿè¿™æ—¶å€™ç³»ç»Ÿæ£€æŸ¥çš„è¿˜æ˜¯giteeä¸»ä»“åº“ï¼Œå†…å®¹éƒ½æ˜¯å®Œå…¨åŒæ­¥çš„\næˆ‘ä»¬ä¹Ÿä¸éœ€è¦å†™git addå’Œgit commitï¼Œç›´æ¥æ‰§è¡Œgit pushå³å¯ï¼\n\nå†æ‰“å¼€githubç…ç…ï¼Œä½ ä¼šå‘ç°å·²ç»åŒæ­¥æˆåŠŸäº†ï¼\n\n\næé†’å¼ºçƒˆå»ºè®®ï¼šå¦‚æœæ˜¯å¤šäººåˆä½œä»“åº“ï¼Œè¯·ç¡®ä¿åœ¨æŸä¸€ä¸ªå¹³å°ä½œä¸ºä¸»æˆ˜åœºï¼Œå¦å¤–ä¸€ä¸ªå¹³å°ä»…ä½œå±•ç¤ºï¼ˆç•™æ¡£ï¼‰ä½¿ç”¨ï¼\nä¸è¿‡æˆ‘å‘ç°äº†ä¸€ä¸ªå¥½äº‹ï¼Œé‚£å°±æ˜¯å½“æˆ‘ä»giteeå¯¼å…¥è¿™ä¸ªä»“åº“åˆ°githubçš„æ—¶å€™ï¼Œgithubä¸ä»…ä¼šè‡ªåŠ¨åŒæ­¥å°ç»¿ç‚¹ï¼Œè¿˜ä¼šå°†è¿™ä¸ªä»“åº“çš„åä½œè€…åŒæ ·æ˜¾ç¤ºå‡ºæ¥ï¼ˆå‰ææ˜¯åä½œè€…åœ¨githubä¸Šé¢æœ‰åŒé‚®ç®±æ³¨å†Œçš„è´¦æˆ·ï¼‰\n\nä¸€äº›é—®é¢˜çš„è§£å†³1.å…³äºgithubå…‹éš†ç½‘ç»œè®¿é—®é—®é¢˜å…³äºå…‹éš†&#x2F;ä¸Šä¼ githubé—®é¢˜ï¼Œå¾ˆå¤šéƒ½æ˜¯å› ä¸ºä½¿ç”¨httpsé“¾æ¥å¯¼è‡´çš„\næˆ‘ä»¬éœ€è¦ä½¿ç”¨sshç§é’¥æ¥å®ç°githubä»“åº“çš„å…å¯†æ“ä½œ\nssh-keygen -t rsa -C &quot;ä½ çš„gitee/githubè´¦æˆ·é‚®ç®±&quot;\n\ncdè¿›å…¥.sshéšè—æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°ç”Ÿæˆçš„å¯†é’¥pubæ–‡ä»¶\ncatæŸ¥çœ‹è¯¥æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œå°†å…¶å¤åˆ¶\nåœ¨github&#x2F;giteeçš„ä¸ªäººè®¾ç½®é¡µé¢ï¼Œä½ éƒ½èƒ½æ‰¾åˆ°sshå¯†é’¥çš„æ·»åŠ å¤„\n\n\næ·»åŠ sshå¯†é’¥åï¼Œä½ å°±å¯ä»¥é€šè¿‡sshé“¾æ¥æ¥å¯¹githubè¿›è¡Œæ“ä½œäº†ï¼Œè¿™æ—¶å€™ä¸€èˆ¬å°±ä¸ä¼šå‡ºç°ç½‘ç»œé—®é¢˜äº†ï¼\n2â€¦â€¦è¿˜æ²¡é‡åˆ°â€¦â€¦ğŸ˜‚\nç»“è¯­å…³äºè¿™é¡¹æ“ä½œï¼Œç½‘ç»œä¸Šæœ‰å¾ˆå¤šç›¸ä¼¼å†…å®¹ï¼Œä½†æ€»æœ‰äº›è´§ä¸å¯¹æ¿ï¼Œä¸ç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚æ‰€ä»¥å°±è‡ªå·±å†™äº†ä¸ªåšå®¢\næœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","git"]},{"title":"ã€Linuxã€‘å®ç°å®ˆæŠ¤è¿›ç¨‹ | ä»¥tcpServerä¸ºä¾‹","url":"/2023/02/09/note_Linux/30%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/","content":"æœ¬æ–‡å°†ä»¥tcpæœåŠ¡å™¨ä»£ç ä¸ºåŸºæœ¬ï¼Œè®²è¿°å¦‚ä½•å°†è¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹åŒ–ï¼Œåå°è¿è¡Œ\n\n\n1.å®ˆæŠ¤è¿›ç¨‹æ‰€è°“å®ˆæŠ¤è¿›ç¨‹ï¼Œå°±æ˜¯å’Œå…¶ä»–è¿›ç¨‹æ²¡æœ‰å…³ç³»çš„è¿›ç¨‹ï¼›å…¶ç‹¬ç«‹è¿è¡Œäºç³»ç»Ÿåå°ï¼Œé™¤éè‡ªå·±é€€å‡ºæˆ–æ”¶åˆ°ä¿¡å·ç»ˆæ­¢ï¼Œå¦åˆ™ä¼šä¸€ç›´è¿è¡Œä¸‹å»\n1.1 è¿›ç¨‹ç»„åœ¨æˆ‘ä»¬ä½¿ç”¨çš„bashä¸­ï¼ŒåŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ç»„\n\nå¦‚å›¾ï¼Œå½“ä¸€ä¸ªå‰å°è¿›ç¨‹å¼€å§‹è¿è¡Œä¹‹åï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨å½“å‰ç»ˆç«¯å¼€å¯ç¬¬äºŒä¸ªå‰å°è¿›ç¨‹ã€‚\nåœ¨è¿è¡Œçš„å‘½ä»¤åé¢åŠ &amp;ï¼Œä¸´æ—¶è®©å½“å‰è¿›ç¨‹åœ¨åå°è¿è¡Œã€‚æ³¨æ„ï¼Œæ­¤æ—¶tcpè™½ç„¶åœ¨åå°è¿è¡Œäº†ï¼Œ ä½†å¯¹äºå®ƒè€Œè¨€ï¼Œstdin/stdout/stderrçš„æ–‡ä»¶æè¿°ç¬¦ä¾æ—§æŒ‡å‘çš„æ˜¯å½“å‰bashçš„è¾“å…¥è¾“å‡ºï¼Œæ‰€ä»¥å®ƒçš„æ—¥å¿—ä¾æ—§ä¼šæ‰“å°åˆ°å½“å‰ç»ˆç«¯ä¸Šã€‚\nç”¨pså‘½ä»¤æŸ¥çœ‹å½“å‰è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå…¶ä¸­ppidæ˜¯å½“å‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯å½“å‰bashï¼Œpidæ˜¯è¿›ç¨‹ç¼–å·ï¼Œpgidæ˜¯è¿›ç¨‹çš„ç»„ç¼–å·ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªç»„ç¼–å·å’Œgrepå‘½ä»¤çš„ç»„ç¼–å·æ˜¯ä¸åŒçš„ã€‚\n\næˆ‘ä»¬ç”¨è¿™ä¸ªcè¯­è¨€çš„ä»£ç è°ƒç”¨ä¸¤æ¬¡forkï¼Œç›¸å½“äºåˆ›å»ºäº†3ä¸ªå­è¿›ç¨‹ã€‚\n#include &lt;sys/wait.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main()&#123;    fork();    fork();    sleep(100);    return 0;&#125;\n\næ­¤æ—¶å†æ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼Œèƒ½çœ‹åˆ°è¿™4ä¸ªè¿›ç¨‹çš„è¿›ç¨‹ç»„pgidæ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å’Œç¬¬ä¸€ä¸ªtestçš„pidç›¸åŒï¼›è¿™è¯´æ˜ç¬¬ä¸€ä¸ªtestå°±æ˜¯çˆ¶è¿›ç¨‹ï¼Œåé¢çš„3ä¸ªéƒ½æ˜¯å­è¿›ç¨‹ã€‚\n\n1.2 è¿›ç¨‹ä¼šè¯è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ä¹‹å‰æ²¡æœ‰å¤ªå¤šäº†è§£çš„ä¿¡æ¯ï¼Œè¿›ç¨‹çš„sidæ˜¯ä»€ä¹ˆï¼Ÿ\nè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨å›¾ä¸­èƒ½çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„testå’Œgrepçš„sidéƒ½æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”éƒ½ç­‰äºç¬¬ä¸€ä¸ªtestè¿›ç¨‹çš„ppidï¼ˆbashçš„pidï¼‰\n\nè¿™è¡¨æ˜å›¾ä¸­çš„5ä¸ªè¿›ç¨‹åŒå±äºä¸€ä¸ªè¿›ç¨‹ä¼šè¯ï¼Œè¿™ä¸ªä¼šè¯å°±æ˜¯æˆ‘ä»¬å½“å‰æ‰“å¼€çš„bashï¼Œå¹¶ç”¨sidæ¥è¡¨ç¤ºè¿›ç¨‹ä¼šè¯ï¼›\n\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç™»å½•linuxçš„æ—¶å€™ä¸€å®šä¼šæœ‰ä¸€ä¸ªç»ˆç«¯ï¼Œlinuxç³»ç»Ÿå°±æ˜¯åˆ›å»ºä¼šè¯å¹¶åŠ è½½bashï¼Œæ¥ç»™ç”¨æˆ·æä¾›æœåŠ¡çš„ã€‚\n\næ—¢ç„¶å­˜åœ¨ä¼šè¯ï¼Œé‚£å°±è‚¯å®šä¼šæœ‰ä¼šè¯çš„èµ„æºä¸Šé™ã€‚ä¸€æ—¦æ»¡äº†ï¼Œå°±ä¼šå¼€å§‹æ€æ‰ä¸€äº›è¿›ç¨‹ã€‚\n./test &amp;\n\nå³ä¾¿æˆ‘ä»¬ç”¨&amp;è®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œå…¶ä¹Ÿæœ‰å¯èƒ½æ”¶åˆ°ä¼šè¯çš„åˆ›å»º/å…³é—­çš„å½±å“è€Œè¢«æ“ä½œç³»ç»Ÿå¹²æ‰ğŸ§æ¯”å¦‚æˆ‘ä»¬å°†å½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„bashå…³æ‰ï¼Œå…¶å‰å°è¿›ç¨‹ä¼šè¢«ç›´æ¥ç»ˆæ­¢ï¼Œåå°è¿›ç¨‹ä¹Ÿä¼šå—åˆ°å½±å“ï¼ˆæœ‰å¯èƒ½ç»ˆæ­¢æœ‰å¯èƒ½ä¸ç»ˆæ­¢ï¼Œå–å†³äºç³»ç»Ÿï¼‰\nè¿™å’Œæˆ‘ä»¬å¯¹tcpæœåŠ¡å™¨çš„éœ€æ±‚ä¸ä¸€è‡´ï¼šæˆ‘ä»¬éœ€è¦çš„æ˜¯è®©tcpæœåŠ¡å™¨çš„è¿›ç¨‹èƒ½ä¸€ç›´ç¨³å®šçš„åœ¨åå°è¿è¡Œï¼Œè®©æ“ä½œç³»ç»Ÿåˆ«å»ç®¡å®ƒï¼›é™¤éç³»ç»Ÿå†…å­˜æ»¡äº†ï¼Œè´Ÿè½½é‡åˆ°å®åœ¨æ²¡æœ‰åŠæ³•çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ‰èƒ½è¿‡æ¥æŠŠä»–åˆ€äº†ã€‚\nä¸ºäº†ä¸è®©å®ˆæŠ¤è¿›ç¨‹å—åˆ°è¿›ç¨‹ä¼šè¯çš„å½±å“ï¼Œæˆ‘ä»¬å°±å¿…é¡»è®©å…¶èƒ½å¤Ÿç‹¬ç«‹å‡ºæ¥ï¼Œè‡ªæˆä¸€ä¸ªè¿›ç¨‹ç»„å’Œä¸€ä¸ªæ–°ä¼šè¯\nğŸ‘†è¿™ç§ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå°±å¯ä»¥è¢«ç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹/ç²¾çµè¿›ç¨‹\n2.å®ç°2.1 è‡ªå·±å†™åˆ«ä»¥ä¸ºå†™è¿™ä¸ªå¾ˆéš¾å“¦ï¼Œå®é™…ç‰¹åˆ«ç®€å•ï¼\n2.1.1 setsidè¿™é‡Œéœ€è¦ç”¨åˆ°çš„setsidæ¥å£ï¼Œå…¶ä½œç”¨å¦‚åå­—ä¸€èˆ¬ï¼Œæ˜¯è®¾ç½®å½“å‰è¿›ç¨‹çš„è¿›ç¨‹ä¼šè¯ç»„\n#include &lt;unistd.h&gt;pid_t setsid(void);\n\nä½†æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªè¦æ±‚ï¼šè°ƒç”¨çš„è¿›ç¨‹ä¸èƒ½æ˜¯è¿›ç¨‹ç»„çš„ç»„é•¿ï¼\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œç¬¬ä¸€ä¸ªtestå°±æ˜¯è¿›ç¨‹ç»„çš„ç»„é•¿ï¼Œå®ƒä¸èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ä¼šæŠ¥é”™\n\né‚£è¦æ€ä¹ˆè®©è‡ªå·±ä¸æˆä¸ºè¿›ç¨‹ç»„çš„ç»„é•¿å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹å°±okäº†ï¼\nif (fork() &gt; 0)    exit(0);//çˆ¶è¿›ç¨‹ç›´æ¥é€€å‡º\n\n2.1.2 é‡å®šå‘åˆ°dev&#x2F;null\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯/dev/nullï¼Œç®€è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªlinuxä¸‹çš„æ•°æ®åƒåœ¾æ¡¶ã€‚å’Œwindowsçš„å›æ”¶ç«™ä¼šå­˜æ”¾åˆ é™¤çš„èµ„æ–™ä¸åŒï¼Œè¿™ä¸ªåƒåœ¾æ¡¶æ˜¯ä¸ªé»‘æ´ï¼Œä¸¢è¿›å»çš„ä¸œè¥¿ä¸ä¼šè¢«å­˜æ”¾ï¼Œæ˜¯ç›´æ¥ä¸¢å¼ƒçš„ï¼\n\nå®ˆæŠ¤è¿›ç¨‹éœ€è¦æŠŠé»˜è®¤çš„0.1.2æ–‡ä»¶æè¿°ç¬¦éƒ½é‡å®šå‘åˆ°dev/nullï¼Œæ˜¯å› ä¸ºè®¾ç½®æˆç‹¬ç«‹çš„è¿›ç¨‹ç»„å’Œè¿›ç¨‹ä¼šè¯äº†ä¹‹åï¼Œå½“å‰è¿›ç¨‹æ˜¯æ²¡æœ‰å’Œbashå…³è”çš„ã€‚\næ­¤æ—¶ï¼Œé»˜è®¤è¿™ä¸ª0 1 2æ‰€æŒ‡å‘çš„bashæ˜¯æ— æ•ˆçš„ï¼å¦‚æœä¸é‡å®šå‘ï¼Œä½¿ç”¨coutæ‰“å°çš„æ—¶å€™ï¼Œå°±ä¼šå¼•å‘å¼‚å¸¸ï¼ˆå¯ä»¥ç†è§£ä¸ºå¾€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ä¸­å†™å†…å®¹ï¼‰ï¼ŒæœåŠ¡å™¨ç›´æ¥é€€å‡ºäº†ï¼Œæ— æ³•å®ç°å®ˆæŠ¤è¿›ç¨‹ã€‚\né‡å®šå‘äº†ä¹‹åï¼Œæ‰€æœ‰çš„æ‰“å°è¾“å‡ºéƒ½ä¼šè¢«ä¸¢åˆ°/dev/nullè¿™ä¸ªæ–‡ä»¶åƒåœ¾æ¡¶ä¸­ï¼Œä¹Ÿå°±ä¸éœ€è¦æ‹…å¿ƒä¸Šè¿°çš„é—®é¢˜ã€‚\nif ((fd = open(&quot;/dev/null&quot;, O_RDWR)) != -1) // fd == 3&#123;    dup2(fd, STDIN_FILENO);    dup2(fd, STDOUT_FILENO);    dup2(fd, STDERR_FILENO);    // 6. å…³é—­æ‰ä¸éœ€è¦çš„fd    // å› ä¸ºfdåªæ˜¯ä¸´æ—¶ç”¨äºé‡å®šå‘ï¼Œæ“ä½œå®Œæ¯•äº†å°±å¯ä»¥å…³æ‰äº†    if(fd &gt; STDERR_FILENO)         close(fd);&#125;\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œé‚£æ—¥å¿—ä¿¡æ¯ä¹Ÿè¢«ä¸¢åˆ°åƒåœ¾æ¡¶é‡Œé¢äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ\nå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬æœåŠ¡å™¨çš„æ—¥å¿—éƒ½ç»Ÿä¸€ä½¿ç”¨äº†log.hppé‡Œé¢çš„loggingå‡½æ•°ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹loggingå‡½æ•°çš„è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶é‡Œé¢ï¼Œå°±okäº†ï¼\n2.1.3 chdirï¼ˆé€‰åšï¼‰è¿™ä¸ªæ“ä½œçš„ç›®çš„æ˜¯ä¿®æ”¹å·¥ä½œè·¯å¾„ã€‚ä½œä¸ºæœåŠ¡å™¨è¿›ç¨‹ï¼Œå¾ˆå¤šæ—¥å¿—ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨/etc/ç›®å½•è€Œä¸æ˜¯å½“å‰è·¯å¾„ä¸‹çš„ï¼Œä¸ºäº†å®‰å…¨ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨ç»å¯¹è·¯å¾„è€Œä¸ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé¿å…å‡ºç°å·¥ä½œç›®å½•åˆ‡æ¢è€Œå¯¼è‡´çš„æ— æ³•è¯»å†™æ–‡ä»¶çš„é—®é¢˜\nä¸è¿‡ï¼Œå¦‚æœä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå³ä¾¿æˆ‘ä»¬ä¸ä¿®æ”¹å·¥ä½œç›®å½•ï¼Œä¹Ÿæ˜¯èƒ½æ­£å¸¸è®¿é—®çš„ï¼›æ‰€ä»¥è¿™ä¸ªæ“ä½œæ˜¯é€‰åšçš„\n2.1.4 ä¿¡å·æ•æ‰è‡ªå·±å†™è¿™ä¸ªå‡½æ•°æœ‰ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢è‡ªå®šä¹‰æ•æ‰ä¸€äº›ä¿¡å·ï¼Œç»™è¿™äº›ä¿¡å· åŠ ä¸Šè‡ªå·±çš„è‡ªå®šä¹‰æ–¹æ³•ï¼›\næ¯”å¦‚SIGPIPEå°±æ˜¯ç®¡é“çš„ä¿¡å·ï¼Œå½“ç®¡é“çš„è¯»ç«¯å…³é—­çš„æ—¶å€™ï¼Œå†™ç«¯ä¼šè¢«ç»ˆæ­¢ï¼›æ­¤æ—¶å†™ç«¯å°±ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·ã€‚å¦‚æœä¸å¯¹è¿™ä¸ªä¿¡å·è¿›è¡ŒSIG_IGNå¿½ç•¥ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¼šç›´æ¥ç»ˆæ­¢ï¼\nsignal(SIGPIPE, SIG_IGN);\n\né™¤äº†è¿™ä¸ªä¿¡å·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹2å·æˆ–è€…3å·ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œè®¾å®šé€€å‡ºä¿¡å·ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿå®‰å…¨é€€å‡ºï¼ˆä¿å­˜æ—¥å¿—ä¿¡æ¯åˆ°ç£ç›˜ï¼Œé‡Šæ”¾èµ„æºç­‰ï¼›è™½ç„¶è¿›ç¨‹é€€å‡ºä¹‹åæ“ä½œç³»ç»Ÿä¼šå¸®æˆ‘ä»¬å¹²è¿™äº›äº‹ï¼Œä½†æˆ‘ä»¬è¿™ä¹ˆå†™èƒ½è®©é¡¹ç›®æ›´è§„èŒƒï¼‰\n2.1.5 å®Œæ•´ä»£ç #pragma once#include &lt;iostream&gt;#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt; #include &lt;fcntl.h&gt; // O_RDWR éœ€è¦void daemonize()&#123;    int fd = 0;    // 1. å¿½ç•¥SIGPIPE (ç®¡é“è¯»å†™ï¼Œè¯»ç«¯å…³é—­ï¼Œå†™ç«¯ä¼šæ”¶åˆ°ä¿¡å·ç»ˆæ­¢)    signal(SIGPIPE, SIG_IGN);    // 2. æ›´æ”¹è¿›ç¨‹çš„å·¥ä½œç›®å½•    // chdir(); // å¯ä»¥æ”¹ï¼Œå¯ä»¥ä¸æ”¹    // 3. è®©è‡ªå·±ä¸è¦æˆä¸ºè¿›ç¨‹ç»„ç»„é•¿    if (fork() &gt; 0)        exit(0);    // 4. è®¾ç½®è‡ªå·±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯    setsid();    // 5. é‡å®šå‘0,1,2    if ((fd = open(&quot;/dev/null&quot;, O_RDWR)) != -1) // fd == 3    &#123;        dup2(fd, STDIN_FILENO);        dup2(fd, STDOUT_FILENO);        dup2(fd, STDERR_FILENO);        // 6. å…³é—­æ‰ä¸éœ€è¦çš„fd        // å› ä¸ºfdåªæ˜¯ä¸´æ—¶ç”¨äºé‡å®šå‘ï¼Œæ“ä½œå®Œæ¯•äº†å°±å¯ä»¥å…³æ‰äº†        if(fd &gt; STDERR_FILENO)             close(fd);    &#125;    // è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ç§æ“ä½œï¼Œå°±æ˜¯æŠŠstdin/stdout/stderrç»™closeäº†    // ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´åªè¦æœ‰æ‰“å°è¾“å‡ºçš„ä»£ç ï¼Œè¿›ç¨‹ä¼šå°±å¼‚å¸¸é€€å‡º&#125;\n\næ²¡é”™ï¼Œå°±è¿™ä¸€ç‚¹ç‚¹ä»£ç ï¼Œå°±èƒ½è®©æˆ‘ä»¬çš„tcpæœåŠ¡å™¨å˜æˆå®ˆæŠ¤è¿›ç¨‹ï¼\n\næ­¤æ—¶æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¾æ—§èƒ½æ­£å¸¸è¿æ¥æœåŠ¡ç«¯ï¼Œè·å–ç»“æœ\n\n2.2 nohupno hang upï¼ˆä¸æŒ‚èµ·ï¼‰ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œã€‚ç”¨nohupå‘½ä»¤æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå°±èƒ½è®©è¿™ä¸ªè¿›ç¨‹æˆä¸ºä¸å—ç»ˆç«¯é€€å‡ºå½±å“çš„è¿›ç¨‹\nnohup ./test &amp;\n\næ­¤æ—¶ï¼Œnohupä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªnohup.outæ–‡ä»¶ï¼Œç”¨äºè®°å½•testè¿›ç¨‹çš„è¾“å‡ºä¿¡æ¯ï¼ˆå¦‚æœé€šè¿‡äº†&gt;æˆ–&gt;&gt;æ‰§è¡Œäº†é‡å®šå‘ï¼Œåˆ™ä¸ä¼šåˆ›å»ºï¼‰\n\né€šè¿‡pså¯å·²çœ‹åˆ°ï¼Œå½“å‰testè¿›ç¨‹çš„è¿›ç¨‹ä¼šè¯è¿˜æ˜¯å’Œbashç›¸åŒï¼Œä½†æˆ‘ä»¬å…³é—­å½“å‰bashï¼Œè¿™ä¸ªtestè¿›ç¨‹ä¾æ—§èƒ½æ­£å¸¸è¿è¡Œï¼Œåªä¸è¿‡çˆ¶è¿›ç¨‹ä¼šå˜æˆæ“ä½œç³»ç»Ÿ1ï¼Œæˆ‘ä»¬çš„ç›®çš„ä¹Ÿç®—æ˜¯è¾¾åˆ°äº†\n\n2.3 deamonæ¥å£linuxç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ¥å£daemonï¼Œå¯ä»¥å¸®æˆ‘ä»¬å®ç°å®ˆæŠ¤è¿›ç¨‹\n#include &lt;unistd.h&gt;int daemon(int nochdir, int noclose);\n\näº†è§£è¿‡å®ˆæŠ¤è¿›ç¨‹çš„å†™æ³•äº†ä¹‹åï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨å°±å¾ˆæ˜æ˜¾äº†\n\nç¬¬ä¸€ä¸ªå‚æ•°nochdirè¡¨æ˜æ˜¯å¦éœ€è¦ä¿®æ”¹å·¥ä½œç›®å½•ï¼›å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™åˆ‡æ¢å·¥ä½œç›®å½•åˆ°/ç³»ç»Ÿæ ¹ç›®å½•\nç¬¬äºŒä¸ªå‚æ•°nocloseè¡¨æ˜æ˜¯å¦éœ€è¦é‡å®šå‘åŸºç¡€ioåˆ°/dev/nullï¼›è®¾ç½®ä¸º0åˆ™é‡å®šå‘\n\nä»¥ä¸‹æ˜¯manæ‰‹å†Œä¸­çš„è¯´æ˜\nIf nochdir is zero, daemon() changes the calling process&#x27;s current working directory to the root directory (&quot;/&quot;); otherwise, the  curâ€rent working directory is left unchanged.If noclose is zero, daemon() redirects standard input, standard output and standard error to /dev/null; otherwise, no changes are madeto these file descriptors.\n\næˆ‘ä»¬ç›´æ¥ç”¨ä¸€ä¸ªç®€å•ä»£ç æ¥æ¼”ç¤º\n#include &lt;unistd.h&gt;int main()&#123;    //ä¸éœ€è¦ä¿®æ”¹å·¥ä½œç›®å½•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º1    //å› ä¸ºæ²¡æœ‰è¿›è¡Œæ‰“å°ï¼Œé‡å®šå‘è®¾ç½®æˆ1ï¼Œä¸è¿›è¡Œé‡å®šå‘    int ret = daemon(1,1);    sleep(100);    return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¿›ç¨‹çš„çˆ¶idæ˜¯æ“ä½œç³»ç»Ÿï¼Œå…¶è‡ªæˆä¸€ä¸ªè¿›ç¨‹ç»„å’Œè¿›ç¨‹ä¼šè¯ï¼›å’Œæˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°ä½œç”¨ç›¸åŒ\n\n3.é‡å®šå‘logå› ä¸ºå®ˆæŠ¤è¿›ç¨‹æŠŠè¾“å…¥è¾“å‡ºä¸¢åˆ°äº†åƒåœ¾æ…é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦é‡å®šå‘æ—¥å¿—çš„è¾“å‡º\n#define LOG_PATH &quot;./log.txt&quot; //å·¥ä½œè·¯å¾„ä¸‹çš„log.txt// è¿™ä¸ªç±»åªç”¨äºé‡å®šå‘ï¼Œä¸éœ€è¦åœ¨é‡Œé¢åŠ å…¶ä»–ä¸œè¥¿class Logdup&#123;public:    Logdup()        :_fdout(-1),_fderr(-1)    &#123;&#125;    Logdup(const char* pout=LOG_PATH,const char* perr=&quot;&quot;)        :_fdout(-1),_fderr(-1)    &#123;        //å¦‚æœåªä¼ å…¥äº†ç¬¬ä¸€ä¸ªpoutï¼Œåˆ™ä»£è¡¨å°†perrå’Œpouté‡å®šå‘ä¸ºä¸€ä¸ªè·¯å¾„        umask(0);        int logfd = open(pout, O_WRONLY | O_CREAT | O_APPEND, 0666);        assert(logfd != -1);        _fdout = _fderr = logfd;//èµ‹å€¼å¯ä»¥è¿ç­‰        //åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºä¸²        if(strcmp(perr,&quot;&quot;)!=0)//ä¸ç›¸åŒï¼Œä»£è¡¨å•ç‹¬è®¾ç½®äº†errçš„è·¯å¾„        &#123;            logfd = open(perr, O_WRONLY | O_CREAT | O_APPEND, 0666);            assert(logfd != -1);            _fderr = logfd;        &#125;        dup2(_fdout, 1);//é‡å®šå‘stdout        dup2(_fderr, 2);//é‡å®šå‘stderr    &#125;    ~Logdup()    &#123;        if(_fdout!= -1)        &#123;            fsync(_fdout);            fsync(_fderr);            // å…ˆå†™ç›˜å†å…³é—­            close(_fdout);            close(_fderr);        &#125;    &#125;private:    int _fdout;//é‡å®šå‘çš„æ—¥å¿—æ–‡ä»¶æè¿°ç¬¦    int _fderr;//é‡å®šå‘çš„é”™è¯¯æ–‡ä»¶æè¿°ç¬¦&#125;;c\n\nåšå®Œè¿™ä¸€åˆ‡ä¹‹åï¼Œæˆ‘ä»¬è¿è¡ŒæœåŠ¡å™¨ï¼Œçš„ç¡®åˆ›å»ºäº†log.txtæ–‡ä»¶ï¼Œå¯é‡Œé¢ç©ºç©ºå¦‚ä¹Ÿ\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å…¶å®éƒ½è¢«å†™é“äº†ç¼“å†²åŒºé‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨loggingé‡Œé¢æ·»åŠ ä¸€ä¸ªåˆ·æ–°æœºåˆ¶ï¼Œæ‰èƒ½è®©æ•°æ®å°½å¿«å†™å…¥åˆ°ç¡¬ç›˜ä¸­ï¼Œé¿å…æ—¥å¿—ä¸¢å¤±\nfflush(out); // å°†Cç¼“å†²åŒºä¸­çš„æ•°æ®åˆ·æ–°åˆ°OSfsync(fileno(out));// å°†OSä¸­çš„æ•°æ®å†™å…¥ç¡¬ç›˜\n\næ­¤æ—¶å†è¿è¡ŒæœåŠ¡å™¨ï¼Œå°±èƒ½çœ‹åˆ°æ—¥å¿—å¾ˆå¿«è¢«å†™å…¥æ–‡ä»¶é‡Œé¢äº†ã€‚\n\noveræå®šå•¦ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","ç½‘ç»œ"]},{"title":"ã€Linuxã€‘popen pcloseæ¥å£ä»‹ç»","url":"/2023/02/09/note_Linux/31popen_pclose/","content":"æœ¬ç¯‡æ–‡ç« ç®€å•è®²è¿°äº†cè¯­è¨€æ¥å£popen/pcloseçš„ç”¨æ³•\n\n\n1.å‡½æ•°ä½œç”¨å‡½æ•°å®šä¹‰å¦‚ä¸‹\n#include &lt;stdio.h&gt;FILE *popen(const char *command, const char *type);int pclose(FILE *stream);\n\n1.1 popenpopenå‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œforkåè°ƒç”¨shellæ¥æ‰“å¼€è¿›ç¨‹ã€‚ç”±äºç®¡é“çš„å®šä¹‰æ˜¯å•å‘çš„ï¼Œç¬¬äºŒä¸ªå‚æ•°typeåªèƒ½æŒ‡å®šè¯»æˆ–å†™ï¼Œä¸èƒ½åŒæ—¶æŒ‡å®šè¯»å’Œå†™ï¼›\næ‰€å¾—åˆ°çš„ç®¡é“ç›¸åº”åœ°æ˜¯åªè¯»æˆ–åªå†™çš„\n   The  popen()  function opens a process by creating a pipe, forking, and invoking the shell.  Since a pipe is by definition unidirectional, the type argument may specify only reading or writing, not both; the resulting stream is correspondingly read-only or write-only.\n\nç®€å•è¯´æ¥ï¼Œpopenä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬forkåˆ›å»ºå­è¿›ç¨‹å’Œä¸€ä¸ªç®¡é“ï¼Œå°†æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°commandåœ¨shellä¸­æ‰§è¡Œåï¼Œå°†è¿”å›å€¼ä»¥ç®¡é“æ–‡ä»¶çš„å½¢å¼å‘é€ç»™è°ƒç”¨æ–¹ã€‚\nå¦‚æœè°ƒç”¨forkæˆ–pipeå¤±è´¥ï¼Œæˆ–è€…ä¸èƒ½åˆ†é…å†…å­˜ï¼Œå°†è¿”å›NULLï¼›å¦åˆ™è¿”å›æ ‡å‡†I&#x2F;Oæµã€‚popen()æ²¡æœ‰ä¸ºå†…å­˜åˆ†é…å¤±è´¥è®¾ç½®errnoå€¼ã€‚å¦‚æœè°ƒç”¨fork()æˆ–pipe()æ—¶å‡ºç°é”™è¯¯ï¼Œerrnoè¢«è®¾ä¸ºç›¸åº”çš„é”™è¯¯ç±»å‹ã€‚å¦‚æœtypeå‚æ•°ä¸åˆæ³•ï¼Œerrnoå°†è¿”å›EINVAL\n1.2 pclose\nè¿™ä¸ªå‡½æ•°æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ˜¯ç”¨æ¥å…³æ‰popenæ‰“å¼€çš„æ–‡ä»¶çš„ï¼ˆå³popençš„è¿”å›å€¼ï¼‰\n\nä½†æ˜¯ï¼Œå®ƒçš„è¿”å›å€¼å¯æœ‰è¯´åˆ°äº†ï¼Œå…¶è¿”å›å€¼å°±æ˜¯æˆ‘ä»¬ç»ˆç«¯æ“ä½œçš„é€€å‡ºçŠ¶æ€ï¼Œä»¥æ ‡è¯†å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ\nä½†æ˜¯è¿™ä¸ªè¿”å›æ˜¯é€šè¿‡wait4å¾—åˆ°çš„ï¼Œå¦‚æœwait4å‡ºç°é”™è¯¯ï¼Œå°±ä¼šè¿”å›-1å¹¶è®¾ç½®errno\nThe pclose() function returns -1 if wait4(2) returns an error, or some other error is detected.  In the event of an error, these functions set errnro to indicate the cause of the error.\n\nè¿™é‡Œè¿˜å‡ºç°äº†ä¸€ä¸ªæ–°çš„é”™è¯¯ç errnroï¼Œä½†æ˜¯ç»è¿‡æˆ‘çš„ä¸€ç•ªç™¾åº¦ï¼Œæ²¡æœ‰å‘ç°ä»»ä½•åœ°æ–¹æœ‰å¯¹errnroçš„è¯´æ˜ï¼Œmanæ‰‹å†Œä¸‹æ–¹åˆå˜æˆäº†errno\nIf pclose() cannot obtain the child status, errno is set to ECHILD.\n\nè€Œä¸”ç¼–è¯‘æ‰§è¡Œçš„æ—¶å€™ï¼Œerrnroæ˜¯ä¼šæŠ¥é”™çš„ï¼Œæ‰€ä»¥å§‘ä¸”è®¤ä¸ºè¿™é‡Œæ˜¯manæ‰‹å†Œå‡ºé”™äº†ï¼\n\nerrnoæ‰æ˜¯æ­£ç¡®çš„\nint ret = pclose(f);printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));\n\n\n2.ä»£ç ç¤ºä¾‹2.1 popenè¯»ä»¥ä¸‹æ–¹æœ€ç®€å•çš„lså‘½ä»¤ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä»¥è¯»æ–¹å¼æ‰“å¼€ï¼Œpopenå°±ä¼šå°†lsçš„æ‰§è¡Œç»“æœå†™åˆ°æ–‡ä»¶é‡Œé¢è¿”å›ç»™æˆ‘ä»¬\n#include &lt;stdio.h&gt; int main()&#123;    FILE *f;    char readBuf[1024] = &#123;0&#125;;    f = popen(&quot;ls&quot;,&quot;r&quot;);    fread(readBuf,1024,1,f);    printf(&quot;%s\\n&quot;,readBuf);    pclose(f);    return 0;&#125;\n\nç¼–è¯‘åæ‰§è¡Œç»“æœå¦‚ä¸‹\n$ ./testtesttest.cpp    \n\n2.2 popenå†™å’Œè¯»ä¸åŒï¼Œå¦‚æœç”¨å†™æ–¹å¼æ‰§è¡Œpopenï¼Œå‘½ä»¤çš„è¾“å‡ºç»“æœä¼šç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Š\nvoid test2(FILE* f)&#123;    f = popen(&quot;ls&quot;,&quot;w&quot;);    int ret = pclose(f);    printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));&#125;\n\nmakefile  test  test.cpppclose: 0 | Success\n\nè¿™é‡Œæˆ‘è¿˜ä»¥ä¸ºåç»­å¯ä»¥æ¥ç€å¾€ç®¡é“é‡Œé¢å†™æ•°æ®ï¼Œè®©ä»–ç»§ç»­æ‰§è¡Œå‘½ä»¤\nvoid test2(FILE* f)&#123;    f = popen(&quot;ls&quot;,&quot;w&quot;);    // ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®    strcpy(readBuf,&quot;ls -l&quot;);    printf(&quot;cmd: %s\\n&quot;,readBuf);    // å†™é“ç®¡é“æ–‡ä»¶ä¸­    fwrite(readBuf,1024,1,f);    int ret = pclose(f);    printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));&#125;\n\nå¯æµ‹è¯•çš„ç»“æœå‘Šè¯‰æˆ‘ï¼Œå¹¶ä¸è¡Œ\ncmd: ls -lmakefile  test  test.cpppclose: 0 | Success\n\nç½‘ä¸Šçš„èµ„æ–™å¤§å¤šæ•°éƒ½æ˜¯åªæ¼”ç¤ºäº†ræ–¹æ³•ï¼Œæˆ‘ä¸ç¡®å®šè¿™é‡Œæ˜¯ä¸æ˜¯æˆ‘å†™çš„ä»£ç æœ‰é—®é¢˜ï¼Œè¿˜æ˜¯è¯´æœ¬æ¥å°±æ˜¯è¿™æ ·çš„ã€‚æš‚ä¸”åœç•™åœ¨è¿™é‡Œå§ï¼\nendå…³äºpopenå’Œpcloseçš„ç®€å•ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµ\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","Cè¯­è¨€"]},{"title":"ã€ç½‘ç»œã€‘è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | ä»¥tcpServerä¸ºä¾‹","url":"/2023/02/11/note_Linux/32tcp%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8D%8F%E8%AE%AE/","content":"ä»¥tcpServerçš„è®¡ç®—å™¨æœåŠ¡ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ªè‡ªå®šä¹‰åè®®\n\n\n\né˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯» tcpServer\næœ¬æ–‡å®Œæ•´ä»£ç è¯¦è§ Gitee\n\n1.é‡è°ˆtcpæ³¨æ„ï¼Œå½“ä¸‹æ‰€å¯¹tcpçš„æè¿°éƒ½æ˜¯ä»¥ç®€å•ã€æ–¹ä¾¿ç†è§£èµ·è§ï¼Œåç»­ä¼šå¯¹tcpåè®®è¿›è¡Œæ·±å…¥è§£è¯»\n1.1 é“¾æ¥æˆ‘ä»¬çŸ¥é“ï¼Œtcpæ˜¯é¢å‘è¿æ¥çš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¦å…ˆå»ºç«‹é“¾æ¥ï¼Œæ‰èƒ½å¼€å§‹é€šä¿¡\n\nåœ¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œtcpé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹\nåœ¨æ–­çº¿è¿‡ç¨‹ä¸­ï¼Œtcpé‡‡ç”¨å››æ¬¡æŒ¥æ‰‹\n\nä¸¾ä¸ªæ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ —å­ï¼Œå¸®åŠ©ç†è§£3æ¬¡æ¡æ‰‹å’Œ4æ¬¡æŒ¥æ‰‹\n\n1.2 ä¿¡æ¯å‘é€\nå‡å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦å‘é€ç»“æ„åŒ–æ•°æ®ï¼Œé‚£åº”è¯¥æ€ä¹ˆåŠï¼Ÿ\n\næˆ‘ä»¬çŸ¥é“ï¼Œtcpæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œä¹Ÿå°±æ˜¯å…¶èƒ½å¤Ÿå‘é€ä»»æ„æ•°æ®ã€‚ä¹Ÿèƒ½å¤Ÿå‘é€Cè¯­è¨€ç»“æ„ä½“çš„äºŒè¿›åˆ¶æ•°æ®ï¼›\n\nä½†èƒ½å‘é€ï¼Œå°±ä»£è¡¨æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå¹²å—ï¼Ÿ\nç­”æ¡ˆè‡ªç„¶æ˜¯ä¸è¡Œï¼\n\nä¸åŒå¹³å°ï¼Œå¯¹ç»“æ„ä½“å¯¹é½çš„é…ç½®ä¸åŒï¼Œå¤§å°ç«¯ä¸åŒï¼Œå…¶æœ€ç»ˆå¯¹æˆ‘ä»¬å­—èŠ‚æµçš„è§£æä¹Ÿå°±ä¸ä¸€æ ·ã€‚å¦‚æœé‡‡ç”¨ç›´æ¥å‘é€ç»“æ„ä½“æ•°æ®çš„æ–¹å¼æ¥é€šä¿¡ï¼Œé€‚é…æ€§æä½ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¼šè¢«é™åˆ¶åœ¨å½“å‰çš„ç³»ç»Ÿç¯å¢ƒä¸­è¿è¡Œï¼›\nå¯æ˜¯ï¼Œå“ªæ€•æ˜¯åŒä¸€ä¸ªç³»ç»Ÿï¼Œå…¶å†…éƒ¨å¯¹å¤§å°ç«¯çš„é…ç½®ä¹Ÿæœ‰å¯èƒ½æ”¹å˜ï¼åˆ°æ—¶å€™æˆ‘ä»¬çš„ä»£ç ææ€•å°±æ— æ³•è¿è¡Œäº†ï¼\nåŒç†ï¼Œåœ¨å½“åˆç¼–å†™Cè¯­è¨€é€šè®¯å½•çš„ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿä¸èƒ½é‡‡ç”¨ç›´æ¥å°†ç»“æ„ä½“æ•°æ®å†™å…¥æ–‡ä»¶çš„æ–¹å¼ã€‚åç»­ä»£ç å‡çº§ã€ç¯å¢ƒæ”¹å˜ï¼Œéƒ½å¯èƒ½å¯¼è‡´æˆ‘ä»¬å­˜åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®å¤±æ•ˆï¼Œè¿™è‚¯å®šæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„æƒ…å†µã€‚\næ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±åº”è¯¥å°†æ•°æ®è¿›è¡Œåºåˆ—åŒ–ä¹‹åå†å‘é€ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°ä¿¡æ¯åï¼Œè¿›è¡Œååºåˆ—åŒ–è§£æå‡ºæ•°æ®ï¼\n2.åºåˆ—åŒ–å’Œååºåˆ—åŒ–2.1 ç®€ä»‹æ‰€è°“åºåˆ—åŒ–ï¼Œå°±æ˜¯å°†ç»“æ„åŒ–çš„æ•°æ®ï¼ˆå¯ä»¥æš‚æ—¶ç†è§£ä¸ºcçš„ç»“æ„ä½“ï¼‰è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå‘é€å‡ºå»\nstruct date&#123;    int year;    int month;    int day;&#125;;\n\næ¯”å¦‚ä¸Šé¢è¿™ä¸ªæ—¥æœŸç»“æ„ä½“ï¼Œæˆ‘ä»¬è¦æƒ³å°†å…¶åºåˆ—åŒ–ï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€å•çš„æ–¹å¼æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆåºåˆ—åŒ–ï¼‰\nyear-month-day\n\nå®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥æ‰¾åˆ†éš”ç¬¦-çš„æ–¹å¼ï¼Œå–å‡ºä¸‰ä¸ªå˜é‡ï¼Œå°†å…¶è½¬æˆintåå­˜æ”¾å›ç»“æ„ä½“ï¼ˆååºåˆ—åŒ–ï¼‰\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®—æ˜¯è§„å®šäº†ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç®€å•çš„åè®®ï¼\n\n2.2 ç¼–ç è§£ç è¿™é‡Œè¿˜ä¼šå‡ºç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è¦æ€ä¹ˆçŸ¥é“æˆ‘å·²ç»è¯»å–å®Œæ¯•äº†ä¸€ä¸ªåºåˆ—åŒ–åçš„æ•°æ®å‘¢ï¼Ÿ\n2000-12-1010000-01-01\n\nå¦‚ä¸Šï¼Œå‡è®¾æœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬çš„å¹´å˜æˆäº†äº”ä½æ•°ï¼›è¿™æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¦æ€ä¹ˆçŸ¥é“è‡ªå·±æ˜¯å¦è¯»å–å®Œæ¯•äº†ä¸€ä¸ªå®Œæ•´çš„åºåˆ—åŒ–æ•°æ®å‘¢ï¼Ÿ\nè¿™å°±éœ€è¦æˆ‘ä»¬åšå¥½è§„å®šï¼Œå°†å‰nå­—èŠ‚ä½œä¸ºæ ‡è¯†é•¿åº¦çš„æ•°æ®ã€‚æ¥æ”¶åˆ°æ•°æ®åï¼Œå…ˆå–å‡ºå‰nä¸ªå­—èŠ‚ï¼Œè¯»å–é“æ­¤æ¬¡æ¶ˆæ¯çš„é•¿åº¦mï¼Œå†å¾€åè¯»å–mä¸ªå­—èŠ‚çš„æ•°æ®ï¼ŒæˆåŠŸå–å‡ºå®Œæ•´çš„å­—ç¬¦ä¸²;\n\nè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä½œç¼–ç å’Œè§£ç çš„è¿‡ç¨‹\n\nä¸ºäº†åŒºåˆ†æ ‡è¯†é•¿åº¦çš„æ•°æ®å’Œå®é™…éœ€è¦çš„åºåˆ—åŒ–å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¹‹ä¸­åŠ ä¸Šåˆ†éš”ç¬¦\\tï¼›ä½†è¿™ä¹Ÿéœ€è¦æˆ‘ä»¬ç¡®è®¤ï¼Œä¼ è¾“çš„æ•°æ®æœ¬èº«ä¸èƒ½å¸¦ä¸Š\\tï¼Œå¦åˆ™ä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„é—®é¢˜\n10\\t2000-12-10\\t11\\t10000-01-01\\t\n\nä»¥ä¸Šçš„è¿™ä¸€ç³»åˆ—å·¥ä½œï¼Œéƒ½æ˜¯åè®®å®šåˆ¶çš„ä¸€éƒ¨åˆ†ï¼æˆ‘ä»¬ç»™æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è§„å®šäº†ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼ï¼Œè®©äºŒè€…é€šä¿¡è§„é¿æ‰äº†å¹³å°çš„é™åˆ¶ã€‚æ¯•ç«Ÿä»»ä½•å¹³å°å¯¹å­—ç¬¦ä¸²è§£ç å‡ºæ¥çš„æ•°æ®éƒ½ä¼šæ˜¯ç›¸åŒçš„ï¼\nä¸‹é¢å°±ç”¨ä¸€ä¸ªè®¡ç®—å™¨çš„æœåŠ¡ï¼Œæ¥æ¼”ç¤ºä¸€ä¸‹å§ğŸ˜\n3.è®¡ç®—å™¨æœåŠ¡å› ä¸ºæœ¬æ–‡çš„é‡å¿ƒæ˜¯å¯¹åè®®å®šåˆ¶çš„æ¼”ç¤ºï¼Œæ‰€ä»¥è¿™é‡Œçš„è®¡ç®—å™¨ä¸è€ƒè™‘è¿ç»­æ“ä½œç¬¦çš„æƒ…å†µï¼Œ\n3.1 åè®®å®šåˆ¶è¦æƒ³å®ç°ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—å™¨æœ‰å‡ ä¸ªæˆå‘˜\nx+yx/yx*y...\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè®¡ç®—å™¨åªéœ€è¦3ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯ä¸¤ä¸ªæ“ä½œæ•°å’Œä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå°±èƒ½å¼€å§‹è®¡ç®—ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™é‡Œçš„ä¸‰ä¸ªå­—æ®µè®¾è®¡æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ç°åºåˆ—åŒ–ï¼›\næ¯”å¦‚æˆ‘ä»¬åº”è¯¥è§„å®šåºåˆ—åŒ–ä¹‹åçš„æ•°æ®åº”è¯¥æ˜¯å¦‚ä¸‹çš„ï¼Œä¸¤ä¸ªæ“ä½œæ•°å’Œæ“ä½œç¬¦ä¹‹é—´åº”è¯¥è¦æœ‰ç©ºæ ¼\na + b\n\nå†åœ¨å¼€å¤´æ·»åŠ ä¸Šæ•°æ®é•¿åº¦çš„æ ‡è¯†\næ•°æ®é•¿åº¦\\tå…¬å¼\\t7\\t10 + 20\\t8\\t100 / 30\\t9\\t300 - 200\\t\n\nå¯¹äºæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸¤ä¸ªå‚æ•°ï¼šçŠ¶æ€ç å’Œç»“æœ\né€€å‡ºçŠ¶æ€ ç»“æœ\n\nå¦‚æœé€€å‡ºçŠ¶æ€ä¸ä¸º0ï¼Œåˆ™ä»£è¡¨å‡ºç°é”™è¯¯ï¼Œç»“æœæ— æ•ˆï¼›åªæœ‰é€€å‡ºç»“æœä¸º0ï¼Œç»“æœæ‰æ˜¯æœ‰æ•ˆçš„ã€‚\nåŒæ ·çš„ï¼Œä¹Ÿéœ€è¦ç»™æœåŠ¡å™¨çš„åºåˆ—åŒ–å­—ç¬¦ä¸²æ·»åŠ ä¸Šæ•°æ®çš„é•¿åº¦\næ•°æ®é•¿åº¦\\té€€å‡ºçŠ¶æ€ ç»“æœ\\t\n\nè¿™æ ·å°±æå®šäº†ä¸€ä¸ªè®¡ç®—å™¨çš„è‡ªå®šä¹‰åè®®ï¼›\n3.2 æˆå‘˜ä¾ç…§å¦‚ä¸Šçš„åè®®ï¼Œå…ˆæŠŠè¯·æ±‚å’Œè¿”å›çš„æˆå‘˜å˜é‡å†™å¥½\nclass Request&#123;    int _x;    int _y;    char _ops;&#125;;\n\nclass Response&#123;\tint _exitCode; //è®¡ç®—æœåŠ¡çš„é€€å‡ºç \tint _result;  // ç»“æœ&#125;;  \n\nè¿™äº›æˆå‘˜å˜é‡éƒ½è®¾ç½®ä¸ºå…¬æœ‰ï¼Œæ–¹ä¾¿åœ¨taské‡Œé¢è¿›è¡Œå¤„ç†ï¼ˆå¦åˆ™å°±éœ€è¦å†™getå‡½æ•°ï¼Œå¾ˆéº»çƒ¦ï¼‰\nåŒæ—¶ï¼Œæœ€å¥½è¿˜æ˜¯æŠŠåè®®ä¸­çš„åˆ†éš”ç¬¦ç»™å®šä¹‰å‡ºæ¥ï¼Œæ–¹ä¾¿åç»­ç»Ÿä¸€ä½¿ç”¨oræ›´æ”¹\n#define CRLF &quot;\\t&quot;   //åˆ†éš”ç¬¦#define CRLF_LEN strlen(CRLF) //åˆ†éš”ç¬¦é•¿åº¦#define SPACE &quot; &quot;   //ç©ºæ ¼#define SPACE_LEN strlen(SPACE) //ç©ºæ ¼é•¿åº¦#define OPS &quot;+-*/%&quot; //è¿ç®—ç¬¦\n\n3.3 ç¼–ç è§£ç å¯¹äºè¯·æ±‚å’Œå›åº”æ¥è¯´ï¼Œç¼–è§£ç çš„æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¾€å­—ç¬¦ä¸²çš„å¼€å¤´æ·»åŠ ä¸Šé•¿åº¦å’Œåˆ†éš”ç¬¦\né•¿åº¦\\tåºåˆ—åŒ–å­—ç¬¦ä¸²\\t\n\nè§£ç å°±æ˜¯å°†é•¿åº¦å’Œåˆ†éš”ç¬¦å»æ‰ï¼Œåªè§£æå‡ºåºåˆ—åŒ–å­—ç¬¦ä¸²\nåºåˆ—åŒ–å­—ç¬¦ä¸²\n\nç¼–ç è§£ç çš„æ•´ä¸ªè¿‡ç¨‹åœ¨æ³¨é‡Šé‡Œé¢éƒ½å†™æ˜äº†ğŸ˜ä¸ºäº†æ–¹ä¾¿è¯·æ±‚å’Œå›åº”å»ä½¿ç”¨ï¼Œç›´æ¥æ”¾åˆ°å¤–å¤´ï¼Œä¸åšç±»å†…å°è£…\n//å‚æ•°lenä¸ºinçš„é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚å¦‚æœä¸º0ä»£è¡¨errstd::string decode(std::string&amp; in,size_t*len)&#123;    assert(len);//å¦‚æœé•¿åº¦ä¸º0æ˜¯é”™è¯¯çš„    // 1.ç¡®è®¤inçš„åºåˆ—åŒ–å­—ç¬¦ä¸²å®Œæ•´ï¼ˆåˆ†éš”ç¬¦ï¼‰    *len=0;    size_t pos = in.find(CRLF);//æŸ¥æ‰¾åˆ†éš”ç¬¦    //æŸ¥æ‰¾ä¸åˆ°ï¼Œerr    if(pos == std::string::npos)&#123;        return &quot;&quot;;//è¿”å›ç©ºä¸²    &#125;       // 2.æœ‰åˆ†éš”ç¬¦ï¼Œåˆ¤æ–­é•¿åº¦æ˜¯å¦è¾¾æ ‡    // æ­¤æ—¶posä¸‹æ ‡æ­£å¥½å°±æ˜¯æ ‡è¯†å¤§å°çš„å­—ç¬¦é•¿åº¦    std::string inLenStr = in.substr(0,pos);//æå–å­—ç¬¦ä¸²é•¿åº¦    size_t inLen = atoi(inLenStr.c_str());//è½¬int    size_t left = in.size() - inLenStr.size()- 2*CRLF_LEN;//å‰©ä¸‹çš„å­—ç¬¦é•¿åº¦    if(left&lt;inLen)&#123;        return &quot;&quot;; //å‰©ä¸‹çš„é•¿åº¦æ²¡æœ‰è¾¾åˆ°æ ‡æ˜çš„é•¿åº¦    &#125;    // 3.èµ°åˆ°æ­¤å¤„ï¼Œå­—ç¬¦ä¸²å®Œæ•´ï¼Œå¼€å§‹æå–åºåˆ—åŒ–å­—ç¬¦ä¸²    std::string ret = in.substr(pos+CRLF_LEN,inLen);    *len = inLen;    // 4.å› ä¸ºinä¸­å¯èƒ½è¿˜æœ‰å…¶ä»–çš„æŠ¥æ–‡ï¼ˆä¸‹ä¸€æ¡ï¼‰    // æ‰€ä»¥éœ€è¦æŠŠå½“å‰çš„æŠ¥æ–‡ä»inä¸­åˆ é™¤ï¼Œæ–¹ä¾¿ä¸‹æ¬¡decodeï¼Œé¿å…äºŒæ¬¡è¯»å–    size_t rmLen = inLenStr.size() + ret.size() + 2*CRLF_LEN;    in.erase(0,rmLen);    // 5.è¿”å›    return ret;&#125;//ç¼–ç ä¸éœ€è¦ä¿®æ”¹æºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥constã€‚å‚æ•°lenä¸ºinçš„é•¿åº¦std::string encode(const std::string&amp; in,size_t len)&#123;    std::string ret = std::to_string(len);//å°†é•¿åº¦è½¬ä¸ºå­—ç¬¦ä¸²æ·»åŠ åœ¨æœ€å‰é¢ï¼Œä½œä¸ºæ ‡è¯†    ret+=CRLF;    ret+=in;    ret+=CRLF;    return ret;&#125;\n\n3.4 requestç¼–ç è§£ç å†™å¥½äº†ï¼Œå…ˆæ¥å¤„ç†æ¯”è¾ƒéº»çƒ¦çš„è¯·æ±‚éƒ¨åˆ†ï¼›è¯´éº»çƒ¦å§ï¼Œå…¶å®å¤§å¤šæ•°ä¹Ÿæ˜¯c++çš„stringæ“ä½œï¼Œè¦ç†Ÿç»ƒè¿ç”¨stringçš„å„ç±»æˆå‘˜å‡½æ•°ï¼Œæ‰èƒ½å¾ˆå¥½çš„å®ç°\n3.4.1 æ„é€ æ¯”è¾ƒé‡è¦çš„æ˜¯è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·çš„è¾“å…¥è½¬æˆå†…éƒ¨çš„ä¸‰ä¸ªæˆå‘˜\nç”¨æˆ·å¯èƒ½è¾“å…¥x+yï¼Œx+ yï¼Œx +y,x + yç­‰ç­‰æ ¼å¼\n\nè¿™é‡Œè¿˜éœ€è¦æ³¨æ„ï¼Œç”¨æˆ·çš„è¾“å…¥ä¸ä¸€å®šæ˜¯æ ‡å‡†çš„X+Yï¼Œé‡Œé¢å¯èƒ½åœ¨ä¸åŒä½ç½®é‡Œé¢ä¼šæœ‰ç©ºæ ¼ã€‚ä¸ºäº†ç»Ÿä¸€æ–¹ä¾¿å¤„ç†ï¼Œåœ¨è§£æä¹‹å‰ï¼Œæœ€å¥½å…ˆæŠŠç”¨æˆ·è¾“å…¥å†…çš„ç©ºæ ¼ç»™å»æ‰ï¼\nå¯¹äºstringè€Œè¨€ï¼Œå»æ‰ç©ºæ ¼å°±å¾ˆç®€å•äº†ï¼Œç›´æ¥ä¸€ä¸ªéå†æå®š\n// åˆ é™¤è¾“å…¥ä¸­çš„ç©ºæ ¼void rmSpace(std::string&amp; in)&#123;    std::string tmp;    for(auto e:in)    &#123;        if(e!=&#x27; &#x27;)        &#123;            tmp+=e;        &#125;    &#125;    in = tmp;&#125;\n\nå®Œæˆçš„æ„é€ å¦‚ä¸‹ï¼Œè¿™é‡Œæ¶‰åŠåˆ°Cè¯­è¨€çš„å‡½æ•°strtokï¼Œè¦å¤ä¹ å¤ä¹ \n// å°†ç”¨æˆ·çš„è¾“å…¥è½¬æˆå†…éƒ¨æˆå‘˜// ç”¨æˆ·å¯èƒ½è¾“å…¥x+yï¼Œx+ yï¼Œx +y,x + yç­‰ç­‰æ ¼å¼// æå‰ä¿®æ”¹ç”¨æˆ·è¾“å…¥ï¼ˆä¸»è¦è¿˜æ˜¯å»æ‰ç©ºæ ¼ï¼‰ï¼Œæå–å‡ºæˆå‘˜Request(std::string in,bool* status)    :_x(0),_y(0),_ops(&#x27; &#x27;)&#123;    rmSpace(in);    // è¿™é‡Œä½¿ç”¨cçš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºæœ‰strtok    char buf[1024];    // æ‰“å°nä¸ªå­—ç¬¦ï¼Œå¤šçš„ä¼šè¢«æˆªæ–­    snprintf(buf,sizeof(buf),&quot;%s&quot;,in.c_str());    char* left = strtok(buf,OPS);    if(!left)&#123;//æ‰¾ä¸åˆ°        *status = false;        return;    &#125;    char*right = strtok(nullptr,OPS);    if(!right)&#123;//æ‰¾ä¸åˆ°        *status = false;        return;    &#125;    // x+y, strtokä¼šå°†+è®¾ç½®ä¸º\\0    char mid = in[strlen(left)];//æˆªå–å‡ºæ“ä½œç¬¦    //è¿™æ˜¯åœ¨åŸå­—ç¬¦ä¸²é‡Œé¢å–å‡ºæ¥ï¼Œbufé‡Œé¢çš„è¿™ä¸ªä½ç½®è¢«æ”¹æˆ\\0äº†    _x = atoi(left);    _y = atoi(right);    _ops = mid;    *status=true;&#125;\n\n3.4.2 åºåˆ—åŒ–è§£æå‡ºæˆå‘˜ä»¥åï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å¯¹æˆå‘˜è¿›è¡Œåºåˆ—åŒ–ï¼Œå°†å…¶æŒ‰æŒ‡å®šçš„ä½ç½®æ‘†æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™é‡Œé‡‡ç”¨äº†è¾“å‡ºå‹å‚æ•°çš„æ–¹å¼æ¥åºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ”¹æˆç”¨è¿”å›å€¼çš„æ–¹å¼æ¥æ“ä½œã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ“ä½œç¬¦æœ¬èº«å°±æ˜¯charä¸èƒ½ä½¿ç”¨to_stringæ¥æ“ä½œï¼Œä¼šè¢«è½¬æˆasciiç ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚\n// åºåˆ—åŒ– ï¼ˆå…¥å‚åº”è¯¥æ˜¯ç©ºçš„ï¼‰void serialize(std::string&amp; out)&#123;    // x + y    out.clear(); // åºåˆ—åŒ–çš„å…¥å‚æ˜¯ç©ºçš„    out+= std::to_string(_x);    out+= SPACE;    out+= _ops;//æ“ä½œç¬¦ä¸èƒ½ç”¨tostringï¼Œä¼šè¢«è½¬æˆascii    out+= SPACE;    out+= std::to_string(_y);    // ä¸ç”¨æ·»åŠ åˆ†éš”ç¬¦ï¼ˆè¿™æ˜¯encodeè¦å¹²çš„äº‹æƒ…ï¼‰&#125;\n\n3.4.3 ååºåˆ—åŒ–æ³¨æ„ï¼Œæ€è·¯ä¸èƒ½æé”™äº†ã€‚åˆšå¼€å§‹æˆ‘è®¤ä¸ºrequestçš„ååºåˆ—åŒ–åº”è¯¥é’ˆå¯¹çš„æ˜¯æœåŠ¡å™¨çš„è¿”å›å€¼ï¼Œå®é™…å¹¶éå¦‚æ­¤ï¼\nåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦ä½¿ç”¨requestï¼Œå®¢æˆ·ç«¯è¿›è¡Œåºåˆ—åŒ–ï¼ŒæœåŠ¡ç«¯å¯¹æ¥æ”¶åˆ°çš„ç»“æœåˆ©ç”¨requestè¿›è¡Œååºåˆ—åŒ–ã€‚requeståªå…³æ³¨äºå¯¹è¯·æ±‚çš„å¤„ç†ï¼Œè€Œä¸å¤„ç†æœåŠ¡å™¨çš„è¿”å›å€¼ã€‚\n// ååºåˆ—åŒ–bool deserialize(const std::string &amp;in)&#123;    // x + y éœ€è¦å–å‡ºxï¼Œyå’Œæ“ä½œç¬¦    size_t space1 = in.find(SPACE); //ç¬¬ä¸€ä¸ªç©ºæ ¼    if(space1 == std::string::npos)    &#123;        return false;    &#125;    size_t space2 = in.rfind(SPACE); //ç¬¬äºŒä¸ªç©ºæ ¼    if(space2 == std::string::npos)    &#123;        return false;    &#125;    // ä¸¤ä¸ªç©ºæ ¼éƒ½å­˜åœ¨ï¼Œå¼€å§‹å–æ•°æ®    std::string dataX = in.substr(0,space1);    std::string dataY = in.substr(space2+SPACE_LEN);//é»˜è®¤å–åˆ°ç»“å°¾    std::string op = in.substr(space1+SPACE_LEN,space2 -(space1+SPACE_LEN));    if(op.size()!=1)    &#123;        return false;//æ“ä½œç¬¦é•¿åº¦æœ‰é—®é¢˜    &#125;    //æ²¡é—®é¢˜äº†ï¼Œè½¬å†…éƒ¨æˆå‘˜    _x = atoi(dataX.c_str());    _y = atoi(dataY.c_str());    _ops = op[0];    return true;&#125;\n\n3.5 response3.5.1 æ„é€ è¿”å›å€¼çš„æ„é€ æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºæ˜¯æœåŠ¡å™¨å¤„ç†ç»“æœä¹‹åçš„æ“ä½œï¼›è¿™äº›æˆå‘˜å˜é‡éƒ½è®¾ç½®ä¸ºäº†å…¬æœ‰ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹ã€‚\nResponse(int code=0,int result=0)    :_exitCode(code),_result(result)&#123;&#125;\n\n3.5.2 åºåˆ—åŒ–// å…¥å‚æ˜¯ç©ºçš„void serialize(std::string&amp; out)&#123;    // code ret    out.clear();    out+= std::to_string(_exitCode);    out+= SPACE;    out+= std::to_string(_result);    out+= CRLF;&#125;\n\n3.5.3 ååºåˆ—åŒ–å“åº”çš„ååºåˆ—åŒ–åªéœ€è¦å¤„ç†ä¸€ä¸ªç©ºæ ¼ï¼Œç›¸å¯¹æ¥è¯´è¾ƒä¸ºç®€å•\n// ååºåˆ—åŒ–bool deserialize(const std::string &amp;in)&#123;    // åªæœ‰ä¸€ä¸ªç©ºæ ¼    size_t space = in.find(SPACE);    if(space == std::string::npos)    &#123;        return false;    &#125;    std::string dataCode = in.substr(0,space);    std::string dataRes = in.substr(space+SPACE_LEN);    _exitCode = atoi(dataCode.c_str());    _result = atoi(dataRes.c_str());    return true;&#125;\n\n3.6 å®¢æˆ·ç«¯ä¹‹å‰å†™çš„å®¢æˆ·ç«¯ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸Šåºåˆ—åŒ–æ“ä½œï¼Œå¹¶å¯¹æœåŠ¡å™¨çš„è¿”å›å€¼è¿›è¡Œååºåˆ—åŒ–ã€‚è¿™æœŸé—´éœ€è¦åŠ ä¸Šä¸€ç³»åˆ—åˆ¤æ–­ï¼›\nä¸ºäº†é™åˆ¶ç¯‡å¹…ï¼Œä¸‹é¢åªè´´å‡ºæ¥å®¢æˆ·ç«¯çš„å¾ªç¯æ“ä½œï¼›è¯¦æƒ…å‚è€ƒæ³¨é‡Šã€‚\n// å®¢æˆ·ç«¯å‘ç°çš„æ¶ˆæ¯string message;while (1)&#123;    message.clear();//æ¯æ¬¡å¾ªç¯å¼€å§‹ï¼Œéƒ½æ¸…ç©ºä¸€ä¸‹msg    cout &lt;&lt; &quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;;    getline(cin, message);//è·å–è¾“å…¥    // å¦‚æœå®¢æˆ·ç«¯è¾“å…¥äº†quitï¼Œåˆ™é€€å‡º    if (strcasecmp(message.c_str(), &quot;quit&quot;) == 0)        break;    // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯    // 1.åˆ›å»ºä¸€ä¸ªrequestï¼ˆåˆ†ç¦»å‚æ•°ï¼‰    bool reqStatus = true;    Request req(message,&amp;reqStatus);    if(!reqStatus)&#123;        cout &lt;&lt; &quot;make req err!&quot; &lt;&lt; endl;        continue;    &#125;    // 2.åºåˆ—åŒ–å’Œç¼–ç     string package;    req.serialize(package);//åºåˆ—åŒ–    package = encode(package,package.size());//ç¼–ç     // 3.å‘é€ç»™æœåŠ¡å™¨    ssize_t s = write(sock,package.c_str(), package.size());    if (s &gt; 0) // å†™å…¥æˆåŠŸ    &#123;        // 4.è·å–æœåŠ¡å™¨çš„ç»“æœ        char buff[BUFFER_SIZE];        size_t s = read(sock, buff, sizeof(buff)-1);        if(s &gt; 0)&#123;            buff[s] = &#x27;\\0&#x27;;        &#125;        std::string echoPackage = buff;        Response resp;        size_t len = 0;        // 5.è§£ç å’Œååºåˆ—åŒ–        std::string tmp = decode(echoPackage, &amp;len);        if(len &gt; 0)//è§£ç æˆåŠŸ        &#123;            echoPackage = tmp;            if(resp.deserialize(echoPackage))//ååºåˆ—åŒ–å¹¶åˆ¤æ–­            &#123;                printf(&quot;ECHO [exitcode: %d] %d\\n&quot;, resp._exitCode, resp._result);            &#125;            else            &#123;                cerr &lt;&lt; &quot;server echo deserialize err!&quot; &lt;&lt; endl;            &#125;        &#125;        else        &#123;            cerr &lt;&lt; &quot;server echo decode err!&quot; &lt;&lt; endl;        &#125;    &#125;    else if (s &lt;= 0) // å†™å…¥å¤±è´¥    &#123;        break;    &#125;&#125;\n\n3.7 æœåŠ¡ç«¯æœåŠ¡ç«¯æ— é¡»ä¿®æ”¹ä»£ç ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯taskæ¶ˆæ¯é˜Ÿåˆ—ä¸­å¤„ç†çš„ä»»åŠ¡ï¼›è¿™å°±æ˜¯ä¹‹å‰åšå¥½å°è£…çš„å¥½å¤„ï¼Œå› ä¸ºåªéœ€è¦ä¿®æ”¹taské‡Œé¢ä¼ å…¥çš„å‡½æ•°æŒ‡é’ˆï¼Œå°±ç®—æ˜¯ä¿®æ”¹äº†æœåŠ¡å™¨æ‰€è¿›è¡Œçš„æœåŠ¡\n// æä¾›æœåŠ¡ï¼ˆé€šè¿‡çº¿ç¨‹æ± ï¼‰Task t(conet,senderIP,senderPort,CaculateService);_tpool-&gt;push(t);\n\nå¦‚ä¸‹æ˜¯è®¡ç®—å™¨æœåŠ¡çš„ä»£ç \nvoid CaculateService(int sockfd, const std::string &amp;clientIP, uint16_t clientPort)&#123;    assert(sockfd &gt;= 0);    assert(!clientIP.empty());    assert(clientPort &gt; 0);    std::string inbuf;    while(1)    &#123;        Request req;        char buf[BUFFER_SIZE];        // 1.è¯»å–å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯        ssize_t s = read(sockfd, buf, sizeof(buf) - 1);        if (s == 0)        &#123;   // s == 0ä»£è¡¨å¯¹æ–¹å‘é€äº†ç©ºæ¶ˆæ¯ï¼Œè§†ä½œå®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º            logging(DEBUG, &quot;client quit: %s[%d]&quot;, clientIP.c_str(), clientPort);            break;        &#125;        else if(s&lt;0)        &#123;            // å‡ºç°äº†è¯»å–é”™è¯¯ï¼Œæ‰“å°æ—¥å¿—åæ–­å¼€è¿æ¥            logging(DEBUG, &quot;read err: %s[%d] = %s&quot;, clientIP.c_str(), clientPort, strerror(errno));            break;        &#125;        // 2.è¯»å–æˆåŠŸ        buf[s] = &#x27;\\0&#x27;; // æ‰‹åŠ¨æ·»åŠ å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦        if (strcasecmp(buf, &quot;quit&quot;) == 0)        &#123; // å®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º            break;        &#125;        // 3.å¼€å§‹æœåŠ¡        inbuf = buf;        size_t packageLen = inbuf.size();        // 3.1.è§£ç å’Œååºåˆ—åŒ–å®¢æˆ·ç«¯ä¼ æ¥çš„æ¶ˆæ¯        std::string package = decode(inbuf, &amp;packageLen);//è§£ç         if(packageLen==0)&#123;            logging(DEBUG, &quot;decode err: %s[%d] status: %d&quot;, clientIP.c_str(), clientPort, packageLen);            continue;//æŠ¥æ–‡ä¸å®Œæ•´æˆ–æœ‰è¯¯        &#125;        logging(DEBUG,&quot;package: %s[%d] = %s&quot;,clientIP.c_str(), clientPort,package.c_str());        bool deStatus = req.deserialize(package); // ååºåˆ—åŒ–        if(deStatus) // è·å–æ¶ˆæ¯ååºåˆ—åŒ–æˆåŠŸ        &#123;            req.debug(); // æ‰“å°ä¿¡æ¯            // 3.2.è·å–ç»“æ„åŒ–çš„ç›¸åº”            Response resp = Caculater(req);            // 3.3.åºåˆ—åŒ–å’Œç¼–ç å“åº”            std::string echoStr;            resp.serialize(echoStr);            echoStr = encode(echoStr,echoStr.size());            // 3.4.å†™å…¥ï¼Œå‘é€è¿”å›å€¼ç»™å®¢æˆ·ç«¯            write(sockfd, echoStr.c_str(), echoStr.size());        &#125;        else // å®¢æˆ·ç«¯æ¶ˆæ¯ååºåˆ—åŒ–å¤±è´¥        &#123;            logging(DEBUG, &quot;deserialize err: %s[%d] status: %d&quot;, clientIP.c_str(), clientPort, deStatus);            continue;        &#125;    &#125;    close(sockfd);    logging(DEBUG, &quot;server quit: %s[%d] %d&quot;,clientIP.c_str(), clientPort, sockfd);&#125;\n\nå…¶ä¸­æœ‰ä¸€ä¸ªè®¡ç®—å‡½æ•°ï¼Œæ¯”è¾ƒç®€å•ï¼Œé€šè¿‡switch caseè¯­å¥ï¼Œè®¡ç®—ç»“æœï¼Œå¹¶åˆ¤æ–­æ“ä½œæ•°æ˜¯å¦æœ‰é—®é¢˜ã€‚\nResponse Caculater(const Request&amp; req)&#123;    Response resp;//æ„é€ å‡½æ•°ä¸­å·²ç»æŒ‡å®šäº†exitcodeä¸º0    switch (req._ops)    &#123;    case &#x27;+&#x27;:        resp._result = req._x + req._y;        break;    case &#x27;-&#x27;:        resp._result = req._x - req._y;        break;    case &#x27;*&#x27;:        resp._result = req._x * req._y;        break;    case &#x27;%&#x27;:    &#123;        if(req._y == 0)        &#123;            resp._exitCode = -1;//å–æ¨¡é”™è¯¯            break;        &#125;        resp._result = req._x % req._y;//å–æ¨¡æ˜¯å¯ä»¥æ“ä½œè´Ÿæ•°çš„        break;    &#125;    case &#x27;/&#x27;:    &#123;        if(req._y == 0)        &#123;            resp._exitCode = -2;//é™¤0é”™è¯¯            break;        &#125;        resp._result = req._x / req._y;//å–æ¨¡æ˜¯å¯ä»¥æ“ä½œè´Ÿæ•°çš„        break;    &#125;    default:        resp._exitCode = -3;//æ“ä½œç¬¦éæ³•        break;    &#125;    return resp;&#125;\n\nè¿™æ ·ï¼Œæˆ‘ä»¬çš„åºåˆ—åŒ–å¤„ç†å°±æˆåŠŸäº†ï¼æµ‹è¯•ä¸€ä¸‹å§\n4.æµ‹è¯•è¿è¡ŒæœåŠ¡å™¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨èƒ½æˆåŠŸå¤„ç†å®¢æˆ·ç«¯çš„è®¡ç®—ï¼Œå¹¶è¿”å›ç»“æœ\n\nè¾“å…¥quitï¼ŒæœåŠ¡å™¨ä¼šæ‰“å°ä¿¡æ¯ï¼Œå¹¶é€€å‡ºæœåŠ¡\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","ç½‘ç»œ"]},{"title":"ã€ç½‘ç»œã€‘è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | Jsoncpp","url":"/2023/02/12/note_Linux/33jsoncpp%E5%BA%8F%E5%88%97%E5%8C%96/","content":"ä»¥tcpServerçš„è®¡ç®—å™¨æœåŠ¡ä¸ºä¾‹ï¼Œå®ç°ç”¨jsoncppæ¥è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–\n\n\n\né˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯» è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | ä»¥tcpServerä¸ºä¾‹\n\n1.å®‰è£…åŒ…æˆ‘æ‰€ç”¨çš„ç³»ç»Ÿæ˜¯centos7.6ï¼Œå…ˆç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥æ‰¾ç›¸å…³çš„åŒ…\nsudo yum list | grep jsoncpp-devel\n\næ˜¾ç¤ºå‡ºæ¥çš„åŒ…å¦‚ä¸‹\nRepository epel is listed more than once in the configurationjsoncpp-devel.x86_64                0.10.5-2.el7           @epel \n\néšåå®‰è£…è¿™ä¸ªåŒ…\nsudo yum install jsoncpp\n\nä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå®‰è£…jsoncpp-devel.x86_64æ˜¾ç¤ºæ‰¾ä¸åˆ°ç›¸å…³åŒ…\n1.1 ä»€ä¹ˆæ˜¯jsonï¼Ÿjsonæ˜¯ä¸€ä¸ªkvé”®å€¼å¯¹çš„åºåˆ—åŒ–æ–¹å¼ï¼Œæ¯ä¸€ä¸ªkeyéƒ½å¯¹åº”äº†ä¸€ä¸ªvalue\n&#123;\t&quot;data&quot;: &quot;value&quot;&#125;\n\nè¿™å°±æœ‰ç‚¹ç±»ä¼¼c++ä¸­çš„mapï¼Œä¸è¿‡jsonèƒ½åšçš„æ›´å¤š\n&#123;\t&quot;data1&quot;: &quot;value&quot;,\t&quot;data2&quot;: &#123;\t\t&quot;key1&quot;:&quot;value1&quot;,\t\t&quot;key2&quot;:&quot;value2&quot;,         &quot;key3&quot;:0,         &quot;key4&quot;:true\t&#125;&#125;\n\njsonå¯ä»¥åœ¨é‡Œé¢åµŒå¥—æ·»åŠ æ›´å¤šçš„å†…å®¹ï¼Œä¸ç®¡æ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•´å½¢ï¼Œè¿˜èƒ½æ˜¯boolç±»å‹çš„true/falseï¼›\nå› ä¸ºjsonå¯¹ååºåˆ—åŒ–åºåˆ—åŒ–çš„æ§åˆ¶å¾ˆæ˜¯ä¸é”™ï¼Œå¯è¯»æ€§ä¹Ÿå¾ˆå¥½ï¼Œæ‰€ä»¥è¢«å¹¿æ³›ä½¿ç”¨ï¼\nç›¸æ¯”äºè‡ªå·±å†™ä¸€ä¸ªåºåˆ—åŒ–æ–¹å¼ï¼Œç›´æ¥ç”¨åˆ«äººçš„è½®å­ï¼Œä¹Ÿä¸é”™ğŸ‘»\nç±»ä¼¼çš„åºåˆ—åŒ–æ¡†æ¶è¿˜æœ‰xml\n2.ä»£ç ç¤ºä¾‹2.1 åºåˆ—åŒ–ç›¸æ¯”æˆ‘ä»¬è‡ªå·±å†™çš„åºåˆ—åŒ–æ–¹å¼ï¼Œjsonçš„ä½¿ç”¨ç®€å•å¤šäº†\nvoid serialize(std::string&amp; out)&#123;     //ä½¿ç”¨jsoncppçš„ä»£ç     Json::Value root;    root[&quot;x&quot;] = _x;    root[&quot;y&quot;] = _y;    root[&quot;op&quot;] = _ops;    Json::FastWriter fw; // è¿™ä¸ªæ˜¯å†™æˆä¸€è¡Œï¼Œå¯¹äºè®¡ç®—æœºæ¥è¯´å¤„ç†çš„è´Ÿæ‹…å°    // Json::StyledWriter fw; // è¿™ä¸ªä¼šè¿›è¡Œæ ¼å¼åŒ–ï¼Œæ›´å¥½çœ‹ï¼ˆä½†æ˜¯å†…å®¹æ²¡å·®è·ï¼‰    out = fw.write(root);&#125;\n\nå¯¹äºfw.write(root)ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªstringï¼Œä¹Ÿæ–¹ä¾¿æˆ‘ä»¬æ¥æ”¶\n\nå…¶ä¸­FastWriterå’ŒStyledWriteræœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œå¦‚ä¸‹\n//FastWriter&#123;&quot;data&quot;: &quot;value&quot;&#125;//StyledWriter&#123;\t&quot;data&quot;: &quot;value&quot;&#125;\n\nç®€å•æ¥è¯´ï¼ŒStyledWriterä¼šå¯¹æˆ‘ä»¬çš„kvé”®å€¼å¯¹è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ›´æ–¹ä¾¿äººç±»çš„é˜…è¯»ã€‚è€ŒFastWriteræ˜¯ç›´æ¥å†™æˆä¸€æ•´è¡Œï¼Œåœ¨ä¼ è¾“çš„æ—¶å€™ä¼šæ–¹ä¾¿ä¸€ç‚¹ï¼ˆå› ä¸ºä¸éœ€è¦\\nï¼‰\n2.2 ååºåˆ—åŒ–ååºåˆ—åŒ–éœ€è¦ä¸€ä¸ªReaderæ¥è¯»å–å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶å†…å®¹æ ¹æ®é”®å€¼éšå°„ç»™æˆå‘˜å˜é‡\nbool deserialize(const std::string &amp;in)&#123;    //json    Json::Value root;    Json::Reader rd;    rd.parse(in, root);    _x = root[&quot;x&quot;].asInt();    _y = root[&quot;y&quot;].asInt();    _ops = root[&quot;op&quot;].asInt();&#125;\n\n3.æµ‹è¯•å› ä¸ºjsoncppæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬é“¾æ¥çš„æ—¶å€™éœ€è¦åŠ ä¸Šå‘½ä»¤-ljsoncpp\ntcpServer:tcpServer.cpp\tg++ -o $@ $^ -std=c++11 -lpthread -ljsoncpp\n\nå‘é€æ¶ˆæ¯åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œjsonå¸®æˆ‘ä»¬æ ¼å¼åŒ–ä¸ºå¦‚ä¸‹å½¢å¼çš„å­—ç¬¦ä¸²\n&#123;&quot;op&quot;:43,&quot;x&quot;:1,&quot;y&quot;:200&#125;&#123;&quot;op&quot;:43,&quot;x&quot;:333,&quot;y&quot;:234&#125;\n\n\n4.gccç»™äºˆå®å®šä¹‰ä¸ºäº†æ–¹ä¾¿å¯¹åºåˆ—åŒ–é‡‡ç”¨çš„æ–¹å¼è¿›è¡Œæ§åˆ¶ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†é¢„å¤„ç†æŒ‡ä»¤ifdef/endifæ¥è¿›è¡Œåˆ¤æ–­ï¼Œåªè¦æˆ‘ä»¬åœ¨æ–‡ä»¶å¤´å®šä¹‰äº†MYPROTOCOLï¼Œè¿™é‡Œå°±ä¼šé‡‡ç”¨æˆ‘ä»¬è‡ªå·±çš„å†™çš„åºåˆ—åŒ–æ–¹å¼ï¼Œå¦åˆ™é‡‡ç”¨json\n#define MYPROTOCOL 1  //å¦‚æœdefineäº†è¿™ä¸ªï¼Œé‚£å°±ä½¿ç”¨è‡ªå·±çš„ä»£ç \n\n\n4.1 å‘½ä»¤è¡Œä½†æ˜¯åœ¨æ–‡ä»¶é‡Œé¢ä¿®æ”¹defineè¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é‡‡ç”¨gccçš„å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼ï¼Œè¿›è¡Œdefineçš„æ’å…¥ï¼ˆè¿™ä¹ˆåšä¹‹å‰ï¼Œè¦å…ˆåˆ é™¤æ–‡ä»¶ä¸­å¯¹MYPROTOCOLçš„defineï¼‰\ng++ -DMYPROTOCOL tcpServer.cpp -o tcpServer -lpthread -ljsoncppg++ -DMYPROTOCOL tcpClient.cpp -o tcpClient -lpthread -ljsoncpp\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸åŠ ç¼–è¯‘æŒ‡ä»¤ç¼–è¯‘å‡ºæ¥çš„æœåŠ¡å™¨ï¼Œé‡‡ç”¨çš„æ˜¯jsonçš„æ–¹å¼æ¥åºåˆ—åŒ–\n\næ·»åŠ äº†ä¹‹åï¼Œå°±æ˜¯ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„åºåˆ—åŒ–æ–¹å¼æ¥åºåˆ—åŒ–äº†\n\n4.2 makefileå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹makefileæ¥å®ç°è¿™ä¸€ç‚¹\n.PHONY:allall:tcpClient tcpServerMYSELF=-DMYPROTOCOLtcpClient: tcpClient.cpp\tg++ $(MYSELF) -o $@ $^ -std=c++11 -lpthread -ljsoncpptcpServer:tcpServer.cpp\tg++ $(MYSELF) -o $@ $^ -std=c++11 -lpthread -ljsoncpp.PHONY:cleanclean:\trm -f tcpClient tcpServer\n\nå½“æˆ‘ä»¬éœ€è¦ç”¨è‡ªå·±åè®®çš„æ—¶å€™ï¼Œå°±åœ¨æœ€å‰é¢åŠ ä¸Š\nMYSELF=-DMYPROTOCOL\n\nå¦åˆ™ç›´æ¥åˆ é™¤è¿™ä¸ªå®šä¹‰ï¼Œæˆ–è€…æ³¨é‡Šæ‰åé¢çš„å†…å®¹ï¼Œå°±èƒ½é‡‡ç”¨jsoncpp\nMYSELF=#-DMYPROTOCOL\n\nè¿™æ ·å°±æ–¹ä¾¿ä¸€äº›äº†\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","ç½‘ç»œ"]},{"title":"ã€ç½‘ç»œã€‘http(s)åè®® | ä»‹ç»","url":"/2023/02/15/note_Linux/34http%E5%8D%8F%E8%AE%AE/","content":"å·²ç»å­¦ä¹ è¿‡è‡ªå·±å®šåˆ¶ä¸€ä¸ªåè®®äº†ï¼Œç°åœ¨å°±æ¥çœ‹çœ‹å½“ä¸‹å¹¿æ³›ä½¿ç”¨çš„httpåè®®å§\n\n\n1.ä»‹ç»\nè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyper Text Transfer Protocolï¼ŒHTTPï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚-å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨TCPä¹‹ä¸Šã€‚å®ƒæŒ‡å®šäº†å®¢æˆ·ç«¯å¯èƒ½å‘é€ç»™æœåŠ¡å™¨ä»€ä¹ˆæ ·çš„æ¶ˆæ¯ä»¥åŠå¾—åˆ°ä»€ä¹ˆæ ·çš„å“åº”ã€‚\n\nhttpå’Œhttpsæ˜¯å½“ä¸‹æœ€é€šç”¨çš„åè®®ä¹‹ä¸€ï¼Œæˆ‘ä»¬è®¿é—®çš„å¤§éƒ¨åˆ†ç½‘é¡µç”¨çš„éƒ½æ˜¯è¿™ä¸ªåè®®ï¼›\nhttps://www.bilibili.com/\n\nè¿™ä¸¤ä¸ªåè®®ä¸»è¦çš„å·®åˆ«ï¼Œé‚£å°±æ˜¯httpæ˜¯ç”¨æ˜æ–‡ä¼ è¾“æ•°æ®çš„ï¼Œæˆ‘ä»¬çš„æ•°æ®åœ¨äº’è”ç½‘è£¸å¥”ï¼Œå¯èƒ½æœ‰å®‰å…¨é—®é¢˜ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼Œhttpsä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä½†è¿™ä¹Ÿä¸ä»£è¡¨httpsæ˜¯å®Œå…¨å®‰å…¨çš„ã€‚\n1.1 urlè¦è®¤è¯†è¿™ä¸¤ä¸ªåè®®ï¼Œæˆ‘ä»¬è¦ä»urlçš„è®¤è¯†å¼€å§‹ï¼›\nHTTP(S) ä¸å…è®¸ä½¿ç”¨ç”¨æˆ·åæˆ–å¯†ç ï¼Œä¸€ä¸ªåˆæ³•çš„ HTTP(S) URL æ ¼å¼å¦‚ä¸‹ï¼š\nhttp(s)://&lt;host&gt;:&lt;port&gt;/&lt;path&gt;?&lt;query&gt;#&lt;frag&gt;\n\n\nå¼€å¤´ä¸ºåè®®åï¼šhttp æˆ– https åè®®ï¼› \n&lt;host&gt;ï¼šä¸»æœºåã€‚ä¸€ä¸ª URL ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨åŸŸåä¹Ÿå¯ä»¥ä½¿ç”¨ IP è¡¨ç¤ºä¸»æœºåœ°å€\n&lt;port&gt;ï¼šç«¯å£ã€‚ä¸»æœºåå’Œç«¯å£ä¹‹é—´ä½¿ç”¨å†’å·åˆ†éš”ã€‚ç«¯å£æ˜¯å¯é€‰çš„ï¼Œå¦‚æœçœç•¥å°†é‡‡ç”¨é»˜è®¤ç«¯å£ï¼Œhttp é»˜è®¤ç«¯å£æ˜¯ 80ï¼Œhttps é»˜è®¤ç«¯å£ 443ï¼›\n&lt;path&gt;ï¼šèµ„æºè·¯å¾„ã€‚èµ„æºåœ¨ç½‘ç»œä¸»æœºä¸Šçš„è·¯å¾„ï¼Œè·¯å¾„ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œç¼ºçœè®¿é—®é»˜è®¤èµ„æºï¼› \n&lt;query&gt;ï¼šæŸ¥è¯¢å‚æ•°ã€‚æ ¼å¼ä¸º key&#x3D;valueï¼Œå¤šä¸ªå‚æ•°ä½¿ç”¨ &amp; åˆ†éš”ï¼›å‚æ•°ä¹Ÿæ˜¯å¯é€‰çš„ï¼› \n&lt;frag&gt;ï¼šç‰‡æ®µã€‚ä» # å¼€å§‹åˆ°æœ€åï¼Œä¸€èˆ¬ç”¨äºå®šä½åˆ°èµ„æºå†…çš„ä¸€ä¸ªç‰‡æ®µï¼Œæ¯”å¦‚æ–‡æ¡£çš„ä¸€ä¸ªç« èŠ‚ï¼›ç‰‡æ®µä¹Ÿæ˜¯å¯é€‰çš„ã€‚\n\n1.1.1 æ —å­ â‘ æ¥ä¸‹æ¥ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/#4-make-x2F-makefile\n\nå¦‚ä¸Šæ˜¯æˆ‘çš„ä¸ªäººåšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« \n\nåè®®æ˜¯https\nåŸŸåæ˜¯blog.musnow.topï¼Œå¯¹åº”çš„å°±æ˜¯&lt;host&gt;:&lt;port&gt;ï¼›è¿™é‡Œéšè—äº†ç«¯å£ï¼Œä¼šåœ¨ä¸‹é¢è¯´æ˜ã€‚\n/2022/08/07/note_linux/6gdb_g++_make_vim/è¿™ä¸€é•¿ä¸²éƒ½æ˜¯æ–‡ä»¶çš„è·¯å¾„ï¼Œå…¶æ ‡ç¤ºäº†æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šå­˜æ”¾çš„ä½ç½®\nè¿™ä¸ªurlå†…æ²¡æœ‰å¸¦&lt;query&gt;å‚æ•°\n#4-make-x2F-makefileå¯¹åº”çš„æ˜¯&lt;frag&gt;ç‰‡æ®µï¼Œæ ‡è¯†äº†æˆ‘å½“å‰æµè§ˆçš„ä½ç½®\n\nå½“ä½ æŠŠè¿™ä¸ªurlç²˜è´´é“æµè§ˆå™¨ï¼Œå…¶ä¼šç›´æ¥è·³è½¬åˆ°å¯¹åº”çš„æ ‡é¢˜ä½ç½®ï¼Œè€Œä¸æ˜¯è¿™ç¯‡æ–‡ç« çš„é¡µé¦–ï¼›è¿™å°±æ˜¯&lt;frag&gt;ç‰‡æ®µçš„ä½œç”¨\n\n1.1.2 æ —å­ â‘¡https://www.baidu.com/s?tn=68018901_39_oem_dg&amp;ie=utf-8&amp;word=test\n\nå½“æˆ‘ä»¬åœ¨ç™¾åº¦æœç´¢å•è¯testçš„æ—¶å€™ï¼Œç™¾åº¦çš„urlä¸­å°±ä¼šå‡ºç°&lt;query&gt;å‚æ•°ï¼›\nå…¶ä¸­?æ˜¯å‚æ•°çš„å¼€å¤´ï¼Œåç»­çš„ä¸€ä¸²ä»¥&amp;åˆ†éš”çš„kvé”®å€¼å¯¹ï¼Œå°±æ˜¯å‚æ•°çš„å†…å®¹ã€‚åœ¨è¿™é‡Œé¢æˆ‘ä»¬èƒ½çœ‹åˆ°word=testï¼Œæˆ‘ä»¬æŸ¥è¯¢çš„å•è¯testå°±åœ¨è¿™ä¸ªå‚æ•°åï¼›\næˆ‘ä»¬çš„æœç´¢è®¿é—®ï¼Œå°±æ˜¯å°†è¿™äº›å‚æ•°ä¼ é€ç»™æœåŠ¡å™¨ï¼Œå†ç”±ç™¾åº¦çš„æœåŠ¡å™¨è¿”å›æœç´ ç»“æœçš„ã€‚\n1.2 åŸŸåå’Œç«¯å£éšè—ä½†æˆ‘ä»¬æ—¥å¸¸è®¿é—®çš„ç½‘é¡µä¸­ï¼Œå¾ˆå°‘è§åˆ°è¿‡ip:ç«¯å£çš„å½¢å¼ï¼Œè€Œå¤§å¤šæ˜¯ç”¨åŸŸåä¸ºæˆ‘ä»¬æä¾›æœåŠ¡çš„\nhttps://www.bilibili.com/\n\nè¿™å¹¶ä¸ä»£è¡¨å…¶èƒŒåä¸éœ€è¦ç«¯å£å·ã€‚è€Œæ˜¯å› ä¸ºå¦‚æœæˆ‘ä»¬çš„è®¿é—®ä¸æŒ‡å®šç«¯å£çš„æ—¶å€™ï¼Œhttp(s)åè®®ä¼šé‡‡ç”¨é»˜è®¤ç«¯å£å·80æˆ–443ï¼Œä»è€Œå®ç°éšè—ç«¯å£å·æä¾›æœåŠ¡\n\nhttp é»˜è®¤ç«¯å£æ˜¯ 80ï¼Œhttps é»˜è®¤ç«¯å£ 443\n\næ¯•ç«Ÿå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œè®°ä½ä¸€ä¸ªåŸŸåå·²ç»ä¸å®¹æ˜“äº†ï¼Œè¿˜è¦è®°ä½ä½ çš„æœåŠ¡æ˜¯åœ¨å“ªä¸€ä¸ªç«¯å£ï¼Œé‚£å°±æ›´éš¾äº†ï¼›\nè€ŒåŸŸåä¹Ÿä¸æ˜¯å‡­ç©ºç»™æˆ‘ä»¬æä¾›æœåŠ¡çš„ï¼Œæ¯ä¸€ä¸ªåŸŸåéƒ½éœ€è¦ç»‘å®šä¸€ä¸ªå…·ä½“çš„å…¬ç½‘ipï¼ˆåŸŸåè§£æï¼‰ï¼Œæ‰èƒ½ä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚åœ¨åŸŸåçš„èƒŒåï¼Œéƒ½æ˜¯ä¸€ä¸ªipï¼Œæ¯ä¸€ä¸ªipä¹Ÿå°±æ˜¯ä¸€å°æœåŠ¡å™¨ã€‚\nåŸŸåçš„ä½œç”¨ï¼Œå°±æ˜¯æ¥éšè—æ‰ipè¿™ä¸ªæ— è§„å¾‹çš„é•¿æ•°å­—ï¼Œæ–¹ä¾¿ç”¨æˆ·è®¿é—®ï¼›\n\nä½ è§‰å¾—æ˜¯è®°ä½baidu.comå®¹æ˜“ï¼Œè¿˜æ˜¯è®°ä½114.514.77.58å®¹æ˜“å‘¢ï¼Ÿ\n\nåœ¨å‘½ä»¤è¡Œä½¿ç”¨pingå·¥å…·ï¼Œæˆ‘ä»¬èƒ½çŸ¥é“ä¸€ä¸ªç½‘ç«™æœåŠ¡å™¨çš„ipæ˜¯ä»€ä¹ˆ\nping www.bilibili.com\n\næ¯”å¦‚æˆ‘ä»¬pingä¸€ä¸‹bç«™çš„åŸŸåï¼Œå¯ä»¥çœ‹åˆ°å…¶å…¬ç½‘ipæ˜¯183.131.147.29\næ­£åœ¨ Ping a.w.bilicdn1.com [183.131.147.29] å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=10ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55183.131.147.29 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 4ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œå¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):    æœ€çŸ­ = 10msï¼Œæœ€é•¿ = 12msï¼Œå¹³å‡ = 11ms\n\n1.3 ip:ç«¯å£æˆ‘ä»¬å¯ä»¥ç”¨ip:ç«¯å£æ¥è®¿é—®è‡ªå·±çš„æœåŠ¡ï¼ˆä»¥ä¸‹ipçº¯å±è™šæ„ï¼Œå¦‚æœ‰æ’è½¦ï¼Œçº¯å±å·§åˆï¼‰\n114.514.77.58:8080\n\nå½“æˆ‘ä»¬æŠŠè¿™ä¸ªç²˜è´´é“æµè§ˆå™¨ï¼Œå†å¤åˆ¶ç²˜è´´å‡ºæ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°å‰é¢å¤šäº†ä¸€ä¸ªhttp\nhttp://114.514.77.58:8080\n\nè¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨ipè®¿é—®ä¸€ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤é‡‡ç”¨httpçš„åè®®å»è®¿é—®ï¼Œæ‰€ä»¥åœ¨å‰é¢åŠ äº†ä¸€ä¸ªæˆ‘ä»¬çœ‹ä¸åˆ°çš„http://\n1.4 åè®®ä½œç”¨httpåè®®çš„ä½œç”¨ï¼Œå°±æ˜¯å‘æœåŠ¡å™¨ç”³è¯·ç‰¹å®šçš„èµ„æºï¼Œå†å°†èµ„æºæ‹‰å–åˆ°æœ¬åœ°è¿›è¡Œå±•ç¤ºorä½¿ç”¨ã€‚\nèµ„æºéƒ½æ˜¯å­˜åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šçš„ï¼Œå½“ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å¿…é¡»è¦çŸ¥é“èµ„æºçš„è·¯å¾„ï¼Œå°†å…¶readæ‰“å¼€è¯»å–ï¼Œå†writeå†™ç»™æˆ‘ä»¬çš„å®¢æˆ·ç«¯ã€‚\n/2022/08/07/note_linux/6gdb_g++_make_vim/\n\næ‰€ä»¥httpçš„è¯·æ±‚ä¸­æ‰ä¼šå¸¦ä¸Šèµ„æºçš„è·¯å¾„ï¼Œè¿™æ˜¯æ–¹ä¾¿æœåŠ¡å™¨è¿›è¡Œèµ„æºæ–‡ä»¶çš„è¯»å–ï¼›åŒæ—¶ï¼Œæ–‡ä»¶çš„è·¯å¾„ä¹Ÿæ˜¯å¯¹ä¸€ä¸ªæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œåœ¨å‘Šè¯‰æœåŠ¡å™¨æ–‡ä»¶è·¯å¾„çš„åŒæ—¶ï¼Œä¹Ÿä¿è¯äº†æˆ‘ä»¬è¯·æ±‚çš„æ–‡ä»¶çš„å”¯ä¸€æ€§ï¼Œä¸ä¼šå‡ºç°äºŒä¹‰æ€§ï¼›\n\nè¿™æ—¶å€™åˆä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬è®¿é—®ç½‘ç«™çš„æ ¹ç›®å½•çš„æ—¶å€™ï¼Œæ²¡æœ‰æä¾›æ–‡ä»¶çš„è·¯å¾„å‘€ï¼Œé‚£è¿™æ—¶å€™ï¼Œè®¿é—®çš„ä»€ä¹ˆæ–‡ä»¶å‘¢ï¼Ÿ\nhttps://www.baidu.com/\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬è®¿é—®çš„æ˜¯æœåŠ¡å™¨æ ¹ç›®å½•çš„index.htmlæ–‡ä»¶\nhttps://www.baidu.com/https://www.baidu.com/index.html\n\nä½ å¯ä»¥è¯•ç€æ‰“å¼€è¿™ä¸¤ä¸ªé“¾æ¥ï¼Œå…¶å‡ºç°çš„é¡µé¢æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼›\n\nç±»ä¼¼äºç«¯å£å·éšè—ï¼Œhttpåè®®ä¹Ÿç¡®å®šäº†å½“ä¸‹ä½¿ç”¨çš„ç½‘é¡µæ–‡ä»¶çš„å‘½åä¸ºindex.htmlï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤è®¿é—®æ ¹ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶ï¼ˆæ—¢ç„¶æ˜¯é»˜è®¤çš„ï¼Œé‚£å°±å¯ä»¥ç›´æ¥éšè—ï¼‰å¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£å°±ä¸ä¼šæ¸²æŸ“å‡ºæˆ‘ä»¬çœ‹åˆ°çš„ç½‘é¡µï¼\nindex.htmlæ˜¯ç”¨å‰ç«¯è¯­è¨€ç¼–å†™çš„ç½‘é¡µä»£ç \n\nåŒç†ï¼Œå½“æˆ‘ä»¬è®¿é—®åšå®¢çš„æ—¶å€™ï¼Œè¯»å–é“çš„ä¹Ÿä¸æ˜¯ç›®å½•ï¼Œè€Œæ˜¯ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/\n\n\næˆ‘çš„åšå®¢ä½¿ç”¨çš„æ˜¯hexoæ¡†æ¶ï¼Œå…¶ç½‘é¡µçš„æºè·¯å¾„åœ¨githubä¸Šå¼€æºäº†ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£urlä¸­çš„æ–‡ä»¶è·¯å¾„ã€‚\nå½“å‰ä½ çœ‹åˆ°çš„æ–‡ä»¶ç›®å½•ï¼Œå°±æ˜¯åšå®¢æœåŠ¡çš„æ ¹ç›®å½•ã€‚è®¿é—®çš„åšå®¢é¦–é¡µï¼Œå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„index.html\n\nç”¨ä½œç¤ºä¾‹çš„linuxå·¥å…·ä½¿ç”¨åšå®¢ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®ƒçš„è·¯å¾„ï¼Œæ‰¾åˆ°index.htmlæ–‡ä»¶\n/2022/08/07/note_linux/6gdb_g++_make_vim/\n\n\nè¿™ä¾¿æ˜¯httpåè®®urlä¸­æ–‡ä»¶è·¯å¾„çš„ä½œç”¨ï¼\nè¿™é‡Œçš„/æ ¹ç›®å½•æ˜¯æœåŠ¡ç«¯è®¾ç½®çš„ï¼Œå¹¶ä¸ä¸€å®šæ˜¯ï¼ˆå¤§æ¦‚ç‡ä¸æ˜¯ï¼‰æœåŠ¡ç«¯linuxæœåŠ¡å™¨çš„æ ¹ç›®å½•\n1.5 ç¼–ç è§£ç åœ¨urlä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›ç‰¹æ®Šå­—ç¬¦è¿›è¡Œç¼–è§£ç ï¼Œæ¯”å¦‚ä¸­æ–‡ï¼Œå’Œä¸€äº›ç‰¹æ®Šçš„ç¬¦å·\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/#4-make-x2F-makefile\n\næ¯”å¦‚åœ¨ä½œä¸ºç¤ºä¾‹çš„urlä¸­ï¼Œè¿™é‡Œå‡ºç°äº†x2Fï¼Œè€ŒåŸæ–‡ä¸­æ˜¯4.make/makefile;è¿™é‡Œçš„ç¼–ç å°±æ˜¯ä¸ºäº†é¿å…make/makefileè¢«è¯†åˆ«æˆè·¯å¾„çš„æ ‡è¯†ç¬¦ï¼Œä»è€Œå‡ºç°é”™è¯¯ã€‚\nhttps://www.baidu.com/s?tn=68018901_39_oem_dg&amp;ie=utf-8&amp;word=%E4%BD%A0%E5%A5%BD\n\nå½“urlè·¯å¾„ä¸­æœ‰ä¸­æ–‡çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¢«è½¬ç æˆç‰¹å®šçš„æ ¼å¼\n\næˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°çš„ä¾æ—§æ˜¯ä¸­æ–‡ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨è¿™æ®µå¸®æˆ‘ä»¬è¿›è¡Œäº†è§£ç \n\nå°†éœ€è¦è½¬ç çš„å­—ç¬¦è½¬ä¸º16è¿›åˆ¶ï¼Œç„¶åä»å³åˆ°å·¦ï¼Œå–4ä½(ä¸è¶³4ä½ç›´æ¥å¤„ç†)ï¼Œæ¯2ä½åšä¸€ä½ï¼Œå‰é¢åŠ ä¸Š%ï¼Œç¼–ç æˆ%XYæ ¼å¼\n\n2.httpåè®®è¯·æ±‚æ ¼å¼äº†è§£äº†httpåè®®ä¸­çš„urlç½‘å€ï¼Œç°åœ¨å°±å¯ä»¥è¿›ä¸€æ­¥äº†è§£httpåè®®çš„æŠ¥å¤´å’ŒæŠ¥æ–‡äº†;\nä¸€ä¸ªhttp request/responseçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹\n\nåœ¨è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šæä¾›è‡ªå·±çš„è¯·æ±‚æ–¹æ³•ï¼ˆGET&#x2F;POST&#x2F;PUTç­‰ç­‰ï¼‰ï¼Œå¹¶æä¾›urlæ¥æ ‡è¯†è‡ªå·±éœ€è¦çš„æ–‡ä»¶è·¯å¾„ï¼›è¿™ä¸ªurlå¯èƒ½æ˜¯çŸ­é“¾æ¥ï¼ˆæˆªå–æ ¹ç›®å½•ä¹‹åçš„éƒ¨åˆ†ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å®Œæ•´çš„é“¾æ¥ã€‚\néšåï¼Œå°±ä¼šè·Ÿä¸Šä¸€å¤§å †çš„è¯·æ±‚å‚æ•°ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„è¯·æ±‚å‚æ•°å¹¶ä¸æ˜¯urlä¸­çš„&lt;query&gt;å‚æ•°ï¼Œè€Œæ˜¯httpåè®®è‡ªèº«çš„è¯·æ±‚å‚æ•°ã€‚æ¯ä¸€ä¸ªè¯·æ±‚å‚æ•°éƒ½ç”¨äº†\\r\\nä½œä¸ºåˆ†éš”ï¼Œè¿™å’Œæˆ‘ä»¬å†™çš„è‡ªå®šä¹‰åè®®ä¸­é‡‡ç”¨\\tè¿›è¡Œåˆ†å‰²æ˜¯ç›¸åŒçš„åŸç†ï¼\nè¿™å‡ ä¸ªéƒ¨åˆ†ä¸­ï¼Œè¯·æ±‚çš„æ­£æ–‡å¯ä»¥ä¸å¸¦ï¼ˆä¸ºç©ºï¼‰\n2.1 è¯»å–å¤šé•¿ï¼Ÿä¸ºäº†è®©åè®®è¯»å–çš„æ—¶å€™ï¼Œèƒ½å¤ŸçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯»å–å®Œæ¯•äº†æŠ¥å¤´ï¼Œhttpåè®®æä¾›äº†ä¸€ä¸ª\\r\\nçš„ç©ºè¡Œï¼Œè¯»å–é“è¿™ä¸ªç©ºè¡Œï¼Œå°±ä»£è¡¨æŠ¥å¤´è¯»å–å®Œæ¯•äº†ï¼Œå‰©ä¸‹çš„å†…å®¹éƒ½æ˜¯æŠ¥æ–‡ã€‚\nè€Œä¸ºäº†æ ‡è¯†æŠ¥æ–‡çš„é•¿åº¦ï¼Œhttpåè®®ä¼šåœ¨å‘é€çš„æ—¶å€™æä¾›ä¸€ä¸ªå‚æ•°content-lengthï¼Œç”¨äºæ ‡è¯†æŠ¥æ–‡çš„é•¿åº¦ã€‚åœ¨è¯»å–å®Œæ¯•æŠ¥å¤´åï¼Œè‚¯å®šæ˜¯è¯»å–åˆ°äº†è¿™ä¸ªcontent-lengthå‚æ•°çš„ï¼Œä¹Ÿå°±çŸ¥é“åç»­åº”è¯¥ç»§ç»­è¯»å–å¤šé•¿ï¼Œæ‰èƒ½è¯»å®Œæ•´ä¸ªåè®®å­—æ®µï¼\nå…³äºè¿™éƒ¨åˆ†çš„ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹å¦å¤–ä¸€ç¯‡åšå®¢ httpåè®®content-lengthè¯¦è§£\n2.2 å“åº”çš„çŠ¶æ€ç å’Œæˆ‘ä»¬è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¸€æ ·ï¼Œhttpä¹Ÿè¡¨æ˜äº†ä¸€éƒ¨åˆ†å“åº”çš„çŠ¶æ€ç ï¼Œå…¶ä¸­æˆ‘ä»¬æ—¥å¸¸æœ€å¸¸è§åˆ°çš„ï¼Œæ˜¯404/403è¿™ä¸¤ä¸ªçŠ¶æ€ç \n\nhttpçŠ¶æ€ç -ç™¾åº¦ç™¾ç§‘\n\nçŠ¶æ€ç å°±æ˜¯æ ‡è¯†æœåŠ¡å™¨æä¾›çš„æœåŠ¡çŠ¶æ€ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å®ƒçš„è¯·æ±‚æ˜¯å¦æˆåŠŸäº†ã€‚å¦‚æœçŠ¶æ€ç æ˜¯200ï¼Œä»£è¡¨è¯·æ±‚æ˜¯æˆåŠŸçš„ã€‚å…¶ä½™çŠ¶æ€ç ä¼šæœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚404çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæ‰€ä»¥æ‰å« 404 not found!\n3.å®ä¾‹å®Œæ•´ä»£ç è¯¦è§ Gitee\n3.1 å‰ç«¯é¡µé¢ç”±äºæœ¬äººå¹¶æ²¡æœ‰å­¦ä¹ è¿‡å‰ç«¯è¯­æ³•ï¼Œè¿™é‡Œé‡‡ç”¨ èœé¸Ÿæ•™ç¨‹ æä¾›çš„å‰ç«¯ç¤ºä¾‹ä»£ç æ¥æ¼”ç¤º\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹(runoob.com)&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;&lt;p&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\n\næˆ‘ä»¬æ—¥å¸¸æ‰€è®¿é—®çš„ç½‘é¡µéƒ½æ˜¯è¿™æ ·çš„ä»£ç ï¼Œç»ç”±æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ï¼Œå†å±•ç¤ºå‡ºæ¥\n3.2 æœåŠ¡ç«¯ä»£ç ç”±äºhttpæ˜¯åŸºäºtcpçš„ï¼Œè¿™é‡Œç›´æ¥æŠŠä¹‹å‰å†™çš„tcpServeræ¬è¿‡æ¥å°±èƒ½ç”¨ï¼å…·ä½“çš„ä»£ç è§£æè¯·çœ‹æ³¨é‡Šï¼Œæƒ³å¿…è¯´çš„æ˜¯å¾ˆæ¸…æ¥šçš„\n#define CRLF &quot;\\r\\n&quot;#define CRLF_LEN strlen(CRLF)#define SPACE &quot; &quot;#define SPACE_LEN strlen(SPACE)#define HOME_PAGE &quot;index.html&quot; // é¦–é¡µæ–‡ä»¶#define ROOT_PATH &quot;web&quot; // ç½‘å€æ ¹ç›®å½•åœ°å€// è·å–httpè¯·æ±‚ä¸­çš„è·¯å¾„string getPath(string http_request)&#123;    size_t pos = http_request.find(CRLF);//æ‰¾åˆ°ç¬¬ä¸€è¡Œçš„åˆ†éš”ç¬¦    if(pos == string::npos)         return &quot;&quot;;    string request_line = http_request.substr(0, pos);//å–å‡ºç¬¬ä¸€è¡Œ    //è¯·æ±‚çš„ç¬¬ä¸€è¡Œï¼šGET /a/b/c http/1.0    size_t first = request_line.find(SPACE);// æ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼    if(pos == string::npos)         return &quot;&quot;;    size_t second = request_line.rfind(SPACE); // ä»åå¾€å‰æ‰¾ç©ºæ ¼    if(pos == string::npos)         return &quot;&quot;;    // æ‰¾åˆ°ä¸¤ä¸ªç©ºæ ¼äº†ï¼Œä¸¤ä¸ªç©ºæ ¼ä¹‹é—´çš„å°±æ˜¯è¯·æ±‚çš„è·¯å¾„    string path = request_line.substr(first+SPACE_LEN, second - (first+SPACE_LEN));    if(path.size() == 1 &amp;&amp; path[0] == &#x27;/&#x27;) &#123;        path += HOME_PAGE; //å†åŠ ä¸Šè¢«éšè—çš„index.htmlæ–‡ä»¶å    &#125;    return path;&#125;// è¯»å–æ–‡ä»¶string readFile(const string &amp;recource)&#123;    ifstream in(recource, ios::binary);    if(!in.is_open()) //æ–‡ä»¶æ‰“å¼€å¤±è´¥    &#123;        return &quot;404&quot;;    &#125;    // å†…å®¹    string content;    string line;    while(getline(in, line))    &#123;        content += line;    &#125;    in.close();    return content;&#125;void handlerHttpRequest(int sock)&#123;    cout &lt;&lt; &quot;###########start#############&quot; &lt;&lt; endl;//æ‰“å°ä¸€ä¸ªåˆ†éš”çº¿    char buffer[10240];    ssize_t s = read(sock, buffer, sizeof(buffer));    if(s &gt; 0)&#123;        cout &lt;&lt; buffer &lt;&lt; endl;        cout &lt;&lt; &quot;###########end############&quot; &lt;&lt; endl;    &#125;    string path = getPath(buffer);    // å‡è®¾ç”¨æˆ·è¯·æ±‚çš„æ˜¯ /a/b è·¯å¾„    // é‚£ä¹ˆæœåŠ¡ç«¯å¤„ç†çš„æ—¶å€™ï¼Œå°±éœ€è¦æ·»åŠ æ ¹ç›®å½•ä½ç½®å’Œé»˜è®¤çš„æ–‡ä»¶å    // &lt;root&gt;/a/b/index.html    // åœ¨æœ¬æ¬¡ç”¨ä¾‹ä¸­ï¼Œæ ¹ç›®å½•ä¸º ./webæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å®Œæ•´çš„æ–‡ä»¶è·¯å¾„åº”è¯¥æ˜¯    // ./web/a/b/index.html    string resources = ROOT_PATH; // æ ¹ç›®å½•è·¯å¾„    resources += path; // æ–‡ä»¶è·¯å¾„    logging(DEBUG,&quot;[sockfd: %d] filePath: %s&quot;,sock,resources.c_str()); // æ‰“å°ç”¨ä½œdebug    string html = readFile(resources);// æ‰“å¼€æ–‡ä»¶    // å¼€å§‹å“åº”    string response = &quot;HTTP/1.0 200 OK\\r\\n&quot;;    //å¦‚æœreadFileè¿”å›çš„æ˜¯404ï¼Œä»£è¡¨æ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨    if(strcmp(html.c_str(),&quot;404&quot;)==0)    &#123;        response = &quot;HTTP/1.0 404 NOT FOUND\\r\\n&quot;;    &#125;    // è¿½åŠ åç»­å­—æ®µ    response += &quot;Content-Type: text/html\\r\\n&quot;;    response += (&quot;Content-Length: &quot; + to_string(html.size()) + &quot;\\r\\n&quot;);    response += &quot;\\r\\n&quot;;    response += html;    // å‘é€ç»™ç”¨æˆ·    send(sock, response.c_str(), response.size(), 0);&#125;\n\n3.3 æµ‹è¯•å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰ï¼Œè¯·å…ˆæ‰“å¼€ä½ çš„äº‘æœåŠ¡å™¨é˜²ç«å¢™ä¸­çš„å¯¹åº”ç«¯å£ï¼›è¿™é‡Œæˆ‘ç»‘å®šçš„æ˜¯ç«¯å£10000ï¼Œåœ¨æµè§ˆå™¨ä¸­ç”¨ip:ç«¯å£çš„æ–¹å¼å¯ä»¥æ­£å¸¸è®¿é—®ï¼\n\nè¿™é‡Œæ ‡è¯†çš„ä¸å®‰å…¨æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰é‡‡ç”¨å¸¦åŠ å¯†çš„httpsåè®®ï¼Œè¿™ä¸æ˜¯å½“ä¸‹éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚ä¸ç®¡ä»–å°±å¯ä»¥äº†ã€‚\næŒ‰F12æ‰“å¼€å¼€å‘è€…é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹æ–¹å‡ºç°äº†å®Œæ•´çš„htmlä»£ç ï¼Œæˆ‘ä»¬æˆåŠŸæä¾›äº†æœåŠ¡ï¼\n\n3.4 åç«¯æ‰“å°çš„æŠ¥æ–‡åœ¨æœåŠ¡å™¨åç«¯ï¼Œæˆ‘ä»¬çœ‹åˆ°å…¶æ‰“å°å‡ºæ¥äº†ä¸€ä¸ªåŸºæœ¬çš„httpè¯·æ±‚ï¼Œå’Œä¸Šé¢è¯´æ˜çš„æ ¼å¼æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œç®€å•çš„è¿›è¡Œä¸€éƒ¨åˆ†è¯´æ˜ï¼š\n\nGETï¼šè¯·æ±‚æ–¹å¼ä¸ºè·å–æ•°æ®\n/ï¼šè¯·æ±‚çš„æ˜¯æ ¹è·¯å¾„\nHTTP/1.1ï¼šä½¿ç”¨çš„httpåè®®ç‰ˆæœ¬\nConnetionï¼šä»£è¡¨æˆ‘ä»¬å’ŒæœåŠ¡å™¨çš„é“¾æ¥æ–¹å¼ï¼Œkeep-aliveä»£è¡¨ä¿æŒè¿æ¥\nUser-Agentï¼šå®¢æˆ·ç«¯ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯windowsç³»ç»Ÿã€Chromeå†…æ ¸çš„æµè§ˆå™¨ï¼ˆæˆ‘æ˜¯ç”¨çš„æ˜¯edgeæµè§ˆå™¨ï¼‰\nAccept: æ”¯æŒæ¥æ”¶çš„ä¿¡æ¯ç±»å‹\nAceept-Encoding: å¯¹ä¿¡æ¯è¿›è¡Œå‹ç¼©\nAccept-Languageï¼šæ”¯æŒçš„è¯­è¨€\nCookieï¼šèº«ä»½ä¿¡æ¯ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»\n\nå…¶ä¸­å‡ºç°äº†ä¸€ä¸ªç©ºè¡Œï¼Œä»£è¡¨æŠ¥æ–‡ç»“æŸï¼›\n\nå¾€ä¸‹æ»‘ï¼Œä¼šå‘ç°æµè§ˆå™¨è¿˜å‘å‡ºäº†ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œè·¯å¾„æ˜¯/favicon.icoï¼Œè¿™æ˜¯é»˜è®¤çš„ç«™ç‚¹å¤´åƒæ–‡ä»¶çš„å‘½åã€‚å› ä¸ºæˆ‘ä»¬çš„htmlæ–‡ä»¶ä¸­æ²¡æœ‰å†™æ˜ç«™ç‚¹å¤´åƒçš„è·¯å¾„ï¼Œæ‰€ä»¥æµè§ˆå™¨å°±å°è¯•è¯·æ±‚é»˜è®¤çš„å¤´åƒæ–‡ä»¶\nä½†æ˜¯ï¼Œå½“å‰æˆ‘ä»¬çš„ç«™ç‚¹æ ¹ç›®å½•webä¸‹å¹¶æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œåº”è¯¥è¿”å›ä¸€ä¸ª404çŠ¶æ€ç ã€‚\n\nè¯·æ±‚ä¸­å‡ºç°äº†ä¸€ä¸ªæ–°çš„å‚æ•°Refererï¼Œä»£è¡¨æ˜¯ä»å½“å‰ç½‘é¡µè¯·æ±‚å¤´åƒçš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¯·æ±‚ç½‘é¡µçš„æŠ¥æ–‡ä¸­æ²¡æœ‰Refererå‚æ•°\n\n\næ­¤æ—¶å¯ä»¥éšä¾¿æ‰¾ä¸ªå›¾ç‰‡åšå¤´åƒï¼Œçœ‹çœ‹èƒ½ä¸èƒ½åŠ è½½å‡ºæ¥ï¼›ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘éšä¾¿æ‰¾äº†ä¸€å¼ çº¯ç»¿è‰²çš„å›¾ç‰‡ï¼Œå¹¶å°†å…¶åœ¨çº¿è½¬æ¢ä¸ºicoï¼Œæ”¾å…¥äº†ç«™ç‚¹çš„æ ¹ç›®å½•ã€‚\né‡å¯æœåŠ¡å™¨è¿›ç¨‹ï¼Œåˆ·æ–°æµè§ˆå™¨å†æ¬¡è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸå‡ºç°äº†ç«™ç‚¹çš„å¤´åƒï¼›\n\n3.5 å¸¸è§å‚æ•°è¡¨\n4.è¯·æ±‚æ–¹æ³•ä¸€èˆ¬æˆ‘ä»¬è·å–ä¸€ä¸ªç½‘é¡µï¼Œç”¨çš„éƒ½æ˜¯GETæ–¹æ³•ã€‚æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªå¸¦æŒ‰é’®çš„è¡¨å•åˆ›å»ºè¯·æ±‚ï¼Œå°è¯•å‘æœåŠ¡ç«¯å‘é€&lt;query&gt;å‚æ•°\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹(runoob.com)&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;&lt;p&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;&lt;form action=&quot;/a/index.html&quot; method=&quot;get&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\n\n4.1 GETåœ¨methodé‡Œé¢ï¼Œæˆ‘ä»¬æŒ‡å®šäº†getæ–¹æ³•ï¼Œæ­¤æ—¶\n&lt;form action=&quot;/a/index.html&quot; method=&quot;get&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;\n\næ­¤æ—¶é¡µé¢ä¸­å‡ºç°äº†ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä¾›æˆ‘ä»¬è¾“å…¥å¯†ç ï¼Œä¸”å¯†ç ä¼šæ˜¾ç¤ºä¸º****è€Œä¸æ˜¯æ˜æ–‡\n\nç‚¹å‡»æŒ‰é’®ï¼Œä¼šè·³è½¬åˆ°ä¸€ä¸ª404é¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„a/index.htmlè·¯å¾„å¹¶ä¸æ”¯æŒå‚æ•°è¯·æ±‚ï¼Œæ‰€ä»¥å‘é€äº†404é”™è¯¯ç \n\nä¸è¿‡è¿™ä¸é‡è¦ï¼Œæˆ‘ä»¬çœ‹çœ‹åç«¯æ‰“å°çš„å†…å®¹ã€‚å…¶ä¸­å‚æ•°æ˜¯è¿½åŠ åˆ°urlä¸­ï¼Œä»¥æ˜æ–‡ä¼ è¾“è¿‡æ¥çš„ï¼›æ­£æ–‡éƒ¨åˆ†ä¸ºç©ºï¼Œå¹¶æ²¡æœ‰æºå¸¦å‚æ•°\n\n4.2 POSTå°†è¯·æ±‚æ–¹æ³•æ”¹æˆpostï¼Œå†æ¬¡å°è¯•\n&lt;form action=&quot;/a/index.html&quot; method=&quot;post&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;\n\nè¿™æ—¶å€™èƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºa/index.htmlé¡µé¢ï¼Œurlä¸­ä¸å†å¸¦æœ‰å‚æ•°\n\næ­¤æ—¶æŸ¥çœ‹åç«¯ä¸­çš„ä¿¡æ¯ï¼Œèƒ½çœ‹åˆ°è¯·æ±‚æ–¹æ³•å˜ä¸ºPOSTï¼Œå‚æ•°å‡ºç°åœ¨äº†æ­£æ–‡éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯urlä¸­\n\n4.3 GET&#x2F;POSTåŒºåˆ«è¿™ä¹Ÿæ˜¯GETå’ŒPOSTæ–¹æ³•çš„åŒºåˆ«ä¹‹ä¸€ï¼š\n\nGETæ–¹æ³•é€šè¿‡urlä¼ å‚\nPOSTæ–¹æ³•ä¼šå°†urlå‚æ•°æå–å‡ºæ¥ï¼Œæ‹¼æ¥åˆ°æ­£æ–‡éƒ¨åˆ†\n\nç”±æ­¤èƒ½æ¨å‡ºäºŒè€…çš„å®‰å…¨æ€§åŒºåˆ«\n\nGETæ–¹æ³•ç›¸å¯¹ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥ä»¥æ˜æ–‡è´´åœ¨äº†urlä¸Š\nPOSTæ–¹æ³•ä»¥æ­£æ–‡ä¼ å‚ï¼Œä½¿ç”¨httpsåè®®çš„æ—¶å€™èƒ½è¿›è¡ŒåŠ å¯†ï¼Œç›¸å¯¹è¾ƒå®‰å…¨\n\n4.4 æ›´å¤šæ–¹æ³•httpè¯·æ±‚è¿˜æ”¯æŒæ›´å¤šæ–¹æ³•ï¼Œå¦‚ä¸‹\n\n5.çŠ¶æ€ç 5.1 çŠ¶æ€ç è¡¨ä¸‹é¢æ˜¯ä¸€ä¸ªå“åº”çŠ¶æ€ç çš„æ€»è¡¨\n\n5.2 404&#x2F;403çŠ¶æ€ç æˆ‘ä»¬èƒ½çœ‹åˆ°404å’Œ403éƒ½æ˜¯å®¢æˆ·ç«¯çŠ¶æ€ç ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯å®¢æˆ·ç«¯é”™è¯¯å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä½ å‘æœåŠ¡å™¨è¯·æ±‚äº†ä¸€ä¸ªæœåŠ¡å™¨æ²¡æœ‰çš„èµ„æºï¼Œè¿™ä¸ªé—®é¢˜ä¸åº”è¯¥æ˜¯æœåŠ¡å™¨çš„é—®é¢˜ã€‚\nè¿™å°±å¥½æ¯”ä½ å»è¥¿ç“œæ‘Šä¹°è‚‰ï¼Œäººå®¶å‹æ ¹ä¸å–è‚‰ã€‚é—®é¢˜å‡ºåœ¨ä½ èº«ä¸Šï¼Œä½ ä¸åº”è¯¥æ‰¾è¥¿ç“œæ‘Šè€æ¿ä¹°è‚‰ã€‚æ‰€ä»¥404çŠ¶æ€ç ï¼Œåº”è¯¥æ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜ï¼\nè€Œ403çŠ¶æ€ç çš„å«ä¹‰æ˜¯403 forbiddenï¼ŒæœåŠ¡å™¨æ‹’ç»äº†ä½ çš„è¯·æ±‚ï¼ˆä½ æ²¡æœ‰æƒé™è®¿é—®ï¼‰è¿™ä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜ã€‚ä½ ä¸èƒ½å»è¶…å¸‚ä¹°ä¸œè¥¿ï¼Œç„¶åé—®è€æ¿èƒ½ä¸èƒ½è®©ä½ çœ‹çœ‹è€æ¿çš„é’±ç½å­ã€‚è€æ¿è‚¯å®šä¸ç»™ä½ çœ‹å•Šï¼æ‰€ä»¥æ‰ä¼šå‘Šè¯‰ä½ 403ï¼Œä¸ç»™ä½ è®¿é—®ã€‚\n5.3 5xxçŠ¶æ€ç ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°æœåŠ¡å™¨é”™è¯¯çš„5xxçŠ¶æ€ç å‘¢ï¼Ÿ\nå½“ä½ è¯·æ±‚ä¸€ä¸ªæœåŠ¡ï¼ŒæœåŠ¡ç«¯éœ€è¦å¤„ç†ä¹‹åç»™ä½ è¿”å›ç»“æœã€‚æ­¤æ—¶æœåŠ¡å™¨åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å› ä¸ºç¨‹åºæœ‰bugæå‰é€€å‡ºï¼Œè¿™æ—¶å€™å°±åº”è¯¥ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª5xxçŠ¶æ€ç ï¼Œæ ‡è¯†æœåŠ¡å™¨åœ¨å¤„ç†ä½ çš„è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†é”™è¯¯ï¼Œæ— æ³•è¿”å›ç»“æœã€‚\n5.4 301&#x2F;302é‡å®šå‘å…³äº3å¼€å¤´çš„çŠ¶æ€ç ï¼Œä¸»è¦è°ˆè°ˆä¸‹é¢è¿™ä¸¤ä¸ª\n301 æ°¸ä¹…é‡å®šå‘302 ä¸´æ—¶é‡å®šå‘\n\nä¸ºä½•ä¸€ä¸ªæ˜¯æ°¸ä¹…ï¼Œä¸€ä¸ªæ˜¯ä¸´æ—¶å‘¢ï¼Ÿ\nåœ¨httpè¿›è¡Œå“åº”çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯å¯ä»¥å‘é€ä¸€ä¸ªlocationå‚æ•°ï¼Œå‘é€ä¸€ä¸ªæ–°çš„urlç»™å®¢æˆ·ç«¯ï¼›æˆ‘ä»¬çš„æµè§ˆå™¨åœ¨æ”¶åˆ°è¿™ä¸ªå‚æ•°åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€å¯¹åº”çš„é¡µé¢\nLocation: https://www.baidu.com/\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸Šé¢çš„ä»£ç æ¥æµ‹è¯•ä¸€ä¸‹\n// å°è¯•è¿›è¡Œ302é‡å®šå‘string response = &quot;HTTP/1.1 302 Temporarily moved\\r\\n&quot;;response+= &quot;Location: https://www.baidu.com/\\r\\n&quot;;response+= &quot;\\r\\n&quot;;// å‘é€ç»™ç”¨æˆ·send(sock, response.c_str(), response.size(), 0);\n\næ­¤æ—¶è®¿é—®æˆ‘ä»¬è‡ªå·±çš„IP:ç«¯å£ï¼Œä¼šè·³è½¬åˆ°ç™¾åº¦çš„é¡µé¢ã€‚è¿™å°±æ˜¯é‡å®šå‘çš„ä½œç”¨\n\n\né‚£ä¸´æ—¶é‡å®šå‘å’Œæ°¸ä¹…é‡å®šå‘æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?\n\nå‡å¦‚æˆ‘è®¾ç«‹äº†ä¸€ä¸ªå…¬å¼€ç«™ç‚¹ï¼ŒåŸŸåæ˜¯test.comï¼Œè¿™å‡ å¹´ä¸€ç›´æä¾›æœåŠ¡ï¼Œç§¯ç´¯äº†ä¸€éƒ¨åˆ†çš„ç”¨æˆ·ã€‚è¿‡äº†ä¸€ä¼šï¼Œæˆ‘ä¸æƒ³è¦è¿™ä¸ªåŸŸåäº†ï¼Œæƒ³æ¢ä¸€ä¸ªtest.cnï¼›å¯ç”¨æˆ·å·²ç»æœ‰é‚£ä¹ˆå¤šï¼Œå¤§å®¶éƒ½åªè®°å¾—ä½ çš„test.comï¼Œå¦‚æœç›´æ¥æ›´æ¢åŸŸåï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•è®¿é—®test.comï¼Œä»¥ä¸ºä½ è·‘è·¯äº†ï¼Œå°±æ”¾å¼ƒä½¿ç”¨ä½ çš„ç½‘é¡µã€‚\nè¿™æ ·çš„ç»“æœæ˜¾è€Œæ˜“è§ï¼šä¸¥é‡çš„å®¢æˆ·æµå¤±ï¼\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¯ä»¥å…ˆå°†æœåŠ¡è¿ç§»åˆ°test.cnæ–°åŸŸåï¼Œåœ¨æ—§åŸŸåtest.comä¸­è®¾ç½®ä¸€ä¸ª301é‡å®šå‘åˆ°test.cnï¼Œå‘Šè¯‰ç”¨æˆ·æˆ‘æ¢æ–°åŸŸåäº†ã€‚è¿™æ ·æŒç»­ä¸€æ®µæ—¶é—´åï¼Œç­‰åˆ°test.comçš„ä½¿ç”¨è€…ä¸å¤šäº†ï¼Œå°±å¯ä»¥è€ƒè™‘å½»åº•å–æ¶ˆtest.comçš„è§£æï¼Œå…³åœæ­¤åŸŸåäº†ã€‚\nåœ¨ä¸Šé¢çš„åœºæ™¯ä¸­ï¼Œæˆ‘æ˜¯éœ€è¦æ›´æ¢åŸŸåï¼Œæ˜¯æ°¸ä¹…æ›´æ¢ã€‚æˆ‘ä»¬å°±åº”è¯¥æŠŠçŠ¶æ€ç è®¾ç½®ä¸º301ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¿™ä¸ªåŸŸåå°†è¢«æ°¸ä¹…é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªåŸŸåä¸Š\n\nå¦å¤–çš„æƒ…å†µæ˜¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªexample.comåŸŸåï¼Œæˆ‘çš„æœåŠ¡éœ€è¦è¿›è¡Œç»´æŠ¤ï¼›æ­¤æ—¶å°±å°†example.comé‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªåŸŸåexample.cnï¼ŒæŒ‡å‘å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè®©è¿™ä¸ªæœåŠ¡å™¨ä¸´æ—¶æä¾›æœåŠ¡ã€‚\næœåŠ¡ç»´æŠ¤å®Œæ¯•åï¼Œå°±å°†é‡å®šå‘å–æ¶ˆï¼Œç»§ç»­ä½¿ç”¨å½“å‰çš„æœåŠ¡å™¨ã€‚\nè¿™ä¸ªåœºæ™¯ä¸­ï¼Œé‡å®šå‘åªæ˜¯ç»´æŠ¤æœŸé—´çš„ä¸€ä¸ªä¸´æ—¶ç­–ç•¥ï¼Œæ‰€ä»¥çŠ¶æ€ç è®¾ç½®æˆ302ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æˆ‘åªæ˜¯ä¸´æ—¶è¿›è¡Œé‡å®šå‘ï¼Œæˆ‘è¿˜ä¼šå›æ¥çš„ã€‚\n6.cookie&#x2F;sessionæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªwebé¡µé¢ä¸­ç™»å½•äº†ï¼ˆå¦‚github&#x2F;gitee&#x2F;csdnï¼‰è¿™ä¸ªç½‘é¡µåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½ä¼šä¿æŒç™»å½•ï¼Œç›´åˆ°è¶…æ—¶äº¦æˆ–è€…æ˜¯å‡ºç°äº†å¼‚åœ°è®¿é—®ã€‚\nå‡å¦‚ä½ ç°åœ¨æœ‰ä¸ªç½‘é¡µï¼Œä½†æ˜¯æ¯æ¬¡ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œéƒ½éœ€è¦é‡æ–°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆšåˆšè¾“å…¥è¿‡äº†ï¼Œæ¢ä¸€ä¸ªé¡µé¢åˆä¸è¡Œäº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·è¿˜ä¼šæƒ³ç”¨ä½ è¿™ä¸ªæœåŠ¡å—ï¼Ÿ\nä¸ºäº†é¿å…æ­¤ç±»é—®é¢˜ï¼Œhttpåè®®å°±éœ€è¦å¼•å…¥å…¶ä»–çš„å‚æ•°ï¼Œæ¥ç»´æŒç”¨æˆ·çš„ç™»å½•ä¼šè¯ã€‚cookie&#x2F;sessionä¾¿æ˜¯å› æ­¤è€Œæ¥çš„ã€‚\n6.1 set cookieæœåŠ¡ç«¯å¯ä»¥åœ¨å“åº”å¤´ä¸­å¸¦ä¸ŠSet-Cookieå­—æ®µï¼Œç»™å®¢æˆ·ç«¯è®¾ç½®ä¸Šcookie\nresponse += &quot;Set-Cookie: This is my cookie test\\r\\n&quot;;\n\næ‰“å¼€f12å¼€å‘è€…ç•Œé¢ï¼Œèƒ½åœ¨å…¶ä¸­çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„cookie\n\nå†æ¬¡åˆ·æ–°ç½‘é¡µï¼Œå¯ä»¥çœ‹åˆ°åœ¨ä¹‹åçš„è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨éƒ½ä¼šå‘é€ä¸€æ¬¡æœåŠ¡å™¨è®¾ç½®çš„cookieã€‚è¿™æ ·æœåŠ¡ç«¯åœ¨æ”¶åˆ°cookieåï¼Œå°±èƒ½è§£æåˆ°è‡ªå·±è®¾ç½®çš„cookieï¼Œç¡®å®šäº†æŒ‡å®šçš„ç”¨æˆ·\n\nåœ¨æœåŠ¡å™¨ç«¯ä¹Ÿèƒ½çœ‹åˆ°è¿™ä¸ªå­—æ®µ\n\n6.2 ä»€ä¹ˆæ˜¯cookieæ‰€è°“cookieï¼Œå…¶å®å°±æ˜¯æµè§ˆå™¨å¸®æˆ‘ä»¬å­˜å–äº†ä¸€å®šçš„èº«ä»½ä¿¡æ¯åœ¨æœ¬åœ°ï¼ˆå†…å­˜orç£ç›˜ï¼‰\nä¸‹ä¸€æ¬¡æ‰“å¼€ç‰¹å®šçš„ç½‘é¡µçš„æ—¶å€™ï¼Œå°±èƒ½æ˜¾ç¤ºå¯¹åº”çš„èº«ä»½ä¿¡æ¯ï¼ˆä¸ä¸€å®šæ˜¯ä½ çš„è´¦æˆ·å¯†ç ï¼‰ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±è¯†åˆ«åˆ°äº†ä½ å½“å‰çš„ç”¨æˆ·ï¼Œå¹¶ä¸ºä½ ä¿æŒç™»é™†çŠ¶æ€ã€‚\næ—¢ç„¶æ˜¯ä¿å­˜åœ¨ç”¨æˆ·æœ¬åœ°çš„ï¼Œé‚£å°±æœ‰å¯èƒ½è¢«çªƒå–ã€‚ä¸€äº›æ¶æ„è½¯ä»¶å°±ä¼šå»æ‰«æä½ æµè§ˆå™¨æœ¬åœ°ç¼“å­˜ä¸­çš„cookieä¿¡æ¯ï¼Œå¯¹äºä¸€äº›å®‰å…¨æ€§ä¸é«˜çš„ç½‘ç«™è€Œè¨€ï¼Œæœ‰äº†è¿™ä¸ªcookieï¼Œå°±ç›¸å½“äºä»–æœ‰äº†ä½ çš„è´¦æˆ·ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ä½ çš„è´¦æˆ·è¿›è¡Œæ“ä½œã€‚\nå› æ­¤ï¼Œå¼•å…¥äº†å¦å¤–ä¸€ç§èº«ä»½è®¤è¯çš„æ–¹å¼ cookie+session\n6.3 cookie+sessionæ¯”èµ·å°†èº«ä»½ä¿¡æ¯å­˜åˆ°å®¢æˆ·ç«¯ï¼Œå­˜è‡³æœåŠ¡ç«¯æ›´ä¸ºå®‰å…¨ï¼ˆæ”»å‡»ä¼ä¸šæœåŠ¡å™¨çš„æˆæœ¬ï¼Œæ¯”åœ¨ç”¨æˆ·ç«¯æ¤å…¥æœ¨é©¬ç¨‹åºçš„æˆæœ¬æ›´é«˜ï¼‰\n\nç”¨æˆ·ä½¿ç”¨è´¦æˆ·å¯†ç è¯·æ±‚ç™»å½•ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ç™»å½•è¯·æ±‚ï¼ŒéªŒè¯æˆåŠŸåï¼Œç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ä¸²session_idæ¥æ ‡è¯†ç”¨æˆ·\nå®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå¸¦ä¸Šäº†è¿™ä¸ªå”¯ä¸€å­—ç¬¦ä¸²\næœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œåœ¨æœ¬åœ°çš„session_idåº“ä¸­æŸ¥æ‰¾è¿™ä¸ªidï¼Œæ‰¾åˆ°åï¼Œå°±å°†ç”¨æˆ·ä¿¡æ¯åŒ¹é…ç»™å®¢æˆ·ç«¯ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ç™»å½•æˆåŠŸäº†\n\nè¿™æ ·ï¼Œå°±å°†åŸæœ¬å­˜åœ¨ç”¨æˆ·æœ¬åœ°çš„èº«ä»½è®¤è¯ä¿¡æ¯ï¼Œå­˜åˆ°äº†æœåŠ¡ç«¯ä¸­ã€‚å®¢æˆ·ç«¯å°±åªå‰©ä¸‹ä¸€ä¸ªå­¤é›¶é›¶çš„å­—ç¬¦ä¸²idï¼Œä¸ä¼šæœ‰ç”¨æˆ·çš„ç§å¯†ä¿¡æ¯ã€‚å³ä¾¿ä¸¢å¤±ï¼Œä¹Ÿä¸ä¼šå½±å“ç”¨æˆ·çš„éšç§ã€‚\n\nä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£æˆ‘å·èµ°è¿™ä¸ªidä¸ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Ÿ\n\nå…¶å®æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼ŒæœåŠ¡ç«¯å¯ä»¥å°†session_idå’Œç”¨æˆ·çš„ipæˆ–è€…ç»ˆç«¯User-Agentç»‘å®šï¼Œè¿™æ ·åªè¦ç”¨æˆ·åˆ‡æ¢è®¾å¤‡æˆ–è€…æ¢äº†ç™»å½•çš„åœ°ç‚¹ï¼ˆæ¯”å¦‚ä»ä¸‰äºšè·‘åˆ°äº†å“ˆå°”æ»¨ï¼‰å°±ç›´æ¥è®©session_idå¤±æ•ˆï¼Œè¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ã€‚\n7.é•¿çŸ­é“¾æ¥åœ¨æ—©æœŸçš„httpåè®®ä¸­ï¼Œé‡‡ç”¨çš„éƒ½æ˜¯çŸ­é“¾æ¥ï¼Œä¸€æ¬¡è¿æ¥åªèƒ½å¤„ç†1æ¬¡httpè¯·æ±‚ã€‚å½“æ—¶çš„ç½‘é¡µå¤§å¤šä»¥æ–‡å­—ä¸ºä¸»ï¼Œæ•°æ®é‡å¾ˆå°ï¼Œä¸€èµ·è¯·æ±‚ä¹Ÿèƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€‚\nä½†ç°åœ¨æ—¶ä»£å·²ç»å˜äº†ï¼Œä¸€ä¸ªç½‘é¡µé‡Œé¢æœ‰å›¾ç‰‡ï¼Œæ–‡å­—ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ã€‚è¿™äº›æ–‡ä»¶çš„ä½“ç§¯æ‰“èµ·æ¥ä¹‹åï¼ŒçŸ­é“¾æ¥çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚æ­¤æ—¶å°±å‡ºç°äº†é•¿é“¾æ¥ï¼Œä¸€æ¬¡tcpé“¾æ¥ï¼Œå¯ä»¥æŒç»­ä¼ è¾“æ•°æ®ã€‚\nç›¸æ¯”çŸ­é“¾æ¥ï¼Œé•¿é“¾æ¥è¿ä¸Šä¹‹åï¼Œèƒ½æŒç»­ä¼ è¾“æ•°æ®ï¼Œé¿å…äº†tcp3æ¬¡æ¡æ‰‹çš„æ¶ˆè€—ï¼Œæé«˜äº†æ•°æ®ä¼ è¾“çš„æ•ˆç‡ï¼\n7.1 Connetionåœ¨æœ¬æ–‡çš„3.4ä¸­ï¼Œä¾¿å‡ºç°äº†è¿™ä¸ªå‚æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šæœ‰ä¸‹é¢ä¸¤ç§æƒ…å†µ\nConnetion: keep-aliveConnetion: closed\n\nå…¶ä¸­keep-aliveå°±æ˜¯é•¿é“¾æ¥ï¼Œclosedä»£è¡¨å½“å‰ç«¯å£åªæ”¯æŒçŸ­é“¾æ¥ã€‚\nå½“å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å¤´ä¸­åŒ…å«Connetion: keep-aliveå­—æ®µï¼Œå¦‚æœæœåŠ¡å™¨æ”¯æŒé•¿é“¾æ¥ï¼Œå°±éœ€è¦åœ¨å“åº”å¤´ä¸­ä¹Ÿå¸¦ä¸ŠConnetion: keep-alive\tï¼Œè¿™æ ·åŒæ–¹åå•†æˆåŠŸï¼Œå¤§å®¶éƒ½å¯ä»¥ä½¿ç”¨é•¿é“¾æ¥ã€‚\nå¦‚æœæœåŠ¡å™¨çš„å“åº”å¤´ä¸­æ²¡æœ‰å¸¦Connetion: keep-aliveï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±ä¼šè®¤ä¸ºæœåŠ¡å™¨ä¸æ”¯æŒé•¿é“¾æ¥ï¼Œä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šé‡æ–°å‘æœåŠ¡å™¨é“¾æ¥ï¼Œå†è·å–èµ„æºã€‚\nå¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»»æ„ä¸€æ–¹çš„å“åº”å¤´ä¸­åŒ…å«Connetion: closedï¼Œé‚£ä¹ˆå°±ä¼šè®¤ä¸ºå½“å‰çš„ä¼šè¯åªæ”¯æŒçŸ­é“¾æ¥ï¼Œä¸‹æ¬¡è¯·æ±‚ä¼šé‡æ–°å»ºç«‹é“¾æ¥ã€‚\n7.2 httpå’Œtcpçš„å…³ç³»httpè™½ç„¶æ˜¯åŸºäºtcpçš„ï¼Œä½†httpæœ¬èº«æ˜¯æ— é“¾æ¥çš„ã€‚\n\nä¸¾ä¸ªæœ€æ˜æ˜¾çš„æ —å­ï¼Œåœ¨ä½ æ‰“å¼€ä¸€ä¸ªç½‘é¡µä¹‹åï¼Œä½ å…³é—­æ‰è‡ªå·±çš„wifiï¼Œä½ çš„ç½‘é¡µå¹¶ä¸ä¼šå› æ­¤æ¶ˆå¤±ã€‚åªæ˜¯æ— æ³•è¿›è¡Œåç»­æ“ä½œè€Œå·²ã€‚\n\nhttpæ˜¯ä¸€ä¸ªæ— é“¾æ¥çš„åº”ç”¨å±‚åè®®ï¼Œå…¶å€ŸåŠ©tcpè¿›è¡Œæ•°æ®çš„æµå¼ä¼ è¾“ï¼Œä½†ä¸ä¸€å®šéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒè¿æ¥ã€‚\næ‰€ä»¥ï¼Œhttpå°±å¯ä»¥å€ŸåŠ©å•ä¸ªtcpå¥—æ¥å­—æŒç»­çš„ä¼ è¾“æ•°æ®ï¼Œä¹Ÿå°±å¤©ç„¶åœ°æ”¯æŒäº†é•¿é“¾æ¥é€šä¿¡ã€‚\næ€»ç»“ä¸€ä¸‹ï¼Œhttpåªæ˜¯å€Ÿç”¨äº†tcpçš„èƒ½åŠ›ï¼Œå…¶æ— è¿æ¥çš„ç‰¹æ€§å’Œtcpæ²¡æœ‰å…³ç³»ï¼\n7.3 pipelineè¿™å…¶ä¸­ä¼šç‰µæ‰¯åˆ°ä¸€ä¸ªpipelineï¼Œå…¶ç»´æŠ¤äº†httpé•¿é“¾æ¥è¯·æ±‚æ—¶çš„å“åº”é¡ºåºã€‚\næ¯”å¦‚äººå®¶éœ€è¦åŠ è½½ä¸€ä¸ªç½‘é¡µï¼ŒæœåŠ¡ç«¯åº”è¯¥å…ˆæŠŠç½‘é¡µçš„æ•´ä½“æ¡†æ¶ç»™ç”¨æˆ·åŠ è½½å‡ºæ¥ï¼Œå†ç»™ç”¨æˆ·åŠ è½½å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰èµ„æºã€‚ä¸‹å›¾Bç«™çš„åŠ è½½å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ —å­ã€‚\n\nå¦åˆ™ä¹±åºäº†ï¼Œæ¯”å¦‚åªå‡ºç°äº†ä¸€ä¸ªå­¤é›¶é›¶çš„å›¾ç‰‡ï¼Œå°±ä¼šè®©äººæ„Ÿè§‰éå¸¸å¥‡æ€ªã€‚\n8.httpså› ä¸ºhttpçš„æ•°æ®æ˜¯æ— åŠ å¯†æ˜æ–‡å‘é€çš„ï¼Œç›¸å¯¹æ¥è¯´å¹¶ä¸æ˜¯éå¸¸çš„å®‰å…¨ï¼›ä¸ºäº†å®ç°æ•°æ®åŠ å¯†ï¼Œhttpsåœ¨httpçš„ä¸‹å±‚æ·»åŠ äº†ä¸€ä¸ªSSL/TLSè½¯ä»¶å±‚ï¼Œæ¥è¿›è¡Œæ•°æ®åŠ è§£å¯†å·¥ä½œ\n\n8.1 ä¸ºå•¥è¦åŠ å¯†ï¼Ÿè¦çŸ¥é“ï¼Œæ‰€æœ‰çš„åŠ å¯†å·¥ä½œï¼Œéƒ½æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®åœ¨ä¸­é—´ä¼ è¾“çš„è¿‡ç¨‹ï¼Œè¢«çªƒå–æˆ–ä¿®æ”¹ã€‚å¦‚æœæˆ‘ä»¬è¯·æ±‚ä¸€ä¸ªç½‘ç«™ç™»å½•çš„æ—¶å€™ï¼Œæ•°æ®åŒ…ä¸­å°±ä¼šåŒ…å«æˆ‘ä»¬çš„è´¦æˆ·å¯†ç ã€‚å¦‚æœè¢«çªƒå–ï¼Œæˆ‘ä»¬çš„éšç§å°±æ³„éœ²äº†ã€‚è¿™æ˜¯å¾ˆéš¾å—çš„ä¸€ä»¶äº‹ï¼\n\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬ç»å¸¸èƒ½å¬åˆ°å…è´¹å…¬å…±wifiä¸å®‰å…¨è¿™ä¸€è¯´æ³•ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿™ä¸ªwifiä¸Šè¿›è¡Œçš„æ‰€æœ‰æ•°æ®äº¤æ¢ï¼Œéƒ½ä¼šèµ°è¿™ä¸ªwifiçš„è·¯ç”±å™¨ï¼Œå¾ˆå®¹æ˜“è¢«ä¸­é—´äººçªƒå–å¹¶è·å–åˆ°æˆ‘ä»¬çš„æ•°æ®åŒ…ã€‚\nè¿™ç§æƒ…å†µä¸‹ï¼Œhttpsçš„åŠ å¯†å°±æ›´æœ‰å¿…è¦äº†ï¼\n\nä½†æ˜¯ï¼ŒåŠ å¯†è§£å¯†æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œæ‰€ä»¥httpså“åº”çš„é€Ÿåº¦ä¼šç¨æ…¢äºhttpã€‚ä¸è¿‡å½“ä¸‹cpuçš„æ‰§è¡Œé€Ÿåº¦å·²ç»éå¸¸å¿«ï¼Œè¿™ç‚¹æ—¶é—´å·®è·å¾ˆå°ï¼Œä¸ä¼šç‰¹åˆ«å½±å“æˆ‘ä»¬çš„æ—¥å¸¸ä½¿ç”¨ï¼\nä¸è¿‡ï¼ŒåŠ å¯†å¹¶ä¸æ˜¯ä¸€ä¸ªä¸‡é‡‘æ²¹ï¼Œå¹¶ä¸æ˜¯è¯´åŠ å¯†äº†ä¹‹åçš„æ•°æ®å°±ä¸€å®šèƒ½é¿å…è¢«çªƒå–ã€‚ä½†åŠ å¯†å¯ä»¥å¤§å¤§æé«˜çªƒå–ç ´è§£çš„æˆæœ¬ï¼Œæ— å½¢ä¸­é™ä½äº†æ•°æ®è¢«çªƒå–çš„æ¦‚ç‡ï¼Œä¿è¯äº†ä¸€å®šçš„æ•°æ®å®‰å…¨ã€‚\n8.2 å¸¸è§åŠ å¯†æ–¹å¼8.2.1 å¯¹ç§°åŠ å¯†æ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå¥½æ¯”æœ‰ä¸€ä¸ªå¸¦é”çš„ç›’å­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ä¸€æŠŠé’¥åŒ™ã€‚å®¢æˆ·ç«¯å…ˆæŠŠä¿¡æ¯ä¸¢è¿›ç›’å­é‡Œï¼Œå†ç”¨ğŸ”‘é”ä¸Šç›’å­ï¼Œå‘é€ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯ç”¨ğŸ”‘æ‰“å¼€ç›’å­ï¼Œå–å‡ºæ•°æ®ã€‚\nå› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æŒæœ‰çš„é’¥åŒ™æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºå¯¹ç§°åŠ å¯†ã€‚åœ¨åŠ å¯†çš„åœºæ™¯ä¸‹ï¼Œé’¥åŒ™ä¸€èˆ¬è¢«ç§°ä¸ºå¯†é’¥\nåœ¨ç½‘ç»œåœºæ™¯é‡Œï¼Œå¯¹ç§°åŠ å¯†æ˜¯ä¸å¯å–çš„ã€‚åªè¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼ è¾“å¯†é’¥çš„æ—¶å€™è¢«çªƒå–ï¼Œé‚£ä¹ˆåŒæ–¹çš„åŠ å¯†å°±å¤±æ•ˆäº†ã€‚å› ä¸ºæ˜¯ç”¨åŒä¸€ä¸ªå¯†é’¥æ¥åŠ å¯†è§£å¯†ï¼Œæˆ‘æ‹¿èµ°äº†ä½ çš„é’¥åŒ™ï¼Œè‡ªç„¶å°±èƒ½æ‰“å¼€ä½ è¿™æŠŠé”ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¯†é’¥çš„ä¼ è¾“ä¹Ÿéœ€è¦åŠ å¯†ã€‚ä½†æ˜¯è¿™åˆå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘éƒ½æ²¡æœ‰ä½ çš„å¯†é’¥ï¼Œæˆ‘æ€ä¹ˆè§£å¯†ä½ å‘è¿‡æ¥çš„å¯†é’¥ä¿¡æ¯ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…ˆæœ‰è›‹è¿˜æ˜¯å…ˆæœ‰é¸¡çš„æ­»å¾ªç¯ï¼\n8.2.2 éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†åœºæ™¯ä¸‹ï¼Œä¼šæœ‰ä¸€ä¸ªå…¬é’¥å’Œç§é’¥\n\nç§é’¥å¯¹æ•°æ®åŠ å¯†ï¼Œå˜æˆå¯†æ–‡\nå…¬é’¥å¯¹æ•°æ®è§£å¯†ï¼Œå˜æˆæ˜æ–‡\n\näºŒè€…ä¹Ÿå¯ä»¥åè¿‡æ¥\n\nç§é’¥å¯¹æ•°æ®è§£å¯†\nå…¬é’¥å¯¹æ•°æ®åŠ å¯†\n\nå…¶ä¸­æœ€å¸¸ç”¨çš„éå¯¹ç§°åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨gitçš„sshæ“ä½œä¸­ä½¿ç”¨è¿‡çš„rsaå¯†é’¥ï¼Œå…¶ä¸­å°±æœ‰ä¸€ä¸ª.pemå…¬é’¥å’Œä¸€ä¸ªç§é’¥ã€‚æˆ‘ä»¬å°†å…¬é’¥æä¾›ç»™githubï¼Œç§é’¥ä¿å­˜åˆ°æœ¬åœ°ï¼Œå°±èƒ½å®ç°æ— å¯†ç ä¸Šä¼ æ•°æ®åˆ°gitä»“åº“ã€‚\n\nä½†æ˜¯éå¯¹ç§°åŠ å¯†è¿˜æ˜¯ä¼šå­˜åœ¨ä¸­é—´äººæ”»å‡»çš„é—®é¢˜ã€‚å…ˆçœ‹å¦‚ä¸‹å›¾ï¼Œä½ åº”è¯¥èƒ½å‘ç°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé‡è¦çš„ç¯èŠ‚ï¼Œå°±æ˜¯æœåŠ¡ç«¯è¦æŠŠå…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œå…¬é’¥æ˜¯å…¬å¼€ä¼ è¾“ç»™å®¢æˆ·ç«¯çš„ï¼Œä¹Ÿå°±æ˜¯åç»­æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯ï¼Œéƒ½å¯ä»¥è¢«å…¶ä»–äººç”¨è¿™ä¸ªå…¬é’¥è§£æå‡ºæ¥ï¼›\næ•´ä¸ªç¯èŠ‚ä¸­ï¼Œåªåšåˆ°äº†å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„ä¿¡æ¯å®‰å…¨ï¼Œå› ä¸ºåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰ç§é’¥ï¼Œèƒ½è§£å¯†å‡ºæ•°æ®ã€‚\n8.2.3 åŒéå¯¹ç§°è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨åŒéå¯¹ç§°å¯†é’¥åŠ å¯†çš„æ–¹å¼ï¼æ—¢ç„¶éå¯¹ç§°åªèƒ½ä¿è¯å•æ–¹çš„æ•°æ®å®‰å…¨ï¼Œé‚£ä½¿ç”¨ä¸¤ä¸ªéå¯¹ç§°ï¼Œä¸å°±èƒ½ä¿è¯åŒæ–¹æ•°æ®å®‰å…¨äº†å˜›ï¼\n\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢å…¬é’¥a&#39; å’Œ b&#39;\nå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¿¡æ¯ï¼šå…ˆç”¨a&#39;å¯¹æ•°æ®åŠ å¯†ï¼Œå†å‘é€ï¼›åªèƒ½ç”±æœåŠ¡å™¨è§£å¯†ï¼Œå› ä¸ºåªæœ‰æœåŠ¡å™¨æœ‰ç§é’¥a\næœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘ä¿¡æ¯ï¼šå…ˆç”¨b&#39;å¯¹æ•°æ®åŠ å¯†ï¼Œå†å‘é€ï¼›åªèƒ½ç”±å®¢æˆ·ç«¯è§£å¯†ï¼Œå› ä¸ºåªæœ‰å®¢æˆ·ç«¯æœ‰ç§é’¥b\n\n\nå› ä¸ºä¸¤ä»½ç§é’¥éƒ½åªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è‡ªå·±æ‹¥æœ‰ï¼Œæ‰€ä»¥é»‘å®¢æ²¡æœ‰åŠæ³•è¿›è¡Œæ•°æ®çš„çªƒå–ï¼Œä¹Ÿå°±ä¿è¯äº†æ•°æ®çš„å®‰å…¨ã€‚\nå³ä¾¿ä¸­é—´äººæ›¿æ¢äº†äº¤æ¢çš„å…¬é’¥ï¼Œä¹Ÿä¼šå› ä¸ºåç»­çš„é€šä¿¡ï¼Œå®¢æˆ·ç«¯oræœåŠ¡ç«¯æœ¬åœ°çš„ç§é’¥æ— æ³•æ­£å¸¸è§£å¯†ï¼Œè€Œå‘ç°æ•°æ®è¢«çªƒå–ï¼\nä½†æ˜¯ä½†æ˜¯ï¼Œè¿™æ ·å·¦è¿˜ç®—æœ‰å¾ˆå¤§çš„ç¼ºç‚¹\n\næ•ˆç‡å¤ªä½ï¼ˆéå¯¹ç§°åŠ å¯†è§£å¯†è´Ÿè½½å¤ªé«˜ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œç‰¹å®šåœºæ™¯ä¸‹æ— æ³•æ»¡è¶³è¦æ±‚ï¼‰\nä¾æ—§å¯èƒ½å­˜åœ¨å®‰å…¨é—®é¢˜\n\n8.2.4 éå¯¹ç§°+å¯¹ç§°\næœåŠ¡ç«¯å…·æœ‰éå¯¹ç§°å…¬é’¥Så’Œç§é’¥Sâ€™\nå®¢â¼¾ç«¯å‘èµ·è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å…¬é’¥S\nå®¢â¼¾ç«¯åœ¨æœ¬åœ°ç”Ÿæˆå¯¹ç§°å¯†é’¥C, é€šè¿‡å…¬é’¥SåŠ å¯†, å‘é€ç»™æœåŠ¡å™¨.\nç”±äºä¸­é—´äººæ²¡æœ‰ç§é’¥ï¼Œå³ä½¿æˆªè·äº†æ•°æ®ï¼Œä¹Ÿæ— æ³•è¿˜åŸå‡ºå†…éƒ¨çš„åŸæ–‡ï¼Œä¹Ÿå°±æ— æ³•è·å–åˆ°å¯¹ç§°å¯†é’¥\næœåŠ¡å™¨é€šè¿‡ç§é’¥S&#39;è§£å¯†ï¼Œè¿˜åŸå‡ºå®¢æˆ·ç«¯å‘é€çš„å¯¹ç§°å¯†é’¥Cï¼Œå¹¶ä¸”ä½¿ç”¨è¿™ä¸ªå¯¹ç§°å¯†é’¥åŠ å¯†ç»™å®¢æˆ·ç«¯å‘é€çš„å“åº”æ•°æ®\nåç»­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½é‡‡ç”¨å¯†é’¥Cæ¥è¿›è¡Œå¯¹ç§°åŠ å¯†é€šä¿¡\n\nå› ä¸ºå¯¹ç§°å¯†é’¥Cåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯åŠ å¯†çš„ï¼Œåªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çŸ¥é“å¯†é’¥æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±å®ç°äº†æ•°æ®çš„å®‰å…¨é€šä¿¡ï¼\n8.3 æ•°æ®æ‘˜è¦ï¼ˆæŒ‡çº¹ï¼‰æ•°å­—æŒ‡çº¹(æ•°æ®æ‘˜è¦)ï¼Œ å…¶åŸºæœ¬åŸç†æ˜¯åˆ©â½¤å•å‘æ•£åˆ—å‡½æ•°(Hashå‡½æ•°)å¯¹ä¿¡æ¯è¿›è¡Œè¿ç®—ï¼Œç”Ÿæˆâ¼€ä¸²å›ºå®šé•¿åº¦çš„æ•°å­—æ‘˜è¦ã€‚\nå¸¸è§çš„æ‘˜è¦ç®—æ³•æœ‰MD5/SHA1/SHA256/SHA512ç­‰ï¼›\næ•°å­—æŒ‡çº¹å¹¶ä¸æ˜¯â¼€ç§åŠ å¯†æœºåˆ¶ï¼Œä½†å¯ä»¥ç”¨æ¥åˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰è¢«çªœæ”¹ï¼Œäº¦æˆ–è€…æ˜¯ä¸‹è½½çš„æ•°æ®åŒ…æœ‰æ²¡æœ‰å‡ºç°æŸåã€‚\n\nåŒä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œç”¨åŒä¸€ä¸ªæ–¹æ³•ç”Ÿæˆçš„æ•°æ®æ‘˜è¦æ˜¯ä¸€è‡´çš„\nä¸åŒæ–‡ä»¶ç”Ÿæˆçš„æ•°æ®æ‘˜è¦å¯èƒ½ä¼šæ’è½¦ï¼Œä½†å‡ ç‡æä½ï¼Œå¯ä»¥è®¤ä¸ºå…·æœ‰å”¯ä¸€æ€§ï¼\næˆ‘ä»¬æ— æ³•ç”¨æ•°æ®æ‘˜è¦åæ¨å‡ºæ•°æ®å†…å®¹ï¼ˆæ€ä¹ˆå¯èƒ½ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¨æµ‹å‡ºåŸæœ¬çš„å†…å®¹å‘¢ï¼Ÿé‚£æ ·è¿˜å­˜æ”¾æºæ–‡ä»¶å¹²å“ˆï¼ŸğŸ˜‚ï¼‰\n\næ•°æ®æ‘˜è¦åœ¨ç½‘ç›˜äº§å“ä¸­ä¹Ÿæœ‰ä½¿ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ç™¾åº¦äº‘ç›˜ã€é˜¿é‡Œäº‘ç›˜çš„æ—¶å€™ï¼Œä¼šé‡åˆ°ä¸€ä¸ªå¤§çš„èµ„æºæ–‡ä»¶åªç”¨äº†çŸ­çŸ­å‡ ç§’å°±æˆåŠŸä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æƒ…å†µã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯çœŸçš„ç”¨å‡ ç§’å°±æŠŠæ•°æ®ä¼ è¾“ä¸Šå»äº†ï¼Œè€Œæ˜¯ç»å†äº†ä»¥ä¸‹é˜¶æ®µ\n\nç½‘ç›˜å®¢æˆ·ç«¯å¯¹æœ¬åœ°æ–‡ä»¶ç”Ÿæˆæ•°æ®æ‘˜è¦\nç”Ÿæˆåï¼Œåˆ¤æ–­æœåŠ¡å™¨ç«¯å·²æœ‰æ–‡ä»¶ä¸­ï¼Œæ˜¯å¦æœ‰åŒè¯¥æ•°æ®æ‘˜è¦ç›¸åŒçš„æ–‡ä»¶\nå¦‚æœæœ‰ï¼Œä»£è¡¨è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äº†äº‘ç›˜ä¸­\næœåŠ¡å™¨å°†è¯¥æ–‡ä»¶ç»™ä½ çš„è´¦æˆ·å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥&#x2F;ç¡¬é“¾æ¥ï¼Œå°±å®ç°äº†&quot;å¦™ä¼ &quot;\nå¦‚æœæ²¡æœ‰ï¼Œåˆ™è€è€å®å®çš„ä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶åˆ°äº‘ç›˜\n\näº‘ç›˜å‚å®¶è¿™ä¹ˆåšçš„åŸå› å¾ˆç®€å•ï¼šé¿å…åŒä¸€ä»½æ–‡ä»¶è¢«å¤šæ¬¡å­˜å‚¨ã€‚å½“ä¸‹ç½‘ç›˜ç»™ç”¨æˆ·çš„å…è´¹ç©ºé—´åŠ¨åˆ™ä¸ŠTï¼Œå¦‚æœæ‰€æœ‰æ–‡ä»¶éƒ½é‡å¤ä¿å­˜ï¼Œé‚£å¯¹äºäº‘æœåŠ¡å™¨å‚å®¶æ¥è¯´ï¼Œèµ„æºæ¶ˆè€—å¤ªå¤§äº†ã€‚\nè¿™ä¸ªåšæ³•å¹¶ä¸ä¼šäº§ç”Ÿæ•°æ®éšç§é—®é¢˜ï¼Œä¸€èˆ¬åªæœ‰ç”µå½±ç­‰èµ„æºæ–‡ä»¶æ‰æœ‰å¯èƒ½å¦™ä¼ æˆåŠŸã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€äº›â€œå…¶ä»–æ‰‹æ®µâ€ï¼Œæ¯”å¦‚æŠŠèµ„æºæ‰“ä¸ªå‹ç¼©åŒ…ï¼Œå¹¶åœ¨å‹ç¼©åŒ…ä¸­éšä¾¿ä¸¢å¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼Œè®©æ–‡ä»¶çš„æ•°æ®æŒ‡çº¹å’Œå·²æœ‰èµ„æºä¸ç›¸åŒï¼Œå°±ä¸ä¼šè¿›è¡Œå¦™ä¼ äº†ã€‚\n8.4 æ•°å­—ç­¾åå¯¹æ•°æ®æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„å†…å®¹è¢«ç§°ä¸ºæ•°å­—ç­¾å\n8.5 ä¸­é—´äººæ”»å‡»ä¸­é—´äººæ”»å‡»ï¼ˆMan-in-the-MiddleAttackï¼‰ï¼Œç®€ç§°â€œMITMæ”»å‡»â€ï¼›\nä»¥8.2.2çš„å•éå¯¹ç§°åŠ å¯†ä¸ºä¾‹ï¼Œä¸­é—´äººå¯ä»¥åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­è¿›è¡Œå·æ¢æ¢æŸ±ï¼Œçªƒå–åŒæ–¹çš„ä¿¡æ¯\n\né€è¿‡è¿™ä¸ªæ —å­ğŸŒ°ï¼Œå®é™…ä¸Šï¼Œå¦‚æœä¸­é—´äººåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¼€å§‹é€šä¿¡ä¹‹å‰å°±æ¥çªƒå¬å¹¶å‡†å¤‡æ¢æŸ±äº†ï¼Œä»–å°±æœ‰å¯èƒ½æ›¿æ¢åŒæ–¹å¯†é’¥ï¼Œä»è€Œè§£å¯†åŒæ–¹å‘é€çš„ä¿¡æ¯ï¼\næœ€é‡è¦çš„ä¸€ç‚¹ï¼Œæ˜¯å®¢æˆ·ç«¯oræœåŠ¡ç«¯éƒ½æ²¡æœ‰åŠæ³•è¯æ˜ï¼Œå½“å‰çš„å…¬é’¥æ˜¯ç›´æ¥ä»æœåŠ¡ç«¯orå®¢æˆ·ç«¯å‘æ¥çš„ï¼Œå®ƒä»¬æ²¡æœ‰åŠæ³•æ£€éªŒå…¬é’¥çš„æƒå¨æ€§ï¼Œåªèƒ½è¢«åŠ¨æ¥å—ã€‚ç”±æ­¤ç»™ä¸­é—´äººå·æ¢æ¢æŸ±æä¾›äº†å¯èƒ½ã€‚\n8.6 CAè¯ä¹¦æ‰€è°“CAè¯ä¹¦ï¼Œæ˜¯ç”±CAæœºæ„é¢å‘çš„æƒå¨è¯ä¹¦ã€‚CAæœºæ„åœ¨é¢å‘è¯ä¹¦æ—¶ï¼Œä¼šåœ¨è¯ä¹¦ä¸­é™„å¸¦ä¸Šè¯¥ç«™ç‚¹çš„åŸŸåï¼Œä»¥åŠç”³è¯·äººï¼ˆä¼ä¸šï¼‰çš„ç›¸å…³ä¿¡æ¯\n\nCAæœºæ„ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å’Œå…¬é’¥ï¼Œå…¶å…¬é’¥å‘æ‰€æœ‰äººå…¬å¼€\nCAæœºæ„çš„ç§é’¥ç”±å…¶è‡ªå·±ä¿å­˜ï¼ˆç§é’¥ä¸€å®šä¸èƒ½æ³„éœ²ï¼‰\nå½“ä¸‹çš„æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿéƒ½ä¼šå†…ç½®è®¤å¯çš„CAï¼›åªæœ‰è¢«è®¤å¯çš„CAï¼Œæ‰èƒ½ä¸ºç«™ç‚¹æä¾›sslè¯ä¹¦æœåŠ¡\n\nåœ¨æˆ‘ä»¬windowsæœ¬åœ°å°±èƒ½çœ‹åˆ°å½“å‰æ“ä½œç³»ç»Ÿè®¤å¯çš„CAæœºæ„å…¶å…¬é’¥ï¼›åœ¨edgeæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’é€‰æ‹©ï¼Œè¿›å…¥è®¾ç½®ï¼Œåœ¨é€‰æ‹©éšç§é¡µé¢ï¼Œæ‰¾åˆ°ç®¡ç†è¯ä¹¦\n\nç‚¹å‡»å®ƒï¼Œå°±èƒ½çœ‹åˆ°å½“å‰æœ¬åœ°è®¤å¯çš„CA\n\n8.6.1 sslè¯ä¹¦åŠ å¯†åŸç†å½“ä¸€ä¸ªç«™ç‚¹è·å–äº†sslè¯ä¹¦åï¼Œåœ¨å‘ç”¨æˆ·å‘é€sslè¯ä¹¦ä¸­åŒ…å«çš„å…¬é’¥çš„åŒæ—¶ï¼Œè¿˜ä¼šå‘é€ä¸€ä¸ªç”±CAæœºæ„å¯¹sslè¯ä¹¦å…¬é’¥åšçš„æ•°å­—ç­¾å\n\nsslè¯ä¹¦å…¬é’¥çš„æ•°å­—ç­¾åAï¼Œé€šè¿‡CAæœºæ„çš„ç§é’¥è¿›è¡ŒåŠ å¯†\nsslè¯ä¹¦çš„å…¬é’¥B\n\nå½“å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä»½ä¿¡æ¯ä¹‹åï¼Œä¼šé‡‡ç”¨hashå‡½æ•°å¯¹æ”¶åˆ°çš„sslè¯ä¹¦å…¬é’¥è¿›è¡Œæ•°å­—ç­¾åï¼Œå¾—åˆ°ä¸€ä¸ªæœ¬åœ°ç”Ÿæˆçš„æ•°å­—ç­¾åC\nå†ç”¨CAæœºæ„çš„å…¬é’¥å¯¹ä¼ è¾“è¿‡æ¥çš„æ•°å­—ç­¾åAè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åAçš„æ˜æ–‡ï¼›åˆ¤æ–­ç”±CAæœºæ„ç”Ÿæˆçš„sslå…¬é’¥æ•°å­—ç­¾åAæ˜¯å¦å’Œæœ¬åœ°ç”Ÿæˆçš„æ•°å­—ç­¾åCç›¸åŒï¼›\n\nå¦‚æœç›¸åŒï¼Œåˆ™ä»£è¡¨è¯ä¹¦æ­£ç¡®ï¼\nä¸ç›¸åŒï¼Œä»£è¡¨è¯ä¹¦å‡ºç°é”™è¯¯ï¼\n\nç”»ä¸ªå›¾ï¼Œå¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™æ ·\n\nç”±äºå½“ä¸‹å‘é€çš„æ•°æ®åŒ…ä¸­ï¼ŒåŒæ—¶å­˜åœ¨sslå…¬é’¥çš„æ˜æ–‡+ç”±CAæœºæ„åŠ å¯†åçš„æ•°å­—ç­¾åï¼Œä¸­é—´äººæ— æ³•è¿›è¡Œä»»ä½•æ”»å‡»ä¿®æ”¹ï¼\n\nè‹¥ä¿®æ”¹sslå…¬é’¥ï¼Œç”±äºä¸­é—´äººæ²¡æœ‰CAæœºæ„çš„ç§é’¥ï¼Œæ— æ³•å¯¹ä¿®æ”¹åçš„sslå…¬é’¥ç”Ÿæˆå¯¹åº”çš„åŠ å¯†åæ•°å­—ç­¾å\nè‹¥ä½¿ç”¨CAå…¬é’¥è§£å¯†æ•°å­—ç­¾ååä¿®æ”¹â€¦â€¦ä¾æ—§ä¼šå› ä¸ºæ²¡æœ‰CAæœºæ„ç§é’¥ï¼Œæ— æ³•æŠŠä¿®æ”¹åçš„ç­¾ååŠ å¯†å›å»\nå¦‚æœä¸­é—´äººç”¨è‡ªå·±çš„ç§é’¥ç”Ÿæˆä¸€ä¸ªæ•°å­—ç­¾åï¼Œä½†æˆ‘ä¸è®¤è¯†ä½ è¿™ä¸ªCAï¼Œä¹Ÿä¸çŸ¥é“ä½ çš„å…¬é’¥æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆè§£å¯†ä½ çš„ä¿¡æ¯å‘¢ï¼Ÿ\n\nç»¼ä¸Šï¼Œä¸­é—´äººè¦æƒ³å·æ¢æ¢æŸ±ï¼Œåªæœ‰ä¸€ä¸ªåŠæ³•äº†ï¼Œé‚£å°±æ˜¯æ‹¿ä¸€ä¸ªçœŸçš„è¯ä¹¦æ•´ä½“æ›¿æ¢æ‰è¿™ä¸ªæ•°æ®åŒ…ã€‚\nå¯sslè¯ä¹¦ä¸­è¿˜åŒ…å«äº†åŸŸåã€ç«™ç‚¹ä¸»ä½“ç­‰å„ç±»ä¿¡æ¯ï¼Œæˆ‘å½“ä¸‹è®¿é—®çš„æ˜¯baidu.comï¼Œç»“æœæ”¶åˆ°çš„è¯ä¹¦æ˜¯qq.comçš„ï¼Œé‚£è‚¯å®šæœ‰é—®é¢˜å•Šï¼æµè§ˆå™¨ä¼šç›´æ¥æ‹’ç»è®¿é—®ï¼ğŸ˜‚\nå½“æˆ‘ä»¬è®¿é—®ä¸€äº›ç½‘ç«™ï¼Œæµè§ˆå™¨æŠ¥sslè¯ä¹¦è¿‡æœŸï¼Œä¹Ÿæ˜¯ä¼šå‡ºç°ä¸€å®šçš„å®‰å…¨é—®é¢˜çš„ï¼\n8.6.2 sslè¯ä¹¦+éå¯¹ç§°+å¯¹ç§°æœ‰äº†ä¸Šé¢è¿™ä¸ªä¸èƒ½è¢«ç¯¡æ”¹çš„sslè¯ä¹¦å…¬é’¥ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨éå¯¹ç§°+å¯¹ç§°åŠ å¯†çš„æ–¹å¼è¿›è¡Œé€šä¿¡äº†\n\nå®¢æˆ·ç«¯æ”¶åˆ°sslè¯ä¹¦ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæœ¬åœ°ç”Ÿæˆçš„å¯†é’¥Dï¼ˆä½¿ç”¨sslè¯ä¹¦å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼‰\næœåŠ¡ç«¯æ”¶åˆ°å¯†é’¥Dçš„åŠ å¯†ä¿¡æ¯ï¼Œä½¿ç”¨sslè¯ä¹¦çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°å¯†é’¥D\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨å¯†é’¥Dè¿›è¡Œå¯¹ç§°åŠ å¯†é€šä¿¡\n\nè¿™æ ·å³è§£å†³äº†å®‰å…¨é—®é¢˜ï¼Œåˆè§„é¿äº†éå¯¹ç§°åŠ å¯†çš„æ•ˆç‡é—®é¢˜ï¼Œä¸€ä¸¾å¤šå¾—ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","ç½‘ç»œ","http"]},{"title":"ã€ç½‘ç»œã€‘http(s)åè®® | content-lengthè¯¦è§£","url":"/2023/02/15/note_Linux/35http%E4%B8%ADcontent-length/","content":"æœ¬æ–‡é€šè¿‡ä¸€ä¸ªçº¿ä¸Šå®ä¾‹ï¼Œè¯¦ç»†ä»‹ç»httpåè®®ä¸­çš„content-lengthå­—æ®µã€‚\n\n\nå‰è¨€httpåè®®æ˜¯äº’è”ç½‘ä¸­æœ€é‡è¦çš„åè®®ä¹‹ä¸€ï¼Œè™½ç„¶çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œä½†æ˜¯å®é™…ä¸­ç»å¸¸é‡åˆ°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å·²ç»é‡åˆ°å¥½å‡ æ¬¡äº†ã€‚æœ‰é•¿è¿æ¥ç›¸å…³çš„ï¼Œæœ‰æŠ¥æ–‡è§£æç›¸å…³çš„ã€‚å¯¹httpåè®®ä¸èƒ½ä¸€çŸ¥åŠè§£ï¼Œå¿…é¡»é€å½»ç†è§£æ‰è¡Œã€‚\næœ¬æ–‡é€šè¿‡ä¸€ä¸ªçº¿ä¸Šå®ä¾‹ï¼Œè¯¦ç»†ä»‹ç»httpåè®®ä¸­çš„content-lengthå­—æ®µã€‚\né—®é¢˜æˆ‘ä»¬çš„æ‰‹æœºAppåœ¨åšæ›´æ–°æ—¶ä¼šä»æœåŠ¡å™¨ä¸Šä¸‹è½½çš„ä¸€äº›èµ„æºï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å°æ–‡ä»¶ï¼Œæ›´æ–°çš„ä»£ç å·®ä¸å¤šæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š\nstatic void update() throws IOException &#123;    URL url = new URL(&quot;http://172.16.59.129:8000/update/test.so&quot;);    HttpURLConnection conn = (HttpURLConnection) url.openConnection();    if(conn.getResponseCode() == 200) &#123;        int totalLength = conn.getContentLength();\tBufferedInputStream in = new BufferedInputStream(conn.getInputStream());\tbyte[] buffer = new byte[512];\tint readLength = 0;\tint length = 0;\twhile((length=in.read(buffer)) != -1) &#123;\t\treadLength += length;\t\t//è¿›åº¦æ¡\t\tSystem.out.println(((float)readLength) /((float)(totalLength)));\t&#125;    &#125;&#125;\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç æ›´æ–°ä¸€ä¸ªsoæ–‡ä»¶ï¼Œå…ˆé€šè¿‡content-lengthè·å–æ–‡ä»¶çš„æ€»å¤§å°ï¼Œç„¶åè¯»Streamï¼Œæ¯è¯»ä¸€æ®µï¼Œå°±è®¡ç®—å‡ºå½“å‰è¯»çš„æ€»å¤§å°ï¼Œé™¤ä»¥content-lengthï¼Œç”¨æ¥æ˜¾ç¤ºè¿›åº¦æ¡ã€‚\nç»“æœweblogicä»10å‡çº§åˆ°12åï¼Œcontent-lengthä¸€ç›´è¿”å›-1ï¼Œè¿™æ ·å°±ä¸èƒ½æ˜¾ç¤ºè¿›åº¦æ¡äº†ï¼Œä½†æ˜¯æ–‡ä»¶æµè¿˜èƒ½æ­£å¸¸è¯»ã€‚æŠŠweblogicé‡å¯äº†ï¼Œä¸€å¼€å§‹è¿˜èƒ½è¿”å›content-lengthï¼Œä¸€ä¼šåˆæ˜¯-1äº†ã€‚\nåŸå› åˆ†æHttpåè®®çš„è¯·æ±‚æŠ¥æ–‡å’Œå›å¤æŠ¥æ–‡éƒ½æœ‰headerå’Œbodyï¼Œbodyå°±æ˜¯ä½ è¦è·å–çš„èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªhtmlé¡µé¢ï¼Œä¸€ä¸ªjpegå›¾ç‰‡ï¼Œè€Œheaderæ˜¯ç”¨æ¥åšæŸäº›çº¦å®šçš„ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å•†å®šä¸€äº›ä¼ è¾“æ ¼å¼ï¼Œå®¢æˆ·ç«¯å…ˆè·å–å¤´éƒ¨ï¼Œå¾—çŸ¥ä¸€äº›æ ¼å¼ä¿¡æ¯ï¼Œç„¶åæ‰å¼€å§‹è¯»å–bodyã€‚\n\nå®¢æˆ·ç«¯ï¼š Accept-Encoding:gzip ï¼ˆç»™æˆ‘å‹ç¼©ä¸€ä¸‹ï¼Œæˆ‘ç”¨çš„æ˜¯æµé‡ï¼Œå…ˆä¸‹è½½ä¸‹æ¥æˆ‘å†æ…¢æ…¢è§£å‹å§ï¼‰\næœåŠ¡ç«¯1ï¼šContent-Encoding:null(æ²¡æœ‰Content-Encodingå¤´ã€‚ æˆ‘ä¸ç»™å‹ç¼©ï¼ŒCPUæ²¡ç©ºï¼Œä½ çˆ±è¦ä¸è¦ï¼‰\næœåŠ¡ç«¯2ï¼šContent-Encoding:gzip (ç»™ä½ èŠ‚çœæµé‡ï¼Œå‹ç¼©ä¸€ä¸‹ï¼‰\n\n\nå®¢æˆ·ç«¯ï¼šConnection: keep-alive (å¤§å“¥ï¼Œå’±å¥½ä¸å®¹æ˜“å»ºäº†ä¸ªTCPè¿æ¥ï¼Œä¸‹æ¬¡æ¥ç€ç”¨ï¼‰\næœåŠ¡ç«¯1: Connection: keep-alive ï¼ˆéƒ½ä¸å®¹æ˜“ï¼Œæ¥ç€ç”¨ï¼‰\næœåŠ¡ç«¯2: Connection: close (è°è·Ÿä½ æ¥ç€ç”¨ï¼Œæˆ‘ä»¬è¿™ä¸ªTCPæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸‹æ¬¡å†æ‰¾æˆ‘è¿˜å¾—é‡æ–°è¿)\n\nhttpåè®®æ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸€èˆ¬å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºæ—¶ï¼Œä»¥æœåŠ¡ç«¯ä¸ºå‡†ã€‚è¿˜æœ‰ä¸€äº›headerå¹¶æ²¡æœ‰åå•†çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯æœåŠ¡ç«¯ç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯æŒ‰ä»€ä¹ˆæ¥ã€‚ä¾‹å¦‚ä¸Šè¿°çš„Content-Lengthï¼Œæ˜¯æœåŠ¡ç«¯å‘Šè¯‰å®¢æˆ·ç«¯bodyçš„å¤§å°æœ‰å¤šå¤§ã€‚ä½†æ˜¯ï¼æœåŠ¡ç«¯å¹¶ä¸ä¸€å®šèƒ½å‡†ç¡®çš„æå‰å‘Šè¯‰ä½ bodyæœ‰å¤šå¤§ã€‚æœåŠ¡ç«¯è¦å…ˆå†™headerï¼Œå†å†™bodyï¼Œå¦‚æœè¦åœ¨headeré‡ŒæŠŠbodyå¤§å°å†™è¿›å»ï¼Œå°±å¾—æå‰çŸ¥é“bodyå¤§å°ã€‚å¦‚æœè¿™ä¸ªbodyæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼ŒæœåŠ¡ç«¯å…ˆç”Ÿæˆå®Œï¼Œå†å¼€å§‹å†™headerï¼Œè¿™æ ·éœ€è¦å¾ˆå¤šé¢å¤–çš„å¼€é”€ï¼Œæ‰€ä»¥headeré‡Œä¸ä¸€å®šæœ‰content-lengthã€‚\né‚£å®¢æˆ·ç«¯æ€ä¹ˆçŸ¥é“bodyçš„å¤§å°å‘¢ï¼ŸæœåŠ¡å™¨æœ‰ä¸‰ç§æ–¹å¼å‘Šè¯‰ä½ ã€‚\n1.æœåŠ¡å™¨å·²ç»çŸ¥é“èµ„æºå¤§å°ï¼Œé€šè¿‡content-lengthè¿™ä¸ªheaderå‘Šè¯‰ä½ ã€‚\nContent-Length:1076(bodyçš„å¤§å°æ˜¯1076Bï¼Œä½ è¯»å–1076Bå°±å¯ä»¥å®Œæˆä»»åŠ¡äº†ï¼‰Transfer-Encoding: null\n\n2.æœåŠ¡å™¨æ²¡æ³•æå‰çŸ¥é“èµ„æºçš„å¤§å°ï¼Œæˆ–è€…ä¸æ„¿æ„èŠ±è´¹èµ„æºæå‰è®¡ç®—èµ„æºå¤§å°ï¼Œå°±ä¼šæŠŠhttpå›å¤æŠ¥æ–‡ä¸­åŠ ä¸€ä¸ªheaderå«Transfer-Encoding:chunkedï¼Œå°±æ˜¯åˆ†å—ä¼ è¾“çš„æ„æ€ã€‚æ¯ä¸€å—éƒ½ä½¿ç”¨å›ºå®šçš„æ ¼å¼ï¼Œå‰è¾¹æ˜¯å—çš„å¤§å°ï¼Œåé¢æ˜¯æ•°æ®ï¼Œç„¶åæœ€åä¸€å—å¤§å°æ˜¯0ã€‚è¿™æ ·å®¢æˆ·ç«¯è§£æçš„æ—¶å€™å°±éœ€è¦æ³¨æ„å»æ‰ä¸€äº›æ— ç”¨çš„å­—æ®µã€‚\nContent-Length:nullTransfer-Encoding:chunked (æ¥ä¸‹æ¥çš„bodyæˆ‘è¦ä¸€å—ä¸€å—çš„ä¼ ï¼Œæ¯ä¸€å—å¼€å§‹æ˜¯è¿™ä¸€å—çš„å¤§å°ï¼Œç­‰æˆ‘ä¼ åˆ°å¤§å°ä¸º0çš„å—æ—¶ï¼Œå°±æ²¡äº†ï¼‰\n\n3.æœåŠ¡å™¨ä¸çŸ¥é“èµ„æºçš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿä¸æ”¯æŒchunkedçš„ä¼ è¾“æ¨¡å¼ï¼Œé‚£ä¹ˆå°±æ—¢æ²¡æœ‰content-lengthå¤´ï¼Œä¹Ÿæ²¡æœ‰transfer-encodingå¤´ï¼Œè¿™ç§æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨çŸ­è¿æ¥ï¼Œä»¥è¿æ¥ç»“æŸæ¥æ ‡ç¤ºæ•°æ®ä¼ è¾“ç»“æŸï¼Œä¼ è¾“ç»“æŸå°±èƒ½çŸ¥é“å¤§å°äº†ã€‚è¿™æ—¶å€™æœåŠ¡å™¨è¿”å›çš„headeré‡ŒConnectionä¸€å®šæ˜¯closeã€‚\nContent-Length:null Transfer-Encoding:null Connection:close(æˆ‘ä¸çŸ¥é“å¤§å°ï¼Œæˆ‘ä¹Ÿç”¨ä¸äº†chunkedï¼Œå•¥æ—¶å€™æˆ‘å…³äº†tcpè¿æ¥ï¼Œå°±è¯´æ˜ä¼ è¾“ç»“æŸäº†ï¼‰\n\nå®éªŒæˆ‘é€šè¿‡nginxåœ¨è™šæ‹Ÿæœºé‡Œåšå®éªŒï¼Œé»˜è®¤nginxæ˜¯æ”¯æŒchunkedæ¨¡å¼çš„ï¼Œå¯ä»¥å…³æ‰ã€‚\nä½¿ç”¨çš„ä»£ç å¦‚ä¸‹ï¼Œå¯èƒ½ä¼šè°ƒæ•´å‚æ•°ã€‚\nstatic void update() throws IOException &#123;    URL url = new URL(&quot;http://172.16.59.129:8000/update/test.so&quot;);    HttpURLConnection conn = (HttpURLConnection) url.openConnection();    //conn.setRequestProperty(&quot;Accept-Encoding&quot;, &quot;gzip&quot;);    //conn.setRequestProperty(&quot;Connection&quot;, &quot;keep-alive&quot;);    conn.connect();    if(conn.getResponseCode() == 200) &#123;        System.out.println(conn.getHeaderFields().keySet());        System.out.println(conn.getHeaderField(&quot;transfer-encoding&quot;));        System.out.println(conn.getHeaderField(&quot;Content-Length&quot;));        System.out.println(conn.getHeaderField(&quot;Content-Encoding&quot;));        System.out.println(conn.getHeaderField(&quot;Connection&quot;));    &#125;&#125;\n\n1.nginxåœ¨å¼€å¯chunked_transfer_encodingçš„æ—¶å€™(1) åœ¨reqeust headeré‡Œä¸ä½¿ç”¨gzipï¼Œä¹Ÿå°±æ˜¯ä¸åŠ accept-encoding: gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n69M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n3072M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\nå¯ä»¥å‘ç°nginxä¸ç®¡èµ„æºå¤šå¤§ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸æ¥å—gzipçš„å‹ç¼©æ ¼å¼ï¼Œå°±ä¸ä¼šä½¿ç”¨chunkedæ¨¡å¼ï¼Œè€Œä¸”è·Ÿæ˜¯å¦ä½¿ç”¨çŸ­è¿æ¥æ²¡å…³ç³»ã€‚\n(2)åœ¨request headeré‡ŒåŠ å…¥gzipï¼Œaccepting-encoding: gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\n69M\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\n3072M\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\nå¯ä»¥çœ‹åˆ°nginxåœ¨å¼€å¯chunked_transfer_encodingï¼Œå¹¶ä¸”å®¢æˆ·ç«¯æ¥å—gzipçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨chunkedæ¨¡å¼ï¼Œnginxå¼€å¯gzipåä¸ä¼šè®¡ç®—èµ„æºçš„å¤§å°ï¼Œç›´æ¥ç”¨chunkedæ¨¡å¼ã€‚\n2.nginxå…³é—­chunked_transfer_encoding(1) åœ¨reqeust headeré‡Œä¸ä½¿ç”¨gzipï¼Œä¹Ÿå°±æ˜¯ä¸åŠ accept-encoding:gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n69M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n3072M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\nå› ä¸ºèƒ½å¾ˆå®¹æ˜“çš„çŸ¥é“æ–‡ä»¶å¤§å°ï¼Œæ‰€ä»¥nginxè¿˜æ˜¯èƒ½è¿”å›content-lengthã€‚\n(2)åœ¨request headeré‡ŒåŠ å…¥gzipï¼Œaccepting-encoding:gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\n69M\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\n3072M\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\nè¿™å°±æ˜¯ä¸Šé¢è¯´çš„ç¬¬ä¸‰ç§æƒ…å†µï¼Œä¸çŸ¥é“å¤§å°ï¼Œä¹Ÿä¸æ”¯æŒtrunkedï¼Œé‚£å°±å¿…é¡»ä½¿ç”¨çŸ­è¿æ¥æ¥æ ‡ç¤ºç»“æŸã€‚\né—®é¢˜è§£å†³æ–¹æ¡ˆå’¨è¯¢äº†ä¸­é—´ä»¶ç»„çš„åŒäº‹ï¼Œä»¥å‰ä¹Ÿé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œå› ä¸ºå‡çº§äº†Weblogicå¯¼è‡´å®¢æˆ·ç«¯è§£æXMLå‡ºé”™ï¼Œå› ä¸ºä½¿ç”¨äº†chunkedæ¨¡å¼ï¼Œä¸­é—´æœ‰ä¸€äº›æ ¼å¼åŒ–çš„å­—ç¬¦ï¼Œè€Œå®¢æˆ·ç«¯è§£æçš„ä»£ç å¹¶æ²¡æœ‰è€ƒè™‘chunkedæ¨¡å¼çš„è§£æï¼Œå¯¼è‡´è§£æå‡ºé”™ã€‚\nå› ä¸ºæˆ‘ä»¬å®¢æˆ·ç«¯å¿…é¡»ç”¨content-lengthå±•ç¤ºè¿›åº¦ï¼Œå› æ­¤ä¸èƒ½ç”¨chunkedæ¨¡å¼ï¼ŒWeblogicå¯ä»¥æŠŠchunkedæ¨¡å¼å…³é—­ã€‚ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š\n#!java weblogic.WLST connect(&#x27;usernameâ€™,&#x27;password&#x27;, &#x27;t3://localhost:7001&#x27;)edit()startEdit()cd(&quot;Servers/AdminServer/WebServer/AdminServer&quot;)cmo.setChunkedTransferDisabled(true)save()activate()exit()\n\næ”¹äº†ä¹‹åï¼Œç¡®å®ä¸è¿”å›chunkedäº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰content-lengthï¼Œå› ä¸ºWeblogicå°±æ˜¯ä¸æå‰è·å–æ–‡ä»¶å¤§å°ï¼Œè€Œæ˜¯å¼ºåˆ¶åŠ äº†connection:closeï¼Œä¹Ÿå°±æ˜¯å‰è¾¹è¯´çš„ç¬¬ä¸‰ç§ï¼Œé€šè¿‡è¿æ¥ç»“æŸæ ‡è¯†æ•°æ®ç»“æŸã€‚æœ€ååªèƒ½æŠŠè¿™äº›èµ„æºæ”¾å€’apacheé‡Œäº†ã€‚\næ€»ç»“ä¸€ä¸ªå¥½çš„httpå®¢æˆ·ç«¯ï¼Œå¿…é¡»å……åˆ†å®ç°åè®®ï¼Œä¸ç„¶å°±å¯èƒ½å‡ºé—®é¢˜ï¼Œæµè§ˆå™¨å¯¹äºæœåŠ¡ç«¯å¯èƒ½äº§ç”Ÿçš„å„ç§æƒ…å†µéƒ½å¾ˆå¥½çš„åšäº†å¤„ç†ï¼Œä½†æ˜¯è‡ªå·±å®ç°httpåè®®çš„è§£ææ—¶ä¸€å®šå¾—æ³¨æ„è€ƒè™‘å¤šç§æƒ…å†µã€‚\næ–‡ç« ä½œè€…ï¼šç‰›ç«‹æ–°åŸæ–‡é“¾æ¥ï¼šhttps://www.cnblogs.com/nxlhero/p/11670942.html\n\n","categories":["ç©ä¸ŠLinux"],"tags":["ç½‘ç»œ","http","nginx"]},{"title":"ã€Linuxã€‘ä¿®æ”¹è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨çš„hostname","url":"/2022/05/13/note_Linux/3%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84hostname/","content":"ä»Šå¤©æƒ³ä¿®æ”¹äº‘ä¸»æœºçš„hostnameï¼Œä½†æ˜¯è…¾è®¯äº‘çš„æ§åˆ¶å°é‡Œé¢å¥½åƒä¸èƒ½ç›´æ¥æ”¹è¿™ä¸ªåå­—\néœ€è¦åœ¨rootç”¨æˆ·é‡Œé¢ä¿®æ”¹ï¼\n\n\n\nå‚è€ƒhttps://cloud.tencent.com/developer/article/1190061\n\n\nä¿®æ”¹å‰ï¼šä¿®æ”¹åï¼š\n1.æŸ¥çœ‹å½“å‰çš„ä¸»æœºåç§°hostname\n\n2 .ä¸´æ—¶ä¿®æ”¹ä¸»æœºåç§°ä¸å»ºè®®ä½¿ç”¨ï¼Œé‡å¯ä¹‹ååˆä¼šè¿˜åŸ\n//hostname ä¸»æœºåç§°hostname XXX\n\n3.æ°¸ä¹…ä¿®æ”¹ä¸»æœºåç§°//hostnamectl set-hostname ä¸»æœºåç§°hostnamectl set-hostname XXX\n\n4.é‡å¯æœåŠ¡é‡å¯åæ•ˆæœå°±å‡ºç°äº†\nreboot\nè°¢è°¢ä½ ï¼ŒBT7274\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘æƒé™ç®¡ç†","url":"/2022/07/13/note_Linux/5linux%E6%9D%83%E9%99%90/","content":"Linuxéƒ¨åˆ†çš„å†…å®¹ï¼Œæˆ‘ä»¥æƒé™ç®¡ç†ä½œä¸ºèµ·å§‹ã€‚\n\n\nå…³äºLinuxå‘½ä»¤è¡Œæ“ä½œçš„éƒ¨åˆ†ï¼Œå¤§å®¶å¯ä»¥å»ç½‘ä¸Šæœæœï¼Œæ•™ç¨‹å¾ˆå¤šï¼Œä¸”å…¨é¢ï¼šã€é“¾æ¥ã€‘ã€‚è¿™é‡Œæˆ‘å°±ä¸å†æŠŠç›¸åŒçš„ä¸œè¥¿å¤è¿°ä¸€éäº†ï¼Œæ¯•ç«ŸLinuxå‘½ä»¤è¿™ç§ä¸œè¥¿ï¼Œä½ ä¸ä¼šçš„æ—¶å€™å¯ä»¥å»æŸ¥ï¼Œå¸¸è§çš„å‘½ä»¤æ•²å¤šäº†è‚¯å®šå¿˜ä¸æ‰\nä¸å¤šè¯´ï¼Œå¼€å§‹Linuxæƒé™æ“ä½œçš„å†…å®¹å§ï¼\n\næœ¬ç¯‡åšå®¢æ‰€æœ‰æ¼”ç¤ºå‡åœ¨CentOS7.6ä¸‹è¿›è¡Œ\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯æƒé™ï¼Ÿæƒé™æ˜¯ç”¨äºå¯¹ç”¨æˆ·è¿›è¡Œçº¦æŸçš„ã€‚æ­£å¥½æ¯”è§†é¢‘ç½‘ç«™çš„vipä¸€æ ·ï¼Œæ²¡æœ‰vipæƒé™ï¼Œä½ å°±çœ‹ä¸åˆ°åªæœ‰vipæ‰èƒ½è§‚çœ‹çš„å½±ç‰‡ã€‚\n1.1 rootå’Œuseråœ¨linuxä¸­ï¼Œç”¨æˆ·åˆ†ä¸ºä¸¤ç§\n\nrootï¼šè¶…çº§ç”¨æˆ·\nå…¶ä»–ï¼šæ™®é€šç”¨æˆ·\n\nå…¶ä¸­rootç”¨æˆ·çš„æƒé™æœ€é«˜ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿé‡Œé¢ä¸ºæ‰€æ¬²ä¸ºã€‚å…¶æ‰€ä½œæ“ä½œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå½±å“ç”¨æˆ·çš„ä½¿ç”¨ç¯å¢ƒã€‚æ¯”å¦‚ä½ åœ¨rooté‡Œé¢å®‰è£…äº†æŸä¸ªç¨‹åºï¼Œé‚£ä¹ˆæ‰€æœ‰å­ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¨‹åºï¼Œåä¹‹ä¸è¡Œã€‚\nåœ¨rootç”¨æˆ·ä¸­ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡su userè¿™ä¸ªå‘½ä»¤åˆ‡æ¢åˆ°ä»»ä½•å­ç”¨æˆ·è€Œä¸ç”¨è¾“å…¥å¯†ç ã€‚ä½†æ˜¯ä»å­ç”¨æˆ·åˆ‡æ¢åˆ°rootåˆ™éœ€è¦è¾“å…¥rootç”¨æˆ·çš„å¯†ç ã€‚æ‰€ä»¥ï¼Œä¿è¯ä½ çš„rootç”¨æˆ·å¯†ç ä¸è¢«ä»–äººçŸ¥é“æ˜¯å¾ˆé‡è¦çš„ï¼\n\n2.æƒé™ç®¡ç†æœ¬ç¯‡åšå®¢ä¸»è¦å…³æ³¨Linuxä¸­çš„æ–‡ä»¶æƒé™\n2.1 æ–‡ä»¶è®¿é—®è€…åœ¨Linuxä¸­ï¼Œæ–‡ä»¶è®¿é—®è€…åˆ†3ç±»ï¼Œå¯¹äºæ–‡ä»¶çš„æƒé™ä¹Ÿåˆ†3ç±»\n\n\n\nè®¿é—®è€…\næ–‡ä»¶æƒé™\n\n\n\næ‹¥æœ‰è€… owner\nr è¯»\n\n\næ‰€å±ç»„ grouper\nw å†™\n\n\nå…¶ä»–ç”¨æˆ· other\nx æ‰§è¡Œ\n\n\næˆ‘ä»¬è¦æ€ä¹ˆçœ‹ä¸€ä¸ªæ–‡ä»¶å¯¹äºè¿™ä¸‰ä½ä¸åŒçš„è®¿é—®è€…çš„æƒé™æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\nä½¿ç”¨llæˆ–è€…ls -lå‘½ä»¤å³å¯çœ‹åˆ°åŒºåˆ«\n\nè¿™é‡Œæ–‡ä»¶çš„å‰ç¼€ï¼Œå³æ ‡è¯†äº†ä¸€ä¸ªæ–‡ä»¶çš„å¯¹äº3ä¸ªè§’è‰²çš„æƒé™ã€‚\nå…¶ä¸­muxueæ˜¯æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼Œrootä»£è¡¨æ‰€å±ç»„ã€‚\n2.1.1 linuxçš„ç»„è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä¹‹å‰çš„è…¾è®¯äº‘å¤šäººä¸€æœºçš„åšå®¢ä¸­ï¼Œæ˜¯ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åˆ›å»ºå­ç”¨æˆ·çš„ğŸ‘‡\n\nè¿™é‡Œå°±æŠŠå­ç”¨æˆ·åˆ†åˆ°äº†rootç»„ä¸‹é¢ï¼Œä½œç”¨æ˜¯è®©å­ç”¨æˆ·å¯ä»¥é€šè¿‡suè·å¾—rootæƒé™\nå¦‚æœä½ åœ¨åˆ›å»ºç”¨æˆ·çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šç»„çš„è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸ç”¨æˆ·ååŒåçš„ç»„ã€‚\n\nç»„æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nå½“åœ¨ä¸€ä¸ªå…¬å¸ä¸­ï¼Œå¤šäººä½¿ç”¨åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡ç»„æ¥å¯¹å­ç”¨æˆ·è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç±»ã€‚å³Aç»„ä¸­å…¶ä»–ç”¨æˆ·ï¼ˆgrouperï¼‰å¯ä»¥æŸ¥çœ‹åˆ°å­ç”¨æˆ·A1çš„ä»£ç ï¼Œä½†æ˜¯Bç»„çš„ç”¨æˆ·ï¼ˆotherï¼‰éƒ½çœ‹ä¸åˆ°Aç»„å†…çš„ä¸œè¥¿ã€‚\nè¿™æ ·å°±èƒ½å®ç°å¤šä¸ªå°ç»„å¼€å‘ä¸åŒçš„æ¿å—ï¼Œè€Œäº’ä¸å¹²æ‰°ã€‚\n\n2.1.2 å­¦ä¼šçœ‹æ–‡ä»¶å‰ç¼€è¯´å›æ­£é¢˜ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆçœ‹ä¸€ä¸ªæ–‡ä»¶å¤¹&#x2F;æ–‡ä»¶çš„å‰ç¼€å‘¢ï¼Ÿ\ndrwxr-xr-x 5 muxue root    4096 7æœˆ   3 11:56 code-rw-r--r-- 1 muxue root 1908226 2æœˆ  23 2021 get-pip.pydrwxr-xr-x 7 muxue root    4096 6æœˆ  26 08:10 GIT\n\n\nå…³äºç¬¬ä¸€åˆ—çš„æ–‡ä»¶ç±»å‹ï¼Œæœ‰ä¸‹é¢å‡ ç§\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ–‡ä»¶æƒé™çš„æŸ¥çœ‹æ–¹å¼ï¼Œè¦å¦‚ä½•ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„ç‰¹å®šæƒé™å‘¢ï¼Ÿ\n2.2 chmodä¿®æ”¹æƒé™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨chmodå‘½ä»¤æ¥ä¿®æ”¹æ–‡ä»¶æƒé™\nchmod u-r test.txt\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œç»™æ‹¥æœ‰è€…å»æ‰test.txtæ–‡ä»¶çš„ræƒé™ã€‚å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤æŠŠæƒé™åŠ å›å»\nchmod u+r test.txt\n\nåŒç†ï¼Œå¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€å±ç»„å’Œå…¶ä»–äººçš„æƒé™çš„è¯ï¼ŒæŒ‡å®šgå’Œoå³å¯\nchmod g-r test.txt //å»æ‰æ‰€å±ç»„çš„ræƒé™chmod o-rwx test.txt //å»æ‰å…¶ä»–ç”¨æˆ·çš„æ‰€æœ‰æƒé™\n\né™¤äº†ä¸Šé¢è¿™ç§ä¾æ¬¡ä¿®æ”¹çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨é€—å·éš”å¼€ï¼Œç”¨ä¸€æ¡å‘½ä»¤æå®š\nchmod u+rwx,g+rwx,o-rwx test.txt //ç»™æ‹¥æœ‰è€…ï¼Œæ‰€å±ç»„åŠ ä¸Šæ‰€æœ‰æƒé™ã€‚å»æ‰otherçš„æ‰€æœ‰æƒé™\n\nå¦‚æœä½ æƒ³æ‰¹é‡ä¿®æ”¹æˆåŒä¸€ä¸ªæƒé™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨aæ¥æŒ‡å®šall\nchmod a=rw test.txt\n\n\n2.2.1 ä»¥å…«è¿›åˆ¶ä¿®æ”¹æ–‡ä»¶æƒé™é™¤äº†ä¸Šé¢è¿™ä¸ª+å’Œ-æ¯”è¾ƒå¥½è¾©è®¤çš„æ–¹å¼ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡â€œå…«è¿›åˆ¶â€çš„æ–¹å¼æ¥ä¿®æ”¹æ–‡ä»¶æƒé™ã€‚\nå¯¹äºä¸€ä¸ªç”¨æˆ·æ¥è¯´ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™rwxï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒä¸äºŒè¿›åˆ¶è¿›è¡Œå¯¹åº”ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœ\nrwx111äºŒè¿›åˆ¶å¯¹åº”7\n\næ³¨æ„ï¼Œè¿™é‡Œçš„å…«è¿›åˆ¶å¹¶ä¸æ˜¯è¦é€šè¿‡å…«è¿›åˆ¶æ¥è¯»å†™æƒé™çš„ç¼–ç ï¼Œè€Œæ˜¯ç”¨äºŒè¿›åˆ¶æ¥è¯»å–åï¼Œå¯å¾—åˆ°æœ€é«˜æƒé™7ï¼ˆä¸ä¼šè¶…è¿‡7ï¼Œæ‰€ä»¥æ˜¯å…«è¿›åˆ¶ï¼‰\näº†è§£ä¸Šé¢è¿™ä¸ªæ–¹å¼åï¼Œä½ ä¾¿å¯ä»¥å†™å‡ºæ‰€æœ‰æƒé™ç±»å‹å¯¹åº”çš„ç¼–å·\n\n\n\næƒé™\näºŒè¿›åˆ¶\nå¯¹åº”ç¼–å·\n\n\n\nrwx\n111\n7\n\n\nrw-\n110\n6\n\n\nr-x\n101\n5\n\n\nrâ€“\n100\n4\n\n\n-w-\n010\n2\n\n\n-wx\n011\n3\n\n\nâ€“x\n001\n1\n\n\nå½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„æƒé™çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç”¨a=è¿™ç§ç›¸å¯¹å¤æ¿çš„æ–¹å¼ã€‚è€Œå¯ä»¥é€šè¿‡ç¼–ç æ¥ç›´æ¥æŒ‡å®š3ç±»ç”¨æˆ·çš„ä¸åŒæƒé™\nchmod 777 test.txt //ç»™æ‰€æœ‰ç”¨æˆ·ä¸ºrwxæƒé™chmod 664 test.txt //ç»™uå’Œgç”¨æˆ·ä¸ºrw-ï¼Œoç”¨æˆ·ä¸ºr--//â€¦â€¦\n\n2.3 rwxæƒé™åŒºåˆ«ä¿®æ”¹å®Œè¿™äº›æ–‡ä»¶åæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å’Œä¸€ä¸ªå¸¸è§„æ–‡ä»¶æ—¶ï¼Œä½œä¸ºæ‹¥æœ‰è€…ï¼Œé»˜è®¤æœ‰æ–‡ä»¶å¤¹çš„æ‰€æœ‰æƒé™å’Œæ–‡æœ¬æ–‡ä»¶çš„rwæƒé™ã€‚\n\n2.3.1 å¸¸è§„æ–‡ä»¶å…ˆæ¥çœ‹çœ‹test.cçš„å„ç§æƒé™æœ‰ä»€ä¹ˆä¸åŒå§ï¼\næˆ‘ä»¬å¯ä»¥é€šè¿‡catè¯»å–test.cæ–‡ä»¶çš„å†…å®¹ï¼Œè¿™ä¾¿æ˜¯è¯»æƒé™r\n\nè€Œé€šè¿‡vimã€nanoç­‰ç¼–è¾‘å™¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯å†™æƒé™w\nå¦‚æœæˆ‘ä»¬å»æ‰rå’Œwæƒé™ï¼Œå°±æ— æ³•è¯»ï¼Œä¹Ÿæ— æ³•å†™\n\nä½¿ç”¨nanoæ‰“å¼€test.cæ–‡ä»¶ï¼Œä¼šæœ‰ä»¥ä¸‹æŠ¥é”™\n\né‚£ä¹ˆå¯¹äºä¸€ä¸ªå¸¸è§„æ–‡ä»¶è€Œè¨€ï¼Œxæƒé™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\næˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨gccç­‰ç¼–è¯‘å™¨ç¼–è¯‘ä»£ç æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªa.outå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™é‡Œçš„xä¾¿æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„æ ‡è¯†ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ç”¨ç»¿è‰²æ ‡æ˜å‡ºæ¥äº†ã€‚\n\nå¦‚æœæˆ‘ä»¬ç»™test.cä¹ŸåŠ ä¸Šxæƒé™ï¼Œåˆ™å®ƒä¹Ÿä¼šå˜æˆç»¿è‰²ï¼Œå¯ä»¥ç›´æ¥ç”¨./test.cæ¥æ‰§è¡Œã€‚å½“ç„¶ï¼Œç›´æ¥æ‰§è¡Œä¸€ä¸ª.cæ–‡ä»¶æ˜¯æ²¡æœ‰æ„ä¹‰çš„\n\n2.3.2 æ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰\nåœ¨Linuxä¸‹ï¼Œä¸€åˆ‡çš†æ–‡ä»¶ã€‚æˆ‘ä»¬æ‰€è¯´çš„ç›®å½•ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶\næ–‡ä»¶=å†…å®¹+å±æ€§\nåœ¨ç›®å½•ä¸­ä¿å­˜çš„æ˜¯æ–‡ä»¶çš„å±æ€§ï¼ˆåŒ…æ‹¬æ–‡ä»¶åï¼‰æˆ‘ä»¬æƒ³è®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼Œé¦–å…ˆè¦é€šè¿‡è·¯å¾„å»æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚\n\né‚£ä¹ˆå¯¹äºä¸€ä¸ªæ–‡ä»¶å¤¹è€Œè¨€ï¼Œrwxæƒé™åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå½“æˆ‘ä»¬ä½¿ç”¨lsçš„æ—¶å€™ï¼Œå…¶å®æ˜¯å¯ä»¥æŒ‡å®šè·¯å¾„çš„ï¼Œé»˜è®¤ä¸º.ï¼ˆå½“å‰è·¯å¾„ï¼‰\nå¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æ˜¾ç¤ºå‡ºäº†Mytestä¸­çš„my.txtæ–‡ä»¶ã€‚\nå¦‚æœæˆ‘ä»¬å»æ‰æ–‡ä»¶å¤¹çš„ræƒé™ï¼Œåœ¨æ‰§è¡Œlsã€‚å°±ä¼šæŠ¥é”™æƒé™ä¸å¤Ÿ\n\nå¾—å‡ºç»“è®ºï¼ŒlsæŸ¥çœ‹æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œéœ€è¦æ‹¥æœ‰æ–‡ä»¶å¤¹çš„ræƒé™ã€‚å³ä¾¿ä½ è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚æœæ²¡æœ‰ræƒé™ï¼Œä¾æ—§æ— æ³•ç”¨lsæ˜¾ç¤ºæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ã€‚\nä½†æ˜¯è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ‹¥æœ‰æ–‡ä»¶å¤¹çš„wæƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶ä»–æ–‡ä»¶æ‹·è´åˆ°Mytestæ–‡ä»¶å¤¹ä¸­\n\næŠŠræƒé™åŠ å›æ¥ï¼Œå¯ä»¥çœ‹åˆ°test.cæ–‡ä»¶å·²ç»è¢«æ‹·è´è¿›å»äº†\n\nè¿™ä¾¿æ˜¯wæƒé™çš„ä½œç”¨ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹ä¸­é—´çš„å†…å®¹ã€‚æ¯”å¦‚æ‹·è´å¦å¤–ä¸€ä¸ªæ–‡ä»¶åˆ°æ–‡ä»¶å¤¹ä¸­\n\nå»æ‰wæƒé™åï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•åˆ é™¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹\n\næœ€åï¼Œå¯¹äºæ–‡ä»¶å¤¹è€Œè¨€ï¼Œxæƒé™ä»£è¡¨çš„æ˜¯èƒ½å¦cdè¿›å…¥è¯¥æ–‡ä»¶å¤¹\n\n\næ­¤æ—¶è™½ç„¶æˆ‘ä»¬æ— æ³•cdè¿›å…¥ï¼Œä½†æˆ‘ä»¬æ‹¥æœ‰rwæƒé™ï¼Œå¯ä»¥ç›´æ¥ä»å¤–éƒ¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼Œå¹¶è¿›è¡Œè®¿é—®å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯nopeï¼ä¸å¯ä»¥\n\nå› ä¸ºåœ¨Linuxä¸­ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½è¦é€šè¿‡è·¯å¾„æ¥è¿›è¡Œã€‚è·¯å¾„ä¹Ÿæ˜¯è®¿é—®æ–‡ä»¶å¤¹çš„ä¸€ä¸ªæ–¹å¼ï¼ˆéœ€è¦xæƒé™ï¼‰æ­¤æ—¶å› ä¸ºæ— æ³•cdè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡è·¯å¾„è®¿é—®è¿™ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ã€‚æ‰€ä»¥æ²¡äº†xæƒé™ä¹‹åå•¥äº‹éƒ½å¹²ä¸äº†\nå½“æˆ‘ä»¬æŠŠxæƒé™åŠ å›æ¥ä¹‹åï¼Œå°±å¯ä»¥è¿™ä¹ˆåšäº†\n\n\nå¦‚æœå¯¹äºç›®å½•åªæ²¡æœ‰ræƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œå¯åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹ï¼Œä½†ä¸å¯è¯»å–å…¶ä¸­å†…å®¹\nå¦‚æœå¯¹äºç›®å½•åªæ²¡æœ‰wæƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œå…è®¸åœ¨ç›®å½•ä¸‹lsæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ï¼Œä½†ä¸å¯ä»¥ä¿®æ”¹é‡Œé¢çš„æ–‡ä»¶\nå¦‚æœç›®å½•æ²¡æœ‰rwæƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ä¹Ÿä¸èƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶å†…å®¹\nå¦‚æœæ²¡æœ‰xæƒé™ï¼Œæ— æ³•è¿›å…¥ï¼Œä¹Ÿæ— æ³•ä¿®æ”¹&#x2F;æŸ¥çœ‹å…¶ä¸­å†…å®¹\n\nå…³äºæœ€åä¸€ç‚¹ï¼Œä¸åŒç³»ç»Ÿçš„å®ç°å¯èƒ½ä¸ä¸€æ ·ã€‚æˆ‘çš„ç³»ç»Ÿæ˜¯CentOS7.6ï¼Œè¯·ä»¥ä½ çš„å®é™…æƒ…å†µä¸ºå‡†ï¼\n\n2.4 chown&#x2F;chgrp2.4.1 chownä¿®æ”¹æ‹¥æœ‰è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡ä»¤ï¼ŒæŠŠä¸€ä¸ªæ–‡ä»¶çš„æ‹¥æœ‰è€…ä¿®æ”¹ä¸ºæŒ‡å®šç”¨æˆ·\nchown [å‚æ•°] ç”¨æˆ·å æ–‡ä»¶å\n\næ³¨æ„ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ˜¯ä¸å…è®¸ä½ ä¿®æ”¹æ–‡ä»¶çš„æ‹¥æœ‰è€…çš„ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¯­å¥å‰é¢åŠ sudoçš„æ–¹å¼ï¼ŒçŸ­æš‚è·å–rootæƒé™ï¼Œå¯¹æ–‡ä»¶æ‹¥æœ‰è€…è¿›è¡Œä¿®æ”¹\n\nè¿™é‡Œå¦‚æœæç¤ºä¸åœ¨sudoer flisé‡Œé¢ï¼Œå¯ä»¥å‚è€ƒåšå®¢é‡Œé¢ç¬¬å…«ç‚¹çš„è§£å†³æ–¹æ¡ˆ\n\n\næ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä¿®æ”¹ä¸ºäº†rootç”¨æˆ·ï¼Œrootç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒé™ï¼å³ä¾¿è¿™æ˜¯å­ç”¨æˆ·çš„æ–‡ä»¶ï¼Œrootç”¨æˆ·ä¹Ÿå¯ä»¥ä¸ºæ‰€æ¬²ä¸ºè¿›è¡Œä¿®æ”¹å’Œåˆ é™¤ï¼Œä¸å—ä»»ä½•æƒé™çš„çº¦æŸã€‚\nå¦‚æœæˆ‘ä»¬æŠŠç”¨æˆ·æ”¹æˆå…¶ä»–å­ç”¨æˆ·ï¼Œå…¶å®è¿™ä¸ªå­ç”¨æˆ·ä¾æ—§è®¿é—®ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚\n\nè¿™å°±å¥½æ¯”ä½ å‘Šè¯‰ä½ çš„æœ‹å‹ï¼Œæˆ‘è¦é€ä½ ä¸€ä¸ªé”®ç›˜ã€‚è¿™ä¸ªé”®ç›˜çš„æ‹¥æœ‰è€…å³å°†å˜æˆä½ çš„æœ‹å‹ã€‚ä½†æ˜¯ä½ æ²¡æœ‰æŠŠé”®ç›˜ç»™ä½ æœ‹å‹ï¼Œé”®ç›˜è¿˜åœ¨ä½ å®¶é‡Œï¼Œä½ çš„æœ‹å‹ä¾æ—§ç”¨ä¸äº†è¿™ä¸ªé”®ç›˜ã€‚\n\næ¢åˆ°Linuxç¯å¢ƒä¸­ï¼Œå°±æ˜¯åœ¨Açš„ç”¨æˆ·è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªBç”¨æˆ·çš„æ–‡ä»¶ã€‚ä½†ç”±äºBç”¨æˆ·æ— æ³•è®¿é—®Açš„ç”¨æˆ·è·¯å¾„ï¼Œæ‰€ä»¥ä¾æ—§æ— æ³•è®¿é—®åˆ°è¿™ä¸ªâ€œå±äºBçš„æ–‡ä»¶â€\n2.4.2 chgrpä¿®æ”¹æ‰€å±ç»„chgrp [å‚æ•°] ç”¨æˆ·å æ–‡ä»¶å\n\nè¿™é‡Œå› ä¸ºæˆ‘çš„ç¯å¢ƒé‡Œé¢æ²¡æœ‰å…¶ä»–ç»„ï¼Œæ‰€ä»¥å°±ä¸æ¼”ç¤ºè¯¥åŠŸèƒ½çš„æˆæœäº†\n\n\n2.5 å…³äºé»˜è®¤æƒé™Linuxä¸­æœ‰ä¸€ä¸ªé»˜è®¤æƒé™ï¼š\n\né»˜è®¤ç›®å½•æƒé™777\né»˜è®¤å¸¸è§„æ–‡ä»¶666\n\nå¯ä¸ºä»€ä¹ˆæˆ‘åˆ›å»ºçš„ç›®å½•æ–‡ä»¶çš„æƒé™æ˜¯755ï¼Œè€Œå¸¸è§„æ–‡ä»¶çš„æƒé™æ˜¯644å‘¢ï¼Ÿ\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨umaskå‘½ä»¤æŸ¥çœ‹æƒé™æ©ç \n\nè¿™ä¸ªæƒé™æ©ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ\næŠ›å¼ƒé¦–ä½ä¸çœ‹ï¼Œåé¢çš„æ˜¯022ã€‚æ ¹æ®2.2.1ä¸­æåˆ°çš„å…«è¿›åˆ¶æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è§£è¯»å‡ºè¿™ä¸ªæƒé™ä¸º\n--- -w- -w-\n\næƒé™æ©ç çš„ä½œç”¨å°±æ˜¯ï¼Œåœ¨æƒé™æ©ç ä¸­å‡ºç°çš„æƒé™ï¼Œåœ¨å®é™…åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™ä¸ä¼šå‡ºç°ï¼\nä»”ç»†è§‚å¯Ÿä½ å°±å¯ä»¥å‘ç°ï¼Œè¿™é‡Œæˆ‘çš„æ–‡ä»¶å¤¹æƒé™å¦‚ä¸‹ï¼Œæ­£å¥½å’Œæ©ç ç›¸åï¼\nrwx rwx rwx //é»˜è®¤æƒé™777--- -w- -w- //æ©ç 022rwx r-x r-x //å®é™…åˆ›å»º755\n\nè€Œå¸¸è§„æ–‡ä»¶çš„é»˜è®¤æƒé™666æ˜¯rw-rw-rw-ï¼Œå®é™…åˆ›å»ºçš„ç»“æœä¹Ÿå’Œæ©ç ç›¸åï¼\nrw- rw- rw- //é»˜è®¤æƒé™666--- -w- -w- //æ©ç 022rw- r-- r-- //å®é™…æƒé™644\n\nå¦‚ä½•è®¡ç®—ï¼Ÿè¿™é‡Œçš„æƒé™å¹¶ä¸æ˜¯ç®€å•çš„ç›¸å‡å¾—å‡ºæ¥çš„ï¼Œå…¶æ˜¯é€šè¿‡é»˜è®¤æƒé™&amp;(~umask)å¾—å‡ºçš„\n\nå…ˆå¯¹é»˜è®¤æƒé™çš„umaskè¿›è¡ŒæŒ‰ä½å–å\nå†å°†å–ååçš„ç»“æœå’Œé»˜è®¤æƒé™ï¼ˆç›®å½•777ï¼Œå¸¸è§„æ–‡ä»¶666ï¼‰æŒ‰ä½ä¸å¾—å‡º\n\n2.5 fileå‘½ä»¤é™¤äº†ç”¨æ–‡ä»¶å±æ€§çš„ç¬¬ä¸€ä½æ¥æŸ¥çœ‹æˆ‘ä»¬æ–‡ä»¶çš„å±æ€§ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨fileå‘½ä»¤æ¥æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„æ–‡ä»¶å±æ€§\n\nå½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªCè¯­è¨€æ–‡ä»¶ï¼Œå¹¶å¯¹ä»–è¿›è¡Œç¼–è¯‘åï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªCçš„æºæ–‡ä»¶å’Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶\n\nå¸¸ç”¨é€‰é¡¹å¦‚ä¸‹\n-c è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™æˆ–åˆ†æç¨‹åºæ‰§è¡Œçš„æƒ…å½¢-z å°è¯•å»è§£è¯»å‹ç¼©æ–‡ä»¶çš„å†…å®¹\n\n2.6 ç²˜æ»ä½ç®€å•ä»‹ç»ï¼Œç²˜æ»ä½å°±ç›¸å½“äºç»™ä¸€ä¸ªç›®å½•ä¸Šäº†èƒ¶æ°´ï¼Œå…¶ä»–äººæ— æ³•åˆ é™¤è¢«é»ä½çš„ç›®å½•ï¼ˆå’Œç›®å½•ä¸‹çš„æ–‡ä»¶ï¼‰ï¼\nchmod +t test\n\nå‰é¢æåˆ°äº†ï¼Œä½œä¸ºotherï¼Œä½ å¯ä»¥å»è®¿é—®åˆ«äººçš„ç›®å½•ï¼ˆåªè¦otheræœ‰å¯¹åº”çš„æƒé™ï¼‰\næ¯”å¦‚è¿™é‡Œæˆ‘ç”¨\tmuxueç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªtest1.cæ–‡ä»¶ï¼Œå¦å¤–ä¸€ä¸ªç”¨æˆ·å¯ä»¥è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½å†™å…¥\n\nvimæ‰“å¼€è¯¥æ–‡ä»¶ä¼šæŠ¥é”™\n\nä½†è¿™é‡Œæœ‰ä¸€ä¸ªbugå°±æ˜¯ï¼Œå³ä¾¿ä½ æ²¡æœ‰é‚£ä¸ªç›®å½•å†…æ–‡ä»¶çš„æƒé™ï¼Œä½ ä¾æ—§å¯ä»¥åˆ é™¤è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼\n\nç²˜æ»ä½çš„å­˜åœ¨å°±æ˜¯ä¿æŠ¤æ•´ä¸ªç›®å½•ï¼Œä¸å…è®¸è¢«å…¶ä»–ç”¨æˆ·åˆ é™¤ï¼\n\næ·»åŠ ç²˜æ»ä½åï¼Œå¯ä»¥çœ‹åˆ°åœ¨Otherçš„æƒé™å¤„å‡ºç°äº†ä¸€ä¸ªå¤§å†™çš„T\nè¿™æ—¶å€™æˆ‘ä»¬å†å°è¯•ç”¨å¦å¤–ä¸€ä¸ªè´¦æˆ·åˆ é™¤ï¼Œå°±ä¼šæŠ¥é”™â€”â€”å—ï¼Ÿ\n\nä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„é”™è¯¯ç¤ºèŒƒï¼Œç²˜æ»ä½ä¿æŠ¤åªèƒ½åœ¨rootä¸‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸”ç²˜æ»ä½åªèƒ½ç»™ç›®å½•ä¸Šï¼Œå¹¶ä¸èƒ½å•ç‹¬ç»™ä¸€ä¸ªæ–‡ä»¶ä¸Šï¼\n\nç»™ç›®å½•ä¸Šäº†ç²˜æ»ä½åï¼Œå†å°è¯•åˆ é™¤ï¼Œç³»ç»Ÿä¼šæŠ¥è­¦å‘Š\n\nè¢«ä¿æŠ¤åçš„ç›®å½•ï¼Œè¯¥ç›®å½•å’Œç›®å½•ä¸‹çš„æ–‡ä»¶åªèƒ½è¢«ä¸‹é¢çš„ç”¨æˆ·åˆ é™¤ï¼š\n\nè¶…çº§ç”¨æˆ·root\nç›®å½•çš„æ‰€æœ‰è€…\nè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…\n\nå…³äºæœ€åä¸€ç‚¹ï¼Œè™½ç„¶ç²˜æ»ä½ä¿æŠ¤äº†ç›®å½•ä¸‹çš„å…¶ä»–äººçš„æ–‡ä»¶ä¸èƒ½è¢«ä½ åˆ é™¤ã€‚ä½†è¿™ä¸å½±å“ä½ åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»º&#x2F;å†™å…¥&#x2F;åˆ é™¤ä½ è‡ªå·±çš„æ–‡ä»¶\n\nç»“è¯­å…³äºlinuxæƒé™ç®¡ç†åˆ°è¿™å°±ç»“æŸå•¦ï¼\nlinuxæ“ä½œåœ¨æœªæ¥æ‰¾å·¥ä½œçš„æ—¶å€™éå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å­¦ä¹ çš„æ—¶å€™å’Œå…¶ä»–ç«¥é‹æ‹‰å¼€å·®è·çš„ä¸€ç¯ã€‚\n\nå› ä¸ºå¾ˆå¤šäººå¯èƒ½ä¸Šå®Œæœ¬ç§‘4å¹´éƒ½ä¸çŸ¥é“ä¼ä¸šæ‹›è˜çš„æ—¶å€™ä¼šè€ƒlinuxæ“ä½œğŸ˜¥\n\næœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼çœ‹åˆ°äº†å°±ä¼šå›å¤çš„\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘ä¸€äº›å·¥å…·çš„ç®€å•ä½¿ç”¨ï¼Œvim/gcc/gdb/make","url":"/2022/08/07/note_Linux/6gdb_g++_make_vim/","content":"æœ¬ç¯‡åšå®¢å°†ä»‹ç»linuxä¸‹é¢ä¸€äº›ç®€å•å·¥å…·çš„ä½¿ç”¨\n\n\n[TOC]\n1.vimç¼–è¾‘å™¨1.1å®‰è£…vimsudo apt-get install vim\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvimç¼–è¾‘å™¨ä¸‹ä¸èƒ½ä½¿ç”¨CTRL+Sæ¥ä¿å­˜æ–‡ä»¶ï¼Œå› ä¸ºåœ¨linuxä¸­è¿™ä¸ªå¿«æ·é”®çš„ä½œç”¨æ˜¯æš‚åœè¯¥ç»ˆç«¯ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå¡ä½ï¼Œè¿™æ—¶å€™ä½¿ç”¨CTRL+Qå–æ¶ˆæš‚åœå°±å¯ä»¥äº†ã€‚\n1.2æ–‡æœ¬æ“ä½œä»¥ä¸‹æ˜¯å‘½ä»¤æ¨¡å¼ä¸‹çš„ä¸€äº›æ–‡æœ¬æ‰¹é‡åŒ–æ“ä½œ\nyy å¤åˆ¶å½“å‰è¡Œï¼Œnyyå¤åˆ¶nè¡Œp  ç²˜è´´å†å½“å‰è¡Œçš„åé¢ï¼Œnpç²˜è´´næ¬¡å‰ªè´´æ¿çš„å†…å®¹dd å‰ªåˆ‡ï¼ˆåˆ é™¤ï¼‰å½“å‰è¡Œï¼Œnddæ“ä½œnè¡Œu  æ’¤é”€ctrl+r  é‡åšshift+g å…‰æ ‡å¿«é€Ÿå®šä½åˆ°æ–‡æœ¬æœ«å°¾gg å…‰æ ‡å¿«é€Ÿç§»åŠ¨åˆ°æ–‡æœ¬å¤´n+shift+g å…‰æ ‡å®šä½åˆ°æ–‡æœ¬çš„ç¬¬nè¡Œshift+4 å…‰æ ‡å®šä½åˆ°è¯¥è¡Œæœ«å°¾shift+6 å…‰æ ‡å®šä½åˆ°è¯¥è¡Œå¼€å¤´w,b   ä»¥å•è¯ä¸ºå•ä½è¿›è¡Œç§»åŠ¨å…‰æ ‡h,j,k,l  å·¦ã€ä¸‹ã€ä¸Šã€å³shift+`  å¤§å°å†™å¿«é€Ÿåˆ‡æ¢r   æ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ï¼Œæ”¯æŒnrshift+r  æ‰¹é‡åŒ–æ›¿æ¢x  åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ï¼Œnxåˆ é™¤nä¸ª\n\nvimè¿›å…¥æ’å…¥æ¨¡å¼çš„å¿«æ·é”®æœ‰a i oï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„åŠŸèƒ½\n1.3åº•è¡Œæ¨¡å¼çš„æ“ä½œvimç¼–è¾‘å™¨ä¸­åº•è¡Œæ¨¡å¼çš„ä¸€äº›æ“ä½œå¦‚ä¸‹ã€‚åœ¨å…¶ä»–æ¨¡å¼ä¸‹æŒ‰escå³é€€å‡ºåˆ°åº•è¡Œæ¨¡å¼\n:w   &quot;åªä¿å­˜:q   &quot;ä¸ä¿å­˜é€€å‡º:wq  &quot;ä¿å­˜å¹¶é€€å‡º:reg &quot;æ‰“å¼€vimçš„å¯„å­˜å™¨é¢æ¿:syntax on &quot;å¼€å¯è¯­æ³•é«˜äº®:set nu    &quot;æ˜¾ç¤ºè¡Œå·:set nonu  &quot;å–æ¶ˆè¡Œå·æ˜¾ç¤º:set tabstop=4 &quot;è®¾ç½®tabçš„ç¼©è¿›ï¼Œé»˜è®¤ä¸º8:set softtabstop=4 &quot;softtabstopæ˜¯â€œé€¢8ç©ºæ ¼è¿›1åˆ¶è¡¨ç¬¦â€,å‰ææ˜¯ä½ tabstop=8:set shiftwidth=4 &quot;è®¾ç½®ç¨‹åºè‡ªåŠ¨ç¼©è¿›æ‰€ä½¿ç”¨çš„ç©ºæ ¼é•¿åº¦:set autoindent &quot;è‡ªåŠ¨å¯¹é½ä¸Šä¸€è¡Œï¼ˆè¿™ä¸ªé€‰é¡¹ä¼šå¯¼è‡´å¤åˆ¶çš„æ—¶å€™ä»£ç æ’ç‰ˆæ··ä¹±ï¼Œå¯ä»¥è€ƒè™‘å…³é—­ï¼Œæˆ–è€…å¼€å¯ç²˜è´´æ¨¡å¼ï¼‰:set paste &quot;å¼€å¯ç²˜è´´æ¨¡å¼:set mouse=a &quot;è®¾ç½®é¼ æ ‡æ¨¡å¼ï¼Œé»˜è®¤æ˜¯a:%s/A/B/g å°†å½“å‰æ–‡ä»¶ä¸­çš„Aå…¨éƒ¨æ›¿æ¢æˆB\nä¸Šé¢çš„ä¸€äº›é…ç½®ï¼Œå†™å…¥.vimrcé…ç½®æ–‡ä»¶å³å¯é•¿æ—¶ç”Ÿæ•ˆã€‚\nå¦‚æœéœ€è¦å†™å…¥.vimrcé…ç½®æ–‡ä»¶ï¼Œéœ€è¦å…ˆæŠŠ:å’Œæ³¨é‡Šéƒ½å»æ‰\n2.gcc&#x2F;g++ç¼–è¯‘å™¨g++æ“ä½œå’Œgccæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨gccä½œä¸ºæ¼”ç¤º\n2.1linuxä¸‹ä½¿ç”¨ä¸åŒå‘½ä»¤æ‰§è¡Œç¨‹åºçš„å‡ ä¸ªé˜¶æ®µç¬¬ä¸€æ­¥æ˜¯é¢„å¤„ç†ï¼Œåªåšæ–‡æœ¬æ“ä½œ\ngcc -E test.c -o tset.i\nåœ¨è¿™ä¸ªé˜¶æ®µä¼š\n\nå±•å¼€å¤´æ–‡ä»¶\nå¯¹defineç­‰ç­‰æ“ä½œè¿›è¡Œæ›¿æ¢\nå¤„ç†æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤\nåŒæ—¶åˆ é™¤æ‰€æœ‰æ³¨é‡Š\n\nç¼–è¯‘æ“ä½œ\ngcc -S test.i -o test.s\n\næ±‡ç¼–æ“ä½œ\ngcc -c test.s -o test.o\nå½¢æˆå¯æ‰§è¡Œç¨‹åº\ngcc test.o -o mytest\nè¿™ä¸‰ä¸ªå‘½ä»¤çš„é¡ºåºå°±æ˜¯EScå…¶ä¸­åªæœ‰-cé€‰é¡¹æ˜¯å°å†™çš„\næ­£å¥½å°±æ˜¯é”®ç›˜å·¦ä¸Šè§’escæŒ‰é”®çš„é¡ºåº\n2.2ä»£ç å’Œåº“è¿™é‡Œæˆ‘ä»¬æ“ä½œ&#x2F;ç¼–è¯‘çš„éƒ½æ˜¯è‡ªå·±çš„ä»£ç ã€‚æ¯”å¦‚printfæˆ‘æ˜¯è°ƒç”¨çš„cè¯­è¨€åº“ä¸­çš„å‡½æ•°ï¼Œå¹¶æ²¡æœ‰è‡ªå·±å®Œæˆä¸€ä¸ªæ‰“å°çš„å®ç°ã€‚\nè¿™æ—¶å€™å°±éœ€è¦å’Œç³»ç»Ÿçš„cè¯­è¨€åº“äº§ç”Ÿå…³è”\ncæ ‡å‡†åº“çš„ä½ç½®ls /lib64/libc*\nä¸Šé¢çš„æœ€åä¸€æ­¥å½¢æˆå¯æ‰§è¡Œç¨‹åºmytestæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠè¿™é‡Œçš„ä»£ç å’Œåº“é‡Œé¢çš„æ–¹æ³•è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ€ç»ˆçš„å¯æ‰§è¡Œç¨‹åºï¼Œå¹¶ä½¿ç”¨./mytestæ¥æ‰§è¡Œè¾“å‡ºç»“æœ\næ‰€ä»¥æˆ‘ä»¬å¹³æ—¶è¯´çš„è£…ç¯å¢ƒå°±æ˜¯éœ€è¦å®‰è£…è¯­è¨€çš„é™æ€å’ŒåŠ¨æ€åº“ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åˆ©ç”¨åº“é‡Œé¢çš„å‡½æ•°è¿›è¡Œä»£ç çš„ç¼–è¯‘å¤„ç†\nåŒæ—¶æˆ‘ä»¬åœ¨ç¼–è¯‘å™¨é‡Œé¢å†™ä»£ç æ—¶çš„ä»£ç è¡¥å…¨åŠŸèƒ½ä¹Ÿæ˜¯é€šè¿‡åœ¨åº“å‡½æ•°çš„å¤´æ–‡ä»¶é‡Œé¢æœç´¢æ¥å®Œæˆçš„ã€‚\n\n2.3åŠ¨æ€&#x2F;é™æ€é“¾æ¥&amp;åº“\nåŠ¨æ€ï¼šlinux(.so) windows(.dll)\né™æ€ï¼šlinux(.a)  windows(.lib)\n\nç½‘å§æ˜¯å…¨æ ¡æ‰€æœ‰åŒå­¦å…±äº«çš„ï¼Œä½ åœ¨ç½‘å§å¼€çš„æœºå­æ˜¯å’Œåˆ«äººä¸€èµ·ç”¨çš„ã€‚ä»å­¦æ ¡å»ç½‘å§ï¼ˆåº“ï¼‰ï¼Œç„¶åè·å¾—ä¸€å°æœºå­ï¼ˆåº“å‡½æ•°ï¼‰ï¼Œæ‰“æ¸¸æˆï¼ˆæ‰§è¡Œæ–¹æ³•ï¼‰.è¿™å°±æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ç¼–è¯‘é“¾æ¥çš„è¿‡ç¨‹ï¼Œå³ä¸ºåŠ¨æ€åº“ã€‚\nå¦‚æœå­¦æ ¡å…è®¸å¸¦ç”µè„‘ï¼Œå½“ä½ æƒ³æ‰“æ¸¸æˆçš„æ—¶å€™ç”¨çš„æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œç”¨çš„æ˜¯è‡ªå·±çš„æ–¹æ³•ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ç”¨çš„é™æ€åº“ã€‚æ¯ä¸€ä¸ªäººæ‹¥æœ‰è‡ªå·±çš„ç”µè„‘ï¼Œè¿™ä¸ªç”µè„‘çš„åŠŸèƒ½å’Œç½‘å§é‡Œé¢çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠåº“ä¸­çš„ç›¸å…³ä»£ç ç›´æ¥æ‹·è´åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œå³ä¸ºé™æ€é“¾æ¥\n\nåŠ¨æ€é“¾æ¥ï¼šæ‰€æœ‰äººå…±äº«åŒä¸€ä¸ªèµ„æº\nä¼˜ç‚¹ï¼šå¯ä»¥èŠ‚çœèµ„æºï¼›\nç¼ºç‚¹ï¼šä¸€æ—¦åº“ä¸¢å¤±ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ç¨‹åºå¤±æ•ˆ\n\n\né™æ€é“¾æ¥ï¼šéƒ½ç”¨çš„æ˜¯è‡ªå·±çš„æ–¹æ³•ï¼Œå°†åº“é‡Œé¢çš„ä»£ç æ‹·è´åˆ°è‡ªå·±çš„æ–‡ä»¶ä¸­\nä¼˜ç‚¹ï¼šä¸ä¾èµ–ä»»ä½•åº“ï¼Œç¨‹åºå¯ä»¥ç‹¬ç«‹è¿è¡Œ\nç¼ºç‚¹ï¼šæµªè´¹èµ„æº\n\n\n\næŸ¥çœ‹é“¾æ¥çŠ¶æ€ï¼Œé»˜è®¤æ˜¯åŠ¨æ€é“¾æ¥\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ ldd mytest    linux-vdso.so.1 =&gt;  (0x00007ffc0dd8b000)    /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007f89bd66c000)    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f89bd185000)    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f89bcf81000)    /lib64/ld-linux-x86-64.so.2 (0x00007f89bd553000)\n\næŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºçš„æ„æˆ\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ file mytestmytest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=7cf0ffacfdaeadf8de9b4c0fea379b2a15c37e4c, not stripped\n\n2.3.1æ‰‹åŠ¨æŒ‡å®šè¿›è¡Œé™æ€é“¾æ¥gcc test.c -o mytest1 -static\né™æ€é“¾æ¥ç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºå¤§å°å¾ˆå¤§ï¼ŒåŠ¨æ€é“¾æ¥çš„é»˜è®¤æ˜¯8040å·¦å³çš„ä½“ç§¯ã€‚\n-rwxrwxr-x 1 muxue muxue   8416 Aug  7 07:34 mytest-rwxrwxr-x 1 muxue muxue 861288 Aug  7 07:44 hello\næ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ¨èä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼Œé¿å…å ç”¨å¤ªå¤§çš„ç©ºé—´\n\nå½“æˆ‘é¦–æ¬¡å°è¯•è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ gcc hello.c -o hello -static/usr/bin/ld: cannot find -lccollect2: error: ld returned 1 exit status\nå› ä¸ºç³»ç»Ÿé‡Œé¢é»˜è®¤ä¸ä¼šå¸¦.açš„é™æ€åº“ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚è¿™æ—¶å€™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚\nsudo yum install -y glibc-staticsudo yum install -y libstdc++-static\nå®‰è£…æˆåŠŸï¼\nInstalled:  glibc-static.x86_64 0:2.17-326.el7_9                                                          Complete!\nè¿™æ—¶å€™æ‰§è¡Œå°±ä¸ä¼šæŠ¥é”™äº†ï¼\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ gcc hello.c -o hello -static[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ \n\n3.gdbè°ƒè¯•é»˜è®¤ç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºæ˜¯æ— æ³•è°ƒè¯•çš„ï¼åœ¨linuxé‡Œé¢å‘å¸ƒçš„å¯æ‰§è¡Œç¨‹åºé»˜è®¤æ˜¯releaseç‰ˆæœ¬çš„ï¼Œæ— æ³•debug\néœ€è¦æ·»åŠ ä¸€ä¸ª-gé€‰é¡¹è¿›è¡Œç¼–è¯‘\ngcc test.c -o test_g -g\nåŒæ—¶debugç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿä¼šæ¯”releaseç‰ˆæœ¬å¤§ä¸€äº›ï¼Œè¿™å¤§çš„ç©ºé—´é‡Œé¢å­˜æ”¾çš„å°±æ˜¯è°ƒè¯•ä¿¡æ¯\n-rwxrwxr-x 1 muxue muxue 8360 Aug  7 07:50 test-rwxrwxr-x 1 muxue muxue 9376 Aug  7 07:53 test_g\n\nåˆ©ç”¨ä¸‹é¢è¿™ä¸ªè¯­å¥å¯ä»¥æŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºçš„è°ƒè¯•ä¿¡æ¯\nreadelf -S test | grep debug\nå¯ä»¥çœ‹åˆ°debugç‰ˆæœ¬åŒ…å«äº†å¾ˆå¤šè°ƒè¯•ä¿¡æ¯ï¼Œè€Œreleaseç‰ˆæœ¬é‡Œé¢æ²¡æœ‰\n[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ readelf -S test | grep debug[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ readelf -S test_g | grep debug  [27] .debug_aranges    PROGBITS         0000000000000000  00001061  [28] .debug_info       PROGBITS         0000000000000000  00001091  [29] .debug_abbrev     PROGBITS         0000000000000000  00001122  [30] .debug_line       PROGBITS         0000000000000000  00001164  [31] .debug_str        PROGBITS         0000000000000000  0000119f\n3.1å°è¯•è°ƒè¯•ä¸€ä¸ªç®€å•çš„ä»£ç ä»¥ä¸‹æ˜¯ä¸€äº›ç®€å•çš„gdbæ“ä½œ\nb è¡Œå·ï¼šæ‰“æ–­ç‚¹info bï¼šæŸ¥çœ‹æ–­ç‚¹d æ–­ç‚¹ç¼–å·ï¼š å–æ¶ˆæ–­ç‚¹l è¡Œå·ï¼šæ˜¾ç¤ºä»£ç l mainï¼šæ˜¾ç¤ºåŒ…å«mainçš„é‚£ä¸€è¡Œrï¼šrunï¼Œå¼€å§‹è¿è¡Œç¨‹åº,è·³åˆ°ç¬¬ä¸€ä¸ªæ–­ç‚¹sï¼šstepï¼Œé€è¯­å¥ï¼Œå¯¹åº”vsçš„F11ï¼ˆè¿›å…¥å‡½æ•°ï¼‰nï¼šnextï¼Œé€è¿‡ç¨‹ï¼Œå¯¹åº”vsçš„F10cï¼šcontinueï¼Œè·³è½¬é“ä¸‹ä¸€ä¸ªæ–­ç‚¹pï¼šæŸ¥çœ‹å˜é‡display / undisplayï¼šå¸¸æ˜¾ç¤º æˆ– å–æ¶ˆå¸¸æ˜¾ç¤ºuntil è¡Œå·ï¼šè·³è½¬åˆ°æŒ‡å®šè¡Œfinishï¼šæ‰§è¡Œå®Œä¸€ä¸ªå‡½æ•°ååœä¸‹btï¼šæŸ¥çœ‹å‡½æ•°è°ƒç”¨å †æ ˆ\næé†’ï¼šç¼–è¯‘çš„æ—¶å€™è®°å¾—åŠ ä¸Š-gé€‰é¡¹æŒ‡å®šdebugç‰ˆæœ¬\nä¸‹é¢æ˜¯ä¸€ä¸ªç”¨äºæ¼”å¼çš„ç¤ºä¾‹ä»£ç \n#include &lt;stdio.h&gt;int Add(int a,int b)&#123;    printf(&quot;Add(a,b)\\n&quot;);    return a+b;&#125;int main()&#123;    printf(&quot;hello wolrdï¼\\n&quot;);    int ret=Add(1,20);    printf(&quot;ret: %d\\n&quot;,ret);    return 0;&#125;\næ¼”ç¤ºå¦‚ä¸‹\n[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ gdb test_gGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7Copyright (C) 2013 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;and &quot;show warranty&quot; for details.This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.For bug reporting instructions, please see:&lt;http://www.gnu.org/software/gdb/bugs/&gt;...Reading symbols from /home/muxue/GIT/raspi/vim/TestGdb/test_g...done.(gdb) l23       int Add(int a,int b)4       &#123;5           printf(&quot;Add(a,b)\\n&quot;);6           return a+b;7       &#125;89       int main()10      &#123;11          printf(&quot;hello wolrdï¼\\n&quot;);(gdb) b 11Breakpoint 1 at 0x4005a7: file test.c, line 11.(gdb) llUndefined command: &quot;ll&quot;.  Try &quot;help&quot;.(gdb) l 105           printf(&quot;Add(a,b)\\n&quot;);6           return a+b;7       &#125;89       int main()10      &#123;11          printf(&quot;hello wolrdï¼\\n&quot;);12          int ret=Add(1,20);13          printf(&quot;ret: %d\\n&quot;,ret);14          return 0;(gdb) b 13Breakpoint 2 at 0x4005c3: file test.c, line 13.(gdb) rStarting program: /home/muxue/GIT/raspi/vim/TestGdb/test_g Breakpoint 1, main () at test.c:1111          printf(&quot;hello wolrdï¼\\n&quot;);Missing separate debuginfos, use: debuginfo-install glibc-2.17-326.el7_9.x86_64(gdb) shello wolrdï¼12          int ret=Add(1,20);(gdb) sAdd (a=1, b=20) at test.c:55           printf(&quot;Add(a,b)\\n&quot;);(gdb) p retNo symbol &quot;ret&quot; in current context.(gdb) finishRun till exit from #0  Add (a=1, b=20) at test.c:5Add(a,b)0x00000000004005c0 in main () at test.c:1212          int ret=Add(1,20);Value returned is $1 = 21(gdb) sBreakpoint 2, main () at test.c:1313          printf(&quot;ret: %d\\n&quot;,ret);(gdb) p ret$2 = 21(gdb) p &amp;ret$3 = (int *) 0x7fffffffdf3c(gdb) sret: 2114          return 0;(gdb) s15      &#125;(gdb) qA debugging session is active.        Inferior 1 [process 5932] will be killed.Quit anyway? (y or n) y[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ \næ•´ä½“çš„æ“ä½œå¹¶ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å°è¯•ä¸€ç•ªï¼Œæœ‰é—®é¢˜å¯ä»¥è¯„è®ºæå‡º\n\n4.make&#x2F;makefileè¿™æ˜¯ä¸€ä¸ªæ‰¹é‡å¤„ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡makeæ¥æ‰¹é‡ç¼–è¯‘ä¸€äº›ä»£ç ï¼Œé¿å…æ‰‹åŠ¨æ•²æ‰“å‘½ä»¤è¡Œçš„å‡ºé”™é—®é¢˜ã€‚è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­éå¸¸é‡è¦ã€‚\nmakefileæ˜¯å½“å‰è·¯å¾„ä¸‹çš„ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œå­˜æ”¾äº†å¦‚ä¸‹å†…å®¹ï¼š\n\nä¾èµ–å…³ç³»\nä¾èµ–æ–¹æ³•\n\nå‡è®¾æˆ‘ä»¬éœ€è¦å½¢æˆä¸€ä¸ªcè¯­è¨€çš„å¯æ‰§è¡Œæ–‡ä»¶\nä¾èµ–å…³ç³»ï¼štest -&gt; test.cä¾èµ–æ–¹æ³•ï¼šgcc test.c -o test\nå…¶å¯¹åº”çš„makefileå¦‚ä¸‹\ntest:test.c    gcc test.c -o mytest\næ³¨æ„ï¼Œç¬¬äºŒè¡Œçš„ä¾èµ–æ–¹æ³•å¿…é¡»tabç¼©è¿›ï¼Œä¸ç„¶æ— æ³•æ­£å¸¸è°ƒç”¨ï¼\nç¼–å†™å¥½makefileåï¼Œç›´æ¥åœ¨å½“å‰è·¯å¾„ä¸‹æ‰§è¡Œmakeã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾åç§°ä¸ºmakefile&#x2F;Makefileçš„æ–‡ä»¶æ‰§è¡Œ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makegcc test.c -o test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ ./testhello wolrdï¼Add(a,b)ret: 21\n\næˆ‘ä»¬è¿˜å¯ä»¥å†™ä¸€ä¸ªæ¸…é™¤æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ååˆ é™¤å¤§é‡ä¸´æ—¶å‡ºç°çš„å¯æ‰§è¡Œç¨‹åº\n.PHONY:cleanclean:    rm -f test\nåœ¨åŸæœ¬çš„makefileåè¿½åŠ è¿™éƒ¨åˆ†å†…å®¹å³å¯\né€šè¿‡make cleanæ¥æ¸…ç†æ–‡ä»¶\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ make cleanrm -f test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c\n4.1å‡ºç°missing separatorè§£å†³æ–¹æ¡ˆå½“æˆ‘æ‰§è¡Œmake cleançš„æ—¶å€™å‡ºç°äº†è¿™ä¸ªæŠ¥é”™\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ make cleanmakefile:4: *** missing separator.  Stop.\nè¿™æ˜¯å› ä¸ºåœ¨æˆ‘çš„makefileä¸­ï¼Œä¾èµ–æ–¹æ³•å‰é¢çš„ç¼©è¿›æ˜¯4ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯1ä¸ªtab\næ³¨æ„éœ€è¦ä½¿ç”¨tabè¿›è¡Œç¼©è¿›ï¼Œè€Œä¸èƒ½æ‰‹åŠ¨æ‰“ç©ºæ ¼ï¼\n4.2makeå¦‚ä½•åˆ¤æ–­éœ€ä¸éœ€è¦é‡æ–°ç”Ÿæˆï¼Ÿå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…æ‰§è¡Œè¿‡makeä¹‹åï¼Œå†æ¬¡makeï¼Œç³»ç»Ÿä¼šæç¤ºå½“å‰çš„å¯æ‰§è¡Œç¨‹åºtestå·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°ã€‚\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makegcc test.c -o test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makemake: `test&#x27; is up to date.[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ \n\né‚£ä¹ˆç³»ç»Ÿæ˜¯å¦‚ä½•å®åˆ«å‡ºæ¥æˆ‘ä»¬çš„åŸä»£ç æ˜¯å¦æœ‰è¿‡æ›´æ”¹çš„å‘¢ï¼Ÿ\n4.2.1 statæ—¶é—´æˆ³æˆ‘ä»¬å¯ä»¥ä½¿ç”¨statå‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´æˆ³\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test  File: â€˜testâ€™  Size: 8440            Blocks: 24         IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450818     Links: 1Access: (0775/-rwxrwxr-x)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:18:40.463120772 +0800Modify: 2022-08-07 17:18:40.463120772 +0800Change: 2022-08-07 17:18:40.463120772 +0800 Birth: -[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 201             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 09:30:39.043992599 +0800Modify: 2022-08-07 09:30:38.544992699 +0800Change: 2022-08-07 09:30:38.544992699 +0800 Birth: -\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´æˆ³åˆ†ä¸º3ä¸ªï¼Œåˆ†åˆ«æ˜¯AccessæŸ¥çœ‹ã€modifyä¿®æ”¹ï¼ŒChangeæ›´æ”¹ã€‚\nç¬¬ä¸€ä¸ªæŸ¥çœ‹å¾ˆå¥½ç†è§£ï¼Œé‚£ä¹ˆmodifyå’Œchangeæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸ªç¨‹åºçœ‹çœ‹æƒ…å†µ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ vim test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 207             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:25:12.958082845 +0800Modify: 2022-08-07 17:25:12.808082859 +0800Change: 2022-08-07 17:25:12.808082859 +0800 Birth: -\n\nè¿™é‡Œæˆ‘é€šè¿‡vimè¿›å…¥è¯¥æ–‡ä»¶ï¼Œæ·»åŠ äº†ä¸€è¡Œæ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”äºä¹‹å‰çš„æ—¶é—´ï¼Œ3ä¸ªæ—¶é—´æˆ³éƒ½è¢«ä¿®æ”¹æˆäº†æœ€æ–°çš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶çš„æ—¶å€™ä¸€å®šä¼šæŸ¥çœ‹ï¼Œä¹Ÿæœ‰modifyå’Œchange\nè€Œå¦‚æœæˆ‘åªæ˜¯ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œå¹¶ä¸ä¿®æ”¹å®ƒçš„å†…å®¹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ chmod o-r test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 207             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0660/-rw-rw----)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:25:12.958082845 +0800Modify: 2022-08-07 17:25:12.808082859 +0800Change: 2022-08-07 17:27:34.378068762 +0800 Birth: -\n\nå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰changeå‘ç”Ÿäº†å˜åŒ–ã€‚\næ–‡ä»¶=å†…å®¹+å±æ€§ï¼Œåœ¨è¿™é‡Œçš„modifyå¯¹åº”çš„å°±æ˜¯å†…å®¹ä¿®æ”¹ï¼Œè€Œchangeå¯¹åº”çš„æ˜¯å±æ€§ä¿®æ”¹ã€‚è€Œå½“æˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æ—¶å€™ï¼Œä¼šå¼•èµ·æ–‡ä»¶å¤§å°çš„å˜åŒ–ï¼Œä¹Ÿæ˜¯å±æ€§å˜åŒ–ï¼Œæ‰€ä»¥ä¿®æ”¹å†…å®¹ä¹Ÿå¯èƒ½ä¼šå¼•èµ·changeçš„å˜åŒ–ï¼\n\näº†è§£äº†è¿™ä¸ªæ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç³»ç»Ÿæ˜¯æ€ä¹ˆåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç”Ÿæˆå°±å¾ˆç®€å•äº†ï¼šæ¯”è¾ƒä¾èµ–å…³ç³»ä¸­å·¦è¾¹çš„ç›®æ ‡æ–‡ä»¶å’Œå³è¾¹æºæ–‡ä»¶çš„modifyæ—¶é—´ï¼Œå¦‚æœæºæ–‡ä»¶çš„modifyæ—¶é—´æ—©äºç›®æ ‡æ–‡ä»¶ï¼Œé‚£ä¹ˆè¯´æ˜ç›®æ ‡æ–‡ä»¶ç”Ÿæˆä¹‹åï¼Œæºæ–‡ä»¶å¹¶æ²¡æœ‰å‘ç”Ÿæ›´æ”¹ï¼Œé‚£ä¹ˆä¹Ÿæ— éœ€å†æ¬¡ç”Ÿæˆ\n4.2.2  PHONYå…³é”®å­—çš„ä½œç”¨åœ¨å‰é¢æåˆ°çš„cleanä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†.PHONYå…³é”®å­—æ¥ä¿®é¥°cleanã€‚\nè¿™ä¸ªå…³é”®å­—è®©cleanä½œä¸ºä¸€ä¸ªä¼ªç›®æ ‡ï¼Œä¸”æ€»æ˜¯è¢«æ‰§è¡Œ\n\næ€ä¹ˆç†è§£è¿™ä¸ªæ€»æ˜¯è¢«æ‰§è¡Œï¼Ÿ\n\nå½“æˆ‘ä»¬çš„æºæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ›´æ”¹çš„æ—¶å€™ï¼Œmakeä¸ä¼šé‡æ–°ç”Ÿæˆï¼Œè¿™ä¸ªå«åšæ€»æ˜¯ä¸è¢«æ‰§è¡Œ\n\nPHONYå…³é”®å­—çš„ä½œç”¨å°±æ˜¯å±è”½ç³»ç»Ÿå¯¹äºmodifyæ—¶é—´çš„æ£€æŸ¥ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šå¼ºåˆ¶æ‰§è¡Œè¯¥è¯­å¥çš„ä¾èµ–æ–¹æ³•ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åªæœ‰åœ¨cleançš„æ—¶å€™æ‰ä¼šä½¿ç”¨.PHONYå…³é”®å­—æ¥ä¿®é¥°\n4.3 $@ $^ é«˜çº§ç”¨æ³•mytest:test1.c test2.c\tgcc -o $@ $^\nç¬¬ä¸€ä¸ª$@ä»£è¡¨æ˜¯å·¦è¾¹çš„ç›®æ ‡æ–‡ä»¶ï¼Œ$^ä»£è¡¨æ˜¯æºæ–‡ä»¶ï¼Œè¿™æ ·å†™å¯ä»¥å®ç°å…¨åŒ¹é…ï¼Œä¸éœ€è¦è‡ªå·±ä¸€ä¸ªä¸€ä¸ªå†™æºæ–‡ä»¶äº†\n[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ cat makefiletest:test.c add.c\tgcc $^ -o $@[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ makegcc test.c add.c -o test[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ ./test4\n\n4.4 å®šä¹‰å˜é‡\n4.5 å‘½ä»¤è¡Œæä¾›å˜é‡makefileé™¤äº†å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿç¼–è¯‘é¡¹ç›®ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥æŠŠä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ç»™å†™è¿›å»ã€‚æ¯”å¦‚æ‰“åŒ…å‹ç¼©æŸä¸€ä¸ªç›®å½•çš„æ–‡ä»¶ï¼ˆå¤‡ä»½ï¼‰\ntar -zcvf ./.bak/code.tar.gz ./code\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå°†codeç›®å½•æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªcode.tar.gzå‹ç¼©æ–‡ä»¶ï¼Œæ”¾å…¥åˆ°å½“å‰è·¯å¾„çš„.bakæ–‡ä»¶å¤¹ä¸­ã€‚\næ­¤æ—¶æˆ‘çš„éœ€æ±‚æ˜¯ç»™è¿™ä¸ªå‘½ä»¤ä¼ ä¸€ä¸ªå‚æ•°æ—¥æœŸï¼Œè®©ç”Ÿæˆçš„å‹ç¼©åŒ…æ–‡ä»¶åèƒ½å¸¦ä¸Šæ—¥æœŸï¼Œmakefileå¯ä»¥è¿™ä¹ˆå†™\n.PHONY:tartar:\ttar -zcvf ./.bak/code$&#123;d&#125;.tar.gz ./code\n\nè¿™é‡Œç•™ä¸‹äº†dä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨æ‰§è¡Œmakeå‘½ä»¤çš„æ—¶å€™æŒ‡å®š\nmake d=230128\n\nè¿™æ ·æ“ä½œäº†ä¹‹åï¼Œæ‰“åŒ…å‹ç¼©å‡ºæ¥çš„æ–‡ä»¶åå°±ä¼šæ˜¯code230128.tar.gz å®Œç¾è¾¾æˆç›®çš„ï¼\n\n5.å°è¯•ç¼–å†™ä¸€ä¸ªç®€å•çš„linuxè¿›å›¾æ¡å½“æˆ‘ä»¬åœ¨linuxç³»ç»Ÿä¸Šä¸‹è½½ä¸€äº›è½¯ä»¶çš„æ—¶å€™ï¼Œæ€»æ˜¯å¯ä»¥çœ‹åˆ°ç”¨æ–‡å­—ç»„æˆçš„è¿›åº¦æ¡ï¼Œè¿™äº›è¿›å›¾æ¡æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„å‘¢ï¼Ÿ\nä¸‹é¢æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨Cè¯­è¨€å†™å‡ºä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›æ¦‚å¿µ\n5.1 ç¼“å†²åŒºåœ¨æˆ‘ä¹‹å‰çš„Cè¯­è¨€æ–‡ä»¶æ“ä½œåšå®¢ä¸­ï¼Œæåˆ°äº†ä¸€ä¸ªç¼“å†²åŒºçš„æ¦‚å¿µã€‚ç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬printfä¸€é“å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œç³»ç»Ÿæ˜¯å…ˆæŠŠè¿™ä¸ªå­—ç¬¦ä¸²å†™å…¥ç¼“å†²åŒºï¼Œå†æŠŠç¼“å†²åŒºçš„å†…å®¹è¾“å‡ºåˆ°å±å¹•ä¸Š\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå†linuxç¯å¢ƒä¸­ï¼Œ\\nä¼šè‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒºã€‚\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main()&#123;\twhile (1)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°\t\tsleep(1);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep\t&#125;\treturn 0;&#125;\n\nå¦‚æœæˆ‘ä»¬å»æ‰\\nï¼Œç³»ç»Ÿåˆ™ä¸ä¼šç«‹å³æ‰“å°å†…å®¹ã€‚\n\nè¿™æ—¶å€™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç”¨fflush(stdout)åˆ·æ–°ä¸€ä¸‹ç¼“å†²åŒºï¼Œç°åœ¨ç¨‹åºä¼šåœ¨ä¸€è¡Œä¸­æ‰“å°äº†\nfflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\n\n\n5.2 å›è½¦å’Œæ¢è¡Œåœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­æåˆ°çš„æ¢è¡Œä¸€èˆ¬æŒ‡çš„æ˜¯å›è½¦+æ¢è¡Œ\nå®é™…ä¸Šï¼Œå›è½¦å’Œæ¢è¡Œæ˜¯æœ‰åŒºåˆ«çš„ï¼š\n\nå›è½¦ï¼šå…‰æ ‡å›åˆ°è¯¥è¡Œçš„æœ€å‰é¢\næ¢è¡Œï¼šå…‰æ ‡å»åˆ°ä¸‹ä¸€è¡Œï¼Œä½†æ˜¯ä½ç½®ä¸å˜\n\nåœ¨Cè¯­è¨€ä¸­ï¼Œ\\næ‰§è¡Œçš„å°±æ˜¯å›è½¦+æ¢è¡Œï¼Œè€Œ\\ræ˜¯å›è½¦\né‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæ¥å®ç°ä¸€ä¸ªç®€å•çš„å€’è®¡æ—¶\n#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;int main()&#123;    int i=9;\twhile (i&gt;=0)\t&#123;\t\tprintf(&quot;%d\\r&quot;,i);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°         fflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\t\tsleep(1);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep        i--;\t&#125;\treturn 0;&#125;\n\n\n\n5.3 è¿›åº¦æ¡åšå¥½å‰é¢çš„å‡†å¤‡å·¥ä½œåï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ¥æ‰“å°ä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡äº†ï¼\n#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#define NUM 102#define STYLE &#x27;#&#x27;void process()&#123;    char bar[NUM];    memset(bar, &#x27;\\0&#x27;, sizeof(bar));    const char *lable = &quot;|/-\\\\&quot;;//åœ¨æœ«å°¾æ‰“å°ä¸€ä¸ªè½¬åŠ¨çš„â€œå°åœ†åœˆâ€    int cnt = 0;    while(cnt &lt;= 100)    &#123;        //é»˜è®¤æ˜¯å³å¯¹é½ï¼Œä½¿ç”¨-æ”¹ä½å·¦å¯¹é½        printf(&quot;åŠ è½½ä¸­:%-100s[%d\\%][%c]\\r&quot;, bar, cnt, lable[cnt%4]);        fflush(stdout);        bar[cnt++] = STYLE;//æ‰“å°é¢„å®šä¹‰çš„ç¬¦å·        usleep(200000);    &#125;    printf(&quot;\\n&quot;);&#125;int main()&#123;    process();    return 0;&#125;\n\n\nè¿™æ ·ä¸€ä¸ªç®€å•çš„è¿›å›¾æ¡å°±æå®šè¾£ï¼\nåè®°linuxä¸­ä¸€äº›å·¥å…·çš„ä½¿ç”¨å¯èƒ½ä¸ä¼šæœ‰windowsçš„ç¼–è¯‘å™¨é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚GDBè°ƒè¯•ã€‚ä½†æ˜¯åœ¨åç»­ç¼–å†™ä¸€äº›åªæœ‰linuxå¹³å°æ‰èƒ½è¿è¡Œçš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¼šä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¦åˆ™æ“ä½œèµ·æ¥ä¼šéå¸¸éº»çƒ¦ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæœ‰ä»»ä½•é—®é¢˜éƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Pythonã€‘åœ¨ä½ çš„äº‘æœåŠ¡/ç”µè„‘ä¸Šæ­å»ºPythonç¯å¢ƒ","url":"/2022/08/10/note_Python/0%E8%AE%BE%E7%BD%AEpy%E7%8E%AF%E5%A2%83/","content":"æœ¬ç¯‡wikiä¼šæ•™ä½ åœ¨ä½ çš„ç”µè„‘&#x2F;äº‘æœåŠ¡å™¨ä¸Šæ­å»ºå¥½Pythonç¯å¢ƒ\n\n\nåˆ›å»ºä½ çš„Pythonç¯å¢ƒè¦æƒ³è®©botè·‘èµ·æ¥ï¼Œæ²¡æœ‰ä¸€ä¸ªPythonçš„ç¯å¢ƒæ€ä¹ˆåŠï¼Ÿ\næœ¬ç¯‡wikiä¼šæ•™ä½ åœ¨ä½ çš„ç”µè„‘&#x2F;äº‘æœåŠ¡å™¨ä¸Šæ­å»ºå¥½å¯ä»¥è¿è¡ŒKOOKæœºå™¨äººçš„Pythonç¯å¢ƒ\n1.windowsåœ¨windowsä¸‹å†™Pythonä»£ç çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæˆ‘ä»‹ç»çš„æ˜¯vs code\nå¦‚æœä½ å·²ç»æœ‰äº†Pychamç­‰ä»£ç ç¯å¢ƒï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œä¹Ÿæ²¡å¿…è¦çœ‹è¿™ç¯‡wikiğŸ˜‹\n1.1å®‰è£…Python\nè¿›å…¥Pythonå®˜ç½‘ https://www.python.org/\n\næ‰¾åˆ°downloadï¼Œä¸‹è½½æœ€æ–°çš„Pythonç‰ˆæœ¬åŒ…\n\n\nè¿™é‡Œä¸‹è½½å®˜æ–¹æ¨èçš„installerå³å¯\n\n\n\næ³¨ï¼šå¦‚æœä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿…é›·ç­‰ä¸‹è½½å·¥å…·\n\nä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€å®‰è£…åŒ…ï¼Œæ— è„‘ä¸‹ä¸€æ­¥å³å¯ï¼\nå®‰è£…å®Œæ¯•åï¼Œåœ¨windowså¼€å§‹ä¸­æ‰¾åˆ°å‘½ä»¤æç¤ºç¬¦ï¼Œä¹Ÿå°±æ˜¯windowså¹³å°çš„cmdå·¥å…·ã€‚\nåœ¨é‡Œé¢è¾“å…¥Pythonï¼Œå‡ºç°ä»¥ä¸‹ç•Œé¢å³ä¸ºå®‰è£…æˆåŠŸï¼\n\n\n1.2 å®‰è£…VSC\nå¾®è½¯å®˜ç½‘ä¸‹è½½ https://code.visualstudio.com/\n\nåœ¨å®˜ç½‘å¯ä»¥ç›´æ¥ä¸‹è½½windowsä¸Šçš„VSCï¼Œä½†æ˜¯é»˜è®¤çš„ä¸‹è½½é“¾æ¥ä¸‹è½½æ˜¯éå¸¸æ…¢çš„ï¼\nhttps://az764295.vo.msecnd.net/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠè¿™ä¸ªé»˜è®¤çš„ä¸‹è½½é“¾æ¥æ”¹æˆå›½å†…çš„é•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦å°±å¯ä»¥èµ·é£ï¼\nå°†ä¸‹è½½åœ°å€ä¸­çš„az764295.vo.msecnd.net æ›´æ¢ä¸º vscode.cdn.azure.cn æ›´æ”¹åï¼šhttps://vscode.cdn.azure.cn/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\nå®‰è£…åŒæ ·æ˜¯æ— è„‘ä¸‹ä¸€æ­¥ï¼\næ³¨ï¼šè¯·ä¸è¦ä¿®æ”¹VSCçš„å®‰è£…ä½ç½®ï¼Œå¯èƒ½å¯¼è‡´VSCæ— æ³•æ­£å¸¸è¿è¡ŒPythonç¨‹åºï¼\n\næ‰“å¼€VSCåï¼Œç•Œé¢æ˜¯è‹±æ–‡çš„ã€‚åˆ«æ€¥ï¼Œè®©æˆ‘ä»¬å®‰è£…å‡ ä¸ªæ’ä»¶ï¼Œå°±å¯ä»¥æ„‰å¿«ä½¿ç”¨äº†\nç‚¹å‡»å·¦ä¾§çš„è¿™ä¸ªæŒ‰é’®è¿›å…¥æ’ä»¶é¢ç‰ˆ\n\n\nåœ¨è¿™é‡Œå¯ä»¥å®‰è£…æ’ä»¶ï¼Œéœ€è¦å®‰è£…çš„æ’ä»¶æœ‰ä¸‹é¢è¿™äº›\nChinese(Simplified)  //VSCæ±‰åŒ–æ’ä»¶Python  //pythonç¯å¢ƒPylance //pythonç¯å¢ƒPip Manager //å®‰è£…ã€ç®¡ç†pipåŒ…Terminal Here //æ–¹ä¾¿æˆ‘ä»¬æ‰“å¼€ç»ˆç«¯vscode-json //jsonæ ¼å¼åŒ–æ’ä»¶\nä¸‹å¥½ä¸Šé¢çš„æ’ä»¶åï¼Œä½ çš„å·¦ä¾§åº”è¯¥ä¼šå¤šå‡ºæ¥ä¸€ä¸ªpip managerçš„æŒ‰é’®ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä¸‹è½½ä½ éœ€è¦çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“\n\n\nåˆ°è¿™é‡Œï¼Œwindowsä¸‹çš„Pythonç¯å¢ƒæ­å»ºå°±å®Œæˆäº†ï¼\n1.3 å°è¯•å†™ä¸ªæœ€ç®€å•çš„Pythonä»£ç åœ¨VSCé‡Œé¢åˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼ˆè¿™é‡Œä¼šè®©ä½ é€‰æ‹©ä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œå¼„ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹å°±å¯ä»¥äº†ï¼‰\nå¡«å…¥ä¸‹é¢çš„ä»£ç \nprint(&#x27;hello world&#x27;)\næŒ‰CTRL+SHIFT+Tæ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆå·¦ä¸‹è§’é½¿è½®ä¹Ÿå¯ä»¥æ‰“å¼€ï¼‰ï¼Œè¾“å…¥Terminal Hereï¼Œé€‰æ‹©ä¸‹é¢è¿™ä¸ªé€‰é¡¹\n\n\nåœ¨VSCçš„åº•éƒ¨ä¼šæ‰“å¼€è¿™æ ·çš„ä¸€ä¸ªç»ˆç«¯\n\n\næˆ‘ä»¬åœ¨è¿™é‡Œè¾“å…¥Python test.pyï¼Œå³å¯è¿è¡Œåˆšåˆšå†™çš„hello worldä»£ç \nå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥æ˜¯ä¼šè¾“å‡ºè¿™æ ·çš„ç»“æœ\n\nå®Œæˆé…ç½®ï¼\n2.Linuxå¹³å°å…³äºLinuxå¹³å°çš„Pythonç¯å¢ƒæ­å»ºï¼Œå¯ä»¥å‚è€ƒ01-Linux_install_python\nè¯·ä¸è¦ç›´æ¥ä½¿ç”¨ROOTç”¨æˆ·æ“ä½œï¼ï¼\n\n\nä¸‹é¢æ˜¯ä¸€æ¬¡çå‡çº§pythonå¯¼è‡´çš„é”™è¯¯è®°å½•,æœ¬äººæ‰€ç”¨ç³»ç»Ÿä¸ºCentOS 7.6\n\n2.1.ä¸è¦çæ”¹é…ç½®æ–‡ä»¶æˆ‘å…ˆæ˜¯å‚è€ƒäº†ä¸€äº›å¥‡è‘©åšå®¢ï¼Œé‡Œé¢è¯´é“äº†ä¸‹è½½å®Œpythonæ–°ç‰ˆæœ¬åï¼Œéœ€è¦ä¿®æ”¹ä¸‹é¢ä¸¤ä¸ªyumçš„é…ç½®æ–‡ä»¶\nå®é™…ä¸Šï¼Œå‹æ ¹ä¸è¦ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼ï¼ï¼ï¼\n/usr/bin/yum/usr/libexec/urlgrabber-ext-down\n\nè¯´æ˜¯è¦æŠŠå¼€å¤´çš„#!/usr/bin/python2.7ä¿®æ”¹ä¸ºå‡çº§åçš„ç‰ˆæœ¬\nå®é™…ä¸Šï¼Œå‹æ ¹ä¸è¦ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼ï¼ï¼ï¼\nå› ä¸ºä¿®æ”¹äº†ä¹‹åæ‰§è¡Œyumä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªæŠ¥é”™\n-bash: /usr/bin/yum: /usr/bin/python: åçš„è§£é‡Šå™¨: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n\n\nå‚è€ƒè¿™ç¯‡åšå®¢ï¼ŒæŠŠé…ç½®æ–‡ä»¶è¯¥å›å»æ‰è®©yumå¤æ´»ã€é“¾æ¥ã€‘\n\nyumæ˜¯åŸºäºpython2.7çš„ï¼Œä½ æ²¡äº‹æŠŠäººå®¶ä¾èµ–ç¯å¢ƒæ”¹äº†å¹²å“ˆå­ï¼Ÿ\n2.2.æ­£ç¡®ä¸‹è½½Pythonçš„æ–¹æ³•å‚è€ƒä¸‹é¢è¿™ä¸ªåšå®¢\n\nhttps://blog.csdn.net/weixin_41829333/article/details/110141988\n\n2.3.è¦å¯¹ç—‡ä¸‹è¯æ•™ç¨‹åšå®¢é‡Œé¢æåˆ°äº†ï¼Œéœ€è¦é‡æ–°åˆ›å»ºè½¯è¿æ¥ï¼Œè¿™æ˜¯æ²¡é”™\nln -sf /usr/local/bin/python3.8 /usr/bin/pythonln -sf /usr/local/bin/python3.8-config /usr/bin/python-config\n\nä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººçš„è½¯è¿æ¥éƒ½æ˜¯ç”¨ä¸Šé¢çš„ä»£ç åˆ›å»ºï¼\nåœ¨æ‰§è¡Œå®Œpythonæ–°ç‰ˆæœ¬çš„makeåï¼Œä½ éœ€è¦é€šè¿‡ä¸‹é¢çš„ä¸¤ä¸ªæŒ‡ä»¤æ‰¾åˆ°æ–°ç‰ˆæœ¬pyçš„å®‰è£…è·¯å¾„\n[root@bt-7274:~]# whereis pythonpython: /usr/bin/python3.6m /usr/bin/python3.6 /usr/bin/python /usr/bin/python2.7-config /usr/bin/python2.7 /usr/lib/python3.6 /usr/lib/python2.7 /usr/lib64/python3.6 /usr/lib64/python2.7 /etc/python /usr/local/bin/python3.9-config /usr/local/bin/python3.9 /usr/local/lib/python3.9 /usr/include/python3.6m /usr/include/python2.7 /usr/local/python3/bin/python3.7 /usr/local/python3/bin/python3.9-config /usr/local/python3/bin/python3.7-config /usr/local/python3/bin/python3.9 /usr/local/python3/bin/python3.7m-config /usr/local/python3/bin/python3.7m /usr/share/man/man1/python.1.gz[root@bt-7274:~]# which python/usr/bin/python\n\næ¯”å¦‚æˆ‘è¿™é‡Œå¾ˆæ˜æ˜¾èƒ½çœ‹å‡ºæ¥ï¼Œæˆ‘çš„æ–°ç‰ˆæœ¬python3.9æ˜¯å®‰è£…åœ¨/usr/local/biné‡Œé¢ï¼Œè€Œä¸æ˜¯/usr/biné‡Œé¢çš„\nåŒæ—¶ï¼Œå½“æˆ‘æ‰§è¡Œpyå‡ºé”™æ—¶ï¼ŒæŠ¥é”™çš„è·¯å¾„ä¹Ÿæ˜¯ä¸‹é¢è¿™ä¸ª\n-bash: /usr/local/bin/python3: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n\næ‰€ä»¥åˆ›å»ºè½¯é“¾æ¥çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ç—‡ä¸‹è¯è¿›è¡Œä¿®æ”¹ï¼\nln -s /usr/local/python3/bin/python3 /usr/local/bin/python3ln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3\n\nè¿™æ ·æ‰èƒ½è®©pyæˆåŠŸå‡çº§ï¼\n2.4.è¯·é‡ä¸‹ä¾èµ–åº“ä¸‹è½½ä¾èµ–åº“çš„æ—¶å€™ï¼Œå…¶å®æ˜¯åªå®‰è£…åœ¨äº†å¯¹åº”ç‰ˆæœ¬çš„pythoné‡Œé¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘çš„æ—§ç‰ˆæœ¬python3.7.8\næ‰€ä»¥æ›´æ–°å¥½äº†ä¹‹åï¼Œä½ éœ€è¦é‡æ–°ä¸‹æ‰€æœ‰çš„ä¾èµ–åº“\n","categories":["é€Ÿé€šPython"],"tags":["Linux","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python","VSC"]},{"title":"ã€Linuxã€‘æ¯”Xshellæ›´çˆ½ï¼Œç”¨vscodeè¿æ¥äº‘æœåŠ¡å™¨è¿›è¡Œå¼€å‘","url":"/2022/08/09/note_Linux/7vscode_remoteSSH/","content":"æœ¬ç¯‡åšå®¢æ•™ä½ å¦‚ä½•ç”¨VScodeçš„remote sshæ’ä»¶è¿æ¥ä¸Šlinuxäº‘æœåŠ¡å™¨è¿›è¡Œä»£ç å¼€å‘~\n\n\n[TOC]\n1.ä¸‹è½½vscodevscodeæ˜¯å¾®è½¯å®˜æ–¹çš„ä¸€æ¬¾å¤šè¯­è¨€ä»£ç ç¼–è¾‘å™¨ï¼Œå…¶å› ä¸ºä¸°å¯Œè€Œå¼ºå¤§çš„æ’ä»¶è€Œè¢«éå¸¸å¤šç”¨æˆ·é€‰ä¸­ä½¿ç”¨ï¼\n\nå®˜ç½‘ä¸‹è½½ï¼šhttps://code.visualstudio.com/\n\nåœ¨è¿™é‡Œå¯ä»¥ç›´æ¥ä¸‹è½½windowsä¸Šçš„VSCï¼Œä½†æ˜¯é»˜è®¤çš„ä¸‹è½½é“¾æ¥ä¸‹è½½æ˜¯éå¸¸æ…¢çš„ï¼\nhttps://az764295.vo.msecnd.net/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠè¿™ä¸ªé»˜è®¤çš„ä¸‹è½½é“¾æ¥æ”¹æˆå›½å†…çš„é•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦å°±å¯ä»¥èµ·é£ï¼\nå°†ä¸‹è½½åœ°å€ä¸­çš„az764295.vo.msecnd.net æ›´æ¢ä¸º vscode.cdn.azure.cn æ›´æ”¹åï¼šhttps://vscode.cdn.azure.cn/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\nè¿™é€Ÿåº¦å²‚ä¸çˆ½ç‚¸äº†ï¼\n\n1.1 å®‰è£…ä¸€äº›æ’ä»¶\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº›å¿…è¦çš„æ’ä»¶ï¼š\n\nChinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack for Visual Studio Code\nRemote - SSH\n\n\nå¦‚æœä½ æ²¡æœ‰å…¶ä»–çš„å¼€å‘éœ€æ±‚çš„è¯ï¼Œé»˜è®¤å®‰è£…è¿™ä¸¤ä¸ªå°±å¯ä»¥è®©æˆ‘ä»¬æ„‰å¿«åœ°ç™»é™†ä¸ŠlinuxæœåŠ¡å™¨äº†ï¼\n1.2 è¿æ¥äº‘æœåŠ¡å™¨å®‰è£…å®Œremote sshä¹‹åï¼Œä½ çš„å·¦ä¾§åº”è¯¥ä¼šå‡ºç°è¿™æ ·ä¸€ä¸ªæŒ‰é’®\n\nåœ¨æœ€ä¸Šé¢çš„é“¾æ¥æ¨¡å¼æˆ‘ä»¬é€‰æ‹©ssh targetsï¼Œåœ¨è¿™é‡Œå¯ä»¥ç‚¹å‡»+å·æ·»åŠ linuxæœåŠ¡å™¨\n\nè¿™é‡Œå¡«å†™çš„æ ¼å¼ä¸º shh ç”¨æˆ·å@å…¬ç½‘ipã€‚æ¯”å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯userï¼Œå…¬ç½‘ipæ˜¯114.514.20.22ï¼Œé‚£ä¹ˆéœ€è¦å¡«å†™çš„ä¾¿æ˜¯\nssh user@114.514.20.22\n\n\nè¾“å…¥å®Œåä¼šè®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬é€‰ç¬¬ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿æ—¥åç®¡ç†\n\nè¿™æ—¶å€™å³ä¸‹è§’ä¼šå¼¹çª—å‘Šè¯‰ä½ host addï¼ŒæˆåŠŸæ·»åŠ äº†ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯\næ‰“å¼€userè·¯å¾„ä¸‹çš„.ssh/configæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å…³äºhostçš„ä¿¡æ¯ã€‚å…¶ä¸­æˆ‘ä»¬å¯ä»¥æŠŠHostæ”¹æˆå’ŒuseråŒåï¼Œæ³¨æ„ä¸è¦ä¿®æ”¹hostnameå“¦ï¼\n\né‡å¯vscï¼Œç„¶åä½ åº”è¯¥å°±å¯ä»¥åœ¨å·¦ä¾§çœ‹åˆ°åˆšåˆšæ·»åŠ çš„linuxäº‘æœåŠ¡å™¨ã€‚æˆ‘ä»¬å³é”®è¿™ä¸ªç»ˆç«¯ï¼Œä¼šå‡ºç°ä¸€ä¸ªé€‰é¡¹å¡è¯¢é—®ä½ æ˜¯åœ¨å½“å‰vscç•Œé¢æ‰“å¼€è¯¥ç»ˆç«¯ï¼Œè¿˜æ˜¯æ–°å»ºä¸€ä¸ªvscç•Œé¢ã€‚è¿™ä¸ªæ ¹æ®è‡ªå·±å–œå¥½é€‰ä¸€ä¸ªå°±OKï¼\n\nåˆæ¬¡é“¾æ¥ä¼šè®©ä½ é€‰æ‹©è¯¥ç»ˆç«¯çš„å¹³å°ï¼Œæˆ‘ä»¬é€‰æ‹©linuxå³å¯ï¼\n\n\næ³¨æ„ï¼šè¿™é‡Œæˆ‘å‘ç°ç›´æ¥é“¾æ¥rootä¼šå‡ºç°é”™è¯¯ï¼Œå¯èƒ½æ˜¯å®‰å…¨æ€§è€ƒè™‘é˜»æ­¢äº†vscodeåœ¨è¿œç¨‹æœåŠ¡å™¨çš„ç¯å¢ƒå®‰è£…ï¼Œåæ–‡æ”¹ä¸ºæˆ‘è‡ªå·±çš„å­è´¦æˆ·è¿›è¡Œæ¼”ç¤ºï¼\n\n1.3å…³äºä¿®æ”¹hostç°åœ¨å‘ç°äº†é—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºhostéœ€è¦ä¿®æ”¹æˆå’Œuserä¸€æ ·æ‰èƒ½æ­£å¸¸è®¿é—®ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\nåŒæ—¶ä¸‹é¢sshæ˜¾ç¤ºçš„æ˜¯hoståå­—ï¼Œè€Œä¸æ˜¯å…¬ç½‘ip\n\n\nè¿™é‡Œæˆ‘æ”¹æˆè‡ªå·±çš„å­è´¦æˆ·è¿›è¡Œæ¼”ç¤ºï¼\n\nè¾“å…¥å’±ä»¬è´¦æˆ·çš„å¯†ç \n\nè¿™é‡Œvscodeä¼šåœ¨ä½ çš„äº‘æœåŠ¡å™¨ä¸Šè£…ä¸€äº›ç¯å¢ƒï¼Œå½“å·¦ä¸‹è§’å‡ºç°ä½ çš„å…¬ç½‘ipï¼ˆè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯hostï¼Œä¸ºå…¬ç½‘ipæ˜¯å› ä¸ºæˆ‘æ²¡æœ‰æ”¹ï¼‰é‚£å°±ä»£è¡¨é“¾æ¥æˆåŠŸäº†ï¼\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±å·²æˆåŠŸè¿ä¸Šäº‘æœåŠ¡å™¨äº†ï¼\n\n2. å¸¸ç”¨æ’ä»¶æ¨èvscodeè¿æ¥çš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å™¨ç¯å¢ƒé‡Œé¢å®‰è£…æ’ä»¶ï¼è¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªéå¸¸æ£’çš„æ’ä»¶ï¼š\n\nChinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack for Visual Studio Code\nTerminal Hereï¼ˆè¶…çº§å¥½ç”¨ï¼Œå¿…è£…ï¼ï¼ï¼‰\nC&#x2F;C++\nC&#x2F;C++ Extension Pack\n\nå¦‚æœä½ è¿˜å­¦ä¹ pythonï¼Œå¯ä»¥å®‰è£…ä¸‹é¢çš„æ’ä»¶ï¼š\n\nPython\nPylance\nPip Manager\n\nå®‰è£…è¿™äº›æ’ä»¶çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›é™„å±æ’ä»¶è¢«åŒæ—¶å®‰è£…ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç®¡å®ƒï¼Œäº¤ç»™vscè‡ªå·±å¤„ç†å°±è¡Œæ‹‰ï¼æ³¨æ„å®‰è£…çš„æ—¶å€™ä¸€å®šæ˜¯é€‰æ‹©å®‰è£…åœ¨ä½ çš„äº‘æœåŠ¡å™¨é‡Œé¢ï¼Œå¦‚æœå®‰è£…åœ¨æœ¬åœ°ï¼Œå¯¹äºäº‘æœåŠ¡å™¨æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„å“¦~\n\n3. å¼€å¯ç»ˆç«¯Linuxæœ€å¸¸ç”¨çš„å½“ç„¶è¿˜æ˜¯ç»ˆç«¯äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«æ·é”®ctrl+shift+pæ‰“å¼€vscçš„å‘½ä»¤é€‰æ‹©ç•Œé¢ï¼Œæœç´¢ç»ˆç«¯ï¼Œé€‰æ‹©ä¸‹é¢è¿™ä¸ªè§†å›¾ï¼šåˆ‡æ¢ç»ˆç«¯\n\nå¯ä»¥çœ‹åˆ°ä¸‹é¢ä¼šå‡ºç°ä¸€ä¸ªç†Ÿæ‚‰çš„ç•Œé¢~linuxçš„å‘½ä»¤è¡Œæœ‰å•¦ï¼\n\nä½†æ˜¯ï¼Œå¦‚æœåªç”¨linuxçš„å‘½ä»¤è¡Œå¯å®Œå…¨æ²¡å¿…è¦æŠ˜è…¾vscodeï¼Œè¿™é‡Œä»‹ç»å¦‚ä½•æ›´æ–¹ä¾¿çš„ç”¨vscå¼€å‘\n4. æ‰“å¼€æ–‡ä»¶å¤¹åœ¨å·¦ä¾§æœ€ä¸Šé¢çš„åˆ†åŒºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹\n\nè¿™æ—¶å€™ï¼Œä½ ä¾¿å¯ä»¥é€‰æ‹©ä½ å¸¸ç”¨çš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘çš„ä»£ç éƒ½åœ¨GITæ–‡ä»¶å¤¹é‡Œé¢ï¼Œé€‰æ‹©åvscodeä¼šæ‰“å¼€å®ƒ\n\n\nè¿™é‡Œvscodeä¼šè®©ä½ åœ¨è¾“å…¥ä¸€æ¬¡linuxç”¨æˆ·çš„å¯†ç ï¼Œåæ–‡ä¼šæåˆ°å¦‚ä½•å…å¯†ç™»å½•\n\nç°åœ¨æˆ‘å·²ç»æ‰“å¼€äº†GITæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„å‡ ä¸ªå­æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„testæ–‡ä»¶å¤¹æ¥ä½œä¸ºæ¼”ç¤º\n\nvscodeéå¸¸æ£’çš„ä¸€ç‚¹æ˜¯ï¼Œä»–ä¼šå¸®ä½ ä¿å­˜ä¸Šä¸€æ¬¡æ‰“å¼€æœ¬æ–‡ä»¶å¤¹çš„å‘½ä»¤è¡Œæ“ä½œä¿¡æ¯ï¼Œä¸åƒXshellæ‰“å¼€ä¸€ä¸ªæ–°çš„ä¹‹å‰çš„å‘½ä»¤è¡Œæ“ä½œå°±çœ‹ä¸åˆ°äº†ğŸ˜‚\n\nå’±ä»¬ç›´æ¥å³é”®åˆ›å»ºä¸€ä¸ªæ–°çš„testæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶\n\néšä¾¿å†™ä¸€ä¸ªå–œé—»ä¹è§çš„helloä»£ç ï¼Œvscodeçš„ä»£ç è¡¥å…¨æ¯”vimçš„æ’ä»¶å¥½äº†ä¸çŸ¥é“å¤šå°‘ï¼ˆä¸ªäººæ„Ÿå—ï¼‰\n\nè¿™æ—¶å€™ä¹‹å‰å®‰è£…çš„å‡ ä¸ªæ’ä»¶å°±æ´¾ä¸Šç”¨åœºäº†ï¼C&#x2F;C++æ’ä»¶ä¼šä¸ºæˆ‘ä»¬çš„ä»£ç æä¾›é«˜äº®\n4.1 Terminal Hereæ’ä»¶è€ŒTerminal Hereè¿™ä½æ›´æ˜¯é‡é‡çº§ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„ç›´æ¥æ‰“å¼€å½“å‰ç›®å½•ä¸‹çš„å‘½ä»¤è¡Œï¼Œä¸éœ€è¦è‡ªå·±cdè¿›å…¥æ–‡ä»¶å¤¹ï¼\nè¿˜æ˜¯ç”¨ctrl+shift+pæ‰“å¼€vscçš„å‘½ä»¤é¢æ¿ï¼Œæœç´¢terminalï¼Œæ‰¾åˆ°ä¸‹é¢è¿™ä¸ªé€‰é¡¹\n\nç›´æ¥å›è½¦é€‰æ‹©å®ƒï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtest.cæ‰€å¤„æ–‡ä»¶å¤¹ä¸‹çš„ç»ˆç«¯ï¼å½“ä½ çš„æ–‡ä»¶ç›®å½•å±‚çº§å¾ˆå¤šçš„æ—¶å€™ï¼Œè¿™èƒ½å¸®ä¸Šå¤§å¿™ï¼\n\nè¿™é‡Œç”¨gccç¼–è¯‘ä¸€ä¸‹ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼Œéå¸¸å°é¾Ÿçš„æ“ä½œ\n\nè¿™é‡Œä½ èƒ½çœ‹åˆ°vscodeçš„å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œä»–ä¼šç»™ä½ æŠŠè¿è¡Œæ­£å¸¸çš„å‘½ä»¤æ ‡è“ï¼Œè€Œè¿è¡Œä¸æ­£å¸¸çš„åˆ™æ ‡çº¢ã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨ä»£ç é‡Œé¢å†™ä¸ªbugåœ¨å°è¯•ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°å‰é¢çš„å°ç‚¹å˜çº¢äº†ï¼\n\nåŒæ—¶åœ¨å³è¾¹çš„æ»šåŠ¨æ¡ä¸Šä¹Ÿèƒ½æ¸…æ¥šåœ°çœ‹åˆ°é‚£ä¸ªåœ°æ–¹çš„å‘½ä»¤æ˜¯è¿è¡Œå¤±è´¥æ ‡çº¢çš„ï¼\n\nè€ŒTerminal Hereæ’ä»¶ç‰›é€¼çš„åœ°æ–¹è¿˜ä¸æ­¢è¿™ä¸ªï¼Œå¦‚æœä½ çš„ä»£ç æ˜¯åœ¨Python-vnevçš„è™šæ‹Ÿç¯å¢ƒå·¥ä½œç›®å½•ä¸‹ï¼Œè¯¥æ’ä»¶è¿˜ä¼šè‡ªåŠ¨å¸®ä½ æ‰“å¼€è™šæ‹Ÿç¯å¢ƒï¼çœå¾—æˆ‘ä»¬è‡ªå·±æ•²è¿™ä¸€è¡Œä»£ç äº†\n\nå¦‚æœä½ ä¸çŸ¥é“vnevè™šæ‹Ÿç¯å¢ƒæ˜¯å•¥ï¼Œç®€å•è¯´ä¸€ä¸‹ï¼špythonæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡pipä¸‹è½½å®‰è£…ã€‚ä¸ºäº†é¿å…ä¸åŒçš„é¡¹ç›®ä¸­çš„åŒ…éƒ½ç›´æ¥å®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹é€ æˆç¯å¢ƒæ±¡æŸ“ï¼Œä¾¿å¯ä»¥åˆ›å»ºä¸€ä¸ªvnevè™šæ‹Ÿç¯å¢ƒï¼Œåœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…åŒ…ã€‚\nåªæœ‰åœ¨è™šæ‹Ÿç¯å¢ƒå¼€å¯ï¼Œä¸”åœ¨å®ƒçš„å·¥ä½œç›®å½•ä¸‹ï¼Œæ‰å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªåŒ…ï¼\n\n\n\nå’³å’³ï¼Œæ‰¯è¿œå•¦ï¼æœ‰äº†ä¸Šé¢çš„å¼•å¯¼ï¼Œæƒ³å¿…ä½ å·²ç»å¯ä»¥æ„‰å¿«çš„ç”¨vscodeåœ¨linuxç¯å¢ƒä¸Šå¼€å‘äº†ã€‚\nä¸‹é¢ä»‹ç»ä¸€ä¸‹å¦‚ä½•é€šè¿‡sshå¯†é’¥æ¥å…å¯†ç™»å½•ï¼Œä¸éœ€è¦æ¯ä¸€æ¬¡éƒ½è¾“å…¥å¯†ç \n5. sshå…å¯†ç™»å½•\nå‚è€ƒhttps://blog.csdn.net/weixin_42907822/article/details/125237307\n\nå¦‚æœä½ ä¹‹å‰é…ç½®è¿‡gitee&#x2F;githubçš„sshè¿æ¥ï¼Œé‚£ä¹ˆè‚¯å®šå¯¹ä¸‹é¢çš„æ­¥éª¤æœ‰äº›ç†Ÿæ‚‰\n\n5.1 ç”Ÿæˆsshå¯†é’¥æˆ‘ä»¬æ‰“å¼€windowsçš„cmdï¼Œè¾“å…¥ä¸‹é¢è¿™ä¸ªè¯­å¥\nssh-keygen -t rsa -b 4096\n\nå‡ºç°çš„æç¤ºä¿¡æ¯å…¨éƒ¨å›è½¦è·³è¿‡ï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œï¼\n\nç¬¬ä¸€è¡Œæ˜¯è®©ä½ å¡«ä¸€ä¸ªæ–‡ä»¶åï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦å¡«å†™ï¼Œä¹Ÿå¯ä»¥ä¸å¡«ç›´æ¥å›è½¦è·³è¿‡\n\néšåç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªisaå…¬é’¥å’Œå¯†é’¥ï¼Œæˆ‘ä»¬å°†å…¶å¤åˆ¶åˆ°c/ç”¨æˆ·/ç”¨æˆ·å/.sshæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå°±æ˜¯æœ€åˆé…ç½®vscodeçš„sshé‚£ä¸ªæ–‡ä»¶å¤¹\n\néšåæˆ‘ä»¬ç”¨Xshellé‡Œé¢çš„xtfpè¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œå°†æœ‰.pubåç¼€çš„æ–‡ä»¶æ‹·è´åˆ°äº‘æœåŠ¡å™¨ç”¨æˆ·ç›®å½•ä¸‹çš„.sshæ–‡ä»¶å¤¹ï¼Œå¹¶å°†å…¶æ”¹åä¸ºauthorized_keys\n\n\nè®¾ç½®.sshæ–‡ä»¶æƒé™ï½/.ssh\n\nchmod 700 ~/.ssh\n\n\nè®¾ç½®authorized_keysæ–‡ä»¶æƒé™\n\nchmod 600 ~/.ssh/authorized_keys\n\nä¿®æ”¹å®Œåå¯ä»¥ç”¨llå‘½ä»¤çœ‹çœ‹æ˜¯å¦æ­£å¸¸ä¿®æ”¹æˆåŠŸï¼Œ700å¯¹åº”çš„æ˜¯ dxrw-------ï¼Œ600å¯¹åº”çš„æ˜¯-rw--------\n\n5.2 ä¿®æ”¹rootä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆæ…é‡)å‹æƒ…æç¤ºï¼šå½“ä½ ä¿®æ”¹ä»»ä½•linuxç¯å¢ƒä¸‹çš„æ–‡ä»¶ä¹‹å‰ï¼Œéƒ½è¦è®°å¾—cpä¸€ä»½å‡ºæ¥ä½œä¸ºå¤‡ä»½ï¼\nè¿›å…¥ä½ äº‘æœåŠ¡å™¨çš„rootç”¨æˆ·ä¸‹ï¼Œä¿®æ”¹ä¸‹é¢çš„æ–‡ä»¶\nvim /etc/ssh/sshd_config \n\næŠŠ PubkeyAuthenticationå‰çš„ # å·å»æ‰ï¼Œè¿™æ ·å…¬é’¥éªŒè¯æ‰ç”Ÿæ•ˆã€‚\n\nä¿®æ”¹åä¿å­˜é€€å‡º\nç”¨ä¸‹é¢çš„è¯­å¥é‡å¯sshæœåŠ¡\nsystemctl restart sshd.service \n\nå¦‚æœæ— æ•ˆï¼Œåˆ™å°è¯•ç›´æ¥é‡å¯äº‘æœåŠ¡å™¨\nreboot\n\n5.3 ä¿®æ”¹æœ¬æœºssh configæ–‡ä»¶éšåæˆ‘ä»¬å†æ¬¡æ‰“å¼€æœ¬æœº.sshè·¯å¾„ä¸‹çš„configæ–‡ä»¶ï¼Œæ³¨æ„æ˜¯æœ¬æœºä¸æ˜¯äº‘æœåŠ¡å™¨ï¼\nåœ¨åŸæœ¬çš„é…ç½®ä¿¡æ¯åé¢è¿½åŠ ä¸‹é¢ä¸¤ä¸ªï¼Œå…¶ä¸­IdentityFileæŒ‡ä»£çš„æ˜¯ä½ åˆšåˆšç”Ÿæˆçš„é‚£ä¸ªå¯†é’¥çš„æ–‡ä»¶åï¼Œè¯·æ ¹æ®ä½ çš„å®é™…æ–‡ä»¶åè¿›è¡Œå¡«å†™ï¼\nPreferredAuthentications publickeyIdentityFile ~/.ssh/id_linux\n\n\nå‰é¢åˆ›å»ºsshkeyçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå¯¹è¯æ¡†æ˜¯è®©ä½ å¡«å†™ä¸€ä¸ªåå­—ï¼Œåœ¨å¤šç»ˆç«¯é…ç½®çš„æ—¶å€™ï¼Œåå­—å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ç®¡ç†ä¸åŒçš„sshå¯†é’¥ï¼Œå¦‚ä¸‹æ˜¯æˆ‘çš„é…ç½®ï¼ŒLinuxæœåŠ¡å™¨å’Œgitee&#x2F;githubç”¨çš„æ˜¯ä¸åŒçš„å¯†é’¥ï¼ˆä¹Ÿå¿…é¡»ç”¨ä¸åŒçš„ï¼Œå› ä¸ºgitee&#x2F;githubå¯†é’¥éœ€è¦æŒ‡å®šé‚®ç®±ï¼‰\n\nè¿™é‡Œé…ç½®å¥½ä¹‹åï¼Œä½ åº”è¯¥å°±å¯ä»¥å…å¯†ç™»å½•äº‘æœåŠ¡å™¨è€Œä¸éœ€è¦è¾“å…¥å¯†ç äº†ï¼\n\nè¿™ä¸€æ­¥å¯èƒ½ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶æŸ¥æ›´å¤šèµ„æ–™ä½œä¸ºè¡¥å……ã€‚ä¸è¦åœ¨è¯„è®ºé—®æˆ‘ï¼Œå› ä¸ºæˆ‘å¤§æ¦‚ç‡ä¹Ÿä¸ä¼šğŸ˜¥å½“åˆé…ç½®çš„æ—¶å€™ä¹ŸæŠ˜è…¾äº†ä¸€ä¼šï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯æ€ä¹ˆæå®šçš„ï¼ˆçœŸçš„ä¸çŸ¥é“ï¼‰\nç¬¬ä¸€æ¬¡é…ç½®å¥½sshåå¯èƒ½ä¼šè¿ä¸ä¸Šï¼Œéœ€è¦é‡å¯vscodeå†è¯•è¯•ï¼\n\nç»“è¯­ä¸çŸ¥é“è¿™ç¯‡åšå®¢æœ‰æ²¡æœ‰å¸®åˆ°ä½ å‘¢ï¼Ÿ\nå¦‚æœä½ æ ¹æ®æœ¬æ•™ç¨‹æˆåŠŸé…ç½®å¥½äº†vscodeï¼Œè¿˜è¯·åœ¨ä¸‹é¢è¯„è®ºè¯´ä¸€å£°å“¦ï¼\nä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ¦‚å¿µ","url":"/2022/08/31/note_Linux/8%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/","content":"æœ¬æ–‡æ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿä¸ºCentOS 7.6\n\n\n1.æ“ä½œç³»ç»Ÿæ“ä½œç³»ç»Ÿæ˜¯ä¸ä¼šç›´æ¥å¯¹ç”¨æˆ·æä¾›æœåŠ¡çš„ã€‚å› ä¸ºè¿™æ ·ä¼šæš´éœ²è‡ªå·±çš„åº•å±‚å®ç°ï¼Œå¯¹ç³»ç»Ÿç¨³å®šæ€§é€ æˆäº†å¨èƒ\n\næ“ä½œç³»ç»Ÿæ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨å±‚çš„æ–¹å¼å¯¹å¤–æä¾›æ¥å£æœåŠ¡çš„ã€‚\n\nè¿™å°±å¥½æ¯”ä½ æ˜¯é€šè¿‡å‰ç«¯æŒ‰é’®æ¥ä½¿ç”¨ä¸€ä¸ªç½‘ç«™çš„åŠŸèƒ½ï¼Œè€Œé€šå¸¸ä½ æ˜¯çœ‹ä¸åˆ°ç½‘é¡µçš„åç«¯å®ç°çš„ã€‚\n\nLinuxç³»ç»Ÿçš„åº•å±‚æ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œæ‰€ä»¥è¿™äº›æ¥å£æœåŠ¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€äº›Cè¯­è¨€çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°ç”¨äºæ“ä½œç³»ç»Ÿçš„å„ç§ç®¡ç†ã€‚\næˆ‘ä»¬å­¦ä¹ Linuxçš„ç³»ç»Ÿç¼–ç¨‹ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å­¦ä¹ è¿™äº›å’Œç³»ç»Ÿå¯¹æ¥çš„å‡½æ•°ã€‚\n1.1 ç¼–ç¨‹è¯­è¨€å’Œç³»ç»Ÿå¯¹æ¥ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå…¶æä¾›çš„å„ç§ç®¡ç†ç¡¬ä»¶çš„å‡½æ•°æ˜¯ä¸åŒçš„ã€‚è¿™æ—¶å€™æˆ‘ä»¬çš„C&#x2F;C++ç­‰å…¶ä»–è¯­è¨€æƒ³å’Œç³»ç»Ÿå¯¹æ¥ï¼ˆå¦‚printfæ‰“å°åˆ°å±å¹•ä¸Šï¼‰å°±éœ€è¦åœ¨åº•å±‚å¸®ç”¨æˆ·ç®¡ç†å¥½è¿™äº›ç³»ç»Ÿæ¥å£çš„è°ƒç”¨ã€‚å½“æˆ‘ä»¬ä½¿ç”¨è¿™äº›è¯­è¨€çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å»è°ƒç”¨\n1.2 æè¿°è¿›ç¨‹-PCB\nPCBå¹¶ä¸æ˜¯é‚£äº›ç»¿æ²¹æ²¹çš„ç”µè·¯æ¿ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯process control block\n\nè¿›ç¨‹æ˜¯æœ‰ä¸€ä¸ªæ‹…å½“åˆ†é…ç³»ç»Ÿèµ„æºï¼ˆCPUæ—¶é—´ï¼Œå†…å­˜ï¼‰çš„å®ä½“\n\nè¿›ç¨‹ä¿¡æ¯è¢«æ”¾åœ¨ä¸€ä¸ªå«åšè¿›ç¨‹æ§åˆ¶æ¨¡å—çš„æ•°æ®ç»“æ„ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºè¿›ç¨‹å±æ€§çš„é›†åˆ\nåœ¨Linuxä¸­çš„PCBå…¶å®å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“task strcutï¼ŒåŒ…å«äº†è¿™ä¸ªè¿›ç¨‹çš„å„ç§ä¿¡æ¯ã€‚\n\ntask_structçš„å†…å®¹å¤§å®¶å¯ä»¥ä¸Šç½‘æœæœï¼Œèƒ½åŠ›å¼ºçš„æœ‹å‹å¯ç›´æ¥å»çœ‹Linuxçš„æºç ã€‚\n1.3 ç»„ç»‡è¿›ç¨‹æˆ‘ä»¬å¯ä»¥åœ¨Linuxçš„æºç ä¸­æ‰¾åˆ°ç»„ç»‡è¿›ç¨‹çš„æ–¹å¼ã€‚æ‰€æœ‰è¿è¡Œåœ¨ç³»ç»Ÿé‡Œé¢çš„è¿›ç¨‹éƒ½æ˜¯ä»¥task_structä¸ºæˆå‘˜çš„é“¾è¡¨å½¢å¼å­˜åœ¨å†…æ ¸ä¸­ã€‚ä¸‹é¢æ˜¯å…³äºè¿™ä¸ªç»“æ„ä½“çš„ä¸€éƒ¨åˆ†è§£æ\n\n\næ ‡ç¤ºç¬¦: æè¿°æœ¬è¿›ç¨‹çš„å”¯ä¸€æ ‡ç¤ºç¬¦ï¼Œç”¨æ¥åŒºåˆ«å…¶ä»–è¿›ç¨‹\nçŠ¶æ€: ä»»åŠ¡çŠ¶æ€ï¼Œé€€å‡ºä»£ç ï¼Œé€€å‡ºä¿¡å·ç­‰ã€‚\nä¼˜å…ˆçº§: ç›¸å¯¹äºå…¶ä»–è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚ \nç¨‹åºè®¡æ•°å™¨: ç¨‹åºä¸­å³å°†è¢«æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ \nå†…å­˜æŒ‡é’ˆ: åŒ…æ‹¬ç¨‹åºä»£ç å’Œè¿›ç¨‹ç›¸å…³æ•°æ®çš„æŒ‡é’ˆï¼Œè¿˜æœ‰å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„å†…å­˜å—çš„æŒ‡é’ˆ\nä¸Šä¸‹æ–‡æ•°æ®: è¿›ç¨‹æ‰§è¡Œæ—¶å¤„ç†å™¨çš„å¯„å­˜å™¨ä¸­çš„æ•°æ®[ä¼‘å­¦ä¾‹å­ï¼Œè¦åŠ å›¾CPUï¼Œå¯„å­˜å™¨]ã€‚\nIï¼OçŠ¶æ€ä¿¡æ¯: åŒ…æ‹¬æ˜¾ç¤ºçš„I&#x2F;Oè¯·æ±‚,åˆ†é…ç»™è¿›ç¨‹çš„Iï¼Oè®¾å¤‡å’Œè¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶åˆ—è¡¨ã€‚ \nè®°è´¦ä¿¡æ¯: å¯èƒ½åŒ…æ‹¬å¤„ç†å™¨æ—¶é—´æ€»å’Œï¼Œä½¿ç”¨çš„æ—¶é’Ÿæ•°æ€»å’Œï¼Œæ—¶é—´é™åˆ¶ï¼Œè®°è´¦å·ç­‰ã€‚ \nå…¶ä»–ä¿¡æ¯\n\n\nç›¸å…³è§£æå¯ä»¥çœ‹çœ‹è¿™ç¯‡åšå®¢ã€ä¼ é€é—¨ã€‘\n1.4 æŸ¥çœ‹è¿›ç¨‹1.4.1 pså‘½ä»¤å¯ä»¥ç”¨pså‘½ä»¤æ¥æŸ¥æ‰¾è¿›ç¨‹ä¿¡æ¯ã€‚ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤æ˜¯æ˜¾ç¤ºæ‰€æœ‰çš„è¿›ç¨‹\nps axj\n\nç³»ç»Ÿä¼šæ‰“å°ä¸‹é¢çš„å¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œè¿™å°±å¥½æ¯”windowsä¸‹çš„ä»»åŠ¡ç®¡ç†å™¨\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªwhile(1)çš„æ­»å¾ªç¯å‡½æ•°ï¼Œè¿è¡Œçš„æ—¶å€™å°±å˜æˆäº†ä¸€ä¸ªè¿›ç¨‹äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥æ‰¾ç‰¹å®šçš„è¿›ç¨‹ä¿¡æ¯\nps axj | grep test\n\n\nä¸Šå›¾ä¸­æˆ‘ä»¬æœç´¢testï¼Œå‡ºç°äº†ä¸¤ä¸ªè¿›ç¨‹ã€‚ç¬¬ä¸€ä¸ªè¿›ç¨‹å¾ˆæ˜æ˜¾æ˜¯æˆ‘ä»¬è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºã€‚é‚£ä¹ˆç¬¬äºŒä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚åªä¸è¿‡lsè¿™ç§ç±»å‹çš„å‘½ä»¤å¾ˆå¿«å°±èƒ½æ‰§è¡Œå®Œæ¯•ã€‚\n\nè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç¡®è®¤ï¼Œå‡ºç°çš„ç¬¬äºŒä¸ªè¿›ç¨‹å®é™…ä¸Šæ˜¯æˆ‘ä»¬æ‰§è¡Œè¿™æ¡æœç´¢è¯­å¥å‡ºç°çš„ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªæŒ‡ä»¤æ¥å±è”½grepçš„ç»“æœï¼Œåªæ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±çš„é‚£ä¸ªç¨‹åºã€‚\nps axj | grep test | grep -v grep\n\næœ€åä¸€ä¸ªæŒ‡ä»¤çš„æ„æ€æ˜¯å¿½ç•¥æ‰åŒ…å«grepçš„ç»“æœï¼Œç°åœ¨å°±ä¸ä¼šæ˜¾ç¤ºç¬¬äºŒä¸ªgrepçš„è¿›ç¨‹äº†\n\n1.4.2 procç›®å½•è¿˜å¯ä»¥é€šè¿‡/procç³»ç»Ÿæ–‡ä»¶å¤¹æ¥æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ä¿¡æ¯ã€‚è¿™é‡Œé¢çš„å†…å®¹éƒ½æ˜¯ä¸€ä¸ªå®æ—¶çš„è¿›ç¨‹ä¿¡æ¯\n\næ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„PID(process id)ï¼Œç”¨æ¥æ ‡è¯†å”¯ä¸€çš„è¿›ç¨‹\nå¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªæŒ‡ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæç¤ºä¿¡æ¯ï¼Œå…¶ä¸­çš„&amp;&amp;ä»£è¡¨é€»è¾‘ä¸ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œç¬¬äºŒä¸ªå‘½ä»¤\nps ajx | head -1 &amp;&amp; ps ajx | grep test | grep -v grep\n\n\nè¿™é‡Œå°±å‘Šè¯‰æˆ‘ä»¬äº†è¿™ä¸ªå‘½ä»¤çš„PIDæ˜¯ä»€ä¹ˆï¼Œå³ç¬¬2ä½æ•°å­—\n\nå¦‚æœä½ éœ€è¦æŸ¥çœ‹PIDä¸º1çš„è¿›ç¨‹ï¼Œåˆ™æ‰“å¼€å¯¹åº”è¿›ç¨‹çš„æ–‡ä»¶å¤¹\n\nä¸Šé¢æˆ‘ä»¬æœåˆ°çš„è¿›ç¨‹PIDä¸º5408ï¼ŒæŸ¥çœ‹å¯¹åº”æ–‡ä»¶å¤¹å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…å®¹\n\nå½“æˆ‘ä»¬å…³é—­äº†./testè¿›ç¨‹åœ¨å»æŸ¥æ‰¾ï¼Œä¼šå‘ç°æ²¡æœ‰è¿™ä¸ªè·¯å¾„äº†\n\nåœ¨æ¯ä¸€ä¸ªè¿›ç¨‹æ–‡ä»¶å¤¹ä¸­éƒ½æœ‰ä¸€ä¸ªcwdå’Œexe\n\ncwdå…¶æŒ‡å‘çš„æ˜¯è¿›ç¨‹å½“å‰çš„å·¥ä½œè·¯å¾„\nexeæŒ‡å‘çš„æ˜¯è¿›ç¨‹å¯¹åº”å¯æ‰§è¡Œç¨‹åºçš„ç£ç›˜æ–‡ä»¶\n\næ¯”å¦‚ç°åœ¨æˆ‘ä½¿ç”¨pså‘½ä»¤æŸ¥æ‰¾åˆ°äº†ä¸‹é¢è¿™ä¸ªpythonä»£ç è¿›ç¨‹\n\nä½¿ç”¨ls -l /proc/19423å‘½ä»¤æ‰“å¼€å¯¹åº”æ–‡ä»¶å¤¹ï¼Œä¾¿å¯ä»¥çœ‹åˆ°cwdå’Œexeçš„æŒ‡å‘\n\nè¿™ä»£è¡¨è¯¥è¿›ç¨‹æ˜¯ç”¨python3.10è¿›è¡Œæ‰§è¡Œçš„ï¼Œå…¶å·¥ä½œç›®å½•ä¸ºcwdæŒ‡å‘çš„è·¯å¾„\n\npidã€å·¥ä½œè·¯å¾„ç­‰ç­‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨è¿›ç¨‹çš„task_structä¸­\n\n1.4.3 Cè¯­è¨€ä»£ç è·å–ppidå’Œpidé™¤äº†åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡Cè¯­è¨€ä»£ç ä¸­å’Œç³»ç»Ÿé€šä¿¡çš„åº“å‡½æ•°æ¥è·å–å½“å‰è¿›ç¨‹çš„ppidå’Œpid\n#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main()&#123;    printf(&quot;pid: %d\\n&quot;, getpid());    printf(&quot;ppid: %d\\n&quot;, getppid());    return 0;&#125;\n\n\nä½¿ç”¨ä¸€ä¸ªwhile(1)å¾ªç¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹è¿™ä¸ªè¿›ç¨‹æ˜¯å¦å’Œæˆ‘ä»¬ç”¨psæœå‡ºæ¥çš„ç»“æœç›¸åŒ\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœå¯»å‡ºæ¥çš„ç»“æœå’Œè¯¥ç¨‹åºè‡ªå·±æ‰“å°çš„ç»“æœæ˜¯ä¸€æ ·çš„\nå®é™…ä¸Šï¼Œæˆ‘ä»¬æ‰€æœ‰åœ¨å‘½ä»¤è¡Œä¸Šæ‰§è¡Œçš„ç¨‹åºï¼Œéƒ½æ˜¯bashï¼ˆå³å½“å‰å‘½ä»¤è¡Œï¼‰çš„å­è¿›ç¨‹\n\n1.5 fork é€šè¿‡ç³»ç»Ÿè°ƒç”¨åˆ›å»ºçˆ¶å­è¿›ç¨‹å¦‚æœä½ ç”¨è¿‡giteeæˆ–è€…githubï¼Œæƒ³å¿…å¯¹forkå¹¶ä¸é™Œç”Ÿã€‚åœ¨gitæ‰˜ç®¡ç½‘ç«™ä¸Šï¼Œæˆ‘ä»¬forkåˆ«äººçš„ä»“åº“ï¼Œä¾¿ä¼šåœ¨è‡ªå·±çš„è´¦æˆ·ä¸­å‡ºç°ä¸€ä¸ªåˆ«äººä»“åº“çš„â€œå­ä»“åº“â€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªâ€œå­ä»“åº“â€é‡Œé¢ä¿®æ”¹ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œå†åˆ›å»ºä¸€ä¸ªpull requeståˆå¹¶å…¥è¢«forkçš„ä»“åº“\nè€Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œforkçš„ä½œç”¨ä¾¿æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªçˆ¶å­è¿›ç¨‹ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹ç›¸äº’ç‹¬ç«‹ï¼Œä¸”æœ‰å¾ˆå¤šç‰¹æ®Šçš„åœ°æ–¹ç­‰ç€æˆ‘ä»¬çš„æ¢ç´¢\næ¯”å¦‚ï¼šforkå…·æœ‰ä¸¤ä¸ªä¸åŒçš„è¿”å›å€¼ï¼\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç \n#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main()&#123;    pid_t id = fork();    //id=0 å­è¿›ç¨‹ï¼›&gt;0ä¸ºçˆ¶è¿›ç¨‹    if(id == 0)    &#123;        //child        while(1)        &#123;            printf(&quot;å­è¿›ç¨‹ï¼Œpid: %d, çˆ¶è¿›ç¨‹æ˜¯: %d\\n&quot;, getpid(), getppid());            sleep(1);        &#125;    &#125;    else&#123;        //parent        while(1)        &#123;            printf(&quot;çˆ¶è¿›ç¨‹ï¼Œpid: %d, çˆ¶è¿›ç¨‹æ˜¯: %d\\n&quot;, getpid(), getppid());            sleep(1);        &#125;    &#125;&#125;\n\nè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå‘ç°çˆ¶å­è¿›ç¨‹ç«Ÿç„¶äº¤å‰è¿è¡Œäº†ï¼è€Œä¸”è¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸åŒçš„pidã€‚å…¶ä¸­å­è¿›ç¨‹çš„ppidå³ä¸ºçˆ¶è¿›ç¨‹çš„pidï¼\n\nå¥‡æ€ªï¼Œæˆ‘ä»¬çš„whileå¾ªç¯æ˜æ˜æ˜¯å†™åœ¨ifé‡Œé¢çš„å•Šï¼Ÿä¸ºä»€ä¹ˆelseé‡Œé¢çš„whileä¹Ÿè¢«æ­£å¸¸æ‰§è¡Œäº†å‘¢ï¼Ÿ\n1.5.1 man forkè¿™ä¾¿éœ€è¦æˆ‘ä»¬äº†è§£ä¸€ä¸‹forkåˆ°åº•æ˜¯ä½•æ–¹ç¥åœ£äº†ã€‚\nman fork\n\n\nå¦‚æœä½ å‡ºç°No manual entry for forkçš„æŠ¥é”™ï¼Œåœ¨CentOSä¸‹è¯·å°è¯•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\nsudo yum install -y man-pages\n\n\nåŒæ—¶å¯ä»¥çœ‹åˆ°å…³äºforkçš„è¿”å›å€¼çš„æè¿°\n\nè¿™ä¾¿èƒ½å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸ºå•¥forkä¸‹æ–¹åŒä¸€ä¸ªidå€¼ä½¿ç”¨æ‰“å°ä¼šè¿”å›ä¸åŒçš„ç»“æœï¼›ä»¥åŠif elseè¢«äº¤å‰è¿è¡Œçš„åŸå› ã€‚\n\nforkä¹‹åï¼Œçˆ¶å­è¿›ç¨‹å…±äº«ä»£ç ï¼Œéƒ½ä¼šæ‰§è¡Œåé¢çš„if elseè¯­å¥\nforkä¹‹åï¼Œçˆ¶å­è¿›ç¨‹çš„è¿”å›å€¼ä¸ç›¸åŒï¼Œæ‰€ä»¥if elseè¯­å¥è¿›å…¥çš„æ¨¡å—ä¹Ÿä¸ç›¸åŒ\n\nforkè¿›ç¨‹ç»™çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹pidï¼Œæ–¹ä¾¿çˆ¶è¿›ç¨‹ç®¡ç†è‡ªå·±çš„å­è¿›ç¨‹ã€‚è¿™æ˜¯å› ä¸ºçˆ¶è¿›ç¨‹å¿…é¡»è¦æœ‰æ ‡è¯†å­è¿›ç¨‹çš„æ–¹æ³•ï¼\n\nä¸€ä¸ªçˆ¶äº²å¯ä»¥æœ‰å¤šä¸ªå­©å­ï¼Œéœ€è¦pidæ¥è¿›è¡Œç®¡ç†\nä¸€ä¸ªå­è¿›ç¨‹åªèƒ½æœ‰1ä¸ªçˆ¶äº²ï¼Œæ‰€ä»¥ç”¨0æ¥æ ‡è¯†å­è¿›ç¨‹åˆ›å»ºæˆåŠŸå³å¯ã€‚å®ƒå¯ä»¥ç”¨ppidæ–¹ä¾¿çš„æ‰¾åˆ°è‡ªå·±çš„çˆ¶è¿›ç¨‹ã€‚\n\n1.5.2 forkåšäº†ä»€ä¹ˆforkä¼šè°ƒç”¨ç³»ç»Ÿçš„OS system callï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹\n\ntask_struct + çˆ¶è¿›ç¨‹ä»£ç å’Œæ•°æ®\ntask_struct + å­è¿›ç¨‹ä»£ç å’Œæ•°æ®\n\nå­è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®å¤§å¤šæ•°éƒ½æ˜¯ä»çˆ¶è¿›ç¨‹ç»§æ‰¿ä¸‹æ¥çš„ï¼Œä¸è¿‡pidå’Œppidè‚¯å®šä¸ä¼šç»§æ‰¿ã€‚å…¶å†…éƒ¨çš„å˜é‡/æ•°æ®å’Œçˆ¶è¿›ç¨‹ç‹¬ç«‹ï¼ˆè¿™ä¸ªåç»­çš„åšå®¢ä¼šæ¶‰åŠï¼‰\n\nå½“forkåˆ›å»ºå¥½å­è¿›ç¨‹å¹¶è¿›è¡Œreturnçš„æ—¶å€™ï¼Œå®ƒçš„åŠŸèƒ½å°±å·²ç»å®Œæˆäº†\næ­¤æ—¶è¿˜ä¼šå°†å­è¿›ç¨‹æ”¾å…¥è¿è¡Œé˜Ÿåˆ—\n\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œå†æ¥ç†è§£ä¸€ä¸‹è¿›ç¨‹æ˜¯å¦‚ä½•è¢«è¿è¡Œçš„ğŸ‘‡\n2. å¦‚ä½•ç†è§£è¿›ç¨‹è¢«è¿è¡Œåœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªCPUéƒ½æœ‰ä¸€ä¸ªè¿è¡Œé˜Ÿåˆ—\nè¿™ä¸ªè¿è¡Œé˜Ÿåˆ—ä¹‹ä¸­å­˜æ”¾çš„ä¾¿æ˜¯task_structï¼Œç³»ç»Ÿä¼šä¾æ¬¡è¿è¡Œæ¯ä¸€ä¸ªè¿›ç¨‹ã€‚\n\nåœ¨ä¸Šé¢æˆ‘ä»¬çš„forkåˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œä¾¿ä¼šæŠŠå­è¿›ç¨‹æ”¾å…¥è¿è¡Œé˜Ÿåˆ—\n\næ‰€ä»¥å®é™…ä¸Šï¼Œforkå¹¶ä¸æ˜¯æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œè€Œæ˜¯åœ¨å…ˆè¿è¡Œäº†çˆ¶è¿›ç¨‹åï¼Œåˆåˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹ã€‚è¿™ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä»£ç ï¼Œè€Œä¸”å®ƒä»¬éƒ½æ˜¯æŒ‚è½½åœ¨åŒä¸€ä¸ªbashå‘½ä»¤è¡Œä¸Šï¼Œæ‰ä¼šå‡ºç°ä¸Šè¿°äº¤æ›¿æ‰“å°çš„æƒ…å†µã€‚\n\nç»“è¯­ä¸‹ç¯‡åšå®¢æ˜¯æœ‰å…³è¿›ç¨‹çŠ¶æ€çš„å†…å®¹ï¼Œé˜¿å·´é˜¿å·´ï¼Œå¥½ä¹…æ²¡å†™åšå®¢äº†\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ¦‚å¿µ","url":"/2022/09/27/note_Linux/9%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81_%E4%BC%98%E5%85%88%E7%BA%A7/","content":"æœ¬ç¯‡åšå®¢æ˜¯æœ‰å…³è¿›ç¨‹çŠ¶æ€çš„ï¼Œå¥½ä¹…æ²¡æœ‰å†™Linuxçš„åšå®¢äº†ï¼Œä¸€èµ·æ¥çœ‹çœ‹å§ï¼\n\n\n\nå®éªŒç³»ç»Ÿï¼šCentOS 7.6\n\n1.ç³»ç»Ÿè¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€å½“æˆ‘ä»¬æƒ³åˆ°è¿›ç¨‹çš„æ—¶å€™ï¼Œä¸€å®šè¦é¦–å…ˆæƒ³åˆ°task_structç»“æ„ä½“ã€‚è¯¥ç»“æ„ä½“å†…éƒ¨æœ‰ä¸€ä¸ªstateçŠ¶æ€ç ï¼Œç”¨äºæ ‡è¯†å½“å‰è¿›ç¨‹å¤„äºä»€ä¹ˆçŠ¶æ€\n\n1.1 è¿è¡Œæ€CPUä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹é˜Ÿåˆ—ï¼ˆåŒé“¾è¡¨ï¼‰ï¼Œé˜Ÿåˆ—çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªtask_structç»“æ„ä½“ï¼Œç”¨æ¥ç»´æŠ¤å³å°†è¿è¡Œçš„è¿›ç¨‹ã€‚å½“è½®åˆ°æŸä¸ªè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼ŒCPUå°±ä¼šå°†è¿™ä¸ªè¿›ç¨‹çš„æ•°æ®å’Œä»£ç æ”¾å…¥å†…å­˜å’Œè‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¹¶å¼€å§‹è¿è¡Œ\nåªè¦è¿›å…¥äº†è¿è¡Œé˜Ÿåˆ—çš„è¿›ç¨‹ï¼Œå°±æ˜¯è¿è¡Œæ€çš„è¿›ç¨‹\n\næ‰€ä»¥è¿è¡Œæ€å¹¶ä¸æ˜¯æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬å¯¹è¿™ä»¶äº‹çš„æ„ŸçŸ¥ä¸å¤§å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºç°ä»£çš„CPUçš„è¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œè¿™äº›è¿è¡Œé˜Ÿåˆ—çš„è½®è½¬å‘¨æœŸå¾ˆçŸ­\n1.2 ç»ˆæ­¢æ€ç»ˆæ­¢æ€ï¼šè¿›ç¨‹è¿˜åœ¨ï¼Œä½†æ˜¯æ°¸è¿œä¸ä¼šè¿è¡Œï¼Œåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…è¢«é‡Šæ”¾\nä¸ºä»€ä¹ˆè¿›ç¨‹éƒ½ç»ˆæ­¢äº†ï¼Œä¸ç«‹é©¬é‡Šæ”¾å¯¹åº”çš„èµ„æºï¼Œè€Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªç»ˆæ­¢æ€ï¼Ÿ\n\nè¿™æ˜¯å› ä¸ºå½“å‰CPU&#x2F;æ“ä½œç³»ç»Ÿæ­£åœ¨å¿™ç€å¹²å…¶ä»–çš„äº‹æƒ…ï¼Œæ²¡æ—¶é—´è¿‡æ¥é‡Šæ”¾ä½ ã€‚æ‰€ä»¥ä¼šå°†ä¸è¿è¡Œçš„è¿›ç¨‹æ”¾å…¥ç»ˆæ­¢æ€çš„é˜Ÿåˆ—ï¼ˆå°†è¯¥è¿›ç¨‹task_structç»“æ„ä½“æ’å…¥è¯¥é˜Ÿåˆ—ï¼‰\nå½“æ“ä½œç³»ç»Ÿç©ºé—²çš„æ—¶å€™ï¼Œä¾¿ä¼šå–ç»ˆæ­¢æ€é˜Ÿåˆ—é‡Œé¢çš„è¿›ç¨‹è¿›è¡Œé‡Šæ”¾\n\n1.3 é˜»å¡æ€ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨èµ„æºçš„æ—¶å€™ï¼Œä¸ä»…ä»…ä¼šç”³è¯·CPUçš„è®¡ç®—èµ„æºï¼Œè¿˜æœ‰å¯èƒ½ç”³è¯·å…¶ä»–æ›´å¤šçš„èµ„æºï¼Œæ¯”å¦‚ç½‘ç»œ/ç¡¬ç›˜/ç½‘å¡/æ˜¾å¡ç­‰ç­‰\nå¦‚æœç”³è¯·è¿™äº›èµ„æºçš„æ—¶å€™å¾—ä¸åˆ°æ»¡è¶³ï¼Œå°±éœ€è¦æ’é˜Ÿ\n\nCPUèµ„æºï¼šè¿è¡Œé˜Ÿåˆ—\nå…¶ä»–èµ„æºï¼šä¹Ÿéœ€è¦è¿›è¡Œæ’é˜Ÿ\n\n ä¸‹é¢ç”¨ä¼ªä»£ç çš„æ–¹å¼æ¥æè¿°ä¸€ä¸‹è¿›ç¨‹ä¸ºä½•ä¼šé˜»å¡ \nstruct cpuinfo&#123;    //â€¦â€¦    //è¿è¡Œé˜Ÿåˆ—    task_struct *queue;&#125;struct disk_div&#123;   \t//ç£ç›˜çš„ç­‰å¾…é˜Ÿåˆ—    task_struct *queue;&#125;struct net_div&#123;   \t//ç½‘å¡çš„ç­‰å¾…é˜Ÿåˆ—    task_struct *queue;&#125;\n\nå½“æˆ‘ä»¬çš„è¿›ç¨‹è®¿é—®æŸç§èµ„æºï¼Œç‰¹åˆ«æ˜¯å¤–å­˜ï¼ˆç£ç›˜ï¼‰è¿™ç§æ…¢è®¾å¤‡èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœç£ç›˜æš‚æ—¶è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šæŠŠå½“å‰è¿›ç¨‹ä»è¿è¡Œé˜Ÿåˆ—å‰¥ç¦»ï¼Œæ’å…¥åˆ°å¯¹åº”éœ€è¦è®¿é—®çš„è®¾å¤‡ä¸‹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­\n\nDDR4å†…å­˜çš„è¯»å†™å¤§çº¦æ˜¯40GB&#x2F;Sï¼Œå³ä¾¿æ˜¯ç°åœ¨å¸‚é¢ä¸Šè¾ƒå¿«çš„pcie4.0å›ºæ€ç¡¬ç›˜å…¶è¯»å†™é€Ÿåº¦ä¹Ÿåªæœ‰7GB&#x2F;Så·¦å³ï¼Œè¿™ä¸ªå·®è·è¿˜æ˜¯å¾ˆå¤§çš„ã€‚æ‰€ä»¥æ‰è¯´ç£ç›˜æ˜¯â€œæ…¢è®¾å¤‡â€èµ„æº\n\næ“ä½œç³»ç»Ÿç§»åŠ¨task_structåˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸‹ï¼Œå°±æ˜¯èµ·äº†å®ƒç®¡ç†è¿›ç¨‹çš„ä½œç”¨ã€‚åŒæ—¶å°†è¿›ç¨‹å‰¥ç¦»è¿è¡Œé˜Ÿåˆ—ï¼Œä¹Ÿèƒ½è®©ç­‰å¾…æ…¢è®¾å¤‡èµ„æºçš„è¿›ç¨‹ä¸è‡³äºæŠŠæ•´ä¸ªç³»ç»Ÿå¡æ­»ã€‚å½“æˆ‘ä»¬ç”µè„‘ä¸Šè¿è¡Œçš„è¿›ç¨‹å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½é‡åˆ°å½“å‰çš„è¿›ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­å‡ºç°äº†é˜»å¡ï¼Œæ­¤æ—¶è¿›ç¨‹çš„ä»£ç ä¸ä¼šè¿è¡Œã€‚æœ€ç›´è§‚çš„ååº”ä¾¿æ˜¯å½“å‰è¿›ç¨‹å¡ä½ä¸åŠ¨äº†ã€‚\n\n1.4 è¿›ç¨‹æŒ‚èµ·è¿›ç¨‹æŒ‚èµ·å’Œè¿›ç¨‹é˜»å¡å¾ˆç±»ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸åŒã€‚\n\nè¿›ç¨‹æŒ‚èµ·å’Œé˜»å¡ä¸åŒçš„æ˜¯ï¼Œé˜»å¡åªæ˜¯å•çº¯åœ°åœ¨ç­‰å¾…æ…¢èµ„æºã€‚è€ŒæŒ‚èµ·åˆ™æ˜¯è¯¥è¿›ç¨‹çš„æ•°æ®è¢«æ”¾å…¥å›äº†ç£ç›˜ï¼Œè¿›ç¨‹æœ¬èº«ä¾æ—§åœ¨æ’é˜Ÿç­‰å¾…ã€‚æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„swapåˆ†åŒºï¼Œç”¨æ¥å­˜æ”¾æŒ‚èµ·è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®ã€‚\næ“ä½œç³»ç»Ÿè¿™ä¹ˆç®¡ç†ï¼Œæ˜¯ä¸ºäº†ä¸è®©å†…å­˜åœ¨å¤šè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ä¸å¤Ÿç”¨äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå½“æˆ‘ä»¬å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå¾€å¾€ä¼´éšç€ç£ç›˜çš„é¢‘ç¹è¯»å–ã€‚\n\nå½“ç„¶ï¼Œå†…å­˜ä¸å¤Ÿä¹Ÿæœ‰å¯èƒ½æ˜¯æŸä¸€ä¸ªè¿›ç¨‹éœ€è¦ä¸€æ¬¡æ€§åŠ è½½çš„ä»£ç æ•°æ®å·²ç»è¶…è¿‡äº†å†…å­˜çš„å¤§å°ğŸ˜‚\n\nä¸‹å›¾ä¸­å·¦ä¸‹è§’çš„éƒ¨åˆ†ä¾¿æ¼”ç¤ºäº†æ“ä½œç³»ç»Ÿåœ¨å¤„ç†é˜»å¡å’ŒæŒ‚èµ·æ€çš„æ“ä½œå¾ªç¯\n\n\n2.Linuxä¸‹çš„è¿›ç¨‹çŠ¶æ€æè¿°åœ¨linuxä¸‹è¿›ç¨‹çš„çŠ¶æ€æ˜¯å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢çš„\n\n2.1 Så’ŒRçŠ¶æ€çš„è¯´æ˜å…¶ä¸­Rå¯¹åº”çš„æ˜¯è¿è¡Œæ€ï¼ŒSå¯¹åº”çš„å°±æ˜¯é˜»å¡æ€ï¼ˆlinuxä¸‹ä¸ºä¼‘çœ ï¼‰\næˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸ªç¨‹åºçœ‹çœ‹å®ƒå¤„äºä»€ä¹ˆçŠ¶æ€\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    while(1)&#123;        printf(&quot;%d\\n&quot;,getppid());        sleep(1);    &#125;    return 0;&#125;\n\nè¿è¡Œå‘ç°ï¼Œå·¦ä¾§æ‰“å°å‡ºäº†å½“å‰è¿›ç¨‹PIDï¼Œè€Œå³ä¾§å½“æˆ‘ä»¬ä½¿ç”¨pså‘½ä»¤æŸ¥è¯¢è¯¥è¿›ç¨‹çš„æ—¶å€™ï¼Œå‘ç°è¯¥è¿›ç¨‹çš„çŠ¶æ€æ˜¯S+ä¹Ÿå°±æ˜¯ä¼‘çœ çŠ¶æ€\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test32080 30455 30455 32080 pts/0    30455 S+    1001   0:00 ./test\n\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿç¨‹åºä¸æ˜¯ä¸€ç›´éƒ½åœ¨è¿è¡Œå—ï¼Ÿ\né¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼Œprintféœ€è¦å°†æ•°æ®æ‰“å°è¾“å‡ºåˆ°å±å¹•ä¸Šï¼Œå±å¹•ä½œä¸ºå¤–è®¾ï¼ŒåŒæ ·å±äºæ…¢èµ„æºã€‚æ‰€ä»¥æˆ‘ä»¬çš„è¿›ç¨‹ç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯å¤„äºsleep(1)ä»¥åŠç­‰å¾…å±å¹•åˆ·æ–°çš„è¿‡ç¨‹ä¸­ã€‚è€ŒCPUåªéœ€è¦æ‰§è¡Œprintfä¸€ä¸ªæ“ä½œï¼Œè¿™ä¸ªæ“ä½œå‡ ä¹æ˜¯ç¬é—´å°±è¿›è¡Œï¼Œå½“ç„¶ä¹Ÿçœ‹ä¸åˆ°è¯¥è¿›ç¨‹å¤„äºè¿è¡Œæ€äº†\nå³ä¾¿æˆ‘ä»¬æŠŠsleep(1)å»æ‰ï¼Œè¿›ç¨‹ä¹Ÿæ˜¯éœ€è¦ç­‰å¾…å±å¹•åˆ·æ–°ï¼ŒåŒæ ·å¤„äºS+çŠ¶æ€\né‚£è¦æ€æ ·æ‰èƒ½è®©è¿›ç¨‹å¤„äºè¿è¡Œæ€å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªä¸å’Œå¤–è®¾äº¤äº’çš„æ­»å¾ªç¯å³å¯\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    while(1)&#123;\t\tint a = 10;    &#125;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ç°åœ¨è¿›ç¨‹çš„çŠ¶æ€æ˜¯R+ï¼Œå¤„äºè¿è¡Œæ€ï¼\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test32080 32489 32489 32080 pts/0    32489 R+    1001   0:06 ./test\n\n\n2.2 DçŠ¶æ€disk sleepé™¤äº†åŸºæœ¬çš„SçŠ¶æ€ï¼Œlinuxä¸‹è¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„disk sleepçŠ¶æ€ã€‚å¦‚åŒå®ƒçš„åå­—ä¸€æ ·ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯ä¸“é—¨ä¸ºè®¿é—®ç¡¬ç›˜çš„è¿›ç¨‹è®¾è®¡çš„\nå‡è®¾æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªåœºæ™¯\n1.è¿›ç¨‹Aéœ€è¦è®¿é—®ç£ç›˜èµ„æºï¼Œå†™å…¥1GBçš„æ•°æ®2.ç£ç›˜å¾ˆå¿™ï¼Œè¿›ç¨‹Aè¿›å…¥SçŠ¶æ€ç­‰å¾…è¯»å†™3.æ“ä½œç³»ç»Ÿå‘ç°è¿™é‡Œæœ‰ä¸ªè¿›ç¨‹æ²¡å¹²æ´»ï¼Œå†…å­˜åˆä¸å¤Ÿäº†ï¼Œäºæ˜¯æŠŠè¿›ç¨‹Aå¹²æ‰äº†4.è½®åˆ°è¿›ç¨‹Aç‹¬å†™çš„æ—¶å€™ï¼Œç£ç›˜å‘ç°è¿›ç¨‹Aå·²ç»è¢«å¹²æ‰äº†ï¼Œäºæ˜¯æ²¡ç®¡å®ƒçš„1GBæ•°æ®5.ç»“æœï¼šè¿™ä¸ª1GBæ•°æ®ä¸¢å¤±äº†\n\nå‡ºç°è¿™ç§æ•°æ®ä¸¢å¤±ï¼Œè°éƒ½ä¸æƒ³çš„å˜›ã€‚æ‰€ä»¥Linuxå°±è®¾ç½®äº†ä¸€ä¸ªDçŠ¶æ€ï¼Œ\n\nS æµ…åº¦ç¡çœ \nD æ·±åº¦ç¡çœ \n\nå¤„äºDçŠ¶æ€çš„è¿›ç¨‹ä¸èƒ½è¢«æ“ä½œç³»ç»Ÿkillæ‰ã€‚è¦æƒ³æ€æ‰ä¸€ä¸ªDçŠ¶æ€çš„è¿›ç¨‹ï¼Œåªæœ‰ä¸‹é¢ä¸‰ç§åŠæ³•\n\nç­‰ç¡¬ç›˜è¯»å†™å®Œæ¯•ï¼Œç»™è¿›ç¨‹è¿”å›ç»“æœä¹‹åï¼Œè¿›ç¨‹ä»DçŠ¶æ€å˜æˆå…¶ä»–çŠ¶æ€ï¼Œæ“ä½œç³»ç»Ÿè¿›è¡Œå¤„ç†\nå…³æœºé‡å¯\næ‹”æ‰ç”µè„‘çš„ç”µæº\n\n\n\nlinuxä¸‹å¯ä»¥ç”¨DDå‘½ä»¤ç›´æ¥å¯¹ç¡¬ç›˜è¿›æ“ä½œ\n\n\n3.åƒµå°¸è¿›ç¨‹Zåƒµå°¸è¿›ç¨‹å¯¹åº”çš„çŠ¶æ€ç æ˜¯Zï¼Œè€ŒXæ˜¯1.2æåˆ°çš„ç»ˆæ­¢æ€\n3.1 ä¸ºä»€ä¹ˆä¼šå­˜åœ¨åƒµå°¸è¿›ç¨‹?å½“Linuxä¸­çš„ä¸€ä¸ªè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸ä¼šè¿›å…¥XçŠ¶æ€ï¼ˆç»ˆæ­¢æ€ï¼Œå¯ä»¥å›æ”¶èµ„æºï¼‰ï¼Œè€Œæ˜¯è¿›å…¥ZçŠ¶æ€\n\nè¿›ç¨‹è¿è¡Œäº†ä¸€å®šçš„ç¨‹åºï¼Œå¯ä»¥ç†è§£ä¸ºè¿™ä¸ªè¿›ç¨‹çš„ä»»åŠ¡\nå½“è¯¥è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“è¿™ä¸ªè¿›ç¨‹æ˜¯å¦‚ä½•ç»“æŸçš„ï¼ˆå¯ä»¥ç†è§£ä¸ºç»ˆæ­¢çš„åŸå› ï¼‰\nä¸€èˆ¬æ˜¯å°†æ‰§è¡Œç»“æœäº¤è¿˜ç»™æ“ä½œç³»ç»Ÿæˆ–è€…çˆ¶è¿›ç¨‹\n\nç»´æŠ¤ä¸€ä¸ªçŠ¶æ€Zï¼Œå°±æ˜¯ä¸ºäº†ç»´æŠ¤è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯ï¼Œå¯ä»¥è®©çˆ¶è¿›ç¨‹/æ“ä½œç³»ç»Ÿè¯»å–\n\nçˆ¶è¿›ç¨‹/æ“ä½œç³»ç»Ÿæ˜¯é€šè¿‡è¿›ç¨‹ç­‰å¾…æ¥è¯»å–è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯çš„\n\nåœ¨task_structé‡Œé¢å°±æœ‰ä¸€ä¸ªä¸“é—¨çš„æˆå‘˜æ¥ç»´æŠ¤é€€å‡ºä¿¡æ¯\n\n3.2 å¦‚ä½•å¤ç°åƒµå°¸çŠ¶æ€ï¼Ÿæˆ‘ä»¬åˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œåªè¦çˆ¶è¿›ç¨‹ä¸æ­ç†å­è¿›ç¨‹ï¼Œä¸€ç›´è¿è¡Œçˆ¶è¿›ç¨‹ï¼Œæå‰ç»ˆæ­¢å­è¿›ç¨‹ï¼Œå°±å¯ä»¥è§‚å¯Ÿåˆ°å­è¿›ç¨‹è¿›å…¥åƒµå°¸çŠ¶æ€\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    int ret = fork();    if(ret == 0)    &#123;        int i = 6;        while(i)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹ï¼Œæˆ‘çš„ppidæ˜¯%d,pidæ˜¯%d\\næˆ‘è¿˜æœ‰%iç§’ç»ˆæ­¢&quot;,getppid(),getpid(),i--);            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹è¿›å…¥åƒµå°¸çŠ¶æ€\\n&quot;);        exit(0);    &#125;    else&#123;        printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹ï¼Œæˆ‘çš„ppidæ˜¯%d,pidæ˜¯%d\\n&quot;,getppid(),getpid());        while(1)        &#123;            int a = 10;           &#125;    &#125;           return 0;&#125;\n\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test1 | grep -v grep32080 30962 30962 32080 pts/0    30962 R+    1001   0:05 ./test130962 30963 30962 32080 pts/0    30962 S+    1001   0:00 ./test1[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test1 | grep -v grep32080 30962 30962 32080 pts/0    30962 R+    1001   0:06 ./test130962 30963 30962 32080 pts/0    30962 Z+    1001   0:00 [test1] &lt;defunct&gt;\n\nè‹±è¯­å°è¯¾å ‚ï¼šdefunct\n\nä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šè¦æ±‚çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹ï¼Œä¸è¿‡è¿™ä¸ªå¾—åç»­æ‰èƒ½å­¦åˆ°äº†ï¼\npså¾ªç¯ç›‘æ§è„šæœ¬æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç›‘æ§è„šæœ¬æ¥æ›´æ–¹ä¾¿çš„ç›‘æ§ç»“æœ\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„ä½œç”¨æ˜¯ï¼Œæ¯ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grepå‘½ä»¤ï¼Œç›´åˆ°æˆ‘ä»¬ä½¿ç”¨ctrl+cç»ˆæ­¢è¿›ç¨‹\néœ€è¦æ³¨æ„åˆ†éš”ç¬¦ï¼Œwhileåé¢çš„æ˜¯:;ä¸è¦å†™æˆåŒå†’å·ï¼\n3.3 é•¿æ—¶é—´åƒµå°¸çŠ¶æ€çš„å¼Šç«¯å¦‚æœä¸€ä¸ªåƒµå°¸è¿›ç¨‹é•¿æ—¶é—´ä¸è¢«å¤„ç†ï¼Œå°±å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼\nå­è¿›ç¨‹çš„çŠ¶æ€æ˜¯ç”¨æ•°æ®ç»´æŠ¤çš„ï¼Œå¦‚æœçˆ¶è¿›ç¨‹ä¸€ç›´ä¸å›æ”¶å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹çš„task_structå°±ä¸€ç›´ç•™å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™å°±æ˜¯ä¸€å®šçš„å†…å­˜æ³„æ¼ã€‚\n3.4 å­¤å„¿è¿›ç¨‹å½“ä¸€ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å…ˆé€€å‡ºçš„æ—¶å€™ï¼Œå­è¿›ç¨‹å°±ä¼šå˜æˆå­¤å„¿è¿›ç¨‹\n\nä¸ºä»€ä¹ˆè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°çˆ¶è¿›ç¨‹è¿›å…¥Zæˆ–è€…XçŠ¶æ€å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºè¿™é‡Œçˆ¶è¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯bashï¼Œå‘½ä»¤è¡Œå›æ”¶äº†æˆ‘ä»¬çš„çˆ¶è¿›ç¨‹ã€‚\nå¯å­è¿›ç¨‹ä¸ºä½•è¿˜åœ¨è¿™é‡Œå‘¢ï¼Ÿ\n\nçˆ¶è¿›ç¨‹é€€å‡ºä¹‹åï¼Œå­è¿›ç¨‹å¹¶ä¸ä¼šä¸è§ï¼Œè€Œæ˜¯ä¼šè¢«1å·è¿›ç¨‹ï¼ˆæ“ä½œç³»ç»Ÿï¼‰é¢†å…»ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå­è¿›ç¨‹ç§°ä¸ºå­¤å„¿è¿›ç¨‹\n\næ³¨ï¼š1å·è¿›ç¨‹åˆç§°initè¿›ç¨‹\n\n\nè€Œæ“ä½œç³»ç»Ÿé¢†å…»ä¹‹åçš„å­è¿›ç¨‹ï¼Œå³ä¾¿ä½ ä½¿ç”¨ctrl+cä¹Ÿå¹²ä¸æ‰è¿™ä¸ªè¿›ç¨‹\n\nä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹åˆ°å­è¿›ç¨‹è¢«æ“ä½œç³»ç»Ÿé¢†å…»åï¼Œè¿è¡ŒçŠ¶æ€ä¸Šçš„+ä¸è§äº†\n PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  2842  2842 32080 pts/0     2842 S+    1001   0:00 ./test2 2842  2843  2842 32080 pts/0     2842 S+    1001   0:00 ./test2################################################################ PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND    1  2843  2842 32080 pts/0    32080 S     1001   0:00 ./test2\n\nå‰å°å’Œåå°è¿›ç¨‹çŠ¶æ€ç ä¸Šå¸¦æœ‰+å·ï¼Œä»£è¡¨è¿›ç¨‹æ˜¯ä¸€ä¸ªå‰å°è¿›ç¨‹\n\nèƒ½è¢«CTRL+Cç»ˆæ­¢çš„éƒ½æ˜¯å‰å°è¿›ç¨‹\nåå°è¿›ç¨‹ä¸€ç›´åœ¨è¿è¡Œï¼Œä¼šå½±å“æˆ‘ä»¬çš„å‘½ä»¤è¡Œè¾“å…¥\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨kill -9å¹²æ‰è¯¥è¿›ç¨‹ï¼Œå¹²æ‰è¿›ç¨‹ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨CTRL+Cæ¢å¤æ­£å¸¸çš„å‘½ä»¤è¡Œäº†\n\n3.5 å®ˆæŠ¤è¿›ç¨‹å’Œç²¾çµè¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹&amp;ç²¾çµè¿›ç¨‹ï¼šè¿™ä¸¤ç§æ˜¯åŒä¸€ç§è¿›ç¨‹çš„ä¸åŒç¿»è¯‘ï¼Œæ˜¯ç‰¹æ®Šçš„å­¤å„¿è¿›ç¨‹ï¼Œä¸ä½†è¿è¡Œåœ¨åå°ï¼Œæœ€ä¸»è¦çš„æ˜¯è„±ç¦»äº†ä¸ç»ˆç«¯å’Œç™»å½•ä¼šè¯çš„æ‰€æœ‰è”ç³»ï¼Œä¹Ÿå°±æ˜¯é»˜é»˜çš„è¿è¡Œåœ¨åå°ä¸æƒ³å—åˆ°ä»»ä½•å½±å“\n\n4.è¿›ç¨‹æš‚åœTæš‚åœä¸€å…±æœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§æ˜¯stoppedï¼Œç¬¬äºŒç§æ˜¯tarcing stop\n\nä¸€èˆ¬linuxç³»ç»Ÿæ˜¯ç”¨å¤§TæŒ‡ä»£stoppedï¼Œç”¨å°tæŒ‡ä»£tarcing stop\n4.1 T-stoppedkillå‘ä¿¡å·åœ¨ä¹‹å‰çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦è¿‡ä½¿ç”¨kill -9 pidæ¥å¹²æ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå®é™…ä¸Škillå‘½ä»¤èƒ½å¹²çš„äº‹æƒ…è¿œä¸æ­¢è¿™ä¸€ä¸ª\nkill -l\n\nä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°killå‘½ä»¤æ”¯æŒä»€ä¹ˆæ“ä½œ\n\nå…¶ä¸­æˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯ç¬¬19å’Œç¬¬18ï¼Œåˆ†åˆ«ç”¨äºæš‚åœ/æ¢å¤ä¸€ä¸ªè¿›ç¨‹\n#include &lt;stdio.h&gt;int main()&#123;    printf(&quot;start!\\n&quot;);    while(1)&#123;        ;    &#125;    return 0;&#125;\n\nå†™ä¸€ä¸ªå•¥äº‹ä¸å¹²çš„æ­»å¾ªç¯ç”¨äºæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹å¤„äºR+çŠ¶æ€\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ kill -19 9503\n\næ‰§è¡Œkill -19å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹è¢«ç»ˆæ­¢ï¼ŒçŠ¶æ€ç å˜ä¸ºå¤§T\n\nè¿›ç¨‹æš‚åœå¹¶ä¸ä»£è¡¨è¿›ç¨‹ç»“æŸï¼Œè¿™å°±å¥½æ¯”æˆ‘ä»¬çœ‹è§†é¢‘çš„æ—¶å€™æš‚åœä¸€æ ·ã€‚ä½ æš‚åœäº†æ’­æ”¾ï¼Œä½†æ˜¯æ’­æ”¾å™¨è¿™ä¸ªè¿›ç¨‹å¹¶ä¸ä¼šç›´æ¥ç»ˆæ­¢ï¼\nè¦æƒ³è®©è¿™ä¸ªè¿›ç¨‹é‡æ–°è¿è¡Œï¼Œæ‰§è¡Œkill -18å³å¯ï¼Œè¿›ç¨‹æ¢å¤ä¸ºRçŠ¶æ€ã€‚æ­¤æ—¶ä¹Ÿæ²¡æœ‰äº†+ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªåå°è¿›ç¨‹\n\n PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  9503  9503 32080 pts/0    32080 T     1001   0:55 ./test3######################## PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  9503  9503 32080 pts/0    32080 R     1001   0:55 ./test3\n\nä½¿ç”¨kill -9å¹²æ‰è¯¥åå°è¿›ç¨‹å³å¯\n4.2 t-tarcing stoptarcingä¸€è¯æ„ä¸ºè¿½è¸ªï¼Œæœ€ç®€å•çš„æƒ…å†µä¾¿æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„gdbè°ƒè¯•æ‰“æ–­ç‚¹\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test30493 12333 12333 30493 pts/1    12333 S+    1001   0:00 gdb test_g12333 12412 12412 30493 pts/1    12333 t     1001   0:00 /home/muxue/GIT/raspi/code/22-09-24_?ç¨‹/test_g\n\nè¿™æ—¶å€™test_gè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªå¤„äºå°tçŠ¶æ€çš„è¿›ç¨‹\n\n5. è¿›ç¨‹ä¼˜å…ˆçº§\næƒé™ï¼šèƒ½è¿˜æ˜¯ä¸èƒ½çš„é—®é¢˜ï¼Œå†³å®šè¿›ç¨‹èƒ½ä¸èƒ½è®¿é—®æŸç§ç‰¹å®šçš„èµ„æº\nä¼˜å…ˆçº§ï¼šè¿›ç¨‹å¯ä»¥è®¿é—®è¯¥èµ„æºï¼Œä½†æœ‰å…ˆåé¡ºåºï¼ˆè¿è¡Œé˜Ÿåˆ—ï¼‰\n\nè¿›ç¨‹åœ¨æ’é˜Ÿè·å–èµ„æºçš„æœ¬è´¨å°±æ˜¯åœ¨ç¡®è®¤ä¼˜å…ˆçº§ã€‚è¿™æ˜¯å› ä¸ºç³»ç»Ÿçš„æŸäº›æ…¢èµ„æºä¸å¤Ÿå¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦è®©è¿›ç¨‹è¿›å…¥æ’é˜Ÿæ¥å…ˆåè®¿é—®ã€‚\nè€Œä¼˜å…ˆçº§è¶Šé«˜çš„è¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿæ‰§è¡Œå®ƒçš„å“åº”å°±ä¼šæ›´å¿«ã€‚å…¶ä¼šæŠŠå®ƒæ’å…¥åˆ°ä¼˜å…ˆçº§ä½äºå®ƒçš„è¿›ç¨‹ä¹‹å‰ï¼Œå…ˆè¿è¡Œè¿™ä¸ªâ€œvipè¿›ç¨‹â€ï¼Œå†è¿è¡Œé‚£äº›â€œæ™®é€šè¿›ç¨‹â€\n5.1 linuxè¿›ç¨‹ä¼˜å…ˆçº§å¯ä»¥ç”¨ä¸‹é¢çš„ps -laå‘½ä»¤æŸ¥çœ‹å½“å‰bashä¸‹çš„è¿›ç¨‹\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps -lF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 27595 30493  0  80   0 - 38587 -      pts/1    00:00:00 ps0 S  1001 30493 30492  0  80   0 - 29576 do_wai pts/1    00:00:00 bash[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD1 S  1001 27546     1  0  80   0 -  1833 hrtime pts/0    00:00:00 test20 R  1001 27598 30493  0  80   0 - 38595 -      pts/1    00:00:00 ps\n\nå…¶ä¸­çš„PRIå’ŒNIå°±æ˜¯æˆ‘ä»¬è¿›ç¨‹ä¼˜å…ˆçº§çš„æ•°æ®\n\nlinuxçš„è¿›ç¨‹ä¼˜å…ˆçº§&#x3D;priority_old+nice\nlinuxä¸‹è¿›ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§æ˜¯80ï¼ŒPRIå€¼è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜\nNIå€¼æ˜¯è¿›ç¨‹ä¼˜å…ˆçº§çš„ä¿®æ­£æ•°æ®ï¼Œæˆ‘ä»¬ä¿®æ”¹è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œä¿®æ”¹çš„æ˜¯NIå€¼è€Œä¸æ˜¯PRI\n\nè¿™ä¸¤ä¸ªå€¼å…è®¸çš„èŒƒå›´å¦‚ä¸‹ï¼ŒLinuxç³»ç»Ÿå¹¶ä¸æ”¯æŒç”¨æˆ·æ— èŠ‚åˆ¶çš„ä¿®æ”¹ä¼˜å…ˆçº§\n-20 &lt;= NI &lt;= 1960 &lt;= PRI &lt;= 99\n\n5.2 ä½¿ç”¨topå‘½ä»¤è¿›è¡Œä¿®æ”¹ä¼˜å…ˆçº§linuxä¸‹ä¿®æ”¹ä¼˜å…ˆçº§çš„æ“ä½œå¦‚ä¸‹ï¼Œè¿è¡Œtest1ç¨‹åºåï¼Œå…ˆæŸ¥çœ‹å®ƒçš„ä¼˜å…ˆçº§ä¿¡æ¯\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 29632 30493 98  80   0 -  1833 -      pts/1    00:00:42 test11 Z  1001 29633 29632  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;0 R  1001 30732 29713  0  80   0 - 38595 -      pts/0    00:00:00 ps\n\nåœ¨ä½¿ç”¨sudo topåï¼Œè¿›å…¥ç•Œé¢æŒ‰rï¼Œè¾“å…¥éœ€è¦è®¾ç½®çš„è¿›ç¨‹pidåï¼Œå†è¾“å…¥éœ€è¦è°ƒæ•´çš„niceå€¼\n\n\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 29632 30493 99  70 -10 -  1833 -      pts/1    00:02:41 test11 Z  1001 29633 29632  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œtest1è¿›ç¨‹çš„ä¼˜å…ˆçº§å·²ç»è¢«æˆ‘ä»¬æ”¹æˆäº†70\nå†æ¥å°è¯•ç¬¬äºŒæ¬¡ï¼Œè¿™æ¬¡niceè®¾ç½®ä¸º20çœ‹çœ‹\n\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 30697 30493 98  99  19 -  1833 -      pts/1    00:00:16 test11 Z  1001 30698 30697  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;\n\nè¯¶ï¼Œpidè®¾ç½®æˆ20ä¹‹åï¼Œä¸ºå•¥NIå€¼å˜æˆäº†19ï¼Œè€ŒPRIå˜æˆäº†99å‘¢ï¼Ÿ\n\nä¾æ®æˆ‘ä»¬ä»¥å¾€çš„æƒ¯æ€§æ€ç»´ï¼Œæ—¢ç„¶è¿›ç¨‹ä¼˜å…ˆçº§&#x3D;priority_old+niceï¼Œé‚£ä¹ˆä¿®æ”¹äº†ä¹‹åä¸åº”è¯¥æ˜¯åŸæœ¬çš„70+20&#x3D;90å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯99å‘¢ï¼Ÿ\n\nè¿™æ˜¯å› ä¸ºæ¯ä¸€æ¬¡è®¾ç½®çš„æ—¶å€™ï¼Œpriority_oldéƒ½ä¼šè¢«é‡ç½®æˆ80ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥è®°ä½ï¼ŒLinuxä¸‹è¿›ç¨‹çš„ä¼˜å…ˆçº§&#x3D;80+Niå€¼\nThe Endæ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœæœ¬ç¯‡åšå®¢æœ‰å•¥é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["ç©ä¸ŠLinux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Pythonã€‘è§£å†³SSL certificate problem unable to get local issuer certificate","url":"/2023/02/24/note_Python/10ssl%E6%8A%A5%E9%94%99%E8%AF%81%E4%B9%A6%E9%94%99%E8%AF%AF%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/","content":"CentOS8 å‡ºç° SSL certificate problem: unable to get local issuer certificate è§£å†³åŠæ³•\n\n\n1.é”™è¯¯æ¥æºæˆ‘åœ¨ä¸€ä¸ªdockerå®‰è£…çš„Centos8.5ç³»ç»Ÿä¸­å¯åŠ¨æˆ‘è‡ªå·±å†™çš„kookæœºå™¨äººæ—¶ï¼Œé‡åˆ°äº†ä¸‹é¢çš„bug\n\nå…¶å¤§æ¦‚æ„æ€æ˜¯æ²¡æœ‰åŠæ³•è·å–åˆ°æœ¬åœ°çš„issuer certificateã€‚å¦‚æœä½ çŸ¥é“è¯ä¹¦å’ŒCAçš„å«ä¹‰ï¼Œé‚£ä¹ˆå¤§æ¦‚èƒ½çŒœåˆ°è¿™ä¸ªæŠ¥é”™æ˜¯ä»€ä¹ˆæ„æ€ã€‚\n\næ‰€æœ‰ç«™ç‚¹çš„sslè¯ä¹¦ï¼Œéƒ½éœ€è¦ç»è¿‡CAæœºæ„çš„è®¤è¯å’Œé¢å‘ã€‚æ“ä½œç³»ç»Ÿä¼šé»˜è®¤å†…åµŒå·²æœ‰CAæœºæ„çš„å…¬é’¥ï¼Œä»¥ç”¨äºè§£å¯†CAé¢å‘çš„è¯ä¹¦ä¸­çš„æ•°å­—ç­¾åã€‚\n\nå› ä¸ºCAæœºæ„æ˜¯å†…åµŒåœ¨æ“ä½œç³»ç»Ÿæœ¬åœ°çš„ï¼Œå¦‚æœä¸€ä¸ªè¯ä¹¦çš„é¢å‘æœºæ„ä¸åœ¨æœ¬åœ°å·²æœ‰CAä¸­ï¼Œè¯¥ç«™ç‚¹å°±ä¼šè¢«æŠ¥ä¸å®‰å…¨ã€‚\nè€Œæ— æ³•è·å–æœ¬åœ°issuer certificateï¼Œæˆ‘çŒœæµ‹æ„æ€å°±æ˜¯æ²¡æœ‰åŠæ³•è·å–é“æ“ä½œç³»ç»Ÿå†…åµŒçš„CA\n2.è§£å†³åˆšå¼€å§‹æˆ‘å°è¯•è¿‡é€šè¿‡pythonçš„sslæ¨¡ç»„å–æ¶ˆè¯ä¹¦éªŒè¯ã€æ›´æ–°æœ¬åœ°è¯ä¹¦å’Œopensslï¼Œéƒ½æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nåœ¨Kookå¹³å°khl.pyæœåŠ¡å™¨çš„å¤§ä½¬å¸®åŠ©ä¸‹ï¼Œæœ€ç»ˆå®šä½å¹¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n2.1 æ›´æ–°æœ¬åœ°caåŒ…å…ˆ yum install ca-certificatesï¼Œå·²ç»è£…è¿‡çš„è¯é‚£å°±æ˜¯ yum update ca-certificates å¦‚æœä¸è¡Œå† pip3 install certifi\næ“ä½œå®Œæ¯•ä¸Šé¢çš„æ­¥éª¤ï¼Œå‘ç°æœ¬åœ°å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„ca-certificatesï¼Œpythonä¹Ÿæœ‰å®‰è£…certifiåŒ…\n$ yum update ca-certificatesRepository extras is listed more than once in the configurationWarning: failed loading &#x27;/etc/yum.repos.d/epel.repo&#x27;, skipping.Last metadata expiration check: 8:42:37 ago on Thu 23 Feb 2023 03:09:14 PM UTC.Dependencies resolved.Nothing to do.Complete!$ pip3.10 install  certifiDefaulting to user installation because normal site-packages is not writeableRequirement already satisfied: certifi in ./.local/lib/python3.10/site-packages (2022.12.7)$ pip3.10 install  certifi -UDefaulting to user installation because normal site-packages is not writeableRequirement already satisfied: certifi in ./.local/lib/python3.10/site-packages (2022.12.7)\n\n2.2 æŸ¥çœ‹æœ¬åœ°ä¸»æœºçš„é“¾æ¥äºæ˜¯å°è¯•ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹ä¸»æœºæ˜¯å¦èƒ½æˆåŠŸè¿æ¥åˆ°kaiheila.cn(kookapp.cn) å¹¶è®¤è¯sslè¯ä¹¦\nopenssl s_client -connect www.kookapp.cn:443 -showcerts\n\nè¾“å‡ºäº†å¦‚ä¸‹çš„ä¿¡æ¯\ndepth=2 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Global Root CAverify return:1depth=1 C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1verify return:1depth=0 CN = *.kookapp.cnverify return:1CONNECTED(00000003)---Certificate chain 0 s:CN = *.kookapp.cn   i:C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1-----BEGIN CERTIFICATE-----MIIHkTCCBXmgAwIBAgIQCUlurlf6m1VXsuISNqlT8DANBgkqhkiG9w0BAQsFADBcMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xNDAyBgNVBAMTK1JhcGlkU1NMIEdsb2JhbCBUTFMgUlNBNDA5NiBTSEEyNTYgMjAyMiBDQTEwHhcNMjIwNjE1MDAwMDAwWhcNMjMwNjE1MjM1OTU5WjAXMRUwEwYDVQQDDAwqLmtvb2thcHAuY24wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDB1uHkQ/oEkGNloVa6wHz424VznxL+eUt6AAfNhtIXeone8rtnJqeoDJ24lmBYUrL00tChCp4rdTddcrqPppDYSEY7+/U0hf39pDrmsGKZeeOu7JvANjtvqLFdXsqe5CnXtxAo5QUXB9gckttoLTZZX5O1Gyi6mqDtsFCTaVpsQmZWVcbA21zLAdAZJyUyzM2VyfCUPQHs+VFErcmA9SN8nkppLyf00lIHCWR6v9HYC2XgjHN2JX8ARJwTEddhHjvleMc/SlHncU6fpZ8itWx8NzBL6MwPKEjmHgKp0VYBMY6PHrSR/j/XtgOweodp1JBIr6yLLlyCu/lJksCwMUIZAgMBAAGjggOSMIIDjjAfBgNVHSMEGDAWgBTwnIX9op99j8lou9XUiU0dvtOQ/zAdBgNVHQ4EFgQUYe6lb4/s4J82aqWfNDaev2MD8k4wIwYDVR0RBBwwGoIMKi5rb29rYXBwLmNuggprb29rYXBwLmNuMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwgZ8GA1UdHwSBlzCBlDBIoEagRIZCaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL1JhcGlkU1NMR2xvYmFsVExTUlNBNDA5NlNIQTI1NjIwMjJDQTEuY3JsMEigRqBEhkJodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vUmFwaWRTU0xHbG9iYWxUTFNSU0E0MDk2U0hBMjU2MjAyMkNBMS5jcmwwPgYDVR0gBDcwNTAzBgZngQwBAgEwKTAnBggrBgEFBQcCARYbaHR0cDovL3d3dy5kaWdpY2VydC5jb20vQ1BTMIGHBggrBgEFBQcBAQR7MHkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBRBggrBgEFBQcwAoZFaHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL1JhcGlkU1NMR2xvYmFsVExTUlNBNDA5NlNIQTI1NjIwMjJDQTEuY3J0MAkGA1UdEwQCMAAwggF/BgorBgEEAdZ5AgQCBIIBbwSCAWsBaQB3AOg+0No+9QY1MudXKLyJa8kD08vREWvs62nhd31tBr1uAAABgWbUskcAAAQDAEgwRgIhAL1qZKig2NqYtlAVnaXtJ7Tk+OuROrPHGR8t2zyNTb6xAiEAsLL5yuvJ/WtIj0bLwbKR0/nFe/Juub3aZjrNvUhzZIIAdQA1zxkbv7FsV78PrUxtQsu7ticgJlHqP+Eq76gDwzvWTAAAAYFm1LJ6AAAEAwBGMEQCIDK3qkxuTUB1Dngycy9/LECyVXjlpi2eJBAC6oZPJQ/VAiBs1iupiYwavmD2m6QrDzzZrW2MJWx4LMxCtvf6pmN3NwB3ALc++yTfnE26dfI5xbpY9Gxd/ELPep81xJ4dCYEl7bSZAAABgWbUsnkAAAQDAEgwRgIhAL5vfkeeQAwowpkUhf0U/Z2fFiL8IY+QsCyED40zw0d1AiEA02UjHM3tztsrMn2xyzmTkVgXnly/OozP+LjdwdsTa6gwDQYJKoZIhvcNAQELBQADggIBAGdBom7y2NXOZL7KxtZFBFQCBJrEQOHZvuN4Etkmotb+0aVnrEZ/Qc5+zl86YqURcmOZgPhzSjuVfTvUsJJ1TkC/tMYofoo1Db7B5yRxQmjEYRNLFAZ8rbP/pd5Js8ZGWW7RcxqG+zebqDDD2CWvpiJNStu/yjWwdsFXQUwU0XOGUfwJDHD0eSBaa3uclAn3kUqF82l2X9qzvy9EexGjPOSWyNuksjeScr32OyNUrwo7RUYJU4Ztl8xaiaxcvg7u2/o9WWzPhHMVI6ijrJbj6Wn+BMe3SMYcR/L+foItjWAuOqOVB7IKO32JgCkP1vyl8AWs0up8ddI/9jn3px8ii0HphKJnkCPZNmLnnOhFXQjoPy2PRmKqusP0kleJw1ZpQXsQpm3yZqFggyFH8S4ii83kkHBynC89dlwlBIkF29Ds4mYjau6mZZxE69By7ptvFvcYREYslaRMxd166PEf5mp5jBKSiI2iYcP8PQOudhObpkuw+KHz8ntkf++HeluuEiqsKyiyyiXm5dmRE/9uIUjPcQia5ohs2VpAgOLhLG6yphWCHQ6awFj9q3Ce1Mm5yXyZFvLXWGwoJj6jCVXAZDchwX4uiHW2fI3GHz1pTPg0L3NE/M2CHnQWJlh9cgOljmaZXCeKmLdA9phD+NQho5xVElRiF+rijlrkMutS7p1Y-----END CERTIFICATE----- 1 s:C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1   i:C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Global Root CA-----BEGIN CERTIFICATE-----MIIFyzCCBLOgAwIBAgIQCgWbJfVLPYeUzGYxR3U4ozANBgkqhkiG9w0BAQsFADBhMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBDQTAeFw0yMjA1MDQwMDAwMDBaFw0zMTExMDkyMzU5NTlaMFwxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE0MDIGA1UEAxMrUmFwaWRTU0wgR2xvYmFsIFRMUyBSU0E0MDk2IFNIQTI1NiAyMDIyIENBMTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAKY5PJhwCX2UyBb1nelu9APen53D5+C40T+BOZfSFaB0v0WJM3BGMsuiHZX2IHtwnjUhLL25d8tgLASaUNHCBNKKUlUGRXGztuDIeXb48d64k7Gk7u7mMRSrj+yuLSWOKnK6OGKe9+s6oaVIjHXY+QX8p2I2S3uew0bW3BFpkeArLBCU25iqeaoLEOGIa09DVojd3qc/RKqr4P11173R+7Ub05YYhuIcSv8e0d7qN1sO1+lfoNMVfV9WcqPABmOasNJ+ol0hAC2PTgRLy/VZo1L0HRMr6j8cbR7q0nKwdbn4Ar+ZMgCgCcG9zCMFsuXYl/rqobiyV+8U37dDScAebZTIF/xPEvHcmGi3xxH6g+dTCjetOjJx8sdXUHKXGXC9ka33q7EzQIYlZISF7EkbT5dZHsO2DOMVLBdP1N1oUp0/1f6fc8uTDduELoKBRzTTZ6OOBVHeZyFZMMdi6tA5s/jxmb74lqH1+jQ6nTU2/MmahGNxUuJpyhUHezgBA6sto5lNeyqc+3Cr5ehFQzUuwNsJaWbDdQk1v7lqRaqOlYjniomOl36J5txTs0wL7etCeMRfyPsmc+8HmH77IYVMUOcPJb+0gNuSmAkvf5QXbgPIZursn/UYnP9obhNbHc/9LYdQkB7CXyX9mPexnDNO7pggNA2jpbEarLmZGi4grMmfAgMBAAGjggGCMIIBfjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQWBBTwnIX9op99j8lou9XUiU0dvtOQ/zAfBgNVHSMEGDAWgBQD3lA1VtFMu2bwo+IbG8OXsj3RVTAOBgNVHQ8BAf8EBAMCAYYwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMHYGCCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRHbG9iYWxSb290Q0EuY3J0MEIGA1UdHwQ7MDkwN6A1oDOGMWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RDQS5jcmwwPQYDVR0gBDYwNDALBglghkgBhv1sAgEwBwYFZ4EMAQEwCAYGZ4EMAQIBMAgGBmeBDAECAjAIBgZngQwBAgMwDQYJKoZIhvcNAQELBQADggEBAAfjh/s1f5dDdfm0sNm74/dWMbbsxfYV1LoTpFt+3MSUWvSbiPQfUkoV57b5rutRJvnPP9mSlpFwcZ3e1nSUbi2oITGA7RCOj23I1F4zk0YJm42qAwJIqOVenR3XtyQ2VR82qhC6xslxtNf7f2Ndx2G7Mem4wpFhyPDT2P6UJ2MnrD+FC//ZKH5/ERo96ghz8VqNlmL5RXo8Ks9rMr/Ad9xwY4hyRvAz5920myUffwdUqc0SvPlFnahsZg15uT5HkK48tHR0TLuLH8aRpzh4KJ/Yp0sARNb+9i1R4Fg5zPNvHs2BbIve0vkwxAy+R4727qYzl3027w9jEFC6HMXRaDc=-----END CERTIFICATE--------Server certificatesubject=CN = *.kookapp.cnissuer=C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1---No client certificate CA names sentPeer signing digest: SHA256Peer signature type: RSA-PSSServer Temp Key: X25519, 253 bits---SSL handshake has read 3993 bytes and written 392 bytesVerification: OK---New, TLSv1.3, Cipher is TLS_AES_256_GCM_SHA384Server public key is 2048 bitSecure Renegotiation IS NOT supportedCompression: NONEExpansion: NONENo ALPN negotiatedEarly data was not sentVerify return code: 0 (ok)---\n\nåœ¨è¿™é‡Œé¢èƒ½çœ‹åˆ°å¦‚ä¸‹å†…å®¹\nSSL handshake has read 3993 bytes and written 392 bytesVerification: OK\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„æœ¬åœ°ä¸»æœºæ˜¯èƒ½æˆåŠŸè®¤è¯kookapp.cnçš„sslè¯ä¹¦çš„ï¼Œé‚£ä¹ˆé—®é¢˜å°±å‡ºç°åœ¨pythonçš„sslæ¨¡å—ä¸­äº†ï¼\n2.3 æ£€æµ‹pythonçš„sslæ¨¡å—pythonå¼€å¯ä¸€ä¸ªREPLï¼Œè¾“å…¥å¦‚ä¸‹çš„ä¸¤è¡Œä»£ç \nimport sslssl.create_default_context().cert_store_stats()\n\nè¾“å‡ºçš„å†…å®¹å¦‚ä¸‹\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.create_default_context().cert_store_stats()&#123;&#x27;x509&#x27;: 0, &#x27;crl&#x27;: 0, &#x27;x509_ca&#x27;: 0&#125;\n\nè¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥é—®é¢˜äº†ï¼Œå…¨éƒ½æ˜¯0ï¼éš¾æ€ªè¯´æ²¡æœ‰åŠæ³•è·å–æœ¬åœ°çš„CA\nä½œä¸ºå¯¹æ¯”ï¼Œä¸€å°æ­£å¸¸çš„windows11ç”µè„‘è¾“å‡ºå¦‚ä¸‹\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.create_default_context().cert_store_stats()&#123;&#x27;x509&#x27;: 87, &#x27;crl&#x27;: 0, &#x27;x509_ca&#x27;: 84&#125;\n\n2.4 è§£å†³é”™è¯¯æ‰¾åˆ°äº†é”™è¯¯ï¼Œé‚£å°±å¾—æƒ³åŠæ³•è§£å†³ï¼\npythonå¼€å¯ä¸€ä¸ªREPLï¼Œè¾“å…¥å¦‚ä¸‹çš„ä¸¤è¡Œä»£ç \nimport sslssl.get_default_verify_paths()\n\nè¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼Œè¿™æ˜¯æœ¬åœ°pythonæŸ¥æ‰¾caè¯ä¹¦çš„ä½ç½®\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.get_default_verify_paths()DefaultVerifyPaths(cafile=None, capath=&#x27;/usr/local/openssl-1.1.1/ssl/certs&#x27;, openssl_cafile_env=&#x27;SSL_CERT_FILE&#x27;, openssl_cafile=&#x27;/usr/local/openssl-1.1.1/ssl/cert.pem&#x27;, openssl_capath_env=&#x27;SSL_CERT_DIR&#x27;, openssl_capath=&#x27;/usr/local/openssl-1.1.1/ssl/certs&#x27;)\n\nå…¶ä¸­/usr/local/openssl-1.1.1/ssl/cert.pemä¸­åº”è¯¥ä¼šä¿å­˜CAçš„ä¿¡æ¯\næŸ¥çœ‹æœ¬åœ°çš„è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹\nls /usr/local/openssl-1.1.1/ssl/cert.pem\n\nå¥½å®¶ä¼™ï¼Œå‘ç°æ–‡ä»¶å‹æ ¹ä¸å­˜åœ¨ï¼\nls: cannot access &#x27;/usr/local/openssl-1.1.1/ssl/cert.pem&#x27;: No such file or directory\n\nçœ‹çœ‹opensslçš„ç‰ˆæœ¬å’Œè·¯å¾„\nopenssl  version -d\n\nè¾“å‡ºå¦‚ä¸‹\nOPENSSLDIR: &quot;/etc/pki/tls&quot;\n\näºæ˜¯çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„cert.pem\n$ ls /etc/pki/tlscert.pem  certs  ct_log_list.cnf  misc  openssl.cnf  private\n\næœ‰ï¼é‚£ä¹ˆæ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼Œå°†å…¶å¼„åˆ°&#x2F;usr&#x2F;localä¸­ï¼\nln -s /etc/pki/tls/cert.pem /usr/local/openssl-1.1.1/ssl/cert.pem\n\n3.å®Œç¾ï¼åšå®Œè¿™ä¸€åˆ‡åï¼Œå†æ¬¡è¿è¡Œæœºå™¨äººï¼Œè¿™æ¬¡ä¹ˆæœ‰æŠ¥é”™äº†ï¼\n$ py3 main.py[FileManage] load all files[BOT] Start at: [23-02-24 00:25:29][BOT.TASK] fetch_public_channel success\n\nä¹ŸæˆåŠŸå“åº”äº†å‘½ä»¤ï¼\n\nä¼¼ä¹è¿™ä¸ªé—®é¢˜åœ¨macä¸‹æ›´å¸¸è§ï¼Ÿç”±äºæ²¡æœ‰ä½¿ç”¨è¿‡macï¼Œæœ¬æ–‡ä¸è§£é‡Šç›¸å…³å†…å®¹\n\n\n","categories":["é€Ÿé€šPython"],"tags":["CentOS","Python"]},{"title":"ã€Pythonã€‘åŠ¨æ‰‹å†™ä¸€ä¸ªgitè‡ªåŠ¨ä¸Šä¼ è„šæœ¬ï¼","url":"/2022/09/02/note_Python/1git%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0%E8%84%9A%E6%9C%AC/","content":"æœ¬ç¯‡åšå®¢æ¥æ•™ä½ ç”¨Pythonå†™ä¸€ä¸ªç®€å•çš„gitè‡ªåŠ¨ä¸Šä¼ è„šæœ¬\n\n\nå‰è¨€ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿ï¼Ÿ\næœ‰çš„æ—¶å€™ï¼Œæˆ‘çš„å­¦ä¹ ä»£ç å…¶å®æ²¡å•¥å¥½commitçš„ï¼Œå†™ä¸€ä¸ªè‡ªåŠ¨ä¸Šä¼ çš„è„šæœ¬ï¼Œå°±å¯ä»¥è‡ªåŠ¨æ‰§è¡Œå®Œæ‰€æœ‰çš„å‘½ä»¤ï¼Œè€Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨è¿›è¡Œgitä¸‰æ¿æ–§æ“ä½œ\n\né¡¹ç›®ä»£ç å·²å¼€æº  https://gitee.com/musnow/learn_python_code/tree/master/code/22-09-02%20auto_git\n\næ•ˆæœå¦‚ä¸‹æŠŠEXEæ–‡ä»¶ä¸¢è¿›ä½ çš„gitä»“åº“è·¯å¾„ï¼Œç‚¹ä¸€ä¸‹å°±ä¼šè‡ªåŠ¨æ‰§è¡Œå‘½ä»¤\n\n\næ‰“å¼€ä½ çš„ä»“åº“å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸä¸Šä¼ äº†\n\næºç å®ç°å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨OSå¾€ç³»ç»Ÿçš„å‘½ä»¤è¡Œé‡Œé¢å†™å‘½ä»¤è€Œå·²\nimport osimport timedef GetTime(): #è·å–å½“å‰æ—¶é—´    return time.strftime(&quot;%y-%m-%d %H:%M:%S&quot;, time.localtime())#ä¿®æ”¹é»˜è®¤çš„æäº¤ä¿¡æ¯commit_msg=f&quot; \\&quot;Code updated: &#123;GetTime()&#125;\\&quot; &quot;#gitæäº¤å‘½ä»¤cmd_1 = &quot;git status&quot;cmd_2 = &quot;git add --all&quot;cmd_3 = &quot;git commit -m&quot;+commit_msgcmd_4 = &quot;git push&quot;print(&quot;[å¼€å§‹] æ‰§è¡Œgitè‡ªåŠ¨ä¸Šä¼ &quot;)print(&#x27;[CMD]&#x27;,cmd_1)os.system(cmd_1)#æ˜¾ç¤ºå½“å‰åŠ¨æ€print(&#x27;[CMD]&#x27;,cmd_2)os.system(cmd_2)#æ·»åŠ æ‰€æœ‰æ–‡ä»¶æ›´æ”¹åˆ°å·¥ä½œåŒºprint(&#x27;[CMD]&#x27;,cmd_3)os.system(cmd_3)#è‡ªåŠ¨commitprint(&#x27;[CMD]&#x27;,cmd_4)os.system(cmd_4)#pushä¸Šä¼ print(&quot;[ç»“æŸ] å®Œæˆgitè‡ªåŠ¨ä¸Šä¼ &quot;)print(&quot;çª—å£å°†åœ¨5såå…³é—­...&quot;)time.sleep(5)#ä¼‘çœ 5ç§’å¯ä»¥çœ‹æ¸…æ¥šç»“æœ\n\nè¿™é‡Œçš„commitä¿¡æ¯éå¸¸ç²—æš´ï¼Œå°±æ˜¯å½“å‰çš„æ—¶é—´ã€‚æ‰€ä»¥å¦‚æœä½ æ˜¯åœ¨å†™é¡¹ç›®ï¼Œé‚£è‚¯å®šè¿˜æ˜¯å¥½å¥½å†™commitä¿¡æ¯çš„å¥½ã€‚ä¸ç„¶åˆ°æ—¶å€™æƒ³å›é€€ç‰ˆæœ¬éƒ½ä¸çŸ¥é“å¾€å“ªå„¿å›é€€ğŸ˜‚\nåˆ©ç”¨pyinstalleræ‰“åŒ…æˆexeåœ¨windowså‘½ä»¤è¡Œä¸­ï¼Œå®‰è£…pyinstalleråŒ…\npip install pyinstaller\n\nå®‰è£…å®Œæˆä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥pyinstallerï¼Œå¤§æ¦‚ç‡ä¼šæŠ¥é”™\nPS D:\\MyCode\\Python\\code\\22-09-02 auto_git&gt; pyinstallerpyinstaller : æ— æ³•å°†â€œpyinstallerâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚è¯·æ£€æŸ¥åç§°çš„æ‹¼å†™ï¼Œå¦‚æœåŒ…æ‹¬è·¯å¾„ï¼Œè¯·ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 1+ pyinstaller+ ~~~~~~~~~~~    + CategoryInfo          : ObjectNotFound: (pyinstaller:String) [], CommandNotFoundException    + FullyQualifiedErrorId : CommandNotFoundException\n\nè¿™æ—¶å€™å¦‚æœä½ å»æœæ•™ç¨‹ï¼Œä»€ä¹ˆæ·»åŠ ç¯å¢ƒå˜é‡å•Šå·´æ‹‰å·´æ‹‰çš„ï¼Œå¾ˆéº»çƒ¦ï¼Œè€Œä¸”è¿˜ä¸ä¸€å®šæœ‰ç”¨\n\nåœ¨æˆ‘çš„win11ä¸Šï¼Œæ·»åŠ ç¯å¢ƒå˜é‡å°±æ˜¯æ— æ•ˆçš„\n\nè¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°pythonçš„å®‰è£…è·¯å¾„ï¼Œå’Œé‡Œé¢å­˜æ”¾pipåŒ…çš„è·¯å¾„\nåœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œå­˜æ”¾è·¯å¾„å¦‚ä¸‹ã€‚å¦‚æœä½ æ‰¾ä¸åˆ°ï¼Œå¯ä»¥ç›´æ¥å…¨ç›˜æœç´¢pyinstaller.exe\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤äº†\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe -F æ–‡ä»¶å.py\n\néšåpyinstallerå°±ä¼šå¼€å§‹æ‰“åŒ…ï¼Œå¹¶åœ¨å½“å‰è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªbuildå’Œdistæ–‡ä»¶å¤¹ã€‚å…¶ä¸­distæ–‡ä»¶å¤¹é‡Œé¢å°±å­˜æ”¾äº†æˆ‘ä»¬çš„exeæ–‡ä»¶\n\nåˆ©ç”¨ResourceHackerä¿®æ”¹exeæ–‡ä»¶çš„iconå®é™…ä¸Šï¼Œpyinstalleræ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹exeæ–‡ä»¶çš„iconçš„ï¼Œå‘½ä»¤å¦‚ä¸‹\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe -F -w -i å›¾æ ‡.ico æ–‡ä»¶å.py\n\nåœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œå›¾æ ‡çš„ç¡®ä¿®æ”¹æˆåŠŸäº†ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå¤šæ¬¡å¼¹å‡ºå¾ˆå¤šä¸ªå‘½ä»¤è¡Œï¼Œéå¸¸ä¸é›…è§‚ï¼\næ‰€ä»¥æˆ‘å°±ä¸ç”¨pyinstalleræ¥ç”Ÿæˆå›¾æ ‡ï¼Œè€Œæ˜¯é‡‡ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ResourceHackerï¼ˆå®‰è£…åŒ…è‡ªè¡Œç™¾åº¦ï¼‰\n\nç‚¹å‡»å›¾æ ‡ç»„é‡Œé¢çš„å›¾æ ‡\n\nå³é”®è¿™ä¸ª0:0ï¼Œé€‰æ‹©â€œæ›¿æ¢å›¾æ ‡â€ï¼Œæ‰¾åˆ°ä½ æƒ³è¦çš„å›¾æ ‡è¿›è¡Œæ›¿æ¢å³å¯\nå›¾æ ‡åªæ”¯æŒ.icoæ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªç½‘ç«™è¿›è¡Œjpgè½¬ico\n\nhttp://www.ico51.cn/\n\nä¿®æ”¹å¥½åï¼Œéœ€è¦ç‚¹ç»¿è‰²çš„ä¿å­˜æŒ‰é’®ã€‚ç„¶åå°±ä¿®æ”¹æˆåŠŸäº†\n\n\nå¦‚æœä½ å‘ç°æ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œå¯èƒ½æ˜¯å› ä¸ºwindowsç¼“å­˜çš„é—®é¢˜ï¼Œé‡å¯ç”µè„‘å³å¯ï¼\nç„¶åä½ å°±å¯ä»¥æŠŠè¿™ä¸ªexeä¸¢åˆ°ä»»ä½•ä½ æƒ³è®¿åˆ°çš„gitä»“åº“è·¯å¾„ä¸‹ï¼Œè‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶å•¦ï¼\n","categories":["é€Ÿé€šPython"],"tags":["git","Python"]},{"title":"ã€Pythonã€‘request.sessionçš„cookieå¦‚ä½•å¯¼å…¥aiohttp._cookie_jar","url":"/2023/01/15/note_Python/4request%20session%E7%9A%84cookie%E5%A6%82%E4%BD%95%E5%AF%BC%E5%85%A5%E5%88%B0aiohttp/","content":"request.sessionçš„cookieå¯¼å…¥aiohttp._cookie_jarçš„æ•™ç¨‹\n\n\n1.èµ·å› æˆ‘çš„ kook-valorant-bot ä½¿ç”¨äº†ä¸¤ä¸ªå¼€æºåº“ï¼Œç”¨äºriotè´¦æˆ·çš„ç™»å½•å¹¶è·å–token\n\nå…¶ä¸­æœ€ä¸»è¦ç”¨çš„æ˜¯åŸºäºaiohttpçš„floxay&#x2F;python-riot-authï¼Œä½†è¿™ä¸ªä»“åº“ä¸æ”¯æŒ2faç”¨æˆ·ï¼ˆå¼€å¯äº†é‚®ç®±åŒé‡éªŒè¯çš„ç”¨æˆ·ï¼‰ä½œè€…å»å¹´å°±è¯´ä¼šå†™ä¸Šï¼Œä½†æ˜¯ä»–æ¯”è¾ƒå¿™æ²¡æœ‰æ’æœŸï¼›\näºæ˜¯æˆ‘åˆå»æ‰¾äº†ä¸€ä¸ªå¦å¤–ä¸€ä¸ªåŸºäºrequestçš„Prodzify&#x2F;Riot-auth æ”¯æŒ2faç™»å½•çš„ï¼ŒåŠæœˆå‰å·²ç»ç»™botåŠ ä¸Šäº†è¿™ä¸ªç¼ºå¤±åŠå¹´çš„åŠŸèƒ½ã€‚\n\nå¯æ˜¯ Prodzify&#x2F;Riot-auth æ²¡æœ‰å†™cookieç™»å½•æ–¹æ³•ï¼Œå…¶æ¯æ¬¡ç™»å½•éƒ½éœ€è¦è´¦æˆ·å¯†ç ï¼Œ2faç”¨æˆ·æ¯æ¬¡éƒ½éœ€è¦æä¾›é‚®ç®±éªŒè¯ç ï¼›å¯¹äºä¸€ä¸ªbotæ¥è¯´ï¼Œæ¯æ¬¡æ“ä½œè¿™ä¹ˆéº»çƒ¦ï¼Œå¾ˆæ˜¯éš¾å—ï¼\néšåï¼Œæˆ‘å»è¯¢é—®äº†å†™discord valorant botçš„ä½œè€…ï¼Œå¾—çŸ¥å¦‚æœ2faç”¨æˆ·ä½¿ç”¨cookieç™»å½•ï¼Œå…¶æ˜¯ä¸éœ€è¦æä¾›é‚®ç®±éªŒè¯ç çš„ï¼\né‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†ï¼Œå¦‚ä½•å°† requestçš„cookieå¯¼å…¥åˆ°aiohttpçš„_cookie_jarä¸­ï¼Œç„¶åè°ƒç”¨floxay&#x2F;python-riot-authå·²ç»å†™å¥½çš„cookieç™»å½•æ–¹æ³•å‘¢ï¼Ÿ\n\n1.1 å‰ç½®å£°æ˜è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘å†™botå…¨éƒ½æ˜¯çœ‹khl.pyçš„exampleè‡ªå­¦çš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘æ²¡æœ‰ç³»ç»Ÿæ€§çš„å­¦ä¹ è¿‡pythonè¯­æ³•ï¼Œå…³äºpyç±»å’Œå¯¹è±¡çš„çŸ¥è¯†å…¨éƒ½å¾—é C++çš„å­˜è´§æ¥æ—æ•²ä¾§å‡»ï¼›æ‰€ä»¥å¦‚æœæˆ‘çš„pythonåšå®¢ä¸­å‡ºç°é”™è¯¯ï¼Œé‚£æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œè¿˜è¯·æŒ‡æ­£ï¼\n\n2.æŸ¥æ‰¾åŠæ³•ä¸å¤šæ¯”æ¯”åœ¨äº’è”ç½‘ä¸Šå¤§æµ·æé’ˆçš„å›°éš¾äº†ï¼Œæˆ‘è¿˜æ˜¯ä¸œå¹³è¥¿å‡‘æ‰æ‰¾åˆ°äº†ä¸€ä¸ªåŠæ³•\n\nPython CookieJar.update_cookiesæ–¹æ³•ä»£ç¢¼ç¤ºä¾‹\n\nè¯¥æ•™ç¨‹æåˆ°äº†ä¸‹é¢çš„åŠæ³•æ¥å¯¼å…¥cookie\n# éœ€è¦å°å…¥æ¨¡å¡Š: from aiohttp import CookieJar [as åˆ¥å]# æˆ–è€…: from aiohttp.CookieJar import update_cookies [as åˆ¥å]def test_domain_filter_ip_cookie_send(loop) -&gt; None:    jar = CookieJar(loop=loop)    cookies = SimpleCookie(        &quot;shared-cookie=first; &quot;        &quot;domain-cookie=second; Domain=example.com; &quot;        &quot;subdomain1-cookie=third; Domain=test1.example.com; &quot;        &quot;subdomain2-cookie=fourth; Domain=test2.example.com; &quot;        &quot;dotted-domain-cookie=fifth; Domain=.example.com; &quot;        &quot;different-domain-cookie=sixth; Domain=different.org; &quot;        &quot;secure-cookie=seventh; Domain=secure.com; Secure; &quot;        &quot;no-path-cookie=eighth; Domain=pathtest.com; &quot;        &quot;path1-cookie=nineth; Domain=pathtest.com; Path=/; &quot;        &quot;path2-cookie=tenth; Domain=pathtest.com; Path=/one; &quot;        &quot;path3-cookie=eleventh; Domain=pathtest.com; Path=/one/two; &quot;        &quot;path4-cookie=twelfth; Domain=pathtest.com; Path=/one/two/; &quot;        &quot;expires-cookie=thirteenth; Domain=expirestest.com; Path=/;&quot;        &quot; Expires=Tue, 1 Jan 1980 12:00:00 GMT; &quot;        &quot;max-age-cookie=fourteenth; Domain=maxagetest.com; Path=/;&quot;        &quot; Max-Age=60; &quot;        &quot;invalid-max-age-cookie=fifteenth; Domain=invalid-values.com; &quot;        &quot; Max-Age=string; &quot;        &quot;invalid-expires-cookie=sixteenth; Domain=invalid-values.com; &quot;        &quot; Expires=string;&quot;    )    jar.update_cookies(cookies)    cookies_sent = jar.filter_cookies(URL(&quot;http://1.2.3.4/&quot;)).output(        header=&#x27;Cookie:&#x27;)    assert cookies_sent == &#x27;Cookie: shared-cookie=first&#x27;\n\n floxay&#x2F;python-riot-auth é‡Œæ­£å¥½å°è£…äº†cookie jarï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªè¦æƒ³åŠæ³•å¼„å‡ºæ¥ä¸€ä¸ª SimpleCookie å¯¹è±¡ï¼Œå†è°ƒç”¨ update_cookie æ–¹æ³•ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼\n3.æœ€ç»ˆå®ç°å…³äºè¿™ä¸¤ä¸ªç™»å½•é¡¹ç›®çš„æºç ï¼Œè¯·å»githubä»“åº“æŸ¥çœ‹\nä¸‹é¢åªå¯¹cookieéƒ¨åˆ†è¿›è¡Œè¯´æ˜ï¼\n3.1 requestå’Œaiohttpçš„cookieså·®å¼‚\nå› ä¸ºcookieéƒ¨åˆ†æ¶‰åŠåˆ°riotè´¦æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œæ‰€ä»¥å¿…é¡»æ‰“ç \n\né¦–å…ˆå½“ç„¶æ˜¯ä»requesté‡Œé¢æ‹¿åˆ°cookieäº†\nself.cookie = self.session.cookiesprint(self.cookie)\n\nè¿™é‡Œç›´æ¥æ‰“å°ï¼Œè·å–åˆ°çš„å†…å®¹å¦‚ä¸‹\n\nè€Œaiohttpçš„cookieæ‰“å°å‡ºæ¥æ˜¯ä¸‹é¢è¿™æ ·çš„\nauth = riot_auth.RiotAuth(&quot;è´¦æˆ·&quot;,&quot;å¯†ç &quot;)print(auth._cookie_jar._cookies)\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªåº“æ‰“å°çš„å†…å®¹ä¸å¤ªç›¸åŒï¼Œä½†æ˜¯å…¶é”®å€¼æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠrequestçš„é”®å€¼å¯¼å…¥åˆ°SimpleCookieé‡Œé¢å°±å¯ä»¥äº†\n3.2 request.sessionçš„cookieå¯¼å‡ºä¸ºdictè¦æƒ³å¯¼å…¥åˆ°SimpleCookieé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹è¿™ä¸ªç±»çš„æ„é€ æ˜¯ä»€ä¹ˆ\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç±»å…¶å®æ˜¯æ”¯æŒç”¨dictæ¥åˆå§‹åŒ–çš„\nç°åœ¨é—®é¢˜åˆå˜æˆäº†ï¼Œå¦‚ä½•å°†request.sessionçš„cookieå¯¼å‡ºä¸ºdict\nç™¾åº¦ä¸€ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆè¿˜æ˜¯èƒ½æ‰¾å¾—åˆ°çš„\nau = Auth(username=&quot;è´¦æˆ·&quot;,password=&quot;å¯†ç &quot;)ck_dict = requests.utils.dict_from_cookiejar( au.cookie )print(ck_dict)\n\næ­¤æ—¶æ‰“å°å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼ŒæˆåŠŸè½¬æ¢æˆäº†dict\n\nå†æŠŠè¿™ä¸ªdictä¸¢è¿›SimpleCookieï¼Œè¿è¡Œæ— æŠ¥é”™ï¼Œé‚£ä¹ˆè¯´æ˜ojbkäº†\n3.3 æœ€ç»ˆå®ç°ç°åœ¨å°±åªéœ€è¦è¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼Œå°±èƒ½å®ç°æŠŠ2faç”¨æˆ·çš„cookieå¯¼å…¥åˆ°riot_auth.RiotAuth()é‡Œé¢äº†ï¼\nimport asyncioif __name__ == &#x27;__main__&#x27;:    print(f&quot;Start&quot;)    au = Auth(username=&quot;è´¦æˆ·&quot;,password=&quot;å¯†ç &quot;)    ck_dict = requests.utils.dict_from_cookiejar( au.cookie )    print(ck_dict)    scookie = SimpleCookie(ck_dict)    auth = riot_auth.RiotAuth()    auth._cookie_jar._cookies    auth._cookie_jar.update_cookies(scookie)    ret = asyncio.run(auth.reauthorize())    print(ret) #æˆåŠŸï¼ï¼ï¼ï¼\n\nauth.reauthorize()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªboolå€¼ï¼Œæ ‡è¯†æ˜¯å¦ç™»å½•æˆåŠŸ\n\nå½“ç„¶æˆåŠŸå•¦ï¼\n4.ç»“è¯­ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆç½‘ä¸Šæ˜¯çœŸçš„æ— ç°æˆçš„ï¼Œéƒ½å¾—ä¸œå¹³è¥¿å‡‘ï¼ŒèŠ±äº†æˆ‘å·®ä¸å¤šä¸€ä¸ªåŠå°æ—¶æ‰æ‰¾åˆ°æ­£ç¡®æ–¹æ³•\nä¸è¿‡ç°åœ¨ç»ˆäºå¯ä»¥ä¿å­˜2faç”¨æˆ·çš„ç™»å½•ä¿¡æ¯äº†ï¼Œä¹Ÿç®—æ˜¯botçš„åŠŸèƒ½å‡çº§å§ï¼\n","categories":["é€Ÿé€šPython"],"tags":["é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python","api"]},{"title":"ã€Pythonã€‘requeståº“InsecureRequestWarningçš„åŸå› ","url":"/2023/01/15/note_Python/3request%E7%9A%84ssl%E6%8A%A5%E9%94%99/","content":"ä»Šå¤©åœ¨æµ‹è¯•æˆ‘è‡ªå·±å†™çš„apiçš„æ—¶å€™ï¼Œå‘ç°äº†ä¹‹å‰å‡ºç°çš„ä¸€ä¸ªwarningçš„çœŸæ­£åŸå› \n1.èµ·å› å…ˆæ¥çœ‹è¯·æ±‚apiçš„ä»£ç \ndef ApiRq(account:str,passwd:str,background=&#x27;&#x27;):    url = &quot;https://val.musnow.top/shop-url&quot;    params = &#123;         # å‚æ•°æ¶‰åŠåˆ°éšç§ï¼Œçœç•¥    &#125;  \tres = requests.get(url,params=params,verify=False) # è¯·æ±‚api    return res.json()\n\nè¿è¡Œï¼Œä¼šå‡ºç°è¿™ä¸ªè­¦å‘Š\n/home/muxue/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:1045: InsecureRequestWarning: Unverified HTTPS request is being made to host &#x27;val.musnow.top&#x27;. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„åŠæ³•æ¥å»æ‰è¿™ä¸ªè­¦å‘Š\nimport urllib3 # å±è”½ssl warningurllib3.disable_warnings(urllib3.connectionpool.InsecureRequestWarning)\n\nä½†æ˜¯è¿™æ ·æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ£€æŸ¥ç½‘ç«™çš„è¯ä¹¦ï¼Œä¹Ÿå°±æ— æ³•å‘æœåŠ¡å™¨å‘é€ç¡®è®¤åçš„åŠ å¯†ä¿¡æ¯\n2.å‡ºç°è¿™ä¸ªè­¦å‘Šçš„åŸå› å‡ºç°è¿™ä¸ªè­¦å‘Šï¼Œå…¶å®å°±æ˜¯å› ä¸ºæˆ‘ä»¬è¿™é‡Œè®¾ç½®äº†ä¸æ£€æŸ¥sslè¯ä¹¦\nres = requests.get(url,params=params,verify=False) # è¯·æ±‚api\n\nå¦‚æœä½ ç½‘ç«™çš„è¯ä¹¦æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé‚£ä¹ˆå®Œå…¨æ²¡æœ‰å¿…è¦ä¸æ£€æŸ¥ï¼Œåº”è¯¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç \nres = requests.get(url,params=params)\n\nä¹‹å‰æˆ‘çš„apiç«™ç‚¹æ‰€ç”¨è¯ä¹¦ç¼ºå°‘è¯ä¹¦é“¾ï¼Œæ‰€ä»¥å‡ºç°äº†å¦å¤–ä¸€ä¸ªæŠ¥é”™ï¼Œä»è€Œä½¿ç”¨äº†verify=Falseæ‰èƒ½æ­£å¸¸è¿è¡Œä»£ç ï¼Œç°åœ¨æ›´æ–°äº†è¯ä¹¦ï¼Œä¹Ÿå°±ä¸éœ€è¦äº†ï¼\næ­¤æ—¶ç›´æ¥è¿è¡Œä»£ç ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™äº†ï¼\n[muxue@bt-7274:~/kook/test]$ py3 api_test.pystart test\n\n3.è¿›ä¸€æ­¥äº†è§£\nå‚è€ƒ https://blog.csdn.net/memory_qianxiao/article/details/82011282\n\nrequests åº“å…¶å®æ˜¯åŸºäº urllib ç¼–å†™çš„ï¼Œå¯¹ urllib è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—ä½¿ç”¨æ—¶å€™çš„ä½“éªŒå¥½äº†å¾ˆå¤šã€‚\nç°åœ¨ urllib å·²ç»å‡ºåˆ°äº†3ç‰ˆæœ¬ï¼ŒåŠŸèƒ½å’Œæ€§èƒ½è‡ªç„¶æ˜¯æå‡äº†ä¸å°‘ã€‚æ‰€ä»¥ï¼Œrequestsæœ€æ–°ç‰ˆæœ¬ä¹Ÿæ˜¯åŸºäºæœ€æ–°çš„ urllib3 è¿›è¡Œå°è£…ã€‚\nåœ¨urllib2æ—¶ä»£å¯¹httpsçš„å¤„ç†éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨è¯·æ±‚çš„æ—¶å€™åŠ ä¸Š verify=False å³å¯ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯å¿½ç•¥httpså®‰å…¨è¯ä¹¦çš„éªŒè¯ï¼Œä¹Ÿå°±æ˜¯ä¸éªŒè¯è¯ä¹¦çš„å¯é æ€§ï¼Œç›´æ¥è¯·æ±‚ã€‚ä½†è¿™å…¶å®æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¯ä¹¦å¯ä»¥ä¼ªé€ ï¼Œä¸éªŒè¯çš„è¯å°±ä¸èƒ½ä¿è¯æ•°æ®çš„çœŸå®æ€§ã€‚\nåœ¨urllib3æ—¶ä»£ï¼Œå®˜æ–¹å¼ºåˆ¶éªŒè¯httpsçš„å®‰å…¨è¯ä¹¦ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡æ˜¯ä¸èƒ½é€šè¿‡è¯·æ±‚çš„ï¼Œè™½ç„¶æ·»åŠ å¿½ç•¥éªŒè¯çš„å‚æ•°ï¼Œä½†æ˜¯ä¾ç„¶ä¼š ç»™å‡ºé†’ç›®çš„ Warning\n\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯å¦‚æœæ˜¯æ—§çš„requeståº“ï¼Œä½ å¯ä»¥ç”¨ verify=False ç¦ç”¨æ‰è¯ä¹¦éªŒè¯ï¼Œä¹Ÿä¸ä¼šå‡ºç°æŠ¥é”™ï¼›ä½†æ˜¯åˆ° urllib3 åï¼Œå®˜æ–¹è¦æ±‚ä¸€å®šè¦éªŒè¯httpsè¯ä¹¦ï¼Œæ‰€ä»¥ç¦ç”¨æ‰è¯ä¹¦éªŒè¯ï¼Œå°±ä¼šæŠ¥å‡ºè­¦å‘Šã€‚\né™¤éä½ ç¡®è®¤ä½ è°ƒç”¨çš„apiæ˜¯æ­£è§„çš„ï¼Œé‚£ä¹ˆç¦ç”¨æ‰è¯ä¹¦éªŒè¯æ˜¯ä¸åº”è¯¥çš„ï¼\n4.æ£€æŸ¥ä¸€ä¸‹ä½ çš„ç«™ç‚¹sslè¯ä¹¦æ˜¯å¦okè¿™é‡Œç»™å¤§å®¶æ¨èä¸€ä¸ªç½‘ç«™ï¼šmyssl\nåœ¨è¿™é‡Œè¾“å…¥ä½ çš„åŸŸåï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸‹ä½ çš„sslè¯ä¹¦æ˜¯å¦æ­£ç¡®éƒ¨ç½²ï¼Œæˆ‘çš„è¯ä¹¦é“¾é—®é¢˜å°±æ˜¯åœ¨è¿™é‡Œæ£€æµ‹å‡ºæ¥çš„\n\nåªè¦æ˜¯Aé‚£å°±æ˜¯okçš„ï¼\n","categories":["é€Ÿé€šPython"],"tags":["é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python","api"]},{"title":"ã€Pythonã€‘ç”Ÿæˆæœ¬é¡¹ç›®çš„requeirments.txt","url":"/2023/01/17/note_Python/5%E7%94%9F%E6%88%90requeirments.txt%E6%96%87%E4%BB%B6/","content":"æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è‡ªå·±å†™çš„é¡¹ç›®ç”Ÿæˆä¸€ä¸ªrequeirments.txtï¼Œæ–¹ä¾¿å…¶ä»–ä½¿ç”¨è€…å¿«é€Ÿå®‰è£…ä¾èµ–é¡¹\n\n\n\nå‚è€ƒhttps://www.cnblogs.com/shun7man/p/14080921.html\n\n1.ä½¿ç”¨pipå¦‚æœä½ çš„é¡¹ç›®æœ¬èº«å°±æ˜¯åœ¨venvè™šæ‹Ÿç¯å¢ƒä¸‹è·‘çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨ä¸‹é¢çš„è¯­å¥ç”Ÿæˆä¸€ä¸ªä¾èµ–é¡¹æ–‡ä»¶\npip freeze &gt; requirements.txt\n\n\nä½†å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œæ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œè€Œæ˜¯ç”¨å…¨å±€çš„åŒ…çš„è¯ï¼Œé‚£å°±ä¼šå‡ºç°ä¸Šå›¾çš„æƒ…å†µï¼Œç”Ÿæˆçš„txtæ–‡ä»¶é‡Œé¢å‡ºç°äº†å¤ªå¤šæœ¬é¡¹ç›®æ²¡æœ‰ç”¨åˆ°çš„åŒ…ï¼Œé‚£ä½ è®©åˆ«äººå®‰è£…é‚£ä¹ˆå¤šæ²¡æœ‰ç”¨çš„åŒ…ï¼Œå²‚ä¸æ˜¯å‘äººå˜›ï¼\næ‰€ä»¥å¯ä»¥ç”¨å¦å¤–ä¸€ä¸ªé¡¹ç›®æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n2.pipreqsé¡¹ç›®åœ°å€ https://github.com/bndr/pipreqs\nä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªåŒ…\npip install pipreqs\n\n[muxue@bt-7274:~/kook/val-bot]$ pip3.10 install pipreqsDefaulting to user installation because normal site-packages is not writeableCollecting pipreqs  Downloading pipreqs-0.4.11-py2.py3-none-any.whl (32 kB)Collecting yarg  Downloading yarg-0.1.9-py2.py3-none-any.whl (19 kB)Collecting docopt  Downloading docopt-0.6.2.tar.gz (25 kB)  Preparing metadata (setup.py) ... doneRequirement already satisfied: requests in /home/muxue/.local/lib/python3.10/site-packages (from yarg-&gt;pipreqs) (2.28.1)Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (1.26.11)Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (3.3)Requirement already satisfied: certifi&gt;=2017.4.17 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (2022.6.15)Requirement already satisfied: charset-normalizer&lt;3,&gt;=2 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (2.1.1)Installing collected packages: docopt, yarg, pipreqs  DEPRECATION: docopt is being installed using the legacy &#x27;setup.py install&#x27; method, because it does not have a &#x27;pyproject.toml&#x27; and the &#x27;wheel&#x27; package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the &#x27;--use-pep517&#x27; option. Discussion can be found at https://github.com/pypa/pip/issues/8559  Running setup.py install for docopt ... doneSuccessfully installed docopt-0.6.2 pipreqs-0.4.11 yarg-0.1.9\n\nå®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥ç”Ÿæˆæ–‡ä»¶\npipreqs . --encoding=utf8 --force\n\nè¿™ä¸ªè¯­å¥çš„æ„æ€æ˜¯ç”Ÿæˆå½“å‰ç›®å½•çš„é¡¹ç›®æ‰€ç”¨åˆ°çš„åŒ…çš„requirementsæ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ï¼Œç”¨è¿™ä¸ªé¡¹ç›®ç”Ÿæˆçš„æ–‡ä»¶ï¼ŒåŒ…å°‘å¤šäº†ï¼Œä¸”ç¡®å®æ˜¯æœ¬é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ï¼\n3.åˆ›å»ºvenvè™šæ‹Ÿç¯å¢ƒè¿›è¡Œæµ‹è¯•3.1 åˆ›å»ºå…ˆæ¥å§é¡¹ç›®çš„ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ\npython -m venv botest\n\nè¿™ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbotestæ–‡ä»¶å¤¹\næ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨pip listæŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹å®‰è£…äº†ä»€ä¹ˆåŒ…\n[muxue@bt-7274:~/kook/test]$ pip3.10 listPackage                Version---------------------- -----------aiofiles               0.8.0aiohttp                3.8.1aiosignal              1.2.0aliyun-python-sdk-core 2.13.36aliyun-python-sdk-kms  2.16.0APScheduler            3.9.1async-timeout          4.0.2attrs                  22.1.0certifi                2022.6.15cffi                   1.15.1charset-normalizer     2.1.1click                  8.1.3colorama               0.4.6crcmod                 1.7cryptography           38.0.2docopt                 0.6.2Flask                  2.2.2frozenlist             1.3.1h11                    0.14.0idna                   3.3itsdangerous           2.1.2Jinja2                 3.1.2jmespath               0.10.0khl.py                 0.3.7MarkupSafe             2.1.1multidict              6.0.2numpy                  1.24.1oss2                   2.16.0pandas                 1.5.2Pillow                 9.2.0pip                    22.3.1pipreqs                0.4.11pycparser              2.21pycryptodome           3.15.0pycryptodomex          3.15.0python-dateutil        2.8.2pytz                   2022.2.1pytz-deprecation-shim  0.1.0.post0requests               2.28.1riot-auth              1.0.3setuptools             63.2.0six                    1.16.0tzdata                 2022.2tzlocal                4.2urllib3                1.26.11uvicorn                0.18.3valorant               1.0.4Werkzeug               2.2.2yarg                   0.1.9yarl                   1.8.1zhconv                 1.4.3\n\nä½ ä¼šå‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šåŒ…å•Šï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åªåˆ›å»ºäº†è™šæ‹Ÿç¯å¢ƒï¼Œè¿˜æ²¡æœ‰å¯åŠ¨å®ƒï¼\n3.2 å¯åŠ¨&#x2F;å…³é—­è™šæ‹Ÿç¯å¢ƒç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨\n[muxue@bt-7274:~/kook/test]$ source botest/bin/activate(botest) [muxue@bt-7274:~/kook/test]$ \n\nä½ ä¼šå‘ç°å‘½ä»¤è¡Œå‰é¢å¤šäº†ä¸€ä¸ª(botest),è¿™å°±ä»£è¡¨æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒå¯åŠ¨æˆåŠŸäº†\n(botest) [muxue@bt-7274:~/kook/test]$ pip3.10 listPackage    Version---------- -------pip        22.2.1setuptools 63.2.0\n\nå†æ¬¡æ‰§è¡Œï¼Œå‘ç°åªå‰©ä¸‹ä¸¤ä¸ªé»˜è®¤çš„åŒ…äº†ï¼Œè¿™æ‰æ˜¯å¯¹çš„ï¼\nè¦æƒ³é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œç”¨ä¸‹é¢çš„è¯­å¥å³å¯\ndeactivate\n\n3.3 æµ‹è¯•ä»£ç æ‹·è´è¿‡æ¥äº†ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨å°±æ˜¯ä¸€ä¸ªåˆšåˆšå…‹éš†äº†æ­¤ä»“åº“ï¼Œè¦ä½¿ç”¨é¡¹ç›®çš„ç¨‹åºçŒ¿\næ­¤æ—¶æˆ‘ä»¬éœ€è¦åˆ©ç”¨requirements.txtå¿«é€Ÿå®‰è£…éœ€è¦çš„åŒ…\npip install -r requirements.txt\n\nä»–ä¼šå¼€å§‹ä¸€ä¸ªä¸ªå®‰è£…æ‰€éœ€è¦çš„åŒ…ï¼Œä»¥åŠè¿™äº›åŒ…æ‰€éœ€è¦çš„ä¾èµ–é¡¹ï¼›å’Œæˆ‘ä»¬æ‰‹åŠ¨å®‰è£…åŒ…æ˜¯ä¸€ä¸ªæ•ˆæœ\n\néšåå°±å‡ºç°äº†ä¸€ä¸ªæ„æ–™ä¹‹ä¸­çš„æŠ¥é”™\n\nè¿™æ˜¯å› ä¸ºriot_authè¿™ä¸ªåŒ…ï¼Œå¹¶æ²¡æœ‰åœ¨pypié‡Œé¢æ³¨å†Œï¼Œå…¶å®‰è£…çš„æ–¹å¼æ˜¯ç”¨gitå®‰è£…çš„\npip3.10 install git+https://github.com/floxay/python-riot-auth.git\n\nä½¿ç”¨pip freezeåˆ›å»ºå‡ºæ¥çš„txtæ–‡ä»¶é‡Œé¢çš„ä¾èµ–é¡¹ï¼Œæ‰æ˜¯æ­£ç¡®çš„åŒ…\nriot-auth @ git+https://github.com/floxay/python-riot-auth.git@e70f76002728b99005baccd6fe3157c03d4d9f02\n\nè¿™ä¹Ÿæ˜¯æˆ‘ç›®å‰å‘ç°çš„è¯¥é¡¹ç›®çš„ä¸€ä¸ªbugï¼Œå·²ç»æäº¤äº†issueäº†ï¼\n\nhttps://github.com/bndr/pipreqs/issues/350\n\næ—¢ç„¶çŸ¥é“é—®é¢˜çš„æƒ…å†µï¼Œé‚£å°±æ‰‹åŠ¨å¼„ä¸€ä¸‹å§ï¼ä¸è¿‡éœ€è¦æé†’çš„æ˜¯ï¼Œè¿™ç§gitæ–¹å¼çš„pipåŒ…ç»å¸¸å®‰è£…ä¸ä¸Šï¼Œä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯\n\nä¸ªäººçŒœæµ‹å’Œgithubçš„ç½‘ç»œç¯å¢ƒä¹Ÿæœ‰å…³ç³»ï¼Œæ‰€ä»¥å¾—å¤šè¯•å‡ æ¬¡ï¼Œæˆ–è€…æ‰‹åŠ¨å…‹éš†ï¼Œç²˜è´´åˆ°æœ¬åœ°.site-packagesæºç é‡Œé¢\nå¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œé‚£åº”è¯¥æ˜¯èƒ½å®‰è£…å®Œæˆçš„ï¼æ­¤æ—¶å°±å¯ä»¥æ„‰å¿«çš„è¿è¡Œé¡¹ç›®ä»£ç äº†\n","categories":["é€Ÿé€šPython"],"tags":["é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python"]},{"title":"ã€Pythonã€‘å…³äºvipå’Œæ™®é€šç”¨æˆ·å•†åº—è¿”å›å€¼å›¾ç‰‡å‡ºé”™çš„é—®é¢˜å®šä½+å¤§ç™½è¯è¯´æ˜","url":"/2022/09/13/note_Python/6%E5%85%B3%E4%BA%8E%E9%98%BF%E7%8B%B8vip%E7%94%BB%E5%9B%BEbug%E7%9A%84%E5%A4%8D%E7%9B%98/","content":"åœ¨å¼€å‘é˜¿ç‹¸çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªå…¨å±€å˜é‡å†™é”™è€Œå¯¼è‡´çš„bugâ€¦â€¦\n\n\né—®é¢˜å¼•å‡ºå¦‚æœä½ æœ€è¿‘å‡ å¤©æœ‰ç”¨è¿‡shopæŸ¥è¯¢åŠŸèƒ½ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„æƒ…å†µ\n\nä¸Šå›¾ä¸ºæ™®é€šç”¨æˆ·çš„å•†åº—ç”¨äº†vipç”¨æˆ·16-9çš„å›¾ç‰‡ï¼›\nä¸‹å›¾ä¸ºvipç”¨æˆ·çš„å•†åº—ç”¨äº†æ™®é€šç”¨æˆ·1-1çš„å›¾ç‰‡\n\n\nç®€å•è¯´æ¥ï¼Œvipçš„å•†åº—è¿”å›å€¼æ˜¯16-9çš„å›¾ç‰‡ï¼Œè€Œæ™®é€šç”¨æˆ·çš„å•†åº—æ˜¯1-1çš„å›¾ç‰‡ã€‚\nåœ¨ä¸Šé¢çš„ä¸‰ä¸ªæ¯æ—¥å•†åº—è¿”å›å€¼ä¸­ï¼Œå°±å‡ºç°äº†vipç”¨æˆ·çš„å•†åº—ç”¨äº†1-1çš„å›¾ï¼Œæˆ–è€…æ™®é€šç”¨æˆ·çš„å•†åº—ç”¨äº†16-9çš„å›¾ã€‚\nè¿™ä¸ªbugæ˜¨å¤©ï¼ˆ22.09.12ï¼‰æˆ‘å°±å‘ç°äº†ï¼Œæ˜¯ä¸€ä½vipç”¨æˆ·çš„å•†åº—è¿”å›å€¼é‡Œé¢ç”¨äº†æ™®é€šç”¨æˆ·çš„å›¾ç‰‡ã€‚è€Œæˆ‘æ˜¨å¤©å®šä½bugçš„æ—¶å€™ï¼Œæµ‹è¯•botä¿å­˜äº†ç”»å‡ºæ¥çš„4ä¸ªå°å›¾ï¼Œæ²¡æœ‰é—®é¢˜ï¼›ç„¶åå†ä½¿ç”¨&#x2F;shopå‘½ä»¤ï¼Œå‘ç°æµ‹è¯•botæ²¡æœ‰å‡ºç°è¿™ä¸ªé—®é¢˜ã€‚äºæ˜¯æˆ‘å°±æŠŠé˜¿ç‹¸é‡å¯äº†ä¸€ä¸‹ï¼Œé—®é¢˜ä¹Ÿæ¶ˆå¤±äº†ï¼äºæ˜¯å°±ç§‰æŒâ€œé‡äº‹ä¸å†³ï¼Œé‡å¯è§£å†³â€çš„é”™è¯¯å¿ƒæ€ï¼Œæ²¡æœ‰æ‰“ç†è¿™ä¸ªé—®é¢˜ã€‚\nè€Œä»Šå¤©ï¼ˆ22.09.13ï¼‰æ—©ä¸Šï¼Œè¿™ä¸ªé—®é¢˜åˆå‡ºç°äº†ï¼Œè¿™æ¬¡æ˜¯æ™®é€šç”¨æˆ·çš„å•†åº—è¿”å›å€¼é‡Œé¢ç”¨äº†vipçš„å›¾ç‰‡ã€‚äºæ˜¯æˆ‘åˆæŠŠboté‡å¯äº†ä¸€ä¸‹ï¼Œæœç„¶ï¼Œé—®é¢˜åˆæ¶ˆå¤±äº†ã€‚å“ˆå“ˆï¼è§£å†³äº†â€”â€”ä¸ªé”¤å­ï¼\n\nä»£ç é€»è¾‘ä»‹ç»è¿™é‡Œå…ˆè¯´æ˜ä¸€ä¸‹ï¼Œé˜¿ç‹¸çš„å•†åº—è¿”å›å€¼é€»è¾‘å¦‚ä¸‹ï¼š\n\né€šè¿‡apiè·å–ç©å®¶å•†åº—ï¼Œapiè¿”å›çš„æ˜¯4ä¸ªæ­¦å™¨çš„uuid\néå†æ‰€æœ‰æ­¦å™¨ï¼Œæ‰¾åˆ°è¿™4ä¸ªæ­¦å™¨åå­—+çš®è‚¤å›¾ç‰‡+ä»·æ ¼+çš®è‚¤ç­‰çº§ï¼Œå°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œç”»å‡ºä¸€ä¸ªå°å›¾\nå†æŠŠç”»å‡ºæ¥çš„4ä¸ªå°å›¾ï¼Œé€šè¿‡åæ ‡æ˜ å°„ï¼Œå…¨éƒ¨ç²˜è´´åˆ°æœ€ç»ˆçš„å¤§å›¾ä¸Šé¢ã€‚ä¹Ÿå°±æ˜¯å¤§å®¶è·å–é“çš„è¿”å›ç»“æœ\n\nä»Šå¤©æ™šä¸Šï¼Œæˆ‘è‡ªå·±è·å–å•†åº—çš„æ—¶å€™åˆåŒé‡åˆ°äº†è¿™ä¸ªbugï¼Œäºæ˜¯å†æ¬¡è®¤çœŸçœ‹äº†ä¸€è¾¹ä»£ç ã€‚è¿™ä¸‹å¯ç®—æ˜¯å‘ç°è¿™ä¸ªé—®é¢˜çš„ä½ç½®äº†~ä¸”å¬æˆ‘ç»†ç»†é“æ¥ï¼ˆçœ‹ä¸‹é¢çš„å›¾ç‰‡ï¼‰\n\nweapon_icon_tempï¼ˆå°±å«å®ƒæŠ½å±‰å§ï¼‰æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé‡Œé¢å­˜æ”¾äº†ç”»å¥½çš„å•ä¸ªæ­¦å™¨çš„å›¾ç‰‡ï¼ˆæ­¦å™¨åå­—+æ­¦å™¨å›¾ç‰‡+ä»·æ ¼+çš®è‚¤ç­‰çº§ï¼‰ä¸‹å›¾æ˜¯ç”»å¥½çš„å•å›¾ç¤ºä¾‹\n\né™¤äº†æŠ½å±‰ï¼ˆweapon_icon_tempï¼‰ï¼Œé˜¿ç‹¸è¿˜ä¼šæŠŠè¿™ä¸ªå›¾ç‰‡å­˜æ”¾åˆ°æœ¬åœ°è·¯å¾„é‡Œé¢ï¼ˆä»“åº“ï¼‰è¿™æ ·åœ¨é˜¿ç‹¸é‡å¯ä¹‹åï¼ˆæŠ½å±‰ä¼šè¢«æ¸…ç©ºï¼‰æœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰é‡Œé¢çš„å›¾ç‰‡è¿˜åœ¨ï¼Œå¯ä»¥ä»ä»“åº“é‡Œé¢æ‹¿å‡ºæ¥ï¼Œä¹ŸèŠ‚çœäº†ç”»å›¾çš„æ—¶é—´ã€‚\né€»è¾‘å¤§æ¦‚æ˜¯è¿™æ ·çš„\n\nç”¨æˆ·Aè·å–å•†åº—ï¼Œé˜¿ç‹¸ç”»å‡ºäº†4ä¸ªçš®è‚¤çš„å›¾ç‰‡ï¼Œå¹¶æŠŠå®ƒä»¬å­˜äº†èµ·æ¥ï¼ˆæŠ½å±‰å’Œä»“åº“éƒ½å­˜äº†ï¼‰ï¼›\nç”¨æˆ·Bè·å–å•†åº—ï¼Œé˜¿ç‹¸å‘ç°è¿™ä¸¤ä¸ªç”¨æˆ·çš„å•†åº—çš®è‚¤æœ‰é‡åˆï¼Œè¿™æ—¶å€™å°±æ²¡å¿…è¦å†ç”»ä¸€å¼ å›¾äº†ï¼Œäºæ˜¯é˜¿ç‹¸å°±ä»æŠ½å±‰é‡Œï¼ˆweapon_icon_tempï¼‰æ‹¿å‡ºäº†ä¹‹å‰ç»™ç”¨æˆ·Aç”»å¥½çš„ç›¸åŒçš®è‚¤çš„å›¾ç‰‡ï¼Œç›´æ¥ç²˜è´´åˆ°ç”¨æˆ·Bæœ€åçš„å¤§å›¾ä¸Šã€‚\n\nä¸‹å›¾ä¸ºæ™®é€šç”¨æˆ·çš„ç”»å›¾é€»è¾‘\n\n\nç°åœ¨ï¼Œvipçš„å•†åº—å›¾ç‰‡æ˜¯16-9ï¼Œæ™®é€šç”¨æˆ·çš„å•†åº—å›¾ç‰‡æ˜¯1-1ã€‚æ‰€ä»¥é˜¿ç‹¸ä¼šå•ç‹¬å¤„ç†ä¸¤ç§ç”¨æˆ·ï¼Œå¹¶ç”»å‡ºä¸åŒçš„å›¾ç‰‡ï¼Œå­˜æ”¾åœ¨ä¸åŒçš„æœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰ä¸­ã€‚\n\næ™®é€šç”¨æˆ·å­˜æ”¾åœ¨img_tempæœ¬åœ°è·¯å¾„ä¸­ï¼Œvipç”¨æˆ·å­˜æ”¾åœ¨img_temp_vipæœ¬åœ°è·¯å¾„ä¸­\n\n\nå¯æ˜¯ï¼Œæœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰çš„ä½ç½®å˜å•¦ï¼Œä½†æ˜¯å…¨å±€å˜é‡ï¼ˆæŠ½å±‰ï¼‰ç”¨çš„è¿˜æ˜¯åŒä¸€ä¸ªå•Šï¼\né˜¿ç‹¸ç”»å›¾çš„æ—¶å€™ï¼Œè‚¯å®šæ˜¯å…ˆä»æŠ½å±‰é‡Œé¢æ‹¿å›¾ç‰‡ã€‚å› ä¸ºæŠ½å±‰é¡ºæ‰‹å°±èƒ½æ‹¿åˆ°ï¼Œå¹²å˜›è·‘ä»“åº“é‡Œé¢å»å‘¢ï¼Ÿï¼ˆæŒ‡å…¨å±€å˜é‡è®¿é—®æ¯”æœ¬åœ°è·¯å¾„æ›´å¿«ï¼‰\nè¿™å°±å¯¼è‡´äº†å¦‚æœæŸä¸ªçš®è‚¤Aå…ˆè¢«æ™®é€šç”¨æˆ·å¼ ä¸‰æŸ¥è¯¢åˆ°ï¼Œè€Œvipç”¨æˆ·æå››åœ¨ä¹‹åæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¹Ÿè·å–åˆ°ç›¸åŒçš„çš®è‚¤Aï¼Œé‚£ä¹ˆé˜¿ç‹¸å°±ä»æŠ½å±‰é‡Œé¢æå‡ºäº†ä¸€å¼ åº”è¯¥ç»™æ™®é€šç”¨æˆ·ç”¨çš„å›¾ç‰‡ï¼Œè´´åœ¨äº†vipç”¨æˆ·æå››çš„è¿”å›å€¼ä¸Šï¼Œäºæ˜¯æå››å°±è·å–åˆ°äº†ä¸‹é¢è¿™ä¸€å¼ å›¾ç‰‡\n\nè§£å†³è§£å†³åŠæ³•å¾ˆç®€å•ï¼ŒæŠŠvipå’Œæ™®é€šç”¨æˆ·çš„æŠ½å±‰åˆ†å¼€å°±è¡Œäº†\né‚£ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜ï¼Œé‡å¯é˜¿ç‹¸å°±å¥½äº†å‘¢ï¼Ÿ\nå‰é¢æåˆ°è¿‡ï¼ŒæŠ½å±‰ä¼šåœ¨é˜¿ç‹¸å…³æœºçš„æ—¶å€™æ¸…é™¤ï¼ˆå› ä¸ºå…¨å±€å˜é‡æ˜¯å†™åœ¨å†…å­˜é‡Œé¢çš„ï¼Œä¼šåœ¨ä½¿ç”¨å®Œæ¯•åé‡Šæ”¾ï¼Œç±»ä¼¼äºä½ åˆ’æ‰æ‰‹æœºçš„åå°åº”ç”¨æ¥é‡Šæ”¾æ‰‹æœºçš„è¿å­˜ä¸€æ ·ï¼‰\nè¿™æ ·ä¸€æ¥ï¼ŒæŠ½å±‰é‡Œé¢æ²¡æœ‰ä¹‹å‰ç”»å¥½çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆé˜¿ç‹¸å°±ä¼šå»ä»“åº“é‡Œé¢ï¼ˆä»“åº“æ˜¯åˆ†å¼€çš„ï¼‰æ‰¾å‡ºäº†æ­£ç¡®çš„å›¾ç‰‡ï¼Œæµ‹è¯•å°±çœ‹ä¸å‡ºæ¥æœ‰bugäº†ï¼ï¼ˆå› ä¸ºè¿™ä¸ªbugçš„è§¦å‘å¿…é¡»è¦æ™®é€šç”¨æˆ·å’Œvipç”¨æˆ·ä½¿ç”¨é˜¿ç‹¸æŸ¥è¯¢å•†åº—ï¼Œè€Œä»–ä»¬åŒæ—¶åˆ·å‡ºäº†ä¸€ä¸ªçš®è‚¤ã€‚æˆ‘çš„æµ‹è¯•æ²¡æœ‰è¿™ç§ç¯å¢ƒï¼‰\nå’³å’³ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œä¸çŸ¥é“å¤§å®¶çœ‹æ˜ç™½äº†æ²¡æœ‰\n\nç»“è¯­é˜¿ç‹¸ä¼šåœ¨22.09.14çš„æ—©8ç‚¹åé‡å¯ï¼Œä»¥ä¿®å¤è¿™ä¸ªbugã€‚ä¸ºå•¥ç°åœ¨ä¸å¼„å‘¢ï¼Ÿå› ä¸ºé‡å¯ä¼šæŠŠæ™®é€šç”¨æˆ·çš„ç™»å½•ä¿¡æ¯æ¸…ç©ºã€‚å¯¼è‡´æ™®é€šç”¨æˆ·æ˜å¤©8ç‚¹çš„çš®è‚¤æé†’åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œä¹‹å‰å› ä¸ºé‡å¯å·²ç»è¿ç»­å‡ å¤©è¿™æ ·äº†ï¼ˆæŒ‡æ™®é€šç”¨æˆ·å› ä¸ºæ²¡æœ‰ç™»å½•ä¿¡æ¯ï¼Œæ— æ³•ä½¿ç”¨çš®è‚¤æé†’åŠŸèƒ½ï¼‰å¯¹æ™®é€šç”¨æˆ·ä¹Ÿå¤ªä¸å…¬å¹³äº†ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°äº†æœ€åï¼ï¼\n","categories":["é€Ÿé€šPython"],"tags":["é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python"]},{"title":"ã€C++ã€‘STLï¼šstring","url":"/2022/06/29/note_cpp/10STL_String%E7%B1%BB/","content":"è¿™æ˜¯æ¥è§¦STLçš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä»¥stringä¸ºå§‹ï¼Œèµ°å…¥SLTçš„ä¸–ç•Œå§ï¼\n\n\n[TOC]\n1.ä½•ä¸ºSTLSTLæ˜¯C++æ ‡å‡†åº“çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºç»å¤§å¤šæ•°æ•°æ®ç»“æ„æä¾›è½®å­ï¼Œæ˜¯ä¸€ä¸ªåŒ…ç½—äº†æ•°æ®ç»“æ„å’Œç®—æ³•çš„è½¯ä»¶æ¡†æ¶ã€‚\nåœ¨ä¹‹å‰Cè¯­è¨€çš„æ•°æ®ç»“æ„ä¸“æ ä¸­ï¼Œé¡ºåºè¡¨ã€é“¾è¡¨ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±é€ è½®å­æ¥å®ç°ã€‚ä½†åœ¨C++ä¸­ï¼Œæœ‰STLå°±å¥½æ¯”ç«™åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šï¼Œå¯ä»¥èµ°çš„æ›´è¿œã€‚å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›å†…å®¹æ—¶ï¼Œæ— éœ€è‡ªå·±é‡æ–°é€ è½®å­ï¼Œä»è€Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚\n1.1 STLç‰ˆæœ¬è¿™é‡Œæˆ‘ç›´æ¥è´´ä¸€ä¸ªCè¯­è¨€ä¸­æ–‡ç½‘çš„é“¾æ¥ğŸ‘‰ã€ç‚¹æˆ‘ã€‘\né‡Œé¢è¯¦ç»†ä»‹ç»äº†STLå‘å±•å†ç¨‹ä¸­å‡ºç°çš„å‡ ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­SGIå› ä¸ºè¢«Linuxçš„GCCæ‰€ä½¿ç”¨ï¼Œå¯ç§»æ¤æ€§é«˜ã€‚ä¹‹åçš„åšå®¢ä¸»è¦æ˜¯å­¦ä¹ SGI STLç‰ˆæœ¬ã€‚\n\n1.2 STLç»„æˆåŒæ ·æ˜¯Cè¯­è¨€ä¸­æ–‡ç½‘çš„èµ„æ–™ğŸ‘‰ã€é“¾æ¥ã€‘ï¼Œæˆ‘å°†å®ƒæ•´ç†ä¸ºäº†ä¸‹é¢è¿™ä¸ªæ€ç»´å¯¼å›¾\n\nåœ¨é¢è¯•ä¸­ï¼ŒSTLçš„å†…å®¹ä¹Ÿæ˜¯HRç»å¸¸è€ƒå¯Ÿçš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦è®¤çœŸå­¦ä¹ è¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†ç‚¹ï¼\n1.3 STLçš„ä¸€äº›åæ§½å¦‚æœä½ å»Cplusplusç½‘ç«™ä¸Šçœ‹è¿‡STLåº“çš„æ¥å£ï¼Œä½ å°±ä¼šå‘ç°STLåº“çš„è®¾è®¡æœ‰äº›å¤æ‚ã€‚æœ‰å¾ˆå¤šåœ°æ–¹éƒ½è€ƒè™‘çš„è¿‡äºç»†è‡´ï¼Œå¯¼è‡´å‡½æ•°æ¥å£éå¸¸å¤šï¼Œæƒ³è¦å…¨è®°ä½è¿™äº›æ¥å£æ˜¯æœ‰äº›å›°éš¾çš„\n\nå½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è‡ªå·±å¤ªèœäº†çš„ç¼˜æ•…ã€‚æˆ–è®¸ä»¥åç”¨çš„å¤šäº†ï¼Œè¿™äº›å°±ç†æ‰€åº”å½“çš„è®°ä½äº†å§ã€‚\nåŒæ—¶ï¼Œå› ä¸ºSTLä½¿ç”¨äº†æ¨¡æ¿ï¼Œæ‰€ä»¥å½“ä½ å¤šæ¬¡ä½¿ç”¨STLæ—¶ï¼ˆæ¯”å¦‚vectorå®¹å™¨ï¼‰å°±å®¹æ˜“å‡ºç°ä»£ç å†—ä½™\n\nå¥½å•¦ï¼Œä¸bbè¿™äº›æ²¡ç”¨çš„äº†ï¼Œè¿˜æ˜¯ç›´æ¥è¿›å…¥æ­£é¢˜stringç±»å§ï¼\n\n\n2.String\nå‚è€ƒcplusplusçš„æ ‡å‡†æ–‡æ¡£ï¼šstring\n\nstringç±»æ˜¯è¡¨ç¤ºå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»ï¼Œè¯¥ç±»çš„æ¥å£å’Œå¸¸è§„çš„å®¹å™¨åŸºæœ¬ç›¸åŒï¼Œå¹¶æ·»åŠ äº†ä¸€äº›ä¸“é—¨ç”¨äºæ“ä½œå­—ç¬¦ä¸²çš„å¸¸è§„æ“ä½œã€‚ä½¿ç”¨stringéœ€è¦åŒ…å«&lt;string&gt;å’Œusing namespace std;\n\nè¿™é‡Œä¸ºä»€ä¹ˆæ˜¯stringè€Œæ²¡æœ‰.hå‘¢ï¼Ÿ\nå…¶å®ç¼–è¯‘å™¨å¤„ç†å¤´æ–‡ä»¶å¹¶ä¸ä¼šå…³æ³¨å¤´æ–‡ä»¶çš„åç¼€ï¼Œä¸”Cè¯­è¨€ä¸­å·²ç»æœ‰ä¸€ä¸ªstring.häº†ï¼Œä¸ºäº†é¿å…å†²çªï¼Œæ‰€ä»¥ä½¿ç”¨äº†&lt;string&gt;ä½œä¸ºå¤´æ–‡ä»¶\n\nä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„stringç±»å‡½æ•°æ¥å£ï¼Œæ ‡é¢˜ä¸­çš„è‹±æ–‡å’Œcplusplusç½‘ç«™ä¸­çš„åˆ†ç±»å¯¹åº”\n2.1 ç¼–ç æ ¼å¼åœ¨Class instantiationsæ ç›®ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°stringæœ‰å¾ˆå¤šä¸åŒçš„ç±»ï¼Œè¿™äº›ç±»çš„ä¸»è¦åŒºåˆ«åœ¨äºç¼–ç æ–¹å¼çš„ä¸åŒã€‚æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯ç¬¬ä¸€ä¸ªçš„stringç±»\n\nä»€ä¹ˆæ˜¯ç¼–ç æ ¼å¼å‘¢ï¼Ÿåœ¨ç¼–ç¨‹å­¦ä¹ ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ä¾¿æ˜¯ASCiiç ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰utf-8ã€utf-16ç­‰ç­‰ã€‚\n\nASIIç è¡¨ä¸­ï¼Œè‹±æ–‡å•è¯ã€æ•°å­—ã€å„ç±»æ ‡ç‚¹ç¬¦å·éƒ½æœ‰å®ƒä»¬å¯¹åº”çš„å€¼ï¼Œè¿™æ ·æ‰èƒ½åœ¨åªæ”¯æŒ01äºŒè¿›åˆ¶çš„ç”µè„‘ä¸Šæ˜¾ç¤ºå‡ºå¯¹åº”çš„å†…å®¹ã€‚å½“è®¡ç®—æœºéœ€è¦æ˜¾ç¤ºè‹±æ–‡å•è¯çš„æ—¶å€™ï¼Œå°±ä¼šå»æŸ¥æ‰¾è¿™ä¸€ä¸ªè¡¨ã€‚æ‰€ä»¥ASCIIç è¡¨æ˜¯æ¼‚äº®å›½è®¾è®¡çš„ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œè‹±æ–‡ä¸­çš„åŸºç¡€åªæœ‰26ä¸ªå•è¯ï¼Œç®—ä¸Šå¤§å°å†™ä¹Ÿå°±52ä¸ªã€‚ä½†æ˜¯æˆ‘ä»¬ä¸­åæ–‡åŒ–åšå¤§ç²¾æ·±ï¼Œè®¡ç®—æœºéœ€è¦æ˜¾ç¤ºä¸­æ–‡çš„æ—¶å€™ï¼Œä¸€ä¸ªcharç±»å‹çš„ç©ºé—´å·²ç»ä¸å¤Ÿã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´å‡ºä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ç¼–ç æ ¼å¼ï¼Œä»¥æ­¤è®©è®¡ç®—æœºæ”¯æŒæ˜¾ç¤ºä¸­æ–‡â€”â€”GBKå°±æ˜¯è¿™æ ·ä¸€ä¸ªç¼–ç æ ¼å¼\n\nGBKä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨ä¸€ä¸ªæ±‰å­—ï¼Œä¸€äº›ä¸å¸¸ç”¨çš„ç”Ÿåƒ»å­—å¯èƒ½éœ€è¦3-4ä¸ªå­—èŠ‚æ¥å­˜å‚¨ã€‚\nç”¨ä¸‹é¢è¿™ä¸ªç®€å•çš„å‡½æ•°æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸­æ–‡ä¸­è°éŸ³å­—çš„ç¼–ç æ˜¯ç›¸è¿‘çš„\n\nåœ¨ç½‘ç»œä¸Šï¼Œæˆ‘ä»¬æ‰“æŸäº›è¯æ±‡ä¼šè¢«æ›¿æ¢æˆ****ï¼Œå°±æ˜¯ç¨‹åºåœ¨åå°å®åˆ«äº†ä½ çš„ç¼–ç ã€‚åŒæ—¶å¦‚æœæƒ³è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼ŒæŠŠè°éŸ³å­—ä¹Ÿå±è”½æ‰çš„è¯ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªè¯å‘¨å›´çš„ç¼–ç å…¨éƒ¨å±è”½äº†ã€‚\n\nåŒç†ï¼Œutf-16å’Œutf-32ä¸ºäº†æ”¯æŒåˆ«çš„å›½å®¶çš„è¯­è¨€ï¼Œå°±ä¼šç”¨æ›´é•¿çš„å­—èŠ‚æ¥å­˜å‚¨æ–‡å­—ã€‚è¿™é‡Œä¸è¿›è¡Œè¯¦è§£ã€‚\n\n\nstringç±»æœ‰éå¸¸å¤šçš„æ¥å£ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®Œå…¨æŒæ¡æ‰€æœ‰çš„å‡½æ•°æ¥å£ã€‚åªéœ€è¦å­¦ä¼šå¸¸ç”¨çš„æ¥å£ï¼Œåœ¨é‡åˆ°ä¸€äº›ä¸å¸¸ç”¨çš„ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å¯ä»¥å»æŸ¥æ‰¾cplusplusçš„æ–‡æ¡£ã€‚\n2.2 æ„é€ å‡½æ•°(constructor)\nä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„stringç±»çš„æ„é€ å‡½æ•°\n\n\n\næ„é€ å‡½æ•°\nåŠŸèƒ½\n\n\n\nstring()\nç©ºçš„stringå¯¹è±¡ï¼ˆç©ºçš„å­—ç¬¦ä¸²ï¼‰\n\n\nstring(size_t n,char c)\nstringç±»å¯¹è±¡ä¸­åŒ…å«nä¸ªå­—ç¬¦c\n\n\nstring(const char*s)\nåˆ©ç”¨å¸¸é‡å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡\n\n\nstring(const string&amp;s)\næ‹·è´æ„é€ \n\n\né™¤æ­¤ä¹‹å¤–ï¼Œåœ¨æ–‡æ¡£ä¸­æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æ›´å¤šæ„é€ å‡½æ•°\n\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨èµ‹å€¼æ“ä½œç¬¦è¿›è¡Œæ„é€ ã€‚ä¸‹é¢æ˜¯èµ‹å€¼é‡è½½çš„3ä¸ªç‰ˆæœ¬ï¼Œæƒ³å¿…éƒ½èƒ½çœ‹æ‡‚ï¼Œæ˜¯é€šè¿‡å¯¹è±¡ã€å¸¸é‡å­—ç¬¦ä¸²å’Œå­—ç¬¦è¿›è¡Œèµ‹å€¼æ“ä½œã€‚\n\nstringç±»ä¸­ä¹Ÿé‡è½½äº†æµæå–å’Œæµæ’å…¥æ“ä½œç¬¦ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œè¾“å…¥è¾“å‡ºæ“ä½œã€‚\n\n\næˆ‘ä»¬è¿˜å¯ä»¥é€‰å–ä¸€ä¸ªèŒƒå›´è¿›è¡Œæ„é€ ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ„é€ å‡½æ•°çš„ç¬¬ä¸‰ä¸ªä¼ å‚æœ‰ç¼ºçœå€¼npos\nstring (const string&amp; str, size_t pos, size_t len = npos);\n\næŸ¥æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œnopså…¶å®æ˜¯-1ï¼Œè€Œå®ƒçš„ç±»å‹æ˜¯æ— ç¬¦å·æ•´å‹ï¼Œ-1å°±ä»£è¡¨æ— ç¬¦å·æ•´å½¢çš„æœ€å¤§å€¼ã€‚å³ä»posä½ç½®å¼€å§‹ï¼Œå¾€åå–æœ€å¤§å€¼çš„é•¿åº¦ï¼ˆå®é™…ä¸Šå‹æ ¹æ²¡æœ‰é‚£ä¹ˆé•¿çš„å­—ç¬¦ä¸²ï¼‰\n\n2.3 ææ„å‡½æ•°(destructor)ææ„å‡½æ•°æœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯ç¼–è¯‘å™¨è‡ªå·±ä¼šè¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•äº†è§£å³å¯ã€‚\n\n2.4 éå†stringå¯¹è±¡æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„3ç§æ–¹å¼æ¥éå†ä¸€ä¸ªstringå¯¹è±¡\nvoid test3()&#123;\t//å°è¯•éå†ä¸€ä¸ªstring\tstring s1(&quot;hello world!&quot;);\t//1.é‡è½½[]\t//é€šè¿‡è°ƒç”¨æˆå‘˜å‡½æ•°sizeå¾—çŸ¥é•¿åº¦\tcout &lt;&lt; &quot;operator[] &quot; &lt;&lt; endl;\tfor (int i = 0; i &lt; s1.size(); i++)\t&#123;\t\tcout &lt;&lt; s1[i] &lt;&lt; &quot; &quot;;\t&#125;\tcout &lt;&lt; endl;\t//2.èŒƒå›´for\t//æœ¬è´¨ä¸Šè°ƒç”¨çš„æ˜¯è¿­ä»£å™¨\tcout &lt;&lt; &quot;auto &quot; &lt;&lt; endl;\tfor (auto c : s1)\t&#123;\t\tcout &lt;&lt; c &lt;&lt; &quot; &quot;;\t&#125;\tcout &lt;&lt; endl;\t//3.è¿­ä»£å™¨\t//åœ¨å¾ˆå¤šå®¹å™¨ä¸­æ˜¯é€šç”¨çš„\tstring::iterator it = s1.begin();//æŒ‡å‘å¼€å¤´\t//endæŒ‡å‘æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå³&#x27;\\0&#x27;)\tcout &lt;&lt; &quot;string::iterator &quot; &lt;&lt; endl;\twhile (it != s1.end())\t&#123;\t\tcout &lt;&lt; *it &lt;&lt; &quot; &quot;;\t\tit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ\t&#125;\tcout &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸‰ä¸ªæ–¹å¼éƒ½æˆåŠŸæ‰“å°å‡ºäº†s1å¯¹è±¡çš„å®Œæ•´å†…å®¹\n\nå…¶ä¸­èŒƒå›´forç¼–è¯‘å™¨åœ¨æ“ä½œçš„æ—¶å€™æ˜¯ç”¨è¿­ä»£å™¨æ¥å®ç°çš„ï¼Œè¿™ä¸€ç‚¹é€šè¿‡æŸ¥çœ‹æ±‡ç¼–å¯ä»¥çœ‹å‡ºæ¥\n\n2.5 operator[]å’Œatï¼ˆElement accessï¼‰ä¸Šé¢æˆ‘ä»¬ç”¨åˆ°äº†operator[]é‡è½½ï¼Œéœ€è¦äº†è§£çš„æ˜¯ï¼Œè¿™ä¸ªé‡è½½è¿”å›çš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ¥è®¿é—®å€¼çš„å†…å®¹ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æ”¹å˜stringä¸­æŸä¸€ä¸ªä½ç½®çš„å€¼ã€‚\n\nconst string s1(&quot;hello&quot;);s1[0]=&#x27;x&#x27;//æ­¤æ—¶è°ƒç”¨çš„æ˜¯constç‰ˆæœ¬çš„é‡è½½ï¼Œä¸å¯ä¿®æ”¹\n\natå‡½æ•°çš„ä½¿ç”¨æ–¹å¼å’Œ[]é‡è½½ç±»ä¼¼\n\nåŒºåˆ«å°±æ˜¯ï¼Œå½“operator[]é‡åˆ°è¶Šç•Œæƒ…å†µçš„æ—¶å€™ï¼Œå¦‚æœç›¸ç­‰å’Œå°äºé•¿åº¦ï¼Œéƒ½ä¸ä¼šæŠ¥é”™ã€‚ä½†æ˜¯å½“ä¸‹æ ‡å¤§äºé•¿åº¦æ—¶ï¼Œä¼šå¼•å‘æœªå®šä¹‰è¡Œä¸º\n\nè€Œat()çš„å¤„ç†æ–¹å¼æ˜¯ï¼Œåªè¦é•¿åº¦ä¸å°äºstringçš„é•¿åº¦ï¼Œå°±æŠ›å‡ºå¼‚å¸¸\n\n2.6 æ­£å‘å’Œåå‘è¿­ä»£å™¨Iteratorsé™¤äº†åœ¨2.2.3ä¸­ä½¿ç”¨è¿‡çš„æ­£å‘è¿­ä»£å™¨ä»¥å¤–ï¼Œstringè¿˜æœ‰ä¸€ä¸ªåå‘è¿­ä»£å™¨rbegin\n//åå‘è¿­ä»£å™¨string::reverse_iterator rit = s1.rbegin();//æŒ‡å‘ç»“å°¾å­—ç¬¦ï¼ˆ&#x27;\\0&#x27;ä¹‹å‰ï¼‰//endæŒ‡å‘å¼€å¤´æ•°æ®çš„å‰ä¸€ä¸ªä½ç½®while (rit != s1.rend())&#123;\tcout &lt;&lt; *rit &lt;&lt; &quot; &quot;;\trit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ&#125;cout &lt;&lt; endl;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™ä¸ªè¿­ä»£å™¨æ˜¯åå‘çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼Œä¾æ—§ä¼šrit++è€Œä¸æ˜¯å‡\n\næ³¨æ„ï¼ŒåŸºæœ¬çš„è¿­ä»£å™¨æ˜¯å¯è¯»å¯å†™çš„ã€‚åœ¨stringé‡Œé¢è¿˜å®ç°äº†constçš„è¿­ä»£å™¨\nconst_iterator begin() const;const_reverse_iterator rbegin() const;\n\nå¦‚æœä½ è§‰å¾—è¿™æ ·å†™å¤ªéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“è®°ä¸ä½ã€‚å¯ä»¥è®©autoæ¥è‡ªåŠ¨è¿›è¡Œæ¨å¯¼\nconst string s1(&quot;hello&quot;);auto rit = s1.rbegin();\n\nC++11ä¸­ï¼Œä¸ºäº†å’ŒåŸºæœ¬çš„æ–¹å¼è¿›è¡ŒåŒºåˆ†ï¼Œæ–°å¢äº†ä»¥cä¸ºå‰ç¼€çš„4ä¸ªè¿­ä»£å™¨ã€‚å…¶ä½¿ç”¨å’Œconst_iteratoræ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚\n\n\n2.7é•¿åº¦å’Œå®¹é‡æ“ä½œCapacity\n2.7.1 sizeå’Œlengthè¿™å…¶ä¸­sizeå’Œlengthçš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚åªæ˜¯æ—©æœŸstringè®¾è®¡çš„æ—¶å€™ä»¥lengthä½œä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­ä¸ºäº†å’Œå…¶ä»–æ¥å£æ¯”å¦‚Listè¿›è¡ŒåŒæ­¥ï¼Œåˆæ–°å¢äº†ä¸€ä¸ªsizeæ¥è¡¨ç¤ºå­—ç¬¦ä¸²é•¿åº¦ã€‚\n\n\n2.7.2 resizeå’Œreserve\næ³¨æ„åŒºåˆ†reserveå’Œreverse\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡reserveå¯¹å†…å­˜è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œå®¹é‡å˜å¤§æ˜¯å› ä¸ºéœ€è¦å†…å­˜å¯¹é½\n\nä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“å­—ç¬¦ä¸²çš„å®¹é‡å¿«è¦å†™æ»¡çš„æ—¶å€™ï¼Œç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹ï¼Œå¤§æ¦‚æ˜¯1.5å€\n\n\nè€Œresizeçš„æ“ä½œæ˜¯ä¿®æ”¹stringç±»çš„é•¿åº¦sizeï¼Œå¹¶åŒæ—¶è¿›è¡Œæ‰©å®¹\nstring s1(&quot;hello&quot;);cout &lt;&lt; s1.capacity() &lt;&lt; endl;s1.resize(100);cout &lt;&lt; s1.capacity() &lt;&lt; endl;\n\né€šè¿‡è°ƒè¯•å¯ä»¥å‘ç°ï¼Œè¿™é‡Œä¼šæŠŠsizeä¿®æ”¹ä¸º100ï¼Œå¹¶å°†å¤šä½™å†…å®¹å…¨éƒ¨åˆå§‹åŒ–ä¸º0\n\næˆ‘ä»¬è¿˜å¯ä»¥ç»™resizeè¿›è¡Œä¼ å‚ï¼ŒæŒ‡å®šåˆå§‹åŒ–çš„å†…å®¹\n\n\nåŒæ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¸€èˆ¬éƒ½ä¸ä¼šå¯¹å®¹é‡è¿›è¡Œç¼©å®¹\n\nä½†æ˜¯resizeä¼šä¿®æ”¹sizeçš„å¤§å°ï¼Œå³æŠ›å¼ƒæ‰10ä»¥åçš„å†…å®¹ï¼Œä½†ä¿æŒå®¹é‡ä¸å˜\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨VS2019ä¸­ï¼ˆä¸åŒç¼–è¯‘å™¨å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼Œreserveå¦‚æœä¼ å‚å°äº15ï¼Œåˆ™ä¼šå¯¹å®¹é‡è¿›è¡Œç¼©å®¹åˆ°15ï¼ˆstringå¯¹è±¡é»˜è®¤ä¼šå¼€è¾Ÿ15ä¸ªå­—èŠ‚çš„capacityï¼‰\n\n\n2.8ä¿®æ”¹å†…å®¹ï¼ˆModifiersï¼‰stringå¯ä»¥é€šè¿‡å¾ˆå¤šæ–¹å¼æ¥å¢åŠ ã€åˆ é™¤å†…å®¹\n2.8.1 å°¾æ’\nå®ƒä»¬çš„åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼Œå…¶ä¸­æœ€æ–¹ä¾¿çš„è‚¯å®šæ˜¯+=æ“ä½œäº†ï¼Œåˆæ¸…æ™°åˆç®€å•ï¼\n\n2.8.2 ä¸­é—´æ’å…¥stringå¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¤´æ’çš„é€‰é¡¹ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªInsertï¼Œå¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥\n\ninsertå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜ï¼Œå› ä¸ºåœ¨ä¸­é—´æˆ–è€…å¼€å¤´æ’å…¥å†…å®¹éœ€è¦æŒªåŠ¨æ•°æ®ã€‚ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™è¿˜éœ€è¦æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œæ•ˆç‡è¾ƒä½ã€‚\n\n2.8.3 åˆ é™¤å¯ä»¥é€šè¿‡eraseå‡½æ•°åˆ é™¤æ•°æ®\n\n\n1ï¼šé»˜è®¤ä»0å¼€å§‹å®Œå…¨åˆ é™¤ï¼Œå¯ä»¥é€‰æ‹©ä»posä½ç½®å¼€å§‹åˆ é™¤lené•¿åº¦çš„æ•°æ®\n2ï¼šåˆ©ç”¨è¿­ä»£å™¨åˆ é™¤pä½ç½®çš„å†…å®¹\n3ï¼šåˆ é™¤ä¸€ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œä»firstå¼€å§‹lastç»“æŸ\n\nè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œåœ¨è¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†\n2.8.4 æ›¿æ¢è¿™ä¸ªå‡½æ•°ä½¿ç”¨å¹¶ä¸é¢‘ç¹ï¼Œå…¶ä¿®æ”¹æ“ä½œä¸å¦‚ä½¿ç”¨æ‹·è´å¤åˆ¶ğŸ˜‚\n\næ¯”å¦‚å…¶ä¸­ç¬¬äºŒä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†strå¯¹è±¡ä¸­ï¼Œä»subposä½ç½®å¼€å§‹çš„sublené•¿åº¦å†…å®¹å¤åˆ¶åˆ°æœ¬å¯¹è±¡ä¸­ã€‚\n2.8.5 äº¤æ¢åœ¨stringç±»ä¸­æœ‰ä¸€ä¸ªäº¤æ¢å‡½æ•°ï¼ŒåŒæ—¶ï¼Œstdæ ‡å‡†åº“é‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªäº¤æ¢å‡½æ•°\ns1.swap(s2);//stringç±»swap(s1,s2);//stdæ ‡å‡†\n\n\n\nstringç±»é‡Œé¢çš„å‡½æ•°æ˜¯äº¤æ¢ç±»å¯¹è±¡çš„æŒ‡é’ˆ\nè€Œæ ‡å‡†åº“é‡Œé¢çš„swapå‡½æ•°éœ€è¦è¿›è¡Œæ·±æ‹·è´äº¤æ¢\n\næ‰€ä»¥stringç±»é‡Œé¢çš„swapå‡½æ•°åœ¨å¤„ç†å¯¹è±¡çš„æ—¶å€™ï¼Œæ¯”æ ‡å‡†åº“é‡Œé¢çš„swapæ•ˆç‡ä¼šé«˜ä¸€äº›\n2.9å­—ç¬¦ä¸²æ“ä½œï¼ˆString operationsï¼‰2.9.1 c_strè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œå…¶ä¸»è¦æ˜¯ä¸ºäº†å’ŒCè¯­è¨€çš„ä¸€äº›å‡½æ•°å¯¹åº”ï¼Œæ¯”å¦‚åˆ©ç”¨strcmpæ‹·è´ä¸€ä¸ªstringå¯¹è±¡åˆ°å†…ç½®å­—ç¬¦ä¸²char arr[]ä¸­ã€‚\n\n\n2.9.2 findè¿™é‡Œå¯ä»¥çœ‹åˆ°éå¸¸å¤šç§ç±»çš„æŸ¥æ‰¾å‡½æ•°ï¼ˆå·æ‡’ä¸å†™ç¤ºä¾‹äº†ï¼‰\n\n\nfindå‡½æ•°å¯ä»¥æŸ¥æ‰¾stringä¸­çš„æŸä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›èµ·å§‹ä½ç½®çš„ä¸‹æ ‡\nè¯¥å‡½æ•°é»˜è®¤ä»å¤´å¼€å§‹æŸ¥æ‰¾ï¼Œä½ ä¹Ÿå¯ä»¥å•ç‹¬æŒ‡å®šä»posä½ç½®å¼€å§‹æŸ¥æ‰¾\n\n\n\nå’Œè¿­ä»£å™¨ä¸€æ ·ï¼Œrfindåˆ™æ˜¯ä»æœ«å°¾å¼€å§‹æ‰¾æŒ‡å®šå†…å®¹\n\næœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„å†…å®¹å¹¶ä¸æ˜¯ä»å¤´å¼€å§‹çš„ï¼Œæ‰€ä»¥å°±éœ€è¦ä»å°¾éƒ¨å¼€å§‹æ‰¾ã€‚\n\nsubstræ˜¯ä»æŒ‡å®šposä½ç½®å¼€å§‹è·å–é•¿åº¦ä¸ºlençš„å­ä¸²\n\n\n\n2.10 å¾ˆå¤šæ“ä½œç¬¦é‡è½½stringé‡Œé¢æœ‰éå¸¸å¤šçš„æ“ä½œç¬¦é‡è½½ï¼Œæ”¯æŒå’Œå­—ç¬¦ä¸²ã€å­—ç¬¦ã€å¯¹è±¡è¿›è¡Œå¤§å°å¯¹æ¯”ã€‚è™½ç„¶çœ‹çš„æœ‰ç‚¹éº»äº†ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åªæ˜¯æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚åº•å±‚å®ç°äº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ï¼ˆæˆ‘è¿™æ˜¯ä¸æ˜¯åºŸè¯â€¦ï¼‰\n \nå…¶å®ä¸€éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘å™¨çš„éšå¼ç±»å‹è½¬åŒ–æˆ–è€…ä¸´æ—¶æ„é€ ä¸€ä¸ªstringç±»æ¥å®ç°çš„ï¼Œä½†æ˜¯è®¾è®¡stringçš„å¤§ä½¬ä»¬æ˜¾ç„¶è§‰å¾—å¤šå³æ˜¯å¥½ï¼Œå“ˆå“ˆã€‚\n3.æ¨¡æ‹Ÿå®ç°è¦æƒ³åˆ‡åˆ‡å®å®å¼„æ˜ç™½STLçš„æºç ç»“æ„ï¼Œå…¶ä¸­ä¸€ä¸ªæœ€å¥½çš„åŠæ³•å°±æ˜¯å°è¯•æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªå’Œstdåº“é‡Œé¢stringä½¿ç”¨æ–¹æ³•&#x2F;åŠŸèƒ½ç›¸åŒçš„è½®å­ã€‚\n\næˆ‘çš„stringæ¨¡æ‹Ÿå®ç°æºç å·²ç»æ‰˜ç®¡åˆ°giteeäº†ã€é“¾æ¥ã€‘\n\nå…¶å®stringå’Œvectorå°±æ˜¯ä¸€ä¸ªç®€å•çš„é¡ºåºè¡¨ï¼Œå…¶äºŒè€…çš„åº•å±‚å·®è·ä¸»è¦åœ¨stringåªèƒ½ä¿å­˜å­—ç¬¦ï¼ˆä¸²ï¼‰ï¼Œå½“ç„¶ï¼Œå†…éƒ¨çš„æ¥å£æœ‰ä¸€äº›ç»†å¾®çš„å·®è·ï¼Œè¿™ä¼šåœ¨vectorçš„åšå®¢é‡Œé¢è¿›è¡Œè®²è§£ã€‚\nå¤§éƒ¨åˆ†å‡½æ•°å¯ä»¥ç›´æ¥åœ¨giteeä¸Šé¢æŸ¥çœ‹ï¼Œæˆ‘å†™äº†è¿˜ç®—é è°±çš„æ³¨é‡Šï¼Œæœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨giteeæˆ–è€…æœ¬åšå®¢ä¸‹ç•™è¨€ã€‚\n\n3.1 åˆ©ç”¨æŒ‡é’ˆæ¨¡æ‹Ÿå®ç°è¿­ä»£å™¨ä»stringå¼€å§‹ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦äº†stlä¸­çš„è¿­ä»£å™¨è¿™ä¸€æ–°é²œç©æ„ã€‚\n//åå‘è¿­ä»£å™¨string::reverse_iterator rit = s1.rbegin();//æŒ‡å‘ç»“å°¾å­—ç¬¦ï¼ˆ&#x27;\\0&#x27;ä¹‹å‰ï¼‰//endæŒ‡å‘å¼€å¤´æ•°æ®çš„å‰ä¸€ä¸ªä½ç½®while (rit != s1.rend())&#123;\tcout &lt;&lt; *rit &lt;&lt; &quot; &quot;;\trit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ&#125;cout &lt;&lt; endl;\n\nçœ‹èµ·æ¥å¾ˆç‰›ï¼Œå®é™…ä¸Šå®ƒçš„æ“ä½œå’Œæˆ‘ä»¬è‡ªå·±å†™çš„æŒ‡é’ˆå¤§å·®ä¸å·®ã€‚æˆ‘ä»¬å¤§å¯ä»¥ç›´æ¥ä½¿ç”¨æŒ‡é’ˆæ¥æ¨¡æ‹Ÿå®ç°å‡ºä¸€ä¸ªç›¸åŒåŠŸèƒ½çš„è¿­ä»£å™¨ï¼\n//è¿­ä»£å™¨ç›¸å…³const_iterator begin() const&#123;    return _a;&#125;const_iterator end() const&#123;    return _a + _size;&#125;iterator begin()&#123;    return _a;&#125;iterator end()&#123;    return _a + _size;&#125;//ä»¥ä¸‹æ˜¯stringæ¨¡æ‹Ÿå®ç°ä¸­ç§æœ‰æˆå‘˜å˜é‡private:    char* _a;//å®é™…å­˜æ”¾æ•°æ®    size_t _size;//æœ‰æ•ˆé•¿åº¦    size_t _capa;//å®¹é‡å¤§å°    const static size_t npos;//å£°æ˜\n\nçœ‹å§ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ğŸŒƒè¿™ä¸ªè¿­ä»£å™¨çš„ä½¿ç”¨æ–¹æ³•å’Œé¡ºåºè¡¨ä¸­çš„æŒ‡é’ˆä¸€æ¨¡ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸æ¼”å¼å•¦ï¼æ„Ÿå…´è¶£çš„ä¼™ä¼´å¯ä»¥æŠŠæºç è€ƒä¸‹æ¥è‡ªå·±è¯•è¯•ã€‚\n\n3.2 æ·±æ‹·è´åœ¨ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢ä¸­ï¼Œæˆ‘å·²ç»ç®€å•å®ç°è¿‡ä¸€æ¬¡æ·±æ‹·è´ï¼ˆé“¾æ¥ï¼‰\nå¯¹äºstringæ¥è¯´ï¼Œæ·±æ‹·è´çš„æ“ä½œå’Œåšå®¢é‡Œé¢æ¼”ç¤ºçš„æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡ç»™äºˆæ–°çš„ç©ºé—´ï¼Œç„¶åç”¨strcpyæˆ–è€…memsetæ‹·è´å†…å®¹è¿‡å»ã€‚\n//æ‹·è´æ„é€ string(const string&amp; s)    :_size(s._size),\t_capa(s._capa)&#123;    _a = new char[_capa+1];    strcpy(_a, s._a);&#125;\n\né™¤äº†æ‹·è´æ„é€ ä»¥å¤–ï¼Œèµ‹å€¼é‡è½½åŒæ ·éœ€è¦æ·±æ‹·è´æ“ä½œï¼Œä½†æ˜¯å®ƒçš„æ“ä½œå’Œæ„é€ å‡½æ•°åˆæœ‰äº›ä¸åŒ\n\næ‹·è´æ„é€ æ—¶ï¼Œè¯¥å¯¹è±¡è¿˜ä¸å­˜åœ¨ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ„é€ å‡ºå†…å®¹\nèµ‹å€¼é‡è½½æ—¶ï¼Œè¯¥å¯¹è±¡å¯èƒ½å·²ç»æœ‰è‡ªå·±çš„æ•°æ®ï¼Œéœ€è¦å…ˆé‡Šæ”¾å·²æœ‰çš„æ‰èƒ½è·å–æ–°çš„\n\nè¿™å°±éœ€è¦æˆ‘ä»¬åœ¨èµ‹å€¼é‡è½½çš„æ—¶å€™ï¼Œå…ˆdeleteæ‰åŸæœ¬çš„å†…å®¹ï¼Œå†å»è¿›è¡Œèµ‹å€¼\n//æ·±æ‹·è´èµ‹å€¼é‡è½½string&amp; operator=(const string&amp; s) &#123;    //å’Œæ‹·è´æ„é€ ä¸åŒçš„æ˜¯ï¼Œèµ‹å€¼é‡è½½ä¹‹å‰ï¼Œthiså¯èƒ½å·²ç»æœ‰è‡ªå·±çš„å†…å®¹äº†    //æ‰€ä»¥åœ¨æ‰§è¡Œæ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æŠŠthisè‡ªå·±çš„å†…å®¹å…ˆé‡Šæ”¾æ‰    if (this != &amp;s)//ä¸è¦è‡ªå·±æ‹·è´è‡ªå·±     &#123;        delete[] _a;//åˆ é™¤å·²æœ‰ç©ºé—´        _size = s._size;        _capa = s._capa;        //_a = new char[_capa + 1];//æœ‰ä¸€å®šé£é™©        char* tmp = new char[_capa + 1];        strcpy(tmp, s._a);        _a = tmp;    &#125;&#125;\n\nè¿™æ ·æˆ‘ä»¬çš„èµ‹å€¼é‡è½½ä¾¿ä¹Ÿå®ç°å®Œæ¯•äº†\n3.3 å…³äºinsertå‡½æ•°æ“ä½œå­—ç¬¦å’Œå­—ç¬¦ä¸²çš„åŒºé—´é—®é¢˜å½“æˆ‘ä»¬ä½¿ç”¨insertæ¥å¤„ç†å­—ç¬¦çš„æ—¶å€™ï¼Œéœ€è¦å°†æ’å…¥ä½ç½®ä¹‹åçš„æ•°æ®å¾€åæŒªåŠ¨ã€‚\nè€Œinsertå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåˆ™éœ€è¦æŒªåŠ¨è¯¥å­—ç¬¦ä¸²é•¿åº¦çš„æ•°æ®ã€‚\nè¿™æ—¶å€™å°±éå¸¸å®¹æ˜“å‡ºç°æŒªåŠ¨ä¸å®Œæ•´&#x2F;è¶Šç•Œç­‰ç­‰é—®é¢˜ï¼\nå…³äºinsertä»£ç å¯ä»¥çœ‹giteeä»£ç çš„190-237è¡Œï¼Œå¦‚æœä½ ä¸å¤ªèƒ½ç†è§£è¿™é‡Œçš„ç§»åŠ¨é—®é¢˜ï¼Œæœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯ç”»å›¾ï¼ç”»å›¾ä¼šè®©ä½ æ¸…æ¥šçš„è®¤è¯†åˆ°éœ€è¦ç§»åŠ¨å¤šé•¿ï¼ŒæŒ‡é’ˆåº”è¯¥æŒ‡å‘å“ªé‡Œè¿›è¡Œç§»åŠ¨ã€‚ç†æ¸…æ€è·¯åï¼Œå†™ä»£ç å°±ä¼šå®¹æ˜“å¾ˆå¤šã€‚\n3.4 å…³äºpush_backçš„è¾¹ç•Œæ§åˆ¶é—®é¢˜ä¹‹å‰æˆ‘å®ç°çš„ä»£ç ä¸­ï¼Œå°¾æ’çš„æ—¶å€™æ²¡æœ‰åŠ ä¸Š\\0è¿›è¡Œè¾¹ç•Œæ§åˆ¶\nè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå› ä¸ºæ¨¡æ‹Ÿå®ç°çš„åº•å±‚ç”¨çš„å°±æ˜¯Cè¯­è¨€çš„å­—ç¬¦ä¸²ã€‚åœ¨æ¯ä¸€æ¬¡å°¾æ’ä¹‹åï¼Œéƒ½éœ€è¦ç”¨\\0æ¥æ ‡è®°å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚å¦åœ¨æˆ‘ä»¬æ‹·è´æ„é€ å’Œreserveçš„æ—¶å€™ä½¿ç”¨strcpyå°±ä¼šå‡ºç°è¶Šç•Œé”™è¯¯ã€‚\n\nè¶Šç•Œé”™è¯¯ä¸€èˆ¬éƒ½æ˜¯åœ¨ææ„deleteçš„æ—¶å€™æ£€æŸ¥å‡ºæ¥çš„\n\nvoidÂ push_back(charÂ ch)&#123;\tifÂ (_sizeÂ +Â 1Â &gt;=Â _capa)\t&#123;\t\treserve(_capaÂ ==Â 0Â ?Â 4Â :Â _capaÂ *Â 2);\t\t//è¿™é‡Œçš„åˆ¤æ–­æ˜¯ä¸ºäº†è¾¨åˆ«æ˜¯å¦åœ¨ç©ºå¯¹è±¡å°¾æ’\t&#125; \t_a[_size]Â =Â ch;\t_size++;\t//å› ä¸ºreserveå’ŒåŸºç¡€çš„æ‹·è´æ„é€ ç”¨çš„éƒ½æ˜¯strcpy\t//æ‰€ä»¥å¿…é¡»è¦æœ‰\\0æ¥æ ‡è¯†ç»“å°¾ï¼\t_a[_size]Â =Â &#x27;\\0&#x27;;&#125;\n\n\nç»“è¯­å…³äºstringç±»çš„ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¦‚æœæœ‰ä»€ä¹ˆæ–°å¢å†…å®¹çš„è¯ï¼Œæˆ‘ä¼šå¯¹æœ¬ç¯‡åšå®¢è¿›è¡Œä¿®æ”¹\n\nå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€Pythonã€‘ValueError:Sample larger than population or is negativeçš„åŸå› ","url":"/2023/01/26/note_Python/7ValueError%20Sample%20larger%20than%20population%20or%20is%20negative/","content":"ValueError: Sample larger than population or is negative çš„åŸå› ä»¥åŠè§£å†³åŠæ³•\n\n\n1.å‡ºç°è¿™å‡ å¤©é‡æ„kook-valorant-botçš„ä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°äº†è¿™ä¸ªé—®é¢˜\nJob &quot;vip_roll_task (trigger: interval[0:01:20], next run at: 2023-01-25 19:59:21 CST)&quot; raised an exceptionTraceback (most recent call last):  File &quot;/home/muxue/.local/lib/python3.10/site-packages/apscheduler/executors/base_py3.py&quot;, line 30, in run_coroutine_job    retval = await job.func(*job.args, **job.kwargs)  File &quot;/home/muxue/kook/val-bot/code/main.py&quot;, line 793, in vip_roll_task    ran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;]) - 1), vnum)  File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negativeerror raised during taskTraceback (most recent call last):  File &quot;/home/muxue/.local/lib/python3.10/site-packages/apscheduler/executors/base_py3.py&quot;, line 30, in run_coroutine_job    retval = await job.func(*job.args, **job.kwargs)  File &quot;/home/muxue/kook/val-bot/code/main.py&quot;, line 793, in vip_roll_task    ran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;]) - 1), vnum)  File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negative\n\nè¿™éƒ¨åˆ†ä»£ç æ˜¯ç”¨æ¥ç”ŸæˆæŠ½å¥–ç»“æœçš„éšæœºæ•°çš„ï¼Œåœ¨ç½‘ä¸Šç™¾åº¦äº†æŠ¥é”™ä¹‹åï¼Œå¾—çŸ¥æ˜¯randomç”Ÿæˆéšæœºæ•°æ—¶äº§ç”Ÿçš„æŠ¥é”™\n2.å¤ç°æ‰¾åˆ°å¯¹åº”çš„ä»£ç \nran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;])-1), vnum) # ç”Ÿæˆnä¸ªéšæœºæ•°\n\nè¿™ä¸ªä»£ç çš„ä½œç”¨æ˜¯ï¼Œç”Ÿæˆvnumä¸ªä»0åˆ°len(VipRollDcit[msg_id][&#39;user&#39;]) - 1çš„éšæœºæ•°ï¼Œä¸åŒ…å«len(VipRollDcit[msg_id][&#39;user&#39;])-1\n\nå’³å’³ï¼Œè¿™é‡Œåˆå‘ç°äº†å¦å¤–ä¸€ä¸ªbugï¼šæˆ‘ä»¥ä¸ºæ˜¯åŒ…å«å³è¾¹ç•Œçš„ï¼Œæ‰€ä»¥æ‰‹åŠ¨-1äº†ï¼›ç°åœ¨å¯¼è‡´æœ€åä¸€ä¸ªå‚åŠ æŠ½å¥–çš„ç”¨æˆ·æ°¸è¿œéƒ½æŠ½ä¸åˆ°å¥–äº†ğŸ˜¥\næ­£ç¡®çš„rangeåº”è¯¥æ˜¯(0, len(VipRollDcit[msg_id][&#39;user&#39;]))\n\nä½†æ˜¯ï¼Œå¦‚æœå‚ä¸æŠ½å¥–çš„äººæ•°å°‘äºvnumï¼Œå°±ä¼šå‡ºç°ä¸Šé¢çš„æŠ¥é”™\nimport randomran = random.sample(range(0, 2), 3) \n\nå¯ä»¥æ¥ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘æƒ³åœ¨0åˆ°2ä¹‹é—´ï¼ˆå…¶å®å°±æ˜¯0,1ï¼‰ç”Ÿæˆ3ä¸ªéšæœºæ•°\n$ py3 test1.pyTraceback (most recent call last):  File &quot;/home/muxue/kook/test/global_val_test/test1.py&quot;, line 16, in &lt;module&gt;    ran = random.sample(range(0, 2), 3)   File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negative\n\næ­¤æ—¶è¿è¡Œï¼Œå°±ä¼šæœ‰è¿™æ ·çš„æŠ¥é”™ã€‚\nå› ä¸ºè¿™ä¸ªå†™æ³•çš„ä½œç”¨æ˜¯åœ¨0-2ä¹‹é—´äº§ç”Ÿä¸é‡å¤çš„éšæœºæ•°ï¼Œä½ çš„ç›®æ ‡æ•°é‡éƒ½å¤§äºè¿™ä¸ªé›†åˆä¹‹ä¸­å·²æœ‰æ•°æ®çš„æ•°é‡äº†ï¼Œé‚£è¦æ€ä¹ˆç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°å‘¢ï¼Ÿ\n3.è§£å†³è§£å†³åŠæ³•å¾ˆç®€å•\n\nå³è¾¹ç•Œä¸èƒ½ç­‰äºæˆ–è€…å°äºå·¦è¾¹ç•Œ\näº§ç”Ÿéšæœºæ•°çš„æ•°é‡è¦å°äºè¾¹ç•Œä¹‹ä¸­æ•°æ®çš„æ•°é‡\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹è¾¹ç•Œï¼Œå°±èƒ½è·å¾—æ­£ç¡®çš„ç»“æœ\nimport randomran = random.sample(range(0, 3), 3) print(ran)\n\nè¿è¡Œ\n$ py3 test1.py[0, 2, 1]\n\nå¯¹äºæˆ‘çš„æŠ½å¥–ä»£ç è€Œè¨€ï¼Œåˆ™éœ€è¦é‡æ–°æ“ä½œä¸€ç•ªã€‚å³å¯èƒ½å‡ºç°å¥–å“æ•°é‡å¤§äºå‚ä¸æŠ½å¥–çš„äººæ•°çš„æƒ…å†µï¼›\nè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œåˆ¤æ–­äº†\n\nå¥–å“æ•°é‡å°‘äºæŠ½å¥–äººæ•°ï¼Œä½¿ç”¨randomç”Ÿæˆéšæœºæ•°\nå¥–å“æ•°é‡å¤§äºæŠ½å¥–äººæ•°ï¼ŒæŠ›å¼ƒå¤šä½™å¥–å“ï¼Œç›´æ¥ç”Ÿæˆä¸€ä¸ªä»0åˆ°æ€»äººæ•°çš„åˆ—è¡¨\nå¥–å“æ•°é‡ç­‰äºæŠ½å¥–äººæ•°ï¼Œä¸Šé¢ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥ç”¨\n\nä»£ç å¦‚ä¸‹\n# äººæ•°å¤§äºå¥–å“æ•°é‡if len(VipRollDcit[msg_id][&#x27;user&#x27;])&gt;vnum: \tran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;])), vnum) # ç”Ÿæˆvnumä¸ªéšæœºæ•°else: # ç”Ÿæˆä¸€ä¸ªä»0åˆ°len-1çš„åˆ—è¡¨ å¦‚æœåªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œç”Ÿæˆçš„æ˜¯[0]\tran = list(range(len(VipRollDcit[msg_id][&#x27;user&#x27;])))\n\nè¿™æ—¶å€™å°±okäº†ï¼Œæ²¡æœ‰é—®é¢˜äº†\n","categories":["é€Ÿé€šPython"],"tags":["é˜¿ç‹¸å¼€å‘æ—¥å¿—","Python"]},{"title":"ã€C++ã€‘STLï¼švector","url":"/2022/07/15/note_cpp/11STL_Vector/","content":"STLçš„ç¬¬äºŒç«™ï¼Œä¾¿æ˜¯vectoräº†ã€‚\n\n\nå¯¹äºå­¦ä¹ STLï¼Œæœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„ä¾¿æ˜¯ï¼Œå®ƒä»¬æœ‰å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç›¸é€šçš„ï¼è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„ä¸€å¤§å¥½å¤„ï¼šèƒŒåçš„å‡½æ•°å®ç°å¯èƒ½ä¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ–¹å¼ç›¸åŒã€‚\n1.ç®€å•äº†è§£vector\nhttps://m.cplusplus.com/reference/vector/vector/\n\nè€æ ·å­ï¼Œæ‰“å¼€æˆ‘ä»¬çš„cplusplusâ€”â€”ç„¶åæƒŠå¥‡çš„å‘ç°ï¼Œå®ƒæ¢UIäº†ï¼ç»ˆäºä¸å†æ˜¯é‚£ä¸ª2000å¹´åˆçš„æ¨¡æ ·äº†ï¼ˆè™½ç„¶è¿™å’Œæˆ‘ä»¬çš„ä½¿ç”¨æ²¡å•¥å…³ç³»ï¼‰\n\nä¸æ‘¸é±¼äº†ï¼Œæ¥çœ‹çœ‹vectorç©¶ç«Ÿæ˜¯ä½•æ–¹ç¥åœ£â€”â€”å…¶å®ä»–å°±æ˜¯ä¸€ä¸ªé¡ºåºè¡¨\nå’Œstringä¸åŒçš„æ˜¯ï¼Œvectoræœ‰æ¨¡æ¿å‚æ•°ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å†…å®¹ã€‚intã€doubleã€charã€ç”šè‡³stringã€‚\nè¿™ä¸€ç‚¹åœ¨cplusplusç½‘ç«™ä¸Šçš„ç¬¬ä¸€è¡Œä¾¿å‘Šè¯‰äº†æˆ‘ä»¬\n\ntemplate &lt; class T, class Alloc = allocator&lt;T&gt; &gt; class vector; // generic template\n\nä½ è¿˜å¯ä»¥çœ‹åˆ°ï¼Œæ ‡é¢˜ä¸‹æ–¹ç»™äº†ä¸€ä¸ªè¿™æ ·çš„ç±»æ¨¡æ¿å®šä¹‰ï¼Œå…¶ä¸­Tä»£è¡¨çš„æ˜¯å­˜æ”¾æ•°æ®ç±»å‹ï¼Œallocator&lt;T&gt;ä¹Ÿæ˜¯STLåº“ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå‘å †ç”³è¯·ç©ºé—´ï¼ˆç±»ä¼¼ä¸€ä¸ªå†…å­˜æ± ï¼‰å¯ä»¥æé«˜è®¿é—®çš„æ•ˆç‡\nå‰æœŸçš„å­¦ä¹ æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“allocator&lt;T&gt;æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œåªè¦çŸ¥é“å®ƒæœ‰è¿™ä¸ªåŠŸèƒ½å°±okäº†ã€‚\n\n1.1å‡½æ•°æ¥å£å¾€ä¸‹æ»‘ï¼Œä½ ä¼šå‘ç°vectorçš„å‡½æ•°æ¥å£ï¼Œæˆ‘ä»¬å¾ˆå¤šéƒ½å·²ç»å­¦è¿‡äº†ï¼\n\nè¿™äº›å‡½æ•°çš„æ“ä½œå’Œstringç±»å‹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸å†è®²è§£äº†ï¼\n\nå¯¹æ¯”å‘ç°ï¼Œå…¶å®vectorå¤šå‡ºæ¥çš„å‡½æ•°å¹¶ä¸å¤šï¼Œè¿™ä¾¿æ˜¯å­¦ä¹ STLçš„å¥½å¤„ï¼\n\n2.ä½¿ç”¨vectorå› ä¸ºå¤§éƒ¨åˆ†å‡½æ•°çš„åŠŸèƒ½ã€æ“ä½œå’Œstringä¸€æ ·ï¼Œæœ‰é—®é¢˜å¯ä»¥å»çœ‹çœ‹æˆ‘ä¹‹å‰stringçš„åšå®¢\n2.1æ„é€ \nå¯¹äºvectorè€Œè¨€ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ„é€ å‡½æ•°æ˜¯ä¸‹é¢è¿™å‡ ä¸ª\n\nè¿™é‡Œè¯´è¯´æœ€åä¸€ä¸ªï¼Œåˆ©ç”¨è¿­ä»£å™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ƒçš„ä½¿ç”¨å¦‚ä¸‹\nstd::string s1(&quot;hello&quot;);vector&lt;char&gt; v2(s1.begin(),s1.end());for (auto ch : v2)&#123;\tcout &lt;&lt; ch &lt;&lt; &quot; &quot;;&#125;cout &lt;&lt; endl;\n\nå½“æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªå…¶ä»–çš„æ”¯æŒè¿­ä»£å™¨çš„å®¹å™¨ä¹‹åï¼Œä¾¿å¯ä»¥ä½¿ç”¨è¯¥å®¹å™¨çš„è¿­ä»£å™¨åˆå§‹åŒ–ä¸€ä¸ªvector\nè¿™é‡Œçš„åŒºé—´å¯ä»¥è‡ªè¡Œæ§åˆ¶ï¼Œå¯¹åº”çš„åˆå§‹åŒ–çš„å†…å®¹ä¹Ÿä¼šæœ‰æ‰€ä¸åŒ\n\n\n2.2è¿­ä»£å™¨vectorçš„è¿­ä»£å™¨å’ŒstringåŸºæœ¬ç›¸åŒï¼Œéƒ½æ‹¥æœ‰æ­£å‘å’Œåå‘ä¸¤ç§æ–¹å¼\n\n\n\nè¿­ä»£å™¨\nè¯´æ˜\n\n\n\nbegin+end\nè·å–ç¬¬ä¸€ä¸ªæ•°æ®ä½ç½®iterator&#x2F;const_iteratorï¼Œ è·å–æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®iterator&#x2F;const_iterator\n\n\nrbegin+rend\nè·å–æœ€åä¸€ä¸ªæ•°æ®ä½ç½®çš„reverse_iteratorï¼Œè·å–ç¬¬ä¸€ä¸ªæ•°æ®å‰ä¸€ä¸ªä½ç½®çš„ reverse_iterator\n\n\n\nvector&lt;int&gt;::iterator it = v.begin(); while (it != v.end()) &#123;     cout &lt;&lt; *it &lt;&lt; &quot; &quot;;     ++it; &#125;\n\nåˆ©ç”¨è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°vectorçš„å†…å®¹\n2.3è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜åœ¨vectorä¸­çš„ä¸€äº›æ“ä½œä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œå³è¿­ä»£å™¨æŒ‡å‘çš„å†…å®¹å«ä¹‰å˜äº†ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼š\n\nå› ä¸ºeraseå¯¼è‡´çš„æ•°æ®æ“¦é™¤\næ‰©å®¹å¯¼è‡´çš„åŸæœ‰ç©ºé—´è¢«é‡Šæ”¾ï¼ˆæ­¤æ—¶è¿­ä»£å™¨ä¾æ—§æŒ‡å‘åŸæœ‰ç©ºé—´ï¼‰\næ‰€æœ‰ä¼šå¯¼è‡´æ‰©å®¹çš„æ“ä½œ\n\nè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å€ŸåŠ©å‡½æ•°çš„è¿”å›å€¼å¯¹itè¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œæ¯”å¦‚ä¸‹å›¾æ˜¯eraseå’Œinsertçš„è¿”å›å‚æ•°\n\n\næˆ‘ä»¬åªéœ€è¦åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†çš„æ—¶å€™ç”¨itæ¥æ¥å—è¿”å›å€¼ï¼ˆæ›´æ–°è¿­ä»£å™¨ï¼‰å°±å¯ä»¥è§„é¿è¿™ä¸ªé—®é¢˜\nvoid test02()&#123;    vector&lt;int&gt; v1;    v1.push_back(1);    v1.push_back(2);    v1.push_back(3);    v1.push_back(4);    v1.push_back(5);    v1.push_back(6);    v1.push_back(7);    vector&lt;int&gt;::iterator it = v1.begin();    while (it != v1.end())    &#123;        if (*it % 2 == 0)//åœ¨å¶æ•°ä¹‹å‰æ’å…¥å†…å®¹        &#123;            //ä¸è¿™æ ·å†™ä¼šå‡ºç°itçš„å«ä¹‰å˜åŒ–è€Œå¯¼è‡´çš„æ­»å¾ªç¯            //ç¨‹åºå†…å‡ºç°äº†æ‰©å®¹ï¼ŒitåŸå…ˆæŒ‡å‘çš„ç©ºé—´å·²ç»è¢«é‡Šæ”¾            it = v1.insert(it, 99);\t            it++;        &#125;        it++;    &#125;    for (auto ch : v1)    &#123;        cout &lt;&lt; ch &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; endl;&#125;\n\n\n\nåº“é‡Œé¢çš„å…¶ä»–å‡½æ•°å°±ä¸è¿›è¡Œè®²è§£å•¦ï¼Œæœ‰é—®é¢˜çš„å¯ä»¥å»çœ‹çœ‹ä¹‹å‰stringçš„åšå®¢ã€‚å½“ç„¶æœ€å¥½çš„å­¦ä¹ åŠæ³•å°±æ˜¯ä¾æ®cplusplusä¸Šé¢çš„å‡½æ•°å®šä¹‰ï¼Œå°è¯•è‡ªå·±å¼„æ˜ç™½è¿™äº›åº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚\n\n3.æ¨¡æ‹Ÿå®ç°\nä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“ã€é“¾æ¥ã€‘STL-Vectorçš„æºç ä¹Ÿåœ¨é‡Œé¢ï¼\n\nå’Œstringç±»ä¸åŒçš„æ˜¯ï¼Œåœ¨vectoré‡Œé¢å¹¶ä¸æ˜¯ç”¨sizeå’Œcapacityè¿™ä¸¤ä¸ªæˆå‘˜å˜é‡æ¥ç¡®è®¤æœ‰æ•ˆé•¿åº¦å’Œå®¹é‡çš„ã€‚\né€šè¿‡æŸ¥çœ‹stlæºç å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä½¿ç”¨äº†3ä¸ªè¿­ä»£å™¨è¿›è¡Œæ ‡è¯†\n\nprivate:    iterator _start;//æŒ‡å‘å¼€å¤´ï¼ˆå­˜æ”¾æ•°æ®ï¼‰    iterator _finish;//æŒ‡å‘ç»“å°¾çš„ä¸‹ä¸€ä¸ª    iterator _endofstorage;//æŒ‡å‘ç©ºé—´å°¾éƒ¨\n\näº†è§£ç»“æ„åï¼Œä¾¿å¯ä»¥å…ˆæŠŠæ— å‚æ„é€ å’Œææ„å‡½æ•°å†™å‡ºæ¥å¾…ç”¨\n//æ— å‚æ„é€ å‡½æ•°vector()    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123; &#125;//ææ„~vector()&#123;    if (_start)    &#123;        delete[] _start;        _start = _finish = _endofstorage = nullptr;    &#125;&#125;\n\né‚£ä¹ˆè¦æ€ä¹ˆçŸ¥é“sizeå’Œcapacityçš„å¤§å°å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œé€šè¿‡æŒ‡é’ˆç›¸å‡å³å¯å¾—å‡ºç»“æœ\nsize_t size()const&#123;    return _finish - _start;&#125;size_t capacity()const&#123;    return _endofstorage - _start;&#125;\n\n3.0 è¿­ä»£å™¨åœ¨æ¨¡æ‹Ÿå®ç°ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦ç”¨typdefå®šä¹‰ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œæ–¹ä¾¿åé¢çš„ä½¿ç”¨\ntypedef T* iterator;typedef const T* const_iterator;iterator begin()&#123;    return _start;&#125;iterator end() &#123;    return _finish;&#125;const_iterator begin()const &#123;    return _start;&#125;const_iterator end()const &#123;    return _finish;&#125;\n\n3.1 reserve&#x2F;resizeç°åœ¨æˆ‘ä»¬çš„vectorå†…å®¹è¿˜æ˜¯ç©ºç©ºçš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®ç°ä¸€ä¸‹push_backå‡½æ•°ï¼Œå¯ä»¥åŸºæœ¬æ“ä½œä¸€ä¸‹æˆ‘ä»¬çš„æ•°æ®ã€‚ä½†æ²¡æœ‰æ„é€ å‡½æ•°å»ç”³è¯·ç©ºé—´ï¼Œå“ªæ¥çš„ç›®æ ‡ç»™æˆ‘ä»¬æ“ä½œå‘¢ï¼Ÿ\n\nè¿™æ—¶å€™å°±éœ€è¦å…ˆå®ç°reserveæ¥æ‰©å®¹å’Œè·å–ç©ºé—´äº†ï¼\n\nåœ¨æ‰©å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è·å–åŸæœ‰æ•°æ®çš„é•¿åº¦ï¼Œå†newå°†ç©ºé—´æ•´å‡ºæ¥ï¼Œå¹¶ç»™_startã€‚æ“ä½œç»“æŸåï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹_finish å’Œ_endofstorageï¼Œå¦åˆ™è¿™ä¸¤ä¸ªè¿­ä»£å™¨æŒ‡å‘çš„è¿˜æ˜¯åŸæœ‰ç©ºé—´ï¼Œå‡ºç°äº†è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜\nvoid reserve(size_t n)//æ‰©å®¹&#123;    size_t sz = size();//è®¡ç®—åŸæœ‰çš„é•¿åº¦    if( n &gt; capacity())    &#123;        T* tmp = new T[n];        if (_start) //åªæœ‰_startä¸ä¸ºç©ºæ‰è¿›è¡Œæ‹·è´æ“ä½œ        &#123;            //memcpyæ˜¯æµ…æ‹·è´ï¼Œå½“é‡åˆ°vectorç±»å‹æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼ˆæ¯”å¦‚stringå’Œvector&lt;T&gt;è¿™ç§åŒ…å«å †åŒºå†…å­˜çš„ç±»å‹ï¼‰            //æµ…æ‹·è´ä¼šå¤±æ•ˆï¼Œstringçš„æˆå‘˜å˜é‡æ‹·è´è¿‡å»äº†ï¼Œä½†æ˜¯æˆå‘˜å˜é‡æŒ‡å‘çš„å †åŒºç©ºé—´è¢«é‡Šæ”¾ï¼Œå‡ºç°é‡æŒ‡é’ˆ            //memcpy(tmp, _start, size());            for (size_t i = 0; i &lt; size(); i++)            &#123;                tmp[i] = _start[i];//æ‰‹åŠ¨èµ‹å€¼ï¼Œå½“æˆå‘˜æ˜¯è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨=é‡è½½            &#125;            delete[] _start;//é‡Šæ”¾åŸæœ‰ç©ºé—´        &#125;        _start = tmp;    &#125;    //è¿™é‡Œå¿…é¡»è¦å…ˆè®¡ç®—szï¼Œå¦‚æœåœ¨è¿™é‡Œç›´æ¥è°ƒç”¨szçš„è¯ï¼šfinishå·²ç»æ˜¯é‡æŒ‡é’ˆäº†ï¼Œfinish-startä¼šå‡ºç°é—®é¢˜    _finish = _start + sz;    _endofstorage = _start + n;&#125;\n\nå…³äºä¸ºä½•æ‹·è´å†…å®¹çš„æ—¶å€™éœ€è¦ç”¨&#x3D;è€Œä¸èƒ½ç›´æ¥memcpyï¼Œåæ–‡ä¼šæåˆ°ã€‚\nresizeå’Œreserveå”¯ä¸€ä¸åŒçš„ä¸€ç‚¹ï¼Œå°±æ˜¯reserveä¼šä¿®æ”¹åŸæœ‰ç©ºé—´çš„æ•°æ®ï¼Œå…¶ä½™çš„å®ç°æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥è¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥å¤ç”¨reserveè¿›è¡Œæ‰©å®¹å³å¯\n//åœ¨C++ä¸­ï¼Œå†…ç½®ç±»å‹ä¹Ÿæœ‰ä¸€ä¸ªâ€œæ„é€ å‡½æ•°â€//è¿™æ˜¯ä¸ºäº†æ›´å¥½çš„æ”¯æŒæ¨¡æ¿æ“ä½œvoid resize(size_t n,T val = T())&#123;    if (n &gt; capacity())    &#123;        reserve(n);    &#125;    if (n &gt; size())    &#123;        //åˆå§‹åŒ–        while (_finish &lt; _start + n)        &#123;            *_finish = val;            ++_finish;        &#125;    &#125;    else    &#123;        _finish = _start + n;    &#125;&#125;\n\næ³¨æ„ï¼ŒT()çš„å«ä¹‰æ˜¯ç”¨æ¨¡æ¿å‚æ•°çš„æ„é€ å‡½æ•°ä½œä¸ºç¼ºçœå€¼ã€‚åœ¨C++ä¸­ï¼Œå†…ç½®ç±»å‹ä¹Ÿå¯ä»¥è¿›è¡Œè¿™ä¸ªæ“ä½œ\n\nå½“ä½ ä¸è¿›è¡Œä¼ å€¼çš„æ—¶å€™ï¼Œintç±»å‹é»˜è®¤æ˜¯0\n\n3.2æ’å…¥&#x2F;åˆ é™¤ç©ºé—´æ‹¿åˆ°äº†ï¼Œç°åœ¨å°±å¯ä»¥å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œæ’å…¥æ“ä½œäº†\nvoid push_back(const T&amp; x)&#123;    if (_finish == _endofstorage)     &#123;        size_t newcapa = capacity() == 0 ? 4 : capacity() * 2;        reserve(newcapa);    &#125;    *_finish = x;    _finish++;&#125;void pop_back()&#123;    if (_finish &gt; _start)     &#123;\t\t_finish--;\t&#125;&#125;\n\nç®€å•æµ‹è¯•ä¸€ä¸‹æ’å…¥å’Œåˆ é™¤åŠŸèƒ½ï¼Œæ²¡å•¥é—®é¢˜\n\næ›´å¥½çš„åŠæ³•ï¼Œå…¶å®æ˜¯å†™å¥½insertå’Œearseï¼Œç„¶åå°¾æ’å°¾åˆ çš„æ—¶å€™ç›´æ¥å¤ç”¨å³å¯\n//posä½ç½®æ’å…¥valiterator insert(iterator pos, const T x)&#123;    assert(pos &gt;= _start &amp;&amp; pos &lt;= _finish);    //assert(pos &gt;= _start &amp;&amp; pos &lt;= _endofstorage);    if (_finish == _endofstorage)    &#123;        size_t n = pos - _start;        size_t newcapa = capacity() == 0 ? 4 : capacity() * 2;        reserve(newcapa);        pos = _start + n;    &#125;    iterator end = _finish - 1;    while (end &gt;= pos)    &#123;        *(end + 1) = *end;        end--;    &#125;    *pos = x;    _finish++;    return pos;&#125;//åˆ é™¤æ•°æ®iterator erase(iterator pos)&#123;    assert(pos &gt;= _start &amp;&amp; pos &lt;= _finish);    iterator tmp = pos;    iterator end = _finish - 1;    while (tmp &lt; end)    &#123;        *tmp = *(tmp + 1);        tmp++;    &#125;    _finish--;    return pos;&#125;\n\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬åªéœ€è¦æ“ä½œä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ‹…å¿ƒç§»åŠ¨å¤šä¸ªæ•°æ®å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼Œäº‹æƒ…ä¹Ÿå˜å¾—ç®€å•å¤šäº†\nvoid push_back(const T&amp; x)&#123;    insert(end(),x);&#125;void pop_back()&#123;    erase(end()-1);&#125;\n\nå°¾æ’å°¾åˆ æ“ä½œç›´æ¥å¤ç”¨æºç å³å¯\n3.3é‡è½½[ ]æ“ä½œç¬¦å› ä¸ºvectoræœ¬èº«åªæ˜¯ä¸ªé¡ºåºè¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å®ƒçš„å¯¹è±¡é‡è½½ä¸€ä¸‹[]æ“ä½œç¬¦ï¼Œè¿™æ ·å°±èƒ½å’Œæ•°ç»„ä¸€æ ·å»è®¿é—®vectorçš„æ•°æ®\n//é‡è½½[]æ“ä½œç¬¦T&amp; operator[](size_t pos)&#123;    assert(pos &lt; size());    return _start[pos];&#125;const T&amp; operator[](size_t pos) const&#123;    assert(pos &lt; size());    return _start[pos];&#125;\n\n\nå…³äºæ„é€ å‡½æ•°ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹è¿­ä»£å™¨åŒºé—´çš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºåé¢çš„æ‹·è´æ„é€ æˆ‘ä»¬ä¼šç”¨ä¸Šå®ƒã€‚\n3.4è¿­ä»£å™¨åŒºé—´æ„é€ &#x2F;æ‹·è´&#x2F;èµ‹å€¼åº“é‡Œé¢å…³äºè¯¥æ„é€ å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹\ntemplate &lt;class InputIterator&gt;   vector (InputIterator first, InputIterator last,           const allocator_type&amp; alloc = allocator_type());\n\nå› ä¸ºè¿™æ—¶å€™æˆ‘çš„æ°´å¹³è¿˜å¾ˆåƒï¼Œå°±æš‚ä¸”ä¸ç®¡è¿™ä¸ª allocatoräº†\nè¯¥å‡½æ•°éœ€è¦æˆ‘ä»¬ä¼ å‚ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œå› ä¸ºæˆ‘ä»¬åº•å±‚å°±æ˜¯ç”¨æŒ‡é’ˆå®ç°çš„ï¼Œæ‰€ä»¥ç›´æ¥è§£å¼•ç”¨ç„¶åå°†å†…å®¹å°¾æ’å³å¯ï¼ˆå¦‚æœæ²¡æœ‰ç©ºé—´ï¼Œå°¾æ’ä¼šè°ƒç”¨reserveæ¥è·å–ç©ºé—´&#x2F;æ‰©å®¹ï¼‰\ntemplate &lt;class InputIterator&gt;vector(InputIterator first, InputIterator last)    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    while (first != last)    &#123;        push_back(*first);        first++;    &#125;&#125;\n\næœ‰äº†è¿™ä¸ªæ„é€ å‡½æ•°åï¼Œæ‹·è´æ„é€ å°±å¾ˆå®¹æ˜“äº†ï¼\nvoid swap(vector&lt;T&gt;&amp; v)&#123;    std::swap(_start, v._start);    std::swap(_finish, v._finish);    std::swap(_endofstorage, v._endofstorage);&#125;//æ‹·è´æ„é€ vector(const vector&lt;T&gt;&amp; v)    :_start(nullptr),_finish(nullptr),_endofstorage(nullptr)&#123;    vector&lt;T&gt; tmp(v.begin(), v.end());    swap(tmp);&#125;\n\nåˆ©ç”¨è¿­ä»£å™¨åŒºé—´æ„é€ å‡ºæ¥ä¸€ä¸ªtmpå¯¹è±¡ï¼Œå†å°†è¯¥å¯¹è±¡å’Œæˆ‘ä»¬æœ¬èº«è¿›è¡Œäº¤æ¢å³å¯ï¼\n\nä½ å¯èƒ½ä¼šé—®ï¼šæ¬¸ä½ è¿™æ ·äº¤æ¢äº†ï¼ŒåŸæœ¬çš„å†…å®¹å²‚ä¸æ˜¯æ²¡äººç®¡äº†ï¼Œæœ‰å†…å­˜æ³„æ¼å•Šï¼\n\nå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨åº“å‡½æ•°é‡Œé¢çš„swapäº¤æ¢äº†äºŒè€…çš„æˆå‘˜å˜é‡ï¼Œåœ¨æ‹·è´æ„é€ å‡½æ•°å®Œæˆä¹‹åï¼Œtmpç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å¤„ç†æ‰æˆ‘ä»¬çš„æ•°æ®ï¼\nè¿™å°±æ˜¯è®©åˆ«äººå¸®ä½ å¹²æ´»ğŸ˜‚\nèµ‹å€¼é‡è½½å°±è·Ÿç®€å•äº†ï¼Œæˆ‘ä»¬è¿tmpå˜é‡éƒ½ä¸éœ€è¦å¼„ï¼Œç›´æ¥ä½¿ç”¨ä¼ å€¼ï¼ˆä¼šè‡ªåŠ¨è°ƒç”¨æ‹·è´æ„é€ ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼‰å°±å¯ä»¥å•¦ï¼\n//èµ‹å€¼é‡è½½ï¼ˆvæ²¡æœ‰å¼•ç”¨ï¼Œæ‹·è´æ„é€ ä¸€ä¸ªæ–°çš„ä¼ å‚è¿‡æ¥ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨å†æ„å»ºä¸€ä¸ªtmpï¼‰vector&lt;T&gt;&amp; operator=(vector&lt;T&gt; v)&#123;    swap(v);    return *this;&#125;\n\n3.5ç”¨nä¸ªvalueè¿›è¡Œæ„é€ åœ¨åº“ä¸­çš„vectorè¿˜æœ‰ä¸€ä¸ªè¿™æ ·çš„æ„é€ å‡½æ•°ï¼Œç”¨nä¸ªvalè¿›è¡Œåˆå§‹åŒ–\n\nå› ä¸ºæˆ‘ä»¬ä¹‹å‰å·²ç»å®ç°äº†ä¸€ä¸ªç›¸å…³åŠŸèƒ½çš„å‡½æ•°resizeï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨resizeå°±å¯ä»¥å®Œæˆè¿™ä¸ªæ“ä½œï¼\n//åˆ©ç”¨nä¸ªvalè¿›è¡Œæ„é€ vector(size_t n, const T&amp; val = T())    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    resize(n, val);&#125;\n\nåªå®ç°ä¸€ä¸ªvector(size_t n, const T&amp; val = T())çš„ç‰ˆæœ¬æ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†ä¸€ç§æƒ…å†µ\nvector&lt;char&gt; v1(10,&#x27;x&#x27;)//å¯ä»¥æˆåŠŸè°ƒç”¨vector&lt;int&gt;  v2(10,11) //ä¸èƒ½æˆåŠŸè°ƒç”¨ï¼ \n\n\nä¸ºå•¥ç¬¬äºŒç§æƒ…å†µä¸è¡Œå‘¢ï¼Ÿå†æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä¹‹å‰å®ç°è¿‡çš„è¿­ä»£å™¨åŒºé—´æ„é€ \ntemplate &lt;class InputIterator&gt;vector(InputIterator first, InputIterator last)\n\nä½ ä¼šå‘ç°ï¼Œå½“æˆ‘ä»¬ä¼ çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯intç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥è°ƒç”¨è¿™ä¸ªæ¨¡æ¿å‡½æ•°ï¼å› ä¸ºfirstå’Œlastå°±æ˜¯ä¸¤ä¸ªç›¸åŒç±»å‹çš„å‚æ•°ï¼\né€šè¿‡è°ƒè¯•ä¹Ÿå¯ä»¥çœ‹åˆ°åœ¨è¿›è¡Œæ„é€ çš„æ—¶å€™ï¼Œè°ƒç”¨äº†è¿™ä¸ªè¿­ä»£å™¨åŒºé—´æ„é€ å‡½æ•°\n\nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å¯¹intç±»å‹å•ç‹¬å¤„ç†ä¸€ä¸‹ï¼Œä¿®æ”¹ä¸€ä¸‹ä¼ å‚å³å¯\n//å¦‚æœä¸å•ç‹¬é‡è½½ä¸€ä¸ªintç±»å‹ç‰ˆæœ¬ï¼Œå°±ä¼šè¢«è¯†åˆ«æˆä¸Šé¢çš„æ¨¡æ¿å‡½æ•°//intæ˜¯ä¸èƒ½å½“ä½œè¿­ä»£å™¨è¿›è¡Œè§£å¼•ç”¨çš„ï¼Œä¼šæŠ¥é”™vector(int n, const T&amp; val = T())    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    resize(n,val);&#125;\n\n\nè¿™ä¸ªé—®é¢˜æ˜¯æ€ä¹ˆå‘ç°å¹¶è§£å†³çš„ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹stlæºç ï¼Œç…ç…åº“é‡Œé¢æ˜¯æ€ä¹ˆå®ç°çš„\n\nå¯ä»¥çœ‹åˆ°åº“é‡Œé¢ä¸ä½†é‡è½½äº†ä¸€ä¸ªintç±»å‹çš„ç‰ˆæœ¬ï¼Œè¿˜é‡è½½äº†longé•¿æ•´å‹çš„æƒ…å†µ\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ¨¡æ‹Ÿå®ç°å°±åŸºæœ¬å®Œæˆäº†ï¼\n\n3.6å…³äºè‡ªå®šä¹‰ç±»å‹çš„æ‹·è´é—®é¢˜ä¸ºä»€ä¹ˆåœ¨3.1çš„reserveå®ç°ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†èµ‹å€¼é‡è½½ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨memcpyï¼Ÿ\næ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªOJé¢˜ç›®æ¨è¾‰ä¸‰è§’çš„ä»£ç \n\nleetcode118æ¨è¾‰ä¸‰è§’ï¼šhttps://leetcode.cn/problems/pascals-triangle/submissions/\n\nclass Solution &#123;\tpublic:\t\tvector&lt;vector&lt;int&gt;&gt; generate(int numRows) &#123;\t\t\tvector&lt;vector&lt;int&gt;&gt; vv;\t\t\tvv.resize(numRows);\t\t\tfor (size_t i = 0; i &lt; vv.size(); ++i)\t\t\t&#123;\t\t\t\t// æ¨è¾‰ä¸‰è§’ï¼Œæ¯è¡Œä¸ªæ•°ä¾æ¬¡é€’å¢\t\t\t\tvv[i].resize(i + 1, 0);\t\t\t\t// ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªåˆå§‹åŒ–æˆ1\t\t\t\tvv[i][0] = 1;\t\t\t\tvv[i][vv[i].size() - 1] = 1;\t\t\t&#125;\t\t\tfor (size_t i = 0; i &lt; vv.size(); ++i)\t\t\t&#123;\t\t\t\tfor (size_t j = 0; j &lt; vv[i].size(); ++j)\t\t\t\t&#123;\t\t\t\t\tif (vv[i][j] == 0)\t\t\t\t\t&#123;\t\t\t\t\t\t// ä¸­é—´ä½ç½®ç­‰äºä¸Šä¸€è¡Œj-1 å’Œ jä¸ªç›¸åŠ \t\t\t\t\t\tvv[i][j] = vv[i - 1][j - 1] + vv[i - 1][j];\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t&#125;\t\t\treturn vv;\t\t&#125;\t&#125;;\n\nåœ¨è¿™é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸¤å±‚vectorè¿›è¡ŒåµŒå¥—ä½¿ç”¨ï¼Œå¤–å±‚çš„vectorå­˜æ”¾çš„æ˜¯å†…å±‚vectorçš„å¯¹è±¡ã€‚\nå®ƒçš„ç»“æ„å¦‚ä¸‹å›¾\n\nè¿™æ—¶å€™å¦‚æœåªç”¨memcpyè¿›è¡Œæµ…æ‹·è´ï¼Œç›¸å½“äºæ–°çš„ç©ºé—´é‡Œé¢å­˜æ”¾çš„æ˜¯çš„ç¡®æ˜¯æ–°çš„vectorå¯¹è±¡ï¼Œä½†è¿™äº›vectorå¯¹è±¡å­˜æ”¾çš„å´æ˜¯åŸæœ‰æ•°æ®çš„æŒ‡é’ˆï¼Œè€ŒåŸæœ¬çš„æ•°æ®å·²ç»è¢«æˆ‘ä»¬deleteæ‰äº†ï¼Œå‡ºç°äº†é‡æŒ‡é’ˆé—®é¢˜ï¼\nååº”åˆ°ä»£ç ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨ Solutionå†…éƒ¨è¿›è¡Œä¸€æ¬¡æ‰“å°ï¼Œå†åœ¨å¤–éƒ¨è¿›è¡Œä¸€æ¬¡æ‰“å°ï¼Œç»“æœå°±ä¼šå®Œå…¨ä¸åŒ\nvoid test05()&#123;    vector&lt;vector&lt;int&gt;&gt; ret = Solution().generate(5);    cout &lt;&lt; &quot;å¤–éƒ¨æ‰“å°&quot; &lt;&lt; endl;    for (size_t i = 0; i &lt; ret.size(); ++i)    &#123;        for (size_t j = 0; j &lt; ret[i].size(); ++j)        &#123;            cout &lt;&lt; ret[i][j] &lt;&lt; &quot; &quot;;        &#125;        cout &lt;&lt; endl;    &#125;    cout &lt;&lt; endl;&#125;\n\n\nä½¿ç”¨èµ‹å€¼é‡è½½ï¼Œå°±å¯ä»¥è¿›è¡Œæ·±æ‹·è´ï¼Œæ¯ä¸€ä¸ªvectorå¯¹è±¡éƒ½èƒ½è·å¾—æ–°çš„å€¼ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼\n//reserveä»£ç çš„ä¸€éƒ¨åˆ†for (size_t i = 0; i &lt; size(); i++)&#123;    tmp[i] = _start[i];//æ‰‹åŠ¨èµ‹å€¼ï¼Œå½“æˆå‘˜æ˜¯è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨=é‡è½½&#125;\n\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œvectorçš„æ¨¡æ‹Ÿå®ç°å°±å®Œæˆå•¦ï¼é€šè¿‡æ¨¡æ‹Ÿå®ç°å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„ç†è§£vectorå®¹å™¨çš„ç»“æ„ï¼Œä¹Ÿæ–¹ä¾¿åç»­çš„ä½¿ç”¨ï¼\næœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€Pythonã€‘è‡ªåŠ¨è§£æmarkdownä¸­çš„å›¾ç‰‡å¹¶ä¿å­˜","url":"/2023/02/04/note_Python/8python%E8%87%AA%E5%8A%A8%E5%8C%96%E4%B8%8B%E8%BD%BDmd%E6%96%87%E4%BB%B6%E4%B8%AD%E5%9B%BE%E7%89%87/","content":"pythonè‡ªåŠ¨åŒ–ä¸‹è½½&#x2F;ä¸Šä¼ mdä¸­å›¾ç‰‡å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†\n\n\n1.èµ·å› ä¸ºä»€ä¹ˆéœ€è¦pythonæ¥ä¸‹è½½mdé‡Œé¢çš„å›¾ç‰‡ï¼ŸåŸå› å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯éœ€è¦æŠŠå›¾ç‰‡ä¿å­˜ä¸‹æ¥ï¼Œä¸Šä¼ åˆ°ç¬¬äºŒä¸ªå›¾åºŠï¼ˆè¿ç§»ï¼‰\nå¯¹äºé˜¿é‡Œäº‘OSSæ¥è¯´ï¼Œæœ‰ä¸¤ç§è¿ç§»åŠæ³•\n\nä½¿ç”¨å®˜æ–¹çš„æ•°æ®å¯¼å‡ºåŠŸèƒ½\nä½¿ç”¨apiæ¥å£éå†ossç›®å½•ä¸‹è½½æ‰€æœ‰å›¾ç‰‡\n\nè¿™ä¸¤ç§åŠæ³•éƒ½ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ç¬¬ä¸‰ç§\n\nè§£ææœ¬åœ°mdæ–‡ä»¶ä¸­çš„img urlï¼Œä¸‹è½½å›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°\n\né‚£è¦æ€ä¹ˆåšå‘¢ï¼ŸğŸ‘‡\n2.æ•™ç¨‹æˆ‘åœ¨githubæ‰¾åˆ°äº†è¿™ä¸ªé¡¹ç›® ğŸ‘‰ Deali-Axy&#x2F;Markdown-Image-Parser\nä½œè€…çš„ä»£ç å†™çš„å¾ˆæ£’ï¼Œä½†æ˜¯READMEé‡Œé¢å´å°‘äº†ä¸€ä¸ªé‡è¦çš„å¯åŠ¨æ•™ç¨‹ï¼Œé‚£å°±æ˜¯ä½ éœ€è¦åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªfilesæ–‡ä»¶å¤¹ï¼ˆmdæ–‡ä»¶æ”¾åˆ°è¿™é‡Œé¢ï¼‰ï¼Œå¯¹åº”å¯åŠ¨é¡¹é‡Œé¢å¼€å¯çš„æ ¹ç›®å½•\nif __name__ == &#x27;__main__&#x27;:    files_list = get_files_list(os.path.abspath(os.path.join(&#x27;.&#x27;, &#x27;files&#x27;)))\n\néšåï¼Œæ‰§è¡Œpython spider.pyï¼Œå¼€å§‹è¿è¡Œï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å°†mdè½¬æˆhtmlå¹¶ä¸‹è½½å›¾ç‰‡\næˆ‘å°†ä½œè€…çš„ä»£ç è¿›ä¸€æ­¥ç»†åŒ–ï¼Œå¹¶ä¿®æ”¹äº†ä¸€éƒ¨åˆ†bugğŸ‘‡å»ºè®®ä½¿ç”¨æˆ‘forkçš„ç‰ˆæœ¬\nhttps://github.com/musnows/Markdown-Image-Parser\n2.1 UnicodeDecodeErroråœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªæŠ¥é”™\nUnicodeDecodeError: &#x27;utf-8&#x27; codec can&#x27;t decode byte 0xbc in position 2: invalid start byt\n\nè§£å†³åŠæ³•å‚è€ƒ ğŸ‘‰ ç‚¹æˆ‘\nè§£å†³åŠæ³•æ˜¯å°†æ‰“å¼€æ–‡ä»¶ç¼–ç çš„utf-8 ä¿®æ”¹æˆISO-8859-1\nwith open(file, encoding=&#x27;ISO-8859-1&#x27;) as f:           md_content = f.read()\n\n2.2 request failedå› ä¸ºä½œè€…å¹¶æ²¡æœ‰å†™åˆ¤æ–­ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡é—®é¢˜ï¼šæœ¬åœ°å›¾ç‰‡ä¹Ÿä¼šè¿›è¡Œrequestsè¯·æ±‚\næ¯”å¦‚æˆ‘çš„mdé‡Œé¢å°±æœ‰ä¸€äº›å›¾ç‰‡æ˜¯æœ¬åœ°çš„img/å›¾ç‰‡æ–‡ä»¶åï¼Œè¿™ä¸ªä»£ç ä¾æ—§å¯¹è¿™ä¸ªè·¯å¾„å½“åšç½‘ç»œè·¯å¾„è¿›è¡Œè¯·æ±‚ï¼Œäºæ˜¯å°±å‡ºç°äº†æŠ¥é”™\næ‰€ä»¥å°±éœ€è¦åœ¨download_picså‡½æ•°ä¸­å¯¹urlè¿›è¡Œåˆ¤æ–­ï¼Œè¿™é‡Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ¼å¼ï¼ˆå› ä¸ºæˆ‘çŸ¥é“æˆ‘çš„é˜¿é‡Œäº‘OSSé“¾æ¥é‡Œé¢ä¸åŒ…å«imgæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥img/çš„å›¾ç‰‡æ˜¯æœ¬åœ°æ–‡ä»¶\ndef download_pics(url, file,MDfilename):    if &#x27;img/&#x27; in url:        print(&#x27;ä¸å¤„ç†æœ¬åœ°å›¾ç‰‡: &#x27;, url)        return\n\nä½†æ˜¯è¿™æ ·å…¶å®è¿˜æ˜¯æœ‰ç‚¹å‘†å‘†çš„ï¼Œæˆ‘ä»¬ç›´æ¥åˆ¤æ–­httpåœ¨ä¸åœ¨é‡Œé¢ä¸å°±çŸ¥é“æ˜¯ä¸æ˜¯ç½‘ç»œå›¾ç‰‡äº†ğŸ˜‚\ndef download_pics(url, file,MDfilename):    if &#x27;http&#x27; not in url:        print(&#x27;ä¸å¤„ç†æœ¬åœ°å›¾ç‰‡: &#x27;, url)        return\n\n2.3 å›¾ç‰‡ä¿å­˜è·¯å¾„é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡ä¼šä¿å­˜åˆ°å­æ–‡ä»¶å¤¹ä¸‹çš„markdownæ–‡ä»¶åç›®å½•\ntarger_dir = os.path.join(dirname,assert_dir)if not os.path.exists(targer_dir):     os.mkdir(targer_dir)\n\nè¿™æ ·å…¶å®éå¸¸éå¸¸ä¸æ–¹ä¾¿ç®¡ç†ï¼Œæœ‰å‡ ä¸ªmdæ–‡æ¡£å°±æœ‰å‡ ä¸ªmdå›¾ç‰‡è·¯å¾„ï¼Œå¯å¤ªéš¾å—äº†\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰è¿™éƒ¨åˆ†ä»£ç ï¼Œç›´æ¥é€‰æ‹©ä¸€ä¸ªæ ¹ç›®å½•è¿›è¡Œå›¾ç‰‡çš„ä¿å­˜\ntarger_dir =&#x27;./files/img/&#x27; # æ‰€æœ‰å›¾ç‰‡éƒ½ä¿å­˜åˆ° ./files/img/ æ–‡ä»¶å¤¹é‡Œé¢\n\n2.4 try&#x2F;exceptä½œè€…ä»£ç é‡Œé¢çš„æœ€æœ€æœ€å¤§æ¼æ´ï¼Œé‚£å°±æ˜¯æ²¡æœ‰å¯¹forå¾ªç¯é‡Œé¢çš„è¯·æ±‚è¿›è¡Œtry/except\nè¿™æ ·å°±ä¼šå¯¼è‡´ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå›¾ç‰‡è¯·æ±‚å¤±è´¥ï¼Œæ•´ä¸ªè¿›ç¨‹ä¼šç›´æ¥ç»ˆæ­¢ï¼\né‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå³ä¾¿è¿™ä¸ªç¨‹åºä¼šåœ¨éå†çš„æ—¶å€™æ‰“å°å½“å‰å¤„ç†çš„æ–‡ä»¶åå­—ï¼Œä½†è¿™éœ€è¦ç”¨æˆ·å»ç¿»å‘½ä»¤è¡Œè¾“å‡ºï¼Œå†æ‰¾åˆ°åˆ°åº•æ˜¯å“ªä¸€ä¸ªå›¾ç‰‡å‘ç”Ÿé”™è¯¯ï¼Œéå¸¸éå¸¸éå¸¸éš¾å—ï¼\nå¦‚æœé‡æ–°æ‰§è¡Œï¼Œé‚£å°±ç›¸å½“ä¸æŠŠå·²ç»ä¸‹å¥½çš„å›¾ç‰‡åˆé‡ä¸‹ä¸€éï¼Œæµªè´¹OSSçš„æµé‡ã€‚\næ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦ç»™forå¾ªç¯å†…éƒ¨æ·»åŠ ä¸Šå¼‚å¸¸æ•è·ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œå°±å°†è¿™ä¸ªå›¾ç‰‡çš„urlå­˜ä¸‹æ¥ï¼Œç»§ç»­å¾€åæ‰§è¡Œï¼\nfor file in files_list:    print(f&#x27;æ­£åœ¨å¤„ç†ï¼š&#123;file&#125;&#x27;)    with open(file, encoding=&#x27;ISO-8859-1&#x27;) as f:        md_content = f.read()    pics_list = get_pics_list(md_content)    print(f&#x27;å‘ç°å›¾ç‰‡ &#123;len(pics_list)&#125; å¼ &#x27;)    for index, pic in enumerate(pics_list):        try:            print(f&#x27;æ­£åœ¨ä¸‹è½½ç¬¬ &#123;index + 1&#125; å¼ å›¾ç‰‡...&#x27;)            MDfilename = os.path.basename(file) # å½“å‰å¤„ç†çš„mdæ–‡ä»¶çš„åå­—            download_pics(pic, file,MDfilename)            time.sleep(0.5) # é¿å…ä¸‹è½½è¶…é€Ÿ        except KeyboardInterrupt:            os.abort()        except:            print(traceback.format_exc())            if MDfilename not in err_img:                err_img[MDfilename]=[]            # æ·»åŠ å›¾ç‰‡            err_img[MDfilename].append(pic)            print(&quot;å›¾ç‰‡è·å–é”™è¯¯ï¼š&quot;,pic)            time.sleep(1)print(f&#x27;å¤„ç†å®Œæˆã€‚&#x27;)write_file(&#x27;err.json&#x27;,err_img)print(f&#x27;å†™å…¥errå®Œæˆ&#x27;)\n\nå®Œæ•´ä»£ç è§æˆ‘çš„githubä»“åº“\n2.5 ä¸Šä¼ åˆ°lskyå›¾åºŠç°åœ¨æˆ‘è¦è¿ç§»çš„å›¾åºŠæ˜¯lskyï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥åœ¨å°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°çš„åŒæ—¶ï¼Œå°†å›¾ç‰‡ä¸Šä¼ åˆ°lskyå›¾åºŠ\næ³¨æ„ï¼Œä¸Šä¼ ä¹‹å‰ï¼Œè¯·åœ¨ç”¨æˆ·ç»„å°†å›¾ç‰‡ä¸Šä¼ çš„æ ¼å¼æ”¹ä¸ºåŸå§‹æ–‡ä»¶å‘½åï¼Œå¦åˆ™é‡å‘½åäº†é‚£å°±ä»€ä¹ˆéƒ½æ²¡äº†ï¼\n\n\nè¿˜å‘ç°äº†ä¸€ä¸ªç¦»è°±çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€äº›å›¾ç‰‡ä¸Šä¼ äº†ä¹‹åï¼Œlskyè¿˜æ˜¯ä¼šç»™ä»–æ”¹åå­—ï¼ï¼ï¼\n\næ¯”å¦‚è¿™ä¸ªgifï¼Œä»–çš„alté‡Œé¢æ˜¯åŸå§‹åå­—ï¼Œä½†æ˜¯urlå¹¶ä¸æ˜¯ï¼ï¼ï¼ä½ è¯´è¿™ç¦»è°±ä¸\nè§£å†³æ–¹æ³•é‚£å°±æ˜¯æŠŠæœ¬åœ°çš„å›¾ç‰‡æ‰“ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œä¼ åˆ°äº‘æœåŠ¡å™¨åå°å­˜å‚¨è·¯å¾„ä¸­è¦†ç›–ä¸€éï¼ŒæŠŠæ²¡æœ‰çš„å›¾ç‰‡ç»™æ·»åŠ ä¸Š\nunzip -o ~/docker/img.zip -d ~/docker/lsky/storage/app/uploads/23/02\n\nä¸Šä¼ ä¹‹å‰ï¼Œå…ˆè·å–token\ndef lsky():    url = &quot;æœåŠ¡å™¨åœ°å€/api/v1/tokens&quot;    params = &#123;        &#x27;email&#x27;:&#x27;è´¦æˆ·é‚®ç®±&#x27;,        &#x27;password&#x27;:&#x27;å¯†ç &#x27;    &#125;    res = requests.post(url,  params=params)  # è¯·æ±‚api    return res.json()\n\nç»“æœå¦‚ä¸‹\n&#123;&#x27;status&#x27;: True, &#x27;message&#x27;: &#x27;success&#x27;, &#x27;data&#x27;: &#123;&#x27;token&#x27;: &#x27;è¿™é‡Œä¼šè¿”å›token&#x27;&#125;&#125;\n\néšåæ˜¯ä¸Šä¼ çš„ä»£ç ï¼Œæ³¨æ„å…°ç©ºå¿…é¡»è¦ç”¨open &#39;rb&#39;é‡æ–°æ‰“å¼€ä¸€è¾¹å›¾ç‰‡ï¼Œæ‰€ä»¥å‚æ•°ç»™img_pathä¹Ÿå°±æ˜¯å›¾ç‰‡çš„è·¯å¾„å³å¯\n# å…°ç©ºå›¾åºŠdef lsky_upload(img_path:str):    url = &quot;ä½ çš„å…°ç©ºå›¾åºŠæœåŠ¡å™¨/api/v1/upload&quot;    header = &#123;        &quot;Authorization&quot;: &quot;Bearer ä½ çš„å…°ç©ºtoken&quot;,        &quot;Accept&quot;: &quot;application/json&quot;    &#125;    img = open(img_path, &#x27;rb&#x27;)    params = &#123;&#x27;strategy_id&#x27;: 1&#125;    myfiles = &#123;&#x27;file&#x27;: img&#125;    res = requests.post(url, headers=header, params=params,                        files=myfiles)  # è¯·æ±‚api    return res.json()\n\nåœ¨download_picsçš„æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¹¶å¯¹å…°ç©ºå›¾åºŠçš„è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸Šä¼ é”™è¯¯ï¼ŒåŒæ ·æ·»åŠ åˆ°é”™è¯¯å›¾ç‰‡ä¸­ï¼\n# ä¸Šä¼ lskyres = lsky_upload(img_path=f&quot;&#123;targer_dir&#125;/&#123;filename&#125;&quot;)print(res)if not res[&#x27;status&#x27;]:    global err_img    if MDfilename not in err_img:        err_img[MDfilename]=[]         err_img[MDfilename].append(url)    print(&quot;å…°ç©ºä¸Šä¼ é”™è¯¯ï¼&quot;,url)    time.sleep(1)\n\nä¸Šä¼ æˆåŠŸçš„è¿”å›å€¼statusæ˜¯True\n3.å¼€å§‹è‡ªåŠ¨åŒ–ä¸Šä¼ å°†ä¸Šé¢çš„bugä¿®æ”¹å¥½äº†ä¹‹åï¼Œå°±å¯ä»¥æ­£å¼è¿è¡Œï¼Œåœ¨ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°çš„åŒæ—¶ï¼Œä¸Šä¼ åˆ°å…°ç©ºå›¾åºŠäº†ï¼\n\nå›¾ç‰‡ä¹Ÿéƒ½æˆåŠŸä¿å­˜åˆ°æœ¬åœ°äº†\n\nä¸Šä¼ å®Œæ¯•ä¹‹åï¼Œä¹Ÿèƒ½åœ¨erré‡Œé¢çœ‹åˆ°é”™è¯¯çš„å›¾ç‰‡è·¯å¾„ï¼Œä»¥ä¾¿é‡æ–°å¤„ç†ã€‚\nå¯ä»¥çœ‹åˆ°è¿™é‡Œé¢æœ‰ä¸€éƒ¨åˆ†æ˜¯giteeå’Œcsdnçš„é“¾æ¥ï¼Œè¿™äº›å›¾ç‰‡æœ‰é˜²ç›—é“¾ï¼Œè€Œä¸”å›¾ç‰‡å°¾éƒ¨æ·»åŠ äº†å…¶ä»–å­—æ®µï¼Œå¯¼è‡´lskyæ²¡æœ‰åŠæ³•å°†å…¶è¯†åˆ«ä¸ºå›¾ç‰‡ï¼ˆå´å°‘å›¾ç‰‡æ ¼å¼åç¼€ï¼‰\nä¸è¿‡æˆ‘çš„ç›®æ ‡æ˜¯å°†é˜¿é‡Œäº‘OSSçš„å›¾ç‰‡è½¬åˆ°lskyï¼Œè¿™äº›æœ¬æ¥å°±ä¸æ˜¯é˜¿é‡Œäº‘OSSçš„å›¾ç‰‡å’Œæˆ‘çš„ç›®çš„æ— å…³ï¼\n\nåšå®Œè¿™ä¸€åˆ‡ï¼Œæœ€è®©æˆ‘æ„Ÿæ…¨çš„æ˜¯ï¼Œæˆ‘çš„é˜¿é‡Œäº‘ossé‡Œé¢æœ‰1gçš„å›¾ç‰‡ï¼Œå®é™…ç”¨çš„å´åªæœ‰ä¸‹é¢è¿™ä¸€ä¸¢ä¸¢ï¼›å…¶ä»–ä¼°è®¡éƒ½æ˜¯é‡å¤ä¸Šä¼ çš„\n\n","categories":["é€Ÿé€šPython"],"tags":["å›¾åºŠ","Python"]},{"title":"ã€Pythonã€‘æ•™ä½ ç™½å«–replitéƒ¨ç½²kook-ticket-bot","url":"/2023/02/09/note_Python/9%E7%99%BD%E5%AB%96replist%E9%83%A8%E7%BD%B2ticket%E6%9C%BA%E5%99%A8%E4%BA%BA/","content":"æ•™ä½ ç™½å«–replitéƒ¨ç½²kookçš„ticketæœºå™¨äºº\n\n\n1.å‰è¨€æœ€è¿‘æœ‰ä¸å°‘è€å“¥æ¥æ‰¾æˆ‘å’¨è¯¢æœ‰å…³ticketæœºå™¨äººçš„äº‹æƒ…ï¼Œå½“å‰ticketæœºå™¨äººéœ€è¦äº‘æœåŠ¡å™¨æ‰èƒ½éƒ¨ç½²ï¼Œæœ‰äº›ä¸å¤ªå‹å¥½ï¼ˆè¦é’±å•Šï¼è€Œä¸”ä¹Ÿä¸æ˜¯äººäººéƒ½ä¼šå®‰è£…pythonç¯å¢ƒï¼‰\næ‰€ä»¥åœ¨è¿™é‡Œåˆ©ç”¨replitå’Œuptimerobotä¸¤ä¸ªå¹³å°ï¼Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªç™½å«–çš„æ–¹æ³•ï¼Œå®ç°éƒ¨ç½²kook-ticket-bot\næ³¨æ„ï¼replitä¸Šçš„å…è´¹ä»“åº“ï¼Œé»˜è®¤æ˜¯å…¬å¼€çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰äººéƒ½èƒ½è®¿é—®åˆ°ä½ è¿™ä¸ªä»“åº“é‡Œé¢çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬botçš„tokenå’Œæ—¥å¿—ä¿¡æ¯ï¼è‹¥æ‚¨çš„ticket-botå¯¹æ•°æ®ç§å¯†æ€§è¦æ±‚è¾ƒé«˜ï¼Œè¯·è‡ªè´­æœåŠ¡å™¨æˆ–æ‰¾å¼€å‘è€…ä»£ä¸ºéƒ¨ç½²ï¼\n2.å‡†å¤‡2.1 æ³¨å†Œè´¦æˆ·è¿™ä¸¤ä¸ªå¹³å°å›½å†…è®¿é—®ç¼“æ…¢ï¼Œå¦‚æœå®åœ¨è¿›ä¸å»ï¼Œå°±ä¸‹è½½ä¸€ä¸ªsteam++(åˆç§°watt toolkit)\n\nhttps://gitee.com/rmbgame/SteamTools/releases/tag/2.8.6\n\nå¦‚å›¾ï¼Œä¸‹è½½exeå°±å¯ä»¥äº†\n\nå®‰è£…æ‰“å¼€ä»¥åï¼ŒæŠŠè¿™ä¸€å †æ— å·®åˆ«å‹¾ä¸Šï¼Œç‚¹ä¸€é”®åŠ é€Ÿï¼Œåº”è¯¥å°±okäº†ï¼Œè®¿é—®ä¼šç¨å¾®å¿«ä¸€ç‚¹\n\néšåå°±æ˜¯æ³¨å†Œè¿™ä¸¤ä¸ªå¹³å°çš„è´¦æˆ·äº†ï¼Œåº”è¯¥ä¸éœ€è¦æ•™å§ï¼ˆdogeï¼‰\n2.2 æ‰“å¼€giteeä»“åº“\nhttps://gitee.com/musnow/Kook-Ticket-Bot/tree/main/code\n\nä¸ºäº†æ–¹ä¾¿è®¿é—®ï¼Œæˆ‘å°†ticket-botåœ¨giteeä¹Ÿä¼ äº†ä¸€ä»½ï¼Œå¤§å®¶æ‰“å¼€ä»“åº“çš„codeç›®å½•ï¼Œå‡†å¤‡æ‹·è´ä»£ç \n2.3 ç”³è¯·kookå¼€å‘è€…\nhttps://developer.kookapp.cn/app/index\n\nåˆ°kookçš„å¼€å‘è€…å¹³å°ï¼ŒåŠ å…¥å®˜æ–¹é¢‘é“ç”³è¯·æ‰¿ä¸ºå¼€å‘è€…ï¼Œè·å–åˆ›å»ºbotçš„æƒé™ï¼›æœ‰äº†æƒé™ä¹‹åï¼Œæ–°å»ºä¸€ä¸ªåº”ç”¨\n\n\néšåè¿›å…¥æœºå™¨äººé¡µé¢ï¼Œå¤åˆ¶è¿™é‡Œçš„tokenï¼Œå…ˆä¿å­˜èµ·æ¥ï¼Œåé¢è¦ç”¨ï¼ˆä¸€ä¼šå†æ¥å¤åˆ¶ä¹Ÿè¡Œï¼‰\n\nè¿›å…¥é‚€è¯·é¡µé¢ï¼Œç»™äºˆæœºå™¨äººç®¡ç†å‘˜æƒé™ï¼ˆè¿™æ ·æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œä¸ç„¶å¾—é’©ä¸€å¤§å †ï¼‰\nç„¶åå¤åˆ¶ä¸Šé¢çš„é‚€è¯·é“¾æ¥åˆ°æµè§ˆå™¨ï¼Œé‚€è¯·æœºå™¨äººè¿›å…¥ä½ çš„æœåŠ¡å™¨\n\n\n3.å¼€å§‹éƒ¨ç½²3.1 åˆ›å»ºpythonæ¥åˆ°replitï¼Œåˆ›å»ºä»“åº“\n\né€‰æ‹©pythonï¼Œç„¶åç»™å®ƒå–ä¸ªåå­—\n\nåˆ›å»ºä¹‹åè¿›å…¥è¿™ä¸ªé¡¹ç›®\n\n3.2 æ·»åŠ ä»£ç æ–‡ä»¶è¿›æ¥ä¹‹åæ˜¯è¿™æ ·çš„é¡µé¢ï¼Œåªæœ‰ä¸€ä¸ªmain.pyï¼Œå…¶ä»–ä»€ä¹ˆéƒ½æ— \n\nç‚¹å‡»å·¦ä¸Šè§’è¿™ä¸ªå°æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå‘½åä¸ºkeepal.py\n\nå¤åˆ¶å¦‚ä¸‹ä»£ç åˆ°keepal.py\n# encoding: utf-8from flask import Flaskfrom threading import Thread# åˆå§‹åŒ–app = Flask(&#x27; &#x27;)# è®¾ç«‹æ ¹è·¯å¾„ä½œä¸ºapiè°ƒç”¨@app.route(&#x27;/&#x27;)def home():  text = &quot;ticket bot online!&quot;  print(text)  return text# å¼€å§‹è¿è¡Œï¼Œç»‘å®šipå’Œç«¯å£def run():  app.run(host=&#x27;0.0.0.0&#x27;,port = 8000)# é€šè¿‡çº¿ç¨‹è¿è¡Œdef keep_alive():  t= Thread(target=run)  t.start()\n\néšåï¼Œå°±å¼€å§‹æ ¹æ®æˆ‘ä»“åº“çš„ä»£ç ï¼Œåˆ›å»ºåŒåæ–‡ä»¶ï¼Œå¹¶å°†ä»£ç å¤åˆ¶è¿›å»\n\ngithubçš„ä»£ç æ›´åŠ æ–°ï¼Œå¦‚æœèƒ½æ‰“å¼€githubï¼Œè¯·åœ¨githubå¤åˆ¶ä»£ç ï¼šhttps://github.com/musnows/Kook-Ticket-Bot\nå®åœ¨æ‰“ä¸å¼€ï¼Œå†æ¥giteeï¼šhttps://gitee.com/musnow/Kook-Ticket-Bot/tree/main/code\n\nmainå°±ä¸ç”¨åˆ›å»ºäº†ï¼Œé»˜è®¤å·²ç»æœ‰äº†ï¼Œç›´æ¥æŠŠä»£ç å¤åˆ¶è¿›å»å°±è¡Œäº†ï¼›æ‰€æœ‰æ–‡ä»¶æ·»åŠ å®Œæ¯•ä¹‹åï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„\n\nè¿™æ ·ï¼Œä»£ç å°±æ·»åŠ å¥½äº†\n3.3 æ·»åŠ é…ç½®æ–‡ä»¶æ¥ä¸‹æ¥å°±æ˜¯æ›´å…·ä»“åº“çš„READMEæ·»åŠ å„ç±»é…ç½®æ–‡ä»¶\nconfig/config.json #æœºå™¨äººtokené…ç½®config/TicketConf.json # ticketé…ç½®log/TicketLog.json #ticketæ—¥å¿—log/TicketMsgLog.json # æ¶ˆæ¯è®°å½•log/ColorID.json # è¡¨æƒ…å›åº”ä¸Šè§’è‰²\n\nå…ˆæŠŠå¦‚ä¸Šçš„å‡ ä¸ªæ–‡ä»¶å…¨éƒ¨å»ºç«‹å¥½ï¼Œç„¶åæ ¹æ®ä»“åº“çš„READMEå¾€é‡Œé¢æ·»åŠ é”®å€¼ï¼Œè¿™é‡Œä¸é‡å¤READMEä¸­å·²æœ‰å†…å®¹\nå¾ˆå¤šæ“ä½œéƒ½éœ€è¦å¤åˆ¶IDï¼Œå…ˆåœ¨è®¾ç½®é«˜çº§è®¾ç½®ä¸­å¼€å¯å¼€å‘è€…æ¨¡å¼\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªTicketConf.jsonä¸­éœ€è¦é…ç½®çš„å‡ é¡¹çš„æ ·ä¾‹\n\n\nåœ¨è¿™é‡Œé‡ç”³ï¼Œæ·»åŠ äº†è¿™ä¸¤ä¸ªè§’è‰²idä¹‹åï¼Œå¿…é¡»è¦ç»™äºˆç”¨æˆ·å¯¹åº”çš„è§’è‰²ï¼ˆç‰¹åˆ«æ˜¯è…ç«¹ï¼‰æ‰èƒ½æ“ä½œbotçš„å‘½ä»¤ï¼Œå¦åˆ™æç¤ºæƒé™ä¸è¶³\né…ç½®ä¸ºæ–‡ä»¶æ·»åŠ å®Œæ¯•ä¹‹åï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„\n\n3.4 å¼€å§‹è¿è¡Œå¼€å§‹è¿è¡Œå‰çš„æœ€åä¸€æ­¥ï¼Œè¿›å…¥main.pyï¼Œå–æ¶ˆå¯¹æœ€åä¸¤è¡Œä»£ç çš„æ³¨é‡Š\n\nè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç‚¹å‡»é¡¶éƒ¨çš„runï¼Œå°è¯•è¿è¡Œbotäº†ï¼Œå˜æˆä¸‹é¢çš„æ ·å­é‚£å°±æ˜¯åœ¨è¿è¡Œäº†\n\nåˆšå¼€å§‹æ‰“å°ä¼šæç¤ºè¿™ä¸ªï¼Œä»£è¡¨æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„åŒ…\n\nå·¥å…·toolsé‡Œé¢é€‰æ‹©packgesï¼Œåœ¨é‡Œé¢æœç´¢khl.py\n\n\nå¦‚ä¸‹æç¤ºï¼Œå®‰è£…æˆåŠŸï¼\n\nåœ¨ç‚¹å‡»è¿è¡Œï¼Œå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„é¡µé¢ï¼Œé‚£å°±æ˜¯è¿è¡ŒæˆåŠŸäº†ï¼\n\nç°åœ¨è¿›kooké‡Œé¢ï¼Œå…ˆæµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„botæ˜¯å¦åœ¨çº¿\n\næµ‹è¯•é€šè¿‡ï¼åå°ä¹Ÿæ‰“å°å‡ºäº†æ—¥å¿—\n\n3.5 uptimeRobotåˆ«æ€¥åˆ«æ€¥ï¼Œè™½ç„¶åˆ°è¿™é‡Œå·²ç»okäº†ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤è¦åš\nè¿›å…¥uptimeRobotï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç›‘æ§å®ä¾‹ï¼Œæ¥è°ƒç”¨æˆ‘ä»¬çš„keepalæ¨¡ç»„ä¸­çš„å‡½æ•°ï¼Œä¿è¯æˆ‘ä»¬çš„botä¸ä¼šå› ä¸ºreplitçš„ç­–ç•¥è€Œä¸‹çº¿\n\nç‚¹å‡»add new monitorï¼Œé€‰æ‹©http\n\n\næŒ‰å¦‚ä¸‹æ‰€ç¤ºå¡«å†™\n\nnameéšä¾¿å¡«ä¸ªè‹±æ–‡å\nurlå¡«åœ¨replitå¤åˆ¶çš„é“¾æ¥\nintervelæ˜¯å•æ¬¡ç›‘æ§çš„é—´éš”ï¼Œé€‰æ‹©1-5åˆ†é’Ÿéƒ½å¯ä»¥\ntimeouté»˜è®¤30sä¸éœ€è¦ä¿®æ”¹\nä¸¤ä¸ªsslå–æ¶ˆå‹¾é€‰\n\n\nå»ºè®®å‹¾é€‰ä¸Šè¿™ä¸ªï¼Œåœ¨botä¸‹çº¿çš„æ—¶å€™ï¼Œä¼šå‘ä½ çš„é‚®ç®±å‘é€é€šçŸ¥\n\né…ç½®å®Œæ¯•ï¼Œç‚¹å‡»å³ä¸‹è§’çš„create\n\nè¿™æ—¶å€™å°±ä¼šå¼€å§‹è¿è¡Œäº†ï¼ä¸‹æ–¹çš„pauseå¯ä»¥æš‚åœè¿è¡Œã€‚\n\nå¦‚æœä½ createå®Œæ¯•ï¼Œå‘ç°æ˜¯é»‘è‰²çš„ï¼Œé‚£å°±ç‚¹å‡»ä¸€ä¸‹startè®©ä»–å¼€å§‹è¿è¡Œ\n4.æ—¥å¿—æ–‡ä»¶é»˜è®¤çš„æ‰€æœ‰æ‰“å°éƒ½ä¼šæ‰“å°åˆ°æ§åˆ¶å°é‡Œé¢ï¼Œè¿è¡Œæ—¶é—´ä¹…äº†ï¼Œreplitçš„æ§åˆ¶å°å¯èƒ½æ— æ³•è·å–åˆ°æ‰€æœ‰ä¿¡æ¯ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹è¾“å‡ºè¿›è¡Œé‡å®šå‘\nå¦‚æœä½ éœ€è¦æ—¥å¿—æ–‡ä»¶ï¼ˆæˆ‘å»ºè®®ä¸€å®šè¦è¿™ä¹ˆåšï¼ï¼‰é‚£å°±éœ€åœ¨mainé‡Œé¢æ·»åŠ ä¸€éƒ¨åˆ†ä»£ç \n#æ ‡å‡†è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶file =  open(&#x27;./log/log.txt&#x27;, &#x27;a&#x27;)sys.stdout = file sys.stderr = file\n\næ·»åŠ åˆ°å¼€å¤´start_timeä»¥åå³å¯\n\nç°åœ¨æ›´æ–°äº†ä»£ç ä»¥åï¼Œåªéœ€è¦å–æ¶ˆå¼€å¤´è¿™é‡Œçš„æ³¨é‡Šå³å¯\n# æ ‡å‡†è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶logDup(&#x27;./log/log.txt&#x27;)\n\n\nè¿™æ ·åšè¿˜ä¸å¤Ÿï¼Œbotæœ‰ä¸€ä¸ªç‰¹æ®Šçš„killå‘½ä»¤ï¼Œæ‰§è¡Œæ­¤killå‘½ä»¤ï¼Œå¯ä»¥åˆ·æ–°ç¼“å†²åŒºï¼Œé¿å…å‡ºç°æ•°æ®åœ¨ç¼“å†²åŒºä¸­æ²¡æœ‰å†™å…¥åˆ°æ–‡ä»¶ï¼Œå¯¼è‡´ä¸¢å¤±æ—¥å¿—\nå¦‚æœä½ æƒ³é€€å‡ºbotï¼Œå»ºè®®ä½¿ç”¨killå‘½ä»¤æ¥æ“ä½œï¼\nå¤§åŠŸå‘Šæˆï¼ç°åœ¨ä½ å¯ä»¥æ ¹æ®helpå»æµ‹è¯•ä¸€ä¸‹å„ç±»å‘½ä»¤æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œå•¦\n\n\n\næ³¨æ„ï¼Œå…³é—­ticketä¹‹åå¯èƒ½ä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ä»æ¥æ²¡æœ‰ç»™botå‘é€è¿‡ä¿¡æ¯ï¼Œå¯¼è‡´botæ— æ³•ç”¨æˆ·å‘é€ç§ä¿¡ï¼Œå¿½ç•¥æ­¤æŠ¥é”™å³å¯ï¼ˆæ–°ç‰ˆæœ¬å·²ç»å–æ¶ˆäº†è¿™ä¸ªæŠ¥é”™ï¼‰\n\nå› ä¸ºreplitæ˜¯å…è´¹çš„ï¼Œæ‰€ä»¥botçš„ååº”å¯èƒ½æœ‰äº›è¿Ÿé’ï¼Œæ­£å¸¸æƒ…å†µï¼\nå†æ¬¡æé†’ï¼replitä¸Šçš„å…è´¹ä»“åº“ï¼Œé»˜è®¤æ˜¯å…¬å¼€çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰äººéƒ½èƒ½è®¿é—®åˆ°ä½ è¿™ä¸ªä»“åº“é‡Œé¢çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬botçš„tokenå’Œæ—¥å¿—ä¿¡æ¯ï¼è‹¥æ‚¨çš„ticket-botå¯¹æ•°æ®ç§å¯†æ€§è¦æ±‚è¾ƒé«˜ï¼Œè¯·è‡ªè´­æœåŠ¡å™¨æˆ–æ‰¾å¼€å‘è€…ä»£ä¸ºéƒ¨ç½²ï¼\n\nä½ å¯ä»¥forkæˆ‘è¿™æ¬¡éƒ¨ç½²çš„botï¼ˆ23-02-10ï¼‰ä½†æ˜¯åç»­çš„ä»£ç æ›´æ–°è¿˜æ˜¯éœ€è¦è‡ªå·±æ“ä½œå“¦ï¼\n\n","categories":["é€Ÿé€šPython"],"tags":["Python"]},{"title":"ã€C++ã€‘STLï¼šlist","url":"/2022/07/16/note_cpp/12STL_List/","content":"é˜¿å·´é˜¿å·´ï¼Œlistçš„åšå®¢æ¥å–½ï¼\n\n\n[TOC]\n1.listæ˜¯å˜›ç©æ„ï¼Ÿä¹‹å‰çš„vectoræ˜¯ä¸€ä¸ªé¡ºåºè¡¨ã€‚æ€»æ‰€å‘¨çŸ¥ï¼Œå­¦å®Œé¡ºåºè¡¨è‚¯å®šä¸èƒ½ä¸å­¦é“¾è¡¨ï¼Œæ‰€ä»¥listå°±æ¥äº†ï¼\n\nlistæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œæ’å…¥åˆ é™¤çš„åºåˆ—å¼å®¹å™¨ï¼Œå¯ä»¥è¿›è¡Œå‰ååŒå‘è¿­ä»£\n\nè¯´äººè¯å°±æ˜¯ï¼šlistæ˜¯ä¸€ä¸ªåŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨\n\nè¿™ä¸å·§äº†å˜›ï¼ä¹‹å‰æˆ‘å†™è¿‡ç”¨Cè¯­è¨€å®ç°åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨çš„åšå®¢\nå…¶ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾\n\næ”¯æŒå¿«é€Ÿæ’å…¥åˆ é™¤O(1)\næ”¯æŒå‰ååŒå‘è¿­ä»£è®¿é—®\nä¸æ”¯æŒä»»æ„ä½ç½®çš„éšæœºè®¿é—®\n\nSTLä¸­çš„listä¹Ÿæ»¡è¶³ä¸Šé¢çš„è¿™äº›ä¼˜ç¼ºç‚¹\nè¯ä¸å¤šè¯´ï¼Œæ¥çœ‹çœ‹listçš„å‡½æ•°æ¥å£å§ï¼\n\nhttps://m.cplusplus.com/reference/list/list/\n\nå‡½æ•°æ¥å£å¤§éƒ¨åˆ†æ¥å£å’Œå‰é¢æ‰€å­¦çš„ä¸¤ä¸ªå®¹å™¨éƒ½æ˜¯ä¸€æ ·çš„å•¦ï¼Œè¿™é‡Œå°±ä¸è´´å®Œæ•´æˆªå›¾äº†ï¼ˆè§ä¸Šæ–¹é“¾æ¥ï¼‰\n\nè¿™é‡Œè¿˜å¤šäº†ä¸€ä¸ªemplace_frontï¼Œçœ‹å®Œå‡½æ•°è§£é‡Šåå¯çŸ¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¤´æ’\n\n2.ç®€å•äº†è§£ä½¿ç”¨2.1æ„é€ listæ”¯æŒçš„æ„é€ å‡½æ•°å¦‚ä¸‹\n\nè¿™äº›å‡½æ•°å’Œvectorå®Œå…¨ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šä»‹ç»äº†\n\n2.2è¿­ä»£å™¨\n\n\nè¿­ä»£å™¨\nè¯´æ˜\n\n\n\nbegin+end\nè·å–ç¬¬ä¸€ä¸ªæ•°æ®ä½ç½®iterator&#x2F;const_iteratorï¼Œ è·å–æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®iterator&#x2F;const_iterator\n\n\nrbegin+rend\nè·å–æœ€åä¸€ä¸ªæ•°æ®ä½ç½®çš„reverse_iteratorï¼Œè·å–ç¬¬ä¸€ä¸ªæ•°æ®å‰ä¸€ä¸ªä½ç½®çš„ reverse_iterator\n\n\néƒ½æ˜¯è€æ ·å­ï¼Œæ²¡æœ‰å•¥å¥½è¯´çš„\n\né™¤äº†è¿­ä»£å™¨ä»¥å¤–ï¼Œä¸€èˆ¬çš„å®¹å™¨éƒ½ä¼šæä¾›frontå’Œbackä¸¤ä¸ªå‚æ•°æ¥è®¿é—®å¤´éƒ¨&#x2F;å°¾éƒ¨æ•°æ®ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸¸ç”¨è¿™ä¸ªï¼Œè¿­ä»£å™¨ç”¨çš„æ›´å¤šä¸€äº›\n2.3é•¿åº¦æ“ä½œåº“å‡½æ•°ä¸­ç»™æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå’Œlisté•¿åº¦ç›¸å…³çš„æ“ä½œï¼Œå› ä¸ºæ˜¯é“¾è¡¨ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨æ‰©å®¹é—®é¢˜ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´\n\n\nempty åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯ç©ºè¿”å›true\nsize è®¡ç®—listä¸­æœ‰æ•ˆæ•°æ®é•¿åº¦\n\nå…³äºæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œlistå’Œvector/stringåŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå­¦ä¼šä¸€ä¸ªåŸºæœ¬éƒ½ä¼šç”¨ï¼\n2.4è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜å’Œvectorä¸€æ ·ï¼Œlistä¹Ÿä¼šé‡åˆ°ä¸€å®šç¨‹åº¦çš„è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ã€‚\nå› ä¸ºlistæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œå…¶åœ¨æ’å…¥æ“ä½œçš„æ—¶å€™æ˜¯åœ¨è¿­ä»£å™¨æ‰€æŒ‡èŠ‚ç‚¹å‰ä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥ï¼Œä¸ä¼šå½±å“è¯¥èŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„ç»“æ„ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆã€‚\n\nåªæœ‰åœ¨åˆ é™¤çš„æ—¶å€™æ‰ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆ\n\nè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨è¿­ä»£å™¨åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼Œæ¥æ”¶è¿”å›å€¼æ›´æ–°ä¸€ä¸‹è¿­ä»£å™¨å³å¯ï¼\n\nåŸºæœ¬äº†è§£äº†å‡½æ•°æ¥å£åï¼Œè®©æˆ‘ä»¬æ¥è¯•è¯•æ¨¡æ‹Ÿå®ç°å§ï¼\n3.æ¨¡æ‹Ÿå®ç°\næ¨¡æ‹Ÿå®ç°å’ŒSTL-listæºç è§æˆ‘çš„Gitee\n\nä¸‹å›¾æ˜¯ä¹‹å‰Cè¯­è¨€ç‰ˆæœ¬é“¾è¡¨åšå®¢é‡Œï¼Œæˆ‘ç”»çš„åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨çš„ç»“æ„å›¾\n\nlistçš„ç»“æ„å’Œè¿™ä¸ªå›¾ç‰‡æ˜¯ä¸€æ ·çš„ã€‚ä½†å› ä¸ºæˆ‘ä»¬ç°åœ¨æ‰€ä½¿ç”¨çš„æ˜¯C++ä¸­çš„ç±»å’Œå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ“ä½œéƒ½éœ€è¦å°Šå´‡stlåº“çš„å‘½åè§„åˆ™å’Œä½¿ç”¨æ–¹æ³•ï¼Œå…¶ç»“æ„çš„å®ç°ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚\næ¯”å¦‚åœ¨STLæºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œlistçš„ä¸»ç»“æ„ä¸­åªæœ‰ä¸€ä¸ªnodeï¼Œå³å¤´èŠ‚ç‚¹ã€‚\n\n3.1 èŠ‚ç‚¹ç»“æ„åœ¨listä¸­ï¼Œæˆ‘ä»¬ä¸ç›´æ¥åœ¨listä¸»ç±»ä¸­æ”¾å…¥å•ä¸ªèŠ‚ç‚¹çš„ç»“æ„ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ä½œä¸ºèŠ‚ç‚¹ã€‚\n\nå¤ä¹ ï¼šåœ¨structä¸­ï¼Œæˆå‘˜é»˜è®¤æ˜¯å…±æœ‰\n\ntemplate&lt;class T&gt;   struct list_node   &#123;       list_node&lt;T&gt;* _next;       list_node&lt;T&gt;* _prev;       T _data;       list_node(const T&amp; val = T())           :_next(nullptr),       \t_prev(nullptr),       \t_data(val)       &#123;&#125;   &#125;;\n\nè¿™æ ·åé¢çš„æ’å…¥åˆ é™¤æ“ä½œå°±å¯ä»¥ç›´æ¥newä¸€ä¸ªæ–°çš„nodeï¼Œå¹¶è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ_dataçš„èµ‹å€¼ã€‚\nåœ¨listçš„ä¸»ç±»ä¸­ï¼Œæˆ‘ä»¬éµå¾ªåº“çš„æ–¹æ³•ï¼Œåªç”¨ä¸€ä¸ªå¤´èŠ‚ç‚¹çš„æŒ‡é’ˆä½œä¸ºæˆå‘˜\nprivate:\tNode* _head;//å¤´èŠ‚ç‚¹æŒ‡é’ˆ\n\n\n3.2 æ’å…¥åˆ é™¤å› ä¸ºä¹‹å‰å†™è¿‡Cè¯­è¨€çš„ä»£ç ï¼Œå…³äºæ’å…¥å’Œåˆ é™¤æ“ä½œç›¸å¯¹è¾ƒä¸ºç†Ÿç»ƒï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡\n//åœ¨posä¹‹å‰æ’å…¥iterator insert(iterator pos, const T&amp; x)&#123;    Node* newnode = new Node(x);    Node* cur = pos._node;    newnode-&gt;_next = cur;    cur-&gt;_prev-&gt;_next = newnode;    newnode-&gt;_prev = cur-&gt;_prev;    cur-&gt;_prev = newnode;    return iterator(newnode);&#125;//åˆ é™¤posä½ç½®iterator erase(iterator pos)&#123;    assert(_head-&gt;_next != _head &amp;&amp; pos._node!=_head);    Node* next = pos._node-&gt;_next;    Node* prev = pos._node-&gt;_prev;    prev-&gt;_next = next;    next-&gt;_prev = prev;    delete pos._node;    return iterator(next);&#125;\n\nè€Œå¤´æ’&#x2F;å¤´åˆ &#x2F;å°¾æ’&#x2F;å°¾åˆ è¿™ç±»æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥å¤ç”¨insertå’Œearseå³å¯ï¼\n\n\n3.3 è¿­ä»£å™¨ï¼ˆé‡è¦ï¼‰åœ¨ä¸Šé¢çš„æ’å…¥å’Œåˆ é™¤ä»£ç ä¸­ï¼Œæˆ‘å·²ç»ä½¿ç”¨äº†è¿­ä»£å™¨ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼ã€‚ç”±äºlistçš„ä¸»ç±»ä¸­å¹¶æ²¡æœ‰ç›´æ¥å­˜æ”¾3.1èŠ‚ç‚¹ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å•ç‹¬å®Œæˆä¸€ä¸ªè¿­ä»£å™¨çš„ç±»ï¼Œæ¥å®ç°è¿­ä»£å™¨çš„ç›¸å…³æ“ä½œ\n\nvector&#x2F;stringæ˜¯é¡ºåºè¡¨ï¼Œè¿­ä»£å™¨å¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆæ›¿ä»£ï¼Œåœ¨æœ¬ç±»ä¸­æ¨¡æ‹Ÿå®ç°\nlistæ˜¯é¡ºåºè¡¨ï¼Œè¿­ä»£å™¨çš„+å’Œ-æ“ä½œå…¶å®æ˜¯é€šè¿‡nextå’ŒprevæŒ‡é’ˆå¾€åå¾€å‰æ‰¾å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬çš„æ¨¡æ‹Ÿå®ç°\n\nåœ¨STLæºç ä¸­çš„listä¹Ÿæ˜¯å•ç‹¬é‡è½½äº†ä¸€ä¸ªè¿­ä»£å™¨ç±»\n\nå…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹\ntemplate&lt;class T, class Ref, class Ptr&gt;struct __list_iterator&#123;    typedef list_node&lt;T&gt; Node;//èŠ‚ç‚¹ç»“æ„    typedef __list_iterator&lt;T, Ref, Ptr&gt; self;//æœ¬ç±»    Node* _node;//å­˜æ”¾èŠ‚ç‚¹æŒ‡é’ˆ        __list_iterator(Node* node)\t\t:_node(node)\t&#123;&#125;&#125;\n\nè¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸ºä½•æœ‰3ä¸ªæ¨¡æ¿å‚æ•°ï¼šrefæŒ‡ä»£å¼•ç”¨ï¼ŒptræŒ‡ä»£æŒ‡é’ˆ\nå› ä¸ºåœ¨åç»­çš„æ“ä½œä¸­æˆ‘ä»¬éœ€è¦ä¼ å…¥Tçš„å¼•ç”¨T&amp;å’ŒæŒ‡é’ˆT*ï¼Œå¦‚æœä¹‹ä¼ å…¥ä¸€ä¸ªTï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®è®¤æ˜¯å¦ä¸ºconstç±»å‹ï¼Œä¹Ÿå°±æ— æ³•é˜»æ­¢ç”¨æˆ·ä½¿ç”¨è¿­ä»£å™¨ä¿®æ”¹å€¼ï¼Œæˆå‘˜çš„æ•°æ®å°±ä¸å¤Ÿå®‰å…¨ï¼Œä¸”constçš„æˆå‘˜å‡½æ•°æ— æ³•è°ƒç”¨è¿­ä»£å™¨ã€‚\né‡è½½3ä¸ªæ¨¡æ¿å‚æ•°åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¼ å…¥çš„æ¨¡æ¿å‚æ•°æ¥æ§åˆ¶constç±»å‹\ntypedef __list_iterator&lt;T, T&amp;, T*&gt; iterator;typedef __list_iterator&lt;T, const T&amp;, const T*&gt; const_iterator;\n\nåŸºæœ¬çš„ç»“æ„å¼„æ¸…æ¥šä¹‹åï¼Œä¸‹é¢ä¸€èµ·æ¥çœ‹çœ‹ï¼Œè¿­ä»£å™¨çš„++å’Œ--ï¼Œè§£å¼•ç”¨ä»¥åŠæŒ‡é’ˆ-&gt;åˆ†åˆ«å¯¹åº”äº†é“¾è¡¨çš„ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ\n3.3.1 åŠ å‡å¥½å§ï¼Œå‰é¢å·²ç»æåˆ°è¿‡äº†ï¼Œæˆ‘ä»¬éœ€è¦ç”¨\tnext/prevæŒ‡é’ˆæ¥å®ŒæˆåŠ å‡æ“ä½œ\n//å‰ç½®++self&amp; operator++()&#123;    _node = _node-&gt;_next;    return *this;&#125;//åç½®++self operator++(int)&#123;    //selfæ˜¯æœ¬ç±»çš„åˆ«åï¼Œå› ä¸ºæ²¡æœ‰é‡è½½=æ“ä½œç¬¦    //æ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç›¸ç­‰ï¼Œè¦ç”¨æ„é€ å‡½æ•°    //self tmp = _node;    self tmp(*this);    _node = _node-&gt;_next;    return tmp;&#125;//å‰ç½®--self&amp; operator--()&#123;    _node = _node-&gt;_prev;    return *this;&#125;//åç½®--self operator--(int)&#123;    self tmp(*this);    _node = _node-&gt;_prev;    return tmp;&#125;\n\næ³¨æ„å‰ç½®å’Œåç½®çš„åŒºåˆ«ï¼Œåç½®åŠ å‡éœ€è¦å…ˆç”¨ä¸€ä¸ªtmpå˜é‡å‚¨å­˜åŸæœ¬çš„è¿­ä»£å™¨ä½ç½®ï¼Œå†è®©è¿­ä»£å™¨æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\nè€Œå½“æˆ‘ä»¬è§£å¼•ç”¨è¿­ä»£å™¨çš„æ—¶å€™ï¼Œæƒ³è·å–çš„å…¶å®æ˜¯_dataçš„å€¼ï¼Œè€Œä¸æ˜¯èŠ‚ç‚¹çš„åœ°å€ï¼ˆè¿™é‡Œè¿­ä»£å™¨ä¾æ—§æ˜¯ç”¨æŒ‡é’ˆæ¨¡æ‹Ÿçš„ï¼‰\n3.3.2 è§£å¼•ç”¨å’ŒæŒ‡é’ˆæ“ä½œæ‰€ä»¥é‡è½½åçš„è§£å¼•ç”¨æ“ä½œå¦‚ä¸‹\nRef operator*()&#123;    return _node-&gt;_data;//è¿”å›å€¼çš„å¼•ç”¨&#125;Ptr operator-&gt;()&#123;    return &amp;(_node-&gt;_data);//è¿”å›åœ°å€&#125;\n\n3.3.3 åˆ¤æ–­ç›¸ç­‰&#x2F;ä¸ç›¸ç­‰æœ€ååˆ¤æ–­ç›¸ç­‰å’Œä¸ç›¸ç­‰å°±å¾ˆç®€å•äº†ï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯æŒ‡é’ˆï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨åŸç”Ÿçš„!=è¿›è¡Œåˆ¤æ–­å³å¯\nbool operator!=(const self&amp; it)&#123;    return _node != it._node;&#125;bool operator==(const self&amp; it)&#123;    return _node == it._node;&#125;\n\nåˆ°è¿™é‡Œï¼Œä¸€ä¸ªå»ºè®®ç‰ˆæœ¬çš„æ­£å‘è¿­ä»£å™¨æˆ‘ä»¬å°±å®ç°å•¦ï¼\n\n3.3.4 begin&#x2F;endè¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨Listçš„æœ¬ç±»ä¸­è·å–è¿­ä»£å™¨çš„beginå’Œendï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è°ƒç”¨äº†è¿­ä»£å™¨çš„æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºæ¥ä¸€ä¸ªè¿­ä»£å™¨å¹¶è¿›è¡Œè¿”å›\nconst_iterator begin() const&#123;    //return _head-&gt;_next;//ä¸èƒ½ç›´æ¥è¿”å›æŒ‡é’ˆï¼ï¼    return const_iterator(_head-&gt;_next);&#125;const_iterator end() const&#123;    return const_iterator(_head);&#125;iterator begin()&#123;    return iterator(_head-&gt;_next);&#125;iterator end()&#123;    return iterator(_head);&#125;\n\nç°åœ¨å°±å¯ä»¥æ„‰å¿«çš„ç”¨è¿­ä»£å™¨è¿›è¡Œæ‰“å°æ“ä½œäº†ï¼\n\n\n3.4 æ„é€ å‡½æ•°æœ‰äº†è¿­ä»£å™¨ï¼Œç°åœ¨å°±å¯ä»¥å®Œæˆåº“å‡½æ•°é‡Œé¢çš„å‡ ä¸ªæ„é€ å‡½æ•°äº†ï¼ˆä¸»è¦æ˜¯è¿­ä»£å™¨åŒºé—´çš„é‚£ä¸ªå‡½æ•°ï¼‰\né»˜è®¤æ„é€ å‡½æ•°å¦‚ä¸‹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå†è®©å®ƒçš„å‰åéƒ½æŒ‡å‘è‡ªå·±ã€‚åœ¨Cè¯­è¨€çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„\nlist()   \t:_head(nullptr)   &#123;       //_head = new Node;       _head = new Node();       _head-&gt;_next = _head;       _head-&gt;_prev = _head;   &#125;\n\nä½†å…¶ä»–çš„æ„é€ å‡½æ•°ç”±äº_headä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å•ç‹¬å®ç°ä¸€ä¸ªç©ºåˆå§‹åŒ–å‡½æ•°æ¥åˆ›å»ºå¤´èŠ‚ç‚¹\n//å½“ä½¿ç”¨å…¶ä»–æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œheadè¿˜ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æ„é€ ä¸€ä¸ªvoid empty_init()&#123;    _head = new Node();    _head-&gt;_next = _head;    _head-&gt;_prev = _head;&#125;\n\nå½“ç„¶ï¼Œä¸Šé¢é‚£ä¸ªç©ºçš„æ„é€ å‡½æ•°list()ä¹Ÿå¯ä»¥å¤ç”¨empty_init()ï¼Œè¿™æ ·ä»£ç æ›´æ•´æ´\nè¿­ä»£å™¨åŒºé—´æ„é€ å’Œvectoræ˜¯ä¸€æ ·çš„ï¼Œå…¶ä¸»è¦æ˜¯è§£å¼•ç”¨åç›´æ¥å°†å€¼è¿›è¡Œå¤´æ’ï¼ˆè¿™é‡Œå°±ç”¨ä¸Šäº†ä¹‹å‰è¿­ä»£å™¨é‡Œé‡è½½çš„è§£å¼•ç”¨æ“ä½œï¼‰\ntemplate &lt;class InputIterator&gt;list(InputIterator first, InputIterator last)&#123;    empty_init();    InputIterator cur = first;    while (cur != last)    &#123;        //push_back(cur._node-&gt;_data);        push_back(*cur);        cur++;    &#125;&#125;\n\nè€Œæ‹·è´æ„é€ å°±å¯ä»¥ç›´æ¥å¤ç”¨è¿­ä»£å™¨åŒºé—´æ„é€ ï¼Œèµ‹å€¼é‡è½½å°±ç›´æ¥swapå³å¯ã€‚è¿™éƒ¨åˆ†çš„å®ç°å’Œvectoræ˜¯ä¸€æ ·çš„ï¼Œæœ‰é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\nvoid swap(list&lt;T&gt;&amp; lt)&#123;    std::swap(_head, lt._head);&#125;list(const list&lt;T&gt;&amp; lt)&#123;    empty_init();    list tmp(lt.begin(), lt.end());    swap(tmp);&#125;list&lt;T&gt;&amp; operator=(list&lt;T&gt; lt)&#123;    //ä¼ å‚æ²¡æœ‰ä¼ å¼•ç”¨ï¼Œltå·²ç»æ˜¯æ‹·è´æ„é€ ä¹‹åçš„ç»“æœäº†    //å®Œå…¨æ²¡å¿…è¦å†ç”¨tmpæ‹·è´æ„é€ ä¸€æ¬¡    //list&lt;T&gt; tmp(lt);    //clear();//å› ä¸ºtmpå‡ºäº†ç”Ÿå‘½å‘¨æœŸåä¼šé”€æ¯ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨clear    swap(lt);    return *this;&#125;\n\n\n3.5 ææ„å‡½æ•°å› ä¸ºé“¾è¡¨éœ€è¦æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªå»åˆ é™¤æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ç©ºé—´ï¼Œè¿™é‡Œéœ€è¦å•ç‹¬å®ç°ä¸€ä¸ªclearå‡½æ•°ä¾›ææ„å‡½æ•°ä½¿ç”¨\nvoid clear()&#123;    //assert(_head-&gt;_next != _head);    iterator it = begin();    while (it != end())    &#123;        //éœ€è¦ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡å‚¨å­˜è¯¥èŠ‚ç‚¹çš„è¿­ä»£å™¨ï¼Œé¿å…è¿­ä»£å™¨å¤±æ•ˆ        iterator its = it;        it++;        delete its._node;    &#125;&#125;~list()&#123;    clear();    delete _head;&#125;\n\nä¸Šé¢è¿™ä¸ªå‡½æ•°å°±æœ‰äº›éº»çƒ¦ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç›´æ¥å¤ç”¨eraseè¿›è¡Œåˆ é™¤æ“ä½œ+æ›´æ–°è¿­ä»£å™¨ï¼\nvoid clear()&#123;    iterator it = begin();    while (it != end())    &#123;        it = erase(it);    &#125;&#125;\n\nåˆ°è¿™é‡Œï¼Œä¸€ä¸ªåŸºæœ¬çš„listå°±æ¨¡æ‹Ÿå®ç°å®Œæˆäº†ï¼\n3.6 æ“ä½œè‡ªå®šä¹‰ç±»å‹æˆ‘ä»¬åˆšåˆšå®ç°çš„listå’ŒSTLåº“ä¸­çš„ä¸€æ ·ï¼Œéƒ½å¯ä»¥å­˜æ”¾è‡ªå®šä¹‰ç±»å‹\nstruct TA&#123;\tTA(int a1 = 0, int a2 = 0)\t\t:_a1(a1),\t\t_a2(a2)\t&#123;&#125;\tint _a1;\tint _a2;&#125;;void test03()&#123;\tlist&lt;TA&gt; lt;\tlt.push_back(TA(1, 1));\tlt.push_back(TA(2, 2));\tlt.push_back(TA(3, 3));\tlt.push_back(TA(4, 4));\t//è¿™é‡Œå› ä¸ºTAç±»çš„æµæ’å…¥æ²¡æœ‰é‡è½½ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å†™\tlist&lt;TA&gt;::iterator it = lt.begin();\twhile (it != lt.end())\t&#123;\t\tcout &lt;&lt; it-&gt;_a1 &lt;&lt; &quot;-&quot; &lt;&lt; it-&gt;_a2 &lt;&lt; &quot; &quot;;\t\t++it;\t&#125;\tcout &lt;&lt; endl;&#125;\n\nä½†åœ¨æ‰“å°å’Œè®¿é—®è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é‡è½½çš„è§£å¼•ç”¨æ“ä½œç¬¦å°±ä¸èƒ½ç”¨äº†ï¼Œè¿™å°±æ˜¯ä¸ºå•¥è¦é‡è½½-&gt;æ“ä½œç¬¦ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡-&gt;è·å–åˆ°è¿­ä»£å™¨æ‰€æŒ‡çš„å¯¹è±¡çš„æˆå‘˜ï¼Œè¿™æ—¶å€™ç›´æ¥æ‰“å°æˆå‘˜å˜é‡å³å¯ï¼\n\nä½ å¯èƒ½è§‰å¾—ï¼Œè¿™ä¸å¯¹å•Šï¼ä¹‹å‰é‡è½½çš„è¿™ä¸ªæ“ä½œç¬¦ä¸æ˜¯è¿”å›çš„èŠ‚ç‚¹_dataçš„åœ°å€å—ï¼Ÿä¸ºå•¥å¯ä»¥ç›´æ¥è®¿é—®_dataçš„æˆå‘˜ï¼Ÿ\nPtr operator-&gt;()&#123;    return &amp;(_node-&gt;_data);//è¿”å›åœ°å€&#125;\n\nå®é™…ä¸Šï¼Œè¿™é‡Œåº”è¯¥æ˜¯it-&gt;-&gt;_a1ï¼Œä½†æ˜¯ç¼–è¯‘å™¨åœ¨å¤„ç†çš„æ—¶å€™ç›´æ¥å°†ä¸¤ä¸ªè®¿é—®ç®­å¤´ç®€åŒ–æˆäº†ä¸€ä¸ªï¼Œå³å¢åŠ äº†ä»£ç å¯è¯»æ€§ï¼Œä¹Ÿæ–¹ä¾¿ä½¿ç”¨äº†ï¼\n\n3.7 åå‘è¿­ä»£å™¨ï¼ˆé€‚é…é—®é¢˜ï¼‰å…³äºåå‘è¿­ä»£å™¨ï¼Œè¿™é‡Œç‰µæ‰¯åˆ°ä¸€ä¸ªæ›´æ·±çš„é€‚é…é—®é¢˜ã€‚æˆ‘ç”¨æˆ‘çš„ç¬¨è¯ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œæœ‰é—®é¢˜æˆ–è€…æœ‰å•¥é”™è¯¯çš„è¯æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼ğŸ˜‚\næˆ‘ä»¬çŸ¥é“ï¼Œåå‘è¿­ä»£å™¨æ˜¯ä»åå¾€å‰èµ°çš„ï¼Œå®ƒçš„åŠ å‡æ“ä½œå’Œæ­£å‘è¿­ä»£å™¨ç›¸åã€‚\né‚£ä¹ˆæ¯”èµ·å•ç‹¬å®ç°ä¸€ä¸ªåå‘è¿­ä»£å™¨çš„ç±»ï¼Œæˆ‘ä»¬å¯å¦åˆ©ç”¨æ­£å‘è¿­ä»£å™¨ï¼Œç›´æ¥é€‚é…å‡ºä¸€ä¸ªåå‘è¿­ä»£å™¨å‘¢ï¼Ÿæ¯•ç«Ÿçœ‹èµ·æ¥å®ƒä»¬åªæœ‰æ–¹å‘ä¸åŒï¼\ntemplate&lt;class Iterator, class Ref, class Ptr&gt;struct Reverse_iterator&#123;\tIterator _it;\ttypedef Reverse_iterator&lt;Iterator, Ref, Ptr&gt; Self;              Reverse_iterator(Iterator it)\t\t:_it(it)\t&#123;&#125;   &#125;;\n\nè¯´ä¸Šå°±ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå°†åå‘è¿­ä»£å™¨è®¾å®šä¸ºå’Œæ­£å‘ç›¸ä¼¼çš„ç»“æ„ï¼Œä¸è¿‡å®ƒçš„æ¨¡æ¿å‚æ•°å˜æˆäº†æ­£å‘è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯å‚æ•°ç±»å‹Tï¼Œè¿™åœ¨åç»­typdefçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\né™¤äº†ä¸‹é¢çš„è§£å¼•ç”¨æ“ä½œä¹‹å¤–ï¼Œå…¶ä»–åªéœ€è¦å§æ­£å‘è¿­ä»£å™¨åè¿‡æ¥ç”¨ï¼Œå°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼\nRef operator*()&#123;    Iterator tmp = _it;    return *(--tmp);//åå‘è¿­ä»£å™¨è§£å¼•ç”¨è®¿é—®çš„æ˜¯å‰ä¸€ä¸ªä½ç½®çš„æ•°æ®&#125;Ptr operator-&gt;()&#123;    return &amp;(operator*());&#125;\n\nè§£å¼•ç”¨è®¿é—®å‰ä¸€ä¸ªæ•°æ®çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬åˆ¤æ–­ç»“æŸæ˜¯ç”¨!=rend()ï¼Œè€Œrend()æŒ‡å‘çš„æ˜¯åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆæ•°æ®ï¼Œå¦‚æœç›´æ¥è§£å¼•ç”¨å½“å‰å†…å®¹ï¼Œæœ€åä¸€ä¸ªæ•°æ®å°±æ— æ³•è®¿é—®åˆ°ï¼Œå‡ºç°äº†ç¼ºæ¼\n\n//å‰ç½®++Self&amp; operator++()&#123;    --_it;    return *this;&#125;//å‰ç½®--Self&amp; operator--()&#123;    ++_it;    return *this;&#125;bool operator!=(const Self&amp; s)&#123;    return _it != s._it;&#125;\n\næ›´åŠ å®Œæ•´çš„æºç å¯ä»¥å»çœ‹æˆ‘çš„Giteeä»“åº“å“¦ï¼\n\nå®Œæˆäº†ä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬éœ€è¦åœ¨listæœ¬ç±»é‡Œé¢è¿›è¡Œä¸€æ³¢æ“ä½œï¼Œè®©å®ƒèƒ½å¤Ÿæ”¯æŒåå‘è¿­ä»£å™¨\n//æ”¯æŒåå‘è¿­ä»£å™¨typedef Reverse_iterator&lt;iterator, T&amp;, T*&gt; reverse_iterator;typedef Reverse_iterator&lt;const_iterator, const T&amp;, const T*&gt; const_reverse_iterator;\n\næ³¨æ„ä¸Šé¢çš„æ¨¡æ¿å‚æ•°ï¼Œç¬¬ä¸€ä¸ªéœ€è¦ä¼ å…¥æ­£å‘è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯T\n//è°ƒç”¨åå‘è¿­ä»£å™¨çš„æ„é€ å‡½æ•°reverse_iterator rbegin()&#123;    return reverse_iterator(end());&#125;reverse_iterator rend()&#123;    return reverse_iterator(begin());&#125;const_reverse_iterator rbegin()const&#123;    return const_reverse_iterator(end());&#125;const_reverse_iterator rend()const&#123;    return const_reverse_iterator(begin());&#125;\n\nç”¨ä¸€ä¸ªæ‰“å°ä»£ç ä¾¿å¯ä»¥æµ‹è¯•å‡ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¦æ­£ç¡®ï¼\nå¯ä»¥çœ‹åˆ°ï¼Œå®Œç¾é€†å‘æ‰“å°å‡ºäº†å†…å®¹ï¼\n\nåˆ©ç”¨æ­£å‘è¿­ä»£å™¨è¿›è¡Œé€‚é…çš„æœ€å¤§å¥½å¤„ï¼Œé‚£å°±æ˜¯å…¶ä»–æ¨¡æ‹Ÿå®ç°çš„å®¹å™¨ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªåå‘è¿­ä»£å™¨ï¼Œåªè¦åœ¨æœ¬ç±»ä¸­åŠ å…¥ä¸Šé¢çš„typedefå’Œ4ä¸ªå‡½æ•°å³å¯ï¼\nå°±ä»¥ä¸Šç¯‡åšå®¢çš„vectorä¸ºä¾‹ï¼ŒåŠ ä¸Šä¸Šè¿°ä»£ç åï¼Œå¥¹ä¹Ÿèƒ½æ”¯æŒåå‘è¿­ä»£å™¨äº†ï¼ï¼ˆæºç ä¹Ÿä¸Šä¼ åˆ°ä»“åº“é‡Œé¢äº†ï¼‰\n\n\nç»“è¯­æœ¬æ¬¡listçš„æ¨¡æ‹Ÿå®ç°ï¼Œæˆ‘ä»¬å°è¯•æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„è¿­ä»£å™¨ç±»ï¼Œå¹¶å®ç°äº†åå‘è¿­ä»£å™¨\næœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æœ¬åšå®¢æœ‰é”™è¯¯ï¼Œéƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€C++ã€‘STLï¼šstack/queue/priority_queue/deque","url":"/2022/07/18/note_cpp/13STL_stack_queue/","content":"æ¥å–½ï¼ŒSTLçš„æ ˆå’Œé˜Ÿåˆ—ï¼\n\n\n[TOC]\n1.Stackæ ˆæ˜¯ä¸€ä¸ªéµå¾ªLIFOè§„åˆ™çš„å®¹å™¨ï¼Œå³åè¿›å…ˆå‡ºï¼ˆlast in first outï¼‰ã€‚åæ”¾å…¥å®¹å™¨å†…çš„æ•°æ®ä¼šå…ˆå‡ºæ¥ã€‚\n\nå¦‚æœä½ ä¸å¤ªç†è§£æ ˆçš„æ€§è´¨ï¼Œå¯ä»¥å…ˆçœ‹çœ‹æˆ‘å†™çš„Cè¯­è¨€æ ˆçš„åšå®¢ã€é“¾æ¥ã€‘\n\næ‰“å¼€Cplusplusä¸€çœ‹ï¼Œæ ˆçš„å‡½æ•°è‚‰çœ¼å¯è§çš„å°‘ã€‚è¿™å’Œæˆ‘ä»¬Cè¯­è¨€å®ç°çš„åŠŸèƒ½åŸºæœ¬æ˜¯ä¸€æ ·çš„ã€‚\n\nå®ƒç”šè‡³æ²¡æœ‰æ‹·è´æ„é€ ï¼\n\n1.1 å®¹å™¨é€‚é…å™¨ç­‰ä¼šï¼Œè¿™ä¸ªcontaineræ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ\nåˆ«æ€¥ï¼Œå…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ ˆçš„ç±»å®šä¹‰ğŸ‘‡\nstd::stacktemplate &lt;class T, class Container = deque&lt;T&gt; &gt; class stack;\n\nå’Œä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå‡ºç°äº†containerï¼Œå’Œä¸€ä¸ªæˆ‘ä»¬å¥½åƒæ²¡æœ‰æ¥è§¦è¿‡çš„deque\næœç´¢åå¾—çŸ¥ï¼Œdequeä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ï¼Œè¢«ç§°ä¸ºåŒç«¯é˜Ÿåˆ—\n\n\né‚£ä¹ˆæ ˆä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªå®¹å™¨å‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæ ˆä¸æ˜¯ç›´æ¥å†™å‡ºæ¥çš„ä»£ç ï¼Œè€Œæ˜¯å€Ÿç”¨äº†dequeè¿™ä¸ªå®¹å™¨ï¼Œè¿›è¡Œå°è£…åçš„ç»“æœã€‚\næ„æ€å°±æ˜¯ï¼Œæ ˆå…¶å®æ˜¯è§£ç”¨äº†åˆ«äººçš„ä»£ç ï¼\næ¯”å¦‚dequeæœ‰å¤´æ’å¤´åˆ ï¼Œå°¾æ’å°¾åˆ ã€‚è€Œæˆ‘ä»¬çš„æ ˆåªéœ€è¦å°¾æ’å°¾åˆ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŒ…è£…ä¸€ä¸‹dequeï¼Œåªæä¾›å°¾æ’å°¾åˆ çš„å‡½æ•°ï¼Œä¸å°±æˆäº†æ ˆäº†ï¼Ÿ\n\n1.2 æ¨¡æ‹Ÿå®ç°ç›´æ¥è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹å¹²å·´å·´ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç ï¼\ntemplate&lt;class T, class Container = deque&lt;T&gt;&gt;class stack &#123;public:\tsize_t size()const &#123;\t\treturn _con.size();\t&#125;\t\tconst T&amp; top() &#123;\t\treturn _con.back();\t&#125;\tvoid push(const T&amp; val) &#123;\t\t_con.push_back(val);\t&#125;\tvoid pop() &#123;\t\t_con.pop_back();\t&#125;\tbool empty() &#123;\t\treturn _con.empty();\t&#125;private:\tContainer _con;&#125;;\n\nä»¥ä¸Šä¾¿æ˜¯æ ˆçš„æ¨¡æ‹Ÿå®ç°ä»£ç ï¼\nWhatï¼Ÿè¿™å°±ç»“æŸäº†ï¼Ÿâ€”â€”ç”šè‡³å†™çš„æ¯”æˆ‘ä»¬Cè¯­è¨€ç‰ˆæœ¬çš„æ ˆæ›´å°‘ï¼\n\næœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªContainerçš„å¯¹è±¡ _conï¼Œå†å€ŸåŠ©è¿™ä¸ªå¯¹è±¡çš„å‡½æ•°è¿›è¡Œå°è£…ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªæ ˆï¼\nå› ä¸ºæ¨¡æ¿é‡Œé¢é»˜è®¤ä¼ å…¥çš„æ˜¯dequeï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„ä¾¿æ˜¯dequeçš„å‡½æ•°äº†ã€‚è¿™å°±å¥½æ¯”å‡½æ•°ä¼ å…¥äº†ä¸€ä¸ªç¼ºçœå€¼ã€‚ä½ å¯ä»¥å°†dequeæ¢æˆå…¶ä»–æœ‰å°¾æ’å°¾åˆ å‡½æ•°çš„å®¹å™¨ï¼Œæ¯”å¦‚vector\næµ‹è¯•ä¸€ä¸‹ï¼Œè«å¾—é—®é¢˜ï¼\n\n\n2.queueå’Œæ ˆä¸åŒï¼Œé˜Ÿåˆ—éµå¾ªFIFOï¼Œå³å…ˆè¿›å…ˆå‡ºï¼ˆfirst in first outï¼‰\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åŒ…è£…ä¸€ä¸‹å®¹å™¨ï¼Œå³å¯å®Œæˆæ¨¡æ‹Ÿå®ç°\nstd::queuetemplate &lt;class T, class Container = deque&lt;T&gt; &gt; class queue;\n\n2.1 æ¨¡æ‹Ÿå®ç°template&lt;class T, class Container = deque&lt;T&gt;&gt;class queue &#123;public:\tsize_t size()const&#123;\t\treturn _con.size();\t&#125;\tconst T&amp; front()&#123;\t\treturn _con.front();\t&#125;\tconst T&amp; back()&#123;\t\treturn _con.back();\t&#125;\tvoid push(const T&amp; val)&#123;\t\t_con.push_back(val);\t&#125;\tvoid pop()&#123;\t\t_con.pop_front();\t&#125;\tbool empty()&#123;\t\treturn _con.empty();\t&#125;private:\tContainer _con;&#125;;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé˜Ÿåˆ—å°±ä¸èƒ½ç”¨vectoræ¥å½“ä½œå®¹å™¨è¾£ï¼å› ä¸ºvectorå¤´æ’åˆ çš„æ•ˆç‡å¾ˆä½ï¼Œéœ€è¦æŒªåŠ¨æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨listæ¥å½“ä½œå®¹å™¨\n\nå½“ç„¶ï¼Œä½ å¯ä»¥æŠŠå¤´æ’å¤´åˆ æ”¹æˆinsertå’Œeraseï¼Œä½†æ˜¯é‚£æ ·æ²¡æœ‰æ„ä¹‰ï¼Œä¾æ—§æ‹–æ…¢äº†æ•ˆç‡\nå› ä¸ºæ ˆå’Œé˜Ÿåˆ—å‹æ ¹ä¸æ”¯æŒè¿­ä»£å™¨ï¼Œè‡ªç„¶ä¹Ÿæ²¡æœ‰è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ï¼\n2.2 å…³äºqueueçš„frontå­¦ä¹ linuxè¯¾ç¨‹çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœqueueé‡Œé¢æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥è®¿é—®frontä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿä¼šå‡ºç°å¼‚å¸¸å—ï¼Ÿ\n#include&lt;stdio.h&gt;#include&lt;iostream&gt;#include&lt;queue&gt;using namespace std;int main()&#123;Â  Â  printf(&quot;hello vscode!\\n&quot;);Â  Â  queue&lt;int&gt; q;//ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯æ•°æ®æ— æ•ˆÂ  Â  cout &lt;&lt; q.front() &lt;&lt; endl;Â  Â  return 0;&#125;\n\nåœ¨linuxä¸‹ç”¨g++ç¼–è¯‘è¿è¡Œï¼Œå‘ç°è·å–åˆ°çš„å€¼æ˜¯0\n[muxue@bt-7274:~/git/test]$ ./testhello vscode!0\n\nç®€å•æ¦‚æ‹¬ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°æ®ï¼Œæ­¤æ—¶è°ƒç”¨frontæ¥å£ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è·å–åˆ°çš„æ•°æ®æ˜¯æ— æ•ˆçš„ã€‚\nä¸ªäººçŒœæµ‹ï¼Œè¿™é‡Œèƒ½å¦è·å–åˆ°æ•°æ®ä¹Ÿå’Œç¼–è¯‘å™¨çš„ä¼˜åŒ–æœ‰å…³ã€‚æ¯”å¦‚ç›¸åŒçš„ä»£ç ï¼Œåœ¨vs2019ä¸‹ï¼Œä¼šç›´æ¥æŠ¥asserté”™è¯¯ï¼\n\næ‰€ä»¥ï¼Œä¸ºäº†ä»£ç çš„å…¼å®¹æ€§ï¼Œè¯·ä¸¥æ ¼æ£€æŸ¥è°ƒç”¨frontçš„æ—¶å€™é˜Ÿåˆ—é‡Œé¢æœ‰æ²¡æœ‰æ•°æ®ï¼Œstackçš„topåŒç†\n\näº†è§£å®Œç›¸å¯¹ç®€å•çš„æ ˆå’Œé˜Ÿåˆ—ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥çœ‹çœ‹ä¼˜å…ˆçº§é˜Ÿåˆ—\n3.priority_queue ä¼˜å…ˆçº§é˜Ÿåˆ—ä¼˜å…ˆçº§é˜Ÿåˆ—å’ŒqueueåŒå±äºå¤´æ–‡ä»¶&lt;queue&gt;\ntemplate &lt;class T, class Container = vector&lt;T&gt;,  class Compare = less&lt;typename Container::value_type&gt; &gt; class priority_queue;\n\n\né‚£ä¹ˆå®ƒå’Œæ™®é€šçš„é˜Ÿåˆ—æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\n\nä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå †ï¼Œä¸”é»˜è®¤æ˜¯å¤§å †\n\nå¦‚æœä½ ä¸çŸ¥é“å †æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰Cè¯­è¨€æ•°æ®ç»“æ„çš„åšå®¢ã€é“¾æ¥ã€‘\n\nç®€å•è¯´æ¥ï¼Œå †çš„å †é¡¶ï¼ˆè¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªæ•°æ®ï¼‰ä¸€ç›´ä¿æŒç€æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ã€‚æ¯ä¸€æ¬¡æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œéƒ½éœ€è¦å‘ä¸Šã€å‘ä¸‹é‡æ–°è°ƒæ•´å®¹å™¨å†…å…ƒç´ çš„ä½ç½®\n3.1 make_heapè¿™é‡Œç®€å•è¯´ä¸€ä¸‹å¦å¤–ä¸€ä¸ªå‡½æ•°make_heapï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡è¿­ä»£å™¨åŒºé—´ï¼Œå°†åŒºé—´å†…çš„æ•°æ®è°ƒæ•´ä¸ºä¸€ä¸ªå †ã€‚\n\nåœ¨æ–‡æ¡£ä»‹ç»é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€è¡Œæåˆ°äº†ä¼˜å…ˆçº§é˜Ÿåˆ—å°±æ˜¯è‡ªåŠ¨è°ƒç”¨make_heapå‡½æ•°æ¥ç»´æŠ¤è‡ªå·±å †çš„å±æ€§çš„\n\n3.2 å‡½æ•°æ¥å£ä¼˜å…ˆçº§é˜Ÿåˆ—æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®ƒæä¾›çš„å‡½æ•°ä¹Ÿå¾ˆå°‘\nä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„topå †é¡¶æŒ‡çš„æ˜¯å®¹å™¨ä¸­é¦–ä¸ªå…ƒç´ ï¼Œpopä¹Ÿæ˜¯ç§»é™¤å †é¡¶å…ƒç´ \n\n3.3 ä»¿å‡½æ•°\næ³¨æ„è¿™é‡Œå‡ºç°äº†ç¬¬ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼ŒCompare\nè¿™æ˜¯ä¸€ä¸ªä»¿å‡½æ•°ï¼Œå…¶å°±æ˜¯ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ä»¿ç…§äº†å‡½æ•°çš„è°ƒç”¨æ–¹å¼\næƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦é‡è½½()æ“ä½œç¬¦\n//ä»¿å‡½æ•°ï¼Œé‡è½½ï¼ˆï¼‰æ“ä½œç¬¦\ttemplate&lt;class T&gt;\tstruct less &#123;\t\tbool operator()(const T&amp; a, const T&amp; b)const\t\t&#123;\t\t\treturn a &lt; b;\t\t&#125;\t&#125;;\t//å¤§äºæ¯”è¾ƒ\ttemplate&lt;class T&gt;\tstruct greater&#123;\t\tbool operator()(const T&amp; a, const T&amp; b)const\t\t&#123;\t\t\treturn a &gt; b;\t\t&#125;\t&#125;;\n\næ¯”å¦‚è¿™é‡Œçš„lesså’Œgreaterå°±æ˜¯ä¸¤ä¸ªä»¿å‡½æ•°ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—éœ€è¦ç”¨å®ƒæ¥è¿›è¡Œæ¯”è¾ƒã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿåœ¨å¤§å †å’Œå°å †ç›´æ¥è¿›è¡Œåˆ‡æ¢ã€‚\nå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼å’Œå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼ä¸è¿‡åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡\nless func;func(1,2);\n\nåº“å‡½æ•°ä¸­çš„lesså’Œgreateréƒ½åœ¨&lt;functional&gt;è¿™ä¸ªå¤´æ–‡ä»¶ä¸­\n\n\nstdåº“ä¸­ä¼˜å…ˆçº§é˜Ÿåˆ—é»˜è®¤ä¼ çš„lesså°äºæ¯”è¾ƒï¼Œä¸ºå¤§å †ï¼\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¼ å…¥greaterï¼Œå³å¯å˜æˆå°å †\n\n3.4 æ¨¡æ‹Ÿå®ç°åœ¨3.3ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°å‡ºäº†åº“å‡½æ•°ä¸­çš„lesså’Œgreaterè¿™ä¸¤ä¸ªä»¿å‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦åŒ…è£…ä¸€ä¸‹ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£ï¼Œå³å¯ä½¿ç”¨ï¼\ntemplate &lt;class T, class Container = vector&lt;T&gt;,class Compare = less&lt;T&gt; &gt;\tclass priority_queue\t&#123;\tpublic:\t\tsize_t size()const &#123;\t\t\treturn _con.size();\t\t&#125;\t\tconst T&amp; top() &#123;\t\t\treturn _con[0];\t\t&#125;\t\tbool empty() &#123;\t\t\treturn _con.empty();\t\t&#125;\t\t//å‘ä¸Šè°ƒæ•´\t\tvoid AdjustUp(size_t child)\t\t&#123;\t\t\tCompare comFunc;\t\t\twhile (child &gt; 0)\t\t\t&#123;\t\t\t\tsize_t parent = (child - 1) / 2;\t\t\t\tif (comFunc(_con[parent],_con[child]))//å°å †ï¼Œå°çš„æ•°æ®å¾€ä¸Šè°ƒ\t\t\t\t&#123;\t\t\t\t\tstd::swap(_con[parent], _con[child]);\t\t\t\t\tchild = parent;\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\treturn;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125;\t\t//å‘ä¸‹è°ƒæ•´\t\tvoid AdjustDown(size_t parent)\t\t&#123;\t\t\tCompare comFunc;\t\t\tsize_t child = parent * 2 + 1;//å·¦å­©å­\t\t\twhile (child &lt; _con.size())\t\t\t&#123;\t\t\t\t//æ‰¾å·¦å³å­©å­ä¸­å°çš„é‚£ä¸€ä¸ª\t\t\t\tif (child + 1 &lt; _con.size() &amp;&amp; comFunc(_con[child], _con[child + 1]))\t\t\t\t&#123;//å¦‚æœå·¦å­©å­å¤§äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t\t\t\tchild++;\t\t\t\t&#125;\t\t\t\tif (comFunc(_con[parent],_con[child]))\t\t\t\t&#123;\t\t\t\t\tstd::swap(_con[parent], _con[child]);\t\t\t\t\tparent = child;\t\t\t\t\tchild = parent * 2 + 1;\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\treturn;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125;\t\t//å› ä¸ºæ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè°ƒæ•´\t\t//é»˜è®¤æƒ…å†µä¸‹ç¬¬ä¸€ä¸ªå…ƒç´ å§‹ç»ˆæ˜¯æœ€å¤§å…ƒç´ \t\tvoid push(const T&amp; val) \t\t&#123;\t\t\t_con.push_back(val);\t\t\tAdjustUp(_con.size() - 1);\t\t&#125;\t\tvoid pop() \t\t&#123;\t\t\tassert(!_con.empty());\t\t\tswap(_con[0], _con[_con.size() - 1]);\t\t\t_con.pop_back();\t\t\tAdjustDown(0);\t\t&#125;\t\t\tprivate:\t\tContainer _con;\t&#125;;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¾¿æ˜¯adjustdown/upè¿™ä¸¤ä¸ªç”¨æ¥ç»´æŒå †å±æ€§çš„è°ƒæ•´å‡½æ•°ï¼Œä½ å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ï¼Œé‡Œé¢æœ‰å…³äºè¿™éƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šï¼å›åˆ°ä¸Šé¢\nå…ˆæ¥æµ‹è¯•ä¸€ä¸‹é»˜è®¤å¤§å †çš„å±æ€§\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„æ•°æ®æ˜¯æŒ‰ä»å¤§åˆ°å°é¡ºåºå­˜æ”¾çš„ï¼\nå¦‚æœæˆ‘ä»¬æ˜¾ç¤ºä¼ å…¥greatreä»¿å‡½æ•°ï¼Œå°±ä¼šå˜æˆä»å°åˆ°å¤§\n\nåŒæ—¶ï¼Œå³ä¾¿æˆ‘ä»¬popäº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¹Ÿä¸ä¼šå½±å“å †çš„å±æ€§\n\nä¼˜å…ˆçº§é˜Ÿåˆ—åœ¨ä¸€éƒ¨åˆ†åœ°æ–¹å¯ä»¥ç”¨äºå¸®æˆ‘ä»¬æ‰¾åˆ°ä¸€æ®µæ•°æ®ä¸­çš„topKå’Œç¬¬nä¸ªæœ€å¤§&#x2F;å°çš„æ•°æ®\næ¯”å¦‚ä¸‹é¢è¿™é“leetcode OJé¢˜ç›®215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ \n\næˆ‘ä»¬åªéœ€è¦popæ‰å‰é¢çš„K-1ä¸ªå…ƒç´ ï¼Œè¿™æ—¶å€™çš„å †é¡¶å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç¬¬Kä¸ªæœ€å¤§å€¼\n\n4.dequeå‰é¢å·²ç»æåˆ°äº†dequeè¿™ä¸ªå®¹å™¨ï¼Œå®ƒæ‹¥æœ‰çš„åº“å‡½æ•°å’Œvectorå¾ˆç›¸ä¼¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å…³æ³¨å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå®¹å™¨ï¼Œè€Œæ˜¯æ¥è°ˆè°ˆè¿™ä¸ªâ€œåŒç«¯é˜Ÿåˆ—â€ç›¸æ¯”äºvector/listæœ‰æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ¿\nstd::dequetemplate &lt; class T, class Alloc = allocator&lt;T&gt; &gt; class deque;\n\n4.1å­˜å‚¨ç»“æ„dequeæœ€ç‰¹æ®Šçš„å°±æ˜¯å®ƒçš„å­˜å‚¨ç»“æ„äº†ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªè¿ç»­çš„ç»“æ„ï¼Œä¹Ÿä¸åƒé“¾è¡¨ä¸€æ ·æ¯ä¸ªæ•°æ®éƒ½æœ‰è‡ªå·±çš„å•ç‹¬èŠ‚ç‚¹\nè¿™ä¸ªæ˜¯ç™¾åº¦ç™¾ç§‘ä¸Šæ‰¾åˆ°çš„ä¸€å¼ å›¾ç‰‡\n\n\nhttps://www.cnblogs.com/yifengs/p/15190416.html\n\nå…¶å®dequeæœ‰ç‚¹ç±»ä¼¼äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆæŒ‡å‘é˜Ÿåˆ—å¤´ï¼Œä¸€ä¸ªå°¾æŒ‡é’ˆæŒ‡å‘é˜Ÿåˆ—å°¾éƒ¨ã€‚ä¸»æ•°ç»„â€œä¸­æ§å™¨â€å­˜æ”¾çš„åˆ™æ˜¯è¿™äº›æ•°ç»„çš„æŒ‡é’ˆã€‚æ³¨ï¼šæ¯ä¸€ä¸ªæ•°ç»„çš„å®¹é‡å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å­˜æ”¾åœ¨ä¸­é—´çš„æ•°ç»„ä¸€å®šæ˜¯æ»¡çš„ï¼\n\nè¿™æ ·æˆ‘ä»¬å°±é¿å…äº†listèŠ‚ç‚¹åˆ†æ•£ï¼Œéœ€è¦å¤šæ¬¡å¼€ç©ºé—´ï¼Œæ— æ³•éšæœºè®¿é—®çš„ç¼ºé™·ï¼›åˆå¯ä»¥çµæ´»å¿«é€Ÿåœ°è¿›è¡Œå¤´æ’å¤´åˆ æ“ä½œï¼Œè€Œä¸éœ€è¦æŒªåŠ¨æ•°æ®ã€‚\nå½“ç„¶ï¼Œdequeçš„éšæœºè®¿é—®æ€§èƒ½è‚¯å®šä¸å¦‚æ•°æ®è¿ç»­å­˜å‚¨çš„vectorï¼Œå…¶æ›´é€‚åˆä¸‹é¢çš„åœºæ™¯ï¼š\n\néœ€è¦é«˜æ€§èƒ½çš„å¤´æ’å¤´åˆ ï¼Œå°¾æ’å°¾åˆ \nå¶å°”éœ€è¦è¿›è¡Œéšæœºè®¿é—®\n\nç»“è¯­å…³äºæ ˆå’Œé˜Ÿåˆ—çš„éƒ¨åˆ†åˆ°è¿™é‡Œå°±ç»“æŸè¾£ï¼\næˆ‘ä»¬è¿˜è®¤è¯†äº†åŒç«¯é˜Ÿåˆ—dequeï¼Œä»¥åŠè®©å…¶ä½œä¸ºå®¹å™¨çš„æ¨¡æ‹Ÿå®ç°æ“ä½œ\n\næœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºæå‡ºï¼\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€C++ã€‘æœç´¢äºŒå‰æ ‘/KVLæ ‘","url":"/2022/08/01/note_cpp/15%E4%BA%8C%E5%8F%89%E6%A0%91%E8%BF%9B%E9%98%B6/","content":"æš‘å‡å·²ç»è¿‡å»ä¸€åŠäº†ï¼Œä½ çš„ä½œä¸šå†™çš„æ€ä¹ˆæ ·äº†ï¼Ÿ\nä¸å…«å…«è¿™äº›æ²¡å•¥ç”¨çš„äº†ï¼Œæœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹æœç´¢äºŒå‰æ ‘ä»¥åŠKVLæ ‘ï¼Œä¹Ÿä¸ºåç»­å­¦ä¹ mapå’Œsetæ‰“ä¸‹åŸºç¡€ã€‚\n\n\n\nåœ¨ä¹‹å‰ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡ç”¨Cè¯­è¨€å®ç°çš„äºŒå‰æ ‘åšå®¢ã€‚å¦‚æœä½ æƒ³äº†è§£äºŒå‰æ ‘çš„åŸºæœ¬å®šä¹‰ï¼Œå¯ä»¥çœ‹çœ‹ğŸ‘‰ ã€ä¼ é€é—¨ã€‘\n\n[TOC]\nå‰è¨€æ ‘æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­éå¸¸å¸¸è§çš„ç©æ„ï¼Œå…¶ç‰¹ç‚¹ä¾¿æ˜¯ä»ä¸‹è€Œä¸Šæœ‰éå¸¸å¤šçš„åˆ†å‰\n\n\næ•°æ®ç»“æ„ä¸­çš„æ ‘ä¾¿æ˜¯ä»¥è¯¥ç‰¹ç‚¹å‘½åçš„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ä¼šæœ‰å·¦å³ä¸¤ä¸ªåˆ†å‰æ¥é“¾æ¥å·¦å³å­æ ‘ï¼Œä»è€Œæ„æˆä¸€ç§æ•°æ®ç»“æ„ã€‚\n1.æœç´¢äºŒå‰æ ‘æ‰€è°“æœç´¢äºŒå‰æ ‘ï¼ˆäºŒå‰æŸ¥æ‰¾æ ‘ï¼‰ï¼Œä¾¿æ˜¯è‡´åŠ›äºæ–¹ä¾¿æœç´¢çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…¶å…·æœ‰ä¸€ä¸‹ç‰¹ç‚¹ï¼š\n\næ¯”è¯¥èŠ‚ç‚¹å¤§çš„æ•°å­˜æ”¾åœ¨å³è¾¹\næ¯”è¯¥èŠ‚ç‚¹å°çš„æ•°å­˜æ”¾åœ¨å·¦è¾¹\n\nè¿™æ ·å½“æˆ‘ä»¬å»éå†ä¸€é¢—æœç´¢äºŒå‰æ ‘çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡å¤§å°æ¯”è¾ƒæ‰¾åˆ°å…¶å†…éƒ¨æ˜¯å¦åŒ…å«æˆ‘ä»¬éœ€è¦æœç´¢çš„èŠ‚ç‚¹ã€‚è¿™æ ·åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæœç´¢çš„æ—¶é—´å¤æ‚åº¦èƒ½æ§åˆ¶åœ¨O(logN)ï¼Œè¿˜æ˜¯éå¸¸å¿«çš„ä¸€ä¸ªæœç´¢ç®—æ³•ï¼\nå› ä¸ºæœç´¢äºŒå‰æ ‘ä¸»è¦ç”¨äºæœç´¢è€Œä¸æ˜¯å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹çš„æœç´¢äºŒå‰æ ‘æ˜¯ä¸å…è®¸æ•°æ®å†—ä½™çš„ã€‚å³ç›¸åŒçš„å€¼åªä¼šå­˜å‚¨ä¸€æ¬¡\n\nåŒæ—¶ï¼Œæœç´¢äºŒå‰æ ‘å¯ä½œä¸ºæ’åºç®—æ³•çš„ä¸€ç§ã€‚å½“æˆ‘ä»¬ç”¨ä¸­åºéå†æœç´¢äºŒå‰æ ‘ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯æœ‰åºçš„\n\n\n1.1 åŸºæœ¬æ„å»ºæƒ³è¦æ„å»ºä¸€ä¸ªæœç´¢äºŒå‰æ ‘ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‘çš„èŠ‚ç‚¹çš„ç»“æ„\ntemplate&lt;class K&gt;struct BSTreeNode&#123;public:\tBSTreeNode* _left;\tBSTreeNode* _right;\tK _key;//å…ƒç´ \tBSTreeNode(K key)\t\t:_left(nullptr),\t\t_right(nullptr),\t\t_key(key)\t&#123;&#125;&#125;;\n\n\nä¸ºä½•ä¸ç›´æ¥æŠŠè¿™ä¸ªç»“æ„å®šä¹‰åœ¨äºŒå‰æ ‘çš„classé‡Œé¢ï¼Ÿ\nå› ä¸ºé‚£æ ·ä¼šäº§ç”Ÿæ•°æ®å†—ä½™è€Œä¸”éå¸¸ä¸æ–¹ä¾¿è°ƒç”¨æˆå‘˜å‡½æ•°\n\nåœ¨æœç´¢äºŒå‰æ ‘çš„åŠŸèƒ½å®ç°ç±»ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªæ ¹éƒ¨èŠ‚ç‚¹å³å¯\ntemplate&lt;class K&gt;class BSTree&#123;typedef BSTreeNode&lt;K&gt; Node;//æ–¹ä¾¿ä½¿ç”¨private:    //æˆå‘˜å˜é‡\tNode* _root=nullptr;&#125;\n\n\n1.2 æ’å…¥æœ‰äº†åŸºæœ¬ç»“æ„ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªæ’å…¥å‡½æ•°æ¥è¿›è¡Œæœ€åŸºæœ¬çš„æ“ä½œäº†\n\nå½“rootä¸ºç©ºçš„æ—¶å€™ï¼Œéœ€è¦ç»™æ ¹èŠ‚ç‚¹å¼€ä¸€ä¸ªç©ºé—´\nrootä¸ä¸ºç©ºï¼Œå®šä¹‰prevå’Œcurä¸¤ä¸ªæŒ‡é’ˆè¿›è¡Œéå†ï¼Œé€šè¿‡å¤§å°åˆ¤æ–­æ¥æ‰¾å¯»æ­£ç¡®çš„æ’å…¥ä½ç½®ï¼ˆå·¦è¾¹å°ï¼Œå³è¾¹å¤§ï¼‰\næ‰¾åˆ°æ­£ç¡®ä½ç½®åï¼Œæ„é€ æ–°èŠ‚ç‚¹å¹¶è¿›è¡Œæ’å…¥æ“ä½œ\n\nä½¿ç”¨boolä½œä¸ºè¿”å›å€¼æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ˜¯å¦æˆåŠŸæ’å…¥ã€‚å¦‚æœæˆåŠŸæ’å…¥äº†ä¸ºtrueï¼Œæ²¡æœ‰æˆåŠŸæ’å…¥ä»£è¡¨è¯¥æœç´¢äºŒå‰æ ‘å†…å·²ç»åŒ…å«äº†ç›¸åŒé”®å€¼çš„èŠ‚ç‚¹ã€‚\nbool Insert(K key)&#123;    if (_root == nullptr)    &#123;        _root = new Node(key);//æ ¹ä¸ºç©ºï¼Œç›´æ¥å¼€ç©ºé—´æ’å…¥        return true;    &#125;    Node* prev = nullptr;    Node* cur = _root;    while (cur)    &#123;        if (key &gt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_right;        &#125;        else if (key &lt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_left;        &#125;        else        &#123;            return false;//æœ‰ç›¸åŒå…ƒç´ ä¸æ‰§è¡Œæ’å…¥        &#125;    &#125;\t//åˆ›å»ºèŠ‚ç‚¹è¿›è¡Œæ’å…¥    cur = new Node(key);    //ä¿å­˜prevæŒ‡é’ˆå°±æ˜¯ä¸ºäº†æ“æ§å®ƒçš„çˆ¶äº²æ¥é“¾æ¥èŠ‚ç‚¹    if (key &gt; prev-&gt;_key) &#123;        prev-&gt;_right = cur;    &#125;    else&#123;        prev-&gt;_left = cur;    &#125;    return true;&#125;\n\né™¤äº†å¾ªç¯ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬\nbool InsertR(const K&amp; key)//å®é™…è°ƒç”¨çš„å‡½æ•°&#123;    return _InsertR(_root, key);&#125;\t//ä½¿ç”¨å¼•ç”¨ï¼Œè¿™æ—¶å€™çš„rootå°±æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„åˆ«å//ä¿®æ”¹rootçš„åŒæ—¶ä¹Ÿä¼šä¿®æ”¹ä¸Šä¸€ä¸ªå­æ ‘çš„å·¦å³èŠ‚ç‚¹//ä¹Ÿå¯ä»¥ç”¨äºŒçº§æŒ‡é’ˆæ¥å®Œæˆè¿™ä¸ªæ“ä½œï¼ŒåŸç†ç›¸åŒbool _InsertR(Node*&amp; root, const K&amp; key)&#123;    //ç©ºä»£è¡¨èµ°åˆ°å¶å­äº†ï¼Œæ‰§è¡Œæ’å…¥    if (root == nullptr) &#123;        Node* newNode = new Node(key);        root = newNode;        return true;    &#125;    if (key &gt; root-&gt;_key) &#123;        _InsertR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _InsertR(root-&gt;_left, key);    &#125;    else &#123;        return false;//ä¸æ’å…¥ç›¸åŒå€¼    &#125;&#125;\n\næ­¤ç±»äºŒå‰æ ‘çš„é€’å½’æ€è·¯æœ€å¥½ç”¨ç”»å›¾æ¥ç†æ¸…ã€‚éœ€è¦æ˜ç™½æ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ€ä¹ˆè¿”å›çš„\n\nå…³äºåˆ†æ”¯é€’å½’æ€æƒ³å¯ä»¥çœ‹çœ‹ã€é“¾æ¥ã€‘ï¼Œè¿™æœ‰åŠ©äºä½ ç†è§£æœ¬æ–‡ä¸­çš„é€’å½’å®ç°\n\nä¸Šé¢çš„é€’å½’é—®é¢˜ä¾¿æ˜¯å°†åŸæœ¬åˆ©ç”¨å¾ªç¯è¿›è¡Œå·¦å³å¯»æ‰¾çš„æ“ä½œåŒ–ä¸ºå¾€ä¸‹è°ƒç”¨ä¸‹ä¸€è¯¾å­æ ‘ã€‚ç®€å•æ¥æ¥è¯´å°±æ˜¯è€å¸ˆè¦ç­é•¿ã€ç­é•¿æ‰¾å°ç»„é•¿ã€å°ç»„é•¿æ‰¾ç»„å‘˜è¿™æ ·åˆ†é…å·¥ä½œã€‚\nåªæœ‰èµ°åˆ°æœ€åçš„ç»„å‘˜ï¼ˆç©ºèŠ‚ç‚¹ï¼‰æˆ‘ä»¬æ‰æ‰§è¡Œæ’å…¥æ“ä½œ\n1.3 ä¸­åºæ‰“å°æ’å…¥å®Œæˆäº†ï¼Œè¦æ€æ ·æ‰èƒ½çœ‹åˆ°èŠ‚ç‚¹ä¸­çš„å†…å®¹å‘¢ï¼Ÿæ¥ä¸ªä¸­åºéå†å§ï¼\næˆ‘ä»¬éœ€è¦é‡å†™ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå› ä¸ºåœ¨ç±»å¤–é¢æ— æ³•è®¿é—®åˆ°ç§æœ‰æˆå‘˜rootï¼Œæ— æ³•ç›´æ¥ç»™è¯¥å‡½æ•°ä¼ å‚ã€‚å¦‚æœæƒ³ç»´æŒç±»çš„å°è£…æ€§ï¼Œä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°å®šä¹‰ä¸ºprivateæˆå‘˜\n    void InOrder()//ä¸­åºéå†    &#123;        _InOrder(_root);    &#125;//private:    void _InOrder(Node* root)    &#123; //é€’å½’æ‰“å°        if (root == nullptr)            return ;        _InOrder(root-&gt;_left);        cout &lt;&lt; root-&gt;_key &lt;&lt; &quot; &quot;;        _InOrder(root-&gt;_right);    &#125;\n\nå…³äºå‰ä¸­ååºéå†çš„å†…å®¹åœ¨ä¹‹å‰Cè¯­è¨€çš„åšå®¢ä¸­æœ‰è¿‡è®²è§£ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°\n\n\n1.4 æŸ¥æ‰¾æ—¢ç„¶æ˜¯æœç´¢äºŒå‰æ ‘ï¼Œé‚£ä¾¿å¿…é¡»è¦æœ‰æŸ¥æ‰¾å‡½æ•°ã€‚\nå…¶å®åœ¨æ’å…¥æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä¾¿å·²ç»æŠŠæŸ¥æ‰¾å‡½æ•°çš„æ€è·¯å†™å‡ºæ¥äº†ï¼ˆå³åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤èŠ‚ç‚¹ï¼‰\n//æœç´¢äºŒå‰æ ‘ä¸€èˆ¬ä¸ç›´æ¥æ“ä½œèŠ‚ç‚¹ï¼Œä¸éœ€è¦è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆ//Node* Find(const K&amp; key)bool Find(const K&amp; key)&#123;\tNode* cur = _root;\twhile (cur)\t&#123;\t\tif (key &gt; cur-&gt;_key)\t\t&#123;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (key &lt; cur-&gt;_key)\t\t&#123;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse\t\t&#123;\t\t\treturn true;\t\t&#125;\t&#125;\treturn false;&#125;\n\nåŒæ ·ï¼Œä¹Ÿå¯ä»¥å†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬ã€‚å½“èŠ‚ç‚¹çš„å€¼ç›¸ç­‰æ—¶è¿”å›trueï¼Œå¦‚æœèµ°åˆ°ç©ºäº†ä»£è¡¨è¿™æ£µæ ‘é‡Œé¢æ²¡æœ‰è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›false\nbool FindR(const K&amp; key)//å®é™…è°ƒç”¨çš„å‡½æ•°&#123;    return _FindR(_root, key);&#125;//é€’å½’å®ç°bool _FindR(Node* root, const K&amp; key)&#123;    if (root == nullptr) &#123;        return false;    &#125;    if (key &gt; root-&gt;_key) &#123;        _FindR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _FindR(root-&gt;_left, key);    &#125;    else &#123;        return true;    &#125;&#125;\n\n1.5 åˆ é™¤(è¾ƒéš¾)åœ¨æœç´¢äºŒå‰æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¿è¯åˆ é™¤èŠ‚ç‚¹åï¼Œæ ‘è¿˜æ»¡è¶³æœç´¢äºŒå‰æ ‘çš„ç‰¹å¾ã€‚å¦‚æœåˆ é™¤äº†ä¹‹åç ´åæ ‘çš„ç»“æ„è¿˜ä¸ç®¡ä»–ï¼Œé‚£å°±æ˜¯erräº†ã€‚\nä»¥ä¸‹é¢çš„è¿™æ£µæ ‘ä¸ºä¾‹ï¼Œå®ƒæ»¡è¶³æœç´¢äºŒå‰æ ‘çš„åŸºæœ¬ç‰¹å¾\n\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åˆ é™¤èŠ‚ç‚¹4ï¼Œè¿™å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦è®©3çš„å³å­æ ‘ä¸ºç©ºï¼Œå†deleteæ‰4çš„èŠ‚ç‚¹å³å¯ã€‚\nä½†å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤6ï¼Œäº‹æƒ…å°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚æˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¥æ›¿è¡¥å®ƒçš„ä½ç½®\n\né‚£ä¹ˆï¼Œè°å¯ä»¥èƒœä»»è¿™ä¸ªæ–°çš„ä½ç½®å‘¢ï¼Ÿ\nç­”ï¼šå·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹orå³å­æ ‘çš„æœ€å°èŠ‚ç‚¹\n\nåœ¨åˆ é™¤6çš„æƒ…å†µä¸‹ï¼Œå·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹ä¸º4ï¼Œå³å­æ ‘çš„æœ€å°èŠ‚ç‚¹ä¸º7ã€‚ä½ ä¼šå‘ç°ï¼Œå°†å®ƒä»¬æ¢ä¸Šè¿™ä¸ªä½ç½®ï¼Œçš„ç¡®æ»¡è¶³æœç´¢äºŒå‰æ ‘çš„ç‰¹æ€§\n\né‚£ä¹ˆï¼Œæ€ä¹ˆå¯ä»¥æŠŠè¿™ä¸¤ä¸ªèŠ‚ç‚¹ç»™æ›¿æ¢ä¸Šæ¥å‘¢ï¼Ÿ\nè¿™ä¸€å¥—æ“ä½œå…¶å®æŒºéº»çƒ¦çš„\n\nå…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œä¼šæœ‰ä¸‹é¢3ç§æƒ…å†µï¼š\nè¯¥èŠ‚ç‚¹åªæœ‰å·¦å¨ƒ\nè¯¥èŠ‚ç‚¹åªæœ‰å³å¨ƒ\nè¯¥èŠ‚ç‚¹å·¦å³éƒ½æœ‰\n\n\nå¦‚æœæ˜¯å‰ä¸¤ç§æƒ…å†µï¼ˆåŒ…æ‹¬æ²¡æœ‰å­©å­çš„æƒ…å†µï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œè®©å®ƒçš„çˆ¶äº²æŒ‡å‘å®ƒçš„å­©å­å°±è¡Œäº†ï¼ˆæ‰˜ç®¡ï¼‰\nåªæœ‰å·¦å¨ƒï¼Œçˆ¶èŠ‚ç‚¹æ‰˜ç®¡å·¦å¨ƒ\nåªæœ‰å³å¨ƒï¼Œçˆ¶èŠ‚ç‚¹æ‰˜ç®¡å³å¨ƒ\n\n\nå·¦å³éƒ½æœ‰å­©å­ï¼Œéœ€è¦æ‰¾åˆ°å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹&#x2F;å³å­æ ‘æœ€å°èŠ‚ç‚¹ï¼Œè¿›è¡Œäº¤æ¢\n\nåªæ˜¯äº¤æ¢è¿˜è¿œè¿œä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦é“¾æ¥è¿™ä¸ªæœ€å¤§&#x2F;æœ€å°èŠ‚ç‚¹çš„å­©å­ï¼ˆæ¯”å¦‚ä¸Šå›¾ä¸­7çš„æƒ…å†µï¼‰å†åˆ é™¤æ‰è¢«äº¤æ¢è¿‡å»çš„æŒ‡å®šèŠ‚ç‚¹\n\n//åˆ é™¤å»æ‰¾å·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹ï¼Œæˆ–è€…å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹//ä¸éœ€è¦åˆ é™¤çš„æ ‘è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢ä¹‹ååˆ é™¤å¶å­èŠ‚ç‚¹bool Erase(const K&amp; key)&#123;    Node* prev = nullptr;    Node* cur = _root;    while (cur)    &#123;        if (key &gt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_right;        &#125;        else if (key &lt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_left;        &#125;        else        &#123;            if (cur-&gt;_left == nullptr)//åªæœ‰å³å¨ƒ            &#123;                if (cur == _root)                &#123;                    _root = _root-&gt;_right;                &#125;                else                &#123;                    if (prev-&gt;_left == cur)                    &#123;                        prev-&gt;_left = cur-&gt;_right;                    &#125;                    else &#123;                        prev-&gt;_right = cur-&gt;_right;                    &#125;                &#125;                delete cur;            &#125;            else if (cur-&gt;_right == nullptr)//åªæœ‰å·¦å¨ƒ            &#123;                if (cur == _root)                &#123;                    _root = _root-&gt;_left;                &#125;                else                &#123;                    if (prev-&gt;_left == cur)                    &#123;                        prev-&gt;_left = cur-&gt;_left;                    &#125;                    else &#123;                        prev-&gt;_right = cur-&gt;_left;                    &#125;                &#125;                delete cur;            &#125;            else //å·¦å³éƒ½æœ‰å­©å­            &#123;                //å°†curå’Œå³å­æ ‘çš„æœ€å°å€¼èŠ‚ç‚¹è¿›è¡Œäº¤æ¢                Node* minPrev = cur;                Node* minRight = cur-&gt;_right;                while (minRight-&gt;_left)                &#123;                    minPrev = minRight;                    minRight = minRight-&gt;_left;                &#125;                swap(minRight-&gt;_key, cur-&gt;_key);                if (minPrev-&gt;_left == minRight)                &#123;                    minPrev-&gt;_left = minRight-&gt;_left;                &#125;                else &#123;                    minPrev-&gt;_right = minRight-&gt;_left;                &#125;                delete minRight;            &#125;            return true;        &#125;    &#125;    return false;&#125;\n\næ‰§è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œåˆ é™¤ä¹‹åçš„æ ‘ä¾æ—§æ˜¯ä¸€ä¸ªæœç´¢äºŒå‰æ ‘ï¼Œä¸­åºéå†ç»“æœå‘ˆæœ‰åº\n\né€’å½’åˆ é™¤å†™å®Œäº†å¾ªç¯ç‰ˆæœ¬ï¼Œå†æ¥ä¸ªé€’å½’å§ï¼\nbool _EraseR(Node*&amp; root, const K&amp; key)&#123;    //æ ¹ç›´æ¥ä¸ºç©ºï¼Œè¿”å›false    if (root == nullptr) &#123;        return false;    &#125;    if (key &gt; root-&gt;_key) &#123;        _EraseR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _EraseR(root-&gt;_left, key);    &#125;    else     &#123;        Node* del = root;//ä¿å­˜å˜é‡ç”¨äºåˆ é™¤        if (root-&gt;_left == nullptr)//åªæœ‰å³å¨ƒ        &#123;            /*if (root == _root) &#123;\t\t\t\t\t_root = _root-&gt;_left;\t\t\t\t&#125;*/            //è¿™æ—¶å€™rootæ˜¯æ“ä½œèŠ‚ç‚¹çš„åˆ«åï¼Œä¸éœ€è¦å•ç‹¬å¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œå¤„ç†            root = root-&gt;_right;        &#125;        else if (root-&gt;_right == nullptr)        &#123;            root = root-&gt;_left;        &#125;        else //å·¦å³éƒ½æœ‰å­©å­        &#123;            //å°†curå’Œå³å­æ ‘çš„æœ€å°å€¼èŠ‚ç‚¹è¿›è¡Œäº¤æ¢            Node* minRight = root-&gt;_right;            //while (minRight) //err            while (minRight-&gt;_left) //åˆ¤æ–­çš„æ˜¯leftï¼Œä¸ç„¶ä¼šèµ°åˆ°ç©ºç„¶åäº¤æ¢            &#123;                minRight = minRight-&gt;_left;            &#125;            swap(minRight-&gt;_key, root-&gt;_key);            return _EraseR(root-&gt;_right, key);        &#125;        delete del;        return true;    &#125;&#125;\n\nåœ¨æœ€åä¸€ä¸ªæƒ…å†µä¸­ï¼Œæˆ‘ä»¬å·§å¦™åœ°å°†é—®é¢˜åŒ–ä¸ºäº†åœ¨æŒ‡å®šèŠ‚ç‚¹çš„å³å­å†æ¬¡æ‰§è¡Œä¸€æ¬¡åˆ é™¤æ“ä½œ\n\nä¸ºä»€ä¹ˆåœ¨é€’å½’çš„æ“ä½œä¸­æˆ‘ä»¬ä¸éœ€è¦å•ç‹¬å¤„ç†minPrevå‘¢ï¼Ÿ\næ³¨æ„çœ‹å‡½æ•°çš„æ¥å£ã€‚åˆ é™¤çš„é€’å½’æ“ä½œéœ€è¦æ‰ç”¨ä¸€ä¸ªå¾ˆå·§å¦™çš„åšæ³•ï¼Œä½¿ç”¨äº†å¼•ç”¨å‚æ•°ï¼Œå……åˆ†åˆ©ç”¨äº†å‡½æ•°ä¼ å€¼æ—¶ä¼ å¼•ç”¨çš„ç‰¹ç‚¹ï¼ˆåˆ«åï¼‰\nbool _EraseR(Node*&amp; root, const K&amp; key)\n\nè¿™æ—¶å€™çš„èŠ‚ç‚¹rootä¸ä»…æ˜¯å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹çš„åˆ«åã€‚å¯¹è¯¥èŠ‚ç‚¹çš„æ“ä½œä¼šç›´æ¥æ”¹å˜ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œå°±çœå»äº†æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œçš„æ­¥éª¤ï¼\n\nå¯¹rootçš„ä¿®æ”¹ä¼šç›´æ¥åŒæ­¥é“ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­ä¸Š\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è¶…çº§èµï¼\n\n2.KVLæ ‘2.1 æ¦‚å¿µKVæŒ‡ä»£çš„æ˜¯ä¸¤ä¸ªæ¨¡æ¿å‚æ•°keyå’Œvalueã€‚å…¶å®ç°å’Œä¸Šé¢çš„æœç´¢äºŒå‰æ ‘å®Œå…¨ç›¸åŒï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹æ¨¡æ¿å‚æ•°ï¼Œä»¥åŠæ‰€æœ‰æ“ä½œkeyçš„ä½ç½®éƒ½éœ€è¦æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°valueã€‚\n\næºç å®ç°è§æˆ‘çš„ä»£ç ä»“åº“ é“¾æ¥\n\nè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªkeyæ·»åŠ ç¬¬äºŒä¸ªç»‘å®šçš„å‚æ•°äº†ã€‚ä¸€èˆ¬æŠŠè¿™ç§ç»‘å®šå…³ç³»ç§°ä¸º&lt;Key,Value&gt;é”®å€¼å¯¹\nKVLæ ‘çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š\n\næ’åºä¾æ®keyæ¥æ’åºï¼Œè€Œä¸æ˜¯value\nkeyä¸å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯valueå¯ä»¥ä¿®æ”¹\nåœ¨ä¿å­˜é”®å€¼å…³ç³»çš„åŒæ—¶ï¼Œå»é‡+æ’åº\n\né€šè¿‡è¿™ä¸¤ä¸ªå‚æ•°çš„ç»‘å®šå…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼å­—å…¸ã€æ°´æœå‡ºç°æ¬¡æ•°ç­‰ç­‰é—®é¢˜çš„æŸ¥æ‰¾æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ•°ç»„æ˜ å°„ï¼Œä½†è¿™ç§æ–¹æ³•æ›´åŠ ä¾¿æ·\n\n2.2 ç¤ºä¾‹æ’å…¥4ä¸ªæ°´æœå’Œå…¶æ•°é‡ï¼Œä¸­åºéå†æ‰“å°åï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®æ˜¯ä»¥keyä¸ºæ’åºæ ‡å‡†çš„ã€‚\nè¿™é‡Œè¯´æ˜çš„æ˜¯ï¼Œstringä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒå¤§å°çš„ï¼Œæ‰€ä»¥åŒæ ·é€‚ç”¨äºæœç´¢äºŒå‰æ ‘\n\né€šè¿‡è¿™ç§ç±»ä¼¼çš„ç»‘å®šå…³ç³»ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æ·»åŠ æ›´å¤šå‚æ•°è¿›å…¥æœç´¢äºŒå‰æ ‘ã€‚å¯ä»¥å®Œæˆç±»ä¼¼å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ/è½¦ç‰Œç®¡ç†ç³»ç»Ÿä¸­å­¦å·è½¦ç‰Œå·å’Œç”¨æˆ·çš„ç»‘å®šå…³ç³»\n2.3 å…è®¸æ•°æ®å†—ä½™æˆ‘ä»¬å¯ä»¥ç®€å•ä¿®æ”¹ä¸€ä¸‹æ’å…¥å‡½æ•°ï¼Œæ¥è¾¾åˆ°å…è®¸æ•°æ®å†—ä½™çš„ç›®çš„ã€‚å³æ’å…¥ç›¸åŒkeyçš„æ—¶å€™ï¼Œåˆ¤æ–­valueï¼Œå¦‚æœvalueä¹Ÿæ˜¯ç›¸åŒåˆ™ä¸æ’å…¥ï¼Œä¸åŒåˆ™æ’å…¥ã€‚è¿™æ ·å¯ä»¥è®©kvlæ ‘ä¸­åŒä¸€ä¸ªkeyæœ‰å¤šç§å¯¹åº”å…³ç³»ï¼Œåœ¨å­—å…¸å¤šä¹‰è¯çš„æ—¶å€™æœ‰ä¸€å®šä½œç”¨\n//æ’å…¥ï¼Œé€šè¿‡ä¼ å¼•ç”¨é¿å…æ‹·è´bool _InsertR(Node*&amp; root, const K&amp; key, const V&amp; value)&#123;    if (root == nullptr)    &#123;        root = new Node(key, value);        return true;    &#125;    if (root-&gt;_key &lt; key)        return _InsertR(root-&gt;_right, key, value);    else if (root-&gt;_key &gt; key)        return _InsertR(root-&gt;_left, key, value);    else&#123;        if (root-&gt;_value == value)            return false;        else&#123;            //å°†ç›¸åŒæ•°æ®æ’å…¥åœ¨å³è¾¹            return _InsertR(root-&gt;_right, key, value);        &#125;    &#125;&#125;\n\næ’å…¥äº†ä¹‹åï¼Œæˆ‘ä»¬åˆ é™¤ä¹Ÿéœ€è¦åˆ é™¤ä¸¤æ¬¡ã€‚\n\nè¿™æ—¶å€™æˆ‘ä»¬EraseRè¿”å›å€¼ä¸ºboolçš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå¾ªç¯æ¥åˆ é™¤æ‰å¤šä¸ªå†—ä½™é”®å€¼\n\n\nç»“è¯­è¿™ä¸¤é¢—æ ‘çš„è®²è§£åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå­¦ä¹ å®ƒä»¬æ˜¯ä¸ºäº†åç»­å­¦ä¹ map/setæ‰“åŸºç¡€å“¦ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€C++ã€‘ç»§æ‰¿å¤šæ€è¯¦è§£(æœªå®Œæˆ)","url":"/2022/07/23/note_cpp/14%E7%BB%A7%E6%89%BF%E5%A4%9A%E6%80%81/","content":"åœ¨ä¹‹å‰çš„CPPå¤§ä½œä¸šä¸­ï¼Œä¸ºäº†åº”ä»˜æœŸæœ«ï¼ˆæ˜¯è¿™æ ·çš„ï¼‰å…³äºç»§æ‰¿å’Œå¤šæ€éƒ¨åˆ†çš„å†…å®¹åªæ˜¯è‰è‰è¿‡äº†ä¸€éï¼Œå¹¶æ²¡æœ‰æ·±æŒ–èƒŒåçš„å®ç°åŸç†ï¼Œä»¥åŠä½¿ç”¨çš„æ—¶å€™ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚\næœ¬ç¯‡åšå®¢æ˜¯å¯¹ç±»å’Œå¯¹è±¡ç»§æ‰¿å¤šæ€éƒ¨åˆ†çš„æ·±åŒ–ï¼\n\n\n[TOC]\n1.ç»§æ‰¿æ´¾ç”Ÿå…³ç³»ç»§æ‰¿æ˜¯æé«˜ä»£ç å¤ç”¨æ€§çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¿æŒåŸºç±»åŸæœ‰å±æ€§çš„åŸºç¡€ä¸Šï¼Œå¯¹å…¶è¿›è¡Œä¸€å®šçš„æ‰©å¼ ï¼Œå¢åŠ ä¸åŒçš„åŠŸèƒ½ä»¥åº”å¯¹å®é™…æƒ…å†µã€‚\nä¸å…¶ç›¸ä¼¼çš„å¢åŠ ä»£ç å¤ç”¨æ€§çš„è¯­æ³•ï¼Œè¿˜æœ‰æ¨¡æ¿\n1.1 åŸºæœ¬ç”¨æ³•ç»§æ‰¿å’Œæ´¾ç”Ÿæ˜¯çˆ¶ä¸å­çš„å…³ç³»ï¼Œå…¶ä¸­å­ç±»æ‹¥æœ‰çˆ¶ç±»æˆå‘˜çš„åŒæ—¶ï¼Œè¿˜ä¼šæ‹¥æœ‰è‡ªå·±çš„æˆå‘˜\n\nç»§æ‰¿æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ï¼Œç”¨äºå¤šä¸ªç±»æœ‰å…¬å…±éƒ¨åˆ†çš„æ—¶å€™\nçˆ¶ç±»ï¼šåŸºç±»\nå­ç±»ï¼šæ´¾ç”Ÿç±»\n\n//ä¸¾ä¾‹ï¼šç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class ART &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬ &quot; &lt;&lt; &quot; ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt;endl;\t&#125;\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\nåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼ŒARTå’ŒLINKç±»ä¸­éƒ½æœ‰ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œè¿™æ—¶å€™å°±å‡ºç°äº†ä»£ç çš„é‡å¤ã€‚ç»§æ‰¿çš„å‡ºç°å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„\n//ä¸‹é¢ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å†™ï¼ŒWEBç±»æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class WEB &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;&#125;;//ARTã€LINKæ˜¯ä¸¤ä¸ªå­ç±»ï¼Œç»§æ‰¿äº†WEBçš„å…¬å…±éƒ¨åˆ†//è¿™æ ·å°±å‡å°‘äº†ä»£ç é‡class ART : public WEB&#123;public:\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK : public WEB &#123;public:\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\næµ‹è¯•å¯ä»¥å‘ç°ï¼ŒARTå’ŒLINKä½œä¸ºæ´¾ç”Ÿç±»ï¼Œåœ¨ç»§æ‰¿äº†åŸºç±»WEBçš„æˆå‘˜çš„åŸºç¡€ä¸Šï¼Œè¿˜æ‹¥æœ‰äº†å®ƒä»¬ç‹¬ç‰¹çš„å•ç‹¬æˆå‘˜\n\nåŒä¸€ä¸ªç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªåŸºç±»\nclass C : public A,public B&#123;//.....&#125;;\n\n1.2 æƒé™é—®é¢˜ç»§æ‰¿æœ‰3ä¸­ç±»å‹ï¼špublicã€privateã€protectedã€‚è¿™é‡Œä¼šæ˜¾ç¤ºå‡ºç±»ä¸­protectedæƒé™å’Œprivateæƒé™çš„åŒºåˆ«\nclass A&#123;public:\tint a;protected:\tint b;private:\tint c;&#125;;\n\nå½“æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸Šé¢ä¸‰ç§æ–¹å¼å¯¹ç±»Aè¿›è¡Œç»§æ‰¿çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„\n\nç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œæ´¾ç”Ÿç±»ä¸­ç»§æ‰¿çš„æˆå‘˜å°±å˜æˆä»€ä¹ˆç±»å‹\nä¸ç®¡ç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œéƒ½æ— æ³•è®¿é—®åŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜\n\n\nå…³äºæƒé™é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä¸‹é¢å‡ ç‚¹ï¼š\n\nåŸºç±»çš„ç§æœ‰æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä¸å¯è§ï¼Œä½†å®é™…ä¸Šå®ƒä¹Ÿè¢«ç»§æ‰¿è¿‡å»äº†ã€‚ä½†æ˜¯ç¼–è¯‘å™¨å’Œè¯­æ³•çš„é™åˆ¶è®©æˆ‘ä»¬æ— æ³•è®¿é—®ã€‚\nä¿æŠ¤é™å®šç¬¦ç”±æ­¤å‡ºç°ï¼Œå¦‚æœåœ¨åŸºç±»ä¸­çš„æˆå‘˜ä¸æƒ³è¢«å¤–ç•Œç›´æ¥è®¿é—®ï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸ºä¿æŠ¤\nclassé»˜è®¤ç»§æ‰¿æ–¹å¼ä¸ºç§æœ‰ï¼Œstructé»˜è®¤ç»§æ‰¿æ–¹å¼ä¸ºä¿æŠ¤\nå®é™…ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨publicç»§æ‰¿ï¼Œä¿æŠ¤&#x2F;ç§æœ‰æ–¹å¼ä¸åˆ©äºç»´æŠ¤å’Œæ‹“å±•\n\n1.3 åŒåé—®é¢˜ï¼ˆä½œç”¨åŸŸï¼‰åœ¨ç»§æ‰¿ä½“ç³»ä¸­ï¼ŒåŸºç±»å’Œå­ç±»éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸ\nå½“åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å‡ºç°åŒåæˆå‘˜å‡½æ•°æˆ–è€…åŒåæˆå‘˜å˜é‡æ—¶ï¼Œä¼šå‡ºç°å†²çªã€‚è¿™æ—¶å€™ç¼–è¯‘å™¨ä¼šåšä¸€å®šçš„å¤„ç†ï¼šç›´æ¥è®¿é—®å˜é‡åå’Œå‡½æ•°åçš„æ—¶å€™ï¼Œä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜ï¼Œè€Œå±è”½æ‰åŸºç±»çš„ã€‚\nè¿™ç§æƒ…å†µè¢«ç§°ä¹‹ä¸ºéšè—ï¼š\n\nå‡½æ•°åç›¸åŒæ„æˆéšè—ï¼ˆå¹¶éé‡è½½ï¼‰\næˆå‘˜å˜é‡åç›¸åŒæ„æˆéšè—\n\n//ç»§æ‰¿åŒåæˆå‘˜çš„å¤„ç†//\tæ™®é€šçš„åŒåæˆå‘˜class DAD1 &#123;public:\tDAD1()\t&#123;\t\t_a = 100;\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DAD func&quot; &lt;&lt; endl;\t&#125;\tvoid func(int i)\t&#123;\t\tcout &lt;&lt; &quot;DAD func int: &quot; &lt;&lt; i &lt;&lt; endl;\t&#125;\tint _a;//åŸºç±»ä¸­çš„è¯¥å˜é‡&#125;;class SON1 : public DAD1&#123;public:\tSON1()\t&#123;\t\t_a = 20;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt;&quot;SON: &quot; &lt;&lt; _a &lt;&lt; endl;//ä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»çš„_a\t\tcout &lt;&lt;&quot;DAD: &quot; &lt;&lt; DAD1::_a &lt;&lt; endl;//è®¿é—®åŸºç±»çš„_a\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;SON func&quot; &lt;&lt; endl;\t&#125;\tint _a;//æ´¾ç”Ÿç±»çš„åŒåå˜é‡&#125;;\n\n\nå®é™…æ“ä½œä¸­ï¼Œä¸å»ºè®®å†™åŒåçš„æˆå‘˜\n1.4 é™æ€æˆå‘˜åœ¨ç»§æ‰¿ä½“ç³»ä¸­ï¼ŒåŸºç±»çš„é™æ€æˆå‘˜æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªã€‚å³æ‰€æœ‰çš„å­ç±»å’Œä»–ä»¬çš„å¯¹è±¡ï¼Œéƒ½æ˜¯åªæœ‰é‚£ä¸€ä¸ªé™æ€æˆå‘˜çš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªç‰¹æ€§æ¥å¯¹ç»§æ‰¿æ´¾ç”Ÿä¸­å‡ºç°çš„å¯¹è±¡è¿›è¡Œè®¡æ•°ã€‚\nclass Person&#123;public :\tPerson () &#123;++ _count ;&#125;protected :\tstring _name ; // å§“åpublic :\tstatic int _count; // ç»Ÿè®¡äººçš„ä¸ªæ•°ã€‚&#125;;int Person :: _count = 0;\n\nå¦‚æœå‡ºç°äº†ä¸é™æ€æˆå‘˜åŒåï¼Œè®¿é—®æ–¹æ³•å°±æœ‰æ‰€å˜åŒ–\n//è®¿é—®åŒåçš„é™æ€æˆå‘˜class DAD2&#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1 &quot; &lt;&lt; endl;\t&#125;\tstatic void Test1(int n)\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1(int)  &quot; &lt;&lt; n &lt;&lt; endl;\t&#125;&#125;;int DAD2::D_a = 100;class SON2 : public DAD2 &#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;SON2 Test1 &quot; &lt;&lt; endl;\t&#125;&#125;;int SON2::D_a = 200;\n\n\n1.5 å‹å…ƒå‹å…ƒå…³ç³»ä¸ä¼šè¢«ç»§æ‰¿ï¼ŒåŸºç±»çš„å‹å…ƒå‡½æ•°æ— æ³•è®¿é—®æ´¾ç”Ÿç±»çš„ç§æœ‰/ä¿æŠ¤æˆå‘˜\n\n1.6 é»˜è®¤æˆå‘˜å‡½æ•°æˆ‘ä»¬çŸ¥é“ï¼ŒC++ç±»å’Œå¯¹è±¡ä¸­æœ‰6ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\nåœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œè¿™äº›é»˜è®¤æˆå‘˜å‡½æ•°æœ‰æ–°çš„ä½¿ç”¨æ–¹æ³•\n\næ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–çˆ¶ç±»çš„ä¸€éƒ¨åˆ†æˆå‘˜ã€‚å¦‚æœä½ æ²¡æœ‰å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå…ˆè°ƒç”¨åŸºç±»ï¼Œåœ¨è°ƒç”¨å­ç±»ï¼‰\næ´¾ç”Ÿç±»çš„æ‹·è´æ„é€ åŒä¸Šï¼Œå¿…é¡»æ˜¾å¼è°ƒç”¨åŸºç±»æ‹·è´æ„é€ å‡½æ•°\næ´¾ç”Ÿç±»çš„èµ‹å€¼é‡è½½ä¹Ÿéœ€è¦è°ƒç”¨åŸºç±»èµ‹å€¼é‡è½½å®Œæˆæ“ä½œ\næ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨åŸºç±»ï¼Œå…ˆææ„æ´¾ç”Ÿç±»ï¼Œå†ææ„åŸºç±»æˆå‘˜ï¼ˆç¬¦åˆæ ˆåè¿›å…ˆå‡ºåŸåˆ™ï¼‰\nåœ¨åŸºç±»ææ„å‡½æ•°ä¸æ˜¯è™šææ„çš„æ—¶å€™ï¼Œå­ç±»ææ„å’Œçˆ¶ç±»ææ„æ„æˆéšè—å…³ç³»\n\n\næ„é€ å’Œææ„é¡ºåºå­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°\n\nç»§æ‰¿ä¸­å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°\nå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°\n\nææ„é¡ºåºä¸æ„é€ ç›¸å\næ˜¾ç¤ºè°ƒç”¨æ„é€ å‡½æ•°å¦‚ä½•æ˜¾ç¤ºè°ƒç”¨æ„é€ å‡½æ•°å‘¢ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä»£ç ç¤ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Person&#123;public:    Person(string name, string sex, int age)    &#123;        _name = name;        _sex = sex;        _age = age;    &#125;protected:    string _name;    string _sex;    int _age;&#125;;class Student : public Person&#123;public:    Student(string name,string sex,int age,int no)        :Person(name,sex,age),        _No(no)    &#123;&#125;    int _No;//å­¦å·&#125;;int  main()&#123;    Student sobj(&quot;æå&quot;,&quot;ç”·&quot;,18,1000);&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯è§å­ç±»æ­£å¸¸è°ƒç”¨äº†åŸºç±»æ„é€ å‡½æ•°å¹¶è¿›è¡Œäº†åˆå§‹åŒ–\n\n1.7 åŸºç±»å’Œæ´¾ç”Ÿç±»èµ‹å€¼é—®é¢˜æ´¾ç”Ÿç±»æˆå‘˜å¯ä»¥èµ‹å€¼ç»™åŸºç±»çš„ å¯¹è±¡&#x2F;æŒ‡é’ˆ&#x2F;å¼•ç”¨ã€‚ä¸€èˆ¬æˆ‘ä»¬æŠŠè¿™ç§æƒ…å†µç§°ä¸ºåˆ‡ç‰‡ï¼Œå½¢è±¡åœ°è¡¨ç¤ºæŠŠæ´¾ç”Ÿç±»ä¸­çˆ¶ç±»é‚£éƒ¨åˆ†åˆ‡æ¥èµ‹å€¼è¿‡å»ã€‚\nä½†æ˜¯ï¼åè¿‡æ¥æ˜¯ä¸è¡Œçš„å“¦ï¼Œä½ ä¸èƒ½æŠŠåŸºç±»å¯¹è±¡èµ‹å€¼ç»™æ´¾ç”Ÿç±»å¯¹è±¡ã€‚\n\nåŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨å¯ä»¥ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ç»™åŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ã€‚ä½†æ˜¯è¿™æ ·ä¸å¤Ÿå®‰å…¨ï¼Œé™¤éåŸºç±»çš„æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¯¹åº”çš„æ´¾ç”Ÿç±»ã€‚\nå¦‚æœåŸºç±»æ˜¯å¤šæ€ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨dynamic_castæ¥è¿›è¡Œå®‰å…¨å¤„ç†\n\n#include &lt;iostream&gt;using namespace std;class Person&#123;protected :    string _name;    string _sex;     int _age;&#125;;class Student : public Person&#123;public :    int _No ;//å­¦å·&#125;;int  main()&#123;    Student sobj ;    // 1.å­ç±»å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡/æŒ‡é’ˆ/å¼•ç”¨    Person pobj = sobj ;    Person* p1 = &amp;sobj;    Person&amp; p2 = sobj;           //2.åŸºç±»å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™æ´¾ç”Ÿç±»å¯¹è±¡    //sobj = pobj;//err        // 3.åŸºç±»çš„æŒ‡é’ˆå¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢èµ‹å€¼ç»™æ´¾ç”Ÿç±»çš„æŒ‡é’ˆ    p1 = &amp;sobj;//å­ç±»å¯¹è±¡ç»™åŸºç±»æŒ‡é’ˆ    Student* ps1 = (Student*)p1; //åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»ï¼Œæ­£å¸¸è½¬æ¢    ps1-&gt;_No = 15;     cout&lt;&lt;ps1-&gt;_No &lt;&lt;endl;    p1 = &amp;pobj;//åŸºç±»å¯¹è±¡ç»™åŸºç±»æŒ‡é’ˆ    Student* ps2 = (Student*)p1; //è½¬æ¢è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯ä¼šå­˜åœ¨è¶Šç•Œè®¿é—®    ps2-&gt;_No = 10;    cout&lt;&lt;ps2-&gt;_No &lt;&lt;endl;    return 0;&#125;\n\n\nå…³äºæœ€åæåˆ°çš„è¶Šç•Œè®¿é—®é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒæŒ‡é’ˆå˜é‡çš„å¤§å°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå…¶æŒ‡é’ˆç±»å‹çš„åŒºåˆ«ä¸»è¦åœ¨è®¿é—®èƒ½åŠ›çš„ä¸åŒã€‚æ¯”å¦‚char*æŒ‡é’ˆè§£å¼•ç”¨åªèƒ½è®¿é—®1ä¸ªå­—èŠ‚ï¼Œint*æŒ‡é’ˆè§£å¼•ç”¨å¯ä»¥è®¿é—®4ä¸ªå­—èŠ‚ï¼Œä»¥æ­¤ç±»æ¨ï¼ŒStudent*æŒ‡é’ˆè§£å¼•ç”¨å¯ä»¥è®¿é—®sizeof(Student)ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚\nè€Œå­ç±»å¯¹è±¡çš„å¤§å°éƒ½æ˜¯å¤§äºç­‰äºåŸºç±»å¯¹è±¡çš„å¤§å°çš„ã€‚è¿™å°±å¯¼è‡´å­ç±»æŒ‡é’ˆè®¿é—®åŸºç±»å¯¹è±¡å†…å®¹æ—¶ï¼Œä¸€æ¬¡è§£å¼•ç”¨è®¿é—®çš„ç©ºé—´è¶…é•¿ï¼Œé€ æˆäº†è¶Šç•Œè®¿é—®\n\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åˆ‡ç‰‡è®²å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œå³æ–°çš„çˆ¶ç±»å¯¹è±¡ä¸­çš„å†…å®¹åªä¼šåŒ…å«çˆ¶ç±»çš„æˆå‘˜ã€‚å­ç±»å¤šå‡ºå»çš„é‚£ä¸€éƒ¨åˆ†æˆå‘˜ä¼šè¢«å‰”é™¤ã€‚\nè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨VSçš„è°ƒè¯•ä¸­è¯å®\n\nå› ä¸ºåŸºç±»çš„æˆå‘˜å˜é‡è¢«è®¾ç½®æˆäº†ä¿æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨å¤–éƒ¨è¿›è¡Œä¿®æ”¹ã€‚éœ€è¦æ˜¾å¼è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°\n1.8 è™šç»§æ‰¿ï¼ˆè±å½¢ç»§æ‰¿é—®é¢˜ï¼‰æœ‰çš„æ—¶å€™ï¼Œç»§æ‰¿ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼šä¸€ä¸ªå­ç±»ç»§æ‰¿äº†ä¸¤ä¸ªåŸºç±»ï¼Œè€Œè¿™ä¸¤ä¸ªåŸºç±»åˆåŒæ—¶æ˜¯ä¸€ä¸ªåŸºç±»çš„æ´¾ç”Ÿç±»\n\nè¿™æ—¶å€™ï¼ŒDé‡Œé¢å°±ä¼šæœ‰ä¸¤ä»½Açš„å†…å®¹ï¼Œç›¸å½“äºä¸¤ä»½å…¬å…±éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œå› ä¸ºä¼šé€ æˆç©ºé—´æµªè´¹ã€‚è€Œä¸”ç›´æ¥è®¿é—®çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œå¯¹å˜é‡Xçš„è®¿é—®ä¸æ˜ç¡®â€\n\næ¯”å¦‚ï¼šintelå’Œamdè”åˆæ¨å‡ºçš„NUCå°ç”µè„‘ä¸­ï¼Œæœ‰ä¸€æ¬¾CPUæ˜¯ä»–ä»¬åˆä½œå¼€å‘çš„\nå¦‚ä½•è§£å†³åŒæ—¶ç»§æ‰¿AMDå’ŒINTELçš„é—®é¢˜ï¼Ÿ\n\nè¿™æ—¶å€™ä¼šå‡ºç°ä¸¤ä¸ªåŒåå˜é‡ï¼Œä¸€ä¸ªæ˜¯AMDé‡Œé¢æœ‰çš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯INTELé‡Œé¢æœ‰çš„å› ä¸ºä»–ä»¬æ˜¯ä»CPUé‡Œé¢ç»§æ‰¿æ¥çš„ã€‚\nè™½ç„¶æˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥åˆ†åˆ«ä¿®æ”¹å’Œè®¿é—®ã€‚ä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªå…¬å…±éƒ¨åˆ†å°±å‡ºç°äº†æµªè´¹ï¼ˆæ¯”å¦‚æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œå¤šç»™ä½ ä¸€ä»½æ²¡æœ‰å•¥æ„ä¹‰ï¼‰\n\n\nå’Œå‰é¢è¯´é“çš„åŒåé—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥è®¿é—®ç‰¹å®šçš„å˜é‡ï¼Œä½†æ˜¯è¿™æ ·æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è§£å†³ç©ºé—´æµªè´¹çš„é—®é¢˜ã€‚\n//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®cout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;cout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\n\nè¿™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨è™šç»§æ‰¿æ¥æ“ä½œï¼šç»™Bå’ŒCå¯¹Açš„ç»§æ‰¿åŠ ä¸Švirturalå…³é”®å­—\nclass CPU &#123;public:\tCPU()\t\t:_Structure(&quot;x86&quot;)\t&#123; &#125;\tchar _Structure[100];&#125;;class INTEL : virtual public CPU &#123;public:\tINTEL()\t\t:i_Brand(&quot;intel&quot;)\t&#123;&#125;\tchar i_Brand[10];&#125;;class AMD : virtual public CPU &#123;public:\tAMD()\t\t:a_Brand(&quot;amd&quot;)\t&#123;&#125;\tchar a_Brand[10];&#125;;//åŒæ—¶ç»§æ‰¿AMDå’ŒINTEL//ç›¸å½“äºæœ‰ä¸¤ä¸ª_Structureå˜é‡//å®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå°±å¤Ÿäº†class NUC :public AMD, public INTEL &#123;&#125;;void test1()&#123;\tNUC n1;\t//å¯¹â€œ_Structureâ€çš„è®¿é—®ä¸æ˜ç¡®\t//cout &lt;&lt; n1._Structure &lt;&lt; endl;//err\t//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰\t//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®\tcout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;\tcout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\t//è§£å†³æ–¹æ³•2ï¼Œåœ¨AMDå’ŒINTELå¯¹CPUçš„ç»§æ‰¿ä¸ŠåŠ virtual\tcout &lt;&lt; &quot;n1è®¿é—®ï¼š&quot; &lt;&lt; n1._Structure &lt;&lt; endl;\t//ç°åœ¨å°±æ²¡æœ‰æŠ¥é”™äº†\t//å› ä¸ºè¿™æ—¶å€™AMDå’ŒINTELä¸­çš„_Structureéƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªåœ°å€\tcout &lt;&lt; &quot;&amp;intel: &quot; &lt;&lt; &amp;(n1.INTEL::_Structure) &lt;&lt; endl;\tcout &lt;&lt; &quot;&amp;amd:   &quot; &lt;&lt; &amp;(n1.AMD::_Structure) &lt;&lt; endl;\t//ä¿®æ”¹INTELä¸­çš„_Structureï¼Œä¹Ÿä¼šè¿ä»£ä¿®æ”¹AMDä¸­çš„_Structure&#125;\n\nè¿™æ—¶å€™ç›´æ¥è®¿é—®å˜é‡å°±ä¸ä¼šæŠ¥é”™äº†ã€‚å› ä¸ºè¿™æ—¶å€™ï¼ŒBå’ŒCä¸­çš„è¯¥å˜é‡æŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹æ“ä½œä¼šåŒæ­¥ã€‚\n\nç»§æ‰¿æ¨¡å‹è¿™ç§è™šç»§æ‰¿çš„æ¨¡å‹æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿè¿›å…¥è°ƒè¯•çª—å£ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œåˆ†åˆ«åˆ†ä¸ºäº†3ä¸ªæ¨¡å—ï¼Œä¿å­˜äº†ä¸åŒåŸºç±»çš„æˆå‘˜ã€‚è€Œå®ƒä»¬ä¹‹ä¸­çš„_Stuctureæˆå‘˜åªæœ‰ä¸€ä¸ªï¼Œä¸ä¼šå‡ºç°å¼‚ä¹‰\n\né‚£è¿™é‡Œç©ºç€çš„ç©ºé—´æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿæ˜¯å†…å­˜å¯¹é½å—ï¼Ÿ\néä¹Ÿï¼\nè™šåŸºè¡¨ä¸‹å›¾èƒ½å¸®ä½ äº†è§£è¿™ä¸ªå†…å­˜çš„åŒºå—æ˜¯æ€ä¹ˆåˆ’åˆ†çš„\n\nè¿™æ ·åšå°±æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå³ä¾¿æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„åŸºç±»æŒ‡é’ˆï¼ˆæ¯”å¦‚amdæˆ–è€…intelï¼‰æ¥æŒ‡å‘nucçš„å­ç±»å¯¹è±¡ï¼Œå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡è™šåŸºè¡¨é‡Œé¢å­˜æ”¾çš„åç§»é‡æ¥è®¡ç®—CPUæˆå‘˜çš„ä½ç½®ã€‚ä»è€Œé¿å…äº†å‡ºç°å¼‚ä¹‰çš„é—®é¢˜ã€‚\n\nè€Œå¦‚æœæˆ‘ä»¬åœ¨ç»§æ‰¿çš„æ—¶å€™å»æ‰virtualå…³é”®å­—ï¼Œå³ä½¿ç”¨æ™®é€šç»§æ‰¿ï¼Œå®ƒçš„ç»§æ‰¿æ¨¡å‹åˆä¼šä¸åŒ\n\nè¿™é‡Œå°±å› ä¸ºå†…å­˜å¯¹é½çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ— æ³•çœ‹æ¸…æ¥šå®ƒçš„å…¨è²Œã€‚ä¸è¿‡åœ¨è±å½¢ç»§æ‰¿é—®é¢˜ä¸­ï¼Œä¸ä½¿ç”¨è™šç»§æ‰¿ä¼šé€ æˆä¸¤ä¸ªCPUå¯¹è±¡çš„ç»§æ‰¿ï¼Œå¯¼è‡´è®¿é—®ä¸æ˜ç¡®çš„ç‰¹æ€§æ˜¯å¯ä»¥çœ‹å‡ºæ¥çš„ã€‚\n1.9 ç»§æ‰¿å’Œç»„åˆ\nç»§æ‰¿ï¼šä¸Šè¿°æ‰€è¯´ã€‚æ¯ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡is-a\nç»„åˆï¼šåœ¨ä¸€ä¸ªç±»é‡Œé¢åŒ…å«å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡æˆå‘˜ã€‚æ¯ä¸€ä¸ªBå¯¹è±¡ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ªA has-a\n\nå®é™…æƒ…å†µä¸­ï¼Œå»ºè®®ä¼˜å…ˆé€‰æ‹©ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚\n\nç»§æ‰¿å¢åŠ äº†ä»£ç çš„å¤ç”¨æ€§ï¼Œä½†æ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šç ´åäº†åŸºç±»çš„å°è£…æ€§ã€‚æ´¾ç”Ÿç±»å’ŒåŸºç±»çš„å…³è”å¾ˆå¼ºï¼Œè€¦åˆåº¦é«˜ã€‚\nå¯¹è±¡ç»„åˆæ˜¯å¦å¤–ä¸€ç§å¤ç”¨çš„é€‰æ‹©ï¼Œè¿™æ—¶å€™ï¼Œå¯¹è±¡Açš„å†…éƒ¨ç»“æ„æ˜¯ä¸å¾—è€ŒçŸ¥çš„ã€‚è¿™æ ·å°±å‡å°äº†å¯¹è±¡ä¹‹é—´çš„å…³è”æ€§ï¼Œè€¦åˆåº¦ä½ï¼Œä¿æŠ¤äº†å°è£…ï¼Œæ›´æ–¹ä¾¿ä»£ç çš„ç»´æŠ¤\n\nä¸è¿‡ï¼Œç»§æ‰¿è¿˜æœ‰å¦å¤–ä¸€ç§ç”¨é€”ï¼Œé‚£å°±æ˜¯å¤šæ€ã€‚æˆ‘ä»¬ä¸‹è¾¹ä¼šè®²è§£çš„ï¼\næ€»ç»“å¤šç»§æ‰¿æ‰€å¯¼è‡´çš„è±å½¢ç»§æ‰¿é—®é¢˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè®©C++çš„è¯­æ³•å˜å¾—å¤æ‚äº†ã€‚æ¯”å¦‚javaæ˜¯æ²¡æœ‰å¤šç»§æ‰¿çš„ã€‚åœ¨å®é™…ä½¿ç”¨æƒ…å†µä¸­ï¼Œä¸å»ºè®®ä½¿ç”¨å¤šç»§æ‰¿ã€‚\n\n2.å¤šæ€\né™æ€å¤šæ€ï¼šè¿ç®—ç¬¦é‡è½½\nåŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°ç»„æˆçš„å¤šæ€\n\nå¤šæ€é€šä¿—åœ°è®²å°±æ˜¯å¤šç§å½¢æ€ï¼Œå½“ä¸åŒçš„å¯¹è±¡å»å®Œæˆç›¸åŒçš„äº‹æƒ…çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸åŒçš„çŠ¶æ€ã€‚\n2.1 è™šå‡½æ•°2.1.1 åŸºæœ¬ä½¿ç”¨ä»¥åŠåŠ¨æ€å¤šæ€è™šå‡½æ•°ï¼Œå¹¶ä¸ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯è™šæ— çš„ã€‚è€Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åœ¨ä¸€å®šæƒ…å†µä¸‹ä¼šè¢«æ›¿æ¢ï¼ˆå°±å¥½æ¯”ç»§æ‰¿ä¸­çš„è™šç»§æ‰¿é—®é¢˜ï¼‰ã€‚è¦å®ç°åŠ¨æ€å¤šæ€ï¼Œå°±éœ€è¦å€ŸåŠ©è™šå‡½æ•°æ¥å®ç°ã€‚ä»¥ä¸‹é¢è¿™ä¸ªåŠ¨ç‰©è¯´è¯çš„ä»£ç ä¸ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Animal &#123;public:\t//void Talk()\tvirtual void Talk()//è™šå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;Animal is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class CAT : public Animal&#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;CAT is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class DOG : public Animal &#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DOG is talking&quot; &lt;&lt; endl;\t&#125;&#125;;//åŸºç±»ä¸­ä¸ä½¿ç”¨è™šå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°çš„å†…å®¹å·²ç¡®å®š//ä¸ç®¡ä¼ å‚ä»€ä¹ˆç±»ï¼Œéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°//åŠ ä¸Šè™šå‡½æ•°virtualåï¼Œä¼šè°ƒç”¨CATå’ŒDOGçš„Talkå‡½æ•°void MakeTalk(Animal&amp; it) &#123;\tit.Talk();//è°ƒç”¨å¯¹åº”çš„Talkå‡½æ•°&#125;\n\nå½“åŸºç±»Animalä¸­çš„Talkå‡½æ•°æ²¡æœ‰ç”¨virtualä¿®é¥°æ—¶ï¼Œä¸ç®¡ç»™è¿™ä¸ªå‡½æ•°ä¼ å‚ä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°\n\nå½“æˆ‘ä»¬ç”¨è™šå‡½æ•°è¿›è¡Œä¿®é¥°åï¼Œå°±ä¼šè°ƒç”¨æ´¾ç”Ÿç±»CATå’ŒDOGçš„Talkå‡½æ•°ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ¨æ€å¤šæ€ã€‚\n\nå¯¹äºè™šå‡½æ•°ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n\nå½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šè§¦å‘åŠ¨æ€å¤šæ€ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŒåå‡½æ•°ä¼šè¦†å†™åŸºç±»ä¸­çš„è™šå‡½æ•°\nä¸èƒ½å®šä¹‰é™æ€è™šå‡½æ•°â€”â€”å› ä¸ºé™æ€å‡½æ•°æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œè€Œä¸æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡\nä¸èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°â€”â€”æ€»ä¸èƒ½ç”¨æ´¾ç”Ÿç±»çš„æ„é€ æ¥è¦†å†™åŸºç±»çš„æ„é€ å§ï¼Ÿ\nææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°\n\n2.1.2 è™šææ„å‡½æ•°æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ææ„ä¸€ä¸ªå­ç±»å¯¹è±¡æ—¶ï¼Œå¾€å¾€ä¼šç»™åŸºç±»çš„ææ„å‡½æ•°åŠ ä¸Švirtualä¿®é¥°ï¼Œè¿™æ ·åªè¦ä¼ æ´¾ç”Ÿç±»çš„å¯¹è±¡ç»™åŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»å¯¹åº”çš„ææ„å‡½æ•°ï¼Œå®Œæˆä¸åŒçš„ææ„æ“ä½œã€‚è€Œä¸æ˜¯éƒ½å‘†å‘†çš„è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°â€”â€”é‚£æ ·å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼\nclass Queue &#123;public:\tQueue()\t\t:_a(new int[10])\t&#123;\t&#125;\tvirtual ~Queue() &#123;\t\tcout &lt;&lt; &quot;~Queue&quot; &lt;&lt; endl;\t\tdelete[] _a;\t&#125;private:\tint* _a;&#125;;class MyStack :public Queue &#123;public:\tMyStack(int capa)\t\t:_a1(new int[capa])\t&#123;&#125;\t~MyStack() &#123;\t\tcout &lt;&lt; &quot;~MyStack&quot; &lt;&lt; endl;\t\tdelete[] _a1;\t&#125;private:\tint* _a1;&#125;;int main()&#123;\tQueue* q1=new MyStack(4);//çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»\tdelete q1;//è°ƒç”¨å­ç±»çš„ææ„å‡½æ•°\treturn 0;&#125;\n\n2.2 çº¯è™šå‡½æ•°åœ¨è™šå‡½æ•°çš„åŸºç¡€ä¸Šï¼ŒC++å®šä¹‰äº†çº¯è™šå‡½æ•°ï¼šæœ‰äº›æ—¶å€™ï¼Œåœ¨åŸºç±»é‡Œé¢å®šä¹‰æŸä¸€ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œå…·ä½“çš„å®ç°è®©æ´¾ç”Ÿç±»å»åŒåè¦†å†™ã€‚\nçº¯è™šå‡½æ•°çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹\n//virtual å‡½æ•°è¿”å›ç±»å‹ å‡½æ•°å()=0;virtual void Print()=0;\n\næ´¾ç”Ÿç±»ä¸­å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™è¯¥ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nclass A &#123;public:\t//virtual void Print();//è™šå‡½æ•°\tvirtual void Print() = 0;//çº¯è™šå‡½æ•°&#125;;class B :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;B print &quot; &lt;&lt; endl;\t&#125;&#125;;class C :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;C print &quot; &lt;&lt; endl;\t&#125;&#125;;\n\nå½“æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»ä¸­è¦†å†™äº†è¯¥å‡½æ•°åï¼Œå³å¯å®ä¾‹åŒ–å¯¹è±¡å¹¶è°ƒç”¨è¯¥å‡½æ•°\n\nå’Œè™šå‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ¥æ”¶æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå³å¯è°ƒç”¨å¯¹åº”çš„å‡½æ•°\n\n2.3 æŠ½è±¡ç±»åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å°±æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š\n\næŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\næŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œä¸ç„¶æ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nå¦‚æœåœ¨åŸºç±»ä¸­å®šä¹‰çš„çº¯è™šå‡½æ•°æ˜¯constä¿®é¥°çš„ï¼Œåˆ™æ´¾ç”Ÿç±»ä¸­å¯¹åº”çš„å‡½æ•°ä¹Ÿéœ€è¦ç”¨constä¿®é¥°\n\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€C++ã€‘AVLæ ‘ï¼ˆå¹³è¡¡æœç´¢äºŒå‰æ ‘ï¼‰","url":"/2022/09/02/note_cpp/16AVL%E6%A0%91/","content":"åœ¨ä¸Šä¸€ç¯‡C++åšå®¢ä¸­ï¼Œè®²è¿°äº†å…³äºæœç´¢äºŒå‰æ ‘ä»¥åŠKVLæ ‘çš„å®ç°ã€‚ä¹Ÿæåˆ°äº†æœç´¢äºŒå‰æ ‘çš„æœ€åæƒ…å†µï¼šæ’å…¥çš„æ•°æ®å·²ç»æœ‰åºã€‚\nè€Œæœ¬ç¯‡åšå®¢æ¶‰åŠåˆ°çš„AVLæ ‘ï¼Œåˆç§°å¹³è¡¡æœç´¢äºŒå‰æ ‘ã€‚å°±æ˜¯ä¸ºäº†è§£å†³æœç´¢äºŒå‰æ ‘çš„æœ€åæƒ…å†µè€Œç”Ÿçš„ã€‚\n\n\n[TOC]\n1. ä»€ä¹ˆæ˜¯AVLæ ‘äºŒå‰æœç´¢æ ‘è™½ç„¶ç¼©çŸ­äº†æŸ¥æ‰¾çš„æ•ˆç‡ï¼Œä½†æ˜¯æ•°æ®æœ‰åºçš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ä¸€è¾¹éå¸¸é•¿çš„æƒ…å†µï¼Œå¯¼è‡´åŸæœ¬çš„O(logN)æ—¶é—´å¤æ‚åº¦è¢«è¿«å˜æˆäº†O(N)\nå¹³è¡¡æ ‘ä¹Ÿæ˜¯æœç´¢äºŒå‰æ ‘ï¼Œå…¶å¼•å…¥äº†ä¸€ä¸ªå¹³è¡¡å› å­çš„æ¦‚å¿µï¼Œç”¨äºæ§åˆ¶æœç´¢äºŒå‰æ ‘çš„å¹³è¡¡ã€‚å®ƒä¼šä¿è¯å·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®ï¼ˆç»å¯¹å€¼ï¼‰ä¸è¶…è¿‡1ã€‚å½“æ–°æ’å…¥èŠ‚ç‚¹å¯¼è‡´é«˜åº¦ä¹‹å·®è¶…è¿‡1æ—¶ï¼Œä¾¿ä¼šè§¦å‘æ—‹è½¬ï¼Œä½¿å¾—æ ‘çš„é«˜åº¦é™ä½ã€‚\n\nç®€å•è¯´æ¥ï¼šAVLæ ‘èƒ½ä¿è¯ä¸¤è¾¹é«˜åº¦çš„ç›¸å¯¹å¹³è¡¡ï¼Œè¿™æ ·å°±ç¨³å®šäº†äºŒå‰æœç´¢æ ‘çš„æ•ˆç‡\n\n1.1 äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸€é¢—AVLæ ‘æˆ–ç©ºæ ‘ï¼Œå…¶æœ‰ä»¥ä¸‹æ€§è´¨\n\nå®ƒçš„å·¦å³å­æ ‘æ˜¯AVLæ ‘\nå·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1\n\nè¿™é‡Œå¼•å…¥å¹³è¡¡å› å­æ¥æ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶äºŒå‰æ ‘çš„é«˜åº¦ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸€ä¸ªå¹³è¡¡å› å­ï¼Œå®ƒçš„å€¼æ˜¯1/0/-1ã€‚å¦‚æœå¹³è¡¡å› å­çš„å€¼è¶…è¿‡äº†1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªèŠ‚ç‚¹çš„å­æ ‘å·²ç»ä¸å¹³è¡¡ï¼Œéœ€è¦è¿›è¡Œæ—‹è½¬ã€‚\n\nå®é™…ä¸Šï¼ŒAVLæ ‘ä¸ä¸€å®šéè¦ç”¨å¹³è¡¡å› å­ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è®¡ç®—æ ‘çš„é«˜åº¦çš„æ–¹å¼æ¥ç¡®è®¤å¹³è¡¡å› å­ï¼Œä½†æ˜¯è¿™æ ·éœ€è¦éå†å·¦å³å­æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜\n\n2. å®ç°ä¸€é¢—AVLæ ‘2.1 AVLæ ‘çš„èŠ‚ç‚¹åŸºæœ¬çš„æ¦‚å¿µç†è§£ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„ç»“æ„æ¥ã€‚å…³äºå„ä¸ªå€¼çš„å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒä¸‹æ–¹çš„æ³¨é‡Š\n\nå¹³è¡¡æœç´¢äºŒå‰æ ‘æ˜¯ä¸€ä¸ªâ€œä¸‰å‰é“¾â€ã€‚è¿™ä»£è¡¨æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰å·¦å³å­©å­ï¼Œè¿˜æœ‰ä¸€ä¸ªprevæŒ‡é’ˆæŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚ä¸ºäº†æ ‡è¯†æ ‘æ˜¯å¦å¹³è¡¡ï¼Œå‡†ç¡®æ¥è¯´æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦å¹³è¡¡ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªâ€œå¹³è¡¡å› å­â€æ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶å¹³è¡¡\n\nå·¦å³å­æ ‘é«˜åº¦ç›¸åŒ  0\nå·¦å­æ ‘é«˜äºå³å­æ ‘  -1\nå³å­æ ‘é«˜äºå·¦å­æ ‘  1\n\n\ntemplate&lt;class K,class V&gt;struct AVLTreeNode&#123;\tpair&lt;K, V&gt; _kv;//é”®å€¼å¯¹\tAVLTreeNode&lt;K, V&gt;* _left;//å·¦å­æ ‘\tAVLTreeNode&lt;K, V&gt;* _right;//å³å­æ ‘\tAVLTreeNode&lt;K, V&gt;* _parent;//çˆ¶èŠ‚ç‚¹\t// å³å­æ ‘-å·¦å­æ ‘çš„é«˜åº¦å·®\tint _bf;  // å¹³è¡¡å› å­\tAVLTreeNode(const pair&lt;K, V&gt;&amp; kv)\t\t:_kv(kv),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_bf(0)\t&#123;&#125;&#125;;\n\nå…³äºé”®å€¼å¯¹çš„å†…å®¹ï¼Œåœ¨ä¸Šç¯‡åšå®¢çš„KVLæ ‘ä¸­æœ‰æåˆ°è¿‡ ã€ä¼ é€é—¨ã€‘\n\n2.2 AVLæ ‘çš„æ’å…¥ï¼ˆé‡è¦ï¼‰å› ä¸ºAVLéœ€è¦æ§åˆ¶æ ‘çš„é«˜åº¦ï¼Œå…¶æ’å…¥çš„æ—¶å€™å°±æ²¡æœ‰KVLæ ‘é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚æˆ‘ä»¬æ¯æ¬¡æ’å…¥ä¹‹åï¼Œéƒ½éœ€è¦å‘ä¸Šæ›´æ–°å¹¶åˆ¤æ–­æ ‘çš„å¹³è¡¡å› å­æ˜¯å¦æ­£å¸¸\nå…ˆæ¥ç†æ¸…ä¸€ä¸‹æ€è·¯:\n\nå¦‚æœæ˜¯ç©ºæ ‘ï¼Œnewä¸€ä¸ªæ–°èŠ‚ç‚¹äº¤ç»™rootï¼Œæ— éœ€è¿›è¡Œåç»­æ“ä½œ\næ’å…¥æ–°èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ©ç”¨æœç´¢äºŒå‰æ ‘çš„è§„åˆ™ï¼ˆåœ¨è¿™é‡Œæˆ‘é‡‡ç”¨äº†å·¦å°å³å¤§çš„è§„åˆ™ï¼‰æ¥æ‰¾åˆ°æ–°èŠ‚ç‚¹åº”è¯¥æ’å…¥çš„ä½ç½®ï¼Œç›´æ¥è¿›è¡Œæ’å…¥\næ’å…¥ä¹‹åï¼Œéœ€è¦å‘ä¸Šæ›´æ–°å¹³è¡¡å› å­ï¼ˆåˆ©ç”¨çˆ¶èŠ‚ç‚¹parentï¼‰\nå¦‚æœè¯¥æ’å…¥èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹çš„å³è¾¹ï¼Œå¹³è¡¡å› å­+1\nå¦‚æœåœ¨è¯¥èŠ‚ç‚¹çš„å·¦è¾¹ï¼Œå¹³è¡¡å› å­-1ã€‚\n\n\næ›´æ–°äº†å¹³è¡¡å› å­ä¹‹åï¼Œéœ€è¦åŠæ—¶è¿›è¡Œåˆ¤æ–­ã€‚å¦‚æœå¹³è¡¡å› å­ç­‰äº0ï¼Œåˆ™ä¸éœ€è¦ç»§ç»­å¾€ä¸Šæ›´æ–°ã€‚å¦‚æœå¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äº1ï¼Œè¯´æ˜å½“å‰å°±éœ€è¦æ—‹è½¬äº†\n\næ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºæ’å…¥çš„ä¸€ä¸ªåŸºæœ¬æ¡†æ¶\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;\t//åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘\tif (_root == nullptr)\t&#123;\t\t_root = new Node(kv);\t\treturn true;\t&#125;\t//kvæ ‘çš„æ“ä½œ\tNode* parent = nullptr;\tNode* cur = _root;\twhile (cur)\t&#123;           //åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®\t\tif (cur-&gt;_kv.first &lt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (cur-&gt;_kv.first &gt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse&#123;\t\t\treturn false;\t\t&#125;\t&#125;\t//æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹\tcur = new Node(kv);\tif (parent-&gt;_kv.first &lt; kv.first)\t&#123;\t\tparent-&gt;_right = cur;\t&#125;\telse\t&#123;\t\tparent-&gt;_left = cur;\t&#125;\tcur-&gt;_parent = parent;\t//æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°å¹³è¡¡å› å­\twhile (parent)\t&#123;\t\tif (cur == parent-&gt;_left) &#123;\t\t\tparent-&gt;_bf--;//å·¦-1\t\t&#125;\t\telse&#123;\t\t\tparent-&gt;_bf++;//å³+1\t\t&#125;\t\t//æ›´æ–°äº†ä¹‹åï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ç»§ç»­æ›´æ–°ï¼Œè¿˜æ˜¯éœ€è¦æ—‹è½¬\t\tif (parent-&gt;_bf == 0) &#123;\t\t\tbreak;//ä¸º0ä»£è¡¨é«˜åº¦æ²¡æœ‰å˜åŒ–ï¼Œä¸éœ€è¦ç»§ç»­æ›´æ–°\t\t&#125;\t\telse if (parent-&gt;_bf == 1 || parent-&gt;_bf == -1)\t\t&#123;\t\t\tcur = cur-&gt;_parent;//å‘ä¸Šæ›´æ–°\t\t\tparent = parent-&gt;_parent;\t\t&#125;\t\telse if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)\t\t&#123;\t\t\t//æ—‹è½¬\t\t&#125;\t\telse\t\t&#123;\t\t\t//æ’å…¥ä¹‹å‰AVLå°±å­˜åœ¨ä¸å¹³è¡¡å­æ ‘\t\t\tassert(false);\t\t&#125;\t&#125;\treturn true;&#125;\n\nå…¶ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼šæ—‹è½¬ï¼Œéœ€è¦æ‹¿å‡ºæ¥å•ç‹¬è®²è§£ä¸€ç•ª\n\nä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„äºŒå‰æ ‘è¿›è¡Œæ’å…¥ä¹‹åï¼Œå¹³è¡¡å› å­çš„å˜åŒ–ã€‚\n\nå› ä¸ºæœç´¢äºŒå‰æ ‘éœ€è¦ä¿è¯ä¸¤è¾¹çš„é«˜åº¦ä¹‹å·®ä¸å¤§äº1ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬çš„æ ‘è¿˜æ²¡æœ‰è¿èƒŒAVLæ ‘çš„è§„åˆ™ã€‚\nå¯å¦‚æœæˆ‘ä»¬ç»§ç»­å¾€å³å­æ ‘æ’å…¥èŠ‚ç‚¹å‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€é¢—å­æ ‘çš„æ ¹èŠ‚ç‚¹çš„å¹³è¡¡å› å­ä¸º2ï¼Œè¶…è¿‡äº†1ã€‚æ­¤æ—¶ä¸¤è¾¹å­æ ‘çš„é«˜åº¦å·®ä¸º2ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œæ—‹è½¬æ“ä½œ\n2.2.1 å·¦&#x2F;å³å•æ—‹ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æŠŠä¸Šå›¾çš„æ’å…¥æƒ…å†µç›´æ¥ç®€åŒ–ä¸ºä¸‹é¢çš„æ ·å­\n\nå½“æˆ‘ä»¬åœ¨è¿™æ£µæ ‘é«˜åº¦è¾ƒé«˜çš„é‚£ä¸€ä¾§çš„è¾¹ç¼˜æ’å…¥çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œå•æ—‹ã€‚\n\næ¯”å¦‚å³è¾¹é«˜ï¼Œå°±æ˜¯åœ¨æœ€å³è¾¹çš„å¶å­å¤„æ’å…¥\n\nå•æ—‹çš„æ€è·¯å¾ˆå¥½ç†è§£ï¼Œä¸‹é¢ä»¥å·¦å•æ—‹ä¸ºä¾‹ï¼ˆè“è‰²ä»£è¡¨æ–°å¢èŠ‚ç‚¹ï¼‰\n\nè¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†3ä¸ªä¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯prevèµ·å§‹èŠ‚ç‚¹ï¼ˆå³å¹³è¡¡å› å­å¤§äº1çš„èŠ‚ç‚¹ï¼‰ä»¥åŠå®ƒçš„å³å­æ ‘subRã€å³å­æ ‘çš„å·¦å­æ ‘subRLï¼ˆå³å›¾ä¸­çš„bå­æ ‘ï¼‰\n\néœ€è¦åšçš„æ“ä½œï¼Œå°±æ˜¯æŠŠsubRLé“¾æ¥ç»™prevçš„å³ï¼Œå†å°†prevé“¾æ¥åˆ°subRçš„å·¦\nå› ä¸ºsubRLåœ¨prevçš„å³ä¾§ï¼Œå…¶çš„å€¼è‚¯å®šå¤§äºprevï¼Œæ‰€ä»¥è¿™æ ·é“¾æ¥æ˜¯ä¸ä¼šç ´åæœç´¢äºŒå‰æ ‘çš„ç»“æ„çš„ã€‚\n\næ—‹è½¬å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠprevå’ŒsubRçš„å¹³è¡¡å› å­éƒ½æ›´æ–°ä¸º0\n\nå³å•æ—‹çš„æ“ä½œå’Œå·¦å•æ—‹çš„æ€è·¯å®Œå…¨ç›¸åŒï¼Œåªä¸è¿‡æ–¹å‘ç›¸å\n\n\næ€è·¯æå®šäº†ï¼Œä¸‹é¢å°±æ¥å†™ä¸€ä¸ªä»£ç å§ï¼\nvoid RotateL(Node* parent)//å·¦å•æ—‹&#123;    Node* prev = parent;    Node* subR = parent-&gt;_right;    Node* subRL = subR-&gt;_left;    //ç”¨æ¥è®°å½•å½“å‰parentçš„çˆ¶äº²ï¼Œæœ€åçš„é“¾æ¥éœ€è¦    Node* ppNode = parent-&gt;_parent;    prev-&gt;_right = subRL;    if (subRL != nullptr)    &#123;//ä¸ä¸ºç©ºæ‰èƒ½è¿›è¡Œparentæ“ä½œ        subRL-&gt;_parent = prev;    &#125;    subR-&gt;_left = prev;    prev-&gt;_parent = subR;    if (prev == _root)    &#123;//å•ç‹¬æ“ä½œä¸ºæ ¹èŠ‚ç‚¹çš„æƒ…å†µ        //subR-&gt;_parent = nullptr;        _root = subR;        _root-&gt;_parent = nullptr;    &#125;    else    &#123;        if (prev == ppNode-&gt;_left) &#123;            ppNode-&gt;_left = subR;        &#125;        else &#123;            ppNode-&gt;_right = subR;        &#125;        subR-&gt;_parent = ppNode;    &#125;    //é»˜è®¤å…¨éƒ½æ”¹æˆ0    subR-&gt;_bf = parent-&gt;_bf = 0;&#125;\n\nå³å•æ—‹çš„ä»£ç å’Œè¿™ä¸ªç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†\n\nå®Œæ•´ä»£ç å¯ä»¥åˆ°æˆ‘çš„ä»£ç ä»“åº“é‡Œé¢çœ‹å“¦ï¼ã€Giteeã€‘\n\næ—‹è½¬çš„ä»£ç å†™å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¿˜éœ€è¦äº†è§£çš„æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦è¿›è¡Œå•æ—‹ï¼Ÿ\nçœ‹å›¾å¯ä»¥å¾—çŸ¥ï¼Œå½“prevçš„å¹³è¡¡å› å­ä¸º-2ï¼ŒsubLçš„å¹³è¡¡å› å­ä¸º-1çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œä¸€æ¬¡å³å•æ—‹\n\nåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä¸€ä¸ªç»“è®ºï¼Œé‚£å°±æ˜¯å½“çˆ¶èŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼è¶…è¿‡1ï¼Œå…¶å·¦&#x2F;å³è¾¹èŠ‚ç‚¹çš„å¹³è¡¡å› å­ä¸º1ä¸”å’Œçˆ¶èŠ‚ç‚¹å¹³è¡¡å› å­çš„æ­£è´Ÿç›¸åŒæ—¶ï¼Œéœ€è¦å‘å¦å¤–ä¸€ä¸ªæ–¹å‘è¿›è¡Œå•æ—‹ã€‚\nå·¦å•æ—‹å°±æ˜¯çˆ¶èŠ‚ç‚¹ä¸º2ï¼Œå…¶å³å­æ ‘ä¸º1ï¼Œéœ€è¦å‘å¦å¤–ä¸€ä¸ªæ–¹å‘å·¦è¿›è¡Œå•æ—‹\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å›¾é‡Œé¢ç”»å‡ºæ¥çš„prevæ˜¯æ ¹èŠ‚ç‚¹ï¼Œä½†å®é™…ä¸Šè¿›è¡Œå•æ—‹çš„æ—¶å€™ï¼Œprevå¯èƒ½æ˜¯å¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘ã€‚åœ¨å•æ—‹çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¿å­˜prevçš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶é‡æ–°é“¾æ¥è‡³subR\n//æ’å…¥å‡½æ•°çš„æ—‹è½¬éƒ¨åˆ†else if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)&#123;    if (parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == 1)    &#123;        RotateL(parent);    &#125;    else if (parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == -1)    &#123;        RotateR(parent);    &#125;    else    &#123;        //â€¦â€¦    &#125;    break;&#125;\n\næˆ‘ä»¬ç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\nvoid TestAVLTree1()&#123;\tint a[] = &#123;9,8,7,6,5,4,3,2,1 &#125;;\tAVLTree&lt;int, int&gt; t;\tfor (auto e : a)\t&#123;\t\tt.Insert(make_pair(e, e));\t&#125;\tt.InOrder();\tcout &lt;&lt; endl;&#125;\n\nè¿›è¡Œä¸­åºæ‰“å°ï¼Œå¯ä»¥è·å–é“ä¸‹é¢çš„ç»“æœã€‚å¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»æœ‰åº\n\nåœ¨VS2019çš„è°ƒè¯•çª—å£ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å‚å®¶çš„è¿™æ£µæ ‘æ˜¯ç¬¦åˆå¹³è¡¡æœç´¢äºŒå‰æ ‘çš„æ€§è´¨çš„\n\n\n2.2.2 å·¦å³&#x2F;å³å·¦åŒæ—‹ä¸Šé¢çš„æƒ…å†µè¿˜ç®—å®¹æ˜“ï¼Œä¸€æ¬¡å•æ—‹å°±èƒ½è§£å†³ã€‚é‚£å¦‚æœæˆ‘ä»¬æ’å…¥ä¸æœ‰åºçš„æ•°æ®å‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ä¸­åºæ‰“å°çš„ç»“æœå·²ç»æœ‰åºï¼Œå¯å®ƒç¬¦åˆå¹³è¡¡äºŒå‰æ ‘çš„è§„åˆ™å—ï¼Ÿ\nå†æ’å…¥ä¸€ä¸ª25ï¼Œä¼šå‘ç°è§¦å‘äº†æ–­è¨€ï¼Œè¯´æ˜AVLæ ‘çš„è§„åˆ™è¢«ç ´åäº†\n\nå°±å¥½æ¯”ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ˜¯ä»¥15 6 7è¿™ç§éæœ‰åºæ–¹å¼æ’å…¥çš„ï¼Œå°±ä¼šå‡ºç°å•æ—‹å®Œå…¨å¤„ç†ä¸äº†çš„æƒ…å†µ\n\nå¦‚æœè¿›è¡Œå•æ—‹ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯«æ— å˜åŒ–ã€‚æ—‹è½¬äº†ä¹‹åçš„èŠ‚ç‚¹ä¾æ—§æ˜¯è¿åAVLæ ‘çš„è§„åˆ™\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œä¸¤æ¬¡å¾ªç¯äº†ï¼\n\næ¦‚å¿µç†è§£äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥å†™ä»£ç äº†ã€‚\nå› ä¸ºæœ¬è´¨ä¸Šå°±æ˜¯ä¸¤æ¬¡å•æ—‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¤ç”¨ä¹‹å‰å†™å¥½çš„å•æ—‹ä»£ç \nvoid RotateLR(Node* parent)//å·¦å³&#123;    RotateL(parent-&gt;_left);    RotateR(parent);&#125;\n\nä½†äº‹æƒ…è¿œæ²¡æœ‰è¿™ä¹ˆç®€å•ï¼\nåœ¨2.2.1å•æ—‹çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬æ—‹è½¬å®Œæ¯•åä¼šæŠŠprevå’ŒsubLçš„å¹³è¡¡å› å­éƒ½æ”¹æˆäº†0ã€‚åœ¨è¿™ç§åŒæ—‹çš„æƒ…å†µä¸‹ï¼Œå…¨æ”¹æˆ0æ˜¾ç„¶ä¸ç¬¦åˆè¦æ±‚ã€‚\nä¸‹é¢çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æ—‹è½¬ä¹‹åï¼ŒæŠŠ10çš„å¹³è¡¡å› å­æ”¹æˆ-1ï¼Œ20å’Œ30çš„å¹³è¡¡å› å­æ”¹æˆ0\n\nåŒæ—‹çš„æƒ…å†µåˆ†ä¸ºä¸‹é¢3ç§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ç´«è‰²æ¡†ä¸­æ‰€æŒ‡çš„è¿™ä¸ªèŠ‚ç‚¹æ¥åˆ¤æ–­å±äºå“ªä¸€ç§æƒ…å†µï¼Œå†é’ˆå¯¹æ€§çš„å¤„ç†ï¼\n\nå¤„ç†ä¹‹åçš„ç»“æœå¦‚ä¸‹\n\nå…¶ä»£ç é€»è¾‘å¦‚ä¸‹\n//è¿™ç§åŒæ—‹è½¬çš„æƒ…å†µï¼ŒåŸºæœ¬å¦‚ä¸‹//   9// 7//   8//å¿…é¡»è¦åŒæ—‹è½¬æ‰èƒ½è§£å†³é—®é¢˜void RotateLR(Node* parent)//å·¦å³&#123;    Node* prev = parent;    Node* subL = parent-&gt;_left;    Node* subLR = subL-&gt;_right;    int bf = subLR-&gt;_bf;    RotateL(parent-&gt;_left);    RotateR(parent);    if (bf == 0)    &#123;        prev-&gt;_bf = 0;        subL-&gt;_bf = 0;        subLR-&gt;_bf = 0;    &#125;    else if (bf == 1)    &#123;        subL-&gt;_bf = -1;        prev-&gt;_bf = 0;        subLR-&gt;_bf = 0;    &#125;    else if (bf == -1)    &#123;        subL-&gt;_bf = 0;        prev-&gt;_bf = 1;        subLR-&gt;_bf = 0;    &#125;    else &#123;        assert(false);    &#125;&#125;void RotateRL(Node* parent)//å³å·¦&#123;    Node* prev = parent;    Node* subR = parent-&gt;_right;    Node* subRL = subR-&gt;_left;    int bf = subRL-&gt;_bf;    RotateR(parent-&gt;_right);    RotateL(parent);    if (bf == 0)    &#123;        prev-&gt;_bf = 0;        subR-&gt;_bf = 0;        subRL-&gt;_bf = 0;    &#125;    else if (bf == -1)    &#123;        subR-&gt;_bf = 1;        prev-&gt;_bf = 0;        subRL-&gt;_bf = 0;    &#125;    else if (bf == 1)    &#123;        subRL-&gt;_bf = 0;        subR-&gt;_bf = 0;        prev-&gt;_bf = -1;    &#125;    else &#123;        assert(false);    &#125;&#125;\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ’å…¥å‡½æ•°ç»™è¡¥å…¨äº†ï¼\n\nå®Œæ•´ä»£ç å¯ä»¥åˆ°æˆ‘çš„ä»£ç ä»“åº“é‡Œé¢çœ‹å“¦ï¼ã€Giteeã€‘\n\nè¿˜æ˜¯åˆšåˆšçš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒå·²ç»æ²¡æœ‰æŠ¥é”™äº†ï¼\n\n\n2.3 AVLæ ‘çš„æœç´¢æœ¬è´¨ä¸ŠAVLæ ‘è¿˜æ˜¯ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘ï¼Œæ‰€ä»¥æœç´¢è‚¯å®šæ˜¯å°‘ä¸äº†çš„ï¼\nå®ƒçš„æœç´¢å’ŒKVLæ ‘å®Œå…¨ä¸€è‡´ï¼Œåˆ©ç”¨keyæ¥è¿›è¡Œæœç´¢ï¼Œå®šä½valueã€‚\næ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¬è¿‡æ¥ç”¨ã€‚\n//å› ä¸ºkvlæ ‘æˆ‘ä»¬éœ€è¦ä¿®æ”¹valueï¼Œæ‰€ä»¥è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆNode* _FindR(Node* root, const K&amp; key)&#123;\tif (root == nullptr)\t\treturn nullptr;\tif (root-&gt;_kv.first &lt; key)\t&#123;\t\treturn _FindR(root-&gt;_right, key);\t&#125;\telse if (root-&gt;_kv.first &gt; key)\t&#123;\t\treturn _FindR(root-&gt;_left, key);\t&#125;\telse\t&#123;\t\treturn root;//è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆ\t&#125;&#125;\n\nä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æˆ‘ä»¬å®šä¹‰ä¸ºç§æœ‰ï¼Œåœ¨å…¬æœ‰é‡Œé¢å®šä¹‰ä¸€ä¸ªä¸‹é¢çš„å‡½æ•°\n//æŸ¥æ‰¾æ˜¯é€šè¿‡keyæ¥è¿›è¡Œçš„Node* FindR(const K&amp; key)&#123;\treturn _FindR(_root, key);&#125;\n\næµ‹è¯•ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°äº†å…¨0çš„åœ°å€å€¼ï¼Œå³nullptrï¼Œè¯´æ˜æ²¡æœ‰æ‰¾åˆ°34\n\n2.4 å¦‚ä½•åˆ¤æ–­æ˜¯å¦ç¬¦åˆAVLæ ‘çš„æ€§è´¨å¦‚æœæ¯ä¸€æ¬¡æˆ‘ä»¬éƒ½è¦ç”¨è°ƒè¯•å»çœ‹å½“å‰çš„ä»£ç æ˜¯å¦ç¬¦åˆäºŒå‰æ ‘çš„æ€§è´¨ï¼Œæœªå…æœ‰äº›å¤ªéº»çƒ¦äº†\nä¸‹é¢æˆ‘ä»¬æœ‰ä¸¤ç§åŠæ³•æ¥ç®€æ´åœ°åˆ¤æ–­ï¼\n2.4.1 å±‚åºéå†ï¼ˆOJé¢˜ï¼‰ä¸‹é¢çš„ä»£ç æ˜¯ä¸€é“OJé¢˜çš„ç­”æ¡ˆï¼Œå…¶è¦æ±‚æ˜¯è®©æˆ‘ä»¬æŠŠæ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½æ’å…¥ä¸€ä¸ªvectorï¼Œæœ€åè¿”å›çš„æ˜¯ä¸€ä¸ªåµŒå¥—çš„vector&lt;vector&lt;int&gt;&gt;\n\næ¥è‡ª https://leetcode.cn/problems/binary-tree-level-order-traversal/\n\nå› ä¸ºæˆ‘ä»¬å½“å‰æµ‹è¯•çš„ç”¨ä¾‹éƒ½æ˜¯intç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ²¡æœ‰ç”¨æ¨¡æ¿å‚æ•°ã€‚å®é™…ä¸Šæˆ‘ä»¬åº”è¯¥æ”¹æˆkeyçš„ç±»å‹\nvector&lt;vector&lt;int&gt;&gt; levelOrder() &#123;\tvector&lt;vector&lt;int&gt;&gt; vv;\tif (_root == nullptr)\t\treturn vv;\tqueue&lt;Node*&gt; q;\tint levelSize = 1;\tq.push(_root);\twhile (!q.empty())\t&#123;\t\t// levelSizeæ§åˆ¶ä¸€å±‚ä¸€å±‚å‡º\t\tvector&lt;int&gt; levelV;\t\twhile (levelSize--)\t\t&#123;\t\t\tNode* front = q.front();\t\t\tq.pop();\t\t\tlevelV.push_back(front-&gt;_kv.first);\t\t\tif (front-&gt;_left)\t\t\t\tq.push(front-&gt;_left);\t\t\tif (front-&gt;_right)\t\t\t\tq.push(front-&gt;_right);\t\t&#125;\t\tvv.push_back(levelV);\t\tfor (auto e : levelV)\t\t&#123;\t\t\tcout &lt;&lt; e &lt;&lt; &quot; &quot;;\t\t&#125;\t\tcout &lt;&lt; endl;\t\t// ä¸Šä¸€å±‚å‡ºå®Œï¼Œä¸‹ä¸€å±‚å°±éƒ½è¿›é˜Ÿåˆ—\t\tlevelSize = q.size();\t&#125;\treturn vv;&#125;\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€å±‚çš„ç»“æœï¼Œç¬¦åˆæˆ‘ä»¬AVLæ ‘çš„æ€§è´¨\n\n2.4.2 æ£€æŸ¥å¹³è¡¡å› å­è¿™é‡Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡è®¡ç®—å­æ ‘çš„é«˜åº¦ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ»¡è¶³AVLæ ‘çš„æ€§è´¨ã€‚\nåªè¦ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®å¤§äº1ï¼Œå°±è¯´æ˜ä¸æ˜¯AVLæ ‘\n//è®¡ç®—é«˜åº¦int _Height(Node* root)&#123;    if (root == nullptr)        return 0;    int lh = _Height(root-&gt;_left);    int rh = _Height(root-&gt;_right);    //å¦‚æœå·¦å­æ ‘é«˜äºå³å­æ ‘ï¼Œå°±è¿”å›å·¦å­æ ‘+1ï¼ˆæ ¹ï¼‰    return lh &gt; rh ? lh + 1 : rh + 1;&#125;//åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘bool _IsBalanceTree(Node* root)&#123;    // ç©ºæ ‘ä¹Ÿæ˜¯AVLæ ‘    if (nullptr == root)        return true;    // è®¡ç®—pRootèŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼šå³pRootå·¦å³å­æ ‘çš„é«˜åº¦å·®    int leftHeight = _Height(root-&gt;_left);    int rightHeight = _Height(root-&gt;_right);    int diff = rightHeight - leftHeight;    // å¦‚æœè®¡ç®—å‡ºçš„å¹³è¡¡å› å­ä¸pRootçš„å¹³è¡¡å› å­ä¸ç›¸ç­‰ï¼Œæˆ–è€…    // pRootå¹³è¡¡å› å­çš„ç»å¯¹å€¼è¶…è¿‡1ï¼Œåˆ™ä¸€å®šä¸æ˜¯AVLæ ‘    if (abs(diff) &gt;= 2)    &#123;        cout &lt;&lt; root-&gt;_kv.first &lt;&lt; &quot;èŠ‚ç‚¹å¹³è¡¡å› å­å¼‚å¸¸&quot; &lt;&lt; endl;        return false;    &#125;    if (diff != root-&gt;_bf)    &#123;        cout &lt;&lt; root-&gt;_kv.first &lt;&lt; &quot;èŠ‚ç‚¹å¹³è¡¡å› å­ä¸ç¬¦åˆå®é™…&quot; &lt;&lt; endl;        return false;    &#125;    // pRootçš„å·¦å’Œå³å¦‚æœéƒ½æ˜¯AVLæ ‘ï¼Œåˆ™è¯¥æ ‘ä¸€å®šæ˜¯AVLæ ‘    return _IsBalanceTree(root-&gt;_left)        &amp;&amp; _IsBalanceTree(root-&gt;_right);&#125;\n\n\n\n2.5 åˆ©ç”¨éšæœºå€¼å’Œé¡ºåºå€¼è¿›è¡Œæµ‹è¯•ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨éšæœºå€¼å’Œé¡ºåºå€¼æµ‹è¯•AVLæ ‘çš„æ­£ç¡®æ€§\nvoid TestAVLTree2()&#123;\tconst size_t N = 1024*1024;\tvector&lt;int&gt; v;\tv.reserve(N);\tsrand(time(0));//ä½¿ç”¨éšæœºæ•°\tfor (size_t i = 0; i &lt; N; ++i)\t&#123;\t\tv.push_back(rand());\t\t//v.push_back(i);\t&#125;\tAVLTree&lt;int, int&gt; t;\tfor (auto e : v)\t&#123;\t\tt.Insert(make_pair(e, e));\t&#125;\tcout &lt;&lt; &quot;æ˜¯å¦å¹³è¡¡?&quot; &lt;&lt; t.IsBalanceTree() &lt;&lt; endl;\tcout &lt;&lt; &quot;é«˜åº¦:&quot; &lt;&lt; t.Height() &lt;&lt; endl;&#125;\n\nåˆ©ç”¨éšæœºæ•°æµ‹è¯•çš„ç»“æœå¦‚ä¸‹\n\né¡ºåºæ’å…¥çš„ç»“æœå¦‚ä¸‹\n\næ²¡æœ‰é—®é¢˜è¾£ï¼\n2.6 AVLæ ‘çš„åˆ é™¤AVLæ ‘çš„åˆ é™¤å’ŒKVLæ ‘æ˜¯åŸºæœ¬ç›¸åŒçš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ›´æ–°å¹³è¡¡å› å­ã€‚\n\nå¦‚æœåˆ é™¤çš„æ˜¯å·¦èŠ‚ç‚¹ï¼Œå¹³è¡¡å› å­+1\nå¦‚æœåˆ é™¤çš„æ˜¯å³èŠ‚ç‚¹ï¼Œå¹³è¡¡å› å­-1\n\nå½“æˆ‘ä»¬é‡åˆ°å¹³è¡¡å› å­é”™è¯¯ï¼ˆç»å¯¹å€¼å¤§äº1ï¼‰å°±éœ€è¦è¿›è¡Œæ—‹è½¬\n\nå› ä¸ºæœç´¢æ ‘ä¸­ä¸€èˆ¬ä¸ä¼šè¿›è¡Œåˆ é™¤ï¼Œæ•ˆç‡å¾ˆä½ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†™äº†ï¼ï¼ˆæ‡’ï¼‰\n\n2.7 äºŒå‰æ ‘æ€§èƒ½åœ¨ä¸€äº›æ—¶å€™ï¼Œæœç´¢äºŒå‰æ ‘çš„æ€§èƒ½å¹¶ä¸ä¼šå¾ˆé«˜\n\næ¯”å¦‚å½“æˆ‘ä»¬æ’å…¥çš„å…ƒç´ å·²ç»æœ‰åºï¼Œæˆ–è€…åŸºæœ¬æœ‰åºçš„æ—¶å€™ï¼ŒäºŒå‰æ ‘çš„æ€§èƒ½å°±å’Œæ™®é€šçš„å®¹å™¨å·®è·ä¸å¤§äº†\nAVLæ ‘æ›´é€‚åˆäºæ’å…¥çš„å…ƒç´ ä¸ä¼šè¢«æ”¹å˜çš„æƒ…å†µã€‚å¦‚æœæ’å…¥çš„å…ƒç´ éœ€è¦ç»å¸¸è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆä¹Ÿä¸å¤ªé€‚åˆã€‚ï¼ˆæ¯”å¦‚åˆ é™¤çš„æ—¶å€™ï¼ŒAVLæ ‘çš„å¹³è¡¡å› å­å¯èƒ½éœ€è¦ä¸€ç›´å‘ä¸Šåˆ°æ ¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸äºšäºäºŒæ¬¡æ’å…¥ï¼‰\n\nç»“è¯­é‚£ä¹ˆæœ¬ç¯‡å…³äºAVLæ ‘çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸæ‹‰ï¼\næœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€C++ã€‘çº¢é»‘æ ‘çš„æ€§è´¨å’Œå®ç°","url":"/2022/09/04/note_cpp/17%E7%BA%A2%E9%BB%91%E6%A0%91/","content":"ä¸Šç¯‡åšå®¢æˆ‘ä»¬äº†è§£äº†AVLæ ‘ï¼Œè¿™ç¯‡åšå®¢å°±è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªäºŒå‰æ ‘ï¼šçº¢é»‘æ ‘\n\nä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼šVS2019\n\n\n\n[TOC]\n\nåšå®¢é‡Œé¢å¼•ç”¨äº†ä¸€äº›ç™¾åº¦æœåˆ°çš„å›¾ç‰‡ï¼ˆè‡ªå·±æ‡’çš„ç”»äº†ï¼Œå‘œå‘œï¼‰\n1.æ¦‚å¿µAVLæ ‘æ˜¯ä¸€ä¸ªå‡ ä¹å®Œå…¨å¹³è¡¡çš„æœç´ äºŒå‰æ ‘ï¼Œå…¶å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸ä¼šè¶…è¿‡1ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„ï¼Œæ˜¯æ¯ä¸€æ¬¡æ’å…¥éƒ½æœ‰å¯èƒ½éœ€è¦æ—‹è½¬å¤šæ¬¡ï¼Œæ’å…¥çš„æ•ˆç‡è¾ƒä½ã€‚\nè€Œçº¢é»‘æ ‘åˆ™é€‰æ‹©äº†â€œç›¸å¯¹å¹³è¡¡â€ï¼Œå¹¶æ‹¥æœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š\n\nçº¢é»‘æ ‘å¯ä»¥ä¿è¯æœ€é•¿è·¯å¾„çš„å°äºæœ€çŸ­è·¯å¾„çš„2å€\n\næ¯”å¦‚æœ€çŸ­è·¯å¾„ä¸º30ï¼Œé‚£ä¹ˆæœ€é•¿è·¯å¾„å°±ä¸èƒ½è¶…è¿‡60\n\n\nå¯¹äºcpuæ¥è¯´ï¼ŒAVLæ ‘éå†20æ¬¡ï¼ˆç™¾ä¸‡çº§æ•°æ®ï¼‰å’Œçº¢é»‘æ ‘éå†40æ¬¡çš„æ—¶é—´å·®è·æå°ã€‚æ‰€ä»¥çº¢é»‘æ ‘å³ä¿æŒäº†ç›¸å¯¹å¹³è¡¡ï¼Œåˆå‡å°äº†AVLæ ‘å¤šæ¬¡æ—‹è½¬çš„æ¶ˆè€—ã€‚\n\n1.1 æ€§è´¨å…¶é€šè¿‡ä¸‹é¢çš„å‡ ç‚¹æ¥ç»´æŒè¿™ä¸€æ€§è´¨ï¼š\n\næ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²\næ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²\næ¯ä¸€ä¸ªçº¢èŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\nå¶å­èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰è§†ä½œé»‘è‰²\n\nä¸ºä»€ä¹ˆæ»¡è¶³äº†è¿™å‡ ä¸ªæƒ…å†µï¼Œå°±æ»¡è¶³äº†çº¢é»‘æ ‘çš„æœ€é•¿è·¯å¾„çš„å°äºæœ€çŸ­è·¯å¾„çš„2å€çš„æ€§è´¨å‘¢ï¼Ÿ\nçº¦æŸ4å’Œ5ï¼Œä¿è¯äº†çº¢é»‘æ ‘çš„å¤§è‡´å¹³è¡¡ï¼šæ ¹åˆ°å¶å­çš„æ‰€æœ‰è·¯å¾„ä¸­ï¼Œæœ€é•¿è·¯å¾„ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„2å€ã€‚è¿™ä½¿å¾—çº¢é»‘æ ‘åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½æœ‰O(logN) çš„æŸ¥æ‰¾æ•ˆç‡\n\né»‘è‰²é«˜åº¦ä¸º3æ—¶ï¼Œæœ€çŸ­è·¯å¾„ï¼šé»‘è‰²â†’ é»‘è‰² â†’é»‘è‰²\næœ€é•¿è·¯å¾„ï¼šé»‘è‰²â†’çº¢è‰² â†’é»‘è‰² â†’çº¢è‰² â†’é»‘è‰²\næ­¤æ—¶æœ€çŸ­è·¯å¾„çš„é•¿åº¦ä¸º2ï¼ˆä¸ç®—Nilçš„å¶å­èŠ‚ç‚¹ï¼‰ï¼Œæœ€é•¿è·¯å¾„ä¸º4\n\nè¿™é‡Œå¯ä»¥å¾—å‡ºä¸€ä¸ªæ™®éè§„å¾‹ï¼Œçº¢é»‘æ ‘æœ€çŸ­è·¯å¾„å³ä¸ºå…¨é»‘è·¯å¾„ã€‚è€Œæœ€é•¿è·¯å¾„æ˜¯ä¸€é»‘ä¸€çº¢é—´éš”çš„æƒ…å†µ\n\n2.è®¾è®¡ä¸€é¢—çº¢é»‘æ ‘åœ¨è®¾è®¡çº¢é»‘æ ‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç‰¢è®°ä¸Šé¢çš„5ç‚¹ã€‚å…¶ä¸­å‰4ç‚¹éå¸¸é‡è¦ä¸”ä¸å¯ä»¥è¢«ç ´åã€‚ä¸€æ—¦è¢«ç ´åï¼Œå°±å½±å“äº†çº¢é»‘æ ‘çš„åŸºæœ¬æ€§è´¨ã€‚\n2.1 è®¾è®¡èŠ‚ç‚¹å’ŒAVLæ ‘ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æŠŠèŠ‚ç‚¹å•ç‹¬æˆä¸€ä¸ªç±»ï¼Œæ¥å­˜æ”¾æˆ‘ä»¬éœ€è¦çš„pair\nè¿™é‡Œå°±è®¾è®¡åˆ°äº†é¢œè‰²çš„åˆå€¼åº”è¯¥ç»™ä»€ä¹ˆã€‚çº¢è‰²ï¼Œè¿˜æ˜¯é»‘è‰²ï¼Ÿ\næ¥çœ‹çœ‹æ€§è´¨3å’Œ4ï¼š\n\nçº¢è‰²çš„å·¦å³å­æ ‘å¿…é¡»æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\n\nç®€å•æ€è€ƒï¼Œå³å¯å‘ç°ï¼Œæ’å…¥çº¢èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ›´å¥½æ§åˆ¶ã€‚è€Œæ’å…¥é»‘èŠ‚ç‚¹ææœ‰å¯èƒ½ç ´åæ€§è´¨4ä¸”è¾ƒéš¾ä¿®å¤ã€‚\n//æšä¸¾ï¼Œå®šä¹‰é¢œè‰²enum Color&#123;\tRED,//0\tBLACK,//1&#125;;//èŠ‚ç‚¹ç±»template&lt;class K, class V&gt;struct RBTreeNode&#123;\tRBTreeNode&lt;K, V&gt;* _left;\tRBTreeNode&lt;K, V&gt;* _right;\tRBTreeNode&lt;K, V&gt;* _parent;\tpair&lt;K, V&gt; _kv;\t//AVLæ ‘çš„å¹³è¡¡å› å­ï¼Œåœ¨çº¢é»‘æ ‘ä¸­ä¸ºé¢œè‰²\tColor _col;\t//æ’å…¥èŠ‚ç‚¹çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ºçº¢è‰²\t//å› ä¸ºè¿™ä¸ªæ»¡è¶³æ€§è´¨3ä¸”ä¸ä¼šç ´åæ€§è´¨4\tRBTreeNode(const pair&lt;K, V&gt;&amp; kv)\t\t:_kv(kv),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_col(RED)\t&#123;&#125;&#125;;\n\n2.2 æ’å…¥çš„å‡ ç§æƒ…å†µèŠ‚ç‚¹è®¾è®¡å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ’å…¥çš„é€»è¾‘æå®šï¼Œé‚£ä¹ˆçº¢é»‘æ ‘ä¹Ÿå°±å®Œæˆäº†ï¼\nå‰åŠéƒ¨åˆ†çš„ä»£ç å’ŒAVLæ ‘å®Œå…¨ç›¸åŒï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç»™æ ¹èŠ‚ç‚¹ä¸€ä¸ªé»‘è‰²ï¼ˆé»˜è®¤æ˜¯çº¢è‰²ï¼‰ä»¥ç»´æŒæ€§è´¨2\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;\t//åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘\tif (_root == nullptr)\t&#123;\t\t_root = new Node(kv);\t\t_root-&gt;_col = BLACK;//è¿™é‡Œå¿…é¡»è¦æ‰‹åŠ¨ç»™é»‘è‰²\t\treturn true;\t&#125;\t//kvæ ‘çš„æ“ä½œ\tNode* parent = nullptr;\tNode* cur = _root;\twhile (cur)\t&#123;\t\t//åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®\t\tif (cur-&gt;_kv.first &lt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (cur-&gt;_kv.first &gt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse &#123;\t\t\treturn false;\t\t&#125;\t&#125;\t//æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹\tcur = new Node(kv);\tif (parent-&gt;_kv.first &lt; kv.first)\t&#123;\t\tparent-&gt;_right = cur;\t&#125;\telse\t&#123;\t\tparent-&gt;_left = cur;\t&#125;\tcur-&gt;_parent = parent;       //è°ƒæ•´       //â€¦â€¦  &#125;\n\n2.2.1 æƒ…å†µ1ï¼šæ— éœ€æ—‹è½¬åœ¨ä¸‹é¢çš„è¿™ç§æƒ…å†µä¸­ï¼Œæˆ‘ä»¬åœ¨pçš„å·¦è¾¹æ’å…¥äº†ä¸€ä¸ªcuræ–°èŠ‚ç‚¹ã€‚æ­¤æ—¶è¿åäº†æ€§è´¨3ï¼Œçº¢èŠ‚ç‚¹çš„å­©å­å¿…é¡»è¦æ˜¯é»‘èŠ‚ç‚¹ã€‚\nè¿™ç§æƒ…å†µå¿…é¡»æ»¡è¶³på’Œuéƒ½æ˜¯çº¢èŠ‚ç‚¹\n\néšåæˆ‘ä»¬å°±éœ€è¦å¼€å§‹å‘ä¸Šè¿›è¡Œæ›´æ–°ï¼Œæ“ä½œå¦‚ä¸‹ï¼š\n\næŠŠpå’Œuéƒ½æ”¹æˆé»‘èŠ‚ç‚¹\næŠŠgæ”¹æˆçº¢èŠ‚ç‚¹\n\nä¿®æ”¹ä¹‹åçš„ç»“æœå¦‚ä¸‹ï¼Œå³ä¸å½±å“æ€§è´¨3ï¼›ä¹Ÿä¿è¯äº†é»‘èŠ‚ç‚¹çš„ä¸ªæ•°ä¸å˜ï¼Œç»´æŒäº†æ€§è´¨4\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„gä¸ä¸€å®šæ˜¯æ ¹èŠ‚ç‚¹ã€‚æ‰€ä»¥åœ¨æ“ä½œå®Œè¿™ä¸€è¯¾å­æ ‘ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­å‘ä¸Šè¿›è¡Œæ“ä½œï¼Œé¿å…gçš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²çš„æƒ…å†µã€‚\n\nä»£ç å®ç°å¦‚ä¸‹ï¼ˆä»¥çˆ¶èŠ‚ç‚¹ä¸ºgçš„å·¦å­æ ‘ä¸ºä¾‹ï¼‰\n//æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°é¢œè‰²,åªæœ‰å‡ºç°è¿ç»­çº¢è‰²ä¹‹åæ‰éœ€è¦æ›´æ–°while (parent &amp;&amp; parent-&gt;_col==RED)&#123;    //pæ˜¯gçš„å·¦    if (parent == grandpa-&gt;_left)    &#123;        Node* uncle = grandpa-&gt;_right;        //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰        if (uncle &amp;&amp; uncle-&gt;_col == RED)        &#123;            uncle-&gt;_col = BLACK;            parent-&gt;_col = BLACK;            grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢            //ç»§ç»­å‘ä¸Šè°ƒæ•´            //cur = cur-&gt;_parent;            //parent = parent-&gt;_parent;            cur = grandpa;            parent = cur-&gt;_parent;        &#125;    &#125;    else&#123;        //....    &#125;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§è°ƒæ•´ä¼šæŠŠgæ”¹æˆçº¢èŠ‚ç‚¹ã€‚å¦‚æœGæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ”¹æˆçº¢è‰²ä¹‹åå°±ä¸ç¬¦åˆæ€§è´¨äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ“ä½œå®Œæˆä¹‹åï¼Œç»Ÿä¸€æŠŠæ ¹èŠ‚ç‚¹æ”¹æˆé»‘è‰²\n//ä¸ç®¡æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæœ€åéƒ½æŠŠæ ¹æ”¹æˆé»‘ï¼Œç¬¦åˆæ¡ä»¶2_root-&gt;_col = BLACK;\n\n2.2.2 æƒ…å†µ2ï¼šéœ€è¦å•æ—‹å½“æˆ‘ä»¬æ’å…¥äº†ä¸€ä¸ªcurå‘ä¸Šæ›´æ–°çš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šé‡åˆ°ä¸‹å›¾ä¸­é—´çš„æƒ…å†µã€‚pæ˜¯çº¢èŠ‚ç‚¹ï¼Œè¿åäº†æ€§è´¨3ï¼Œè€Œuæ˜¯é»‘èŠ‚ç‚¹ï¼Œä¸èƒ½ç®€å•ç²—æš´çš„é€šè¿‡æŠŠpæ”¹æˆçº¢æ¥è§£å†³ã€‚\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹gè¿›è¡Œä¸€æ¬¡å•æ—‹ï¼ˆå›¾ä¸­æ˜¯å³å•æ—‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå‘uæ—‹è½¬ï¼‰ã€‚å› ä¸ºcurå’Œpå½¢æˆäº†åŒä¾§çš„è¿ç»­ä¸¤ä¸ªçº¢èŠ‚ç‚¹ã€‚å’ŒAVLæ ‘çš„å•æ—‹æƒ…å†µç›¸ä¼¼ï¼Œåªæœ‰è¿™ä¸¤èŠ‚ç‚¹åœ¨åŒä¾§ï¼Œæ‰å¯ä»¥æ‰§è¡Œå•æ—‹ã€‚\næ—‹è½¬å®Œæ¯•ä¹‹åï¼Œéœ€è¦æŠŠgæ›´æ–°ä¸ºçº¢èŠ‚ç‚¹ï¼Œpæ›´æ–°ä¸ºé»‘èŠ‚ç‚¹\n2.2.3 æƒ…å†µ3ï¼šéœ€è¦åŒæ—‹åœ¨æƒ…å†µ2ä¸­ï¼Œpå’Œcuréƒ½æ˜¯åœ¨å®ƒä»¬çˆ¶äº²çš„åŒä¸€ä¾§ã€‚è€Œæƒ…å†µ3å°±æ˜¯på’Œcuråœ¨çˆ¶äº²çš„ä¸åŒä¾§ã€‚\n\næ¯”å¦‚pæ˜¯gçš„å·¦å­æ ‘ï¼Œcuræ˜¯pçš„å³å­æ ‘\nåŒæ—¶æ»¡è¶³pæ˜¯çº¢ï¼Œuæ˜¯é»‘\n\nè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œä¸€æ¬¡ä¸‰æ—‹ï¼Œæ“ä½œå¦‚ä¸‹ï¼š\n\nä»¥pä½œä¸ºåŸºç‚¹ï¼Œå‘curçš„å¦å¤–ä¸€ä¸ªæ–¹å‘å•æ—‹ä¸€æ¬¡ï¼ˆä¸Šå›¾ä¸­å°±æ˜¯å·¦æ—‹ï¼‰\næ—‹è½¬äº†ä¹‹åï¼Œå°±ä¼šå˜æˆæƒ…å†µ2\nè¿™æ—¶å€™å†ä»¥gä¸ºåŸºç‚¹ï¼Œå‘uçš„æ–¹å‘æ—‹è½¬ä¸€æ¬¡ï¼ˆä¸Šå›¾ä¸­ä¸ºå³æ—‹ï¼‰\næ—‹è½¬å®Œæˆä¹‹åï¼ŒæŠŠgè®¾ç½®ä¸ºçº¢ï¼Œcurè®¾ç½®ä¸ºé»‘å³å¯\n\n\nä¸€ä¸‹æ˜¯å®Œæ•´çš„ä¸‰ç§æƒ…å†µä»£ç ï¼ˆpæ˜¯gçš„å·¦å­æ ‘çš„æƒ…å†µï¼‰\n//pæ˜¯gçš„å·¦if (parent == grandpa-&gt;_left)&#123;    Node* uncle = grandpa-&gt;_right;    //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰    if (uncle &amp;&amp; uncle-&gt;_col == RED)    &#123;        uncle-&gt;_col = BLACK;        parent-&gt;_col = BLACK;        grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢        //ç»§ç»­å‘ä¸Šè°ƒæ•´        //cur = cur-&gt;_parent;        //parent = parent-&gt;_parent;        cur = grandpa;        parent = cur-&gt;_parent;    &#125;    else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)    &#123;        //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰        if (cur == parent-&gt;_left)        &#123;            RotateR(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹            parent-&gt;_col = BLACK;            grandpa-&gt;_col = RED;        &#125;        else//cur == parent-&gt;_right        &#123;            //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹            //   g            // p            //   c            RotateL(parent);            RotateR(grandpa);            grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²            cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„        &#125;        break;    &#125;&#125;else&#123;    //....&#125;\n\nç”±äºç¯‡å¹…é™åˆ¶ï¼Œpæ˜¯gå³å­æ ‘çš„æƒ…å†µå°±ä¸è´´å‡ºæ¥äº†ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠä¸Šé¢çš„ä»£ç å…¨åè¿‡æ¥å°±è¡Œäº†\n\nå®Œæ•´ä»£ç è¯·æŸ¥çœ‹æˆ‘çš„giteeä»“åº“\n\n2.3 æŸ¥æ‰¾ï¼ˆå’ŒAVLæ ‘å®Œå…¨ç›¸åŒï¼‰//å› ä¸ºkvlæ ‘æˆ‘ä»¬éœ€è¦ä¿®æ”¹valueï¼Œæ‰€ä»¥è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆNode* _FindR(Node* root, const K&amp; key)&#123;\tif (root == nullptr)\t\treturn nullptr;\tif (root-&gt;_kv.first &lt; key)\t&#123;\t\treturn _FindR(root-&gt;_right, key);\t&#125;\telse if (root-&gt;_kv.first &gt; key)\t&#123;\t\treturn _FindR(root-&gt;_left, key);\t&#125;\telse\t&#123;\t\treturn root;\t&#125;&#125;//æŸ¥æ‰¾æ˜¯é€šè¿‡keyæ¥è¿›è¡Œçš„Node* FindR(const K&amp; key)&#123;\treturn _FindR(_root, key);&#125;\n\n2.4 åˆ¤æ–­æ˜¯å¦æ˜¯çº¢é»‘æ ‘æœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œ1æ˜¯å¯ä»¥é€šè¿‡è®¡ç®—æœ€å¤§é«˜åº¦&#x2F;æœ€å°é«˜åº¦è¿›è¡Œé—´æ¥åˆ¤æ–­ï¼Œ2æ˜¯ä»¥çº¢é»‘æ ‘æ€§è´¨æ¥éªŒè¯æ˜¯å¦æ»¡è¶³æœ€ä¸Šé¢æåˆ°çš„5ç‚¹\n2.4.1 è®¡ç®—æœ€å°æœ€å¤§é«˜åº¦è¿™é‡Œå®ç°é€’å½’å³å¯ï¼Œæœ€å°é•¿åº¦å…¶å®å°±æ˜¯åœ¨æœ€åreturnçš„åˆ¤æ–­ä¸­ï¼ŒæŠŠå¤§äºå·æ”¹æˆå°äºå·ï¼Œè¿”å›å°çš„é‚£ä¸ªå­æ ‘çš„é«˜åº¦+1\nint maxHeight()&#123;\treturn _maxHeight(_root);&#125;int minHeight() &#123;\treturn _minHeight(_root);&#125;//æœ€å¤§é•¿åº¦int _maxHeight(Node* root)&#123;\tif (root == nullptr)\t\treturn 0;\tint lh = _maxHeight(root-&gt;_left);\tint rh = _maxHeight(root-&gt;_right);\treturn lh &gt; rh ? lh + 1 : rh + 1;&#125;//æœ€å°é•¿åº¦int _minHeight(Node* root)&#123;\tif (root == nullptr)\t\treturn 0;\tint lh = _minHeight(root-&gt;_left);\tint rh = _minHeight(root-&gt;_right);\treturn lh &lt; rh ? lh + 1 : rh + 1;&#125;\n\nåªè¦æœ€å¤§é•¿åº¦å°äºæœ€å°é•¿åº¦çš„2å€ï¼Œé‚£ä¹ˆåŸºæœ¬è§„åˆ™å°±æ˜¯æ²¡æœ‰ç ´åçš„\n\nä½†è¿™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ£€æŸ¥å®ƒæ˜¯å¦æ»¡è¶³çº¢é»‘æ ‘çš„å…¶ä½™æ€§è´¨\n2.4.2 é€’å½’æ£€æŸ¥æ€§è´¨è¿™é‡Œå†æ¬¡åˆ—å‡º5ç‚¹æ€§è´¨\n\næ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²\næ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²\næ¯ä¸€ä¸ªçº¢èŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\nå¶å­èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰è§†ä½œé»‘è‰²\n\nç„¶åé€šè¿‡ä¸¤ä¸ªå‡½æ•°æ¥å®ç°ï¼Œå…¶ä¸­ä¸€ä¸ªå‡½æ•°éœ€è¦è¿›è¡Œé€’å½’\nbool IsRBTree()&#123;    //æ£€æŸ¥çº¢é»‘æ ‘å‡ æ¡è§„åˆ™    Node* pRoot = _root;    //ç©ºæ ‘ä¹Ÿæ˜¯çº¢é»‘æ ‘    if (nullptr == pRoot)        return true;    //æ£€æµ‹æ ¹èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³æƒ…å†µ2    if (BLACK != pRoot-&gt;_col)    &#123;        cout &lt;&lt; &quot;è¿å2ï¼šæ ¹èŠ‚ç‚¹å¿…é¡»ä¸ºé»‘è‰²&quot; &lt;&lt; endl;        return false;    &#125;    //è·å–ä»»æ„ä¸€æ¡è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œä½œä¸ºåŸºå‡†å€¼    size_t blackCount = 0;    Node* pCur = pRoot;    while (pCur)    &#123;        if (BLACK == pCur-&gt;_col)            blackCount++;        pCur = pCur-&gt;_left;    &#125;    //æ£€æµ‹æ˜¯å¦æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œkç”¨æ¥è®°å½•è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°    size_t k = 0;    return _IsValidRBTree(pRoot, k, blackCount);&#125;\t//æ£€æµ‹æ˜¯å¦ä¸ºRBæ ‘bool _IsValidRBTree(Node* pRoot, size_t k, const size_t blackCount)&#123;    //èµ°åˆ°nullä¹‹åï¼Œåˆ¤æ–­kå’Œblackæ˜¯å¦ç›¸ç­‰    if (nullptr == pRoot)    &#123;        if (k != blackCount)        &#123;            cout &lt;&lt; &quot;è¿å4ï¼šæ¯æ¡è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°å¿…é¡»ç›¸åŒ&quot; &lt;&lt; endl;            return false;        &#125;        return true;    &#125;    //ç»Ÿè®¡é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°    if (BLACK == pRoot-&gt;_col)        k++;    //æ£€æµ‹å½“å‰èŠ‚ç‚¹ä¸å…¶åŒäº²æ˜¯å¦éƒ½ä¸ºçº¢è‰²    if (RED == pRoot-&gt;_col &amp;&amp; pRoot-&gt;_parent &amp;&amp; pRoot-&gt;_parent-&gt;_col == RED)    &#123;        cout &lt;&lt; &quot;è¿å3ï¼šå­˜åœ¨è¿åœ¨ä¸€èµ·çš„çº¢è‰²èŠ‚ç‚¹&quot; &lt;&lt; endl;        return false;    &#125;    return _IsValidRBTree(pRoot-&gt;_left, k, blackCount) &amp;&amp;        _IsValidRBTree(pRoot-&gt;_right, k, blackCount);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æ˜¯éšæœºæ•°è¿˜æ˜¯é¡ºåºæ’å…¥ï¼Œéƒ½é€šè¿‡äº†æ£€æŸ¥\n\n3.çº¢é»‘æ ‘çš„è¿ç”¨çº¢é»‘æ ‘åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰ä½¿ç”¨ï¼Œåœ¨C++ä¸­ï¼Œæœ€ä¸ºç»å…¸çš„ä¾¿æ˜¯mapå’Œsetè¿™ä¸¤ä¸ªå®¹å™¨ï¼Œå®ƒä»¬ä¾¿ä½¿ç”¨äº†çº¢é»‘æ ‘ä½œä¸ºåº•å±‚é€»è¾‘\n\nhttps://gitee.com/musnow/learn_cpp_code/blob/master/STL-Sourcecode/stl_tree.h\n\nåœ¨stlæºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¿™ä¸ªtree.hï¼Œé‡Œé¢ä¾¿æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘çš„å®ç°ã€‚è€Œmapå’Œsetå°±æ˜¯è°ƒç”¨äº†çº¢é»‘æ ‘ï¼Œåªåšäº†ä¸€ä¸ªç®€å•çš„å°è£…\nç»“è¯­åœ¨ä¸‹ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä¼šè®°å½•mapå’Œsetçš„åŸºæœ¬ä½¿ç”¨ï¼Œä»¥åŠé€šè¿‡çº¢é»‘æ ‘æ¨¡æ‹Ÿå®ç°mapå’Œset\næ„Ÿè°¢å¤§å®¶æ”¯æŒï¼\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€C++ã€‘STL map_set","url":"/2022/09/19/note_cpp/18STL_map_set/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹STLåº“é‡Œé¢çš„map&#x2F;setçš„ä½¿ç”¨ï¼Œå¹¶å°è¯•ç”¨è‡ªå·±å†™çš„çº¢é»‘æ ‘å°è£…ä¸€ä¸ªç±»ä¼¼çš„map/setå‡ºæ¥\n\n\n\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\n[TOC]\n1 setsetå°±æ˜¯äºŒå‰æœç´¢æ ‘ä¸­åªæœ‰å•ä¸ªkeyçš„æ ‘ï¼Œå®ƒæœ‰ä¸‹é¢çš„å‡½æ•°å¯ä¾›ä½¿ç”¨\n1.1 æ„é€ å‡½æ•°ã€è¿­ä»£å™¨æ„é€ å‡½æ•°ã€è¿­ä»£å™¨ä»€ä¹ˆçš„éƒ½å¾ˆç®€å•ï¼Œåœ¨è¿™é‡Œå°±æåˆ°äº†ï¼Œå’Œå…¶ä»–STLåŸºæœ¬ä¸€è‡´\n\n\n1.2 èŠ‚ç‚¹è®¡æ•° sizesetè‡ªå¸¦èŠ‚ç‚¹è®¡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¹‹é—´è·å–äºŒå‰æ ‘ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œæˆ–åˆ¤æ–­setæ˜¯å¦ä¸ºç©º\n\n1.3 æ’å…¥åˆ é™¤æ’å…¥åˆ é™¤ç­‰å‡½æ•°åœ¨è¿™é‡Œä¸è¿‡å¤šè§£é‡Šï¼Œä½¿ç”¨æ–¹æ³•å’Œstringã€vectorå®Œå…¨ä¸€è‡´ã€‚å¦‚æœå¤§å®¶çš„stlæ˜¯ä»stringä¸€è·¯å­¦ä¹ è¿‡æ¥ï¼Œé‚£ä¹ˆå¯¹äºè¿™äº›å‡½æ•°çš„ä½¿ç”¨è‚¯å®šæ²¡æœ‰é—®é¢˜ï¼\n\næ’å…¥å¯ä»¥æ’å…¥å•ä¸ªå…ƒç´ ï¼Œå…¶è¿”å›ä¸€ä¸ªé”®å€¼å¯¹åŒ…å«è¿™ä¸ªå…ƒç´ çš„è¿­ä»£å™¨+ä¸€ä¸ªboolæ ‡è¯†æ˜¯å¦æ’å…¥æˆåŠŸã€‚ä½ è¿˜å¯ä»¥ç”¨ç›¸åŒç±»å‹setçš„è¿­ä»£å™¨åŒºé—´è¿›è¡Œæ’å…¥æ“ä½œ\n\nset&lt;int&gt;t1;//å®šä¹‰ set å¯¹è±¡ t1for (int i = 0; i &lt;= 3; ++i) &#123; // æ’å…¥ 1 2 3 4 5 6\tt1.insert(i);&#125;\n\nåˆ é™¤å¯ä»¥åˆ é™¤ï¼š\n\næŒ‡å®šè¿­ä»£å™¨ä½ç½®\næŒ‡å®šå…ƒç´ \nè¿­ä»£å™¨åŒºé—´\n\n\nä¸è¿‡å¯¹äºäºŒå‰æœç´¢æ ‘è€Œè¨€ï¼Œåˆ é™¤ä¸€ç›´éƒ½ä¸æ˜¯é«˜é¢‘æ“ä½œ+æ•ˆç‡è¾ƒä½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨å®ç°äºŒå‰æœç´¢æ ‘çš„æ—¶å€™ï¼Œæˆ‘æ²¡æœ‰å»å®ç°åˆ é™¤æ“ä½œã€‚\n\nå…¶å®ä¸»è¦æ˜¯åˆ é™¤æ“ä½œæ¯”è¾ƒéš¾ç†è§£ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­\n\n1.4 æŸ¥æ‰¾findä½œä¸ºæœç´¢äºŒå‰æ ‘ï¼ŒæŸ¥æ‰¾æ‰æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…ƒç´ çš„ä½ç½®ã€‚\n\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›endè¿­ä»£å™¨\n\næ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒåŠ ä¸Šå¯¹äºend()è¿­ä»£å™¨çš„åˆ¤æ–­ï¼Œåªè¦ä¸ç­‰äºendè¯´æ˜æ‰¾åˆ°äº†è¯¥å…ƒç´ ï¼Œè¿›è¡Œè®¿é—®\nset&lt;int&gt; v1;v1.insert(1);v1.insert(3);v1.insert(6);set&lt;int&gt;::iterator it = v1.find(3);if (it != v1.end())&#123;\tcout &lt;&lt; &quot;æ‰¾åˆ°äº† &quot;&lt;&lt; *it &lt;&lt; endl;&#125;\n\nå› ä¸ºsetæ˜¯åªæœ‰keyçš„æœç´ äºŒå‰æ ‘ï¼Œåœ¨è·å–åˆ°è¿­ä»£å™¨ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨*itè¿›è¡Œè§£å¼•ç”¨å³å¯å¾—åˆ°èŠ‚ç‚¹çš„å€¼\n\nè€Œå½“æˆ‘ä»¬æŸ¥æ‰¾å†…éƒ¨ä¸å­˜åœ¨çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥å¾—çŸ¥æ²¡æœ‰æ‰¾åˆ°\n\n\n1.5 countè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æŸ¥æ‰¾äºŒå‰æ ‘ä¸­valueå€¼çš„ä¸ªæ•°ã€‚ä½†ç”±äºé»˜è®¤çš„setä¸æ”¯æŒé”®å€¼å†—ä½™ï¼Œæ’å…¥ç›¸åŒçš„é”®å€¼ä¼šè¢«å¿½ç•¥æ‰ã€‚æ‰€ä»¥è¿™ä¸ªcountåœ¨è¿™é‡Œåªæœ‰0å’Œ1ä¸¤ä¸ªè¿”å›å€¼ï¼Œä¹Ÿåªèƒ½ç”¨æ¥åˆ¤æ–­è¯¥å€¼æ˜¯å¦å­˜åœ¨ã€‚\n\nä½†æ˜¯å› ä¸ºcountéœ€è¦éå†æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥åœ¨setä¸­ï¼Œå®ƒçš„æ•ˆç‡æ¯”findæ˜¯æ›´å·®çš„ã€‚\nmultisetæ”¯æŒé”®å€¼å†—ä½™è¿™ä¸ªå‡½æ•°çœŸæ­£èµ·ä½œç”¨çš„åœ°æ–¹æ˜¯åœ¨multisetï¼Œäººå¦‚å…¶åï¼Œè¿™æ˜¯ä¸€ä¸ªæ”¯æŒé”®å€¼å†—ä½™çš„setï¼Œæˆå‘˜å‡½æ•°å®Œå…¨ç›¸åŒã€‚\n\n\n1.6 lower&#x2F;upper_bound\niterator lower_bound (const value_type&amp; val);   // è¿”å›æŒ‡å‘ç­‰äºæˆ–å¤§äºæŒ‡å®šé”®å€¼å…ƒç´ çš„è¿­ä»£å™¨iterator upper_bound (const value_type&amp; val);   // è¿”å›æŒ‡å‘å¤§äºæŒ‡å®šé”®å€¼å…ƒç´ çš„è¿­ä»£å™¨\n\nè¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå’Œæˆ‘ä»¬æŒ‡å®šçš„å…ƒç´ ç›¸åŒ&#x2F;æˆ–è€…æ¯”æŒ‡å®šå…ƒç´ æ›´å¤§ï¼ˆç¬¬ä¸€ä¸ªæ›´å¤§çš„é”®å€¼ï¼‰çš„è¿­ä»£å™¨\n\n\nå¦‚æœæ›´å¤§çš„é”®å€¼æˆ–è€…å®ƒæœ¬èº«ä¸å­˜åœ¨ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªendè¿­ä»£å™¨ï¼Œè¿™ä¸€ç‚¹å’Œfindä¸€æ ·\n\n\n setåŸºæœ¬ç”¨å¾—åˆ°çš„è¿­ä»£å™¨è¿™é‡Œéƒ½æäº†ä¸€å˜´ï¼Œæ¥ä¸‹æ¥åº·åº·map\n2 mapmapåŒæ ·æœ‰ä¸€ä¸ªæ”¯æŒé”®å€¼å†—ä½™çš„multimapï¼Œåé¢å°±ä¸è¯´è¾£\n\nå‰é¢å…³äºæ„é€ å‡½æ•°éƒ½æš‚ä¸”ä¸æï¼Œç›´æ¥æ¥çœ‹mapå’Œsetæœ€ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ’å…¥\n2.1 æ’å…¥mapæ˜¯ä¸€ä¸ªkvläºŒå‰æœç´¢æ ‘ï¼Œå…¶æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚è¿™å°±è¦æ±‚æˆ‘ä»¬æ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦å…ˆmake_pairå»ºç«‹ä¸€ä¸ªé”®å€¼å…³ç³»ï¼Œå†æ’å…¥è¿›mapä¸­ã€‚\n\nä¹Ÿå› ä¸ºè¿­ä»£å™¨è·å–åˆ°çš„æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œæ‰€ä»¥è®¿é—®çš„æ—¶å€™éœ€è¦æŒ‡å®šé”®å€¼å¯¹çš„firstå’Œsecondã€‚mapæ˜¯ç”¨firstè¿›è¡Œæ’åºçš„ï¼Œæ‰€ä»¥firstæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œä½†æ˜¯secondå¯ä»¥\n2.2 ä¸‹æ ‡è®¿é—®&#x2F;atmapç›¸æ¯”äºsetï¼Œæœ€ç‰¹æ®Šçš„ä¸€ç‚¹å°±æ˜¯å®ƒå¯ä»¥ç”¨ä¸‹æ ‡ç›´æ¥è¿›è¡Œè®¿é—®\nmap[key]=value;\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼éå¸¸æ–¹ä¾¿çš„ä¿®æ”¹value\n\nå’Œé‡è½½äº†ä¸‹æ ‡çš„vectorä¸€æ ·ï¼Œmapä¹Ÿæœ‰ä¸€ä¸ªatå‡½æ•°ï¼ˆC++11æ–°å¢ï¼‰åœ¨ä¹‹å‰vectorçš„å‡½æ•°ä¸­ï¼Œæˆ‘æ²¡æœ‰æåˆ°è¿™ä¸¤ä¸ªçš„åŒºåˆ«ã€‚åœ¨è¿™é‡Œè¯´ä¸€ä¸‹\n\noperator[]å’Œatçš„ä¸»è¦åŒºåˆ«åœ¨äºoperator[]ä¸åšè¾¹ç•Œæ£€æŸ¥ï¼Œè€Œatä¼šåšè¾¹ç•Œæ£€æŸ¥ã€‚\n\nç”±äºoperator[]ä¸åšè¾¹ç•Œæ£€æŸ¥ï¼Œ é‚£æ€•è¶Šç•Œäº†ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œå½“ç„¶è¿™ä¸ªå¼•ç”¨æ˜¯é”™è¯¯çš„å¼•ç”¨ï¼Œå¦‚ä½•ä¸å°å¿ƒè°ƒç”¨äº†è¿™ä¸ªå¼•ç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œä¼šç›´æ¥å¯¼è‡´åº”ç”¨é€€å‡ºã€‚\nè€Œç”±äºatä¼šåšè¾¹ç•Œæ£€æŸ¥ï¼Œå¦‚æœè¶Šç•Œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåº”ç”¨å¯ä»¥try/catchè¿™ä¸ªå¼‚å¸¸ï¼Œè¿›è¡Œå¼‚å¸¸ç®¡ç†ï¼Œè€Œåº”ç”¨è¿˜èƒ½ç»§ç»­è¿è¡Œã€‚\n\natçš„ä½¿ç”¨å’Œä¸‹æ ‡ä¸å¤ªä¸€æ ·ï¼Œå’Œæˆå‘˜å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸€è‡´ã€‚æˆ‘ä»¬å¯ä»¥æ¥è¯•ä¸€è¯•\n\n\nåœ¨è¿™é‡Œå¦‚æœæˆ‘ä»¬ä¸‹æ ‡è®¿é—®ç¬¬11ä¸ªå…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚å› ä¸ºä¸‹æ ‡è®¿é—®ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„keyï¼Œè€Œvalueä¼šè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚intç±»å‹ä¹Ÿæ˜¯æœ‰é»˜è®¤æ„é€ çš„ï¼Œè¿”å›ä¸€ä¸ª0\n\nä½†å¦‚æœæˆ‘ä»¬ä¸ç”¨ä¸‹æ ‡ï¼Œç›´æ¥ç”¨atè®¿é—®ç¬¬11ä¸ªå…ƒç´ ï¼Œå°±ä¼šæŠ¥debugé”™è¯¯ï¼Œè¿™ä¾¿æ˜¯å®ƒä»¬ä¿©çš„åŒºåˆ«æ‰€åœ¨\n\n\nmapå’Œsetæœ‰åŒºåˆ«çš„åœ°æ–¹ä¸»è¦å°±æ˜¯ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä½™éƒ½æ˜¯å®Œå…¨ç›¸åŒ\næˆ‘ä»¬ç›´æ¥å¿«è¿›åˆ°æ¨¡å¼å®ç°å§ï¼\n3.æ¨¡æ‹Ÿå®ç°è¿™é‡Œä¸»è¦ä»¥KVé”®å€¼å¯¹çš„mapä¸ºä¾‹ï¼Œsetåªéœ€è¦ä¿®æ”¹keyofValueå’Œå®ƒè‡ªå·±çš„æ¨¡æ¿å‚æ•°å³å¯\n3.1 åº·åº·STLæºç åˆ©ç”¨çº¢é»‘æ ‘å®ç°mapå’Œsetä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬è‡ªå·±å†™çš„çº¢é»‘æ ‘åªæœ‰ä¸€ä¸ªKVé”®å€¼å¯¹ï¼Œé‚£ä¹ˆè¦æ€ä¹ˆåˆ¤æ–­å°è£…çš„æ˜¯mapè¿˜æ˜¯åªæœ‰keyçš„setå‘¢ï¼Ÿ\n\nå…ˆæ¥çœ‹çœ‹STLåº“çš„æºç å§ï¼ã€é“¾æ¥ã€‘\n\nåœ¨map.hçš„ç¬¬68è¡Œå¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šåº“å‡½æ•°é‡Œé¢çš„mapå’Œsetéƒ½åªæ˜¯å°è£…äº†çº¢é»‘æ ‘\n\nå†å»æ‰¾çº¢é»‘æ ‘çš„å¤´æ–‡ä»¶ï¼Œå°±èƒ½çœ‹åˆ°å…¶ä¸æˆ‘ä»¬å®ç°çš„ä¸åŒã€‚è¿™é‡Œé¢çš„çº¢é»‘æ ‘æ€»å…±æœ‰5ä¸ªæ¨¡æ¿å‚æ•°ï¼Œé™¤å»æœ€åä¸€ä¸ªç”¨æ¥ç”³è¯·å†…å­˜ç©ºé—´çš„allocï¼Œå…¶ä½™4ä¸ªéƒ½æœ‰å…¶ä¸åŒçš„ç”¨å¤„\n\nè€Œå…¶ä¸­çš„valueæ˜¯ç”¨æ¥æ„é€ çº¢é»‘æ ‘èŠ‚ç‚¹çš„å‚æ•°\n\nçœ‹èµ·æ¥å¥½åƒå·®ä¸å¤šå¯¹å§ï¼Ÿå¯å†å›å¤´çœ‹çœ‹mapï¼Œå…¶ä¼ å…¥çš„valueæ˜¯ä¸€ä¸ªpairï¼\n\nå®é™…ä¸Šï¼Œåº“ä¸­çš„çº¢é»‘æ ‘ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„kvlï¼Œå…¶kå¹¶ä¸æ˜¯çœŸæ­£ç”¨äºæ¯”è¾ƒçš„kï¼Œè€Œæ˜¯ä¾é ç¬¬ä¸‰ä¸ªæ¨¡æ¿å‚æ•°keyofvalueï¼Œä»¥åŠæˆ‘ä»¬ä¼ å…¥çš„æ¯”è¾ƒå‡½æ•°comporeæ¥è¿›è¡Œæ¯”è¾ƒçš„\n\nè¯´äººè¯å°±æ˜¯ï¼šRBtreeä¸ä¼šåˆ¤æ–­ä½ æ˜¯mapè¿˜æ˜¯setï¼Œè€Œæ˜¯åœ¨mapå’Œsetçš„å°è£…ç«¯ï¼Œæ ¹æ®æ•°æ®çš„ä¸åŒç±»å‹ï¼Œä¼ å…¥å¯¹åº”çš„æ¯”è¾ƒå‡½æ•°ï¼Œä»¥åŠé”®å€¼ã€‚\n\næ¯”å¦‚setçš„keyofvalueå°±æ˜¯å®ƒè‡ªå·±çš„key\nè€Œmapçš„keyofvalueæ˜¯pair.first\n\nå› ä¸ºåº“å‡½æ•°é‡Œé¢pairçš„æ¯”è¾ƒï¼Œæ˜¯ä¼šæ¯”è¾ƒfirstä¹‹åï¼Œå†æ¯”è¾ƒsecondçš„ã€‚\n\nè¿™å’Œæˆ‘ä»¬æœç´¢äºŒå‰æ ‘çš„éœ€æ±‚ä¸å¤ªç¬¦åˆï¼Œæ‰€ä»¥STLåº“é‡Œé¢å°±éœ€è¦å†™ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„ä»¿å‡½æ•°ï¼Œåªé’ˆå¯¹pairçš„firstè¿›è¡Œä¸¥æ ¼æ¯”è¾ƒï¼Œä»¥ä¿è¯ç¨³å®šæ€§\n\n3.2 æ¨¡æ‹Ÿå®ç°çš„åŸºç¡€æ¡†æ¶å¦‚æœæˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿå®ç°ï¼Œåˆ™å¯ä»¥ä¾æ®ä¸‹é¢çš„æ¨¡æ¿è¿›è¡Œæ“ä½œ\n// æ¨¡æ¿å‚æ•°Vå†³å®šçº¢é»‘æ ‘å­˜ä»€ä¹ˆæ•°æ®// set: RBTree&lt;K, K&gt;// map: RBTree&lt;K, pair&lt;K, V&gt;&gt;// KeyOfV: å–å‡ºVå¯¹è±¡ä¸­keyçš„ä»¿å‡½æ•°template&lt;class K, class V, class KeyOfV&gt;\n\nè€ŒèŠ‚ç‚¹ç±»ä¹Ÿéœ€è¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹ï¼Œä¸å†é»˜è®¤åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ã€‚è€Œæ˜¯ç›´æ¥ç”¨Væ¥åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ç±»å‹ï¼Œè¿™å°±å’Œæœ€åŸºç¡€çš„æœç´¢äºŒå‰æ ‘ç›¸åŒã€‚\ntemplate&lt;class V&gt;struct RBTreeNode&#123;\tRBTreeNode&lt;V&gt;* _left;\tRBTreeNode&lt;V&gt;* _right;\tRBTreeNode&lt;V&gt;* _parent;\tV _data;\t//AVLæ ‘çš„å¹³è¡¡å› å­ï¼Œåœ¨çº¢é»‘æ ‘ä¸­ä¸ºé¢œè‰²\tColor _col;\t//æ’å…¥èŠ‚ç‚¹çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ºçº¢è‰²\t//å› ä¸ºè¿™ä¸ªæ»¡è¶³æ€§è´¨3ä¸”ä¸ä¼šç ´åæ€§è´¨4\tRBTreeNode(const V&amp; data)\t\t:_data(data),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_col(RED)\t&#123;&#125;&#125;;\n\n3.3 ä¿®æ”¹æ’å…¥çš„ä»£ç å› ä¸ºæ–°å¢äº†æ¨¡æ¿å‚æ•°ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é€šè¿‡kv firstè¿›è¡Œé”®å€¼çš„æ¯”è¾ƒäº†ã€‚æˆ‘ä»¬éœ€è¦é‡Œåˆ©ç”¨æ¨¡æ¿å‚æ•°ä¸­çš„KeyOfVä»¿å‡½æ•°æ¥è¿›è¡Œæ¯”è¾ƒçš„æ“ä½œã€‚\nåœ¨è¿™é‡Œï¼Œå…ˆç»™å‡ºmapå’Œsetä¸¤ç§KeyOfVä»¿å‡½æ•°çš„å®ç°\nstruct MapKeyOfV&#123;    const K&amp; operator()(const pair&lt;K, V&gt;&amp; kv)    &#123;        return kv.first;//mapæ˜¯é”®å€¼å¯¹ï¼Œéœ€è¦æä¾›kvçš„firstè¿›è¡Œæ¯”è¾ƒ    &#125;&#125;;struct SetKeyOfV&#123;    const K&amp; operator()(const K&amp; key)    &#123;        return key;//setåªæœ‰ä¸€ä¸ªé”®å€¼    &#125;&#125;;\n\næœ‰äº†è¿™ä¸ªä»¿å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†åŸæœ‰çš„æ¯”è¾ƒæ›¿æ¢æˆä»¿å‡½æ•°åœ¨è¿›è¡Œæ¯”è¾ƒå³å¯ï¼\npair&lt;iterator,bool&gt; Insert(const V&amp; data)&#123;    //åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘    if (_root == nullptr)    &#123;        _root = new Node(data);        _root-&gt;_col = BLACK;//è¿™é‡Œå¿…é¡»è¦æ‰‹åŠ¨ç»™é»‘è‰²        return make_pair(iterator(_root),true);    &#125;    //kvæ ‘çš„æ“ä½œ    Node* parent = nullptr;    Node* cur = _root;    while (cur)    &#123;        //åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®        if (kov(cur-&gt;_data)&lt; kov(data))        &#123;            parent = cur;            cur = cur-&gt;_right;        &#125;        else if (kov(cur-&gt;_data) &gt; kov(data))        &#123;            parent = cur;            cur = cur-&gt;_left;        &#125;        else &#123;            return make_pair(iterator(cur), false);//æ„é€ ä¸€ä¸ªè¿­ä»£å™¨è¿”å›        &#125;    &#125;    //æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹    cur = new Node(data);    Node* newnode = cur;    if (kov(parent-&gt;_data) &lt; kov(data))    &#123;        parent-&gt;_right = cur;    &#125;    else    &#123;        parent-&gt;_left = cur;    &#125;    cur-&gt;_parent = parent;    //æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°é¢œè‰²,åªæœ‰å‡ºç°è¿ç»­çº¢è‰²ä¹‹åæ‰éœ€è¦æ›´æ–°    while (parent &amp;&amp; parent-&gt;_col==RED)    &#123;        Node* grandpa = parent-&gt;_parent;//ç¥–çˆ¶        assert(grandpa);//ç¥–çˆ¶ä¸ºç©ºä¸éœ€è¦è¿›è¡Œæ“ä½œ        //pæ˜¯gçš„å·¦        if (parent == grandpa-&gt;_left)        &#123;            Node* uncle = grandpa-&gt;_right;            //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰            if (uncle &amp;&amp; uncle-&gt;_col == RED)            &#123;                uncle-&gt;_col = BLACK;                parent-&gt;_col = BLACK;                grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢                //ç»§ç»­å‘ä¸Šè°ƒæ•´                //cur = cur-&gt;_parent;                //parent = parent-&gt;_parent;                cur = grandpa;                parent = cur-&gt;_parent;            &#125;            else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)            &#123;                //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰                if (cur == parent-&gt;_left)                &#123;                    RotateR(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹                    parent-&gt;_col = BLACK;                    grandpa-&gt;_col = RED;                &#125;                else//cur == parent-&gt;_right                &#123;                    //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹                    //   g                    // p                    //   c                    RotateL(parent);                    RotateR(grandpa);                    grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²                    cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„                &#125;                break;            &#125;        &#125;        else &#123;            Node* uncle = grandpa-&gt;_left;            //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰            if (uncle &amp;&amp; uncle-&gt;_col == RED)            &#123;                uncle-&gt;_col = BLACK;                parent-&gt;_col = BLACK;                grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢                //ç»§ç»­å‘ä¸Šè°ƒæ•´                cur = grandpa;                parent = cur-&gt;_parent;            &#125;            else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)            &#123;                //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰                if (cur == parent-&gt;_right)                &#123;                    RotateL(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹                    parent-&gt;_col = BLACK;                    grandpa-&gt;_col = RED;                &#125;                else//cur == parent-&gt;_left                &#123;                    //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹                    //   g                    //\t\tp                    //   c                    RotateR(parent);                    RotateL(grandpa);                    grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²                    cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„                &#125;                break;            &#125;        &#125;    &#125;    //ä¸ç®¡æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæœ€åéƒ½æŠŠæ ¹æ”¹æˆé»‘ï¼Œç¬¦åˆæ¡ä»¶2    _root-&gt;_col = BLACK;    return make_pair(iterator(newnode), true);&#125;\n\nè¿™é‡Œè¯´æ˜ä¸€ä¸‹ä¸ºä½•è¦æŠŠè¿”å›å€¼æ›¿æ¢æˆé”®å€¼å¯¹ã€‚å› ä¸ºåœ¨å®é™…æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è·å–é“æ–°æ’å…¥å…ƒç´ çš„è¿­ä»£å™¨ï¼ˆè¿­ä»£å™¨çš„æ¨¡æ‹Ÿå®ç°ä¼šåœ¨åé¢æåŠï¼‰ï¼Œä»¥æ–¹ä¾¿åœ¨æ’å…¥åè¿›è¡Œä¿®æ”¹valueçš„æ“ä½œã€‚\n\næ¯”å¦‚æˆ‘ä»¬é»˜è®¤æ’å…¥çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåœ¨è¿›è¡Œä¸€äº›åˆ¤æ–­ä¹‹åï¼Œå†é‡æ–°ç»™è¿™ä¸ªé”®å€¼çš„valueè¿›è¡Œä¿®æ”¹ï¼ˆä»…é™äºmapçš„æƒ…å†µï¼‰\n\nå¦‚æœä¸è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé‚£ä¹ˆæƒ³ä¿®æ”¹è¿™ä¸ªé”®å€¼ï¼Œå°±åªèƒ½é€šè¿‡findå‡½æ•°æŸ¥æ‰¾åå†è¿›è¡Œä¿®æ”¹ï¼Œç›¸å¯¹æœ‰äº›éº»çƒ¦ã€‚\n3.4 è¿­ä»£å™¨âœ¨è¿™ä¸€éƒ¨åˆ†æ˜¯æ¯”è¾ƒéš¾ç†è§£çš„è¿­ä»£å™¨æ“ä½œï¼Œä¸»è¦å°±æ˜¯åœ¨ä¸€ä¸ªäºŒå‰æ ‘ä¸­åº”è¯¥å¦‚ä½•è¿›è¡Œè¿­ä»£å™¨çš„++/--æ“ä½œã€‚\n3.4.1 åŠ å‡æ“ä½œå¦‚æœä½ çœ‹è¿‡æˆ‘ä¹‹å‰çš„stlåšå®¢ï¼Œé‚£ä¹ˆä½ åº”è¯¥è¿˜è®°å¾—ï¼Œæˆ‘ä»¬çš„æ¨¡æ‹Ÿå®ç°è¿­ä»£å™¨å…¶å®å°±æ˜¯ç”¨æŒ‡é’ˆæ¥è¿›è¡Œçš„ã€‚è¿­ä»£å™¨çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå’ŒæŒ‡é’ˆç›¸å·®æ— å‡ ã€‚\nåœ¨æ­¤å¤„æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ä¸­åºéå†æ¥è¿›è¡Œè¿­ä»£å™¨çš„æ“ä½œã€‚ä¸­åºéå†çš„åŸºæœ¬æƒ…å†µå°±æ˜¯å·¦æ ¹å³ï¼Œåªä¸è¿‡æˆ‘ä»¬è¿™é‡Œä¸å†èƒ½ä½¿ç”¨é€’å½’è¿›è¡Œæ“ä½œäº†ï¼Œè€Œéœ€è¦ä½¿ç”¨è¿­ä»£çš„æ–¹æ³•ã€‚\n\nä¸Šå›¾ä¸­curéå†åˆ°äº†å³å­æ ‘ï¼Œå…¶å·¦å³å­æ ‘éƒ½ä¸ºç©ºã€‚è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦è¿”å›åˆ°çš„æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå‡†ç¡®æ¥è¯´æ˜¯ç¥–çˆ¶èŠ‚ç‚¹â€”â€”å—ï¼Ÿè¦æ˜¯curçš„çˆ¶äº²prevä¸æ˜¯gèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ç›´æ¥è¿”å›gè¿›è¡Œæ‰“å°ï¼è€Œéœ€è¦è¿”å›gçš„å·¦å­æ ‘ã€‚\næ€»ç»“å‡ºæ¥çš„è§„å¾‹å¦‚ä¸‹ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ++æ“ä½œçš„æ—¶å€™ï¼š\n\nå¦‚æœå³èŠ‚ç‚¹ä¸ºç©ºï¼Œå½“å‰èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³ä¾§ï¼Œå°±éœ€è¦ç»§ç»­å¾€ä¸Šæ‰¾ï¼ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°çˆ¶äº²å·¦ä¾§çš„é‚£ä¸ªèŠ‚ç‚¹ï¼‰\nå¦‚æœå³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ã€‚\n\nåœ¨ä¸Šå›¾ä¸­ï¼Œprevå°±æ˜¯gçš„å·¦å­æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°prevå°±è¡Œäº†ã€‚ç„¶åå› ä¸ºæˆ‘ä»¬çš„prevçš„å³å­æ ‘å·²ç»éå†è¿‡ï¼Œæ‰€ä»¥è¿™æ—¶å€™å°±éœ€è¦å¾€ä¸Šã€‚å› ä¸ºgæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥å°±éœ€è¦è¿”å›gçš„å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­çš„ä½ç½®\n\nè€Œå½“æˆ‘ä»¬åšåˆ°æœ€å³ä¾§çš„èŠ‚ç‚¹æ—¶ï¼Œå†æ¬¡++çš„æ—¶å€™å…¶å®å·²ç»éå†å®Œäº†ã€‚è¿™æ—¶å€™å³å­æ ‘ä¸ºç©ºï¼Œå¼€å§‹å¾€ä¸Šæ‰¾çˆ¶äº²æ˜¯ç¥–çˆ¶å·¦çš„å“ªä¸€ä¸ªã€‚è¿™æ—¶å€™ä¼šä¸€ç›´æ‰¾åˆ°æ ¹ï¼Œè€Œæ ¹çš„çˆ¶äº²ä¸ºç©ºï¼Œåœæ­¢éå†\n\nè½¬æ¢ä¸ºä»£ç å¦‚ä¸‹\nSelf&amp; operator++()&#123;\tif (_node-&gt;_right == nullptr)\t&#123;\t\tNode* cur = _node;\t\tNode* parent = cur-&gt;_parent;\t\t//åªè¦å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³ä¾§ï¼Œå°±éœ€è¦ç»§ç»­å¾€ä¸Šæ‰¾\t\t//æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ˜¯çˆ¶äº²å·¦ä¾§çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚\t\twhile (parent &amp;&amp; parent-&gt;_right == cur)\t\t&#123;\t\t\tcur = cur-&gt;_parent;\t\t\tparent = parent-&gt;_parent;\t\t&#125;\t\t//å¦‚æœä¸ç¬¦åˆwhileçš„æ¡ä»¶ï¼Œå°±è¯´æ˜\t\t//1 çˆ¶äº²ä¸ºç©ºï¼ˆæ ¹)\t\t//2 å¦‚æœcuræ˜¯çˆ¶äº²çš„å·¦ï¼Œé‚£å°±ç›´æ¥å°†nodeè®¾ç½®ä¸ºçˆ¶äº²\t\t_node = parent;\t&#125;\telse\t&#123;\t\t//å³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹\t\tNode* subLeft = _node-&gt;_right;\t\twhile (subLeft-&gt;_left)\t\t&#123;\t\t\tsubLeft = subLeft-&gt;_left;\t\t&#125;\t\t//æœ€å·¦èŠ‚ç‚¹\t\t_node = subLeft;\t&#125;\treturn *this;&#125;\n\n\nè¿›è¡Œ--æ“ä½œçš„æ—¶å€™åˆ™æ˜¯å®Œå…¨ç›¸åçš„æƒ…å†µã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°çˆ¶äº²æ˜¯ç¥–çˆ¶èŠ‚ç‚¹å³è¾¹çš„é‚£ä¸€ä¸ªã€‚å¦‚æœçˆ¶äº²æ˜¯ç¥–çˆ¶çš„å·¦ï¼Œé‚£å°±ç»§ç»­å¾€ä¸Šæ‰¾ã€‚\n\nSelf&amp; operator--()&#123;    if (_node-&gt;_left == nullptr)    &#123;        Node* cur = _node;        Node* parent = cur-&gt;_parent;        //ä¾æ®ä¸­åºçš„é¡ºåºï¼Œ--å°±æ˜¯å’Œ++åè¿‡æ¥ã€‚éœ€è¦æ‰¾èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³è¾¹çš„å“ªä¸€ä¸ª        //å¦‚æœæ˜¯çˆ¶äº²çš„å·¦å°±ç»§ç»­å¾€ä¸Šæ‰¾        while (parent &amp;&amp; cur == parent-&gt;_left)        &#123;            cur = cur-&gt;_parent;            parent = parent-&gt;_parent;        &#125;        //æŒ‡å‘å½“å‰çš„çˆ¶äº²        _node = parent;    &#125;    else    &#123;        // å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹        Node* subRight = _node-&gt;_left;        while (subRight-&gt;_right)        &#123;            subRight = subRight-&gt;_right;        &#125;        _node = subRight;    &#125;    return *this;&#125;\n\n3.4.2 å¥—ä¸Šå®Œæ•´è¿­ä»£å™¨æ¨¡æ¿å®Œæˆäº†è¿­ä»£å™¨çš„åŠ å‡æ“ä½œåï¼Œæˆ‘ä»¬åªéœ€è¦å¥—ä¸Šä¹‹å‰æ¨¡æ‹Ÿå®ç°çš„ç±»ä¼¼æ¨¡æ¿ï¼Œå†æ·»åŠ å‚æ•°åˆ°çº¢é»‘æ ‘çš„ç±»ä¸­ã€‚å³å¯é…å¥—å¥½ä¸€ä¸ªè¿­ä»£å™¨ï¼\ntemplate&lt;class V, class Ref, class Ptr&gt;struct __RBTreeIterator&#123;\ttypedef RBTreeNode&lt;V&gt; Node;\ttypedef __RBTreeIterator&lt;V, Ref, Ptr&gt; Self;\tNode* _node;//å½“å‰æŒ‡å‘çš„èŠ‚ç‚¹\t__RBTreeIterator(Node* node)\t\t:_node(node)\t&#123;&#125;\tRef operator*()\t&#123;\t\treturn _node-&gt;_data;\t&#125;\tPtr operator-&gt;()\t&#123;\t\treturn &amp;_node-&gt;_data;\t&#125;\t//çœç•¥++å’Œ--çš„ä»£ç \tbool operator!=(const Self&amp; s) const\t&#123;\t\treturn _node != s._node;\t&#125;\tbool operator==(const Self&amp; s) const\t&#123;\t\treturn _node == s-&gt;_node;\t&#125;&#125;;\n\n\nå®Œæ•´ä»£ç è¯·å‚è€ƒæˆ‘çš„Giteeä»“åº“\n\n3.4.3 æ·»åŠ å‚æ•°åˆ°çº¢é»‘æ ‘ç±»ä¸­æˆ‘ä»¬éœ€è¦æŠŠè¿­ä»£å™¨å†™å…¥çº¢é»‘æ ‘çš„ç±»ï¼Œå¹¶é™„ä¸Šæ™®é€šè¿­ä»£å™¨å’Œconstçš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæä¾›beginå’Œendå‡½æ•°å³å¯ã€‚\n//è¿­ä»£å™¨å°è£…ï¼Œconstå’Œæ™®é€šç‰ˆæœ¬typedef __RBTreeIterator&lt;V, V&amp;, V*&gt; iterator;typedef __RBTreeIterator&lt;V, const V&amp;, const V*&gt; const_iterator;iterator Begin()&#123;\tNode* subLeft = _root;\twhile (subLeft &amp;&amp; subLeft-&gt;_left)\t&#123;\t\tsubLeft = subLeft-&gt;_left;\t&#125;\treturn iterator(subLeft);&#125;iterator End()&#123;\treturn iterator(nullptr);&#125;const_iterator Begin() const&#123;\tNode* subLeft = _root;\twhile (subLeft &amp;&amp; subLeft-&gt;_left)\t&#123;\t\tsubLeft = subLeft-&gt;_left;\t&#125;\treturn const_iterator(subLeft);&#125;const_iterator End() const&#123;\treturn const_iterator(nullptr);&#125;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿­ä»£å™¨å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼\n\nè¿™é‡Œçš„æµ‹è¯•ç¯èŠ‚æœ€å¥½æŠŠè‡ªå·±å†™çš„mapå¥—è¿›ä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œä¸ç„¶å°±ä¼šç”¨åˆ°stlåº“é‡Œé¢çš„map\n\nè¿­ä»£å™¨å†™å¥½ä¹‹åï¼ŒèŒƒå›´forä¹Ÿæ˜¯å¯ä»¥ç”¨çš„\n\n3.5 é‡è½½ä¸‹æ ‡mapéå¸¸ç‰¹æ®Šçš„ä¸€ç‚¹å°±æ˜¯ï¼Œå¯ä»¥ç›´æ¥ç”¨map[key]=valueæ¥ä¿®æ”¹valueçš„å†…å®¹ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™å½“ç„¶ä¸èƒ½è½ä¸‹è¿™ä¸ªäº†ï¼\nå…¶å®æ“ä½œèµ·æ¥éå¸¸ç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦ç›´æ¥è°ƒç”¨æ’å…¥ï¼Œå¦‚æœé”®å€¼å­˜åœ¨ä¹Ÿä¼šè¿”å›å½“å‰é”®å€¼çš„è¿­ä»£å™¨ã€‚é”®å€¼ä¸å­˜åœ¨å°±èƒ½ç›´æ¥æ’å…¥ï¼Œè¿”å›æ–°æ’å…¥å…ƒç´ çš„è¿­ä»£å™¨ã€‚è¿™ä¹Ÿæ˜¯ä¹‹å‰ä¸ºå•¥insertå‡½æ•°æ²¡æœ‰ç›´æ¥ç”¨boolåšæ’å…¥çš„è¿”å›å€¼çš„åŸå› \n//é‡è½½ä¸‹æ ‡V&amp; operator[](const K&amp; key)&#123;    pair&lt;iterator, bool&gt; ret = insert(make_pair(key, V()));    return ret.first-&gt;second;//è¿”å›çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¿®æ”¹&#125;\n\nå› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯Vçš„å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨=è¿›è¡Œä¿®æ”¹ï¼\næµ‹è¯•ä¸€ä¸‹ï¼Œå’©æœ‰é—®é¢˜ OJBKğŸ‘\n\nsetçš„æ¨¡æ‹Ÿå®ç°æ›´ä¸ºç®€å•ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥è¾£ï¼å¤§å®¶å¯ä»¥å»æˆ‘çš„giteeçœ‹æºç ï¼Œæœ‰å•¥é—®é¢˜å¯ä»¥è¯„è®ºæå‡ºï¼\n\n4.æ›´å¤šæ“ä½œ4.1 ç”¨setå¾—å‡ºä¸¤ç»„æ•°æ®çš„é‡åˆå¤„å‡è®¾æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ç°éœ€è¦æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶çš„é‡åˆå¤„\n\nè®¾ç½®ä¸¤ä¸ªsetï¼Œåˆ†åˆ«æ’å…¥ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹\nåŒæ—¶éå†ä¸¤ä¸ªsetï¼ˆä»å°åˆ°å¤§ï¼‰\nå¦‚æœä¸¤ä¸ªsetçš„keyç›¸åŒï¼Œåˆ™å–å‡ºè¿™ä¸ªç›¸åŒå€¼ï¼Œä¸¤ä¸ªsetä¸€èµ·++\nå¦‚æœä¸ç›¸åŒï¼Œåˆ™++é‚£ä¸ªå°çš„key\n\n\nå…¶ä¸­ä¸€ä¸ªsetç»“æŸéå†ï¼Œå³ä»£è¡¨é‡åˆå¤„æŸ¥æ‰¾å®Œæ¯•ï¼\n\nç»“è¯­æœ€è¿‘æ„Ÿè§‰è‡ªå·±çœŸçš„å¾ˆå¿™ï¼Œä½†åˆä¸çŸ¥åœ¨å¿™ä»€ä¹ˆã€‚äº‹æƒ…ä¸€ä¸ªæ¥ç€ä¸€ä¸ªï¼Œè™½ç„¶å­¦æ ¡çš„è¯¾ä¸ç®—å¤šï¼Œä½†äº‹æƒ…çœŸçš„æ²¡å°‘å¤šå°‘ã€‚\næœ‰äº›äº‹æƒ…è‡ªå·±åˆæœ‰æ‹–å»¶ç—‡ï¼Œå†åŠ ä¸Šä½œæ¯ä¸è§„å¾‹ï¼ˆæŒ‡ä¸‹åˆä¸€ç¡ç¡3hï¼‰ï¼Œæµªè´¹äº†å¥½å¤šæ—¶é—´â€¦â€¦\n\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€C++ã€‘å“ˆå¸ŒHashï¼ˆæœªå®Œæˆï¼‰","url":"/2022/09/20/note_cpp/19%E5%93%88%E5%B8%8CHash-%E7%A9%BA/","content":"å­¦ä¹ å®Œäº†çº¢é»‘æ ‘ä»¥åŠmap&#x2F;setï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥åº·åº·å¦å¤–ä¸€ç§ç”¨äºæŸ¥æ‰¾æ•°æ®çš„æ–°æ–¹å¼ï¼Œé‚£ä¾¿æ˜¯å“ˆå¸Œè¡¨\n\n\n1.æ¦‚å¿µå“ˆå¸Œæ˜¯ä¸€ç§ç”¨ä¸‹æ ‡æ˜ å°„æ¥æŸ¥æ‰¾æ•°æ®çš„æ–¹å¼ã€‚åœ¨STLåº“ä¸­ï¼Œæœ‰mapå’Œsetçš„unordered(å³ä¸ºstlåº“é‡Œé¢çš„å“ˆå¸Œ)ç‰ˆæœ¬\næˆ‘ä»¬å¯ä»¥æ¥å¯¹æ¯”ä¸€ä¸‹å®ƒå’Œçº¢é»‘æ ‘ï¼ˆmap/setçš„æ ‡å‡†ç‰ˆæœ¬ï¼‰çš„æŸ¥æ‰¾æ—¶é—´å·®è·ï¼ˆæ˜¯é€šè¿‡forå¾ªç¯æŸ¥æ‰¾æ‰€æœ‰æ’å…¥æ•°æ®æ¥å®ç°çš„è®¡æ—¶ï¼‰\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŸ¥æ‰¾æ–¹é¢ï¼Œunorderedç‰ˆæœ¬æŸ¥æ‰¾çš„é€Ÿåº¦æ¯”æ­£å¸¸çš„mapå’Œsetå¿«äº†ä¸€å€æœ‰ä½™ã€‚ä¹‹å‰æˆ‘å·²ç»è§‰å¾—æœç´¢äºŒå‰æ ‘çš„æŸ¥æ‰¾å·²ç»éå¸¸å¿«äº†ï¼Œå®é™…ä¸Šå“ˆå¸Œæ‰æ˜¯çœŸæ­£çš„å¿«ä¸­ä¹‹å¿«ï¼\nè¿™ä¸¤ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š\n\nå¹³è¡¡äºŒå‰æœç´¢æ ‘ O(logN)\nå“ˆå¸Œç®—æ³• O(1)\n\nå› ä¸ºå“ˆå¸Œæ˜¯ç›´æ¥ä»å¯¹åº”çš„ä¸‹æ ‡æ˜ å°„ä½ç½®æ‰¾åˆ°æ•°æ®çš„ï¼Œè¿™å°±å’Œæˆ‘ä»¬è¿›è¡Œéšæœºè®¿é—®é¡ºåºè¡¨é‡Œé¢çš„æ•°æ®ä¸€æ ·ï¼Œéƒ½æ˜¯O(1)çš„ç›´æ¥è®¿é—®\n1.1 ä¸‹æ ‡æ˜ å°„é‚£ä¹ˆï¼Œè¦æ€ä¹ˆå¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä¸‹æ ‡æ˜ å°„å‘¢ï¼Ÿ\n\nå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„\næˆ‘ä»¬éœ€è¦å­˜æ”¾ä¸€ç»„intç±»å‹çš„æ•°æ®ï¼Œ0-9ä»¥å†…çš„æ•°å­—å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡æ˜ å°„æ”¾å…¥å¯¹åº”ä½ç½®ã€‚è€Œå¤§äº9çš„æ•°æ®åˆ™éœ€è¦è¿›è¡Œå–æ¨¡æ“ä½œï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¸‹æ ‡ã€‚æ¯”å¦‚12%10=2ï¼Œåˆ™æ”¾å…¥ä¸‹æ ‡ä¸º2çš„ä½ç½®\n\né‚£ï¼Œå¦‚æœä¸€ä¸ªä¸‹æ ‡ä½ç½®æœ¬æ¥å°±æœ‰æ•°æ®äº†æ€ä¹ˆåŠ?æˆ‘ä»¬æœ‰ä¸¤ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n1.2 é—­æ•£åˆ—ï¼ˆå¼€æ”¾å®šå€æ³•ï¼‰å½“ä¸€ä¸ªä¸‹æ ‡çš„ä½ç½®å·²ç»æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå“ˆå¸Œè¡¨è¿˜æ²¡æœ‰æ»¡ï¼Œæˆ‘ä»¬å¯ä»¥å¾€è¿™ä¸ªæ˜ å°„ä½ç½®çš„åæ–¹æ’å…¥è¿™ä¸ªæ•°æ®\n\nçº¿æ€§æ¢æµ‹ï¼šä¾æ¬¡å»æ‰¾ç©ºä½ç½®ï¼Œæ‰¾åˆ°åç›´æ¥æ’å…¥\näºŒæ¬¡æ¢æµ‹ï¼šè·³è·ƒåœ°æ‰¾ç©ºä½ç½®ï¼Œä¸ä¼šå‡ºç°å¤ªå¤šçš„æ‹¥å µ\n\nä½ å¯èƒ½ä¼šé—®ï¼Œä¸å¯¹å•Šã€‚ä½ æŠŠåˆ«äººçš„ä½ç½®å äº†ï¼Œåˆ°æ—¶å€™è¢«äººè¦ç”¨è¿™ä¸ªä½ç½®ï¼Œè¯¥æ€ä¹ˆå»æ“ä½œå•Šï¼Ÿ\næ²¡é”™ï¼Œè¿™ä¸ªå°±æ˜¯é—­æ•£åˆ—çš„ä¸€å¤§ç¼ºç‚¹ï¼šä¼šå ç”¨åŸæœ¬å±äºå…¶ä»–äººçš„ç©ºé—´ã€‚\n1.3 å¼€æ•£åˆ—ï¼ˆæ‹‰é“¾æ³•ï¼‰è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ‹‰é“¾æ³•ã€‚äºå…¶åœ¨æ¯ä¸€ä¸ªä¸‹æ ‡æ˜ å°„çš„ä½ç½®æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬ä¸å¦‚æ•´ä¸€ä¸ªé“¾è¡¨ã€‚åœ¨åŸæœ‰çš„å“ˆå¸Œè¡¨ä¸­å­˜æ”¾é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚å½“æœ‰ç›¸åŒæ˜ å°„å€¼çš„æ•°æ®æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œé“¾è¡¨çš„å¤´æ’ï¼Œä½¿å…¶æŒ‚è½½åˆ°ç›¸åŒä½ç½®çš„é“¾è¡¨ä¸Šã€‚\n\nè¿™ä¸ªé“¾è¡¨ä¹Ÿè¢«ç§°ä¸ºæ¡¶\n\nè€Œæ²¡æœ‰æ•°æ®çš„æ˜ å°„ä½ç½®ï¼Œå…¨éƒ½ä¸ºnullptrç©ºæŒ‡é’ˆ\n\nåœ¨è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å•é“¾è¡¨å³å¯ä»¥å®Œæˆæ¡¶çš„æ“ä½œã€‚è‹¥ä½¿ç”¨listæˆ–è€…è‡ªå·±å†™çš„åŒé“¾è¡¨ï¼Œåˆ™ä¼šå‡ºç°ä¸å¿…è¦çš„ç©ºé—´æµªè´¹ã€‚\nä½ å¯èƒ½ä¼šé—®ï¼Œé‚£å¦‚æœä¸€ä¸ªæ˜ å°„å€¼æŒ‚è½½äº†ç‰¹åˆ«å¤šçš„èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾çš„æ•ˆç‡ä¼šä¸ä¼šä»O(1)å˜æˆO(N)ï¼ˆå³éœ€è¦éå†ä¸€ä¸ªé“¾è¡¨ï¼‰çš„æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ\nè¿™å°±å¿…é¡»è¦æåˆ°å“ˆå¸Œè¡¨çš„æ‰©å®¹é—®é¢˜äº†\n1.4 ä»€ä¹ˆæ—¶å€™éœ€è¦æ‰©å®¹ï¼Ÿåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªè´Ÿè½½å› å­ï¼Œç”¨äºæ ‡è®°å“ˆå¸Œè¡¨çš„æ•°æ®ä¸ªæ•°\nè´Ÿè½½å› å­=å·²æœ‰å…ƒç´ ä¸ªæ•°/æ€»é•¿åº¦\n\nå½“è´Ÿè½½å› å­å¤§äºä¸€å®šæ•°é‡çº§çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å“ˆå¸Œè¡¨å¿«è¦æ»¡çš„æ—¶å€™ï¼Œæ’å…¥æ•°æ®é‡åˆ°å†²çªçš„å¯èƒ½æ€§å°±éå¸¸å¤§ã€‚å³ä¾¿æˆ‘ä»¬ç”¨æ‹‰é“¾æ³•æŒ‚è½½äº†æ¡¶ï¼Œå¦‚æœå†²çªå¾ˆå¤šçš„è¯ï¼Œå°±å®¹æ˜“å‡ºç°ä¸Šé¢è¯´çš„æ•ˆç‡ä½ä¸‹é—®é¢˜ã€‚\nè€Œå¦‚æœæˆ‘ä»¬çš„è´Ÿè½½å› å­ä¸å¤§çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ–°æ’å…¥çš„èŠ‚ç‚¹éƒ½èƒ½æ‰¾åˆ°å®ƒè‡ªå·±ç‹¬ç«‹çš„æ²¡æœ‰å†²çªçš„æ˜ å°„ä½ç½®ï¼Œè¿™æ ·å°±å¤§å¤§å¢åŠ äº†è®¿é—®æ•ˆç‡\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå“ˆå¸Œè¡¨çš„æ˜ å°„å…³ç³»å’Œè¡¨çš„é•¿åº¦ç›¸å…³\næ‰€ä»¥å½“æˆ‘ä»¬æ‰©å®¹ä¹‹åï¼Œéœ€è¦æŠŠå½“å‰è¡¨å†…çš„æ‰€æœ‰å…ƒç´ æ‹¿å‡ºæ¥ï¼Œæ ¹æ®é”®å€¼é‡æ–°è¿›è¡Œä¸‹æ ‡æ˜ å°„ï¼Œæ’å…¥è¿›æ–°è¡¨ã€‚\n\nå¯¹äºå¼€æ”¾å®šå€æ³•ï¼Œè´Ÿè½½å› å­åº”è¯¥é™åˆ¶åœ¨0.8ä»¥ä¸‹ã€‚javaçš„ç³»ç»Ÿåº“ä¸­å°±ä»¥0.75ä½œä¸ºäº†è´Ÿè½½å› å­çš„é™åˆ¶å€¼ï¼Œè¶…è¿‡æ­¤å€¼å°†è¿›è¡Œæ‰©å®¹æ“ä½œ\n\n1.5 æ€ä¹ˆæ˜ å°„ï¼Ÿå…³äºæ˜ å°„çš„å³ä¾¿ç†å¿µã€å†²çªã€æ‰©å®¹é—®é¢˜æˆ‘ä»¬éƒ½å·²ç»æåˆ°äº†ã€‚ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ€ä¹ˆæ˜ å°„ï¼Ÿ\nå¦‚æœæˆ‘ä»¬æ’å…¥çš„æ•°æ®æ˜¯intæˆ–è€…charã€doubleè¿™ç§å¯ä»¥å¼ºè½¬ä¸ºintçš„ç±»å‹ä½œä¸ºkeyï¼Œé‚£è¿˜ç®—å¥½æ“ä½œï¼Œç›´æ¥ç”¨intè¿›è¡Œä¸‹æ ‡æ˜ å°„å³å¯ã€‚\n\né‚£å‡å¦‚æˆ‘ä»¬ç”¨string/è‡ªå®šä¹‰ç±»å‹æ¥ä½œä¸ºkeyå‘¢ï¼Ÿ\n\nè¿™ç§ç±»å‹ä¸èƒ½ç›´æ¥å¼ºåˆ¶è½¬ä¸ºintï¼Œè™½ç„¶stringæˆ‘ä»¬å¯ä»¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ASCIIç ä½œä¸ºæ˜ å°„å€¼ã€‚ä½†æ˜¯é‚£ä¹ˆåšçš„å†²çªä¼šéå¸¸å¤šï¼ŒABC/ADFC/ASDè¿™äº›å­—ç¬¦ä¸²éƒ½æ˜¯ä»¥Aå¼€å¤´ï¼Œéš¾é“æˆ‘ä»¬å°±è¦æŠŠå®ƒæ”¾åœ¨ç›¸åŒä½ç½®ä¸‹é¢å—ï¼Ÿé‚£æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ï¼\n\nå¯ä¸å¯ä»¥æŠŠå­—ç¬¦ä¸²æ¯ä¸€ä¸ªå­—ç¬¦çš„ASCIIåŠ èµ·æ¥å‘¢ï¼Ÿ\n\nè¿™æ ·èƒ½è§£å†³ä¸€å®šç¨‹åº¦ä¸Šçš„å†²çªï¼Œä½†æ˜¯ABC/ACBè¿™ç§å­—ç¬¦ä¸²æ’åˆ—ä¸åŒï¼Œä½†æ˜¯å­—ç¬¦æ˜¯ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå°±ä¼šå¾—å‡ºç›¸åŒçš„ç»“æœé€ æˆå†²çªã€‚\n\nè¿™æ—¶å€™å°±æœ‰ä¸€ä¸ªä¸çŸ¥åçš„ç¨‹åºçŒ¿[Dennis M. Ritchie](https://baike.baidu.com/item/Dennis M. Ritchie&#x2F;1971171?fromModule&#x3D;lemma_inlink)æƒ³å‡ºæ¥äº†ä¸€ä¸ªè¶…çº§ç‰›é€¼çš„åŠæ³•ï¼šæŠŠæ¯ä¸€ä¸ªcharçš„ASCIIéƒ½ä¹˜ä¸Šä¸€ä¸ªæ•°ï¼Œå†è¿›è¡Œç›¸åŠ \nsize_t operator()(const string&amp; key)&#123;    size_t hash = 1;    for (auto s : key)    &#123;//æ¯ä¸€æ¬¡éƒ½*13ï¼Œé¿å…å†²çª        hash = hash * 13 + s;    &#125;    return hash;&#125;\n\nå› ä¸ºå­—ç¬¦ä¸²çš„æ’åˆ—é¡ºåºä¸ç›¸åŒï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡è·å¾—çš„hashå€¼è‚¯å®šæ˜¯ä¸åŒçš„ï¼Œå†ä¹˜ä¸Šä¸€ä¸ªæ•°ä¹‹åï¼Œå°±å®Œç¾çš„é¿å…äº†å¤§éƒ¨åˆ†çš„å†²çªé—®é¢˜ã€‚\nè¿™ä¸ªæ–¹æ³•å¯ä»¥æ²¿ç”¨åˆ°æ‰€æœ‰è‡ªå®šä¹‰ç±»å‹ï¼æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å†™çš„æ—¥æœŸç±»ï¼Œå°±å¯ä»¥æŠŠå¹´åŠ å…¥hashä¹‹åï¼Œä¹˜ä¸€ä¸ªæ•°å†åŠ æœˆï¼Œå†ä¹˜ä¸€ä¸ªæ•°å†åŠ å¤©\nè¿™ä¹ˆç‰›é€¼çš„æ–¹æ³•ï¼Œæ€ä¹ˆå¯èƒ½æ˜¯ä¸çŸ¥åç¨‹åºå‘˜æƒ³å‡ºæ¥çš„ï¼Ÿå’³å’³ï¼Œå®é™…ä¸Šï¼ŒDennis M. Ritchieè¿˜æœ‰å¦å¤–ä¸€ä¸ªåå­—â€œCè¯­è¨€ä¹‹çˆ¶â€\n\nè†œæ‹œå¤§ä½¬ï¼Œå¤§ä½¬ç‰›é€¼ï¼ğŸ˜\n\nåœ¨æœ¬ç¯‡åšå®¢ä¸­å°±ä¸å»è®²è§£STLåº“ä¸­unordered_map/setçš„ä½¿ç”¨åŠæ³•äº†ï¼Œå› ä¸ºå®ƒä»¬çš„ä½¿ç”¨å’ŒåŸºç¡€çš„map/setç›¸å·®æ— å‡ ã€‚æˆ‘ä»¬ç›´æ¥å¼€å§‹æ¨¡æ‹Ÿå®ç°\n2.å“ˆå¸Œè¡¨1-å¼€æ”¾å®šå€æ³•2.1 æ’å…¥æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åšçš„ä¾¿æ˜¯éµå¾ªå“ˆå¸Œè¡¨çš„æ˜ å°„æ–¹æ³•ï¼Œå¯¹keyè¿›è¡Œæ˜ å°„ï¼Œå†å°†pairæ’å…¥è¿›å°è£…å¥½çš„vectorä¸­\næ’å…¥çš„æ€è·¯å¦‚ä¸‹ï¼š\n\né¦–å…ˆåˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜¯å¦æœ‰ç›¸åŒé”®å€¼keyçš„æ•°æ®ï¼ˆæ­¤æ—¶æˆ‘ä»¬å†™çš„æ˜¯ä¸æ”¯æŒé”®å€¼å†—ä½™çš„å“ˆå¸Œè¡¨ï¼Œå¦‚æœå‡ºç°ç›¸åŒé”®å€¼çš„æ•°æ®ï¼Œåˆ™ä¸å†è¿›è¡ŒäºŒæ¬¡æ’å…¥return falseï¼ˆè¿™é‡Œå¤ç”¨äº†æŸ¥æ‰¾å‡½æ•°ï¼‰\nè‹¥æ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œåˆ™åˆ¤æ–­è´Ÿè½½å› å­çš„å æ¯”ã€‚è¿™é‡Œæˆ‘è®¾ç½®çš„è´Ÿè½½å› å­æ˜¯0.7ï¼Œè¶…è¿‡è¿™ä¸ªæ¯”ä¾‹çš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œã€‚æ³¨æ„ï¼šæ‰©å®¹ä¹‹åæ˜ å°„çš„ä½ç½®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å·²æœ‰çš„æ•°æ®è¿›è¡Œé‡æ–°æ’å…¥ã€‚\næ‰©å®¹ï¼ˆæˆ–ä¸éœ€è¦æ‰©å®¹ï¼‰ç»“æŸåï¼Œæˆ‘ä»¬åˆ©ç”¨é¢„å…ˆå†™å¥½çš„ä»¿å‡½æ•°è·å–é“keyçš„hashå€¼ï¼Œæ‰¾åˆ°å¯¹åº”ä¸‹æ ‡ä½ç½®ã€‚è¿™é‡Œé‡‡ç”¨çº¿æ€§æ¢æµ‹çš„æ–¹æ³•ï¼Œå¦‚æœå½“å‰çš„ä¸‹æ ‡ä½ç½®å·²ç»æœ‰æ•°æ®äº†ï¼Œåˆ™å¾€åæŸ¥æ‰¾çŠ¶æ€å€¼ä¸ºEMPTY/DELETEçš„ä½ç½®ï¼Œå¹¶å°†æˆ‘ä»¬çš„æ•°æ®æ’å…¥åˆ°è¿™ä¸ªä½ç½®ä¸Šã€‚\næ’å…¥æˆåŠŸåï¼Œå°†çŠ¶æ€ä¿®æ”¹ä¸ºEXITSï¼Œreturn trueæ’å…¥ç»“æŸ\n\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;    if (Find(kv.first))//æ‰¾åˆ°äº†ç›¸åŒçš„é”®å€¼ï¼Œç›´æ¥é€€å‡ºï¼ˆè¯´æ˜å·²ç»æ’å…¥è¿‡äº†ï¼‰    &#123;        return false;    &#125;    // è´Ÿè½½å› å­åˆ°0.7åŠä»¥ä¸Šï¼Œå°±æ‰©å®¹ï¼ˆé¿å…å†²çªï¼‰    if (_tables.size() == 0 || _n * 10 / _tables.size() &gt;= 7)    &#123;        size_t newSize = _tables.size() == 0 ? 10 : _tables.size() * 2;        // æ‰©å®¹ä»¥åï¼Œéœ€è¦é‡æ–°æ˜ å°„        HashTable&lt;K, V, HashFunc&gt; newHT;        newHT._tables.resize(newSize);// æ‰©å®¹vector        // éå†æ—§è¡¨ï¼Œæ’å…¥newHT        for (auto&amp; e : _tables)        &#123;            if (e._state == EXITS)            &#123;                newHT.Insert(e._kv);            &#125;        &#125;        newHT._tables.swap(_tables);        //åˆ©ç”¨vectorçš„äº¤æ¢ï¼Œè¿™æ˜¯ä¸€ç§ç°ä»£å†™æ³•çš„æ·±æ‹·è´    &#125;    HashFunc hf;// ä»¿å‡½æ•°çš„å®ä¾‹åŒ–    size_t starti = hf(kv.first);    starti %= _tables.size();    size_t hashi = starti;    size_t i = 1;    // çº¿æ€§æ¢æµ‹/äºŒæ¬¡æ¢æµ‹    // çº¿æ€§æ¢æµ‹ä»£è¡¨æ˜¯è‡ªæ˜ å°„å€¼å¼€å§‹å¾€åä¾æ¬¡æ‰¾ä¸ºç©ºçš„ä½ç½®    // äºŒæ¬¡æ¢æµ‹æŒ‡è·³ç€æ‰¾ä¸ºç©ºçš„ä½ç½®    while (_tables[hashi]._state == EXITS)    &#123;        hashi = starti + i;        ++i;//ä¾æ¬¡æŸ¥æ‰¾ï¼Œä¸ºçº¿æ€§æ¢æµ‹        hashi %= _tables.size();    &#125;    _tables[hashi]._kv = kv;//æ’å…¥æ•°æ®    _tables[hashi]._state = EXITS;//ä¿®æ”¹çŠ¶æ€ç     _n++;//é•¿åº¦+1    return true;&#125;\n\n2.2 æŸ¥æ‰¾å’Œä¹‹å‰æ¨¡æ‹Ÿå®ç°çš„mapä¸€æ ·ï¼ŒæŸ¥æ‰¾å‡½æ•°æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªdataï¼Œä»¥ä¾¿ç”¨æˆ·ä¿®æ”¹value\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¼€æ”¾å®šå€æ³•ï¼Œæ²¡æœ‰è®¾ç½®æ¡¶ã€‚æ‰€ä»¥æŸ¥æ‰¾çš„æ“ä½œå’Œé¡ºåºè¡¨çš„æŸ¥æ‰¾æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚\n\nå½“æ˜ å°„å€¼çš„ä½ç½®å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„keyï¼Œç›´æ¥è¿”å›å½“å‰çš„ä½ç½®\nå½“å½“å‰æ˜ å°„å€¼çš„æ•°æ®ä¸æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„keyï¼Œè¯´æ˜è¿™ä¸ªåœ°æ–¹å‡ºç°äº†å†²çªã€‚è¿™æ—¶å€™æˆ‘ä»¬ç°éœ€è¦å¾€åæŸ¥æ‰¾ï¼ˆçº¿æ€§æ¢æµ‹ï¼Œä¾æ¬¡æŸ¥æ‰¾ï¼‰æŸ¥æ‰¾çš„æ—¶å€™éœ€è¦åˆ¤æ–­çŠ¶æ€ç \nå¦‚æœçŠ¶æ€ç ä¸ºEMPTYï¼Œåˆ™ä»£è¡¨åé¢æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¿”å›nullpträ»£æŒ‡æ‰¾ä¸åˆ°\nå¦‚æœçŠ¶æ€ç ä¸ºEXITSæˆ–è€…DELETEï¼Œè¯´æ˜åé¢è¿˜æœ‰å¯èƒ½æ‰¾åˆ°è¿™ä¸ªæ•°æ®æ‰¾åˆ°æ•°æ®åè¿”å›è¯¥æ•°æ®çš„å¼•ç”¨\n\n\nå¦‚æœéå†å®Œæ•´ä¸ªåˆ—è¡¨ï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°è¯¥æ•°æ®ï¼ŒåŒæ ·è¿”å›nullptr\n\nè¿™é‡Œå•ç‹¬è¯´æ˜DELETEï¼šåœ¨insertå’Œfindæ“ä½œä¹‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æ‰§è¡Œäº†åˆ é™¤ï¼Œè¿™æ—¶å€™å°±æœ‰å¯èƒ½å¯¼è‡´åŸæœ¬çš„æ˜ å°„å€¼ä½ç½®å’Œçº¿æ€§æ¢æµ‹åçš„ä½ç½®ä¹‹ä¸­å‡ºç°äº†çŠ¶æ€ç ä¸ºDELETEçš„ä½ç½®ã€‚é‡åˆ°DELETEå¹¶ä¸ä»£è¡¨åé¢æ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æŸ¥æ‰¾ã€‚è¿™ç‚¹å’Œinsertçš„åˆ¤æ–­ä¸åŒã€‚\n\nä»£ç å®ç°å¦‚ä¸‹\n//æŸ¥æ‰¾Data* Find(const K&amp; key)&#123;    //ç©ºè¡¨    if (_tables.size() == 0)    &#123;        return nullptr;    &#125;    HashFunc hf;//ä»¿å‡½æ•°çš„å®ä¾‹    size_t starti = hf(key);//åˆ©ç”¨hashä»¿å‡½æ•°ç®—å‡ºèµ·å§‹å€¼    starti %= _tables.size();//è¿›è¡Œè†œå¤§å°ï¼Œè·å–é“æ˜ å°„å€¼    size_t hashi = starti;    size_t i = 1;    while (_tables[hashi]._state != EMPTY)    &#123;        if (_tables[hashi]._state != DELETE &amp;&amp; _tables[hashi]._kv.first == key)        &#123;            return &amp;_tables[hashi];        &#125;        hashi = starti + i;        ++i;//çº¿æ€§æ¢æµ‹        hashi %= _tables.size();    &#125;    return nullptr;&#125;\n\n2.3 åˆ é™¤åˆ é™¤æ“ä½œæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åˆ©ç”¨findæ‰¾åˆ°é”®å€¼åï¼Œç›´æ¥æŠŠè¿™ä¸ªä½ç½®çš„çŠ¶æ€ç æ”¹æˆDELETEå³å¯ï¼Œå¹¶ä¸éœ€è¦æ‰§è¡Œé‡Šæ”¾ç©ºé—´çš„æ“ä½œã€‚\nå¦‚æœæ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œåˆ™è¿”å›false\n//åˆ é™¤ï¼Œæ‰¾åˆ°æ˜ å°„ä½ç½®ä¹‹åï¼Œç›´æ¥ä¿®æ”¹çŠ¶æ€ç ï¼Œè€Œä¸æ˜¯çœŸçš„åˆ é™¤è¿™ä¸ªå†…å®¹bool Erase(const K&amp; key)&#123;    Data* ret = Find(key);    if (ret)    &#123;        ret-&gt;_state = DELETE;        _n--;        return true;    &#125;    else    &#123;        return false;    &#125;&#125;\n\n\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","å“ˆå¸Œ"]},{"title":"ã€C++ã€‘å‡è§†C++çš„ç¬¬ä¸€çœ¼","url":"/2022/04/29/note_cpp/1%E5%88%9D%E8%AF%86Cpp/","content":"ä»ä»Šå¤©å¼€å§‹ï¼Œæ­£å¼æ­¥å…¥C++å­¦ä¹ çš„å¤§é—¨å•¦ï¼\n\n\nC++çš„åšå®¢ä¸»è¦æ˜¯æˆ‘ä¸ªäººå­¦ä¹ çš„å­¦ä¹ ç¬”è®°ï¼Œåˆšå¼€å§‹ä¼šè®°ä¸€äº›æ¯”è¾ƒé›¶ç¢çš„å°çŸ¥è¯†ç‚¹ï¼Œå¯èƒ½æ²¡æœ‰ä¹‹å‰Cè¯­è¨€çš„åšå®¢é‚£ä¹ˆç³»ç»ŸåŒ–ğŸ˜‚\nç¬”è®°ä¸­å¯èƒ½æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n[TOC]\n1.C++ç®€ä»‹\nä½ å¯ä»¥é€šè¿‡èœé¸Ÿæ•™ç¨‹ç½‘æ¥å­¦ä¹ C++ğŸ‘‰ä¼ é€é—¨\n\nC++ æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ã€ç¼–è¯‘å¼çš„ã€é€šç”¨çš„ã€å¤§å°å†™æ•æ„Ÿçš„ã€ä¸è§„åˆ™çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒè¿‡ç¨‹åŒ–ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹ã€‚\nC++ è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸­çº§è¯­è¨€ï¼Œå®ƒç»¼åˆäº†é«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€çš„ç‰¹ç‚¹ã€‚\nC++ æ˜¯ç”± Bjarne Stroustrup äº 1979 å¹´åœ¨æ–°æ³½è¥¿å·ç¾åˆ©å±±è´å°”å®éªŒå®¤å¼€å§‹è®¾è®¡å¼€å‘çš„ã€‚C++ è¿›ä¸€æ­¥æ‰©å……å’Œå®Œå–„äº† C è¯­è¨€ï¼Œæœ€åˆå‘½åä¸ºå¸¦ç±»çš„Cï¼Œåæ¥åœ¨ 1983 å¹´æ›´åä¸º C++ã€‚\nC++ æ˜¯ C çš„ä¸€ä¸ªè¶…é›†ï¼Œäº‹å®ä¸Šï¼Œä»»ä½•åˆæ³•çš„ C ç¨‹åºéƒ½æ˜¯åˆæ³•çš„ C++ ç¨‹åºã€‚\n\n2.C++å…³é”®å­—Cè¯­è¨€æœ‰32ä¸ªå…³é”®å­—ï¼ŒC++åœ¨å®ƒä»¬çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å®¹ï¼Œå…±æœ‰63ä¸ªå…³é”®å­—\n\n\n\nasm\nelse\nnew\nthis\nauto\nenum\n\n\n\noperator\nthrow\nbool\nexplicit\nprivate\ntrue\n\n\nbreak\nexport\nprotected\ntry\ncase\nextern\n\n\npublic\ntypedef\ncatch\nfalse\nregister\ntypeid\n\n\nchar\nfloat\nreinterpret_cast\ntypename\nclass\nfor\n\n\nreturn\nunion\nconst\nfriend\nshort\nunsigned\n\n\nconst_cast\ngoto\nsigned\nusing\ncontinue\nif\n\n\ndefault\ninline\nsizeof\nvirtual\nstatic\nvoid\n\n\ndo\nlong\nstruct\nwchar_t\ndelete\nint\n\n\nstatic_cast\nvolatile\ndouble\nmutable\nswitch\nwhile\n\n\ndynamic_cast\nnamespace\ntemplate\n\n\n\n\n\n\nå¦‚æœä½ æƒ³æŸ¥çœ‹å®ƒä»¬çš„å®Œæ•´ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ğŸ‘‰ä¼ é€é—¨\n\nè¿™é‡Œåªåšä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ï¼Œåç»­ä¼šä¸€ä¸€å­¦ä¹ è¿™äº›å…³é”®å­—\n\n3.å®‰è£…ä½ çš„C++ç¯å¢ƒ\nå¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨å¾®è½¯çš„VisualStudioï¼Œä¸è¦ç”¨devè¿™ç§è€å¼ç¼–è¯‘å™¨ï¼\nå¦‚æœæ˜¯macç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨Xcodeï¼ˆæˆ‘æ²¡æœ‰macä¸çŸ¥é“å…·ä½“æƒ…å†µï¼‰\nå¦‚æœæ˜¯linuxç³»ç»Ÿï¼Œéœ€è¦å®‰è£…G++ç¼–è¯‘å™¨\n\nåˆ©ç”¨æˆ‘çš„æ ‘è“æ´¾ï¼Œç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹linuxç¯å¢ƒå®‰è£…G++ç¼–è¯‘å™¨\nä¸‹é¢è¿™ä¸ªè¯­å¥æ˜¯æ˜¾ç¤ºg++ç¼–è¯‘å™¨çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ å¼¹å‡ºäº†å’Œæˆ‘ä¸€æ ·çš„é¡µé¢ï¼Œè¯´æ˜ä½ çš„linuxç³»ç»Ÿé‡Œé¢å·²ç»æœ‰è¿™ä¸ªç¼–è¯‘å™¨äº†\ng++ -v\n\n\nå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªè¯­å¥æ¥æ•´ä¸€ä¸ªg++\nsudo apt-get install g++\n\nä½ ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªè¯­å¥æ¥éªŒè¯ä½ çš„G++æ˜¯å¦å·²ç»å®‰è£…\n\nä¸‹è½½å®Œæˆåï¼Œå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨ä½ çš„G++ç¼–è¯‘å™¨äº†\n\nå¦‚æœä½ çš„ä¸‹è½½å¾ˆæ…¢ï¼Œå¯èƒ½è¦è€ƒè™‘æ¢æºï¼ˆå³æ›´æ¢ä¸€ä¸ªè½¯ä»¶ä¸‹è½½æºï¼‰\næ ‘è“æ´¾å®éªŒå®¤è¯¦ç»†è®°å½•äº†å›½å†…æ¯”è¾ƒå¥½ç”¨çš„æºï¼Œä¹Ÿæœ‰æ¢æºæ•™ç¨‹ğŸ‘‰ä¼ é€é—¨\n\n\n4.C++çš„è¾“å…¥è¾“å‡º4.1coutå’Œcinæ ·ä¾‹è€è§„çŸ©ï¼Œå‘è¿™ä¸ªä¸–ç•Œé—®ä¸ªå¥½å§ï¼\n#include &lt;iostream&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;Hello, world!&quot; &lt;&lt; endl;    return 0;&#125;\n\n\nè¿™é‡Œå‡ºç°çš„endlæ˜¯â€œend of lineâ€çš„ç¼©å†™ï¼Œç»“æŸä¸€è¡Œï¼Œç›¸å½“äºCè¯­è¨€ä¸­çš„\\n\nå› ä¸ºC++çš„ç¼–è¯‘å™¨æ˜¯å®Œæˆå…¼å®¹Cè¯­è¨€çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨&quot;\\n&quot;æ¥æ›¿æ¢endl\n\n\ncoutæ˜¯æµæå–æ“ä½œç¬¦ï¼Œå¯¹åº”çš„ï¼Œä¹Ÿæœ‰æµæ’å…¥æ“ä½œç¬¦cinã€‚ä½ å¯ä»¥ç†è§£ä¸ºå®ƒä»¬å°±æ˜¯C++ä¸­çš„printfå’Œscanf\næ³¨æ„è¿™é‡Œçš„ç®­å¤´æ–¹å‘ï¼Œä¸è¦å¼„é”™äº†\n#include &lt;iostream&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;Hello, world!&quot; &lt;&lt; endl;    int a;    cin &gt;&gt; a;    cout &lt;&lt; a &lt;&lt; endl;    return 0;&#125;\n\n\n4.2å¤´æ–‡ä»¶ä½¿ç”¨è¿™ä¸¤ä¸ªâ€œåº“å‡½æ•°â€æ—¶ï¼Œå¿…é¡»è¦è¦åŒ…å«iostreamå¤´æ–‡ä»¶ä»¥åŠstdæ ‡å‡†å‘½åç©ºé—´\nåœ¨cplusplus.comä¸Šæœç´¢ï¼Œå¯ä»¥çœ‹åˆ°iostreamæ˜¯æ ‡å‡†è¾“å…¥è¾“å‡ºæµçš„åº“\n\n4.3å’ŒCè¯­è¨€çš„ä¸åŒä½¿ç”¨C++æ¥è¾“å…¥è¾“å‡ºæ›´åŠ æ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å¢åŠ æ ¼å¼æ§åˆ¶ç¬¦ï¼ˆ%d %c %fè¿™ç§ï¼‰\nå› ä¸ºç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ¤æ–­å®ƒä»¬çš„ç±»å‹\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿ç»­çš„&gt;&gt;æ¥è¾“å…¥å¤šä¸ªæ•°æ®\n\n4.4æµ®ç‚¹æ•°é»˜è®¤ä¿ç•™5ä½å°æ•°é€šè¿‡ä¸¤ä¸ªç¨‹åºçš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°C++ä¸­é»˜è®¤ä¿ç•™å°æ•°æ˜¯5ä½ï¼Œè€ŒCè¯­è¨€ä¸­æ˜¯6ä½\n\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æƒ³æ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œè®©å®ƒè¾“å‡ºå°æ•°ç‚¹åä¸¤ä½å¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿ\nå¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨printfå’Œ%.2fä¸å°±å®Œäº‹äº†ï¼Ÿ\n\nC++ä¸­ä¹Ÿæœ‰è‡ªå·±çš„æ ¼å¼æ§åˆ¶æ–¹å¼ï¼Œä½†æ˜¯é‚£ä¸ªæ¯”printfæ›´å¤æ‚\n\n\nè€Œä¸”åœ¨C++ä¸­æ‰“å°ä½äº5ä½çš„æµ®ç‚¹æ•°ï¼Œå¹¶ä¸ä¼šåƒCè¯­è¨€ä¸€æ ·åè¡¥0\n\næ³¨æ„æ³¨æ„ï¼å¦‚æœåœ¨C++ç¨‹åºä¸­ä½¿ç”¨printfï¼Œå°±ä¸èƒ½åœ¨printfé‡Œé¢å†™endlå•¦ï¼\n\n5.å‘½åç©ºé—´åœ¨è¾“å…¥è¾“å‡ºå‡½æ•°ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªè¯­å¥\nusing namespace std;\n\nå‰é¢å·²ç»æåˆ°è¿‡ï¼Œstdæ˜¯â€æ ‡å‡†å‘½åç©ºé—´â€\né‚£ä»€ä¹ˆæ˜¯å‘½åç©ºé—´å‘¢ï¼Ÿ\n\n5.1ç®€å•ä»‹ç»åœ¨mainå‡½æ•°ä¸­ï¼Œå¦‚æœå‡ºç°äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\n\nå‡è®¾ä¸€ä¸ªç­çº§ä¸Šæœ‰ä¸¤ä¸ªåŒåçš„åŒå­¦ï¼Œä¸ºäº†åŒºåˆ†ä»–ä»¬ä¿©äººï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€äº›é™„åŠ çš„æ¡ä»¶æ¥ç§°å‘¼äºŒè€…ã€‚æ¯”å¦‚æ€§åˆ«ã€å®¶åº­ä½å€ã€ç”šè‡³æ˜¯æˆç»©\n\nC++ä¸­çš„å‘½åç©ºé—´å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªäº‹çš„\nåœ¨é¡¹ç›®åˆä½œçš„æ—¶å€™ï¼Œå‘½åç©ºé—´å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…ä¸¤ä¸ªäººå†™çš„ç¨‹åºä¸­å‡ºç°åŒæ ·åå­—çš„å˜é‡è€Œå¯¼è‡´å†²çªçš„æƒ…å†µ\n5.2è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ï¼ŒæŠŠint aæ”¾å…¥å…¶ä¸­\nnamespace muxue &#123;\tint a = 1;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘ç¨‹åºå°±ä¸ä¼šæŠ¥é”™äº†\n\nä½†æ˜¯ç¨‹åºæ‰“å°çš„æ˜¯mainå‡½æ•°ä¸­çš„doubleç±»å‹aï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç”¨muxueä¸­çš„int aè¦æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ\nåªéœ€è¦åœ¨å˜é‡åä¹‹å‰ç”¨::æ¥æŒ‡å®šå‘½åç©ºé—´å°±å¯ä»¥äº†\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨using namespace muxue;æ¥ç›´æ¥å±•å¼€è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ä¸œè¥¿\n\nä½†æ˜¯è¿™æ ·ä¸å¤ªå¥½ï¼åé¢ä¼šæåˆ°\n\nå¦‚æœä½ å®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‘½åç©ºé—´ï¼Œåœ¨ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåˆå¹¶ä»–ä»¬\n\n5.2.1åµŒå¥—å®šä¹‰å‘½åç©ºé—´å®šä¹‰å‘½åç©ºé—´å°±å’ŒCè¯­è¨€çš„ç»“æ„ä½“å¾ˆç±»ä¼¼ï¼Œæ˜¯å¯ä»¥åµŒå¥—å®šä¹‰å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´çš„\n//å‘½åç©ºé—´namespace muxue &#123;\tint a = 1;\t//åµŒå¥—å®šä¹‰å‘½åç©ºé—´\tnamespace happy &#123;\t\tint b = 2;\t&#125;&#125;int main() &#123;\tdouble a = 3.14;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; muxue::a &lt;&lt;endl;\tcout &lt;&lt; muxue::happy::b &lt;&lt; endl;\treturn 0;&#125;\n\n\nç›´æ¥å±•å¼€ä¸¤ä¸ªå‘½åç©ºé—´åï¼Œå°±ä¸éœ€è¦è¿™æ ·å†™è¾“å‡ºå‡½æ•°äº†\n\n\næˆ‘ä»¬è¿˜å¯ä»¥åœ¨å·²æœ‰å‘½åç©ºé—´ä¸­åµŒå¥—å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œé‡Œé¢åŒ…å«å¦å¤–ä¸€ä¸ªa\nnamespace muxue &#123;\tint a = 1;\t//åµŒå¥—å®šä¹‰å‘½åç©ºé—´\tnamespace happy &#123;\t\tint a = 2;\t&#125;&#125;\n\nè¿™æ—¶å€™å¦‚æœä½¿ç”¨using namespace muxue;ï¼Œåœ¨mainå‡½æ•°ä¸­ä¼šé»˜è®¤æ‰“å°å¤–å±‚å‘½åç©ºé—´ä¸­çš„a\n\nä½†å¦‚æœä½ æ¯”è¾ƒå–œæ¬¢ä½œæ­»ï¼ŒæŠŠå†…å±‚å‘½åç©ºé—´ä¹Ÿå±•å¼€äº†ï¼Œå°±ä¼šå‡ºç°å†²çª\nusing namespace muxue;using namespace muxue::happy;\n\n\n\né™¤äº†åµŒå¥—å®šä¹‰ä¸­è¿™ç§å†²çªçš„æƒ…å†µï¼Œæˆ‘ä»¬ç›´æ¥å±•å¼€å‘½åç©ºé—´æ—¶ï¼Œè¿˜ä¼šé‡åˆ°å…¶ä»–å†²çª\n5.3å…¨éƒ¨å±•å¼€å¯èƒ½é‡åˆ°çš„é—®é¢˜5.3.1å’Œåº“å‡½æ•°å†²çªæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬åœ¨muxueé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªintç±»å‹å«åšrandï¼Œå¹¶åœ¨ä¹‹åç›´æ¥using namespaceå®Œæ•´å±•å¼€äº†è¿™ä¸ªå‘½åç©ºé—´\n#include &lt;iostream&gt;#include &lt;stdlib.h&gt;using namespace std;namespace muxue &#123;\tint a = 1;\tint rand = 0;&#125;using namespace muxue;int main()&#123;\ta += 1;\tcout &lt;&lt; a &lt;&lt; endl;\trand = 10;\tprintf(&quot;%d\\n&quot;, rand);\treturn 0;&#125;\n\nç„¶åä½ å°±ä¼šå‘ç°ï¼Œç¨‹åºboomäº†ï¼\n\nè¿™æ˜¯å› ä¸ºåœ¨&lt;stdlib.h&gt;å¤´æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªç”Ÿæˆéšæœºæ•°çš„randå‡½æ•°ï¼Œç°åœ¨ç¨‹åºä¸çŸ¥é“ä½ æ˜¯è¦ç”¨å‘½åç©ºé—´ä¸­çš„å˜é‡randï¼Œè¿˜æ˜¯æƒ³è°ƒç”¨è¿™ä¸ªåº“å‡½æ•°äº†ï¼\nmuxue::rand = 10;printf(&quot;%d\\n&quot;, muxue::rand);\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±è¦é€‰æ‹©å•ç‹¬è°ƒç”¨å‘½åç©ºé—´ä¸­çš„randå˜é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å˜é‡å\n\nåŒæ—¶ï¼Œé¡¶éƒ¨çš„using namesapceä¹Ÿéœ€è¦åšç›¸åº”ä¿®æ”¹\n//using namespace muxue;using muxue::a;\n\n5.3.2å’Œå…¶ä»–å‘½åç©ºé—´å†²çªnamespace muxue &#123;\tint a = 1;\tint rand = 0;&#125;namespace haha &#123;\tint a = 3;&#125;using namespace muxue;using namespace haha;\n\nå‡è®¾ä¸¤ä¸ªå‘½åç©ºé—´ä¸­éƒ½æœ‰aå˜é‡ï¼Œè¿™æ—¶å€™ç¨‹åºä¹Ÿä¸çŸ¥é“ä½ è¦è°ƒç”¨å“ªä¸€ä¸ªaäº†ï¼ŒåŒæ ·ä¼šæŠ¥é”™\n\n\nè¿™å°±å¥½æ¯”ç­çº§é‡Œæœ‰ä¿©ä¸ªå«æåçš„äººï¼Œæœ¬æ¥ä¸€ä¸ªæ˜¯ç”·çš„ï¼Œä¸€ä¸ªæ˜¯å¥³çš„ï¼Œå’±ä»¬å¯ä»¥ç”¨æ€§åˆ«åŒºåˆ†\nç›´æ¥å®Œæ•´å±•å¼€äº†å‘½åç©ºé—´ï¼Œå°±å¥½æ¯”è®©è¿™ä¸¤ä¸ªæåéƒ½å˜æˆç”·ç”Ÿ\nè¿™ä¸BBQäº†å—ï¼Ÿè¿˜æ€ä¹ˆç”¨æ€§åˆ«åˆ¤æ–­è°æ˜¯è°ï¼Ÿ\n\næ‰€ä»¥åœ¨å¾ˆå¤šæ—¶å€™ï¼Œå°½é‡ä½¿ç”¨::å•ç‹¬å±•å¼€æŸä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å±•å¼€æ•´ä¸ªå‘½åç©ºé—´\nè¿™ç§å†²çªçš„æƒ…å†µï¼Œè¢«ç§°ä¸ºå‘½åç©ºé—´æ±¡æŸ“\n\n5.4é¿å…å‘½åç©ºé—´æ±¡æŸ“åœ¨èœé¸Ÿæ•™ç¨‹ä¸Šï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¤§ä½¬åšäº†ä¸€ä¸ªè¿™æ ·çš„ç¬”è®°\n\næ˜¯çš„ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è‡ªå®šä¹‰çš„å˜é‡ç±»å‹åä¼šå’Œstdæ ‡å‡†å‘½åç©ºé—´å†²çªï¼Œè¿™æ—¶å€™ç›´æ¥åœ¨æœ€å‰é¢using namespace std;å°±ä¼šå‡º5.3ä¸­æåˆ°çš„é—®é¢˜\nå¯coutå’Œcinè¿™ä¸¤ä¸ªå®¶ä¼™å¤©å¤©è¦ç”¨ï¼Œæ€»ä¸èƒ½æ¯ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½å†™ä¸€ä¸ªstd::å§ï¼Ÿé‚£æ ·ä¹Ÿå¤ªéº»çƒ¦äº†ï¼\nåˆ«æ€¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å•ç‹¬å±•å¼€è¿™å‡ ä¸ªå°å®¶ä¼™ï¼\nusing std::cin;using std::cout;using std::endl;\n\n\nå…¶ä»–ä¸€äº›é—®é¢˜åœ¨ä¹‹å‰5.2å’Œ5.3éƒ½å·²ç»æåˆ°è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†è¯´å•¦ï¼\nä¸ªäººç†è§£ï¼Œå³ä¾¿C++æœ‰å‘½åç©ºé—´è¿™ä¸ªå¥½ä¸œè¥¿ï¼Œåœ¨å®šä¹‰å˜é‡çš„æ—¶å€™æœ€å¥½è¿˜æ˜¯ä¿æŒä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä¸ç”¨å…³é”®å­—å’Œåº“å‡½æ•°åä½œä¸ºå˜é‡å\n5.5 ::æŒ‡å®šå…¨å±€ä½œç”¨åŸŸå½“æˆ‘ä»¬é»˜è®¤ä½¿ç”¨::è€Œä¸åœ¨å‰é¢æ·»åŠ å‘½åç©ºé—´çš„åå­—çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šæŒ‡å®šåˆ°å…¨å±€çš„å‘½åç©ºé—´ã€‚å³ä¾¿å‡½æ•°è¢«å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´æ‰€åŒ…è£¹ï¼Œä¹Ÿæ˜¯ä¼šè°ƒç”¨å…¨å±€ä½œç”¨åŸŸä¸‹çš„å‡½æ•°\n//å…¨å±€voidÂ _print()&#123;Â Â Â Â coutÂ &lt;&lt;Â &quot;globalÂ print&quot;Â &lt;&lt;Â endl;&#125;//å‘½åç©ºé—´namespaceÂ muxue&#123;Â Â Â Â voidÂ _print()Â Â Â Â &#123;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â &quot;namespaceÂ muxueÂ print&quot;Â &lt;&lt;Â endl;Â Â Â Â &#125; Â Â Â Â voidÂ testNamespace()Â Â Â Â &#123;Â Â Â Â Â Â Â Â ::_print();//è°ƒç”¨å…¨å±€ä½œç”¨åŸŸçš„å‡½æ•°Â Â Â Â &#125;&#125;intÂ main()&#123;Â Â Â Â muxue::_print();//è°ƒç”¨å‘½åç©ºé—´å†…çš„printÂ Â Â Â muxue::testNamespace(); Â Â Â Â returnÂ 0;&#125;\n\næ‰“å°çš„ç»“æœå¦‚ä¸‹\n\n\n6.ç¼ºçœå‚æ•°ç¼ºçœå‚æ•°æ˜¯å‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œç»™æŒ‡å®šçš„å‚æ•°ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå®å‚ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚æ¯”å¦‚ï¼š\n//ç¼ºçœå‚æ•°void Add(int a = 10,int b = 20) &#123;\tcout &lt;&lt; a + b &lt;&lt; endl;&#125;int main() &#123;\tint n = 1, m = 2;\tAdd(n, m);//æŒ‡å®šäº†å®å‚\tAdd();//æ²¡æœ‰æŒ‡å®š\treturn 0;&#125;\n\n\né™¤äº†è¿™ä¸¤ç§æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åªç»™è¯¥å‡½æ•°ä¼ ä¸€ä¸ªå®å‚\n\nä½†æ˜¯åƒä¸‹é¢è¿™æ ·ï¼Œæƒ³ç»™å‡½æ•°ä¸­çš„bä¼ ä¸€ä¸ªå‚æ•°æ˜¯ä¸å¯ä»¥çš„\n\n6.1å…¨ç¼ºçœå’ŒåŠç¼ºçœ\nåƒä¸Šé¢è¿™ç§ï¼Œå‡½æ•°ä¸­çš„æ‰€æœ‰å½¢å‚éƒ½è®¾å®šäº†ç¼ºçœå€¼çš„ï¼Œå«åšå…¨ç¼ºçœ\nå‡½æ•°ä¸­åªæœ‰ä¸€éƒ¨åˆ†è®¾ç½®äº†ç¼ºçœå€¼çš„ï¼Œå«åšåŠç¼ºçœ\n\næ³¨æ„ï¼šè®¾ç½®ç¼ºçœå‚æ•°çš„æ—¶å€™ï¼Œå¿…é¡»ä»å³å¾€å·¦è®¾ç½®ï¼Œä¸èƒ½å‡ºç°ä¸­é—´ç©ºä¸€ä¸ªçš„æƒ…å†µ\n\n6.1.1å…¨ç¼ºçœæ¯”å¦‚è¿™ä¹ˆä¸€ä¸ªæœ‰3ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬å…¨éƒ¨è®¾ç½®äº†ç¼ºçœå€¼ï¼Œå°±æ˜¯å…¨ç¼ºçœ\nvoid Print(int a = 10, int b = 20,int c=30) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;\tcout &lt;&lt; c &lt;&lt; endl;&#125;\n\næˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ 3ä¸ªå€¼ï¼Œè¿›è¡Œå¯¹åº”çš„æ‰“å°ï¼Œä¹Ÿå¯ä»¥åªä¼ ä¸¤ä¸ªã€ä¸€ä¸ªæˆ–è€…ä¸ä¼ å½¢å‚\n\nè¿™ç§ä¸­é—´é—´éš”ä¸€ä¸ªä¼ å‚æ˜¯ä¸å…è®¸çš„\n\n\n6.1.2åŠç¼ºçœåŠç¼ºçœæ˜¯ç¼ºçœäº†ä¸€éƒ¨åˆ†çš„å‡½æ•°\nvoid Print2(int a, int b = 20, int c = 30) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;\tcout &lt;&lt; c &lt;&lt; endl;&#125;\n\nåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¸ä¼ å‚æ•°äº†\n\nè‡³å°‘è¦ä¼ ä¸€ä¸ªå‚æ•°ç»™æˆ‘ä»¬çš„a\n\nåŠç¼ºçœçš„å‡½æ•°å¯ä»¥æ˜¯å¦‚ä¸‹å½¢å¼\nvoid Print2(int a, int b = 20, int c = 30);void Print2(int a, int b, int c = 30);\n\nä½†ä¸èƒ½æ˜¯è¿™æ ·\nvoid Print2(int a=10, int b, int c = 30);\n\nå› ä¸ºè¿™ç§æƒ…å†µä¼šå‡ºç°æ­§ä¹‰ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“ä½ çš„å‚æ•°æ˜¯ç»™bè¿˜æ˜¯ç»™a\n\n6.2ç¼ºçœå‚æ•°çš„åº”ç”¨æ¯”å¦‚åœ¨åˆ›å»ºä¸€ä¸ªé¡ºåºè¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç¼ºçœå‚æ•°æ¥è®¾ç½®é»˜è®¤é•¿åº¦\nè¿™æ ·å°±é¿å…äº†å•ä¸€é»˜è®¤é•¿åº¦å¯¼è‡´çš„å¤šæ¬¡æ‰©å®¹ï¼ˆreallocæ‰©å®¹æ˜¯æœ‰æ€§èƒ½æµªè´¹çš„ï¼ï¼‰\n\n\næ¯”å¦‚æˆ‘çŸ¥é“æˆ‘è¿™æ¬¡éœ€è¦ä¸€ä¸ªå¾ˆé•¿çš„é¡ºåºè¡¨ï¼Œç›´æ¥æ”¹é»˜è®¤é•¿åº¦ä¸å¤ªåˆé€‚ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ä¼ ä¸€ä¸ªæ–°çš„é•¿åº¦å€¼æ›´åŠ æ–¹ä¾¿æˆ‘ä»¬çš„åŠ¨æ€ç®¡ç†ï¼\n\nç¼ºçœå‚æ•°æ˜¯åªæœ‰C++æ‰æ”¯æŒçš„å‡½æ•°å®šä¹‰æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯C++æ¯”Cè¯­è¨€æ›´ä¼˜çš„ä½“ç°\n6.3å¤šæ–‡ä»¶ç¼–ç¨‹ä¸­çš„ç¼ºçœä½¿ç”¨å¤šæ–‡ä»¶ç¼–ç¨‹çš„æ—¶å€™ï¼Œç¼ºçœå€¼åªéœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­ç»™å‡ºå³å¯\n\nä¸éœ€è¦åœ¨å‡½æ•°å®šä¹‰çš„æºæ–‡ä»¶ä¸­ç»™å‡ºï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nå‡è®¾å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰ä¸­è®¾å®šçš„ç¼ºçœå€¼ä¸åŒï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“è¦ç”¨å“ªä¸€ä¸ªç¼ºçœå€¼\n\n\nè°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å‡½æ•°æ­£ç¡®åˆ†é…äº†ä¸åŒçš„åˆå§‹å€¼\n\n\n6.3.1é”™è¯¯æƒ…å†µä½†å¦‚æœæˆ‘ä»¬åœ¨å¤´æ–‡ä»¶ä¸­ä¸åŒ…å«ç¼ºçœï¼Œå‡½æ•°å°±ä¼šæŠ¥é”™ï¼Œä¸æ”¯æŒæˆ‘ä»¬åªä¼ 1ä¸ªå‚æ•°\nvoid InitArr(Qa* q, int n);\n\n\nåªè¦ä½ çš„å¤´æ–‡ä»¶ä¸­å£°æ˜æ²¡æœ‰ç¼ºçœï¼Œ åœ¨å‡½æ•°å®šä¹‰çš„æºæ–‡ä»¶ä¸­åŠ å…¥ç¼ºçœä¹Ÿæ˜¯æ²¡ç”¨çš„ï¼\n\nå› ä¸ºç¼–è¯‘å™¨å±•å¼€å¤´æ–‡ä»¶æ˜¯åœ¨mainå‡½æ•°ä¸­ä¹‹ä¸Šï¼Œåœ¨æŸ¥æ‰¾å‡½æ•°çš„æ—¶å€™ï¼Œåªä¼šå‘ä¸ŠæŸ¥æ‰¾å£°æ˜ã€‚æ‰€ä»¥å‡½æ•°çš„å£°æ˜æ˜¯ä»¥å¤´æ–‡ä»¶ä¸ºå‡†ï¼\n\n\n\nç»“è¯­ç¬¬ä¸€ç¯‡C++çš„ç¬”è®°å°±å†™è¿™ä¹ˆå¤šï¼ˆå…¶å®å·²ç»æœ‰å‡ åƒå­—äº†ï¼‰\nä¸‹ä¸€ç¯‡ç¬”è®°æ˜¯å‡½æ•°é‡è½½ï¼Œå¯ä»¥è®©ä½ æ„Ÿå—åˆ°C++çš„æ›´å¤šèŠ±æ ·ï¼\n\nä¸ä¼šæœ‰äººæŠŠåšå®¢çœ‹å®Œäº†è¿˜ä¸ç‚¹èµå§ï¼Ÿ\n\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€C++ã€‘C++11çš„é‚£äº›æ–°ç‰¹æ€§","url":"/2022/09/28/note_cpp/20C++11%E7%89%B9%E6%80%A7/","content":"æœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹C++11çš„é‚£äº›æ–°ç‰¹æ€§ï¼\n\n\n\næ‰€ä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼šVS2019\næœ¬ç¯‡åšå®¢æ‰€æœ‰çš„æµ‹è¯•æºç éƒ½å¯ä»¥åœ¨æˆ‘çš„GITEEä»“åº“æ‰¾åˆ° \n\n[TOC]\n1.å‰è¨€C++11æ˜¯C++çš„æ ‡å‡†å§”å‘˜ä¼šåœ¨2011å¹´æ›´æ–°çš„C++æ–°ç‰¹æ€§ã€‚è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡çº§åŒ…ã€‚å’ŒJAVA\\PYTHONè¿™ç§æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„è¯­è¨€ç›¸æ¯”ï¼ŒC++æ›´æ–°çš„å°±æ²¡æœ‰é‚£ä¹ˆé¡ºé£é¡ºæ°´äº†ï¼Œè€Œä¸”æ¯ä¸€æ¬¡æ›´æ–°è™½ç„¶ä¿®å¤äº†ä¸€äº›é—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ›´å¤šçš„â€œæ²¡å¤ªå¤§å¿…è¦â€çš„æ›´æ–°\n\næ¯”å¦‚æ²¡å•¥ç”¨çš„arrayå®¹å™¨ï¼Œå’Œint arr[10]è¿™ç§å†…ç½®æ–¹å¼çš„åŒºåˆ«ä¸»è¦åœ¨äºè¶Šç•Œæ£€æŸ¥\n\nä¸è¿‡å’±ä»¬è¿™ç§å°èœé¸¡ï¼Œåªæœ‰å­¦ä¹ çš„æƒåŠ›ï¼Œå“ªæœ‰å•¥èµ„æ ¼è¯„å®šC++æ ‡å‡†å‘¢ï¼Ÿæˆ‘å¬å¤§ä½¬è¯´ï¼Œç°åœ¨æœ€å…³æ³¨çš„C++æ›´æ–°ä¾¿æ˜¯ç½‘ç»œåº“çš„ä¸Šçº¿äº†ï¼Œä¸è¿‡é‚£ä¸ªè²Œä¼¼å¾—ç­‰åˆ°C++23å»äº†\nè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ¥åº·åº·ä¸€äº›C++11çš„æ–°åŠŸèƒ½å§ï¼\n\n2.åˆ—è¡¨&#123;&#125;åˆå§‹åŒ–C++11æ›´æ–°äº†åˆå§‹åŒ–æ–¹å¼ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨èŠ±æ‹¬å·çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–\nstruct TestA&#123;\tint _a;\tint _b;&#125;;void TestInit()&#123;\tint arr1[] = &#123; 1,2,3,4,5 &#125;;\tTestA t1 = &#123; 1,2 &#125;;&#125;\n\nä¹‹å‰æˆ‘ä»¬å·²ç»ä¹ æƒ¯äºç”¨è¿™å¼ æ–¹å¼æ¥åˆå§‹åŒ–æ•°ç»„æˆ–è€…ç»“æ„ä½“ï¼Œè¿™åœ¨C++98ä¸­å·²ç»æ”¯æŒ\nè€ŒC++11åˆ™åœ¨è¿™ç§ç©æ³•ä¹‹ä¸Šï¼Œåˆå¢æ·»äº†ä¸€éƒ¨åˆ†æ–°æ“ä½œï¼Œé‚£å°±æ˜¯ç›´æ¥ç”¨èŠ±æ‹¬å·åˆå§‹åŒ–ï¼Œä½ ç”šè‡³å¯ä»¥æŠŠ=ç»™çœç•¥äº†\nint arr2[]&#123; 1,2,3,4,5 &#125;;int arr3[5]&#123; 0 &#125;;TestA t2&#123; 1,2 &#125;;\n\nä¸è¿‡ä¸Šé¢è¿™ç§å†™æ³•æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œè¿˜å¢åŠ äº†ä»£ç ç†è§£çš„éš¾åº¦ï¼Œä¸å¦‚ç›´æ¥ç”¨åŸæœ¬çš„å†™æ³•ã€‚\næ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯åœ¨newåˆå§‹åŒ–å¤šä¸ªæ•°æ®çš„æ—¶å€™ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\n2.1 newåˆå§‹åŒ–å¤šä¸ªæ•°æ®åœ¨åŠ¨æ€å†…å­˜ç®¡ç†é‚£ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ äº†newçš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿæåˆ°äº†()/[]è¿™ä¸¤ä¸ªæ‹¬å·çš„åŒºåˆ«\nint *p1 = new int(3);//å¼€è¾Ÿä¸€ä¸ªintçš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º3èµ‹å€¼ç»™p1int *p2 = new int[3];//å¼€è¾Ÿ3ä¸ªintçš„ç©ºé—´ï¼Œä¸è¿›è¡Œåˆå§‹åŒ–\n\nåœ¨C++11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨èŠ±æ‹¬å·ï¼Œå¯¹newå¼€æ‹¼å‡ºæ¥çš„æ•°ç»„è¿›è¡Œæ‰¹é‡åˆå§‹åŒ–ã€‚æ‰“å°çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°p2ä¸­çš„æ•°æ®éƒ½æ˜¯æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼ˆvsä¹ŸæŠ¥äº†è­¦å‘Šï¼‰è€Œp3ä¸­çš„æ•°æ®éƒ½å®Œæˆäº†åˆå§‹åŒ–\n\nå¯¹äºç»“æ„ä½“æ•°æ®è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨èŠ±æ‹¬å·ç›´æ¥è°ƒç”¨å…¶æ„é€ å‡½æ•°\n\nå…¶ä¸­t5æ˜¯å‘ç”Ÿäº†éšå¼ç±»å‹è½¬æ¢+è°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œçš„åˆå§‹åŒ–\nTestA t5 = &#123; 1, 3 &#125;;//å¯¹ç±»æ¥è¯´ï¼Œä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢+è°ƒç”¨æ„é€ å‡½æ•°\n\né€šè¿‡è°ƒè¯•+æ‰“æ–­ç‚¹å¯ä»¥çœ‹åˆ°å…¶è°ƒç”¨äº†æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–\n\nåŒæ ·çš„ï¼Œè°ƒç”¨newçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªèŠ±æ‹¬å·çš„æ–¹å¼è¿›è¡Œæ‰¹é‡åˆå§‹åŒ–ã€‚è¿™åœ¨newä¸€ä¸ªå¯¹è±¡æ•°ç»„çš„æ—¶å€™éå¸¸æ–¹ä¾¿\n\n2.2 initializer_list2.2.1 STLå®¹å™¨åˆå§‹åŒ–ä¸å…‰æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ç±»ã€å†…ç½®ç±»å‹å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œstlåº“é‡Œé¢çš„å®¹å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸åŒæ–¹å¼è¿›è¡Œåˆå§‹åŒ–\nvector&lt;int&gt; v1 = &#123; 1,2,3,4 &#125;;vector&lt;int&gt; v2&#123; 1,2,3,4 &#125;;//ä¸å»ºè®®è¿™ä¹ˆå†™\n\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼åˆå§‹åŒ–vectorå†…éƒ¨çš„å¯¹è±¡\n\nä½œä¸ºå®¹å™¨çš„ä¸€ä»½å­ï¼Œmapä¹Ÿæœ‰ä¸€ä¸ªåˆ©ç”¨ilè¿›è¡Œåˆå§‹åŒ–çš„æ„é€ å‡½æ•°\n\nä½¿ç”¨æ–¹å¼å’Œä¹‹å‰æåˆ°çš„æ²¡å•¥åŒºåˆ«ï¼Œè¿™é‡Œå°±ä¸å¤šè®²å•¦\nmap&lt;int, int&gt; m1 = &#123; &#123;10, 20&#125;,&#123; 30,40&#125;,&#123;50,60&#125; &#125;;for (auto e : m1) &#123;\tcout &lt;&lt; e.first &lt;&lt; &quot;-&quot; &lt;&lt; e.second &lt;&lt; &quot; &quot;;&#125;cout &lt;&lt; endl;\n\n\nä½ å¯èƒ½ä¼šå¥½å¥‡ï¼Œè¿™ç§åˆå§‹åŒ–çš„åº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿé‚£ä¹ˆå°±è¦æåˆ°c++11æ–°å¢çš„ä¸€ä¸ªå®¹å™¨äº†\n2.2.2  initializer_list å®¹å™¨å¦‚æœä½ æŠŠvectorç­‰å®¹å™¨çš„ç‰ˆæœ¬è®¾å®šä¸ºC++11ï¼Œçœ‹æ–‡æ¡£çš„æ—¶å€™ä¾¿ä¼šå‘ç°C++11æ–°å¢äº†ä¸€ä¸ªç”¨initializer_listè¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œ\n\n\nå†æ¥çœ‹çœ‹initializer_listï¼Œè¿™ä¸å°±æ˜¯æˆ‘ä»¬åˆšåˆšç”¨çš„èŠ±æ‹¬å·å˜›ï¼Ÿ\n\nè¿™ä¸ªå®¹å™¨çš„æˆå‘˜å‡½æ•°å¾ˆå°‘ï¼Œåªæœ‰ä¸¤ä¸ªè¿­ä»£å™¨ä»¥åŠsize()\n\nå®ƒæœ€é‡è¦çš„ç‰¹æ€§ï¼Œä¾¿æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨autoè‡ªåŠ¨æ¨åˆ°å‚æ•°ç±»å‹çš„æ—¶å€™ï¼Œ&#123;1,2,3,4&#125;è¿™ç§ç±»å‹ä¼šè¢«æ¨åˆ°æˆinitializer_list\nauto il = &#123; 10, 20, 30 &#125;;cout &lt;&lt; typeid(il).name() &lt;&lt; endl;//initializer_list \n\nå› ä¸ºä»–æœ‰è¿­ä»£å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨èŒƒå›´forè¿›è¡Œæ‰“å°æ“ä½œ\n\nä¸ªäººç†è§£ï¼Œå½“å…¶ä»–å®¹å™¨ä½¿ç”¨initializer_listè¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œæœ¬è´¨ä¸Šè°ƒç”¨çš„æ¥å£å’Œåˆ©ç”¨è¿­ä»£å™¨è¿›è¡Œåˆå§‹åŒ–æ˜¯ä¸€æ ·çš„\n2.3.1 æ’å…¥iléƒ¨åˆ†å®¹å™¨çš„insertå‡½æ•°ä¹Ÿæ·»åŠ äº†ä½¿ç”¨ilè¿›è¡Œæ’å…¥è¿ç»­æ•°æ®çš„æ“ä½œ\n\nset&lt;int&gt; s2 = &#123; 1,2,3,4 &#125;;s2.insert(&#123; 5,6,7,8 &#125;);\n\n\nåœ¨vectorä¸­ä½¿ç”¨ilæ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šposä½ç½®è¿™ä¸ªå’Œvectorçš„å…¶ä»–å‡ ä¸ªæ’å…¥å‡½æ•°æ˜¯ä¸€æ ·çš„\n\n2.4 æ¨¡æ‹Ÿå®ç°ilæ„é€ å‡½æ•°é‚£ä¹ˆï¼Œå¦‚ä½•è®©æˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿå®ç°çš„vectorä¹Ÿèƒ½æ”¯æŒè¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿã€æ¨¡æ‹Ÿå®ç°vectoræºç ã€‘\nå’ŒSTLåº“é‡Œé¢çš„ä»£ç ä¸€æ ·ï¼Œæ·»åŠ ä¸Šinitializer_listçš„æ„é€ å‡½æ•°å³å¯\nå› ä¸ºilå®¹å™¨å·²ç»æœ‰äº†å®ƒè‡ªå·±çš„è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤ç”¨è¿­ä»£å™¨æ„é€ çš„æ“ä½œï¼Œç›´æ¥è¿›è¡Œéå†ç„¶åpush_backå³å¯ï¼\n//initializer_listæ„é€ vector(const initializer_list&lt;T&gt;&amp; il)    :_start(nullptr),    _finish(nullptr),    _endofstorage(nullptr)&#123;    for (auto e : il) &#123;        push_back(e);    &#125;&#125;\n\n\nè¯•è¯•è‡ªå®šä¹‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¾ˆå¥½çš„æ”¯æŒï¼\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¼˜åŒ–çš„åœ°æ–¹ï¼Œé‚£ä¾¿æ˜¯å¼€å§‹æ„é€ çš„æ—¶å€™ï¼Œç›´æ¥ç»™vectorå¼€å¯¹åº”il size()çš„ç©ºé—´å¤§å°ï¼Œé¿å…åç»­push_backçš„æ—¶å€™éœ€è¦å¤šæ¬¡æ‰©å®¹\n//initializer_listæ„é€ vector(const initializer_list&lt;T&gt;&amp; il)    :_start(nullptr),_finish(nullptr),_endofstorage(nullptr)&#123;    reserve(il.size());//æ‰©å®¹    for (auto e : il) &#123;        push_back(e);    &#125;&#125;\n\né€šè¿‡è°ƒè¯•èƒ½å‘ç°è¾¾æˆäº†æˆ‘ä»¬çš„éœ€æ±‚ï¼ˆå› ä¸ºè°ƒè¯•æ­¥éª¤å¤ªå¤šï¼Œæˆªå›¾ä¸æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚æ„Ÿå…´è¶£çš„è€å“¥å¯ä»¥å»æˆ‘çš„giteeä»“åº“ä¸‹æºç è‡ªå·±è¯•è¯•ï¼‰\n3.å˜é‡å£°æ˜C++11æä¾›äº†å¤šç§ç®€åŒ–çš„å£°æ˜/å®šä¹‰æ–¹å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„auto\n3.1 auto\nC++98ä¸­autoæ˜¯ä¸€ä¸ªå­˜å‚¨ç±»å‹çš„è¯´æ˜ç¬¦ï¼Œè¡¨æ˜å˜é‡æ˜¯å±€éƒ¨è‡ªåŠ¨å­˜å‚¨ç±»å‹ï¼Œä½†æ˜¯å±€éƒ¨åŸŸä¸­å®šä¹‰å±€ éƒ¨çš„å˜é‡é»˜è®¤å°±æ˜¯è‡ªåŠ¨å­˜å‚¨ç±»å‹ï¼Œæ‰€ä»¥autoå°±æ²¡ä»€ä¹ˆä»·å€¼äº†ã€‚\n\nC++11ç»™autoä¸Šäº†å®ç°è‡ªåŠ¨ç±»å‹æ¨æ–­çš„å…¨æ–°åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™ç›´æ¥ç”¨autoè¿›è¡Œç±»å‹æ¨å¯¼\nauto num = 1;//intauto p = &amp;num;//int*\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæƒ³ç”¨autoæ¨åˆ°ï¼Œåˆ™å¿…é¡»åˆå§‹åŒ–ã€‚åªç»™ä¸€ä¸ªauto iæ˜¯ä¸è¡Œçš„ï¼\nautoè¿˜å¯ä»¥ç”¨äºèŒƒå›´forç­‰å…¶ä»–æ“ä½œï¼Œè¿™äº›éƒ½åœ¨ä¹‹å‰è®²è§£è¿™ä¸ªå…³é”®å­—çš„åšå®¢ä¸­æœ‰æåˆ°ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼\n\n3.2 decltypeå…³é”®å­—decltypeå¯ä»¥æŠŠå˜é‡å£°æ˜æˆæˆ‘ä»¬æƒ³è¦çš„ç›®æ ‡ç±»å‹\nint a = 10, b = 20;int sum = a * b;cout &lt;&lt; &quot;type(sum) &quot; &lt;&lt; typeid(sum).name() &lt;&lt; endl;decltype(a * b) num;decltype(&amp;sum) ptr;cout &lt;&lt; &quot;type(a*b)  &quot; &lt;&lt; typeid(num).name() &lt;&lt; endl;cout &lt;&lt; &quot;type(&amp;sum) &quot; &lt;&lt; typeid(ptr).name() &lt;&lt; endl;\n\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç¥å¥‡ï¼Ÿå¾ˆæ–¹ä¾¿ï¼Ÿ\né‚£è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªè¯­è¨€å£°æ˜å˜é‡çš„æ–¹å¼å§ï¼ğŸ˜‚\n# Pythona=10sum = a*20print(type(a))print(type(sum))\n\n\nè¦æ˜¯C++ä¹Ÿæœ‰è¿™ä¹ˆæ–¹ä¾¿å°±å¥½äº†ğŸ˜­\n3.3 typeidè¿™ä¸ªå…³é”®å­—ä¸Šé¢å·²ç»ç”¨è¿‡å¥½å‡ æ¬¡äº†ï¼Œå°±æ˜¯ç”¨æ¥æ‰“å°å˜é‡çš„ç±»å‹çš„\nint a = 10;cout &lt;&lt; &quot;type(a) &quot; &lt;&lt; typeid(a).name() &lt;&lt; endl;\n\n\n4.å·¦&#x2F;å³å€¼å¼•ç”¨åœ¨ä¹‹å‰æˆ‘ä»¬å­¦ä¹ äº†å¼•ç”¨çš„åŸºæœ¬æ“ä½œï¼Œä½†é‚£ä¸ªæ˜¯å·¦å€¼å¼•ç”¨ã€‚å½“æ—¶æˆ‘ä»¬å°šæœªå¼•å…¥å·¦æŒ‡å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„åŒºåˆ«ã€‚æœ¬ç¯‡åšå®¢é‡Œé¢å°†ä¼šè¯¦ç»†è®²è§£~\n4.1 å·¦å€¼&#x2F;å³å€¼åŒºåˆ«è¦è§£ç­”è¿™ä¸¤ç§å¼•ç”¨çš„åŒºåˆ«ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç›´åˆ°å·¦å€¼/å³å€¼åˆ†åˆ«ä»£æŒ‡ä»€ä¹ˆ\nå·¦å€¼ï¼š\n\nå¯ä»¥å­˜åœ¨äº=å·¦è¾¹æˆ–å³è¾¹\nå¯ä»¥å–åœ°å€\nå¯ä»¥å¯¹å®ƒèµ‹å€¼ï¼ˆconsté™¤å¤–ï¼‰\n\nå³å€¼ï¼š\n\nå³å€¼æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ•°æ®çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼šå‡½æ•°è¿”å›å€¼[ä¸èƒ½æ˜¯å·¦å€¼å¼•ç”¨è¿”å›çš„]ã€è¡¨è¾¾å¼è¿”å›å€¼A+Bã€å­—é¢å¸¸é‡10\nå³æŒ‡åªèƒ½å‡ºç°åœ¨=çš„å³è¾¹ï¼Œä¸èƒ½å‡ºç°åœ¨å·¦è¾¹ï¼ˆä¿ºå¯æ²¡è§è¿‡A+B=Cçš„ä»£ç è¯­æ³•ï¼‰\nå³æŒ‡ä¸èƒ½å–åœ°å€\n\nå·¦å€¼å’Œå³å€¼æœ€å¤§çš„åŒºåˆ«ä¾¿æ˜¯ï¼šå·¦å€¼å¯ä»¥å–åœ°å€ï¼Œå³å€¼ä¸èƒ½å–åœ°å€\n4.1.1 å°†äº¡å€¼ï¼ˆæ¦‚å¿µï¼‰å³å€¼è¿˜åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n//çº¯å³å€¼10;a+b;Add(a,b);//å°†äº¡å€¼string s1(&quot;1111&quot;);//&quot;1111&quot;æ˜¯å°†äº¡å€¼string s2 = to_string(1234);//to_stringçš„returnå¯¹è±¡æ˜¯ä¸€ä¸ªå°†äº¡å€¼string s3 = s1+&quot;hello&quot; //ç›¸åŠ é‡è½½çš„returnå¯¹è±¡æ˜¯ä¸€ä¸ªå°†äº¡å€¼move(s1);//è¢«moveä¹‹åçš„s1ä¹Ÿæ˜¯å°†äº¡å€¼\n\nåœ¨å³å€¼å¼•ç”¨çš„ä»‹ç»ä¸­å°†ç”¨ä¸Šå°†äº¡å€¼çš„æ¦‚å¿µ\n4.2 å·¦å€¼å¼•ç”¨å·¦å€¼å¼•ç”¨å°±æ˜¯å¯¹å·¦å€¼çš„å¼•ç”¨ã€‚æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å°±æ˜¯è¿™ä¸€ç±»å‹\n// aã€bã€cã€*aéƒ½æ˜¯å·¦å€¼// å¯¹è±¡å†…éƒ¨çš„*thisä¹Ÿæ˜¯å·¦å€¼int* a = new int(0);int b = 1;const int c = 2;// ä»¥ä¸‹æ˜¯å¯¹ä¸Šé¢å·¦å€¼çš„ å·¦å€¼å¼•ç”¨int*&amp; rp = a;int&amp; rb = b;const int&amp; rc = c;int&amp; p = *a;// å¼•ç”¨ç›¸å½“äºåˆ«åï¼Œä¿®æ”¹å¼•ç”¨åçš„å†…å®¹ç›¸ç­‰äºä¿®æ”¹åŸæœ¬çš„å‚æ•°\n\nä¹‹å‰ä¹Ÿæåˆ°äº†ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯åœ¨é’ˆå¯¹å‡ºäº†ä½œç”¨åŸŸä¸ä¼šé”€æ¯çš„å˜é‡è¿›è¡Œå¼•ç”¨è¿”å›ï¼Œä»¥èŠ‚çœæ‹·è´çš„ä»£ä»·ã€‚äº¦æˆ–è€…æ˜¯å¼•ç”¨ä¼ å‚ï¼Œå‡å°‘å½¢å‚æ‹·è´ä»£ä»·\n\n4.3 å³å€¼å¼•ç”¨æ¥çœ‹çœ‹å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å³å€¼å§ï¼Œå…¶ä¸­Addæ˜¯ä¸€ä¸ªç®€å•çš„ç›¸åŠ å‡½æ•°\ndouble x = 1.1, y = 2.2;// å¸¸è§çš„å³å€¼10;x + y;Add(x, y);// ä»¥ä¸‹éƒ½æ˜¯å¯¹å³å€¼çš„å³å€¼å¼•ç”¨int&amp;&amp; rr1 = 10;double&amp;&amp; rr2 = x + y;double&amp;&amp; rr3 = Add(x, y);//å³å€¼ä¸èƒ½å‡ºç°åœ¨=çš„å·¦è¾¹//10 = 1;//x + y = 1;//fmin(x, y) = 1;\n\nè™½ç„¶æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å³å€¼è¿›è¡Œå–åœ°å€/èµ‹å€¼æ“ä½œï¼Œä½†æ˜¯åœ¨å³å€¼å¼•ç”¨è¿‡åï¼Œä¾¿å¯ä»¥å¯¹å¼•ç”¨å€¼è¿›è¡Œå–åœ°å€/èµ‹å€¼æ“ä½œ\n\nè¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨çš„æ—¶å€™ï¼Œä¼šæŠŠå½“å‰å¼•ç”¨çš„æ•°æ®æ”¾å…¥ä¸€ä¸ªä½ç½®å­˜èµ·æ¥ã€‚\nå­˜æ”¾ä½ç½®ï¼šæ™®é€šå˜é‡åœ¨æ ˆï¼Œå…¨å±€å˜é‡&#x2F;é™æ€å˜é‡åœ¨é™æ€åŒºï¼ˆæ²¡æœ‰éªŒè¯è¿‡ï¼Œå¯èƒ½ä¸å¯¹ï¼‰\n\nint&amp;&amp; rr1 = 10;cout &lt;&lt; rr1  &lt;&lt; endl;rr1 = 3;cout &lt;&lt; rr1 &lt;&lt; endl;int* p = &amp;rr1;*p = 2;cout &lt;&lt; rr1 &lt;&lt; endl;\n\n\nå¦‚æœä½ ä¸å–œæ¬¢å³å€¼å¼•ç”¨è¢«ä¿®æ”¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨constè¿›è¡Œä¿®é¥°\n\n4.4 ä¸¤ä¸ªå¼•ç”¨çš„åŒºåˆ«ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“äºŒè€…çš„åŒºåˆ«\n\n\n\nå·¦å€¼å¼•ç”¨\nå³å€¼å¼•ç”¨\n\n\n\nåªèƒ½å¼•ç”¨å·¦å€¼\nåªèƒ½å¼•ç”¨å³æŒ‡\n\n\nconstå¯ä»¥å¼•ç”¨å·¦å€¼&#x2F;å³å€¼\nå¯ä»¥å¼•ç”¨moveåçš„å·¦å€¼\n\n\n4.4.1 movemoveå¯ä»¥æŠŠå·¦å€¼æ¢æˆå³å€¼ï¼Œä½†ä¸èƒ½æŠŠå³å€¼è½¬å·¦å€¼\n\nè°¨æ…ä½¿ç”¨moveï¼Œå¦‚æœå½“å‰å¯¹è±¡åœ¨åç»­è¿˜éœ€è¦ä½¿ç”¨ï¼Œåˆ™ä¸èƒ½moveå°†å…¶æ”¹ä¸ºå³å€¼ï¼Œå¦åˆ™å¯èƒ½èµ„æºè¢«æ å¤ºå¯¼è‡´è¯¥å¯¹è±¡å¤±æ•ˆï¼\n\n\n4.5 å³å€¼å¼•ç”¨ä½¿ç”¨åœºæ™¯å³å€¼å¼•ç”¨å¯ä»¥æé«˜ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼ç­‰æ·±æ‹·è´åœºæ™¯çš„æ•ˆç‡\nä»€ä¹ˆåœºæ™¯å¯ä»¥ä½¿ç”¨å·¦å€¼å¼•ç”¨æé«˜æ•ˆç‡?\n\næ“ä½œç¬¦é‡è½½ï¼šå‰ç½®++\næ“ä½œç¬¦é‡è½½ï¼š+=\nå‡ºäº†ä½œç”¨åŸŸåä¸ä¼šé”€æ¯çš„å˜é‡ï¼Œå¦‚è¾“å‡ºå‹å‚æ•°ï¼ˆå³ä¼ å…¥å‡½æ•°è¿›è¡Œå¤„ç†çš„å‚æ•°ï¼‰\n\nè€Œæœ‰ä¸€äº›åœºæ™¯æ˜¯å·¦å€¼å¼•ç”¨æ— æ³•å¤„ç†çš„ï¼š\n\næ“ä½œç¬¦é‡è½½ï¼šåç½®++ï¼ˆéœ€è¦è¿”å›ä¸€ä¸ªå…¨æ–°å˜é‡ï¼‰\næ“ä½œç¬¦é‡è½½ï¼š+ï¼ˆéœ€è¦è¿”å›ä¸€ä¸ªå…¨æ–°å˜é‡ï¼‰\næ¨¡æ‹Ÿå®ç°stringä¸­çš„to_stringå‡½æ•°\n\nè¿™äº›åœºæ™¯å¤§å¤šæœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œé‚£å°±æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„å˜é‡ï¼ˆå¯¹è±¡ï¼‰å…¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå‡ºäº†å‡½æ•°ä½œç”¨åŸŸä¾¿ä¼šé”€æ¯ï¼ˆå°†äº¡å€¼ï¼‰\nå¦‚æœä½¿ç”¨å·¦å€¼å¼•ç”¨è¿”å›ï¼Œå°±ä¼šå‡ºç°è®¿é—®å·²ç»é”€æ¯äº†çš„å¯¹è±¡çš„é”™è¯¯ã€‚\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªvector&lt;vector&lt;int&gt;&gt;ï¼Œè‹¥å†…éƒ¨çš„vectorå¾ˆå¤§çš„æ—¶å€™ï¼Œæ‹·è´æ„é€ çš„ä»£ä»·æ˜¯å¾ˆå¤§çš„ï¼\n\n4.5.1 è¾“å‡ºå‹å‚æ•°å¦‚æœåœ¨C++98çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªèƒ½ç”¨è¾“å‡ºå‹å‚æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nvector&lt;vector&lt;int&gt;&gt;&amp; test(vector&lt;vector&lt;int&gt;&gt;&amp;v1,int val)&#123;    //â€¦â€¦    //v1å°±æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚æ”¾å…¥è¯¥å‡½æ•°è¿›è¡Œæ“ä½œååŸè·¯è¿”å›    return v1;&#125;\n\n4.5.2 å³å€¼å¼•ç”¨ ç§»åŠ¨æ„é€ åœ¨C++11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³å€¼å¼•ç”¨çš„æ‹·è´æ„é€ æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nä¸‹æ–¹å°±æ˜¯ä¸€ä¸ªå…·ä½“ç¤ºä¾‹\nmuxue::string to_string(int val)&#123;    bool flag = true;    if (val &lt; 0)&#123;        flag = false;        val = 0 - val;    &#125;    muxue::string str;    while (val &gt; 0)&#123;        int x = val % 10;        val /= 10;        str += (&#x27;0&#x27; + x);    &#125;    if (flag == false)&#123;       str += &#x27;-&#x27;;    &#125;    std::reverse(str.begin(), str.end());    return str;&#125;\n\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³ä½¿ç”¨è¿™ä¸ªto_stringå‡½æ•°ï¼Œå°±éœ€è¦è¿›è¡Œæ·±æ‹·è´è¿›è¡Œä¼ å€¼è¿”å›ã€‚è¿™æ˜¯æ— å¯é¿å…çš„ä»£ä»·\nå¦‚æœä½¿ç”¨å·¦å€¼å¼•ç”¨è¿”å›ï¼Œè¿™é‡Œå°±ä¼šæœ‰bugã€‚å› ä¸ºå‡ºäº†å‡½æ•°ä½œç”¨åŸŸåï¼Œä¸´æ—¶å¯¹è±¡strä¼šè¢«é”€æ¯ã€‚è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å·¦å€¼å¼•ç”¨å–åˆ«åï¼Œåœ¨è¿›è¡Œèµ‹å€¼çš„æ—¶å€™ï¼Œä¾¿ä¼šå‡ºç°åˆ©ç”¨strçš„åˆ«åè¿›è¡Œæ‹·è´æ„é€ ï¼Œè€Œstræ˜¯ä¸€ä¸ªå·²ç»é”€æ¯çš„å¯¹è±¡çš„é—®é¢˜\n\nè€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å³å€¼å¼•ç”¨è¿”å›ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚å‰ææ˜¯æˆ‘ä»¬è‡ªå·±å®ç°äº†å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°å’Œèµ‹å€¼é‡è½½\n\nä¸€èˆ¬æˆ‘ä»¬æŠŠå³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°&#x2F;èµ‹å€¼é‡è½½ç§°ä½œç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\n\nä¸ºä»€ä¹ˆå«ç§»åŠ¨å‘¢ï¼Ÿå› ä¸ºå³å€¼å¼•ç”¨æ˜¯ä¼šç›´æ¥æ‹¿å–å¯¹è±¡çš„èµ„æº\nSTL_stringæˆ‘ä»¬å¯ä»¥å…ˆç”¨åº“é‡Œé¢çš„stringè§‚å¯Ÿä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨moveä¹‹åçš„å³å€¼è¿›è¡Œæ„é€ çš„æ—¶å€™ï¼Œä¼šç›´æ¥æ‹¿æ‰å¯¹è±¡çš„èµ„æºï¼\nstring s1 = &quot;1234134&quot;;string s2(s1);string s3(move(s1));\n\n\n\nè€Œåœ¨ä½¿ç”¨å³å€¼è¿›è¡Œè¿”å›çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œä¸€æ³¢ä¼˜åŒ–ï¼Œç›´æ¥ä½¿ç”¨ç§»åŠ¨æ„é€ æ‹¿å–èµ„æºï¼Œé¿å…å¤šæ¬¡æ‹·è´æ„é€ é€ æˆçš„ç©ºé—´å’Œæ—¶é—´æŸå¤±\nåœ¨å¤„ç†è¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œå°±æ¯”è¾“å‡ºå‹å‚æ•°å¥½å¤ªå¤šäº†ã€‚\n\nMY_stringä¸è¿‡åº“é‡Œé¢çš„stringæ¶‰åŠåˆ°äº†bufä¹‹ç±»çš„é«˜çº§æ“ä½œï¼Œä¹Ÿä¸é€‚åˆæˆ‘ä»¬è°ƒè¯•æŸ¥çœ‹è°ƒç”¨çš„å…·ä½“æƒ…å†µã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å†ä½¿ç”¨è‡ªå·±å†™çš„stringæ¥æ¼”ç¤ºä¸€ä¸‹\n\nè¿™é‡Œæˆ‘è¿˜å‘ç°äº†ä¹‹å‰æ¨¡æ‹Ÿå®ç°stringçš„ä¸€ä¸ªbugï¼Œåœ¨push_backæ“ä½œçš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™æœ«å°¾åŠ ä¸Š\\0ï¼Œå¯¼è‡´ææ„çš„æ—¶å€™æŠ¥é”™äº†\n\næ¨¡æ‹Ÿå®ç°stringä»£ç è§æˆ‘çš„giteeä»“åº“ã€ä¼ é€é—¨ã€‘\n\n\nåœ¨æ¼”ç¤ºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å®ç°è‡ªå·±çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\n//ç§»åŠ¨èµ‹å€¼string&amp; operator=(string&amp;&amp; s)&#123;    swap(s);    return *this;&#125;//ç§»åŠ¨æ‹·è´string(string&amp;&amp; s)    :_a(nullptr),    _size(0),    _capa(0)&#123;    swap(s);&#125;\n\nè¿™é‡Œæˆ‘ç›´æ¥å¤ç”¨äº†ä¹‹å‰å·²ç»å†™å¥½çš„ä¸€ä¸ªswapå‡½æ•°ï¼Œå®ç°äº†ä¸€ä¸ªâ€œç°ä»£å†™æ³•â€çš„æ„é€ ï¼Œç›´æ¥äº¤æ¢äº†äºŒè€…çš„èµ„æºã€‚é¿å…æ·±æ‹·è´å¸¦æ¥çš„å‰¯ä½œç”¨\n\næ¥ä¸‹æ¥ç”¨ä¸‹é¢çš„å‡ ä¸ªæ¥æµ‹è¯•ä¸€ä¸‹æ‹·è´æ„é€ çš„æ“ä½œ\nmuxue::string s1 = &quot;1234&quot;;muxue::string s2(s1);//æ‹·è´æ„é€ muxue::string s3 = muxue::to_string(5678);//ç§»åŠ¨æ„é€ muxue::string s4 = s1 + s3;//æ‹·è´æ„é€ +ç§»åŠ¨æ„é€ \n\né€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ æ‰“å°ï¼Œå¯ä»¥çœ‹å‡ºè¿™å‡ ä¸ªåˆ†åˆ«è°ƒç”¨äº†ä»€ä¹ˆæ„é€ å‡½æ•°\n\n\ns2è°ƒç”¨äº†æ·±æ‹·è´æ„é€ ï¼Œå› ä¸ºs1æ˜¯ä¸€ä¸ªå·¦å€¼\ns3è°ƒç”¨äº†ç§»åŠ¨æ„é€ ï¼Œå› ä¸ºto_stringå‡½æ•°ä¸­returnçš„æ˜¯ä¸€ä¸ªå°†äº¡å€¼\ns4å…ˆæ˜¯åœ¨è¿ç®—ç¬¦+é‡è½½ä¸­è°ƒç”¨æ·±æ‹·è´æ„å»ºäº†ä¸€ä¸ªstringçš„ä¸´æ—¶å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨ç§»åŠ¨æ„é€ è¿›è¡Œreturn\n\nè¿ç®—ç¬¦+é‡è½½çš„ä»£ç å¦‚ä¸‹ï¼Œå’Œto_stringä¸€æ ·ï¼Œéƒ½æ˜¯returnäº†ä¸€ä¸ªå°†äº¡å€¼\n//ç›¸åŠ é‡è½½string operator+(const string&amp; s)&#123;    muxue::string tmp(*this);    tmp += s;    return tmp;&#125;\n\nå°†ä¸€ä¸ªå¯¹è±¡moveæˆä¸ºå³å€¼ä¹‹åï¼Œä¾¿å¯ä»¥ä½¿ç”¨ç§»åŠ¨èµ‹å€¼\n\nç§»åŠ¨æ„é€ ç›´æ¥ç§»åŠ¨èµ„æºè¿™æ—¶å€™å¦‚æœè°ƒç”¨æ‹·è´æ„é€ ï¼Œå°±å¾ˆæ˜¯æµªè´¹ï¼š\n\næœ¬æ¥tmpçš„èµ„æºå°±è¦é”€æ¯äº†ï¼Œä½ è¿˜å¾—å…ˆæŠŠä»–çš„èµ„æºå¤åˆ¶ä¸€ä»½ç»™è‡ªå·±ï¼Œå†é”€æ¯tmp\né‚£ä¸ºä½•ä¸æŠŠtmpçš„èµ„æºç›´æ¥æ‹¿ç»™è‡ªå·±å‘¢ï¼Ÿçœå»äº†å¤åˆ¶çš„æ¶ˆè€—ï¼\n\nè¿™ä¾¿æ˜¯ç§»åŠ¨æ„é€ çš„ä¼˜åŠ¿ä¹‹å¤„ï¼\nè°ƒè¯•ä½“ç°å‡ºæ¥çš„ï¼Œä¾¿æ˜¯æ·±æ‹·è´ä¸­ä¸¤ä¸ªå¯¹è±¡_açš„åœ°å€å®Œå…¨ä¸åŒ\n\nè€Œç§»åŠ¨æ„é€ æ˜¯ç›´æ¥æŠŠs1çš„_aèµ„æºæ‹¿äº†è¿‡æ¥ï¼\n\nå…¶æœ€æ˜æ˜¾çš„ç‰¹å¾ï¼Œä¾¿æ˜¯s3çš„_aåœ°å€å°±æ˜¯s1çš„ï¼\n\n\nSTLçš„æ›´æ–°å¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±æ¨¡æ‹Ÿå®ç°çš„ç§»åŠ¨æ„é€ åˆ é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„returnéƒ½ä¼šå»è°ƒç”¨æ·±æ‹·è´ï¼Œä»£ä»·å°±å¾ˆå¤§äº†ã€‚å¯¹è±¡å¾ˆå¤§çš„æ—¶å€™ï¼Œæ¥ä¸€æ¬¡æ·±æ‹·è´æœ‰å¯èƒ½å¯ä»¥æŠŠæ•´ä¸ªç³»ç»Ÿå¹²åºŸğŸ˜‚\n\næ‰€æœ‰STLçš„å®¹å™¨ï¼Œåœ¨C++11ä¹‹åï¼Œéƒ½æ”¯æŒäº†å³å€¼å¼•ç”¨çš„æ’å…¥ã€ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼\n\nC++11çš„swapä¹Ÿæä¾›äº†ä¸€ä¸ªç›´æ¥ä½¿ç”¨å³å€¼è¿›è¡Œèµ„æºæ›¿æ¢çš„ç‰ˆæœ¬ï¼Œæ•ˆç‡æ›´é«˜\n\n4.6 ç¼–è¯‘å™¨ä¼˜åŒ–åœ¨ä¹‹å‰æœ‰å…³æ„é€ å‡½æ•°çš„åšå®¢é‡Œé¢æœ‰æåˆ°è¿‡ï¼Œå½“æˆ‘ä»¬returnä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠŠä¸¤æ¬¡æ‹·è´æ„é€ ä¼˜åŒ–æˆä¸€æ¬¡\n\nå’Œæ‹·è´æ„é€ ä¸€æ ·ï¼Œæ‰§è¡Œç§»åŠ¨æ„é€ çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¹Ÿæœ‰ä¸€å®šçš„ä¼˜åŒ–\n\nä¸è¿‡è¿™ä¸ªä¼˜åŒ–å°±å–å†³äºç¼–è¯‘å™¨çš„å¤„ç†äº†ã€‚ä¸æ’é™¤æœ‰äº›ç¼–è¯‘å™¨æ²¡æœ‰åšæ­¤ç­‰å¤„ç†å“¦ï¼\n4.7 ä¼˜åŒ–æ’å…¥æ•ˆç‡æœ‰äº†å³å€¼å¼•ç”¨ï¼Œåªè¦æˆ‘ä»¬å®ç°ä¸€ä¸ªå³å€¼å¼•ç”¨æ–¹å¼çš„æ’å…¥ï¼Œä¹Ÿå¯ä»¥ä¼˜åŒ–æ’å…¥æ—¶çš„æ•ˆç‡\nmuxue::list&lt;muxue::string&gt; t;muxue::string s1(&quot;111&quot;);//è°ƒç”¨æ‹·è´æ„é€ ï¼Œå·¦å€¼t.push_back(s1);//è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œå³å€¼t.push_back(&quot;222&quot;);t.push_back(std::move(s1));\n\n5.å®Œç¾è½¬å‘(ä¸‡èƒ½å¼•ç”¨)c++11æä¾›äº†ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨ï¼Œæ—¢å¯ä»¥å¼•ç”¨å·¦å€¼ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨å³å€¼\nvoid Fun(int&amp; x) &#123;     cout &lt;&lt; &quot;å·¦å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(const int&amp; x) &#123;     cout &lt;&lt; &quot;const å·¦å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(int&amp;&amp; x) &#123;     cout &lt;&lt; &quot;å³å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(const int&amp;&amp; x) &#123;     cout &lt;&lt; &quot;const å³å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;template&lt;typename T&gt;void test(T&amp;&amp; t)&#123;//T&amp;&amp;å°±æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨\tFun(t);&#125;\n\né€šè¿‡æµ‹è¯•æˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸ç®¡æ˜¯ä¼ å…¥ä¸€ä¸ªå·¦å€¼è¿˜æ˜¯ä¼ å…¥ä¸€ä¸ªå³å€¼ï¼Œå…¶éƒ½ä¼šè°ƒç”¨å·¦å€¼å¼•ç”¨\n\nè¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨ä¹‹åï¼Œå½¢å‚tå°±æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œæ‰€ä»¥è°ƒç”¨äº†å·¦å€¼çš„å‡½æ•°\n\næˆ‘ä»¬ä¹Ÿä¸èƒ½ç²—æš´çš„ä½¿ç”¨moveæ¥è§£å†³è¿™é‡Œçš„é—®é¢˜ï¼Œå› ä¸ºæœ‰æ—¶å€™ä¸€äº›å·¦å€¼å¯¹è±¡åœ¨åç»­è¿˜æ˜¯éœ€è¦ä½¿ç”¨çš„ï¼Œmoveä¹‹åå˜æˆå³å€¼ï¼Œèµ„æºè¢«æ‹¿èµ°äº†å’‹åŠï¼\n&gt;template&lt;typename T&gt;&gt;void PerfectForward(T&amp;&amp; t)&gt;&#123;   Fun(std::move(t));&gt;&#125;\n\n\n\nè€Œå®Œç¾è½¬å‘çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†å°†å³å€¼ä¿æŒå…¶å³å€¼å±æ€§ï¼Œä¾æ—§è°ƒç”¨å³å€¼å¯¹åº”çš„å‡½æ•°ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼Œä½¿ç”¨forwardå‡½æ•°è¿›è¡Œå®Œç¾è½¬å‘\ntemplate&lt;typename T&gt;void PerfectForward(T&amp;&amp; t)&#123;    Fun(std::forward&lt;T&gt;(t));&#125;\n\nè¿™æ—¶å€™ç¬¬äºŒç§æƒ…å†µå°±æ­£ç¡®æ‰ç”¨äº†å¯¹åº”çš„å³å€¼å¼•ç”¨å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰æ”¹å˜å·¦å€¼çš„å±æ€§\n\nå†æŠŠå‡½æ•°æ”¹æˆæˆ‘ä»¬è‡ªå·±å†™çš„stringï¼Œä¹Ÿèƒ½çœ‹å‡ºå®Œç¾è½¬å‘çš„ä½œç”¨\ntemplate&lt;typename T&gt;void PerfectForward(T&amp;&amp; t)&#123;\tmuxue::string s = std::forward&lt;T&gt;(t);&#125;\n\n\n\n5.1 ä½¿ç”¨åœºæ™¯æœ‰äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå‡½æ•°ä¼ å…¥ä¸åŒç±»å‹çš„å‚æ•°ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ä¸‡èƒ½å¼•ç”¨+å®Œç¾è½¬å‘æ¥è¿›è¡Œä¸åŒçš„å¤„ç†\næ¯”è¾ƒå…¸å‹çš„ä¾¿æ˜¯å¾ˆå¤šSTLå®¹å™¨éƒ½æä¾›äº†ä¸€ä¸ªæ–°çš„å°¾æ’å‡½æ•°emplace_back\n\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nè¿™é‡Œä¾¿ä½¿ç”¨äº†ä¸‡èƒ½å¼•ç”¨ï¼Œä»¥åŠå¯å˜æ¨¡æ¿å‚æ•°ï¼ˆåé¢ä¼šå†™é“ï¼‰\nåˆ©ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„stringè¿›è¡Œæ‰“å°ï¼Œå³å¯çœ‹å‡ºäºŒè€…çš„åŒºåˆ«\n\n\nemplace_backç›´æ¥è°ƒç”¨äº†æ„é€ å‡½æ•°\npush_back æ„é€ +ç§»åŠ¨æ„é€ \n\nå› ä¸ºç§»åŠ¨æ„é€ çš„æ•ˆç‡æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æ–¹å¼çš„å·®è·å¹¶ä¸ç®—å¾ˆå¤§ã€‚ä¸è¿‡å·®è·è‚¯å®šæ˜¯æœ‰çš„ï¼Œå¦‚æœä¸ºäº†å…¼å®¹æ€§ï¼Œä½¿ç”¨push_backè‚¯å®šæ›´å¥½ï¼Œå› ä¸ºemplaceæ˜¯C++11æ–°å¢çš„æ“ä½œ\n\n6.æ–°å¢çš„é»˜è®¤æˆå‘˜å‡½æ•°åœ¨åˆè¯†ç±»å’Œå¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä¾¿åœ¨åšå®¢ä¸­æåˆ°äº†C++çš„å‡ ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\næ„é€ å‡½æ•° \nææ„å‡½æ•° \næ‹·è´æ„é€ å‡½æ•° \næ‹·è´èµ‹å€¼é‡è½½ \nå–åœ°å€é‡è½½ \nconst å–åœ°å€é‡è½½\n\nåœ¨C++11ä¸­ä¹Ÿå¤šäº†ä¸¤ä¸ªæˆå‘˜å‡½æ•°ï¼Œé‚£ä¾¿æ˜¯å‰æ–‡æ‰€è®²è¿°çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\nä½†æ˜¯æƒ³è®©ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆç§»åŠ¨æ„é€ å¯æ²¡é‚£ä¹ˆå®¹æ˜“ï¼šåªæœ‰ä½ æ²¡æœ‰è‡ªå·±å®ç°ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¸”æ²¡æœ‰å®ç°ææ„å‡½æ•° ã€æ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼é‡è½½ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œç¼–è¯‘å™¨æ‰ä¼šå¸®ä½ æ•´ä¸€ä¸ªç§»åŠ¨æ„é€ å‡ºæ¥\n\nç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„ç§»åŠ¨æ„é€ ï¼šå¯¹äºå†…ç½®ç±»å‹ä¼šæ‰§è¡Œé€æˆå‘˜æŒ‰å­—èŠ‚æ‹·è´ï¼›å¯¹è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼Œåˆ™éœ€è¦çœ‹è¿™ä¸ªæˆå‘˜æ˜¯å¦å®ç°ç§»åŠ¨æ„é€ ï¼Œ å¦‚æœå®ç°äº†å°±è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œæ²¡æœ‰å®ç°å°±è°ƒç”¨æ‹·è´æ„é€ ã€‚\n\nåŒæ ·çš„ï¼Œç§»åŠ¨èµ‹å€¼ä¹Ÿéœ€è¦æ»¡è¶³ä¸Šé¢çš„æ¡ä»¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šå¸®ä½ ç”Ÿæˆã€‚\nclass TestB&#123;private:\tmuxue::string _s;\tint _a;public:\tTestB(const muxue::string&amp; s=&quot;&quot;, int a=0)\t\t:_s(s),\t\t_a(a)\t&#123;&#125;&#125;;void DefaultMoveCopy()&#123;\tTestB t1;\tcout &lt;&lt; endl;\tTestB t2 = t1;\tcout &lt;&lt; endl;\tTestB t3 = std::move(t1);\tcout &lt;&lt; endl;\tTestB t4;\tt4 = std::move(t2);\tcout &lt;&lt; endl;&#125;\n\né€šè¿‡æµ‹è¯•å¯ä»¥çœ‹å‡ºæ¥ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆäº†ç§»åŠ¨æ‹·è´å’Œç§»åŠ¨èµ‹å€¼é‡è½½ã€‚å¹¶è°ƒç”¨äº†è‡ªå®šä¹‰ç±»å‹çš„ç§»åŠ¨æ‹·è´/ç§»åŠ¨èµ‹å€¼\n\n6.1 å…³é”®å­—default\nè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨ä¹‹å‰å¥½åƒè®°å½•è¿‡? ä¸è®°å¾—äº†\n\ndefaultå…³é”®å­—çš„ä½œç”¨æ˜¯è®©ç¼–è¯‘å™¨å¼ºåˆ¶ç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„æˆå‘˜å‡½æ•°\nè¿˜æ˜¯ä¸Šé¢çš„TestBç±»çš„ä»£ç ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨å°±ä¸å†ä¼šç”Ÿæˆé»˜è®¤çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼ï¼Œè€Œæ˜¯ä¼šå»è°ƒç”¨stringé‡Œé¢çš„æ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼\n\nè¿™æ—¶å€™æˆ‘ä»¬å¤ªæ‡’äº†ï¼Œä¸æƒ³è‡ªå·±å†™ç§»åŠ¨ç‰ˆæœ¬äº†ï¼Œäºæ˜¯å°±ç”¨defaultå¼ºåˆ¶è®©ç¼–è¯‘å™¨å¹²æ´»\n\nç°åœ¨å°±æ­£ç¡®è°ƒç”¨äº†å¯¹åº”çš„ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼äº†ï¼\n\n7.å¯å˜æ¨¡æ¿å‚æ•°åœ¨5.1æåˆ°çš„emplace_backå‡½æ•°ä¸­ï¼Œä¾¿å‡ºç°äº†ä¸‹é¢è¿™ç§è¯­æ³•\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nè¿™å°±æ˜¯ä¸€ä¸ªå¯å˜çš„æ¨¡æ¿å‚æ•°ï¼Œå…è®¸ä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œä¸”ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹\nä½¿ç”¨sizeofå³å¯æŸ¥çœ‹å‚æ•°çš„ä¸ªæ•°\n\n7.1 é€’å½’è§£å‚æ•°åŒ…è€Œå¦‚æœä½ æƒ³æŸ¥çœ‹å‚æ•°çš„ç±»å‹å¹¶ä½¿ç”¨å®ƒï¼Œåˆ™éœ€è¦è¿›è¡Œé€’å½’å–å‡ºå‚æ•°æ¥\ntemplate &lt;class T&gt;void ShowArgs(const T&amp; val)&#123;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;&#125;template &lt;class T,class... Args&gt;void ShowArgs(const T&amp;val,Args&amp;&amp;... args)&#123;\t//cout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;\tShowArgs(args...);&#125;void TestArgs()&#123;\tShowArgs(1, &#x27;x&#x27;, 2.3, muxue::string(&quot;123&quot;));&#125;\n\n\nå…¶ä¸­void ShowArgs(const T&amp; val)å‡½æ•°çš„ä½œç”¨ï¼Œæ˜¯å½“å‚æ•°åŒ…ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨å¯¹åº”çš„å•å‚å‡½æ•°ï¼Œè€Œä¸ä¼šæŠ¥é”™\nå¦å¤–ä¸€ç§åŠæ³•ä¾¿æ˜¯æä¾›ä¸€ä¸ªæ— å‚çš„åŒåå‡½æ•°ï¼Œç”¨ä½œå‚æ•°åŒ…é€’å½’çš„ç»“å°¾\n\né”™è¯¯è§£æ³•å¯èƒ½æœ‰äººæƒ³ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•æ¥è§£åŒ…ï¼Œå½“å‚æ•°åŒ…é‡Œçš„å‡½æ•°åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œç»“æŸé€’å½’\n\nä½†æ˜¯è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼\n\né€’å½’æ¨å‚æ•°åŒ…æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶é€»è¾‘\né€šè¿‡sizeofåˆ¤æ–­æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶é€»è¾‘\n\nåœ¨ç¼–è¯‘è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå·²ç»å¼€å§‹æ‰¾å¯¹åº”çš„å‡½æ•°è¿›è¡Œè°ƒç”¨äº†ã€‚å½“å‚æ•°åŒ…é‡Œé¢çš„å‚æ•°åªæœ‰1ä¸ªæˆ–è€…0ä¸ªçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶å€™å‘ç°æ‰¾ä¸åˆ°å¯¹åº”å‡½æ•°ï¼Œå°±ç›´æ¥æŠ¥é”™äº†ã€‚\n7.2 æ•°ç»„è§£åŒ…é™¤äº†ä¸Šé¢çš„é€’å½’è§£åŒ…ï¼Œè¿™é‡Œè¿˜å¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ–¹å¼ç›´æ¥æ¥è§£åŒ…\ntemplate &lt;class... Args&gt;void ShowArgs(Args&amp;&amp;... args)&#123;\tcout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\tint arr[] = &#123; args... &#125;;&#125;void TestArgs()&#123;\tShowArgs(1, 2, 3, 4);&#125;\n\nå¯ä»¥çœ‹åˆ°arræ•°ç»„é‡Œé¢è§£åŒ…å‡ºäº†ä¼ å…¥çš„å‚æ•°\n\nä½†æ˜¯è¿™ç§æ–¹æ³•ä¸é€šç”¨ï¼Œåªé€‚ç”¨äºæ‰€æœ‰å‚æ•°éƒ½æ˜¯ç›¸åŒç±»å‹çš„æƒ…å†µï¼Œå¦‚æœæ˜¯ä¸åŒç±»å‹åˆ™ä¼šæŠ¥é”™\n\né€šç”¨åŠæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªé€—å·è¡¨è¾¾å¼ï¼Œæ¥è·å–ä¸€å…±æœ‰å¤šå°‘ä¸ªå‚æ•°ä»¥åŠè§£åŒ…\ntemplate &lt;class T&gt;void PrintArgs(const T&amp; val)&#123;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;&#125;template &lt;class... Args&gt;void ShowArgs(Args&amp;&amp;... args)&#123;\tcout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\t//int arr[] = &#123; args... &#125;;\tint arr[] = &#123; (PrintArgs(args),0)... &#125;;&#125;\n\nä¸€å…±æœ‰å¤šå°‘ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæ•°ç»„é‡Œé¢å°±ä¼šæœ‰å¤šå°‘ä¸ª0\n\n7.3 emplace_backstdå®¹å™¨çš„åº“å‡½æ•°ä¸­emplace_backçš„å‚æ•°åŒ…è¿˜ä½¿ç”¨äº†ä¸‡èƒ½å¼•ç”¨ï¼Œè¿™å°±è®©å®ƒçš„ä½¿ç”¨æ›´åŠ çµæ´»\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nå¯ä»¥ç›´æ¥ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä»–ä¼šè‡ªåŠ¨è§£åŒ…å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹\nstd::list&lt;std::pair&lt;int, muxue::string&gt;&gt; t;t.emplace_back(10, &quot;sort&quot;);\n\nè€Œpush_backåˆ™ä¸æ”¯æŒè¿™ä¹ˆå¹²\n\n\n8.lambdaè¡¨è¾¾å¼åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨sortçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯å†…ç½®ç±»å‹ï¼Œé»˜è®¤ä¼šè¿”å›ä¸€ä¸ªå‡åºåºåˆ—ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è¿”å›é™åºï¼Œåˆ™éœ€è¦æ”¹å˜æ¯”è¾ƒè§„åˆ™ï¼Œä¼ å…¥ä¸€ä¸ªä»¿å‡½æ•°æ¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒå¯¹æ¯”\n#include &lt;algorithm&gt;//sort#include &lt;functional&gt;//greaterint main()&#123;\tint arr[]=&#123;1,3,2,5,4&#125;;    int sz=sizeof(arr)/sizeof(arr[0]);    //é»˜è®¤å‡åº\tstd::sort(arr,arr+sz);    //é™åºä¼ å…¥ä»¿å‡½æ•°greater    std::sort(arr,arr+sz,greater&lt;int&gt;());&#125;\n\nå› ä¸ºintæ˜¯å†…ç½®ç±»å‹ï¼Œåº“ä¸­è‡ªå¸¦çš„greater/lessä»¿å‡½æ•°å³å¯æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚è€Œå¦‚æœæˆ‘ä»¬æ’åºçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªå¯¹åº”çš„ä»¿å‡½æ•°\n//ä»·æ ¼é™åºstruct CompPriceGreater&#123;\tbool operator()(const Goods&amp; g1, const Goods&amp; g2)\t&#123;\t\treturn g1._price &gt; g2._price;\t&#125;&#125;;//ä»·æ ¼å‡åºstruct CompPriceLess &#123;\tbool operator()(const Goods&amp; g1, const Goods&amp; g2)\t&#123;\t\treturn g1._price &lt; g2._price;\t&#125;&#125;;\n\n\n8.1 æƒ…æ™¯æè¿°ä½†æ˜¯å¦‚æœéœ€è¦å¤„ç†çš„å¯¹è±¡æœ‰å¾ˆå¤šä¸åŒçš„æˆå‘˜å˜é‡çš„æ—¶å€™ï¼ˆæ¯”å¦‚äº¬ä¸œæ·˜å®ä¸Šå•†å“ä¸åŒçš„ç­›é€‰æ–¹å¼ï¼‰æˆ‘ä»¬å°±éœ€è¦å®ç°éå¸¸éå¸¸å¤šçš„ä»¿å‡½æ•°\nè¿™æ ·ä¸€æ¥ï¼Œç¨‹åºçš„ä»£ç è¡Œæ•°å°±ä¼šå˜å¤š\nåœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œè¿™ç§é—®é¢˜è¿˜ç®—å¥½è§£å†³ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè·³è½¬é“å‡½æ•°å®šä¹‰ã€‚ä½†å¦‚æœæˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½å¯ç”¨ï¼Œåœ¨å¤„ç†å¤§æ–‡æœ¬ä»£ç çš„æ—¶å€™ï¼Œæ€ä¹ˆå¾ˆå¿«çš„æ‰¾åˆ°å¯¹åº”çš„ä»¿å‡½æ•°å‘¢ï¼Ÿ\nç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®åˆä½œçš„æ—¶å€™ï¼Œä¸‡ä¸€æœ‰ä¸ªå®¶ä¼™ç¼–ç¨‹å‘½åè§„èŒƒå¾ˆå·®åŠ²ï¼Œæˆ‘ä»¬æ— æ³•ä»å‡½æ•°åæ¨æ–­å‡½æ•°åŠŸèƒ½ï¼Œå†åŠ ä¸Šä¸èƒ½ç›´æ¥è·³è½¬å®šä¹‰ï¼Œé‚£éº»çƒ¦äº‹å¯å¤šäº†ã€‚\n\n8.2 lambdaå‡ºåœºè¿™æ—¶å€™å°±å¯ä»¥è¯•è¯•ç”¨lambdaè¡¨è¾¾å¼æ‹‰ï¼Œä»¥ä¸‹æ˜¯lambdaè¡¨è¾¾å¼çš„ä¹¦å†™æ ¼å¼\n[capture-list](parameters)mutable -&gt; return-type&#123;statement&#125;\n\nè¯´æ˜ä¸€ä¸‹å„ä¸ªä½ç½®åˆ†åˆ«å†™çš„æ˜¯å•¥ç©æ„\n\n[capture-list]æ•æ‰åˆ—è¡¨ï¼Œç”¨äºç¼–è¯‘å™¨åˆ¤æ–­ä¸ºlambdaè¡¨è¾¾å¼ï¼ŒåŒæ—¶æ•æ‰è¯¥è¡¨è¾¾å¼æ‰€åœ¨åŸŸçš„å˜é‡ä»¥ä¾›å‡½æ•°ä½¿ç”¨\n(parameters)å‚æ•°ï¼Œå’Œå‡½æ•°çš„å‚æ•°ä¸€è‡´ã€‚å¦‚æœä¸éœ€è¦ä¼ å‚åˆ™å¯è¿å¸¦()ä¸€èµ·çœç•¥\nmutableé»˜è®¤æƒ…å†µä¸‹æ•æ‰åˆ—è¡¨æ•æ‰çš„å‚æ•°æ˜¯constä¿®é¥°çš„ï¼Œè¯¥å…³é”®å­—çš„ä½œç”¨æ˜¯å–æ¶ˆconstä½¿å…¶å¯ä¿®æ”¹\n-&gt; return-typeå‡½æ•°è¿”å›å€¼ç±»å‹\n&#123;statement&#125;å‡½æ•°ä½“ï¼Œå’Œæ™®é€šå‡½æ•°ä¸€æ ·ã€‚é™¤äº†å¯ä»¥ä½¿ç”¨ä¼ å…¥çš„å‚æ•°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•æ‰åˆ—è¡¨è·å–çš„å‚æ•°\n\n8.3 åŸºæœ¬ä½¿ç”¨å…ˆæ¥å†™ä¸€ä¸ªæœ€ç®€å•çš„lambdaè¡¨è¾¾å¼è¯•è¯•æ°´å§\nauto Add = [](int a, int b) &#123;return a + b; &#125;;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•å’Œå‡½æ•°å®Œå…¨ä¸€è‡´ï¼Œä¹ŸæˆåŠŸæä¾›äº†ç»“æœ\nå› ä¸ºæˆ‘ä»¬è¿”å›å€¼çš„ç±»å‹æ˜¯æ˜ç¡®çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥çœç•¥ç±»å‹ï¼Œè®©ç¼–è¯‘å™¨è‡ªå·±æ¥æ¨æ–­ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ›´ç²¾ç¡®çš„æ§åˆ¶\n\n\nlambdaè¡¨è¾¾å¼è¿˜æ”¯æŒå¤åˆ¶ç»™ç›¸åŒç±»å‹çš„å‡½æ•°æŒ‡é’ˆï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½ä¸è¦è¿™ä¹ˆç”¨ï¼\nvoid(*PF)();PF = f2;PF();\n\n\n8.4 æ•æ‰åˆ—è¡¨å’Œmutableå­¦ä¼šäº†åŸºæœ¬ä½¿ç”¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ•æ‰åˆ—è¡¨æ˜¯æ€ä¹ˆç©çš„\nvoid TestLambda1()&#123;\tint a = 10, b = 20;\tauto func3 = [a,b](int x, int y)-&gt;int &#123;\t\treturn a+b;\t&#125;;\tcout&lt;&lt;func3(a, b)&lt;&lt;endl;&#125;\n\n\nè¿™é‡Œæˆ‘ä»¬æ•æ‰äº†å‡½æ•°ä½œç”¨åŸŸé‡Œé¢çš„å±€éƒ¨å˜é‡a/bï¼Œç›´æ¥åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä½¿ç”¨ğŸ‘\nå› ä¸ºä¸éœ€è¦ä¼ å…¥å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‚æ•°()å’Œè¿”å›å€¼ä¸€å¹¶çœç•¥æ‰\n\nmutableé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ•æ‰åˆ°çš„å‚æ•°æ˜¯å¸¦constçš„ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚\n\nè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨å‰é¢æåˆ°çš„mutableå…³é”®å­—æ¥ä¿®é¥°\n\næ³¨æ„ï¼šè¿™ä¸ªå…³é”®å­—ä½¿ç”¨çš„æ—¶å€™å¿…é¡»å¸¦ä¸Šå‡½æ•°å‚æ•°çš„()\n\nauto func5 = [a, b]()mutable &#123;    a++;    b++;    return a + b;&#125;;\n\n\n\n8.5 æ•è·çš„å‡ ç§æ–¹å¼æ³¨æ„ï¼Œå½“æˆ‘ä»¬åœ¨å¯¹è±¡é‡Œé¢ä»¥å€¼ä¼ é€’æ–¹å¼æ•è·å‚æ•°çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ•è·thisæŒ‡é’ˆæ¥è°ƒç”¨ç±»å†…éƒ¨çš„å‡½æ•°\n[val]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å˜é‡val[=]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[&amp;val]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰å˜é‡val[&amp;]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[this]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å½“å‰çš„thisæŒ‡é’ˆ\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ¼”å¼çš„[a,b]è¿™æ ·æœ€ç›´æ¥çš„å€¼æ•è·\nè€Œæœ€åä¸€ä¸ªçš„thisæŒ‡é’ˆä¸»è¦ç”¨ç”¨äºç±»å†…éƒ¨\n8.5.1 å…¨æ•è·&#x3D;å½“ä¸€ä¸ªä½œç”¨åŸŸé‡Œé¢çš„å˜é‡å¾ˆå¤šï¼Œè€Œæˆ‘ä»¬åˆä¸æƒ³ä¸€ä¸ªä¸€ä¸ªå†™çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨=æ•æ‰å…¨éƒ¨å˜é‡\nint a = 10, b = 20;int c = 1, d = 3, e = 5;auto func6 = [=] &#123;    return (a + b + c + d + e);&#125;;cout &lt;&lt; func6() &lt;&lt; endl;\n\n\n8.5.2 å¼•ç”¨å…¨æ•æˆ–é™¤äº†åŸºæœ¬çš„å…¨æ•æˆ–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸€ä¸ª&amp;ä»¥å¼•ç”¨çš„æ–¹å¼æ•è·å…¨éƒ¨å‚æ•°ã€‚\n\nå¼•ç”¨äº†è¿‡åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹å‚æ•°äº†\n\n8.5.3 å…¨æ•è·+å•ç‹¬æ“ä½œå¦‚æœåªæ˜¯ä»…ä»…çš„å…¨æ•æˆ–è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æƒ³å•ç‹¬ä¿®æ”¹æŸä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œæ•è·æ“ä½œ\n\nauto func8 = [=,&amp;e] &#123;\te++;\treturn (a + b + c + d + e);&#125;;\n\n\nè¿™æ ·ä¸€æ¥å°±æ–¹ä¾¿å¤šäº†\n8.6 æœ€ç»ˆå‘ˆç°è¿™æ ·ï¼Œå½“æˆ‘ä»¬sortçš„æ—¶å€™ï¼Œå°±ä¸å†éœ€è¦ç”¨ä»¿å‡½æ•°äº†ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ç”¨lambdaè¡¨è¾¾å¼æ¥å®Œæˆç›¸åŒçš„æ“ä½œï¼Œå¤§å¤§å¢åŠ ä»£ç å¯è¯»æ€§ï¼\nè¿™æ˜¯å› ä¸ºæ’åºæ‰€ç”¨çš„æ–¹æ³•ç›´æ¥å°±åœ¨sortè¿™é‡Œç”¨lambdaçš„å½¢å¼ç»™å‡ºäº†ï¼Œçœ‹ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦å»æ‰¾å®šä¹‰ï¼Œæ›´ä¸ç”¨æ‹…å¿ƒå‡½æ•°å‘½åè§„åˆ™çš„é—®é¢˜äº†ã€‚\nvector&lt;Goods&gt; v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//ä»·æ ¼å‡åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._price &lt; g2._price; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//ä»·æ ¼é™åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._price &gt; g2._price; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//åç§°å­—å…¸åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._name &lt; g2._name; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;\n\n\n8.7 lambdaåº•å±‚ï¼šä»¿å‡½æ•°å®é™…ä¸Šï¼Œlambdaçš„åº•å±‚å°±æ˜¯æŠŠè‡ªå·±è½¬æˆäº†ä¸€ä¸ªä»¿å‡½æ•°ä¾›æˆ‘ä»¬è°ƒç”¨ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä½•sortå¯ä»¥ä»¥lambdaæ¥ä½œä¸ºæ’åºæ–¹æ³•çš„åŸå› â€”â€”åº•å±‚éƒ½æ˜¯ä»¿å‡½æ•°å˜›ï¼\n\n\n9.åŒ…è£…å™¨functionfunctionåŒ…è£…å™¨ï¼Œä¹Ÿå«ä½œé€‚é…å™¨ã€‚C++ä¸­çš„functionæœ¬è´¨æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŒ…è£…å™¨ã€‚\né‚£ä¹ˆè¿™ä¸ªä¸œè¥¿æ˜¯ç”¨æ¥å¹²å•¥çš„å‘¢ï¼Ÿ\n\næŠŠæ‰€æœ‰çš„å¯è°ƒç”¨å¯¹è±¡å°è£…æˆç»Ÿä¸€çš„æ ¼å¼\n\nä»€ä¹ˆæ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Ÿ\n\nå‡½æ•°æŒ‡é’ˆ\nä»¿å‡½æ•°å¯¹è±¡\nlambdaè¡¨è¾¾å¼\n\n9.1 åŸºæœ¬ä½¿ç”¨æˆ‘ä»¬å¯ä»¥ç”¨functionæ¥åŒ…è£…è¿™äº›ä¸åŒçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œè¯´ç™½äº†å°±æ˜¯äº§ç”Ÿäº†å¦å¤–ä¸€ä¸ªç›¸åŒçš„å¯è°ƒç”¨å¯¹è±¡ã€‚ç±»ä¼¼äºâ€œå¼•ç”¨â€äº†è¿™ä¸ªå‡½æ•°\nclass AddClass&#123;public:\tstatic int Addi(int a, int b)&#123;\t\treturn a + b;\t&#125;\tdouble Addd(double a, double b)&#123;\t\treturn a + b;\t&#125;&#125;;int func(int a,int b)&#123;\treturn a + b;&#125;struct Functor&#123;\tint operator()(int a,int b)&#123;\t\treturn a+b;\t&#125;&#125;;void TestFunction1()&#123;\t// å‡½æ•°\tfunction&lt;int(int, int)&gt; func1 = func;\tcout &lt;&lt; func1(10, 20) &lt;&lt; endl;\t// ä»¿å‡½æ•°\tfunction&lt;int(int, int)&gt; func2 = Functor();\tcout &lt;&lt; func2(10, 20) &lt;&lt; endl;\t// ç±»ä¸­staticæˆå‘˜å‡½æ•°\tfunction&lt;int(int, int)&gt; func3 = AddClass::Addi;\tcout &lt;&lt; func3(100, 200) &lt;&lt; endl;\t// ç±»ä¸­éé™æ€æˆå‘˜å‡½æ•°\tfunction&lt;double(AddClass, double, double)&gt; func4 = &amp;AddClass::Addd;\tcout &lt;&lt; func4(AddClass(), 100.11, 200.11) &lt;&lt; endl;\t// lambdaè¡¨è¾¾å¼\tfunction&lt;int(int, int)&gt; func5 = [](int a, int b) &#123;return a + b; &#125;;\tcout &lt;&lt; func5(100, 200) &lt;&lt; endl;&#125;\n\n\nå¼•ç”¨ç±»ä¸­éstaticæˆå‘˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»è¦å¸¦ä¸Šä¸€ä¸ªthisæŒ‡é’ˆæ‰èƒ½å¾ˆå¥½çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç©¿å…¥ä¸€ä¸ªAddClass()çš„åŒ¿åå¯¹è±¡æ¥é€‚é…åŒ…è£…å™¨\nåŒæ—¶ï¼Œéé™æ€çš„æˆå‘˜å‡½æ•°è¿˜å¿…é¡»è¦è¿›è¡Œ&amp;å–åœ°å€æ“ä½œã€‚é™æ€çš„åˆ™å¯ä»¥ä¸åŠ \n\nä¸ºäº†ç»Ÿä¸€ï¼Œå¯ä»¥éƒ½åŠ ä¸Šä»¥é˜²å¿˜è®°\n\n\n9.2 ç‰¹æ®Šåœºæ™¯çš„ä½œç”¨è¿™ä¸ªä¸œè¥¿å‘¢ï¼Œçœ‹èµ·æ¥å¥½åƒæ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨ä¸€äº›åœ°æ–¹å¯ä»¥å¸®å¤§å¿™\næ¯”å¦‚æ¨¡æ¿å‡½æ•°ï¼Œå‡è®¾æˆ‘ä»¬çŸ¥é“åœ¨å‡½æ•°Bé‡Œé¢éœ€è¦è°ƒç”¨ä¸€ä¸ªæ¨¡æ¿å‡½æ•°Aå¤šæ¬¡ï¼Œè€Œä¸”æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼ˆæˆ–è€…è¯´å°±åªæœ‰å·²çŸ¥çš„å‡ ä¸ªç‰¹å®šç±»å‹ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥å…ˆç”¨fuctionå¯¹è¿™ä¸ªæ¨¡æ¿å‡½æ•°è¿›è¡ŒæŒ‡å®šçš„å®ä¾‹åŒ–ï¼Œé¿å…æ¯ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œåå°éƒ½éœ€è¦å•ç‹¬å»å®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œå‡å°æ¨¡æ¿çš„æ€§èƒ½æŸè€—ï¼\n9.3 æ”¹é€ é€†æ³¢å…°è¡¨è¾¾å¼OJ\nleetcodeé€†æ³¢å…°è¡¨è¾¾å¼ï¼šhttps://leetcode.cn/problems/evaluate-reverse-polish-notation/\n\nä¹‹å‰å†™è¿™ä¸ªOJçš„æ—¶å€™ï¼Œæˆ‘ç”¨çš„æ˜¯æ ˆå’Œswitch/caseè¯­å¥\nclass Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                switch(ch[0])                &#123;                    case &#x27;+&#x27;:                        s.push(left+right);                        break;                    case &#x27;-&#x27;:                        s.push(left-right);                        break;                    case &#x27;*&#x27;:                        s.push(left*right);                        break;                    case &#x27;/&#x27;:                        s.push(left/right);                        break;                    default:                        break;                &#125;            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\nç°åœ¨æˆ‘ä»¬å°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ï¼Œå¯ä»¥ä½¿ç”¨åŒ…è£…å™¨æ¥æ”¹é€ è¿™ä¸ªOJé¢˜çš„ç­”æ¡ˆ\nclass Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        map&lt;string,function&lt;int(int,int)&gt;&gt; FuncMap = &#123;            &#123;&quot;+&quot;,[](int x,int y)&#123;return x+y;&#125;&#125;,            &#123;&quot;-&quot;,[](int x,int y)&#123;return x-y;&#125;&#125;,            &#123;&quot;*&quot;,[](int x,int y)&#123;return x*y;&#125;&#125;,            &#123;&quot;/&quot;,[](int x,int y)&#123;return x/y;&#125;&#125;        &#125;;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                int ret = FuncMap[ch](left,right);                s.push(ret);            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\nè¿™é‡Œæˆ‘ä»¬è¿˜ç”¨åˆ°äº†å‰é¢æåˆ°è¿‡çš„&#123;&#125;åˆå§‹åŒ–æ„é€ ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦ä»funcmapé‡Œé¢å–å‡ºå°è£…å™¨å°è£…çš„lambdaè¡¨è¾¾å¼è¿›è¡Œæ“ä½œå°±å¯ä»¥äº†ï¼\nä»£ç ä¸€ä¸‹å°±ç®€æ´äº†è®¸å¤šï¼Œä½†æ˜¯è¿™ä¹Ÿåªæœ‰å­¦ä¹ è¿‡C++11çš„äººæ‰çœ‹å¾—æ‡‚ï¼Œå±äºä¸€ä¸ªè¿›é˜¶ç”¨æ³•\n\næµ‹è¯•çš„æ—¶å€™å‘ç°å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œintæº¢å‡ºäº†\n\næŠŠæ‰€æœ‰çš„intéƒ½æ”¹æˆlong longå³å¯\n\n\n10.bindç»‘å®šåœ¨ä¸Šé¢æˆ‘ä»¬ç”¨fuctionåŒ…è£…ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œéœ€è¦åˆ©ç”¨åŒ¿åå¯¹è±¡ä¼ å…¥ä¸€ä¸ªthisæŒ‡é’ˆã€‚è¿™æ ·å°±å¾ˆä¸æ–¹ä¾¿äº†ï¼Œæ˜æ˜æ˜¯ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œéè¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚\nè¦æ˜¯æˆ‘ä»¬å†ç”¨9.3ä¸­mapçš„æ–¹å¼æ¥å°è£…ä¸€ä¸ªå¯è°ƒç”¨çš„è¡¨ï¼Œé‚£å¸¦thisæŒ‡é’ˆçš„å‡½æ•°å°±æ²¡åŠæ³•ä¸€èµ·åŒ…è£…äº†\nclass AddClass&#123;public:\tstatic int Addi(int a, int b)\t&#123;\t\treturn a + b;\t&#125;\tint Addii(int a, int b)\t&#123;\t\treturn a + b;\t&#125;&#125;;int func(int a,int b)&#123;\treturn a + b;&#125;struct Functor&#123;\tint operator()(int a,int b)\t&#123;\t\treturn a+b;\t&#125;&#125;;map&lt;string, function&lt;int(int, int)&gt;&gt; FuncMap = &#123;    &#123;&quot;å‡½æ•°&quot;,func&#125;,    &#123;&quot;ä»¿å‡½æ•°&quot;,Functor()&#125;,    &#123;&quot;é™æ€æˆå‘˜å‡½æ•°&quot;,AddClass::Addi&#125;,    &#123;&quot;éé™æ€æˆå‘˜å‡½æ•°&quot;,&amp;AddClass::Addii&#125;&#125;;\n\nå¦‚å›¾ï¼Œæœ€åaddclassä¸­çš„éé™æ€å‡½æ•°ï¼Œå°±æ²¡æœ‰åŠæ³•ä¸€åŒåŒ…è£…åˆ°mapä¸­\n\n\nè¿™é‡Œä¸èƒ½ä½¿ç”¨å¯å˜å‚æ•°åŒ…ï¼Œå› ä¸ºæ˜¯å®ä¾‹åŒ–æ“ä½œ\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨bindæ¥è¿›è¡Œå‚æ•°ç»‘å®š\n10.1 ä½¿ç”¨bindå¯ä»¥è°ƒæ•´å‚æ•°çš„é¡ºåºï¼Œç»‘å®šå›ºæœ‰å‚æ•°ï¼›æœ€åå½¢æˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ã€‚\nbindçš„ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®šéœ€è¦ç»‘å®šçš„å‡½æ•°ï¼Œåé¢å°±æ˜¯ç»‘å®šçš„å‚æ•°ï¼Œå’Œéœ€è¦è‡ªå·±ä¼ å…¥çš„å‚æ•°\nfunction&lt;int(int, int)&gt; func7 = bind(&amp;AddClass::Addii,AddClass(), placeholders::_1, placeholders::_2);cout &lt;&lt; func7(100, 200) &lt;&lt; endl;\n\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±ä¸éœ€è¦ä¼ å…¥thisæŒ‡é’ˆï¼Œå› ä¸ºå½“æˆ‘ä»¬ç”¨bindç»‘å®šçš„æ—¶å€™ï¼Œå·²ç»é»˜è®¤ä¼ å…¥äº†ç¬¬ä¸€ä¸ªå‚æ•°äº†ï¼\n10.2 å ä½ç¬¦placeholdersplaceholdersæ˜¯ç”¨æ¥å ä½çš„ï¼Œä»£è¡¨è¿™é‡Œçš„å‚æ•°éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ä¼ å…¥ï¼Œè€Œ_1ä»£è¡¨ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ_2å°±æ˜¯ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨\nfunction&lt;int(int, int)&gt; func7 = bind(&amp;AddClass::Addii,AddClass(), placeholders::_1, placeholders::_2);\n\nå› ä¸ºæœ‰ä¸åŒçš„åç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è°ƒæ•´ç»‘å®šçš„å‚æ•°é¡ºåºï¼\n//Miniiçš„ä½œç”¨æ˜¯a-bfunction&lt;int(int, int)&gt; func8 = bind(&amp;AddClass::Minii, AddClass(), placeholders::_1, placeholders::_2);cout &lt;&lt; func8(100, 200) &lt;&lt; endl;function&lt;int(int, int)&gt; func9 = bind(&amp;AddClass::Minii, AddClass(), placeholders::_2, placeholders::_1);cout &lt;&lt; func9(100, 200) &lt;&lt; endl;\n\n\næˆ‘ä»¬è°ƒæ•´äº†é¡ºåºä¹‹åï¼Œä¹Ÿå¾—åˆ°äº†ä¸åŒçš„ç»“æœï¼\n\nç»“è¯­æœ¬ç¯‡è¶…é•¿çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸè¾£ï¼\nå…¶å®C++11è¿˜æœ‰å…¶ä»–çš„æ–°ç‰¹æ€§ï¼Œä½†æ˜¯é‚£äº›æˆ‘ä¼šå•å¼€ä¸€ç¯‡æ–‡ç« æ¥å†™~\n\n","categories":["é‡è§C++"],"tags":["C++","æ•°æ®ç»“æ„","C++11"]},{"title":"ã€C++ã€‘æ™ºèƒ½æŒ‡é’ˆï¼ˆç©ºï¼‰","url":"/2022/10/19/note_cpp/22%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88-%E7%A9%BA/","content":"æˆ‘ä¹Ÿä¸çŸ¥é“å•¥æ—¶å€™èƒ½è¡¥ä¸Šè¿™ä¸ªâ€¦â€¦\n","categories":["é‡è§C++"],"tags":["C++","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘å¼‚å¸¸å¤„ç†","url":"/2022/10/03/note_cpp/21%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹C++ä¸­å¯¹äºå¼‚å¸¸çš„å¤„ç†æœºåˆ¶\n\n\n[TOC]\n1.æ¦‚å¿µ1.1 Cè¯­è¨€å¯¹äºå¼‚å¸¸çš„å¤„ç†åœ¨ä¹‹å‰æˆ‘ä»¬é‡åˆ°ä¸€äº›bugçš„æ—¶å€™ï¼Œé€šå¸¸ä¼šç”¨ifåˆ¤æ–­æˆ–è€…assertæ–­è¨€ç­‰é—®é¢˜è¿›è¡Œå¤„ç†ã€‚ä½†è¿™ç§æ–¹å¼å¤ªè¿‡æš´åŠ›ï¼Œä¼šç›´æ¥ä¸­æ–­ç¨‹åºçš„è¿è¡Œ\nå¦å¤–ä¸€ç§åŠæ³•æ˜¯è¿”å›é”™è¯¯ç ï¼ŒCè¯­è¨€çš„æŠ¥é”™å¤§å¤šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ä¸è¿‡è¿™éœ€è¦ç¨‹åºçš„ç”¨æˆ·è‡ªå·±å»æŸ¥å¯¹åº”çš„é”™è¯¯ç è¡¨æ ¼ï¼Œè¾ƒä¸ºéº»çƒ¦\n\n1.2 C++å¼‚å¸¸æ‰€è°“å¼‚å¸¸ï¼Œä¾¿æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„bugæˆ–è€…é—®é¢˜ã€‚ç¨‹åºå¯ä»¥æœ‰é€‰æ‹©åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå‘ŠçŸ¥ç”¨æˆ·ç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜ã€‚\nC++æ ‡å‡†åº“ä¸­ä¾¿ä½¿ç”¨äº†ä¸€ä¸ªexceptionç±»æ¥è¿›è¡Œå¼‚å¸¸çš„å¤„ç†ï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºä¸­é‡åˆ°çš„ä¸€äº›æŠ¥é”™ï¼Œå…¶å®å°±æ˜¯æ ‡å‡†åº“é‡Œé¢æŠ›å‡ºäº†å¯¹åº”çš„å¼‚å¸¸\n\nå…¶æ“ä½œä¸»è¦å€ŸåŠ©ä¸‹é¢ä¸‰ä¸ªå…³é”®å­—\n\nthrow åœ¨å‡ºç°é—®é¢˜çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸\ntry ç›‘æ§åç»­ä»£ç ä¸­å‡ºç°çš„å¼‚å¸¸ï¼Œåç»­éœ€è¦ä»¥catchä½œä¸ºç»“å°¾\ncatch ç”¨äºæ•è·å¼‚å¸¸ï¼ŒåŒä¸€ä¸ªtryå¯ä»¥ç”¨å¤šä¸ªä¸åŒç±»å‹çš„catchè¿›è¡Œæ•è·\n\nthrowå…³é”®å­—å¯ä»¥æŠ›å‡ºä»»æ„ç±»å‹çš„å¼‚å¸¸\n2.åŸºæœ¬æ“ä½œä¸‹é¢ç”¨é™¤æ³•å‡½æ•°ï¼Œä»¥é™¤0çš„æƒ…å†µæ¥åšä¸€ä¸ªæœ€ç®€å•çš„æ¼”å¼\nint Div()&#123;\tint a, b;\tcin &gt;&gt; a &gt;&gt; b;\tif (b == 0)\t\tthrow &quot;div 0 err!&quot;;\treturn a / b;&#125;int main()&#123;\ttry &#123;\t\tcout &lt;&lt; Div() &lt;&lt; endl;\t&#125;\tcatch(const char* s)&#123;\t\tcout &lt;&lt; s &lt;&lt; endl;\t&#125;\treturn 0;&#125;\n\n\n2.1 éœ€è¦æ³¨æ„çš„ç‚¹è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\ncatchç±»å‹å¯¹åº”å½“æˆ‘ä»¬è¿›è¡ŒæŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œä¸€å®šéœ€è¦æœ‰å¯¹åº”ç±»å‹çš„catchï¼Œå¦åˆ™ä¼šæŠ¥é”™\næ¯”å¦‚æˆ‘ä»¬throwçš„æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œå¦‚æœç”¨stringæ¥catchï¼Œå°±ä¼šå› ä¸ºç±»å‹ä¸åŒ¹é…è€Œå‡ºç°æŠ¥é”™\n\næ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨æŸä¸€ä¸ªä¼šæŠ›å¼‚å¸¸çš„å‡½æ•°çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„å…¶æŠ›å‡ºå¼‚å¸¸çš„ç±»å‹\n\nåˆ©ç”¨â€¦è¿›è¡Œå…¨æ•è·å‡è®¾æˆ‘ä»¬ä¸çŸ¥é“è¿™é‡Œé¢ä¼šæŠ›å‡ºä»€ä¹ˆç±»å‹çš„é”™è¯¯å‘¢ï¼Ÿæ€»ä¸èƒ½æŠŠæ‰€æœ‰ç±»å‹éƒ½catchä¸€ä¸‹å§ï¼Ÿ\nå½“ç„¶ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°è¿›è¡Œå…¨æ•è·\n\nè¿™å°±å¯ä»¥ç”¨äºå½“æˆ‘ä»¬ä¸çŸ¥é“æŠ¥é”™ç±»å‹çš„æ—¶å€™ã€‚ä¸è¿‡ä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåœ¨è¿™ä¹‹å‰å…ˆcatchå·²çŸ¥çš„é”™è¯¯ç±»å‹ï¼Œæœ€åå†åŠ ä¸Šä¸€ä¸ªå…¨æ•æˆ–ï¼Œä½œä¸ºæœªçŸ¥é”™è¯¯çš„æ ‡è¯†\nä¸è¿‡catch(...)æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£ä¾¿æ˜¯æˆ‘ä»¬ä¸èƒ½çŸ¥é“å¼‚å¸¸çš„ç±»å‹\n\nåŸºç±»æ•è·æ´¾ç”Ÿç±»çš„å¼‚å¸¸å½“æˆ‘ä»¬å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œå¦‚æœthrowäº†ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå¯ä»¥ç”¨åŸºç±»çš„å¼•ç”¨æ¥æ¥æ”¶ï¼\nclass A &#123;\tint a;&#125;;class B : public A &#123;\tint b;public:\tB()\t\t:b(1)\t&#123;&#125;&#125;;void testab()&#123;\tB bt;\tthrow bt;&#125;int main()&#123;\ttry &#123;\t\ttestab();\t&#125;\tcatch (A&amp; e) &#123;\t\tcout &lt;&lt; &quot;err class A&quot; &lt;&lt; endl;\t&#125;\tcatch (...) &#123;\t\tcout &lt;&lt; &quot;err&quot; &lt;&lt; endl;\t&#125;\treturn 0;&#125;\n\n\nè¿™ä¸ªåœ¨è¿›è¡Œç»§æ‰¿å¤šæ€çš„é”™è¯¯ç¼–å†™çš„æ—¶å€™å°±å¾ˆæœ‰ç”¨å•¦\n2.2 å¼‚å¸¸å’Œæ ˆå¸§æŠ›å‡ºå¼‚å¸¸åï¼Œä¼šè¢«ç¦»è¿™ä¸ªå¼‚å¸¸æœ€è¿‘çš„catchæ•è·ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•catchåˆ™ä¼šæŠ¥é”™\n\næ¯”å¦‚æˆ‘ä»¬å•ç‹¬å†™ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä½“å†…æœ‰try/catchçš„è¯ï¼Œé‚£ä¹ˆä¼šç›´æ¥å’Œè¿™ä¸ªæœ€è¿‘çš„åŒ¹é…ï¼Œå¹¶ä¸ä¼šå’Œmainå‡½æ•°é‡Œé¢çš„åŒ¹é…\n\nè€Œå¦‚æœè¯¥å‡½æ•°é‡Œé¢æ²¡æœ‰è¿›è¡Œæ­¤æ“ä½œï¼Œåˆ™ä¼šç›´æ¥åˆ°mainçš„å¯¹åº”catchå¤„\n\næ³¨æ„ï¼è¿™é‡Œæ˜¯ç›´æ¥è·³è½¬åˆ°å¯¹åº”catchè¯­å¥ï¼Œå¹¶ä¸ä¼šå‡ºç°å…ˆè·³åˆ°testCatchå‡½æ•°åœ¨è·³å›mainçš„æƒ…å†µï¼\n2.3 é‡æ–°æŠ›å‡ºå¼‚å¸¸å‡è®¾æˆ‘ä»¬é‡åˆ°äº†è¿™ç§æƒ…å†µ\nvoid testab()&#123;\tB bt;\tthrow bt;&#125;void testD()&#123;\tint* arr = new int[10];\ttestab();\tdelete[] arr;&#125;\n\nåœ¨testab()å‡½æ•°ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå¯¼è‡´testD()å‡½æ•°æå‰ç»ˆæ­¢ï¼\n\nå¯æˆ‘ä»¬newçš„ä¸œè¥¿è¿˜æ²¡é‡Šæ”¾å‘¢ï¼\nè¿™å°±å‡ºç°äº†å†…å­˜æ³„æ¼ï¼\n\næ³¨æ„ï¼šå†…å­˜æ³„æ¼æ˜¯ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥çš„é—®é¢˜ï¼Œå³ä¾¿æˆ‘ä»¬æ¯ä¸€æ¬¡newçš„ç©ºé—´å¾ˆå°ï¼Œä½†æ˜¯ç§¯å°æˆå¤šå°±æ˜¯å¤§é—®é¢˜ï¼\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æå‰è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œå…ˆé‡Šæ”¾æˆ‘ä»¬newçš„èµ„æºä¹‹åï¼Œå†å°†å¼‚å¸¸é‡æ–°æŠ›å‡ºã€‚å¯ä»¥ç†è§£ä¸ºæ˜¯æå‰æ‹¦æˆªå¼‚å¸¸\n\n3.å¼‚å¸¸éœ€è¦æ³¨æ„çš„ä¸€äº›é—®é¢˜3.1 å¼‚å¸¸å®‰å…¨å½“æˆ‘ä»¬æ“ä½œå¼‚å¸¸çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸€äº›ç›¸å…³çš„é—®é¢˜\n\nä¸Šé¢2.3ä¸­æåˆ°çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œåœ¨newå’Œdeleteä¹‹é—´æŠ›å‡ºå¼‚å¸¸è€Œæ²¡æœ‰ä¸­é€”å¤„ç†ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼\nä¸è¦åœ¨æ„é€ æˆ–ææ„å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡ä¸å®Œå…¨åˆå§‹åŒ–ï¼ˆå¯¹è±¡ä¸å®Œæ•´ï¼‰æˆ–ä¸å®Œå…¨ææ„ï¼ˆå†…å­˜æ³„æ¼ï¼‰\nå¤šçº¿ç¨‹æ“ä½œä¸­åœ¨lockä¸unlockä¹‹é—´æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´æ­»é”\n\nå½“ç„¶æ˜¯æœ‰è§£å†³æ–¹æ¡ˆçš„ï¼ŒC++ä½¿ç”¨RAIIæ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸ªå¾…æˆ‘ä¸‹ä¸€ç¯‡æ™ºèƒ½æŒ‡é’ˆçš„åšå®¢æ¥è®²è§£ï¼\n3.2 å¼‚å¸¸è§„èŒƒå› ä¸ºå¼‚å¸¸éƒ½æ˜¯æ‰‹åŠ¨å†™ä»£ç è¿›è¡Œå¤„ç†çš„ï¼Œé‚£ä¹ˆå°±æå…¶éœ€è¦äº›ä»£ç çš„è€å“¥æ‹¥æœ‰å¾ˆå¥½çš„ç¼–ç¨‹è§„èŒƒã€‚\n\nåœ¨å‡½æ•°ååŠ ä¸Šthrow(ç±»å‹Aï¼Œç±»å‹B)å¯ä»¥åˆ—å‡ºè¿™ä¸ªå‡½æ•°èƒ½æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ç±»å‹\n\nvoid test() throw(string,vector&lt;int&gt;);\n\n\nå¦‚æœåªè·Ÿä¸€ä¸ªç±»å‹ï¼Œä»£è¡¨è¯¥å‡½æ•°åªä¼šæŠ›å‡ºä¸€ç§ç±»å‹çš„å¼‚å¸¸\n\nvoid* operator new(size_t size) throw (std::bad_alloc);\n\n\nå¦‚æœè·Ÿçš„æ˜¯throw()ä»£è¡¨è¿™ä¸ªå‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸\n\nvoid* test2(size_t sz, void* p) throw();\n\nåœ¨C++11ä¸­è¿˜æ–°å¢äº†ä¸€ä¸ªå…³é”®å­—noexceptæ¥æ ‡è¯†ä¸ä¼šæŠ›å‡ºå¼‚å¸¸\nvoid* test2(size_t sz, void* p) noexcept;\n\nä½†æ˜¯è¿™äº›éƒ½ä¾èµ–äºç”¨æˆ·çš„ç¼–ç¨‹ä¹ æƒ¯ï¼ŒC++å¹¶æ²¡æœ‰å¼ºåˆ¶ç”¨æˆ·ä¸€å®šè¦åœ¨å‡½æ•°å°¾éƒ¨å†™ä¸Šå¼‚å¸¸æŠ›å‡ºçš„ç±»å‹ã€‚\né‚£åœ¨é¡¹ç›®åˆä½œä¸­ï¼Œæ¥äº†ä¸€ä¸ªâ€œå®ä¹ ç”Ÿâ€\n\nå†™äº†ä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œå´æ²¡æœ‰æ ‡è¯†è¯¥å‡½æ•°ä¼šæŠ›å¼‚å¸¸ï¼Œé‚£ä¸‹é¢è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹æ²¡æœ‰è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œé‚£ä¸å°±è›‹ç³•äº†ï¼Œç¨‹åºæå‰ä¸­æ­¢ï¼\næˆ–è€…è¯´æ˜¯æŠ›å‡ºå¼‚å¸¸çš„ç±»å‹å†™é”™äº†ï¼Œæ²¡æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†è¯­å¥ï¼Œåªèƒ½è¢«catch(...)æ•è·\næˆ–è€…æ˜¯æ˜æ˜ä¸æŠ›å‡ºå¼‚å¸¸éè¦å†™è‡ªå·±æŠ›å‡ºï¼Œç™½å†™äº†å¼‚å¸¸å¤„ç†\n\nä»¥ä¸Šä¸‰ç§æƒ…å†µéƒ½æ˜¯æˆ‘ä»¬ä¸æœŸæœ›é‡åˆ°çš„ï¼Œæ‰€ä»¥åœ¨å†™ç›¸å…³å‡½æ•°çš„æ—¶å€™ï¼Œæœ€å¥½æ˜ç¡®æ ‡è¯†ç›¸å…³å¼‚å¸¸æŠ›å‡ºçš„ç±»å‹ï¼\n3.3 è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹è¦æ˜¯åœ¨åä½œä¸­ï¼Œä¸åŒç”¨æˆ·æŠ›å‡ºäº†å¤ªå¤šä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œé‚£è¿˜æ€ä¹ˆè°ƒç”¨å‡½æ•°ï¼Ÿ\nå‰é¢æåˆ°äº†ï¼Œå­ç±»æŠ›å‡ºçš„å¼‚å¸¸å¯ä»¥ç”¨åŸºç±»æ¥å—ã€‚æ‰€ä»¥åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯ä¼šå®šä¹‰ä¸€ä¸ªç»§æ‰¿çš„è§„èŒƒå¼‚å¸¸ä½“ç³»ï¼Œç”¨äºå¤„ç†ä¸åŒçš„å¼‚å¸¸ã€‚\nè¿™æ ·æˆ‘ä»¬å°±åªéœ€è¦æ•è·ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œå°±èƒ½æ•è·åˆ°æ‰€æœ‰æ´¾ç”Ÿç±»çš„å¼‚å¸¸å¯¹è±¡ã€‚\nå…³äºåŸºç±»æ•è·å­ç±»å¼‚å¸¸çš„æ–¹æ³•åœ¨2.1ä¸­å·²ç»æåŠï¼Œè¿™é‡Œä¸å†æ¼”ç¤º\n\n3.4 C++æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸åœ¨C++æ ‡å‡†åº“ä¸­ï¼Œå¼‚å¸¸æ˜¯å›´ç»•ä¸‹å›¾ç»„ç»‡çš„\n\ncplusplusï¼šhttps://legacy.cplusplus.com/reference/exception/exception/?kw=exception\n\n\næ ‡å‡†å¼‚å¸¸ç±»çš„æˆå‘˜ï¼š\n\nåœ¨ä¸Šè¿°ç»§æ‰¿ä½“ç³»ä¸­ï¼Œæ¯ä¸ªç±»éƒ½æœ‰æä¾›äº†æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€å’Œèµ‹å€¼æ“ä½œç¬¦é‡è½½ã€‚\nlogic_errorç±»åŠå…¶å­ç±»ã€runtime_errorç±»åŠå…¶å­ç±»ï¼Œå®ƒä»¬çš„æ„é€ å‡½æ•°æ˜¯æ¥å—ä¸€ä¸ªstringç±»å‹çš„å½¢å‚ï¼Œç”¨äºå¼‚å¸¸ä¿¡æ¯çš„æè¿°\næ‰€æœ‰çš„å¼‚å¸¸ç±»éƒ½æœ‰ä¸€ä¸ªwhat()æ–¹æ³•ï¼Œè¿”å›const char* ç±»å‹æè¿°å¼‚å¸¸ä¿¡æ¯\n\næ ‡å‡†å¼‚å¸¸ç±»çš„å…·ä½“æè¿°ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nexception\næ‰€æœ‰æ ‡å‡†å¼‚å¸¸ç±»çš„çˆ¶ç±»\n\n\nbad_alloc\nå½“operator new and operator new[]ï¼Œè¯·æ±‚åˆ†é…å†…å­˜å¤±è´¥æ—¶\n\n\nbad_exception\nè¿™æ˜¯ä¸ªç‰¹æ®Šçš„å¼‚å¸¸ã€‚å¦‚æœå‡½æ•°çš„å¼‚å¸¸æŠ›å‡ºåˆ—è¡¨é‡Œå£°æ˜äº†bad_exceptionå¼‚å¸¸ï¼Œè€Œå‡½æ•°å†…éƒ¨æŠ›å‡ºäº†å¼‚å¸¸æŠ›å‡ºåˆ—è¡¨ä¸­æ²¡æœ‰çš„å¼‚å¸¸ï¼Œä¸è®ºä»€ä¹ˆç±»å‹ï¼Œéƒ½ä¼šè¢«æ›¿æ¢ä¸ºbad_exceptionç±»å‹\n\n\nbad_typeid\nä½¿ç”¨typeidæ“ä½œç¬¦ï¼Œæ“ä½œä¸€ä¸ªNULLæŒ‡é’ˆï¼Œè€Œè¯¥æŒ‡é’ˆæ˜¯å¸¦æœ‰è™šå‡½æ•°çš„ç±»ï¼Œè¿™æ—¶æŠ›å‡ºbad_typeidå¼‚å¸¸\n\n\nbad_cast\nä½¿ç”¨dynamic_castè½¬æ¢å¼•ç”¨å¤±è´¥çš„æ—¶å€™\n\n\nios_base::failure\nioæ“ä½œè¿‡ç¨‹å‡ºç°é”™è¯¯\n\n\nlogic_error\né€»è¾‘é”™è¯¯ï¼Œå¯ä»¥åœ¨è¿è¡Œå‰æ£€æµ‹çš„é”™è¯¯\n\n\nruntime_error\nè¿è¡Œæ—¶é”™è¯¯ï¼Œä»…åœ¨è¿è¡Œæ—¶æ‰å¯ä»¥æ£€æµ‹çš„é”™è¯¯\n\n\nlogic_errorçš„å­ç±»ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nlength_error\nè¯•å›¾ç”Ÿæˆä¸€ä¸ªè¶…å‡ºè¯¥ç±»å‹æœ€å¤§é•¿åº¦çš„å¯¹è±¡æ—¶ï¼Œä¾‹å¦‚å¾ˆé•¿çš„string\n\n\ndomain_error\nå‚æ•°çš„å€¼åŸŸé”™è¯¯ï¼Œä¸»è¦ç”¨åœ¨æ•°å­¦å‡½æ•°ä¸­ã€‚ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªè´Ÿå€¼è°ƒç”¨åªèƒ½æ“ä½œéè´Ÿæ•°çš„å‡½æ•°\n\n\nout_of_range\nè¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œvetorçš„atæŠ›å‡ºäº†æ­¤å¼‚å¸¸\n\n\ninvalid_argument\nå‚æ•°ä¸åˆé€‚ã€‚åœ¨æ ‡å‡†åº“ä¸­ï¼Œå½“åˆ©ç”¨stringå¯¹è±¡æ„é€ bitsetæ—¶ï¼Œè€Œstringä¸­çš„å­—ç¬¦ä¸æ˜¯â€™0â€™æˆ–â€™1â€™çš„æ—¶å€™ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸\n\n\nfuture_error(C++11)\nThis class defines the type of objects thrown as exceptions to report invalid operations on future objects or other elements of the library that may access a futureâ€˜s shared state.\n\n\nruntime_errorçš„å­ç±»ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nrange_error\nè®¡ç®—ç»“æœè¶…å‡ºäº†æœ‰æ„ä¹‰çš„å€¼åŸŸèŒƒå›´\n\n\noverflow_error\nç®—æœ¯è®¡ç®—ä¸Šæº¢\n\n\nunderflow_error\nç®—æœ¯è®¡ç®—ä¸‹æº¢\n\n\nsystem_error(C++11)\nè¿è¡Œæ—¶ä»æ“ä½œç³»ç»Ÿæˆ–å…¶ä»–å…·æœ‰å…³è”error_codeçš„ä½çº§åº”ç”¨ç¨‹åºæ¥å£å¼•å‘çš„å¼‚å¸¸\n\n\nä»¥ä¸Šéƒ¨åˆ†C++æ ‡å‡†åº“å¼‚å¸¸è§£é‡Šæ¥è‡ªhttps://blog.csdn.net/linxi8693/article/details/90318166\n\n4.å¼‚å¸¸ä¼˜ç¼ºç‚¹ä¼˜ç‚¹\n\nå¼‚å¸¸å¯¹è±¡å®šä¹‰å®Œå¤‡ä¹‹åï¼Œç›¸æ¯”äºé”™è¯¯ç çš„æ–¹å¼ï¼Œèƒ½è®©ç”¨æˆ·æ›´åŠ æ¸…æ¥šçš„äº†è§£åˆ°è‡ªå·±é‡åˆ°äº†ä»€ä¹ˆç±»å‹çš„é—®é¢˜ï¼Œæ›´å¥½å®šä½ç¨‹åºçš„bug\nå‡½æ•°é”™è¯¯ç è‹¥é‡åˆ°ï¼Œéœ€è¦å±‚å±‚å‘å¤–è¿”å›ï¼›è€Œå¼‚å¸¸åˆ™é€šè¿‡catchå¯ä»¥ç›´æ¥è·³åˆ°å¯¹åº”å¤„ç†ä½ç½®\nç¬¬ä¸‰æ–¹åº“åŒ…å«å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ç±»ä¼¼äºboost/gtestç­‰ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ä¹Ÿéœ€è¦ä½¿ç”¨å¯¹åº”çš„å¼‚å¸¸å¤„ç†\nå¯¹äºT&amp; operator[]è¿™ç§æ“ä½œç¬¦é‡è½½ï¼Œæˆ‘ä»¬æ²¡åŠæ³•å¾ˆå¥½åœ°ä½¿ç”¨è¿”å›å€¼æ¥æ ‡è¯†é”™è¯¯ï¼ˆå› ä¸ºä¸åŒç±»å‹çš„è¿”å›å€¼ä¸ä¸€æ ·ï¼Œæ²¡åŠæ³•ç»Ÿä¸€å¤„ç†ï¼‰è¿™æ—¶å€™å°±å¯ä»¥ç”¨å¼‚å¸¸æ¥æŠ›å‡ºè¶Šç•Œé—®é¢˜\n\nç¼ºç‚¹\n\nå¼‚å¸¸å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºåˆ°å¤„ä¹±è·³ï¼ˆå› ä¸ºä¼šè·³åˆ°æœ€è¿‘çš„catchä½ç½®ï¼‰ç»™è§‚å¯Ÿé”™è¯¯æƒ…å†µå¢æ·»äº†ä¸€äº›éš¾åº¦\nå¼‚å¸¸æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ï¼ˆå¯å¿½ç•¥ï¼‰\nå¼‚å¸¸å®¹æ˜“å¯¼è‡´èµ„æºæ³„æ¼ç­‰ç­‰é—®é¢˜\nå¼‚å¸¸ä¾èµ–äºç”¨æˆ·ç¼–ç¨‹è§„èŒƒï¼Œå¦åˆ™å‡½æ•°è°ƒç”¨å®¹æ˜“å‡ºç°å¼‚å¸¸æ²¡æœ‰å¾—åˆ°å¤„ç†çš„é—®é¢˜\n\n\nç»“è¯­æ€»ä½“è€Œè¨€ï¼Œå¼‚å¸¸å¤„ç†åˆ©å¤§äºå¼Šã€‚å¾ˆå¤šè¯­è¨€éƒ½æ˜¯ç”¨å¼‚å¸¸æ¥å¤„ç†é”™è¯¯çš„ï¼Œæ¯”å¦‚pythonã€‚åªè¦ç»´æŒä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œåœ¨å‡½æ•°åå£°æ˜ä¼šæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ï¼Œé’ˆå¯¹æ€§è¿›è¡Œå¤„ç†ï¼Œè¿˜æ˜¯å¾ˆé¦™çš„ï¼\n\n","categories":["é‡è§C++"],"tags":["C++","C++11","å¼‚å¸¸"]},{"title":"ã€C++ã€‘ç‰¹æ®Šç±»è®¾è®¡ | å•ä¾‹æ¨¡å¼","url":"/2022/10/19/note_cpp/23%E7%89%B9%E6%AE%8A%E7%B1%BB(%E5%8D%95%E4%BE%8B)/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥åº·åº·ä¸€äº›ç‰¹æ®Šç±»çš„å®ç°æ–¹å¼ï¼\n\n\n1.ä¸æ”¯æŒæ‹·è´çš„ç±»åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚æ™ºèƒ½æŒ‡é’ˆã€å¤šçº¿ç¨‹æ“ä½œã€IOæµç­‰æ˜¯ä¸æ”¯æŒæ‹·è´çš„ã€‚å› ä¸ºå®ƒä»¬çš„æ‹·è´ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œç§‰ç€è§£å†³ä¸äº†é—®é¢˜ï¼Œå°±è§£å†³æå‡ºé—®é¢˜çš„äººçš„æ€è·¯ï¼Œç¦æ­¢äº†è¿™äº›ç±»çš„æ‹·è´\nC++98ä¸­ï¼Œå¯ä»¥å°†æ‹·è´æ„é€ å’Œ=é‡è½½åªå£°æ˜ä¸å®šä¹‰ï¼Œå¹¶å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰\n\nè®¾ç½®ä¸ºç§æœ‰å¯ä»¥é˜²æ­¢å…¶ä»–äººåœ¨ç±»å¤–å®šä¹‰\n\nC++11ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—deleteæ¥ç¦æ­¢å®ç°æ‹·è´æ„é€ å’Œ =é‡è½½\n// ç¦æ­¢æ‹·è´çš„ç±»class BanCopy&#123;public:\t//æ„é€ \tBanCopy()\t&#123;\t\t_a = _b = 0;\t&#125;\t\t//C++11\tBanCopy(const BanCopy&amp; c) = delete;\tBanCopy&amp; operator=(const BanCopy&amp; c) = delete;private:\t//C++98çš„åŠæ³•ï¼Œå£°æ˜ä¸ºç§æœ‰ä¸”ä¸å®šä¹‰\t//BanCopy(const BanCopy&amp; c);\t//BanCopy&amp; operator=(const BanCopy&amp; c);\t\tint _a;\tint _b;&#125;;\n\n\n2.åªèƒ½åœ¨å †ä¸Šåˆ›å»ºçš„ç±»æ“ä½œæ–¹æ³•å’Œä¸Šé¢çš„æ€è·¯ç±»ä¼¼ï¼Œåªéœ€è¦æŠŠæ„é€ å‡½æ•°ç§æœ‰åŒ–å°±å¯ä»¥äº†\n\nåŒæ—¶è¿˜éœ€è¦å–æ¶ˆæ‹·è´æ„é€ ï¼Œå¦åˆ™å¯ä»¥ç”¨æ‹·è´æ„é€ åœ¨æ ˆä¸Šå¼€ä¸€ä¸ªæ–°çš„å¯¹è±¡\nèµ‹å€¼é‡è½½ä¸ä¸€å®šéœ€è¦å–æ¶ˆï¼Œå› ä¸ºèµ‹å€¼é‡è½½æ— æ³•åˆ›å»ºæ–°å¯¹è±¡\n\n// åªèƒ½åœ¨å †ä¸Šå¼€è¾Ÿclass HeapOnly &#123;public:\tstatic HeapOnly* CreatObj(int a,int b)\t&#123;\t\treturn new HeapOnly(a, b);\t&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\tHeapOnly()\t\t:_a(0),\t\t_b(0)\t&#123;&#125;\tHeapOnly(int a,int b)\t\t:_a(a),\t\t_b(b)\t&#123;&#125;\t// åŒæ—¶æ‹·è´æ„é€ ä¹Ÿéœ€è¦ç§æœ‰ï¼Œç¦æ­¢æ‹·è´åˆ›å»ºå¯¹è±¡\tHeapOnly(const HeapOnly&amp; h) = delete;\t// èµ‹å€¼ä¸ä¸€å®šéœ€è¦deleteï¼Œå› ä¸ºèµ‹å€¼ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡\t// HeapOnly&amp; operator=(const HeapOnly&amp; h) = delete;\tint _a;\tint _b;&#125;;\n\nè¿™æ ·å†™äº†ä¹‹åï¼Œæƒ³åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è°ƒç”¨staticå‡½æ•°æ¥æ“ä½œ\n\nè€Œä¸”å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰ç§æœ‰åŒ–ææ„å‡½æ•°ï¼Œæ‰€ä»¥ææ„æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„ï¼\n2.1 å¦ç±»æ“ä½œè¿˜å¯ä»¥ä½¿ç”¨staticå‡½æ•°æä¾›ä¸€ä¸ªæ¥å£æ¥ä¸“é—¨å¤„ç†ææ„ï¼Œå†æŠŠææ„å‡½æ•°è®¾è®¡æˆç§æœ‰ï¼Œæ„é€ å‡½æ•°å…¬æœ‰\n// åªèƒ½åœ¨å †ä¸Šå¼€è¾Ÿclass HeapOnly &#123;public:\tstatic HeapOnly* CreatObj(int a,int b)\t&#123;\t\treturn new HeapOnly(a, b);\t&#125;\tstatic void DelObj(HeapOnly* ptr)\t&#123;\t\tdelete ptr;\t&#125;\t// å› ä¸ºææ„ç§æœ‰äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠŠæ„é€ å…¬æœ‰\tHeapOnly()\t\t:_a(0),\t\t_b(0)\t&#123;&#125;\tHeapOnly(int a, int b)\t\t:_a(a),\t\t_b(b)\t&#123;&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\t// ....\t// åŒæ—¶æ‹·è´æ„é€ ä¹Ÿéœ€è¦ç§æœ‰ï¼Œç¦æ­¢æ‹·è´åˆ›å»ºå¯¹è±¡\tHeapOnly(const HeapOnly&amp; h) = delete;\t// èµ‹å€¼ä¸ä¸€å®šéœ€è¦deleteï¼Œå› ä¸ºèµ‹å€¼ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡\t// HeapOnly&amp; operator=(const HeapOnly&amp; h) = delete;\t~HeapOnly()\t&#123;\t\t_a = _b = 0;\t&#125;\tint _a;\tint _b;&#125;;\n\nè¿™æ ·è®¾è®¡äº†ä¹‹åï¼Œç›´æ¥åœ¨æ ˆä¸Š&#x2F;å…¨å±€åŒºå¼€è¾Ÿç©ºé—´ä¼šæŠ¥é”™ï¼Œä½†æ˜¯newä¸å—å½±å“ã€‚\nå› ä¸ºææ„ç§æœ‰äº†ï¼Œæ‰€ä»¥deleteä¸èƒ½æ­£ç¡®è°ƒç”¨ææ„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨staticå‡½æ•°æŒ‡å®šæŒ‡é’ˆè¿›è¡Œææ„\n\né™¤äº†è¿™ç§åŠæ³•ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ³•å­å¯ä»¥ä¸ä¼ å…¥æŒ‡é’ˆ\n//åˆ é™¤è‡ªå·±void DelObj()&#123;    delete this;&#125;\t\n\nç›´æ¥ç”¨å¯¹è±¡è°ƒç”¨æ­¤å‡½æ•°å³å¯\nHeapOnly* h6 = new HeapOnly();h6-&gt;DelObj();\n\nåªä¸è¿‡è¿™æ ·å¯èƒ½æœ‰äº›ä¸å¤ªå¥½ç†è§£ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®šå–½ï¼\n3.åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºçš„ç±»ç›¸åŒçš„æ€è·¯ï¼Œè®¾è®¡ä¸€ä¸ªstaticçš„åˆ›å»ºå¯¹è±¡å‡½æ•°ï¼Œæ¥åˆ›å»ºä¸€ä¸ªæ ˆä¸Šçš„å¯¹è±¡return\n// åªèƒ½åœ¨æ ˆä¸Šå¼€è¾Ÿclass StackOnly&#123;public:\tstatic StackOnly CreatObj()\t&#123;\t\treturn StackOnly();//åˆ›å»ºåŒ¿åå¯¹è±¡è¿”å›ï¼Œç¼–è¯‘å™¨ç›´æ¥ä¼˜åŒ–ä¸ºä¸€ä¸ªæ„é€ \t\t//è¿™ä¹ˆå†™çš„è¯ï¼Œå°±ä¸èƒ½ç¦æ­¢æ‹·è´æ„é€ \t\t//StackOnly st;\t\t//return st;\t&#125;\t// ä¸èƒ½ç¦ç”¨æ‹·è´æ„é€ ï¼Œå› ä¸ºreturnçš„æ—¶å€™å¯èƒ½ä¼šè°ƒç”¨ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–æ˜¯å–å†³äºå¹³å°çš„ï¼‰private:\tStackOnly()\t&#123;\t\t_a = _b = 0;\t&#125;\tint _a;\tint _b;&#125;;\n\nè¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦æœ‰æ‹·è´æ„é€ ï¼Œå› ä¸ºreturnçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¦‚æœä¸ä¼˜åŒ–ï¼Œé‚£å°±æ˜¯æ„é€ +æ‹·è´ï¼Œä¼˜åŒ–äº†ä¹‹åæ‰èƒ½å˜æˆç›´æ¥æ„é€ \nè¿™æ˜¯å–å†³äºå¹³å°çš„ï¼Œå¦‚æœç¦ç”¨äº†æ‹·è´ï¼Œä¸‡ä¸€æœ‰äº›å¹³å°ç¼–è¯‘å™¨æ²¡æœ‰åšè¿™ç§ä¼˜åŒ–ï¼Œä½ çš„ä»£ç å°±è·‘ä¸åŠ¨äº†\n\nå¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ä¾¿æ˜¯ç¦ç”¨æ‰operator new()ï¼Œä»¥æ­¤ç¦æ­¢äº†åœ¨å †ä¸Šåˆ›å»ºç©ºé—´ã€‚å¦‚æœç”¨è¿™ç§åŠæ³•ï¼Œæ„é€ å‡½æ•°å°±ä¸éœ€è¦è®¾è®¡ä¸ºç§æœ‰äº†\n\nä½†æ˜¯è¿™ä¸¤ä¸ªåŠæ³•éƒ½æœ‰ä¸ªç¼ºé™·ï¼Œé‚£å°±æ˜¯ç”¨æˆ·å¯ä»¥ç”¨æ‹·è´æ„é€ åœ¨é™æ€åŒºä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™åªèƒ½ç®—ä¸ªå°ç‘•ç–µï¼Œå¯ä»¥ä¸ç”¨ç®¡å®ƒ\n\n4.å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼çš„å…¶ä¸­ä¸€ç§\n\nè®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ä¸”è¾ƒä¸ºæµè¡Œçš„ä»£ç è®¾è®¡ç»éªŒæ€»ç»“ã€‚\nè®¾è®¡æ¨¡å¼æœ‰éå¸¸å¤šï¼Œæ„Ÿå…´è¶£çš„è€å“¥å¯ä»¥å»æœä¸“é—¨çš„åšå®¢äº†è§£ä¸€ä¸‹\n\nå•ä¾‹æ¨¡å¼ï¼šä¸€ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¯¥æ¨¡å¼å¯ä»¥ä¿è¯åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼ŒæŸä¸€ä¸ªç±»åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡\n\nä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯æ˜¯ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å°±å¯ä»¥è®¾è®¡æˆå•ä¾‹æ¨¡å¼ï¼Œä¿è¯æ‰€æœ‰äººè®¿é—®åˆ°çš„é…ç½®ä¿¡æ¯å®Œå…¨ç›¸åŒï¼Œä¿®æ”¹çš„æ—¶å€™ä¹Ÿèƒ½åŒæ­¥ç»™æ‰€æœ‰äººã€‚\n\n4.1 é¥¿æ±‰é¥¿æ±‰æ¨¡å¼é‡‡ç”¨staticæˆå‘˜æ¥å®ç°å•ä¾‹ï¼Œæ€è·¯å’Œä¸Šé¢ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè®©æ„é€ å‡½æ•°ç§æœ‰è€Œæ— æ³•åˆ›å»ºå…¶ä»–å¯¹è±¡\n\né‚£æˆ‘ä»¬çš„staticå¯¹è±¡è¦æ€ä¹ˆåˆ›å»ºå‘¢ï¼Ÿ\n\nå…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç \n// å•ä¾‹æ¨¡å¼ï¼ˆé¥¿æ±‰ï¼‰// é¥¿æ±‰æ¨¡å¼é‡‡ç”¨staticå¯¹è±¡ï¼Œæ˜¯åœ¨mainå‡½æ•°ä¹‹å‰åˆ›å»ºçš„// ä¼šå½±å“ç¨‹åºå¯åŠ¨çš„é€Ÿåº¦class Singleton&#123;public:\tstatic Singleton* GetInstance()\t&#123;\t\treturn _sgp;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt; &quot;----- System Info -----&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     CPU &quot; &lt;&lt; _cpu &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     GPU &quot; &lt;&lt; _gpu &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     MEM &quot; &lt;&lt; _mem &lt;&lt; endl;\t\tcout &lt;&lt; &quot;-----     End     -----&quot; &lt;&lt; endl;\t&#125;private:\tSingleton()\t\t:_cpu(&quot;i9-12900ks&quot;),\t\t_gpu(&quot;RTX 4090&quot;),\t\t_mem(&quot;128GB&quot;)\t&#123;&#125;    Singleton(const Singleton&amp; s) = delete;\tstring _cpu;\tstring _mem;\tstring _gpu;\t//static Singleton _sg;//å£°æ˜\tstatic Singleton* _sgp;//å£°æ˜&#125;;//Singleton Singleton::_sg;//å®šä¹‰Singleton* Singleton::_sgp = new Singleton();//å®šä¹‰//å› ä¸ºè¿™é‡Œçš„sgå’Œsgpéƒ½æ˜¯å±äºç±»é‡Œé¢çš„æˆå‘˜ï¼Œä¸å—è®¿é—®é™å®šç¬¦çš„é™åˆ¶ï¼Œæ‰å¯ä»¥æ­£å¸¸è°ƒç”¨æ„é€ å‡½æ•°\n\nå› ä¸º_sg/_sgpè¿™ä¸¤ä¸ªæˆå‘˜éƒ½åœ¨ç±»å†…éƒ¨å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬å±äºæ•´ä¸ªç±»åŸŸï¼Œå¯ä»¥æˆåŠŸè®¿é—®åˆ°å†…éƒ¨çš„æ„é€ å‡½æ•°ã€‚\nè€Œåœ¨å…¶ä»–åœ°æ–¹çš„å¯¹è±¡ç”±äºæ²¡æœ‰åŠæ³•è®¿é—®åˆ°æ„é€ å‡½æ•°ï¼Œè€Œæ— æ³•åˆ›å»º\n\nç”±äºé¥¿æ±‰æ¨¡å¼æ˜¯staticå¯¹è±¡ï¼Œå…¶åˆå§‹åŒ–æ˜¯åœ¨mainå‡½æ•°ä¹‹å‰è¿›è¡Œçš„ã€‚å¦‚æœé‡‡ç”¨é¥¿æ±‰æ¨¡å¼çš„å•ä¾‹è¿‡å¤šï¼Œç¨‹åºè¿Ÿè¿Ÿæ²¡æœ‰è¿è¡Œåˆ°mainå¤„ï¼Œä¼šå¯¼è‡´ä¸€ä¸ªç¨‹åºå¯åŠ¨å¾ˆæ…¢\n4.2 æ‡’æ±‰ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡\n// æ‡’æ±‰// ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡class InfoMgr&#123;public:\tstatic InfoMgr* GetInstance()\t&#123;\t\tif (_sp == nullptr)\t\t&#123;\t\t\t_sp = new InfoMgr;\t\t&#125;\t\treturn _sp;\t&#125;\tvoid SetAddress(const string&amp; s)\t&#123;\t\t_address = s;\t&#125;\tstring&amp; GetAddress()\t&#123;\t\treturn _address;\t&#125;private:\tInfoMgr()\t\t:_address(&quot;bilibili&quot;),\t\t_secretKey(1234)\t&#123;&#125;\tInfoMgr(const InfoMgr&amp;) = delete;\tstring _address;\tint _secretKey;\tstatic InfoMgr* _sp; // å£°æ˜&#125;;InfoMgr* InfoMgr::_sp = nullptr; // å®šä¹‰\n\nè¿™é‡Œæˆ‘ä»¬å°†å†…éƒ¨çš„_spå®šä¹‰ä¸ºäº†nullptrï¼Œå¦‚æœè°ç¬¬ä¸€ä¸ªè°ƒç”¨ï¼Œåšä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ˜¯nullptrå°±åˆ›å»ºå®ä¾‹\n\nç”±äºæ‡’æ±‰å¯èƒ½ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹åŒæ—¶ç¬¬ä¸€æ¬¡è®¿é—®è¿™ä¸ªå•ä¾‹ï¼Œå°±ä¼šå¯¼è‡´åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­éƒ½åœ¨åˆå§‹åŒ–è¿™ä¸ªå•ä¾‹ï¼Œè€ŒæŸä¸€æ¬¡åˆå§‹åŒ–ä¼šå¤±è´¥ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬å¯¹å•ä¾‹è¿›è¡ŒåŠ é”æ“ä½œ\n\nå¤šçº¿ç¨‹åŠ é”é—®é¢˜ï¼Œå‚è€ƒlinuxä¸‹çš„æ“ä½œï¼šC++çº¿ç¨‹æ“ä½œï¼›C++çš„æ“ä½œä»¥è¿™ä¸ªæ€è·¯ï¼Œä¿®æ”¹ä¸ºä½¿ç”¨C++çš„threadåº“å³å¯\n\n4.3 äºŒè€…ä¼˜ç¼ºç‚¹é¥¿æ±‰çš„ä¼˜ç‚¹\n\nç®€å•æ˜“ç”¨\nå› ä¸ºæ˜¯åœ¨mainå‡½æ•°å‰åˆå§‹åŒ–ï¼Œå¤„äºå•çº¿ç¨‹çŠ¶æ€ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜\n\nç¼ºç‚¹ï¼š\n\nä½†æ˜¯åˆå§‹åŒ–é¡ºåºä¸ç¡®å®šï¼Œå¦‚æœæœ‰å…¶ä»–ç±»çš„ä¾èµ–å…³ç³»ï¼Œå¯èƒ½ä¼šå‡ºç°ä¾èµ–é¡¹Båœ¨å½“å‰å•ä¾‹Aååˆå§‹åŒ–ï¼Œå¯¼è‡´Aæ— æ³•å®Œæˆåˆå§‹åŒ–è€Œç¨‹åºboom\né¥¿æ±‰å•ä¾‹æ˜¯åœ¨mainå‡½æ•°ä¹‹å‰åˆ›å»ºçš„ï¼Œæ‹–æ…¢ç¨‹åºå¯åŠ¨é€Ÿåº¦\n\n\næ‡’æ±‰çš„ä¼˜ç‚¹\n\nç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–å˜é‡ï¼Œæé«˜ç¨‹åºå¯åŠ¨é€Ÿåº¦\nå¯ä»¥æ§åˆ¶åˆå§‹åŒ–é¡ºåºï¼ŒæŒ‰é¡ºåºæ¥åˆå§‹åŒ–ï¼Œé¿å…ä¾èµ–å…³ç³»é—®é¢˜\n\nç¼ºç‚¹ï¼š\n\nç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼ŒåŠ è½½ä¼šæ…¢ä¸€äº›\n\nåŸºäºè¿™ä¸¤ä¸ªçš„ä¼˜ç¼ºç‚¹ï¼Œè®©æˆ‘æƒ³å‡ºæ¥ä¸€ä¸ªä¸ç®—åŠæ³•çš„åŠæ³•\nå¦‚æœæƒ³æ§åˆ¶é¥¿æ±‰çš„åˆå§‹åŒ–é¡ºåºï¼Œå¯ä»¥åœ¨mainä¸€å¯åŠ¨çš„æ—¶å€™ï¼Œå°±è°ƒç”¨ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°æ¥åˆå§‹åŒ–è¿™äº›å•ä¾‹ã€‚è¿™æ ·ä¾æ—§ä¼šæ‹–æ…¢è¿›ç¨‹å¯åŠ¨çš„é¡ºåºï¼Œä½†è§£å†³äº†åˆå§‹åŒ–é¡ºåºçš„é—®é¢˜ï¼\n\nå®é™…ä¸Šï¼Œä¸€ä¸ªå•ä¾‹ç©¶ç«Ÿè¦ä¸è¦åœ¨mainä¹‹å‰å°±åˆå§‹åŒ–éœ€è¦çœ‹å…·ä½“æƒ…å†µçš„ï¼\n\n4.4 å•ä¾‹é‡Šæ”¾èµ„æºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå•ä¾‹çš„ç±»æ˜¯ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾çš„ï¼Œå› ä¸ºæ•´ä¸ªè¿›ç¨‹éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªå•ä¾‹\nä½†å¦‚æœæˆ‘ä»¬çš„å•ä¾‹å’Œä¸€ä¸ªæ–‡ä»¶æŒ‚é’©ï¼Œè¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œéœ€è¦å°†å•ä¾‹é‡Œé¢çš„ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶é‡Œé¢ï¼Œè¦æ€ä¹ˆæ“ä½œï¼Ÿ\nå¯ä»¥å†™ä¸€ä¸ªåƒåœ¾å›æ”¶ç±»ï¼Œåœ¨æœ€åè°ƒç”¨ææ„æ¥å›æ”¶èµ„æº\n// æ‡’æ±‰ -- ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡class InfoMgr&#123;public:\tstatic InfoMgr* GetInstance()\t&#123;\t\t// è¿˜éœ€è¦åŠ é”ï¼Œç•™ç€åé¢å¡«å‘\t\tif (_spInst == nullptr)\t\t&#123;\t\t\t_spInst = new InfoMgr;\t\t&#125;\t\treturn _spInst;\t&#125;\tvoid SetAddress(const string&amp; s)\t&#123;\t\t_address = s;\t&#125;\tstring&amp; GetAddress()\t&#123;\t\treturn _address;\t&#125;\t// å®ç°ä¸€ä¸ªå†…åµŒåƒåœ¾å›æ”¶ç±»    \tclass CGarbo &#123;\tpublic:\t\t~CGarbo() &#123;\t\t\tif (_spInst)\t\t\t\tdelete _spInst;\t\t&#125;\t&#125;;\t// å®šä¹‰ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç¨‹åºç»“æŸæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨å®ƒçš„ææ„å‡½æ•°ä»è€Œé‡Šæ”¾å•ä¾‹å¯¹è±¡\tstatic CGarbo Garbo;//å£°æ˜private:\tInfoMgr()\t\t:_address(&quot;bilibili&quot;),\t\t_secretKey(1234)\t&#123;&#125;\t~InfoMgr()\t&#123;\t\t// å‡è®¾ææ„æ—¶éœ€è¦ä¿¡æ¯å†™åˆ°æ–‡ä»¶æŒä¹…åŒ–\t&#125;\tInfoMgr(const InfoMgr&amp;) = delete;\tstring _address;\tint _secretKey;\tstatic InfoMgr* _spInst; // å£°æ˜&#125;;InfoMgr* InfoMgr::_spInst = nullptr; // å®šä¹‰InfoMgr::CGarbo Garbo;//å®šä¹‰\n\n4.5 staticå•ä¾‹æœ‰äººä¼šé‡‡ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°æ‡’æ±‰çš„å•ä¾‹ï¼Œå…¶é‡‡ç”¨staticå¯¹è±¡ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°å•ä¾‹ï¼\n\nå…¨å±€staticå˜é‡ä¼šåœ¨mainä¹‹å‰åˆå§‹åŒ–\nå±€éƒ¨staticå˜é‡ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–\n\nclass Singleton&#123;public:\tstatic Singleton* GetInstance()\t&#123;\t\t// å±€éƒ¨çš„é™æ€å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–\t\tstatic Singleton _s;\t\treturn &amp;_s;\t&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\tSingleton()&#123;&#125;;\t// æ‹·è´æ„é€ /èµ‹å€¼é‡è½½å–æ¶ˆ\tSingleton(Singleton const&amp;) = delete;\tSingleton&amp; operator=(Singleton const&amp;) = delete;&#125;;\n\nä½†æ˜¯ï¼è¿™ä¸ªæ“ä½œå¹¶ä¸é€šç”¨ï¼Œå…¶å–å†³äºç¼–è¯‘å™¨å’Œå¹³å°çš„å®ç°ã€‚ç‰¹åˆ«æ˜¯åœ¨C++11ä¹‹å‰ï¼›\nC++11ä¹‹åï¼Œä¿è¯äº†å±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–æ—¶çš„çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é‡‡ç”¨è¿™ç§åŠæ³•æ¥å®ç°å•ä¾‹ã€‚\n\nC++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\n\nä½†æ˜¯ï¼ä¸€å®šè¦ç¡®è®¤ä½ çš„ä»£ç åªåœ¨C++11çš„ç¯å¢ƒä¸‹è¿è¡Œï¼ï¼\n5.ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»C++98ä¸­ï¼Œåªéœ€è¦å°†æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ´¾ç”Ÿç±»æ— æ³•è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ— æ³•ç»§æ‰¿\n// c++98,æ„é€ ç§æœ‰class A &#123;public:\tstatic A GetInstance()\t&#123;\t\treturn A();\t&#125;private:\tA()\t&#123;\t\t_a = 0;\t&#125;\tint _a;&#125;;\n\nè€ŒC++11ä¸­æä¾›äº†ä¸€ä¸ªå…³é”®å­—finalï¼Œç”¨è¿™ä¸ªå…³é”®å­—ä¿®é¥°ç±»ï¼Œå°±æ— æ³•è¢«ç»§æ‰¿\n//C++11ç›´æ¥ç”¨å…³é”®å­—finalclass B final&#123;\t//...&#125;;\n\nç»“è¯­å‡ ä¸ªç‰¹æ®Šç±»åˆ°è¿™é‡Œå°±è®²è§£ç»“æŸè¾£ï¼Œå…¶ä¸­æ‡’æ±‰å¤šçº¿ç¨‹åŠ é”è¿˜ç•™äº†ä¸€ä¸ªå‘ï¼Œå¾…åç»­æˆ‘ä¼šå›æ¥æ›´æ–°è¡¥ä¸Šçš„ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€å!\n","categories":["é‡è§C++"],"tags":["C++","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘æ–‡ä»¶IOæµ","url":"/2022/10/22/note_cpp/24%E6%96%87%E4%BB%B6io%E6%93%8D%E4%BD%9C/","content":"ä¸€èµ·æ¥åº·åº·C++ä¸­çš„æ–‡ä»¶IOæ“ä½œå§\n\n\n[TOC]\n1.operator boolä¹‹å‰å†™OJçš„æ—¶å€™ï¼Œå°±å·²ç»ç”¨è¿‡ä¸Šé¢è¿™ç§æ–¹å¼æ¥è·å–å¤šç»„æµ‹è¯•ç”¨ä¾‹\nstring s;while(cin&gt;&gt;s)&#123;\tcout &lt;&lt; s &lt;&lt; endl;&#125;\n\nä¸è¿‡ä¹‹å‰ä¸€ç›´æ²¡æœ‰å»äº†è§£è¿™é‡Œçš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Œå€Ÿæ­¤æœºä¼šä¸€å¹¶è¯´æ˜\nioæµå¯ä»¥è¿›è¡Œwhileåˆ¤æ–­çš„ä¾æ®ï¼Œæ˜¯å› ä¸ºåº“çš„æºç ä¸­é‡è½½äº†operator bool\n\næ²¡é”™ï¼Œoperatorä¸ä»…å¯ä»¥é‡è½½ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒè¿˜å¯ä»¥é‡è½½ä¸€ä¸ªç±»å‹ï¼å³å°†è¿™ä¸ªç±»è½¬æ¢ä¸ºboolç±»å‹ï¼Œreturn ä¸€ä¸ªboolç±»å‹çš„å€¼ç”¨äºwhileçš„åˆ¤æ–­\nåŒç†ï¼Œé‡è½½int/doubleè¿™äº›ç±»å‹éƒ½æ˜¯å¯è¡Œçš„ï¼\n\nå¦å¤–ï¼Œè¦æƒ³åœæ­¢ä¸Šé¢çš„å¤šç»„è¾“å…¥ï¼Œåœ¨VSä¸‹å¯ä»¥ç”¨ctrl+zçš„æ–¹å¼è§£å†³ï¼Œè€Œä¸è¦ç”¨ctrl+cç›´æ¥æ€æ‰è¿›ç¨‹\n\n\n2.C++æ–‡ä»¶IOæµ\nC++çš„æ–‡ä»¶ioç±»è®¾è®¡çš„è¾ƒä¸ºå¤æ‚ï¼Œå…¶ä¸­è¿˜å‡ºç°äº†è±å½¢ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„iostream\nä¸Šé¢æåˆ°çš„operator boolå°±æ˜¯åŸºç±»IOSå®ç°çš„ï¼Œå­ç±»éƒ½æ²¡æœ‰å»é‡å†™\n\ncoutä¸ºæ ‡å‡†è¾“å‡ºï¼Œå°†æ•°æ®ä»å†…å­˜æµä¸­è¾“å…¥åˆ°æ˜¾ç¤ºå™¨ä¸Š\ncinä¸ºæ ‡å‡†è¾“å…¥ï¼Œé€šè¿‡é”®ç›˜è¾“å…¥æ•°æ®åˆ°ç¨‹åºä¸­\ncerrç”¨äºæ ‡å‡†é”™è¯¯çš„è¾“å‡º\nclogè¿›è¡Œæ—¥å¿—è¾“å‡º\n\nå…¶ä¸­éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œç©ºæ ¼å’Œå›è½¦ä¼šè¢«å½“ä½œæ•°æ®ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²ä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå›è½¦å’Œç©ºæ ¼ä¹Ÿä¸èƒ½é€šè¿‡cinè¯»å…¥\nå¦‚æœéœ€è¦è¯»å…¥å¸¦ç©ºæ ¼çš„å®Œæ•´ä¸€è¡Œï¼Œå¯ä»¥ä½¿ç”¨getlineå‡½æ•°\n\nä¸ºä»€ä¹ˆcinå’Œcoutå¯ä»¥è¾“å…¥è¾“å‡ºæ‰€æœ‰ç±»å‹ï¼Ÿ\n\nå› ä¸ºåº“é‡Œé¢å·²ç»å°†æ‰€æœ‰ç±»å‹é€šè¿‡æ“ä½œç¬¦é‡è½½&lt;&lt; å’Œ&gt;&gt;å®ç°äº†ï¼Œè¾¾åˆ°äº†è‡ªåŠ¨ç±»å‹è¯†åˆ«çš„æ•ˆæœ\n3.æ–‡ä»¶æ“ä½œC++æ ‡å‡†åº“ä¸­æä¾›çš„æ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒæƒ…å†µä¼ å…¥ä¸åŒçš„å€¼ï¼Œæˆ–è€…ä¸€æ¬¡æ€§ç”¨æŒ‰ä½æˆ–|ä¼ å…¥å¤šä¸ªæ‰“å¼€æ–¹æ³•\n\nåŒæ—¶å› ä¸ºC++ç±»å’Œå¯¹è±¡ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ‰‹åŠ¨closeæ–‡ä»¶\n3.0 å…³äºæŒ‰ä½ä¸çš„è¯´æ˜è¿™é‡Œä¸ºä½•å¯ä»¥ç”¨æŒ‰ä½ä¸ä¼ å…¥å¤šä¸ªæ–¹æ³•ï¼Ÿ\nå‡è®¾è¿™äº›æ–¹æ³•å°±æ˜¯ç®€å•çš„æ•°å­—2/4/8ï¼ˆå¿…é¡»æ˜¯2çš„å€æ•°ï¼‰æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‰ä½ä¸äº†ä¹‹åï¼Œåœ¨æŒ‰ä½æˆ–ï¼Œåˆ¤æ–­æŸä¸€ä¸ªæ•°å­—æ˜¯å¦åœ¨å…¶ä¸­\n\nå¦‚æœæˆ–äº†ä¹‹åçš„æ•°å­—ç­‰äºå®ƒæœ¬èº«ï¼Œè¯´æ˜æ•°æ®åœ¨å…¶ä¸­ï¼\n\nä¸ºä»€ä¹ˆéœ€è¦æ˜¯2çš„å€æ•°å‘¢ï¼Ÿ\n\n\n\nè¿™ç§æ–¹æ³•åœ¨linuxä¸­å¸¸è§ï¼Œæ¯”å¦‚linuxç³»ç»Ÿçš„æ–‡ä»¶æ¥å£\n\n3.1 ifstream\nè¿™ä¸ªå¯¹è±¡æ˜¯ç”¨äºè¯»å–æ–‡ä»¶çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼ å…¥çš„æ‰“å¼€æ–¹æ³•ä¸ºin\nvoid test1()&#123;\tifstream ifs(&quot;test.txt&quot;);\twhile (ifs)\t&#123;\t\tchar ch = ifs.get();\t\tcout &lt;&lt; ch;\t&#125;&#125;\n\n\nå› ä¸ºé‡è½½äº†boolï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥ç”¨whileæ¥åˆ¤æ–­ç»“æŸï¼ŒæˆåŠŸè¾“å‡ºäº†æ–‡ä»¶ä¸­çš„å†…å®¹\nifstream ifs(&quot;test.txt&quot;);char ch;while (ifs &gt;&gt; ch)&#123;\tcout &lt;&lt; ch;&#125;\n\nç¬¬äºŒç§è¯»å–æ–¹æ³•é‡‡ç”¨äº†æµæ’å…¥&gt;&gt;ä¸Šé¢æåˆ°è¿‡ï¼Œæµæå–å’Œæ’å…¥çš„æ—¶å€™ï¼Œä¼šæŠŠç©ºæ ¼å’Œæ¢è¡Œå½“ä½œæ•°æ®çš„åˆ†éš”ç¬¦ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸èƒ½æ‰“å°å‡ºç©ºæ ¼å’Œæ¢è¡Œ\n\n3.2 ofstream\nå†™æ–‡ä»¶çš„æ–¹å¼åŒä¸Šï¼Œç”¨outæ–¹æ³•æ‰“å¼€æ–‡ä»¶å°±å¯ä»¥äº†ï¼ˆé»˜è®¤ä¼ çš„å°±æ˜¯outï¼‰\nofstream ifs2(&quot;test1.txt&quot;,ios::out);char str[] = &quot;i love u\\n&quot;;ifs2.write(str,sizeof(str));\n\n\nä¸è¿‡è¿™ä¸ªå’ŒCè¯­è¨€çš„wæ–¹æ³•ä¸€æ ·ï¼Œå†™å…¥çš„æ—¶å€™ä¼šè¦†ç›–æ–‡ä»¶ä¸­å·²æœ‰çš„å†…å®¹ã€‚å¦‚æœæƒ³è¿›è¡Œè¿½åŠ ï¼Œåˆ™éœ€è¦åœ¨åé¢åŠ ä¸Šappï¼›å¦‚æœæ˜¯æ‰§è¡ŒäºŒè¿›åˆ¶è¯»å†™ï¼Œåˆ™éœ€è¦ä¸ä¸Šios::binary\nofstream ifs2(&quot;test1.txt&quot;,ios::out|ios::app);char str[] = &quot;i love u&quot;;ifs2.write(str,sizeof(str));\n\n\nè¿è¡ŒæˆåŠŸåä¼šåœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹\næ³¨æ„ï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²ä¸èƒ½ç”¨stringè¿›è¡Œå¤„ç†ï¼Œå› ä¸ºstringå†…éƒ¨åªå­˜äº†ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²ç©ºé—´çš„æŒ‡é’ˆï¼Œå†™å…¥stringç›¸å½“äºæŠŠæŒ‡é’ˆå†™å…¥è¿›æ–‡ä»¶ä¸­ï¼Œæ˜¯ä¹ˆæœ‰ç”¨çš„ï¼\n\næµæ’å…¥æ–‡æœ¬ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç”¨&lt;&lt;è¿›è¡Œæå–çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨stringäº†\nvoid test2()&#123;\tifstream ifs(&quot;test.txt&quot;);\tofstream ofs(&quot;test1.txt&quot;);\tchar ch;\tch = ifs.get();\twhile (~ch)\t&#123;\t\tofs &lt;&lt; ch;\t\tcout &lt;&lt; ch;\t\tch = ifs.get();\t&#125;\tstring s(&quot;i love you&quot;);\tofs &lt;&lt; s;&#125;\n\nç¨‹åºè¿è¡Œåï¼Œä¼šæŠŠtest.txtä¸­çš„å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ŒåŒæ—¶å†™å…¥åˆ°test1.txt\næœ€åè¿˜ä¼šå†™å…¥ä¸€ä¸ªstringçš„å†…å®¹\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒç”¨&lt;&lt;çš„æ—¶å€™ï¼Œå°±å’Œcin&lt;&lt;sä¸€æ ·ï¼Œè°ƒç”¨çš„æ˜¯stringé‡è½½çš„æµæå–æ“ä½œç¬¦\nåº•å±‚å®ç°çš„æ—¶å€™ä¼šå°†å…¶è½¬ä¸ºCè¯­è¨€çš„å­—ç¬¦ä¸²ï¼Œä»è€Œå†™å…¥åˆ°äº†æ–‡ä»¶ä¸­\n\næ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦å†™å…¥ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥é‡è½½æµæå–æ“ä½œç¬¦ï¼Œä¸ä»…å¯ä»¥æ›´æ–¹ä¾¿çš„æ‰“å°ï¼Œè¿˜å¯ä»¥å†™å…¥åˆ°æ–‡ä»¶ä¸­\n\n\n3.3 ostringstream&#x2F;istringstreamè¿™ä¸ªç±»å¯ä»¥å°†ä¸åŒçš„ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²\nè¿™ç§æ“ä½œè¢«ç§°ä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œåœ¨å¤„ç†è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™éå¸¸å¥½ç”¨\nstruct Date&#123;public:\tfriend ostream&amp; operator &lt;&lt; (ostream&amp; out, const Date&amp; d);\tfriend istream&amp; operator &gt;&gt; (istream&amp; in, Date&amp; d);\tDate(int y=0, int m=0, int d=0)\t&#123;\t\t_year = y;\t\t_month = m;\t\t_day = d;\t&#125;private:\tint _year;\tint _month;\tint _day;&#125;;istream&amp; operator &gt;&gt; (istream&amp; in, Date&amp; d)&#123;\tin &gt;&gt; d._year &gt;&gt; d._month &gt;&gt; d._day;\treturn in;&#125;ostream&amp; operator &lt;&lt; (ostream&amp; out, const Date&amp; d)&#123;\tout &lt;&lt; d._year &lt;&lt; &quot; &quot; &lt;&lt; d._month &lt;&lt; &quot; &quot; &lt;&lt; d._day;\treturn out;&#125;void test4()&#123;\tint i = 123;\tdouble d = 44.55;\tostringstream oss;//åºåˆ—åŒ–\toss &lt;&lt; i;\tstring stri = oss.str();\toss.str(&quot;&quot;);//æ¸…ç©ºoss\toss &lt;&lt; d;\tstring strd = oss.str();\tcout &lt;&lt; strd&lt;&lt; endl;\toss.str(&quot;&quot;);//æ¸…ç©ºoss\tDate d1(2022, 10, 11);\toss &lt;&lt; d1;\tstring strdt = oss.str();\tcout &lt;&lt; strdt &lt;&lt; endl;\tistringstream iss(strdt);//ååºåˆ—\tDate d2;\tiss &gt;&gt; d2;\tcout &lt;&lt; d2 &lt;&lt; endl;&#125;\n\n\n3.4 stringstreamè¿™ä¸ªå¯¹è±¡å¯ä»¥ç”¨äºå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å°†å…¶ä»–ç±»å‹è½¬ä¸ºstr\nstringstream sstream;// å°†å¤šä¸ªå­—ç¬¦ä¸²æ”¾å…¥ sstream ä¸­sstream &lt;&lt; &quot;first&quot; &lt;&lt; &quot; &quot; &lt;&lt; &quot;string,&quot;;sstream &lt;&lt; &quot; second string&quot;;cout &lt;&lt; &quot;strResult is: &quot; &lt;&lt; sstream.str() &lt;&lt; endl;// æ¸…ç©º sstreamsstream.str(&quot;&quot;);sstream &lt;&lt; &quot;third string&quot;;cout &lt;&lt; endl;cout &lt;&lt; &quot;After clear, strResult is: &quot; &lt;&lt; sstream.str() &lt;&lt; endl;\n\n\n3.5ä½¿ç”¨stringstreamçš„æ³¨æ„äº‹é¡¹\nstringstreamå®ç°è½¬æ¢ï¼Œå®é™…ä¸Šæ˜¯ç»´æŠ¤äº†ä¸€ä¸ªstringå¯¹è±¡å®ç°çš„\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨str(&quot;&quot;)æ¸…ç©ºé‡Œé¢çš„stringå¯¹è±¡ï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²\n\nå¤šæ¬¡æ•°æ®ç±»å‹è½¬æ¢çš„æ—¶å€™ï¼Œéœ€è¦ç”¨clear()æ¥æ¸…ç©ºï¼Œæ‰èƒ½æ­£ç¡®è½¬æ¢ã€‚ä¸è¿‡clear()ä¸ä¼šæ¸…ç©ºåº•å±‚çš„stringå¯¹è±¡\n\nå› ä¸ºä½¿ç”¨çš„æ˜¯stringå¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦æ ¼å¼åŒ–æ§åˆ¶ï¼Œå¯ä»¥è‡ªåŠ¨æ¨å¯¼ç±»å‹\n\n\nstringstreamsåœ¨è½¬æ¢ç»“å°¾æ—¶(å³æœ€åä¸€ä¸ªè½¬æ¢å),ä¼šå°†å…¶å†…éƒ¨çŠ¶æ€è®¾ç½®ä¸ºbadbitå› æ­¤ä¸‹ä¸€æ¬¡è½¬æ¢æ˜¯å¿…é¡»è°ƒç”¨clear()å°†çŠ¶æ€é‡ç½®ä¸ºgoodbitæ‰å¯ä»¥ç»§ç»­è½¬æ¢\n\nè¿™é‡Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨stringstreamæ“ä½œåï¼Œæˆ‘ä»¬æ²¡æœ‰è¿›è¡Œclearï¼Œä¼šå‘ç°åç»­çš„doubleç±»å‹è½¬æ¢å¤±è´¥äº†\n\næ‰§è¡Œäº†clearä¹‹åï¼Œè½¬æ¢æˆåŠŸï¼\nç»“è¯­å…³äºC++IOæµæ“ä½œçš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±overäº†ã€‚\nå› ä¸ºåœ¨å®é™…ä¸­ç”¨çš„å¹¶ä¸ç®—å¤šï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„å†…å®¹å¤§å¤šæ•°æ˜¯äº†è§£ä¸€äºŒï¼ŒçŸ¥é“å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠ3.0ä¸­æåˆ°çš„æŒ‰ä½ä¸æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„å°±OKäº†ï¼\n","categories":["é‡è§C++"],"tags":["C++","æ–‡ä»¶"]},{"title":"ã€C++ã€‘ç©ºé—´é…ç½®å™¨","url":"/2022/10/18/note_cpp/25%E7%A9%BA%E9%97%B4%E9%85%8D%E7%BD%AE%E5%99%A8/","content":"ç©ºé—´é…ç½®å™¨ï¼Œå¬èµ·æ¥é«˜å¤§ä¸Šï¼Œé‚£å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ\n\n\n1.ä»€ä¹ˆæ˜¯ç©ºé—´é…ç½®å™¨ï¼Ÿç©ºé—´é…ç½®å™¨æ˜¯STLæºç ä¸­å®ç°çš„ä¸€ä¸ªå°ç¶ï¼Œç”¨æ¥åº”å¯¹STLå®¹å™¨é¢‘ç¹ç”³è¯·å°å—å†…å­˜ç©ºé—´çš„é—®é¢˜ã€‚ä»–ç®—æ˜¯ä¸€ä¸ªå°å‹çš„å†…å­˜æ± ï¼Œä»¥æå‡STLå®¹å™¨åœ¨ç©ºé—´ç”³è¯·æ–¹é¢çš„æ•ˆç‡ \n\n2.äº†è§£ç©ºé—´é…ç½®å™¨STLä»¥128ä¸ªå­—èŠ‚ä¸ºåˆ†ç•Œçº¿ï¼Œå°†ç©ºé—´é…ç½®å™¨åˆ†ä¸ºäº†ä¸€çº§å’ŒäºŒçº§\n2.1 ä¸€çº§ä¸€çº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œallocate/deallocateå‡½æ•°å®é™…ä¸Šå°±æ˜¯å¯¹malloc/freeåšäº†ä¸€ä¸ªç®€å•çš„å°è£…\nstatic void * allocate(size_t n)&#123;    void *result = malloc(n);    if (0 == result) result = oom_malloc(n);    return result;&#125;static void deallocate(void *p, size_t /* n */)&#123;    free(p);&#125;//è¿™ä¸ªå‡½æ•°æ˜¯mallocå¤±è´¥çš„æ—¶å€™æ‰ä¼šè°ƒç”¨çš„template &lt;int inst&gt;void * __malloc_alloc_template&lt;inst&gt;::oom_malloc(size_t n)&#123;    void (* my_malloc_handler)();    void *result;    for (;;) &#123;        my_malloc_handler = __malloc_alloc_oom_handler;        if (0 == my_malloc_handler) &#123; __THROW_BAD_ALLOC; &#125;//æŠ›å¼‚å¸¸        (*my_malloc_handler)();        result = malloc(n);        if (result) return(result);    &#125;&#125;\n\nå½“mallocå¤±è´¥çš„æ—¶å€™ï¼Œä¸€çº§ç©ºé—´é…ç½®å™¨ä¼šæŠ›å¼‚å¸¸\n2.2 äºŒçº§åœ¨äºŒçº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œä¼šå…ˆåˆ¤æ–­å¸¦ç”³è¯·ç©ºé—´å¤§å°æ˜¯å¦å¤§äº128ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™ä¼šå»è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨\n# ifndef __SUNPRO_CCenum &#123;__ALIGN = 8&#125;;enum &#123;__MAX_BYTES = 128&#125;;enum &#123;__NFREELISTS = __MAX_BYTES/__ALIGN&#125;;# endif  /* n must be &gt; 0      */static void * allocate(size_t n)&#123;    obj * __VOLATILE * my_free_list;    obj * __RESTRICT result;    if (n &gt; (size_t) __MAX_BYTES) &#123;        return(malloc_alloc::allocate(n));    &#125;    my_free_list = free_list + FREELIST_INDEX(n);    // Acquire the lock here with a constructor call.    // This ensures that it is released in exit or during stack    // unwinding.    #       ifndef _NOTHREADS    /*REFERENCED*/    lock lock_instance;    #       endif    result = *my_free_list;    if (result == 0) &#123;        void *r = refill(ROUND_UP(n));        return r;    &#125;    *my_free_list = result -&gt; free_list_link;    return (result);&#125;;/* p may not be 0 */static void deallocate(void *p, size_t n)&#123;    obj *q = (obj *)p;    obj * __VOLATILE * my_free_list;    if (n &gt; (size_t) __MAX_BYTES) &#123;        malloc_alloc::deallocate(p, n);        return;    &#125;    my_free_list = free_list + FREELIST_INDEX(n);    // acquire lock    #       ifndef _NOTHREADS    /*REFERENCED*/    lock lock_instance;    #       endif /* _NOTHREADS */    q -&gt; free_list_link = *my_free_list;    *my_free_list = q;    // lock is released here&#125;\n\näºŒçº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œä¸»è¦çš„å‡ ä¸ªæˆå‘˜å˜é‡å¦‚ä¸‹\nstatic obj * __VOLATILE free_list[__NFREELISTS]; //å“ˆå¸Œæ¡¶// Chunk allocation state.static char *start_free;static char *end_free;static size_t heap_size;\n\nè¿™é‡Œæ˜¯ä¸€ä¸ªå†…å­˜æ± + ä¸€ä¸ªå“ˆå¸Œæ¡¶,å†…å­˜æ± çš„é•¿åº¦ä¸ºheap_size\n\nå“ˆå¸Œæ¡¶ä»¥8å­—èŠ‚å¯¹é½ï¼Œåˆ†ä¸ºäº†16ä¸ªæ¡¶ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œfree_listå“ˆå¸Œæ¡¶æ˜¯ç©ºçš„\n\nå½“æˆ‘ä»¬éœ€è¦å°äº128ä¸ªå­—èŠ‚ç©ºé—´çš„æ—¶å€™ï¼ˆä»¥16å­—èŠ‚ä¸ºä¾‹ï¼‰ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šç›´æ¥å»ä¸Šé¢çš„å†…å­˜æ± å½“ä¸­ç”³è¯·20ä¸ª16å­—èŠ‚çš„ç©ºé—´ï¼Œé“¾æ¥åˆ°16å­—èŠ‚å¯¹åº”çš„å“ˆå¸Œæ¡¶çš„ä½ç½®ï¼ˆ1å·æ¡¶ï¼‰\nåœ¨ä¸‹é¢çš„refillå‡½æ•°ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸€ç‚¹\ntemplate &lt;bool threads, int inst&gt;void* __default_alloc_template&lt;threads, inst&gt;::refill(size_t n)&#123;    int nobjs = 20;//ä¸€æ¬¡æ€§ç”³è¯·20ä¸ª    char * chunk = chunk_alloc(n, nobjs);    obj * __VOLATILE * my_free_list;    obj * result;    obj * current_obj, * next_obj;    int i;    if (1 == nobjs) return(chunk);    my_free_list = free_list + FREELIST_INDEX(n);    /* Build free list in chunk */      result = (obj *)chunk;      *my_free_list = next_obj = (obj *)(chunk + n);      for (i = 1; ; i++) &#123;        current_obj = next_obj;        next_obj = (obj *)((char *)next_obj + n);        if (nobjs - 1 == i) &#123;            current_obj -&gt; free_list_link = 0;            break;        &#125; else &#123;            current_obj -&gt; free_list_link = next_obj;        &#125;      &#125;    return(result);&#125;\n\n8å­—èŠ‚å¯¹é½çš„å¦™å¤„å‡è®¾æˆ‘ä»¬çš„listå•ä¸ªèŠ‚ç‚¹éœ€è¦12ä¸ªå­—èŠ‚ï¼Œsetå•ä¸ªå­—èŠ‚éœ€è¦16ä¸ªå­—èŠ‚\nå½“listéœ€è¦ç©ºé—´çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¹Ÿä¼šå»ç”³è¯·16ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè€Œä¸ä¼šå»ç”³è¯·12ä¸ªå­—èŠ‚ã€‚è¿™æ—¶å€™ï¼Œå½“listå°†ç”¨å®Œçš„ç©ºé—´è¿˜å›æ¥ä¹‹åï¼Œå°±èƒ½æ‹¿è¿‡å»ç»™setç”¨äº†ï¼\nå…³äºå“ˆå¸Œæ¡¶çš„ç‰¹æ®Šå¤„ç†å½“æˆ‘ä»¬ç”¨å®Œäº†ç”³è¯·çš„ç©ºé—´ï¼Œå‡†å¤‡â€œé‡Šæ”¾â€çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šå°†é‡Šæ”¾å›æ¥çš„ç©ºé—´æ’å…¥è¿›å“ˆå¸Œæ¡¶ï¼ˆå¤´æ’ï¼‰\nè¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šå¤„ç†ï¼Œå½“ç”¨å®Œçš„ç©ºé—´ï¼Œæˆ–è€…è¯´æ˜¯åˆšç”³è¯·çš„ç©ºé—´æ’å…¥è¿›å“ˆå¸Œæ¡¶çš„æ—¶å€™ï¼ŒäºŒåŠç©ºé—´é…ç½®å™¨ä¼šå°†å…¶å¼ºè½¬ä¸ºä¸€ä¸ªobjç±»å‹ï¼Œè¿™ä¸ªç±»å‹çš„å‰4/8ä¸ªå­—èŠ‚ä¼šç”¨æ¥å­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—´ï¼Œä»¥æ­¤æ„æˆé“¾è¡¨\nunion obj &#123;    union obj * free_list_link;    char client_data[1];    /* The client sees this.        */&#125;;\n\n\nå½“æˆ‘ä»¬å†æ¬¡éœ€è¦è¿™éƒ¨åˆ†å¤§å°çš„ç©ºé—´çš„æ—¶å€™ï¼Œåªéœ€è¦å°†å“ˆå¸Œæ¡¶å¤´æŒ‡é’ˆçš„æŒ‡å‘ç›´æ¥ä¿®æ”¹ï¼Œå°±èƒ½é“¾æ¥ä¸Šä¸‹ä¸€ä¸ªç©ºé—´ï¼Œå¹¶å°†ä¹‹å‰å¤´æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´æ‹¿å»ç”¨\nç”¨çš„æ—¶å€™ä¹Ÿä¸ç”¨ç®¡ä¹‹å‰åœ¨æ­¤å¤„å­˜æ”¾çš„æŒ‡é’ˆï¼Œæ¯•ç«Ÿä¸‹ä¸€æ¬¡æ”¾å›æ¥çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šæ¥å¤„ç†å®ƒçš„\n\nå†…å­˜æ± ç©ºé—´ä¸å¤Ÿç”¨äº†å’‹åŠï¼Ÿä¹‹å‰æåˆ°äº†ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨é‡Œé¢æœ‰ä¸€ä¸ªå°å†…å­˜æ± ã€‚è¦æ˜¯è¿™ä¸ªå†…å­˜æ± ç”¨å®Œäº†ï¼Œè¦å’‹æ•´å‘¢ï¼Ÿ\näºŒçº§ç©ºé—´é…ç½®å™¨æƒ³å‡ºæ¥äº†ä¸€ç§å¾ˆéªšçš„åšæ³•ï¼š\n\nå‡è®¾å½“å‰æˆ‘ä»¬éœ€è¦24å­—èŠ‚çš„ç©ºé—´\nå¯¹åº”çš„æ¡¶ä¸‹é¢æ²¡æœ‰ç©ºé—´ç»™æˆ‘ä»¬ç”¨\nå†…å­˜æ± ä¹Ÿç”¨å…‰äº†\nä½†æ˜¯48å­—èŠ‚çš„æ¡¶ä¸‹é¢è¿˜æœ‰ç©ºé—´å¯ä»¥ç”¨\nç›´æ¥æŠŠè¿™ä¸ªç©ºé—´æ‹¿è¿‡æ¥ï¼Œæ‹†æˆä¸¤ä¸ª24é“¾æ¥åˆ°24çš„æ¡¶ä¸‹é¢ï¼\n\nè¿™æ ·ä¾¿æœ‰æ•ˆæé«˜äº†ç©ºé—´åˆ©ç”¨ç‡ï¼Œä¹Ÿé¿å…äº†reallocé€ æˆçš„æ—¶é—´æ¶ˆè€—ã€‚\nå½“ç„¶ï¼Œè¦æ˜¯æ¡¶é‡Œé¢ä¹Ÿæ²¡æœ‰å¤šä½™ç©ºé—´äº†ï¼Œé‚£å°±åªèƒ½è€è€å®å®å»æ‰©å®¹äº†\n\nåªèƒ½å¤§çš„æ‹†å°çš„ï¼Œå°çš„ç©ºé—´ä¸è¿ç»­æ— æ³•ç»„æˆå¤§çš„\n\n//äºŒçº§ç©ºé—´é…ç½®å™¨é‡Œé¢çš„reallocateå°è£…template &lt;bool threads, int inst&gt;void*__default_alloc_template&lt;threads, inst&gt;::reallocate(void *p,                                                    size_t old_sz,                                                    size_t new_sz)&#123;    void * result;    size_t copy_sz;    if (old_sz &gt; (size_t) __MAX_BYTES &amp;&amp; new_sz &gt; (size_t) __MAX_BYTES) &#123;        return(realloc(p, new_sz));    &#125;    if (ROUND_UP(old_sz) == ROUND_UP(new_sz)) return(p);    result = allocate(new_sz);    copy_sz = new_sz &gt; old_sz? old_sz : new_sz;    memcpy(result, p, copy_sz);    deallocate(p, old_sz);    return(result);&#125;\n\n\n2.3 å…³äºå•ä¾‹çš„è¯´æ˜åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢ï¼Œç©ºé—´é…ç½®å™¨åªä¼šæœ‰ä¸€ä¸ª\nä½†STLåº“ä¸­çš„ç©ºé—´é…ç½®å™¨å¹¶æ²¡æœ‰æŠŠè‡ªå·±è®¾è®¡æˆå•ä¾‹ç±»ï¼Œè€Œæ˜¯ç”¨äº†ä¸€ä¸ªé—´æ¥çš„åšæ³•\nstatic obj * __VOLATILE free_list[__NFREELISTS]; //å“ˆå¸Œæ¡¶// Chunk allocation state.static char *start_free;static char *end_free;static size_t heap_size;\n\né‚£å°±æ˜¯æ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯staticé™æ€çš„\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç±»å’Œå¯¹è±¡ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ç§å•ä¾‹æ¨¡å¼ï¼\n\n2.4 ç©ºé—´é…ç½®å™¨çš„ä¼˜ç‚¹\nç©ºé—´é…ç½®å™¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œç”³è¯·ç©ºé—´çš„æ•ˆç‡å¾ˆé«˜\nç©ºé—´é…ç½®å™¨èƒ½è§£å†³é¢‘ç¹ç”³è¯·ç©ºé—´å¯¼è‡´çš„å†…å­˜ç¢ç‰‡é—®é¢˜\n\nå½“æˆ‘ä»¬ä½¿ç”¨STLå®¹å™¨é¢‘ç¹ç”³è¯·å°å—ç©ºé—´ï¼ˆæ¯”å¦‚listï¼‰å°±å®¹æ˜“å¯¼è‡´å †åŒºä¸­æœ‰éå¸¸å¤šçš„å°å—ç©ºé—´è¢«ä½¿ç”¨ï¼Œè€Œæ— æ³•ç”³è¯·ä¸€ä¸ªå¤§çš„ç©ºé—´\nç©ºé—´é…ç½®å™¨æå‰ç”³è¯·äº†ä¸€ä¸ªå¤§å—ç©ºé—´å†ç§ä¸‹ç®¡ç†ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜\nå†…å­˜å¤–ç¢ç‰‡&#x2F;å†…ç¢ç‰‡\nå¤–ç¢ç‰‡ï¼šå¤šæ¬¡ç”³è¯·å°å—ç©ºé—´é€ æˆã€‚æœ‰è¶³å¤Ÿå†…å­˜ï¼Œä½†æ˜¯ä¸è¿ç»­ï¼Œæ— æ³•ç”³è¯·å¤§å—å†…å­˜\nå†…ç¢ç‰‡ï¼šliståªéœ€è¦12ä¸ªå­—èŠ‚ï¼Œè€Œç©ºé—´é…ç½®å™¨å› ä¸ºå†…å­˜å¯¹é½è€Œç»™äº†å®ƒ16ä¸ªå­—èŠ‚ï¼Œæµªè´¹äº†4ä¸ªå­—èŠ‚é€ æˆçš„å†…å­˜ç¢ç‰‡\n\n3.å®¹å™¨å’Œç©ºé—´é…ç½®å™¨ä¹‹å‰å­¦ä¹ stlå®¹å™¨çš„æ—¶å€™ï¼Œå°±åœ¨å®šä¹‰ä¸­çœ‹åˆ°è¿‡è¿™é‡Œçš„allocé»˜è®¤æ¨¡æ¿å‚æ•°\n\nè¿™é‡Œé»˜è®¤ä¼ çš„ä¾¿æ˜¯stlåº“ä¸­çš„äºŒçº§ç©ºé—´é…ç½®å™¨\n\nåªè¦ä½ è‡ªå·±å†™çš„ç©ºé—´é…ç½®å™¨ç¬¦åˆstlçš„æ¥å£éœ€æ±‚ï¼Œä½ ä¾¿å¯ä»¥å°†è‡ªå·±çš„ç©ºé—´é…ç½®å™¨ä¼ å…¥æ­¤å¤„è®©å®¹å™¨ä½¿ç”¨ï¼\n\ntypedef __default_alloc_template&lt;__NODE_ALLOCATOR_THREADS, 0&gt; alloc;typedef __default_alloc_template&lt;false, 0&gt; single_client_alloc;\n\nåœ¨listä¸­ï¼Œallocåˆè¢«å°è£…äº†ä¸€å±‚ï¼Œç”¨æ¥å¤„ç†èŠ‚ç‚¹ç”³è¯·çš„é—®é¢˜\ntemplate &lt;class T, class Alloc = alloc&gt;class list &#123;protected:  typedef void* void_pointer;  typedef __list_node&lt;T&gt; list_node;  typedef simple_alloc&lt;list_node, Alloc&gt; list_node_allocator;\n\ntemplate&lt;class T, class Alloc&gt;class simple_alloc &#123;public:    static T *allocate(size_t n)                &#123; return 0 == n? 0 : (T*) Alloc::allocate(n * sizeof (T)); &#125;    static T *allocate(void)                &#123; return (T*) Alloc::allocate(sizeof (T)); &#125;    static void deallocate(T *p, size_t n)                &#123; if (0 != n) Alloc::deallocate(p, n * sizeof (T)); &#125;    static void deallocate(T *p)                &#123; Alloc::deallocate(p, sizeof (T)); &#125;&#125;;\n\néšåï¼Œå½“åˆ›å»ºèŠ‚ç‚¹ã€é”€æ¯èŠ‚ç‚¹çš„æ—¶å€™ï¼Œlistå°±ä¼šè°ƒç”¨å°è£…å¥½çš„simple_allocæ¥å¤„ç†ç©ºé—´\nlink_type get_node() &#123; return list_node_allocator::allocate(); &#125;void put_node(link_type p) &#123; list_node_allocator::deallocate(p); &#125; link_type create_node(const T&amp; x) &#123;    link_type p = get_node();    __STL_TRY &#123;      construct(&amp;p-&gt;data, x);//è°ƒç”¨èŠ‚ç‚¹çš„æ„é€ å‡½æ•°    &#125;    __STL_UNWIND(put_node(p));    return p;  &#125;  void destroy_node(link_type p) &#123;    destroy(&amp;p-&gt;data);//è°ƒç”¨èŠ‚ç‚¹çš„ææ„å‡½æ•°    put_node(p);  &#125;\n\n\nconstructé€šè¿‡å®šä½newæ˜¾å¼è°ƒç”¨èŠ‚ç‚¹çš„æ„é€ å‡½æ•°\ndestroyé€šè¿‡æŒ‡é’ˆæ¥è°ƒç”¨ææ„å‡½æ•°\n\ntemplate &lt;class T&gt;inline void destroy(T* pointer) &#123;    pointer-&gt;~T();&#125;template &lt;class T1, class T2&gt;inline void construct(T1* p, const T2&amp; value) &#123;  new (p) T1(value);&#125;\n\nåœ¨stl_tree.hä¸­å¯ä»¥çœ‹åˆ°åº“é‡Œé¢çš„çº¢é»‘æ ‘ä¹Ÿå¯¹ç©ºé—´é…ç½®å™¨è¿›è¡Œäº†ç±»ä¼¼çš„å°è£…\ntemplate &lt;class Key, class Value, class KeyOfValue, class Compare,          class Alloc = alloc&gt;class rb_tree &#123;protected:  typedef void* void_pointer;  typedef __rb_tree_node_base* base_ptr;  typedef __rb_tree_node&lt;Value&gt; rb_tree_node;  typedef simple_alloc&lt;rb_tree_node, Alloc&gt; rb_tree_node_allocator;  typedef __rb_tree_color_type color_type;\n\nç»“è¯­å…³äºç©ºé—´é…ç½®å™¨çš„å†…å®¹äº†è§£è¿™äº›å°±å·®ä¸å¤šå•¦ï¼\nå…¶å®å°±æ˜¯é€šè¿‡åº“é‡Œé¢çš„è¿™ä¸ªè®¾è®¡æ¥äº†è§£ä¸€ä¸ªæé«˜å°ç©ºé—´å†…å­˜ç”³è¯·æ•ˆç‡çš„æ–¹æ³•ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆ666çš„\n\næœ‰å•¥é—®é¢˜å¯ä»¥åœ¨è¯„è®ºæå‡ºå“¦\n\n","categories":["é‡è§C++"],"tags":["C++","C++11"]},{"title":"ã€C++ã€‘ç±»å‹è½¬æ¢æ–¹æ³•","url":"/2022/10/20/note_cpp/26C++%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è§è¯†ä¸€ä¸‹C++ä¸­æ–°å¢çš„ç±»å‹è½¬æ¢æ–¹æ³•\n\n\n[TOC]\n1.Cè¯­è¨€ä¸­ç±»å‹è½¬æ¢åœ¨Cè¯­è¨€ä¸­ï¼Œç±»å‹è½¬æ¢æœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\néšå¼ç±»å‹è½¬æ¢\næ˜¾ç¤ºå¼ºåˆ¶ç±»å‹è½¬æ¢int a=(int)&#39;c&#39;\n\nè¿™ä¸¤ç§æ–¹å¼æƒ³å¿…å„ä½éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†éšå¼ç±»å‹è½¬æ¢åœ¨ä¸€äº›åœºæ™¯é‡Œé¢ä¼šå‡ºç°é—®é¢˜\nvoid insert(size_t pos,char c)&#123;\tint end=10;\twhile(end&gt;=pos)\t&#123;\t\tend--;\t&#125;\t//...&#125;\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œendæ˜¯intç±»å‹ï¼Œå½“è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œendä¼š-1ç›´åˆ°å°äºpos\nå¦‚æœpos=0ï¼Œé—®é¢˜å°±æ¥äº†ï¼\néšå¼ç±»å‹è½¬æ¢ä¼šè®©endåœ¨æ¯”è¾ƒçš„æ—¶å€™è¢«è½¬æ¢ä¸ºsize_tæ— ç¬¦å·æ•´å‹ï¼Œè€Œåœ¨æ— ç¬¦å·æ•´å‹ä¸­ï¼Œ-1æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•°ï¼Œä»è€Œå¯¼è‡´è¿™ä¸ªå‡½æ•°è¿›å…¥æ­»å¾ªç¯ï¼\n\n\néšå¼ç±»å‹è½¬æ¢å¯èƒ½ä¼šä¸¢å¤±æ•°æ®çš„ç²¾åº¦\næ˜¾ç¤ºç±»å‹è½¬æ¢çš„å†™æ³•éƒ½ä¸€æ ·ï¼Œå¯¼è‡´ä¸èƒ½å¾ˆå¥½çš„åŒºåˆ†æƒ…å†µ\n\nC++å§”å‘˜ä¼šä¹Ÿæ˜¯è®¤è¯†åˆ°äº†è¿™é‡Œçš„é—®é¢˜ï¼Œå½“äº§ç”Ÿéšå¼ç±»å‹è½¬æ¢çš„æ—¶å€™ï¼Œéš¾ä»¥è·Ÿè¸ªé”™è¯¯çš„æ¥æºï¼Œäºæ˜¯å¼€å‘äº†ä¸‹é¢çš„æ–°çš„ç±»å‹è½¬æ¢æ–¹å¼\n\nä¸è¿‡ï¼Œå› ä¸ºC++å…¼å®¹Cè¯­è¨€ï¼Œæ‰€ä»¥Cä¸­çš„è½¬æ¢æ–¹å¼ä¾æ—§æ”¯æŒ\n\n\n2.C++ä¸­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢C++ä¸­æ–°å¢äº†ä¸‹é¢å››ç§æ˜æ˜çš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ“ä½œç¬¦\nstatic_castã€reinterpret_castã€const_castã€dynamic_cast\n\n2.1 static_castè¿™ä¸ªå…³é”®å­—æ˜¯ç”¨äºç›¸è¿‘ç±»å‹ä¹‹é—´çš„è½¬æ¢çš„ï¼Œæ¯”å¦‚doubleå’Œintï¼Œcharå’Œintä¹‹é—´\ndouble d = 11.4;int a1 = static_cast&lt;int&gt;(d);//ç›¸è¿‘ç±»å‹çš„è½¬æ¢char ch = &#x27;a&#x27;;int a2 = static_cast&lt;int&gt;(ch);cout &lt;&lt; a1 &lt;&lt; endl;cout &lt;&lt; a2 &lt;&lt; endl;\n\n\n2.2 reinterpret_castè¿™ä¸ªå…³é”®å­—ç”¨äºä¸ç›¸è¿‘ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œæ¯”å¦‚æŒ‡é’ˆè½¬æˆint\nint* p = &amp;a1;//int x = static_cast&lt;int&gt;(p);//æŠ¥é”™ï¼šç±»å‹è½¬æ¢æ— æ•ˆint x = reinterpret_cast&lt;int&gt;(p);//éç›¸è¿‘ç±»å‹ä¸­çš„è½¬æ¢cout &lt;&lt; x &lt;&lt; endl;\n\næ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼ˆæ¯æ¬¡è¿è¡Œéƒ½ä¸ä¸€æ ·ï¼‰\n2029408\n\n2.3 const_castå¦‚åŒå…¶åï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨æ˜¯å–æ¶ˆä¸€ä¸ªå˜é‡çš„constå±æ€§\nconst int c1 = 3;//è¿™é‡Œå®šä¹‰çš„å˜é‡æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œå¯ä»¥é—´æ¥ä¿®æ”¹int* ptr1 = const_cast&lt;int*&gt;(&amp;c1);//å–æ¶ˆconstæƒé™*ptr1 = 4;cout &lt;&lt; c1 &lt;&lt; endl;//ä¿®æ”¹äº†åœ°å€ä¹‹åæ²¡æœ‰å˜åŒ–cout &lt;&lt; *ptr1 &lt;&lt; endl;\n\n\næ¬¸ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬å–åœ°å€ä¹‹åï¼Œä¿®æ”¹ä¸º4äº†ï¼Œå˜é‡c1æœ¬èº«ä¸ä¼šå˜åŒ–å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åšäº†ä¸€äº›ä¼˜åŒ–ï¼ŒæŠŠc1æ”¾åˆ°äº†æŸä¸ªåœ°æ–¹ï¼Œå–çš„æ—¶å€™å¹¶æ²¡æœ‰ç›´æ¥å»å†…å­˜é‡Œé¢å–\nvolatileå…³é”®å­—è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨volatileå…³é”®å­—ä¿®é¥°å˜é‡ï¼Œè¦æ±‚æ¯ä¸€æ¬¡éƒ½å¿…é¡»è¦å»å†…å­˜ä¸­å–\n//volatileå…³é”®å­—ï¼Œæ¯æ¬¡è®¿é—®céƒ½å»å†…å­˜ä¸­å–ï¼Œå±è”½ç¼–è¯‘å™¨ä¼˜åŒ–volatile const int c2 = 3;int* ptr2 = const_cast&lt;int*&gt;(&amp;c2);//å–æ¶ˆconstæƒé™*ptr2 = 4;cout &lt;&lt; &quot;volatitle:  &quot;;cout &lt;&lt; c2 &lt;&lt; endl;cout &lt;&lt; *ptr2 &lt;&lt; endl;\n\n\n2.4 dynamic_castè¯¥å…³é”®å­—æ˜¯ç”¨äºç»§æ‰¿ä¸­ï¼Œå°†ä¸€ä¸ªçˆ¶ç±»çš„æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºå­ç±»å¯¹è±¡çš„æŒ‡é’ˆ/å¼•ç”¨\nä¹‹å‰å­¦ä¹ ç»§æ‰¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬äº†è§£è¿‡\n\nå‘ä¸Šè½¬å‹ï¼šçˆ¶ç±»çš„æŒ‡é’ˆã€å¼•ç”¨å¯ä»¥ç›´æ¥æŒ‡å‘å­ç±»å¯¹è±¡çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼ˆè¿™æ˜¯ä¸€ä¸ªèµ‹å€¼å…¼å®¹çš„è§„åˆ™ï¼Œä¸éœ€è¦è¿›è¡Œè½¬æ¢ï¼‰\nå‘ä¸‹è½¬å‹ï¼šåè¿‡æ¥ä¹‹åï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼å—ï¼Ÿä¸å¤Ÿå®‰å…¨\n\ndynamic_castçš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸æ˜¯ä»–çš„å­ç±»\n\nå¦‚æœæ˜¯ï¼Œèƒ½å¤ŸæˆåŠŸè½¬æ¢\nä¸èƒ½åˆ™è¿”å›0\n\nè¿™ä¸ªå…³é”®å­—æœ€å¤§çš„ä½œç”¨ï¼Œä¾¿æ˜¯å¯ä»¥å¸®æˆ‘ä»¬åˆ¤æ–­è¿™ä¸ªçˆ¶ç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨æŒ‡å‘çš„æ˜¯å¦ä¸ºä¸€ä¸ªå­ç±»å¯¹è±¡\nclass A&#123;public:\tvirtual void f() &#123;&#125;&#125;;class B : public A&#123;&#125;;void fun(A* pa)&#123;\t// dynamic_castä¼šå…ˆæ£€æŸ¥æ˜¯å¦èƒ½è½¬æ¢æˆåŠŸï¼Œèƒ½æˆåŠŸåˆ™è½¬æ¢ï¼Œä¸èƒ½åˆ™è¿”å›0\tB* pb1 = static_cast&lt;B*&gt;(pa);\tB* pb2 = dynamic_cast&lt;B*&gt;(pa);\tcout &lt;&lt; &quot;pb1:&quot; &lt;&lt; pb1 &lt;&lt; endl;\tif (pb2)\t&#123;\t\tcout &lt;&lt; &quot;è½¬æ¢æˆåŠŸï¼pb2:&quot; &lt;&lt; pb2 &lt;&lt; endl;\t&#125;\telse\t&#123;\t\tcout &lt;&lt; &quot;è½¬æ¢å¤±è´¥ï¼pb2:&quot; &lt;&lt; pb2 &lt;&lt; endl;\t&#125;\t&#125;void test2()&#123;\tA a;\tB b;\tfun(&amp;a);\tfun(&amp;b);&#125;\n\n\nè¿™é‡Œæœ‰ä¸ªè¦æ±‚ï¼Œé‚£ä¾¿æ˜¯çˆ¶ç±»ä¸­å¿…é¡»è¦æœ‰è™šå‡½æ•°ï¼ˆå¤šæ€ï¼‰ï¼Œå¦åˆ™æ— æ³•æˆåŠŸè½¬æ¢\n\n3.C++å¼ºåˆ¶ç±»å‹è½¬æ¢çš„ä½œç”¨C++å¸Œæœ›æˆ‘ä»¬è§„èŒƒå¼ºåˆ¶ç±»å‹è½¬æ¢çš„æƒ…æ™¯ï¼Œé’ˆå¯¹æ€§çš„è°ƒç”¨ä¸åŒçš„å…³é”®å­—\nä½†æ˜¯ç”±äºå®ƒæ²¡æœ‰å¼ºåˆ¶ï¼Œåœ¨å®é™…æƒ…å†µä¸­ç”¨çš„åè€Œä¸å¤š\nä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šå…³é—­&#x2F;æŒ‚èµ·æ­£å¸¸çš„ç±»å‹æ£€æŸ¥ï¼Œåœ¨å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬è¦ä»”ç»†æ£€æŸ¥æ˜¯å¦è¿˜æœ‰åˆ«çš„æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚æœ€å¥½æ˜¯é¿å…ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢!\n4.RTTIä¹‹å‰å­¦ä¹ æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å­¦è¿‡ä¸€ç§æ€è·¯å«RAII\nè¿™é‡Œçš„RTTIå…¨ç§°ä¸ºRun-time Type identificationï¼Œå³è¿è¡Œæ—¶ç±»å‹è¯†åˆ«\nC++é€šè¿‡ä¸‹é¢å‡ ç§æ–¹å¼æ¥æ”¯æŒRTTIï¼š\n\ntypeid\ndecltype\ndyanmic_cast\n\nè¿™ä¸ªæ¦‚å¿µåªéœ€è¦äº†è§£å³å¯ï¼\n","categories":["é‡è§C++"],"tags":["C++","C++11"]},{"title":"ã€C++ã€‘usingçš„ä¸‰ç§ç”¨æ³•","url":"/2023/02/08/note_cpp/27using%E7%9A%84%E4%B8%89%E7%A7%8D%E7%94%A8%E6%B3%95/","content":"C++ usingçš„ä¸‰ç§ç”¨æ³•ï¼Œè¿™ä¸ªä¹‹å‰è¿˜æ²¡æœ‰æ¥è§¦è¿‡\n\n\nç¤ºä¾‹#include &lt;iostream&gt;using namespace std;class ClassOne &#123;public:\tint w;protected:\tint a;&#125;;class ClassTwo&#123;public:\tusing ModuleType = ClassOne;&#125;;template &lt;typename ClassType&gt;class ClassThree : private ClassType&#123;public:\tusing typename ClassType::ModuleType;\tModuleType m;\tClassThree() = default;\tvirtual ~ClassThree() = default;&#125;;void main()&#123;\tClassThree&lt;ClassTwo&gt;::ModuleType a;&#125;\n\n\nåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰å¤„ä½¿ç”¨äº†usingï¼Œåˆ†åˆ«æ˜¯ç¬¬3,16,22è¡Œï¼Œå®ƒä»¬çš„ä½œç”¨ä¸ºï¼š\n\nå¼•å…¥å‘½åç©ºé—´\næŒ‡å®šåˆ«å\nåœ¨å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜\n\nå¼•å…¥å‘½åç©ºé—´æŒ‡å®šå‘½åç©ºé—´æ˜¯C++ using namespaceä¸­æœ€å¸¸è¢«ç”¨åˆ°çš„åœ°æ–¹ï¼Œåœ¨ç¬¬3è¡Œä¸­çš„ï¼š\nusing namespace std;\n\n\næŒ‡å®šåˆ«åusingçš„å¦ä¸€ä¸ªä½œç”¨æ˜¯æŒ‡å®šåˆ«åï¼Œä¸€èˆ¬éƒ½æ˜¯using a = b;è¿™æ ·çš„å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚åœ¨13è¡Œä¸­ï¼š\nusing ModuleType = ClassOne;\n\n\nModuleType æ˜¯ClassOneçš„ä¸€ä¸ªåˆ«åã€‚usingè¿™ä¸ªä½œç”¨ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚åœ¨vector.hä¸­å°±æœ‰ï¼š\ntemplate&lt;class _Ty,class _Alloc = allocator&lt;_Ty&gt;&gt;class vector: public _Vector_alloc&lt;_Vec_base_types&lt;_Ty, _Alloc&gt;&gt;&#123;public:\tusing value_type = _Ty;\tusing allocator_type = _Alloc;&#125;\n\nå³value_type æ˜¯_Tyçš„ä¸€ä¸ªåˆ«åï¼Œvalue_type a; å’Œ_Ty a;æ˜¯åŒæ ·çš„æ•ˆæœã€‚\n\nå¯ä»¥ç†è§£ä¸ºC++ä¸­çš„typedef\n\nåœ¨å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜usingçš„ç¬¬ä¸‰ä¸ªä½œç”¨æ˜¯å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜ï¼Œä¸€èˆ¬éƒ½æ˜¯using CBase::a;è¿™æ ·çš„å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚åœ¨22è¡Œä¸­ï¼š\nusing typename ClassType::ModuleType;\n\nå®ƒå’Œä¸€èˆ¬å½¢å¼æœ‰äº›åŒºåˆ«ï¼Œå°±æ˜¯å®ƒåŠ äº†ä¸ªtypename ä¿®é¥°ï¼Œè¿™æ˜¯å› ä¸ºç±»ClassThreeæœ¬èº«æ˜¯ä¸ªæ¨¡æ¿ç±»ï¼Œå®ƒçš„åŸºç±»ClassTypeæ˜¯ä¸ªæ¨¡æ¿ï¼Œè¿™ä¸ªtypename å’Œusingå…¶å®æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚å¦‚æœClassTypeä¸æ˜¯æ¨¡æ¿çš„è¯ï¼Œè¿™è¡Œä»£ç å°±å¯ä»¥å†™æˆï¼š\nusing ClassType::ModuleType;\n\nå‰©ä¸‹çš„å°±æ˜¯usingçš„ä½œç”¨ï¼Œå®ƒå¼•ç”¨äº†åŸºç±»ä¸­çš„æˆå‘˜ModuleTypeï¼Œ ModuleTypeåˆæ˜¯ç±»ClassOneçš„åˆ«åï¼Œæ‰€ä»¥åé¢ModuleType m;ç›¸å½“äºå®šä¹‰å¯¹è±¡mï¼Œå¯¹äºå­ç±»æˆå‘˜mæ¥è¯´ï¼Œè¿™æ ·çš„æ•ˆæœå’Œä¸‹é¢æ˜¯ç›¸åŒçš„ï¼š\ntypename ClassType::ModuleType m;\n\nä¸åŒä¹‹å¤„åœ¨äºusingè¿˜ä¿®æ”¹äº†åŸºç±»æˆå‘˜çš„è®¿é—®æƒé™ï¼Œå­ç±»ClassThree ç§æœ‰ç»§æ‰¿ClassTypeï¼Œæ‰€ä»¥ClassTypeä¸­å…±æœ‰æˆå‘˜ModuleType åœ¨å­ç±»ClassThree æ˜¯ç§æœ‰çš„ï¼Œå®ƒä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ã€‚ä½†æ˜¯ä½¿ç”¨usingåï¼Œåœ¨main()å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨ã€‚\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª [CC 4.0 BY-SA] ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚æœ¬æ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/chaipp0607/article/details/100128842\n\n","categories":["é‡è§C++"],"tags":["C++","C++11"]},{"title":"ã€C++ã€‘thread|mutex|atomic|condition_variable","url":"/2023/02/19/note_cpp/28C++%E7%BA%BF%E7%A8%8B/","content":"æœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹C++ä¸­çš„çº¿ç¨‹æ“ä½œ\n\n\n\næ‰€ç”¨ç¼–è¯‘å™¨ï¼švs2019\né˜…è¯»æœ¬æ–‡å‰ï¼Œå»ºè®®å…ˆäº†è§£çº¿ç¨‹çš„æ¦‚å¿µ ğŸ‘‰ çº¿ç¨‹æ¦‚å¿µ\n\n1.åŸºæœ¬ä»‹ç»åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œwindowsã€linuxã€macä¸Šï¼Œéƒ½ä¼šå¯¹å¤šçº¿ç¨‹æ“ä½œæä¾›è‡ªå·±çš„ç³»ç»Ÿè°ƒç”¨æ¥å£\nä¸ºä»€ä¹ˆC++éœ€è¦å°è£…ä¸€ä¸ªçº¿ç¨‹ï¼Ÿç›´æ¥ç”¨ç³»ç»Ÿçš„æ¥å£ä¸å¥½å—ï¼Ÿ\nåœ¨Linuxæ–‡ä»¶åšå®¢ä¸­ï¼Œå·²ç»è°ˆè¿‡äº†è¿™ä¸€ç‚¹ï¼šå¯¹äºC++ã€pythonã€javaè¿™äº›è·¨å¹³å°çš„è¯­è¨€æ¥è¯´ï¼Œå¦‚æœç›´æ¥ç”¨ç³»ç»Ÿçš„æ¥å£ï¼Œæ˜¯å¯ä»¥å®ç°å¯¹åº”æ“ä½œçš„ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç åªèƒ½åœ¨æŸä¸€ä¸ªç‰¹å®šå¹³å°ï¼Œç”šè‡³æ˜¯æŸä¸€ä¸ªç‰ˆæœ¬çš„ç‰¹å®šæ“ä½œç³»ç»Ÿä¸Šæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œç›´æ¥ä¸è·¨å¹³å°çš„ç‰¹æ€§ç›¸è¿èƒŒã€‚\nè§£å†³çš„åŠæ³•å‘¢ï¼Œå°±æ˜¯å¯¹ç³»ç»Ÿçš„æ¥å£å¥—ä¸€ä¸ªè¯­è¨€çº§åˆ«çš„è½¯ä»¶å±‚ï¼Œå°è£…ç³»ç»Ÿçš„æ¥å£ã€‚å¹¶ç”¨æ¡ä»¶ç¼–è¯‘çš„æ–¹å¼æ¥è¯†åˆ«ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå·²è°ƒç”¨ä¸åŒæ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿæ¥å£ï¼Œä»¥å®ç°è·¨å¹³å°æ€§\n2.threadç±»\nhttps://legacy.cplusplus.com/reference/thread/thread/thread/\n\n2.1 æ„é€ &#x2F;èµ‹å€¼\n\nçº¿ç¨‹æ˜¯ä¸å…è®¸æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„ï¼Œä½†æ˜¯å…¶æ”¯æŒå³å€¼å¼•ç”¨çš„é‡è½½ï¼ˆä¸»è¦æ˜¯ä¸ºäº†åŒ¿åå¯¹è±¡æ„é€ ï¼‰ä¹Ÿæ”¯æŒç©ºæ„é€ \n\nå³å€¼ï¼šæ— æ³•è¿›è¡Œå–åœ°å€çš„å˜é‡\n\n2.2 get_idå¯¹äºçº¿ç¨‹è€Œè¨€ï¼Œæ¯”è¾ƒé‡è¦çš„å°±æ˜¯è¿™ä¸ªidå·äº†ï¼Œå…¶ç”¨äºæ ‡è¯†çº¿ç¨‹çš„å”¯ä¸€æ€§\n\n2.3 join&#x2F;detachåˆ›å»ºå¥½äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œjoinç­‰å¾…æˆ–è€…detachåˆ†ç¦»\n\nå¦‚æœä¸»çº¿ç¨‹ä¸éœ€è¦è·å–å­è¿›ç¨‹æ‰§è¡Œçš„ç»“æœï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œdetach\nå¦‚æœéœ€è¦ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œjoin\n\nä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™ä¸¤ä¸ªåˆ†æ­§å‘¢ï¼Ÿæ˜¯å› ä¸ºjoinç­‰å¾…æ˜¯æœ‰ä¸€å®šæ¶ˆè€—çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒçº¿ç¨‹æ‰§è¡Œçš„è¿”å›å€¼ï¼Œåº”è¯¥é‡‡ç”¨detachå°½é‡å‡å°æ¶ˆè€—\n2.4 ä½¿ç”¨ç¤ºä¾‹ç›¸æ¯”äºLinuxç³»ç»Ÿæä¾›çš„pthreadæ¥å£ï¼ŒC++çš„ä½¿ç”¨æ–¹æ³•æ›´åŠ ç›´æ¥\n#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;void Add(int a, int b)&#123;\tcout &lt;&lt; a + b &lt;&lt; endl;;&#125;int main()&#123;\tthread t1(Add, 10, 20);\tthread t2(Add, 10, 30);\tt1.join();\tt2.join();\treturn 0;&#125;\n\n\n2.5 ç©ºæ„é€ å’Œç§»åŠ¨èµ‹å€¼å¦‚æœæˆ‘ä»¬åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªt1ï¼Œæ²¡æœ‰ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°æŒ‡å®šå…¶è¦è¿è¡Œçš„å‡½æ•°ï¼ˆå…¶å®æ˜¯è°ƒç”¨äº†ç©ºæ„é€ ï¼‰é‚£ä¹ˆè¦æ€ä¹ˆç»™è¿™ä¸ªçº¿ç¨‹æŒ‡å®šå‡½æ•°å‘¢ï¼Ÿ\nthread t3;//è°ƒç”¨äº†ç©ºæ„é€ \n\nåˆ«å¿˜äº†ï¼Œè™½ç„¶çº¿ç¨‹ä¸æ”¯æŒæ‹·è´æ„é€ ï¼Œä½†ä»–æœ‰ç§»åŠ¨èµ‹å€¼ï¼\nthread&amp; operator= (thread&amp;&amp; rhs) noexcept;\n\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯é‡‡ç”¨åŒ¿åå¯¹è±¡çš„æ–¹å¼ï¼Œèµ‹å€¼ç»™t3\nthread t3;t3 = thread(Add, 20, 30);t3.join();\n\n\n2.6 joinablebool joinable() const noexcept;\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ ‡è¯†ä¸€ä¸ªçº¿ç¨‹æ˜¯å¦è¿˜èƒ½è¿›è¡Œjoinï¼›ä¸‹é¢å‡ ç§æƒ…å†µï¼Œçº¿ç¨‹ä¸èƒ½è¢«join\n\nåªè°ƒç”¨äº†ç©ºæ„é€ ï¼ˆéƒ½æ²¡æœ‰æŒ‡å®šéœ€è¦è¿è¡Œçš„å‡½æ•°æ€ä¹ˆjoinç­‰å¾…ï¼Ÿï¼‰\nè¢«moveäº†ï¼ˆmoveä¼šå°†å¯¹è±¡å˜æˆå°†äº¡å€¼ï¼Œä¹Ÿå°±æ˜¯å³å€¼ï¼‰\nè¯¥å¯¹è±¡å·²ç»è°ƒç”¨è¿‡joinæˆ–è€…detach\n\nå¦‚æœæ˜¯åœ¨å¤šå±‚å‡½æ•°ä¸­è°ƒç”¨çš„çº¿ç¨‹ï¼Œé‚£å¯èƒ½joinä¹‹å‰å°±å¯ä»¥åˆ¤æ–­ä¸€ä¸‹å½“å‰å¯¹è±¡æ˜¯å¦è¿˜èƒ½join\n2.7 swap&#x2F;movevoid swap (thread&amp; x) noexcept;\n\nè¯¥æˆå‘˜å‡½æ•°çš„ä½œç”¨æ˜¯å°†å¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢ç»™å½“å‰çº¿ç¨‹\n\nå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªmoveç§»åŠ¨èµ‹å€¼\n\nè¢«ç§»åŠ¨åçš„çº¿ç¨‹t3ä¸å†joinableï¼Œä¸ä¼šè¿è¡Œï¼Œä¹Ÿä¸èƒ½è¢«joinæˆ–detach\n\nå¼ºè¡Œjoinä¼šæŠ¥é”™\n\n2.8 linuxä¸‹ç¼–è¯‘ç”±äºstdæ˜¯å¯¹ç³»ç»Ÿæ¥å£è¿›è¡Œçš„å°è£…\\\næ‰€ä»¥åœ¨linuxä¸‹ç¼–è¯‘å¸¦c++çº¿ç¨‹åº“çš„ä»£ç æ—¶ï¼Œéœ€è¦å¸¦ä¸Špthreadåº“çš„é€‰é¡¹\ng++ test.cpp -o test -std=c++11 -lpthread\n\n3.std::refè¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°refï¼Œè¦æƒ³çŸ¥é“å…¶ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯\n3.1 å¼•ç”¨ä¼ å‚#define _CRT_SECURE_NO_WARNINGS 1//#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;functional&gt;using namespace std;void Print(int n,int&amp; a)&#123;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; &quot; &lt;&lt;  a++ &lt;&lt; endl;\t&#125;&#125;int main()&#123;\tint count = 0;\tthread t1(Print,10, count);\tthread t2(Print,10, count);\tt1.join();\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; count &lt;&lt; endl;\treturn 0;&#125;\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘æƒ³è¾¾åˆ°çš„ç›®æ ‡æ˜¯è®©t1å’Œt2ä¸¤ä¸ªçº¿ç¨‹å¸®æˆ‘ä»¬å¯¹countè¿›è¡Œ++ï¼Œæœ€ç»ˆåœ¨mainé‡Œé¢æ‰“å°ç»“æœï¼›å¯ç¼–è¯‘ä¼šå‘ç°æŠ¥é”™ï¼Œä¸ç»™æˆ‘ä»¬è¿™æ ·å†™\n\nç›¸åŒçš„ä»£ç åœ¨linuxä¸‹ä¹Ÿå‡ºç°äº†ç¼–è¯‘é”™è¯¯ï¼Œæ‰€ç”¨g++ç‰ˆæœ¬å¦‚ä¸‹\ng++ (GCC) 11.2.1 20220127 (Red Hat 11.2.1-9)\n\n\nä¸ºäº†ç¡®è®¤å…·ä½“çš„æŠ¥é”™ä½ç½®ï¼Œæˆ‘ä»¬å…ˆæŠŠint&amp; açš„å¼•ç”¨å»æ‰ï¼Œå†çœ‹çœ‹æƒ…å†µ\n\nèƒ½çœ‹åˆ°ï¼Œåœ¨æ²¡æœ‰é‡‡ç”¨å¼•ç”¨ä¼ å‚çš„æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¸­å¯¹countè¿›è¡Œçš„æ“ä½œå¹¶ä¸ä¼šåé¦ˆåˆ°mainä¸­ï¼Œå› ä¸ºé‡‡ç”¨çš„æ˜¯ä¼ å€¼ï¼Œä¼šè¿›è¡Œæ‹·è´ã€‚\n3.2 threadæ„é€ å‡½æ•°é‚£ä¸ºä»€ä¹ˆåŠ ä¸Šå¼•ç”¨ä¹‹åï¼Œä¼šæŠ¥é”™å‘¢ï¼Ÿè¿™å°±å’Œthreadçš„æ„é€ å‡½æ•°æœ‰å…³ç³»äº†\ntemplate &lt;class Fn, class... Args&gt;explicit thread (Fn&amp;&amp; fn, Args&amp;&amp;... args);\n\nå¦‚ä¸Šï¼Œå½“æˆ‘ä»¬æ„é€ ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡çš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯å¯å˜æ¨¡æ¿å‚æ•°ï¼›åœ¨æˆ‘çš„åšå®¢ä¸­å†™åˆ°è¿‡ï¼Œå¯å˜æ¨¡æ¿å‚æ•°éœ€è¦é‡‡ç”¨é€’å½’æ¥è¿›è¡Œå‚æ•°ç±»å‹çš„æ¨æµ‹ã€‚\nç”±äºåº•å±‚å®ç°çš„é—®é¢˜ï¼ˆä¹Ÿåªèƒ½æ˜¯è¿™ä¸ªåŸå› äº†ï¼‰åœ¨è¿›è¡Œæ„é€ çš„å®Œç¾è½¬å‘æ—¶ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½é‡‡ç”¨äº†æ‹·è´è€Œä¸æ˜¯å¼•ç”¨ä¼ å‚ã€‚\nè¿™ä¹Ÿå°±å¯¼è‡´æˆ‘ä»¬æ²¡æœ‰åŠæ³•å°†ä¸€ä¸ªå‚æ•°é€šè¿‡å¼•ç”¨ä¼ å…¥çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼\n\nç”¨æŒ‡é’ˆè‚¯å®šæ˜¯å¯ä»¥çš„ï¼Œå¯C++æå‡ºå¼•ç”¨è¿™ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨æŒ‡é’ˆ\n\n3.3 refå‡ºåœº\nhttps://legacy.cplusplus.com/reference/functional/ref/?kw=ref\n\näºæ˜¯ä¹ï¼Œstdåº“ä¸­å°±æ–°å¢äº†ä¸€ä¸ªåº“å‡½æ•°refï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜\n// refçš„ç”¨æ³•template &lt;class T&gt; reference_wrapper&lt;T&gt; ref (T&amp; elem) noexcept;template &lt;class T&gt; reference_wrapper&lt;T&gt; ref (reference_wrapper&lt;T&gt;&amp; x) noexcept;\ttemplate &lt;class T&gt; void ref (const T&amp;&amp;) = delete;\n\n\nConstructs an object of the appropriate reference_wrapper type to hold a reference to elem.\nIf the argument is itself a reference_wrapper (2), it creates a copy of x instead.\nThe function calls the proper reference_wrapper constructor.\n\nè¿™ä¸ªå‡½æ•°ä¼šæ„é€ ä¸€ä¸ªåˆé€‚çš„reference_wrapperå¯¹è±¡ï¼Œæ¥ç®¡ç†ä¸€ä¸ªå˜é‡çš„å¼•ç”¨ã€‚å¦‚æœå‚æ•°æœ¬èº«å°±æ˜¯reference_wrapperç±»å‹ï¼Œåˆ™ä¼šè°ƒç”¨reference_wrapperçš„æ‹·è´æ„é€ ã€‚\nè€Œrefå‡½æ•°ä¸èƒ½ä¼ é€’å³å€¼ï¼Œå…¶å³å€¼å¼•ç”¨çš„é‡è½½æ˜¯è¢«deleteçš„\n\n3.4 refä½¿ç”¨thread t1(Print,10, ref(count));thread t2(Print,10, ref(count));t1.join();t2.join();\n\nä½¿ç”¨äº†è¯¥åº“å‡½æ•°ä¹‹åï¼Œç¼–è¯‘ä¸å†æŠ¥é”™ï¼Œmainä¸­çš„å€¼ä¹ŸæˆåŠŸè¢«ä¿®æ”¹\n\né€šè¿‡refä¼ é€’çš„å‚æ•°ï¼Œä¹Ÿä¼šéµå®ˆå‡½æ•°æœ¬èº«çš„å˜é‡è§„åˆ™ã€‚å¦‚æœå‡½æ•°æœ¬èº«æ²¡æœ‰é‡‡ç”¨å¼•ç”¨ä¼ å‚ï¼Œåˆ™è¿˜æ˜¯è°ƒç”¨ä¼ å€¼å‚æ•°ï¼Œä¼šè¿›è¡Œæ‹·è´ï¼›\n\nä¸ºäº†é¿å…åç»­å‡ºç°è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ç»™æ‰€æœ‰å¯¹çº¿ç¨‹çš„å·¦å€¼ä¼ å‚éƒ½å¸¦ä¸ŠrefğŸ˜æ¯”å¦‚ç»™ä¸¤ä¸ªçº¿ç¨‹å‡½æ•°ä¼ å…¥åŒä¸€æŠŠé”çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡‡ç”¨refè¿›è¡Œå¼•ç”¨ä¼ å‚\n4.æŒ‡ä»¤é‡æ’\nè°ˆè°ˆæŒ‡ä»¤é‡æ’ - çŸ¥ä¹\né¢è¯•å®˜: æœ‰äº†è§£è¿‡æŒ‡ä»¤é‡æ’å—ï¼Œä»€ä¹ˆæ˜¯happens-before\n\n4.1 ä»€ä¹ˆæ˜¯é‡æ’åºé¦–å…ˆï¼Œä»€ä¹ˆæ˜¯é‡æ’åºâ“è®¡ç®—æœºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¼šå¯¹ç¼–è¯‘å™¨å’Œç¼–è¯‘å™¨åšæŒ‡ä»¤é‡æ’ã€‚\nè¿™ä¹ˆåšä¸ºå•¥å¯ä»¥æé«˜æ€§èƒ½å‘¢â“\næˆ‘ä»¬çŸ¥é“è®¡ç®—æœºåœ¨æ‰§è¡Œçš„æ—¶å€™éƒ½æ˜¯ä¸€ä¸ªä¸ªæŒ‡ä»¤å»æ‰§è¡Œï¼Œä¸åŒçš„æŒ‡ä»¤å¯èƒ½æ“ä½œçš„ç¡¬ä»¶ä¸ä¸€æ ·ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿä¸­æ–­ã€‚\næ‰“ä¸ªæ¯”æ–¹ï¼Œä¸¤ä¸ªæŒ‡ä»¤aå’Œbä»–ä»¬æ“ä½œçš„ä¸œè¥¿å„ä¸ç›¸åŒï¼Œå¦‚æœåŠ è½½açš„æ—¶å€™åœé¡¿äº†ï¼Œbå°±åŠ è½½ä¸åˆ°ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒä»¬äº’è¡¥å½±å“ï¼Œæˆ‘ä¹Ÿå¯ä»¥å…ˆåŠ è½½båœ¨åŠ è½½aï¼Œæ‰€ä»¥æŒ‡ä»¤é‡æ’æ˜¯å‡å°‘åœé¡¿çš„ä¸€ç§æ–¹æ³•ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æ•ˆç‡ã€‚\n4.1.1 æŒ‡ä»¤é‡æ’çš„æ–¹å¼æŒ‡ä»¤é‡æ’ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§\n\nç¼–è¯‘å™¨ä¼˜åŒ– é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåº\næŒ‡ä»¤å¹¶è¡Œé‡æ’ åˆ©ç”¨æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯å°†å¤šä¸ªæŒ‡ä»¤å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚æœæŒ‡ä»¤ä¹‹å‰æ²¡æœ‰æ•°æ®ä¾èµ–ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåº\nå†…å­˜ç³»ç»Ÿé‡æ’ ç”±äºå¤„ç†ä½¿ç”¨ç¼“å­˜å’Œè¯»å†™ç¼“å†²åŒºï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯ä¹±åºçš„\n\næŒ‡ä»¤é‡æ’å¯ä»¥ä¿è¯ä¸²è¡Œè¯­ä¹‰ä¸€è‡´ï¼Œä½†æ˜¯æ²¡æœ‰ä¹‰åŠ¡ä¿è¯å¤šçº¿ç¨‹é—´çš„è¯­ä¹‰ä¹Ÿä¸€è‡´**ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹ï¼ŒæŒ‡ä»¤é‡æ’åºå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜\n4.2 å®é™…åœºæ™¯ä»¥æ‡’æ±‰çš„å•ä¾‹æ¨¡å¼ä¸ºä¾‹\n// è·å–å•ä¾‹å¯¹è±¡static InfoMgr* GetInstance()&#123;    if (_sp == nullptr)//ç¬¬ä¸€æ¬¡æ£€æµ‹ä¿è¯å•ä¾‹    &#123;        unique_lock&lt;mutex&gt; lock(_mtx);        if (_sp == nullptr)//ç¬¬äºŒæ¬¡æ£€æµ‹ä¿è¯çº¿ç¨‹å®‰å…¨        &#123;            _sp = new InfoMgr;        &#125;    &#125;    return _sp;&#125;\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œnewä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰§è¡Œçš„é¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„\noperator newæ„é€ å¯¹è±¡èµ‹å€¼ç»™_sp\n\nä½†ç¼–è¯‘å™¨å¦‚æœè¿›è¡Œäº†æŒ‡ä»¤é‡æ’ï¼Œå¯èƒ½å°±ä¼šå˜æˆè¿™æ ·\noperator newèµ‹å€¼ç»™_spæ„é€ å¯¹è±¡\n\nå¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°ç¬¬äºŒæ­¥èµ‹å€¼ç»™_spçš„æ—¶å€™ï¼Œå› ä¸ºæ—¶é—´ç‰‡åˆ°äº†è¢«åˆ‡æ¢èµ°äº†ï¼›å…¶ä»–çº¿ç¨‹æ¥è·å–å•ä¾‹ï¼Œå°±ä¼šå¯¼è‡´_spå˜é‡æ˜¯ä¸€ä¸ªå·²ç»è¢«èµ‹å€¼äº†ï¼Œä½†æ˜¯å…¶æŒ‡å‘çš„æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„ç©ºå¯¹è±¡ï¼Œè¿™æ˜¯é”™è¯¯çš„ï¼\n4.3 å¯è¡Œçš„è§£å†³åŠæ³•ï¼šå†…å­˜æ …æ æ‰€è°“å†…å­˜æ …æ ï¼Œæ˜¯ç³»ç»Ÿæä¾›çš„çš„æ¥å£ï¼Œç”¨äºç¦æ­¢cpuå¯¹æŒ‡ä»¤çš„ä¼˜åŒ–ï¼›\n\nhttps://blog.csdn.net/qq_16498553/article/details/128030833\n\nä½†å†…å­˜æ ˆæ æ˜¯ç³»ç»Ÿæ¥å£ï¼Œæ²¡æœ‰è·¨å¹³å°æ€§ï¼›è¿™é‡Œåªåšäº†è§£ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªé—®é¢˜å³å¯ï¼\n\nåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒ4.2ä¸­æåˆ°çš„é—®é¢˜ï¼Œå› ä¸ºæŒ‡ä»¤ä¼˜åŒ–æ˜¯æœ‰ä¸¥æ ¼è§„åˆ™çš„ï¼Œä¸ä¼šå¯¹èµ‹å€¼å’Œæ„é€ è¿™ç±»æŒ‡ä»¤è¿›è¡Œèƒ¡ä¹±ä¼˜åŒ–ï¼ˆå› ä¸ºè¿™æ ·ä¼˜åŒ–å¹¶ä¸ä¼šæœ‰æ•ˆç‡æå‡å•Šï¼‰\nä½†è¿™ä¹Ÿéœ€è¦çœ‹å…·ä½“å¹³å°çš„åº•å±‚å®ç°äº†ï¼\n5.è·å–çº¿ç¨‹è¿”å›å€¼5.1 è¾“å‡ºå‹å‚æ•°åœ¨Cè¯­è¨€ä¸­ï¼Œæƒ³è·å–çº¿ç¨‹è¿”å›å€¼ï¼Œéœ€è¦ä½¿ç”¨è¾“å‡ºå‹å‚æ•°ï¼ˆC++å¯ä»¥ç”¨å¼•ç”¨ä¼ å€¼ï¼‰\nint Add(int a, int b,int&amp; out)&#123;\tout = a + b;\treturn out;&#125;void test2()&#123;\tint ret = 0;\tthread t2(Add, 10, 39, ref(ret));\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n5.2 lambdaåœ¨C++ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œæ¥åœ¨mainä¸­è·å–çº¿ç¨‹çš„è¿”å›å€¼\nint Add(int a, int b)&#123;\treturn a + b;&#125;void test2()&#123;\tint ret = 0;\tthread t1([&amp;ret]() &#123; ret = Add(10, 29); &#125;);\tt1.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n6.å‡½æ•°é‡è½½é—®é¢˜åœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å…·æœ‰é‡è½½ï¼Œçº¿ç¨‹æ˜¯ä¸æ”¯æŒçš„ï¼›\nå…·ä½“çš„åŸå› å˜›ï¼Œæˆ‘çŒœå’Œçº¿ç¨‹æ„é€ çš„å¯å˜æ¨¡æ¿å‚æ•°æœ‰å…³ç³»ã€‚\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œè§£å†³åŠæ³•ï¼Œæ˜¯ç»™ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæˆ–è€…fuctionalå¯¹è±¡ï¼Œæ‰‹åŠ¨æŒ‡å®šä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå‡½æ•°ã€‚\nå½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªè§£å†³åŠæ³•ï¼šçº¿ç¨‹è°ƒç”¨çš„å‡½æ•°ä¸è¦æœ‰é‡è½½ğŸ˜‚\nint Add(int a, int b,int&amp; out)&#123;\tout = a + b;\treturn out;&#125;int Add(int a, int b)&#123;\tint tmp = a + b;\tcout &lt;&lt; tmp &lt;&lt; endl;;\treturn tmp;&#125;void test2()&#123;\tint ret = 0;\t// ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæŒ‡å®šå¯¹åº”çš„å‡½æ•°\tthread t2(static_cast&lt;int(*)(int a, int b, int&amp; out)&gt;(Add), 10, 39, ref(ret));\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n7.this_threadstdåº“ä¸­è¿˜ç”¨å‘½åç©ºé—´å¯¹çº¿ç¨‹çš„ä¸€äº›æ“ä½œè¿›è¡Œäº†å°è£…\n\n\nget_id è·å–çº¿ç¨‹idå·ï¼ˆå…¶å®çº¿ç¨‹ç±»é‡Œé¢å·²ç»æœ‰è¿™ä¸ªä¸œä¸œäº†ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿å‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ï¼Œåˆå¤šå¼€äº†ä¸€ä¸ªå‡½æ•°ï¼‰\nyield æ”¾å¼ƒè‡ªå·±çš„æ—¶é—´ç‰‡\nsleep_until ä¼‘çœ åˆ°ä¸€ä¸ªæ—¶é—´ç‚¹ï¼ˆæ¯”å¦‚ç¡åˆ°æ˜å¤©æ—©å…«ï¼‰\nsleep_for ä¼‘çœ ä¸€å®šæ—¶é—´ï¼ˆç¡2åˆ†é’Ÿï¼‰\n\nä¸‹é¢æ¥å¯¹åé¢ä¸‰ä¸ªå‡½æ•°åšä¸€ç‚¹è§£é‡Šï¼ˆç¬¬ä¸€ä¸ªå°±ä¸è§£é‡Šäº†å“ˆï¼‰\n7.1 yieldyieldçš„ä½œç”¨æ˜¯è®©å‡ºå½“å‰çº¿ç¨‹çš„æ—¶é—´ç‰‡ï¼›\næˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œæ—¶é—´ç‰‡åˆ°äº†ï¼Œå°±ä¼šè¿›è¡Œçº¿ç¨‹çš„åˆ‡æ¢ï¼›\nä»¥ä¸‹é¢çš„åœºæ™¯ä¸ºä¾‹\nvolatile bool ready = false;void count1m(int id) &#123;\t// å¦‚æœmainæ²¡æœ‰è®¾ç½®readyä¿¡å·ï¼Œçº¿ç¨‹ä¼šä¸€ç›´è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œä¸ä¼šè¿è¡Œ\twhile (!ready) \t&#123;            \t\tthis_thread::yield();\t&#125;\t// å¼€å§‹è¿è¡Œï¼Œ++æ•°æ®\tvolatile int i = 0;\tfor (i=0; i &lt; 10000000; i++) \t&#123; \t\t; // å¾ªç¯ä½“å•¥éƒ½ä¸å¹²\t&#125;\tcout &lt;&lt; id;&#125;void test4()&#123;\tthread threads[10];\tcout &lt;&lt; &quot;åˆ›å»º10ä¸ªçº¿ç¨‹ è®¡æ•°\\n&quot;;\tfor (int i = 0; i &lt; 10; ++i) \t&#123;\t\tthreads[i] = thread(count1m, i);\t&#125;\tcout &lt;&lt; &quot;åˆ›å»º10ä¸ªçº¿ç¨‹ å®Œæ¯•\\n&quot;;\tready = true;//è®¾ç½®çŠ¶æ€ï¼Œè®©çº¿ç¨‹å¼€å§‹è¿è¡Œ\tcout &lt;&lt; &quot;main set ture: &quot; &lt;&lt; ready &lt;&lt; &quot;\\n&quot;;\tfor (auto&amp; th : threads) \t&#123;\t\tth.join();\t&#125;\tcout &lt;&lt; &quot;\\nmain join æˆåŠŸ&quot; &lt;&lt; &quot;\\n&quot;;&#125;\n\næ‰§è¡Œç»“æœ\nåˆ›å»º10ä¸ªçº¿ç¨‹ è®¡æ•°åˆ›å»º10ä¸ªçº¿ç¨‹ å®Œæ¯•main set ture: 13746089215main join æˆåŠŸ\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹è¢«è®¾ç½®äº†taskåï¼Œéƒ½ä¼šå…ˆè¿›å…¥ä¸€ä¸ªwhileå¾ªç¯ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è¿›è¡Œreadyçš„è®¾ç½®\nwhile (!ready) &#123;            \t;&#125;\n\næ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨whileå¾ªç¯ä¸­è¿›è¡Œyieldè®©çº¿ç¨‹è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ã€‚å¦åˆ™è¿™ä¸ªçº¿ç¨‹ä¼šä¸€ç›´ç–¯ç‹‚è®¿é—®readyï¼Œå¯¼è‡´cpuå ç”¨æé«˜ã€‚\n// å¦‚æœmainæ²¡æœ‰è®¾ç½®readyä¿¡å·ï¼Œçº¿ç¨‹ä¼šä¸€ç›´è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œä¸ä¼šè¿è¡Œwhile (!ready) &#123;            \tthis_thread::yield();&#125;\n\nåœ¨è¿™ç§è½®è¯¢æ£€æµ‹çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨yieldèƒ½é¿å…æŸä¸€ä¸ªçº¿ç¨‹é•¿æ—¶é—´å ç”¨æ‰§è¡Œæµï¼Œè§£å†³äº†å…¶ä»–çº¿ç¨‹çš„é¥¥é¥¿é—®é¢˜ã€‚\n7.2 sleep_untilç”¨cplusplusçš„ç¤ºä¾‹ä»£ç æ¥å­¦ä¹ ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œæ¶‰åŠåˆ°äº†å¤šä¸ªåº“å‡½æ•°ï¼Œè¯¦è§æ³¨é‡Š\n#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;chrono&gt;  //std::chrono#include &lt;iomanip&gt; //std::put_time#include &lt;ctime&gt;   //std::time_t, std::tm, std::localtime, std::mktimeusing namespace std;// ç›´æ¥æŠŠmainå½“ä½œä¸€ä¸ªçº¿ç¨‹void test5()&#123;\ttime_t tt = chrono::system_clock::to_time_t(chrono::system_clock::now()); // è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³\tstruct tm* ptm = localtime(&amp;tt); // è®¾ç½®ä¸€ä¸ªtmç»“æ„ä½“ï¼Œä»å½“å‰æ—¶é—´æˆ³åˆ›å»º\tcout &lt;&lt; &quot;Current time: &quot; &lt;&lt; put_time(ptm, &quot;%X&quot;) &lt;&lt; &#x27;\\n&#x27;; // æ‰“å°å½“å‰æ—¶é—´\tcout &lt;&lt; &quot;Waiting for the next minute to begin...\\n&quot;;\t(ptm-&gt;tm_min)++; // è®¾ç½®ptmçš„minä¸ºä¸‹ä¸€åˆ†é’Ÿ\tptm-&gt;tm_sec = 0; // ä¸‹ä¸€åˆ†é’Ÿçš„ç¬¬0s\tthis_thread::sleep_until(chrono::system_clock::from_time_t(mktime(ptm))); // ç­‰å¾…ä¸‹ä¸€åˆ†é’Ÿå¼€å§‹è¿è¡Œ\tcout &lt;&lt; put_time(ptm, &quot;%X&quot;) &lt;&lt; &quot; reached!\\n&quot;; // å†æ¬¡æ‰“å°å½“å‰æ—¶é—´&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¼šç­‰åˆ°ä¸‹ä¸€åˆ†é’Ÿçš„ç¬¬0sç»§ç»­æ‰§è¡Œ\nCurrent time: 15:13:40Waiting for the next minute to begin...15:14:00 reached!\n\n7.3 sleep_forè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å’Œwindowsã€linuxä¸‹éƒ½æœ‰çš„sleepå‡½æ•°ä¸€æ ·ï¼Œæ˜¯ç¡æŒ‡å®šçš„æ—¶é—´\néœ€è¦ç”¨stdä¸­çš„chronoæ¨¡å—æ¥æŒ‡å®šè¿è¡Œçš„æ—¶é—´ï¼Œæ”¯æŒä»å°æ—¶ä¸€ç›´åˆ°çº³ç§’\n\nç¤ºä¾‹å¦‚ä¸‹\nvoid test6()&#123;\ttime_t now;\ttime(&amp;now);//è·å–å½“å‰æ—¶é—´æˆ³\tcout &lt;&lt; now &lt;&lt; endl;\tthis_thread::sleep_for(chrono::seconds(30));//ç¡30s\ttime(&amp;now);//è·å–å½“å‰æ—¶é—´æˆ³\tcout &lt;&lt; now &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿›ç¨‹ç¡®å®ä¼‘çœ äº†30s\n\n8.mutexæœ‰äº†çº¿ç¨‹ï¼Œé‚£è‚¯å®šç¦»ä¸å¼€é”ï¼›å…³äºçº¿ç¨‹åŠ é”çš„é—®é¢˜ï¼Œè¯¦è§æˆ‘çš„linuxåšå®¢\nè¿™é‡Œåªå¯¹C++ä¸­é”çš„åªç”¨æ–¹æ³•åšä¸€å®šæ¼”ç¤º\n8.1 æ„é€ \né”çš„æ„é€ ç›¸å¯¹è¾ƒç®€å•ï¼Œåªæœ‰ä¸€ä¸ªæ— å‚çš„æ„é€ ï¼Œå…¶ä¸æ”¯æŒæ‹·è´æ„é€ ï¼ˆæ¯”å¦‚å‡½æ•°ä¼ å‚ä¸­ï¼Œä¸€ä¸ªé”è¢«æ‹·è´äº†ï¼Œå°±å¤±å»äº†æ„ä¹‰ï¼‰\n8.2 æˆå‘˜å‡½æ•°å…¶ä½™æˆå‘˜å°±æ˜¯ä¸€ä¸ªé”çš„åŸºæœ¬æ¥å£ï¼Œå¯¹åº”çš„ä¹Ÿæ˜¯pthread_mutexä¸­çš„å‡ ä¸ªæ¥å£\n\nlock åŠ é”ï¼Œä¸èƒ½ç”³è¯·é”åˆ™é˜»å¡ç­‰å¾…\ntry_lock æµ‹è¯•æ˜¯å¦èƒ½ç”³è¯·é”ï¼Œä¸èƒ½ç”³è¯·åˆ™return\nunlock è§£é”\n\n\n8.3 åœºæ™¯æ‰€è°“åŠ é”ï¼Œä¿æŠ¤çš„å°±æ˜¯ä¸´ç•Œèµ„æºï¼›æ¯”å¦‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œå…¨å±€å˜é‡count1å°±æ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æºï¼Œå…¶èƒ½å¤Ÿè¢«å¤šä¸ªæ‰§è¡Œæµè®¿é—®ã€‚\næ³¨æ„ï¼šå¦‚æœä½ å±•å¼€äº†stdå‘½åç©ºé—´ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªcountå‡½æ•°ï¼Œä¼šå’Œä½ è‡ªå·±å®šä¹‰çš„å…¨å±€countå˜é‡å†²çªã€‚åˆšå¼€å§‹æˆ‘å°±å®šä¹‰äº†countï¼Œå‘ç°æŠ¥é”™å˜é‡ä¸æ˜ç¡®ã€‚\n#define TOP 100volatile int count1 = 0;void func()&#123;\twhile(1)\t&#123;\t\tif (count1 == TOP)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1++ &lt;&lt; endl;\t\tthis_thread::sleep_for(chrono::milliseconds(10));\t&#125;\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1 &lt;&lt; endl;&#125;void test7()&#123;\tthread threading[10];\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tthreading[i] = thread(func);\t&#125;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tthreading[i].join();\t&#125;\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; count1 &lt;&lt; endl;\tthis_thread::sleep_for(chrono::seconds(2));&#125;\n\næµ‹è¯•çš„æ—¶å€™ï¼Œå°±èƒ½çœ‹åˆ°ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å†²çªç»“æœã€‚31752çº¿ç¨‹å·²ç»++åˆ°100äº†ï¼Œç»“æœå®ƒåŠªåŠ›çš„ç»“æœè¢«å…¶ä»–ä¸¤ä¸ªçº¿ç¨‹ç›´æ¥å¤å†™ï¼›\nå½“ç„¶ï¼Œè¿™é‡Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ˜¾ç¤ºå™¨ä¹±åºæ‰“å°çš„ç»“æœã€‚è¦çŸ¥é“ï¼Œæ˜¾ç¤ºå™¨ä¹Ÿæ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æº\n\nmutex mtx;void func()&#123;\twhile(1)\t&#123;\t\t\t\tif (count1 == TOP)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t// åŠ é”çš„ç²’åº¦è¦ä½\t\tmtx.lock();\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1++ &lt;&lt; endl;\t\tmtx.unlock();\t\tthis_thread::sleep_for(chrono::milliseconds(10));\t&#125;\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1 &lt;&lt; endl;&#125;\n\nç»™è®¿é—®countçš„å‡½æ•°æ·»åŠ ä¸Šé”ï¼Œå°±èƒ½é¿å…æ‰ä¸Šé¢å‡ºç°çš„é—®é¢˜\n\n9.CASåŸå­æ“ä½œåœ¨ç³»ç»Ÿä¸­ï¼Œæä¾›äº†ä¸€äº›æŒ‡ä»¤ï¼Œæ¥å®ç°åŸå­æ“ä½œï¼\n9.1 åŸç†Compare And Setï¼ˆæˆ–Compare And Swapï¼‰ï¼Œç®€ç§°CASã€‚å…¶æ˜¯è§£å†³å¤šçº¿ç¨‹å¹¶è¡Œæƒ…å†µä¸‹ä½¿ç”¨é”é€ æˆæ€§èƒ½æŸè€—çš„ä¸€ç§æœºåˆ¶ï¼Œé‡‡ç”¨è¿™ç§æ— é”çš„åŸå­æ“ä½œå¯ä»¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œé¿å…åŠ é”çš„ç¬¨é‡æ€§ã€‚\nCASæ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•°ï¼šå†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰ã€æ–°å€¼(B)\nå…·ä½“æ“ä½œæµç¨‹è¯·çœ‹ä¸‹å›¾ï¼š\n\nå¦‚æœä¸Šé¢çš„å›¾çœ‹ä¸æ‡‚ï¼Œè¿˜å¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªå›¾\n\næ–‡å­—æè¿°å¦‚ä¸‹ï¼š\n\nå¦‚æœå†…å­˜ä½ç½®çš„å€¼ï¼ˆVï¼‰ä¸é¢„æœŸåŸå€¼ï¼ˆAï¼‰ç›¸åŒï¼Œå¤„ç†å™¨ä¼šå°†è¯¥ä½ç½®çš„å€¼æ›´æ–°ä¸ºæ–°å€¼ï¼ˆBï¼‰ CAS æ“ä½œæˆåŠŸï¼\nå¦åˆ™ï¼Œå¤„ç†å™¨ä¸åšä»»ä½•æ›´æ”¹ï¼Œåªéœ€è¦å°†å½“å‰ä½ç½®çš„å€¼è¿›è¡Œè¿”å›å³å¯\n\nCASæ˜¯å®ç°è‡ªæ—‹é”çš„åŸºç¡€ï¼ŒCAS åˆ©ç”¨CPUæŒ‡ä»¤ä¿è¯äº†æ“ä½œçš„åŸå­æ€§ï¼Œä»¥è¾¾åˆ°é”çš„æ•ˆæœï¼Œå¾ªç¯è¿™ä¸ªæŒ‡ä»¤ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚\n9.2 é—®é¢˜CASä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå…¶åœ¨å¦‚ä¸‹åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜\n1.æœ‰çº¿ç¨‹aå’Œb2.æœ‰å…¨å±€å˜é‡ï¼Œåˆå§‹å€¼ä¸º13.çº¿ç¨‹aå…ˆæ¥è®¿é—®ï¼Œæ‹¿èµ°äº†åˆå§‹å€¼14.å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹bæ¥è®¿é—®ï¼Œæ‹¿èµ°åˆå§‹å€¼1ï¼Œæ›´æ–°ä¸º2ï¼Œåˆä¿®æ”¹å›15.å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹aç»§ç»­è®¿é—®ï¼Œæ­¤æ—¶å€¼ä¾æ—§æ˜¯1ï¼Œçº¿ç¨‹aä¼šè®¤ä¸ºæ²¡æœ‰é—®é¢˜ï¼Œå†™å…¥\n\nä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸Šé¢çš„åœºæ™¯ä¸­ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æŠŠå…¨å±€å˜é‡ä¿®æ”¹äº†ä¹‹ååˆæ”¹äº†å›å»ï¼Œè¿™æ—¶å€™å°±æ²¡æœ‰åŠæ³•ä»å–å€¼åˆ¤æ–­å˜é‡æ˜¯å¦è¿˜æ˜¯â€œåŸæ¥çš„é‚£ä¸ªâ€äº†\n\né’ˆå¯¹è¿™ç§æƒ…å†µï¼Œjavaå¹¶å‘åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¸¦æœ‰æ ‡è®°çš„åŸå­å¼•ç”¨ç±»â€AtomicStampedReferenceâ€ï¼Œå®ƒå¯ä»¥é€šè¿‡æ§åˆ¶å˜é‡å€¼çš„ç‰ˆæœ¬æ¥ä¿è¯CASçš„æ­£ç¡®æ€§ã€‚\n\nC&#x2F;C++ä¸­æœ‰æ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘æ²¡ç™¾åº¦åˆ°ğŸ˜‚\n10.lock_guardäººå¦‚å…¶åï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªå®ˆæŠ¤é”ã€‚\ntemplate &lt;class Mutex&gt; class lock_guard;\n\nå…¶è¿ç”¨äº†RAIIçš„æ€è·¯ï¼Œèƒ½åœ¨æ„é€ çš„æ—¶å€™åŠ é”ï¼Œææ„çš„æ—¶å€™è§£é”ã€‚æˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±æ“ä½œäº†ã€‚\næ¯•ç«Ÿï¼Œä»£ç ä¸€é•¿èµ·æ¥ï¼Œä¸€ä¸ªé”æœ‰æ²¡æœ‰è¢«è§£å¼€ï¼Œæ˜¯çœŸçš„æä¸æ¸…æ¥šğŸ˜¥\nmutex mtx;void test7()&#123;\tint x = 0;\tint n = 0;\tint m = 1000000;\tcin &gt;&gt; n;\tvector&lt;thread&gt; threading(n);\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tthreading[i] = thread([&amp;]() &#123;\t\t\tfor (int i = 0; i &lt; m; i++)\t\t\t&#123;\t\t\t\tlock_guard&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”è§£é”\t\t\t\tx++;\t\t\t&#125;\t\t&#125;);\t&#125;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tthreading[i].join();\t&#125;\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; x &lt;&lt; endl;&#125;\n\n\nå¦‚æœforå¾ªç¯ä¸­éœ€è¦æ‰§è¡Œçš„ä»£ç å¾ˆå¤šï¼Œè€Œåªæœ‰xæ˜¯ä¸´ç•Œèµ„æºçš„è¯ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ§åˆ¶ä¸€ä¸‹ä½œç”¨åŸŸ&#123;&#125;\nfor (int i = 0; i &lt; m; i++)&#123;             //å…¶ä»–ä»£ç              &#123;                 lock_guard&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”è§£é”\t   x++;             &#125;             //å…¶ä»–ä»£ç &#125;\n\n11.unique_locktemplate &lt;class Mutex&gt; class unique_lock;\n\nå¦‚æœä½ å­¦ä¹ è¿‡æ™ºèƒ½æŒ‡é’ˆï¼Œé‚£è‚¯å®šå°±çŸ¥é“è¿™ä¸ªå‘½åçš„å«ä¹‰ï¼›\nunique_lockæ˜¯lock_graudçš„å¢å¼ºç‰ˆæœ¬ï¼Œå…¶åœ¨æ”¯æŒè‡ªåŠ¨åŠ é”è§£é”çš„å‰æä¸‹ï¼Œè¿˜æ”¯æŒæ‰‹åŠ¨åŠ é”è§£é”ï¼›\n11.1 ä½¿ç”¨ç¤ºä¾‹ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä½¿ç”¨åœºæ™¯\nthreading[i] = thread([&amp;]() &#123;\tfor (int i = 0; i &lt; m; i++)\t&#123;\t\tunique_lock&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”\t\tx++;\t\tt.unlock(); //æ‰‹åŠ¨è§£é”\t\t// æ¨¡æ‹Ÿå…¶ä»–å·¥ä½œ\t\tthis_thread::sleep_for(chrono::milliseconds(100));\t\t// åˆéœ€è¦è®¿é—®ä¸´ç•Œèµ„æº\t\tt.lock();// æ‰‹åŠ¨è§£é”\t\tx++;\t&#125;// å‡ºä½œç”¨åŸŸï¼Œè‡ªåŠ¨è§£é”&#125;);\n\n11.2 try_locké™¤äº†æœ€åŸºç¡€çš„try_lockä¹‹å¤–ï¼Œè¿™ä¸ªç±»è¿˜æ”¯æŒforå’Œuntilï¼Œå’Œthis_threadä¸­çš„sleepæ˜¯ä¸€æ ·çš„å«ä¹‰\ntry_lockLock mutex if not locked (public member function )try_lock_forTry to lock mutex during time span (public member function )åŠ é”ä¸€ç›´åˆ°æŒ‡å®šæ—¶é—´è§£é”ï¼ˆåŠ é”åˆ°æ˜å¤©æ—©å…«ï¼‰try_lock_untilTry to lock mutex until time point (public member function )åŠ é”xxæ—¶é—´ï¼ˆåŠ é”100ç§’ï¼Œæ—¶é—´åˆ°äº†è‡ªåŠ¨è§£é”ï¼‰\n\næ—¶é—´åˆ°äº†ä¹‹åï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿›è¡Œè§£é”ã€‚å¦‚æœç”¨æˆ·åœ¨è¿™ä¹‹å‰å·²ç»æ‰‹åŠ¨è§£é”äº†ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šåš\n11.3 releaseè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±å¾ˆç‹¬ç‰¹äº†ï¼Œå…¶å°†è‡ªå·±ç®¡ç†çš„é”é‡Šæ”¾æ‰ï¼Œä¸å†ç®¡ç†è¿™ä¸ªé”\nmutex_type* release() noexcept;\n\nè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šè¿”å›æ‰˜ç®¡äº’æ–¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œé‡Šæ”¾å…¶æ‰€æœ‰æƒã€‚è°ƒç”¨åï¼Œunique_lockå¯¹è±¡ä¸å†ç®¡ç†ä»»ä½•äº’æ–¥å¯¹è±¡ï¼ˆå³ï¼Œå®ƒå¤„äºä¸ifé»˜è®¤æ„é€ ç›¸åŒçš„çŠ¶æ€ï¼‰ã€‚\n æ³¨æ„ï¼Œæ­¤å‡½æ•°ä¸ä¼šé”å®šæˆ–è§£é”è¿”å›çš„äº’æ–¥å¯¹è±¡ã€‚\nè¯´äººè¯å°±æ˜¯ï¼Œä¸éœ€è¦ä½ RALLæ¥ç®¡ç†è¿™ä¸ªé”äº†ï¼Œäº¤ç»™ç”¨æˆ·è‡ªå·±ç®¡ç†ï¼\n12.share_ptr\nshare_ptrçš„å®Œæ•´ä»£ç è¯·çœ‹æˆ‘çš„ Gitee\n\nåœ¨æ™ºèƒ½æŒ‡é’ˆä¸­ï¼Œshare_ptré‡‡ç”¨å¼•ç”¨è®¡æ•°æ¥åˆ¤æ–­æœ‰å¤šå°‘æ¬¡æ‹·è´ï¼ˆæ‹·è´æ„é€ ã€èµ‹å€¼é‡è½½ï¼‰ï¼Œåªæœ‰æ‹·è´è®¡æ•°å™¨ä¸º1çš„æ—¶å€™ï¼Œææ„æ‰éœ€è¦é‡Šæ”¾èµ„æºã€‚\nåœ¨share_ptrå†…éƒ¨æœ‰ä¸€ä¸ªå˜é‡è¿›è¡Œè®¡æ•°ã€‚æ—¢ç„¶æœ‰ä¸€ä¸ªè®¡æ•°å˜é‡ï¼Œé‚£å°±éœ€è¦ä¿è¯å¤šçº¿ç¨‹æ‰§è¡Œæ—¶çš„åŸå­æ€§ï¼\n12.1 å¼•ç”¨è®¡æ•°åŠ é”void AddRef()//æ–°å¢å¼•ç”¨&#123;\t_pMutex-&gt;lock();\t++(*_pRefCount);\t_pMutex-&gt;unlock();&#125;\n\n12.2 é‡Šæ”¾void Release()&#123;\tbool flag = false;//åˆ¤æ–­é”æ˜¯å¦éœ€è¦è¢«é‡Šæ”¾\t_pMutex-&gt;lock();\tif (--(*_pRefCount) == 0 &amp;&amp; _ptr)\t&#123;               //è¿›å…¥äº†è¿™ä¸ªå‡½æ•°ï¼Œä»£è¡¨å¼•ç”¨è®¡æ•°ä¸º0\t\tdelete _ptr;\t\tdelete _pRefCount;\t\t//æ ‡è¯†éœ€è¦é‡Šæ”¾é”\t\tflag = true;\t&#125;\t_pMutex-&gt;unlock();//è§£é”\t//é‡Šæ”¾é”\tif (flag)&#123;\t\tdelete _pMutex;           &#125;&#125;\n\n12.3 æ³¨æ„äº‹é¡¹share_ptrçš„åŠ é”åªé™äºè¿™ä¸ªç±»å¯¹è±¡æœ¬èº«çš„å®‰å…¨æ€§ï¼Œè¿™ä¸ªé”å¹¶ä¸æ˜¯ç”¨æ¥ä¿æŠ¤share_ptræ‰€æŒ‡å‘çš„èµ„æºçš„ï¼\n13.atomicåœ¨å…¨å±€å˜é‡ä¸­ï¼Œè®¡æ•°å™¨æ˜¯å¾ˆå¸¸ç”¨çš„ç±»å‹ã€‚æ‰€ä»¥C++ä¸­è¿˜æä¾›äº†ä¸€ä¸ªå¯ä»¥è¿›è¡ŒåŸå­æ“ä½œçš„ç±»ï¼Œå¯¹è¿™ä¸ªå˜é‡è¿›è¡Œçš„æ“ä½œæ˜¯å…·æœ‰åŸå­æ€§çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬è¿›è¡ŒåŠ é”è§£é”\ntemplate &lt;class T&gt; struct atomic;\n\n13.1 åŸºæœ¬ä½¿ç”¨atomic&lt;int&gt; val=0;void test8()&#123;\tcout &lt;&lt; val &lt;&lt; endl;\tval++;\tcout &lt;&lt; val &lt;&lt; endl;\tval = 20;\tcout &lt;&lt; val &lt;&lt; endl;\tval--;\tcout &lt;&lt; val &lt;&lt; endl;&#125;\n\nå¦‚æœæ˜¯intç±»å‹ï¼ŒåŸå­å˜é‡å’Œæ™®é€šçš„intå˜é‡çš„ä½¿ç”¨æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œé‡è½½äº†ä»¥åï¼ŒåŸå­å˜é‡æ”¯æŒ++  --ï¼Œä¹Ÿæ”¯æŒç›´æ¥èµ‹å€¼\n\nä¸è¿‡ï¼Œè¿™äº›æ–¹æ³•æ ‡æ˜äº†ï¼Œåªæœ‰æ•´å½¢å®¶æ—å’ŒæŒ‡é’ˆç±»å‹å¯ä»¥ä½¿ç”¨ï¼\n\n13.2 operator &#x3D;åŸå­å˜é‡å¯ä»¥ç›´æ¥èµ‹å€¼ï¼Œæ˜¯å› ä¸ºå…¶é‡è½½äº† operator =\n//set value (1)T operator= (T val) noexcept;T operator= (T val) volatile noexcept;//copy [deleted] (2)atomic&amp; operator= (const atomic&amp;) = delete;atomic&amp; operator= (const atomic&amp;) volatile = delete;\n\n13.3 operator T&#x2F;loadoperator T çš„ä½œç”¨ï¼Œæ˜¯æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œè¿™æ ·åŸå­å˜é‡åœ¨è¿›è¡Œifæ¯”è¾ƒçš„æ—¶å€™ï¼Œä¼šè½¬æ¢æˆé‡è½½åçš„ç±»å‹\noperator T() const volatile noexcept;operator T() const noexcept;\n\nåœ¨vs2019é‡Œé¢è·³è½¬æºç ï¼Œèƒ½çœ‹åˆ°é‡è½½åçš„è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶å®æ˜¯è°ƒç”¨äº†loadæ–¹æ³•\ntemplate &lt;class _Ty&gt;struct atomic : _Choose_atomic_base_t&lt;_Ty&gt;&#123;    //...\toperator _Ty() const volatile noexcept &#123;        static_assert(_Deprecate_non_lock_free_volatile&lt;_Ty&gt;, &quot;Never fails&quot;);        return this-&gt;load();    &#125;    operator _Ty() const noexcept &#123;        return this-&gt;load();    &#125;&#125;\n\n\næŸ¥çœ‹cplusplusçš„è§£é‡Šï¼Œloadæ–¹æ³•å°±æ˜¯è¿”å›äº†å…¶å†…éƒ¨æ‰€åŒ…å«çš„å€¼\nT load (memory_order sync = memory_order_seq_cst) const volatile noexcept;T load (memory_order sync = memory_order_seq_cst) const noexcept;\n\n\nè¿™é‡Œè¿˜ç‰¹æ„æ ‡æ³¨äº†ï¼Œloadæ–¹æ³•çš„ä½¿ç”¨æ˜¯åŸå­æ€§çš„\n13.4 exchangeT exchange (T val, memory_order sync = memory_order_seq_cst) volatile noexcept;T exchange (T val, memory_order sync = memory_order_seq_cst) noexcept;\n\nexchangeå‡½æ•°çš„ä½œç”¨æ˜¯ä¿®æ”¹åŸå­å˜é‡ç®¡ç†çš„å€¼ï¼Œå…¶è¿”å›å€¼æ˜¯ä¿®æ”¹ä¹‹å‰çš„å˜é‡\nReturn valueThe contained value before the call.T is atomic&#x27;s template parameter (the type of the contained value).\n\nä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹\natomic&lt;int&gt; val=0;void test8()&#123;\tcout &lt;&lt; val &lt;&lt; endl;\tint tmp = val.exchange(450);\tcout &lt;&lt; val &lt;&lt; endl;\tcout &lt;&lt; tmp &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°tmpæ¥æ”¶åˆ°çš„ç»“æœæ˜¯valçš„åˆå§‹å€¼0ï¼Œvalæœ¬èº«è¢«ä¿®æ”¹ä¸º450\n\n13.5 storevoid store (T val, memory_order sync = memory_order_seq_cst) volatile noexcept;void store (T val, memory_order sync = memory_order_seq_cst) noexcept;\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ¯”exchangeç®€å•ï¼Œå…¶åªä¿®æ”¹å­˜å‚¨çš„å˜é‡ï¼Œæ²¡æœ‰è¿”å›å€¼\n\nå…³äºåŸå­å˜é‡çš„ä»‹ç»å°±è¿™ä¹ˆå¤šï¼Œä¸‹é¢æ¥åº·åº·C++ä¸­çš„æ¡ä»¶å˜é‡\n14.condition_variable\næ¡ä»¶å˜é‡çš„æ¦‚å¿µï¼Œå‚è€ƒ linux çº¿ç¨‹åŒæ­¥\n\n14.1 æ„é€ å’Œwaitæ¡ä»¶å˜é‡ï¼Œæ˜¯ç”¨äºçº¿ç¨‹åŒæ­¥æ“ä½œçš„ä¸€ä¸ªæ¥å£ã€‚åœ¨C++ä¸­ï¼Œæ¡ä»¶å˜é‡åªæœ‰ä¸€ä¸ªç©ºæ„é€ \n//default (1)\tcondition_variable();//copy [deleted] (2)\tcondition_variable (const condition_variable&amp;) = delete;\n\nå½“æˆ‘ä»¬è¿›è¡Œwaitç­‰å¾…çš„æ—¶å€™ï¼Œéœ€è¦å¾€æ¡ä»¶å˜é‡å†…ä¼ å…¥ä¸€ä¸ªé”ï¼›è¿›å…¥waitå‡½æ•°ï¼Œå¼€å§‹ç­‰å¾…å‰ä¼šå…ˆè§£é”ï¼Œé€€å‡ºå‡½æ•°å‰ä¼šåŠ é”ã€‚\n//unconditional (1)\tvoid wait (unique_lock&lt;mutex&gt;&amp; lck);//predicate (2)\ttemplate &lt;class Predicate&gt;  void wait (unique_lock&lt;mutex&gt;&amp; lck, Predicate pred);\n\nwaitå‡½æ•°é™¤äº†ä¼ å…¥é”ï¼Œè¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªPredicate predå¯æ‰§è¡Œå‡½æ•°ä½“ï¼Œæ¥åˆ¤æ–­æ¡ä»¶å˜é‡æ˜¯å¦æ»¡è¶³ï¼›\nå¦‚æœæŒ‡å®šäº†predï¼Œåˆ™åªæœ‰å½“predè¿”å›falseæ—¶ï¼Œè¯¥å‡½æ•°æ‰ä¼šé˜»å¡ï¼›å¹¶ä¸”åªæœ‰å½“å®ƒå˜ä¸ºtrueæ—¶ï¼Œé€šçŸ¥æ‰èƒ½è§£é™¤é˜»å¡çº¿ç¨‹ï¼ˆè¿™å¯¹äºæ£€æŸ¥è™šå‡å”¤é†’ç‰¹åˆ«æœ‰ç”¨ï¼‰\n\nè™šå‡å”¤é†’ï¼ŒæŒ‡çš„æ˜¯ä¸€äº›ä»£ç é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åœ¨æ¡ä»¶å°šæœªçœŸæ­£å°±ç»ªçš„æ—¶å€™å°±å”¤é†’äº†è¯¥çº¿ç¨‹\næ·»åŠ ä¸Šåˆ¤æ–­æ¡ä»¶ï¼Œèƒ½åœ¨waitä¸­åˆ¤æ–­æ¡ä»¶æ˜¯å¦å·²ç»çœŸæ­£æ»¡è¶³ï¼Œä»è€Œé¿å…è™šå‡å”¤é†’\n\nwaitå†…éƒ¨å¯¹predçš„æ£€æµ‹æ˜¯ä¸‹é¢è¿™æ ·\nwhile (!pred()) wait(lck);\n\nåªæœ‰predè¿”å›çœŸçš„æ—¶å€™ï¼Œæ‰ä¼šè·³å‡ºwhileå¾ªç¯ï¼Œå”¤é†’çº¿ç¨‹ã€‚\né™¤äº†æ£€æµ‹è™šå‡å”¤é†’ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨è¯¥æ‰§è¡Œä½“ï¼Œå¯¹ä¸åŒçš„çº¿ç¨‹æŒ‡å®šä¸åŒçš„å”¤é†’æ¡ä»¶ï¼\n14.2 å…¶ä»–æ¥å£å…¶ä»–æ¥å£çš„ä½¿ç”¨ä¹Ÿå¾ˆç›´æ¥ï¼Œå…¶ä¸­wait_forå’Œuntilå‰é¢å·²ç»ä»‹ç»è¿‡äº†\n\nwaitï¼šåœ¨æ¡ä»¶å˜é‡ä¸­é˜»å¡ç­‰å¾…ï¼Œç­‰å¾…è¢«å”¤é†’\nnotify_oneï¼šå”¤é†’åœ¨è¯¥æ¡ä»¶å˜é‡ç­‰å¾…ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹\nnotify_allï¼šå”¤é†’åœ¨è¯¥æ¡ä»¶å˜é‡ä¸‹ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹\n\n\n14.3 å®é™…ç”¨ä¾‹å½“ä¸‹æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©t1å’Œt2çº¿ç¨‹å…±åŒç®¡ç†ä¸€ä¸ªå˜é‡iï¼Œå¯¹å…¶è¿›è¡Œ++ï¼Œå¹¶å®ç°t1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°çš„åŠŸèƒ½ï¼ˆäºŒè€…äº¤é”™æ‰“å°ï¼‰\nvoid test9()&#123;\t// ç›®æ ‡ï¼št1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°ï¼ŒäºŒè€…äº¤é”™æ‰“å°    bool ready = true;\tint i = 0;\tint n = 100;\tmutex mtx;\tcondition_variable cv;\t\t// t1æ‰“å°å¥‡æ•°\tthread t1([&amp;]()&#123;\t\twhile (i &lt; n)\t\t&#123;            unique_lock&lt;mutex&gt; lock(mtx);            cout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;            i++;\t\t&#125;\t&#125;);\t\t// t2æ‰“å°å¶æ•°\tthread t2([&amp;]() &#123;\t\twhile (i &lt; n)\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);\t\t\tcout &lt;&lt;&quot;t2 : &quot;&lt;&lt;this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t&#125;\t&#125;);\t\tthis_thread::sleep_for(chrono::seconds(3));\t\tcout &lt;&lt; &quot;t1:&quot; &lt;&lt; t1.get_id() &lt;&lt; endl;\tcout &lt;&lt; &quot;t2:&quot; &lt;&lt; t2.get_id() &lt;&lt; endl;\t\tt1.join();\tt2.join();\t&#125;\n\nå½“ä¸‹å·²ç»å®ç°å‡ºäº†äºŒè€…çš„åŸºæœ¬æ“ä½œï¼Œä½†ç›´æ¥è¿è¡Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œt1éƒ½å·²ç»æ‰“å°åˆ°99äº†ï¼Œt2æ‰å¼€å§‹æ‰§è¡Œï¼Œå®Œå…¨ä¸ç¬¦åˆäº¤é”™æ‰“å°çš„éœ€æ±‚\n\nthread t1([&amp;]()&#123;\twhile (i &lt; n)\t&#123;\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);\t\t\tcout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t&#125;\t\tthis_thread::sleep_for(chrono::microseconds(100));\t&#125;&#125;);\n\nå¦‚æœåœ¨t1çš„whileå¾ªç¯ä¸­åŠ ä¸Šä¸€ä¸ªä¼‘çœ ï¼Œt2çš„å‡½æ•°ä½“ä¿æŒä¸å˜ï¼Œåˆ™ä¼šå‘ç°æ˜¯t2ç›´æ¥åŠ åˆ°äº†99ï¼Œæ‰è®©å¯æ€œå·´å·´çš„t1è®¿é—®äº†ä¸´ç•Œèµ„æºï¼ˆé¥¥é¥¿é—®é¢˜ï¼‰\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¡ä»¶å˜é‡æ¥å®ç°çº¿ç¨‹ç›¸äº’å”¤é†’å’Œäº¤é”™æ‰“å°ï¼Œä»£ç å¦‚ä¸‹\n// æ¡ä»¶å˜é‡æµ‹è¯•void test9()&#123;\t// ç›®æ ‡ï¼št1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°ï¼ŒäºŒè€…äº¤é”™æ‰“å°\tbool ready = true;\tint i = 0;\tint n = 100;\tmutex mtx;\tcondition_variable cv;\t\t// t1æ‰“å°å¥‡æ•°\tthread t1([&amp;]()&#123;\t\twhile (i &lt; n)\t\t&#123;            unique_lock&lt;mutex&gt; lock(mtx);            //readyä¸ºå‡çš„æ—¶å€™ï¼Œå”¤é†’t1            cv.wait(lock, [&amp;ready]()&#123;return !ready; &#125;);            cout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;            i++;            ready = true;            cv.notify_one();\t\t&#125;\t&#125;);\t\t// t2æ‰“å°å¶æ•°\tthread t2([&amp;]() &#123;\t\twhile (i &lt; n)\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);             //readyä¸ºçœŸçš„æ—¶å€™ï¼Œå”¤é†’t2\t\t\tcv.wait(lock, [&amp;ready]()&#123;return ready; &#125;);\t\t\t\tcout &lt;&lt;&quot;t2 : &quot;&lt;&lt;this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t\tready = false;\t\t\t\tcv.notify_one();\t\t&#125;\t&#125;);\t\tthis_thread::sleep_for(chrono::seconds(3));\t\tcout &lt;&lt; &quot;t1:&quot; &lt;&lt; t1.get_id() &lt;&lt; endl;\tcout &lt;&lt; &quot;t2:&quot; &lt;&lt; t2.get_id() &lt;&lt; endl;\t\tt1.join();\tt2.join();\t&#125;\n\nè¿è¡Œä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸé€šè¿‡æ¡ä»¶å˜é‡ï¼Œä½¿è¿™ä¸¤ä¸ªçº¿ç¨‹äº¤é”™æ‰“å°å¥‡å¶æ•°ï¼\nt2 : 23208 : 0t1 : 24896 : 1t2 : 23208 : 2t1 : 24896 : 3t2 : 23208 : 4t1 : 24896 : 5t2 : 23208 : 6t1 : 24896 : 7t2 : 23208 : 8t1 : 24896 : 9t2 : 23208 : 10t1 : 24896 : 11//....t2 : 23208 : 90t1 : 24896 : 91t2 : 23208 : 92t1 : 24896 : 93t2 : 23208 : 94t1 : 24896 : 95t2 : 23208 : 96t1 : 24896 : 97t2 : 23208 : 98t1 : 24896 : 99t2 : 23208 : 100\n\nå³ä¾¿åœ¨t1ä¸­é¢å¤–åŠ ä¸Šä¼‘çœ ï¼Œä¹Ÿä¸ä¼šå½±å“è¾“å‡ºç»“æœçš„å‡†ç¡®æ€§ï¼\n\nè¿™ä¾¿æ˜¯æ¡ä»¶å˜é‡å¯¹äºçº¿ç¨‹åŒæ­¥æ§åˆ¶çš„ç”¨æ³•\nç»“è¯­åœ¨å­¦ä¹ è¿‡linuxçš„çº¿ç¨‹åŸºç¡€å’Œç³»ç»Ÿæ¥å£åï¼Œç†è§£C++è¿™é‡Œçš„å¤šçº¿ç¨‹æ“ä½œè¿˜ç®—è½»æ¾ï¼\nC++è¯­æ³•å­¦ä¹ çš„æœ€åä¸€å—æ‹¼å›¾ä¹Ÿè¢«è¡¥ä¸Šäº†ï¼\n\n","categories":["é‡è§C++"],"tags":["C++","C++11"]},{"title":"ã€C++ã€‘C++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜","url":"/2023/02/20/note_cpp/29C++11%E5%B1%80%E9%83%A8%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E5%88%9D%E5%A7%8B%E5%8C%96%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98/","content":"C++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\n\n\nå‰è¨€å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨C++11æ ‡å‡†ä¸­ï¼Œè¦æ±‚å±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–å…·æœ‰çº¿ç¨‹å®‰å…¨æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹ç±»ï¼š\nclass Foo\n&#123;\npublic:\n    static Foo *getInstance()\n    &#123;\n        static Foo s_instance;\n        return &amp;s_instance;\n    &#125;\nprivate:\n    Foo() &#123;&#125;\n&#125;;\n\nåœ¨C++æ ‡å‡†ä¸­ï¼Œæ˜¯è¿™æ ·æè¿°çš„ï¼ˆåœ¨æ ‡å‡†è‰æ¡ˆçš„6.7èŠ‚ä¸­ï¼‰ï¼š\n\nsuch a variable is initialized the first time control passes through its declaration; such a variable is considered initialized upon the completion of its initialization. If the initialization exits by throwing an exception, the initialization is not complete, so it will be tried again the next time control enters the declaration. If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization. If control re-enters the declaration recursively while the variable is being initialized, the behavior is undefined.\n\nåˆ†ææ ‡å‡†å…³äºå±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–ï¼Œæœ‰è¿™ä¹ˆå‡ ç‚¹è¦æ±‚ï¼š\n\nå˜é‡åœ¨ä»£ç ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å˜é‡å£°æ˜çš„åœ°æ–¹æ—¶åˆå§‹åŒ–ã€‚\nåˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯è§†ä¸ºæœªå®Œæˆåˆå§‹åŒ–ï¼Œæœªå®Œæˆåˆå§‹åŒ–çš„è¯ï¼Œéœ€è¦ä¸‹æ¬¡æœ‰ä»£ç æ‰§è¡Œåˆ°ç›¸åŒä½ç½®æ—¶å†æ¬¡åˆå§‹åŒ–ã€‚\nåœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œåˆ°éœ€è¦åˆå§‹åŒ–å˜é‡çš„åœ°æ–¹æ—¶ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨åˆå§‹åŒ–è¯¥å˜é‡ï¼Œåˆ™é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°åˆå§‹åŒ–å®Œæˆä¸ºæ­¢ã€‚\nå¦‚æœåˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å¯¹åˆå§‹åŒ–çš„é€’å½’è°ƒç”¨ï¼Œåˆ™è§†ä¸ºæœªå®šä¹‰è¡Œä¸ºã€‚\n\nå…³äºç¬¬4ç‚¹ï¼Œå¦‚æœä¸æ˜ç™½ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ï¼š\nclass Bar\n&#123;\npublic:\n    static Bar *getInstance()\n    &#123;\n        static Bar s_instance;\n        return &amp;s_instance;\n    &#125;\nprivate:\n    Bar()\n    &#123;\n        getInstance();\n    &#125;\n&#125;;\n\nGCCçš„å®ç°ä»¥GCC 7.3.0ç‰ˆæœ¬ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥åˆ†æGCCæ˜¯å¦‚ä½•å®ç°æ ‡å‡†çš„ã€‚\nFoo::getInstance()ä½¿ç”¨GCCç¼–è¯‘åï¼Œæˆ‘ä»¬ä½¿ç”¨gdbå°†æ–‡ç« å¼€å¤´çš„Foo::getInstance()åæ±‡ç¼–ï¼š\nDump of assembler code for function Foo::getInstance():\n   0x00005555555546ea &lt;+0&gt;:     push   %rbp\n   0x00005555555546eb &lt;+1&gt;:     mov    %rsp,%rbp\n=&gt; 0x00005555555546ee &lt;+4&gt;:     movzbl 0x20092b(%rip),%eax        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x00005555555546f5 &lt;+11&gt;:    test   %al,%al\n   0x00005555555546f7 &lt;+13&gt;:    sete   %al\n   0x00005555555546fa &lt;+16&gt;:    test   %al,%al\n   0x00005555555546fc &lt;+18&gt;:    je     0x55555555472b &lt;Foo::getInstance()+65&gt;\n   0x00005555555546fe &lt;+20&gt;:    lea    0x20091b(%rip),%rdi        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554705 &lt;+27&gt;:    callq  0x5555555545b0 &lt;__cxa_guard_acquire@plt&gt;\n   0x000055555555470a &lt;+32&gt;:    test   %eax,%eax\n   0x000055555555470c &lt;+34&gt;:    setne  %al\n   0x000055555555470f &lt;+37&gt;:    test   %al,%al\n   0x0000555555554711 &lt;+39&gt;:    je     0x55555555472b &lt;Foo::getInstance()+65&gt;\n   0x0000555555554713 &lt;+41&gt;:    lea    0x2008fe(%rip),%rdi        # 0x555555755018 &lt;_ZZN3Foo11getInstanceEvE10s_instance&gt;\n   0x000055555555471a &lt;+48&gt;:    callq  0x555555554734 &lt;Foo::Foo()&gt;\n   0x000055555555471f &lt;+53&gt;:    lea    0x2008fa(%rip),%rdi        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554726 &lt;+60&gt;:    callq  0x5555555545a0 &lt;__cxa_guard_release@plt&gt;\n   0x000055555555472b &lt;+65&gt;:    lea    0x2008e6(%rip),%rax        # 0x555555755018 &lt;_ZZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554732 &lt;+72&gt;:    pop    %rbp\n   0x0000555555554733 &lt;+73&gt;:    retq   \nEnd of assembler dump.\n\nåœ¨+4ã€+20ã€+53å‡ºç°çš„_ZGVZN3Foo11getInstanceEvE10s_instanceä½¿ç”¨c++filtåˆ†æä¸ºguard variable for Foo::getInstance()::s_instanceï¼Œè€Œ+41ã€+65ä½ç½®å‡ºç°çš„_ZZN3Foo11getInstanceEvE10s_instanceåˆ™ä¸ºFoo::getInstance()::s_instanceã€‚åè€…æ˜¯s_instanceè¿™ä¸ªå±€éƒ¨é™æ€å˜é‡ï¼Œå‰è€…ä»åå­—çœ‹å°±çŸ¥é“æ˜¯ä¸ªguardæ ‡å¿—å˜é‡ï¼Œç”¨æ¥æŒ‡ç¤ºå±€éƒ¨é™æ€å˜é‡çš„åˆå§‹åŒ–çŠ¶æ€ã€‚\n+4 ~ +18æµ‹è¯•guardå˜é‡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå¦‚æœä¸º0ï¼Œä»£è¡¨s_instanceæœªåˆå§‹åŒ–ï¼Œè¿›å…¥+27ï¼›å¦åˆ™ä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œè¿›å…¥+65ã€‚\n+20 ï½ +27ä»¥guardå˜é‡åœ°å€ä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œ__cxa_guard_acquireå‡½æ•°ã€‚\n+32 ï½ +39æµ‹è¯•è¿”å›å€¼ï¼Œå¦‚æœä¸º0ï¼Œä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œè¿›å…¥+65ï¼›å¦åˆ™ä»£è¡¨s_instanceæœªåˆå§‹åŒ–ï¼Œè¿›å…¥+41ã€‚\n+41 ï½ +48åˆå§‹åŒ–s_instance\n+53 ï½ +60ä»¥guardå˜é‡åœ°å€ä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œ__cxa_guard_releaseå‡½æ•°ã€‚\n+65 ï½ +73è¿”å›s_instanceåœ°å€\n__cxa_guard_acquireæˆ‘ä»¬æ¥çœ‹çœ‹__cxa_guard_acquireè¿™ä¸ªå‡½æ•°å…·ä½“åšäº†ä»€ä¹ˆï¼Œè¯¥å‡½æ•°ä»£ç ä½äºgcc-7-7.3.0/gcc-7.3.0/libstdc++-v3/libsupc++/guard.ccã€‚ç”±äºè¿™ä¸ªå‡½æ•°é’ˆå¯¹ä¸åŒå¹³å°åšäº†ä¸åŒçš„å®ç°ï¼Œæœ‰äº›æˆ‘ä»¬ä¸éœ€è¦çš„ä»£ç ï¼Œä»¥æˆ‘æœºå™¨çš„è®¾ç½®ï¼Œæ”¯æŒçº¿ç¨‹å’Œfutexç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥åˆ é™¤äº†ä¸€äº›ä¸ç›¸å…³çš„ä»£ç ï¼š\nint __cxa_guard_acquire (__guard *g)&#123;    // If the target can reorder loads, we need to insert a read memory    // barrier so that accesses to the guarded variable happen after the    // guard test.    // 1    if (_GLIBCXX_GUARD_TEST_AND_ACQUIRE (g))        return 0;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    // 2    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        // 3        const int guard_bit = _GLIBCXX_GUARD_BIT;        const int pending_bit = _GLIBCXX_GUARD_PENDING_BIT;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        while (1)        &#123;            // 4            int expected(0);            if (__atomic_compare_exchange_n(gi, &amp;expected, pending_bit, false,                                            __ATOMIC_ACQ_REL,                                            __ATOMIC_ACQUIRE))            &#123;                // This thread should do the initialization.                return 1;            &#125;            // 5            if (expected == guard_bit)            &#123;                // Already initialized.                return 0;            &#125;            // 6            if (expected == pending_bit)            &#123;                // Use acquire here.                // 7                int newv = expected | waiting_bit;                // 8                if (!__atomic_compare_exchange_n(gi, &amp;expected, newv, false,                                                 __ATOMIC_ACQ_REL,                                                 __ATOMIC_ACQUIRE))                &#123;                    // 9                    if (expected == guard_bit)                    &#123;                        // Make a thread that failed to set the                        // waiting bit exit the function earlier,                        // if it detects that another thread has                        // successfully finished initialising.                        return 0;                    &#125;                    // 10                    if (expected == 0)                        continue;                &#125;                // 11                expected = newv;            &#125;            // 12            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAIT, expected, 0);        &#125;    &#125;    return acquire (g);&#125;\n\n\n\né¦–å…ˆæ£€æµ‹guardå˜é‡ï¼Œguardå˜é‡ç­‰äº1çš„è¯ï¼Œç›´æ¥è¿”å›0ï¼Œä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œä¸éœ€è¦å†æ¬¡åˆå§‹åŒ–ã€‚\næ£€æµ‹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰å¤šçº¿ç¨‹çš„è¯ï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å»åšé¢å¤–å·¥ä½œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚\nguard_bitè¡¨ç¤ºs_instanceå·²ç»åˆå§‹åŒ–æˆåŠŸï¼›pending_bitè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ï¼›waiting_bitè¡¨ç¤ºæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨ç­‰å¾…s_instanceçš„åˆå§‹åŒ–ã€‚\nä½¿ç”¨ä¸€ä¸ªåŸå­æ“ä½œæ¥æ£€æµ‹guardå˜é‡æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0ï¼Œåˆ™ç”±å½“å‰çº¿ç¨‹åˆå§‹åŒ–s_instanceï¼ŒæŠŠpending_bitå†™å…¥guardå˜é‡ï¼Œè¿”å›1ã€‚å¦‚æœä¸ä¸º0ï¼Œåˆ™å°†guardå½“å‰å€¼å†™å…¥expectedã€‚\næ£€æµ‹expectedå€¼æ˜¯å¦ä¸ºguard_bitï¼Œå¦‚æœæ˜¯ï¼Œåˆ™s_instanceå·²åˆå§‹åŒ–å®Œæˆï¼Œä¸å†éœ€è¦åˆå§‹åŒ–ï¼Œè¿”å›0ã€‚\næ£€æµ‹expectedå€¼æ˜¯å¦ä¸ºpending_bitï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜s_instanceæ­£åœ¨åˆå§‹åŒ–ï¼Œä¸”æ²¡æœ‰å…¶ä»–çº¿ç¨‹ç­‰å¾…åˆå§‹åŒ–ã€‚\nå°†newvå˜é‡è®¾ç½®ä¸ºpending_bit | waiting_bitï¼Œè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚\nä½¿ç”¨ä¸€ä¸ªåŸå­æ“ä½œæ¥æ£€æµ‹guardå˜é‡æ˜¯å¦ä¸ºpending_bitï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†guardå˜é‡ï¼Œéœ€è¦åšè¿›ä¸€æ­¥æ£€æµ‹ï¼›å¦‚æœæ˜¯ï¼Œè¯´æ˜æ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹guardå˜é‡ï¼Œåˆ™å°†pending_bit | waiting_bitå†™å…¥guardå˜é‡ã€‚\nå¦‚æœexpectedç­‰äºguard_bitï¼Œè¯´æ˜s_instanceè¢«åˆå§‹åŒ–æˆåŠŸï¼Œä¸éœ€è¦å†åˆå§‹åŒ–ï¼Œè¿”å›0ã€‚\nå¦‚æœexpectedç­‰äº0ï¼Œè¯´æ˜s_instanceåˆå§‹åŒ–å¤±è´¥ï¼Œå›åˆ°4é‡æ–°å¼€å§‹æ£€æµ‹ã€‚\nå¦‚æœåœ¨8ä¸­æ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹è¿‡guardå˜é‡ï¼Œå°†expectedè®¾ç½®ä¸ºpending_bit | waiting_bitï¼Œè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯å½“å‰çº¿ç¨‹ï¼‰æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚\nå¦‚æœåœ¨6å¤„æ²¡æœ‰è¿›å…¥ifåˆ†æ”¯ï¼Œè¯´æ˜expectedç­‰äºpending_bit | waiting_bitï¼Œå¦‚æœè¿›å…¥äº†ifåˆ†æ”¯ï¼Œç”±11å¯å¾—ï¼Œæ­¤æ—¶expectedä¹Ÿè¢«ä¿®æ”¹ä¸ºäº†pending_bit | waiting_bitã€‚æ€»ä¹‹ï¼Œæ­¤æ—¶s_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚åˆ©ç”¨futexç³»ç»Ÿè°ƒç”¨ï¼Œå†æ¬¡æ£€æµ‹guardå˜é‡æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿäº†å˜åŒ–ï¼Œå›åˆ°4é‡æ–°å¼€å§‹æ£€æµ‹ï¼›å¦‚æœæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä»ç„¶ç­‰äºpending_bit | waiting_bitï¼Œåˆ™æŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚\n\næ€»ä¹‹ï¼Œ__cxa_guard_acquireè¦ä¹ˆè¿”å›0è¦ä¹ˆè¿”å›1ï¼Œç”¨æ¥æŒ‡ç¤ºs_instanceå·²åˆå§‹åŒ–æˆ–æœªåˆå§‹åŒ–ã€‚__cxa_guard_acquireå¯èƒ½ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œè¿™å‘ç”Ÿåœ¨s_instanceæ­£åœ¨åˆå§‹åŒ–çš„æ—¶å€™ã€‚\n__cxa_guard_releaseç”±äº__cxa_guard_acquireå¯èƒ½å¯¼è‡´å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œå› æ­¤éœ€è¦åœ¨s_instanceåˆå§‹åŒ–å®Œæˆåä½¿ç”¨å°†__cxa_guard_releaseçº¿ç¨‹å”¤é†’ã€‚\nvoid __cxa_guard_release (__guard *g) throw ()&#123;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    // 1    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        const int guard_bit = _GLIBCXX_GUARD_BIT;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        // 2        int old = __atomic_exchange_n (gi, guard_bit, __ATOMIC_ACQ_REL);        // 3        if ((old &amp; waiting_bit) != 0)            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAKE, INT_MAX);        return;    &#125;    set_init_in_progress_flag(g, 0);    _GLIBCXX_GUARD_SET_AND_RELEASE (g);&#125;\n\n\n\næ£€æµ‹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒ\nä½¿ç”¨åŸå­æ“ä½œå°†guardå˜é‡ç½®ä¸ºguard_bitï¼ŒåŒæ—¶è·å–guardå˜é‡åŸå§‹å€¼ã€‚\nå¦‚æœguardå˜é‡åŸå§‹å€¼åŒ…å«waiting_bitï¼Œè¯´æ˜æœ‰çº¿ç¨‹æŒ‚èµ·ï¼ˆæˆ–å°†è¦è°ƒç”¨futexæ¬²ä½¿çº¿ç¨‹æŒ‚èµ·ï¼‰ï¼Œè°ƒç”¨futexå”¤é†’æŒ‚èµ·çš„è¿›ç¨‹ã€‚\n\n__cxa_guard_abortç”±äºs_instanceå¯èƒ½åˆå§‹åŒ–å¤±è´¥ï¼ˆæœ¬ä¾‹ä¸­å¹¶æœªä½“ç°ï¼‰ï¼Œå› æ­¤è¿˜æœ‰ä¸€ä¸ª__cxa_guard_abortå‡½æ•°ã€‚\nvoid __cxa_guard_abort (__guard *g) throw ()&#123;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        int old = __atomic_exchange_n (gi, 0, __ATOMIC_ACQ_REL);        if ((old &amp; waiting_bit) != 0)            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAKE, INT_MAX);        return;    &#125;    set_init_in_progress_flag(g, 0);&#125;\n\n\nä¸__cxa_guard_releaseåŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºä¼šå°†guardå˜é‡ç½®0ã€‚\né€’å½’åˆå§‹åŒ–è°ƒç”¨ç”±äºåœ¨C++11æ ‡å‡†ä¸­ï¼Œåˆå§‹åŒ–å¦‚æœå‘ç”Ÿäº†é€’å½’æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼Œæ‰€ä»¥GCC 7.3.0é’ˆå¯¹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒåšäº†ä¸åŒçš„å¤„ç†ã€‚å¦‚æœæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒï¼Œä¸è¿›è¡Œé¢å¤–å¤„ç†ï¼Œä¼šå‘ç”Ÿæ­»é”ï¼›å¦‚æœæ˜¯å•çº¿ç¨‹ç¯å¢ƒï¼Œåˆ™ä¼šæŠ›å¼‚å¸¸ã€‚\n// acquire() is a helper function used to acquire guard if thread support is// not compiled in or is compiled in but not enabled at run-time.static intacquire(__guard *g)&#123;    // Quit if the object is already initialized.    if (_GLIBCXX_GUARD_TEST(g))        return 0;    if (init_in_progress_flag(g))        throw_recursive_init_exception();    set_init_in_progress_flag(g, 1);    return 1;&#125;\n\n\næ€»ç»“çœ‹åˆ°äº†GCCå¦‚æ­¤å¤æ‚çš„å®ç°ï¼Œæˆ‘çš„ä¸ªäººæ„Ÿæƒ³æ˜¯è¿˜æ˜¯ä¸è¦è‡ªå·±é€ è½®å­æ¥ä¿è¯å•ä¾‹ç±»çš„çº¿ç¨‹å®‰å…¨äº†ï¼Œæƒ³è¦åšåˆ°å’ŒGCCä¸€æ ·çš„é«˜æ•ˆè¿˜æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œåˆ©ç”¨C++11æ ‡å‡†çš„å¸¦æ¥çš„ä¾¿åˆ©å°±æŒºå¥½ã€‚\nåŸæ–‡ä½œè€…ï¼šimredåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/imred/article/details/89069750\n\n","categories":["é‡è§C++"],"tags":["C++","C++11"]},{"title":"ã€C++ã€‘å‡½æ•°é‡è½½çš„å½¢å¼åŠå…¶èƒŒååŸç†","url":"/2022/04/29/note_cpp/2%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD/","content":"å¸¸è¨€é“ï¼šä¸­å›½æœ‰ä¿©çƒï¼Œè°éƒ½èµ¢ä¸äº†ï¼è¿™å¥è¯åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹æœ‰ä¸åŒçš„æ„æ€\nC++ä¸­ï¼Œå‡½æ•°æ”¯æŒåœ¨åŒä¸€ä½œç”¨åŸŸä¸‹å£°æ˜å‡ ä¸ªåŠŸèƒ½ç±»ä¼¼çš„åŒåå‡½æ•°ï¼Œä½†éœ€è¦éµå®ˆä»¥ä¸‹è§„å®šâ€¦â€¦\n\n\nC++ä¸­ï¼Œå‡½æ•°æ”¯æŒåœ¨åŒä¸€ä½œç”¨åŸŸä¸‹å£°æ˜å‡ ä¸ªåŠŸèƒ½ç±»ä¼¼çš„åŒåå‡½æ•°ï¼Œä½†éœ€è¦éµå®ˆä»¥ä¸‹è§„å®š\n\nå½¢å‚ä¸ªæ•°ä¸åŒ\nå½¢å‚ç±»å‹ä¸åŒ\nå½¢å‚ç±»å‹çš„é¡ºåºä¸åŒ\n\nç¼–è¯‘å™¨ä¼šåœ¨è°ƒç”¨è¿™äº›åŒåå‡½æ•°çš„æ—¶å€™ï¼Œæ ¹æ®å…·ä½“æƒ…å†µæ¥é€‰æ‹©ä¸åŒçš„å‡½æ•°\n\n[TOC]\n1.å‡½æ•°é‡è½½çš„æ ·å¼\nä¸Šé¢æåˆ°äº†å‡½æ•°é‡è½½çš„3ä¸ªè§„å®šï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ç”¨å…·ä½“ç¤ºä¾‹è®¤è¯†ä¸€ä¸‹å®ƒä»¬\n\nå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªA+Bçš„ä»£ç ï¼Œå¦‚æœæ¯æ¬¡éƒ½éœ€è¦æ ¹æ®ä¸åŒæ•°æ®ç±»å‹æ¥å†™ä¸åŒçš„å‡½æ•°å»å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæœªå…æœ‰ç‚¹å¤ªè¿‡ç¹æ‚ã€‚\nåœ¨C++ä¸­ï¼Œåªéœ€è¦ä¿®æ”¹å‡½æ•°çš„å‚æ•°ï¼Œå³æ„æˆäº†å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªå·±é€‰æ‹©å¯¹åº”çš„å‡½æ•°è¿›è¡Œç›¸åŠ æ“ä½œ\n1.1å½¢å‚ç±»å‹ä¸åŒ//å‡½æ•°é‡è½½int Add(int a, int rb)&#123;\treturn a + b;&#125;long Add(long a, long b)&#123;\treturn a + b;&#125;double Add(double a, double b)&#123;\treturn a + b;&#125;int main()&#123;\tcout &lt;&lt; Add(10, 20) &lt;&lt;endl;     cout &lt;&lt; Add(10L, 20L) &lt;&lt; endl;\tcout &lt;&lt; Add(10.0, 20.0) &lt;&lt; endl;\treturn 0;&#125;\n\n\n1.2å½¢å‚ä¸ªæ•°ä¸åŒint Add(int a, int b) &#123;\treturn a + b;&#125;//ä¸ªæ•°ä¸åŒint Add(int a, int b, int c) &#123;\treturn a + b + c;&#125;\n\n\n1.3å½¢å‚ç±»å‹é¡ºåºä¸åŒè¿™é‡Œçš„é¡ºåºå¹¶ä¸æ˜¯aå’Œbçš„é¡ºåºå“ˆï¼åªæŠŠaå’Œbæ¢ä¸€ä¸ªä½ç½®æ˜¯ä¸æ„æˆå‡½æ•°é‡è½½çš„\nè¿™é‡ŒæŒ‡çš„æ˜¯å…ˆä¼ intå†ä¼ doubleï¼Œå’Œå…ˆä¼ doubleå†ä¼ intçš„ä¸¤ç§å‡½æ•°\n//å½¢å‚ç±»å‹çš„é¡ºåºä¸åŒvoid Add(int  a, double b) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;&#125;void Add(double  a,int b) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;&#125;\n\n\n\n1.4éå‡½æ•°é‡è½½åªä¿®æ”¹å‡½æ•°çš„è¿”å›å€¼ç±»å‹æ˜¯ä¸æ„æˆå‡½æ•°é‡è½½çš„\n\n\n2.C++å®ç°å‡½æ•°é‡è½½çš„åŸç†\nåœ¨çœ‹åç»­å†…å®¹ä¹‹å‰ï¼Œå»ºè®®å…ˆå¤ä¹ ä¸€ä¸‹ç¨‹åºè¿è¡Œçš„4ä¸ªé˜¶æ®µï¼Œä»¥ä¾¿ç†è§£åé¢çš„æ“ä½œğŸ‘‰ä¼ é€é—¨\n\nè¿™é‡Œä½¿ç”¨æˆ‘çš„æ ‘è“æ´¾åœ¨Linuxç³»ç»Ÿä¸‹ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹å‡½æ•°é‡è½½èƒŒåçš„æ ·å¼\né¦–å…ˆæˆ‘åˆ›å»ºäº†3ä¸ªæ–‡ä»¶ï¼Œtest.c Add.h Add.cppï¼Œæ–‡ä»¶çš„å†…å®¹ä¸€å¹¶ç»™å‡º\n//Add.h#include&lt;iostream&gt;using namespace std;int Add(int a,int b);double Add(double a,double b);//Add.c#include &quot;Add.h&quot;int Add(int a,int b)&#123;\treturn a+b;&#125;double Add(double a,double b)&#123;\treturn a+b;&#125;//test.cpp#include &quot;Add.h&quot;int main()&#123;\tcout&lt;&lt;Add(1,2)&lt;&lt;endl;\tcout&lt;&lt;Add(1.5,2.5)&lt;&lt;endl;\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨gccè¿™ä¸ªCè¯­è¨€ç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œå‡ºç°äº†å¾ˆå¤šæŠ¥é”™ï¼Œå› ä¸ºCè¯­è¨€æ˜¯ä¸æ”¯æŒå‡½æ•°é‡è½½çš„\n\n2.1ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ä½¿ç”¨g++ç¼–è¯‘å™¨æ¥ç¼–è¯‘è¿™ä¸ªä»£ç \ng++ test.cpp add.cpp -o Tcpp\n\næ‰§è¡Œ./Tcppè¿è¡Œè¯¥å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸è¾“å‡ºäº†ç›¸åŠ åçš„ç»“æœ\n\n\n2.2æŸ¥çœ‹æ±‡ç¼–æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶Tcppçš„æ±‡ç¼–ä»£ç \nobjdump -S Tcpp\n\nåœ¨è¿™é‡Œé¢å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬ä¸¤ä¸ªAddå‡½æ•°çš„ä½ç½®ï¼Œå¯è§å®ƒä»¬çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”ä¸€ä¸ªå‡½æ•°åä¸º_Z3Addiiï¼Œå¦å¤–ä¸€ä¸ªæ˜¯_Z3Adddd\n\n2.2.1æ±‡ç¼–å‡½æ•°åçš„å«ä¹‰è¿™ä¸¤ä¸ªæ±‡ç¼–ä»£ç ä¸­çš„å‡½æ•°åï¼Œå…¶å®åŒ…å«äº†å‡½æ•°åã€å‡½æ•°å‚æ•°è¿™ä¸¤ä¸ªä¿¡æ¯\n\næ‹†åˆ†äº†å…¶ä¸­ä¸€ä¸ªï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ª_Z3Addddçš„æ„æ€å°±å¾ˆæ˜ç¡®äº†ï¼Œæœ«å°¾çš„ä¸¤ä¸ªdä»£è¡¨å‡½æ•°å‚æ•°æ˜¯(double,double)\n\næˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŸ¥çœ‹å®ƒçš„æ±‡ç¼–ä»£ç ï¼Œè¿›ä¸€æ­¥ç¡®è®¤å‘½åè§„åˆ™ï¼ˆå…¶å®è¿™ä¸ªå‘½åè§„åˆ™æ˜¯åæ¨å¾—å‡ºçš„ï¼‰\n#include&lt;iostream&gt;using namespace std;void f(int a,int b)&#123;\tcout &lt;&lt;a&lt;&lt;endl;\tcout &lt;&lt;b&lt;&lt;endl;&#125;int main()&#123;\tf(3,4);\treturn 0;&#125;\n\nç¼–è¯‘ç¨‹åºåï¼Œæ‰§è¡Œobjdump -Sï¼Œå¯ä»¥çœ‹åˆ°få‡½æ•°è¢«å‘½åä¸º_Z1fiiï¼Œä»£è¡¨å‡½æ•°åé•¿åº¦ä¸º1ï¼ŒåŸæœ¬å‡½æ•°åfï¼Œå’Œå‡½æ•°å‚æ•°(int ,int)\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ±‡ç¼–ä¸­è¿™ä¸ªå‡½æ•°åçš„å‘½åè§„åˆ™ï¼Œé‚£å®ƒå’ŒC++æ”¯æŒå‡½æ•°é‡è½½æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ\n\nåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€çœ‹çœ‹cè¯­è¨€ç¨‹åºï¼Œæ±‡ç¼–ä»£ç ä¸­å‡½æ•°åˆæ˜¯æ€ä¹ˆå‘½åçš„\n2.2.2æŸ¥çœ‹Cè¯­è¨€æ±‡ç¼–è¿™é‡Œæˆ‘æŠŠä¹‹å‰çš„å‡½æ•°ä¿®æ”¹æˆäº†Cè¯­è¨€çš„æ ·å¼ï¼Œgccç¼–è¯‘åå†æ¥çœ‹çœ‹å®ƒçš„æ±‡ç¼–\nvoid f(int a,int b)&#123;\tprintf(&quot;%d %d\\n&quot;,a,b);&#125;\n\n\nç„¶åä½ å°±ä¼šå‘ç°ï¼ŒCè¯­è¨€æ±‡ç¼–ä»£ç ä¸­çš„å‡½æ•°åï¼Œå°±æ˜¯å‡½æ•°åŸæœ¬çš„åå­—fï¼Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¸œè¥¿ï¼\n\n2.3å¾—å‡ºç»“è®ºçœ‹åˆ°è¿™é‡Œï¼Œä½ èƒ½çŒœå‡ºæ¥ä¸ºä»€ä¹ˆC++æ”¯æŒå‡½æ•°æ±‡ç¼–ï¼Œè€ŒCè¯­è¨€ä¸æ”¯æŒäº†å—ï¼Ÿ\n\næ²¡é”™ï¼é‚£æ˜¯å› ä¸ºC++çš„æ±‡ç¼–ä»£ç ä¸­ï¼Œå‡½æ•°åè¿˜ä¿å­˜äº†å‡½æ•°çš„å½¢å‚ç±»å‹ï¼Œè€ŒCè¯­è¨€ä¸­å¹¶æ²¡æœ‰ä¿å­˜ï¼Œè‡ªç„¶æ— æ³•åŒºåˆ†ä¸¤ä¸ªå‡½æ•°\n\nè¿™ä¸ªæ±‡ç¼–å‡½æ•°åçš„å‘½åæ–¹å¼ä¹Ÿèƒ½è§£é‡ŠC++å‡½æ•°é‡è½½çš„3ç§æ ·å¼\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªfunå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºå®ƒçš„æ±‡ç¼–å‡½æ•°å\n\n\n\nç±»å‹\nå½¢å¼ä¸€\nå½¢å¼äºŒ\n\n\n\nå½¢å‚ä¸ªæ•°ä¸åŒ\n_Z3funii(int,int)\n_Z3funiii(int,int,int)\n\n\nå½¢å‚ç±»å‹ä¸åŒ\n_Z3funii(int,int)\n_Z3fundd(double,double)\n\n\nå½¢å‚ç±»å‹é¡ºåºä¸åŒ\n_Z3funid(int,double)\n_Z3fundi(double,int)\n\n\nåŒæ—¶ä¹Ÿèƒ½è§£é‡Šä¸ºä½•åªä¿®æ”¹å‡½æ•°è¿”å›å€¼ç±»å‹æ˜¯ä¸æ„æˆé‡è½½çš„ï¼Œå› ä¸ºæ±‡ç¼–ä»£ç ä¸­æ²¡æœ‰ä¿å­˜å‡½æ•°çš„è¿”å›å€¼\n\næ­£å› ä¸ºC++åœ¨æ±‡ç¼–å¤„ç†ä¸­èƒ½å¤Ÿä»¥è¿™ç§å‘½åæ–¹å¼æ¥åŒºåˆ†åŒåçš„ä¸åŒå‡½æ•°ï¼Œå¹¶ç»™å®ƒä»¬èµ‹äºˆä¸åŒçš„åœ°å€ï¼Œç¼–è¯‘å™¨åœ¨é“¾æ¥ç¬¦å·è¡¨çš„æ—¶å€™ï¼Œæ‰èƒ½é€šè¿‡å‡½æ•°ä¼ å‚çš„ä¸åŒæ‰¾åˆ°å®ƒéœ€è¦è°ƒç”¨çš„å¯¹åº”å‡½æ•°çš„åœ°å€\n\nåœ¨mainå‡½æ•°çš„æ±‡ç¼–ä¸­ï¼Œä¹Ÿèƒ½æ‰¾åˆ°å¯¹åº”å‡½æ•°çš„è°ƒç”¨æ“ä½œ\n\n\n3.è¯­æ³•externâ€Câ€å› ä¸ºC++æ±‡ç¼–å¤„ç†ä¸­å¯¹å‡½æ•°åçš„ä¿®é¥°å’ŒCè¯­è¨€ä¸åŒï¼Œæ‰€ä»¥C++ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªè¯­æ³•ï¼Œä¸“é—¨ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒæŸæŸæŸå‡½æ•°è¦ç”¨Cè¯­è¨€çš„è§„åˆ™æ¥ä¿®é¥°\n #include &lt;iostream&gt;using namespace std;extern &quot;C&quot; int fun(int a,int b);int main()&#123;    int sum=fun(1,2);    return 0;&#125;int fun(int a,int b)&#123;     return a+b;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ä¿®é¥°çš„funå‡½æ•°ï¼Œåœ¨æ±‡ç¼–ä¸­å°±åªæœ‰å‡½æ•°åï¼Œè€Œä¸æ˜¯C++å½¢å¼åŸæœ¬çš„_Z3funii\n\nè¿™æ ·Cè¯­è¨€çš„ä»£ç å°±å¯ä»¥é“¾æ¥è¿™ç§æ–¹å¼å†™çš„C++é™æ€åº“ï¼ˆå‰ææ˜¯è¿™ä¸ªé™æ€åº“ä¸­æ²¡æœ‰å‡½æ•°é‡è½½å’ŒC++çš„è¯­æ³•ï¼‰\n\nç„¶åæˆ‘å°±æƒ³é—®ï¼šè¿™å’ŒCçš„é™æ€åº“æœ‰å•¥åŒºåˆ«â€¦â€¦\n\nå½“ç„¶æœ‰äº†ï¼ä¸€ä¸ªåº“é‡Œé¢æœ‰å¾ˆå¤šå¾ˆå¤šä»£ç ï¼Œæ€»æœ‰äº›å‡½æ•°æ¥å£æ˜¯Cè¯­è¨€ä¹Ÿèƒ½æ”¯æŒçš„å˜›ï¼Œè¿™äº›æ¥å£å°±ç”¨Cè¯­è¨€çš„æ–¹å¼æ¥ä¿®é¥°ï¼Œè¿™æ ·Cè¯­è¨€ä¹Ÿèƒ½è°ƒç”¨äº†ï¼Œä¸ä¸€ä¸¾ä¸¤å¾—ï¼Ÿ\n3.1C++è°ƒç”¨Cè¯­è¨€é™æ€åº“é™¤äº†æ›´æ”¹ä¿®é¥°æ–¹å¼å¤–ï¼Œextern&quot;C&quot;è¿˜ç”¨äºè®©C++ç¨‹åºæ¥è°ƒç”¨Cè¯­è¨€å†™çš„åº“\n\næ¯”å¦‚æ ‘è“æ´¾è¦ç”¨åˆ°çš„wiringPiåº“ï¼Œå®ƒæ˜¯ç”¨Cè¯­è¨€å®ç°çš„ï¼Œåœ¨ç¼–ç¨‹ä¸ºé™æ€åº“åï¼Œé‡Œé¢æ±‡ç¼–å¯¹å‡½æ•°çš„ä¿®é¥°å°±å›ºå®šäº†ï¼Œå¹¶æ²¡æœ‰C++ä¸‹çš„_Z1...å’Œå‚æ•°ç±»å‹ä¿®é¥°ã€‚\n\nè¿™æ—¶å€™å¦‚æœç”¨C++ç›´æ¥æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒC++ç¨‹åºæ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„å‡½æ•°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œextern&quot;C&quot;çš„ä½œç”¨å°±æ˜¯è®©ç¼–è¯‘å™¨ä»¥Cè¯­è¨€çš„æ–¹å¼å»å¯»æ‰¾å¯¹åº”å‡½æ•°\næ¯”å¦‚ä¸‹å›¾çš„ä»£ç ï¼Œè°ƒç”¨äº†wiringPiåº“é‡Œé¢çš„åˆå§‹åŒ–å‡½æ•°ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªå‡½æ•°\n\næˆ‘ä»¬ç”¨G++ç¼–è¯‘å™¨ç¼–è¯‘è¿™ä¸ªä»£ç ï¼Œå°±ä¼šå‘ç°ï¼Œæ¬¸tnndæ€ä¹ˆæ²¡æœ‰æŠ¥é”™å•Šï¼Ÿ\n\n\nå…¶å®å§ï¼Œåº“å‡½æ•°çš„å¼€å‘è€…æ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ã€‚åœ¨å¹³æ—¥ç¼–ç¨‹ä¸­ï¼Œä¹Ÿæœ‰åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”é‚£å°±æ˜¯ç”¨æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼\n3.2ç”¨æ¡ä»¶ç¼–è¯‘è§£å†³é—®é¢˜å‰æƒ…æè¦ï¼šåœ¨C++çš„ç¼–è¯‘ç¯å¢ƒä¸­æœ‰ä¸€ä¸ªé¢„å®šä¹‰ç¬¦å·__cplusplus\ncout&lt;&lt; __cplusplus &lt;&lt;endl;\n\nåœ¨linuxç¯å¢ƒä¸‹ï¼Œç¼–è¯‘å™¨æ‰“å°å‡ºäº†ä»¥ä¸‹æ•°å­—\n\nè€Œåœ¨windowsçš„VS2019ç¼–è¯‘å™¨ä¸‹æ‰“å°äº†ä¸‹é¢çš„æ•°å­—\n\nå’±å…ˆä¸ç®¡è¿™ä¸ªæ•°å­—æ˜¯å•¥æ„æ€ï¼ˆçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ—¥æœŸï¼‰ï¼Œè‡³å°‘åœ¨Cè¯­è¨€ä¸­æ˜¯æ²¡æœ‰è¿™ä¸ªé¢„å®šä¹‰ç¬¦å·çš„\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªé¢„å®šä¹‰ç¬¦å·ï¼Œå‡è®¾æ˜¯C++ç¯å¢ƒï¼Œå°±æ”¾å‡ºextern&quot;C&quot;æ¥å£°æ˜å‡½æ•°ï¼Œå¦‚æœæ˜¯Cè¯­è¨€ç¯å¢ƒï¼Œå°±ä¸ç”¨extern&quot;C&quot;\næ–¹æ³•ä¸€ï¼šæ‰¹é‡extern\n#ifdef __cplusplusextern &quot;C&quot; &#123;#endif    void Add(int a,int b);    int fun(int a,int b);    //è¿™é‡Œå¯ä»¥æ”¾å¤šä¸ªå‡½æ•°çš„å£°æ˜    //â€¦â€¦    #ifdef __cplusplus&#125;#endif\n\næ–¹æ³•äºŒï¼šdefineä¸€ä¸ªç¬¦å·ä¸ºextern&quot;C&quot;ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªå®šä¹‰å‰é¢å•ç‹¬åŠ \n#ifdef __cplusplus\t#define EXTERN extern &quot;C&quot; #else\t#define EXTERN#endifEXTERN void Add(int a,int b);EXTERN int fun(int a,int b);EXTERN int func(int a,int b);//â€¦â€¦\n\nè¿™æ ·ä¸ç®¡æ˜¯Cè¯­è¨€ï¼Œè¿˜æ˜¯C++çš„ç¨‹åºï¼Œéƒ½èƒ½æ­£å¸¸å»ºç«‹ç¬¦å·è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°\n\nGithubï¼šwiringPiåº“æºç ä»“åº“\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤§ä½¬å½“åˆç¼–å†™wiringPiåº“çš„æ—¶å€™å°±ç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨æˆ‘çš„æ ‘è“æ´¾ä¸Šï¼ŒG++ç¼–è¯‘å™¨ä¹Ÿèƒ½ç›´æ¥è¯†åˆ«å‡ºwiringPiåº“çš„åŸå› \n\n\nåœ¨æ‰¾è¿™éƒ¨åˆ†èµ„æ–™çš„æ—¶å€™ï¼Œè¿˜å‘ç°äº†ä¸€ä¸ªå°æ•…äº‹ï¼šwiringPiåº“ç°åœ¨å·²ç»ä¸å®˜æ–¹å¼€æºäº†ã€‚å› ä¸ºæœ‰å¾ˆå¤šåˆå­¦è€…æ‹¿ä»£ç å»çƒ¦åŸä½œè€…ï¼ˆäºæ˜¯ä½œè€…åœ¨å®˜ç½‘ä¸Šå†™äº†â€œè¿™ä¸æ˜¯ç»™åˆå­¦è€…ç©çš„â€å‘Šç¤ºï¼‰è¿˜æœ‰å¾ˆå¤šäººå€’å–ä»–å†™çš„åº“ï¼Œæ‰€ä»¥ä»–å°±åœ¨æœ€åä¸€æ¬¡å…¬å¼€åï¼Œåœæ­¢äº†å®˜æ–¹å¼€æº\n\n3.3Cè¯­è¨€è°ƒç”¨C++çš„åº“åŒç†ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šç”¨Cè¯­è¨€æ¥è°ƒç”¨C++çš„åº“\nä½†æ˜¯ï¼å°±å¦‚æˆ‘ä¸Šå¤´è¯´çš„ï¼Œè¿™ä¸ªåº“é‡Œé¢ï¼Œå¯ä»¥ä¾›Cè¯­è¨€è°ƒç”¨çš„å‡½æ•°ä¸èƒ½æœ‰C++çš„è¯­æ³•å’Œå‡½æ•°é‡è½½\n\nGithubï¼šTcMallocä»£ç ä»“åº“\n\næ¯”è¾ƒå¥½çš„ä¸€ä¸ªä¾‹å­æ˜¯è°·æ­Œçš„tcmallocåº“ï¼šæ­¤å­˜å‚¨åº“åŒ…å«TCMallocçš„C++ä»£ç ã€‚ TCMallocæ˜¯è°·æ­Œå¯¹Cçš„mallocï¼ˆï¼‰å’ŒC++è¿ç®—ç¬¦çš„å®šåˆ¶å®ç°ï¼Œç”¨äºåœ¨æˆ‘ä»¬çš„Cå’ŒC++ä»£ç ä¸­åˆ†é…å†…å­˜ã€‚TCMallocæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å¤šçº¿ç¨‹mallocå®ç°ã€‚\n\næ•´ä¸ªåº“çš„å‡½æ•°å…¥å£æ˜¯åœ¨tcmalloc.ccä¸­å®šä¹‰çš„ï¼Œæ‰“å¼€å®ƒå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯ç”¨C++å®ç°çš„ï¼Œä½†æ˜¯å°‘éƒ¨åˆ†å‡½æ•°æ¥å£å› ä¸ºæ²¡æœ‰C++çš„è¯­æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨äº†extern &quot;C&quot;è®©Cè¯­è¨€ä¹Ÿæ”¯æŒå®ƒ\n\nä½†æ˜¯æˆ‘è¿˜å‘ç°ï¼Œæœ‰äº›å¸¦æœ‰C++çš„å‡½æ•°æ¥å£ï¼Œä¹Ÿç”¨äº†extern &quot;C&quot;ï¼Œé‚£æ˜¯ä¸æ˜¯æˆ‘ä»¬ä¸Šé¢çš„ç»“è®ºé”™äº†å‘¢ï¼Ÿ\n\nå®è·µå‡ºçœŸçŸ¥ï¼\n4è‡ªå·±æ•´ä¸€ä¸ªé™æ€åº“4.1C++è°ƒç”¨Cè¯­è¨€é™æ€åº“é¦–å…ˆåˆ›å»ºä¸€ä¸ªVSçš„ç©ºé¡¹ç›®ï¼ŒæŠŠæˆ‘ä¹‹å‰å†™çš„Cè¯­è¨€å•é“¾è¡¨ä»£ç æ”¾è¿›å»\n\nå³é”®è¿™é‡Œçš„é¡¹ç›®åç§°-å±æ€§ï¼Œç„¶ååœ¨é…ç½®å±æ€§-å¸¸è§„-é…ç½®ç±»å‹ä¸­ï¼ŒæŠŠé¡¹ç›®æ”¹æˆé™æ€åº“\n\nä¿®æ”¹å®Œæ¯•åï¼Œç¼–è¯‘ç¨‹åºï¼Œä½ ä¼šå‘ç°debugç›®å½•ä¸‹å¤šäº†é™æ€åº“æ–‡ä»¶.lib\n\nç„¶ååœ¨æˆ‘ä»¬å½“å‰çš„C++é¡¹ç›®ä¸­ï¼Œä¿®æ”¹é¡¹ç›®å±æ€§-é“¾æ¥å™¨-å¸¸è§„-é™„åŠ åº“ç›®å½•å’Œé¡¹ç›®å±æ€§-é“¾æ¥å™¨-è¾“å…¥-é™„åŠ ä¾èµ–é¡¹\n\n\næœ€åä»¥#include &quot;../Slist/Slinklist.h&quot;çš„å½¢å¼å¼•ç”¨é™æ€åº“\nä½ ä¼šå‘ç°ç›´æ¥å¼•ç”¨æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºè¿™ä¸ªå•é“¾è¡¨çš„åº“æ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨extern &quot;C&quot;æ¥å¼•ç”¨\n\nä½¿ç”¨äº†ä¹‹åï¼Œç¨‹åºæ­£å¸¸è°ƒç”¨äº†Cè¯­è¨€çš„åº“ï¼Œå¹¶æ‰“å°å‡ºäº†ç»“æœï¼\n\n4.2Cè¯­è¨€è°ƒç”¨C++é™æ€åº“æ¥ç€ï¼Œæˆ‘ä»¬å†å†™ä¸€ä¸ªç®€å•çš„C++ç¨‹åºï¼Œç”¨ä¸Šé¢åŒæ ·çš„æ–¹æ³•ç¼–è¯‘æˆé™æ€åº“ï¼Œå¹¶åœ¨Cè¯­è¨€çš„é¡¹ç›®ä¸­è°ƒç”¨å®ƒ\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ²¡æœ‰ä»»ä½•C++è¯­æ³•çš„C++é™æ€åº“è¢«æ­£å¸¸è°ƒç”¨å¹¶æ‰“å°å‡ºäº†ç»“æœ\n\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨extern &quot;C&quot;ï¼ŒCè¯­è¨€é¡¹ç›®å°±æ— æ³•æ­£å¸¸ä½¿ç”¨è¯¥é™æ€åº“\n\nè€Œå½“æˆ‘ä»¬åœ¨C++çš„é™æ€åº“ä¸­åŒ…å«C++çš„å¤´æ–‡ä»¶åï¼ŒCè¯­è¨€é¡¹ç›®ä¸­ä¹ŸæŠ¥é”™äº†ï¼\n#include &lt;iostream&gt;using namespace std;\n\nå…‰æ˜¯é“¾æ¥åº“å‡½æ•°å¤´æ–‡ä»¶å’Œå‘½åç©ºé—´å°±æŠ¥é”™äº†ï¼Œé‚£ä¸èƒ½ä½¿ç”¨å¸¦C++è¯­æ³•çš„å‡½æ•°ä¹Ÿæ˜¯æ¿ä¸Šé’‰é’‰çš„äº‹æƒ…äº†ï¼\n\nè€Œåœ¨å…·æœ‰extern &quot;C&quot;å±æ€§çš„è·¯å¾„ä¸­ï¼Œä¹Ÿä¸èƒ½åŒ…å«å‡½æ•°é‡è½½ï¼ŒVSä¼šæŠ¥é”™\n\nåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œåœ¨Cè¯­è¨€é¡¹ç›®ä¸­ä¹Ÿæ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„\nnamespace muxue &#123;\tint a = 0;&#125;using namespace muxue;\n\n\nç°åœ¨å¯ä»¥ç¡®è®¤æˆ‘ä»¬çš„ç»“è®ºï¼Œåªæœ‰ä¸åŒ…å«ä»»ä½•C++çš„è¯­æ³•å’Œå‡½æ•°é‡è½½çš„C++é™æ€åº“ï¼Œæ‰èƒ½æ­£å¸¸è¢«Cè¯­è¨€é¡¹ç›®è°ƒç”¨ï¼\nå‹˜è¯¯ï¼Œä¸Šè¿°ç»“è®ºé”™è¯¯\n22-05-06ï¼Œåœ¨åŒå­¦çš„æç¤ºä¸‹ï¼Œå‘ç°äº†è¿™ä¸ªé”™è¯¯\n\nä¹‹å‰Cè°ƒç”¨C++çš„æ–¹å¼æœ‰é—®é¢˜ï¼Œå› ä¸ºæˆ‘æ˜¯ç›´æ¥æŠŠC++çš„è¯­æ³•æ”¾åˆ°äº†å¤´æ–‡ä»¶ä¸­ï¼Œåœ¨å±•å¼€çš„æ—¶å€™Cç¨‹åºç¼–è¯‘ä¼šæŠ¥é”™\nä½†å¦‚æœæŠŠC++çš„è¯­æ³•æ”¾å…¥cppæ–‡ä»¶ï¼Œå¤´æ–‡ä»¶ä¸­ä¸åŒ…å«çš„è¯ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ï¼\n\nå¯ä»¥çœ‹åˆ°åœ¨æœ€åçš„æµ‹è¯•é¡¹ç›®ä¸­ï¼ŒCè¯­è¨€ç¨‹åºæˆåŠŸè°ƒç”¨äº†c++çš„è¯­æ³•å¹¶æ­£ç¡®è¾“å‡ºäº†å†…å®¹\n\nè¿™ä¹Ÿèƒ½è§£é‡Šæˆ‘å…³äºè°·æ­ŒTCmallocåº“çš„ç–‘æƒ‘äº†ï¼Œçœ‹æ¥Cå’ŒC++çœŸçš„æ˜¯äº’é€šæœ‰æ— å•Šï¼\n\nç»“è¯­æœ¬ç¯‡ç¬”è®°è¯¦ç»†è§£é‡Šäº†C++ä¸­å‡½æ•°é‡è½½çš„ç±»å‹ï¼Œä»¥åŠèƒŒåçš„å®ç°åŸç†ã€‚\nè¿™ä¸ªåšå®¢èŠ±äº†æˆ‘æ•´æ•´4å°æ—¶çš„æ—¶é—´ï¼Œæ„Ÿè§‰å¾ˆå……å®ï¼\n\næ‰€ä»¥æ±‚ä¸ªèµä¸è¿‡åˆ†å§ï¼è°¢è°¢å¤§å®¶ï¼\n\n\n","categories":["é‡è§C++"],"tags":["Linux","C++"]},{"title":"ã€C++ã€‘å¼•ç”¨å’Œå†…è”å‡½æ•°","url":"/2022/05/10/note_cpp/3%E5%BC%95%E7%94%A8%E5%92%8C%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/","content":"é˜¿å·´é˜¿å·´ï¼Œæœ€è¿‘æ­å»ºå¥½äº†è…¾è®¯äº‘çš„Linuxç¯å¢ƒï¼Œæ‰€ä»¥æœ¬ç¯‡C++çš„åšå®¢å°±å°è¯•åœ¨Linuxç¯å¢ƒä¸‹æ¥æµ‹è¯•ä»£ç å§ï¼é˜¿å·´é˜¿å·´ï¼Œæœ€è¿‘æ­å»ºå¥½äº†è…¾è®¯äº‘çš„Linuxç¯å¢ƒï¼Œæ‰€ä»¥æœ¬ç¯‡C++çš„åšå®¢å°±å°è¯•åœ¨Linuxç¯å¢ƒä¸‹æ¥æµ‹è¯•ä»£ç å§ï¼\nä»Šå¤©å­¦ä¹ äº†C++çš„å¼•ç”¨å’Œå†…è”å‡½æ•°ï¼Œä¸€èµ·æ¥ç…ç…å®ƒä»¬éƒ½æ˜¯äº›å•¥â€¦â€¦\n\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\nå‰è¨€ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼ŒCè¯­è¨€ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªå«æŒ‡é’ˆçš„å®¶ä¼™ï¼Œå®ƒçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹\nint main()&#123;\tint a=10;\tint*p=&amp;a;//pæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘a        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡*på¯¹æŒ‡é’ˆè§£å¼•ç”¨è®¿é—®å˜é‡a\næ‰€ä»¥C++ä¹‹ä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿ï¼Œå«åšå¼•ç”¨ï¼Œä¸è¿‡å®ƒå’ŒæŒ‡é’ˆå®Œå…¨ä¸åŒå“¦\n\n1.å¼•ç”¨1.1åŸºæœ¬å½¢å¼å¼•ç”¨çš„åŸºæœ¬æ–¹å¼å¦‚ä¸‹\nint a=10;int&amp; b=a;int&amp; c=a;//åŒä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªåˆ«å//å¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ª//ä½†æ˜¯å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\næ­¤æ—¶çš„bå’Œcéƒ½æ˜¯açš„åˆ«åï¼Œæ³¨æ„æ˜¯åˆ«åï¼\n  \nå¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ªå˜é‡ï¼Œè€Œä¸”å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\nä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªå¼•ç”¨\næŒ‡é’ˆå¯ä»¥æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œå¼•ç”¨ä¸å¯ä»¥\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼Œä¸å¯ä»¥int&amp; b;\n\n\næ¯”å¦‚ä½ å«æåï¼Œæœ‰äººå«ä½ â€œå°æâ€ï¼Œè¿˜æœ‰äººå«ä½ â€œè‹±è¯­ä½œæ–‡äººâ€ï¼Œè¿™ä¸¤ä¸ªå¤–å·éƒ½æ˜¯ä½ çš„åˆ«åã€‚\n\næŒ‡é’ˆå¹¶ä¸æ˜¯åˆ«åï¼ŒæŒ‡é’ˆæ˜¯é€šè¿‡åœ°å€è®¿é—®æŸä¸ªå˜é‡ã€‚è€Œå¼•ç”¨æ˜¯ç»™aå˜é‡èµ·å¦å¤–çš„ä¸¤ä¸ªåå­—ï¼Œå®é™…ä¸Šbå’Œcéƒ½å¯ä»¥å½“ä½œaæ¥ä½¿ç”¨\n\nç¼–è¯‘è¿è¡Œä»£ç ï¼Œè®©ç¼–è¯‘å™¨æ‰“å°å‡ºè¿™ä¸‰è€…çš„åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±æ˜¯åŒä¸€ä¸ªå˜é‡çš„ä¸åŒåå­—ã€‚\n\n\næŒ‡é’ˆå˜é‡çš„åœ°å€å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘å¯¹è±¡çš„åœ°å€æ˜¯ä¸åŒçš„\n\nå¼•ç”¨çš„ç±»å‹å¿…é¡»å’Œå¼•ç”¨å®ä½“çš„ç±»å‹ç›¸åŒï¼Œä¸èƒ½ç”¨int&amp;å¼•ç”¨doubleç±»å‹\n\n\n1.2å¼•ç”¨çš„æƒé™é—®é¢˜â‘ constå¸¸é‡å¼•ç”¨å¯ä»¥å¼•ç”¨å¸¸é‡ï¼Œä½†æ˜¯å¿…é¡»åŠ constä¿®é¥°\n\nåŸºæœ¬çš„æ€è·¯å°±æ˜¯â€œæƒé™å¯ä»¥ç¼©å°ï¼Œä½†ä¸å¯ä»¥æ”¾å¤§â€ã€‚\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œaæ˜¯ä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„å˜é‡ï¼Œä½†æ˜¯const int&amp;d=a;ä¸­çš„dæ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œåªå¯è¯»å–açš„å†…å®¹ã€‚\neæ˜¯ä¸å¯ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥æ”¾å¤§æƒé™\n\nâ‘¡intå’Œdoubleç›¸äº’å¼•ç”¨åœ¨1.1ä¸­æœ‰æåˆ°ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥å¼•ç”¨doubleç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleï¼Œæ­¤æ—¶å¼•ç”¨å°±ä¸æ˜¯ç®€å•çš„ä¸€ä¸ªåˆ«åäº†\nå…ˆæ¥äº†è§£ä¸€ä¸‹æŠŠdoubleå¤åˆ¶ç»™intç±»å‹ï¼Œè¿™æ—¶å€™ä¼šäº§ç”Ÿâ€œéšå¼ç±»å‹è½¬æ¢â€ï¼Œhä¿å­˜çš„æ˜¯zçš„æ•´æ•°éƒ¨åˆ†\n\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾zçš„æ•´æ•°éƒ¨åˆ†ï¼Œç„¶åèµ‹å€¼ç»™h\n\nä¸´æ—¶å˜é‡å…·æœ‰â€œå¸¸æ€§â€ï¼Œå¯è¯»ä¸å¯æ”¹\n\nè€Œå½“æˆ‘ä»¬ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleæ—¶ï¼Œå®é™…ä¸Šå¼•ç”¨çš„æ˜¯ç¼–è¯‘å™¨äº§ç”Ÿçš„ä¸´æ—¶å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨const int&amp;æ¥å¼•ç”¨\nconst int&amp; i=z;//è¿™é‡Œçš„iæ˜¯ä¸´æ—¶å˜é‡çš„åˆ«å//åœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾dçš„æ•´æ•°éƒ¨åˆ†//içš„åœ°å€å’Œzä¸ç›¸åŒï¼Œä¸”ä¸´æ—¶å˜é‡ä¸ä¼šé”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå’ŒiåŒæ­¥//ç”Ÿæˆçš„è¿™ä¸ªä¸´æ—¶å˜é‡æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥içš„æœ¬è´¨æ˜¯å¼•ç”¨äº†ä¸€ä¸ªintç±»å‹cout &lt;&lt;&quot;i= &quot;&lt;&lt;i&lt;&lt;endl;cout &lt;&lt;&quot;&amp;i= &quot;&lt;&lt; &amp;i &lt;&lt;endl; cout &lt;&lt;&quot;&amp;z= &quot;&lt;&lt; &amp;z &lt;&lt;endl;//åœ¨c++ä¸­å‡½æ•°ä¸»è¦ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œåé¢ä¼šè¿›ä¸€æ­¥å­¦ä¹ \n\nä¸€ä¸ªéå¸¸ç›´è§‚çš„éªŒè¯æ–¹æ³•ï¼Œå°±æ˜¯æ‰“å°ä¸€ä¸‹ï¼Œç…ç…å®ƒä»¬çš„åœ°å€æ˜¯å¦ç›¸åŒã€‚å¯ä»¥çœ‹åˆ°ï¼Œiçš„å€¼å’Œhæ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„å°±æ˜¯é‚£ä¸ªå­˜æ”¾äº†æ•´æ•°éƒ¨åˆ†çš„ä¸´æ—¶å˜é‡ï¼Œè¿™ä¸ªä¸´æ—¶å˜é‡çš„åœ°å€å’Œzä¸åŒ\n\n1.3å¼•ç”¨çš„ä½¿ç”¨åœºæ™¯â‘ å‡½æ•°ä¼ å‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨å‡½æ•°ä¸­ä¿®æ”¹æŸä¸€ä¸ªmainä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå°±å¿…é¡»è¿›è¡Œä¼ å€è°ƒç”¨ã€‚è€Œåœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨æ¥æ“ä½œ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡å¼•ç”¨å®ç°äº†åœ¨å‡½æ•°ä¸­ä¿®æ”¹açš„å€¼\n\næ›´åŠ å……åˆ†çš„ä½“ç°ä¾¿æ˜¯Swapå‡½æ•°ï¼Œåœ¨Cè¯­è¨€ä¸­å¿…é¡»ä¸¤ä¸ªéƒ½ä¼ åœ°å€æ¥è°ƒç”¨\nåœ¨C++ä¸­ï¼Œé…åˆå‡½æ•°é‡è½½ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å†™å‡ºå¤šä¸ªäº¤æ¢å‡½æ•°\n\n\nç›´æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œäº¤æ¢æˆåŠŸï¼\n\n\nâ‘¡å‡½æ•°è¿”å›å€¼int&amp; Count()&#123;  int n=0;//ç°åœ¨æ²¡æœ‰åŠ staticï¼Œè¿”å›çš„å˜é‡nå¯èƒ½ä¼šè¦†ç›–  n++;  cout&lt;&lt;&quot;&amp;n:&quot;&lt;&lt;&amp;n&lt;&lt;endl;  return n;&#125;int main()&#123;  int&amp; ret = Count();  cout&lt;&lt; ret &lt;&lt;endl;  cout&lt;&lt;&quot;&amp;ret:&quot;&lt;&lt;&amp;ret&lt;&lt;endl;  cout&lt;&lt; ret &lt;&lt;endl;&#125;\n\nå½“æˆ‘ä»¬æŠŠnä½œä¸ºint&amp;ç±»å‹æ¥è¿”å›æ—¶ï¼Œretæ­¤æ—¶æ˜¯å¯¹nçš„å¼•ç”¨ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„å˜é‡nåœ¨å‡ºäº†å‡½æ•°åé”€æ¯äº†ï¼Œæ‰€ä»¥åœ¨mainå‡½æ•°ä¸­æ‰“å°retçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæ‰“å°å‡ºéšæœºå€¼ï¼ˆè¿™ä¸ªè¦çœ‹ä»€ä¹ˆæ—¶å€™nçš„å†…å®¹ä¼šè¢«ç¼–è¯‘å™¨è¦†å†™ï¼‰\n\nè€Œå½“æˆ‘ä»¬å¸¦ä¸Šstaticåï¼Œå¤šæ¬¡æ‰“å°nçš„å€¼éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºæ­¤æ—¶nçš„ç©ºé—´å¹¶æ²¡æœ‰è¢«é”€æ¯\n\n\nå¦‚æœå‡½æ•°è¿”å›æ—¶ï¼Œå‡ºäº†å‡½æ•°ä½œç”¨åŸŸï¼Œå¦‚æœè¿”å›å¯¹è±¡è¿˜æœªè¿˜ç»™ç³»ç»Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¼•ç”¨è¿”å›\nå¦‚æœå·²ç»è¿˜ç»™ç³»ç»Ÿäº†ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ä¼ å€¼è¿”å›ï¼Œé¿å…å‡ºç°è®¿é—®éšæœºå€¼\n\n\nä¸‹é¢ç”¨ä¸€ä¸ªç®€å•çš„Addå‡½æ•°æ¥æ¼”ç¤ºä¸€ä¸‹ä¸Šé¢æåˆ°çš„ä¸¤ç§æƒ…å†µ\n\nå¦‚æœå»æ‰staticä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥è­¦å‘Šï¼Œè€Œä¸”æ‰“å°çš„å€¼ä¼šåœ¨ç¬¬äºŒæ¬¡coutè°ƒç”¨çš„æ—¶å€™è¢«è¦†å†™\n\nå½“Addå‡½æ•°çš„cå˜é‡åŠ äº†staticä¿®é¥°åï¼Œæ‰“å°çš„å€¼éƒ½æ˜¯ç¨³å®šçš„ï¼Œä¸ä¼šè¢«è¦†å†™ï¼ˆå› ä¸ºcçš„ç©ºé—´æ²¡æœ‰è¢«é”€æ¯ï¼‰\n\nâ‘¢ä¼˜åŒ–å‡½æ•°è°ƒç”¨æ—¶é—´åœ¨å‡½æ•°è¿”å›ä¼ å‚çš„æ—¶å€™ï¼Œå…¶å®æ˜¯å…ˆæŠŠè¿”å›å€¼å­˜æ”¾åˆ°å¯„å­˜å™¨ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ç»™mainå‡½æ•°çš„å˜é‡\n\nå½“è¿”å›å€¼å¾ˆå°ï¼ˆæŒ‡å ç”¨ç©ºé—´ï¼‰çš„æ—¶å€™ï¼Œä¼šç”¨å¯„å­˜å™¨å­˜æ”¾å®ƒçš„å€¼\nå½“è¿”å›å€¼å¾ˆå¤§çš„æ—¶å€™ï¼Œéƒ¨åˆ†ç¼–è¯‘å™¨ä¼šå…ˆåœ¨mainå‡½æ•°ä¸­é¢„å…ˆå¼€è¾Ÿæ ˆå¸§ç”¨æ¥å­˜æ”¾è¿”å›å€¼\n\n\nè€Œä½¿ç”¨å¼•ç”¨ä½œä¸ºè¿”å›å€¼çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç”¨å¯„å­˜å™¨æ¥æ¥æ”¶ä¸´æ—¶å˜é‡ï¼Œè¿™æ—¶å€™å°±ä¼˜åŒ–äº†å‡½æ•°è¿”å›çš„æ—¶é—´ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œç”¨å¼•ç”¨è¿”å›çš„æ—¶é—´æ¶ˆè€—å¾ˆå°ï¼\n\nå†æ¥è¯•è¯•æŠŠå¼•ç”¨ä½œä¸ºå‚æ•°ä¼ å‚çš„æ¶ˆè€—ï¼Œå’Œä¼ å€ã€ä¼ å€¼è¿›è¡Œå¯¹æ¯”ï¼Œä»£ç å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹æµ‹è¯•å‡½æ•°å°±è¡Œäº†\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¼ åœ°å€å’Œå¼•ç”¨ä½œä¸ºå‚æ•°çš„ä¼ å‚æ¶ˆè€—éƒ½æ˜¯å¾ˆå°çš„ã€‚å› ä¸ºä¼ å€¼çš„æ—¶å€™éœ€è¦æ‹·è´æ•°æ®ï¼\n\n\n1.4å¼•ç”¨å’ŒæŒ‡é’ˆçš„æ±‡ç¼–ä»£ç ç”¨ä¸‹é¢çš„ä»£ç æ¥æŸ¥çœ‹å¼•ç”¨å’ŒæŒ‡é’ˆçš„æ±‡ç¼–åŒºåˆ«\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint&amp; ra = a;\tra = 20;\tint* pa = &amp;a;\t*pa = 20;  \treturn 0;&#125;\n\nä½ å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨çš„æ±‡ç¼–ä»£ç æ˜¯ç›¸åŒçš„ã€‚å› ä¸ºC++çš„å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”¨æŒ‡é’ˆå®ç°çš„ï¼\n\nç”¨objdump -Sè¯­å¥ï¼ŒæŸ¥çœ‹Linuxç¯å¢ƒä¸‹çš„æ±‡ç¼–ğŸ‘‡\n\n1.5å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«\nå¼•ç”¨æ˜¯åˆ«åï¼›æŒ‡é’ˆæ˜¯æŒ‡å‘åœ°å€\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼›æŒ‡é’ˆæ— è¦æ±‚\nå¼•ç”¨çš„sizeofå¤§å°å’Œå¼•ç”¨å¯¹è±¡ç›¸åŒï¼›æŒ‡é’ˆæ— è®ºæŒ‡å‘çš„è°ï¼Œå¤§å°éƒ½æ˜¯4&#x2F;8\nå¼•ç”¨ä¸èƒ½ä¸ºNULLï¼›æŒ‡é’ˆå¯ä»¥ä¸ºNULL\nå¼•ç”¨++å³å¯¹è±¡æ•°å€¼+1ï¼›æŒ‡é’ˆ++æ˜¯æŒ‡å‘çš„åœ°å€å‘ååç§»\nå¼•ç”¨æ— å¤šçº§ï¼›æŒ‡é’ˆå­˜åœ¨äºŒçº§ã€ä¸‰çº§â€¦â€¦\nå¼•ç”¨æ¯”æŒ‡é’ˆä½¿ç”¨èµ·æ¥æ›´åŠ å®‰å…¨ï¼ˆä¸ä¼šå‡ºç°é‡æŒ‡é’ˆï¼‰\nå¼•ç”¨æ˜¯ç¼–è¯‘å™¨å¤„ç†çš„ï¼›æŒ‡é’ˆéœ€è¦æ‰‹åŠ¨è§£å¼•ç”¨\nâ€¦â€¦\n\n2.å†…è”å‡½æ•°2.1åŸºæœ¬å½¢å¼åœ¨å‡½æ•°åå‰ç”¨inlineä¿®é¥°çš„å‡½æ•°æ˜¯å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨å¤„ç†æ­¤ç±»å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°åœ¨è°ƒç”¨å®ƒçš„åœ°æ–¹æ‰“å¼€ã€‚æ­¤æ—¶å†…è”å‡½æ•°å°±æ²¡æœ‰å‡½æ•°å‹æ ˆçš„å¼€é”€ï¼Œæé«˜äº†ç¨‹åºè¿è¡Œçš„æ•ˆç‡\n\nè¿™éƒ¨åˆ†å’ŒCè¯­è¨€å­¦ä¹ è¿‡çš„#defineç±»ä¼¼ï¼Œä½†defineæ˜¯ç›´æ¥æ›¿æ¢ï¼Œå†…è”å‡½æ•°ä¸æ˜¯\n\n#include &lt;stdio.h&gt;#include &lt;iostream&gt;using namespace std;#define ADD(a,b) ((a)+(b))inline int Add(int a,int b)&#123;  return a+b;&#125;int main ()&#123;  int sum=ADD(1+3,2+4);//4+6=10       printf(&quot;%d\\n&quot;, sum);   int ret = 0;  ret=Add(3,4);  return 0;&#125;\n\n2.2æŸ¥çœ‹é¢„å¤„ç†æ–‡ä»¶ä½¿ç”¨ä¸‹é¢çš„Linuxè¯­å¥å¯ä»¥æŠŠæºæ–‡ä»¶ç”Ÿæˆä¸ºé¢„å¤„ç†åçš„æ–‡ä»¶\n\nè¿™éƒ¨åˆ†å¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰ç”¨æ ‘è“æ´¾æ“ä½œçš„åšå®¢å“¦ï¼ã€ä¼ é€é—¨ã€‘\n\ng++ -E test.cpp -o test.i\n\nå¯ä»¥çœ‹åˆ°defineè¢«æ›¿æ¢äº†ï¼Œä½†æ˜¯å†…è”å‡½æ•°å¹¶æ²¡æœ‰\n\n2.3æŸ¥çœ‹æ±‡ç¼–ä»£ç â‘ Linuxç¯å¢ƒè¿™æ—¶å€™æˆ‘ä»¬å…ˆç¼–è¯‘è¿™ä¸ªæ–‡ä»¶\ng++ test.cpp\n\nç„¶åä½¿ç”¨ä¸‹é¢çš„è¯­å¥æŸ¥çœ‹æ±‡ç¼–ä»£ç \nobjdump -S a.out\n\nç„¶åä½ å°±å‘ç°ï¼Œè¿™ä¸è¿˜æ˜¯æœ‰callå‡½æ•°è°ƒç”¨å˜›ï¼Ÿè¿™å“ªé‡Œæ²¡æœ‰è°ƒç”¨å‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦è°ƒæ•´ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ“ä½œğŸ‘‰ã€å‚è€ƒåšå®¢ã€‘\ng++ -O2 test.cpp\n\nè¿™æ—¶å€™çš„æ±‡ç¼–ä»£ç å°±æ²¡æœ‰calläº†\n\nâ‘¡VS2019è¦æƒ³è°ƒæ•´VS2019çš„ä¼˜åŒ–ç­‰ä»·ï¼Œéœ€è¦åœ¨é¡¹ç›®å±æ€§ä¸­C/C++ -å¸¸è§„ä¸­ä¿®æ”¹è°ƒè¯•ä¿¡æ¯æ ¼å¼ä¸ºâ€œç¨‹åºæ•°æ®åº“â€\n\nç„¶ååœ¨ä¼˜åŒ–-å†…è”å‡½æ•°æ‰©å±•ä¿®æ”¹æˆåªé€‚ç”¨äºinline(/Ob1)\n\nç„¶åè°ƒè¯•ï¼Œå³é”®è½¬åˆ°åæ±‡ç¼–ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œno callğŸ•µï¸â€â™‚ï¸\n\n\n2.4å†…è”å‡½æ•°çš„ç‰¹æ€§defineæ²¡æœ‰ä¼ å‚æ£€æŸ¥ï¼Œä¸”ä¸èƒ½debug+å¯è¯»æ€§ä¸é«˜ï¼Œå†…è”å‡½æ•°è§£å†³äº†è¿™ä¸€ç¼ºç‚¹\n\nå†…è”å‡½æ•°æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œçœå»å‡½æ•°è°ƒç”¨çš„å¼€é”€\nå‡½æ•°ä»£ç å¾ˆé•¿çš„æ—¶å€™ä¸é€‚åˆç”¨å†…è”å‡½æ•°ï¼ˆdefineåŒç†ï¼‰\nåœ¨ä»£ç è¡Œæ•°å¾ˆé•¿çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ¤æ–­æ˜¯å¦ä½¿ç”¨inlineã€‚å¦‚æœå‡½æ•°ä½“å†…æœ‰å¾ªç¯&#x2F;é€’å½’ç­‰ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–çš„æ—¶å€™ä¼šå–æ¶ˆå†…è”\ninlineä¸å¯ä»¥å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œä¼šå¯¼è‡´é“¾æ¥é”™è¯¯\n\nå¯¹æœ€åä¸€ç‚¹å±•å¼€ä»‹ç»ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬æŠŠå†…è”å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸åŒçš„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™æ‰¾ä¸åˆ°å‡½æ•°\n\nè¿™æ˜¯å› ä¸ºå†…è”å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™å·²ç»å±•å¼€äº†ï¼Œå¯¹åº”çš„å‡½æ•°åœ°å€ä¹Ÿæ²¡äº†ï¼Œæ‰€ä»¥æ— æ³•æ­£å¸¸é“¾æ¥\n\nç»“è¯­å¼•ç”¨å’Œå†…è”å‡½æ•°çš„åšå®¢åˆ°è¿™å°±ç»“æŸå•¦ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å“¦ï¼\n\nç¬”è®°éš¾å…æœ‰é”™ï¼Œè¿˜è¯·å¤§ä½¬ä»¬æ— æƒ…æŒ‡å‡ºï¼\n\n","categories":["é‡è§C++"],"tags":["Linux","C++"]},{"title":"ã€C++ã€‘autoå…³é”®å­—ã€èŒƒå›´forã€nullptrå…³é”®å­—","url":"/2022/05/12/note_cpp/4auto%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8Cnullptr/","content":"æœ¬ç¯‡åšå®¢ä¸€èµ·æ¥ç»§ç»­å­¦ä¹ C++çš„è¯­æ³•\n\n\n\n\n\nautoå…³é”®å­—\nnullptrå…³é”®å­—\n\n\n\nèŒƒå›´for\nlinuxå¦‚ä½•ä½¿ç”¨C++11è§„åˆ™\n\n\n[TOC]\n0.linuxè®¾ç½®c++11åœ¨linuxå¹³å°ä¸‹æƒ³ä½¿ç”¨C++11æ ‡å‡†æœ‰ä¸¤ä¸ªåŠæ³•\næ–¹æ³•1æ˜¯åœ¨.cppæ–‡ä»¶çš„æœ€å¼€å¤´åŠ å…¥ä¸‹é¢çš„è¿™ä¸ªè¯­å¥\n#pragma GCC diagnostic error &quot;-std=c++11&quot;\n\nä½†æ˜¯è¿™ä¸ªæ–¹æ³•å“ˆï¼Œæˆ‘å‘ç°åŠ äº†å®ƒä¹‹åä½¿ç”¨nullptrè¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œä½†æ˜¯autoå’Œtypeidéƒ½å¯ä»¥ä½¿ç”¨äº†\næ–¹æ³•2æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™åœ¨åŠ ä¸Š-std=c++11\ng++ -std=c++11 test.cpp -o test \n\nä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå®Œç¾\n1.autoå…³é”®å­—\n\nåœ¨C++11ä¸­ï¼Œautoä½œä¸ºä¸€ä¸ªæ–°çš„ç±»å‹æŒ‡ç¤ºç¬¦æ¥æŒ‡ç¤ºç¼–è¯‘å™¨ï¼Œautoå£°æ˜çš„å˜é‡å¿…é¡»ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æœŸæ¨å¯¼è€Œå¾—\n\nç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨å°±æ˜¯è‡ªåŠ¨ç»™å˜é‡è®¾ç½®ä¸€ä¸ªæ•°æ®ç±»å‹\n1.1åŸºæœ¬ä½¿ç”¨#include&lt;iostream&gt;#include&lt;typeinfo&gt;using namespace std;int TestAuto()&#123;     return 10;&#125;int main()&#123;    int a = 10;    auto b = a;    auto c = &#x27;a&#x27;;    auto d = TestAuto();    auto e = &quot;abc&quot;;    char str[20]=&quot;hello auto!&quot;;    auto f =str;        cout &lt;&lt; typeid(b).name() &lt;&lt; endl;    cout &lt;&lt; typeid(c).name() &lt;&lt; endl;    cout &lt;&lt; typeid(d).name() &lt;&lt; endl;    cout &lt;&lt; typeid(e).name() &lt;&lt; endl;//PKC    cout &lt;&lt; typeid(f).name() &lt;&lt; endl;//Pc    //VSä¸‹ä¼šæ‰“å°å®Œæ•´çš„ç±»å‹ï¼Œè¿”å›çš„æ˜¯å­—ç¬¦ä¸²    //linuxä¸‹åªä¼šæ‰“å°ç¼©å†™ï¼Œå…¶ä¸­PKcä»£è¡¨pointer(p) to Const(k) Char(c)    //è€Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰“å°çš„å°±æ˜¯Pcï¼Œpointer to Char    return 0;&#125;\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†typeid().name()æ¥æ‰“å°å˜é‡çš„ç±»å‹ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶&lt;typeinfo&gt;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æ­£ç¡®æ‰“å°å‡ºäº†æ¯ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ï¼Œautoè‡ªåŠ¨åˆ¤æ–­å¹¶ç»™è¿™äº›å˜é‡èµ‹äºˆäº†æ•°æ®ç±»å‹\n\nVSä¸‹typeid()å‡½æ•°ä¼šæ‰“å°å®Œæ•´æ•°æ®ç±»å‹\nLinuxä¸‹åªä¼šæ‰“å°ç¼©å†™\nå…¶ä¸­PKcä»£è¡¨pointer(p) to Const(k) Char(c)ï¼Œä¹Ÿå°±æ˜¯const char*\nPKä»£è¡¨constä¿®é¥°çš„æŒ‡é’ˆï¼›Pä»£è¡¨æŒ‡é’ˆï¼Œå¦‚Pcæ˜¯char*ã€Piæ˜¯int*\n\nauto e; //æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œä½¿ç”¨autoå®šä¹‰å˜é‡æ—¶å¿…é¡»å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–\n\nä½¿ç”¨autoå…³é”®å­—çš„æ—¶å€™ï¼Œå¿…é¡»è¦åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–å˜é‡ã€‚\nå…¶å®è¿™å¾ˆå¥½ç†è§£ï¼Œæœ¬æ¥autoå°±æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ ¹æ®åˆå§‹åŒ–å†…å®¹æ¥èµ‹äºˆæ•°æ®ç±»å‹çš„å…³é”®å­—ï¼Œå¦‚æœä½ ä¸ç»™æˆ‘åˆå§‹åŒ–å†…å®¹ï¼Œæˆ‘å“ªçŸ¥é“ä½ éœ€è¦èµ‹å€¼çš„ç±»å‹æ˜¯è°å‘¢ï¼Ÿ\n\nå› æ­¤autoå¹¶éæ˜¯ä¸€ç§â€œç±»å‹â€çš„å£°æ˜ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»å‹å£°æ˜æ—¶çš„â€œå ä½ç¬¦â€ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸä¼šå°†autoæ›¿æ¢ä¸ºå˜é‡å®é™…çš„ç±»å‹ã€‚\n\n1.2ä½¿ç”¨ç»†èŠ‚â‘ å’ŒæŒ‡é’ˆ&#x2F;å¼•ç”¨åŒæ—¶ä½¿ç”¨å¦‚å›¾ï¼Œautoåœ¨å¤„ç†æŒ‡é’ˆå˜é‡çš„æ—¶å€™ï¼Œå¸¦ä¸å¸¦*æ˜¯ä¸å—å½±å“çš„\n\nPiæ˜¯pointer to intï¼Œå³intçš„æŒ‡é’ˆ\n\n\nâ‘¡åœ¨åŒä¸€è¡Œå®šä¹‰å¤šä¸ªå˜é‡å¦‚æœä½¿ç”¨autoåœ¨åŒä¸€è¡Œå®šä¹‰å¤šä¸ªå˜é‡çš„æ—¶å€™ï¼Œå‰åå®šä¹‰çš„å˜é‡å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹çš„\nauto a=1,b=3;//å¯ä»¥auto a=1,b=2.4;//ä¸å¯ä»¥\n\n1.3autoä¸èƒ½ç”¨çš„åœ°æ–¹â‘ autoä¸èƒ½ä½œä¸ºæ•°ç»„çš„å£°æ˜æ¯”å¦‚ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼Œæ˜¯ä¸è¡Œçš„\nauto arr[]=&#123;1,2,3,4&#125;;\n\n\nâ‘¡autoä¸èƒ½ç”¨æ¥ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼void test(auto a);auto test(int a);\n\nå‡½æ•°çš„è¿”å›å€¼å’Œä¼ å‚éƒ½ä¸èƒ½æ˜¯auto\nå› ä¸ºè¿™æ ·ä¼šç»™ä½¿ç”¨è€…å¸¦æ¥æå¤§çš„è¯¯å¯¼ï¼Œæˆ‘è¿ä½ çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹éƒ½ä¸çŸ¥é“ï¼Œæˆ‘ç”¨å•¥æ¥æ¥æ”¶ï¼Ÿï¼Ÿå†ç”¨ä¸€æ¬¡autoå—ï¼Ÿï¼ŸğŸ˜‚\n\n\nä¸ºäº†é¿å…ä¸C++98ä¸­çš„autoå‘ç”Ÿæ··æ·†ï¼ŒC++11åªä¿ç•™äº†autoä½œä¸ºç±»å‹æŒ‡ç¤ºç¬¦çš„ç”¨æ³•\n\nå…¶å®autoæœ€å¤§çš„ä½œç”¨è¿˜æ˜¯åœ¨C++11æä¾›çš„æ–°å¼å¾ªç¯ä¸­ä½¿ç”¨ğŸ‘‡\n2.èŒƒå›´forå¾ªç¯2.1 åŸºæœ¬ç”¨æ³•åœ¨ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³éå†ä¸€ä¸ªæ•°ç»„ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ä¸‹é¢çš„æ–¹å¼\nè¿™æ˜¯æœ€ç»å…¸çš„forå¾ªç¯è¯­å¥ï¼Œæƒ³å¿…ä½ è‚¯å®šä¸é™Œç”Ÿ\n\nä½†è¿™æ–¹æ³•å¤ªéº»çƒ¦äº†ï¼æ¯æ¬¡éƒ½è¦å¼„ä¸€ä¸ªsizeofæ¥è®¡ç®—é•¿åº¦ï¼Œè¿™ä¸çº¯çº¯åç‰¢å—\n\näºæ˜¯å“ˆï¼ŒC++11å°±åˆ©ç”¨autoå…³é”®å­—æä¾›äº†å¦å¤–ä¸€ä¸ªéå†æ•°ç»„çš„æ–¹æ³•\nfor(auto e : arr)       cout &lt;&lt; e &lt;&lt; &quot; &quot;; \n\næ²¡é”™ï¼å°±æ˜¯è¿™ä¹ˆç®€å•çš„å‚æ•°è®¾ç½®ï¼Œå°±èƒ½è®©autoè‡ªå·±æ‰“å°å‡ºæ•°ç»„å†…çš„å€¼ï¼\nè¿™ä¹Ÿå¤ªçœäº‹äº†ğŸ‘\n\nè¿™é‡Œæ³¨æ„å“ˆï¼Œå¦‚æœåœ¨foré‡Œé¢è®¾ç½®çš„eæ²¡æœ‰å¸¦&amp;å¼•ç”¨ï¼Œå…¶å¯¹æ•°æ®å†…å®¹çš„æ›´æ”¹æ˜¯ä¸ä¼šæ”¹å˜æºæ•°ç»„çš„ã€‚ä½ å¯ä»¥ç†è§£ä¸ºè¿™é‡Œæ˜¯ä¸´æ—¶ä¼ äº†å‚æ•°ç»™äº†eï¼Œç„¶åå†æ‰“å°eçš„å€¼\n\nå¦‚æœæƒ³ä¿®æ”¹æ•°ç»„çš„å†…å®¹ï¼Œç»™eå¸¦ä¸Šå¼•ç”¨å³å¯\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­ä»€ä¹ˆæ—¶å€™æ•°ç»„æ‰“å°å®Œæ¯•ï¼Œæ‰€ä»¥ä½ æƒ³æ‰“å°ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„\n\næˆ‘æ˜¯ç”¨çš„è¿™ä¸ªvimé…ç½®å¥½åƒæ›´åŠ æ™ºèƒ½ï¼Œå› ä¸ºä»–æŠŠæ•°ç»„ä¸­ç©ºç€çš„éƒ¨åˆ†ä¹Ÿâ€œæ‰“å°å‡ºæ¥äº†â€ã€‚å®é™…ä¸Šç¼–è¯‘å™¨å¹¶ä¸ä¼šæ‰“å°ç©ºå‡ºæ¥çš„å€¼\n\nè¿™ç‚¹å¯ä»¥åœ¨forå¾ªç¯ç»“æŸåå†æ‰“å°EOFæ¥éªŒè¯\n\nä¸æ™®é€šå¾ªç¯ç±»ä¼¼ï¼Œå¯ä»¥ç”¨continueæ¥ç»“æŸèŒƒå›´forå¾ªç¯ï¼Œä¹Ÿå¯ä»¥ç”¨breakæ¥è·³å‡ºæ•´ä¸ªå¾ªç¯ã€‚\nå¦å¤–ï¼Œç›´æ¥ä½¿ç”¨å˜é‡ç±»å‹æ¥æ“ä½œèŒƒå›´forä¹Ÿæ˜¯å¯ä»¥çš„\n\n2.2 ä½¿ç”¨æ¡ä»¶ä½¿ç”¨èŒƒå›´forçš„æ—¶å€™ï¼Œå¿…é¡»ç»™å®šä¸€ä¸ªå‡†ç¡®çš„èŒƒå›´\n\nåœ¨éå†æ•°ç»„çš„æ—¶å€™ï¼Œè¿™ä¸ªèŒƒå›´å°±æ˜¯æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾\nå¯¹äºç±»è€Œè¨€ï¼Œåº”è¯¥æä¾›beginå’Œendçš„ æ–¹æ³•ï¼Œbeginå’Œendå°±æ˜¯forå¾ªç¯è¿­ä»£çš„èŒƒå›´\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¿…é¡»ç»™å®šä¸€ä¸ªæ•°ç»„åï¼Œè€Œä¸èƒ½ç»™å®šä¸€ä¸ªæŒ‡é’ˆ\nvoid TestFor4(int*ptr)&#123;\tfor(auto e : ptr)\t\tcout&lt;&lt;e&lt;&lt;&quot; &quot;;&#125;\n\næ¯”å¦‚è¿™ç§ä½¿ç”¨æ–¹æ³•å°±æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ä¸ªæ•°ç»„åˆ°åº•ä»€ä¹ˆæ—¶å€™ç»“æŸ\n\nå³ä¾¿æŠŠä¼ å‚æ”¹æˆæ•°ç»„çš„å½¢å¼ä¹Ÿæ˜¯ä¸è¡Œçš„\n\nè‡³äºä¸ºä»€ä¹ˆèŒƒå›´foré‡Œé¢ç”¨çš„æ˜¯å†’å·å˜›ï¼Œå¥½é—®é¢˜ï¼Œæˆ‘ä¸çŸ¥é“\n\n2.3 èŒƒå›´forä¼šæ‹·è´æ•°æ®åŒæ—¶åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘è¿˜å‘ç°åŸæ¥STLåº“å®¹å™¨é‡Œé¢çš„è¿­ä»£å™¨éå†çš„æ—¶å€™ï¼Œæ˜¯ä¼šæŠŠè‡ªå®šä¹‰ç±»å‹æ‹·è´æ„é€ ä¸€ä»½çš„\n\nå®é™…ä¸Šï¼Œautoåœ¨è¿›è¡ŒèŒƒå›´forçš„æ—¶å€™ï¼Œæ˜¯ä¼šæ‹·è´ä¸€ä»½æ•°æ®ç»™eçš„ã€‚\nç”¨å¼•ç”¨é¿å…æ‹·è´çš„ä»£ä»·æƒ³è®©ä»–ä¸è¿›è¡Œè¿™ç§æ‹·è´ï¼Œå°±éœ€è¦ç»™auto&amp;åŠ ä¸Šå¼•ç”¨æ‰å¯ä»¥\n\nä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼\n\n3.nullptrå…³é”®å­—nullptræ˜¯C++11å¼•å…¥çš„æ–°å…³é”®å­—\n3.1NULLåœ¨Cè¯­è¨€ä¸­ï¼ŒNULLä»£è¡¨ç©ºæŒ‡é’ˆ\nint*p1=NULL;\n\nNULLå®é™…æ˜¯ä¸€ä¸ªå®ï¼Œåœ¨cè¯­è¨€å¤´æ–‡ä»¶stddef.hä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š\n#ifndef NULL#ifdef __cplusplus#define NULL 0#else#define NULL ((void *)0)#endif#endif\n\nå¯ä»¥çœ‹åˆ°ï¼ŒNULLå¯èƒ½è¢«å®šä¹‰ä¸ºå­—é¢å¸¸é‡0ï¼Œæˆ–è€…è¢«å®šä¹‰ä¸ºæ— ç±»å‹æŒ‡é’ˆ(void*)çš„å¸¸é‡\n3.2é—®é¢˜å¼•å‡ºé‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå¦‚æœæˆ‘åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ äº†NULLï¼Œç¼–è¯‘å™¨ç©¶ç«Ÿä¼šæŠŠå®ƒè¯†åˆ«æˆintç±»å‹ï¼Œè¿˜æ˜¯è¯†åˆ«æˆæŒ‡é’ˆç±»å‹å‘¢ï¼Ÿ\n\næ¯”å¦‚åœ¨ä¸Šé¢çš„å‡½æ•°é‡è½½ä»£ç ä¸­ï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“è¦è°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°äº†ï¼Œé™¤éä½ ç»™NULLæ¥ä¸€ä¸ª(int*)å¼ºåˆ¶è½¬æ¢ä¸€ä¸‹\nç¼–è¯‘æ–‡ä»¶ä¼šçœ‹åˆ°å¦‚ä¸‹æŠ¥é”™\ntest.cpp|17 col 5 error| call to &#x27;f&#x27; is ambiguous\n\nå°ç å†œè‹±è¯­è¯¾å ‚å¼€è¯¾å•¦ï¼ä»Šå¤©å­¦ä¹ çš„æ˜¯ambiguous\n\n\næ‰€ä»¥è¯´ï¼C++æ€¥éœ€å¦å¤–ä¸€ä¸ªä¸œè¥¿çš„åŠ å…¥æ¥é¿å…NULLçš„è¿™ç§æ¨¡ç³Šä¼ å‚æƒ…å†µ\n3.3ä½¿ç”¨nullptrå…¶ä»–éœ€è¦ä»‹ç»çš„å°±æ— å•¦ï¼Œä½ åªè¦çŸ¥é“ï¼Œnullpträ¸å†æ˜¯ä¸€ä¸ªä»£è¡¨0çš„å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“é—¨çš„å…³é”®å­—ï¼Œä»£æŒ‡ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œå°±OKå•¦ï¼\n\n\næœ€åæ˜¯å‡ ç‚¹æ³¨æ„ï¼š\n\nåœ¨ä½¿ç”¨nullptrè¡¨ç¤ºæŒ‡é’ˆç©ºå€¼æ—¶ï¼Œä¸éœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯C++11çš„å…³é”®å­— \nåœ¨C++11ä¸­ï¼Œsizeof(nullptr)=sizeof((void*)0)\nä¸ºäº†æé«˜ä»£ç çš„ç¨³å®šæ€§ï¼Œåç»­å†™C++ä»£ç çš„æ—¶å€™ä¸€å¾‹ç”¨nullptrï¼Œä¸å†ä½¿ç”¨NULL\n\n\nç»“è¯­å¥½å•¦ï¼Œæœ¬ç¯‡C++çš„ç¬”è®°åˆ°è¿™é‡Œå°±ç»“æŸå–½\næœ‰ä»€ä¹ˆé—®é¢˜å¤§å®¶å¯ä»¥åœ¨è¯„è®ºæå‡ºå“ˆ\n","categories":["é‡è§C++"],"tags":["Linux","C++"]},{"title":"ã€C++ã€‘ç±»å’Œå¯¹è±¡1ï¼šåˆè¯†ç±»+thisæŒ‡é’ˆ","url":"/2022/05/19/note_cpp/5%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A11_%E5%88%9D%E8%AF%86%E7%B1%BB/","content":"ä¸çŸ¥ä½ åœ¨å­¦ä¹ Cè¯­è¨€å’ŒC++çš„é€‚åˆï¼Œæ›¾å¦å¬è¿‡è€å¸ˆè¿™ä¹ˆè®²è¿°è¿™ä¸¤ä¸ªè¯­è¨€ä¹‹é—´çš„åŒºåˆ«ï¼š\n\nCè¯­è¨€æ˜¯é¢å‘è¿‡ç¨‹çš„\nC++æ˜¯é¢å‘å¯¹è±¡çš„\n\n\n\næˆ‘ä¸€ç›´ä¸å¤ªç†è§£è¿™äºŒè€…ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨æŸ¥é˜…äº†ä¸€äº›åšå®¢åï¼Œå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£é‡ŠğŸ‘‰ã€ä¼ é€é—¨ã€‘\n\nç”¨é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å†™å‡ºæ¥çš„ç¨‹åºæ˜¯ä¸€ä»½è›‹ç‚’é¥­ï¼Œè€Œç”¨é¢å‘å¯¹è±¡å†™å‡ºæ¥çš„ç¨‹åºæ˜¯ä¸€ä»½ç›–æµ‡é¥­ã€‚æ‰€è°“ç›–æµ‡é¥­ï¼ŒåŒ—äº¬å«ç›–é¥­ï¼Œä¸œåŒ—å«çƒ©é¥­ï¼Œå¹¿ä¸œå«ç¢Ÿå¤´é¥­ï¼Œå°±æ˜¯åœ¨ä¸€ç¢—ç™½ç±³é¥­ä¸Šé¢æµ‡ä¸Šä¸€ä»½ç›–èœï¼Œä½ å–œæ¬¢ä»€ä¹ˆèœï¼Œä½ å°±æµ‡ä¸Šä»€ä¹ˆèœã€‚\n\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬ä»ç±»å’Œå¯¹è±¡å¼€å§‹ï¼Œæ¸æ¸äº†è§£ä»€ä¹ˆæ˜¯â€œé¢å‘å¯¹è±¡ç¼–ç¨‹â€\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\n1.ç±»çš„å¼•å…¥1.1ç»“æ„ä½“åœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹ï¼šç»“æ„ä½“ã€‚åœ¨C++ä¸­å¯¹ç»“æ„ä½“çš„è¯­æ³•è¿›è¡Œäº†æ‰©å……ï¼Œç»“æ„ä½“å†…éƒ¨ä¸ä»…èƒ½å®šä¹‰å˜é‡ï¼Œè¿˜èƒ½å®šä¹‰å‡½æ•°\nstruct Student&#123;\tvoid Print()    &#123;\t\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;\t&#125;\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\n1.2classä¸ºäº†å’ŒCè¯­è¨€é‡Œé¢çš„ç»“æ„ä½“ä½œä¸ºåŒºåˆ†ï¼Œæˆ‘ä»¬ä¸å†ç”¨structæ¥æŒ‡ä»£è¿™ç§åŒ…å«å‡½æ•°çš„è‡ªå®šä¹‰ç±»å‹ï¼Œè€Œæ˜¯ä½¿ç”¨classä½œä¸ºå®ƒçš„åå­—ï¼Œç§°ä¹‹ä¸ºç±»\nclass className&#123; //ç±»ä½“ï¼šç”±æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ç»„æˆ&#125;; //ä¸€å®šè¦æ³¨æ„åé¢çš„åˆ†å·\n\nclassä¸ºå®šä¹‰ç±»çš„å…³é”®å­—ï¼ŒClassNameä¸ºç±»çš„åå­—ï¼Œ&#123; &#125;ä¸­ä¸ºç±»çš„ä¸»ä½“ï¼Œæ³¨æ„ç±»å®šä¹‰ç»“æŸæ—¶åé¢åˆ†å·ï¼ˆè¿™ä¸€ç‚¹å’Œç»“æ„ä½“ç›¸åŒï¼‰\nç±»ä¸­çš„å…ƒç´ ç§°ä¸ºç±»çš„æˆå‘˜ï¼š\n\nç±»ä¸­çš„æ•°æ®ç§°ä¸ºç±»çš„å±æ€§æˆ–è€…æˆå‘˜å˜é‡\nç±»ä¸­çš„å‡½æ•°ç§°ä¸ºç±»çš„æ–¹æ³•æˆ–è€…æˆå‘˜å‡½æ•°\n\n2.ç±»æˆå‘˜çš„å®šä¹‰ç±»å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œç±»çš„æ‰€æœ‰æˆå‘˜éƒ½åœ¨ç±»çš„ä½œç”¨åŸŸä¸­ã€‚åœ¨ç±»ä½“å¤–å®šä¹‰æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨ ::ä½œç”¨åŸŸè§£æç¬¦æŒ‡æ˜æˆå‘˜å±äºå“ªä¸ªç±»åŸŸã€‚\n2.1å‡½æ•°å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å’Œæ™®é€šçš„å‡½æ•°ä¸€æ ·ï¼Œç±»åŒæ ·æ”¯æŒå£°æ˜å’Œå®šä¹‰åˆ†ç¦»ã€‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰åˆ†ç¦»å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰\n\næˆå‘˜å‡½æ•°åœ¨ç±»é‡Œé¢å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤å¤„ç†ä¸ºå†…è”å‡½æ•°\n\nclass Student&#123;\tvoid Print()    &#123;\t\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;\t&#125;\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\nå¦‚æœéœ€è¦åœ¨.hä¸­å†™å…¥ç±»çš„å®šä¹‰ï¼Œç±»å¤–é¢çš„.cppä¸­ç¼–å†™ç±»é‡Œé¢çš„å‡½æ•°ï¼Œå°±éœ€è¦ç”¨åˆ°ç±»ä¼¼äºå‘½åç©ºé—´çš„ä½¿ç”¨æ–¹æ³•::\nclass Student&#123;\tvoid Print();//å£°æ˜å‡½æ•°\t\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\nåœ¨å¦å¤–çš„æºæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°\n#include &quot;Student.h&quot;void Student::Print()&#123;\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;&#125;\n\nå½“æˆ‘ä»¬ç¼–å†™å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„æ–¹å¼æ¥ç¼–å†™æºç ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿ä»–äººå¿«é€ŸæŸ¥é˜…æˆ‘ä»¬çš„å¤´æ–‡ä»¶ï¼Œç†è§£ä»£ç çš„â€œå¤§çº²â€\n\nè¿™æ ·çœ‹èµ·æ¥å¥½åƒå’Œä»¥å‰çš„æ–¹å¼æ²¡å•¥åŒºåˆ«ã€‚ä½†å½“æˆ‘ä»¬å¼•å…¥è®¿é—®æƒé™çš„æ¦‚å¿µåï¼Œä¸€åˆ‡éƒ½å˜å•¦ï¼\n2.2è®¿é—®é™å®šç¬¦classçš„é»˜è®¤è®¿é—®æƒé™æ˜¯ç§æœ‰ï¼›structé»˜è®¤ä¸ºå…¬æœ‰\n\nä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯è®¿é—®æƒé™ï¼Ÿé‚£å°±ç»§ç»­å¾€ä¸‹çœ‹ğŸ‘‡\n\næˆ‘ä»¬å¯ä»¥ç”¨publicå’Œprivateè¿™ä¸¤ä¸ªè®¿é—®é™å®šç¬¦æ¥è¡¨æ˜æŸä¸€ä¸ªå…·ä½“ç±»å‹çš„å…±æœ‰è¿˜æ˜¯ç§æœ‰ã€‚å®ƒä»¬çš„æœ€å¤§åŒºåˆ«å°±æ˜¯åœ¨è¿™ä¸ªç±»çš„å¤–éƒ¨èƒ½ä¸èƒ½è®¿é—®\n\n\npublicæˆå‘˜å¯ä»¥åœ¨ç±»å¤–é¢ç›´æ¥ä½¿ç”¨\nprotectedå’Œprivateä¿®é¥°çš„æˆå‘˜åªèƒ½åœ¨ç±»é‡Œé¢è®¿é—®\nè®¿é—®æƒé™çš„ä½œç”¨åŸŸæ˜¯ä»è¯¥è®¿é—®é™å®šç¬¦å‡ºç°ï¼Œåˆ°ä¸‹ä¸€ä¸ªè®¿é—®é™å®šç¬¦å‡ºç°ä¸ºæ­¢\nè®¿é—®é™å®šç¬¦æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¤„ç†çš„ï¼Œå¹¶ä¸å½±å“æ•°æ®åœ¨å†…å­˜ä¸Šçš„å­˜æ”¾\n\nåœ¨å‰æœŸå­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºprotectedå’Œprivateæ˜¯ç›¸åŒä½œç”¨çš„\nclass Student&#123;public:    //å‡½æ•°åœ¨ç±»é‡Œé¢å®šä¹‰ï¼Œç¼–è¯‘å™¨é»˜è®¤ä¸ºå†…è”å‡½æ•°    void Print()    &#123;        cout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;    &#125;    void Init(const char * name,const char*sex, int age,const char* phone)    &#123;        strcpy(_name,name);        strcpy(_sex,sex);        _age=age;        strcpy(_phone,phone);    &#125;    //å‡½æ•°åœ¨ç±»é‡Œé¢å£°æ˜    void Delet();private:    //è¿™ä¸ªæ˜¯å¯¹å˜é‡çš„å£°æ˜    //å˜é‡çš„å£°æ˜ï¼šæ²¡æœ‰å¼€è¾Ÿç©ºé—´    //å˜é‡çš„å®šä¹‰ï¼šå¼€è¾Ÿäº†ç©ºé—´æ¥å­˜æ”¾å†…å®¹    char _name[20];    char _sex[8];    int _age;    char _phone[20];    //åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å®šä¹‰&#125;;\n\n\næ•°æ®å’Œæ–¹æ³•åˆ†è£…åˆ°ä¸€ä¸ªç±»é‡Œé¢\næƒ³ç»™ä½ è‡ªç”¨è®¿é—®çš„ï¼ˆå¦‚å‡½æ•°æ¥å£ï¼‰è®¾ç½®ä¸ºå…±æœ‰\nä¸æƒ³ç»™ä½ è®¿é—®çš„ï¼ˆå¦‚é€šè®¯å½•æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯ç±»å‹ï¼‰è®¾ç½®ä¸ºç§æœ‰\n\nè¿™æ ·å¯ä»¥åšåˆ°ï¼Œå½“å‡½æ•°å®šä¹‰ä¿®æ”¹ä¹‹åï¼Œåªè¦ä¸ä¿®æ”¹å‡½æ•°å£°æ˜ï¼Œå°±ä¸éœ€è¦ä¿®æ”¹mainå‡½æ•°ä¸­å‡½æ•°çš„è°ƒç”¨ï¼è¿™å«åšï¼šé«˜å†…èšï¼Œä½è€¦åˆ\n2.3å°è£…ä¸ºä»€ä¹ˆä¼šæœ‰æƒé™çš„å‡ºç°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»†æƒ³ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š\n\nå‡è®¾æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªæ•°ç»„æ ˆçš„ä»£ç ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªtopç”¨æ¥æ ‡æ˜æ ˆé¡¶çš„å…ƒç´ ä½ç½®ã€‚ä¸€èˆ¬å¯ä»¥æŠŠtopå®šä¹‰ä¸º0æˆ–è€…1ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•çš„å‡½æ•°ä½¿ç”¨æ˜¯ä¸åŒçš„ï¼å¦‚æœæœ‰é‚£ä¸ªé“æ†¨æ†¨è·‘è¿‡æ¥ï¼Œéè¦æŠŠé‚£ä¸ªtopçš„å®šä¹‰ç»™æ”¹æ‰ï¼Œé‚£æ•´ä¸ªä»£ç å°±åºŸæ‰ä¸èƒ½ç”¨è¾£ï¼\nè®¾ç«‹ç§æœ‰å’Œå…¬æœ‰çš„åˆè¡·ï¼Œå°±æ˜¯ä¸ºäº†é¿å…è¿™ç§æƒ…å†µã€‚å¼€æ”¾ä¸€äº›å…±æœ‰å‡½æ•°ä¾›ç±»å¤–é¢è®¿é—®ï¼Œè¿™æ ·å¯¹æ•´ä¸ªä»£ç çš„è®¿é—®ä¼šå˜å¾—æ˜“äºç®¡ç†ã€‚å½“æˆ‘ä»¬è‡ªå·±ä¿®æ”¹ç±»é‡Œé¢çš„ä»£ç æ—¶ï¼Œåªéœ€è¦åšå¥½å¤„ç†ï¼Œå°±ä¸ä¼šå½±å“ç±»å¤–é¢çš„å‡½æ•°è°ƒç”¨ï¼ˆå¦åˆ™å°±æ˜¯ç›´æ¥æ¨ç¿»é‡å†™äº†ï¼‰\n\nè¿™ä¾¿æ˜¯æˆ‘ä»¬å¸¸å¸¸æåˆ°çš„å°è£…ï¼šå°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•è¿›è¡Œæœ‰æœºç»“åˆï¼Œéšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£æ¥å’Œå¯¹è±¡è¿›è¡Œäº¤äº’ã€‚\n3.ç±»çš„å®ä¾‹åŒ–ç”¨ç±»ç±»å‹åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œç§°ä¸ºç±»çš„å®ä¾‹åŒ–\n\nç±»åªæ˜¯ä¸€ä¸ªæ¨¡å‹ä¸€æ ·çš„ä¸œè¥¿ï¼Œé™å®šäº†ç±»æœ‰å“ªäº›æˆå‘˜ï¼Œå®šä¹‰å‡ºä¸€ä¸ªç±»å¹¶æ²¡æœ‰åˆ†é…å®é™…çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨å®ƒ\nä¸€ä¸ªç±»å¯ä»¥å®ä¾‹åŒ–å‡ºå¤šä¸ªå¯¹è±¡ï¼Œå®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ å ç”¨å®é™…çš„ç‰©ç†ç©ºé—´ï¼Œå­˜å‚¨ç±»æˆå‘˜å˜é‡\n\nç±»å°±å¥½æ¯”ä¸€ä¸ªæ¯›å¯æˆ¿ï¼Œç°åœ¨æ¯›å¯æˆ¿å»ºå¥½äº†ï¼Œè¦æƒ³å®ƒå˜å¾—ç²¾è‡´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨mainä¸­è°ƒç”¨è¿™ä¸ªç±»ï¼Œä¸ç„¶æ¯›å¯æˆ¿å°±è¦å˜æˆçƒ‚å°¾æ¥¼äº†\nStudent p1;p1.Init(&quot;ç‰›çˆ·çˆ·&quot;,&quot;ç”·&quot;,58,&quot;13251341680&quot;);p1.Print(); \n\n4.è®¡ç®—ç±»çš„å¤§å°ä¸€èˆ¬æœ‰4ç§ç±»ï¼šåŒ…å«å‡½æ•°å’Œå˜é‡çš„ã€åªåŒ…å«å‡½æ•°çš„ã€åªåŒ…å«æˆå‘˜å˜é‡çš„ã€ç©ºç±»\n\nè®©æˆ‘ä»¬æ¥åº·åº·å¦‚ä½•è®¡ç®—è¿™äº›ç±»çš„å¤§å°ï¼Œè§£æè§æ³¨é‡Šå“¦ï¼\nå…¶å®åªéœ€è¦è®°ä½ï¼Œç©ºç±»å’Œåªæœ‰å‡½æ•°çš„ç±»ä¼šæœ‰1ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚è®¡ç®—ç±»çš„ç©ºé—´çš„æ—¶å€™ä¸ä¼šè®¡ç®—å‡½æ•°å¤§å°ï¼Œæˆå‘˜å˜é‡çš„å¤§å°è®¡ç®—éµå¾ªç»“æ„ä½“å†…å­˜å¯¹é½çš„è®¡ç®—æ–¹æ³•å°±è¡Œäº†ï¼\n#include&lt;iostream&gt;using namespace std;class A1&#123;public:    void func1()    &#123;        int ret=3;        return ;    &#125;&#125;;class A2&#123;&#125;;class A3&#123;public:    char _a;&#125;;\n\n\n#includeÂ &lt;iostream&gt;usingÂ namespaceÂ std; classÂ A&#123;&#125;; intÂ main(void)&#123;Â Â Â Â coutÂ &lt;&lt;Â sizeof(A)Â &lt;&lt;Â endl;//ç©ºç±»æ˜¯1Â Â Â Â returnÂ 0;&#125;\n\n\n\n5.thisæŒ‡é’ˆ5.1ç‰¹ç‚¹å½“ä½ ç”¨åŒæ ·çš„å›¾çº¸å»ºäº†å¾ˆå¤šä¸ªå±‹å­åï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡åº”è¯¥å¦‚ä½•åŒºåˆ†å®ƒä»¬å‘¢ï¼Ÿ\nC++åœ¨è®¾è®¡è¿™éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ªthisæŒ‡é’ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nC++ç¼–è¯‘å™¨ç»™æ¯ä¸ªâ€œéé™æ€çš„æˆå‘˜å‡½æ•°â€œå¢åŠ äº†ä¸€ä¸ªéšè—çš„æŒ‡é’ˆå‚ æ•°ï¼Œè®©è¯¥æŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡(å‡½æ•°è¿è¡Œæ—¶è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡)ï¼Œåœ¨å‡½æ•°ä½“ä¸­æ‰€æœ‰æˆå‘˜å˜é‡çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡è¯¥æŒ‡é’ˆå»è®¿é—®ã€‚åªä¸è¿‡æ‰€æœ‰çš„æ“ä½œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œå³ç”¨æˆ·ä¸éœ€è¦æ¥ä¼ é€’ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆã€‚\n\n\nthisæŒ‡é’ˆçš„ç±»å‹ï¼šç±»å* const \nåªèƒ½åœ¨â€œæˆå‘˜å‡½æ•°â€çš„å†…éƒ¨ä½¿ç”¨ \nthisæŒ‡é’ˆæœ¬è´¨ä¸Šå…¶å®æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„å½¢å‚ï¼Œæ˜¯å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œå°†å¯¹è±¡åœ°å€ä½œä¸ºå®å‚ä¼ é€’ç»™this å½¢å‚ã€‚æ‰€ä»¥å¯¹è±¡ä¸­ä¸å­˜å‚¨thisæŒ‡é’ˆã€‚ \nthisæŒ‡é’ˆæ˜¯æˆå‘˜å‡½æ•°ç¬¬ä¸€ä¸ªéšå«çš„æŒ‡é’ˆå½¢å‚ï¼Œä¸€èˆ¬æƒ…å†µç”±ç¼–è¯‘å™¨é€šè¿‡ecxå¯„å­˜å™¨è‡ªåŠ¨ä¼ é€’ï¼Œä¸éœ€è¦ç”¨æˆ·ä¼ é€’\n\n5.2æ˜¾å¼ä½¿ç”¨thiså°±ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸¾ä¾‹\nvoid Print()&#123;\tcout&lt;&lt;_name&lt;&lt;endl;\tcout&lt;&lt;_sex &lt;&lt;endl;&#125;\n\nå®é™…ä¸Šï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç†\nvoid Print(Student*const this)&#123;\tcout&lt;&lt;this-&gt;_name&lt;&lt;endl;\tcout&lt;&lt;this-&gt;_sex &lt;&lt;endl;&#125;\n\nå› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å®Œæ•´çš„åŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç±»\n\nè¿›ä¸€æ­¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£thisæŒ‡é’ˆ\nbool operator==(const Date&amp; d)&#123;       return _year == d._year           &amp;&amp; _month== d._month           &amp;&amp; _day == d._day;&#125;\n\nè¿™æ˜¯ä¸€ä¸ªæ—¥æœŸçš„æ¯”è¾ƒå‡½æ•°ï¼Œæ˜¯æ“ä½œç¬¦é‡è½½ï¼ˆåé¢ä¼šè®²åˆ°ï¼‰\nä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªDateç±»å‹çš„å¼•ç”¨ï¼Œè¿™æ˜¯åŒºåˆ«äºthisçš„å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡\nå¦‚æœæ²¡æœ‰thisï¼Œé‚£å°±å¾ˆéš¾åŒºåˆ†ä¸¤ä¸ªå˜é‡çš„_yearï¼Œäºæ˜¯ç¼–è¯‘å™¨ä¼šæŠŠå®ƒä¼˜åŒ–æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¸ä¼šå­˜åœ¨æ— æ³•åŒºåˆ†çš„é—®é¢˜äº†\nbool operator==(Date*const this,const Date&amp; d)&#123;       return this-&gt;_year == d._year           &amp;&amp; this-&gt;_month== d._month           &amp;&amp; this-&gt;_day == d._day;&#125;\n\n5.3ç©ºæŒ‡é’ˆé—®é¢˜int main()&#123;    int x=10;    //åœ¨ç¨‹åºä¸­ï¼Œè®¿é—®NULLä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è§£å¼•ç”¨Nullä¼šæŠ¥é”™    int*a=NULL;    int*b=&amp;x;    //a=x;//err    *b=20;    return 0;&#125;\n\n#include&lt;iostream&gt;using namespace std;class ta&#123;public:    void Print()    &#123;        cout&lt;&lt;&quot;print ta&quot;&lt;&lt;endl;        //cout&lt;&lt;_a&lt;&lt;endl;    &#125;private:    int _a;&#125;;int main()&#123;    ta* p=nullptr;    p-&gt;Print();   //å¯ä»¥å»è®¿é—®ç©ºæŒ‡é’ˆçš„å‡½æ•°   //å› ä¸ºå‡½æ•°åªæ˜¯å»è°ƒç”¨äº†ç±»é‡Œé¢çš„Printå‡½æ•°   //åŒæ—¶ä¼ äº†ä¸€ä¸ªpçš„thisæŒ‡é’ˆï¼ˆç©ºæŒ‡é’ˆä¼ å‚æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼‰   //ä½†æ˜¯å¦‚æœä½ å»è®¿é—®pé‡Œé¢_aå˜é‡ï¼Œå°±ä¼šæŠ¥è¿è¡Œé”™è¯¯    return 0;&#125;\n\n6.ç±»ä¸­æˆå‘˜å‡½æ•°çš„å¤„ç†é™¤äº†thisæŒ‡é’ˆä¹‹å¤–ï¼Œç¼–è¯‘å™¨åœ¨é“¾æ¥å‡½æ•°åçš„æ—¶å€™ï¼Œä¹Ÿåšäº†ç›¸åº”çš„å¤„ç†ã€‚åœ¨Linuxé‡Œé¢æŸ¥çœ‹ä¸‹é¢è¿™ä¸²ä»£ç çš„æ±‡ç¼–ä»£ç \n#include&lt;iostream&gt;class Test&#123;public:    void func1(const int* a1,int* k,const int*a2,char arr)    &#123;        *a1+*a2;        func2(a1,k,a2,arr);    &#125;    private:    void func2(const int* a1,int* k,const int*a2,char arr)    &#123;        *a1+*a2;    &#125;&#125;;int main()&#123;    Test t;    int arr1[10];    int arr2[20];    int a=10;    t.func1(arr1,&amp;a,arr2,&#x27;a&#x27;);        return 0;&#125;\n\nå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªç±»çš„æˆå‘˜å‡½æ•°çš„åœ°å€å’Œå‡½æ•°å\n\næ–¹æ³•å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢ğŸ‘‰ã€æœ«å½±é—¨ã€‘\n\n00000000004006da &lt;_ZN4Test5func1EPKiPiS1_c&gt;:000000000040071a &lt;_ZN4Test5func2EPKiPiS1_c&gt;:\n\nå¯ä»¥å‘ç°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„åœ°å€ä¸åŒï¼Œä½†å‡½æ•°åä¸­å¹¶æ²¡æœ‰åŒ…å«å®ƒçš„å…¬æœ‰ã€ç§æœ‰ä¿¡æ¯ã€‚è¿™ä¹Ÿèƒ½è¯æ˜2.2ä¸­å†™é“çš„â€œè®¿é—®é™å®šç¬¦æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¤„ç†çš„ï¼Œå¹¶ä¸å½±å“æ•°æ®åœ¨å†…å­˜ä¸Šçš„å­˜æ”¾â€\n\nä¸‹é¢æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆä¸åœ¨ç±»é‡Œé¢ï¼‰çš„å‡½æ•°å\n\nè§‚å¯Ÿç±»é‡Œé¢çš„å‡½æ•°åï¼Œå¯ä»¥çœ‹åˆ°æ¯”èµ·æ™®é€šå‡½æ•°ï¼Œå®ƒè¿˜åŒ…å«äº†ç±»åï¼Œæ¥æ ‡æ˜è‡ªå·±æ˜¯è¢«å°è£…åœ¨æŸä¸ªç±»é‡Œé¢çš„ã€‚åŒæ—¶å‰ç¼€ä¹Ÿä»_Zå˜ä¸ºäº†_ZH\n\n\nè¿™é‡ŒS1_çš„å«ä¹‰æ˜¯æˆ‘å¤šæ¬¡ä¼ ç›¸åŒç±»å‹å‚æ•°ï¼ŒæŸ¥çœ‹æ±‡ç¼–ä»£ç æµ‹è¯•å‡ºæ¥çš„\n\nå½“æˆ‘æŠŠç›¸åŒä¼ å‚çš„å‡½æ•°æ”¾åœ¨ç±»å¤–é¢ï¼Œé‡æ–°æŸ¥çœ‹æ±‡ç¼–ä»£ç \n\n000000000040064d &lt;_Z5func3PKiPiS0_c&gt;:\n\nå¯ä»¥çœ‹åˆ°å®ƒå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚å‰ç¼€å˜ä¸ºäº†_Zï¼Œå‡½æ•°ååé¢çš„Eä¸è§äº†ï¼ŒS1_å˜æˆäº†S0_\nè™½ç„¶æˆ‘ç°åœ¨è¿˜ä¸çŸ¥é“å‰ç¼€_Zå’Œ_ZHã€å‡½æ•°ååé¢é‚£ä¸ªEåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹çš„å‡ºï¼Œè¿™æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ä¸­ä¸ºäº†åŒºåˆ†ç±»ä¸­å‡½æ•°å’Œç±»å¤–å‡½æ•°åšçš„ä¼˜åŒ–\n\nç»“è¯­æœ¬ç¯‡åšå®¢æ˜¯ç±»å’Œå¯¹è±¡çš„ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œä¸çŸ¥èƒ½å¦å¸®åˆ°ä½ å‘¢\n\n","categories":["é‡è§C++"],"tags":["Linux","C++","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘ç±»å’Œå¯¹è±¡2ï¼šé»˜è®¤æˆå‘˜å‡½æ•°+æ“ä½œç¬¦é‡è½½","url":"/2022/05/20/note_cpp/6%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A12_%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0/","content":"æœ¬ç¯‡æ˜¯ç±»å’Œå¯¹è±¡çš„ç¬¬äºŒç«™ğŸšŒ\nä¸»è¦è®²è¿°ç±»çš„å‡ ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°ï¼Œä»¥åŠæ“ä½œç¬¦é‡è½½\næœ¬ç¯‡åšå®¢ä¼šæ¶‰åŠåˆ°å¾ˆå¤šä¹‹å‰C++ä¸“æ é‡Œé¢æåˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå»ºè®®è¿èµ·æ¥è§‚çœ‹ã€‚\n\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\né»˜è®¤æˆå‘˜å‡½æ•°å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå³ä¾¿ç±»é‡Œé¢å•¥éƒ½ä¸æ”¾ï¼Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸‹é¢6ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\nå®ƒä»¬éƒ½æœ‰å•¥åŠŸèƒ½å‘¢ï¼Ÿä¸”å¬æˆ‘ä¸€ä¸€é“æ¥\n1.æ„é€ å‡½æ•°ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œå½“æˆ‘ä»¬å†™Cè¯­è¨€çš„é¡ºåºè¡¨ã€é“¾è¡¨ç­‰ä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šå†™ä¸€ä¸ªInitå‡½æ•°æ¥åˆå§‹åŒ–å†…å®¹ã€‚\nvoid Init()&#123;\ta=(int*)malloc(sizeof(int)*4);\tsize=0;\tcapa=4;&#125;\n\nä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸å¤Ÿæ™ºèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚\näºæ˜¯C++å°±æ•´å‡ºæ¥äº†ä¸€ä¸ªæ„é€ å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n1.1ç‰¹æ€§æ„é€ å‡½æ•°ï¼šåå­—å’Œç±»åç›¸åŒï¼Œåˆ›å»ºç±»å¯¹è±¡çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œåˆå§‹åŒ–ç±»ä¸­æˆå‘˜å˜é‡ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚æ„é€ å‡½æ•°åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­åªè°ƒç”¨ä¸€æ¬¡\næ„é€ å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹æ€§ï¼š\n\nå‡½æ•°åå’Œç±»åç›¸åŒ\næ— è¿”å›å€¼\næ„é€ å‡½æ•°å¯ä»¥é‡è½½\nå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„æ„é€ å‡½æ•°\nå¦‚æœä½ è‡ªå·±ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°\n\n1.2åŸºæœ¬ä½¿ç”¨ä¸‹é¢ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¼”ç¤ºä¸€ä¸‹æ„é€ å‡½æ•°\nclass Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºå¯¹è±¡q1çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨è°ƒç”¨äº†ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åˆå§‹åŒ–äº†è¿™ä¸ªé˜Ÿåˆ—\n\n\né™¤äº†ä¸Šé¢è¿™ç§æœ€åŸºæœ¬çš„æ— å‚æ„é€ å‡½æ•°ä»¥å¤–ï¼Œä¸€èˆ¬å†™æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šå¸¦ä¸€ä¸ªæœ‰ç¼ºçœå€¼çš„å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°çµæ´»ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—\nQueue(int Capacity=4)&#123;    _a=(int*)malloc(sizeof(int)*Capacity);    _size=0;    _capa=Capacity;&#125;\n\nè°ƒç”¨è¿™ç§æ„é€ å‡½æ•°ä¹Ÿæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°æ®ç±»å‹çš„é•¿åº¦ï¼Œæ¥åˆ›å»ºä¸åŒå®¹é‡çš„é˜Ÿåˆ—ï¼Œé¿å…å¤šæ¬¡reallocé€ æˆçš„å†…å­˜ç¢ç‰‡\nQueue q1;//è°ƒç”¨æ— å‚çš„æ„é€ å‡½æ•°Queue q2(100);//è°ƒç”¨å¸¦å‚çš„æ„é€ å‡½æ•°\n\nå¤šç§æ„é€ å‡½æ•°æ˜¯å¯ä»¥åŒæ—¶å­˜åœ¨çš„ï¼Œä¸è¿‡ï¼å®ƒä»¬éœ€è¦æ»¡è¶³å‡½æ•°é‡è½½çš„åŸºæœ¬è¦æ±‚\nå½“ä½ è°ƒç”¨ä¸€ä¸ªæ— å‚çš„å‡½æ•°ï¼Œå’Œä¸€ä¸ªå…¨ç¼ºçœçš„å‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ‡µé€¼ï¼\nQueue();Queue(int Capacity=4);//è¿™ä¸¤ä¸ªå‡½æ•°ä¸æ„æˆé‡è½½ï¼Œä¼šæŠ¥é”™\n\næ­£ç¡®çš„é‡è½½åº”è¯¥æ˜¯ä¸‹é¢çš„æƒ…å†µ\nQueue();Queue(int Capacity);\n\nç¼–è¯‘å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¼šæ™ºèƒ½é€‰æ‹©è¿™ä¸¤ä¸ªæ„é€ å‡½æ•°å…¶ä¸­ä¹‹ä¸€è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯åŒä¸€ä¸ªå¯¹è±¡åªä¼šè°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°\n1.3ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ä¸Šé¢æåˆ°è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€‚\nä½†æµ‹è¯•è¿‡ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªé»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œå¥½åƒå•¥äº‹éƒ½æ²¡æœ‰å¹²â€”â€”æˆ–è€…è¯´ï¼Œå®ƒæŠŠ_a _b _c éƒ½åˆå§‹åŒ–æˆäº†éšæœºå€¼ï¼\n\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹çš„\n\nå†…ç½®ç±»å‹ï¼šintã€charã€floatã€doubleâ€¦â€¦\nå¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹ï¼ˆå…¶ä»–çš„ç±»ï¼‰\n\nåœ¨å¤„ç†çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¿½ç•¥å†…ç½®ç±»å‹ï¼›å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\nclass Date&#123;public:    //é»˜è®¤æ„é€ å‡½æ•°ï¼šä¸ä¼ å‚å°±èƒ½è°ƒç”¨çš„    //1.å…¨ç¼ºçœ 2.æ— å‚ 3.ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ    //å¯ä»¥æ˜¯åŠç¼ºçœçš„ï¼Œä½†æ˜¯ä¸å®ç”¨    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;        _A.Print();    &#125;private:    //ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°ï¼ˆå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™çš„è¯ï¼‰    //è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šåˆå§‹åŒ–å†…ç½®ç±»å‹çš„    //å†…ç½®ç±»å‹ï¼šint,char,doubleç­‰ç­‰    int _year;    int _month;    int _day;    //å¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹    //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„é»˜è®¤æ„é€ å‡½æ•°    Queue _A;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨è°ƒç”¨äº†è‡ªå·±çš„æ„é€ å‡½æ•°çš„åŒæ—¶ï¼Œè¿˜è°ƒç”¨äº†å¤–ç½®ç±»å‹Queueçš„æ„é€ å‡½æ•°ï¼Œæå®šäº†å®ƒçš„åˆå§‹åŒ–\n\nå¦‚æœæˆ‘ä»¬å»æ‰Dateçš„æ„é€ å‡½æ•°ï¼Œå°±èƒ½çœ‹åˆ°ä¸‹é¢çš„æƒ…å†µã€‚QueueæˆåŠŸåˆå§‹åŒ–ï¼Œä½†æ˜¯å†…ç½®ç±»å‹çš„å¹´æœˆæ—¥éƒ½æ˜¯éšæœºå€¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªC++ç±»éƒ½éœ€è¦è‡ªå·±å†™æ„é€ å‡½æ•°ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæƒ…å†µé™¤å¤–\n\nç±»é‡Œé¢çš„æˆå‘˜éƒ½æ˜¯è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼ˆä¸”æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼‰\nå¦‚æœè¿˜æœ‰å†…ç½®ç±»å‹æˆå‘˜ï¼Œå£°æ˜æ—¶ç»™äº†ç¼ºçœå€¼\n\næ³¨ï¼šåªæœ‰ç±»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æ‰å¯ä»¥ç»™ç¼ºçœå€¼\n//ä¸‹é¢çš„æƒ…å†µå°±ä¸éœ€è¦å†™class MyS&#123;    private:      Queue q1;//è‡ªå®šä¹‰ç±»å‹      Queue q2;      int a=1;//å†…ç½®ç±»å‹å£°æ˜çš„æ—¶å€™ç»™äº†ç¼ºçœå€¼&#125;;\n\n\n\n1.4åˆå§‹åŒ–åˆ—è¡¨é™¤äº†ä¸Šé¢çš„æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ä¸ºåˆå§‹åŒ–åˆ—è¡¨\nDate(int year=2022,int month=2,int day=30)    :_year(year),\t_month(month),\t_day(day)&#123;&#125;\n\n\næ¯ä¸ªæˆå‘˜å˜é‡åªèƒ½åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å‡ºç°ä¸€æ¬¡\nç±»ä¸­åŒ…å«ä»¥ä¸‹æˆå‘˜å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–\nå¼•ç”¨\nconstæˆå‘˜\nè‡ªå®šä¹‰ç±»å‹æˆå‘˜\n\n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ã€‚å› ä¸ºå¯¹äºè‡ªå®šä¹‰ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œåˆå§‹åŒ–åˆ—è¡¨çš„ä¼˜å…ˆçº§æ˜¯é«˜äº&#123; &#125;é‡Œé¢çš„å†…å®¹çš„ã€‚\nè¿™é‡Œè¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼\næˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºå°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºï¼Œè€Œå¹¶éåˆå§‹åŒ–åˆ—è¡¨è‡ªå·±çš„é¡ºåºï¼\n\næ€ä¹ˆç†è§£å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(month)\t&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå³ä¾¿æˆ‘ä»¬æŠŠ_dayæ”¾åœ¨äº†åˆå§‹åŒ–åˆ—è¡¨çš„é¦–ä½ï¼Œä½†ç”±äºå®ƒæ˜¯åœ¨æœ€åå£°æ˜çš„ã€‚æ‰€ä»¥æ„é€ å‡½æ•°èµ°åˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œä¼šä¾æ®å£°æ˜é¡ºåºï¼Œä¾æ¬¡åˆå§‹åŒ–å¹´ã€æœˆã€æ—¥ã€‚\n\nè¿™ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Ÿå†æ¥çœ‹çœ‹ä¸€ä¸ªé”™è¯¯ç¤ºä¾‹\n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(_day)&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå½“æˆ‘ä»¬ç”¨ä¸Šé¢è¿™ä¸ªåˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ¬æ„æ˜¯æƒ³åœ¨åˆå§‹åŒ–å®Œ_dayä»¥åï¼Œå°†_dayçš„å€¼èµ‹ç»™_monthã€‚ä½†ç”±äº_monthçš„å£°æ˜é¡ºåºåœ¨_dayä¹‹å‰ï¼Œæ‰€ä»¥_month(_day)ä¼šå…ˆæ‰§è¡Œï¼Œæ­¤æ—¶çš„_dayå°šä¸ºéšæœºå€¼ï¼Œè¿™å°±å¯¼è‡´æœˆä»½å˜æˆéšæœºå€¼äº†ï¼\n\nè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šè‚¯å®šä¸ä¼šç”¨å¤©æ•°åˆå§‹åŒ–æœˆæ•°ï¼ŒèŒƒå›´ä¸ä¸€æ ·\n\næœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯å£°æ˜é¡ºåºå’Œåˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºä¿æŒä¸€è‡´ï¼\n\n1.5 explicitå…³é”®å­—æ„é€ å‡½æ•°ä¸ä»…å¯ä»¥æ„é€ ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œå¯¹äºå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œè¿˜å…·æœ‰éšå¼ç±»å‹è½¬æ¢çš„ä½œç”¨ã€‚\nclass Date&#123;public:    //æ­£å¸¸çš„æ„é€ å‡½æ•°    //Date(int year)    //    :_year(year)    //    &#123;&#125;\t    explicit Date(int year)        :_year(year)        &#123;&#125;private:    int _year;    int _month:    int _day;&#125;ï¼›void TestDate()&#123;    Date d1(2018);    // ç”¨ä¸€ä¸ªæ•´å½¢å˜é‡ç»™æ—¥æœŸç±»å‹å¯¹è±¡èµ‹å€¼    // å®é™…ç¼–è¯‘å™¨èƒŒåä¼šç”¨2019æ„é€ ä¸€ä¸ªæ— åå¯¹è±¡ï¼Œæœ€åç”¨æ— åå¯¹è±¡ç»™d1å¯¹è±¡è¿›è¡Œèµ‹å€¼    d1 = 2019;&#125;\n\nå½“æˆ‘ä»¬è°ƒç”¨èµ‹å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šå…ˆç”¨2019æ„é€ å‡ºä¸€ä¸ªdateç±»å‹å¯¹è±¡ï¼Œå†è°ƒç”¨èµ‹å€¼é‡è½½ï¼ˆè¿™é‡Œè¿˜æ²¡æœ‰å†™ï¼‰èµ‹å€¼ç»™d1ã€‚è¿™å°±æ˜¯ä¸€ä¸ªéšå¼ç±»å‹è½¬æ¢\nå¦‚æœæˆ‘ä»¬ç”¨explicitä¿®é¥°äº†è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œæ­¤ç±»éšå¼ç±»å‹è½¬æ¢ï¼\n1.6è§„èŒƒå‘½åç±»çš„æˆå‘˜å˜é‡ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œä»¥åŠåŒºåˆ†ç±»å†…å¤–çš„å‡½æ•°ç±»å‹\nä¸€èˆ¬æˆ‘ä»¬å®šä¹‰ç±»ä¸­çš„æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿è¿›è¡Œæ ‡æ˜_YEAR\nåœ¨ä¸€äº›åœ°æ–¹ï¼Œä½ ä¼šçœ‹åˆ°å‡½æ•°åå‰é¢ä¹Ÿå¸¦äº†ä¸€ä¸ª_ï¼Œè¿™ä¸€èˆ¬è¡¨æ˜è¯¥å‡½æ•°æ˜¯å¦å¤–ä¸€ä¸ªå‡½æ•°çš„å­å‡½æ•°ï¼ŒåŒæ ·æ˜¯ç”¨äºåŒºåˆ†çš„ã€‚\n\nä¸åŒäººçš„ä»£ç é£æ ¼ä¸åŒï¼Œä½ å¯ä»¥é€‰æ‹©ä½ è‡ªå·±å–œæ¬¢çš„é£æ ¼ï¼Œä½†ä¸èƒ½å½±å“æˆ‘ä»¬ç¨‹åºçš„æ­£å¸¸ä½¿ç”¨\n\næ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå°±ä¼šå½±å“ç±»çš„æ„é€ äº†\nclass Date&#123;public:    Date(int year=2022)    &#123;        year=year;    &#125;private:    int year;&#125;;\n\nè¯·é—®year=yearé‡Œé¢çš„è¿™ä¸ªyearï¼Œåˆ°åº•æ˜¯æˆå‘˜å˜é‡ï¼Œè¿˜æ˜¯æ„é€ å‡½æ•°çš„ä¼ å‚å‘¢ï¼Ÿç¼–è¯‘å™¨åˆåŒæ‡µé€¼äº†\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨åœ¨æ‰¾yearçš„æ—¶å€™ï¼Œä¼šå…ˆåœ¨å½“å‰&#123; &#125;ä¸­æ‰¾ï¼Œæ‰¾åˆ°äº†ä¼ å‚çš„yearï¼Œå°±ä¸ä¼šå»æ‰¾å…¶ä»–åœ°æ–¹çš„yearäº†ã€‚æ‰€ä»¥è¿™ä¸ªè¯­å¥å®é™…ä¸Šæ˜¯ä¼ å‚è¿‡æ¥çš„yearè‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚\n\n2.ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°ç›¸å¯¹åº”ï¼Œææ„å‡½æ•°æ˜¯å¯¹è±¡åœ¨å‡ºäº†ç”Ÿå‘½å‘¨æœŸåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨æ¥çˆ†ç ´å¯¹è±¡é‡Œçš„æˆå‘˜ï¼ˆå¦‚è¿›è¡Œfreeæ“ä½œï¼‰\nç”Ÿå‘½å‘¨æœŸæ˜¯ç¦»è¿™ä¸ªå¯¹è±¡æœ€è¿‘çš„&#123; &#125;æ‹¬å·\n2.1ç‰¹æ€§\nææ„å‡½æ•°åæ˜¯åœ¨ç±»åå‰åŠ ~\næ— å‚æ•°ï¼Œæ— è¿”å›å€¼\nä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°\nå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªææ„å‡½æ•°\n\nå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„ææ„å‡½æ•°ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹ï¼›ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„ææ„å‡½æ•°\n2.2åŸºæœ¬ä½¿ç”¨ææ„å‡½æ•°çš„å®šä¹‰å’Œæˆ‘ä»¬åœ¨å¤–éƒ¨å†™çš„Destroyå‡½æ•°ä¸€æ ·ï¼Œä¸»è¦æ‰§è¡Œfreeæ“ä½œ\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        free(_a);        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;//æµ‹è¯•è°ƒç”¨    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå‡è®¾æˆ‘ä»¬åœ¨mainå‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ èƒ½è¯´å‡ºq1å’Œq2è°å…ˆè¿›è¡Œææ„å‡½æ•°çš„è°ƒç”¨å—ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…ˆè°ƒç”¨çš„æ˜¯q2çš„ææ„å‡½æ•°\n\nå› ä¸ºåœ¨åº•å±‚æ“ä½œä¸­ï¼Œç¼–è¯‘å™¨ä¼šç»™mainå‡½æ•°å¼€è¾Ÿæ ˆå¸§\næ ˆéµä»åè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œq2æ˜¯ååˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨ææ„çš„æ—¶å€™ä¼šå…ˆææ„\n\n3.æ‹·è´æ„é€ 3.1ç‰¹æ€§å’Œä½¿ç”¨æ‹·è´æ„é€ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯å¦å¤–ä¸€ä¸ªDateç±»å‹ã€‚åœ¨ç”¨å·²æœ‰çš„ç±»ç±»å‹å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨\nå› ä¸ºæ‹·è´çš„æ—¶å€™æˆ‘ä»¬ä¸ä¼šä¿®æ”¹dçš„å†…å®¹ï¼Œæ‰€ä»¥ä¼ çš„æ˜¯const\nå¦å¤–ï¼Œæˆ‘ä»¬å¿…é¡»è¿›è¡Œä¼ å¼•ç”¨è°ƒç”¨ï¼\n\nè¿™é‡Œè¡¥å……è¯´æ˜ä¸€ä¸‹ï¼Œä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¼ å‚çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Dateçš„æ‹·è´æ„é€ \nvoid func(Date d);\n\nå¦‚æœä½ æ²¡æœ‰å†™æ‹·è´æ„é€ ï¼Œæˆ–è€…æ‹·è´æ„é€ é‡Œé¢ä¸æ˜¯ä¼ å¼•ç”¨ï¼Œç¼–è¯‘å™¨ä¼šå°±é€’å½’ä¸æ–­åˆ›å»ºæ–°çš„å¯¹è±¡è¿›è¡Œå€¼æ‹·è´æ„é€ ï¼Œç¨‹åºå°±æ­»å¾ªç¯è¾£\n//æ‹·è´æ„é€ ï¼Œå¦‚æœä¸å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª    //å¯¹å†…ç½®ç±»å‹è¿›è¡Œå€¼æ‹·è´(æµ…æ‹·è´)    Date(const Date&amp; d)    &#123;        _year=d._year;        _month=d._month;        _day=d._day;        //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„æ‹·è´æ„é€         Queue b(_A);    &#125;\n\nå’Œæ„é€ ã€ææ„ä¸åŒçš„æ˜¯ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ‹·è´æ„é€ ç»ˆäºæœ‰ç‚¹ç”¨äº†\n\nå®ƒä¼šå¯¹å†…ç½®ç±»å‹è¿›è¡ŒæŒ‰å†…å­˜å­˜å‚¨çš„å­—èŠ‚åºå®Œæˆæ‹·è´ï¼Œè¿™ç§ç§°ä¸ºå€¼æ‹·è´ï¼ˆåˆç§°æµ…æ‹·è´ï¼‰\nå¯¹å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\n\n\n3.2å¤–ç½®ç±»å‹æ‹·è´é—®é¢˜ä½†æ˜¯ï¼å¦‚æœä½ ä½¿ç”¨äº†å¤–ç½®ç±»å‹ï¼Œè¯¥ç±»å‹ä¸­åŒ…å«mallocçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°å°±ä¸èƒ½ç”¨è¾£ï¼\nå› ä¸ºè¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ ä¼šè¿›è¡Œå€¼æ‹·è´ï¼Œæ‹·è´å®Œäº†ä¹‹åï¼Œå°±ä¼šå‡ºç°q1å’Œq2æŒ‡å‘åŒä¸€ä¸ªç©ºé—´çš„æƒ…å†µã€‚ä¿®æ”¹q2ä¼šå½±å“q1ï¼Œfreeçš„æ—¶å€™å¤šæ¬¡é‡Šæ”¾åŒä¸€ä¸ªç©ºé—´ä¼šæŠ¥é”™ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„æ‹·è´æ„é€ çš„è¦æ±‚\n\næ³¨æ„æ³¨æ„ï¼Œmallocä¸è¡Œçš„åŸå› æ˜¯ï¼Œæ•°æ®æ˜¯å­˜åœ¨å †åŒºé‡Œé¢ï¼Œæ‹·è´çš„æ—¶å€™ï¼Œq2çš„_aå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè€Œä¸æ˜¯æ‹·è´äº†æ–°çš„æ•°æ®å†…å®¹ã€‚\n\nå¦‚æœä½ åœ¨ç±»é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªint arr[10]æ•°ç»„ï¼Œè¿™æ—¶å€™æ‹·è´æ„é€ å°±ç›¸å½“äºmemcpyï¼Œæ˜¯å¯ä»¥å®Œæˆæ‹·è´çš„å·¥ä½œçš„ã€‚\n\nå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ·±æ‹·è´\nè¿™é‡Œæˆ‘è¿˜æ²¡æœ‰å­¦åˆ°é‚£ä¸ªåœ°æ–¹ï¼Œåç»­å†™æ·±æµ…æ‹·è´çš„åšå®¢çš„æ—¶å€™ï¼Œå†æ¥å¡«ä¸Šè¿™ä¸ªå‘\n\né»‘é©¬16åˆ†é’Ÿè§†é¢‘é€Ÿæˆå®Œæ¯•ï¼Œå‰æ¥å¡«å‘\n\n3.3æ·±æ‹·è´3.3.1newå’Œdeleteè¿™é‡Œå…ˆç»™å¤§å®¶ä»Cè¯­è¨€è½¬åˆ°C++ï¼Œè®²è§£ä¸€ä¸‹newå’Œdeleteå…³é”®å­—ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”mallocå’Œfree\néå¸¸ç®€å•ï¼æ¯”mallocçš„ä½¿ç”¨ç®€å•å¤šäº†ï¼\nint main()&#123;    int*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´    int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10    int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´    //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼        delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´    delete p2;//åŒä¸Š        //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„    delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„        return 0;&#125;\n\næ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼\n\n\n3.3.2æ·±æ‹·è´å®ç°åœ¨ä¸Šé¢å†™é“è¿‡ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ï¼Œå®Œæˆå€¼æ‹·è´å·¥ä½œã€‚ä½†æ˜¯é˜Ÿåˆ—çš„ä»£ç é‡Œé¢åŒ…å«å †åŒºçš„ç©ºé—´ï¼Œéœ€è¦æˆ‘ä»¬æ­£ç¡®é‡Šæ”¾ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ å®Œæˆæ·±æ‹·è´ğŸ‘‡\n//æ‹·è´æ„é€ Queue(const Queue&amp; q)&#123;    _a=new int[q._capa];//æ³¨æ„è§£å¼•ç”¨    memcpy(_a, q._a, q._capa*sizeof(int));//æ‹·è´å†…å®¹    _size=q._size;    _capa=q._capa;&#125;\n\nç”¨ä¸‹é¢è¿™ä¸ªé˜Ÿåˆ—çš„ä»£ç æ¥æµ‹è¯•æ·±æ‹·è´\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        //_a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;        _a=new int[_capa];    &#125;    //æ‹·è´æ„é€     Queue(const Queue&amp; q)    &#123;        cout&lt;&lt;&quot;Queue Copy&quot;&lt;&lt;endl;        _a=new int[q._capa];        memcpy(_a, q._a, q._capa*sizeof(int));        _size=q._size;        _capa=q._capa;    &#125;    void Set()    &#123;        for (int i = 0; i &lt; _capa; i++)        &#123;            _a[i] = i + 1;        &#125;    &#125;    void Print()    &#123;        cout&lt;&lt;&quot;this:&quot;&lt;&lt;this&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;_a:&quot;&lt;&lt;_a&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;        for(int i=0;i &lt; _capa;i++)        &#123;            cout&lt;&lt;_a[i]&lt;&lt;&quot; &quot;;        &#125;        cout&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        //free(_a);        delete[] _a;        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;int main()&#123;     Queue q1;    q1.Set();    q1.Print();    cout&lt;&lt;endl;    Queue q2=q1;     q2.Print();    cout&lt;&lt;endl;    return 0;&#125;\n\n3.3.3æ·±æ‹·è´æ•ˆæœå…ˆæ³¨é‡Šæ‰Queueçš„æ‹·è´æ„é€ å‡½æ•°ææ„å‡½æ•°ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\nçœ‹ä¸€çœ‹ï¼Œå‘ç°åœ¨ä¸å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œq2å’Œq1çš„_aæŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€\n\nå–æ¶ˆææ„å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡é‡Šæ”¾åŒä¸€ç‰‡ç©ºé—´ï¼Œå‘ç”Ÿäº†æŠ¥é”™\n\nå¦‚æœæˆ‘ä»¬æŠŠå†™å¥½çš„æ·±æ‹·è´æ„é€ åŠ ä¸Šï¼Œå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\nå½“ä½ åŠ ä¸Šç»™_aé‡Œé¢åˆå§‹åŒ–ä¸€äº›æ•°æ®ï¼Œä»¥åŠæ‰“å°_aæ•°æ®çš„å‡½æ•°åï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…q2çš„_aæœ‰äº†è‡ªå·±å…¨æ–°çš„åœ°å€ï¼Œå…¶å†…éƒ¨çš„å€¼ä¹Ÿå’Œq1ä¸€æ ·äº†\n\nè¿™æ ·å†™å‡ºæ¥çš„æ‹·è´æ„é€ ï¼Œå³ä¾¿æŠŠé˜Ÿåˆ—ä¸­çš„int* _aä¿®æ”¹ä¸ºchar*æˆ–è€…å…¶ä»–ç±»å‹ï¼Œéƒ½èƒ½æ­£ç¡®å®Œæˆæ‹·è´å·¥ä½œ\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°ç‚¹å“ˆï¼Œå°±æ˜¯æ‰“å°char* _açš„åœ°å€çš„æ—¶å€™ï¼Œå’±éœ€è¦ç”¨printfè€Œä¸æ˜¯coutï¼Œå› ä¸ºcoutä¼šæŠŠ_aç›´æ¥å½“ä½œå­—ç¬¦ä¸²æ‰“å°äº†ï¼Œæ•ˆæœå°±å˜æˆäº†ä¸‹é¢è¿™æ ·\n\nç”¨printfæ¥æ§åˆ¶è¾“å‡ºæ ¼å¼ä¸º%xå³å¯\nprintf(&quot;_a:%x &quot;,_a);\n\n\n4.è¿ç®—ç¬¦é‡è½½4.1å®šä¹‰åœ¨è®²è§£èµ‹å€¼è¿ç®—ç¬¦é‡è½½ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥è®¤è¯†ä¸€ä¸‹å®Œæ•´çš„è¿ç®—ç¬¦é‡è½½\n\nC++ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§å¼•å…¥äº†è¿ç®—ç¬¦é‡è½½ï¼Œè¿ç®—ç¬¦é‡è½½æ˜¯å…·æœ‰ç‰¹æ®Šå‡½æ•°åçš„å‡½æ•°ï¼Œä¹Ÿå…·æœ‰å…¶è¿”å›å€¼ç±»å‹ï¼Œå‡½æ•°åå­—ä»¥åŠå‚æ•°åˆ—è¡¨ï¼Œå…¶è¿”å›å€¼ç±»å‹ä¸å‚æ•°åˆ—è¡¨ä¸æ™®é€šçš„å‡½æ•°ç±»ä¼¼ã€‚\n\nå‡½æ•°åä¸ºï¼šå…³é”®å­— operatorè¿ç®—ç¬¦ï¼Œå¦‚operator=\nå‡½æ•°åŸå‹ï¼šè¿”å›å€¼ç±»å‹ operatoræ“ä½œç¬¦(å‚æ•°åˆ—è¡¨)ï¼Œå¦‚Date operator=();\nä¸‹é¢æœ‰å‡ ç‚¹æ³¨æ„ï¼š\n\né‡è½½æ“ä½œç¬¦å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ“ä½œæ•°ï¼ˆå³æ“ä½œç¬¦é‡è½½å¯¹å†…ç½®ç±»å‹æ— æ•ˆï¼‰\nä¸èƒ½é€šè¿‡å…¶ä»–ç¬¦å·æ¥åˆ›å»ºæ–°çš„æ“ä½œç¬¦\nå¯¹äºç±»ç±»å‹çš„æ“ä½œç¬¦é‡è½½ï¼Œå½¢å‚æ¯”æ“ä½œæ•°å°‘ä¸€ä¸ªä¼ å‚ï¼ˆå› ä¸ºæœ‰ä¸€ä¸ªé»˜è®¤çš„å½¢å‚thisæŒ‡é’ˆï¼‰\nè¿™5ä¸ªæ“ä½œç¬¦æ˜¯ä¸èƒ½é‡è½½çš„ï¼š.*ã€::ã€sizeofã€? :ã€.\n\n4.2åŸºæœ¬ä½¿ç”¨ä»¥ä¸‹æ˜¯åœ¨å…¨å±€å®šä¹‰çš„æ“ä½œç¬¦é‡è½½ï¼Œç”¨äºåˆ¤æ–­æ—¥æœŸæ˜¯å¦ç›¸ç­‰\nbool operator==(const Date&amp; d1, const Date&amp; d2)&#123;    return d1._year == d2._year;    &amp;&amp; d1._month == d2._month    &amp;&amp; d1._day == d2._day;&#125;\n\nå½“æˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨d1==d2çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ“ä½œç¬¦é‡è½½\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±æ¥ä¼ å‚ä½¿ç”¨ï¼Œå¦‚if(operator==(d1,d2))\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œå’Œè°ƒç”¨ä¸€ä¸ªè€Œæ™®é€šå‡½æ•°æ²¡å•¥åŒºåˆ«ï¼Œå‹æ ¹ç®—ä¸ä¸Šæ“ä½œç¬¦é‡è½½ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯åœ¨ç±»é‡Œé¢å®šä¹‰æ“ä½œç¬¦é‡è½½çš„\n\n\nå½“æˆ‘ä»¬æŠŠå®ƒæ”¾å…¥ç±»Dateä¸­é—´ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸‹é¢è¿™æ ·\nbool operator==(const Date&amp; d2)&#123;    return _year == d2._year;    &amp;&amp; _month == d2._month    &amp;&amp; _day == d2._day;&#125;\n\nç¼–è¯‘å™¨åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä¼˜åŒ–æˆä¸‹é¢è¿™æ ·\nbool operator==(Date* this, const Date&amp; d2)//æ˜¾ç¤ºè°ƒç”¨ä¸º d1.operator==(d2);\nè€Œåœ¨mainé‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªé‡è½½åçš„æ“ä½œç¬¦å’ŒåŸæœ¬çš„ä½¿ç”¨æ–¹æ³•å®Œå…¨ç›¸åŒ\nDate d1(2022,6,1)Date d2(2022,5,1)d1==d2;//è‡ªåŠ¨è°ƒç”¨æ“ä½œç¬¦é‡è½½d1.operator==(d2);\n\nåç»­ä¼šä»¥æ—¥æœŸç±»ä¸ºæ ·æ¿ï¼Œå®ç°æ›´å¤šçš„æ“ä½œç¬¦é‡è½½\n\n4.3èµ‹å€¼è¿ç®—ç¬¦é‡è½½å› ä¸ºæ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸åŒçš„æˆå‘˜ï¼Œç¼–è¯‘å™¨ä¸å¯èƒ½æ™ºèƒ½çš„è¿›è¡Œèµ‹å€¼æ“ä½œã€‚è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªèµ‹å€¼è¿ç®—ç¬¦é‡è½½æ¥è¿›è¡Œèµ‹å€¼æ“ä½œäº†\nä»¥æ—¥æœŸç±»ä¸ºä¾‹ï¼Œèµ‹å€¼æ“ä½œå…¶å®å°±æ˜¯æŠŠå†…ç½®ç±»å‹æˆå‘˜ä¸€ä¸€èµ‹å€¼å³å¯\nDate&amp; operator=(const Date&amp; d)&#123;    if(this != &amp;d)//é¿å…è‡ªå·±ç»™è‡ªå·±èµ‹å€¼    &#123;        _year=d._year;        _month=d._month;        _day=d._day;    &#125;    return *this;&#125;\n\nç¼–å†™èµ‹å€¼é‡è½½ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å·±ç‚¹ï¼š\n\nè¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼ˆæ³¨æ„è¦å¼•ç”¨ä¼ å‚ï¼Œä¸ç„¶ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼‰\næ£€æµ‹æ˜¯å¦è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼ˆé¿å…æµªè´¹æ—¶é—´ï¼‰\nå› ä¸ºè¿”å›çš„æ˜¯*thisï¼Œå‡ºäº†å‡½æ•°åæ²¡æœ‰é”€æ¯ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¼ å¼•ç”¨è¿”å›\nä¸€ä¸ªç±»å¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªï¼Œå®Œæˆå¯¹è±¡æŒ‰å­—èŠ‚åºçš„å€¼æ‹·è´ã€‚\n\nå¦‚æœç±»ä¸­æœ‰è‡ªå®šä¹‰ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤è°ƒç”¨å®ƒçš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½ï¼ˆè¿™é‡Œä¹Ÿä¼šæ¶‰åŠåˆ°æ·±æµ…æ‹·è´çš„é—®é¢˜ï¼Œåé¢ä¼šåœ¨æ·±æµ…æ‹·è´çš„åšå®¢é‡Œè¯¦è§£ï¼‰\n4.4æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„è°ƒç”¨é—®é¢˜å½“èµ‹å€¼æ“ä½œç¬¦å’Œæ‹·è´æ„é€ åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨èµ‹å€¼ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ å‘¢ï¼Ÿ\n\nåœ¨è¿™ä¸¤ä¸ªå‡½æ•°ä¸­æ·»åŠ coutè¿›è¡Œæ‰“å°æç¤ºï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\nå¦‚æœå¯¹è±¡åœ¨ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œå°±ä¼šè°ƒç”¨èµ‹å€¼é‡è½½\nå¦‚æœæ˜¯ä¸€ä¸ªå…¨æ–°çš„å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå°±è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ \n\n\n5.constæˆå‘˜5.1ç”¨constä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°\nå°†constä¿®é¥°çš„ç±»æˆå‘˜å‡½æ•°ç§°ä¹‹ä¸ºconstæˆå‘˜å‡½æ•°ï¼Œconstä¿®é¥°ç±»æˆå‘˜å‡½æ•°ï¼Œå®é™…ä¿®é¥°çš„æ˜¯è¯¥æˆå‘˜å‡½æ•°éšå«çš„thisæŒ‡é’ˆï¼Œè¡¨æ˜åœ¨è¯¥æˆå‘˜å‡½æ•°ä¸­ä¸èƒ½å¯¹ç±»çš„ä»»ä½•æˆå‘˜è¿›è¡Œä¿®æ”¹ã€‚\n\nåŸºæœ¬çš„ä¿®é¥°æ–¹æ³•å¦‚ä¸‹ï¼Œåœ¨å‡½æ•°çš„æ‹¬å·ååŠ constå³å¯\nvoid Print()const&#123;\tcout&lt;&lt;_year&lt;&lt;endl;&#125;\n\nå®é™…ä¿®é¥°çš„æ˜¯è¯¥å‡½æ•°éšå«çš„thisæŒ‡é’ˆ\nthisæŒ‡é’ˆæœ¬èº«æ˜¯Date*constç±»å‹çš„ï¼Œä¿®é¥°åå˜ä¸ºconst Date* constç±»å‹\nvoid Print(const Date* const this)&#123;\tcout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;&#125;\n\n\nâ‘ å®ä¾‹-æƒé™é—®é¢˜è¿™ä¹ˆè¯´å¥½åƒæœ‰ç‚¹è¿·ç³Šï¼Œæˆ‘ä»¬ç”¨å®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦constä¿®é¥°æˆå‘˜å‡½æ•°\nclass Date&#123;public:    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;    &#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­è°ƒç”¨Printå‡½æ•°ï¼Œåœ¨mainä¸­æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„\nint main()&#123;\tDate d1(2022,5,10);    d1.Print();    return 0;&#125;\n\nä½†å½“ä½ ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œçš„æ—¶å€™ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†\nvoid TEST(const Date&amp; d)&#123;\td.Print();//d.Print(&amp;d) --&gt;const Date*&#125;int main()&#123;\tDate d1(2022,5,10);    d1.Print();//d1.Print(&amp;d1) --&gt;Date*    TEST(d1);        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬è¿›è¡Œäº†å¼•ç”¨è°ƒç”¨ï¼Œå› ä¸ºåœ¨TESTä¸­æˆ‘ä»¬ä¸ä¼šä¿®æ”¹d1çš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨constè¿›è¡Œäº†ä¿®é¥°\n\nè¿™æ—¶å€™TESTä¸­çš„d.Print()å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯const Date*æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nmainä¸­çš„d1.Print();å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯Date*æŒ‡é’ˆ\n\näºæ˜¯å°±ä¼šå‘ç”Ÿæƒé™å†²çªé—®é¢˜ğŸ‘‡\n\nè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°åé¢åŠ äº†constï¼Œå°±å¯ä»¥é¿å…æ­¤ç§æƒé™æ”¾å¤§é—®é¢˜ã€‚è¿™æ ·ä¸ç®¡æ˜¯mainå‡½æ•°è¿˜æ˜¯TESTå‡½æ•°ä¸­å¯¹Print()å‡½æ•°çš„è°ƒç”¨ï¼Œå°±éƒ½å¯ä»¥æ­£å¸¸æ‰“å°äº†ï¼\n\næ€»ç»“ä¸€ä¸‹ï¼š\n\nconstå¯¹è±¡ä¸å¯ä»¥è°ƒç”¨éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstå¯¹è±¡å¯ä»¥è°ƒç”¨constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\nconstæˆå‘˜å‡½æ•°å†…ä¸å¯ä»¥è°ƒç”¨å…¶ä»–éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstæˆå‘˜å‡½æ•°å¯ä»¥ç‹¬è°ƒç”¨å…¶ä»–constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\n\n\n\n\nâ‘¡ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ï¼Ÿä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\nthisæŒ‡é’ˆæœ¬èº«å°±æ˜¯ç±»å‹å* constç±»å‹çš„ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ã€‚åŠ ä¸Šconstä¹‹åï¼ŒthisæŒ‡å‘çš„å†…å®¹ï¼Œæ—¢ç±»é‡Œé¢çš„æˆå‘˜å˜é‡ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚\nçŸ¥é“äº†è¿™ä¸€ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥åˆç†çš„åˆ¤æ–­å‡ºï¼šåªè¦æ˜¯éœ€è¦ä¿®æ”¹ç±»ä¸­æˆå‘˜å˜é‡çš„å‡½æ•°ï¼Œå°±ä¸éœ€è¦åœ¨()åé¢åŠ constä¿®é¥°\nå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡ï¼Œå°±å¯ä»¥åŠ constè¿›è¡Œä¿®é¥°\næ³¨æ„ï¼šå¦‚æœä½ ç”¨äº†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„å†™æ³•ï¼Œé‚£ä¹ˆå£°æ˜å’Œå®šä¹‰çš„å‡½æ•°éƒ½éœ€è¦åŠ ä¸Šconstä¿®é¥°\n\nâ‘¢å‡ºé”™æé†’è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æé†’çš„æ˜¯ï¼Œå¦‚æœä½ å¯¹æŸä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†constä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°é‡Œé¢åŒ…å«çš„å…¶ä»–ç±»é‡Œé¢çš„å‡½æ•°ï¼Œéƒ½éœ€è¦è¿›è¡Œconstä¿®é¥°ã€‚ä¸ç„¶å°±ä¼šæŠ¥é”™\n\nå‡ºç°è¯¥æŠ¥é”™çš„æƒ…å†µå¦‚ä¸‹\n\nè¿™ä¸ªæƒ…å†µä¹Ÿæé†’æˆ‘ä»¬ï¼Œä¸èƒ½åœ¨constä¿®é¥°çš„å‡½æ•°ä¸­ï¼Œè°ƒç”¨éconstä¿®é¥°çš„æˆå‘˜å‡½æ•°\n\n5.2å–åœ°å€åŠå¯¹constå–åœ°å€é‡è½½æœ€åä¸¤ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚è¿™ä¸¤ä¸ªå‡½æ•°ä¸€èˆ¬éƒ½ä¸éœ€è¦é‡è½½ï¼Œæ¯•ç«Ÿè¿”å›çš„æœ¬èº«å°±æ˜¯ä¸€ä¸ªthisæŒ‡é’ˆï¼Œæ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„åœ°æ–¹\nclass Date&#123; public :     Date* operator&amp;()     &#123;         return this ;     &#125;         const Date* operator&amp;()const     &#123;     \treturn this ;     &#125;private :     int _year ;      int _month ;     int _day ;&#125;;\n\nåªæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦è®©&amp;åªè·å–ç‰¹å®šå†…å®¹çš„æ—¶å€™ï¼Œæ‰éœ€è¦æ‰‹åŠ¨é‡è½½è¿™ä¸¤ä¸ªå‡½æ•°\n6.æ„é€ ï¼Œææ„é¡ºåºä¸‹é¢è¿™ä¸ªä»£ç æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç¤ºä¾‹ï¼ˆ22.12.31ï¼‰\n#includeÂ &lt;iostream&gt;#includeÂ &lt;string&gt;usingÂ namespaceÂ std; classÂ A&#123;public:Â Â Â Â A(intÂ count)Â Â Â Â &#123;Â Â Â Â Â Â Â Â cÂ =Â count;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â cÂ &lt;&lt;Â &quot;Â initÂ this::Â &quot;Â &lt;&lt;Â thisÂ &lt;&lt;Â endl;Â Â Â Â &#125; Â Â Â Â ~A()Â Â Â Â &#123;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â cÂ &lt;&lt;Â &quot;Â desÂ this::Â &quot;Â &lt;&lt;Â thisÂ &lt;&lt;Â endl;Â Â Â Â &#125;private:Â Â Â Â intÂ c;&#125;; AÂ a1(1);//å…¨å±€ intÂ main()&#123;Â Â Â Â A*Â pÂ =Â newÂ A(2);//å †åŒºÂ Â Â Â AÂ a2(3);//æ ˆåŒºÂ Â Â Â staticÂ AÂ a3(4);//é™æ€åŒº Â Â Â Â coutÂ &lt;&lt;Â &quot;#####&quot;Â &lt;&lt;Â endl;Â Â Â Â deleteÂ p;//å †åŒºè¢«ä¸»åŠ¨é‡Šæ”¾ï¼Œè‚¯å®šæ˜¯ç¬¬ä¸€ä¸ªææ„çš„&#125;\n\næœ€ç»ˆæ‰“å°çš„ç»“æœå¦‚ä¸‹\n1 init this:: 00D4E4642 init this:: 0160F5583 init this:: 0133F9D84 init this:: 00D4E46C#####2 des this:: 0160F5583 des this:: 0133F9D84 des this:: 00D4E46C1 des this:: 00D4E464\n\næ€»ç»“ï¼š\n\næ„é€ é¡ºåºå’Œå†™ä»£ç çš„è¿è¡Œé¡ºåºä¸€è‡´\nææ„æ—¶å€™ï¼Œå †åŒºè‹¥æ‰‹åŠ¨deleteï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯æŒ‰deleteçš„é¡ºåºææ„çš„\nè‡ªåŠ¨ææ„çš„æ—¶å€™ï¼Œéµå¾ªæ ˆ-é™æ€-å…¨å±€çš„é¡ºåºææ„\n\n\næ—¥æœŸç±»çš„å®ç°ç±»å’Œå¯¹è±¡ç¬¬ä¸€ç«™ğŸšŒä¸­æåˆ°è¿‡ï¼Œåœ¨é¡¹ç›®åä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€åŠè¦ç”¨å®šä¹‰å’Œå£°æ˜åˆ†ç¦»çš„å½¢å¼æ¥äº›ä¸€ä¸ªé¡¹ç›®ã€‚\n\nä¸‹é¢å°±è®©æˆ‘ä»¬ç”¨æ—¥æœŸç±»æ¥æ¼”ç¤ºè¿™æ ·çš„æ“ä½œ\n\nåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°ä¼šè¢«é»˜è®¤è®¾ç½®ä¸ºå†…è”ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯ï¼šçŸ­å°å‡½æ•°åœ¨.hä¸­å®šä¹‰ï¼Œé•¿å‡½æ•°åœ¨.hä¸­å£°æ˜ï¼Œåœ¨.cppä¸­å®šä¹‰\nè‡³äºæºç å’Œè§£æå˜›â€¦â€¦å¤§å®¶ç›´æ¥æ¥æˆ‘çš„giteeä»“åº“çœ‹å§ï¼ã€ä¼ é€é—¨ã€‘\næ³¨é‡Šå†™çš„å¾ˆè¯¦ç»†äº†â²æœ‰å•¥é—®é¢˜å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€å“¦\n\nç‰¹æ®Šï¼šå¯¹&lt;&lt;å’Œ&gt;&gt;çš„é‡è½½è¿™é‡Œçš„&lt;&lt;å’Œ&gt;&gt;ä¸»è¦æ˜¯åœ¨ä½¿ç”¨cinå’Œcoutçš„æ—¶å€™éœ€è¦ä½¿ç”¨\nâ‘ ç®€å•äº†è§£ioåœ¨cplusplusç½‘ç«™ä¸Šï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä¸€å‰¯å›¾ã€‚åœ¨ä½¿ç”¨cinå’Œcoutçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®åˆ†åˆ«è°ƒç”¨äº†ä¸åŒå¤´æ–‡ä»¶çš„å†…å®¹ã€‚\n\ncinï¼šistream\ncoutã€cerrã€clogï¼šostream\n\n\nå®é™…ä¸Šï¼Œæµæ˜¯ä¸€ä¸ªç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®Œæˆäº†è¾“å…¥å’Œè¾“å‡ºçš„æ“ä½œ\n\næµæ“ä½œæ˜¯ç³»ç»ŸGUIæ”¯æŒçš„ï¼ˆäº†è§£ä¸€ä¸‹å°±è¡Œï¼Œæˆ‘ä¹Ÿä¸æ‡‚ï¼‰\n\nåœ¨coutçš„å®šä¹‰ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šcoutä¸ºäº†å®Œæˆè‡ªåŠ¨è¯†åˆ«ç±»å‹è¿›è¡Œè¾“å‡ºæ“ä½œçš„å·¥ä½œï¼Œå¯¹å„ç§ç±»å‹è¿›è¡Œäº†æ“ä½œç¬¦é‡è½½operator&lt;&lt;\n\næ˜¾ç„¶ï¼Œè¿™éƒ¨åˆ†é‡è½½ä¸­ä¸åŒ…å«è‡ªå®šä¹‰ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ¥ä»¿ç…§è¿™é‡Œçš„å‡½æ•°ï¼Œè¿›è¡Œé‡è½½æ“ä½œ\nè¿™é‡Œæ¶‰åŠåˆ°äº†å‹å…ƒå‡½æ•°ï¼Œåœ¨ç±»å’Œå¯¹è±¡çš„ä¸‹ä¸€ç¯‡åšå®¢ä¸­æˆ‘ä¼šå†™é“ã€‚ä¸è¿‡ç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼Œå‹å…ƒå‡½æ•°æ˜¯æŸä¸€ä¸ªç±»çš„æœ‹å‹ï¼Œç›®çš„æ˜¯åœ¨ç±»å¤–è®¿é—®ç±»é‡Œé¢çš„æˆå‘˜å˜é‡\n\nå‹å…ƒå‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œå®ƒæ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„æ™®é€šå‡½æ•°ï¼Œä¸å±äºä»»ä½•ç±»ï¼Œä½†éœ€è¦åœ¨ç±»çš„å†…éƒ¨å£°æ˜ï¼Œå£°æ˜æ—¶éœ€è¦åŠ friendå…³é”®å­—ã€‚\n\nâ‘¡å®ç°æœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼Œå¤´æ–‡ä»¶ä¸­åœ¨æœ€å‰é¢è¿›è¡Œå£°æ˜\n\n//è¿™ä¸¤ä¸ªæ˜¯å‹å…ƒå‡½æ•°(å› ä¸ºéœ€è¦åœ¨ç±»å¤–é¢è®¿é—®ç±»é‡Œé¢çš„æˆå‘˜å˜é‡)//æ³¨æ„cinå’Œcoutçš„ä¸åŒå®ç°//å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®Œå…¨å±•å¼€std namepaceï¼Œæ‰€ä»¥å†™è¿™ä¸ªå‡½æ•°çš„æ—¶å€™éœ€è¦è‡ªå·±æŒ‡å®šstd:://è¿”å›å€¼ä¸ºostreamæ˜¯ä¸ºäº†ä¿è¯å¤šæ¬¡coutstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Date&amp; d)&#123;\tout &lt;&lt; d._year &lt;&lt; &quot;-&quot; &lt;&lt; d._month &lt;&lt; &quot;-&quot; &lt;&lt; d._day &lt;&lt; endl;\treturn out;&#125;//cinä½¿ç”¨çš„æ˜¯istreamstd::istream&amp; operator&gt;&gt;(std::istream&amp; in, Date&amp; d)&#123;\tint year,month,day;    in &gt;&gt; year &gt;&gt; month &gt;&gt; day;    //è¿™é‡Œåº”è¯¥æ·»åŠ ä¸€ä¸ªå¯¹æ—¥æœŸçš„æ­£ç¡®æ€§åˆ¤æ–­     if(year&gt;=0        &amp;&amp;(month&gt;=1&amp;&amp;month&lt;=12)        &amp;&amp;(day&gt;=1&amp;&amp;day&lt;=d.GetMonthDay(year,month)) )    &#123;//åˆ¤æ–­æ—¥æœŸæ­£ç¡®æ€§        d._year=year;        d._month=month;        d._day=day;    &#125;    else    &#123;        cout&lt;&lt;&quot;Date err!&quot;&lt;&lt;endl;        exit(0);//æ—¥æœŸé”™è¯¯ç›´æ¥ç»ˆæ­¢ç¨‹åº    &#125;\treturn in;&#125;\n\nç¨‹åºè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œå’Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨coutã€cinæ˜¯ä¸€æ ·çš„ï¼\n\nå½“ä½ å†™äº†ä¸€ä¸ªç¦»è°±æ—¥æœŸåï¼Œç¨‹åºä¹Ÿä¼šè¿›è¡Œæ­£ç¡®çš„æŠ¥é”™\n\nâ‘¢ç–‘æƒ‘è§£ç­”ä½ å¯èƒ½ä¼šæƒ³ï¼Œå¹²å˜›ç”¨å‹å…ƒå•Šï¼Œç›´æ¥åœ¨ç±»é‡Œé¢å®šä¹‰è¿™ä¸ªå‡½æ•°é‡è½½ä¸å°±å¯ä»¥äº†ï¼Ÿ\nä¹‹æ‰€ä»¥åœ¨å¤–å¤´å®šä¹‰è¯¥å‡½æ•°ï¼Œæ˜¯å› ä¸ºç±»é‡Œé¢å®šä¹‰çš„å‡½æ•°ï¼Œé»˜è®¤ä¼šå¸¦æœ‰ä¸€ä¸ªéšå«çš„thisæŒ‡é’ˆä¼ å‚ï¼Œä½œä¸ºæ“ä½œç¬¦çš„å·¦æ“ä½œæ•°ã€‚\nç„¶åä½ çš„å‡½æ•°ä½¿ç”¨å°±å¾—å˜æˆä¸‹é¢è¿™æ ·ğŸ˜±\nd1&lt;&lt;cout;\n\nè™½ç„¶ä¹Ÿèƒ½è·‘èµ·æ¥å¹¶å®Œæˆå·¥ä½œï¼Œä½†è¿™æ ·å†™ä¹Ÿå¤ªæ€ªäº†ï¼\nç»“è¯­æœ€åçš„æœ€åï¼Œä»Šå¤©æ˜¯5æœˆ20æ—¥ï¼Œç”¨ä¸‹å›¾ç»™å¤§å®¶é€ä¸Šç¥ç¦ğŸ˜‚\n\n","categories":["é‡è§C++"],"tags":["Linux","C++","ç±»å’Œå¯¹è±¡"]},{"title":"ã€æ–¹æ³•åˆ†æã€‘å‡†å¤§å­¦ç”Ÿå¦‚ä½•è‡ªå­¦Cè¯­è¨€","url":"/2021/08/24/note_c/0.C%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/","content":"å‡†å¤§å­¦ç”Ÿå¦‚ä½•è‡ªå­¦Cè¯­è¨€@[TOC]\nè™½è¯´ç°åœ¨å·²ç»æ¥è¿‘æˆ‘ä»¬æœ€é•¿çš„ä¸”æ— å¿§æ— è™‘çš„æš‘å‡çš„å°¾å£°\nä½†æˆ‘ä¼°æ‘¸ç€å¾ˆå¤šå°ä¼™ä¼´è¿˜æ˜¯å’Œæˆ‘ä¸€æ ·æ•´å¤©æ‘¸é±¼ï¼Œä¸çŸ¥ä¸è§‰å°±æµªè´¹äº†ä¸€å¤©\nï¼ˆå…¶å®åªæœ‰æˆ‘åœ¨æ‘¸é±¼å¯¹å—ï¼Œæµä¸‹äº†ä¸äº‰æ°”çš„æ³ªæ°´ï¼‰\nä¸æ‰¯è¿™äº›æ²¡ç”¨çš„ï¼Œè¿›å…¥ä»Šå¤©çš„æ­£é¢˜\næœ¬ç¯‡åšå®¢å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•è‡ªå­¦Cè¯­è¨€çš„ï¼Œä»¥åŠå¦‚ä½•åšå­¦ä¹ ç¬”è®°\nå­¦ä¹ æ–¹æ³•å„ä¸ç›¸åŒï¼Œè¯·ä»¥è‡ªèº«æƒ…å†µä¸ºå‡†\nä¸€ã€æ‰¾å¯»ä¸€ä¸ªä¼˜è´¨æ•™å­¦è§†é¢‘å¥½çš„æ•™å­¦èµ„æºæ°¸è¿œæ˜¯æˆ‘ä»¬å­¦ä¹ çš„ç¬¬ä¸€æ­¥\nåœ¨è¿™é‡Œæˆ‘å»ºè®®ä»¥è§†é¢‘ä¸ºä¸»ï¼Œä¹¦æœ¬ä¸ºè¾…åŠ©\nCè¯­è¨€çš„ä¹¦ç±ç¹å¤šè€Œæ‚ï¼Œæœ‰å¾ˆå¤šçƒ­é”€ä¹¦ç±å¹¶éå‡ºè‡ªåé—¨å¤§å®¶ï¼Œæœ‰çº°æ¼åœ¨æ‰€éš¾å…ã€‚ä½œä¸ºåˆå­¦è€…çš„æˆ‘ä»¬è‚¯å®šçœ‹ä¸å‡ºè¿™äº›çº°æ¼ï¼Œä½†å®ƒå¯èƒ½ä¼šæŠŠæˆ‘ä»¬çš„å­¦ä¹ å¼•å…¥æ­»èƒ¡åŒã€‚\nè§†é¢‘åŒæ ·ä¹Ÿä¼šæœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½•æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¼˜è´¨æ•™å­¦è§†é¢‘\nåœ¨çœ‹è§†é¢‘çš„åŸºç¡€ä¸Šï¼Œå¤ä»¥ä¹¦æœ¬ç»ƒä¹ ä¸ºè¾…åŠ©ï¼Œæ–¹ä¸ºå­¦ä¹ å¦™è®¡ï¼ˆä¸ªäººè§‚ç‚¹ï¼‰\nåœ¨è¿™é‡Œå¼ºçƒˆæ¨èbç«™æ¯”ç‰¹é¹å“¥çš„Cè¯­è¨€æ•™å­¦è§†é¢‘ è¿æ¥\n\nè®²çš„éå¸¸éå¸¸éå¸¸è¯¦ç»†ï¼Œæ¯”æˆ‘ä¹‹å‰åœ¨æŸå ‚åœ¨çº¿æ‰¾åˆ°çš„ä¸çŸ¥åè§†é¢‘å¥½å¤ªå¤šäº†ï¼ˆé‚£ä¸ªè§†é¢‘é‡Œè€å¸ˆå°±å¯¹ç€ä½ å¿µpptï¼Œæ¯ç‡¥ä¹å‘³æ— å¹²è´§ï¼‰\nè¿™é‡Œæ¨èå¤§å®¶ç›´æ¥å»çœ‹æœ€æ–°ç‰ˆæœ¬çš„è§†é¢‘ï¼Œç”»è´¨æ›´å¥½ã€‚å†…å®¹æ–°æ—§åŸºæœ¬æ˜¯ä¸€æ ·çš„\næ‰¾å®Œè§†é¢‘ä¹‹åè¯·ç«‹é©¬å¼€åŠ¨ï¼Œæ”¶è¿›æ”¶è—å¤¹åªä¼šè®©ä½ å¼€å­¦äº†è¿›åº¦è¿˜æ˜¯0%\nä¸è¿‡æƒ³å¿…æ¥csdnçœ‹åšå®¢çš„ä½ å·²ç»ä¸æ˜¯å°èœé¸¡äº†ï¼ˆdogeï¼‰\näºŒã€ä½¿ç”¨ä¼˜è´¨ç¼–è¯‘å™¨æ‹’ç»devc++å­¦ä¹ Cè¯­è¨€\nå½“ç„¶ï¼Œå®ƒè‚¯å®šèƒ½ç”¨ï¼Œæˆ‘ä¹Ÿæ¨èä½ åœ¨ç”µè„‘é‡Œé¢ä¸‹ä¸€ä¸ªdevc++\nä½†æ˜¯å®ƒä¸é€‚åˆæ—¥ç”¨å­¦ä¹ ï¼ï¼\nç†ç”±éå¸¸ç®€å•ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹VS2019å’Œdevc++åœ¨åŒä¸€ä¸ªä»£ç ä¸‹çš„ç•Œé¢\n\nè¯·é—®é‚£è¾¹æ›´å®¹æ˜“è®©ä½ çœ¼èŠ±ç¼­ä¹±ï¼Ÿè§†è§‰ç–²åŠ³ï¼Ÿ\n(ä½ è¦è¯´vsé¢œè‰²å¤ªå¤šçœ¼èŠ±ç¼­ä¹±ï¼Œé‚£æˆ‘æ— åŠ›åé©³)\n\nvs2019åŒæ ·å¯ä»¥æ”¹æˆç™½è‰²èƒŒæ™¯ï¼Œä½†æ·±è‰²å¯¹æ¯”åº¦æ›´é«˜æ¨èæ·±è‰²\n\nåŒæ ·çš„ï¼Œå½“æˆ‘ä»¬è¾“å…¥åº“å‡½æ•°çš„æ—¶å€™ï¼Œvså¯ä»¥å¸®ä½ è¡¥å……å‰©ä¸‹å‡½æ•°\nè€Œdevc++å°±éœ€è¦çœ‹ä½ èƒŒå•è¯çš„åŠŸåŠ›äº†\n\nè€Œä¸”åœ¨é‡åˆ°ä»£ç é”™è¯¯çš„æ—¶å€™ï¼Œvs2019èƒ½æ›´å‡†ç¡®åœ°æŠ¥å‡ºé”™è¯¯çš„åœ°æ–¹ï¼Œ\næœ‰äº›ä¸­è‹±æ–‡åŠè§’é”™è¯¯çš„ç¬¦å·ï¼Œå¦‚åˆ†å·ã€é€—å·ã€‚vs2019éƒ½ä¼šç”¨ä¸€ä¸ªå°æ³¢æµªçº¿æ ‡å‡ºï¼Œè€Œdevc++è«å¾—æç¤º\nï¼ˆè®²é“ç†åˆå­¦çš„æˆ‘æœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯æ‰“é”™ä¸­è‹±æ–‡åŠè§’+æ‰“é”™å‡½æ•°åâ€¦â€¦ï¼‰\n\nå‰é¢æåˆ°å»ºè®®åœ¨ç”µè„‘é‡Œé¢ä¸‹ä¸ªdevc++ï¼Œå› ä¸ºvs2019ä¸èƒ½ç›´æ¥è¿è¡Œ.cæ–‡ä»¶ï¼Œå¿…é¡»è¦æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªâ€œé¡¹ç›®â€é‡Œé¢æ‰è¡Œ\nå¯¹äºå•ä¸ªæ–‡ä»¶çš„è¿è¡Œæ¥è¯´devc++æ›´æ–¹ä¾¿ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ªç®€æ˜“çš„.cppå’Œ.cçš„è¿è¡Œå™¨\nVS2019å¯ä»¥ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½ç¤¾åŒºç‰ˆæœ¬ï¼Œè¯·ä¸è¦ä¸‹è½½VS codeï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´å®ƒçš„åˆå§‹åŒ–è®¾ç½®éå¸¸éº»çƒ¦ï¼\nå®˜ç½‘é“¾æ¥&#x3D;&gt;visualstudio.microsoft.com\n(ç”±äºå¾®è½¯çš„åœŸè±†æœåŠ¡å™¨ï¼Œæˆ‘æ‰“ä¸å¼€å®˜ç½‘ï¼Œè‡ªç„¶æˆªä¸åˆ°å›¾â€¦â€¦å¤ªæ£’äº†å¾®è½¯)\n\nåšå®¢å†™åˆ°ä¸€åŠå›å»ç…äº†ä¸€çœ¼ï¼Œç»ˆäºæ‰“å¼€äº†\næˆ‘ä»¬éœ€è¦ä¸‹è½½çš„æ˜¯2019çš„ç¤¾åŒºç‰ˆæœ¬\n\nå…¶æ¬¡æˆ‘ä»¬è¿˜éœ€è¦æ”¶è—å‡ ä¸ªç”¨äºå­¦ä¹ æ—¶æŸ¥æ‰¾èµ„æ–™çš„ç½‘ç«™\nå®ƒä»¬ä¸»è¦æ˜¯ç”¨äºæŸ¥æ‰¾å‡½æ•°å®šä¹‰çš„ï¼Œå…·ä½“æ–¹æ³•æˆ‘åœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²æœ‰è¿‡åˆ†äº« [é“¾æ¥]ç½‘ç«™æ¨èï¼š\ncplusplus.com - The C++ Resources Network \ncppreference.com\nä¸‰ã€å®‰æ’ä¸€ä¸ªç”µå­ç¬”è®°åˆå­¦cè¯­è¨€æ—¶çš„çŸ¥è¯†ç¹å¤šè€Œæ‚ï¼Œä¸è®°ç¬”è®°çš„è¯å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½æ˜¯å·¦è€³è¿›å³è€³å‡ºï¼ˆè‡³å°‘æˆ‘æ˜¯è¿™æ ·ï¼‰\nçº¸è´¨ç¬”è®°æœ¬åœ¨è¿™ç§éœ€è¦å¤§é‡ä»£ç ç»ƒä¹ çš„å­¦ä¹ ä¸­æ•ˆç‡å¤ªä½\nè¿™æ—¶å€™å°±å¾—è¯·å‡ºæˆ‘ä»¬çš„ç”µå­ç¬”è®°æœ¬äº†\nåœ¨è¿™é‡Œç»™å¤§å®¶æ¨èä¸ªäººè®¤ä¸ºæœ€å¥½ç”¨çš„OneNote\n\nå¦‚æœä½ æ˜¯ç¬”è®°æœ¬ç”¨æˆ·ï¼Œæœ‰å‡ºå‚èµ é€çš„OneNote2016\\2019ï¼Œç›´æ¥ç”¨å³å¯\nå°å¼æœºç”¨æˆ·OneNoteå¤šåŠæ˜¯è£…ç³»ç»Ÿå°±è‡ªå¸¦äº†çš„ã€‚æ²¡æœ‰çš„è¯å¯ä»¥å»å¾®è½¯å•†åº—ä¸‹ä¸€ä¸ªOneNote for WIN10ï¼Œæˆ–å¾®è½¯å®˜ç½‘ä¸‹è½½OneNote2019\n\n\nä¼˜ç‚¹ï¼šIOS\\å®‰å“\\WIN\\MACå…¨å¹³å°åŒæ­¥ï¼Œå…è´¹ï¼\nç¼ºç‚¹ï¼šå¾®è½¯åœŸè±†æœåŠ¡å™¨ï¼Œæœ‰æ—¶å€™è·¨å¹³å°åŒæ­¥ææ…¢ã€‚\n\nåŒæ—¶å»ºè®®å¤§å®¶ä¸‹è½½ä¸€ä¸ªsnipasteï¼Œä½œä¸ºæˆªå›¾è½¯ä»¶è¾…åŠ©æˆ‘ä»¬çš„ç”µå­ç¬”è®°\n\nOneNoteè‡ªå¸¦çš„æˆªå›¾ä¼šè‡ªåŠ¨ç»™ä½ æ·»åŠ ä¸€ä¸ªæˆªå›¾æ—¶é—´ï¼Œæœ‰ç‚¹å½±å“ç•Œé¢è§‚æ„Ÿ\n\n\næ–°å»ºä¸€ä¸ªç¬”è®°æœ¬ï¼Œå‘½åä¸ºcè¯­è¨€\n\n\nOneNoteä¸»è¦çš„ç•Œé¢å°±æ˜¯è¿™ç§ä¸‰æ®µå¼çš„ç¬”è®°å¤¹ã€‚å¤§å®¶å¯ä»¥å‚ç…§æˆ‘çš„åˆ†ç±»ï¼ŒæŠŠå¤§ç±»çŸ¥è¯†ç‚¹æ”¾åœ¨ç¬¬ä¸€ä¸ªåˆ†åŒºï¼Œå°ç±»æ”¾åœ¨ç¬¬äºŒä¸ª\nè¿™æ ·æˆ‘ä»¬åæœŸå¤ä¹ orå›çœ‹é—å¿˜çŸ¥è¯†ç‚¹ä¹Ÿä¼šæ›´åŠ æ–¹ä¾¿\nè¿™é‡Œå»ºè®®å¤§å®¶ç»™æ¯ä¸ªå°ç±»çŸ¥è¯†ç‚¹éƒ½åšä¸Šæ•°å­—åºå·ï¼Œä¸”ä¸è¦é‡å¤\nè¿™æ ·å°±å¯ä»¥åœ¨å·²æœ‰çš„ç¬”è®°å†…è¡¨æ˜è¿™ä¸ªçŸ¥è¯†ç‚¹å’Œå¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„è”ç³»\n\nOneNoteçš„æ’å…¥é“¾æ¥åŠŸèƒ½åŒæ ·å¯ä»¥æ’å…¥ç¬”è®°æœ¬å†…é¡µçš„è¿æ¥\nå¦‚å›¾ï¼Œæˆ‘ä»¬å³å‡»16EOFï¼Œç‚¹å‡»â€å¤åˆ¶æŒ‡å‘é¡µé¢çš„é“¾æ¥â€œ\n\nç„¶ååœ¨æˆ‘ä»¬æƒ³æ’å…¥è¿™ä¸ªé“¾æ¥çš„ä½ç½®æ’å…¥\n\n\néšåç‚¹å‡»å®ƒï¼Œå°±èƒ½ç›´æ¥è·³è½¬åˆ°æŒ‡å®šçš„ç¬”è®°æœ¬é¡µé¢\nåœ¨å¤ä¹ å’ŒçŸ¥è¯†ç‚¹è”åŠ¨çš„æ—¶å€™éå¸¸æ–¹ä¾¿å®ç”¨\nOneNoteè¿˜æœ‰å…¶ä»–éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œæ¨èå¤§å®¶çœ‹è¿™ä¸ªè§†é¢‘å­¦ä¹ OneNoteçš„ç”¨æ³•ï¼Œåšå®¢é‡Œå°±ä¸å†å±•å¼€äº†\nå²·|ä½ ä¸å¾—ä¸çŸ¥é“çš„OneNoteåŠŸèƒ½|ç”µå­ç¬”è®°èƒ½æœ‰å¤šå¼ºï¼bilibili\néœ€ä¸éœ€è¦ä¸€ä¸ªipadæ¥è¾…åŠ©å­¦ä¹ ï¼Ÿæåˆ°ç”µå­ç¬”è®°ï¼Œå¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ°ç”¨å¹³æ¿æ¥åšç¬”è®°\nè¿™é‡Œæˆ‘çš„å»ºè®®æ˜¯\n-æœ‰ipadæˆ–å…¶ä»–å¹³æ¿çš„ç”¨æˆ·å¯ä»¥è´­å…¥å¹³æ›¿ç¬”å°è¯•\n\nä¸è¦ç›´æ¥ä¹°é«˜è´µçš„åŸè£…ç¬”ï¼Œå¯¹äºåšç¬”è®°æ¥è¯´æ— æµäºäº‹ï¼Œç‰¹åˆ«æ˜¯ipad\nå‘ç°ä¸åˆé€‚çš„æ—¶å€™ä½ æƒ³äºŒæ‰‹å‡ºoråƒç°å°±æ˜¯æµªè´¹é’±äº†ï¼Œå¹³æ›¿ç¬”90ä¸€æ”¯ä¸æƒ³ç”¨äº†ä¹Ÿå¯ä»¥ç•™ç€\næœ€å¥½åœ¨è´­å…¥ä¸ƒå¤©å†…ä½¿ç”¨å¹¶åˆ¤æ–­è¿™ç§æ–¹å¼é€‚ä¸é€‚åˆä½ ï¼Œè¿™æ ·ä¸é€‚åˆè¿˜èƒ½æ— ç†ç”±é€€äº†\n\n\nipadç”¨æˆ·æ¨èç›Šbæ€çš„5ä»£é’æ˜¥ç‰ˆå¹³æ›¿ç¬”ï¼Œ98ä¸€æ”¯ï¼ŒçœŸçš„ä¸æ˜¯å¹¿å‘Šï¼Œæˆ‘ä¸ªäººè§‰å¾—è¿˜è¡Œé¡ºä¾¿æä¸€å¥è€Œå·²ï¼\n\n-å¦‚æœä½ æ²¡æœ‰å¹³æ¿ï¼Œè¯·ä¸è¦ç»™è‡ªå·±åˆ›é€ éœ€æ±‚ç„¶åå–œåŠ ä¸€ï¼Œå› ä¸ºå¹³æ¿è”ç½‘æ¿€æ´»åå°±ä¸ç»™é€€è´§çš„ï¼\nåœ¨æˆ‘ä¸¤å‘¨çš„winç”µè„‘+å¹³æ¿åšç¬”è®°çš„å­¦ä¹ ä¸­ï¼Œæœ‰å¦‚ä¸‹é—®é¢˜éœ€è¦æ³¨æ„\n\nOneNoteåŒæ­¥éœ€è¦ä¸€å®šæ—¶é—´ï¼Œåœ¨ç”µè„‘æˆªå›¾åipadç«¯OneNoteåŒæ­¥è‡³å°‘20ç§’ã€‚æœåŠ¡å™¨æŠ½é£çš„è¯å°±ç¥è‡ªå·±å¥½è¿äº†\nåœ¨ipadåšç¬”è®°å¯èƒ½ä¼šè®©ä½ æ¼æ‰è€å¸ˆæ‰€è®²çŸ¥è¯†ç‚¹ï¼Œå› ä¸ºæ³¨æ„åŠ›ä¸åœ¨ç”µè„‘å±å¹•ä¸Šï¼Œå¯¼è‡´å›é€€è§†é¢‘\nè¯·ä¸è¦åœ¨ipadæ‰“å¼€ä½ çš„qqï¼Œä¸ç„¶å¯èƒ½åšç€åšç€å°±å»èŠå¤©äº†â€¦â€¦\n\nå½“æˆ‘å°è¯•ä¸¢æ‰å¹³æ¿ç›´æ¥ç”¨ç”µè„‘åšç¬”è®°çš„æ—¶å€™ï¼Œå‘ç°æ•ˆç‡ç›´çº¿ä¸Šå‡ï¼\næ‰€ä»¥è¯´ç”¨å¹³æ¿åšç¬”è®°ä¹Ÿæ˜¯æˆ‘è‡ªå·±ç»™è‡ªå·±åˆ›é€ çš„éœ€æ±‚ï¼ˆç¬‘å“­.jpgï¼‰\nå››ã€é™¤å·¥å…·ä»¥å¤–çš„å­¦ä¹ æ–¹æ³•ä¸Šè¿°ä¸‰ç‚¹éƒ½æ˜¯å›´ç»•å­¦ä¹ å·¥å…·æ¥å±•å¼€çš„ï¼Œç°åœ¨è¯´è¯´å…¶ä»–çš„ä¸€äº›ä¸ªäººç»éªŒ\n1.ä¸“å¿ƒè‡´å¿—ï¼Œä¸è¦è®©å…¶ä»–ä¸œè¥¿åˆ†å¿ƒç°åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬çš„èº«å¿ƒæ˜¯å¾ˆæ”¾æ¾çš„ï¼Œè‡ªå­¦cè¯­è¨€å…¶å®æ˜¯åœ¨ç»™æš‘å‡ç”Ÿæ´»çš„æœ«å°¾åŠ æ–™\nè¿™ç§æ”¾æ¾ä¼šè®©ä½ æˆ‘è§‰å¾—Cè¯­è¨€çš„å­¦ä¹ å¹¶ä¸æ˜¯ä»€ä¹ˆå¿…é¡»è¦åšçš„ã€éåšä¸å¯çš„äº‹æƒ…\næ‰€ä»¥æ‰‹æœºå°±ä¼šæˆä¸ºä½ å­¦ä¹ è·¯ä¸Šæœ€å¤§çš„é˜»ç¢â€¦â€¦ï¼ˆä»¥ä¸‹å‡ä¸ºæœ¬äººæƒ…å†µï¼Œè¯·å‹¿å¯¹å·å…¥åº§ï¼‰\n\næ¶ˆæ¯æ¥äº†çœ‹ä¸€çœ¼\n\nè¿™éƒ¨åˆ†å¥½åƒæˆ‘ä¼šï¼Œåˆ·ä¼šæ‰‹æœº\n\n\nè™½ç„¶æˆ‘çŸ¥é“è¿™ä¸‡ä¸‡ä¸å¯ï¼Œå¯å°±æ˜¯æ§åˆ¶ä¸ä½è‡ªå·±è¿™åŒæ‰‹\n\nå¥½å§ï¼Œæ—¢ç„¶æ‰“ä¸è¿‡ï¼Œé‚£æˆ‘ä»¬å°±è·‘å•Šï¼\næ‰‹æœºå…³é—­WiFiï¼Œæ”¾åœ¨ä½ ä¸èƒ½ç›´æ¥å¤Ÿåˆ°çš„åœ°æ–¹\nåŒæ ·çš„ï¼Œç”µè„‘ä¹Ÿä¸è¦ç™»å½•qqï¼Œwxï¼Œä¿æŒæ— çº¿ç”µé™é»˜ï¼Œä¸“å¿ƒçœ‹è§†é¢‘å­¦ä¹ \n\næˆ‘è§‰å¾—å’±ä»¬è¿™ä¸ªå¹´çºªåº”è¯¥æ²¡æœ‰éå›ä¸å¯çš„æ¶ˆæ¯ï¼Œçˆ¶æ¯æ‰¾è‡ªå·±å¤šåŠç›´æ¥æ‰“ç”µè¯\n\n2.å¤šç»ƒä¹ ï¼Œå¤šç»ƒä¹ ï¼Œå¤šç»ƒä¹ å­¦Cè¯­è¨€å’Œå­¦æ•°å­¦ä¸€æ ·ï¼Œä¸€å®šè¦å¤šåˆ·é¢˜ï¼ˆå†™ä»£ç ï¼‰\nåœ¨çœ‹è§†é¢‘çš„åŒæ—¶ï¼Œè·Ÿç€æ•™å­¦å†…å®¹è‡ªå·±å°è¯•ç€å†™å†™é‚£äº›ä»£ç \nåˆ«è§‰å¾—è§†é¢‘é‡Œéƒ½æ‰“äº†æ²¡å¿…è¦è‡ªå·±å†æ‰“ä¸€é\nå®é™…ä¸Šç…§ç€æ‰“éƒ½ä¼šæœ‰ä¸€å †é”™è¯¯â€¦â€¦\nä¹°äº†ä¹¦æœ¬çš„å°ä¼™ä¼´å¯ä»¥ç…§ç€ä¹¦æœ¬ä¸Šçš„ç¤ºä¾‹ä»£ç ç»ƒä¹ \nåœ¨ç»ƒä¹ çš„é€”ä¸­æ›´å®¹æ˜“å‘ç°è‡ªå·±çš„é—®é¢˜ï¼Œä»è€Œè·å–æ›´å¤šçŸ¥è¯†\n3.å¤ä¹ ï¼å‰é¢æåˆ°äº†åšç¬”è®°ä¹‹äº‹ï¼Œç¬”è®°æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ—¥åçš„å¤ä¹ ã€‚\nè¿™é‡Œå»ºè®®å¹³æ—¶å¤šå»çœ‹çœ‹è®°å½•ä¸‹æ¥çš„æ“ä½œç¬¦ã€å­—ç¬¦ç±»å‹ã€è½¬ä¹‰å­—ç¬¦ç­‰ç­‰æå…¶å®¹æ˜“é—å¿˜åˆç»å¸¸ç”¨çš„ä¸Šçš„çŸ¥è¯†ç‚¹\nä¸ç„¶æœ‰æ—¶å€™å°±çœŸçš„åªèƒ½çœ‹ç€ä»£ç è’™è”½\né‡åˆ°æ–°çš„å°çŸ¥è¯†ç‚¹çš„æ—¶å€™ä¹Ÿè¦åŠæ—¶å¯¹ç¬”è®°è¿›è¡Œè¡¥å……\n\nç»“è¯­ä»¥ä¸Šå°±æ˜¯æœ¬cè¯­è¨€åˆå­¦è€…+å‡†å¤§ä¸€åŒå¤§å®¶çš„å­¦ä¹ æ–¹æ³•çš„åˆ†äº«\nè¿™æ–¹æ³•å¯èƒ½ä¸é€‚åˆä½ ï¼Œæœ‰äº›æœ‹å‹å¯èƒ½æ›´åçˆ±çº¸ç¬”ç¬”è®°ï¼Œè¿™éƒ½æ˜¯OKçš„\nå­¦ä¹ æ–¹æ³•å„æœ‰å¼‚åŒï¼Œä½†æˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªä¸ºé€šå‘æœªæ¥å¤§é“è€ŒåŠªåŠ›çš„å¿ƒ\nè¿™å°±å¤Ÿäº†~\næ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œç‚¹èµ+å…³æ³¨å†èµ°å‘—ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€C++ã€‘å¿«é€Ÿå­¦ä¹ ç±»å’Œå¯¹è±¡ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†","url":"/2022/05/30/note_cpp/7%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A13_%E5%A4%A7%E4%BD%9C%E4%B8%9A/","content":"æœ¬ç¯‡åšå®¢æ˜¯å­¦æ ¡å¤§ä¸€ä¸‹C++æœŸæœ«è€ƒå¯Ÿçš„è¦æ±‚ï¼ŒåŒ…å«äº†C++ä¸­ç±»å’Œå¯¹è±¡çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œé€‚åˆå­¦ä¹ ç±»å’Œå¯¹è±¡çš„ä½ è§‚çœ‹ã€‚æœ€åè¿˜æœ‰ä¸¤ä¸ªå°é¡¹ç›®ï¼Œç»¼åˆäº†ç»å¤§éƒ¨åˆ†ç±»å’Œå¯¹è±¡çš„çŸ¥è¯†ï¼Œå¾ˆé€‚åˆç»ƒæ‰‹+æ·±åŒ–å­¦ä¹ ã€‚\n\n\nä¸ºäº†é¿å…è¢«åŒæ ¡copyï¼Œæœ¬ç¯‡åšå®¢åªåœ¨æˆ‘çš„HEXOä¸ªäººåšå®¢ä¸Šå‘å¸ƒ\nç¬¬ä¸€ç«  ç»ªè®º1.1 é¢å‘å¯¹è±¡ç¨‹åºç‰¹ç‚¹ä¸ç›®æ ‡é¢å‘å¯¹è±¡æœ‰ä¸‹é¢å‡ ä¸ªç‰¹å¾ï¼š\n\nç±»ä¸å¯¹è±¡ï¼šæŠŠç°å®ä¸–ç•Œä¸­çš„æŸä¸€ç±»ä¸œè¥¿ï¼Œæå–å‡ºæ¥ï¼Œç”¨ä»£ç è¡¨ç¤ºï¼›\nå°è£…æ€§ï¼šæŠŠè¿‡ç¨‹å’Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªåŒ…è£¹é‡Œé¢ï¼Œå¯¹æ•°æ®çš„è®¿é—®åªèƒ½é€šè¿‡å…¬å¼€æƒé™çš„å‡½æ•°æ¥å£æ¥è¿›è¡Œæ“ä½œï¼›\nç»§æ‰¿æ€§ï¼šä¸€ç§è”ç»“ç±»çš„å±‚æ¬¡æ¨¡å‹ï¼Œç±»ä¼¼æ ‘çŠ¶ç»“æ„ï¼›\nå¤šæ€æ€§ï¼šå…è®¸ä¸åŒç±»çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºå“åº”ï¼Œç”¨ä¸åŒçš„æ–¹æ³•æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚\n\né€šè¿‡è¿™äº›ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å¾—åˆ°ï¼Œå…¶å®é¢å‘å¯¹è±¡çš„ç¨‹åºä¹Ÿæ˜¯åœ¨Cè¯­è¨€çš„é¢å‘è¿‡ç¨‹çš„åŸºç¡€ä¸Šå¾—æ¥çš„ã€‚å…¶ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„æœåŠ¡æŸä¸€ä¸ªå…·ä½“çš„é—®é¢˜ï¼Œå¹¶é€šè¿‡è¿™ä¸ªé—®é¢˜è¡ç”Ÿå‡ºä¸åŒçš„è§£é¢˜æ–¹æ³•ï¼Œå¹¶ç”¨ä»£ç æ¥è¡¨ç¤ºè§£å†³ä¸€ä¸ªé—®é¢˜å¯¹è±¡çš„è¿‡ç¨‹ã€‚\n1.2 é¢å‘å¯¹è±¡ç¨‹åºçŸ¥è¯†æ¶æ„\n\nç¬¬äºŒç«  é¢å‘ç¨‹åºå¯¹è±¡å…³é”®æ”¯æ’‘æŠ€æœ¯2.1 ç±»å’Œå¯¹è±¡ç±»å’Œå¯¹è±¡ä¸å‘½åç©ºé—´ç±»ä¼¼ï¼Œéƒ½æ˜¯å­˜åœ¨ä¸€ç§å°è£…ã€‚ä¸åŒçš„æ˜¯ï¼Œç±»æ˜¯å¯¹Cè¯­è¨€structç»“æ„ä½“ç±»å‹çš„æ‹“ã€‚é™¤äº†å˜é‡ä»¥å¤–ï¼Œç±»é‡Œé¢è¿˜å¯ä»¥å®šä¹‰æˆå‘˜å‡½æ•°ï¼Œå¹¶è®¾ç½®å®ƒä»¬çš„æƒé™ï¼Œå®ç°äº†å¯¹ä¸€ä¸ªæ¥å£çš„å®Œæ•´å°è£…ã€‚\n2.1.1 æ„é€ å‡½æ•°ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œå½“æˆ‘ä»¬å†™Cè¯­è¨€çš„é¡ºåºè¡¨ã€é“¾è¡¨ç­‰ä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šå†™ä¸€ä¸ªInitå‡½æ•°æ¥åˆå§‹åŒ–å†…å®¹ã€‚\nvoid Init()&#123;\ta=(int*)malloc(sizeof(int)*4);\tsize=0;\tcapa=4;&#125;\n\nä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸å¤Ÿæ™ºèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚\näºæ˜¯C++å°±æ•´å‡ºæ¥äº†ä¸€ä¸ªæ„é€ å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nç‰¹æ€§\næ„é€ å‡½æ•°ï¼šåå­—å’Œç±»åç›¸åŒï¼Œåˆ›å»ºç±»å¯¹è±¡çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œåˆå§‹åŒ–ç±»ä¸­æˆå‘˜å˜é‡ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚æ„é€ å‡½æ•°åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­åªè°ƒç”¨ä¸€æ¬¡\næ„é€ å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹æ€§ï¼š\n\nå‡½æ•°åå’Œç±»åç›¸åŒ\næ— è¿”å›å€¼\næ„é€ å‡½æ•°å¯ä»¥é‡è½½\nå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„æ„é€ å‡½æ•°\nå¦‚æœä½ è‡ªå·±ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°\n\n2.1.1.1åŸºæœ¬ä½¿ç”¨ä¸‹é¢ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¼”ç¤ºä¸€ä¸‹æ„é€ å‡½æ•°\nclass Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºå¯¹è±¡q1çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨è°ƒç”¨äº†ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åˆå§‹åŒ–äº†è¿™ä¸ªé˜Ÿåˆ—\n\n\né™¤äº†ä¸Šé¢è¿™ç§æœ€åŸºæœ¬çš„æ— å‚æ„é€ å‡½æ•°ä»¥å¤–ï¼Œä¸€èˆ¬å†™æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šå¸¦ä¸€ä¸ªæœ‰ç¼ºçœå€¼çš„å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°çµæ´»ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—\nQueue(int Capacity=4)&#123;    _a=(int*)malloc(sizeof(int)*Capacity);    _size=0;    _capa=Capacity;&#125;\n\nè°ƒç”¨è¿™ç§æ„é€ å‡½æ•°ä¹Ÿæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°æ®ç±»å‹çš„é•¿åº¦ï¼Œæ¥åˆ›å»ºä¸åŒå®¹é‡çš„é˜Ÿåˆ—ï¼Œé¿å…å¤šæ¬¡reallocé€ æˆçš„å†…å­˜ç¢ç‰‡\nQueue q1;//è°ƒç”¨æ— å‚çš„æ„é€ å‡½æ•°Queue q2(100);//è°ƒç”¨å¸¦å‚çš„æ„é€ å‡½æ•°\n\nå¤šç§æ„é€ å‡½æ•°æ˜¯å¯ä»¥åŒæ—¶å­˜åœ¨çš„ï¼Œä¸è¿‡ï¼å®ƒä»¬éœ€è¦æ»¡è¶³å‡½æ•°é‡è½½çš„åŸºæœ¬è¦æ±‚\nå½“ä½ è°ƒç”¨ä¸€ä¸ªæ— å‚çš„å‡½æ•°ï¼Œå’Œä¸€ä¸ªå…¨ç¼ºçœçš„å‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ‡µé€¼ï¼\nQueue();Queue(int Capacity=4);//è¿™ä¸¤ä¸ªå‡½æ•°ä¸æ„æˆé‡è½½ï¼Œä¼šæŠ¥é”™\n\næ­£ç¡®çš„é‡è½½åº”è¯¥æ˜¯ä¸‹é¢çš„æƒ…å†µ\nQueue();Queue(int Capacity);\n\nç¼–è¯‘å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¼šæ™ºèƒ½é€‰æ‹©è¿™ä¸¤ä¸ªæ„é€ å‡½æ•°å…¶ä¸­ä¹‹ä¸€è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯åŒä¸€ä¸ªå¯¹è±¡åªä¼šè°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚\né™¤äº†åœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆå§‹åŒ–å‚æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œæ“ä½œ\nQueue(int Capacity=4)\t:_a(new int[Capacity]),    _size(0),    _capa(Capacity)&#123; &#125;\n\n2.1.1.2ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ä¸Šé¢æåˆ°è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€‚\nä½†æµ‹è¯•è¿‡ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªé»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œå¥½åƒå•¥äº‹éƒ½æ²¡æœ‰å¹²â€”â€”æˆ–è€…è¯´ï¼Œå®ƒæŠŠ_a _b _c éƒ½åˆå§‹åŒ–æˆäº†éšæœºå€¼ï¼\n\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹çš„\n\nå†…ç½®ç±»å‹ï¼šintã€charã€floatã€doubleâ€¦â€¦\nå¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹ï¼ˆå…¶ä»–çš„ç±»ï¼‰\n\nåœ¨å¤„ç†çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¿½ç•¥å†…ç½®ç±»å‹ï¼›å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\nclass Date&#123;public:    //é»˜è®¤æ„é€ å‡½æ•°ï¼šä¸ä¼ å‚å°±èƒ½è°ƒç”¨çš„    //1.å…¨ç¼ºçœ 2.æ— å‚ 3.ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ    //å¯ä»¥æ˜¯åŠç¼ºçœçš„ï¼Œä½†æ˜¯ä¸å®ç”¨    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;        _A.Print();    &#125;private:    //ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°ï¼ˆå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™çš„è¯ï¼‰    //è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šåˆå§‹åŒ–å†…ç½®ç±»å‹çš„    //å†…ç½®ç±»å‹ï¼šint,char,doubleç­‰ç­‰    int _year;    int _month;    int _day;    //å¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹    //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„é»˜è®¤æ„é€ å‡½æ•°    Queue _A;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨è°ƒç”¨äº†è‡ªå·±çš„æ„é€ å‡½æ•°çš„åŒæ—¶ï¼Œè¿˜è°ƒç”¨äº†å¤–ç½®ç±»å‹Queueçš„æ„é€ å‡½æ•°ï¼Œæå®šäº†å®ƒçš„åˆå§‹åŒ–\n\nå¦‚æœæˆ‘ä»¬å»æ‰Dateçš„æ„é€ å‡½æ•°ï¼Œå°±èƒ½çœ‹åˆ°ä¸‹é¢çš„æƒ…å†µã€‚QueueæˆåŠŸåˆå§‹åŒ–ï¼Œä½†æ˜¯å†…ç½®ç±»å‹çš„å¹´æœˆæ—¥éƒ½æ˜¯éšæœºå€¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªC++ç±»éƒ½éœ€è¦è‡ªå·±å†™æ„é€ å‡½æ•°ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæƒ…å†µé™¤å¤–\n\nç±»é‡Œé¢çš„æˆå‘˜éƒ½æ˜¯è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼ˆä¸”æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼‰\nå¦‚æœè¿˜æœ‰å†…ç½®ç±»å‹æˆå‘˜ï¼Œå£°æ˜æ—¶ç»™äº†ç¼ºçœå€¼\n\næ³¨ï¼šåªæœ‰ç±»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æ‰å¯ä»¥ç»™ç¼ºçœå€¼\n//ä¸‹é¢çš„æƒ…å†µå°±ä¸éœ€è¦å†™class MyStack&#123;private:      Queue q1;//è‡ªå®šä¹‰ç±»å‹      Queue q2;      int a=1;//å†…ç½®ç±»å‹å£°æ˜çš„æ—¶å€™ç»™äº†ç¼ºçœå€¼&#125;;\n2.1.1.3åˆå§‹åŒ–åˆ—è¡¨é™¤äº†ä¸Šé¢çš„æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ä¸ºåˆå§‹åŒ–åˆ—è¡¨\nDate(int year=2022,int month=2,int day=30)    :_year(year),\t_month(month),\t_day(day)&#123;&#125;\n\n\næ¯ä¸ªæˆå‘˜å˜é‡åªèƒ½åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å‡ºç°ä¸€æ¬¡\nç±»ä¸­åŒ…å«ä»¥ä¸‹æˆå‘˜å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–\nå¼•ç”¨\nconstæˆå‘˜\nè‡ªå®šä¹‰ç±»å‹æˆå‘˜\n\n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ã€‚å› ä¸ºå¯¹äºè‡ªå®šä¹‰ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œåˆå§‹åŒ–åˆ—è¡¨çš„ä¼˜å…ˆçº§æ˜¯é«˜äº&#123; &#125;é‡Œé¢çš„å†…å®¹çš„ã€‚\nè¿™é‡Œè¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼\næˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºå°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºï¼Œè€Œå¹¶éåˆå§‹åŒ–åˆ—è¡¨è‡ªå·±çš„é¡ºåºï¼\n\næ€ä¹ˆç†è§£å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(month)\t&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå³ä¾¿æˆ‘ä»¬æŠŠ_dayæ”¾åœ¨äº†åˆå§‹åŒ–åˆ—è¡¨çš„é¦–ä½ï¼Œä½†ç”±äºå®ƒæ˜¯åœ¨æœ€åå£°æ˜çš„ã€‚æ‰€ä»¥æ„é€ å‡½æ•°èµ°åˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œä¼šä¾æ®å£°æ˜é¡ºåºï¼Œä¾æ¬¡åˆå§‹åŒ–å¹´ã€æœˆã€æ—¥ã€‚\n\nè¿™ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Ÿå†æ¥çœ‹çœ‹ä¸€ä¸ªé”™è¯¯ç¤ºä¾‹\n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(_day)&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå½“æˆ‘ä»¬ç”¨ä¸Šé¢è¿™ä¸ªåˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ¬æ„æ˜¯æƒ³åœ¨åˆå§‹åŒ–å®Œ_dayä»¥åï¼Œå°†_dayçš„å€¼èµ‹ç»™_monthã€‚ä½†ç”±äº_monthçš„å£°æ˜é¡ºåºåœ¨_dayä¹‹å‰ï¼Œæ‰€ä»¥_month(_day)ä¼šå…ˆæ‰§è¡Œï¼Œæ­¤æ—¶çš„_dayå°šä¸ºéšæœºå€¼ï¼Œè¿™å°±å¯¼è‡´æœˆä»½å˜æˆéšæœºå€¼äº†ï¼\n\nè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šè‚¯å®šä¸ä¼šç”¨å¤©æ•°åˆå§‹åŒ–æœˆæ•°ï¼ŒèŒƒå›´ä¸ä¸€æ ·\n\næœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯å£°æ˜é¡ºåºå’Œåˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºä¿æŒä¸€è‡´ï¼\n2.1.1.4 explicitå…³é”®å­—æ„é€ å‡½æ•°ä¸ä»…å¯ä»¥æ„é€ ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œå¯¹äºå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œè¿˜å…·æœ‰éšå¼ç±»å‹è½¬æ¢çš„ä½œç”¨ã€‚\nclass Date&#123;public:    //æ­£å¸¸çš„æ„é€ å‡½æ•°    //Date(int year)    //    :_year(year)    //    &#123;&#125;\t    explicit Date(int year)        :_year(year)        &#123;&#125;private:    int _year;    int _month:    int _day;&#125;ï¼›void TestDate()&#123;    Date d1(2018);    // ç”¨ä¸€ä¸ªæ•´å½¢å˜é‡ç»™æ—¥æœŸç±»å‹å¯¹è±¡èµ‹å€¼    // å®é™…ç¼–è¯‘å™¨èƒŒåä¼šç”¨2019æ„é€ ä¸€ä¸ªæ— åå¯¹è±¡ï¼Œæœ€åç”¨æ— åå¯¹è±¡ç»™d1å¯¹è±¡è¿›è¡Œèµ‹å€¼    d1 = 2019;&#125;\n\nå½“æˆ‘ä»¬è°ƒç”¨èµ‹å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šå…ˆç”¨2019æ„é€ å‡ºä¸€ä¸ªdateç±»å‹å¯¹è±¡ï¼Œå†è°ƒç”¨èµ‹å€¼é‡è½½ï¼ˆè¿™é‡Œè¿˜æ²¡æœ‰å†™ï¼‰èµ‹å€¼ç»™d1ã€‚è¿™å°±æ˜¯ä¸€ä¸ªéšå¼ç±»å‹è½¬æ¢\nå¦‚æœæˆ‘ä»¬ç”¨explicitä¿®é¥°äº†è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œæ­¤ç±»éšå¼ç±»å‹è½¬æ¢ï¼\n\n2.1.2 æ‹·è´æ„é€ å‡½æ•°2.1.2.1ç‰¹æ€§å’Œä½¿ç”¨æ‹·è´æ„é€ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯å¦å¤–ä¸€ä¸ªDateç±»å‹ã€‚åœ¨ç”¨å·²æœ‰çš„ç±»ç±»å‹å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨\nå› ä¸ºæ‹·è´çš„æ—¶å€™æˆ‘ä»¬ä¸ä¼šä¿®æ”¹dçš„å†…å®¹ï¼Œæ‰€ä»¥ä¼ çš„æ˜¯constã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¿…é¡»è¿›è¡Œä¼ å¼•ç”¨è°ƒç”¨ï¼\nå¦‚ä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¼ å‚çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Dateçš„æ‹·è´æ„é€ \nvoid func(Date d);\n\nå¦‚æœä½ æ²¡æœ‰å†™æ‹·è´æ„é€ ï¼Œæˆ–è€…æ‹·è´æ„é€ é‡Œé¢ä¸æ˜¯ä¼ å¼•ç”¨ï¼Œç¼–è¯‘å™¨ä¼šå°±é€’å½’ä¸æ–­åˆ›å»ºæ–°çš„å¯¹è±¡è¿›è¡Œå€¼æ‹·è´æ„é€ ï¼Œç¨‹åºå°±æ­»å¾ªç¯è¾£\n//æ‹·è´æ„é€ ï¼Œå¦‚æœä¸å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª    //å¯¹å†…ç½®ç±»å‹è¿›è¡Œå€¼æ‹·è´(æµ…æ‹·è´)    Date(const Date&amp; d)    &#123;        _year=d._year;        _month=d._month;        _day=d._day;        //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„æ‹·è´æ„é€         Queue b(_A);    &#125;\n\nå’Œæ„é€ ã€ææ„ä¸åŒçš„æ˜¯ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ‹·è´æ„é€ ç»ˆäºæœ‰ç‚¹ç”¨äº†\n\nå®ƒä¼šå¯¹å†…ç½®ç±»å‹è¿›è¡ŒæŒ‰å†…å­˜å­˜å‚¨çš„å­—èŠ‚åºå®Œæˆæ‹·è´ï¼Œè¿™ç§ç§°ä¸ºå€¼æ‹·è´ï¼ˆåˆç§°æµ…æ‹·è´ï¼‰\nå¯¹å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\n\n2.1.2.2æ·±æ‹·è´å¤–ç½®ç±»å‹æ‹·è´é—®é¢˜\nä½†æ˜¯ï¼å¦‚æœä½ ä½¿ç”¨äº†å¤–ç½®ç±»å‹ï¼Œè¯¥ç±»å‹ä¸­åŒ…å«mallocçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°å°±ä¸èƒ½ç”¨è¾£ï¼\nå› ä¸ºè¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ ä¼šè¿›è¡Œå€¼æ‹·è´ï¼Œæ‹·è´å®Œäº†ä¹‹åï¼Œå°±ä¼šå‡ºç°q1å’Œq2æŒ‡å‘åŒä¸€ä¸ªç©ºé—´çš„æƒ…å†µã€‚ä¿®æ”¹q2ä¼šå½±å“q1ï¼Œfreeçš„æ—¶å€™å¤šæ¬¡é‡Šæ”¾åŒä¸€ä¸ªç©ºé—´ä¼šæŠ¥é”™ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„æ‹·è´æ„é€ çš„è¦æ±‚\n\næ³¨æ„æ³¨æ„ï¼Œmallocä¸è¡Œçš„åŸå› æ˜¯ï¼Œæ•°æ®æ˜¯å­˜åœ¨å †åŒºé‡Œé¢ï¼Œæ‹·è´çš„æ—¶å€™ï¼Œq2çš„_aå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè€Œä¸æ˜¯æ‹·è´äº†æ–°çš„æ•°æ®å†…å®¹ã€‚\n\nå¦‚æœä½ åœ¨ç±»é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªint arr[10]æ•°ç»„ï¼Œè¿™æ—¶å€™æ‹·è´æ„é€ å°±ç›¸å½“äºmemcpyï¼Œæ˜¯å¯ä»¥å®Œæˆæ‹·è´çš„å·¥ä½œçš„\nä½†æ˜¯mallocå’Œnewåˆ›é€ çš„ç©ºé—´æ˜¯åœ¨å †åŒºä¸Šçš„ï¼Œæ— æ³•ç›´æ¥æ‹·è´\n\nå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ·±æ‹·è´\n\näº†è§£newå’Œdelete\nä»Cè¯­è¨€è½¬åˆ°C++ï¼Œå¤šäº†newå’Œdeleteå…³é”®å­—ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”mallocå’Œfree\nint main()&#123;    int*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´    int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10    int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´    //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼        delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´    delete p2;//åŒä¸Š        //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„    delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„        return 0;&#125;\n\næ·±æ‹·è´å®ç°\nåœ¨ä¸Šé¢å†™é“è¿‡ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ï¼Œå®Œæˆå€¼æ‹·è´å·¥ä½œã€‚ä½†æ˜¯é˜Ÿåˆ—çš„ä»£ç é‡Œé¢åŒ…å«å †åŒºçš„ç©ºé—´ï¼Œéœ€è¦æˆ‘ä»¬æ­£ç¡®é‡Šæ”¾ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ å®Œæˆæ·±æ‹·è´\n//æ‹·è´æ„é€ Queue(const Queue&amp; q)&#123;    _a=new int[q._capa];//æ³¨æ„è§£å¼•ç”¨    memcpy(_a, q._a, q._capa*sizeof(int));//æ‹·è´å†…å®¹    _size=q._size;    _capa=q._capa;&#125;\n\nç”¨ä¸‹é¢è¿™ä¸ªé˜Ÿåˆ—çš„ä»£ç æ¥æµ‹è¯•æ·±æ‹·è´\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        //_a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;        _a=new int[_capa];        for(int i=0;i &lt; _capa;i++)        &#123;            _a[i]=i+1;        &#125;    &#125;    //æ‹·è´æ„é€     Queue(const Queue&amp; q)    &#123;        cout&lt;&lt;&quot;Queue Copy&quot;&lt;&lt;endl;        _a=new int[q._capa];        memcpy(_a, q._a, q._capa*sizeof(int));        _size=q._size;        _capa=q._capa;    &#125;    void Print()    &#123;        cout&lt;&lt;&quot;this:&quot;&lt;&lt;this&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;_a:&quot;&lt;&lt;_a&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;        for(int i=0;i &lt; _capa;i++)        &#123;            cout&lt;&lt;_a[i]&lt;&lt;&quot; &quot;;        &#125;        cout&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        //free(_a);        delete[] _a;        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;int main()&#123;     Queue q1;    q1.Print();    cout&lt;&lt;endl;    Queue q2=q1;     q2.Print();    cout&lt;&lt;endl;    return 0;&#125;\n\næ·±æ‹·è´æ•ˆæœ\nå…ˆæ³¨é‡Šæ‰Queueçš„æ‹·è´æ„é€ å‡½æ•°ææ„å‡½æ•°ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\nçœ‹ä¸€çœ‹ï¼Œå‘ç°åœ¨ä¸å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œq2å’Œq1çš„_aæŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€\n\nå–æ¶ˆææ„å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡é‡Šæ”¾åŒä¸€ç‰‡ç©ºé—´ï¼Œå‘ç”Ÿäº†æŠ¥é”™\n\nå¦‚æœæˆ‘ä»¬æŠŠå†™å¥½çš„æ·±æ‹·è´æ„é€ åŠ ä¸Šï¼Œå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\nå½“ä½ åŠ ä¸Šç»™_aé‡Œé¢åˆå§‹åŒ–ä¸€äº›æ•°æ®ï¼Œä»¥åŠæ‰“å°_aæ•°æ®çš„å‡½æ•°åï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…q2çš„_aæœ‰äº†è‡ªå·±å…¨æ–°çš„åœ°å€ï¼Œå…¶å†…éƒ¨çš„å€¼ä¹Ÿå’Œq1ä¸€æ ·äº†\n\nè¿™æ ·å†™å‡ºæ¥çš„æ‹·è´æ„é€ ï¼Œå³ä¾¿æŠŠé˜Ÿåˆ—ä¸­çš„int* _aä¿®æ”¹ä¸ºchar*æˆ–è€…å…¶ä»–ç±»å‹ï¼Œéƒ½èƒ½æ­£ç¡®å®Œæˆæ‹·è´å·¥ä½œ\n\n\n2.1.3 ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°ç›¸å¯¹åº”ï¼Œææ„å‡½æ•°æ˜¯å¯¹è±¡åœ¨å‡ºäº†ç”Ÿå‘½å‘¨æœŸåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨æ¥çˆ†ç ´å¯¹è±¡é‡Œçš„æˆå‘˜ï¼ˆå¦‚è¿›è¡Œfreeæ“ä½œï¼‰\nç”Ÿå‘½å‘¨æœŸæ˜¯ç¦»è¿™ä¸ªå¯¹è±¡æœ€è¿‘çš„&#123; &#125;æ‹¬å·\nç‰¹æ€§\n\nææ„å‡½æ•°åæ˜¯åœ¨ç±»åå‰åŠ ~\næ— å‚æ•°ï¼Œæ— è¿”å›å€¼\nä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°\nå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªææ„å‡½æ•°\n\nå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„ææ„å‡½æ•°ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹ï¼›ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„ææ„å‡½æ•°\nåŸºæœ¬ä½¿ç”¨\nææ„å‡½æ•°çš„å®šä¹‰å’Œæˆ‘ä»¬åœ¨å¤–éƒ¨å†™çš„Destroyå‡½æ•°ä¸€æ ·ï¼Œä¸»è¦æ‰§è¡Œfreeï¼ˆdeleteï¼‰æ“ä½œ\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        free(_a);        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;//æµ‹è¯•è°ƒç”¨    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå‡è®¾æˆ‘ä»¬åœ¨mainå‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ èƒ½è¯´å‡ºq1å’Œq2è°å…ˆè¿›è¡Œææ„å‡½æ•°çš„è°ƒç”¨å—ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…ˆè°ƒç”¨çš„æ˜¯q2çš„ææ„å‡½æ•°\n\nå› ä¸ºåœ¨åº•å±‚æ“ä½œä¸­ï¼Œç¼–è¯‘å™¨ä¼šç»™mainå‡½æ•°å¼€è¾Ÿæ ˆå¸§\næ ˆéµä»åè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œq2æ˜¯ååˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨ææ„çš„æ—¶å€™ä¼šå…ˆææ„\n\n2.2 é™æ€æˆå‘˜2.2.1 é™æ€æ•°æ®æˆå‘˜å’Œæ™®é€šçš„æˆå‘˜å˜é‡ä¸åŒï¼Œé™æ€æˆå‘˜å˜é‡ä¸å±äºæŸä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯å±äºæ•´ä¸€ä¸ªç±»\nclass A&#123;//å®šä¹‰ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡\tstatic int _a  &#125;;\n\nä¹Ÿå› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œé™æ€æˆå‘˜å˜é‡æ˜¯ä¸ä¼šè¢«sizeofè®¡å…¥çš„\nä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°é™æ€æˆå‘˜å˜é‡ï¼Ÿæ¯”å¦‚å½“æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªç±»ç©¶ç«Ÿå¼€è¾Ÿäº†å¤šå°‘ä¸ªå¯¹è±¡çš„æ—¶å€™ã€‚å¦‚æœä½¿ç”¨æ™®é€šæˆå‘˜å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡çš„ï¼Œæ— æ³•å®Œæˆæ­£ç¡®çš„countè®¡æ•°ã€‚ä½¿ç”¨é™æ€æˆå‘˜å˜é‡åï¼Œè¯¥å˜é‡çš„å€¼ä¸ä¼šå› ä¸ºå®šä¹‰å¤šä¸ªå¯¹è±¡è€Œè¢«é‡ç½®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°é‡Œé¢ï¼Œä½¿ç”¨count++ï¼Œæ¥å®ç°å¯¹ç±»å¼€è¾Ÿå¯¹è±¡ä¸ªæ•°çš„ç»Ÿè®¡ã€‚\nclass STU&#123;public:    STU()    &#123;        count++;        //...    &#125;    STU(const STU&amp; d)    &#123;        count++;        //...    &#125;\t//å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡\tstatic int count;  &#125;;int STU::count=0;//å¿…é¡»è¦åœ¨ç±»å¤–å®šä¹‰\n\nè¿™æ—¶å€™ï¼Œæ¯æ¬¡å¯¹è±¡åˆ›å»ºéƒ½ä¼šè®©conunt+1ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è®¿é—®æ¥å¾—åˆ°countçš„å€¼\n\né€šè¿‡æŒ‡å®šç±»åŸŸæ¥è®¿é—®ï¼ŒSTU::count\né€šè¿‡å¯¹è±¡æ¥è®¿é—®ï¼ŒSTU s1; s1.count;\n\nå¦‚æœæƒ³åœ¨ç±»å¤–ç›´æ¥è®¿é—®é™æ€æˆå‘˜å˜é‡ï¼Œå°±ä¸èƒ½ç”¨privateï¼Œå¿…é¡»æ˜¯å…¬æœ‰æƒé™\n\n2.2.2 é™æ€æˆå‘˜å‡½æ•°å¦‚æœæŠŠé™æ€æˆå‘˜å˜é‡å®šä¹‰ä¸ºå…¬æœ‰ï¼Œé‚£ä¹ˆå¤–éƒ¨çš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥é€šè¿‡ç±»åŸŸæˆ–è€…å¯¹è±¡æ¥è®¿é—®è¿™ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œè¿™æ—¶å€™å°±ä¸åˆ©äºæˆ‘ä»¬ç¨‹åºçš„å°è£…ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©é™æ€æˆå‘˜å‡½æ•°æ¥è®¿é—®ç§æœ‰çš„é™æ€æˆå‘˜å˜é‡\n#include &lt;iostream&gt;using namespace std;class STU&#123;public:    STU() &#123;        count++;    &#125;    STU(const STU&amp; d)&#123;        count++;    &#125;    static int GetCount() &#123;        return count;    &#125;private:    static int count;&#125;;int STU::count=0;int main()&#123;    STU s1;        cout&lt;&lt;&quot;é€šè¿‡å¯¹è±¡s1è®¿é—®    &quot;&lt;&lt;s1.GetCount()&lt;&lt;endl;    cout&lt;&lt;&quot;é€šè¿‡ç±»åŸŸSTU::è®¿é—® &quot;&lt;&lt;STU::GetCount()&lt;&lt;endl;        return 0;&#125;\n\né™æ€æˆå‘˜å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹\n\nç±»é™æ€æˆå‘˜å³å¯ç”¨ç±»å::é™æ€æˆå‘˜æˆ–è€…å¯¹è±¡.é™æ€æˆå‘˜æ¥è®¿é—®\né™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰éšè—çš„thisæŒ‡é’ˆï¼Œä¸èƒ½è®¿é—®ä»»ä½•éé™æ€æˆå‘˜\né™æ€æˆå‘˜å’Œç±»çš„æ™®é€šæˆå‘˜ä¸€æ ·ï¼Œä¹Ÿæœ‰publicã€protectedã€privateä¸‰ç§è®¿é—®çº§åˆ«\né™æ€æˆå‘˜å‡½æ•°å¯ä»¥å…·æœ‰è¿”å›å€¼\n\n\n2.3 å¸¸æˆå‘˜2.3.1 å¸¸æ•°æ®æˆå‘˜æœ‰ä¸€éƒ¨åˆ†æ•°æ®æˆå‘˜ï¼Œæ˜¯ä¸€ä¸ªå®šå€¼ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†æŸä¸€ä¸ªå­¦ç§‘çš„ç±»class MATH\nclass MATH&#123;  int piont=6.0;//æ•°å­¦çš„å­¦åˆ†  &#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä½œä¸ºä¸€ä¸ªå­¦ç§‘ï¼Œå®ƒçš„è€ƒè¯•å­¦åˆ†&#x2F;ç»©ç‚¹æ˜¯å›ºå®šçš„ã€‚è¿™æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦åœ¨åç»­ä¿®æ”¹è¿™ä¸ªå­¦åˆ†çš„å®šä¹‰ï¼Œå°±å¯ä»¥å°†å®ƒè®¾ç½®ä¸ºconstå±æ€§ï¼Œé¿å…è¢«å…¶ä»–æˆå‘˜è¯¯ä¿®æ”¹\nclass MATH&#123;  const int piont=6.0;//æ•°å­¦çš„å­¦åˆ†  &#125;;\n\nå’Œæ™®é€šæˆå‘˜å’Œé™æ€æˆå‘˜å˜é‡ä¸åŒçš„æ˜¯\n\nå¸¸æˆå‘˜å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–\nå¸¸æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»å¤–å®šä¹‰\nå¸¸æˆå‘˜å˜é‡åªèƒ½åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µè¿›è¡Œå®šä¹‰\n\nclass MATH&#123;public:    MATH()        :score(6.0)//åˆå§‹åŒ–åˆ—è¡¨å¤„å®šä¹‰    &#123;        cout&lt;&lt;score&lt;&lt;endl;//æ‰“å°æµ‹è¯•    &#125;private:    const double score=0;//å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™å®šä¹‰åˆå€¼&#125;;\n\n2.3.2 å¸¸æˆå‘˜å‡½æ•°constä¿®é¥°çš„ç±»æˆå‘˜å‡½æ•°ç§°ä¹‹ä¸ºconstæˆå‘˜å‡½æ•°ï¼Œå³å¸¸æˆå‘˜å‡½æ•°ã€‚constä¿®é¥°ç±»æˆå‘˜å‡½æ•°ï¼Œå®é™…ä¿®é¥°çš„æ˜¯è¯¥æˆå‘˜å‡½æ•°éšå«çš„thisæŒ‡é’ˆï¼Œè¡¨æ˜åœ¨è¯¥æˆå‘˜å‡½æ•°ä¸­ä¸èƒ½å¯¹ç±»çš„ä»»ä½•æˆå‘˜è¿›è¡Œä¿®æ”¹ã€‚\nåŸºæœ¬çš„ä¿®é¥°æ–¹æ³•å¦‚ä¸‹ï¼Œåœ¨å‡½æ•°çš„æ‹¬å·ååŠ constå³å¯\nvoid Print()const&#123;\tcout&lt;&lt;_year&lt;&lt;endl;&#125;\n\nå®é™…ä¿®é¥°çš„æ˜¯è¯¥å‡½æ•°éšå«çš„thisæŒ‡é’ˆ\nthisæŒ‡é’ˆæœ¬èº«æ˜¯Date*constç±»å‹çš„ï¼Œä¿®é¥°åå˜ä¸ºconst Date* constç±»å‹\nvoid Print(const Date* const this)&#123;\tcout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;&#125;\n\n2.3.2.1 å®ä¾‹-æƒé™é—®é¢˜è¿™ä¹ˆè¯´å¥½åƒæœ‰ç‚¹è¿·ç³Šï¼Œæˆ‘ä»¬ç”¨å®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦constä¿®é¥°æˆå‘˜å‡½æ•°\nclass Date&#123;public:    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;    &#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­è°ƒç”¨Printå‡½æ•°ï¼Œåœ¨mainä¸­æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„\nint main()&#123;\tDate d1(2022,5,10);    d1.Print();    return 0;&#125;\n\nä½†å½“ä½ ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œçš„æ—¶å€™ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†\nvoid TEST(const Date&amp; d)&#123;\td.Print();//d.Print(&amp;d) --&gt;const Date*&#125;int main()&#123;\tDate d1(2022,5,10);    d1.Print();//d1.Print(&amp;d1) --&gt;Date*    TEST(d1);        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬è¿›è¡Œäº†å¼•ç”¨è°ƒç”¨ï¼Œå› ä¸ºåœ¨TESTä¸­æˆ‘ä»¬ä¸ä¼šä¿®æ”¹d1çš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨constè¿›è¡Œäº†ä¿®é¥°\n\nè¿™æ—¶å€™TESTä¸­çš„d.Print()å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯const Date*æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nmainä¸­çš„d1.Print();å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯Date*æŒ‡é’ˆ\n\näºæ˜¯å°±ä¼šå‘ç”Ÿæƒé™å†²çªé—®é¢˜ï¼š\n\nè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°åé¢åŠ äº†constï¼Œå°±å¯ä»¥é¿å…æ­¤ç§æƒé™æ”¾å¤§é—®é¢˜ã€‚è¿™æ ·ä¸ç®¡æ˜¯mainå‡½æ•°è¿˜æ˜¯TESTå‡½æ•°ä¸­å¯¹Print()å‡½æ•°çš„è°ƒç”¨ï¼Œå°±éƒ½å¯ä»¥æ­£å¸¸æ‰“å°äº†ï¼\næ€»ç»“ä¸€ä¸‹ï¼š\n\nconstå¯¹è±¡ä¸å¯ä»¥è°ƒç”¨éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstå¯¹è±¡å¯ä»¥è°ƒç”¨constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\nconstæˆå‘˜å‡½æ•°å†…ä¸å¯ä»¥è°ƒç”¨å…¶ä»–éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstæˆå‘˜å‡½æ•°å¯ä»¥ç‹¬è°ƒç”¨å…¶ä»–constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\n\n2.3.2.2 ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ï¼Ÿä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\nthisæŒ‡é’ˆæœ¬èº«å°±æ˜¯ç±»å‹å* constç±»å‹çš„ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ã€‚åŠ ä¸Šconstä¹‹åï¼ŒthisæŒ‡å‘çš„å†…å®¹ï¼Œæ—¢ç±»é‡Œé¢çš„æˆå‘˜å˜é‡ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚\nçŸ¥é“äº†è¿™ä¸€ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥åˆç†çš„åˆ¤æ–­å‡ºï¼šåªè¦æ˜¯éœ€è¦ä¿®æ”¹ç±»ä¸­æˆå‘˜å˜é‡çš„å‡½æ•°ï¼Œå°±ä¸éœ€è¦åœ¨()åé¢åŠ constä¿®é¥°\nå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡ï¼Œå°±å¯ä»¥åŠ constè¿›è¡Œä¿®é¥°\næ³¨æ„ï¼šå¦‚æœä½ ç”¨äº†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„å†™æ³•ï¼Œé‚£ä¹ˆå£°æ˜å’Œå®šä¹‰çš„å‡½æ•°éƒ½éœ€è¦åŠ ä¸Šconstä¿®é¥°\n2.3.2.3 å‡ºé”™æƒ…å†µè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æé†’çš„æ˜¯ï¼Œå¦‚æœä½ å¯¹æŸä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†constä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°é‡Œé¢åŒ…å«çš„å…¶ä»–ç±»é‡Œé¢çš„å‡½æ•°ï¼Œéƒ½éœ€è¦è¿›è¡Œconstä¿®é¥°ã€‚ä¸ç„¶å°±ä¼šæŠ¥é”™\n\nå‡ºç°è¯¥æŠ¥é”™çš„æƒ…å†µå¦‚ä¸‹\n\nè¿™ä¸ªæƒ…å†µä¹Ÿæé†’æˆ‘ä»¬ï¼Œä¸èƒ½åœ¨constä¿®é¥°çš„å‡½æ•°ä¸­ï¼Œè°ƒç”¨éconstä¿®é¥°çš„æˆå‘˜å‡½æ•°\n\n2.4 å¸¸å¯¹è±¡å’Œå¸¸å¼•ç”¨2.4.1 å¸¸å¯¹è±¡å¯ä»¥ç”¨constæ¥ä¿®é¥°ä¸€ä¸ªå¯¹è±¡ï¼Œç§°ä¸ºå¸¸å¯¹è±¡\nconst &lt;classname&gt; s1;&lt;classname&gt; const s1;\n\nåœ¨åˆå§‹åŒ–è®¾ç½®å®Œå¸¸å¯¹è±¡åï¼Œè¯¥å¯¹è±¡çš„å†…å®¹å°±ä¸èƒ½è¿›è¡Œä¿®æ”¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥è®¿é—®å†…éƒ¨è¢«constä¿®é¥°çš„å‡½æ•°ï¼Œä¸”åªèƒ½è°ƒç”¨ç±»çš„ const æˆå‘˜ï¼ˆåŒ…æ‹¬ const æˆå‘˜å˜é‡å’Œ const æˆå‘˜å‡½æ•°ï¼‰\n\nå¸¸å¯¹è±¡è°ƒç”¨éconstä¿®é¥°å‡½æ•°ä¼šæŠ¥é”™\nä¸èƒ½ä¿®æ”¹å¸¸å¯¹è±¡ä¸­æˆå‘˜å˜é‡çš„å€¼\n\nconst STU s1(&quot;å°æ˜&quot;, 15, 90.6);\n\nå¦‚æœä½ æƒ³åœ¨å®šä¹‰constå¯¹è±¡åä¾æ—§å¯ä»¥ä¿®æ”¹æŸä¸€ä¸ªæˆå‘˜å˜é‡çš„å€¼ï¼Œå¯ä»¥ç”¨mutableæ¥ä¿®é¥°è¯¥æˆå‘˜å˜é‡ï¼Œè¿™æ ·ä¾æ—§å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼\nclass STU&#123;    mutable char *m_name;//mutableä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œåœ¨constå¯¹è±¡ä¸­ä»ç„¶å¯ä»¥è¢«ä¿®æ”¹    int m_age;    float m_score;&#125;;\n\nå¦‚ä¸Šé¢çš„nameå˜é‡ï¼Œå³ä¾¿å®šä¹‰äº†constå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å¯¹å®ƒè¿›è¡Œä¿®æ”¹\n\n\n2.4.2 å¸¸å¼•ç”¨2.4.2.1 å¼•ç”¨åŸºæœ¬å½¢å¼å¼•ç”¨çš„åŸºæœ¬æ–¹å¼å¦‚ä¸‹\nint a=10;int&amp; b=a;int&amp; c=a;//åŒä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªåˆ«å//å¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ª//ä½†æ˜¯å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\næ­¤æ—¶çš„bå’Œcéƒ½æ˜¯açš„åˆ«åï¼Œæ³¨æ„æ˜¯åˆ«åï¼\n  \nå¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ªå˜é‡ï¼Œè€Œä¸”å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\nä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªå¼•ç”¨\næŒ‡é’ˆå¯ä»¥æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œå¼•ç”¨ä¸å¯ä»¥\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼Œä¸å¯ä»¥int&amp; b;\n\n\næ¯”å¦‚ä½ å«æåï¼Œæœ‰äººå«ä½ â€œå°æâ€ï¼Œè¿˜æœ‰äººå«ä½ â€œè‹±è¯­ä½œæ–‡äººâ€ï¼Œè¿™ä¸¤ä¸ªå¤–å·éƒ½æ˜¯ä½ çš„åˆ«åã€‚æŒ‡é’ˆå¹¶ä¸æ˜¯åˆ«åï¼ŒæŒ‡é’ˆæ˜¯é€šè¿‡åœ°å€è®¿é—®æŸä¸ªå˜é‡ã€‚è€Œå¼•ç”¨æ˜¯ç»™aå˜é‡èµ·å¦å¤–çš„ä¸¤ä¸ªåå­—ï¼Œå®é™…ä¸Šbå’Œcéƒ½å¯ä»¥å½“ä½œaæ¥ä½¿ç”¨\nç¼–è¯‘è¿è¡Œä»£ç ï¼Œè®©ç¼–è¯‘å™¨æ‰“å°å‡ºè¿™ä¸‰è€…çš„åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±æ˜¯åŒä¸€ä¸ªå˜é‡çš„ä¸åŒåå­—ã€‚\n\næŒ‡é’ˆå˜é‡çš„åœ°å€å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘å¯¹è±¡çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œå¼•ç”¨çš„ç±»å‹å¿…é¡»å’Œå¼•ç”¨å®ä½“çš„ç±»å‹ç›¸åŒï¼Œä¸èƒ½ç”¨int&amp;å¼•ç”¨doubleç±»å‹\n\n\n2.4.2.2 å¼•ç”¨çš„æƒé™é—®é¢˜constå¸¸é‡\nå¼•ç”¨å¯ä»¥å¼•ç”¨å¸¸é‡ï¼Œä½†æ˜¯å¿…é¡»åŠ constä¿®é¥°\n\nåŸºæœ¬çš„æ€è·¯å°±æ˜¯â€œæƒé™å¯ä»¥ç¼©å°ï¼Œä½†ä¸å¯ä»¥æ”¾å¤§â€ã€‚\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œaæ˜¯ä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„å˜é‡ï¼Œä½†æ˜¯const int&amp;d=a;ä¸­çš„dæ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œåªå¯è¯»å–açš„å†…å®¹ã€‚\neæ˜¯ä¸å¯ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥æ”¾å¤§æƒé™\n\nintå’Œdoubleç›¸äº’å¼•ç”¨\nåœ¨1.1ä¸­æœ‰æåˆ°ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥å¼•ç”¨doubleç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleï¼Œæ­¤æ—¶å¼•ç”¨å°±ä¸æ˜¯ç®€å•çš„ä¸€ä¸ªåˆ«åäº†ã€‚\nå…ˆæ¥äº†è§£ä¸€ä¸‹æŠŠdoubleå¤åˆ¶ç»™intç±»å‹ï¼Œè¿™æ—¶å€™ä¼šäº§ç”Ÿâ€œéšå¼ç±»å‹è½¬æ¢â€ï¼Œhä¿å­˜çš„æ˜¯zçš„æ•´æ•°éƒ¨åˆ†\n\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾zçš„æ•´æ•°éƒ¨åˆ†ï¼Œç„¶åèµ‹å€¼ç»™h\n\nä¸´æ—¶å˜é‡å…·æœ‰â€œå¸¸æ€§â€ï¼Œå¯è¯»ä¸å¯æ”¹\n\nè€Œå½“æˆ‘ä»¬ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleæ—¶ï¼Œå®é™…ä¸Šå¼•ç”¨çš„æ˜¯ç¼–è¯‘å™¨äº§ç”Ÿçš„ä¸´æ—¶å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨const int&amp;æ¥å¼•ç”¨\nconst int&amp; i=z;//è¿™é‡Œçš„iæ˜¯ä¸´æ—¶å˜é‡çš„åˆ«å//åœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾dçš„æ•´æ•°éƒ¨åˆ†//içš„åœ°å€å’Œzä¸ç›¸åŒï¼Œä¸”ä¸´æ—¶å˜é‡ä¸ä¼šé”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå’ŒiåŒæ­¥//ç”Ÿæˆçš„è¿™ä¸ªä¸´æ—¶å˜é‡æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥içš„æœ¬è´¨æ˜¯å¼•ç”¨äº†ä¸€ä¸ªintç±»å‹cout &lt;&lt;&quot;i= &quot;&lt;&lt;i&lt;&lt;endl;cout &lt;&lt;&quot;&amp;i= &quot;&lt;&lt; &amp;i &lt;&lt;endl; cout &lt;&lt;&quot;&amp;z= &quot;&lt;&lt; &amp;z &lt;&lt;endl;//åœ¨c++ä¸­å‡½æ•°ä¸»è¦ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œåé¢ä¼šè¿›ä¸€æ­¥å­¦ä¹ \n\nä¸€ä¸ªéå¸¸ç›´è§‚çš„éªŒè¯æ–¹æ³•ï¼Œå°±æ˜¯æ‰“å°ä¸€ä¸‹ï¼Œç…ç…å®ƒä»¬çš„åœ°å€æ˜¯å¦ç›¸åŒã€‚å¯ä»¥çœ‹åˆ°ï¼Œiçš„å€¼å’Œhæ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„å°±æ˜¯é‚£ä¸ªå­˜æ”¾äº†æ•´æ•°éƒ¨åˆ†çš„ä¸´æ—¶å˜é‡ï¼Œè¿™ä¸ªä¸´æ—¶å˜é‡çš„åœ°å€å’Œzä¸åŒ\n\n2.5 thisæŒ‡é’ˆåŠå·¥ä½œåŸç†2.5.1 ç‰¹ç‚¹å½“ä½ ç”¨åŒæ ·çš„å›¾çº¸å»ºäº†å¾ˆå¤šä¸ªå±‹å­åï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡åº”è¯¥å¦‚ä½•åŒºåˆ†å®ƒä»¬å‘¢ï¼Ÿ\nC++åœ¨è®¾è®¡è¿™éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ªthisæŒ‡é’ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šC++ç¼–è¯‘å™¨ç»™æ¯ä¸ªâ€œéé™æ€çš„æˆå‘˜å‡½æ•°â€œå¢åŠ äº†ä¸€ä¸ªéšè—çš„æŒ‡é’ˆå‚ æ•°ï¼Œè®©è¯¥æŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡(å‡½æ•°è¿è¡Œæ—¶è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡)ï¼Œåœ¨å‡½æ•°ä½“ä¸­æ‰€æœ‰æˆå‘˜å˜é‡çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡è¯¥æŒ‡é’ˆå»è®¿é—®ã€‚åªä¸è¿‡æ‰€æœ‰çš„æ“ä½œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œå³ç”¨æˆ·ä¸éœ€è¦æ¥ä¼ é€’ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆã€‚\n\nthisæŒ‡é’ˆçš„ç±»å‹ï¼šç±»å* const \nåªèƒ½åœ¨â€œæˆå‘˜å‡½æ•°â€çš„å†…éƒ¨ä½¿ç”¨ \nthisæŒ‡é’ˆæœ¬è´¨ä¸Šå…¶å®æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„å½¢å‚ï¼Œæ˜¯å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œå°†å¯¹è±¡åœ°å€ä½œä¸ºå®å‚ä¼ é€’ç»™this å½¢å‚ã€‚æ‰€ä»¥å¯¹è±¡ä¸­ä¸å­˜å‚¨thisæŒ‡é’ˆã€‚ \nthisæŒ‡é’ˆæ˜¯æˆå‘˜å‡½æ•°ç¬¬ä¸€ä¸ªéšå«çš„æŒ‡é’ˆå½¢å‚ï¼Œä¸€èˆ¬æƒ…å†µç”±ç¼–è¯‘å™¨é€šè¿‡ecxå¯„å­˜å™¨è‡ªåŠ¨ä¼ é€’ï¼Œä¸éœ€è¦ç”¨æˆ·ä¼ é€’\n\n2.5.2 æ˜¾å¼ä½¿ç”¨thiså°±ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸¾ä¾‹\nvoid Print()&#123;\tcout&lt;&lt;_name&lt;&lt;endl;\tcout&lt;&lt;_sex &lt;&lt;endl;&#125;\n\nå®é™…ä¸Šï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç†ã€‚å› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å®Œæ•´çš„åŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚\nvoid Print(Student*const this)&#123;\tcout&lt;&lt;this-&gt;_name&lt;&lt;endl;\tcout&lt;&lt;this-&gt;_sex &lt;&lt;endl;&#125;\n\nè¿›ä¸€æ­¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£thisæŒ‡é’ˆ\nbool operator==(const Date&amp; d)&#123;       return _year == d._year           &amp;&amp; _month== d._month           &amp;&amp; _day == d._day;&#125;\n\nè¿™æ˜¯ä¸€ä¸ªæ—¥æœŸçš„æ¯”è¾ƒå‡½æ•°ï¼Œæ˜¯æ“ä½œç¬¦é‡è½½ï¼ˆåé¢ä¼šè®²åˆ°ï¼‰ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªDateç±»å‹çš„å¼•ç”¨ï¼Œè¿™æ˜¯åŒºåˆ«äºthisçš„å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚\nå¦‚æœæ²¡æœ‰thisï¼Œé‚£å°±å¾ˆéš¾åŒºåˆ†ä¸¤ä¸ªå˜é‡çš„_yearï¼Œäºæ˜¯ç¼–è¯‘å™¨ä¼šæŠŠå®ƒä¼˜åŒ–æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¸ä¼šå­˜åœ¨æ— æ³•åŒºåˆ†çš„é—®é¢˜äº†\nbool operator==(Date*const this,const Date&amp; d)&#123;       return this-&gt;_year == d._year           &amp;&amp; this-&gt;_month== d._month           &amp;&amp; this-&gt;_day == d._day;&#125;\n\n2.5.3 ç©ºæŒ‡é’ˆé—®é¢˜åœ¨ç¨‹åºä¸­ï¼Œè®¿é—®NULLä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è§£å¼•ç”¨Nullä¼šæŠ¥é”™\n#include&lt;iostream&gt;using namespace std;class ta&#123;public:    void Print()    &#123;        cout&lt;&lt;&quot;print ta&quot;&lt;&lt;endl;        //cout&lt;&lt;_a&lt;&lt;endl;//err    &#125;private:    int _a;&#125;;int main()&#123;    ta* p=nullptr;    p-&gt;Print();   //å¯ä»¥å»è®¿é—®ç©ºæŒ‡é’ˆçš„å‡½æ•°   //å› ä¸ºå‡½æ•°åªæ˜¯å»è°ƒç”¨äº†ç±»é‡Œé¢çš„Printå‡½æ•°   //åŒæ—¶ä¼ äº†ä¸€ä¸ªpçš„thisæŒ‡é’ˆï¼ˆç©ºæŒ‡é’ˆä¼ å‚æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼‰   //ä½†æ˜¯å¦‚æœä½ å»è®¿é—®pé‡Œé¢_aå˜é‡ï¼Œå°±ä¼šæŠ¥è¿è¡Œé”™è¯¯    return 0;&#125;\n\n2.6 ç±»é—´å…³ç³»2.6.1  å‹å…ƒå…³ç³»å‹å…ƒåˆ†ä¸ºå‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»ã€‚å‹å…ƒæä¾›äº†ä¸€ç§çªç ´å°è£…çš„æ–¹å¼ï¼Œæœ‰æ—¶æä¾›äº†ä¾¿åˆ©ã€‚ä½†æ˜¯å‹å…ƒä¼šå¢åŠ è€¦åˆåº¦ï¼Œç ´åäº†å°è£…ï¼Œæ‰€ä»¥å‹å…ƒä¸å®œå¤šç”¨ã€‚\n2.6.1.1 å‹å…ƒå‡½æ•°å‹å…ƒå‡½æ•°ç›¸å½“äºè¿™ä¸ªç±»çš„å¥½æœ‹å‹ï¼Œå®ƒå¹¶ä¸æ˜¯ç±»çš„æˆå‘˜å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®è¿™ä¸ªç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œå®ƒæ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„æ™®é€šå‡½æ•°ï¼Œä¸å±äºä»»ä½•ç±»ï¼Œä½†éœ€è¦åœ¨ç±»çš„å†…éƒ¨æ˜ï¼Œå£°æ˜æ—¶éœ€è¦åŠ friendå…³é”®å­—ã€‚\nclass DATE&#123; // å‹å…ƒå‡½æ•°friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Date&amp; d);                                      friend std::istream&amp; operator&gt;&gt;(std::istream&amp; in, Date&amp; d);&#125;;\n\nä»¥&lt;&lt;å’Œ&gt;&gt;æ“ä½œç¬¦é‡è½½ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ç±»é‡Œé¢å®šä¹‰çš„è¯ï¼Œä½¿ç”¨è¿™ä¸ªé‡è½½çš„æ–¹å¼å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·\nDATE d1;d1&lt;&lt;cout;d1&gt;&gt;cin;\n\nå› ä¸ºå¯¹äºåŒç›®æ“ä½œç¬¦ï¼Œé‡è½½çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ˜¯å°†ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ“ä½œç¬¦çš„å·¦å€¼çš„ã€‚åœ¨ç±»é‡Œé¢å®šä¹‰æ—¶ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯éšå«çš„thisæŒ‡é’ˆã€‚å³å¿…é¡»ç”¨å¯¹è±¡åä½œä¸ºå·¦æ“ä½œæ•°æ¥è¿›è¡Œä½¿ç”¨ã€‚è¿™æ ·è™½ç„¶ä¹Ÿèƒ½å®Œæˆæ—¢å®šä»»åŠ¡ï¼Œä½†è¿™ä¸ªä½¿ç”¨æ–¹å¼æœªå…å¤ªè¿‡å¥‡è‘©äº†ã€‚\nå®šä¹‰ä¸ºå‹å…ƒåï¼Œæ²¡æœ‰éšå«çš„thisæŒ‡é’ˆï¼Œå°±å¯ä»¥ä½¿ç”¨cout&lt;&lt;d1è¿™ç§æ­£å¸¸çš„æ–¹å¼æ¥è°ƒç”¨è¿™ä¸ªæ“ä½œç¬¦é‡è½½äº†\n\nä¸€ä¸ªå‡½æ•°å¯ä»¥æ˜¯å¤šä¸ªç±»çš„å‹å…ƒå‡½æ•°\nå‹å…ƒå‡½æ•°ä¸èƒ½ç”¨constä¿®é¥°\nå‹å…ƒå‡½æ•°å¯ä»¥åœ¨ç±»å®šä¹‰çš„ä»»ä½•åœ°æ–¹å£°æ˜ï¼Œä¸å—ç±»è®¿é—®é™å®šç¬¦é™åˆ¶\nå‹å…ƒå‡½æ•°çš„è°ƒç”¨ä¸æ™®é€šå‡½æ•°çš„è°ƒç”¨å’ŒåŸç†ç›¸åŒ\n\n\n2.6.1.2 å‹å…ƒç±»å‹å…ƒç±»çš„æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å‹å…ƒå‡½æ•°ï¼Œéƒ½å¯ä»¥è®¿é—®å¦ä¸€ä¸ªç±»ä¸­çš„éå…¬æœ‰æˆå‘˜ã€‚ \n\nå‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸å…·æœ‰äº¤æ¢æ€§ï¼šæ¯”å¦‚æœ‰Aç±»å’ŒBç±»ï¼Œåœ¨Aç±»ä¸­å£°æ˜Bç±»ä¸ºå…¶å‹å…ƒç±»ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨Bç±»ä¸­ç›´æ¥è®¿é—®Aç±»çš„ç§æœ‰æˆå‘˜å˜é‡ï¼Œä½†æƒ³åœ¨Aç±»ä¸­è®¿é—®Bç±»ä¸­ç§æœ‰çš„æˆå‘˜å˜é‡åˆ™ä¸è¡Œã€‚ \nå‹å…ƒå…³ç³»ä¸èƒ½ä¼ é€’ï¼šå¦‚æœBæ˜¯Açš„å‹å…ƒï¼ŒCæ˜¯Bçš„å‹å…ƒï¼Œåˆ™ä¸èƒ½è¯´æ˜Cæ—¶Açš„å‹å…ƒã€‚\n\nclass B;//å‰ç½®å£°æ˜class A&#123;\t//å£°æ˜å‹å…ƒç±»\tfriend class B;    private:    int _n;&#125;;class B&#123;public:    //å¯ä»¥åœ¨ç±»é‡Œé¢é€šè¿‡å¯¹è±¡è®¿é—®Açš„éå…¬æœ‰æˆå‘˜\tvoid Print()    &#123;        cout&lt;&lt;_a1._n&lt;&lt;endl;    &#125;private:    A _a1;&#125;;\n\n2.6.2 æ•´ä½“éƒ¨åˆ†å…³ç³»2.6.2.1 å†…åµŒå¯¹è±¡å†…åµŒå¯¹è±¡ï¼šåœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡\nåœ¨ä¸€äº›åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¼šéœ€è¦åœ¨ä¸€ä¸ªç±»é‡Œé¢å®šä¹‰å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚å¦‚ä¸‹é¢è¿™é“OJé¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªé˜Ÿåˆ—çš„ç±»æ¥å®ç°è¿™é‡Œçš„MyStackã€‚\n\nclass Queue&#123;  //é˜Ÿåˆ—çš„å®ç° &#125;;class MyStack &#123;public:    MyStack() &#123;    &#125;   //.....private:\tQueue q1;     Queue q2;&#125;;\n\nå¯¹äºå†…éƒ¨å¯¹è±¡Queueï¼Œéœ€è¦æ³¨æ„çš„æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nå†…éƒ¨å¯¹è±¡å±äºå¤–ç½®ç±»å‹ï¼Œåœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Queueçš„æ„é€ å‡½æ•°\nä¸èƒ½åœ¨MyStackç±»ä¸­ç›´æ¥å¯¹Queueè¿›è¡Œåˆå§‹åŒ–\n\nå¦‚æœåœ¨Queueä¸­å®šä¹‰äº†æœ‰å‚çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨MyStackæ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œåˆå§‹åŒ–æ“ä½œ\n2.6.2.2 ç»„åˆèšåˆé—®é¢˜å½“ä¸€ä¸ªç±»çš„å¯¹è±¡æ‹¥æœ‰å¦ä¸€ä¸ªç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç±»èšåˆï¼š\n\næ¯ç±»Açš„æ¯ä¸€ä¸ªå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªBç±»çš„å¯¹è±¡\nç±»ç»„åˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„èšåˆå½¢å¼ï¼Œå…¶ä¸­æ‹¥æœ‰è€…ç±»æ§åˆ¶è¢«æ‹¥æœ‰è€…ç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚\n\nä¾æ—§ä»¥ä¸Šé¢çš„MyStackä»£ç ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬åœ¨é‡Œé¢å®šä¹‰äº†Queueå¯¹è±¡q1å’Œq2åï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå’ŒMyStackç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸåŒæ­¥ã€‚MyStackç±»ä¼šå…ˆæ„é€ ï¼Œç„¶åæ„é€ q1å’Œq2ï¼›q1å’Œq2åˆ†åˆ«ææ„åï¼Œæ‰ä¼šææ„MyStackçš„ç±»å¯¹è±¡ã€‚\n2.6.2.3 å†…éƒ¨ç±»å½“å®šä¹‰å†…éƒ¨ç±»æ—¶ï¼Œå†…éƒ¨ç±»é»˜è®¤ä¸ºå¤–éƒ¨ç±»çš„å‹å…ƒï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éå…¬æœ‰æˆå‘˜ã€‚ä½†æ˜¯å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œå¤–éƒ¨ç±»ä¸èƒ½è®¿é—®å†…éƒ¨ç±»çš„éç§æœ‰æˆå‘˜ï¼Œä¹Ÿä¸èƒ½é€šè¿‡å¤–éƒ¨ç±»çš„å¯¹è±¡æ¥è®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜ã€‚\nclass A&#123;public:    class B&#123;      void Prin(const A&amp; a1)      &#123;          cout&lt;&lt; a1._a &lt;&lt;endl;//å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡æ¥è®¿é—®ç§æœ‰æˆå‘˜          cout&lt;&lt; count&lt;&lt;endl;//å¤–éƒ¨çš„é™æ€æˆå‘˜å¯ä»¥ç›´æ¥è®¿é—®          cout&lt;&lt; _b &lt;&lt;endl;      &#125;      int _b;      &#125;;private:    int _a;    static int count;&#125;;int A::count=0;\n\n2.6.3 ç»§æ‰¿æ´¾ç”Ÿå…³ç³»2.6.3.1 åŸºæœ¬ç”¨æ³•ç»§æ‰¿å’Œæ´¾ç”Ÿæ˜¯çˆ¶ä¸å­çš„å…³ç³»ï¼Œå…¶ä¸­å­ç±»æ‹¥æœ‰çˆ¶ç±»æˆå‘˜çš„åŒæ—¶ï¼Œè¿˜ä¼šæ‹¥æœ‰è‡ªå·±çš„æˆå‘˜\n\nç»§æ‰¿æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ï¼Œç”¨äºå¤šä¸ªç±»æœ‰å…¬å…±éƒ¨åˆ†çš„æ—¶å€™\nçˆ¶ç±»ï¼šåŸºç±»\nå­ç±»ï¼šæ´¾ç”Ÿç±»\n\n//ä¸¾ä¾‹ï¼šç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class ART &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬ &quot; &lt;&lt; &quot; ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt;endl;\t&#125;\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\nåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼ŒARTå’ŒLINKç±»ä¸­éƒ½æœ‰ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œè¿™æ—¶å€™å°±å‡ºç°äº†ä»£ç çš„é‡å¤ã€‚ç»§æ‰¿çš„å‡ºç°å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„\n//ä¸‹é¢ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å†™ï¼ŒWEBç±»æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class WEB &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;&#125;;//ARTã€LINKæ˜¯ä¸¤ä¸ªå­ç±»ï¼Œç»§æ‰¿äº†WEBçš„å…¬å…±éƒ¨åˆ†//è¿™æ ·å°±å‡å°‘äº†ä»£ç é‡class ART : public WEB&#123;public:\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK : public WEB &#123;public:\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\næµ‹è¯•å¯ä»¥å‘ç°ï¼ŒARTå’ŒLINKä½œä¸ºæ´¾ç”Ÿç±»ï¼Œåœ¨ç»§æ‰¿äº†åŸºç±»WEBçš„æˆå‘˜çš„åŸºç¡€ä¸Šï¼Œè¿˜æ‹¥æœ‰äº†å®ƒä»¬ç‹¬ç‰¹çš„å•ç‹¬æˆå‘˜\n\nåŒä¸€ä¸ªç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªåŸºç±»\nclass C : public A,public B&#123;//.....&#125;;\n\n2.6.3.2 æƒé™é—®é¢˜ç»§æ‰¿æœ‰3ä¸­ç±»å‹ï¼špublicã€privateã€protectedã€‚è¿™é‡Œä¼šæ˜¾ç¤ºå‡ºç±»ä¸­protectedæƒé™å’Œprivateæƒé™çš„åŒºåˆ«\nclass A&#123;public:\tint a;protected:\tint b;private:\tint c;&#125;;\n\nå½“æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸Šé¢ä¸‰ç§æ–¹å¼å¯¹ç±»Aè¿›è¡Œç»§æ‰¿çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„\n\nç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œæ´¾ç”Ÿç±»ä¸­ç»§æ‰¿çš„æˆå‘˜å°±å˜æˆä»€ä¹ˆç±»å‹\nä¸ç®¡ç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œéƒ½æ— æ³•è®¿é—®åŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜\n\n\n2.6.3.3 åŒåé—®é¢˜å½“åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å‡ºç°åŒåæˆå‘˜å‡½æ•°æˆ–è€…åŒåæˆå‘˜å˜é‡æ—¶ï¼Œä¼šå‡ºç°å†²çªã€‚è¿™æ—¶å€™ç¼–è¯‘å™¨ä¼šåšä¸€å®šçš„å¤„ç†ï¼šç›´æ¥è®¿é—®å˜é‡åå’Œå‡½æ•°åçš„æ—¶å€™ï¼Œä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜\n//ç»§æ‰¿åŒåæˆå‘˜çš„å¤„ç†//\tæ™®é€šçš„åŒåæˆå‘˜class DAD1 &#123;public:\tDAD1()\t&#123;\t\t_a = 100;\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DAD func&quot; &lt;&lt; endl;\t&#125;\tvoid func(int i)\t&#123;\t\tcout &lt;&lt; &quot;DAD func int: &quot; &lt;&lt; i &lt;&lt; endl;\t&#125;\tint _a;//åŸºç±»ä¸­çš„è¯¥å˜é‡&#125;;class SON1 : public DAD1&#123;public:\tSON1()\t&#123;\t\t_a = 20;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt;&quot;SON: &quot; &lt;&lt; _a &lt;&lt; endl;//ä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»çš„_a\t\tcout &lt;&lt;&quot;DAD: &quot; &lt;&lt; DAD1::_a &lt;&lt; endl;//è®¿é—®åŸºç±»çš„_a\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;SON func&quot; &lt;&lt; endl;\t&#125;\tint _a;//æ´¾ç”Ÿç±»çš„åŒåå˜é‡&#125;;\n\n\nå¦‚æœæ˜¯é™æ€æˆå‘˜ï¼Œè®¿é—®æ–¹æ³•å°±æœ‰æ‰€å˜åŒ–\n//è®¿é—®åŒåçš„é™æ€æˆå‘˜class DAD2&#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1 &quot; &lt;&lt; endl;\t&#125;\tstatic void Test1(int n)\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1(int)  &quot; &lt;&lt; n &lt;&lt; endl;\t&#125;&#125;;int DAD2::D_a = 100;class SON2 : public DAD2 &#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;SON2 Test1 &quot; &lt;&lt; endl;\t&#125;&#125;;int SON2::D_a = 200;\n\n\n2.6.3.4 è™šç»§æ‰¿æœ‰çš„æ—¶å€™ï¼Œç»§æ‰¿ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼šä¸€ä¸ªå­ç±»ç»§æ‰¿äº†ä¸¤ä¸ªåŸºç±»ï¼Œè€Œè¿™ä¸¤ä¸ªåŸºç±»åˆåŒæ—¶æ˜¯ä¸€ä¸ªåŸºç±»çš„æ´¾ç”Ÿç±»\n\nè¿™æ—¶å€™ï¼ŒDé‡Œé¢å°±ä¼šæœ‰ä¸¤ä»½Açš„å†…å®¹ï¼Œç›¸å½“äºä¸¤ä»½å…¬å…±éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œå› ä¸ºä¼šé€ æˆç©ºé—´æµªè´¹ã€‚è€Œä¸”ç›´æ¥è®¿é—®çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œå¯¹å˜é‡Xçš„è®¿é—®ä¸æ˜ç¡®â€\n\nå’Œå‰é¢è¯´é“çš„åŒåé—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥è®¿é—®ç‰¹å®šçš„å˜é‡ï¼Œä½†æ˜¯è¿™æ ·æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è§£å†³ç©ºé—´æµªè´¹çš„é—®é¢˜ã€‚\n//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®cout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;cout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\n\nè¿™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨è™šç»§æ‰¿æ¥æ“ä½œï¼šç»™Bå’ŒCå¯¹Açš„ç»§æ‰¿åŠ ä¸Švirturalå…³é”®å­—\nclass CPU &#123;public:\tCPU()\t\t:_Structure(&quot;x86&quot;)\t&#123; &#125;\tchar _Structure[100];&#125;;class INTEL : virtual public CPU &#123;public:\tINTEL()\t\t:i_Brand(&quot;intel&quot;)\t&#123;&#125;\tchar i_Brand[10];&#125;;class AMD : virtual public CPU &#123;public:\tAMD()\t\t:a_Brand(&quot;amd&quot;)\t&#123;&#125;\tchar a_Brand[10];&#125;;\n\nè¿™æ—¶å€™ç›´æ¥è®¿é—®å˜é‡å°±ä¸ä¼šæŠ¥é”™äº†ã€‚å› ä¸ºè¿™æ—¶å€™ï¼ŒBå’ŒCä¸­çš„è¯¥å˜é‡æŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹æ“ä½œä¼šåŒæ­¥ã€‚\n\n2.7 å¤šæ€æ€§\né™æ€å¤šæ€ï¼šè¿ç®—ç¬¦é‡è½½\nåŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°ç»„æˆçš„å¤šæ€\n\n2.7.1 è¿ç®—ç¬¦é‡è½½2.7.1.1å®šä¹‰åœ¨è®²è§£èµ‹å€¼è¿ç®—ç¬¦é‡è½½ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥è®¤è¯†ä¸€ä¸‹å®Œæ•´çš„è¿ç®—ç¬¦é‡è½½ï¼šC++ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§å¼•å…¥äº†è¿ç®—ç¬¦é‡è½½ï¼Œè¿ç®—ç¬¦é‡è½½æ˜¯å…·æœ‰ç‰¹æ®Šå‡½æ•°åçš„å‡½æ•°ï¼Œä¹Ÿå…·æœ‰å…¶è¿”å›å€¼ç±»å‹ï¼Œå‡½æ•°åå­—ä»¥åŠå‚æ•°åˆ—è¡¨ï¼Œå…¶è¿”å›å€¼ç±»å‹ä¸å‚æ•°åˆ—è¡¨ä¸æ™®é€šçš„å‡½æ•°ç±»ä¼¼ã€‚\nå‡½æ•°åä¸ºï¼šå…³é”®å­— operatorè¿ç®—ç¬¦ï¼Œå¦‚operator=\nå‡½æ•°åŸå‹ï¼šè¿”å›å€¼ç±»å‹ operatoræ“ä½œç¬¦(å‚æ•°åˆ—è¡¨)ï¼Œå¦‚Date operator=();\nä¸‹é¢æœ‰å‡ ç‚¹æ³¨æ„ï¼š\n\né‡è½½æ“ä½œç¬¦å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ“ä½œæ•°ï¼ˆå³æ“ä½œç¬¦é‡è½½å¯¹å†…ç½®ç±»å‹æ— æ•ˆï¼‰\nä¸èƒ½é€šè¿‡å…¶ä»–ç¬¦å·æ¥åˆ›å»ºæ–°çš„æ“ä½œç¬¦\nå¯¹äºç±»ç±»å‹çš„æ“ä½œç¬¦é‡è½½ï¼Œå½¢å‚æ¯”æ“ä½œæ•°å°‘ä¸€ä¸ªä¼ å‚ï¼ˆå› ä¸ºæœ‰ä¸€ä¸ªé»˜è®¤çš„å½¢å‚thisæŒ‡é’ˆï¼‰\nè¿™5ä¸ªæ“ä½œç¬¦æ˜¯ä¸èƒ½é‡è½½çš„ï¼š.*ã€::ã€sizeofã€? :ã€.\n\n2.7.1.2åŸºæœ¬ä½¿ç”¨ä»¥ä¸‹æ˜¯åœ¨å…¨å±€å®šä¹‰çš„æ“ä½œç¬¦é‡è½½ï¼Œç”¨äºåˆ¤æ–­æ—¥æœŸæ˜¯å¦ç›¸ç­‰\nbool operator==(const Date&amp; d1, const Date&amp; d2)&#123;    return d1._year == d2._year;    &amp;&amp; d1._month == d2._month    &amp;&amp; d1._day == d2._day;&#125;\n\nå½“æˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨d1==d2çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ“ä½œç¬¦é‡è½½\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±æ¥ä¼ å‚ä½¿ç”¨ï¼Œå¦‚if(operator==(d1,d2))\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œå’Œè°ƒç”¨ä¸€ä¸ªè€Œæ™®é€šå‡½æ•°æ²¡å•¥åŒºåˆ«ï¼Œå‹æ ¹ç®—ä¸ä¸Šæ“ä½œç¬¦é‡è½½ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯åœ¨ç±»é‡Œé¢å®šä¹‰æ“ä½œç¬¦é‡è½½çš„\n\nå½“æˆ‘ä»¬æŠŠå®ƒæ”¾å…¥ç±»Dateä¸­é—´ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸‹é¢è¿™æ ·\nbool operator==(const Date&amp; d2)&#123;    return _year == d2._year;    &amp;&amp; _month == d2._month    &amp;&amp; _day == d2._day;&#125;\n\nç¼–è¯‘å™¨åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä¼˜åŒ–æˆä¸‹é¢è¿™æ ·\nbool operator==(Date* this, const Date&amp; d2)//æ˜¾ç¤ºè°ƒç”¨ä¸º d1.operator==(d2);\nè€Œåœ¨mainé‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªé‡è½½åçš„æ“ä½œç¬¦å’ŒåŸæœ¬çš„ä½¿ç”¨æ–¹æ³•å®Œå…¨ç›¸åŒ\nDate d1(2022,6,1)Date d2(2022,5,1)d1==d2;//è‡ªåŠ¨è°ƒç”¨æ“ä½œç¬¦é‡è½½d1.operator==(d2);\n\n\n2.7.1.3èµ‹å€¼è¿ç®—ç¬¦é‡è½½å› ä¸ºæ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸åŒçš„æˆå‘˜ï¼Œç¼–è¯‘å™¨ä¸å¯èƒ½æ™ºèƒ½çš„è¿›è¡Œèµ‹å€¼æ“ä½œã€‚è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªèµ‹å€¼è¿ç®—ç¬¦é‡è½½æ¥è¿›è¡Œèµ‹å€¼æ“ä½œäº†\nä»¥æ—¥æœŸç±»ä¸ºä¾‹ï¼Œèµ‹å€¼æ“ä½œå…¶å®å°±æ˜¯æŠŠå†…ç½®ç±»å‹æˆå‘˜ä¸€ä¸€èµ‹å€¼å³å¯\nDate&amp; operator=(const Date&amp; d)&#123;    if(this != &amp;d)//é¿å…è‡ªå·±ç»™è‡ªå·±èµ‹å€¼    &#123;        _year=d._year;        _month=d._month;        _day=d._day;    &#125;    return *this;&#125;\n\nç¼–å†™èµ‹å€¼é‡è½½ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š\n\nè¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼ˆæ³¨æ„è¦å¼•ç”¨ä¼ å‚ï¼Œä¸ç„¶ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼‰\næ£€æµ‹æ˜¯å¦è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼ˆé¿å…æµªè´¹æ—¶é—´ï¼‰\nå› ä¸ºè¿”å›çš„æ˜¯*thisï¼Œå‡ºäº†å‡½æ•°åæ²¡æœ‰é”€æ¯ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¼ å¼•ç”¨è¿”å›\nä¸€ä¸ªç±»å¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªï¼Œå®Œæˆå¯¹è±¡æŒ‰å­—èŠ‚åºçš„å€¼æ‹·è´ã€‚\n\nå¦‚æœç±»ä¸­æœ‰è‡ªå®šä¹‰ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤è°ƒç”¨å®ƒçš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½\n2.7.1.4æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„è°ƒç”¨é—®é¢˜å½“èµ‹å€¼æ“ä½œç¬¦å’Œæ‹·è´æ„é€ åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨èµ‹å€¼ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ å‘¢ï¼Ÿ\n\nåœ¨è¿™ä¸¤ä¸ªå‡½æ•°ä¸­æ·»åŠ coutè¿›è¡Œæ‰“å°æç¤ºï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\nå¦‚æœå¯¹è±¡åœ¨ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œå°±ä¼šè°ƒç”¨èµ‹å€¼é‡è½½\nå¦‚æœæ˜¯ä¸€ä¸ªå…¨æ–°çš„å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå°±è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ \n\n\n2.7.2 è™šå‡½æ•°2.7.2.1 åŸºæœ¬ä½¿ç”¨ä»¥åŠåŠ¨æ€å¤šæ€è™šå‡½æ•°ï¼Œå¹¶ä¸ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯è™šæ— çš„ã€‚è€Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åœ¨ä¸€å®šæƒ…å†µä¸‹ä¼šè¢«æ›¿æ¢ï¼ˆå°±å¥½æ¯”ç»§æ‰¿ä¸­çš„è™šç»§æ‰¿é—®é¢˜ï¼‰ã€‚è¦å®ç°åŠ¨æ€å¤šæ€ï¼Œå°±éœ€è¦å€ŸåŠ©è™šå‡½æ•°æ¥å®ç°ã€‚ä»¥ä¸‹é¢è¿™ä¸ªåŠ¨ç‰©è¯´è¯çš„ä»£ç ä¸ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Animal &#123;public:\t//void Talk()\tvirtual void Talk()//è™šå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;Animal is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class CAT : public Animal&#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;CAT is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class DOG : public Animal &#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DOG is talking&quot; &lt;&lt; endl;\t&#125;&#125;;//åŸºç±»ä¸­ä¸ä½¿ç”¨è™šå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°çš„å†…å®¹å·²ç¡®å®š//ä¸ç®¡ä¼ å‚ä»€ä¹ˆç±»ï¼Œéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°//åŠ ä¸Šè™šå‡½æ•°virtualåï¼Œä¼šè°ƒç”¨CATå’ŒDOGçš„Talkå‡½æ•°void MakeTalk(Animal&amp; it) &#123;\tit.Talk();//è°ƒç”¨å¯¹åº”çš„Talkå‡½æ•°&#125;\n\nå½“åŸºç±»Animalä¸­çš„Talkå‡½æ•°æ²¡æœ‰ç”¨virtualä¿®é¥°æ—¶ï¼Œä¸ç®¡ç»™è¿™ä¸ªå‡½æ•°ä¼ å‚ä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°\n\nå½“æˆ‘ä»¬ç”¨è™šå‡½æ•°è¿›è¡Œä¿®é¥°åï¼Œå°±ä¼šè°ƒç”¨æ´¾ç”Ÿç±»CATå’ŒDOGçš„Talkå‡½æ•°ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ¨æ€å¤šæ€ã€‚\n\nå¯¹äºè™šå‡½æ•°ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n\nå½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šè§¦å‘åŠ¨æ€å¤šæ€ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŒåå‡½æ•°ä¼šè¦†å†™åŸºç±»ä¸­çš„è™šå‡½æ•°\nä¸èƒ½å®šä¹‰é™æ€è™šå‡½æ•°â€”â€”å› ä¸ºé™æ€å‡½æ•°æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œè€Œä¸æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡\nä¸èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°â€”â€”æ€»ä¸èƒ½ç”¨æ´¾ç”Ÿç±»çš„æ„é€ æ¥è¦†å†™åŸºç±»çš„æ„é€ å§ï¼Ÿ\nææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°\n\n2.7.2.2 è™šææ„å‡½æ•°æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ææ„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¾€å¾€ä¼šç»™åŸºç±»çš„ææ„å‡½æ•°åŠ ä¸Švirtualä¿®é¥°ï¼Œè¿™æ ·åªè¦ä¼ æ´¾ç”Ÿç±»çš„å¯¹è±¡ç»™åŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»å¯¹åº”çš„ææ„å‡½æ•°ï¼Œå®Œæˆä¸åŒçš„ææ„æ“ä½œã€‚è€Œä¸æ˜¯éƒ½å‘†å‘†çš„è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°â€”â€”é‚£æ ·å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼\nclass Queue &#123;public:\tQueue()\t\t:_a(new int[10])\t&#123;\t&#125;\tvirtual ~Queue() &#123;\t\tcout &lt;&lt; &quot;~Queue&quot; &lt;&lt; endl;\t\tdelete[] _a;\t&#125;private:\tint* _a;&#125;;class MyStack :public Queue &#123;public:\tMyStack(int capa)\t\t:_a1(new int[capa])\t&#123;&#125;\t~MyStack() &#123;\t\tcout &lt;&lt; &quot;~MyStack&quot; &lt;&lt; endl;\t\tdelete[] _a1;\t&#125;private:\tint* _a1;&#125;;int main()&#123;\tQueue* q1=new MyStack(4);//çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»\tdelete q1;//è°ƒç”¨å­ç±»çš„ææ„å‡½æ•°\treturn 0;&#125;\n\n2.7.3 çº¯è™šå‡½æ•°åœ¨è™šå‡½æ•°çš„åŸºç¡€ä¸Šï¼ŒC++å®šä¹‰äº†çº¯è™šå‡½æ•°ï¼šæœ‰äº›æ—¶å€™ï¼Œåœ¨åŸºç±»é‡Œé¢å®šä¹‰æŸä¸€ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œå…·ä½“çš„å®ç°è®©æ´¾ç”Ÿç±»å»åŒåè¦†å†™ã€‚\nçº¯è™šå‡½æ•°çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹\n//virtual å‡½æ•°è¿”å›ç±»å‹ å‡½æ•°å()=0;virtual void Print()=0;\n\næ´¾ç”Ÿç±»ä¸­å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™è¯¥ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nclass A &#123;public:\t//virtual void Print();//è™šå‡½æ•°\tvirtual void Print() = 0;//çº¯è™šå‡½æ•°&#125;;class B :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;B print &quot; &lt;&lt; endl;\t&#125;&#125;;class C :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;C print &quot; &lt;&lt; endl;\t&#125;&#125;;\n\nå½“æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»ä¸­è¦†å†™äº†è¯¥å‡½æ•°åï¼Œå³å¯å®ä¾‹åŒ–å¯¹è±¡å¹¶è°ƒç”¨è¯¥å‡½æ•°\n\nå’Œè™šå‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ¥æ”¶æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå³å¯è°ƒç”¨å¯¹åº”çš„å‡½æ•°\n\n2.7.4 æŠ½è±¡ç±»åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å°±æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š\n\næŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\næŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œä¸ç„¶æ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nå¦‚æœåœ¨åŸºç±»ä¸­å®šä¹‰çš„çº¯è™šå‡½æ•°æ˜¯constä¿®é¥°çš„ï¼Œåˆ™æ´¾ç”Ÿç±»ä¸­å¯¹åº”çš„å‡½æ•°ä¹Ÿéœ€è¦ç”¨constä¿®é¥°\n\n\nç¬¬ä¸‰ç«   é¢å‘å¯¹è±¡åº”ç”¨3.1 çŸ©é˜µç±»è®¾è®¡åŠåº”ç”¨\nçŸ©é˜µç±»è¦æ±‚ï¼šè®¾è®¡ä¸€ä¸ªçŸ©é˜µç±»ï¼Œè¦æ±‚èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚æ„å»ºrowè¡Œã€columnåˆ—çš„çŸ©é˜µï¼Œå¹¶çµæ´»æ¥å—åé¦ˆçŸ©é˜µå…ƒç´ ä¿¡æ¯ï¼ˆå¦‚ï¼šæŸè¡Œã€æŸåˆ—ã€æŸè¡ŒæŸåˆ—å…ƒç´ ï¼‰ã€‚å®ç°çŸ©é˜µçš„ç›¸å…³è¿ç®—ï¼ŒåŒ…æ‹¬çŸ©é˜µåŠ ï¼ˆ+ï¼‰ã€çŸ©é˜µä¹˜ï¼ˆ*ï¼‰ã€çŸ©é˜µè¾“å‡ºï¼ˆ&lt;&lt;ï¼‰ã€çŸ©é˜µèµ‹å€¼ï¼ˆ&#x3D;ï¼‰ã€è·å–çŸ©é˜µæŒ‡å®šä½ç½®å…ƒç´ å€¼ï¼ˆ[]ï¼‰\n\nè®¾è®¡è¯¥ç¨‹åºçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š\n\né‡è½½çŸ©é˜µç±»å¿…é¡»ä½¿ç”¨äºŒç»´æ•°ç»„ï¼Œä¸èƒ½ç”¨ä¸€ç»´æ•°ç»„+å…¬å¼åˆ¤æ–­çš„æ–¹æ³•ï¼ˆå› ä¸ºè¿™æ ·æ— æ³•é‡è½½[]æ“ä½œç¬¦ï¼‰\né‡è½½çŸ©é˜µåŠ å‡å’Œç›¸ä¹˜çš„è¿ç®—ç¬¦æ—¶å€™éœ€è¦æ³¨æ„çŸ©é˜µè¿ç®—çš„è§„åˆ™ï¼ˆç¬¬ä¸€è¡Œxç¬¬ä¸€åˆ—&#x3D;ç¬¬ä¸€ä¸ªï¼‰\n\n\n\nå¯¹äº+å’Œ-çš„é‡è½½ä¸åº”è¯¥ä¿®æ”¹åŸæœ¬çš„çŸ©é˜µï¼Œåº”è¯¥åˆ›å»ºä¸´æ—¶å¯¹è±¡tmpåï¼Œä¿®æ”¹tmpçš„å€¼å¹¶è¿”å›\n\nint a1=1,a2=2;a1+a2;//è¿™æ ·ç›¸åŠ å¹¶ä¸ä¼šå½±å“a1å’Œa2çš„å€¼\n\nå¦‚æœéœ€è¦ä¿®æ”¹åŸæœ¬çš„çŸ©é˜µï¼Œåº”è¯¥é‡è½½çš„æ“ä½œç¬¦æ˜¯+&#x3D;å’Œ-&#x3D;\n\nå¯¹äºçŸ©é˜µè¾“å‡º&lt;&lt;çš„é‡è½½ï¼Œå¿…é¡»ä½¿ç”¨å‹å…ƒå‡½æ•°ï¼Œå¦åˆ™ä½¿ç”¨ä¼šå˜æˆå¯¹è±¡&lt;&lt;coutï¼Œä¸æ˜¯æ­£å¸¸ä½¿ç”¨çš„æ–¹æ³•\nå¯¹äºè·å–çŸ©é˜µæŒ‡å®šä½ç½®å…ƒç´ å€¼[]çš„é‡è½½ï¼Œåº”è¯¥è¿”å›int*ç±»å‹ã€‚åœ¨æœ€å¼€å§‹è®¾è®¡çš„æ—¶å€™æˆ‘é”™è¯¯å†™æˆäº†intç±»å‹ï¼Œæ— æ³•æ­£ç¡®åœ°è¿ç»­ä½¿ç”¨ä¸¤ä¸ª[]\n\n//é‡è½½[]æ“ä½œç¬¦int* operator[](int row)&#123;    return arr[row];&#125;//ä½¿ç”¨è¯¥æ“ä½œç¬¦a1[1][3];//ç¬¬ä¸€ä¸ª[]æ˜¯æ“ä½œç¬¦é‡è½½a1[1];//è¿”å›äº†ç¬¬äºŒè¡Œçš„æ•°ç»„å//ç¬¬äºŒä¸ª[]æ˜¯æ™®é€šçš„æ“ä½œç¬¦æœ¬èº«ï¼Œè®¿é—®è¿”å›çš„æ•°ç»„åæ‰¾åˆ°å¯¹åº”åˆ—çš„å€¼\n\nçŸ©é˜µç±»å®Œæ•´ä»£ç å®ç°è§é™„å½•ã€‚\n3.2 é“¶è¡Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿè®¾è®¡åŠåº”ç”¨\né“¶è¡Œè´¦å·ç®¡ç†ç³»ç»Ÿè¦æ±‚ï¼šç®¡ç†ä¸åŒç”¨æˆ·åœ¨é“¶è¡Œçš„é‡‘èèµ„äº§ï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šç§é“¶è¡Œè´¦æˆ·ï¼ˆå¦‚ï¼šå®šæœŸå‚¨è“„ã€æ´»æœŸå‚¨è“„ã€ä¿¡æ¯å¡ã€ç”µå­è´¦æˆ·ã€è´·æ¬¾è´¦æˆ·ç­‰ï¼‰ã€‚è´¦æˆ·åŒ…æ‹¬è´¦å·ã€ä½™é¢ã€åˆ©ç‡ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œè´¦æˆ·ä¿¡æ¯æŸ¥è¯¢ã€å­˜æ¬¾ã€å–æ¬¾ã€ç»“ç®—åˆ©æ¯ç­‰æ“ä½œã€‚é“¶è¡Œéœ€ç»Ÿè®¡æ‰€æœ‰è´¦æˆ·çš„æ€»é‡‘é¢ã€éªŒè¯é“¶è¡Œç³»ç»Ÿæ”¶æ”¯å¹³è¡¡ï¼Œå¹¶èƒ½å¤ŸåŠæ—¶é¢„è­¦åé¦ˆã€‚è®¾è®¡AccountæŠ½è±¡ç±»ä½œä¸ºæ‰€æœ‰é“¶è¡Œè´¦æˆ·é¡¶å±‚ç¥–å…ˆï¼Œæ ¹æ®å®é™…åº”ç”¨éœ€æ±‚åˆç†è®¾ç½®æ´¾ç”Ÿå±‚æ¬¡åŠç›¸åº”å­ç±»ã€‚ç»“åˆé“¶è¡Œåˆ©æ¯ç»“ç®—ã€ç”¨æˆ·è´·æ¬¾ç”³è¯·ç­‰å®é™…åº”ç”¨éœ€æ±‚ï¼Œé€‚å½“æ·»åŠ è¾…åŠ©ç±»ååŒæ“ä½œã€‚åˆç†å®šä¹‰è™šåŸºç±»ã€è™šå‡½æ•°ã€çº¯è™šå‡½æ•°ã€æŠ½è±¡ç±»å®Œæˆé“¶è¡Œè´¦å·ç®¡ç†ç³»ç»Ÿçš„ç¨³å®šå¯é è¿è¡Œã€‚\n\n3.2.1 åŸºæœ¬æ€è·¯ä»¥ä¸‹æ˜¯æˆ‘è®¾è®¡è¯¥ç®¡ç†ç³»ç»Ÿçš„æ€è·¯ï¼š\n\nè®¾è®¡äº†Accountç±»çš„ä¸»æ¡†æ¶ï¼Œä½œä¸ºåç»­ç±»çš„åŸºç±»\né€šè¿‡å¤šæ€ï¼Œå®ç°äº†æ´»æœŸå‚¨è“„ã€å®šæœŸå‚¨è“„ç±»ã€ä¿¡ç”¨å¡ç±»ã€è´·æ¬¾è´¦æˆ·çš„åŠŸèƒ½\nå®ç°äº†ç®€æ˜“èœå•ï¼Œé€šè¿‡switch caseè¯­å¥å’Œdo whileè¯­å¥å®ç°å¤šæ¬¡è°ƒç”¨ä¸åŒå‡½æ•°æ¥å£çš„æ“ä½œ\nä¸æ—¥æœŸç±»ç»“åˆï¼Œå®æ—¶è®¡ç®—å¤©æ•°å·®è·å¹¶ç»“ç®—åˆ©æ¯\n\nåœ¨è®¾è®¡è¯¥èœå•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šé—®é¢˜éœ€è¦æ³¨æ„ï¼Œè¿™äº›é—®é¢˜ä¹ŸåŠ æ·±äº†æˆ‘å¯¹ç¼–ç¨‹çŸ¥è¯†ç‚¹çš„ç†è§£ã€‚\nå®Œæ•´ä»£ç å®ç°è§é™„å½•ã€‚\n3.2.2 è®¾è®¡ç³»ç»Ÿæ—¶é‡åˆ°çš„é—®é¢˜åœ¨è®¾è®¡è´·æ¬¾è´¦æˆ·çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºç°doubleæµ®ç‚¹æ•°å­˜æ”¾ç²¾åº¦çš„é—®é¢˜ã€‚ç”¨æˆ·è´·æ¬¾é¢åº¦å’Œä½™é¢ç›´æ¥è‹¥ç›´æ¥åˆ¤æ–­ç›¸ç­‰ï¼Œå¾ˆéš¾å¾—åˆ°æ­£ç¡®ç»“æœï¼ˆå› ä¸ºæµ®ç‚¹æ•°åé¢ä¼šè·Ÿç€å¾ˆå¤šæ²¡æœ‰æ‰“å°å‡ºæ¥çš„å°æ•°ï¼‰\n\nè¿™å°±ä¼šå‡ºç°ï¼Œå³ä¾¿ä½ æ ¹æ®ç¨‹åºæ¥å£ä¸­â€œæŸ¥çœ‹å¾…è¿˜é‡‘é¢â€æ¥å¾—åˆ°è‡ªå·±çš„å¾…è¿˜é‡‘é¢ï¼Œå¹¶æ‰§è¡Œè¿˜æ¬¾æ“ä½œåï¼Œè¿˜æ˜¯ä¼šæœ‰ä¸€éƒ¨åˆ†å°æ•°ä½çš„æ•°æ®å¹¶æ²¡æœ‰å®Œæ•´è¿˜å®Œï¼Œè¿™ä¸€éƒ¨åˆ†çš„å¤„ç†æ˜¯éå¸¸å›°éš¾çš„ã€‚ä¸ºäº†é¿å…ç”¨æˆ·æ°¸è¿œéƒ½è¿˜ä¸å®Œè‡ªå·±çš„è´·æ¬¾ï¼Œæˆ‘è®¾ç½®äº†doubleçš„ä¿®çº¦è§„åˆ™ï¼Œå³å½“ç”¨æˆ·ä½™é¢å’Œè´·æ¬¾&#x2F;é€æ”¯é¢åº¦çš„å·®å€¼å°äº0.2æ—¶ï¼Œä¸å†å¤„ç†åç»­çš„å°æ•°ä½\nif (_Max - _money &lt; 0.2)//æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜&#123;    cout &lt;&lt; &quot;æ— éœ€è¿˜æ¬¾&quot; &lt;&lt; endl;    return -1;&#125;\n\nåŒæ—¶åœ¨ä½™é¢è®¡ç®—ä¸­è¿›è¡Œå–é›¶ä¿®çº¦ï¼Œä¿è¯â€œå‰©ä½™å¾…è¿˜â€æ‰“å°å€¼å’Œâ€œæŸ¥çœ‹å¾…è¿˜é‡‘é¢â€å‡½æ•°çš„æ‰“å°å€¼åŒæ­¥ã€‚ç”¨è¿™ç§æ–¹å¼é—´æ¥è§£å†³äº†ç²¾åº¦é—®é¢˜ã€‚\n//å¾…è¿˜é‡‘é¢ä¸ºé€æ”¯é¢åº¦+åˆ©æ¯double money = (_Max - _money) + Income(tmp);if (money &lt; 0.02) &#123;\tmoney = 0;//ä¿®çº¦æµ®ç‚¹æ•°ï¼Œè§£å†³ç²¾åº¦é—®é¢˜&#125;\n\nåœ¨è®¾è®¡é”€æˆ·æ¥å£æ—¶ï¼Œä¸ºäº†é¿å…ç”¨æˆ·åœ¨é”€æˆ·åä»ç„¶èƒ½æ“ä½œè¯¥è´¦æˆ·ï¼Œä¸èƒ½åªæ˜¯ç®€å•çš„ä½¿ç”¨breakè·³å‡ºå•å±‚å¾ªç¯ï¼Œè€Œæ˜¯éœ€è¦ç”¨returnç›´æ¥ç»ˆæ­¢è¯¥ç¨‹åºã€‚\ncase 8:&#123;    cout &lt;&lt; &quot;é”€æˆ·åï¼Œè´¦æˆ·å†…çš„ä¸€åˆ‡ä¿¡æ¯éƒ½ä¼šè¢«æ¸…ç©º&quot; &lt;&lt; endl;    cout &lt;&lt; &quot;è¯·é—®æ‚¨ç¡®è®¤é”€æˆ·å—ï¼ŸY/N&quot; &lt;&lt; endl;    char a;    cin &gt;&gt; a;    if (a == &#x27;Y&#x27;) &#123;        delete A;        A = nullptr;        cout &lt;&lt; &quot;é”€æˆ·å®Œæˆ&quot; &lt;&lt; endl;        return;//ç»ˆæ­¢ç¨‹åº    &#125;    break;&#125;\n\n3.2.3 ä¸€äº›ç¼ºé™·1.æ–‡ä»¶æ“ä½œ\nè¯¥é“¶è¡Œç®¡ç†ç±»è¿˜å¯ä»¥æ·»åŠ æ–‡ä»¶æ“ä½œï¼Œæ¥ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ã€‚åŸå…ˆæƒ³æ³•æ˜¯åœ¨Accountç±»ä¸­å®šä¹‰staticå…¨å±€å˜é‡è¿›è¡Œcount++ï¼Œä»¥æ­¤å¾—å‡ºæ‰€æœ‰æ´¾ç”Ÿç±»æ„é€ å¯¹è±¡çš„æ€»å’Œã€‚å†åˆ©ç”¨forå¾ªç¯è¿›è¡Œè¯»å–æ–‡ä»¶æ“ä½œï¼Œè¿™æ ·å°±èƒ½åœ¨ä¸‹ä¸€æ¬¡æ‰“å¼€ç¨‹åºçš„æ—¶å€™ï¼Œé€šè¿‡ç”¨æˆ·çš„è´¦æˆ·æ¥å®šä½ç”¨æˆ·çš„æŸä¸€ä¸ªç‰¹å®šè´¦æˆ·å¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œã€‚\nä½†æ˜¯Accountç±»ä½œä¸ºæŠ½è±¡ç±»æ˜¯æ— æ³•å®ä¾‹åŒ–å¯¹è±¡çš„ï¼Œå¦‚æœç”¨å„ä¸ªæ´¾ç”Ÿç±»æ¥è¿›è¡Œæ–‡ä»¶ç®¡ç†æ“ä½œï¼Œè¯¥ç¨‹åºå°±ä¼šå˜å¾—å¾ˆè‡ƒè‚¿ã€‚ä¸”ç”±äºæœ¬äººèƒ½åŠ›é—®é¢˜ï¼Œæ²¡èƒ½è®¾è®¡å‡ºå¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶è¿›è¡Œå®šä½ä¸‹ä¸€ä¸ªå¯¹è±¡ä½ç½®çš„æ“ä½œï¼Œæ•…åœ¨æœ€ç»ˆçš„è®¾è®¡ä¸­æ²¡æœ‰å®ç°æ–‡ä»¶æ“ä½œã€‚\n2.æ—¶é—´é—®é¢˜\nä¸ºäº†ä»£ç æµ‹è¯•éœ€è¦ï¼Œæ¯ä¸€æ¬¡æ“ä½œéƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥æ—¥æœŸã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é¡¹å·¥ä½œåº”è¯¥ç”±é“¶è¡Œç”¨æˆ·ç»ˆç«¯è‡ªåŠ¨åŒ–æ‰¿æ‹…ã€‚å¯ä»¥è®¾è®¡è¯»å–é¢„å®šä¹‰å®__TIME__æ¥è·å–æ¯ä¸€æ¬¡æ“ä½œçš„æ—¶é—´ï¼Œä»è€Œå®ç°å’Œç°å®ä¸­çš„æ—¶é—´å¯¹ç…§ï¼Œå»é™¤æ¯ä¸€æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨è¾“å…¥ä»£ç çš„ç¹ç\nç¬¬å››ç«   é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡å­¦ä¹ æ€»ç»“å­¦ä¹ ä»£ç éœ€è¦æœ‰ä¸€ä¸ªæŒä¹‹ä»¥æ’çš„å¿ƒï¼Œå†å­¦ä¹ çŸ¥è¯†ç‚¹çš„åŸºç¡€ä¸Šè¦åŒæ—¶åšæŒå†™ä»£ç çš„ç»ƒä¹ ã€‚æˆ‘åœ¨Giteeç äº‘ä¸Šåˆ›å»ºäº†è‡ªå·±çš„å­¦ä¹ ä»“åº“ï¼ŒåšæŒæ¯å¤©æ‰˜ç®¡ä»£ç ï¼Œä½œä¸ºè‡ªå·±å­¦ä¹ ç¼–ç¨‹æ‰“å¡çš„ä¸€ä¸ªè®°å½•\n\nå’Œå…¶ä»–ç§‘ç›®ä¸åŒï¼ŒCPPçš„å­¦ä¹ æ˜¯ä¸èƒ½åªåœç•™åœ¨ä¹¦ç±å’Œçº¸ç¬”ä¸Šçš„ï¼Œåªæœ‰ä½ ä¸Šæ‰‹è‡ªå·±æ•²ä»£ç äº†ï¼Œæ‰èƒ½è®¤è¯†åˆ°ä¸€äº›å…‰æ˜¯å¬è®²å’Œçœ‹ä¹¦å­¦ä¹ ä¸åˆ°çš„çŸ¥è¯†ã€‚æ¯”å¦‚ä¸€äº›ç¨‹åºå‡ºç°bugä¹‹åçš„VSè°ƒè¯•æŠ€å·§ï¼Œéƒ½æ˜¯æˆ‘åœ¨ç»ƒä¹ ä¸­å­¦ä¼šçš„ã€‚\n\nåŒæ—¶è¿˜éœ€è¦å­¦ä¼šåˆ©ç”¨å·¥å…·ï¼Œå¦‚åœ¨cplusplusç½‘ç«™ä¸ŠæŸ¥æ‰¾å‡½æ•°çš„å®šä¹‰ï¼Œæ ¹æ®ç»™å‡ºçš„ä»£ç ç¤ºä¾‹å°è¯•è‡ªå·±ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶åšåˆ°èƒ½åœ¨åé¢çš„ç¨‹åºè®¾è®¡ä¸­æ´»å­¦æ´»ç”¨ã€‚\nä¸ªäººè®¤ä¸ºï¼Œä¸ç®¡å­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Œåªæœ‰ç»¼åˆä»¥ä¸Šå‡ ç‚¹ï¼Œæ‰èƒ½çœŸæ­£å­¦å¥½ç¼–ç¨‹ã€‚\né™„å½•\nçŸ©é˜µç±»å’Œé“¶è¡Œç®¡ç†ç³»ç»Ÿå®Œæ•´ä»£ç ğŸ‘‰ã€ä¼ é€é—¨ã€‘\néƒ¨åˆ†èµ„æ–™å‚è€ƒCè¯­è¨€ä¸­æ–‡ç½‘ğŸ‘‰http://c.biancheng.net/\n\n","categories":["é‡è§C++"],"tags":["Linux","C++","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘åŠ¨æ€å†…å­˜ç®¡ç†","url":"/2022/06/25/note_cpp/8%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","content":"åœ¨ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢é‡Œé¢ï¼Œå·²ç»è®°å½•è¿‡äº†C++ä¸­åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°newå’Œdeleteçš„åŸºæœ¬ä½¿ç”¨ã€‚æœ¬ç¯‡åšå®¢æ˜¯å¯¹C++åŠ¨æ€å†…å­˜ç®¡ç†çš„è¿›ä¸€æ­¥ç»†åŒ–\n\n\n[TOC]\n1.C&#x2F;C++å†…å­˜åˆ†åŒºè¿™æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œç›´æ¥çœ‹ä¸‹é¢è¿™ä¸ªå›¾å§ï¼\n\nè¿™é‡Œçš„æ•°æ®åŒºå…¶å®å°±æ˜¯é™æ€åŒºï¼Œè€Œä»£ç åŒºæ˜¯å¸¸é‡åŒºã€‚è¿™é‡Œçš„BBSåŒºå…ˆæš‚æ—¶passæ‰ã€‚\nè¦æƒ³è¾¨åˆ«ä¸Šé¢çš„å‡ ä¸ªå†…å­˜åˆ†åŒºï¼Œå¯ä»¥ç°æ¥çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œä½ èƒ½åˆ†çš„æ¸…æ¥šå®ƒä»¬éƒ½æ˜¯å­˜åœ¨å†…å­˜çš„å“ªä¸€ä¸ªåŒºåŸŸå—ï¼Ÿ\nint a = 1;//æ•°æ®åŒºstatic int b = 1;//æ•°æ®åŒºint main()&#123;     static int c = 1;//æ•°æ®åŒº     int d = 1;//æ ˆ     int arr1[10] = &#123;1, 2, 3, 4&#125;;//æ ˆ     char arr2[] = &quot;abcd&quot;;//æ ˆ     char* arr3 = &quot;abcd&quot;;//&quot;abcd&quot;å­˜åœ¨ä»£ç åŒº     int* ptr = (int*)malloc(sizeof (int)*4);//å †     free (ptr);    //å…¶ä¸­ï¼ŒptræŒ‡é’ˆæœ¬èº«æ˜¯å­˜åœ¨æ ˆåŒºçš„    //åŒç†ï¼Œarr3æŒ‡é’ˆæœ¬èº«å­˜åœ¨æ ˆåŒº    //ä½†æ˜¯arr3æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ˜¯å­˜åœ¨ä»£ç åŒºï¼ˆé™æ€åŒºï¼‰&#125;\n\n2.C++åŠ¨æ€å†…å­˜ç®¡ç†åœ¨Cè¯­è¨€ä¸­ï¼ŒåŸºæœ¬çš„åŠ¨æ€å†…å­˜ç®¡ç†é€šè¿‡mallocå’Œfreeå®ç°\nint* ptr = (int*)malloc(sizeof (int)*4);//å †free (ptr);\n\nåœ¨C++ä¸­ï¼Œå¯¹åº”äº§ç”Ÿäº†newå’Œdeleteï¼Œå®ƒä»¬æ¯”å‰è€…æ›´åŠ é«˜çº§ï¼Œå…·æœ‰æ›´å¤šç‰¹æ€§\n2.1åŸºæœ¬è®¤è¯†newå’Œdeleteä¸‹é¢æ˜¯åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼Œæƒ³å¿…å¤§å®¶çœ‹äº†ä¹‹åï¼Œæ˜¯â€œæœ‰æ‰‹å°±è¡Œâ€ğŸ˜‚\nint*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´   int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10   int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´   //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼      delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´   delete p2;//åŒä¸Š      //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„   delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„\n\n2.2æ“ä½œç±»å¯¹è±¡newç›¸æ¯”äºmallocï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºå¤„ç†è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ã€‚ç±»å’Œå¯¹è±¡å°±æ˜¯C++ä¸­ä¸Cè¯­è¨€å®Œå…¨ä¸åŒçš„è‡ªå®šä¹‰ç±»å‹ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œå½“ä½ ä½¿ç”¨ç±»ååˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚é‚£å¦‚æœæˆ‘ä»¬ç”¨newæ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„å¯¹è±¡å‘¢ï¼Ÿ\nclass Stack&#123;private:    int* _a;&#125;int main()&#123;    Stack* p1=(Stack*)malloc(sizeof(Stack));    Stack* p2=new Stack;        return 0;&#125;\n\nè¿™æ—¶å€™çš„åŒºåˆ«å°±åœ¨äº\n\nnewåœ¨åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°\nmallocåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°\n\nè¿™æ ·å°±èƒ½è§£é‡Šï¼Œä¸ºä»€ä¹ˆC++è¦å•ç‹¬å¼„å‡ºä¸€ä¸ªnewï¼Œè€Œä¸æ˜¯ç»§ç»­æ²¿ç”¨Cè¯­è¨€çš„mallocäº†ã€‚å› ä¸ºæˆ‘ä»¬åœ¨classä¸­å®šä¹‰æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œå¤§å¤šæ•°æ˜¯å®šä¹‰æˆç§æœ‰çš„ã€‚å¦‚æœå¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œæˆ‘ä»¬å¾ˆéš¾ä»å¤–éƒ¨è®¿é—®ç±»å†…éƒ¨çš„ç§æœ‰æˆå‘˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚\næ‰€ä»¥newçš„å‡ºç°ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨å †ä¸Šå¼€è¾Ÿå¯¹è±¡ç©ºé—´çš„åŒæ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚\nä¸éš¾ç†è§£ï¼Œdeleteå’Œfreeçš„åŒºåˆ«ä¹Ÿæ˜¯å¦‚æ­¤ï¼š\n\nå½“ä½ è°ƒç”¨deleteçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè°ƒç”¨ç±»çš„ææ„å‡½æ•°\nä½¿ç”¨freeä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå¯èƒ½é€ æˆå†…å­˜æ³„æ¼\n\n\n2.3å¯¹è±¡æ•°ç»„// ç”³è¯·å•ä¸ªTestç±»å‹çš„å¯¹è±¡ Test* p1 = new Test; delete p1;  // ç”³è¯·10ä¸ªTestç±»å‹çš„å¯¹è±¡ Test* p2 = new Test[10]; delete[] p2;\n\nå’Œå†…ç½®ç±»å‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨newæ¥å®ç°å¼€è¾Ÿå¯¹è±¡æ•°ç»„\næ³¨æ„ï¼Œåœ¨deleteæ“ä½œçš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„åŒ¹é…é—®é¢˜ï¼Œä¸èƒ½ç›´æ¥ç”¨delete p2æ¥é‡Šæ”¾å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´\n\n2.4ç»™æ„é€ å‡½æ•°ä¼ å‚å¦‚æœè¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ˜¯åŒ…å«å‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åœ¨å¼€è¾Ÿç©ºé—´ï¼Œè°ƒç”¨æ„é€ å‡½æ•°æ—¶ä¼ å‚ï¼ˆæ³¨æ„æ‹¬å·åŒºåˆ«ï¼‰\nTest* p3 = new Test(10);//ç»™å¯¹è±¡Testçš„æ„é€ å‡½æ•°ä¼ å‚delete p3;\n\n\n3.operator new&#x2F;deleteå‡½æ•°çœ‹åˆ°è¿™ä¸ªåå­—ï¼Œä¼°è®¡ä½ å’Œæˆ‘ä¸€æ ·ï¼Œä¼šä¸‹æ„è¯†çš„è®¤ä¸ºè¿™ä¸ªæ˜¯c++ä¸­å¯¹newå’Œdeleteæ“ä½œç¬¦çš„é‡è½½ã€‚nopeï¼è¿™ä¸¤ä¸ªå®é™…ä¸Šæ˜¯C++ä¸­å®ç°newå’Œdeleteçš„ä¸€éƒ¨åˆ†å‡½æ•°\nä¸ºå•¥è¯´æ˜¯ä¸€éƒ¨åˆ†å‘¢ï¼Œè®©æˆ‘ä»¬æ¥åº·åº·å®ƒçš„æºç \noperator new (std::size_t sz) _GLIBCXX_THROW (std::bad_alloc)&#123;  void *p;  /* malloc (0) is unpredictable; avoid it.  */  if (sz == 0)    sz = 1;  while (__builtin_expect ((p = malloc (sz)) == 0, false))    &#123;      new_handler handler = std::get_new_handler ();      if (! handler)    _GLIBCXX_THROW_OR_ABORT(bad_alloc());      handler ();    &#125;  return p;&#125;\n\nä½ å›å¤ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°æœ€ç»ˆä½¿ç”¨äº†mallocæ¥å¼€è¾Ÿç©ºé—´ï¼Œåªæ˜¯åœ¨è¿™ä¹‹ä¸Šï¼Œnewè¿˜å¼•å…¥äº†æŠ›å¼‚å¸¸æœºåˆ¶\n\nCè¯­è¨€ä¸­ï¼Œmallocé”™è¯¯ä¼šè¿”å›nullæŒ‡é’ˆ\nC++ä¸­ï¼Œnewé”™è¯¯ä¼šæ‰§è¡ŒæŠ›bad_allocå¼‚å¸¸æ“ä½œ\n\nä¸çŸ¥æŠ›å¼‚å¸¸æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥æš‚ä¸”ä¸ç”¨ç†è§£å®ƒã€‚åªéœ€è¦çŸ¥é“ï¼Œå½“newå¤±è´¥çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¼šç›´æ¥æŠ¥é”™ç»ˆæ­¢ç¨‹åºï¼Œè€Œä¸æ˜¯å’Œmallocä¸€æ ·ï¼Œå°†æŒ‡é’ˆå˜ç©ºæŒ‡é’ˆï¼Œä»è€Œå¯¼è‡´å¯èƒ½å‡ºç°çš„è§£å¼•ç”¨ç©ºæŒ‡é’ˆæ“ä½œã€‚\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‡½æ•°\noperator newå¯¹è±¡çš„æ„é€ å‡½æ•°\n\nåœ¨VSä¸­æ‰“å¼€è°ƒè¯•ï¼Œè½¬åˆ°åæ±‡ç¼–ï¼Œä½ ä¾¿å¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨callè¿™ä¸¤ä¸ªå‡½æ•°çš„æ“ä½œ\n\nå†æ¥çœ‹çœ‹operator deleteçš„ä»£ç \n\nhttps://cplusplus.com/reference/new/operator%20delete/\n\nvoid operator delete(void *pUserData)&#123;\t_CrtMemBlockHeader * pHead;\tRTCCALLBACK(_RTC_Free_hook, (pUserData, 0));\tif (pUserData == NULL)\t\treturn;\t_mlock(_HEAP_LOCK); /* block other threads */\t__TRY\t/* get a pointer to memory block header */\tpHead = pHdr(pUserData);\t/* verify block type */\t_ASSERTE(_BLOCK_TYPE_IS_VALID(pHead-&gt;nBlockUse));\t_free_dbg( pUserData, pHead-&gt;nBlockUse );\t__FINALLY\t_munlock(_HEAP_LOCK); /* release other threads */\t__END_TRY_FINALLY\treturn;&#125;\n\næˆ‘ä»¬å‘ç°ï¼Œdeleteæœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨freeå®ç°çš„\n\nä½†æ˜¯è¿™é‡Œçš„åæ±‡ç¼–ï¼Œæˆ‘å°±æœ‰ç‚¹çœ‹ä¸æ‡‚äº†ã€‚çœ‹èµ·æ¥ä¹Ÿè°ƒç”¨äº†ä¸€ä¸ªStackå‡½æ•°ï¼Œå§‘ä¸”è®¤ä¸ºé‚£ä¸ªå°±æ˜¯Stackçš„ææ„å‡½æ•°å§\n\n3.1 newå’Œdeleteçš„å®ç°åŸç†çœ‹åˆ°è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹newå’Œdeleteçš„å®ç°åŸç†ã€‚\nnewçš„åŸç†ï¼š\n\nè°ƒç”¨opeartor newç”³è¯·ç©ºé—´ï¼Œé”™è¯¯æ—¶æŠ›å¼‚å¸¸\nå¦‚æœæ“ä½œçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™è°ƒç”¨æ„é€ å‡½æ•°\n\nnew int[N]åŸç†:\n\nè°ƒç”¨operator new[]ï¼ˆæ²¡é”™åº“é‡Œé¢è¿˜æœ‰ä¸€ä¸ªè¿™ä¸ªå‡½æ•°ï¼‰\nåœ¨operator new[]ä¸­å®é™…è°ƒç”¨Nä¸ªoperator newæ¥ç”³è¯·ç©ºé—´\nå¦‚æœæ“ä½œçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™è¿˜ä¼šåˆ†åˆ«è°ƒç”¨Næ¬¡æ„é€ å‡½æ•°\n\ndeleteçš„åŸç†ï¼š\n\nåœ¨åŸå§‹ç©ºé—´ä¸Šè°ƒç”¨ææ„å‡½æ•°ï¼Œæ¸…æ¥šå†…å®¹\nè°ƒç”¨operator deleteæ‰§è¡Œå¯¹è±¡ç©ºé—´çš„freeæ“ä½œ\n\ndelete int[N]çš„åŸç†ï¼š\n\nè°ƒç”¨Næ¬¡ææ„å‡½æ•°\nè°ƒç”¨operator delete[]ï¼Œå®é™…è°ƒç”¨Nä¸ªoperator deleteæ¥é‡Šæ”¾Nä¸ªå¯¹è±¡çš„ç©ºé—´\n\n3.2 deleteåŠ []å’Œä¸åŠ çš„åŒºåˆ«\n 1ã€delete é‡Šæ”¾newåˆ†é…çš„å•ä¸ªå¯¹è±¡æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜\n\nâ€‹     2ã€delete[] é‡Šæ”¾newåˆ†é…çš„å¯¹è±¡æ•°ç»„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜\nâ€‹     3ã€deleteå¤„ç†å•ä¸ªç±»ç±»å‹ï¼Œå…ˆä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œé‡Šæ”¾å®ƒæ‰€å èµ„æºï¼Œç„¶åé‡Šæ”¾å®ƒæ‰€å å†…å­˜ç©ºé—´ã€‚\nâ€‹     4ã€deleteå¤„ç†æ•°ç»„ç±»ç±»å‹çš„æ—¶å€™ï¼Œä¼šå¯¹æ¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡éƒ½è°ƒç”¨å®ƒä»¬çš„ææ„å‡½æ•°ï¼Œç„¶åå†é‡Šæ”¾å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚æ‰€ä»¥å¯¹äºç±»ç±»å‹çš„æ•°ç»„å¦‚æœä¸è°ƒç”¨delete[],é‚£å°±åªè°ƒç”¨äº†ä¸‹æ ‡ä¸º0çš„å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚\nâ€‹     5ã€ä¸¤ä¸ªéƒ½ä¼šé‡Šæ”¾æ‰€å å†…å­˜ï¼Œå¯¹äºå†…ç½®ç±»å‹ä¸ç®¡æ˜¯æ•°ç»„è¿˜æ˜¯å•ä¸ªå¯¹è±¡ï¼Œéƒ½å¯ä»¥æ··ç”¨ï¼Œæ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºå¯¹äºå†…ç½®ç±»å‹ï¼Œå®ƒåªå¹²ä¸€ä»¶äº‹ï¼Œå°±æ˜¯é‡Šæ”¾å®ƒä»¬æ‰€å å†…å­˜\nâ€‹     6ã€å¦‚æœå¯¹äºå•ä¸ªç±»å¯¹è±¡ï¼Œdeleteå’Œdelete[]éƒ½å¯ä»¥ï¼Œå› ä¸ºdeleteæ˜¯çŸ¥é“å®ƒè¦é‡Šæ”¾å¤šå¤§ç©ºé—´çš„ï¼ŒåŠ ä¸åŠ []æ‹¬å·çš„åŒºåˆ«æ˜¯å¯¹ä¸å¯¹æ¯ä¸ªå¯¹è±¡è°ƒç”¨ææ„å‡½æ•°ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªçš„è¯ï¼Œå®ƒå°±è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥æ²¡æœ‰å…³ç³»ã€‚\n4.å®šä½newå®šä½newè¡¨è¾¾å¼ä¼šåœ¨å·²åˆ†é…çš„åŸå§‹å†…å­˜ç©ºé—´ä¸­è°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡\n\nå•Šå˜ï¼Œnewä¸æ˜¯ä¼šè‡ªå·±è°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿè¿™ä¸ªå®šä½newæœ‰æ˜¯æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ\n\næŸ¥é˜…äº†ä¸€äº›æˆ‘ç°åœ¨çœ‹ä¸æ‡‚çš„èµ„æ–™åï¼Œäº†è§£åˆ°ï¼Œå®šä½newçš„æ“ä½œå¤šåŠæ˜¯é…åˆè‡ªå·±å†™çš„å†…å­˜æ± æ¥è¿›è¡Œæ“ä½œã€‚åœ¨ä¹‹å‰åšå®¢ä¸­å‡ºç°çš„Tcmallocå°±æ˜¯è°·æ­Œå†™çš„ä¸€ä¸ªå†…å­˜æ± \n4.1ä»€ä¹ˆæ˜¯å†…å­˜æ± ï¼Ÿå½“æˆ‘ä»¬ä½¿ç”¨newæˆ–è€…mallocæ—¶ï¼Œæ˜¯é€šè¿‡ç¼–è¯‘å™¨å‘æ“ä½œç³»ç»Ÿç”³è¯·ç©ºé—´\nè€Œå†…å­˜æ± å°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬å†™çš„é¢„å…ˆç”³è¯·å†…å­˜ç©ºé—´çš„æ¨¡å—\nè¿™ä¸ªæ¨¡å—ä¼šåœ¨æ‰§è¡Œåï¼Œå…ˆé¢„å…ˆå‘æ“ä½œç³»ç»Ÿè¦ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„ç©ºé—´ã€‚æˆ‘ä»¬åç»­çš„æ“ä½œå°±æ˜¯åœ¨è¿™ä¸ªå·²ç»å¼€è¾Ÿå¥½çš„ç©ºé—´ä¸­å†æ¬¡ç”³è¯·ç©ºé—´æ¥å®ç°çš„\nå› ä¸ºè¿™æ ·å°±æ˜¯ä»è‡ªå·±çš„å£è¢‹é‡Œé¢æ‹¿ä¸œè¥¿ï¼Œæ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œæ•ˆç‡å°±ä¼šæé«˜ä¸å°‘ã€‚\nä½†æ˜¯è¿™æ ·å°±æ²¡æœ‰äº†newæœ¬èº«è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°çš„ä¼˜åŠ¿ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨æ„é€ å‡½æ•°\n4.2å®šä½newçš„ä½¿ç”¨new(place_address) typeæˆ–è€…new(place_address) type(initializer-list)\n\nä»¥ä¸‹é¢è¿™ä¸ªç±»ä¸ºä¾‹\nclass Stack &#123;public:    Stack(int num = 5)    &#123;        _a = new int[num];        _capa = num;        cout &lt;&lt; &quot;Stack(int)&quot; &lt;&lt; endl;    &#125;    ~Stack()    &#123;        delete[] _a;        _capa = 0;        cout &lt;&lt; &quot;~Stack()&quot; &lt;&lt; endl;    &#125;private:    int* _a;    int _capa;&#125;;\n\næˆ‘ä»¬å…ˆä½¿ç”¨mallocæ¥æ¨¡æ‹Ÿæ²¡æœ‰è°ƒç”¨æ„é€ å‡½æ•°çš„æƒ…å†µï¼Œå†ä½¿ç”¨å®šä½newæ¥è°ƒç”¨æ„é€ å‡½æ•°\nint main()&#123;    Stack* p= (Stack*)malloc(sizeof(Stack));\tnew(p) Stack; //å¦‚æœç±»çš„æ„é€ å‡½æ•°æœ‰å‚æ•°æ—¶ï¼Œæ­¤å¤„éœ€è¦ä¼ å‚&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æˆåŠŸè°ƒç”¨äº†æ„é€ å‡½æ•°\n\n\n5.æ›´å¤šçŸ¥è¯†ç‚¹5.1 mallocå’Œnewçš„åŒºåˆ«malloc&#x2F;freeå’Œnew&#x2F;deleteçš„å…±åŒç‚¹æ˜¯ï¼šéƒ½æ˜¯ä»å †ä¸Šç”³è¯·ç©ºé—´ï¼Œå¹¶ä¸”éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é‡Šæ”¾\nä¸åŒçš„åœ°æ–¹æ˜¯ï¼š \n\nmallocå’Œfreeæ˜¯å‡½æ•°ï¼Œnewå’Œdeleteæ˜¯æ“ä½œç¬¦\nmallocç”³è¯·çš„ç©ºé—´ä¸ä¼šåˆå§‹åŒ–ï¼Œnewå¯ä»¥åˆå§‹åŒ–ï¼ˆé€šè¿‡new int(10))\nmallocç”³è¯·ç©ºé—´æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è®¡ç®—ç©ºé—´å¤§å°å¹¶ä¼ é€’ï¼Œnewåªéœ€åœ¨å…¶åè·Ÿä¸Šç©ºé—´çš„ç±»å‹å³å¯ï¼ˆå…¶å®å°±æ˜¯çœç•¥äº†sizeofè¿™ä¸€æ­¥çš„æ“ä½œï¼‰\nmallocçš„è¿”å›å€¼ä¸ºvoid*, åœ¨ä½¿ç”¨æ—¶å¿…é¡»å¼ºè½¬ï¼Œnewä¸éœ€è¦ï¼Œå› ä¸ºnewåè·Ÿçš„æ˜¯ç©ºé—´çš„ç±»å‹\nmallocç”³è¯·ç©ºé—´å¤±è´¥æ—¶ï¼Œè¿”å›çš„æ˜¯NULLï¼Œå› æ­¤ä½¿ç”¨æ—¶å¿…é¡»åˆ¤ç©ºï¼Œnewä¸éœ€è¦ï¼Œä½†æ˜¯newéœ€è¦æ•è·å¼‚å¸¸\nç”³è¯·è‡ªå®šä¹‰ç±»å‹å¯¹è±¡æ—¶ï¼Œmalloc&#x2F;freeåªä¼šå¼€è¾Ÿç©ºé—´ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°ï¼Œè€Œnewåœ¨ç”³è¯·ç©ºé—´åä¼šè°ƒç”¨æ„é€ å‡½æ•°å®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–ï¼Œdeleteåœ¨é‡Šæ”¾ç©ºé—´å‰ä¼šè°ƒç”¨ææ„å‡½æ•°å®Œæˆç©ºé—´ä¸­å†…å­˜çš„æ¸…ç†\n\n5.2 å†…å­˜æ³„æ¼æˆ‘ä»¬çŸ¥é“ï¼Œå½“å †åŒºç”³è¯·çš„ç©ºé—´æ²¡æœ‰è¿›è¡Œé‡Šæ”¾çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ï¼Œé€ æˆå†…å­˜çš„æµªè´¹ï¼Œç”šè‡³å¯¼è‡´æ“ä½œç³»ç»Ÿboomï¼\n\n\nå †å†…å­˜æ³„æ¼\n\nå †å†…å­˜æŒ‡çš„æ˜¯ç¨‹åºæ‰§è¡Œä¸­ä¾æ®é¡»è¦åˆ†é…é€šè¿‡malloc / calloc / realloc / newç­‰ä»å †ä¸­åˆ†é…çš„ä¸€å—å†…å­˜ï¼Œ ç”¨å®Œåå¿…é¡»é€šè¿‡è°ƒç”¨ç›¸åº”çš„ freeæˆ–è€…delete åˆ æ‰ã€‚å‡è®¾ç¨‹åºçš„è®¾è®¡é”™è¯¯å¯¼è‡´è¿™éƒ¨åˆ†å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆä»¥åè¿™éƒ¨åˆ†ç©ºé—´å°†æ— æ³•å†è¢«ä½¿ç”¨ï¼Œå°±ä¼šäº§ç”Ÿå †å†…å­˜æ³„æ¼\n\nç³»ç»Ÿèµ„æºå¯¼è‡´çš„æ³„æ¼\n\nç³»ç»Ÿèµ„æºæ³„æ¼ æŒ‡ç¨‹åºä½¿ç”¨ç³»ç»Ÿåˆ†é…çš„èµ„æºï¼Œæ¯”æ–¹å¥—æ¥å­—ã€æ–‡ä»¶æè¿°ç¬¦ã€ç®¡é“ç­‰æ²¡æœ‰ä½¿ç”¨å¯¹åº”çš„å‡½æ•°é‡Šæ”¾æ‰ï¼Œå¯¼è‡´ç³»ç»Ÿ èµ„æºçš„æµªè´¹ï¼Œä¸¥é‡å¯å¯¼è‡´ç³»ç»Ÿæ•ˆèƒ½å‡å°‘ï¼Œç³»ç»Ÿæ‰§è¡Œä¸ç¨³å®šã€‚\n\né™¤äº†å¿˜è®°freeæˆ–è€…deleteä¹‹å¤–ï¼Œå¦å¤–çš„ä¸€äº›æƒ…å†µå¯¼è‡´ç¨‹åºæå‰ç»ˆæ­¢ï¼Œä¹Ÿä¼šå‡ºç°å†…å­˜æ³„æ¼\nint main()&#123;    Stack* p1 = (Stack*)malloc(sizeof(Stack));    Stack* p2 = new Stack;            free(p1);    return 1;//åªæ˜¯åšä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šå“ªæœ‰äººè¿™ä¹ˆå†™ä»£ç å•Šï¼        delete p2;    return 0;&#125;\n\næ¯”å¦‚ä¸Šé¢è¿™ä¸ªå‡½æ•°ä¸­ï¼Œfreeä¹‹åæ‰§è¡Œäº†returnï¼Œè·³è¿‡äº†deleteçš„æ“ä½œï¼Œå³å¯¼è‡´p2çš„å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå‡ºç°äº†å†…å­˜æ³„æ¼\nè§£å†³å†…å­˜æ³„æ¼æœ‰å¾ˆå¤šåŠæ³•ï¼Œå…¶ä¸­æœ€å¥½çš„åŠæ³•å°±æ˜¯ç»´æŒä¸€ä¸ªè‰¯å¥½çš„ä»£ç é£æ ¼ï¼Œé¿å…å‡ºç°å¿˜è®°é‡Šæ”¾å†…å­˜çš„æƒ…å†µï¼\n5.3 æ·±æ‹·è´è¿™ä¸ªéº»çƒ¦å¤§å®¶ç§»æ­¥ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢å•¦\n\nhttps://blog.csdn.net/muxuen/article/details/124881928?spm=1001.2014.3001.5501\n\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸäº†\næœŸæœ«è€ƒè¯•å…¶å®å·²ç»ç»“æŸ5å¤©äº†ï¼Œæˆ‘è¿˜åœ¨æ‘¸é±¼â€¦â€¦å‘œå‘œ\n\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€C++ã€‘æ¨¡æ¿ï¼šäº†è§£æ³›å‹ç¼–ç¨‹","url":"/2022/06/27/note_cpp/9%E6%A8%A1%E6%9D%BF/","content":"æœ¬ç¯‡æ˜¯C++æ¨¡æ¿å­¦ä¹ çš„ä¸€äº›ç¬”è®°\n\n\n[TOC]\n1.äº†è§£æ³›å‹ç¼–ç¨‹æ³›å‹ç¼–ç¨‹ï¼Œæ•…å¦‚å…¶åï¼Œæ˜¯ä¸€ä¸ªæ³›åŒ–çš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶å®ç°åŸç†ä¸ºç¨‹åºå‘˜ç¼–å†™ä¸€ä¸ªå‡½æ•°&#x2F;ç±»çš„ä»£ç ç¤ºä¾‹ï¼Œè®©ç¼–è¯‘å™¨å»å¡«è¡¥å‡ºä¸åŒçš„å‡½æ•°å®ç°\nå°±å¥½æ¯”æ´»å­—å°åˆ·æœ¯ï¼Œå¯ä»¥çµæ´»è°ƒæ•´å°åˆ·çš„æ¿å—å’Œå†…å®¹ï¼Œæ¯”åªèƒ½å›ºå®šå°åˆ·æŸä¸€ä¸ªå†…å®¹çš„é›•ç‰ˆå°åˆ·æœ¯æ•ˆç‡æ›´é«˜ï¼Œä¹Ÿè®©å°åˆ·æœ¯ç”±æ­¤å¾—åˆ°äº†æ›´å¹¿æ³›çš„åº”ç”¨ã€‚\n\nåœ¨C++ä¸­ï¼Œå‡½æ•°é‡è½½å’Œæ¨¡æ¿çš„å‡ºç°ï¼Œè®©æ³›å‹ç¼–ç¨‹å¾—åˆ°äº†å®é™…çš„åº”ç”¨ã€‚å…¶ä¸­æ¨¡æ¿ï¼Œå°±æ˜¯ç±»ä¼¼æ´»å­—å°åˆ·æœ¯ä¸€æ ·çš„å­˜åœ¨ã€‚\n2.å‡½æ•°æ¨¡æ¿å…«å…«äº†é‚£ä¹ˆå¤šæ²¡ç”¨çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å‡½æ•°æ¨¡æ¿çš„è¯­æ³•å®ç°å§\n2.1ç®€å•ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„äº¤æ¢å‡½æ•°çš„ä¾‹å­ï¼Œé€šè¿‡æ ‡æ˜æ¨¡æ¿å‚æ•°Tï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨è¯†åˆ«å‡½æ•°ä¼ å‚ï¼Œå¹¶è°ƒç”¨å‡ºä¸åŒçš„å‡½æ•°\ntemplate&lt;typename T&gt;void Swap(T&amp; left,T&amp; right)&#123;    T temp = left;    left = right;    right = temp;&#125;\n\nå…¶ä¸­ï¼Œtypenameæ˜¯å®šä¹‰æ¨¡æ¿çš„å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨classæ¥æ›¿ä»£ï¼Œä½†ä¸èƒ½ä½¿ç”¨struct\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æˆåŠŸè°ƒç”¨äº†Swapå‡½æ•°ï¼Œäº¤æ¢äº†intç±»å‹å’Œdoubleç±»å‹\n2.2å¤šä¸ªæ¨¡æ¿å‚æ•°å¦‚æœæˆ‘ä»¬å°è¯•æŠŠintå’ŒdoubleåŒæ—¶ä¼ å‚ç»™è¿™ä¸ªå‡½æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n\nç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œè¡¨ç¤ºæ¨¡æ¿å‚æ•°Tä¸æ˜ç¡®\nè¿™æ—¶å€™æˆ‘ä»¬æœ‰å‡ ç§è§£å†³æ–¹æ³•\n\né¦–å…ˆæ˜¯å°†doubleå¼ºè½¬ä¸ºintï¼ˆåè¿‡æ¥äº¦å¯ï¼‰\n\n\nä½ ä¼šå‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œé‚£æ˜¯å› ä¸ºå¼ºè½¬å¹¶ä¸æ”¯æŒç”¨doubleå¼•ç”¨intã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠå‡½æ•°ä¼ å‚ä¸­çš„å¼•ç”¨å»æ‰ï¼Œå³å¯æ­£å¸¸è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ˆæš‚ä¸”ä¸æä¼ å¼•ç”¨å’Œä¼ å€¼çš„åŒºåˆ«ï¼‰\n\n\nä½¿ç”¨å¤šä¸ªæ¨¡æ¿å‚æ•°\n\nå’Œå‡½æ•°ä¼ å‚ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªæ¨¡æ¿å‚æ•°\nåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä½¿ç”¨typeidå…³é”®å­—æ¥æ‰“å°æ¨¡æ¿å‚æ•°T1å’ŒT2çš„ç±»å‹ã€‚\n\nä½¿ç”¨typeidéœ€è¦åŒ…å«å¤´æ–‡ä»¶#include &lt;typeinfo&gt;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šå‡½æ•°åœ¨è°ƒç”¨è¿™ä¸ªæ¨¡æ¿çš„æ—¶å€™ï¼Œå·²ç»å®ä¾‹åŒ–äº†è¿™ä¸ªå‡½æ•°ï¼ˆå³æ›¿æ¢æ¨¡æ¿å‚æ•°ä¸ºæ­£ç¡®å‚æ•°ç±»å‹ï¼‰è¿™æ—¶å€™åœ¨åå°å¤„ç†çš„æ—¶å€™ï¼Œå…¶å®Showå‡½æ•°å·²ç»å®ä¾‹åŒ–ä¸ºäº†ä¸‹é¢è¿™ä¸ªæ ·å­\nvoid Show(int left, double right)&#123;    cout &lt;&lt; typeid(left).name() &lt;&lt; endl;    cout &lt;&lt; typeid(right).name() &lt;&lt; endl;&#125;\n\n2.3æ¨¡æ¿å®ä¾‹åŒ–ä¸Šé¢çš„æ–¹å¼ï¼Œæ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®ä¾‹åŒ–æ¨¡æ¿å‚æ•°ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±æŒ‡å®šå®ä¾‹åŒ–ä¸ºä»€ä¹ˆç±»å‹\n\nåˆ©ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢\nä½¿ç”¨&lt;int&gt;ç›´æ¥æŒ‡å®šå®ä¾‹åŒ–ä¸ºintç±»å‹\n\n\nä½¿ç”¨ç¬¬äºŒç§æ–¹å¼çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå¯¹å¦å¤–ä¸€ä¸ªä¸åŒ¹é…çš„å‚æ•°è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚å¦‚æœè½¬æ¢ä¸æˆåŠŸï¼Œåˆ™ä¼šæŠ¥é”™ã€‚\nå¦å¤–æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°æ¨¡æ¿å‚æ•°TåŒæ ·å¯ä»¥ç”¨æ¥ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡è¿”å›å€¼æ¥æ¨æ–­å‚æ•°Tçš„ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å°±éœ€è¦ç›´æ¥æŒ‡å®šæ¨¡æ¿å‚æ•°Tï¼Œè€Œä¸èƒ½å†™ä¸€ä¸ªint* ptr=test(10)è®©ç¼–è¯‘å™¨é€šè¿‡â€œè¿”å›å€¼æ˜¯int*æ¥æ”¶çš„ï¼Œæ‰€ä»¥å‡½æ•°æ¨¡æ¿å‚æ•°Tæ˜¯intâ€æ¥æ¨æ–­ã€‚\ntemplate&lt;typename T&gt;T* test(int num)&#123;\treturn new T[num];&#125;\n\n\nå‡½æ•°æ¨¡æ¿æ”¯æŒç»™äºˆå‚æ•°ç¼ºçœå€¼\n\nå½“ä¸€ä¸ªå‚æ•°ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå‡½æ•°æ¨¡æ¿æ˜¯æ”¯æŒç»™äºˆç¼ºçœå€¼çš„\ntemplate&lt;typename T=char&gt;T* test(int num)&#123;\treturn new T[num];&#125;\n\næ¯”å¦‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ç›´æ¥æŒ‡å®šçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šå°†Tä½œä¸ºcharç±»å‹ï¼Œè¿”å›ä¸€ä¸ªnumå¤§å°çš„charï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰çš„ç©ºé—´\næ³¨æ„ï¼šå½“æœ‰å¤šä¸ªæ¨¡æ¿å‚æ•°æ—¶ï¼Œç¼ºçœå€¼éœ€è¦ä»å³å¾€å·¦ç»™\n\nå‡½æ•°æ¨¡æ¿çš„ä¼ å‚ä¹Ÿæ”¯æŒç¼ºçœå€¼\n\ntemplate&lt;typename T1&gt;void Add(T1 left, T1 right=10)&#123;    cout &lt;&lt; &quot;Add temp &quot;&lt;&lt;typeid(left).name() &lt;&lt; &quot; &quot; &lt;&lt; typeid(right).name() &lt;&lt; endl;    cout &lt;&lt; left + right &lt;&lt; endl &lt;&lt; endl;&#125;int main()&#123;    int a=1;    Add(a);&#125;\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæ­£ç¡®è°ƒç”¨è¯¥å‡½æ•°æ¨¡æ¿\n\n2.4æ¨¡æ¿å’Œæ™®é€šå‡½æ•°åŒæ—¶å­˜åœ¨ä»¥Addå‡½æ•°ä¸ºä¾‹ï¼Œåœ¨å‡½æ•°æ¨¡æ¿å­˜åœ¨çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªintç±»å‹çš„addå‡½æ•°ã€‚è¿™éƒ½å½’åŠŸäºå‡½æ•°é‡è½½çš„å­˜åœ¨ã€‚\nåŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&lt;int&gt;æ¥æŒ‡å®šå‡½æ•°æ¨¡æ¿é‡è½½ä¸ºå·²å­˜åœ¨çš„Addå‡½æ•°ã€‚å› ä¸ºæœ¬è´¨ä¸Šè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸ä¼šå†²çªã€‚\n\nå‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»è°ƒç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°ã€‚å½“å‚æ•°å’Œå·²å­˜åœ¨çš„å‡½æ•°ä¸åŒ¹é…æ—¶ï¼Œæ‰ä¼šè°ƒç”¨å‡½æ•°æ¨¡æ¿\n2.5å‡½æ•°æ¨¡æ¿ä¸æ”¯æŒå®šä¹‰å’Œå£°æ˜åˆ†ç¦»ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šåœ¨å¤´æ–‡ä»¶ä¸­ç”Ÿå‘½å‡½æ•°ï¼Œåœ¨å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ã€‚\nä½†æ˜¯æ¨¡æ¿æ˜¯ä¸æ”¯æŒè¿™ä¹ˆåšçš„ï¼ç¼–è¯‘å™¨ä¼šæŠ¥é”™ é“¾æ¥é”™è¯¯\nerror LNK2019:æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·â€¦â€¦\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å‡½æ•°æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ã€‚åœ¨éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼Œä¼šä½¿ç”¨.hppæ¥è¡¨ç¤ºè¿™ä¸ªå¤´æ–‡ä»¶æ˜¯åŒ…å«äº†å‡½æ•°å®šä¹‰çš„ï¼ˆå³.hå’Œ.cppçš„é›†åˆä½“ï¼‰ã€‚éœ€è¦æ³¨æ„ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç¡¬æ€§è¦æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨.hï¼Œå¹¶å°†å£°æ˜å’Œå®šä¹‰æ”¾å…¥å…¶ä¸­ã€‚\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nå› ä¸ºå•ç‹¬çš„.hå£°æ˜ä¼šåœ¨æºæ–‡ä»¶é¡¶éƒ¨å±•å¼€ï¼Œè€Œæ­¤æ—¶å‡½æ•°æ¨¡æ¿æ­£å¸¸æ¨æ¼”å‚æ•°ï¼Œä½†ç¼–è¯‘å™¨å¹¶æ²¡æœ‰æ‰¾åˆ°å‡½æ•°çš„å®ç°ï¼Œå³è¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰åœ°å€çš„å‡½æ•°ã€‚ä»è€Œå¯¼è‡´ç¼–è¯‘å™¨æ‰¾ä¸åˆ°å‡½æ•°çš„åœ°å€ï¼Œäº§ç”Ÿäº†ç¬¦å·è¡¨çš„é“¾æ¥é”™è¯¯\n\næœ‰æ— è§£å†³åŠæ³•ï¼Ÿ\n\nå…¶å®æ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿å‡½æ•°å®šä¹‰çš„.cppä¸­å¯¹æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å‡½æ•°è¿›è¡Œæ˜¾å¼å®ä¾‹åŒ–æŒ‡å®š\n //å¤´æ–‡ä»¶//å£°æ˜template&lt;typename T1&gt;void Add(T1 left, T1 right);//æºæ–‡ä»¶//å®šä¹‰template&lt;typename T1&gt;void Add(T1 left, T1 right)&#123;    cout &lt;&lt; left + right &lt;&lt; endl &lt;&lt; endl;&#125;//åœ¨æºæ–‡ä»¶ä¸­æ˜¾å¼å®ä¾‹åŒ–templatevoid Add&lt;int&gt;(int left, int right);templatevoid Add&lt;double&gt;(double left, double right);\n\næ˜¾å¼å®ä¾‹åŒ–éœ€è¦å¯¹æˆ‘ä»¬è¦ç”¨çš„æ‰€æœ‰å‡½æ•°è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ¯”å¦‚ä½ éœ€è¦ç”¨doubleç±»å‹ï¼Œåªæ˜¾ç¤ºå®ä¾‹åŒ–äº†intç±»å‹æ˜¯ä¸è¡Œçš„ï¼Œä¾æ—§ä¼šæŠ¥é”™ã€‚\nè¿™æ ·æ„Ÿè§‰éå¸¸å¤šä½™â€¦â€¦å¯¹å§ï¼æ‰€ä»¥è¿˜æ˜¯è€è€å®å®æŠŠå£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œé¢å§ï¼\n3.ç±»æ¨¡æ¿ç±»æ¨¡æ¿çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼Œè¿™é‡Œä½œä¸ºä¸€ä¸ªå°åŒºåˆ†ï¼Œæˆ‘ç”¨classæ¥å½“ä½œæ¨¡æ¿å‚æ•°åã€‚å®é™…ä¸Štypenameä¹Ÿæ˜¯å¯ä»¥çš„\ntemplate&lt;class T1, class T2, ...&gt;class ç±»æ¨¡æ¿å&#123;// ç±»å†…æˆå‘˜å®šä¹‰&#125;;     \n\n3.1ç®€å•ç¤ºä¾‹ä¸‹é¢ç”¨ä¸€ä¸ªéå¸¸ç®€å•çš„é¡ºåºè¡¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ç±»æ¨¡æ¿\ntemplate&lt;class T&gt;class List&#123;public:    List(int capacity = 10)        : _a(new T[capacity])        , _size(0)        , _capa(capacity)    &#123;&#125;     ~List();    T&amp; operator[](int pos)    &#123;        assert(pos &lt; _size);        return _a[pos];    &#125;private:    T* _a;    int _size;    int _capa;&#125;;//ç±»æ¨¡æ¿ä¸­å‡½æ•°æ”¾åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰æ—¶ï¼Œéœ€è¦åŠ æ¨¡æ¿å‚æ•°åˆ—è¡¨template &lt;class T&gt;List&lt;T&gt;::~List()&#123;    delete[] _a;    _size = _capa = 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡æ˜¾å¼å®ä¾‹åŒ–çš„æ–¹å¼ï¼Œæˆ‘ä»¬æˆåŠŸè®©è¿™ä¸ªç±»æ¨¡æ¿å˜æˆäº†ä¸¤ä¸ªä¸åŒç±»å‹çš„é¡ºåºè¡¨\n\n3.2æˆå‘˜å‡½æ•°å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ææ„å‡½æ•°ï¼Œå£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„æ—¶å€™ï¼ˆåŒä¸€æ–‡ä»¶ï¼‰ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ä¹Ÿéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°\n//ç±»æ¨¡æ¿ä¸­å‡½æ•°æ”¾åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰æ—¶ï¼Œéœ€è¦åŠ æ¨¡æ¿å‚æ•°åˆ—è¡¨template &lt;class T&gt;List&lt;T&gt;::~List()&#123;    delete[] _a;    _size = _capa = 0;&#125;\n\nä¸ªäººè§‰å¾—è¿™æ ·ä¹Ÿéå¸¸éº»çƒ¦ï¼Œæ—¢ç„¶æ¨¡æ¿æœ€å¥½æ˜¯å£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£è¿˜ä¸å¦‚ç›´æ¥å°†ç±»çš„æˆå‘˜å‡½æ•°ç›´æ¥å®šä¹‰åˆ°ç±»å†…éƒ¨ã€‚å¤šçœäº‹ï¼\n\nå¦‚æœæ˜¯å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸åŒæ–‡ä»¶ä¸­ï¼Œæ˜¾å¼å®ä¾‹åŒ–æ–¹å¼å¦‚ä¸‹\n\ntemplateclass List &lt;int&gt;;templateclass List &lt;double&gt;;\n\néœ€è¦ä»€ä¹ˆç±»å‹çš„ç±»ï¼Œå°±å¾—å®ä¾‹åŒ–è¿™ä¸ªç±»å‹ã€‚\n4.ç­‰å¾…æ·»åŠ â€¦â€¦æ¨¡æ¿è¿˜æœ‰æ›´å¤šå€¼å¾—å­¦ä¹ çš„å†…å®¹ï¼Œå¾…æˆ‘å…ˆæ£é¼“ä¸€ä¸‹ï¼Œå†å›æ¥æ›´æ–°è¿™ç¯‡åšå®¢\n","categories":["é‡è§C++"],"tags":["C++"]},{"title":"ã€Cè¯­è¨€ã€‘ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨","url":"/2021/08/14/note_c/10%E4%BC%A0%E5%80%BC%E8%B0%83%E7%94%A8/","content":"ä»Šå¤©å­¦ä¹ Cè¯­è¨€çš„æ—¶å€™ï¼Œæ¥è§¦åˆ°äº†ä¸¤ä¸ªå…¨æ–°çš„æ¦‚å¿µè¯ä¸å¤šè¯´ï¼Œå°±æ­¤å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹cè¯­è¨€ä¸­å‡½æ•°çš„ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ï¼Œå¸Œæœ›æœ‰æ‰€å¸®åŠ©æ¬¢è¿dalaoæ— æƒ…æŒ‡æ­£ï¼\n\n\nå¼•å­ : äº¤æ¢å‡½æ•°æˆ‘ä»¬å…ˆæ¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°\nç›®çš„æ˜¯äº¤æ¢aå’Œb\n#include&lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint b = 20;\tint tmp = 0;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);//æ˜¾ç¤ºaå’Œbæœ€åˆçš„å€¼\ttmp = a;\ta = b;\tb = tmp;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);//æŸ¥çœ‹äº¤æ¢ç»“æœ\treturn 0;&#125;\n\nè¿è¡Œçš„ç»“æœå¦‚å›¾\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ˜¯åœ¨ä¸»å‡½æ•°mainé‡Œé¢ç›´æ¥è¿›è¡Œçš„äº¤æ¢ç¨‹åºï¼Œè€Œæˆ‘ä»¬æƒ³è¦çš„å…¶å®æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„äº¤æ¢å‡½æ•°\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\tswap1(a, b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\nè‹¥æƒ³è¾¾æˆä»¥ä¸Šç›®çš„ï¼Œæˆ‘ä»¬è¦å…ˆæŠŠä¸Šè¿°ä»£ç ä¼˜åŒ–æˆä»¥ä¸‹å½¢å¼ã€‚å…¶ä¸­swap1å°±æ˜¯æˆ‘ä»¬å³å°†è¦å†™çš„è‡ªå®šä¹‰å‡½æ•°\nvoid swap1(int x, int y)&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;\n\n\nvoidè¡¨ç¤ºè‡ªå®šä¹‰å‡½æ•°æ— è¿”å›ç±»å‹\n\nè¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜å¯¹å§ï¼\nä½†æ˜¯ç»“æœå´å‘Šè¯‰æˆ‘ä»¬aå’Œbå¹¶æ²¡æœ‰è¢«äº¤æ¢\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\næŸ¥é”™æ–¹æ³•è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªè€å¸ˆæ•™æˆçš„æŸ¥é”™æ–¹æ³•ã€‚è™½ç„¶æˆ‘ä¼°è®¡å¤§å®¶éƒ½çŸ¥é“ï¼ˆå°å£°bbï¼‰\né‚£å°±æ˜¯ç”¨vsç¼–è¯‘å™¨è‡ªå¸¦çš„ç›‘è§†å™¨äº†ï¼ˆå¿«æ·é”®f10ï¼Œæˆ‘ç”¨çš„æ˜¯æœ€æ–°çš„vs2019ï¼Œå®˜ç½‘å³å¯å…è´¹ä¸‹è½½ä½¿ç”¨ï¼‰\n\n\nå·¦è¾¹æœ‰ä¸ªå¾ˆQçš„é»„è‰²å°ç®­å¤´ï¼Œå‘Šè¯‰ä½ æ­£åœ¨ç›‘è§†é‚£ä¸€æ­¥\næ¯æŒ‰ä¸€æ¬¡f10ä»£ç å°±ä¼šå¾€ä¸‹èµ°ä¸€è¡Œ\nå½“é‡åˆ°swapæ­¤ç±»å‡½æ•°æ—¶ï¼ŒæŒ‰f11è¿›å…¥å‡½æ•°ï¼Œf10ä¼šç›´æ¥è·³è¿‡å‡½æ•°\n\n\nå¯ä»¥çœ‹åˆ°ä»£ç åœ¨ç¬¬25è¡Œçš„æ—¶å€™ï¼Œxå’Œyå·²ç»è·å¾—äº†aå’Œbçš„å€¼ï¼Œtmpæ­¤æ—¶ä¸º0\n\nä¸‹ä¸€è¡Œç»§ç»­ï¼Œtmpå˜æˆ10\n\nå†ä¸‹ä¸€è¡Œï¼Œxè·å¾—yçš„å€¼ï¼Œx&#x3D;20\n\nç„¶åyè·å¾—tmpé‡Œé¢ä¿å­˜çš„xçš„å€¼ï¼Œy&#x3D;10\n\nå¯å½“æˆ‘ä»¬ä¸‹ä¸€æ­¥è·³å‡ºå‡½æ•°ï¼Œå›åˆ°ä¸»å‡½æ•°çš„æ—¶å€™\nä¼šå‘ç°aå’Œbä»ç„¶æ˜¯10å’Œ20ï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿäº¤æ¢\nèªæ˜çš„ä½ è‚¯å®šå·²ç»æƒ³åˆ°è¿™æ˜¯ä¸ºä»€ä¹ˆäº†\nå‡½æ•°ä¸­çš„xå’Œyä¸ä¸»å‡½æ•°çš„aå’Œbæ˜¯ç‹¬ç«‹çš„ï¼Œxå’Œyçš„å˜åŒ–æ— æ³•å½±å“aå’Œb\né‚£æ€ä¹ˆæ ·å‡½æ•°ä¸­çš„xå’Œyæ‰èƒ½å½±å“å‡½æ•°å¤–çš„aå’Œbï¼Œä»è€Œè¾¾åˆ°æˆ‘ä»¬äº¤æ¢çš„ç›®çš„å‘¢?\nè¿™é‡Œéœ€è¦æ¶‰åŠä¸€ä¸ªæ–°çš„å¤§å®¶éƒ½çŸ¥é“çš„æ¦‚å¿µ\n&amp; å–åœ°å€æ“ä½œç¬¦å…ˆç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è®©å¤§å®¶äº†è§£&amp;å–åœ°å€æ“ä½œç¬¦çš„ä½œç”¨\nåœ¨æˆ‘ä»¬çš„cè¯­è¨€ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½å¯¹åº”äº†ä¸€ä¸ªå®ƒç‹¬è‡ªçš„åœ°å€\nè€Œ&amp;ç¬¦å·å°±æ˜¯å–å‡ºè¿™ä¸ªå­—ç¬¦çš„åœ°å€\nint main()&#123;\tint a = 10;\tint* pa = &amp;a;//paæŒ‡é’ˆå˜é‡\t*pa = 20;//è§£å¼•ç”¨æ“ä½œ\tprintf(&quot;%d\\n&quot;, *pa);\treturn 0;&#125;\n\nè¿™é‡Œé¢çš„*paè·å–äº†açš„åœ°å€ï¼Œåœ¨æ‰“å°çš„æ—¶å€™ä¼šé¡ºç€åœ°å€æ‰¾åˆ°aï¼Œæ˜¾ç¤ºaçš„ç»“æœ\nè®©æˆ‘ä»¬ç»§ç»­\næˆ‘ä»¬å°†ä¸Šè¿°äº¤æ¢å‡½æ•°ä»£ç çš„ä¸»å‡½æ•°æ”¹æˆå¦‚ä¸‹å½¢å¼\nint main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);    //swap1(a, b);\tswap2(&amp;a, &amp;b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\næ¯”è¾ƒswap1å’Œswap2ï¼Œä¼šå‘ç°swap2æ‹¬å·ä¸­çš„aå’Œbå‰é¢éƒ½å¤šäº†ä¸€ä¸ª**&amp;æ“ä½œç¬¦**\nè¿™ä¸ªæ“ä½œç¬¦ä¼šè®©swap2ä¸å†è¯»å–aå’Œbçš„æ•°å€¼ï¼Œå³10å’Œ20\nè€Œæ˜¯ä¼šè¯»å–aå’Œbåœ¨å†…å­˜ä¸­çš„åœ°å€\nç›¸å¯¹åº”çš„ï¼Œswap2å‡½æ•°ä¹Ÿè¦æ”¹æˆå¦‚ä¸‹å½¢å¼\nå…¶å®å½¢å¼å’Œswap1åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯xå’Œyè¢«æ›¿æ¢æˆäº†**pa ä¸ pb\nvoid swap2(int* pa, int* pb)&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;\n\n\nè¡¨æ˜ paå’Œpbéƒ½æ˜¯*æŒ‡é’ˆå˜é‡\npaå’Œpbä¿å­˜çš„æ˜¯aå’Œbçš„åœ°å€\n\nè¿™æ—¶å€™æˆ‘ä»¬å†è¿è¡Œä»£ç ï¼Œaå’Œbè¢«å¾ˆå¥½çš„è°ƒæ¢äº†\næˆ‘ä»¬çš„ç›®çš„ä¹Ÿè¾¾æˆäº†\n\nå®å‚å’Œå½¢å‚è¦æƒ³äº†è§£ä¸ºä»€ä¹ˆä¸¤ä¸ªå‡½æ•°ä¼šæœ‰è¿™æ ·çš„ä¸åŒ\næˆ‘ä»¬éœ€è¦å­¦ä¹ å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰å’Œå½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰\nvoid swap1(int x, int y)&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;void swap2(int* pa, int* pb)&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;int main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\t//swap1(a, b);\tswap2(&amp;a, &amp;b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\n\nåœ¨è¿™ä¸²ä»£ç ä¸­ï¼Œaå’Œbæ˜¯å®å‚\nxã€yã€*paã€ *pbéƒ½æ˜¯å½¢å‚\n\nå¯ä»¥å€Ÿç”¨å¦å¤–ä¸€ä¸ªä»£ç çš„ä¾‹å­è¿›ä¸€æ­¥ç»™å¤§å®¶äº†è§£å®å‚\nint get_max(int x, int y)&#123;\tif (x &gt; y)\t\treturn x;\telse\t\treturn y;&#125;int main()&#123;\tint a = 10;\tint b = 20;\tint max = get_max(a, b); \tprintf(&quot;max= %d\\n&quot;, max);    max = get_max(100,300);    max = get_max(100,300+1);//å®å‚å¯ä»¥æ˜¯è¡¨è¾¾å¼\tmax = get_max(100, get_max(3, 5));//ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nåœ¨è¿™ä¸²ä»£ç ä¸­ï¼ŒæŠ›å»ä¸Šé¢çš„aå’Œb\n max &#x3D; get_max(100,300);æ˜¯æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„åŸºæœ¬æ–¹å¼\n\nè¿™é‡Œé¢çš„100å’Œ300æ˜¯å®å‚\nåŒæ—¶**300+1å’Œget_max(3, 5)**ä¹Ÿæ˜¯å®å‚\nå¯¹åº”çš„å‡½æ•°ä¸­çš„xå’Œyå°±æ˜¯å½¢å‚\n\n\nå½“å®å‚ä¼ ç»™å½¢å‚çš„æ—¶å€™å½¢å‚å…¶å®æ˜¯å®å‚çš„ä¸€ä»½ä¸´æ—¶æ‹·è´å¯¹å½¢å‚çš„æ”¹å˜æ˜¯ä¸ä¼šæ”¹å˜å®å‚çš„\n\nè¿™æ ·è§£é‡Šå¤§å®¶åº”è¯¥å¯¹å®å‚å’Œå½¢å‚æœ‰ä¸€å®šçš„è®¤è¯†äº†\næ¥ä¸‹æ¥å°±æœ‰è¯·æˆ‘ä»¬çš„æ ‡é¢˜äººç‰©éš†é‡ç™»åœº\nä¼ å€¼è°ƒç”¨ï¼Œä¼ å€è°ƒç”¨è¿™ä¸¤ä¸ªè°ƒç”¨æ–¹å¼ååˆ†é‡è¦ï¼Œè€Œä¸”ä¸¤ä¸ªå­—ä»è¯»éŸ³åˆ°é•¿ç›¸ï¼ˆbushiï¼‰éƒ½ååˆ†ç›¸ä¼¼\næ‰€ä»¥å¤§å®¶ä¸€å®šè¦æ³¨æ„åŒºåˆ†ï¼\nç®€è€Œè¨€ä¹‹\n\nå½“æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°å†…éƒ¨æ“ä½œå‡½æ•°å¤–éƒ¨çš„å˜é‡çš„æ—¶å€™â†’ä¼ å€è°ƒç”¨\nå¦‚æœæˆ‘ä»¬åªéœ€è¦å¤–éƒ¨å˜é‡çš„å€¼ï¼Œä¸éœ€è¦æ”¹å˜å¤–éƒ¨å˜é‡â†’ä¼ å€¼è°ƒç”¨\n\nä»¥ä¸Šé¢çš„äº¤æ¢å‡½æ•°ä¸ºä¾‹å­\nvoid swap1(int x, int y)//ä¼ å€¼è°ƒç”¨&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;void swap2(int* pa, int* pb)//ä¼ å€è°ƒç”¨&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;\n\nå› ä¸ºswap1é‡Œé¢çš„xå’Œyæ˜¯ä¼ å€¼è°ƒç”¨ï¼Œxå’Œyåªè·å–äº†aå’Œbçš„å€¼ï¼Œè‡ªç„¶æ— æ³•å½±å“å‡½æ•°å¤–é¢çš„aå’Œb\nè€Œswap2ä¸­çš„*pa å’Œ *pbè·å–çš„æ˜¯aå’Œbçš„åœ°å€ï¼ˆå€â†’åœ°å€ï¼‰æ‰€ä»¥å¯ä»¥å½±å“å‡½æ•°å¤–çš„aå’Œbï¼Œå®ç°å®ƒä»¬çš„äº¤æ¢\n\næ³¨ï¼šxï¼Œyï¼Œ*pa ï¼Œ *pb éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒä»¬åœ¨å‡ºäº†å‡½æ•°å¤–ä¹‹åå°±æ— æ³•ä½¿ç”¨ï¼Œä¹Ÿå¤±å»äº†ä½¿ç”¨å®ƒä»¬çš„æ„ä¹‰\n\nç»“æŸè¯­æœ¬ç¯‡å°åšå®¢åˆ°è¿™é‡Œä¹Ÿç»“æŸå•¦ï¼Œæ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nå¦‚æœæ„Ÿè§‰çœ‹å®Œä¹‹åä»æœ‰ä¸æ˜ç™½çš„åœ°æ–¹\nå¯ä»¥å»è§‚çœ‹è¿™æœŸè§†é¢‘é‡Œé¢çš„è®²è§£ï¼Œswapå‡½æ•°çš„è®²è§£åœ¨1å°æ—¶17åˆ†ã€ç‚¹æˆ‘è·³è½¬ã€‘\næˆ‘ä¹Ÿæ˜¯åˆšå­¦Cè¯­è¨€çš„å°ç™½ï¼Œåšæ–‡æœ‰é”™åœ¨æ‰€éš¾å…ï¼Œè¯·å„ä½å¤§ä½¬æ— æƒ…æŒ‡æ­£\nè¿™ç¯‡åšæ–‡è™½ç„¶å­—ä¸å¤šï¼Œä½†ä¾æ—§èŠ±äº†æˆ‘2å°æ—¶çš„æ—¶é—´ï¼Œå¦‚æœè§‰å¾—ä¸é”™å°±ç‚¹ä¸ªèµå†èµ°å§ï¼\næ±‚æ±‚äº†ï¼Œè·ªè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘sizeofæ“ä½œç¬¦","url":"/2021/08/16/note_c/11sizeof%E6%93%8D%E4%BD%9C%E7%AC%A6/","content":"@[toc]\nsizeofæ“ä½œç¬¦ä¸Šç¯‡åšå®¢æåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹  ã€é“¾æ¥ã€‘\n\nsizeofæ“ä½œç¬¦æ‹¬å·å†…çš„è¡¨è¾¾å¼æ˜¯ä¸ä¼šçœŸæ­£è®¡ç®—çš„\n\nè¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹sizeofçš„åŸºæœ¬ç”¨æ³•\nåŸºæœ¬ç”¨æ³•#include&lt;stdio.h&gt;int main()&#123;\tint a=10;\tprintf(&quot;%d\\n&quot;,sizeof(a));\tprintf(&quot;%d\\n&quot;,sizeof(int));\t\tprintf(&quot;%d\\n&quot;,sizeof a);\treturn 0; &#125; \n\næ‰“å°ç»“æœä¸º3ä¸ª4\nä½†å½“æˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼ä¹¦å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™\nprintf(&quot;%d\\n&quot;,sizeof int);\n\n\n\nåœ¨ä½¿ç”¨sizeofçš„æ—¶å€™ï¼Œå˜é‡açš„æ‹¬å·å¯ä»¥çœç•¥\n\nä½†ç›´æ¥è®¡ç®—intçš„æ—¶å€™ï¼Œæ‹¬å·ä¸èƒ½çœç•¥\n\n\n\n è¿™è¯´æ˜sizeofæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯å‡½æ•°\n\nint arr[10]=&#123;0&#125;;printf(&quot;%d\\n&quot;,sizeof  (arr));printf(&quot;%d\\n&quot;,sizeof  (int[10]));\n\nè¿™ä¸¤å¥ä»£ç æ‰“å°çš„éƒ½æ˜¯40ï¼Œå…¶ä¸­int[10]æ˜¯arræ•°ç»„çš„ç±»å‹\n\n å†·çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨9[arr]æ¥è®¿é—®æ•°ç»„å…ƒç´ \n ä½†è¿™ä¹ˆåšä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é‡‡å–arr[9]çš„å½¢å¼æ›´å¥½\n\nint arr[10]=&#123;0&#125;;arr[9]=1;printf(&quot;%d\\n&quot;,9[arr]);\n\n\n\nsizeofå’Œå‡½æ•°ä¼ å‚å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n#include&lt;stdio.h&gt;void test1(int arr[])&#123;\tprintf(&quot;%d\\n&quot;,sizeof(arr));//4&#125;void test2(char ch[])&#123;\tprintf(&quot;%d\\n&quot;,sizeof(ch));//4&#125;int main()&#123;\tint arr[10]=&#123;0&#125;;\tchar ch[10]=&#123;0&#125;;\tprintf(&quot;%d\\n&quot;,sizeof(arr));//40\tprintf(&quot;%d\\n&quot;,sizeof(ch));//10\ttest1 (arr);\ttest2 (ch);\t\t\treturn 0; &#125; \n\n32ä½å¹³å°ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹\n\n\nVSç¼–è¯‘å™¨ä¸‹\nx86â€“32ä½â€“int 4\nx64â€“64ä½â€“int 8\n\nä¸ºä»€ä¹ˆåœ¨mainå‡½æ•°é‡Œé¢æ‰“å°çš„æ˜¯40å’Œ10\nåˆ°äº†å‡½æ•°é‡Œé¢å°±åªæœ‰4äº†å‘¢ï¼Ÿ\næ•°ç»„ä¼ å‚æ•°ç»„åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œä¼ è¿‡å»çš„åªæ˜¯é¦–å…ƒç´ çš„åœ°å€\n\næ•°ç»„åä»£ç æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\né—®ï¼šä¸ºä»€ä¹ˆå­—ç¬¦å˜é‡åªå ä¸€ä¸ªå­—èŠ‚ï¼Œä½†è¿™é‡Œæ‰“å°çš„æ˜¯4å‘¢ï¼Ÿ\nç­”ï¼šè¿™é‡Œä¼ å…¥çš„æ˜¯charæ•°ç»„çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå˜é‡éƒ½æ˜¯4ä¸ªå­—èŠ‚\n\nsiezofå’Œè¡¨è¾¾å¼ç°åœ¨å°±åˆ°æˆ‘ä»¬çš„é‡ç‚¹äº†\nä¸ºä»€ä¹ˆsizeofæ‹¬å·é‡Œçš„è¡¨è¾¾å¼æ²¡æœ‰çœŸæ­£åœ°è¿ç®—ï¼Ÿ\nshort s=5;int a=10;printf(&quot;%d\\n&quot;,siezof(s=a+2));printf(&quot;%d\\n&quot;,s);\n\n\nè¿™é‡Œå°±ç‰µæ‰¯åˆ°Cè¯­è¨€ç¨‹åºè¿è¡Œçš„å‡ ä¸ªæ­¥éª¤äº†\n\nç¼–è¯‘â€“test.c\né“¾æ¥\nè¿è¡Œâ€“test.exe\n\nç®€å•åœ°è¯´ï¼Œåªæœ‰åœ¨é“¾æ¥ä¹‹åè¿è¡Œçš„ä»£ç ï¼Œæ‰ä¼šçœŸæ­£ç»™aèµ‹å€¼\nè€Œsizeofæ‹¬å·ä¸­çš„è¯­å¥ï¼Œæ˜¯åœ¨ç¼–è¯‘ä¸­è¿è¡Œçš„\nç¨‹åºä¼šå…ˆè®¡ç®—è¿™ä¸ªè¡¨è¾¾å¼ï¼Œæ¨æ–­å‡ºå®ƒçš„é•¿åº¦ï¼Œå†è¿”å›ç»™printfæ‰“å°\næ‰€ä»¥ï¼Œsizeofæ‹¬å·å†…çš„è¡¨è¾¾å¼ä¸ä¼šçœŸçš„ç»™Sèµ‹å€¼\nä½ æ˜ç™½äº†å—ï¼Ÿ\n\nsizeofå’Œstrlençš„åŒºåˆ«å†æ±‚å­—ç¬¦ä¸²çš„é•¿åº¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨sizeofï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨strlen\nè¿™ä¸¤ä¸ªçš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹\n\nsizeofä¼šè®¡ç®—æ•´ä¸ªæ•°ç»„å†…å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²æš—è—çš„â€™\\0â€™\nstrlenè®¡ç®—é•¿åº¦çš„æ—¶å€™ï¼Œé‡åˆ°â€™\\0â€™ååœæ­¢\n\nåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„sizeofåœ¨è®¡ç®—é•¿åº¦çš„æ—¶å€™æ˜¯ä¼šæ¯”strlenå¤šç®—ä¸€ä¸ªçš„\næ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©sizeofæˆ–è€…strlen\n\nç»“è¯­è¿™ç¯‡åšå®¢è¿Ÿåˆ°å¤ªä¹…äº†ï¼Œæœ€è¿‘å®åœ¨æ˜¯æœ‰ç‚¹å¿™\nå¦‚æœæœ‰é”™è¯¯ï¼Œè¿˜è¯·å„ä½dalaoæŒ‡å‡ºï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\né«˜æ•°å¤ªéš¾äº†å•Šå•Šå•Šå•Šå•Šï¼ï¼ˆå“­å”§å”§ï¼‰\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°ç»„åæ˜¯ä»€ä¹ˆï¼Ÿ","url":"/2021/08/13/note_c/12%E6%95%B0%E7%BB%84%E5%90%8D%E6%98%AF%E4%BB%80%E4%B9%88/","content":"æ•°ç»„åæ˜¯ä»€ä¹ˆï¼Ÿ@[TOC]\nåœ¨æˆ‘ä»¬æ•²ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸è¦é‡åˆ°ä½¿ç”¨æ•°ç»„çš„åœ°æ–¹\næåˆ°ä½¿ç”¨æ•°ç»„ï¼Œå°±ç¦»ä¸å¼€æ•°ç»„å\nint arr[10] = &#123; 0 &#125;;//arrå°±æ˜¯æ•°ç»„å\n\nåŒæ—¶æˆ‘ä»¬ä¹Ÿç»å¸¸è¦ç”¨åˆ°ä½¿ç”¨sizeofè®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•°çš„æƒ…å†µ\nint sz = sizeof(arr) / sizeof(arr[0]);\n\næ‰€ä»¥äº†è§£æ•°ç»„åçš„æ¦‚å¿µå¯¹äºæˆ‘ä»¬çš„cè¯­è¨€å­¦ä¹ ååˆ†é‡è¦\næ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€å¦‚é¢˜ï¼Œè¿™ä¸ªæ¦‚å¿µåœ¨æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™å°¤ä¸ºé‡è¦\næœ€ç»å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯åœ¨è‡ªå®šä¹‰å‡½æ•°å†…éƒ¨æ±‚ä¸»å‡½æ•°ä¸­arræ•°ç»„çš„å…ƒç´ ä¸ªæ•°\nvoid sp1(int arr[])&#123;\tint sz = sizeof(arr) / sizeof(arr[0]);//æ”¾åœ¨æ­¤å¤„szè®¡ç®—ä¸º1ï¼Œerr    for (i = 0; i &lt; sz; i++)&#125;\n\nè¿™æ—¶ä»ä¸»å‡½æ•°ä¼ è¿‡æ¥çš„arråªæœ‰é¦–å…ƒç´ çš„åœ°å€ï¼Œä½¿ç”¨sizeofè®¡ç®—å¾—åˆ°çš„szåªæœ‰1\nå¯¹åç»­è¦è¿›è¡Œçš„æ“ä½œå¦‚forå¾ªç¯ä¸­çš„ i&lt;szæ¥è¯´æ˜¯æ— æ•ˆçš„\nè¿™æ˜¯å› ä¸ºint arrä¼ åˆ°è‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ˜¯å½¢å‚\nè€Œå½¢å‚arræ˜¯æ— æ³•è®¡ç®—å†…éƒ¨å…ƒç´ å¤§å°çš„\nï¼ˆå…·ä½“çš„ä»£ç ç¤ºä¾‹å°†åœ¨ä¸‹ç¯‡åšå®¢çš„å†’æ³¡æ’åºä¸­å±•ç¤ºï¼‰\nä»£ç ç¤ºä¾‹1 szæˆ‘ä»¬å¯ä»¥ç”¨ç®€å•çš„ä»£ç æ¥äº†è§£ä¸åŒarrçš„ä¹¦å†™æ–¹å¼å¾—åˆ°çš„ç»“æœ\n#include &lt;stdio.h&gt;int main()&#123;    int arr[10] = &#123; 0 &#125;;\tint sz = sizeof(arr);//æ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„\tprintf(&quot;%d\\n&quot;, sz);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ç»“æœæ˜¯40ï¼Œè¿™è¡¨æ˜æ•°ç»„ä¸­10ä¸ªå…ƒç´ æ‰€å ç”¨çš„å­—èŠ‚æ˜¯40\nåœ¨è¿™ä¸ªä»£ç é‡Œé¢ï¼Œarrè¡¨ç¤ºçš„æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œsizeofæ±‚çš„è‡ªç„¶ä¹Ÿæ˜¯æ•´ä¸ªæ•°ç»„æ‰€å å­—èŠ‚çš„é•¿åº¦\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸²ä»£ç å¾—åˆ°æ•°ç»„å†…çš„å…ƒç´ ä¸ªæ•°ï¼Œç»“æœä¸º10\n#include &lt;stdio.h&gt;int main()&#123;    int arr[10] = &#123; 0 &#125;;    int sz = sizeof(arr) / sizeof(arr[0]);\tprintf(&quot;%d\\n&quot;, sz);\treturn 0;&#125;\n\n\nä»£ç ç¤ºä¾‹2ä¸‹é¢è¿™ä¸²ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰ç§ä¸åŒçš„æ–¹å¼é”®å…¥arr\n#include &lt;stdio.h&gt;int main()&#123;\tint arr[10] = &#123; 0 &#125;;\tprintf(&quot;%p\\n&quot;, &amp;arr);//1\tprintf(&quot;%p\\n&quot;, arr);//2\tprintf(&quot;%p\\n&quot;, &amp;arr[0]);//3\treturn 0;&#125;\n\n\næˆ‘ä»¬ä¼šå‘ç°ä¸‰æ¬¡æ‰“å°çš„ç»“æœæ˜¯ä¸€æ ·çš„\n\n&amp;arrå–å‡ºçš„æ˜¯æ•´ä¸ªæ•°ç»„çš„åœ°å€\narrä½œä¸ºæ•°ç»„åâ€“&gt;æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n&amp;arr[0]å–å‡ºçš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\nä½†å®é™…ä¸Šä¸‰è€…çš„æœ¬è´¨æ˜¯å®Œå…¨ä¸åŒçš„\nå¯ä»¥ç”¨+1çš„æ–¹å¼æ¥æ‰¾å‡ºå®ƒä»¬çš„ä¸åŒä¹‹å¤„\nint main()&#123;\tint arr[10] = &#123; 0 &#125;;\tprintf(&quot;%p\\n&quot;, &amp;arr);//1  &amp;arrå–å‡ºçš„æ˜¯æ•°ç»„çš„åœ°å€\tprintf(&quot;%p\\n&quot;, &amp;arr+1);\tprintf(&quot;%p\\n&quot;, arr);//2\tprintf(&quot;%p\\n&quot;, arr+1);\treturn 0;&#125;\n\n\nå¯ä»¥çœ‹åˆ°&amp;arr+1ä¹‹åçš„ç»“æœå’Œarr+1çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„\n\n\n&amp;arr+1ä¸&amp;arrä¹‹é—´ç›¸å·®40\narr+1ä¸arrä¹‹é—´ç›¸å·®4\n\nè¿™æ˜¯å› ä¸º&amp;arrä»£è¡¨çš„æ•´ä¸ªæ•°ç»„çš„åœ°å€ï¼ŒåŠ 1å³è·³è¿‡äº†æ•´ä¸ªæ•°ç»„\nè€Œarråªä»£è¡¨é¦–å…ƒç´ åœ°å€ï¼ŒåŠ 1è¡¨ç¤ºç¬¬äºŒä½çš„åœ°å€\næ€»ç»“cè¯­è¨€ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„å°çŸ¥è¯†ç‚¹ï¼Œéœ€è¦æˆ‘ä»¬è®°å½•å¹¶åŠ ä»¥äº†è§£\nåªæœ‰ç†è§£äº†ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨åç»­çš„å­¦ä¹ ã€ä»£ç åˆ›ä½œä¸­å†™å‡ºæ›´å¥½çš„ä»£ç \nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œæ±‚æ±‚äº†ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å†’æ³¡æ’åº","url":"/2021/08/25/note_c/13%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/","content":"å†’æ³¡æ’åº@[TOC]\næ— å†…é¬¼ï¼Œç›´å…¥ä¸»é¢˜ï¼\nå†’æ³¡æ’åºçš„æ€æƒ³æ ¸å¿ƒæ˜¯ï¼šæ¯”è¾ƒä¸¤ä¸¤ç›¸é‚»çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯èƒ½çš„è¯éœ€è¦äº¤æ¢\nè¯´äººè¯å°±æ˜¯\næŠŠåŸæœ¬æ˜¯9ï¼Œ8ï¼Œ7ï¼Œ6ï¼Œ5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1ï¼Œ0çš„æ•°ç»„\nå˜æˆ0 ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9\nä¹Ÿå¯ä»¥æŠŠæ— åºçš„æ•°ç»„æ’åˆ—ä¸ºæœ‰åºï¼ˆä»å°åˆ°å¤§orä»å¤§åˆ°å°ï¼‰\nåŸºæœ¬çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š\n\nåŒæ—¶æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºï¼Œ0Â·9è¿™åä¸ªæ•°å­—ï¼Œé‡æ–°æ’åˆ—å®Œéœ€è¦å¾ªç¯9æ¬¡\nä¹Ÿå°±æ˜¯Nä¸ªæ•°å­—éœ€è¦N-1è¶Ÿçš„æ’åˆ—\nä»£ç å®ç°è¯´å®Œäº†åŸç†ï¼Œè¿˜æ˜¯éœ€è¦æ•²ä»£ç æ¥å®ç°\nâ€œè€é“ä»¬int main return 0èµ°ä¸€æ³¢ï¼â€\n#include&lt;stdio.h&gt;int main()&#123;\tint arr[] = &#123; 9,8,7,6,5,4,3,2,1,0 &#125;ï¼›//æ’åºä¸ºå‡åº - å†’æ³¡æ’åº    int sz = sizeof(arr) / sizeof(arr[0]);\tbubble_sort(arr, sz);//å†’æ³¡æ’åºçš„è‡ªå®šä¹‰å‡½æ•°\treturn 0;&#125;\n\n\nä¸€ç»´æ•°ç»„[]ä¸­çš„å…ƒç´ ä¸ªæ•°å¯ä»¥çœç•¥\n\nSZçš„ä½ç½®é—®é¢˜è¿™é‡Œå¿…é¡»è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯\nsizeofå¿…é¡»åœ¨ä¸»å‡½æ•°ä¸­è®¡ç®—å…ƒç´ ä¸ªæ•°\nå› ä¸ºå¦‚æœåœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—çš„è¯\nvoid bubble_sort(int arr[])&#123;\tint sz = sizeof(arr) / sizeof(arr[0]);//æ”¾åœ¨æ­¤å¤„szè®¡ç®—ä¸º1ï¼Œerr    for (i = 0; i &lt; sz; i++)&#125;\n\nSZè®¡ç®—å‡ºæ¥çš„ç»“æœæ˜¯1\n\narræ•°ç»„åï¼Œä¼ é€çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\narrä½œä¸ºå½¢å‚ï¼Œæ— æ³•è®¡ç®—å†…éƒ¨å…ƒç´ ä¸ªæ•°\nå¯¹åç»­è¦è¿›è¡Œçš„æ“ä½œå¦‚forå¾ªç¯ä¸­çš„ i&lt;szæ¥è¯´è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—çš„szæ˜¯æ— æ•ˆçš„\n\næ›´å…·ä½“çš„åŸå› åœ¨ä¸Šä¸€ç¯‡åšå®¢ã€Šä»€ä¹ˆæ˜¯æ•°ç»„åï¼Ÿã€‹ä¸­æœ‰ä»‹ç»\næ’é™¤æ­¤é—®é¢˜åï¼Œszè®¡ç®—å‡ºçš„å…ƒç´ ä¸ªæ•°å°±æ˜¯æˆ‘ä»¬çš„N\nè¿™é‡Œä»¥iä¸ºè¶Ÿæ•°ï¼Œi&lt;szæŒ‡è¶Ÿæ•°éœ€å°äºå…ƒç´ ä¸ªæ•°\nvoid bubble_sort(int arr[], int sz)//å½¢å‚arræœ¬è´¨æ˜¯æŒ‡é’ˆ&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;        //\t&#125;&#125;\n\næ¥ç€ä¹¦å†™ç¬¬äºŒç¯çš„forå¾ªç¯ï¼Œå³æ¯ä¸€è¶Ÿå†’æ³¡æ’åºçš„æ“ä½œ\n       //ä¸€è¶Ÿå†’æ³¡æ’åºint j = 0;for (j = 0; j &lt; sz - 1 - i; j++)&#123;\tif (arr[j] &gt; arr[j + 1] )\t&#123;              //\t&#125;&#125;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯jä¸szçš„å¤§å°å…³ç³»\næŒ‰ç…§å‰é¢çš„æµç¨‹å›¾ï¼Œæ¯è¿è¡Œä¸€è¶Ÿå†’æ³¡åºåˆ—ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ•°å­—è¢«ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€åé¢\nNä¸ªå…ƒç´ éœ€è¦è¿›è¡ŒN-1æ¬¡å†’æ³¡æ’åºï¼ŒåŒæ—¶ç»è¿‡ä¸€è¶Ÿåï¼Œæ–°çš„æœ€åä¸€ä¸ªå…ƒç´ æ— éœ€é‡æ–°æ¯”å¯¹æ’åº\næ‰€ä»¥ j&lt;sz-1-i \næ¯”è¾ƒ&amp;äº¤æ¢å› ä¸ºint arrä¼ å…¥çš„æ˜¯æŒ‡é’ˆå˜é‡ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰å‡½æ•°å½±å“å‡½æ•°å¤–çš„å†…å®¹ï¼Œä¹Ÿå¿…é¡»ä½¿ç”¨æŒ‡é’ˆå˜é‡\n          //äº¤æ¢int tmp = arr[j];arr[j] = arr[j + 1];arr[j + 1] = tmp;\n\nå®é™…è¿›è¡Œä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„æ¯”è¾ƒå’Œäº¤æ¢çš„æ˜¯ä¸Šè¿°ä»£ç \ntmpè¿™ä¸ªç©ºç›’å­ä¹Ÿæ˜¯æˆ‘ä»¬çš„è€æœ‹å‹äº†\næ€»ç»“èµ·æ¥å®Œæ•´çš„è‡ªå®šä¹‰å‡½æ•°å¦‚ä¸‹\nvoid bubble_sort(int arr[], int sz)//å› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­è®¡ç®—szï¼Œè¿™é‡Œéœ€è¦åŠ ä¸Šint sz&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\t//ä¸€è¶Ÿå†’æ³¡æ’åº\t\tint j = 0;\t\tfor (j = 0; j &lt; sz - 1 - i; j++)\t\t&#123;\t\t\tif (arr[j] &gt; arr[j + 1] )\t\t\t&#123;\t\t\t\t//äº¤æ¢\t\t\t\tint tmp = arr[j];\t\t\t\tarr[j] = arr[j + 1];\t\t\t\tarr[j + 1] = tmp;\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\næ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç”¨F10çš„ç›‘è§†å™¨æŸ¥çœ‹ä»£ç è¿è¡Œæƒ…å†µ\n\narræ•°ç»„åˆå§‹åŒ–å®Œæˆï¼Œszè®¡ç®—å¾—å‡ºä¸º10\nç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œarræ•°ç»„ä¸­çš„å†…å®¹æˆåŠŸè¢«æ’åˆ—\n\nå†’æ³¡æ’åºå®Œæˆï¼\nç»“è¯­å†’æ³¡æ’åºæ˜¯å¯¹å¾ªç¯è¯­å¥ã€è‡ªå®šä¹‰å‡½æ•°ã€ä¸‹æ ‡ä»¥åŠæ•°ç»„çš„ç»¼åˆè¿ç”¨\näº†è§£å®ƒçš„åŸç†æœ‰åŠ©äºæˆ‘ä»¬å†™å‡ºæ›´ä¸ºå¤æ‚çš„æ’åˆ—ç»„åˆä»£ç \nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢äº†ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç®—æ³•","æ’åº"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•äº§ç”Ÿæ•°ç»„æœ€å¤§å€¼","url":"/2021/08/27/note_c/14%E4%BA%A7%E7%94%9F%E6%95%B0%E7%BB%84%E6%9C%80%E5%A4%A7%E5%80%BC/","content":"äº§ç”Ÿæ•°ç»„æœ€å¤§å€¼@[TOC]\nä»Šæ—¥é£å’Œæ—¥ä¸½ï¼Œæ˜¯ä¸ªå†™ï¼ˆæ°´ ï¼‰åšå®¢çš„ç»ä½³æ—¶æœº\nå’Œå¤§å®¶åˆ†äº«ä¸€ä¸²Cè¯­è¨€ä¸­äº§ç”Ÿæ•°ç»„ä¸­çš„å…ƒç´ çš„æœ€å¤§å€¼çš„ä»£ç \nå®ç°æ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°forå¾ªç¯å’Œifè¯­å¥\n#include &lt;stdio.h&gt;int main()&#123;\tint arr[] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;//æ•°ç»„åˆå§‹åŒ–\tint max = 0;//è®¾ç½®ä¸€ä¸ªæœ€å¤§å€¼\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);//è®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•°\tfor (i = 0; i &lt; sz; i++)    &#123;\t\tif (arr[i] &gt; max)\t\t&#123;\t\t\tmax = arr[i];\t\t&#125;\t&#125;\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nå½“æˆ‘ä»¬è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯10\n\nçœ‹æ ·å­æˆ‘ä»¬æˆåŠŸè¾“å‡ºäº†æ•°ç»„çš„æœ€å¤§å€¼ï¼Œè¿™ä¸²ä»£ç å·²ç»å®Œæˆäº†ï¼Œå¯¹ä¸å¯¹ï¼Ÿ\nä½†å®é™…ä¸Šè¿™ä¸²ä»£ç æ˜¯æœ‰é—®é¢˜çš„\nå…ˆåˆ«å¾€ä¸‹æ»‘ï¼Œæƒ³æƒ³å®ƒçš„é—®é¢˜å‡ºåœ¨é‚£é‡Œäº†å‘¢ï¼Ÿ\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\næ­£è´Ÿæ€§å½“æˆ‘ä»¬æŠŠæ•°ç»„é‡Œé¢çš„æ•°å­—å…¨éƒ¨æ”¹æˆè´Ÿæ•°çš„æ—¶å€™\nä½ ä¼šå‘ç°è¾“å‡ºçš„ç»“æœç­‰äº0ï¼Œå¹¶ä¸æ˜¯æ•°ç»„å†…çš„æœ€å¤§å€¼-1\n\nå‡ºç°è¿™ä¸ªæƒ…å†µçš„åŸç†ååˆ†ç®€å•ï¼Œæˆ‘ä»¬è®¾å®šçš„int max &#x3D; 0ï¼Œè€Œ0&gt;-1ï¼Œè¾“å‡ºçš„ç»“æœä¹Ÿè‡ªç„¶æ˜¯0äº†\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ä¹Ÿéå¸¸ç®€å•\nå¦‚æœæˆ‘ä»¬æ•°ç»„å†…çš„æ•°å…¨éƒ¨å°äº0ï¼Œé‚£æˆ‘ä»¬å°±è®¾å®šMAX&#x3D;æ•°ç»„å†…çš„æŸä¸ªæ•°å­—ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œè¾“å‡ºæœ€å¤§å€¼ä¸å°±è¡Œäº†ï¼Ÿ\nint main()&#123;\tint arr[] = &#123; -1,-2,-3,-4,-5,-6,-7,-8,-9,-10 &#125;;\tint max = arr[0];//arr[0]å¯¹åº”æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; max)\t\t&#123;\t\t\tmax = arr[i];\t\t&#125;\t&#125;\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\n\né¿å…ä¸åŒæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸åŒï¼Œmaxåº”è¯¥è®¾ç½®ä¸ºarr[0]è€Œä¸æ˜¯arr[3]æˆ–è€…arr[5]\n\nè¿™æ—¶å€™å†æ¬¡è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœå·²ç»æ­£ç¡®çš„æ˜¾ç¤ºä¸º-1äº†\n\nè¿›é˜¶ç©æ³•ä»¥è‡ªå®šä¹‰å‡½æ•°çš„å½¢å¼å®ç°æ­¤åŠŸèƒ½ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜\né‚£å°±æ˜¯æˆ‘åšå®¢ä¹‹å‰å†™åˆ°è¿‡çš„ ã€Šä¼ å€è°ƒç”¨å’Œä¼ å€¼è°ƒç”¨ã€‹\nå…ˆæŠŠæˆ‘ä»¬çš„ä¸»å‡½æ•°æ”¹é€ ä¸€ç•ª\nint main()&#123;    int arr[] =&#123; -1,-2,-3,-4,-5,-6,-7,-8,-9,-10 &#125;;\tint max = arr[0];\tint sz = sizeof(arr) / sizeof(arr[0]);\tsp(arr, sz,&amp;max);\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nå…¶ä¸­spå°±æ˜¯æˆ‘ä»¬è¦ç¼–å†™çš„è‡ªå®šä¹‰å‡½æ•°\n\nå› ä¸ºè‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ­¥éª¤éœ€è¦æ”¹å˜æˆ‘ä»¬ä¸»å‡½æ•°ä¸­çš„maxï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨å–åœ°å€ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¼ å€è°ƒç”¨\n\nsp(arr, sz,&amp;max);//&amp;maxæ˜¯ä¼ å€è°ƒç”¨\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬çš„è‡ªå®šä¹‰å‡½æ•°ä¹Ÿéœ€è¦ä½¿ç”¨int*æ¥æ¥æ”¶maxçš„åœ°å€\nvoid sp(int arr[], int sz,int* pm)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; *pm)\t\t&#123;\t\t\t*pm = arr[i];\t\t&#125;\t&#125;&#125;\n\nè¿è¡Œç»“æœæ­£ç¡®\n\nç»“è¯­åœ¨åˆ¶ä½œè‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¼ å€è°ƒç”¨å’Œä¼ å€¼è°ƒç”¨çš„åŒºåˆ«ã€‚å…·ä½“ä»‹ç»å‚è€ƒæˆ‘ä¹‹å‰çš„åšå®¢ [é“¾æ¥]\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç‚¹ä¸ªèµå†èµ°å‘—ï¼\nï¼ˆæ²¡æœ‰å¸®åŠ©ä¹Ÿå¯ä»¥ç‚¹ç‚¹èµ~ï¼‰\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ","url":"/2021/08/30/note_c/15%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F%E5%92%8C%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","content":"å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ[TOC]\n\n1.å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡å®šä¹‰åœ¨ä»£ç å—å¤–éƒ¨çš„æ˜¯å…¨å±€å˜é‡\nå®šä¹‰åœ¨ä»£ç å—å†…éƒ¨çš„æ˜¯å±€éƒ¨å˜é‡\nä»€ä¹ˆæ˜¯ä»£ç å—ï¼Ÿ\n//è¿™æ˜¯ä»£ç å¿«å¤–éƒ¨int main()&#123;//è¿™æ˜¯ä»£ç å—å†…éƒ¨&#125;\n\nå®é™…ä¸Šç”¨int mainæ¥æ¼”ç¤ºæ˜¯ä¸å¤ªå¯¹çš„,å®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬å®šä¹‰å˜é‡æ˜¯åœ¨int mainå†…éƒ¨å®šä¹‰çš„\nä¸‹é¢è¿™ä¸ªä¾‹å­æ›´åŠ æ¸…æ™°æ˜äº†\nint main()&#123;\tint i = 0;//è¿™æ˜¯ä»£ç å—å¤–éƒ¨-iå…¨å±€å˜é‡\tfor(i=0;i&lt;10;i++)\t&#123;//ä»£ç å—å¼€å§‹\t\tint j=0;//è¿™æ˜¯ä»£ç å—å†…éƒ¨-jå±€éƒ¨å˜é‡        for(j=0;j&lt;10;j++)\t&#125;//ä»£ç å—ç»“æŸ&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\nåŒä¸€ä¸ªå˜é‡aå¯ä»¥åœ¨å…¨å±€ï¼Œå±€éƒ¨å˜é‡ä¸­é—´åŒæ—¶ä½¿ç”¨ï¼Œå±€éƒ¨å˜é‡ä¼˜å…ˆ\n\nè¿™é‡Œæ˜¯æŒ‡åŒæ—¶å­˜åœ¨ï¼ŒåŒæ—¶ä½¿ç”¨ï¼Œä½†ä¸èƒ½åŒæ—¶å®šä¹‰\nåœ¨å±€éƒ¨çš„ä»£ç å—ä¸­é‡æ–°å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ˜¯é”™è¯¯çš„\n\nä¸‹é¢è¿™ç§å½¢å¼å°±æ˜¯ åŒæ—¶ä½¿ç”¨ä¸€ä¸ªå˜é‡\nint main()&#123;    int sz = 8;\tint i = 0;\tif(i&lt;sz)\t&#123;\t\ti=1;\t&#125;&#125;\n\n\nåœ¨æˆ‘ä»¬å®šä¹‰å˜é‡çš„æ—¶å€™ï¼Œå˜é‡çš„åå­—ä¸èƒ½ç›¸åŒ\n\nåŒæ—¶å˜é‡çš„åå­—ä¹Ÿä¸åº”å’Œåº“å‡½æ•°åç›¸åŒ\n\n\nç®€å•çš„è¯´å°±æ˜¯å˜é‡ä¸è¦é‡å¤ï¼Œä¹Ÿåˆ«å’Œåº“å‡½æ•°å†²çª\n2.å˜é‡çš„ä½œç”¨åŸŸå˜é‡çš„ä½œç”¨åŸŸ-&gt;å˜é‡çš„ç”Ÿæ•ˆåŒºåŸŸ\n\nå±€éƒ¨å˜é‡åªåœ¨å®ƒè‡ªå·±çš„ä»£ç å—ä¸­ç”Ÿæ•ˆ\nå…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªä»£ç \n\næ³¨ï¼šåœ¨VSä¸­å…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹\nä½œç”¨åŸŸçš„è§„å®šäº†å˜é‡ç”Ÿæ•ˆåŒºåŸŸ\nå¦‚æœä½ åœ¨å±€éƒ¨å˜é‡çš„ä»£ç å—å¤–éƒ¨ä½¿ç”¨è¿™ä¸ªå±€éƒ¨å˜é‡\nè¿™æ ·æ˜¯æ— æ•ˆçš„ï¼Œæ— æ³•ä½¿ç”¨\n2-1.å£°åå¤–éƒ¨å˜é‡çš„æ–¹æ³•åœ¨vsä¸­å…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹\nä½†æ˜¯å¦‚æœæºæ–‡ä»¶ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦æ‰“ä¸€ä¸²å£°æ˜æ¥åº”ç”¨å·¥ç¨‹æ–‡ä»¶ä¸­å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶çš„å…¨å±€å˜é‡\nextern int a\n\nä»¥ä¸‹æ˜¯å£°åå˜é‡å’Œå®šä¹‰å˜é‡çš„ä»£ç ç¤ºä¾‹\nã€€ã€€extern int a;//å£°æ˜å…¨å±€å˜é‡aã€€ã€€int a; //å®šä¹‰å…¨å±€å˜é‡aã€€ã€€extern int a =0 ;//å®šä¹‰å…¨å±€å˜é‡a å¹¶ç»™åˆå§‹å€¼ã€€ã€€int a =0;//å®šä¹‰å…¨å±€å˜é‡a,å¹¶ç»™åˆå§‹å€¼\n\n3.å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸè¿™ä¸ªæ¦‚å¿µå’Œä½œç”¨åŸŸååˆ†ç›¸ä¼¼\n\nå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä»è¿›å…¥â€{â€œå¼€å§‹ï¼Œç¦»å¼€â€}â€ç»“æŸ\nå…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ•´ä¸ªç¨‹åºï¼ˆVSé¡¹ç›®ï¼‰\n\n4. å±€éƒ¨å˜é‡&amp;è‡ªåŠ¨å˜é‡å±€éƒ¨å˜é‡åˆç§°è‡ªåŠ¨å˜é‡\nauto int a = 0;\n\nå®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯çœç•¥autoçš„\n\nä»¥ä¸Šå°±æ˜¯Cè¯­è¨€ä¸­æœ‰å…³å˜é‡çš„ä¸€äº›æ¦‚å¿µï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç«¥å¹´ç»å…¸æ¸¸æˆ-ä¸‰å­—æ£‹","url":"/2021/11/10/note_c/16%E4%B8%89%E5%AD%90%E6%A3%8B/","content":"@toc\né—®é¢˜å¼•å…¥ - ä»€ä¹ˆæ˜¯ä¸‰å­æ£‹ï¼Ÿæƒ³å¿…å¤§å®¶å„¿æ—¶éƒ½ç©è¿‡ï¼š#å­—æ£‹\n\nå¦‚å›¾ï¼Œå³ä¸€ä¸ª3x3çš„æ ¼å­ï¼Œç©å®¶éœ€è¦åœ¨æ¨ªã€ç«–ã€æ–œä¸‰æ¡çº¿ä¸Šå¸ƒä¸‹è‡ªå·±çš„æ£‹å­\nå…ˆè¿æˆä¸€æ¡çº¿ä¸Š3ä¸ªæ£‹å­çš„ç©å®¶è·èƒœ\nå¦‚æœæ ¼å­å¡«æ»¡åè¿˜æœªæœ‰èƒœè€…ï¼Œå³ä¸ºå¹³å±€\nä»Šå¤©å°±è®©æˆ‘ä»¬ç”¨cè¯­è¨€ä»£ç æ¥å®Œæˆä¸€ä¸ªåŸºç¡€çš„ä¸‰å­æ£‹å°æ¸¸æˆ\n\næ¶‰åŠçŸ¥è¯†ç‚¹ï¼š\näºŒç»´æ•°ç»„ã€å¾ªç¯è¯­å¥ã€è‡ªå®šä¹‰å‡½æ•°ã€è‡ªå®šä¹‰å¤´æ–‡ä»¶\nå…³è”åšå®¢ï¼šæ‰«é›·æ¸¸æˆ\n\n\nè‡ªå®šä¹‰å¤´æ–‡ä»¶æœ¬æ¬¡ä¸‰å­æ£‹ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰å¤´æ–‡ä»¶\nä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°å‰ï¼Œéœ€è¦å…ˆå¯¹å‡½æ•°è¿›è¡Œå£°æ˜\nå¤´æ–‡ä»¶å°±æ˜¯ä¸€å †å£°æ˜çš„é›†åˆ\n\né—®ï¼šä¸ºä»€ä¹ˆä¸æŠŠå‡½æ•°å£°æ˜ç›´æ¥mainå‡½æ•°å‰é¢ï¼Ÿ\n\n\nç­”ï¼šå› ä¸ºè¿™æ ·æ›´æ–¹ä¾¿å›¢é˜Ÿè¿›è¡ŒåŒä¸€ä¸ªé¡¹ç›®çš„åˆ†å·¥åˆ¶ä½œ\n\nå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰å¤´æ–‡ä»¶ï¼Ÿ\nåœ¨vsç¼–è¯‘å™¨çš„â€œè§£å†³èµ„æºç®¡ç†å™¨â€é‡Œï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°å¤´æ–‡ä»¶çš„æ–‡ä»¶å¤¹\nå³é”®å®ƒï¼Œæ–°å»ºé¡¹\n\né€‰æ‹©å¤´æ–‡ä»¶è¿›è¡Œæ–°å»ºï¼Œåç¼€æ˜¯.h\n\nåˆ›å»ºå®Œåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶ä¸­å¼•ç”¨å¤´æ–‡ä»¶\n#include &quot;game.h&quot;\n\nå¦å¤–ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„ä¸¤ä¸ªæºæ–‡ä»¶ï¼ˆä¸‹é¢ä¼šæåˆ°ï¼‰éƒ½éœ€è¦ä½¿ç”¨cè¯­è¨€çš„åº“å‡½æ•°\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå®šä¹‰å¤´æ–‡ä»¶ä¸­å¼•ç”¨åº“å‡½æ•°çš„å¤´æ–‡ä»¶\n\nè¿™æ ·åªç”¨åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å¼•ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å¤´æ–‡ä»¶\nå°±æ— éœ€å†å¼•ç”¨Cè¯­è¨€çš„åº“å‡½æ•°å¤´æ–‡ä»¶äº†\n\né¡¹ç›®ä¸­ä¸åŒæºæ–‡ä»¶ä¹‹é—´çš„è¿æ¥åœ¨ä¸‰å­æ£‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸¤ä¸ªæºæ–‡ä»¶\n\nä¸€ä¸ªæºæ–‡ä»¶ä¸ºmainå‡½æ•°æ‰€åœ¨çš„æºæ–‡ä»¶\nå¦ä¸€ä¸ªæ˜¯è‡ªå®šä¹‰å‡½æ•°çš„å®šä¹‰éƒ¨åˆ†æ‰€åœ¨çš„å¤´æ–‡ä»¶\n\nåœ¨å®é™…é¡¹ç›®åˆä½œä¸­ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å°†ä¸åŒçš„è‡ªå®šä¹‰å‡½æ•°ï¼ˆå®ç°ä¸åŒåŠŸèƒ½ï¼‰çš„å†…å®¹åˆ†å·¥ç»™æ¯ä¸ªäºº\nåŒæ ·æ˜¯ä¸ºäº†æ–¹ä¾¿å›¢é˜Ÿåˆä½œ\nåœ¨ä¸¤ä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼å’Œåœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™æ˜¯ä¸€æ ·çš„\nå¦‚åœ¨å¤´æ–‡ä»¶game.hä¸­å£°æ˜äº†åˆå§‹åŒ–æ£‹ç›˜çš„å‡½æ•°\n//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);\n\nåœ¨å®ç°è‡ªå®šä¹‰å‡½æ•°çš„game.cæ–‡ä»¶ä¸­åªéœ€è¦å¼•ç”¨å¤´æ–‡ä»¶game.h\nå°±èƒ½æ­£å¸¸ç¼–å†™è‡ªå®šä¹‰å‡½æ•°çš„å®ç°éƒ¨åˆ†\n#include &quot;game.h&quot;//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;   &#125;\n\n\nä»£ç å®ç°1.æ‰“å°èœå•&amp;åˆå§‹åŒ–æ£‹ç›˜æ¸¸æˆå˜›ï¼Œè‚¯å®šéœ€è¦ä¸€ä¸ªæœ€åŸºæœ¬çš„åˆå§‹èœå•äº†\nç©å®¶é€šè¿‡è¾“å…¥1æˆ–0æ¥é€‰æ‹©è¿›å…¥æ¸¸æˆè¿˜æ˜¯é€€å‡ºæ¸¸æˆ\nvoid menu()&#123;\tprintf(&quot;**********************\\n&quot;);\tprintf(&quot;********1.play********\\n&quot;);\tprintf(&quot;********0.exit********\\n&quot;);\tprintf(&quot;**********************\\n&quot;);&#125;\n\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¼„ä¸€ä¸ªåˆå§‹åŒ–çš„å‡½æ•°\nä¸‰å­æ£‹ä¸€å…±æ˜¯3x3çš„æ ¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å­˜æ”¾æ£‹ç›˜\nç„¶åè¦å…ˆæŠŠè¿™ä¸ªæ£‹ç›˜ä¸­çš„æ¯ä¸€ä¸ªæ£‹å­éƒ½åˆå§‹åŒ–ä¸ºç©ºæ ¼\ngame.h\n#define ROW 3//è¡Œ#define COL 3//åˆ—//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);\n\ntest.c\nchar ret = 0;//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„char board[ROW][COL] = &#123; 0 &#125;;//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼Intboard(board, ROW, COL);//è‡ªå®šä¹‰å‡½æ•°ä¼ å‚\n\ngame.c\n//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tboard[i][j] = &#x27; &#x27;;//å°†æ¯ä¸ªæ£‹ç›˜éƒ½åˆå§‹åŒ–ä¸ºç©ºæ ¼\t\t&#125;\t&#125;&#125;\n\n2.æ‰“å°æ£‹ç›˜ç©å®¶&#x2F;ç”µè„‘æ¯èµ°ä¸€æ­¥ï¼Œæ¸¸æˆéƒ½éœ€è¦æ‰“å°ä¸€æ¬¡æ£‹ç›˜ï¼Œå‘Šè¯‰ç©å®¶è‡ªå·±ä¸‹åœ¨äº†å“ªé‡Œï¼Œä»¥åŠå¯¹æ‰‹ï¼ˆç”µè„‘ï¼‰è½å­çš„ä½ç½®\nå’Œç®€å•æ‰“å°äºŒç»´æ•°ç»„ä¸åŒ\næˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªå…ƒç´ ä¹‹é—´æ‰“å°ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œè¾¾åˆ°ä»¥ä¸‹æ•ˆæœ\n//   |   |   //---|---|---//   |   |  //---|---|---//   |   |   \n\ngame.hå’Œtest.cæ–‡ä»¶ä¸­å†™æ³•åŒä¸Šï¼Œé‡ç‚¹æ¥çœ‹game.cæ–‡ä»¶ä¸­å‡½æ•°çš„å®ç°\n//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tprintf(&quot; %c &quot;, board[i][j]);//æ‰“å°æ•°ç»„å…ƒç´ \t\t\tif (j &lt; col - 1)\t\t\t\tprintf(&quot;|&quot;);//ç«–åˆ†å‰²çº¿\t\t&#125;//æ•ˆæœ  a | b | c  \t\tprintf(&quot;\\n&quot;);//æ¢è¡Œ\t\tif (i &lt; row - 1)\t\t&#123;\t\t\tfor (j = 0; j &lt; col; j++)\t\t\t&#123;\t\t\t\tprintf(&quot;---&quot;);//æ¨ªåˆ†å‰²çº¿\t\t\t\tif (j &lt; col - 1)\t\t\t\t\tprintf(&quot;|&quot;);//ç«–åˆ†å‰²çº¿\t\t\t&#125;//æ•ˆæœ---|---|---\t\t\tprintf(&quot;\\n&quot;);\t\t&#125;\t&#125;&#125;\n\nè¿™æ ·æˆ‘ä»¬å°±èƒ½è¾“å‡ºä¸€ä¸ªå¦‚å›¾æ‰€ç¤ºçš„æ£‹ç›˜\n\nä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œè¿™é‡Œå¤šäº†ä¸¤è¡Œæç¤º\nè¿™æ˜¯æˆ‘ä»¬test.cå‡½æ•°ä¸­çš„å†…å®¹\nä¸‰å­æ£‹æ¸¸æˆéœ€è¦ä»¥å‡½æ•°è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦èƒœåˆ©ï¼ˆå¹³å±€ï¼‰\nä¸è¿‡è¿™é‡Œçš„testå‡½æ•°ä¸»è¦ç”¨äºç©å®¶æœ€å¼€å§‹1å’Œ0çš„é€‰æ‹©ï¼ˆæ˜¯å¦å¼€å§‹æ¸¸æˆï¼‰\nvoid test()&#123;\tint input = 0;\tsrand((unsigned int)time(NULL));\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©!\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);&#125;int main()&#123;\ttest();\treturn 0;&#125;\n\nè¿™é‡Œçš„srandä»¥åŠtimeå‡½æ•°æ˜¯ç”¨æ¥ç”Ÿæˆéšæœºæ•°ï¼Œä½œä¸ºç”µè„‘è½å­åæ ‡çš„\nåœ¨çŒœæ•°å­—æ¸¸æˆçš„åšå®¢é‡Œä¹Ÿæœ‰æåˆ°è¿™ä¸¤ä¸ªå‡½æ•°  [é“¾æ¥]\nsrand((unsigned int)time(NULL));\n\n3.æ¸¸æˆåŸºæœ¬æµç¨‹æ‰“å°å®Œæ£‹ç›˜åï¼Œå¼€å§‹ç¼–å†™ç©å®¶è½å­ã€ç”µè„‘è½å­ä»¥åŠåˆ¤æ–­è°æœ€ç»ˆèƒœåˆ©çš„å‡½æ•°\nåœ¨æ—¥å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿæœ€å¥½ä½¿ç”¨è¿™ç§æ–¹å¼\n\nå…ˆæƒ³å¥½æ¸¸æˆçš„å…·ä½“æµç¨‹\nå†™å‡ºæµç¨‹éœ€è¦çš„å‡½æ•°åå’Œåˆ¤æ–­è¿‡ç¨‹\næœ€åè¡¥é½è‡ªå®šä¹‰å‡½æ•°çš„å®ç°\n\ntest.c\nvoid game()&#123;\tchar ret = 0;\t//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„\tchar board[ROW][COL] = &#123; 0 &#125;;\t//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼\tIntboard(board, ROW, COL);\t//æ‰“å°æ£‹ç›˜\tDisplay(board, ROW, COL);\twhile (1)\t&#123;\t\t//ç©å®¶èµ°\t\tPlayerMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t//ç”µè„‘èµ°\t\tBotMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç”µè„‘æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//åˆ¤æ–­çŠ¶æ€\tif (ret == &#x27;*&#x27;)\t&#123;\t\tprintf(&quot;ç©å®¶èµ¢äº†\\n&quot;);\t&#125;\telse if (ret == &#x27;#&#x27;)\t&#123;\t\tprintf(&quot;ç”µè„‘èµ¢äº†\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;å¹³å±€\\n&quot;);\t&#125;&#125;\n\nä»£ç ä¸­çš„Iswinå‡½æ•°ç”¨äºåˆ¤æ–­è°èƒœåˆ©\nå› ä¸ºæ¯èµ°ä¸€æ­¥çš„ç»“æœæœ‰4ç§æƒ…å†µ\n\nç©å®¶èµ¢\nç”µè„‘èµ¢\nå¹³å±€\nç»§ç»­\n\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¸å†ä½¿ç”¨æ•°å­—ï¼ˆä¹Ÿæ˜¯é¿å…å’ŒåŸæœ‰menué€‰æ‹©å¼„æ··ï¼‰\nä»¥å­—ç¬¦çš„å½¢å¼æ¥è¡¨è¾¾è¿™4ç§æƒ…å†µ\n//åœ¨æ¸¸æˆè¿›è¡Œçš„è¿‡ç¨‹ä¸­--Iswinåˆ¤æ–­//1.ç©å®¶èµ¢äº† -*//2.ç”µè„‘èµ¢äº† -#//3.å¹³å±€ -Q//4.ç»§ç»­ -C\n\n4.ç©å®¶èµ°æ£‹ç©å®¶èµ°æ£‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹\n\nç©å®¶åº”ä»¥[1,3]çš„æ•°å­—ä½œä¸ºè½å­åæ ‡ï¼Œè€Œä¸åº”ä»0å¼€å§‹ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰\nç©å®¶æ˜¯äººï¼Œå¯èƒ½è¾“é”™ã€‚åœ¨åæ ‡å‡ºé”™çš„æ—¶å€™åº”ç»™äºˆæç¤ºï¼Œå¹¶è®©ç©å®¶é‡æ–°è¾“å…¥\nè½å­å‰éœ€è¦åˆ¤æ–­è¯¥åæ ‡æ˜¯å¦å·²æœ‰å­ã€‚è‹¥æœ‰ï¼Œæç¤ºç©å®¶è¯¥å¤„å·²ä¸‹å­\n\n//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç©å®¶èµ°:&gt; \\n&quot;);\twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥ä¸‹æ£‹çš„åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\t//ä¸‹æ£‹ \t\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦è¢«å ç”¨\t\t\tif (board[x - 1][y - 1] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\tboard[x - 1][y - 1] = &#x27;*&#x27;;\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot;åæ ‡å·²è¢«å ç”¨ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t&#125;\t&#125;&#125;\n\nç»†å¿ƒçš„ä½ è‚¯å®šå‘ç°äº†ï¼Œè¿™é‡Œçš„ç©å®¶è½å­ä½¿ç”¨çš„æ˜¯*ï¼Œä¹Ÿæ­£æ˜¯ç©å®¶èƒœåˆ©æ—¶çš„è¿”å›å­—ç¬¦\nä¸‹é¢ç”µè„‘è½å­çš„æ—¶å€™ç”¨çš„å°±æ˜¯#\n\n5.ç”µè„‘è½å­ç”µè„‘è½å­æ¯”ç©å®¶è½å­ç›¸å¯¹è¾ƒç®€å•\næˆ‘ä»¬åªéœ€è¦è®©ç”Ÿæˆçš„ä¸¤ä¸ªéšæœºæ•°åœ¨1-3ä¹‹é—´å³å¯\nvoid BotMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç”µè„‘èµ°: \\n&quot;);//æç¤ºç©å®¶æ­¤å¤„æ˜¯ç”µè„‘è½å­\twhile (1)\t&#123;\t\tx = rand() % row;\t\ty = rand() % col;\t\tif (board[x][y] == &#x27; &#x27;)\t\t&#123;\t\t\tboard[x][y] = &#x27;#&#x27;;\t\t\tbreak;\t\t&#125;\t&#125;&#125;\n\n6.åˆ¤æ–­æ˜¯å¦èƒœåˆ©ä¸Šé¢æåˆ°ï¼Œæ¯èµ°ä¸€æ­¥ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç”¨Iswinå‡½æ•°åˆ¤æ–­æ˜¯å¦æœ‰äººèƒœåˆ©\nä¸‰å­æ£‹èƒœåˆ©æœ‰3ç§æ–¹å¼ï¼šè¡Œã€åˆ—ã€å¯¹è§’çº¿\nè¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«äºˆä»¥åˆ¤æ–­ï¼Œæ˜¯å¦å­˜åœ¨æŸä¸€ä¸ªè¡Œã€åˆ—ã€å¯¹è§’çº¿ä¸Šçš„å­å…¨ä¸ºç©å®¶æˆ–ç”µè„‘æ‰€ä¸‹\n//åˆ¤æ–­èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col)&#123;\t//åˆ¤æ–­è¡Œ\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tif (board[i][0] == board[i][1] &amp;&amp; board[i][1] == board[i][2] &amp;&amp; board[i][1] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[i][1];\t\t&#125;\t&#125;\t//åˆ¤æ–­åˆ—\tfor (i = 0; i &lt; col; i++)\t&#123;\t\tif (board[0][i] == board[1][i] &amp;&amp; board[1][i] == board[2][i] &amp;&amp; board[1][i] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[1][i];\t\t&#125;\t&#125;\t//åˆ¤æ–­å¯¹è§’çº¿\tif (board[0][0] == board[1][1] &amp;&amp; board[1][1] == board[2][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\tif (board[2][0] == board[1][1] &amp;&amp; board[1][1] == board[0][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\t//åˆ¤æ–­å¹³å±€\t//æ»¡äº†è¿”å›1ï¼Œä¸æ»¡è¿”å›2\tif (1 == IsFull(board, row, col))\t&#123;\t\treturn &#x27;Q&#x27;;\t&#125;\t//ç»§ç»­\treturn &#x27;C&#x27;;&#125;\n\nè¿™é‡Œåˆå‡ºç°äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒIsFull\n\n7.åˆ¤æ–­æ˜¯å¦å¹³å±€å½“ä¸Šé¢çš„åˆ¤æ–­èƒœåˆ©çš„è¯­å¥èµ°å®Œåï¼Œè‹¥è¿˜æ²¡å‡ºç°è¿”å›çš„æƒ…å†µ\næˆ‘ä»¬å°±è¦åˆ¤æ–­æ˜¯å¦æ˜¯å¹³å±€ï¼Œå³åˆ¤æ–­æ£‹ç›˜çš„9ä¸ªæ£‹å­æ˜¯å¦éƒ½å·²è½ä¸‹\nint IsFull(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tif (board[i][j] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\treturn 0;\t\t\t&#125;\t\t&#125;\t&#125;\treturn 1;//æ£‹ç›˜æ»¡äº†&#125;\n\nå¦‚æœçš„åˆ¤æ–­èƒœåˆ©å’Œå¹³å±€çš„è¯­å¥éƒ½èµ°å®Œåï¼Œè¿˜æ²¡å‡ºç°è¿”å›çš„æƒ…å†µ\nå³è¯´æ˜æ¸¸æˆå¹¶æœªåœæ­¢ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æ¸¸æˆ\n\næ¸¸æˆæ•ˆæœåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¸‰å­æ£‹æ¸¸æˆå°±å®Œæˆäº†ï¼\nè·‘ä¸€ä¸‹çœ‹çœ‹æ•ˆæœå§ï¼\n\n\n\nå®Œæ•´ä»£ç è¿™é‡Œè´´å‡ºä¸‰å­æ£‹å‡½æ•°çš„å®Œæ•´ä»£ç ä¾›å¤§å®¶å‚è€ƒ\ngame.c#define _CRT_SECURE_NO_WARNINGS 1#include &quot;game.h&quot;//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tboard[i][j] = &#x27; &#x27;;\t\t&#125;\t&#125;&#125;//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tprintf(&quot; %c &quot;, board[i][j]);\t\t\tif (j &lt; col - 1)\t\t\t\tprintf(&quot;|&quot;);\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t\tif (i &lt; row - 1)\t\t&#123;\t\t\tfor (j = 0; j &lt; col; j++)\t\t\t&#123;\t\t\t\tprintf(&quot;---&quot;);\t\t\t\tif (j &lt; col - 1)\t\t\t\t\tprintf(&quot;|&quot;);\t\t\t&#125;\t\t\tprintf(&quot;\\n&quot;);\t\t&#125;\t&#125;&#125;//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç©å®¶èµ°:&gt; \\n&quot;);\twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥ä¸‹æ£‹çš„åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\t//ä¸‹æ£‹ \t\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦è¢«å ç”¨\t\t\tif (board[x - 1][y - 1] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\tboard[x - 1][y - 1] = &#x27;*&#x27;;\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot;åæ ‡å·²è¢«å ç”¨ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t&#125;\t&#125;&#125;void BotMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç”µè„‘èµ°: \\n&quot;);\twhile (1)\t&#123;\t\tx = rand() % row;\t\ty = rand() % col;\t\tif (board[x][y] == &#x27; &#x27;)\t\t&#123;\t\t\tboard[x][y] = &#x27;#&#x27;;\t\t\tbreak;\t\t&#125;\t&#125;&#125;int IsFull(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tif (board[i][j] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\treturn 0;\t\t\t&#125;\t\t&#125;\t&#125;\treturn 1;//æ£‹ç›˜æ»¡äº†&#125;//åˆ¤æ–­èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col)&#123;\t//åˆ¤æ–­è¡Œ\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tif (board[i][0] == board[i][1] &amp;&amp; board[i][1] == board[i][2] &amp;&amp; board[i][1] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[i][1];\t\t&#125;\t&#125;\t//åˆ¤æ–­åˆ—\tfor (i = 0; i &lt; col; i++)\t&#123;\t\tif (board[0][i] == board[1][i] &amp;&amp; board[1][i] == board[2][i] &amp;&amp; board[1][i] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[1][i];\t\t&#125;\t&#125;\t//åˆ¤æ–­å¯¹è§’çº¿\tif (board[0][0] == board[1][1] &amp;&amp; board[1][1] == board[2][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\tif (board[2][0] == board[1][1] &amp;&amp; board[1][1] == board[0][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\t//åˆ¤æ–­å¹³å±€\t//æ»¡äº†è¿”å›1ï¼Œä¸æ»¡è¿”å›2\tif (1 == IsFull(board, row, col))\t&#123;\t\treturn &#x27;Q&#x27;;\t&#125;\t//ç»§ç»­\treturn &#x27;C&#x27;;&#125;\n\ntest.c#define _CRT_SECURE_NO_WARNINGS 1#include &quot;game.h&quot;void menu()&#123;\tprintf(&quot;**********************\\n&quot;);\tprintf(&quot;********1.play********\\n&quot;);\tprintf(&quot;********0.exit********\\n&quot;);\tprintf(&quot;**********************\\n&quot;);&#125;void game()&#123;\tchar ret = 0;\t//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„\tchar board[ROW][COL] = &#123; 0 &#125;;\t//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼\tIntboard(board, ROW, COL);\t//æ‰“å°æ£‹ç›˜\tDisplay(board, ROW, COL);\twhile (1)\t&#123;\t\t//ç©å®¶èµ°\t\tPlayerMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t//ç”µè„‘èµ°\t\tBotMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç”µè„‘æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//åˆ¤æ–­çŠ¶æ€\tif (ret == &#x27;*&#x27;)\t&#123;\t\tprintf(&quot;ç©å®¶èµ¢äº†\\n&quot;);\t&#125;\telse if (ret == &#x27;#&#x27;)\t&#123;\t\tprintf(&quot;ç”µè„‘èµ¢äº†\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;å¹³å±€\\n&quot;);\t&#125;&#125;void test()&#123;\tint input = 0;\tsrand((unsigned int)time(NULL));\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©!\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);&#125;int main()&#123;\ttest();\treturn 0;&#125;\n\ngame.h#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define ROW 3#define COL 3//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col);//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col);//ç”µè„‘èµ°void BotMove(char board[ROW][COL], int row, int col);//åˆ¤æ–­æ˜¯å¦èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col);//åˆ¤æ–­æ˜¯å¦æœ‰ç©ºä½#pragma once\n\n\nç»“è¯­æœ¬ç¯‡ä¸‰å­æ£‹çš„åšå®¢åˆ°æ­¤ç»“æŸäº†\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nä¸‹ç¯‡åšå®¢ä¼šæ•™å¤§å®¶ï¼Œå¦‚ä½•æ‰“åŒ…æˆ‘ä»¬çš„ä»£ç ä¸ºdllæ–‡ä»¶ï¼ˆæ­¤æ–‡ä»¶æ— æ³•ç¼–è¯‘ï¼‰\nç‚¹ä¸ªèµå†èµ°å§ï¼Œçƒçƒäº†ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç«¥å¹´ç»å…¸æ¸¸æˆ-æ‰«é›·","url":"/2021/09/03/note_c/17%E6%89%AB%E9%9B%B7/","content":"\n\næƒ³å¿…å±å¹•å‰çš„ä½ ï¼Œè‚¯å®šç©è¿‡windows XPç³»ç»Ÿè‡ªå¸¦çš„é‚£ä¸ªæ¸¸æˆï¼Œæ‰«é›·\n\nå›æƒ³å½“å¹´ï¼Œæˆ‘æ ¹æœ¬æ²¡çœ‹æ‡‚è¿™ä¸ªæ¸¸æˆæ˜¯æ€ä¹ˆç©çš„\n\næ¯”èµ·æ‰«é›·ï¼Œä¸‰ç»´å¼¹çƒå¯¹æˆ‘æ›´æœ‰å¸å¼•åŠ›\nè·‘é¢˜äº†\næœ¬ç¯‡åšå®¢å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥è¯•è¯•ï¼Œå¦‚ä½•é€šè¿‡Cè¯­è¨€ä»£ç ï¼Œåˆ¶ä½œå‡ºä¸€ä¸ªâ€œæ‰«é›·æ¸¸æˆseâ€\n1.æ¸¸æˆç¨‹åºä¸»å‡½æ•°åœ¨ç¼–å†™è¿™ç±»æ¸¸æˆä»£ç æ—¶ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°çš„ä¸»å‡½æ•°åŸºæœ¬æ˜¯ä¸€è‡´çš„\næ‰«é›·æ¸¸æˆçš„ä¸»å‡½æ•°å’ŒçŒœæ•°å­—æ¸¸æˆçš„ä¸»å‡½æ•°ç›¸å·®å¾ˆå°\nå°ç™½å¿…å­¦ï¼ç®€å•çš„Cè¯­è¨€åº”ç”¨&#x3D;&#x3D;ï¼çŒœæ•°å­—æ¸¸æˆ\nvoid menu()//ç®€æ˜“ç›®å½•&#123;\tprintf(&quot;***************************\\n&quot;);\tprintf(&quot;**** 1. play   0. exit*****\\n&quot;);\tprintf(&quot;***************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();//å®ç°æ¸¸æˆçš„å‡½æ•°\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;è¾“å…¥é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\n2.æ¸¸æˆå®ç°åŸç†æƒ³å†™å¥½ä¸€ä¸²ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æ‰«é›·æ¸¸æˆéœ€è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥å®ç°\n\næˆ‘ä»¬éœ€è¦ä¸€ä¸ª9x9çš„æ£‹ç›˜ï¼Œç”¨äºç”Ÿæˆæˆ‘ä»¬çš„é›·ä»¥åŠç©å®¶çš„æ¸¸ç©\nåœ¨cè¯­è¨€ä¸­å½“ç„¶æ— æ³•ç›´æ¥äº§ç”Ÿè¿™æ ·çš„ç”»é¢\nä½†æˆ‘ä»¬å¯ä»¥åŒç¬¦å·*æˆ–è€…#æ¥ä»£æ›¿ç½‘æ ¼ï¼Œç”¨1å’Œ0æ¥è¡¨ç¤ºæœ‰æ— é›·\nå¦‚æœæˆ‘ä»¬åªç”Ÿæˆä¸€ä¸ªæ£‹ç›˜ï¼Œé‚£1å’Œ0ä¼šç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œè¾¾ä¸åˆ°éšè—çš„æ•ˆæœ\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨äºŒç»´æ•°ç»„ç”Ÿæˆä¸¤ä¸ªæ£‹ç›˜ï¼Œä¸€ä¸ªç”¨äºå­˜æ”¾é›·ï¼Œä¸€ä¸ªç”¨äºç©å®¶çš„æ¸¸ç©\nchar mine[ROWS][COLS];//é›·åŒºå¸ƒç½®char show[ROWS][COLS];//ç©å®¶çœ‹åˆ°çš„ç•Œé¢\n\næ‰«é›·æ¸¸æˆæˆ‘ä»¬ä½¿ç”¨å¤´æ–‡ä»¶+æºæ–‡ä»¶çš„å½¢å¼æ’°å†™ä»£ç \n\nè¿™æ ·å†™ä»£ç çš„ä¼˜ç‚¹åœ¨äºåç»­æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡æ›´æ”¹.hæ–‡ä»¶ä¸­çš„æ•°ç»„ï¼Œä»è€Œæ›´æ”¹æˆ‘ä»¬çš„æ ¼å­å¤§å°\nå¦‚: æ”¹æˆ12x12çš„æ¸¸ç©ç•Œé¢ï¼Œæ”¹å˜é›·åŒºå¸ƒé›·ä¸ªæ•°ç­‰ç­‰\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨game.hä¸­å®šä¹‰è¿™äº›ç¬¦å·\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define ROW 9#define COL 9#define ROWS ROW+2#define COLS COL+2\n\nåŒæ—¶æˆ‘ä»¬è¦åœ¨ä¸»å‡½æ•°çš„æœ€ä¸Šé¢å¼•ç”¨è¿™ä¸ªè‡ªå·±å†™çš„å¤´æ–‡ä»¶\nåªè¦æŠŠåº“å‡½æ•°å¤´æ–‡ä»¶æ”¾å…¥game.hæ–‡ä»¶ï¼Œåœ¨å…¶ä»–æºæ–‡ä»¶ä¸­åªéœ€å¼•ç”¨game.h\nä¸éœ€è¦å†æ¬¡å¼•ç”¨&lt;stdio.h&gt;ã€&lt;stdlib.h&gt;ä¹‹ç±»\n#include &#x27;game.h&#x27;\n\næ£‹ç›˜å¤§å°ä¸ºä»€ä¹ˆéœ€è¦11x11ï¼Ÿä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œåœ¨ç”Ÿæˆæ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä½¿ç”¨äº†ROWSï¼Œå…¶å€¼ä¸ºROW+2\næˆ‘ä»¬æœ€ç»ˆå±•ç¤ºçš„åªæ˜¯9x9çš„æ¸¸æˆç•Œé¢ï¼Œä½†ç”Ÿæˆçš„æ£‹ç›˜å…¶å®æ˜¯11x11çš„\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨mineæ•°ç»„ä¸­å®ç°æ‰«æé›·åŒºçš„æ“ä½œ\n\nç©è¿‡æ‰«é›·æ¸¸æˆçš„ä½ è‚¯å®šçŸ¥é“ï¼šåœ¨ä½ ç‚¹å‡»ä¸€ä¸ªæ ¼å­çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªæ ¼å­ä¸æ˜¯é›·\nå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ•°å­—ï¼Œå‘Šè¯‰ä½ å®ƒå‘¨å›´çš„8ä¸ªæ ¼å­ä¸­æœ‰å‡ é¢—é›·\n\nå¦‚å›¾æ‰€ç¤ºï¼š\n\nåœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°ç»Ÿè®¡å‘¨å›´8ä¸ªæ ¼å­ä¸­é›·â€™1â€™çš„ä¸ªæ•°\nä½†æ˜¯å¦‚æœä½ æ¥åˆ°è¾¹ç¼˜ï¼Œé‚£å°±å‡ºç°é—®é¢˜äº†\n\nå¦‚æœæˆ‘ä»¬æƒ³ç»Ÿè®¡è¾¹ç¼˜çš„æ ¼å­å‘¨è¾¹æœ‰å‡ é¢—é›·ï¼Œå°±ä¼šé‡åˆ°è¿™ç§æº¢å‡ºæ•°ç»„çš„æƒ…å†µ\næ­¤æ—¶ä»£ç ä¼šæŠ¥é”™\nä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸæ¥9x9çš„åŸºç¡€ä¸Šåœ¨å‘¨å›´åŠ ä¸€åœˆç©ºç™½çš„æ ¼å­\nä¹Ÿå°±æ˜¯ä»£ç æ‰€ç¤ºçš„ROW(è¡Œ)COL(åˆ—)éƒ½è¦+2çš„æƒ…å†µ\n#define ROW 9#define COL 9#define ROWS ROW+2#define COLS COL+2\n\næ¸¸æˆè¿‡ç¨‹è¿™é‡Œç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„æ¸¸æˆè¿‡ç¨‹\n\nç©å®¶é€‰æ‹©å¼€å§‹æ¸¸æˆ\nç”Ÿæˆä¸¤ä¸ªæ£‹ç›˜ï¼Œä¸€ä¸ªæ”¾ç½®é›·\\æ‰«æé›·ï¼Œä¸€ä¸ªå‘ç©å®¶å±•ç¤ºæ¸¸æˆç•Œé¢\nç©å®¶è¾“å…¥åæ ‡ï¼Œé€‰æ‹©æ’é›·ä½ç½®\næœ‰é›·â€“&gt;ç©å®¶è¢«ç‚¸æ­»ï¼Œæ¸¸æˆç»“æŸï¼›æ— é›·â€“&gt;æ˜¾ç¤ºå‘¨è¾¹æœ‰å‡ é¢—é›·ï¼Œæ¸¸æˆç»§ç»­\næ‰€æœ‰é›·è¢«æ’å‡ºï¼Œæ¸¸æˆèƒœåˆ©\n\n\n3.æ¸¸æˆä»£ç å®ç°æ¥ä¸‹æ¥å°±è¿›å…¥æˆ‘ä»¬çš„æ¸¸æˆä»£ç éƒ¨åˆ†\n3-1.åˆå§‹åŒ–å’Œæ‰“å°//åˆå§‹åŒ–æ‰«é›·InitBoard(mine, ROWS, COLS, &#x27;0&#x27;);InitBoard(show, ROWS, COLS, &#x27;*&#x27;);//æ‰“å°æ‰«é›·DisplayBoard(mine, ROW, COL);DisplayBoard(show, ROW, COL);\n\næˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸¤ä¸ªæ£‹ç›˜ï¼Œå…¶ä¸­é›·åŒºåˆå§‹åŒ–ä¸º0ï¼ˆ0ä»£è¡¨æ— é›·ï¼‰ï¼Œå±•ç¤ºåŒºåˆå§‹åŒ–ä¸ºâ€™*â€™ï¼Œç”¨âœ³ä»£æ›¿ç•Œé¢\nåŒæ—¶æˆ‘ä»¬æ‰“å°è¿™ä¸¤ä¸ªæ£‹ç›˜ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–æ•ˆæœ\nå› ä¸ºè¿™æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ï¼Œåœ¨å¦å¤–ä¸€ä¸ª.cæ–‡ä»¶ä¸­åŒ…å«å‡½æ•°çš„å®ç°\n\n//åˆå§‹åŒ–æ£‹ç›˜void InitBoard(char board[ROWS][COLS], int rows, int cols, char set);//æ‰“å°void DisplayBoard(char board[ROWS][COLS], int row, int col);\n\nåˆå§‹åŒ–å‡½æ•°å’Œæ‰“å°å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨forè¯­å¥è¾¾æˆæˆ‘ä»¬çš„éœ€æ±‚\nvoid InitBoard(char board[ROWS][COLS], int rows, int cols, char set)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; rows; i++)\t&#123;\t\tfor (j = 0; j &lt; cols; j++)\t\t&#123;\t\t\tboard[i][j] = set;\t\t&#125;\t&#125;&#125;void DisplayBoard(char board[ROWS][COLS], int row, int col)&#123;\tint i = 0;\tint j = 0;\tprintf(&quot;------æ‰«é›·æ¸¸æˆ------\\n&quot;);\t//æ‰“å°åˆ—å·\tfor (i = 0; i &lt;= col; i++)\t&#123;\t\tprintf(&quot;%d &quot;, i);\t&#125;\tprintf(&quot;\\n&quot;);\tfor (i = 1; i &lt;= row; i++)//åªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\t&#123;\t\tprintf(&quot;%d &quot;, i);//æ‰“å°è¡Œå·\t\tfor (j = 1; j &lt;= col; j++)//åªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\t\t&#123;\t\t\tprintf(&quot;%c &quot;, board[i][j]);\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;\tprintf(&quot;--------------------\\n&quot;);&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬çš„æœ€åæ‰“å°æ£‹ç›˜çš„æ—¶å€™æ˜¯ä»i&#x3D;1å¼€å§‹çš„ï¼Œè¿™æ ·å°±èƒ½é¿å¼€æ·»åŠ çš„ç©ºç™½è¾¹ç¼˜åŒºåŸŸï¼Œåªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\nåŒæ—¶æˆ‘ä»¬æ·»åŠ äº†åˆ—å·å’Œè¡Œå·ï¼Œè¿™æ ·èƒ½è®©ç©å®¶æ¸…é™¤çš„çŸ¥é“è‡ªå·±åº”è¯¥è¾“å…¥ä»€ä¹ˆåæ ‡\n\n3-2.å¸ƒç½®é›·åŒº//å¸ƒç½®é›·SetMine(mine, ROW, COL);\n\nè¿™éƒ¨åˆ†ä»£ç æˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™å°±æœ‰ç‚¹åŠ›ä¸ä»å¿ƒäº†\nåŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå‡½æ•°\n//å¸ƒç½®åœ°é›·void SetMine(char mine[ROWS][COLS], int row, int col);\n\nåœ¨game.cä¸­å†™å…¥è‡ªå®šä¹‰å‡½æ•°çš„å®ç°\n//æ”¾ç½®é›·void SetMine(char  mine[ROWS][COLS], int row, int col)&#123;\tint count = EASY_COUNT;\twhile (count)\t&#123;\t\tint x = rand() % row + 1;\t\tint y = rand() % col + 1;\t\tif (mine[x][y] ==&#x27;0&#x27;)\t\t&#123;\t\t\tmine[x][y] = &#x27;1&#x27;;\t\t\tcount--;\t\t&#125;\t&#125;&#125;\n\nè¿™é‡Œé¢å‡ºç°äº†ä¸€ä¸ªå‰é¢æ²¡æœ‰æåˆ°çš„å˜é‡ï¼ŒEASY_COUNT\næœ¬æ¥è¿™ä¸ªä½ç½®åªæ˜¯ä¸ª10\nä½†å¦‚æœæˆ‘ä»¬æƒ³æ›´æ”¹å¸ƒé›·ä¸ªæ•°ï¼Œé‚£æ¯æ¬¡éƒ½éœ€è¦æ›´æ”¹è¿™é‡Œçš„10ï¼Œåé¢çš„ä»£ç ä¸­ä¹Ÿéœ€è¦æ›´æ”¹ï¼Œéå¸¸éº»çƒ¦\næ‰€ä»¥æˆ‘ä»¬æ”¹ä¸ºä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å˜é‡ï¼Œåœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå˜é‡çš„å€¼\n#define EASY_COUNT 10\n\nè¿™ä¸ªå€¼å°±ä»£è¡¨æˆ‘ä»¬å¸ƒç½®é›·çš„ä¸ªæ•°äº†\n3-3.ç©å®¶æ’æŸ¥é›·//åœ¨ä¸»å‡½æ•°ä¸­å¼•ç”¨è¿™ä¸ªå‡½æ•°\tFindMine(mine,show, ROW, COL);//éœ€è¦æŠŠmineæ•°ç»„ä¸­æ’æŸ¥çš„é›·æ”¾å…¥show//åœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå‡½æ•°void FindMine(char mine[ROWS][COLS], char show[ROWS][COLS],int row, int col);\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦æŠŠmineæ•°ç»„ä¸­æ’æŸ¥å‡ºçš„é›·çš„ä¸ªæ•°æ”¾å…¥showæ•°ç»„ä¸­æ‰“å°å‡ºæ¥\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠä¸¤ä¸ªæ•°ç»„éƒ½ä¼ é€è¿‡å»\n\n1.è¾“å…¥æ’æŸ¥çš„åæ ‡2.æ£€æŸ¥åæ ‡å¤„æ˜¯ä¸æ˜¯é›·(1)æ˜¯é›· -boomï¼ç‚¸æ­» -æ¸¸æˆç»“æŸ(2)ä¸æ˜¯é›· -ç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·-å­˜å‚¨æ’é›·çš„ä¿¡æ¯åˆ°showæ•°ç»„ï¼Œæ¸¸æˆç»§ç»­\n\nvoid FindMine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col)&#123;\tint x = 0;\tint y = 0;    \twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥æ’é›·åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦æ­£ç¡®\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\tif (mine[x][y] == &#x27;1&#x27;)\t\t\t&#123;\t\t\t\tprintf(&quot;å¾ˆé—æ†¾ï¼Œä½ è¢«ç‚¸æ­»äº†\\n&quot;);\t\t\t\tDisplayBoard(mine, ROW, COL);\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\t//ä¸æ˜¯é›·çš„æƒ…å†µä¸‹ï¼Œç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·\t\t\t\tint count = get_mine_count(mine, x, y);\t\t\t\tshow[x][y] = count + &#x27;0&#x27;;\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ \\n&quot;);\t\t&#125;\t&#125;&#125;\n\næ³¨æ„ï¼Œè¿™é‡Œé¢æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªä»£ç æ¥åˆ¤æ–­åæ ‡åˆæ³•æ€§\næˆ‘ä»¬çš„æ£‹ç›˜æ˜¯9x9ï¼Œç©å®¶è¦æ˜¯è¾“å…¥ä¸€ä¸ª(99,99)çš„åæ ‡ï¼Œé‚£è‚¯å®šä¸åœ¨æ•°ç»„ä¸­çš„ï¼Œæ˜¯æ— æ•ˆçš„\næˆ‘ä»¬éœ€è¦æé†’ç©å®¶ä»–è¾“é”™äº†\nâ€˜0â€™çš„ä½œç”¨show[x][y] = count + &#x27;0&#x27;;\n\nä½ å¯èƒ½ä¼šå¯¹è¿™è¡Œä»£ç æ„Ÿåˆ°ç–‘æƒ‘\nä¸ºä»€ä¹ˆè¦åœ¨countåé¢+ä¸Šä¸€ä¸ªâ€˜0â€™ï¼Ÿ\nè¿™é‡Œå°±å’Œæˆ‘ä»¬asciiç è¡¨æœ‰å…³äº†\n\nå› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–æ•°ç»„å’Œå¸ƒç½®é›·çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™æ•°ç»„ä¼ å…¥çš„éƒ½æ˜¯1å’Œ0è¿™ä¸¤ä¸ªç¬¦å·ï¼Œå¹¶ä¸æ˜¯æ•°å­—ï¼\nä½†æ˜¯åœ¨showæ•°ç»„ä¸­æˆ‘ä»¬éœ€è¦ç»™ç©å®¶æ˜¾ç¤ºä¸€ä¸ªæ•°å­—çš„å­—ç¬¦\n\nè¿™é‡Œé¢æˆ‘ä»¬æä¾›çš„æ˜¯1çš„å­—ç¬¦ï¼Œå¹¶ä¸æ˜¯1å®ƒæœ¬èº«\nè€Œæˆ‘ä»¬åœ¨è®¡ç®—å‘¨è¾¹é›·çš„ä¸ªæ•°çš„æ—¶å€™ï¼Œä¼ å›æ¥çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„æ•°å­—\nè§‚å¯Ÿè¡¨æ ¼ï¼Œä½ ä¼šå‘ç°æ•°å­—å’Œå¯¹åº”çš„å­—ç¬¦ä¸­é—´ï¼Œéƒ½å·®äº†48\nè€Œ48æ°å¥½æ˜¯å­—ç¬¦â€™0â€™å¯¹åº”çš„ASCIIç å€¼\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨countåŠ ä¸Šå­—ç¬¦â€™0â€™ï¼Œä»¥æ­¤åœ¨ç•Œé¢ä¸­å‘ç©å®¶å±•ç¤ºå‘¨è¾¹8æ ¼æœ‰å‡ é¢—é›·\n3-4. ç³»ç»Ÿæ‰«æé›·å¦‚ä½•æŠŠç©å®¶é€‰æ‹©çš„æ ¼å­å‘¨è¾¹çš„é›·æ‰«æå‡ºæ¥å‘¢ï¼Ÿ\nè®¾ç©å®¶çš„é€‰æ‹©çš„åæ ‡ä¸ºxå’Œy\n\n\n\nx-1,y-1\nx-1,y\nx-1,y+1\n\n\n\nx,y-1\nx,y\nx,y+1\n\n\nx+1,y-1\nx+1,y\nx+1,y+1\n\n\næˆ‘ä»¬åªéœ€è¦æŠŠè¿™äº›åæ ‡å…¨éƒ¨åœ¨äºŒç»´æ•°ç»„ä¸­é”®å…¥ï¼Œå°±èƒ½é€ä¸ªæ‰«æå‡ºé›·çš„ä¸ªæ•°\n//ç»Ÿè®¡é›·çš„ä¸ªæ•°static int get_mine_count(char mine[ROWS][COLS], int x, int y)&#123;\treturn mine[x - 1][y - 1] +\t\tmine[x - 1][y] +\t\tmine[x - 1][y + 1] +\t\tmine[x][y - 1] +\t\tmine[x][y + 1] +\t\tmine[x + 1][y - 1] +\t\tmine[x + 1][y] +\t\tmine[x + 1][y + 1] - 8 * &#x27;0&#x27;;&#125;\n\nè¿™é‡Œå› ä¸ºæˆ‘ä»¬æ‰«æå‡ºæ¥çš„ä¹Ÿæ˜¯â€˜1â€™çš„å­—ç¬¦ï¼Œç³»ç»Ÿä¸­æ˜¯å­—ç¬¦1çš„asciiç å€¼49\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å»8ä¸ªå­—ç¬¦â€˜0â€™ï¼Œè¿™æ ·å°±èƒ½å¾—åˆ°é›·çš„ä¸ªæ•°çš„æ•°å­—\nï¼ˆç„¶ååœ¨ä¹‹å‰çš„é‚£ä¸ªå‡½æ•°ä¸­æ¥å—ï¼Œcount+â€˜0â€™ï¼Œåœ¨showæ•°ç»„ä¸­æ˜¾ç¤ºï¼‰\n\nè¿™ä¸ªå‡½æ•°æ˜¯åœ¨ç©å®¶æ’æŸ¥é›·çš„å‡½æ•°ä¹‹å‰çš„\nå› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨game.hä¸­å®šä¹‰\næˆ‘ä»¬æƒ³è®©å®ƒåªåœ¨game.cä¸­ç”Ÿæ•ˆï¼Œæ‰€ä»¥ç”¨staticä¿®é¥°å®ƒ\n\n\nstaticçš„ä½œç”¨\n1.ä¿®é¥°å±€éƒ¨å˜é‡2.ä¿®é¥°å…¨å±€å˜é‡3.ä¿®é¥°å‡½æ•°\n\n\nä¸Šé¢çš„ä»£ç å…¶å®è¿˜å°‘äº†ä¸€ä¸ªä¸œè¥¿\næˆ‘ä»¬éœ€è¦åˆ¤æ–­ç©å®¶ä»€ä¹ˆæ—¶å€™èƒœåˆ©â€”â€”é›·åŒºçš„0ï¼ˆæ— é›·æ–¹å—ï¼‰å…¨éƒ¨è¢«ç©å®¶æ‰¾å‡ºï¼Œç©å®¶å°±èƒœåˆ©äº†\nint win = 0;while (win&lt; row * col - EASY_COUNT)\n\nè¿™é‡Œæˆ‘ä»¬éœ€è¦æ›´æ”¹çš„æ˜¯whlieå‡½æ•°\nå…¶ä¸­ row * col - EASY_COUNT  æŒ‡æ–¹æ ¼æ€»æ•°å‡å»é›·çš„ä¸ªæ•°ï¼Œå¾—åˆ°çš„æ˜¯æ— é›·æ–¹å—çš„ä¸ªæ•°\nç©å®¶æ¯æˆåŠŸæ’é™¤ä¸€ä¸ªæ— é›·æ–¹å—ï¼Œwinå°±ä¼šåŠ ä¸€ä¸ªæ•°å­—\nelse&#123;\t//ä¸æ˜¯é›·çš„æƒ…å†µä¸‹ï¼Œç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·\tint count = get_mine_count(mine, x, y);\tshow[x][y] = count + &#x27;0&#x27;;\t//æ˜¾ç¤ºæ’æŸ¥å‡ºæ¥çš„ä¿¡æ¯\tDisplayBoard(show, ROW, COL);       win++;&#125;\n\nå½“winè¾¾åˆ°æ— é›·æ–¹å—ä¸ªæ•°çš„æ—¶å€™ï¼Œwhlieå¾ªç¯å°±ä¼šåœæ­¢\néšåæˆ‘ä»¬åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©ï¼Œå¦‚æœèƒœåˆ©ï¼Œå°±æ‰“å°æ£‹ç›˜ï¼Œè®©ç©å®¶çŸ¥é“é›·çš„ä½ç½®\nif (win == row * col - EASY_COUNT)&#123;\tprintf(&quot;æ­å–œä½ ï¼Œæ¸¸æˆèƒœåˆ©ï¼\\n&quot;);\tDisplayBoard(mine, ROW, COL);&#125;\n\nè¿™é‡Œå¿…é¡»è¦åˆ¤æ–­ï¼Œå› ä¸ºä½ å¤±è´¥äº†ä¹Ÿæ˜¯ä¼šè·³å‡ºå¾ªç¯çš„ï¼\nåˆ°æ­¤ï¼Œæˆ‘ä»¬çš„æ‰«é›·ä»£ç å°±æ˜¯å®Œæˆäº†\n4.æŸ¥çœ‹ç»“æœè¿™é‡Œæˆ‘ä½œå¼Šï¼Œå°†é›·çš„ä¸ªæ•°è®¾ç½®ä¸º80å¹¶æ‰“å°å‡ºå¸ƒç½®é›·ä¹‹åçš„æ£‹ç›˜\nè¾“å…¥æœ€åä¸€ä¸ªé›·çš„ä½ç½®ï¼Œç³»ç»Ÿæç¤ºæˆ‘ä»¬æ¸¸æˆèƒœåˆ©\n\nè¾“å…¥é›·çš„åæ ‡åï¼Œä¹Ÿä¼šæç¤ºä½ è¢«ç‚¸æ­»äº†\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤ä»£ç æ˜¯ç¼–å†™æˆåŠŸäº†ï¼\nå®Œæ•´ä»£ç è·å– &#x3D;&#x3D;&gt;  [DAY018 æ‰«é›·]\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå†™è¿™ä¸ªåšå®¢ç”¨äº†æˆ‘2ä¸ªå°æ—¶ï¼Œç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°ç»„ç»ƒä¹ é¢˜åˆ†äº«","url":"/2021/09/13/note_c/18%E6%95%B0%E7%BB%84%E7%BB%83%E4%B9%A0%E9%A2%98DAY21/","content":"å¥½ä¹…æ²¡è®°å½•ï¼ˆæ°µï¼‰åšå®¢äº†ï¼Œä»Šå¤©è®°å½•ä¸€ä¸‹æ˜¨å¤©å­¦ä¹ çš„æ•°ç»„ç»ƒä¹ é¢˜ä¸­çš„å†…å®¹\n\n\næ•°ç»„ç»ƒä¹ é¢˜[TOC]\n\næ˜¨å¤©å­¦ä¹ çš„ç»ƒä¹ é¢˜æŒºå¤šçš„ï¼Œä¸‹é¢åªè®°å½•äº†å‡ ä¸ªæˆ‘ä¸ªäººè®¤ä¸ºæ¯”è¾ƒé‡è¦å’Œå…¸å‹çš„å†…å®¹\nï¼ˆ1ï¼‰é”™è¯¯çš„å¼•ç”¨æ•°ç»„é¢˜ç›®ï¼š\nint arr[10]=&#123;0&#125;;\n\nä¸‹é¢é”™è¯¯çš„å¼•ç”¨æ–¹å¼æ˜¯ï¼š\n\nA. arr[0]&#x3D;1        B.arr[0]&#x3D;5*2          C.   arr[10]&#x3D;2               D.arr[1]&#x3D;arr[2]*arr[0]\n\narr[10]ä»£è¡¨æ•°ç»„ä¸­æœ‰10ä¸ªå…ƒç´ ï¼Œä½†æ˜¯arr[10]çš„å¼•ç”¨æ˜¯ä¸‹æ ‡ï¼ŒæŒ‡ç¬¬11ä¸ªå…ƒç´ \nè¿™è¶…å‡ºäº†æ•°ç»„10ä¸ªå…ƒç´ çš„èŒƒå›´\nç­”æ¡ˆæ˜¯ C\n\nï¼ˆ2ï¼‰æ•°ç»„ä¸­çš„é€—å·è¡¨è¾¾å¼è¯·é—®ä»¥ä¸‹ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ\n#include&lt;stdio.h&gt;int main()&#123;\tint arr[]=&#123;1,2,(3,4),5&#125;;    printf(&quot;%d\\n&quot;, sizeof(arr));    return 0;&#125;\n\né¦–å…ˆï¼Œarræ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•´å‹å…ƒç´ ï¼Œå ç”¨çš„å­—èŠ‚æ˜¯4ä¸ªbitä½\næ‰€ä»¥sizeofè®¡ç®—æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå°†å®ƒä»¬æ‰€å ç©ºé—´ç›¸åŠ \n\nå…¶ä¸­é€—å·è¡¨è¾¾å¼(3,4)  â€”â€“&gt; åªäº§ç”Ÿä¸€ä¸ªç»“æœï¼Œ4\n\nä»¥é˜²ä¸‡ä¸€ï¼Œè¿™é‡Œæä¸€ä¸‹é€—å·è¡¨è¾¾å¼çš„æ¦‚å¿µ\né€—å·è¡¨è¾¾å¼é€—å·è¡¨è¾¾å¼ä¸­çš„å†…å®¹å¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼\n#include&lt;stdio.h&gt;int main()&#123;\tint a =3;    int b=5;    int c=0;    //é€—å·è¡¨è¾¾å¼    int d=(c=1,a=c+3,b=a-4,c+=b);    printf(&quot;%d\\n&quot;,d);    return 0;&#125;\n\nè¿™ä¸ªä»£ç çš„ç»“æœæ˜¯1\nè¿ç®—è¿‡ç¨‹å¦‚ä¸‹\n\nc&#x3D;1\na&#x3D;c+3&#x3D;1+3&#x3D;4\nb&#x3D;a-4&#x3D;4-4&#x3D;0\nc+&#x3D;b  â€”-&gt; c&#x3D;c+b&#x3D;1+0&#x3D;1\n\né€—å·è¡¨è¾¾å¼ä¼šä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®—é‡Œé¢çš„æ¯ä¸ªè¡¨è¾¾å¼\nè¾“å‡ºçš„ç»“æœæ˜¯é€—å·è¡¨è¾¾å¼ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœ\næ‰€ä»¥ä¸Šé¢æ•°ç»„ä¸­(3,4)è¿™ä¸ªé€—å·è¡¨è¾¾å¼äº§ç”Ÿçš„ç»“æœæ˜¯4\nprintfè¾“å‡ºçš„ç»“æœæ˜¯16ï¼ˆ4ä¸ªå…ƒç´ ï¼‰\n\nï¼ˆ3ï¼‰æ•°ç»„ä¸­å­—ç¬¦ä¸²å’Œå­—ç¬¦å…ƒç´ çš„åŒºåˆ«int arr1[]=&#123;&quot;abcdef&quot;&#125;;int arr2[]=&#123;&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;&#125;;\n\n\næ•°ç»„arr1å’Œarr2ç­‰ä»·  Ã—\n\nä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦å…ƒç´ ï¼Œå®ƒä»¬çš„å«ä¹‰æ˜¯ä¸åŒçš„\n\næ•°ç»„arr1å’Œarr2çš„é•¿åº¦ç›¸åŒ   Ã—\n\nè¿™ä¸¤ä¸ªçš„é•¿åº¦å®é™…ä¸Šæ˜¯ä¸åŒçš„\nå› ä¸ºâ€œabcdefâ€è¿™ä¸ªå­—ç¬¦ä¸²çš„åé¢ï¼Œæ˜¯æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æŸæ ‡å¿—\\0çš„\n\næ•°ç»„arr1çš„é•¿åº¦å¤§äºarr2çš„é•¿åº¦  âˆš\n\nï¼ˆè¿™é‡Œæˆ‘å¯èƒ½æœ‰é”™çš„åœ°æ–¹ï¼Œè¿˜è¯·dalaoæ— æƒ…æŒ‡æ­£ï¼‰\n\nï¼ˆ4ï¼‰è‡ªå®šä¹‰å‡½æ•°ä¸æ•°ç»„çš„ç®€å•ç»ƒä¹ é¢˜é¢˜ç›®å¦‚ä¸‹\n\nåˆ›å»ºä¸€ä¸ªæ•´å½¢æ•°ç»„ï¼Œå®ç°ä»¥ä¸‹æ“ä½œ\n1.å®ç°å‡½æ•°init()åˆå§‹åŒ–æ•°ç»„ä¸ºå…¨0\n2.å®ç°print()æ‰“å°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ \n3.å®ç°reverse()å‡½æ•°å®Œæˆæ•°ç»„å…ƒç´ çš„é€†ç½®\n\nå‰ä¸¤ä¸ªè‡ªå®šä¹‰å‡½æ•°çš„å®ç°å½¢å¼éå¸¸ç›¸ä¼¼\næˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œåˆ©ç”¨iä¾æ¬¡è®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å®ƒä»¬æ‰“å°å‡ºæ¥æˆ–è€…èµ‹å€¼ä¸º0å®ç°åˆå§‹åŒ–\nvoid print(int arr[], int sz)//æ‰“å°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ &#123;    int i = 0;    for (i = 0; i &lt; sz; i++)    &#123;        printf(&quot;%d &quot;, arr[i]);    &#125;    printf(&quot;\\n&quot;);&#125;void init(int arr[], int sz)//å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åˆå§‹åŒ–ä¸º0&#123;    int i = 0;    for (i = 0; i &lt; sz; i++)    &#123;        arr[i] = 0;    &#125;&#125;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯szï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°ï¼‰æˆ‘ä»¬å¿…é¡»åœ¨ä¸»å‡½æ•°mainä¸­è®¡ç®—ï¼Œä¸èƒ½åœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—\nå› ä¸ºä¼ è¿‡æ¥çš„æ•°ç»„æ˜¯é¦–å…ƒç´ çš„åœ°å€ï¼Œè¿™æ—¶å€™ç”¨sizeofè®¡ç®—çš„æ•°ç»„å…ƒç´ é•¿åº¦æ˜¯ä¸å‡†ç¡®çš„\nä¸»å‡½æ•°mainå¦‚ä¸‹\nint main()&#123;    int arr[10] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;    int sz = sizeof (arr)/sizeof( arr[0]);    printf(&quot;%d\\n&quot;, sz);    print(arr, sz);    reverse(arr, sz);    print(arr, sz);    init(arr, sz);    print(arr, sz);    return 0;&#125;\n\nreverseå‡½æ•°çš„åŸºæœ¬ç†å¿µå’Œå¦å¤–ä¸¤ä¸ªå‡½æ•°å…¶å®æ˜¯ç›¸ä¼¼çš„\nè¿™é‡Œæˆ‘ä»¬ä¾æ—§ä¼šç”¨åˆ°â€œç©ºç›’å­â€tmpæ¥å®Œæˆæˆ‘ä»¬çš„äº¤æ¢\nåŒæ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¾ªç¯æ¥ç¡®è®¤ä»€ä¹ˆæ—¶å€™åœæ­¢äº¤æ¢\nå³å·¦å³ä¸¤ä¸ªæ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ä¸€æ ·çš„æ—¶å€™ï¼ˆæˆ–è€…å€¼ä¸€æ ·ï¼‰å°±åœæ­¢äº¤æ¢\nvoid reverse(int arr[], int sz)//æ•°ç»„å…ƒç´ çš„é€†ç½®&#123;    int left = 0;    int right = sz - 1;    while(left &lt; right)    &#123;        int tmp = arr[left];        arr[left] = arr[right];        arr[right] = tmp;        left++;        right--;    &#125;&#125;\n\nå½“æˆ‘ä»¬è¿›è¡Œä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å…ƒç´ è°ƒæ¢çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦ç”¨forå¾ªç¯+tmpç©ºç›’å­çš„æ–¹å¼ä¸€ä¸€äº¤æ¢æ¯ä¸ªæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ \n\nå‰æï¼Œä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ç›¸åŒ\n\nä¸‹é¢è¿™ç§ä»£ç æ˜¯é”™è¯¯çš„\nint tmp=arr1arr1=arr2arr2=tmp\n\nå®ç°å½¢å¼å’Œä¸Šé¢æ‰“å°å’Œåˆå§‹åŒ–çš„è‡ªå®šä¹‰å‡½æ•°çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼\n\nå¦‚æœæœ¬åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼è¿™æ˜¯å¯¹æˆ‘çš„æœ€å¤§é¼“åŠ±\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å‰”é™¤æœ€å¤§æœ€å°å€¼åï¼Œè®¡ç®—æ•°ç»„å…ƒç´ çš„å¹³å‡å€¼","url":"/2021/11/11/note_c/19%E6%95%B0%E7%BB%84%E5%B9%B3%E5%9D%87%E5%80%BC/","content":"åŒ11ä¹Ÿä¸èƒ½é˜»æŒ¡æˆ‘å­¦ä¹ çš„å¿ƒï¼\n\n\n@[toc]\né—®é¢˜å¼•å…¥\né¢˜ç›®å†…å®¹ï¼š\nå®šä¹‰ä¸€ä¸ªå«10ä¸ªæ•´å‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„,ä»é”®ç›˜ä¸Šè¾“å…¥10ä¸ªå…ƒç´ å€¼,æ±‚å»æ‰æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹åçš„å…ƒç´ å¹³å‡å€¼.\nè¾“å…¥æ ¼å¼:\nç”¨å¾ªç¯æ§åˆ¶ä¾æ¬¡è¾“å…¥10ä¸ªå…ƒç´ å€¼ï¼Œscanfè¯­å¥ä¸­çš„æ ¼å¼æ§åˆ¶ä¸²ä¸º: â€œ%dâ€\nè¾“å‡ºæ ¼å¼ï¼š\nè¾“å‡ºå¹³å‡å€¼, printfä¸­çš„æ ¼å¼æ§åˆ¶ä¸²ä¸º â€œ%lf\\nâ€\n\nè¾“å…¥æ ·ä¾‹ï¼š\n2 3 4 5 6 2 4 6 4 3\n\nè¾“å‡ºæ ·ä¾‹ï¼š\n3.833333\n\n\nç†è§£1ä¸€èˆ¬äººçœ‹åˆ°è¿™ç§é¢˜ç›®ï¼Œä¸‹æ„è¯†ä¼šè®¤ä¸ºæ˜¯å»æ‰ä¸€ä¸ªæœ€å¤§å€¼ä¸€ä¸ªæœ€å°å€¼ï¼Œå†è®¡ç®—æ•°ç»„å…¶ä»–å…ƒç´ çš„æœ€å¤§å€¼\næ¯•ç«Ÿå¾ˆå¤šä½“è‚²èµ›äº‹éƒ½æ˜¯è¿™ä¹ˆè®¡ç®—é€‰æ‰‹çš„å¾—åˆ†çš„\nå®é™…ä¸Šè¿™é“é¢˜å¹¶ä¸æ˜¯è¿™ä¹ˆè¦æ±‚çš„ï¼Œè¿™ç‚¹æˆ‘ä»¬åé¢å†æ\nå…ˆæ¥çœ‹çœ‹å¦‚ä½•å»æ‰æ•°ç»„ä¸­çš„ä¸€ä¸ªæœ€å¤§å€¼ã€ä¸€ä¸ªæœ€å°å€¼å§ï¼\nå»é™¤ä¸€ä¸ªæœ€å¤§&#x2F;æœ€å°å€¼å…ˆç†æ¸…æ€è·¯\n\néœ€è¦æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\nåœ¨è®¡ç®—å¹³å‡å€¼çš„æ—¶å€™éœ€è¦å‰”é™¤è¿™ä¸¤ä¸ªå€¼\n\næƒ³æ¸…æ¥šè¿™ä¸¤ç‚¹åï¼Œæ–¹æ³•å°±å¾ˆæ˜ç¡®äº†\nä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œæœ‰å…³å¦‚ä½•æŸ¥æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„ [é“¾æ¥]\nè¿™é‡Œæˆ‘ä»¬å°±èƒ½ç”¨ä¸Šé‚£ä¸ªåšå®¢é‡Œé¢çš„æ–¹æ³•ï¼Œä¸è¿‡æ˜¯ä»¥è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼å®ç°\nint sp1(int arr[], int sz, int* pm)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; *pm)//æ‰¾å‡ºæœ€å¤§å€¼\t\t&#123;\t\t\t*pm = arr[i];\t\t&#125;\t&#125;\tfor (int k = 0; k &lt; sz; k++)\t&#123;\t\tif (arr[k] == *pm)//ç¡®è®¤æœ€å¤§å€¼çš„æ•°å€¼\t\t&#123;\t\t\treturn k;//è¿”å›è¯¥æœ€å¤§å€¼çš„ä¸‹æ ‡\t\t&#125;\t&#125;&#125;\n\næ‰¾å‡ºæœ€å°å€¼çš„ä»£ç åŒä¸Šï¼Œåªéœ€è¦å°†å…¶ä¸­çš„&gt;æ›´æ”¹ä¸º&lt;\nåœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç«‹ä¸¤ä¸ªå˜é‡æ¥æ¥æ”¶å¾—åˆ°çš„æœ€å¤§å€¼å’Œæœ€å°å€¼çš„ä¸‹æ ‡\nint main()&#123;\tint arr[10] = &#123; 0 &#125;;\tint a, b = 0;\tdouble ave,sum= 0;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tscanf(&quot;%d&quot;, &amp;arr[i]);\t&#125;\tint sz = sizeof(arr) / sizeof(arr[0]);\ta =sp1(arr, sz, &amp;max);\tb =sp2(arr, sz, &amp;min);\tfor (int k = 0; k &lt; 10; k++)\t&#123;\t\tif (k != a &amp;&amp; k != b)\t\t&#123;\t\t\tsum = sum + arr[k];\t\t&#125;\t&#125;\tave = sum / 8;\tprintf(&quot;%lf\\n&quot;, sum);\tprintf(&quot;%lf\\n&quot;, ave);\treturn 0;&#125;\n\nåœ¨æœ€åè®¡ç®—sumçš„æ—¶å€™ï¼Œåªéœ€è¦ç”¨ifè¯­å¥è®©Kä¸ç­‰äºæœ€å¤§å€¼å’Œæœ€å°å€¼çš„ä¸‹æ ‡ï¼Œå°±èƒ½å‰”é™¤è¿™ä¸¤ä¸ªå€¼\nåŒæ—¶ï¼Œæˆ‘ä»¬çš„å¹³å‡æ•°ä¹Ÿåªéœ€è¦é™¤ä»¥8å³å¯\nè¿è¡Œç»“æœé”®å…¥æ•°ç»„ä¸­å…ƒç´ 1-10ï¼Œç¨‹åºæˆåŠŸçš„è¾“å‡ºäº†å‰”é™¤1å’Œ10ä¹‹å8ä¸ªå…ƒç´ çš„å¹³å‡å€¼\n\nä½†å½“æˆ‘ä»¬æŠŠé¢˜ç›®ç¤ºä¾‹è¾“è¿›å»æ—¶ï¼Œå¾—å‡ºçš„ç­”æ¡ˆå´å’Œé¢˜ç›®è¦æ±‚ä¸åŒ\n\n\né¢˜ç›®å®é™…è¦æ±‚ä¸Šé¢æåˆ°ï¼Œè¿™é“é¢˜çš„è¦æ±‚å¹¶ä¸æ˜¯åªå‰”é™¤ä¸€ä¸ªæœ€å¤§å€¼å’Œæœ€å°å€¼\nè€Œæ˜¯å‰”é™¤æ‰€æœ‰çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\n2 3 4 5 6 2 4 6 4 3\n\nè§‚å¯Ÿè¾“å…¥æ ·ä¾‹å¯ä»¥å‘ç°ï¼Œè¿™10ä¸ªæ•°å­—çš„æœ€å¤§å€¼æ˜¯6ï¼Œæœ€å°å€¼æ˜¯2\nä½†æ˜¯ä¸ç®¡æ˜¯æœ€å°å€¼2å’Œæœ€å¤§å€¼6ï¼Œéƒ½ä¸æ­¢ä¸€ä¸ª\né¢˜ç›®è¦æ±‚çš„å°±æ˜¯è¦å°†è¿™é‡Œé¢çš„æ‰€æœ‰2å’Œ6å‰”é™¤æ‰ï¼Œå†è®¡ç®—å‰©ä½™æ•°æ®çš„å¹³å‡å€¼\nè§£é¢˜æ€è·¯1&amp;2å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä»¥å¾ªç¯çš„æ–¹å¼ç»§ç»­å¯»æ‰¾æœ€å¤§å€¼çš„ä¸‹æ ‡\n\nç¼ºç‚¹ï¼šæ­¤æ–¹æ³•å¯èƒ½ä¼šå‡ºç°å¤šåˆ çš„æƒ…å†µ\n\næˆ–\næ›´æ”¹ä»£ç ï¼Œåœ¨æ‰¾åˆ°æœ€å¤§å€¼ä¸‹æ ‡åï¼ŒæŸ¥æ‰¾æ•°ç»„ä¸­æœ‰å‡ ä¸ªå…ƒç´ åŒè¿™ä¸ªæœ€å¤§å€¼ç›¸åŒï¼Œå†è¿”å›ä»–ä»¬çš„ä¸‹æ ‡\n\næ­¤æ–¹æ³•éœ€è¦ç”¨æ•°ç»„æ¥å­˜æ”¾æ‰¾åˆ°çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œè¾ƒä¸ºéº»çƒ¦\n\n\nè§£é¢˜æ€è·¯3 -å†’æ³¡æ’åºå…ˆå¯¹æ•°ç»„è¿›è¡Œå†’æ³¡æ’åºï¼Œå†å‰”é™¤ä¸¤è¾¹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\nè¿™é‡Œæˆ‘é€‰æ‹©çš„å°±æ˜¯è§£é¢˜æ€è·¯3\n\nå†’æ³¡æ’åºçš„æ–¹å¼å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„åšå®¢ [é“¾æ¥]\nè¿™é‡Œåªè´´å‡ºä¸»å‡½æ•°å†…éœ€è¦ç¼–å†™çš„å†…å®¹\nè®¡æ•°å™¨å› ä¸ºéœ€è¦å‰”é™¤å¤šä¸ªæœ€å¤§ï¼ˆå°ï¼‰å€¼\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡è¿›è¡Œè®¡æ•°\næ¯å½“æˆ‘ä»¬æ‰¾åˆ°å’Œå·²çŸ¥æœ€å¤§å€¼ç›¸åŒçš„æ•°å­—çš„æ—¶å€™ï¼Œcountéƒ½ä¼š++ï¼ˆåˆå€¼ä¸º1ï¼‰\nå½“å¾ªç¯èµ°åˆ°ç¬¬ä¸€ä¸ªå°äºæœ€å¤§å€¼çš„æ•°åï¼Œå¾ªç¯å°±ä¼šç»ˆæ­¢\nint count2 = 1;for (int k = 8; k &gt;0 ; k--)\t&#123;\t\tif (arr[k] == arr[9])\t\t&#123;\t\t\tarr[k] = 0;//ä»¤æœ€å¤§å€¼ä¸º0\t\t\tcount2 ++;\t\t&#125;\t\telse \t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\n\næŸ¥æ‰¾æœ€å°å€¼çš„ä»£ç åŒä¸Šï¼Œä½†æ˜¯forå¾ªç¯ä¸­çš„æ¡ä»¶éœ€è¦æ›´æ”¹\næ³¨æ„ï¼Œè¿™é‡Œçš„ä¸‹æ ‡kå¿…é¡»ä»8å¼€å§‹è€Œä¸æ˜¯ä»9\nå› ä¸ºç»è¿‡å†’æ³¡æ’åºåï¼Œarr[9]æœ¬èº«å°±æ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼\nè‹¥ä»å®ƒå¼€å§‹å¾ªç¯åˆ¤æ–­ï¼Œå°±ä¼šç›´æ¥æŠŠæœ€å¤§å€¼èµ‹å€¼ä¸º0\nç¨‹åºå°±å‡ºbugäº†\n\nä¸»å‡½æ•°ä»£ç int main()&#123;\tint arr[10] = &#123; 0 &#125;;\tint a, b = 0;\tdouble ave, sum = 0;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tscanf(&quot;%d&quot;, &amp;arr[i]);\t&#125;\tint sz = sizeof(arr) / sizeof(arr[0]);\t//å…ˆå¯¹æ•°ç»„è¿›è¡Œå†’æ³¡æ’åº\tbubble_sort(arr, sz);\t//æ­¤æ—¶ä¸‹æ ‡0å’Œ9å³ä¸ºæœ€å¤§æœ€å°å€¼\tint max = arr[0];\tint min = arr[9];\tint count1 = 1;\tint count2 = 1;\tfor (int j = 1; j &lt; 10; j++)\t&#123;\t\tif (arr[j] == arr[0])\t\t&#123;\t\t\tarr[j] = 0;//ä»¤æœ€å°å€¼ä¸º0\t\t\tcount1 ++;\t\t&#125;\t\telse\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\tfor (int k = 8; k &gt;0 ; k--)\t&#123;\t\tif (arr[k] == arr[9])\t\t&#123;\t\t\tarr[k] = 0;//ä»¤æœ€å¤§å€¼ä¸º0\t\t\tcount2 ++;\t\t&#125;\t\telse \t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//ä»¤å‰åä¸¤ä¸ªæœ€å¤§æœ€å°å€¼ä¸º0\tarr[0] = 0;\tarr[9] = 0;\tfor (int k = 0; k &lt; 10; k++)\t&#123;\t\t\tsum = sum + arr[k];\t&#125;\t//é™¤å»å·²çŸ¥çš„æ‰€æœ‰æœ€å¤§æœ€å°å€¼ï¼Œè®¡ç®—å¹³å‡æ•°\tave = sum / (10- count1- count2);\t//printf(&quot;%lf\\n&quot;, sum);\tprintf(&quot;%lf\\n&quot;, ave);\treturn 0;&#125;\n\nåœ¨æœ€åè®¡ç®—å¹³å‡æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å‰”é™¤count1å’Œcount2ï¼ˆ10å‡å»åå³ä¸ºå‰©ä½™å…ƒç´ çš„ä¸ªæ•°ï¼‰\nè¿™æ—¶å€™å¾—å‡ºçš„ç­”æ¡ˆå°±å’Œé¢˜ç›®æ‰€ç»™ç¤ºä¾‹ç›¸åŒäº†\n\nä½ å­¦åºŸäº†å˜›ï¼Ÿåæ­£æˆ‘æ˜¯åºŸäº† \n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘é‡æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼ŸæŒ‡é’ˆåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºé”™ï¼Ÿ","url":"/2021/09/16/note_c/20%E9%87%8E%E6%8C%87%E9%92%88/","content":"@toc\nä»€ä¹ˆæ˜¯é‡æŒ‡é’ˆï¼Ÿæ¦‚å¿µï¸°é‡æŒ‡é’ˆå°±æ˜¯æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®æ˜¯ä¸å¯çŸ¥çš„ï¼ˆå¦‚ï¼šéšæœºçš„ã€ä¸æ­£ç¡®çš„ã€æ²¡æœ‰æ˜ç¡®é™åˆ¶çš„)\nè¯´äººè¯å°±æ˜¯ï¼šé‡æŒ‡é’ˆæ˜¯é”™è¯¯çš„æŒ‡é’ˆå¼•ç”¨å½¢å¼ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å››ç§æƒ…å†µ\n\næŒ‡é’ˆæœªåˆå§‹åŒ–\nè¶Šç•Œè®¿é—®\næŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾\n\n1.æŒ‡é’ˆæœªåˆå§‹åŒ–è¿™ä¸ªæ¦‚å¿µéå¸¸å®¹æ˜“ç†è§£ï¼ŒåŒå˜é‡ä¸€æ ·ï¼ŒæŒ‡é’ˆåŒæ ·éœ€è¦æˆ‘ä»¬çš„åˆå§‹åŒ–\n//åˆå§‹åŒ–æŒ‡é’ˆint a = 10;int*p = &amp;a;\n\næŒ‡é’ˆæœªåˆå§‹åŒ– é€šå¸¸æ˜¯ä»¥ä¸‹æƒ…å†µ\nint main()&#123;\tint*p;\t*p=20;&#125;\n\nè¿™é‡Œçš„æŒ‡é’ˆå¹¶æ²¡æœ‰æŒ‡å‘æŸä¸ªå†…å­˜åœ°å€ï¼Œå³ä¾¿æˆ‘ä»¬æ›´æ”¹å®ƒçš„å†…å®¹ä¹Ÿæ˜¯æ— æ•ˆçš„\n\næŒ‡é’ˆä¼šé»˜è®¤èµ‹äºˆä¸€ä¸ªéšæœºå€¼ï¼Œå±äºéæ³•è®¿é—®å†…å­˜\n\nå½“ç„¶ï¼Œç¼–è¯‘å™¨é‡åˆ°è¿™ç§æƒ…å†µä¼šç›´æ¥æŠ¥é”™\n\n2.è¶Šç•Œè®¿é—®è¶Šç•Œè®¿é—®çš„æƒ…å†µé€šå¸¸å‡ºç°åœ¨æ•°ç»„ä¸­\nint arr[10]=&#123;1,2,3,4,5&#125;;int* p=arr;\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„åä»£è¡¨æ˜¯é¦–å…ƒç´ çš„åœ°å€\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨ forå¾ªç¯å’ŒæŒ‡é’ˆ++ çš„æ–¹å¼ï¼Œä½¿æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ \nint main()&#123;\tint arr[5]=&#123;1,2,3,4,5&#125;;\tint* p = arr;    int i =0;    for(i=0;i&lt;=5;i++)    &#123;        *p=0;        p++;    &#125;&#125;\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ è®¿é—®éƒ½æ˜¯é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼ã€‚5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œä¸‹æ ‡æ˜¯ä»0-4\nè€Œåœ¨æ­¤ä»£ç ä¸­ï¼Œp++ç¬¬äº”æ¬¡çš„æ—¶å€™ï¼Œä¸‹æ ‡å·²ç»å˜æˆäº†5ï¼Œå¯¹åº”çš„æ˜¯ç¬¬å…­ä¸ªå…ƒç´ \nä½†æ•°ç»„ä¸­å¹¶æ²¡æœ‰ç¬¬å…­ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æŒ‡é’ˆè®¿é—®çš„å°±æ˜¯ä¸€ä¸ªç©ºçš„åœ°å€äº†\nåŒæ ·å±äºéæ³•è®¿é—®\nè¿™å°±æ˜¯è¶Šç•Œè®¿é—®çš„ä¸€ç§\n3.æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾æ¯å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šèµ‹äºˆè¿™ä¸ªå˜é‡ä¸€ä¸ªå†…å­˜çš„åœ°å€ç©ºé—´\nè¿™æ—¶å€™æˆ‘ä»¬æŠŠè¿™ä¸ªåœ°å€èµ‹äºˆç»™æŒ‡é’ˆpï¼ŒæŒ‡é’ˆä¾¿è®°å½•ä¸‹äº†è¿™ä¸ªåœ°å€\nç”¨å›¾æ¥ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ä»€ä¹ˆå«æŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾\n\nä»£ç ç¤ºä¾‹å¦‚ä¸‹\nint* test()&#123;\tint a = 10;\treturn &amp;a;&#125;int main()&#123;\tint* p = test();\t*p = 20;\treturn 0;&#125;\n\n\n\nå¦‚ä½•é¿å…é‡æŒ‡é’ˆï¼Ÿ1.æŒ‡é’ˆåˆå§‹åŒ–åœ¨ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åƒåˆ›å»ºå˜é‡ä¸€æ ·åˆå§‹åŒ–æŒ‡é’ˆ\nå¦‚æœä¸çŸ¥é“æŠŠæŒ‡é’ˆåˆå§‹åŒ–ä¸ºä»€ä¹ˆï¼Œé‚£å°±èµ‹å€¼ä¸ºNULL(ä»£è¡¨0)\n\n 1 int main() 2 &#123; 3     //å½“å‰ä¸çŸ¥é“påˆå§‹åŒ–ä¸ºä»€ä¹ˆçš„æ—¶å€™ 4     //ç›´æ¥åˆå§‹åŒ–ä¸ºNULL(ç©ºæŒ‡é’ˆ--&gt;0) 5     int* p = NULL; 6     //æ˜ç¡®çŸ¥é“åˆå§‹åŒ–çš„å€¼ 7     int a = 10; 8     int* ptr = &amp;a; 9     10     return 0;11 &#125;\n\n2.å°å¿ƒæŒ‡é’ˆè¶Šç•Œåœ¨ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¸èƒ½è®©æŒ‡é’ˆè¶Šç•Œ\nå¦‚é‡åˆ°æ•°ç»„çš„æƒ…å†µï¼Œä¸€å®šè¦æ³¨æ„ä¸‹æ ‡å’Œå…ƒç´ ä¸ªæ•°çš„åŒºåˆ«\n\næ³¨æ„ï¼šCè¯­è¨€æœ¬èº«æ˜¯ä¸ä¼šæ£€æŸ¥æ•°æ®çš„è¶Šç•Œè¡Œä¸ºçš„ï¼\n\n3.æŒ‡é’ˆæŒ‡å‘ç©ºé—´é‡Šæ”¾å°±ç½®ä¹‹ä¸ºNULLåœ¨æˆ‘ä»¬æŒ‡é’ˆä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œä¸ºäº†é¿å…æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´è¢«ç³»ç»Ÿé‡Šæ”¾\næˆ‘ä»¬å¯ä»¥å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©ºæŒ‡é’ˆ,NULL\n4.æŒ‡é’ˆä½¿ç”¨ä¹‹å‰æ£€æŸ¥æœ‰æ•ˆæ€§ä»€ä¹ˆæ˜¯æœ‰æ•ˆæ€§?\nNULLçš„ç©ºæŒ‡é’ˆå°±æ˜¯æ— æ•ˆçš„\nä¸ºäº†é¿å…æˆ‘ä»¬å¼•ç”¨è¿™ç§æ— æ•ˆçš„ç©ºæŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨æŒ‡é’ˆä¹‹å‰ç”¨ifè¯­å¥åˆ¤æ–­ä¸€ä¸‹å®ƒæ˜¯å¦ä¸ºç©º\nif(p!=NULL)\t*p=10;\n\nåˆ¤æ–­ä¸ºæœ‰æ•ˆæŒ‡é’ˆï¼Œæˆ‘ä»¬å†ä½¿ç”¨å®ƒ\nåšåˆ°ä»¥ä¸Š4ç‚¹ï¼Œå°±èƒ½åŸºæœ¬é¿å…æˆ‘ä»¬çš„ä»£ç å‡ºé”™ã€‚è¿™åªèƒ½é¿å…ï¼Œå¹¶ä¸èƒ½æœç»\nâ€œä½ æ°¸è¿œå«ä¸é†’ä¸€ä¸ªæƒ³å†™bugçš„äººâ€\n\nç»“è¯­ä»¥ä¸Šå°±æ˜¯é‡æŒ‡é’ˆçš„åŸºæœ¬è§£é‡Šï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©\nç‚¹ä¸ªèµå†èµ°å§ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘äºŒçº§æŒ‡é’ˆ","url":"/2021/09/28/note_c/21%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88/","content":"äºŒçº§æŒ‡é’ˆä»€ä¹ˆæ˜¯äºŒçº§æŒ‡é’ˆï¼Ÿæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„int*på°±æ˜¯ä¸€ä¸ªä¸€çº§æŒ‡é’ˆï¼Œè€ŒäºŒçº§æŒ‡é’ˆå­˜æ”¾çš„å˜é‡å°±æ˜¯ä¸€ä¸ªä¸€çº§æŒ‡é’ˆä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nint main()&#123;\tint a =10;    int*pa= &amp;a;                    //æœ‰ä¸¤ä¸ª*å· çš„åŸå›     int ** ppa= &amp;pa;//int*æ˜¯ä»£è¡¨å˜é‡paçš„ç±»å‹ï¼Œ*ppaè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡        return 0ï¼›&#125;\n\nè¿™é‡Œé¢paæ˜¯æŒ‡é’ˆå˜é‡ï¼Œä¸€çº§æŒ‡é’ˆ\nppaæ˜¯äºŒçº§æŒ‡é’ˆå˜é‡ï¼Œ&amp;paå–å‡ºpaåœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€\nå¦‚å›¾æ‰€ç¤º\nå°ç»“ç®€å•çš„è¯´ï¼ŒæŒ‡é’ˆå˜é‡ä¹Ÿæ˜¯å˜é‡ï¼Œå˜é‡å°±æœ‰å±äºå®ƒçš„åœ°å€ï¼Œè€ŒäºŒçº§æŒ‡é’ˆå°±æ˜¯ç”¨æ¥å­˜æ”¾æŒ‡é’ˆå˜é‡çš„åœ°å€çš„\nå¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•å°†è¾“å…¥çš„æ•°å­—é€†åºæ‰“å°","url":"/2021/11/11/note_c/22%E5%A6%82%E4%BD%95%E5%B0%86%E8%BE%93%E5%85%A5%E7%9A%84%E6%95%B0%E5%AD%97%E9%80%86%E5%BA%8F%E6%89%93%E5%8D%B0/","content":"ï»¿è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨åšå­¦æ ¡çš„ä½œä¸šæ—¶å€™çœ‹åˆ°çš„ã€‚åªéšçº¦æœ‰å°è±¡è®²è¿‡ï¼Œä½†æ˜¯å¿˜è®°äº†æ€ä¹ˆæ“ä½œã€‚å¬åŒå­¦çš„ç‚¹é€šæ‰å›æƒ³èµ·æ¥ï¼Œç‰¹æ­¤å†™ä¸ªåšå®¢ç•™è®°\n\n\n[toc]\né€†åºæ‰“å°ç›®çš„ï¼šè¾“å…¥â€œ789â€ï¼Œæ‰“å°â€œ987â€\n\næ³¨ï¼šæœ¬åšå®¢çš„æ•°å­—é€†åºåªæ¶‰åŠ åè¿›åˆ¶\n\nä»£ç å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼š1.åˆ©ç”¨ifè¯­å¥è¿›è¡Œå¤§å°åˆ¤æ–­ï¼Œç›´åˆ°é€‰å‡ºä»å¤§åˆ°å°çš„æ•°å­—æ’åºè¿™ä¸ªæ–¹æ³•ååˆ†å¤æ‚ï¼Œç¨ä¸ç•™æ„å°±ä¼šå¼„é”™ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­ä¸æ¨èè¿™æ ·æ“ä½œè¿™é‡Œå°±ä¸èµ˜è¿°å…·ä½“ä»£ç äº†ã€‚(æ‰ä¸æ˜¯æ‡’ï¼Œå‹æ ¹æ²¡è¯•è¿‡ï¼‰2.ä½¿ç”¨%10çš„æ–¹æ³•ç›´æ¥æ‰“å°ä»£ç å¦‚ä¸‹ï¼š\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 0;\tscanf(&quot;%d&quot;, &amp;a);\tprintf(&quot;%d&quot;, a % 10);\tprintf(&quot;%d&quot;, a/10 % 10);\tprintf(&quot;%d&quot;, a/100 % 10);\treturn 0;&#125;\n\nä»£ç ç»“æœå¦‚ä¸‹è¿™ä¸ªä»£ç æˆåŠŸè¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„å¼Šç«¯å¦‚æœæˆ‘ä»¬éœ€è¦æ›´å¤šä½çš„æ•°å­—çš„é€†åºæ•°æ—¶ï¼Œè¿™ä¸ªä»£ç å°±ä¼šå˜å¾—å¾ˆé•¿ï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„printf\n\nä»£ç ä¼˜åŒ–1æƒ³è¦é€†åºæ¯”è¾ƒé•¿çš„æ•°å­—ï¼Œå°±éœ€è¦ç”¨åˆ°å¾ªç¯è¯­å¥ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯forå¾ªç¯ä¸»è¦éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œaæ¯%10ä¸€æ¬¡åå°±éœ€è¦é™¤ä»¥10å†%10ä¸€æ¬¡\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 0;\tint n = 0;\tint i = 0;\tprintf(&quot;è¯·è¾“å…¥éœ€è¦é€†åºçš„æ•°å­—ï¼š&quot;);\tscanf(&quot;%d&quot;, &amp;a);\tprintf(&quot;è¯·è¾“å…¥è¯¥æ•°å­—çš„ä½æ•°ï¼š&quot;);\tscanf(&quot;%d&quot;, &amp;n);\tfor (i = 0; i &lt; n; i++)\t&#123;\t\t\tprintf(&quot;%d&quot;, a % 10);\t\ta /= 10;\t\t\t&#125;\treturn 0;&#125;\n\nä»£ç è¿è¡Œç»“æœå¦‚ä¸‹æˆ‘ä»¬çš„ç›®çš„æˆåŠŸè¾¾æˆï¼\n\nä»£ç ä¼˜åŒ–2ä¸Šé¢çš„ä»£ç è™½ç„¶å®Œæˆäº†æˆ‘ä»¬è®¾æƒ³çš„ç›®çš„ï¼Œä½†å®ƒè¿˜æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹\néœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥æ•°å­—çš„ä½æ•°\n\nè®¾æƒ³ä¸€ä¸‹ï¼Œç³»ç»Ÿéœ€è¦ä½ å¡«å†™ä½ çš„æ‰‹æœºå·ï¼Œä½ è¾“å…¥è‡ªå·±çš„æ‰‹æœºå·åï¼Œç³»ç»Ÿè¿˜è¦å†é—®é—®ä½ â€œä½ çš„æ‰‹æœºå·æœ‰å‡ ä½æ•°â€\nè¿™æ¢è°éƒ½è¡€å‹é£™å‡ï¼Œæ€’mä»£ç çŒ¿äº†å§ï¼\n\né‚£æ€æ ·è®©ä»£ç è‡ªåŠ¨é€†è½¬æˆ‘ä»¬éœ€è¦çš„æ•°å­—å‘¢ï¼Ÿ\n\næ³¨ï¼šè¿™ä¸²ä»£ç æ˜¯æˆ‘åœ¨bç«™çœ‹åˆ°çš„ï¼Œé¡¿æ—¶è”æƒ³åˆ°äº†è‡ªå·±çš„åšå®¢ï¼Œäºæ˜¯åˆè·‘è¿‡æ¥æ›´æ–°äº†! åŸè§†é¢‘é“¾æ¥\n\n\nå›¾é‡Œwhileåé¢çš„ä¸ç­‰äºç¬¦å·åº”è¯¥æ˜¯ä¸€ä¸ªvscodeçš„æ’ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ”¹æˆ!&#x3D;\n#include &lt;stdio.h&gt;int main()&#123;\tint num;\tprintf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼›&quot;);\tscanf(&quot;%d&quot;, &amp;num);\tint reverse = 0;\twhile (num != 0)\t&#123;\t\treverse = reverse * 10 + num % 10;\t\tnum /= 10;\t\t\t&#125;\t//è¾“å‡ºåè½¬åçš„æ•°å­—\tprintf(&quot;åè½¬åçš„æ•°å­—æ˜¯ï¼š%d\\n&quot;, reverse);\treturn 0;&#125;\n\n\nè¿™ä¸²ä»£ç å°±æ˜¯å®Œç¾çš„äº†å—ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é”®å…¥1000ï¼Œç»“æœå°±ä¼šå‘ç”Ÿä¸€äº›ç»†å¾®çš„å˜åŒ–\n\nè¾“å‡ºçš„ç»“æœç«Ÿç„¶æ˜¯1ï¼Œä½†æˆ‘ä»¬éœ€è¦çš„åº”è¯¥æ˜¯0001\n\nä»£ç ä¼˜åŒ–3è¿™é‡Œæ¶‰åŠåˆ°äº†%dæ—¶å·¦è¡¥0çš„é—®é¢˜\nprintfæ‰“å°æ—¶%då·¦è¡¥0å‡è®¾ä¸‹é¢è¿™ä¸²ä»£ç æ˜¯éœ€è¦è¾“å‡º1000é€†åºåæ•°å­—0001çš„printfè¯­å¥\nå› ä¸º1000åªæœ‰4ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨%å’Œdä¹‹é—´åŠ ä¸Š04\nå³æ»¡4ä½ä¸è¡¥ï¼Œä¸æ»¡4ä½å·¦è¡¥0\nint n =1;pirntf(&quot;%04d&quot;,n);\n\nä½†åœ¨é€†åºæ•°å­—é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å°çš„æ•°å­—é•¿åº¦æ˜¯ä¸å¯æ§çš„\nè¿™é‡Œéœ€è¦ç”¨åˆ°å·¦è¡¥0çš„å¦å¤–ä¸€ç§ä»£ç \n\nç”¨å¦å¤–ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºæ•°çš„ä½æ•°\n\nint n=1;int m=3;//ä»£è¡¨æ•°çš„ä½æ•°ï¼ŒåŒ%03dé‡Œé¢3çš„æ„ä¹‰ä¸€æ ·pirntf(&quot;%0*d&quot;,m,n);\n\nè¿™æ ·ä¸‹æ¥å°±ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åŸæœ‰çš„whileå¾ªç¯é‡Œé¢åŠ ä¸Šå¦å¤–ä¸€ä¸ªå˜é‡\næ¯æ¬¡é€†åºå¾ªç¯å®Œæˆåï¼Œè¿™ä¸ªå˜é‡éƒ½++ä¸€æ¬¡ï¼Œå°±èƒ½è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„\n#include &lt;stdio.h&gt;int main()&#123;\tint num;\tint j = 0;\tprintf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼›&quot;);\tscanf(&quot;%d&quot;, &amp;num);\tint reverse = 0;\twhile (num != 0)\t&#123;\t\treverse = reverse * 10 + num % 10;\t\tnum /= 10;\t\tj++;\t&#125;\t//è¾“å‡ºåè½¬åçš„æ•°å­—\tprintf(&quot;åè½¬åçš„æ•°å­—æ˜¯ï¼š%0*d\\n&quot;,j, reverse);\treturn 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n\nè¿™ä¸‹æˆ‘ä»¬çš„ç›®çš„æ‰çœŸæ­£å®Œæˆäº†ï¼Œæ—¢å¯ä»¥ä¸ç”¨è‡ªå·±å¤šè¾“å…¥ä¸€éæ•°å­—çš„ä¸ªæ•°\nåˆèƒ½åœ¨è¾“å…¥10000è¿™ç±»æ•°å­—çš„æ—¶å€™ï¼Œé€†åºåè‡ªåŠ¨å·¦è¡¥0\n\nå¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘printfå‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼Œæ¶‰åŠå‡½æ•°ä¼ å‚","url":"/2021/10/26/note_c/23printf%E5%87%BD%E6%95%B0%E7%9A%84%E7%89%B9%E6%AE%8A%E6%96%B9%E5%BC%8F/","content":"é—®é¢˜äº§ç”Ÿå¶ç„¶åœ¨cè¯­è¨€å­¦ä¹ äº¤æµç¾¤çœ‹åˆ°äº†è¿™ä¹ˆä¸€ä¸²è®©äººè´¹è§£çš„ä»£ç \n\n#include &lt;stdio.h&gt;int main()&#123;\tint i = 0;\tint j = 0;\tscanf(&quot;%d&quot;, &amp;i);\tj = -i++;\tprintf(&quot;%d %d %d&quot;, i, j, i++);\treturn 0;&#125;\n\nè¿™é‡Œè®©æˆ‘ç–‘æƒ‘çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆæ‰“å°çš„ç¬¬ä¸€ä¸ªiæ˜¯6è€Œä¸æ˜¯5ï¼Ÿ\n\nprintfè¯­å¥çš„æ‰§è¡Œé¡ºåºè¿™é‡Œè¦æ¶‰åŠåˆ°ä¸€ä¸ªä¹‹å‰æˆ‘å¹¶ä¸æ¸…æ¥šçš„çŸ¥è¯†ç‚¹\nscanf(&quot;%d&quot;, &amp;i);j = -i++;printf(&quot;%d %d %d&quot;, i, j, i++);\n\næŒ‰ç…§ä»¥å¾€æˆ‘çš„ç†è§£ï¼Œä»£ç çš„è¿è¡Œé¡ºåºæ˜¯è¿™æ ·çš„\n\n1.ç”¨scanfå°†æ•°å­—èµ‹å€¼ç»™i\n2.å°†-ièµ‹å€¼ç»™jï¼Œç„¶åi++ ï¼ˆæ³¨ï¼šåç½®++æ˜¯å…ˆä½¿ç”¨å†++ï¼‰\n3.printfå‡½æ•°ä¾æ¬¡æ‰“å°5ï¼Œ-4ï¼Œ6\n\nå¯ä»£ç å›å®ƒå¹¶ä¸æƒ³è¿™ä¹ˆè·‘\nè¿™é‡Œè¦æ¶‰åŠåˆ°å‡½æ•°å†…æ•°æ®ä¼ å‚çš„é—®é¢˜\nå‡½æ•°å†…æ•°æ®ä¼ å‚å‡½æ•°çš„ä¼ å‚æ˜¯ä»å³å¾€å·¦å¼€å§‹ä¼ å‚çš„\næ‰€ä»¥è¿™ä¸²ä»£ç åœ¨è¿è¡Œåˆ°printfçš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œç¬¬äºŒä¸ªi++è¯­å¥ï¼Œæ­¤æ—¶i&#x3D;6\nç„¶åå†ä»å·¦å¾€å³ä¾æ¬¡æ‰“å°iï¼Œjï¼Œå’Œåç½®++ä¹‹å‰çš„i\n\nâ€œé¦–å…ˆ-i++ï¼Œæ˜¯æŠŠ-içš„å€¼-4ç»™äº†jï¼Œç„¶åi++å˜æˆäº†5ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‡½æ•°çš„ä¼ å‚äº†ï¼Œä¸€èˆ¬æ˜¯ä»å³3å‘å·¦ä¼ å‚çš„â€\n\næ‰“å°æ˜¯ä»å·¦å¾€å³æ‰“å°ï¼Œä½†æ˜¯æ‹¬å·å†…éƒ¨ä»å³å¾€å·¦è®¡ç®—\n\næ€»ç»“è¿™é‡Œé€ç»™å¤§å®¶ä¸€å¼ å›¾ï¼Œæ€»ç»“è¿™ä¸ªé—®é¢˜çš„åŸç†\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å§ï¼\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç®€å•çš„printfé€’å½’","url":"/2021/10/26/note_c/24%E7%AE%80%E5%8D%95print%E9%80%92%E5%BD%92/","content":"ç®€å•çš„Printé€’å½’\nè¯´å¥é¢˜å¤–è¯ï¼Œå¾ˆå¤šæ—¶å€™å•è¯æˆ‘æ˜¯è®¤è¯†çš„ï¼Œä½†æ˜¯å¦‚æœå®ƒå…¨å¤§å†™äº†ï¼Œæˆ‘æ€»è¦ååº”è€ä¸€ä¼šæ‰èƒ½æƒ³å‡ºæ¥å®ƒçš„æ„æ€\næœ‰å’Œæˆ‘ä¸€æ ·çš„äººå—?\n\nä»Šå¤©çš„cè¯­è¨€è¯¾è®²åˆ°äº†ä¸€é“éå¸¸ç»å…¸çš„é€’å½’é¢˜ç›®\nä»£ç å¦‚ä¸‹ï¼š\n#include &lt;stdio.h&gt;void Print(int n)&#123;\tif (n &gt; 9)\t\tPrint(n / 10);\tprintf(&quot;%d &quot;, n % 10);&#125;int main()&#123;\tint num = 0;\tscanf(&quot;%d&quot;, &amp;num);\tPrint(num);\treturn 0;&#125;\n\nç»“æœå¦‚ä¸‹\n\nè¿è¡Œé¡ºåºè°ˆåˆ°é€’å½’çš„æ—¶å€™ï¼Œæœ€é‡è¦çš„å°±æ˜¯è¦å¼„æ˜ç™½å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆè¿è¡Œçš„\nè€å¸ˆä¸Šè¯¾è®²çš„æ–¹æ³•éå¸¸ç›´è§‚çš„è¡¨ç¤ºäº†å®ƒçš„è¿ç®—é¡ºåº\nè¿™é‡Œæˆ‘ç”¨ç²˜è´´ä»£ç å—çš„æ–¹å¼æ¥å±•ç¤º\nåˆšå¼€å§‹æ‰§è¡Œçš„æ˜¯scanfè¾“å…¥ï¼Œè¿™é‡Œä¸å†èµ˜è¿°\nvoid Print(int n)&#123;\tif (n &gt; 9)\t\tPrint(n / 10);\tprintf(&quot;%d &quot;, n % 10);&#125;\n\nè¿™ä¸€å—æ˜¯æˆ‘ä»¬é€’å½’çš„ä¸»ä½“\nvoid Print(int n)&#123;\tif (n &gt; 9)\t  Print(3578 / 10);    \t\tif (n &gt; 9)\t\t\tPrint(357 / 10);    \tprintf(&quot;%d &quot;, 357 % 10);//7    \t\t\tif (n &gt; 9)\t\t\t\tPrint(35 / 10);    \t\tprintf(&quot;%d &quot;, 35 % 10);//5    \t\t\t\tif (n &gt; 9)//è¿™æ—¶å€™å€¼ä¸º3ï¼Œå·²ç»ä¸æ»¡è¶³æ¡ä»¶\t\t\t\t\t\tPrint(3 / 10);//è¯¥è¯­å¥ä¸æ‰§è¡Œ    \t\t\tprintf(&quot;%d &quot;, 3 % 10);//3\tprintf(&quot;%d &quot;, 3578 % 10);//8&#125;\n\nçœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹ä¹±ï¼Œåœ¨è¿™åŸºç¡€ä¸ŠåŠ ä¸Šä¸€äº›ç®­å¤´å°±ä¼šæ¸…æ™°äº†\n\nèµ·åˆæˆ‘çš„æƒ³æ³•æ˜¯ï¼Œåœ¨è¿›è¡Œifåˆ¤æ–­ä¹‹åï¼Œä¼šå…ˆæ‰§è¡Œä¸‹é¢çš„printfï¼Œå³å…ˆæ‰“å°æœ€åä¸€ä½æ•°8ï¼Œå†å‘å‰æ‰“å°\n\nå®é™…ä¸Šï¼Œifè¯­å¥åçš„Printå‡½æ•°çš„åµŒå¥—è°ƒç”¨æ˜¯åœ¨ä¸‹ä¸€è¡Œprintfä¹‹å‰çš„ã€\nä¹Ÿå°±æ˜¯è¯´å®ƒéœ€è¦åƒå›¾ä¸­è¿™æ ·å®Œå…¨è°ƒç”¨å®Œï¼Œç›´åˆ°ifåˆ¤æ–­ä¸ºå‡åï¼Œæ‰ä¼šä»åå¾€å‰è¿è¡Œprintfè¯­å¥\nè¿™æ‰æœ‰äº†æœ€å¼€å§‹æˆ‘è´´çš„ç»“æœ\nç¨‹åºä¾æ¬¡æ‰“å°äº†æ¯ä¸€ä½çš„æ•°å­—\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¶è—æ”¯æŒä¸€ä¸‹ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³","url":"/2021/10/30/note_c/25%E9%AA%8C%E8%AF%81%E5%93%A5%E5%BE%B7%E5%B7%B4%E8%B5%AB%E7%8C%9C%E6%83%B3/","content":"é—®é¢˜æ¥æºè¿™æ˜¯å­¦æ ¡çš„ä¸€ä¸ªä½œä¸šï¼ŒåŸé¢˜å¦‚ä¸‹\n\né¢˜ç›®å…ˆç»™å‡ºäº†å“¥å¾·å·´èµ«çŒœæƒ³çš„èƒŒæ™¯çŸ¥è¯†ï¼ˆæˆ‘è¿˜çœŸä¸çŸ¥é“ï¼‰\n2000ä»¥å†…çš„æ­£å¶æ•°éƒ½èƒ½åˆ†è§£æˆä¸¤ä¸ªè´¨æ•°ï¼ˆç´ æ•°ï¼‰ä¹‹å’Œ\né¢˜ç›®è¦æ±‚ä¸‹é¢æ¥æ¢³ç†ä¸€ä¸‹é¢˜ç›®çš„è¦æ±‚ï¼š\n\nè¾“å‡ºæ ·å¼ä¸ºa&#x3D;b+cï¼Œä½¿ç”¨%4d&#x3D;%4d+%4dè¾“å‡º\næ¯è¡Œè¾“å‡º4ä¸ªï¼Œæ¯è¡Œæœ€åä¸€ä¸ªè¾“å‡ºæ— ç©ºæ ¼\næ¯ä¸ªå¶æ•°åªéœ€è¦ä¸€ä¸ªç»“æœå³å¯ï¼ˆåç»­è¾ƒå¤§çš„å¶æ•°æœ‰å¾ˆå¤šç§è§£ï¼‰\n\nå¼„æ‡‚äº†é¢˜ç›®è¦æ±‚ï¼Œä¸‹é¢å°±æ¥ä¸€æ­¥ä¸€æ­¥å†™ä»£ç \n\nå¦‚ä½•åˆ¤æ–­ç´ æ•°ï¼Ÿåœ¨ä¸Šç¯‡åšå®¢é‡Œé¢æåˆ°äº†å¦‚ä½•åˆ¤æ–­ç´ æ•°&#x3D;&#x3D;&gt;ã€é“¾æ¥ã€‘ï¼Œè¿™é‡Œä¸å†èµ˜è¿° \næˆ‘ä»¬éœ€è¦æå®šçš„æ˜¯åˆ¤æ–­æ˜¯é‚£ä¸¤ä¸ªç´ æ•°bã€cç›¸åŠ ç­‰äºæˆ‘ä»¬éœ€è¦çš„é‚£ä¸ªæ•°a\nå› ä¸ºéœ€è¦å¤šæ¬¡åˆ¤æ–­ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\nint SuShu(int a)&#123;\tif (a == 2)\t&#123;\t\treturn 1;\t&#125;\tint j = 0;\tfor(j = 2; j &lt;=sqrt(a); j++)\t&#123;\t\tif (a % j == 0)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t&#125;\treturn 1;&#125;\n\nä¸ºä»€ä¹ˆæ˜¯return1å’Œ0å‘¢ï¼Ÿ\nå› ä¸ºåœ¨å†™è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œæˆ‘æœ¬æ¥æ˜¯æƒ³åˆ¤æ–­ä¹‹åè¿”å›ä¸€ä¸ªç´ æ•°ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ•ˆç‡å¤ªä½\nè€Œä¸”å†™åˆ°åé¢æˆ‘è‡ªå·±éƒ½ä¸ä¼šå†™äº†ï¼Œé‚æ”¾å¼ƒã€‚\n\nä¸»å‡½æ•°\næœ€ç»ˆå®ç°å½¢å¼ï¼šn&#x3D;a+(n-a)\n\nåœ¨è‡ªå®šä»¥å‡½æ•°é‡Œé¢è¿”å›çš„å€¼æ˜¯1å’Œ0\nä¸»å‡½æ•°é‡Œé¢å°±éœ€è¦å†…å®¹æ¥æ¥æ”¶\nif (SuShu(a) &amp;&amp; SuShu(n - a))//åˆ¤æ–­aå’Œn-aæ˜¯å¦éƒ½æ˜¯ç´ æ•°\n\nåŒæ—¶æˆ‘ä»¬éœ€è¦å®Œæˆæ‰“å°4è¡Œæ¢ä¸€è¡Œï¼Œä»¥åŠæ¯è¡Œæœ€åä¸€ä¸ªä¸èƒ½æœ‰ç©ºæ ¼çš„è¦æ±‚\nè¿™æ—¶å€™ç›´æ¥åœ¨printfè¯­å¥é‡Œé¢åŠ ç©ºæ ¼å·²ç»ä¸å¤Ÿäº†\néœ€è¦ç”¨åˆ°åˆ¤æ–­è¯­å¥ï¼Œåˆ¤æ–­å·²ç»æ‰“å°äº†å‡ ä¸ªç­‰å¼\nif (SuShu(a) &amp;&amp; SuShu(n - a))&#123;\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\tcount++;//æ¯æ‰“å°ä¸€æ¬¡å°±++ä¸€æ¬¡\tif (count % 4 == 0)\t&#123;  //æ‰“å°4æ¬¡åæ‰“å°ä¸€ä¸ªæ¢è¡Œç¬¦\tprintf(&quot;\\n&quot;);\t&#125;\telse\t&#123;  //ä¸å¤Ÿ4æ¬¡ï¼Œéœ€è¦æ‰“å°ç©ºæ ¼\tprintf(&quot; &quot;);\t&#125;&#125;\n\nç´ æ•°åˆ¤æ–­çš„éƒ¨åˆ†æˆ‘ä»¬å·²ç»å†™å®Œäº†\næ¥ä¸‹æ¥è¦å†™çš„æ˜¯ä¸€ä¸ªforå¾ªç¯ï¼Œè®©nä»4å¼€å§‹ä¸€ç›´+åˆ°2000\nå¦å¤–ï¼ŒåŒã€å¦‚ä½•åˆ¤æ–­ç´ æ•°ã€‘åšå®¢ä¸­çš„å¼€å¹³æ–¹æ³•ä¸€æ ·\nåœ¨éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³çš„æ—¶å€™ï¼Œè‹¥a&#x3D;b+cï¼Œbå’Œcä¸­è‚¯å®šæœ‰ä¸€ä¸ªæ•°å°äºæˆ–ç­‰äºa&#x2F;2\nåœ¨å†™açš„forå¾ªç¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è®©åˆ¤æ–­æ¡ä»¶a&lt;&#x3D;n&#x2F;2ï¼Œè€Œä¸æ˜¯a&lt;n\nfor (n = 4; n &lt;= 2000; n+=2)&#123;\tfor (int a = 2; a &lt;= n/2 ; a++)\t&#123;  //åœ¨ä¹‹å‰æˆ‘ä»¬å¹¶æ²¡æœ‰å®šä¹‰aï¼Œéœ€è¦åœ¨forå¾ªç¯é‡ŒåŠ ä¸Šint\t\tif (SuShu(a) &amp;&amp; SuShu(n - a))\t\t&#123;\t\t\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\t\t\tcount++;\t\t\tif (count % 4 == 0)\t\t\t&#123;\t\t\t\tprintf(&quot;\\n&quot;);\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot; &quot;);\t\t\t&#125;\t\t&#125;\t&#125;\t&#125;\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¸»å‡½æ•°ä¹Ÿå®Œæˆå•¦ï¼\nå®Œæ•´ä»£ç +æ•ˆæœæ¼”ç¤º#include &lt;stdio.h&gt;#include &lt;math.h&gt; int SuShu(int a)&#123;\tif (a == 2)\t&#123;\t\treturn 1;\t&#125;\tint j = 0;\tfor(j = 2; j &lt;=sqrt(a); j++)\t&#123;\t\tif (a % j == 0)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t&#125;\treturn 1;&#125;//éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³ï¼Œè¾“å‡º4åˆ°2000çš„å¶æ•°//æ¯ä¸ªå¶æ•°çš„ç»“æœåªè¾“å‡ºä¸€æ¬¡int main()&#123;\tint n = 0;\tint count = 0;\tfor (n = 4; n &lt;= 2000; n+=2)\t&#123;\t\tfor (int a = 2; a &lt;= n/2 ; a++)\t\t&#123;\t\t\tif (SuShu(a) &amp;&amp; SuShu(n - a))\t\t\t&#123;\t\t\t\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\t\t\t\tcount++;\t\t\t\tif (count % 4 == 0)\t\t\t\t&#123;\t\t\t\t\tprintf(&quot;\\n&quot;);\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\tprintf(&quot; &quot;);\t\t\t\t&#125;\t\t\t\tbreak; //åªæ‰“å°ä¸€ç§æƒ…å†µ\t\t\t&#125;\t\t&#125;\t\t\t&#125;\treturn 0;&#125;\n\nç»†å¿ƒçš„ä½ è‚¯å®šæ³¨æ„åˆ°ï¼Œåœ¨mainå‡½æ•°ä¸­åˆ¤æ–­ç´ æ•°çš„è¯­å¥é‡Œå¤šäº†ä¸€ä¸ªbreakï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nå¦‚æœæ²¡æœ‰breakï¼Œç»“æœå¦‚ä¸‹ï¼š\nä»£ç ä¼šå°†ç¬¦åˆæ¡ä»¶çš„ç´ æ•°ç›¸åŠ å…¨éƒ¨æ‰“å°å‡ºæ¥\nè¿™æ˜¾ç„¶ä¸ç¬¦åˆæ¯ä¸ªå¶æ•°çš„ç»“æœåªè¾“å‡ºä¸€æ¬¡çš„è¦æ±‚\n\nä½†åœ¨åŠ äº†breakè¿™ä¸ªæ–­ç‚¹ä¹‹å\nä»£ç çš„ç»“æœå°±å’Œé¢˜ç›®è¦æ±‚çš„ä¸€æ ·äº†\n\n\nå†™ä»£ç ä¸­çš„è¯¯è§£åœ¨æœ€ç»ˆæäº¤ä»£ç çš„æ—¶å€™ï¼Œæˆ‘çš„ä»£ç æ ¼å¼å‡ºé”™äº†\nåŸå› æ˜¯æˆ‘åœ¨printfè¯­å¥é‡Œé¢åŠ å¤šäº†ä¸¤ä¸ªç©ºæ ¼ï¼Œå¦‚ä¸‹ï¼š\nprintf(&quot;%4d= %4d+ %4d&quot;, n, a, n - a);\n\nä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³å½“ç„¶çš„å¤šåŠ ä¸¤ä¸ªç©ºæ ¼å‘¢ï¼Ÿ\nå› ä¸ºé¢˜ç›®æ‰€ç»™çš„è¾“å‡ºæ ·ä¾‹ï¼Œè®©æˆ‘è¯¯ä»¥ä¸º&#x3D;å’Œ+ä¹‹é—´éƒ½æœ‰ä¸¤ä¸ªç©ºæ ¼\n\nå®é™…ä¸Šè¿™é‡Œå¹¶æ²¡æœ‰ç©ºæ ¼ï¼Œå®ƒçš„â€œç©ºæ ¼â€æ˜¯printfä¸­çš„%4dé€ æˆçš„\nä»£ç ç»™è¿™é‡Œç•™äº†4ä¸ªæ•°å­—çš„ä½ç½®ï¼Œä½†æ˜¯å¤§å¤šéƒ½åªæœ‰ä¸€ä¸ªæ•°å­—å’Œä¸¤ä¸ªæ•°å­—\näºæ˜¯å®ƒä»¬å‰é¢å°±ä¼šæœ‰3æˆ–è€…2ä¸ªç•™ç»™æ•°å­—çš„ç©ºï¼Œè®©æˆ‘è¯¯ä»¥ä¸ºè¿™é‡Œæœ‰ç©ºæ ¼\nåŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡ï¼\n\næ€»ç»“é€šè¿‡è¿™é“é¢˜ï¼Œæˆ‘å¤ä¹ äº†å¾ªç¯å’Œè‡ªå®šä¹‰å‡½æ•°çš„å†™æ³•ï¼Œä¹Ÿè·å¾—äº†å“¥å¾·å·´èµ«çŒœæƒ³çš„æ–°çŸ¥è¯†\nå¤šåˆ·åˆ·é¢˜æ€»æ˜¯å¥½çš„\nå¸Œæœ›è¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•åˆ¤æ–­ç´ æ•°","url":"/2021/10/30/note_c/26%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E7%B4%A0%E6%95%B0/","content":"å¦‚ä½•åˆ¤æ–­ç´ æ•°\né¢˜ç›®è¦æ±‚ï¼šè¾“å‡º100-200çš„ç´ æ•°\n\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯ç´ æ•°ï¼ˆè´¨æ•°ï¼‰ï¼Œä»¥é˜²æœ‰äººå¿˜è®°ï¼ˆæ¯”å¦‚åˆšå­¦å¼€å§‹å­¦cçš„æˆ‘å°±å¿˜è®°äº†ï¼‰\nç´ æ•°ï¼ˆè´¨æ•°ï¼‰åªèƒ½è¢«1å’Œå®ƒè‡ªå·±æ•´é™¤\n\n\n7åªèƒ½è¢«1å’Œ7æ•´é™¤ï¼Œæ˜¯ç´ æ•°\n9èƒ½è¢«3æ•´é™¤ï¼Œä¸æ˜¯ç´ æ•°\n\n\næ–¹æ³•1â€”è¯•é™¤æ³•#include&lt;stdio.h&gt;int main()&#123;    int i=0;    int count=0;    for(i=100;i&lt;=200;i++)    &#123;        int j=0;        for(j=2;j&lt;i;j++)        &#123;             if(i%j==0)//iå¯ä»¥æ•´é™¤jï¼Œiä¸æ˜¯ç´ æ•°             &#123;                 break;             &#125;        &#125;        if(j==i)//iåªèƒ½æ•´é™¤å®ƒè‡ªå·±ï¼Œæ˜¯ç´ æ•°        &#123;            count++;            printf(&quot;%d &quot;,i);        &#125;    &#125;    printf(&quot;\\ncount=%d\\n&quot;,count);//è®¡ç®—100-200ä¹‹é—´æœ‰å‡ ä¸ªç´ æ•°    return 0;&#125;\n\n\nè¿™ä¸ªä»£ç æ¯”è¾ƒæ­»ï¼Œåªæ˜¯è¾“å‡ºäº†100åˆ°200ä¹‹é—´çš„ç´ æ•°ï¼Œå®Œæˆäº†é¢˜ç›®çš„è¦æ±‚\næˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¹é€ æˆè¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ç´ æ•°çš„å½¢å¼\n\nä»£ç æ”¹é€ 1-1\nç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—\nä»£ç åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°\næ˜¯ï¼Œè¾“å‡ºâ€œæ˜¯ç´ æ•°â€ä»¥åŠç”¨æˆ·è¾“å…¥çš„å€¼\nä¸æ˜¯ï¼Œè¾“å‡ºâ€œä¸æ˜¯ç´ æ•°â€\n\n#include&lt;stdio.h&gt;int main()&#123;    int i=0;    int j=0;    scanf(&quot;%d&quot;,&amp;i);    for(j=2;j&lt;i;j++)    &#123;    \tif(i%j==0)        &#123;            printf(&quot;ä¸æ˜¯ç´ æ•°\\n&quot;);            break;    \t&#125;\t&#125;    if(j==i)    &#123;        printf(&quot;æ˜¯ç´ æ•°,i=%d\\n&quot;,i);    &#125;      &#125;\n\nç»“æœå¦‚ä¸‹ï¼š\n\n\n\nä¸Šé¢çš„è¿™ä¸²ä»£ç èƒ½å¾ˆå¥½åœ°å®Œæˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†å®ƒè¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´\næ–¹æ³•2â€”å¼€å¹³æ–¹æ³•æ–¹æ³•1ä¸­çš„forå¾ªç¯ä¸ºj&lt;i\nå¦‚æœæ•°å­—å¾ˆå¤§çš„è¯ï¼Œè¦å¾ªç¯éå¸¸å¤šæ¬¡æ‰èƒ½å‡ºç°j&#x3D;&#x3D;içš„æƒ…å†µ\nè¿™å°±æ‹–æ…¢äº†æˆ‘ä»¬ç¨‹åºè¿è¡Œçš„é€Ÿåº¦\nè¿™é‡Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ¦‚å¿µ\n\nè‹¥i&#x3D;a*b\naå’Œbä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­— &lt;&#x3D; å¼€å¹³æ–¹i\n\n\nå¦‚16&#x3D;2x8&#x3D;4x4\nå…¶ä¸­2&lt;4\n\nè¿™æ ·å°±èƒ½å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š\nåœ¨æ ¹å·iä¹‹å‰ä¸€å®šæœ‰ä¸€ä¸ªæ•°å­—næ˜¯éç´ æ•°çš„é™¤æ•°\nå¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªæ•°å­—nï¼Œè¯´æ˜è¯¥æ•°å­—ä¸ºè´¨æ•°\n\nåˆ©ç”¨å¼€å¹³æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€è¦æŸ¥æ‰¾çš„æ•°å­—èŒƒå›´ç¼©å°å¾ˆå¤š\nä»¥ä¸‹æ˜¯ç”¨è¯¥æ–¹æ³•å®Œæˆå¼€å¤´é¢˜ç›®è¦æ±‚çš„ä»£ç ç¤ºä¾‹\n#include&lt;stdio.h&gt;int main()&#123;\tint i=0;\tfor(i=101;i&lt;=200;i+=2)\t&#123;\t\tint j=0;\t\tfor(j=2;j&lt;=sqrt(i);j++)\t\t&#123;\t\t\tif(i%j==0)\t\t\t&#123;\t\t\t\tbreak;             &#125;\t\t&#125;\t\tif(j&gt;sqrt(i))\t\t&#123;\t\t\tprintf(&quot;%d &quot;,i);\t\t&#125;\t&#125;\treturn 0;&#125;\n\n\nå°†è¿™ä¸ªä»£ç æ”¹é€ æˆ1-1é‚£ç§å½¢å¼ä¹Ÿä¸éš¾ï¼Œè‡ªå·±è¯•è¯•å§ï¼\nä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«çš„å¼Šç«¯è¯•é™¤æ³•è¯¥æ–¹æ³•ä¼šé”™è¿‡1\nå¼€å¹³æ–¹æ³•è¯¥æ–¹æ³•ä¼šé”™è¿‡2\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç”¨é€’å½’å’Œéé€’å½’ï¼Œæ±‚ç¬¬nä¸ªæ–æ³¢é‚£å¥‘æ•°","url":"/2021/11/07/note_c/27%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97/","content":"[toc]\né—®é¢˜å¼•å…¥ - ä»€ä¹ˆæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Ÿæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­ï¼Œç¬¬né¡¹ä¸ºn-1å’Œn-2é¡¹ä¹‹å’Œ\n\n1ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ8ï¼Œ13ï¼Œ21ï¼Œ34ï¼Œ55â€¦â€¦\n\nè¿™ä¸ªæ•°åˆ—éå¸¸ç»å…¸ï¼Œç»å¸¸ç”¨äºç¼–ç¨‹è¯­è¨€åˆå­¦è€…çš„ç»ƒä¹ \næ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”¨éé€’å½’å’Œé€’å½’ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸ªæ•°åˆ—\nå¹¶äº†è§£ä¸¤ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼\n\n1.éé€’å½’æ–¹æ³•ï¼ˆè¿­ä»£ï¼‰ä»€ä¹ˆæ˜¯è¿­ä»£ï¼Ÿ\nè¿­ä»£å…¶å®å’Œå¾ªç¯çš„æ„ä¹‰å·®ä¸å¤šï¼ˆä¸ªäººç†è§£ï¼‰\n\næˆ‘ä»¬è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ—¶å€™ï¼Œéœ€è¦ä»ç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹1ã€1å¼€å§‹è®¡ç®—\næ²¡åä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰ä¸¤é¡¹æ•°å­—ä¹‹å’Œ\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å¾ªç¯ï¼Œä»ç¬¬ä¸€é¡¹å¼€å§‹ä¸æ–­ç›¸åŠ ï¼Œå†ä½¿å…¶ä¸­ä¸€ä¸ªåŠ æ•°ç­‰äºå¾—åˆ°çš„å’Œ\nä»¥æ­¤è¿­ä»£ï¼Œå°±èƒ½å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„ç¬¬nä¸ªæ•°å­—\n\nä»£ç å®ç°#include&lt;stdio.h&gt;//éé€’å½’int fo1(int a)&#123;\tint tmp = 0;\tint num1 = 1;\tint num2 =1;\tif (a &lt; 3) //å‰ä¸¤é¡¹éƒ½ä¸º1\t&#123;\t\treturn 1;\t&#125;\telse//ä»ç¬¬ä¸‰é¡¹å¼€å§‹è¿­ä»£\t&#123;\t\tfor (int i = 0; i &lt;= a - 3; i++)\t\t&#123;\t\t\ttmp = num1 + num2;\t\t\tnum1 = num2;\t\t\tnum2 = tmp;\t\t&#125;\t\treturn tmp;\t&#125;&#125;int main()&#123;\tint a,b = 0;\tscanf(&quot;%d&quot;, &amp;a);\tb=fo1(a);\tprintf(&quot;%d\\n&quot;, b);\treturn 0;&#125;\n\nç»“æœå¦‚å›¾ï¼š\n\nè¿­ä»£çš„ç¼ºç‚¹è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹ï¼Œå³æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œå®¹æ˜“æ ˆæº¢å‡º\nå¦‚æœæ ˆæº¢å‡ºæ²¡æœ‰å½±å“ï¼Œè¿­ä»£çš„æ–¹æ³•å°±éå¸¸é€‚åˆ\n\næ¯”å¦‚ï¼š\n\né¢˜ç›®è§„å®šäº†ä¸è€ƒè™‘æ ˆæº¢å‡º\n\né¢˜ç›®è®¾å®šäº†æ•°å­—èŒƒå›´\n\n\n\n\n2.é€’å½’ä½¿ç”¨é€’å½’çš„åŸºæœ¬æ–¹æ³•ï¼Œå’Œè¿­ä»£å…¶å®æ˜¯ä¸€æ ·çš„\næœ€å¤§çš„ä¸åŒæ˜¯ï¼šé€’å½’çš„æ ¸å¿ƒæ˜¯å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±\n\nä»£ç å®ç°#include&lt;stdio.h&gt;//é€’å½’int fo2(int a)&#123;\tif ((a == 1) || (a == 2))\t&#123;\t\treturn 1;\t&#125;\telse\t&#123;\t\treturn (fo2(a - 1) )+( fo2(a- 2));//n-1å’Œn-2é¡¹\t&#125;&#125;int main()&#123;\tint a,b = 0;\tscanf(&quot;%d&quot;, &amp;a);\tb=fo2(a);\tprintf(&quot;%d\\n&quot;, b);\treturn 0;&#125;\n\næœ€ç»ˆæ‰§è¡Œçš„æ•ˆæœæ˜¯ä¸€æ ·çš„\né€’å½’çš„ç¼ºç‚¹é€’å½’çš„å®ç°æ–¹å¼æ˜¯å‡½æ•°ä¸åœåœ°è‡ªå·±è°ƒç”¨è‡ªå·±\nå¦‚å›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬éœ€è¦ç¬¬50ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„æ•°æ—¶\nå‡½æ•°éœ€è¦ä»50å¼€å§‹ï¼Œ49ã€48ï¼Œå†48ã€47â€¦â€¦\nè¿™ä¹ˆä¸€ç›´é€’å½’åˆ°ç¬¬3ä¸ªæ–æ³¢é‚£å¥‘åˆ—æ•°ï¼Œæ‰èƒ½é€çº§è¿”å›æ¯é¡¹çš„æ•°å­—ï¼Œå¾—å‡ºæœ€ç»ˆç­”æ¡ˆ\nè¿™å°±å¤§å¤§å¢åŠ äº†ç¨‹åºè¿è¡Œçš„æ—¶é—´ï¼\n\nä½ å¯èƒ½ä¼šå‘ç°ç¨‹åºä¾æ—§å¾ˆå¿«è¿è¡Œå®Œäº†ï¼Œé‚£æ˜¯å› ä¸ºç°åœ¨ç”µè„‘cpuçš„è¿è¡Œé€Ÿåº¦å·²ç»éå¸¸å¿«äº†\nä½†åœ¨æœ‰è¿è¡Œæ—¶é—´è¦æ±‚çš„é¢˜ç›®ä¸­ï¼Œè¿™æ ·æµªè´¹æ—¶é—´æ˜¯ä¸‡ä¸‡ä¸å¯çš„\n\n\næ€»ç»“é€’å½’å’Œè¿­ä»£ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜åŠ£ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…·ä½“æƒ…å¢ƒä¸­é€‰æ‹©æ˜¯ä½¿ç”¨é€’å½’è¿˜æ˜¯è¿­ä»£\nè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—åªæ˜¯è¿™å…¶ä¸­çš„ä¸€éƒ¨åˆ†\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œé‚£å°±ç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘æ•´å‹æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜å‚¨(è¯¦è§£)","url":"/2021/12/03/note_c/28%E6%95%B4%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8/","content":"[toc]\næ•°æ®ç±»å‹æˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€ä¸­æœ‰å¾ˆå¤šä¸åŒçš„æ•°æ®ç±»å‹\nåœ¨cppreference.comç½‘ç«™ä¸Šå¯ä»¥æ‰¾åˆ°Cè¯­è¨€ä¸­çš„ä¸åŒç±»å‹ã€é“¾æ¥ã€‘\n\nå…ˆæ¥è®¤è¯†ä¸€ä¸ªä¸é‚£ä¹ˆå¸¸è§çš„ç±»å‹\nå¸ƒå°”ç±»å‹C99ä¸­å¼•å…¥äº†å¸ƒå°”ç±»å‹  _Boolå®è´¨ï¼šæŠŠ1å’Œ0å˜æˆtureå’Œfalse\n#include&lt;stdbool.h&gt;int main()&#123;\t_Bool flag = true;\tif(flag)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t&#125;\treturn 0;&#125;\n\nä»£ç çš„æ•ˆæœå¦‚ä¸‹ï¼š\n\nå› ä¸ºå¸ƒå°”ç±»å‹å’Œä»¥1-0æ¥åˆ¤æ–­æ­£è¯¯çš„ä½œç”¨æ˜¯ç›¸åŒçš„\næ‰€ä»¥è¿™ä¸ªç±»å‹æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šä½¿ç”¨\n\næ— ç¬¦å·æ•°æ®çš„æ‰“å°Unsignedæ— ç¬¦å·æ•°ç”¨%uæ‰“å°\n\n\nç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œè®¤ä¸ºæ˜¯æœ‰ç¬¦å·æ•°\nç”¨%uæ‰“å°æ— ç¬¦å·æ•°çš„æ—¶å€™ï¼Œè´Ÿæ•°ä¼šä¹±ç \n\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•´å‹æ•°æ®åœ¨å†…å­˜ä¸­å ç”¨4ä¸ªå­—èŠ‚ï¼ˆ32ä½ï¼‰ï¼Œdoubleç±»å‹æ˜¯8ä¸ªå­—èŠ‚\nä¸åŒæ•°æ®å ç”¨çš„å­—èŠ‚\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨è¿™äº›ä¸åŒçš„æ•°æ®ç±»å‹\nä½†æ˜¯ä½ çŸ¥é“ï¼Œæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„å—ï¼Ÿ\nè¿™ç¯‡åšå®¢å°†å¸¦ä½ è®¤è¯†æ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨\n\næ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å…ˆæ¥è®¤è¯†ä¸€ä¸‹æ•´å‹å®¶æ—éƒ½æœ‰è°å§ï¼\næ•´å‹å®¶æ—\n\nchar\nâ€‹\tunsigned char\nâ€‹\tsigned char\n\nshort\nâ€‹\tunsigned short [int]\nâ€‹\tsigned short [int]\n\nint\nâ€‹\tunsigned int\nâ€‹\tsigned int\n\nlong\nâ€‹\tunsigned long [int]\nâ€‹\tsigned long [int]\n\n\n\næˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€é¢‘ç¹çš„intå…¶å®æ˜¯signed int\n\ncharåˆ°åº•æ˜¯signed charè¿˜æ˜¯unsigned charï¼Œå–å†³äºç¼–è¯‘å™¨çš„å®ç°\nå¸¸è§çš„ç¼–è¯‘å™¨ä¸‹ï¼Œcharå°±æ˜¯signed char\n\nåœ¨çŸ¥é“æ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ä¹‹å‰\næˆ‘ä»¬éœ€è¦å…ˆè®¤è¯†ä¸€ä¸‹ä¸‰ä¸ªå¥½æœ‹å‹â€œåŸ å è¡¥â€\nâ€œåŸåè¡¥â€ä¸‰å…„å¼Ÿæ­£æ•´æ•°ï¼šåŸåè¡¥ç ç›¸åŒ\nè´Ÿæ•´æ•°ï¼š\n\n\n\nåŸç \næŒ‰ç…§ä¸€ä¸ªæ•°çš„æ­£è´Ÿç›´æ¥å†™å‡ºæ¥çš„äºŒè¿›åˆ¶\n\n\n\nåç \nç¬¦å·ä½ä¸å˜ï¼Œå…¶ä»–ä½æŒ‰ä½å–å\n\n\nè¡¥ç \nåç çš„äºŒè¿›åˆ¶åºåˆ—+1ï¼Œå¾—åˆ°è¡¥ç \n\n\näºŒè¿›åˆ¶è¦æ€ä¹ˆå†™å‡ºæ¥å‘¢ï¼Ÿä¸‹é¢ä»¥15ä¸ºä¾‹ï¼ˆå‰é¢çœç•¥äº†24ä½ï¼‰\næ¯ä¸€ä¸ª1éƒ½æ˜¯2çš„æƒé‡\n\nè¿™å°±æ˜¯äºŒè¿›åˆ¶å’Œåè¿›åˆ¶è½¬æ¢çš„æ–¹å¼\nè€Œ15ä½œä¸ºæ­£æ•°ï¼ŒåŸåè¡¥ç éƒ½æ˜¯è¿™ä¸ªäºŒè¿›åˆ¶æ•°\n\n00000000 00000000 00000000 00001111\næ­£æ•°çš„åŸåè¡¥ç ç›¸åŒ\n\n\nä»€ä¹ˆæ˜¯ç¬¦å·ä½ï¼Ÿæ¯ä¸€ä¸ªæ•´å‹éƒ½æœ‰4ä¸ªå­—èŠ‚ï¼Œç”±32ä¸ªbitä½ç»„æˆ\nå…¶ä¸­åŸç çš„ç¬¬ä¸€ä½ï¼Œå°±æ˜¯è¯¥äºŒè¿›åˆ¶çš„ç¬¦å·ä½\næ­£æ•°ä¸º0ï¼Œè´Ÿæ•°ä¸º1\n\næœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œåé¢çš„æ˜¯æœ‰æ•ˆä½\n\nå†ä¸¾ä¸ª-15çš„ä¾‹å­\n\n\n\n10000000 00000000 00000000 00001111\nåŸç \n\n\n\n11111111 11111111 11111111 11110000\nåç \n\n\n11111111 11111111 11111111 11110001\nè¡¥ç \n\n\nä¸ºäº†è¿›ä¸€æ­¥äº†è§£æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ï¼Œæˆ‘ä»¬å°†15çš„&#x3D;&#x3D;è¡¥ç &#x3D;&#x3D;è½¬åŒ–ä¸ºåå…­è¿›åˆ¶\næ¯4ä¸ªäºŒè¿›åˆ¶æ¯”ç‰¹ä½å¯¹åº”ä¸€ä¸ªåå…­è¿›åˆ¶æ•°ï¼Œè½¬æ¢ç»“æœå¦‚ä¸‹\n\n\n\n00000000\n00000000\n00000000\n00001111\n\n\n\n00\n00\n00\n0F\n\n\n\nå¯å½“æˆ‘ä»¬åœ¨VSç¼–è¯‘å™¨-ç›‘è§†-å†…å­˜çª—å£é‡Œé¢æŸ¥çœ‹15æ•°æ®çš„æ—¶å€™\nå±•ç¤ºçš„æ˜¯ä»¥ä¸‹çš„16è¿›åˆ¶å½¢å¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œå†…å­˜ä¸­å­˜å‚¨çš„åå…­è¿›åˆ¶ï¼Œå’Œæˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„æ˜¯&#x3D;&#x3D;åç€çš„&#x3D;&#x3D;\nè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¤§å°ç«¯é—®é¢˜é«˜ä½ä½ä½æ¥è‡ªäºäººç±»ä»å·¦åˆ°å³çš„é˜…è¯»ä¹ æƒ¯ã€‚æ‰€ä»¥ä¸€ä¸²äºŒè¿›åˆ¶æ•°ï¼Œå·¦ä¾§ä¸ºé«˜ä½ï¼Œå³ä¾§ä¸ºä½ä½\nå¤§ç«¯å­—èŠ‚åºå­˜å‚¨ï¼š\nâ€‹å½“ä¸€ä¸ªæ•°æ®çš„ä½å­—èŠ‚çš„æ•°æ®å­˜æ”¾åœ¨é«˜åœ°å€å¤„ï¼Œé«˜å­—èŠ‚åºçš„å†…å®¹æ”¾åœ¨äº†ä½åœ°å€å¤„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼å°±æ˜¯å¤§ç«¯å­—èŠ‚åºå­˜å‚¨\nå°ç«¯å­—èŠ‚åºå­˜å‚¨ï¼š\nâ€‹å½“ä¸€ä¸ªæ•°æ®çš„ä½å­—èŠ‚æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€å¤„ï¼Œé«˜å­—èŠ‚åºçš„å†…å®¹æ”¾åœ¨äº†é«˜åœ°å€å¤„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼å°±æ˜¯å°ç«¯å­—èŠ‚åºå­˜å‚¨\n\nç®€ç§°ï¼šå°åŒå¤§å¼‚\n\nè€Œæˆ‘ä»¬å›¾ä¸­VSå†…å­˜çª—å£æ˜¾ç¤ºçš„è¿™ç§â€œåç€æ”¾â€çš„æ–¹å¼ï¼Œæ˜¯å› ä¸ºï¼š\n\nVSç¼–è¯‘å™¨ä¸‹ï¼Œå†…å­˜çª—å£æ˜¾ç¤ºçš„æ˜¯å·¦ä½å³é«˜\näºŒè¿›åˆ¶ç æ˜¯é«˜00000000 00000000 00000000 00001111ä½\n\næ‰€ä»¥VSç¼–è¯‘å™¨æ˜¯å°ç«¯å­˜å‚¨çš„\n\nè€Œå¦‚æœæ˜¯ä»¥ä½00 00 00 0fé«˜çš„æ–¹å¼æ”¾å…¥å†…å­˜ï¼Œåˆ™æ˜¯å¤§ç«¯å­—èŠ‚åºå­˜å‚¨\n\nè´Ÿæ•°ç¤ºä¾‹\nint b=-10ï¼›\n\n\n\n\nåŸç 10000000\n00000000\n00000000\n00001010\n\n\n\nåç 11111111\n11111111\n11111111\n1110101\n\n\nè¡¥ç 11111111\n11111111\n11111111\n11110110\n\n\nf    f\nf    f\nf    f\nf    6\n\n\n\näº†è§£äº†å¤§å°ç«¯çš„æœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°\nåˆ¤æ–­å½“å‰ç¼–è¯‘å™¨æ˜¯å¤§ç«¯è¿˜æ˜¯å°ç«¯\n#include &lt;stdio.h&gt;int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\tif(1==*p)\t\treturn 1;\telse\t\treturn 0;\t\t&#125;int main()&#123;\tint b=check_sys(); \tif(1==b)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);    \treturn 0; &#125; \n\nè¿™ä¸²ä»£ç çš„è‡ªå®šä¹‰å‡½æ•°éƒ¨åˆ†å¯ä»¥è¿›è¡Œä¼˜åŒ–\n\nå› ä¸º*p&#x3D;1æ—¶è¿”å›1\nå…¶ä»–æƒ…å†µè¿”å›0\næ‰€ä»¥å¯ä»¥é€‰æ‹©ç›´æ¥è¿”å›*p\n\n//ä»£ç ä¼˜åŒ–2 int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\treturn *p;\t&#125;\n\nè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ(char*)&amp;aç›´æ¥è¿›è¡Œè§£å¼•ç”¨å¹¶è¿”å›ä»–çš„å€¼\nè¿™æ ·å°±èƒ½è·³è¿‡ä¸­é—´å˜é‡p\n//ä»£ç ä¼˜åŒ–3int check_sys()&#123;\tint a=1;\treturn *(char*)&amp;a;\t&#125;\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼š\nä¸èƒ½ç›´æ¥å¯¹aè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè¿™ç§æ–¹å¼æ˜¯é”™çš„\nå¤§å°ç«¯æ˜¯æŠŠæ•°æ®æ”¾åœ¨å†…å­˜ä¹‹åæ‰æœ‰çš„ç°è±¡\n\nå¤§å°ç«¯è®²çš„æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„é¡ºåº\ncharç±»å‹åªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼Œæ²¡æœ‰å¤§å°ç«¯é—®é¢˜\n\n\nä¸ºä»€ä¹ˆæ•´å‹åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯è¡¥ç å‘¢ï¼Ÿ\nåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ•°å€¼ä¸€èˆ¬ç”¨è¡¥ç æ¥è¡¨ç¤ºå’Œå­˜å‚¨ï¼ŒåŸå› åœ¨äºï¼Œè¯•ç”¨è¡¥ç ï¼Œå¯ä»¥å°†ç¬¦å·ä½å’Œæ•°å€¼åŸŸç»Ÿä¸€å¤„ç†ï¼›\nåŒæ—¶ï¼ŒåŠ æ³•å’Œå‡æ³•ä¹Ÿå¯ä»¥ç»Ÿä¸€å¤„ç†(CPUåªæœ‰åŠ æ³•å™¨)\næ­¤å¤–ï¼Œè¡¥ç ä¸åç ç›¸äº’è½¬æ¢ï¼Œå…¶è¿ç®—è¿‡ç¨‹æ˜¯ç›¸åŒçš„ï¼Œä¸éœ€è¦é¢å¤–çš„ç¡¬ä»¶ç”µè·¯ã€‚\n\nè®¡ç®—æœºä¸­åªæœ‰åŠ æ³•å™¨ï¼Œå‡æ³•ç”¨åŠ æ³•æ¥æ¨¡æ‹Ÿ\n1-1â†’1+(-1)\nå¦‚æœç”¨åŸç çš„è®¡ç®—ï¼š\n\n\n\n00000000 00000000 0000000 00000001\n+\n\n\n\n10000000 00000000 0000000 00000001\n&#x3D;\n\n\n10000000 00000000 0000000 00000010\n-2 é”™è¯¯\n\n\nè¡¥ç ï¼š\n\n\n\n00000000 00000000 0000000 00000001\n1åŸ\n\n\n\n10000000 00000000 0000000 00000001\n-1åŸ\n\n\nå®ƒä»¬çš„è¡¥ç \n\n\n\n00000000 00000000 00000000 00000001   +\n1çš„è¡¥ç \n\n\n\n11111111 11111111 1111111 11111111   &#x3D;\n-1çš„è¡¥ç \n\n\n00000000 00000000 0000000 00000000\nç»“æœä¸º0\n\n\n å…¶ä¸­ç¬¬ä¸€ä¸ª1ä¸ºç¬¦å·ä½\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œæ•´å‹åœ¨å†…å­˜ä¸­å­˜å‚¨çš„åŸºæœ¬çŸ¥è¯†å°±å·²ç»è®²å®Œå•¦\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ä¸è¦åå•¬æ‰‹é‡Œçš„èµğŸ‘ï¼\nèƒ½ç•™ä¸‹ä¸ªè¯„è®ºå°±æ›´å¥½äº†\nè¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼ï¼ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘æ•´å‹æå‡å’Œç®—æœ¯è½¬æ¢","url":"/2021/11/17/note_c/29%E6%95%B4%E5%9E%8B%E6%8F%90%E5%8D%87%E5%92%8C%E7%AE%97%E6%9C%AF%E8%BD%AC%E6%8D%A2/","content":"[toc]\næ•´å‹æå‡è¦æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯æ•´å‹æå‡ï¼Œé‚£å°±è¦ä»è¡¨è¾¾å¼æ±‚å€¼è¯´èµ·\nè¡¨è¾¾å¼æ±‚å€¼\nè¡¨ è¾¾ å¼ æ±‚ å€¼ çš„ é¡º åº ä¸€ éƒ¨ åˆ† æ˜¯ ç”± æ“ ä½œ ç¬¦ çš„ ä¼˜ å…ˆ çº§ å’Œ ç»“ åˆ æ€§ å†³ å®š\nåŒ æ ·ï¼Œæœ‰ äº› è¡¨ è¾¾ å¼ çš„ æ“ ä½œ æ•° åœ¨ æ±‚ å€¼ çš„ è¿‡ ç¨‹ ä¸­ å¯ èƒ½ éœ€ è¦ è½¬ æ¢ ä¸º å…¶ ä»– ç±» å‹ \n\nä»€ä¹ˆæ˜¯è¡¨è¾¾å¼ï¼Ÿ ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­\nint main()&#123;\tint a=3;\tint b=5;\tint c = a + b * 7;\t//cçš„å¼å­å³ä¸ºè¡¨è¾¾å¼\treturn 0;&#125;\n\nè€ŒCçš„æ•´ä¸ªå¼å­å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æ±‚å€¼\nåœ¨è¿™ä¹‹ä¸­ï¼Œå‚ä¸è®¡ç®—çš„ä¸¤ä¸ªå˜é‡ä»¥åŠç»“æœå˜é‡éƒ½æ˜¯intç±»å‹ï¼Œå¹¶ä¸éœ€è¦è¿›è¡Œæ•´å‹æå‡\nåœ¨æˆ‘ä»¬æ—¥å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ç»å¸¸ä¼šæœ‰éšå¼ç±»å‹è½¬æ¢\n\néšå¼ç±»å‹è½¬æ¢\nCçš„æ•´å‹ç®—æœ¯è¿ç®—æ€»æ˜¯è‡³å°‘ä»¥ç¼ºçœæ•´å‹ç±»å‹çš„ç²¾åº¦æ¥è¿›è¡Œçš„\nä¸ºäº†è·å¾—è¿™ä¸ªç²¾åº¦ï¼Œè¡¨è¾¾å¼ä¸­çš„å­—ç¬¦å’ŒçŸ­æ•´å‹æ“ä½œæ•°åœ¨ä½¿ç”¨ä¹‹å‰è¢«è½¬åŒ–ä¸ºæ™®é€šæ•´å‹ï¼Œè¿™ç§è½¬æ¢ç§°ä¸ºæ•´å‹æå‡\n\nfloat f =3.14int num =f;\n\nåœ¨ä¸Šé¢è¿™ä¸ªä»£ç ä¸­å°±æœ‰éšå¼ç±»å‹è½¬æ¢ï¼Œç”±floatå‹è½¬æ¢ä¸ºintå‹\nä½†æ˜¯ä¼šæœ‰ç²¾åº¦çš„ä¸¢å¤±\n\næ­¤æ—¶numä¸º3\n\n\næˆ‘ä»¬çŸ¥é“ï¼Œä¸åŒæ•°æ®ç±»å‹çš„æ•°æ®å¤§å°å¦‚ä¸‹\næ•°æ®ç±»å‹åŠå¤§å°\n\n\nchar\nå­—ç¬¦æ•°æ®ç±»å‹\n4byte\n\n\n\nshort\nçŸ­æ•´å‹\n2byte\n\n\nint\næ•´å‹\n4byte\n\n\nlong\né•¿æ•´å‹\n4(32), 8(64)\n\n\nlong long\né•¿é•¿æ•´å‹\n8byte\n\n\nfloat\nå•ç²¾åº¦æµ®ç‚¹å‹ï¼ˆå®å‹ï¼‰\n4byte\n\n\ndouble\nåŒç²¾åº¦æµ®ç‚¹å‹ï¼ˆå®å‹ï¼‰\n8byte\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œshortç±»å‹å’Œcharç±»å‹çš„å­—èŠ‚æ•°éƒ½æ˜¯å°äºintç±»å‹çš„\nå½“æˆ‘ä»¬å°†ä¸€ä¸ªintç±»å‹çš„æ•°æ®å­˜æ”¾åˆ°charä¸­æ—¶ï¼Œä¼šå‘ç”Ÿæˆªæ–­\næˆªæ–­&amp;æå‡\næŠŠå››ä¸ªå­—èŠ‚æ”¾åœ¨1ä¸ªå­—èŠ‚çš„å†…å®¹ä¸­ï¼Œæˆªæ–­ï¼Œåªä¿ç•™ä¸€ä¸ªå­—èŠ‚\næŠŠæ•°å­—5æ”¾å…¥charç±»å‹ä¸­ï¼Œ5çš„4ä¸ªå­—èŠ‚çš„å†…å®¹ä¼šè¢«æˆªæ–­\n\nç¤ºä¾‹\nchar a = 3;   //00000000000000000000000000000011 ä¸º3çš„äºŒè¿›åˆ¶   //00000011 -a\n\nåœ¨charç±»å‹aä¸­ï¼Œåªå­˜æ”¾äº†3çš„å8ä½(1ä¸ªå­—èŠ‚)çš„å†…å®¹\nè¿™å°±æ˜¯æˆªæ–­çš„è¡¨ç°å½¢å¼\n\nåœ¨charç±»å‹æ•°æ®çš„è¡¨è¾¾å¼æ±‚å€¼ä¸­ï¼Œå°±ä¼šå‘ç”Ÿæ•´å‹æå‡\nè§„åˆ™å¦‚ä¸‹ï¼š\n\næŠŠæœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡ï¼Œåœ¨aå’Œbçš„8ä½ç å‰åŠ 24ä¸ª0æˆ–1\n\nä»£ç ç¤ºä¾‹1#include &lt;stdio.h&gt;int main()&#123;    char a = 3;    //00000000000000000000000000000011 ä¸º3çš„äºŒè¿›åˆ¶    //00000011 -a    char b = 127;    //00000000000000000000000001111111 ä¸º127çš„äºŒè¿›åˆ¶    //01111111 -b    char c = a + b;    //æŠŠæœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡    //åœ¨aå’Œbçš„8ä½ç å‰åŠ 24ä¸ª0    //00000000000000000000000000000011    //00000000000000000000000001111111    //00000000000000000000000010000010    //10000010 ä¸ºchar c    //11111111111111111111111110000010  -è¡¥ç     //11111111111111111111111110000001  -åç     //10000000000000000000000001111110  -åŸç     // -126    //å‘ç°aå’Œbéƒ½æ˜¯charç±»å‹çš„ï¼Œéƒ½æ²¡æœ‰è¾¾åˆ°ä¸€ä¸ªintçš„å¤§å°    //è¿™é‡Œå°±ä¼šå‘ç”Ÿæ•´å‹æå‡    printf(&quot;%d\\n&quot;, c);//%dæ˜¯æœ‰ç¬¦å·æ•°ï¼Œæ‰“å°åŸç     return 0;&#125;\n\nç¼–è¯‘å™¨ä¸­ï¼Œè´Ÿæ•°æ˜¯ä»¥è¡¥ç çš„å½¢å¼å­˜æ”¾çš„\nä½†åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦å…ˆè½¬æ¢æˆåŸç å†è®¡ç®—å…¶æ•°å€¼\nä»£ç ç¤ºä¾‹2å†æ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„ç¤ºä¾‹\nint main()&#123;\tchar a = 0xb6;\tshort b = 0xb600;\tint c = 0xb6000000;\t\tif(a==0xb6)\t\tprintf(&quot;a&quot;);\tif(b==0xb600)\t\tprintf(&quot;b&quot;);\tif(c==0xb6000000)\t\tprintf(&quot;c&quot;);        return 0;&#125;\n\nçŒœçŒœæ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ\næ˜¯è¿™ä¸ªå—ï¼Ÿ\nabc\n\né”™ï¼\n\nè¿è¡Œåï¼Œæˆ‘ä»¬ä¼šå‘ç°ç¼–è¯‘å™¨åªæ‰“å°äº†cè¿™ä¸ªå­—ç¬¦\n\nå› ä¸ºifåªä¼šæ¯”è¾ƒæ•´å‹\nè€Œcharå’Œshortç±»å‹éƒ½ä¸è¶³4ä¸ªå­—èŠ‚ï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™éœ€è¦è¿›è¡Œæ•´å‹æå‡\næå‡ä¹‹åçš„ç»“æœä¸åŸæ•°æ®ä¸åŒ\n\nè€Œint cæœ¬èº«å°±æ˜¯æ•´å‹ï¼Œæ— é¡»è¿›è¡Œæ•´å‹æå‡\nint c = 0xb6000000;\n\næ‰€ä»¥ä»£ç åªæ‰“å°äº†å­—ç¬¦c\n\nä»£ç ç¤ºä¾‹3å†æ¥çœ‹ä¸‹é¢çš„è¿™ä¸ªä»£ç ï¼Œæ‰“å°çš„ç»“æœæ˜¯å‡ å‘¢ï¼Ÿ\n#include &lt;stdio.h&gt;int main() &#123;    int a = 3;   int b = 5;    short s = 5;   printf(&quot;%u\\n&quot;, sizeof(s = a + 3));        return 0;&#125;\n\nç»“æœä¸º2\nå› ä¸ºæœ€åçš„sæ˜¯çŸ­æ•´å‹ï¼Œæ¨æ–­å‡ºæ¥çš„é•¿åº¦ä¸º2\n\nä»£ç ç¤ºä¾‹4 -sizeofint main()&#123;\tchar c=1;\tprintf(&quot;%u\\n&quot;,sizeof(c));//1    printf(&quot;%u\\n&quot;,sizeof(+c));//4    printf(&quot;%u\\n&quot;,sizeof(-c));//4    printf(&quot;%u\\n&quot;,sizeof(!c));//4        return 0;&#125;\n\nå½“+cå’Œ-cå‚ä¸è®¡ç®—çš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡Œæ•´å‹æå‡\n\nè¿™é‡Œæ¶‰åŠåˆ°äº†å¦å¤–ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œsizeofæ‹¬å·ä¸­è¡¨è¾¾å¼çš„é—®é¢˜\nä¸‹ç¯‡åšå®¢ä¼šè¯¦ç»†ä»‹ç»!\n\n\nç®—æœ¯è½¬æ¢è¯´å®Œæ•´å‹æå‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å’Œéšå¼ç±»å‹è½¬æ¢å¾ˆåƒçš„ç®—æœ¯è½¬æ¢\n\nå¦‚æœæŸä¸ªæ“ä½œç¬¦çš„å„ä¸ªæ“ä½œæ•°å±äºä¸åŒçš„ç±»å‹ï¼Œé‚£ä¹ˆé™¤éå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ“ä½œæ•°çš„ç±»å‹ï¼Œå¦åˆ™æ“ä½œå°±æ— æ³•è¿›è¡Œã€‚\n\nä¸‹é¢çš„å±‚æ¬¡ä½“ç³»ç§°ä¸ºå¯»å¸¸ç®—æœ¯è½¬æ¢\n\n\n\nlong double\n\n\n\ndouble\n\n\nfloat\n\n\nunsigned long int\n\n\nlong int\n\n\nunsigned int\n\n\nint\n\n\nå…·ä½“æ˜¯æ€ä¹ˆè½¬æ¢çš„å‘¢?\nåœ¨è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªæ“ä½œæ•°çš„ç±»å‹åœ¨ä¸Šè¡¨ä¸­æ’åè¾ƒä½ï¼Œé‚£ä¹ˆé¦–å…ˆè¦è½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ“ä½œæ•°çš„ç±»å‹åï¼Œå†æ‰§è¡Œè¿ç®—ã€‚\nç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»ä¸‹å¾€ä¸Šè½¬æ¢\n\næ³¨æ„ï¼šç®—æœ¯è½¬æ¢è¦åˆç†ï¼Œä¸ç„¶ä¼šæœ‰æ½œåœ¨çš„é—®é¢˜\n\n\nä»£ç ç¤ºä¾‹1ä¸‹é¢çš„æ˜¯ä¸€ä¸ªç®€å•ç®—æœ¯è½¬æ¢çš„ç¤ºä¾‹\nåœ¨intå‹å’Œfloatç±»å‹ä¸€èµ·è®¡ç®—çš„æ—¶å€™\nintç±»å‹ä¼šè½¬æ¢ä¸ºfloatç±»å‹è¿›è¡Œè®¡ç®—\n#include&lt;stdio.h&gt; int main()&#123;\tint a=3;\tfloat f =5.5;\tfloat ra =a+f;\t//ç®—æœ¯è½¬æ¢ï¼Œint--&gt;float \t\treturn 0;&#125;\n\n\nè¡¨è¾¾å¼å±æ€§è¿™é‡Œå¯ä»¥å¼•å‡ºå¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè¡¨è¾¾å¼çš„å±æ€§\nè¡¨è¾¾å¼çš„ä¸¤ä¸ªå±æ€§ï¼š\n\nå€¼å±æ€§\nç±»å‹å±æ€§\n\nå¦‚ä»¥ä¸‹ä»£ç ä¸­\n\na+bçš„ç»“æœ30å°±æ˜¯è¿™ä¸ªè¡¨è¾¾å¼çš„æŒ‡å±æ€§\n\nç±»å‹å±æ€§æ˜¯int\n\n\nint main()&#123;\tint a =10;\tint b=20;\ta+b;//è¡¨è¾¾å¼2ä¸ªå±æ€§ï¼šå€¼å±æ€§ï¼Œç±»å‹å±æ€§\t//30 å€¼å±æ€§ \t//int ç±»å‹å±æ€§ \treturn 0;&#125;\n\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸäº†\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å§ï¼\nè¿™å¯¹æˆ‘éå¸¸é‡è¦ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€VSã€‘å¦‚ä½•è§£å†³VSç¼–è¯‘å™¨scanfæŠ¥é”™é—®é¢˜","url":"/2021/10/25/note_c/2%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3scanf%E6%8A%A5%E9%94%99%E9%97%AE%E9%A2%98%EF%BC%9F10.25/","content":"[toc]\né—®é¢˜æ¥æºå½“æˆ‘ä»¬ä½¿ç”¨vsç¼–è¯‘å™¨ç¼–è¯‘cè¯­è¨€ä»£ç ï¼Œå¹¶éœ€è¦ç”¨åˆ°ä¸€äº›éå¸¸å¸¸ç”¨çš„åº“å‡½æ•°çš„æ—¶å€™ï¼ˆå¦‚scanfï¼‰\nvsç¼–è¯‘å™¨é€šå¸¸ä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯\n\n\næœ‰çš„æ—¶å€™å³ä¾¿æŠ¥é”™äº†ï¼Œç¨‹åºä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ\n\nä½†æœ‰çš„æ—¶å€™å°±ä¼šåŒå›¾ä¸­ä¸€æ ·ï¼Œç¨‹åºæ— æ³•è¿è¡Œ\n\n\nå‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯vsç¼–è¯‘å™¨è®¤ä¸ºè¿™äº›åº“å‡½æ•°æ˜¯â€œä¸å®‰å…¨çš„â€ï¼ˆæˆ‘å¯çœŸè°¢è°¢ä½ ï¼Œæ‹…duoå¿ƒguané‚£xianä¹ˆshiå¤šï¼Œå¾®è½¯ï¼‰\nè§£å†³æ–¹æ³•è§£å†³è¿™ä¸ªæŠ¥é”™é—®é¢˜çš„æ–¹æ³•æœ‰ä¸¤ç§\n1.ä½¿ç”¨_Sä¸‹æ ‡å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº“å‡½æ•°åé¢åŠ ä¸€ä¸ª_sï¼Œè¿™æ—¶å€™vså°±ä¼šæŠŠå®ƒè®¤ä¸ºæ˜¯â€œå®‰å…¨çš„å‡½æ•°â€ï¼Œç¨‹åºå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†\n\næ–¹æ³•ä¸€çš„è‡´å‘½ç¼ºç‚¹ä½†æ˜¯è¿™ä¹ˆåšæœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¼Šç«¯â€”â€”è¯¥ä»£ç åªèƒ½åœ¨vsç¼–è¯‘å™¨é‡Œè¿è¡Œ\nå¦‚å›¾ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™ä¸€ä¸²å¸¦_Sçš„ä»£ç å¤åˆ¶åˆ°**devc++**è¿™æ¬¾ç¼–è¯‘å™¨é‡Œé¢\ndevc++ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œæ— æ³•è¿è¡Œè¿™ä¸²ä»£ç \nåŒæ ·çš„ï¼Œå¦‚æœä½ éœ€è¦åœ¨moocã€ç‰›å®¢ç½‘æˆ–è€…å…¶ä»–åˆ·é¢˜ç½‘ç«™ä¸Šå¡«å†™ä»£ç çš„æ—¶å€™\nç³»ç»Ÿä¹Ÿæ— æ³•è¿è¡Œè¿™ç§å¸¦äº†_sçš„cè¯­è¨€ä»£ç \nè¿™æ—¶å€™ä»£ç çš„â€œå¯ç§»æ¤æ€§â€ ï¼ˆå³é€šç”¨æ€§ï¼‰å°±å˜å·®äº†ï¼\n\nè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„è§£å†³æ–¹æ³•2äº†\n2.ä½¿ç”¨é˜²æŠ¥é”™è¯­å¥åªéœ€è¦åœ¨è¿™ä¸ªæºæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ è¿™æ ·ä¸€ä¸²ä»£ç \n#define _CRT_SECURE_NO_WARNINGS 1\n\nè¿™ä¸²ä»£ç çš„ä½œç”¨å°±æ˜¯å±è”½æ‰vsç¼–è¯‘å™¨å¯¹å‡½æ•°å±é™©æ€§çš„æ’æŸ¥æŠ¥é”™\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ä»£ç å°±èƒ½æ­£å¸¸è¿è¡Œäº†\n\nè¿™æ ·æ“ä½œï¼Œå³ä¾¿æ˜¯å°†è¿™ä¸€è¡Œé˜²æŠ¥é”™ä»£ç ç§»æ¤åˆ°å¦å¤–ä¸€ä¸ªç¼–è¯‘å™¨é‡Œï¼Œè¿™ä¸²ä»£ç ä»ç„¶èƒ½æ­£å¸¸è¿è¡Œè€Œä¸”æœ‰çš„æ—¶å€™å³ä¾¿åŠ ä¸Š_sï¼Œè¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›å’Œscanfæ— å…³çš„å¥‡æ€ªæŠ¥é”™ä½¿ç”¨æ–¹æ³•äºŒå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶è¿˜æ˜¯ä½¿ç”¨æ–¹æ³•äºŒå•¦ï¼\n\næ–¹æ³•äºŒçš„ç¼ºç‚¹ï¼Ÿä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£æˆ‘å²‚ä¸æ˜¯æ¯æ¬¡å†™ä»£ç ä¹‹å‰éƒ½éœ€è¦æ‰“ä¸Šè¿™ä¹ˆä¸€ä¸ªdefineè¯­å¥ï¼Œé‚£æ ·ä¹Ÿå¤ªéº»çƒ¦äº†å§ï¼\nå†è¯´äº†ï¼Œæˆ‘ä¹ŸèƒŒä¸ä¸‹æ¥å•Šï¼\nåˆ«æ€¥ï¼Œä¸‹é¢æˆ‘å°±ä¼šå‘Šè¯‰ä½ æ€ä¹ˆè®©vsç¼–è¯‘å™¨æ¯æ¬¡åˆ›å»ºæºæ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨å¸¦ä¸Šè¿™ä¹ˆä¸€ä¸²ä»£ç \nå¦‚ä½•åœ¨vsç¼–è¯‘å™¨é‡ŒåŠ ä¸Šé»˜è®¤è¯­å¥è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¦å¤–ä¸€æ¬¾åŒæ ·å¾ˆç»å…¸çš„è½¯ä»¶â€”â€”Notepad++  \nå¦‚æœä½ è¿˜æ²¡å®‰è£…è¿™æ¬¾è½¯ä»¶ï¼Œè¿™é‡Œæ˜¯ä¸‹è½½é“¾æ¥â€”â€”&gt; [ç‚¹æˆ‘]\n\nå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¸Šè§’çš„ æ–‡ä»¶\n\næ‰“å¼€å¦‚ä¸‹è·¯å¾„é‡Œï¼Œç®­å¤´æ‰€æŒ‡çš„new++fileæ–‡ä»¶\n\nvsç¼–è¯‘å™¨é»˜è®¤å®‰è£…è·¯å¾„æ˜¯cç›˜\nå¦‚æœä½ çš„vsç¼–è¯‘å™¨ä¸åœ¨cç›˜ï¼Œå¯ä»¥é€šè¿‡å³é”®æ¡Œé¢vsç¼–è¯‘å™¨çš„å¿«æ·æ–¹å¼ï¼Œæ‰“å¼€æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰¾åˆ°ä½ vsç¼–è¯‘å™¨çš„å®‰è£…è·¯å¾„\n\n\næ‰“å¼€ä»¥åæ˜¯ç©ºç™½çš„\næˆ‘ä»¬åªéœ€è¦è®²è¿™è¡Œdefineè¯­å¥åŠ å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œctrl+sä¿å­˜\n\nç”±äºvsç¼–è¯‘å™¨å¤„äºcç›˜ï¼Œä¿®æ”¹è¿™ä¸ªæ–‡ä»¶éœ€è¦ç”³è¯·ç®¡ç†å‘˜æƒé™ï¼Œç‚¹å‡»åŒæ„å³å¯ï¼\n\n#define _CRT_SECURE_NO_WARNINGS 1#include &lt;stdio.h&gt;\n\n\nè¿™æ—¶å€™ä½ åˆ›å»ºçš„æ–°çš„æºæ–‡ä»¶ï¼Œå°±ä¼šé»˜è®¤å¸¦ä¸Šè¿™ä¸²ä»£ç å•¦ï¼\nç”±äº&lt;stdio.h&gt;è¿™ä¸ªå¤´æ–‡ä»¶å®åœ¨æ˜¯å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä¹ŸåŠ å…¥äº†è¿™ä¸ªæ–‡ä»¶é‡Œã€‚\nå¦‚æœä½ æ„¿æ„ï¼Œä¹Ÿå¯ä»¥æŠŠint main()åŠ å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œæ–¹æ³•åŒä¸Š\n\nè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡åˆ›å»ºæ–°çš„æºæ–‡ä»¶çš„æ—¶å€™è‡ªå·±æ‰‹æ‰“å•¦ï¼\nä¸€åŠ³æ°¸é€¸ï¼\n\nç»“è¯­å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹ä¸ªèµï¼\nä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘unsignedæ— ç¬¦å·ç±»å‹è¿ç”¨çš„ä¸¤ä¸ªå®ä¾‹","url":"/2021/12/13/note_c/30%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0%E7%9A%84%E5%A4%84%E7%90%86/","content":"@[toc]\nå‰æ’æé†’ğŸ˜‚æœ¬ç¯‡åšå®¢æ˜¯å¯¹ä¸‹ä¸€ç¯‡åšå®¢ã€Šcharç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜æ”¾ã€‹çš„æ‹“å±•\nå¹¶éå¯¹unsignedç±»å‹çš„è¯¦è§£ï¼\n\nç¤ºä¾‹1#include &lt;stdio.h&gt;int main()&#123;\tint i=-20;\tunsigned int j=10;\t\tprintf(&quot;%d\\n&quot;,i+j);\treturn 0; &#125; \n\nå½“æœ‰ç¬¦å·ç±»å‹å’Œæ— ç¬¦å·ç±»å‹ç›¸åŠ çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ\n10000000 00000000 00000000 00010100  -20çš„åŸç 11111111 11111111 11111111 11101011   åç 11111111 11111111 11111111 11101100   è¡¥ç \n\n00000000 00000000 00000000 00001010   10çš„è¡¥ç \n\n-20çš„è¡¥ç å’Œ10çš„è¡¥ç  ç›¸åŠ \n11111111 11111111 11111111 11110110 å¾—åˆ°çš„è¡¥ç 11111111 11111111 11111111 11110101 åç 10000000 00000000 00000000 00001010 åŸç  -10\n\nå¾—åˆ°çš„ç»“æœä¸º-10\n\nå½“æˆ‘ä»¬æŠŠjæ”¹ä¸º-10çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¾ç„¶èƒ½ç»™å‡ºæ­£ç¡®çš„ç­”æ¡ˆ-30\nè¿™æ˜¯å› ä¸ºåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å…ˆæŒ‰ç…§è¡¥ç çš„å½¢å¼è¿›è¡Œè¿ç®—ï¼Œæœ€å%dæ‰“å°ï¼Œæ ¼å¼åŒ–ä¸ºæœ‰ç¬¦å·æ•´æ•°\n\næ•°æ®çš„å­˜å‚¨å’Œç±»å‹æ— å…³ï¼Œåªæœ‰è¯»å–çš„æ—¶å€™æœ‰åŒºåˆ«\n\n\nç¤ºä¾‹2 ç¬¬äºŒä¸ªç¤ºä¾‹å¯ä»¥è®©æˆ‘ä»¬äº†è§£æ— ç¬¦å·æ•°åœ¨åº”ç”¨æ—¶å€™å­˜åœ¨çš„é™åˆ¶\n#include&lt;windows.h&gt;#include &lt;stdio.h&gt;int main()&#123;\tunsigned int i;\tfor(i=9;i&gt;=0;i--)\t&#123;\t\tprintf(&quot;%u\\n&quot;,i);\t\tSleep(1000);//æ›´å¥½çš„è§‚å¯Ÿæ•°æ®çš„æ‰“å°\t&#125;\treturn 0;&#125;\n\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯%uæ‰“å°æ— ç¬¦å·æ•°\nè€Œæ— ç¬¦å·æ•°iä¸­ä¸å¯èƒ½å‡ºç°è´Ÿæ•°ï¼Œä¹Ÿå°±æ²¡æœ‰å°äº0çš„æƒ…å†µï¼ˆiæ°¸è¿œå¤§äºç­‰äº0ï¼‰\nå½“i&#x3D;0åç»§ç»­â€“ï¼ŒäºŒè¿›åˆ¶è¡¥ç å˜æˆå¦‚ä¸‹å½¢å¼\n11111111 11111111 11111111 11111111\n\nå› ä¸ºæ˜¯æ— ç¬¦å·æ•°ï¼Œç›´æ¥å°†è¡¥ç è§†ä½œåŸç è¿›è¡Œè®¡ç®—\nå°±å¾—å‡ºäº†åœ¨çª—å£ä¸­æ‰“å°çš„éå¸¸å¤§çš„æ•°å­—\n\n\nå°ç»“æœ¬ç¯‡åšå®¢å±•ç¤ºäº†ä¸¤ç§æ— ç¬¦å·æ•°è°ƒç”¨çš„æƒ…å†µ\nä¸‹ç¯‡åšå®¢è®²è¿°charç±»å‹åœ¨æ•°æ®ä¸­çš„å­˜å‚¨çš„æ—¶å€™ä¼šç”¨åˆ°ï¼\n\næœ€è¿‘äº‹æƒ…çœŸçš„æŒºå¤šçš„ï¼Œè‹±è¯­4çº§ã€æœŸæœ«è€ƒè¯•\né«˜æ•°å’Œçº¿ä»£çœŸçš„å¤ªéš¾äº†ï¼Œä¸¤åº§å¤§å±±å‹ç€æˆ‘ğŸ˜¥\nå¸Œæœ›æœŸæœ«ä¸æŒ‚ç§‘\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæ±‚ç‚¹èµå…³æ³¨ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘charç±»å‹å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨ï¼Ÿ","url":"/2022/01/05/note_c/31%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8/","content":"@[toc]\nå¼•å­ä¸Šç¯‡åšå®¢å‘å¤§å®¶ä»‹ç»äº†intç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ã€é“¾æ¥ã€‘\næœ¬ç¯‡åšå®¢æˆ‘ä»¬ç»§ç»­å¾€åï¼Œçœ‹çœ‹æ•´å½¢å®¶æ—é‡Œçš„charç±»å‹æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å§ï¼\n\ncharç±»å‹å­—ç¬¦ç±»å‹åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§å½¢å¼\n\nunsigned char æ— ç¬¦å·\n\nsigned char æœ‰ç¬¦å·\n\n\nç”¨ä¸€ä¸ªç®€å•çš„printfæ¥çœ‹çœ‹å®ƒä»¬åœ¨æ‰“å°ä¸Šçš„åŒºåˆ«\n#include&lt;stdio.h&gt;int main()&#123;\tchar a=-1;\tsigned char b=-1;\tunsigned char c=-1;    printf(&quot;a=%d b=%d c=%d\\n&quot;,a,b,c);    \treturn 0;&#125;\n\næ‰“å°ç»“æœä¸º\na=-1 b=-1 c=255\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸¤ä¸ªç»“è®º\n\n1.åœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œcharé»˜è®¤ä¸ºsigned char\n2.unsigned charçš„å¤„ç†æ–¹å¼å’Œsignedä¸åŒ\n\næ— ç¬¦å·æ•°çš„å¤„ç†å¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„è¿™ä¸€ç¯‡åšå®¢ğŸ‘‰ã€é“¾æ¥ã€‘\n\nå­˜æ”¾å’Œæå‡ä¾‹ä¸€ï¼š-1å…ˆå†™å‡º-1çš„åŸåè¡¥ç \n10000000 00000000 00000000 00000001  -1åŸç 11111111 11111111 11111111 11111110   åç 11111111 11111111 11111111 11111111   è¡¥ç \n\nåœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ—¶å€™ï¼Œaã€bã€cå­˜æ”¾çš„éƒ½æ˜¯è¡¥ç çš„æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œå³11111111\nè€Œå½“æˆ‘ä»¬ç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿæ•´å‹æå‡\n\næ•´å‹æå‡çš„æ¦‚å¿µæˆ‘å†™è¿‡å¦å¤–ä¸€ç¯‡åšå®¢ğŸ‘‰ã€ç‚¹æˆ‘ã€‘\n\nè¿™é‡Œå°±æ˜¯æœ‰ç¬¦å·å’Œæ— ç¬¦å·å¤„ç†ä¸åŒçš„åœ°æ–¹äº†\nå› ä¸ºaã€béƒ½æ˜¯æœ‰ç¬¦å·çš„charï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šå°†æœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡\næ‰€ä»¥aã€bè¿›è¡Œæ•´å‹æå‡åçš„ç»“æœå¦‚ä¸‹\n11111111 11111111 11111111 11111111//æå‡åaã€bçš„è¡¥ç \n\nè€Œcæ˜¯æ— ç¬¦å·charç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æœ€é«˜ä½è¡¥0\n00000000 00000000 00000000 11111111//æå‡åcçš„è¡¥ç \n\næ­¤æ—¶æœ€é«˜ä½ä¸º0ï¼Œç¼–è¯‘å™¨å°†å…¶è§†ä¸ºæ­£æ•°ï¼Œæ­¤æ—¶è¡¥ç å°±æ˜¯åŸç ï¼Œæ‰“å°255\n\nç¬¦å·ä½ 0ä¸ºæ­£ï¼Œ1ä¸ºè´Ÿ\næ­£æ•°çš„åŸç ã€åç ã€è¡¥ç ç›¸åŒ\n\nä¾‹äºŒï¼š-128#include &lt;stdio.h&gt;int main()&#123;\tchar a=-128;\tprintf(&quot;%u\\n&quot;,a);\treturn 0;&#125;\n\næ‰“å°çš„ç»“æœå¹¶ä¸æ˜¯-128\n4294967168\n\n-128çš„åŸåè¡¥ç \n10000000 00000000 00000000 10000000  -128åŸç 11111111 11111111 11111111 01111111   åç 11111111 11111111 11111111 10000000   è¡¥ç \n\naä¸­å­˜æ”¾çš„æ˜¯1000 0000\næœ€é«˜ä½è§†ä¸ºç¬¦å·ä½ï¼Œæ•´å‹æå‡å\n11111111 11111111 11111111 10000000//æ–°çš„è¡¥ç \n\nä½†å› ä¸ºè¿™é‡Œæ˜¯**%uæ‰“å°ï¼Œè§†ä½œæ— ç¬¦å·æ•°**\næ­¤æ—¶åŸåè¡¥ç ä¸€è‡´ï¼Œç›´æ¥è§†ä½œåŸç è¿›è¡Œè®¡ç®—\næ‰“å°ç»“æœå³ä¸º4294967168\n\nå¦‚æœæˆ‘ä»¬è®©aç­‰äº128ï¼Œç»“æœç›¸åŒ\n\ncharå˜é‡ä¸­å­˜æ”¾æ•°å€¼çš„èŒƒå›´å…ˆæ¥çœ‹çœ‹è¿™æ ·ä¸€ä¸²ä»£ç \n#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main()&#123;\tchar a[1000];\tint i;\tfor (i = 0; i &lt; 1000; i++)\t&#123;\t\ta[i] = -1 - i;\t&#125;\tprintf(&quot;%d&quot;, strlen(a));\treturn 0;&#125;\n\nä»£ç çš„ç»“æœå¦‚ä¸‹ï¼š255\n\nåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾å®šäº†a[1000]ï¼Œaæ•°ç»„é‡Œé¢ç†åº”æœ‰1000ä¸ªå…ƒç´ \né‚£strlenå‡½æ•°æ±‚å¾—çš„ç»“æœä¸ºä½•æ˜¯255ï¼Œè€Œä¸æ˜¯1000å‘¢ï¼Ÿ\n\nå®é™…charç±»å‹ä¸­çš„æ•°æ®èŒƒå›´åˆ†ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ä¸¤ç§\n\nsigned char  1byte-8bitï¼Œå–å€¼èŒƒå›´-128~127\nunsigned char 1byte-8bitï¼Œå–å€¼èŒƒå›´0~255\n\nä»¥äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º\n\nå› ä¸ºæ— ç¬¦å·charç±»å‹ä¸­ï¼Œå…«ä½è¡¥ç è§†ä½œåŸç è¿›è¡Œè®¡ç®—\nè€Œæœ‰ç¬¦å·charç±»å‹ä¸­ï¼Œåœ¨è®¡ç®—çš„æ—¶ä¼šå°†é¦–ä½è§†ä¸ºç¬¦å·ä½\n11111111 //è¡¥ç 11111110 //åç ï¼Œè¡¥ç å‡110000001 //æºç ï¼Œè¯»å‡º-1\n\n10000001//è¡¥ç 10000000//åç 11111111//é¦–ä½ç¬¦å·ä½ä¸è¯»ï¼Œå…¶ä»–ä½è¯»å‡º-127\n\n10000000//è¡¥ç è¿™ä¸ªäºŒè¿›åˆ¶ä½ä¸èƒ½-1ï¼Œç›´æ¥è§†ä½œæºç è®¡ç®—ä¸èƒ½å¿˜è®°è¿™æ˜¯ä¸ªè´Ÿæ•°ï¼10000000//æºç è¯»å‡º128ï¼ŒåŠ ä¸Šè´Ÿå·ä¸º-128\n\nä¸‹é¢è¿™å¹…å›¾å¯ä»¥å½¢è±¡åœ°è¡¨ç¤ºå‡ºcharç±»å‹æ•°æ®èŒƒå›´\n\nchar a[1000];int i;for (i = 0; i &lt; 1000; i++)&#123;\ta[i] = -1 - i;&#125;printf(&quot;%d&quot;, strlen(a));\n\nä¸Šé¢é‚£ä¸²ä»£ç é‡Œé¢çš„forå¾ªç¯ï¼Œå®åˆ™æ˜¯ä¸€ç›´ç»™æ•°ç»„aä¸­ä»-1å¼€å§‹èµ‹å€¼åˆ°-128ï¼Œå†ä»127èµ‹å€¼åˆ°1ï¼Œ0â€¦â€¦å¦‚æ­¤å¾ªç¯èµ‹å€¼ï¼Œç›´åˆ°i&#x3D;1000è·³å‡ºå¾ªç¯ã€‚\nè€Œæˆ‘ä»¬çš„strlenå‡½æ•°åœ¨è®¡ç®—æ•°ç»„é•¿åº¦çš„æ—¶å€™ï¼Œé‡åˆ°ç¬¬ä¸€ä¸ª0å°±ä¼šåœæ­¢è®¡ç®—\nè¿™æ ·æˆ‘ä»¬å°±å¾—å‡ºäº†ç­”æ¡ˆä¸º255ï¼\nå¦‚ä½•æŸ¥è¯¢èŒƒå›´å®šä¹‰ï¼Ÿ\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¤´æ–‡ä»¶&lt;limits.h&gt;æ¥æŸ¥æ‰¾èŒƒå›´å®šä¹‰\n\nåœ¨VS2019é‡Œé¢å³é”®è¯¥å¤´æ–‡ä»¶ï¼Œç‚¹å‡»â€œè½¬åˆ°æ–‡æ¡£â€\n\nè¿™é‡Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°å„ç§æ•°æ®ç±»å‹çš„æ•°æ®èŒƒå›´\n\næˆ‘ä»¬è¿˜å¯ä»¥çœ‹çœ‹å…¶ä»–çš„æ•°æ®ç±»å‹\nä»¥æœ‰ç¬¦å·shortä¸ºä¾‹ï¼Œå®ƒçš„èŒƒå›´æ˜¯-32678åˆ°32767\n\n\n\nç»“è¯­ä»¥ä¸€ä¸²ä»£ç ç¤ºä¾‹ç»“æŸæœ¬ç¯‡åšå®¢å§ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nç‚¹ä¸ªèµå‘—ï¼Œè¿™å¯¹æˆ‘ç°å¸¸é‡è¦ï¼ï¼ğŸ˜˜\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼ˆè¯¦è§£ï¼‰","url":"/2022/01/10/note_c/32%E6%B5%AE%E7%82%B9%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8/","content":"[TOC]\nå†™åœ¨å‰é¢ï¼Œmarkdownè¯­æ³•çš„å°çŸ¥è¯†ç‚¹\nå¦‚ä½•å®ç°æ–‡å­—å˜çº¢ä¸”åŠ ä¸Šäº†åº•è‰²ï¼Ÿå¦‚hello world\nmarkdownè¯­æ³•å¦‚ä¸‹å³å¯ï¼\n`hello world`\n\nä»¥åŠé¡µå†…è·³è½¬\n&lt;span id=\"jump\"&gt;è¿™ä¸€å¥è¯æ²¡å•¥ç”¨&lt;/span&gt;[å›åˆ°å¼€å¤´](#jump)\n\n\nä¹‹å‰å­¦ä¹ å®Œäº†æ•´å½¢ã€å­—ç¬¦ç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥çœ‹çœ‹floatç±»å‹ï¼\n\næ•´æ•°ç±»å‹ğŸ‘‰ã€intã€‘\nå­—ç¬¦ç±»å‹ğŸ‘‰ã€charã€‘\n\nå¸¸è§çš„æµ®ç‚¹æ•°3.141591E10\n\næµ®ç‚¹æ•°å®¶æ—åŒ…æ‹¬floatã€doubleã€long double ç±»å‹\nè€Œæµ®ç‚¹æ•°è¡¨ç¤ºçš„èŒƒå›´æ˜¯åœ¨å¤´æ–‡ä»¶&lt;float.h&gt;é‡Œé¢å®šä¹‰çš„\néœ€è¦äº†è§£çš„æ˜¯\n\nå¦‚æœä½ æ‰“å‡º3.14ï¼Œç¼–è¯‘å™¨é»˜è®¤æ˜¯doubleç±»å‹çš„ã€‚è‹¥æƒ³è®©ä»–ä¸ºfloatç±»å‹ï¼Œåˆ™è¦åœ¨å‰é¢åŠ f\n\n\n1E10æ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œä»£è¡¨1.0Ã—10^10\n\nä»£ç å¼•ä¾‹è¿™ä¸€å¥è¯æ²¡å•¥ç”¨\nå…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸²ä»£ç \nint main(){\tint n = 9;\tfloat* pfloat = (float*)&amp;n;\tprintf(\"nçš„å€¼ä¸ºï¼š%d\\n\", n);\tprintf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\t*pfloat = 9.0;\tprintf(\"numçš„å€¼ä¸ºï¼š%d\\n\", n);\tprintf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\treturn 0;}\n\nè¿è¡Œçš„ç»“æœå¦‚ä¸‹\n\næŒ‡é’ˆpfloatä¿ç•™çš„æ˜¯å¼ºåˆ¶è½¬æ¢ä¸ºfloatç±»å‹çš„intå˜é‡n\n\nå‡†ç¡®æ¥è¯´ï¼Œæ˜¯å°†intæŒ‡é’ˆç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºäº†floatæŒ‡é’ˆç±»å‹\n\né‚£æ‰“å°çš„ç»“æœä¸åº”è¯¥æ˜¯9å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯0.000000å‘¢ï¼Ÿ\nå†æ¥çœ‹çœ‹åé¢çš„ä»£ç ï¼Œæˆ‘ä»¬è®©*pfloat=9.0ï¼Œç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œå´æ‰“å°å‡ºäº†ä¸€ä¸²ä¸çŸ¥é“æ€ä¹ˆæ¥çš„å¾ˆå¤§çš„æ•°å­—ã€‚è¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nä¸€ä¸ªæ¶‰åŠåˆ°çš„å°çŸ¥è¯†ç‚¹\nä¸ç®¡æ˜¯doubleç±»å‹ï¼Œè¿˜æ˜¯floatç±»å‹ï¼Œé»˜è®¤å°æ•°ç‚¹åéƒ½æœ‰6ä½\næˆ‘ä»¬å¯ä»¥ç”¨%.fçš„æ–¹å¼æ¥æ§åˆ¶æ‰“å°ï¼Œå¦‚%.3få°±æ˜¯åªæ‰“å°åˆ°å°æ•°ç‚¹å3ä½\n\n\nç­”æ¡ˆåªæœ‰ä¸€ä¸ªï¼šæµ®ç‚¹å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼å’Œintç±»å‹å®Œå…¨ä¸åŒï¼\næµ®ç‚¹å‹å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜æ”¾ï¼Ÿæ ¹æ®å›½é™…æ ‡å‡†IEEEï¼ˆç”µæ°”å’Œç”µå­å·¥ç¨‹åä¼šï¼‰ 754ï¼Œä»»æ„ä¸€ä¸ªäºŒè¿›åˆ¶æµ®ç‚¹æ•°Vå¯ä»¥è¡¨ç¤ºæˆä¸‹é¢çš„å½¢å¼ï¼š\n\n\n(-1)^sè¡¨ç¤ºç¬¦å·ä½ï¼Œå½“s=0ï¼ŒVä¸ºæ­£æ•°ï¼›å½“s=1ï¼ŒVä¸ºè´Ÿæ•°ã€‚\n\nMè¡¨ç¤ºæœ‰æ•ˆæ•°å­—ï¼Œå¤§äºç­‰äº1ï¼Œå°äº2ã€‚\n\n2^Eè¡¨ç¤ºæŒ‡æ•°ä½ã€‚\n\n\n\n\nåè¿›åˆ¶&amp;äºŒè¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•æˆ‘ä»¬åœ¨å°å­¦å°±å­¦åˆ°è¿‡ï¼Œ1.234Ã—10^2=123.4\nè€ŒäºŒè¿›åˆ¶ä¸­ï¼Œå…¶å®å°±æ˜¯æŠŠåº•æ•°çš„10å˜æˆäº†2ï¼Œ1.011*2^2=101.1\nè®°ä½ä»¥ä¸‹è¿™ä¸ªç»“è®ºå³å¯\n\näºŒè¿›åˆ¶ç Mä¹˜ä»¥2çš„næ¬¡æ–¹ï¼Œç›¸å½“äºå°†äºŒè¿›åˆ¶ç Mçš„å°æ•°ç‚¹å‘å³ç§»åŠ¨nä½\n\nS\\M\\Eå¦‚ä½•åˆ¤æ–­ï¼Ÿæˆ‘ä»¬ä»¥5.5ä¸ºä¾‹ï¼Œå®ƒçš„äºŒè¿›åˆ¶æ˜¯101.1\nç›¸å½“äº(-1)^0* 1.011*2^2\nå’Œä¸Šé¢çš„å…¬å¼æ¯”å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å‡ºæ¥S=0ï¼ŒM=1.011ï¼ŒE=2\n\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“floatç±»å‹å ç”¨4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè€Œdoubleç±»å‹åˆ™æ˜¯8ä¸ªå­—èŠ‚\næµ®ç‚¹ç±»å‹çš„å†…å­˜ç©ºé—´ç¤ºæ„å›¾\nfloatç±»å‹çš„S\\E\\Mè¢«åˆ†åŒºå­˜æ”¾åœ¨è¿™4ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ä¸­\nåŒç†ï¼Œdoubleç±»å‹çš„S\\E\\Mä¹Ÿæ˜¯åˆ†åŒºå­˜æ”¾ï¼Œå®ƒçš„æœ‰æ•ˆæ•°å­—é•¿äºfloatç±»å‹\nå¯¹äº64ä½çš„æµ®ç‚¹æ•°ï¼Œæœ€é«˜çš„1ä½æ˜¯ç¬¦å·ä½Sï¼Œæ¥ç€çš„11ä½æ˜¯æŒ‡æ•°Eï¼Œå‰©ä¸‹çš„52ä½ä¸ºæœ‰æ•ˆæ•°å­—M\n\nIEEE754å¯¹Mçš„ç‰¹æ®Šè§„å®šå› ä¸ºæ˜¯äºŒè¿›åˆ¶æ•°ï¼Œ1â‰¤M&lt;2ï¼Œè€ŒMå¯ä»¥å†™æˆ 1.xxxxxx çš„å½¢å¼ï¼Œå…¶ä¸­xxxxxxæ˜¯å°æ•°éƒ¨åˆ†\nIEEE 754è§„å®šï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ä¿å­˜Mæ—¶ï¼Œé»˜è®¤è¿™ä¸ªæ•°çš„ç¬¬ä¸€ä½æ€»æ˜¯1ï¼Œå› æ­¤å¯ä»¥è¢«èˆå»ï¼Œåªä¿å­˜åé¢çš„\nxxxxxxéƒ¨åˆ†\n\næ¯”å¦‚ä¿å­˜1.01çš„æ—¶å€™ï¼Œåªä¿å­˜å°æ•°ç‚¹åçš„01ï¼Œç­‰åˆ°è¯»å–çš„æ—¶å€™ï¼Œå†æŠŠç¬¬ä¸€ä½çš„1åŠ ä¸Šå»\nè¿™æ ·åšçš„ç›®çš„æ˜¯èŠ‚çœ1ä½æœ‰æ•ˆæ•°å­—ã€‚ä»¥32ä½æµ®ç‚¹æ•°ä¸ºä¾‹ï¼Œç•™ç»™Måªæœ‰23ä½ï¼Œå°†ç¬¬ä¸€ä½çš„1èˆå»ä»¥åï¼Œç­‰äºå¯ä»¥ä¿å­˜24ä½æœ‰æ•ˆæ•°å­—ã€‚\n\næˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œå…³äºè¿™ä¸ª24ä½æœ‰æ•ˆæ•°å­—æ›¾äº§ç”Ÿäº†ç–‘æƒ‘ã€‚\nå®é™…ä¸Šå®ƒå¹¶ä¸éš¾ç†è§£ï¼š\nåœ¨å†…å­˜ä¸­ï¼Œ32ä½æµ®ç‚¹æ•°çš„Mæœ‰23ä½çš„ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬ä¿å­˜äº†å°æ•°ç‚¹å‰é¢çš„1ï¼Œå°±åªèƒ½ä¿å­˜å°æ•°ç‚¹å22ä½çš„å†…å®¹ã€‚\nä½†å¦‚æœæˆ‘ä»¬çœç•¥1ï¼Œåªä¿ç•™å°æ•°ç‚¹åçš„å†…å®¹ï¼Œé‚£ä¸å°±èƒ½ä¿å­˜åˆ°å°æ•°ç‚¹åç¬¬23ä½äº†å—ï¼Ÿå†åŠ ä¸ŠåŸæ¥å°æ•°ç‚¹å‰çš„1ï¼Œä¸å°±æ˜¯24ä½æœ‰æ•ˆæ•°å­—äº†ï¼\n\nIEEE754å¯¹æŒ‡æ•°Eçš„ç‰¹æ®Šè§„å®šEæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°(unsigned int)\n\nå¦‚æœEä¸º8ä½ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0-255\nå¦‚æœEä¸º11ä¸ºï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0-2047\n\nå¯æ˜¯ç§‘å­¦è®¡æ•°æ³•é‡Œé¢çš„Eæ˜¯å¯ä»¥å‡ºç°è´Ÿæ•°çš„ã€‚\næ‰€ä»¥IEEE754è§„å®šï¼Œå­˜å…¥å†…å­˜æ—¶Eçš„çœŸå®å€¼å¿…é¡»å†åŠ ä¸Šä¸€ä¸ªä¸­é—´æ•°\n\n8ä½çš„Eï¼Œä¸­é—´æ•°æ˜¯127\n11ä½çš„Eï¼Œä¸­é—´æ•°æ˜¯1023\n\n\nä¾‹ï¼š2^10çš„Eæ˜¯10ï¼Œæ‰€ä»¥ä¿å­˜ä¸º32ä½æµ®ç‚¹æ•°çš„æ—¶å€™ï¼ŒEå¿…é¡»ä¿å­˜ä¸º10+127=137ï¼Œå³10001001ã€‚\nä¿å­˜ä¸º64ä½æµ®ç‚¹æ•°çš„æ—¶å€™ï¼ŒEä¿å­˜ä¸º10+1023=1033ï¼Œå³10000001001\n\nâ‘ å½“Eä¸ä¸ºå…¨0æˆ–å…¨1æ—¶æµ®ç‚¹æ•°é‡‡ç”¨ä¸‹é¢çš„è§„åˆ™æ¥è¿›è¡Œå­˜æ”¾ï¼š\n\nå†…å­˜ä¸­æŒ‡æ•°Eçš„è®¡ç®—å€¼å‡å»127(æˆ–1023)ï¼Œå¾—åˆ°Eçš„çœŸå®å€¼ï¼Œå†å°†æœ‰æ•ˆæ•°å­—Må‰é¢åŠ ä¸Šç¬¬ä¸€ä½çš„1\n\nä»¥32ä½æµ®ç‚¹æ•°ä¸¾ä¾‹ï¼š\n0.5çš„äºŒè¿›åˆ¶å½¢å¼ä¸º0.1ã€‚ç§‘å­¦è®¡æ•°æ³•ä¸­æ•´æ•°éƒ¨åˆ†å¿…é¡»ä¸º1ï¼Œå°æ•°ç‚¹åº”å³ç§»ä¸€ä½ã€‚\nåˆ™ä¸º1.0*2^(-1)ï¼ŒEçš„çœŸå®å€¼ä¸º-1ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­ä¸º-1+127=126(01111110)\nMå­˜æ”¾å°æ•°ç‚¹åçš„0ï¼Œè¡¥å…¨23ä½ï¼Œå…¨ä¸º0\nè¿™æ—¶å€™0.5çš„äºŒè¿›åˆ¶è¡¨ç°å½¢å¼å°±æ˜¯\n0 01111110 00000000000000000000000\n\n\n\n\nS\nE\nM\n\n\n\n0\n01111110\n0 01111110 00000000000000000000000\n\n\n\nâ‘¡å½“Eä¸ºå…¨0æ—¶\nè¿™æ—¶ï¼Œæµ®ç‚¹æ•°çš„æŒ‡æ•°Eç­‰äº1-127ï¼ˆæˆ–è€…1-1023ï¼‰å³ä¸ºçœŸå®å€¼\næœ‰æ•ˆæ•°å­—Mä¸å†åŠ ä¸Šç¬¬ä¸€ä½çš„1ï¼Œè€Œæ˜¯è¿˜åŸä¸º0.xxxxxxçš„å°æ•°\nè¿™æ ·åšæ˜¯ä¸ºäº†è¡¨ç¤ºÂ±0ï¼Œä»¥åŠæ¥è¿‘äº0çš„å¾ˆå°çš„æ•°å­—\n\nâ‘¢å½“Eä¸ºå…¨1æ—¶å½“Eä¸ºå…¨1æ—¶ï¼ŒåŸEä¸º128ï¼Œæ•°å­—éå¸¸å¤§ï¼Œç›¸å½“äºæ— ç©·å¤§\n\nè¿™æ—¶ï¼Œå¦‚æœæœ‰æ•ˆæ•°å­—Må…¨ä¸º0ï¼Œè¡¨ç¤ºÂ±æ— ç©·å¤§ï¼ˆæ­£è´Ÿå–å†³äºç¬¦å·ä½sï¼‰\n\n\nè§£é‡Šå¼€ç¯‡ä»£ç å›åˆ°å¼€å¤´\næ•´å½¢9çš„åŸç å¦‚ä¸‹\n00000000 00000000 00000000 00001001\n\nå½“æˆ‘ä»¬å°†å®ƒå¼ºåˆ¶å­˜æ”¾åˆ°floatç±»å‹çš„æŒ‡é’ˆä¸­æ—¶\n\n\n\nS\nE\nM\n\n\n\n0\n00000000\n0000000 00000000 00001001\n\n\nè§£ç å‡ºæ¥å°±æ˜¯$$(-1)^00.0000000 00000000 000010012^{-126}$$è¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ•°å­—ï¼Œè¿œå°äºfloatç±»å‹é»˜è®¤çš„å°æ•°ç‚¹åå…­ä½ï¼Œæ‰€ä»¥printfæ‰“å°çš„æ˜¯0.000000\n\n*pfloat = 9.0;printf(\"numçš„å€¼ä¸ºï¼š%d\\n\", n);printf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\n\nè¿™é‡Œ9.0å°±æ˜¯ä»¥æµ®ç‚¹æ•°çš„å½¢å¼å­˜å…¥floatæŒ‡é’ˆçš„\n\n9.0  åè¿›åˆ¶\n1001.0 äºŒè¿›åˆ¶\n\nS=0,M=1.001,E=3äºŒè¿›åˆ¶ç 0100 0001 0001 0000 0000 0000 0000 0000\n\nå¼€å¯è°ƒè¯•ï¼Œåœ¨å†…å­˜æ¡†ä¸­æŸ¥çœ‹nçš„åœ°å€å¦‚ä¸‹\n\n\n\n\n41\n10\n00\n00\n\n\n\n0100 0001\n0001 0000\n0000 0000\n0000 0000\n\n\næ­£å¥½å¯¹åº”äº†æµ®ç‚¹æ•°9.0åœ¨å†…å­˜ä¸­å­˜æ”¾çš„äºŒè¿›åˆ¶ç \næœ€ånä»¥%dæ‰“å°å‡ºæ¥ï¼Œå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„1091567616\nç»“è¯­è€ƒè¯•å‘¨å¿«è¦ç»“æŸå•¦ï¼\nå¯’å‡å°†å¼€å§‹æ–°çš„ä»£ç å­¦ä¹ \n\nç»ˆäºè¡¥ä¸Šäº†ä¹‹å‰æ¬ ä¸‹çš„åšå®¢äº†ï¼Œå½“ä½œæ˜¯ä¸€ç§å¤ä¹ å§ï¼Œçš„ç¡®æœ‰ä¸å°‘ä¸œè¥¿å·²ç»å¿˜è®°çš„å·®ä¸å¤šäº†ğŸ˜¥\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬ä¸€ç«™ï¼Œå­—ç¬¦æŒ‡é’ˆ&typedefå…³é”®å­—","url":"/2022/01/18/note_c/33%E5%AD%97%E7%AC%A6%E6%8C%87%E9%92%88/","content":"[TOC]\n\nç´§å¼ åˆºæ¿€çš„å¯’å‡å­¦ä¹ å¼€å§‹å•¦ï¼\n\nç®€å•å›é¡¾ä¸€ä¸‹æŒ‡é’ˆçš„æ¦‚å¿µ\n\nå†…å­˜ä¼šåˆ’åˆ†ä»¥å­—èŠ‚ä¸ºå•ä½çš„ç©ºé—´ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼ˆåœ°å€&#x2F;æŒ‡é’ˆï¼‰\n\næŒ‡é’ˆå˜é‡å¯ä»¥å­˜æ”¾è¿™ä¸ªåœ°å€&#x2F;æŒ‡é’ˆ\n\n\næ³¨ï¼šæˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„æŒ‡é’ˆï¼Œä¸€èˆ¬æ˜¯æŒ‡é’ˆå˜é‡\n\nä¸‹é¢è®©æˆ‘ä»¬åä¸ŠæŒ‡é’ˆè¿›é˜¶çš„ğŸšŒï¼Œæ¥åˆ°ç¬¬ä¸€ç«™ï¼å­—ç¬¦æŒ‡é’ˆ\n1å­—ç¬¦æŒ‡é’ˆ1.1ä»£ç ç¤ºä¾‹1int main()&#123;\tchar ch = &#x27;w&#x27;;\tchar* p= &amp;ch;\t\tchar* pa = &quot;abcdef&quot;;\treturn 0;&#125;\n\n\nå­—ç¬¦å˜é‡ché‡Œé¢å­˜æ”¾äº†å­—ç¬¦w\nå­—ç¬¦æŒ‡é’ˆpé‡Œé¢å­˜æ”¾äº†chçš„åœ°å€\n\næŒ‡é’ˆå˜é‡paé‡Œé¢å­˜æ”¾äº†abcdefå­—ç¬¦ä¸²çš„åœ°å€ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œåˆå§‹åŒ–ã€‚è€Œæ˜¯ç›´æ¥æŠŠå®ƒæ”¾è¿›äº†æŒ‡é’ˆå˜é‡paé‡Œé¢ã€‚\nå’Œå‰ä¸¤è¡Œçš„å­—ç¬¦wä¸åŒï¼Œabcdefæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„åªè¯»æ•°æ®åŒºï¼Œæ— æ³•ä¿®æ”¹ï¼Œå³ä¾¿é€šè¿‡æŒ‡é’ˆä¹Ÿæ— æ³•ä¿®æ”¹ã€‚\nä¸ºäº†é¿å…ç†è§£å‡ºé”™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåŠ ä¸Šconstä¿®é¥°\nconst char* pa = &quot;abcdef&quot;;\n\n\n\nconstæ”¾åœ¨*çš„å·¦è¾¹\nè¡¨ç¤ºconstä¿®é¥°çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½é€šè¿‡æŒ‡é’ˆæ¥æ”¹å˜\nä½†æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«æ˜¯å¯ä»¥æ”¹å˜çš„\n\nconstæ”¾åœ¨*çš„å³è¾¹\nè¡¨ç¤ºconstä¿®é¥°çš„æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«ï¼ŒæŒ‡é’ˆå˜é‡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nä½†æ˜¯*paæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹çš„\n\n\n\n\n1.2ä»£ç ç¤ºä¾‹2int main()&#123;\tchar arr1[] = &quot;abcdef&quot;;\tchar arr2[] = &quot;abcdef&quot;;\tconst char* str1 = &quot;abcdef&quot;;\tconst char* str2 = &quot;abcdef&quot;;\tif (arr1 == arr2)\t\tprintf(&quot;arr1==arr2\\n&quot;);\telse\t\tprintf(&quot;arr1!=arr2\\n&quot;);\tif (str1 == str2)\t\tprintf(&quot;str1==str2\\n&quot;);\telse\t\tprintf(&quot;str1!=str2\\n&quot;);\treturn 0;&#125;\n\nå®ƒçš„ç»“æœå¦‚ä¸‹ï¼š\n\nåœ¨ä¾‹å­1é‡Œé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œstr1å’Œstr2è¿™ç§æƒ…å†µéƒ½æŒ‡å‘ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²\næ—¢ç„¶å­—ç¬¦ä¸²abcdefæ— æ³•è¢«æ”¹å˜ï¼Œç¼–è¯‘å™¨ä¹Ÿæ²¡æœ‰å¿…è¦åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´æ¥å­˜æ”¾ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²\næ‰€ä»¥str1å’Œstr2çš„åœ°å€æ˜¯å®Œå…¨ä¸€æ ·çš„\nè€Œarr1å’Œarr2æ˜¯å®Œå…¨ä¸åŒçš„æ•°ç»„ï¼Œå®ƒä»¬çš„é¦–å…ƒç´ åœ°å€ä¸ä¸€æ ·ï¼Œæ‰“å°çš„ç»“æœæ˜¯ä¸ç›¸ç­‰\n\n\nğŸšç¬¬ä¸€ç«™çš„è·ç¦»æ¯”è¾ƒçŸ­\nåœ¨ç«™å°ä¸Šï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ— äººè®¤é¢†çš„è¢‹å­ï¼Œé‡Œé¢è£…ç€ä¸€ä¸ªå…³é”®å­—\ntypedef\n\n2typedefå…³é”®å­—2.1å¦‚ä½•ä½¿ç”¨åœ¨MSDNä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾åˆ°typedefçš„å®šä¹‰\n\nç®€å•åœ°è¯´ï¼Œtypedefçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå·²æœ‰çš„ç±»å‹åæ¢ä¸€ä¸ªæ–°çš„åå­—\ntypedef int* pint;\n\nè¿™å¥ä»£ç çš„æ„æ€æ˜¯ï¼šå°†int*å‘½åä¸ºpint\n\npintåœ¨ä½¿ç”¨çš„æ—¶å€™å’Œint*å®Œå…¨ä¸€è‡´\næˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨int*\n\nåœ¨ç»“æ„ä½“é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨typedefæ¥ç¼©çŸ­åŸæœ‰ç»“æ„ä½“å®šä¹‰çš„è¯­å¥\nå¦‚ï¼šå°†struct Stuå‘½åä¸ºStu\ntypedef struct Stu&#123;\tint ID[10];\tchar name[10];\tint age;&#125;Stu;\n\n2.2typedefå’Œ#defineçš„åŒºåˆ«æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨#defineè¯­å¥ï¼Œè¿›è¡Œè¿™é¡¹æ“ä½œ\n#define PINT int*\n\nğŸ‘†å®šä¹‰è¯­å¥PINTä¸ºint*\n2.2.1æŒ‡é’ˆè¿ç»­å®šä¹‰å…ˆæ¥äº†è§£ä¸€ä¸‹å¦‚ä½•æ­£ç¡®è¿ç»­å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ\nint*pa,*pb;//æ­£ç¡®çš„è¿ç»­å®šä¹‰int*paï¼Œpb;//é”™è¯¯//paæ˜¯int*ç±»å‹ï¼Œè€Œpbæ˜¯intç±»å‹\n\nå› ä¸ºè¿™ä¸¤ä¸ªçš„æƒ…å†µéå¸¸å®¹æ˜“ææ··ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å»ºè®®è¿ç»­å®šä¹‰æŒ‡é’ˆ\ntypedef int* pint;#define PINT int*int main()&#123;    pint pa,pb;//å¯è¿ç»­å®šä¹‰æŒ‡é’ˆ    //pa--&gt;int*    //pb--&gt;int*    PINT pa,pb;//ç­‰åŒäºint*paï¼Œpb    //pa--&gt;int*    //pb--&gt;int&#125;\n\n\ntypedefä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å˜é‡ç±»å‹\n#defineåªæ˜¯åœ¨å¯¹åº”ä½ç½®è¿›è¡Œæ›¿æ¢\n\nå› ä¸ºtypedefäº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œpintä¸ºint*ï¼Œä½†ä¸int*ä¹Ÿæœ‰ä¸åŒ\nint pa,pb;//pa,pbéƒ½æ˜¯intç±»å‹pint pa,pb;//pa,pbéƒ½æ˜¯int*ç±»å‹\n\nè€Œæˆ‘ä»¬ç›´æ¥ç”¨int*è¿›è¡Œè¿ç»­å®šä¹‰æŒ‡é’ˆå˜é‡æ˜¯é”™è¯¯çš„\nint*paï¼Œpb;//é”™è¯¯//paæ˜¯int*ç±»å‹ï¼Œè€Œpbæ˜¯intç±»å‹\n\n\nä½ å­¦ä¼šäº†å—ï¼Ÿæˆ‘åæ­£æ˜¯å­¦åºŸäº†\nå˜Ÿå˜Ÿå˜Ÿï¼Œå»ä¸‹ä¸€ç«™ï¼ğŸšŒ\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬äºŒç«™ï¼ŒæŒ‡é’ˆæ•°ç»„","url":"/2022/01/20/note_c/34%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84/","content":"[TOC]\nå˜Ÿå˜Ÿå˜ŸğŸšŒï¼ŒæŒ‡é’ˆè¿›é˜¶çš„ç¬¬äºŒç«™æŒ‡é’ˆæ•°ç»„åˆ°äº†ï¼\nä¸Šè½¦ä¸Šè½¦ï¼\n\nå›é¡¾ä¸€ä¸‹ç¬¬ä¸€ç«™ğŸšçš„å†…å®¹ï¼šå­—ç¬¦æŒ‡é’ˆ\n\n\næŒ‡é’ˆæ•°ç»„æ•°ç»„æ˜¯ä¸€ç§ç±»å‹çš„æ•°çš„é›†åˆ\n\næ•´å‹æ•°ç»„çš„å…ƒç´ éƒ½æ˜¯intç±»å‹\næŒ‡é’ˆæ•°ç»„çš„å…ƒç´ éƒ½æ˜¯æŒ‡é’ˆå˜é‡\n\nint* arr1[10];//æ•´å‹æŒ‡é’ˆçš„æ•°ç»„char*arr2[10];//ä¸€çº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„char** arr3[5];//äºŒçº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„\n\nå‚è€ƒè¿™ä¸€ä»½ç¤ºæ„å›¾\n\nç¤ºä¾‹1:å®šä¹‰å¤šä¸ªå­—ç¬¦æŒ‡é’ˆåœ¨ä¸Šä¸€ç«™çš„å­—ç¬¦æŒ‡é’ˆé‡Œé¢ï¼Œæåˆ°äº†å¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆæ¥åˆ›å»ºä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²\nåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªæŒ‡é’ˆæ”¾åœ¨ä¸€å—ï¼Œå‡‘æˆæŒ‡é’ˆæ•°ç»„ï¼Œä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæŒ‡å‘å¸¸é‡å­—ç¬¦ä¸²çš„æŒ‡é’ˆ\n\nint main()&#123;\tchar* arr[] = &#123; &quot;abcdef&quot;, &quot;qwer&quot;, &quot;zhangsan&quot; &#125;;\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tprintf(&quot;%s\\n&quot;, arr[i]);\t&#125;\treturn 0;&#125;\n\nç¤ºä¾‹2:å­˜æ”¾æ•°ç»„åçš„æ•°ç»„åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šæ•°ç»„åä»£è¡¨æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\nå¯ä»¥è¯´ï¼Œæ•°ç»„åæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆ\næ—¢ç„¶æ˜¯æŒ‡é’ˆï¼Œå°±èƒ½æ”¾è¿›æŒ‡é’ˆæ•°ç»„é‡Œé¢\nint main()&#123;\tint arr1[] = &#123; 1,2,3,4,5 &#125;;\tint arr2[] = &#123; 2,3,4,5,6 &#125;;\tint arr3[] = &#123; 3,4,5,6,7 &#125;;\tint* arr[] = &#123;arr1, arr2, arr3&#125;;\t//arræ˜¯æŒ‡é’ˆæ•°ç»„\tint i = 0;\tfor (i = 0; i &lt; 3; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; 5; j++)\t\t&#123;\t\t\tprintf(&quot;%d &quot;, arr[i][j]);//*(*(arr+i)+j)\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;\treturn 0;&#125;\n\nè¿™ä¸²ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£çš„æ˜¯arr[i][j]å’Œ*(*(arr+i)+j)ä¹‹é—´çš„å…³ç³»\n\nä»¥ä¸‹å†…å®¹ï¼Œæˆ‘çš„ç†è§£å¯èƒ½æœ‰åå·®ã€‚è‹¥æœ‰é”™è¯¯ï¼Œè¿˜è¯·å¤§ä½¬ä»¬æ— æƒ…æŒ‡æ­£ï¼\n\n\narr[i][j]å’Œ*(*(arr+i)+j)\nå®ƒä»¬éƒ½æ˜¯è®¿é—®æ•°ç»„çš„å½¢å¼ï¼Œç”¨åˆ°äº†ä¸åŒçš„æ“ä½œç¬¦\nä½†è¡¨è¾¾çš„å«ä¹‰ç›¸åŒï¼šä¸‹æ ‡ä¸ºiã€jçš„å…ƒç´ \n\nåœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„å­˜å‚¨æ˜¯è¿ç»­çš„\nåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è¡Œçš„æ•°æ®æ˜¯è¿ç»­å­˜æ”¾åœ¨æ•°ç»„é‡Œé¢çš„\nint arr4[2][2]=&#123;&#123;1,2&#125;,&#123;3,4&#125;&#125;;\n\n\næ—¢ç„¶æ˜¯è¿ç»­çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æŒ‡é’ˆ++çš„å½¢å¼æ¥è®¿é—®äºŒç»´æ•°ç»„é‡Œé¢çš„æ‰€æœ‰å…ƒç´ \n\n\n*(arr+i)æŒ‡å‘ç¬¬iè¡Œå…ƒç´ \n*(arr+i)+jæŒ‡å‘ç¬¬iè¡Œä¸‹æ ‡ä¸ºjçš„å…ƒç´ çš„åœ°å€\n*(*(arr+i)+j)å†æ¬¡è§£å¼•ç”¨ï¼Œå¾—åˆ°jå…ƒç´ \n\n\næ•°ç»„åçš„æœ¬è´¨æ˜¯åœ°å€ï¼Œæ˜¯è¯¥æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œï¼Œæ•°ç»„åarrå°±æ˜¯ç¬¬ä¸€è¡Œçš„åœ°å€\næˆ‘ä»¬å¯ä»¥æŠŠäºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œç†è§£ä¸ºç‹¬ç«‹çš„ä¸€ä¸ªä¸€ç»´æ•°ç»„\nè¿™æ—¶å€™ï¼ŒäºŒç»´æ•°ç»„çš„å½¢å¼å’Œä¸Šè¿°ä»£ç ä¸­int* arr[]æ•°ç»„çš„å½¢å¼å°±ç›¸åŒäº†\nint arr1[] = &#123; 1,2,3,4,5 &#125;;int arr2[] = &#123; 2,3,4,5,6 &#125;;int arr3[] = &#123; 3,4,5,6,7 &#125;;//arr1 arr2 arr3æ˜¯äºŒç»´æ•°ç»„é‡Œé¢çš„æ¯ä¸€è¡Œint* arr[] = &#123;arr1, arr2, arr3&#125;;//arrç­‰ä»·äºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä½†æœ‰ä¸åŒ\n\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒç»´æ•°ç»„è®¿é—®çš„å½¢å¼æ¥è®¿é—®int* arr[]æ•°ç»„\n\nint* arr[]å’ŒäºŒç»´æ•°ç»„çš„ä¸åŒint*arræ•°ç»„é‡Œçš„å…ƒç´ arr1ï¼Œarr2ï¼Œarr3çš„åœ°å€æ˜¯è¿ç»­å­˜æ”¾çš„\n\nè¿™é‡Œè®¾è®¡åˆ°ä¸€ä¸ªæ–°æ¦‚å¿µï¼šæ•°ç»„æŒ‡é’ˆ\nå°†åœ¨ä¸‹ä¸€ç«™ğŸšŒè®²è§£ï¼\n\n\nä½†æ˜¯å®ƒä»¬å¯¹åº”çš„å„è‡ªçš„æ•°ç»„å†…æ•°æ®å¹¶ä¸è¿ç»­\nå¦‚ï¼šarr1å’Œarr2è¿™ä¸¤ä¸ªæ•°ç»„å„è‡ªå…ƒç´ çš„åœ°å€å¹¶ä¸è¿ç»­\n\n\nç¤ºä¾‹3ï¼šå­˜æ”¾äºŒçº§æŒ‡é’ˆçš„æ•°ç»„æ—¢ç„¶ä¸€çº§æŒ‡é’ˆå¯ä»¥æ”¾è¿›æ•°ç»„é‡Œï¼ŒäºŒçº§æŒ‡é’ˆä¹Ÿæ˜¯æŒ‡é’ˆï¼ŒåŒæ ·ä¹Ÿèƒ½å¡è¿›æ•°ç»„é‡Œ\nä¸‹é¢è¿™ä¸²ä»£ç é‡Œé¢çš„arr2å°±æ˜¯ä¸€ä¸ªå­˜æ”¾äºŒçº§æŒ‡é’ˆçš„æ•°ç»„\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint* p = &amp;a;\tint** pp = &amp;p;\tint** arr2[4] = &#123;pp&#125;;\treturn 0;&#125;\n\n\nç»“è¯­ğŸšç¬¬äºŒç«™çš„è·¯ç¨‹åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼\næ•¬è¯·æœŸå¾…ä¸‹ä¸€ç«™çš„æ•°ç»„æŒ‡é’ˆèˆªç¨‹å§ï¼\n\nå¦‚æœä½ å¯¹åšå®¢å†…å®¹æœ‰ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬ä¸‰ç«™ï¼Œæ•°ç»„æŒ‡é’ˆ","url":"/2022/01/21/note_c/35%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88/","content":"[TOC]\n\nä¸Šä¸€ç«™ğŸšæˆ‘ä»¬å­¦ä¹ äº†æŒ‡é’ˆæ•°ç»„\nä»Šå¤©æ¥åˆ°æˆ‘ä»¬çš„ç¬¬ä¸‰ç«™ğŸšŒ\nå¯’å‡ä¹Ÿä¸èƒ½è½ä¸‹å­¦ä¹ ï¼\n\nä»Šå¤©å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„markdownè¯­æ³•\næˆ‘æ˜¯çº¢è‰²\n&lt;font color=red&gt;æˆ‘æ˜¯çº¢è‰²&lt;/font&gt;\n\n\næ•°ç»„æŒ‡é’ˆæ•´å‹æŒ‡é’ˆï¼šæŒ‡å‘æ•´å‹çš„æŒ‡é’ˆ\nå­—ç¬¦æŒ‡é’ˆï¼šæŒ‡å‘å­—ç¬¦çš„æŒ‡é’ˆ\næ•°ç»„æŒ‡é’ˆï¼šæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ\n1åŸºæœ¬æ¦‚å¿µä¸‹é¢å“ªä¸ªæ˜¯æ•°ç»„æŒ‡é’ˆå‘¢ï¼Ÿ\n\næŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆçš„æ¦‚å¿µå¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸€å®šè¦åˆ†æ¸…æ¥šå“¦ï¼\n\nint *p1[10];int (*p2)[10];\n\n\np1æ˜¯æŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹æ˜¯int*\np2æ˜¯æ•°ç»„æŒ‡é’ˆï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹æ˜¯int(*)[10]\n\nint (*p2)[10];//p2å…ˆå’Œ*ç»“åˆï¼Œè¡¨ç¤ºp2æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡//æŒ‡å‘ä¸€ä¸ªå¤§å°ä¸º10ä¸ªæ•´å‹çš„æ•°ç»„//æ‰€ä»¥p2æ˜¯æ•°ç»„æŒ‡é’ˆ\n\næ³¨ï¼š[ ]çš„ä¼˜å…ˆçº§é«˜äº*ï¼Œæ‰€ä»¥å¿…é¡»åŠ ä¸Š()æ¥ä¿è¯p2å…ˆå’Œ*ç»“åˆ\n\n1.1ä»£ç ç¤ºä¾‹int* parr[6];int* (*pp)[6] = &amp;parr;\n\nppæ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œç±»å‹æ˜¯int*(*)[6],å­˜æ”¾çš„æ˜¯int*ç±»å‹çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„æœ‰6ä¸ªå…ƒç´ \n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»æ‰å˜é‡åï¼Œå‰©ä¸‹çš„å³ä¸ºå˜é‡ç±»å‹\nå¦‚ï¼šint* (*pp)[6]å»æ‰å˜é‡åppï¼Œå˜é‡ç±»å‹ä¸ºint*(*)[6]\n\nchar arr[5];char (*pa)[5] = &amp;arr;\n\npaä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œå˜é‡ç±»å‹ä¸ºchar(*)[5]ï¼ŒæŒ‡å‘charç±»å‹çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º5\n1.2é”™è¯¯ç¤ºèŒƒä½ è‚¯å®šä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå˜é‡ç±»å‹ä¸ºint(*)[5]çš„æ•°ç»„æŒ‡é’ˆï¼Œèƒ½å¦æŒ‡å‘æ•°ç»„å…ƒç´ ä¸º3æˆ–è€…6çš„æ•°ç»„å‘¢ï¼Ÿ\n\nç¨‹åºèƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘ï¼Œä½†æ˜¯ä¼šæŠ¥å‡ºå¦‚ä¸‹è­¦å‘Š\nwarning C4048: â€œint (*)[5]â€å’Œâ€œint (*)[3]â€æ•°ç»„çš„ä¸‹æ ‡ä¸åŒ\n\nåœ¨æ­£å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—ä¿è¯æ•°ç»„æŒ‡é’ˆå’ŒåŸæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸€è‡´ï¼\n2arrå’Œ&amp;arrçš„åŒºåˆ«åœ¨è¿›ä¸€æ­¥äº†è§£æ•°ç»„æŒ‡é’ˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£arrå’Œ&amp;arrçš„åŒºåˆ«\nå½“æˆ‘ä»¬ç”¨%pæ‰“å°arrå’Œ&amp;arræ—¶ï¼Œä¼šå‘ç°å®ƒä»¬çš„ç»“æœæ˜¯ç›¸åŒçš„\n\nä½†è¿™èƒ½è¯´æ˜arrå’Œ&amp;arrç­‰ä»·äº†å—ï¼Ÿ \nå¹¶ä¸èƒ½ï¼\nå†æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸²ä»£ç \n\n\narr+1è·³è¿‡4ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªå…ƒç´ intçš„å¤§å°\n&amp;arr+1è·³è¿‡40ä¸ªå­—èŠ‚ï¼Œæ•´ä¸ªæ•°ç»„çš„å¤§å°\n\nå…¶å®&amp;arrå’Œarrè™½ç„¶æŒ‡å‘çš„åœ°å€å€¼ç›¸åŒï¼Œä½†æ˜¯æ„ä¹‰ä¸åŒï¼\n\n&amp;arrè¡¨ç¤ºçš„æ˜¯æ•°ç»„çš„åœ°å€ï¼Œæ˜¯int(*)[10]ç±»å‹\narrè¡¨ç¤ºæ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼Œæ˜¯int*ç±»å‹\n\næ•°ç»„çš„åœ°å€+1ï¼Œè·³è¿‡æ•´ä¸ªæ•°ç»„çš„å¤§å°\næ‰€ä»¥&amp;arr+1å’Œ&amp;arrçš„å·®å€¼ä¸º40\nå¯¹åº”çš„int(*p)[5]å’Œint* p1ä¹Ÿæœ‰ä¸åŒ\n\npæ¥æ”¶çš„æ˜¯&amp;arrï¼Œæ•´ä¸ªæ•°ç»„çš„åœ°å€\np1æ¥æ”¶arrï¼Œæ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\n\n3æ•°ç»„æŒ‡é’ˆçš„ä½¿ç”¨3.1æ‰“å°ä¸€ç»´æ•°ç»„ä¸‹é¢è¿™ä¸²ä»£ç æ˜¯ç”¨æ•´å‹æŒ‡é’ˆæ‰“å°æ•°ç»„å…ƒç´ çš„æƒ…å†µ\n\né™¤äº†æ•´å‹æŒ‡é’ˆå¤–ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•°ç»„æŒ‡é’ˆæ‰“å°å…ƒç´ \nint main()&#123;\tint arr[10] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;\tint (*p)[10] = &amp;arr;\tint i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, *((*p) + i));        //*p--&gt;arr\t&#125;\tprintf(&quot;\\n&quot;);\treturn 0;&#125;\n\n*pç­‰ä»·äºarrï¼Œarr+iç­‰ä»·äº&amp;arr[i]ï¼Œå¯¹arr+iè§£å¼•ç”¨å°±æ˜¯arr[i]\n\nä½†æ˜¯è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯æŠŠç®€å•é—®é¢˜å¤æ‚åŒ–äº†ï¼šæˆ‘ä»¬æœ¬æ¥å°±å¯ä»¥ç”¨int*æŒ‡é’ˆæ¥æ‰“å°æ•°ç»„å…ƒç´ ï¼Œä¸ºä½•è¦åˆ©ç”¨æ•°ç»„æŒ‡é’ˆæ¥å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿ\næ‰€ä»¥åœ¨ä¸€ç»´æ•°ç»„é‡Œé¢ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå†™\n\n3.2æ‰“å°äºŒç»´æ•°ç»„å‡è®¾æˆ‘ç°åœ¨éœ€è¦ä¸€ä¸ªprintå‡½æ•°æ¥æ‰“å°äºŒç»´æ•°ç»„\nåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæƒ³åˆ°ç”¨è¿™å¼ æ–¹å¼ä¼ å…¥äºŒç»´æ•°ç»„\nvoid print(int a[3][5], int r, int c);\n\nå½“æˆ‘ä»¬æƒ³ç”¨æ•°ç»„æŒ‡é’ˆçš„æ—¶å€™ï¼Œæƒ…å†µå°±æœ‰äº›å˜åŒ–äº†\n\næ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ\näºŒç»´æ•°ç»„çš„æ•°ç»„åè¡¨ç¤ºç¬¬ä¸€è¡Œçš„åœ°å€\n\n//mainå‡½æ•°ä¸­print(arr,3,5);\n\nè¿™é‡Œprinfé‡Œé¢çš„arrå°±éœ€è¦ç”¨æ•°ç»„æŒ‡é’ˆæ¥æ¥æ”¶\nè¯¥äºŒç»´æ•°ç»„æ˜¯3è¡Œ5åˆ—ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰5ä¸ªå…ƒç´ ï¼Œæ˜¯ä¸€ä¸ªint[5]çš„æ•°ç»„\nå¯¹åº”çš„æ•°ç»„æŒ‡é’ˆä¸ºint(*)[5]ç±»å‹\nvoid print(int(*p)[5], int r, int c)\n\nè¿™é‡Œçš„pæŒ‡é’ˆæŒ‡å‘çš„æ˜¯äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œçš„åœ°å€\n\n*pï¼šå¯¹pç›´æ¥è§£å¼•ç”¨\nç›¸å½“äºæ‹¿é“äº†ç¬¬ä¸€è¡Œå…ƒç´ çš„åœ°å€ï¼ˆæŠŠç¬¬ä¸€è¡Œçœ‹ä½œæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„åœ°å€ï¼‰\nç›¸å½“äºæ˜¯äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œé¦–å…ƒç´ çš„åœ°å€\n\n\n\nå¯¹(p+i)è§£å¼•ç”¨ï¼Œå°±èƒ½æ‹¿åˆ°ç¬¬iè¡Œç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€\n*(p+i)+jç¬¬iè¡Œç¬¬jä¸ªå…ƒç´ çš„åœ°å€\n*(*(p+i)+j)ç¬¬iè¡Œç¬¬jä¸ªå…ƒç´ \n\n\nè¿™ä¸€éƒ¨åˆ†å’Œä¸Šç¯‡åšå®¢æŒ‡é’ˆæ•°ç»„çš„å†…å®¹ç›¸ä¼¼\n\næœ€ç»ˆçš„å‡½æ•°å®ç°å¦‚ä¸‹\nvoid print(int(*p)[5], int r, int c)&#123;\tint i = 0;\tfor (i = 0; i &lt; r; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; c; j++)\t\t&#123;\t\t\tprintf(&quot;%d &quot;, *(*(p + i) + j));\t\t\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;&#125;int main()&#123;\tint arr[3][5] = &#123; &#123;1,2,3,4,5&#125;,&#123;2,3,4,5,6&#125;,&#123;3,4,5,6,7&#125; &#125;;\tprint(arr,3,5);\treturn 0;&#125;\n\n\n3.3 å…³äºäºŒç»´æ•°ç»„ä¼ å‚void fun2(int **p)&#123;Â  Â  return;&#125;void test03()&#123;Â  Â  int a[4]=&#123;1,2,3,4&#125;;Â  Â  int b[3][4]=&#123;&#123;1,2,3,4&#125;,&#123;5,6,7,8&#125;,&#123;9,10,11,12&#125;&#125;;Â  Â  int *q[3]=&#123;b[0],b[1],b[2]&#125;;Â  Â  //fun2(a);Â  Â  //fun2(&amp;a);Â  Â  //fun2(b);Â  Â  fun2(q);&#125;\nåœ¨2022çš„æš‘å‡ä½œä¸šday02ä¸­æœ‰è¿™ä¹ˆä¸€é“é¢˜ç›®ï¼Œé—®çš„æ˜¯ä¸Šé¢4ç§è°ƒç”¨æ–¹å¼è°ä½åˆæ³•ã€‚ç»è¿‡æµ‹è¯•ï¼Œåªæœ‰æœ€åä¸€ä¸ªæ˜¯ä¸æŠ¥é”™çš„ã€‚\nè¿™é‡Œæ¶‰åŠåˆ°äº†ä¸€ä¸ªæˆ‘ä¹‹å‰ä»æ¥æ²¡æ³¨æ„è¿‡çš„ç‚¹ï¼šäºŒç»´æ•°ç»„ä¸èƒ½ç›´æ¥ç”¨äºŒçº§æŒ‡é’ˆæ¥å—ã€‚åœ¨ä¸Šé¢çš„2.2ä¸­å…¶å®æœ‰æåˆ°ï¼ŒäºŒç»´æ•°ç»„çš„æ¥å—éœ€è¦ç”¨å¯¹åº”çš„æ•°ç»„æŒ‡é’ˆæ¥æ¥å—ã€‚æ¯”å¦‚ int b[3][4]å¯¹åº”çš„æ•°ç»„æŒ‡é’ˆå°±æ˜¯int (*p)[4]ç±»å‹çš„ã€‚ä¸èƒ½ç›´æ¥ç®€å•ç²—æš´åœ°ç”¨äºŒçº§æŒ‡é’ˆint**æ¥æ¥æ”¶äºŒç»´æ•°ç»„\nvoid fun3(int (*p)[4])&#123;Â  Â  return;&#125;int main()&#123;\tint b[3][4]=&#123;&#123;1,2,3,4&#125;,&#123;5,6,7,8&#125;,&#123;9,10,11,12&#125;&#125;;\tfunc3(b);//è¿™æ ·æ‰æ˜¯æ­£ç¡®çš„&#125;\n\n4ç»ƒä¹ ï¼šåˆ¤æ–­è¿™ä¸€ç«™æœ€é‡è¦çš„å°±æ˜¯åŒºåˆ«æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ\n4.1 int arr[5]int arr[5];\n\narræ˜¯ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæœ‰5ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯intç±»å‹çš„\n4.2 int*parr[10]int*parr1[10];\n\nparr1æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ‰10ä¸ªint*ç±»å‹çš„å…ƒç´ \næ‰€ä»¥parr1æ˜¯æŒ‡é’ˆæ•°ç»„\n\n4.3 int (*parr2)[10]int(*parr2)[10];\n\nparr2å’Œ*ç»“åˆï¼Œè¡¨ç¤ºparr2æ˜¯ä¸€ä¸ªæŒ‡é’ˆ\nå»æ‰parr2å³ä¸ºå®ƒçš„å˜é‡ç±»å‹int(*)[10]\næ‰€ä»¥parr2æ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆ\n\n4.4 int(*parr3[10])[5]int(*parr3[10])[5];\n\n[]çš„ä¼˜å…ˆçº§é«˜äº*\nparr3å…ˆå’Œ[]ç»“åˆï¼Œè¯´æ˜parr3æ˜¯ä¸€ä¸ªæ•°ç»„\nè¯¥æ•°ç»„æœ‰10ä¸ªå…ƒç´ ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œç±»å‹æ˜¯int(*)[5]\nè¯¥æ•°ç»„æŒ‡é’ˆæŒ‡å‘çš„æ•°ç»„æœ‰5ä¸ªintç±»å‹çš„å…ƒç´ \n\nç»“è¯­ç¬¬ä¸‰ç«™æ•°ç»„æŒ‡é’ˆåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nä¸‹ä¸€ç«™ğŸšŒæ˜¯ï¼šæ•°ç»„ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚\næ•¬è¯·æœŸå¾…å“¦~\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå†èµ°å§ğŸ˜˜\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬å››ç«™ï¼Œæ•°ç»„/æŒ‡é’ˆçš„ä¼ å‚é—®é¢˜","url":"/2022/01/23/note_c/36%E6%95%B0%E7%BB%84%E4%BC%A0%E5%8F%82%E5%92%8C%E6%8C%87%E9%92%88%E4%BC%A0%E5%8F%82/","content":"[TOC]\næœ‹å‹ä»¬ï¼Œåˆ°ç«™å•¦ï¼\næŒ‡é’ˆè¿›é˜¶ç¬¬å››ç«™ğŸšï¼Œä¼ å‚é—®é¢˜\n\n0.å¼•ä¾‹è‡ªå®šä¹‰å‡½æ•°é‡Œå½¢å‚çš„ç±»å‹ï¼Œè¦å’Œå‡½æ•°è°ƒç”¨ä¸­ä¼ è¿‡å»çš„å®å‚ç±»å‹ç›¸å¯¹åº”\n\nåœ¨åˆé˜¶Cè¯­è¨€çš„å­¦ä¹ é‡Œé¢ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä¼ å‚åˆ†ä¸ºä¼ å€å’Œä¼ å€¼ä¸¤ç§ç±»å‹\nä¸€èµ·æ¥å¤ä¹ ä¸€ä¸‹å§ğŸ‘‰ã€é“¾æ¥ã€‘\n\ntestå‡½æ•°é‡Œçš„æ˜¯intç±»å‹ï¼Œæˆ‘ä»¬ä¼ è¿‡å»çš„å‚æ•°aä¹Ÿæ˜¯intç±»å‹\nvoid test(int n)&#123;&#125;int main()&#123;    int a=1    test(a);    return 0;&#125;\n\n\n\nå¥½äº†ï¼Œç°åœ¨ä½ å·²ç»çŸ¥é“äº†å‡½æ•°ä¼ å‚çš„åŸºæœ¬æ¦‚å¿µäº†ğŸ˜\né‚£ä¹ˆå°±æ¥åˆ†æä¸€ä¸‹æ•°ç»„ä¼ å‚ã€æŒ‡é’ˆä¼ å‚çš„ä»£ç å§ï¼\n1.ä¸€ç»´æ•°ç»„ä¼ å‚çœ‹çœ‹ä»¥ä¸‹å‡½æ•°çš„ä»£ç ç¤ºä¾‹\nä½ è§‰å¾—è°æ˜¯æ­£ç¡®çš„ï¼Œè°æ˜¯é”™è¯¯çš„å‘¢ï¼Ÿ\ninclude &lt;stdio.h&gt;void test(int arr[])&#123;&#125;void test(int arr[10])&#123;&#125;void test(int *arr)&#123;&#125;void test2(int *arr[20])&#123;&#125;void test2(int **arr)&#123;&#125;int main()&#123;\tint arr[10] = &#123;0&#125;;\tint *arr2[20] = &#123;0&#125;;\ttest(arr);\ttest2(arr2);    return 0;&#125;\n\n\nNO.1 å½¢å‚ä½¿ç”¨æ•°ç»„çš„å½¢å¼æ¥æ¥æ”¶ï¼Œæ­£ç¡®\n\nNO.2 åŒæ ·æ˜¯æ•°ç»„çš„å½¢å¼ï¼Œæ­£ç¡®\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„ä¼ å‚å¹¶ä¸ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ•°ç»„\næ‰€ä»¥å‡½æ•°[ ]é‡Œçš„æ•°å­—æ˜¯å¤šå°‘å¹¶ä¸å½±å“\n\nNO.3 æ•°ç»„åæ˜¯é¦–å…ƒç´ çš„åœ°å€ï¼Œç”¨æŒ‡é’ˆæ¥æ”¶ï¼Œæ­£ç¡®\n\nNO.4 arr2æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œ(int *arr[20])å’ŒåŸæ•°ç»„å¯¹åº”ï¼Œæ­£ç¡®\n\nNO.5 æ•°ç»„åæ˜¯é¦–å…ƒç´ åœ°å€ï¼Œarr2çš„é¦–å…ƒç´ æ˜¯ä¸€ä¸ªint*ç±»å‹\nå¯ä»¥ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶ï¼Œæ­£ç¡®ï¼\n\n\n\n2.äºŒç»´æ•°ç»„ä¼ å‚äº†è§£å®Œä¸€ç»´æ•°ç»„äº†ï¼Œé‚£å°±æ¥çœ‹çœ‹äºŒç»´æ•°ç»„\nä»¥ä¸‹çš„å‡½æ•°ä¼ å‚ï¼Œå“ªäº›æ˜¯å¯¹çš„ï¼Œå“ªäº›æ˜¯é”™çš„å‘¢ï¼Ÿ\nvoid test(int arr[3][5])//ä¸€ä¸€å¯¹åº”ï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int arr[][])//çœç•¥åˆ—ï¼Œé”™è¯¯ï¼&#123;&#125;void test(int arr[][5])//å¯ä»¥çœç•¥è¡Œï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int *arr)//äºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ&#123;&#125;//ç¬¬ä¸€è¡Œæ˜¯int(*)[5]ç±»å‹ï¼Œé”™è¯¯ï¼void test(int* arr[5])//æŒ‡é’ˆæ•°ç»„ï¼Œé”™è¯¯ï¼&#123;&#125;void test(int (*arr)[5])//æ•°ç»„æŒ‡é’ˆï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int **arr)//arrä¸æ˜¯ä¸€çº§æŒ‡é’ˆçš„åœ°å€ï¼Œé”™è¯¯ï¼&#123;&#125;int main()&#123;\tint arr[3][5] = &#123;0&#125;;    test(arr);    return 0;&#125;\n\næ ¹æ®äºŒç»´æ•°ç»„ä¼ å‚çš„ä»£ç ï¼Œå¤ä¹ ä»¥ä¸‹çŸ¥è¯†ç‚¹\n\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ\näºŒç»´æ•°ç»„åœ¨å®šä¹‰çš„æ—¶å€™å¯ä»¥çœç•¥è¡Œï¼Œä¸èƒ½çœç•¥åˆ—\n\nç¬¬ä¸€è¡Œçš„ç±»å‹æ˜¯int[5]ï¼Œåº”è¯¥æ”¾è¿›æ•°ç»„æŒ‡é’ˆé‡Œï¼\n\n3.ä¸€çº§æŒ‡é’ˆä¼ å‚#include &lt;stdio.h&gt;void print(int *p, int sz)//ç”¨int*æ¥æ¥å—&#123; int i = 0; for(i=0; i&lt;sz; i++) &#123; printf(&quot;%d\\n&quot;, *(p+i)); &#125;&#125;int main()&#123; int arr[10] = &#123;1,2,3,4,5,6,7,8,9&#125;; int *p = arr; int sz = sizeof(arr)/sizeof(arr[0]);  print(p, sz);//ä¸€çº§æŒ‡é’ˆpï¼Œä¼ ç»™å‡½æ•° return 0;&#125;\n\n4.äºŒçº§æŒ‡é’ˆä¼ å‚\nä»€ä¹ˆæ˜¯äºŒçº§æŒ‡é’ˆï¼ŸğŸ‘‰ç‚¹æˆ‘\n\nä»¥ä¸‹æ˜¯äºŒçº§æŒ‡é’ˆä¼ å‚çš„åŸºæœ¬å½¢å¼\nppæ˜¯int**ç±»å‹ï¼Œè€Œ&amp;pæ˜¯æŒ‡é’ˆå˜é‡çš„åœ°å€ï¼Œè¦ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶\n#include &lt;stdio.h&gt;void test(int** ptr)&#123; \tprintf(&quot;num = %d\\n&quot;, **ptr); &#125;int main()&#123; \tint n = 10; \tint*p = &amp;n; \tint **pp = &amp;p;\ttest(pp);\ttest(&amp;p);\treturn 0;&#125;\n\nå†æ¥çœ‹å¦‚ä¸‹ä»£ç \n&amp;pã€ppã€arrè¿™ä¸‰ä¸ªå‚æ•°çš„ç±»å‹éƒ½æ˜¯äºŒçº§æŒ‡é’ˆ\ntestå‡½æ•°é‡Œé¢è¦ç”¨char**æ¥æ¥æ”¶\nvoid test(char** p)&#123;&#125;int main()&#123;\tchar ch = &#x27;w&#x27;;\tchar* p = &amp;ch;\tchar** pp = &amp;p;\tchar* arr[5];\ttest(&amp;p);\ttest(pp);\ttest(arr);\t\treturn 0;&#125;\n\narræ˜¯æŒ‡é’ˆæ•°ç»„çš„æ•°ç»„åï¼Œæ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\næ•°ç»„çš„é¦–å…ƒç´ æ˜¯char*ç±»å‹ï¼Œæ‰€ä»¥è¦ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶\n\n5.å¦‚ä½•åˆ¤æ–­å‚æ•°ç±»å‹å¦‚æœæˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œä¸ç¼ºå®šåº”è¯¥ç”¨ä»€ä¹ˆç±»å‹æ¥æ¥æ”¶çš„æ—¶å€™\nå¯ä»¥å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼ŒVSç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œç±»å‹ä¸ä¸€è‡´â€\n\n\nç»“è¯­ä¼ å‚é—®é¢˜å¹¶ä¸ç®—éå¸¸éš¾ï¼Œä½†æˆ‘ä»¬ä»è¦ç†Ÿç»ƒæŒæ¡\nè¿™æ ·æ‰èƒ½é¿å…åœ¨å†™è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™å‡ºç°å‚æ•°ç±»å‹ä¸åŒçš„bugï¼\n\nç«™ç¨³äº†ï¼Œé©¬ä¸Šé©¶å¾€ä¸‹ä¸€ç«™ğŸšŒï¼šå‡½æ•°æŒ‡é’ˆ\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬äº”ç«™ï¼Œå‡½æ•°æŒ‡é’ˆ","url":"/2022/01/24/note_c/37%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/","content":"[TOC]\n\næŒ‡é’ˆè¿›é˜¶ç¬¬äº”ç«™ğŸšï¼šå‡½æ•°æŒ‡é’ˆ\nç‚¹è¿›æˆ‘çš„ä¸»é¡µï¼Œå¯ä»¥å›é¡¾å‰å››ç«™çš„å†…å®¹å“¦~\n\n1å‡½æ•°æŒ‡é’ˆå‡½æ•°ä¹Ÿæœ‰è‡ªå·±çš„åœ°å€ï¼Œå‡½æ•°å&#x2F;&amp;å‡½æ•°å å°±æ˜¯å‡½æ•°çš„åœ°å€\n \n1.1åŸºæœ¬å½¢å¼åœ¨æ•°ç»„æŒ‡é’ˆçš„å­¦ä¹ ä¸­æˆ‘ä»¬äº†è§£åˆ°\nint arr[5];int (*pa)[5] = &amp;arr;//paæ˜¯æ•°ç»„æŒ‡é’ˆ\n\n\næŒ‡é’ˆå˜é‡paçš„ç±»å‹æ˜¯int(*)[5]\n\né‚£ä¹ˆå‡½æ•°æŒ‡é’ˆçš„å½¢å¼æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ\nvoid test(char* str)&#123;&#125;int main()&#123;\tvoid (*pt)(char*) = test;    //ptæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\treturn 0;&#125;\n\n\nptçš„ç±»å‹æ˜¯void (*)(char*)\n\nä¸‹é¢å“ªä¸ªä»£ç æœ‰èƒ½åŠ›å­˜æ”¾å‡½æ•°çš„åœ°å€å‘¢ï¼Ÿ\nvoid (*pfun1)();void *pfun2();\n\nç­”ï¼špfun1å¯ä»¥å­˜æ”¾\n\n\npfun1å…ˆå’Œ*ç»“åˆï¼Œè¯´æ˜pfun1æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‡å‘çš„å‡½æ•°æ—  å‚æ•°ï¼Œè¿”å›å€¼ç±»å‹ä¸ºvoid\n\npfun2å…ˆå’Œ()ç»“åˆï¼Œåˆ¤æ–­ä¸ºä¸€ä¸ªè¿”å›å€¼ä¸ºint*ç±»å‹çš„å‡½æ•°\n\n\n\né‚£ä¹ˆï¼Œå¦‚ä½•ä¹¦å†™ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå‘¢ï¼Ÿ\nint Add(int x, int y)&#123;\treturn x + y;&#125;\n\nä»¥Addå‡½æ•°ä¸ºä¾‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªintç±»å‹çš„å½¢å‚ï¼Œè¿”å›ç±»å‹æ˜¯int\næ‰€å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆå°±æ˜¯int(*)(int,int)ç±»å‹\nint (*pf)(int, int) = Add;\n\nä¾æ®ä»¥ä¸‹å‡ æ­¥å°±èƒ½æ­£ç¡®å†™å‡ºå‡½æ•°æŒ‡é’ˆ\n\nç¡®å®šå‡½æ•°çš„è¿”å›ç±»å‹\n\nç¡®å®šå‡½æ•°çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°\n\næŠŠå‡½æ•°å‚æ•°ç±»å‹é‡Œçš„å˜é‡åå»æ‰ï¼Œæ”¾å…¥æ‹¬å·é‡Œ\n(int x,int y)å»æ‰xã€yï¼Œå³(int,int)\n\nåœ¨å‰é¢åŠ ä¸Šå‡½æ•°çš„è¿”å›ç±»å‹\n\næœ€ååŠ ä¸Š(*)ï¼Œä»¥åŠå‡½æ•°æŒ‡é’ˆå˜é‡å\n\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ(*pf)çš„æ‹¬å·ä¸èƒ½çœç•¥ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nå»æ‰æ‹¬å·ä¹‹åå°±ç›¸å½“äºå‡½æ•°å£°æ˜ï¼Œæ— æ³•èµ‹å€¼\n\n\n1.2ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå\nå°±å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®åŸå‡½æ•°\nè¿™æ—¶å€™(*pf)å…¶å®å°±ç›¸å½“äºmy_test\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨ä¸Šé¢æåˆ°è¿‡çš„Addå‡½æ•°\nint Add(int x, int y)&#123;\treturn x + y;&#125;int main()&#123;\tint (* pf)(int, int) = Add;\tint sum = (*pf)(2,3);\tint sum1 = pf(2, 3);\tint sum2 = Add(2, 3);\tprintf(&quot;%d\\n&quot;, sum);\tprintf(&quot;%d\\n&quot;, sum1);\tprintf(&quot;%d\\n&quot;, sum2);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œsumå’Œsum1ä¸¤ç§å½¢å¼éƒ½æ­£ç¡®è°ƒç”¨äº†è¯¥å‡½æ•°\n\nå› ä¸ºæˆ‘ä»¬å·²ç»æŠŠAddçš„åœ°å€è½¬ç»™äº†pfæŒ‡é’ˆï¼Œå‡½æ•°åAddå’ŒæŒ‡é’ˆpfå®é™…ä¸Šæ˜¯ç­‰ä»·çš„\næ‰€ä»¥åœ¨ä½¿ç”¨å‡½æ•°æŒ‡é’ˆçš„æ—¶å€™ï¼Œå¯ä»¥ä¸å¸¦*ä½¿ç”¨ã€‚ä½†æ˜¯å¸¦*çš„æ—¶å€™ä¸€å®šè¦åŠ æ‹¬å·ï¼\n1.3ä¸¤ä¸ªå¥‡è‘©çš„ä»£ç å¥‡è‘©ä»£ç 1(*(void (*)())0)();\n\n\nè¿™é‡Œçš„0ä»…ä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™å¹¶ä¸èƒ½è®¿é—®0çš„åœ°å€\n\nçœ‹åˆ°è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æ‡µï¼Ÿ\nåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ¥æ…¢æ…¢åˆ†æä¸€æ³¢ï¼\n\nå¥‡è‘©ä»£ç 2void (*signal(int , void(*)(int)))(int);\n\n\nè¯´äººè¯å°±æ˜¯ï¼Œsignalå‡½æ•°å†…ä¼ å…¥äº†ä¸€ä¸ªvoid(*)(int)çš„å‡½æ•°æŒ‡é’ˆï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªvoid(*)(int)çš„å‡½æ•°æŒ‡é’ˆï¼\nvoid fun(int num)&#123;\tprintf(&quot;fun--&gt;%d\\n&quot;, num);&#125;void ( *signal( int, void(*)(int) ) )(int);int main()&#123;\tvoid(*pf)(int);//å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\tpf = signal(100, fun);    //ä¸ºsignalå‡½æ•°ä¼ å‚ï¼Œå¹¶ç”¨pfæŒ‡é’ˆæ¥æ”¶\treturn 0;&#125;\n\nâ€œè¿™ä¸ªä»£ç 2æ˜¯çœŸçš„å¥‡è‘©ï¼Œå°±æ²¡æœ‰ä»€ä¹ˆåŠæ³•æŠŠä»–å˜æˆäººè¯å—ï¼Ÿ(ç®€åŒ–ä¸€ä¸‹)â€\nå½“ç„¶æœ‰ï¼é‚£å°±æ˜¯ç”¨typedefå‡½æ•°æ¥ç»™void(*)(int)æŒ‡é’ˆèµ·ä¸€ä¸ªæ–°åå­—ï¼\ntypedef void(*pf_t)(int);//æŠŠvoid(*)(int)å‘½åä¸ºpf_t\n\nvoid(*p)(int);//pæ˜¯å‡½æ•°æŒ‡é’ˆå˜é‡çš„åå­—typedef void(*pf_t)(int);//pf_tæ˜¯ä¸€ä¸ªæ–°çš„ç±»å‹å\n\nè¿™æ ·æˆ‘ä»¬çš„ä»£ç å°±èƒ½å¾—åˆ°ç®€åŒ–\nvoid ( *signal( int, void(*)(int) ) )(int);//æºä»£ç //ç®€åŒ–åpf_t siganal(int,pf_t);\n\nè¿™æ ·æ˜¯ä¸æ˜¯å°±æ›´å®¹æ˜“åˆ†è¾¨äº†ï¼Ÿ\n\n2å‡½æ•°æŒ‡é’ˆæ•°ç»„2.1åŸºæœ¬å½¢å¼æ—¢ç„¶å‡½æ•°æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨æŒ‡é’ˆæ•°ç»„æ¥å­˜æ”¾å®ƒ\n\nå‰æï¼šè¿™äº›å‡½æ•°çš„å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ä¸€è‡´\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;//å‡½æ•°æŒ‡é’ˆæ•°ç»„int (*pfArr[4])(int, int) = &#123;Add, Sub, Mul, Div&#125;;\n\nç›¸æ¯”äºåˆ†å¼€å†™å¤šæ¬¡å‡½æ•°è°ƒç”¨\n//å¤šæ¬¡å‡½æ•°è°ƒç”¨int (*pf1)(int,int) = Add;int (*pf2)(int, int) = Sub;int (*pf3)(int, int) = Mul;int (*pf4)(int, int) = Div;\n\nå‡½æ•°æŒ‡é’ˆæ•°ç»„å¯ä»¥è®©æˆ‘ä»¬ä»¥ä½¿ç”¨æ•°ç»„çš„å½¢å¼æ¥è®¿é—®æ¯ä¸ªå‡½æ•°\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;int main()&#123;\tint (*pfArr[4])(int, int) = &#123;Add, Sub, Mul, Div&#125;;//å‡½æ•°æŒ‡é’ˆæ•°ç»„\tint i = 0;\tfor (i = 0; i &lt; 4; i++)\t&#123;\t\t//int ret = (*pfArr[i])(8, 4);\t\tint ret = pfArr[i](8, 4);\t\tprintf(&quot;%d\\n&quot;, ret);\t&#125;\treturn 0;&#125;\n\nè¿™æ ·ä¹Ÿç®€åŒ–äº†æˆ‘ä»¬çš„ä»£ç \n2.2è®¡ç®—å™¨å®ç°2.2.1switchè¯­å¥\nç›®çš„ï¼šå®ç°ä¸€ä¸ªè®¡ç®—å™¨\nèœå•ï¼šç”¨æ•°å­—æ¥é€‰æ‹©è¿ç®—ç±»å‹\næ–¹æ³•ï¼šä»¥switch&#x2F;caseè¯­å¥æ¥å®ç°å‡½æ•°è°ƒç”¨\nç»“æŸï¼šç”¨do&#x2F;whileå®ç°å¤šç»„è¾“å…¥ï¼Œä»¥åŠç»“æŸç¨‹åº\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;void menu()&#123;\tprintf(&quot;**********************************\\n&quot;);\tprintf(&quot;*****  1. add     2. sub     *****\\n&quot;);\tprintf(&quot;*****  3. mul     4. div     *****\\n&quot;);\tprintf(&quot;*****  0. exit               *****\\n&quot;);\tprintf(&quot;**********************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Add(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 2:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Sub(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 3:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Mul(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 4:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Div(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\nè¿™ç§æ–¹å¼éœ€è¦å†™éå¸¸å¤šçš„é‡å¤ä»£ç ï¼Œè€Œä¸”ä»£ç é•¿åº¦å¾ˆé•¿ğŸ˜µ\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå¯¹å®ƒè¿›è¡Œä¼˜åŒ–\n\n2.2.2å‡½æ•°æŒ‡é’ˆå½¢å¼int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tint (*pfArr[5])(int, int) = &#123;0, Add, Sub, Mul, Div&#125;;    //pfArræ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ï¼Œä¹Ÿå«è½¬ç§»è¡¨\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tif (input == 0)\t\t&#123;\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\t&#125;\t\telse if (input &gt;= 1 &amp;&amp; input &lt;= 4)\t\t&#123;\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = pfArr[input](x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\nè¿™æ ·å°±é¿å…äº†æˆ‘ä»¬åœ¨æ¯ä¸ªcaseè¯­å¥é‡Œéƒ½å†™ä¸Šè¾“å…¥æç¤ºã€scanfå’Œä¸åŒçš„å‡½æ•°è°ƒç”¨æ‰€å¯¼è‡´çš„ä»£ç å†—ä½™äº†\nè¿è¡Œè¯•è¯•å§ï¼\n\n2.3æŒ‡å‘å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆå‡½æ•°æŒ‡é’ˆæ•°ç»„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å¯ä»¥ç”¨æ•°ç»„æŒ‡é’ˆæ¥å­˜æ”¾åœ°å€\n\næŒ‡å‘å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆï¼šæ˜¯ä¸€ä¸ªæŒ‡é’ˆ\nè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int main()&#123;\tint (*pa)(int, int) = Add;//å‡½æ•°æŒ‡é’ˆ\tint (* pfA[4])(int, int);//å‡½æ•°æŒ‡é’ˆçš„æ•°ç»„\tint (* (*ppfA)[4])(int, int) = &amp;pfA;    //ppfA æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªå­˜æ”¾å‡½æ•°æŒ‡é’ˆçš„æ•°ç»„\treturn 0;&#125;\n\n\n3.ç›¸å…³ç»ƒä¹ é¢˜\nå®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å‡½æ•°æœ‰ä¸¤ä¸ªintå½¢å‚å¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿”å›çš„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæœ‰ä¸€ä¸ªintå½¢å‚ä¸”è¿”å›intçš„å‡½æ•°ï¼Ÿä¸‹é¢å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Ÿ\n&gt;A. int (*(*F)(int, int))(int)&gt;B. int (*F)(int, int)&gt;C. int (*(*F)(int, int))&gt;D. *(*F)(int, int)(int)\n\nä¸€æ­¥æ­¥åˆ†æé¢˜ç›®çš„è¦æ±‚\n\nè¯¥å‡½æ•°æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°æœ‰ä¸¤ä¸ªintç±»å‹ï¼Œå³(int,int)ï¼ŒABCDéƒ½æœ‰ï¼Œæ— æ³•æ’é™¤\n\nä»”ç»†çœ‹çœ‹ï¼ŒDçš„ç±»å‹æ²¡æœ‰å†™å…¨ï¼Œç›´æ¥æ’é™¤\n\nè¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæœ‰ä¸€ä¸ªintå½¢å‚ä¸”è¿”å›intçš„å‡½æ•°\nBæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿”å›ç±»å‹æ˜¯intï¼Œé”™è¯¯\nCçš„è¿”å›å€¼æ˜¯int*ç±»å‹ï¼Œé”™è¯¯\n\nAé€‰é¡¹å»æ‰å‡½æ•°æŒ‡é’ˆFåï¼Œå‰©ä¸‹int (*)(int)ï¼Œç¬¦åˆé¢˜æ„\n\n\n\nç»“è¯­å‡½æ•°æŒ‡é’ˆçš„çŸ¥è¯†ç‚¹æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°ğŸ§\nä½ å­¦åºŸäº†å—ï¼ŸğŸ˜‚\n\nä¸‹ä¸€ç«™ğŸšƒï¼šå›è°ƒå‡½æ•°\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç»ˆç‚¹ç«™ï¼Œå›è°ƒå‡½æ•°å’Œqsort","url":"/2022/01/24/note_c/38%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E5%92%8Cqsort/","content":"[TOC]\n\nå˜Ÿå˜Ÿå˜Ÿï¼ŒæŒ‡é’ˆè¿›é˜¶çš„å…¬äº¤è½¦åˆ°ç»ˆç‚¹ç«™ğŸšå•¦ï¼\nè¿™ä¸€ç«™æˆ‘ä»¬å°†å­¦ä¹ å›è°ƒå‡½æ•°ã€qsortçš„ä½¿ç”¨ä»¥åŠæ¨¡æ‹Ÿå®ç°\n\n1.å›è°ƒå‡½æ•°\nå®šä¹‰ï¼š\nå›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™æ˜¯å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥ å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ– æ¡ä»¶è¿›è¡Œå“åº”ã€‚\n\nåœ¨ä¸Šç¯‡åšå®¢å‡½æ•°æŒ‡é’ˆæ•°ç»„é‡Œï¼Œæåˆ°äº†ä¸€ä¸ªè®¡ç®—å™¨çš„ä»£ç \nåœ¨è¿™é‡Œå°±èƒ½ç”¨åˆ°æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ï¼Œé€šè¿‡ä¸€ä¸ªæ–°çš„calcå‡½æ•°æ¥è°ƒç”¨è®¡ç®—å‡½æ•°ï¼ŒåŒæ ·è¾¾åˆ°äº†é¿å…switch&#x2F;caseè¯­å¥é‡å¤çš„ç›®çš„\n\nä¸è¿‡ä»Šå¤©æˆ‘ä»¬çš„å­¦ä¹ é‡ç‚¹çš„å†…å®¹ä¸åœ¨è¿™é‡Œï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„å‡½æ•°ï¼šqsort\n\n2.qsortå‡½æ•°qsortå‡½æ•°åˆç§° å¿«é€Ÿæ’åºå‡½æ•°\n2.1void*æŒ‡é’ˆvoid* p = &amp;a;\n\n\nvoid* æ˜¯ä¸€ç§æ— ç±»å‹çš„æŒ‡é’ˆï¼Œæ— å…·ä½“ç±»å‹çš„æŒ‡é’ˆ\nvoid* çš„æŒ‡é’ˆå˜é‡å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„åœ°å€\nvoid* çš„æŒ‡é’ˆä¸èƒ½ç›´æ¥è¿›è¡Œè§£å¼•ç”¨æ“ä½œ\nvoid* çš„æŒ‡é’ˆä¸èƒ½ç›´æ¥è¿›è¡ŒåŠ å‡æ•´æ•°\n\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹qsortå‡½æ•°çš„å®šä¹‰\n2.2qsortå‡½æ•°å®šä¹‰\nvoid qsort (void* base, size_t num, size_t size,            int (*compar)(const void*,const void*));\n\nè¿™äº›å‚æ•°åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\n\nvoid*base æ˜¯å¾…æ’åºæ•°æ®çš„èµ·å§‹åœ°å€\n\nsize_t num æ˜¯å¾…æ’åºæ•°æ®çš„ä¸ªæ•°\n\nsize_t size æ˜¯å¾…æ’åºæ•°æ®ä¸­æ¯ä¸ªæ•°æ®çš„å¤§å°\n\nsiez_tæ˜¯ä¸“ä¸ºsizeofå‡½æ•°çš„è¿”å›å€¼è®¾è®¡çš„\nå®ƒæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´å‹\n\n\n\n\n\nint (*compar)(const void*,const void*)æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\nè¯¥å‡½æ•°çš„å‚æ•°ä¸º(const void*,const void*)ï¼Œè¿”å›å€¼ä¸ºint\n\nåœ¨qsortçš„åº”ç”¨ä¸­ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç¼–å†™è¿™æ ·ä¸€ä¸ªcomparå‡½æ•°ï¼Œæ¥åˆ¤æ–­å¾…æ’åºæ•°æ®è°å¤§è°å°\nqsortåº“å‡½æ•°å¯¹comparå‡½æ•°åšå‡ºäº†å¦‚ä¸‹è§„å®šï¼š\n\np1&gt;p2æ—¶ è¿”å›&gt;0çš„æ•°\np1&#x3D;p2æ—¶ è¿”å›0\np1&lt;p2æ—¶ è¿”å›&lt;0çš„æ•°\n\n\n\n\n\nä¸ºä»€ä¹ˆæ¯”è¾ƒå‡½æ•°ç”¨çš„void*ç±»å‹çš„æŒ‡é’ˆ?\n\nå› ä¸ºqsortå‡½æ•°å¹¶ä¸çŸ¥é“ä½ éœ€è¦æ’åºä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯ä½œä¸ºä½¿ç”¨è€…ï¼Œæˆ‘ä»¬çŸ¥é“å¾…æ’åºçš„æ•°æ®ç±»å‹ä»¥åŠå¦‚ä½•æ¯”è¾ƒå¾…æ’åºçš„æ•°æ®ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å°†void*æŒ‡é’ˆå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå˜ä¸ºæ‰€éœ€è¦çš„æŒ‡é’ˆï¼\n\n\n2.3åˆ©ç”¨qsortå‡½æ•°æ¥æ’åºint&#x2F;charé¦–å…ˆæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå¾…æ’åºçš„æ•´å‹æ•°ç»„ï¼Œä¾ç…§qsortå‡½æ•°çš„å®šä¹‰ï¼Œå°†å‚æ•°å¡«å…¥è¯¥å‡½æ•°\nint main()&#123;\tint arr[10] = &#123; 3,4,7,9,0,1,2,5,8,6 &#125;;\tint sz = sizeof(arr) / sizeof(arr[0]);\tint* ptr = arr;//æ­¤å¤„å¯ä»¥ç›´æ¥ç”¨arræ¥ä»£æ›¿\tqsort(ptr, sz, sizeof(arr[0]), cmp_int);        return 0;&#125;\n\næ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦æ¥ç¼–å†™è¿™ä¸ªcmp_intå‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ä¸¤ä¸ªæ•´å‹çš„å¤§å°\nç„¶åæŠŠè¿™ä¸ªå‡½æ•°åå†™å…¥qsort\n//ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒæ•´å‹int cmp_int(const void* e1, const void* e2)&#123;\treturn *(int*)e1 - *(int*)e2;&#125;\n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»æŒ‰ç…§å‡åºé‡æ–°æ’åºäº†ï¼\n\nå¦‚æœä½ æƒ³é™åºæ’åºï¼Œåªéœ€è¦å°†æ¯”è¾ƒå‡½æ•°å‚æ•°é‡Œçš„e1å’Œe2å¯¹è°ƒä½ç½®\n\n\nå†æ¥è¯•è¯•æ’åºcharå­—ç¬¦ç±»å‹å§ï¼\n//æ¯”è¾ƒå­—ç¬¦int cmp_char(const void* e1, const void* e2)&#123;\tchar a = *(char*)e1;\tchar b = *(char*)e2;\tif (a == b)\t\treturn 0;\telse if (a &gt; b)\t\treturn 1;\telse\t\treturn -1;&#125;int main()&#123;\tchar arr1[5] = &#123; &#x27;d&#x27;,&#x27;i&#x27;,&#x27;a&#x27;,&#x27;c&#x27;,&#x27;k&#x27;&#125;;\tint sz1 = sizeof(arr1) / sizeof(arr1[0]);\tint* pc = arr1;\tqsort(pc, sz1, sizeof(arr1[0]), cmp_char);\tfor(int i = 0; i &lt; sz1; i++)\t&#123;\t\tprintf(&quot;%c &quot;, arr1[i]);\t&#125;\tprintf(&quot;\\n&quot;);\treturn 0;&#125;\n\n\n2.4ç”¨qsortæ’åºç»“æ„ä½“å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå†…å®¹åˆ†åˆ«ä»£è¡¨å§“åã€å¹´é¾„ã€æˆç»©\nstruct Stu&#123;\tchar name[20];\tint age;\tfloat score;&#125;;\n\nè¯¥ç»“æ„ä½“æœ‰charã€intã€floatä¸‰ç§ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦æˆ‘ä»¬å†™ä¸‰ç§å¯¹åº”çš„æ’åºå‡½æ•°\n//æ’åºæˆç»©int cmp_stu_by_socre(const void* e1, const void* e2)&#123;\tif (((struct Stu*)e1)-&gt;score &gt; ((struct Stu*)e2)-&gt;score)\t&#123;\t\treturn 1;\t&#125;\telse if (((struct Stu*)e1)-&gt;score &lt; ((struct Stu*)e2)-&gt;score)\t&#123;\t\treturn -1;\t&#125;\telse\t&#123;\t\treturn 0;\t&#125;&#125;//æŒ‰å¹´é¾„æ’åºint cmp_stu_by_age(const void* e1, const void* e2)&#123;\treturn ((struct Stu*)e1)-&gt;age - ((struct Stu*)e2)-&gt;age;&#125;//æŒ‰åå­—æ’åºint cmp_stu_by_name(const void* e1, const void* e2)&#123;   //ç”¨strcmpå‡½æ•°æ¯”è¾ƒå­—ç¬¦ä¸²\treturn strcmp(((struct Stu*)e1)-&gt;name, ((struct Stu*)e2)-&gt;name);&#125;\n\nå†å†™ä¸€ä¸ªå‡½æ•°æ¥æ‰“å°ç»“æ„ä½“å˜é‡\nvoid print_stu(struct Stu arr[], int sz)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tprintf(&quot;%s %d %.2f\\n&quot;, arr[i].name, arr[i].age, arr[i].score);\t&#125;\tprintf(&quot;\\n&quot;);&#125;\n\næœ€ååœ¨ä¸»å‡½æ•°é‡Œå®šä¹‰ç»“æ„ä½“ç±»å‹å¹¶å†™å…¥qsortå‡½æ•°\nint main()&#123;\tstruct Stu arr[] = &#123; &#123;&quot;zhangsan&quot;,20,87.5f&#125;,&#123;&quot;lisi&quot;,22,99.0f&#125;,&#123;&quot;wangwu&quot;, 10, 68.5f&#125;,&#123;&quot;niuyeye&quot;,30,95.0f&#125; &#125;;\tint sz = sizeof(arr) / sizeof(arr[0]);\tqsort(arr, sz, sizeof(arr[0]), cmp_stu_by_name);\tprint_stu(arr,sz);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å·²ç»æŒ‰ç…§å§“åæ’åºäº†ï¼\n\n\n3.æ¨¡æ‹Ÿå®ç°qsortå‡½æ•°é‚£ä¹ˆï¼Œqsortå‡½æ•°çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nä¹‹å‰æˆ‘ä»¬å†™è¿‡ç”¨äºæ’åºæ•´å‹çš„å†’æ³¡æ’åº\nå…¶åŸç†æ˜¯æ¯”è¾ƒæ•°ç»„å†…çš„aå…ƒç´ ä»¥åŠaçš„ä¸‹ä¸€ä½å…ƒç´ ï¼Œå¦‚æœaå¤§äºa+1çš„å…ƒç´ ï¼Œåˆ™å°†å®ƒä»¬äº’æ¢ä½ç½®\nvoid bubble_sort(int arr[], int sz)//å½¢å‚arræœ¬è´¨æ˜¯æŒ‡é’ˆ&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\t//ä¸€è¶Ÿå†’æ³¡æ’åº\t\tint j = 0;\t\tfor (j = 0; j &lt; sz - 1 - i; j++)\t\t&#123;\t\t\tif (arr[j] &gt; arr[j + 1] )\t\t\t&#123;\t\t\t\t//äº¤æ¢\t\t\t\tint tmp = arr[j];\t\t\t\tarr[j] = arr[j + 1];\t\t\t\tarr[j + 1] = tmp;\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\næœ‰æ²¡æœ‰åŠæ³•å°†å†’æ³¡æ’åºç»™æ”¹å†™æˆé€šç”¨çš„æ’åºå‡½æ•°å‘¢ï¼Ÿ\næ€è€ƒï¼š\n\nå†’æ³¡æ’åºçš„æ—¶å€™ï¼Œä½¿ç”¨æ˜¯intç±»å‹ï¼Œintç±»å‹æ˜¯4ä¸ªå­—èŠ‚ï¼Œæ— æ³•æ’åºæ¯”4ä¸ªå­—èŠ‚å°çš„æ•°æ®ç±»å‹\nç»“æ„ä½“ç±»å‹çš„å¤§å°ä¸ä¸€å®šæ˜¯4çš„æ•´æ•°å€ï¼Œä¹Ÿæ— æ³•ç”¨intæ¥æ’åº\ncharç±»å‹æ˜¯1ä¸ªå­—èŠ‚ï¼Œèƒ½å¦é€šè¿‡charç±»å‹æ¥æ›´æ”¹æ‰€æœ‰ç±»å‹ï¼Ÿ\n\nç­”æ¡ˆå½“ç„¶æ˜¯è‚¯å®šçš„ï¼\nåœ¨ä¹‹å‰çš„æŒ‡é’ˆå­¦ä¹ é‡Œï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œå°½ç®¡char*å’Œint*ç±»å‹çš„æŒ‡é’ˆéƒ½å 4ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯char*ç±»å‹åªèƒ½è®¿é—®1ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨char*æŒ‡é’ˆçš„è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„äº¤æ¢ï¼Œäº¤æ¢4æ¬¡ä¸å°±èƒ½äº¤æ¢å®Œä¸€ä¸ªintç±»å‹äº†å—ï¼ŸåŒç†ä¹Ÿèƒ½é€šè¿‡char*çš„å¤šæ¬¡è®¿é—®ï¼Œäº¤æ¢å…¶ä»–ç±»å‹çš„æ•°æ®ï¼\n\næ—¢ç„¶æ˜¯æ¨¡æ‹Ÿå®ç°qsortå‡½æ•°ï¼Œé‚£å‡½æ•°çš„å‚æ•°åº”è¯¥å’Œqsortç›¸åŒ\nç›´æ¥æŠŠqsortå‡½æ•°æ”¹æˆmy_qsortï¼Œå¼€æ•´ï¼\n\nåˆ©ç”¨å†’æ³¡æ’åºçš„åŸºæœ¬æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä»¥ä¸‹çš„ä»£ç \n//æ¨¡æ‹Ÿå®ç°qsortvoid my_qsort(void* base, int sz,int width, int(*cmp)(const void* e1, const void* e2))&#123;\tfor (int i = 0; i &lt; sz - 1; i++)\t&#123;\t\tfor (int j = 0; j &lt; sz - i - 1; j++)\t\t&#123;\t\t\tif (cmp((char*)base + j * width , (char*)base + (j + 1) * width)&gt;0)\t\t\t&#123;\t\t\t\tmy_swap((char*)base + j * width, (char*)base + (j+1) * width ,width);\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\nä½ å¯èƒ½å¯¹ifé‡Œé¢çš„è¯­å¥æ„Ÿåˆ°å¾ˆæ‡µï¼Œåˆ«æ€¥ï¼Œçœ‹å›¾ï¼\n\ncmpå°±æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåˆ©ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨æ¯”è¾ƒå‡½æ•°\n\n\nå†æ¥å†™ä¸€ä¸ªswapå‡½æ•°ï¼Œå®ç°å­—èŠ‚çš„äº¤æ¢\n//ç”¨charç±»å‹çš„æŒ‡é’ˆæ¥ä¸€ä¸ªä¸€ä¸ªåœ°è®¿é—®void my_swap(char* e1, char* e2,int sz)&#123;        //szæ˜¯å¾…æ’åºæ•°æ®çš„å®½åº¦:width\tfor (int k = 0; k &lt; sz; k++)\t&#123;\t\tchar tmp = *e1;\t\t*e1 = *e2;\t\t*e2 = tmp;\t\te1++;\t\te2++;\t&#125;&#125;\n\næµ‹è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸæŒ‰ç…§æˆç»©æ¥æ’åºï¼\n\nç»“è¯­æŒ‡é’ˆè¿›é˜¶çš„è¡Œç¨‹åˆ°è¿™é‡Œå°±åœ†æ»¡ç»“æŸå•¦ï¼æ˜¯ä¸æ˜¯æ„Ÿè§‰æ”¶è·æ»¡æ»¡å‘¢ï¼Ÿ\n\nå­¦æœ‰ä½™åŠ›çš„æœ‹å‹ä»¬å¯ä»¥çœ‹çœ‹è¿™ä¸€ç±»æŒ‡é’ˆç¬”è¯•é¢˜ğŸ‘‰ç‚¹æˆ‘\n\nåˆ°ç«™ï¼Œä¸‹è½¦ï¼ğŸš\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¸ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°å’Œå†…å­˜å‡½æ•°","url":"/2022/01/25/note_c/39%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E5%92%8C%E5%86%85%E5%AD%98%E5%87%BD%E6%95%B0/","content":"[TOC]\nä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ–°çš„å­—ç¬¦ä¸²å‡½æ•°å’Œå†…å­˜å‡½æ•°ï¼Œäº†è§£å®ƒä»¬èƒŒåè¿è¡Œçš„åŸç†ï¼Œå¹¶å®Œæˆéƒ¨åˆ†å‡½æ•°çš„è‡ªæˆ‘å®ç°ğŸ˜˜\n1.å­—ç¬¦ä¸²å‡½æ•°1.1 strlenè¿™ä¸ªå‡½æ•°æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®¡ç®—å­—ç¬¦ä¸²çš„å¤§å°ï¼Œä»¥\\0ä½œä¸ºç»“å°¾\næ¨¡æ‹Ÿå®ç°å¦‚ä¸‹ï¼š\n//1.strlenæ¨¡æ‹Ÿå®ç°int my_strlen(char* p)&#123;\tassert(p);\tint count = 0;\twhile (*p)\t&#123;\t\tcount++;\t\tp++;\t&#125;\treturn count;&#125;int main()&#123;\tchar arr[] = &#123; &quot;abcdef&quot; &#125;;\tint sz = my_strlen(arr);\tprintf(&quot;sz=%d\\n&quot;, sz);\treturn 0;&#125;\n\nassertï¼šæ–­è¨€ï¼Œåº“å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºä¼šæŠ¥é”™\n\n1.2 strcpyè¯¥å‡½æ•°ç”¨äºæ‹·è´å­—ç¬¦ä¸²ï¼Œå°†arr2é‡Œçš„å†…å®¹æ‹·è´åˆ°arr1é‡Œ\nchar* strcpy(char * destination, const char * source );//æ—¥å¸¸ä½¿ç”¨strcpy(arr1,arr2);\n\nå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹\n\nCopies the C string pointed by source into the array pointed by destination, including the  terminating null character (and stopping at that point).\n\n\næºå­—ç¬¦ä¸²å¿…é¡»ä»¥ â€˜\\0â€™ ç»“æŸ\nä¼šå°†æºå­—ç¬¦ä¸²ä¸­çš„ â€˜\\0â€™ æ‹·è´åˆ°ç›®æ ‡ç©ºé—´ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥ç¡®ä¿èƒ½å­˜æ”¾æºå­—ç¬¦ä¸²ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»å¯ä¿®æ”¹\n\nå¦‚æœæºå­—ç¬¦ä¸²é‡Œæ²¡æœ‰\\0ï¼Œè¯¥å‡½æ•°å°±æ— æ³•æ­£ç¡®è¿›è¡Œæ‹·è´\n\nstrcpyæ‹·è´çš„æ—¶å€™æ˜¯å¤åˆ¶è€Œä¸æ˜¯å‰ªè´´ï¼Œæºç©ºé—´é‡Œçš„å†…å®¹ä¸ä¼šæ¶ˆå¤±\n\nä»¥ä¸‹æ¨¡æ‹Ÿå®ç°\néœ€è¦æ³¨æ„çš„å°±æ˜¯strcpyä¼šå°†æºå­—ç¬¦ä¸²çš„â€™\\0â€™ä¸€å¹¶æ‹·è´ï¼Œæ‰€ä»¥åœ¨ç¼–å†™åˆ¤æ–­æ¡ä»¶çš„æ—¶å€™å°±è¦è€ƒè™‘åˆ°è¿™ä¸ªæƒ…å†µ\n//2.strcpyæ¨¡æ‹Ÿå®ç°ï¼Œæ‹·è´char* my_strcpy(char* a2, const char* a1)&#123;\tchar* dest = a2;\tassert(a1 &amp;&amp; a2);\tdo\t&#123;\t\t*a2++ = *a1;\t&#125; while (*a1++);\treturn dest;&#125;int main()&#123;\tchar arr1[] = &#123; &quot;abcdef&quot; &#125;;\tchar arr2[15]=&quot;xxxxxxxxx&quot;;\tmy_strcpy(arr2, arr1);\tputs(arr2);\treturn 0;&#125;\n\n\n1.3 strcatstrcatå‡½æ•°ç”¨äºè¿½åŠ å­—ç¬¦ä¸²ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²æ¥åœ¨ä¸€èµ·\nå…¶å‡½æ•°è¿”å›å€¼ä¸ºdest\nchar * strcat ( char * destination, const char * source );//ä»¥ä¸‹æ˜¯ä½¿ç”¨char arr1[10] = &quot;hello&quot;;char arr2[] = &quot;bit&quot;;strcat(arr1,arr2);puts(arr1);//ç»“æœä¸º&quot;hellobit&quot;\n\n\næºå­—ç¬¦ä¸²å¿…é¡»ä»¥ â€˜\\0â€™ ç»“æŸã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»æœ‰è¶³å¤Ÿçš„å¤§ï¼Œèƒ½å®¹çº³ä¸‹æºå­—ç¬¦ä¸²çš„å†…å®¹ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»å¯ä¿®æ”¹ã€‚\n\næ³¨æ„ï¼Œä½¿ç”¨strcatå‡½æ•°çš„æ—¶å€™ä¸èƒ½è‡ªå·±è¿½åŠ è‡ªå·±ï¼Œç¨‹åºä¼šæ­»å¾ªç¯\n\nä»¥ä¸‹æ˜¯æ¨¡æ‹Ÿå®ç°\n\nå…ˆè®©destæ‰¾åˆ°ç›®çš„åœ°å­—ç¬¦ä¸²é‡Œçš„\\0\nç„¶åè¿›è¡Œè¿½åŠ ï¼Œæ³¨æ„æºå­—ç¬¦ä¸²é‡Œçš„\\0åŒæ ·ä¼šè¢«è¿½åŠ è¿‡å»\n\n//3,strcatå‡½æ•°char* my_strcat(char* dest, const char* sour)&#123;\tassert(dest &amp;&amp; sour);\tchar* ptr = dest;\twhile (*dest)\t&#123;\t\tdest++;\t&#125;\tdo\t&#123;\t\t*dest++ = *sour;\t&#125; while (*sour++);\treturn ptr;&#125;int main()&#123;\tchar arr1[10] = &quot;hello&quot;;\tchar arr2[] = &quot;bit&quot;;\tmy_strcat(arr1, arr2);\tputs(arr1);\treturn 0;&#125;\n\n\n1.4 strcmpstrcmpæˆ‘ä»¬ä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²\nint strcmp ( const char * str1, const char * str2 );\n\nè¯¥å‡½æ•°åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°æ¯”è¾ƒçš„\n\n\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å¤§äº0çš„æ•°å­—\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ç­‰äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›0\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å°äº0çš„æ•°å­—\n\næ¨¡æ‹Ÿå®ç°\nåœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œå¦‚æœå­—ç¬¦ä¸²s1å¤§äºs2ï¼Œè¿”å›çš„æ˜¯1ã€‚è‹¥å°äºè¿”å›çš„æ˜¯-1ã€‚ä½†Cè¯­è¨€åªè¦æ±‚å¤§äºçš„æ—¶å€™è¿”å›å¤§äº0çš„æ•°å­—ï¼Œå°äºçš„æ—¶å€™è¿”å›å°äº0çš„æ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨å­—ç¬¦ç›¸å‡å¾—å‡ºè¿”å›å€¼\n//4.strcmpå‡½æ•°int my_strcmp(const char* str1, const char* str2)&#123;\tassert(str1 &amp;&amp; str2);\twhile(*str1 == *str2)\t&#123;\t\tif (*str1 == &#x27;\\0&#x27;)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t\tstr1++;\t\tstr2++;\t&#125;\treturn *str1 - *str2;&#125;int main()&#123;\tchar arr1[] = &#123; &quot;abcdef&quot; &#125;;\tchar arr2[] = &#123; &quot;abcd&quot; &#125;;\t\tprintf(&quot;%d\\n&quot;,my_strcmp(arr2, arr1));\treturn 0;&#125;\n\n\n1.5 strncpy&#x2F;cat&#x2F;cmpä»¥ä¸Š4ä¸ªåº“å‡½æ•°ï¼Œéƒ½å¯¹æ“ä½œæ•°æ²¡æœ‰è¦æ±‚ã€‚\nè€Œstrncpyã€strncatã€strncmpè¿™ä¸‰ä¸ªåº“å‡½æ•°ï¼Œå¯¹æ“ä½œæ•°æœ‰è¦æ±‚\n\nstrncmpï¼Œæœ€åä¸€ä¸ªå‚æ•°4ï¼Œä»£è¡¨åªå¯¹æ¯”å‰4ä¸ªå­—ç¬¦çš„å¤§å°\n\n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;\tchar arr1[] = &quot;abcwef&quot;;\tchar arr2[] = &quot;abcqqqqqq&quot;;\tint ret = strncmp(arr1, arr2, 4);\tprintf(&quot;%d\\n&quot;, ret);    return 0;&#125;\n\n\n\nstrncatï¼Œæœ€åä¸€ä¸ªå‚æ•°3ï¼Œä»£è¡¨åªè¿½åŠ å‰3ä¸ªå­—ç¬¦åˆ°ç›®çš„åœ°\nstrncpyï¼Œæœ€åä¸€ä¸ªå‚æ•°5ï¼Œä»£è¡¨åªæ‹·è´å‰5ä¸ªå­—ç¬¦åˆ°ç›®çš„åˆ°åº•\n\n\nè¿™ä¸‰ä¸ªå‡½æ•°çš„ç”¨æ³•éå¸¸ç®€å•ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼\n\n1.6 strstrconst char * strstr ( const char * str1, const char * str2 );      char * strstr (       char * str1, const char * str2 );\n\nè¿™ä¸ªå‡½æ•°å°±æ˜¯ç¬¬ä¸€æ¬¡è§äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å­—ç¬¦ä¸²s1é‡Œé¢æŸ¥æ‰¾æ˜¯å¦æœ‰å­—ç¬¦ä¸²s2\n\nå¦‚æœæœ‰ï¼Œè¿”å›å­—ç¬¦ä¸²s2åœ¨å­—ç¬¦ä¸²s1é‡Œçš„èµ·å§‹åœ°å€\nå¦‚æœæ²¡æœ‰ï¼Œè¿”å›NULL\n\n\næ¨¡æ‹Ÿå®ç°\nstrå‡½æ•°çš„æ¨¡æ‹Ÿå®ç°ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚\næœ€é‡è¦çš„å°±æ˜¯é‡åˆ°å¤šä¸ªå­—ç¬¦ç›¸åŒè€Œæœ€åä¸åŒçš„æƒ…å†µ\n\néœ€è¦ç”¨å¦å¤–ä¸€ä¸ªæŒ‡é’ˆCæ¥éå†å­—ç¬¦ä¸²ï¼Œæ‰¾å¯»Cå’Œptr2æ‰€æŒ‡å…ƒç´ ç›¸ç­‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦\nç„¶åç”¨ptr1æ¥å’Œptr2æ¯”è¾ƒï¼ŒCä¿æŒä¸å˜\nå¦‚æœåŒ¹é…æˆåŠŸï¼Œè¿”å›CæŒ‡é’ˆ\nå¦‚æœåŒ¹é…å¤±è´¥ï¼ŒC++åèµ‹å€¼ç»™ptr1ï¼Œç»§ç»­è¿›è¡ŒæŸ¥æ‰¾\n\n\n//5.strstr åˆ¤æ–­str1é‡Œé¢æœ‰æ²¡æœ‰str2//å¦‚æœæœ‰ï¼Œè¿”å›str1é‡Œstr2çš„èµ·å§‹åœ°å€//å¦‚æœstr1ä¸åŒ…å«str2ï¼Œè¿”å›nullchar* my_strstr(const char* str1, const char* str2)&#123;\tconst char* s1 = str1;\tconst char* s2 = str2;\tconst char* cur = str1;\tassert(str1 &amp;&amp; str2);\tif (*str2 == &#x27;\\0&#x27;)\t&#123;\t\treturn (char*)str1;\t&#125;\twhile (*cur)\t&#123;\t\ts1 = cur;\t\ts2 = str2;\t\twhile (*s1 &amp;&amp; *s2 &amp;&amp; *s1 == *s2)\t\t&#123;\t\t\ts1++;\t\t\ts2++;\t\t&#125;\t\tif (*s2 == &#x27;\\0&#x27;)\t\t\treturn (char*)cur;\t\tcur++;\t&#125;\treturn NULL;\t\t&#125;int main()&#123;\tchar arr1[15] = &#123; &quot;helloworld&quot; &#125;;\tchar arr2[] = &#123; &quot;owo&quot; &#125;;\tchar* p=strstr(arr1, arr2);\tif (p == NULL)\t&#123;\t\tprintf(&quot;æ‰¾ä¸åˆ°\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;%s\\n&quot;, p);\t&#125;\treturn 0;&#125;\n\n\n1.7 strtokè¯¥å‡½æ•°ç”¨äºæŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„åˆ†éš”ç¬¦\nchar * strtok ( char * str, const char * sep );\n\n\nsepå‚æ•°æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†ç”¨ä½œåˆ†éš”ç¬¦çš„å­—ç¬¦é›†åˆ(å¯ä»¥åŒ…å«å¤šä¸ªåˆ†éš”ç¬¦)\n\nç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«äº†0ä¸ªæˆ–è€…å¤šä¸ªç”±sepå­—ç¬¦ä¸²ä¸­ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†éš”ç¬¦åˆ†å‰²çš„æ ‡è®°\n\nstrtokå‡½æ•°æ‰¾åˆ°strä¸­çš„ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶ç”¨\\0ç»“å°¾ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ ‡è®°çš„æŒ‡é’ˆ\n\n\n\næ³¨ï¼šstrtokå‡½æ•°ä¼šæ”¹å˜è¢«æ“ä½œçš„å­—ç¬¦ä¸²ï¼ˆæŠŠåˆ†éš”ç¬¦æ”¹ä¸º\\0ï¼‰ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨strtokå‡½æ•°åˆ‡åˆ†çš„å­—ç¬¦ä¸²ä¸€èˆ¬éƒ½æ˜¯ä¸´æ—¶æ‹·è´çš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä¿®æ”¹\n\n\nstrtokå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸º NULLï¼Œå‡½æ•°å°†æ‰¾åˆ°strä¸­ç¬¬ä¸€ä¸ªæ ‡è®°ï¼Œstrtokå‡½æ•°å°†ä¿å­˜å®ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®\nstrtokå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º NULLï¼Œå‡½æ•°å°†åœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¢«ä¿å­˜çš„ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ ‡è®°\nå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨æ›´å¤šçš„æ ‡è®°ï¼Œåˆ™è¿”å› NULL æŒ‡é’ˆ\n\nå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼Œåœ¨åç»­è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¾€strtokå‡½æ•°é‡Œä¼ å…¥bufï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥NULLï¼Œå› ä¸ºä¼ å…¥NULLçš„æ—¶å€™è¯¥å‡½æ•°ä¼šåœ¨ä¸Šä¸€æ¬¡æ“ä½œçš„å­—ç¬¦ä¸²é‡Œç»§ç»­æŸ¥æ‰¾åˆ†éš”ç¬¦\n\nè¿™æ ·å†™å¾ˆå¤šè¡Œå¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç”¨forå¾ªç¯çš„æ–¹å¼æ¥ç®€åŒ–ä»£ç \n\nforå¾ªç¯çš„ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè®©str&#x3D;strtokç¬¬ä¸€æ¬¡æŸ¥æ‰¾çš„è¿”å›å€¼\nå¦‚æœè¯¥è¿”å›å€¼ä¸ºç©ºï¼ˆæ²¡æ‰¾åˆ°æ›´å¤šçš„åˆ†éš”ç¬¦ï¼‰ï¼Œåœæ­¢å¾ªç¯\nå¦‚æœè¯¥è¿”å›å€¼ä¸ä¸ºç©ºï¼Œå°±è®©str=strtok(NULL, p)ï¼Œç»§ç»­æŸ¥æ‰¾å¹¶æ‰“å°ä¸‹ä¸€éƒ¨åˆ†\n\nint main()&#123;\tconst char* p = &quot;@.&quot;;\tchar arr[] = &quot;zpengwei@yeah.net&quot;;\tchar buf[50] = &#123; 0 &#125;;//&quot;zpengwei@yeah.net&quot;\tstrcpy(buf, arr);\tchar* str = NULL;\tfor (str = strtok(buf, p); str != NULL; str=strtok(NULL, p))\t&#123;\t\tprintf(&quot;%s\\n&quot;, str);\t&#125;    return 0;&#125;\n\n\n\n1.8 strerrorchar * strerror ( int errnum );\n\n\nCè¯­è¨€ä¸­è§„å®šäº†ä¸€éƒ¨åˆ†é”™è¯¯ç ï¼Œè¿™äº›é”™è¯¯ç æœ‰ä»–ä»¬å¯¹åº”çš„é”™è¯¯ä¿¡æ¯\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ¯”è¾ƒç‰¹æ®Šï¼šå°†é”™è¯¯ä»£ç ç¿»è¯‘æˆæç¤ºä¿¡æ¯\n\nerrnoæ˜¯Cè¯­è¨€æä¾›çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ”¾åœ¨errno.hæ–‡ä»¶ä¸­\nå½“åº“å‡½æ•°ä½¿ç”¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šæŠŠerrnoè¿™ä¸ªå…¨å±€çš„é”™è¯¯å˜é‡è®¾ç½®ä¸ºæœ¬æ¬¡æ‰§è¡Œåº“å‡½æ•°äº§ç”Ÿçš„é”™è¯¯ç \nè¿™æ—¶å€™å¯ä»¥ç”¨strerrorå‡½æ•°å°†errnoé”™è¯¯ç ç¿»è¯‘æˆé”™è¯¯ä¿¡æ¯\n#include &lt;errno.h&gt;//éœ€è¦è°ƒç”¨errno.hå¤´æ–‡ä»¶printf(&quot;%s\\n&quot;, strerror(errno));\n\n\n1.9 strcasecmpè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¯”è¾ƒçš„æ—¶å€™å¿½ç•¥å¤§å°å†™ï¼Œæ³¨æ„å¤´æ–‡ä»¶æ˜¯strings.h\n#include &lt;strings.h&gt;int strcasecmp(const char *s1, const char *s2);int strncasecmp(const char *s1, const char *s2, size_t n);\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªstrncasecmpï¼Œä½œç”¨ç›¸åŒï¼Œä½†æ˜¯æ¯”è¾ƒçš„æ˜¯å‰nä¸ªå­—ç¬¦\nThe strncasecmp() function is similar, except it compares the only first n bytes of s1.\n\nå¯ä»¥é€šè¿‡ä»£ç æµ‹è¯•çœ‹å‡ºstrcmpå’Œstrcasecmpä¸¤ä¸ªå‡½æ•°çš„åŒºåˆ«\nvoid test_cmp()&#123;    char str1[] = &quot;abc&quot;;    char str2[] = &quot;ABC&quot;;    printf(&quot;strcmp:     %d\\n&quot;, strcmp(str1, str2));    printf(&quot;strcasecmp: %d\\n&quot;, strcasecmp(str1, str2));&#125;\n\nè¿è¡Œ\nstrcmp:     32strcasecmp: 0\n\nå› ä¸ºå°å†™è‹±æ–‡å­—æ¯çš„asciiç å¤§äºå¤§å†™è‹±æ–‡å­—æ¯ï¼Œæ‰€ä»¥strcmpçš„ç»“æœå¤§äº0ï¼Œè€Œstrcasecmpå¿½ç•¥äº†å¤§å°å†™ï¼Œè¿”å›0ä»£è¡¨äºŒè€…ç›¸åŒ\n\n2.å†…å­˜å‡½æ•°2.1 memcpyè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¹Ÿæ˜¯æ‹·è´å†…å®¹ï¼Œå’Œstrcpyä¸åŒï¼Œmemcpyå¯ä»¥æ‹·è´ä»»æ„ç±»å‹\nvoid * memcpy ( void * destination, const void * source, size_t num );\n\n\nå‡½æ•°memcpyä»sourceçš„ä½ç½®å¼€å§‹å‘åå¤åˆ¶numä¸ªå­—èŠ‚çš„æ•°æ®åˆ°destinationçš„å†…å­˜ä½ç½®\nè¯¥å‡½æ•°åœ¨é‡åˆ° â€˜\\0â€™ çš„æ—¶å€™å¹¶ä¸ä¼šåœä¸‹æ¥\nå¦‚æœsourceå’Œdestinationæœ‰ä»»ä½•çš„é‡å ï¼Œå¤åˆ¶çš„ç»“æœéƒ½æ˜¯æœªå®šä¹‰çš„\n\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹\n\næ¨¡æ‹Ÿå®ç°\nåœ¨ä¹‹å‰çš„qsortå¿«é€Ÿæ’åºå‡½æ•°çš„æ¨¡æ‹Ÿå®ç°é‡Œé¢ï¼Œæˆ‘ä»¬æ¥è§¦åˆ°äº†void*æŒ‡é’ˆï¼Œä»¥åŠç”¨char*æŒ‡é’ˆæ¥è¿›è¡Œå•ä¸ªå­—èŠ‚è®¿é—®çš„æ¨¡æ‹Ÿæ–¹æ³•\nåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨void*æŒ‡é’ˆè¿›è¡Œæ•°æ®çš„æ‹·è´\n\nè¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹void*æŒ‡é’ˆè¿›è¡Œ++ï¼Œè€Œè¦å°†å…¶å¼ºåˆ¶ç±»å‹è½¬æ¢æˆchar*æŒ‡é’ˆå+1\n\n////1.memcpyæ¨¡æ‹Ÿå®ç°void* my_memcpy(void* dest, const void* sour, int num)&#123;\tassert(dest &amp;&amp; sour);\tvoid* ptr = dest;\twhile (num--)\t&#123;\t\t*(char*)dest = *(char*)sour;\t\tdest = (char*)dest + 1;\t\tsour = (char*)sour + 1;\t&#125;\treturn ptr;&#125;int main()&#123;\tint arr1[10] = &#123; 1,2,4,5,9,7,8 &#125;;\tint arr2[10] = &#123; 0 &#125;;\tmy_memcpy(arr2, arr1, 5 * sizeof(int));\tfor (int i = 0; i &lt; 5; i++)\t&#123;\t\tprintf(&quot;%d &quot;, arr2[i]);\t&#125;\treturn 0;&#125;\n\n\n2.2 memmovevoid * memmove ( void * destination, const void * source, size_t num );\n\nè¿™ä¸ªå‡½æ•°å’Œmemcpyçš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼Œåªæœ‰ä¸€ç‚¹ä¸åŒ\n\nmemmoveåœ¨æ‹·è´çš„æ—¶å€™ï¼Œæºåœ°å€å’Œç›®çš„åœ°å¯ä»¥é‡å \n\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å°†arr1æ•°ç»„çš„ä¸€éƒ¨åˆ†æ‹·è´å›è¯¥æ•°ç»„é‡Œé¢\n\nä½†å¦‚æœä½ æµ‹è¯•ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°vsç¼–è¯‘å™¨ä¸‹memcpyä¹Ÿæ˜¯èƒ½å¤Ÿæ‹·è´å†…å­˜é‡å çš„æ•°æ®çš„\n\nCè¯­è¨€å¹¶æ²¡æœ‰å¯¹memcpyå‡½æ•°åšå‡ºå¦‚ä¸‹è¦æ±‚ï¼Œéƒ¨åˆ†ç¼–è¯‘å™¨çš„memcpyå¯èƒ½å°±ä¸æ”¯æŒè¿™æ ·æ“ä½œ\nä¸ºäº†é¿å…å‡ºé”™ï¼Œæˆ‘ä»¬åœ¨æ‹·è´å†…å­˜é‡å æ•°æ®çš„æ—¶å€™æœ€å¥½ä½¿ç”¨memmoveå‡½æ•°\n\n\næ¨¡æ‹Ÿå®ç°\nåœ¨ç¼–å†™è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ‹·è´çš„é¡ºåº\nå¦‚æœé‡å éƒ¨åˆ†è¿˜æ˜¯ä»å‰å‘åæ‹·è´çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°åé¢çš„å†…å®¹è¢«å‰é¢æ‹·è´æ¥çš„æ•°æ®ç¯¡æ”¹ï¼Œç»“æœä¸ç¬¦åˆè¦æ±‚çš„æƒ…å†µ\n\n\nå¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ°åœ¨æºåœ°å€çš„åé¢ï¼Œå°±åº”è¯¥ä»åå‘å‰æ‹·è´ï¼Œé¿å…æ•°æ®è¢«æ”¹å†™\n\nå¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ°åœ¨æºåœ°å€çš„å‰é¢ï¼Œå°±åº”è¯¥ä»å‰å‘åæ‹·è´\n\nè¿™é‡Œçš„å‰&#x2F;åéƒ½æ˜¯æŒ‡æœ‰é‡å çš„æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰é‡å ï¼Œä»å‰å¾€å&#x2F;ä»åå¾€å‰éƒ½ä¸å½±å“\n\n\n\næœ€ç»ˆçš„å‡½æ•°æ¨¡æ‹Ÿå¦‚ä¸‹\nvoid* my_memmove(void* dest, const void* sour, int num)&#123;\tassert(dest &amp;&amp; sour);\tvoid* ptr = dest;\tif (dest &lt; sour)\t&#123;\t\twhile (num--)\t\t&#123;\t\t\t*(char*)dest = *(char*)sour;\t\t\tdest = (char*)dest + 1;\t\t\tsour = (char*)sour + 1;\t\t&#125;\t&#125;\telse\t&#123;\t\twhile (num--)\t\t&#123;\t\t\t*((char*)dest+num) = *((char*)sour+num);\t\t&#125;\t&#125;\treturn ptr;&#125;int main()&#123;\tint arr1[10] = &#123; 1,2,4,5,9,7,8,3,0,6&#125;;\t//1 2 4 1 2 4 5 9 0 6\tmy_memmove(&amp;arr1[3], arr1, 5 * sizeof(int));\t\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, arr1[i]);\t&#125;\treturn 0;&#125;\n\n\n2.3 memcmpint memcmp ( const void * ptr1,            const void * ptr2,  \t\t\tsize_t num );\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼šä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œæ¯”è¾ƒ\n\næ¨¡æ‹Ÿå®ç°\nint my_memcmp(const void* ptr1, const void* ptr2, int num)&#123;\tassert(ptr1 &amp;&amp; ptr2);\twhile (num--)\t&#123;\t\tif (*(char*)ptr1 == *(char*)ptr2)\t\t&#123;\t\t\tptr1 = (char*)ptr1 + 1;\t\t\tptr2 = (char*)ptr2 + 1;\t\t&#125;\t\telse\t\t&#123;\t\t\treturn *(char*)ptr1 - *(char*)ptr2;\t\t&#125;\t&#125;\treturn 0;&#125;int main()&#123;\tint arr1[5] = &#123; 1,3,5,6,8 &#125;;\tint arr2[5] = &#123; 2,4,7,9,0 &#125;;\tint arr3[5] = &#123; 1,3,4,7,9 &#125;;\tint ret1 = my_memcmp(arr1, arr3, 9);\tint ret2 = memcmp(arr1, arr3, 9);\tprintf(&quot;my_memcmp:%d\\n&quot;, ret1);\tprintf(&quot;memcmp:%d\\n&quot;, ret2);\treturn 0;&#125;\n\nè¿è¡Œç»“æœ\n\n\n2.4 memsetvoid * memset ( void * ptr, int value, size_t num );\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æŠŠå†…å­˜ä¸­ptræ‰€åœ¨ä½ç½®çš„numä¸ªå­—èŠ‚çš„å†…å®¹æ”¹ä¸ºvalue\n\nç¤ºä¾‹ä»£ç å¦‚ä¸‹å›¾æ‰€ç¤º\n\n2.5 bzeroè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªåœ°å€çš„å‰nä¸ªå­—èŠ‚è®¾ç½®ä¸º0ï¼Œå¯ä»¥ç†è§£ä¸ºmemsetçš„ç®€åŒ–ç‰ˆæœ¬ã€‚å…¶éœ€è¦ä½¿ç”¨çš„å¤´æ–‡ä»¶æ˜¯strings.hï¼ŒèŒƒå›´å¹¿äºstring.h\n#include &lt;strings.h&gt;void bzero(void *s, size_t n);\n\nä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•\n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    char str[]=&quot;1234567890&quot;;    int sz = strlen(str);    printf(&quot;%s\\n&quot;,str);    bzero(str,3);//å°†å‰ä¸‰ä¸ªå­—èŠ‚å†™ä¸º0    for(int i=0;i&lt;sz;i++)    &#123;        printf(&quot;%c&quot;,str[i]);    &#125;    printf(&quot;\\n&quot;);    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä»£ç è¿è¡Œåï¼Œå‰ä¸‰ä¸ªå­—ç¬¦æ²¡æœ‰è¢«æ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯å› ä¸º0åœ¨ASCIIç ä¸­æ˜¯\\0ï¼Œå¯¹äºå­—ç¬¦æ¥è¯´ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°\n\n\n3.å­—ç¬¦ä¸²æ‰“å°ä¸‹é¢çš„å‡½æ•°éƒ½æ˜¯å¯¹printfçš„å˜ç§ï¼Œç”¨æ³•å’Œprintfæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ‰“å°çš„ç›®æ ‡ä½ç½®ä¸åŒ\n3.1 sprintfint sprintf(char *str, const char *format, ...)\n\nå’Œprintfçš„ä½¿ç”¨ä¸€æ ·ï¼Œåªä¸è¿‡å¤šäº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†printfçš„å†…å®¹æ‰“å°åˆ°ä¸€ä¸ªå­—ç¬¦æ•°ç»„strä¸­\n3.2 snprintfint snprintf ( char * str, size_t size, const char * format, ... );\n\nå°†printfçš„ç›®æ ‡è®¾ç½®ä¸ºstrå­—ç¬¦æ•°ç»„ï¼Œå¹¶é™å®šsizeï¼Œè¶…è¿‡sizeçš„éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼ˆä¹Ÿå°±æ˜¯æœ€å¤šåªèƒ½æ‰“å°sizeå­—èŠ‚åˆ°stré‡Œé¢ï¼‰\n3.3 fprintfint fprintf(FILE *stream, const char *format, ...)\n\nè¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯å¤šäº†ä¸€ä¸ªFILEæ–‡ä»¶æŒ‡é’ˆï¼Œå°†printfçš„å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶æŒ‡é’ˆä¸­\nç»“è¯­ğŸ‘ä»Šå¤©çš„å†…å®¹æœ‰ç‚¹å°å¤šï¼Œè¿™äº›å‡½æ•°ä»¥åæˆ‘ä»¬å°±ä¼šç»å¸¸æ¥è§¦å•¦~\nç†Ÿèƒ½ç”Ÿå·§ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€VSã€‘å¦‚ä½•ä¸‹è½½VS2019å¹¶åˆå§‹åŒ–C/C++ç¯å¢ƒ","url":"/2021/09/16/note_c/3%E5%A6%82%E4%BD%95%E5%88%9D%E5%A7%8B%E5%8C%96vs2019%E7%BC%96%E8%AF%91%E5%99%A8/","content":"1.ä¸‹è½½ï¼Œç™¾åº¦vs2019ï¼Œå»å®˜ç½‘ä¸‹è½½å³å¯ä¸€å®šè¦è®¤å‡†å®˜ç½‘ï¼Œå®˜ç½‘ï¼Œå®˜ç½‘ï¼\nä½œä¸ºåˆå­¦è€…çš„æˆ‘ä»¬ï¼Œä¸‹è½½ç¬¬ä¸€ä¸ªå…è´¹çš„communityç¤¾åŒºç‰ˆæœ¬å³å¯ï¼\n\n2.åŸºæœ¬é…ç½®\n3.\n4.\n5.\n6.\n7.\n8.\n9.\nåˆ°è¿™é‡Œï¼Œä½ çš„vs2019å°±é…ç½®å®Œæˆäº†ï¼å¯ä»¥æ„‰å¿«åœ°å†™ä»£ç äº†ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘è‡ªå®šä¹‰ç±»å‹ï¼ˆè¯¦è§£ï¼‰","url":"/2022/01/28/note_c/40%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E8%AF%A6%E8%A7%A3/","content":"[TOC]\nåœ¨Cè¯­è¨€ä¸­ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„è‡ªå®šä¹‰ç±»å‹ï¼šç»“æ„ä½“ã€æšä¸¾ã€è”åˆ\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹è¿™äº›è‡ªå®šä¹‰ç±»å‹å§ï¼ğŸ˜¶\n1.ç»“æ„ä½“ç»“æ„ä½“æ˜¯ä¸€äº›å€¼çš„é›†åˆï¼Œç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜å¯ä»¥æ˜¯ä¸åŒç±»å‹çš„å˜é‡\n1.1ç»“æ„ä½“çš„å£°æ˜ä»¥ä¸ªäººä¿¡æ¯ä¸ºä¾‹ï¼Œæœ‰å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èº«é«˜ç­‰å‡ ä¸ªå…ƒç´ ã€‚å¯ä»¥å®šä¹‰ç»“æ„ä½“å¦‚ä¸‹\nstruct Stu&#123;\tchar name[20];\tchar sex[5];\tint age;\tint hight;&#125;s2, s3, s4;//s2,s3,s4å…¨å±€å˜é‡\n\n1.2ç‰¹æ®Šå£°æ˜åœ¨å£°æ˜ç»“æ„ä½“çš„æ—¶å€™ï¼Œå¯ä»¥ä¸å®Œå…¨å£°æ˜\nstruct&#123;\tchar c;\tint a;\tdouble d;&#125;sa;struct&#123;\tchar c;\tint a;\tdouble d;&#125;*ps;\n\nè¿™ä¸¤ä¸ªç»“æ„ä½“å°±æ˜¯ä¸¤ä¸ªåŒ¿åç»“æ„ä½“ç±»å‹ï¼Œçœç•¥äº†ç»“æ„ä½“æ ‡ç­¾ã€‚\n\nåŒ¿åç»“æ„ä½“ç±»å‹åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼Œåç»­æ— æ³•ä½¿ç”¨\n\nè¿™ä¸¤ä¸ªç»“æ„ä½“çš„å†…å®¹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\nåœ¨ç¬¬äºŒä¸ªç»“æ„ä½“é‡Œé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆ*psï¼Œè¯·é—®è¿™ä¸ªæŒ‡é’ˆèƒ½å­˜æ”¾&amp;saå—ï¼Ÿ\nint main()&#123;\t//ç¼–è¯‘å™¨è®¤ä¸ºç­‰å·ä¸¤è¾¹æ˜¯ä¸åŒçš„ç»“æ„ä½“ç±»å‹ï¼Œæ‰€ä»¥è¿™ç§å†™æ³•æ˜¯é”™è¯¯çš„\tps = &amp;sa;\treturn 0;&#125;\n\n1.3ç»“æ„ä½“çš„è‡ªå¼•ç”¨åœ¨å®šä¹‰ç»“æ„ä½“çš„æ—¶å€™ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªè¯¥ç»“æ„ä½“æœ¬èº«çš„æˆå‘˜\n//ä»£ç 1-é”™è¯¯struct Node&#123; int data; struct Node next;&#125;;//æ­£ç¡®çš„è‡ªå¼•ç”¨æ–¹å¼struct Node&#123; int data; struct Node* next;&#125;;\n\nåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨typedefå‡½æ•°æ¥ä¸ºç»“æ„ä½“é‡å‘½å\n\ntypedefå‡½æ•°ä¸èƒ½é‡å‘½ååŒ¿åç»“æ„ä½“\n\ntypedef struct&#123; int data;` Node* next;&#125;Node;//ä¸èƒ½é‡å‘½ååŒ¿åç»“æ„ä½“//æ­£ç¡®å†™æ³•typedef struct Node&#123; int data; struct Node* next;&#125;Node;\n\n\n1.4ç»“æ„ä½“å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–struct Point&#123; int x; int y;&#125;p1; //å£°æ˜ç±»å‹çš„åŒæ—¶å®šä¹‰å˜é‡p1struct Point p2; //å®šä¹‰ç»“æ„ä½“å˜é‡p2\n\n//åˆå§‹åŒ–ï¼šå®šä¹‰å˜é‡çš„åŒæ—¶èµ‹åˆå€¼ã€‚struct Point p3 = &#123;x, y&#125;;struct Stu        //ç±»å‹å£°æ˜&#123; char name[15];//åå­— int age;      //å¹´é¾„&#125;;struct Stu s = &#123;&quot;zhangsan&quot;, 20&#125;;//åˆå§‹åŒ–struct Node&#123; int data; struct Point p; struct Node* next; &#125;n1 = &#123;10, &#123;4,5&#125;, NULL&#125;; //ç»“æ„ä½“åµŒå¥—åˆå§‹åŒ–struct Node n2 = &#123;20, &#123;5, 6&#125;, NULL&#125;;//ç»“æ„ä½“åµŒå¥—åˆå§‹åŒ–\n\n\n1.5ç»“æ„ä½“å†…å­˜å¯¹é½ç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ¯”è¾ƒç‰¹æ®Š\nstruct S1&#123;\tchar c1;//1\tint i;//4\tchar c2;//1&#125;;\n\nç»“æ„ä½“é‡Œé¢ä¸€å…±å­˜æ”¾äº†6ä¸ªå­—èŠ‚çš„å†…å®¹ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œå®ƒæ‰€å çš„ç©ºé—´åº”è¯¥ä¹Ÿæ˜¯6ä¸ªå­—èŠ‚ã€‚\nä½†å½“æˆ‘ä»¬ç”¨sizeofè®¡ç®—å®ƒçš„é•¿åº¦çš„æ—¶å€™ï¼Œå´å¾—åˆ°äº†12ä¸ªå­—èŠ‚ã€‚\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nç»“æ„ä½“åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯å†…å­˜è¯»å–æ•ˆç‡ï¼Œéœ€è¦è¿›è¡Œå†…å­˜å¯¹é½\n\n\nç¬¬ä¸€ä¸ªæˆå‘˜åœ¨ä¸ç»“æ„ä½“å˜é‡åç§»é‡ä¸º0çš„åœ°å€å¤„ã€‚ \n\nå…¶ä»–æˆå‘˜å˜é‡è¦å¯¹é½åˆ°æŸä¸ªæ•°å­—ï¼ˆå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€çš„åœ°å€å¤„\n\n\n å¯¹é½æ•° &#x3D; ç¼–è¯‘å™¨é»˜è®¤çš„ä¸€ä¸ªå¯¹é½æ•° ä¸ è¯¥æˆå‘˜å¤§å°çš„è¾ƒå°å€¼\n VSä¸­é»˜è®¤çš„å€¼ä¸º8 \n\nç»“æ„ä½“æ€»å¤§å°ä¸ºæœ€å¤§å¯¹é½æ•°ï¼ˆæ¯ä¸ªæˆå‘˜å˜é‡éƒ½æœ‰ä¸€ä¸ªå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€ã€‚ \n\nå¦‚æœåµŒå¥—äº†ç»“æ„ä½“çš„æƒ…å†µï¼ŒåµŒå¥—çš„ç»“æ„ä½“å¯¹é½åˆ°è‡ªå·±çš„æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€å¤„ã€‚ç»“æ„ä½“çš„æ•´ä½“å¤§å°å°±æ˜¯æ‰€æœ‰æœ€å¤§å¯¹é½æ•°ï¼ˆå«åµŒå¥—ç»“æ„ä½“çš„å¯¹é½æ•°ï¼‰çš„æ•´æ•°å€ã€‚\n\n\n\n\noffsetofå‡½æ•°ï¼šæŸ¥çœ‹ç»“æ„ä½“æˆå‘˜å˜é‡ç›¸å¯¹äºé¦–åœ°å€çš„åç§»é‡\n\n\n\niå˜é‡æ˜¯intç±»å‹ï¼Œ4ä¸ªå­—èŠ‚ï¼Œé»˜è®¤å¯¹é½æ•°æ˜¯8ï¼Œå¯¹é½æ•°æ˜¯4ã€‚C2å˜é‡æ˜¯1ä¸ªå­—èŠ‚ï¼Œå¯¹é½æ•°å°±æ˜¯1ã€‚\n\næ‰€ä»¥int iå°±è¦ä»å†…å­˜çš„4çš„æ•´æ•°å€çš„ä½ç½®å¼€å§‹å­˜æ”¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬5ä¸ªå­—èŠ‚çš„ä½ç½®ã€‚c2åœ¨intåï¼Œåœ¨å¯¹é½æ•°1çš„æ•´æ•°å€çš„ä½ç½®è¿›è¡Œå­˜æ”¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬9ä¸ªå­—èŠ‚çš„ä½ç½®ã€‚\n\nè€Œç»“æ„ä½“çš„æ€»å¤§å°åº”è¯¥æ˜¯æœ€å¤§å¯¹é½æ•°ï¼ˆè¿™é‡Œå°±æ˜¯4ï¼‰çš„æ•´æ•°å€ï¼Œ9å¹¶ä¸æ˜¯4çš„æ•´æ•°å€ï¼Œæ‰€ä»¥ç»“æ„ä½“çš„æ€»å¤§å°åº”ä¸º12ä¸ªå­—èŠ‚\n\n\n\nå¦‚å›¾ï¼Œç»“æ„ä½“çš„3ä¸ªæˆå‘˜åœ¨å†…å­˜ä¸­å­˜æ”¾å¹¶ä¸æ˜¯å®Œå…¨è¿ç»­çš„ã€‚char c1å’Œint iä¹‹é—´ç›¸éš”äº†3ä¸ªå­—èŠ‚ï¼Œchar c2åè¿˜ç©ºå‡ºäº†3ä¸ªå­—èŠ‚ã€‚\n\nç‰¹æ®Šæƒ…å†µï¼šæ•°ç»„\nstruct Stu &#123;\tint i;    //4  4,8 - 4    char c[5];\t//5  1,8 - 1&#125;;\n\næ•°ç»„åœ¨è®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œæ˜¯çœ‹å•ä¸ªå…ƒç´ çš„å¤§å°ï¼Œè€Œä¸æ˜¯çœ‹æ•´ä¸ªæ•°ç»„çš„å¤§å°ã€‚\n\nchar c[5]æ•°ç»„å 5ä¸ªå­—èŠ‚\nè®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œç”¨charç±»å‹çš„1ä¸ªå­—èŠ‚å’Œ8å¯¹æ¯”ï¼Œå¯¹é½æ•°æ˜¯1\n\n ï¼ˆè¯·å¿½ç•¥å›¾ä¸­charæ•°ç»„çš„ä¸‹æ ‡ï¼‰\n\n\né‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å¯¹é½å‘¢ï¼Ÿ\n\nå¹³å°åŸå› (ç§»æ¤åŸå› )ï¼š ä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®çš„ï¼›æŸäº›ç¡¬ä»¶å¹³å°åªèƒ½åœ¨æŸäº›åœ°å€å¤„å–æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºç¡¬ä»¶å¼‚å¸¸ã€‚\n\næ€§èƒ½åŸå› ï¼š æ•°æ®ç»“æ„(å°¤å…¶æ˜¯æ ˆ)åº”è¯¥å°½å¯èƒ½åœ°åœ¨è‡ªç„¶è¾¹ç•Œä¸Šå¯¹é½ã€‚ åŸå› åœ¨äºï¼Œä¸ºäº†è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå¤„ç†å™¨éœ€è¦ä½œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼›è€Œå¯¹é½çš„å†…å­˜è®¿é—®ä»…éœ€è¦ä¸€æ¬¡è®¿ é—®ã€‚\n\n\n\nåœ¨è®¾è®¡ç»“æ„ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå ç”¨ç©ºé—´å°çš„ç»“æ„ä½“æˆå‘˜å°½é‡æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥å‡å°ç»“æ„ä½“æ‰€å çš„ç©ºé—´\n\n\n1.6ä¿®æ”¹é»˜è®¤å¯¹é½æ•°æˆ‘ä»¬å¯ä»¥åˆ©ç”¨#pragmaé¢„å¤„ç†æŒ‡ä»¤æ¥æ›´æ”¹é»˜è®¤å¯¹é½æ•°\n#pragma pack(1)//è®¾ç½®é»˜è®¤å¯¹é½æ•°ä¸º1struct S2&#123; char c1; int i; char c2;&#125;;#pragma pack()//å–æ¶ˆè®¾ç½®çš„é»˜è®¤å¯¹é½æ•°ï¼Œè¿˜åŸä¸ºé»˜è®¤\n\n\n\n1.7ç»“æ„ä½“ä¼ å‚struct S&#123; int data[1000]; int num;&#125;;struct S s = &#123;&#123;1,2,3,4&#125;, 1000&#125;;//ç»“æ„ä½“ä¼ å‚void print1(struct S s)&#123; printf(&quot;%d\\n&quot;, s.num);&#125;//ç»“æ„ä½“åœ°å€ä¼ å‚void print2(struct S* ps)&#123; printf(&quot;%d\\n&quot;, ps-&gt;num);&#125;int main()&#123; print1(s);  //ä¼ ç»“æ„ä½“ print2(&amp;s); //ä¼ åœ°å€ return 0;&#125;\n\nåœ¨ç»“æ„ä½“ä¼ å‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ€å¥½ä¼ ç»“æ„ä½“çš„åœ°å€ã€‚\n\nå‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œå‚æ•°æ˜¯éœ€è¦å‹æ ˆï¼Œä¼šæœ‰æ—¶é—´å’Œç©ºé—´ä¸Šçš„ç³»ç»Ÿå¼€é”€ã€‚ å¦‚æœä¼ é€’ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡çš„æ—¶å€™ï¼Œç»“æ„ä½“è¿‡å¤§ï¼Œå‚æ•°å‹æ ˆçš„çš„ç³»ç»Ÿå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚\n\n\n\n2.ä½æ®µä½ç«¯æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»“æ„ä½“\n2.1ä»€ä¹ˆæ˜¯ä½æ®µ?\nä½æ®µçš„å£°æ˜å’Œç»“æ„æ˜¯ç±»ä¼¼çš„ï¼Œæœ‰ä¸¤ä¸ªä¸åŒï¼š\n1.ä½æ®µçš„æˆå‘˜å¿…é¡»æ˜¯ intã€unsigned int æˆ–signed int \n2.ä½æ®µçš„æˆå‘˜ååè¾¹æœ‰ä¸€ä¸ªå†’å·å’Œä¸€ä¸ªæ•°å­—ã€‚\n\nstruct A&#123; int _a:2; int _b:5; int _c:10; int _d:30;&#125;;\n\næˆå‘˜ååçš„æ•°å­—è¡¨ç¤ºï¼Œè¯¥æˆå‘˜éœ€è¦å‡ ä¸ªæ¯”ç‰¹çš„ç©ºé—´æ¥å­˜å‚¨\n\nåœ¨ç»“æ„ä½“å†…ï¼Œæœ€å°çš„æˆå‘˜charç±»å‹éƒ½éœ€è¦1ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚ä½†æœ‰äº›æ•°æ®å¹¶ä¸éœ€è¦1ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ä½æ®µæ¥å‡å°‘ç©ºé—´å ç”¨\n\nint _a:2;//2bit - 00 01 10 11 -å››ç§æƒ…å†µ\n\nä½ç«¯çš„å¤§å°å¦‚ä¸‹ï¼šå…ˆæ˜¯å¼€è¾Ÿ4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè¿›è¡Œaã€bã€cçš„è¿ç»­å­˜æ”¾ã€‚å­˜æ”¾å®Œæ¯•åè¿˜å‰©15ä¸ªbitçš„ç©ºé—´ï¼Œä¸å¤Ÿå­˜æ”¾dçš„30ä¸ªbitï¼Œæ‰€ä»¥å¼€è¾Ÿäº†ç¬¬äºŒä¸ª4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾æˆå‘˜d\n\n\n2.2ä½æ®µåœ¨å†…å­˜ä¸­çš„å­˜å‚¨\nä½æ®µçš„æˆå‘˜å¯ä»¥æ˜¯ int unsigned int signed int æˆ–è€…æ˜¯ char ï¼ˆå±äºæ•´å½¢å®¶æ—ï¼‰ç±»å‹ \n\nä½æ®µçš„ç©ºé—´ä¸Šæ˜¯æŒ‰ç…§éœ€è¦ä»¥4ä¸ªå­—èŠ‚ï¼ˆ int ï¼‰æˆ–è€…1ä¸ªå­—èŠ‚ï¼ˆ char ï¼‰çš„æ–¹å¼æ¥å¼€è¾Ÿçš„\n\nä½æ®µæ¶‰åŠå¾ˆå¤šä¸ç¡®å®šå› ç´ ï¼Œä½æ®µæ˜¯ä¸è·¨å¹³å°çš„ï¼Œæ³¨é‡å¯ç§»æ¤çš„ç¨‹åºåº”è¯¥é¿å…ä½¿ç”¨ä½æ®µ\n\n\n\n//ä¸€ä¸ªä¾‹å­struct S&#123; char a:3; char b:4; char c:5; char d:4;&#125;;struct S s = &#123;0&#125;;s.a = 10;//1010-æˆªæ–­-010s.b = 12;//1100-å®Œæ•´ä¿å­˜-1100s.c = 3;//0011-å‰è¡¥0-00011s.d = 4;//0100-å®Œæ•´ä¿å­˜-0100\n\n\naå’Œbå ä¸€ä¸ªå­—èŠ‚\ncå ç‹¬ç«‹çš„ä¸€ä¸ªå­—èŠ‚\ndå ä¸€ä¸ªå­—èŠ‚\n\nå®ƒåœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n2.3ä½æ®µçš„è·¨å¹³å°é—®é¢˜åœ¨ä¸åŒç¼–è¯‘å™¨ä¸‹ï¼Œä½æ®µçš„å­˜å‚¨æ–¹å¼ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒ\n\n\nint ä½æ®µè¢«å½“æˆæœ‰ç¬¦å·æ•°è¿˜æ˜¯æ— ç¬¦å·æ•°æ˜¯ä¸ç¡®å®šçš„ã€‚\nä½æ®µä¸­æœ€å¤§ä½çš„æ•°ç›®ä¸èƒ½ç¡®å®šï¼ˆ16ä½æœºå™¨æœ€å¤§16ï¼Œ32ä½æœºå™¨æœ€å¤§32ï¼Œå†™æˆ27ï¼Œåœ¨16ä½æœºå™¨ä¼šå‡ºé—®é¢˜ï¼‰\nä½æ®µä¸­çš„æˆå‘˜åœ¨å†…å­˜ä¸­ä»å·¦å‘å³åˆ†é…ï¼Œè¿˜æ˜¯ä»å³å‘å·¦åˆ†é… æ ‡å‡†å°šæœªå®šä¹‰\nå½“ä¸€ä¸ªç»“æ„åŒ…å«ä¸¤ä¸ªä½æ®µï¼Œç¬¬äºŒä¸ªä½æ®µæˆå‘˜æ¯”è¾ƒå¤§ï¼Œæ— æ³•å®¹çº³äºç¬¬ä¸€ä¸ªä½æ®µå‰©ä½™çš„ä½æ—¶ï¼Œæ˜¯èˆå¼ƒå‰©ä½™çš„ä½è¿˜æ˜¯åˆ©ç”¨ï¼Œè¿™æ˜¯ä¸ç¡®å®šçš„\n\n\nè·Ÿç»“æ„ä½“ç›¸æ¯”ï¼Œä½æ®µå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œè¿˜èƒ½å¾ˆå¥½çš„èŠ‚çœç©ºé—´ï¼Œä½†æ˜¯æœ‰è·¨å¹³å°çš„é—®é¢˜å­˜åœ¨ã€‚\n2.4ä½æ®µçš„åº”ç”¨åœ¨äº’è”ç½‘ä¸­ï¼Œæ•°æ®åœ¨æœåŠ¡å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’çš„æ—¶å€™ï¼Œä¼šå‚ç…§ä»¥ä¸‹çš„èŒƒå¼ã€‚\nå›¾é‡Œçš„4ä½(4bit)ç‰ˆæœ¬å·å’Œé¦–éƒ¨é•¿åº¦ï¼Œä»¥åŠ3ä½æ ‡å¿—ï¼Œéƒ½æ²¡æœ‰è¾¾åˆ°1ä¸ªå­—èŠ‚çš„å¤§å°ã€‚è¿™æ—¶å€™å¦‚æœç”¨ç»“æ„ä½“æ¥ä¿å­˜ï¼Œå°±ä¼šå­˜åœ¨è¾ƒå¤§çš„ç©ºé—´æµªè´¹ï¼Œä»è€ŒåŠ å¤§æœåŠ¡å™¨çš„å‹åŠ›ã€‚\nè¿™æ—¶å€™å°±é€‚åˆé‡‡ç”¨ä½æ®µæ¥å­˜å‚¨è¿™æ ·çš„å†…å®¹ï¼ŒèŠ‚çœç©ºé—´ã€‚\n\n\n3.æšä¸¾\næšä¸¾çš„æ„æ€æ˜¯ä¸€ä¸€åˆ—ä¸¾\n\nåœ¨ç”Ÿæ´»ä¸­æœ‰ä¸€äº›äº‹ç‰©çš„ç±»å‹æ˜¯å¯ä»¥ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥çš„ï¼ˆæœ‰é™çš„ï¼‰ã€‚\næ¯”å¦‚ï¼šäººçš„æ€§åˆ«ã€æ˜ŸæœŸã€12ä¸ªæœˆã€‚\nåœ¨Cè¯­è¨€ä¸­ï¼Œå°±å¯ä»¥ç”¨æšä¸¾ç±»å‹æ¥å®šä¹‰è¿™ç§æœ‰é™çš„å…ƒç´ \n3.1æšä¸¾ç±»å‹çš„å®šä¹‰enum Day//æ˜ŸæœŸ&#123; Mon, Tues, Wed, Thur, Fri, Sat, Sun&#125;;enum Sex//æ€§åˆ«&#123; MALE, FEMALE, SECRET&#125;ï¼›\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæšä¸¾ç±»å‹å’Œç»“æ„ä½“æ˜¯ä¸åŒçš„ã€‚\n\n&#123; &#125;ä¸­çš„å†…å®¹æ˜¯æšä¸¾ç±»å‹çš„å¯èƒ½å–å€¼ï¼Œä¹Ÿå«æšä¸¾å¸¸é‡ \n\næšä¸¾ç±»å‹ä»£è¡¨å…·ä½“çš„æ•°å€¼ã€‚é»˜è®¤æ˜¯ä»0å¼€å§‹ï¼Œä»¥1é€’å¢ã€‚\n\næšä¸¾ç±»å‹å¯ä»¥ç”¨æ¥æ›¿ä»£æ•°å€¼\n\n\næ¯”å¦‚åœ¨dayçš„æšä¸¾ç±»å‹é‡Œé¢ï¼Œæ¯ä¸€ä¸ªå…ƒç´ åˆ†åˆ«ä»£è¡¨ä¸€ä¸ªæ•°å­—ã€‚é»˜è®¤æ˜¯ä»0å¼€å§‹ï¼Œä»¥1é€’å¢ã€‚\nenum Day//æ˜ŸæœŸ&#123; Mon,//0 Tues,//1 Wed,//2 Thur,//3 Fri,//4 Sat,//5 Sun//6&#125;;\n\næˆ‘ä»¬åœ¨å®šä¹‰çš„æ—¶å€™ä¹Ÿå¯ä»¥èµ‹åˆå€¼\nenum Color//é¢œè‰²&#123; RED=1, GREEN=2, BLUE=4&#125;;\n\nå¦‚æœä½ åªå¯¹å…¶ä¸­ä¸€ä¸ªå¸¸é‡èµ‹å€¼äº†ï¼Œåé¢çš„å¸¸é‡ä¹Ÿæ˜¯ä»¥1é€’å¢çš„\nenum Day//æ˜ŸæœŸ&#123; Mon,//0 Tues,//1 Wed=5,//5 Thur,//6 Fri,//7 Sat,//8 Sun//9&#125;;\n\n3.2æšä¸¾çš„ä¼˜ç‚¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ #define å®šä¹‰å¸¸é‡ï¼Œä¸ºä»€ä¹ˆéè¦ä½¿ç”¨æšä¸¾ï¼Ÿ \næšä¸¾çš„ä¼˜ç‚¹ï¼š \n\nå¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ \nå’Œ#defineå®šä¹‰çš„æ ‡è¯†ç¬¦æ¯”è¾ƒæšä¸¾æœ‰ç±»å‹æ£€æŸ¥ï¼Œæ›´åŠ ä¸¥è°¨ã€‚ \né˜²æ­¢äº†å‘½åæ±¡æŸ“ï¼ˆç”¨äº†&#123; &#125;å°è£…ï¼‰ \nä¾¿äºè°ƒè¯•\nä½¿ç”¨æ–¹ä¾¿ï¼Œä¸€æ¬¡å¯ä»¥å®šä¹‰å¤šä¸ªå¸¸é‡\n\nå…¶ä¸­ç¬¬å››ç‚¹çš„å†…å®¹è§ä¸‹å›¾ï¼š\n\n\n3.3æšä¸¾çš„ä½¿ç”¨enum Color//é¢œè‰²&#123; RED=1, GREEN=2, BLUE=4&#125;;//åœ¨å®šä¹‰å®Œæšä¸¾å¸¸é‡ä¹‹åï¼Œæ— æ³•åœ¨å¤–éƒ¨è¿›è¡Œæ›´æ”¹ï¼RED=3,//errenum Color clr = GREEN;//åªèƒ½æ‹¿æšä¸¾å¸¸é‡ç»™æšä¸¾å˜é‡èµ‹å€¼ï¼Œæ‰ä¸ä¼šå‡ºç°ç±»å‹çš„å·®å¼‚ã€‚clr = 5; //err\n\n\nenum Coloré‡Œé¢çš„å†…å®¹æ˜¯æšä¸¾å¸¸é‡\nenum Color clræ˜¯ä¸€ä¸ªæšä¸¾å˜é‡\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ç”¨æ•°å­—ç»™æšä¸¾å˜é‡èµ‹å€¼ï¼Œåœ¨.cæ–‡ä»¶ä¸‹ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åœ¨.cppæ–‡ä»¶ä¸‹ä¼šæŠ¥é”™\n\nCPPæ–‡ä»¶çš„è¯­æ³•æ£€æŸ¥æ›´ä¸¥æ ¼ï¼\n\n\n\né‚£ä¹ˆï¼Œå¦‚ä½•æ—¥å¸¸ä½¿ç”¨ä¸­åº”ç”¨æšä¸¾ç±»å‹å‘¢ï¼Ÿ\n\nåœ¨è®¡ç®—å™¨çš„ä»£ç ä¸­ğŸ‘‰ã€åšå®¢é“¾æ¥ã€‘\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨æšä¸¾å¸¸é‡æ¥æ›¿ä»£å¹²å·´å·´çš„case 0ã€case 1ç­‰ç­‰\n//è¿™åªæ˜¯ä¸ªç¤ºä¾‹//è¯¦ç»†ä»£ç è§ä¹‹å‰çš„åšå®¢enum Options&#123; \tEXIT,//0 \tADD,//1    SUB,//2    MUL,//3    DIV//4&#125;;void menu()&#123;\tprintf(&quot;**********************************\\n&quot;);\tprintf(&quot;*****  1. add     2. sub     *****\\n&quot;);\tprintf(&quot;*****  3. mul     4. div     *****\\n&quot;);\tprintf(&quot;*****  0. exit               *****\\n&quot;);\tprintf(&quot;**********************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase ADD:         //ç”¨æšä¸¾ç±»å‹ä»£æ›¿åŸæœ¬çš„æ•°å­—ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§\t\t\tbreak;\t\tcase SUB:\t\t\tbreak;\t\tcase MUL:\t\t\tbreak;\t\tcase DIV:\t\t\tbreak;\t\tcase EXIT:\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\n\n4.è”åˆä½“4.1è”åˆç±»å‹çš„å®šä¹‰è”åˆä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªå®šä¹‰ç±»å‹\nè¿™ç§ç±»å‹å®šä¹‰çš„å˜é‡ä¹ŸåŒ…å«ä¸€ç³»åˆ—çš„æˆå‘˜ï¼Œç‰¹å¾æ˜¯è¿™äº›æˆå‘˜å…¬ç”¨åŒä¸€å—ç©ºé—´ï¼ˆæ‰€ä»¥è”åˆä¹Ÿå«å…±ç”¨ä½“ï¼‰\n//è”åˆç±»å‹çš„å£°æ˜union Un&#123; char c; int i;&#125;;//è”åˆå˜é‡çš„å®šä¹‰union Un un;\n\nå½“æˆ‘ä»¬è®¡ç®—è¿™ä¸ªè”åˆä½“çš„å¤§å°çš„æ—¶å€™ï¼Œå‘ç°å®ƒåªæœ‰4ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸æ˜¯5ä¸ªå­—èŠ‚ã€‚\nè€Œä¸”char cå’Œint iå…ƒç´ çš„èµ·å§‹åœ°å€ç›¸åŒï¼Œè¿™è¯´æ˜å®ƒä»¬æ˜¯å…¬ç”¨è¿™4ä¸ªå­—èŠ‚çš„ç©ºé—´çš„ã€‚\n\n4.2è”åˆä½“çš„ç‰¹ç‚¹\nè”åˆçš„æˆå‘˜æ˜¯å…±ç”¨åŒä¸€å—å†…å­˜ç©ºé—´çš„ï¼Œè¿™æ ·ä¸€ä¸ªè”åˆå˜é‡çš„å¤§å°ï¼Œè‡³å°‘æ˜¯æœ€å¤§æˆå‘˜çš„å¤§å°\nï¼ˆå› ä¸ºè”åˆè‡³å°‘å¾—æœ‰èƒ½åŠ›ä¿å­˜æœ€å¤§çš„é‚£ä¸ªæˆå‘˜ï¼‰\n\nunion Un&#123; int i; char c;&#125;;union Un un;//ä¸‹é¢è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿun.i = 0x11223344;un.c = 0x55;printf(&quot;%x\\n&quot;, un.i);\n\n\n4.3ç”¨è”åˆä½“åˆ¤æ–­å¤§å°ç«¯\nåœ¨ä¹‹å‰æ•°æ®å­˜å‚¨çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°äº†ä»€ä¹ˆæ˜¯ç¼–è¯‘å™¨çš„å¤§å°ç«¯ï¼Œå¹¶å†™äº†ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å½“å‰ç¼–è¯‘å™¨çš„å¤§å°ç«¯ğŸ‘‰é“¾æ¥\n\n#include &lt;stdio.h&gt;int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\tif(1==*p)\t\treturn 1;\telse\t\treturn 0;\t\t&#125;int main()&#123;\tint b=check_sys(); \tif(1==b)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);    \treturn 0; &#125; \n\n\nå°†intç±»å‹åœ°å€å¼ºåˆ¶è½¬æ¢æˆchar*ç±»å‹\n\nå¦‚æœæ˜¯å°ç«¯ï¼Œç¬¬ä¸€ä¸ªåœ°å€æ˜¯01\nå¦‚æœæ˜¯å¤§ç«¯ï¼Œç¬¬ä¸€ä¸ªåœ°å€æ˜¯00\n\n\nä»Šå¤©æˆ‘ä»¬å°±åˆ©ç”¨è”åˆä½“çš„æˆå‘˜åœ¨å†…å­˜ä¸­å…±äº«åŒä¸€ç©ºé—´çš„ç‰¹ç‚¹ï¼Œæ¥æ”¹è¿›è¿™ä¸ªä»£ç ã€‚\nint cheak_sys()&#123;\tunion\t&#123;\t\tchar c;\t\tint i;\t&#125;u;\tu.i = 1;//å°†intç±»å‹æ”¹æˆ1\treturn u.c;//è¿”å›è¯¥ç±»å‹çš„ç¬¬ä¸€ä¸ªå­—èŠ‚&#125;int main()&#123;\tint ret = cheak_sys();\tif (1 == ret)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);\t//å¦‚æœè¿”å›1ï¼Œè¡¨ç¤ºå°ç«¯\t//å¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºå¤§ç«¯\treturn 0;&#125;\n\n\nä½¿ç”¨è”åˆä½“ï¼Œå°±æ— éœ€è¿›è¡ŒæŒ‡é’ˆç±»å‹çš„å¼ºåˆ¶è½¬æ¢\nå¯¹char cç±»å‹çš„å®šä¹‰å¯ä»¥è¦†ç›–æ‰int içš„ç¬¬ä¸€ä¸ªå­—èŠ‚\n\n\n4.4è”åˆä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å’Œç»“æ„ä½“ä¸€æ ·ï¼Œè”åˆä½“ä¹Ÿéœ€è¦è¿›è¡Œå†…å­˜å¯¹é½\n\nè”åˆçš„å¤§å°è‡³å°‘æ˜¯æœ€å¤§æˆå‘˜çš„å¤§å°\nå½“æœ€å¤§æˆå‘˜å¤§å°ä¸æ˜¯æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€çš„æ—¶å€™ï¼Œå°±è¦å¯¹é½åˆ°æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€\n\nunion Un1&#123;\tchar c[5];//5  1,8 - 1\tint i;    //4  4,8 - 4&#125;;union Un2&#123;\tshort c[7];//14  2,8-2\tint i;     //4   4,8-4&#125;;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè”åˆä½“åœ¨è®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œæ•°ç»„æ˜¯æŒ‰ä¸€ä¸ªå…ƒç´ çš„å¤§å°è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯ä»¥æ•´ä¸ªæ•°ç»„çš„å¤§å°è¿›è¡Œè®¡ç®—ï¼ï¼ˆè¿™ä¸€ç‚¹å’Œç»“æ„ä½“æ˜¯ä¸€æ ·çš„ï¼‰\n\nUn2ä¸­shortæ•°ç»„çš„å¯¹é½æ•°ï¼š\n\nshort c[7]ä¸€å…±14ä¸ªå­—èŠ‚\næ¯ä¸ªå…ƒç´ æ˜¯2ä¸ªå­—èŠ‚\né»˜è®¤å¯¹é½æ•°æ˜¯8\næ‰€ä»¥å®ƒçš„å¯¹é½æ•°æ˜¯2\n\n\n\nä»¥Un1ä¸ºä¾‹ï¼Œå®ƒåœ¨å†…å­˜é‡Œçš„å­˜å‚¨æ–¹å¼å¦‚å›¾ (è¯·å¿½ç•¥å›¾ä¸­charæ•°ç»„çš„ä¸‹æ ‡)\n\nchar c[5]å’Œint iç±»å‹å…±ç”¨å‰5ä¸ªå­—èŠ‚ï¼ˆå…¶ä¸­int iå 4ä¸ªå­—èŠ‚ï¼‰\nå› ä¸ºéœ€è¦å¯¹é½åˆ°æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€ï¼Œæ‰€ä»¥å¤§å°æ˜¯8\n\n\n\nç»“è¯­è‡ªå®šä¹‰ç±»å‹çš„å†…å®¹éå¸¸ä¸°å¯Œ\nä½ å­¦ä¼šäº†å—ï¼Ÿ\n\nç å­—ä¸æ˜“ï¼Œè‹¥æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå‘—ï¼\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","è‡ªå®šä¹‰ç±»å‹"]},{"title":"ã€Cè¯­è¨€ã€‘åŠ¨æ€å†…å­˜ç®¡ç†ï¼ˆè¯¦è§£malloc/calloc/reallocï¼‰","url":"/2022/01/29/note_c/41%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/","content":"[TOC]\nç›´å…¥ä¸»é¢˜ï¼ŒåŠ¨æ€å†…å­˜ç®¡ç†ï¼ğŸ•µï¸â€â™‚ï¸\n1.ä¸ºä»€ä¹ˆä¼šæœ‰åŠ¨æ€å†…å­˜åˆ†é…ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¼€è¾Ÿå†…å­˜\nint a = 20;//åœ¨æ ˆç©ºé—´ä¸Šå¼€è¾Ÿå››ä¸ªå­—èŠ‚char arr[10] = &#123;0&#125;;//åœ¨æ ˆç©ºé—´ä¸Šå¼€è¾Ÿ10ä¸ªå­—èŠ‚çš„è¿ç»­ç©ºé—´\n\nä½†æ˜¯ä¸Šè¿°çš„å¼€è¾Ÿç©ºé—´çš„æ–¹å¼æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š \n\nç©ºé—´å¼€è¾Ÿå¤§å°æ˜¯å›ºå®šçš„ã€‚ \næ•°ç»„åœ¨ç”³æ˜çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œå®ƒæ‰€éœ€è¦çš„å†…å­˜åœ¨ç¼–è¯‘æ—¶åˆ†é…ã€‚\n\nä½†æ˜¯å¯¹äºç©ºé—´çš„éœ€æ±‚ï¼Œä¸ä»…ä»…æ˜¯ä¸Šè¿°çš„æƒ…å†µã€‚æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½æå‰çŸ¥é“éœ€è¦çš„ç©ºé—´å¤§å°ï¼Œè€Œéƒ¨åˆ†ç¼–è¯‘å™¨å¹¶ä¸æ”¯æŒå˜é•¿æ•°ç»„ã€‚è¿™æ—¶å€™ä»¥æ•°ç»„çš„æ–¹å¼å¼€è¾Ÿè¿ç»­ç©ºé—´çš„æ–¹æ³•å°±æœ‰ç‚¹ä¸é€‚ç”¨äº†ã€‚\nå…¶æ¬¡ï¼Œå…¨å±€å˜é‡&#x2F;å±€éƒ¨å˜é‡æ˜¯å­˜æ”¾åœ¨æ ˆåŒºé‡Œé¢çš„ã€‚å¦‚æœå­˜æ”¾çš„å˜é‡å¤ªå¤šï¼Œå°±ä¼šå‡ºç°æ ˆæº¢å‡ºçš„é”™è¯¯\n\nè¿™æ—¶å€™å°±è½®åˆ°åŠ¨æ€å†…å­˜ä¸Šåœºäº†ï¼\n\n2.åŠ¨æ€å†…å­˜å‡½æ•°2.1 malloc#include &lt;stdlib.h&gt;//mallocçš„å¤´æ–‡ä»¶void* malloc (size_t size);\n\nè¿™ä¸ªå‡½æ•°å‘å†…å­˜ç”³è¯·ä¸€å—è¿ç»­å¯ç”¨çš„ç©ºé—´ï¼Œå¹¶è¿”å›æŒ‡å‘è¿™å—ç©ºé—´çš„æŒ‡é’ˆã€‚\n\nå¦‚æœå¼€è¾ŸæˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªæŒ‡å‘å¼€è¾Ÿå¥½ç©ºé—´çš„æŒ‡é’ˆã€‚ \nå¦‚æœå¼€è¾Ÿå¤±è´¥ï¼Œåˆ™è¿”å›ä¸€ä¸ªNULLæŒ‡é’ˆï¼Œå› æ­¤mallocçš„è¿”å›å€¼ä¸€å®šè¦åšæ£€æŸ¥ã€‚ \nè¿”å›å€¼çš„ç±»å‹æ˜¯ void* ï¼Œæ‰€ä»¥mallocå‡½æ•°å¹¶ä¸çŸ¥é“å¼€è¾Ÿç©ºé—´çš„ç±»å‹ï¼Œå…·ä½“åœ¨ä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨è€…è‡ªå·±æ¥å†³å®šã€‚ \nå¦‚æœå‚æ•° size ä¸º0ï¼Œmallocçš„è¡Œä¸ºæ˜¯æ ‡å‡†æ˜¯æœªå®šä¹‰çš„ï¼Œå–å†³äºç¼–è¯‘å™¨ã€‚\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)malloc(40);\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));        //è¿™ä¸ªå‡½æ•°åœ¨ä¹‹å‰ä»‹ç»è¿‡ï¼Œç”¨äºè½¬ä¹‰é”™è¯¯ä»£ç \t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//é‡Šæ”¾\tfree(p);\tp = NULL;\t\treturn 0;&#125;\n\n2.2 freeä¸Šè¿°ä»£ç é‡Œé¢å‡ºç°äº†å¦å¤–ä¸€ä¸ªé‡è¦çš„å‡½æ•°ï¼Œfree\nfreeå‡½æ•°ç”¨æ¥é‡Šæ”¾åŠ¨æ€å¼€è¾Ÿçš„å†…å­˜ï¼Œå¤´æ–‡ä»¶æ˜¯&lt;stdlib.h&gt;\n\nå¦‚æœå‚æ•°ptræŒ‡å‘çš„ç©ºé—´ä¸æ˜¯åŠ¨æ€å¼€è¾Ÿçš„ï¼Œé‚£freeå‡½æ•°çš„è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„\nå¦‚æœå‚æ•°ptræ˜¯NULLæŒ‡é’ˆï¼Œåˆ™å‡½æ•°ä»€ä¹ˆäº‹éƒ½ä¸åšã€‚\n\nfreeå‡½æ•°ä¸èƒ½ç”¨æ¥é‡Šæ”¾æ ˆåŒºé‡Œé¢çš„ç©ºé—´ï¼Œæ ˆåŒºçš„ç©ºé—´ç”±ç¼–è¯‘å™¨è¿›è¡Œè‡ªåŠ¨åˆ›å»ºå’Œè‡ªåŠ¨é‡Šæ”¾\né‡ç‚¹ï¼\nè¢«freeä¹‹åçš„æŒ‡é’ˆpæŒ‡å‘çš„ç©ºé—´å·²ç»ä¸å±äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº†ã€‚æœ€å¥½åœ¨freeä¹‹åç«‹é©¬æŠŠæŒ‡é’ˆç½®ä¸ºNULLé¿å…è®¿é—®é‡æŒ‡é’ˆã€‚\nfree(p);p = NULL;\n\n\n2.3 callocvoid* calloc (size_t num, size_t size);\n\ncallocå‡½æ•°çš„åŠŸèƒ½å’ŒmallocåŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼š\n\ncallocå‡½æ•°çš„åŠŸèƒ½æ˜¯ä¸ºnumä¸ªå¤§å°ä¸ºsizeçš„å…ƒç´ å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå¹¶ä¸”æŠŠç©ºé—´çš„æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸º0ã€‚\nä¸mallocçš„åŒºåˆ«åªåœ¨äºcallocä¼šåœ¨è¿”å›åœ°å€ä¹‹å‰æŠŠç”³è¯·çš„ç©ºé—´çš„æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸ºå…¨0\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)calloc(10, sizeof(int));\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;             \tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//é‡Šæ”¾\tfree(p);\tp = NULL;\treturn 0;&#125;\n\næ·»åŠ æ–­ç‚¹å¹¶è°ƒè¯•ï¼Œå¯ä»¥çœ‹åˆ°callocå‡½æ•°æŠŠè¿™ä¸€å—å†…å­˜éƒ½åˆå§‹åŒ–ä¸º0äº†\n\nå¦‚æœè¿™å—ç©ºé—´éœ€è¦åˆå§‹åŒ–ï¼Œä½¿ç”¨callocå‡½æ•°æ¯”mallocæ›´å¥½\n\n\n\n2.4 realloc\nè¯¥å‡½æ•°ç”¨äºæ›´æ”¹å·²ç»åˆ›å»ºå¥½çš„åŠ¨æ€å†…å­˜ç©ºé—´ï¼ˆå¯æ”¹å¤§å¯æ”¹å°ï¼‰\n\nvoid* realloc (void* ptr, size_t size);\n\n\nptr æ˜¯è¦è°ƒæ•´çš„å†…å­˜åœ°å€ \nsize è°ƒæ•´ä¹‹åæ–°å¤§å°\nè¿”å›å€¼ä¸ºè°ƒæ•´ä¹‹åçš„å†…å­˜èµ·å§‹åœ°å€\nè¿™ä¸ªå‡½æ•°è°ƒæ•´åŸå†…å­˜ç©ºé—´å¤§å°çš„åŸºç¡€ä¸Šï¼Œè¿˜ä¼šå°†åŸæ¥å†…å­˜ä¸­çš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„ç©ºé—´\nå¦‚æœå¼€è¾Ÿå¤±è´¥ï¼Œè¿”å›ç©ºæŒ‡é’ˆNULL\n\nåœ¨è¿›è¡Œæ‰©å®¹æ“ä½œçš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š\n\nåŸåŠ¨æ€å†…å­˜ç©ºé—´ä¹‹åæœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œæ‰©å®¹\nåŸåŠ¨æ€å†…å­˜ç©ºé—´ä¹‹åæ— è¶³å¤Ÿç©ºé—´\n\nå¦‚æœæ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼Œreallocå‡½æ•°ä¼šåœ¨è¿™ä¹‹åå¢æ·»ç©ºé—´ï¼Œåˆ†é…ç»™ptræŒ‡é’ˆã€‚åŸæ¥ç©ºé—´çš„æ•°æ®ä¸å‘ç”Ÿå˜åŒ–ã€‚\nå¦‚æœæ˜¯ç¬¬äºŒç§æƒ…å†µï¼Œreallocä¼šæ‰¾ä¸€å—æ–°çš„ç©ºé—´ï¼Œå¼€è¾Ÿå¥½åè¿”å›ç»™ptræŒ‡é’ˆï¼Œå¹¶æŠŠåŸç©ºé—´é‡Œçš„æ•°æ®ç§»åŠ¨åˆ°æ–°ç©ºé—´çš„å¯¹åº”ä½ç½®ã€‚\n\næƒ…å†µ2çš„æ—¶å€™ï¼Œå¼€è¾Ÿå®Œæ–°ç©ºé—´ä¹‹åï¼Œä¼šæŠŠåŸæ¥çš„ç©ºé—´ç»™freeæ‰(åªæœ‰å¼€è¾ŸæˆåŠŸæ‰ä¼šé‡Šæ”¾åŸæ¥çš„ç©ºé—´)\n\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)calloc(10, sizeof(int));\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//éœ€è¦å¢å®¹ - 80\tint*ptr = (int*)realloc(p, 80);\tif (NULL != ptr)\t&#123;\t\tp = ptr;\t\tptr = NULL;\t&#125;\t//ç»§ç»­ä½¿ç”¨äº†\t\t//é‡Šæ”¾\tfree(p);\tp = NULL;\treturn 0;&#125;\n\nå‡ ç‚¹æ³¨æ„ï¼š\n\nrealloc(p, 80) 80æŒ‡çš„æ˜¯å¼€è¾Ÿä¹‹åæ–°çš„ç©ºé—´å¤§å°ä¸º80ï¼Œè€Œä¸æ˜¯å¢åŠ 80çš„ç©ºé—´\nreallocå‡½æ•°å¯èƒ½å¼€è¾Ÿå¤±è´¥ï¼Œè¿™æ—¶å€™å¦‚æœå°†å¼€è¾Ÿå¤±è´¥çš„è¿”å›å€¼NULLèµ‹å€¼ç»™äº†åŸæœ‰æŒ‡é’ˆpï¼Œå°±å¾ˆå±é™©ã€‚\né‡‡ç”¨ä¸­é—´æŒ‡é’ˆå˜é‡ptrï¼Œå…ˆåˆ¤æ–­reallocå‡½æ•°æ˜¯å¦å¼€è¾ŸæˆåŠŸï¼Œè‹¥æˆåŠŸï¼Œåˆ™èµ‹å€¼ç»™pæŒ‡é’ˆã€‚\nèµ‹å€¼ç»™pä¹‹åptræŒ‡é’ˆå°±æ²¡ç”¨äº†ï¼Œç½®ä¸ºç©ºæŒ‡é’ˆã€‚\n\n\næœ€åæˆ‘ä»¬ä¸éœ€è¦å¯¹ptrè¿›è¡Œfreeï¼Œå› ä¸ºptrçš„æŒ‡å‘å’Œpæ˜¯ä¸€æ ·çš„\nfree(p)çš„æ—¶å€™ï¼Œptræ‰€æŒ‡å‘çš„ç©ºé—´ä¹Ÿè¢«freeæ‰äº†\n\n\nreallocç¼©å°ç©ºé—´çš„æ—¶å€™ï¼Œä¼šæŠŠåŸæ¥ç©ºé—´åé¢çš„å†…å®¹éƒ½å‰”é™¤\n\n\n3.å¸¸è§é”™è¯¯3.1å¯¹NULLæŒ‡é’ˆçš„è§£å¼•ç”¨void test()&#123;  int *p = (int *)malloc(INT_MAX/4);  *p = 20;//å¦‚æœpçš„å€¼æ˜¯NULLï¼Œå°±ä¼šæœ‰é—®é¢˜  free(p);&#125;\n\nINT_MAXæ˜¯intç±»å‹çš„æœ€å¤§å€¼ï¼Œå¯ä»¥åœ¨å¤´æ–‡ä»¶limits.hé‡Œé¢æŸ¥è¯¢å¹¶ä½¿ç”¨\n3.2å¯¹åŠ¨æ€å†…å­˜ç©ºé—´çš„è¶Šç•Œè®¿é—®å’Œæ•°ç»„ä¸€æ ·ï¼ŒåŠ¨æ€å†…å­˜ç©ºé—´ä¹Ÿæ˜¯ä¸èƒ½è¶Šç•Œè®¿é—®çš„ï¼\nvoid test()&#123; int i = 0; int *p = (int *)malloc(10*sizeof(int)); if(NULL == p) &#123; exit(EXIT_FAILURE); &#125; for(i=0; i&lt;=10; i++)//åº”è¯¥æ˜¯i&lt;10 &#123; *(p+i) = i;//å½“iæ˜¯10çš„æ—¶å€™è¶Šç•Œè®¿é—® &#125; free(p);&#125;\n\n3.3å¯¹éåŠ¨æ€å†…å­˜ç©ºé—´è¿›è¡Œfreevoid test()&#123; int a = 10; int *p = &amp;a; free(p);//err&#125;\n\n3.4ä½¿ç”¨freeé‡Šæ”¾åŠ¨æ€å†…å­˜ç©ºé—´çš„ä¸€éƒ¨åˆ†void test()&#123; int *p = (int *)malloc(100); p++; free(p);//pä¸å†æŒ‡å‘åŠ¨æ€å†…å­˜çš„èµ·å§‹ä½ç½®&#125;\n\n\néœ€è¦ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥è®°ä½èµ·å§‹åœ°å€ï¼Œç”¨å¦å¤–ä¸€ä¸ªæŒ‡é’ˆæ¥è¿›è¡Œèµ‹å€¼ç­‰æ“ä½œ\n\n3.5å¯¹ä¸€ä¸ªç©ºé—´è¿›è¡Œé‡å¤é‡Šæ”¾void test()&#123; int *p = (int *)malloc(100); free(p); free(p);//é‡å¤é‡Šæ”¾&#125;\n\nåœ¨freeä¹‹åç«‹é©¬æŠŠpç½®ä¸ºç©ºæŒ‡é’ˆï¼Œå°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜\n\nfreeå‡½æ•°æ¥æ”¶ç©ºæŒ‡é’ˆï¼Œä¸åšä»»ä½•æ“ä½œ\n\n3.6å†…å­˜æ³„æ¼å¦‚æœå¿˜è®°é‡Šæ”¾åŠ¨æ€å†…å­˜å¼€è¾Ÿçš„ç©ºé—´ï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼\nvoid test()&#123; \tint *p = (int*)malloc(100); \tif(NULL != p) \t&#123; \t\t*p = 20; \t&#125;    //æ²¡æœ‰é‡Šæ”¾pçš„ç©ºé—´&#125;int main()&#123; \ttest();\twhile(1);&#125;\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè°ä½¿ç”¨å°±è°é‡Šæ”¾ã€‚å‡½æ•°é‡Œä½¿ç”¨å°±åœ¨å‡½æ•°é‡Œé‡Šæ”¾ï¼Œé™¤ééœ€è¦ä¼ å›ä¸»å‡½æ•°è¿›è¡Œæ“ä½œã€‚\n\nå¦‚æœæ²¡æœ‰ä¼ å›ä¸»å‡½æ•°ï¼Œä¹Ÿæ²¡åœ¨å‡½æ•°é‡Œè¿›è¡Œé‡Šæ”¾ï¼Œè¯¥æŒ‡é’ˆå˜é‡å·²ç»è¢«é”€æ¯äº†ï¼Œæ— æ³•è¿›è¡Œé‡Šæ”¾æ“ä½œï¼\n\nå¦‚æœä¸»å‡½æ•°é‡Œç¨‹åºæ²¡æœ‰ç»“æŸï¼Œå°±é€ æˆäº†å†…å­˜æµªè´¹\n\n4.C&#x2F;C++ç¨‹åºä¸­å†…å­˜åŒºåŸŸåˆ’åˆ†\næ ˆåŒºï¼ˆstackï¼‰ï¼šåœ¨æ‰§è¡Œå‡½æ•°æ—¶ï¼Œå‡½æ•°å†…å±€éƒ¨å˜é‡çš„å­˜å‚¨å•å…ƒéƒ½å¯ä»¥åœ¨æ ˆä¸Šåˆ›å»ºï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶è¿™äº›å­˜å‚¨å•å…ƒè‡ªåŠ¨è¢«é‡Šæ”¾ã€‚æ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯åˆ†é…çš„å†…å­˜å®¹é‡æœ‰é™ã€‚ æ ˆåŒºä¸»è¦å­˜æ”¾è¿è¡Œå‡½æ•°è€Œåˆ†é…çš„å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›æ•°æ®ã€è¿”å›åœ°å€ç­‰ã€‚\n\nå †åŒºï¼ˆheapï¼‰ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ ã€‚åˆ†é…æ–¹å¼ç±»ä¼¼äºé“¾è¡¨ã€‚\n\næ•°æ®æ®µï¼ˆé™æ€åŒºï¼‰ï¼ˆstaticï¼‰å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€æ•°æ®ã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚\n\nä»£ç æ®µï¼šå­˜æ”¾å‡½æ•°ä½“ï¼ˆç±»æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°ï¼‰çš„äºŒè¿›åˆ¶ä»£ç ã€‚\n\n\n\næœ‰äº†è¿™å¹…å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´å¥½çš„ç†è§£åœ¨ã€Šåˆè¯†Cè¯­è¨€ã€‹ä¸­è®²çš„staticå…³é”®å­—ä¿®é¥°å±€éƒ¨å˜é‡çš„ä¾‹å­äº†ã€‚å®é™…ä¸Šæ™®é€šçš„å±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆåŒºåˆ†é…ç©ºé—´çš„ï¼Œæ ˆåŒºçš„ç‰¹ç‚¹æ˜¯åœ¨ä¸Šé¢åˆ›å»ºçš„å˜é‡å‡ºäº†ä½œç”¨åŸŸå°±é”€æ¯ã€‚ä½†æ˜¯è¢«staticä¿®é¥°çš„å˜é‡å­˜æ”¾åœ¨æ•°æ®æ®µï¼ˆé™æ€åŒºï¼‰ï¼Œæ•°æ®æ®µçš„ç‰¹ç‚¹æ˜¯åœ¨ä¸Šé¢åˆ›å»ºçš„å˜é‡ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ‰é”€æ¯ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸå˜é•¿\n\n\n\nç»“è¯­åŠ¨æ€å†…å­˜å…¶å®å°±æ˜¯æ•°ç»„çš„é«˜çº§å½¢å¼ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ç®¡ç†å¼€è¾Ÿçš„è¿ç»­çš„ç©ºé—´ã€‚\nä½ å­¦åºŸäº†å—ï¼ŸğŸ¤¤\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘æ–‡ä»¶æ“ä½œï¼ˆè¯¦è§£ï¼‰","url":"/2022/03/01/note_c/42%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/","content":"[TOC]\nå¥½ä¹…æ²¡æœ‰æ›´æ–°Cè¯­è¨€å­¦ä¹ çš„åšå®¢äº†ï¼Œä»Šå¤©å¸¦æ¥çš„æ˜¯æ–‡ä»¶éƒ¨åˆ†çš„çŸ¥è¯†ç‚¹ï¼ğŸ˜‹\n1.ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶ï¼Ÿä¹‹å‰å­¦ä¹ è¿‡é€šè®¯å½•çš„ä»£ç å®ç°ï¼Œå¯ä»¥ç»™é€šè®¯å½•ä¸­å¢åŠ ã€åˆ é™¤è”ç³»äººã€‚ä½†æ˜¯è¿™ä¸ªé€šè®¯å½•åœ¨ä½ exeæ–‡ä»¶å…³é—­çš„åŒæ—¶å°±è¢«é”€æ¯äº†ï¼Œå®ƒçš„å†…å®¹å¹¶ä¸èƒ½é¡ºå»¶åˆ°ä¸‹ä¸€æ¬¡æ‰“å¼€è¿™ä¸ªé€šè®¯å½•ï¼Œè¿™å¯¹æˆ‘ä»¬çš„ä½¿ç”¨äº§ç”Ÿäº†ä¸ä¾¿ã€‚\nè€Œæ–‡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æ•°æ®çš„æŒä¹…åŒ–ï¼šå°†æ•°æ®ä¿å­˜åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡æ‰“å¼€é€šè®¯å½•çš„æ—¶å€™ï¼Œä¹‹å‰ä¿å­˜çš„è”ç³»äººä¸ä¼šæ¶ˆå¤±ã€‚\n\n\n2.ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿæ–‡ä»¶å°±æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„å¸¦ç‰¹å®šæ ¼å¼çš„æ•°æ®ã€‚\n2.1æ–‡ä»¶åˆ†ç±»åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸€èˆ¬è®¨è®ºä¸¤ç§æ–‡ä»¶ï¼šç¨‹åºæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶\n\nç¨‹åºæ–‡ä»¶ï¼šä»£ç æºæ–‡ä»¶å¦‚.cï¼Œç›®æ ‡æ–‡ä»¶.obj/.oï¼Œå¯æ‰§è¡Œæ–‡ä»¶.exe\næ•°æ®æ–‡ä»¶ï¼šç¨‹åºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¯»å†™çš„æ•°æ®ï¼Œæ¯”å¦‚è¯»å–å†…å®¹çš„æ–‡ä»¶ï¼Œä»¥åŠæ•°æ®è¾“å‡ºçš„æ–‡ä»¶\n\nè¿™ç¯‡åšå®¢æˆ‘ä»¬äº†è§£çš„æ˜¯æ•°æ®æ–‡ä»¶\n2.2æ–‡ä»¶åæ–‡ä»¶ååŒ…å«3ä¸ªéƒ¨åˆ†ï¼šæ–‡ä»¶è·¯å¾„+æ–‡ä»¶åä¸»å¹²+æ–‡ä»¶åç¼€\nå¦‚ï¼šc:\\code\\test.txt\næ–‡ä»¶æ ‡è¯†å¸¸è¢«ç§°ä¸ºæ–‡ä»¶å\n3.æ–‡ä»¶çš„ä½¿ç”¨3.1æ–‡ä»¶æŒ‡é’ˆåœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œéå¸¸é‡è¦çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯æ–‡ä»¶ç±»å‹æŒ‡é’ˆï¼Œç®€ç§°æ–‡ä»¶æŒ‡é’ˆ\næ¯ä¸ªæ–‡ä»¶åœ¨å¼€è¾Ÿçš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªå¯¹äºçš„æ–‡ä»¶ä¿¡æ¯åŒºï¼Œç”¨äºä¿å­˜æ–‡ä»¶çš„åå­—ã€çŠ¶æ€ã€å½“å‰çš„ä½ç½®ç­‰ç›¸å…³ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨äº†ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œè¯¥ç»“æ„ä½“ç³»ç»Ÿå£°æ˜ä¸ºFILE\nä¸åŒçš„Cè¯­è¨€ç¼–è¯‘å™¨éƒ½æœ‰ä¸åŒçš„FILEç±»å‹ï¼Œä½†æ˜¯å¤§åŒå°å¼‚ã€‚\næ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæ ¹æ®æ–‡ä»¶çš„å†…å®¹ï¼Œè‡ªåŠ¨åˆ›å»ºFILEç»“æ„ä½“å˜é‡ï¼Œå¹¶å¡«å……å®ƒçš„ä¿¡æ¯ã€‚\n\næˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡ä¸€ä¸ªFILEç±»å‹çš„æŒ‡é’ˆæ¥è®¿é—®è¿™ä¸ªç»“æ„ä½“å˜é‡\n\n3.2æ‰“å¼€å’Œå…³é—­æ–‡ä»¶æ–‡ä»¶åœ¨è¯»å†™ä¹‹å‰éœ€è¦æ‰“å¼€æ–‡ä»¶ï¼Œä½¿ç”¨ç»“æŸåéœ€è¦å…³é—­æ–‡ä»¶\n\nè¿™ä¸€ç‚¹å’ŒåŠ¨æ€å†…å­˜ç®¡ç†å¾ˆç›¸ä¼¼\n\nANSICè§„å®šç”¨fopenå‡½æ•°æ¥æ‰“å¼€æ–‡ä»¶ï¼Œfcloseæ¥å…³é—­æ–‡ä»¶ã€‚\næ‰“å¼€æ–‡ä»¶çš„åŒæ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªFILE*çš„æŒ‡é’ˆå˜é‡æŒ‡å‘è¯¥æ–‡ä»¶ã€‚\n\nå…³é—­æ–‡ä»¶åï¼Œæ–‡ä»¶æŒ‡é’ˆå°±å˜æˆäº†é‡æŒ‡é’ˆï¼Œéœ€è¦ç½®ä¸ºNULLé˜²æ­¢é”™è¯¯è°ƒç”¨\n\nfopenå‡½æ•°æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼Œä¼šè¿”å›ç©ºæŒ‡é’ˆ\n#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;int main()&#123;    //æ‰“å¼€æ–‡ä»¶\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;r&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));//ç”¨è¯¥å‡½æ•°æ‰“å°é”™è¯¯ä¿¡æ¯\t\treturn 0;\t&#125;\t//1.è¯»æ–‡ä»¶    \t//å…³é—­æ–‡ä»¶\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;int main()&#123;\t//æ‰“å¼€æ–‡ä»¶\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));//ç”¨è¯¥å‡½æ•°æ‰“å°é”™è¯¯ä¿¡æ¯\t\treturn 0;\t&#125;\t//2.å†™æ–‡ä»¶        //å…³é—­æ–‡ä»¶\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n\nstrerrorå‡½æ•°åœ¨è¿™ç¯‡åšå®¢é‡Œé¢æœ‰è®²è§£ğŸ‘‰ç‚¹æˆ‘\n\n3.2.1æ–‡ä»¶ä½¿ç”¨æ–¹å¼é€šè¿‡è¿™å¼ è¡¨æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ä¸€ä¸‹æ–‡ä»¶ä½¿ç”¨æ–¹å¼çš„ä¸åŒç±»å‹\n\næ³¨æ„ï¼šä½¿ç”¨å®ƒä»¬ç”¨çš„éƒ½æ˜¯åŒå¼•å·ï¼Œè€Œä¸æ˜¯å•å¼•å·ï¼\n\n\nç”¨wå†™å…¥çš„æ—¶å€™ï¼Œä¼šè¦†ç›–åŸæœ¬å·²æœ‰å†…å®¹ã€‚å¦‚æœéœ€è¦åœ¨å·²æœ‰å†…å®¹åé¢è¿½åŠ ï¼Œéœ€è¦ä½¿ç”¨a\n\n3.2.2æ ‡å‡†è¾“å…¥è¾“å‡ºæµ\nè¾“å‡ºï¼šå†…å­˜â†’æ–‡ä»¶\nè¾“å…¥ï¼šæ–‡ä»¶â†’å†…å­˜\n\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼šCè¯­è¨€ç¨‹åºï¼Œè¿è¡Œçš„æ—¶å€™ä¼šé»˜è®¤æ‰“å¼€3ä¸ªæµ\n\nstdinï¼šæ ‡å‡†è¾“å…¥æµ\nstdoutï¼šæ ‡å‡†è¾“å‡ºæµ\nstderrï¼šæ ‡å‡†é”™è¯¯æµ\n\nåœ¨æ‰§è¡Œè¾“å…¥è¾“å‡ºæ“ä½œçš„æ—¶å€™ï¼Œä¹‹å‰æˆ‘ä»¬æ˜¯ç›´æ¥å°†å†…å­˜ä¸­çš„æ•°æ®printfæ‰“å°åˆ°å±å¹•ä¸Š\nç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–‡ä»¶æŒ‡é’ˆï¼Œå°†æ•°æ®è¾“å…¥åˆ°æ ‡å‡†è¾“å‡ºæµï¼Œè¾¾åˆ°ç±»ä¼¼printfçš„æ•ˆæœ\n\n3.3æ–‡ä»¶è¾“å…¥è¾“å‡ºå‡½æ•°ä¸Šè¿°ä»£ç ä¸­ï¼Œç”¨åˆ°äº†fputcå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå­—ç¬¦è¾“å…¥åˆ°æ–‡ä»¶ä¸­\nä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›æˆ‘ä»¬ä¼šç”¨åˆ°çš„æ–‡ä»¶å‡½æ•°\n\n3.3.1å­—ç¬¦è¾“å…¥è¾“å‡ºfputcå‡½æ•°ï¼šå‘æ–‡ä»¶ä¸­å†™å…¥å•ä¸ªå­—ç¬¦\n\nfgetcå‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–å•ä¸ªå­—ç¬¦\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠåˆšåˆšæ–‡ä»¶ä¸­å†™å…¥çš„å­—ç¬¦å…¨éƒ¨æ‰“å°å‡ºæ¥äº†\n\nå®ç°æ–‡ä»¶æ‹·è´å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­\nint main()&#123;\t//å®ç°ä¸€ä¸ªä»£ç å°†data.txt æ‹·è´ä¸€ä»½ ç”Ÿæˆdata2.txt\tFILE* pr = fopen(&quot;data.txt&quot;, &quot;r&quot;);\tif (pr == NULL)\t&#123;\t\tprintf(&quot;open for reading: %s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tFILE* pw = fopen(&quot;data2.txt&quot;, &quot;w&quot;);\tif (pw == NULL)\t&#123;\t\tprintf(&quot;open for writting: %s\\n&quot;, strerror(errno));\t\tfclose(pr);\t\tpr = NULL;\t\treturn 0;\t&#125;\t//æ‹·è´æ–‡ä»¶\tint ch = 0;\twhile ((ch = fgetc(pr)) != EOF)\t&#123;\t\tfputc(ch, pw);\t&#125;\tfclose(pr);\tpr = NULL;\tfclose(pw);\tpw = NULL;\treturn 0;&#125;\n\n\n\n3.3.2æ–‡æœ¬è¡Œè¾“å…¥è¾“å‡ºfputså‡½æ•°ï¼šå°†å­—ç¬¦ä¸²å†™å…¥åˆ°æ–‡ä»¶ä¸­\n//å†™ä¸€è¡Œ#include &lt;stdio.h&gt;int main()&#123;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tfputs(&quot;hello world\\n&quot;, pf);\tfputs(&quot;hehe\\n&quot;, pf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è¡Œå­—ç¬¦ä¸²å·²ç»è¢«å†™å…¥åˆ°äº†é¡¹ç›®è·¯å¾„ä¸‹çš„data.txtæ–‡ä»¶ä¸­\n\nfgetså‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–è§„å®šé•¿åº¦çš„å­—ç¬¦ä¸²\nè¯¥å‡½æ•°åœ¨ä½¿ç”¨çš„æ—¶å€™å…·æœ‰ç¬¬3ä¸ªå‚æ•°ï¼Œç”¨äºé™åˆ¶è¯»å–å­—ç¬¦ä¸²çš„é•¿åº¦\n////è¯»æ–‡ä»¶-è¯»ä¸€è¡Œint main()&#123;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;r&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tchar buf[1000] = &#123;0&#125;;\t//è¯»æ–‡ä»¶\tfgets(buf, 3, pf);\tprintf(&quot;%s\\n&quot;, buf);\tfgets(buf, 3, pf);\tprintf(&quot;%s\\n&quot;, buf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„æ˜¯3ï¼Œå´åªè¯»å–äº†2ä¸ªå­—ç¬¦å‡ºæ¥\n\nå°†buf[2]æ›´æ”¹ä¸º1ï¼Œè°ƒè¯•æŸ¥çœ‹\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªfgetså‡½æ•°åï¼ŒåŸæœ¬çš„1è¢«å†™å…¥æˆäº†\\0\n\nè¿™å°±è¯å®ï¼šfgetså‡½æ•°åœ¨è¯»å–å­—ç¬¦çš„æ—¶å€™ï¼Œä¼šä»¥\\0ä½œä¸ºç»“å°¾\nå¦‚æœæˆ‘ä»¬éœ€è¦è¯»å–3ä¸ªå­—ç¬¦ï¼Œå°±éœ€è¦å°†é™åˆ¶è®¾ç½®ä¸º4\n\n3.3.3æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºè¿™é‡Œçš„â€œæ ¼å¼åŒ–â€æŒ‡çš„æ˜¯ç»“æ„ä½“è¿™ç§å…·æœ‰ç‰¹å®šæ ¼å¼çš„æ•°æ®å†…å®¹\nfprintfå‡½æ•°ï¼šå°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶ä¸­\n#include&lt;stdio.h&gt;//â€¦â€¦struct Stu&#123;\tchar name[20];\tint age;\tdouble d;&#125;;int main()&#123;\tstruct Stu s = &#123; &quot;å¼ ä¸‰&quot;, 20, 95.5 &#125;;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//å†™æ ¼å¼åŒ–çš„æ•°æ®\tfprintf(pf, &quot;%s %d %lf&quot;, s.name, s.age, s.d);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n\nfscanfå‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®ï¼Œå­˜æ”¾åˆ°å¯¹åº”ç»“æ„ä½“å˜é‡sä¸­\n\n\n3.3.4äºŒè¿›åˆ¶è¾“å…¥è¾“å‡º\nfreadã€fwriteå¯ä»¥æ“ä½œä»»æ„ç±»å‹çš„æ•°æ®\næ­£å¦‚å®ƒçš„åå­—ï¼ŒäºŒè¿›åˆ¶è¾“å…¥å‡½æ•°æ˜¯å°†å†…å®¹ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼è¾“å…¥åˆ°æ–‡ä»¶ä¸­\n\n\nä½¿ç”¨è¯¥å‡½æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨**â€rbâ€,â€wbâ€**æ¥æ‰“å¼€æ–‡ä»¶\n\n\nfwrite(s, sizeof(struct Stu), 2, pf);//s æ¥æº//sizeof éœ€è¦å†™å…¥å…ƒç´ çš„å¤§å°//2 éœ€è¦å†™å…¥å…ƒç´ çš„ä¸ªæ•°//pf å†™å…¥çš„ç›®æ ‡æ–‡ä»¶æŒ‡é’ˆ\n\nä»¥ä¸‹æ˜¯å†™å…¥ç»“æ„ä½“å˜é‡çš„ä¾‹å­\nstruct Stu&#123;\tchar name[20];\tint age;\tdouble d;&#125;;//äºŒè¿›åˆ¶çš„å†™int main()&#123;\tstruct Stu s[2] = &#123; &#123;&quot;å¼ ä¸‰&quot;, 20, 95.5&#125; , &#123;&quot;lisi&quot;, 16, 66.5&#125;&#125;;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;wb&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//æŒ‰ç…§äºŒè¿›åˆ¶çš„æ–¹å¼å†™æ–‡ä»¶\tfwrite(s, sizeof(struct Stu), 2, pf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®å·²ç»éƒ¨åˆ†æˆäº†ä¹±ç ã€‚è¿™æ—¶å€™å®ƒçš„å†…å®¹å·²ç»æ˜¯ç”¨äºŒè¿›åˆ¶å­˜æ”¾çš„äº†ï¼Œtxté˜…è¯»å™¨æ— æ³•æ­£ç¡®è¯»å‡ºè¿™äº›æ•°æ®\n\näºŒè¿›åˆ¶çš„è¯»å–å°±æ˜¯å¤ç°è¿™ä¸€æ­¥ï¼Œå°†æ–‡æœ¬ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ä»¥ç‰¹å®šæ ¼å¼è¯»å–å‡ºæ¥ï¼Œå¹¶æ”¾å…¥å¯¹åº”å˜é‡\nfread(s, sizeof(struct Stu), 2, pf);//s å­˜æ”¾æ–‡ä»¶å†…å®¹çš„å˜é‡//sizeof éœ€è¦è¯»å–å…ƒç´ çš„å¤§å°//2 éœ€è¦è¯»å–å…ƒç´ çš„ä¸ªæ•°//pf è¯»å–çš„ç›®æ ‡æ–‡ä»¶æŒ‡é’ˆ\n\n\n3.3.5 sscanf&#x2F;sprintfå‡½æ•°è¿™ä¸¤ä¸ªå‡½æ•°æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶é‡Œé¢çš„æ ¼å¼åŒ–æ•°æ®ï¼ˆå¦‚ç»“æ„ä½“ï¼‰ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ‹·è´åˆ°å­—ç¬¦æ•°ç»„é‡Œé¢\n\nè§ä¸‹å›¾\n\n\n\n3.4.å…¶ä»–æ–‡ä»¶å‡½æ•°3.4.1 fseek\nhttp://cplusplus.com/reference/cstdio/fseek/?kw=fseek\n\nè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šå°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°ç›¸å¯¹äºæŸä¸ªä½ç½®çš„ç‰¹å®šåç§»é‡çš„ä½ç½®\n\nå¬èµ·æ¥æœ‰ç‚¹ç»•å£ï¼Œä¸¾ä¾‹è¯´æ˜å°±çŸ¥é“äº†\n\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²â€œabcdefâ€\næ¯æ¬¡ä½¿ç”¨ä¸€æ¬¡fgetcï¼Œæ–‡ä»¶æŒ‡é’ˆå°±ä¼šå¾€åè¿›ä¸€ä½ã€‚ä½¿ç”¨ä¸¤æ¬¡ï¼Œæ–‡ä»¶æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å­—ç¬¦c\nå¦‚æœæˆ‘ä»¬éœ€è¦æŒ‡å‘fï¼Œå°±è®©æŒ‡é’ˆ\n\nä»å¼€å§‹ä½ç½®å‘åè¿›5ä½\nä»å½“å‰ä½ç½®å‘åè¿›3ä½\nä»ç»“æŸä½ç½®å‘å‰è¿›1ä½\n\n\næˆ‘ä»¬å¯ä»¥ç”¨è¯¥å‡½æ•°ï¼Œå®šä½æ–‡ä»¶æŒ‡é’ˆï¼Œå°†å…¶æ›´æ”¹åˆ°æˆ‘ä»¬éœ€è¦çš„ä½ç½®ï¼Œè¿›è¡Œå­—ç¬¦æ›¿æ¢ç­‰æ“ä½œ\nint main()&#123;    FILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);    if (pf == NULL)    &#123;        printf(&quot;%s\\n&quot;, strerror(errno));        return 0;    &#125;    //å†™æ–‡ä»¶    int ch = 0;    for (ch = &#x27;a&#x27;; ch &lt;= &#x27;z&#x27;; ch++)    &#123;        fputc(ch, pf);    &#125;    //å®šä½æ–‡ä»¶æŒ‡é’ˆ        fseek(pf, -2, SEEK_END);    fputc(&#x27;#&#x27;, pf);//å°†å½“å‰å­—ç¬¦æ›¿æ¢æˆ#    fclose(pf);    pf = NULL;    return 0;&#125;\n\n\n3.4.2 ftellè¿”å›æ–‡ä»¶æŒ‡é’ˆå½“å‰çš„åç§»é‡ï¼ˆç›¸å¯¹äºæ–‡ä»¶å¼€å¤´ï¼‰\n\n3.4.3 rewind\nhttp://cplusplus.com/reference/cstdio/rewind/?kw=rewind\n\nè®©æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®å›åˆ°æ–‡ä»¶çš„èµ·å§‹ä½ç½®\nfseek(pf, 0, SEEK_SET);//rewindå‡½æ•°ä¸è¯¥fseekå‡½æ•°æ“ä½œç­‰ä»·//ä½†æ˜¯rewindæ›´æ–¹ä¾¿\n\nint main()&#123;    FILE* pf = fopen(&quot;test.txt&quot;, &quot;r&quot;);    if (pf == NULL)    &#123;        printf(&quot;%s\\n&quot;, strerror(errno));        return 0;    &#125;    //è¯»æ–‡ä»¶    int ch = fgetc(pf);    printf(&quot;%c\\n&quot;, ch);//a    ch = fgetc(pf);    printf(&quot;%c\\n&quot;, ch);//b        int ret = ftell(pf);    printf(&quot;%d\\n&quot;, ret);//2    rewind(pf);    //fseek(pf, 0, SEEK_SET);    ret = ftell(pf);    printf(&quot;%d\\n&quot;, ret);//0    fclose(pf);    pf = NULL;    return 0;&#125;\n\n4.æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“äº†fread&#x2F;fwriteå‡½æ•°å¯ä»¥å®ç°äºŒè¿›åˆ¶çš„è¾“å…¥è¾“å‡ºï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆå…·ä½“å®ç°çš„å‘¢ï¼Ÿ\n\næ ¹æ®æ•°æ®çš„ç»„ç»‡å½¢å¼ï¼Œæ•°æ®æ–‡ä»¶è¢«ç§°ä¸ºæ–‡æœ¬æ–‡ä»¶æˆ–è€…äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ æ•°æ®åœ¨å†…å­˜ä¸­ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨ï¼Œå¦‚æœä¸åŠ è½¬æ¢çš„è¾“å‡ºåˆ°å¤–å­˜ï¼Œå°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\nå¦‚æœè¦æ±‚åœ¨å¤–å­˜ä¸Šä»¥ASCIIç çš„å½¢å¼å­˜å‚¨ï¼Œåˆ™éœ€è¦åœ¨å­˜å‚¨å‰è½¬æ¢ã€‚ä»¥ASCIIå­—ç¬¦çš„å½¢å¼å­˜å‚¨çš„æ–‡ä»¶å°±æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚\nåœ¨å†…å­˜ä¸­ï¼Œå­—ç¬¦ä¸€å¾‹ä»¥ASCIIå½¢å¼å­˜å‚¨ï¼Œæ•°å€¼å‹æ•°æ®æ—¢å¯ä»¥ç”¨ASCIIå½¢å¼å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ã€‚\nå¯¹äºæ•°å­—10000ï¼Œå¯ä»¥ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼å­˜å‚¨\n\n1 0 0 0 0 ä½œä¸º5ä¸ªå­—ç¬¦æ¥å­˜å‚¨â€“å ç”¨5ä¸ªå­—èŠ‚\nä»¥æ•°å­—æœ¬èº«çš„äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨â€“å ç”¨4ä¸ªå­—èŠ‚\n\nè¿™æ—¶å€™ä½¿ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼ï¼Œå°±èƒ½èŠ‚çœç©ºé—´\n\nç”¨å¦‚ä¸‹ä»£ç ï¼Œå°†10000ä»¥äºŒè¿›åˆ¶æ–¹å¼å†™å…¥æ–‡ä»¶ä¸­\n\nåœ¨VSä¸­æˆ‘ä»¬å¯ä»¥ä»¥ç‰¹å®šæ‰“å¼€æ–¹å¼äºŒè¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€test.txtæ–‡æ¡£\n\nå¯ä»¥çœ‹åˆ°10000æ˜¯ä»¥äºŒè¿›åˆ¶ç çš„å½¢å¼å­˜æ”¾åœ¨æ–‡ä»¶ä¸­çš„\n\n\nè¿™é‡Œæ¶‰åŠåˆ°äº†å¤§å°ç«¯çš„é—®é¢˜ğŸ‘‰ç‚¹æˆ‘\n\n\n5.æ–‡ä»¶è¯»å–ç»“æŸçš„åˆ¤å®š5.1é”™è¯¯ä½¿ç”¨feofå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨feofå‡½æ•°çš„è¿”å›å€¼æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ç»“æŸ\nè€Œæ˜¯åº”åœ¨æ–‡ä»¶è¯»å–ç»“æŸçš„æ—¶å€™ï¼Œç”¨feofå‡½æ•°åˆ¤æ–­æ˜¯è¯»å–å¤±è´¥ç»“æŸï¼Œè¿˜æ˜¯é‡åˆ°æ–‡ä»¶ç»“å°¾æ­£å¸¸ç»“æŸ\n\næ–‡æœ¬æ–‡ä»¶è¯»å–æ˜¯å¦ç»“æŸï¼Œåˆ¤æ–­è¿”å›å€¼\nEOF(fgetc)\nNULL(fgets)\n\n\n\n\nferrorå‡½æ•°ï¼šåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‡ºç°äº†è¯»å–é”™è¯¯ã€‚å¦‚æœæœ‰ï¼Œè¿”å›ä¸ºçœŸ\n\nhttp://cplusplus.com/reference/cstdio/ferror/?kw=ferror\n\n\n\näºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å–ç»“æŸï¼Œåˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»çš„ä¸ªæ•°\nfreadçš„è¿”å›å€¼æ˜¯æˆåŠŸè¯»å–æ•°æ®çš„ä¸ªæ•°\nåˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»å–çš„ä¸ªæ•°\n\n\n\n\n6.æ–‡ä»¶ç¼“å†²åŒº\nANSIC æ ‡å‡†é‡‡ç”¨â€œç¼“å†²æ–‡ä»¶ç³»ç»Ÿâ€å¤„ç†æ•°æ®æ–‡ä»¶ã€‚\n\næ‰€è°“ç¼“å†²æ–‡ä»¶ç³»ç»Ÿæ˜¯æŒ‡ç³»ç»Ÿè‡ªåŠ¨åœ°åœ¨å†…å­˜ä¸­ä¸ºç¨‹åºä¸­æ¯ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶å¼€è¾Ÿä¸€å—â€œæ–‡ä»¶ç¼“å†²åŒºâ€ã€‚ä»å†…å­˜å‘ç£ç›˜è¾“å‡ºæ•°æ®ä¼šå…ˆé€åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼Œè£…æ»¡ç¼“å†²åŒºåæ‰ä¸€èµ·é€åˆ°ç£ç›˜ä¸Šã€‚\n\nè¿™å°±å’Œgitä¸€æ ·ï¼Œæ˜¯å…ˆå°†éœ€è¦pushçš„æ–‡ä»¶æ”¾å…¥ç¼“å­˜åŒºï¼Œç¡®è®¤æ–‡ä»¶æ— è¯¯åå†pushåˆ°è¿œç¨‹ä»“åº“ä¸­\n\nå¦‚æœä»ç£ç›˜å‘è®¡ç®—æœºè¯»å…¥æ•°æ®ï¼Œåˆ™ä»ç£ç›˜æ–‡ä»¶ä¸­è¯»å–æ•°æ®è¾“å…¥åˆ°å†…å­˜ç¼“ å†²åŒºï¼ˆå……æ»¡ç¼“å†²åŒºï¼‰ï¼Œç„¶åå†ä»ç¼“å†²åŒºé€ä¸ªåœ°å°†æ•°æ®é€åˆ°ç¨‹åºæ•°æ®åŒºï¼ˆç¨‹åºå˜é‡ç­‰ï¼‰ã€‚ç¼“å†²åŒºçš„å¤§å°æ˜¯Cç¼–è¯‘ç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰å†³å®šçš„ã€‚\n\nå› ä¸ºæœ‰ç¼“å†²åŒºçš„å­˜åœ¨ï¼ŒCè¯­è¨€åœ¨æ“ä½œæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åšåˆ·æ–°ç¼“å†²åŒºæˆ–è€…åœ¨æ–‡ä»¶æ“ä½œç»“æŸçš„æ—¶å€™å…³é—­æ–‡ ä»¶ã€‚ å¦‚æœä¸åšï¼Œå¯èƒ½å¯¼è‡´è¯»å†™æ–‡ä»¶çš„é—®é¢˜ã€‚\nä»£ç ç¤ºä¾‹1#include &lt;stdio.h&gt;#include &lt;windows.h&gt;int main()&#123;\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);\tfputs(&quot;abcdef&quot;, pf);//å…ˆå°†ä»£ç æ”¾åœ¨è¾“å‡ºç¼“å†²åŒº\tprintf(&quot;ç¡çœ 10ç§’-å·²ç»å†™æ•°æ®äº†ï¼Œæ‰“å¼€test.txtæ–‡ä»¶ï¼Œå‘ç°æ–‡ä»¶æ²¡æœ‰å†…å®¹\\n&quot;);\tSleep(10000);\tprintf(&quot;åˆ·æ–°ç¼“å†²åŒº\\n&quot;);\tfflush(pf);//åˆ·æ–°ç¼“å†²åŒºæ—¶ï¼Œæ‰å°†è¾“å‡ºç¼“å†²åŒºçš„æ•°æ®å†™åˆ°æ–‡ä»¶ï¼ˆç£ç›˜ï¼‰\t\tprintf(&quot;å†ç¡çœ 10ç§’-æ­¤æ—¶ï¼Œå†æ¬¡æ‰“å¼€test.txtæ–‡ä»¶ï¼Œæ–‡ä»¶æœ‰å†…å®¹äº†\\n&quot;);\tSleep(10000);\tfclose(pf);\t//æ³¨ï¼šfcloseåœ¨å…³é—­æ–‡ä»¶çš„æ—¶å€™ï¼Œä¹Ÿä¼šåˆ·æ–°ç¼“å†²åŒº\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œç¨‹åºï¼Œé€šè¿‡sleepå‡½æ•°æš‚åœç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°åˆšå¼€å§‹å­—ç¬¦ä¸²å¹¶æ²¡æœ‰å­˜å…¥æ–‡ä»¶ä¸­\n\nè€Œæ˜¯å…ˆå†™å…¥è¾“å…¥ç¼“å­˜åŒºï¼Œåˆ·æ–°ç¼“å­˜åŒºåï¼Œæ‰å†™å…¥txtæ–‡ä»¶\n\nä»£ç ç¤ºä¾‹2\n#include &lt;stdio.h&gt;#include &lt;windows.h&gt;int main()&#123;\twhile (1)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°\t\tSleep(1000);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep\t&#125;\treturn 0;&#125;\n\n\nåœ¨Linuxç¯å¢ƒä¸‹ï¼ˆæ ‘è“æ´¾ï¼‰æµ‹è¯•è¿™ä¸ªä»£ç \nå¯ä»¥çœ‹åˆ°ï¼Œå»æ‰\\nåï¼Œä»£ç å¹¶ä¸ä¼šæ‰“å°hehe\n\nç¼–è¯‘çš„æ—¶å€™ï¼Œé‡åˆ°æŠ¥é”™ğŸ‘‡ï¼Œä½†æ˜¯ç¨‹åºä¾æ—§ç¼–è¯‘å‡ºæ¥äº†\nimplicit declaration of function â€˜sleepâ€™\n\nCSDNæŸ¥äº†æŸ¥ï¼Œå‘ç°æ˜¯éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶#include &lt;unistd.h&gt;\né‡æ–°ç¼–è¯‘ï¼Œæ²¡æœ‰æŠ¥é”™äº†ï¼ˆæ­¤å¤„heheå·²ç»åŠ äº†\\nï¼Œç¨‹åºæ­£å¸¸æ‰“å°ï¼‰\n\n\nç»“è¯­æ–‡ä»¶ç« èŠ‚çš„å†…å®¹éå¸¸ä¸°å¯Œï¼Œä½ å­¦è´¹äº†å—ï¼ğŸ˜\nå¤§å¤šæ•°å†…å®¹è¿˜æ˜¯éœ€è¦æˆ‘ä»¬å¤šå¤šæ“ä½œæ¥ç†Ÿæ‚‰å®ƒçš„çœŸæ­£ä½œç”¨\n\nå¦‚æœå†…å®¹æœ‰è¯¯ï¼Œè¿˜è¯·å¤§ä½¬æ— æƒ…æŒ‡æ­£ï¼\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ–‡ä»¶","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼šé¢„å¤„ç†/ç¼–è¯‘/æ±‡ç¼–/é“¾æ¥","url":"/2022/03/02/note_c/43%E9%A2%84%E5%A4%84%E7%90%86%E7%BC%96%E8%AF%91%E6%B1%87%E7%BC%96/","content":"[TOC]\nå“ˆå–½å•Šï¼Œç›†å‹ä»¬ã€‚ä¸€èµ·æ¥çœ‹çœ‹Cè¯­è¨€ä¸­ç¼–è¯‘é¢„å¤„ç†çš„å†…å®¹å§ï¼ğŸ˜œ\n1.ç¨‹åºè¿è¡Œçš„å‡ ä¸ªé˜¶æ®µä¼—æ‰€ä¸å‘¨çŸ¥ï¼ŒCè¯­è¨€çš„ç¨‹åºè¿è¡Œåˆ†ä¸ºå‡ ä¸ªé˜¶æ®µã€‚\nå’±ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå›¾ï¼Œç®€å•äº†è§£ä¸€äºŒğŸ‘‡\n\nç»†åˆ†å¼€æ¥ï¼Œç¼–è¯‘è¿˜åˆ†ä¸º3ä¸ªå°é˜¶æ®µï¼šé¢„ç¼–è¯‘ï¼ˆé¢„å¤„ç†ï¼‰ã€ç¼–è¯‘ã€æ±‡ç¼–\n\nè¿™ä¸‰ä¸ªé˜¶æ®µåˆåˆ†åˆ«åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬ç”¨linuxä¸‹çš„gccç¼–è¯‘å™¨æ¥éªŒè¯äº†\n1.1é¢„ç¼–è¯‘ç°åœ¨æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªè¿™æ ·çš„ä»£ç \n\n\nåœ¨è¿è¡Œçª—å£ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œè¿›è¡Œé¢„ç¼–è¯‘æ“ä½œï¼Œå¾—åˆ°test.iæ–‡ä»¶\ngcc -E test.c -o test.i\n\n\næ‰“å¼€è¯¥æ–‡ä»¶ï¼Œæ»‘å€’æœ€åº•éƒ¨ï¼ŒæŸ¥çœ‹å®ƒä¸æºä»£ç çš„ä¸åŒ\n\nå¯ä»¥å‘ç°ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nå¤´æ–‡ä»¶æ¶ˆå¤±ï¼šå®é™…ä¸Šè¢«å±•å¼€äº†\næ³¨é‡Šè¢«åˆ é™¤\ndefineå®šä¹‰çš„ç¬¦å·è¢«æ›¿æ¢\n\nè¿™å°±æ˜¯é¢„ç¼–è¯‘é˜¶æ®µåšçš„3ä»¶äº‹ï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸€äº›æ–‡æœ¬æ“ä½œï¼Œå¹¶æ²¡æœ‰è¿è¡Œè¯¥ä»£ç \n1.2ç¼–è¯‘è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç”Ÿæˆtest.sæ–‡ä»¶\ngcc -S test.i -o test.s\n\n\næ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå‘ç°æˆ‘ä»¬å¥½åƒçœ‹ä¸å¤ªæ‡‚å®ƒé‡Œé¢å†™äº†äº›ä»€ä¹ˆ\n\nå®é™…ä¸Šï¼Œmovã€subéƒ½æ˜¯æ±‡ç¼–è¯­è¨€ï¼Œè¿™ä¸€æ­¥å°±æ˜¯æŠŠCè¯­è¨€ä»£ç è½¬å˜æˆäº†æ±‡ç¼–ä»£ç ã€‚ è¿›è¡Œäº†ä»¥ä¸‹å‡ æ­¥æ“ä½œï¼š\n\nè¯­æ³•åˆ†æ\nè¯æ³•åˆ†æ\nè¯­ä¹‰åˆ†æ\nç¬¦å·æ±‡æ€»\n\n\n\nè¿™ä¸€éƒ¨åˆ†å†…å®¹å¯ä»¥é˜…è¯»ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹è¿™æœ¬ä¹¦ï¼Œè®°å½•ä¸€ä¸‹\n\n1.3æ±‡ç¼–gcc -c test.s -o test.o\n\n\nè¿™ä¸ªæŒ‡ä»¤ä¼šç”Ÿæˆä¸€ä¸ªtest.oç›®æ ‡æ–‡ä»¶\n\nLinuxï¼šç›®æ ‡æ–‡ä»¶åç¼€ä¸º.o\nWindowsï¼šç›®æ ‡æ–‡ä»¶åç¼€ä¸º.obj\n\n\n.oç›®æ ‡æ–‡ä»¶å’Œå¯æ‰§è¡Œæˆå¥çš„æ–‡ä»¶æ ¼å¼elf\nreadelfå·¥å…·å¯ä»¥è§£æelfæ ¼å¼çš„æ–‡ä»¶\n\nç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„ä¸œè¥¿éƒ½æ˜¯ä¹±ç \n\nå®é™…ä¸Šè¿™ä¸ªæ–‡ä»¶é‡Œé¢å­˜æ”¾çš„æ˜¯äºŒè¿›åˆ¶å†…å®¹ã€‚\næ±‡ç¼–æ“ä½œå°±æ˜¯å°†æ±‡ç¼–ä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æŒ‡ä»¤\nå…¶ä¸­æœ‰éå¸¸é‡è¦çš„ä¸€éƒ¨ï¼šå½¢æˆç¬¦å·è¡¨\n1.4ç¬¦å·è¡¨å’Œé“¾æ¥è¿™ä¸ªä»£ç ä¸­å…¶å®åŒ…å«äº†ä¸¤ä¸ªæºæ–‡ä»¶ï¼štest.c ã€Add.c\n\né‡Œé¢å‡ºç°äº†ä¸¤ä¸ªç¬¦å·ï¼Œmainå’ŒAdd\nç¼–è¯‘å™¨ä¼šå…ˆå¯¹æ¯ä¸ªæºæ–‡ä»¶åˆ›ç«‹ä¸€ä¸ªç¬¦å·è¡¨ï¼Œä¸ºå®ƒä»¬æ·»åŠ ä¸€ä¸ªç±»ä¼¼åœ°å€çš„å‚æ•°ã€‚åœ¨é“¾æ¥é˜¶æ®µçš„æ—¶å€™ï¼Œç›¸åŒç¬¦å·çš„åœ°å€å‚æ•°ä¼šè¢«è®¾ç½®ä¸ºä¸€æ ·çš„\n\nè¿™é‡Œç¼–è¯‘ä¼šæŸ¥çœ‹Addå‡½æ•°çš„å®šä¹‰åœ¨å“ªé‡Œ\nå¦‚mainå‡½æ•°ä¸­åªæ˜¯externï¼Œå¹¶æ²¡æœ‰Addçš„å…·ä½“å®ç°ï¼Œæœ€åé“¾æ¥ä¹‹æ—¶ï¼ŒAddç¬¦å·çš„åœ°å€ä¼šè¢«è®¾ç½®ä¸ºAdd.cä¸­è¯¥ç¬¦å·çš„åœ°å€\n\nè¿™ä¸ªæ“ä½œåˆå«ï¼šç¬¦å·è¡¨çš„åˆå¹¶å’Œé‡å®šä½\né“¾æ¥é˜¶æ®µè¿˜ä¼šæ‰§è¡Œå¦å¤–ä¸€ä¸ªæ“ä½œï¼šåˆå¹¶æ®µè¡¨\ngcc test.o add.o -o test//ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºtest\n\n\nä½¿ç”¨./TESTæ“ä½œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºæˆåŠŸè¾“å‡ºäº†Addåçš„ç­”æ¡ˆ\n\n\n2.è¿è¡Œç¯å¢ƒç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼š\n\nç¨‹åºå…ˆè½½å…¥å†…å­˜ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæ“ä½œç”±ç³»ç»Ÿå®Œæˆï¼›åœ¨ç‹¬ç«‹ç¯å¢ƒä¸­ï¼Œç¨‹åºçš„è½½å…¥å¿…é¡»æ‰‹åŠ¨å®Œæˆï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡å¯æ‰§è¡Œä»£ç ç½®å…¥åªè¯»å†…å­˜æ¥å®Œæˆ\nç¨‹åºæ‰§è¡Œå¼€å§‹ã€‚è°ƒç”¨mainå‡½æ•°\nå¼€å§‹æ‰§è¡Œä»£ç ã€‚è¿™æ—¶å°†ä½¿ç”¨ä¸€ä¸ªè¿è¡Œæ—¶å †æ ˆï¼ˆstackï¼‰ï¼Œå­˜å‚¨å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ã€‚ç¨‹åºåŒæ—¶ä½¿ç”¨é™æ€å†…å­˜ï¼Œå­˜å‚¨äºé™æ€å†…å­˜ä¸­çš„å˜é‡åœ¨ç¨‹åºçš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿ç•™å®ƒä»¬çš„å€¼\nç»ˆæ­¢ç¨‹åºã€‚æ­£å¸¸ç»ˆæ­¢mainå‡½æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯æ„å¤–ç»ˆæ­¢\n\n\nç»“è¯­æœ¬ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†äº†è§£äº†ç¨‹åºè¿è¡Œçš„å‡ ä¸ªé˜¶æ®µã€‚è¿™é‡Œé¢è¿˜æœ‰å¾ˆå¤šæ›´æ·±å±‚æ¬¡çš„é—®é¢˜å¾…æˆ‘å»æ¢ç©¶ã€‚\n\nä¸‹ç¯‡åšå®¢ï¼šé¢„å¤„ç†è¯¦è§£\n\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘å‡½æ•°è°ƒç”¨çš„å‚æ•°å‹æ ˆï¼ˆè¯¦è§£ï¼‰","url":"/2022/03/05/note_c/44%E5%87%BD%E6%95%B0%E6%A0%88%E5%B8%A7/","content":"[TOC]\nå‰è¨€åœ¨æ—©æœŸçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°å½“å‡½æ•°ä¼ å€¼è°ƒç”¨å‚æ•°çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯å½¢å‚ã€‚\nå½¢å‚æ˜¯å®å‚çš„ä¸€ä»½ä¸´æ—¶æ‹·è´ï¼Œå¯¹å½¢å‚çš„æ”¹å˜ä¸ä¼šå½±å“å®å‚é‡Œçš„å€¼ã€‚\n\nä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ğŸ‘‰ç‚¹æˆ‘\n\nä»Šå¤©è®©æˆ‘ä»¬ä»¥æ±‡ç¼–è¯­è¨€æ¥äº†è§£å‡½æ•°è°ƒç”¨çš„å‚æ•°å‹æ ˆè¿™ä¸€çŸ¥è¯†ç‚¹\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\nä¸åŒç¼–è¯‘å™¨çš„å®ç°å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä»¥å®é™…ä¸ºå‡†\n\n\n1.ä»€ä¹ˆæ˜¯æ ˆåŒºï¼Ÿæ ˆï¼Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚\nåœ¨å­¦ä¹ Cè¯­è¨€çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªå…³æ³¨å†…å­˜ä¸­çš„3ä¸ªåŒºåŸŸï¼Œåˆ†åˆ«æ˜¯æ ˆåŒºã€å †åŒºå’Œé™æ€åŒºã€‚\nå…¶ä¸­å †åŒºä¸»è¦ç”¨äºåŠ¨æ€å†…å­˜ç®¡ç†ï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²ç»å’Œå¤§å®¶ä»‹ç»è¿‡ã€‚\n\nè¯¦è§£åŠ¨æ€å†…å­˜ç®¡ç†ğŸ‘‰ç‚¹æˆ‘\n\n\nè€Œæ ˆåŒºå°±æ˜¯ç¼–è¯‘å™¨ç»™å‡½æ•°è¿è¡Œåˆ†é…çš„ç©ºé—´äº†ã€‚\nå’Œå †åŒºç©ºé—´éœ€è¦æ‰‹åŠ¨åˆ†é…ä¸åŒï¼Œè¿™ä¸€éƒ¨åˆ†ç©ºé—´æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†çš„ï¼Œå‡½æ•°çš„æ ˆå¸§ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œè‡ªåŠ¨é”€æ¯ã€‚\n1.1æ ˆåŒºå°çŸ¥è¯†ç‚¹\næ ˆåŒºçš„ä½¿ç”¨æ˜¯ä»é«˜åœ°å€åˆ°ä½åœ°å€\næ ˆåŒºçš„ä½¿ç”¨éµå¾ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º\næ ˆåŒºçš„æ”¾ç½®æ˜¯ä»é«˜åœ°å€å¾€ä½åœ°å€æ”¾ç½®ï¼špushå‹æ ˆ\nåˆ é™¤æ˜¯ä»ä½å¾€é«˜åˆ é™¤ï¼špopå‡ºæ ˆ\n\n\n2.çŸ¥è¯†ç‚¹//æœ¬æ¬¡ä½¿ç”¨çš„ä»£ç #include &lt;stdio.h&gt;int Add(int x, int y)&#123;\tint z = 0;\tz = x + y;\treturn z;&#125;int main() &#123;\tint a = 10;\tint b = 20;\tint c = Add(a, b);\tprintf(&quot;%d\\n&quot;, c);\t\treturn 0;&#125;\n\n2.1 å¯„å­˜å™¨å¸¸è§å¯„å­˜å™¨æœ‰eaxã€ebxã€ecxã€edxï¼Œå…¶ä¸­ebpå’Œespè¾ƒä¸ºç‰¹æ®Š\n\nebpã€espè¿™ä¸¤ä¸ªå¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯åœ°å€ï¼Œè¿™ä¸¤ä¸ªåœ°å€æ˜¯ç”¨æ¥ç»´æŠ¤å‡½æ•°æ ˆå¸§çš„\n\n\neax&#x2F;ebx&#x2F;ecx&#x2F;edxï¼šé€šç”¨å¯„å­˜å™¨ï¼Œä¿ç•™ä¸´æ—¶æ•°æ®\nebpï¼šæ ˆä½æŒ‡é’ˆ\nespï¼šæ ˆé¡¶æŒ‡é’ˆ\neipï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œä¿å­˜å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€\n\n\n2.2 ä¸»å‡½æ•°è°ƒç”¨æ¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œéƒ½è¦åœ¨æ ˆåŒºåˆ›å»ºä¸€ä¸ªç©ºé—´\næˆ‘ä»¬çŸ¥é“mainå‡½æ•°æ˜¯ç¨‹åºçš„å…¥å£\nå®é™…ä¸Šï¼Œmainå‡½æ•°ä¹Ÿæ˜¯è¢«å…¶ä»–å‡½æ•°è°ƒç”¨çš„\n\nmainCRTStartupå‡½æ•°è°ƒç”¨__tmainCRTStartup\n__tmainCRTStartupå‡½æ•°è°ƒç”¨mainå‡½æ•°\n\nç¼–è¯‘å™¨ä¼šå…ˆåœ¨å†…å­˜é«˜åœ°å€å¤„å¼€è¾Ÿä¸€éƒ¨åˆ†ç©ºé—´ç»™mainCRTStartupå’Œ__tmainCRTStartupå‡½æ•°ï¼Œå®ƒä»¬è¿›è¡Œè°ƒç”¨mainå‡½æ•°çš„æ“ä½œã€‚\n\nåœ¨VS2019ä¸­ï¼ŒæŒ‰F10è¿›è¡Œè°ƒè¯•ï¼Œå‡ºç°é»„è‰²å°ç®­å¤´åï¼Œå³é”®-è½¬åˆ°åæ±‡ç¼–ï¼Œå³å¯æ‰“å¼€è°ƒè¯•ä¸­æ±‡ç¼–è¯­è¨€çš„æ˜¾ç¤ºç•Œé¢\n\n3. é€æ¡è§£é‡Š3.1 ä»mainå¼€å§‹å…ˆæ¥çœ‹ç¬¬ä¸€éƒ¨åˆ†ä»£ç ï¼Œé€æ¡è¯­å¥è¿›è¡Œè§£é‡Š\npush  ebp//åœ¨æ ˆé¡¶å¼€è¾Ÿå­˜æ”¾ebpè¿™ä¸€å¯„å­˜å™¨å¯¹åº”å€¼çš„ç©ºé—´mov  ebp,esp//å°†espçš„å€¼ä¼ å…¥ebpä¸­ï¼ˆå³å°†ebpæŒ‡é’ˆç§»åŠ¨åˆ°åŸæœ¬espæŒ‡å‘çš„ä½ç½®ï¼‰sub  esp,0E4h//å°†espçš„å†…å®¹å‡å»0E4hï¼ˆå°†espç§»åŠ¨åˆ°åŸesp-0E4hçš„ä½ç½®ï¼‰push ebx//åœ¨æ ˆé¡¶æ”¾å…¥ebxpush esi//åœ¨æ ˆé¡¶æ”¾å…¥esipush edi//åœ¨æ ˆé¡¶æ”¾å…¥edi\n\n\n\nleaï¼šload effecticve address åŠ è½½æœ‰æ•ˆåœ°å€\ndwordï¼šdouble word â€“ 4ä¸ªå­—èŠ‚\n\nlea  edi,[ebp-24h]//å°†ebp-24hçš„åœ°å€æ”¾å…¥edimov  ecx,9//å°†9æ”¾å…¥ecxï¼Œå¯¹åº”åè¿›åˆ¶36mov  eax,0CCCCCCCCh//å°†0CCCCCCCChæ”¾å…¥eaxrep stos  dword ptr es:[edi]//å°†ediå¾€ä¸‹ecxä¸ªåœ°å€çš„æ•°æ®å…¨éƒ¨åˆå§‹åŒ–ä¸º0CCCCCCCCh\n\næŒ‰F10å¾€ä¸‹è¿è¡Œï¼Œè¿‡repé‚£ä¸€æ­¥åï¼Œå¯ä»¥çœ‹åˆ°36ä¸ªå­—èŠ‚çš„æ•°æ®éƒ½è¢«åˆå§‹åŒ–ä¸º0CCCCCCCCh\n\n\nç»§ç»­å¾€ä¸‹è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨åˆå§‹åŒ–aã€bå˜é‡çš„è¿‡ç¨‹\n\n\n\nVS2019ä¸‹æ˜¯å°ç«¯å­˜å‚¨\n\n\n\n\tint c =Add(a,b);mov    eax,dword ptr [b]//æŠŠbçš„å†…å®¹æ”¾å…¥eaxpush   eax  //åœ¨æ ˆé¡¶æ”¾å…¥eaxmov    ecx,dword ptr [a]//æŠŠaçš„å†…å®¹æ”¾å…¥ecxpush   ecx  //åœ¨æ ˆé¡¶æ”¾å…¥ecxcall   _Add (01A10B4h) //åœ¨æ ˆé¡¶æ”¾å…¥è¯¥åœ°å€ï¼ˆcallæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼‰ \n\næœ€åè¿™ä¸€æ­¥callå¾ˆå…³é”®ï¼Œåç»­ä¼šç”¨åˆ°\n\n3.2 è°ƒç”¨AddæŒ‰F11ï¼Œè¿›å…¥Addå‡½æ•°\n\n\npush    ebp//å°†ebpä¸Šç§»mov     ebp,esp//å°†espå†…å®¹æ”¾å…¥ebpï¼ˆç§»åŠ¨ebpï¼‰sub     esp,0CCh//esp+0CChï¼ˆä¸ºAddå¼€è¾Ÿç©ºé—´ï¼‰push    ebx//åœ¨æ ˆé¡¶æ”¾å…¥ebxpush    esi//åœ¨æ ˆé¡¶æ”¾å…¥esipush    edi//åœ¨æ ˆé¡¶æ”¾å…¥edi\n\nlea      edi,[ebp-0Ch]//ebp-0Chçš„ç©ºé—´  mov      ecx,3//3å­˜å…¥ecx  mov      eax,0CCCCCCCCh//å­˜å…¥eax  rep stos  dword ptr es:[edi]//espå¾€ä¸‹0chçš„ç©ºé—´åˆå§‹åŒ–mov      ecx,offset _6A27082D_test@c (024C003h)  call     @__CheckForDebuggerJustMyCode@4 (024131Bh)\n\n\n\nç»§ç»­å¾€ä¸‹ï¼Œå¯„å­˜å™¨åˆå§‹åŒ–äº†Zåœ°å€å¤„çš„æ•°æ® ä¸º0\n\nmov    eax,dword ptr [x]//å°†xçš„å€¼æ”¾å…¥eaxadd    eax,dword ptr [y]//å°†yçš„å€¼åŠ é“eaxä¸­ï¼Œå³x+y   mov    dword ptr [z],eax//å°†eaxçš„å€¼æ”¾å…¥å˜é‡z\n\n\n\treturn z;mov    eax,dword ptr [z]//å°†å½¢å‚zçš„å€¼æ”¾å…¥eax \n\n\npop     edi//å‡ºæ ˆï¼Œåˆ é™¤ä¸ºediåˆ›å»ºçš„æ ˆåŒºpop     esi//popæŒ‡ä»¤ä¼šå°†esiçš„å€¼æ”¾å…¥esiï¼ˆç­‰äºæ²¡å˜ï¼‰  pop     ebx//æ¯popä¸€æ¬¡ï¼Œespå°±å¾€é«˜ä½ç§»åŠ¨ä¸€æ¬¡      add     esp,0CCh//ä¸ºespåœ°å€+0CChï¼Œå³é€€å‡ºAddç¨‹åºçš„æ ˆåŒºç©ºé—´ cmp     ebp,esp//å°†espçš„å€¼ä¸ebpè¿›è¡Œæ¯”è¾ƒ\n\n\ncall        __RTC_CheckEsp (0241244h)  mov         esp,ebp//ebpçš„å€¼èµ‹ç»™espï¼Œæ­¤æ—¶espå’Œebpç›¸åŒ\n\n\npop         ebp//å¼¹å‡ºebp  \n\nè¿™é‡Œæ‰§è¡Œå¼¹å‡ºæŒ‡ä»¤æ—¶\n\nå°†ebpæ‰€æŒ‡å‘çš„mainå‡½æ•°çš„èµ·å§‹åœ°å€èµ‹å€¼ç»™äº†ebpæŒ‡é’ˆ\nespæŒ‡é’ˆå‘é«˜ä½ç§»åŠ¨ä¸€ä½\n\næœ€åçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œespå’Œebpé‡æ–°å¼€å§‹ç»´æŠ¤mainå‡½æ•°çš„æ ˆåŒºç©ºé—´\n\n3.3 å›åˆ°mainå‡½æ•°ret  \n\nå‰é¢æåˆ°call   _Add (01A10B4h)è¿™æ¡æŒ‡ä»¤éå¸¸é‡è¦ï¼Œå®é™…ä¸Šï¼Œåœ¨æ‰§è¡ŒretæŒ‡ä»¤æ—¶ï¼ŒespæŒ‡é’ˆå°±æŒ‡å‘äº†æ ˆé¡¶å­˜æ”¾çš„callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ŒåŒæ—¶ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿè¢«popæ‰äº†\n\nå›åˆ°è°ƒè¯•ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°é»„è‰²å°ç®­å¤´çš„ç¡®æŒ‡å‘äº†callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡\n\nè€Œè¿™ä¸€æ¡æŒ‡ä»¤çš„æ„æ€ï¼Œæ˜¯å¾€espé‡ŒåŠ 8ï¼Œå³å‘é«˜ä½ç§»åŠ¨8ä¸ªå­—èŠ‚ã€‚\nå®é™…ä¸Šè¿™æ¡æŒ‡ä»¤å°±æ˜¯åœ¨é”€æ¯æˆ‘ä»¬çš„å½¢å‚\n\nmov      dword ptr [c],eax//å°†eaxä¸­çš„å€¼æ”¾å…¥å˜é‡c  \n\næ­¤æ—¶eaxä¸­å­˜æ”¾çš„å°±æ˜¯Addå‡½æ•°çš„è¿”å›å€¼\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š\nè‡ªå®šä¹‰å‡½æ•°çš„è¿”å›å€¼æ˜¯é€šè¿‡å¯„å­˜å™¨è¿™ä¸€ä¸­é—´â€œå˜é‡â€ï¼Œè¿”å›ä¸»å‡½æ•°ä¸­çš„ã€‚\n\nå…ˆæŠŠè¿”å›å€¼æ”¾å…¥å¯„å­˜å™¨A\nä¸»å‡½æ•°ä»å¯„å­˜å™¨Aä¸­å–å‡ºè¿”å›å€¼ï¼Œæ”¾å…¥æ¥å—è¿”å›å€¼çš„å˜é‡\n\n\nç»§ç»­å¾€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°printf(&quot;%d\\n&quot;, c);è¯­å¥åï¼Œç¼–è¯‘å™¨åˆä¸€æ¬¡å°†å˜é‡cçš„å€¼æ”¾å›äº†eax\nå®é™…ä¸Šè¿™é‡Œæ˜¯printfå‡½æ•°çš„è¿è¡Œï¼š\n\nå…ˆæŠŠå¾…æ‰“å°å˜é‡æ”¾å…¥eax\nåœ¨æ ˆé¡¶å‹å…¥eax\noffset string &quot;%d\\n&quot;ï¼ˆçŒœæµ‹æ˜¯æ•°æ®ç±»å‹æ£€æŸ¥ï¼‰\n_printf ï¼šæ‰§è¡Œprintfå‡½æ•°\n\n\nadd  esp,8//ç»™esp+8ä¸ªå­—èŠ‚\n\næˆ‘å¯¹è¿™ä¸€éƒ¨åˆ†äº§ç”Ÿäº†ç–‘æƒ‘ï¼Œé‡æ–°è°ƒè¯•å‘ç°\n\npush eaxè¿™ä¸€æŒ‡ä»¤è®©espå¾€ä½åœ°å€å¤„èµ°äº†4ä¸ªå­—èŠ‚\noffset string &quot;%d\\n&quot;è¿™ä¸€æŒ‡ä»¤ä¹Ÿè®©espå¾€ä½èµ°äº†4ä¸ªå­—èŠ‚\n\n\næ‰§è¡Œå®Œè¿™ä¸€æŒ‡ä»¤åï¼Œespå›åˆ°äº†æ‰§è¡Œprintfä¹‹å‰çš„åœ°å€å¤„\n\n3.4 ç»“æŸç¨‹åº\treturn 0;xor    eax,eax//xoræŒ‡ä»¤æ˜¯å¼‚æˆ–--åœ¨è¿™é‡Œçš„ä½œç”¨ä¸æ¸…æ¥š&#125;pop    edi//å‡ºæ ˆ--espå¯¹åº”ç§»åŠ¨  pop    esi//  pop    ebx//  \n\n\nadd    esp,0E4h//esp+0E4hï¼ˆé€€å‡ºä¸ºmainå‡½æ•°å¼€è¾Ÿçš„ç©ºé—´ï¼‰ cmp    ebp,esp//æ¯”è¾ƒebpå’Œesp  \n\n\n\ncall   __RTC_CheckEsp (0241244h)  mov    esp,ebp//å°†ebpçš„å€¼å¤åˆ¶ç»™esp //æ­¤æ—¶espå’Œebpçš„å€¼ä¾æ—§ç›¸åŒ    \n\n\npop    ebp//ebpå‡ºæ ˆ--espå’Œebpåˆ†ç¦»ret//mainå‡½æ•°ç»“æŸ  \n\n\n\n4.æœ¬ç¯‡åšå®¢ä¸­çš„æ±‡ç¼–è¯­è¨€æ€»ç»“\nmovï¼šæ•°æ®è½¬ç§»æŒ‡ä»¤\n\npushï¼šæ•°æ®å…¥æ ˆï¼ŒåŒæ—¶espæ ˆé¡¶å¯„å­˜å™¨å¾€ä½ä½èµ°\n\npopï¼šæ•°æ®å¼¹å‡ºè‡³æŒ‡å®šä½ç½®ï¼ŒåŒæ—¶espæ ˆé¡¶å¯„å­˜å™¨å¾€é«˜ä½èµ°\n\nsubï¼šå‡æ³•\n\naddï¼šåŠ æ³•\n\ncallï¼šå‡½æ•°è°ƒç”¨ã€‚1.å‹å…¥è¿”å›åœ°å€ï¼›2.è½¬å…¥ç›®æ ‡å‡½æ•°\n\njumpï¼šé€šè¿‡ä¿®æ”¹eipï¼Œè½¬å…¥ç›®æ ‡å‡½æ•°ï¼Œè¿›è¡Œè°ƒç”¨\n\nretï¼šå›å¤è¿”å›åœ°å€ï¼Œå‹å…¥eipï¼Œç±»ä¼¼pop eipæŒ‡ä»¤\n\ncmpï¼ˆæ¯”è¾ƒï¼‰ï¼šæ‰§è¡Œä»ç›®çš„æ“ä½œæ•°ä¸­å‡å»æºæ“ä½œæ•°çš„éšå«å‡æ³•æ“ä½œï¼Œå¹¶ä¸”ä¸ä¿®æ”¹ä»»ä½•æ“ä½œæ•°\n\nxorï¼šåœ¨ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½ä¹‹é—´è¿›è¡Œï¼ˆæŒ‰ä½ï¼‰é€»è¾‘å¼‚æˆ–ï¼ˆXORï¼‰æ“ä½œï¼Œå¹¶å°†ç»“æœå­˜æ”¾åœ¨ç›®æ ‡æ“ä½œæ•°ä¸­\n\n\n\néƒ¨åˆ†æ±‡ç¼–æŒ‡ä»¤å‚è€ƒï¼šCè¯­è¨€ä¸­æ–‡ç½‘\n\n\n5.ç»“è¯­\nå®Œæˆè¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œå·²ç»æ˜¯å‘¨å…­çš„00:54ğŸŒ›\nä»å‘¨äº”çš„19:20å¼€å§‹ï¼Œä¸çŸ¥ä¸è§‰ä¸­å†™äº†è¿™ä¹ˆä¹…\n\nå‡½æ•°è°ƒç”¨å †æ ˆè¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†æœ‰äº›æ™¦æ¶©éš¾æ‡‚ï¼Œå†™ä¸‹è¿™ç¯‡åšå®¢ä¹Ÿç®—æ˜¯ç†æ¸…äº†ä¸€äº›æ€è·¯å§ã€‚\nåŠ æ²¹ï¼\né¡¶ä¸ä½äº†ï¼Œç¡è§‰å»äº†\n\nè¯´æ¥è®½åˆºï¼Œå‡ ä¸ªèˆå‹è¿˜åœ¨æ‰“æŸ3äº¿é¼ æ ‡çš„æªæˆ˜æ¢¦æƒ³â€¦â€¦\n\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘é¢„å¤„ç†æ“ä½œï¼ˆè¯¦è§£ï¼‰","url":"/2022/03/10/note_c/45%E9%A2%84%E5%A4%84%E7%90%86%E8%AF%A6%E8%A7%A3/","content":"[TOC]\nå‰è¨€ğŸ˜œä¸Šç¯‡åšå®¢ï¼Œæˆ‘ä»¬æåˆ°äº†Cè¯­è¨€ç¨‹åºè¿è¡Œçš„å‡ ä¸ªç¯èŠ‚ã€‚\næœ¬ç¯‡åšå®¢ä¸­æåˆ°çš„é¢„å¤„ç†æŒ‡ä»¤ï¼Œå°±æ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µè¿è¡Œçš„ä¸€äº›ä»£ç ã€‚\n\næœ¬ç¯‡åšå®¢ä½¿ç”¨çš„ç¼–è¯‘å™¨ğŸ°\n\nVS2019ï¼ˆwin10ï¼‰\næ ‘è“æ´¾ï¼ˆlinux-gccï¼‰\n\n\n\n1.é¢„å®šä¹‰ç¬¦å·__FILE__ //è¿›è¡Œç¼–è¯‘çš„æºæ–‡ä»¶__LINE__ //æ–‡ä»¶å½“å‰çš„è¡Œå·__DATE__ //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¥æœŸ__TIME__ //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¶é—´__STDC__ //æµ‹è¯•ç¼–è¯‘å™¨æ˜¯å¦éµå¾ªANSI Cï¼Œéµå¾ªå€¼ä¸º1ï¼Œä¸éµå¾ªåˆ™è¯¥ç¬¦å·æœªå®šä¹‰\n\n\n2.#define2.1å®šä¹‰æ ‡è¯†ç¬¦#define name stuff\n\n#define MAX 1000#define reg register   //ä¸º registerè¿™ä¸ªå…³é”®å­—ï¼Œåˆ›å»ºä¸€ä¸ªç®€çŸ­çš„åå­—#define do_forever for(;;)  //ç”¨æ›´å½¢è±¡çš„ç¬¦å·æ¥æ›¿æ¢ä¸€ç§å®ç°#define CASE break;case    //åœ¨å†™caseè¯­å¥çš„æ—¶å€™è‡ªåŠ¨æŠŠ breakå†™ä¸Š//å¦‚æœå®šä¹‰çš„ stuffè¿‡é•¿ï¼Œå¯ä»¥åˆ†æˆå‡ è¡Œå†™ï¼Œé™¤äº†æœ€åä¸€è¡Œå¤–ï¼Œæ¯è¡Œçš„åé¢éƒ½åŠ ä¸€ä¸ªåæ–œæ (ç»­è¡Œç¬¦)ã€‚#define DEBUG_PRINT printf(&quot;file:%s\\tline:%d\\t \\                           date:%s\\ttime:%s\\n&quot; ,\\                        __FILE__,__LINE__ ,       \\                        __DATE__,__TIME__ )  \n\nåŠ åˆ†å·é—®é¢˜defineå®šä¹‰æ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œæœ€å¥½ä¸è¦åœ¨ç»“å°¾åŠ ä¸Š;\n#define MAX 1000;#define MAX 1000\n\n\n2.2å®šä¹‰å®\né™¤äº†å®šä¹‰æ ‡è¯†ç¬¦ä»¥å¤–ï¼Œdefineè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªè¯­å¥ä¸ºæ ‡è¯†ç¬¦ï¼Œå…è®¸æŠŠå‚æ•°æ›¿æ¢åˆ°æ–‡æœ¬ä¸­ã€‚è¿™ç§æœºåˆ¶å«åšå®šä¹‰å®\n\nä¸‹é¢æ˜¯å®çš„ç”³æ˜æ–¹å¼ï¼š \n#define name(parament-list)  stuff \n\nå…¶ä¸­çš„parament-listæ˜¯ä¸€ä¸ªç”±é€—å·éš”å¼€çš„ç¬¦å·è¡¨ï¼Œå®ƒä»¬å¯èƒ½å‡ºç°åœ¨stuffä¸­\n\nå‚æ•°åˆ—è¡¨çš„å·¦æ‹¬å·å¿…é¡»ä¸nameç´§é‚»ã€‚ å¦‚æœä¸¤è€…ä¹‹é—´æœ‰ä»»ä½•ç©ºç™½å­˜åœ¨ï¼Œå‚æ•°åˆ—è¡¨å°±ä¼šè¢«è§£é‡Šä¸ºstuffçš„ä¸€éƒ¨åˆ†\n\n//å¦‚#define DOUBLE(x) x+x\n\nå®éœ€è¦æ³¨æ„çš„é—®é¢˜è¿™ä¸ªå®æœ‰ä¸€ä¸ªé—®é¢˜ğŸ‘‡\n#define DOUBLE(x) x+xint main()&#123;\tprintf(&quot;%d\\n&quot;, 10*DOUBLE(3));\treturn 0;&#125;\n\nè¿™ä¸ªå¼å­è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯60å—ï¼Ÿ\nç­”æ¡ˆæ˜¯å¦å®šçš„ï¼š#defineå®åœ¨ä½¿ç”¨çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢\nè¿™ä¸ªè¯­å¥å°±ç›¸å½“äº10*3+3ï¼Œæ ¹æ®æ“ä½œç¬¦ä¼˜å…ˆçº§å¯çŸ¥ï¼Œç»“æœä¸º30+3&#x3D;33\n\næƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è¿™ä¸ªåŸåˆ™ï¼š\n\nç»™å˜é‡åŠ ä¸Šæ‹¬å·ä»¥ç¡®ä¿ä¼˜å…ˆçº§\nç»™æ•´ä¸ªå®å†åŠ ä¸Šä¸€ä¸ªæ‹¬å·é˜²æ­¢å¤–éƒ¨æ•°æ®å½±å“\n\n#define DOUBLE(x) ((x)+(x))\n\nå†è¿è¡Œç¨‹åºï¼Œå‘ç°ç­”æ¡ˆå˜æˆäº†60\n\n\nç”¨äºå¯¹æ•°å€¼è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼çš„å®å®šä¹‰ï¼Œéƒ½åº”è¯¥ç”¨è¿™ç§æ–¹å¼åŠ ä¸Šæ‹¬å·ã€‚é¿å…åœ¨ä½¿ç”¨å®æ—¶ï¼Œå‚æ•°ä¸­çš„æ“ä½œç¬¦æˆ–é‚»è¿‘æ“ä½œç¬¦ä¹‹é—´äº§ç”Ÿä¸å¯é¢„æ–™çš„ç›¸äº’ä½œç”¨\n\n2.3defineæ›¿æ¢è§„åˆ™\n2.4ä½¿ç”¨#å’Œ##2.4.1#å°†å­—ç¬¦ä¸²æ’å…¥å­—ç¬¦ä¸²int main()&#123;\tint a = 3;\tint b = 5;\tprintf(&quot;the num of a is %d\\n&quot;, a);\tprintf(&quot;the num of b is %d\\n&quot;, b);\tprintf(&quot;\\n&quot;);        return 0;&#125;\n\n\nåœ¨è¿™ä¸ªä»£ç é‡Œé¢ï¼Œæ‰“å°çš„å‰ç½®å†…å®¹aå’Œbéœ€è¦æ ¹æ®æ‰“å°çš„å˜é‡è¿›è¡Œæ›´æ”¹\næœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œå¯ä»¥è®©ä»–è‡ªå·±è¿›è¡Œæ›´æ”¹ï¼Ÿ\n#define PRINT(X) printf(&quot;the num of &quot;#X&quot; is %d\\n&quot;, X)int main()&#123;\tint a = 3;\tint b = 5;\tprintf(&quot;the num of a is %d\\n&quot;, a);\tprintf(&quot;the num of b is %d\\n&quot;, b);\tprintf(&quot;\\n&quot;);\tPRINT(a);\tPRINT(b);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œ#Xå¤„çš„å†…å®¹è¢«æ›¿æ¢æˆäº†æˆ‘ä»¬éœ€è¦æ‰“å°çš„å˜é‡\n\nå®é™…ä¸Šï¼Œè¿™é‡Œ#Xæ—è¾¹çš„åŒå¼•å·ï¼Œæ˜¯å°†æ•´ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†æˆäº†3ä»½è¿›è¡Œæ‰“å°\n\nâ€œthe num ofâ€\n#X\nâ€œis %d\\nâ€\n\nå­—ç¬¦ä¸²åœ¨æ‰“å°çš„æ—¶å€™å…·æœ‰è‡ªåŠ¨æ‹¼æ¥çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å°†ä¸€ä¸ªéœ€è¦æ›´æ”¹çš„å­—ç¬¦æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­\n2.4.2## å°†ä¸¤ä¸ªç¬¦å·åˆå¹¶\n##å¯ä»¥æŠŠä½äºå®ƒä¸¤è¾¹çš„ç¬¦å·åˆæˆä¸€ä¸ªç¬¦å·ã€‚ \nå®ƒå…è®¸å®å®šä¹‰ä»åˆ†ç¦»çš„æ–‡æœ¬ç‰‡æ®µåˆ›å»ºæ ‡è¯†ç¬¦ã€‚\n\nå¦‚å›¾ï¼Œè¿™ä¸ªå®å°†Classå’Œ10ä¸¤ä¸ªåˆ†ç¦»çš„ç¬¦å·åˆå¹¶æˆäº†Class10ï¼Œprintfè¯†åˆ«å‡ºæ¥å¹¶æ‰“å°çš„äº†Class10çš„å€¼\n\nå½“æˆ‘ä»¬åŒåå˜é‡æœ‰å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ç§å®æ¥ç»™ä¸åŒçš„å˜é‡å¢åŠ æ•°æ®ã€‚\n#define ADD_TO_SUM(num, value) sum##num += value;int sum1,sum2,sum3,sum4;ADD_TO_SUM(3, 10);//ç»™sum3å¢åŠ 10.\n\nè¿™æ ·çš„è¿æ¥å¿…é¡»äº§ç”Ÿä¸€ä¸ªåˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¦åˆ™å…¶ç»“æœå°±æ˜¯æœªå®šä¹‰çš„ã€‚\n\n2.5å¸¦å‰¯ä½œç”¨çš„å®å‚æ•°å½“å®åœ¨å®šä¹‰ä¸­å‡ºç°è¶…è¿‡ä¸€æ¬¡æ—¶ï¼Œå¦‚æœå‚æ•°å¸¦æœ‰å‰¯ä½œç”¨ï¼Œä½¿ç”¨è¿™ä¸ªå®çš„æ—¶å€™å°±æœ‰å¯èƒ½å‡ºç°å±é™©ï¼Œå¯¼è‡´æ— æ³•é¢„æµ‹çš„ç»“æœ\n\nå‰¯ä½œç”¨æŒ‡è¡¨è¾¾å¼æ±‚å€¼æ—¶å‡ºç°çš„ä¸€äº›é™„å¸¦æ•ˆæœï¼Œå¦‚å‰ç½®++å’Œåç½®++\n\nx+1//ä¸å¸¦å‰¯ä½œç”¨x++//æœ‰å‰¯ä½œç”¨\n\nä»¥ä¸‹è¿™ä¸ªå®å¯ä»¥ä½“ç°ä¸Šé¢æè¿°çš„é—®é¢˜\n#define MAX(x,y) ((x)&gt;(y)?(x):(y))\n\nå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°å°è£…ï¼Œæˆ‘ä»¬çš„ç†è§£æ˜¯ï¼Œaå’ŒbåŸæ¥çš„å€¼3å’Œ5è¢«ä¼ å…¥MAXï¼Œç„¶åå†å„è‡ª++ä¸€æ¬¡\nä½†å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ï¼Œå¯ä»¥çœ‹åˆ°a++äº†ä¸€æ¬¡ï¼Œä½†æ˜¯b++äº†ä¸¤æ¬¡\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nå®æ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢\n\n#define MAX(x,y) ((x)&gt;(y)?(x):(y))//ä¸Šè¿°å®è¢«æ›¿æ¢åçš„ç»“æœint m=((a++)&gt;(b++)?(a++):(b++))\n\nè¿™ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œæ‰§è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œaå’Œbå„++ä¸€æ¬¡ï¼Œä½†æ˜¯åœ¨æœ€åè¿”å›bçš„æ—¶å€™ï¼Œæœ«å°¾b++è¢«æ‰§è¡Œäº†ä¸€æ¬¡\nå¾—åˆ°çš„ç»“æœå°±æ˜¯a=4ï¼Œb=7\n2.6å®å’Œå‡½æ•°å¯¹æ¯”å®ç»å¸¸è¢«ç”¨ä½œæ‰§è¡Œç®€å•çš„è®¡ç®—ï¼ˆå¦‚ä¸Šé¢æåˆ°å¤šæ¬¡çš„MAXï¼‰\nè¿™æ—¶å€™å®å¯¹æ¯”å‡½æ•°æœ‰å‡ ä¸ªä¼˜ç‚¹\n\nå‡½æ•°çš„è°ƒç”¨éœ€è¦å‹æ ˆå‡ºæ ˆï¼Œæ¯”å®é™…æ‰§è¡Œè¿™ä¸ªå°å‹ä»£ç éœ€è¦çš„æ—¶é—´æ›´é•¿ã€‚å®æ¯”å‡½æ•°åœ¨ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦æ–¹é¢æ›´èƒœä¸€ç­¹\nå‡½æ•°çš„å‚æ•°å¿…é¡»å£°æ˜ä½ç‰¹å®šçš„ç±»å‹ï¼Œåªé€‚ç”¨äºç‰¹å®šç±»å‹çš„è¡¨è¾¾å¼ä¸Šã€‚åä¹‹ï¼Œå®å¯ä»¥ç”¨æ•´å‹ã€é•¿æ•´å‹ã€æµ®ç‚¹å‹ç­‰å¯ä»¥ç”¨&gt;æ¥æ¯”è¾ƒçš„ç±»å‹ã€‚å®çš„è°ƒç”¨ä¸ç±»å‹æ— å…³\n\né™¤äº†MAXè¿™ä¸ªç®€å•å®è¯­å¥å¤–ï¼Œå®çš„å‚æ•°è¿˜å¯ä»¥å‡ºç°æ•°æ®ç±»å‹\nå¦‚ä¸‹å›¾ä¸­æˆ‘ä»¬è°ƒç”¨çš„è¿™ä¸ªå®ï¼Œå°±å¯ä»¥åšåˆ°ç”¨ä¸€ç§æ›´ç®€å•çš„æ–¹å¼æ¥è°ƒç”¨mallocå‡½æ•°ã€‚æ­¤æ—¶çš„è°ƒç”¨åªéœ€è¦å†™å…¥å¾…å¼€è¾Ÿæ•°æ®ä¸ªæ•°å’Œæ•°æ®ç±»å‹ï¼Œä¸éœ€è¦å†å†™å¼ºåˆ¶ç±»å‹è½¬æ¢ç­‰è¯­å¥ï¼Œæ–¹ä¾¿ä½¿ç”¨\n\næœ‰å¾—å°±æœ‰å¤±ï¼Œå®å½“ç„¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼š\n\næ¯æ¬¡ä½¿ç”¨å®ï¼Œæ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢ã€‚å¦‚æœæ­¤æ—¶å®æ¯”è¾ƒé•¿ï¼Œåˆ™ä¼šå¢åŠ ç¨‹åºçš„é•¿åº¦\nå®åœ¨é¢„å¤„ç†é˜¶æ®µæ‰§è¡Œäº†æ›¿æ¢ï¼Œæ— æ³•è¿›è¡Œè°ƒè¯•\nå®ä¸ç±»å‹æ— å…³ï¼Œä¸å¤Ÿä¸¥è°¨\nå®ä¼šå‡ºç°æ“ä½œç¬¦ä¼˜å…ˆçº§é—®é¢˜ï¼Œå®¹æ˜“å‡ºé”™\n\n2.7å‘½åçº¦å®šä¸€èˆ¬æ¥è®²å‡½æ•°çš„å®çš„ä½¿ç”¨è¯­æ³•å¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥è¯­è¨€æœ¬èº«æ²¡æ³•å¸®æˆ‘ä»¬åŒºåˆ†äºŒè€…ã€‚ \né‚£æˆ‘ä»¬å¹³æ—¶çš„ä¸€ä¸ªä¹ æƒ¯æ˜¯ï¼š \n\næŠŠå®åå…¨éƒ¨å¤§å†™ï¼šMAX\n\nå‡½æ•°åä¸è¦å…¨éƒ¨å¤§å†™ï¼šMax\n\n\n#define MAX(x, y) ((x)&gt;(y)?(x):(y))int Max(int x, int y)&#123;\treturn x &gt; y ? x : y;&#125;\n\n2.7 #undefè¿™æ¡æŒ‡ä»¤ç”¨äºç§»é™¤ä¸€ä¸ªå®å®šä¹‰\n#undef NAME\n\nå¦‚æœä¸ç§»é™¤ï¼Œå°±æ— æ³•é‡å¤å®šä¹‰åŒåå®\n\n\n3.å‘½ä»¤è¡Œå®šä¹‰ä¸€äº›Cè¯­è¨€çš„ç¼–è¯‘å™¨æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰ä¸€ä¸ªç¬¦å·ï¼Œç”¨äºå¯åŠ¨ç¼–è¯‘è¿‡ç¨‹\nå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¨‹åºçš„ä¸åŒç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æŒ‡ä»¤\n\nå¦‚ï¼šåœ¨ä¸åŒæƒ…å†µä¸‹éœ€è¦ä¸åŒé•¿åº¦çš„æ•°ç»„\n\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥ç¼–è¯‘è¿™éƒ¨åˆ†ä»£ç ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ŒSZæœªå®šä¹‰\n\nä½†å½“æˆ‘ä»¬å†™ä¸Šè¿™ä¹ˆä¸€è¡Œå‘½ä»¤\ngcc test.c -D SZ=10\n\nå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨æ²¡æœ‰æŠ¥é”™ï¼Œå†æ¬¡lsï¼Œå‘ç°å¤šäº†ä¸€ä¸ªa.outæ–‡ä»¶\n\næ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°SZè¢«å®šä¹‰æˆ10å¹¶æˆåŠŸæ‰“å°\n4.æ¡ä»¶ç¼–è¯‘åœ¨ç¼–è¯‘ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æ¥æ§åˆ¶ä¸€ç»„è¯­å¥çš„ä½¿ç”¨ä¸å¦\n4.1if&#x2F;endif#define M 1int main()&#123;\tint i = 0;\tint n = 10;\tfor (i = 0; i &lt; 10; i++)\t&#123;#if M\t\tprintf(&quot;%d\\n&quot;, i);#endif\t\t//å…¶ä»–ä»£ç \t&#125;\treturn 0;&#125;\n\n#ifè¯­å¥åä¸ºçœŸå³æ‰§è¡Œï¼Œä¸ºå‡ä¸æ‰§è¡Œ\n\nè¯¥è¯­å¥ä¹‹ååªèƒ½è·Ÿéšå¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½è·Ÿéšå®šä¹‰çš„å˜é‡\n\n#define M 1#if M//æ­£ç¡®#if 3&gt;5#if M==1//æ­£ç¡®int a=1;#if a//err\n\n\nåœ¨linuxç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ç¼–è¯‘è¯­å¥æ‰§è¡Œé¢„å¤„ç†æ“ä½œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„test.iæ–‡ä»¶ä¸­ï¼Œprintfä»£ç æ˜¯è¢«åŒ…å«è¿›å»çš„\n\nå¦‚æœæŠŠMæ›´æ”¹ä¸º0ï¼Œå†æ¬¡æ‰§è¡Œé¢„å¤„ç†æ“ä½œã€‚printfè¯­å¥å¹¶æ²¡æœ‰åŒ…å«åœ¨forå¾ªç¯ä¸­\n\n\nå¦‚æœè¿™é‡Œæ”¾å…¥å˜é‡nï¼Œä¸èµ·ä½œç”¨\n\n\nä½ å¯èƒ½æƒ³é—®ï¼Œå¦‚æœè¿™ä¸€è¡Œä»£ç æˆ‘ä¸éœ€è¦ï¼Œç›´æ¥æ³¨é‡Šæ‰ä¸å°±okäº†å—ï¼Ÿ\nå¹¶ä¸ç„¶ã€‚\næœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸ºäº†éªŒè¯ä¹‹å‰å†™çš„ç¨‹åºæ˜¯å¦æ­£ç¡®ï¼Œä¼šç¼–å†™ä¸€äº›æµ‹è¯•ä»£ç ï¼Œç”¨äºdebugã€‚è¿™äº›ä»£ç åœ¨æµ‹è¯•å®Œæˆåå¯ä»¥åˆ é™¤ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸‹æ¬¡è¿˜éœ€è¦æµ‹è¯•åŒä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±æœ‰éœ€è¦é‡æ–°å†™ä¸€éï¼Œå¾ˆæ˜¯ä¸æ–¹ä¾¿ã€‚\næœ‰äº†æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¨‹åºçš„æœ€ä¸Šæ–¹#defineå®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œæ¥æ§åˆ¶æ˜¯å¦è¿›è¡Œæµ‹è¯•ã€‚\n\n4.2å¤šä¸ªåˆ†æ”¯çš„è°ƒèŠ‚ç¼–è¯‘#define M 150int main()&#123;#if M&lt;100\tprintf(&quot;less\\n&quot;);#elif M==100\tprintf(&quot;==\\n&quot;);#elif M&gt;100&amp;&amp;M&lt;200\tprintf(&quot;more\\n&quot;);#else\tprintf(&quot;hehe\\n&quot;);#endif\treturn 0;&#125;\n\nå’Œä¹‹å‰ä¸€æ ·ï¼Œä¸è¿è¡Œçš„ä»£ç ï¼ŒVS2019ä¼šæ˜¾ç¤ºä¸ºç°è‰²\n\n4.3åˆ¤æ–­ç¬¦å·æ˜¯å¦å·²è¢«å®šä¹‰#define M 0int main()&#123;#if defined(M)\tprintf(&quot;hehe\\n&quot;);#endif#ifdef M\tprintf(&quot;haha\\n&quot;);#endif//è¿™ä¸¤æ¡è¯­å¥ç­‰ä»·       return 0;&#125;\n\n\nå¦‚æœæƒ³æŠŠæ¡ä»¶æ”¹ä¸ºæœªå®šä¹‰çš„æ—¶å€™æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸¤ç§æ–¹å¼\n\n!ï¼šé€»è¾‘åæ“ä½œç¬¦\n\n\n4.4åµŒå¥—æŒ‡ä»¤å’Œå…¶ä»–è¯­å¥ä¸€æ ·ï¼Œæ¡ä»¶ç¼–è¯‘è¯­å¥ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨\n#define M 0#define N 1#if defined(M)     #ifdef OPTION1     \tM_option1();     #endif     #ifdef OPTION2     \tM_option2();     #endif#elif defined(N)     #ifdef OPTION2     \tN_option2();     #endif#endif\n\n\n5.æ–‡ä»¶åŒ…å«æˆ‘ä»¬çŸ¥é“ï¼Œ#includeæŒ‡ä»¤å¯ä»¥ä½¿å¦å¤–ä¸€ä¸ªæ–‡ä»¶è¢«ç¼–è¯‘ã€‚å®ƒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ›¿æ¢ï¼š\n\nç¼–è¯‘å™¨åœ¨é¢„å¤„ç†é˜¶æ®µåˆ é™¤è¿™æ¡æŒ‡ä»¤ï¼Œç”¨åŒ…å«æ–‡ä»¶çš„å†…å®¹æ›¿æ¢\nä¸€ä¸ªæºæ–‡ä»¶è¢«åŒ…å«10æ¬¡ï¼Œå°±ä¼šè¢«ç¼–è¯‘10æ¬¡\n\n5.1åŒ…å«æ–¹å¼#include &quot;test.h&quot;//æœ¬åœ°æ–‡ä»¶#include &lt;stdio.h&gt;//åº“æ–‡ä»¶\n\nä½ å¯èƒ½ä¼šæœ‰è¿™ä¸ªç–‘é—®ï¼Œè¿™ä¸¤ç§åŒ…å«æ–¹å¼ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nåŒå¼•å·æ–¹å¼\nç°åœ¨æºæ–‡ä»¶ï¼ˆé¡¹ç›®æ–‡ä»¶ï¼‰æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ã€‚\nå¦‚æœè¯¥å¤´æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œç¼–è¯‘å™¨å°±ä¼šåƒæŸ¥æ‰¾åº“å‡½æ•°å¤´æ–‡ä»¶ä¸€æ ·åœ¨æ ‡å‡†ä½ç½®æŸ¥æ‰¾å¤´æ–‡ä»¶ã€‚\nå¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯\n\nVS2019æ ‡å‡†ä½ç½®ï¼ˆå»VSçš„å®‰è£…ç›®å½•æ‰¾ï¼‰\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\include\n\nLinuxç¯å¢ƒæ ‡å‡†ä½ç½®\n/usr/include\n\n\nåº“æ–‡ä»¶æ–¹å¼\nåªåœ¨æ ‡å‡†è·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯\n\næ—¢ç„¶åŒå¼•å·æ–¹å¼ä¹Ÿä¼šå»æ ‡å‡†è·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œé‚£æ˜¯ä¸æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç”¨åŒå¼•å·æ–¹å¼åŒ…å«åº“å‡½æ•°çš„å¤´æ–‡ä»¶ï¼Ÿ\nç­”æ¡ˆæ˜¯è‚¯å®šçš„\nä½†æ˜¯è¿™ä¹ˆåšï¼Œä¼šè®©æˆ‘ä»¬éš¾ä»¥åˆ†è¾¨å¤´æ–‡ä»¶åˆ°åº•æ˜¯åº“å‡½æ•°è¿˜æ˜¯è‡ªå®šä¹‰å¤´æ–‡ä»¶ã€‚ä¸¤æ¬¡æŸ¥æ‰¾ä¹Ÿä¼šå½±å“ç¨‹åºç¼–è¯‘æ•ˆç‡\n\n5.2åµŒå¥—æ–‡ä»¶åŒ…å«é—®é¢˜å‡å¦‚åœ¨é¡¹ç›®åˆä½œä¸­ï¼Œå‡ºç°äº†è¿™ç§æƒ…å†µ\n\n\ncomm.hå’Œ.cæ˜¯å…¬å…±æ–‡ä»¶\ntest1.hå’Œtest1.cä½¿ç”¨äº†å…¬å…±æ¨¡å—\ntest2.hå’Œtest2.cä¹Ÿä½¿ç”¨äº†å…¬å…±æ¨¡å—\ntest.hå’Œtest.cæœ€ç»ˆä½¿ç”¨äº†test1å’Œ2æ¨¡å—\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œå°±ç›¸å½“äºæœ‰ä¸¤ä»½comm.hçš„å†…å®¹è¢«æ‹·è´åˆ°æœ€ç»ˆçš„ç¨‹åºä¸­\nå‡å¦‚comm.hä¸­æœ‰defineæˆ–è€…å…¨å±€å˜é‡çš„å®šä¹‰ï¼Œè¿™å°±ç›¸å½“äºä¸€ä¸ªå®šä¹‰è¯­å¥å†™äº†ä¸¤éï¼Œå‡ºç°äº†é‡å¤å®šä¹‰\nå¦‚ä½•è§£å†³ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªå¤´æ–‡ä»¶çš„å¼€å¤´å†™\n#ifndef __TEST_H__#define __TEST_H__//å¤´æ–‡ä»¶çš„å†…å®¹#endif\n\nè¿™æ ·ï¼Œå¦‚æœ__TEST_H__ç¬¦å·å·²ç»è¢«å®šä¹‰è¿‡ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šäºŒæ¬¡å±•å¼€å¤´æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œä¹Ÿå°±é¿å…äº†è¿™ä¸ªé—®é¢˜\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯VSç¼–è¯‘å™¨ï¼Œåœ¨åˆ›å»º.hæ–‡ä»¶çš„æ—¶å€™ï¼ŒVSä¼šè‡ªå·±åŒ…å«ä¸€ä¸ªè¯­å¥\n#pragma once\n\nè¿™ä¸ªè¯­å¥ä¹Ÿæœ‰ç›¸åŒçš„ä½œç”¨\n\nwarning: #pragma once in main fileåœ¨æˆ‘å°è¯•åœ¨linuxç¯å¢ƒä¸‹ä½¿ç”¨#pragma onceè¯­å¥æ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸è¦ç¼–è¯‘å¤´æ–‡ä»¶\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å±•å¼€å¤´æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘\n\n\n\nç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼šå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œ#pragma onceæœ¬èº«æ˜¯æ²¡æœ‰å«ä¹‰çš„è¯­å¥ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚\n\nä¹Ÿæœ‰äººè¯´æ˜¯å› ä¸ºlinuxä¸æ”¯æŒè¿™ä¸ªè¯­å¥ï¼Œæˆ‘ä»¬æ¥è¯•è¯•\n\nå³ä¾§ä»£ç ä¸­åŒ…å«äº†ä¸¤ä¸ªtest.hçš„å¼•ç”¨ï¼Œåœ¨é¢„å¤„ç†ä¸­åªåŒ…å«äº†ä¸€æ¬¡\n\nå»æ‰å¤´æ–‡ä»¶ä¸­çš„#pragma onceï¼Œå†æ¬¡ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°é¢„å¤„ç†æ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤æ¬¡å¤´æ–‡ä»¶çš„å†…å®¹\n\nè¿™è¯´æ˜linux-gccç¼–è¯‘å™¨æ˜¯æ”¯æŒè¯¥è¯­å¥çš„ï¼Œå¹¶éç½‘ä¸Šè¯´çš„ä¸æ”¯æŒï¼\nè¿˜æœ‰æ›´å¤šâ€¦â€¦å…¶å®é¢„å¤„ç†æŒ‡ä»¤è¿˜è¿œä¸æ­¢æœ¬åšå®¢ä¸­åŒ…å«çš„è¿™äº›\n#error#pragma#line\n\nè¿™äº›é¢„å¤„ç†æŒ‡ä»¤è¿˜ç­‰å¾…æˆ‘çš„å­¦ä¹ ~è®°å½•åœ¨å°æœ¬æœ¬ä¸Šäº†\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘å§ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘å¯å˜å‚æ•°åˆ—è¡¨","url":"/2023/02/01/note_c/46%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹Cè¯­è¨€å­¦ä¹ è¿‡ç¨‹ä¸­å¾€å¾€è¢«å¿½ç•¥çš„å¯å˜å‚æ•°åˆ—è¡¨\n\n\næ‰€è°“å¯å˜å‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªä¸é™å®šå‚æ•°æ•°é‡çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾€é‡Œé¢ä¼ å…¥ä»»æ„ä¸ªæ•°çš„å‚æ•°ï¼Œä»¥è¾¾æˆæŸäº›ç›®çš„ã€‚\nå…³è”ï¼šC++11å¯å˜æ¨¡æ¿å‚æ•°\n1.å‡½æ•°#include &lt;stdarg.h&gt;void va_start(va_list ap, last);type va_arg(va_list ap, type);void va_end(va_list ap);void va_copy(va_list dest, va_list src);\n\n1.1 va_startvoid va_start(va_list ap, last_arg);\n\n\nap: è¿™æ˜¯ä¸€ä¸ª va_list ç±»å‹çš„å¯¹è±¡ï¼Œå®ƒç”¨æ¥å­˜å‚¨é€šè¿‡ va_arg è·å–é¢å¤–å‚æ•°æ—¶æ‰€å¿…éœ€çš„ä¿¡æ¯\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åˆå§‹åŒ– ap å˜é‡ï¼Œå®ƒä¸ va_arg å’Œ va_end å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\n\n\nlast_arg æ˜¯æœ€åä¸€ä¸ªä¼ é€’ç»™å‡½æ•°çš„å·²çŸ¥çš„å›ºå®šå‚æ•°ï¼Œå³çœç•¥å·ä¹‹å‰çš„å‚æ•°ã€‚\n\nè¦æƒ³è®¾ç½®ä¸€ä¸ªå¸¦å¯å˜å‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°å£°æ˜æ˜¯ä¸‹é¢è¿™æ ·çš„\nvoid test(int a,int b, ...);\n\nè¿™é‡Œå‡ºç°çš„çœç•¥å·å°±æ˜¯å¯å˜å‚æ•°çš„ç‰¹å¾ï¼Œè€Œå˜é‡bå°±æ˜¯va_startå‡½æ•°éœ€è¦çš„last_arg\n1.2 va_argtype va_arg(va_list ap, type);\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¥æå–å¯å˜å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ã€‚æ³¨æ„ï¼Œæ¯æ¬¡æå–çš„å‚æ•°æ˜¯ç›´æ¥è¿”å›çš„ï¼Œå¹¶æ²¡æœ‰æ”¾åˆ°å˜é‡apä¸­ã€‚\næ¯æ¬¡å¯¹va_argçš„è°ƒç”¨éƒ½ä¼šä¿®æ”¹apï¼Œä»¥ä¾¿ä¸‹æ¬¡è°ƒç”¨æ—¶ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå‚æ•°ï¼›æ¨æ–­å‚æ•°çš„æ—¶å€™éœ€è¦æŒ‡å®štypeï¼Œå¦‚æœå½“å‰å‚æ•°ç±»å‹å’Œtypeä¸ç»Ÿä¸€ï¼Œå°±ä¼šå‘ç”Ÿä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼ˆmanæ‰‹å†Œé‡Œé¢è¯´çš„ï¼‰\nIf ap is passed to a function that uses va_arg(ap,type) then the value of ap is undefined after the return of that function.\n\nå¦‚æœapè¢«ä¼ é€’ç»™va_arg(ap,type)ï¼Œåˆ™åœ¨è¯¥å‡½æ•°è¿”å›åï¼Œapçš„å€¼æœªå®šä¹‰ã€‚\n1.3 va_endvoid va_end(va_list ap);\n\næ¯ä¸€ä¸ªva_startéƒ½éœ€è¦æœ‰ä¸€ä¸ªé…å¥—çš„va_endï¼Œå…¶ç”¨äºæ¸…ç©ºap\nå¯ä»¥æŠŠä»–ä¿©çš„å…³ç³»ç†è§£ä¸ºmalloc/freeï¼Œè®°å¾—åŠ ä¸Šå°±è¡Œ\n1.4 va_copyè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†å¯å˜å‚æ•°åˆ—è¡¨ä»ç¬¬äºŒä¸ªå‚æ•°srcæ‹·è´åˆ°ç¬¬ä¸€ä¸ªå‚æ•°dest\nvoid va_copyï¼ˆva_list destï¼Œva_list srcï¼‰;\n\nå…¶ä¹Ÿèƒ½å¤Ÿåˆå§‹åŒ–destã€‚è°ƒç”¨äº†va_copyåï¼Œæ— é¡»è°ƒç”¨va_startåˆå§‹åŒ–destï¼Œä½†va_endè¿˜æ˜¯éœ€è¦çš„ã€‚\n2.ç®€å•ç¤ºä¾‹2.1 æ‰“å°å¤šä¸ªå‚æ•°#include&lt;stdarg.h&gt;#include&lt;stdio.h&gt;int print(int num_args,...)&#123;    va_list ap;    va_start(ap,num_args);//åˆå§‹åŒ–å¯å˜å‚æ•°    for(int i=0;i&lt;num_args;i++)    &#123;        printf(&quot;%d &quot;,va_arg(ap,int));    &#125;    printf(&quot;\\n&quot;);    va_end(ap);//ç»“æŸå¯¹apçš„ä½¿ç”¨&#125;int main()&#123;    print(5,1,2,3,4,5,6,7,8,9);    return 0;&#125;\n\nè¿è¡Œè¯¥å‡½æ•°ï¼Œä¼šæ‰“å°å¦‚ä¸‹ç»“æœ\n$ ./test1 2 3 4 5 \n\nè¿™å°±è¡¨æ˜äº†ï¼Œ...çœç•¥å·ä¹‹å‰çš„å‚æ•°ï¼Œå’Œva_argè¿”å›å¯å˜å‚æ•°å…¶å®æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚\nint print(int num_args,...)&#123;    va_list ap;    va_start(ap,num_args);//åˆå§‹åŒ–å¯å˜å‚æ•°    for(int i=0;i&lt;8;i++)    &#123;        printf(&quot;%d &quot;,va_arg(ap,int));    &#125;    printf(&quot;\\n&quot;);    va_end(ap);//ç»“æŸå¯¹apçš„ä½¿ç”¨&#125;int main()&#123;    print(5,1,2,3,4,5,6,7,8,9,10);    return 0;&#125;\n\nå³ä¾¿åœ¨æœ€åéƒ½æ²¡æœ‰ä½¿ç”¨num_argsï¼Œä¹Ÿä¸ä¼šå½±å“ç»“æœçš„æ­£ç¡®æ€§ã€‚va_startéœ€è¦è¿™ä¸ªå‚æ•°ï¼Œå…¶å®æ˜¯ç”¨æ¥æ ‡è¯†å¯å˜å‚æ•°çš„èµ·ç‚¹ã€‚\n$ ./test1 2 3 4 5 6 7 8 \n\n2.2 å¤šå‚æ•°æ±‚å’Œ#include&lt;stdarg.h&gt;#include&lt;stdio.h&gt;// é‡‡ç”¨å¯å˜å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæ ‡è¯†å‚æ•°æ•°é‡int sum(int num_args, ...)&#123;   int val = 0;   va_list ap;   int i;   va_start(ap, num_args);   for(i = 0; i &lt; num_args; i++)   &#123;      val += va_arg(ap, int);   &#125;   va_end(ap);    return val;&#125;void test1()&#123;    printf(&quot;10ã€20 å’Œ 30 çš„å’Œ = %d\\n&quot;,  sum(3, 10, 20, 30) );    printf(&quot;4ã€20ã€25 å’Œ 30 çš„å’Œ = %d\\n&quot;,  sum(4, 4, 20, 25, 30) );&#125;\n\nè¿è¡Œå¦‚ä¸‹\n$ ./test10ã€20 å’Œ 30 çš„å’Œ = 604ã€20ã€25 å’Œ 30 çš„å’Œ = 79\n\n3.åˆ©ç”¨å¯å˜å‚æ•°å®ç°logç±»ç°åœ¨æœ‰äº†å¯å˜å‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥ç”¨è¿™ä¸ªå‚æ•°æ¥è¿›è¡Œæ—¥å¿—çš„æ‰“å°äº†\n#pragma once#include &lt;cstdio&gt;#include &lt;ctime&gt;#include &lt;cstdarg&gt;#include &lt;cassert&gt;#include &lt;cstring&gt;#include &lt;cerrno&gt;#include &lt;stdlib.h&gt;#define DEBUG 0#define NOTICE 1#define WARINING 2#define FATAL 3const char *log_level[]=&#123;&quot;DEBUG&quot;, &quot;NOTICE&quot;, &quot;WARINING&quot;, &quot;FATAL&quot;&#125;;// é‡‡ç”¨å¯å˜å‚æ•°åˆ—è¡¨void logging(int level, const char *format, ...)&#123;    assert(level &gt;= DEBUG || level &lt;= FATAL);    char *name = getenv(&quot;USER&quot;);// è·å–ç¯å¢ƒå˜é‡ä¸­çš„ç”¨æˆ·ï¼ˆæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼‰    char logInfo[1024];    // è·å–å¯å˜å‚æ•°åˆ—è¡¨    va_list ap; // ap -&gt; char*    va_start(ap, format);    vsnprintf(logInfo, sizeof(logInfo)-1, format, ap);    va_end(ap); // ap = NULL    // æ ¹æ®æ—¥å¿—ç­‰çº§é€‰æ‹©æ‰“å°åˆ°stderr/stdout    FILE *out = (level == FATAL) ? stderr:stdout;    // æ ¼å¼åŒ–æ‰“å°åˆ°æ–‡ä»¶ä¸­    fprintf(out, &quot;%s | %u | %s | %s\\n&quot;, \\        log_level[level], \\        (unsigned int)time(nullptr),\\        name == nullptr ? &quot;unknow&quot;:name,\\        logInfo);&#125;\n\n3.1 vsnprintä½œç”¨ï¼šä½¿ç”¨vsnprintf()ç”¨äºå‘ä¸€ä¸ªå­—ç¬¦ä¸²ç¼“å†²åŒºæ‰“å°æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä¸”å¯ä»¥é™å®šæ‰“å°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ã€‚\næ­¤å‡½æ•°éœ€è¦C99æˆ–è€…C++11åŠä»¥ä¸Šç‰ˆæœ¬æ‰èƒ½æ”¯æŒã€‚\nint vsnprintf(char* sbuf, size_t n, const char* format, va_list arg);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡ç¼“å†²åŒºï¼ˆå­—ç¬¦æ•°ç»„ï¼‰\nç¬¬äºŒä¸ªå‚æ•°ï¼Œé™å®šæœ€å¤šæ‰“å°åˆ°ç¼“å†²åŒºçš„å­—ç¬¦æ•°é‡ä¸ºn-1ä¸ªï¼ˆç•™ä½ç½®ç»™\\0ï¼‰\nç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ‰“å°çš„æ ¼å¼ï¼ˆå¦‚%d:%sï¼‰\nç¬¬å››ä¸ªå‚æ•°ï¼Œå¯å˜å‚æ•°argï¼Œéœ€è¦ç”¨va_startåˆå§‹åŒ–\n\nè¿”å›ï¼šæˆåŠŸæ‰“å°åˆ°sbufä¸­çš„å­—ç¬¦çš„ä¸ªæ•°ï¼Œä¸åŒ…æ‹¬æœ«å°¾è¿½åŠ çš„\\0ã€‚å¦‚æœæ ¼å¼åŒ–è§£æå¤±è´¥ï¼Œåˆ™è¿”å›è´Ÿæ•°ã€‚\nç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±èƒ½æŠŠæˆ‘ä»¬çš„æ¥æºå­—ç¬¦ä¸²ç»™è¾“å…¥åˆ°ç¼“å†²åŒºchar logInfo[1024];ä¸­\n3.2 fprintfä½¿ç”¨fprintfï¼Œå°†printfçš„è¾“å‡ºæ‰“å°åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼›ç”¨æ³•å’Œprintfæ˜¯ä¸€æ ·çš„\nint fprintf(FILE *stream, const char *format, ...);\n\nè¿™æ ·æ˜¯ä¸ºäº†åŒºåˆ†stderr/stdoutã€‚åŒæ—¶æ·»åŠ ä¸Šæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠå½“å‰çš„æ—¶é—´æˆ³\nfprintf(out, &quot;%s | %u | %s | %s\\n&quot;, \\    log_level[level], \\    (unsigned int)time(nullptr),\\    name == nullptr ? &quot;unknow&quot;:name,\\    logInfo);\n\n3.3 è¿è¡Œç»“æœint main()&#123;    logging(DEBUG, &quot;socket create success: %d&quot;, 114514);    logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), 11234);    return 0;&#125;\n\n$ ./testDEBUG | 1675322313 | muxue | socket create success: 114514FATAL | 1675322313 | muxue | socket:Success:11234\n\nThe endå¯¹äºå¯å˜å‚æ•°çš„ç®€å•ä»‹ç»å°±åˆ°è¿™é‡Œï¼åŸºæœ¬çš„ä½¿ç”¨èƒ½çœ‹æ‡‚ä¹…OKå•¦ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘è½¬ä¹‰å­—ç¬¦","url":"/2021/08/13/note_c/4%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/","content":"å‰æ’æé†’ï¼Œè¿™ä¸ç®—æ˜¯è½¬ä¹‰å­—ç¬¦çš„æ•™å­¦ç®—æ˜¯ä¸ªæˆ‘ä¸ªäººå­¦ä¹ çš„è®°å½•\n\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n#include &lt;stdio.h&gt;int main()&#123;\tprintf(&quot;c:\\test\\32\\test.m&quot;);\treturn 0;&#125;\n\né—®ï¼šprintfä¸­çš„c:\\test\\32\\test.måŒ…å«å‡ ä¸ªå­—ç¬¦ï¼Ÿ\n\nå¤§å®¶å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬ç›´æ¥æ•°çš„è¯ï¼Œä¼šå¾—å‡ºè¿™é‡Œé¢åŒ…æ‹¬äº†17ä¸ªå­—ç¬¦å¦‚æœçœŸçš„æœ‰é‚£ä¹ˆç®€å•ä¹Ÿä¸éœ€è¦è¿™ç¯‡åšå®¢äº†å¯¹å§\nè¿™é‡Œå°±è¦å¼•å…¥è½¬ä¹‰å­—ç¬¦çš„æ¦‚å¿µäº†å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰ä»¥ä¸‹å‡ ä¸ª\næ¯”è¾ƒå¸¸è§„çš„æˆ‘ä»¬å¯ä»¥çœ‹è¡¨æ ¼ä¸­çš„å®šä¹‰\néœ€è¦æ³¨æ„çš„æ˜¯â€\\?â€è¿™ä¸ªæ˜¯ç”¨äºè¿ç»­é—®å·çš„æƒ…å†µï¼Ÿï¼Ÿ+ï¼ˆæŸä¸ªç¬¦å·ï¼‰  ç§°ä¸ºä¸‰å­—æ¯è¯å¦‚ï¼šï¼Ÿï¼Ÿï¼‰ æ˜¾ç¤ºå‡ºæ¥æ˜¯ ]\\ï¼Ÿå°±è®©ï¼Ÿä¸è¢«è¯†åˆ«ä¸ºä¸‰å­—æ¯è¯ï¼Œè€Œæ˜¾ç¤ºé—®å·è¿™ä¸ªå­—ç¬¦åŒæ—¶\\\\ä¹Ÿæ˜¯è®©â€œ\\â€è¿™ä¸ªå­—ç¬¦èƒ½ä»¥æœ¬èº«å½¢å¼å‡ºç°è€Œä¸æ˜¯è¢«è¯†åˆ«æˆè½¬ä¹‰å­—ç¬¦åŒæ—¶æˆ‘ä»¬è¦çŸ¥é“çš„æ˜¯\nâ€œ\\0â€è¿™ä¸ªè½¬ä¹‰å­—ç¬¦æ˜¯å­—ç¬¦ä¸²çš„ç»“æŸï¼Œåœ¨æˆ‘ä»¬è¾“å…¥å­—ç¬¦ä¸²çš„æ—¶å€™åé¢ä¼šé»˜è®¤è·Ÿç€ä¸€ä¸ªéšè—çš„â€œ\\0â€  ï¼ˆå¦‚å›¾ï¼‰\næˆ‘ä»¬ä½¿ç”¨strlenè®¡ç®—å­—ç¬¦ä¸²abcçš„é•¿åº¦çš„æ—¶å€™éœ€è¦åœ¨åé¢-1åŒæ—¶â€œ\\0â€ä¹Ÿä¼šæœ‰è‡ªå·±å¯¹åº”çš„ä¸‹æ ‡3\n\nè¯´å›æˆ‘ä»¬çš„c:\\test\\32\\test.mé€šè¿‡æŸ¥è¡¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“åœ°å‘ç°è¿™é‡Œé¢å‡ºç°äº†ä¸¤ä¸ª\\tè½¬ä¹‰å­—ç¬¦æ¯ä¸ªè½¬ä¹‰å­—ç¬¦åœ¨æ•°å­—ç¬¦é•¿åº¦çš„æ—¶å€™æ˜¯è®°ä½œä¸€ä¸ªçš„é™¤äº†è¿™ä¸¤ä¸ª\\t,è¿™é‡Œè¿˜è—æœ‰å¦å¤–ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦\\32\\32è¿™ä¸ªè½¬ä¹‰å­—ç¬¦æ­£æ˜¯å›¾è¡¨ä¸­çš„\\dddæ ¼å¼çš„è½¬ä¹‰å­—ç¬¦ä»£è¡¨32æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶æ•°å­—\nè€Œ\\32åœ¨æ­£å¸¸ä»£ç ä¸­ æ˜¯æŒ‡\n32ä½œä¸ºå…«è¿›åˆ¶æ•°å­—å¯¹åº”çš„åè¿›åˆ¶æ•°å­—ï¼Œåœ¨ASCIIè¡¨ä¸Šå¯¹åº”çš„å­—ç¬¦ã€‚å¦‚ï¼šå…«è¿›åˆ¶32æ˜¯åè¿›åˆ¶çš„26ï¼›é‚£ä¹ˆ\\32å°±ä»£è¡¨åè¿›åˆ¶æ•°26åœ¨ASCIIç è¡¨ä¸Šå¯¹åº”çš„ç¬¦å·ï¼ŒæŸ¥è¡¨å¯çŸ¥26æ˜¯æ›¿ä»£ç¬¦å·\n\n\nå½“ç„¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬çš„\\32åªæ˜¯ä¸€ä¸ªæˆ‘ä»¬æƒ³è¦æ‰“å°å‡ºæ¥çš„å­—ç¬¦ï¼Œå¹¶æ²¡æœ‰å®é™…ä½œç”¨\næ‰€ä»¥ç­”æ¡ˆå°±å¾ˆæ˜æœ—äº†ã€‚\nint main()&#123;\tprintf(&quot;c:\\test\\32\\test.m&quot;);\treturn 0;&#125;\nåœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œ(â€œc:\\test\\32\\test.mâ€œ)ä¸€å…±åŒ…å«çš„å­—ç¬¦æ•°é‡æ˜¯13\n\næœ¬ç¯‡ä¸èµ°å¿ƒåšå®¢åˆ°è¿™é‡Œä¹Ÿç»“æŸäº†\n\nä»‹ç»äº†éƒ¨åˆ†è½¬ä¹‰å­—ç¬¦çš„ä½œç”¨\næ˜ç¡®åœ¨è®¡ç®—å­—ç¬¦æ•°é‡çš„æ—¶å€™è½¬ä¹‰å­—ç¬¦åº”è§†ä¸ºåŒä¸€ä¸ªå­—ç¬¦è®¡æ•°\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åè¿˜æ˜¯æ±‚dalaoæ— æƒ…æŒ‡æ­£å•Šï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘çŒœæ•°å­—æ¸¸æˆ","url":"/2021/08/13/note_c/5%E7%8C%9C%E6%95%B0%E5%AD%97%E6%B8%B8%E6%88%8F/","content":"è¿™æ˜¯ä¸€åˆå­¦cè¯­è¨€çš„æ–°äººçš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œå°è¯•ä½¿ç”¨Markdownçš„æ–¹å¼å†™å…¥\n\n\nè¿™æ˜¯ä¸€åˆå­¦cè¯­è¨€çš„æ–°äººçš„ç¬¬ä¸€ç¯‡åšå®¢å°è¯•ä½¿ç”¨Markdownçš„æ–¹å¼å†™å…¥(æœ¬æ¥ç”¨çš„51ctoï¼Œå‘ç°äººå¥½å°‘ï¼Œäºæ˜¯è·‘è¿‡æ¥äº†ï¼‰\nä»€ä¹ˆæ˜¯MarkdownMarkdownæ˜¯ç°åœ¨æ™®éä½¿ç”¨çš„ä¸€ç§æ–‡æ¡£ä¹¦å†™è¯­è¨€æ ¼å¼ï¼Œåªéœ€ç”¨ä¸€äº›éå¸¸ç®€å•æ˜“è®°çš„ç¬¦å·ï¼Œå¦‚#*/&gt;[]0\\ï¼Œå°±å¯ä»¥è½»æ¾å†™å‡ºä¸€ç¯‡å…·æœ‰è‰¯å¥½çš„æ’ç‰ˆå’Œå¯è¯»æ€§çš„æ–‡.æ¥ä¸‹æ¥è¿›å…¥æˆ‘ä»¬çš„æ­£é¢˜\nçŒœæ•°å­—æ¸¸æˆè¿™æ˜¯ä¸€éå¸¸ç»å…¸çš„ä»£ç åº”ç”¨åŸºæœ¬é€»è¾‘å¦‚ä¸‹ï¼š\n\n1ï¼è®¡ç®—æœºç”Ÿæˆä¸€ä¸ªéšæœºæ•°2ï¼ç©å®¶è¾“å…¥ä¸€ä¸ªçŒœæƒ³çš„æ•°å­—3ï¼è®¡ç®—æœºæç¤ºâ€œçŒœå¤§äº†â€æˆ–è€…â€œçŒœå°äº†â€å¹¶åœ¨ç©å®¶çŒœæµ‹æ­£ç¡®æ—¶æç¤ºâ€œæ­å–œä½ ï¼ŒçŒœå¯¹äº†â€\n\nå…ˆæ¥çœ‹çœ‹æ¸¸æˆæœ€ç»ˆæ˜¯ä»€ä¹ˆæ ·å­çš„å§ç©å®¶è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªèœå•ä»¥åŠé€‰æ‹©\né”®å…¥1å³ä¸ºå¼€å§‹æ¸¸æˆ\nç³»ç»Ÿåœ¨ç©å®¶çŒœå°æˆ–è€…çŒœå¤§ä¹‹åéƒ½ä¼šæœ‰å¯¹åº”çš„æç¤ºï¼ŒçŒœå¯¹ä¹‹åç¨‹åºä¹Ÿä¼šå†æ¬¡è¿è¡Œï¼Œç©å®¶å¯ä»¥é€‰æ‹©é€€å‡ºæˆ–è€…å†æ¥ä¸€æ¬¡é‚£ä¹ˆè¿™ä¸ªçŒœæ•°å­—æ¸¸æˆæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªç®€æ˜“çš„menu\nvoid menu()&#123;\tprintf(&quot;*****************************\\n&quot;);\tprintf(&quot;****  1.play   0.exit    ****\\n&quot;);\tprintf(&quot;*****************************\\n&quot;);&#125;\nå…‰æ˜¯è¿™ä¸ªmenuè¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªä»£ç ä¸²æ¥å®ç°åœ¨1.playå’Œ0.exitä¹‹é—´é€‰æ‹©çš„åŠŸèƒ½\nswitch caseè¯­å¥ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯switchè¯­å¥\nmenu();printf(&quot;è¯·é€‰æ‹©&gt;:&quot;);scanf(&quot;%d&quot;, &amp;input);switch (input)&#123;case 1:\tgame();//çŒœæ•°å­—æ¸¸æˆ\tbreak;case 0:\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\tbreak;default:\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\tbreak;&#125;\næ˜¯ä¸æ˜¯è§‰å¾—å°‘äº†ç‚¹ä»€ä¹ˆï¼Ÿåˆ«æ€¥ç©å®¶è‚¯å®šæƒ³å¤šæ¬¡æ¸¸ç©è¿™ä¸ªçŒœæ•°å­—æ¸¸æˆæ€»ä¸èƒ½æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§æ¸¸æˆå§æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªswitchåŠ ä¸Šå¾ªç¯è¯­å¥è¿™é‡Œæˆ‘ç”¨çš„æ˜¯do whlieå¾ªç¯\nint main()&#123;\tint input = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©&gt;:&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();//çŒœæ•°å­—æ¸¸æˆ\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\nå› ä¸ºæˆ‘ä»¬è¿™é‡Œç”¨åˆ°äº†scanfåº“å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶ #include &lt;stdio.h&gt;æ³¨æ„è¿™é‡Œæˆ‘ä»¬çš„game()å‡½æ•°æ˜¯æ¥ä¸‹æ¥è¦ç¼–å†™çš„çŒœæ•°å­—æ¸¸æˆçš„ä¸»è¦å‡½æ•°æˆ‘ä»¬å¯ä»¥å…ˆå±è”½æ‰game()æ¥æµ‹è¯•ç›®å‰ä»£ç æ˜¯å¦æ­£ç¡®å¦‚æœä½ èƒ½å¤ç°å’Œæˆ‘ä¸€æ ·çš„è¿è¡Œæ¡†ï¼Œè¯´æ˜ç›®å‰ç¼–è¯‘çš„é€‰æ‹©ç¨‹åºæ˜¯æ²¡é—®é¢˜çš„\næ¥ä¸‹æ¥ä¾¿æ˜¯é‡å¤´æˆå¦‚ä½•ç¼–å†™æˆ‘ä»¬çš„game()ç¨‹åºï¼Ÿè¿™é‡Œæˆ‘ä»¬è¦å…ˆå¼•å…¥ä¸€ä¸ªrandå‡½æ•°randæ˜¯ä¸€ä¸ªç”Ÿæˆéšæœºæ•°å­—çš„å‡½æ•° [ç‚¹å‡»æŸ¥çœ‹randå‡½æ•°å®šä¹‰]ä»å®šä¹‰æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œrandèƒ½ç”Ÿæˆçš„æ˜¯0åˆ°RAND_MAXçš„æ•´æ•°é€šè¿‡æŸ¥è¯¢ç™¾åº¦ç™¾ç§‘æˆ‘ä»¬å¯ä»¥çŸ¥é“RAND_MAXæœ€å°ä¸º7FFFä½¿ç”¨WIN10è‡ªå¸¦çš„è®¡ç®—å™¨ä¸­çš„ç¨‹åºå‘˜è®¡ç®—å™¨ï¼Œå¯ä»¥å¾—çŸ¥7FFF(16è¿›åˆ¶)å³ä¸º32767(åè¿›åˆ¶)æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç¼–è¯‘ä¸€ä¸ªç®€å•çš„ç¨‹åºæŸ¥çœ‹randä¼šç”Ÿæˆä»€ä¹ˆæ•°å­—\nvoid game()&#123;\tint ret = 0;\tint guess = 0;\tret = rand()%100+1; //ç”Ÿæˆ1-100çš„éšæœºæ•°\tprintf(&quot;%d\\n&quot;, ret);&#125;\nç¨‹åºå¾ˆå¥½çš„ç”Ÿæˆäº†1-100çš„æ•°å­—ï¼Œä½†æ˜¯çœŸçš„æœ‰è¿™ä¹ˆç®€å•å—ï¼Ÿå¦‚æœä½ å†æ¬¡è¿è¡Œç¨‹åºï¼Œå°±ä¼šå‘ç°ä¸¤æ¬¡è¿è¡Œæ¯æ¬¡ç”Ÿæˆçš„ç»“æœéƒ½ä¸€æ¨¡ä¸€æ ·ç©å®¶å³ä¾¿æ˜¯é‡æ–°è¿›è¡Œæ¸¸æˆï¼ŒçŒœçš„è¿˜æ˜¯ä¸Šä¸€æ¬¡çŒœçš„æ•°å­—ï¼Œé‚£æ€ä¹ˆè¡Œï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±è¦å¼•å…¥å’Œrandç›¸å…³çš„å¦å¤–ä¸€ä¸ªå°çŸ¥è¯†ç‚¹\nç”Ÿæˆéšæœºæ•°èµ·å§‹ç‚¹å¦‚æœä½ åœ¨ä¸Šé¢æåˆ°çš„randå®šä¹‰çš„ç½‘ç«™ç»§ç»­å¾€ä¸‹æ»‘ï¼Œä¾¿èƒ½çœ‹åˆ°srandè¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ç”¨åˆ°çš„å‡½æ•°\nvoid game()&#123;\tint ret = 0;\tint guess = 0;\tret = rand()%100+1;//ç”Ÿæˆ1-100çš„éšæœºæ•°\tsrand(1);\tprintf(&quot;%d\\n&quot;, ret);&#125;\næˆ‘ä»¬å…ˆæ·»åŠ srand(1)æŸ¥çœ‹æ•ˆæœè¿™æ—¶æ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°å­—å˜æˆç»Ÿä¸€çš„42å¦‚æœæˆ‘ä»¬æ”¹æˆsrand(2)çš„è¯ä¼šå‘ç°é™¤äº†ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯42ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½æ˜¯46è¿™æ˜¯å› ä¸ºrandå‡½æ•°éœ€è¦å¦å¤–ä¸€ä¸ªéšæœºæ•°ä½œä¸ºå®ƒç”Ÿæˆéšæœºæ•°çš„èµ·ç‚¹å¦‚æœæˆ‘ä»¬æƒ³è¦randæ¯æ¬¡éƒ½èƒ½ç”Ÿæˆä¸ä¸€æ ·çš„éšæœºæ•°çš„è¯å°±å¿…é¡»ç”¨srand(è¿™é‡Œéœ€è¦ä¸€ä¸ªéšæœºæ•°)è¿™ä¸æ˜¯å¥—å¨ƒå—ï¼Ÿæˆ‘ä»¬éœ€è¦éšæœºæ•°æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç¨‹åºä¸ä¼šæ­»å¾ªç¯ï¼Ÿé‚£ä»€ä¹ˆæ ·çš„æ•°å­—æ˜¯ä¼šä¸€ç›´å˜åŒ–çš„å‘¢ï¼Ÿ\næ—¶é—´å‡½æ•°è¿™é‡Œåˆè¦å¼•å…¥å¦å¤–ä¸€ä¸ªtimeå‡½æ•°åŒæ—¶æˆ‘ä»¬éœ€è¦äº†è§£æ—¶é—´æˆ³çš„å®šä¹‰\n\næ—¶é—´æˆ³å½“å‰è®¡ç®—æœºçš„æ—¶é—´-è®¡ç®—æœºçš„èµ·å§‹æ—¶é—´(1970.1.1  0:0:0)&#x3D;(xxxx)ç§’ \n\nè¿™ä¸ªæ•°å­—ä¾¿æ˜¯æˆ‘ä»¬æœ€æ˜“å¾—çš„éšæ—¶åœ¨å˜åŒ–çš„æ•°å­—æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨åˆšæ‰æŸ¥è¯¢randå®šä¹‰çš„ç½‘ç«™æ‰¾åˆ°timeçš„å®šä¹‰ [ç‚¹æˆ‘æŸ¥çœ‹]æˆ‘ä»¬æŠŠåˆšæ‰æ˜¯srand(2)æ”¹æˆå¦‚ä¸‹æ ¼å¼ï¼Œå†æ¬¡è°ƒè¯•ä»£ç \n\ntimeå‡½æ•°éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶#include&lt;time.h&gt;è¿™ä¸€æ¬¡æˆ‘ä»¬ç»ˆäºç”Ÿæˆäº†å®Œå…¨éšæœºçš„1-100çš„æ•°å­—ä½†æ˜¯æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜è¿™ä¸ªgameå‡½æ•°æ˜¯å¤„åœ¨mainå‡½æ•°å¾ªç¯è¯­å¥ä¸­çš„ä¹Ÿå°±æ˜¯æ¯æ¬¡æ¸¸æˆçš„æ—¶å€™ï¼Œgameå‡½æ•°éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„éšæœºæ•°ç©å®¶çŒœæµ‹çš„å¹¶ä¸æ˜¯ä¸€ä¸ªå›ºå®šçš„æ•°å­—ï¼Œé‚£ä¹Ÿæ°¸è¿œçŒœä¸åˆ°ç­”æ¡ˆæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æŠŠsrandæ·»åŠ åˆ°mainä¸»å‡½æ•°ä¸­ï¼Œè¿™æ ·æ¯ä¸€æ¬¡æ¸¸æˆåªä¼šç”Ÿæˆä¸€ä¸ªå›ºå®šçš„éšæœºæ•°ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„æ•ˆæœ!\n\n\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™ifã€else ifè¯­å¥æ¥å®ç°æ¸¸æˆçš„çŒœæµ‹ä»¥åŠæç¤º\nwhile (1)\t&#123;\t\tprintf(&quot;çŒœæ•°å­—:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;guess);\t\tif (guess&gt;ret)\t\t&#123;\t\t\tprintf(&quot;çŒœå¤§äº†\\n&quot;);\t\t&#125;\t\telse if (guess&lt;ret)\t\t&#123;\t\t\tprintf(&quot;çŒœå°äº†\\n&quot;);\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;æ­å–œä½ ï¼ŒçŒœå¯¹å•¦\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125;\nåŒæ—¶æˆ‘ä»¬è¦å±è”½æ‰åˆšæ‰æ”¾å…¥gameå‡½æ•°ä¸­çš„srandä»¥åŠä¼šå‘Šè¯‰ç©å®¶ç­”æ¡ˆçš„printf\nè¿™æ ·æˆ‘ä»¬çš„çŒœæ•°å­—æ¸¸æˆå°±å¤§åŠŸå‘Šæˆäº†ï¼æ¥è¯•ç©ä¸€ä¸‹å§ï¼å¯ä»¥çœ‹åˆ°æ¸¸æˆæ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„æ ·å­ç©å®¶ä¹Ÿå¯ä»¥é‡å¤æ¸¸æˆ\nè¿™ç¯‡å°åšå®¢åˆ°è¿™é‡Œä¹Ÿå°±ç»“æŸäº†ç¬¬ä¸€æ¬¡å°è¯•çš„æ—¶å€™ï¼Œæ‰‹è´±ä¸å°å¿ƒæŒ‰äº†F5ï¼Œå†™äº†ä¸€åŠçš„åšå®¢ç›´æ¥æ— äº†ä¸ç®¡æ€æ ·ï¼Œæ„Ÿè°¢ä½ çœ‹åˆ°æœ€åè¿˜è¯·dalaoä»¬å¯¹æˆ‘çš„åšå®¢è¿›è¡ŒæŒ‡æ­£å¦‚æœèƒ½ç‚¹ä¸ªèµä»€ä¹ˆçš„å°±æœ€å¥½äº†\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘gotoè¯­å¥","url":"/2021/08/16/note_c/6goto%E8%AF%AD%E5%8F%A5/","content":"è¿™æ˜¯åˆè¯†cè¯­è¨€çš„ç¬¬äº”ç¯‡æ–‡ç« äº†\nè™½ç„¶çœ‹çš„äººä¸å¤šï¼Œä½†æˆ‘ä¸ä¼šæ”¾å¼ƒå“’\næ¯•ç«Ÿè¿™ä¹Ÿæ˜¯ç»™æˆ‘è‡ªå·±çš„ä¸€ä¸ªå­¦ä¹ è®°å½•ï¼Œä¸æƒ³å†™æ—¥è®°å°±ç”¨è¿™ä¸ªä»£æ›¿äº†ï¼\n\n\ngotoè¯­å¥cè¯­è¨€ä¸­æä¾›äº†å¯ä»¥éšæ„ä½¿ç”¨çš„gotoè¯­å¥å’Œæ ‡è®°è·³è½¬çš„æ ‡å·\nç†è®ºä¸Šæ¥è¯´ï¼Œgotoè¯­å¥æ²¡ä»€ä¹ˆå¿…è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨whlieç­‰å¾ªç¯è¯­å¥æ¥æ›¿ä»£å®ƒ\n\ngotoæ˜¯ç±»å¾ªç¯è¯­å¥ï¼Œå…¶æœ¬èº«æ˜¯å…³é”®å­—\n\n\ngotoè¯­å¥åœ¨æŸäº›åœºæ™¯ä¸‹ç”¨çš„åˆ°ï¼Œå¦‚ç»ˆæ­¢ç¨‹åºåœ¨æŸäº›æ·±åº¦åµŒå¥—çš„ç»“æ„çš„å¤„ç†è¿‡ç¨‹ï¼Œä¾‹å¦‚ä¸€æ¬¡è·³å‡ºä¸¤æ¬¡æˆ–è€…å¤šå±‚çš„å¾ªç¯\nè¿™ç§æƒ…å†µä¸‹breakè¾¾ä¸åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚breakåªèƒ½ä»æœ€å†…å±‚å¾ªç¯é€€å‡ºåˆ°ä¸Šä¸€å±‚çš„å¾ªç¯\n\ngotoè¯­å¥çœŸæ­£é€‚åˆçš„åœºæ™¯å¦‚ä¸‹ï¼š\nfor(...) \tfor(...)\t&#123;\t\tfor(...)        &#123;        \tif(disaster)         \t\tgoto error;          &#125;    &#125;\t...error:     if(disaster)//å¤„ç†é”™è¯¯æƒ…å†µ\n\nç”¨ä¸‹é¢è¿™ä¸ªä¾‹å­æ¥ç»™å¤§å®¶ç®€å•åœ°æ¼”ç¤ºä¸€ä¸‹gotoçš„ä½œç”¨\n#include &lt;stdio.h&gt;int main()&#123;\tprintf(&quot;hello world\\n&quot;);\tgoto again;\tprintf(&quot;ä½ å¥½\\n&quot;);again:\tprintf(&quot;hehe\\n&quot;);\treturn 0;&#125;\n\nç»“æœå¦‚ä¸‹\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºè·³è¿‡äº†printf(â€œä½ å¥½\\nâ€);ï¼Œç›´æ¥åˆ°ä¸‹ä¸€æ­¥æ‰“å°hehe\nä»£ç çš„æ‰§è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š\n\nå…¶å®gotoçš„ä½œç”¨æ–¹å¼éå¸¸å®¹æ˜“ç†è§£ï¼Œå³ï¼šèµ°åˆ°again\nè¿™æ—¶å€™ç¨‹åºä¼šç›´æ¥è·³åˆ°againåé¢çš„ä»£ç ï¼Œä¸ç®¡è¿™ä¸ªagainæ˜¯åœ¨gotoçš„åé¢è¿˜æ˜¯å‰é¢\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œagainåœ¨å‰é¢å¿…é¡»åœ¨ç‰¹å®šçš„å¾ªç¯\\æ¡ä»¶ä»£ç ä¸­ä½¿ç”¨\nå¦‚æœä½ å°†ä¸Šè¿°çš„ä»£ç æ”¹æˆè¿™æ ·\nint main()&#123;again:    printf(&quot;hello world\\n&quot;);\tgoto again;\tprintf(&quot;ä½ å¥½\\n&quot;);\tprintf(&quot;hehe\\n&quot;);\treturn 0;&#125;\n\né‚£ä¹ˆä»£ç å°±ä¼šä¸€ç›´æ‰“å°hello worldï¼Œè¿›å…¥æ­»å¾ªç¯\né‚£gotoå°±ä¸æ˜¯æ²¡æœ‰å¿…è¦äº†ï¼Œæ˜¯æ¯«æ— æ„ä¹‰\n\næƒ³çŸ¥é“gotoåœ¨å‰é¢çš„æ—¶å€™è¦æ€ä¹ˆä¹¦å†™ä»£ç å—\nä¸”å¬ä¸‹å›åˆ†è§£\nï¼ˆå› ä¸ºè¿™ä¸ªä»£ç æ˜¯ä¸ªå…³æœºå°ç¨‹åºï¼Œæˆ‘æ„Ÿè§‰é‡æ–°å†™ä¸€ç¯‡åšå®¢ä¼šæ›´å¥½ï¼‰\nç‚¹ä¸ªèµå†èµ°å§ï¼Œæ±‚æ±‚äº†ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘å…³æœºç¨‹åº","url":"/2021/08/20/note_c/7%E5%85%B3%E6%9C%BA%E7%A8%8B%E5%BA%8F/","content":"ä¸çŸ¥ä¸è§‰å°±æ‘¸äº†å‡ å¤©é±¼ï¼ŒåŠæ—¶é†’æ‚Ÿï¼Œå¼€å§‹ç ä¹‹å‰åœ¨gotoè¯­å¥ä¸­æåˆ°çš„å…³æœºå°ç¨‹åº\n\n\n@[TOC]\nå…³æœºç¨‹åºåœ¨ä»‹ç»è¿™ä¸ªç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬è¦äº†è§£win10ç³»ç»Ÿçš„ä¸€äº›ç³»ç»ŸæŒ‡ä»¤\nwindowsç³»ç»ŸæŒ‡ä»¤ç”¨win+ræ‰“å¼€ç³»ç»Ÿçš„è¿è¡Œæ¡†ï¼ˆè¿™ä¸ªä»xpï¼Œwin7åˆ°win10éƒ½æœ‰ï¼‰\nåœ¨å¼¹å‡ºçš„è¿è¡Œæ¡†ä¸­è¾“å…¥shutdown -s -t 7200ï¼ˆåé¢è·Ÿç€çš„æ•°å­—æ˜¯æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼‰\n\n\nç³»ç»Ÿå°†åœ¨å³ä¸‹è§’æç¤ºä½ å®šæ—¶å…³æœºçš„æ—¶é—´ï¼Œå±Šæ—¶è¿˜ä¼šåœ¨å®šæ—¶å…³æœºæ—¶é—´æå‰60sæé†’ä½ è¦å…³æœº\næƒ³è¦å–æ¶ˆå®šæ—¶å…³æœºï¼Œå¯ä»¥åœ¨è¿è¡Œä¸­è¾“å…¥shutdown -a\n\n\nå®šæ—¶å…³æœºå°±è¢«å–æ¶ˆäº†\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å°±è¦çŸ¥æ‚‰Cè¯­è¨€ä¸­å¯ä»¥å¸®æˆ‘ä»¬åœ¨ç³»ç»Ÿçš„è¿è¡Œä¸­è¾“å…¥æŒ‡ä»¤çš„å‡½æ•°\nsystemå‡½æ•°é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨ä¹‹å‰å’Œå¤§å®¶åˆ†äº«è¿‡çš„ç½‘ç«™cplusplusä¸ŠæŸ¥è¯¢è¯¥å‡½æ•°çš„å®šä¹‰\n\nç®€å•åœ°è¯´ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ¥å¸®æˆ‘ä»¬executeæ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„\nåŒæ—¶ï¼Œç½‘ç«™å‘Šè¯‰æˆ‘ä»¬ï¼šè¿™ä¸ªå‡½æ•°çš„å¤´æ–‡ä»¶æ˜¯stdlib.h\n\nå…ˆå†™ä¸€ä¸ªç®€å•çš„å…³æœºç¨‹åºæ¥å®æ“ä¸€ä¸‹systemå‡½æ•°\n#incldue &lt;stdlib.h&gt;int main()&#123;\tsystem(&quot;shutdown -s -t 60&quot;);//system() -æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„\treturn 0;&#125;\n\n\nå¾ªç¯æŒ‡ä»¤å’Œå…³æœºç¨‹åºæ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæœ‰ç‚¹æŸçš„æ–¹å¼å†™ä¸€ä¸ªå…³æœºç¨‹åº\nè¿è¡Œè¿™ä¸ªç¨‹åºåï¼Œåªæœ‰è¾“å…¥â€œæˆ‘æ˜¯ğŸ–â€æ‰èƒ½å–æ¶ˆå…³æœº\nint main()&#123;\tchar input[20] = &#123; 0 &#125;;\tsystem(&quot;shutdown -s -t 60&quot;);\twhile(1)\t&#123;\t\tprintf(&quot;è¯·æ³¨æ„ï¼Œä½ çš„ç”µè„‘å°†åœ¨1åˆ†é’Ÿå†…å…³æœºï¼Œå¦‚æœè¾“å…¥:æˆ‘æ˜¯çŒªï¼Œå°±å–æ¶ˆå…³æœº\\nè¯·è¾“å…¥&gt;:&quot;);\t\tscanf(&quot;%s&quot;, input);\t\tif (strcmp(input, &quot;æˆ‘æ˜¯çŒª&quot;) == 0)//å¤´æ–‡ä»¶#include &lt;string.h&gt;\t\t&#123;\t\t\tsystem(&quot;shutdown -a&quot;);\t\t\tbreak;\t\t&#125;\t&#125;\treturn 0;&#125;\n\nè¿™é‡Œæˆ‘ä»¬è¿˜ç”¨åˆ°äº†strcmpå‡½æ•°ï¼Œç”¨äºæ¯”è¾ƒä½ è¾“å…¥çš„å­—ç¬¦å’Œâ€œæˆ‘æ˜¯ğŸ–â€æ˜¯å¦ä¸€è‡´\n\nè¦æ³¨æ„â€œ&#x3D;&#x3D;â€ä¸èƒ½ç”¨äºæ¯”è¾ƒå­—ç¬¦\n\nè¿™é‡Œç”¨åˆ°çš„æ˜¯ååˆ†åŸºç¡€çš„while+ifçš„è¯­å¥ç»„åˆã€‚\nè¿è¡Œç»“æœå¦‚ä¸‹\n\n\nè¾“å…¥æˆ‘æ˜¯ğŸ–åæ³¨é”€ä¼šå–æ¶ˆï¼Œå¦‚æœè¾“å…¥é”™è¯¯ä¼šå†æ¬¡å¼¹å‡ºæç¤º\ngotoè¯­å¥å†™å…³æœºç¨‹åºå½“ç„¶ï¼Œå¦‚æœçœ‹è¿‡ä¸Šä¸€ç¯‡çš„ä½ è‚¯å®šçŸ¥é“è¿™ç¯‡åšå®¢çš„é‡ç‚¹æ˜¯goto\nä¸»è¦æ˜¯æ¼”ç¤ºä¸€ä¸‹againåœ¨gotoæ‰€åœ¨ä»£ç è¡Œä¹‹å‰çš„æƒ…å†µ\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;int main()&#123;\tchar input[20] = &#123; 0 &#125;;\tsystem(&quot;shutdown -s -t 60&quot;);//å¤´æ–‡ä»¶&lt;stdlib.h&gt;again:\tprintf(&quot;è¯·æ³¨æ„ï¼Œä½ çš„ç”µè„‘å°†åœ¨1åˆ†é’Ÿå†…å…³æœºï¼Œå¦‚æœè¾“å…¥:æˆ‘æ˜¯çŒªï¼Œå°±å–æ¶ˆå…³æœº\\nè¯·è¾“å…¥&gt;:&quot;);\tscanf(&quot;%s&quot;, input);\tif (strcmp(input, &quot;æˆ‘æ˜¯çŒª&quot;) == 0)//æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ -strcmp() å¤´æ–‡ä»¶&lt;string.h&gt;\t&#123;\t\tsystem(&quot;shutdown -a&quot;);\t&#125;\telse\t&#123;\t\tgoto again;\t&#125;\treturn 0;&#125;\n\nè¿è¡Œçš„ç»“æœå’Œä¸Šé¢çš„whlieè¯­å¥ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸æˆªå›¾äº†\nè¿™ä¸ªä»£ç å¯ä»¥ç”¨æ¥æ•´è›Šä½ çš„æŸå‹ï¼Œæˆ–è€…åœ¨æ˜¥èŠ‚çš„æ—¶å€™é˜»æ­¢ç†Šå­©å­â€œå€Ÿâ€ç”¨ä½ çš„å¥³æœ‹å‹ï¼ˆæŒ‡ç”µè„‘ï¼‰\nè¯¢é—®æ¡†é‡Œçš„é—®é¢˜å’Œå¯¹åº”çš„å›ç­”éƒ½å¯ä»¥éšæ„æ›´æ”¹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠæ—¶é—´æ”¹æˆ10ç§’è®©äººå‹æ ¹æ¥ä¸åŠååº”\nå¦‚æœä½ ç”¨çš„æ˜¯devc++ï¼Œæ¯æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªexeæ–‡ä»¶\n\næŠŠlogoæ”¹æ”¹ï¼Œå°±èƒ½å»ç³Šå¼„äººäº†\nï¼ˆè¯è¯´vs2019è¦æ€ä¹ˆç”Ÿæˆexeå•Šï¼Œå¾—å»ç ”ç©¶ä¸€ä¸‹ï¼‰\néƒ‘é‡è­¦å‘Šï¼\n\nå¨±ä¹ä¸€ä¸‹å³å¯\n\nè‹¥ä½¿ç”¨è¯¥ç¨‹åºå¯¼è‡´ç”µè„‘å…³æœºä¸”æœªä¿å­˜é‡è¦æ–‡ä»¶\n\n\næœ¬åšä¸»ä¸è´Ÿä»»ä½•è´£ä»»ï¼\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘æ’åºä¸‰ä¸ªè¾“å…¥çš„æ•°å­—","url":"/2021/08/27/note_c/8%E6%8E%92%E5%BA%8F%E4%B8%89%E4%B8%AA%E8%BE%93%E5%85%A5%E7%9A%84%E6%95%B0%E5%AD%97/","content":"å¦‚ä½•å°†è¾“å…¥çš„3ä¸ªæ•°å­—æ’åºå¹¶æ‰“å°å‡ºæ¥@[TOC]\næ‰¿æ¥ä¸Šç¯‡åšå®¢ä¸­è¾“å‡ºæ•°ç»„å†…å…ƒç´ æœ€å¤§å€¼çš„å†…å®¹\næœ¬ç¯‡åšå®¢å‘å¤§å®¶åˆ†äº«å¦‚ä½•å°†æˆ‘ä»¬è¾“å…¥çš„ä¸‰ä¸ªæ•°å­—è¿›è¡Œå¤§å°æ’åºå¹¶æ‰“å°å‡ºæ¥\n1.scanfå‡½æ•°int main()&#123;\tint a = 0;\tint b = 0;\tint c = 0;\tscanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c);&#125;\n\næ—¢ç„¶éœ€è¦è¾“å…¥ï¼Œé‚£å°±è¦ç”¨åˆ°scanfå‡½æ•°æ¥æ¥å—æˆ‘ä»¬è¾“å…¥çš„æ•°å­—\n\nè¦ä½¿ç”¨æŒ‡é’ˆå˜é‡ï¼Œå› ä¸ºè¿™é‡Œçš„scanféœ€è¦æ”¹å˜æˆ‘ä»¬çš„aï¼Œbï¼Œc\nscanfçš„å¤´æ–‡ä»¶æ˜¯ &lt;stdio.h&gt;\n\n2.tmpç›’å­ç›¸ä¿¡å¤§å®¶åœ¨è‡ªå·±çš„å­¦ä¹ ä¸­å·²ç»æ¥è§¦è¿‡ä½¿ç”¨tmpæ¥è¿›è¡Œå¤§å°æ¯”è¾ƒçš„ä»£ç äº†\nä»€ä¹ˆï¼Ÿæ²¡æœ‰ï¼Ÿ\né‚£ä¹Ÿæ²¡å…³ç³»ï¼ŒåŸºæœ¬å®ç°çš„åŸç†æ˜“æ‡‚çš„å¾ˆï¼\nif (a &lt; b)\t&#123;\t\tint tmp = a;\t\ta = b;\t\tb = tmp;\t&#125;\n\n\næŠŠaçš„å€¼èµ‹ç»™tmp\nå› ä¸ºaå°äºbï¼Œæ‰€ä»¥æˆ‘ä»¬è®©aç­‰äºæ›´å¤§çš„å€¼\nå†ä½¿ç”¨tmpæŠŠåŸæ¥æ˜¯açš„å€¼èµ‹ç»™b\n\nè¿™æ ·å°±å†™å¥½äº†ä¸€ä¸ªå¤§å°æ¯”è¾ƒå’Œäº¤æ¢çš„è¯­å¥äº†\næˆ‘ä»¬åªéœ€è¦CTRL+Cç„¶å+V\nç¨å¾®æ”¹æ”¹é‡Œé¢çš„abc\nå°±èƒ½å†™å‡ºä¸‹é¢çš„å®Œæ•´ä»£ç \n#include&lt;stdio.h&gt;int main()&#123;\tint a = 0;\tint b = 0;\tint c = 0;\tscanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c);\tif (a &lt; b)\t&#123;\t\tint tmp = a;\t\ta = b;\t\tb = tmp;\t&#125;\tif (a &lt; c)\t&#123;\t\tint tmp = a;\t\ta = c;\t\tc = tmp;\t&#125;\tif (b &lt; c)\t&#123;\t\tint tmp = b;\t\tb = c;\t\tc = tmp;\t&#125;\tprintf(&quot;%d&gt;%d&gt;%d&quot;, a, b, c);\treturn 0;&#125;\n\nè¿è¡Œä¸€ä¸‹\n\nè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬è¾“å…¥æ•°å­—çš„æ—¶å€™éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ä¸¤ä¸ªæ•°å­—\nå› ä¸ºè¿™ä¸²ä»£ç å®ç°çš„æ˜¯ä»å¤§åˆ°å°æ’åˆ—\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“å°çš„æ—¶å€™åœ¨æ¯ä¸ªæ•°å­—ä¹‹é—´åŠ ä¸ª&gt;å·\nè¿™é‡Œæ˜¾ç¤ºçš„å†…å®¹å’Œä¸‹é¢è¿™è¡Œä»£ç %dä¸­é—´çš„å†…å®¹æ˜¯ä¸€è‡´çš„\nprintf(&quot;%d&gt;%d&gt;%d&quot;, a, b, c);\n\næ¯”å¦‚æˆ‘æŠŠä¸­é—´çš„&gt;æ”¹æˆ#å·ï¼Œæ‰“å°å‡ºæ¥ä¹Ÿæ˜¯ä¸€è‡´çš„\n\næ³¨æ„çš„ç‚¹åœ¨ç¼–å†™è¿™ä¸ª3ä¸ªæ•°å­—æ¯”è¾ƒçš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å…ˆå°†aå’Œbã€cæ¯”è¾ƒï¼Œå†æ¯”è¾ƒbå’Œcä¸‹é¢çš„è¿™ä¸ªä»£ç æ˜¯ä¸€ä¸ªé”™è¯¯çš„ä»£ç \nif (a &lt; b)&#123;\tint tmp = a;\ta = b;\tb = tmp;&#125;if (b &lt; c)&#123;\tint tmp = b;\tb = c;\tc = tmp;&#125;if (a &lt; c)&#123;\tint tmp = a;\ta = c;\tc = tmp;\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šaé‡Œé¢è£…çš„æ˜¯æœ€å¤§çš„é‚£ä¸ªæ•°å­—ï¼Œç„¶åæ‰èƒ½è®©bå’Œcæ¯”è¾ƒå†³å‡ºâ€œå­£å†›â€å¦‚æœè¿™æ ·è¯´ä½ è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ï¼Œå¯ä»¥å°è¯•å°†è¿™ä¸²ä»£ç è¾“å…¥vsç¼–è¯‘å™¨ï¼Œç”¨ctrl+f10è°ƒè¯•ï¼ŒæŸ¥çœ‹è¿è¡Œä¸€ä¸ªifè¯­å¥ä¹‹åaï¼Œbï¼Œcçš„èµ‹å€¼çš„å˜åŒ–\n\nç»“è¯­è¿™ä¸²ä»£ç å¦‚æœç»§ç»­å¤åˆ¶ç²˜è´´çš„è¯å¯ä»¥å®ç°ä¸æ­¢3ä¸ªæ•°å­—çš„å¤§å°æ’åˆ—å¹¶æ‰“å°\nä¸çŸ¥é“èƒ½ä¸èƒ½ç”¨è‡ªå®šä¹‰å‡½æ•°å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Ÿ\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘çŒœæ•°å­—æ¸¸æˆ","url":"/2021/08/15/note_c/9%E5%87%BD%E6%95%B0%E5%BA%93%E5%87%BD%E6%95%B0/","content":"å‡½æ•°æ˜¯ä»€ä¹ˆ?æ•°å­¦ä¸­æˆ‘ä»¬å¸¸è§åˆ°å‡½æ•°çš„æ¦‚å¿µï¼Œä½†æ˜¯ä½ äº†è§£Cè¯­è¨€ä¸­çš„å‡½æ•°å—ï¼Ÿç»´åŸºç™¾ç§‘ä¸­å¯¹å‡½æ•°æ˜¯å¦‚ä¸‹å®šä¹‰çš„ã€‚å¯ä»¥è¯´å‡½æ•°functionæ˜¯è®¡ç®—æœºå˜æˆè¯­è¨€ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ã€‚å¦‚æœæˆ‘ä»¬æƒ³å­¦å¥½cè¯­è¨€ï¼Œå°±å¿…é¡»å­¦ä¼šå¦‚ä½•ä½¿ç”¨åº“å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ã€‚\nå›æº¯åœ¨æˆ‘çš„ã€çŒœæ•°å­—æ¸¸æˆã€‘åšå®¢ä¸­ï¼Œå·²ç»æœ‰è®²è¿°è¿‡å¦‚ä½•æŸ¥è¯¢åº“å‡½æ•°çš„å®šä¹‰ã€‚åœ¨ä¸Šä¸€ç¯‡ã€ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ã€‘ä¸­ä¹Ÿæœ‰ä¸è‡ªå®šä¹‰å‡½æ•°ç›¸å…³çš„å†…å®¹ã€‚æœ¬ç¯‡åšå®¢å°†æ›´ç»†è‡´åœ°å‘åˆå­¦cçš„ä¼™ä¼´ä»¬åˆ†äº«å¦‚ä½•ä½¿ç”¨åº“å‡½æ•°ã€‚@[toc]\nåº“å‡½æ•°åº“å‡½æ•°ï¼Œæ˜¯cè¯­è¨€åº“ä¸­å·²ç»åŒ…å«äº†çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°çš„ä½œç”¨ä¸ä¸€ï¼Œä½†ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹â€”â€”æ‰€æœ‰äººéƒ½ç”¨çš„ä¸Šã€‚\n\nå½“ä½ å†™å‡ºä¸€ä¸²ä»£ç ï¼Œè‚¯å®šä¼šæƒ³çŸ¥é“å®ƒè¿è¡Œçš„ç»“æœï¼Œè¿™æ—¶å€™è¦ç”¨åˆ° printf æ¥æ‰“å°å¤§å®¶ç¬¬ä¸€ä¸ªå­¦ä¹ çš„hello worldä»£ç ä¸­å°±ç”¨åˆ°äº† printfåº“å‡½æ•°\nåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦é¢‘ç¹åœ°åšå­—ç¬¦ä¸²çš„æ‹·è´ strcpy\n\næ—¢ç„¶æ‰€æœ‰äººéƒ½ç”¨çš„ä¸Šï¼Œé‚£ä¸ºä»€ä¹ˆä¸è®©è¿™äº›å‡½æ•°å˜æˆç¼–ç¨‹è¯­è¨€ä¸­é¢„è®¾çš„åŠŸèƒ½ï¼Œè®©åæ¥è€…æ›´æ–¹ä¾¿çš„ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å‘¢ï¼Ÿè¿™æ ·æ•ˆç‡å€å¢ï¼Œå¯ç§»æ¤æ€§å’Œæ˜“ç”¨æ€§ä¹Ÿå¤§å¤§å¢å¼ºï¼Œä½•ä¹è€Œä¸ä¸ºã€‚åº“å‡½æ•°ç”±æ­¤è¯ç”Ÿ\nCè¯­è¨€å¸¸ç”¨çš„åº“å‡½æ•°\nIOå‡½æ•°\nå­—ç¬¦ä¸²æ“ä½œå‡½æ•°\nå­—ç¬¦æ“ä½œå‡½æ•°\nå†…å­˜æ“ä½œå‡½æ•°\næ—¶é—´&#x2F;æ—¥æœŸå‡½æ•°\næ•°å­¦å‡½æ•°\nå…¶ä»–åº“å‡½æ•°\nåœ¨ã€çŒœæ•°å­—æ¸¸æˆã€‘ä¸­ä½¿ç”¨åˆ°çš„timeå‡½æ•°æ˜¯æ—¶é—´å‡½æ•°çš„ä¸€ç§\n\n\n\næ¥ä¸‹æ¥æˆ‘ç”¨ä¸¤ä¸ªå‡½æ•°çš„å…·ä½“æ¡ˆä¾‹ï¼Œå’Œå¤§å®¶åˆ†äº«å¦‚ä½•æŸ¥æ‰¾åº“å‡½æ•°å®šä¹‰ä»¥åŠå¦‚ä½•å°è¯•ä½¿ç”¨åº“å‡½æ•°åˆ†åˆ«æ˜¯ strcpyå‡½æ•° å’Œ memsetå‡½æ•°\næŸ¥è¯¢åº“å‡½æ•°å®šä¹‰åœ¨è¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸¤ä¸ªè¶…æ£’çš„ç½‘ç«™ï¼\n\ncppreference ä¸­æ–‡\ncplusplus è‹±æ–‡\n\nå¦‚æœè¦æŸ¥è¯¢åº“å‡½æ•°å®šä¹‰ï¼Œcplusplusæ˜¯æˆ‘ä»¬çš„ä¸äºŒä¹‹é€‰ã€‚å®ƒè™½ç„¶åªæœ‰è‹±æ–‡ï¼Œä½†æ˜¯è¿™éš¾ä¸å€’æˆ‘ä»¬ä»£ç äººï¼Œå®åœ¨ä¸è¡Œå°±ç½‘é¡µç¿»è¯‘ä¸€ä¸‹å˜›ï¼\nå¤¹å¸¦ç§è´§æ—¶é—´å¦‚æœä½ ç”¨çš„æ˜¯chromeæˆ–è€…å¾®è½¯æœ€æ–°çš„edgeæµè§ˆå™¨ï¼Œå¯ä»¥å°è¯•å®‰è£…ä¾§è¾¹ç¿»è¯‘è¿™ä¸ªæ’ä»¶éå¸¸å¥½ç”¨ï¼Œå¼ºåŠ›æ¨èï¼\nmemsetå‡½æ•°æ‰“å¼€cplusplusï¼Œè¾“å…¥æˆ‘ä»¬éœ€è¦æŸ¥è¯¢çš„å‡½æ•°çœ‹ä¸æ‡‚ï¼Ÿæ²¡å…³ç³»ã€‚åªè¦äº†è§£ä¸‹é¢å‡ ä¸ªç®€å•çš„å•è¯ï¼Œæˆ‘ä»¬å°±èƒ½å°è¯•å»è¯»åº“å‡½æ•°çš„å®šä¹‰äº†\n\nfunction â†’å‡½æ•°\nParameters â†’å‚æ•°\nReturn Value â†’è¿”å›å€¼\nExample â†’ä¾‹å­\n\nåœ¨é¡µé¢çš„å·¦è¾¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡½æ•°çš„å¤´æ–‡ä»¶\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ˜¯c++è¯­è¨€é‡Œçš„å¤´æ–‡ä»¶ï¼Œè€Œå·¦è¾¹çš„&lt;string.h&gt;æ‰æ˜¯æˆ‘ä»¬cè¯­è¨€è¦ç”¨çš„å¤´æ–‡ä»¶\n\ncplusplusçœŸæ­£å¼ºå¤§çš„åœ°æ–¹ï¼Œåœ¨äºå®ƒå¯ä»¥è®©ä½ ç›´æ¥åœ¨ç½‘é¡µç«¯ç¼–è¾‘ç»™å‡ºçš„ä»£ç ä¾‹å­memsetå…¶å®æ˜¯ç”±ä¸¤ä¸ªå•è¯ç»„æˆçš„ï¼Œmemeoryå†…å­˜ + setè®¾ç½®è¯»å‡½æ•°å®šä¹‰çš„æ–‡æ¡£çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯é€å­—è§£è¯»ï¼Œä¸è¦æ•´å¥ç¿»è¯‘ã€‚\n\næ³¨æ„æ¯ä¸ªå‡½æ•°ä¸‹é¢ç»¿è‰²çš„è¿™ä¸€è¡Œä»¥memsetä¸ºä¾‹ï¼Œvoid*è¡¨ç¤ºå®ƒæ˜¯æŒ‡é’ˆå˜é‡ï¼Œintè¡¨ç¤ºæ•´å‹ï¼Œsize_tè¡¨ç¤ºå¤§å°\n\nFill block of memory å¡«å……å†…å­˜å—\nSets the first num bytes è®¾ç½®å‰numä¸ªå­—èŠ‚\nSets the first num bytes of the block of memory è®¾ç½®å†…å­˜å—ä¸­çš„å‰numä¸ªå­—èŠ‚\npointed by ptr ç”±ptræŒ‡å¼•çš„\nto the specified value è®¾ç½®æˆç‰¹æ®Šçš„value\n\n\nè¿èµ·æ¥å°±æ˜¯ï¼š\n\næŠŠç”±ptræŒ‡å¼•çš„å†…å­˜å—çš„å‰numä¸ªå­—èŠ‚è®¾ç½®æˆç‰¹æ®Šçš„value\n\nè®©æˆ‘ä»¬ç»§ç»­è§£è¯»\n\nptr è¦è¢«å¡«å……çš„å†…å­˜å—çš„pointeræŒ‡ç¤ºå™¨\nvalue è¦è¢«è®¾å®šçš„ç‰¹æ®Šå€¼ï¼Œå®ƒæ˜¯intæ•´å‹\nnum æœ‰å¤šå°‘å­—èŠ‚çš„å†…å­˜è¦è¢«è®¾å®šæˆvalue\nsize_t æ— ç¬¦å·æ•´å‹\n\nè¯»åˆ°è¿™é‡Œï¼Œå…³äºmemsetçš„å®šä¹‰æˆ‘ä»¬å°±èƒ½å¤§æ¦‚äº†è§£äº†æ¥ä¸‹æ¥å°±è¦è¿›å…¥å®è·µäº†\n#include&lt;string.h&gt;//memsetå¤´æ–‡ä»¶#include &lt;stdio.h&gt;//printfå¤´æ–‡ä»¶int main()&#123;\tchar arr[] = &quot;hello world&quot;;\tmemset(arr, &#x27;*&#x27;, 5);\tprintf(&quot;%s\\n&quot;, arr);\treturn 0;&#125;\nåœ¨ä½¿ç”¨memsetçš„æ—¶å€™ï¼Œæˆ‘ä»¬éµå¾ªå®šä¹‰ä¸­çš„ ( void * ptr, int value, size_t num )æ–¹å¼\nmemset(arr, &#x27;*&#x27;, 5);\n\narræ˜¯æˆ‘ä»¬è¦æ›´æ”¹çš„å†…å®¹\nâ€˜*â€™ æŒ‡æˆ‘ä»¬æŠŠarrä¸­çš„å†…å®¹æœ€ç»ˆæ”¹æˆ  â€˜*â€˜\n5 è¡¨ç¤ºæˆ‘ä»¬æƒ³æ›´æ”¹5ä¸ªå­—ç¬¦çš„å†…å®¹\nç”¨ printf æ‰“å°æœ€ç»ˆæ›´æ”¹åçš„ç»“æœ\n\nè¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥çœ‹åˆ°ï¼Œhello worldä¸­çš„å‰äº”ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯helloè¢«æ”¹æˆäº†*****å’Œmemsetçš„å®šä¹‰çš„æè¿°å®Œå…¨ä¸€è‡´ï¼\næ€æ ·ï¼Œæ˜¯å¦æœ‰ç‚¹å°æ¿€åŠ¨ï¼Ÿï¼ˆåæ­£æˆ‘å½“æ—¶å­¦åˆ°è¿™é‡Œçš„æ—¶å€™æ˜¯æœ‰çš„ï¼‰è®©æˆ‘ä»¬ç»§ç»­ï¼\nstrcpyå‡½æ•°æ¯”èµ·memsetå‡½æ•°ï¼Œstrcpyå‡½æ•°çš„ä½¿ç”¨é¢‘ç‡æ›´é«˜æˆ‘ä»¬åŒæ ·åœ¨cplusplusä¸­æŸ¥è¯¢strcpyå‡½æ•°çš„å®šä¹‰æˆ‘ä»¬ä¾æ—§ç”¨ä¸Šè¿°è¯´çš„é€æ­¥è§£è¯»æ³•æ¥æŸ¥é˜…strcpyçš„å®šä¹‰\n\nCopies the C string æ‹·è´å†…å®¹\npointed by source ç”±sourceæŒ‡ç¤ºçš„çš„å†…å®¹\ninto the array pointed by destination åˆ°ç›®æ ‡æ•°ç»„ä¸­\n\n\næ‹·è´ç”±sourceæŒ‡ç¤ºçš„å†…å®¹åˆ°ç›®æ ‡æ•°ç»„ä¸­\n\nç…§æ ·å®è·µä¸€ä¸‹\n#include &lt;string.h&gt;//strcpyå‡½æ•°å¤´æ–‡ä»¶#include &lt;stdio.h&gt;int main()&#123;\tchar arr1[] = &quot;bit&quot;;\tchar arr2[20] = &quot;##########&quot;;\tstrcpy(arr2, arr1);\tprintf(&quot;%s\\n&quot;, arr2);\treturn 0; &#125;\n(arr2, arr1)  å…¶ä¸­arr2æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼Œarr1æ˜¯æˆ‘ä»¬è¦æ‹·è´çš„å†…å®¹\nstrcpy(arr2, arr1);\n\nè¿è¡Œç»“æœå¦‚ä¸‹å½“ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œè‚¯å®šä¼šæœ‰å’Œæˆ‘ä¸€æ ·çš„ç–‘æƒ‘ä¸ºä»€ä¹ˆæ‹·è´åˆ°2ä¸­çš„å†…å®¹åªæœ‰bitä¸‰ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åç»­çš„#######æ²¡æœ‰æ‰“å°å‡ºæ¥å‘¢ï¼Ÿè¿™é‡Œå°±æ¶‰åŠåˆ°è½¬ä¹‰å­—ç¬¦é‡Œé¢çš„å†…å®¹äº†\nå­—ç¬¦ç»“æŸæ ‡å¿—â€\\0â€œæ˜¯å­—ç¬¦ä¸²çš„ç»“æŸæ ‡å¿—ï¼Œé»˜è®¤è·Ÿåœ¨æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦åé¢\n\nâ€œbitâ€ å­—ç¬¦å®é™…ä¸º â€bit\\0â€œ\n\næ‰“å°çš„æ—¶å€™é‡åˆ°â€\\0â€œä¼šè‡ªåŠ¨åœæ­¢\nchar arr1[] = &quot;bit&quot;;char arr2[20] = &quot;##########&quot;;              // bit\\0é‡åˆ°\\0è®¤ä¸ºå­—ç¬¦ä¸²ç»“æŸï¼Œæ‰€ä»¥ä¸æ‰“å°åé¢çš„#\nä¸strcpyé•¿å¾—å¾ˆåƒçš„è¿˜æœ‰å¦å¤–ä¸€ä¸ªåº“å‡½æ•°strlen\n\nstrcpy - string copy - å­—ç¬¦ä¸²æ‹·è´\n\nstrlen - string length - å­—ç¬¦ä¸²é•¿åº¦æœ‰å…³\n\nå¯¹äºstrcpyå‡½æ•° å’Œ memsetå‡½æ•° çš„ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸäº†\nç»“è¯­åˆ°è¿™é‡Œï¼Œå¯¹äºæŸ¥è¯¢åº“å‡½æ•°ä»¥åŠä½¿ç”¨åº“å‡½æ•°çš„æ–¹æ³•åº”è¯¥å·²ç»å¾ˆæ¸…æ™°äº†ï¼ˆè‡ªæˆ‘æ„Ÿè§‰ ï¼‰å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©cè¯­è¨€æ–°äººï¼Œæœ‰æ‰€çº°æ¼åœ¨æ‰€éš¾å…ï¼Œæ¬¢è¿å„è·¯dalaoæ— æƒ…æŒ‡æ­£ï¼\nçº¯æ‰‹æ‰“ï¼Œ4kå¤šå­—ï¼Œä»Šå¤©æ•ˆç‡æ¯”æ˜¨å¤©é«˜ï¼Œ2å°æ—¶å°±æå®šäº†ç‚¹ä¸ªèµå†èµ°å§ï¼Œè°¢è°¢å¤§å®¶ï¼\n","categories":["åˆè¯†Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°æ®ç»“æ„-é“¾å¼äºŒå‰æ ‘ï¼Œè¯¦è§£åˆ†æ²»é€’å½’å’Œå±‚åºéå†","url":"/2022/04/16/note_data_structure/10%E9%93%BE%E5%BC%8F%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰å…³äºæ ‘çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æ¥è§¦äº†äºŒå‰æ ‘çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠå †å’Œå †æ’åºçš„æ“ä½œã€‚\n\nä¸¤ä¸ªçŸ¥è¯†ç‚¹éƒ½æ˜¯è¶…é“¾æ¥ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ï¼Œå¤ä¹ ä¸€ä¸‹è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹å“¦ï¼\n\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦æ›´è¿›ä¸€æ­¥ï¼Œå­¦ä¹ ä¸€ä¸‹é“¾å¼äºŒå‰æ ‘çš„æ“ä½œ\næœ¬ç¯‡åšå®¢å°†ä»¥çŸ¥è¯†ç‚¹è®²è§£+OJé¢˜ç›®éªŒè¯çš„æ–¹å¼æ¥å±•å¼€é“¾å¼äºŒå‰æ ‘çš„å†…å®¹\n\n1.é“¾å¼äºŒå‰æ ‘çš„åŸºæœ¬ç»“æ„åœ¨å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œå‰ï¼Œéœ€å…ˆè¦åˆ›å»ºä¸€æ£µäºŒå‰æ ‘ï¼Œç„¶åæ‰èƒ½å­¦ä¹ å…¶ç›¸å…³çš„åŸºæœ¬æ“ä½œã€‚\nä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡ï¼Œæ ‘æœ€ä¼˜çš„è¡¨ç¤ºæ–¹æ³•æ˜¯çˆ¶æ¯å­©å­è¡¨ç¤ºæ³•ã€‚ä½†æ˜¯å¯¹äºäºŒå‰æ ‘è¿™ç§åº¦å›ºå®šçš„æ ‘æ¥è¯´ï¼Œå¯ä»¥ ç›´æ¥ä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒçš„å·¦å³å¶å­èŠ‚ç‚¹å³å¯\ntypedef int BTDataType;typedef struct BTreeNode&#123;\tBTDataType data;\tstruct BTreeNode* left;\tstruct BTreeNode* right;&#125;BTNode;\n\nè¿™é‡Œè¦è¯´æ˜çš„ä¸€ä»¶äº‹æ˜¯ï¼šæ™®é€šæ ‘çš„â€œå¢åˆ æŸ¥æ”¹â€æ“ä½œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæ ‘å¹¶ä¸æ˜¯ä¸€ä¸ªæœ€ä¼˜çš„å‚¨å­˜ç»“æ„ã€‚æ‰€ä»¥æˆ‘ä»¬å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„æ“ä½œæ—¶ï¼Œæ›´å¤šå­¦ä¹ çš„æ˜¯åˆ†æ²» é€’å½’æ€æƒ³\n\n2.åˆ†æ²»é€’å½’æ€æƒ³ä»€ä¹ˆæ˜¯åˆ†æ²»æ€æƒ³ï¼Ÿ\nä¸¾ä¸ªä¾‹å­ï¼Œå­¦æ ¡é‡Œé¢éœ€è¦è¿›è¡Œæ’æŸ¥ï¼Œæ‰¾å‡ºæœ¬æ ¡é‡Œé¢èº«é«˜æœ€é«˜çš„äººã€‚è¿™æ—¶å€™æ ¡é•¿å¯ä»¥å»æ‰¾å„ä¸ªå¹´çº§çš„çº§ç»„é•¿ï¼Œç„¶åçº§ç»„é•¿å»æ‰¾å„ä¸ªç­ä¸»ä»»ï¼Œç­ä¸»ä»»è®©ç­çº§é‡Œé¢çš„å°ç»„é•¿ç»Ÿè®¡ç»„å‘˜èº«é«˜æ•°æ®ã€‚\nè¿™æ—¶å€™çš„å°ç»„é•¿å·²ç»å¯ä»¥è¿”å›ä¸€ä¸ªèº«é«˜æœ€é«˜çš„å€¼ç»™ç­ä¸»ä»»äº†ï¼Œç„¶åå†å±‚å±‚ä¸ŠæŠ¥ï¼Œæ ¡é•¿åªéœ€è¦åœ¨æœ€åä¸ŠæŠ¥çš„4ä¸ªæ•°æ®ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é«˜çš„ï¼Œå³ä¸ºæœ¬æ ¡æœ€é«˜çš„åŒå­¦\n\nåˆ†æ²»ç­–ç•¥çš„æ€æƒ³å°±æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œå³å…ˆå°†ä¸€ä¸ªè§„æ¨¡è¾ƒå¤§çš„å¤§é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„å°é—®é¢˜ï¼Œå†å¯¹è¿™äº›å°é—®é¢˜è¿›è¡Œè§£å†³ï¼Œå¾—åˆ°çš„è§£ï¼Œåœ¨å°†å…¶ç»„åˆèµ·æ¥å¾—åˆ°æœ€ç»ˆçš„è§£ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¾ƒå°çš„é—®é¢˜å°±æ˜¯å°ç»„é•¿ç»Ÿè®¡ç»„å‘˜èº«é«˜ï¼Œå¹¶ä¸ŠæŠ¥ã€‚è½¬æ¢æˆä»£ç è¯­è¨€å°±æ˜¯returnä¸€ä¸ªå€¼\n\næ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥å‚è€ƒè¿™ç¯‡å¤§ä½¬çš„åšå®¢ğŸ‘‡\näº”å¤§å¸¸è§ç®—æ³•ç­–ç•¥ä¹‹â€”â€”é€’å½’ä¸åˆ†æ²»ç­–ç•¥\n\næ—©å…ˆå­¦ä¹ çš„é€’å½’æ±‚æ–æ³¢é‚£å¥‘æ•°å°±è¿ç”¨äº†åˆ†æ²»çš„æ€æƒ³ğŸ‘‰ä¼ é€é—¨\nint fo2(int a)&#123;\tif ((a == 1) || (a == 2))\t\treturn 1;\telse\t\treturn (fo2(a - 1) )+( fo2(a- 2));//n-1å’Œn-2é¡¹&#125;\n\nå½“a&#x3D;1æˆ–è€…2çš„æ—¶å€™ï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯èŠ‚ç‚¹ï¼Œé€šè¿‡return 1å¼€å§‹ç»ˆæ­¢é€’å½’\n\n3.å‰&#x2F;ä¸­&#x2F;ååºéå†äº†è§£äº†ä¸Šé¢æ‰€è¯´çš„åˆ†æ²»é€’å½’æ€æƒ³åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„ä¸‰ç§éå†æ–¹å¼\n\nå‰åºéå†ï¼šæ ¹èŠ‚ç‚¹-å·¦å­æ ‘-å³å­æ ‘\nä¸­åºéå†ï¼šå·¦å­æ ‘-æ ¹èŠ‚ç‚¹-å³å­æ ‘\nååºéå†ï¼šå·¦å­æ ‘-å³å­æ ‘-æ ¹èŠ‚ç‚¹\n\nä»å‰åºéå†å…¥æ‰‹ï¼Œæˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹åˆ†æ²»çš„æ€æƒ³ï¼šåˆ©ç”¨é€’å½’ï¼Œä»¥å‰åºéå†çš„é¡ºåºæ‰“å°å‡ºæ ‘ä¸­èŠ‚ç‚¹çš„å€¼\nå‡è®¾æˆ‘ä»¬ç°åœ¨åˆ›å»ºäº†ä¸€ä¸ªè¿™æ ·çš„ç®€å•äºŒå‰æ ‘ğŸ‘‡ä½ èƒ½æƒ³å‡ºæ¥å‰åºéå†çš„æ‰“å°é¡ºåºåº”è¯¥æ˜¯å’‹æ ·çš„å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯1 2 3 4 5 6\nçœ‹åˆ°è¿™é‡Œï¼Œä½ è‚¯å®šä¸€è„¸æ‡µé€¼ï¼šå•Šï¼Œå’‹å‡ºæ¥çš„ï¼Ÿ\n\nä¸ç€æ€¥ï¼Œæˆ‘ä»¬ç°ç»™æ‰“å°å‡ºæ¥çš„å†…å®¹åŠ ä¸Šå®ƒä»¬çš„æœ«ç«¯å­æ ‘NULLï¼Œæ‰€ä»¥å‰åºéå†çš„ç»“æœæ˜¯ï¼š\n1 2 3 NULL NULL NULL 4 5 NULL NULL 6 NULL NULL\n\nä¸å–å…³å­å•¦ï¼Œç›´æ¥ä¸‹æ‰‹åˆ†æè¿™ä¸ªéå†ç»“æœæ˜¯æ€ä¹ˆå‡ºæ¥çš„ï¼\nå‰é¢æåˆ°äº†ï¼Œå‰åºéå†çš„é¡ºåºæ˜¯ï¼šæ ¹èŠ‚ç‚¹-å·¦å­æ ‘-å³å­æ ‘\n\nä¸‹å›¾èƒ½è®©ä½ æ›´ç›´è§‚åœ°çœ‹å‡ºæ¥è¿™ä¸‰ç§éå†æ–¹å¼çš„ä¸åŒ\n\nå…¶ä¸­å‰åºéå†è½¬æ¢ä¸ºä»£ç è¯­è¨€å°±æ˜¯ä¸‹é¢è¿™æ ·\n// äºŒå‰æ ‘å‰åºéå† void BTreePrevOrder(BTNode* root)&#123;\tif (root == NULL)\t&#123;//ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼ŒæŠŠç©ºèŠ‚ç‚¹ä¹Ÿæ‰“å°å‡ºæ¥\t\tprintf(&quot;NULL &quot;);\t\treturn ;\t&#125;\tprintf(&quot;%d &quot;, root-&gt;data);\tBTreePrevOrder(root-&gt;left);\tBTreePrevOrder(root-&gt;right);&#125;\n\nåœ¨è¿™ä¹‹ä¸­ï¼Œé‡åˆ°æ ¹èŠ‚ç‚¹æ˜¯NULLçš„æƒ…å†µï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯æƒ…å†µï¼Œé€’å½’åœæ­¢\nè¿™æ ·è¯´æ¥ææ€•è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œè¦å½»åº•å¼„æ¸…ï¼Œæˆ‘ä»¬å¿…é¡»è¦é€šè¿‡ç”»é€’å½’ç¤ºæ„å›¾æ¥è§£å†³\n\nå›¾ä¸­æŸä¸ªå•è¯æ‰“é”™äº†ï¼Œç”»åˆ°ä¸€åŠæ‰å‘ç°â€¦â€¦è¯·å¿½ç•¥å®ƒï¼ğŸ˜­\n\nå¦‚æœä½ èƒ½ç†è§£ä¸Šå›¾ä¸­å‰åºéå†çš„æ€è·¯ï¼Œé‚£ä¸­åºéå†å’Œååºéå†çš„æ“ä½œå°±éå¸¸ç®€å•äº†ï¼çŒœçŒœæ€ä¹ˆä¿®æ”¹å‰åºçš„ä»£ç å‘¢ï¼Ÿ\næ²¡é”™ï¼Œåªéœ€è¦æ›´æ”¹ä¸€ä¸‹printfçš„ä½ç½®å°±å¯ä»¥äº†ï¼\n// äºŒå‰æ ‘ä¸­åºéå†void BTreeInOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\tprintf(&quot;NULL &quot;);\t\treturn;\t&#125;\t\tBTreeInOrder(root-&gt;left);\tprintf(&quot;%d &quot;, root-&gt;data);\tBTreeInOrder(root-&gt;right);&#125;// äºŒå‰æ ‘ååºéå†void BTreePostOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\tprintf(&quot;NULL &quot;);\t\treturn;\t&#125;\tBTreePostOrder(root-&gt;left);\tBTreePostOrder(root-&gt;right);\tprintf(&quot;%d &quot;, root-&gt;data);&#125;\n\næœ€åæ‰“å°å‡ºæ¥çš„ç»“æœåˆ†åˆ«æ˜¯è¿™æ ·çš„ï¼Œå’Œä¸Šé¢çš„ç¤ºæ„å›¾å®Œå…¨å¯¹åº”ï¼å›åˆ°ç¤ºæ„å›¾\n\n\n3.1é€šè¿‡é€’å½’éå†è®¡ç®—èŠ‚ç‚¹ä¸ªæ•°ä¸Šé¢çš„é€’å½’ï¼Œæˆ‘ä»¬æ‰“å°å‡ºäº†å„ä¸ªèŠ‚ç‚¹çš„å€¼\nåªéœ€è¦å¯¹å…¶ä¸­ä¸€ä¸ªé€’å½’çš„ä»£ç è¿›è¡Œå°ä¿®æ”¹ï¼Œå°†printfæ”¹æˆè®¡æ•°++ï¼Œå°±èƒ½æŠŠå®ƒä»éå†å˜æˆè®¡ç®—äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿™é‡Œæˆ‘é€‰æ‹©æŒ‡é’ˆå˜é‡çš„æ–¹å¼è®©ä¸»å‡½æ•°ä¸­èƒ½è·å–è®¡æ•°çš„ç»“æœ\n// äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°void BTreeSize(BTNode* root,int* pcount)&#123;\tif (root == NULL)\t\treturn ;\t\t(*pcount)++;//æŒ‡é’ˆå˜é‡ï¼Œmainå‡½æ•°ä¸­å¯è°ƒç”¨\tBTreeSize(root-&gt;left,pcount);\tBTreeSize(root-&gt;right,pcount);&#125;\n\n\nä½ å¯ä»¥ä½¿ç”¨å…¨å±€é™æ€å˜é‡æ¥è¿›è¡Œè®¡æ•°ï¼Œä½†æ˜¯é‚£æ ·çš„è®¡æ•°ä¼šåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å åŠ ï¼Œéœ€è¦åœ¨è°ƒç”¨åç½®0ï¼Œéå¸¸ä¸æ–¹ä¾¿\n\n\nå½“ç„¶ï¼Œæˆ‘è´´å‡ºæ¥çš„è¿™ä¸ªæ–¹æ³•ä¹Ÿä¸æ˜¯æœ€ä¼˜çš„ï¼Œå› ä¸ºå®ƒéœ€è¦åˆ›å»ºä¸€ä¸ªé¢å¤–çš„å˜é‡countä½œä¸ºå‚æ•°è°ƒç”¨ï¼Œè€Œä¸èƒ½ç›´æ¥returnèŠ‚ç‚¹çš„æ•°é‡\n\næ‰€ä»¥å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªä½¿ç”¨ä¸‰ç›®æ“ä½œç¬¦? :æ¥è¿›è¡Œåˆ†æ²»é€’å½’ï¼Œè®¡ç®—èŠ‚ç‚¹ä¸ªæ•°\n\nå…¶ä¸­æ ¹èŠ‚ç‚¹ä¸ºç©ºæ˜¯æœ«ç«¯æƒ…å†µï¼Œè¿”å›0\nå…¶ä»–æƒ…å†µè¿”å›å·¦å­æ ‘å’Œå³å­æ ‘çš„èŠ‚ç‚¹å¤§å°+1ï¼ˆè¯¥èŠ‚ç‚¹è‡ªå·±ï¼‰\n\n//è¿›é˜¶æ–¹æ³•int BTreeSize(BTNode* root) &#123;\treturn root == NULL ? 0 :\t\tBTreeSize(root-&gt;left)\t\t+ BTreeSize(root-&gt;right) + 1;&#125;\n\n3.2 ç”¨åç»­éå†çš„æ€æƒ³é”€æ¯æ ‘å½“æˆ‘ä»¬ä¸éœ€è¦ç”¨äºŒå‰æ ‘åï¼Œéœ€è¦å°†å…¶è°ƒç”¨çš„å†…å­˜é‡Šæ”¾\né—®é¢˜å°±æ¥äº†ï¼Œå¦‚æœä½ é‡Šæ”¾äº†æ ¹èŠ‚ç‚¹ï¼Œé‚£è¦å’‹æ‰¾åˆ°å®ƒçš„å·¦å³å­æ ‘å‘¢ï¼Ÿ\næ‰€ä»¥æˆ‘ä»¬åœ¨é‡Šæ”¾çš„æ—¶å€™ï¼Œè¦ç”¨ååºéå†çš„é¡ºåºæ¥è¿›è¡Œé‡Šæ”¾ï¼Œå³å…ˆé”€æ¯å·¦å³å­æ ‘ï¼Œå†å‘ä¸Šé”€æ¯ã€‚è¿™æ ·å°±èƒ½é¿å…æ‰¾ä¸åˆ°å­æ ‘çš„é—®é¢˜\n// äºŒå‰æ ‘é”€æ¯void BTreeDestory(BTNode** root)&#123;\tif (*root == NULL)\t\treturn;\t//é€šè¿‡åç»­éå†çš„æ€æƒ³æ¥æ‘§æ¯æ ‘\tBTreeDestory(&amp;(*root)-&gt;left);\tBTreeDestory(&amp;(*root)-&gt;right);\tfree(*root);\t*root = NULL;//ä½¿ç”¨äºŒçº§æŒ‡é’ˆå¯ä»¥ç›´æ¥åœ¨å‡½æ•°ä¸­ç½®ç©ºæ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆ&#125;\n\n3.3å‰&#x2F;ä¸­&#x2F;ååºéå†OJé¢˜\nä¸‰é“Leetcode OJé¢˜\n\n144. äºŒå‰æ ‘çš„å‰åºéå†\n145. äºŒå‰æ ‘çš„ååºéå†\n94. äºŒå‰æ ‘çš„ä¸­åºéå†\n\n\nè¿™é‡Œåªå¯¹å‰åºéå†çš„é¢˜ç›®åšå‡ºè®²è§£ï¼Œå› ä¸ºåé¢ä¸¤ä¸ªçš„æ€è·¯å®Œå…¨ä¸€è‡´ï¼Œåªéœ€ç¨å¾®æ›´æ”¹ä»£ç \n\né¢˜ç›®ç»™å‡ºä¸€ä¸ªæ ‘ï¼Œéœ€è¦ä½ å°†å®ƒä»¥å‰åºéå†çš„é¡ºåºï¼Œå°†å„ä¸ªèŠ‚ç‚¹çš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å¹¶è¿”å›å®ƒ\n\nè¿™é‡Œçš„è¾“å…¥ç”¨ä¾‹æ˜¯â€œä¼ªä»£ç â€ï¼Œ[1,null,2,3]ä»£è¡¨1çš„å·¦å­æ ‘æ˜¯NULLï¼Œå³å­æ ‘æ˜¯2ï¼›2çš„å·¦å­æ ‘æ˜¯3ï¼Œå³å­æ ‘æ˜¯NULL\n\næ—¢ç„¶éœ€è¦ç”¨æ•°ç»„æ¥å‚¨å­˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªäºŒå‰æ ‘ä¸€å…±æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿æˆ‘ä»¬å¼€è¾Ÿæ•°ç»„\n\næ³¨æ„ï¼šè¿™ç§æ¥å£å‹é¢˜ç›®ï¼Œæ•°ç»„éƒ½å¿…é¡»æ˜¯åŠ¨æ€å†…å­˜å‡½æ•°mallocå¼€è¾Ÿçš„\n\n\nç„¶åæŠŠå‰åºéå†ä¸­çš„printfæ”¹æˆå°†å€¼æ”¾å…¥arræ•°ç»„ä¸­å³å¯ï¼\n// äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°void BTreeSize(struct TreeNode* root,int* pcount)&#123;\tif (root == NULL)\t\treturn ;\t\t(*pcount)++;\tBTreeSize(root-&gt;left,pcount);\tBTreeSize(root-&gt;right,pcount);&#125;// å‰åºéå†ä»£ç void BTreePrevOrder(struct TreeNode* root,int*arr,int* i)&#123;\tif (root == NULL)&#123;\t\treturn ;\t&#125;\t    arr[(*i)++]=root-&gt;val;    //å› ä¸ºåœ¨é€’å½’è°ƒç”¨ä¸­éœ€è¦å¤šæ¬¡è°ƒç”¨ä¸åŒçš„iï¼Œæ‰€ä»¥éœ€è¦å–åœ°å€\tBTreePrevOrder(root-&gt;left,arr,i);\tBTreePrevOrder(root-&gt;right,arr,i);&#125;int* preorderTraversal(struct TreeNode* root, int* returnSize)&#123;    int count=0;    BTreeSize(root,&amp;count);//è®¡ç®—æ ‘èŠ‚ç‚¹ä¸ªæ•°    int* arr=(int*)malloc(sizeof(int)*count);//å¼€è¾Ÿæ•°ç»„    int i=0;//ä¸‹æ ‡    BTreePrevOrder(root,arr,&amp;i);    *returnSize=count;    return arr;&#125;\n\n\n\n4.è®¡ç®—èŠ‚ç‚¹ä¸ªæ•°åœ¨3.1ä¸­å·²ç»è®²è¿°äº†è®¡ç®—äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°çš„æ–¹æ³•ï¼Œä¸‹é¢æ˜¯æ›´ç»†è‡´çš„èŠ‚ç‚¹ä¸ªæ•°è®¡ç®—\n4.1å¶å­èŠ‚ç‚¹ä¸ªæ•°ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨è¿™é¢—äºŒå‰æ ‘ä¸­ï¼Œåªæœ‰3ã€5å’Œ6æ˜¯å¶å­èŠ‚ç‚¹\n\næƒ³è¦åˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå…¶å®éå¸¸ç®€å•ï¼šåªè¦å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯ç©ºï¼Œå°±æ˜¯å¶å­èŠ‚ç‚¹äº†ã€‚\n\nä»¥æ­¤ä½œä¸ºåˆ†æ²»çš„æœ«ç«¯æ¡ä»¶ï¼Œåªè¦æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå°±è¿”å›1\nå¦‚æœå·²ç»éå†åˆ°ç©ºèŠ‚ç‚¹äº†ï¼Œè¿”å›0\nå…¶ä»–æƒ…å†µï¼Œè¿”å›å·¦å­æ ‘å’Œå³å­æ ‘çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°ä¹‹å’Œ\n\n// äºŒå‰æ ‘å¶å­èŠ‚ç‚¹ä¸ªæ•°int BTreeLeafSize(BTNode* root)&#123;\tif (root == NULL)\t\treturn 0;\tif (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\t\treturn 1;\treturn BTreeLeafSize(root-&gt;left) + BTreeLeafSize(root-&gt;right);&#125;\n\n4.2äºŒå‰æ ‘ç¬¬kå±‚èŠ‚ç‚¹ä¸ªæ•°å‡è®¾æ ¹èŠ‚ç‚¹æ˜¯ç¬¬1å±‚ï¼Œè¦æƒ³çŸ¥é“ç¬¬kå±‚ä¸€å…±æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ€ä¹ˆè®¾è®¡å‡½æ•°å‘¢ï¼Ÿ\n\nå…ˆæ¥è¿™ä¹ˆæƒ³ï¼š3æ‰€åœ¨å±‚æ•°å¯¹äºæ ¹æ¥è¯´æ˜¯ç¬¬ä¸‰å±‚ï¼Œä½†æ˜¯å¯¹äº2æ¥è¯´æ˜¯ç¬¬äºŒå±‚ï¼Œå¯¹äº3è‡ªå·±æ¥è¯´æ˜¯ç¬¬1å±‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®©ç¬¬kå±‚å¾€ä¸‹-1æ¥è¿›è¡Œé€’å½’å‘¢ï¼Ÿ\n\n// äºŒå‰æ ‘ç¬¬kå±‚èŠ‚ç‚¹ä¸ªæ•°int BTreeLevelKSize(BTNode* root, int k)&#123;\tassert(k &gt;= 1);//ä¿è¯k&gt;=1\tif (root == NULL)\t\treturn 0;\tif (k == 1)\t\treturn 1;\treturn BTreeLevelKSize(root-&gt;left,k - 1)        + BTreeLevelKSize(root-&gt;right,k-1);&#125;\n\n\n\n4.3äºŒå‰æ ‘çš„æ·±åº¦åœ¨ä¹‹å‰æ ‘çš„æ¦‚å¿µå­¦ä¹ ä¸­ï¼Œè®²è§£è¿‡æ ‘çš„æ·±åº¦ï¼ˆå³æ ‘ä¸€å…±æœ‰å‡ å±‚ï¼‰\næ·±åº¦å’Œä¹‹å‰ä¸¾ä¾‹çš„æ ¡é•¿ç»Ÿè®¡èº«é«˜å¾ˆç›¸ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå·¦å³å­æ ‘ä¸­è¾ƒæ·±çš„é‚£ä¸€ä¸ªå¹¶è¿›è¡Œè¿”å›ã€‚æœ«ç«¯çš„æ¡ä»¶ï¼Œå°±æ˜¯èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™ï¼Œreturn 0ç»ˆæ­¢é€’å½’ \n// äºŒå‰æ ‘æ·±åº¦ï¼Œå³ä¸€å…±æœ‰å‡ å±‚int BTreeDepth(BTNode* root)&#123;\tif (root == NULL)\t\treturn 0;\tint left = BTreeDepth(root-&gt;left);\tint right = BTreeDepth(root-&gt;right);\treturn left &gt; right ? left + 1 : right + 1;&#125;\n\næ³¨æ„ï¼šè¿™é‡Œleft+1å’Œright+1æ˜¯ä¸ºäº†è®¡ç®—ä¸ŠèŠ‚ç‚¹è‡ªå·±\næ±‚äºŒå‰æ ‘æ·±åº¦OJé¢˜leetcodeä¸Šæœ‰ä¸€é“ojé¢˜å°±æ˜¯æ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼Œä»£ç å¤åˆ¶ä¸Šï¼Œæ”¹ä¸ªåï¼Œæå®šï¼\n\né¢˜ç›®é“¾æ¥ï¼š104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n\n\n\n5.æŸ¥æ‰¾æ ‘ä¸­å€¼ä¸ºxçš„èŠ‚ç‚¹åœ¨äºŒå‰æ ‘ä¸­æŸ¥æ‰¾ä¸€ä¸ªå€¼ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯æŠŠå®ƒéå†ä¸€éï¼Œåˆ¤æ–­æ ¹èŠ‚ç‚¹ä»¥åŠå·¦å³å­æ ‘ä¸­æ˜¯å¦æœ‰xå€¼çš„èŠ‚ç‚¹ã€‚\nå…·ä½“çš„è§£æï¼Œå†™é“ä¸‹é¢çš„ä»£ç æ³¨é‡Šé‡Œå•¦ï¼\n// äºŒå‰æ ‘æŸ¥æ‰¾å€¼ä¸ºxçš„èŠ‚ç‚¹BTNode* BTreeFind(BTNode* root, BTDataType x)&#123;\tif (root == NULL)\t\treturn NULL;//èŠ‚ç‚¹ä¸ºç©ºè¿”å›ç©º\tif (root-&gt;data == x)\t\treturn root;//èŠ‚ç‚¹è‡ªå·±å°±æ˜¯xï¼Œè¿”å›èŠ‚ç‚¹è‡ªå·±çš„åœ°å€\tBTNode* ret1 = BTreeFind(root-&gt;left, x);\tif (ret1 != NULL)//å¦‚æœå·¦è¾¹æ‰¾åˆ°äº†ï¼Œè¿”å›å·¦èŠ‚ç‚¹çš„åœ°å€\t\treturn ret1;\tBTNode* ret2 = BTreeFind(root-&gt;right, x);\tif (ret2 != NULL)//å¦‚æœå³è¾¹æ‰¾åˆ°äº†ï¼Œè¿”å›å³èŠ‚ç‚¹çš„åœ°å€\t\treturn ret2;\treturn NULL;//ä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°ï¼Œå®ƒè‡ªå·±ä¹Ÿä¸æ˜¯ï¼Œè¿”å›ç©º&#125;\n\n6.å±‚åºéå†å¦‚åŒå…¶åï¼Œå±‚åºéå†å°±æ˜¯ä¸€å±‚ä¸€å±‚åœ°éå†\n\næ¯”å¦‚ä¸Šé¢è¿™æ£µæ ‘ï¼Œå±‚åºéå†çš„ç»“æœå¦‚ä¸‹\n1 2 4 3 NULL 5 6\n\nè¦æƒ³å®ç°å±‚åºéå†ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¹‹å‰å­¦ä¹ çš„æ ˆå’Œé˜Ÿåˆ—çŸ¥è¯†é‡Œçš„é˜Ÿåˆ—ğŸ‘‰ä¼ é€é—¨\nåœ¨VSé¡¹ç›®é‡Œé¢ï¼Œå¯¼å…¥é¢„å…ˆå†™å¥½çš„é˜Ÿåˆ—çš„å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶ï¼Œå†å¼•ç”¨å®ƒå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œå°±èƒ½ä½“ç°å‡ºä¹‹å‰é¢„å…ˆtypedefç±»å‹çš„ä½œç”¨äº†ï¼šåªéœ€è¦æ›´æ”¹æœ€å…ˆçš„æ•°æ®ç±»å‹ï¼Œå°±å¯ä»¥æå®šåé¢çš„ä¸€åˆ‡ï¼\n\nè€Œå¼•ç”¨å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ ˆçš„ä»£ç ä¸­ä½¿ç”¨äºŒå‰æ ‘çš„å®šä¹‰ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¼•ç”¨äºŒå‰æ ‘çš„å¤´æ–‡ä»¶ï¼Œå†å¼•ç”¨é˜Ÿåˆ—çš„å¤´æ–‡ä»¶\n\næå®šè¿™ä¸ªåï¼Œæˆ‘ä»¬å†æ¥è®²è¿°ä¸€ä¸‹å±‚åºéå†çš„æ€è·¯\n\nå…ˆæ’å…¥æ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨æ ¹èŠ‚ç‚¹å‡ºé˜Ÿåˆ—çš„åŒæ—¶ï¼Œæ’å…¥å®ƒçš„å·¦å³å­æ ‘çš„èŠ‚ç‚¹\nå½“é˜Ÿåˆ—ä¸­çš„å€¼éƒ½ä¸ºNULLæ—¶ï¼Œä»£è¡¨å±‚åºéå†å®Œæˆ\n\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å…¥é˜Ÿåˆ—çš„ä¸æ˜¯èŠ‚ç‚¹çš„å€¼ï¼Œå› ä¸ºé‚£æ ·æ— æ³•æ‰¾åˆ°èŠ‚ç‚¹çš„å·¦å³å­æ ‘ã€‚å…¥é˜Ÿåˆ—çš„æ˜¯èŠ‚ç‚¹çš„åœ°å€ï¼\n// å±‚åºéå†void BTreeLevelOrder(BTNode* root)&#123;\tQueue q;\tQueueInit(&amp;q);\tif (root != NULL)&#123;//æ ¹èŠ‚ç‚¹éç©ºï¼Œå¼€å§‹å…¥é˜Ÿåˆ—\t\tQueuePush(&amp;q, root);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tprintf(&quot;%d &quot;, head-&gt;data);\t\tif (head-&gt;left != NULL)\t\t&#123;\t\t\tQueuePush(&amp;q, head-&gt;left);\t\t&#125;\t\tif (head-&gt;right != NULL)\t\t&#123;\t\t\tQueuePush(&amp;q, head-&gt;right);\t\t&#125;\t\t//å±‚åºéå†ä¸éœ€è¦é€’å½’ï¼Œå¯ä»¥ç”¨å¾ªç¯è§£å†³é—®é¢˜\t&#125;\tprintf(&quot;\\n&quot;);\tQueueDestory(&amp;q);//é˜²æ­¢å†…å­˜æ³„æ¼\treturn;&#125;\n\néå†çš„ç»“æœå¦‚ä¸‹\n\n6.1åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘å­¦ä¹ äº†å±‚åºéå†åï¼Œå°±å¯ä»¥æ¥åˆ¤æ–­ä¸€ä¸ªäºŒå‰æ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘äº†ï¼\nå®Œå…¨äºŒå‰æ ‘ï¼šå‰k-1å±‚ä¸ºæ»¡äºŒå‰æ ‘ï¼Œæœ€åä¸€å±‚ä¸æ»¡ï¼Œä½†æ˜¯ä»å·¦åˆ°å³åˆ†å¸ƒ\n\nå…·ä½“çš„æ€è·¯æ˜¯\n\nå½“é˜Ÿåˆ—ä¸­çš„é˜Ÿå¤´ä¸ºNULLæ—¶å¼€å§‹éå†ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­éƒ½æ˜¯NULLï¼Œä»£è¡¨æ˜¯æ»¡äºŒå‰æ ‘\nå¦‚æœæœ‰éç©ºèŠ‚ç‚¹ï¼Œå°±ä¸æ˜¯æ»¡äºŒå‰æ ‘\n\n// åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘bool BTreeComplete(BTNode* root)&#123;\tQueue q;\tQueueInit(&amp;q);\tif (root != NULL) &#123;\t\tQueuePush(&amp;q, root);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tif (head == NULL)&#123;\t\t\tbreak;//é‡åˆ°é˜Ÿåˆ—ä¸­ç©ºèŠ‚ç‚¹ï¼Œé€€å‡ºå¾ªç¯\t\t&#125;\t\tQueuePush(&amp;q, head-&gt;left);\t\tQueuePush(&amp;q, head-&gt;right);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tif (head != NULL)\t\t&#123;\t\t\t//printf(&quot;ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘\\n&quot;);\t\t\treturn false;\t\t&#125;\t&#125;\tQueueDestory(&amp;q);//é˜²æ­¢å†…å­˜æ³„æ¼\treturn true;&#125;\n\nç»“è¯­é“¾å¼äºŒå‰æ ‘çš„å†…å®¹åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¦‚æœåšå®¢é‡Œé¢æœ‰è®²çš„ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\nä¸‹ç¯‡åšå®¢å°†è®²è§£ä¸€äº›æœ‰å…³äºŒå‰æ ‘çš„OJé¢˜å’Œæ¦‚å¿µé€‰æ‹©é¢˜ï¼æˆ‘ä»¬ä¸è§ä¸æ•£å“¦~\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ‘","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¦ä½ ç”¨å·æ‡’çš„æ–¹å¼åˆ·çˆ†äºŒå‰æ ‘OJé¢˜","url":"/2022/04/20/note_data_structure/11%E4%BA%8C%E5%8F%89%E6%A0%91OJ%E9%A2%98%E5%92%8C%E9%80%89%E6%8B%A9%E9%A2%98/","content":"[TOC]\nå‰è¨€ä¸Šç¯‡åšå®¢æˆ‘å¸¦å¤§å®¶é¢†ç•¥äº†ä¸€ç•ªé“¾å¼äºŒå‰æ ‘çš„æ“ä½œï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹äºŒå‰æ ‘çš„ç›¸å…³é¢˜ç›®ï¼Œä¸€èµ·æ¥å·©å›ºä¸€ä¸‹çŸ¥è¯†ç‚¹å§ï¼\n\n\nç‚¹æˆ‘å¤ä¹ ä¸Šä¸€ç¯‡åšå®¢çš„å†…å®¹ï¼ğŸ‘‰ä¼ é€é—¨\n\n1.ä¸€äº›é€‰æ‹©é¢˜1.1è®¾ä¸€æ£µäºŒå‰æ ‘ä¸­æœ‰3ä¸ªå¶å­ç»“ç‚¹ï¼Œæœ‰8ä¸ªåº¦ä¸º1çš„ç»“ç‚¹ï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸­æ€»çš„ç»“ç‚¹æ•°ä¸ºï¼ˆ ï¼‰ä¸ªA.11B.12C.13  âˆšD.14\n\n\nè®¾Niè¡¨ç¤ºåº¦ä¸ºiçš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œåˆ™èŠ‚ç‚¹æ€»æ•° N &#x3D; N0 + N1 + N2\nèŠ‚ç‚¹ä¸ªæ•°äºèŠ‚ç‚¹è¾¹çš„å…³ç³»ï¼š Nä¸ªèŠ‚ç‚¹çš„æ ‘æœ‰N-1ä¸ªè¾¹\nè¾¹ä¸åº¦çš„å…³ç³»ï¼šN - 1 &#x3D; N1 + 2 * N2\næ•…ï¼šN0 + N1 + N2 - 1 &#x3D; N1 + 2 * N2\nå› æ­¤ï¼Œå¾—ï¼šN0 &#x3D; N2 + 1\nå›åˆ°åŸé¢˜ï¼ŒN0 &#x3D; 3ï¼ŒN1 &#x3D; 8ï¼Œå¯å¾—N2 &#x3D; 2\nå› æ­¤ç­”æ¡ˆæ˜¯ 3 + 8 + 2 &#x3D; 13\n\n1.2æœ‰Nä¸ªå…ƒç´ çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦æ˜¯()ç­”æ¡ˆï¼šlogN+1\n\né«˜åº¦ä¸ºhçš„å®Œå…¨äºŒå‰æ ‘ï¼ŒèŠ‚ç‚¹ä¸ªæ•°åœ¨ï¼š 2^(h - 1) - 1 &lt; n &lt;= 2^h - 1\nå³log(n + 1) &lt;= h &lt; log(n + 1) + 1\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯nå·¦å³åŒºé—´çš„å¼€é—­é—®é¢˜\nå®Œå…¨äºŒå‰æ ‘æœ€å°‘çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯2^(h - 1)-1+1ä¸ªï¼Œæ‰€ä»¥æ˜¯n&gt;2^(h - 1) - 1\n\n1.3 ç”±å·²çŸ¥éå†åºåˆ—ç”»å‡ºåŸæœ¬æ ‘çš„ç»“æ„å·²çŸ¥æŸäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—ä¸ºJGDHKBAELIMCFï¼Œååºéå†åºåˆ—ä¸ºJGKHDBLMIEFCAï¼Œåˆ™å…¶å‰åºéå†åºåˆ—ä¸ºï¼ˆ ï¼‰A.ABDGHJKCEFILMB.ABDGJHKCEILMF   âˆšC.ABDHKGJCEILMFD.ABDGJHKCEIMLF\n\nè¿™é“é¢˜æˆ‘åˆšå¼€å§‹çš„æ€è·¯æ˜¯é”™çš„ï¼Œå› ä¸ºæˆ‘æŠŠå®ƒå½“ä½œå®Œå…¨äºŒå‰æ ‘æ¥çœ‹å¾…ï¼Œä½†é¢˜ç›®å¹¶æ²¡æœ‰è¯´å®ƒæ˜¯å®Œå…¨äºŒå‰æ ‘\n\nä¸»è¦æ€è·¯ï¼šå¯ä»¥ä»åç»­éå†ç¡®å®šæ ¹èŠ‚ç‚¹ä¸ºAï¼Œä¸­åºéå†å¯ä»¥ç¡®å®šAçš„å·¦å³å­æ ‘ã€‚å†ç»§ç»­ä»ååºéå†ä¸­ç¡®å®šAå·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¾æ¬¡å¾€ä¸‹åˆ¤æ–­\n\næ‰€ä»¥æˆ‘ç”»äº†ä¸€ä¸ªåˆ†æå›¾ï¼Œå¦‚ä¸‹ğŸ‘‡\n\nå·²çŸ¥æŸäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—ä¸ºABDECï¼Œä¸­åºéå†åºåˆ—ä¸ºBDEACï¼Œåˆ™è¯¥äºŒå‰æ ‘ï¼ˆ ï¼‰A.æ˜¯æ»¡äºŒå‰æ ‘B.æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œä¸æ˜¯æ»¡äºŒå‰æ ‘C.ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘   âˆšD.æ˜¯æ‰€æœ‰çš„ç»“ç‚¹éƒ½æ²¡æœ‰å³å­æ ‘çš„äºŒå‰æ ‘\n\nè¿™é“é¢˜çš„æ€è·¯å’Œä¸Šä¸€é“é¢˜æ˜¯ä¸€æ ·çš„\n\nå·²çŸ¥æŸäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—ä¸º5 7 4 9 6 2 1ï¼Œä¸­åºéå†åºåˆ—ä¸º4 7 5 6 9 1 2ï¼Œåˆ™å…¶ååºéå†åºåˆ—ä¸ºï¼ˆ ï¼‰A.4 2 5 7 6 9 1B.4 2 7 5 6 9 1C.4 7 6 1 2 9 5  âˆšD.4 7 2 9 5 6 1\n\næœ¬é¢˜ä¾æ—§å’Œä¸Šé¢ä¸¤é“é¢˜æ€è·¯ç›¸åŒï¼\n\n1.4 å•è¾¹æ ‘ä¸€æ£µéç©ºçš„äºŒå‰æ ‘çš„å…ˆåºéå†åºåˆ—ä¸ååºéå†åºåˆ—æ­£å¥½ç›¸åï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸€å®šæ»¡è¶³ï¼ˆ ï¼‰A.æ‰€æœ‰çš„ç»“ç‚¹å‡æ— å·¦å­©å­B.æ‰€æœ‰çš„ç»“ç‚¹å‡æ— å³å­©å­C.åªæœ‰ä¸€ä¸ªå¶å­ç»“ç‚¹D.è‡³å¤šåªæœ‰ä¸€ä¸ªç»“ç‚¹\n\nå¦‚æœå‰åºéå†å’Œååºéå†åºåˆ—æ­£å¥½ç›¸åï¼Œè¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå•è¾¹æ ‘ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‰åºå’Œä¸­åºåºåˆ—æ‰€æ„æˆçš„æ ‘çš„ç»“æ„:\n12345ï¼ˆçºµå‘ï¼‰\n54321\nå¯¹äºå•è¾¹æ ‘ï¼Œåªæœ‰ä¸€ä¸ªå¶å­èŠ‚ç‚¹\n\n1.520.å¦‚æœä¸€é¢—äºŒå‰æ ‘çš„å‰åºéå†çš„ç»“æœæ˜¯ABCDï¼Œåˆ™æ»¡è¶³æ¡ä»¶çš„ä¸åŒçš„äºŒå‰æ ‘æœ‰ï¼ˆ ï¼‰ç§A.13B.14 âˆšC.15D.16\n\n\né¦–å…ˆè¿™æ£µäºŒå‰æ ‘çš„é«˜åº¦ä¸€å®šåœ¨3~4å±‚ä¹‹é—´:\nä¸‰å±‚ï¼š\nA(B(C,D),()), A((),B(C,D)), A(B(C,()),D), A(B((),C),D),\nA(B,C(D,())), A(B,C((),D))\nå››å±‚ï¼š\nå¦‚æœä¸ºå››å±‚ï¼Œå°±æ˜¯å•è¾¹æ ‘ï¼Œæ¯ä¸€å±‚åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé™¤è¿‡æ ¹èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œåœ¨ä¸Šå±‚èŠ‚ç‚¹çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œæ‰€ä»¥222å…±8ç§\næ€»å…±ä¸º14ç§ã€‚\n\n\n2.OJé¢˜åˆ·èµ·æ¥ï¼KY11 äºŒå‰æ ‘éå†\nç‰›å®¢ç½‘ KY11 äºŒå‰æ ‘éå† ğŸ‘‰ä¼ é€é—¨\n\n\nè¿™é“é¢˜è¦æ±‚æˆ‘ä»¬ç”¨å…ˆåºéå†çš„æ“ä½œä»ä¸€ä¸ªæ•°ç»„ä¸­è¯»å‡ºä¸€ä¸ªæ ‘ï¼Œå¹¶æ„å»ºå‡ºæ ‘çš„åŸºæœ¬ç»“æ„ï¼Œå†ç”¨ä¸­åºéå†çš„æ–¹å¼æ‰“å°å‡ºè¿™é¢—æ ‘\nä¹‹å‰æˆ‘ä»¬å­¦ä¹ äº†å‰åºéå†çš„æ“ä½œï¼Œè¿™é‡Œåªéœ€è¦æŠŠå‰åºéå†ä¸­çš„printfæ“ä½œæ”¹æˆæ„å»ºæ–°æ ‘å³å¯\n\nå› ä¸ºæ¶‰åŠé“içš„å¤šæ¬¡è°ƒç”¨ï¼Œæ‰€ä»¥å‡½æ•°ä¸­çš„iéœ€è¦å–åœ°å€ï¼Œå¿…é¡»ä¿è¯å¤šæ¬¡è°ƒç”¨çš„iä¼šåŒæ­¥++\næ„å»ºå®Œæ ‘çš„èŠ‚ç‚¹ï¼Œå¹¶èµ‹å€¼åï¼Œéœ€è¦é€’å½’æ„å»ºå·¦å³å­æ ‘ï¼Œæœ€åè¿”å›èŠ‚ç‚¹çš„åœ°å€\né¢˜ç›®ä¸­çš„#ä»£è¡¨NULLï¼Œç›´æ¥returnç©ºå³å¯\n\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;stdbool.h&gt;typedef char BTDataType;typedef struct BTreeNode&#123;\tBTDataType data;\tstruct BTreeNode* left;\tstruct BTreeNode* right;&#125;BTNode;// äºŒå‰æ ‘ä¸­åºéå† void BTreeInOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\treturn ;\t&#125;\t\tBTreeInOrder(root-&gt;left);    printf(&quot;%c &quot;, root-&gt;data);\tBTreeInOrder(root-&gt;right);&#125;BTNode* CreatTree(char *arr,int*i)&#123;    if (arr[*i] == &#x27;#&#x27;)&#123;        (*i)++;\t\treturn NULL;\t&#125;        BTNode* newnode=(BTNode*)malloc(sizeof(BTNode));        newnode-&gt;data=arr[(*i)++];//iå¿…é¡»å–åœ°å€    newnode-&gt;left=CreatTree(arr,i);//é€’å½’æ„å»ºå·¦å­æ ‘    newnode-&gt;right=CreatTree(arr,i);//é€’å½’æ„å»ºå³å­æ ‘        return newnode;&#125;int main()&#123;    char arr[100];    scanf(&quot;%s&quot;,arr);        int i=0;    BTNode* root=CreatTree(arr,&amp;i);    BTreeInOrder(root);    return 0;&#125;\n\n100 ç›¸åŒçš„æ ‘\nleetcodeï¼š100. ç›¸åŒçš„æ ‘\n\n\né¢˜ç›®è¦æ±‚å¾ˆç®€å•ï¼Œç»™å®šä¸¤é¢—æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¦æ±‚æˆ‘ä»¬åˆ¤æ–­è¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒ\n\nå¦‚æœä¸¤æ£µæ ‘éƒ½ä¸ºç©ºï¼Œæ ‘ç›¸åŒ\nå¦‚æœå…¶ä¸­ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªä¸ä¸ºç©ºï¼Œæ ‘ä¸åŒ\nå¦‚æœä¸¤ä¸ªéƒ½ä¸ä¸ºç©ºï¼Œä½†æ˜¯èŠ‚ç‚¹å€¼ä¸ç›¸åŒï¼Œæ ‘ä¸åŒ\nç„¶åå†é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå°†å®ƒä»¬çš„ç»“æœä¸&amp;&amp;åœ¨ä¸€èµ·ï¼Œå…¶ä¸­ä¸€ä¸ªä¸ºå‡ï¼Œè¿”å›å‡\n\nbool isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦ç›¸ç­‰    return isSameTree(p-&gt;left,q-&gt;left)        &amp;&amp; isSameTree(p-&gt;right,q-&gt;right);&#125;\n\n\nå­¦ä¼šè¿™é“é¢˜åï¼Œåé¢ä¸€äº›é¢˜ç›®å…¶å®åªéœ€è¦æŠŠå®ƒçš„ä»£ç æ”¹ä¸€æ”¹å°±èƒ½ç”¨äº†ğŸ˜‚\nä»€ä¹ˆï¼Ÿä½ ä¸ä¿¡ï¼Ÿé‚£å°±çœ‹çœ‹ä¸‹é¢è¿™é“é¢˜ï¼\n\n101 å¯¹ç§°äºŒå‰æ ‘\nleetcodeï¼š101. å¯¹ç§°äºŒå‰æ ‘\n\n\né¢˜ç›®è¦æ±‚å¾ˆç®€å•å“ˆï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯ä¸¤è¾¹å¯¹ç§°çš„æ ‘\nè¿™å’Œåˆ¤æ–­æ ‘ç›¸ç­‰æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸å°±æ˜¯æŠŠå·¦å³å­æ ‘çš„åˆ¤æ–­æ”¹ä¸€ä¸‹å°±è¡Œäº†å˜›ï¼Ÿ\nç›´æ¥è°ƒç”¨ä¸Šä¸€é¢˜çš„ä»£ç ï¼æ³¨æ„æœ€åçš„returnå€¼ï¼Œæ˜¯pçš„å·¦å’Œqçš„å³è¿›è¡Œåˆ¤æ–­\nbool _isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦å¯¹ç§°ç›¸ç­‰    return _isSameTree(p-&gt;left,q-&gt;right)        &amp;&amp; _isSameTree(p-&gt;right,q-&gt;left);&#125;bool isSymmetric(struct TreeNode* root)&#123;    return _isSameTree(root-&gt;left,root-&gt;right);&#125;\n\n\nå“ˆå“ˆï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Œåˆ«æ€¥ï¼Œåé¢è¿˜æœ‰å¯ä»¥å·æ‡’çš„é¢˜ç›®ï¼\n\n572 å¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘\nleetcodeï¼š572. å¦ä¸€æ£µæ ‘çš„å­æ ‘\n\n\nè¿™é“é¢˜æˆ‘ä»¬è¦åˆ¤æ–­ä¸€é¢—æ ‘æ˜¯å¦ä¸ºå¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘ï¼Œå’Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²å¾ˆç›¸ä¼¼\nå…¶å®åªéœ€è¦é€’å½’åˆ¤æ–­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦å’ŒsubRootç›¸åŒå°±å¯ä»¥äº†ï¼\nbool _isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦ç›¸ç­‰    return _isSameTree(p-&gt;left,q-&gt;left)        &amp;&amp; _isSameTree(p-&gt;right,q-&gt;right);&#125;bool isSubtree(struct TreeNode* root, struct TreeNode* subRoot)&#123;    // if(root==NULL&amp;&amp;subRoot==NULL)    //     return true;    // if(root!=NULL&amp;&amp;subRoot==NULL)    //     return true;    // è®©isSametreeå‡½æ•°æ¥æ¯”è¾ƒè¿™ä¿©ä¸ª    if(root==NULL)        return false;    if(_isSameTree(root,subRoot))        return true;    //åªè¦å·¦å³æœ‰ä¸€ä¸ªæ˜¯è¿”å›çœŸï¼Œé‚£å°±æ˜¯å­æ ‘    return isSubtree(root-&gt;left,subRoot)        || isSubtree(root-&gt;right,subRoot);&#125;\n\n\næ˜¯ä¸æ˜¯çˆ½èµ·æ¥äº†ï¼Ÿå†æ¥ä¸€é“ï¼\n\n\n226 ç¿»è½¬äºŒå‰æ ‘\nleetcodeï¼š226. ç¿»è½¬äºŒå‰æ ‘\n\n\nè¿™é“é¢˜çš„æ€è·¯å¦‚ä¸‹å“ˆï¼\n\nå¦‚æœæ˜¯ç©ºæ ‘ï¼Œä¸éœ€è¦ç¿»è½¬ï¼Œç›´æ¥return\nå¦‚æœéç©ºï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘äº¤æ¢ï¼ˆè¿™é‡Œä¸éœ€è¦æ‹…å¿ƒäº¤æ¢åæ‰¾ä¸åˆ°å­æ ‘çš„é—®é¢˜ï¼‰\nä¸éœ€è¦å•ç‹¬æç©ºçš„å­æ ‘ï¼Œä¸€å¹¶äº¤æ¢å°±å¯ä»¥\nå½“æ ¹èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™ï¼Œreturn\n\nå•ªçš„ä¸€ä¸‹å¾ˆå¿«å“ˆï¼Œä»£ç å°±å†™å‡ºæ¥äº†ï¼\nvoid _invertTree(struct TreeNode* root)&#123;    if(root==NULL)//è®¾ç½®é€€å‡ºæ¡ä»¶ï¼Œå¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºå°±è¿”å›        return;    //è®©å¦å¤–ä¸¤ä¸ªå€¼æ¥æ¥æ”¶åŸæœ¬çš„å·¦å³èŠ‚ç‚¹    struct TreeNode* left=root-&gt;left;    struct TreeNode* right=root-&gt;right;    //æ›´æ”¹å·¦å³èŠ‚ç‚¹    root-&gt;right=left;    root-&gt;left=right;    //é€’å½’å­æ ‘    _invertTree(root-&gt;left);    _invertTree(root-&gt;right);&#125;struct TreeNode* invertTree(struct TreeNode* root)&#123;    if(root==NULL)//åˆ¤æ–­ç©ºæ ‘        return NULL;    _invertTree(root);        return root;&#125;\n\n\n102 å±‚åºéå†ï¼ˆè¾ƒéš¾ğŸ˜¥ï¼‰\nleetcodeï¼š102. äºŒå‰æ ‘çš„å±‚åºéå†\n\n\nè¿™é“é¢˜ç›¸å¯¹æ¥è¯´å°±ä¹ˆæœ‰é‚£ä¹ˆå®¹æ˜“äº†ï¼Œä½ å¯èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå‹æ ¹æ²¡çœ‹æ˜ç™½é¢˜ç›®è¦æ±‚ä¸­çš„åä¸¤ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¹²å˜›çš„\n\n/** * Return an array of arrays of size *returnSize. * The sizes of the arrays are returned as *returnColumnSizes array. * Note: Both returned array and *columnSizes array must be malloced, assume caller calls free(). */int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes)&#123;&#125;\n\nçœ‹äº†ä¸€äº›é¢˜è§£ï¼Œè¿™æ‰ç®—ç†è§£äº†è¿™é“é¢˜çš„è¦æ±‚\n\n*returnSizeï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘çš„å±‚æ•°\n**returnColumnSizesï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿”å›å€¼è¦æ±‚æ˜¯int**ï¼šéœ€è¦è¿”å›ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ•°ç»„Aï¼Œæ•°ç»„Aä¿å­˜äº†äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\n\n\n0.é”™è¯¯æ€è·¯æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œç”¨å•ç‹¬çš„å‡½æ•°è®¡ç®—å‡ºæ ‘çš„èŠ‚ç‚¹ä¸ªæ•°å’Œå±‚çº§ï¼Œå†è¿›è¡Œä¸€æ¬¡å±‚åºéå†æ¥å¾—åˆ°æ ‘çš„å€¼ã€‚\nä½†å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸€æ€è·¯åœ¨æœ¬é¢˜æ˜¯æä¸é€šçš„ï¼ğŸ¤”\n1.æ•°ç»„é˜Ÿåˆ—åˆå§‹åŒ–åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘è®²è¿°äº†åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°å±‚åºéå†çš„æ€è·¯ã€‚è¿™é“OJé¢˜ç›®æˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚ä¸åŒçš„æ˜¯ï¼Œåœ¨æˆ‘è‡ªå·±å†™çš„é˜Ÿåˆ—å®ç°é‡Œï¼Œä½¿ç”¨çš„æ˜¯é“¾å¼é˜Ÿåˆ—ã€‚è€Œæœ¬é¢˜ä½¿ç”¨æ•°ç»„é˜Ÿåˆ—ä¼šå¥½ä¸€ç‚¹ï¼\n#define MAX 2000int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes) &#123;    if (root == NULL)        return;    struct TreeNode* Queue[MAX];//é˜Ÿåˆ—ï¼Œå­˜æ”¾èŠ‚ç‚¹çš„åœ°å€    int front = 0, tail = 0;//æŒ‡å‘é˜Ÿå¤´å’Œé˜Ÿå°¾\n\n2.åˆå§‹åŒ–æ•°ç»„è¿™éƒ¨åˆ†ä¼šæ¯•ç«Ÿç»•ï¼Œå…ˆä¸€æ­¥ä¸€æ­¥æ¥ç†è§£\n*returnSize = 0;//å°†äºŒå‰æ ‘å±‚çº§åˆå§‹åŒ–ä¸º0//å­˜æ”¾äºŒå‰æ ‘çš„æ¯ä¸€å±‚èŠ‚ç‚¹çš„å€¼int** ret = (int**)malloc(sizeof(int*) * MAX);//å¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°*returnColumnSizes = (int*)malloc(sizeof(int*) * (MAX / 2));\n\n\nretæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾çš„æ˜¯æ•°ç»„Aï¼Œæ•°ç»„Aé‡Œé¢æ˜¯æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ã€‚retä¹Ÿå°±æ˜¯é¢˜ç›®è¦æ±‚çš„è¿”å›å€¼\n*returnColumnSizeså¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°\n\nè¿™é‡Œå…¶å®returnColumnSizesæ²¡æœ‰å•¥äºŒçº§æŒ‡é’ˆçš„å¿…è¦ï¼Œä½†æ˜¯æ—¢ç„¶é¢˜ç›®ç»™äº†æ˜¯int**ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆ*è§£å¼•ç”¨å†mallocå¼€è¾Ÿæ•°ç»„\n3.é˜Ÿåˆ—æ“ä½œæ€è·¯\nå…ˆè®©æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ï¼Œtail++\nå¤–å±‚å¾ªç¯åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦éç©ºï¼Œå¦‚æœéç©ºå°±åœæ­¢æ“ä½œ\nå†…å±‚å¾ªç¯è¿›è¡Œæ¯ä¸€å±‚çš„å…¥é˜Ÿæ“ä½œï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼å’ŒèŠ‚ç‚¹ä¸ªæ•°\nåœ¨å†…å±‚å¾ªç¯ä¸­åˆ›å»ºretæ•°ç»„çš„å­æ•°ç»„ï¼Œå•ç‹¬å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\næœ€åå°†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°èµ‹å€¼ç»™*returnColumnSizesæ•°ç»„ï¼Œ*returnSize++ä¸€æ¬¡\n\n   struct TreeNode* head;   Queue[tail++] = root;//æ ¹èŠ‚ç‚¹å…¥é˜Ÿ   while (front != tail)   &#123;       int Csize = 0;//æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       int end = tail;       //endæ˜¯æ¯ä¸€å±‚æœ€æœ«ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚åœ¨åç»­çš„å…¥é˜Ÿåˆ—æ“ä½œä¸­tailä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦ä¿å­˜tailçš„å€¼       ret[*returnSize] = (int*)malloc(sizeof(int*) * (end - front));       //ä¸ºæ¯ä¸€å±‚å¼€è¾Ÿä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥å­˜æ”¾å€¼       while (front &lt; end)       &#123;           head = Queue[front++];           ret[*returnSize][Csize++] = head-&gt;val;           //æ•°ç»„èµ‹å€¼ï¼ŒåŒæ—¶æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°Csize++           if (head-&gt;left != NULL)               Queue[tail++] = head-&gt;left;           if (head-&gt;right != NULL)               Queue[tail++] = head-&gt;right;       &#125;       (*returnColumnSizes)[*returnSize] = Csize;//èµ‹å€¼æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       (*returnSize)++;//å±‚æ•°+1   &#125;return ret;\n\nå¤–å±‚å¾ªç¯ç»“æŸåï¼Œæ­¤æ—¶retæ•°ç»„å°±æ˜¯é¢˜ç›®è¦æ±‚çš„ç»“æœäº†ï¼Œè¿”å›retå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå½“æ ‘ä¸ºç©ºæ ‘æ—¶ï¼Œå±‚çº§åº”è¯¥æ˜¯0ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è¡Œèµ‹å€¼*returnSize = 0;ä¸ç„¶ä¼šæ‰§è¡Œå‡ºé”™\n\n\nè¿™é“é¢˜çš„æ€è·¯æ˜¯æˆ‘çœ‹è¿‡é¢˜è§£ä¹‹åæ‰ææ˜ç™½çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„åªæ˜¯ä¸€ä¸ªæ€è·¯çš„å¤ç°ğŸ˜­è¿˜æ˜¯å¤ªèœäº†ï¼\n\nç»“è¯­æœ¬ç¯‡åˆ·é¢˜ç¬”è®°åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¦‚æœå¯¹æ¶‰åŠåˆ°çš„é¢˜ç›®æœ‰ä»€ä¹ˆä¸æ‡‚çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n\nè¦æ˜¯çŸ¥é“ï¼ŒOJä¹Ÿèƒ½å·æ‡’ï¼Œå˜¿å˜¿å˜¿å˜¿â€¦â€¦ğŸ˜‚\n\nä¸è¿‡æœ€åä¸€é“é¢˜æ˜¯çœŸçš„éš¾ï¼Œæˆ‘è¿˜ä»¥ä¸ºå®ƒå’Œå‰ä¸­ååºéå†ä¸€æ ·ï¼Œåªæ˜¯è®©æˆ‘ä»¬éå†å‡ºæ•°ç»„çš„å€¼å‘¢ğŸ™ƒ\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["OJåˆ·é¢˜","Cè¯­è¨€","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€Cè¯­è¨€ã€‘å…«å¤§æ’åºç®—æ³•ï¼ˆå¸¦å›¾è¯¦è§£ï¼‰","url":"/2022/04/25/note_data_structure/12%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/","content":"å‰è¨€å¦‚æœä½ æŠŠæœ¬ä¸“æ ä»å¤´çœ‹åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œæœ¬ç¯‡åšå®¢å·²ç»æ˜¯æ˜¯åˆé˜¶æ•°æ®ç»“æ„çš„æ”¶å°¾å•¦ğŸ˜ï¼è®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œé‚£äº›å¸¸è§çš„æ’åºç®—æ³•ï¼\n\næœ¬ç¯‡åšå®¢ä¸»è¦è®²è¿°å…«å¤§æ’åºğŸ•µï¸â€â™€ï¸ï¼Œæ¡¶æ’åº/åŸºæ•°æ’åºå¯èƒ½ä¼šåœ¨åæœŸè¡¥ä¸Šï¼æ¬¢è¿å¤§å®¶æ”¶è—æœ¬æ–‡ï¼\n\n\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡ezçš„å†’æ³¡æ’åºï¼Œå’Œé€šè¿‡å †å®ç°çš„å †æ’åºï¼Œæœ¬ç¯‡åšå®¢å°±ä¸å†è¯¦è§£è¿™ä¸¤ä¸ªäº†ï¼\n\næœ‰äº›æ’åºçš„æ€è·¯ä¸æ˜¯é‚£ä¹ˆå¥½æ‡‚ï¼Œæˆ‘çš„è®²è§£ä¹Ÿä¼šæœ‰ä¸åˆ°ä½çš„åœ°æ–¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºä½ çš„ç–‘æƒ‘æˆ–å»ºè®®ï¼ğŸŒ­\n\n[TOC]\n1.æ’å…¥æ’åº1.1ç›´æ¥æ’å…¥åŸºæœ¬æ€æƒ³ï¼šæŠŠå¾…æ’åºçš„æ•°ä¾ç…§å¤§å°æ’å…¥ä¸€ä¸ªå·²ç»æœ‰åºçš„åºåˆ—ä¸­ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ’å…¥å®Œæ¯•ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ—\n\nå®é™…ä¸Šæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­æ‰“æ–—åœ°ä¸»ï¼Œåœ¨ç ç‰Œçš„æ—¶å€™å°±è¿ç”¨äº†è¿™ç§æ€æƒ³ã€‚æŠŠç›¸åŒçš„æ•°æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ä¾ç…§ä»å°åˆ°å¤§æ’åˆ—\n\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œéƒ½â€œå·²ç»æœ‰åºâ€äº†ï¼Œé‚£è¿˜æ€ä¹ˆæ’åºï¼Ÿ\n\nè¿™éœ€è¦æˆ‘ä»¬ä¹‹å‰å­¦ä¹ é“¾å¼äºŒå‰æ ‘æ—¶æ¥è§¦åˆ°çš„åˆ†æ²»æ€æƒ³\nå½“æˆ‘ä»¬æ‰‹å¤´ä¸Šåªæœ‰ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œå°†å¤§çš„é‚£ä¸ªæ•°æ’å…¥åˆ°å°çš„æ•°åå¤´ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæœ‰åºçš„2æ•°åºåˆ—\nè¿™æ—¶å€™å†è®©ä¸‹ä¸€ä¸ªæ•°åŠ å…¥è¿›æ¥ï¼ŒæŠŠå®ƒæ’å…¥åˆ°ç›¸åº”ä½ç½®ï¼Œå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„3æ•°åºåˆ—\nä¾æ¬¡é€’è¿›ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„Næ•°åºåˆ—\n\nå¦‚æœå­¦ä¹ è¿‡åˆ†æ²»æ€æƒ³çš„ä½ ï¼Œè‚¯å®šä¸€æ‹æ¡Œå­é“ï¼šâ€œæˆ‘çŸ¥é“äº†ï¼Œæ‰‹å¤´ä¸Šåªæœ‰ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯æ¡ä»¶ï¼â€\næ²¡é”™ï¼Œæˆ‘ä»¬å°±æ˜¯è¦åˆ©ç”¨è¿™ç§æ€æƒ³ï¼Œå®ç°ä»ä¸¤ä¸ªæ•°å¼€å§‹çš„æ’å…¥æ’åºï¼\n\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œéœ€è¦ä½ ä½¿ç”¨æ’å…¥æ’åºï¼Œå°†å®ƒå˜æˆå‡åºåºåˆ—\n\næˆ‘ä»¬å°±ä»9å¼€å§‹ï¼Œå°†1æ’å…¥åˆ°9çš„å‰é¢ï¼Œ2æ’å…¥åˆ°1ã€9ä¹‹é—´ï¼Œâ€¦â€¦\n\nè¿™æ ·å°±èƒ½æœ€ç»ˆæ’åºå‡º1 2 3 4 5 5 6 7 8 9çš„ç»“æœ\n\næœ€åä»¥ä»£ç çš„å½¢å¼æ“ä½œï¼Œå¦‚ä¸‹é¢æ‰€ç¤º\n// æ’å…¥æ’åºvoid InsertSort(int* a, int n){\t//åœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ’å…¥æ–°çš„æ•°ï¼Œæ¯ä¸€è¶Ÿéƒ½è®©æœ€åçš„end+1çš„æ•°æ®å¤§äºend\tfor (int i = 0; i &lt; n - 1; i++)\t{\t\tint end = i;\t\tint tmp = a[end+1];\t\twhile (end &gt;= 0)\t\t{\t\t\tif (tmp &lt; a[end])\t\t\t{\t\t\t\ta[end + 1] = a[end];\t\t\t\tend--;\t\t\t}\t\t\telse\t\t\t\tbreak;\t\t}\t\ta[end+1] = tmp;\t\t//æœ€åendä¸ç¬¦åˆæ¡ä»¶å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œendå¯èƒ½ä¸º-1ï¼Œa[end]ä¼šè¶Šç•Œ\t\t//å¦‚æœæ˜¯breakå‡ºçš„å¾ªç¯ï¼Œend+1å’Œtmpçš„ä½ç½®ç›¸åŒï¼Œè‡ªå·±ç­‰äºè‡ªå·±ï¼Œé—®é¢˜ä¸å¤§\t}}\n\nç”±æ­¤æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºç›´æ¥æ’å…¥æ’åºçš„ä¸€äº›ç‰¹æ€§\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N^2^)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œæ˜¯åŸåœ°ç®—æ³•\nå…ƒç´ è¶Šæ¥è¿‘æœ‰åºçš„æ—¶å€™ï¼Œéœ€è¦äº¤æ¢çš„æ¬¡æ•°å°±è¶Šå°‘ï¼Œç®—æ³•çš„æ•ˆç‡è¶Šé«˜\n\n\n1.2å¸Œå°”æ’åºå¸Œå°”æ’åºæ˜¯å¯¹ç›´æ¥æ’å…¥çš„ä¼˜åŒ–ï¼Œåˆç§°â€œç¼©å°å¢é‡æ³•â€ã€‚ä¹‹å‰æˆ‘ä»¬æ˜¯è¿›æ•°ç»„ä¹‹åç›´æ¥å¼€Rï¼Œç°åœ¨å…ˆQä¸€ä¸‹å†Ré—ªï¼Œè¿™æ ·æ‰èƒ½æ‰“å‡ºæ›´ç§€çš„æ“ä½œã€‚ä¸è¿‡æˆ‘çš„ç›²åƒ§å¾ˆèœï¼ŒRé—ªå°±æ²¡æœ‰æˆåŠŸè¿‡ğŸ˜¥\n\nå–‚å–‚å–‚ï¼Œå¥½åƒè·‘é¢˜äº†ï¼\n\nåŸºæœ¬æ€æƒ³ï¼šå…ˆé€‰å®šä¸€ä¸ªæ•´æ•°gapï¼Œè®©åæŠŠå¾…æ’åºæ•°æ®ä»¥gapä¸ºé—´éš”è¿›è¡Œå•ç‹¬çš„æ’å…¥æ’åºï¼ˆé¢„æ’åºï¼‰ï¼Œè¿™æ ·è®©æ•°åˆ—åšåˆ°å±€éƒ¨æœ‰åºï¼Œæœ€ååœ¨è¿›è¡Œæ’å…¥æ’åºï¼Œè¾¾åˆ°ä¼˜åŒ–æ’å…¥æ’åºç®—æ³•æ•ˆç‡çš„ç›®çš„\næ¯”å¦‚æˆ‘ä»¬è®¾å®šgap=3ï¼Œè¿™æ ·åŸæœ¬çš„æ•°ç»„å°±è¢«åˆ†å‰²æˆäº†ä¸‹é¢çš„æ¨¡æ ·ï¼Œæ¥ç€æˆ‘ä»¬å…ˆå¯¹è¿™3ç»„æ•°æ®è¿›è¡Œå•ç‹¬çš„æ’å…¥æ’åºã€è¿™ä¸ªæ“ä½œè¢«ç§°ä¸º é¢„æ’åºã€‘\n\nä½ èƒ½å†™å‡ºå®ƒä»¬å•ç‹¬æ’å…¥æ’åºåçš„ç»“æœå—ï¼Ÿ\n\nè¿™æ—¶å€™æˆ‘ä»¬çš„åºåˆ—è™½ç„¶ä¸æ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯åªçœ‹ä¸€ä¸ªå°å±€éƒ¨çš„æ—¶å€™ï¼Œå®ƒæ˜¯æœ‰åºçš„ã€‚\nè¿™æ ·èƒ½å‡å°‘æ’å…¥æ’åºæ“ä½œæ—¶å€™çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œè‡ªç„¶æ•ˆç‡å°±å˜é«˜äº†\n\næ‰§è¡Œå®Œé¢„æ’åºåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ç°åœ¨çš„æ–°åºåˆ—è¿›è¡Œæ’å…¥æ’åºäº†ã€‚ä½†æ˜¯ç›´æ¥è¿™ä¹ˆè°ƒç”¨è¿˜ä¸å¤Ÿä¼˜åŒ–ã€‚\n\nå†ä»”ç»†çœ‹çœ‹ä¸Šé¢çš„æ€è·¯ï¼Œä½ ä¼šå‘ç°ï¼Œå…¶å®gap=1çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºä¸€æ¬¡æ’å…¥æ’åºäº†\n\nè€Œä¸”å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å®æ—¶æ”¹å˜æˆ‘ä»¬çš„gapã€‚\nå¾…æ’åºæ•°æ®æœ‰100ä¸ªï¼Œgap=3å°±å¤ªå°äº†ï¼Œä¼˜åŒ–äº†ä¸ªå¯‚å¯ã€‚\nå¾…æ’åºæ•°æ®æœ‰10ä¸ªï¼Œgap=20å°±æ˜¯æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šï¼ŒåŒæ ·ä¸è¡Œï¼\n\nè§£å†³è¿™ä¸ªæ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®å¾…æ’åºæ•°æ®çš„å¤§å°åŠ¨æ€è®¾ç½®gapå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚gap=n/2\nè¿™æ—¶å€™å°±å¯ä»¥è¿›è¡Œè¿™ä¹ˆä¸€ä¸ªæ“ä½œï¼šæ¯æ¬¡é¢„æ’åºè¿‡åå°±æ”¹å˜ä¸€ä¸‹gapï¼Œç›´åˆ°æœ€ågap=1æ‰§è¡Œä¸€æ¬¡æ’å…¥æ’åºï¼Œæ•°åˆ—æœ‰åº\n\nè½å®åˆ°ä»£ç ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ’å…¥æ’åºä¸­æ‰€æœ‰å’Œ1æœ‰å…³çš„æ“ä½œéƒ½æ”¹æˆgapï¼Œå°±å®ç°äº†å¸Œå°”æ’åº\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯gapçš„èŒƒå›´ï¼Œå› ä¸ºæˆ‘è®¾ç½®çš„æ˜¯gapæ¯æ¬¡éƒ½/3ï¼Œæ‰€ä»¥åœ¨æœ€åå¯èƒ½ä¼šå‡ºç°gap=2/3=0çš„æƒ…å†µï¼Œè¿™æ—¶å€™å…¶å®æ’åºè¿˜æ²¡æœ‰ç»“æŸï¼Œä½†å·²ç»è·³å‡ºå¾ªç¯äº†ã€‚æˆ‘ä»¬éœ€è¦åœ¨æœ«å°¾+1ä¿è¯æœ€åä¸€æ¬¡æ’å…¥æ’åºçš„gap=1\n\n// å¸Œå°”æ’åºvoid ShellSort(int* a, int n){\t//åªè¦æŠŠæ’å…¥æ’åºä¸­çš„1å…¨éƒ¨æ”¹æˆgrapï¼Œå°±èƒ½å½¢æˆä¸€æ¬¡é—´éš”ä¸º3çš„é¢„æ’åº\t//å½“grap=1æ—¶ï¼Œæ•ˆæœåŒæ’å…¥æ’åºç›¸åŒ\tint grap = n;\twhile (grap &gt; 1)//å½“grap=1ï¼Œè¯´æ˜ä¸Šä¸€æŠŠå·²ç»æ˜¯æ’å…¥æ’åºäº†\t{\t\tgrap=grap/3+1;//æ¯ä¸€æ¬¡éƒ½/3,å†+1é˜²æ­¢grap=2/3çš„æƒ…å†µ\t\tfor (int i = 0; i &lt; n - grap; i++)\t\t{\t\t\tint end = i;\t\t\tint tmp = a[end + grap];\t\t\twhile (end &gt;= 0)\t\t\t{\t\t\t\tif (tmp &lt; a[end])\t\t\t\t{\t\t\t\t\ta[end + grap] = a[end];\t\t\t\t\tend -= grap;\t\t\t\t}\t\t\t\telse\t\t\t\t\tbreak;\t\t\t}\t\t\ta[end + grap] = tmp;\t\t}\t}}\n\nå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸å¥½ç¡®å®šï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šé€‰å–ä¸åŒçš„gapï¼Œå¯¼è‡´æ—¶é—´æ•ˆç‡ä¹Ÿä¸åŒã€‚ä¸è¿‡å¤§éƒ¨åˆ†èµ„æ–™ä¸­ç»™å‡ºçš„æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ğŸ‘‡åˆ°åœ¨â€œèœé¸Ÿæ•™ç¨‹â€ç½‘ï¼Œæœ‰å¯¹å¸Œå°”æ’åºæ—¶é—´å¤æ‚åº¦çš„è§£æğŸ‘‰ä¼ é€é—¨\n\n\n2.é€‰æ‹©æ’åº2.1ç›´æ¥é€‰æ‹©åŸºæœ¬æ€è·¯ï¼šéå†ä¸€éæ•°ç»„ï¼Œä»ä¸­æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°çš„é‚£ä¸€ä¸ªæ•°ï¼Œç„¶åå°†å…¶æ”¾åœ¨æ•°ç»„å‰ç«¯ã€‚ä¸‹ä¸€æ¬¡éå†çš„æ—¶å€™ï¼Œä¸å†éå†è¿™ä¸ªæ•°ã€‚\næ³¨æ„ï¼šå¾—åˆ°æœ€å¤§æœ€å°å€¼åï¼Œéœ€è¦å°†å…¶å’Œæ•°ç»„å¼€å¤´ï¼ˆæˆ–è€…ç»“å°¾ï¼‰çš„æ•°è¿›è¡Œäº¤æ¢ï¼Œè€Œä¸èƒ½ç›´æ¥è¦†ç›–ï¼Œä¸ç„¶ä¼šå‡ºç°æ•°æ®ä¸¢å¤±\n\nè¿™ä¸ªæ’åºçš„æ€è·¯éå¸¸å¥½ç†è§£ã€‚è¿›ä¸€æ­¥æ‹“å±•ï¼Œå¦‚æœæˆ‘ä¸€æ¬¡éå†é€‰å‡ºä¸¤ä¸ªæ•°ï¼Œå°†æœ€å¤§å€¼æ”¾åœ¨æ•°ç»„å°¾éƒ¨ï¼Œæœ€å°å€¼æ”¾åœ¨æ•°ç»„å¼€å¤´ï¼Œå°±å¯ä»¥å‡å°‘ä¸€åŠéå†çš„æ¬¡æ•°ã€‚\n// æ•°æ®äº¤æ¢void Swap(int* a, int* b){\tint tmp = *a;\t*a = *b;\t*b = tmp;}// ç›´æ¥é€‰æ‹©æ’åºvoid SelectSort(int* a, int n){\tint max ,min;\tint left = 0, right = n - 1;\t\twhile (left &lt; right){\t\tmax = min = left;//å­˜æ”¾ä¸‹æ ‡ä¾¿äºåé¢çš„äº¤æ¢\t\tfor (int i = left; i &lt;= right; i++)\t\t{\t\t\tif (a[i] &gt;=a[max]){\t\t\t\tmax= i;\t\t\t}\t\t\tif (a[i] &lt;= a[min]){\t\t\t\tmin= i;\t\t\t}\t\t}\t\tSwap(&amp;a[min], &amp;a[left]);\t\tif (max == left) {\t\t\tmax = min;\t\t}//å¦‚æœmaxæ•°æ®åœ¨å¼€å¤´ï¼Œç¬¬ä¸€æ¬¡äº¤æ¢ä¼šè¢«æ›¿æ¢        //æ‰€ä»¥éœ€è¦é‡å®šå‘maxçš„ä½ç½®ï¼Œå†äº¤æ¢max\t\tSwap(&amp;a[max], &amp;a[right]);\t\tleft++;\t\tright--;\t}}\n\nä¸è¿‡ï¼Œè¿™ä¸ªç®—æ³•éœ€è¦å¤šæ¬¡éå†æ•°ç»„ï¼Œæ•ˆç‡è‡ªç„¶ä½çš„ç¦»è°±ï¼Œå ªæ¯”å†’æ³¡ï¼ˆç”šè‡³æ¯”å†’æ³¡è¿˜æ‹‰ï¼‰\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N^2^)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\n\n2.2å †æ’åºå †æ’åºæ˜¯æŒ‡åˆ©ç”¨äºŒå‰æ ‘-å †è¿™ç§æ•°æ®ç»“æ„æ¥è¿›è¡Œé€‰æ‹©æ•°æ®çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šå‡åºè¦å»ºå¤§å †ï¼Œæ’é™åºå»ºå°å †\nå †æ’åºå·²ç»åœ¨ä¹‹å‰çš„åšå®¢ä¸­è®²è§£è¿‡ï¼Œç‚¹å‡»ä¸‹æ–¹è¿æ¥å³å¯æŸ¥çœ‹ï¼ğŸ‘‡\n\nã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯å †ï¼Ÿå †æ’åºå’ŒTopKé—®é¢˜åˆæ˜¯å¦‚ä½•å®ç°çš„\n\nè¿™é‡Œç»™å‡ºå †æ’åºçš„æºç ï¼Œæˆ–è®¸èªæ˜çš„ä½ çœ‹æºç å°±èƒ½çœ‹æ‡‚å‘¢ï¼Ÿ\n// å †æ’åºvoid AdjustDown(int* a, int n, int root){\tassert(a);\tint parent = root;\tint child = parent * 2 + 1;//å·¦å­©å­\twhile (child &lt; n){\t\t//æ‰¾å·¦å³å­©å­ä¸­å°çš„é‚£ä¸€ä¸ª\t\tif (child + 1 &lt; n &amp;&amp; a[child] &lt; a[child + 1])\t\t{//å¦‚æœå·¦å­©å­å¤§äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t\tchild++;\t\t}\t\tif (a[child] &gt; a[parent]){\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tparent = child;\t\t\tchild = parent * 2 + 1;\t\t}\t\telse{\t\t\treturn;\t\t}\t}}// å‡åºç”¨å¤§å †// é™åºç”¨å°å †void HeapSort(int* a, int n){\t// å‘ä¸‹è°ƒæ•´--å»ºå † O(N)\tfor (int i = (n - 1 - 1) / 2; i &gt;= 0; --i){\t\tAdjustDown(a, n, i);//æ­¤æ—¶å»ºçš„æ˜¯ä¸€ä¸ªå°å †\t}\tPrintArray(a, n);\tsize_t end = n - 1;\twhile (end &gt; 0){\t\tSwap(&amp;a[0], &amp;a[end]);//å‰åäº¤æ¢ï¼Œæœ€å¤§çš„æ•°æ”¾åˆ°æœ«å°¾ï¼Œä¸è¿›è¡Œä¸‹ä¸€æ¬¡è°ƒæ•´\t\tAdjustDown(a, end, 0);\t\tend--;\t}}\n\n\n3.äº¤æ¢æ’åº3.1å’•å™œå’•å™œæ’åºè¯´é“å†’æ³¡æ’åºå•Šï¼Œé‚£å°±æ˜¯é™ªä¼´å’±ä»¬Cè¯­è¨€å­¦ä¹ å§‹ç»ˆçš„ä¸€ä¸ªè€æœ‹å‹äº†ã€‚\nåœ¨åˆè¯†Cè¯­è¨€çš„å­¦ä¹ ä¸­ï¼Œæˆ‘æ›¾å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œé‡Œé¢è®²è§£äº†ç”¨å†’æ³¡æ¥æ¨¡æ‹Ÿå®ç°åº“å‡½æ•°qsortğŸ‘‰ä¼ é€é—¨\n\nå®ƒçš„æ€è·¯å°±æ˜¯å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œè¾ƒå¤§çš„æ•°å¾€å°¾éƒ¨ç§»åŠ¨ï¼Œè¾ƒå°çš„æ•°å­—å¾€å¤´éƒ¨ç§»åŠ¨\n\nåœ¨very very long time agoï¼Œæˆ‘ä¹Ÿå†™è¿‡å…³äºå†’æ³¡æ’åºçš„åšå®¢ğŸ‘‡\n\nåˆè¯†Cè¯­è¨€==ï¼å†’æ³¡æ’åº\n\n// å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){\tfor (int i = 0; i &lt; n; i++)\t{\t\tint exchange = 0;\t\tfor(int j=0;j&lt;n-1-i;j++)\t\t{\t\t\tif (a[j] &gt; a[j + 1]){\t\t\t\texchange=1;\t\t\t\tSwap(&amp;a[j], &amp;a[j + 1]);\t\t\t}\t\t}\t\tif (exchange == 0){\t\t\tbreak;           //å¦‚æœå•è¶Ÿæ’åºæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ­¤æ—¶å·²ç»æœ‰åº\t\t}\t}}\n\n\nç©ºé—´å¤æ‚åº¦ï¼šO(N^2^)\næ—¶é—´å¤æ‚åº¦ï¼šO(1)\n\n\n3.2å¿«é€Ÿæ’åºå¿«é€Ÿæ’åºæ˜¯Hoareäº1962å¹´æå‡ºçš„ä¸€ç§äºŒå‰æ ‘ç»“æ„çš„äº¤æ¢æ’åºç®—æ³•ã€‚\nåŸºæœ¬æ€æƒ³ï¼šä»»å–å¾…æ’åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ŒæŒ‰ç…§è¯¥åŸºå‡†å€¼å°†å¾…æ’åºé›†åˆåˆ†å‰²æˆä¸¤ä¸ªå­åºåˆ—ï¼Œå·¦å­åºåˆ—ä¸­æ‰€æœ‰å…ƒç´ å‡å°äºåŸºå‡†å€¼ï¼Œå³ å­åºåˆ—ä¸­æ‰€æœ‰å…ƒç´ å‡å¤§äºåŸºå‡†å€¼ï¼Œç„¶åæœ€å·¦å³å­åºåˆ—é‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½æ’åˆ—åœ¨ç›¸åº”ä½ç½®ä¸Šä¸ºæ­¢ã€‚\n\n3.2.1 Hoareæ³•å‘æ˜å¿«æ’çš„å¤§ä½¬ç»™å‡ºäº†ä¸€ä¸ªæ–¹æ³•ï¼Œå‡è®¾0ä¸‹æ ‡å¤„ä¸ºåŸºå‡†å€¼keyã€‚ç”¨å·¦å³æŒ‡é’ˆæ¥éå†æ•°ç»„ï¼Œå³æŒ‡é’ˆæ‰¾åˆ°æ¯”keyå°çš„æ•°ååœä¸‹ï¼Œå·¦æŒ‡é’ˆæ‰¾æ‰¾åˆ°æ¯”keyå¤§çš„æ•°ååœä¸‹ï¼Œå®ƒä»¬ä¿©è¿›è¡Œäº¤æ¢ã€‚\næœ€åleftå’Œrightç›¸é‡çš„æ—¶å€™ï¼Œå·¦å³åºåˆ—å°±å·²ç»æ’å¥½äº†ï¼Œæ­¤æ—¶å°†keyä¸å®ƒä»¬ç›¸é‡çš„ä½ç½®è¿›è¡Œäº¤æ¢ã€‚æ–°çš„åºåˆ—keyçš„å·¦è¾¹å°äºkeyï¼Œå³è¾¹å¤§äºkeyï¼ˆæ­¤æ—¶ä¸ä¸€å®šæœ‰åºï¼‰\n\nç–‘é—®ï¼šæ—¢ç„¶æœ€åè¦å°†ç›¸é‡ä½ç½®å’Œkeyè¿›è¡Œäº¤æ¢ï¼Œé‚£è¦æ€ä¹ˆä¿è¯ç›¸é‡ä½ç½®å°äºkeyï¼Ÿ\nç­”ï¼šé€šè¿‡å³æŒ‡é’ˆå…ˆèµ°æ¥å®ç°ï¼\n\nå¯èƒ½è¯´å®Œæ€è·¯åï¼Œä½ è¿˜æ˜¯ä¸å¤ªäº†è§£è¿™å·¦å³æŒ‡é’ˆæ˜¯æ€ä¹ˆèµ°çš„ï¼Œåˆ«ç€æ€¥ï¼Œæ¥åº·åº·æˆ‘ç”»çš„åŠ¨å›¾ğŸ‘‡\n\nå› ä¸ºæ˜¯å³æŒ‡é’ˆå…ˆèµ°ï¼Œæ‰€ä»¥å³æŒ‡é’ˆåœä¸‹çš„ä½ç½®ï¼Œä¸€å®šæ˜¯å°äºkeyçš„ä½ç½®ã€‚æ­¤æ—¶åªä¼šæ˜¯Læ¥äº¤Rï¼Œä¸å¯èƒ½æ˜¯Rå¾€å·¦é‡åˆ°Lï¼ˆå› ä¸ºLåœä¸‹çš„ä½ç½®å¤§äºkeyï¼Œåœ¨æ­¤å³è¾¹ä¸å¯èƒ½æ²¡æœ‰ä¸€ä¸ªå°äºkeyçš„å€¼ï¼‰\næ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœLçš„ä½ç½®å³è¾¹åªæœ‰ä¸€ä¸ªæ¯”keyå°çš„å€¼ï¼Œé‚£Råœ¨ç¬¬ä¸€è¶Ÿå°±ä¼šæ¥åˆ°2çš„ä½ç½®ï¼Œç„¶åLå‘å³èµ°ä¸€æ­¥ä¸Rç›¸äº¤ï¼Œç›´æ¥äº¤æ¢\n\nä¸¤ç§æç«¯æƒ…å†µä¹Ÿä¼šæœ‰ä¸‹é¢çš„ä¸¤ç§æç«¯æƒ…å†µ\n\nkeyå³ä¾§æ²¡æœ‰æ¯”keyå°çš„å€¼ï¼Œé‚£ä¹ˆRä¼šç›´æ¥ä¸Lç›¸äº¤ï¼Œå†åŸåœ°äº¤æ¢key\nkeyå³ä¾§æ²¡æœ‰æ¯”keyå¤§çš„å€¼ï¼ŒRå…ˆç§»åŠ¨ï¼ˆåŸåœ°ä¸åŠ¨ï¼‰ï¼ŒLç›´æ¥ä¸Råœ¨æœ«å°¾ç›¸äº¤ï¼Œå‰åäº¤æ¢\n\nè¿™ä¸¤ç§æç«¯æƒ…å†µï¼Œå°±æ˜¯å¿«æ’çš„å¼±åŠ¿æ‰€åœ¨ï¼Œåœ¨åå¤´ä¼šè®²è¿°å¦‚ä½•ä¼˜åŒ–keyçš„é€‰åˆ™ï¼Œæ¥é¿å…è¿™ç§æç«¯æƒ…å†µ\n\nä¸‹é¢ç»™å‡ºhoareæ³•çš„ä»£ç ï¼Œä¸­é—´çš„ä»£ç æ˜¯ä¸€è¶Ÿhoareæ’åºçš„å®ç°ï¼Œè€Œåœ¨æœ«å°¾ï¼Œæˆ‘ä»¬é€’å½’æ’åºkeyçš„å‰åŠåŒºåŸŸå’ŒååŠåŒºåŸŸï¼Œä¸€ç›´é€’å½’åˆ°æœ€å°åŒºé—´ï¼šã€åŒºé—´åªæœ‰ä¸€ä¸ªå€¼ï¼Œæˆ–è€…åŒºé—´ä¸å­˜åœ¨ã€‘\nvoid QuickSort1(int* a, int begin, int end)//hoare{\tif (begin &gt;= end){\t\treturn ;//åˆ†æ²»çš„æœ«ç«¯æ¡ä»¶åˆ¤æ–­\t}\t    //ä¸€è¶Ÿæ’åº\tint left = begin, right = end;\tint keyi = begin;\twhile (left &lt; right)\t{\t\twhile ((a[right] &gt; a[keyi])&amp;&amp;(right&gt;=begin))\t\t{\t\t\tright--;\t\t}\t\twhile ((a[left] &lt;= a[keyi])&amp;&amp;(left&lt;right))\t\t{\t\t\tleft++;\t\t}\t\tSwap(&amp;a[left], &amp;a[right]);\t}\tSwap(&amp;a[left],&amp;a[keyi]);\tkeyi = left;//å¿…é¡»ç§»åŠ¨keyiçš„ä½ç½®\t    //é€’å½’æ’åºå·¦å³åŒºé—´\tQuickSort1(a, begin, keyi-1);\tQuickSort1(a, keyi + 1, end);}\n\n3.2.2 æŒ–å‘æ³•æŒ–å‘æ³•çš„æ€è·¯æ¯”Hoareæ›´å¥½ç†è§£ï¼Œè¯¦æƒ…è§ğŸ‘‡åŠ¨å›¾\n\næˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªå˜é‡ä¿å­˜keyçš„å€¼ï¼ˆä¸æ˜¯ä¿å­˜ä¸‹æ ‡ï¼‰ï¼Œç„¶åRå…ˆèµ°æ‰¾æ¯”keyå°çš„ï¼Œä¸å‘ä½äº¤æ¢ï¼ŒLæ‰¾æ¯”keyå¤§çš„ï¼Œä¸å‘ä½äº¤æ¢ã€‚æœ€ç»ˆLRç›¸é‡çš„æ—¶å€™ï¼ŒæŠŠkeyæ”¾å›ç›¸é‡ä½ç½®ï¼Œå°±å®Œæˆäº†ä¸€è¶Ÿæ’åº\n\næ³¨æ„ï¼šå›¾ä¸­ä¸ºäº†ä¾¿äºç†è§£ï¼Œå°†å‘ä½ç”¨ç©ºç™½è¡¨ç¤ºã€‚å®é™…åœ¨å†…å­˜ä¸­æ“ä½œçš„æ—¶å€™ï¼Œå‘ä½å¯ä»¥ä¸€ç›´æ˜¯keyçš„å€¼ï¼Œä¸éœ€è¦çœŸçš„æŠŠå®ƒç§»èµ°æˆ–è€…åˆ é™¤\n\næ€æ ·ï¼Ÿæ˜¯ä¸æ˜¯æ¯”æ–¹æ³•1å¥½ç†è§£ä¸€äº›å‘¢ï¼Ÿ\nä¸‹é¢ç»™å‡ºæŒ–å‘æ³•çš„ä»£ç ç¤ºä¾‹\n//æŒ–å‘void QuickSort2(int* a, int begin, int end){\tif (begin &gt;= end) {\t\treturn;\t}\tint left = begin, right = end;\tint keyi = a[begin];//å…ˆå­˜æ”¾keyiçš„å€¼\tint pit = begin;//pitä½œä¸ºå‘ä½\twhile (left &lt; right)\t{\t\twhile ((a[right] &gt; keyi) &amp;&amp; (right &gt;= begin))\t\t{\t\t\tright--;\t\t}\t\tSwap(&amp;a[pit], &amp;a[right]);\t\tpit = right;\t\twhile ((a[left] &lt;= keyi) &amp;&amp; (left &lt; right))\t\t{\t\t\tleft++;\t\t}\t\tSwap(&amp;a[pit], &amp;a[left]);\t\tpit = left;\t}\t\tQuickSort2(a, begin, pit - 1);\tQuickSort2(a, pit + 1, end);}\n\n3.2.3 å‰åæŒ‡é’ˆæ³•è¿™éƒ¨åˆ†å°±ä¸ç”»åŠ¨å›¾äº†ï¼Œä¸çŸ¥ä¸‹é¢çš„è¿™ç§æ–¹å¼èƒ½ä¸èƒ½è®²è§£æ¸…æ¥šå‘¢ï¼Ÿ\n\n\nè¿™é‡Œéœ€è¦å¼„æ˜ç™½çš„æ˜¯curå’Œprevæ˜¯åˆ†åˆ«åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ç§»åŠ¨\n\ncuræ¯”keyå°çš„æ—¶å€™ï¼Œprevå¾€å++ä¸€ä½ï¼ŒäºŒè€…äº¤æ¢ï¼ˆåœ¨åˆšå¼€å§‹çš„æ—¶å€™æ˜¯åŸåœ°äº¤æ¢ï¼Œä½†åœ¨å›¾4ä¸­å°±ä¸æ˜¯åŸåœ°äº¤æ¢äº†ï¼‰\ncuræ¯”keyå¤§çš„æ—¶å€™ï¼Œprevä¸åŠ¨ï¼Œcurç»§ç»­å¾€å++ï¼Œç›´åˆ°æ‰¾åˆ°æ¯”keyå°çš„æ•°æˆ–è€…è¶Šç•Œååœæ­¢ï¼ˆå¦‚æœæ‰¾åˆ°æ¯”keyå°çš„ï¼Œå°±æ‰§è¡Œä¸Šä¸€æ­¥çš„äº¤æ¢ï¼‰\næœ€ç»ˆcurè¶Šç•Œäº†ï¼Œäº¤æ¢prevå’Œkeyçš„æ•°æ®ï¼Œä¸€è¶Ÿæ’åºå®Œæˆ\n\n\nä¸‹é¢ç»™å‡ºå‰åæŒ‡é’ˆæ³•çš„ä»£ç ç¤ºä¾‹\nvoid QuickSort3(int* a, int begin, int end)//å‰åæŒ‡é’ˆ{\tif (begin &gt;= end) {\t\treturn;\t}\tint keyi = begin;\tint prev = begin, cur = begin + 1;\twhile (cur &lt;= end)\t{\t\twhile ((a[cur] &lt; a[keyi]) &amp;&amp; (a[++prev] != a[cur]))\t\t{\t\t\tSwap(&amp;a[prev], &amp;a[cur]);\t\t}\t\tcur++;\t}\tSwap(&amp;a[prev], &amp;a[keyi]);\tkeyi = prev;\t\tQuickSort3(a, begin, keyi - 1);\tQuickSort3(a, keyi + 1, end);}\n\nä¼˜åŒ–æç«¯æƒ…å†µä¸Šé¢æåˆ°äº†å¿«é€Ÿæ’åºæœ‰ä¸¤ç§æç«¯æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ“ä½œæ¥ä¼˜åŒ–å®ƒï¼š\næ—¢ç„¶keyå–æ•°ç»„é¦–æˆ–å°¾éƒ¨éƒ½å¯èƒ½ä¼šé‡åˆ°å®ƒçš„åé¢æ²¡æœ‰æ¯”å®ƒå°ï¼ˆæˆ–å¤§ï¼‰çš„æ•°ï¼Œé‚£æˆ‘ä»¬å°±è®©keyå°½é‡ä½œä¸ºæ•°ç»„æœ‰åºååº”è¯¥å¤„äºä¸­éƒ¨çš„æ•°æ¥ä½œä¸ºkey\nè¿™æ—¶å€™ä¸èƒ½ç›´æ¥é€‰å–å¾…æ’åºæ•°ç»„ä¸­éƒ¨çš„æ•°ï¼Œå› ä¸ºå®ƒä¸ä¸€å®šæ˜¯æ•°å€¼æ­£å¥½çš„é‚£ä¸ª\næˆ‘ä»¬å¯ä»¥é€‰å–æ•°ç»„å¼€å¤´ã€æœ«å°¾ã€ä¸­é—´çš„3ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå†é€‰æ‹©è¿™3ä¸ªæ•°é‡Œé¢å±…ä¸­çš„é‚£ä¸ªæ•°ä½œä¸ºæˆ‘ä»¬çš„keyï¼Œè¿™æ ·å°±èƒ½é¿å…æ— æ•ˆéå†ï¼\nint GetMid(int* a, int left, int right){\tint mid = (left + right) / 2;\tif (a[left] &lt; a[mid])\t{\t\tif (a[mid] &lt; a[right]){\t\t\treturn mid;\t\t}\t\telse if (a[left] &gt; a[right]){\t\t\treturn left;\t\t}\t\telse{\t\t\treturn right;\t\t}\t}\telse // a[left] &gt; a[mid]\t{\t\tif (a[mid] &gt; a[right]){\t\t\treturn mid;\t\t}\t\telse if (a[left] &lt; a[right]){\t\t\treturn left;\t\t}\t\telse{\t\t\treturn right;\t\t}\t}\treturn -1;//å…¶å®è¿™ä¸ªæ²¡å•¥æ„ä¹‰}\n\nä½†æ˜¯å•çº¯åŠ ä¸Šè¿™ä¸ªä»£ç å¹¶ä¸å¯è¡Œï¼Œå› ä¸ºè¿™æ—¶å€™çš„keyä¸å†å¤„äºåºåˆ—å¼€å¤´äº†ï¼Œä¹Ÿå°±æ„å‘³è¿™æˆ‘ä»¬åå¤´çš„ä»£ç éƒ½éœ€è¦é‡æ–°å†™ä¸€éï¼\n\nè¿™ä¸å‘çˆ¹å—è¿™æ˜¯ï¼Ÿï¼\nä¸ºäº†ä¸æ²¡äº‹æ‰¾äº‹é‡å†™ä¸€éä»£ç ï¼Œè¿™é‡Œç›´æ¥æŠŠæ‰¾åˆ°çš„MIDå’Œleftè¿›è¡Œäº¤æ¢å°±OKäº†ï¼\n\nåŒæ—¶ï¼Œä¸ºäº†é¿å…å¤šæ¬¡é€’å½’å¯¼è‡´æ ˆæº¢å‡ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªæ¡ä»¶ï¼Œåœ¨åºåˆ—é•¿åº¦å°äº10çš„æ—¶å€™è°ƒç”¨å…¶ä»–æ’åºï¼ˆæ¯”å¦‚æ’å…¥æ’åºï¼‰æ¥å®ç°åé¢çš„æ’åºæ“ä½œ\n3.2.4å¿«æ’çš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦å¿«æ’çš„é€’å½’è°ƒç”¨éå¸¸ç±»ä¼¼é“¾å¼äºŒå‰æ ‘çš„å‰åºéå†ï¼Œå®ƒä¸€å…±ä¼šé€’å½’logNå±‚çº§ï¼Œæ¯ä¸€å±‚åŠ èµ·æ¥éƒ½æœ‰Nä¸ªæ•°ï¼Œè¿™æ ·å°±èƒ½ç®—å‡ºå®ƒçš„æ—¶é—´å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N*logN)\nç©ºé—´å¤æ‚åº¦ï¼šO(logN)ï¼Œè¿™ä¸ªæ˜¯é€’å½’å¼€è¾Ÿæ ˆå¸§çš„ç©ºé—´æ¶ˆè€—\n\n\n3.3å¿«æ’éé€’å½’å®ç°è¿™éƒ¨åˆ†çš„çŸ¥è¯†å°±æ¯”è¾ƒæ·±å¥¥äº†ï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹è¿™ç¯‡åšå®¢ï¼Œäº†è§£ä¸€ä¸‹å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆğŸ‘‰ä¼ é€é—¨\n\nä½†ä¸è¦æ‹…å¿ƒï¼Œå…¶å®å®ƒçš„æ€è·¯å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ï¼\n\né¦–å…ˆéœ€è¦å…ˆææ˜ç™½ï¼Œé€’å½’è°ƒç”¨çš„æœ¬è´¨æ˜¯åœ¨æ“ä½œä»€ä¹ˆï¼Ÿ\nåœ¨å¿«æ’ä¸­ï¼Œé€’å½’è°ƒç”¨çš„æœ¬è´¨æ˜¯è®©ç¨‹åºè‡ªå·±æ¥ç¼©å°æ’åºçš„èŒƒå›´ï¼Œå†é€æ­¥æ‰©å¤§\né‚£æˆ‘ä»¬å¯ä¸å¯ä»¥åˆ©ç”¨æ•°æ®ç»“æ„ä¸­çš„æ ˆï¼Œæ¥æ¨¡æ‹Ÿå®ç°ç¨‹åºè¿è¡Œä¸­çš„é€’å½’æ“ä½œå‘¢ï¼Ÿ\n\næ’åºå®Œä¸€è¶Ÿåï¼Œå°†ä¸‹ä¸€è¶Ÿçš„å·¦å³èŒƒå›´å…¥æ ˆ\nç¨‹åºå…ˆè°ƒç”¨å­˜æ”¾åœ¨æ ˆé¡¶çš„å³è¾¹èŒƒå›´è¿›è¡Œæ’åºï¼Œå¹¶æŠŠè¿™ä¸ªèŒƒå›´çš„å·¦å³å°åŒºé—´å†æ¬¡å…¥æ ˆ\næœ€åå³è¾¹çš„åŒºé—´å·²ç»ä¸å¯å†åˆ†ï¼Œå°±å¼€å§‹è¿”å›è°ƒç”¨å·¦è¾¹åŒºé—´\n\nè¿™ä¸ªæ“ä½œå°±çŠ¹å¦‚é“¾å¼äºŒå‰æ ‘çš„ååºéå†ï¼Œå…ˆé€’å½’è®¿é—®å³èŠ‚ç‚¹ï¼Œå†å¾€å›è¿”å›å·¦èŠ‚ç‚¹\næœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯ç±»ä¼¼é€’å½’è°ƒç”¨å®Œæ¯•åçš„ç»“æœ\n\n\nå¦‚æœä½ è¿˜æ²¡æœ‰å­¦ä¹ æ•°æ®ç»“æ„é‡Œé¢çš„æ ˆï¼Œç‚¹æˆ‘é€Ÿè§ˆï¼\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªéé€’å½’çš„å®ç°ï¼š\n// éé€’å½’void QuickSort4(int* a, int begin, int end){\tStack st;\tStackInit(&amp;st);\tStackPush(&amp;st, begin);\tStackPush(&amp;st, end);\twhile (!StackEmpty(&amp;st))\t{\t\tint right = StackTop(&amp;st);\t\tStackPop(&amp;st);\t\tint left = StackTop(&amp;st);\t\tStackPop(&amp;st);\t\tint keyi = PartSort3(a, left, right);\t\t// [left,keyi-1][keyi+1ï¼Œright]\t\tif (left &lt; keyi-1)\t\t{\t\t\tStackPush(&amp;st, left);\t\t\tStackPush(&amp;st, keyi-1);\t\t}\t\tif (keyi + 1 &lt; right)\t\t{\t\t\tStackPush(&amp;st, keyi+1);\t\t\tStackPush(&amp;st, right);\t\t}\t}\tStackDestory(&amp;st);}\n\næ³¨æ„ï¼šå› ä¸ºè¿™é‡Œéœ€è¦å¾—åˆ°ä¸€è¶Ÿé€’å½’è°ƒç”¨åè¿”å›çš„keyiï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠä¹‹å‰å†™çš„ä¸€è¶Ÿå¿«æ’å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå¹¶è®¾ç½®è¿”å›å€¼\n\næ¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼ŒæˆåŠŸäº†ï¼\n\n\n4.å½’å¹¶æ’åºåŸºæœ¬æ€æƒ³ï¼šé‡‡ç”¨åˆ†æ²»é€’å½’ï¼Œå°†å·²æœ‰çš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åº\n\nè‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶\n\nå®ç°çš„æ­¥éª¤å¦‚ä¸‹å›¾\n\n\nå…ˆå°†åŒºé—´é€šè¿‡é€’å½’åˆ†å‰²æˆåˆ†æ²»æœ«ç«¯ï¼ˆåªæœ‰ä¸€ä¸ªå€¼ï¼‰\nå†å¯¹ç›¸é‚»ä¸¤ä¸ªåŒºé—´è¿›è¡Œæ¯”è¾ƒï¼Œå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä¾æ¬¡å°†ä¸¤ä¸ªåŒºé—´ä¸­å°çš„é‚£ä¸ªæŒ‰é¡ºåºæ‘†æ”¾åœ¨æ–°çš„æ•°ç»„ä¸­ï¼Œå†æ‹·è´å›åŸæ•°ç»„ï¼Œå°±å®ç°äº†å½’å¹¶\nå½“åŒºé—´ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå¼€å§‹è¿”å›é€’å½’ï¼Œç›´åˆ°åºåˆ—æœ‰åº\n\n4.1æ‰“å°printfè°ƒè¯•å¤§æ³•è¿™é‡Œæœ€éœ€è¦æ³¨æ„çš„å°±æ˜¯åˆ†æ²»çš„åºåˆ—åŒºé—´é—®é¢˜ï¼Œå¦‚æœä»£ç ä¸å¯¹ï¼Œå°±å¾ˆå®¹æ˜“å½¢æˆè¶Šç•Œè®¿é—®ï¼\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡printfè°ƒè¯•å¤§æ³•æ¥å®ç°ï¼Œæ‰“å°å‡ºæ¯ä¸€å±‚é€’å½’æ—¶çš„åŒºé—´ï¼Œå°±èƒ½å‘ç°å¯èƒ½å­˜åœ¨çš„è¶Šç•Œè®¿é—®é—®é¢˜ã€‚è¿™ç§æ–¹æ³•è¿˜èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£åˆ†æ²»é€’å½’\nprintf(\"[%d,%d][%d,%d]\\n\", begin, mid, mid+1, end);\n\n\n\nå¦‚æœä½ åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œå‘ç°æ§åˆ¶å°çš„å…‰æ ‡é—ªåŠ¨äº†å¾ˆä¹…éƒ½æ²¡æœ‰æ‰“å°å‡ºæ•°æ®ï¼Œé‚£ä¹ˆå¤šåŠæ˜¯ç¨‹åºä¸­æœ‰æ­»å¾ªç¯å’Œbug\n\næ¯”å¦‚ç°åœ¨ï¼Œæˆ‘ä»¬åˆæ­¥æŸ¥çœ‹é€’å½’è°ƒç”¨ä¸­æ˜¯æ²¡æœ‰å‡ºç°è¶Šç•Œçš„ï¼Œä½†æ˜¯ç­”æ¡ˆé”™è¯¯ï¼Œè¿›ä¸€æ­¥è°ƒè¯•å‘ç°ï¼Œtmpæ•°ç»„ä¸­æœ‰åºæ•°å­—ï¼Œå¹¶æ²¡æœ‰è¢«æˆ‘ä»¬å®Œæ•´çš„æ‹·è´å›å»\nåŸæœ¬æ˜¯2 5æ‹·è´å›å»å˜æˆäº†2 2ï¼Œè¿™ä¸ªé—®é¢˜çš„æ ¹æºå¾ˆæ˜æ˜¾æ˜¯memcpyå‡½æ•°è°ƒç”¨æœ‰é—®é¢˜\n\nä¸€çœ‹ï¼Œå“­ç¬‘ä¸å¾—ï¼Œå†™äº†ä¿©sizeofï¼Œé­”æ€”äº†å±äºæ˜¯\n\nä¿®æ”¹ä¹‹åï¼Œæ²¡é—®é¢˜å•¦ï¼\n\n\n4.2é€’å½’æºç è¿™é‡Œç»™å‡ºæœ€ç»ˆçš„æºç ï¼Œä¸€äº›åœ°æ–¹å†™äº†æ³¨é‡Š\n//_ä»£è¡¨è¿™æ˜¯å­å‡½æ•°void _MergeSort(int* a,int* tmp, int begin, int end){\tif (begin &gt;= end){\t\treturn;\t}\tint mid = (begin + end) / 2;\t_MergeSort(a, tmp, begin, mid);\t_MergeSort(a, tmp, mid+1 , end);\t//printf(\"å½’å¹¶[%d,%d][%d,%d]\\n\", begin, mid, mid+1, end);\tint begin1 = begin, end1 = mid ;\tint begin2 = mid+1 , end2 = end;\tint cur = begin;\twhile (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2)\t{\t\t//å–å°çš„æ”¾åˆ°æ–°æ•°ç»„ä¸­\t\tif (a[begin1] &lt; a[begin2]) {\t\t\ttmp[cur++] = a[begin1++];\t\t}\t\telse {\t\t\ttmp[cur++] = a[begin2++];\t\t}\t}\t//ç¬¬ä¸€ä¸ªå¾ªç¯ç»“æŸï¼Œå¹¶ä¸ä»£è¡¨å½’å¹¶å®Œæ¯•ï¼Œå¯èƒ½åªæœ‰ä¸€ä¸ªæ•°ç»„çš„æ•°æ®è·‘å®Œäº†\t//æˆ‘ä»¬éœ€è¦å°†å¦å¤–ä¸€ä¸ªæ•°ç»„çš„æ•°æ®å…¨éƒ¨æ‹·è´åˆ°tmpä¸­ï¼ˆå› ä¸ºå‰©ä¸‹çš„çš„æ•°æ®å·²ç»æœ‰åºï¼‰\twhile (begin1 &lt;= end1) {\t\ttmp[cur++] = a[begin1++];\t}\twhile (begin2 &lt;= end2) {\t\ttmp[cur++] = a[begin2++];\t}\tmemcpy(a+begin,tmp + begin, ((end - begin +1)*sizeof(int)));}//å½’å¹¶æ’åºvoid MergeSort(int* a, int n){\tint* tmp = (int*)malloc(n * sizeof(int));\tif(tmp==NULL){\t\tprintf(\"malloc failed\\n\");\t\texit(0);\t}\t_MergeSort(a, tmp, 0, n-1);\tfree(tmp);\ttmp = NULL;\treturn;}\n\n4.3éé€’å½’å®ç°å½’å¹¶æ’åºçš„éé€’å½’æ— æ³•ç”¨æ ˆæ¥å®ç°ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½æŠŠä¹‹å‰çš„å¤§åŒºé—´å…¨ç»™å‡ºæ ˆäº†ï¼Œå› ä¸ºè¿™äº›åŒºåŸŸè¿˜éœ€è¦åœ¨æœ€åé‡æ–°è¿›è¡Œå½’å¹¶ï¼\n\nåˆ©ç”¨å¾ªç¯æ¥æ§åˆ¶ä¸åŒçš„åŒºé—´ï¼Œç”±å°åˆ°å¤§ï¼Œç›´åˆ°gap=nè·³å‡ºå¾ªç¯\ngapæ˜¯å½’å¹¶æ•°æ®çš„ä¸ªæ•°ï¼Œgap=1ä»£è¡¨1ä¸ªæ•°å½’å¹¶ï¼Œgap=2ä»£è¡¨ä¸¤ä¸¤å½’å¹¶\n\n\næ ¹æ®ä¸Šé¢çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„èŒƒå›´å¾ªç¯\nint gap = 1;while (gap &lt; n){    // é—´è·ä¸ºgapæ˜¯ä¸€ç»„ï¼Œä¸¤ä¸¤å½’å¹¶    for (int i = 0; i &lt; n; i += 2 * gap)    {        int begin1 = i, end1 = i + gap - 1;        //i+gapæ˜¯ä¸ªæ•°ï¼Œå†-1æ˜¯ä¸‹æ ‡        int begin2 = i + gap, end2 = i + 2 * gap - 1;        //i+gapåˆ°i+2gapæ˜¯ä¸ªæ•°ï¼Œå†-1æ˜¯ä¸‹æ ‡                //æ‰“å°è°ƒè¯•å¤§æ³•        printf(\"å½’å¹¶[%d,%d][%d,%d] -- gap=%d\\n\", begin1, end1, begin2, end2, gap);    }    gap *= 2;}\n\nè·‘ä¸€éä¹‹å‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå‘ç°èƒ½æå®šï¼è¿™ä¸å°±å®Œäº‹äº†å—ï¼Ÿ\n\nå¹¶æ²¡æœ‰ï¼è¿™é‡Œgapçš„æ“ä½œéƒ½æ˜¯*2ï¼Œè€Œä¸”æˆ‘ä»¬ç»™çš„æ•°ç»„æ˜¯å¶æ•°ä¸ªï¼Œæ­£å¥½å¯¹çš„ä¸Š\nå¦‚æœæˆ‘ä»¬å†åŠ ä¸€ä¸ªæ•°å‘¢ï¼Ÿç¨‹åºæ‰“å°å‡ºäº†æ¯ä¸€å±‚çš„é€’å½’åŒºé—´ï¼Œä½†æ˜¯æ²¡æœ‰æ‰“å°å‡ºæœ€ç»ˆçš„ç»“æœâ€”â€”å› ä¸ºè¿™é‡Œåœ¨æœ€åfreeçš„æ—¶å€™å‘ç°äº†æ•°ç»„è¶Šç•Œè®¿é—®\n\nå°çŸ¥è¯†ï¼Œæ•°ç»„è¶Šç•Œä¸€èˆ¬éƒ½æ˜¯åœ¨freeçš„æ—¶å€™æ£€æŸ¥åˆ°çš„\n\n\n\n\næ¥ä¸‹æ¥è¦åšçš„äº‹å°±æ˜¯æ§åˆ¶ä¸‹æ ‡åŒºé—´ï¼Œé¿å…å®ƒè¶Šç•Œ\nint begin1 = i, end1 = i + gap - 1;int begin2 = i + gap, end2 = i + 2 * gap - 1;\n\n\n\n\nbegin\nend\n\n\n\ni\ni+gap-1\n\n\ni+gap\ni+2*gap-1\n\n\nä»”ç»†åˆ†æè¿‡åï¼Œå‘ç°å½“gap=2,i=8çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°+gapä¹‹åè¶Šç•Œçš„æƒ…å†µ\n\nè€Œä¼šå‡ºç°è¶Šç•Œæƒ…å†µçš„ï¼Œä¸æ­¢æœ‰end2ï¼Œend1å’Œbegin2éƒ½å¯èƒ½ä¼šå‡ºç°\næˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠè¶Šç•Œçš„ä¸‹æ ‡ä¿®æ­£ä¸ºä¸è¶Šç•Œçš„ä¸‹æ ‡\n\nend1è¶Šç•Œï¼Œä¿®æ­£ä¸ºä¸è¶Šç•Œå³å¯\nbegin2å’Œend2éƒ½è¶Šç•Œï¼Œä¿®æ­£ä¸ºéæ³•åŒºé—´begin2&gt;end2\nbegin2ä¸è¶Šç•Œï¼Œend2è¶Šç•Œï¼Œä¿®æ­£end2å³å¯\n\nä¿®æ­£ä¸‹æ ‡åï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºå·²ç»æ­£å¸¸æ’åºå‡ºäº†åºåˆ—\nè™½ç„¶æ‰“å°å‡ºæ¥çš„èŒƒå›´è¿˜æ˜¯æœ‰è¶Šç•Œçš„ä¸‹æ ‡ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯begin&gt;endçš„éæ³•åŒºé—´ï¼Œä¸ç¬¦åˆç¨‹åºè¿è¡Œçš„æ¡ä»¶ï¼Œå°±ä¸ä¼šäº§ç”Ÿè¶Šç•Œ\n\n4.3.1 æ¡ä»¶æ–­ç‚¹è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéªšæ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬å·²ç»çŸ¥é“äº†æ˜¯8-9çš„ä¸‹æ ‡è¶Šç•Œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œæ¥ç›´æ¥F5è·³åˆ°é‚£ä¸ªæƒ…å†µï¼Œè€Œä¸éœ€è¦ç–¯ç‹‚æŒ‰F10\n// æ¡ä»¶æ–­ç‚¹ï¼Œç”¨äºè°ƒè¯•if (begin1 == 8 &amp;&amp; end1 == 9 &amp;&amp; begin2 == 10 &amp;&amp; end2 == 11){\tint x = 0;}\n\n\nè¿™æ ·æˆ‘ä»¬çš„éé€’å½’å®ç°ä¹Ÿæå®šå•¦ï¼\n//éé€’å½’void MergeSortNonR(int* a, int n){\tint* tmp = (int*)malloc(sizeof(int) * n);\tint gap = 1;\twhile (gap &lt; n)\t{\t\t// é—´è·ä¸ºgapæ˜¯ä¸€ç»„ï¼Œä¸¤ä¸¤å½’å¹¶\t\tfor (int i = 0; i &lt; n; i += 2 * gap)\t\t{\t\t\tint begin1 = i, end1 = i + gap - 1;//i+gapæ˜¯ä¸ªæ•°ï¼Œ-1æ˜¯ä¸‹æ ‡\t\t\tint begin2 = i + gap, end2 = i + 2 * gap - 1;//i+gapåˆ°i+2gapæ˜¯ä¸ªæ•°ï¼Œ-1æ˜¯ä¸‹æ ‡\t\t\tif (end1 &gt;= n) {\t\t\t\tend1 = n - 1;\t\t\t}\t\t\tif(begin2&gt;=n){\t\t\t\tbegin2 = n;\t\t\t\tend2 = n - 1;\t\t\t}\t\t\t\t\t\tif (begin2 &lt; n &amp;&amp; end2 &gt;= n) {\t\t\t\tend2 = n - 1;\t\t\t}\t\t\t//printf(\"å½’å¹¶[%d,%d][%d,%d] -- gap=%d\\n\", begin1, end1, begin2, end2, gap);\t\t\tint index = i;\t\t\twhile (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2)\t\t\t{\t\t\t\tif (a[begin1] &lt; a[begin2])\t\t\t\t\ttmp[index++] = a[begin1++];\t\t\t\telse\t\t\t\t\ttmp[index++] = a[begin2++];\t\t\t}\t\t\twhile (begin1 &lt;= end1)\t\t\t\ttmp[index++] = a[begin1++];\t\t\twhile (begin2 &lt;= end2)\t\t\t\ttmp[index++] = a[begin2++];\t\t}\t\tmemcpy(a, tmp, n * sizeof(int));\t\tgap *= 2;\t}\tfree(tmp);}\n\n4.4å½’å¹¶æ’åºçš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦\næ—¶é—´å¤æ‚åº¦ï¼šO(N*logN)\nç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œåˆ›å»ºæ•°ç»„çš„æ¶ˆè€—\n\n\n5.è®¡æ•°æ’åºè®¡æ•°æ’åºçš„åŸºæœ¬æ€è·¯ï¼šåˆ©ç”¨æ•°ç»„çš„ä¸‹æ ‡ä½œä¸ºæ˜ å°„ï¼Œéå†åˆ°xï¼Œåœ¨æ•°ç»„çš„xä¸‹æ ‡å¤„++ä¸€æ¬¡ã€‚æœ€åå†ä¾ç…§ä¸‹æ ‡é¡ºåºå°†ä¹‹å‰éå†åˆ°çš„æ•°å€’å‡ºæ¥ï¼Œå°±å½¢æˆäº†æ­£åºåºåˆ—ã€‚\næˆ‘åœ¨ç½‘ä¸Šæ‰¾æ¥äº†ä¸€ä¸ªå¾ˆæ£’çš„åŠ¨å›¾ï¼ˆè¿™ä¸ªå¥½åƒåœ¨å¾ˆå¤šåšå®¢é‡Œé¢éƒ½æœ‰ğŸ˜‚ï¼‰\n\n\nè¿™ä¸ªæ’åºçš„æ€è·¯å°±ä¸éš¾äº†ï¼Œä½†æœ‰ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹\n\nå‡è®¾æˆ‘ä»¬çš„åºåˆ—æ˜¯ä»300å¼€å§‹ï¼Œè€Œä¸æ˜¯ä»0å¼€å§‹ï¼Œé‚£ä¹ˆå¼€è¾Ÿä¸€ä¸ª301ä¸ªæ•°çš„æ•°ç»„æ˜¾ç„¶ä¼šæµªè´¹300ä¹‹å‰çš„ä¸‹æ ‡ï¼ˆå› ä¸ºå¹¶æ²¡æœ‰å€¼ï¼‰\nè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºæ•°ç»„çš„èŒƒå›´ï¼Œå¼€è¾Ÿä¸€ä¸ªå¯¹åº”èŒƒå›´é•¿åº¦çš„æ•°ç»„ï¼Œå†åˆ©ç”¨ç›¸å¯¹æ˜ å°„çš„æ–¹å¼ï¼Œæ¥è¿›è¡Œè®¡æ•°\n\næœ€åçš„ä»£ç å¦‚ä¸‹\nvoid CountSort(int* a, int n){\tint min = a[0], max = a[0];\tfor (int i = 1; i &lt; n; ++i)\t{\t\tif (a[i] &lt; min)\t\t\tmin = a[i];\t\tif (a[i] &gt; max)\t\t\tmax = a[i];\t}\tint range = max - min + 1;\tint* count = (int*)malloc(sizeof(int) * range);\tassert(count);\tmemset(count, 0, sizeof(int) * range);\t// è®¡æ•°\tfor (int i = 0; i &lt; n; ++i)\t{\t\tcount[a[i] - min]++;\t}\t// æ’åº\tint j = 0;\tfor (int i = 0; i &lt; range; ++i)\t{\t\twhile (count[i]--)\t\t{\t\t\ta[j++] = i + min;\t\t}\t}}\n\n5.1è®¡æ•°æ’åºçš„ç‰¹æ€§\næ—¶é—´å¤æ‚åº¦ï¼šO(range+N)\nç©ºé—´å¤æ‚åº¦ï¼šO(range)\n\nè®¡æ•°æ’åºé€‚ç”¨äºèŒƒå›´é›†ä¸­çš„æ•°ï¼Œä¸ç„¶ä¼šäº§ç”Ÿå¾ˆå¤§çš„ç©ºé—´æµªè´¹\nè®¡æ•°æ’åºå¯ä»¥æ’åºå¸¦è´Ÿæ•°çš„åºåˆ—ï¼ŒåŒæ ·æ˜¯é€šè¿‡æ˜ å°„çš„æ–¹å¼\nä½†æ˜¯è®¡æ•°æ’åºåªèƒ½æ’åºæ•´å‹æ•°æ®ï¼Œæµ®ç‚¹ç±»å‹æ˜¯æä¸å®šçš„\n\nçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å…«å¤§æ’åºå°±å·²ç»è®²è§£å®Œæ¯•å•¦ï¼\nä¸çŸ¥é“æˆ‘è®²è§£çš„å¤Ÿä¸å¤Ÿæ¸…æ¥šå‘¢ï¼Ÿ\n\nä¸‹é¢è¿˜æœ‰ä¸€ä¸ªå°ç‚¹ï¼Œå°±æ˜¯å…³äºæ’åºç®—æ³•çš„ç¨³å®šæ€§\n6.æ’åºç®—æ³•çš„ç¨³å®šæ€§ä¼°è®¡å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ï¼Œéƒ½å¯¹è¿™ä¸ªâ€œç¨³å®šæ€§â€æœ‰é”™è¯¯çš„ç†è§£\næˆ‘æœ¬æ¥ä»¥ä¸ºï¼Œç¨³å®šæ€§ä»£è¡¨çš„æ˜¯æ’åºç®—æ³•çš„æ—¶é—´æ³¢åŠ¨å¤§ä¸å¤§\nå®é™…ä¸Šçš„ç¨³å®šæ€§ï¼Œæ˜¯ç®—æ³•å¯¹äºæŸä¸€ä¸ªæ•°çš„å¤„ç†å¥½ä¸å¥½\næ¯”å¦‚ä¸‹å›¾ï¼Œå‡è®¾å¤§å®¶åœ¨è€ƒè¯•ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯äº¤å·çš„é¡ºåºï¼Œæˆ‘ä»¬å‘ç°ç‹èˆå’Œæå››çš„æˆç»©ç›¸åŒï¼Œä½†æ˜¯æå››å…ˆäº¤çš„å·ã€‚å¯¹äºè¯„åˆ¤æ¥è¯´ï¼Œå½“ç„¶æ˜¯å…ˆäº¤å·ä¸”åˆ†é«˜çš„åŒå­¦ç‰›é€¼ä¸€ç‚¹\næ‰€ä»¥ä¾ç…§åˆ†æ•°æ’åºçš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠæå››æ’åœ¨ç‹èˆä¹‹å‰\n \nä½†æœ‰äº›ç®—æ³•åœ¨æ’åºçš„æ—¶å€™ï¼Œå°±åšä¸åˆ°è¿™ä¸€ç‚¹\nè¿™é‡Œå¯¹ç›´æ¥é€‰æ‹©æ’åºåšä¸€ä¸ªç®€å•çš„è§£é‡Š\n\nå› ä¸ºä¸¤ä¸ª3çš„ä½ç½®è°ƒæ¢ï¼Œå°±å¯¼è‡´æ’åºä¸å¤Ÿç¨³å®š\nå®é™…ä¸Šï¼Œæ‰€æœ‰éœ€è¦è¿›è¡Œé€‰æ‹©äº¤æ¢çš„æ’åºéƒ½ä¸å¤Ÿç¨³å®š\n\nä½†æ˜¯å†’æ³¡æ’åºåœ¨äº¤æ¢çš„æ—¶å€™æ˜¯ä¸¥æ ¼ä¿è¯å¤§çš„æ•°åœ¨åå¤´ï¼Œç›¸ç­‰çš„æ•°ä¸äº¤æ¢çš„æ€è·¯ï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„\n\n6.1 ç¨³å®šæ€§è¡¨æ ¼\n\n\næ’åºç®—æ³•\nç¨³å®šæ€§\næ’åºç®—æ³•\nç¨³å®šæ€§\n\n\n\nç›´æ¥æ’å…¥\nç¨³å®š\nå¸Œå°”\nä¸ç¨³å®š\n\n\nå†’æ³¡\nç¨³å®š\nç›´æ¥é€‰æ‹©\nä¸ç¨³å®š\n\n\nå½’å¹¶æ’åº\nç¨³å®š\nå †æ’åº\nä¸ç¨³å®š\n\n\n-\n-\nå¿«é€Ÿæ’åº\nä¸ç¨³å®š\n\n\n-\n-\nè®¡æ•°æ’åº\nä¸ç¨³å®š\n\n\n6.2 æ—¶é—´å¤æ‚åº¦è¡¨æ ¼\n7.åˆ©ç”¨clockå‡½æ•°æŸ¥çœ‹æ’åºè€—æ—¶æ’åºç®—æ³•å†™å®Œåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨clockå‡½æ•°æ¥æŸ¥çœ‹æ¯ä¸€ä¸ªæ’åºçš„è€—æ—¶\nå…ˆåˆ©ç”¨srandå’Œtimeå‡½æ•°æ¥åˆ›å»ºéšæœºæ•°æ•°ç»„ï¼Œåœ¨è°ƒç”¨æ¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æŸ¥çœ‹å®ƒä»¬æ’åºçš„è€—æ—¶\n\nç”±äºä»£ç è¿‡é•¿ï¼Œè¿™é‡Œåªç»™å‡ºæŸä¸€ä¸ªæ’åºçš„è®¡æ—¶ä»£ç ï¼Œå…¶ä»–å°±CVä¸€ä¸‹å°±OKäº†\nsrand(time(0));const int N = 10000;int* a1 = (int*)malloc(sizeof(int) * N);for (int i = 0; i &lt; N; ++i){\ta1[i] = rand();//ç”Ÿæˆéšæœºæ•° æ•°ç»„}int begin1 = clock();//è¯»å–ç³»ç»Ÿæ—¶é’ŸInsertSort(a1, N);int end1 = clock();//å†è¯»å–ç³»ç»Ÿæ—¶é’Ÿ//äºŒè€…ç›¸å‡å¾—å‡ºè¯¥å‡½æ•°è¿è¡Œæ—¶é•¿printf(\"InsertSort:%d\\n\", end1 - begin1);free(a1);\n\nè¿è¡Œç»“æœï¼š\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œæ’åºçš„ç»å¤§æ•°çŸ¥è¯†ç‚¹å°±è®²è§£å®Œæ¯•å•¦ï¼\næœ¬ç¯‡åšå®¢ç”»äº†å¾ˆå¤šå›¾ï¼Œè¿˜æŒºä¸å®¹æ˜“çš„ï¼Œè¿˜è¯·å¤§å®¶ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼\n\nç‰¹åˆ«æ˜¯é‚£ä¸¤ä¸ªçœ‹èµ·æ¥å¾ˆç®€å•çš„åŠ¨å›¾ï¼Œå®é™…ä¸Šéº»çƒ¦çš„å¾ˆ\n\nçƒçƒäº†ï¼Œç‚¹ä¸ªèµå‘ï¼\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","ç®—æ³•","æ’åº"]},{"title":"ã€C++ã€‘å¹¶æŸ¥é›†","url":"/2022/12/01/note_data_structure/15%E5%B9%B6%E6%9F%A5%E9%9B%86/","content":"å¹¶æŸ¥é›†è¿™ä¸ªæ•°æ®ç»“æ„æœ¬èº«å¹¶ä¸éš¾ï¼Œå…¶ä¸»è¦æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç¼–å†™å›¾çš„ä»£ç ï¼Œå’Œä¸€äº›OJé¢˜\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯å¹¶æŸ¥é›†ï¼Ÿå¹¶æŸ¥é›†æ˜¯å¤šä¸ªç‹¬ç«‹é›†åˆçš„åˆé›†ï¼Œç”¨äºè¡¨ç¤ºæ•°æ®ä¹‹é—´çš„å…³ç³»ã€‚\næ¯”è¾ƒç”ŸåŠ¨çš„ä¾‹å­ï¼Œå°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„æœ‹å‹åœˆï¼ˆä¸æ˜¯wxçš„é‚£ä¸ªå•Šï¼‰\n\nå¼ ä¸‰å’Œæå››æ˜¯å¥½æœ‹å‹ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ„æˆäº†ä¸€ä¸ªé›†åˆA\nç‹èˆå’Œç‹é™†æ˜¯å¥½æœ‹å‹ï¼Œé‚£ä¹ˆä»–ä»¬ä¹Ÿæ„æˆäº†ä¸€ä¸ªé›†åˆB\næ­¤æ—¶ï¼Œç‹èˆçªç„¶è®¤è¯†äº†æå››ï¼Œè¿™æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠAå’ŒBåˆå¹¶æˆä¸€ä¸ªé›†åˆ\n\næ¨è€Œå¹¿ä¹‹ï¼Œä¸€ä¸ªå¹¶æŸ¥é›†ä¸­å¯ä»¥æœ‰å¤šä¸ªè¿™æ ·çš„é›†åˆï¼Œå¤šä¸ªæœ‹å‹åœˆã€‚\n\nå¹¶æŸ¥é›†ä¸­çš„æ¯ä¸€ä¸ªé›†åˆæ˜¯ç”¨å¤šå‰æ ‘æ¥è¡¨ç¤ºçš„\n\n2.æ€è·¯å¹¶æŸ¥é›†çš„æ€è·¯å¹¶ä¸éš¾ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆéœ€è¦åœ¨å¦å¤–çš„åœ°æ–¹ç®¡ç†ç¼–å·ï¼‰åˆ›å»ºä¸€ä¸ªå¹¶æŸ¥é›†\nä¸‹æ ‡å³ä¸ºæ•°æ®çš„ç¼–å·\n\nè®¾å®šå…ƒç´ çš„åˆå§‹å€¼éƒ½æ˜¯-1\nå¦‚æœä¸‹æ ‡1å’Œ3ä¸ºä¸€ä¸ªé›†å’Œï¼Œé‚£å°±æŠŠ3çš„å…ƒç´ ï¼ˆåˆå§‹å€¼-1ï¼‰åŠ åˆ°1å¤„ï¼Œå³1çš„å…ƒç´ ä¸º-2ï¼›å†æŠŠ3çš„å…ƒç´ è®¾ç½®ä¸º1çš„ä¸‹æ ‡ï¼Œå³3çš„å…ƒç´ ä¸º1\nä¾æ­¤ç±»æ¨ï¼Œæœ€ç»ˆåªè¦ä¸‹æ ‡æ‰€å¯¹åº”å…ƒç´ ä¸ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸‹æ ‡å°±æ˜¯ä¸€ä¸ªé›†å’Œçš„æˆå‘˜\nå¦‚æœä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªé›†åˆçš„æ ¹ï¼Œä¸”å…ƒç´ ä¸ºè¿™ä¸ªé›†å’Œä¸­æˆå‘˜çš„ä¸ªæ•°ï¼ˆç»å¯¹å€¼ï¼‰\n\nå¦‚å›¾æ‰€ç¤ºï¼Œä¸‹æ ‡678æ‰€å¯¹åº”å…ƒç´ ä¸º0ï¼Œä»£è¡¨å®ƒä»¬å±äºä»¥ä¸‹æ ‡0ä¸ºæ ¹çš„ä¸€ä¸ªé›†åˆã€‚è€Œä¸‹æ ‡0å¤„çš„å…ƒç´ ä¸º-4ï¼Œä»£è¡¨è¿™ä¸ªé›†åˆé‡Œé¢æœ‰4ä¸ªå…ƒç´ \n\n2.1 åˆå¹¶é›†åˆå¦‚æœæˆ‘ä»¬éœ€è¦åˆå¹¶ä¸€ä¸ªé›†åˆï¼Œä»¥ä¸Šå›¾ä¸­çš„0é›†åˆå’Œ1é›†åˆä¸ºä¾‹ã€‚æˆ‘ä»¬åªéœ€è¦å°†1é›†åˆçš„å…ƒç´ -3åŠ åˆ°0é›†åˆä¸Šï¼Œå†æŠŠ1é›†åˆçš„å…ƒç´ æ”¹æˆ0å³å¯\næ­¤æ—¶çš„æ ‘å°±ä¼šæ˜¯è¿™æ ·çš„ğŸ‘‡\n\n2.2 å‹ç¼©è·¯å¾„å½“èŠ‚ç‚¹å¾ˆå¤šï¼Œé›†åˆå¯èƒ½ä¼šå‡ºç°è·¯å¾„é•¿åº¦è¿‡å¤§çš„æƒ…å†µã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œè·¯å¾„çš„å‹ç¼©\nå…¶æ–¹æ³•å¾ˆç®€å•ã€‚éå†æ•´ä¸ªå¹¶æŸ¥é›†ï¼Œå°†åŒä¸€é›†åˆçš„å­èŠ‚ç‚¹æ”¹æˆç›¸åŒçš„çˆ¶äº²å³å¯\n\nè¿™æ ·åœ¨å‘ä¸Šæ‰¾é›†åˆçš„æ ¹æ—¶ï¼Œæ— é¡»è·³è½¬å¤šæ¬¡ï¼Œä¸€æ¬¡å°±èƒ½æ‰¾åˆ°ã€‚\nä½†ç”±äºå¹¶æŸ¥é›†çš„è®¿é—®æ˜¯ä¾é æ•°ç»„ä¸‹æ ‡å®ç°çš„éšæœºè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œåªæœ‰æ•°æ®æ ·æœ¬é‡æå¤§çš„æ—¶å€™ï¼Œè¿™ä¹ˆåšæ‰èƒ½æœ‰æ•ˆæœ\n\n3.ä»£ç ç›¸æ¯”äºå…¶ä»–æ•°æ®ç»“æ„å¤æ‚çš„å®ç°ï¼Œå¹¶æŸ¥é›†çš„å®ç°å°±ç®€å•å¤šäº†ã€‚ä¸»è¦çš„å‡½æ•°åªæœ‰å‡ ä¸ªï¼Œå¯ä»¥é€šè¿‡å°è£…vectoræ¥å®ç°\nclass UnionFindSet {public:\tUnionFindSet(const int sz)\t\t:_set(sz,-1)//è°ƒç”¨vectoræ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–szä¸ª-1\t{}\tvoid Union(int x, int y)//è®¾ç½®xå’Œyä¸ºä¸€ä¸ªé›†åˆ\t{\t\tint r1 = FindRoot(x);\t\tint r2 = FindRoot(y);\t\tif (r1 != r2)//ä¸åœ¨ä¸€ä¸ªé›†å’Œä¸­\t\t{\t\t\t_set[r1] += _set[r2];\t\t\t_set[r2] = r1;\t\t}\t}\tint FindRoot(int n)//æ‰¾è¿™ä¸ªé›†åˆçš„æ ¹\t{\t\twhile (_set[n] &gt;= 0)\t\t{\t\t\tn = _set[n];\t\t}\t\treturn n;//è´Ÿæ•°çš„æ—¶å€™ä¸ºæ ¹\t}\tbool isUnion(int x,int y)//åˆ¤æ–­æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­\t{\t\treturn FindRoot(x) == FindRoot(y);\t}\tint UnionSZ()//è¿”å›æœ‰å‡ ä¸ªé›†åˆ\t{\t\tint count = 0;\t\tfor (int i = 0; i &lt; _set.size(); i++)\t\t{\t\t\tif (_set[i] &lt; 0)\t\t\t{\t\t\t\tcount++;\t\t\t}\t\t}\t\treturn count;\t}private:\tvector&lt;int&gt; _set;//ç”¨æ¥å­˜æ”¾å¯¹åº”å…³ç³»};\n\nè¿™é‡Œæ²¡æœ‰å†™å‹ç¼©è·¯å¾„çš„ä»£ç ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªéå†æå®šçš„äº‹ğŸ˜‚\n4.OJé¢˜4.1 å‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡\nå‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡ \n\n\næœ‰äº†å¹¶æŸ¥é›†ï¼Œè¿™é“é¢˜å°±éå¸¸ç®€å•ã€‚æœ€é‡è¦çš„æ˜¯æ€è·¯ã€‚æˆ‘ä»¬æ— é¡»ç°åœºé€ ä¸€ä¸ªè½®å­ï¼Œåªéœ€è¦å†™å¥½æ‰¾æ ¹å‡½æ•°ï¼Œç”¨ä¸€ä¸ªæ•°ç»„å°±èƒ½å®ç°ä¸€ä¸ªç®€å•çš„å¹¶æŸ¥é›†\nclass Solution {public:    int FindRoot(const vector&lt;int&gt;&amp; v,int n)    {        int prev = n;//åˆå§‹ä¸‹æ ‡        while(v[prev]&gt;=0)//å®ƒçš„çˆ¶äº²ä¸‹æ ‡        {            prev=v[prev];//å¦‚æœä¸ä¸ºè´Ÿæ•°ï¼Œé‚£å°±è¿˜æ˜¯éœ€è¦å¾€å‰æ‰¾        }        return prev;    }    int findCircleNum(vector&lt;vector&lt;int&gt;&gt;&amp; isConnected)     {        vector&lt;int&gt; v(isConnected.size(),-1);        for(int i=0;i&lt;isConnected.size();i++)        {            for(int j=0;j&lt;isConnected[i].size();j++)            {                if(isConnected[i][j]==1)//ä¸º1ä»£è¡¨æ˜¯ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´                 {                    int root1 = FindRoot(v,i);                    int root2 = FindRoot(v,j);                    if(root1!=root2)                    {                        v[root1] += v[root2];                        v[root2] = root1;                    }                }            }        }        int count = 0;        for(int i=0;i&lt;v.size();i++)        {            if(v[i]&lt;0)            {                count++;            }        }        return count;    }};\n\n\n4.2 ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§\n990.ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§\n\n\nè¿™é“é¢˜å’Œä¸Šé¢é‚£ä¸€é“å·®ä¸å¤šï¼Œåªä¸è¿‡æŠŠçœä»½æ¢æˆäº†å­—æ¯ä¹‹é—´çš„å…³ç³»\nclass Solution {public:    int FindRoot(const vector&lt;int&gt;&amp; v,int n)    {        int prev = n;//åˆå§‹ä¸‹æ ‡        while(v[prev]&gt;=0)//å®ƒçš„çˆ¶äº²ä¸‹æ ‡        {            prev=v[prev];//å¦‚æœä¸ä¸ºè´Ÿæ•°ï¼Œé‚£å°±è¿˜æ˜¯éœ€è¦å¾€å‰æ‰¾        }        return prev;    }    bool equationsPossible(vector&lt;string&gt;&amp; equations) {        vector&lt;int&gt; v(26,-1);//å› ä¸ºé¢˜ç›®ç»™çš„éƒ½æ˜¯å°å†™å­—æ¯ï¼Œç›´æ¥å»ºç«‹26ä¸ªå°å†™å­—æ¯çš„æ˜ å°„è¡¨        for(int i=0;i&lt;equations.size();i++)        {            int root1 = FindRoot(v,equations[i][0]-'a');//ç¬¬ä¸€ä¸ªå­—æ¯            int root2 = FindRoot(v,equations[i][3]-'a');//ç¬¬äºŒä¸ªå­—æ¯            if(equations[i][1]=='=')//ä»£è¡¨ç­‰äº            {                if(root1!=root2)                {//è®¾ç½®ä¸ºä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´                     v[root1] += v[root2];                    v[root2] = root1;                }            }            else//ä¸ç­‰äº            {                if(root1==root2)                {                    //å¦‚æœä¸ç­‰äºçš„åŒæ—¶ï¼Œæ ¹è¿˜ç›¸åŒ                    //è¯´æ˜æ˜¯åŒä¸€ä¸ªé›†åˆï¼Œä¸ç¬¦åˆé¢˜æ„                    return false;                }            }        }        //è¿˜éœ€è¦éå†ç¬¬äºŒéï¼Œé¿å…æ¼ç½‘ä¹‹é±¼        for(int i=0;i&lt;equations.size();i++)        {            int root1 = FindRoot(v,equations[i][0]-'a');//ç¬¬ä¸€ä¸ªå­—æ¯            int root2 = FindRoot(v,equations[i][3]-'a');//ç¬¬äºŒä¸ªå­—æ¯            if(equations[i][1]=='!')//ä¸ç­‰äº            {                if(root1==root2)                {                    //å¦‚æœä¸ç­‰äºçš„åŒæ—¶ï¼Œæ ¹è¿˜ç›¸åŒ                    //è¯´æ˜æ˜¯åŒä¸€ä¸ªé›†åˆï¼Œä¸ç¬¦åˆé¢˜æ„                    return false;                }            }        }        return true;    }};\n\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["C++","æ•°æ®ç»“æ„","å›¾"]},{"title":"ã€C++ã€‘å›¾","url":"/2022/12/06/note_data_structure/16%E5%9B%BE/","content":"æœ¬æ–‡åŒ…å«äº†å›¾çš„åŸºæœ¬æ¦‚å¿µ\n\n\n1.ç›¸å…³æ¦‚å¿µ1.1 æ— &#x2F;æœ‰å‘æ— å‘å›¾ï¼šæ¯ä¸€ä¸ªé¡¶ç‚¹ä¹‹é—´çš„è¿çº¿æ²¡æœ‰æ–¹å‘\næœ‰å‘å›¾ï¼šè¿çº¿æœ‰æ–¹å‘ï¼ˆç±»ä¼¼ç¦»æ•£æ•°å­¦çš„äºŒå…ƒå…³ç³» &lt;A,B&gt;ä»£è¡¨ä»Aåˆ°Bçš„è¾¹ï¼Œæœ‰æ–¹å‘ï¼‰\n&lt;A,B&gt;ä¸­Aä¸ºå§‹ç‚¹ï¼ŒBä¸ºç»ˆç‚¹\n\nåœ¨æ— å‘å›¾ä¸­ï¼Œ(V,U)å’Œ(U,V)æ˜¯åŒä¸€æ¡è¾¹\n1.2 é¡¶ç‚¹å’Œè¾¹å›¾ä¸­çš„èŠ‚ç‚¹å«åšé¡¶ç‚¹ã€‚\né¡¶ç‚¹ä¹‹é—´çš„çº¿æ¡å°±æ˜¯è¾¹ï¼Œè¡¨ç¤ºäº‹ç‰©ä¸äº‹ç‰©ä¹‹é—´çš„å…³ç³»ã€‚\n\n1.3 è‡ªå›è·¯&#x2F;å¤šé‡å›¾\n1.4 å®Œå…¨å›¾å›¾ä¸­æ¯ä¸€ä¸ªé¡¶ç‚¹éƒ½æœ‰è¿çº¿ï¼ˆæœ‰æœ€å¤šçš„è¾¹æ•°ï¼‰å°±å«åšå®Œå…¨å›¾\nè®¾é¡¶ç‚¹ä¸ºNä¸ª\n\næ— å‘å®Œå…¨å›¾ä¸­n(n-1)/2æ¡è¾¹\næœ‰å‘å®Œå…¨å›¾ä¸­n(n-1)æ¡è¾¹\n\n1.5 é‚»æ¥ä¸å…³è”æ— å‘å›¾ä¸­(u,v)æ˜¯ä¸€æ¡è¾¹\n\né¡¶ç‚¹uå’Œvé‚»æ¥\nè¾¹(u,v)ä¸é¡¶ç‚¹uå’Œvç›¸å…³è”\n\n1.6 å­å›¾\nå›¾ä¸­G3æ˜¯G1çš„å­å›¾ï¼ŒG4æ˜¯G2çš„å­å›¾\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯å­å›¾æ˜¯åŸå›¾çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬é¡¶ç‚¹ã€è¾¹ï¼ˆæ³¨æ„æ–¹å‘ï¼‰éƒ½æ˜¯åŸå›¾ä¸­çš„ä¸€éƒ¨åˆ†\n1.6 è·¯å¾„è·¯å¾„æ˜¯é¡¶ç‚¹åºåˆ—\nè·¯å¾„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ç»è¿‡çš„è¾¹\n\nè·¯å¾„é•¿åº¦ï¼šè·¯å¾„ä¸Šè¾¹çš„æ•°ç›®\nç®€å•è·¯å¾„ï¼šé™¤èµ·ç‚¹ã€ç»ˆç‚¹å¯ä»¥ç›¸åŒå¤–ï¼Œè·¯å¾„ä¸­å…¶ä½™é¡¶ç‚¹ä¸ç›¸åŒ\nå›è·¯ï¼šèµ·ç‚¹å’Œé‡ç‚¹ç›¸åŒçš„ç®€å•è·¯å¾„\n\n1.7 è¿é€šå›¾ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´åªè¦æœ‰è·¯å¾„ï¼Œé‚£å°±æ˜¯è¿é€šçš„\n\nè¿é€šå›¾ï¼šæ— å‘å›¾ä¸­ä»»æ„ä¸¤ç‚¹ä¹‹é—´éƒ½æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªè¿é€šå›¾\nè¿é€šåˆ†é‡ï¼šæ— å‘å›¾çš„æå¤§è¿é€šå­å›¾\n\n\næ³¨æ„ï¼Œè™½ç„¶è¿é€šåˆ†é‡è¢«ç§°ä¸ºâ€œæå¤§è¿é€šå­å›¾â€ï¼Œä½†å®ƒå¹¶ä¸æ˜¯èŠ‚ç‚¹æœ€å¤šçš„å“ªä¸€ä¸ªã€‚æ¯”å¦‚ä¸Šå›¾ä¸­çš„G2å’ŒG3éƒ½æ˜¯æå¤§è¿é€šå­å›¾ã€‚\n\n\nå¼ºè¿é€šå›¾ï¼šæœ‰å‘å›¾ä¸­ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´Uå’ŒVä¹‹é—´æœ‰Uåˆ°Vçš„è·¯å¾„ï¼Œé‚£å°±ä¸€å®šæœ‰ä»Våˆ°Uçš„è·¯å¾„\nå¼ºè¿é€šåˆ†é‡ï¼šæœ‰å‘å›¾çš„æå¤§è”é€šå­å›¾\n\n\nå¼ºè¿é€šå›¾G1çš„æå¤§å¼ºè¿é€šåˆ†é‡å°±æ˜¯å®ƒè‡ªå·±ï¼ˆåªæœ‰éå¼ºè¿é€šå›¾æ‰æœ‰å¤šä¸ªå¼ºè¿é€šåˆ†é‡ï¼‰\nä¸Šå›¾ä¸­G2å°±ä¸æ˜¯å¼ºè”é€šå›¾ï¼Œå› ä¸º4èŠ‚ç‚¹æ²¡æœ‰å…¥è¾¹ï¼ˆä¹Ÿå°±æ²¡æœ‰èŠ‚ç‚¹èƒ½åˆ°4ï¼‰\n\nç¬¬ä¸‰å›¾çš„ä¸ŠåŠéƒ¨åˆ†å¹¶éG1çš„å¼ºè¿é€šåˆ†é‡ï¼Œä½†æ˜¯æ˜¯G2çš„å¼ºåŠ›è¿é€šåˆ†é‡ã€‚\nåŒæ—¶ï¼Œå•ç‹¬çš„4é¡¶ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼ˆå•ç‹¬é¡¶ç‚¹éƒ½æ˜¯ï¼‰\n\n1.7 é¡¶ç‚¹çš„åº¦åº¦ï¼šä¸è¯¥é¡¶ç‚¹ç›¸å…³è”çš„è¾¹çš„æ•°ç›®\n\nå…¥åº¦ï¼šå°„å…¥vçš„è¾¹çš„æ•°ç›®\nå‡ºåº¦ï¼šä»vå°„å‡ºå»çš„è¾¹çš„æ•°ç›®\n\n1.8 ç”Ÿæˆæ ‘ç”Ÿæˆæ ‘åŒ…å«å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä½†æ˜¯åªæœ‰è¶³å¤Ÿæ„æˆä¸€é¢—æ ‘çš„n-1æ¡è¾¹\n\nå› ä¸ºn-1æ¡è¾¹å†åŠ ä¸Šä¸€æ¡å°±ä¼šæ„æˆå›è·¯\nç”Ÿæˆæ ‘ä¸­ä¸åŒ…å«å›è·¯\n\n1.9 ç½‘ç»™å›¾ä¸­çš„æ¯æ¡è¾¹éƒ½æ·»åŠ ä¸Šæƒå€¼ï¼Œå¸¦æƒçš„å›¾ç§°ä¸ºç½‘\n2.è¡¨ç¤ºæ³•2.1 é‚»æ¥çŸ©é˜µç”¨äºŒç»´æ•°ç»„æ¥è¡¨ç¤ºæ¯ä¸ªé¡¶ç‚¹ä¹‹é—´çš„å…³ç³»ï¼ˆçŸ©é˜µï¼‰\n\nä¼˜ç¼ºç‚¹ä¼˜ç‚¹\n\nä¾¿äºåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®ä¸‹æ ‡åˆ¤æ–­ï¼ŒO(1)\nä¾¿äºè®¡ç®—å„ä¸ªé¡¶ç‚¹çš„åº¦\næ— å‘å›¾ï¼šç¬¬iè¡Œå…ƒç´ ä¹‹å’Œå°±æ˜¯é¡¶ç‚¹içš„åº¦ï¼ˆå‰ææ˜¯ç”¨1æ¥è¡¨ç¤ºï¼‰\næœ‰å‘å›¾ï¼šç¬¬iè¡Œå…ƒç´ ä¹‹å’Œä¸ºé¡¶ç‚¹içš„å‡ºåº¦ï¼›ç¬¬iåˆ—ä¸ºå…¥åº¦\n\n\n\nç¼ºç‚¹\n\nå¦‚æœèŠ‚ç‚¹å¤šï¼Œè¾¹å°‘ï¼Œå°±ä¼šå‡ºç°ç©ºé—´æµªè´¹\næ— æ³•æ–¹ä¾¿åœ°æ‰¾åˆ°ä¸€ä¸ªé¡¶ç‚¹å’Œé‚£ä¸€æ¡è¾¹ç›¸è¿ï¼ˆéœ€è¦éå†ï¼‰\nå¯¹äºæ— å‘å›¾ï¼Œä¹Ÿä¼šå‡ºç°ç©ºé—´æµªè´¹\n\n2.2 é‚»æ¥è¡¨é‚»æ¥è¡¨æœ‰äº›ç±»ä¼¼äºå“ˆå¸Œè¡¨çš„æ‹‰é“¾æ³•ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹åé¢è·Ÿç€ä¸€ä¸ªå•é“¾è¡¨ï¼Œç”¨äºå­˜å‚¨ä¸è¿™ä¸ªèŠ‚ç‚¹ç›¸è¿çš„èŠ‚ç‚¹ã€‚\nåœ¨G2çš„æœ‰å‘å›¾ä¸­ï¼Œä¸€èˆ¬å­˜å‚¨çš„æ˜¯å‡ºåº¦è¡¨ï¼Œå³ä»è¯¥èŠ‚ç‚¹å‡ºå‘çš„è¾¹ã€‚å¦‚æœè¾¹æœ‰æƒå€¼ï¼Œåˆ™è¿˜éœ€è¦å­˜å‚¨æƒå€¼\n\nä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š\n\nå¯ä»¥å¿«é€Ÿæ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹å’Œè°ç›¸è¿ï¼ˆå‡ºåº¦ï¼‰\n\nç¼ºç‚¹\n\nä¸ä¾¿äºåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹\nä¸ä¾¿äºè®¡ç®—æœ‰å‘å›¾å„ä¸ªé¡¶ç‚¹çš„åº¦ï¼ˆéœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ï¼‰\n\nå…³äºç¬¬äºŒä¸ªç¼ºç‚¹ï¼Œå¯ä»¥æ–°å¢ä¸€ä¸ªå…¥åº¦è¡¨ï¼ˆå³ä¸€ä¸ªå‡ºåº¦è¡¨&#x2F;ä¸€ä¸ªå…¥è¯»è¡¨ï¼‰æ¥è®¡ç®—ã€‚ä½†æ˜¯è¿™æ ·ä¼šå¢åŠ æ—¶ç©ºå¤æ‚åº¦ã€‚\n3.éå†3.1 æ·±åº¦ä¼˜å…ˆDFSæ·±åº¦ä¼˜å…ˆä»¥é€’å½’ä¸ºåŸºæœ¬æ€è·¯ï¼Œä»ä¸€ä¸ªç»“ç‚¹å¼€å§‹ï¼Œé€’å½’å‘åéå†è¿™ä¸ªèŠ‚ç‚¹çš„å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚\n\nä¸ºäº†é¿å…åŒä¸€ä¸ªèŠ‚ç‚¹éå†å¤šæ¬¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªboolæ•°ç»„æ¥æ ‡è¯†ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦éå†è¿‡ã€‚å¦‚æœéå†è¿‡ï¼Œåˆ™æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼è®¾å®šä¸ºtrueæ¥æ ‡è¯†\nç”±äºæ·±åº¦ä¼˜å…ˆçš„é€’å½’éƒ¨åˆ†åªèƒ½éå†è¿é€šå›¾ã€‚è‹¥å‡ºç°äº†ä¸Šå›¾ä¸­éè”é€šçš„æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬åœ¨å¤–å¾ªç¯ä¸­é‡æ–°éå†ä¸€ä¸‹boolæ ‡è¯†æ•°ç»„ï¼Œç¡®è®¤æ‰€æœ‰èŠ‚ç‚¹éƒ½éå†å®Œæˆã€‚\nå¦‚æœæ¼äº†èŠ‚ç‚¹ï¼ˆå°±æ˜¯æ²¡æœ‰å’Œå…¶ä»–èŠ‚ç‚¹è”é€šçš„ç‹¬ç«‹èŠ‚ç‚¹ï¼‰é‚£ä¹ˆå°±ä»¥æ­¤èŠ‚ç‚¹å¼€å¤´å†è¿›è¡Œä¸€æ¬¡æ·±åº¦éå†ã€‚\n\n3.2 å¹¿åº¦ä¼˜å…ˆBFS\nå¹¿åº¦ä¼˜å…ˆéå†ç±»ä¼¼äºŒå‰æ ‘çš„å±‚åºéå†ï¼Œä¾é å¾ªç¯+é˜Ÿåˆ—æ¥å®Œæˆéå†\n\nå…¥èµ·å§‹èŠ‚ç‚¹ï¼Œæ‰“å°èµ·å§‹èŠ‚ç‚¹çš„å€¼\nå‡ºé˜Ÿå¤´èŠ‚ç‚¹ï¼ˆç¬¬ä¸€æ¬¡çš„æ—¶å€™æ˜¯èµ·å§‹èŠ‚ç‚¹ï¼‰å¾€é˜Ÿåˆ—ä¸­å…¥è¯¥èŠ‚ç‚¹å•é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹\nä¾æ­¤ç±»æ¨ï¼Œå‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å…¥è¿™ä¸ªèŠ‚ç‚¹å•é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹\nåŒæ ·åœ°ç”¨ä¸€ä¸ªboolæ•°ç»„æ ‡è¯†èŠ‚ç‚¹æ˜¯å¦è¢«è®¿é—®ã€‚å¦‚æœè¢«è®¿é—®äº†åˆ™è·³è¿‡è¯¥èŠ‚ç‚¹\nä¹Ÿéœ€è¦åœ¨é˜Ÿåˆ—å¾ªç¯ç»“æŸåéå†ä¸€éboolæ•°ç»„ï¼Œç¡®è®¤æ‰€æœ‰èŠ‚ç‚¹éƒ½è®¿é—®å®Œæ¯•ã€‚\n\n\n3.3 åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦è¿é€šä½¿ç”¨ä»»ä½•éå†æ–¹å¼ï¼Œéå†å®Œæ¯•åæ£€æŸ¥boolæ•°ç»„\nè‹¥æœ‰èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®ï¼Œåˆ™è¯´æ˜æ˜¯éè¿é€šå›¾\n4.æ‹“æ‰‘æ’åº\nhttps://blog.csdn.net/qq_43448856/article/details/119959241\n\nç»™å®šä¸€ä¸ªå›¾ï¼Œæ¯æ¬¡éƒ½é€‰æ‹©ä¸€ä¸ªæ— å…¥åº¦ï¼ˆæ²¡æœ‰å…¥è¾¹ï¼‰çš„èŠ‚ç‚¹åŠ å…¥åºåˆ—ä¸­ï¼Œå¹¶åˆ é™¤è¯¥èŠ‚ç‚¹çš„å‡ºè¾¹\næœ€ç»ˆå¾—åˆ°çš„åºåˆ—å°±æ˜¯ä¸€ä¸ªæ‹“æ‰‘æ’åºä¹‹åçš„åºåˆ—\n\næ¯æ¬¡åˆ é™¤å‡ºè¾¹åï¼Œéƒ½å¯èƒ½å½¢æˆæ–°çš„æ— å…¥åº¦çš„èŠ‚ç‚¹\n\nå› æ­¤ï¼Œé’ˆå¯¹åŒä¸€æ£µæ ‘çš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œå¯èƒ½æœ‰å¤šç§ä¸åŒçš„æƒ…å†µ\n5.æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ç”Ÿæˆæ ‘çš„æ¦‚å¿µå‚è€ƒ 1.8 ç”Ÿæˆæ ‘ï¼Œæœ€å°ç”Ÿæˆæ ‘å³è®©ç”Ÿæˆæ ‘ä¸­æ‰€æœ‰è¾¹çš„æƒå€¼åŠ èµ·æ¥æœ€å°\n5.1 æ™®é‡Œå§†\nå¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæ ¹æ®è¿™ä¸ªæ ‘çš„ç»“æ„æ„é€ ä¸‰ä¸ªæ•°ç»„\n\nnearestä»£è¡¨å’Œè¿™ä¸ªèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼ˆé»˜è®¤ä¸º-1ï¼‰\nlowcostä»£è¡¨å’Œè¿™ä¸ªèŠ‚ç‚¹æœ€è¿‘èŠ‚ç‚¹çš„æƒå€¼ï¼ˆé»˜è®¤ä¸ºæ— ç©·å¤§ï¼‰\nmarkæ˜¯ä¸€ä¸ªboolæ•°ç»„ï¼Œæ ‡è¯†è¯¥èŠ‚ç‚¹æ˜¯å¦å·²ç»åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘\n\nå½“æˆ‘ä»¬æ¯ä»å›¾ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±éœ€è¦æ›´æ–°è¿™ä¸‰ä¸ªè¡¨\nå¦‚å›¾ï¼Œå½“æˆ‘ä»¬å–èµ°0ä¹‹åï¼Œå°±éœ€è¦æ›´æ–°å’Œ0è¿é€šçš„ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­nearestä»£è¡¨åˆšåˆšåˆ é™¤æ‰çš„èŠ‚ç‚¹0ï¼Œlowcostä»£è¡¨å®ƒä»¬å’Œ0ç›¸è¿è¾¹çš„æƒå€¼ï¼›åŒæ—¶è¦æŠŠmarkä¸­0æ”¹ä¸ºtrueï¼Œè¡¨æ˜0å·²ç»åŠ å…¥ç”Ÿæˆæ ‘äº†\n\nç¬¬äºŒæ¬¡é€‰å–çš„æ—¶å€™ï¼Œéå†lowcostè¡¨ï¼Œæ‰¾åˆ°æƒå€¼æœ€å°çš„è¾¹ä¸º(0,2)æƒå€¼ä¸º1ã€‚æ­¤æ—¶å°±æŠŠ2åŠ å…¥è¿›å»ï¼Œå¹¶æ›´æ–°ä¸2ç›¸è¿çš„èŠ‚ç‚¹3ï¼ˆæ³¨ï¼Œå¿…é¡»è¦æƒå€¼æ›´å°æ‰éœ€è¦æ›´æ–°ï¼‰\n\nä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½åŠ å…¥äº†æœ€å°ç”Ÿæˆæ ‘ï¼ˆå·¦ä¸‹è§’çš„å›¾ï¼‰\n\nè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ï¼Œåªä¸èŠ‚ç‚¹çš„æ•°é‡Næœ‰å…³\n5.2 å…‹é²æ–¯å¡å°”\næ„å»ºä¸€ä¸ªå’ŒåŸå›¾ä¸€æ ·çš„èŠ‚ç‚¹å›¾ï¼ˆæ— è¾¹ï¼‰åœ¨åŸå›¾ä¸­æŸ¥æ‰¾æƒå€¼æœ€å°çš„è¾¹ï¼Œåˆ¤æ–­å…¶èŠ‚ç‚¹æ˜¯å¦å·²ç»ç›¸åŒï¼Œå¦‚æœæ²¡æœ‰å½¢æˆç¯ï¼Œåˆ™åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘çš„å›¾ä¸­\n\nåˆ¤æ–­æ˜¯å¦æˆç¯å¯ä»¥é€šè¿‡å¹¶æŸ¥é›†è§£å†³\n\nå¦‚ä¸‹å›¾ï¼Œå…ˆéå†æ‰€æœ‰è¾¹ï¼Œå‘ç°(0,2)çš„æƒå€¼æœ€å°ï¼Œåˆ¤æ–­è¯¥è¾¹åŠ å…¥åå¹¶ä¸ä¼šä½¿ç”Ÿæˆæ ‘å½¢æˆç¯ï¼Œåˆ™åŠ å…¥è¯¥è¾¹\n\nåŒæ—¶å°†0å’Œ2åŠ å…¥åˆ°åŒä¸€ä¸ªå¹¶æŸ¥é›†çš„åˆé›†å†…\n\n\nåŒç†ç»§ç»­æ‰¾æƒå€¼æœ€å°çš„è¾¹ï¼ŒåŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­\n\næ­¤æ—¶æˆ‘ä»¬é‡åˆ°äº†3æ¡æƒå€¼æœ€å°çš„è¾¹ï¼Œæƒå€¼éƒ½ä¸º5ã€‚æ­¤æ—¶å¯ä»¥éšä¾¿åŠ å…¥ä¸€æ¡è¾¹å³å¯ï¼ˆä¸èƒ½ä½¿ç”Ÿæˆæ ‘æˆç¯ï¼‰\nå¦‚ä¸‹å›¾ä¸­(0,3)å’Œ(2,3)çš„è¾¹åŠ å…¥åä¼šä½¿å›¾æˆç¯ï¼Œä¸èƒ½é€‰æ‹©è¯¥è¾¹\n\nå¹¶æŸ¥é›†ä¸­0ã€2ã€3ã€5å·²ç»åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œæ­¤æ—¶åˆ¤æ–­(0,3)åœ¨ä¸€ä¸ªé›†åˆï¼Œè¯¥è¾¹ä¸èƒ½åŠ å…¥ï¼›(2,3)åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œè¯¥è¾¹ä¸èƒ½åŠ å…¥\n\n\nåº”è¯¥é€‰æ‹©(1,2)è¿™æ¡è¾¹ï¼Œå…¶ä¸ä¼šè®©æ ‘æˆç¯\n\næ­¤æ—¶æ‰€æœ‰è¾¹éƒ½å·²ç»è¿èµ·æ¥äº†ï¼Œæœ€å°ç”Ÿæˆæ ‘ç”ŸæˆæˆåŠŸ\nç®—æ³•åˆ†æ\n\nè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(E*logE)ï¼Œå…¶ä¸­Eä¸ºè¾¹çš„æ•°ç›®\n6.æœ€çŸ­è·¯å¾„å•æºæœ€çŸ­è·¯å¾„æ€è·¯æœ‰äº›ç±»ä¼¼å¹¶æŸ¥é›†ï¼Œpathæ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸Šä¸€æ¡è·¯å¾„ï¼Œè‹¥ä¸‹æ ‡1å¤„å­˜æ”¾0ï¼Œåˆ™ä»£è¡¨æ˜¯ä»0èµ°åˆ°1ã€‚åŒæ—¶dæ•°ç»„ä¸­æ ‡è¯†ä»0èµ°åˆ°ä¸‹æ ‡1çš„é•¿åº¦ã€‚\n\næŠŠ1åŠ åˆ°såºåˆ—ä¹‹åï¼Œå‘ç°0åˆ°èŠ‚ç‚¹2çš„è·¯å¾„é•¿åº¦ç¼©çŸ­äº†ï¼Œä»åŸæœ¬çš„(0,2)çš„6å˜æˆäº†ç°åœ¨(0,1)+(1,2)çš„4+1=5ï¼Œé•¿åº¦ç¼©çŸ­ï¼Œå¯¹åº”dæ•°ç»„ä¸­ä¸‹æ ‡2å¤„ä¹Ÿéœ€è¦æ›´æ–°\nç»§ç»­ä¸‹å»ï¼Œç›´åˆ°Uæ•°ç»„ä¸­æ²¡æœ‰èŠ‚ç‚¹ï¼ŒSæ•°ç»„ä¸­èŠ‚ç‚¹æ»¡ï¼Œå³å¯è·å¾—ä¸€ä¸ªä»0å‡ºå‘åˆ°ä»»ä½•èŠ‚ç‚¹çš„å•æºæœ€çŸ­è·¯å¾„\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["C++","æ•°æ®ç»“æ„","å›¾"]},{"title":"ã€ç®—æ³•ã€‘ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦","url":"/2022/03/13/note_data_structure/1%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/","content":"å‰è¨€ğŸ•µï¸â€â™‚ï¸åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œå·²ç»æ¥è§¦è¿‡äº†ç½‘ä¸ŠOJé¢˜ç›®\nåœ¨ä¸€äº›é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„è¦æ±‚\nä½ å¯èƒ½å’Œæˆ‘æœ‰ä¸€æ ·çš„ç–‘æƒ‘ï¼Œå¤æ‚åº¦ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¦æ€ä¹ˆè¯„åˆ¤æˆ‘è‡ªå·±å†™çš„ç®—æ³•çš„å¤æ‚åº¦ï¼Ÿ\nä»Šå¤©å°±è®©æˆ‘ä»¬æ¥è®¤è¯†è®¤è¯†~~\n\n\n\n1.ç®—æ³•æ•ˆç‡ğŸ§å’Œåšä»»ä½•äº‹æƒ…ä¸€æ ·ï¼Œæˆ‘ä»¬å†™çš„ç®—æ³•ï¼Œè‡ªç„¶ä¹Ÿæœ‰å®ƒçš„è¿è¡Œæ•ˆç‡ã€‚æ•ˆç‡è¶Šé«˜è¶Šå¥½\n1.1ä»€ä¹ˆæ˜¯ç®—æ³•ç®—æ³•å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºæˆ‘ä»¬ä¸ºäº†æ±‚è§£ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€å†™çš„å‡½æ•°\nåœ¨åˆè¯†Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ è¿‡åˆ©ç”¨é€’å½’æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç®—æ³•\nlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\nè¿™ä¸ªç®—æ³•åªæœ‰3è¡Œä»£ç ï¼Œçœ‹ä¸Šå»éå¸¸ç®€æ´â€”â€”ä½†æ˜¯ç®€æ´çš„ä»£ç ä¸ä¸€å®šæ•ˆç‡å°±é«˜ï¼\n1.2å¦‚ä½•è¡¡é‡ï¼Ÿç®—æ³•åœ¨ç¼–å†™æˆå¯æ‰§è¡Œç¨‹åºçš„æ—¶å€™ï¼Œmainå‡½æ•°ä½¿ç”¨è¿™ä¸ªç®—æ³•ï¼Œéœ€è¦è°ƒç”¨ä¸€å®šçš„ç©ºé—´ï¼Œæ¶ˆè€—ä¸€å®šçš„æ—¶é—´ã€‚ç®—æ³•çš„æ•ˆç‡å°±æ˜¯é€šè¿‡ç©ºé—´å’Œæ—¶é—´è¿™ä¸¤ä¸ªç»´åº¦æ¥è¯„åˆ¤çš„\n\næ—¶é—´å¤æ‚åº¦ï¼šè¡¡é‡ä¸€ä¸ªç®—æ³•çš„è¿è¡Œé€Ÿåº¦\nç©ºé—´å¤æ‚åº¦ï¼šè¡¡é‡ä¸€ä¸ªç®—æ³•è¿è¡Œéœ€è¦å¼€è¾Ÿçš„é¢å¤–ç©ºé—´\n\n\n2.æ—¶é—´å¤æ‚åº¦â°ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šé‡æè¿°äº†è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚ç®—æ³•ä¸­åŸºæœ¬æ“ä½œçš„æ‰§è¡Œæ¬¡æ•°ï¼Œä¸ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå¹¶ä¸æ˜¯å®é™…è¿è¡Œçš„æ—¶é—´\nå®é™…ä¸Šä»£ç çš„è¿è¡Œæ—¶é—´ï¼Œå’Œæœºå™¨çš„å†…å­˜ã€cpuæ€§èƒ½å’Œå¹³å°éƒ½æœ‰å…³ç³»ï¼ŒåŒä¸€ä¸ªä»£ç åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿è¡Œæ—¶é—´éƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœåªä»¥çº¯ç²¹çš„æ—¶é—´æ¥è€ƒæ ¸ï¼Œå¾ˆéš¾åˆ†æ\n\næ‰¾åˆ°æŸæ¡åŸºæœ¬è¯­å¥ä¸é—®é¢˜è§„æ¨¡Nä¹‹é—´çš„æ•°å­¦è¡¨è¾¾å¼ï¼Œå°±ç®—å‡ºäº†è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\nvoid Test(int N){\tint count =0;    for(int i=0;i&lt;N;i++)    {        for(int j=0;j&lt;N;j++)        {            count++;        }    }        for (int k = 0; k &lt; 2 * N ; ++ k)    {     \tcount++;    }        int M = 10;    while (M--)    {     \tcount++;    }        return;}\n\nè¯·é—®è¿™ä¸ªä»£ç ä¸­ï¼Œcountè¯­å¥æ‰§è¡Œäº†å‡ æ¬¡ï¼Ÿ\n\nN = 10        F(N) = 130 \nN = 100      F(N) = 10210 \nN = 1000    F(N) = 1002010\n\nä½ å¯èƒ½ä¼šç®€å•åœ°è®¤ä¸ºï¼ŒF(N)çš„ç»“æœå°±æ˜¯æˆ‘ä»¬çš„æ—¶é—´å¤æ‚åº¦ã€‚å…¶å®å¹¶ä¸ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸€ä¸ªç²¾ç¡®çš„è¿è¡Œæ¬¡æ•°ï¼Œåªéœ€è¦çŸ¥é“ç¨‹åºè¿è¡Œæ¬¡æ•°çš„é‡çº§å°±è¡Œäº†\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¤§Oæ¸è¿›è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦ï¼ˆç©ºé—´å¤æ‚åº¦åŒç†ï¼‰\n2.1å¤§Oçš„æ¸è¿›è¡¨ç¤ºæ³•å¤§Oç¬¦å·ï¼ˆBig O notationï¼‰ï¼šæ˜¯ç”¨äºæè¿°å‡½æ•°æ¸è¿›è¡Œä¸ºçš„æ•°å­¦ç¬¦å·\n\næ¨å¯¼å¤§Oé˜¶æ–¹æ³•ï¼š \n\nç”¨å¸¸æ•°1å–ä»£è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•°ã€‚\nåœ¨ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹ã€‚ \nå¦‚æœæœ€é«˜é˜¶é¡¹å­˜åœ¨ä¸”ä¸æ˜¯1ï¼Œåˆ™å»é™¤ä¸è¿™ä¸ªé¡¹ç›®ç›¸ä¹˜çš„å¸¸æ•°ã€‚å¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§Oé˜¶\n\n\nä½¿ç”¨è¿™ç§æ–¹æ³•åï¼Œtest1å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¸ºå¯¹äºtest1å‡½æ•°ï¼Œåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœç•¥äº†æœ€åçš„+10ï¼Œä¿ç•™äº†æœ€é«˜é˜¶æ•°N^2^ï¼Œå³å¾—å‡ºäº†å®ƒçš„æ—¶é—´å¤æ‚åº¦\n\nå¦‚æœæœ€é«˜é˜¶æ•°å‰é¢æœ‰ç³»æ•°ï¼Œå¦‚2Nï¼Œç³»æ•°ä¹Ÿå°†è¢«çœç•¥\n\nå› ä¸ºå½“Nçš„æ•°å€¼å¾ˆå¤§çš„æ—¶å€™ï¼Œåé¢çš„é‚£äº›å€¼å¯¹æˆ‘ä»¬æ€»è¿è¡Œæ¬¡æ•°çš„å½±å“å·²ç»éå¸¸å°äº†ã€‚å¤§Oçš„æ¸è¿›è¡¨ç¤ºæ³•å»æ‰äº†é‚£äº›å¯¹ç»“æœå½±å“ä¸å¤§çš„é¡¹ï¼Œç®€æ´æ˜äº†çš„è¡¨ç¤ºå‡ºäº†æ‰§è¡Œæ¬¡æ•°\n2.2å¤šç§æƒ…å†µå–æœ€åä¸€äº›ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¼šæœ‰æœ€å¥½ã€æœ€åå’Œå¹³å‡çš„æƒ…å†µ\n\næœ€å¥½æƒ…å†µï¼šä»»æ„è¾“å…¥è§„æ¨¡çš„æœ€å°è¿è¡Œæ¬¡æ•°(ä¸‹ç•Œ)\nå¹³å‡æƒ…å†µï¼šæœŸæœ›çš„è¿è¡Œæ¬¡æ•°\næœ€åæƒ…å†µï¼šä»»æ„è¾“å…¥è§„æ¨¡çš„æœ€å¤§è¿è¡Œæ¬¡æ•°(ä¸Šç•Œ)\n\nä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æ•°å€¼çš„ç®—æ³•æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå‡ºç°è¿™å‡ ç§æƒ…å†µï¼š\n\næœ€å¥½æƒ…å†µï¼š1æ¬¡å°±æ‰¾åˆ°\nå¹³å‡æƒ…å†µï¼šN/2æ¬¡\næœ€åæƒ…å†µï¼šNæ¬¡\n\nåœ¨å®é™…ä¸­çš„ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯ç®—æ³•çš„æœ€åè¿è¡Œæƒ…å†µï¼Œæ‰€ä»¥æ•°ç»„ä¸­æœç´¢æ•°æ®æ—¶é—´å¤æ‚åº¦ä¸ºO(N)\n2.3å¸¸è§æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—NO.1 åŒç‹¬ç«‹å¾ªç¯void Func1(int N){     int count = 0;     for (int k = 0; k &lt; 2 * N ; ++ k)     {     \t++count;     }     int M = 10;     while (M--)     {     \t++count;     } \tprintf(\"%d\\n\", count);}\n\nè¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªå¾ªç¯ï¼Œåˆ†åˆ«æ˜¯2Næ¬¡å’Œ10æ¬¡ã€‚å‰é¢æåˆ°äº†å¤§Oæ¸è¿›æ³•åªä¿ç•™æœ€é«˜é˜¶æ•°å¹¶çœç•¥ç³»æ•°ï¼Œæ‰€ä»¥å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)\nNO.2 åŒç‹¬ç«‹å¾ªç¯void Func2(int N, int M){     int count = 0;     for (int k = 0; k &lt; M; ++ k)     {     \t++count;     }     for (int k = 0; k &lt; N ; ++ k)     {     \t++count;     }     printf(\"%d\\n\", count);}\n\nè¿™é‡Œå‡ºç°äº†æ¬¡æ•°ä¸ºNå’ŒMçš„ä¸¤å±‚å¾ªç¯\n\nå½“Må’ŒNå·®ä¸å¤šå¤§çš„æ—¶å€™ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥ç†è§£ä¸ºO(M)æˆ–O(N)\nå½“Mè¿œè¿œå¤§äºNæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(M)\nä¸€èˆ¬æƒ…å†µå–O(M+N)\n\n\nNO.3 å¸¸æ•°é˜¶void Func3(int N){     int count = 0;     for (int k = 0; k &lt; 100; ++ k)     {     \t++count;     }     printf(\"%d\\n\", count);}\n\nè¿™é‡Œæˆ‘ä»¬å¾—çŸ¥äº†å…·ä½“çš„å¾ªç¯æ¬¡æ•°ä¸º100ï¼Œæ˜¯ä¸€å¸¸æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä»£è¡¨å¸¸æ•°é˜¶\n\nåªè¦å¾ªç¯æ¬¡æ•°å·²çŸ¥ï¼Œä¸ºä¸€å¸¸æ•°ä¸”å’Œæ‰€ä¼ å‚æ•°æ— å…³ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å³ä¸ºO(1)\n\nNO.4 strchr//è®¡ç®—strchrçš„æ—¶é—´å¤æ‚åº¦const char * strchr ( const char * str, int character );\n\nçœ‹åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šä¸€æ„£ï¼Œstrchræ˜¯ä»€ä¹ˆï¼Ÿ\n\nåœ¨ä¹‹å‰çš„åšå®¢é‡Œï¼Œæˆ‘ä»‹ç»äº†å¾ˆå¤šå¸¸ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°ğŸ‘‰ç‚¹æˆ‘\nå¯è¿™é‡Œé¢æ²¡æœ‰strchrï¼Œä½†æœ‰strstr\n\nstrstrå‡½æ•°çš„ä½œç”¨ï¼šåœ¨å­—ç¬¦ä¸²1ä¸­å¯»æ‰¾æ˜¯å¦æœ‰å­—ç¬¦ä¸²2\nå…¶ä¸­ç¬¬äºŒä¸ªsträ»£è¡¨çš„æ˜¯stringå­—ç¬¦ä¸²ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥çŒœæƒ³ï¼Œchrä»£è¡¨çš„æ˜¯charå­—ç¬¦ï¼Œå…¶ä½œç”¨æ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ\nå½“ç„¶ï¼Œå…‰æ˜¯çŒœæƒ³è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ±‚è¯ä¸€ä¸‹\n\nå¦‚ä½•æŸ¥è¯¢åº“å‡½æ•°å®šä¹‰å¹¶å°è¯•ä½¿ç”¨å®ƒï¼ŸğŸ‘‰ç‚¹æˆ‘\n\næ‰“å¼€cplusplusç½‘ç«™ï¼Œæœç´¢strchrï¼Œå³å¯è½¬åˆ°å‡½æ•°å®šä¹‰\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å®šä½å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°è¯¥å­—ç¬¦çš„ä½ç½®ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªpointeræŒ‡é’ˆ\nå’Œæˆ‘ä»¬çŒœæƒ³çš„ä¸€æ ·ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„åœ°å€ã€‚\nè¿™æ ·ä¸€æ¥ï¼Œstrchrå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å°±å¾ˆæ¸…æ¥šäº†ï¼Œå°±æ˜¯éå†å­—ç¬¦ä¸²æ‰€éœ€è¦çš„æ¬¡æ•°ï¼ŒO(N)\nNO.5 å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){     assert(a);     for (size_t end = n; end &gt; 0; --end)     {         int exchange = 0;         for (size_t i = 1; i &lt; end; ++i)         {         \tif (a[i-1] &gt; a[i])         \t{                Swap(&amp;a[i-1], &amp;a[i]);                exchange = 1;         \t}    \t }     if (exchange == 0)    \t break;     }}\n\nå†’æ³¡æ’åºæ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„ä»£ç ï¼Œå…¶æ€è·¯å°±æ˜¯éå†æ•´ä¸ªæ•°ç»„ï¼Œå¦‚æœå¾…æ’åºæ•°å­—å¤§äºå®ƒçš„ä¸‹ä¸€ä½ï¼Œåˆ™äº¤æ¢è¿™ä¸¤ä¸ªæ•°å­—\n\nNä¸ªæ•°å­—çš„æ•°ç»„éœ€è¦N-1æ¬¡æ’åºæ‰èƒ½å®Œæˆ\næ¯ä¸€æ¬¡æ’åºéƒ½éœ€è¦éå†ä¸€æ¬¡æ•°ç»„\n\nè¿™æ ·ç®—æ¥ï¼Œå†’æ³¡æ’åºçš„å¾ªç¯æ¬¡æ•°å°±æ˜¯ä¸¤ä¸ªNç›¸ä¹˜ï¼Œå³ä¸ºO(N^2)\n\nèƒ½å¦é€šè¿‡å¾ªç¯å±‚çº§åˆ¤æ–­ï¼Ÿç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œä¸Šè¿°ä»£ç ä¸­å‡ºç°äº†ä¸¤å±‚å¾ªç¯ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å¾ªç¯å±‚çº§æ¥åˆ¤æ–­æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ\nå¹¶ä¸èƒ½ï¼\nfor(int i=0;i&lt;n;i++){\tfor(int j=0;j&lt;3;j++)\t\tprintf(\"hehe\\n\");}\n\nå¦‚æœæ˜¯ä¸Šè¿°è¿™ç§ä¸¤æ¬¡å¾ªç¯çš„æƒ…å†µï¼Œä¼šæ‰“å°3næ¬¡å‘µå‘µï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯O(N)è€Œä¸æ˜¯N^2\n\næˆ‘ä»¬è¦å‡†ç¡®åˆ†æç®—æ³•çš„æ€è·¯ï¼Œå¹¶ä¸èƒ½ç®€å•åœ°é€šè¿‡å¾ªç¯å±‚çº§æ¥åˆ¤æ–­æ—¶é—´å¤æ‚åº¦\n\nNO.6 äºŒåˆ†æŸ¥æ‰¾//a æ•°ç»„ï¼Œné•¿åº¦ï¼Œxéœ€è¦æŸ¥æ‰¾çš„æ•°int BinarySearch(int* a, int n, int x){     assert(a);     int begin = 0;     int end = n-1;     while (begin &lt;= end)     {         int mid = begin + ((end-begin)&gt;&gt;1);//ä½¿ç”¨ä½ç§»æ“ä½œç¬¦æ¥æ¨¡æ‹Ÿ/2ï¼Œé˜²æ­¢beginå’Œendç›¸åŠ åè¶…å‡ºintèŒƒå›´         if (a[mid] &lt; x)         \tbegin = mid+1;         else if (a[mid] &gt; x)         \tend = mid-1;         else         \treturn mid;//è¿”å›éœ€è¦æŸ¥æ‰¾çš„æ•°çš„ä¸‹æ ‡     }     return -1;}\n\näºŒåˆ†æŸ¥æ‰¾çš„æ€è·¯è¿™é‡Œä¸å†èµ˜è¿°\nå‡è®¾æˆ‘ä»¬æ‰¾äº†xæ¬¡ï¼Œæ¯ä¸€æ¬¡æŸ¥æ‰¾éƒ½ä¼šä½¿æŸ¥æ‰¾èŒƒå›´å‡åŠ\nN/2/2/2/2 â€¦â€¦\n\næœ€åæˆ‘ä»¬å¯ä»¥å¾—å‡º2æ¡å…¬å¼\n\n\næœ€å¥½æƒ…å†µï¼šO(1)\næœ€åæƒ…å†µï¼šO(logN)\n\n\né€šè¿‡æ—¶é—´å¤æ‚åº¦çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹å‡ºäºŒåˆ†æŸ¥æ‰¾çš„ä¼˜åŠ¿åœ¨é‚£é‡Œäº†\n\n\n\nN\nO(N)\nO(logN)\n\n\n\n1000\n1000\n10\n\n\n100w\n100w\n20\n\n\n10äº¿\n10äº¿\n30\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æ•°æ®å¾ˆå¤§çš„æ—¶å€™ï¼ŒO(logN)çš„ç®—æ³•æ‰§è¡Œæ¬¡æ•°æ¯”O(N)å°‘äº†ç‰¹åˆ«å¤š!!ï¼ˆæ¥è‡ªBT-7274çš„è‚¯å®šï¼‰\n\nNO.7 è®¡ç®—N!// è®¡ç®—é˜¶ä¹˜é€’å½’Facçš„æ—¶é—´å¤æ‚åº¦ï¼Ÿlong long Fac(size_t N){     if(0 == N)     \treturn 1;     return Fac(N-1)*N;}\n\nå¯¹äºè¿™ä¸ªé˜¶ä¹˜çš„é€’å½’å‡½æ•°è€Œè¨€ï¼Œæ¯æ¬¡å‡½æ•°è°ƒç”¨æ˜¯O(1)ï¼Œæ—¶é—´å¤æ‚åº¦ä¸»è¦çœ‹é€’å½’æ¬¡æ•°\nå¯¹äºæ•°å­—Nè€Œè¨€ï¼Œé€’å½’éœ€è¦Næ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N)\né€’å½’ç®—æ³•æ—¶é—´å¤æ‚åº¦è®¡ç®—\nå¦‚æœæ¯æ¬¡å‡½æ•°è°ƒç”¨æ˜¯O(1)ï¼Œçœ‹é€’å½’æ¬¡æ•°\næ¯æ¬¡å‡½æ•°è°ƒç”¨ä¸æ˜¯O(1)ï¼Œé‚£ä¹ˆå°±çœ‹ä»–é€’å½’è°ƒç”¨ä¸­æ¬¡æ•°çš„ç´¯åŠ \n\nNO.8 æ–æ³¢é‚£å¥‘æ•°åˆ—\nè®¡ç®—æ–æ³¢é‚£å¥‘æ•°å¯ä»¥ç”¨é€’å½’å’Œè¿­ä»£ä¸¤ç§ç®—æ³•ğŸ‘‰ç‚¹æˆ‘\n\n// è®¡ç®—æ–æ³¢é‚£å¥‘é€’å½’Fibçš„æ—¶é—´å¤æ‚åº¦ï¼Ÿlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\n\næ¯æ¬¡é€’å½’ï¼Œæ¬¡æ•°éƒ½ä¼šå¢åŠ ï¼Œæ€»çš„æ¥è¯´æ˜¯ä»¥2^xçš„é‡çº§å¢åŠ çš„ï¼ˆxä»£è¡¨è¡Œæ•°ï¼‰è¿™é‡Œä¸€å…±æœ‰x-1é¡¹ï¼Œç”¨ç­‰æ¯”æ•°åˆ—çš„æ±‚å’Œå…¬å¼å¾—å‡ºï¼Œç»“æœä¸º2x-1\næ‰€ä»¥æœ€åå¾—å‡ºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2N)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é€’å½’è°ƒç”¨åˆ°åº•éƒ¨æ—¶ï¼Œæœ‰ä¸€äº›è°ƒç”¨ä¼šè¾ƒæ—©é€€å‡ºï¼Œè¿™éƒ¨åˆ†ä½äºé‡‘å­—å¡”çš„å³ä¸‹è§’\n\nç”±äºæ—¶é—´å¤æ‚åº¦åªæ˜¯ä¸€ä¸ªä¼°ç®—å€¼ï¼Œè¿™ä¸€éƒ¨åˆ†ç¼ºå¤±çš„è°ƒç”¨æ¬¡æ•°å¯¹æ€»è¿è¡Œæ¬¡æ•°çš„å½±å“ä¸å¤§ï¼Œæ•…å¿½ç•¥æ‰\n\nNO.9 é+1é€’å¢å¾ªç¯void fun(int n) {   int i=l;   while(i&lt;=n)      i=i*2;}\n\næ­¤å‡½æ•°æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯æ²¡æœ‰è¢«æ‰§è¡Œnæ¬¡ï¼Œiæ¯æ¬¡éƒ½æ˜¯2å€è¿›è¡Œé€’å¢ï¼Œæ‰€ä»¥å¾ªç¯åªä¼šè¢«æ‰§è¡Œlog2næ¬¡\nNO.10 æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾å’Œä¸ºsumçš„ä¸¤ä¸ªæ•°ç»™å®šä¸€ä¸ªæ•´æ•°sumï¼Œä»æœ‰Nä¸ªæœ‰åºå…ƒç´ çš„æ•°ç»„ä¸­å¯»æ‰¾å…ƒç´ aï¼Œbï¼Œä½¿å¾—a+bçš„ç»“æœæœ€æ¥è¿‘sumï¼Œæœ€å¿«çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ï¼Ÿ\nA. O(n)//âˆšB. O(n^2)C. O(nlogn)D. O(logn)\n\næ•°ç»„å…ƒç´ æœ‰åºï¼Œæ‰€ä»¥a,bä¸¤ä¸ªæ•°å¯ä»¥åˆ†åˆ«ä»å¼€å§‹å’Œç»“å°¾å¤„å¼€å§‹æœï¼Œæ ¹æ®é¦–å°¾å…ƒç´ çš„å’Œæ˜¯å¦å¤§äºsum,å†³å®šæœç´¢çš„ç§»åŠ¨ï¼Œæ•´ä¸ªæ•°ç»„è¢«æœç´¢ä¸€éï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœï¼Œæ‰€ä»¥æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸ºn\nNO.11 åŒåµŒå¥—å¾ªç¯void test(int n){    for(int i=0;i&lt;n;i++)    {//å¾ªç¯1        for(int j=i;j&lt;n;j++)        {            //å¾ªç¯2        }    }}\n\nä»¥ä¸Šæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„å¾ªç¯ã€‚å…¶ä¸­å¾ªç¯2çš„æ‰§è¡Œæ¬¡æ•°æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¬¬ä¸€æ¬¡æ˜¯nï¼Œç¬¬äºŒæ¬¡æ˜¯n-1ï¼Œç¬¬ä¸‰æ¬¡æ˜¯n-2â€¦â€¦ä¸€ç›´åˆ°æœ€åä¸€æ¬¡ä¸º1ï¼›è¿™ä¸ªç­‰å·®æ•°åˆ—çš„æ±‚å’Œä¸ºn(n+1)/2ï¼Œå³n2/2+n/2ï¼Œå› ä¸ºæ—¶é—´å¤æ‚åº¦éœ€è¦å–å¤§ä¸”å¿½ç•¥ç³»æ•°ï¼Œæ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸ºn2\n\n3.ç©ºé—´å¤æ‚åº¦ğŸ 3.1æ¦‚å¿µç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨ç©ºé—´å¤§å°çš„åº¦é‡\n\nå’Œæ—¶é—´å¤æ‚åº¦ä¸æ˜¯çœŸçš„è®¡ç®—æ—¶é—´ä¸€æ ·ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸è¡¡é‡ç®—æ³•å…·ä½“å ç”¨çš„å†…å­˜å­—èŠ‚æ•°ã€‚\n\nç©ºé—´å¤æ‚åº¦è®¡ç®—çš„æ˜¯é¢å¤–å¼€è¾Ÿçš„å˜é‡çš„ä¸ªæ•°ï¼Œé€‚ç”¨å¤§Oæ¸è¿‘æ³•\næ³¨æ„ï¼šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€è¦çš„æ ˆç©ºé—´(å­˜å‚¨å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸€äº›å¯„å­˜å™¨ä¿¡æ¯ç­‰)åœ¨ç¼–è¯‘æœŸé—´å·²ç»ç¡®å®šå¥½äº†ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸»è¦é€šè¿‡å‡½æ•°åœ¨è¿è¡Œæ—¶å€™æ˜¾å¼ç”³è¯·çš„é¢å¤–ç©ºé—´æ¥ç¡®å®šã€‚\n3.2ç©ºé—´å¤æ‚åº¦è®¡ç®—NO.1 å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){     assert(a);     for (size_t end = n; end &gt; 0; --end)     {         int exchange = 0;         for (size_t i = 1; i &lt; end; ++i)         {         \tif (a[i-1] &gt; a[i])         \t{                Swap(&amp;a[i-1], &amp;a[i]);                exchange = 1;         \t}    \t }     if (exchange == 0)    \t break;     }}\n\næˆ‘ä»¬ä¼šå‘ç°ï¼Œå†’æ³¡æ’åºç®—æ³•å¹¶æ²¡æœ‰é¢å¤–å®šä¹‰éå¸¸å¤šçš„å˜é‡ï¼Œä¸€å…±åªæœ‰3ä¸ªï¼Œå±äºå¸¸æ•°é˜¶\nsize_t end = n;int exchange = 0;size_t i = 1;\n\nå…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(1)\nè®¡ç®—æ—¶æ³¨æ„å…¶ä¸Nçš„å…³ç³»å½“æˆ‘ä»¬åœ¨ç®—æ³•ä¸­å¼€è¾Ÿç©ºé—´ï¼Œè®¡ç®—ç©ºé—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œè¦æ³¨æ„å¼€è¾Ÿçš„è¿™ä¸ªç©ºé—´ä¸Næœ‰æ²¡æœ‰å…³ç³»\nint arr[N];//c99å˜é•¿æ•°ç»„ï¼Œå’Œä¼ è¿‡æ¥çš„å‚æ•°æœ‰å…³int* a=(int*)malloc(sizeof(int)*N);//å’Œä¼ è¿‡æ¥çš„å‚æ•°æœ‰å…³ï¼ŒO(N)int* a=(int*)malloc(sizeof(int)*3);//å’Œä¼ è¿‡æ¥çš„å‚æ•°æ— å…³ï¼ŒO(1)\n\nNO.2 æ–æ³¢é‚£å¥‘æ•°åˆ—// è®¡ç®—Fibonacciçš„ç©ºé—´å¤æ‚åº¦ï¼Ÿ// è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰né¡¹long long* Fibonacci(size_t n){     if(n==0)     return NULL;     long long * fibArray = (long long *)malloc((n+1) * sizeof(long long));     fibArray[0] = 0;     fibArray[1] = 1;     for (int i = 2; i &lt;= n ; ++i)     {     \tfibArray[i] = fibArray[i - 1] + fibArray [i - 2];     }     return fibArray;}\n\nå’Œä¸Šé¢çš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’ä»£ç ä¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬æ–°åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥ä¿å­˜è®¡ç®—å‡ºæ¥çš„æ–æ³¢é‚£å¥‘æ•°\nä¸€å…±mallocäº†n+1ä¸ªé•¿æ•´å‹çš„ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\n\nç©ºé—´é‡å¤ä½¿ç”¨é—®é¢˜å¦‚æœæ˜¯é€’å½’æ–¹æ³•çš„æ–æ³¢é‚£å¥‘ç®—æ³•ï¼Œå…¶ç©ºé—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿ\nlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\nç­”æ¡ˆä¹Ÿæ˜¯O(N)\nå› ä¸ºå¯¹äºé€’å½’ç®—æ³•è€Œè¨€ï¼Œå…¶å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ç©ºé—´æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ï¼\nå¦‚fib(8)çš„è°ƒç”¨ï¼Œå…¶å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ï¼Œæ˜¯å¯ä»¥åœ¨åç»­ç»§ç»­è°ƒç”¨fibå‡½æ•°æ—¶é‡å¤ä½¿ç”¨çš„\n\né€šè¿‡å‡½æ•°çš„å‚æ•°å‹æ ˆï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ç†è§£è¿™æ˜¯ä¸ºå•¥ğŸ‘‰ç‚¹æˆ‘\n\n\nä¸Šå›¾ä¸­f1å’Œf2æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ‰§è¡Œäº†ç›¸åŒçš„åŠŸèƒ½ã€‚å…¶å‡½æ•°è°ƒç”¨çš„ç©ºé—´å®é™…ä¸Šæ˜¯ä¸€ä¸ªï¼Œf2åœ¨f1é”€æ¯åç»§æ‰¿äº†å®ƒçš„ç©ºé—´\n\nè¿™å°±å¥½æ¯”æ¯ä¸€æ¬¡æ–°çš„é€’å½’éƒ½ä¼šå¼€ä¸€å®¶æ–°çš„é¥­åº—ï¼Œä½†æ˜¯ä½ ä¸‹æ¬¡è¿˜æƒ³åƒä¸œåŒ—èœçš„æ—¶å€™ï¼Œå¯ä»¥å»ä¹‹å‰å¼€çš„ä¸œåŒ—èœé¦†ï¼Œå’±æ²¡å¿…è¦è®©åˆ«äººå†å¼€ä¸€å®¶é¦†å­ä¸æ˜¯å˜›ï¼Ÿ\n\nä¸è¿‡ç”±äºæ–æ³¢é‚£å¥‘æ•°çš„é€’å½’ç®—æ³•ä¼šé€’å½’éå¸¸å¤šæ¬¡ï¼Œåœ¨æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡º\n\n\nNO.3 é˜¶ä¹˜long long Fac(size_t N){     if(N == 0)     \treturn 1;     return Fac(N-1)*N;}\n\nè™½ç„¶å‡½æ•°æœ¬èº«çš„ç©ºé—´ä¸è®¡å…¥æ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œè®¡ç®—çš„æ˜¯é€’å½’è°ƒç”¨æ—¶é¢å¤–å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ç©ºé—´\nä¸€å…±è°ƒç”¨äº†N-1æ¬¡ï¼Œæ¯ä¸ªæ ˆå¸§ä½¿ç”¨äº†å¸¸æ•°ä¸ªç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\n4.å¸¸è§å¤æ‚åº¦å¯¹æ¯”ğŸ‘\n\n\nç»“è¯­ğŸ˜˜æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¥½çš„äº†è§£è‡ªå·±æ‰€å†™ç®—æ³•çš„å¥½åï¼Œåœ¨æœªæ¥é¢è¯•çš„æ—¶å€™ï¼ŒHRè‚¯å®šä¹Ÿæ›´å–œæ¬¢æ•ˆç‡é«˜çš„ç®—æ³•\nè¦å¤šåˆ·é¢˜ï¼Œå¥½å¥½ç§¯ç´¯è‡ªå·±çš„èƒ½åŠ›ï¼Œæƒ³å¿…ä¹‹åå†™å‡ºå¥½ç®—æ³•ä¹Ÿæ˜¯æ°´åˆ°æ¸ æˆï¼ˆå§ï¼Ÿï¼‰\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå†èµ°å‘—~\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["OJåˆ·é¢˜","Cè¯­è¨€","æ•°æ®ç»“æ„","ç®—æ³•"]},{"title":"ã€Cè¯­è¨€ã€‘é¡ºåºè¡¨ï¼ˆè¯¦è§£ï¼‰","url":"/2022/03/21/note_data_structure/2%E9%A1%BA%E5%BA%8F%E8%A1%A8/","content":"[TOC]\nå‰è¨€é¡ºåºè¡¨æ˜¯æˆ‘ä»¬å­¦ä¹ æ•°æ®ç»“æ„ç¬¬ä¸€é˜¶æ®µçš„å¿…ç»ä¹‹è·¯\nä»€ä¹ˆæ˜¯é¡ºåºè¡¨ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥\næœ¬ç¯‡åšå®¢ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼š\n\nåŠ¨æ€å†…å­˜ç®¡ç†\nè‡ªå®šä¹‰ç±»å‹-ç»“æ„ä½“\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\n\n1.ä»€ä¹ˆæ˜¯é¡ºåºè¡¨ï¼Ÿ1.1çº¿æ€§è¡¨çº¿æ€§è¡¨æ˜¯æ•°æ®ç»“æ„çš„ä¸€ç§ï¼Œå®ƒæ˜¯nä¸ªå…·æœ‰ç›¸åŒç‰¹æ€§çš„æ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚ å¸¸è§çš„çº¿æ€§è¡¨ï¼šé¡ºåºè¡¨ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€å­—ç¬¦ä¸²â€¦â€¦\nçº¿æ€§è¡¨åœ¨é€»è¾‘ä¸Šæ˜¯çº¿æ€§ç»“æ„ï¼Œä¹Ÿå°±è¯´æ˜¯è¿ç»­çš„ä¸€æ¡ç›´çº¿ã€‚ä½†æ˜¯åœ¨ç‰©ç†ç»“æ„ä¸Šå¹¶ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œçº¿æ€§è¡¨åœ¨ç‰©ç†å†…å­˜ä¸Šå­˜å‚¨æ—¶ï¼Œé€šå¸¸ä»¥æ•°ç»„å’Œé“¾å¼ç»“æ„çš„å½¢å¼å­˜å‚¨ã€‚\næœ¬ç¯‡åšå®¢æ‰€è®²è¿°çš„é¡ºåºè¡¨ï¼Œå°±æ˜¯ä»¥æ•°ç»„ç»“æ„å­˜å‚¨çš„çº¿æ€§è¡¨\n\n\n2.ç¼–å†™ä½ çš„é¡ºåºè¡¨ï¼ä¸ºäº†ä¿è¯å†™å®Œä¹‹åä¸è¦è¿›å…¥è´¤è€…debugçŠ¶æ€ï¼Œå»ºè®®æ¯ç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œå°±åœ¨test.cçš„mainå‡½æ•°ä¸­è¿›è¡Œæµ‹è¯•ï¼Œä¿è¯å½“å‰ç¼–å†™çš„æ¨¡å—æ­£ç¡®åå†è¿›è¡Œä¸‹ä¸€æ­¥ï¼\nä¸ç„¶é—®é¢˜å¤šäº†ï¼Œæ”¹èµ·æ¥å¾ˆå¤´ç–¼çš„ï¼\n\n2.0 èµ›å‰å‡†å¤‡å’Œæˆ‘ä»¬æ—¥å¸¸æ‰€ç”¨çš„æ•°ç»„ä¸åŒï¼Œé¡ºåºè¡¨çš„è¿™ä¸ªç»“æ„ï¼Œä¸»è¦çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ˆæœ¬ç¯‡åšå®¢ä¸­çš„çº¿æ€§è¡¨ä»¥intä¸ºä¾‹ï¼‰\nstruct SeqList&#123;\tint* a;\tint size;     // å­˜å‚¨æ•°æ®ä¸ªæ•°\tint capacity; // å­˜å‚¨ç©ºé—´å¤§å°&#125;;\n\nä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨typedefå¯¹ç¬¦å·è¿›è¡Œé‡å®šä¹‰\ntypedef int SLDataType;//å’Œæ™®é€šçš„æ•´å‹åŒºåˆ†å¼€ï¼Œä»¥æ­¤å‘½åçš„æ•°æ®å’Œé¡ºåºè¡¨ç›´æ¥ç›¸å…³//åŠ¨æ€é¡ºåºè¡¨typedef struct SeqList&#123;\tSLDataType* a;\tint size;     // å­˜å‚¨æ•°æ®ä¸ªæ•°\tint capacity; // å­˜å‚¨ç©ºé—´å¤§å°&#125;SeqList;//SeqListå¯ä»¥æ›¿ä»£struct SeqList\n\n2.1 åˆå§‹åŒ–æœ¬æ¬¡ç¼–å†™é¡ºåºè¡¨ä»£ç ï¼Œæˆ‘ä»¬é‡‡ç”¨â€œå¤šæ–‡ä»¶ç¼–ç¨‹â€æ–¹å¼ï¼Œå°†å‡½æ•°çš„å®ç°ï¼Œå‡½æ•°çš„å£°æ˜ä¸ä¸»å‡½æ•°åˆ†å¼€ï¼Œåˆ†åˆ«æ”¾å…¥ä¸¤ä¸ªæºæ–‡ä»¶å’Œä¸€ä¸ªå¤´æ–‡ä»¶\n\nå…ˆåœ¨mainå‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªé¡ºåºè¡¨çš„ç»“æ„ä½“ï¼Œç¼–å†™SQLinstå‡½æ•°è¿›è¡Œåˆå§‹åŒ–\nSeqList s;//åˆ›å»ºç»“æ„ä½“å˜é‡SQLinst(&amp;s);//åˆå§‹åŒ–\n\nåœ¨.hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†™å…¥å‡½æ•°å£°æ˜å’Œåº“å‡½æ•°çš„å¼•ç”¨ã€‚\næ³¨æ„éœ€è¦åœ¨å¦å¤–ä¸¤ä¸ª.cæ–‡ä»¶ä¸­ä»¥&quot;Seqlist.h&quot;æ–¹å¼å¼•ç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶\n#include&quot;Seqlist.h&quot;\n\n\nåˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å…ˆç»™aç”¨callocå‡½æ•°å¼€è¾Ÿ3ä¸ªSLDataType(int)ç±»å‹çš„ç©ºé—´\n\nCAPAï¼šç”±defineå®šä¹‰çš„ç¬¦å·ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹åˆå§‹å®¹é‡\n\nvoid SQLinst(SeqList* sql)&#123;\tassert(sql);\tsql-&gt;a = (SLDataType*)calloc(CAPA,sizeof(SLDataType));\tsql-&gt;capacity = CAPA;\tsql-&gt;size = 0;\treturn;&#125;\n\n\n2.2 å®¹é‡æ£€æŸ¥æ—¢ç„¶æˆ‘ä»¬çš„å‡½æ•°æ˜¯ç”±callocå¼€è¾Ÿçš„åŠ¨æ€å†…å­˜ç©ºé—´ï¼Œå°±éœ€è¦åœ¨é¡ºåºè¡¨å†…ç©ºé—´ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œæ£€æŸ¥å®¹é‡ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\nvoid CheckCapacity(SeqList* sql)&#123;\tassert(sql);\tif (sql-&gt;size &lt; sql-&gt;capacity)\t\treturn;\telse\t&#123;\t\tsize_t newcapacity = 2 * (sql-&gt;capacity);\t\tSLDataType* tmp = (SLDataType*)realloc(sql-&gt;a,newcapacity*sizeof(SLDataType));\t\tif (tmp == NULL)\t\t&#123;\t\t\tprintf(&quot;realloc failed\\n&quot;);\t\t\texit(0);\t\t&#125;\t\telse\t\t&#123;\t\t\tsql-&gt;a = tmp;\t\t\tsql-&gt;capacity = newcapacity;\t\t&#125;\t&#125;\treturn;&#125;\n\nä½¿ç”¨reallocå‡½æ•°çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå®ƒå¯èƒ½æ‰©å®¹å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥è®©sql-&gt;aæ¥æ¥æ”¶reallocå‡½æ•°çš„è¿”å›å€¼ï¼ˆæ‰©å®¹å¤±è´¥è¿”å›NULLï¼Œç›¸å½“äºå‰åŠŸå°½å¼ƒï¼‰\nè€Œæ˜¯éœ€è¦ç”¨ä¸€ä¸ªä¸­é—´å˜é‡tmpæ¥æ¥æ”¶å¼€è¾Ÿåçš„åœ°å€ï¼Œç¡®è®¤reallocæˆåŠŸåå†èµ‹å€¼ç»™aã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦å°†sql-&gt;capacityæ›´æ”¹æˆæ–°çš„å®¹é‡\n\n2.3 æ‰“å°é¡ºåºè¡¨void SQLprint(SeqList* sql)&#123;\tassert(sql);\tfor (int i = 0; i &lt; (sql-&gt;size); i++)\t&#123;\t\tprintf(&quot;%d &quot;, sql-&gt;a[i]);\t&#125;\tprintf(&quot;\\n&quot;);\treturn;&#125;\n\n2.4 å°¾æ’å’Œå°¾åˆ å’Œå¹³æ—¶ä½¿ç”¨æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œçº¿æ€§è¡¨ä¸­æŠŠåœ¨è¡¨å°¾æ’å…¥æ•°æ®ç§°ä½œå°¾æ’ã€åˆ é™¤æ•°æ®å«åšå°¾åˆ ï¼Œå¯¹åº”çš„æ˜¯pushbackå’Œpopback\n\nå¦‚æœä½ çœ‹è¿‡ä¹‹å‰æˆ‘çš„é‚£ç¯‡å‡½æ•°è°ƒç”¨å‚æ•°å‹æ ˆçš„åšå®¢ï¼Œåº”è¯¥è¿˜è®°å¾—ï¼Œæ±‡ç¼–ä»£ç ä¸­å…¥æ ˆå’Œå‡ºæ ˆä¹Ÿæ˜¯pushå’Œpop\n\nvoid SQLpushback(SeqList* sql, size_t x);//å°¾æ’void SQLpopback(SeqList* sql);//å°¾åˆ \n\nå®ç°æ–¹å¼å¾ˆæ˜¯ç®€å•ï¼Œå’Œæˆ‘ä»¬æ—¥å¸¸åœ¨æ•°ç»„å°¾éƒ¨æ’å…¥å…ƒç´ ç›¸åŒ\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬æ’å…¥çš„æ•°æ®æ˜¯size_tï¼ˆunsigned int)ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªé¡ºåºè¡¨ä¸­å¹¶æ²¡æœ‰è´Ÿæ•°\nvoid SQLpushback(SeqList* sql, size_t x)&#123;\tassert(sql);\tCheckCapacity(sql);//ä½¿ç”¨æ—¶æ£€æŸ¥å®¹é‡\tsql-&gt;a[sql-&gt;size] = x;\tsql-&gt;size++;\treturn;&#125;void SQLpopback(SeqList* sql)&#123;\tassert(sql);    //sql-&gt;a[sql-&gt;size] = 0;    //è¿™é‡Œå¯ä»¥æŠŠæœ€åä¸€ä¸ªæ•°æ”¹ä¸º0ï¼Œä¹Ÿå¯ä»¥ä¸æ”¹\tsql-&gt;size--;\treturn;&#125;\n\n\n2.5 å¤´æ’å’Œå¤´åˆ å’Œå°¾éƒ¨ä¿®æ”¹æ•°æ®ä¸åŒï¼Œåœ¨å¤´éƒ¨ä¿®æ”¹æ•°æ®ï¼Œå¿…é¡»è¦æŠŠå·²æœ‰æ•°æ®æ•´ä½“å¾€åç§»åŠ¨\n\nvoid SQLpushfront(SeqList* sql, size_t x)&#123;\tassert(sql);\tCheckCapacity(sql);\tint i = sql-&gt;size;\twhile (i &gt;= 0)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i - 1];\t\ti--;\t&#125;\tsql-&gt;a[0] = x;//æ•´ä½“åç§» ä¹‹åä¿®æ”¹ç¬¬ä¸€ä¸ªæ•°\tsql-&gt;size++;\treturn;&#125;void SQLpopfront(SeqList* sql)&#123;\tassert(sql);\tint i = 0;\twhile (i &lt; (int)sql-&gt;size)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i + 1];\t\ti++;//ç›´æ¥æ•´ä½“å‰ç§»å³å¯\t&#125;\tsql-&gt;size--;\treturn;&#125;\n\n2.6 æ’å…¥å’Œåˆ é™¤é™¤äº†å¤´å°¾çš„æ“ä½œï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–å†™åœ¨é¡ºåºè¡¨ä¸­é—´çš„æ’å…¥å’Œåˆ é™¤æ“ä½œ\n\næ’å…¥ï¼šéœ€è¦å°†æ’å…¥ä½ç½®ä¹‹åçš„æ•°æ®æ•´ä½“åç§»\nåˆ é™¤ï¼šåˆ é™¤ä½ç½®ä¹‹åçš„æ•°æ®æ•´ä½“å‰ç§»\nposï¼šæ’å…¥ä½ç½®çš„ä¸‹æ ‡\n\nvoid SQLinsert(SeqList* sql, size_t pos, size_t x)&#123;\tassert(sql);\tif (pos &gt;= (int)sql-&gt;size)\t&#123;//æ¸©å’Œçš„åˆ¤æ–­ï¼Œassertå¤ªè¿‡æš´åŠ›ï¼Œåœ¨OJé‡Œå®¹æ˜“å‡ºé”™\t\tprintf(&quot;input err\\n&quot;);\t\treturn;\t&#125;\tCheckCapacity(sql);\tint i = sql-&gt;size;\twhile (i &gt; (int)pos)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i - 1];\t\ti--;\t&#125;\tsql-&gt;a[pos]=x;\tsql-&gt;size++;\treturn;&#125;void SQLerase(SeqList* sql, size_t pos)&#123;\tassert(sql);\tif (pos &gt;= (int)sql-&gt;size)\t&#123;//æ¸©å’Œçš„åˆ¤æ–­ï¼Œassertå¤ªè¿‡æš´åŠ›ï¼Œåœ¨OJé‡Œå®¹æ˜“å‡ºé”™\t\tprintf(&quot;input err\\n&quot;);\t\treturn;\t&#125;\tint i = pos;\twhile (i &lt; (int)sql-&gt;size-1)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i + 1];\t\ti++;\t&#125;\tsql-&gt;size--;\treturn;&#125;\n\n2.7 æŸ¥æ‰¾å’Œæ›´æ”¹å½“æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„æ—¶å€™ï¼Œå¿…é¡»ä»å¤´å¼€å§‹éå†æ•´ä¸ªæ•°ç»„ï¼Œæ¥æ‰¾åˆ°å¾…æŸ¥æ‰¾å…ƒç´ \nint SQLfind(SeqList* sql, size_t x)&#123;\tassert(sql);\tfor (int i = 0; i &lt; sql-&gt;size; i++)\t&#123;\t\tif (sql-&gt;a[i] == x)\t\t&#123;\t\t\treturn i;//è¿”å›ä¸‹æ ‡\t\t&#125;\t&#125;\tprintf(&quot;find err\\n&quot;);\treturn -1;&#125;\n\nè€Œä¿®æ”¹å‡½æ•°åˆ™æ˜¯åœ¨æŸ¥æ‰¾çš„åŸºç¡€ä¸Šï¼Œæ›´æ”¹æ‰ç›®æ ‡å…ƒç´ \nvoid SQLmodify(SeqList* sql, size_t pos, size_t x)&#123;\tassert(sql);\tsql-&gt;a[pos] = x;\t\treturn;&#125;\n\nå¦‚æœç”¨æˆ·ä¸çŸ¥é“è‡ªå·±æƒ³ä¿®æ”¹çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œå¯ä»¥é€šè¿‡findå‡½æ•°æŸ¥æ‰¾ï¼Œå†è°ƒç”¨ä¿®æ”¹å‡½æ•°\n\n3.èœå•ä¸€ä¸ªå°å»ºè®®æ˜¯ï¼Œä¸è¦åœ¨ä¸€å¼€å§‹ç¼–å†™å‡½æ•°çš„æ—¶å€™å°±å†™å‡ºèœå•ï¼\nå› ä¸ºè¿™æ ·éå¸¸ä¸æ–¹ä¾¿debugï¼Œä½ éœ€è¦æŒ‰èœå•ä¸Šçš„å‡½æ•°è°ƒç”¨å†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ\n\nè¯è¯´æ˜¯ä¸æ˜¯åº”è¯¥åœ¨å‰é¢å°±å‘Šè¯‰å¤§å®¶ï¼ŸğŸ˜‚\n\n\nèœå•çš„ä½¿ç”¨éœ€è¦é…åˆswitch&#x2F;caseè¯­å¥æ¥æ‰§è¡Œï¼Œæ–¹ä¾¿ç”¨æˆ·è¾“å…¥æ“ä½œæ•°è¿›è¡Œå‡½æ•°è°ƒç”¨\nvoid menu()&#123;\tprintf(&quot;*****************************\\n&quot;);\tprintf(&quot;******1.å¤´æ’  2.å°¾æ’*********\\n&quot;);\tprintf(&quot;******3.å¤´åˆ   4.å°¾åˆ *********\\n&quot;);\tprintf(&quot;******5.æ’å…¥  6.åˆ é™¤*********\\n&quot;);\tprintf(&quot;******7.æŸ¥æ‰¾  8.æ›´æ”¹*********\\n&quot;);\tprintf(&quot;******9.æ‰“å°  0.exit*********\\n&quot;);\tprintf(&quot;*****************************\\n&quot;);&#125;\n\næˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªæ¨¡å—printfå¯¹åº”çš„æç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œé¡ºåºè¡¨\nint main()&#123;\tSeqList s;//åˆ›å»ºç»“æ„ä½“å˜é‡\tSQLinst(&amp;s);//åˆå§‹åŒ–#if\tM\ttest1(&amp;s);//æµ‹è¯•å‡½æ•°#endif\t\tmenu();\tprintf(&quot;è¯·è¾“å…¥å‘½ä»¤&gt;&quot;);\tint option;\tscanf(&quot;%d&quot;, &amp;option);\tdo&#123;\t\tswitch (option)\t\t&#123;\t\tcase 0:\t\t&#123;\t\t\tSQLdestory(&amp;s);\t\t\tprintf(&quot;destory SQL\\n&quot;);\t\t\texit(0);\t\t&#125;\t\tcase 1:\t\t&#123;\t\t\tint x;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦å¤´æ’çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;x);\t\t\tSQLpushfront(&amp;s, x);\t\t\tbreak;\t\t&#125;\t\tcase 2:\t\t&#123;\t\t\tint y;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦å°¾æ’çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;y);\t\t\tSQLpushback(&amp;s, y);\t\t\tbreak;\t\t&#125;\t\tcase 3:\t\t\tSQLpopfront(&amp;s);\t\t\tbreak;\t\tcase 4:\t\t\tSQLpopback(&amp;s);\t\t\tbreak;\t\tcase 5:\t\t&#123;\t\t\tint m, n;\t\t\tprintf(&quot;è¯·è¾“å…¥æ’å…¥ä½ç½®å’Œæ’å…¥æ•°&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;m, &amp;n);\t\t\tSQLinsert(&amp;s, m, n);\t\t\tbreak;\t\t&#125;\t\tcase 6:\t\t&#123;\t\t\tint d;\t\t\tprintf(&quot;è¯·è¾“å…¥å¾…åˆ é™¤æ•°çš„ä½ç½®&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;d);\t\t\tSQLerase(&amp;s, d);\t\t\tbreak;\t\t&#125;\t\tcase 7:\t\t&#123;\t\t\tint f;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦æŸ¥æ‰¾çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;f);\t\t\tprintf(&quot;è¯¥æ•°ä¸‹æ ‡ä¸º:%d\\n&quot;, SQLfind(&amp;s, f));\t\t\tbreak;\t\t&#125;\t\tcase 8:\t\t&#123;\t\t\tint h, i;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦æ›´æ”¹çš„ä¸‹æ ‡å’Œæ–°çš„æ•°å­—\\n&quot;);\t\t\tprintf(&quot;å¦‚æœæ‚¨ä¸çŸ¥é“è¯¥æ•°çš„ä½ç½®ï¼Œå¯ä»¥è°ƒç”¨æŸ¥æ‰¾æ¨¡å—\\n&quot;);\t\t\tprintf(&quot;è¯·è¾“å…¥&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;h, &amp;i);\t\t\tSQLmodify(&amp;s, h, i);\t\t\tbreak;\t\t&#125;\t\tcase 9:\t\t\tSQLprint(&amp;s);\t\t\tbreak;\t\t&#125;\t\tprintf(&quot;è¯·è¾“å…¥å‘½ä»¤&gt;&quot;);\t&#125; while (scanf(&quot;%d&quot;, &amp;option) != EOF);\treturn 0;&#125;\n\næœ€ç»ˆæ•ˆæœå¦‚å›¾\n\nä¸€äº›errå½“æˆ‘ä½¿ç”¨switch&#x2F;caseè¯­å¥ï¼Œåœ¨caseè¯­å¥ä¸­å®šä¹‰å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼ŒVSæŠ¥é”™â€œå£°æ˜ä¸èƒ½åŒ…å«æ ‡ç­¾â€\n\nè¿™ä¸ªæŠ¥é”™å¹¶ä¸ä¼šé˜»æ­¢ç¨‹åºè¿è¡Œ\n\n\nè§£å†³åŠæ³•æ˜¯åœ¨caseè¯­å¥åå¸¦ä¸Šå¤§æ‹¬å·ï¼ŒæŠ¥é”™å°±æ¶ˆå¤±äº†\n\n\næ€»ç»“é¡ºåºè¡¨å†…å®¹ç®—æ˜¯å¯¹å‰é¢å­¦ä¹ çš„ä¸€äº›Cè¯­è¨€çŸ¥è¯†çš„è¿ç”¨ï¼Œæ•°æ®ç»“æ„çš„ä¸¥è°¨æ€§æ›´èƒœä¸€ç­¹ã€‚\næ¯”å¦‚åœ¨åˆ¤æ–­poså’Œsizeçš„å¤§å°çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™ç±»å‹ä¸ä¸€è‡´ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠæ— ç¬¦å·æ•´å‹çš„sizeå¼ºåˆ¶è½¬æ¢ä¸ºintç±»å‹ï¼Œå†å’Œposè¿›è¡Œæ¯”è¾ƒï¼\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘å§\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å•é“¾è¡¨å¤ªéš¾å­¦ä¸æ‡‚ï¼Ÿçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†","url":"/2022/03/23/note_data_structure/3%E5%8D%95%E9%93%BE%E8%A1%A8/","content":"[TOC]\nå‰è¨€ğŸ˜€ä¹‹å‰çš„åšå®¢ä¸­æˆ‘ä»¬è®²è¿°äº†é¡ºåºè¡¨çš„æ•°æ®ç»“æ„ï¼Œé¡ºåºè¡¨å’Œä¹‹å‰Cè¯­è¨€å­¦ä¹ çš„æ•°ç»„è¿˜æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ã€‚\nä»Šå¤©è¦å­¦ä¹ çš„æ˜¯é“¾è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ï¼Œå’Œä¹‹å‰æˆ‘ä»¬å­¦çš„å†…å®¹éƒ½ä¸ç›¸åŒã€‚\n\nç¼–è¯‘å™¨ï¼šVS2019\n\n1.ä»€ä¹ˆæ˜¯é“¾è¡¨é“¾è¡¨ï¼Œå¦‚å…¶åæ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªå¸¦é“¾å­çš„è¡¨\nå’Œé¡ºåºè¡¨çš„æ‰©å®¹å¼€è¾Ÿç›¸æ¯”ï¼Œå®ƒå¯ä»¥åˆ©ç”¨å†…å­˜å †åŒºä¸­çš„ç©ºé—²ç©ºé—´ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªè¿ç»­çš„é•¿ç©ºé—´ã€‚ä»è€Œè¾¾åˆ°æé«˜ç©ºé—´åˆ©ç”¨æ•ˆç‡çš„ç›®çš„ã€‚\n\n\né“¾è¡¨ä¸­æ¯ä¸€ä¸ªå•ç‹¬å¼€è¾Ÿçš„â€œå…ƒç´ â€ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹\né“¾è¡¨æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆpheadï¼Œç”¨äºæŒ‡å‘é“¾è¡¨çš„é¦–èŠ‚ç‚¹\nå•é“¾è¡¨ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªnextæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\né“¾è¡¨çš„å°¾èŠ‚ç‚¹çš„nextæŒ‡å‘NULLç©ºæŒ‡é’ˆ\n\nè¿™æ ·æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨è¿‡nextæŒ‡é’ˆè®¿é—®é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ç›´åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸ºç©ºåœæ­¢ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ä¸Šçš„ç®­å¤´ï¼Œç”»å‡ºç®­å¤´åªæ˜¯æ–¹ä¾¿æˆ‘ä»¬ç†è§£ã€‚å®é™…ä¸Šï¼Œåœ¨å†…å­˜ä¸­ï¼Œé“¾è¡¨çš„nextæŒ‡é’ˆå°±å……å½“äº†ç®­å¤´çš„è§’è‰²ã€‚\n\né“¾è¡¨çš„ç»“æ„åœ¨é€»è¾‘ä¸Šè¿ç»­ï¼Œä½†åœ¨ç‰©ç†ä¸Šä¸ä¸€å®šè¿ç»­\nå®é™…ä¸Šåœ¨å †åŒºå¼€è¾Ÿç©ºé—´ä¸­ï¼Œåˆ†é…çš„å†…å­˜å¯èƒ½è¿ç»­ï¼Œå¯èƒ½ä¸è¿ç»­\n\n1.1é“¾è¡¨çš„åˆ†ç±»1 å•å‘&#x2F;åŒå‘é“¾è¡¨\n2 å¸¦å¤´&#x2F;ä¸å¸¦å¤´è¿™é‡Œçš„å¤´ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªå¤´èŠ‚ç‚¹ã€‚è¯¥èŠ‚ç‚¹çš„nextæŒ‡å‘é“¾è¡¨å®é™…çš„è¡¨å¤´ï¼Œvalä¸­ä¸å­˜æ”¾æœ‰æ•ˆæ•°æ®\nå®é™…ä½¿ç”¨æ—¶ï¼Œå¸¦å¤´çš„head-&gt;nextç›¸å½“äºä¸å¸¦å¤´çš„pheadæŒ‡é’ˆ\n\n3 å¾ªç¯æˆ–è€…éå¾ªç¯\næœ¬ç¯‡åšå®¢è®²è§£çš„æ˜¯æ— å¤´å•å‘éå¾ªç¯é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨å°†åœ¨ä¹‹åçš„åšå®¢é‡Œé¢è®²è§£ï¼\n\n2.å¼€å§‹æ•²ä»£ç ï¼å®é™…ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šè¦è®°ä½ï¼šå†™å®Œä¸€ä¸ªæ¨¡å—å°±è¦æµ‹è¯•ä¸€æ¬¡ï¼Œä¸è¦å…¨å†™å®Œå†æµ‹è¯•ï¼ï¼ï¼\n2.1  é“¾è¡¨ç»“æ„å’Œé¡ºåºè¡¨ä¸€æ ·ï¼Œä½¿ç”¨å•é“¾è¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªâ€œæ¨¡æ¿â€ï¼Œå³å•é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹çš„ç»“æ„ä½“\ntypedef int SLTDataType;//å®šä¹‰æ–°ç¬¦å·ï¼Œä¸è¯¥ç¬¦å·ç›¸å…³çš„éƒ½æ˜¯é“¾è¡¨å†…å®¹typedef struct SListNode&#123;\tSLTDataType data; //val-å­˜æ”¾å†…å®¹\tstruct SListNode* next; //å­˜å‚¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€&#125;SListNode, SLN;\n\n2.2 å¼€è¾ŸèŠ‚ç‚¹å½“æˆ‘ä»¬ä½¿ç”¨å•é“¾è¡¨æ—¶ï¼Œéœ€è¦å…ˆå¼€è¾Ÿä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå¹¶ä½¿å®ƒçš„nextæŒ‡é’ˆæŒ‡å‘NULL\nSListNode* node1 = (SListNode*)malloc(sizeof(SListNode));node1-&gt;data = 1;node1-&gt;next = NULL;\n\nè¿™éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªå‡½æ•°æ¥å®ç°ï¼\nSListNode* BuySListNode(SLTDataType x)//xä»£è¡¨è¯¥èŠ‚ç‚¹valçš„å€¼&#123;\tSListNode* newnode = (SListNode*)malloc(sizeof(SListNode));\tif (newnode == NULL)\t&#123;\t\tprintf(&quot;malloc fail\\n&quot;);\t\texit(-1);\t&#125;\telse\t&#123;\t\tnewnode-&gt;data = x;\t\tnewnode-&gt;next = NULL;\t&#125;\treturn newnode;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®©å¦å¤–ä¸€ä¸ªæŒ‡é’ˆæ¥æ¥æ”¶è¿”å›çš„newnodeåœ°å€ï¼Œä¸å»ºè®®ç›´æ¥è®©ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæ¥æ¥æ”¶è¿”å›å€¼\n\nè¿™æ ·åšèƒ½æ–¹ä¾¿æˆ‘ä»¬åç»­debugï¼\n\n//å»ºè®®åšæ³•SListNode* newnode = BuySListNode(x);tail-&gt;next = newnode;//ä¸å»ºè®®tail-&gt;next=BuySListNode(x);\n\n2.3 å°¾æ’&#x2F;å¤´æ’å°¾æ’ï¼šå°†ä¸€ä¸ªæ–°èŠ‚ç‚¹è¿æ¥åˆ°å·²æœ‰é“¾è¡¨çš„å°¾éƒ¨\nå‡è®¾æˆ‘ä»¬ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªè¿™æ ·çš„é“¾è¡¨ï¼Œå½“æˆ‘ä»¬éœ€è¦å°¾æ’çš„æ—¶å€™ï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦å¼€è¾Ÿä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¹¶å°†ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘è¿™ä¸ªæ–°å¼€è¾ŸèŠ‚ç‚¹çš„åœ°å€å³å¯ï¼ï¼ˆå°¾æ’çš„æ–°èŠ‚ç‚¹çš„next=NULLï¼‰\n\nvoid SListPushBack(SListNode** pphead, SLTDataType x)&#123;\tassert(pphead);\tSListNode* newnode = BuySListNode(x);\tif (*pphead == NULL)\t&#123;        //å¦‚æœåŸé“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥è®©å¤´æŒ‡é’ˆ=æ–°å¼€è¾Ÿçš„èŠ‚ç‚¹åœ°å€\t\t*pphead = newnode;\t&#125;\telse//åŸé“¾è¡¨éç©º\t&#123; \t\tSListNode* tail = *pphead;\t\twhile (tail-&gt;next != NULL)\t\t&#123;   //éœ€è¦å…ˆæ‰¾å°¾\t\t\ttail = tail-&gt;next;\t\t&#125;\t\ttail-&gt;next = newnode;\t&#125;&#125;\n\nè€Œå¤´æ’å°±æ²¡æœ‰å°¾æ’é‚£ä¹ˆéº»çƒ¦äº†ï¼\næˆ‘ä»¬åªéœ€è¦å°†æ–°èŠ‚ç‚¹çš„nextæŒ‡å‘åŸé“¾è¡¨çš„å¤´éƒ¨ï¼Œå†å°†headå¤´æŒ‡é’ˆæ›´æ”¹ä¸ºæ–°èŠ‚ç‚¹çš„åœ°å€å³å¯\nvoid SListPushFront(SListNode** pphead, SLTDataType x)&#123;\tassert(pphead);\tSListNode* newnode = BuySListNode(x);\tnewnode-&gt;next = *pphead;\t*pphead = newnode;&#125;\n\nç»†å¿ƒçš„ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯äºŒçº§æŒ‡é’ˆpphead\nå› ä¸ºå‡è®¾æˆ‘ä»¬ä½¿ç”¨ä¸€çº§æŒ‡é’ˆï¼Œç›´æ¥ä¼ å…¥å¤´æŒ‡é’ˆpheadæ—¶ï¼Œå½“æˆ‘ä»¬éœ€è¦æ›´æ”¹è¯¥æŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ—¶ï¼Œæ”¹åŠ¨åªä¼šåœ¨å‡½æ•°å†…éƒ¨ç”Ÿæ•ˆï¼Œmainå‡½æ•°ä¸­çš„pheadæŒ‡é’ˆå¹¶æ²¡æœ‰è¢«æ”¹å˜\n\nè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å‡½æ•°ä¼ å€å’Œä¼ å€¼é—®é¢˜\n\nå½“æˆ‘ä»¬éœ€è¦æ›´æ”¹pheadæœ¬èº«æ—¶ï¼Œéœ€è¦ä¼ å…¥äºŒçº§æŒ‡é’ˆ\n\n\n2.4 å°¾åˆ &#x2F;å¤´åˆ å°¾åˆ æ—¶ï¼Œéœ€è¦å…ˆè¿›è¡Œæ‰¾å°¾ã€‚å¹¶ä¸”éœ€è¦ä¿å­˜å°¾éƒ¨çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€\nwhile(tail-&gt;next!=NULL)//ä¼šæ‰¾åˆ°å°¾èŠ‚ç‚¹æœ¬èº«ï¼Œä¸ç¬¦åˆè¦æ±‚    //å°¾åˆ åº”è¯¥æ‰¾åˆ°å°¾èŠ‚ç‚¹çš„å‰ä¸€ä¸ªwhile (tail-&gt;next-&gt;next != NULL)\n\nåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æƒ³åˆ°ç‰¹æ®Šæƒ…å†µ\n\né“¾è¡¨ä¸ºç©ºï¼Œæ— éœ€å°¾åˆ \né“¾è¡¨åªæœ‰ä¸€ä¸ªï¼Œæ— éœ€æ‰¾å°¾\n\nå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹\nvoid SListPopBack(SListNode** pphead)&#123;\tassert(pphead);\t\tif (*pphead==NULL)\t&#123;\t\treturn;\t&#125;\telse if((*pphead)-&gt;next==NULL)\t&#123;\t\tfree(*pphead);\t\t*pphead = NULL;\t&#125;\telse\t&#123;\t\t//æœ‰å¤šä¸ªå°¾å·´çš„æƒ…å†µ\t\tSListNode* tail = *pphead;//æ‰¾å°¾å·´\t\twhile (tail-&gt;next-&gt;next != NULL)\t\t&#123;\t\t\ttail = tail-&gt;next;\t\t&#125;\t\tfree(tail-&gt;next);\t\ttail-&gt;next = NULL;\t&#125;\t\treturn;&#125;\n\nå¤´åˆ çš„æƒ…å†µä¾æ—§ç®€å•ä¸€äº›\næˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜å¤´èŠ‚ç‚¹ï¼Œå†è®©å¤´æŒ‡é’ˆpheadæŒ‡å‘åŸæœ¬å¤´èŠ‚ç‚¹çš„nextï¼Œæœ€åfreeæ‰å¤´èŠ‚ç‚¹å³å¯\nvoid SListPopFront(SListNode** pphead)&#123;\tassert(pphead);\t\tif (*pphead == NULL)\t&#123;\t\treturn;\t&#125;\telse\t&#123;\t\tSListNode* oldhead = *pphead;\t\t*pphead = (*pphead)-&gt;next;\t\tfree(oldhead);\t\toldhead = NULL;\t&#125;\treturn;&#125;\n\n\n2.5 æŸ¥æ‰¾&#x2F;æ›´æ”¹æŸ¥æ‰¾å‡½æ•°éœ€è¦æˆ‘ä»¬åœ¨å•é“¾è¡¨ä¸­è¿›è¡Œéå†ï¼Œæ‰¾åˆ°ç”¨æˆ·è¾“å…¥çš„xå€¼ï¼Œå¹¶è¿”å›å®ƒæ‰€åœ¨èŠ‚ç‚¹çš„åœ°å€\n\næŸ¥æ‰¾å‡½æ•°å¹¶ä¸éœ€è¦æ›´æ”¹pheadæŒ‡é’ˆï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥ä¸€çº§æŒ‡é’ˆ\n\nSListNode* SListFind(SListNode* phead, SLTDataType x)&#123;\tassert(phead);\tSListNode* curt = phead;//æ‰¾xçš„ä½ç½®\twhile (curt-&gt;next != NULL)\t&#123;\t\tif (curt-&gt;data == x)\t\t&#123;\t\t\treturn curt;\t\t&#125;\t\telse\t\t&#123;\t\t\tcurt = curt-&gt;next;\t\t&#125;\t&#125;\t//æ‰¾ä¸åˆ°ï¼Œè¿”å›ç©º\treturn NULL;&#125;\n\nä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå‡è®¾æˆ‘çš„é“¾è¡¨é‡Œé¢æœ‰å¤šä¸ªxå‘¢ï¼Ÿè¿™ä¸ªå‡½æ•°åªèƒ½è¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªxçš„åœ°å€\n\nå¾ˆé—æ†¾ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é™¤éç”¨æˆ·çŸ¥é“ä»–æƒ³æ‰¾çš„xçš„å‡†ç¡®åœ°å€ï¼Œä¸ç„¶æ˜¯å¾ˆéš¾æå®šçš„ã€‚\n\nå®é™…åº”ç”¨ä¸­ï¼Œé“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾çš„å¹¶ä¸åªæœ‰ä¸€ä¸ªæ•´å‹xã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶ä»–å‚æ•°è¿›è¡Œå¤šé‡åˆ¤æ–­ã€‚\n\næ¯”å¦‚é€šè®¯å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åå­—+æ€§åˆ«æ¥ç²¾ç¡®æŸ¥æ‰¾ã€‚ä¹Ÿå¯å°†æ‰€æœ‰æ‰¾åˆ°çš„xéƒ½è¿”å›ç»™ç”¨æˆ·è¿›è¡Œé€‰æ‹©ï¼Œä½†é‚£å°±ä¸æ˜¯æœ¬ç¯‡åšå®¢ä¼šæ¶‰åŠåˆ°çš„å†…å®¹å•¦\n\n\næ›´æ”¹å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·è¾“å…¥å¾…æ›´æ”¹èŠ‚ç‚¹çš„åœ°å€ï¼Œå’Œæ–°çš„val\nå¦‚æœç”¨æˆ·ä¸çŸ¥é“éœ€è¦æ›´æ”¹èŠ‚ç‚¹çš„åœ°å€ï¼Œå¯ä»¥ç”¨æŸ¥æ‰¾å‡½æ•°æ¥æŸ¥æ‰¾ã€‚\nvoid SListmodify(SListNode* phead, SListNode* pos, SLTDataType x)&#123;\tassert(phead);\tpos-&gt;data = x;\treturn;&#125;\n\n\n2.6 åœ¨posä½ç½®å‰&#x2F;åæ’å…¥é™¤äº†åŸºæœ¬çš„å¤´å°¾å¢åŠ ï¼Œç”¨æˆ·å¯èƒ½è¿˜éœ€è¦åœ¨æŸä¸€ä¸ªç‰¹å®šèŠ‚ç‚¹å‰åè¿›è¡Œæ’å…¥ï¼Œæ–¹ä¾¿ç®¡ç†æ•°æ®ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦çµæ´»è½¬å˜äº†\n\né“¾è¡¨ä¸å­˜åœ¨é¡ºåºè¡¨ä¸­çš„æ•°æ®è¶Šç•Œ\nposä½ç½®å¯ç”±findå‡½æ•°æ‰¾åˆ°\n\nå‡è®¾ç”¨æˆ·éœ€è¦åœ¨posä½ç½®ä¹‹åæ’å…¥ï¼Œæˆ‘ä»¬éœ€è¦æš‚æ—¶æ–­å¼€é“¾è¡¨ï¼Œæ–°æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹åï¼Œé‡æ–°é“¾æ¥\nvoid SListInsertAfter(SListNode** pphead, SListNode* pos, SLTDataType x)&#123;\tassert(pphead);\tassert(pos);\tSListNode* newnode = BuySListNode(x);\tSListNode* next = pos-&gt;next;//åŸæœ¬posçš„ä¸‹ä¸€ä½\tpos-&gt;next = newnode;//æ–°æ’å…¥çš„posä¸‹ä¸€ä½\tnewnode-&gt;next = next;\treturn;&#125;\n\nå¦‚æœæ˜¯åœ¨posä¹‹å‰æ’å…¥ï¼Œéœ€è¦éå†æŸ¥æ‰¾posçš„å‰ä¸€ä½ï¼Œä½¿ç”¨ç›¸åŒæ–¹æ³•æ–­å¼€ã€æ’å…¥ã€é‡è¿\nvoid SListInsert(SListNode** pphead, SListNode* pos, SLTDataType x)&#123;\tassert(pphead);\tassert(pos);\t\tif (pos == *pphead)\t&#123;\t\tSListPushFront(pphead, x);\t&#125;\telse\t&#123;\t\tSListNode* tail = *pphead;//æ‰¾poså‰ä¸€ä¸ª\t\twhile (tail-&gt;next != NULL)\t\t&#123;//åªå†™äº†è¿™ä¸ªæƒ…å†µï¼Œæ²¡æœ‰è€ƒè™‘posæ˜¯ç¬¬ä¸€ä¸ªçš„æƒ…å†µ\t\t\tif (tail-&gt;next == pos)\t\t\t&#123;                 SListNode* newnode = BuySListNode(x);\t\t\t\ttail-&gt;next = newnode;\t\t\t\ttail-&gt;next-&gt;next = pos;\t\t\t\treturn;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\ttail = tail-&gt;next;\t\t\t&#125;\t\t&#125;\t&#125;\t\treturn;&#125;\n\nè¿™é‡Œæˆ‘ä»¬éƒ½ä¼ å…¥äº†äºŒçº§æŒ‡é’ˆï¼Œå› ä¸ºå½“poså°±æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹æ—¶ï¼Œåœ¨poså‰æ’å…¥å°±ç›¸å½“äºå¤´æ’ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ä¹‹å‰å†™å¥½çš„å¤´æ’å‡½æ•°ã€‚\nå½“poså°±æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹æ—¶ï¼Œåœ¨å…¶åæ’å…¥ç›¸å½“äºå°¾æ’ã€‚\n\nè¯¥å‡½æ•°ä¸å­˜åœ¨é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µï¼Œå› ä¸ºå‡½æ•°éœ€è¦ä¼ å…¥posã€‚ç©ºé“¾è¡¨ä¸­æ²¡æœ‰èŠ‚ç‚¹ï¼Œposä¸ºç©ºï¼Œassertæ–­è¨€ä¼šæŠ¥é”™ã€‚\n\nè¿™é‡Œæˆ‘ç¼–å†™çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œæ‰€ä»¥éœ€è¦ç”¨æˆ·ä¸¥æ ¼éµå®ˆä½¿ç”¨è§„å®šï¼Œä¼ å…¥ä¸€ä¸ªåˆæ³•çš„pos\n\n2.7 åœ¨posä½ç½®åˆ é™¤æ•°æ®è¯´å®Œäº†æ’å…¥ï¼Œå†æ¥è¯´è¯´åˆ é™¤\nè¿™é‡Œæä¾›ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯åœ¨åˆ é™¤posä½ç½®çš„èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæ˜¯åˆ é™¤posä¸‹ä¸€ä½çš„èŠ‚ç‚¹\nè¿™ä¸€éƒ¨åˆ†å…¶å®å°±æ˜¯å¯¹ä¸Šä¸€æ­¥çš„é€†å‘ï¼Œå…·ä½“çš„å°±ä¸è¯¦ç»†è¯´å•¦ï¼ˆå·æ‡’ï¼‰\n\nå¤§å®¶å¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæé—®~~çœ‹åˆ°äº†å°±ä¼šå›å¤çš„ï¼\n\nvoid SListErase(SListNode** pphead, SListNode** pos)&#123;\tassert(pphead);\tassert(pos);\tif (*pos == *pphead)\t&#123;//å¦‚æœposæ˜¯å¤´èŠ‚ç‚¹ï¼Œç­‰åŒäºå¤´åˆ \t\tSListPopFront(pphead);\t&#125;\telse\t&#123;\t\tSListNode* tail = *pphead;//æ‰¾poså‰ä¸€ä¸ª\t\twhile (tail-&gt;next != NULL)\t\t&#123;\t\t\tif (tail-&gt;next == *pos)\t\t\t&#123;\t\t\t\ttail-&gt;next = (*pos)-&gt;next;\t\t\t\tfree(*pos);//åˆ é™¤åmainå‡½æ•°ä¼ è¿‡æ¥çš„posä½ç½®å·²è¢«free\t\t\t\t*pos = NULL;//*posç½®ç©ºï¼Œæ­¤æ—¶mainå‡½æ•°ä¸­çš„posä¹Ÿè¢«ç½®ç©º\t\t\t\tpos = NULL;\t\t\t\treturn;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\ttail = tail-&gt;next;\t\t\t&#125;\t\t&#125;\t&#125;\treturn;&#125;void SListEraseAfter(SListNode** pphead, SListNode* pos)&#123;\tassert(pphead);\tassert(pos);\tSListNode* next = pos-&gt;next-&gt;next;\tfree(pos-&gt;next);\tpos-&gt;next = next;\treturn;&#125;\n\n2.8 æ‰“å°é“¾è¡¨æ‰“å°çš„æ—¶å€™å¯ä»¥æ‰“å°å‡º-&gt;ç®­å¤´ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹é“¾è¡¨çš„ç»“æ„\nvoid SListPrint(SListNode* phead)&#123;\tSListNode* cur = phead;\twhile (cur != NULL)\t&#123;\t\tprintf(&quot;%d-&gt;&quot;, cur-&gt;data);\t\tcur = cur-&gt;next;\t&#125;\tprintf(&quot;NULL\\n&quot;);&#125;\n\n2.9 é”€æ¯é“¾è¡¨å¯¹äºé¡ºåºè¡¨æ¥è¯´ï¼Œé”€æ¯é“¾è¡¨åªéœ€è¦freeæ‰é¡ºåºè¡¨ä¸­æŒ‡å‘å †åŒºç©ºé—´çš„æŒ‡é’ˆ\nä½†å¯¹äºé“¾è¡¨æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥ä¸€æ­¥è¿›è¡Œé‡Šæ”¾æ“ä½œï¼Œå¹¶åœ¨é‡Šæ”¾å®Œæ¯•åå°†å¤´æŒ‡é’ˆç½®ç©º\n\nå¦‚æœè¯¥é“¾è¡¨æœ‰å¤´èŠ‚ç‚¹ï¼Œåˆ™è¿˜éœ€å°†å¤´èŠ‚ç‚¹ä¸€å¹¶ç½®ç©º\n\nvoid SListDestroy(SListNode** pphead)&#123;\tassert(pphead);\tSListNode* curt = *pphead;\twhile (curt)\t&#123;\t\tSListNode* next = curt-&gt;next;\t\tfree(curt);\t\tcurt = next;\t&#125;\t*pphead = NULL;\treturn ;&#125;\n\n\n3.æµ‹è¯•è¿™ä¸€æ¬¡ï¼Œæˆ‘ä¾æ—§ä½¿ç”¨äº†å¤šæ–‡ä»¶ç¼–ç¨‹çš„æ–¹æ³•æ¥æ•²å•é“¾è¡¨çš„ä»£ç \nè¿™æ ·çš„å¥½å¤„åœ¨äºï¼Œåˆ«äººåªéœ€è¦çœ‹ä½ çš„.hå¤´æ–‡ä»¶ï¼Œå°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½ è¿™ä¸ªé¡¹ç›®å¤§æ¦‚å®ç°äº†ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼Œå°±å¥½æ¯”ä¸€ç¯‡æ–‡ç« çš„å¤§çº²ä¸€æ ·ã€‚å¯¹äºåç»­çš„é¡¹ç›®å®æˆ˜æ¥è¯´ï¼Œæ˜¯éå¸¸é‡è¦çš„ç¼–ç¨‹èƒ½åŠ›ç§¯ç´¯\n\næµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰å‡½æ•°çš„åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å®ç°ï¼\n\n\nç»“è¯­ğŸ¤³å­¦ä¹ å®Œå•é“¾è¡¨åï¼Œæˆ‘å¼€å§‹æ¥è§¦äº†ä¸€äº›é“¾è¡¨çš„ojé¢˜ç›®ï¼Œä¸å¾—ä¸è¯´ï¼Œé“¾è¡¨è¿™éƒ¨åˆ†çš„é¢˜ç›®ï¼Œéš¾åº¦è¿˜æ˜¯æ¯”ä¹‹å‰Cè¯­è¨€çš„æ—¶å€™ç»ƒä¹ çš„é¢˜ç›®æ›´å¤§çš„ï¼æœ‰å¾ˆå¤šé¢˜ç›®éƒ½éœ€è¦æˆ‘ä»¬èä¼šè´¯é€šä¹‹å‰çš„çŸ¥è¯†ã€‚\næœ€é‡è¦çš„æ˜¯é€šè¯»ä»£ç å’Œè°ƒè¯•çš„èƒ½åŠ›ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½åœ°ç¼–å†™å‡ºç®—æ³•\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¦ä½ åˆ·çˆ†åé“é“¾è¡¨OJ","url":"/2022/03/24/note_data_structure/4%E9%93%BE%E8%A1%A8OJ%E9%A2%98/","content":"[TOC]\nå‰è¨€ï¼ŒCSDNçš„å°é—®é¢˜ğŸ˜¥æœ€è¿‘å†™åšå®¢çš„æ—¶å€™ï¼Œå‘ç°CSDNçš„markdownè¯­æ³•ä¸æ”¯æŒåŠ ç²—ä¸€å¥è¯æœ«å°¾çš„æ ‡ç‚¹ç¬¦å·\n**ä½ å¥½å‘€ï¼Œ****ä½ å¥½å‘€**ï¼Œ\n\nè¿™ä¸¤ç§æ–¹å¼åœ¨typoraä¸Šéƒ½ä¼šåŠ ç²—ï¼ˆåŒ…æ‹¬æœ«å°¾çš„æ ‡ç‚¹ï¼‰\nä½†æ˜¯åœ¨CSDNä¸Šï¼Œç¬¬ä¸€ç§æƒ…å†µä¼šæ˜¾ç¤ºå‡ºmarkdownæºç ï¼Œæ— æ³•åŠ ç²—\n\nä½ å¥½å‘€ï¼Œæˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹\n\nè™½ç„¶è¿™ä¸æ˜¯ä»€ä¹ˆå¤§äº‹ï¼Œä½†æœ‰çš„æ—¶å€™å†™åšå®¢ï¼Œä¸€å¥æœ¬æ¥åº”è¯¥æ˜¯åŠ ç²—çš„è¯ï¼Œå¤šæ˜¾ç¤ºäº†å‡ ä¸ª**ï¼Œä¸å¤ªç¾è§‚ï¼Œè¿˜ä¼šç»™ä¸äº†è§£markdownçš„è¯»è€…å¸¦æ¥å›°æ‰°ï¼šâ€œä½œè€…åœ¨è¿™é‡Œæ‰“å‡ ä¸ª*å·æ˜¯å¹²å˜›ï¼Ÿâ€\n\nä¸Šä¸€ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å•å‘æ— å¤´éå¾ªç¯é“¾è¡¨ï¼Œæœ¬ç¯‡åšå®¢å°±è®©æˆ‘ä»¬å®è·µä¸€ä¸‹ï¼Œåˆ·åé“leetcodeçš„é“¾è¡¨OJé¢˜ç›®å§ğŸŒ­\nå¦‚æœä½ æŠŠæœ¬ç¯‡åšå®¢é‡Œçš„è¿™å‡ é“é¢˜éƒ½å¼„æ˜ç™½äº†ï¼Œé‚£è¯´æ˜ä½ å¯¹é“¾è¡¨çš„æŒæ¡å·²ç»éå¸¸æ£’äº†ï¼åŠ æ²¹ï¼\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥ä»Šå¤©çš„æ­£é¢˜ï¼\nç¬¬ä¸€é¢˜ï¼š206.åè½¬é“¾è¡¨\nleetcodeï¼š206. åè½¬é“¾è¡¨\n\né¢˜ç›®éœ€è¦æˆ‘ä»¬æŠŠ1-2-3-4-5çš„é“¾è¡¨åè½¬ä¸º5-4-3-2-1çš„é“¾è¡¨\n\næœ‰ä¸€ç§å–å·§çš„åŠæ³•ï¼Œæ˜¯å°†æ‰€æœ‰æ•°å–å‡ºæ¥æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå†å€’ç€å°†æ•°ç»„é‡Œé¢çš„æ•°æ”¾å›å»\nè¿™ç§åŠæ³•å¯ä»¥é€šè¿‡OJï¼Œå› ä¸ºleetcodeå¹¶æ²¡æœ‰æ£€æŸ¥è¿”å›é“¾è¡¨çš„åœ°å€ã€‚ä½†å¹¶ä¸ç¬¦åˆé¢˜ç›®çš„çœŸæ­£è¦æ±‚\n\nstruct ListNode* reverseList(struct ListNode* head)&#123;    struct ListNode* newhead=NULL;    struct ListNode* cur=head;    while(cur)    &#123;        struct ListNode* next=cur-&gt;next;        cur-&gt;next=newhead;        newhead=cur;        cur=next;    &#125;    return newhead;&#125;\n\n\n\nç¬¬äºŒé¢˜ï¼š876.é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\nLeetCodeï¼š 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹\n\n\nè¿™é“é¢˜ç›®éœ€è¦æˆ‘ä»¬è¿”å›å•é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\nå¦‚æœé“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œè¿”å›ä¸­é—´èŠ‚ç‚¹ï¼›\nå¦‚æœé“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¶æ•°ï¼Œè¿”å›ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚\n\nå¯¹äºæ•°ç»„å’Œé¡ºåºè¡¨æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ©ç”¨ä¸‹æ ‡ç›´æ¥è®¿é—®ä¸­é—´èŠ‚ç‚¹å³å¯\nå¯¹äºå•é“¾è¡¨æ¥è¯´ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å®ƒç©¶ç«Ÿæœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå³ä¾¿çŸ¥é“äº†ï¼Œä¹Ÿéœ€è¦é€šè¿‡éå†çš„æ–¹æ³•æ‰¾åˆ°è¿™ä¸ªä¸­é—´èŠ‚ç‚¹\n\n\nè¿™é“é¢˜æˆ‘æƒ³å‡ºäº†ä¸¤ç§è§£é¢˜æ–¹å¼\nè§£æ³•ä¸€ï¼šéå†é€šè¿‡éå†å¾—å‡ºè¯¥é“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œå†ä½¿ç”¨ä¸€ä¸ªæ–°çš„æŒ‡é’ˆï¼ŒæŸ¥æ‰¾ä¸­é—´èŠ‚ç‚¹\nstruct ListNode* middleNode(struct ListNode* head)&#123;    if(head==NULL)        return NULL;    int count=1;//è®¡ç®—é“¾è¡¨ä¸€å…±çš„èŠ‚ç‚¹æ•°    struct ListNode* tail=head;//æ‰¾å°¾    while(tail-&gt;next!=NULL)    &#123;        tail=tail-&gt;next;        count++;    &#125;    int half=(count/2);     //å¦‚æœæ˜¯3ç»“æœä¸º1ï¼Œå¦‚æœæ˜¯4ç»“æœä¸º2    //æ­£å¥½æ˜¯ä»headå¼€å§‹å¯»æ‰¾çš„æ¬¡æ•°    struct ListNode* mid =head;    while((mid-&gt;next!=NULL)&amp;&amp;(half--))    &#123;        mid=mid-&gt;next;    &#125;    return mid;&#125;\n\nå¯¹äºé“¾è¡¨ojé¢˜ç›®ï¼Œleetcodeä¼šæŠŠè¿™ä¸ªé“¾è¡¨çš„å½¢å¼ä»¥æ³¨é‡Šçš„æ–¹å¼æ ‡æ³¨åœ¨æœ€å‰é¢\n\nè§£æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆï¼ˆå¾ˆçˆ½ğŸ‘ï¼‰\nè¿™ç§æ–¹æ³•å®ç°èµ·æ¥ä¹Ÿå¾ˆæ˜¯ç®€æ´ï¼Œä¹Ÿå‡»è´¥äº†æ›´å¤šç”¨æˆ·ï¼\nstruct ListNode* middleNode(struct ListNode* head)&#123;    if(head==NULL)        return NULL;    struct ListNode*fast=head;    struct ListNode*slow=head;    while(fast&amp;&amp;fast-&gt;next)    &#123;        fast=fast-&gt;next-&gt;next;        slow=slow-&gt;next;    &#125;    return slow;&#125;\n\n\n\nç¬¬ä¸‰é¢˜ï¼šOR36 é“¾è¡¨çš„å›æ–‡ç»“æ„ğŸ‘¨â€ğŸ”§\nç‰›å®¢ç½‘ï¼šOR36 é“¾è¡¨çš„å›æ–‡ç»“æ„\n\n\nè¿™é“é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„æ–¹æ³•\n\nå…ˆæ‰¾åˆ°è¿™ä¸²é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼ˆå¯ä»¥ç”¨åˆ°876é‡Œçš„å‡½æ•°ï¼‰\n\nå†å°†è¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„é“¾è¡¨é€†ç½®ï¼ˆ206åè½¬é“¾è¡¨ï¼‰\n\n\n1-2-3-2-1//é€†ç½®å1-2-1-2-3\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€†ç½®å‡½æ•°å¹¶ä¸ä¼šæ”¹å˜ç¬¬ä¸€ä¸ª2çš„nextèŠ‚ç‚¹ï¼Œå®ƒä¾æ—§æ˜¯é“¾æ¥åœ¨3ä¸Šçš„\n//è¿›è¡Œéå†åˆ¤æ–­1-2-(3)1-2-3\n\nè¿™æ ·æˆ‘ä»¬å°±èƒ½åˆ¤æ–­å‡ºè¯¥é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡ç»“æ„äº†ï¼\n\nå¼€å§‹æ•²ä»£ç ï¼Œå‘ç°ç‰›å®¢ç½‘ä¸Šåªæœ‰C++çš„é€‰é¡¹ï¼Œæ²¡æœ‰Cè¯­è¨€\n\nå®é™…ä¸Šï¼ŒC++ç¼–è¯‘å™¨éƒ½æ˜¯æ”¯æŒCè¯­è¨€çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨é¢˜ç›®ç»™å‡ºçš„C++ç»“æ„ä¸‹è¿›è¡ŒCè¯­è¨€ä»£ç çš„ç¼–å†™\n\né¢˜ç›®è¦æ±‚çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªboolç±»å‹ã€‚å¦‚æœä½ ä¸äº†è§£å®ƒï¼Œå¸ƒå°”ç±»å‹æ˜¯C99å¼•å…¥çš„ï¼Œç®€å•çš„æ¥è¯´ï¼Œtureä»£è¡¨1ï¼Œfalseä»£è¡¨0\n\nåœ¨ä¹‹å‰çš„åšå®¢ä¸­æˆ‘å†™åˆ°è¿‡è¿™ä¸ªç±»å‹ğŸ‘‰ç‚¹æˆ‘\n\n\nclass PalindromeList &#123;public:    //é“¾è¡¨é€†ç½®    struct ListNode* reverseList(struct ListNode* head) &#123;        struct ListNode* newhead = NULL;        struct ListNode* cur = head;        while (cur)        &#123;            struct ListNode* next = cur-&gt;next;            cur-&gt;next = newhead;            newhead = cur;            cur = next;        &#125;        return newhead;    &#125;    //ä¸­é—´èŠ‚ç‚¹è¿”å›    //1 2 3 4  å¶æ•°ä¸ªï¼Œè¿”å›3    //1 2 3    å¥‡æ•°ä¸ªï¼Œè¿”å›2    struct ListNode* middleNode(struct ListNode* head) &#123;        if (head == NULL)            return NULL;        int count = 1;//è®¡ç®—é“¾è¡¨ä¸€å…±çš„èŠ‚ç‚¹æ•°        struct ListNode* tail = head;//æ‰¾å°¾        while (tail-&gt;next != NULL)        &#123;            tail = tail-&gt;next;            count++;        &#125;        int half = (count / 2);        //å¦‚æœæ˜¯3ç»“æœä¸º1ï¼Œå¦‚æœæ˜¯4ç»“æœä¸º2        //æ­£å¥½æ˜¯éœ€è¦ä»headå¼€å§‹å¯»æ‰¾çš„æ¬¡æ•°        struct ListNode* mid = head;        while ((mid-&gt;next != NULL) &amp;&amp; (half--))        &#123;            mid = mid-&gt;next;        &#125;        return mid;    &#125;    bool chkPalindrome(ListNode* A) &#123;        struct ListNode* mid = middleNode(A);        struct ListNode* ret = reverseList(mid);        //1 2 3 2 1 å›æ–‡é“¾è¡¨        //å…ˆé€†è½¬åé¢3ä¸ª        //1 2 1 2 3        //è¿™æ—¶å€™ç¬¬ä¸€ä¸ª2å­˜æ”¾çš„nextä¾æ—§æ˜¯ä¸‹ä¸€ä¸ª3çš„åœ°å€        //ä½¿ç”¨whileå¾ªç¯è¿›è¡Œåˆ¤æ–­ï¼Œéƒ½æ˜¯åˆ¤æ–­3æ¬¡æ˜¯å¦ç›¸ç­‰        //ç›¸ç­‰å°±æ˜¯å›æ–‡ï¼Œå¦åˆ™ä¸æ˜¯        while (A &amp;&amp; ret)        &#123;            if (A-&gt;val == ret-&gt;val)            &#123;                A = A-&gt;next;                ret = ret-&gt;next;            &#125;            else            &#123;                return false;            &#125;        &#125;        return true;    &#125;&#125;;\n\n\n\nç¬¬å››é¢˜ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹\nç‰›å®¢ç½‘ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹\n\n\nè¿™é“é¢˜æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ¥è§£å†³\nå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ï¼Œå°±éœ€è¦å¿«æŒ‡é’ˆå…ˆèµ°kæ­¥\n\nè¿™é‡Œæˆ‘å°è¯•ç”¨PSåšäº†ä¸€ä¸ªåŠ¨å›¾ï¼Œç»™å¤§ä¼™ç…ç…\n\n\nè¿™é“é¢˜ä¹Ÿæ˜¯åªæœ‰C++é€‰é¡¹ã€‚å’Œä¸Šé“é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨C++ä¸‹ç¼–å†™Cè¯­è¨€ä»£ç å°±å¯ä»¥äº†\nclass Solution &#123;public:    ListNode* FindKthToTail(ListNode* pListHead, unsigned int k) &#123;        if (pListHead == NULL)            return NULL;                struct ListNode* fast = pListHead;        struct ListNode* slow = pListHead;        int i = k;        while (i--)        &#123;            if (fast == NULL)            &#123;                return NULL;            &#125;            fast = fast-&gt;next;        &#125;        while (fast)        &#123;            fast = fast-&gt;next;            slow = slow-&gt;next;        &#125;        return slow;    &#125;&#125;;\n\n\n\nç¬¬äº”é¢˜ï¼šCM11 é“¾è¡¨åˆ†å‰²\nç‰›å®¢ç½‘ï¼šCM11 é“¾è¡¨åˆ†å‰²\n\n\nè¿™é“é¢˜æˆ‘ä½¿ç”¨äº†å¸¦å¤´èŠ‚ç‚¹çš„åšæ³•ï¼Œhead-&gt;nextç­‰åŒäºä¸å¸¦å¤´é“¾è¡¨çš„headæŒ‡é’ˆ\nclass Partition &#123;public:    ListNode* partition(ListNode* pHead, int x) &#123;    if(pHead==NULL)        return NULL;            struct ListNode* newhead=(struct ListNode*)malloc(sizeof(struct ListNode));//æ–°é“¾è¡¨-æ¯”xå°çš„éƒ¨åˆ†    struct ListNode* Bigger=(struct ListNode*)malloc(sizeof(struct ListNode));//æ¯”xå¤§çš„éƒ¨åˆ†            //è¿™é‡Œéœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„æŒ‡é’ˆæ¥éå†é“¾è¡¨ï¼Œé˜²æ­¢æ‰¾ä¸åˆ°å¤´    struct ListNode* head=newhead;    struct ListNode* big=Bigger;        while(pHead)    &#123;//éå†é‡Œé¢æ¯”xå°çš„ï¼Œé“¾æ¥åœ¨newheadä¸Š        if(pHead-&gt;val  &lt;x)        &#123;            head-&gt;next=pHead;            pHead=pHead-&gt;next;            head=head-&gt;next;                    &#125;        else        &#123;//æ¯”xå¤§çš„é“¾æ¥åœ¨biggerä¸Š            big-&gt;next=pHead;            pHead=pHead-&gt;next;            big=big-&gt;next;        &#125;    &#125;    big-&gt;next=NULL;//bigçš„æœ«å°¾éœ€è¦ç½®ç©º    head-&gt;next=Bigger-&gt;next;//è®©headçš„æœ«å°¾é“¾æ¥biggerçš„å¤´éƒ¨            struct ListNode* list=newhead-&gt;next;    free(newhead);    free(Bigger);    return list;    &#125;&#125;;\n\n\nç¬¬å…­é¢˜ï¼š21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\nleetcodeï¼š21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\n\n\nè¿™é“é¢˜çš„è§£æå°±æ”¾æ³¨é‡Šå•¦\nstruct ListNode* mergeTwoLists(struct ListNode* list1, struct ListNode* list2)&#123;    if(list1==NULL)        return list2;    if(list2==NULL)        return list1;    struct ListNode* H1=list1;    struct ListNode* H2=list2;    struct ListNode* newList=NULL;    struct ListNode* tail=NULL;    if(H1-&gt;val&lt;H2-&gt;val)//é€‰å–æ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹    &#123;        newList=H1;        tail=H1;        H1=H1-&gt;next;    &#125;    else    &#123;        newList=H2;        tail=H2;        H2=H2-&gt;next;    &#125;    while(H1 &amp;&amp; H2)//å…¶ä¸­ä¸€ä¸ªèµ°å®Œäº†ï¼Œå°±é€€å‡ºå¾ªç¯    &#123;        if(H1-&gt;val&lt;H2-&gt;val)//æ‰¾å°çš„é‚£ä¸€ä¸ªé“¾æ¥åœ¨å°¾éƒ¨        &#123;            tail-&gt;next=H1;            tail=H1;//ç­‰åŒäºtail=tail-&gt;next            H1=H1-&gt;next;        &#125;        else        &#123;            tail-&gt;next=H2;            tail=H2;//ç­‰åŒäºtail=tail-&gt;next            H2=H2-&gt;next;        &#125;    &#125;//æœ€åç»“æŸäº†ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯è°èµ°å®Œäº†ï¼ŒæŠŠå¦å¤–ä¸€ä¸ªé“¾è¡¨å‰©ä¸‹çš„éƒ¨åˆ†é“¾æ¥åœ¨å°¾éƒ¨//é“¾è¡¨æœ¬èº«æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æœ€åæ— éœ€å†è¿›è¡Œæ’åºï¼Œç›´æ¥é“¾æ¥å³å¯    if(H1)        tail-&gt;next=H1;    if(H2)        tail-&gt;next=H2;        return newList;&#125;\n\n\n\nç¬¬ä¸ƒé¢˜ï¼š160.ç›¸äº¤é“¾è¡¨\nleetcodeï¼š160. ç›¸äº¤é“¾è¡¨\n\n\né¢˜ç›®éœ€è¦æˆ‘ä»¬è¿”å›ä¸¤ä¸ªç›¸äº¤é“¾è¡¨çš„äº¤ç‚¹c1ï¼Œå¦‚æœä¸ç›¸äº¤å°±è¿”å›NULLã€‚\næœ€åä¸€è¡Œè¿˜æåˆ°äº†ï¼Œè¿™é“é¢˜ä¸èƒ½ç ´ååŸå§‹é“¾è¡¨\n\næœ¬é¢˜æ€è·¯å¦‚ä¸‹ï¼š\n\nå…ˆç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«éå†Aã€Bé“¾è¡¨ï¼Œå¾—åˆ°ä¸¤ä¸ªé“¾è¡¨é•¿åº¦\néå†å®Œæ¯•æ—¶ï¼ŒæŒ‡é’ˆå¤„åœ¨æœ«å°¾C3ï¼Œå¦‚æœæœ«å°¾ä¸ç›¸ç­‰ï¼Œå°±è¯´æ˜è¯¥é“¾è¡¨ä¸ç›¸äº¤ï¼Œè¿”å›NULL\nå¦‚æœç›¸ç­‰ï¼Œè®¡ç®—å‡ºAã€Bé“¾è¡¨çš„é•¿åº¦å·®ï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆè¿›è¡Œæ“ä½œ\nå¿«æŒ‡é’ˆä»é•¿é“¾è¡¨å¼€å§‹èµ°ï¼Œå…ˆèµ°|A-B|é•¿åº¦ã€‚ç„¶åæ…¢æŒ‡é’ˆä¹Ÿå¼€å§‹ç§»åŠ¨ï¼Œç›´åˆ°å®ƒä»¬ç›¸äº¤\n\n\nstruct ListNode *getIntersectionNode(struct ListNode *headA, struct ListNode *headB) &#123;    if((headA==NULL)||(headB==NULL))        return NULL;    int countA=1;    int countB=1;    struct ListNode *HA=headA;    struct ListNode *HB=headB;    while(HA&amp;&amp;HA-&gt;next)    &#123;        countA++;        HA=HA-&gt;next;    &#125;    while(HB&amp;&amp;HB-&gt;next)    &#123;        countB++;        HB=HB-&gt;next;    &#125;    if(HB!=HA)//ç»“å°¾ä¸ç›¸ç­‰ï¼Œè¯´æ˜ä¸ç›¸äº¤        return NULL;    int num=abs(countA-countB);    struct ListNode* fast=NULL;    struct ListNode* slow=NULL;    if(countA&gt;countB)    &#123;        fast=headA;        slow=headB;    &#125;    else    &#123;        fast=headB;        slow=headA;    &#125;    while(num--)//fastå…ˆèµ°    &#123;        fast=fast-&gt;next;    &#125;    while(fast&amp;&amp;slow)    &#123;        if(fast==slow)            return fast;        fast=fast-&gt;next;        slow=slow-&gt;next;    &#125;    return NULL;&#125;\n\n\n\nç¬¬å…«é¢˜ï¼š141.ç¯å½¢é“¾è¡¨\nleetcodeï¼š141. ç¯å½¢é“¾è¡¨\n\n\næœ¬é¢˜åªéœ€è¦æˆ‘ä»¬åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼Œæˆ‘ä»¬åŒæ ·ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€ï¼Œè¿›ç¯ä»¥åï¼Œå¿«æŒ‡é’ˆèƒ½è¿½ä¸Šåæ¥çš„æ…¢æŒ‡é’ˆï¼Œå³è¯¥é“¾è¡¨å¸¦ç¯ã€‚\n\nå¦‚æœå¿«æŒ‡é’ˆé‡åˆ°äº†NULLï¼Œå³è¯¥é“¾è¡¨ä¸å¸¦ç¯\n\né¢˜ç›®éœ€è¦è¿”å›boolç±»å‹ï¼Œå‰é¢å·²ç»æåˆ°è¿‡äº†~\n\nbool hasCycle(struct ListNode *head) &#123;    if(head==NULL)        return false;        struct ListNode * slow=head;    struct ListNode * fast=head;    struct ListNode * meet=NULL;    while(fast &amp;&amp; fast-&gt;next)    &#123;        fast=fast-&gt;next-&gt;next;        slow=slow-&gt;next;        if(fast==slow)        &#123;            return true;        &#125;    &#125;    return false;    &#125;\n\n\nç‰¹æ®Šæƒ…å†µï¼šè¿½ä¸ä¸Š\nè¿™é‡Œæœ‰ä¸€ä¸ªé™„åŠ çš„æ€è€ƒé—®é¢˜ï¼šfastæŒ‡é’ˆæ¯”slowèµ°å¾—å¿«ï¼Œå®ƒä»¬å°±ä¸€å®šèƒ½è¿½ä¸Šå—ï¼Ÿ\n\n\nç¬¬ä¹é¢˜ï¼š142.ç¯å½¢é“¾è¡¨â…¡ï¼ˆè¾ƒéš¾ğŸ˜°ï¼‰\nleetcodeï¼š142. ç¯å½¢é“¾è¡¨ II\n\nè¿™é“é¢˜æ¯”ä¸Šä¸€é“å¤šäº†ä¸€ä¸ªè¦æ±‚ï¼Œéœ€è¦æˆ‘ä»¬è¿”å›é“¾è¡¨ç¯å½¢çš„å¼€å§‹èŠ‚ç‚¹\n\nç¤ºä¾‹1é‡Œçš„å¼€å§‹èŠ‚ç‚¹ä¸º2ï¼ˆä¸‹æ ‡ä¸º1ï¼‰\nç¤ºä¾‹2é‡Œçš„å¼€å§‹èŠ‚ç‚¹ä¸º1ï¼ˆä¸‹æ ‡ä¸º0ï¼‰\n\n\n\né¢˜ç›®åˆ†æè¿™æ—¶å€™ï¼Œå•çº¯ç”¨å¿«æ…¢æŒ‡é’ˆå·²ç»ä¸è¡Œäº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æƒ³åŠæ³•æ‰¾åˆ°ç¯çš„èµ·å§‹èŠ‚ç‚¹\n\næ ‡å‡ºé•¿åº¦ï¼Œç›´çº¿éƒ¨åˆ†ä¸ºLï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“meetç©¶ç«Ÿåœ¨ç¯çš„å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Œè®¾ç¯çš„èµ·ç‚¹båˆ°meetçš„é•¿åº¦ä¸ºXï¼ˆè¿™é‡Œè¦æ³¨æ„å…ˆåé¡ºåºï¼Œé¿å…ææ··ï¼Œè§ä¸‹å›¾ï¼‰\n\nå‡è®¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªheadä»é“¾è¡¨çš„å¼€å¤´aå¼€å§‹èµ°ï¼Œä¸€ä¸ªä»meetå¼€å§‹èµ°\nå®ƒä»¬ä¸€å®šä¼šåœ¨bç‚¹ç›¸äº¤ï¼\n\nä»meetå¼€å§‹èµ°çš„æŒ‡é’ˆï¼Œåœ¨ç¯é‡Œèµ°N*C-Xçš„é•¿åº¦æ¥åˆ°b\nä»aå¼€å§‹çš„æŒ‡é’ˆï¼Œèµ°Lé•¿åº¦æ¥åˆ°b\n\nåœ¨ä¸Šä¸€é“ç›¸äº¤é¢˜ç›®ä¸­ï¼ŒfastæŒ‡é’ˆèµ°äº†L+N*C+Xçš„è·ç¦»ï¼ŒslowæŒ‡é’ˆèµ°äº†L+X\næœ¬é¢˜ä¸­ï¼ŒmeetæŒ‡é’ˆå’ŒheadæŒ‡é’ˆæ˜¯åŒé€Ÿçš„ï¼Œå³L=N*C-X\n\nåˆ†è§£ä¸€ä¸‹è¿™ä¸ªè¡¨è¾¾å¼ï¼ŒL=(N-1)*C+(C-X)\nä½ ä¼šå‘ç°ï¼ŒC-Xä¸å°±æ˜¯meetåˆ°bçš„è·ç¦»å—ï¼Ÿ\nè½¬æ¢ä¸ºæ–‡å­—è¯´æ˜ï¼Œå³meetæŒ‡é’ˆèµ°C-Xçš„é•¿åº¦æ¥åˆ°bç‚¹ï¼Œå†èµ°N-1åœˆä¸headç›¸é‡ï¼\næ•²ä»£ç åˆ†æåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ•²ä»£ç äº†~\nstruct ListNode *detectCycle(struct ListNode *head) &#123;    if (head == NULL)        return NULL;    struct ListNode* slow = head;    struct ListNode* fast = head;    struct ListNode* meet = NULL;    while (fast &amp;&amp; fast-&gt;next)    &#123;        fast = fast-&gt;next-&gt;next;        slow = slow-&gt;next;        if (fast == slow)        &#123;            meet=fast;//å¯»æ‰¾ç›¸äº¤ç‚¹            break;        &#125;    &#125;    if((fast==NULL)|| (fast-&gt;next==NULL))        return NULL;//å¦‚æœfastæ˜¯é‡åˆ°ç©ºé€€å‡ºå¾ªç¯çš„ï¼Œè¯´æ˜ä¸å¸¦ç¯    while(1)    &#123;        if(head==meet)//ç›¸é‡ç‚¹å³ä¸ºç¯çš„èµ·ç‚¹             return meet;                meet=meet-&gt;next;        head=head-&gt;next;    &#125;    return NULL;&#125;\n\n\nç¬¬åé¢˜ï¼š138.å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨ï¼ˆå¾ˆéš¾ğŸ˜±ï¼‰\nLeetCodeï¼š138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œå½“leetcodeç»™ä¸€é“é¢˜æ ‡å‡ºâ€œä¸­ç­‰â€çš„æ—¶å€™ï¼Œæˆ‘è¿™ç§èœğŸ•å°±è¦å†™Nä¹…ï¼Œæ‰€ä»¥å¯¹äºæˆ‘æ¥è¯´ï¼Œç®€å•&#x3D;æœ‰éš¾åº¦ï¼Œä¸­ç­‰&#x3D;éå¸¸éš¾ã€‚\næœ¬é¢˜è¾ƒéš¾çš„åœ°æ–¹ä¸åœ¨äºå¤åˆ¶é“¾è¡¨ï¼Œè€Œåœ¨äºå¤„ç†æ–°é“¾è¡¨çš„randomæŒ‡é’ˆ\n\nè§£æ³•ä¸€ï¼šç”¨è®¡æ•°å™¨æ‰¾åˆ°å¯¹åº”ä½ç½®\nè¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä¸¤æ¬¡éå†ï¼Œç¬¬ä¸€æ¬¡è®¡æ•°ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨æ–°çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N^2^)\nä¸è¿‡æœ¬é¢˜å¹¶æ²¡æœ‰å¯¹æ—¶é—´å¤æ‚åº¦åšå‡ºè¦æ±‚ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è‚¯å®šä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼\n\né‡ç‚¹æ¥ç…ç…è¿™ä¸ªéå¸¸å¥³å°‘çš„è§£æ³•äºŒ\nè§£æ³•äºŒï¼šå…ˆå¤åˆ¶åæ–­å¼€(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§è¿™ä¸ªè§£æ³•çš„æ€è·¯æ˜¯ï¼Œå…ˆåœ¨åŸé“¾è¡¨çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åæ’å…¥ä¸€ä¸ªå’Œå®ƒç›¸åŒçš„æ–°èŠ‚ç‚¹\n\nå†åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆè¿›è¡Œrandomçš„æŸ¥æ‰¾\n\nç¬¬ä¸€ä¸ª7çš„randomæ˜¯ç©ºï¼Œæˆ‘ä»¬ç›´æ¥ç»™æ–°çš„7randomç½®ç©º\nç¬¬äºŒä¸ª13çš„randomæŒ‡å‘å‰ä¸€ä½7ï¼Œæ–°13çš„randomæŒ‡å‘åŸ13randomçš„ä¸‹ä¸€ä½ï¼Œå³æ–°å¼€è¾Ÿçš„7\nç¬¬ä¸‰ä¸ª11çš„randomæŒ‡å‘1ï¼Œæ–°11çš„randomæŒ‡å‘åŸé“¾è¡¨1çš„ä¸‹ä¸€ä½ï¼Œå³æ–°çš„1\n\nè¿™æ ·ä¸€ä¸€å¯¹åº”ï¼Œå°±èƒ½åœ¨æ–°å¼€è¾Ÿçš„é“¾è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„randomï¼\n\næœ€åï¼Œæˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯å°†æ–°å¼€è¾Ÿçš„èŠ‚ç‚¹ä»åŸé“¾è¡¨æ–­å¼€ï¼Œé‡æ–°é“¾æ¥æˆæ–°çš„é“¾è¡¨\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥ä¸€ä¸ªâ€œå¦™â€å°±è·‘å‡ºæ¥äº†ï¼Ÿ\n\n\næœ¬é¢˜å¹¶æ²¡æœ‰è¦æ±‚ä¸æ”¹å˜åŸé“¾è¡¨ï¼Œä½†æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯æŠŠåŸé“¾è¡¨è¿˜åŸæˆåˆå§‹çŠ¶æ€\n\nç›´æ¥ä¸Šæ‰‹æ•²ä»£ç ï¼Œå•ªå•ªå•ªï¼Œä¸€æäº¤ï¼Œæ‰§è¡Œå‡ºé”™ï¼\n\n\nä»”ç»†æ‰¾äº†æ‰¾ï¼Œå‘ç°æ˜¯ç¬¬ä¸‰ä¸ªæ¿å—æœ€åå¤„ç†æœ«å°¾çš„NULLæŒ‡é’ˆæ—¶ä¼šå‡ºç°é—®é¢˜\n\næœ€åçš„ä»£ç å¦‚ä¸‹ï¼\nstruct Node* copyRandomList(struct Node* head) &#123;\tif(head==NULL)        return NULL;    //1.å¤åˆ¶åŸé“¾è¡¨    struct Node*HAED=head;//è®°å½•å¤´èŠ‚ç‚¹    while(head)//å°†æ–°é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹é“¾æ¥åœ¨åŸé“¾è¡¨ä¹‹å    &#123;        struct Node* newnode=(struct Node*)malloc(sizeof(struct Node));        newnode-&gt;val=head-&gt;val;        newnode-&gt;next=head-&gt;next;        head-&gt;next=newnode;        head=head-&gt;next-&gt;next;    &#125;    //2.é“¾æ¥æ–°é“¾è¡¨çš„random    struct Node* old=HAED;    while(old)    &#123;        struct Node* new=old-&gt;next;        if(old-&gt;random==NULL)            new-&gt;random=NULL;        else            new-&gt;random=old-&gt;random-&gt;next;        old=old-&gt;next-&gt;next;    &#125;    //3.å°†æ–°é“¾è¡¨è§£ä¸‹æ¥    struct Node* ret=HAED-&gt;next;//è®°å½•æœ€åçš„è¿”å›é“¾è¡¨    struct Node* oldlist=HAED;    while(oldlist)    &#123;        struct Node*copy=oldlist-&gt;next;        struct Node*next=copy-&gt;next;                oldlist-&gt;next=next;        if(copy-&gt;next==NULL)            copy-&gt;next=NULL;        else            copy-&gt;next=next-&gt;next;        oldlist=next;    &#125;     return ret;&#125;\n\nä¹Ÿå°±æ‰§è¡Œå‡ºé”™äº†åå‡ æ¬¡å°±æ‰¾åˆ°é”™è¯¯äº†â€¦â€¦é—®é¢˜ä¸å¤§ï¼ˆé˜¿å·´é˜¿å·´ï¼‰\n\n\nç»“è¯­ğŸ’ªåˆ·å®Œè¿™äº›é¢˜ï¼Œæœ‰æ²¡æœ‰è§‰å¾—è‡ªå·±å¯¹é“¾è¡¨çš„ç†è§£ç›´æ¥æ›´ä¸Šä¸€å±‚æ¥¼ï¼Ÿ\n\nå¦‚æœå¤§å®¶å¯¹æŸé“é¢˜æœ‰é—®é¢˜ï¼Œæˆ–è€…æœ‰æˆ‘æ²¡æœ‰è¯´æ¸…æ¥šçš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºæ¥å“¦ï¼\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["OJåˆ·é¢˜","Cè¯­è¨€","æ•°æ®ç»“æ„","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨","url":"/2022/03/28/note_data_structure/5%E5%8F%8C%E5%90%91%E5%B8%A6%E5%A4%B4%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨è¿™ä¸¤ç§ç»“æ„\n\né¡ºåºè¡¨ï¼šåšå®¢é“¾æ¥1\nå•é“¾è¡¨ï¼šåšå®¢é“¾æ¥2\né“¾è¡¨OJï¼šåšå®¢é“¾æ¥3\n\nä¹‹å‰æœ¬æ¥æ˜¯ä¸æƒ³å†™åŒé“¾è¡¨çš„åšå®¢çš„ï¼Œä½†æ˜¯çœ‹ç€è‡ªå·±çš„æ•°æ®ç»“æ„ä¸“æ å°‘äº†ä¸€partï¼Œæœ‰å¼ºè¿«ç—‡çš„æˆ‘æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œäºæ˜¯è¡¥ä¸Šäº†æœ¬ç¯‡å¤§æ°´æ–‡\n1.åŒé“¾è¡¨çš„ç»“æ„é™¤äº†å•é“¾è¡¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç»“æ„ï¼Œæ˜¯åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨ã€‚è¿™ä¸ªé“¾è¡¨çš„å½¢å¼å¦‚ä¸‹\n\nå¤´èŠ‚ç‚¹çš„prevæŒ‡å‘å°¾éƒ¨èŠ‚ç‚¹\nå°¾èŠ‚ç‚¹çš„nextæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œæ„æˆå¾ªç¯\n\n\nåˆ«çœ‹å®ƒçš„å½¢å¼æœ‰äº›å¤æ‚ï¼Œå®é™…ä»£ç çš„å®ç°ï¼Œæ¯”å•é“¾è¡¨è¿˜ç®€å•ï¼\nå› ä¸ºhead-&gt;prevæŒ‡å‘äº†å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰¾å°¾ã€‚å°¾åˆ çš„æ—¶å€™ä¹Ÿä¸éœ€è¦éå†æ‰¾å°¾èŠ‚ç‚¹çš„å‰ä¸€ä½ï¼Œå› ä¸ºå°¾èŠ‚ç‚¹çš„prevå°±å­˜æ”¾äº†å‰ä¸€ä½çš„åœ°å€ã€‚\n\n2.ä»£ç å®ç°ä¸‹é¢è´´å‡ºåŒé“¾è¡¨å®ç°çš„æºç ï¼Œå¦‚æœå¤§å®¶æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡º\nåªè¦ä½ å­¦ä¼šäº†å•é“¾è¡¨çš„ç¼–å†™ï¼Œä¹Ÿçœ‹å®Œäº†æˆ‘çš„é“¾è¡¨OJé¢˜åšå®¢ï¼Œé‚£åŒé“¾è¡¨å¯¹äºä½ æ¥è¯´è‚¯å®šæ˜¯ä¿¡æ‰‹æ‹ˆæ¥çš„\n\n2.1å¤´æ–‡ä»¶DoubleList.hå¤´æ–‡ä»¶\nå¦‚æœä½ æƒ³å°è¯•è‡ªå·±ç¼–å†™åŒé“¾è¡¨çš„ä»£ç ï¼Œå¯ä»¥å…ˆæŠŠå¤´æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„æœ¬åœ°ç¼–è¯‘å™¨ï¼Œå°†è¿™äº›å‡½æ•°çš„å®ç°æå‡ºæ¥\n#pragma once#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;assert.h&gt;// å¸¦å¤´+åŒå‘+å¾ªç¯é“¾è¡¨å¢åˆ æŸ¥æ”¹å®ç°typedef int LTDataType;typedef struct ListNode&#123;\tLTDataType data;\tstruct ListNode* next;\tstruct ListNode* prev;&#125;ListNode;// åˆ›å»ºå¹¶è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ListNode* ListCreate();// åŒå‘é“¾è¡¨é”€æ¯void ListDestory(ListNode* pHead);// åŒå‘é“¾è¡¨æ‰“å°void ListPrint(ListNode* pHead);//å€’ç€æ‰“å°ï¼Œæ£€æŸ¥åŒé“¾è¡¨æ˜¯å¦å®Œæ•´void ListPrintReverse(ListNode* pHead);// åˆ›å»ºæ–°çš„èŠ‚ç‚¹ListNode* BuyNode(LTDataType x);// åŒå‘é“¾è¡¨å°¾æ’void ListPushBack(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨å°¾åˆ void ListPopBack(ListNode* pHead);// åŒå‘é“¾è¡¨å¤´æ’void ListPushFront(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨å¤´åˆ void ListPopFront(ListNode* pHead);// åŒå‘é“¾è¡¨æŸ¥æ‰¾ListNode* ListFind(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨åœ¨posçš„å‰é¢è¿›è¡Œæ’å…¥void ListInsert(ListNode* pos, LTDataType x);// åŒå‘é“¾è¡¨åˆ é™¤posä½ç½®çš„èŠ‚ç‚¹void ListErase(ListNode* pos);\n\n2.2æºæ–‡ä»¶DoubleList.cæºæ–‡ä»¶\nè¿˜æ˜¯å»ºè®®ä½ å†™å®Œä¹‹åå†æ¥å’Œæˆ‘çš„å‡½æ•°å¯¹æ¯”å¯¹æ¯”ã€‚\nä¸€å®šè¦è®°ä½ï¼šå†™å®Œä¸€ä¸ªæ¨¡å—ï¼Œæµ‹è¯•ä¸€ä¸ªæ¨¡å—ï¼Œä¸è¦ç­‰åˆ°æœ€åå†æµ‹è¯•ï¼\n#define _CRT_SECURE_NO_WARNINGS 1#include &quot;DoubleList.h&quot;ListNode* ListCreate()&#123;\tListNode* Createnode = (ListNode*)malloc(sizeof(ListNode));\tif (Createnode == NULL)\t\tprintf(&quot;CreateNode failed\\n&quot;);\telse\t&#123;\t\tCreatenode-&gt;next = Createnode;\t\tCreatenode-&gt;prev = Createnode;\t&#125;\treturn Createnode;&#125;void ListDestory(ListNode* pHead)&#123;\tassert(pHead);\twhile (pHead-&gt;prev!=pHead)\t&#123;\t\tListNode* tail = pHead-&gt;prev;\t\tListNode* tailprev = tail-&gt;prev;\t\tfree(tail);\t\tpHead-&gt;prev = tailprev;\t&#125;\tfree(pHead);&#125;void ListPrint(ListNode* pHead)&#123;\tassert(pHead);\t\tListNode* cur = pHead-&gt;next;\twhile (cur-&gt;next!=pHead)\t&#123;\t\tprintf(&quot;%d -&gt; &quot;,cur-&gt;data);\t\tcur = cur-&gt;next;\t&#125;\tprintf(&quot;%d&quot;, cur-&gt;data);//æ‰“å°æœ€åä¸€ä¸ªèŠ‚ç‚¹\tprintf(&quot;\\n&quot;);&#125;void ListPrintReverse(ListNode* pHead)&#123;\tassert(pHead);\tListNode* tail = pHead-&gt;prev;\twhile (tail-&gt;prev != pHead)\t&#123;\t\tprintf(&quot;%d -&gt; &quot;, tail-&gt;data);\t\ttail = tail-&gt;prev;\t&#125;\tprintf(&quot;%d&quot;, tail-&gt;data);\tprintf(&quot;\\n\\n&quot;);\t&#125;ListNode* BuyNode(LTDataType x)&#123;\tListNode* Buy = (ListNode*)malloc(sizeof(ListNode));\tif (Buy == NULL)\t\tprintf(&quot;BuyNode failed\\n&quot;);\telse\t&#123;\t\tBuy-&gt;data = x;\t\tBuy-&gt;next = NULL;\t\tBuy-&gt;prev = NULL;\t&#125;\treturn Buy;&#125;void ListPushBack(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* newnode = BuyNode(x);\tListNode* tail = pHead-&gt;prev;\ttail-&gt;next = newnode;\tnewnode-&gt;next = pHead;\tnewnode-&gt;prev = tail;\tpHead-&gt;prev = newnode;&#125;void ListPopBack(ListNode* pHead)&#123;\tassert(pHead);\tListNode* tail = pHead-&gt;prev;\tListNode* tailprev = tail-&gt;prev;\tfree(tail);\ttailprev-&gt;next = pHead;\tpHead-&gt;prev = tailprev;&#125;void ListPushFront(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* newnode= BuyNode(x);\tnewnode-&gt;prev = pHead;\tnewnode-&gt;next = pHead-&gt;next;\tpHead-&gt;next = newnode;\tnewnode-&gt;next-&gt;prev = newnode;&#125;void ListPopFront(ListNode* pHead)&#123;\tassert(pHead);\tListNode* front = pHead-&gt;next-&gt;next;\tListNode* Popnode = pHead-&gt;next;//å¾…çˆ†ç ´çš„å¤´èŠ‚ç‚¹\tpHead-&gt;next = front;\tfree(Popnode);\tfront-&gt;prev = pHead;&#125;ListNode* ListFind(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* cur = pHead-&gt;next;\twhile (cur!=pHead)\t&#123;\t\tif (cur-&gt;data == x)\t\t\treturn cur;\t\telse\t\t\tcur = cur-&gt;next;\t&#125;\treturn NULL;&#125;void ListInsert(ListNode* pos, LTDataType x)&#123;\tassert(pos);\tListNode* newnode = BuyNode(x);\tListNode* Prev = pos-&gt;prev;\tPrev-&gt;next = newnode;\tnewnode-&gt;prev = Prev;\tnewnode-&gt;next = pos;\tpos-&gt;prev = newnode;&#125;void ListErase(ListNode* pos)&#123;\tassert(pos);\tListNode* Prev = pos-&gt;prev;\tListNode* Next = pos-&gt;next;\tPrev-&gt;next = pos-&gt;next;\tNext-&gt;prev = Prev;\tfree(pos);&#125;\n\næµ‹è¯•æ–‡ä»¶test.cè¿™é‡Œä¸å†ç»™å‡º\nç»“è¯­å¦‚æœä½ å¯¹ä¸Šé¢çš„ä»£ç æœ‰é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\nä¸€èµ·å‘å‰ï¼\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°æ®ç»“æ„-æ ˆï¼ˆè¯¦è§£ï¼‰","url":"/2022/03/30/note_data_structure/6%E6%A0%88/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨è¿™ä¸¤ç§ç»“æ„\n\né¡ºåºè¡¨ï¼šåšå®¢é“¾æ¥1\nå•é“¾è¡¨ï¼šåšå®¢é“¾æ¥2\né“¾è¡¨OJï¼šåšå®¢é“¾æ¥3\n\né™¤äº†å•é“¾è¡¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç»“æ„ï¼Œæ˜¯åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨ã€‚è¿™ä¸ªé“¾è¡¨çš„å½¢å¼å¦‚ä¸‹\n\nå¤´èŠ‚ç‚¹çš„prevæŒ‡å‘å°¾éƒ¨èŠ‚ç‚¹\nå°¾èŠ‚ç‚¹çš„nextæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œæ„æˆå¾ªç¯\n\n\nåˆ«çœ‹å®ƒçš„å½¢å¼æœ‰äº›å¤æ‚ï¼Œå®é™…ä»£ç çš„å®ç°ï¼Œæ¯”å•é“¾è¡¨è¿˜ç®€å•ï¼\nå› ä¸ºhead-&gt;prevæŒ‡å‘äº†å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰¾å°¾ã€‚å°¾åˆ çš„æ—¶å€™ä¹Ÿä¸éœ€è¦éå†æ‰¾å°¾èŠ‚ç‚¹çš„å‰ä¸€ä½ï¼Œå› ä¸ºå°¾èŠ‚ç‚¹çš„prevå°±å­˜æ”¾äº†å‰ä¸€ä½çš„åœ°å€ã€‚\næ‰€ä»¥è¿™é‡Œå°±å·æ‡’ä¸å†™åšå®¢äº†ï¼åæ­£ä¹Ÿæ²¡å•¥äººçœ‹ğŸ˜­\n\nå¥½å§ï¼Œæœ€åæˆ‘è¿˜æ˜¯å†™äº†ä¸€ç¯‡æ°´æ–‡ğŸ‘‰ç‚¹æˆ‘\n\n\næœ¬ç¯‡åšå®¢è®²è¿°çš„æ˜¯å¦å¤–ä¸€ä¸ªç‰¹åˆ«çš„çº¿æ€§è¡¨ï¼Œæ ˆ\n1.ä»€ä¹ˆæ˜¯æ ˆæ•°æ®ç»“æ„é‡Œçš„æ ˆï¼Œå’Œå‡½æ•°æ ˆå¸§ä¸­çš„â€œæ ˆâ€æœ‰ä¸€å®šç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šå®ƒä»¬å®Œå…¨ä¸åŒ\næ ˆä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œå®ƒåªå…è®¸åœ¨è¡¨çš„ä¸€å¤´æ·»åŠ ã€åˆ é™¤æ•°æ®ã€‚\næ‰€æœ‰çš„æ•°æ®éƒ½éµå¾ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„åŸåˆ™\n\nå‹æ ˆï¼šæ ˆçš„æ’å…¥æ“ä½œå«åšè¿›æ ˆ&#x2F;å‹æ ˆ&#x2F;å…¥æ ˆï¼Œæ–°çš„æ•°æ®å­˜æ”¾åœ¨æ ˆé¡¶\nå‡ºæ ˆï¼šæ ˆçš„åˆ é™¤æ“ä½œï¼Œå…ˆåˆ é™¤æ ˆé¡¶çš„æ•°æ®\n\n\n2.æ ˆçš„å®ç°æ ˆå¯ä»¥ç”¨æ•°ç»„æˆ–è€…é“¾è¡¨æ¥å®ç°ï¼Œç›¸å¯¹è€Œè¨€ï¼Œæ•°ç»„çš„æ–¹æ³•æ›´ä¼˜\nå› ä¸ºæ•°ç»„åœ¨å°¾æ’æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰¾åˆ°å°¾ã€‚è€Œå•é“¾è¡¨éœ€è¦éå†æ‰¾å°¾ï¼Œè€—æ—¶è¾ƒé•¿ã€‚\n\næ˜¯ä¸æ˜¯æœ‰äº›ä¼¼æ›¾ç›¸è¯†å‘¢ï¼Ÿæ²¡é”™ï¼Œå®é™…ä¸Šæ ˆåŒºå°±æ˜¯ä¸€ä¸ªåªèƒ½å°¾æ’+å°¾åˆ çš„é¡ºåºè¡¨\n3.æ•²ä»£ç ï¼3.1å¤´æ–‡ä»¶å…ˆç”¨å¤´æ–‡ä»¶å†™å¥½å’±ä»¬çš„å¤§çº²ï¼Œç„¶ååœ¨æ¥ä¸€ä¸€å®ç°è¿™äº›ä»£ç \n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;assert.h&gt;#include &lt;stdbool.h&gt;// æ”¯æŒåŠ¨æ€å¢é•¿çš„æ ˆtypedef int STDataType;typedef struct Stack&#123;\tSTDataType* a;\tint top; // æ ˆé¡¶\tint capacity; // å®¹é‡&#125;Stack;// åˆå§‹åŒ–æ ˆvoid StackInit(Stack* ps);// é”€æ¯æ ˆvoid StackDestroy(Stack* ps);// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data);// å‡ºæ ˆvoid StackPop(Stack* ps);// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps);// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps);// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›falseï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›truebool StackEmpty(Stack* ps);//æ‰“å°void StackPrint(Stack* ps);\n\nå’Œé¡ºåºè¡¨ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°æ¥è·å–æ ˆé¡¶å…ƒç´ ï¼Œè¿™ä¸€ç‚¹åœ¨å¾ˆå¤šOJé¢˜ç›®ä¸­éƒ½éœ€è¦ç”¨åˆ°ã€‚\n3.2å‡½æ•°å®ç°å¦‚æœä½ çœ‹è¿‡äº†æˆ‘ä¹‹å‰é¡ºåºè¡¨çš„åšå®¢ï¼Œè¿™éƒ¨åˆ†å¯¹ä½ æ¥è¯´æƒ³å¿…ä¸éš¾ã€‚\n\nå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n#include&quot;Stack.h&quot;// åˆå§‹åŒ–void StackInit(Stack* ps)&#123;\tSTDataType* new = (STDataType*)malloc(4*sizeof(STDataType) );\tif (new == NULL)\t\texit(-1);\telse\t&#123;\t\tps-&gt;a = new;\t\tps-&gt;top = 0;\t\tps-&gt;capacity = 4;\t&#125;&#125;// é”€æ¯æ ˆvoid StackDestroy(Stack* ps)&#123;\tassert(ps);\tfree(ps-&gt;a);\tps-&gt;a = NULL;\tps-&gt;capacity = 0;\tps-&gt;top = 0;&#125;// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data)&#123;\tassert(ps);\tif (ps-&gt;top == ps-&gt;capacity)//å®¹é‡æ£€æŸ¥\t&#123;\t\tSTDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);\t\tif (new == NULL)\t\t&#123;\t\t\texit(-1);\t\t&#125;\t\telse\t\t&#123;\t\t\tps-&gt;a = new;\t\t\tps-&gt;capacity *= 2;\t\t&#125;\t&#125;\tps-&gt;a[ps-&gt;top] = data;\tps-&gt;top++;&#125;// å‡ºæ ˆvoid StackPop(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top &gt; 0)\t\t(ps-&gt;top)--;&#125;// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps)&#123;\tassert(ps);\tassert(ps-&gt;top &gt; 0);\treturn ps-&gt;a[ps-&gt;top - 1];&#125;// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps)&#123;\tassert(ps);\treturn ps-&gt;top;&#125;// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top == 0)\t\treturn true;\telse\t\treturn false;&#125;void StackPrint(Stack* ps)&#123;\tassert(ps);\tint n = ps-&gt;top;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tprintf(&quot;%d &quot;, ps-&gt;a[i]);\t&#125;\tprintf(&quot;\\n&quot;);&#125;\n\nå¤§å®¶åœ¨è‡ªå·±ç¼–å†™è¿™ç§å¸¦å¤šä¸ªæ¿å—çš„ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¸€ä¸ªæ¿å—å†™å®Œå°±æ£€æŸ¥ä¸€éï¼ä¸è¦å°†é—®é¢˜éƒ½ä¸¢ä¸€å—è§£å†³ï¼Œé‚£æ ·ä¼šéå¸¸éš¾å—çš„ï¼\n\nåœ¨å…¶ä»–ç‰ˆå—éƒ½ç¡®è®¤æ— è¯¯ä¹‹åï¼Œä¹Ÿè¦è¿‡æ¥ç…ä¸€çœ¼Destroyæ¿å—ï¼Œé¿å…å‡ºç°freeé”™è¯¯ç­‰æƒ…å†µã€‚\nè¿™ä¸ªæ¿å—æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹ï¼ˆVSå¿«æ·é”®F9ï¼‰å¹¶è°ƒè¯•çš„æ–¹æ³•æ¥æ£€æŸ¥è¯¥æ¿å—æ˜¯å¦æ­£ç¡®\n\n4.çŸ¥è¯†å·©å›ºï¼Œæ¥é“OJï¼leetcode 20 æœ‰æ•ˆçš„æ‹¬å·\nleetcodeï¼š20. æœ‰æ•ˆçš„æ‹¬å·\n\n\nè¿™é“é¢˜å°±æ˜¯ä¸€é“éå¸¸ä½¿ç”¨ç”¨æ ˆæ¥è§£å†³çš„OJé¢˜\né¢˜ç›®è¦æ±‚æˆ‘ä»¬åˆ¤æ–­ç»™å‡ºçš„å­—ç¬¦ä¸²ä¸­ï¼Œæ‹¬å·æ˜¯å¦ä¸€ä¸€å¯¹åº”\n&#123;[]&#125;//å¯¹åº”&#123;[(])&#125;//ä¸å¯¹åº”&#123;&#123;()&#125;//å°‘äº†ä¸€ä¸ªå³è¾¹æ‹¬å·ï¼Œä¸å¯¹åº”\n\nå…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿæ€è·¯å¦‚ä¸‹ï¼š\n\nç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å·¦æ‹¬å·&#123;([å…¶ä¸­ä¸€ä¸ªï¼Œå°±å…¥æ ˆ\nå¦‚æœæ˜¯å³è¾¹æ‹¬å·ï¼Œè¯´æ˜å·¦æ‹¬å·å·²ç»å…¥æ ˆå®Œæ¯•ï¼Œå¼€å§‹æ¯”å¯¹\næ ˆé¡¶çš„æ‹¬å·ä¸€å®šæ˜¯å’Œå½“å‰å³æ‹¬å·åŒ¹é…çš„ï¼Œå¦‚æœä¸æ˜¯åˆ™ä¸ºfalse\næ¯åˆ¤æ–­ä¸€æ¬¡ï¼Œå°±è®©æ ˆé¡¶çš„å·¦æ‹¬å·å‡ºæ ˆä¸€æ¬¡\n\næœ€åçš„å‡½æ•°å®ç°å¦‚ä¸‹\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSTDataTypeç±»å‹éœ€è¦æ›´æ”¹ä¸ºcharç±»å‹ï¼Œæ­¤æ—¶å­˜æ”¾çš„æ˜¯æ‹¬å·å­—ç¬¦ï¼Œå¹¶ä¸æ˜¯æ•°å­—\n\ntypedef char STDataType;typedef struct Stack&#123;\tSTDataType* a;\tint top; // æ ˆé¡¶\tint capacity; // å®¹é‡&#125;Stack;// åˆå§‹åŒ–void StackInit(Stack* ps)&#123;\tSTDataType* new = (STDataType*)malloc(sizeof(STDataType) * 4);\tif (new == NULL)\t&#123;\t\texit(-1);\t&#125;\telse\t&#123;\t\tps-&gt;a = new;\t\tps-&gt;top = 0;\t\tps-&gt;capacity = 4;\t&#125;&#125;// é”€æ¯æ ˆvoid StackDestroy(Stack* ps)&#123;\tassert(ps);\tfree(ps-&gt;a);\tps-&gt;a = NULL;\tps-&gt;capacity = 0;\tps-&gt;top = 0;&#125;// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data)&#123;\tassert(ps);\tif (ps-&gt;top == ps-&gt;capacity)\t&#123;\t\tSTDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);\t\tif (new == NULL)\t\t&#123;\t\t\texit(-1);\t\t&#125;\t\telse\t\t&#123;\t\t\tps-&gt;a = new;\t\t\tps-&gt;capacity *= 2;\t\t&#125;\t&#125;\tps-&gt;a[ps-&gt;top] = data;\tps-&gt;top++;&#125;// å‡ºæ ˆvoid StackPop(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top &gt; 0)\t\t(ps-&gt;top)--;&#125;// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps)&#123;\tassert(ps);\tassert(ps-&gt;top &gt; 0);\treturn ps-&gt;a[ps-&gt;top - 1];&#125;// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top == 0)\t\treturn true;\telse\t\treturn false;&#125;bool isValid(char * s)&#123;    Stack st;    StackInit(&amp;st);    while(*s)    &#123;        if(*s==&#x27;&#123;&#x27;||*s==&#x27;[&#x27;||*s==&#x27;(&#x27;)        &#123;            StackPush(&amp;st,*s);            s++;        &#125;        else        &#123;            if(StackEmpty(&amp;st))            &#123;                return false;            &#125;            char top=StackTop(&amp;st);//å–æ ˆé¡¶å…ƒç´             StackPop(&amp;st);//æŠŠæ ˆé¡¶åˆ é™¤            //å¦‚( &#123; è¿™ä¸¤ä¸ªï¼Œå–äº†æ ˆé¡¶&#123;ï¼Œå°±ç«‹é©¬popæ‰å®ƒ            if((*s==&#x27;&#125;&#x27;&amp;&amp;top==&#x27;&#123;&#x27;)            ||(*s==&#x27;)&#x27;&amp;&amp;top==&#x27;(&#x27;)            ||(*s==&#x27;]&#x27;&amp;&amp;top==&#x27;[&#x27;))            &#123;                s++;            &#125;            else            &#123;                StackDestroy(&amp;st);                return false;            &#125;        &#125;    &#125;    bool ret=StackEmpty(&amp;st);    //å¦‚æœä¸ºç©ºï¼Œè¯´æ˜åŒ¹é…å®Œæ¯•ï¼›éç©ºè¯´æ˜è¿˜æœ‰å‰©ä¸‹çš„å·¦æ‹¬å·    StackDestroy(&amp;st);        return ret;&#125;\n\nè¿™ä¸ªç®—æ³•çš„ç”¨æ—¶è¿˜æ˜¯éå¸¸çŸ­çš„ï¼\n\nç»“è¯­æ•°æ®ç»“æ„å­¦åˆ°è¿™é‡Œï¼Œå…¶å®åœ¨äº†è§£å®Œè¿™äº›ç»“æ„çš„çœŸæ­£æ€è·¯åï¼Œä»£ç çš„å®ç°åè€Œå¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ã€‚\nåœ¨å­¦ä¹ è¿™éƒ¨åˆ†çŸ¥è¯†çš„æ—¶å€™ï¼Œä¸€å®šè¦å¤šç”»å›¾ï¼\nå¦‚æœä½ ä¸é€‚åº”ç”¨é¼ æ ‡ç”»å›¾ï¼Œå¯ä»¥ç›´æ¥ç”¨çº¸ç¬”ç”»ï¼Œä¸€äº›éå¸¸ç®€å•çš„è‰å›¾ï¼Œä¹Ÿèƒ½æå¤§å¸®åŠ©æˆ‘ä»¬ç†è§£å½“å‰çš„ä»£ç ï¼Œæ‰¾å‡ºé—®é¢˜ğŸ‘\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘ä¸‰é“ä¾‹é¢˜è®©ä½ å½»åº•å­¦ä¼šæ ˆå’Œé˜Ÿåˆ—","url":"/2022/03/30/note_data_structure/7%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97OJ%E9%A2%98/","content":"[TOC]\nå‰è¨€æœ¬ç¯‡åšå®¢ï¼Œå°†å¸¦ç€å¤§å®¶åˆ·3é“éå¸¸ç»å…¸çš„OJé¢˜ã€‚å®ƒä»¬å¹¶ä¸ç®—ç‰¹åˆ«éš¾ï¼Œä½†å¯¹æˆ‘ä»¬ç†è§£æ•°æ®ç»“æ„ä¸­æ ˆå’Œé˜Ÿåˆ—çš„æ¦‚å¿µæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚\n\nå¦‚æœä½ è¿˜ä¸äº†è§£æ ˆï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ğŸ‘‰ç‚¹æˆ‘\né˜Ÿåˆ—çš„åšå®¢å°±ä¸å†™å•¦ï¼Œæœ¬ç¯‡åˆ·é¢˜çš„æ—¶å€™ä¼šæåˆ°é˜Ÿåˆ—çš„æ“ä½œ\n\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹å§ï¼\n\n1.ç”¨é˜Ÿåˆ—å®ç°æ ˆ\nleetcodeï¼š225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ\n\n\nè¿™é“é¢˜çš„è¦æ±‚å¾ˆç®€å•ï¼Œç”¨ä¸¤ä¸ªé˜Ÿåˆ—æ¥æ¨¡æ‹Ÿæ ˆçš„å®ç°ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œé˜Ÿåˆ—çš„æ“ä½œæ˜¯ä»åè¿›ï¼Œä»å‰å‡ºï¼Œè¿™å°±å’Œæˆ‘ä»¬åœ¨é¤å…æ’é˜Ÿä¸€æ ·ï¼Œå…ˆè¿›å…¥é¤å…æ’é˜Ÿçš„äººå…ˆå¾—åˆ°åº§ä½ã€‚\nè€Œæ ˆæ˜¯éµå¾ªä¸Šè¿›ä¸Šå‡ºçš„ï¼Œå³æ ˆåªèƒ½åœ¨æ ˆé¡¶æ’å…¥å…ƒç´ å’Œåˆ é™¤å…ƒç´ \nä¸¤ä¸ªé˜Ÿåˆ—è¦å¦‚ä½•ç»“åˆï¼Œæ‰èƒ½å®ç°æ ˆçš„è¦æ±‚å‘¢ï¼Ÿ\n1.1æ€è·¯é¦–å…ˆæˆ‘ä»¬è®²æ•°æ®pushåˆ°å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—ä¸­\n\nå¦‚æœè¦è®¿é—®æ­¤æ—¶çš„æ ˆé¡¶ï¼Œä½¿ç”¨é˜Ÿåˆ—ä¸­çš„tailå°¾æŒ‡é’ˆæ¥è®¿é—®ï¼Œå³é¢˜ç›®è¦æ±‚çš„TOPå‡½æ•°\nå½“æˆ‘ä»¬éœ€è¦popæ•°æ®çš„æ—¶å€™ï¼Œå°†é˜Ÿåˆ—ä¸­çš„N-1ä¸ªæ•°æ®å…¨éƒ¨ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œå†å°†æœ€åçš„æ ˆé¡¶æ•°æ®åˆ é™¤å¹¶è¿”å›\n\næœ€ç»ˆçš„ç›®çš„å°±æ˜¯ä¿è¯ä¸€ä¸ªé˜Ÿåˆ—ä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜æ•°æ®\n\n\nè¿™æ ·å°±è¾¾æˆäº†æ ˆåªèƒ½åœ¨æ ˆé¡¶åˆ é™¤æ•°æ®çš„è¦æ±‚\næœ€åè¿˜æœ‰ä¸€ä¸ªå‡½æ•°æ˜¯boolean empty() å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\n\nå½“ä¸¤ä¸ªé˜Ÿåˆ—ä¸­éƒ½æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨¡æ‹Ÿçš„æ ˆå°±æ˜¯ç©ºçš„ï¼›\nåªè¦å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå°±ä»£è¡¨è¿™ä¸ªæ ˆæ˜¯æœ‰æ•°æ®çš„ã€‚\n\n1.2é˜Ÿåˆ—çš„ä»£ç ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™é“é¢˜ä¸­å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬åˆå§‹çš„é˜Ÿåˆ—ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦â€œé€ è½®å­â€ï¼Œå°†è‡ªå·±å†™çš„Cè¯­è¨€é˜Ÿåˆ—ä»£ç æ”¾åœ¨å‰å¤´\n\nè¿™ä¹Ÿæ˜¯Cè¯­è¨€åœ¨å†™ä¸€äº›OJé¢˜ç›®æ—¶ä¸æ–¹ä¾¿çš„åŸå› \n\n\nè¿™é‡Œæˆ‘è´´å‡ºä¸€ä¸ªé˜Ÿåˆ—çš„ä»£ç ï¼Œå¤§å®¶å¯ä»¥å¤åˆ¶åˆ°è‡ªå·±çš„ç¼–è¯‘å™¨ä¸Šæµ‹è¯•ä¸€ä¸‹ã€‚\nå¦‚æœæœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n\nå’Œæ ˆçš„ä»£ç å®ç°ä¸åŒï¼Œé˜Ÿåˆ—ä½¿ç”¨é“¾è¡¨çš„æ–¹å¼æ›´åŠ æ–¹ä¾¿ã€‚å…¶ç›¸å½“äºä¸€ä¸ªåªèƒ½å°¾æ’å’Œå¤´åˆ çš„å•é“¾è¡¨\nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ‰¾å°¾è¿›è¡Œå°¾æ’ï¼Œè¿™é‡Œå®šä¹‰äº†å¦å¤–ä¸€ä¸ªç»“æ„ä½“ç±»å‹Queueï¼Œå…¶ä¸­tailæŒ‡é’ˆæŒ‡å‘é“¾è¡¨çš„å°¾éƒ¨ï¼Œæ–¹ä¾¿å°¾æ’ï¼ˆå¦åˆ™æ¯æ¬¡å°¾æ’éƒ½éœ€è¦éå†ï¼‰\n\ntypedef int QDataType;typedef struct QueueNode{\tQDataType data;\tstruct QueueNode* next;}QNode;typedef struct Queue{//è¿™ä¸ªç»“æ„ä½“é‡Œæœ‰ä¸¤ä¸ªæŒ‡é’ˆ\tQNode* head;//å¤´\tQNode* tail;//å°¾}Queue;//åˆå§‹åŒ–void QueueInit(Queue* pq){\tassert(pq);\tpq-&gt;head = NULL;\tpq-&gt;tail = NULL;}//æ‘§æ¯void QueueDestory(Queue* pq){\tassert(pq);\tQNode* findtail = pq-&gt;head;//æ‰¾å°¾æŒ¨ä¸ªæŒ¨ä¸ªfree\twhile (findtail)\t{\t\tQNode* next = findtail-&gt;next;\t\tfree(findtail);\t\tfindtail = next;\t}\tpq-&gt;head = NULL;\tpq-&gt;tail = NULL;}//æ’å…¥ï¼ˆå°¾æ’ï¼‰void QueuePush(Queue* pq, QDataType x){\tassert(pq);\tQNode* newnode = (QNode*)malloc(sizeof(QNode));\tif (newnode == NULL)\t{\t\tprintf(\"Push err\\n\");\t\texit(-1);\t}\tnewnode-&gt;data = x;\tnewnode-&gt;next = NULL;\tif (pq-&gt;tail == NULL)\t{\t\tassert(pq-&gt;head == NULL);\t\tpq-&gt;head = pq-&gt;tail = newnode;\t}\telse\t{\t\tpq-&gt;tail-&gt;next = newnode;\t\tpq-&gt;tail = newnode;\t}\treturn;}//åˆ é™¤ï¼ˆå¤´åˆ ï¼‰void QueuePop(Queue* pq){\tassert(pq);\tassert(pq-&gt;head &amp;&amp; pq-&gt;tail);//åˆ¤æ–­æ˜¯å¦ä¸ºç©º\tif (pq-&gt;head-&gt;next == NULL)\t{\t\tfree(pq-&gt;head);\t\tpq-&gt;head = NULL;\t\tpq-&gt;tail = NULL;\t}\telse\t{\t\tQNode* next = pq-&gt;head-&gt;next;\t\tfree(pq-&gt;head);\t\tpq-&gt;head = next;\t}}//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºbool QueueEmpty(Queue* pq){\tassert(pq);\t//åœ¨Cä¸­boolç±»å‹å’Œintç±»å‹å¯ä»¥ç›´æ¥æ··ç”¨\treturn pq-&gt;head == NULL &amp;&amp; pq-&gt;tail == NULL;}//è¿”å›å®ƒçš„é•¿åº¦size_t QueueSize(Queue* pq){\tassert(pq);\tsize_t size = 0;\tQNode* findtail = pq-&gt;head;\twhile (findtail)\t{\t\tsize++;\t\tfindtail = findtail-&gt;next;\t}\treturn size;}//è¿”å›å¤´QDataType QueueFront(Queue* pq){\tassert(pq);\tassert(pq-&gt;head);\treturn pq-&gt;head-&gt;data;}//è¿”å›å°¾éƒ¨QDataType QueueBack(Queue* pq){\tassert(pq);\tassert(pq-&gt;tail);\treturn pq-&gt;tail-&gt;data;}\n\n1.3æœ¬é¢˜çš„ä»£ç å°†ä¸Šè¿°çš„é˜Ÿåˆ—ä»£ç æ‹·è´åœ¨é¢˜ç›®æ‰€ç»™æ¨¡æ¿ä¹‹å‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™è¿™é“é¢˜éœ€è¦çš„ä»£ç å®ç°äº†\n//åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—typedef struct {\tQueue q1;\tQueue q2;} MyStack;MyStack* myStackCreate() {\tMyStack* pst = (MyStack*)malloc(sizeof(MyStack));    //å› ä¸ºæ˜¯åœ¨å‡½æ•°ä¸­ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åŠ¨æ€å†…å­˜ç®¡ç†\tif (pst == NULL)//mallocå¯èƒ½å¤±è´¥\t\treturn NULL;\tQueueInit(&amp;pst-&gt;q1);//ç›´æ¥è°ƒç”¨é˜Ÿåˆ—çš„å‡½æ•°è¿›è¡Œåˆå§‹åŒ–\tQueueInit(&amp;pst-&gt;q2);\treturn pst;}void myStackPush(MyStack* obj, int x) {\tassert(obj);\t//åœ¨pushçš„æ—¶å€™ï¼Œéœ€è¦æ‰¾åˆ°ä¸ä¸ºç©ºçš„é˜Ÿåˆ—è¿›è¡Œpush\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\tQueuePush(&amp;obj-&gt;q1, x);\t}\telse\t{\t\tQueuePush(&amp;obj-&gt;q2, x);\t}}int myStackPop(MyStack* obj) {\tassert(obj);\t//é€šè¿‡åˆ¤æ–­æ‰¾åˆ°ä¸ºç©ºå’Œä¸ä¸ºç©ºçš„é˜Ÿåˆ—\tQueue* empty = &amp;obj-&gt;q1;\tQueue* unempty = &amp;obj-&gt;q2;\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\tempty = &amp;obj-&gt;q2;\t\tunempty = &amp;obj-&gt;q1;\t}\twhile (QueueSize(unempty) &gt; 1)\t{\t\tint top1 = QueueFront(unempty);\t\tQueuePush(empty, top1);\t\tQueuePop(unempty);\t}\t//å…ˆä¿å­˜topï¼Œå†è¿›è¡Œå‡ºé˜Ÿåˆ—æ“ä½œ\tint top = QueueFront(unempty);\tQueuePop(unempty);\treturn top;//è¿”å›æŠ¥é”™çš„top}int myStackTop(MyStack* obj) {\tassert(obj);\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\treturn QueueBack(&amp;obj-&gt;q1);\t}\telse\t{\t\treturn QueueBack(&amp;obj-&gt;q2);\t}}bool myStackEmpty(MyStack* obj) {\tassert(obj);\t//åªæœ‰ä¸¤ä¸ªé˜Ÿåˆ—éƒ½ä¸ºç©ºçš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿçš„æ ˆæ‰æ˜¯ç©º\treturn QueueEmpty(&amp;obj-&gt;q1) &amp;&amp; QueueEmpty(&amp;obj-&gt;q2);}void myStackFree(MyStack* obj) {\tassert(obj);\tQueueDestory(&amp;obj-&gt;q1);\tQueueDestory(&amp;obj-&gt;q2);\tfree(obj);//å› ä¸ºæ˜¯åŠ¨æ€å†…å­˜å¼€è¾Ÿçš„ï¼Œæ‰€ä»¥æœ€åé”€æ¯çš„æ—¶å€™è¿˜éœ€è¦é”€æ¯æ¨¡æ‹Ÿæ ˆçš„ç»“æ„ä½“\treturn;}\n\n16ä¸ªç”¨ä¾‹éƒ½å®Œç¾é€šè¿‡äº†ï¼\n\n\n2.ç”¨æ ˆå®ç°é˜Ÿåˆ—\nleetcode: 232. ç”¨æ ˆå®ç°é˜Ÿåˆ—\n\n\næœ‰äº†ä¸Šä¸€é“é¢˜ç›®çš„ç»éªŒï¼Œè¿™é“é¢˜çš„å®ç°å°±ä¸é‚£ä¹ˆå›°éš¾äº†ã€‚\n2.1æ€è·¯\næ ˆçš„ç‰¹ç‚¹æ˜¯åªèƒ½åœ¨æ ˆé¡¶åˆ é™¤å’Œæ’å…¥æ•°æ®\n\né˜Ÿåˆ—éœ€è¦åœ¨é˜Ÿå°¾æ’å…¥æ•°æ®ï¼Œåœ¨å¯¹å¤´åˆ é™¤æ•°æ®\n\n\nå‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸‹é¢è¿™ä¸¤ä¸ªæ ˆï¼Œç¬¬ä¸€ä¸ªæ ˆé‡Œé¢å­˜æ”¾äº†1 2 3 4çš„æ•°æ®\néœ€è¦è¿›è¡Œé˜Ÿåˆ—çš„POPæ“ä½œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤çš„æ˜¯æœ€åº•éƒ¨çš„1\n\nå¯ä»¥å…ˆå°†æ ˆä¸­çš„æ‰€æœ‰æ•°æ®popå¹¶pushåˆ°å¦å¤–ä¸€ä¸ªç©ºæ ˆä¸­ï¼Œå†å°†æœ€åä¸€ä¸ªæ•°æ®å­˜æ”¾ååˆ é™¤ï¼Œè¿”å›å­˜æ”¾çš„å€¼ã€‚\n\nè¿™éƒ¨åˆ†æ“ä½œä¸ç¬¬ä¸€é¢˜ä¸­çš„æ“ä½œå¾ˆåƒï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šåœ¨æ–°çš„æ ˆé‡Œçš„æ•°æ®å’Œæˆ‘ä»¬åŸæœ¬æƒ³è¦çš„æ•°æ®æ˜¯ç›¸åçš„ï¼\n1 2 3 4 åˆ é™¤1ååŸæœ¬æ•°æ® 2 3 4å®é™…æ•°æ® 4 3 2\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯æŠŠè¿™ä¸€æ‰¹æ•°æ®å†å¤åˆ¶å›åŸæœ¬çš„æ ˆä¸­ï¼Œå®ƒçš„é¡ºåºå°±å¯¹äº†\n\nè€Œæˆ‘è‡ªå·±å†™çš„æ ˆæ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œé¢˜ç›®è¦æ±‚çš„peekå‡½æ•°å¯ä»¥ç›´æ¥é€šè¿‡è®¿é—®éç©ºæ ˆçš„0ä¸‹æ ‡å…ƒç´ å¾—åˆ°\nemptyå‡½æ•°åŒç†ï¼Œåªæœ‰ä¸¤ä¸ªæ ˆä¸­éƒ½ä¸ºç©ºæ—¶ï¼Œæ¨¡æ‹Ÿçš„é˜Ÿåˆ—æ‰æ˜¯ç©ºçš„\n\n2.2æ ˆçš„ä»£ç æ ˆçš„å®ç°åœ¨æœ¬æ–‡å¼€å¤´çš„åšå®¢é“¾æ¥ä¸­æœ‰è¯¦ç»†è§£é‡Šï¼Œè¿™é‡Œä¸å†å¤è¿°\n\nå›åˆ°å¼€å¤´\n\n// æ”¯æŒåŠ¨æ€å¢é•¿çš„æ ˆtypedef int STDataType;typedef struct Stack{    STDataType* a;    int top; // æ ˆé¡¶    int capacity; // å®¹é‡}Stack;// åˆå§‹åŒ–void StackInit(Stack* ps){    STDataType* new = (STDataType*)malloc(sizeof(STDataType) * 4);    if (new == NULL)    {        exit(-1);    }    else    {        ps-&gt;a = new;        ps-&gt;top = 0;        ps-&gt;capacity = 4;    }}// é”€æ¯æ ˆvoid StackDestroy(Stack* ps){    assert(ps);    free(ps-&gt;a);    ps-&gt;a = NULL;    ps-&gt;capacity = 0;    ps-&gt;top = 0;}// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data){    assert(ps);    if (ps-&gt;top == ps-&gt;capacity)    {        STDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);        if (new == NULL)        {            exit(-1);        }        else        {            ps-&gt;a = new;            ps-&gt;capacity *= 2;        }    }    ps-&gt;a[ps-&gt;top] = data;    ps-&gt;top++;}// å‡ºæ ˆvoid StackPop(Stack* ps){    assert(ps);    if (ps-&gt;top &gt; 0)        (ps-&gt;top)--;}// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps){    assert(ps);    assert(ps-&gt;top &gt; 0);    return ps-&gt;a[ps-&gt;top - 1];}// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps){    assert(ps);    return ps-&gt;top;}// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps){    assert(ps);    if (ps-&gt;top == 0)        return true;    else        return false;}void StackPrint(Stack* ps){    assert(ps);    int n = ps-&gt;top;    for (int i = 0; i &lt; n; i++)    {        printf(\"%d \", ps-&gt;a[i]);    }    printf(\"\\n\");}\n\n2.3æœ¬é¢˜çš„ä»£ç typedef struct {    Stack st1;    Stack st2;} MyQueue;MyQueue* myQueueCreate() {    MyQueue* qt = (MyQueue*)malloc(sizeof(MyQueue));    if (qt == NULL)        return NULL;    StackInit(&amp;qt-&gt;st1);    StackInit(&amp;qt-&gt;st2);    return qt;}void myQueuePush(MyQueue* obj, int x) {    assert(obj);    if (!StackEmpty(&amp;obj-&gt;st1))    {        StackPush(&amp;obj-&gt;st1, x);    }    else    {        StackPush(&amp;obj-&gt;st2, x);    }    return;}int myQueuePop(MyQueue* obj) {    assert(obj);    Stack* empty = &amp;obj-&gt;st1;    Stack* nonempty = &amp;obj-&gt;st2;    if (!StackEmpty(&amp;obj-&gt;st1))    {        Stack* empty = &amp;obj-&gt;st2;        Stack* nonempty = &amp;obj-&gt;st1;    }    while (StackSize(nonempty) &gt; 1)    {        int top1 = StackTop(nonempty);        StackPush(empty, top1);        StackPop(nonempty);    }    int top = StackTop(nonempty);    StackPop(nonempty);//åŸæœ¬ä¸ä¸ºç©ºçš„çš„æœ€åä¸€ä¸ªtopè¢«å–å‡º    //éœ€è¦å°†æ•°æ®å†å€’æ”¾ä¸€éï¼Œå¦åˆ™è®¿é—®æ˜¯åçš„    while (StackSize(empty) &gt; 0)    {        int top2 = StackTop(empty);        StackPush(nonempty, top2);        StackPop(empty);    }    return top;}int myQueuePeek(MyQueue* obj) {    assert(obj);    Stack* empty = &amp;obj-&gt;st1;    Stack* nonempty = &amp;obj-&gt;st2;    if (!StackEmpty(&amp;obj-&gt;st1))    {        Stack* empty = &amp;obj-&gt;st2;        Stack* nonempty = &amp;obj-&gt;st1;    }    //è¿™é‡Œçš„æ ˆæ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®é¦–ä½å…ƒç´     return nonempty-&gt;a[0];}bool myQueueEmpty(MyQueue* obj) {    assert(obj);    return StackEmpty(&amp;obj-&gt;st1) &amp;&amp; StackEmpty(&amp;obj-&gt;st2);}void myQueueFree(MyQueue* obj) {    assert(obj);    StackDestroy(&amp;obj-&gt;st1);    StackDestroy(&amp;obj-&gt;st2);    free(obj);    return;}\n\n\n\n3.è®¾è®¡å¾ªç¯é˜Ÿåˆ—\nleetcodeï¼š622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—\n\n\nè¿™é“é¢˜æœ€ä¸»è¦çš„çªç ´å£ï¼Œå°±æ˜¯å¼„æ˜ç™½é¢˜ç›®æ‰€è¯´çš„å¾ªç¯é˜Ÿåˆ—çš„æ„æ€\nå®é™…ä¸Šä»–å°±æ˜¯ä¸€ä¸ªä¸‹å›¾æ‰€ç¤ºçš„é˜Ÿåˆ—ï¼Œå½“tailä½¿ç”¨å®Œå·²æœ‰ç©ºé—´åï¼Œå¯ä»¥è·³åˆ°å‰é¢ç»§ç»­ä½¿ç”¨ä¹‹å‰å¼€è¾Ÿå¥½çš„ç©ºé—´ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„æ‰©å®¹ç©ºé—´ã€‚\n\nä¸ºäº†æ–¹ä¾¿æ‰¾å¤´ä»¥åŠæ‰¾å°¾ï¼Œæœ¬ä½“å°†ä½¿ç”¨æ•°ç»„æ–¹å¼æ¥å®ç°å®ƒçš„ä»£ç \n\n3.1æ€è·¯ç¡®å®šæ˜¯æ•°ç»„å½¢å¼åï¼Œæˆ‘ä»¬å°±è¦æ¥æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—ä¸ºç©ºï¼Ÿä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—æ˜¯æ»¡ï¼Ÿ\n3.1.1åˆ¤æ–­æ˜¯å¦ä¸ºç©ºè¿™ä¸ªçœ‹èµ·æ¥å¥½åƒéå¸¸ç®€å•ï¼Œåªè¦å¤´æŒ‡é’ˆå’Œå°¾æŒ‡é’ˆç›¸åŒï¼Œé˜Ÿåˆ—ä¸å°±æ˜¯ç©ºçš„äº†å˜›ï¼\n\nè¿™ä¸ªæƒ³æ³•å¯¹ï¼Œä½†æœ‰æœ‰ç‚¹ç‘•ç–µï¼Œå³æˆ‘ä»¬æ€ä¹ˆç•Œå®šç©ºå’Œéç©ºçš„ç•Œé™ï¼Ÿ\n3.1.2åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡æ¯æ’å…¥ä¸€ä¸ªæ•°æ®ï¼ŒtailæŒ‡é’ˆå°±ä¼šå¾€å++ä¸€æ¬¡ï¼ŒæŒ‡å‘å·²æœ‰æ•°æ®çš„ä¸‹ä¸€ä½\n\nå½“ä¸‹ä¸€ä½ä¹Ÿè¢«è£…å¥½äº†æ•°æ®ä¹‹åï¼Œtailå°±ä¼šå›åˆ°å¼€å¤´ï¼Œæ¥åˆ°frontæŒ‡é’ˆçš„ä½ç½®ï¼\n\nè¿™ä¸ªæ—¶å€™ï¼Œtail=frontï¼Œä½†æ˜¯é˜Ÿåˆ—å®é™…ä¸Šå·²ç»æ»¡äº†ï¼\nè¿™å°±è®©æˆ‘ä»¬ä¸å¾—ä¸æ€è€ƒï¼Œå¦‚ä½•å°†è¿™ä¸¤ç§æƒ…å†µåŒºåˆ†å¼€æ¥ï¼Ÿ\n\nå•Šå“ˆå“ˆå“ˆå“ˆï¼Œç­”æ¡ˆæ¥å–½ï¼š\n\nå¦‚æœéœ€è¦çš„æ•°æ®ä¸ºKä¸ªï¼Œä¸ºé˜Ÿåˆ—çš„æ•°ç»„å¼€è¾ŸK+1ä¸ªç©ºé—´\n\nè¿™æ—¶å€™ï¼Œåªè¦tail+1=frontï¼Œå°±ä»£è¡¨é˜Ÿåˆ—å·²ç»æ»¡äº†ã€‚å¤šå‡ºæ¥çš„è¿™ä¸€ä¸ªç©ºé—´ä¸å­˜æ”¾æ•°æ®\n\næ³¨æ„ï¼šè¿™ä¸ªç©ºé—´ä¸ä¸€å®šæ˜¯æœ€æœ«å°¾çš„å“ªä¸€ä¸ªï¼Œå®ƒä¼šéšç€é˜Ÿåˆ—çš„æ’å…¥ã€åˆ é™¤æ“ä½œè€Œç§»åŠ¨\nå½“tailåœ¨å°¾éƒ¨ï¼Œtail=kï¼ˆæ³¨æ„tailæ˜¯ä¸‹æ ‡è€Œä¸æ˜¯æŒ‡é’ˆï¼‰ä¸”front=0æ—¶ï¼Œé˜Ÿåˆ—ä¸ºæ»¡\n\n\nè¿™æ ·å°±å¾ˆå®Œç¾çš„æŠŠç©ºå’Œæ»¡ä¸¤ç§æƒ…å†µç»™åŒºåˆ†å¼€æ¥äº†ï¼\n\n3.2æœ¬é¢˜ä»£ç å®ç°éœ€è¦æ³¨æ„é¢˜ç›®ç»™å‡ºçš„è¿”å›å€¼è¦æ±‚ï¼Œä¾ç…§é¢˜ç›®å‡½æ•°è¦æ±‚æ¥ç¼–å†™\ntypedef struct {    int* data;    int front;    int tail;    int k;} MyCircularQueue;bool myCircularQueueIsEmpty(MyCircularQueue* obj);bool myCircularQueueIsFull(MyCircularQueue* obj);//ä¸ºäº†è®©è¿™ä¸ªå‡½æ•°èƒ½åœ¨å®ƒä¹‹å‰ä½¿ç”¨MyCircularQueue* myCircularQueueCreate(int k) {    MyCircularQueue* qt = (MyCircularQueue*)malloc(sizeof(MyCircularQueue));    if (qt == NULL)        return NULL;    qt-&gt;data = (int*)malloc(sizeof(int) * (k + 1));    qt-&gt;k = k;        qt-&gt;front = 0;    qt-&gt;tail = 0;    return qt;}bool myCircularQueueEnQueue(MyCircularQueue* obj, int value) {    assert(obj);    if (myCircularQueueIsFull(obj))        return false;    obj-&gt;data[obj-&gt;tail] = value;    //obj-&gt;tail++;    //obj-&gt;tail %= obj-&gt;k+1;//ä¿è¯æ•°æ®åœ¨æ•°ç»„å†…éƒ¨    if (obj-&gt;tail == obj-&gt;k)    {        obj-&gt;tail = 0;    }    else    {        obj-&gt;tail ++ ;    }        return true;}bool myCircularQueueDeQueue(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return false;    if (obj-&gt;front == obj-&gt;k)    {//frontåœ¨é¢„å…ˆå¼€è¾Ÿçš„ç¬¬4ä¸ªä½ç½®ä¸Š        obj-&gt;front = 0;    }    else    {        obj-&gt;front++;    }    return true;}int myCircularQueueFront(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return -1;    return obj-&gt;data[obj-&gt;front];}int myCircularQueueRear(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return -1;    if (obj-&gt;tail == 0)    {        return obj-&gt;data[obj-&gt;k];    }    else    {        return obj-&gt;data[obj-&gt;tail - 1];    }    return -1;}bool myCircularQueueIsEmpty(MyCircularQueue* obj) {    return obj-&gt;tail == obj-&gt;front;}bool myCircularQueueIsFull(MyCircularQueue* obj) {    if ((obj-&gt;tail == obj-&gt;k) &amp;&amp; obj-&gt;front == 0)    {        return true;    }    else    {        return obj-&gt;tail + 1 == obj-&gt;front;    }}void myCircularQueueFree(MyCircularQueue* obj) {    assert(obj);    free(obj-&gt;data);    free(obj);    return;}\n\n\nç»“è¯­åˆ·å®Œè¿™3é“é¢˜ï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰æ•°æ®ç»“æ„çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯å…³ç³»ç´§å¯†çš„ï¼ŸğŸ¤©\nåªè¦æˆ‘ä»¬æŠŠé“¾è¡¨å’Œé¡ºåºè¡¨çš„å†…å®¹æå¾—é€å½»ï¼Œæ ˆå’Œé˜Ÿåˆ—è¿™éƒ¨åˆ†å°±æ²¡é‚£ä¹ˆéš¾äº†ï¼\nåŠ æ²¹ï¼\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["OJåˆ·é¢˜","Cè¯­è¨€","æ•°æ®ç»“æ„","æ ˆ","é˜Ÿåˆ—","å¾ªç¯é˜Ÿåˆ—"]},{"title":"ã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯å †ï¼Ÿå †æ’åºå’ŒTopKé—®é¢˜åˆæ˜¯å¦‚ä½•å®ç°çš„","url":"/2022/04/11/note_data_structure/9%E5%A0%86%E5%92%8C%E5%A0%86%E6%8E%92%E5%BA%8F/","content":"[TOC]\nå‰è¨€åœ¨ä¸Šä¸€ç¯‡æ•°æ®ç»“æ„åšå®¢ä¸­ï¼Œæˆ‘å¸¦å¤§å®¶ä¸€èµ·å­¦ä¹ äº†æ ‘ä»¥åŠäºŒå‰æ ‘è¿™ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ã€‚\n\nã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯æ ‘ï¼ŒäºŒå‰æ ‘åˆæ˜¯å•¥ç©æ„\n\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¸¸è¢«äººæ´¥æ´¥ä¹é“çš„å †æ’åºä»¥åŠå †è¿™ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„å­˜åœ¨å§ï¼Ÿ\n\n1.å †çš„æ¦‚å¿µå †çš„æ¦‚å¿µæ˜¯åŸºäºå®Œå…¨äºŒå‰æ ‘çš„\n\nå½“k1ã€k2ã€k3â€¦â€¦knçš„æ•°æ®æŒ‰ç…§å®Œå…¨äºŒå‰æ ‘çš„æ–¹å¼å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œä¸”è¿™ä¸ªå®Œå…¨äºŒå‰æ ‘æ»¡è¶³æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶çˆ¶èŠ‚ç‚¹çš„å€¼æ—¶ï¼Œç§°è¯¥å®Œå…¨äºŒå‰æ ‘ä¸ºå †ã€‚\n\n\nå°†æ ¹èŠ‚ç‚¹æœ€å¤§çš„å †å«å¤§æ ¹å †\næ ¹èŠ‚ç‚¹æœ€å°çš„å †å«åšå°æ ¹å †\nå †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶çˆ¶èŠ‚ç‚¹çš„å€¼\n\nä¸Šç¯‡æ ‘çš„åšå®¢ä¸­å·²ç»ç»™å¤§å®¶è§£é‡Šè¿‡å¦‚ä½•ç”¨æ•°ç»„çš„æ–¹å¼å­˜æ”¾ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°å•¦ï¼\nleftchild=parent*2+1rightchild=parent*2+2parent=(child-1)/2\n\næ¥ä¸‹æ¥è¿™é“é¢˜ç›®èƒ½è€ƒå¯Ÿä½ æ˜¯å¦äº†è§£äº†å †çš„æ¦‚å¿µï¼Œè‡ªæµ‹ä¸€ä¸‹å§ï¼\n2.ä¸‹åˆ—å…³é”®å­—åºåˆ—ä¸­ï¼Œåºåˆ—ï¼ˆ ï¼‰æ˜¯å †ã€‚A .{16ï¼Œ72ï¼Œ31ï¼Œ23ï¼Œ94ï¼Œ53}B .{94ï¼Œ23ï¼Œ31ï¼Œ72ï¼Œ16ï¼Œ53}C .{16ï¼Œ53ï¼Œ23ï¼Œ94ï¼Œ31ï¼Œ72}D .{16ï¼Œ23ï¼Œ53ï¼Œ31ï¼Œ94ï¼Œ72}   âˆš\n\nç®€å•è¯´æ¥ï¼Œä»¥0ä¸‹æ ‡æ ¹ä¸ºä¾‹ï¼Œä¸‹æ ‡1å’Œ2ä¸ºæ ¹çš„å·¦å³å­©å­ã€‚å¦‚æœä»–ä»¬éƒ½æ¯”æ ¹å°ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå°æ ¹å †ï¼Œåä¹‹æ˜¯å¤§æ ¹å †ã€‚\næ¥ç€æˆ‘ä»¬å°±éœ€è¦åˆ¤æ–­ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„å­©å­éƒ½æ»¡è¶³è¿™ä¸ªç‰¹æ€§ï¼Œå¦‚æœå‡ºç°æŸä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­å’Œè¯¥èŠ‚ç‚¹çš„çˆ¶äº²ä¹‹é—´çš„å…³ç³»ä¸æ»¡è¶³æ ¹èŠ‚ç‚¹å’Œå­©å­ä¹‹é—´çš„å…³ç³»ï¼ˆå¦‚æ ¹èŠ‚ç‚¹çš„å­©å­æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œé‚£ä¹ˆè¯¥æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å­©å­éƒ½åº”è¯¥æ¯”è¯¥èŠ‚ç‚¹å¤§ï¼‰é‚£ä¹ˆè¿™ä¸ªå°±ä¸æ˜¯ä¸€ä¸ªå †\n2.å †çš„å®ç°å…ˆæ¥å°è¯•ç›´æ¥å®ç°ä¸€ä¸ªå †ï¼Œå³å°†æ•°æ®ä»¥å †çš„ç»“æ„å­˜æ”¾åœ¨æ•°ç»„ä¸­\nè¿™é‡Œç»™å‡ºä¸€ä¸ªå †çš„å¤´æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªå †çš„åŸºæœ¬æ¡†æ¶\n//å®ç°ä¸€ä¸ªå°å †#include&lt;stdio.h&gt;#include&lt;assert.h&gt;#include&lt;stdlib.h&gt;#include&lt;stdbool.h&gt;typedef int HPDataType;typedef struct Heap{\tHPDataType* a;\tsize_t size;\tsize_t capacity;}HP;void HeapInit(HP* php);//åˆå§‹åŒ–-ä¸è¿›è¡Œæ‰©å®¹æ“ä½œvoid HeapDestroy(HP* php);//æ‘§æ¯void HeapPrint(HP* php);//æ‰“å°//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(HPDataType* pa, HPDataType* pb);//æ’å…¥åå‘ä¸Šè°ƒæ•´ï¼Œä¿è¯æ•°æ®æ˜¯(å¤§/å°)å †//childä¸ºå¾…æ“ä½œæ•°æ®çš„ä¸‹æ ‡void AdjustUp(HPDataType* a, size_t child);// æ’å…¥xä»¥åï¼Œä¿æŒä»–ä¾æ—§æ˜¯(å¤§/å°)å †void HeapPush(HP* php, HPDataType x);//åˆ é™¤åå‘ä¸‹è°ƒæ•´ï¼Œä¿è¯æ•°ç»„æœ«å°¾æ•°æ®ä½ç½®æ­£ç¡®//sizeå †çš„å¤§å°ï¼›rootå¾…è°ƒèŠ‚æ•°æ®çš„ä½ç½®ï¼Œ0ä»£è¡¨æ ¹éƒ¨ï¼ˆå †é¡¶ï¼‰void AdjustDown(HPDataType* a, size_t size, size_t root);// åˆ é™¤å †é¡¶çš„æ•°æ®ã€‚(æœ€å°/æœ€å¤§)ï¼›// äº¤æ¢å †é¡¶æ•°æ®å’Œæ•°ç»„æœ«å°¾æ•°æ®void HeapPop(HP* php);//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºbool HeapEmpty(HP* php);//è¿”å›å †çš„å¤§å°ï¼ˆèŠ‚ç‚¹ä¸ªæ•°ï¼‰size_t HeapSize(HP* php);//è¿”å›å †é¡¶ï¼Œè®¿é—®æ•°ç»„ä¸‹æ ‡0HPDataType HeapTop(HP* php);\n\n2.1å‘ä¸Šè°ƒæ•´ä½ ä¼šå‘ç°ï¼Œç›¸è¾ƒäºæ™®é€šæ•°æ®ç»“æ„çš„å¢åŠ ã€åˆ é™¤æ“ä½œï¼Œå †æœ‰ä¸€ä¸ªé¢å¤–çš„æ“ä½œï¼Œå°±æ˜¯è°ƒæ•´æ•°æ®çš„ä½ç½®ã€‚\n\næœ¬ç¯‡åšå®¢ä¸å†å¯¹å‰é¢çš„åŸºç¡€æ“ä½œè¿›è¡Œè®²è§£ï¼Œå¦‚æœæœ‰ä¸ä¼šçš„å¯ä»¥è¯„è®ºåŒºæå‡ºå“¦\n\næ¯”å¦‚ä¸‹é¢è¿™å¹…å›¾é‡Œçš„æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ•°ç»„çš„æœ«å°¾æ’å…¥ä¸€ä¸ªæ•°æ®6ï¼Œå› ä¸ºå½“å‰çš„è¿™ä¸ªå †æ˜¯ä¸€ä¸ªå°å †ï¼Œå †é¡¶çš„æ•°æ®æ˜¯æœ€å°çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œå¤„ç†\n\nä½†å½“æˆ‘ä»¬æ’å…¥ä¸€ä¸ª0ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†ã€‚æˆ‘ä»¬å¿…é¡»å°†è¿™ä¸ª0è°ƒæ•´åˆ°å †é¡¶çš„ä½ç½®ï¼Œæ‰èƒ½è®©æ’å…¥æ•°æ®åçš„æ•°ç»„ä¾æ—§æ˜¯ä¸€ä¸ªå°å †\n\nè½¬æ¢ä¸ºæ ‘çš„å½¢çŠ¶ï¼Œå³ä¸ºä¸‹å›¾\n\næˆ‘ä»¬éœ€è¦è®©åœ¨å¶èŠ‚ç‚¹çš„0å¾€ä¸Šçˆ¬ï¼Œæ¥åˆ°1çš„ä½ç½®\nå¦‚ä½•æ“ä½œå‘¢ï¼Ÿ\n\nå°†è¯¥èŠ‚ç‚¹ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å¤§äºè¯¥èŠ‚ç‚¹ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªèŠ‚ç‚¹çš„ä½ç½®ã€‚\né€šè¿‡å¾ªç¯çš„æ¥å®Œæˆä¸€ä¸ªå®Œæ•´çš„å‘ä¸Šè°ƒèŠ‚å·¥ä½œ\n\nåœ¨ä¸Šç¯‡åšå®¢ä¸­ï¼Œæˆ‘æåˆ°äº†ä¸‹å›¾æ‰€ç¤ºçš„è®¡ç®—å…¬å¼ã€‚ä½¿ç”¨è¿™ä¸ªå…¬å¼æ¥è¿›è¡Œçˆ¶èŠ‚ç‚¹å’Œå­©å­èŠ‚ç‚¹çš„æŸ¥æ‰¾å·¥ä½œï¼Œå†å•ç‹¬ç¼–å†™ä¸€ä¸ªSwapå‡½æ•°è¿›è¡Œäº¤æ¢\n\nä»£ç å®ç°å¦‚ä¸‹\n//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(HPDataType* pa, HPDataType* pb) {\tint tmp = *pa;\t*pa = *pb;\t*pb = tmp;}//å‘ä¸Šè°ƒæ•´ï¼Œä¿è¯æ•°æ®æ˜¯(å¤§/å°)å †//childä¸ºå¾…è°ƒæ•´æ•°æ®çš„ä¸‹æ ‡ä½ç½®void AdjustUp(HPDataType* a, size_t child){\tassert(a);//è¿™é‡Œä¾æ—§éœ€è¦æ–­è¨€ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½å•ç‹¬è°ƒç”¨è¿™ä¸ªå‡½æ•°\twhile (child &gt; 0)\t{\t\tint parent = (child - 1) / 2;\t\tif (a[child] &lt; a[parent])//å°å †ï¼Œå°çš„æ•°æ®å¾€ä¸Šè°ƒ\t\t{\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tchild = parent;\t\t}\t\telse\t\t{\t\t\treturn;\t\t}\t}}// æ’å…¥xä»¥åï¼Œä¿æŒä»–ä¾æ—§æ˜¯(å¤§/å°)å †// O(logN)void HeapPush(HP* php, HPDataType x){\tassert(php);\tif (php-&gt;size == php-&gt;capacity)\t{\t\t//å¦‚æœå®¹é‡ä¸º0ï¼Œæ–°å®¹é‡ä¸º4ï¼›ä¸ä¸º0ï¼Œæ–°å®¹é‡ä¸ºåŸæœ¬å®¹é‡çš„2å€\t\tint newcapa = php-&gt;capacity==0 ? 4: php-&gt;capacity*2;\t\tHPDataType* tmp = (HPDataType*)realloc(php-&gt;a, newcapa*sizeof(HPDataType));//reallocæ¥æ”¶ç©ºæŒ‡é’ˆï¼Œä½œç”¨ä¸mallocç›¸åŒ\t\tif (tmp == NULL)\t\t{\t\t\tprintf(\"realloc failed!\\n\");\t\t\texit(-1);\t\t}\t\tphp-&gt;a = tmp;\t\tphp-&gt;capacity = newcapa;\t}\tphp-&gt;a[php-&gt;size] = x;//åœ¨æ•°ç»„æœ«å°¾æ’å…¥æ–°æ•°æ®\tphp-&gt;size++;\tAdjustUp(php-&gt;a, php-&gt;size - 1);}\n\nä¸‹å›¾æ›´åŠ æ¸…æ™°åœ°å±•ç¤ºäº†å‘ä¸Šè°ƒæ•´å‡½æ•°çš„ä½œç”¨è¿‡ç¨‹\n\n2.2å‘ä¸‹è°ƒæ•´åŒç†ï¼Œå½“æˆ‘ä»¬popæ‰ä¸€ä¸ªå †é¡¶çš„æ•°æ®ä¹‹åï¼Œå°±éœ€è¦è¿›è¡Œä¸€å®šçš„è°ƒæ•´ï¼Œæ¥ç»´æŒå †çš„ç»“æ„\nè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œæ ˆé¡¶çš„æ•°æ®å¹¶ä¸èƒ½ç›´æ¥popæ‰ï¼Œå› ä¸ºä¼šç ´åæ‰å †çš„ç»“æ„ã€‚\næ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªå †ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åˆ é™¤æ‰å †é¡¶çš„å…ƒç´ 1ï¼Œé‚£è¯·é—®è°æ¥å½“æ–°çš„çˆ¸çˆ¸å‘¢ï¼Ÿ\n\nä¸ºäº†æ–¹ä¾¿è¿™é‡Œæ•°æ®çš„å¤„ç†ï¼Œæˆ‘ä»¬è¦å…ˆå°†å †é¡¶çš„å…ƒç´ å’Œæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œå†è¿›è¡Œpopæ“ä½œã€‚\n\n\nå› ä¸ºæˆ‘ä»¬çš„å †æ˜¯ç”¨é¡ºåºè¡¨å®ç°çš„ï¼Œæ‰€ä»¥äº¤æ¢åï¼Œåªéœ€è®©size--å³å¯è¾¾åˆ°popçš„æ•ˆæœ\n\né‚£ä¹ˆå¦‚ä½•è®©8å¾€ä¸‹æ‰å‘¢ï¼Ÿ\nåŒæ ·æ˜¯åˆ©ç”¨ä¸Šé¢æåˆ°è¿‡çš„å…³ç³»å…¬å¼ğŸ‘‰ç‚¹æˆ‘å›åˆ°ä¹‹å‰çš„å…¬å¼å›¾\næˆ‘ä»¬éœ€è¦å°†8å’Œå®ƒçš„å­©å­è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ8å¤§äºå®ƒçš„å­©å­ï¼Œåˆ™è¿›è¡Œäº¤æ¢ã€‚\nä»£ç å®ç°å¦‚ä¸‹ğŸ‘‡\n//åˆ é™¤åå‘ä¸‹è°ƒæ•´ï¼Œä¿è¯æ•°ç»„æœ«å°¾æ•°æ®ä½ç½®æ­£ç¡®void AdjustDown(HPDataType* a, size_t size, size_t root){\tassert(a);\tint parent = root;\tint child = parent * 2 + 1;//å·¦å­©å­\twhile (child &lt; size)\t{\t\t\t\t//æ‰¾å·¦å³å­©å­ä¸­å°çš„é‚£ä¸€ä¸ª\t\tif (child + 1 &lt; size &amp;&amp; a[child] &gt; a[child + 1])\t\t{//å¦‚æœå·¦å­©å­å¤§äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t\tchild++;\t\t}\t\tif (a[child] &lt; a[parent])\t\t{\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tparent = child;\t\t\tchild = parent * 2 + 1;\t\t}\t\telse\t\t{\t\t\treturn;\t\t}\t}}// åˆ é™¤å †é¡¶çš„æ•°æ®ã€‚(æœ€å°/æœ€å¤§)ï¼›// äº¤æ¢å †é¡¶æ•°æ®å’Œæ•°ç»„æœ«å°¾æ•°æ®void HeapPop(HP* php) {\tassert(php);\tassert(php-&gt;size &gt; 0);\tSwap(&amp;php-&gt;a[0], &amp;php-&gt;a[php-&gt;size - 1]);\tphp-&gt;size--;\tAdjustDown(php-&gt;a, php-&gt;size, 0);}\n\nè¿™ä¸¤ä¸ªå‡½æ•°ä»¥å¤–çš„å…¶ä»–å‡½æ•°å°±æ¯”è¾ƒç®€å•å•¦ï¼Œç›¸ä¿¡å­¦åˆ°è¿™é‡Œçš„ä½ è‚¯å®šèƒ½è‡ªå·±æ ¹æ®å¤´æ–‡ä»¶çš„å‡½æ•°å£°æ˜æ¥è§£å†³å®ƒä»¬ã€‚å›åˆ°å¤´æ–‡ä»¶\n\nå¦‚æœä½ æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å»çœ‹çœ‹ä¹‹å‰é¡ºåºè¡¨çš„å®ç°ï¼Œæˆ–è€…åœ¨è¯„è®ºåŒºæé—®å“¦\n\n\n2.3ä»£ç æµ‹è¯•è€æ ·å­ï¼Œä¸€å®šè¦å†™å®Œä¸€ä¸ªæ¨¡å—åï¼Œç«‹é©¬æµ‹è¯•ä¸€ä¸ªæ¨¡å—ï¼\n\n3.å †æ’åºä¸Šé¢æˆ‘ä»¬è‡ªå·±å®ç°äº†ä¸€ä¸ªå †çš„ä»£ç ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¿™ä¸ªå †çš„ä»£ç ï¼Œè¿›è¡Œæ’åºæ“ä½œã€‚ï¼ˆè§£æè§ä»£ç æ³¨é‡Šï¼‰\nvoid HeapSort(int* a, int size){\t// å°å †-å‡åº\tHP hp;\tHeapInit(&amp;hp);\tfor (int i = 0; i &lt; size; ++i)\t{\t\tHeapPush(&amp;hp, a[i]);//å¾€å †å†…æ”¾å…¥æ•°æ®\t}\tsize_t j = 0;\twhile (!HeapEmpty(&amp;hp))\t{\t\ta[j] = HeapTop(&amp;hp);//æ¯ä¸€æ¬¡éƒ½å †é¡¶æ•°æ®å‡ºæ¥æ”¾å…¥æ•°ç»„\t\tj++;\t\tHeapPop(&amp;hp);//åˆ é™¤å †é¡¶æ•°æ®ï¼Œé‡æ–°æ’åº\t}\tHeapDestroy(&amp;hp);}\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°ä»£ç æˆåŠŸæ’åº\n\n3.1ä¸ºä»€ä¹ˆè¦è¿›è¡Œå †æ’åºï¼Ÿçœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼šæ’åºçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†’æ³¡æ’åºï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨åº“å‡½æ•°qsortè¿›è¡Œæ’åºï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–å †æ’åºè¿™ç§æ–¹å¼å‘¢ï¼Ÿè¿˜éœ€è¦å†™ä¸€ä¸ªå †çš„ä»£ç ï¼Œå¤šéº»çƒ¦å•Šï¼\n\nè¦æƒ³è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å†’æ³¡æ’åºç®—æ³•å’Œå †æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\n\nå†’æ³¡æ’åºï¼šéå†ä¸€éæ•°ç»„æ˜¯Nï¼Œè°ƒæ•´ä¸€æ¬¡æ•°æ®ä¹Ÿæ˜¯Nï¼Œæ—¶é—´å¤æ‚è¯»æ˜¯O(N^2^)\nå †æ’åºï¼šå»ºå †æ˜¯O(N*logN)ï¼Œå–å †é¡¶æ•°æ®æ˜¯O(N)ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N*logN)\n\nå¦‚æœä½ ä¸äº†è§£ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨\n\nå¯¹äºæˆ‘ç¤ºä¾‹ä¸­è¿™ä¸ª10ä¸ªå…ƒç´ çš„æ•°ç»„æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´å¤æ‚åº¦çš„å·®è·å¯èƒ½ä¸æ˜¯å¾ˆå¤§ï¼Œä½†å¯¹äºæµ·é‡æ•°æ®æ¥è¯´ï¼Œå·®è·å°±èµ·é£å•¦ï¼\n\n\n\næ•°æ®ä¸ªæ•°\nO(N*logN)\nO(N^2^)\n\n\n\n1000\n1000Ã—10\n1000Ã—1000\n\n\n100w\n100wÃ—20\n100wÃ—100w\n\n\nè¿™ä¸ªæ•°æ®çš„å·®è·å¯å¤§çš„å¾ˆå‘¢ï¼ğŸ˜±\n\nä»ä¸Šé¢çš„è§£é‡Šï¼Œä½ åº”è¯¥èƒ½çœ‹å‡ºæ¥ï¼Œå †æ’åºæ˜¯æŒºä¼˜ç§€ï¼\nä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬å¹¶ä¸ä¼šå†™ä¸Šé¢çš„ä»£ç ï¼Œå› ä¸ºå®ƒéœ€è¦å¦å»ºä¸€ä¸ªå †æ¥å­˜æ”¾æ•°æ®ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\næœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œèƒ½å¤Ÿåœ¨åŸæœ¬çš„æ•°ç»„ä¸Šå»ºå †ï¼Œæ¥è¿›è¡Œæ’åºå‘¢ï¼Ÿ\n3.2åœ¨åŸæœ¬æ•°ç»„ä¸Šå»ºå †ç›´å…¥ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åŸæœ¬çš„æ•°æ®ä¸Šï¼Œåˆ©ç”¨å †çš„å‘ä¸Š/ä¸‹è°ƒæ•´ç®—æ³•ï¼Œå»ºç«‹ä¸€ä¸ªå¤§å †æˆ–è€…å°å †æ¥è¿›è¡Œæ’åºã€‚\n3.2.1å‘ä¸Šè°ƒæ•´-æ’å…¥æ•°æ®ä½¿ç”¨æ’å…¥æ•°æ®çš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ å½“ä½œæ–°çš„å…ƒç´ è¿›è¡Œpushæ“ä½œï¼Œå¹¶åˆ©ç”¨å‘ä¸Šè°ƒæ•´ç®—æ³•æ¥è°ƒæ•´å®ƒä»¬çš„ä½ç½®ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™æ ·å°±èƒ½å»ºæˆä¸€ä¸ªå †ã€‚\n\nä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¯¹äºå‡åºæ¥è¯´ä¸å¤Ÿä¼˜åŒ–ï¼Œåç»­ä¼šæåˆ°å…·ä½“åŸå› \n\n3.2.2 å‘ä¸‹è°ƒæ•´-åˆ é™¤æ•°æ®å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„æ•°ç»„ï¼ˆå®ƒç°åœ¨è¿˜ä¸ç®—ä¸€ä¸ªå †ï¼‰\n\næˆ‘ä»¬å¯ä»¥ä»ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆå³8ï¼‰å¼€å§‹ï¼Œè¿›è¡Œå‘ä¸‹è°ƒæ•´ï¼Œå¦‚æœå®ƒçš„å­©å­æ¯”å®ƒå°ï¼Œåˆ™è¿›è¡Œäº¤æ¢ã€‚å¤„ç†å®Œ8åï¼Œè¿›ä¸€æ­¥å¤„ç†7ã€2ã€4â€¦â€¦\næœ€ç»ˆæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„ä¸€ä¸ªå°å †\n\næ­¤æ—¶å†å°†ç¬¬ä¸€ä¸ªæ•°æ®å’Œæœ«å°¾æ•°æ®è¿›è¡Œäº¤æ¢ï¼Œpopæ‰å®ƒï¼Œè®©å®ƒæˆä¸ºæ•°ç»„å°¾éƒ¨çš„æ•°æ®ã€‚å†è¿›è¡Œå‘ä¸‹è°ƒæ•´æ“ä½œï¼Œä¾æ¬¡å¾ªç¯ï¼Œå³å¯å®Œæˆä¸€ä¸ªé™åºçš„æ’åˆ—\n3.2.3æ¯”è¾ƒæ—¶é—´å¤æ‚åº¦æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚\n\nå¦‚æœæ˜¯å‘ä¸Šè°ƒæ•´çš„è¯ï¼Œç¬¬äºŒå±‚çš„2ä¸ªèŠ‚ç‚¹è¦å‘ä¸Šè°ƒæ•´1æ¬¡ï¼Œç¬¬ä¸‰å±‚çš„4ä¸ªèŠ‚ç‚¹è¦å‘ä¸Šè°ƒæ•´2æ¬¡ï¼Œæœ€åç´¯ç§¯ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢è¿™ä¸ªå…¬å¼$$T(h)=2^11+2^22+2^33+â€¦â€¦+2^{h-1}(h-1)$$æ•°å­¦å¥½çš„ä½ ï¼Œä¼°è®¡ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªç­‰å·®Ã—ç­‰æ¯”å½¢å¼çš„æ•°åˆ—ï¼Œå¯ä»¥åˆ©ç”¨\n\né”™ä½ç›¸å‡æ³•ï¼Œé«˜è€ƒç¬¬17é¢˜ï¼Œå¦‚æœå‡ºä¸Šé¢è¿™ä¸ªå¼å­ï¼Œå±äºé€åˆ†é¢˜\nå¿«ä¸€å¹´è¿‡å»äº†ï¼Œç°åœ¨çš„æˆ‘çœ‹åˆ°è¿™ä¸ªå¼å­ï¼Œå±äºé€å‘½é¢˜\n\nå¥½å§å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆéš¾ğŸ˜‚\n\n\nå¦‚æœæ˜¯å‘ä¸‹è°ƒæ•´ç®—æ³•ï¼Œç¬¬ä¸€å±‚è¦å‘ä¸‹ç§»åŠ¨h-1å±‚ï¼Œç¬¬äºŒå±‚è¦å‘ä¸‹ç§»åŠ¨h-2å±‚ï¼Œç¬¬h-1å±‚éœ€è¦å¾€ä¸‹ç§»åŠ¨1å±‚ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°ä¸‹é¢çš„å…¬å¼æœ€åèƒ½å¾—å‡ºï¼Œéœ€è¦ç§»åŠ¨çš„æ€»æ­¥æ•°ä¸ºåœ¨Nå¾ˆå¤§çš„æ—¶å€™ï¼Œå‡å»çš„log(n+1)å¯ä»¥å¿½ç•¥ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)\nç”±æ­¤å¯è§ï¼Œå‘ä¸‹è°ƒæ•´ç®—æ³•æ˜¯æ›´ä¼˜çš„ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ›´å°\n\n3.3ä»£ç ç¤ºä¾‹å¼„æ˜ç™½æ€è·¯åï¼Œå†™ä»£ç å°±å¾ˆç®€å•å•¦ï¼\n// å‡åºç”¨å¤§å †// é™åºç”¨å°å †void HeapSort(int* a, int n){\t// å‘ä¸Šè°ƒæ•´--å»ºå † O(N*logN)\t//for (int i = 1; i &lt; n; ++i)\t//{\t//\tAdjustUp(a, i);\t//}\t// å‘ä¸‹è°ƒæ•´--å»ºå † O(N)\tfor (int i = (n - 1 - 1) / 2; i &gt;= 0; --i)\t{\t\tAdjustDown(a, n, i);//æ­¤æ—¶å»ºçš„æ˜¯ä¸€ä¸ªå°å †\t}\tsize_t end = n - 1;\twhile (end &gt; 0)\t{\t\tSwap(&amp;a[0], &amp;a[end]);        //å‰åäº¤æ¢ï¼Œæœ€å°çš„æ•°ç»„æ”¾åˆ°æœ«å°¾ï¼Œä¸è¿›è¡Œä¸‹ä¸€æ¬¡è°ƒæ•´\t\tAdjustDown(a, end, 0);\t\tend--;\t}\t//ç°åœ¨æ˜¯å°å †ä»£ç ï¼Œæ‰€ä»¥æ’åºå‡ºæ¥æ˜¯é™åº}\n\næµ‹è¯•ä¸€ä¸‹ä»£ç ï¼Œå®Œç¾æ’åºå‡ºäº†é™åº\n\nå¦‚æœä½ éœ€è¦å‡åºçš„è¯ï¼Œåªéœ€å°†åŸæœ¬å®ç°çš„å°å †ä»£ç ä¸­çš„åˆ¤æ–­æ¡ä»¶æ”¹ä¸€ä¸‹å°±è¡Œäº†\n\n\n4.TopKé—®é¢˜4.1é—®é¢˜è¯´æ˜TOP-Ké—®é¢˜ï¼šå³æ±‚æ•°æ®ç»“åˆä¸­å‰Kä¸ªæœ€å¤§çš„å…ƒç´ æˆ–è€…æœ€å°çš„å…ƒç´ ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ•°æ®é‡éƒ½æ¯”è¾ƒå¤§ã€‚\næ¯”å¦‚ï¼šä¸“ä¸šå‰10åã€ä¸–ç•Œ500å¼ºã€å¯Œè±ªæ¦œã€æ¸¸æˆä¸­å‰100çš„æ´»è·ƒç©å®¶ç­‰\nå¯¹äºTop-Ké—®é¢˜ï¼Œèƒ½æƒ³åˆ°çš„æœ€ç®€å•ç›´æ¥çš„æ–¹å¼å°±æ˜¯æ’åºã€‚æœ‰ä¸¤ä¸ªæ€è·¯\n\nå †æ’åºï¼šæ—¶é—´å¤æ‚åº¦O(N*logN)ï¼Œç©ºé—´å¤æ‚åº¦O(1)\nåœ¨åŸæœ¬çš„æ•°ç»„ä¸Šå»ºç«‹Nä¸ªæ•°çš„å¤§å †ï¼ŒPop Kæ¬¡ï¼Œå°±èƒ½é€‰å‡ºæœ€å¤§çš„å‰Kä¸ªã€‚æ—¶é—´å¤æ‚åº¦O(N+K*logN)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä½†æ˜¯ï¼Œå¦‚æœæ•°æ®é‡éå¸¸å¤§ï¼Œä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•å°±ä¸å¤ªå¯å–äº†(å¯èƒ½æ•°æ®éƒ½ä¸èƒ½ä¸€ä¸‹å­å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨ç¡¬ç›˜é‡Œé¢)\n\n4.2å¦‚ä½•æ±‚è§£ï¼Ÿ\nç”¨å‰Kä¸ªæ•°å»ºç«‹ä¸€ä¸ªKä¸ªæ•°çš„å°å †ï¼Œç„¶åå‰©ä¸‹çš„N-Kä¸ªæ•°ä¾æ¬¡éå†ï¼Œå¦‚æœæ¯”å †é¡¶çš„æ•°æ®å¤§ï¼Œå°±æ›¿æ¢å®ƒè¿›å †ï¼ˆè¿›å †åè¦è¿›è¡Œå‘ä¸‹è°ƒæ•´ï¼‰ï¼Œæœ€åå †é‡Œé¢çš„Kä¸ªæ•°æ®å°±æ˜¯æœ€å¤§çš„å‰Kä¸ª\n\nä»£ç ç¤ºä¾‹å¦‚ä¸‹\nvoid PrintTopK(int* a, int n, int k){\t// 1.å»ºå †--ç”¨aä¸­å‰kä¸ªå…ƒç´ å»ºå †\tint* kminHeap = (int*)malloc(sizeof(int) * k);\tassert(kminHeap);\tfor (int i = 0; i &lt; k; ++i)\t{\t\tkminHeap[i] = a[i];\t}\t//åˆ©ç”¨å°å †ä»£ç çš„å‘ä¸‹è°ƒæ•´ï¼Œå»ºä¸€ä¸ªå°å †\tfor (int j = (k - 1 - 1) / 2; j &gt;= 0; --j)\t{\t\tAdjustDown(kminHeap, k, j);\t}\t//å †é¡¶æ˜¯è¿™ä¸ªå †é‡Œé¢æœ€å°çš„æ•°æ®\t//2.å°†å‰©ä½™n-kä¸ªå…ƒç´ ä¾æ¬¡ä¸å †é¡¶å…ƒç´ åˆ¤æ–­ï¼Œå¦‚æœå¤§äºå †é¡¶ï¼Œåˆ™äº¤æ¢\tfor (int i = k; i &lt; n; ++i)\t{\t\tif (a[i] &gt; kminHeap[0])\t\t{\t\t\tkminHeap[0] = a[i];\t\t\tAdjustDown(kminHeap, k, 0);\t\t}\t}\tfor (int j = 0; j &lt; k; ++j)\t{\t\tprintf(\"%d \", kminHeap[j]);\t}\tprintf(\"\\n\");\tfree(kminHeap);}\n\n\næ—¶é—´å¤æ‚åº¦ï¼šO(K+logK*(N-K))\nç©ºé—´å¤æ‚åº¦ï¼šO(K)\n\nå½“Néå¸¸å¤§ï¼ŒKå¾ˆå°çš„æ—¶å€™ï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åŸºæœ¬å°±æ˜¯O(N)\n\n4.3æµ‹è¯•ä»£ç é€šè¿‡timeå‡½æ•°å’Œsrandå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ª10000ä¸ªæ•°çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ èµ‹å€¼å°äº100wçš„éšæœºæ•°ï¼Œå†åœ¨éšæœºä½ç½®æ”¾å…¥10ä¸ªå¤§äº100wçš„æ•°å­—ã€‚\nå¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç å·§å¦™åˆ©ç”¨å †çš„çŸ¥è¯†ï¼Œå¸®æˆ‘ä»¬æ‰¾å‡ºäº†è¿™ä¸ª10000ä¸ªæ•°çš„æ•°ç»„ä¸­æœ€å¤§çš„å‰Kä¸ªæ•°å­—\n\n\nç»“è¯­å †å’Œå †æ’åºçš„çŸ¥è¯†åˆ°è¿™é‡Œå°±è®²è§£å®Œæ¯•å•¦ï¼å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€å“¦~\n\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","å †"]},{"title":"ã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯æ ‘ï¼ŒäºŒå‰æ ‘åˆæ˜¯å•¥ç©æ„","url":"/2022/04/06/note_data_structure/8%E4%BA%8C%E5%8F%89%E6%A0%91/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—è¿™å‡ ç§ç»“æ„\nå®ƒä»¬éƒ½æ˜¯ç”¨é“¾è¡¨æˆ–è€…æ•°ç»„çš„æ–¹å¼æ¥å®ç°çš„ï¼Œä¸»è¦è€ƒå¯Ÿæˆ‘ä»¬å¯¹ç»“æ„ä½“çš„è¿ç”¨\n\nä»Šå¤©è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™å‰¯å›¾é‡Œé¢çš„æ ‘\n\nå•Šä¸å¥½æ„æ€ï¼Œå›¾æ‹¿é”™äº†ï¼ğŸ˜œ\næ˜¯ä¸‹é¢è¿™ä¸ªæ‰å¯¹\n\n\n1.ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ1.1 æ ‘çš„æ¦‚å¿µæ ‘æ˜¯ä¸€ç§éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ç”±nä¸ªæœ‰é™èŠ‚ç‚¹ç»„æˆçš„å…·æœ‰ä¸€å®šå±‚æ¬¡å…³ç³»çš„é›†åˆã€‚\næŠŠå®ƒå«åšæ ‘æ˜¯å› ä¸ºå®ƒçœ‹èµ·æ¥çš„ç¡®åƒä¸€ä¸ªæ ‘çš„æ ¹éƒ¨\nå½“ç„¶ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯æ ‘å¹²åœ¨ä¸Šï¼Œæ ‘å¶åœ¨ä¸‹çš„ç»“æ„\n\næœ‰ä¸€ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹ï¼Œè¢«ç§°ä¸ºæ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„å¼€å¤´\né™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œå…¶ä½™èŠ‚ç‚¹éƒ½æ˜¯,ä¸ªäº’ä¸ç›¸äº¤çš„é›†åˆã€‚æ¯ä¸€ä¸ªé›†åˆéƒ½æ˜¯ä¸€é¢—ä¸æ ‘çš„ç»“æ„ç±»ä¼¼çš„å­æ ‘\næ¯ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªå‰é©±ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¾ˆå¤šä¸ªåé©±\nå› æ­¤ï¼Œæ ‘æ˜¯é€’å½’å®šä¹‰çš„\n\n\næ ‘ä¸­çš„å­èŠ‚ç‚¹ä¸èƒ½æœ‰äº¤é›†\n\nä¸Šå›¾ä¸­çš„BèŠ‚ç‚¹ä¸èƒ½æœ‰Gè¿™ä¸ªå­©å­ï¼Œå› ä¸ºGå·²ç»æœ‰çˆ¶æ¯Cäº†\nåŒç†ï¼ŒGèŠ‚ç‚¹ä¹Ÿä¸èƒ½åŒæ—¶æ‹¥æœ‰ä¸¤å¯¹çˆ¶æ¯\nå­èŠ‚ç‚¹ä¹‹é—´ä¹Ÿä¸èƒ½ç›¸è¿ï¼Œå¦‚Eå’ŒFä¸èƒ½ç›¸è¿\n\n\n1.2 æ ‘çš„ç›¸å…³çŸ¥è¯†ç‚¹\nèŠ‚ç‚¹çš„åº¦ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„ä¸ªæ•°ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„åº¦ï¼› å¦‚ä¸‹å›¾ï¼šAçš„åº¦ä¸º6\n\nå¶èŠ‚ç‚¹æˆ–ç»ˆç«¯èŠ‚ç‚¹ï¼šåº¦ä¸º0çš„èŠ‚ç‚¹ç§°ä¸ºå¶èŠ‚ç‚¹ï¼› å›¾ä¸­Bã€Cã€Hã€Iâ€¦ç­‰èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹\néç»ˆç«¯èŠ‚ç‚¹æˆ–åˆ†æ”¯èŠ‚ç‚¹ï¼šåº¦ä¸ä¸º0çš„èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ä¸­Dã€Eã€Fã€Gâ€¦ç­‰èŠ‚ç‚¹ä¸ºåˆ†æ”¯èŠ‚ç‚¹\nç®€å•çš„è¯´ï¼Œå°±æ˜¯æœ‰å¨ƒçš„èŠ‚ç‚¹å°±æ˜¯åˆ†æ”¯èŠ‚ç‚¹\n\nåŒäº²èŠ‚ç‚¹æˆ–çˆ¶èŠ‚ç‚¹ï¼šè‹¥ä¸€ä¸ªèŠ‚ç‚¹å«æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¿™ä¸ªèŠ‚ç‚¹ç§°ä¸ºå…¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ï¼ŒDæ˜¯Hçš„çˆ¶èŠ‚ç‚¹\nå­©å­èŠ‚ç‚¹æˆ–å­èŠ‚ç‚¹ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„æ ¹èŠ‚ç‚¹ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ï¼šHæ˜¯Dçš„å­©å­èŠ‚ç‚¹\n\nå…„å¼ŸèŠ‚ç‚¹ï¼šå…·æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹äº’ç§°ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼› å¦‚ä¸‹å›¾ï¼šPã€Qæ˜¯å…„å¼ŸèŠ‚ç‚¹\n\n\næ ‘çš„åº¦ï¼šä¸€æ£µæ ‘ä¸­ï¼Œæœ€å¤§çš„èŠ‚ç‚¹çš„åº¦ç§°ä¸ºæ ‘çš„åº¦ï¼› ç¤ºä¾‹ä¸­æ ‘çš„åº¦ä¸º6ï¼ˆå³Açš„åº¦ï¼‰\nèŠ‚ç‚¹çš„å±‚æ¬¡ï¼šä»æ ¹å¼€å§‹å®šä¹‰èµ·ï¼Œæ ¹ä¸ºç¬¬1å±‚ï¼Œæ ¹çš„å­èŠ‚ç‚¹ä¸ºç¬¬2å±‚ï¼Œä»¥æ­¤ç±»æ¨\næ ‘çš„é«˜åº¦æˆ–æ·±åº¦ï¼šæ ‘ä¸­èŠ‚ç‚¹çš„æœ€å¤§å±‚æ¬¡ï¼› ç¤ºä¾‹ä¸­æ ‘çš„é«˜åº¦ä¸º4\n\nå ‚å…„å¼ŸèŠ‚ç‚¹ï¼šåŒäº²åœ¨åŒä¸€å±‚çš„èŠ‚ç‚¹äº’ä¸ºå ‚å…„å¼Ÿï¼›å¦‚ä¸‹å›¾ï¼šHã€Iäº’ä¸ºå…„å¼ŸèŠ‚ç‚¹\n\n\nèŠ‚ç‚¹çš„ç¥–å…ˆï¼šä»æ ¹åˆ°è¯¥èŠ‚ç‚¹æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼›ç¤ºä¾‹ä¸­Aæ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„ç¥–å…ˆ\nå­å­™ï¼šä»¥æŸèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€èŠ‚ç‚¹éƒ½ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­å­™ã€‚ç¤ºä¾‹ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯Açš„å­å­™\n\næ£®æ—ï¼šç”±mï¼ˆm&gt;0ï¼‰æ£µäº’ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆç§°ä¸ºæ£®æ—\nå¤šä¸ªä¸ç›¸äº¤çš„æ ‘å°±æ˜¯æ£®æ—\n\n\n\n1.3 æ ‘çš„ä»£ç è¡¨ç¤ºè¡¨ç¤ºæ ‘çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§\n#define N 5 //æŒ‡å®šæ ‘çš„åº¦ä¸º5struct TreeNode{\tint data;\tstruct TreeNode* subs[N];//ç”¨æŒ‡é’ˆæ•°ç»„å­˜æ”¾å­©å­èŠ‚ç‚¹çš„æŒ‡é’ˆ};\n\nä½†è¿™ç§æ–¹æ³•ä¸å¤Ÿä¼˜ï¼Œç»™å¤§å®¶å±•ç¤ºä¸€ä¸ªç”¨çš„æœ€å¹¿æ³›çš„æ–¹æ³•â€”â€”å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•\ntypedef int DataType;struct Node{ struct Node* _firstChild1; // ç¬¬ä¸€ä¸ªå­©å­ç»“ç‚¹ struct Node* _pNextBrother; // æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå…„å¼Ÿç»“ç‚¹ DataType _data; // ç»“ç‚¹ä¸­çš„æ•°æ®åŸŸ};\n\né€šè¿‡è¿™ç§æ–¹æ³•ï¼Œçˆ¶äº²èŠ‚ç‚¹åªéœ€è¦ä¿å­˜å®ƒçš„ç¬¬ä¸€ä¸ªå¨ƒï¼Œå…¶ä»–å¨ƒå°±è®©å¤§å¨ƒçš„å…„å¼ŸèŠ‚ç‚¹æ¥æ‰¾\nä¹Ÿå°±æ˜¯å®¶é•¿åªç”¨ç®¡è€å¤§ï¼Œè€å¤§ç®¡è€äºŒï¼Œè€äºŒç®¡è€ä¸‰ï¼Œä¾æ¬¡å¾€ä¸‹â€¦â€¦\n\nå®é™…å†™ä»£ç çš„ç»“æ„å¤§æ¦‚æ˜¯ä¸‹å›¾è¿™æ ·\n\n2.äºŒå‰æ ‘åœ¨å®é™…ä¸­ï¼ŒäºŒå‰æ ‘æ˜¯ä½¿ç”¨è¾ƒå¤šçš„ä¸€ç§æ ‘çš„ç»“æ„\n2.1 æ¦‚å¿µäºŒå‰æ ‘æ˜¯åº¦ä¸º2çš„æ ‘ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ ‘\n\näºŒå‰æ ‘ä¸å­˜åœ¨åº¦å¤§äº2çš„èŠ‚ç‚¹\näºŒå‰æ ‘æ˜¯æœ‰åºæ ‘ï¼Œå®ƒçš„å¨ƒï¼ˆå­æ ‘ï¼‰æœ‰å·¦å³ä¹‹åˆ†ï¼Œæ¬¡åºä¸èƒ½é¢ å€’\n\n\næ‰€ä»¥ï¼ŒäºŒå‰æ ‘éƒ½æ˜¯ç”±ä¸‹é¢å„ç±»èŠ‚ç‚¹ç»„æˆçš„æ ‘\n\n2.2 ç‰¹æ®Šçš„äºŒå‰æ ‘æ»¡äºŒå‰æ ‘æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘\n\næ»¡äºŒå‰æ ‘ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„\nå®Œå…¨äºŒå‰æ ‘ï¼Œæœ€åä¸€å±‚å¿…é¡»ä»å·¦åˆ°å³è¿ç»­\n\næ»¡äºŒå‰æ ‘æ»¡äºŒå‰æ ‘ï¼šå¦‚æœæ¯ä¸€ä¸ªå±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œé‚£è¿™ä¸ªäºŒå‰æ ‘å°±æ˜¯æ»¡äºŒå‰æ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ»¡äºŒå‰æ ‘çš„å±‚æ•°ä¸ºkï¼Œä¸”èŠ‚ç‚¹æ€»æ•°æ˜¯2^k^-1\n\næ»¡äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—å…¬å¼\n\n\nå®Œå…¨äºŒå‰æ ‘å®Œå…¨äºŒå‰æ ‘ï¼šå®Œå…¨äºŒå‰æ ‘æ˜¯æ•ˆç‡å¾ˆé«˜çš„æ•°æ®ç»“æ„ã€‚å¯¹äºæ·±åº¦ä¸ºKï¼Œæœ‰nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå½“ä¸”ä»…å½“æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¸æ·±åº¦ä¸ºKçš„æ»¡äºŒå‰æ ‘ä¸­ç¼–å·ä»1è‡³nçš„èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”æ—¶ï¼Œç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚\nç®€å•è¯´æ¥ï¼Œå®Œå…¨äºŒå‰æ ‘çš„æœ€åä¸€å±‚ä¸ä¸€å®šæ»¡ï¼Œä½†å¿…é¡»è¦ä»å·¦åˆ°å³è¿ç»­\n\n\n2.3 äºŒå‰æ ‘çš„æ€§è´¨\nåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œåº¦ä¸º0\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™ä¸€æ£µéç©ºäºŒå‰æ ‘çš„ç¬¬iå±‚ä¸Šæœ€å¤šæœ‰2^(i-1)ä¸ªç»“ç‚¹\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™æ·±åº¦ä¸ºhçš„äºŒå‰æ ‘çš„æœ€å¤§ç»“ç‚¹æ•°æ˜¯(2^h)-1\nå¯¹ä»»ä½•ä¸€æ£µäºŒå‰æ ‘, å¦‚æœåº¦ä¸º0å…¶å¶ç»“ç‚¹ä¸ªæ•°ä¸ºn0, åº¦ä¸º2çš„åˆ†æ”¯ç»“ç‚¹ä¸ªæ•°ä¸ºn2ï¼Œåˆ™æœ‰n0 = n2+1\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œå…·æœ‰nä¸ªç»“ç‚¹çš„æ»¡äºŒå‰æ ‘çš„æ·±åº¦ï¼Œh=log2(n+1) ã€‚ (psï¼š æ˜¯logä»¥2ä¸ºåº•ï¼Œn+1ä¸ºå¯¹æ•°)\nå¯¹äºå…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå¦‚æœæŒ‰ç…§ä»ä¸Šè‡³ä¸‹ä»å·¦è‡³å³çš„æ•°ç»„é¡ºåºå¯¹æ‰€æœ‰èŠ‚ç‚¹ä»0å¼€å§‹ç¼–å·ï¼Œåˆ™å¯¹äºåºå·ä¸ºiçš„ç»“ç‚¹æœ‰ï¼š\nè‹¥i&gt;0ï¼Œiä½ç½®èŠ‚ç‚¹çš„åŒäº²åºå·ï¼š(i-1)/2ï¼›i=0æ—¶ä¸ºæ ¹èŠ‚ç‚¹ç¼–å·ï¼Œæ— åŒäº²èŠ‚ç‚¹\nè‹¥2i+1&lt;nï¼Œå·¦å­©å­åºå·ï¼š2i+1ï¼Œ2i+1&gt;=nå¦åˆ™æ— å·¦å­©å­\nè‹¥2i+2&lt;nï¼Œå³å­©å­åºå·ï¼š2i+2ï¼Œ2i+2&gt;=nå¦åˆ™æ— å³å­©å­\n\n\n\n\n\n2.4 å‡ ä¸ªé€‰æ‹©é¢˜1. æŸäºŒå‰æ ‘å…±æœ‰ 399 ä¸ªç»“ç‚¹ï¼Œå…¶ä¸­æœ‰ 199 ä¸ªåº¦ä¸º 2 çš„ç»“ç‚¹ï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸­çš„å¶å­ç»“ç‚¹æ•°ä¸ºï¼ˆ ï¼‰A ä¸å­˜åœ¨è¿™æ ·çš„äºŒå‰æ ‘B 200  âˆšC 198D 199//å¶å­èŠ‚ç‚¹çš„æ•°é‡ æ€»æ¯”åº¦ä¸º2çš„èŠ‚ç‚¹å¤š1    2.åœ¨å…·æœ‰ 2n ä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œå¶å­ç»“ç‚¹ä¸ªæ•°ä¸ºï¼ˆ ï¼‰A n    âˆšB n+1C n-1D n/2//N0+N1+N2=2n//2N0+N1-1=2n//N1åªæœ‰0å’Œ1ä¸¤ç§å¯èƒ½ï¼Œå› ä¸ºnä¸ºæ•´æ•°ï¼Œ2nä¸ºå¶æ•°ï¼Œæ‰€ä»¥2N0=2nï¼ŒN0=n    3.ä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ä½ä¸º531ä¸ªï¼Œé‚£ä¹ˆè¿™æ£µæ ‘çš„é«˜åº¦ä¸ºï¼ˆ ï¼‰A 11B 10  âˆšC 8D 12//å‡è®¾é«˜åº¦æ˜¯h//å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹æœ€å¤š2^h -1//             æœ€å°‘2^(h-1)-1 +1//å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå…¬å¼ï¼Œæ¨æ–­å‡ºh=104.ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ç¬¬å…­å±‚çš„å¶å­èŠ‚ç‚¹ä¸º9ï¼Œé‚£ä¹ˆè¿™æ£µæ ‘çš„èŠ‚ç‚¹æ•°æœ€å¤šä¸ºï¼ˆï¼‰A 108B 109 âˆšC 112D 119//1  //2  //4  //8  //16  //32  //64Â -Â 9*2//å› ä¸ºé¢˜ç›®ä¸­çš„æ˜¯ç¬¬å…­å±‚çš„å¶å­èŠ‚ç‚¹ï¼Œå®Œå…¨äºŒå‰æ ‘å¿…é¡»ä»å·¦åˆ°å³è¿ç»­ï¼Œæ‰€ä»¥è¯´æ˜ç¬¬å…­å±‚ä¸åª9ä¸ªèŠ‚ç‚¹ï¼ˆé‚£æ ·ç®—å‡ºæ¥çš„ç»“æœä¸å¯¹ï¼‰//æ‰€ä»¥æ˜¯ç¬¬å…­å±‚å·²ç»æ»¡äº†ï¼Œç¬¬ä¸ƒå±‚æ²¡æœ‰æ»¡//æŠŠç¬¬ä¸ƒå±‚å»æ‰9ä¸ªå¶å­èŠ‚ç‚¹çš„å­©å­å°±èƒ½ç®—å‡ºæœ€å¤šçš„èŠ‚ç‚¹æ•°\n\n3.äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„äºŒå‰æ ‘ä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä¸¤ç§ç»“æ„å­˜å‚¨ï¼Œä¸€ç§é¡ºåºç»“æ„ï¼Œä¸€ç§é“¾å¼ç»“æ„\n3.1 é¡ºåºå­˜å‚¨é¡ºåºç»“æ„å­˜å‚¨å°±æ˜¯ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\nä¸€èˆ¬ä½¿ç”¨æ•°ç»„åªé€‚åˆè¡¨ç¤ºå®Œå…¨äºŒå‰æ ‘ï¼Œå› ä¸ºä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ä¼šæœ‰ç©ºé—´çš„æµªè´¹ã€‚\n\nç°å®ä½¿ç”¨ä¸­åªæœ‰å †æ‰ä¼šä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\nä¸‹ä¸€ç¯‡åšå®¢ä¼šå¸¦å¤§å®¶è®¤è¯†å †è¿™ä¸ªç‰¹æ®Šçš„æ ‘å½¢ç»“æ„ï¼ˆå’Œå†…å­˜é‡Œé¢é‚£ä¸ªå †ğŸ˜‚æ²¡å•¥å…³ç³»å“ˆï¼‰\n\n\n\nçœ‹åˆ°è¿™å¼ å›¾ï¼Œä½ è‚¯å®šæƒ³é—®ï¼Œå¦‚æœç”¨æ•°ç»„ç»“æ„å­˜å‚¨ï¼Œé‚£è¿˜æ€ä¹ˆè¿˜åŸå‡ºä¸€é¢—æ ‘ğŸ„å‘¢ï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬éœ€è¦ç†è§£ç‰©ç†å­˜å‚¨å’Œé€»è¾‘ç»“æ„çš„å…³ç³»\n\näºŒå‰æ ‘é¡ºåºå­˜å‚¨åœ¨ç‰©ç†ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨é€»è¾‘ä¸Šæ˜¯ä¸€é¢—äºŒå‰æ ‘\né‚£æ€ä¹ˆè®¡ç®—è¿™ç§æƒ…å†µä¸‹çš„çˆ¶äº²å’Œå¨ƒå‘¢ï¼Ÿ\nleftchild  = parent*2+1rightchild = parent*2+2parent     = (child-1)/2\n\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¿½ç„¶æ„Ÿè§‰\n\n3.2 é“¾å¼å­˜å‚¨è¿™å°±å°±æ²¡å•¥å¥½è¯´çš„å•¦ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„äºŒå‰é“¾å°±èƒ½æ„æˆäºŒå‰æ ‘\ntypedef int BTDataType;// äºŒå‰é“¾struct BinaryTreeNode{ \tstruct BinTreeNode* _pLeft; // æŒ‡å‘å½“å‰èŠ‚ç‚¹å·¦å­©å­ \tstruct BinTreeNode* _pRight; // æŒ‡å‘å½“å‰èŠ‚ç‚¹å³å­©å­ \tBTDataType _data; // å½“å‰èŠ‚ç‚¹çš„å€¼}\n\n\n4.æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘4.1 è¯´æ˜æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªæ²¡æœ‰è§„å¾‹çš„å¤šå‰æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘ã€‚\n\næˆ‘ä»¬ç”µè„‘ç£ç›˜çš„æ–‡ä»¶å¤¹å±‚çº§å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰è§„å¾‹çš„æ ‘\n\nä¸è¯´åºŸè¯ï¼Œç›´æ¥æ¥çœ‹æ —å­ï¼›ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å•¥è§„å¾‹å¯è¨€çš„æ ‘ï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æƒ³åŠæ³•æŠŠå®ƒå˜æˆä¸€ä¸ªäºŒå‰æ ‘ï¼\n\nå½“ç„¶ï¼Œå¦‚æœä»¥å†™ä»£ç çš„æ€è€ƒè§’åº¦ï¼Œåœ¨ä¸è¦æ±‚é¡ºåºçš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥éå†è¿™æ£µæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå°†å…¶å­˜å…¥æ•°ç»„ï¼Œå†ç”¨äºŒå‰æ ‘çš„æ–¹å¼è¿æ¥èµ·æ¥ï¼ˆæˆ–è€…ç›´æ¥èŠ‚ç‚¹æ•°ç»„å½“ä½œé¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ï¼‰\nä½†æ˜¯ï¼Œä»¥åº”è¯•çš„è§’åº¦ï¼Œåªèƒ½ä¾ç…§ä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ï¼Œå°†å…¶è½¬æˆäºŒå‰æ ‘\n4.2 æ­¥éª¤\nè¿çº¿ï¼šå°†æ ‘ä¸­å…·æœ‰å…„å¼Ÿå…³ç³»çš„ç»“ç‚¹ä»å·¦åˆ°å³ä¾æ¬¡è¿çº¿ï¼›\nå»çº¿ï¼šå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªç»“ç‚¹ï¼Œä»…ä¿ç•™ä¸å…¶æœ€å·¦(å³ç¬¬ä¸€ä¸ª)å­©å­çš„è¿çº¿ï¼Œå»æ‰è¯¥ç»“ç‚¹åˆ°å…¶ä½™å­© å­çš„æ‰€æœ‰è¿çº¿ï¼›\nä¿ç•™ï¼šå¦‚æœå½“å‰èŠ‚ç‚¹å·²ç»æ˜¯å…„å¼Ÿä¸­çš„æœ€å·¦èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ä¸Šå›¾ä¸­çš„Bå’ŒEï¼‰ï¼Œåˆ™ä¿ç•™å…¶ä¸çˆ¶èŠ‚ç‚¹çš„è¿çº¿\næ•´å½¢ï¼šè°ƒæ•´ä¸ºæ ‡å‡†å½¢çŠ¶çš„äºŒå‰æ ‘ï¼ˆæ ¹ç»“ç‚¹+å·¦å­æ ‘+å³å‰æ ‘ï¼‰\n\nä¾ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå¤„ç†å‡ºçš„äºŒå‰æ ‘æ˜¯ä¸‹é¢çš„æ¨¡æ ·\n\nè¿™é‡Œè¿˜æœ‰ç¬¬äºŒä¸ªæ —å­\n\næ€æ ·ï¼Œä½ å­¦è´¹äº†å—ï¼Ÿ\n5.äºŒå‰æ ‘è½¬æˆæ ‘æˆ–è€…æ£®æ—è½¬æ¢æ­¥éª¤æ˜¯æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘æ–¹æ³•çš„é€†è¿‡ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\næ•´å½¢ï¼šå°†äºŒå‰æ ‘ä¸­çš„æ‰€æœ‰ç»“ç‚¹çš„å·¦å­©å­è¿çº¿è°ƒæ•´ä¸ºå‚ç›´å½¢æ€ã€å³å­©å­è¿çº¿è°ƒæ•´ä¸ºæ°´å¹³å½¢æ€ï¼› \nè¿çº¿ï¼šå¯¹äºä»»ä¸€æ°´å¹³çº¿ä¸Šçš„ç»“ç‚¹ï¼Œå°†è¯¥æ°´å¹³çº¿ä¸Šçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¸è¯¥æ°´å¹³çº¿ä¸Šçš„å…¶ä»–ç»“ç‚¹è¿› è¡Œè¿çº¿ï¼› \nå»çº¿ï¼šå»é™¤æ‰€æœ‰çš„æ°´å¹³è¿çº¿ï¼Œå³åˆ é™¤åŸäºŒå‰æ ‘ä¸­å„ç»“ç‚¹ä¸å…¶å³å­©å­çš„è¿çº¿ï¼› 4\næ•´å½¢ï¼šè°ƒæ•´æ­¥éª¤3ç»“æŸä¹‹åçš„æ ‘çš„å½¢çŠ¶ï¼Œä½¿å…¶ç¬¦åˆæ ‘çš„ä¸€èˆ¬ç‰¹å¾è¦æ±‚ï¼ˆçˆ¶å­ã€å…„å¼Ÿå…³ç³»æ¸…æ™°ï¼‰\n\n\nä»¥ä¸‹æ˜¯ä¿©ç¤ºä¾‹\n\n\nç»“è¯­å˜¿å˜¿å˜¿ï¼Œæœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nä¸‹ç¯‡åšå®¢å°†å¸¦æ¥å †çš„è¯¦è§£\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["æ•°æ®ç»“æ„å¤ªå¤æ‚"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€Gitã€‘æäº¤ä¿¡æ¯è§„èŒƒ","url":"/2022/08/07/tools/10git%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E4%BF%A1%E6%81%AF%E8%A7%84%E8%8C%83/","content":"gitä»£ç æäº¤è§„èŒƒçš„é‚£äº›äº‹\n\n\n1.æäº¤æ ¼å¼type(scope): message\n\n\n2.å‚æ•°ä»‹ç»2.1 typetypeï¼šæŒ‡çš„ä»£ç çš„æäº¤ç±»å‹ï¼Œä¸åŒçš„æäº¤ç±»å‹è¡¨ç¤ºå¯¹åº”ä¸åŒçš„ä»£ç æ”¹åŠ¨ï¼Œæ¯”å¦‚ï¼š\n\nfeatï¼šæ–°åŠŸèƒ½çš„å¼€å‘\nfixï¼šbugçš„ä¿®å¤\ndocsï¼šæ–‡æ¡£æ ¼å¼çš„æ”¹åŠ¨\nstyleï¼šä»£ç æ ¼å¼æ”¹å˜\nrefactorï¼šå¯¹å·²æœ‰çš„åŠŸèƒ½è¿›è¡Œé‡æ„\nperfï¼šæ€§èƒ½ä¼˜åŒ–\ntestï¼šå¢åŠ æµ‹è¯•\nbuildï¼šæ”¹å˜äº†buildå·¥å…·\nrevertï¼šæ’¤é”€ä¸Šä¸€æ¬¡çš„commitæäº¤\nchoreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\n\n2.2 scopescopeï¼šç”¨äºè¯´æ˜commitå½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚ï¼šæƒé™æ¨¡å—ã€è¿˜æ˜¯é¦–é¡µ\n2.3 messagemessageï¼šå¯¹æäº¤çš„ä»£ç åšä¸€ä¸ªç®€çŸ­çš„è¯´æ˜ï¼Œä¸èƒ½è¿‡é•¿ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæäº¤æ ¼å¼å¹¶æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„è§„èŒƒï¼Œä¸ç®¡ä½ æœ€åé‡‡å–äº†ä»€ä¹ˆæ ¼å¼ï¼Œä¸€å®šè¦éµå®ˆä¸€ä¸ªç†å¿µï¼šé‚£å°±æ˜¯åŒä¸€ä»“åº“çš„æ‰€æœ‰ä»£ç æäº¤éœ€è¦é‡‡ç”¨ä¸€ä¸ªå›ºå®šçš„æ ¼å¼ã€‚ä¸èƒ½å‡ºç°ä¸€ä¸ªä»“åº“é‡Œé¢ç”¨ä¸¤ä¸ªé£æ ¼çš„git commitçš„æƒ…å†µ\nä½œè€…ï¼šå¬ä¹¦å…ˆç”Ÿ  é“¾æ¥ï¼šhttps://www.jianshu.com/p/2ab3a991d1f9  æ¥æºï¼šç®€ä¹¦  è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["git"]},{"title":"ã€Picgoã€‘æ­£ç¡®é‡å‘½åæ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸Šä¼ ","url":"/2023/01/23/tools/11picgo%E8%AE%BE%E7%BD%AE%E5%91%BD%E5%90%8D%E6%A0%BC%E5%BC%8F/","content":"picgoæ­£ç¡®è®¾ç½®é‡å‘½åæ–‡ä»¶ï¼Œé¿å…åŒæ–‡ä»¶é‡å¤ä¸Šä¼ \n\n\n1.é—®é¢˜æ¥æºåœ¨ä¹‹å‰é…ç½®picgo+é˜¿é‡Œäº‘osså›¾åºŠçš„åšå®¢ä¸­ï¼Œæˆ‘æåˆ°äº†éœ€è¦å¼€å¯picgoçš„æ—¶é—´æˆ³é‡å‘½ååŠŸèƒ½ï¼Œä»¥é¿å…åŒåæ–‡ä»¶å†²çªã€‚\n\né˜¿é‡Œäº‘OSSé»˜è®¤ç­–ç•¥ï¼šåŒåæ–‡ä»¶ä¼šè¢«è¦†ç›–\n\nç°åœ¨çœ‹æ¥ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šé‚£å°±æ˜¯æ²¡æœ‰åŠæ³•é¿å…åŒä¸€ä¸ªæ–‡ä»¶çš„å¤šæ¬¡ä¸Šä¼ \nè¯´ç™½äº†å°±æ˜¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªå›¾ç‰‡ï¼Œç»“æœå› ä¸ºè‡ªå·±ä¸å°å¿ƒå¤šå¤åˆ¶äº†å‡ æ¬¡ï¼Œå¯¼è‡´picgoå¤šæ¬¡ä¸Šä¼ äº†è¿™ä¸ªæ–‡ä»¶ã€‚å†åŠ ä¸Šæ—¶é—´æˆ³ä¸åŒï¼Œä¹‹å‰ä¸Šä¼ çš„å›¾ç‰‡å¹¶ä¸ä¼šè¢«è¦†ç›–ï¼Œè€Œæ˜¯ç•™åœ¨é‚£å„¿æ— äººé—®æ´¥ï¼›\näº¦æˆ–è€…æ˜¯å¼€å¯äº†typoraä¸‹å›¾ä¸­å¯¹äºç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™ï¼ŒåŒä¸€ä¸ªå›¾ç‰‡éœ€è¦åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°ä¸¤æ¬¡ï¼Œå¤åˆ¶çš„æ—¶å€™ï¼Œå› ä¸ºå¼€å¯äº†è¯¥ç­–ç•¥ï¼Œtyporaè‡ªåŠ¨å¸®ä½ åˆä¸Šä¼ äº†ä¸€éï¼›\n\n1.1 è¯´æ˜é˜¿é‡Œäº‘OSSçš„ç©ºé—´æ˜¯è¦ä»˜è´¹çš„ï¼å¯¹äºä¸ªäººåšå®¢å›¾åºŠè€Œè¨€ï¼Œæˆ–è®¸å¹¶ä¸éœ€è¦å¤šå°‘ç©ºé—´ï¼ˆæœ¬äººä½¿ç”¨é˜¿é‡Œäº‘OSSåšå›¾åºŠå·²æœ‰1å¹´ï¼Œæ‰ç”¨äº†980mbï¼‰\nä»Šå¤©ä¸ºäº†è¿ç§»å…¶ä¸­ä¸€ä¸ªbucketï¼Œå‘ç°äº†é‡Œé¢æœ‰éå¸¸éå¸¸å¤šçš„é‡å¤æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°å†…å®¹å®Œå…¨ä¸€è‡´ï¼Œè¿™å°±æ˜¯æ— æ„ä¹‰çš„ç©ºé—´æµªè´¹ï¼Œå¯¹äºå®¹é‡è®¡è´¹çš„ossæ¥è¯´ï¼Œè¿™å¯éƒ½æ˜¯ğŸ’´å•Šï¼\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‡è¯†æ–‡ä»¶çš„æ–¹æ³•ï¼Œé¿å…åŒä¸€ä¸ªæ–‡ä»¶çš„å¤šæ¬¡ä¸Šä¼ ã€‚\næ¯”è¾ƒå¥½çš„åŠæ³•ï¼Œé‚£å°±æ˜¯ç”¨æ–‡ä»¶çš„hashå€¼æ¥å‘½åè¿™ä¸ªæ–‡ä»¶ã€‚æ­¤æ—¶ï¼ŒåŒä¸€æ–‡ä»¶çš„hashå€¼æ˜¯ä¸€æ ·çš„ï¼Œä¸Šä¼ åˆ°ossé‡Œé¢ä¹‹åä¼šç›´æ¥è¦†ç›–ï¼Œå¹¶ä¸ä¼šå¤šå ç”¨ä¸€ä»½ç©ºé—´ï¼æˆ‘ä»¬çš„ç›®çš„ä¹Ÿå°±è¾¾åˆ°äº†\n2.ä½¿ç”¨picgoæ’ä»¶è§£å†³\næ’ä»¶å¼€æºåœ°å€ liuwave&#x2F;picgo-plugin-rename-file\n\n2.1 å®‰è£…æˆ‘çš„picgoæ˜¯2.3.1ç‰ˆæœ¬çš„ï¼Œèƒ½ç›´æ¥åœ¨æ’ä»¶å¸‚åœºå®‰è£…\n\nå®‰è£…å¥½äº†ä¹‹åï¼Œåœ¨è¿™é‡Œé…ç½®\n\n2.2 é…ç½®éµå¾ªä»“åº“readmeé‡Œé¢çš„é…ç½®æ–¹æ³•\n\nè¿™é‡Œæˆ‘é€‰æ‹©äº†æ¯”è¾ƒç®€å•çš„é…ç½®æ–¹æ³•ï¼Œå¹´+å“ˆå¸Œå€¼\n&#123;y&#125;&#123;hash&#125;\n\nè¿™ä¹ˆåšæ˜¯ä¸ºäº†é¿å…hashå€¼ç¢°æ’ï¼Œè™½ç„¶åŒä¸€äººèƒ½äººå·¥å¼„å‡ºä¸¤ä¸ªhashç¢°æ’çš„å›¾ç‰‡çš„å¯èƒ½æ€§åŠå…¶ä½ï¼Œä½†åŠ ä¸Šä¸€ä¸ªå¹´ä»½ï¼Œå¯èƒ½æ€§å°±æ›´ä½äº†ğŸ˜‚\nè¿™æ ·å°±èƒ½ä¿è¯åœ¨åŒä¸€å¹´ä¸Šä¼ çš„å›¾ç‰‡ä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒå›¾ç‰‡ä¼šç›´æ¥è¦†ç›–ï¼Œä¸ä¼šå¤šå ç”¨ä¸€ä»½ç©ºé—´ã€‚\n\nè‡³äºå…¶ä»–é€‰é¡¹ï¼Œå‚è€ƒæ–‡æ¡£ã€‚ä¸ªäººè§‰å¾—æ²¡æœ‰å¤ªå¤§å¿…è¦ï¼Œæ¯•ç«Ÿéƒ½ä¸Šä¼ åˆ°å›¾åºŠäº†ï¼Œè°è¿˜ç®¡è¿™ä¸ªæ–‡ä»¶çš„åŸåå’Œæœ¬åœ°å­˜å‚¨è·¯å¾„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n3.æ”¶å·¥è®¾ç½®å®Œæ¯•ä¹‹åï¼Œç°åœ¨ä¸Šä¼ çš„å›¾ç‰‡å‘½åæ ¼å¼å¦‚ä¸‹\n20234d48b94bd1054488005eb239741c807d.png\n\nå†æ¬¡æ‰‹åŠ¨ä¸Šä¼ ä¸€éè¿™ä¸ªæ–‡ä»¶ï¼Œå‘ç°è¿”å›çš„urlæ˜¯ç›¸åŒçš„\næˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ"]},{"title":"ã€Gitã€‘å¦‚ä½•ä¿®æ”¹æœ¬åœ°ä»“åº“çš„ç”¨æˆ·åå’Œé‚®ç®±","url":"/2023/02/11/tools/13%E4%BF%AE%E6%94%B9git%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1/","content":"æœ€è¿‘æˆ‘ä¿®æ”¹äº†æˆ‘giteeå’Œgithubçš„ç”¨æˆ·åè¿˜æœ‰é‚®ç®±ï¼Œæ‰€ä»¥éœ€è¦å¯¹æœ¬åœ°ä»“åº“é…ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±è¿›è¡Œæ›´æ”¹\n\n\n1.å‘½ä»¤ åˆšå¼€å§‹æˆ‘ä½¿ç”¨çš„æ˜¯å¦‚ä¸‹å‘½ä»¤\ngit config --global user.email &quot;é‚®ç®±&quot;git config --global user.name &quot;ç”¨æˆ·å&quot;\n\nä½†æ˜¯å¾ˆä¸è¾›ï¼Œè¿™ä¸ªå‘½ä»¤æ²¡æœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨æ¥åˆå§‹åŒ–ä½ çš„gitç¯å¢ƒçš„ï¼Œå¯¹å·²æœ‰çš„gitä»“åº“ä¸èµ·ä½œç”¨\nä½†æ˜¯æˆ‘ä»¬åœ¨linuxä¸‹å¯ä»¥æ·»åŠ ä¸Šå¦å¤–ä¸€ä¸ªå‚æ•°æ¥å®ç°\ngit config --global --replace-all user.email &quot;é‚®ç®±&quot; git config --global --replace-all user.name &quot;ç”¨æˆ·å&quot;\n\nè¿™æ ·å°±ä¿®æ”¹æˆåŠŸäº†\n\n\nè¿™ä¸ªå‘½ä»¤åœ¨windowsä¸‹ä¼¼ä¹æ— æ³•è¯†åˆ«ï¼Œä¼šå¼¹å‡ºgitçš„å‘½ä»¤è¡Œå¸®åŠ©\n\n\nä½†æ˜¯ï¼Œä¿®æ”¹æˆåŠŸåçš„æäº¤ï¼Œåªå¯¹æœªæ¥çš„æäº¤æœ‰æ•ˆï¼›è¿™é‡Œå¿…é¡»å¾—åæ§½ä¸€ä¸‹giteeå’Œgithubç»Ÿè®¡æäº¤çš„ä¸åŒä¹‹å¤„\n\ngiteeç»Ÿè®¡æäº¤ä¾æ®çš„æ˜¯ç”¨æˆ·å+é‚®ç®±ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸å¯¹å°±æ— æ³•ç»Ÿè®¡\ngithubç»Ÿè®¡æäº¤åªä¾æ®é‚®ç®±ï¼Œåªè¦ä½ é‚®ç®±å¯¹äº†ï¼Œç”¨æˆ·åæ˜¯ä¸ç®¡ä½ çš„\n\næ‰€ä»¥è¦æƒ³è®©giteeçš„ç»Ÿè®¡èƒ½ç”Ÿæ•ˆï¼Œé‚£å°±å¿…é¡»è¦ä¿®æ”¹ä¹‹å‰æ‰€æœ‰æäº¤ä¿¡æ¯ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±\n\n2.ä¿®æ”¹ä¹‹å‰æäº¤ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±\nå‚è€ƒåšå®¢\n\nå¤åˆ¶å¦‚ä¸‹ä»£ç åˆ°ä¸€ä¸ªæœ¬æ–‡ç¼–è¾‘å™¨é‡Œé¢ï¼Œå°†å†…éƒ¨çš„é‚®ç®±å’Œç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\ngit filter-branch -f --env-filter &#x27;OLD_EMAIL=&quot;åŸæ¥çš„é‚®ç®±&quot;CORRECT_NAME=&quot;ç°åœ¨çš„åå­—&quot;CORRECT_EMAIL=&quot;ç°åœ¨çš„é‚®ç®±&quot;if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;fiif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;fi&#x27; --tag-name-filter cat -- --branches --tags\n\néšåå°†å…¶ç²˜è´´åˆ°gitå‘½ä»¤è¡Œä¸­ï¼Œå›è½¦æ‰§è¡Œ\n\n\næ‰§è¡Œå®Œæ¯•ï¼Œå°±èƒ½çœ‹åˆ°æ‰€æœ‰gitæäº¤çš„ç”¨æˆ·åå’Œé‚®ç®±éƒ½ä¿®æ”¹æˆåŠŸäº†ï¼æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å¼ºåˆ¶æäº¤\ngit push -f\n\nå¼ºåˆ¶æäº¤äº†ä¹‹åï¼Œä¹‹å‰æ˜¾ç¤ºä¸å‡ºæ¥çš„ä¿¡æ¯å’Œå°ç»¿ç‚¹ï¼Œç°åœ¨ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤ºäº†\n\nå¦‚æœç”¨ä¸Šé¢çš„å‘½ä»¤ä¿®æ”¹å¤±è´¥çš„è¯ï¼Œé‚£å°±å°è¯•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\ngit filter-branch -f --index-filter &#x27;git rm --cached --ignore-unmatch Rakefile&#x27; HEAD\n\néšåå†é‡è¯•ä¸Šé¢çš„å‘½ä»¤ï¼Œåº”è¯¥å°±OKäº†\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["Linux","git"]},{"title":"ã€Gitã€‘å¦‚ä½•ä¿®æ”¹æœ¬åœ°ä»“åº“çš„ç”¨æˆ·åå’Œé‚®ç®±","url":"/2022/12/10/tools/14git-encrypt/","content":"å¦‚æœä½ æƒ³åœ¨giteaä¸Šé¢åŠ å¯†å­˜å‚¨ä¸€äº›æ•°æ®ï¼ˆæ¯”å¦‚ä¸ªäººçš„å¯†ç ï¼‰ä¹‹ç±»ç§å¯†çš„ä¸œè¥¿ï¼Œå¯ä»¥å°è¯•ç”¨git-cryptåŠ å¯†æ–‡ä»¶åå†ä¸Šä¼ \n\n\n\næ¯”å¦‚æœ‰äº›è€å“¥æ‹…å¿ƒgitæ‰˜ç®¡æœåŠ¡å•†ä¼šå·çœ‹è‡ªå·±çš„æ–‡ä»¶ï¼Œé¢â€¦â€¦å’±ä¹Ÿä¸èƒ½å®Œå…¨å¦è®¤è¿™å¯èƒ½æ€§å§\n\nå¦‚ä½•ä½¿ç”¨ä»¥ä¸‹æ¼”ç¤ºçš„åªæœ‰windowsç³»ç»Ÿèƒ½ç”¨\n1.å®‰è£…\noholovko&#x2F;git-crypt-windows\n\nåœ¨ä¸Šé¢çš„é¡¹ç›®ä¸­ä¸‹è½½exeæ–‡ä»¶ï¼Œæ”¾å…¥ä½ ç”µè„‘gitå®‰è£…è·¯å¾„çš„git/cmdç›®å½•ä¸­ï¼Œå³å¯ä½¿ç”¨\nåœ¨ç”µè„‘çš„ä»»æ„ä½ç½®ä½¿ç”¨gitçš„å‘½ä»¤è¡Œè¾“å…¥git-cryptç¡®è®¤æ­£ç¡®å®‰è£…\n2.ä½¿ç”¨åœ¨éœ€è¦åŠ å¯†çš„ä»“åº“ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤\ngit-crypt init\n\nç„¶åè¾“å…¥statuså‘½ä»¤æŸ¥çœ‹çŠ¶æ€\nPS D:\\Program Files\\nas\\MyPWD&gt; git-crypt statusnot encrypted: .gitignorenot encrypted: README.mdPS D:\\Program Files\\nas\\MyPWD&gt;\n\næ·»åŠ .gitattributesæ–‡ä»¶ï¼Œé”®å…¥ä»¥ä¸‹æ ¼å¼çš„å†…å®¹\néœ€è¦åŠ å¯†çš„æ–‡ä»¶è·¯å¾„æˆ–è€…æ–‡ä»¶å filter=git-crypt diff=git-crypt\n\næ­¤æ—¶å…ˆå°†éœ€è¦åŠ å¯†çš„æ–‡ä»¶ç§»å‡ºæœ¬ä»“åº“ï¼Œcommitä¸Šä¼ .gitattributesæ–‡ä»¶ï¼Œå†å°†éœ€è¦åŠ å¯†çš„æ–‡ä»¶ç§»åŠ¨å›æ¥\næ­¤æ—¶å†æŸ¥çœ‹çŠ¶æ€ï¼Œä¼šå‘ç°å·²ç»åŠ å¯†äº†\nPS D:\\Program Files\\nas\\MyPWD&gt; git-crypt statusnot encrypted: .gitattributesnot encrypted: .gitignore    encrypted: PWD/napd.mdnot encrypted: README.mdPS D:\\Program Files\\nas\\MyPWD&gt;\n\næ­¤æ—¶å†ä½¿ç”¨gitä¸‰æ¿æ–§ï¼Œæ­¤æ—¶è¢«æ·»åŠ åˆ°è¿œç«¯çš„æ–‡ä»¶å°±å·²ç»æ˜¯åŠ å¯†è¿‡åçš„äº†\n3.è§£å¯†ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯¼å‡ºå¯†é’¥\ngit-crypt export-key æ–‡ä»¶keyçš„åå­—\n\nå› ä¸ºæ˜¯ä¸ªäººä½¿ç”¨ï¼Œä¸ºäº†é¿å…ä»¥åæ— æ³•æ‰“å¼€æ­¤æ–‡ä»¶ï¼Œåº”åœ¨å¤šå¤„å­˜æ”¾æ­¤keyï¼ˆä½†æ˜¯ä¸è¦å­˜äº‘ç›˜é‡Œé¢ï¼‰\nåªæœ‰åŒæ—¶è·å¾—ä»“åº“æ–‡ä»¶+keyæ‰èƒ½è§£å¯†å‡ºæ­¤é¡¹ç›®ä¸­çš„å†…å®¹ï¼\n\nå½“ç„¶ï¼Œæœ€åˆçš„æœ¬åœ°é¡¹ç›®ä¹Ÿæ˜¯æ˜æ–‡çš„\n\nä½¿ç”¨keyè§£å¯†ä»“åº“æ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°æ˜æ–‡å†…å®¹\ngit-crypt unlock /path/to/key","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["git"]},{"title":"ã€Curlã€‘é€šè¿‡curlæ¨¡æ‹Ÿrefererè·å–åˆ°æœ‰é˜²ç›—é“¾çš„å›¾ç‰‡","url":"/2023/02/20/tools/15curl%E6%A8%A1%E6%8B%9Freferer%E8%8E%B7%E5%8F%96%E8%B5%84%E6%BA%90/","content":"æœ¬æ–‡æ‰€æè¿°æ“ä½œä»…ä¾›å­¦ä¹ curlå‘½ä»¤ï¼Œè¯·å‹¿ç”¨äºç›—åˆ·ä»–äººå›¾åºŠç­‰è¿è§„æ“ä½œï¼ğŸ™…â€â™€ï¸\n\n\n1.è¯´æ˜å½“æˆ‘æƒ³æŠŠ51laæ·»åŠ åˆ°æˆ‘çš„å¯¼èˆªç«™ç‚¹ï¼Œå´å‘ç°å®ƒçš„iconå›¾æ ‡æœ‰é˜²ç›—é“¾ï¼Œç¦æ­¢ç©ºrefererè®¿é—®çš„ï¼›\nè¿™ç‚¹å®Œå…¨å¯ä»¥ç†è§£ï¼Œä¸ºäº†é˜²æ­¢ä»–äººç›—åˆ·æœ¬ç«™çš„å›¾ç‰‡ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½éœ€è¦ç»™å›¾ç‰‡åœ°å€åŠ ä¸Šé˜²ç›—é“¾ã€‚\n\nå…¶å®51laæä¾›äº†è‡ªå·±çš„iconï¼Œä½†è¿™é‡Œæä¾›çš„iconåƒç´ ç‰¹åˆ«ä½ï¼Œåªæœ‰16*16ï¼Œåœ¨æˆ‘çš„å¯¼èˆªç«™ç‚¹ä¸Šçš„æ˜¾ç¤ºå°±æ²¡æœ‰é‚£ä¹ˆå‹å¥½äº†\n\n\næ‰€ä»¥æˆ‘æ‰æƒ³æŠŠç¨å¾®æ¸…æ™°ä¸€ç‚¹çš„iconå›¾æ ‡ä¸‹è½½ä¸‹æ¥\n2.curlä½¿ç”¨\nå‚è€ƒ https://www.ruanyifeng.com/blog/2019/09/curl-reference.html\n\nè¦é¿å¼€è¿™ä¸ª403è®¿é—®ï¼Œéœ€è¦åšçš„å°±æ˜¯ç»™è¯·æ±‚å¤´ç»™å®šä¸€ä¸ªrefererå­—æ®µï¼Œå‘Šè¯‰51laçš„æœåŠ¡å™¨ï¼Œæˆ‘æ˜¯é€šè¿‡ä»–è‡ªå·±çš„åŸŸåè®¿é—®å›¾æ ‡æ–‡ä»¶\ncurl \\-H &#x27;Referer: https://v6.51.la/&#x27; \\https://v6-static.51.la/v6-static/202302161047/favicon.ico \\-o favicon.ico\n\nå¯¹ä¸Šé¢æåˆ°çš„å‡ ä¸ªå‚æ•°åšä¸€å®šè§£é‡Š\n\n-Hè®¾å®šè¯·æ±‚å¤´ï¼Œéœ€è¦ç¬¦å·httpåè®®çš„æ ‡å‡†key: value\n-oå°†è·å–åˆ°çš„å†…å®¹ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œåœ¨åé¢æŒ‡å®šæ–‡ä»¶åï¼ˆè¿™é‡Œæˆ‘æŒ‡å®šä¸ºäº†favicon.icoï¼‰\n\nåœ¨linuxä¸‹ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå°±èƒ½æˆåŠŸæ‹‰å–åˆ°51laçš„ç«™ç‚¹å›¾ç‰‡\n\nå¦‚æœä¸åŠ refererå­—æ®µï¼Œåˆ™è¿˜æ˜¯ä¼šè¿”å›403\n$ curl https://v6-static.51.la/v6-static/202302161047/favicon.ico &lt;html&gt;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;openresty&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["Linux","curl"]},{"title":"ã€æ•™ç¨‹ã€‘Typora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠï¼ˆè¶…è¯¦ç»†ï¼‰","url":"/2022/01/11/tools/1%E9%98%BF%E9%87%8C%E4%BA%91OSS+picgo+typora/","content":"å¦‚æœä½ æƒ³æ­å»ºä¸€ä¸ªå’Œæœ¬ç«™ç±»ä¼¼çš„ä¸ªäººåšå®¢ï¼Œé‚£å°±éœ€è¦å›¾åºŠæ¥è¾…åŠ©\n\n\n[TOC]\nä¸ºä»€ä¹ˆè¦æ­å»ºåšå®¢å›¾åºŠ?ä»¥CSDNä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨å¤§éƒ¨åˆ†blogå¹³å°é€šç”¨çš„markdownè¯­æ³•è¿›è¡Œåšå®¢åˆ›ä½œ\nè™½ç„¶CSDNè‡ªå¸¦çš„ç¼–è¾‘å™¨å·²ç»èƒ½æ»¡è¶³æˆ‘ä»¬95%çš„å†™ä½œéœ€æ±‚\nä½†æ˜¯Typoraåœ¨markdownè¯­æ³•ç¼–è¾‘ä¸Šèƒ½ç»™ä½ æä¾›æ›´å¥½çš„å†™ä½œä½“éªŒ\næ‰€ä»¥æˆ‘é€‰æ‹©äº†ä»¥Typora+Picgo+å›¾åºŠçš„æ–¹å¼æ¥è¿›è¡Œåšå®¢åˆ›ä½œ\n\nè€Œåœ¨æœ¬åœ°çš„markdownæ–‡ä»¶.mdä¸­ï¼Œå›¾ç‰‡æ˜¯ä»¥â€œå¤–é“¾â€è¿™ä¸€å½¢å¼å­˜åœ¨çš„\n\nOffice wordä¸­ï¼Œå›¾ç‰‡æ˜¯ç›´æ¥æ’å…¥docxæ–‡ä»¶é‡Œé¢\nMarkdownä¸­ï¼Œå›¾ç‰‡åªæ˜¯ä¸€ä¸ªæœ¬åœ°&#x2F;è”ç½‘çš„åœ°å€\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æœ¬åœ°markdownç¼–è¯‘å™¨ï¼ˆå¦‚typoraï¼‰æ¥ç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœMDé‡Œé¢æ’å…¥çš„å›¾ç‰‡çš„æºæ–‡ä»¶è¢«ç§»åŠ¨æˆ–è€…åˆ é™¤äº†ï¼Œæˆ‘ä»¬çš„MDæ–‡æ¡£é‡Œé¢å¯¹åº”çš„å›¾ç‰‡ä¹Ÿæ— æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚\nåŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç”¨æœ¬åœ°ç¼–è¾‘å™¨å†™å¥½äº†ä¸€ç¯‡åšå®¢ï¼Œæƒ³æŠŠå®ƒä¸Šä¼ åˆ°CSDNä¸Šã€‚CSDNæ˜¯æ— æ³•è‡ªåŠ¨è½¬å­˜æ–‡ä»¶é‡Œé¢çš„å›¾ç‰‡çš„ï¼ˆå› ä¸ºè¿™ä¸ªå›¾ç‰‡åªæ˜¯ä¸€ä¸ªä½ ç¡¬ç›˜é‡Œé¢çš„æ–‡ä»¶è·¯å¾„ï¼‰\nä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿåœ¨æˆ‘ä»¬å¾€typoraé‡Œæ’å…¥å›¾ç‰‡çš„æ—¶å€™ï¼ŒPicGOè‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œå¹¶è¿”å›ä¸€ä¸ªå›¾ç‰‡çš„é“¾æ¥ \n\nè¿™æ—¶å€™ä½ çš„å›¾ç‰‡å°±æ˜¯ä¸€ä¸ª**ç½‘ç»œçš„é“¾æ¥(ç½‘å€)**ï¼Œä¸å†æ˜¯æœ¬åœ°è·¯å¾„ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä»»ä½•æœ‰ç½‘ç»œçš„åœ°æ–¹ã€ç”¨ä»»ä½•è®¾å¤‡è®¿é—®è¿™å¼ å›¾ç‰‡äº†\n\nå³ä¾¿æ˜¯æœ¬åœ°çš„é‚£å¼ å›¾ç‰‡ç§»åŠ¨oråˆ é™¤ï¼Œä¹Ÿä¸ä¼šå½±å“å›¾åºŠé‡Œçš„è¿™å¼ å›¾ç‰‡\nåŒç†ï¼Œtyporaé‡Œé¢çš„å›¾ç‰‡ä¹Ÿå°±ä¸ä¼šå¤±æ•ˆäº†ï¼\n\næ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ­å»ºé˜¿é‡Œäº‘OSSå›¾åºŠçš„æ•™å­¦äº†ï¼\nå‰æ’æé†’ï¼Œé˜¿é‡Œäº‘å›¾åºŠéœ€è¦ä»˜è´¹ğŸ’´ï¼Œä½†ä»·æ ¼éå¸¸ä¾¿å®œï¼ \n\nå¦‚æœä½ æƒ³ç™½å«–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç”¨giteeä½œä¸ºä½ çš„å›¾åºŠã€‚ä½†æ˜¯giteeæœ‰å•ä»“åº“æ–‡ä»¶å¤§å°é™åˆ¶(600mb)ã€‚åç»­å›¾ç‰‡å¤šäº†ï¼Œè½¬ç§»å›¾åºŠçš„æˆæœ¬æ›´é«˜ã€‚è¿˜ä¸å¦‚ä¸€å¼€å§‹å°±é€‰ä¸ªå¥½çš„å¹³å°ï¼Œä¸æ˜¯å˜›ï¼Ÿ\n\ntypora+picgo+giteeå›¾åºŠé…ç½®æ–¹æ³•ï¼Œçœ‹è¿™ä¸ªğŸ‘‰ã€é“¾æ¥ã€‘\n\n\n22.03.26æ›´æ–°ï¼šæœç„¶â€œå…è´¹çš„æ‰æ˜¯æœ€è´µçš„â€ï¼Œç»è¿‡å¤šä¸ªæœ‹å‹çš„åé¦ˆï¼Œç¡®è®¤giteeå›¾åºŠå·²ç»å´©æºƒï¼Œå›¾ç‰‡åœ¨giteeä»“åº“å†…æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯typora&#x2F;picgo&#x2F;obsidianå†…éƒ½æ— æ³•æ­£å¸¸é¢„è§ˆå›¾ç‰‡ï¼ŒCSDNä¹Ÿæ— æ³•è½¬å­˜ï¼å¯èƒ½æ˜¯giteeæ›´æ–°äº†å¤–é“¾æœºåˆ¶ã€‚è¿˜æ˜¯å»ºè®®å¤§å®¶æ›´ç€æœ¬ç¯‡åšå®¢ä½¿ç”¨é˜¿é‡Œäº‘OSSå§ï¼\n1.å‡†å¤‡è½¯ä»¶1.1Typora\nTyporaï¼šã€ä¸­æ–‡å®˜ç½‘ã€‘\n\næƒ³å¿…å„ä½åº”è¯¥å¬å¾ˆå¤šåšä¸»å®‰åˆ©è¿‡Typoraè¿™æ¬¾è½¯ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€æè¿°äº†\næ–°ç‰ˆæœ¬typoraéœ€è¦ä»˜è´¹ä¹°æ–­ã€‚å¯ä»¥è€ƒè™‘æ”¯æŒæ­£ç‰ˆï¼Œä¹Ÿå¯ä»¥å»æ‰¾æ‰¾æ—§ç‰ˆæœ¬å®‰è£…åŒ…\n\nå‚è€ƒè¿™ä¸ªè§†é¢‘ğŸ‘‰ã€é“¾æ¥ã€‘\nå¦‚æœä½ æ‰¾åˆ°äº†æ—§ç‰ˆæœ¬å®‰è£…åŒ…ï¼Œéœ€è¦ç¡®è®¤typoraç‰ˆæœ¬é«˜äº0.9.86\n\n1.2Picgo\nPicGoï¼šã€Githubåœ°å€ã€‘\n\næ‰¾åˆ°å¯¹åº”å®‰è£…åŒ…ï¼Œä¸‹è½½å®‰è£…å³å¯\n\n2.é…ç½®é˜¿é‡Œäº‘OSSåœ¨æµè§ˆå™¨æœç´¢é˜¿é‡Œäº‘OSSï¼Œå³å¯æ‰¾åˆ°å®˜ç½‘\n\nhttps://www.aliyun.com/product/oss\n\n\n2.1æ³¨å†Œ,å¼€é€šå¯¹è±¡å‚¨å­˜æ³¨å†Œè´¦æˆ·å¹¶å®ååï¼Œè¿›å…¥ä½ çš„æ§åˆ¶å°\n\né€‰æ‹©å¯¹è±¡å‚¨å­˜å¹¶å¼€é€š\n\n2.2åˆ›å»ºbucketåœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§åˆ›å»ºä¸€ä¸ªæ–°çš„bucket\n\næ³¨æ„ï¼š \n\nBucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯\næœåŠ¡å™¨å°±è¿‘é€‰æ‹©\nå›¾åºŠé€‰æ‹©æ ‡å‡†å­˜å‚¨\nè¯»å†™æƒé™å…¬å…±è¯»\n\n\nåˆ›å»ºå®Œæˆåï¼Œä½ çš„bucketåº”è¯¥å°±å‡ºç°åœ¨äº†å·¦ä¾§\n2.3æ‰¾åˆ°ä½ çš„åœ°åŸŸèŠ‚ç‚¹ç‚¹å‡»ä½ çš„bucketå\n\nç„¶åç‚¹å‡»bucketä¸‹çš„æ¦‚è§ˆ\n\nåœ¨è®¿é—®åŸŸåä¸€æ æ‰¾åˆ°ä½ çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°\n\nå¦‚å›¾ï¼Œåªéœ€è¦å¤åˆ¶oss-cn-shenzhenå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com\n\n\n2.4æ‰¾åˆ°ä½ çš„Keyæ¥åˆ°å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨ä½ çš„å¤´åƒä¸Šï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†\n\nåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©â€œç»§ç»­ä½¿ç”¨â€\n\nè¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ªAccessKey\n\nåœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„accessKeyIdå’ŒaccessKeySecret\n\n2.5ç»™ä½ çš„é˜¿é‡Œäº‘è´¦æˆ·å……å€¼2.5.1æ”¶è´¹é—®é¢˜é˜¿é‡Œäº‘OSSçš„å„é¡¹æ”¶è´¹æ˜¯ç‹¬ç«‹çš„ï¼\nå¯¹äºå›¾åºŠè€Œè¨€ï¼Œæœ‰ä¸¤ç§æ”¶è´¹å½¢å¼\n\nä»¥å……å€¼çš„æ–¹å¼ä½¿ç”¨å‚¨å­˜å®¹é‡ä»¥åŠæµé‡(é»˜è®¤çŠ¶æ€)\næŒ‰å¹´&#x2F;æœˆæ”¶è´¹ï¼Œè´­ä¹°ä¸€å®šå­˜å‚¨åŒ…ã€‚æµé‡é¢å¤–æ”¶è´¹\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿ä½ è´­ä¹°äº†ä¸‹å›¾çš„å­˜å‚¨åŒ…ï¼Œä½ ä¾æ—§è¦ä¸ºè®¿é—®å›¾åºŠçš„æµé‡ä»˜é’±ï¼\n\n\nä¸‹å›¾æ˜¯åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå®¹é‡å’Œæµé‡æ”¶è´¹çš„ä»·æ ¼\n\nå›¾åºŠä½¿ç”¨çš„æ˜¯æ ‡å‡†å‹ï¼Œè¯·å‹¿è´­ä¹°å…¶ä»–ç±»å‹\n\n\nå‚¨å­˜å®¹é‡ï¼š0.12å…ƒ&#x2F;GB&#x2F;æœˆ\nå›¾ç‰‡ä¸Šä¼ åˆ°é˜¿é‡ŒOSSæµé‡ï¼šå…è´¹\nå¤–ç½‘æµå‡ºæµé‡(å¦‚typoraè®¿é—®å›¾åºŠå›¾ç‰‡)ï¼šé—²æ—¶0.25å…ƒ&#x2F;GBï¼Œå¿™æ—¶0.50å…ƒ&#x2F;GB\n\n\n\nä»”ç»†ç®—ç®—ï¼Œæˆ‘ä»¬å›¾åºŠçš„æ•°æ®é‡å…¶å®å¾ˆå°çš„\n\n0.12å…ƒ&#x2F;1GB&#x2F;1ä¸ªæœˆï¼Œä¸€å¹´å°±æ˜¯1.44å…ƒï¼Œè¿œä½äº40GBçš„9å…ƒæ”¶è´¹ï¼\næˆªå›¾&#x2F;ç…§ç‰‡ä»¥å¹³å‡0.5mb&#x2F;å¼ ä¼°ç®—ï¼Œ1gbå¯å­˜æ”¾è¶…è¿‡1600å¼ å›¾ç‰‡ï¼\næ•°æ®ä½äº7GBçš„æƒ…å†µä¸‹ç›´æ¥å……å€¼ï¼Œä»¥GBä»˜è´¹å…¶å®æ¯”è´­ä¹°å‚¨å­˜åŒ…æ›´åŠ å€¼å¾—ï¼\n\n2.5.2æ³¨æ„äº‹é¡¹\nè®°å¾—ç»™é˜¿é‡Œäº‘è´¦æˆ·å……å€¼ï¼ï¼åˆ«åˆ°æ—¶å€™æ¬ è´¹åœç”¨äº†ï¼ï¼\nåˆšå¼€å§‹ä½œå›¾åºŠçš„æ—¶å€™ï¼Œç›´æ¥å……å€¼ä½¿ç”¨å³å¯ï¼Œæ— éœ€è´­ä¹°å®¹é‡åŒ…ï¼\n\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é˜¿é‡Œäº‘OSSåŸºæœ¬é…ç½®å®Œæ¯•äº†ğŸ˜\n\n3.é…ç½®picgoæ‰“å¼€picgoåï¼Œåœ¨ä½ windowsçš„çŠ¶æ€æ é‡Œæ‰¾åˆ°picgoçš„å›¾æ ‡ï¼Œæ‰“å¼€picgoçš„ä¸»ç•Œé¢\n\n3.1å›¾åºŠè®¾ç½®åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä»¥ä¸‹æ­¥éª¤å¡«å†™ä¿¡æ¯\n\nè®¾å®šKeyldï¼šå¡«å†™åˆšåˆšè·å¾—çš„AccessKeyID\n\nè®¾å®šKeySecretï¼šå¡«å†™AccessKeyIDSecret\n\nè®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™bucketåç§°\nè¿™é‡Œå¡«å†™çš„æ˜¯bucketåç§°ï¼Œä¸æ˜¯æµè§ˆå™¨é‡Œçš„åŸŸå\n\nç¡®è®¤å­˜å‚¨åŒºåŸŸï¼šå¡«å†™ä½ çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œæ³¨æ„å¤åˆ¶çš„æ ¼å¼\n\næŒ‡å®šå­˜å‚¨è·¯å¾„ï¼šå…¶å®å°±æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªæ–‡ä»¶å¤¹çš„åå­—ï¼Œä»¥/ç»“å°¾\nå®ƒä¼šè‡ªåŠ¨åœ¨ä½ çš„bucketé‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶æŠŠå›¾ç‰‡ä¸Šä¼ è¿›å»\n\n\n\nå¼„å®Œä¹‹åï¼Œè®°å¾—â€œç¡®å®šâ€ï¼Œå¹¶ç‚¹å‡»â€œè®¾ç½®ä¸ºé»˜è®¤å›¾åºŠâ€ï¼\n\n3.2picgoè®¾ç½®åœ¨è®¾ç½®é‡Œæ‰“å¼€æ—¶é—´æˆ³é‡å‘½åå’Œä¸Šä¼ åè‡ªåŠ¨å¤åˆ¶URL\n\næ—¶é—´æˆ³é‡å‘½åï¼šä»¥ä¸Šä¼ æ—¶é—´æ¥é‡å‘½åå›¾ç‰‡ï¼Œé¿å…åŒåçš„å›¾ç‰‡æ— æ³•ä¸Šä¼ ï¼ˆè¯¥è®¾ç½®ä¸å½±å“æœ¬åœ°å›¾ç‰‡åï¼‰\n\n\n4.é…ç½®typoraè¿›å…¥typoraä¸»ç•Œé¢ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„â€œæ–‡ä»¶-åå¥½è®¾ç½®â€\n\né€‰æ‹©å›¾åƒ\n\næ’å…¥å›¾ç‰‡æ—¶ä¸Šä¼ å›¾ç‰‡\n\nä¸‹é¢çš„é€‰é¡¹å…¨å‹¾ä¸Š\n\nä¸Šä¼ æœåŠ¡é€‰æ‹©PicGo(app)\n\nPicGoè·¯å¾„ï¼šæ‰¾åˆ°picgoçš„å®‰è£…è·¯å¾„\nä¸æ˜¯å®‰è£…åŒ…çš„è·¯å¾„ï¼ï¼ï¼ï¼\n\n\n\n\n5.å¤§åŠŸå‘Šæˆï¼è®¾ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬ç‚¹å‡»éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹\nå¦‚æœå¼¹å‡ºä»¥ä¸‹å¼¹çª—ï¼Œæˆ‘ä»¬çš„å›¾åºŠå°±æå®šäº†ï¼ğŸ˜€\n\næœ€åæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼ŒéªŒè¯å›¾ç‰‡æ˜¯å¦æ­£å¸¸ä¸Šä¼ \næ—¥å¸¸å†™ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å¤åˆ¶å›¾ç‰‡ï¼Œåœ¨typoraé‡Œé¢ç²˜è´´å³å¯ï¼Œæ— éœ€æ‹–åŠ¨ï¼\nå½“ä½ çš„å›¾ç‰‡é“¾æ¥æ˜¾ç¤ºä¸ºé˜¿é‡Œäº‘çš„ç½‘ç»œé“¾æ¥ï¼Œè€Œä¸æ˜¯æœ¬åœ°è·¯å¾„æ—¶\n\næˆ‘ä»¬çš„å›¾åºŠå°±å¤§è·å…¨èƒœï¼å¼€å§‹ä½ çš„åˆ›ä½œå§ï¼ğŸ§\nå¦‚æœè¿™ç¯‡åšå®¢å¸®åˆ°äº†ä½ ï¼Œè¿˜è¯·åœ¨ç•™è¨€å›å¤ä¸€ä¸‹å“¦~ä¸‡åˆ†æ„Ÿè°¢ï¼\n\nå¦‚æœä½ åœ¨é…ç½®å®Œpicgoåå‘ç°æœ‰é—®é¢˜ï¼Œæ£€æŸ¥è¿‡picgoé…ç½®å†…å®¹å’Œé˜¿é‡Œäº‘OSSè®¾ç½®ã€é‡å¯picgoã€é‡å¯ç”µè„‘åä»ç„¶æ— æ³•æˆåŠŸä¸Šä¼ ã€‚è¿˜å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢çš„é…ç½®æ–¹æ³•ğŸ‘‰ã€åšå®¢ã€‘\n\nç›¸å…³æ–‡ç« ï¼šè‡ªå»ºlsky proå›¾åºŠå¹¶ä½¿ç”¨picgoä¸Šä¼ \n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€Gitã€‘åœ¨Windows CMDä¸­å’ŒVScodeä¸­é…ç½®å·²ç»å®‰è£…å¥½çš„git","url":"/2022/08/01/tools/3%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AEpath%E8%AE%A9windows%20cmd%E7%94%A8%E4%B8%8A%E5%B7%B2%E5%AE%89%E8%A3%85%E7%9A%84git/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•å°†sourcetreeä¸‹è½½å¥½çš„gitå¯¼å…¥åˆ°windowsçš„cmdè¿›è¡Œä½¿ç”¨\n\n\né—®é¢˜å¼•å‡º\næˆ‘ä½¿ç”¨ç³»ç»Ÿä¸ºwin11ã€‚win10çš„æ“ä½œç†åº”ç›¸åŒï¼Œåªä¸è¿‡è®¾ç½®çš„ä½ç½®å¯èƒ½æœ‰å·®å¼‚\n\næˆ‘ç°åœ¨ä½¿ç”¨gitä¸»è¦ç”¨çš„æ˜¯sourcetreeçš„å¯è§†åŒ–ç•Œé¢ï¼Œå¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸€æ¬¡æäº¤çš„diffå’Œæäº¤å†å²ï¼Œéå¸¸å¥½ç”¨ï¼Œä¹Ÿå¼ºçƒˆæ¨èå¤§å®¶ä½¿ç”¨ ã€ä½¿ç”¨æ•™ç¨‹ã€‘\n\nä¸è¿‡å½“ä½ åˆæ¬¡å®‰è£…sourcetreeçš„æ—¶å€™ï¼Œä»–ä¼šå¸®ä½ ä¸‹è½½ä¸€ä¸ªgit\nå¦‚æœç³»ç»Ÿä¸­å·²æœ‰gitï¼Œä¹Ÿå¯èƒ½ä¼šè¢«ç§»åŠ¨åˆ°sourcetreeè‡ªå·±çš„å†…ç½®ä½¿ç”¨ç›®å½•ä¸­\n\nè¿™æ ·å°±ä¼šå¯¹æˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨git-cmdé€ æˆä¸€å®šçš„ä¸ä¾¿ã€‚\nå¯¹äºgitä»“åº“ï¼Œsourcetreeä¼šæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œçš„é€‰é¡¹ã€‚ä½†æ˜¯éœ€è¦ä»è¿™é‡Œé¢æ‰“å¼€è‚¯å®šä¸å¦‚ç›´æ¥å³é”®é€‰æ‹©windows cmdæ–¹ä¾¿ï¼\n\nä¸è¿‡å¯¹äºæˆ‘æ¥è¯´ï¼Œä¸€ä¸ªéå¸¸æ£’çš„ä¼˜ç‚¹å°±æ˜¯â€”â€”å¹²æ‰äº†å³é”®èœå•çš„ä¸¤ä¸ªæŒ‰é’®ğŸ˜‚\næ‰€ä»¥ç°åœ¨æˆ‘ä»¬æƒ³åšåˆ°çš„å°±æ˜¯è®©windowsè‡ªå¸¦çš„cmdä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸Šgitï¼Œè¿™æ ·å°±ä¸æ‹…å¿ƒå•ç‹¬ä½¿ç”¨git-cmdä¸æ–¹ä¾¿äº†\n\n1.è®¾ç½®æ–°çš„ç»ˆç«¯è·¯å¾„ä¾æ®ä¸Šé¢sourcetreeç»™å‡ºçš„è·¯å¾„ï¼Œæ‰¾åˆ°è¢«è—èµ·æ¥çš„git\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Atlassian\\SourceTree\\git_local\n\næ³¨ï¼šAppDataæ–‡ä»¶å¤¹æ˜¯éšè—çš„ï¼Œéœ€è¦æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­çš„æŸ¥çœ‹éšè—æ–‡ä»¶é€‰é¡¹\n\nåœ¨éšä¾¿ä¸€ä¸ªåœ°æ–¹å³é”®ï¼Œæ‰“å¼€cmd\n\nå³é”®ä¸Šæ–¹è¾¹æ ï¼Œé€‰æ‹©è®¾ç½®\n\nåˆ’åˆ°æœ€åº•ä¸‹ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶\n\nè¿™æ ·è®¾ç½®å³å¯ï¼Œgitçš„å›¾æ ‡ä¹Ÿæ˜¯åœ¨æˆ‘ä»¬åˆšåˆšæ‰“å¼€çš„gitç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°çš„\n\næ³¨æ„ï¼Œå‘½ä»¤è¡Œè¦é€‰æ‹©binä¸­çš„bash.exeè€Œä¸æ˜¯git-bashï¼Œåè€…ä¼šæ‰“å¼€gitè‡ªå·±é‚£ä¸ªè€æ—§çš„å‘½ä»¤è¡Œç»ˆç«¯\n\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¶éƒ¨çš„å°ä¸‰è§’å›¾æ ‡ä¸­é€‰æ‹©git bashè¿›è¡Œä½¿ç”¨äº†ï¼\n\n\nä¸è¿‡ï¼è¿™æ—¶å€™å¦‚æœä½ åœ¨windows powershellé‡Œé¢æ‰“å‡ºgitï¼Œè¿˜æ˜¯ä¼šæç¤ºæ‰¾ä¸åˆ°gitå‘½ä»¤ã€‚å¦‚æœæ¯ä¸€æ¬¡éƒ½éœ€è¦åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ï¼Œé‚£è¿˜æ˜¯å¾ˆéº»çƒ¦å‘€ï¼\n\n2.è®¾ç½®ç¯å¢ƒå˜é‡æ‰“å¼€ç”µè„‘è®¾ç½®-ç³»ç»Ÿï¼Œæ‹‰åˆ°æœ€åº•ä¸‹ï¼Œæ‰¾åˆ°ç³»ç»Ÿä¿¡æ¯\n\né€‰æ‹©é«˜çº§ç³»ç»Ÿè®¾ç½®\n\nåœ¨é«˜çº§é¢æ¿ä¸­æ‰“å¼€ç¯å¢ƒå˜é‡\n\nåœ¨ä¸‹æ–¹ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°pathï¼Œé€‰æ‹©ç¼–è¾‘\n\nåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªgitçš„ç¯å¢ƒå˜é‡ï¼Œå¡«å…¥cmdæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œæ³¨æ„æ˜¯cmdæ–‡ä»¶å¤¹ï¼\n\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Atlassian\\SourceTree\\git_local\\cmd\n\n\nå¡«å…¥åç¡®å®šä¿å­˜ï¼Œå†æ¬¡æ‰“å¼€windows power shellï¼Œè¾“å…¥git\nå‡ºç°ä¸‹æ–¹çš„gitå‘½ä»¤å¸®åŠ©ï¼Œé‚£å°±å¤§åŠŸå‘Šæˆï¼\n\n\nvscodeä¸­gitè·¯å¾„é…ç½®æ¥éƒ½æ¥äº†ï¼Œé¡ºä¾¿è¯´ä¸€å˜´vscä¸­çš„gitè·¯å¾„é…ç½®å§ï¼\nåœ¨è®¾ç½®ä¸­æœç´¢git pathï¼Œç‚¹å‡»åœ¨settings.jsonä¸­ç¼–è¾‘\n\nåœ¨git.pathä¸­å¡«å…¥è·¯å¾„å³å¯ï¼\næ³¨æ„ï¼šå› ä¸ºæœ‰è½¬ä¹‰ï¼Œæ‰€ä»¥è·¯å¾„åˆ†éš”ç¬¦\\éœ€è¦æ”¹æˆä¸¤ä¸ª\\\\\n\nç‚¹å‡»å·¦ä¾§gitç®¡ç†é¡µé¢ï¼Œçœ‹åˆ°æ­£å¸¸æ˜¾ç¤ºå‡ºä»“åº“å°±OKå•¦ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["git"]},{"title":"ã€æ•™ç¨‹ã€‘Giteeå¦‚ä½•ä¸‹è½½å•ä¸ªæ–‡ä»¶","url":"/2022/03/19/tools/4gitee%E4%B8%8B%E8%BD%BD%E5%8D%95%E6%96%87%E4%BB%B6/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•åœ¨giteeä¸Šä¸‹è½½å•ä¸ªæ–‡ä»¶\n\n\nå¼•å‡ºé—®é¢˜ä¸çŸ¥ä½¿ç”¨giteeçš„ä½ ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡éœ€è¦ä¸‹è½½æŸä¸ªä»“åº“æ–‡ä»¶çš„æƒ…å†µï¼Ÿ\n\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»“åº“ï¼Œæ˜¯@å®æ²‰ä¸€ç¬‘å¤§ä½¬è½¬è½½obsidiançš„æ’ä»¶çš„ä»“åº“é“¾æ¥\n\nç‚¹å‡»ä¸‹è½½ï¼Œä½ ä¼šå‘ç°giteeå¼€å§‹ç»™ä½ æ‰“åŒ…æ•´ä¸ªä»“åº“æ–‡ä»¶ï¼Œä¸€ä¸ªå‡ ç™¾mçš„ä»“åº“æ€ä¹ˆè¯´ä¹Ÿè¦å‡ åˆ†é’Ÿæ‰èƒ½ä¸‹å®Œã€‚å¯æ˜¯ï¼Œæˆ‘åªæ˜¯éœ€è¦æŸä¸€ä¸ªä¸»é¢˜æˆ–è€…æ’ä»¶ï¼Œgiteeå´ä¸èƒ½å•æ–‡ä»¶æˆ–è€…å•æ–‡ä»¶å¤¹ä¸‹è½½ï¼Œè¿™ä¸ªæ—¶å€™åˆè¦æ€ä¹ˆå¼„å‘¢ï¼Ÿ\n\nè§£å†³é—®é¢˜è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•éå¸¸ç®€å•ï¼\nåªéœ€è¦ç”¨chomeæˆ–è€…æ–°ç‰ˆedgeæµè§ˆå™¨ï¼Œå°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œæ¥è§£å†³è¿™ä¸ªéš¾é¢˜ï¼\næˆ‘ä»¬å¯ä»¥åœ¨edgeè®¾ç½®é‡Œé¢æ‰“å¼€æ‰©å±•å•†åº—ï¼Œæœç´¢GITEE\n\nä¸‹è½½giteeåŠ©æ‰‹å³å¯ï¼\n\nå®‰è£…è¿™ä¸ªæ‰©å±•ä»¥åï¼Œé‡å¯æµè§ˆå™¨ï¼Œå†æ¬¡æ‰“å¼€gitee\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ–‡ä»¶ä¹‹åå‡ºç°äº†å•ç‹¬çš„ä¸‹è½½å›¾æ ‡ï¼Œç‚¹å‡»å®ƒå³å¯ä¸‹è½½å•ä¸ªæ–‡ä»¶äº†\n\ngiteeåŠ©æ‰‹çš„ä»£ç ä¹Ÿæ˜¯å¼€æºçš„ï¼Œä¸»é¡µé“¾æ¥ğŸ‘‰ç‚¹æˆ‘\n\nå¤§ä½¬çš„æäº¤ç»¿ç‚¹å°±æ˜¯ä¸ä¸€æ ·\n\n\nç»“è¯­ä¸ªäººä¹Ÿå»ºè®®å¤§å®¶ç›´æ¥ç”¨edgeæµè§ˆå™¨å’Œå¾®è½¯è‡ªå¸¦çš„è¾“å…¥æ³•ï¼ˆè¿™ä¸¤ä¸ªç°åœ¨å·²ç»åšçš„å¾ˆå¥½äº†ï¼‰\né¿å…å…¶ä»–å›½äº§æµæ°“æ±¡æŸ“è‡ªå·±çš„ç”µè„‘\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ","git"]},{"title":"ã€MDã€‘ç”¨Obisidiançš„ä½ ä¸€å®šä¸èƒ½å¿½ç•¥çš„å›¾ç‰‡ä¿å­˜é—®é¢˜","url":"/2022/03/18/tools/5obsidian%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84/","content":"[TOC]\né—®é¢˜æ¥æºğŸ˜¥ä»Šå¤©åœ¨obsidianä½¿ç”¨kanbanæ’ä»¶çš„æ—¶å€™ï¼Œå‘ç°obsidianå…¶å®æ˜¯å¯ä»¥æŠŠæ’å…¥çš„å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°åº“æ–‡ä»¶å¤¹é‡Œé¢çš„ã€‚\n\nè¿™ä¸€ç‚¹å…¶å®éå¸¸é‡è¦ï¼\nä¹‹å‰æˆ‘ä»giteeå›¾åºŠè½¬åˆ°é˜¿é‡Œäº‘OSSï¼Œæœ€å¤§çš„åŸå› å°±æ˜¯ä¸Šå­¦æœŸæœŸæœ«å¤ä¹ é«˜æ•°çš„æ—¶å€™ï¼Œè‡ªå·±å†™çš„é«˜æ•°ç¬”è®°é‡Œçš„å›¾ï¼Œå› ä¸ºgiteeçš„çŸ­æš‚æ›´æ–°å¯¼è‡´æ— æ³•åŠ è½½ï¼æœ€åè¿‡äº†å·®ä¸å¤š1hå›¾ç‰‡æ‰èƒ½æ­£å¸¸åŠ è½½å‡ºæ¥ï¼Œç›¸å½“äºç™½ç™½æµªè´¹å¤ä¹ æ—¶é—´ï¼\n\nTypora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠ\n\nä½ æƒ³æƒ³ï¼Œè¿™è¿˜æ˜¯åœ¨å­¦æ ¡é‡Œï¼Œè€½è¯¯ç‚¹æ—¶é—´æ€»å½’ä¸ä¼šå‡ºç°ä»€ä¹ˆâ€œè¦äººå‘½â€çš„å¤§äº‹ã€‚ä½†å¦‚æœæ˜¯å·¥ä½œä¸­ä½ å†™çš„ä¸€äº›æ—¥å¿—ç¬”è®°ï¼Œå› ä¸ºå›¾åºŠç½‘ç«™çš„æ— æ³•è®¿é—®è€Œæš‚æ—¶çœ‹ä¸è§ï¼Œé‚£ä¸å°±å¯„äº†å—ï¼Ÿ\næ›´åˆ«æå›¾åºŠæ˜¯ä¿å­˜åœ¨ç½‘ç»œä¸­çš„ï¼Œæ€»å½’ä¼šæœ‰äº›éšç§é—®é¢˜ã€‚å°±è¿ç™¾åº¦ç½‘ç›˜éƒ½æ‰«ç”¨æˆ·æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨æˆ·åˆæ€èƒ½çŸ¥é“é˜¿é‡Œäº‘æœ‰æ²¡æœ‰å¹²è¿™ç§äº‹å‘¢ï¼Ÿ\n\nå¦‚ä½•è§£å†³ï¼ŸğŸ•µï¸â€â™‚ï¸1.typoraè®¾ç½®å›¾ç‰‡ä¿å­˜æŸ¥æ‰¾ç½‘ç»œèµ„æ–™ï¼Œçœ‹åˆ°äº†è¿™ç¯‡åšå®¢\n\ntyporaè®¾ç½®å›¾ç‰‡æ ¹ç›®å½•_ç”¨Obsidianä¸€å®šè¦æ³¨æ„çš„å›¾ç‰‡å’Œç¬”è®°é—®é¢˜ï¼\n\né‡Œé¢è®²åˆ°äº†å¯ä»¥ç”¨typoraæ¥è§£å†³è¿™ä¸ªé—®é¢˜\næ‰“å¼€typoraå·¦ä¸Šè§’çš„æ–‡ä»¶-åå¥½è®¾ç½®\nä¾ç…§ä¸‹å›¾è®¾ç½®\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤åˆ¶è¿›å»çš„è¿™ä¸ªå›¾ç‰‡ï¼ˆå…¶å®å°±æ˜¯ä¸Šé¢è¿™ä¸ªæˆªå›¾ï¼‰æ˜¾ç¤ºå‡ºäº†å®ƒçš„ç›¸å¯¹è·¯å¾„ï¼Œå¹¶æ­£å¸¸æ¸²æŸ“ã€‚\n\næ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°typoraåœ¨ä½ å½“å‰è¿™ä¸ªmdæ–‡ä»¶çš„ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªphotoæ–‡ä»¶å¤¹ï¼Œå°†ä½ è´´çš„å›¾å¤åˆ¶è¿›äº†è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­\n\n\nåŒæ—¶å¦‚æœæˆ‘ä»¬åœ¨obsidianæ‰“å¼€è¿™ä¸ªmdæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡æ˜¯èƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºæ¥çš„\n\nåˆ°è¿™é‡Œï¼Œå…¶å®æˆ‘ä»¬çš„é—®é¢˜å·²ç»è§£å†³äº†ï¼\n\n2.åšå®¢é—®é¢˜ä½†æ˜¯ï¼è¿™å¥½åƒå’Œæˆ‘ä»¬å½“åˆä½¿ç”¨å›¾åºŠçš„ç›®æ ‡å†²çª\nå†æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå›¾ç‰‡ï¼Œå½“æˆ‘æŠŠè¿™ç¯‡åšå®¢ä»typoraå¤åˆ¶åˆ°CSDNä¸Šçš„æ—¶å€™ï¼Œå®ƒè‚¯å®šä¼šä¿å­˜å¤±è´¥\n\n\n\nå› ä¸ºå›¾ç‰‡æœ¬èº«æ˜¯åœ¨æœ¬åœ°ç¡¬ç›˜é‡Œï¼ŒCSDNæ— æ³•åŸåŠ›è¯»å–ä½ ç¡¬ç›˜é‡Œçš„æ–‡ä»¶ï¼Œè‡ªç„¶æ— æ³•è½¬å­˜è¿™å¼ å›¾ç‰‡äº†ï¼\nè§£å†³è¿™ä¸ªé—®é¢˜åˆæœ‰ä¸¤ä¸ªæ–°çš„æ–¹æ³•~~\n2.1 æ¯æ¬¡ç¼–å†™ä¸åŒæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿›typoraè®¾ç½®è¿›è¡Œæ›´æ”¹å½“æˆ‘å†™åšå®¢çš„æ—¶å€™ï¼Œtyporaéœ€è¦è¿™æ ·è®¾ç½®ï¼Œå³å¯å€ŸåŠ©picgoè‡ªåŠ¨ä¸Šä¼ æˆ‘å¤åˆ¶è¿›å»çš„å›¾ç‰‡åˆ°å›¾åºŠé‡Œï¼Œä¹Ÿèƒ½æ­£å¸¸å¤åˆ¶åˆ°CSDNä¸­ï¼ˆæ•™ç¨‹åœ¨åšå®¢å¼€å¤´çš„é“¾æ¥é‡Œï¼‰\n\nè€Œå½“æˆ‘å†™ä¸ªäººéšç¬”/æ—¥è®°/å­¦ä¹ ç¬”è®°è¿™ç±»å¹¶ä¸æ‰“ç®—ä¸Šä¼ åˆ°åšå®¢é‡Œçš„å†…å®¹æ—¶ï¼Œå°±å¯ä»¥æŠŠå®ƒæ”¹æˆä¸Šé¢æåˆ°çš„æœ¬åœ°å­˜å‚¨æ–¹å¼\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼ä¸‡ä¸€å“ªä¸€æ¬¡å†™åšå®¢çš„æ—¶å€™å¿˜è®°æ”¹å›æ¥äº†ï¼Œä¸Šä¼ åšå®¢çš„æ—¶å€™å°±æƒ³é©¬è‰¯äº†ï¼ˆæˆ‘æ˜¯è§‰å¾—æˆ‘è‚¯å®šä¼šå¿˜ï¼Œè¿™ä¸ªäºåƒä¸å¾—ï¼‰\n\n2.2 åˆ†å¼€ä¸¤ä¸ªè½¯ä»¶è¿›è¡Œå†™ä½œåˆ«æ€¥ï¼Œåˆšå¼€å¤´ä¸æ˜¯æåˆ°äº†ï¼Œæˆ‘æ˜¯åœ¨obsidiané‡Œé¢å‘ç°è¿™ä¸ªåŠŸèƒ½çš„å˜›ï¼Ÿ\nç°åœ¨æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯å°†obsidianä¹Ÿè®¾ç½®ä¸ºåŒæ ·çš„ä¿å­˜æ–¹å¼ï¼Œè®©å¤åˆ¶è¿›å»çš„å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°ç›®å½•é‡Œã€‚\nè¿™æ ·ç”¨typoraå†™åšå®¢ï¼Œobsidianå†™è‡ªå·±çš„ä¸œè¥¿ï¼Œä¸¤å…¨å…¶ç¾ï¼\n\n3.obsidianè®¾ç½®å›¾ç‰‡ä¿å­˜åœ¨1.typoraæ–¹å¼æåˆ°çš„é‚£ç¯‡åšå®¢é‡Œé¢ï¼Œä½œè€…å‘ç°äº†obsidianå¤åˆ¶å›¾ç‰‡çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯è‡ªå·±çš„æ ¼å¼![[  ]]\nè¿™ç§æ ¼å¼å¹¶ä¸æ˜¯æ‰€æœ‰markdownç¼–è¾‘å™¨éƒ½è®¤è¯†ï¼\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ”¹obsidiançš„è®¾ç½®ï¼Œè®©å®ƒå˜æˆå¤§éƒ¨åˆ†markdownç¼–è¾‘å™¨é€šç”¨çš„![ ]( )å½¢å¼\n\nå…ˆçœ‹çœ‹ä½ çš„obsidianç”¨çš„æ˜¯ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬0.13.33ï¼Œå¦‚æœä¸æ˜¯ï¼Œå…ˆæ›´æ–°ä¸€ä¸‹\n\n\næ‰“å¼€obsidianè®¾ç½®-æ–‡ä»¶ä¸é“¾æ¥ï¼Œæ‰¾åˆ°ä¸‹å›¾çš„è¿™å‡ ä¸ªè®¾ç½®ã€‚å¦‚æœä½ æ²¡æœ‰æ›´æ”¹è¿‡ï¼Œé»˜è®¤çš„è®¾ç½®å’Œå›¾ç‰‡é‡Œé¢åº”è¯¥æ˜¯ä¸€æ ·çš„\n\næˆ‘ä»¬éœ€è¦æ”¹æˆä»¥ä¸‹çš„æ ·å­\n\nå†æ¬¡å°è¯•æ’å…¥å›¾ç‰‡ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ’å…¥çš„è¿™ä¸ªå›¾ç‰‡å·²ç»å˜æˆäº†mdé€šç”¨çš„![ ]( )å½¢å¼\n\nå†æ¬¡ç”¨typoraæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå›¾ç‰‡é“¾æ¥ä¾æ—§ä¸è®¤è¯†ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå›¾ç‰‡å·²ç»è¢«æ­£å¸¸åŠ è½½å‡ºæ¥äº†ï¼\n\nobsidiançš„è®¾ç½®ä¹Ÿæå®šäº†ï¼\nä»Šåå†™ä½œçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ†å¼€ä¸¤ä¸ªè½¯ä»¶è¿›è¡Œå†™ä¸åŒçš„å†…å®¹å•¦ï¼\n\nä¸€äº›æå‡obsidianç¼–è¾‘ä½“éªŒçš„æ’ä»¶æœ€åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œobsidiançš„ä½¿ç”¨ä½“éªŒæ²¡æœ‰typoraå¥½å‘€ï¼\n\ntyporaå¯ä»¥å®æ—¶æ¸²æŸ“ï¼Œobsidianéœ€è¦å•ç‹¬åˆ‡æ¢\ntyporaæœ‰æ‰“å­—æœºæ¨¡å¼ï¼Œobsidianéœ€è¦æ»šæ¥æ»šå»\n\næ¬¸ï¼Œåˆ«æ€¥ï¼Œè¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªæå‡å†™ä½œä½“éªŒçš„æ’ä»¶ï¼Œè£…äº†ä¹‹åï¼Œä¸Šé¢è¿™ä¿©åŠŸèƒ½å°±éƒ½æœ‰å•¦ï¼\n\n\næ›´æ–°ï¼šå‘ç°è¿™ä¸ªåŠŸèƒ½å…¶å®obsidianå·²ç»è‡ªå¸¦äº†ï¼Œä½†æ˜¯æˆ‘åœ¨ç¼–è¾‘å™¨ä¸­é€‰æ‹©äº†æ—§ç‰ˆç¼–è¾‘å™¨å¯¼è‡´æ²¡çœ‹åˆ°è¿™ä¸ªåŠŸèƒ½ã€‚æ—¢ç„¶è‡ªå¸¦äº†å°±æ²¡å¿…è¦ä¸‹æ’ä»¶å•¦ï¼ä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œä¸‹é¢è¿™ä¸ªæ‰“å­—æœºæ’ä»¶åªæœ‰æ—§ç‰ˆç¼–è¾‘å™¨æ‰æœ‰æ•ˆã€‚å¦‚æœä½ éœ€è¦è¿™ä¸ªæ¨¡å¼ï¼Œé‚£å°±ä½¿ç”¨ä¸Šé¢çš„æ¸²æŸ“æ’ä»¶+è¿™ä¸ªæ‰“å­—æœºæ’ä»¶æ¥åˆ›ä½œå§ï¼ˆæœ¬äººç°åœ¨å°±æ˜¯è¿™ä¹ˆåšçš„ï¼‰ä½ è§‰å¾—äº‹æƒ…çœŸçš„æœ‰é‚£ä¹ˆç®€å•å—ï¼Ÿå¹¶ä¸æ˜¯çš„ï¼æ›´æ–°äº†æ‰“å­—æœºæ’ä»¶åˆ°0.2.1ä»¥åï¼Œå‘ç°ä»–å·²ç»æ”¯æŒäº†æ–°ç‰ˆæœ¬ç¼–è¾‘å™¨äº†ï¼ŒèŠœæ¹–èµ·é£ï¼\n\nä¸‹é¢è¿˜æœ‰picgoä¸Šä¼ å›¾åºŠçš„æ’ä»¶\nä»¥åŠä¸€ä¸ªè‡ªåŠ¨ç²˜è´´é“¾æ¥çš„æ’ä»¶\n\n\næœ€åè¿˜æœ‰è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥ä¼˜åŒ–obsidiané€‰ä¸­ä¸­æ–‡å¥å­çš„åˆ†è¯åŠŸèƒ½\n\nå®‰è£…å®Œè¿™äº›ï¼Œä½¿ç”¨ä½“éªŒå°±å¾ˆæ¥è¿‘typoraå•¦ï¼\nå½“ç„¶æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ç”¨typoraæ¥ç¼–è¾‘\n\nç»“è¯­ğŸ˜‹ä¾ç…§è¿™ç¯‡åšå®¢è®¾ç½®å®Œåï¼Œå°±èƒ½æ›´å¥½åœ°åˆ†å¼€å†™ä½œ ç§äººå†…å®¹å’Œåšå®¢æ–‡ä»¶å•¦\nä»¥åä¹Ÿå¯ä»¥æ”¾å¿ƒåœ°å¾€mdæ–‡ä»¶ä¸­åŠ å›¾ç‰‡äº†ï¼Œæ¯•ç«Ÿåœ¨æœ¬åœ°é‡Œï¼Œè°éƒ½çœ‹ä¸åˆ°\n\nä¸è¿‡ä¹Ÿè¦è€ƒè™‘åˆ°æœ¬åœ°æ–‡ä»¶å¤§å°é—®é¢˜ï¼Œåˆ«æŠŠä½ çš„OneDriveå¡æ»¡å›¾ç‰‡å¯¼è‡´ç©ºé—´ä¸å¤Ÿç”¨äº†ã€‚é‚£å°±å¾—æğŸ’´å‡çº§å®¹é‡äº†ï¼Œæˆ‘ç°åœ¨åªæœ‰å…è´¹çš„5GB\næœ‰äº›å›¾ç‰‡å¯ä»¥è€ƒè™‘ç”¨å…‰å½±é­”æœ¯æ‰‹ç­‰è½¯ä»¶æ¥å‡å°æ–‡ä»¶ä½“ç§¯ï¼Œæ¯”å¦‚æ‰‹æœºæ‹çš„ç¬”è®°å›¾ï¼Œæ²¡å¿…è¦é‚£ä¹ˆé«˜æ¸…ï¼Œ6mbé™åˆ°500kbéƒ½è¿˜èƒ½çœ‹æ¸…æ¥š\n\nä½ å­¦åºŸäº†å—ï¼Ÿ\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ","typora","obsidian"]},{"title":"ã€MDã€‘Markdownå¦‚ä½•æ’å…¥è§†é¢‘ã€mp3å’Œgif","url":"/2022/05/01/tools/6md%E5%A6%82%E4%BD%95%E6%8F%92%E5%85%A5%E8%A7%86%E9%A2%91/","content":"æ€»æ‰€å‘¨çŸ¥ï¼Œé„™äººæœ‰ä¸€ä¸ªä¸“æ å«åšã€å·®ç”Ÿæ–‡å…·å¤šã€‘ï¼Œé‡Œé¢è®°å½•äº†ä¸€äº›å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠä½¿ç”¨å·¥å…·æ—¶ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚\näºæ˜¯ä¹ï¼Œä¹‹å‰å°±æœ‰ä¸€ä¸ªæœ‹å‹åœ¨ç¾¤é‡Œé—®é“â€œmarkdownå¦‚ä½•æ’å…¥è§†é¢‘â€ï¼Œå½“æ—¶çš„æˆ‘ä¸ä¼šå¼„ï¼Œç„¶åå°±å‡ºç°äº†ä¸‹é¢è¿™ä¸€å¹•ğŸ‘‡\n\næ˜å¤©å°±å¼„ğŸ˜‚å¼€æ•´ï¼ï¼ˆç„¶è€Œè¿™ç¯‡åšå®¢æ˜¯åœ¨5.1åŠ³åŠ¨èŠ‚å†™çš„ï¼‰\n\n[TOC]\n\né¦–å…ˆä½ è¦çŸ¥é“ï¼Œmarkdownè¯­æ³•å…¶å®æ˜¯å…¼å®¹htmlè¯­æ³•çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŠŠmarkdownè½¬æ¢ä¸ºhtmlï¼Œæ”¾ç½®åˆ°åšå®¢ç½‘ç«™ä¸Š\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨htmlä»£ç æ¥æ’å…¥è§†é¢‘å’Œmp3éŸ³ä¹\n1.mdæ’å…¥è§†é¢‘å¯¹åº”è¯­æ³•å¦‚ä¸‹ï¼Œè¿™ä¸¤ä¸ªéƒ½å¯ä»¥\n&lt;video src=&quot;è§†é¢‘é“¾æ¥&quot;&gt;&lt;/video&gt;\n\n&lt;iframe height=498 width=510 src=&quot;è§†é¢‘é“¾æ¥&quot;&gt;\n\nå¦‚æœæˆ‘ä»¬æ’å…¥ä¸€ä¸ªBç«™è§†é¢‘çš„é“¾æ¥ï¼Œåœ¨typoraä¸­çš„æ˜¾ç¤ºå¦‚ä¸‹\n\nå®é™…ä¸Šå®ƒå°±æ˜¯æŠŠä¸€ä¸ªç½‘ç«™æ’å…¥åˆ°äº†æˆ‘ä»¬çš„markdownæ–‡ä»¶ä¸­ï¼Œå½¢æˆäº†ä¸€ä¸ªç®€æ˜“çš„æµè§ˆå™¨\nå…¶å®ä½ å¦‚æœå¤åˆ¶ä¸€ä¸ªè§†é¢‘ï¼Œç›´æ¥åœ¨typoraé‡Œé¢ç²˜è´´çš„è¯ï¼Œtyporaæ˜¯ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„htmlé“¾æ¥çš„\n&lt;video src=&quot;../../../../Desktop/md.mp4&quot;&gt;&lt;/video&gt;\n\nä½†è¿™ä¸ªé“¾æ¥å’Œä¸€ä¸ªæœ¬åœ°çš„å›¾ç‰‡é“¾æ¥ç›¸åŒï¼Œå¦‚æœéœ€è¦ä¸Šä¼ åˆ°CSDNç½‘ç«™ä¸Šçš„è¯ï¼ŒCSDNæ— æ³•æ­£å¸¸è½¬å­˜ä½ çš„è§†é¢‘\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æŠŠè¿™ä¸ªè§†é¢‘ä¹Ÿä¸Šä¼ åˆ°æˆ‘ä»¬çš„å›¾åºŠé‡Œé¢\n\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å›¾åºŠï¼Œé‚£å°±çœ‹çœ‹æˆ‘å§ï¼šã€å›¾åºŠæ­å»ºæ•™ç¨‹ã€‘\n\nå›¾åºŠå¹¶ä¸æ˜¯åªèƒ½ä¿å­˜å›¾ç‰‡ï¼Œå®ƒå¯ä»¥ä¿å­˜ä»»ä½•æ ¼å¼çš„æ–‡ä»¶ã€‚å°†è§†é¢‘æ‹–å…¥picgoï¼Œå³å¯ä¸Šä¼ æˆ‘ä»¬çš„è§†é¢‘åˆ°å›¾åºŠ\n\nç‚¹å‡»ç®­å¤´æ‰€æŒ‡æŒ‰é’®ï¼Œå¤åˆ¶æˆ‘ä»¬è§†é¢‘çš„é“¾æ¥\n\nç„¶åæŠŠè§†é¢‘é“¾æ¥å¡«å…¥ä¸Šé¢ä¸¤ç§å½¢å¼å…¶ä¸­ä¹‹ä¸€çš„htmlä»£ç ä¸­ï¼Œå³å¯æ˜¾ç¤ºå‡ºè§†é¢‘ï¼\n\n\n1.2CSDNåšå®¢æ’å…¥è§†é¢‘ç„¶åæˆ‘å°±å‘ç°CSDNä¸æ”¯æŒä¸Šé¢ä¸¤ç§æ ·å¼ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨markdownç¼–è¾‘å™¨çš„é¡¶éƒ¨é€‰æ‹©è§†é¢‘\n\nç„¶åè¿™é‡Œä¼šè®©ä½ å¡«å†™è§†é¢‘çš„åœ°å€ï¼Œç›®å‰åªæ”¯æŒtxä¼˜é…·è¿˜æœ‰bilibiliçš„å·²ä¸Šä¼ è§†é¢‘\n\næˆ–è€…ä½ å¯ä»¥é€‰æ‹©â€œæ’å…¥å·²æœ‰è§†é¢‘â€ï¼Œè¿™ä¼šæŠŠè§†é¢‘ä¸Šä¼ åˆ°CSDNä¸Š\n\n\n2.mdæ’å…¥MP3æ–‡ä»¶2.1ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾æ’å…¥MP3æ–‡ä»¶çš„æ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹ï¼Œé€‰æ‹©ä¸€ä¸ªéVIPæ­Œæ›²ï¼Œç‚¹å‡»ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨\n\nç„¶åå¤åˆ¶è¿™é‡Œçš„htmlä»£ç å³å¯ï¼\n\n&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86 src=&quot;//music.163.com/outchain/player?type=2&amp;id=33367876&amp;auto=1&amp;height=66&quot;&gt;&lt;/iframe&gt;\n\n\n\nä¸Šé¢å°±ç”Ÿæˆäº†ä¸€ä¸ªç½‘æ˜“äº‘éŸ³ä¹çš„å¤–é“¾æ’­æ”¾å™¨\n\n2.2è‡ªå·±çš„MP3éŸ³é¢‘æ–‡ä»¶æ ¹æ®ä¸Šé¢htmlæ’å…¥è§†é¢‘çš„ä»£ç ï¼Œå°±å¯ä»¥çŒœå‡ºæ¥éŸ³é¢‘çš„ä»£ç æ˜¯å•¥\næŠŠvedioæ”¹æˆaudioå°±å¯ä»¥å•¦ï¼\n&lt;audio src=&quot;mp3æ–‡ä»¶é“¾æ¥åœ°å€&quot;&gt;&lt;/audio&gt;\n\nä¸‹é¢å°±æ˜¯ä¸€ä¸ªæˆ‘ä¸Šä¼ çš„MP3éŸ³ä¹æ–‡ä»¶\n\nåœ¨typoraä¸­çš„æ ·å¼å¦‚ä¸‹ğŸ‘‡\n\n3.mdæ’å…¥gifè¿™ä¸ªå°±æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„æ ¼å¼äº†\ngifå›¾ç‰‡ä¹Ÿæ˜¯ä¸€ä¸ªå›¾ç‰‡ï¼Œç›´æ¥ç”¨![]()è¿™ç§æ ‡å‡†çš„markdownæ’å…¥å›¾ç‰‡çš„æ ·å¼å°±å¯ä»¥äº†\n\nç»“è¯­è¿™ä¸ªæ–°æ–‡å…·çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼ğŸ˜\nè™½ç„¶æˆ‘æ„Ÿè§‰åœ¨markdownä¸­æ’å…¥è§†é¢‘çš„ä½¿ç”¨åœºæ™¯ä¸æ˜¯å¾ˆå¤š\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘ä½¿ç”¨æ ‘è“æ´¾åœ¨Linuxç¯å¢ƒä¸‹ç¼–å†™Cè¯­è¨€ä»£ç ","url":"/2022/02/26/raspberry/1%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E5%9C%A8linux%E7%BC%96%E8%AF%91C%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81/","content":"\n\n\n\nå‰è¨€å¦‚ä½•ä½¿ç”¨æ ‘è“æ´¾ç¼–è¯‘Cè¯­è¨€ä»£ç å‘¢ï¼Ÿ\n\n\n21å¹´æš‘å‡çš„æ—¶å€™ï¼Œå­¦ä¹ ç¼–ç¨‹çš„åŠ²å¤´é«˜æ¶¨ï¼Œç„¶åå†²åŠ¨æ¶ˆè´¹ä¹°äº†ä¸ªæ ‘è“æ´¾4Bâ€¦â€¦ç»“æœå‹æ ¹ä¸ä¼šç”¨ï¼Œåƒç°äº†åŠå¹´\n\nä¸è¿‡ç°åœ¨å·²ç»å­¦å®Œäº†Cè¯­è¨€ï¼Œä¹Ÿæ¥è§¦äº†ä¸€ä¸¢ä¸¢Linuxç³»ç»Ÿä¸‹çš„gccæŒ‡ä»¤ï¼Œå¯ä»¥å°è¯•ç”¨å®ƒæ¥ç¼–å†™Cè¯­è¨€ä»£ç äº†ï¼\n\n1.åˆ›å»ºtest.cæ–‡ä»¶é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶\n\nç‚¹å‡»test.cæ–‡ä»¶åï¼Œæ ‘è“æ´¾ä¼šç”¨è‡ªå¸¦çš„Geanyç¼–è¾‘å™¨æ‰“å¼€å®ƒ\nç„¶åæˆ‘ä»¬å¯ä»¥å¾€é‡Œå†™å…¥Cè¯­è¨€æœ€ç»å…¸çš„hellowordä»£ç \n#include &lt;stdio.h&gt;int main(void)&#123;\tprintf(&quot;hello wordl!\\n&quot;); \treturn 0;&#125;\n\n2.ç¼–è¯‘è¿è¡Œè¯¥æ–‡ä»¶ä¿å­˜æ–‡ä»¶åï¼Œæ‰“å¼€é¡¶éƒ¨çš„å‘½ä»¤è¡Œ\n\nè¾“å…¥ä»¥ä¸‹ä»£ç \n\næ³¨æ„cdåéœ€è¦ç©ºæ ¼ï¼Œå¡«å†™çš„æ˜¯åˆšåˆšåˆ›å»ºçš„test1.cæ–‡ä»¶çš„è·¯å¾„\n\ncd /home/pi/code\n\nå¡«å†™å®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å¤šå‡ºäº†ä¸€ä¸ªæ–‡ä»¶åœ°å€\n\nè¿™ä»£è¡¨ç›®å‰æˆ‘ä»¬æ“ä½œçš„æ˜¯codeæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹\nè¾“å…¥lsï¼Œå¯ä»¥çœ‹åˆ°å½“ä¸‹æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶\n\nè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶\ngcc test1.c -o test1\n\n\næœ€åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥è¿è¡Œè¯¥æ–‡ä»¶ï¼\n./test1\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºå·²ç»æˆåŠŸè¿è¡Œäº†ï¼\n\n\n3.ç¼–è¯‘å¹¶é“¾æ¥ä¸¤ä¸ªæºæ–‡ä»¶æ¥ä¸‹æ¥æˆ‘ä»¬å†å°è¯•ä¸€ä¸ªç›¸å¯¹æ¥è¯´æ›´å¤æ‚çš„ä»£ç \nåˆ†å¼€ä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯test.cï¼ŒåŒ…å«äº†mainå‡½æ•°\nå¦å¤–ä¸€ä¸ªæ˜¯Add.cï¼ŒåŒ…å«äº†Addå‡½æ•°\nå› ä¸ºæ˜¯åœ¨ä¸åŒçš„æºæ–‡ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦ç”¨externæ¥å£°æ˜å¤–éƒ¨å‡½æ•°\n#include &lt;stdio.h&gt; extern int Add(int x,int y); int main(void)&#123;\tint a=3;\tint b=5;\tprintf(&quot;%d&quot;,Add(a,b); \treturn 0;&#125;\n\n\næ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨-cæŒ‡ä»¤æ¥ç”Ÿæˆ.oç›®æ ‡æ–‡ä»¶\n\nåœ¨vsä¸‹ï¼Œç›®æ ‡æ–‡ä»¶çš„åç¼€æ˜¯.obj\n.iæ–‡ä»¶ä¸ºé¢„ç¼–è¯‘æ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘çš„ä»£ç é‡Œé¢externå†™é”™äº†ï¼ˆå¾ˆæ˜¯å°´å°¬ï¼‰ï¼Œç¼–è¯‘å™¨æŠ¥äº†è­¦å‘Š\næ›´æ”¹äº†ä»¥åå°±ç¼–è¯‘æˆåŠŸäº†\n\nè¿™ä¸€æ­¥æ˜¯æŠŠCè¯­è¨€ä»£ç è½¬æ¢æˆæœºå™¨è®¤è¯†çš„äºŒè¿›åˆ¶æŒ‡ä»¤\n\n\nç„¶åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œé“¾æ¥è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶test\ngcc test1.c Add.c -o test\n\n\næœ€åè¿˜æ˜¯ä½¿ç”¨./testæŒ‡ä»¤æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç»“æœå·²ç»è¾“å‡ºäº†ï¼\n\nç»“è¯­ç¬¬ä¸€æ¬¡å°è¯•ç”¨linuxçš„gccæŒ‡ä»¤æ¥ç¼–è¯‘Cè¯­è¨€ä»£ç ï¼Œè¿˜æœ‰ç‚¹å°æ¿€åŠ¨\nåƒç°çš„æ ‘è“æ´¾ç»ˆäºæœ‰ç”¨äº†ï¼ğŸ˜\n\nå¦‚æœæœ‰å†™çš„ä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·å¤§ä½¬æ— æƒ…æŒ‡å‡ºï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€Gitã€‘Sourcetreeçš„åˆå§‹åŒ–ä¸ä½¿ç”¨","url":"/2022/02/25/tools/7sorcetree%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%99%E7%A8%8B/","content":"[TOC]\nå‰è¨€è¿˜åœ¨ç”¨å°ä¹Œé¾Ÿç®¡ç†ä½ çš„gitæœ¬åœ°ä»£ç å—ï¼Ÿ\nä¸ºä½•ä¸æ¥å°è¯•ä¸€ä¸‹ï¼Œè¿™æ¬¾ç•Œé¢æ›´åŠ ç›´è§‚çš„gitå¯è§†åŒ–å·¥å…·ï¼\n\nsorcetreeå®˜ç½‘ğŸ‘‰https://www.sourcetreeapp.com/\n\nåˆ«çœ‹åˆ°è‹±æ–‡å®˜ç½‘å°±è·‘äº†ï¼Œè½¯ä»¶æœ¬èº«æ˜¯ä¸­æ–‡ç•Œé¢ï¼\n\n\næ³¨ï¼šæœ¬åšæ–‡åªè®²è¿°sourcetreeåˆå§‹åŒ–æ–¹å¼ï¼Œå¹¶ä¸è®¨è®ºå…¶ä¸TortoiseGitçš„åŠŸèƒ½å¼ºå¼±\n\nä»€ä¹ˆï¼Ÿä½ è¿˜ä¸çŸ¥é“gitæ˜¯å•¥ï¼Ÿ\né‚£è¿˜ä¸èµ¶å¿«ç‚¹å‡»è¿™ç¯‡åšå®¢äº†è§£ä¸€äºŒï¼ğŸ‘‡\n\nå®ä¹ ç”Ÿ Git ä¸ç†Ÿç»ƒï¼Œè¿˜æ²¡è„¸å»é—®æ˜¯ç§ä»€ä¹ˆä½“éªŒâ€¦\n\n\n1.åˆå§‹åŒ–ä¸‹è½½å®‰è£…ä»¥åï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹ç•Œé¢\nè‹¥ä¸éœ€è¦ç”¨bitbucketï¼Œé€‰æ‹©è·³è¿‡å³å¯\n\nç¬¬äºŒæ­¥ï¼Œsourcetreeä¼šè®©ä½ ä¸‹è½½è¿™ä¸¤ä¸ªå·¥å…·\n\nå¦‚æœä½ çš„ç”µè„‘é‡Œå·²ç»æœ‰äº†ï¼Œå®ƒèƒ½æ£€æµ‹å‡ºæ¥å®‰è£…ä½ç½®\nå¦‚æœä½ çš„ç”µè„‘é‡Œæ²¡æœ‰è¿™ä¸¤ä¸ªå·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ ä¸‹è½½\n\n\nç¬¬ä¸‰æ­¥ï¼Œå®ƒä¼šè®©ä½ å¡«å†™ä½ çš„ç”¨æˆ·åå’Œé‚®ç®±\nå»ºè®®è¿™é‡Œå’Œä½ çš„giteeæˆ–githubä¸Šçš„ç”¨æˆ·å&#x2F;é‚®ç®±åŒæ­¥ï¼\n\nå¡«å†™å¥½åï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œä¼šå¼¹å‡ºè¿™ä¸ªç•Œé¢\né€‰æ‹©â€œå¦â€å³å¯\n\n2.å…‹éš†ä»“åº“åˆå§‹åŒ–å®Œæˆåï¼Œä¼šå˜æˆä»¥ä¸‹ç•Œé¢\n\næºè·¯å¾„ï¼šå¡«å†™ä½ çš„gitee&#x2F;githubä»“åº“é“¾æ¥\nç›®æ ‡è·¯å¾„ï¼šé€‰æ‹©ä¸€ä¸ªæœ¬åœ°çš„ç©ºæ–‡ä»¶å¤¹ï¼Œæ³¨æ„è·¯å¾„ä¸è¦æœ‰ä¸­æ–‡\nåå­—ï¼šå¡«å†™ä¸€ä¸ªä¼šåœ¨Sourcetreeé‡Œæ˜¾ç¤ºçš„ä»“åº“åå­—\n\n\n é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¦æ€ä¹ˆæ‰¾åˆ°ä½ çš„ä»“åº“é“¾æ¥å‘¢ï¼ŸğŸ‘‡\n\n\nå¡«å†™å®Œæ¯•åï¼Œsourcetreeä¼šå¼€å§‹ä¸‹è½½ï¼Œå¹¶åœ¨ä½ é€‰æ‹©çš„è·¯å¾„ä¸‹åˆ›å»ºæœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹\n\nå¦‚æœä½ æœ‰å¤šä¸ªè¿œç¨‹ä»“åº“ï¼Œç‚¹å‡»+å·é‡å¤ä¸Šè¿°æ­¥éª¤å³å¯\n\n\næ·»åŠ å·²æœ‰æœ¬åœ°ä»“åº“å·²æœ‰æœ¬åœ°ä»“åº“çš„æƒ…å†µä¸‹ï¼Œå¯ç›´æ¥ç‚¹å‡»Addæ·»åŠ \nsourcetreeä¼šæ£€æµ‹å‡ºæ¥è¿™æ˜¯ä¸€ä¸ªgitä»“åº“\n\n3.æäº¤ä»£ç å›åˆ°ä¸»ç•Œé¢ï¼Œè¿™é‡Œä¼šå‡ºç°ä½ çš„ä»“åº“pushå†å²ï¼Œä»¥åŠæ“ä½œçš„æ—¥æœŸ\nå¦‚æœä½ çš„æœ¬åœ°ä»“åº“é‡Œé¢åšå‡ºäº†æ›´æ”¹ï¼Œå’Œç½‘ç»œä»“åº“ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œè½¯ä»¶å†…ä¼šåœ¨ç¬¬ä¸€è¡Œæ˜¾ç¤ºæœ‰æœªæäº¤çš„æ›´æ”¹\n\nç‚¹å‡»æ–‡ä»¶çŠ¶æ€ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ æœ¬åœ°ä»“åº“çš„é‚£äº›æ–‡ä»¶åšå‡ºäº†æ›´æ”¹\n\næœªæš‚å­˜æ–‡ä»¶ï¼šæœ¬åœ°æ–‡ä»¶åšå‡ºäº†æ›´æ”¹ï¼Œä½†å¹¶æ²¡æœ‰ç¡®è®¤\nå·²æš‚å­˜æ–‡ä»¶ï¼šä¿å­˜äº†æœ¬åœ°æ–‡ä»¶çš„å‰¯æœ¬ï¼Œç­‰å¾…pushåˆ°è¿œç¨‹ä»“åº“\nåº•éƒ¨ç™½æ¡†ï¼šå¡«å†™pushè¯´æ˜\n\n\nä¾ç…§ä¸‹å›¾æ“ä½œå³å¯\n\nå¦‚æœä½ ä¸é€‰æ‹©â€œç«‹å³æ¨é€å˜æ›´ï¼Œå°±éœ€è¦åœ¨å·¦ä¸Šè§’çš„â€œæ¨é€â€é€‰é¡¹å†…è¿›è¡ŒäºŒæ¬¡æ“ä½œï¼Œæ‰ä¼šä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“\n\n\nå¦‚æœä½ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡gitï¼Œåœ¨è¿™ä¸€æ­¥ç‚¹å‡»æäº¤ä¹‹åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ¡†è®©ä½ å¡«å†™ä½ çš„è´¦å·å¯†ç \nå¡«å†™å¯¹åº”ç½‘ç»œä»“åº“ï¼ˆgitee&#x2F;githubï¼‰çš„è´¦å·å¯†ç å³å¯ï¼\n\nç”¨æˆ·åï¼šå¡«å†™æ³¨å†Œé‚®ç®±\n\n\nç”±äºæœ¬äººå·²ç»å¡«å†™è¿‡ï¼Œä¸”ä¸çŸ¥ä¸ºä½•æ— æ³•åœ¨è´¦æˆ·&#x2F;webå‡­æ®ä¸­æ‰¾åˆ°å¹¶åˆ é™¤å®ƒï¼Œæ•…æ— æ³•å¤ç°è¿™ä¸€æ­¥\n\næ‰€ä»¥æˆ‘å¸®åŒå­¦ä¹Ÿå¼„äº†ä¸€ä¸ªgiteeè´¦æˆ·ï¼Œé¡ºä¾¿å«–æ¥äº†è¿™å¼ å¡«å†™è´¦æˆ·å¯†ç çš„æˆªå›¾\n\nå¡«å†™å®Œè´¦æˆ·å¯†ç åï¼Œsourcetreeå°±å¼€å§‹ä¸Šä¼ ä½ çš„ä»£ç äº†ï¼\n\nå¦‚æœä¸Šä¼ é”™è¯¯ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå¯¹äºçš„gitæŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯ç™¾åº¦æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆå³å¯ï¼\n\n\nä¸Šä¼ æˆåŠŸåå›åˆ°Historyç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ€æ–°çš„æäº¤\n\nåˆ·æ–°ç½‘ç»œä»“åº“é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ¨é€æˆåŠŸäº†ï¼\n\nè¿™2ä¸ªæœˆçš„ä½¿ç”¨ä¸‹æ¥ï¼Œåªè¦sourcetreeåœ¨ä¸Šä¼ çš„æ—¶å€™æ²¡æœ‰æŠ¥é”™ï¼Œé‚£ä»£ç æ˜¯é“å®šä¸Šä¼ æˆåŠŸäº†ã€‚\næ— éœ€æ‰“å¼€ç½‘ç»œä»“åº“å†ç¡®è®¤ä¸€ä¸‹ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼\n\nå¦‚æœä½ çš„æœ¬åœ°ä»“åº“å¹¶æ²¡æœ‰åšå‡ºæ›´æ”¹ï¼Œæ‰“å¼€æ–‡ä»¶çŠ¶æ€æ ç›®çš„æ—¶å€™ä¼šæ˜¾ç¤ºâ€œæ²¡æœ‰ä»€ä¹ˆå¯æäº¤çš„â€\n\n\n\n4.å›æ»šæäº¤gitæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯ä¿å­˜æˆ‘ä»¬ä»£ç çš„å†å²ç‰ˆæœ¬\nå¦‚æœä½ æœ€æ–°pushçš„ä»£ç ä¸­å†™äº†ä¸€å †bugï¼Œæˆ–è€…ä¸å°å¿ƒåˆ æ‰äº†ä¸€äº›ä»£ç ï¼Œå°±å¯ä»¥åœ¨gité‡Œé¢æ‰¾åˆ°ä½ çš„å†å²ç‰ˆæœ¬\nåœ¨sourcetreeçš„ä¸»ç•Œé¢ä¸­ï¼Œå³é”®ä¸€ä¸ªä¹‹å‰çš„æäº¤ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªé€‰é¡¹\n\nè¿™ä¸¤ä¸ªé€‰é¡¹çš„åŒºåˆ«ï¼Œç®€å•æè¿°å¦‚ä¸‹ï¼š\n\nå›æ»šï¼šå°†æ”¹åŠ¨çš„ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œä½†æœªæ¨é€åˆ°è¿œç«¯ä»“åº“çš„æ—¶å€™\né‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤ï¼šå°†æ”¹åŠ¨çš„ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“åï¼Œå¹¶å·²æ¨é€åˆ°è¿œç«¯ä»“åº“çš„æ—¶å€™\n\nå…·ä½“çš„åŒºåˆ«åŠæ“ä½œæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‡\n\nsourceTreeå›æ»šæäº¤å’Œé‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤çš„åŒºåˆ«\n\né‡ç½®åˆ†æ”¯æ¼”ç¤ºåœ¨è¿™é‡Œæˆ‘ç®€å•æ¼”ç¤ºä¸€æ¬¡é‡ç½®åˆ†æ”¯çš„æ–¹æ³•\nå‡è®¾æˆ‘ä»¬ä¸å°å¿ƒåˆ é™¤äº†æœ¬åœ°æ–‡ä»¶é‡Œé¢çš„ä»£ç \n\næ¯”å¦‚æƒ³å¤åˆ¶å…¶ä»–ä»£ç åˆ°æ­¤æ–‡ä»¶ï¼Œå´åœ¨å¤åˆ¶çš„æ—¶å€™ctrl+aå…¨é€‰ï¼Œè¦†ç›–äº†ä¹‹å‰çš„ä»£ç \n\n\nè€Œåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆå¿˜è®°æ£€æŸ¥ï¼Œç›´æ¥ä¸Šä¼ åˆ°äº†è¿œç¨‹ä»“åº“\n\n\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©æˆ‘ä»¬ä¸Šä¸€æ¬¡çš„pushï¼Œé€‰æ‹©é‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤\nè¿™é‡Œä¼šå‡ºç°3ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æœ€åä¸€ä¸ªâ€œå¼ºè¡Œåˆå¹¶â€\n\nç¡®è®¤åï¼Œæ‰“å¼€ä¹‹å‰è¢«æˆ‘ä»¬åˆ é™¤äº†å†…å®¹çš„ä»£ç æ–‡ä»¶ï¼Œå‘ç°åˆ é™¤äº†çš„ä»£ç å·²ç»å›æ¥äº†ï¼\n\nç”±äºä¹‹å‰çš„æ›´æ”¹å·²ç»æäº¤åˆ°äº†è¿œç¨‹æ¡Œé¢ï¼Œsourcetreeå‘ç°æœ¬åœ°ä»“åº“è½åäºè¿œç¨‹ä»“åº“ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œæ‹‰å–æ“ä½œ\nä½†æ‹‰å–ä¹‹åï¼Œæˆ‘ä»¬é”™è¯¯çš„æ›´æ”¹å°±åˆå›æ¥äº†ï¼Œè¿™å¹¶éæˆ‘ä»¬çš„ç›®çš„\nè¿™æ—¶å€™å¯ä»¥åœ¨souretreeå·¥å…·-é€‰é¡¹ä¸­å¼€å¯gitçš„å¼ºåˆ¶æ¨é€\n\næ³¨ï¼šå¼ºåˆ¶æ¨é€å…·æœ‰é£é™©ï¼Œå»ºè®®æå‰å¤‡ä»½åˆ†æ”¯å†…å®¹\n\n\né€‰æ‹©æˆ‘ä»¬é‡ç½®çš„åˆ†æ”¯ï¼Œå¹¶é€‰æ‹©æ¨é€\n\nå‹¾é€‰ä¸Šå·¦ä¸‹è§’çš„å¼ºåˆ¶æ¨é€\n\nsourcetreeä¼šå¼€å§‹ä¸Šä¼ ï¼Œä¸Šä¼ å®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¹‹å‰çš„é‚£æ¬¡æ¨é€å·²ç»æ¶ˆå¤±äº†ï¼\n\næ‰“å¼€giteeæ£€æŸ¥ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¾ç¤ºäº†â€œå¼ºåˆ¶æ¨é€â€\n\næ‰¾åˆ°æˆ‘ä»¬ä¹‹å‰æ›´æ”¹è¿‡çš„é‚£ä¸ªæ–‡ä»¶ï¼Œå‘ç°å®ƒå·²ç»å›åˆ°äº†æˆ‘ä»¬åˆ é™¤ä¹‹å‰çš„å†…å®¹\n\næˆ‘ä»¬çš„ç›®çš„ä¹Ÿå°±å®Œç¾è¾¾æˆäº†ï¼\n\nè¿˜æ˜¯å»ºè®®å¤§å®¶ä¸Šä¼ çš„æ—¶å€™å¤šå¤šæ£€æŸ¥ï¼Œä¹‹å‰æˆ‘å°±å¹²è¿‡ä¸€æ¬¡è¿™æ ·çš„è ¢äº‹ã€‚\nç¬¬äºŒæ¬¡ç¼–å†™é‚£ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæ‰å‘ç°ä¹‹å‰çš„ä»£ç æ— äº†ã€‚è¿˜å¥½å¯ä»¥å›é€€ç‰ˆæœ¬ï¼\n\n\nç»“è¯­ä¸ªäººç†è§£ï¼ŒSourcetreeç›¸æ¯”TortoiseGitï¼Œæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å®ƒçš„ç•Œé¢æ›´ç¾è§‚ï¼\n\nè¿˜æœ‰å¦å¤–ä¸€ä¸ªæˆ‘å¾ˆå–œæ¬¢çš„ç‚¹ï¼šä½¿ç”¨sourcetreeä¸ä¼šè®©ä½ çš„å³é”®èœå•å¤šä¸€å †é€‰é¡¹ï¼\n\nä½¿ç”¨ä»€ä¹ˆæ ·çš„å·¥å…·æ˜¯å¤§å®¶å„è‡ªçš„é€‰æ‹©ï¼Œä¸€èµ·è¿›æ­¥æ‰æ˜¯æˆ‘ä»¬å…±åŒçš„ç›®çš„ï¼åŠ æ²¹ğŸ˜‹\n\nå¦‚æœæœ‰è¯´çš„ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["git"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘å‡ºç°æŠ¥é”™pragama once in main file","url":"/2022/03/11/raspberry/2%E5%87%BA%E7%8E%B0%E6%8A%A5%E9%94%99pragma%20once/","content":"\n\nå‰è¨€ä¼—æ‰€å‘¨çŸ¥ï¼Œ#pragma onceè¯­å¥æ˜¯é˜²æ­¢å¤´æ–‡ä»¶é‡å¤åŒ…å«éå¸¸å¸¸ç”¨çš„ä¸€æ¡è¯­å¥VSç¼–è¯‘å™¨åœ¨åˆ›å»º.hæ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®ä½ åœ¨å¼€å¤´æ·»åŠ è¿™ä¸ªè¯­å¥ä½†æ˜¯åœ¨gccç¼–è¯‘å™¨ä¸‹ï¼Œè¿™ä¸ªè¯­å¥å°±å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜\n\næ‰€ä½¿ç”¨ç¼–è¯‘å™¨ï¼š\n\nVS2019ï¼ˆwindows10ï¼‰\næ ‘è“æ´¾ï¼ˆlinux-gccï¼‰\n\n\nwarning: #pragma once in main fileåœ¨æˆ‘å°è¯•åœ¨linuxç¯å¢ƒä¸‹ä½¿ç”¨#pragma onceè¯­å¥æ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸è¦ç¼–è¯‘å¤´æ–‡ä»¶\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å±•å¼€å¤´æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘\n\n\n\nå‡ºç°é—®é¢˜åŸå› ç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼šå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œ#pragma onceæœ¬èº«æ˜¯æ²¡æœ‰å«ä¹‰çš„è¯­å¥ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚\n\nä¹Ÿæœ‰äººè¯´æ˜¯å› ä¸ºlinuxä¸æ”¯æŒè¿™ä¸ªè¯­å¥ï¼Œæˆ‘ä»¬æ¥è¯•è¯•\n\nå³ä¾§ä»£ç ä¸­åŒ…å«äº†ä¸¤ä¸ªtest.hçš„å¼•ç”¨ï¼Œåœ¨é¢„å¤„ç†ä¸­åªåŒ…å«äº†ä¸€æ¬¡\n\nå»æ‰å¤´æ–‡ä»¶ä¸­çš„#pragma onceï¼Œå†æ¬¡ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°é¢„å¤„ç†æ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤æ¬¡å¤´æ–‡ä»¶çš„å†…å®¹\n\nè¿™è¯´æ˜linux-gccç¼–è¯‘å™¨æ˜¯æ”¯æŒè¯¥è¯­å¥çš„ï¼Œå¹¶éç½‘ä¸Šè¯´çš„ä¸æ”¯æŒï¼\nå…¶ä»–è§£å†³æ–¹æ³•å¦‚æœä½ çš„gccç¼–è¯‘å™¨ä¸ç®¡å’‹å¼„éƒ½æœ‰è¿™ä¸ªæŠ¥é”™ï¼Œå’±å¯ä»¥ä¸ç”¨å®ƒå˜›ï¼ä½¿ç”¨æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ifndefä¹Ÿå¯ä»¥è¾¾æˆé˜²æ­¢å¤´æ–‡ä»¶é‡å¤åŒ…å«çš„æ•ˆæœ\n#ifndef __TEST_H__//å¦‚æœæ²¡æœ‰å®šä¹‰è¿‡è¿™ä¸ªç¬¦å·#define __TEST_H__//å®šä¹‰è¯¥ç¬¦å·//å¤´æ–‡ä»¶å†…å®¹#endif\n\n\næŸ¥èµ„æ–™æŸ¥åˆ°å¤–ç½‘å»äº†~åˆšåˆšå†™é¢„å¤„ç†åšå®¢çš„æ—¶å€™ï¼ŒæŸ¥æœ‰å…³è¿™ä¸ªé—®é¢˜çš„èµ„æ–™ï¼Œç™¾åº¦éƒ½ç»™æˆ‘æ¨äº†å¤–ç½‘çš„è®ºå›\n\nå‚è€ƒï¼šhttps://bbs.csdn.net/topics/395771733?page=1\n\n\nç½‘ä¸Šæœ‰å…³è¿™ä¸ªæŠ¥é”™çš„ä¿¡æ¯çš„ç¡®ä¸å¤šï¼Œç‰¹æ­¤å†™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€å›¾åºŠã€‘giteeå›¾åºŠå¯„äº†ï¼Œæ‰¹é‡è½¬å­˜æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSS","url":"/2022/03/31/tools/8gitee%E5%9B%BE%E5%BA%8A%E5%AF%84%E4%BA%86%EF%BC%8C%E5%9B%BE%E7%89%87%E5%A6%82%E4%BD%95%E6%89%B9%E9%87%8F%E8%BD%AC%E5%AD%98%E5%88%B0oss%EF%BC%9F/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•è½¬ç§»giteeå›¾åºŠåˆ°é˜¿é‡Œäº‘OSS\n\n\n\nGiteeçš„é—®é¢˜æœ€è¿‘ä¸çŸ¥é“å¤§å®¶çš„giteeå›¾åºŠæ˜¯å¦å‡ºç°äº†æŠ½é£ç°è±¡\nç®€å•çš„è¯´æ¥å°±æ˜¯ï¼Œgiteeä»“åº“é‡Œé¢çš„å›¾ç‰‡éƒ½èƒ½æ­£å¸¸è®¿é—®ï¼Œpicgoä¹Ÿèƒ½æ­£å¸¸ä¸Šä¼ \nä½†æ˜¯æœ¬åœ°typora&#x2F;obsidianéƒ½æ— æ³•æ¸²æŸ“å‡ºå›¾ç‰‡ï¼Œç”šè‡³å‡ºç°äº†å›¾ç‰‡å…¨å˜æˆäº†giteeçš„logoçš„æƒ…å†µ\n\nè™½ç„¶ä¸çŸ¥é“å®ƒç°åœ¨æ¢å¤æ²¡æœ‰ï¼ˆå› ä¸ºæˆ‘å·²ç»å…¨éƒ¨è½¬ç§»åˆ°é˜¿é‡Œäº‘OSSäº†ï¼‰ï¼Œä½†è¿˜æ˜¯å»ºè®®å¤§å®¶ä¸è¦ç”¨giteeä½œä¸ºå›¾åºŠäº†ï¼å› ä¸ºæˆ‘ä¹‹å‰ä½¿ç”¨çš„æ—¶å€™å°±å‡ºç°äº†å¥½å‡ æ¬¡æ— æ³•æ¸²æŸ“å›¾ç‰‡çš„æƒ…å†µ\n\nå½“æ—¶æˆ‘å»é—®äº†ä¸€ä¸ªå¤§ä½¬ï¼Œå¤§ä½¬çš„å›å¤æ˜¯ï¼šâ€œä¸æå€¡ç”¨ä»£ç ä»“åº“åšå›¾åºŠâ€\n\nåœ¨æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢é‡Œé¢ä¹Ÿæåˆ°äº†è¿™ä¸ªé—®é¢˜\n\né˜¿é‡Œäº‘OSSæˆ‘å·²ç»ç”¨äº†3ä¸ªæœˆäº†ï¼Œå®ƒæ¯”giteeç¨³å®šå¾ˆå¤šï¼Œç›®å‰æ²¡æœ‰é‡åˆ°è¿‡æ— æ³•åŠ è½½å›¾ç‰‡çš„é—®é¢˜ã€‚\n\nä¸‹é¢ç»™å¤§å®¶æä¸€ä¸ªgiteeè½¬é˜¿é‡Œäº‘å›¾åºŠçš„è§£å†³æ–¹æ¡ˆï¼Œç†è®ºä¸Šæ¥è¯´è¿™ä¸ªæ–¹æ¡ˆæ˜¯æ‰€æœ‰å›¾åºŠéƒ½èƒ½é€šç”¨çš„\nGiteeæ‰¹é‡è½¬é˜¿é‡Œäº‘OSS\næ€è·¯æ¥è‡ªäºCSDNç”¨æˆ·@1nnoh\n\n1.é…ç½®é˜¿é‡Œäº‘OSSæ—¢ç„¶è¦è½¬é˜¿é‡Œäº‘å›¾åºŠï¼Œç¬¬ä¸€æ­¥è‚¯å®šæ˜¯é…ç½®å›¾åºŠäº†\nè¿™ä¸ªæˆ‘ä¹‹å‰å†™è¿‡åšå®¢ï¼Œæ¯”è¾ƒè¯¦ç»†ï¼Œå¤§å®¶ç›´æ¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥é˜…è¯»å³å¯ï¼\n\nTypora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠï¼ˆè¶…è¯¦ç»†ï¼‰\n\n\n2.æ‰¹é‡ä¸Šä¼ å°†giteeçš„å›¾åºŠä»“åº“å…¨éƒ¨ä¸‹è½½ä¸‹æ¥\n\nå»ºè®®æŠŠå›¾ç‰‡æ–‡ä»¶å¤¹æ‰“åŒ…å¤‡ä»½ä¸€ä¸‹ï¼Œä»¥å…å‡ºç°é—®é¢˜\nä»¥ä¸‹æ˜¯æˆ‘ä¹‹å‰ä½œä¸ºå›¾åºŠçš„ä»£ç ä»“åº“ï¼Œå›¾ç‰‡å…¨éƒ¨å­˜æ”¾åœ¨imgæ–‡ä»¶å¤¹é‡Œé¢\n\nä½ å¯ä»¥åœ¨é˜¿é‡Œäº‘OSSçš„bucketé‡Œé¢åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼ˆä¸åŒåä¹Ÿæ²¡å…³ç³»ï¼‰\nç„¶åæŠŠè¿™äº›å›¾ç‰‡éƒ½ä¸Šä¼ è¿›å»\n\né˜¿é‡Œäº‘ossæ”¯æŒå¤šæ–‡ä»¶ä¸Šä¼ ï¼Œå»ºè®®å¤§å®¶åœ¨å·²æœ‰bucketä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œé¿å…å‡ºç°è¦†ç›–bucketå·²æœ‰æ–‡ä»¶çš„æƒ…å†µ\n\nå¦‚æœæ˜¯æ–°bucketï¼Œéšä¾¿åˆ›ä¸€ä¸ªæ–‡ä»¶å¤¹å°±OKäº†ï¼Œä¹‹å‰çš„åšå®¢é‡Œé¢éƒ½æœ‰æåˆ°\n\n\nåœ¨é…ç½®é˜¿é‡Œäº‘OSSçš„æ•™ç¨‹ä¸­ï¼Œæˆ‘å»ºè®®å¤§å®¶æ‰“å¼€picgoçš„æ—¶é—´æˆ³é‡å‘½åï¼Œå› ä¸ºè¿™ä¸ªå¯ä»¥é˜²æ­¢åŒåæ–‡ä»¶çš„å†²çª\n\nä¸ç®¡ä½ æœ‰æ²¡æœ‰å¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œéƒ½ä¸å½±å“åç»­çš„æ“ä½œï¼ˆæ²¡å¼€çš„å»ºè®®å¼€ä¸€ä¸‹ï¼‰\n3.æ¯”è¾ƒé“¾æ¥åŒºåˆ«ä¸Šä¼ å®Œæ¯•åï¼Œæˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹é˜¿é‡Œäº‘å’Œgiteeçš„é“¾æ¥å·®åˆ«\n\nä½ çš„é“¾æ¥å¯èƒ½å’Œæˆ‘çš„ä¸åŒï¼Œè¯·ä»¥å®é™…ä¸ºå‡†\n\n![](https://gitee.com/ä½ çš„giteeå/ä»“åº“å/raw/master/æ–‡ä»¶å¤¹åå­—/202108160849879.png)![](https://ä½ çš„bucketåå­—.oss-cn-åœ°åŸŸ.aliyuncs.com/bucketä¸‹æ–‡ä»¶å¤¹çš„åå­—/202108160849879.png)\n\nå¯ä»¥å‘ç°ï¼Œå…¶å®giteeå’Œé˜¿é‡Œäº‘OSSçš„é“¾æ¥éƒ½æ˜¯ä»¥å›¾ç‰‡çš„æ–‡ä»¶åç»“å°¾çš„\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰«ææˆ‘ä»¬æœ¬åœ°çš„mdæ–‡ä»¶ï¼Œå°†åŸæœ¬giteeå›¾åºŠé“¾æ¥çš„å‰é¢éƒ¨åˆ†ï¼Œæ•´ä½“æ›¿æ¢æˆé˜¿é‡Œäº‘é“¾æ¥å°±å¯ä»¥äº†ï¼\nå³ï¼šå°†giteeé“¾æ¥\nhttps://gitee.com/ä½ çš„giteeå/ä»“åº“å/raw/master/æ–‡ä»¶å¤¹åå­—/\n\næ›¿æ¢æˆ\nhttps://ä½ çš„bucketåå­—.oss-cn-åœ°åŸŸ.aliyuncs.com/bucketä¸‹æ–‡ä»¶å¤¹çš„åå­—/\n\nåé¢çš„æ–‡ä»¶åæ— éœ€æ›´æ”¹\n\n4.æ‰¹é‡ä¿®æ”¹\næˆ‘ä»¬éœ€è¦ç”¨åˆ°æ–‡æœ¬ç¼–è¾‘ç¥å™¨notepad++\nè¿™ä¸ªå·¥å…·éå¸¸å®ç”¨ï¼Œé™¤äº†å¯ä»¥ä¿®æ”¹æ–‡ä»¶ç¼–ç æ ¼å¼å¤–ï¼Œè¿˜å¯ä»¥å®Œæˆæ‰¹é‡æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ç­‰å¾ˆå¤šäº‹æƒ…ï¼Œæœ¬æ–‡çš„æƒ…å†µå°±å¯ä»¥ç”¨å®ƒæ¥å®Œæˆ\n\næ‰“å¼€notepad++åï¼Œåœ¨é¡¶éƒ¨çš„æœç´¢æŒ‰é’®ä¸­ï¼Œé€‰æ‹©åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ï¼Œç„¶åé€‰æ‹©ä½ çš„markdownæ–‡ä»¶è·¯å¾„\n\næ‰“å¼€è¿™ä¸ªé¢æ¿åï¼Œæƒ³å¿…å·²ç»ä¸éœ€è¦æˆ‘æ•™ä½ æ€ä¹ˆä¿®æ”¹äº†å§ï¼ŸğŸ˜‚\nå†æ¬¡æç¤ºï¼Œä¿®æ”¹å‰è¯·å…ˆå¤‡ä»½ä¸€éä½ çš„æ–‡ä»¶ï¼\n\n\nä½ è¿˜å¯ä»¥ç”¨VSCæ¥æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ä¸­çš„å†…å®¹å‚è€ƒè½¯é€šè¾¾çš„åšå®¢ğŸ‘‰https://cyddgh.github.io/post/20220304175458/\n\n\nThe endåˆ°è¿™é‡Œï¼Œæ“ä½œå°±å®Œæˆäº†ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œæ‰€æœ‰çš„é“¾æ¥éƒ½è¢«æ›¿æ¢äº†\nä½ å¯ä»¥æ„‰å¿«åœ°ç»§ç»­ä½¿ç”¨é˜¿é‡Œäº‘OSSä½œä¸ºä½ çš„å›¾åºŠäº†ï¼\n\nå¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·åœ¨ä¸‹æ–¹è¯„è®ºè¯´ä¸€ä¸‹å“¦ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["å›¾åºŠ"]},{"title":"ã€Gitã€‘gitä»“åº“code reviewè¡Œè¯","url":"/2022/08/08/tools/9github%20code%20review%E8%A1%8C%E8%AF%9D/","content":"ç¨‹åºå‘˜è¿™ä¸ªè¡Œä¸šï¼Œä¸ç®¡ä½ æ˜¯å¤§ä½¬è¿˜æ˜¯å°å¼Ÿï¼Œä»£ç code reviewæ˜¯å¿…ä¸å¯å°‘çš„ã€‚é‚£ä¹ˆåœ¨gitä¸Šï¼Œå¤§å®¶æ—¥å¸¸äº¤æµçš„ç¼©å†™è¯­ï¼Œå¾€å¾€ä¸€ä¸‹å°±èƒ½çœ‹å‡ºä½ é“è¡Œçš„æ·±æµ…ï¼Œè‡³å°‘æ˜¯å…¥è¡Œæ—¶é—´ï¼Œå“ˆå“ˆï¼Œä¸è¦éœ²æ€¯ï¼Œå‹‡æ•¢çš„è·Ÿå¤§ä½¬è¿‡æ‹›æ‹†æ‹›ã€‚\n\n\næ”¶é›†äº†ä¸€äº›å®ç”¨çš„ç¼©å†™ï¼Œæ–¹ä¾¿å¤§å®¶æ—¥å¸¸äº¤æµ(è£…B)  \nLGTM â€Šâ€”â€Š Looks good to meï¼Œè¡¨ç¤ºè®¤å¯è¿™æ¬¡PRï¼ŒåŒæ„merge åˆå¹¶ä»£ç åˆ°è¿œç¨‹ä»“åº“  ASAP -â€” as soon as possible! å°½å¿«  ACK â€Šâ€”â€Š acknowledgement, i.e. agreed/accepted change  NACK/NAK â€” negative acknowledgement, i.e. disagree with change and/or concept  RFC â€Šâ€”â€Š request for comments, i.e. I think this is a good idea, lets discuss  WIPï¼šWork In Progress ã€Œè¿›å±•ä¸­ã€ï¼Œå¸¸è§è¯æ±‡ï¼Œè¿™é‡Œåšä¸º Best Practice å•ç‹¬æå‡ºæ¥ï¼Œä¸»è¦é’ˆå¯¹æ”¹åŠ¨è¾ƒå¤šçš„ PRï¼Œå¯ä»¥å…ˆæäº¤éƒ¨åˆ†ï¼Œæ ‡é¢˜æˆ– Tag åŠ ä¸Š WIPï¼Œè¡¨ç¤ºå°šæœªå®Œæˆï¼Œè¿™æ ·åˆ«äººå¯ä»¥å…ˆ review å·²æäº¤çš„éƒ¨åˆ†  AFAIK/AFAICT â€Šâ€”â€Š as far as I know / can tell  IIRC â€Šâ€”â€Š if I recall correctly  IANAL â€Šâ€”â€Šâ€œ I am not a lawyer â€, but I smell licensing issues  IMO â€Šâ€”â€Šï¼ˆIn my opinionï¼‰ï¼Œåœ¨æˆ‘çœ‹æ¥  TL;DR â€Šâ€”â€Š Too Long; Didn&#x27;t Read ã€Œå¤ªé•¿æ‡’å¾—çœ‹ã€ï¼ŒREADME æ–‡æ¡£å¸¸è§ã€‚  PR â€Šâ€”â€Š Pull requestã€Œåˆå¹¶è¯·æ±‚ã€  CR â€Šâ€”â€Š Code Review ã€Œä»£ç å®¡æŸ¥ã€  PTAL â€Šâ€”â€Š Please Take A Look. ä½ æ¥ç…ç…ï¼Ÿç”¨æ¥æç¤ºåˆ«äººæ¥çœ‹ä¸€ä¸‹  TBR â€Šâ€”â€Š To Be Reviewed. æç¤ºç»´æŠ¤è€…è¿›è¡Œ review  TBD â€Šâ€”â€Š To Be Done(or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€ã€‚  TBH â€Šâ€”â€Š To be honest ã€Œè€å®è¯´ã€  atm â€Šâ€”â€Š at the moment ã€Œç°é˜¶æ®µã€ï¼Œ\n\nç«™é•¿æ³¨ï¼šå…¶å®ä¸»è¦è¿˜æ˜¯åœ¨çœ‹åˆ«äººprçš„æ—¶å€™ç”¨ï¼Œæ¯”å¦‚åˆ«äººç»™ä½ å‘äº†ä¸€ä¸ªpull rqï¼Œä½ æ£€æŸ¥äº†ä¹‹åï¼Œæ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå°±å¯ä»¥å‘ä¸€ä¸ªLGTMè¡¨ç¤ºä½ è®¤å¯äº†è¿™ä¸ªprè´¡çŒ®ï¼\nä½œè€…ï¼šå‰ç«¯å¤§é£  é“¾æ¥ï¼šhttps://www.jianshu.com/p/238a1e1f4037  æ¥æºï¼šç®€ä¹¦  è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚","categories":["å·®ç”Ÿæ–‡å…·å¤š"],"tags":["git"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘æ ‘è“æ´¾GeanyIDEå’Œæ§åˆ¶å°ä¸‹C/C++ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³æ–¹æ³•","url":"/2022/02/28/raspberry/3%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8B%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/","content":"\n\n\n\næƒ…å†µè¯´æ˜ä¹‹å‰ä½¿ç”¨æ ‘è“æ´¾çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸­æ–‡ä¹±ç çš„é—®é¢˜ã€‚\n\nVS2019ç¼–è¯‘å™¨ä¸‹å†™çš„.cæ–‡ä»¶ï¼Œé‡Œé¢çš„ä¸­æ–‡æ³¨é‡Šåœ¨æ ‘è“æ´¾ideä¸Šä¹±ç \næ ‘è“æ´¾æ§åˆ¶å°ä¸Šï¼ŒCè¯­è¨€ä»£ç è¾“å‡ºä¸­æ–‡æ—¶ä¹±ç \n\nè¿™é‡Œéœ€è¦è°ƒæ•´ä¸‰ä¸ªè®¾ç½®æ¥è§£å†³è¯¥é—®é¢˜\n1.è®¾ç½®VSï¼Œå°†æ–‡ä»¶ä¿å­˜ä¸ºUTF8ç¼–ç VS2019é»˜è®¤ç”¨çš„æ˜¯GBKç¼–ç ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬ä¸­æ–‡éœ€è¦çš„UTF8ç¼–ç \nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªForce UTF-8(No BOM)æ’ä»¶æ¥è§£å†³è¯¥é—®é¢˜\n\nåœ¨VSé¡¶éƒ¨å·¥å…·æ é‡Œæ‰¾åˆ°â€œæ‹“å±•â€-ç®¡ç†æ‹“å±•\n\n\n\næœç´¢Force UTF-8(No BOM)ï¼Œæ‰¾åˆ°è¯¥æ’ä»¶å¹¶å®‰è£…\n\n\nè¿™ä¸ªæ’ä»¶çš„ä½œç”¨ï¼Œæ˜¯è®©VSä¿å­˜æ–‡ä»¶éƒ½ä½¿ç”¨UTF8ç¼–ç ä¿å­˜\nå®‰è£…å®Œæ¯•åï¼Œå¯ä»¥åœ¨åŸæœ¬æ–‡ä»¶ä¸­æ‰“ä¸€ä¸ªæ³¨é‡Šå¹¶ä¿å­˜ï¼Œè¿™æ—¶å€™.cæ–‡ä»¶å°±å·²ç»æ˜¯UTF8ç¼–ç äº†\n\n\n\næ ‘è“æ´¾ä¸­å¯ä»¥æ›´æ”¹æ–‡ä»¶ç¼–ç ï¼Œä½†è¿™ä¸ªæ›´æ”¹å¹¶ä¸ä¼šå¯¹å·²ç»ä¹±ç äº†çš„ä¸­æ–‡ç”Ÿæ•ˆ\n\næ›´æ–°22.03.01ï¼šä½¿ç”¨è¯¥æ’ä»¶å¯èƒ½ä¼šå¯¼è‡´æŠ¥é”™è¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ(936)ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º Unicode æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±å‡ºç°è¿™ç§æƒ…å†µéœ€è¦ç¦ç”¨æ’ä»¶ï¼Œé‡å¯VSæ‰èƒ½è§£å†³ã€‚å¦åˆ™ç¨‹åºæœ‰ä¸­æ–‡æ³¨é‡Šå°±æ— æ³•è¿è¡Œ\n2.æ›´æ”¹Geany IDEç¼–ç è®¾ç½®æ›´æ”¹å®ŒVSçš„è®¾ç½®åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹æ ‘è“æ´¾ä¸‹IDEçš„è®¾ç½®\nåœ¨ç¼–è¾‘-é¦–é€‰é¡¹é‡Œé¢é€‰æ‹©æ–‡ä»¶ï¼Œå°†ä¸¤ä¸ªè®¾ç½®é€‰é¡¹éƒ½æ”¹ä¸ºUTF8\n\n\n3.æ›´æ”¹æ ‘è“æ´¾ç³»ç»Ÿè®¾ç½®å‰é¢ä¸¤ä¸ªè®¾ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ ‘è“æ´¾çš„æ§åˆ¶ç³»ç»Ÿä¸­è¾“å…¥ä¸€ä¸²å‘½ä»¤\nsudo raspi-config\n\n\né€‰æ‹©ç¬¬4ä¸ªï¼ŒåŒºåŸŸè¯­è¨€è®¾å®šï¼Œè¿›å…¥åé€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œæ¥åˆ°å¦‚ä¸‹ç•Œé¢\n\næ‰¾åˆ°zh_cn.UTF8\n\né€‰æ‹©åï¼Œä¼šè¿›å…¥è®¾ç½®ç•Œé¢ï¼Œæç¤ºcompleteå°±å®Œæˆè®¾ç½®äº†\n\nå†æ¬¡è¿›å…¥æ ‘è“æ´¾ï¼Œç”¨æ§åˆ¶å°è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä¸­æ–‡å·²ç»æ­£å¸¸æ˜¾ç¤ºäº†ï¼\n\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼Œè°¢è°¢ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘æ ‘è“æ´¾å®‰è£…vimç¼–è¾‘å™¨ï¼ˆé™„å¸¦æ’é”™æµç¨‹ï¼‰","url":"/2022/04/12/raspberry/4%E6%A0%91%E8%8E%93%E6%B4%BE%E4%BD%BF%E7%94%A8vim/","content":"\n\nå‰è¨€Linuxè‡ªå¸¦çš„ç¼–è¾‘å™¨æœ‰nanoå’Œviï¼Œä½†viç¼–è¾‘å™¨ä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚\næˆ‘ä»¬è¦å…ˆåœ¨æ ‘è“æ´¾ä¸Šä¸‹è½½vimç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯viç¼–è¾‘å™¨çš„å‡çº§ç‰ˆæœ¬ï¼Œä½¿ç”¨æ›´åŠ äººæ€§åŒ–\n\nä½†å®é™…ä¸Šå®‰è£…vimç¼–è¾‘å™¨å¹¶æ²¡æœ‰ç½‘ä¸Šå†™çš„é‚£ä¹ˆç®€å•ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°äº†ç§ç§é—®é¢˜ğŸ˜­\n\n1.ç”¨puttyè½¯ä»¶é“¾æ¥æ ‘è“æ´¾Puttyè½¯ä»¶æƒ³å¿…æŠŠç©æ ‘è“æ´¾çš„ä½ åº”è¯¥æ˜¯å¾ˆç†Ÿæ‚‰çš„ã€‚\nè¾“å…¥ipåå³å¯é“¾æ¥åˆ°ä½ çš„æ ‘è“æ´¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œåç»­çš„æ“ä½œ\n\n2.ä¸‹è½½vimé¦–å…ˆæ›´æ–°ç´¢å¼•æº\nsudo apt-get update \n\nå®‰è£…vimç¼–è¾‘å™¨\nsudo apt-get install vim\n\n2.1é”™è¯¯ï¼š404æ— æ³•ä¸‹è½½å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰é”™è¯¯æç¤ºï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±æ˜¾ç¤ºæ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨404ï¼Œä¸”è½¯ä»¶åŒ…ä¸‹è½½å¤±è´¥\n\n\nè§£å†³æ–¹æ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨1\n\nå› ä¸ºæ ‘è“æ´¾é»˜è®¤çš„è½¯ä»¶æºæ˜¯å›½å¤–çš„ï¼Œå›½å†…å¯èƒ½é“¾æ¥ä¸å°‘ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠä¸‹è½½æºä¿®æ”¹ä¸ºå›½å†…æ¸…åçš„\néœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œ\nsudo nano /etc/apt/sources.list\n\nåœ¨å¥é¦–åŠ ä¸Š#æ³¨é‡Šæ‰ç¬¬ä¸€è¡Œçš„è¯­å¥åï¼Œåœ¨åé¢åŠ ä¸Šä¸‹é¢è¿™ä¸¤è¡Œè¯­å¥\næ³¨æ„ï¼šè¿™é‡Œä¸èƒ½å¤åˆ¶ç²˜è´´ï¼Œè€è€å®å®æ•²å§ğŸ˜¥\ndebç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpideb-srcç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpi\n\n\nç¼–è¾‘å¥½åï¼ŒæŒ‰CTRL+Xä¿å­˜ï¼Œå†æŒ‰yç¡®è®¤ï¼Œæœ€åæŒ‰å›è½¦å›åˆ°å‘½ä»¤è¡Œ\n\n\nå†è¿è¡Œä¸‹é¢è¿™æ¡æŒ‡ä»¤ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªæ–‡ä»¶\nsudo nano /etc/apt/sources.list.d/raspi.list\n\nä¾æ—§è¦#æ³¨é‡Šæ‰ç¬¬ä¸€è¡Œçš„è¯­å¥ï¼Œåœ¨æœ«å°¾åŠ ä¸Š ä¸Šé¢çš„ä¸¤ä¸ªdebè¯­å¥\ndebç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpideb-srcç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpi\n\nç¼–è¾‘å¥½åï¼ŒæŒ‰CTRL+Xä¿å­˜ï¼Œå†æŒ‰yç¡®è®¤ï¼Œæœ€åæŒ‰å›è½¦å›åˆ°å‘½ä»¤è¡Œ\n\nä¸¤ä¸ªæ–‡ä»¶éƒ½ç¼–è¾‘å®Œåï¼Œä½¿ç”¨sudo apt-get updateæŸ¥çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œå¦‚æœæœ‰ä»€ä¹ˆå¥‡æ€ªçš„æŠ¥é”™ï¼Œå»ºè®®å›å»æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯å†™é”™äº†ã€‚\næˆ‘è¿™é‡Œæ˜¯è¿™æ ·çš„æƒ…å†µï¼Œå®é™…ä¸Šå®ƒå·²ç»æå®šäº†\n\nè¿™æ—¶å€™å°±å¯ä»¥å†æ¬¡ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å®‰è£…vimäº†\nsudo apt-get install vim\n\n2.2é”™è¯¯ï¼šä¸‹åˆ—è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»ä½†å¾ˆå¿«æˆ‘å°±å‡ºç°äº†ç¬¬äºŒä¸ªé—®é¢˜ğŸ‘‡\nä¸‹åˆ—è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»ï¼š vim : ä¾èµ–: vim-common (= 2:8.0.1453-1ubuntu1) ä½†æ˜¯ 2:8.0.1453-1ubuntu1.4 æ­£è¦è¢«å®‰è£…E: æ— æ³•ä¿®æ­£\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ²¡æœ‰æ­£å¸¸ä¸‹è½½vimçš„æ—¶å€™ï¼Œç•™ä¸‹äº†ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„å®‰è£…åŒ…\n\nè§£å†³æ–¹æ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨2\n\nä¾æ¬¡è¿è¡Œä¸‹é¢çš„è¯­å¥ï¼Œå¸è½½vim-common\nsudo apt-get purge vim-commonsudo apt-get updatesudo apt-get upgrade\n\n\nå®Œæˆä¸Šè¿°æ“ä½œåï¼Œå†æ¬¡å°è¯•å®‰è£…vim\nsudo apt-get install vim\n\nè¿™ä¸€æ¬¡æˆ‘æ‰æˆåŠŸæŠŠvimå®‰è£…ä¸‹æ¥\n\n\n3.æŸ¥çœ‹vimæ˜¯å¦å®‰è£…æˆåŠŸç”¨ä¸‹é¢è¿™ä¸ªæœ€ç®€å•çš„æ–¹æ³•æŸ¥çœ‹vimæœ‰æ²¡æœ‰å®‰è£…æˆåŠŸ\nvim test.txt\n\nå¦‚æœå®‰è£…å¤±è´¥ï¼Œä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ã€‚å°è¯•è·Ÿç€ä¸Šé¢çš„æ­¥éª¤å†èµ°ä¸€éï¼Œå¦‚æœè¿˜ä¸è¡Œæˆ‘ä¹Ÿä¸çŸ¥é“å’‹åŠğŸ˜‚\n-bash: vim: æœªæ‰¾åˆ°å‘½ä»¤\n\nå‡ºç°è¿™ä¸ªç•Œé¢å°±ä»£è¡¨å®‰è£…å®Œæ¯•äº†ï¼Œå¯ä»¥è¾“å…¥:qé€€å‡º\n\nå…ˆæ¥é…ç½®ä¸€ä¸‹vimç¼–è¾‘å™¨\nsudo nano /etc/vim/vimrc\n\nåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­ï¼Œç”¨æ–¹å‘é”®â¬‡æ¥åˆ°æœ€åï¼Œè¾“å…¥ä¸‹é¢çš„ä¸‰å¥è¯ï¼ˆå¯ä»¥ä¸åŠ æ³¨é‡Šï¼‰\nset nu   #æ˜¾ç¤ºè¡Œå·syntax on   #è¯­æ³•é«˜äº®set tabstop=4 # tabé€€å››æ ¼,é»˜è®¤æ˜¯8æ ¼set softtabstop=4  set shiftwidth=4  #è®¾ç½®ç¼©è¿›çš„ç©ºæ ¼æ•°set autoindent #æ¯è¡Œçš„ç¼©è¿›å€¼ä¸ä¸Šä¸€è¡Œç›¸ç­‰\n\n4.vimçš„åŸºæœ¬æ“ä½œå‰äººæ ½æ ‘ï¼Œåäººä¹˜å‡‰\n\nåŸºæœ¬æ“ä½œå‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰åšå®¢å›­ã€\n\nå…¶å®åªæ˜¯æˆ‘æ‡’ï¼Œä¸æƒ³å†™è€Œå·²ğŸ˜¥\n5.ç”¨vimç¼–å†™ä¸€ä¸ªCè¯­è¨€ä»£ç åˆ°è¿™é‡Œï¼Œä½ çš„vimå°±åŸºæœ¬é…ç½®å®Œæ¯•å•¦ï¼è®©æˆ‘ä»¬æ¥è¯•è¯•ç”¨å®ƒå†™ä¸€ä¸ªä»£ç \nvim test.c\n\nè¿™ä¸ªä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªæœ€ç®€å•çš„printfä»£ç \n\nç¼–è¾‘å®Œæ¯•åï¼ŒæŒ‰ESCé€€å‡ºç¼–è¾‘çŠ¶æ€ï¼Œå›åˆ°åˆå§‹æ¨¡å¼\n\nè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºå½“å‰æ–‡ä»¶\n\nlsä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å¤šå‡ºæ¥äº†ä¸€ä¸ªtest.cçš„æ–‡ä»¶ï¼Œåé¢çš„æ“ä½œå°±æ˜¯gccæŒ‡ä»¤äº†\n\ngcc test.c -o TEST\n\nå†æ¬¡lså¯ä»¥çœ‹åˆ°å¤šå‡ºäº†ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶TESTï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œç¨‹åºæˆåŠŸè¿è¡Œ\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œå’±ä»¬çš„vimç¼–è¾‘å™¨çš„åˆå§‹å­¦ä¹ å°±ç»“æŸå•¦ï¼åç»­è¿›é˜¶çš„æŒ‡ä»¤å­¦ä¹ ï¼Œå¤§å®¶å¯ä»¥çœ‹ç¬¬4ç‚¹ä¸­åšä¸»çš„è®²è§£å¶ï¼\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘ä½¿ç”¨cpolarå®ç°å†…ç½‘ç©¿é€ï¼Œè¿œç¨‹è¿æ¥åœ¨å®¶é‡Œçš„æ ‘è“æ´¾","url":"/2022/05/02/raspberry/5%E4%BD%BF%E7%94%A8cpolar%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E6%A0%91%E8%8E%93%E6%B4%BE/","content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿œç¨‹è¿æ¥æ ‘è“æ´¾ï¼Œéœ€è¦å®ƒå’Œæˆ‘ä»¬çš„ç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹ã€‚å¦‚æœå‡ºé—¨è¦ç”¨æ ‘è“æ´¾çš„è¯ï¼Œåªèƒ½æŠŠå®ƒä¸€å¹¶å¸¦å‡ºé—¨ã€‚\nå¯å¦‚æœæˆ‘ä»¬æƒ³å·æ‡’ï¼ŒæŠŠæ ‘è“æ´¾è¿ä¸Šç½‘çº¿æˆ–wifiä¸¢å®¶é‡Œï¼Œç„¶ååœ¨å¦å¤–ä¸€ä¸ªç½‘ç»œä¸‹è¿œç¨‹è¿æ¥æ ‘è“æ´¾çš„è¯ï¼Œå°±éœ€è¦å€ŸåŠ©cpolaræ¥å®ç°å†…ç½‘ç©¿é€ï¼ŒæŠŠæ ‘è“æ´¾å˜ä¸ºè”ç½‘çš„è¿œç¨‹LINUXæœåŠ¡å™¨\n\n\n\nå¦‚æœä½ è¿˜æ²¡æœ‰é…ç½®å¥½æ ‘è“æ´¾çš„åŸºæœ¬ä½¿ç”¨ç¯å¢ƒï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ğŸšªã€ä¼ é€é—¨ã€‘\n\n\nå…³äºcpolaråœ¨æ ‘è“æ´¾ä¸Šçš„åŸºæœ¬é…ç½®ï¼Œå®˜æ–¹æœ‰å¾ˆè¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£ï¼Œä½†æ˜¯é‡Œé¢æœ‰ä¸€äº›é—®é¢˜ä»‹ç»çš„å¹¶ä¸ç®—æ¸…æ¥šã€å®˜æ–¹æ–‡æ¡£è¿æ¥ã€‘\næœ¬æ–‡æ˜¯å¯¹å®˜æ–¹å¸®åŠ©æ–‡æ¡£çš„ç»†åŒ–ï¼ˆå¾ˆå¤šæˆ‘æœåˆ°çš„åšå®¢åŸºæœ¬å°±æ˜¯ç…§æ¬å®˜æ–¹å¸®åŠ©æ–‡æ¡£ï¼‰\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·å…ˆæ³¨å†Œä¸€ä¸ªä½ çš„cpolarè´¦æˆ·\n\nhttps://www.cpolar.com/\n\n1.ä¿®æ”¹æ ‘è“æ´¾å¯†ç æ³¨æ„ï¼šä½¿ç”¨cpolarå…±äº«çš„SSHæ¥å£ï¼Œä¸»æœºåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç«¯å£å·ä¸ä¸€æ ·\nä¸ºäº†é¿å…æœ‰å°äººï¼Œéšæœºç”Ÿæˆç«¯å£å·ï¼Œå·å·æ‘¸æ‘¸è¿æ¥æˆ‘ä»¬çš„æ ‘è“æ´¾æç ´å\nè¿™é‡Œå»ºè®®å¤§å®¶ä¸€å®šè¦å…ˆä¿®æ”¹ä½ çš„åˆå§‹å¯†ç ï¼\nsudo passwd pi\n\n2.åœ¨æ ‘è“æ´¾ä¸Šåˆå§‹åŒ–cpolar2.1ä¸‹è½½ç”¨è¿™ä¸ªè¯­å¥å®‰è£…cpolarï¼ˆå›½å†…ç”¨æˆ·ï¼‰\ncurl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash\n\næˆ–è€…è¿™ä¸ªè¯­å¥ï¼ˆé€‚ç”¨äºå›½å¤–ç”¨æˆ·ï¼‰\ncurl -sL https://git.io/cpolar | sudo bash\n\nè½¯ä»¶ä¸æ˜¯å¾ˆå¤§ï¼Œä¸€ä¸‹å­å°±ä¸‹å¥½äº†\n\nä½¿ç”¨è¿™ä¸ªè¯­å¥æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯\ncpolar version\n\nå¦‚æœå‡ºç°ä¸‹å›¾ä»£è¡¨å·²ç»å®‰è£…OKäº†\n\n2.2tokenéªŒè¯æ³¨å†Œè´¦å·åï¼Œé€‰æ‹©äº†å…è´¹ç•Œé¢ï¼Œä½ å°±å¯ä»¥è¿›å…¥åå°ç®¡ç†ç³»ç»Ÿ\nç‚¹å‡»éªŒè¯ï¼Œå¯ä»¥æ‰¾åˆ°ä½ çš„éš§é“Authtoken\n\nå¤åˆ¶å®ƒï¼Œç„¶ååœ¨æ ‘è“æ´¾ä¸Šç”¨ä¸‹é¢çš„è¯­å¥è®¾ç½®token\ncpolar authtoken xxxxxxxxxxxxxxxxxx\n\n\n2.3è®¾ç½®cpolarå¼€æœºè‡ªå¯å’Œç³»ç»Ÿä¿æŠ¤å¼€æœºè‡ªå¯åŠ¨\nsudo systemctl enable cpolar\n\nå®ˆæŠ¤è¿›ç¨‹æ–¹å¼ï¼Œå¯åŠ¨cpolarï¼ˆç±»ä¼¼äºæŠŠcpolarè®¾ç½®æˆäº†ç™½åå•åº”ç”¨ï¼‰\nsudo systemctl start cpolar\n\næŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹çŠ¶æ€\nsudo systemctl status cpolar\n\n\nå¦‚å›¾ï¼ŒçŠ¶æ€ä¸ºactive, è¯´æ˜å¯åŠ¨çŠ¶æ€æˆåŠŸ\n2.4æŸ¥çœ‹éš§é“ç«¯å£cpolarä¼šé»˜è®¤å®‰è£…ä¸¤ä¸ªæ ·ä¾‹éš§é“ï¼Œä¸€ä¸ªæ˜¯Websiteéš§é“æŒ‡å‘http 8080ç«¯å£ï¼Œä¸€ä¸ªæ˜¯sshéš§é“ï¼ŒæŒ‡å‘tcp 22ç«¯å£\nä¸ºäº†ä¸æš´éœ²æˆ‘è‡ªå·±çš„SSHè¿æ¥åœ°å€ï¼Œè¿™é‡Œç›´æ¥ä¸¢å®˜æ–¹å¸®åŠ©æ–‡æ¡£é‡Œé¢çš„å›¾\n\nå’Œå®˜æ–¹è¿™é‡Œä¸åŒï¼Œæˆ‘çš„åå°ç®¡ç†ä¸­åªæœ‰ä¸¤ä¸ªwebsiteåœ°å€å’Œä¸€ä¸ªsshåœ°å€\n2.5ä½¿ç”¨puttyæˆ–è€…Xshellè¿œç¨‹è¿æ¥æ ‘è“æ´¾ç¡®è®¤ä½ çš„sshè¿æ¥åï¼Œéœ€è¦åœ¨æ ‘è“æ´¾æœ¬åœ°è®¾ç½®ä¸€ä¸‹\nssh pi@1.tcp.vip.cpolar.cn -p 20013\n\nè¿™é‡Œä¼šè®©ä½ å¡«å†™æ ‘è“æ´¾çš„å¯†ç ï¼Œå¹¶ä¸æ˜¯cpolarçš„å¯†ç \nå¡«å†™å®Œæ¯•åï¼Œåˆ°è¿™é‡Œå·²ç»è®¾ç½®å®Œæ¯•å•¦ï¼æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ\n\nä¸‹é¢æ¥è¯•è¯•è¿œç¨‹ä½¿ç”¨æ ‘è“æ´¾\nå‡è®¾æˆ‘ä»¬çš„SSHåœ°å€æ˜¯ä¸‹é¢è¿™ä¸ª\ntcp://1.tcp.vip.cpolar.cn:20013\n\né‚£ä¹ˆåœ¨Xshellä¸­çš„ä¸»æœºå’Œç«¯å£åˆ†åˆ«å°±è¦å¡«å†™\n\nä¸»æœº1.tcp.vip.cpolar.cn\nç«¯å£20013\n\nç„¶åå°±èƒ½è¿æ¥ä¸Šä½ çš„æ ‘è“æ´¾\nè¿™é‡Œéœ€è¦ä½ è¾“å…¥ä½ æ ‘è“æ´¾çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥å®Œæ¯•åï¼Œå°±å’Œå±€åŸŸç½‘ä½¿ç”¨æ ‘è“æ´¾æ²¡å•¥åŒºåˆ«å•¦ï¼\n\næˆ‘æœèµ„æ–™çš„æ—¶å€™ï¼Œå°±æ˜¯è¿™é‡Œå¡«é”™äº†ï¼Œå¯¼è‡´ä¸€ç›´æ²¡è¿ä¸Šæ ‘è“æ´¾\n\nç»“è¯­å¦‚æœå¯¹äºåˆå§‹åŒ–è®¾ç½®cpolaræœ‰å•¥é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€\nå¤æ‚é—®é¢˜åˆ«é—®ï¼Œæˆ‘ä¸ä¼šï¼ï¼ï¼ï¼ï¼ğŸ˜‚\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ00-é…ç½®ä½ çš„æ ‘è“æ´¾","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C00-%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E6%A0%91%E8%8E%93%E6%B4%BE/","content":"\n\nå‰è¨€ä¸ºäº†å®Œå–„æœ¬ä¸“æ çš„å†…å®¹ï¼Œè¿™æ¬¡æˆ‘æŠŠæ ‘è“æ´¾çš„åˆå§‹åŒ–é…ç½®ä¹Ÿç»™å¤§å®¶åŠ ä¸Šã€‚\nå¹²è´§æ»¡æ»¡ï¼Œè·Ÿç€æˆ‘ä¸€æ­¥ä¸€æ­¥é…ç½®ï¼Œä»æ— åˆ°æœ‰ç©è½¬æ ‘è“æ´¾ï¼ğŸ˜‹\n\nå½“ç„¶å‰ææ˜¯ä½ è¦æœ‰ä¸€ä¸ªæ ‘è“æ´¾ï¼Œ2022å¹´çš„æ ‘è“æ´¾ä»·æ ¼å¯å¤ªé­”å¹»äº†ï¼Œæ¶¨ä»·1å€ï¼Œå ªæ¯”æ˜¾å¡å¸‚åœºâ€¦â€¦\n\nä¸æ‰¯è¿™äº›æ²¡ç”¨çš„äº†ï¼Œæœ¬ç¯‡åšå®¢ï¼Œå¸¦ä½ èµ°å…¥æ ‘è“æ´¾è¿™æ¬¾å°ç”µè„‘çš„ä¸–ç•Œï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.ä»€ä¹ˆæ˜¯æ ‘è“æ´¾ï¼ŸRaspberry Pi(ä¸­æ–‡åä¸ºâ€œæ ‘è“æ´¾â€,ç®€å†™ä¸ºRPiï¼Œæˆ–è€…RasPi &#x2F; RPI\nå®ƒä¸ºå­¦ä¹ è®¡ç®—æœºç¼–ç¨‹æ•™è‚²è€Œè®¾è®¡ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰ä¿¡ç”¨å¡å¤§å°çš„å¾®å‹ç”µè„‘ï¼Œå…¶ç³»ç»ŸåŸºäºLinuxã€‚ è‡ªé—®ä¸–ä»¥æ¥ï¼Œå—ä¼—å¤šè®¡ç®—æœºå‘çƒ§å‹å’Œåˆ›å®¢çš„è¿½æ§ï¼Œæ›¾ç»ä¸€â€œæ´¾â€éš¾æ±‚ã€‚åˆ«çœ‹å…¶å¤–è¡¨â€œå¨‡å°â€ï¼Œå†…â€œèŠ¯â€å´å¾ˆå¼ºå¤§ï¼Œè§†é¢‘ã€éŸ³é¢‘ç­‰åŠŸèƒ½é€šé€šçš†æœ‰ï¼Œå¯è°“æ˜¯â€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ã€‚\n\nå®ƒæ˜¯ä¸€æ¬¾åŸºäºARMçš„å¾®å‹ç”µè„‘ä¸»æ¿ï¼Œä»¥SD&#x2F;MicroSDå¡ä¸ºå†…å­˜ç¡¬ç›˜ï¼Œå¡ç‰‡ä¸»æ¿å‘¨å›´æœ‰1&#x2F;2&#x2F;4ä¸ªUSBæ¥å£å’Œä¸€ä¸ª10&#x2F;100 ä»¥å¤ªç½‘æ¥å£ï¼ˆAå‹æ²¡æœ‰ç½‘å£ï¼‰ï¼Œå¯è¿æ¥é”®ç›˜ã€é¼ æ ‡å’Œç½‘çº¿ï¼ŒåŒæ—¶æ‹¥æœ‰è§†é¢‘æ¨¡æ‹Ÿä¿¡å·çš„ç”µè§†è¾“å‡ºæ¥å£å’ŒHDMIé«˜æ¸…è§†é¢‘è¾“å‡ºæ¥å£ï¼Œä»¥ä¸Šéƒ¨ä»¶å…¨éƒ¨æ•´åˆåœ¨ä¸€å¼ ä»…æ¯”ä¿¡ç”¨å¡ç¨å¤§çš„ä¸»æ¿ä¸Šï¼Œå…·å¤‡æ‰€æœ‰PCçš„åŸºæœ¬åŠŸèƒ½åªéœ€æ¥é€šç”µè§†æœºå’Œé”®ç›˜ï¼Œå°±èƒ½æ‰§è¡Œå¦‚ç”µå­è¡¨æ ¼ã€æ–‡å­—å¤„ç†ã€ç©æ¸¸æˆã€æ’­æ”¾é«˜æ¸…è§†é¢‘ç­‰è¯¸å¤šåŠŸèƒ½ã€‚\n Raspberry Pi Bæ¬¾åªæä¾›ç”µè„‘æ¿ï¼Œæ— å†…å­˜ã€ç”µæºã€é”®ç›˜ã€æœºç®±æˆ–è¿çº¿ã€‚\n\nè¿™ç§å†å²å•¥çš„å°±ä¸è¯´å¤ªå¤šå•¦ï¼Œæƒ³å¿…å¤§å®¶éƒ½æ‡’å¾—çœ‹è¿™ç§ä¸œè¥¿ğŸ˜‚\n\n1.1ä»€ä¹ˆç”¨æˆ·é€‚åˆè´­ä¹°æ ‘è“æ´¾å­¦ä¹ ç¼–ç¨‹ï¼Ÿ\nåœ¨æ·˜å®æœç´¢æ ‘è“æ´¾ï¼Œä½ ä¼šå‘ç°ç»å¤§éƒ¨åˆ†å•†å®¶éƒ½æŒ‚ç€â€œ0åŸºç¡€å­¦ä¹ çš„â€å¹Œå­ï¼Œå¤§è‚†å®£ä¼ ã€‚è€Œä¸”å®£ä¼ é›†ä¸­äºæœ€è¿‘æŒºç«çš„pythonè¯­è¨€ï¼Œå¯¹Cå’ŒC++åªæ˜¯æä¸€å˜´ã€‚\n\nä½œä¸ºC&#x2F;C++æ–¹å‘çš„ç¼–ç¨‹å­¦ä¹ è€…ï¼Œæˆ‘ä¸ªäººå»ºè®®ï¼Œè´­ä¹°æ ‘è“æ´¾ä¹‹å‰ï¼Œéœ€è¦å…ˆå­¦ä¹ å®Œåˆé˜¶çš„Cè¯­è¨€ã€‚å¦‚ä½•é‡åŒ–å‘¢ï¼Œå¤§æ¦‚å°±æ˜¯è¦æŠŠç›®å‰bç«™æœ€ç«çš„è¿™ä¸ªCè¯­è¨€è§†é¢‘çœ‹åˆ°P24ğŸ‘‰ ä¼ é€é—¨\n\nå¦‚æœä½ å’Œæˆ‘ä¸€æ ·è´­ä¹°çš„æ˜¯å¸¦å„ç±»ç”µå­å…ƒä»¶çš„å¥—ä»¶ã€‚åœ¨æ ‘è“æ´¾åŸºç¡€å®éªŒä¸­ï¼Œä¸»è¦åˆ©ç”¨çš„æ˜¯wiringPiåº“ï¼Œè¿™ä¸ªåº“å’ŒCè¯­è¨€è‡ªå·±çš„æ¡†æ¶å…¶å®æ˜¯æ²¡å•¥å…³ç³»çš„ï¼Œå³ä¾¿ä½ æŠŠè¿™ä¸ªåº“å…¨å­¦å®Œäº†ï¼Œä¹Ÿä¸ä¸€å®šèƒ½ç²¾é€šCè¯­è¨€ã€‚ç›¸åï¼Œå¦‚æœCè¯­è¨€ä»€ä¹ˆéƒ½ä¸ä¼šçš„è¯ï¼Œè‚¯å®šä¹Ÿæ•´ä¸æ˜ç™½è¿™ä¸ªåº“é‡Œé¢çš„å‡½æ•°æ˜¯æ€ä¹ˆç”¨çš„ã€‚\n\nè¯´çš„å¯èƒ½æœ‰ç‚¹ç»å¯¹ï¼Œæˆ‘çš„æ„æ€ä¸»è¦æ˜¯ï¼šå¦‚æœä½ ä¹‹å‰æ²¡æœ‰å­¦è¿‡ç¼–ç¨‹ï¼Œå¾—å…ˆæŠŠæŸä¸€ä¸ªè¯­è¨€å­¦å®Œäº†ï¼Œå†æ¥è°ˆè´­ä¹°æ ‘è“æ´¾è¿›è¡Œè¿›é˜¶å­¦ä¹ çš„äº‹\n\nPythonåŒç†ï¼Œè‚¯å®šè¦æŠŠåŸºç¡€çš„è¯­æ³•ä»€ä¹ˆéƒ½å­¦ä¼šäº†ï¼Œå†è€ƒè™‘è´­ä¹°æ ‘è“æ´¾è¿›è¡Œè¿›ä¸€æ­¥çš„å­¦ä¹ ã€‚\nå•†å®¶ç©çš„å¤šåŠä¹Ÿæ˜¯æ–‡å­—æ¸¸æˆï¼Œâ€œé›¶åŸºç¡€å­¦ä¹ â€ä»£è¡¨ä½ å¯ä»¥é›¶åŸºç¡€ä¸Šæ‰‹æ ‘è“æ´¾ï¼Œè€Œä¸èƒ½åˆ©ç”¨æ ‘è“æ´¾ä»0å¼€å§‹å­¦ä¹ ç¼–ç¨‹ï¼Œè¿™æ˜¯å¾ˆéš¾çš„ã€‚\n\n2.å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ªæ ‘è“æ´¾é¦–å…ˆå‡†å¤‡å¥½å’±ä»¬éœ€è¦çš„ä¸œè¥¿\n\næ ‘è“æ´¾å¼€å‘æ¿\n5V3Aç”µæº\nmicroSDå¡ï¼ˆ16Gèµ·æ­¥ï¼Œå»ºè®®32GBï¼‰\nä¸€å°èƒ½ä¸Šç½‘çš„windowsç”µè„‘\n\nç„¶åï¼Œæˆ‘ä»¬è¦ä¸‹å¥½ä¸‹é¢çš„ä¸€äº›è½¯ä»¶\n\nPutty (SSHè¿œç¨‹è¿æ¥å·¥å…·)\nAdvanced_IP_Scanner ï¼ˆå±€åŸŸç½‘ipæŸ¥æ‰¾å·¥å…·ï¼‰\nbalenaEtcherï¼ˆé•œåƒçƒ§å½•å·¥å…·ï¼‰\nFileZillaï¼ˆæ–‡ä»¶ä¼ è¾“å·¥å…·ï¼‰\nVNC-Viewerï¼ˆè¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼‰\nnotepad++ï¼ˆç¼–è¾‘æ–‡æœ¬ï¼‰\n\næ ‘è“æ´¾çš„ç³»ç»Ÿå¯ä»¥å»å®˜æ–¹ä¸‹è½½ğŸ‘‰å®˜æ–¹ä¸‹è½½ç«™\nä½†æ˜¯å®˜æ–¹ä¸‹è½½ä¸‹æ¥çš„ç³»ç»Ÿéå¸¸çº¯å‡€ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½è¦æˆ‘ä»¬è‡ªå·±å®‰è£…ï¼ŒåŒ…æ‹¬ä¸­æ–‡è¾“å…¥æ³•ï¼Œç¼–è¯‘å™¨ï¼Œä»¥åŠå„ç±»éœ€è¦ç”¨åˆ°çš„è½¯ä»¶\n\nä¸ºæ–¹ä¾¿å¤§å®¶çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘æ•´ç†äº†ä¸€äº›è¦ç”¨åˆ°çš„è½¯ä»¶ï¼Œä»¥åŠä¸€ä¸ªå·²ç»æ­å»ºå¥½åŸºæœ¬ç¯å¢ƒçš„æ ‘è“æ´¾ç³»ç»Ÿï¼Œå¤§å®¶ç›´æ¥ä¸‹è½½æˆ‘è¿™é‡Œçš„é›†åˆåŒ…å°±è¡Œäº†ï¼æŸåº¦äº‘\n\nå¦‚æœä½ æƒ³ä»0å¼€å§‹é…ç½®ä¸€ä¸ªæ ‘è“æ´¾ç³»ç»Ÿï¼Œå¯ä»¥çœ‹è¿™ä¸ªä¸“æ å­¦ä¹ ğŸ‘‰ä¼ é€é—¨\n\n\n2.1 çƒ§å½•ç³»ç»Ÿé¦–å…ˆå°†SDå¡æ’å…¥windowsç”µè„‘ï¼Œå³é”®ï¼Œæ ¼å¼åŒ–å®ƒ\n\nå¾ˆå¤šåšä¸»è¿™é‡Œéƒ½è¯´è¦ç”¨ç‰¹åˆ«çš„æ ¼å¼åŒ–è½¯ä»¶ï¼Œå®é™…ä¸Šå¤§å¯ä¸å¿…ï¼Œç›´æ¥ç”¨winè‡ªå¸¦çš„æ ¼å¼åŒ–å°±è¡Œäº†\n\nç„¶åæ‰“å¼€balenaEtcherï¼Œé€‰æ‹©æ ‘è“æ´¾ç³»ç»Ÿé•œåƒæ–‡ä»¶.imgï¼Œç„¶åå†é€‰æ‹©ä½ çš„sdå¡\n\n\nç„¶åè¿™ä¸ªè½¯ä»¶å°±ä¼šè‡ªåŠ¨å¼€å§‹flashä½ çš„ç³»ç»Ÿï¼Œä½ è¦åšçš„å°±æ˜¯ç­‰å®ƒè‡ªå·±æå®šï¼Œè¿™æœŸé—´ä¸è¦æ’æ‹”SDå¡\n\n\næå®šä»¥åï¼Œä½ çš„SDå¡ä¼šå˜æˆä¸€ä¸ªåªæœ‰256mbçš„bootå¯åŠ¨ç›˜ï¼Œä¸è¦æ‹…å¿ƒï¼Œè¿™æ˜¯æ ‘è“æ´¾çš„ç³»ç»Ÿå·²ç»å°†å¦å¤–ä¸€éƒ¨åˆ†ç£ç›˜ç»™è‡ªå·±äº†\n\nå³é”®æˆ‘çš„ç”µè„‘-ç®¡ç†-ç£ç›˜ç®¡ç†ï¼Œå³å¯çœ‹åˆ°æ¶ˆå¤±çš„é‚£éƒ¨åˆ†å®¹é‡\n\nwin10å¯èƒ½ä¼šæç¤ºä½ ä½¿ç”¨å‰è¦å…ˆæ ¼å¼åŒ–ç£ç›˜Gï¼Œä¸€å®šä¸è¦æ ¼å¼åŒ–ï¼ï¼ï¼ä¸ç„¶ä½ çš„ç³»ç»Ÿå°±å¯„äº†\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é…ç½®æˆ‘ä»¬çš„æ ‘è“æ´¾äº†\n2.2 æµ‹è¯•å¼€æœºå°†sdå¡æ’å…¥æ ‘è“æ´¾ï¼ˆæ³¨æ„æ–¹å‘ï¼‰ï¼Œæ¥é€šç”µæºï¼Œå¦‚æœæ ‘è“æ´¾çš„çº¢ç¯å¸¸äº®ï¼Œç»¿ç¯é—ªçƒçš„è¯ï¼Œé‚£å°±æ˜¯ç³»ç»Ÿæ­£åœ¨è¿è¡Œäº†ã€‚è¿™æ—¶å€™å…ˆæ–­å¼€ç”µæºï¼Œè¿›è¡Œåé¢çš„æ“ä½œ\n\n2.3 è®¾ç½®æ ‘è“æ´¾æ˜¾ç¤ºè¾“å‡ºçš„åˆ†è¾¨ç‡ä¸ç®¡ä½ æ˜¯ç›´æ¥è®©æ ‘è“æ´¾æ¥æ˜¾ç¤ºå™¨ï¼Œè¿˜æ˜¯ç”¨VNCæ¥è¿œç¨‹é“¾æ¥æ ‘è“æ´¾ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡æ›´æ”¹configæ–‡ä»¶æ¥è®¾ç½®æ ‘è“æ´¾çš„åˆ†è¾¨ç‡\n\næ»‘å€’æœ€åº•éƒ¨ï¼Œæ‰¾åˆ°hdmi_vctï¼Œå®ƒåé¢ç´§è·Ÿç€çš„3ä¸ªå‚æ•°åˆ†åˆ«æ˜¯åˆ†è¾¨ç‡çš„é•¿å®½ï¼Œä»¥åŠè¾“å‡ºçš„åˆ·æ–°ç‡\n\nä¸ºäº†å‡å°æ ‘è“æ´¾çš„è¿ç®—è´Ÿæ‹…ï¼Œæˆ‘æŠŠåˆ†è¾¨ç‡è®¾ç½®çš„æ¯”æ ‡å‡†1080pï¼ˆ1920x1080ï¼‰ä½äº†ä¸€ç‚¹ã€‚å®é™…ä¸Šæ ‘è“æ´¾æ˜¯æ”¯æŒ4k60è¾“å‡ºçš„ã€‚\nå¦‚æœä½ ä½¿ç”¨hdmiç›´æ¥æ¥æ˜¾ç¤ºå™¨ï¼Œè¯·æ ¹æ®ä½ çš„æ˜¾ç¤ºå™¨å‚æ•°æ¥è®¾ç½®æ ‘è“æ´¾çš„è¾“å‡ºï¼Œä»¥é˜²æ¥ä¸Šåæ— ç”»é¢è¾“å‡ºçš„æƒ…å†µ\n\nå…¶å®å“ªæ€•æœ‰æ˜¾ç¤ºå™¨ä¹Ÿå»ºè®®ä½ ç›´æ¥ä½¿ç”¨VNCï¼Œæ¯æ¬¡éƒ½è¿çº¿å¤ªéº»çƒ¦äº†\nVNCçš„ä½¿ç”¨åé¢ä¼šè®²åˆ°\n\n\n2.4 ç½‘ç»œé“¾æ¥å¦‚æœä½ æœ‰ç½‘çº¿ï¼Œç›´æ¥å°†æ ‘è“æ´¾ç”¨ç½‘çº¿æ¥å…¥ç½‘ç»œå³å¯ã€‚è¿™é‡Œä»‹ç»æ²¡æœ‰ç½‘çº¿çš„æ–¹æ³•ï¼Œå³ å°†æ ‘è“æ´¾æ¥å…¥wifiã€‚\næˆ‘åˆ†äº«çš„é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œæœ‰è¿™ä¸¤ä¸ªWiFié…ç½®æ–‡ä»¶\n\nä½¿ç”¨notepad++æ‰“å¼€wpa_supplicant.confæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„è¿™äº›ä¸œè¥¿ã€‚ä¾ç…§å›¾ä¸­çš„æ³¨é‡Šå¡«å†™wifiä¿¡æ¯å³å¯ï¼wifiåå­—å’Œå¯†ç ä¸è¦è®¾ç½®æˆä¸­æ–‡çš„\n\nå¦‚æœä½ æœ‰å¤šä¸ªwifiï¼Œå¯ä»¥åœ¨åŸæœ‰networkä¹‹åç»§ç»­æ·»åŠ networkï¼Œå¡«å†™æ–¹æ³•æ˜¯ä¸€æ ·çš„\ncountry=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;\tssid=&quot;zhulin&quot;\tpsk=&quot;12345678&quot;\tpriority=5&#125;network=&#123;\tssid=&quot;zadf&quot;\tpsk=&quot;12345678&quot;\tpriority=3&#125;\n\næå®šäº†ä¹‹åï¼Œå°†è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ”¾å…¥æ ‘è“æ´¾çš„bootç›˜\næ³¨æ„ï¼šæ ‘è“æ´¾å¼€æœºåè¿™ä¸¤ä¸ªæ–‡ä»¶ä¼šæ¶ˆå¤±ï¼Œå¦‚æœéœ€è¦æ›´æ”¹wifié…ç½®ï¼Œå†™å¥½æ–°çš„æ–‡ä»¶æ”¾å…¥bootç›˜å³å¯\n\n\nå¦‚æœæ˜¯ä½ å®¶é‡Œçš„wifiï¼Œå¯ä»¥åœ¨wifiçš„ç®¡ç†åå°ï¼ˆä¸€èˆ¬æ¯”è¾ƒæ–°çš„wifiéƒ½æœ‰è‡ªå·±çš„appå¯ä»¥ç®¡ç†ï¼Œæ—§çš„WiFiä¹Ÿæœ‰ç½‘é¡µç«¯ç®¡ç†é¡µé¢ï¼‰æ‰¾åˆ°æ ‘è“æ´¾çš„ip\nå¦‚æœæ˜¯ç¬”è®°æœ¬&#x2F;æ‰‹æœºå¼€çš„çƒ­ç‚¹ï¼Œå¯ä»¥ç›´æ¥åœ¨çƒ­ç‚¹ç®¡ç†é‡Œé¢çœ‹åˆ°å·²è¿æ¥è®¾å¤‡çš„ipã€‚å¦‚æœæ˜¯æ‰‹æœºå¼€çƒ­ç‚¹çš„è¯ï¼Œéœ€è¦å°†ç”µè„‘ä¹Ÿæ¥å…¥åŒä¸€çƒ­ç‚¹ã€‚\næ ¡å›­ç½‘ä¸ç®—å±€åŸŸç½‘ï¼Œå»ºè®®å¼€çƒ­ç‚¹è¿›è¡Œæ“ä½œ\n\nå¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆæ‰¾æ ‘è“æ´¾çš„ipï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰æåˆ°çš„ipæ‰«æè½¯ä»¶Advanced_IP_Scannerå°±å¯ä»¥äº†ï¼\n\nè®°ä¸‹æ ‘è“æ´¾çš„ipï¼Œåç»­æ‰€æœ‰æ“ä½œéƒ½è¦é€šè¿‡å®ƒæ¥å®ç°\næ³¨æ„ï¼šå³ä¾¿æ˜¯è¿åŒä¸€ä¸ªWiFiï¼Œæ ‘è“æ´¾çš„ipä¹Ÿä¸æ˜¯ä¸€ç›´ä¸å˜çš„ï¼Œå¦‚æœåœ¨æŸæ¬¡ä½¿ç”¨æ—¶å‡ºç°æ— æ³•é“¾æ¥çš„æƒ…å†µï¼Œè¯·æ£€æŸ¥ipæ˜¯å¦å·²ç»æ”¹å˜äº†\n\n2.5 Puttyé“¾æ¥æ ‘è“æ´¾æ¯”èµ·windowsç”µè„‘çš„å›¾å½¢æ¡Œé¢ï¼Œæ ‘è“æ´¾æ˜¯ä¸€ä¸ªlinuxå°ä¸»æœºï¼Œä½¿ç”¨linuxçš„æ—¶å€™æˆ‘ä»¬æ›´åº”è¯¥å­¦ä¹ linuxå‘½ä»¤è¡Œçš„ä½¿ç”¨ï¼Œè€Œä¸è¿‡åº¦ä¾èµ–äºæ ‘è“æ´¾ç³»ç»Ÿæœ¬èº«\nputtyçš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥è¾“å…¥æ ‘è“æ´¾çš„ipå³å¯ï¼Œé»˜è®¤çš„ç«¯å£éƒ½æ˜¯22ï¼Œæ— éœ€æ›´æ”¹\n\nåœ¨å¼¹å‡ºæ¥çš„ç•Œé¢è¾“å…¥ç”¨æˆ·åpiï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™è¦ç›²æ‰“ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºä½ è¾“å…¥äº†å•¥\n\nå½“è¾“å…¥å®Œå¯†ç åï¼Œä¼šå¼¹å‡ºä¸‹é¢çš„ç•Œé¢ï¼Œè¿™å°±ä»£è¡¨ä½ çš„æ ‘è“æ´¾å·²ç»é“¾æ¥ä¸Šäº†\n\nè¾“å…¥sudo raspi-configå¯ä»¥è¿›å…¥æ ‘è“æ´¾çš„ç³»ç»Ÿè®¾ç½®ï¼Œæˆ‘ä»¬éœ€è¦å°†VNCçš„æœåŠ¡å¼€å¯ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨VNCè¿œç¨‹é“¾æ¥æ ‘è“æ´¾çš„æ¡Œé¢\n\nç”¨æ–¹å‘é”®é€‰æ‹©5 Interfacing Optionsï¼Œæ‰¾åˆ°VNCæœåŠ¡ï¼Œå›è½¦é€‰æ‹©å®ƒï¼Œä¼šæç¤ºä½ æ˜¯å¦å¼€å¯ï¼ˆenableï¼‰VNCæœåŠ¡ï¼Œæˆ‘ä»¬é€‰æ‹©æ˜¯å°±å¯ä»¥äº†\n\né€‰æ‹©å®Œæ¯•åå›åˆ°åˆå§‹èœå•ï¼Œè¦é€‰æ‹©ä¸‹é¢çš„finishä½¿å¾—è®¾ç½®ç”Ÿæ•ˆ\næ“ä½œæ–¹æ³•æ˜¯æ¥åˆ°P8åæŒ‰æ–¹å‘é”®çš„å·¦å³ï¼Œæ‰èƒ½é€‰æ‹©åº•éƒ¨çš„Selectå’ŒFinish\néšåè¾“å…¥sudo rebooté‡å¯æ ‘è“æ´¾ï¼Œä½¿å¾—è®¾ç½®ç”Ÿæ•ˆã€‚\nåˆ°è¿™é‡Œï¼Œputtyçš„åˆå§‹åŒ–è®¾ç½®å°±å®Œæˆäº†\n\n2.6 VNCé“¾æ¥æ ‘è“æ´¾å› ä¸ºæˆ‘çš„æ ‘è“æ´¾çƒ§å½•çš„æ˜¯æå‰æ­å»ºå¥½åŸºæœ¬ç¯å¢ƒçš„ç³»ç»Ÿï¼Œæ‰€ä»¥è¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥ç”¨VNCvieweræ¥è¿œç¨‹é“¾æ¥æ ‘è“æ´¾çš„æ¡Œé¢\næ“ä½œå¾ˆç®€å•ï¼Œè¾“å…¥æ ‘è“æ´¾çš„ip\n\nç„¶ååœ¨å¼¹å‡ºçš„ç•Œé¢ä¸Šè¾“å…¥é»˜è®¤ç”¨æˆ·åpiå’Œå¯†ç raspberryå³å¯\n\nç°åœ¨ä½ çœ‹åˆ°çš„å°±æ˜¯æ ‘è“æ´¾çš„æ¡Œé¢å•¦ï¼Œæ˜¯ä¸æ˜¯å’Œä¸€ä¸ªæ™®é€šçš„windowsç”µè„‘å·®ä¸äº†å¤ªå¤šå‘¢ï¼Ÿ\n\nå³é”®æ¡Œé¢å¯ä»¥æ›´æ”¹å£çº¸\n\n\nè¿™é‡Œçš„æ“ä½œå’Œä½¿ç”¨ä¸€å°ç”µè„‘æ²¡å•¥åŒºåˆ«ï¼Œå°±ç•™ç»™å¤§å®¶è‡ªå·±å°è¯•å•¦ï¼\n\n2.7 ä½¿ç”¨filezillaè½¯ä»¶ä¼ è¾“æ–‡ä»¶åˆ°æ ‘è“æ´¾å®‰è£…filezillaè½¯ä»¶ï¼Œå®ƒå¯ä»¥é€šè¿‡wifiåœ¨æˆ‘ä»¬çš„windowsç”µè„‘å’Œæ ‘è“æ´¾ä¹‹é—´ä¼ è¾“æ–‡ä»¶\n\né“¾æ¥æ ‘è“æ´¾åï¼Œè¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªç•Œé¢ï¼Œå…¶ä¸­å·¦è¾¹æ˜¯æˆ‘ä»¬ç”µè„‘é‡Œé¢çš„æ–‡ä»¶ï¼Œå³è¾¹æ˜¯æ ‘è“æ´¾é‡Œé¢çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œæ‹–åŠ¨æ“ä½œå³å¯\nä¼ è¾“å®Œæ¯•åï¼Œfilezillaä¼šå¼¹å‡ºç³»ç»Ÿé€šçŸ¥\n\næ³¨æ„ï¼šè¿™é‡Œæ–°å»ºæ–‡ä»¶å¤¹çš„æ“ä½œå«â€œåˆ›å»ºç›®å½•â€\n\n\næ­å–œä½ ï¼Œä½ çš„æ ‘è“æ´¾å·²ç»åˆå§‹åŒ–å®Œæ¯•å•¦ï¼å¯ä»¥æ„‰å¿«çš„ç”¨å®ƒå­¦ä¹ ä»£ç äº†ï¼\nä¸è¿‡åˆ«æ€¥ç€å…³é—­æœ¬ç¯‡åšå®¢ï¼Œåé¢è¿˜æœ‰ä¸œè¥¿å‘¢ï¼\n\n3.ä½¿ç”¨Xshellå°†æ ‘è“æ´¾ä½œä¸ºlinuxä¸»æœºæœ‰è¿™ä¹ˆä¸€ä¸ªè½¯ä»¶ï¼Œå®ƒé›†æˆäº†puttyå’Œfilezillaçš„åŠŸèƒ½ï¼Œç•Œé¢æ›´å¥½çœ‹ï¼Œä½¿ç”¨ä¹Ÿæ›´æ–¹ä¾¿\næ²¡é”™ï¼Œä»–å°±æ˜¯Xshellï¼\n\nå®ƒåŒæ ·å¯ä»¥ä½¿ç”¨sudo raspi-configè¿›å…¥æ ‘è“æ´¾çš„ç³»ç»Ÿè®¾ç½®ï¼ŒåŒæ—¶å€ŸåŠ©è¯¥å…¬å¸çš„Xftpè½¯ä»¶ï¼Œå®ƒä¹Ÿèƒ½å®ç°ä¸€æ ·çš„ä¼ è¾“æ–‡ä»¶åŠŸèƒ½ï¼\n\n\nä»Šå¤©åˆšä¸‹è½½Xshellè½¯ä»¶ï¼Œå½“æˆ‘æŠŠå®ƒè¿ä¸Šæ ‘è“æ´¾çš„æ—¶å€™ï¼Œæ„Ÿè§‰è‡ªå·±ä»æœ¬ä¸–çºªåˆç©¿è¶Šåˆ°äº†2022å¹´ã€‚è¿™ç•Œé¢ï¼Œç»ˆäºä¸å†æ˜¯é‚£ä¸ªå¤æ—©çš„æ¨¡æ ·äº†ï¼Œå¤ªæ„ŸåŠ¨äº†ï¼\n\n3.1ä¸‹è½½Xshellç‚¹è¿›å®˜ç½‘çš„ä¸‹è½½ç•Œé¢ï¼Œä¸€çœ‹ï¼Œæˆ‘å»ï¼Œåªæœ‰30å¤©è¯•ç”¨ï¼Œç©çƒå•Šï¼\nè¦æ˜¯è¿™ä¹ˆæƒ³ï¼Œä½ å°±å¤ªå¹´è½»äº†\nè®©æˆ‘ä»¬æ¥åº·åº·å³ä¸‹è§’è¿™é‡Œå†™ç€å•¥ï¼Œâ€œå…è´¹æˆæƒâ€ï¼\n\nåªè¦ä½ å¡«å†™ä½ çš„å§“åå’Œé‚®ç®±å·ï¼Œå®˜æ–¹å°±ä¼šæŠŠè¿™ä¸¤ä¸ªè½¯ä»¶çš„ä¸‹è½½é“¾æ¥å‘åˆ°ä½ çš„é‚®ç®±ã€‚\n\nä¸ªäººç”¨æˆ·ï¼ˆéå•†ç”¨ï¼‰çš„è¯ï¼Œè¿™ä¸¤ä¸ªè½¯ä»¶éƒ½æ˜¯å…è´¹çš„ï¼\n\nå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯åœ¨ä½ å…³é—­é¡µé¢çš„æ—¶å€™ï¼Œå®ƒä¼šå¼¹å‡ºæ¥è¿™æ ·ä¸€ä¸ªé¡µé¢ï¼Œä¸è¿‡è¿™ä¹Ÿä¸å½±å“å•¦ï¼\n\n3.2é“¾æ¥æ ‘è“æ´¾å®‰è£…çš„æ­¥éª¤ç›´æ¥æ— è„‘ä¸‹ä¸€æ­¥\næ‰“å¼€Xshellï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¿˜æ²¡æœ‰è®¾ç½®è¿‡æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ˜¯ç©º\n\nç‚¹å‡»æ–°å»ºï¼Œè¿›å…¥è®¾ç½®æœåŠ¡å™¨çš„ç•Œé¢ï¼Œå†™å…¥ä½ çš„æ ‘è“æ´¾IPï¼Œå¹¶ç»™è¿™ä¸ªä¼šè¯èµ·ä¸ªå\n\nç‚¹å‡»é“¾æ¥ï¼Œä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥ä½ çš„æ ‘è“æ´¾ç”¨æˆ·åå’Œå¯†ç ï¼Œå’Œä¹‹å‰ä¸€æ ·æ“ä½œå°±è¡Œ\n\n\nç„¶åï¼Œä»–å°±å»ºç«‹é“¾æ¥å•¦ï¼\n\n3.3ç¼–ç è®¾ç½®ç‚¹å‡»è¿™é‡Œçš„å±æ€§\n\né€‰æ‹©ç»ˆç«¯ï¼Œæ‰¾åˆ°å³ä¸‹è§’çš„ç¼–ç ï¼Œç¡®è®¤å®ƒæ˜¯UTF-8çš„çŠ¶æ€ï¼Œä¸ç„¶ä¸­æ–‡ä¼šä¹±ç \n\n3.4æ‰“å¼€Xftpç‚¹å‡»ä¸Šé¢è¿™ä¸ªç»¿è‰²çš„æ–‡ä»¶å¤¹å°±ä¼šæ‰“å¼€Xftpï¼Œå¿«æ·é”®æ˜¯CTRL+ALT+F\n\nåç»­çš„æ“ä½œä¹Ÿæ˜¯ç›´æ¥æ‹–åŠ¨æ–‡ä»¶ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„~~\n\n4.æ ‘è“æ´¾è¿æ¥é¢åŒ…æ¿æ ‘è“æ´¾ä¸Šæœ‰40ä¸ªIOå£ï¼Œä¸ºäº†æ–¹ä¾¿å®éªŒï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä¸€ä¸ªè½¬æ¥æ¿æŠŠæ ‘è“æ´¾çš„IOä¿¡å·è½¬æ¥å‡ºæ¥ï¼Œä½¿ç”¨é¢åŒ…æ¿è¿›è¡ŒGPIOå¤–æ¥ã€‚æˆ‘ä»¬éœ€è¦ä»¥ä¸‹3ä¸ªéƒ¨ä»¶ï¼š\n\n40pè½¯æ’çº¿\nTå‹è½¬æ¥æ¿\né¢åŒ…æ¿\n\n\nå®‰è£…40pè½¯æ’çº¿çš„æ—¶å€™ï¼Œè¦æ³¨æ„è½¯æ’çº¿ä¸Šæœ‰ä¸€ä¸ªå°ä¸‰è§’ï¼Œå®ƒè¦å¯¹å‡†æ ‘è“æ´¾USBæ¥å£çš„å¦ä¸€ä¾§çš„æ¥å£ï¼Œä¾ç…§è¿™ä¸ªæ–¹å‘æ’å…¥è½¯æ’çº¿ã€‚è¯·å¹³å‡ç”¨åŠ›ï¼Œä¸è¦å¤§åŠ›å‡ºå¥‡è¿¹ï¼\n\n40pæ’çº¿çš„å¦ä¸€ç«¯å°±æ˜¯é“¾æ¥Tå‹è½¬æ¥æ¿äº†ï¼Œé“¾æ¥è¿™ä¸ªå°±å¾ˆç®€å•ï¼ŒTå‹è½¬æ¥æ¿ä¸Šä¼šæœ‰ä¸€ä¸ªå‡¹æ§½ï¼Œå¯¹å‡†å‡¹æ§½æ–¹å‘æ’å…¥å³å¯\n\nç„¶åå°†Tå‹è½¬æ¥æ¿å¯¹å‡†é¢åŒ…æ¿ä¸­å¤®çš„å­”ä½æ’å…¥å³å¯ï¼G17 G18å¯¹å‡†è¡Œå·1çš„å­”ä½\n\n5.è¿›é˜¶æ“ä½œç”¨ä¸ŠXshellå’Œé¢åŒ…æ¿ï¼Œä½ çš„æ ‘è“æ´¾å·²ç»æ˜¯ä¸€ä¸ªå®Œå…¨ä½“å•¦ï¼\nå…¶ä»–çš„ä¸€äº›æ“ä½œï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦å¤–ä¸€ä¸ªæ ‘è“æ´¾çš„ä¸“æ ğŸ‘‰ä¼ é€é—¨\n\nå¦‚æœæœ¬ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹å“¦ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼çœ‹åˆ°äº†å°±ä¼šå›å¤çš„\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ01-åŒè‰²LED","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C01-%E5%8F%8C%E8%89%B2LED/","content":"\n\nå‰è¨€ä»Šæ™šä¸Šæ²¡å•¥äº‹ï¼ˆå…¶å®ä½œä¸šæ²¡å†™å®Œï¼‰ï¼Œå°±å¼€å§‹æŠ˜è…¾æ ‘è“æ´¾äº†\næˆ‘å½“åˆä¹°çš„æ˜¯æ ‘è“æ´¾4B(4GB)ç‰ˆæœ¬çš„å¥—ä»¶ï¼Œä¸œè¥¿è¿˜æ˜¯éå¸¸å…¨çš„ï¼Œåº—å®¶è¿˜é€äº†å…¨å¥—å­¦ä¹ èµ„æ–™+æŒ‡å¯¼è§†é¢‘ï¼ŒåŠ ä¸Šä¸€æœ¬è¿˜ç®—ä¸é”™çš„ä¹¦ã€‚\næœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å®Œæˆç¬¬ä¸€ä¸ªå®éªŒï¼šåŒè‰²LED\n\nå­¦ä¹ èµ„æ–™æ¥æºäºï¼šæ¹–å—åˆ›ä¹åšæ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸\næœ¬åšå®¢ä»…ä¾›å‚è€ƒï¼Œè¯·å‹¿è½¬è½½ï¼\n\n\n1.å®éªŒå™¨æ\nè£…å¥½ç³»ç»Ÿçš„æ ‘è“æ´¾å¼€å‘æ¿+ç”µæºé€‚é…å™¨\né¢åŒ…æ¿+Tå‹è½¬æ¥æ¿\n40pè½¯æ’çº¿\nåŒè‰²LED\nè‹¥å¹²è·³çº¿\n\n\n2.å®éªŒåŸç†å°†å¼•è„šSï¼ˆç»¿è‰²ï¼‰å’Œä¸­é—´ç®¡è„šï¼ˆçº¢è‰²ï¼‰é“¾æ¥åˆ°é¢åŒ…æ¿çš„æ¥å£ä¸Šï¼Œå¯¹æ ‘è“æ´¾è¿›è¡Œç¼–ç¨‹æ§åˆ¶ï¼Œä½¿LEDçš„é¢œè‰²ç”±çº¢å˜ç»¿ã€‚å¹¶åˆ©ç”¨PWMæ··åˆæˆå…¶ä»–é¢œè‰²ã€‚\n\nå¯¹åº”æ¥çº¿è¡¨æ ¼\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPI01\nGPI018\nS\n\n\nGPI00\nGPI017\nR\n\n\nGND\nGND\nGND\n\n\nå®é™…æ¥çº¿å›¾å¦‚ä¸‹ï¼ˆæ‰‹æœºç”»è´¨ä¹Ÿå¤ªæ¸£äº†ï¼‰\n\n3.æ§åˆ¶ä»£ç å½“æ ‘è“æ´¾éœ€è¦ä¸å¤–éƒ¨å…ƒä»¶ç›¸æ¥æ—¶ï¼Œè¦ç”¨åˆ°ä¸€äº›å†™å¥½çš„åº“ã€‚å¦‚æ ‘è“æ´¾wiringPiåº“\n\næ ‘è“æ´¾wiringPiåº“ï¼šwiringPiæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ ‘è“æ´¾IOæ§åˆ¶åº“ï¼Œä½¿ç”¨Cè¯­è¨€å¼€å‘ï¼Œæä¾›äº†ä¸°å¯Œçš„æ¥å£ï¼šGPIOæ§åˆ¶ï¼Œä¸­æ–­ï¼Œå¤šçº¿ç¨‹ï¼Œç­‰ç­‰\n\nè¿˜æœ‰softPwm.håº“ï¼šGitHubé“¾æ¥\n\næœ¬æ¬¡åŒè‰²LEDå®éªŒéœ€è¦ç”¨åˆ°çš„å°±æ˜¯è¿™ä¸¤ä¸ªåº“ï¼Œä»¥åŠCè¯­è¨€è‡ªå¸¦çš„åº“å‡½æ•°stdio.h\nä»£ç å¦‚ä¸‹ï¼š\n#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define uchar unsigned char#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init(void)&#123;\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);&#125;// è®¾ç½®LED äº®åº¦PWMè°ƒèŠ‚èŒƒå›´æ˜¯0x00-0xffvoid makerobo_led_ColorSet(uchar r_val, uchar g_val)&#123;\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);&#125;int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tmakerobo_led_Init(); // LED åˆå§‹åŒ–\twhile(1)&#123;\t\tmakerobo_led_ColorSet(0xff,0x00);   //çº¢è‰²\t\t\tdelay(500);                         //å»¶æ—¶500ms\t\tmakerobo_led_ColorSet(0x00,0xff);   //ç»¿è‰²\t\tdelay(500);\t\tmakerobo_led_ColorSet(0xff,0x45);\t\t\tdelay(500);\t\tmakerobo_led_ColorSet(0xff,0xff);\t\t\tdelay(500);\t\tmakerobo_led_ColorSet(0x7c,0xfc);\t\t\tdelay(500);\t&#125;\treturn 0;&#125;\n\nåœ¨wiringPiåº“ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå‡½æ•°çš„ä½¿ç”¨è¯´æ˜\n\nCreateå‡½æ•°ç›¸å½“äºåˆå§‹åŒ–é’ˆè„š\nWriteå‡½æ•°ä¼šæ›´æ”¹è¯¥ç®¡è„šçš„pwmå€¼ï¼Œä»¥è¾¾åˆ°æ§åˆ¶LEDäº®åº¦çš„ç›®çš„\n\n\n3.1æ˜¾ç¤ºå™¨çš„PWMè°ƒå…‰å’ŒDCè°ƒå…‰å¦‚æœä½ æœ‰äº†è§£è¿‡æ˜¾ç¤ºå™¨çš„é€‰è´­çŸ¥è¯†ï¼Œä¼°è®¡å¬è¯´è¿‡æ˜¾ç¤ºå™¨çš„PWMè°ƒå…‰å’ŒDCè°ƒå…‰ã€‚\nä½¿ç”¨DCè°ƒå…‰çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•èƒŒå…‰å°†å¸¸äº®ï¼›ä½¿ç”¨PWMè°ƒå…‰çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•èƒŒå…‰å°†é«˜é€Ÿå¼€å…³æ¥ç‚¹äº®å±å¹•ã€‚åªè¦PWMé«˜äºä¸€å®šå€¼ï¼Œäººçœ¼å°±åˆ†è¾¨ä¸å‡ºè¯¥å±å¹•çš„é—ªçƒã€‚å½“ä¸€å—æ˜¾ç¤ºå™¨ä½¿ç”¨é«˜é¢‘PWMè°ƒå…‰æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¸DCè°ƒå…‰æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚\nä½†æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨DCè°ƒå…‰æŠ€æœ¯çš„æ˜¾ç¤ºå™¨æ›´åŠ â€œæŠ¤çœ¼â€ï¼Œè€Œä½¿ç”¨ä½é¢‘PWMè°ƒå…‰çš„æ˜¾ç¤ºå™¨å°±æ˜¯æåº¦è¾£çœ¼ç›ï¼ˆè¿™ä¹Ÿæ˜¯æœ‰äº›å±å¹•åœ¨æ‘„åƒå¤´ä¸­ä¼šå±é—ªçš„åŸå› ï¼‰\nç›®å‰ä¸»æµæ‰‹æœºéƒ½ä¸Šäº†OLEDå±å¹•ï¼Œè¯¥å±å¹•æè´¨æ™®éä½¿ç”¨çš„æ˜¯PWMè°ƒå…‰ã€‚éƒ¨åˆ†æ‰‹æœºå‚å®¶åœ¨å±å¹•è®¾ç½®ä¸­æ¨å‡ºäº†â€œç±»DCè°ƒå…‰é€‰é¡¹â€ï¼Œå…¶åŸç†å°±æ˜¯ç”¨é«˜é¢‘PWMæ¥æ¨¡æ‹ŸDCè°ƒå…‰ã€‚\n\nå¦‚æœä½ æƒ³äº†è§£è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªè§†é¢‘ğŸ‘‰é“¾æ¥\n\nå¥½åƒbbäº†ä¸€äº›å’Œè¿™ä¸ªå®éªŒæ²¡å•¥å…³ç³»çš„å†…å®¹ï¼Œèµ¶å¿«å›åˆ°æ­£é¢˜ï¼\n\n3.2 ç¼–è¯‘ä»£ç æ ‘è“æ´¾ä¸­æœ‰ä¸¤ç§æ–¹å¼ç¼–è¯‘è¿è¡Œæˆ‘ä»¬çš„ä»£ç \n3.2.1ç›´æ¥ä½¿ç”¨Geanyç¼–è¯‘å™¨å†…éƒ¨é€‰é¡¹\n\n3.2.2 ä½¿ç”¨linuxè¯­è¨€æ ‘è“æ´¾çš„ç³»ç»Ÿæ˜¯åŸºäºlinuxçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨linuxä¸­çš„gccè¯­è¨€æ¥ç¼–è¯‘è¿™ä¸ª.cæ–‡ä»¶\n\nåœ¨æœ¬ä¸“æ ä¹‹å‰çš„åšå®¢ä¸­ï¼Œæœ‰ä»‹ç»è¿‡è¿™ç§æ–¹å¼ğŸ‘‰é“¾æ¥\n\n\nè¾“å…¥æŒ‡ä»¤ï¼Œä½ ä¼šå‘ç°ç³»ç»ŸæŠ¥é”™æ˜¾ç¤ºdelayå‡½æ•°æœªå®šä¹‰\nundefined reference to `delay`\n\n\nè¿™æ˜¯å› ä¸ºdelayå‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªCè¯­è¨€çš„åº“å‡½æ•°æˆ‘ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰é¢è‡ªå·±æ•´ä¸€ä¸ªdelayå‡½æ•°çš„åŸå‹\n\nç¬¬ä¸€æ¬¡ä½¿ç”¨Geanyç¼–è¯‘çš„æ—¶å€™å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Geanyé‡Œé¢å·²ç»ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨äº†wiringPiåº“\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\n// å»¶æ—¶zæ¯«ç§’çš„delayå‡½æ•°void delay(unsigned int z)&#123;    unsigned int i,j;    for(i=z;i&gt;0;i--)        for(j=110;j&gt;0;j--)            ;//åˆ©ç”¨æ— æ„ä¹‰çš„forå¾ªç¯æ¥è¿›è¡Œå»¶æ—¶&#125;\n\næˆ‘ä»¬åœ¨linuxæ§åˆ¶å°ä¸­ç”¨cdæ‰“å¼€æ–‡ä»¶è·¯å¾„åï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤\n1. gcc 01DuoColorLED.c -o GPIO -lwiringPi2. -lwiringPié€‰é¡¹ï¼Œé“¾æ¥WiringPiåº“ã€‚\n\nç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ç¼–è¯‘ç¨‹åºï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶GPIO\n\nä½¿ç”¨./GPIOæŒ‡ä»¤æ¥æ‰§è¡Œæ­¤æ–‡ä»¶\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨è¿™ç§æ–¹æ³•è¿è¡Œç¨‹åºä¸å¤ªæ–¹ä¾¿ç»ˆæ­¢ï¼Œä½ å¯ä»¥å»æ‰mainå‡½æ•°ä¸­çš„whileå¾ªç¯ï¼Œè®©å˜è‰²åªæ‰§è¡Œä¸€æ¬¡ã€‚\n\næ‰€ä»¥åœ¨è¿›è¡Œæ­¤ç±»å¼€å‘æ—¶ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨Geanyç¼–è¯‘å™¨ï¼Œå› ä¸ºå®ƒä¼šç”Ÿæˆä¸€ä¸ªå‰å°æ§åˆ¶é¢æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ctrl+cåœæ­¢ç¨‹åº\n\nå¥‡æ€ªçš„æ˜¯ï¼Œå½“æˆ‘è¿è¡Œç¬¬ä¸€ä¸ªGeanyç¼–è¯‘å™¨ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼ŒLEDä¼šæ­£å¸¸å˜è‰²ã€‚\nä½†æ˜¯è¿è¡Œç¬¬äºŒä¸ªåœ¨linuxæ§åˆ¶å°ç”Ÿæˆçš„GPIOæ–‡ä»¶æ—¶ï¼Œå´ä¸èƒ½å˜è‰²ã€‚ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› \n\nè€Œå½“æˆ‘é‡æ–°ç”¨Geanyç¼–è¯‘å™¨ç¼–è¯‘è¿™ä»½åŠ äº†delayå‡½æ•°å®šä¹‰çš„ä»£ç æ—¶ï¼Œå‘ç°è¿™ä¸ªdelayå‡½æ•°è¿˜æ˜¯ä¸å¤ªè¡Œå•Šï¼è¿™ç¯éƒ½é—ªçš„é£å¿«ï¼ŒçœŸçš„æœ‰500mså—\n\nä¸è¿‡è¿™ä¹Ÿä¸ç®—ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå’±ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´delayå‡½æ•°çš„å®šä¹‰ï¼Œå’Œè°ƒç”¨å‚æ•°æ¥æ§åˆ¶\n\n4.å¦‚ä½•åœ¨ä½¿ç”¨é¢åŒ…æ¿çš„åŒæ—¶ä½¿ç”¨æ•£çƒ­å°é£æ‰‡åŸæœ¬ä¸ä½¿ç”¨é¢åŒ…æ¿çš„æ—¶å€™ï¼Œå°é£æ‰‡å¯ä»¥æ’åœ¨æ¿è½½é’ˆè„šçš„2ã€3ä½\n\nä½†æ˜¯ç°åœ¨ä½¿ç”¨äº†é¢åŒ…æ¿ï¼Œè¿™æ•´ä¸ªé’ˆè„šéƒ½è¢«å ç”¨äº†ï¼Œé£æ‰‡å¾€å“ªé‡Œæ’å‘¢ï¼Ÿ\nå¾ˆç®€å•ï¼Œä½¿ç”¨ä¸¤æ ¹è·³çº¿ï¼Œå°†é£æ‰‡ä¸é¢åŒ…æ¿ä¸Šçš„5vå’ŒGNDé“¾æ¥å°±è¡Œäº†ï¼\n\nçº¢çº¿æ¥5V\né»‘çº¿æ¥GND\n\n\n\nç»“è¯­ä¸ç®¡å¦‚ä½•ï¼Œè¿™æ¬¡å®éªŒç®—æ˜¯å®Œç¾å®Œæˆå•¦ï¼\nè¿™ä¹Ÿæ˜¯æˆ‘åœ¨æ ‘è“æ´¾ä¸Šåšçš„ç¬¬ä¸€ä¸ªå®éªŒ\n\nå¦‚æœä½ æƒ³å’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾ï¼Œé‚£å°±å…³æ³¨æœ¬ä¸“æ å§ï¼\næ¬¢è¿staræœ¬ä¸“æ ä»£ç ä»“åº“ï¼šGITEEé“¾æ¥\n\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ02-RGBå°ç¯","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C02-RGB%E5%B0%8F%E7%81%AF/","content":"\n\nå‰è¨€åˆåˆ°äº†æ ‘è“æ´¾å­¦ä¹ çš„æ—¶å€™ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\nä¸Šä¸€æ¬¡çš„å®éªŒ001-åŒè‰²LEDä¸­ï¼Œè™½ç„¶æˆ‘æŠŠåšå®¢å±•ç¤ºäº†å‡ºæ¥ï¼Œå†™çš„å¥½åƒæœ‰æ¨¡æœ‰æ ·çš„ï¼Œå®é™…ä¸Šæˆ‘å¯¹ä¸€äº›å‡½æ•°å¯è°“æ˜¯ä¸æ¯«ä¸æ‡‚ã€‚\nä½†è¿™æ¬¡ä¸ä¸€æ ·äº†ï¼Œæˆ‘æŠŠä¸€äº›å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨ç»™æ•´æ˜ç™½äº†ï¼\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿\nè·³çº¿ä¸€å †\nRGBå°ç¯\n\né€šè¿‡è¿™æ¬¡è¯•éªŒï¼Œæˆ‘ä»¬å¯ä»¥åŸºæœ¬äº†è§£ä¸€ä¸‹è®©ç”µè„‘æ€§èƒ½æå‡200%çš„RGBçš„åº•å±‚æ§åˆ¶\n\n1.1æ ‘è“æ´¾è¿è¡Œåº“å‡†å¤‡å½“æ ‘è“æ´¾éœ€è¦ä¸å¤–éƒ¨å…ƒä»¶ç›¸æ¥æ—¶ï¼Œè¦ç”¨åˆ°ä¸€äº›å†™å¥½çš„åº“ã€‚å¦‚æ ‘è“æ´¾wiringPiåº“\n\n\næ ‘è“æ´¾wiringPiåº“ï¼šä¸‹è½½&#x2F;å®‰è£…æ•™ç¨‹\n\nä¸‹è½½softPwm.håº“ï¼šGitHubé“¾æ¥ï¼Œå®‰è£…æ•™ç¨‹è§README\n\n\n\n\n2.å…ƒä»¶æ¥çº¿RGBledæ¨¡å—çš„ç”µè·¯å›¾å¦‚ä¸‹ï¼Œå…¶ä¸å®ç‰©å›¾æ˜¯å¯¹åº”å…³ç³»\n\n\nä»¥ä¸‹æ˜¯æœ¬æ¬¡å®éªŒçš„æ¥çº¿å›¾\n\nå…¶å®è¿™é‡Œæˆ‘æ²¡ææ‡‚è¿™ä¸ª5Væ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Œå› ä¸ºä¸æ¥å¥½åƒä¹Ÿæ²¡æœ‰å…³ç³»\n\nè®©æˆ‘æ— è¯­çš„æ˜¯ï¼Œå»é—®åº—å®¶ï¼Œå®¢æœå›å¤æ˜¯â€œåŸç†éœ€è¦è‡ªå·±å­¦ä¹ â€\nçœ‹æ¥è¿˜æ˜¯å¾—é è‡ªå·±\n\nå¤§èƒ†çŒœæµ‹ä¸€ä¸‹ï¼Œåç»­çš„å®éªŒéœ€è¦æ›´å¤šæ¥5Vçš„è®¾å¤‡ï¼Œè¿™ä¸ª5Vå¼•çº¿å°±å¥½æ¯”æˆ‘ä»¬æ¯æ¬¡ç¼–å†™Cè¯­è¨€éƒ½éœ€è¦ç”¨stdio.hä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªä¹ æƒ¯ã€‚\nåŒæ—¶è§£é‡Šä¸€ä¸‹é¢åŒ…æ¿å·¦å³ä¸¤æ¡çº¿çš„ä½œç”¨ï¼š\n\nå½“ä½ æŠŠGNDç”¨å¼•çº¿æ¥åˆ°è“è‰²-çº¿ä¸Šï¼Œæ­¤æ—¶é‚£ä¸€æ’éƒ½æ˜¯GND\nå½“ä½ æŠŠ5Vç”¨å¼•çº¿æ¥åˆ°çº¢è‰²+ä¸Šï¼Œçº¢è‰²ä¸€æ’éƒ½æ˜¯5Väº†\n\nè¿™å°±ç›¸å½“äºä¸²è”çº¿è·¯\n\n\n3.å‡½æ•°è§£é‡Šè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°ï¼š softPwmCreateå’ŒsoftPwmWrite\nä¸Šç¯‡åšå®¢ä¸­æˆ‘åªç»™å‡ºäº†è¿™ä¸¤ä¸ªå‡½æ•°çš„è§£é‡Šæ–‡æ¡£ï¼ˆå·æ‡’ï¼‰ï¼Œè¿™ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥çœŸåˆ‡è®¤è¯†ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨\n\nä»¥ä¸‹æ˜¯å‡½æ•°åŸå‹ï¼Œä»¥åŠå®˜æ–¹è§£é‡Šçš„ç¿»è¯‘\nint softPwmCreate (int pin, int initialValue, int pwmRange) ;\n\nè¿™å°†åˆ›å»ºä¸€ä¸ªè½¯ä»¶æ§åˆ¶çš„PWMå¼•è„šã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•GPIOå¼•è„šï¼Œå¼•è„šç¼–å·å°†ä¸æ‚¨ä½¿ç”¨çš„wiringPiSetup()å‡½æ•°ç›¸åŒã€‚\ninitialValueæ˜¯åˆå§‹å€¼ï¼Œå¦‚æœpwmRangeä½¿ç”¨100ï¼Œé‚£ä¹ˆç»™å®šå¼•è„šçš„å€¼å¯ä»¥æ˜¯0ï¼ˆå…³é—­ï¼‰åˆ°100ï¼ˆå®Œå…¨æ‰“å¼€ï¼‰ä¹‹é—´çš„ä»»ä½•å€¼ã€‚ è¿”å›å€¼ä¸º0è¡¨ç¤ºæˆåŠŸï¼Œ-1ä»£è¡¨å¤±è´¥ã€‚\nå¦‚æœè¿˜æœ‰å…¶ä»–æƒ…å†µï¼Œæ‚¨åº”è¯¥æ£€æŸ¥å…¨å±€errnoå˜é‡ï¼Œçœ‹çœ‹å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚\nvoid softPwmWrite (int pin, int value) ;\n\næ›´æ–°ç»™å®šå¼•è„špinä¸Šçš„PWMå€¼ã€‚è¯¥å€¼å°†è¢«æ£€æŸ¥æ˜¯å¦åœ¨èŒƒå›´pwmRangeå†…\næœªé€šè¿‡softPwmCreateåˆå§‹åŒ–çš„ç®¡è„šå°†è¢«å¿½ç•¥\nåç»­è¿˜æœ‰ä¸€ä¸ªNoteï¼š\n\n\n\nPWMè¾“å‡ºçš„æ¯ä¸ªâ€œå‘¨æœŸâ€éœ€è¦10æ¯«ç§’ï¼Œé»˜è®¤èŒƒå›´å€¼ä¸º100ï¼Œå› æ­¤å°è¯•æ¯ç§’æ›´æ”¹PWMå€¼è¶…è¿‡100æ¬¡å°†æ˜¯å¾’åŠ³çš„\n\nåœ¨softPWMæ¨¡å¼ä¸‹æ¿€æ´»çš„æ¯ä¸ªå¼•è„šä½¿ç”¨å¤§çº¦0.5%çš„CPU\n\nç›®å‰æ— æ³•åœ¨ç¨‹åºè¿è¡Œæ—¶ç¦ç”¨å¼•è„šä¸Šçš„softPWM\n\næ‚¨éœ€è¦ä¿æŒç¨‹åºè¿è¡Œä»¥ä¿æŒPWMè¾“å‡ºï¼\n\n\n\n3.1å…³äºsoftPwmWriteçš„ä½¿ç”¨é—®é¢˜ï¼Œå¤§å¤§çš„ç–‘æƒ‘è¿™é‡Œæˆ‘äº§ç”Ÿäº†ä¸€ä¸ªå·¨å¤§çš„ç–‘æƒ‘ï¼Œå°±æ˜¯softPwmWriteå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ç©¶ç«Ÿåº”è¯¥å¦‚ä½•ä½¿ç”¨\n\nè¿™ä¸ªé—®é¢˜æˆ‘åœ¨CSDNçš„é—®ç­”åŒºæé—®äº†ï¼Œ22.04.01çš„17:00ç›®å‰è¿˜æ²¡æœ‰å›å¤ğŸ‘‰ç‚¹æˆ‘\n\nå¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä½å¤§ä½¬çš„ç¨‹åºä¸­ï¼Œæ˜¯å°†ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®åˆ°è¶…è¿‡äº†100\n\nå¼•ç”¨è‡ªåšå®¢https://www.cnblogs.com/demo-lv/p/14017488.html\n\n\nè€Œå‚è€ƒèµ„æ–™ä¸­ï¼Œæä¾›çš„ä»£ç ä¹Ÿæ˜¯å°†pwmå€¼è®¾ç½®è¶…è¿‡äº†100\n\nåœ¨æŸ¥è¯¢è¿‡ä¸€äº›èµ„æ–™ï¼ˆæ˜¯çœŸçš„æ²¡æœ‰åšå®¢æåˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œæˆ‘æ‰¾åˆ°äº†RGBé¢œè‰²å¯¹ç…§è¡¨\nè¿™ä¸ªä»£ç ä¸­æä¾›çš„å‚æ•°è®¾ç½®ï¼Œå…¶å®æ˜¯å‚ç…§RGBè¡¨æ¥è®¾ç½®çš„\n\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¾¾åˆ°æ··è‰²çš„æ•ˆæœï¼Œä½ éœ€è¦åˆ©ç”¨softPwmWriteå‡½æ•°å°†çº¢ç»¿è“é’ˆè„šä¸RGBè¡¨ä¸­çš„æ•°å€¼å¯¹åº”è¿›è¡Œè¾“å‡ºã€‚\nä½†è¿™ä¸å°±å’Œå®˜æ–¹çš„pwmå€¼åº”è¯¥åœ¨èŒƒå›´å†…ï¼Œä¸”è¶…è¿‡100çš„pwmå€¼éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå†²çªäº†å—ï¼Ÿ\n\nè¿™ä¸ªé—®é¢˜å…ˆæš‚æ—¶æ”¾åœ¨è¿™é‡Œï¼Œè¹²ä¸€ä¸ªå¤§ä½¬è§£é‡Š\n\n4.ä»£ç æ ·ä¾‹4.1åˆå§‹åŒ–é’ˆè„š#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š#define makerobo_Led_PinBlue   2 // è“è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init()&#123;//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯rangeï¼Œå°†pwmè®¾ç½®æˆ100ï¼ˆå…¨å¼€ï¼‰\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);\tsoftPwmCreate(makerobo_Led_PinBlue, 0, 100);&#125;\n\nä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¦æŠŠçº¢ç»¿è“çš„ç®¡è„šè®¾ç½®æˆ0ã€1ã€2ï¼Œå®é™…ä¸Šè¿™é‡Œå’Œé¢åŒ…æ¿çš„æ¥çº¿æ˜¯å¯¹åº”çš„\n\nå¯ä»¥çœ‹åˆ°ï¼ŒGPIO 0/1/2åˆ†åˆ«å¯¹åº”çš„æ˜¯17/18/27ï¼ŒåŒæˆ‘ä»¬ç¬¬2ç‚¹ä¸­æ¥çº¿å›¾ä¸Šçš„é’ˆè„šä½ç½®å¯¹åº”\n\n4.2é¢œè‰²å‚æ•°è®¾ç½®åˆå§‹åŒ–é’ˆè„šä¹‹åï¼Œæˆ‘ä»¬å°±æ¥è®¾ç½®å„ä¸ªé’ˆè„šçš„å‚æ•°\n// LED é¢œè‰²è®¾ç½®void makerobo_led_Color_Set(uchar r_val, uchar g_val, uchar b_val)&#123;//å¯¹åº”ä¸åŒé¢œè‰²é’ˆè„šçš„è®¾ç½®ï¼Œå¦‚æœéœ€è¦çº¢è‰²ï¼Œå°±åªç»™çº¢è‰²r_valä¼ å¯¹åº”å€¼ //ç»™ä¸åŒé¢œè‰²è¾“å…¥ä¸åŒå€¼ï¼Œè¾¾æˆæ··è‰²çš„æ•ˆæœï¼\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);\tsoftPwmWrite(makerobo_Led_PinBlue,  b_val);&#125;//å‡½æ•°ä½¿ç”¨å¦‚ä¸‹makerobo_led_Color_Set(0xff,0x00,0x00);   //çº¢è‰²\tdelay(500);   //å»¶æ—¶500msï¼Œä½¿æ›´æ”¹ä¾¿äºè§‚å¯Ÿmakerobo_led_Color_Set(0x00,0xff,0x00);   //ç»¿è‰²delay(500);                makerobo_led_Color_Set(0x00,0x00,0xff);   //è“è‰²delay(500);\n\n4.3å®Œæ•´ä»£ç åŠæ•ˆæœæ¼”ç¤ºä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç ï¼Œä»¥åŠæœ€ç»ˆçš„æ•ˆæœã€\n#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define uchar unsigned char#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š#define makerobo_Led_PinBlue   2 // è“è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init()&#123;//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯rangeï¼Œå°†pwmè®¾ç½®æˆ100ï¼ˆå…¨å¼€ï¼‰\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);\tsoftPwmCreate(makerobo_Led_PinBlue, 0, 100);&#125;// LED é¢œè‰²è®¾ç½®void makerobo_led_Color_Set(uchar r_val, uchar g_val, uchar b_val)&#123;//å¯¹åº”ä¸åŒé¢œè‰²é’ˆè„šçš„è®¾ç½®ï¼Œå¦‚æœéœ€è¦çº¢è‰²ï¼Œå°±åªç»™çº¢è‰²r_valä¼ å¯¹åº”å€¼ //ç»™ä¸åŒé¢œè‰²è¾“å…¥ä¸åŒå€¼ï¼Œè¾¾æˆæ··è‰²çš„æ•ˆæœï¼\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);\tsoftPwmWrite(makerobo_Led_PinBlue,  b_val);&#125;int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tmakerobo_led_Init();\t\tint n=0;\tprintf(&quot;è¯·è¾“å…¥å¾ªç¯å‘¨æœŸçš„æ¬¡æ•°&gt;&quot;);\tscanf(&quot;%d&quot;,&amp;n);//è¾“å…¥å¾ªç¯å‘¨æœŸçš„æ¬¡æ•°\twhile(n--)\t&#123;\t\tmakerobo_led_Color_Set(0xff,0x00,0x00);   //çº¢è‰²\t\t\tdelay(500);   //å»¶æ—¶500msï¼Œä½¿æ›´æ”¹ä¾¿äºè§‚å¯Ÿ\t\tmakerobo_led_Color_Set(0x00,0xff,0x00);   //ç»¿è‰²\t\tdelay(500);                   \t\tmakerobo_led_Color_Set(0x00,0x00,0xff);   //è“è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0xff,0xff,0x00);   //é»„è‰²\t\tdelay(500);                 \t\tmakerobo_led_Color_Set(0xff,0x00,0xff);   //ç²‰è‰²\t\tdelay(500);     \t\tmakerobo_led_Color_Set(0xff,0xff,0xff);   //ç™½è‰²\t\tdelay(500);       \t\tmakerobo_led_Color_Set(0x94,0x00,0xd3);   //ç´«è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0x76,0xee,0x00);   //åé»„è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0x00,0xc5,0xcd);\t  //æ·¡è“è‰²\t\tdelay(500);\t&#125;\t\t//æœ€åå¾ªç¯ç»“æŸæ—¶ï¼Œå…³é—­LEDï¼ˆå¦‚æœä¸è¿™ä¹ˆè®¾ç½®ï¼ŒLEDç¯ä¼šåœç•™åœ¨æœ€åä¸€ä¸ªé¢œè‰²ï¼‰\tmakerobo_led_Color_Set(0x00,0x00,0x00);\t//å‚æ•°éƒ½ä¸º0,ç›¸å½“äºå…³ç¯\tdelay(500);//å¦‚æœä¸å»¶æ—¶ï¼Œæ•ˆæœæ— æ³•å±•ç¤ºå‡ºæ¥\t\treturn 0;&#125;\n\nä½¿ç”¨æ ‘è“æ´¾Geanyç¼–è¯‘å™¨ï¼Œä¸‰æ¿æ–§ç‚¹èµ·æ¥\n\næœ€åçš„ç»“æœå¦‚ä¸‹å›¾~~RGBå°ç¯å˜è‰²å¾ªç¯æˆåŠŸï¼\n\n\n4.4 Linux-GCCç¼–è¯‘å™¨æŒ‡ä»¤Geanyå·²ç»å¯ä»¥å¾ˆå¥½åœ°æ‰§è¡Œæˆ‘ä»¬çš„ç¨‹åºäº†ï¼Œä½†å®ƒæœªå…æœ‰ç‚¹å¤ªeasyäº†ï¼Œç‚¹å‡ ä¸‹æŒ‰é’®å°±èƒ½æå®š\næˆ‘ä»¬æ¥è¯•è¯•éœ€è¦æ•²è¯­å¥çš„GCCç¼–è¯‘å™¨\né¦–å…ˆä¾æ—§æ˜¯ç”¨cdæ‰“å¼€æºæ–‡ä»¶çš„ç›®å½•\ncd æ‰“å¼€æºæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ls åˆ—å‡ºå½“å‰æ–‡ä»¶è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶\n\nä½¿ç”¨wiringPiåº“å’ŒsoftPWMåº“éœ€è¦åŠ ä¸Šä¸¤ä¸ªæŒ‡ä»¤\n\nwiringPiåº“å¯¹åº”ï¼š-lwiringPi\nsoftPWMåº“å¯¹åº”ï¼š-lpthread\n\nåœ¨linuxçš„gccä¸­ä½¿ç”¨delayå‡½æ•°éœ€è¦è°ƒç”¨å¦å¤–ä¸€ä¸ªå¤´æ–‡ä»¶&lt;unistd.h&gt;\ngcc -Wall 02rgbled.c -o TEST -lwiringPi -lpthread\n\nå¦‚æœæ²¡æœ‰æŠ¥é”™çš„è¯ï¼Œé‚£å°±æ˜¯ç¼–è¯‘æˆåŠŸäº†ï¼Œå†æ¬¡lså¯ä»¥çœ‹åˆ°å¤šå‡ºæ¥äº†ä¸€ä¸ªTESTå¯æ‰§è¡Œæ–‡ä»¶\n\n./TEST æ‰§è¡ŒTESTæ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ç¨‹åºæ­£å¸¸è¿è¡Œäº†ï¼\n\n\nç»“è¯­ç¬¬äºŒä¸ªæ ‘è“æ´¾å®éªŒä¹Ÿåšå®Œå•¦ï¼\nè™½ç„¶è¿˜æœ‰é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªå¤§å¤§çš„ğŸ‘ï¼æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥è¯„è®ºåŒºæå‡ºæ¥å“¦\n\né€šå¾€å¤§ä½¬çš„è·¯éå¸¸æ¼«é•¿â€¦â€¦\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ03-ä¸ƒå½©LED","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C03-%E4%B8%83%E5%BD%A9LED/","content":"\n\n\n\nå‰è¨€å­¦ä¹ å¤ªç´¯ï¼Œé‚£å°±ç©ç©æ ‘è“æ´¾â€œé™¶å†¶æƒ…æ“â€å§ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾4Bå¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nä¸ƒå½©LEDæ¨¡å—\nè·³çº¿è‹¥å¹²\n\n\n2.å®éªŒæ¥çº¿ä¸ƒå½©LEDæ¨¡å—å†…ç½®äº†ICèŠ¯ç‰‡ï¼Œå› æ­¤æ— éœ€ç¼–å†™ä»£ç ï¼Œåªéœ€é€šç”µå°±èƒ½çœ‹åˆ°LEDé—ªçƒã€‚\nä¸åŒå‹å·çš„ä¸ƒå½©LEDæ¨¡å—ï¼Œå†…ç½®çš„é—ªçƒæƒ…å†µä¼šæœ‰æ‰€åŒºåˆ«ï¼Œå¦‚é—ªçƒå¿«æ…¢å’Œäº®åº¦ç­‰\n\nä¸ƒå½©LEDæ¨¡å—åªéœ€ä¸²è”ä¸€ä¸ªé™æµç”µé˜»å³å¯æ„æˆæ§åˆ¶ç”µè·¯ï¼Œç¤ºæ„å›¾å¦‚ä¸‹\n\næ‰€ä»¥æˆ‘ä»¬æ¥çº¿çš„æ—¶å€™ï¼Œåªéœ€æ¥ä¸ŠVCCå’ŒGNDå³å¯\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nä¸ƒå½©LEDæ¨¡å—\n\n\n\nGND\nGND\nGND(ä¸­é—´ç®¡è„š)\n\n\n5V\n5V\nVCC(ä¸€æ—æ ‡æœ‰S)\n\n\n\nå‰ä¸¤æ¬¡å®éªŒä¸­ï¼Œæˆ‘å¯¹æ¯æ¬¡éƒ½éœ€è¦æ¥5vçº¿å´å¹¶æ²¡æœ‰è¿æ¥è®¾å¤‡æ„Ÿåˆ°ç–‘æƒ‘\næœ¬æ¬¡å®éªŒæ­£å¥½å°è¯äº†æˆ‘åœ¨02RGBledå®éªŒåšå®¢é‡Œåšå‡ºçš„çŒœæµ‹ï¼\nå®ç‰©æ¥çº¿å›¾å¦‚ä¸‹ğŸ‘‡\n\n3.å®éªŒæ•ˆæœå°†ç”µè·¯æ¥é€šï¼Œå¯ä»¥çœ‹åˆ°LEDé—ªçƒäº†7ç§é¢œè‰²ï¼Œä¸”æœ‰ä¸åŒçš„é—ªçƒæ–¹å¼ï¼\n\nè¿™ä¸æ¯”è‡ªå·±å†™ä»£ç æ§åˆ¶çš„æ›´å¸…ï¼Ÿï¼ˆbushiï¼‰\nå¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•ç”¨ä»£ç æ§åˆ¶ä¸€ä¸ªLEDæ¨¡å—ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å‰ä¸¤ç¯‡æ ‘è“æ´¾å®éªŒçš„åšå®¢\n\nå®éªŒ02ï¼šRGBå°ç¯ \nå®éªŒ01ï¼šåŒè‰²LED\n\nç»“è¯­æœ¬æ¬¡å®éªŒçš„å†…å®¹ä¸å¤šæ’’ï¼Œå’±ä¹Ÿè§è¯†äº†å†…ç½®å°èŠ¯ç‰‡çš„å¿«ä¹ï¼ˆæŒ‡ä¸éœ€è¦è‡ªå·±å†™æ§åˆ¶ä»£ç ï¼‰\nä¸‹ä¸€æ¬¡çš„å®éªŒæ˜¯ç»§ç”µå™¨å®éªŒï¼Œè¿™éƒ¨åˆ†æ¶‰åŠåˆ°ä¸€äº›åŸç†ï¼Œçœ‹æ¥è¦ç§ƒå¤´äº†\n\nå¦‚æœä½ è§‰å¾—æœ¬ç¯‡åšå®¢æŒºæœ‰æ„æ€ï¼Œé‚£å°±ç‚¹ä¸ªèµï¼Œé¡ºä¾¿æ”¶è—ä¸€ä¸‹æˆ‘çš„æ ‘è“æ´¾ä¸“æ å§ï¼\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ04-ç»§ç”µå™¨","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C04-%E7%BB%A7%E7%94%B5%E5%99%A8/","content":"\n\n\n\nå‰è¨€å­¦ä¹ æ ‘è“æ´¾çš„æ—¶å€™ç»å¸¸è¦æŸ¥æ‰¾å‰è¾ˆä»¬ç•™ä¸‹çš„èµ„æ–™\n\nä½†æˆ‘å‘ç°ï¼Œæœ‰ä¸€äº›åšå®¢ï¼Œå†™çš„çœŸçš„ä¸æ•¢æ­ç»´ã€‚\næ— æ³¨é‡Šæºç ä¸€è´´ï¼Œç”µè·¯å›¾ä¸€è´´ï¼Œä»€ä¹ˆè§£é‡Šéƒ½æ²¡æœ‰ï¼Œå°±å‘å‡ºæ¥äº†ã€‚\nè¿™æ˜¯å†™ç»™è°çœ‹çš„ï¼Ÿææ€•è‡ªå·±è¿‡å‡ ä¸ªæœˆå›å¤´çœ‹è‡ªå·±éƒ½ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆæ„æ€ã€‚è¿™æ ·çš„å­¦ä¹ æœ‰å•¥æ„ä¹‰å‘¢ï¼Ÿ\n\næœ‰çš„äººå¯èƒ½è§‰å¾—æˆ‘æ˜¯æƒ³æŠ„ä½œä¸šï¼Œçš„ç¡®ï¼åµŒå…¥å¼å­¦ä¹ éœ€è¦äº†è§£å„ä¸ªå…ƒä»¶çš„å·¥ä½œåŸç†ï¼Œæˆ‘çš„èµ„æ–™å•æœ‰ç”µè·¯å›¾è¿œè¿œä¸å¤Ÿå•Šâ€¦â€¦å³ä¾¿æœ‰æºç ï¼Œä¹Ÿéœ€è¦è‡ªå·±å»å¼„æ˜ç™½æ¯ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œä¸ç„¶è¿™æ ·çš„å­¦ä¹ ä¾æ—§æ²¡æœ‰æ„ä¹‰ğŸ˜¥\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nç»§ç”µå™¨æ¨¡å—+åå­—èºä¸åˆ€\nåŒè‰²LEDæ¨¡å—ï¼ˆå®éªŒ1ä½¿ç”¨è¿‡ï¼‰\nè·³çº¿ä¸€å †\n\n2.å®éªŒåŸç†2.1ç»§ç”µå™¨æ¨¡å—ç»§ç”µå™¨æ¨¡å—æ˜¯ä¸€ç§ç”µæ§åˆ¶æœŸé—´ï¼Œå½“è¾“å…¥é‡çš„å˜åŒ–è¾¾åˆ°è§„å®šè¦æ±‚æ—¶ï¼Œåœ¨ç”µæ°”è¾“å‡ºç”µè·¯ä¸­ä½¿è¢«æ§åˆ¶é‡å‘ç”Ÿé¢„å®šé˜¶è·ƒå˜åŒ–çš„ä¸€ç§ç”µå™¨ã€‚å®ƒå…·æœ‰æ§åˆ¶ç³»ç»Ÿå’Œè¢«æ§åˆ¶ç³»ç»Ÿä¹‹é—´çš„äº’åŠ¨å…³ç³»ï¼Œé€šå¸¸è¿ç”¨äºè‡ªåŠ¨åŒ–çš„æ§åˆ¶ç”µè·¯ä¸­ã€‚å®ƒå®é™…ä¸Šæ˜¯ç”¨å°ç”µæµå»æ§åˆ¶å¤§ç”µæµè¿ä½œçš„ä¸€ç§â€œè‡ªåŠ¨å¼€å…³â€ï¼Œåœ¨ç”µè·¯ä¸­èµ·åˆ°è‡ªåŠ¨è°ƒèŠ‚ã€å®‰å…¨ä¿æŠ¤ã€è½¬æ¢ç”µè·¯ç­‰ä½œç”¨ã€‚\n\nè¯´äººè¯å°±æ˜¯ï¼Œç»§ç”µå™¨æ˜¯ä¸€ä¸ªç”µåŠ¨å¼€å…³ï¼Œé€šè¿‡æ¥æ”¶å¤–éƒ¨æºçš„ç”µä¿¡å·æ¥æ‰“å¼€å’Œå…³é—­ç”µè·¯ã€‚\nä¾‹å¦‚ï¼šæŒ‰ä¸‹ç”µè§†æœºé¥æ§å™¨çš„å¼€å¯æŒ‰é’®ï¼Œå®ƒå‘ç”µè§†èŠ‚å†…éƒ¨çš„â€œç»§ç”µå™¨â€å‘å‡ºç”µä¿¡å·ï¼Œä»è€Œæ‰“å¼€ç”µè§†æœºçš„ä¸»ç”µæºå¼€å…³ã€‚ä¸è¿‡ç”µè§†æœºå†…éƒ¨è¿˜æœ‰å¦å¤–çš„ä¿¡å·æ¥æ”¶å™¨ï¼Œç»§ç”µå™¨æœ¬èº«ä¸ä¸€å®šèƒ½æ¥æ”¶çº¢å¤–ä¿¡å·ï¼ˆä¸ªäººç†è§£ï¼‰\n\n2.2ç»§ç”µå™¨å·¥ä½œ\nå½“ç»§ç”µå™¨ä¾›ç”µæ—¶ï¼Œç”µæµå¼€å§‹ç»è¿‡æ§åˆ¶çº¿åœˆ\nç”µç£ä½“å¼€å§‹é€šç”µï¼Œå°†ä¸Šéƒ¨è¡”é“å¸é™„åˆ°çº¿åœˆä¸Šï¼Œå¸¦åŠ¨è§¦ç‚¹å‘å³ç§»åŠ¨ï¼Œä»è€Œä¸å¸¸å¼€è§¦ç‚¹é“¾æ¥\nå¸¦è´Ÿè½½çš„ç”µè·¯é€šç”µ\nç»§ç”µå™¨æ–­å¼€ä¾›ç”µï¼Œå¼¹ç°§ä¼šå°†è§¦å¤´å¤ä½ï¼Œç”µè·¯æ–­å¼€\n\n\n\n3.ç”µè·¯å›¾å’Œæ¥çº¿å›¾3.1ç”µè·¯å›¾ç»§ç”µå™¨æ¨¡å—çš„ç”µè·¯å›¾å¦‚ä¸‹\n\næ¨¡å—å®ç‰©å›¾å¦‚ä¸‹\n\n\nå¼•ç”¨å¦å¤–ä¸€ç¯‡åšå®¢å¯¹å„ä¸ªæ¥å£çš„ä»‹ç»ğŸ‘‰åŸæ–‡é“¾æ¥\n\n\n3.2æ¥çº¿å›¾ç»§ç”µå™¨çš„ä¸»æ§åˆ¶å‹å·æºæ¥åœ¨GPIO17ï¼Œå’Œç«¯å£0å¯¹åº”ï¼ˆåé¢ä»£ç ä¼šç”¨åˆ°ï¼‰\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nç»§ç”µå™¨æ¨¡å—\n\n\n\nGPIO 0\nGPIO 17\nIN\n\n\n5V\n5V\nDC+\n\n\nGND\nGND\nDC-\n\n\n5V\n5V\nCOM\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nç»§ç”µå™¨\n\n\n\nä¸­é—´ï¼ˆRï¼‰\n*\nNC\n\n\nGND\nGND\n*\n\n\nS(G)\n*\nNO\n\n\nç”±äºåŒè‰²LEDæ¨¡å—çš„Gæ¥å£(Green)æ¥åˆ°äº†ç»§ç”µå™¨çš„å¸¸é—­ç«¯å£NCï¼ˆå³ç»§ç”µå™¨æœªæ¥é€šæ—¶é»˜è®¤æ¥ä¸Šçš„ç«¯å£ï¼‰\næ‰€ä»¥åœ¨æ¥çº¿å®Œæ¯•åï¼ŒLEDæ¨¡å—ä¼šäº®ç»¿ç¯\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯¹ç»§ç”µå™¨æ¥çº¿çš„æ—¶å€™ï¼Œéœ€è¦ç”¨èºä¸é”ä½å„æ¡çº¿ä½ï¼Œä¸ç„¶å®ƒä»¬æ˜¯æ¥ä¸ç¨³çš„\n\n\n4.ä»£ç ç¤ºä¾‹è¿™é‡Œç»™å‡ºCè¯­è¨€çš„ä»£ç \n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_RelayPin 0 //è®¾ç½®ç»§ç”µå™¨GPIOç®¡è„šï¼Œ0å¯¹åº”G17int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\t\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\t\t//å°†ç»§ç”µå™¨ç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_RelayPin, OUTPUT);\t\tint k=2;\twhile(k--)\t&#123;\t\t\tdigitalWrite(makerobo_RelayPin, HIGH); // æ‰“å¼€ç»§ç”µå™¨\t\t\tdelay(1000);                           // å»¶æ—¶1s\t\t\t\t\tdigitalWrite(makerobo_RelayPin, LOW);  // å…³é—­ç»§ç”µå™¨\t\t\t\t\t\tdelay(1000);                           // å»¶æ—¶1s\t&#125;\treturn 0;&#125;\n\n4.1éƒ¨åˆ†å‡½æ•°è§£é‡Š4.1.1pinModeè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è®¾ç½®é’ˆè„šå½“å‰çš„æ¨¡å¼\n\n4.1.2digitalWriteå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæåˆ°äº†åœ¨ä½¿ç”¨è¯¥å‡½æ•°ä¹‹å‰ï¼Œéœ€è¦ç”¨pinModeå‡½æ•°å°†é’ˆè„šè®¾ç½®ä¸ºOUTPUTæ¨¡å¼\n\n0 ä»£è¡¨lowå€¼\né0éƒ½ä»£è¡¨high\n\n\n4.2Geanyç¼–è¯‘å™¨è¿è¡Œä»£ç è€æ ·å­ï¼Œä¸‰æ¿æ–§\n\n\nåœ¨Geanyé‡Œé¢ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨wiringPiåº“ï¼ˆåç»­çš„åšå®¢ä¸å†è¯´æ˜ï¼‰\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\næœ€ç»ˆè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œå½“digitalWriteå†™å…¥highæ—¶ï¼Œç»§ç”µå™¨æ¥é€šï¼Œçº¢ç¯ç”µè·¯äº®èµ·\nå†™å…¥lowæ—¶ç»§ç”µå™¨å…³é—­ï¼Œæ¢å¤åŸæœ¬ç»¿ç¯å¸¸äº®çŠ¶æ€\n\nä½¿ç”¨ctrl+cå…³é—­ç¨‹åºè¿è¡Œé¢æ¿ï¼Œåœæ­¢ç¨‹åºè¿è¡Œ\n\n4.3Linux-gccç¼–è¯‘å™¨åœ¨linuxæ§åˆ¶å°é‡Œé¢ï¼Œç”¨cdæ‰“å¼€ä½ çš„æ–‡ä»¶å¤¹åï¼Œè¾“å…¥å¦‚ä¸‹ç¼–è¯‘æŒ‡ä»¤\ngcc -Wall 04relay.c -o TEST -lwiringPi\n\nå¦‚æœç¼–è¯‘æ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯æˆåŠŸç¼–è¯‘äº†ï¼Œlsä¼šå‘ç°å¤šå‡ºäº†TESTå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨./TESTæ‰§è¡Œå®ƒ\næ‰§è¡Œç»“æŸåï¼Œä¼šæ˜¾ç¤ºä¸‹ä¸€è¡Œçš„å¾…å®šè¾“å…¥\n\nä¸ºäº†é¿å…linux-gccä¸­ç¨‹åºè¿è¡Œåæ— æ³•ç»ˆæ­¢ï¼Œè¯·ä¸è¦ä½¿ç”¨while(1)æ­»å¾ªç¯ï¼\nä½¿ç”¨ç»“æŸåè¯·å…ˆæ–­å¼€5Vè·³çº¿åï¼Œå†æ–­å¼€å…¶ä»–è·³çº¿\n\nç»“è¯­æœ¬å®éªŒåªæ˜¯ç®€å•æ¼”ç¤ºäº†ç»§ç”µå™¨çš„ä½¿ç”¨ï¼Œå†åç»­æ›´å¤æ‚çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ§åˆ¶æ›´å¤æ‚çš„æ¨¡å—\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ05-æ¿€å…‰ä¼ æ„Ÿå™¨","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C05-%E6%BF%80%E5%85%89%E4%BC%A0%E6%84%9F%E5%99%A8/","content":"\n\nå‰è¨€æˆ‘æ‰‹å¤´çš„èµ„æ–™ä¸Šï¼Œåˆè¯´äº†ä¸€å †å’Œæœ¬å®éªŒç›¸å…³ä½†åˆæ¯«ä¸ç›¸å…³çš„å†…å®¹\nè¿˜æ˜¯å¾—è‡ªå·±æ‰¾èµ„æ–™æ‰èƒ½ç¡®è®¤æˆ‘çš„â€œçŒœæƒ³â€ï¼Œå…·ä½“æ˜¯å•¥ï¼Œä¸”å¾€ä¸‹ç»†çœ‹ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—ï¼ˆå…¶å®åªæ˜¯ä¸€ä¸ªå‘å°„å™¨ï¼‰\nè·³çº¿è‹¥å¹²\n\n2.å®éªŒåŸç†æ¿€å…‰ä¼ æ„Ÿå™¨å¸¸è§äºæµ‹è·ç”¨é€”ã€‚å®ƒç”±æ¿€å…‰å‘å°„å™¨ã€æ¿€å…‰æ£€æµ‹å™¨å’Œæµ‹é‡ç”µè·¯ç»„æˆã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿå®ç°æ— æ¥è§¦è¿œè·ç¦»æµ‹é‡ï¼Œé€Ÿåº¦å¿«ï¼Œç²¾åº¦é«˜ï¼Œé‡ç¨‹å¤§ã€‚\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—ç”±ä¸€ä¸ª650nmçº¢è‰²æ¿€å…‰äºŒæç®¡å¤´å’Œä¸€ä¸ªç”µé˜»å™¨ç»„æˆ\n\næ¿€å…‰ä¼ æ„Ÿå™¨å·¥ä½œæ—¶ï¼Œå…ˆç”±æ¿€å…‰å‘å°„äºŒæç®¡å¯¹å‡†ç›®æ ‡å‘å°„æ¿€å…‰è„‰å†²ã€‚ç»ç›®æ ‡åå°„åæ¿€å…‰å‘å„æ–¹å‘æ•£å°„ã€‚éƒ¨åˆ†æ•£å°„å…‰è¿”å›åˆ°ä¼ æ„Ÿå™¨æ¥æ”¶å™¨ï¼Œè¢«å…‰å­¦ç³»ç»Ÿæ¥æ”¶åæˆåƒåˆ°é›ªå´©å…‰ç”µäºŒæç®¡ä¸Šã€‚é›ªå´©å…‰ç”µäºŒæç®¡æ˜¯ä¸€ç§å†…éƒ¨å…·æœ‰æ”¾å¤§åŠŸèƒ½çš„å…‰å­¦ä¼ æ„Ÿå™¨ï¼Œå› æ­¤å®ƒèƒ½æ£€æµ‹æå…¶å¾®å¼±çš„å…‰ä¿¡å·ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºç›¸åº”çš„ç”µä¿¡å·ã€‚\n\nä¹¦ä¸Šä»‹ç»äº†è¿™ä¹ˆä¸€å †ï¼Œå¼„çš„å¥½åƒè¿™ä¸ªå°å®¶ä¼™å°±é›†æˆäº†ä¸Šé¢3ä¸ªä¼ æ„Ÿå™¨ä¸€æ ·ã€‚æˆ‘åˆšçœ‹ä¹¦çš„æ—¶å€™ï¼Œä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¹ˆå°ä¸€ä¸ªç©æ„å°±èƒ½æµ‹è·ï¼Ÿè‡ªå·±æ‰¾äº†èµ„æ–™æ‰èƒ½å‹‰å¼ºç¡®è®¤ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå•çº¯çš„æ¿€å…‰å‘å°„å™¨ç½¢äº†ã€‚\n\nä½œä¸ºä¸€ä¸ªèŒæ–°ï¼Œä¹¦ä¸Šçš„å†…å®¹çš„ç¡®å¯¹æˆ‘äº§ç”Ÿäº†è¯¯å¯¼ï¼Œè¿˜éœ€è¦è‡ªå·±æŸ¥é˜…èµ„æ–™ï¼Œæœ‰ç‚¹æµªè´¹æ—¶é—´ã€‚\n\n\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—\n\n\n\nGIPO 0\nGPIO 17\nSIG(S)\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND(-)\n\n\n\nå®ç‰©æ¥çº¿å›¾å¦‚ä¸‹ï¼Œæœ¬å®éªŒæ¥çº¿æ¯”è¾ƒç®€å•\n\nå³ä¸Šè§’çš„çº¢é»‘çº¿æ˜¯æ¥ç»™æ ‘è“æ´¾æ•£çƒ­é£æ‰‡çš„ï¼Œå’Œæœ¬å®éªŒæ— å…³\n\n\n\n3.ä»£ç ç¤ºä¾‹è€æ ·å­ï¼Œç»™å‡ºCè¯­è¨€ä»£ç ã€‚\n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_LaserPin 0  //å®šä¹‰æ¿€å…‰ä¼ æ„Ÿå™¨ç®¡è„šint main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\t\tpinMode(makerobo_LaserPin, OUTPUT); // æ¿€å…‰ä¼ æ„Ÿå™¨è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\t\tint k=2;\twhile(k--)\t&#123;\t\tdigitalWrite(makerobo_LaserPin, HIGH); //æ‰“å¼€æ¿€å…‰ä¼ æ„Ÿå™¨\t\tdelay(1000); //å»¶æ—¶1s                           \t\tdigitalWrite(makerobo_LaserPin, LOW);  //å…³é—­æ¿€å…‰ä¼ æ„Ÿå™¨\t\tdelay(1000); //å»¶æ—¶1s    \t&#125;\t\tdigitalWrite(makerobo_LaserPin, LOW); //å¾ªç¯ç»“æŸåï¼Œæ¢å¤å…³é—­çŠ¶æ€\tdelay(500); \t\treturn 0;&#125;\n\n\nä»£ç ä¸­çš„ä¸¤ä¸ªwiringPiå‡½æ•°åœ¨ä¸Šç¯‡å®éªŒåšå®¢ä¸­æœ‰è®²è§£ğŸ‘‰ä¼ é€\n\n3.1Genayç¼–è¯‘å™¨è€æ ·å­ï¼Œä¸‰æ¿æ–§ï¼ˆå…¶å®è¿™å¥è¯éƒ½æ˜¯ä»ä¹‹å‰çš„åšå®¢å¤åˆ¶è¿‡æ¥çš„ğŸ˜‚ï¼‰\n\n\nåœ¨Geanyé‡Œé¢ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨wiringPiåº“\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\næ•ˆæœå¦‚ä¸‹ï¼Œæ¿€å…‰å‘å°„å™¨åœ¨å»¶æ—¶åä¸æ–­å¼€å…³\nè¯·ä¸è¦å°†æ¿€å…‰å‘å°„å™¨å¯¹å‡†ä»»ä½•äººï¼ä¼¤çœ¼ï¼ï¼ï¼\n\n\n3.2LinuxGccç¼–è¯‘å™¨\nä¸ºäº†é˜²æ­¢Linux-Gccç¯å¢ƒä¸­æ— æ³•æ­£å¸¸ç»ˆæ­¢ç¨‹åºï¼Œå»ºè®®ä¸è¦ä½¿ç”¨while(1)æ­»å¾ªç¯ã€‚ä½ å¯ä»¥å°†kè®¾ç½®å¾—å¤§ä¸€ç‚¹ï¼Œæ–¹ä¾¿è§‚å¯Ÿå®éªŒç»“æœ\n\ncdæ‰“å¼€å¯¹åº”æ–‡ä»¶è·¯å¾„ï¼Œlsæ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶\nè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ç¼–è¯‘ä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 05laser.c -o TEST -lwiringPi\n\n./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶\n\nå¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯ç¼–è¯‘æˆåŠŸäº†ï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ°ç›¸åŒçš„å®éªŒç»“æœ\nç»“è¯­æ¬¸è¿™åšå®¢éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œæ€ä¹ˆä¸ç‚¹å…³æ³¨å•Šï¼Ÿ\nå°±ç®—ä½ ä¸æƒ³å…³æ³¨æˆ‘ï¼Œé‚£å°±å…³æ³¨ä¸€ä¸‹ä¸“æ å˜›ï¼ğŸ‘‰ä¼ é€é—¨\nTNNDï¼å…³æ³¨ï¼Œä¸ºä»€ä¹ˆä¸å…³æ³¨ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ06-è½»è§¦å¼€å…³å®éªŒ","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C06-%E8%BD%BB%E8%A7%A6%E5%BC%80%E5%85%B3%E5%AE%9E%E9%AA%8C/","content":"\n\nå‰è¨€ä¹¦ä¸Šçš„ä»£ç ç¤ºä¾‹å¯å¤ªç‰›äº†ï¼Œä¸ä»…æ²¡ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°strcmpï¼Œè¿˜æ˜¯æŒ‡é’ˆç›´æ¥å’Œå­—ç¬¦ä¸²å¯¹æ¯”ğŸ˜¥\n\nå­¦ä¹ è¿˜å¾—å¸®ä¹¦æœ¬çº é”™ï¼Œé—®åº—å®¶å®¢æœä¹Ÿæ˜¯ä¸€é—®ä¸‰ä¸çŸ¥ã€‚\nä¸å¤šè¯´äº†ï¼Œä¸€èµ·å¼€å§‹æœ¬æ¬¡çš„å®éªŒå§ï¼ğŸ‘\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾\n40Pè½¯ç›˜çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nè½»è§¦å¼€å…³æŒ‰é”®æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nä¸€å †è·³çº¿\n\n\nä¸Šï¼šåŒè‰²LEDæ¨¡å—ï¼›ä¸‹ï¼šè½»è§¦å¼€å…³æ¨¡å—\n\n2.å®éªŒåŸç†2.1ç”µè·¯å›¾ä½¿ç”¨è½»è§¦å¼€å…³ä½œä¸ºæ ‘è“æ´¾çš„è¾“å…¥è®¾å¤‡ï¼ŒæŒ‰ä¸‹å¼€å…³æ—¶ï¼Œæ ‘è“æ´¾GPIOç«¯å£æ£€æµ‹åˆ°ä½ç”µå¹³(0v)ï¼Œè¡¨ç¤ºæŒ‰é”®è¢«æŒ‰ä¸‹ã€‚æ¾å¼€æŒ‰é”®æ—¶ï¼Œæ ‘è“æ´¾æ£€æµ‹åˆ°é«˜ç”µå¹³(3.3v)\nåœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œå°†é€šè¿‡æ‰“å°ä¿¡æ¯æç¤ºæŒ‰é”®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚\nè½»è§¦å¼€å…³æ¨¡å—ç”µè·¯å›¾å¦‚ä¸‹ï¼š\n\n2.2æ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nè½»è§¦å¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nSIG(S)\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND(-)\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\nåœ¨å®éªŒ2çš„åšå®¢ä¸­ï¼Œå·²ç»æåˆ°è¿‡æ ‘è“æ´¾é’ˆè„šç¼–å·å’ŒTå‹è½¬æ¥æ¿ä¸Šç¼–å·çš„å¯¹åº”å…³ç³»\nåœ¨æ ‘è“æ´¾ç³»ç»Ÿæ§åˆ¶æ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹æ ‘è“æ´¾çš„GPIOæ¥å£\ngpio readall\n\nå¯ä»¥çœ‹åˆ°ï¼Œ17å¯¹åº”0ï¼Œ18å¯¹åº”1ï¼Œ27å¯¹åº”2ã€‚å’Œæˆ‘ä»¬çš„æ¥çº¿æ–¹å¼å’Œåˆå§‹åŒ–é’ˆè„šçš„ç¼–å·æ˜¯å¯¹åº”çš„\n\næœ¬æ¬¡å®éªŒçš„æ¥çº¿å›¾å¦‚ä¸‹ï¼Œæ³¨æ„å„ä¸ªç«¯å£çš„æ¥çº¿å…³ç³»\n\nå³ä¸Šè§’çº¢é»‘çº¿æ˜¯æ ‘è“æ´¾çš„æ•£çƒ­é£æ‰‡ï¼Œå’Œå®éªŒæ— å…³\n\n\n\n3.ç¨‹åºç¤ºä¾‹ä»¥ä¸‹ç»™å‡ºCè¯­è¨€çš„ç¤ºä¾‹ä»£ç \n//è½»è§¦å¼€å…³æŒ‰é”®å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#define makerobo_BtnPin\t\t0   // è½»è§¦æŒ‰é”®PINå£#define makerobo_Rpin\t\t1   // çº¢è‰²LEDç¯æ¨¡å—PIN#define makerobo_Gpin\t\t2   // ç»¿è‰²LEDç¯æ¨¡å—PIN//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT);  //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT);  //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼    \tif (!strcmp(color,&quot;RED&quot;))     //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH); \t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (!strcmp(color,&quot;GREEN&quot;)) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;makerobo Double color LED Error\\n&quot;);&#125;int main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed!\\n&quot;);\t\treturn 1; \t&#125;    //è½»è§¦æŒ‰é”®Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_BtnPin, INPUT);\tdouble_colorLED(&quot;GREEN&quot;);\t\twhile(1)\t&#123;\t\t//è½»è§¦æŒ‰é”®å»é™¤æŠ–åŠ¨å¤„ç†\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t&#123;   // æŒ‰é”®æœ‰æŒ‰ä¸‹\t\t\tdelay(10);   // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t\t&#123;\t\t\t\tdouble_colorLED(&quot;RED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Button is pressed\\n&quot;); // æ‰“å°å‡ºæœ‰æŒ‰é”®æŒ‰ä¸‹\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_BtnPin))\t\t&#123; // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹äº®ç»¿ç¯\t\t\tdelay(10);\t\t\tif(1 == digitalRead(makerobo_BtnPin))\t\t\t&#123;\t\t\t\tdouble_colorLED(&quot;GREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Button is pressed\\n&quot;); // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1éƒ¨åˆ†å‡½æ•°è§£æä¸€äº›å‡½æ•°åœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²å…·ä½“ä»‹ç»è¿‡ï¼Œè¿™é‡Œç®€å•åˆ—å‡ºå®ƒä»¬çš„åŠŸèƒ½\n\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\nvoid pinMode(int pin, int mode)\nè®¾ç½®é’ˆè„šæ¨¡å¼ï¼ˆè¾“å…¥ã€è¾“å‡ºã€è„‰å†²è¾“å‡ºã€GPIOæ—¶é’Ÿï¼‰\n\n\nvoid digitalWrite(int pin, int value);\nå‘æŒ‡å®šç®¡è„šå†™å…¥é«˜&#x2F;ä½ç”µå¹³ä¿¡å·ï¼Œä½¿ç”¨å‰éœ€è¦è®¾ç½®ç®¡è„šä¸ºè¾“å‡ºæ¨¡å¼\n\n\nè¿™é‡Œæœ‰ä¸ªæ–°çš„å‡½æ•°ï¼Œä½œç”¨æ˜¯è¯»å–ç®¡è„šçš„å€¼\nåœ¨æœ¬å®éªŒä¸­ç”¨äºæ¥æ”¶è½»è§¦å¼€å…³çš„æŒ‰é’®ä¿¡å·\n\n3.2 Geanyç¼–è¯‘å™¨è¿è¡Œè¿è¡Œç¨‹åºï¼Œä»£ç ä¼šå¾ªç¯æ‰“å°â€œæ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹â€ï¼ŒLEDäº®ç»¿ç¯\n\næŒ‰ä¸‹æŒ‰é”®åï¼Œæ‰“å°æ˜¾ç¤ºâ€œæŒ‰é”®å·²æŒ‰ä¸‹â€ï¼ŒLEDäº®çº¢ç¯\n\nå®éªŒæ•ˆæœå¦‚ä¸‹\n\n3.3Linux-Gccç¼–è¯‘å™¨åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹ç¼–è¯‘æŒ‡ä»¤ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\ngcc -Wall 06Button.c -o TEST -lwiringPi\n\nè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶åï¼Œå¯ä»¥è§‚æµ‹åˆ°ç›¸åŒç»“æœ\n\n3.4ç¨‹åºä¼˜åŒ–æˆ‘ä¸ªäººè§‰å¾—è¿™ä¸ªç¨‹åºç”¨while(1)æ­»å¾ªç¯å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ä¼˜ï¼Œç¨‹åºéœ€è¦æ‰‹åŠ¨CTRL+Cç»ˆæ­¢ï¼Œä¸”ç»ˆæ­¢åæ— æ³•å…³é—­LEDç¯ã€‚\nä¸‹é¢å¯¹ç¨‹åºåšå‡ºä¸€äº›ä¼˜åŒ–\n\nä¾æ—§å¯ä»¥è¯•è¯•åˆ¤æ–­æŒ‰é”®æŒ‰ä¸‹æƒ…å†µ\nåœ¨ç¨‹åºè¿è¡Œåï¼Œå…³é—­å°ç¯\n\nåªéœ€æ›´æ”¹å¾ªç¯ä½“å’Œå»¶æ—¶å‡½æ•°å³å¯ï¼Œåœ¨å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨digitalWriteè¾“å…¥ä½ç”µå¹³å…³é—­å°ç¯çš„çº¢&#x2F;ç»¿ç®¡è„šï¼Œå³å®Œå…¨å…³é—­åŒè‰²LED\nint k=40;while(k--)&#123;\t//è½»è§¦æŒ‰é”®å»é™¤æŠ–åŠ¨å¤„ç†\tif(0 == digitalRead(makerobo_BtnPin))\t&#123;   // æŒ‰é”®æœ‰æŒ‰ä¸‹\t\tdelay(500);   // å»¶æ—¶å»æŠ–åŠ¨\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t&#123;\t\t\tdouble_colorLED(&quot;RED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\tprintf(&quot;Button is pressed\\n&quot;); // æ‰“å°å‡ºæœ‰æŒ‰é”®æŒ‰ä¸‹\t\t&#125;\t&#125;\telse if(1 == digitalRead(makerobo_BtnPin))\t&#123; // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹äº®ç»¿ç¯\t\tdelay(500);\t\tif(1 == digitalRead(makerobo_BtnPin))\t\t&#123;\t\t\tdouble_colorLED(&quot;GREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\tprintf(&quot;No Button is pressed\\n&quot;); // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹\t\t&#125;\t&#125;&#125;//å…³é—­LEDdigitalWrite(makerobo_Rpin, LOW);digitalWrite(makerobo_Gpin, LOW);delay(500);//å»¶æ—¶æŸ¥çœ‹å…³é—­æƒ…å†µreturn 0;\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒå­¦ä¹ äº†è½»è§¦å¼€å…³çš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨æœªæ¥çš„å®éªŒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥æ§åˆ¶ä¸€äº›æ›´å¤æ‚ç”µè·¯çš„å¼€åˆ\n\nä½ å­¦è´¹äº†å—ï¼Ÿ\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ07-å€¾æ–œå¼€å…³","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C07-%E5%80%BE%E6%96%9C%E5%BC%80%E5%85%B3/","content":"\n\nå‰è¨€æ˜¨å¤©è¡¥å…¨äº†æ ‘è“æ´¾åˆå§‹åŒ–çš„åšå®¢ï¼Œæœ¬ä¸“æ çš„æ¨¡å—å°±ç®—æ˜¯å…¨å•¦ï¼\næ¬¢è¿å¤§å®¶æŠŠæœ¬ä¸“æ æ¨èç»™å…¶ä»–æœ‰å…´è¶£å­¦ä¹ æ ‘è“æ´¾çš„æœ‹å‹ï¼\n\nä»æœ¬åšå®¢å¼€å§‹ï¼Œå°†ä¸å†è®²è¿°Geanyç¼–è¯‘å™¨çš„ç®€å•æ“ä½œï¼Œæ‰€æœ‰æ“ä½œéƒ½ç”¨linuxå‘½ä»¤è¡Œè§£å†³\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nå€¾æ–œä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šå€¾æ–œä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†åœ¨å€¾æ–œå¼€å…³ä¸­ï¼Œæœ‰ä¸€ä¸ªé‡‘å±çƒï¼Œå®ƒç”¨äºæ£€æµ‹å°è§’åº¦çš„å€¾æ–œã€‚å€¾æ–œå¼€å…³æ¨¡å—çš„ç»“æ„ä¸ºåŒå‘ä¼ åˆ°çš„çƒå½¢å€¾æ–œè¯¥å…³ã€‚åªè¦å€¾æ–œåº¦çš„åŠ›æ»¡è¶³æ¡ä»¶ï¼Œå¼€å…³å°±ä¼šé€šç”µï¼Œä»è€Œè¾“å‡ºä½ç”µå¹³ä¿¡å·ã€‚\n\n2.1å®éªŒæ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nå€¾æ–œå¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nDo\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n2.2å®ç‰©æ¥çº¿å›¾\næ¥ä¸Šæ’çº¿åï¼Œå€¾æ–œå¼€å…³æ¨¡å—çš„PWR-LEDæŒ‡ç¤ºç¯äº®èµ·\n\nå½“æ£€æµ‹åˆ°å€¾æ–œè§’åº¦æ”¹å˜æ—¶ï¼ŒDO-LEDä¹Ÿä¼šäº®èµ·ï¼Œè¿™æ—¶Doç®¡è„šå°†è¾“å‡ºä½ç”µå¹³ï¼Œå¯¹åº”å€¼ä¸º0ã€‚åç»­ç¨‹åºçš„ç¼–å†™å°†ç”¨åˆ°è¿™ä¸ªåŸç†\n\n\n3.ä»£ç ç¤ºä¾‹ä¸‹é¢ç»™å‡ºCè¯­è¨€çš„ç¤ºä¾‹ä»£ç \n//å€¾æ–œä¼ æ„Ÿå™¨å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_TiltPin\t0 //å€¾æ–œä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1 //çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2 //ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (color == &quot;makeroboRED&quot;)     //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == &quot;makeroboGREEN&quot;) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Double color LED Error&quot;);&#125;int main(void)&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //å€¾æ–œä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_TiltPin, INPUT);\tdouble_colorLED(&quot;makeroboGREEN&quot;);\t\twhile(1)&#123;\t\t//å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°å€¾æ–œï¼Œè¾“å‡ºé«˜ç”µå¹³1\t\t//æ£€æµ‹åˆ°äº†ä¹‹åï¼Œè¾“å‡ºé«˜ç”µå¹³0\t\tif(0 == digitalRead(makerobo_TiltPin))\t\t&#123;     //å€¾æ–œä¼ æ„Ÿå™¨å‘ç”Ÿå€¾æ–œ\t\t\tdelay(10); //å€¾æ–œä¼ æ„Ÿå™¨å»é™¤æŠ–åŠ¨å¤„ç†\t\t\tif(0 == digitalRead(makerobo_TiltPin))&#123;\t\t\t\tdouble_colorLED(&quot;makeroboRED&quot;); // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Tilt!\\n&quot;);   // æ‰“å°å‡ºå‡ºç°å€¾æ–œ\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_TiltPin))\t\t&#123; // å€¾æ–œä¼ æ„Ÿå™¨æ²¡æœ‰å‘ç”Ÿå€¾æ–œ\t\t\tdelay(10);\t\t\tif(1 == digitalRead(makerobo_TiltPin))&#123;\t\t\t\twhile(!digitalRead(makerobo_TiltPin));\t\t\t\tdouble_colorLED(&quot;makeroboGREEN&quot;);  // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Tilt!\\n&quot;);  // æ‰“å°æ²¡æœ‰å‡ºç°å€¾æ–œ\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1éƒ¨åˆ†ä»£ç è§£é‡Šå»æŠ–åŠ¨æ“ä½œå› ä¸ºå€¾æ–œå¼€å…³å’Œè½»è§¦å¼€å…³éƒ½æ˜¯ç‰©ç†ç»“æ„ï¼Œéœ€è¦æœ‰ä¸€å®šçš„å»¶æ—¶æ¥è¿›è¡Œå»æŠ–åŠ¨æ“ä½œ\n\nç›´æ¥ç”¨==æ¯”è¾ƒå­—ç¬¦ä¸²(color == &quot;makeroboGREEN&quot;) \n\nè¿™é‡Œç”¨åˆ°äº†==ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œä¹‹å‰æˆ‘ä»¥ä¸ºè¿™æ ·å†™æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºLinux-gccæŠ¥é”™äº†ï¼ˆä½†æ˜¯å¯ä»¥ç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼‰\n\nå®é™…ä¸Šè¿™ä¸ªåœ¨VSä¸‹æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œä¸ä¼šæŠ¥é”™\n\nä¸ªäººç†è§£ï¼Œè¿™æ ·ç›´æ¥ä¼ å…¥å­—ç¬¦ä¸²çš„æ“ä½œï¼Œå®é™…ä¸Šæ˜¯åœ¨å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªå½¢å‚colorï¼Œæ¥æ”¶äº†ä¼ è¿‡æ¥çš„å¸¸é‡å­—ç¬¦ä¸²ï¼Œéšåçš„==æ¯”è¾ƒçš„å…¶å®æ˜¯å†…å­˜ä¸­çš„å­—ç¬¦ä¸²çš„åœ°å€ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²æœ¬èº«\n\nè¿™ä¸ªä»£ç é‡Œé¢åŒ…å«çš„wiringPiå‡½æ•°ï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²ç»è®²è§£è¿‡äº†ï¼Œè¯¦æƒ…å¯ä»¥çœ‹å®éªŒ06ğŸ‘‰ä¼ é€é—¨\nå¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n\n3.2 Linuxç¼–è¯‘è¿è¡Œä»£ç è¾“å…¥ä»¥ä¸‹è¯­å¥ç¼–è¯‘è¿™ä¸ªä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 07tiltswitch.c -o TEST -lwiringPi\n\n./TESTè¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼ŒæŒ‰CTRL+Cç»ˆæ­¢ç¨‹åº\n\n3.3è¿è¡Œæ•ˆæœæŠ¬èµ·å€¾æ–œå¼€å…³ï¼ŒLEDäº®ç»¿ç¯ã€‚æ”¾ä¸‹å®ƒåï¼Œå˜æˆé»˜è®¤çš„çº¢ç¯\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼æ„Ÿè§‰è¿™ä¸ªå€¾æ–œå¼€å…³å°±æ˜¯æ‰‹æœºä¸­é™€èºä»ªçš„é’æ˜¥ç‰ˆã€‚\nç›®å‰æˆ‘è®¾æƒ³çš„æ˜¯ï¼Œä»¥åçš„å°è½¦å®éªŒä¸­å¯ä»¥é€šè¿‡å®ƒæ¥åˆ¤æ–­å°è½¦ç°åœ¨æ˜¯åœ¨ä¸Šå¡è¿˜æ˜¯åœ¨å¹³åœ°ï¼Œå¦‚æœåœ¨ä¸Šå¡ï¼Œå°±åŠ å¤§é©¬è¾¾çš„è¾“å‡ºã€‚å—¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ08-éœ‡åŠ¨å¼€å…³","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C08-%E9%9C%87%E5%8A%A8%E5%BC%80%E5%85%B3/","content":"\n\nå‰è¨€ä»Šå¤©æŠ˜è…¾vimç¼–è¾‘å™¨æŠ˜è…¾äº†è€ä¹…ï¼Œæˆ‘åªæ˜¯æƒ³å®ç°åœ¨vimç¼–è¾‘å™¨ä¸­å¯ä»¥å¤åˆ¶ä»£ç åˆ°windowsç”µè„‘ä¸‹ï¼Œæ–¹ä¾¿æˆ‘å†™åšå®¢ï¼Œä½†æ˜¯å’‹å¼„éƒ½æä¸å®šï¼Œæ”¾å¼ƒäº†ï¼Œè¿˜æ˜¯ç”¨æ ‘è“æ´¾çš„ç³»ç»Ÿæ¥å¤åˆ¶å§\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næŒ¯åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šåŒè‰²LEDæ¨¡å—ï¼›ä¸‹ï¼šéœ‡åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—\næŒ¯åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—å’Œå€¾æ–œä¼ æ„Ÿå™¨æ¨¡å—å¾ˆåƒï¼Œéƒ½æ˜¯é€šè¿‡ç‰©ç†ç»“æ„æ¥åˆ¤æ–­å½“å‰çš„çŠ¶æ€ã€‚è€Œä¸”å®ƒä¹Ÿæœ‰PWR-LEDå’ŒDO-LEDä¸¤ä¸ªæŒ‡ç¤ºç¯\n\n2.å®éªŒåŸç†æŒ¯åŠ¨å¼€å…³ä¼ æ„Ÿå™¨ç”¨çš„æ˜¯å¸¸é—­å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨ï¼Œå¯ç”¨äºè·Ÿè¸ªæŒ¯åŠ¨è§¦å‘ä½œç”¨ï¼Œå¦‚é˜²ç›—æŠ¥è­¦ï¼Œåœ°éœ‡æŠ¥è­¦å’Œæ™ºèƒ½å°è½¦ã€‚ä¸å¸¸å¼€å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨ç›¸æ¯”ï¼Œå¸¸é—­å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨è§¦å‘æ—¶é—´é•¿ï¼Œå¯ä»¥ç”¨äºé©±åŠ¨ç»§ç”µå™¨æ¨¡å—\n\nè¯¥æ¨¡å—é‡‡ç”¨å¸¸å¼€é«˜çµæ•åº¦éœ‡åŠ¨å¼€å…³ã€‚å¼€å…³åœ¨é™æ­¢æ™‚ä¸ºå¼€è·¯OFFçŠ¶æ€ï¼Œå½“å—åˆ°å¤–åŠ›ç¢°è§¦è€Œè¾¾åˆ°ç›¸åº”éœ‡åŠ¨åŠ›æ—¶ï¼Œæˆ–ç§»åŠ¨é€Ÿåº¦è¾¾åˆ°é€‚å½“ç¦»(å)å¿ƒåŠ›æ—¶ï¼Œå¯¼ç”µæ¥è„šä¼šäº§ç”Ÿç¬é—´å¯¼é€šå‘ˆç¬é—´ONçŠ¶æ€ï¼›å½“å¤–åŠ›æ¶ˆå¤±æ™‚ï¼Œå¼€å…³æ¢å¤ä¸ºå¼€è·¯OFFçŠ¶æ€ã€‚å¯ç”¨äºå„ç§éœ‡åŠ¨è§¦å‘ä½œç”¨ï¼ŒæŠ¥ç›—æŠ¥è­¦ï¼Œæ™ºèƒ½å°è½¦ï¼Œç”µå­ç§¯æœ¨ç­‰ã€‚ä¼ æ„Ÿå™¨ç‰¹è®¾M3å›ºå®šå®‰è£…å­”ï¼Œè°ƒèŠ‚æ–¹å‘ä¸å›ºå®šæ–¹ä¾¿æ˜“ç”¨ï¼Œä½¿ç”¨å®½ç”µå‹LM393æ¯”è¾ƒå™¨ï¼Œä¿¡å·å¹²å‡€ï¼Œæ³¢å½¢å¥½ï¼Œé©±åŠ¨èƒ½åŠ›å¼ºï¼Œè¶…è¿‡15mAï¼Œé…å¯è°ƒç²¾å¯†ç”µä½å™¨è°ƒèŠ‚çµæ•åº¦ã€‚åœ¨æ­¤å®éªŒä¸­ï¼Œå°†åŒè‰²LEDæ¨¡å—è¿æ¥åˆ°Raspberry Piä½œä¸ºæŒ‡ç¤ºä½œç”¨ã€‚æ•²å‡»æˆ–æ•²å‡»æŒ¯åŠ¨ä¼ æ„Ÿå™¨æ—¶ï¼Œå®ƒå°†æ‰“å¼€åŒè‰²LEDå°†é—ªçƒçº¢è‰²ã€‚å†æ¬¡ç‚¹å‡»å®ƒï¼ŒLEDå°†å˜ä¸ºç»¿è‰²-æ¯æ¬¡æ•²å‡»æˆ–æ•²å‡»ä¸¤ç§é¢œè‰²ä¹‹é—´äº¤æ›¿é—ªçƒã€‚\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næŒ¯åŠ¨å¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nDo\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\nå› ä¸ºæ¥å£å’Œå€¾æ–œå¼€å…³ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æ¥çº¿æ–¹å¼ä¹Ÿæ˜¯ä¸€æ ·çš„\n\nå®ç‰©æ¥çº¿å›¾è¿™é‡Œå°±ä¸æ”¾äº†ï¼Œå’Œå€¾æ–œå¼€å…³ä¸åŒçš„æ˜¯ï¼ŒæŒ¯åŠ¨å¼€å…³åœ¨æ¥ä¸Šåï¼Œä¸¤ä¸ªæŒ‡ç¤ºç¯éƒ½ä¼šäº®èµ·ï¼ŒæŒ¯åŠ¨è¯¥ä¼ æ„Ÿå™¨ï¼ŒDO-LEDä¼šé—ªåŠ¨\n\n\n3.ä»£ç ç¤ºä¾‹è€æ ·å­ï¼Œç»™å‡ºCè¯­è¨€çš„ä»£ç ç¤ºä¾‹\n\nè¿™é‡Œçš„wiringPiåº“å‡½æ•°åœ¨ä¸Šä¸¤æ¬¡çš„å®éªŒä¸­éƒ½æœ‰ä½¿ç”¨è¿‡ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹å®éªŒ6é‡Œçš„è§£é‡Š\n\n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_VibratePin\t0   // éœ‡åŠ¨ä¼ æ„Ÿå™¨#define makerobo_Rpin\t\t1   // çº¢è‰²LED PIN #define makerobo_Gpin\t\t2   // ç»¿è‰²LED PINint clb_tmp = 0;//å…¨å±€å˜é‡ç”¨äºæ¯”è¾ƒ//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(int color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (0 == color)             //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (1 == color)       //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Makerobo Double color LED Error\\n&quot;); // åŒè‰²LEDé”™è¯¯&#125;// æ‰“å°ä¿¡æ¯,æ‰“å°å‡ºæŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„çŠ¶æ€\tvoid makerobo_Print(int x)&#123;\tif (x != clb_tmp)\t&#123;\t\tif (x == 0)\t\t\tprintf(&quot;...Makerobo ON\\n&quot;);\t\tif (x == 1)\t\t\tprintf(&quot;Makerobo OFF..\\n&quot;);\t\tclb_tmp = x;//å¤ä½x\t&#125;&#125;int main()&#123;\tint clb_status = 0;  //çŠ¶æ€å€¼\tint clb_tmp = 0;     //æ¯”è¾ƒå€¼\tint clb_value = 1;   //å½“å‰å€¼\t//wiringPiåˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //æŒ¯åŠ¨ä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_VibratePin, INPUT);\t\twhile(1)&#123;\t\tclb_value = digitalRead(makerobo_VibratePin); //è·å–æŒ¯åŠ¨ä¼ æ„Ÿçš„å€¼\t\tif (clb_tmp != clb_value)\t\t&#123;\t//æŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„è¾“å‡ºå€¼å‘ç”Ÿæ”¹å˜\t\t\tclb_status ++;   //æŒ¯åŠ¨ä¼ æ„Ÿå™¨çŠ¶æ€åŠ 1\t\t\tif (clb_status &gt; 1)\t\t\t&#123;\t\t\t\t\t\t\t\tclb_status = 0; //çŠ¶æ€å‘ç”Ÿæ”¹å˜åˆ¤æ–­ï¼Œå¦‚æœå˜æˆ2äº†å¤ä½æˆ0\t\t\t&#125;\t\t\tdouble_colorLED(clb_status);  //æ§åˆ¶åŒè‰²LEDæ¨¡å—\t\t\tmakerobo_Print(clb_status);   //æ‰“å°å‡ºçŠ¶æ€\t\t\tdelay(1000);                  //å»¶æ—¶1s\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1ä»£ç æ€è·¯è®²è§£clb_valueæ¥æ”¶æŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„è¿”å›å€¼ï¼Œæ¯æ¬¡æŒ¯åŠ¨ï¼Œè¿”å›å€¼éƒ½ä¼šæ”¹å˜\n\nvalueåˆå§‹å€¼ä¸º1ï¼ŒæŒ¯åŠ¨æ—¶ï¼Œæ¥æ”¶äº†è¿”å›å€¼ä¸º0ï¼Œå’Œtmpä¸åŒï¼Œæ‰€ä»¥status++ï¼ŒåŒè‰²LEDçš„é¢œè‰²æ”¹å˜\nå¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°æŒ¯åŠ¨ï¼Œè¿”å›å€¼ä¸º1ï¼Œå’Œtmpç›¸åŒï¼Œstatusä¸æ”¹å˜ï¼ŒåŒè‰²LEDçš„é¢œè‰²ä¸å˜\n\nå‚æ•°clb_tmpé—®é¢˜void makerobo_Print(int x)å‡½æ•°ä¸­è°ƒç”¨çš„å…¶å®æ˜¯å…¨å±€å˜é‡ä¸‹çš„clb_tmp\nè€Œmainå‡½æ•°ä¸­è°ƒç”¨çš„æ˜¯int clb_tmp = 0;//æ¯”è¾ƒå€¼è¿™ä¸ªå•ç‹¬å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå’Œå…¨å±€ä¸­çš„tmpæ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥makerobo_Printå‡½æ•°ä¸­å¯¹clb_tmpå‡½æ•°çš„æ“ä½œä¸å½±å“mainä¸­å’ŒçŠ¶æ€ç çš„æ¯”è¾ƒ\nä¸ºäº†ä¸ææ··å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ï¼Œå»ºè®®å°†mainå‡½æ•°ä¸­çš„tmpæ›´åä¸ºclb_tmp1\n\n3.2linuxè¿è¡Œä»£ç gcc -Wall 08vibrationswitch.c -o TEST -lwiringPi\n\n\næ¯æ¬¡æ™ƒåŠ¨ä¼ æ„Ÿå™¨ï¼ŒåŒè‰²LEDå°±ä¼šå˜è‰²ï¼Œå±å¹•ä¸Šæ‰“å°å‡ºonå’Œoffï¼ˆæ¯æ™ƒåŠ¨ä¸€æ¬¡ï¼Œæ‰“å°ä¸€æ¬¡ï¼‰\næŒ‰CTRL+Cç»ˆæ­¢ç¨‹åºè¿è¡Œ\n\nå’Œå€¾æ–œå¼€å…³çš„å®æ—¶æ”¹å˜ä¸åŒï¼ŒæŒ¯åŠ¨å¼€å…³çš„æ”¹å˜ä¸æ˜¯å®æ—¶çš„ï¼Œè€Œæ˜¯éœ€è¦æ–°çš„æŒ¯åŠ¨æ¥è§¦å‘å®ƒï¼ˆç±»ä¼¼ä¸€ä¸ªæŒ‰é’®ï¼‰\n\nå‡è®¾æˆ‘ä»¬è¦ç”¨å®ƒæ¥åšä¸€ä¸ªæŠ¥è­¦è£…ç½®ï¼Œå‡è®¾åœ¨æŸä¸€æ®µæ—¶é—´å†…æ£€æµ‹åˆ°æŒ¯åŠ¨çŠ¶æ€å¤šæ¬¡æ”¹å˜ï¼Œå°±å¯ä»¥å‘å‡ºä¿¡å·æŠ¥è­¦ï¼Œä»£è¡¨ä½ çš„é—¨ï¼ˆæˆ–è€…æŸä¸ªä¸œè¥¿ï¼‰è¢«ç§»åŠ¨äº†\n\n\nç»“è¯­è¿™æ¬¡å®éªŒçš„ä»£ç æ¯”ä¸Šä¸€æ¬¡çš„å€¾æ–œå¼€å…³ç›¸æ¯”ï¼Œæ›´å¤æ‚äº†ä¸€äº›ã€‚å¸Œæœ›æˆ‘çš„è®²è§£å¯¹ä½ æœ‰å¸®åŠ©ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ09-èœ‚é¸£å™¨æ¨¡å—","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C09-%E8%9C%82%E9%B8%A3%E5%99%A8%E6%A8%A1%E5%9D%97/","content":"\n\nå‰è¨€æœ€è¿‘å­¦ä¹ æ¿€æƒ…ä¸æ˜¯å¾ˆé«˜ï¼Œè™½ç„¶ä»£ç å­¦äº†å¾ˆå¤šï¼Œä½†æ˜¯é«˜æ•°å’Œå¤§ç‰©ç›´æ¥æ‘†çƒ‚äº†ï¼Œå‘œå‘œå‘œå‘œ\n\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næœ‰æºèœ‚é¸£å™¨\næ— æºèœ‚é¸£å™¨\nä¸€å †è·³çº¿\n\n\nä¸‹ï¼šæœ‰æºèœ‚é¸£å™¨ï¼›ä¸Šï¼šæ— æºèœ‚é¸£å™¨\nå®ƒä»¬çš„å¤–è§‚å‡ ä¹ä¸€æ ·ã€‚å¦‚æœæ˜¯æ²¡æœ‰è£…é…å¥½çš„å•ç‹¬æ¨¡å—ï¼Œæ— æºèœ‚é¸£å™¨åº•éƒ¨çš„ç”µè·¯å¼•è„šå¸¦æœ‰ç»¿è‰²pcbï¼Œè€Œæœ‰æºèœ‚é¸£å™¨åº•éƒ¨æ˜¯é»‘è‰²å¡‘æ–™å¤–å£³ã€‚å› ä¸ºæ¨¡å—å·²ç»ç„Šæ¥åˆ°äº†ç”µè·¯æ¿ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ä¸åˆ°å®ƒä»¬çš„åº•éƒ¨å¼•è„šã€‚\n\n2.å®éªŒåŸç†èœ‚é¸£å™¨å±äºå£°éŸ³æ¨¡å—ã€‚æœ‰æºèœ‚é¸£å™¨å¸¸ç”¨äºå‘å‡ºå•ä¸€çš„æç¤ºæ€§æŠ¥è­¦å£°éŸ³ï¼Œæ²¡æœ‰é¢‘ç‡å˜åŒ–ï¼Œå†…ç½®æŒ¯è¡å™¨ï¼›æ— æºèœ‚é¸£å™¨çš„é©±åŠ¨æ–¹å¼ä¸ºé¢‘ç‡è„‰å†²é©±åŠ¨ï¼Œå¯ä»¥å‘å‡ºå„ç§æœ‰é¢‘ç‡çš„ä¿¡å·å£°éŸ³ã€‚\n\næœ‰æºèœ‚é¸£å™¨å†…éƒ¨æœ‰ä¸€ä¸ªç®€å•çš„æŒ¯è¡ç”µè·¯ï¼Œèƒ½å°†æ’å®šçš„ç›´æµç”µè½¬åŒ–æˆä¸€å®šé¢‘ç‡çš„è„‰å†²ä¿¡å·ï¼Œç¨‹åºæ§åˆ¶æ–¹ä¾¿ä½†é¢‘ç‡å›ºå®šï¼Œå•ç‰‡æœºä¸€ä¸ªé«˜ä½ç”µå¹³å°±å¯ä»¥è®©å…¶å‘å‡ºå£°éŸ³ã€‚\næ— æºèœ‚é¸£å™¨å’Œç”µç£æ‰¬å£°å™¨ä¸€æ ·æ²¡æœ‰å†…éƒ¨é©±åŠ¨ç”µè·¯ï¼Œéœ€è¦æ¥åœ¨éŸ³é¢‘è¾“å‡ºç”µè·¯ä¸­æ‰èƒ½å‘å£°ã€‚å¦‚æœç»™ç›´æµä¿¡å·æ˜¯ä¸å“çš„ï¼Œå› ä¸ºç£è·¯æ’å®šï¼Œå¿…é¡»ç”¨2K-5Kçš„æ–¹æ³¢å»é©±åŠ¨å®ƒã€‚å£°éŸ³é¢‘ç‡å¯æ§ï¼Œå¯ä»¥åšå‡ºâ€œå¤šæ¥ç±³å‘ç´¢æ‹‰è¥¿â€çš„æ•ˆæœã€‚\nåœ¨ä¸€äº›ç‰¹ä¾‹ä¸­ï¼Œå¯ä»¥å’ŒLEDå¤ç”¨ä¸€ä¸ªæ§åˆ¶å£ã€‚\n\nå®ƒä»¬çš„ç”µè·¯åŸç†å›¾æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ§åˆ¶æ–¹å¼ä¸åŒ\n\nå› ä¸ºæœ‰ä¸¤ä¸ªä¸åŒçš„æ¨¡å—ï¼Œæ‰€ä»¥ä¸‹æ–‡å°†åˆ†å¼€è®²è§£\n3.æœ‰æºèœ‚é¸£å™¨æ¨¡å—æœ‰æºèœ‚é¸£å™¨æœ‰å†…ç½®æŒ¯è¡æºï¼Œåªéœ€è¦æ¥çº¿å°±ä¼šå‘å‡ºèœ‚é¸£å£°ï¼Œä½†å®ƒçš„å‘å£°æ˜¯å›ºå®šé¢‘ç‡çš„ã€‚è¿™ç‚¹å’Œå†…ç½®äº†æ§åˆ¶èŠ¯ç‰‡çš„ä¸ƒå½©LEDæ¨¡å—å¾ˆç›¸ä¼¼ã€‚\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næœ‰æºèœ‚é¸£å™¨\n\n\n\nGPIO 0\nGPIO 17\nI&#x2F;O\n\n\n3.3V\n3.3V\nVCC\n\n\nGND\nGND\nGND\n\n\n\nåœ¨è¿æ¥ä¸Šç”µè·¯åï¼Œæœ‰æºèœ‚é¸£å™¨å°±ä¼šå“”å“”å“”å«ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶è¾“å…¥ç”µå¹³çš„é«˜ä½ï¼Œæ¥æ§åˆ¶å®ƒçš„å¼€å…³\n3.1ä»£ç ç¤ºä¾‹//æœ‰æºèœ‚é¸£å™¨#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_BuzzerPin  0  // æœ‰æºèœ‚é¸£å™¨ç®¡è„šå®šä¹‰int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(wiringPiSetup() == -1)&#123;         printf(&quot;setup wiringPi failed !&quot;);        return 1;      &#125;       pinMode(makerobo_BuzzerPin,  OUTPUT); // æœ‰æºèœ‚é¸£å™¨è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼    // æ— é™å¾ªç¯    while(1)    &#123;               digitalWrite(makerobo_BuzzerPin, LOW);        \t// èœ‚é¸£å™¨ä¸ºä½ç”µå¹³è§¦å‘ï¼Œæ‰€ä»¥ä½¿èƒ½èœ‚é¸£å™¨è®©å…¶å‘å£°            delay(100);           // å»¶æ—¶100ms            digitalWrite(makerobo_BuzzerPin, HIGH);         \t// èœ‚é¸£å™¨è®¾ç½®ä¸ºé«˜ç”µå¹³ï¼Œå…³é—­èœ‚é¸£å™¨            delay(100);           // å»¶æ—¶100ms    &#125;       return 0;&#125;\n\n3.2ç¼–è¯‘ä»£ç ç¬¬ä¸€æ¬¡ç¼–è¯‘è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™ã€‚æ„æ€å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯wiringPiåº“æ²¡æœ‰è¿æ¥ä¸Šï¼Œå› ä¸ºæˆ‘å¿˜è®°åœ¨æœ€æœ«å°¾åŠ ä¸Š-lwiringPiäº†\n\næ­£ç¡®çš„ç¼–è¯‘æŒ‡ä»¤å¦‚ä¸‹\ngcc 09activebuzzer.c -o ACTIVE -lwiringPi\n\nç¼–è¯‘æˆåŠŸ\n\n3.3å®éªŒæ•ˆæœæ”¹å˜delayå‡½æ•°çš„å‚æ•°ï¼Œå°±èƒ½å¬åˆ°èœ‚é¸£å™¨å£°éŸ³çš„å˜æ¢ã€‚è®¾ç½®æˆdelay(1000)å¯ä»¥å»¶é•¿å£°éŸ³æ•ˆæœ\n\nç¬¬ä¸€æ¬¡æ¥çº¿çš„æ—¶å€™ï¼Œæˆ‘ä¸å°å¿ƒæŠŠå®ƒæ¥åœ¨äº†5vçš„ç®¡è„šä¸Šï¼Œå¯¼è‡´è¾“å…¥é«˜ç”µå¹³å¹¶ä¸èƒ½å…³é—­èœ‚é¸£å™¨ï¼Œè€Œæ˜¯è¿‘ä¼¼äºæ”¹å˜äº†èœ‚é¸£å™¨çš„é¢‘ç‡ï¼ˆæˆ‘å¬ä¸å‡ºæ˜¯éŸ³é‡å˜äº†è¿˜æ˜¯é¢‘ç‡å˜äº†ï¼‰\nä¿®æ­£é”™è¯¯ï¼Œæ¥çº¿åœ¨3.3vç®¡è„šä¸Šåï¼Œæœ‰æºèœ‚é¸£å™¨å¯ä»¥æ­£å¸¸å…³é—­\n\næ€»æ‰€å‘¨çŸ¥ï¼Œå›¾ç‰‡æ˜¯æ²¡æœ‰å£°éŸ³çš„ã€‚æ‰€ä»¥æˆ‘æŠŠä¸¤ä¸ªæƒ…å†µçš„å½•éŸ³æ–‡ä»¶éƒ½æ”¾åœ¨äº†giteeä»“åº“ğŸ‘‰ä¼ é€é—¨\n\n4.æ— æºèœ‚é¸£å™¨æ— æºèœ‚é¸£å™¨å¯ä»¥é€šè¿‡è¾“å…¥pwmæ¥æ§åˆ¶å‘å£°é¢‘ç‡\nå®ƒçš„æ¥çº¿æ–¹å¼å’Œæœ‰æºèœ‚é¸£å™¨ç›¸åŒ\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næ— æºèœ‚é¸£å™¨\n\n\n\nGPIO 0\nGPIO 17\nI&#x2F;O\n\n\n3.3V\n3.3V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n4.1ä»£ç ç¤ºä¾‹//æ— æºèœ‚é¸£å™¨#include &lt;wiringPi.h&gt;#include &lt;softTone.h&gt;#include &lt;stdio.h&gt;#define makerobo_BuzPin    0 // æœ‰æºèœ‚é¸£å™¨ç®¡è„šå®šä¹‰// éŸ³è°±å®šä¹‰// ä½CéŸ³ç¬¦çš„é¢‘ç‡#define  Tone_CL1  131#define  Tone_CL2  147#define  Tone_CL3  165#define  Tone_CL4  175#define  Tone_CL5  196#define  Tone_CL6  221#define  Tone_CL7  248// ä¸­CéŸ³çš„é¢‘ç‡#define  Tone_CM1  262#define  Tone_CM2  294#define  Tone_CM3  330#define  Tone_CM4  350#define  Tone_CM5  393#define  Tone_CM6  441#define  Tone_CM7  495// é«˜CéŸ³ç¬¦çš„é¢‘ç‡#define  Tone_CH1  525#define  Tone_CH2  589#define  Tone_CH3  661#define  Tone_CH4  700#define  Tone_CH5  786#define  Tone_CH6  882#define  Tone_CH7  990// ç¬¬ä¸€é¦–æ­ŒéŸ³è°±int makerobo_song_1[] = &#123;Tone_CM3,Tone_CM5,Tone_CM6,Tone_CM3,Tone_CM2,Tone_CM3,Tone_CM5,Tone_CM6,Tone_CH1,Tone_CM6,Tone_CM5,Tone_CM1,Tone_CM3,Tone_CM2,                         Tone_CM2,Tone_CM3,Tone_CM5,Tone_CM2,Tone_CM3,Tone_CM3,Tone_CL6,Tone_CL6,Tone_CL6,Tone_CM1,Tone_CM2,Tone_CM3,Tone_CM2,Tone_CL7,                         Tone_CL6,Tone_CM1,Tone_CL5&#125;;// ç¬¬ä¸€é¦–æ­ŒèŠ‚æ‹int makerobo_beat_1[] = &#123;1,1,3,1,1,3,1,1,1,1,1,1,1,1,3,1,1,3,1,1,1,1,1,1,1,2,1,1,                         1,1,1,1,1,1,3&#125;;// ç¬¬äºŒé¦–æ­ŒéŸ³è°±int makerobo_song_2[] = &#123;Tone_CM1,Tone_CM1,Tone_CM1,Tone_CL5,Tone_CM3,Tone_CM3,Tone_CM3,Tone_CM1,Tone_CM1,Tone_CM3,Tone_CM5,Tone_CM5,Tone_CM4,Tone_CM3,Tone_CM2,                         Tone_CM2,Tone_CM3,Tone_CM4,Tone_CM4,Tone_CM3,Tone_CM2,Tone_CM3,Tone_CM1,Tone_CM1,Tone_CM3,Tone_CM2,Tone_CL5,Tone_CL7,Tone_CM2,Tone_CM1                        &#125;;// ç¬¬äºŒé¦–æ­ŒèŠ‚æ‹int makerobo_beat_2[] = &#123;1,1,1,3,1,1,1,3,1,1,1,1,1,1,3,1,1,1,2,1,1,1,3,1,1,1,3,3,2,3&#125;;int main()&#123;    int i;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(wiringPiSetup() == -1)&#123;        printf(&quot;makerobo setup wiringPi failed !&quot;);        return 1;    &#125;    //è½¯ä»¶æ¨¡æ‹ŸToneåº“åˆå§‹åŒ–è¯†åˆ«ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(softToneCreate(makerobo_BuzPin) == -1)&#123;        printf(&quot;makerobo setup softTone failed !&quot;);        return 1;    &#125;    while(1)&#123;        printf(&quot;makerobo music is being played...\\n&quot;);  // å¼€å§‹æ’­æ”¾éŸ³ä¹        // æ’­æ”¾ç¬¬ä¸€é¦–æ­ŒéŸ³ä¹        for(i=0;i&lt;sizeof(makerobo_song_1)/4;i++)&#123;            softToneWrite(makerobo_BuzPin, makerobo_song_1[i]);             //ç¬¬ä¸€é¦–æ­ŒéŸ³è°±            delay(makerobo_beat_1[i] * 500);   //ç¬¬ä¸€é¦–æ­ŒèŠ‚æ‹        &#125;        // æ’­æ”¾ç¬¬äºŒé¦–æ­ŒéŸ³ä¹        for(i=0;i&lt;sizeof(makerobo_song_2)/4;i++)&#123;            softToneWrite(makerobo_BuzPin, makerobo_song_2[i]);             //ç¬¬äºŒé¦–æ­ŒéŸ³è°±            delay(makerobo_beat_2[i] * 500);     //ç¬¬äºŒé¦–æ­ŒèŠ‚æ‹        &#125;    &#125;    return 0;&#125;\n\néŸ³ç¬¦é¢‘ç‡å¯¹ç…§è¡¨\n\néŸ³é˜¶ â€ƒâ€ƒéŸ³é˜¶æ˜¯éŸ³ä¹å¿…ä¸å¯å°‘çš„è¦ç´ ï¼Œä¸»è¦ç”±å£°éŸ³çš„é¢‘ç‡å†³å®šã€‚é€šè¿‡ç»™èœ‚é¸£å™¨ä¸åŒé¢‘ç‡çš„éŸ³é¢‘è„‰å†²ï¼Œå¯ä»¥äº§ç”Ÿä¸åŒçš„éŸ³é˜¶ï¼Œè€Œè¦äº§ç”ŸæŸé¢‘ç‡çš„éŸ³é¢‘è„‰å†²ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯ä»¥è¯¥éŸ³é¢‘çš„é¢‘ç‡é™¤ä»¥2çš„å€¼ï¼Œå‡½æ•°ä½¿ç”¨è¯¥å€¼ä¸ºå‚æ•°æ”¹å˜èœ‚é¸£å™¨è¾“å…¥æ–¹æ³¢ä¿¡å·çš„é¢‘ç‡ï¼Œèœ‚é¸£å™¨ä¸Šå°±å¯å‘å‡ºè¯¥é¢‘ç‡çš„å£°éŸ³ã€‚ â€ƒâ€ƒè‹¥æƒ³æ”¹å˜éŸ³é˜¶ï¼Œåªéœ€è¦æ”¹å˜é¢‘ç‡å³å¯ã€‚ä¸‹è¡¨ä¸ºå„éŸ³è°ƒéŸ³ç¬¦é¢‘ç‡å¯¹ç…§è¡¨ï¼Œæ®æ­¤å¯äº§ç”Ÿä¸åŒéŸ³é˜¶çš„éŸ³ç¬¦ã€‚â€œ#â€è¡¨ç¤ºåŠéŸ³ï¼Œç”¨äºä¸Šå‡æˆ–ä¸‹é™åŠä¸ªéŸ³ï¼Œä¹˜ä»¥2å°±æå‡è¯¥å£°éŸ³ä¸€ä¸ª8åº¦éŸ³é˜¶ï¼Œå‡åŠåˆ™é™ä¸€ä¸ª8åº¦ã€‚\n\nèŠ‚æ‹ â€ƒâ€ƒè‹¥è¦æ„æˆéŸ³ä¹ï¼Œå…‰æœ‰éŸ³é˜¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦èŠ‚æ‹ï¼Œä¹Ÿå°±æ˜¯éŸ³ç¬¦æŒç»­æ—¶é—´çš„é•¿çŸ­ï¼Œä¸€èˆ¬ç”¨æ‹æ•°è¡¨ç¤ºã€‚è‡³äº1æ‹æ˜¯å¤šå°‘ç§’ï¼Œæ²¡æœ‰ä¸¥æ ¼çš„è§„å®šï¼Œåªè¦èŠ‚æ‹é€‚å®œï¼Œå£°éŸ³æ‚¦è€³å³å¯ã€‚å‡å¦‚æŸé¦–æ­Œæ›²çš„èŠ‚å¥æ˜¯æ¯åˆ†é’Ÿ120æ‹ï¼Œé‚£ä¹ˆ1æ‹ä¸º0.5sï¼Œ1&#x2F;4æ‹ä¸º0.125sï¼Œä»¥æ­¤ç±»æ¨å¯å¾—åˆ°å…¶ä»–èŠ‚æ‹å¯¹åº”çš„æ—¶é•¿ã€‚è¿™æ ·ï¼Œåˆ©ç”¨ä¸åŒçš„é¢‘ç‡ï¼ŒåŠ ä¸Šä¸æ‹æ•°å¯¹åº”çš„å»¶æ—¶ï¼Œå°±æ„æˆäº†ä¹æ›²ã€‚\n\n\nä»¥ä¸Šå¼•ç”¨è‡ªè¿™ä½å¤§ä½¬çš„åšå®¢ğŸ‘‰åŸæ–‡é“¾æ¥\n\næˆ‘æ‰¾æ¥äº†ä¸€ç« éŸ³ç¬¦ä¸é¢‘ç‡çš„å¯¹ç…§è¡¨ï¼Œä¾›å¤§å®¶å‚è€ƒ\n\nsoftToneè½¯ä»¶éŸ³é¢‘åº“ç±»ä¼¼äºsoftPWMï¼ŒwiringPiåº“ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ªè½¯ä»¶éŸ³é¢‘åº“ï¼Œé€šè¿‡è¾“å…¥ä¸åŒçš„éŸ³é¢‘é¢‘ç‡æ¥ä½¿æ— æºèœ‚é¸£å™¨å‘å‡ºä¸åŒçš„å£°éŸ³\n\nè¿™é‡Œæåˆ°äº†éœ€è¦åœ¨ç¼–è¯‘æ–‡ä»¶æ—¶åŠ å…¥-lpthreadé€‰é¡¹ï¼Œå®æµ‹ä¸éœ€è¦åŠ å…¥ä¹Ÿå¯ä»¥æ­£å¸¸ç¼–è¯‘å‡ºæ¥\n4.2ç¼–è¯‘ä»£ç gcc 09passivebuzzer.c -o PASSIVE -lwiringPi\n\n\n4.3å®éªŒæ•ˆæœèœ‚é¸£å™¨çš„ç¡®å‘å‡ºäº†ä¸åŒé¢‘ç‡çš„å£°éŸ³ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰å®ƒå¹¶æ²¡æœ‰å”±æ­Œï¼Œå“ˆå“ˆğŸ˜‚\nå½•éŸ³æ–‡ä»¶ä¹Ÿæ”¾åœ¨giteeä»“åº“é‡Œé¢å•¦ï¼ğŸ‘‰ä¼ é€é—¨\n\nç»“è¯­è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨å’Œä¹‹å‰å®éªŒä¸­å‡ºç°çš„åŒè‰²LEDå¾ˆåƒï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯ä»¥å£°éŸ³ä¸ºåª’ä»‹ï¼Œä¸€ä¸ªæ˜¯ä»¥å…‰ä¸ºåª’ä»‹æ¥ä¼ é€’ä¿¡æ¯\næœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ10-å¹²ç°§ç®¡ä¼ æ„Ÿå™¨å®éªŒ","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C10-%E5%B9%B2%E7%B0%A7%E7%AE%A1%E4%BC%A0%E6%84%9F%E5%99%A8%E5%AE%9E%E9%AA%8C/","content":"\n\nå‰è¨€å¥½åƒæ²¡å•¥å¯ä»¥è¯´çš„ï¼Œç›´æ¥å¼€å§‹è¿›å…¥ä»Šå¤©çš„å®éªŒå†…å®¹å§\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nå¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LED\nè·³çº¿è‹¥å¹²\n\n\nä¸Šï¼šå¹²ç°§ç®¡ä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ä¹Ÿæ˜¯ä¸€ç§ç”¨äºæ£€æµ‹ç£åœºçš„ä¼ æ„Ÿå™¨ã€‚åœ¨å¸¸ç”¨çš„ç¨‹æ§äº¤æ¢æœºã€å¤å°æœºã€æ´—è¡£æœºã€ç”µå†°ç®±ã€ç…§ç›¸æœºã€æ¶ˆæ¯’ç¢—æŸœã€é—¨ç£ã€çª—ç£ã€ç”µç£ç»§ç”µå™¨ã€ç”µå­è¡¡å™¨ã€æ¶²ä½è®¡ã€ç…¤æ°”è¡¨ã€æ°´è¡¨ç­‰äº§å“ä¸­éƒ½å¾—åˆ°äº†å¾ˆå¥½çš„åº”ç”¨ã€‚\n\nä¸ªäººç†è§£ï¼šå¹²ç°§ç®¡ä¼ æ„Ÿå™¨çš„æ•ˆæœå’Œéœå°”å…ƒä»¶å¾ˆåƒï¼Œä¸è¿‡åè€…çš„ä½“ç§¯æ›´å°\nç¬”è®°æœ¬ç”µè„‘ä¸­å°±æœ‰éœå°”å…ƒä»¶ï¼Œç”¨äºæ£€æµ‹ç¬”è®°æœ¬å±å¹•çš„å¼€å…³ï¼Œå®ç°åˆç›–ä¼‘çœ çš„åŠŸèƒ½\n\n\nå¹²ç°§ç®¡æ˜¯å¹²å¼èˆŒç°§ç®¡çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§æœ‰è§¦ç‚¹çš„æ— æºç”µå­å¼€å…³å…ƒä»¶ï¼Œå…·æœ‰ç»“æ„ç®€å•ï¼Œä½“ç§¯å°ä¾¿äºæ§åˆ¶ç­‰ä¼˜ç‚¹ã€‚\n\nå…¶å¤–å£³ä¸€èˆ¬æ˜¯ä¸€æ ¹å¯†å°çš„ç»ç’ƒç®¡ï¼Œç®¡ä¸­è£…æœ‰ä¸¤ä¸ªé“è´¨çš„å¼¹æ€§ç°§ç‰‡ç”µæ¿ï¼Œè¿˜çŒæœ‰ä¸€ç§å«é‡‘å±çš„æƒ°æ€§æ°”ä½“ã€‚å¹³æ—¶ï¼Œç»ç’ƒç®¡ä¸­çš„ä¸¤ä¸ªç°§ç‰‡æ˜¯åˆ†å¼€çš„ã€‚\n\nå½“æœ‰ç£æ€§ç‰©è´¨é è¿‘ç»ç’ƒç®¡æ—¶ï¼Œåœ¨ç£åœºç£åŠ›çº¿çš„ä½œç”¨ä¸‹ï¼Œç®¡å†…çš„ä¸¤ä¸ªç°§ç‰‡è¢«ç£åŒ–è€Œäº’ç›¸å¸å¼•æ¥è§¦ï¼Œç°§ç‰‡å°±ä¼šå¸åˆåœ¨ä¸€èµ·ï¼Œä½¿ç»“ç‚¹æ‰€æ¥çš„ç”µè·¯è¿é€šã€‚\nå¤–ç£åŠ›æ¶ˆå¤±åï¼Œä¸¤ä¸ªç°§ç‰‡ç”±äºæœ¬èº«çš„å¼¹æ€§è€Œåˆ†å¼€ï¼Œçº¿è·¯ä¹Ÿå°±æ–­å¼€äº†ã€‚\nå› æ­¤ï¼Œä½œä¸ºä¸€ç§åˆ©ç”¨ç£åœºä¿¡å·æ¥æ§åˆ¶çš„çº¿è·¯å¼€å…³å™¨ä»¶ï¼Œå¹²ç°§ç®¡å¯ä»¥ä½œä¸ºä¼ æ„Ÿå™¨ç”¨äºè®¡æ•°ã€é™ä½ç­‰ç­‰åœºæ™¯(åœ¨å®‰é˜²ç³»ç»Ÿä¸­ä¸»è¦ç”¨äºé—¨ç£ã€çª—ç£çš„åˆ¶ä½œ)ï¼ŒåŒæ—¶è¿˜è¢«å¹¿æ³›ä½¿ç”¨äºå„ç§é€šä¿¡è®¾å¤‡ä¸­ã€‚\nåœ¨å®é™…è¿ç”¨ä¸­ï¼Œé€šå¸¸ç”¨ç£é“æ§åˆ¶è¿™ä¸¤æ ¹é‡‘å±ç‰‡çš„æ¥é€šä¸å¦ï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºâ€œç£æ§ç®¡â€\n\n\n2.1ç”µè·¯å›¾ç”µè·¯å›¾ä¸­Reed Switch(å¹²ç°§ç®¡)éƒ¨åˆ†ï¼Œå…¶å®å°±æ˜¯åŸç†éƒ¨åˆ†æåˆ°çš„å¯†å°ç»ç’ƒç®¡ï¼Œå†…éƒ¨æœ‰ä¸¤ä¸ªé“ç‰‡\n\nå½“å¹²ç°§ç®¡éƒ¨åˆ†æ¥è§¦åˆ°ç£æ€§ç‰©ä½“æ—¶ï¼Œä¸¤ä¸ªé“ç‰‡å¸é™„åœ¨ä¸€èµ·ï¼Œç”µè·¯æ¥é€šï¼ŒDOç®¡è„šè¾“å‡ºä½ç”µå¹³ã€‚åŒæ—¶ç”µè·¯æ¥é€šï¼ŒD2 LEDç‚¹äº®\næ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©ä½“ï¼Œä¸¤ä¸ªé“ç‰‡æ–­å¼€ï¼Œç”µè·¯æ–­å¼€ï¼ŒDOç®¡è„šç›´è¿VCCï¼Œè¾“å‡ºé«˜ç”µå¹³\n\n\n2.2æ¥çº¿å›¾ç±»ä¼¼è¿™ç§é€šè¿‡ä¸€ä¸ªä¼ æ„Ÿå™¨æ¨¡å—æ¥æ§åˆ¶åŒè‰²LEDçš„å®éªŒæˆ‘ä»¬å·²ç»åšè¿‡å¥½å‡ ä¸ªäº†ã€‚å®ƒä»¬çš„æ¥çº¿æ–¹å¼åŸºæœ¬æ˜¯ä¸€æ ·çš„ğŸ‘\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nå¹²ç°§ç®¡\n\n\n\nGPIO 0\nGPIO 17\nDO\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n\nå½“æ¥çº¿å®Œæ¯•åï¼ŒPWM-LEDæŒ‡ç¤ºç¯å¸¸äº®\n\nå³ä¾¿æ²¡æœ‰å¼€å¯æ§åˆ¶ç¨‹åºï¼Œå½“å¹²ç°§ç®¡æ£€æµ‹åˆ°ç£æ€§ç‰©ä½“æ—¶ï¼ŒDO-LEDæŒ‡ç¤ºç¯ä¹Ÿä¼šäº®èµ·\n\n3.ä»£ç ç¤ºä¾‹å’Œä¹‹å‰æ§åˆ¶åŒè‰²LEDçš„ä»£ç ç›¸åŒï¼Œæˆ‘ä»¬ä½¿ç”¨pinModeè®¾ç½®å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ä¸ºè¾“å…¥æ¨¡å¼ï¼Œå°†çº¢ç»¿LEDçš„ç®¡è„šéƒ½è®¾ç½®æˆè¾“å‡ºæ¨¡å¼\n\nå½“digitalReadæ£€æµ‹åˆ°0ï¼ˆä½ç”µå¹³ï¼‰æ—¶ï¼Œå°†åŒè‰²LEDè®¾ç½®ä¸ºçº¢è‰²\nå½“digitalReadæ£€æµ‹åˆ°1ï¼ˆé«˜ç”µå¹³ï¼‰æ—¶ï¼Œå°†åŒè‰²LEDè®¾ç½®æˆç»¿è‰²\n\n//å¹²ç°§ç®¡æ§åˆ¶åŒè‰²LEDå®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_ReedPin\t0 //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1 //çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2 //ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰// åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //çº¢è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //ç»¿è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (color == &quot;makeroboRED&quot;)       //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == &quot;makeroboGREEN&quot;) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Double color LED Error&quot;);&#125;int main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_ReedPin, INPUT);\tdouble_colorLED(&quot;makeroboGREEN&quot;);  //ç‚¹äº®ç»¿è‰²LEDæ¨¡å—\t\twhile(1)&#123;\t\t//å¹²ç°§ç®¡ä¼ æ„Ÿå™¨å»é™¤æŠ–åŠ¨å¤„ç†\t\tif(0 == digitalRead(makerobo_ReedPin))        &#123; //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\tdelay(10);       // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(0 == digitalRead(makerobo_ReedPin))&#123;\t\t\t\tdouble_colorLED(&quot;makeroboRED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Detected Magnetic Material!\\n&quot;);// æ‰“å°å‡ºæ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_ReedPin))        &#123; // å¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\tdelay(10);        // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(1 == digitalRead(makerobo_ReedPin))&#123;\t\t\t\twhile(!digitalRead(makerobo_ReedPin));\t\t\t\tdouble_colorLED(&quot;makeroboGREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Detected Magnetic Material!\\n&quot;); // æ‰“å°å‡ºæ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n\næ›´è¯¦ç»†çš„å‡½æ•°è§£é‡Šï¼Œå¯ä»¥å‚è€ƒä¹‹å‰å®éªŒ6~8çš„åšå®¢ğŸ‘‰ä¸“æ é“¾æ¥\n\n3.1ç¼–è¯‘ä»£ç åœ¨linuxæ§åˆ¶å°ä¸‹è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼Œç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 10reedswitch.c -o TEST -lwiringPi\n\n3.1.1 GCCä¸­-WallæŒ‡ä»¤çš„ä½œç”¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™å°±æ²¡æœ‰ä½¿ç”¨-WallæŒ‡ä»¤ï¼Œä½†ç¨‹åºä¾æ—§ç¼–è¯‘æˆåŠŸäº†\nå®é™…ä¸Šï¼Œ-WallæŒ‡ä»¤çš„ä½œç”¨æ˜¯è®©GCCç¼–è¯‘å™¨æ˜¾ç¤ºç¨‹åºçš„è­¦å‘Š\n\nç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ£€æŸ¥å‡ºé”™è¯¯æ—¶ï¼Œä¼šç»ˆæ­¢ç¼–è¯‘\nç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ£€æŸ¥å‡ºè­¦å‘Šæ—¶ï¼Œä¾æ—§èƒ½ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\n\nwindowsç³»ç»Ÿä¸­çš„VSç¼–è¯‘å™¨ä¸‹ï¼Œä¹Ÿæœ‰é”™è¯¯&#x2F;è­¦å‘Šä¸¤ç§æŠ¥é”™æ–¹å¼\n\nä¹‹å‰æˆ‘å°±æ²¡æœ‰å¼„æ˜ç™½Linuxç¯å¢ƒä¸‹è¿™ä¸¤ä¸ªä¹‹é—´çš„åŒºåˆ«ï¼Œå¯¼è‡´æˆ‘è®¤ä¸ºgccç¼–è¯‘å™¨ä¸­ä¸æ”¯æŒç”¨==ç›´æ¥æ¯”è¾ƒå¸¸é‡å­—ç¬¦ä¸²ï¼ˆç„¶åå°±æŠŠå®ƒæ”¹æˆäº†strcmpï¼Œå½“ç„¶è¿™æ ·ä¹Ÿæ²¡é”™å“ˆï¼‰\n\nå¦‚æœæˆ‘ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å»æ‰-WallæŒ‡ä»¤ï¼Œå°±ä¸ä¼šæ˜¾ç¤ºè¿™ä¸¤ä¸ªè­¦å‘Š\n\n\næ›´å¤šå…³äº-WallæŒ‡ä»¤çš„çŸ¥è¯†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ä½dalaoçš„åšå®¢å­¦ä¹ ä¸€äºŒğŸ‘‰ä¼ é€é—¨\n\n\n3.2å®éªŒæ•ˆæœ./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼ŒæŸ¥çœ‹å®éªŒç»“æœ\n\næ£€æµ‹åˆ°ç£æ€§ç‰©è´¨æ—¶ï¼Œå±å¹•æ‰“å°Detected Magnetic Material!\næ²¡æœ‰æ£€æµ‹åˆ°çš„æ—¶å€™ï¼Œæ‰“å°No Detected Magnetic Material!\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¸Œæœ›å¯¹ä½ å­¦ä¹ æ ‘è“æ´¾çš„æ“ä½œæœ‰ä¸€äº›å¸®åŠ©\n\nå­¦æ ¡é«˜æ•°å’Œå¤§ç‰©æ¬ ä¸‹çš„å­¦ä¹ å€ºç»ˆäºè¡¥ä¸Šäº†ï¼Œå¯ä»¥æ‘¸ğŸŸäº†\n\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ11-Uå‹å…‰ç‚¹ä¼ æ„Ÿå™¨","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C11-U%E5%9E%8B%E5%85%89%E7%94%B5%E4%BC%A0%E6%84%9F%E5%99%A8/","content":"\n\nå‰è¨€æœ¬ç¯‡å®éªŒå’Œä¸Šç¯‡åšå®¢çš„å®éªŒç›¸ä¼¼ï¼Œæˆ‘ä»¬è¦å­¦ä¹ ç”¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ¥æ§åˆ¶åŒè‰²LED\n\nè¿™éƒ½æ˜¯åŸºç¡€å®éªŒä¸­ä¸å¯æˆ–ç¼ºçš„å†…å®¹ï¼Œå› ä¸ºåç»­æˆ‘ä»¬éœ€è¦å­¦ä¼šäº¤å‰ä½¿ç”¨ä¸åŒçš„ä¼ æ„Ÿå™¨æ¥æ§åˆ¶æ›´å¤æ‚çš„ç”µè·¯ã€‚é‚£äº›æ‰æ˜¯å­¦ä¹ æ ‘è“æ´¾åŸºç¡€å®éªŒçœŸæ­£çš„æ„ä¹‰\nä¸ç®¡æ€æ ·ï¼Œè¿˜æ˜¯ç»§ç»­åŠªåŠ›å§ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nUå‹å…‰ç”µä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šUå‹å…‰ç”µä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ˜¯ä¸€ç§çº¢å¤–æ„Ÿåº”å…‰ç‚¹äº§å“ã€‚å…¶æœ‰çº¢å¤–å‘å°„ç®¡å’Œæ¥æ”¶ç®¡ï¼Œåˆ†åˆ«ä½äºUå‹æ§½çš„ä¸¤ä¾§ï¼Œä»¥æ­¤å½¢æˆä¸€å…‰è½´ã€‚å½“æ£€æµ‹åˆ°ç‰©ä½“ç»è¿‡Uå‹æ§½å¹¶é˜»æ–­å…‰è½´æ—¶ï¼Œå°±èƒ½äº§ç”Ÿå¯¹åº”çš„ç”µä¿¡å·ã€‚\n2.1ç”µè·¯å›¾ä»¥ä¸‹æ˜¯Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ¨¡å—çš„ç”µè·¯å›¾\n\næ— éšœç¢ç‰©é˜»æŒ¡æ—¶ï¼ŒD1\\D2-LEDéƒ½äº®èµ·ï¼ŒOUTç®¡è„šæ£€æµ‹åˆ°ä½ç”µå¹³0\næœ‰éšœç¢ç‰©é˜»æŒ¡æ—¶ï¼ŒD1-LEDç†„ç­ï¼ŒOUTç®¡è„šæ£€æµ‹åˆ°é«˜ç”µå¹³1\n\n\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nUå‹å…‰ç”µä¼ æ„Ÿå™¨\n\n\n\nGPIO 0\nGPIO 17\nOUT\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n\nä¸è¿‡æˆ‘æ‰‹ä¸Šçš„è¿™ä¸ªä¼ æ„Ÿå™¨å¹¶æ²¡æœ‰ä¸¤ä¸ªæŒ‡ç¤ºç¯ã€‚åªæœ‰ä¸€ä¸ªï¼Œè¯¥æŒ‡ç¤ºç¯åœ¨ä¼ æ„Ÿå™¨è¢«é˜»éš”çš„æ—¶å€™ä¼šå˜æš—\n\n\n3.ä»£ç ç¤ºä¾‹//Uå‹å…‰ç”µä¼ æ„Ÿå™¨å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_LBPin\t\t0  // Uå‹å…‰ç”µä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1  // çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2  // ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰// åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(int color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); // çº¢è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); // ç»¿è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\t\tif (color == 0)&#123;                // ç‚¹äº®çº¢è‰²LEDç¯\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == 1)&#123;          // ç‚¹äº®ç»¿è‰²LEDç¯\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;&#125;// æœ‰ç‰©ä½“æŒ¡ä½æ—¶ï¼Œæ‰“å°å‡ºæç¤ºä¿¡æ¯void makerobo_Print(int x)&#123;\tif ( x == 0 )&#123;\t\tprintf(&quot;makerobo Light was blocked!\\n&quot;);\t&#125;\telse&#123;\t\tprintf(&quot;clear!\\n&quot;);// æ²¡æœ‰æŒ¡ä½\t&#125;&#125;// ä¸»å‡½æ•°int main()&#123;       //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //Uå‹å…‰ç”µä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_LBPin, INPUT);\tint clb_temp=0;\twhile(1)&#123;\t\t//Uå‹å…‰ç”µä¼ æ„Ÿå™¨æœ‰æ— ç‰©ä½“æŒ¡ä½ä¿¡æ¯æ£€æµ‹\t\tif ( digitalRead(makerobo_LBPin) == 0 )&#123;  \t\t\tclb_temp = 1;//ä½ç”µå¹³ï¼Œä»£è¡¨æ²¡æœ‰é˜»æŒ¡\t\t&#125;\t\tif ( digitalRead(makerobo_LBPin) == 1 )&#123;\t\t\tclb_temp = 0;//é«˜ç”µå¹³ï¼Œä»£è¡¨è¢«é˜»æŒ¡\t\t&#125;\t\tdouble_colorLED(clb_temp); // æ§åˆ¶åŒè‰²LEDç¯æ˜¾ç¤º\t\tmakerobo_Print(clb_temp);  // ä¿¡æ¯æ‰“å°\t&#125;\treturn 0;&#125;\n\n3.1LinuxGCCç¼–è¯‘ä»£ç åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 11photoeletricsensor.c -o TEST -lwiringPi\n\næ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå½“ä¼ æ„Ÿå™¨è¢«é˜»æŒ¡æ—¶ï¼ŒåŒè‰²LEDå˜çº¢ï¼Œå±å¹•æ‰“å°makerobo Light was blocked!\nä¸è¢«é˜»æŒ¡æ—¶ï¼ŒåŒè‰²LEDäº®ç»¿ç¯ï¼Œå±å¹•æ‰“å°clear\n\n3.2 æ•ˆæœ\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ12-PCF8591æ¨¡æ•°è½¬æ¢å™¨","url":"/2022/04/21/raspberry/%E5%AE%9E%E9%AA%8C12-PCF8591%E6%A8%A1%E6%95%B0%E8%BD%AC%E6%8D%A2%E5%99%A8/","content":"\n\nå‰è¨€ç”±äºæ ‘è“æ´¾ä¸èƒ½ç›´æ¥è¯»å–æ¨¡æ‹Ÿä¿¡å·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ¬ç¯‡åšå®¢ä¸­æåˆ°çš„æ¨¡æ•°è½¬æ¢å™¨æ¥æ›¿ä»£å®ç°è¯»å–æ¨¡æ‹Ÿä¿¡å·çš„åŠŸèƒ½ã€‚\næœ¬ç¯‡åšå®¢çš„è¿™ä¸ªæ¨¡æ•°è½¬æ¢å™¨æ¯”ä¹‹å‰çš„æ¨¡å—å¤æ‚å¾ˆå¤šï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥ä¸€æ­¥å¼„æ˜ç™½å®ƒçš„åŸç†ï¼Œæ‰èƒ½çœŸæ­£ç†è§£å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå°ä¸œè¥¿\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nåŒè‰²LEDæ¨¡å—ï¼ˆå…ƒè€çº§æœ‹å‹ï¼‰\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—\nä¸€äº›è·³çº¿\nä¸€å­—æˆ–è€…åå­—èºä¸åˆ€ğŸ› \n\n\nä¸Šï¼šPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†2.0 å…ƒä»¶ä»‹ç»PCF8591æ˜¯ä¸€ä¸ªå•ç‰‡é›†æˆã€å•ç‹¬ä¾›ç”µã€ä½åŠŸè€—ã€8-bit CMOSæ•°æ®é‡‡é›†å…ƒä»¶ã€‚\n\nPCF8591å…·æœ‰4ä¸ªæ¨¡æ‹Ÿè¾“å…¥ã€1ä¸ªæ¨¡æ‹Ÿè¾“å‡ºå’Œ1ä¸ªä¸²è¡ŒI2Cæ€»çº¿æ¥å£ã€‚\nå®ƒçš„3ä¸ªåœ°å€å¼•è„šA0, A1å’ŒA2å¯ç”¨äºç¡¬ä»¶åœ°å€ç¼–ç¨‹ï¼Œä»è€Œå…è®¸ä½¿ç”¨å¤šè¾¾8ä¸ªé“¾æ¥åˆ°I2Cæ€»çº¿çš„è®¾å¤‡ï¼Œè€Œæ— éœ€é¢å¤–çš„ç¡¬ä»¶ã€‚\nåœ¨PCF8591å™¨ä»¶ä¸Šè¾“å…¥è¾“å‡ºçš„åœ°å€ã€æ§åˆ¶å’Œæ•°æ®ä¿¡å·éƒ½æ˜¯é€šè¿‡åŒçº¿åŒå‘I2Cæ€»çº¿ä»¥ä¸²è¡Œçš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚\n\nè¯¥å…ƒä»¶çš„åŠŸèƒ½åŒ…æ‹¬æ¨¡æ‹Ÿè¾“å…¥å¤šè·¯å¤ç”¨ï¼Œç‰‡ä¸Šè·Ÿè¸ªå’Œä¿æŒåŠŸèƒ½ï¼Œ8ä½æ¨¡æ•°è½¬æ¢å’Œ8ä½æ•°æ¨¡è½¬æ¢ã€‚æœ€å¤§è½¬æ¢ç‡ç”±I2Cæ€»çº¿çš„æœ€å¤§é€Ÿåº¦å†³å®šã€‚\n2.1 i2cæ€»çº¿\ni2cæ€»çº¿æ˜¯ç”±é£åˆ©æµ¦å…¬å¸å¼€å‘çš„ä¸€ç§ç®€å•ã€åŒå‘äºŒçº¿åˆ¶åŒæ­¥ä¸²è¡Œæ€»çº¿ã€‚å®ƒåªéœ€è¦ä¸¤æ ¹çº¿å³å¯åœ¨è¿æ¥äºæ€»çº¿ä¸Šçš„å™¨ä»¶ä¹‹é—´ä¼ é€ä¿¡æ¯ã€‚\n\né£åˆ©æµ¦å®˜æ–¹æœ‰ä¸€ä¸ªå…³äºPCF8591çš„è¯¦ç»†ä»‹ç»æ–‡æ¡£ï¼Œä¸è¿‡å®ƒæ˜¯è‹±è¯­çš„ã€‚æˆ‘ä¼šä¸Šä¼ åˆ°giteeä»“åº“é‡Œé¢åˆ†äº«ç»™å¤§å®¶ï¼Œä»“åº“é“¾æ¥åœ¨å¼€å¤´ä»‹ç»è¿‡äº†ğŸ¤¦â€â™‚ï¸å›åˆ°å¼€å¤´\n\n\ni2cæ€»çº¿ç³»ç»Ÿä¸­çš„æ¯ä¸ªPCF8591è®¾å¤‡é€šè¿‡å‘è¯¥è®¾å¤‡å‘é€æœ‰æ•ˆåœ°å€è€Œè¢«æ¿€æ´»ã€‚åœ°å€ç”±å›ºå®šéƒ¨åˆ†å’Œå¯ç¼–ç¨‹éƒ¨åˆ†ç»„æˆã€‚å¯ç¼–ç¨‹éƒ¨åˆ†å¿…é¡»æŒ‰ç…§åœ°å€å¼•è„šA0ï¼ŒA1ï¼ŒA2è¿›è¡Œè®¾ç½®ã€‚åœ°å€å¿…é¡»ä»¥é‚®å¯„æ–¹å¼å‘é€ã€‚\nåœ¨i2cæ€»çº¿åè®®ä¸­ï¼Œåœ¨å¯åŠ¨æ¡ä»¶ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œåœ°å€å­—èŠ‚çš„æœ€åä¸€ä¸ªä½æ˜¯è¯»&#x2F;å†™ä½ï¼Œå®ƒè®¾ç½®äº†ä¸‹åˆ—æ•°æ®ä¼ è¾“çš„æ–¹å‘ã€‚\n\n2.2 ç¬¬ä¸€å­—èŠ‚PCF8591é‡‡ç”¨å…¸å‹çš„I2Cæ€»çº¿æ¥å£å™¨ä»¶å¯»å€æ–¹æ³•ï¼Œå³æ€»çº¿åœ°å€ç”±å™¨ä»¶åœ°å€ã€å¼•è„šåœ°å€å’Œæ–¹å‘ä½ç»„æˆã€‚\né£åˆ©æµ¦å…¬å¸è§„å®šA&#x2F;Då™¨ä»¶åœ°å€ä¸º1001ï¼Œå¼•è„šåœ°å€ä¸ºA2A1A0ï¼Œå…¶å€¼ç”±ç”¨æˆ·é€‰æ‹©ã€‚å› æ­¤I2Cç³»ç»Ÿä¸­æœ€å¤šå¯æ¥2^3^ä¸ªå…·æœ‰I2Cæ€»çº¿æ¥å£çš„A&#x2F;Då™¨ä»¶ã€‚åœ°å€çš„æœ€åä¸€ä½ä¸ºæ–¹å‘ä½R&#x2F;Lï¼Œå½“ä¸»æ§å™¨å¯¹A&#x2F;Då™¨ä»¶è¿›è¡Œå†™æ“ä½œæ—¶ä¸º0ï¼Œè¿›è¡Œè¯»æ“ä½œæ—¶ä¸º1ã€‚\næ€»çº¿æ“ä½œæ—¶ï¼Œç”±å™¨ä»¶åœ°å€ã€å¼•è„šåœ°å€å’Œæ–¹å‘ä½ç»„æˆçš„ä»åœ°å€ä¸ºä¸»æ§å™¨å‘é€çš„ç¬¬ä¸€å­—èŠ‚ã€‚\n2.3 æ§åˆ¶å­—èŠ‚å‘é€åˆ°PCF8591å™¨ä»¶çš„ç¬¬äºŒä¸ªå­—èŠ‚å°†è¢«å­˜å‚¨åœ¨å…¶æ§åˆ¶å¯„å­˜å™¨ä¸­ï¼Œå¹¶ä¸”éœ€è¦æ§åˆ¶å™¨ä»¶æ¥å®ç°åŠŸèƒ½ã€‚\n\n\n\nD1ã€D0 ä¸¤ä½æ˜¯A&#x2F;Dé€šé“ç¼–å·ï¼š00é€šé“0ï¼Œ01é€šé“1ï¼Œ10é€šé“2ï¼Œ11é€šé“3\nD2 è‡ªåŠ¨å¢é‡é€‰æ‹©ï¼ˆ0ä¸ºç¦æ­¢è‡ªåŠ¨å¢é‡ï¼Œ1ä¸ºå…è®¸è‡ªåŠ¨å¢é‡ï¼‰ï¼Œå¦‚æœå…è®¸è‡ªåŠ¨å¢é‡ï¼Œåˆ™åœ¨æ¯æ¬¡A&#x2F;Dè½¬æ¢åï¼Œé€šé“ç¼–å·ä¼šè‡ªåŠ¨é€’å¢ã€‚\nD3 ç‰¹å¾ä½ï¼šå›ºå®šå€¼ä¸ºï¼š0ã€‚\nD5ã€D4 æ¨¡æ‹Ÿé‡è¾“å…¥é€‰æ‹©ï¼š00ä¸ºå››è·¯å•ç«¯è¾“å…¥ã€01ä¸ºä¸‰è·¯å·®åˆ†è¾“å…¥ã€10ä¸ºä¸¤è·¯å•ç«¯ä¸ä¸€è·¯å·®åˆ†è¾“å…¥ã€11ä¸ºä¸¤è·¯å·®åˆ†è¾“å…¥ã€‚\nD6 ä½¿èƒ½æ¨¡æ‹Ÿè¾“å‡ºAOUTæœ‰æ•ˆï¼ˆ1ä¸ºæœ‰æ•ˆï¼Œ0ä¸ºæ— æ•ˆï¼‰ã€‚\nD7 ç‰¹å¾ä½ï¼šå›ºå®šå€¼ä¸ºï¼š0ã€‚\n\nä¸Šè¿°å†…å®¹å‚è€ƒ@Makerå¼ å¤§ä½¬çš„åšå®¢ğŸ‘‰ä¼ é€é—¨\n\næ§åˆ¶å¯„å­˜å™¨çš„é«˜åŠå­—èŠ‚ç”¨äºæ¨¡æ‹Ÿè¾“å‡ºï¼Œå¹¶å°†æ¨¡æ‹Ÿè¾“å…¥ç¼–ç¨‹ä¸ºå•ç«¯æˆ–å·®åˆ†è¾“å…¥ã€‚ä¸‹åŠå­—èŠ‚é€‰æ‹©ç”±ä¸ŠåŠå­—èŠ‚å®šä¹‰çš„ä¸€ä¸ªæ¨¡æ‹Ÿè¾“å…¥é€šé“ã€‚å¦‚æœè®¾ç½®äº†è‡ªåŠ¨å¢åŠ æ ‡å¿—ï¼Œåˆ™åœ¨æ¯æ¬¡A&#x2F;Dè½¬æ¢åï¼Œé€šé“ç¼–å·ä¼šè‡ªåŠ¨é€’å¢ã€‚\n\n\næ›´å¤šå…³äºi2cæ€»çº¿çš„çŸ¥è¯†ï¼Œå¯ä»¥æŸ¥çœ‹ç™¾åº¦ç™¾ç§‘çš„è¯æ¡ğŸ‘‰æŸåº¦\n\n2.4 æ¨¡å—ç”µè·¯åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼ŒAIN0ï¼ˆæ¨¡æ‹Ÿè¾“å…¥0ï¼‰ç«¯å£ç”¨äºæ¥æ”¶æ¥è‡ªç”µä½è®¡æ¨¡å—çš„æ¨¡æ‹Ÿä¿¡å·ï¼ŒAOUTï¼ˆæ¨¡æ‹Ÿè¾“å‡ºï¼‰ç”¨äºå°†æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºåˆ°åŒè‰²LEDæ¨¡å—ï¼Œç”¨äºæ”¹å˜LEDçš„äº®åº¦\n\nå¦‚æœä½ æœ‰æ³¨æ„çœ‹ç”µè·¯å›¾çš„è¯ï¼Œä½ ä¼šå‘ç°AOUTä¸Šé“¾æ¥äº†ä¸€ä¸ªD4-LEDï¼Œå®ƒä¹Ÿä¼šæ¥æ”¶æ¨¡æ‹Ÿè¾“å‡ºä¿¡å·ï¼ŒåŒæ­¥æ”¹å˜äº®åº¦\n\nè€Œåœ¨æˆ‘æ‰‹å¤´ä¸Šçš„æ¨¡å—ï¼ŒD2-LEDå°±æ˜¯ä¼šåŒæ­¥æ”¹å˜äº®åº¦çš„ï¼Œåæ–‡ä¼šæåˆ°\n\n\nåœ¨å®éªŒä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠAINä¸Šçš„ç”µä½å¸½æ‹”æ‰\n\n2.5 ç”µè·¯æ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nR(ä¸­é—´)\n*\nAOUT\n\n\nGND(-)\nGND\nGND\n\n\nG(S)\n*\n*\n\n\n\næ‹å‡ºæ¥çš„æ¥çº¿å›¾å¥½åƒæœ‰äº¿ç‚¹ç‚¹ä¹±ğŸ˜‚\n\næ­£å¸¸æ¥çº¿åï¼Œä¸»æ¿ä¸Šçš„D1-LEDä¼šäº®èµ·\n\næˆ‘ä»¬å¯ä»¥æ ¹æ®åŸç†å›¾åˆ©ç”¨Tå‹è½¬æ¥æ¿æ¥è¿æ¥æ¨¡æ•°è½¬æ¢å™¨å’ŒåŒè‰²LEDï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ç§åŒæ¯å¤´çš„çº¿ç›´æ¥è¿æ¥AOUTç«¯å£å’ŒåŒè‰²LEDçš„ä¸­é—´ç®¡è„š\n\n\n3.ç¨‹åºæ§åˆ¶3.1 åœ¨æ ‘è“æ´¾ä¸­å¼€å¯I2Cé€šè¿‡VNCæ‰“å¼€æ ‘è“æ´¾çš„æ¡Œé¢ï¼Œç‚¹å‡»å¼€å§‹-é¦–é€‰é¡¹-Raspberry Pi Configuration-Interfacesï¼Œæ‰“å¼€I2Cçš„å¼€å…³enable\n\n3.2 ä»£ç ç¤ºä¾‹//PCF8591æ¨¡æ•°è½¬æ¢å™¨#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;//è¿™ä¸ªå¤´æ–‡ä»¶æ˜¯åŒ…å«åœ¨åº“ä¸­çš„#define makerobo_PCF  120  // åŸºç¡€ç®¡è„š120// ä¸»å‡½æ•°int main ()&#123;\tint pcf_value ;// å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨AINçš„è¾“å…¥å€¼\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tpcf8591Setup (makerobo_PCF, 0x48);    // åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\twhile(1)\t&#123;\t\tpcf_value = analogRead  (makerobo_PCF + 0);\t\t// è·å–AIN0ä¸Šçš„å€¼ï¼Œæ’ä¸Šè·³çº¿å¸½ä¹‹åï¼Œé‡‡ç”¨çš„æ˜¯å†…éƒ¨çš„ç”µä½å™¨ï¼›\t\tprintf(&quot;%d\\n&quot;, pcf_value);        // æ‰“å°å‡ºè¯¥å€¼            \t\tanalogWrite (makerobo_PCF + 0, pcf_value);         // æ§åˆ¶AOUTè¾“å‡ºç”µå¹³æ§åˆ¶LEDç¯\t\tdelay (10) ; // å»¶æ—¶10ms\t&#125; \treturn 0 ;&#125;\n\nå¤´æ–‡ä»¶&lt;pcf8591.h&gt;åœ¨wiringPiçš„å®˜æ–¹åº“ä¸­ï¼Œå¯ä»¥æŸ¥æ‰¾åˆ°å…³äºPCF8591ä½¿ç”¨çš„ç›¸å…³å‡½æ•°ğŸ‘‰ç‚¹æˆ‘\n\n\n3.3 ç¼–è¯‘ä»£ç åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 12pcf8591.c -o TEST -lwiringPi\n\n3.4 è¿è¡Œç»“æœåœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠAIN0å’ŒINPUT0ä¹‹é—´çš„è·³çº¿å¸½è£…ä¸Š\néšå./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºAIN0ç®¡è„šä¸Šè·å–çš„å€¼\n\nä½†æ˜¯ä¸ç®¡æˆ‘å’‹æ‹§æ¨¡å—ä¸Šçš„ç™½è“ç”µä½è®¡ï¼Œè¿™ä¸ªæ•°å­—éƒ½ä¸åŠ¨\nåé¢å‘ç°è¿™ä¸ªä»£ç å¿…é¡»è¦åœ¨æ ‘è“æ´¾çš„OSé‡Œé¢è·‘ï¼Œæ‰èƒ½å®ç°æ§åˆ¶åŠŸèƒ½ï¼Œåº”è¯¥å’Œ3.1ä¸­çš„I2Cæ€»çº¿åŠŸèƒ½æœ‰å…³\n\näºæ˜¯åœ¨Geanyç¼–è¯‘å™¨ä¸­ç¼–è¯‘ä»£ç ï¼Œå¼€å§‹æ‰§è¡Œ\n\næ‹§åŠ¨ç™½è“ç”µä½è®¡ï¼Œå±å¹•ä¸Šæ¥æ”¶åˆ°çš„å€¼ä¼šä¸æ–­å˜åŒ–ï¼ŒåŒæ—¶LEDå°ç¯å’Œä¸»æ¿ä¸Šçš„D2-LEDçº¢è‰²äº®åº¦ä¹Ÿä¼šäº§ç”Ÿå˜åŒ–\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒå¯¹äºæˆ‘è¿™ä¸ªæ¨¡ç”µå°ç™½æ¥è¯´å°±æ™•ä¹ä¹çš„ï¼Œè™½ç„¶æŸ¥æ‰¾äº†ä¸€äº›I2Cç›¸å…³çš„æ–‡æ¡£å’Œåšå®¢ï¼Œä½†è¿˜æ˜¯æ²¡å¤ªå¼„æ˜ç™½è¿™ä¸ªæ¨¡å—çš„å…·ä½“åŸç†å’Œè¿›é˜¶ä½¿ç”¨ã€‚\n\nä¸è¿‡é€šè¿‡æœ¬æ¬¡è¿™ä¸ªç®€å•çš„æ§åˆ¶åŒè‰²LEDçš„å®éªŒï¼Œè‡³å°‘æˆ‘çŸ¥é“äº†å¯ä»¥é€šè¿‡ç”µä½è®¡æ¥è°ƒèŠ‚AOUTå€¼ï¼Œæƒ³å¿…åœ¨æ›´å¤æ‚çš„å®éªŒä¸­ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥æ‰®æ¼”ä¸ä¸€æ ·çš„è§’è‰²ï¼\né‚£å°±åªèƒ½æœŸå¾…æœªæ¥æˆ‘ä¼šç”¨åˆ°å®ƒå•¦ï¼ï¼ˆæˆ‘æ€ä¹ˆæ„Ÿè§‰ä¸ä¼šå‘¢ï¼Ÿï¼‰\n\n\nçº¯å°ç™½ï¼Œæœ¬ç¯‡åšå®¢å¯èƒ½æœ‰å¾ˆå¤§çš„çº°æ¼ï¼Œè¿˜è¯·å„ä½å¤§ä½¬æ— æƒ…æŒ‡æ­£ï¼\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ13-é›¨æ»´ä¼ æ„Ÿå™¨","url":"/2022/05/13/raspberry/%E5%AE%9E%E9%AA%8C13-%E9%9B%A8%E6%BB%B4%E4%BC%A0%E6%84%9F%E5%99%A8/","content":"å¥½ä¹…æ²¡ç©æ ‘è“æ´¾äº†ï¼Œä»Šå¤©ä¸Šæ‰‹æ¥åšä¸€ä¸ªå®éªŒ\n\n\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\né›¨æ»´ä¼ æ„Ÿå™¨æ¨¡å—\nLM393æ¨¡å—\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆå®éªŒ12ï¼‰\nä¸€äº›è·³çº¿\nä¸€ä¸ªä¸€å­—èºä¸åˆ€\n\n\n2.å®éªŒåŸç†2.1åŸºæœ¬è¯´æ˜é›¨æ»´ä¼ æ„Ÿå™¨çš„æ§åˆ¶æ¨¡å—å…·æœ‰4ä¸ªè¾“å‡ºï¼Œå…¶ä¸­VCCè¿æ¥åˆ°5Vç”µæºï¼Œæ¨¡å—çš„GNDå¼•è„šæ¥åœ°ã€‚DOå¼•è„šè¿æ¥åˆ°å¾®æ§åˆ¶å™¨çš„æ•°å­—å¼•è„šä»¥è¿›è¡Œæ•°å­—è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå¼•è„šã€‚è¦ä½¿ç”¨æ¨¡æ‹Ÿè¾“å‡ºï¼Œå¯ä»¥å°†A0å¼•è„šè¿æ¥åˆ°å¾®æ§åˆ¶å™¨çš„ADCå¼•è„šã€‚\nåœ¨é›¨æ»´&#x2F;é›¨æ°´å™¨ç³»ç»Ÿä¸­ï¼Œç”¨é›¨æ»´ä¼ æ„Ÿå™¨æ£€æµ‹é™é›¨é‡å¹¶è½¬æ¢æ§åˆ¶å™¨æ£€æµ‹åˆ°çš„ä¿¡å·ã€‚ç„¶åæ ¹æ®è¿™äº›ä¿¡å·è‡ªåŠ¨è®¾ç½®é›¨åˆ®å™¨çš„é—´éš”ï¼Œä»¥æ–¹ä¾¿åœ°æ§åˆ¶é›¨åˆ®å™¨çš„ç”µæœºï¼›åœ¨æ™ºèƒ½ç…§æ˜ç³»ç»Ÿä¸­ï¼Œè‡ªåŠ¨æ£€æµ‹é©¾é©¶ç¯å¢ƒå¹¶è°ƒæ•´ç…§æ˜æ¨¡å¼ï¼Œæé«˜æ¶åŠ£ç¯å¢ƒä¸‹çš„è¡Œè½¦å®‰å…¨ï¼›åœ¨æ™ºèƒ½å¤©çª—ç³»ç»Ÿä¸­ï¼Œæ£€æµ‹æ˜¯å¦ä¸‹é›¨ï¼Œå¦‚æœæ£€æµ‹åˆ°é›¨æ»´ï¼Œåˆ™è‡ªåŠ¨å…³é—­å¤©çª—ã€‚\nä¼ æ„Ÿå™¨æ¨¡å—åŒ…æ‹¬ä¸€ä¸ªç”µä½è®¡ï¼ŒLM393æ¯”è¾ƒå™¨ï¼ŒLEDï¼Œç”µå®¹å™¨å’Œç”µé˜»å™¨ã€‚é›¨æ¿æ¨¡å—ç”±é“œè½¨ç»„æˆï¼Œé“œè½¨ç”¨ä½œå¯å˜ç”µé˜»å™¨ã€‚å®ƒçš„é˜»åŠ›éšé›¨æ¿ä¸Šçš„æ¹¿åº¦è€Œå˜åŒ–ã€‚\n2.2ç”µè·¯å›¾\n2.3æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nLM393æ¨¡å—\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nDO\nGPIO 17\n*\n\n\nAO\n*\nAIN 0\n\n\nVCC\n3.3V\n*\n\n\nGND\nGND\n*\n\n\n\nåœ¨è¿æ¥LM393å’Œé›¨æ»´ä¼ æ„Ÿå™¨çš„æ—¶å€™ï¼Œå‘ç°é›¨æ»´ä¼ æ„Ÿå™¨ä¸Šå¹¶æ²¡æœ‰æ˜ç¡®æ ‡å‡ºæ­£è´Ÿæï¼Œä½†æ˜¯åœ¨æ­£æçš„ç®¡è„šä¸‹æ–¹ç”¨å°ç‚¹åšäº†æ ‡è¯†ï¼ˆè´Ÿææ— è¯¥ç™½ç‚¹ï¼‰\n\næœ¬æ¬¡å®éªŒéœ€è¦æ¥çš„çº¿éå¸¸å¤šï¼Œæ³¨æ„ä¸è¦æ¥é”™äº†ã€‚å…¶ä¸­PCF8591æ¨¡å—åœ¨æ¥çº¿æ—¶éœ€è¦å°†æ‰€æœ‰è·³çº¿å¸½æ‹”å‡º\n\n\n3.ä»£ç æ•ˆæœ3.1ä»£ç ç¤ºä¾‹å› ä¸ºéœ€è¦ä½¿ç”¨pcf8591æ¨¡æ•°è½¬æ¢å™¨ï¼Œæ‰€ä»¥éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶&lt;pcf8591.h&gt;\n//é›¨æ»´æ¢æµ‹ä¼ æ„Ÿå™¨å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#include &lt;math.h&gt;#define\tmakerobo_PCF    120 // åŸºç¡€ç®¡è„š120#define\tmakerobo_DOpin\t 0   // é›¨æ»´ä¼ æ„Ÿå™¨ç®¡è„š//æ‰“å°é›¨æ»´ä¼ æ„Ÿå™¨æç¤ºä¿¡æ¯void makerobo_Print(int x)&#123;\tswitch(x)\t&#123;\t\tcase 1:            //æ²¡æœ‰é›¨æ»´\t\t\tprintf(&quot;\\n************************\\n&quot;  );\t\t\tprintf(  &quot;* makerobo Not Raining *\\n&quot;  );\t\t\tprintf(  &quot;************************\\n\\n&quot;);\t\t\tbreak;\t\tcase 0:             //æœ‰é›¨æ»´\t\t\tprintf(&quot;\\n**********************\\n&quot;  );\t\t\tprintf(  &quot;* makerobo Raining!! *\\n&quot;  );\t\t\tprintf(  &quot;**********************\\n\\n&quot;);\t\t\tbreak;\t\tdefault:         //æ‰“å°æ•°æ®é”™è¯¯\t\t\tprintf(&quot;\\n**********************\\n&quot;  );\t\t\tprintf(  &quot;* Print value error. *\\n&quot;  );\t\t\tprintf(  &quot;**********************\\n\\n&quot;);\t\t\tbreak;\t&#125;&#125;int main()&#123;\tint makerobo_analogVal;           // å®šä¹‰æ¨¡æ‹Ÿé‡å­˜å‚¨å˜é‡\tint makerobo_tmp, makerobo_status;// å®šä¹‰çŠ¶æ€ä¿¡æ¯    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1;\t&#125;\t//åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup(makerobo_PCF, 0x48);    //è®¾ç½®é›¨æ»´ä¼ æ„Ÿå™¨ç®¡è„šä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_DOpin, INPUT);    //é»˜è®¤çŠ¶æ€å€¼è®¾ç½®ä¸º0\tmakerobo_status = 0; \t//æ— é™å¾ªç¯\twhile(1) \t&#123;\t\tmakerobo_analogVal = analogRead(makerobo_PCF + 0);\t\t//è·å–AIN0ä¸Šçš„å€¼\t\tprintf(&quot;%d\\n&quot;, makerobo_analogVal); //æ‰“å°å‡ºè¯¥å€¼ \t\tmakerobo_tmp = digitalRead(makerobo_DOpin); \t\t//è¯»å–æ•°å­—IOå£ç”µå¹³ï¼Œè¯»å–æ•°å­—é›¨æ»´ä¼ æ„Ÿå™¨DOç«¯å£\t\tif (makerobo_tmp != makerobo_status) //çŠ¶æ€å‘ç”Ÿæ”¹å˜\t\t&#123;\t\t\tmakerobo_Print(makerobo_tmp); //æ‰“å°å‡ºé›¨æ»´ä¼ æ„Ÿå™¨æ£€æµ‹ä¿¡æ¯\t\t\tmakerobo_status = makerobo_tmp;  //çŠ¶æ€å€¼é‡æ–°èµ‹å€¼\t\t&#125;\t\tdelay (200);   //å»¶æ—¶200ms\t&#125;\treturn 0;&#125;\n\næ³¨æ„ï¼šé›¨æ»´ä¼ æ„Ÿå™¨å…¶å®æ˜¯LM393å’Œé›¨æ»´æ„Ÿåº”æ¨¡å—çš„é›†åˆä½“ï¼Œæ‰€ä»¥ä»£ç æ³¨é‡Šä¸­è¯´çš„è®¾ç½®ç®¡è„šä¸ºinputæ¨¡å¼ï¼Œå®é™…ä¸Šè®¾ç½®çš„æ˜¯LM393æ¨¡å—çš„ç®¡è„šï¼ˆæ¯•ç«Ÿåªæœ‰å®ƒè¿ä¸Šäº†Tå‹è½¬æ¥æ¿ï¼‰\n\næœ¬æ¬¡åšå®¢çš„ä»£ç å’Œä¹‹å‰çš„å®éªŒå¾ˆç›¸ä¼¼ï¼Œå…¶ä¸­PCF8591åœ¨ä¸Šç¯‡å®éªŒ12åšå®¢ä¸­å·²ç»æœ‰è¿‡è®²è§£ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±ä¸bbå•¦\n\n3.2è¿è¡Œæ•ˆæœå½“ä½ æŠŠæ¹¿çº¸å·¾å°åœ¨é›¨æ»´ä¼ æ„Ÿå™¨ä¸Šï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºmakerobo Raining!!ï¼Œæ•°å€¼ä¼šéšç€é›¨æ»´é‡çš„å¤§å°å˜åŒ–ï¼ˆæˆ‘è¿™é‡Œæµ‹è¯•çš„æ˜¯ï¼Œæ°´å¤šçš„æ—¶å€™æ‰“å°çš„å€¼å°ï¼‰ä½†æœ€åä¼šè¶‹äºç¨³å®šï¼Œæ‰“å°128\n\nå¦‚æœæ²¡æœ‰æ°´ï¼Œå±å¹•ä¸Šæ‰“å°makerobo Not Rainingï¼Œæ•°å€¼æ‰“å°255\n\nåœ¨LM393æ¨¡å—ä¸Šæœ‰ä¸¤ä¸ªLEDæŒ‡ç¤ºç¯ï¼Œåœ¨ä¼ æ„Ÿå™¨æ¢æµ‹åˆ°æ°´åï¼ŒDO-LEDä¼šäº®èµ·\n\nå¦‚æœä½ çš„DO-LEDæ²¡æœ‰äº®èµ·ï¼Œå¯ä»¥é€šè¿‡è¯¥ä¼ æ„Ÿå™¨ä¸Šè“è‰²çš„æ¨¡å—ï¼Œç”¨åå­—èºä¸è°ƒèŠ‚LM393æ¨¡å—çš„çµæ•åº¦ï¼ˆè¿™ä¸ªè“è‰²æ¨¡å—è°ƒèŠ‚çš„æ˜¯ç”µé˜»ï¼‰\nç»“è¯­æœ‰äº†è¿™ä¸ªä¸œè¥¿ï¼Œä½ å¯ä»¥æŠŠé›¨æ»´ä¼ æ„Ÿå™¨ä¸¢åˆ°çª—å°ä¸Šï¼Œåœ¨ä¸åœ¨å®¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥è¿è¡Œä»£ç ï¼Œçœ‹çœ‹å®¶é‡Œæœ‰æ— ä¸‹é›¨äº†ï¼ˆæ¯•ç«Ÿæ—¶å€™å·¥ä½œä¸Šå­¦çš„åœ°æ–¹å’Œå®¶é‡Œéš”äº†åå‡ å…¬é‡Œï¼Œå¤©æ°”å°±å¯èƒ½å®Œå…¨ä¸åŒï¼‰\n\né…åˆcpolarå®ç°å†…ç½‘ç©¿é€ï¼Œæ•ˆæœæ›´ä½³å“¦ğŸ˜€\n\nä¸è¿‡çŸ¥é“è‡ªå·±å®¶ä¸‹é›¨äº†ï¼Œè¢«å­è¿˜æ²¡æ”¶ï¼Œæ˜¯ä¸æ˜¯å¾’å¢ç„¦è™‘ï¼Ÿ\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ14-PS2æ¸¸æˆæ‰‹æŸ„æ‘‡æ†","url":"/2022/05/13/raspberry/%E5%AE%9E%E9%AA%8C14-PS2%E6%89%8B%E6%9F%84/","content":"æœ¬æ¬¡å®éªŒè¿˜æ˜¯éœ€è¦ç”¨åˆ°PCF8591æ¨¡æ•°è½¬æ¢å™¨ï¼Œè«éå®ƒè¦å–ä»£åŒè‰²LEDæˆä¸ºæ–°çš„å¸¸é©»å˜‰å®¾å—ï¼Ÿ\n\n\n\næœ¬æ¬¡å®éªŒæ˜¯æ‘‡æ†å®éªŒã€‚è¿™ä¸ªç©æ„å¯ä»¥ç”¨äºæ“æ§æœºå™¨äººæˆ–è€…æ˜¯æ ‘è“æ´¾çš„é¥æ§å°è½¦ã€‚å½“ç„¶ï¼Œç”Ÿæ´»ä¸­æœ€å¸¸è§çš„ç”¨é€”è¿˜æ˜¯åœ¨æ¸¸æˆæ‰‹æŸ„ä¸Šã€‚ä¸çŸ¥é“ä½ æ‰“ä¸æ‰“æ¸¸æˆï¼Œæœ‰æ²¡æœ‰ç”¨è¿‡æ‰‹æŸ„ç©æ¸¸æˆå‘¢ï¼Ÿ\n\næœ¬äººæœ‰ä¸€ä¸ªæ¸¸æˆæ‰‹æŸ„ï¼Œç©3aè¿˜æ˜¯æŒºçˆ½çš„ï¼Œå“ˆå“ˆ\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nPS2æ‰‹æŸ„æ¨¡å—\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆå®éªŒ12ï¼‰\nä¸€äº›è·³çº¿\nä¸€ä¸ªä¸€å­—èºä¸åˆ€\n\n\n2.å®éªŒåŸç†\næ‰‹æŸ„æ¨¡å—é€šè¿‡ä»¥90åº¦è§’å®‰è£…ä¸¤ä¸ªç”µä½è®¡æ¥åˆ¤æ–­å½“å‰çš„Xå€¼å’ŒYå€¼ï¼Œä»è€Œè®¡ç®—å‡ºæ‰‹æŸ„çš„æ–¹å‘ã€‚å†åŠ ä¸Šä¸€ä¸ªæŒ‰é’®ï¼Œæ¥åˆ¤æ–­æ‰‹æŸ„è¢«æŒ‰ä¸‹ï¼ˆä¹Ÿå°±æ˜¯æ¸¸æˆæ‰‹æŸ„ä¸Šçš„L3å’ŒR3é”®çš„åŸç†ï¼‰\n\nå¤„äºé™æ­¢ä½ç½®æ—¶ï¼Œæ­¤æ¨¡å—ä»Xå’ŒYäº§ç”Ÿçº¦2.5Vçš„è¾“å‡ºã€‚ç§»åŠ¨æ“çºµæ†å°†å¯¼è‡´è¾“å‡ºåœ¨0våˆ°5Vä¹‹é—´å˜åŒ–ï¼Œå…·ä½“å–å†³äºå…¶æ–¹å‘ã€‚å¦‚æœå°†æ­¤æ¨¡å—è¿æ¥åˆ°å¾®æ§åˆ¶å™¨ï¼Œåˆ™å¯èƒ½ä¼šåœ¨å…¶é™æ­¢ä½ç½®è¯»å–å¤§çº¦512çš„å€¼(ç”±äºå¼¹ç°§å’Œæœºæ„çš„å¾®å°è¯¯å·®è€Œå¼•èµ·çš„ç»†å¾®å˜åŒ–)ã€‚ç§»åŠ¨æ“çºµæ†æ—¶ï¼Œåº”è¯¥çœ‹åˆ°è¯¥å€¼ä»0å˜ä¸ºåˆ°1023ï¼Œå…·ä½“å–å†³äºå…¶ä½ç½®ã€‚\nè¯¥æ¨¡å—æœ‰ä¸¤ä¸ªæ¨¡æ‹Ÿè¾“å‡º(å¯¹åº”Xå’ŒYåæ ‡)å’Œä¸€ä¸ªæ•°å­—è¾“å‡ºï¼Œè¡¨ç¤ºæ˜¯å¦åœ¨Zè½´ä¸ŠæŒ‰ä¸‹ã€‚\nåœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†å¼•è„šXå’ŒYè¿æ¥åˆ°PCF8591A&#x2F;Dè½¬æ¢å™¨çš„æ¨¡æ‹Ÿè¾“å…¥ç«¯å£ï¼Œä»¥ä¾¿å°†æ¨¡æ‹Ÿé‡è½¬æ¢ä¸ºæ•°å­—é‡ã€‚ç„¶ååœ¨æ ‘è“æ´¾ä¸Šç¼–ç¨‹ä»¥æ£€æµ‹æ“çºµæ†çš„ç§»åŠ¨æ–¹å‘\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nPS2æ‰‹æŸ„æ¨¡å—\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nVRY\n*\nAIN 0\n\n\nVRX\n*\nAIN 1\n\n\nSW\n*\nANI 2\n\n\n5V\n5V\n5V\n\n\nGND\nGND\nGND\n\n\n\nè¿™ä¸ªæ˜¯æˆ‘çš„æ¥çº¿å›¾ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç”¨åŒæ¯å¤´è·³çº¿ç›´æ¥è¿æ¥PCF8591å’Œæ‰‹æŸ„æ¨¡å—ï¼Œä¸è¿‡è¿˜æ˜¯å€ŸåŠ©äº†Tå‹è½¬æ¥æ¿æ¥è¿æ¥äºŒè€…ã€‚\n\n3.æ•ˆæœæ¼”ç¤º3.1ä»£ç ç¤ºä¾‹//PS2æ“ä½œæ†å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#define makerobo_PCF       120   // åŸºç¡€ç®¡è„š120#define uchar\tunsigned charint pcf_AIN0 = makerobo_PCF + 0; // AIN0 ç«¯å£int pcf_AIN1 = makerobo_PCF + 1; // AIN1 ç«¯å£int pcf_AIN2 = makerobo_PCF + 2; // AIN2 ç«¯å£// æ–¹å‘çŠ¶æ€ä¿¡æ¯ char *state[7] = &#123;&quot;home&quot;, &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;, &quot;pressed&quot;&#125;;// æ–¹å‘åˆ¤æ–­å‡½æ•°int makerobo_direction()&#123;\tint ain_x, ain_y, ain_b;       // Xæ–¹å‘ï¼ŒYæ–¹å‘ï¼ŒB æ˜¯å¦æŒ‰ä¸‹\tint makerobo_tmp=0;            // çŠ¶æ€å€¼\tain_x = analogRead(pcf_AIN1);  // Xä¸ºAIN1ç«¯å£\tain_y = analogRead(pcf_AIN0);  // Yä¸ºAIN0ç«¯å£\tain_b = analogRead(pcf_AIN2);  // BæŒ‰ä¸‹ä¸ºAIN2ç«¯å£\t\tif (ain_y &lt;= 30)\t\tmakerobo_tmp = 1;\t\t// up\tif (ain_y &gt;= 225)\t\tmakerobo_tmp = 2;\t\t// down\t\tif (ain_x &gt;= 225)\t\tmakerobo_tmp = 4;\t\t// left\tif (ain_x &lt;= 30)\t\tmakerobo_tmp = 3;\t\t// right\tif (ain_b == 0)\t\tmakerobo_tmp = 5;\t\t// button æŒ‰ä¸‹\tif (ain_x-125&lt;15 &amp;&amp; ain_x-125&gt;-15 &amp;&amp; ain_y-125&lt;15 &amp;&amp; ain_y-125&gt;-15 &amp;&amp; ain_b &gt;= 60)\t\tmakerobo_tmp = 0;\t\t// home ä½ç½®\t\treturn makerobo_tmp;&#125;// ä¸»å‡½æ•°int main (void)&#123;\tint makerobo_tmp=0;       // å½“å‰å€¼\tint makerobo_status = 0;  // çŠ¶æ€å€¼\twiringPiSetup ();\t// åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup (makerobo_PCF, 0x48);\t// æ— çº¿å¾ªç¯\twhile(1) \t&#123;\t\tmakerobo_tmp = makerobo_direction(); // è°ƒç”¨æ–¹å‘åˆ¤æ–­å‡½æ•°\t\tif (makerobo_tmp != makerobo_status) // åˆ¤æ–­çŠ¶æ€æ˜¯å¦å‘ç”Ÿæ”¹å˜\t\t&#123;\t\t\tprintf(&quot;%s\\n&quot;, state[makerobo_tmp]); // æ‰“å°å‡ºæ–¹å‘ä½\t\t\tmakerobo_status = makerobo_tmp;                  // æŠŠå½“å‰çŠ¶æ€èµ‹ç»™çŠ¶æ€å€¼ï¼Œä»¥é˜²æ­¢åŒä¸€çŠ¶æ€å¤šæ¬¡æ‰“å°\t\t&#125;\t&#125;\treturn 0 ;&#125;\n\nè¿™éƒ¨åˆ†æ¯”è¾ƒå¥½ç†è§£ï¼Œä»£ç ä¹Ÿå¾ˆç›´è§‚ã€‚åªæœ‰homeä½ç½®éœ€è¦æˆ‘ä»¬å•ç‹¬è¿›è¡Œè®¡ç®—ï¼ˆå³æ‰‹æŸ„å¤„äºæ­£ä¸­å¿ƒåŒºåŸŸä¸”æ²¡æœ‰æŒ‰ä¸‹çš„æƒ…å†µï¼Œæ‰æ˜¯homeçš„æƒ…å†µï¼‰\n3.2æ•ˆæœç¿»è½¦ä¸è¿‡è½®åˆ°å®é™…æµ‹è¯•çš„æ—¶å€™ï¼Œç¿»å¤§è½¦äº†ã€‚åœ¨æˆ‘è¿˜æ²¡æœ‰åŠ¨æ‘‡æ†çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæ˜¾ç¤ºå‡ºå·¦å’ŒæŒ‰é’®è¢«æŒ‰ä¸‹çš„æç¤ºã€‚æˆ‘å°è¯•ä¿®æ”¹ä»£ç æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œå‘ç°å¹¶ä¸å¯è¡Œ\n\näºæ˜¯æˆ‘ç›´æ¥æŠŠä»£ç ç»™æ³¨é‡Šæ‰ï¼ŒåŠ äº†ä¸€ä¸ªæ‰“å°X\\Y\\Bå½“å‰å€¼çš„ä»£ç \n\nç»“æœå‘¢ï¼Œåœ¨æˆ‘æ²¡åŠ¨æ‘‡æ†çš„æ—¶å€™ï¼Œæ‰“å°å‡ºæ¥çš„Xå’ŒYéƒ½æ˜¯ä¹±ä¸ƒå…«ç³Ÿçš„ã€‚åªæœ‰æŒ‰ä¸‹æ‘‡æ†çš„B&#x3D;0å¯ä»¥è¢«æ­£å¸¸æ£€æµ‹åˆ°ï¼Œå…¶ä»–çš„æ–¹ä½å•¥çš„éƒ½æ˜¯æ¯«æ— ååº”ã€‚\n\nç›´æ¥ç»™è¿™ä¸ªæ¨¡å—ä¸‹è¾¾äº†æ­»äº¡é€šçŸ¥ä¹¦ï¼Œæ‹œæ‹œäº†æ‚¨å˜ï¼\nç»“è¯­é€šè¿‡å­¦ä¹ è¿™ä¸ªæ¨¡å—çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å®é™…ä¸Šä¸€äº›é›¶éƒ¨ä»¶çš„åŸºæœ¬åŸç†å¹¶ä¸æ˜¯éå¸¸éš¾æŒæ¡ã€‚ä¸è¿‡ä½ æƒ³æŠŠä¸€ä¸ªæ‘‡æ†å˜æˆä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆæ‰‹æŸ„ï¼Œé‚£å°±éœ€è¦æ›´å¤æ‚çš„æ§åˆ¶ä»£ç å’Œæ‰‹æŸ„çš„å†…éƒ¨èŠ¯ç‰‡æ¥è½¬ä¹‰è¿™äº›æ•°å­—å€¼äº†ã€‚\n\næœ‰ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå‘¢\n\nè¿˜æ˜¯æœ‰æ‰€æ”¶è·çš„ï¼Œè¦æ˜¯æ‘‡æ†æ²¡åå°±å¥½äº†\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ15-ç”µä½è®¡ä¼ æ„Ÿå™¨","url":"/2022/05/14/raspberry/%E5%AE%9E%E9%AA%8C15-%E7%94%B5%E4%BD%8D%E4%BC%A0%E6%84%9F%E5%99%A8/","content":"ä»Šå¤©çš„è¿™ä¸ªå®éªŒéœ€è¦ç”¨ä¸Šä¸¤ä½å¸¸é©»å˜‰å®¾ï¼\nå®ƒä»¬å°±æ˜¯PCF8591å’ŒåŒè‰²LEDï¼\n\n\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nåŒè‰²LEDæ¨¡å—ï¼ˆå…ƒè€çº§æœ‹å‹ï¼‰\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆé•¿è€çº§æœ‹å‹ï¼‰\nç”µä½è®¡ä¼ æ„Ÿå™¨\nä¸€äº›è·³çº¿\n\n\nä¸Šï¼šç”µä½è®¡ä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†2.1åŸºæœ¬åŸç†\nç”µä½è®¡æ˜¯ä¸€ç§ç”¨äºæµ‹é‡ç”µè·¯ä¸­ç”µåŠ¿(ç”µå‹)çš„ä»ªå™¨ã€‚é€šè¿‡ç”µæµè®¡å°†æ¥è‡ªç”µé˜»å¼æ»‘åŠ¨å¯¼çº¿çš„å·²çŸ¥ç”µå‹çš„ä¸€éƒ¨åˆ†ä¸æœªçŸ¥ç”µå‹è¿›è¡Œæ¯”è¾ƒã€‚è°ƒèŠ‚ç”µä½å™¨çš„æ»‘åŠ¨è§¦ç‚¹æˆ–æ¸¸æ ‡ã€‚ç„¶åå°†æ£€æµè®¡çŸ­æš‚åœ°è¿æ¥åœ¨æ»‘åŠ¨è§¦ç‚¹å’ŒæœªçŸ¥ç”µå‹ä¹‹é—´ï¼Œè§‚å¯Ÿæ£€æµè®¡çš„æŒ åº¦ï¼Œå¹¶è°ƒèŠ‚æ»‘åŠ¨åˆ†æ¥å¤´ï¼Œç›´åˆ°æ£€æµè®¡ä¸å†ä»é›¶åæ–œä¸ºæ­¢ã€‚\næ­¤æ—¶ï¼Œæ£€æµè®¡ä¸å†ä»æœªçŸ¥æºæ±²å–ç”µæµï¼Œå¹¶ä¸”å¯ä»¥ä»æ»‘åŠ¨è§¦ç‚¹çš„ä½ç½®è®¡ç®—å‡ºç”µå‹çš„å¹…å€¼ã€‚\n\nç”µä½å™¨ï¼Œåˆç§°POTï¼Œæ˜¯å¯å˜ç”µé˜»å™¨ã€‚ä»–ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°æ”¹å˜å…¶å¤´éƒ¨é¡¶éƒ¨çš„æ—‹é’®æ¥æä¾›å¯å˜çš„ç”µé˜»ã€‚å¯ä»¥åŸºäºä¸¤ä¸ªä¸»è¦å‚æ•°å¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚ä¸€ä¸ªæ˜¯ç”µé˜»(R-ohms)æœ¬èº«ï¼Œå¦ä¸€ä¸ªæ˜¯åŠŸç‡(P-Watts)é¢å®šå€¼ã€‚\n\nåœ¨æœ¬å®éªŒä¸­ï¼ŒPCF8591ç”¨äºè¯»å–ç”µä½è®¡çš„æ¨¡æ‹Ÿå€¼å¹¶å°†å€¼è¾“å‡ºåˆ°åŒè‰²LEDã€‚\nå°†ç”µä½å™¨çš„å¼•è„šSIGï¼ˆç”µä½å™¨ä¸Šçš„OUTç®¡è„šï¼‰è¿æ¥åˆ°PCF8591çš„å¼•è„šAINOã€‚å°†åŒè‰²LEDçš„å¼•è„šRæˆ–å¼•è„šGè¿æ¥åˆ°PCF8591çš„å¼•è„šAOUTï¼Œä»¥è§‚å¯ŸLEDçš„å˜åŒ–ã€‚\n\n2.2æ¥çº¿å›¾æœ‰äº†å‰ä¸¤æ¬¡æ¥çº¿çš„ç»éªŒï¼Œè¿™ä¸€æ¬¡å°±åªéœ€è¦å¤åˆ»å°±è¡Œäº†\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nç”µä½è®¡\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nOUT\n*\nAIN 0\n\n\nVCC\n5v\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nR(ä¸­é—´)\n*\nAOUT\n\n\nGND(-)\nGND\nGND\n\n\nG(S)\n*\n*\n\n\n\nå®ç‰©å›¾ä¸€å¦‚æ—¢å¾€çš„ä¹±ï¼Œå“ˆå“ˆå“ˆ\n\n\n3.å®éªŒæ•ˆæœ3.1ä»£ç ç¤ºä¾‹æœ¬æ¬¡å®éªŒä½¿ç”¨ä¸Šäº†AOUTçš„æ¥å£ï¼Œç”¨äºæ¥æ”¶ç”µä½è®¡çš„ä¿¡å·è€Œæ”¹å˜åŒè‰²LEDäº®åº¦\n//ç”µä½å™¨æ¨¡å—å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#define makerobo_PCF  120 // åŸºç¡€ç®¡è„š120// ä¸»å‡½æ•°int main ()&#123;\tint pcf_value ;     // å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨AINçš„è¾“å…¥å€¼\twiringPiSetup () ;   // è°ƒç”¨åˆå§‹åŒ–å‡½æ•°\t// åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup (makerobo_PCF, 0x48) ;\twhile(1) // æ— é™å¾ªç¯\t&#123;\t\tpcf_value = analogRead  (makerobo_PCF + 0) ;        // è·å–AIN0ä¸Šçš„å€¼ï¼Œè¯»å–ç”µä½å™¨æ¨¡æ‹Ÿé‡å€¼ï¼›\t\tprintf(&quot;Potentiometer Value: %d\\n&quot;, pcf_value);         // æ‰“å°å‡ºè¯¥å€¼    \t\tanalogWrite (makerobo_PCF + 0, pcf_value) ;            // æ§åˆ¶AOUTè¾“å‡ºç”µå¹³æ§åˆ¶LEDç¯\t\tdelay (200) ;  // å»¶æ—¶200ms\t&#125;\treturn 0 ;&#125;\n\n\nè¿™é‡Œå…ˆç”¨Readå‡½æ•°è¯»å–ç”µä½è®¡çš„å€¼ï¼Œç„¶åå†ç”¨Writeå‡½æ•°å†™å…¥åˆ°PCF8591ï¼Œå®ƒç”¨AOUTè¾“å‡ºåˆ°åŒè‰²LEDï¼Œæ¥æ§åˆ¶å®ƒçš„äº®åº¦\n\n3.2å®éªŒæ•ˆæœå¦‚æœä½ çœ‹è¿‡å®éªŒ12çš„åšå®¢çš„è¯ï¼Œä½ åº”è¯¥è¿˜è®°å¾—ï¼ŒPCF8591ä¸Šä¹Ÿæœ‰ä¸€ä¸ªç”µä½è®¡ï¼Œä»–ä¹Ÿèƒ½å®ç°æœ¬æ¬¡å®éªŒçš„æ•ˆæœã€‚\n\nä½†ä¸åŒçš„æ˜¯ï¼Œæœ¬æ¬¡å®éªŒä½¿ç”¨çš„æ˜¯å•ç‹¬çš„ç”µä½è®¡æ¨¡å—ï¼Œè°ƒèŠ‚æ›´åŠ æ–¹ä¾¿ï¼Œä¸éœ€è¦ä½¿ç”¨èºä¸åˆ€\n\nè¿è¡Œç¨‹åºï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºç”µä½è®¡æ¥æ”¶åˆ°çš„å€¼ï¼Œé€šè¿‡è°ƒèŠ‚æ—‹é’®ï¼Œå€¼åœ¨0-255ä¹‹é—´æ³¢åŠ¨\n\næ•ˆæœå¦‚å›¾ï¼Œè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»\n\n","categories":["æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]}]