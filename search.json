[{"title":"ã€å…¬å‘Šã€‘2024-01-26 ç«™ç‚¹Linuxåšå®¢æ›´æ”¹ç¯å¢ƒä¸ºUbuntu","url":"/posts/955376979/","content":"2024-01-26 ç«™ç‚¹Linuxåšå®¢æ›´æ”¹ç¯å¢ƒä¸ºUbuntuç”±äºCentOS8ä¸å†è¢«æ”¯æŒï¼Œä¸”æˆ‘çš„æœ¬åœ°CentOS8è™šæ‹Ÿæœºå‡ºç°äº†æˆ‘æš‚æ—¶æ— æ³•è§£å†³çš„yumæºä¸å¯ç”¨é—®é¢˜ï¼ˆå³ä¾¿æ¢æˆå›½å†…é•œåƒæºä¹Ÿä¸è¡Œï¼‰ã€‚å†ä¸‰è€ƒè™‘ä¸‹ï¼Œå†³å®šæ¢æˆUbuntu22.04ã€‚\næœ¬ç«™ä»2024å¹´1æœˆ26èµ·çš„æ‰€æœ‰Linuxåšå®¢ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®è¡¨æ˜ç³»ç»Ÿçš„æƒ…å†µä¸‹ï¼Œå‡ä½¿ç”¨wsl2çš„Ubuntu 22.04.3 LTSè¿›è¡Œä»£ç ç¼–å†™å’Œæµ‹è¯•ã€‚åœ¨è¿™ä¹‹å‰æ²¡æœ‰æ˜ç¡®æ ‡æ˜ç³»ç»Ÿçš„Linuxåšå®¢ï¼Œå‡ä½¿ç”¨çš„æ˜¯CentOS7.6å’ŒCentOS8ï¼›\n2024-01-25 ç«™ç‚¹æ–°å¢å‹é“¾æœ‹å‹åœˆé¡µé¢ç«™ç‚¹æ–°å¢ å‹é“¾æœ‹å‹åœˆ é¡µé¢\néƒ¨ç½²è¯¥é¡µé¢å‚è€ƒï¼šã€Hexoåšå®¢ã€‘æ·»åŠ å‹é“¾æœ‹å‹åœˆï¼Œçºµè§ˆå¥½å‹æœ€æ–°æ–‡ç«  | ç™¾é‡Œé£æ´‹\n\næ³¨æ„ï¼Œä½¿ç”¨è¯¥åŠŸèƒ½æ—¶ï¼Œå‹é“¾linké¡µé¢ä¸åº”è¯¥å‡ºç°é™¤äº†butterflyåŸç‰ˆå‹é“¾ä»¥å¤–çš„&#123;% flink %&#125;å¤–æŒ‚ï¼Œå¦åˆ™å‹é“¾çˆ¬å–ä¼šé”™è¯¯è¯†åˆ«åŒºåŸŸï¼ˆåªè¯†åˆ«&#123;% flink %&#125;éƒ¨åˆ†çš„å†…å®¹ï¼‰ã€‚\n2023-10-06 å®£ä¼ ä¸€ä¸‹æˆ‘çš„wikiç«™ç‚¹è€ƒè™‘åˆ°hexoåšå®¢å¯¹æŠ€æœ¯åšå®¢çš„å½’æ¡£å’Œå±•ç¤ºå¹¶ä¸æ˜¯ä»¥æœ€å¥½çš„æ’ç‰ˆå‘ˆç°å‡ºæ¥çš„ï¼Œæˆ‘åˆä¸æƒ³æ¢vuepressè¿™äº›æ¡†æ¶ï¼Œäºæ˜¯è‡ªå·±éƒ¨ç½²äº†ä¸€ä¸ªMrDocé¡¹ç›®ï¼Œæ‰“ç®—å°†æˆ‘æ‰€å­¦çš„Cpp&#x2F;Linuxåç«¯çŸ¥è¯†ç»™ç³»ç»Ÿæ€§çš„æ•´ç†åˆ°è¿™ä¸ªç½‘ç«™ä¸Šã€‚\nç½‘ç«™å¯ä»¥åœ¨çº¿ç¼–è¾‘ï¼Œä¹Ÿæ–¹ä¾¿æˆ‘è·¨å¹³å°æ“ä½œã€‚ä¸ªäººæ„Ÿè§‰è¿™ä¸ªå¼€æºé¡¹ç›®æ¯”ä¸€äº›åŠ¨æ€åšå®¢ç³»ç»Ÿéƒ½å¥½ç”¨ï¼ˆåªä¸è¿‡ç¼ºå°‘è¯„è®ºï¼Œé‚£æ˜¯ä¸“ä¸šç‰ˆçš„åŠŸèƒ½ï¼‰\nç›®å‰ç½‘ç«™åˆšåˆšæ­å»ºï¼Œåªæ›´æ–°äº†å°‘éƒ¨åˆ†æ–‡æ¡£ã€‚å¤§å®¶æ„Ÿå…´è¶£åœ°å¯ä»¥æ”¶è—ä¸€ä¸‹è¿™ä¸ªç½‘ç«™ï¼šhttps://wiki.musnow.top/\né¦–é¡µæˆªå›¾å¦‚ä¸‹:\n\n2023-06-06 å°è¯•ä½¿ç”¨qexoä½œä¸ºåšå®¢åç«¯å°è¯•ä½¿ç”¨qexoä½œä¸ºåšå®¢åç«¯ï¼Œè¿˜æŒºå¥½ç©çš„ï¼\né¡¹ç›®åœ°å€ https://github.com/Qexo/Qexo\n\n2023-03-30 æœ¬ç«™æ›´æ–°ä¸ºhexo-butterflyä¸»é¢˜æœ¬ç«™æ›´æ–°ä¸ºbutterflyä¸»é¢˜ï¼Œkeepä¸»é¢˜ç•™æ¡£ç«™ç‚¹ğŸ‘‰ç‚¹æˆ‘\n2023-03-28 å›¾åºŠè¢«æ”»å‡»è‡ªä¸€å‘¨ä¹‹å‰èµ·ï¼Œå›¾åºŠCDNé­åˆ°äº†æ¶æ„è¯·æ±‚ï¼ˆåŒä¸€ä¸ªipï¼ŒåŒä¸€å¼ å›¾ç‰‡ï¼Œæ¯ç§’è¯·æ±‚15æ¬¡ï¼Œæ—¥æ‰£è´¹5å…ƒã€‚åœ¨æˆ‘ç¦æ‰ä»–çš„ipåï¼Œä»–æ¢äº†å¦å¤–ä¸€ä¸ªipç»§ç»­è¯·æ±‚åŒä¸€å¼ å›¾ç‰‡ï¼Œå› ä¸ºä¸¤ä¸ªipçš„å±åœ°ç›¸åŒï¼Œéƒ½æ˜¯å®¶å®½ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºæ˜¯åŒä¸€ä¸ªäººï¼‰\nè¯¦ç»†ä¿¡æ¯è§æ—¥å¿—æ–‡ç« \n2023-03-25 urlæ›¿æ¢ä½¿ç”¨äº† hexo-abbrlinkæ’ä»¶ï¼Œå°†æ‰€æœ‰postæ–‡ç« çš„é“¾æ¥é…ç½®ä¸ºå›ºå®šè¿æ¥.\nè¯„è®ºå’Œä¹‹å‰æ–‡ç« ä¸­å¼•ç”¨çš„è¿æ¥éƒ½å·²æ›´æ–°\nnpm install hexo-abbrlink --save\n\n\nhttps://blog.csdn.net/Mculover666/article/details/103137719\n\n2023-02-03 åŸŸåæ›´æ¢åŸŸåæ›´æ¢ä¸º blog.musnow.top, æ›´æœ‰ä¸ªäººæ ‡è¯†åº¦\n2023-02-01 å…³äºé¡µé¢è—èµ·æ¥äº†æˆ‘æŠŠå…³äºé¡µé¢è—èµ·æ¥å•¦ï¼Œçœ‹çœ‹ä½ èƒ½ä¸èƒ½æ‰¾åˆ°å®ƒçš„ä½ç½®å‘¢ï¼Ÿ\n2023-01-18 ä¹‹å‰valineçš„è¯„è®ºå·²å¯¼å…¥å·²ä»leancloudå›½å†…ç‰ˆæœ¬å¯¼å…¥äº†ä¹‹å‰valineçš„è¯„è®ºåˆ°walineï¼Œå¹¶ä¿®æ”¹äº†æ•°æ®åº“ä¸­æœ‰å˜åŠ¨çš„url\n2023-01-13 ç«™ç‚¹æ›´æ–°keepç‰ˆæœ¬ï¼Œä½¿ç”¨gitç®¡ç†ä¸»é¢˜ç°åœ¨ä½¿ç”¨gitçš„submodule æ¥ç®¡ç†keepä¸»é¢˜æ–‡ä»¶\nhttps://zhuanlan.zhihu.com/p/87053283\nä»Šå¤©å‘ç° jsdelivr çš„ cdnæŒ‚æ‰äº†ï¼Œå¯¼è‡´å¾ˆå¤šèµ„æºéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œè½¬ä¸ºç”¨nmpkgäº†ã€‚åŒæ—¶æˆ‘ç¼“å­˜äº† 2.4.16 ç‰ˆæœ¬çš„walineæ–‡ä»¶ï¼Œå…¨éƒ½æ”¾åœ¨é˜¿é‡Œäº‘äº†ã€‚\n2023-01-09 ç«™ç‚¹é¡µè„šæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ä»Šå¤©ç»™ç«™ç‚¹é¡µè„šæ·»åŠ äº†ç½‘ç«™è¿è¡Œæ—¶é—´ï¼ŒåŒæ—¶æ³¨é‡Šæ‰äº†åº•éƒ¨çš„hexoæç¤ºæ¡†ï¼›è¿˜æ·»åŠ äº†ä¸€äº›shields.ioçš„å›¾æ ‡ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼\nå‚è€ƒåšå®¢ hexo+yiliaæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ï¼ŒICPå¤‡æ¡ˆä¿¡æ¯ï¼Œè®¾å®šç«™ç‚¹å»ºç«‹æ—¶é—´\n\n\nä»Šå¤©åŠ å…¥äº†èŒICPå¤‡ï¼Œå’ŒçœŸçš„ICPå¤‡æ¡ˆæ²¡æœ‰å…³ç³»ï¼Œå…¶æœ¬è´¨å’Œå¼€å¾€æ˜¯ä¸€ä¸ªç±»å‹çš„é¡¹ç›®ã€‚\n2023-01-08 æ›´æ–°åšå®¢é‚®ç®±æé†’çš„æ¨¡æ¿æ ¹æ®æ•™ç¨‹æ›´æ–°äº†vecrelä¸­walineæ‰€ä½¿ç”¨çš„è¯„è®ºæé†’æ¨¡æ¿ï¼Œå“åº”é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œè€Œä¸”é…ç½®æ²¡æœ‰leancloudçš„é‚®ç®±æé†’é‚£ä¹ˆéº»çƒ¦ï¼›\nä¸è¿‡æˆ‘å‘ç°vercelçš„è®¿é—®å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¿«é€Ÿï¼Œæœ‰çš„æ—¶å€™ä¼šå‡ºç°è¯„è®ºåŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µï¼Œéœ€è¦å¤šåˆ·æ–°å‡ æ¬¡ï¼\næ›´è¯¦ç»†çš„å†…å®¹è¯·çœ‹ğŸ‘‰7-2-ä½¿ç”¨-Walineè¯„è®ºç³»ç»Ÿ\n2023-01-07 åŠ å…¥å¼€å¾€è¿™ä¸ªä¹Ÿæ˜¯åœ¨é€›åˆ«äººçš„ä¸»é¡µçš„æ—¶å€™çœ‹åˆ°çš„ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼é‚£å°±åŠ å…¥å§ï¼\n\nå¼€å¾€é“¾æ¥ https://www.travellings.cn/\nå¼€å¾€æ˜¯ä¸€ä¸ªä»¥è·³è½¬åŠŸèƒ½ä¸ºä¸»çš„å‹é“¾æ¥åŠ›é¡¹ç›®ï¼Œå…¶åå­—â€œå¼€å¾€â€å–è‡ªâ€œå¼€æ”¾çš„ç½‘ç»œâ€ã€‚\nå°†å¼€å¾€æ”¾å…¥æ‚¨çš„ç½‘é¡µï¼Œè¡¨ç¤ºæ‚¨ä¹äºåˆ†äº«å¹¶æ”¯æŒå¼€æ”¾çš„ç½‘ç»œã€‚\næ¯å½“æœ‰äººè®¿é—®åŠ å…¥å¼€å¾€çš„ç½‘é¡µæ—¶ï¼Œç‚¹å‡»â€œå¼€å¾€â€œä¼šéšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µã€‚ä¹‹åï¼Œå†æ¬¡ç‚¹å‡»ç½‘é¡µä¸Šçš„â€å¼€å¾€â€œæˆ–åé€€ç½‘é¡µï¼Œå°†ç»§ç»­éšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µã€‚\n\n2023-01-06 æ›´æ–°keepç‰ˆæœ¬å•Šå‘€å‘€ï¼Œä»Šå¤©æŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œæ‰æŠŠkeepä» 3.4.5 -&gt; 3.5.2ï¼Œå› ä¸ºæˆ‘ä¹‹å‰ç«™ç‚¹çš„ä¸ªæ€§åŒ–é…ç½®éƒ½æ˜¯ä¿®æ”¹çš„npmåŒ…ï¼Œç»“æœå‘ç°ä¸€æ›´æ–°ï¼ŒåŒ…é‡Œé¢ä¿®æ”¹è¿‡çš„å†…å®¹å…¨æ²¡äº†ï¼ğŸ˜¥ğŸ˜¥\näºæ˜¯åˆæ ¹æ®è‡ªå·±å†™çš„æ•™ç¨‹ï¼Œé‡æ–°ä¿®æ”¹äº†ä¸€ç•ªï¼Œå¹¶ç»™è‡ªå®šä¹‰è¿‡çš„èƒŒæ™¯æ·»åŠ äº†æ ¹æ®æ˜æš—è‡ªåŠ¨å˜åŒ–é¢œè‰²çš„åŠŸèƒ½ï¼ˆä¹‹å‰æ˜¯æ²¡æœ‰çš„ï¼‰\nè€Œä¸”è¯„è®ºç³»ç»Ÿä¹Ÿä» valine -&gt; walineï¼Œå…¶ä¸»è¦çš„å¥½å¤„å°±æ˜¯ï¼Œwaline æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼Œç”¨æ¥åœ¨è¯„è®ºåŒºå›ç­”ä¸€éƒ¨åˆ†é—®é¢˜çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä¸éœ€è¦ç”¨æˆ·è¿˜å»æ‰¾ä¸ªå›¾åºŠäº†ã€‚\næˆ‘é€šè¿‡æ›¿æ¢keepä¸»é¢˜cdnå¯¼å…¥çš„ waline.js æ–‡ä»¶çš„æ–¹å¼ï¼Œä¿®æ”¹äº† waline é»˜è®¤çš„å›¾ç‰‡ä¸Šä¼ é™åˆ¶ 128KB -&gt; 1024KB\n\næˆ‘è¿™ç§ä¿®æ”¹åŠæ³•è‚¯å®šéå¸¸éå¸¸ä¸è§„èŒƒï¼Œä½†æ˜¯çš„ç¡®ç”Ÿæ•ˆäº†ğŸ¤£ï¼Ÿå°±æ˜¯ä¸çŸ¥é“åç»­ä¼šä¸ä¼šå‡ºç°bugï¼Œå¸Œæœ›ä¸è¦æœ‰ğŸ˜¶â€ğŸŒ«ï¸\n\nè™½ç„¶æŠ˜è…¾äº†éå¸¸éå¸¸ä¹…ï¼Œè¿˜åšäº†ä¸€äº›æ— ç”¨åŠŸï¼Œä½†æ˜¯çœŸçš„æå®šçš„æ—¶å€™ï¼Œè¿˜æ˜¯å¾ˆå¼€å¿ƒå“’ï¼\n2022-04-16 å»ºç«™ä»Šå¤©ï¼ŒåŸºäº HEXO + KEEP ä¸»é¢˜çš„ç«™ç‚¹ç»ˆäºå»ºç«‹èµ·æ¥å•¦ï¼\næ­å»ºè¿™ä¸ªç«™ç‚¹çš„çµæ„Ÿæ¥æºäºæˆ‘åœ¨é€›CSDNæ—¶å€™é‡åˆ°çš„ä¸€ä¸ªåšä¸»çš„ä¸ªäººç«™ç‚¹ï¼Œå¹¶å‘ç°äº†HEXOè¿™ä¸ªå¼€æºçš„åšå®¢æ­å»ºæ¡†æ¶\né¦–ä¸ªç‰ˆæœ¬æ˜¯åŸºäº Gitee Pages çš„ï¼Œæ„Ÿè§‰è¿˜ä¸é”™ï¼\nä½¿ç”¨hexoå’Œkeepä¸»é¢˜æ­å»ºä¸ªäººåšå®¢\n"},{"title":"ã€Pythonã€‘åœ¨ä½ çš„äº‘æœåŠ¡/ç”µè„‘ä¸Šæ­å»ºPythonç¯å¢ƒ","url":"/posts/800910784/","content":"æœ¬ç¯‡wikiä¼šæ•™ä½ åœ¨ä½ çš„ç”µè„‘&#x2F;äº‘æœåŠ¡å™¨ä¸Šæ­å»ºå¥½Pythonç¯å¢ƒ\n\n\nåˆ›å»ºä½ çš„Pythonç¯å¢ƒè¦æƒ³è®©botè·‘èµ·æ¥ï¼Œæ²¡æœ‰ä¸€ä¸ªPythonçš„ç¯å¢ƒæ€ä¹ˆåŠï¼Ÿ\næœ¬ç¯‡wikiä¼šæ•™ä½ åœ¨ä½ çš„ç”µè„‘&#x2F;äº‘æœåŠ¡å™¨ä¸Šæ­å»ºå¥½å¯ä»¥è¿è¡ŒKOOKæœºå™¨äººçš„Pythonç¯å¢ƒ\n1.windowsåœ¨windowsä¸‹å†™Pythonä»£ç çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œæˆ‘ä»‹ç»çš„æ˜¯vs code\nå¦‚æœä½ å·²ç»æœ‰äº†Pychamç­‰ä»£ç ç¯å¢ƒï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œä¹Ÿæ²¡å¿…è¦çœ‹è¿™ç¯‡wikiğŸ˜‹\n1.1å®‰è£…Python\nè¿›å…¥Pythonå®˜ç½‘ https://www.python.org/\n\næ‰¾åˆ°downloadï¼Œä¸‹è½½æœ€æ–°çš„Pythonç‰ˆæœ¬åŒ…\n\n\nè¿™é‡Œä¸‹è½½å®˜æ–¹æ¨èçš„installerå³å¯\n\n\n\næ³¨ï¼šå¦‚æœä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿…é›·ç­‰ä¸‹è½½å·¥å…·\n\nä¸‹è½½å®Œæˆåï¼Œæ‰“å¼€å®‰è£…åŒ…ï¼Œä¸€å®šè¦å‹¾é€‰ADD PYTHON TO PATHè¿™ä¸ªé€‰é¡¹\n\nä¸€å®šè¦å‹¾é€‰ADD PYTHON TO PATHè¿™ä¸ªé€‰é¡¹ï¼\nä¸€å®šè¦å‹¾é€‰ADD PYTHON TO PATHè¿™ä¸ªé€‰é¡¹ï¼\nä¸€å®šè¦å‹¾é€‰ADD PYTHON TO PATHè¿™ä¸ªé€‰é¡¹ï¼\n\n\nç„¶åæ— è„‘ä¸‹ä¸€æ­¥å³å¯ï¼Œåç»­å°±ä¸éœ€è¦ä¿®æ”¹ä»€ä¹ˆï¼Œå»ºè®®ä¹Ÿä¸è¦ä¿®æ”¹å®‰è£…è·¯å¾„\n\nå®‰è£…å®Œæ¯•åï¼Œåœ¨windowså¼€å§‹ä¸­æ‰¾åˆ°å‘½ä»¤æç¤ºç¬¦ï¼Œä¹Ÿå°±æ˜¯windowså¹³å°çš„cmdå·¥å…·ã€‚\næˆ–è€…ç”¨win+rå¿«æ·é”®ï¼Œåœ¨å¼¹å‡ºçš„æ¡†ä¸­è¾“å…¥cmdå³å¯æ‰“å¼€\n\nåœ¨é‡Œé¢è¾“å…¥Pythonï¼Œå‡ºç°ä»¥ä¸‹ç•Œé¢å³ä¸ºå®‰è£…æˆåŠŸï¼\n\n\n1.2 å®‰è£…VSC\nå¾®è½¯å®˜ç½‘ä¸‹è½½ https://code.visualstudio.com/\n\nåœ¨å®˜ç½‘å¯ä»¥ç›´æ¥ä¸‹è½½windowsä¸Šçš„VSCï¼Œä½†æ˜¯é»˜è®¤çš„ä¸‹è½½é“¾æ¥ä¸‹è½½æ˜¯éå¸¸æ…¢çš„ï¼\nhttps://az764295.vo.msecnd.net/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠè¿™ä¸ªé»˜è®¤çš„ä¸‹è½½é“¾æ¥æ”¹æˆå›½å†…çš„é•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦å°±å¯ä»¥èµ·é£ï¼\nå°†ä¸‹è½½åœ°å€ä¸­çš„az764295.vo.msecnd.net æ›´æ¢ä¸º vscode.cdn.azure.cn æ›´æ”¹åï¼šhttps://vscode.cdn.azure.cn/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\nå®‰è£…åŒæ ·æ˜¯æ— è„‘ä¸‹ä¸€æ­¥ï¼\næ³¨ï¼šè¯·ä¸è¦ä¿®æ”¹VSCçš„å®‰è£…ä½ç½®ï¼Œå¯èƒ½å¯¼è‡´VSCæ— æ³•æ­£å¸¸è¿è¡ŒPythonç¨‹åºï¼\n\næ‰“å¼€VSCåï¼Œç•Œé¢æ˜¯è‹±æ–‡çš„ã€‚åˆ«æ€¥ï¼Œè®©æˆ‘ä»¬å®‰è£…å‡ ä¸ªæ’ä»¶ï¼Œå°±å¯ä»¥æ„‰å¿«ä½¿ç”¨äº†\nç‚¹å‡»å·¦ä¾§çš„è¿™ä¸ªæŒ‰é’®è¿›å…¥æ’ä»¶é¢ç‰ˆ\n\n\nåœ¨è¿™é‡Œå¯ä»¥å®‰è£…æ’ä»¶ï¼Œéœ€è¦å®‰è£…çš„æ’ä»¶æœ‰ä¸‹é¢è¿™äº›\nChinese(Simplified)  //VSCæ±‰åŒ–æ’ä»¶Python  //pythonç¯å¢ƒPylance //pythonç¯å¢ƒPip Manager //å®‰è£…ã€ç®¡ç†pipåŒ…Terminal Here //æ–¹ä¾¿æˆ‘ä»¬æ‰“å¼€ç»ˆç«¯vscode-json //jsonæ ¼å¼åŒ–æ’ä»¶\nä¸‹å¥½ä¸Šé¢çš„æ’ä»¶åï¼Œä½ çš„å·¦ä¾§åº”è¯¥ä¼šå¤šå‡ºæ¥ä¸€ä¸ªpip managerçš„æŒ‰é’®ï¼Œåœ¨è¿™é‡Œå¯ä»¥ä¸‹è½½ä½ éœ€è¦çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“\n\n\nåˆ°è¿™é‡Œï¼Œwindowsä¸‹çš„Pythonç¯å¢ƒæ­å»ºå°±å®Œæˆäº†ï¼\n1.3 å°è¯•å†™ä¸ªæœ€ç®€å•çš„Pythonä»£ç åœ¨VSCé‡Œé¢åˆ›å»ºä¸€ä¸ªtest.pyæ–‡ä»¶ï¼ˆè¿™é‡Œä¼šè®©ä½ é€‰æ‹©ä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œå¼„ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹å°±å¯ä»¥äº†ï¼‰\nå¡«å…¥ä¸‹é¢çš„ä»£ç \nprint(&#x27;hello world&#x27;)\næŒ‰CTRL+SHIFT+Tæ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆå·¦ä¸‹è§’é½¿è½®ä¹Ÿå¯ä»¥æ‰“å¼€ï¼‰ï¼Œè¾“å…¥Terminal Hereï¼Œé€‰æ‹©ä¸‹é¢è¿™ä¸ªé€‰é¡¹\n\n\nåœ¨VSCçš„åº•éƒ¨ä¼šæ‰“å¼€è¿™æ ·çš„ä¸€ä¸ªç»ˆç«¯\n\n\næˆ‘ä»¬åœ¨è¿™é‡Œè¾“å…¥Python test.pyï¼Œå³å¯è¿è¡Œåˆšåˆšå†™çš„hello worldä»£ç \nå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œåº”è¯¥æ˜¯ä¼šè¾“å‡ºè¿™æ ·çš„ç»“æœ\n\nå®Œæˆé…ç½®ï¼\n2.Linuxå¹³å°å…³äºLinuxå¹³å°çš„Pythonç¯å¢ƒæ­å»ºï¼Œå¯ä»¥å‚è€ƒ åšå®¢\n\n\nä¸‹é¢æ˜¯ä¸€æ¬¡çå‡çº§pythonå¯¼è‡´çš„é”™è¯¯è®°å½•,æœ¬äººæ‰€ç”¨ç³»ç»Ÿä¸ºCentOS 7.6ï¼Œ\n\n2.1.ä¸è¦çæ”¹é…ç½®æ–‡ä»¶æˆ‘å…ˆæ˜¯å‚è€ƒäº†ä¸€äº›å¥‡è‘©åšå®¢ï¼Œé‡Œé¢è¯´é“äº†ä¸‹è½½å®Œpythonæ–°ç‰ˆæœ¬åï¼Œéœ€è¦ä¿®æ”¹ä¸‹é¢ä¸¤ä¸ªyumçš„é…ç½®æ–‡ä»¶\nå®é™…ä¸Šï¼Œå‹æ ¹ä¸è¦ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼ï¼ï¼ï¼\n/usr/bin/yum/usr/libexec/urlgrabber-ext-down\n\nè¯´æ˜¯è¦æŠŠå¼€å¤´çš„#!/usr/bin/python2.7ä¿®æ”¹ä¸ºå‡çº§åçš„ç‰ˆæœ¬\nå®é™…ä¸Šï¼Œå‹æ ¹ä¸è¦ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼ï¼ï¼ï¼\nå› ä¸ºä¿®æ”¹äº†ä¹‹åæ‰§è¡Œyumä¼šå‡ºç°ä¸‹é¢è¿™ä¸ªæŠ¥é”™\n-bash: /usr/bin/yum: /usr/bin/python: åçš„è§£é‡Šå™¨: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n\n\nå‚è€ƒè¿™ç¯‡åšå®¢ï¼ŒæŠŠé…ç½®æ–‡ä»¶è¯¥å›å»æ‰è®©yumå¤æ´»ã€é“¾æ¥ã€‘\n\nyumæ˜¯åŸºäºpython2.7çš„ï¼Œä½ æ²¡äº‹æŠŠäººå®¶ä¾èµ–ç¯å¢ƒæ”¹äº†å¹²å“ˆå­ï¼Ÿ\n2.2.æ­£ç¡®ä¸‹è½½Pythonçš„æ–¹æ³•å‚è€ƒä¸‹é¢è¿™ä¸ªåšå®¢\n\nhttps://blog.csdn.net/weixin_41829333/article/details/110141988\n\n2.3.è¦å¯¹ç—‡ä¸‹è¯æ•™ç¨‹åšå®¢é‡Œé¢æåˆ°äº†ï¼Œéœ€è¦é‡æ–°åˆ›å»ºè½¯è¿æ¥ï¼Œè¿™æ˜¯æ²¡é”™\nln -sf /usr/local/bin/python3.8 /usr/bin/pythonln -sf /usr/local/bin/python3.8-config /usr/bin/python-config\n\nä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººçš„è½¯è¿æ¥éƒ½æ˜¯ç”¨ä¸Šé¢çš„ä»£ç åˆ›å»ºï¼\nåœ¨æ‰§è¡Œå®Œpythonæ–°ç‰ˆæœ¬çš„makeåï¼Œä½ éœ€è¦é€šè¿‡ä¸‹é¢çš„ä¸¤ä¸ªæŒ‡ä»¤æ‰¾åˆ°æ–°ç‰ˆæœ¬pyçš„å®‰è£…è·¯å¾„\n[root@bt-7274:~]# whereis pythonpython: /usr/bin/python3.6m /usr/bin/python3.6 /usr/bin/python /usr/bin/python2.7-config /usr/bin/python2.7 /usr/lib/python3.6 /usr/lib/python2.7 /usr/lib64/python3.6 /usr/lib64/python2.7 /etc/python /usr/local/bin/python3.9-config /usr/local/bin/python3.9 /usr/local/lib/python3.9 /usr/include/python3.6m /usr/include/python2.7 /usr/local/python3/bin/python3.7 /usr/local/python3/bin/python3.9-config /usr/local/python3/bin/python3.7-config /usr/local/python3/bin/python3.9 /usr/local/python3/bin/python3.7m-config /usr/local/python3/bin/python3.7m /usr/share/man/man1/python.1.gz[root@bt-7274:~]# which python/usr/bin/python\n\næ¯”å¦‚æˆ‘è¿™é‡Œå¾ˆæ˜æ˜¾èƒ½çœ‹å‡ºæ¥ï¼Œæˆ‘çš„æ–°ç‰ˆæœ¬python3.9æ˜¯å®‰è£…åœ¨/usr/local/biné‡Œé¢ï¼Œè€Œä¸æ˜¯/usr/biné‡Œé¢çš„\nåŒæ—¶ï¼Œå½“æˆ‘æ‰§è¡Œpyå‡ºé”™æ—¶ï¼ŒæŠ¥é”™çš„è·¯å¾„ä¹Ÿæ˜¯ä¸‹é¢è¿™ä¸ª\n-bash: /usr/local/bin/python3: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•\n\næ‰€ä»¥åˆ›å»ºè½¯é“¾æ¥çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ç—‡ä¸‹è¯è¿›è¡Œä¿®æ”¹ï¼\nln -s /usr/local/python3/bin/python3 /usr/local/bin/python3ln -s /usr/local/python3/bin/pip3 /usr/local/bin/pip3\n\nè¿™æ ·æ‰èƒ½è®©pyæˆåŠŸå‡çº§ï¼\n2.4.è¯·é‡ä¸‹ä¾èµ–åº“ä¸‹è½½ä¾èµ–åº“çš„æ—¶å€™ï¼Œå…¶å®æ˜¯åªå®‰è£…åœ¨äº†å¯¹åº”ç‰ˆæœ¬çš„pythoné‡Œé¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘çš„æ—§ç‰ˆæœ¬python3.7.8\næ‰€ä»¥æ›´æ–°å¥½äº†ä¹‹åï¼Œä½ éœ€è¦é‡æ–°ä¸‹æ‰€æœ‰çš„ä¾èµ–åº“\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Linux","Python","vscode","é˜¿ç‹¸å¼€å‘æ—¥å¿—"]},{"title":"ã€Pythonã€‘è§£å†³SSL certificate problem unable to get local issuer certificate","url":"/posts/3348986841/","content":"CentOS8 å‡ºç° SSL certificate problem: unable to get local issuer certificate è§£å†³åŠæ³•\n\n\næˆ‘æƒ³ç›´æ¥çœ‹è§£å†³åŠæ³•\n1.é”™è¯¯æ¥æºæˆ‘åœ¨ä¸€ä¸ªdockerå®‰è£…çš„Centos8.5ç³»ç»Ÿä¸­å¯åŠ¨æˆ‘è‡ªå·±å†™çš„kookæœºå™¨äººæ—¶ï¼Œé‡åˆ°äº†ä¸‹é¢çš„å¼‚å¸¸è¾“å‡º\naiohttp.client_exceptions.ClientConnectorCertificateError: Cannot connect to host www.kookapp.cn:443 ssl:True [SSLCertVerificationError: (1, &#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1002)&#x27;)]\n\n\n\nç‚¹æˆ‘æŸ¥çœ‹å®Œæ•´é”™è¯¯æˆªå›¾\n\n\nè¿™ä¸ªå›¾ç‰‡å¦‚æœåŠ è½½ä¸å‡ºæ¥ä¹Ÿæ²¡å…³ç³»ï¼Œä¸å½±å“æœ¬æ–‡å†…å®¹ã€‚\n\n\næŠ¥é”™çš„å¤§æ¦‚æ„æ€æ˜¯æ²¡æœ‰åŠæ³•è·å–åˆ°æœ¬åœ°çš„issuer certificateã€‚å¦‚æœä½ çŸ¥é“è¯ä¹¦å’ŒCAçš„å«ä¹‰ï¼Œé‚£ä¹ˆå¤§æ¦‚èƒ½çŒœåˆ°è¿™ä¸ªæŠ¥é”™æ˜¯ä»€ä¹ˆæ„æ€ã€‚\n\næ‰€æœ‰ç«™ç‚¹çš„sslè¯ä¹¦ï¼Œéƒ½éœ€è¦ç»è¿‡CAæœºæ„çš„è®¤è¯å’Œé¢å‘ã€‚æ“ä½œç³»ç»Ÿä¼šé»˜è®¤å†…åµŒå·²æœ‰CAæœºæ„çš„å…¬é’¥ï¼Œä»¥ç”¨äºè§£å¯†CAé¢å‘çš„è¯ä¹¦ä¸­çš„æ•°å­—ç­¾åã€‚\n\nå› ä¸ºCAæœºæ„æ˜¯å†…åµŒåœ¨æ“ä½œç³»ç»Ÿæœ¬åœ°çš„ï¼Œå¦‚æœä¸€ä¸ªè¯ä¹¦çš„é¢å‘æœºæ„ä¸åœ¨æœ¬åœ°å·²æœ‰CAä¸­ï¼Œè¯¥ç«™ç‚¹çš„SSLè¯ä¹¦å¯èƒ½æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œå°±ä¼šè¢«æŠ¥ä¸å®‰å…¨ã€‚å› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªç­¾åè¯ä¹¦æ˜¯ä¸è¢«è®¤å¯çš„ã€‚\nè€Œæ— æ³•è·å–æœ¬åœ°issuer certificateï¼Œæˆ‘çŒœæµ‹æ„æ€å°±æ˜¯æ²¡æœ‰åŠæ³•è·å–é“æ“ä½œç³»ç»Ÿå†…åµŒçš„CAã€‚\n2.è§£å†³åˆšå¼€å§‹æˆ‘å°è¯•è¿‡é€šè¿‡pythonçš„sslæ¨¡ç»„å–æ¶ˆè¯ä¹¦éªŒè¯ã€æ›´æ–°æœ¬åœ°è¯ä¹¦å’Œopensslï¼Œéƒ½æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nåœ¨Kookå¹³å°khl.pyæœåŠ¡å™¨çš„å¤§ä½¬å¸®åŠ©ä¸‹ï¼Œæœ€ç»ˆå®šä½å¹¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\n2.1 æ›´æ–°æœ¬åœ°caåŒ…å…ˆ yum install ca-certificatesï¼Œå·²ç»è£…è¿‡çš„è¯é‚£å°±æ˜¯ yum update ca-certificates å¦‚æœä¸è¡Œå† pip3 install certifi\næ“ä½œå®Œæ¯•ä¸Šé¢çš„æ­¥éª¤ï¼Œå‘ç°æœ¬åœ°å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„ca-certificatesï¼Œpythonä¹Ÿæœ‰å®‰è£…certifiåŒ…\n$ yum update ca-certificatesRepository extras is listed more than once in the configurationWarning: failed loading &#x27;/etc/yum.repos.d/epel.repo&#x27;, skipping.Last metadata expiration check: 8:42:37 ago on Thu 23 Feb 2023 03:09:14 PM UTC.Dependencies resolved.Nothing to do.Complete!$ pip3.10 install  certifiDefaulting to user installation because normal site-packages is not writeableRequirement already satisfied: certifi in ./.local/lib/python3.10/site-packages (2022.12.7)$ pip3.10 install  certifi -UDefaulting to user installation because normal site-packages is not writeableRequirement already satisfied: certifi in ./.local/lib/python3.10/site-packages (2022.12.7)\n\n2.2 æŸ¥çœ‹æœ¬åœ°ä¸»æœºçš„é“¾æ¥äºæ˜¯å°è¯•ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹ä¸»æœºæ˜¯å¦èƒ½æˆåŠŸè¿æ¥åˆ°kaiheila.cn(kookapp.cn) å¹¶è®¤è¯sslè¯ä¹¦\nopenssl s_client -connect www.kookapp.cn:443 -showcerts\n\nè¾“å‡ºäº†å¦‚ä¸‹çš„ä¿¡æ¯\ndepth=2 C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Global Root CAverify return:1depth=1 C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1verify return:1depth=0 CN = *.kookapp.cnverify return:1CONNECTED(00000003)---Certificate chain 0 s:CN = *.kookapp.cn   i:C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1-----BEGIN CERTIFICATE-----MIIHkTCCBXmgAwIBAgIQCUlurlf6m1VXsuISNqlT8DANBgkqhkiG9w0BAQsFADBcMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xNDAyBgNVBAMTK1JhcGlkU1NMIEdsb2JhbCBUTFMgUlNBNDA5NiBTSEEyNTYgMjAyMiBDQTEwHhcNMjIwNjE1MDAwMDAwWhcNMjMwNjE1MjM1OTU5WjAXMRUwEwYDVQQDDAwqLmtvb2thcHAuY24wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDB1uHkQ/oEkGNloVa6wHz424VznxL+eUt6AAfNhtIXeone8rtnJqeoDJ24lmBYUrL00tChCp4rdTddcrqPppDYSEY7+/U0hf39pDrmsGKZeeOu7JvANjtvqLFdXsqe5CnXtxAo5QUXB9gckttoLTZZX5O1Gyi6mqDtsFCTaVpsQmZWVcbA21zLAdAZJyUyzM2VyfCUPQHs+VFErcmA9SN8nkppLyf00lIHCWR6v9HYC2XgjHN2JX8ARJwTEddhHjvleMc/SlHncU6fpZ8itWx8NzBL6MwPKEjmHgKp0VYBMY6PHrSR/j/XtgOweodp1JBIr6yLLlyCu/lJksCwMUIZAgMBAAGjggOSMIIDjjAfBgNVHSMEGDAWgBTwnIX9op99j8lou9XUiU0dvtOQ/zAdBgNVHQ4EFgQUYe6lb4/s4J82aqWfNDaev2MD8k4wIwYDVR0RBBwwGoIMKi5rb29rYXBwLmNuggprb29rYXBwLmNuMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwgZ8GA1UdHwSBlzCBlDBIoEagRIZCaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL1JhcGlkU1NMR2xvYmFsVExTUlNBNDA5NlNIQTI1NjIwMjJDQTEuY3JsMEigRqBEhkJodHRwOi8vY3JsNC5kaWdpY2VydC5jb20vUmFwaWRTU0xHbG9iYWxUTFNSU0E0MDk2U0hBMjU2MjAyMkNBMS5jcmwwPgYDVR0gBDcwNTAzBgZngQwBAgEwKTAnBggrBgEFBQcCARYbaHR0cDovL3d3dy5kaWdpY2VydC5jb20vQ1BTMIGHBggrBgEFBQcBAQR7MHkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBRBggrBgEFBQcwAoZFaHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL1JhcGlkU1NMR2xvYmFsVExTUlNBNDA5NlNIQTI1NjIwMjJDQTEuY3J0MAkGA1UdEwQCMAAwggF/BgorBgEEAdZ5AgQCBIIBbwSCAWsBaQB3AOg+0No+9QY1MudXKLyJa8kD08vREWvs62nhd31tBr1uAAABgWbUskcAAAQDAEgwRgIhAL1qZKig2NqYtlAVnaXtJ7Tk+OuROrPHGR8t2zyNTb6xAiEAsLL5yuvJ/WtIj0bLwbKR0/nFe/Juub3aZjrNvUhzZIIAdQA1zxkbv7FsV78PrUxtQsu7ticgJlHqP+Eq76gDwzvWTAAAAYFm1LJ6AAAEAwBGMEQCIDK3qkxuTUB1Dngycy9/LECyVXjlpi2eJBAC6oZPJQ/VAiBs1iupiYwavmD2m6QrDzzZrW2MJWx4LMxCtvf6pmN3NwB3ALc++yTfnE26dfI5xbpY9Gxd/ELPep81xJ4dCYEl7bSZAAABgWbUsnkAAAQDAEgwRgIhAL5vfkeeQAwowpkUhf0U/Z2fFiL8IY+QsCyED40zw0d1AiEA02UjHM3tztsrMn2xyzmTkVgXnly/OozP+LjdwdsTa6gwDQYJKoZIhvcNAQELBQADggIBAGdBom7y2NXOZL7KxtZFBFQCBJrEQOHZvuN4Etkmotb+0aVnrEZ/Qc5+zl86YqURcmOZgPhzSjuVfTvUsJJ1TkC/tMYofoo1Db7B5yRxQmjEYRNLFAZ8rbP/pd5Js8ZGWW7RcxqG+zebqDDD2CWvpiJNStu/yjWwdsFXQUwU0XOGUfwJDHD0eSBaa3uclAn3kUqF82l2X9qzvy9EexGjPOSWyNuksjeScr32OyNUrwo7RUYJU4Ztl8xaiaxcvg7u2/o9WWzPhHMVI6ijrJbj6Wn+BMe3SMYcR/L+foItjWAuOqOVB7IKO32JgCkP1vyl8AWs0up8ddI/9jn3px8ii0HphKJnkCPZNmLnnOhFXQjoPy2PRmKqusP0kleJw1ZpQXsQpm3yZqFggyFH8S4ii83kkHBynC89dlwlBIkF29Ds4mYjau6mZZxE69By7ptvFvcYREYslaRMxd166PEf5mp5jBKSiI2iYcP8PQOudhObpkuw+KHz8ntkf++HeluuEiqsKyiyyiXm5dmRE/9uIUjPcQia5ohs2VpAgOLhLG6yphWCHQ6awFj9q3Ce1Mm5yXyZFvLXWGwoJj6jCVXAZDchwX4uiHW2fI3GHz1pTPg0L3NE/M2CHnQWJlh9cgOljmaZXCeKmLdA9phD+NQho5xVElRiF+rijlrkMutS7p1Y-----END CERTIFICATE----- 1 s:C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1   i:C = US, O = DigiCert Inc, OU = www.digicert.com, CN = DigiCert Global Root CA-----BEGIN CERTIFICATE-----MIIFyzCCBLOgAwIBAgIQCgWbJfVLPYeUzGYxR3U4ozANBgkqhkiG9w0BAQsFADBhMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBDQTAeFw0yMjA1MDQwMDAwMDBaFw0zMTExMDkyMzU5NTlaMFwxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE0MDIGA1UEAxMrUmFwaWRTU0wgR2xvYmFsIFRMUyBSU0E0MDk2IFNIQTI1NiAyMDIyIENBMTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAKY5PJhwCX2UyBb1nelu9APen53D5+C40T+BOZfSFaB0v0WJM3BGMsuiHZX2IHtwnjUhLL25d8tgLASaUNHCBNKKUlUGRXGztuDIeXb48d64k7Gk7u7mMRSrj+yuLSWOKnK6OGKe9+s6oaVIjHXY+QX8p2I2S3uew0bW3BFpkeArLBCU25iqeaoLEOGIa09DVojd3qc/RKqr4P11173R+7Ub05YYhuIcSv8e0d7qN1sO1+lfoNMVfV9WcqPABmOasNJ+ol0hAC2PTgRLy/VZo1L0HRMr6j8cbR7q0nKwdbn4Ar+ZMgCgCcG9zCMFsuXYl/rqobiyV+8U37dDScAebZTIF/xPEvHcmGi3xxH6g+dTCjetOjJx8sdXUHKXGXC9ka33q7EzQIYlZISF7EkbT5dZHsO2DOMVLBdP1N1oUp0/1f6fc8uTDduELoKBRzTTZ6OOBVHeZyFZMMdi6tA5s/jxmb74lqH1+jQ6nTU2/MmahGNxUuJpyhUHezgBA6sto5lNeyqc+3Cr5ehFQzUuwNsJaWbDdQk1v7lqRaqOlYjniomOl36J5txTs0wL7etCeMRfyPsmc+8HmH77IYVMUOcPJb+0gNuSmAkvf5QXbgPIZursn/UYnP9obhNbHc/9LYdQkB7CXyX9mPexnDNO7pggNA2jpbEarLmZGi4grMmfAgMBAAGjggGCMIIBfjASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQWBBTwnIX9op99j8lou9XUiU0dvtOQ/zAfBgNVHSMEGDAWgBQD3lA1VtFMu2bwo+IbG8OXsj3RVTAOBgNVHQ8BAf8EBAMCAYYwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMHYGCCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQuY29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGlnaUNlcnRHbG9iYWxSb290Q0EuY3J0MEIGA1UdHwQ7MDkwN6A1oDOGMWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RDQS5jcmwwPQYDVR0gBDYwNDALBglghkgBhv1sAgEwBwYFZ4EMAQEwCAYGZ4EMAQIBMAgGBmeBDAECAjAIBgZngQwBAgMwDQYJKoZIhvcNAQELBQADggEBAAfjh/s1f5dDdfm0sNm74/dWMbbsxfYV1LoTpFt+3MSUWvSbiPQfUkoV57b5rutRJvnPP9mSlpFwcZ3e1nSUbi2oITGA7RCOj23I1F4zk0YJm42qAwJIqOVenR3XtyQ2VR82qhC6xslxtNf7f2Ndx2G7Mem4wpFhyPDT2P6UJ2MnrD+FC//ZKH5/ERo96ghz8VqNlmL5RXo8Ks9rMr/Ad9xwY4hyRvAz5920myUffwdUqc0SvPlFnahsZg15uT5HkK48tHR0TLuLH8aRpzh4KJ/Yp0sARNb+9i1R4Fg5zPNvHs2BbIve0vkwxAy+R4727qYzl3027w9jEFC6HMXRaDc=-----END CERTIFICATE--------Server certificatesubject=CN = *.kookapp.cnissuer=C = US, O = &quot;DigiCert, Inc.&quot;, CN = RapidSSL Global TLS RSA4096 SHA256 2022 CA1---No client certificate CA names sentPeer signing digest: SHA256Peer signature type: RSA-PSSServer Temp Key: X25519, 253 bits---SSL handshake has read 3993 bytes and written 392 bytesVerification: OK---New, TLSv1.3, Cipher is TLS_AES_256_GCM_SHA384Server public key is 2048 bitSecure Renegotiation IS NOT supportedCompression: NONEExpansion: NONENo ALPN negotiatedEarly data was not sentVerify return code: 0 (ok)---\n\nåœ¨è¿™é‡Œé¢èƒ½çœ‹åˆ°å¦‚ä¸‹å†…å®¹\nSSL handshake has read 3993 bytes and written 392 bytesVerification: OK\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„æœ¬åœ°ä¸»æœºæ˜¯èƒ½æˆåŠŸè®¤è¯kookapp.cnçš„sslè¯ä¹¦çš„ï¼Œé‚£ä¹ˆé—®é¢˜å°±å‡ºç°åœ¨pythonçš„sslæ¨¡å—ä¸­äº†ï¼\n2.3 æ£€æµ‹pythonçš„sslæ¨¡å—pythonå¼€å¯ä¸€ä¸ªREPLï¼Œè¾“å…¥å¦‚ä¸‹çš„ä¸¤è¡Œä»£ç \nimport sslssl.create_default_context().cert_store_stats()\n\nè¾“å‡ºçš„å†…å®¹å¦‚ä¸‹\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.create_default_context().cert_store_stats()&#123;&#x27;x509&#x27;: 0, &#x27;crl&#x27;: 0, &#x27;x509_ca&#x27;: 0&#125;\n\nè¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥é—®é¢˜äº†ï¼Œå…¨éƒ½æ˜¯0ï¼éš¾æ€ªè¯´æ²¡æœ‰åŠæ³•è·å–æœ¬åœ°çš„CAè¯ä¹¦ã€‚\nä½œä¸ºå¯¹æ¯”ï¼Œä¸€å°æ­£å¸¸çš„windows11ç”µè„‘è¾“å‡ºå¦‚ä¸‹ï¼Œåº”è¯¥æ˜¯æœ‰æ•°å€¼çš„ã€‚\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.create_default_context().cert_store_stats()&#123;&#x27;x509&#x27;: 87, &#x27;crl&#x27;: 0, &#x27;x509_ca&#x27;: 84&#125;\n\n2.4 è§£å†³é”™è¯¯æ‰¾åˆ°äº†é”™è¯¯ï¼Œé‚£å°±å¾—æƒ³åŠæ³•è§£å†³ï¼\npythonå¼€å¯ä¸€ä¸ªREPLï¼Œè¾“å…¥å¦‚ä¸‹çš„ä¸¤è¡Œä»£ç \nimport sslssl.get_default_verify_paths()\n\nè¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼Œè¿™æ˜¯æœ¬åœ°pythonæŸ¥æ‰¾CAè¯ä¹¦çš„ä½ç½®\n&gt;&gt;&gt; import ssl&gt;&gt;&gt; ssl.get_default_verify_paths()DefaultVerifyPaths(cafile=None, capath=&#x27;/usr/local/openssl-1.1.1/ssl/certs&#x27;, openssl_cafile_env=&#x27;SSL_CERT_FILE&#x27;, openssl_cafile=&#x27;/usr/local/openssl-1.1.1/ssl/cert.pem&#x27;, openssl_capath_env=&#x27;SSL_CERT_DIR&#x27;, openssl_capath=&#x27;/usr/local/openssl-1.1.1/ssl/certs&#x27;)\n\nå…¶ä¸­/usr/local/openssl-1.1.1/ssl/cert.pemä¸­åº”è¯¥ä¼šä¿å­˜CAçš„ä¿¡æ¯ï¼Œä½¿ç”¨lsæŸ¥çœ‹æœ¬åœ°çš„è¿™ä¸ªæ–‡ä»¶çš„å†…å®¹\nls /usr/local/openssl-1.1.1/ssl/cert.pem\n\nå¥½å®¶ä¼™ï¼Œå‘ç°æ–‡ä»¶å‹æ ¹ä¸å­˜åœ¨ï¼\nls: cannot access &#x27;/usr/local/openssl-1.1.1/ssl/cert.pem&#x27;: No such file or directory\n\nçœ‹çœ‹opensslçš„ç‰ˆæœ¬å’Œè·¯å¾„\nopenssl  version -d\n\nè¾“å‡ºå¦‚ä¸‹\nOPENSSLDIR: &quot;/etc/pki/tls&quot;\n\näºæ˜¯çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰æˆ‘ä»¬éœ€è¦çš„cert.pem\n$ ls /etc/pki/tlscert.pem  certs  ct_log_list.cnf  misc  openssl.cnf  private\n\næœ‰ï¼é‚£ä¹ˆæ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼Œå°†å…¶å¼„åˆ°/usr/localä¸­ï¼\nln -s /etc/pki/tls/cert.pem /usr/local/openssl-1.1.1/ssl/cert.pem\n\nè¿™æ ·Pythonæ‰èƒ½æˆåŠŸæ‰¾åˆ°æœ¬åœ°çš„CAè¯ä¹¦ã€‚\n3.å®Œç¾ï¼åšå®Œè¿™ä¸€åˆ‡åï¼Œå†æ¬¡è¿è¡Œæœºå™¨äººï¼Œè¿™æ¬¡ä¹ˆæœ‰æŠ¥é”™äº†ï¼\n$ py3 main.py[FileManage] load all files[BOT] Start at: [23-02-24 00:25:29][BOT.TASK] fetch_public_channel success\n\nä¹ŸæˆåŠŸå“åº”äº†å‘½ä»¤ï¼\n\nMACä¸‹æ›´å¸¸è§ï¼Ÿä¼¼ä¹è¿™ä¸ªé—®é¢˜åœ¨macä¸‹æ›´å¸¸è§ï¼Ÿç”±äºæ²¡æœ‰ä½¿ç”¨è¿‡macè®¾å¤‡ï¼Œæœ¬æ–‡ä¸è§£é‡Šç›¸å…³å†…å®¹\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","Kook","CentOS"]},{"title":"ã€Pythonã€‘åŠ¨æ‰‹å†™ä¸€ä¸ªgitè‡ªåŠ¨ä¸Šä¼ è„šæœ¬ï¼","url":"/posts/1095979040/","content":"æœ¬ç¯‡åšå®¢æ¥æ•™ä½ ç”¨Pythonå†™ä¸€ä¸ªç®€å•çš„gitè‡ªåŠ¨ä¸Šä¼ è„šæœ¬\n\n\nå‰è¨€ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿ï¼Ÿ\næœ‰çš„æ—¶å€™ï¼Œæˆ‘çš„å­¦ä¹ ä»£ç å…¶å®æ²¡å•¥å¥½commitçš„ï¼Œå†™ä¸€ä¸ªè‡ªåŠ¨ä¸Šä¼ çš„è„šæœ¬ï¼Œå°±å¯ä»¥è‡ªåŠ¨æ‰§è¡Œå®Œæ‰€æœ‰çš„å‘½ä»¤ï¼Œè€Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨è¿›è¡Œgitä¸‰æ¿æ–§æ“ä½œ\n\né¡¹ç›®ä»£ç å·²å¼€æº  https://gitee.com/musnow/learn_python_code/tree/master/code/22-09-02%20auto_git\n\næ•ˆæœå¦‚ä¸‹æŠŠEXEæ–‡ä»¶ä¸¢è¿›ä½ çš„gitä»“åº“è·¯å¾„ï¼Œç‚¹ä¸€ä¸‹å°±ä¼šè‡ªåŠ¨æ‰§è¡Œå‘½ä»¤\n\n\næ‰“å¼€ä½ çš„ä»“åº“å¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸä¸Šä¼ äº†\n\næºç å®ç°å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨OSå¾€ç³»ç»Ÿçš„å‘½ä»¤è¡Œé‡Œé¢å†™å‘½ä»¤è€Œå·²\nimport osimport timedef GetTime(): #è·å–å½“å‰æ—¶é—´    return time.strftime(&quot;%y-%m-%d %H:%M:%S&quot;, time.localtime())#ä¿®æ”¹é»˜è®¤çš„æäº¤ä¿¡æ¯commit_msg=f&quot; \\&quot;Code updated: &#123;GetTime()&#125;\\&quot; &quot;#gitæäº¤å‘½ä»¤cmd_1 = &quot;git status&quot;cmd_2 = &quot;git add --all&quot;cmd_3 = &quot;git commit -m&quot;+commit_msgcmd_4 = &quot;git push&quot;print(&quot;[å¼€å§‹] æ‰§è¡Œgitè‡ªåŠ¨ä¸Šä¼ &quot;)print(&#x27;[CMD]&#x27;,cmd_1)os.system(cmd_1)#æ˜¾ç¤ºå½“å‰åŠ¨æ€print(&#x27;[CMD]&#x27;,cmd_2)os.system(cmd_2)#æ·»åŠ æ‰€æœ‰æ–‡ä»¶æ›´æ”¹åˆ°å·¥ä½œåŒºprint(&#x27;[CMD]&#x27;,cmd_3)os.system(cmd_3)#è‡ªåŠ¨commitprint(&#x27;[CMD]&#x27;,cmd_4)os.system(cmd_4)#pushä¸Šä¼ print(&quot;[ç»“æŸ] å®Œæˆgitè‡ªåŠ¨ä¸Šä¼ &quot;)print(&quot;çª—å£å°†åœ¨5såå…³é—­...&quot;)time.sleep(5)#ä¼‘çœ 5ç§’å¯ä»¥çœ‹æ¸…æ¥šç»“æœ\n\nè¿™é‡Œçš„commitä¿¡æ¯éå¸¸ç²—æš´ï¼Œå°±æ˜¯å½“å‰çš„æ—¶é—´ã€‚æ‰€ä»¥å¦‚æœä½ æ˜¯åœ¨å†™é¡¹ç›®ï¼Œé‚£è‚¯å®šè¿˜æ˜¯å¥½å¥½å†™commitä¿¡æ¯çš„å¥½ã€‚ä¸ç„¶åˆ°æ—¶å€™æƒ³å›é€€ç‰ˆæœ¬éƒ½ä¸çŸ¥é“å¾€å“ªå„¿å›é€€ğŸ˜‚\nåˆ©ç”¨pyinstalleræ‰“åŒ…æˆexeåœ¨windowså‘½ä»¤è¡Œä¸­ï¼Œå®‰è£…pyinstalleråŒ…\npip install pyinstaller\n\nå®‰è£…å®Œæˆä¹‹åï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥pyinstallerï¼Œå¤§æ¦‚ç‡ä¼šæŠ¥é”™\nPS D:\\MyCode\\Python\\code\\22-09-02 auto_git&gt; pyinstallerpyinstaller : æ— æ³•å°†â€œpyinstallerâ€é¡¹è¯†åˆ«ä¸º cmdletã€å‡½æ•°ã€è„šæœ¬æ–‡ä»¶æˆ–å¯è¿è¡Œç¨‹åºçš„åç§°ã€‚è¯·æ£€æŸ¥åç§°çš„æ‹¼å†™ï¼Œå¦‚æœåŒ…æ‹¬è·¯å¾„ï¼Œè¯·ç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚æ‰€åœ¨ä½ç½® è¡Œ:1 å­—ç¬¦: 1+ pyinstaller+ ~~~~~~~~~~~    + CategoryInfo          : ObjectNotFound: (pyinstaller:String) [], CommandNotFoundException    + FullyQualifiedErrorId : CommandNotFoundException\n\nè¿™æ—¶å€™å¦‚æœä½ å»æœæ•™ç¨‹ï¼Œä»€ä¹ˆæ·»åŠ ç¯å¢ƒå˜é‡å•Šå·´æ‹‰å·´æ‹‰çš„ï¼Œå¾ˆéº»çƒ¦ï¼Œè€Œä¸”è¿˜ä¸ä¸€å®šæœ‰ç”¨\n\nåœ¨æˆ‘çš„win11ä¸Šï¼Œæ·»åŠ ç¯å¢ƒå˜é‡å°±æ˜¯æ— æ•ˆçš„\n\nè¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°pythonçš„å®‰è£…è·¯å¾„ï¼Œå’Œé‡Œé¢å­˜æ”¾pipåŒ…çš„è·¯å¾„\nåœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œå­˜æ”¾è·¯å¾„å¦‚ä¸‹ã€‚å¦‚æœä½ æ‰¾ä¸åˆ°ï¼Œå¯ä»¥ç›´æ¥å…¨ç›˜æœç´¢pyinstaller.exe\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤äº†\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe -F æ–‡ä»¶å.py\n\néšåpyinstallerå°±ä¼šå¼€å§‹æ‰“åŒ…ï¼Œå¹¶åœ¨å½“å‰è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ªbuildå’Œdistæ–‡ä»¶å¤¹ã€‚å…¶ä¸­distæ–‡ä»¶å¤¹é‡Œé¢å°±å­˜æ”¾äº†æˆ‘ä»¬çš„exeæ–‡ä»¶\n\nåˆ©ç”¨ResourceHackerä¿®æ”¹exeæ–‡ä»¶çš„iconå®é™…ä¸Šï¼Œpyinstalleræ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹exeæ–‡ä»¶çš„iconçš„ï¼Œå‘½ä»¤å¦‚ä¸‹\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\local-packages\\Python310\\Scripts\\pyinstaller.exe -F -w -i å›¾æ ‡.ico æ–‡ä»¶å.py\n\nåœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œå›¾æ ‡çš„ç¡®ä¿®æ”¹æˆåŠŸäº†ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå¤šæ¬¡å¼¹å‡ºå¾ˆå¤šä¸ªå‘½ä»¤è¡Œï¼Œéå¸¸ä¸é›…è§‚ï¼\næ‰€ä»¥æˆ‘å°±ä¸ç”¨pyinstalleræ¥ç”Ÿæˆå›¾æ ‡ï¼Œè€Œæ˜¯é‡‡ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ResourceHackerï¼ˆå®‰è£…åŒ…è‡ªè¡Œç™¾åº¦ï¼‰\n\nç‚¹å‡»å›¾æ ‡ç»„é‡Œé¢çš„å›¾æ ‡\n\nå³é”®è¿™ä¸ª0:0ï¼Œé€‰æ‹©â€œæ›¿æ¢å›¾æ ‡â€ï¼Œæ‰¾åˆ°ä½ æƒ³è¦çš„å›¾æ ‡è¿›è¡Œæ›¿æ¢å³å¯\nå›¾æ ‡åªæ”¯æŒ.icoæ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªç½‘ç«™è¿›è¡Œjpgè½¬ico\n\nhttp://www.ico51.cn/\n\nä¿®æ”¹å¥½åï¼Œéœ€è¦ç‚¹ç»¿è‰²çš„ä¿å­˜æŒ‰é’®ã€‚ç„¶åå°±ä¿®æ”¹æˆåŠŸäº†\n\n\nå¦‚æœä½ å‘ç°æ²¡æœ‰ä¿®æ”¹æˆåŠŸï¼Œå¯èƒ½æ˜¯å› ä¸ºwindowsç¼“å­˜çš„é—®é¢˜ï¼Œé‡å¯ç”µè„‘å³å¯ï¼\nç„¶åä½ å°±å¯ä»¥æŠŠè¿™ä¸ªexeä¸¢åˆ°ä»»ä½•ä½ æƒ³è®¿åˆ°çš„gitä»“åº“è·¯å¾„ä¸‹ï¼Œè‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶å•¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","git"]},{"title":"ã€Pythonã€‘pipä¸‹è½½ä½¿ç”¨å›½å†…é•œåƒæº","url":"/posts/783373963/","content":"pipä¸‹è½½ä½¿ç”¨å›½å†…é•œåƒæº\n\n\n1.å¦‚ä½•ä½¿ç”¨åœ¨ç›´æ¥ç”¨pipå®‰è£…åŒ…çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ä¼šéå¸¸éå¸¸æ…¢\nå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨å®‰è£…çš„æ—¶å€™ä½¿ç”¨æ¸…åçš„é•œåƒæº\n-i https://pypi.tuna.tsinghua.edu.cn/simple\n\næ¯”å¦‚ä¸‹é¢çš„æ“ä½œ\npip3.10 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple\n\né€Ÿåº¦ç›´æ¥èµ·é£\n2.ä¿®æ”¹é…ç½®æ–‡ä»¶2.1 linuxLinuxç³»ç»Ÿï¼Œåœ¨ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.pipæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªpip.conf\nmkdir ~/.piptouch ~/.pip/pip.conf\n\nåˆ›å»ºåï¼Œåœ¨pip.confæ–‡ä»¶é‡Œé¢å†™å…¥å¦‚ä¸‹å†…å®¹\n[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple[install]trusted-host = https://pypi.tuna.tsinghua.edu.cn\n\nä¿å­˜åï¼ŒæŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ\n$ pip3.10 config listglobal.index-url=&#x27;https://pypi.tuna.tsinghua.edu.cn/simple&#x27;install.trusted-host=&#x27;https://pypi.tuna.tsinghua.edu.cn&#x27;\n\nè¿™æ ·å°±é…ç½®å¥½äº†ï¼Œå¦‚æœæ²¡æœ‰ç«‹å³ç”Ÿæ•ˆçš„è¯ï¼Œå°è¯•é‡å¯ç³»ç»Ÿã€‚\n2.2 windowswindowsä¸‹pipé…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä¸‹ï¼ˆå¦‚æœæ²¡æœ‰æ­¤æ–‡ä»¶ï¼Œåˆ›å»ºä¹‹ï¼‰\nC:\\Users\\ç”¨æˆ·å\\pip\\pip.ini\n\nè¾“å…¥å¦‚ä¸‹å†…å®¹\n[global]index-url = https://pypi.tuna.tsinghua.edu.cn/simple[install]trusted-host = pypi.tuna.tsinghua.edu.cn\n\n3.é•œåƒæºæ±‡æ€»ç›®å‰æˆ‘æµ‹è¯•èƒ½ç›´æ¥è®¿é—®çš„é•œåƒæºæœ‰ä¸‹é¢å‡ ä¸ªã€‚\næ¸…å https://pypi.tuna.tsinghua.edu.cn/simpleè±†ç“£ https://pypi.doubanio.com/simple/ä¸­ç§‘å¤§ https://mirrors.bfsu.edu.cn/pypi/web/simple/é˜¿é‡Œäº‘ https://mirrors.aliyun.com/pypi/simple/ä¸­å›½ç§‘æŠ€å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/åä¸­ç†å·¥å¤§å­¦ï¼šhttp://pypi.hustunique.com/å±±ä¸œç†å·¥å¤§å­¦ï¼šhttp://pypi.sdutlinux.org/\n\nä½ å¯ä»¥æŒ¨ä¸ªå°è¯•ä¸‹ï¼Œçœ‹çœ‹å“ªä¸ªæ›´å¿«ä¸€äº›ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Pythonã€‘è®¾ç½®loggingæ—¥å¿—æ—¶é—´çš„æ—¶åŒº","url":"/posts/1349268248/","content":"è®¾ç½®loggingæ—¥å¿—æ—¶é—´çš„æ—¶åŒº\n\n\n1.é—®é¢˜æœ€è¿‘æˆ‘çš„å‡ ä¸ªpython-boté¡¹ç›®éƒ½æ”¾åœ¨äº†replitä¸Šé¢ç™½å«–è¿è¡Œï¼Œäºæ˜¯é‡åˆ°äº†ä¸€ä¸ªå¾ˆè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚replitçš„ç»ˆç«¯é‡‡ç”¨çš„æ˜¯UTCæ ‡å‡†æ—¶é—´ï¼Œæ¯”åŒ—äº¬æ—¶é—´æ™šäº†8hï¼Œè€Œæˆ‘ä¹‹å‰çš„é¡¹ç›®ï¼Œå…¨éƒ½æ˜¯ç”¨printæ¥æ‰“å°ä¿¡æ¯çš„ï¼ˆå½“æ—¶è¿˜ä¸ä¼šç”¨loggingï¼‰\nä¸ºäº†çŸ¥é“æ—¥å¿—è¾“å‡ºçš„æ—¶é—´ï¼Œæˆ‘åœ¨æ¯ä¸€ä¸ªprinté‡Œé¢éƒ½è°ƒç”¨äº†ä¸€ä¸ªè·å–å½“å‰æ—¶é—´çš„å‡½æ•°\ndef getTime():    &quot;&quot;&quot;è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º `23-01-01 00:00:00`&quot;&quot;&quot;    return time.strftime(&quot;%y-%m-%d %H:%M:%S&quot;, time.localtime())\n\nè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ç³»ç»Ÿçš„å½“å‰æ—¶é—´ã€‚å¯¹äºlinuxã€windowsè¿™äº›æ—¶åŒºæ­£ç¡®çš„æœºå™¨è€Œè¨€ï¼Œè¾“å‡ºçš„éƒ½æ˜¯åŒ—äº¬æ—¶é—´ï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚\n\nå¦‚æœä½ çš„linuxæœºå™¨ï¼ˆç‰¹åˆ«æ˜¯ç”¨dockerå®‰è£…çš„ï¼‰æ—¶åŒºæœ‰é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« æ¥è§£å†³: ç‚¹æˆ‘\n\nä½†æ˜¯åˆ°replitä¸Šé¢å°±ä¸ä¸€æ ·äº†ï¼Œå³ä¾¿ä½ åœ¨.replitæ–‡ä»¶ä¸­æ·»åŠ äº†æ—¶åŒºçš„ç¯å¢ƒå˜é‡ï¼Œå…¶ä¾æ—§æ— æ³•è®©localtimeè¿”å›åŒ—äº¬æ—¶é—´\nTZ = &quot;Asia/Shanghai&quot;\n\né…ç½®äº†TZç¯å¢ƒå˜é‡åï¼Œshellä¸­è¾“å…¥dateæŸ¥çœ‹å½“å‰æ—¶é—´ï¼Œä¾æ—§æ™š8hï¼Œå¹¶éåŒ—äº¬æ—¶é—´ã€‚\n\næˆ‘å·²ç»å°è¯•è¿‡äº†ï¼Œreplitè¿™ä¸ªå¹¶ä¸èƒ½åƒ linuxç³»ç»Ÿä¿®æ”¹æ—¶åŒº ä¸€æ ·ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ã€‚\næˆ‘ä»¬å°±åªèƒ½ä»pythonçš„ä»£ç ä¸‹æ‰‹æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚\n2.è§£å†³é¦–å…ˆæ˜¯getTimeå‡½æ•°å¦‚ä½•å¼ºåˆ¶è¿”å›åŒ—äº¬æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦å°†timeæ”¹æˆä½¿ç”¨datetime\nfrom datetime import datetimefrom zoneinfo import ZoneInfo # åœ¨Py3.9ä»¥åæ˜¯æ ‡å‡†åº“def getTime():    &quot;&quot;&quot;è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼ä¸º `23-01-01 00:00:00`&quot;&quot;&quot;    a = datetime.now(ZoneInfo(&#x27;Asia/Shanghai&#x27;)) # è¿”å›åŒ—äº¬æ—¶é—´    return a.strftime(&#x27;%y-%m-%d %H:%M:%S&#x27;)\n\né’ˆå¯¹loggingæ¨¡å—ï¼Œä¹Ÿéœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†\n\nå‚è€ƒ https://zhuanlan.zhihu.com/p/304672864\n\næŸ¥é˜…æ–‡æ¡£ï¼Œå¾—çŸ¥ logging æ¨¡å—ä¸­ asctime çš„æ—¶é—´ä½¿ç”¨çš„æ˜¯time.localtime()è¿”å›çš„æ—¶é—´ \n\næ–‡æ¡£ï¼šlibrary&#x2F;logging å’Œ library&#x2F;time\n\nè€Œ time.localtime() åˆæ˜¯ä½¿ç”¨çš„ time.time() è¿”å›çš„æ—¶é—´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ time.time() è¿”å›çš„æ˜¯ UTC æ—¶é—´æˆ³ï¼Œå³ä» 1970-1-1 00:00:00 åˆ°ç°åœ¨çš„ç§’æ•°ï¼Œç”±äºæ—¶åŒºä¸å¯¹ï¼Œæ—¶é—´æˆ³æ²¡æœ‰è½¬æˆä¸­å›½æ‰€åœ¨çš„ UTC+8 æ—¶åŒºçš„æ—¶é—´å­—ç¬¦ä¸²ã€‚\nç»è¿‡ stackoverflow ä¸Šè¿™ç¯‡å›ç­”çš„æé†’ï¼Œå¯ä»¥è®¾å®š logging.Formatter.converter æ¥è½¬æ¢å¯è¯»æ—¶é—´ï¼Œä½†æ˜¯å›ç­”é‡Œæ˜¯è½¬æ¢æˆ GMT æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±é‡å†™ä¸€ä¸ªå‡½æ•°æ¥åŠ ä¸Š UTC åç§»ï¼Œè¿”å›æ­£ç¡®çš„ä¸œå…«åŒºæ—¶é—´ï¼Œä¼ ç»™ logging.Formatter.converter\nä¿®æ”¹logging.Formatter.converterimport loggingimport datetimedef beijing(sec, what):    beijing_time = datetime.datetime.now() + datetime.timedelta(hours=8)    return beijing_time.timetuple()logging.Formatter.converter = beijing# åªæ‰“å°infoä»¥ä¸Šçš„æ—¥å¿—ï¼ˆdebugä½äºinfoï¼‰logging.basicConfig(level=logging.INFO,                    format=&quot;[%(asctime)s] %(levelname)s:%(filename)s:%(funcName)s:%(lineno)d | %(message)s&quot;,                    datefmt=&quot;%y-%m-%d %H:%M:%S&quot;)\n\nè¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹åŠæ³•\nimport loggingfrom datetime import datetimefrom zoneinfo import ZoneInfo # py3.9åæ˜¯ç³»ç»Ÿåº“def beijing(sec, what):    beijing_time = datetime.now(ZoneInfo(&#x27;Asia/Shanghai&#x27;)) # è¿”å›åŒ—äº¬æ—¶é—´    return beijing_time.timetuple()# æ—¥å¿—æ—¶é—´æ”¹ä¸ºåŒ—äº¬æ—¶é—´logging.Formatter.converter = beijing\n\nä¸¤ç§åŠæ³•éƒ½å¯ä»¥çš„ï¼å…¶ä¸­ç¬¬äºŒä¸ªåŠæ³•éœ€è¦python 3.9+æ‰èƒ½æ”¯æŒ\n3.éªŒè¯å¯ä»¥çœ‹åˆ°ï¼Œä¿®æ”¹ä¹‹å‰ï¼Œlogè¾“å‡ºçš„æ—¶é—´ç¦»æ­£ç¡®çš„æ—¶é—´å·®8h\n[23-03-24 10:57:07]\n\n\nä¿®æ”¹äº†ä¹‹åï¼Œè¾“å‡ºçš„æ—¶é—´å°±å¯¹äº†ï¼å·²ç»æ˜¯ä¸œå…«åŒºçš„æ—¶é—´äº†ã€‚\n[23-03-24 20:13:04]\n\n\nä¸è¿‡ï¼Œä¿®æ”¹è¿™ä¸ªä¹Ÿéœ€è¦çœ‹ä½ çš„é¡¹ç›®é¢å‘çš„å¯¹è±¡æ˜¯è°ã€‚å› ä¸ºæˆ‘å†™çš„éƒ½æ˜¯kookå¹³å°çš„æœºå™¨äººï¼Œkookä½œä¸ºå›½å†…å¹³å°ï¼Œå‹æ ¹æ²¡æœ‰å‡ ä¸ªæ­ªæœä»ç”¨ï¼Œæ‰€ä»¥ç›´æ¥ä¿®æ”¹ï¼Œå°†ç¨‹åºé‡Œé¢æ‰€æœ‰éœ€è¦æ¶‰åŠåˆ°å¯è¯»æ—¶é—´çš„éƒ½æŒ‡å®šä¸ºåŒ—äº¬æ—¶é—´ã€‚\nå¦‚æœä½ çš„é¡¹ç›®æ˜¯discordå¹³å°çš„æœºå™¨äººï¼Œé‚£æœ€å¥½è¿˜æ˜¯ä¿ç•™åŸçŠ¶å§ï¼\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ—¶åŒºçš„è®¾ç½®å½±å“çš„æ˜¯å¯è¯»æ—¶é—´ï¼Œå³23-03-24 20:14:48è¿™æ ·çš„æ—¶é—´å­—ç¬¦ä¸²ï¼›å’Œæ—¶é—´æˆ³æœ¬èº«çš„ç§’æ•°å¹¶æ²¡æœ‰å…³ç³»ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","Kook"]},{"title":"ã€Pythonã€‘CentOSå®‰è£…Python3.10 | è½¬è½½","url":"/posts/847195816/","content":"CentOS8å®‰è£…Python3.10\n\n\nå°†æ‰€æœ‰å‘½ä»¤é‡Œé¢pythonå¯¹åº”çš„ç‰ˆæœ¬å·æ›¿æ¢ï¼Œå°±å¯ä»¥å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„python\n1.å®‰è£…ç¼–è¯‘æ‰€éœ€çš„ä¾èµ–sudo yum -y updatesudo yum -y install openssl-devel libffi-devel bzip2-devel sqlite-develsudo yum -y groupinstall &quot;Development Tools&quot;\n\nè€ƒè™‘åˆ°æœ¬äººéœ€è¦å®‰è£…pythonç¯å¢ƒçš„ä¸€èˆ¬éƒ½æ˜¯å°æ–°æœºå­ï¼Œè¿™é‡Œé¡ºå¸¦ç»™å‡ºå‡ ä¸ªå¸¸ç”¨è½¯ä»¶åŒ…\nyum install gityum install vimyum install net-tools #netstatå‘½ä»¤\n\né¡ºä¾¿ç»™å‡ºåœ¨deepinä¸Šçš„æ“ä½œï¼Œé™¤äº†å®‰è£…åŒ…çš„å‘½ä»¤ä¸åŒï¼Œåç»­æ“ä½œå®Œå…¨ç›¸åŒï¼ï¼ˆæµ‹è¯•ä½¿ç”¨deepin v23-betaè™šæ‹Ÿæœºï¼‰\nsudo apt-get updatesudo apt-get upgrade\n\nsudo apt install make build-essential libssl-dev zlib1g-devsudo apt install libbz2-dev libreadline-dev libsqlite3-dev wget curl llvmsudo apt install libncurses5-dev libncursesw5-dev xz-utils tk-dev\n\n\n2. å®‰è£… Python 3.10 å¿…éœ€çš„ openssl &gt;&#x3D; 1.1.11.1.1q å‘å¸ƒäº 2022-Oct-12 14:17:24 ï¼Œç®—æ˜¯è¾ƒæ–°çš„ç‰ˆæœ¬äº†ï¼\n\nhttps://www.openssl.org/source/old/1.1.1/\n\n# ä¸‹è½½wget https://www.openssl.org/source/openssl-1.1.1q.tar.gz --no-check-certificate# è§£å‹tar zxf openssl-1.1.1q.tar.gz# è¿›å…¥æ–‡ä»¶å¤¹cd openssl-1.1.1q# ç”Ÿæˆmakefilesudo ./config --prefix=/usr/local/openssl-1.1.1# é€šè¿‡makeå®‰è£…sudo make &amp;&amp; sudo make install\n\nå®‰è£…å®Œæ¯•è¿™ä¸ªä¹‹åï¼Œè¯·æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸­çš„CAè¯ä¹¦æ˜¯å¦æ­£å¸¸ï¼Œå¦åˆ™pythonè¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚ï¼ˆä¸»è¦æ˜¯è°ƒç”¨apiæ—¶ä¼šæŠ¥é”™ï¼‰\nhttps://blog.musnow.top/posts/3348986841/\nç›®å‰æˆ‘åœ¨CentOS8ä¸Šå®‰è£…æ­¤ç‰ˆæœ¬opensslæ—¶ï¼Œpythonå¿…ç„¶å‡ºç°æ­¤é—®é¢˜ã€‚å»ºè®®ä¾ç…§ä¸Šæ–‡æ£€æŸ¥ï¼Œå†å¾€åæ‰§è¡Œpythonå®‰è£…æ­¥éª¤ï¼›\næ’æŸ¥å°†æ–‡ç« é‡Œé¢çš„è§£å†³æ­¥éª¤ç›´æ¥å†™åœ¨è¿™é‡Œå§ã€‚å®‰è£…å¥½opensslåï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹æ˜¯å¦å­˜åœ¨è¿™ä¸ªè·¯å¾„\nls /usr/local/openssl-1.1.1/ssl/cert.pem\n\nå¦‚æœæç¤ºæ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\nln -s /etc/pki/tls/cert.pem /usr/local/openssl-1.1.1/ssl/cert.pem\n\nè¿™æ ·å°±èƒ½é¿å…pythonå¯¼å…¥sslè¯ä¹¦å¤±è´¥ï¼\n\nPS: å¦‚ä¸Šæ“ä½œåœ¨centos7.2å’Œcentos8streamä¸­å®æµ‹æœ‰æ•ˆï¼Œå…¶ä»–ç³»ç»Ÿæ— æ³•ä¿è¯æœ‰æ•ˆï¼\n\n\ndeepinå®‰è£…çš„pythonå‡ºç°äº†ä¸Šæ–‡æåˆ°çš„sslè¯ä¹¦æ— æ³•è·å–çš„é—®é¢˜ï¼Œä¸”ç›®å‰æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°è§£å†³åŠæ³•ï¼ˆè§£å†³åŠæ³•å’Œcentosä¸åŒï¼‰\nä»¥ä¸‹æ˜¯æˆ‘åœ¨deepinè™šæ‹Ÿæœºé‡Œé¢ï¼Œç”¨æœ¬æ–‡æ–¹æ¡ˆå®‰è£…pythonåæµ‹è¯•çš„ç»“æœï¼š\n\npython3.10.5 å‡ºç°æ­¤é—®é¢˜ä¸”æœªçŸ¥ä¿®å¤åŠæ³•\npython3.10.6 æ²¡æœ‰å‡ºç°æ­¤é—®é¢˜\n\n\n3. å®‰è£… Python 3.10# ä¸‹è½½wget https://www.python.org/ftp/python/3.10.5/Python-3.10.5.tgz# è§£å‹tar zxf Python-3.10.5.tgz # è¿›å…¥æ–‡ä»¶å¤¹cd Python-3.10.5# ç”Ÿæˆmakesudo ./configure --enable-optimizations --with-openssl=/usr/local/openssl-1.1.1 --with-openssl-rpath=auto --enable-loadable-sqlite-extensions# å®‰è£…sudo make altinstall\n\nå¦‚æœå®˜ç½‘å®‰è£…æ…¢ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹è¿æ¥ä¸‹è½½å¯¹åº”ç‰ˆæœ¬\nwget https://registry.npmmirror.com/-/binary/python/3.10.6/Python-3.10.6.tgz\n\n\næ…•é›ªçš„è­¦å‘Š: ä¸ºäº†é¿å…è‡ªå·±å®‰è£…çš„pythonå½±å“ç³»ç»Ÿyumå®‰è£…çš„ä½¿ç”¨ï¼Œè¯·ä¸è¦å°†è½¯è¿æ¥ç›´æ¥è¿æ¥æˆpython\næ¯”å¦‚æˆ‘ä»¬å®‰è£…çš„æ˜¯python3.10.5ï¼Œé‚£è½¯é“¾æ¥çš„æ—¶å€™ï¼Œè¯·é“¾æ¥python3.10å‘½ä»¤ï¼Œè€Œä¸æ˜¯é“¾æ¥pythonå‘½ä»¤ï¼\nå½“å‰å®˜æ–¹æä¾›çš„python3.10å®‰è£…åŒ…ï¼Œä¼šè‡ªåŠ¨é“¾æ¥python3.10å’Œpip3.10ï¼Œç†è®ºä¸Šæ— éœ€æ‰‹åŠ¨æ“ä½œ!\n\n\nåŸæ–‡ååŠéƒ¨åˆ†éƒ½æ˜¯å»ºç«‹è½¯è¿æ¥çš„æ•™ç¨‹ï¼Œä¸ºäº†é¿å…å¼•å‘è¯¯è§£ï¼Œæ•…æ­¤åˆ é™¤ï¼\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œä¸€_äºŒã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/zltliqi/article/details/126449120\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","CentOS"]},{"title":"ã€Pythonã€‘å¯¹asyncä¸awaitçš„ç†è§£","url":"/posts/1092148697/","content":"å¯¹python asyncä¸awaitçš„ç†è§£\n\n\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒMaNong125ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/MaNong125/article/details/120987087\n\nasync&#x2F;awaitå…³é”®å­—æ˜¯å‡ºç°åœ¨python3.4ä»¥åã€‚ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ–‡ç« å¯¹async&#x2F;awaitè¿™ä¸¤ä¸ªå…³é”®å­—éƒ½æœ‰è®²è§£ï¼ŒåŒ…æ‹¬å¦‚ä½•ç”±python2çš„yield fromå‘å±•åˆ°async&#x2F;awaitè¿™ä¸¤ä¸ªå…³é”®å­—ï¼Œä»¥åŠä¸€äº›ä»£ç å®ç°éƒ½æœ‰ã€‚\nä½†æ˜¯å¯¹äºåƒæˆ‘è¿™æ ·åˆæ¬¡æ¥è§¦çš„äººæ¥è¯´ï¼Œå…‰çœ‹ä»£ç åˆ†æä¹Ÿä¸ä¸€å®šèƒ½ç†è§£ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨åº¦å¨˜ä¸Šæœç´¢å¾ˆå¤šç›¸å…³çš„ç½‘ç«™ï¼Œå½“ä¸­ä¹Ÿæœ‰å®˜ç½‘ï¼Œéƒ½æ²¡æœ‰å‘ç°èƒ½è®©æˆ‘ä¸€çœ¼çœ‹æ‡‚åœ¨ä»€ä¹ˆåœ°æ–¹å¯ä»¥ç”¨awaitï¼Œä»€ä¹ˆæƒ…å†µç”¨awaitçš„æ–‡ç« ã€‚\nç»è¿‡è‡ªå·±çš„é‡æ–°æ€è€ƒï¼Œæ€»ç®—å¯¹asyncã€awaitæœ‰ä¸€äº›åˆæ­¥çš„äº†è§£ï¼Œæ‰€ä»¥æƒ³æŠŠè‡ªå·±çš„ç†è§£è®°å½•ä¸‹æ¥ï¼Œå¸Œæœ›å¯¹ä¸€äº›å­¦ä¹ åç¨‹æˆ–è€…å¼‚æ­¥çš„åˆå­¦è€…ä¹Ÿæœ‰ä¸€å®šçš„å¸®åŠ©ã€‚\nå¯¹äºç½‘ä¸Šèƒ½æœåˆ°çš„ä¸€äº›ä»£ç å®ç°ã€ä¾‹å­ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚\nä¸€ã€é¦–å…ˆè¦çŸ¥é“ä»€ä¹ˆæ˜¯åç¨‹ã€å¼‚æ­¥ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾æœ‰1ä¸ªæ´—è¡£æˆ¿ï¼Œé‡Œé¢æœ‰10å°æ´—è¡£æœºï¼Œæœ‰ä¸€ä¸ªæ´—è¡£å·¥åœ¨è´Ÿè´£è¿™10å°æ´—è¡£æœºã€‚é‚£ä¹ˆæ´—è¡£æˆ¿å°±ç›¸å½“äº1ä¸ªè¿›ç¨‹ï¼Œæ´—è¡£å·¥å°±ç›¸å½“1ä¸ªçº¿ç¨‹ã€‚å¦‚æœæœ‰10ä¸ªæ´—è¡£å·¥ï¼Œå°±ç›¸å½“äº10ä¸ªçº¿ç¨‹ï¼Œ1ä¸ªè¿›ç¨‹æ˜¯å¯ä»¥å¼€å¤šçº¿ç¨‹çš„ã€‚è¿™å°±æ˜¯å¤šçº¿ç¨‹ï¼\né‚£ä¹ˆåç¨‹å‘¢ï¼Ÿå…ˆä¸æ€¥ã€‚å¤§å®¶éƒ½çŸ¥é“ï¼Œæ´—è¡£æœºæ´—è¡£æœæ˜¯éœ€è¦ç­‰å¾…æ—¶é—´çš„ï¼Œå¦‚æœ10ä¸ªæ´—è¡£å·¥ï¼Œ1äººè´Ÿè´£1å°æ´—è¡£æœºï¼Œè¿™æ ·æ•ˆç‡è‚¯å®šä¼šæé«˜ï¼Œä½†æ˜¯ä¸è§‰å¾—æµªè´¹èµ„æºå—ï¼Ÿæ˜æ˜1 ä¸ªäººèƒ½åšçš„äº‹ï¼Œå´è¦10ä¸ªäººæ¥åšã€‚åªæ˜¯æŠŠè¡£æœæ”¾è¿›å»ï¼Œæ‰“å¼€å¼€å…³ï¼Œå°±æ²¡äº‹åšäº†ï¼Œç­‰è¡£æœæ´—å¥½å†æ‹¿å‡ºæ¥å°±å¯ä»¥äº†ã€‚å°±ç®—å¾ˆå¤šäººæ¥æ´—è¡£æœï¼Œ1ä¸ªäººä¹Ÿè¶³ä»¥åº”ä»˜äº†ï¼Œå¼€å¥½ç¬¬ä¸€å°æ´—è¡£æœºï¼Œåœ¨ç­‰å¾…çš„æ—¶å€™å»å¼€ç¬¬äºŒå°æ´—è¡£æœºï¼Œå†å¼€ç¬¬ä¸‰å°ï¼Œâ€¦â€¦ç›´åˆ°æœ‰è¡£æœæ´—å¥½äº†ï¼Œå°±å›æ¥æŠŠè¡£æœå–å‡ºæ¥ï¼Œæ¥ç€å†å–å¦ä¸€å°çš„ï¼ˆå“ªå°æ´—å¥½å…ˆå°±å–å“ªå°ï¼Œæ‰€ä»¥åç¨‹æ˜¯æ— åºçš„ï¼‰ã€‚è¿™å°±æ˜¯è®¡ç®—æœºçš„åç¨‹ï¼æ´—è¡£æœºå°±æ˜¯æ‰§è¡Œçš„æ–¹æ³•ã€‚\nå½“ä½ ç¨‹åºä¸­æ–¹æ³•éœ€è¦ç­‰å¾…æ—¶é—´çš„è¯ï¼Œå°±å¯ä»¥ç”¨åç¨‹ï¼Œæ•ˆç‡é«˜ï¼Œæ¶ˆè€—èµ„æºå°‘ã€‚\nå¥½äº†ï¼ç°åœ¨æ¥æ€»ç»“ä¸€ä¸‹ï¼š\næ´—è¡£æˆ¿ ==&gt; è¿›ç¨‹æ´—è¡£å·¥ ==&gt; çº¿ç¨‹æ´—è¡£æœº ==&gt; æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰\n\n\n\näºŒã€async\\await çš„ä½¿ç”¨\næ­£å¸¸çš„å‡½æ•°åœ¨æ‰§è¡Œæ—¶æ˜¯ä¸ä¼šä¸­æ–­çš„ï¼Œæ‰€ä»¥ä½ è¦å†™ä¸€ä¸ªèƒ½å¤Ÿä¸­æ–­çš„å‡½æ•°ï¼Œå°±éœ€è¦æ·»åŠ asyncå…³é”®ã€‚\nasync ç”¨æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°ä¸ºå¼‚æ­¥å‡½æ•°ï¼Œå¼‚æ­¥å‡½æ•°çš„ç‰¹ç‚¹æ˜¯èƒ½åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‚èµ·ï¼Œå»æ‰§è¡Œå…¶ä»–å¼‚æ­¥å‡½æ•°ï¼Œç­‰åˆ°æŒ‚èµ·æ¡ä»¶ï¼ˆå‡è®¾æŒ‚èµ·æ¡ä»¶æ˜¯sleep(5)ï¼‰æ¶ˆå¤±åï¼Œä¹Ÿå°±æ˜¯5ç§’åˆ°äº†å†å›æ¥æ‰§è¡Œã€‚\nawait ç”¨æ¥ç”¨æ¥å£°æ˜ç¨‹åºæŒ‚èµ·ï¼Œæ¯”å¦‚å¼‚æ­¥ç¨‹åºæ‰§è¡Œåˆ°æŸä¸€æ­¥æ—¶éœ€è¦ç­‰å¾…çš„æ—¶é—´å¾ˆé•¿ï¼Œå°±å°†æ­¤æŒ‚èµ·ï¼Œå»æ‰§è¡Œå…¶ä»–çš„å¼‚æ­¥ç¨‹åºã€‚await åé¢åªèƒ½è·Ÿå¼‚æ­¥ç¨‹åºæˆ–æœ‰__await__å±æ€§çš„å¯¹è±¡ï¼Œå› ä¸ºå¼‚æ­¥ç¨‹åºä¸ä¸€èˆ¬ç¨‹åºä¸åŒã€‚å‡è®¾æœ‰ä¸¤ä¸ªå¼‚æ­¥å‡½æ•°async aï¼Œasync bï¼Œaä¸­çš„æŸä¸€æ­¥æœ‰awaitï¼Œå½“ç¨‹åºç¢°åˆ°å…³é”®å­—await b()åï¼Œå¼‚æ­¥ç¨‹åºæŒ‚èµ·åå»æ‰§è¡Œå¦ä¸€ä¸ªå¼‚æ­¥bç¨‹åºï¼Œå°±æ˜¯ä»å‡½æ•°å†…éƒ¨è·³å‡ºå»æ‰§è¡Œå…¶ä»–å‡½æ•°ï¼Œå½“æŒ‚èµ·æ¡ä»¶æ¶ˆå¤±åï¼Œä¸ç®¡bæ˜¯å¦æ‰§è¡Œå®Œï¼Œè¦é©¬ä¸Šä»bç¨‹åºä¸­è·³å‡ºæ¥ï¼Œå›åˆ°åŸç¨‹åºæ‰§è¡ŒåŸæ¥çš„æ“ä½œã€‚å¦‚æœawaitåé¢è·Ÿçš„bå‡½æ•°ä¸æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œé‚£ä¹ˆæ“ä½œå°±åªèƒ½ç­‰bæ‰§è¡Œå®Œå†è¿”å›ï¼Œæ— æ³•åœ¨bæ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¿”å›ã€‚å¦‚æœè¦åœ¨bæ‰§è¡Œå®Œæ‰è¿”å›ï¼Œä¹Ÿå°±ä¸éœ€è¦ç”¨awaitå…³é”®å­—äº†ï¼Œç›´æ¥è°ƒç”¨bå‡½æ•°å°±è¡Œã€‚æ‰€ä»¥è¿™å°±éœ€è¦awaitåé¢è·Ÿçš„æ˜¯å¼‚æ­¥å‡½æ•°äº†ã€‚åœ¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ä¸­ï¼Œå¯ä»¥ä¸æ­¢ä¸€æ¬¡æŒ‚èµ·ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç”¨å¤šä¸ªawaitã€‚\nä¸‰ã€å®ä¾‹ï¼š\nasync def test2(i):    r = await other_test(i)    print(i,r) async def other_test(i):    r = requests.get(i)    print(i)    await asyncio.sleep(4)    print(time.time()-start)    return r url = [&quot;https://segmentfault.com/p/1210000013564725&quot;,        &quot;https://www.jianshu.com/p/83badc8028bd&quot;,        &quot;https://www.baidu.com/&quot;] loop = asyncio.get_event_loop()task = [asyncio.ensure_future(test2(i)) for i in url]start = time.time()loop.run_until_complete(asyncio.wait(task))endtime = time.time()-startprint(endtime)loop.close()\n\nè¾“å‡ºç»“æœï¼š\nhttps://segmentfault.com/p/1210000013564725https://www.jianshu.com/p/83badc8028bdhttps://www.baidu.com/4.425147771835327https://segmentfault.com/p/1210000013564725 &lt;Response [200]&gt;4.5975635051727295https://www.jianshu.com/p/83badc8028bd &lt;Response [403]&gt;4.722797632217407https://www.baidu.com/ &lt;Response [200]&gt;4.722797632217407\n\nå¯¹äºä¸‹é¢è¿™å‡ è¡Œä»£ç ï¼š\nloop = asyncio.get_event_loop()task = [asyncio.ensure_future(test2(i)) for i in url]loop.run_until_complete(asyncio.wait(task))loop.close()\n\nå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°å…·ä½“è®²è§£ï¼Œåœ¨è¿™å¯ç”¨ä¸‹å›¾æ¥ç²—ç•¥å½¢å®¹ä¸€ä¸‹\n\nå½“æ‰€æœ‰çš„å¼‚æ­¥ç¨‹åºè¿è¡Œå®Œå°±ä¼šè¿”å›æœ€åç»“æœã€‚\nå¯¹äºä»€ä¹ˆæ˜¯taskå’Œfutureï¼Œasyncio.wait()ä¸asyncio.gather()ã€asyncio.ensure_future(ï¼‰è¿™äº›å¤§å®¶å¯ä»¥ç½‘ä¸Šæ‰¾åˆ°è§£é‡Šã€‚\nè¯´åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ ä¹Ÿå¤§æ¦‚æ¸…æ¥šåœ¨ä»€ä¹ˆæ—¶å€™ç”¨asyncã€ä»€ä¹ˆæ—¶å€™awaitäº†å§! å¦‚æœæœ‰è¯´å¾—ä¸å¯¹çš„åœ°æ–¹ï¼Œè¯·å¤šå¤šæŒ‡æ­£ï¼ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","Kook"]},{"title":"ã€Pythonã€‘pycharmé…ç½®ä»£ç å­—ä½“+ä¸­æ–‡å­—ä½“","url":"/posts/232801310/","content":"å¦‚é¢˜ï¼Œé»˜è®¤pycharmçš„å­—ä½“æ˜¯å®‹ä½“å’Œæ¥·ä½“çš„ç»“åˆï¼Œæˆ‘æœ¬äººå®åœ¨æ˜¯ä¸å–œæ¬¢å®‹ä½“ï¼ŒåŒ…æ‹¬wordä¸­æˆ‘ä¹Ÿæ˜¯ç”¨é»‘ä½“åˆ›ä½œï¼Œæœ€ç»ˆäº¤ä½œä¸šçš„æ—¶å€™æ‰ä¼šæ”¹æˆå®‹ä½“ï¼ˆå®‹ä½“çœ‹çš„çœŸçš„å¾ˆä¸èˆ’æœâ€¦â€¦ï¼‰\nä½†æ˜¯jbé‡Œé¢ä¼¼ä¹æ²¡æœ‰æä¾›ä¸­æ–‡å­—ä½“è¿™ä¸€è®¾ç½®é€‰é¡¹ï¼Œè¦æ”¹å°±åªèƒ½ä¿®æ”¹æ•´ä½“\nä½†æˆ‘åˆæƒ³è®©ä»£ç çš„è‹±æ–‡ç”¨ç­‰å®½å­—ä½“ï¼Œä¸­æ–‡è®¾ç½®æˆé»‘ä½“ï¼Œè¦æ€ä¹ˆåŠå‘¢ï¼Ÿ\nè¿™æ—¶å€™è¦ç”¨pycçš„å›æ»šå­—ä½“é…ç½®\nåœ¨pycçš„å­—ä½“è®¾ç½®ä¸­ï¼Œé»˜è®¤ç•Œé¢å¦‚ä¸‹ï¼Œæˆ‘ä»¬åªèƒ½è®¾ç½®ä¸€ä¸ªå­—ä½“\n\nä½†æ˜¯æ‰“å¼€ç‰ˆå¼è®¾ç½®ï¼Œè¿™é‡Œä¼šæœ‰ä¸€ä¸ªå›æ»šå­—ä½“ï¼Œå…¶èƒ½è®¾ç½®ä¸»å­—ä½“æ— æ³•æ˜¾ç¤ºçš„å­—ç¬¦\næ¯”å¦‚jb monoå­—ä½“å°±ä¹ˆæœ‰å¯¹ä¸­æ–‡è¿›è¡Œè¿‡é€‚é…ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„ä¸­æ–‡æ˜¯å®‹ä½“ã€‚è¿™é‡Œæˆ‘ä»¬å°†å›æ»šå­—ä½“æ”¹æˆå¾®è½¯é›…é»‘\n\né¡¿æ—¶èˆ’æœäº†ï¼\n\nåªä¸è¿‡pycè‡ªå·±çš„ç•Œé¢ç”¨çš„è¿˜æ˜¯å®‹ä½“ï¼Œè¿™éœ€è¦åœ¨è®¾ç½®-å¤–è§‚é‡Œé¢ä¿®æ”¹\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Pythonã€‘deepinä¸‹pipå®‰è£…åŒ…æ‰¾ä¸åˆ°Python.hçš„è§£å†³åŠæ³•","url":"/posts/824840011/","content":"ä»Šå¤©ç”¨deepinå®‰è£…pythonåŒ…çš„æ—¶å€™ï¼ŒæŠ¥äº†è¿™ä¸ªé—®é¢˜ã€‚\n\n\næŠ¥é”™ä¸‹é¢è¿™ä¹ˆé•¿ä¸€ä¼ æŠ¥é”™ï¼Œå…¶å®æ ¸å¿ƒçš„å°±åªæœ‰ä¸€ç‚¹ï¼š Python.hæ–‡ä»¶æ‰¾ä¸åˆ°ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜\n(venv) mothra@mothra-PC:~/code/baidu-upd/encrypt2bdy$ pip3 install ruamel.yamlCollecting ruamel.yaml  Using cached https://files.pythonhosted.org/packages/d9/0e/2a05efa11ea33513fbdf4a2e2576fe94fd8fa5ad226dbb9c660886390974/ruamel.yaml-0.17.32-py3-none-any.whlCollecting ruamel.yaml.clib&gt;=0.2.7; platform_python_implementation == &quot;CPython&quot; and python_version &lt; &quot;3.12&quot; (from ruamel.yaml)  Using cached https://files.pythonhosted.org/packages/d5/31/a3e6411947eb7a4f1c669f887e9e47d61a68f9d117f10c3c620296694a0b/ruamel.yaml.clib-0.2.7.tar.gzBuilding wheels for collected packages: ruamel.yaml.clib  Running setup.py bdist_wheel for ruamel.yaml.clib ... error  Complete output from command /home/mothra/code/baidu-upd/encrypt2bdy/venv/bin/python3 -u -c &quot;import setuptools, tokenize;__file__=&#x27;/tmp/pip-install-55f2q2xf/ruamel.yaml.clib/setup.py&#x27;;f=getattr(tokenize, &#x27;open&#x27;, open)(__file__);code=f.read().replace(&#x27;\\r\\n&#x27;, &#x27;\\n&#x27;);f.close();exec(compile(code, __file__, &#x27;exec&#x27;))&quot; bdist_wheel -d /tmp/pip-wheel-m1ay2dbt --python-tag cp37:  sys.argv [&#x27;-c&#x27;, &#x27;bdist_wheel&#x27;, &#x27;-d&#x27;, &#x27;/tmp/pip-wheel-m1ay2dbt&#x27;, &#x27;--python-tag&#x27;, &#x27;cp37&#x27;]  test compiling /tmp/tmp_ruamel_qu43oc5r/test_ruamel_yaml.c -&gt; test_ruamel_yaml OK  running bdist_wheel  running build  running build_py  Generating grammar tables from /usr/lib/python3.7/lib2to3/Grammar.txt  Generating grammar tables from /usr/lib/python3.7/lib2to3/PatternGrammar.txt  creating build  creating build/lib.linux-x86_64-3.7  creating build/lib.linux-x86_64-3.7/ruamel  copying .ruamel/__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel  creating build/lib.linux-x86_64-3.7/ruamel/yaml  copying .ruamel/yaml/__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml  creating build/lib.linux-x86_64-3.7/ruamel/yaml/clib  copying ./__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib  copying ./setup.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib  copying ./LICENSE -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib  running build_ext  building &#x27;_ruamel_yaml&#x27; extension  creating build/temp.linux-x86_64-3.7  x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -I/home/mothra/code/baidu-upd/encrypt2bdy/venv/include -I/usr/include/python3.7m -c _ruamel_yaml.c -o build/temp.linux-x86_64-3.7/_ruamel_yaml.o  _ruamel_yaml.c:6:10: fatal error: Python.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•   #include &quot;Python.h&quot;            ^~~~~~~~~~  compilation terminated.  error: command &#x27;x86_64-linux-gnu-gcc&#x27; failed with exit status 1----------------------------------------  Failed building wheel for ruamel.yaml.clib  Running setup.py clean for ruamel.yaml.clibFailed to build ruamel.yaml.clibInstalling collected packages: ruamel.yaml.clib, ruamel.yaml  Running setup.py install for ruamel.yaml.clib ... error    Complete output from command /home/mothra/code/baidu-upd/encrypt2bdy/venv/bin/python3 -u -c &quot;import setuptools, tokenize;__file__=&#x27;/tmp/pip-install-55f2q2xf/ruamel.yaml.clib/setup.py&#x27;;f=getattr(tokenize, &#x27;open&#x27;, open)(__file__);code=f.read().replace(&#x27;\\r\\n&#x27;, &#x27;\\n&#x27;);f.close();exec(compile(code, __file__, &#x27;exec&#x27;))&quot; install --record /tmp/pip-record-lh0gyakn/install-record.txt --single-version-externally-managed --compile --install-headers /home/mothra/code/baidu-upd/encrypt2bdy/venv/include/site/python3.7/ruamel.yaml.clib:    sys.argv [&#x27;-c&#x27;, &#x27;install&#x27;, &#x27;--record&#x27;, &#x27;/tmp/pip-record-lh0gyakn/install-record.txt&#x27;, &#x27;--single-version-externally-managed&#x27;, &#x27;--compile&#x27;, &#x27;--install-headers&#x27;, &#x27;/home/mothra/code/baidu-upd/encrypt2bdy/venv/include/site/python3.7/ruamel.yaml.clib&#x27;]    test compiling /tmp/tmp_ruamel_myagpa5e/test_ruamel_yaml.c -&gt; test_ruamel_yaml OK    running install    running build    running build_py    Generating grammar tables from /usr/lib/python3.7/lib2to3/Grammar.txt    Generating grammar tables from /usr/lib/python3.7/lib2to3/PatternGrammar.txt    creating build    creating build/lib.linux-x86_64-3.7    creating build/lib.linux-x86_64-3.7/ruamel    copying .ruamel/__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel    creating build/lib.linux-x86_64-3.7/ruamel/yaml    copying .ruamel/yaml/__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml    creating build/lib.linux-x86_64-3.7/ruamel/yaml/clib    copying ./__init__.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib    copying ./setup.py -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib    copying ./LICENSE -&gt; build/lib.linux-x86_64-3.7/ruamel/yaml/clib    running build_ext    building &#x27;_ruamel_yaml&#x27; extension    creating build/temp.linux-x86_64-3.7    x86_64-linux-gnu-gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -g -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -I/home/mothra/code/baidu-upd/encrypt2bdy/venv/include -I/usr/include/python3.7m -c _ruamel_yaml.c -o build/temp.linux-x86_64-3.7/_ruamel_yaml.o    _ruamel_yaml.c:6:10: fatal error: Python.h: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•     #include &quot;Python.h&quot;              ^~~~~~~~~~    compilation terminated.    error: command &#x27;x86_64-linux-gnu-gcc&#x27; failed with exit status 1    ----------------------------------------Command &quot;/home/mothra/code/baidu-upd/encrypt2bdy/venv/bin/python3 -u -c &quot;import setuptools, tokenize;__file__=&#x27;/tmp/pip-install-55f2q2xf/ruamel.yaml.clib/setup.py&#x27;;f=getattr(tokenize, &#x27;open&#x27;, open)(__file__);code=f.read().replace(&#x27;\\r\\n&#x27;, &#x27;\\n&#x27;);f.close();exec(compile(code, __file__, &#x27;exec&#x27;))&quot; install --record /tmp/pip-record-lh0gyakn/install-record.txt --single-version-externally-managed --compile --install-headers /home/mothra/code/baidu-upd/encrypt2bdy/venv/include/site/python3.7/ruamel.yaml.clib&quot; failed with error code 1 in /tmp/pip-install-55f2q2xf/ruamel.yaml.clib/\n\nè§£å†³ç™¾åº¦åˆ°çš„è§£å†³åŠæ³•æ˜¯å®‰è£…python-dev\nhttps://blog.csdn.net/CloudsRush/article/details/110580061\nsudo apt-get install python-dev\n\nå…ˆå®‰è£…äº†è¿™ä¸ªï¼Œæ²¡æœ‰ç”¨ï¼Œäºæ˜¯åˆå®‰è£…äº†å¯¹åº”pythonç‰ˆæœ¬çš„devåŒ…\nsudo apt-get install python3.7-dev\n\næå®šï¼è¿™ä¸‹pipå®‰è£…çš„æ—¶å€™æ²¡æœ‰æŠ¥é”™äº†ï¼\n(venv) mothra@mothra-PC:~/code/baidu-upd/encrypt2bdy$ pip3 install ruamel.yamlCollecting ruamel.yaml  Using cached https://files.pythonhosted.org/packages/d9/0e/2a05efa11ea33513fbdf4a2e2576fe94fd8fa5ad226dbb9c660886390974/ruamel.yaml-0.17.32-py3-none-any.whlCollecting ruamel.yaml.clib&gt;=0.2.7; platform_python_implementation == &quot;CPython&quot; and python_version &lt; &quot;3.12&quot; (from ruamel.yaml)  Using cached https://files.pythonhosted.org/packages/d5/31/a3e6411947eb7a4f1c669f887e9e47d61a68f9d117f10c3c620296694a0b/ruamel.yaml.clib-0.2.7.tar.gzBuilding wheels for collected packages: ruamel.yaml.clib  Running setup.py bdist_wheel for ruamel.yaml.clib ... done  Stored in directory: /home/mothra/.cache/pip/wheels/2d/db/d8/e6ded7debed48ad2f416fc153122b7698eb136be4c254beffdSuccessfully built ruamel.yaml.clibInstalling collected packages: ruamel.yaml.clib, ruamel.yamlSuccessfully installed ruamel.yaml-0.17.32 ruamel.yaml.clib-0.2.7\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Linux","Python"]},{"title":"ã€Pythonã€‘è°ƒç”¨é£ä¹¦APIè·å–excelè¡¨æ ¼ä¸­æ•°æ®","url":"/posts/3588260369/","content":"è°ƒç”¨é£ä¹¦APIè·å–excelè¡¨æ ¼ä¸­æ•°æ®\n\n\n1.è¯´æ˜å…³äºäº‘æ–‡æ¡£çš„apiï¼Œä»Šå¤©å¤„ç†kookæœºå™¨äººçš„æ—¶å€™ï¼Œæœ‰ä½ç”¨æˆ·æå‡ºäº†è¿™ä¸ªå’Œexcelå¯¹æ¥çš„éœ€æ±‚ã€‚\nä½†æˆ‘ç¿»äº†ç¿»è…¾è®¯äº‘æ–‡æ¡£å’Œé‡‘å±±äº‘æ–‡æ¡£ï¼Œéƒ½æ²¡æœ‰çœ‹åˆ°æ­£ç»çš„è·å–execlæ–‡æ¡£ä¸­æ•°æ®çš„æ¥å£ï¼ˆå…¶å®æ˜¯æˆ‘æ„šç¬¨å®åœ¨æ˜¯æ²¡çœ‹æ‡‚ä»–æ–‡æ¡£é‡Œé¢åœ¨è¯´ä»€ä¹ˆï¼‰ï¼Œå¤§å¤šéƒ½æ˜¯å°†äº‘æ–‡æ¡£å†…åµŒå…¥åˆ°ç½‘ç«™ä¸­çš„å‰ç«¯æ¥å£ã€‚\näºæ˜¯åˆçœ‹äº†çœ‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªseatableå¹³å°æ˜¯æ”¯æŒå®Œæ•´çš„apiï¼Œç”šè‡³æ”¯æŒç”¨sqlæ¥æŸ¥è¯¢excelä¸­çš„æ•°æ®ã€‚ä½†å…¶å…è´¹ç‰ˆæœ¬çš„APIæ—¥ç”¨é‡åªæœ‰åŒºåŒº5000/å¤©ï¼Œå®åœ¨æ˜¯ä¸å¤Ÿæœºå™¨äººç”¨çš„ã€‚\nåˆæ‰¾åˆ°äº†é£ä¹¦ï¼Œè¿™æ¬¡æ€»ç®—æ˜¯æ‰¾åˆ°äº†æˆ‘èƒ½çœ‹æ‡‚çš„ç”¨apiæ¥æ“ä½œexcelçš„æ–‡æ¡£äº†ã€‚\n\né¡ºå¸¦ä¸€æï¼Œæˆ‘çš„åŸŸåé‚®ç®±å°±æ˜¯ç”¨çš„é£ä¹¦çš„å…è´¹æœåŠ¡ï¼Œè¿˜æ˜¯å¾ˆé¦™çš„ã€‚\n\né£ä¹¦å®˜æ–¹æ–‡æ¡£ï¼šhttps://open.feishu.cn/document/server-docs/docs/sheets-v3/overview\nç„¶ååˆæ‰¾åˆ°äº†ä¸€ä¸ªCSDNä¸Šçš„æ•™ç¨‹ï¼špython é£ä¹¦APIè°ƒç”¨â€”â€”ç”µå­è¡¨æ ¼æ“ä½œ\næ­¤æ•™ç¨‹è®²è¿°çš„è¿˜æ˜¯ä¸å¤Ÿæ¸…æ¥šï¼Œæ„Ÿè§‰è¿˜æ˜¯éœ€è¦è‡ªå·±è®°å½•ä¸€ä¸‹ã€‚ä¸‡ä¸€ä»¥åç”¨å¾—ä¸Šï¼Œä¹Ÿä¸ç”¨åœ¨åˆ°å¤„æ‰¾å…¶ä»–æ•™ç¨‹äº†ã€‚\n2.åˆ›å»ºapiåº”ç”¨è¦æƒ³èƒ½æ“ä½œapiï¼Œé¦–å…ˆéœ€è¦åœ¨ä½ åˆ›å»ºçš„ä¼ä¸šä¸­åˆ›å»ºä¸€ä¸ªä¼ä¸šè‡ªå»ºåº”ç”¨ï¼Œåå­—éšä¾¿å¡«å†™\n\nä¸ºäº†æ“ä½œexcelè¡¨æ ¼ï¼Œæˆ‘ä»¬éœ€è¦ç»™äºˆåº”ç”¨äº‘æ–‡æ¡£çš„æƒé™ã€‚\n\nåœ¨æƒé™ç®¡ç†ï¼Œå¾€ä¸‹æ»‘æ‰¾åˆ°äº‘æ–‡æ¡£ï¼Œå…¨é€‰æ‰€æœ‰æƒé™ï¼Œç‚¹å‡»å³ä¾§æ‰¹é‡å¼€é€š\n\næ³¨æ„ï¼Œäº‘æ–‡æ¡£çš„æƒé™ä¸€å…±æœ‰21ä¸ªï¼Œé»˜è®¤ä¸€é¡µåªæ˜¯å±•ç¤ºäº†10ä¸ªï¼Œå…¨é€‰ä¹Ÿåªä¼šæ·»åŠ 10ä¸ªæƒé™ï¼Œæ‰€ä»¥éœ€è¦ä¾æ¬¡é‡å¤ä¸Šè¿°æ“ä½œï¼ŒæŠŠè¿™é‡Œçš„21ä¸ªæƒé™éƒ½ç»™é€‰ä¸­ç»™åº”ç”¨æ·»åŠ ä¸Šã€‚é¿å…å‡ºç°æƒé™é—®é¢˜\n\néšåæ¥åˆ°åº”ç”¨å‡­è¯ï¼Œè·å–ä½ çš„appidå’Œappsecretï¼Œè¿™ä¸¤ä¸ªè°ƒç”¨é‰´æƒapiæ¥è·å–tokençš„æ—¶å€™éœ€è¦\n\néšåæ¥åˆ°ç‰ˆæœ¬ç®¡ç†ï¼Œéšä¾¿åˆ›å»ºä¸€ä¸ªç‰ˆæœ¬ï¼Œç‚¹å‡»ç”³è¯·å‘å¸ƒï¼Œå¦åˆ™ä¸èƒ½è°ƒç”¨api\n\nå› ä¸ºæˆ‘æœ¬æ¥å°±æ˜¯ä¼ä¸šçš„ç®¡ç†å‘˜ï¼Œæ‰€ä»¥å°±èƒ½åœ¨æ¶ˆæ¯é‡Œé¢ç›´æ¥çœ‹åˆ°ç”³è¯·ï¼Œç‚¹å‡»å®¡æ ¸ï¼Œå…è®¸å°±è¡Œäº†\n\n3.è°ƒç”¨apiçš„åŸºæœ¬ç¤ºä¾‹3.1 é‰´æƒé¦–å…ˆè¦è·å–åˆ°è‡ªå·±çš„tokenï¼Œå¦‚ä¸‹ä»£ç ï¼Œä¿®æ”¹ä¸ºä½ çš„appidå’Œsecretï¼Œå°±èƒ½è·å–åˆ°token\nimport requestsurl = &quot;https://open.feishu.cn/open-apis/auth/v3/tenant_access_token/internal/&quot;# åº”ç”¨å‡­è¯é‡Œçš„ app id å’Œ app secretpost_data = &#123;    &quot;app_id&quot;: &quot;&quot;,    &quot;app_secret&quot;: &quot;&quot;&#125;r = requests.post(url, data=post_data)tat = r.json()[&quot;tenant_access_token&quot;]print(tat)\n\nè¿™ä¸ªæ¥å£å®Œæ•´çš„jsonè¿”å›å€¼ç¤ºä¾‹å¦‚ä¸‹\n&#123;\t&quot;code&quot;:0,\t&quot;expire&quot;:6087,\t&quot;msg&quot;:&quot;ok&quot;,\t&quot;tenant_access_token&quot;:&quot;tokenå†…å®¹&quot;&#125;\n\nè·å–åˆ°tokenåï¼Œéœ€è¦æ„é€ ä¸€ä¸ªè¯·æ±‚headersæ¥è¯·æ±‚å…¶ä»–apiï¼Œå…¶ä¸­tatå˜é‡å°±æ˜¯apiè¿”å›å€¼é‡Œé¢çš„&quot;tenant_access_token&quot;å­—æ®µï¼›\nheader = &#123;    &quot;Content-Type&quot;: &quot;application/json&quot;,    &quot;Authorization&quot;: &quot;Bearer &quot; + str(tat)&#125;  # è¯·æ±‚å¤´\n\n3.2 å†™å…¥è¦æƒ³å¾€excelè¡¨é‡Œé¢å†™å…¥æ•°æ®ï¼Œé¦–å…ˆå¾—ä¿®æ”¹ä¸€ä¸‹æ–‡æ¡£çš„æƒé™ä¸ºå¯ç¼–è¾‘ã€‚\n\nä»£ç å¦‚ä¸‹ï¼Œæ¥è§£é‡Šä¸€ä¸‹å¦‚ä½•è·å–äº‘æ–‡æ¡£çš„idï¼Œå’Œshçš„idï¼ˆè¿™ä¸¤ä¸ªä¸åŒï¼‰\nå¤§å®¶åº”è¯¥éƒ½çŸ¥é“ï¼Œä¸€ä¸ªexcelè¡¨æ ¼é‡Œé¢æ˜¯å¯ä»¥æœ‰å¤šä¸ªç‹¬ç«‹çš„sheetçš„ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œæˆ‘æ‰“å¼€çš„äº‘æ–‡æ¡£urlé‡Œé¢å°±åŒ…å«äº†äº‘æ–‡æ¡£çš„idï¼Œå’Œå½“å‰sheet1çš„idï¼›\n\nè¿™é‡Œé¡µé¢çš„urlåˆ†è§£å‡ºæ¥å°±æ˜¯ä¸‹é¢è¿™æ ·ï¼Œæˆ‘ä»¬è°ƒç”¨APIéœ€è¦ç”¨åˆ°çš„æ˜¯äº‘æ–‡æ¡£çš„å®Œæ•´IDå’Œå·¥ä½œç°¿çš„IDã€‚\nhttps://ä¼ä¸šåœ°å€.fetishu.cn/sheets/äº‘æ–‡æ¡£çš„å®Œæ•´ID?sheet=å·¥ä½œç°¿çš„ID\n\nä»£ç æ³¨é‡Šä¸­æœ‰æ›´å¤šè¯´æ˜ï¼Œå…¶ä¸­rangeå­—æ®µå‚è€ƒå®˜æ–¹æ–‡æ¡£é‡Œé¢çš„è¯´æ˜\n# é£ä¹¦æ–‡æ¡£çš„å‚¨å­˜åœ°å€ç»“æ„ï¼šhttps://ä¼ä¸šåœ°å€/sheets/shtcnjGdHzBm7Qa85UXQYk9OPxh?sheet=402cb1# ä¸€èˆ¬æ¥è¯´shå¼€å¤´ä¸ºæ–‡æ¡£åœ°å€ï¼Œsheet=åè·Ÿå·¥ä½œç°¿åœ°å€ï¼Œè¿™ä¸¤å—æ˜¯ä»£ç éœ€è¦å¼•ç”¨çš„å‚æ•°# æ€»ç»“æ¥è¯´å°±æ˜¯ https://ä¼ä¸šåœ°å€/sheets/äº‘æ–‡æ¡£çš„å®Œæ•´ID?sheet=å·¥ä½œç°¿çš„IDimport jsonsheets_base_url = &quot;https://open.feishu.cn/open-apis/sheets/v2/spreadsheets&quot;excel_id = &quot;äº‘æ–‡æ¡£çš„id&quot;def insert_info():    url = f&quot;&#123;sheets_base_url&#125;/&#123;excel_id&#125;/values&quot;  #å†™å…¥çš„shå¼€å¤´çš„æ–‡æ¡£åœ°å€ï¼Œå…¶ä»–ä¸å˜\t# rangeå‚æ•°ä¸­!ä¹‹å‰çš„å·¥ä½œç°¿IDï¼Œåé¢è·Ÿç€è¡Œåˆ—å·èŒƒå›´    post_data = &#123;        &quot;valueRange&quot;: &#123;            &quot;range&quot;: &quot;486268!C3:N8&quot;,            &quot;values&quot;: [[&quot;Hello&quot;, 1], [&quot;World&quot;, 1]]        &#125;    &#125;    # åœ¨486268è¿™ä¸ªå·¥ä½œç°¿å†…çš„å•å…ƒæ ¼C3åˆ°N8å†™å…¥å†…å®¹ä¸ºhelloworldç­‰å†…å®¹    r2 = requests.put(url, data=json.dumps(post_data), headers=header)  #è¯·æ±‚å†™å…¥    print(r2.json())  #è¾“å‡ºæ¥åˆ¤æ–­å†™å…¥æ˜¯å¦æˆåŠŸ\n\nè°ƒç”¨ä¹‹åï¼Œæ§åˆ¶å°è¾“å‡ºsuccessï¼Œè¡¨ä¸­æˆåŠŸæ–°å¢æ•°æ®\n\n3.3 æŸ¥è¯¢ç”±äºæˆ‘çš„éœ€æ±‚æ˜¯æŸ¥è¯¢æŸä¸€åˆ—çš„æ•°æ®ï¼Œè¿™å¯¹è®°è´¦ä¹‹ç±»çš„è¡¨æ ¼å¾ˆæœ‰ç”¨ã€‚æ¯”å¦‚ä¸‹å›¾ä¸­Cåˆ—é‡Œé¢çš„æ•°æ®å°±æ˜¯æ•°å­—çš„åŠ å‡\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨å¦‚ä¸‹çš„æ–¹å¼è°ƒç”¨ï¼Œè·å–åˆ°è¿™ä¸ªsheetä¸­ï¼ŒCä¸€æ•´åˆ—çš„æ•°æ®\nsheets_base_url = &quot;https://open.feishu.cn/open-apis/sheets/v2/spreadsheets&quot;excel_id = &quot;äº‘æ–‡æ¡£çš„id&quot;# åœ¨486268è¿™ä¸ªå·¥ä½œç°¿å†…çš„å•å…ƒæ ¼C1å¼€å§‹çš„Cåˆ—å…¨éƒ¨å†…å®¹   url = f&quot;&#123;sheets_base_url&#125;/&#123;excel_id&#125;/values/486268!C1:C&quot;   ret = requests.get(url, headers=header)   print(ret.text)   print(ret.json())\n\nè¿”å›ç»“æœç¤ºä¾‹å¦‚ä¸‹ï¼Œæ­£å¥½æ˜¯è¡¨æ ¼ä¸­çš„æ•°æ®ï¼\n&#123;        &quot;code&quot;: 0,        &quot;data&quot;: &#123;            &quot;revision&quot;: 8,            &quot;spreadsheetToken&quot;: &quot;äº‘æ–‡æ¡£ID&quot;,            &quot;valueRange&quot;: &#123;                &quot;majorDimension&quot;: &quot;ROWS&quot;,                &quot;range&quot;: &quot;486268!C1:C4&quot;,                &quot;revision&quot;: 8,                &quot;values&quot;: [[399], [-39], [-63], [65], [52], [0], [-63]]            &#125;        &#125;,        &quot;msg&quot;: &quot;success&quot;&#125;\n\n\nThe endæˆ‘éœ€è¦çš„åŸºæœ¬æ“ä½œå°±æ˜¯è¿™äº›äº†ã€‚åªè¦ä½ å­¦ä¼šäº†è¿™ä¸¤ä¸ªæ“ä½œï¼Œåç»­åº”è¯¥å°±èƒ½çœ‹æ‡‚é£ä¹¦çš„apiæ–‡æ¡£ï¼Œæ¥æŸ¥è¯¢å…¶ä»–ä¿¡æ¯äº†ã€‚\næœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Pythonã€‘è®°å½•pymysql.err.InterfaceError: (0, ') çš„â€œè§£å†³åŠæ³•â€","url":"/posts/520209670/","content":"ç›´å¥”ä¸»é¢˜å§ï¼\næƒ…å†µpythonå†™çš„æœºå™¨äººé‡åˆ°äº†ä¸€ä¸ªmysqlçš„é”™è¯¯ pymysql.err.InterfaceError: (0, &#39;&#39;)\nå®Œæ•´æŠ¥é”™å†…å®¹å¦‚ä¸‹\nTraceback (most recent call last):  File &quot;/home/mu/pybot/vshop-bot/poxiao-bot/main.py&quot;, line 402, in user_active_on_msg    user_log = await Store.create_user_log(guild_id=gid, user_id=uid)  File &quot;/home/mu/pybot/vshop-bot/poxiao-bot/utils/Store.py&quot;, line 313, in create_user_log    user = await QueryMysql.insert_user_log(guild_id, user_id)  File &quot;/home/mu/pybot/vshop-bot/poxiao-bot/utils/data/QueryMysql.py&quot;, line 292, in insert_user_log    user = await query_user_log(guild_id, user_id)  File &quot;/home/mu/pybot/vshop-bot/poxiao-bot/utils/data/QueryMysql.py&quot;, line 283, in query_user_log    return await UserLog.query(guild_id, user_id)  File &quot;/home/mu/pybot/vshop-bot/poxiao-bot/utils/data/QueryMysql.py&quot;, line 21, in query    cursor.execute(MysqlSql.Select.UserLogGU, (guild_id, user_id))  File &quot;/home/mu/pybot/vshop-bot/vs-venv/lib/python3.10/site-packages/pymysql/cursors.py&quot;, line 153, in execute    result = self._query(query)  File &quot;/home/mu/pybot/vshop-bot/vs-venv/lib/python3.10/site-packages/pymysql/cursors.py&quot;, line 322, in _query    conn.query(q)  File &quot;/home/mu/pybot/vshop-bot/vs-venv/lib/python3.10/site-packages/pymysql/connections.py&quot;, line 557, in query    self._execute_command(COMMAND.COM_QUERY, sql)  File &quot;/home/mu/pybot/vshop-bot/vs-venv/lib/python3.10/site-packages/pymysql/connections.py&quot;, line 840, in _execute_command    raise err.InterfaceError(0, &quot;&quot;)pymysql.err.InterfaceError: (0, &#x27;&#x27;)\n\nç™¾åº¦ç™¾åº¦äº†ï¼Œè¯´æ˜¯ä¸è¦åœ¨æ•°æ®åº“é“¾æ¥å…³é—­åä½¿ç”¨æ•°æ®åº“ã€‚\næ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œcloseä¹‹åç›¸å½“äºä½ å·²ç»æ²¡æœ‰è¿ä¸Šæ•°æ®åº“äº†ã€‚è¿™æ—¶å€™å†commitè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚å°±å¥½æ¯”æ–­ç½‘äº†å†ç‚¹å‡»ç½‘é¡µåˆ·æ–°æŒ‰é’®ï¼Œæ˜¯æ— æµäºäº‹çš„ï¼\ndb = &quot;æ•°æ®åº“è¿æ¥&quot;# æ•°æ®åº“æ“ä½œdb.close()db.commit()\n\nå’‹å›äº‹ï¼Ÿç„¶åå‘¢ï¼Œæˆ‘è¿˜çœ‹åˆ°äº†ä¸€äº›åšå®¢æåˆ°äº†éœ€è¦æ£€æŸ¥è¿æ¥æ˜¯å¦å¯ç”¨ã€‚è¿˜æœ‰å…¶ä»–çš„å·´æ‹‰å·´æ‹‰çš„ã€‚å“å¾—æˆ‘ä»¥ä¸ºè‡ªå·±çš„ä»£ç æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ˜¯ä¸æ˜¯è¿™ä¸ªæŠ¥é”™åªè¦è·‘ä¹…äº†å°±ä¸€å®šä¼šå‡ºç°ï¼Ÿ\nç›´åˆ°æˆ‘æƒ³èµ·æ¥æˆ‘æ“ä½œè¿‡dockerçš„iptablesï¼Œé‡å¯è¿‡dockerï¼ˆæˆ‘çš„mysqlæ˜¯dockeræ­å»ºçš„ï¼‰\nå’³å’³ï¼Œæ•°æ®åº“é‡å¯è¿‡ï¼Œéš¾æ€ªè¿ä¸ä¸Šã€‚æ€ªæˆ‘æ€ªæˆ‘ã€‚\nä¹Ÿæé†’ä¸‹å¤§å®¶ï¼Œä¸€å®šè¦å…ˆæŠŠéœ€è¦ç”¨æ•°æ®åº“çš„è¿›ç¨‹éƒ½ç»™åœäº†å†å»é‡å¯æ•°æ®åº“ï¼\n\nå¦å¤–ï¼Œæˆ‘è¿˜å‘ç°å¦‚æœä¸€ä¸ªpythonè¿›ç¨‹é“¾æ¥æ•°æ®åº“å¾ˆä¹…å´å•¥äº‹æ²¡å¹²ä¹Ÿä¼šè¢«mysqlä¸­æ–­é“¾æ¥ï¼Œä»è€Œé€ æˆè¿™ä¸ªæŠ¥é”™ã€‚\nè€ƒè™‘åˆ°kookæœºå™¨äººçš„ç”¨é‡é—®é¢˜ï¼Œå…¶å®sqliteè¿™ç§è½»é‡çº§æ•°æ®åº“æ›´åŠ é€‚åˆæœºå™¨äººã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","mysql"]},{"title":"ã€Pythonã€‘å…ƒç»„/åˆ—è¡¨/é›†åˆçš„åŒºåˆ«","url":"/posts/1142930252/","content":"1.è¯´æ˜å…ƒç»„ï¼ˆtupleï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰å’Œé›†åˆï¼ˆsetï¼‰æ˜¯Pythonä¸­å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œå®ƒä»¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚\n\n\n\nå¯å˜æ€§ï¼šåˆ—è¡¨æ˜¯å¯å˜çš„ï¼ˆmutableï¼‰ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹æ“ä½œã€‚å…ƒç»„æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œä¸€æ—¦åˆ›å»ºå°±æ— æ³•ä¿®æ”¹ã€‚é›†åˆä¹Ÿæ˜¯å¯å˜çš„ï¼Œä½†æ˜¯å®ƒå…·æœ‰å»é‡åŠŸèƒ½ï¼Œä¸å…è®¸å­˜åœ¨é‡å¤çš„å…ƒç´ ï¼Œå¹¶ä¸”æ²¡æœ‰å›ºå®šçš„é¡ºåºã€‚\n\nè¯­æ³•ï¼šåˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·[]æ¥è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·,åˆ†éš”ï¼›å…ƒç»„ä½¿ç”¨åœ†æ‹¬å·()``æ¥è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´åŒæ ·ç”¨é€—å·,åˆ†éš”ï¼›é›†åˆä½¿ç”¨å¤§æ‹¬å·{}æ¥è¡¨ç¤ºï¼Œå…ƒç´ ä¹‹é—´ä¹Ÿç”¨é€—å·,&#96;åˆ†éš”ã€‚\nä¾‹å¦‚ï¼š\nmy_list = [1, 2, 3]my_tuple = (4, 5, 6)my_set = &#123;7, 8, 9&#125;\n\nç´¢å¼•å’Œåˆ‡ç‰‡ï¼šåˆ—è¡¨å’Œå…ƒç»„éƒ½æ”¯æŒé€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ å’Œåˆ‡ç‰‡æ“ä½œã€‚è€Œé›†åˆæ˜¯æ— åºçš„ï¼Œä¸æ”¯æŒç´¢å¼•å’Œåˆ‡ç‰‡æ“ä½œã€‚\n\né‡å¤å…ƒç´ ï¼šåˆ—è¡¨å’Œå…ƒç»„å…è®¸å­˜åœ¨é‡å¤çš„å…ƒç´ ï¼Œè€Œé›†åˆä¼šè‡ªåŠ¨å»é™¤é‡å¤çš„å…ƒç´ ã€‚\nä¾‹å¦‚ï¼š\nmy_list = [1, 1, 2, 2, 3, 3]  # åˆ—è¡¨ä¸­å¯ä»¥æœ‰é‡å¤å…ƒç´ my_tuple = (4, 4, 5, 5)      # å…ƒç»„ä¸­ä¹Ÿå¯ä»¥æœ‰é‡å¤å…ƒç´ my_set = &#123;6, 6, 7, 7&#125;        # é›†åˆä¼šè‡ªåŠ¨å»é™¤é‡å¤çš„å…ƒç´ # å¦‚ä¸Šmy_set = &#123;6,7&#125;\n\nå¯å“ˆå¸Œæ€§ï¼šé›†åˆçš„å…ƒç´ å¿…é¡»æ˜¯å¯å“ˆå¸Œï¼ˆhashableï¼‰çš„ï¼Œè€Œåˆ—è¡¨å’Œå…ƒç»„çš„å…ƒç´ å¯ä»¥æ˜¯å¯å“ˆå¸Œæˆ–ä¸å¯å“ˆå¸Œçš„ã€‚å¯å“ˆå¸Œçš„æ„æ€æ˜¯è¯¥å¯¹è±¡çš„å€¼åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­ä¸å‘ç”Ÿæ”¹å˜ï¼Œä¸”èƒ½å¤Ÿå”¯ä¸€åœ°ç¡®å®šä¸€ä¸ªå¯¹è±¡ã€‚\n\n\næ€»çš„æ¥è¯´\n\nå…ƒç»„é€‚ç”¨äºå­˜å‚¨å›ºå®šçš„ã€ä¸å¯å˜çš„æ•°æ®ï¼›\nåˆ—è¡¨é€‚ç”¨äºéœ€è¦é¢‘ç¹å¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œå¢åˆ æ”¹æ“ä½œçš„æƒ…å†µï¼›\né›†åˆé€‚ç”¨äºéœ€è¦ç¡®ä¿å…ƒç´ å”¯ä¸€æ€§ä¸”ä¸å…³å¿ƒå…ƒç´ çš„é¡ºåºçš„åœºæ™¯ã€‚\n\né€‰æ‹©ä½¿ç”¨å“ªç§æ•°æ®ç»“æ„å–å†³äºå…·ä½“çš„éœ€æ±‚å’Œé—®é¢˜çš„ç‰¹ç‚¹ã€‚\n2.å¯å“ˆå¸Œæ€§2.1 æ¦‚å¿µå¯å“ˆå¸Œæ€§ï¼ˆhashabilityï¼‰æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å…·æœ‰å“ˆå¸Œå€¼ï¼ˆhash valueï¼‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¿æŒä¸å˜ã€‚åœ¨Pythonä¸­ï¼Œå¯å“ˆå¸Œçš„å¯¹è±¡æ˜¯æŒ‡é‚£äº›åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­ä¸å¯å˜çš„å¯¹è±¡ã€‚\nå“ˆå¸Œå€¼æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æ•´æ•°ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªå¯¹è±¡ã€‚å“ˆå¸Œå€¼æ˜¯é€šè¿‡å°†å¯¹è±¡çš„å†…å®¹è½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—æ¥è®¡ç®—å¾—åˆ°çš„ã€‚å¯å“ˆå¸Œçš„å¯¹è±¡å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nå“ˆå¸Œå€¼ä¸ä¼šæ”¹å˜ï¼šä¸€ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­æ˜¯ä¸å˜çš„ï¼Œå³ä½¿å¯¹è±¡çš„å†…å®¹å‘ç”Ÿäº†æ”¹å˜ã€‚\nç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„å“ˆå¸Œå€¼ï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼Œåˆ™å®ƒä»¬çš„å“ˆå¸Œå€¼ä¹Ÿç›¸ç­‰ã€‚\n\nå¯å“ˆå¸Œæ€§åœ¨Pythonä¸­éå¸¸é‡è¦ï¼Œä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š\n\nå­—å…¸çš„é”®ï¼ˆkeyï¼‰å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„å¯¹è±¡ï¼šå› ä¸ºå­—å…¸æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ï¼Œå®ƒä½¿ç”¨é”®çš„å“ˆå¸Œå€¼æ¥ç´¢å¼•å’Œå¿«é€ŸæŸ¥æ‰¾å¯¹åº”çš„å€¼ã€‚æ‰€ä»¥å­—å…¸ä¸­çš„é”®å¿…é¡»æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œä¾‹å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰éƒ½æ˜¯å¯å“ˆå¸Œçš„ã€‚\né›†åˆçš„å…ƒç´ å¿…é¡»æ˜¯å¯å“ˆå¸Œçš„å¯¹è±¡ï¼šé›†åˆä¹Ÿæ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ï¼Œå®ƒä½¿ç”¨å“ˆå¸Œå€¼æ¥ç¡®å®šå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼Œå¹¶ä¸”ä¿è¯é›†åˆä¸­çš„å…ƒç´ å”¯ä¸€æ€§ã€‚æ‰€ä»¥é›†åˆä¸­çš„å…ƒç´ ä¹Ÿå¿…é¡»æ˜¯ä¸å¯å˜çš„å¯¹è±¡ã€‚\n\næ€»ç»“èµ·æ¥ï¼Œå¯å“ˆå¸Œæ€§æ˜¯æŒ‡å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­ä¸å‘ç”Ÿæ”¹å˜ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªå›ºå®šçš„ã€å”¯ä¸€çš„å“ˆå¸Œå€¼ã€‚å¯å“ˆå¸Œçš„å¯¹è±¡å¯ä»¥ä½œä¸ºå­—å…¸çš„é”®å’Œé›†åˆçš„å…ƒç´ ä½¿ç”¨ã€‚\n2.2 è‡ªå®šä¹‰ç±»å‹çš„å¯å“ˆå¸Œæ€§è‡ªå®šä¹‰ç±»å‹ï¼ˆCustom typesï¼‰å¯ä»¥ç»´æŠ¤å¯å“ˆå¸Œæ€§ï¼Œä½†éœ€è¦æ»¡è¶³ä¸€å®šçš„æ¡ä»¶ã€‚\nåœ¨Pythonä¸­ï¼Œå¯¹è±¡çš„å¯å“ˆå¸Œæ€§æ˜¯ç”±å…¶æ‰€å±ç±»çš„__hash__()æ–¹æ³•å’Œ__eq__()æ–¹æ³•å…±åŒå†³å®šçš„ã€‚ä¸‹é¢æ˜¯å…³äºè‡ªå®šä¹‰ç±»å‹ç»´æŠ¤å¯å“ˆå¸Œæ€§çš„æ¡ä»¶ï¼š\n\n__hash__()æ–¹æ³•çš„å®ç°ï¼šè‡ªå®šä¹‰ç±»å‹å¿…é¡»å®šä¹‰__hash__()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°ä½œä¸ºå¯¹è±¡çš„å“ˆå¸Œå€¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯ä½¿ç”¨å†…ç½®å‡½æ•°hash()æ¥è®¡ç®—å“ˆå¸Œå€¼ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š\ndef __hash__(self):    return hash((self.attribute1, self.attribute2, ...))\n\næ³¨æ„ï¼Œ__hash__()æ–¹æ³•åº”è¯¥è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å€¼ï¼Œå¹¶ä¸”ç›¸ç­‰çš„å¯¹è±¡åº”è¯¥å…·æœ‰ç›¸ç­‰çš„å“ˆå¸Œå€¼ã€‚\n\n__eq__()æ–¹æ³•çš„å®ç°ï¼šä¸ºäº†ç¡®ä¿ç›¸ç­‰çš„å¯¹è±¡å…·æœ‰ç›¸ç­‰çš„å“ˆå¸Œå€¼ï¼Œè‡ªå®šä¹‰ç±»å‹ä¹Ÿå¿…é¡»å®šä¹‰__eq__()æ–¹æ³•æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚__eq__()æ–¹æ³•é€šå¸¸ä¸__hash__()æ–¹æ³•é…åˆä½¿ç”¨ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š\ndef __eq__(self, other):    if isinstance(other, self.__class__):        return (self.attribute1 == other.attribute1) and (self.attribute2 == other.attribute2) and ...    return False\n\næ³¨æ„ï¼Œ__eq__()æ–¹æ³•åº”è¯¥è¿”å›å¸ƒå°”å€¼è¡¨ç¤ºä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚\n\n\né€šè¿‡æ­£ç¡®å®ç°__hash__()å’Œ__eq__()æ–¹æ³•ï¼Œè‡ªå®šä¹‰ç±»å‹å°±å¯ä»¥ç»´æŠ¤å¯å“ˆå¸Œæ€§ã€‚è¿™æ ·ï¼Œå¯¹è±¡å°±å¯ä»¥ä½œä¸ºå­—å…¸çš„é”®æˆ–é›†åˆçš„å…ƒç´ ï¼Œå¹¶èƒ½å¤Ÿä¿æŒä¸å˜æ€§å’Œç›¸ç­‰æ€§çš„åˆ¤æ–­ã€‚\nç„¶è€Œï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœè‡ªå®šä¹‰ç±»å‹ä¸­çš„å±æ€§æ˜¯å¯å˜çš„ï¼ˆä¾‹å¦‚åˆ—è¡¨ã€é›†åˆç­‰ï¼‰ï¼Œåˆ™å¯¹è±¡å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¯¼è‡´å“ˆå¸Œå€¼çš„æ”¹å˜ã€‚å› æ­¤ï¼Œåœ¨å®šä¹‰å¯å“ˆå¸Œçš„è‡ªå®šä¹‰ç±»å‹æ—¶ï¼Œåº”è¯¥é¿å…ä½¿ç”¨å¯å˜çš„å±æ€§ã€‚\n2.2.1 hash(è‡ªå®šä¹‰ç±»å‹)å½“æˆ‘ä»¬ä½¿ç”¨ hashå‡½æ•°æ¥å¤„ç†è‡ªå®šä¹‰ç±»å‹æ—¶ï¼Œpythonå°±ä¼šè°ƒç”¨è¿™ä¸ªè‡ªå®šä¹‰ç±»å‹çš„ __hash__()å‡½æ•°\nhash(p1)# ç­‰ä»·äºp1.__hash__()\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œ__hash__ æ–¹æ³•è¿”å›å¯¹è±¡çš„æ ‡è¯†ç¬¦ï¼Œè€Œ __eq__ æ–¹æ³•åœ¨ä¸¤ä¸ªå¯¹è±¡ç›¸åŒæ—¶è¿”å› Trueã€‚å¦‚æœæƒ³è¦è¦†ç›–è¿™ä¸ªé»˜è®¤è¡Œä¸ºï¼Œæˆ‘ä»¬å¯ä»¥å®ç° __hash__ æ–¹æ³•å’Œ __eq__ æ–¹æ³•ã€‚\n2.2.2 åªå®ç°eqå¦‚æœä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹åªå®ç°äº† __eq__è€Œæ²¡æœ‰å®ç° __hash__ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹å°±ä¸å…·å¤‡å¯å“ˆå¸Œæ€§ï¼Œä¹Ÿå°±ä¸èƒ½ä½œä¸ºdictæˆ–è€…é›†å’Œçš„é”®å€¼\næ¯”å¦‚å¦‚ä¸‹personå¯¹è±¡åªå®ç°äº† __eq__\nclass Person:    def __init__(self, name, age):        self.name = name        self.age = age    def __eq__(self, other):        return isinstance(other, Person) and self.age == other.age\n\nå¦‚æœå°è¯•å°†è¿™ä¸ªå¯¹è±¡æ”¾å…¥setï¼Œå°±ä¼šæŠ¥é”™\nmembers = &#123;    Person(&#x27;John&#x27;, 22),    Person(&#x27;Jane&#x27;, 22)&#125;\n\nTypeError: unhashable type: &#x27;Person&#x27;\n\nåŒæ—¶personå¯¹è±¡å¤±å»äº†hashåŠŸèƒ½\nhash(Person(&#x27;John&#x27;, 22))# TypeError: unhashable type: &#x27;Person&#x27;\n\nä¸ºäº†ä½¿å¾— Person ç±»å¯å“ˆå¸Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®ç° __hash__ æ–¹æ³•\nclass Person:    def __init__(self, name, age):        self.name = name        self.age = age    def __eq__(self, other):        return isinstance(other, Person) and self.age == other.age    def __hash__(self):        return hash(self.age)\n\nç°åœ¨ï¼ŒPerson ç±»æ—¢æ”¯æŒåŸºäº age çš„ç­‰å€¼æ¯”è¾ƒï¼Œåˆå…·æœ‰å“ˆå¸ŒåŠŸèƒ½ã€‚\nä¸ºäº†ä½¿å¾— Person èƒ½å¤Ÿæ­£å¸¸ç”¨äºå­—å…¸è¿™ç§æ•°æ®ç»“æ„ï¼Œç±»çš„å“ˆå¸Œå€¼å¿…é¡»å…·æœ‰ä¸å¯å˜æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°† age å®šä¹‰ä¸ºåªè¯»å±æ€§\nclass Person:    def __init__(self, name, age):        self.name = name        self._age = age    @property    def age(self):        return self._age    def __eq__(self, other):        return isinstance(other, Person) and self.age == other.age    def __hash__(self):        return hash(self.age)\n\n2.2.3 æ€»ç»“\né»˜è®¤æƒ…å†µä¸‹ï¼Œ__hash__ æ–¹æ³•è¿”å›å¯¹è±¡çš„ IDï¼Œ__eq__ æ–¹æ³•ä½¿ç”¨ is æ“ä½œç¬¦è¿›è¡Œæ¯”è¾ƒã€‚\nå¦‚æœå®ç°äº† __eq__ æ–¹æ³•ï¼ŒPython ä¼šå°† __hash__ æ–¹æ³•è®¾ç½®ä¸º Noneï¼Œé™¤éå®ç°äº†è‡ªå®šä¹‰çš„ __hash__ æ–¹æ³•ã€‚\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€APIã€‘APIçš„å„ç§åˆ†ç±»è¯¦è§£","url":"/posts/73383828/","content":"APIï¼Œå³åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®å’ŒåŠŸèƒ½äº¤äº’è€Œè®¾è®¡çš„ä¸€äº›æ ‡å‡†æ–¹æ³•ã€‚API çš„åˆ†ç±»å¯ä»¥ä»å¤šä¸ªç»´åº¦è¿›è¡Œï¼Œæˆ‘ä¼šå¯¹ API çš„åˆ†ç±»ç»´åº¦è¿›è¡Œç®€å•çš„ä»‹ç»ã€‚\n\n\næ ¹æ®ä½¿ç”¨æ–¹å¼çš„ä¸åŒé€šå¸¸æƒ…å†µä¸‹ï¼ŒAPI å¯ä»¥åˆ†ä¸ºä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼šå†…éƒ¨ API å’Œå¤–éƒ¨ APIã€‚\nå†…éƒ¨ API æ˜¯æŒ‡ä¾›ä¼ä¸šå†…éƒ¨å¼€å‘äººå‘˜å’Œåº”ç”¨æ‰€ä½¿ç”¨çš„ APIã€‚å½“ä¼ä¸šéœ€è¦ä¸€äº›å®šåˆ¶åŒ–çš„åº”ç”¨ç¨‹åºæˆ–è€…é›†æˆç‰¹å®šçš„åŠŸèƒ½æ—¶ï¼Œå†…éƒ¨ API å¯ä»¥æä¾›æ›´å¥½çš„æŠ€æœ¯æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿèƒ½ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚\nå¤–éƒ¨ API åˆ™æ˜¯ä¾›å…¬ä¼—å¼€å‘è€…ä½¿ç”¨çš„ APIï¼Œé€šè¿‡æä¾›æ•°æ®å’ŒæœåŠ¡ï¼Œä½¿å¾—å¤–éƒ¨çš„å¼€å‘è€…å¯ä»¥æ„å»ºä¸°å¯Œçš„åº”ç”¨ç¨‹åºå¹¶ä¸å½“å‰çš„ç”Ÿæ€ç³»ç»Ÿè¿›è¡Œåä½œã€‚è¶Šæ¥è¶Šå¤šçš„å„ç±»å…¬å¸éƒ½å¼€å§‹å‘å…¬ä¼—æä¾›è‡ªå·±çš„ APIï¼Œç¤ºä¾‹åŒ…æ‹¬ Facebookã€Twitterã€Google ç­‰ã€‚\næ ¹æ®è®¿é—®æ–¹å¼çš„ä¸åŒæ ¹æ® API çš„è®¿é—®æ–¹å¼ï¼ŒAPI å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š\n\nRESTful API RESTï¼ˆRepresentational State Transferï¼‰æ˜¯ä¸€ç§åŸºäº HTTP åè®®çš„ Web åº”ç”¨ç¨‹åºæ¶æ„æ ‡å‡†ã€‚RESTful API éµå¾ª RESTful æ¶æ„çš„åŸåˆ™ï¼Œé€šå¸¸ç”±èµ„æºè·¯å¾„å’Œè¯·æ±‚æ–¹æ³•ç»„æˆï¼Œä»¥è¾¾åˆ°å¯è¯»æ€§é«˜ã€çµæ´»æ€§å¥½çš„ç›®çš„ã€‚\nSOAP API SOAPï¼ˆSimple Object Access Protocolï¼‰æ˜¯ä¸€ç§åŸºäº XML ç¼–ç çš„è¿œç¨‹è°ƒç”¨åè®®ï¼Œæ¯”è¾ƒå¤æ‚è€Œä¸”å¤„ç†æ—¶é—´å’Œç½‘ç»œèµ„æºä½¿ç”¨ç‡é«˜ã€‚è™½ç„¶ SOAP æŠ€æœ¯å·²ç»é€æ¸æ·¡å‡ºå¸‚åœºï¼Œä½†åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ä»ç„¶ä¼šæœ‰æ‰€åº”ç”¨ã€‚\nGraphQL API GraphQL æ˜¯ç”± Facebook å…¬å¸å¼€æºçš„ä¸€ç§æ•°æ®æŸ¥è¯¢è¯­è¨€å’Œ API æ‰§è¡Œå¼•æ“ï¼Œå¯ä»¥å‘ˆç°å‡º XML schema æ¥è¡¨è¾¾æ•´ä¸ªæ•°æ®çš„ç»“æ„ï¼Œå¹¶ä¸ºå‰ç«¯å·¥ç¨‹å¸ˆæä¾›è‡ªç”±å®šä¹‰è·å–æ‰€éœ€å±æ€§ã€ä»£ç é‡ç”¨ç­‰äººæ€§åŒ–çš„ç‰¹è‰²ã€‚\ngRPC API gRPC å¯ä»¥ç†è§£ä¸º Google Remote Procedure Callï¼Œæ˜¯ Google æœ€æ–°å¼€æºçš„è·¨è¯­è¨€ RPC æ¡†æ¶ã€‚å€ŸåŠ©åŸºäº HTTP&#x2F;2 çš„äºŒè¿›åˆ¶ä¼ è¾“åè®®ï¼ŒgRPC æä¾›äº†æ¯” JSON å’Œ RESTful æ›´å¿«é€Ÿå’Œæ›´å¯é çš„é€šè®¯æ–¹å¼ã€‚\n\næ ¹æ®åŠŸèƒ½çš„ä¸åŒæ ¹æ® API çš„åŠŸèƒ½æ€§è´¨ï¼ŒAPI å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\n\nWeb API Web API ä¸€èˆ¬éƒ½é’ˆå¯¹ Web åº”ç”¨ç¨‹åºï¼Œæä¾›ä¸€äº›æ ‡å‡†çš„æ¥å£ï¼Œä¾‹å¦‚ï¼šW3C DOM æ¥å£ã€HTTP æ¥å£ã€WebSocket æ¥å£ã€Web Worker æ¥å£ç­‰ã€‚è¿™äº› API å¸®åŠ©æµè§ˆå™¨å–å¾—ç”¨æˆ·å…ƒç´ ä¿¡æ¯ã€å‘é€ AJAX è¯·æ±‚ç­‰ç­‰ã€‚\næ“ä½œç³»ç»Ÿ API æ“ä½œç³»ç»Ÿ APIï¼ˆå¦‚ Windows API æˆ– POSIX APIï¼‰æä¾›äº†ä¸æ“ä½œç³»ç»Ÿè½¯ä»¶äº¤äº’çš„æ–¹æ³•ï¼Œå…è®¸åº”ç”¨ç¨‹åºæŸ¥è¯¢åŠæ§åˆ¶ç¡¬ä»¶è®¾å¤‡æˆ–æ“ä½œç³»ç»Ÿå†…æ ¸ä»»åŠ¡ç­‰ã€‚æ­¤ç±» API å‡ ä¹é€‚ç”¨äºä»»ä½•ç±»å‹çš„ç¯å¢ƒã€‚\næ•°æ®åº“ API æ•°æ®åº“ API å¯ä»¥ä½¿åº”ç”¨ç¨‹åºé€šè¿‡æŸäº› API å®ç°å¯¹ä¸€äº›æ•°æ®å­˜å‚¨çš„æ“ä½œï¼Œä¾‹å¦‚ï¼šSQLã€NoSQL ç­‰æ•°æ®åº“é‡Œéƒ½æœ‰ç›¸å…³çš„ API è°ƒç”¨ã€‚\n\nåœ¨å®é™…ä½¿ç”¨ä¸­ï¼ŒAPI æ”¯æŒè®¿é—®ä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼Œä¾‹å¦‚æ•°æ®è½¬æ¢ã€æ•°æ®åˆ†æã€ç½‘ç»œå®‰å…¨ã€é—¨æˆ·ç®¡ç†ã€æ—¥å†ç­‰ç­‰ï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚è¿›è¡Œå®¢åˆ¶åŒ–çš„å¼€å‘ã€‚\næ€»ä¹‹ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ API ç±»å‹æ˜¯éå¸¸é‡è¦çš„ï¼Œèƒ½å¤Ÿå¿«é€Ÿã€é«˜æ•ˆåœ°æ„å»ºéœ€è¦çš„åº”ç”¨ç¨‹åºã€‚\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œluffy_feã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_42107247/article/details/130508490\n\n","tags":["API"]},{"title":"ã€Pythonã€‘Pythonåˆ†ç‰‡è®¡ç®—æ–‡ä»¶md5","url":"/posts/1918073551/","content":"é—®é¢˜è¯´æ˜\né¡¹ç›®åœ°å€ï¼šmusnows&#x2F;encrypt2bdy\n\nä¹‹å‰è‡ªå·±çå†™äº†ä¸€ä¸ªä¸Šä¼ æ–‡ä»¶åˆ°ç™¾åº¦äº‘çš„pythonç¨‹åºï¼Œæä¾›äº†dockerå¹¶éƒ¨ç½²åœ¨äº†æˆ‘è‡ªå·±çš„nasä¸Šï¼Œä½†æ˜¯æˆ‘é™åˆ¶å®¹å™¨å¯ç”¨å†…å­˜å¤§å°ä¸º1GBåï¼Œæ€»æ˜¯ä¼šé‡åˆ°dockerå› ä¸ºå†…å­˜çˆ†æ»¡ç›´æ¥è¢«ç³»ç»Ÿkilläº†çš„æƒ…å†µã€‚\nç°åœ¨æ€»ç®—æœ‰æ—¶é—´çœ‹çœ‹åˆ°åº•æ˜¯å•¥é—®é¢˜äº†ï¼Œå…¶å®æˆ‘å·²ç»èƒ½æƒ³åˆ°äº†ï¼Œä¸Šä¼ æ–‡ä»¶çš„éƒ¨åˆ†å·²ç»æ˜¯æŒ‰åˆ†ç‰‡ä¸Šä¼ çš„ï¼Œç†è®ºä¸Šä¸æ˜¯é‚£ä¸ªåœ°æ–¹çš„é—®é¢˜ï¼Œå¦å¤–ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„åœ°æ–¹åªæœ‰ä¸€å¤„ï¼Œå°±æ˜¯è®¡ç®—æ–‡ä»¶æ•´ä½“md5çš„æ“ä½œã€‚\nå› ä¸ºå½“æ—¶æ²¡æƒ³æ˜ç™½é—®é¢˜åœ¨å“ªé‡Œï¼Œæˆ‘è¿˜åœ¨é¡¹ç›®çš„READMEé‡Œé¢å†™äº†ä¸€ä¸ªä¸å»ºè®®ç”¨äºå¤‡ä»½å¤§æ–‡ä»¶ï¼Œå› ä¸ºå†…å­˜ä¼šæ’‘çˆ†çš„æç¤ºï¼ˆ\n## å·²çŸ¥é”™è¯¯### 1.dockeré€€å‡ºç 137å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå°†å¯¹åº”dockerå®¹å™¨ç»ˆæ­¢ã€‚å‡ºç°æ­¤é—®é¢˜ï¼Œè¯·ç¡®è®¤æ‚¨è¦å¤‡ä»½çš„æ–‡ä»¶ä¸­ä¸ä¼šå‡ºç°å¤§äºæ‚¨ç³»ç»Ÿå†…å­˜æˆ–dockerå®¹å™¨å†…å­˜é™åˆ¶çš„æ–‡ä»¶ã€‚æ­£å¦‚å¼€å¤´æ‰€è¯´ï¼Œæœ¬é¡¹ç›®é€‚åˆäºå¤‡ä»½ç…§ç‰‡ã€å›¾ç‰‡ã€æ–‡æ¡£ç­‰å°æ–‡ä»¶ï¼Œå¹¶ä¸å»ºè®®ç”¨äºå¤‡ä»½å½•åƒã€ç”µå½±ç­‰èµ„æºã€‚\n\nåŸæœ‰ä»£ç è¯»å–md5çš„æ–¹å¼åœ¨ç¨‹åºä¸­ï¼Œæˆ‘è®¡ç®—æ–‡ä»¶æ•´ä½“md5çš„æ“ä½œæ˜¯è¿™æ ·å†™çš„\n# æ‰“å¼€æ–‡ä»¶with open(file_path, &#x27;rb&#x27;) as f:\tfile_bytes = f.read()# 1.è®¡ç®—æ–‡ä»¶md5ï¼Œåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºæ•°æ®ä¸­file_name = os.path.basename(file_path)  # æ–‡ä»¶åfile_md5_str = hashlib.md5(file_bytes).hexdigest()_log.debug(f&quot;&#123;file_path&#125; | &#123;file_md5_str&#125;&quot;)\n\né—®é¢˜å…¶å®å¾ˆæ˜æœ—ï¼Œå°±æ˜¯è¿™é‡Œçš„f.read()æ“ä½œç›´æ¥å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜é‡Œé¢äº†ï¼å¤‡ä»½çš„æ–‡ä»¶ç¨å¾®å¤§ä¸€ç‚¹ï¼ŒæŒ‡å®šè¦æŠŠå†…å­˜æ•´çˆ†çš„ï¼\nåˆ†ç‰‡è¯»å–md5è¿™éƒ¨åˆ†ä»£ç åº”è¯¥æ›¿æ¢ä¸ºå¦‚ä¸‹å½¢å¼ï¼Œåˆ†ç‰‡è¯»å–æ–‡ä»¶ï¼Œå¹¶å°†è¯»å–çš„md5ç»™updateåˆ°hashlib.md5()å¯¹è±¡ä¸­\ndef file_md5(file_path: str):    &quot;&quot;&quot;ç»™å®šä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œåˆ†ç‰‡åŠ è½½æ–‡ä»¶ï¼Œè®¡ç®—æ–‡ä»¶çš„md5&quot;&quot;&quot;    chunk_size = 4096  # æ ¹æ®éœ€è¦è°ƒæ•´å•å—çš„å¤§å°    with open(file_path, &#x27;rb&#x27;) as f:        file_md5 = hashlib.md5()        while chunk := f.read(chunk_size):            file_md5.update(chunk)    return file_md5.hexdigest()\n\nç»è¿‡æµ‹è¯•ï¼Œè¿™ç§åŠæ³•è®¡ç®—å‡ºæ¥çš„md5å’Œç›´æ¥f.read()å…¨éƒ¨è®¡ç®—å‡ºçš„md5å®Œå…¨ä¸€è‡´\nâ•°â”€ python3.10 test.py                 ca60e24bf4dde156a381c8b9d268faf5ca60e24bf4dde156a381c8b9d268faf5\n\nå†…å­˜å ç”¨ç›‘æ§çº¿ç¨‹ç”¨ä¸‹é¢çš„ä»£ç å¼„ä¸ªå†…å­˜å ç”¨çš„ç›‘æ§çº¿ç¨‹ï¼Œé€šè¿‡psutilåº“å®æ—¶æ‰“å°å†…å­˜å ç”¨\nimport psutilimport osimport threadingimport timedef monitor_memory_usage():    process = psutil.Process(os.getpid())    while True:        memory_info = process.memory_info()        print(f&quot;Memory used: &#123;memory_info.rss / (1024 * 1024):.2f&#125; MB&quot;)        time.sleep(1)  # æ¯ç§’æ›´æ–°ä¸€æ¬¡å†…å­˜ä¿¡æ¯# å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¥ç›‘è§†å†…å­˜ä½¿ç”¨æƒ…å†µmemory_monitor_thread = threading.Thread(target=monitor_memory_usage)memory_monitor_thread.start()# ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡# ç­‰å¾…ç›‘è§†çº¿ç¨‹ç»“æŸï¼ˆå¦‚æœéœ€è¦ï¼‰memory_monitor_thread.join()\n\n\nå†…å­˜å ç”¨æµ‹è¯•å°†é¡¹ç›®ä¸­ä¸Šä¼ åˆ°ç™¾åº¦äº‘çš„éƒ¨åˆ†æ³¨é‡Šæ‰ï¼Œä¼‘çœ 10ç§’æ›¿ä»£ä¸Šä¼ æ“ä½œï¼Œæ¨¡æ‹ŸåŸæœ‰ä»£ç æ•´ä½“æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆåˆ†ç‰‡æ‰“å¼€æ–‡ä»¶ä¸Šä¼ åˆ°ç™¾åº¦äº‘çš„æµç¨‹ã€‚\nç”¨ä¸¤ä¸ª450MBå·¦å³çš„è§†é¢‘åšæµ‹è¯•ã€‚ç¨‹åºåŸæœ‰æ€è·¯æ˜¯éå†éœ€è¦å¤‡ä»½ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œåˆ†ç‰‡ä¸Šä¼ åˆ°ç™¾åº¦äº‘ã€‚è®¡ç®—æ•´ä¸ªæ–‡ä»¶çš„MD5çš„æ“ä½œå…¶å®æ˜¯ç”¨æ¥æœ¬åœ°å…¥åº“æ ‡å®šæ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ã€æ˜¯å¦å·²ç»ä¸Šä¼ çš„ã€‚\nä¸è¿‡åç»­åŠ å¯†æ–‡ä»¶çš„æ“ä½œä¹Ÿæ˜¯æ— è„‘f.read()ï¼Œè¿™éƒ¨åˆ†ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚\n\næ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¼€å§‹å¤„ç†testç›®å½•ä¹‹åï¼Œç¨‹åºç›´æ¥æŠŠè§†é¢‘å®Œæ•´åŠ è½½åˆ°äº†å†…å­˜é‡Œé¢ï¼Œå ç”¨å†…å­˜çš„å¤§å°å’Œè§†é¢‘æ–‡ä»¶å¤§å°åŸºæœ¬ä¸€è‡´ã€‚\nâ•°â”€ python3.10 main.py[23-12-17 20:01:22] INFO:confLoad.py:&lt;module&gt;:68 | [config] loaded config from &#x27;./config/config.yml&#x27;[23-12-17 20:01:22] INFO:confLoad.py:&lt;module&gt;:89 | [config] loaded config success[23-12-17 20:01:22] INFO:querySql.py:&lt;module&gt;:72 | [sqlite3] create all tables[23-12-17 20:01:23] INFO:main.py:&lt;module&gt;:294 | [start] start at 23-12-17 20:01:23[23-12-17 20:01:23] INFO:encrypt.py:__init__:24 | load key file from &#x27;./config/encrypt.key&#x27;Memory used: 39.18 MB[23-12-17 20:01:23] INFO:main.py:upload_task:132 | ä¸Šä¼ ä»»åŠ¡å¼€å§‹ï¼š23-12-17 20:01:23[23-12-17 20:01:23] INFO:main.py:upload_task:139 | å¼€å§‹å¤„ç†è·¯å¾„ &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test&#x27; | æ–‡ä»¶æ•°é‡ 2[23-12-17 20:01:23] INFO:main.py:upload_task:144 | [0] å¼€å§‹å¤„ç† &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠILLSHOWYOUã€‹KDAé˜¿ç‹¸.mp4&#x27;Memory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MBMemory used: 483.52 MB[23-12-17 20:01:33] INFO:main.py:upload_task:237 | [1] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠILLSHOWYOUã€‹KDAé˜¿ç‹¸.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼š7d5735eba55a638a1290ab36e00530ca[23-12-17 20:01:33] INFO:main.py:upload_task:144 | [1] å¼€å§‹å¤„ç† &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠMOREã€‹KDA.mp4&#x27;Memory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MBMemory used: 517.39 MB[23-12-17 20:01:44] INFO:main.py:upload_task:237 | [2] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠMOREã€‹KDA.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼šb7b0cd46e3ac7681a3644d9761ad3e71[23-12-17 20:01:44] INFO:main.py:upload_task:282 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸Šä¼ ï¼š2ï¼Œè·³è¿‡ï¼š0ï¼Œé”™è¯¯ï¼š0 | æ€»è®¡ï¼š2[23-12-17 20:01:44] INFO:main.py:upload_task:283 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œå¹³å‡ä¸Šä¼ é€Ÿåº¦ï¼š43.143mb/s | æ€»è€—æ—¶ï¼š21.16s[23-12-17 20:01:44] INFO:main.py:upload_task:286 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸‹æ¬¡å¤„ç†ï¼š2023-12-17 21:00:00\n\n\nå¸¦ä¸ŠåŠ å¯†ä¹‹åæ›´åŠ ç¦»è°±ï¼Œåªæ˜¯ç¬¬ä¸€ä¸ªæ–‡ä»¶å°±ç›´æ¥æŠŠå†…å­˜å ç”¨å¹²åˆ°äº†3.2GBï¼Œå¤„ç†ç¬¬äºŒä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ç›´æ¥å¹²åˆ°äº†2.4GBï¼Œè¿™ç§ç¨‹åº¦çš„å†…å­˜æ¶ˆè€—è°é¡¶å¾—ä½ï¼Ÿæ›´ä½•å†µç™¾åº¦äº‘APIæœ€å¤§æ”¯æŒ10GBçš„æ–‡ä»¶ä¸Šä¼ ï¼Œå¦‚æœè¦åŠ è½½ä¸€ä¸ª10GBçš„æ–‡ä»¶è¿˜å¾—äº†å•Šï¼Ÿ\nâ•°â”€ python3.10 main.py[23-12-17 19:43:56] INFO:confLoad.py:&lt;module&gt;:68 | [config] loaded config from &#x27;./config/config.yml&#x27;[23-12-17 19:43:56] INFO:confLoad.py:&lt;module&gt;:89 | [config] loaded config success[23-12-17 19:43:56] INFO:querySql.py:&lt;module&gt;:72 | [sqlite3] create all tables[23-12-17 19:43:56] INFO:main.py:&lt;module&gt;:291 | [start] start at 23-12-17 19:43:56Memory used: 39.31 MB[23-12-17 19:43:56] INFO:encrypt.py:__init__:24 | load key file from &#x27;./config/encrypt.key&#x27;[23-12-17 19:43:56] INFO:main.py:upload_task:132 | ä¸Šä¼ ä»»åŠ¡å¼€å§‹ï¼š23-12-17 19:43:56[23-12-17 19:43:56] INFO:main.py:upload_task:139 | å¼€å§‹å¤„ç†è·¯å¾„ &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test&#x27; | æ–‡ä»¶æ•°é‡ 2Memory used: 923.04 MBMemory used: 3267.48 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MBMemory used: 483.71 MB[23-12-17 19:44:08] INFO:main.py:upload_task:234 | [1] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠILLSHOWYOUã€‹KDAé˜¿ç‹¸.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼š7d5735eba55a638a1290ab36e00530caMemory used: 990.96 MBMemory used: 2410.97 MBMemory used: 1622.17 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MBMemory used: 517.57 MB[23-12-17 19:44:22] INFO:main.py:upload_task:234 | [2] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠMOREã€‹KDA.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼šb7b0cd46e3ac7681a3644d9761ad3e71[23-12-17 19:44:22] INFO:main.py:upload_task:279 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸Šä¼ ï¼š2ï¼Œè·³è¿‡ï¼š0ï¼Œé”™è¯¯ï¼š0 | æ€»è®¡ï¼š2[23-12-17 19:44:22] INFO:main.py:upload_task:280 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œå¹³å‡ä¸Šä¼ é€Ÿåº¦ï¼š35.371mb/s | æ€»è€—æ—¶ï¼š25.81s[23-12-17 19:44:22] INFO:main.py:upload_task:283 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸‹æ¬¡å¤„ç†ï¼š2023-12-17 21:00:00\n\nå…ˆå°†md5è®¡ç®—çš„å‡½æ•°ç»™ä¿®æ”¹äº†ï¼Œæ”¹æˆåˆ†ç‰‡è®¡ç®—ã€‚å¯ä»¥çœ‹åˆ°ï¼Œæ•ˆæœæ˜¾è‘—ï¼å†…å­˜å ç”¨å’Œç¨‹åºåˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™å·®è·åªæœ‰5MBï¼Œè¿™æ‰æ˜¯æ­£å¸¸çš„å†…å­˜å ç”¨ï¼\nâ•°â”€ python3.10 main.py[23-12-17 20:03:20] INFO:confLoad.py:&lt;module&gt;:68 | [config] loaded config from &#x27;./config/config.yml&#x27;[23-12-17 20:03:20] INFO:confLoad.py:&lt;module&gt;:89 | [config] loaded config success[23-12-17 20:03:20] INFO:querySql.py:&lt;module&gt;:72 | [sqlite3] create all tables[23-12-17 20:03:20] INFO:main.py:&lt;module&gt;:294 | [start] start at 23-12-17 20:03:20Memory used: 39.26 MB[23-12-17 20:03:20] INFO:encrypt.py:__init__:24 | load key file from &#x27;./config/encrypt.key&#x27;[23-12-17 20:03:20] INFO:main.py:upload_task:132 | ä¸Šä¼ ä»»åŠ¡å¼€å§‹ï¼š23-12-17 20:03:20[23-12-17 20:03:20] INFO:main.py:upload_task:139 | å¼€å§‹å¤„ç†è·¯å¾„ &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test&#x27; | æ–‡ä»¶æ•°é‡ 2[23-12-17 20:03:20] INFO:main.py:upload_task:144 | [0] å¼€å§‹å¤„ç† &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠILLSHOWYOUã€‹KDAé˜¿ç‹¸.mp4&#x27;Memory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MB[23-12-17 20:03:32] INFO:main.py:upload_task:237 | [1] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠILLSHOWYOUã€‹KDAé˜¿ç‹¸.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼š7d5735eba55a638a1290ab36e00530ca[23-12-17 20:03:32] INFO:main.py:upload_task:144 | [1] å¼€å§‹å¤„ç† &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠMOREã€‹KDA.mp4&#x27;Memory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MBMemory used: 44.08 MB[23-12-17 20:03:44] INFO:main.py:upload_task:237 | [2] æˆåŠŸä¸Šä¼  &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/ã€è¶…ä¸æ»‘60å¸§ã€‘4Kç²¾è£…å­—å¹•ç‰ˆã€ŠMOREã€‹KDA.mp4&#x27; æ–‡ä»¶å“ˆå¸Œï¼šb7b0cd46e3ac7681a3644d9761ad3e71[23-12-17 20:03:44] INFO:main.py:upload_task:282 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸Šä¼ ï¼š2ï¼Œè·³è¿‡ï¼š0ï¼Œé”™è¯¯ï¼š0 | æ€»è®¡ï¼š2[23-12-17 20:03:44] INFO:main.py:upload_task:283 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œå¹³å‡ä¸Šä¼ é€Ÿåº¦ï¼š38.689mb/s | æ€»è€—æ—¶ï¼š23.60s[23-12-17 20:03:44] INFO:main.py:upload_task:286 | æœ¬æ¬¡ä¸Šä¼ å®Œæ¯•ï¼Œä¸‹æ¬¡å¤„ç†ï¼š2023-12-17 21:00:00\n\nThe endå…³äºåˆ†ç‰‡è®¡ç®—md5çš„ä»‹ç»å°±è¿™ä¹ˆå¤šï¼Œæˆ‘è¿™ä¸ªç¨‹åºé‡Œé¢æ–‡ä»¶åŠ å¯†çš„éƒ¨åˆ†ä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œä¸è¿‡é‚£å°±ä¸æ˜¯æœ¬æ–‡çš„èŒƒç•´äº†~\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Pythonã€‘Pythonå®ç°æ–‡ä»¶åˆ†ç‰‡åŠ å¯†å’Œä¸Šä¼ ï¼ˆæœªå®ç°ï¼‰","url":"/posts/621478472/","content":"è¯´æ˜\né¡¹ç›®åœ°å€ï¼šmusnows&#x2F;encrypt2bdy\n\nä¹‹å‰å†™çš„ä¸€ç¯‡åšå®¢æåˆ°äº†æˆ‘çš„encrypt2bdyé¡¹ç›®ä¸­ï¼Œæ–‡ä»¶ç›´æ¥æ•´ä¸ªè¢«è¯»å–åˆ°å†…å­˜é‡Œé¢å†è®¡ç®—md5ï¼Œå¯¼è‡´å†…å­˜å ç”¨å·¨å¤§çš„é—®é¢˜ã€‚åç»­è§£å†³æ–¹æ³•æ˜¯ç”¨åˆ†ç‰‡çš„æ–¹å¼æŒ¨ä¸ªè¯»å–æ–‡ä»¶å—å¹¶è®¡ç®—md5ã€‚\nä½†å…‰æ˜¯ä¿®æ”¹md5è®¡ç®—æ–¹å¼è¿˜ä¸å¤Ÿï¼Œå› ä¸ºé¡¹ç›®ä¸­è¿˜æ¶‰åŠåˆ°ä¸Šä¼ åŠ å¯†åæ–‡ä»¶çš„é—®é¢˜ï¼Œä¸”å¬æˆ‘ç»†ç»†é“æ¥ğŸ‘‡\nå…³äºæ–‡ä»¶åŠ å¯†åº“cryptography.fernetæˆ‘çš„åŠ å¯†è§£å¯†æ“ä½œä½¿ç”¨çš„æ˜¯Fernetè¿™ä¸ªåº“ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå¯†é’¥æ–‡ä»¶ï¼Œå¹¶å€Ÿå¯†é’¥æ–‡ä»¶å¯¹å­—èŠ‚æµè¿›è¡ŒåŠ å¯†å’Œè§£å¯†æ“ä½œã€‚\nfrom cryptography.fernet import Fernet\n\nä½†æ˜¯ï¼ŒFernetæ¡†æ¶ä¸é€‚åˆè¿›è¡Œåˆ†ç‰‡åŠ å¯†å’Œè§£å¯†ã€‚åœ¨æˆ‘çš„å°è¯•ä¸­ï¼Œåˆ†ç‰‡åŠ å¯†æ–‡ä»¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è§£å¯†çš„æ—¶å€™ä¼šå› ä¸ºå¯†é’¥å¯¹ä¸ä¸Šè€Œå‡ºç°å¼‚å¸¸ã€‚\ncryptography.fernet.InvalidToken â€“ If the token is in any way invalid, this exception is raised. A token may be invalid for a number of reasons: it is older than the ttl, it is malformed, or it does not have a valid signature.\n\nå®˜æ–¹æ–‡æ¡£é‡Œé¢æåˆ°äº†ï¼ŒFernetåªé€‚åˆç”¨äºèƒ½å®Œå…¨åŠ è½½åˆ°å†…å­˜é‡Œé¢çš„æ•°æ®ï¼Œä¸é€‚åˆç”¨äºå¤„ç†å¤§æ–‡ä»¶ã€‚\n\nLimitations:Fernet is ideal for encrypting data that easily fits in memory. As a design feature it does not expose unauthenticated bytes. This means that the complete message contents must be available in memory, making Fernet generally unsuitable for very large files at this time.\n\nåœ¨å½“å‰å¤‡ä»½æ–‡ä»¶çš„è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå°†æ–‡ä»¶å…¨éƒ¨åŠ è½½åˆ°å†…å­˜é‡Œé¢æ˜¯ä¸åˆç†çš„ã€‚æ‰€ä»¥éœ€è¦æ¢ä¸€ä¸ªåŠ å¯†&#x2F;è§£å¯†åº“\npyAesCryptæ”¹ç”¨pyAesCryptäº†ï¼ŒåŠ å¯†å’Œè§£å¯†çš„å¤„ç†éå¸¸ç®€å•ï¼Œä¹Ÿå¯ä»¥åˆ†ç‰‡åŠ è½½ã€‚å¦‚ä¸‹ä»£ç ç¤ºä¾‹ä¸­ï¼Œinput_fileæ˜¯å¾…åŠ å¯†æ–‡ä»¶ï¼Œoutput_fileæ˜¯åŠ å¯†åæ–‡ä»¶ï¼Œpasswordæ˜¯ç”¨æˆ·æä¾›çš„åŠ å¯†å¯†é’¥ã€‚\nimport pyAesCryptdef encrypt_file(input_file, output_file, password, buffer_size=64 * 1024):    with open(input_file, &#x27;rb&#x27;) as file_in, open(output_file, &#x27;wb&#x27;) as file_out:        pyAesCrypt.encryptStream(file_in, file_out, password, buffer_size)def decrypt_file(input_file, output_file, password, buffer_size=64 * 1024):    with open(input_file, &#x27;rb&#x27;) as file_in, open(output_file, &#x27;wb&#x27;) as file_out:        pyAesCrypt.decryptStream(file_in, file_out, password, buffer_size)\n\nåªè¦ç”¨æˆ·è¿˜è®°å¾—ä½è‡ªå·±çš„åŠ å¯†å¯†é’¥ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥ç”¨è§£å¯†å‡½æ•°å°†æ–‡ä»¶è§£å¯†å‡ºæ¥ã€‚\nAESåŠ å¯†æ˜¯å½“å‰å¹¿æ³›ä½¿ç”¨çš„å¯¹ç§°åŠ å¯†æ–¹å¼ï¼Œè‡³äºå®ƒæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œèƒ½å¦è¢«ç ´è§£éƒ½æ˜¯å¯†ç å­¦çš„èŒƒç•´äº†ã€‚æˆ‘äº†è§£åˆ°çš„ä¿¡æ¯æ˜¯ï¼Œç ´è§£AESåŠ å¯†ç®—æ³•æœ¬èº«çš„æ¶ˆè€—å·¨å¤§ï¼ŒçœŸè¦å»ç ´è§£ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨çŒœæµ‹å¯†é’¥çš„æ–¹å¼ï¼ˆå³çŒœæµ‹ä½ æ˜¯ç”¨ä»€ä¹ˆå¯†é’¥åŠ å¯†çš„è¿™ä¸ªæ–‡ä»¶ï¼‰\næ‰€ä»¥å½“ä½ éœ€è¦ä½¿ç”¨AESå¯†é’¥æ¥åŠ å¯†æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€å®šè¦é€‰ç”¨ä¸€ä¸ªå¼ºå¯†é’¥ï¼Œä¿è¯æ•°æ®ä¸è¢«è½»æ˜“çªƒå–ã€‚\nå½“ç„¶ï¼Œæˆ‘çš„é¡¹ç›®ä¸­ï¼ŒåŠ å¯†çš„ç›®çš„å¾ˆå•çº¯ï¼Œå°±æ˜¯ä¸ºäº†é¿å…ç™¾åº¦äº‘ç›˜æ‰«æˆ‘çš„ç›¸ç‰‡å’Œä¸ªäººæ–‡ä»¶ã€‚é˜²æ­¢æ–‡ä»¶è¢«çªƒå–åªæ˜¯ä¸ªé™„å¸¦çš„åŠŸèƒ½ã€‚\nå®æµ‹ï¼Œencrypt2bdyé¡¹ç›®ä¸­é‡‡ç”¨pyAesCryptåº“åï¼Œå¤„ç†500MBæ–‡ä»¶çš„è¿‡ç¨‹ä¸­å†…å­˜å ç”¨éƒ½ä¸ä¼šè¶…è¿‡90MBï¼Œéå¸¸å®Œç¾ã€‚\nå¯†é’¥æ³„éœ²é—®é¢˜ï¼Ÿæ›´æ–°åçš„é¡¹ç›®è¿˜æ˜¯é‡‡ç”¨ç¯å¢ƒå˜é‡çš„æ–¹å¼æ¥åŠ è½½ç”¨æˆ·å¯†é’¥ï¼Œè‡³äºç¯å¢ƒå˜é‡æ–¹å¼æ˜¯å¦ä¼šå¯¼è‡´å¯†é’¥æ³„éœ²ï¼šåˆ«äººéƒ½èƒ½çœ‹åˆ°ä½ çš„dockeré…ç½®äº†ï¼Œä»–è¿˜å–ä½ çš„å¯†é’¥å¹²å˜›ï¼Œç›´æ¥æŠŠæœ¬åœ°æºæ–‡ä»¶å·èµ°äº†å¥½å§â€¦â€¦\nå°±ç®—ä¸ç”¨ç¯å¢ƒå˜é‡ï¼Œåœ¨é…ç½®æ–‡ä»¶&#x2F;å‰ç«¯é‡Œé¢å¡«å¯†é’¥ï¼Œæœ€ç»ˆéƒ½è¿˜æ˜¯éœ€è¦ä¸€ä¸ªä½ç½®æ¥å­˜æ”¾è¿™ä¸ªå¯†é’¥ \né™¤éç›´æ¥æŠŠå¯†é’¥å­˜å†…å­˜é‡Œé¢ï¼Œä¸å†™å…¥ä»»ä½•æ–‡ä»¶ï¼Œä¸”æ¯æ¬¡é‡å¯dockeréƒ½è¦æ±‚ç”¨æˆ·é‡æ–°å¡«å¯†é’¥ã€‚ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´å®¹å™¨å¯ç”¨æ€§å¾ˆå·®ï¼Œæ¯•ç«Ÿæ¯æ¬¡æ“ä½œdockerå®¹å™¨éƒ½å¾—é‡æ–°å¼„ä¸€ä¸‹é…ç½®ã€‚ä¸è¿‡åç»­ç»™æŸäº›å¯¹éšç§è¦æ±‚é«˜çš„è€å“¥æä¾›è¿™ä¸ªåŠŸèƒ½ä¹Ÿä¸æ˜¯ä¸è¡Œã€‚ï¼ˆè¿™ä¸ªåŠŸèƒ½å¿…é¡»è¦ç­‰å‰ç«¯å†™å‡ºæ¥äº†ä¹‹åæ‰æœ‰å¯èƒ½å®ç°ï¼‰\nåˆ†ç‰‡åŠ å¯†ä¸Šä¼ ï¼ˆé—®é¢˜æœªè§£å†³ï¼‰ä¿®æ”¹äº†åŠ å¯†åº“è¿˜æ˜¯ä¸å¤Ÿã€‚æ¥å’Œæˆ‘ä¸€èµ·çœ‹çœ‹å½“å‰é¡¹ç›®ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘å§ï¼Œå‡è®¾ç”¨æˆ·é€‰æ‹©äº†åŠ å¯†ä¸Šä¼ \n\nåˆ†ç‰‡è¯»å–æ–‡ä»¶ï¼Œè®¡ç®—æ–‡ä»¶md5ç”¨äºæœ¬åœ°å…¥åº“\nåˆ†ç‰‡è¯»å–å’ŒåŠ å¯†æ–‡ä»¶ï¼Œå¹¶å°†åŠ å¯†åæ–‡ä»¶æ·»åŠ .e2bdyåç¼€å†™å…¥æºç›®å½•\nåˆ†ç‰‡è¯»å–å’Œä¸Šä¼ åŠ å¯†åæ–‡ä»¶\nä¸Šä¼ å®Œæ¯•ï¼Œåˆ é™¤åŠ å¯†åæ–‡ä»¶ï¼ˆåªä¿ç•™æºæ–‡ä»¶ï¼‰\nå¾ªç¯å¤„ç†ï¼Œç›´åˆ°é€‰å®šç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶éƒ½è¢«å¤„ç†å®Œæ¯•ã€‚\n\næ•´ä¸ªç¨‹åºé€»è¾‘éƒ½é‡‡ç”¨äº†åˆ†ç‰‡è¯»å–æ–‡ä»¶ï¼Œå†…å­˜å ç”¨é—®é¢˜æ˜¯è§£å†³äº†ï¼Œä½†è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼šåŠ å¯†åæ–‡ä»¶éœ€è¦å†™å…¥ç£ç›˜ï¼Œä¸Šä¼ ååˆè¢«åˆ é™¤ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå‡è®¾æˆ‘éœ€è¦å¤‡ä»½100GBçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆç£ç›˜å°±ä¼šå¤šå‡º100GBçš„æ•°æ®æ“¦å†™â€¦â€¦ç¨‹åºä¹Ÿéœ€è¦ç´¯ç§¯ç­‰å¾…100GBçš„ç£ç›˜å†™å…¥ï¼Œå¦‚æœæ˜¯æœºæ¢°ç¡¬ç›˜â€¦â€¦\nè€Œä¸”ï¼Œç£ç›˜è¿˜éœ€è¦ä¿ç•™æœ‰è¶³é‡ç©ºé—´æ¥å­˜æ”¾è¿™ä¸ªä¸´æ—¶çš„åŠ å¯†æ–‡ä»¶ï¼Œå‡è®¾æˆ‘æƒ³å¤‡ä»½ä¸€ä¸ª10GBçš„å•ä¸ªæ–‡ä»¶ï¼Œç£ç›˜å‰©ä½™å¯ç”¨ç©ºé—´åªå‰©5GBäº†ï¼Œæ­¤æ—¶ç¨‹åºå°±æ— æ³•å°†åŠ å¯†åçš„æ–‡ä»¶å†™å…¥ç£ç›˜ï¼ˆä¸€èˆ¬åŠ å¯†åçš„æ–‡ä»¶ä¼šæ¯”åŸå§‹æ–‡ä»¶ç•¥å¤§ä¸€äº›ï¼‰ï¼Œå¯¼è‡´æ— æ³•å¤„ç†è¿™ä¸ªæ–‡ä»¶äº†ã€‚\nè¿™æ ·è‚¯å®šä¸è¡Œï¼æ‰€ä»¥æˆ‘æ¢äº†ä¸€ä¸ªæ€è·¯ï¼Œç™¾åº¦äº‘ç›˜è¦æ±‚æ•°æ®æŒ‰4MBçš„åˆ†ç‰‡è°ƒç”¨APIä¸Šä¼ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯å¦æ¯æ¬¡è¯»å–4MBçš„æ–‡ä»¶å†…å®¹ï¼ŒåŠ å¯†å®ƒå¹¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œéšåç›´æ¥ä¸Šä¼ è¿™ä¸ªåˆ†ç‰‡å‘¢ï¼Ÿè¿™æ ·æ•´ä¸ªçš„å¤„ç†æµç¨‹ä¸­ï¼Œéƒ½æ˜¯åˆ†ç‰‡ååœ¨å†…å­˜ä¸­å¤„ç†ï¼Œä¹Ÿä¸ä¼šå¤šå‡ºæ¥ä¸€ä¸ªä¸´æ—¶çš„åŠ å¯†æ–‡ä»¶å¯¼è‡´çš„æ•°æ®æ“¦å†™ï¼Œé¡¹ç›®å¯ç”¨æ€§æé«˜ï¼\né—®äº†GPTï¼Œå†™äº†ä¸ªè¿™æ ·çš„ç¤ºä¾‹ä»£ç \nimport ioimport osimport pyAesCrypt# åŠ å¯†å‡½æ•°def encrypt_chunk(chunk_data, password):    # åŠ å¯†æ•°æ®å—    with io.BytesIO() as block_encrypted:        pyAesCrypt.encryptStream(            io.BytesIO(chunk_data),            block_encrypted,            password        )        # è¿”å›åŠ å¯†åçš„æ•°æ®        return block_encrypted.getvalue()# ä¸Šä¼ å‡½æ•°def upload_chunk_to_cloud(chunk_data):    # å°†åŠ å¯†åçš„æ•°æ®å—ä¸Šä¼ åˆ°äº‘ç«¯    pass# ä¸»ç¨‹åºif __name__ == &#x27;__main__&#x27;:    src_path = &#x27;path/to/source/file&#x27;    password = &#x27;your-password&#x27;    with open(src_path, &#x27;rb&#x27;) as src_file:        while True:            # è¯»å–ä¸€ä¸ªæ•°æ®å—            chunk = src_file.read(4 * 1024 * 1024)            if not chunk:                # æ•°æ®å—è¯»å–å®Œæ¯•ï¼Œé€€å‡ºå¾ªç¯                break            # åŠ å¯†æ•°æ®å—            encrypted_chunk = encrypt_chunk(chunk, password)            # ä¸Šä¼ åŠ å¯†åçš„æ•°æ®å—åˆ°äº‘ç«¯            upload_chunk_to_cloud(encrypted_chunk)\n\nç°åœ¨æˆ‘è¦åšçš„ï¼Œå°±æ˜¯éªŒè¯ä¸€ä¸‹è¿™æ ·æ“ä½œæ˜¯å¦èƒ½ä¸Šä¼ æˆåŠŸã€æ˜¯å¦èƒ½è§£å¯†ä¸Šä¼ åçš„æ–‡ä»¶ï¼Œç„¶åå†çœ‹çœ‹å†…å­˜å ç”¨å¤šå°‘ã€‚\nåˆ†ç‰‡åŠ å¯†å’Œç›´æ¥åŠ å¯†åŒºåˆ«ç„¶è€Œç¬¬ä¸€éƒ¨æˆ‘å°±å¡ä½äº†ï¼šç™¾åº¦äº‘ç›˜çš„APIè¦æ±‚ä¸Šä¼ å‰å…ˆä¼ å…¥æ–‡ä»¶çš„å®Œæ•´md5ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘å¾—æƒ³ä¸ªåŠæ³•æ‹¿åˆ°åŠ å¯†åæ–‡ä»¶çš„å®Œæ•´md5ï¼\nimport ioimport osimport hashlibimport pyAesCrypt# åŠ å¯†å‡½æ•°def encrypt_chunk(chunk_data, password):    # åŠ å¯†æ•°æ®å—    with io.BytesIO() as block_encrypted:        pyAesCrypt.encryptStream(io.BytesIO(chunk_data), block_encrypted,                                 password)        # è¿”å›åŠ å¯†åçš„æ•°æ®        return block_encrypted.getvalue()def encrypt_file(input_file_path: str, passwd):    &quot;&quot;&quot;    åŠ å¯†æ–‡ä»¶ï¼Œé‡‡ç”¨åˆ†ç‰‡è¯»å–    :param input_file_pathï¼š éœ€è¦åŠ å¯†çš„æºæ–‡ä»¶    :return åŠ å¯†åçš„æ–‡ä»¶è·¯å¾„    &quot;&quot;&quot;    encrypt_file_path = input_file_path + &quot;.ept&quot;    with open(input_file_path, &#x27;rb&#x27;) as file_in, open(encrypt_file_path,                                                      &#x27;wb&#x27;) as file_out:        pyAesCrypt.encryptStream(file_in, file_out, passwd, 4 * 1024 * 1024)    return encrypt_file_path# ä¸»ç¨‹åºif __name__ == &#x27;__main__&#x27;:    src_path = &#x27;/home/mu/code-wsl/py-wsl/encrypt2bdy/test/CloudDrive2Setup-X64-0.5.14.exe&#x27;    password = &#x27;test&#x27;    ept_file_path = encrypt_file(src_path,password)    # è¯»å–åŠ å¯†åæ–‡ä»¶è®¡ç®—md5    with open(ept_file_path, &#x27;rb&#x27;) as f:        file_md5_str = hashlib.md5(f.read()).hexdigest()        print(&quot;full encrypt&quot;,file_md5_str)    # åˆ†ç‰‡åŠ å¯†å¹¶è®¡ç®—md5    file_md5_str = hashlib.md5()    with open(src_path, &#x27;rb&#x27;) as src_file:        while True:            # è¯»å–ä¸€ä¸ªæ•°æ®å—            chunk = src_file.read(4 * 1024 * 1024)            if not chunk:                # æ•°æ®å—è¯»å–å®Œæ¯•ï¼Œé€€å‡ºå¾ªç¯                break            # åŠ å¯†æ•°æ®å—            encrypted_chunk = encrypt_chunk(chunk, password)            file_md5_str.update(encrypted_chunk)    print(&quot;chunk encrypt&quot;,file_md5_str.hexdigest())\n\nä½¿ç”¨å¦‚ä¸Šä»£ç åˆ†ç‰‡åŠ å¯†åçš„æ•´ä¸ªæ–‡ä»¶ï¼Œå’Œç›´æ¥ä½¿ç”¨åŠ å¯†åº“æ¥åŠ å¯†çš„æ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œå³ä¾¿è¿™ä¸¤ä¸ªæ“ä½œéƒ½ç”¨äº†ç›¸åŒå¤§å°çš„åˆ†ç‰‡å—ã€‚\nâ•°â”€ python3.10 test.pyfull encrypt e994f5c7244fa7d6e9577e2089a029bcchunk encrypt bdd05213bcafe4f87470c90633d7c2bc\n\nä½†å¦‚æœæŠŠåˆ†ç‰‡åçš„æ–‡ä»¶å†™å…¥æœ¬åœ°ï¼Œå†è®¡ç®—md5ï¼Œä¼šå‘ç°å’Œå•ä¸ªè®¡ç®—çš„md5ç›¸åŒ\n   # åˆ†ç‰‡åŠ å¯†å¹¶è®¡ç®—md5   file_md5_str = hashlib.md5()   # åˆ†ç‰‡åŠ å¯†åä¿å­˜åˆ°æœ¬åœ°çš„æ–‡ä»¶è·¯å¾„   chunk_encrpy_file = src_path + &#x27;.test&#x27;      with open(chunk_encrpy_file,&#x27;wb&#x27;) as ef:       with open(src_path, &#x27;rb&#x27;) as src_file:           while True:               # è¯»å–ä¸€ä¸ªæ•°æ®å—               chunk = src_file.read(4 * 1024 * 1024)               if not chunk:                   break # æ•°æ®å—è¯»å–å®Œæ¯•ï¼Œé€€å‡ºå¾ªç¯               # åŠ å¯†æ•°æ®å—               encrypted_chunk = encrypt_chunk(chunk, password)               file_md5_str.update(encrypted_chunk)               ef.write(encrypted_chunk)# åˆ†ç‰‡åŠ å¯†å¾—åˆ°çš„æœ€ç»ˆmd5   print(&quot;chunk encrypt&quot;,file_md5_str.hexdigest())   # è®¡ç®—åŠ å¯†åä¿å­˜åˆ°æœ¬åœ°çš„æ–‡ä»¶çš„md5   print(&quot;chunk encrypt file:&quot;,file_md5(chunk_encrpy_file))\n\nè¿è¡Œç»“æœå¦‚ä¸‹\nchunk encrypt 843ef6583227592da36e563c1700d0dachunk encrypt file: 843ef6583227592da36e563c1700d0da\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶è¿™ç§æ–¹å¼å’Œç›´æ¥åŠ å¯†æ•´ä¸ªæ–‡ä»¶ï¼Œå¾—åˆ°çš„æœ€ç»ˆæ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æˆ‘ä»¬ä¾æ—§å¯ä»¥é€šè¿‡ç”¨ç›¸åŒåŠæ³•è¿›è¡ŒåŠ å¯†å’Œè§£å¯†æ“ä½œï¼Œæ¥è¿›è¡Œåˆ†ç‰‡åŠ å¯†ä¸Šä¼ å’Œåˆ†ç‰‡è§£å¯†æ–‡ä»¶ï¼ˆå—ï¼Ÿï¼‰\nraise ValueError(&quot;Bad HMAC (file is corrupted).&quot;)\n\næ— æ³•è§£å¯†â€¦â€¦Gï¼\nè¦æœŸæœ«äº†ï¼Œç­‰æ”¾å‡äº†å†ç»§ç»­ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚\næ”¾å‡äº†â€¦â€¦ä½†æˆ‘è¿˜æ˜¯æ²¡æœ‰å¼„æ˜ç™½æœ‰æ²¡æœ‰åŠæ³•å®ç°å†…å­˜ä¸­åˆ†ç‰‡åç›´æ¥ä¸Šä¼ ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Pythonã€‘requeståº“InsecureRequestWarningçš„åŸå› ","url":"/posts/903214799/","content":"ä»Šå¤©åœ¨æµ‹è¯•æˆ‘è‡ªå·±å†™çš„apiçš„æ—¶å€™ï¼Œå‘ç°äº†ä¹‹å‰å‡ºç°çš„ä¸€ä¸ªwarningçš„çœŸæ­£åŸå› \n1.èµ·å› å…ˆæ¥çœ‹è¯·æ±‚apiçš„ä»£ç \ndef ApiRq(account:str,passwd:str,background=&#x27;&#x27;):    url = &quot;https://val.musnow.top/shop-url&quot;    params = &#123;         # å‚æ•°æ¶‰åŠåˆ°éšç§ï¼Œçœç•¥    &#125;  \tres = requests.get(url,params=params,verify=False) # è¯·æ±‚api    return res.json()\n\nè¿è¡Œï¼Œä¼šå‡ºç°è¿™ä¸ªè­¦å‘Š\n/home/muxue/.local/lib/python3.10/site-packages/urllib3/connectionpool.py:1045: InsecureRequestWarning: Unverified HTTPS request is being made to host &#x27;val.musnow.top&#x27;. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„åŠæ³•æ¥å»æ‰è¿™ä¸ªè­¦å‘Š\nimport urllib3 # å±è”½ssl warningurllib3.disable_warnings(urllib3.connectionpool.InsecureRequestWarning)\n\nä½†æ˜¯è¿™æ ·æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ£€æŸ¥ç½‘ç«™çš„è¯ä¹¦ï¼Œä¹Ÿå°±æ— æ³•å‘æœåŠ¡å™¨å‘é€ç¡®è®¤åçš„åŠ å¯†ä¿¡æ¯\n2.å‡ºç°è¿™ä¸ªè­¦å‘Šçš„åŸå› å‡ºç°è¿™ä¸ªè­¦å‘Šï¼Œå…¶å®å°±æ˜¯å› ä¸ºæˆ‘ä»¬è¿™é‡Œè®¾ç½®äº†ä¸æ£€æŸ¥sslè¯ä¹¦\nres = requests.get(url,params=params,verify=False) # è¯·æ±‚api\n\nå¦‚æœä½ ç½‘ç«™çš„è¯ä¹¦æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé‚£ä¹ˆå®Œå…¨æ²¡æœ‰å¿…è¦ä¸æ£€æŸ¥ï¼Œåº”è¯¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç \nres = requests.get(url,params=params)\n\nä¹‹å‰æˆ‘çš„apiç«™ç‚¹æ‰€ç”¨è¯ä¹¦ç¼ºå°‘è¯ä¹¦é“¾ï¼Œæ‰€ä»¥å‡ºç°äº†å¦å¤–ä¸€ä¸ªæŠ¥é”™ï¼Œä»è€Œä½¿ç”¨äº†verify=Falseæ‰èƒ½æ­£å¸¸è¿è¡Œä»£ç ï¼Œç°åœ¨æ›´æ–°äº†è¯ä¹¦ï¼Œä¹Ÿå°±ä¸éœ€è¦äº†ï¼\næ­¤æ—¶ç›´æ¥è¿è¡Œä»£ç ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™äº†ï¼\n[muxue@bt-7274:~/kook/test]$ py3 api_test.pystart test\n\n3.è¿›ä¸€æ­¥äº†è§£\nå‚è€ƒ https://blog.csdn.net/memory_qianxiao/article/details/82011282\n\nrequests åº“å…¶å®æ˜¯åŸºäº urllib ç¼–å†™çš„ï¼Œå¯¹ urllib è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—ä½¿ç”¨æ—¶å€™çš„ä½“éªŒå¥½äº†å¾ˆå¤šã€‚\nç°åœ¨ urllib å·²ç»å‡ºåˆ°äº†3ç‰ˆæœ¬ï¼ŒåŠŸèƒ½å’Œæ€§èƒ½è‡ªç„¶æ˜¯æå‡äº†ä¸å°‘ã€‚æ‰€ä»¥ï¼Œrequestsæœ€æ–°ç‰ˆæœ¬ä¹Ÿæ˜¯åŸºäºæœ€æ–°çš„ urllib3 è¿›è¡Œå°è£…ã€‚\nåœ¨urllib2æ—¶ä»£å¯¹httpsçš„å¤„ç†éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨è¯·æ±‚çš„æ—¶å€™åŠ ä¸Š verify=False å³å¯ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯å¿½ç•¥httpså®‰å…¨è¯ä¹¦çš„éªŒè¯ï¼Œä¹Ÿå°±æ˜¯ä¸éªŒè¯è¯ä¹¦çš„å¯é æ€§ï¼Œç›´æ¥è¯·æ±‚ã€‚ä½†è¿™å…¶å®æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¯ä¹¦å¯ä»¥ä¼ªé€ ï¼Œä¸éªŒè¯çš„è¯å°±ä¸èƒ½ä¿è¯æ•°æ®çš„çœŸå®æ€§ã€‚\nåœ¨urllib3æ—¶ä»£ï¼Œå®˜æ–¹å¼ºåˆ¶éªŒè¯httpsçš„å®‰å…¨è¯ä¹¦ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡æ˜¯ä¸èƒ½é€šè¿‡è¯·æ±‚çš„ï¼Œè™½ç„¶æ·»åŠ å¿½ç•¥éªŒè¯çš„å‚æ•°ï¼Œä½†æ˜¯ä¾ç„¶ä¼š ç»™å‡ºé†’ç›®çš„ Warning\n\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯å¦‚æœæ˜¯æ—§çš„requeståº“ï¼Œä½ å¯ä»¥ç”¨ verify=False ç¦ç”¨æ‰è¯ä¹¦éªŒè¯ï¼Œä¹Ÿä¸ä¼šå‡ºç°æŠ¥é”™ï¼›ä½†æ˜¯åˆ° urllib3 åï¼Œå®˜æ–¹è¦æ±‚ä¸€å®šè¦éªŒè¯httpsè¯ä¹¦ï¼Œæ‰€ä»¥ç¦ç”¨æ‰è¯ä¹¦éªŒè¯ï¼Œå°±ä¼šæŠ¥å‡ºè­¦å‘Šã€‚\né™¤éä½ ç¡®è®¤ä½ è°ƒç”¨çš„apiæ˜¯æ­£è§„çš„ï¼Œé‚£ä¹ˆç¦ç”¨æ‰è¯ä¹¦éªŒè¯æ˜¯ä¸åº”è¯¥çš„ï¼\n4.æ£€æŸ¥ä¸€ä¸‹ä½ çš„ç«™ç‚¹sslè¯ä¹¦æ˜¯å¦okè¿™é‡Œç»™å¤§å®¶æ¨èä¸€ä¸ªç½‘ç«™ï¼šmyssl\nåœ¨è¿™é‡Œè¾“å…¥ä½ çš„åŸŸåï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸‹ä½ çš„sslè¯ä¹¦æ˜¯å¦æ­£ç¡®éƒ¨ç½²ï¼Œæˆ‘çš„è¯ä¹¦é“¾é—®é¢˜å°±æ˜¯åœ¨è¿™é‡Œæ£€æµ‹å‡ºæ¥çš„\n\nåªè¦æ˜¯Aé‚£å°±æ˜¯okçš„ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook","API"]},{"title":"ã€Pythonã€‘request.sessionçš„cookieå¦‚ä½•å¯¼å…¥aiohttp._cookie_jar","url":"/posts/3768471210/","content":"request.sessionçš„cookieå¯¼å…¥aiohttp._cookie_jarçš„æ•™ç¨‹\n\n\n1.èµ·å› æˆ‘çš„ kook-valorant-bot ä½¿ç”¨äº†ä¸¤ä¸ªå¼€æºåº“ï¼Œç”¨äºriotè´¦æˆ·çš„ç™»å½•å¹¶è·å–token\n\nå…¶ä¸­æœ€ä¸»è¦ç”¨çš„æ˜¯åŸºäºaiohttpçš„floxay&#x2F;python-riot-authï¼Œä½†è¿™ä¸ªä»“åº“ä¸æ”¯æŒ2faç”¨æˆ·ï¼ˆå¼€å¯äº†é‚®ç®±åŒé‡éªŒè¯çš„ç”¨æˆ·ï¼‰ä½œè€…å»å¹´å°±è¯´ä¼šå†™ä¸Šï¼Œä½†æ˜¯ä»–æ¯”è¾ƒå¿™æ²¡æœ‰æ’æœŸï¼›\näºæ˜¯æˆ‘åˆå»æ‰¾äº†ä¸€ä¸ªå¦å¤–ä¸€ä¸ªåŸºäºrequestçš„Prodzify&#x2F;Riot-auth æ”¯æŒ2faç™»å½•çš„ï¼ŒåŠæœˆå‰å·²ç»ç»™botåŠ ä¸Šäº†è¿™ä¸ªç¼ºå¤±åŠå¹´çš„åŠŸèƒ½ã€‚\n\nå¯æ˜¯ Prodzify&#x2F;Riot-auth æ²¡æœ‰å†™cookieç™»å½•æ–¹æ³•ï¼Œå…¶æ¯æ¬¡ç™»å½•éƒ½éœ€è¦è´¦æˆ·å¯†ç ï¼Œ2faç”¨æˆ·æ¯æ¬¡éƒ½éœ€è¦æä¾›é‚®ç®±éªŒè¯ç ï¼›å¯¹äºä¸€ä¸ªbotæ¥è¯´ï¼Œæ¯æ¬¡æ“ä½œè¿™ä¹ˆéº»çƒ¦ï¼Œå¾ˆæ˜¯éš¾å—ï¼\néšåï¼Œæˆ‘å»è¯¢é—®äº†å†™discord valorant botçš„ä½œè€…ï¼Œå¾—çŸ¥å¦‚æœ2faç”¨æˆ·ä½¿ç”¨cookieç™»å½•ï¼Œå…¶æ˜¯ä¸éœ€è¦æä¾›é‚®ç®±éªŒè¯ç çš„ï¼\né‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†ï¼Œå¦‚ä½•å°† requestçš„cookieå¯¼å…¥åˆ°aiohttpçš„_cookie_jarä¸­ï¼Œç„¶åè°ƒç”¨floxay&#x2F;python-riot-authå·²ç»å†™å¥½çš„cookieç™»å½•æ–¹æ³•å‘¢ï¼Ÿ\n\n1.1 å‰ç½®å£°æ˜è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘å†™botå…¨éƒ½æ˜¯çœ‹khl.pyçš„exampleè‡ªå­¦çš„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘æ²¡æœ‰ç³»ç»Ÿæ€§çš„å­¦ä¹ è¿‡pythonè¯­æ³•ï¼Œå…³äºpyç±»å’Œå¯¹è±¡çš„çŸ¥è¯†å…¨éƒ½å¾—é C++çš„å­˜è´§æ¥æ—æ•²ä¾§å‡»ï¼›æ‰€ä»¥å¦‚æœæˆ‘çš„pythonåšå®¢ä¸­å‡ºç°é”™è¯¯ï¼Œé‚£æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œè¿˜è¯·æŒ‡æ­£ï¼\n\n2.æŸ¥æ‰¾åŠæ³•ä¸å¤šæ¯”æ¯”åœ¨äº’è”ç½‘ä¸Šå¤§æµ·æé’ˆçš„å›°éš¾äº†ï¼Œæˆ‘è¿˜æ˜¯ä¸œå¹³è¥¿å‡‘æ‰æ‰¾åˆ°äº†ä¸€ä¸ªåŠæ³•\n\nPython CookieJar.update_cookiesæ–¹æ³•ä»£ç¢¼ç¤ºä¾‹\n\nè¯¥æ•™ç¨‹æåˆ°äº†ä¸‹é¢çš„åŠæ³•æ¥å¯¼å…¥cookie\n# éœ€è¦å°å…¥æ¨¡å¡Š: from aiohttp import CookieJar [as åˆ¥å]# æˆ–è€…: from aiohttp.CookieJar import update_cookies [as åˆ¥å]def test_domain_filter_ip_cookie_send(loop) -&gt; None:    jar = CookieJar(loop=loop)    cookies = SimpleCookie(        &quot;shared-cookie=first; &quot;        &quot;domain-cookie=second; Domain=example.com; &quot;        &quot;subdomain1-cookie=third; Domain=test1.example.com; &quot;        &quot;subdomain2-cookie=fourth; Domain=test2.example.com; &quot;        &quot;dotted-domain-cookie=fifth; Domain=.example.com; &quot;        &quot;different-domain-cookie=sixth; Domain=different.org; &quot;        &quot;secure-cookie=seventh; Domain=secure.com; Secure; &quot;        &quot;no-path-cookie=eighth; Domain=pathtest.com; &quot;        &quot;path1-cookie=nineth; Domain=pathtest.com; Path=/; &quot;        &quot;path2-cookie=tenth; Domain=pathtest.com; Path=/one; &quot;        &quot;path3-cookie=eleventh; Domain=pathtest.com; Path=/one/two; &quot;        &quot;path4-cookie=twelfth; Domain=pathtest.com; Path=/one/two/; &quot;        &quot;expires-cookie=thirteenth; Domain=expirestest.com; Path=/;&quot;        &quot; Expires=Tue, 1 Jan 1980 12:00:00 GMT; &quot;        &quot;max-age-cookie=fourteenth; Domain=maxagetest.com; Path=/;&quot;        &quot; Max-Age=60; &quot;        &quot;invalid-max-age-cookie=fifteenth; Domain=invalid-values.com; &quot;        &quot; Max-Age=string; &quot;        &quot;invalid-expires-cookie=sixteenth; Domain=invalid-values.com; &quot;        &quot; Expires=string;&quot;    )    jar.update_cookies(cookies)    cookies_sent = jar.filter_cookies(URL(&quot;http://1.2.3.4/&quot;)).output(        header=&#x27;Cookie:&#x27;)    assert cookies_sent == &#x27;Cookie: shared-cookie=first&#x27;\n\n floxay&#x2F;python-riot-auth é‡Œæ­£å¥½å°è£…äº†cookie jarï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªè¦æƒ³åŠæ³•å¼„å‡ºæ¥ä¸€ä¸ª SimpleCookie å¯¹è±¡ï¼Œå†è°ƒç”¨ update_cookie æ–¹æ³•ï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼\n3.æœ€ç»ˆå®ç°å…³äºè¿™ä¸¤ä¸ªç™»å½•é¡¹ç›®çš„æºç ï¼Œè¯·å»githubä»“åº“æŸ¥çœ‹\nä¸‹é¢åªå¯¹cookieéƒ¨åˆ†è¿›è¡Œè¯´æ˜ï¼\n3.1 requestå’Œaiohttpçš„cookieså·®å¼‚\nå› ä¸ºcookieéƒ¨åˆ†æ¶‰åŠåˆ°riotè´¦æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œæ‰€ä»¥å¿…é¡»æ‰“ç \n\né¦–å…ˆå½“ç„¶æ˜¯ä»requesté‡Œé¢æ‹¿åˆ°cookieäº†\nself.cookie = self.session.cookiesprint(self.cookie)\n\nè¿™é‡Œç›´æ¥æ‰“å°ï¼Œè·å–åˆ°çš„å†…å®¹å¦‚ä¸‹\n\nè€Œaiohttpçš„cookieæ‰“å°å‡ºæ¥æ˜¯ä¸‹é¢è¿™æ ·çš„\nauth = riot_auth.RiotAuth(&quot;è´¦æˆ·&quot;,&quot;å¯†ç &quot;)print(auth._cookie_jar._cookies)\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªåº“æ‰“å°çš„å†…å®¹ä¸å¤ªç›¸åŒï¼Œä½†æ˜¯å…¶é”®å€¼æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠrequestçš„é”®å€¼å¯¼å…¥åˆ°SimpleCookieé‡Œé¢å°±å¯ä»¥äº†\n3.2 request.sessionçš„cookieå¯¼å‡ºä¸ºdictè¦æƒ³å¯¼å…¥åˆ°SimpleCookieé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ¥çœ‹çœ‹è¿™ä¸ªç±»çš„æ„é€ æ˜¯ä»€ä¹ˆ\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥ç±»å…¶å®æ˜¯æ”¯æŒç”¨dictæ¥åˆå§‹åŒ–çš„\nç°åœ¨é—®é¢˜åˆå˜æˆäº†ï¼Œå¦‚ä½•å°†request.sessionçš„cookieå¯¼å‡ºä¸ºdict\nç™¾åº¦ä¸€ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆè¿˜æ˜¯èƒ½æ‰¾å¾—åˆ°çš„\nau = Auth(username=&quot;è´¦æˆ·&quot;,password=&quot;å¯†ç &quot;)ck_dict = requests.utils.dict_from_cookiejar( au.cookie )print(ck_dict)\n\næ­¤æ—¶æ‰“å°å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼ŒæˆåŠŸè½¬æ¢æˆäº†dict\n\nå†æŠŠè¿™ä¸ªdictä¸¢è¿›SimpleCookieï¼Œè¿è¡Œæ— æŠ¥é”™ï¼Œé‚£ä¹ˆè¯´æ˜ojbkäº†\n3.3 æœ€ç»ˆå®ç°ç°åœ¨å°±åªéœ€è¦è¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼Œå°±èƒ½å®ç°æŠŠ2faç”¨æˆ·çš„cookieå¯¼å…¥åˆ°riot_auth.RiotAuth()é‡Œé¢äº†ï¼\nimport asyncioif __name__ == &#x27;__main__&#x27;:    print(f&quot;Start&quot;)    au = Auth(username=&quot;è´¦æˆ·&quot;,password=&quot;å¯†ç &quot;)    ck_dict = requests.utils.dict_from_cookiejar( au.cookie )    print(ck_dict)    scookie = SimpleCookie(ck_dict)    auth = riot_auth.RiotAuth()    auth._cookie_jar._cookies    auth._cookie_jar.update_cookies(scookie)    ret = asyncio.run(auth.reauthorize())    print(ret) #æˆåŠŸï¼ï¼ï¼ï¼\n\nauth.reauthorize()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªboolå€¼ï¼Œæ ‡è¯†æ˜¯å¦ç™»å½•æˆåŠŸ\n\nå½“ç„¶æˆåŠŸå•¦ï¼\n4.ç»“è¯­ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆç½‘ä¸Šæ˜¯çœŸçš„æ— ç°æˆçš„ï¼Œéƒ½å¾—ä¸œå¹³è¥¿å‡‘ï¼ŒèŠ±äº†æˆ‘å·®ä¸å¤šä¸€ä¸ªåŠå°æ—¶æ‰æ‰¾åˆ°æ­£ç¡®æ–¹æ³•\nä¸è¿‡ç°åœ¨ç»ˆäºå¯ä»¥ä¿å­˜2faç”¨æˆ·çš„ç™»å½•ä¿¡æ¯äº†ï¼Œä¹Ÿç®—æ˜¯botçš„åŠŸèƒ½å‡çº§å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook","API"]},{"title":"ã€Pythonã€‘ç”Ÿæˆæœ¬é¡¹ç›®çš„requeirments.txt","url":"/posts/1488017193/","content":"æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è‡ªå·±å†™çš„é¡¹ç›®ç”Ÿæˆä¸€ä¸ªrequeirments.txtï¼Œæ–¹ä¾¿å…¶ä»–ä½¿ç”¨è€…å¿«é€Ÿå®‰è£…ä¾èµ–é¡¹\n\n\n\nå‚è€ƒhttps://www.cnblogs.com/shun7man/p/14080921.html\n\n1.ä½¿ç”¨pipå¦‚æœä½ çš„é¡¹ç›®æœ¬èº«å°±æ˜¯åœ¨venvè™šæ‹Ÿç¯å¢ƒä¸‹è·‘çš„ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ç”¨ä¸‹é¢çš„è¯­å¥ç”Ÿæˆä¸€ä¸ªä¾èµ–é¡¹æ–‡ä»¶\npip freeze &gt; requirements.txt\n\n\nä½†å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œæ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œè€Œæ˜¯ç”¨å…¨å±€çš„åŒ…çš„è¯ï¼Œé‚£å°±ä¼šå‡ºç°ä¸Šå›¾çš„æƒ…å†µï¼Œç”Ÿæˆçš„txtæ–‡ä»¶é‡Œé¢å‡ºç°äº†å¤ªå¤šæœ¬é¡¹ç›®æ²¡æœ‰ç”¨åˆ°çš„åŒ…ï¼Œé‚£ä½ è®©åˆ«äººå®‰è£…é‚£ä¹ˆå¤šæ²¡æœ‰ç”¨çš„åŒ…ï¼Œå²‚ä¸æ˜¯å‘äººå˜›ï¼\næ‰€ä»¥å¯ä»¥ç”¨å¦å¤–ä¸€ä¸ªé¡¹ç›®æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n2.pipreqså®‰è£…é¡¹ç›®åœ°å€ https://github.com/bndr/pipreqs\nä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå®‰è£…ä¸€ä¸ªåŒ…\npip install pipreqs\n\n[muxue@bt-7274:~/kook/val-bot]$ pip3.10 install pipreqsDefaulting to user installation because normal site-packages is not writeableCollecting pipreqs  Downloading pipreqs-0.4.11-py2.py3-none-any.whl (32 kB)Collecting yarg  Downloading yarg-0.1.9-py2.py3-none-any.whl (19 kB)Collecting docopt  Downloading docopt-0.6.2.tar.gz (25 kB)  Preparing metadata (setup.py) ... doneRequirement already satisfied: requests in /home/muxue/.local/lib/python3.10/site-packages (from yarg-&gt;pipreqs) (2.28.1)Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (1.26.11)Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (3.3)Requirement already satisfied: certifi&gt;=2017.4.17 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (2022.6.15)Requirement already satisfied: charset-normalizer&lt;3,&gt;=2 in /home/muxue/.local/lib/python3.10/site-packages (from requests-&gt;yarg-&gt;pipreqs) (2.1.1)Installing collected packages: docopt, yarg, pipreqs  DEPRECATION: docopt is being installed using the legacy &#x27;setup.py install&#x27; method, because it does not have a &#x27;pyproject.toml&#x27; and the &#x27;wheel&#x27; package is not installed. pip 23.1 will enforce this behaviour change. A possible replacement is to enable the &#x27;--use-pep517&#x27; option. Discussion can be found at https://github.com/pypa/pip/issues/8559  Running setup.py install for docopt ... doneSuccessfully installed docopt-0.6.2 pipreqs-0.4.11 yarg-0.1.9\n\nä½¿ç”¨å®‰è£…å®Œæˆåï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ¥ç”Ÿæˆæ–‡ä»¶\npipreqs . --encoding=utf8 --force\n\nè¿™ä¸ªè¯­å¥çš„æ„æ€æ˜¯ç”Ÿæˆå½“å‰ç›®å½•çš„é¡¹ç›®æ‰€ç”¨åˆ°çš„åŒ…çš„requirementsæ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ï¼Œç”¨è¿™ä¸ªé¡¹ç›®ç”Ÿæˆçš„æ–‡ä»¶ï¼ŒåŒ…å°‘å¤šäº†ï¼Œä¸”ç¡®å®æ˜¯æœ¬é¡¹ç›®éœ€è¦ç”¨åˆ°çš„ï¼\n3.åˆ›å»ºvenvè™šæ‹Ÿç¯å¢ƒè¿›è¡Œæµ‹è¯•ä¸ºäº†æ–¹ä¾¿è¿›è¡Œæµ‹è¯•ï¼Œè¿™é‡Œæˆ‘ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„pythonè™šæ‹Ÿç¯å¢ƒä¸ºä¾‹\n3.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå…ˆæ¥å§é¡¹ç›®çš„ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ\npython -m venv botest\n\nè¿™ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbotestæ–‡ä»¶å¤¹\næ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨pip listæŸ¥çœ‹å½“å‰ç¯å¢ƒä¸‹å®‰è£…äº†ä»€ä¹ˆåŒ…\n[muxue@bt-7274:~/kook/test]$ pip3.10 listPackage                Version---------------------- -----------aiofiles               0.8.0aiohttp                3.8.1aiosignal              1.2.0aliyun-python-sdk-core 2.13.36aliyun-python-sdk-kms  2.16.0APScheduler            3.9.1async-timeout          4.0.2attrs                  22.1.0certifi                2022.6.15cffi                   1.15.1charset-normalizer     2.1.1click                  8.1.3colorama               0.4.6crcmod                 1.7cryptography           38.0.2docopt                 0.6.2Flask                  2.2.2frozenlist             1.3.1h11                    0.14.0idna                   3.3itsdangerous           2.1.2Jinja2                 3.1.2jmespath               0.10.0khl.py                 0.3.7MarkupSafe             2.1.1multidict              6.0.2numpy                  1.24.1oss2                   2.16.0pandas                 1.5.2Pillow                 9.2.0pip                    22.3.1pipreqs                0.4.11pycparser              2.21pycryptodome           3.15.0pycryptodomex          3.15.0python-dateutil        2.8.2pytz                   2022.2.1pytz-deprecation-shim  0.1.0.post0requests               2.28.1riot-auth              1.0.3setuptools             63.2.0six                    1.16.0tzdata                 2022.2tzlocal                4.2urllib3                1.26.11uvicorn                0.18.3valorant               1.0.4Werkzeug               2.2.2yarg                   0.1.9yarl                   1.8.1zhconv                 1.4.3\n\nä½ ä¼šå‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šåŒ…å•Šï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åªåˆ›å»ºäº†è™šæ‹Ÿç¯å¢ƒï¼Œè¿˜æ²¡æœ‰å¯åŠ¨å®ƒï¼\n3.2 å¯åŠ¨&#x2F;å…³é—­è™šæ‹Ÿç¯å¢ƒç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨\n[muxue@bt-7274:~/kook/test]$ source botest/bin/activate(botest) [muxue@bt-7274:~/kook/test]$ \n\nå¦‚æœæ˜¯windowsï¼Œè¦ç”¨å¦‚ä¸‹å‘½ä»¤\n./botest/Scripts/activate\n\nä½ ä¼šå‘ç°å‘½ä»¤è¡Œå‰é¢å¤šäº†ä¸€ä¸ª(botest),è¿™å°±ä»£è¡¨æˆ‘ä»¬çš„è™šæ‹Ÿç¯å¢ƒå¯åŠ¨æˆåŠŸäº†\n(botest) [muxue@bt-7274:~/kook/test]$ pip3.10 listPackage    Version---------- -------pip        22.2.1setuptools 63.2.0\n\nå†æ¬¡æ‰§è¡Œï¼Œå‘ç°åªå‰©ä¸‹ä¸¤ä¸ªé»˜è®¤çš„åŒ…äº†ï¼Œè¿™æ‰æ˜¯å¯¹çš„ï¼\nè¦æƒ³é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼Œç”¨ä¸‹é¢çš„è¯­å¥å³å¯\ndeactivate\n\n3.3 æµ‹è¯•ä»£ç æ‹·è´è¿‡æ¥äº†ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨å°±æ˜¯ä¸€ä¸ªåˆšåˆšå…‹éš†äº†æ­¤ä»“åº“ï¼Œè¦ä½¿ç”¨é¡¹ç›®çš„ç¨‹åºçŒ¿\næ­¤æ—¶æˆ‘ä»¬éœ€è¦åˆ©ç”¨requirements.txtå¿«é€Ÿå®‰è£…éœ€è¦çš„åŒ…\npip install -r requirements.txt\n\nä»–ä¼šå¼€å§‹ä¸€ä¸ªä¸ªå®‰è£…æ‰€éœ€è¦çš„åŒ…ï¼Œä»¥åŠè¿™äº›åŒ…æ‰€éœ€è¦çš„ä¾èµ–é¡¹ï¼›å’Œæˆ‘ä»¬æ‰‹åŠ¨å®‰è£…åŒ…æ˜¯ä¸€ä¸ªæ•ˆæœ\n\néšåå°±å‡ºç°äº†ä¸€ä¸ªæ„æ–™ä¹‹ä¸­çš„æŠ¥é”™\n\nè¿™æ˜¯å› ä¸ºriot_authè¿™ä¸ªåŒ…ï¼Œå¹¶æ²¡æœ‰åœ¨pypié‡Œé¢æ³¨å†Œï¼Œå…¶å®‰è£…çš„æ–¹å¼æ˜¯ç”¨gitå®‰è£…çš„\npip3.10 install git+https://github.com/floxay/python-riot-auth.git\n\nä½¿ç”¨pip freezeåˆ›å»ºå‡ºæ¥çš„txtæ–‡ä»¶é‡Œé¢çš„ä¾èµ–é¡¹ï¼Œæ‰æ˜¯æ­£ç¡®çš„åŒ…\nriot-auth @ git+https://github.com/floxay/python-riot-auth.git@e70f76002728b99005baccd6fe3157c03d4d9f02\n\nè¿™ä¹Ÿæ˜¯æˆ‘ç›®å‰å‘ç°çš„è¯¥é¡¹ç›®çš„ä¸€ä¸ªbugï¼Œå·²ç»æäº¤äº†issueäº†ï¼\n\nhttps://github.com/bndr/pipreqs/issues/350\n\næ—¢ç„¶çŸ¥é“é—®é¢˜çš„æƒ…å†µï¼Œé‚£å°±æ‰‹åŠ¨å¼„ä¸€ä¸‹å§ï¼ä¸è¿‡éœ€è¦æé†’çš„æ˜¯ï¼Œè¿™ç§gitæ–¹å¼çš„pipåŒ…ç»å¸¸å®‰è£…ä¸ä¸Šï¼Œä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯\n\nä¸ªäººçŒœæµ‹å’Œgithubçš„ç½‘ç»œç¯å¢ƒä¹Ÿæœ‰å…³ç³»ï¼Œæ‰€ä»¥å¾—å¤šè¯•å‡ æ¬¡ï¼Œæˆ–è€…æ‰‹åŠ¨å…‹éš†ï¼Œç²˜è´´åˆ°æœ¬åœ°.site-packagesæºç é‡Œé¢\nå¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œé‚£åº”è¯¥æ˜¯èƒ½å®‰è£…å®Œæˆçš„ï¼æ­¤æ—¶å°±å¯ä»¥æ„‰å¿«çš„è¿è¡Œé¡¹ç›®ä»£ç äº†\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Linuxã€‘ä½¿ç”¨è…¾è®¯äº‘æ­å»ºCentOSçš„Linuxç¼–ç¨‹å­¦ä¹ ç¯å¢ƒï¼Œå®ç°å¤šç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªäº‘æœåŠ¡å™¨","url":"/posts/656771008/","content":"ä¸ºäº†å¸®åŠ©è‡ªå·±ç³»ç»Ÿåœ°å­¦ä¹ Linuxç³»ç»Ÿå’Œå‘½ä»¤è¡Œæ“ä½œï¼Œæˆ‘è´­å…¥äº†è…¾è®¯äº‘çš„è½»é‡äº‘æœåŠ¡å™¨ï¼Œé¢„è£…äº†CentOS7.6ç³»ç»Ÿ\n\n\næœ¬ç¯‡åšå®¢æ˜¯ä¸€ä¸ªç¬”è®°ï¼Œè®°å½•äº†åˆ›å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š\n\näº‘æœåŠ¡å™¨å¤šç”¨æˆ·éš”ç¦»ä½¿ç”¨ï¼ˆå› ä¸ºæˆ‘çš„æœåŠ¡å™¨æ˜¯å’ŒåŒå­¦ä¸€èµ·æ‹¼è´­çš„ï¼‰\ngitä»“åº“sshå¯†åŒ™è®¾ç½®\nè®¾ç½®Xshellç”¨æˆ·åçš„æ˜¾ç¤ºé¢œè‰²\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå¯¼è¯»ã€‚å…¶å®ä¸ç®¡æ˜¯æœä¸»è¿˜æ˜¯ä¸ªäººç”¨æˆ·ï¼Œéƒ½æ¨èä½¿ç”¨ä»¥ä¸‹é˜…è¯»é¡ºåº\n\nå¦‚æœä½ æ˜¯æœä¸»ï¼Œçœ‹æœ¬æ–‡çš„é¡ºåºæ˜¯1â†’2(å…¶ä¸­2.1è·³è¿‡)â†’6â†’8â†’4.1\né…ç½®å¥½ç¯å¢ƒå¹¶ä¸‹è½½å¥½gitåï¼Œæœä¸»å°±ä¸éœ€è¦åšå…¶ä»–ä»€ä¹ˆçš„äº†ï¼Œå°±å’Œå…¶ä»–äººä¸€èµ·çœ‹å®Œæœ¬æ–‡ğŸ‘‡\nå¦‚æœä½ ä¸æ˜¯æœä¸»ï¼Œåªéœ€è¦çœ‹2.2.4è¿æ¥ä¸Šä½ çš„è´¦æˆ·ï¼Œå³å¯å¼€å§‹æ“ä½œç¬¬3ã€4ã€5ã€7ç‚¹ï¼Œå¯è·³è¿‡4.2å’Œ4.3\n\nå¦‚æœä½ çš„linuxæ˜¯è™šæ‹Ÿæœºå®‰è£…çš„ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æœ¬æ–‡æ‰€æ•™çŸ¥è¯†ï¼Œè¿›è¡Œsshçš„è¿æ¥å’Œç³»ç»Ÿä¸€äº›ç®€å•çš„é…ç½®çš„æ“ä½œ\n\n[TOC]\n1.äº‘æœåŠ¡å™¨åˆå§‹åŒ–è¿™éƒ¨åˆ†txäº‘å…¶å®æ˜¯æœ‰å¸®åŠ©æ–‡æ¡£çš„ï¼Œä½†æ˜¯å®ƒå°±æ˜¯ä¸åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œé¢ä»å¤´åˆ°å°¾å†™å…¨ï¼Œå¯¼è‡´ä½ éœ€è¦ç¿»æ¥ç¿»å»æ‰¾å…·ä½“çš„æ“ä½œï¼Œå¾ˆæ¼ç«\n1.1è´­ä¹°äº‘æœåŠ¡å™¨\n23.02.16æ›´æ–°ï¼šå½“å‰å­¦ç”Ÿä¼˜æƒ å·²ç»æ— äº†ï¼Œè¯·ä»¥å®˜ç½‘å®é™…ä»·æ ¼ä¸ºå‡†ï¼Œæœ¬æ–‡ä»…ä¾›å‚è€ƒ\n\né€‰æ‹©è…¾è®¯äº‘çš„ç†ç”±å¾ˆç®€å•ï¼Œç°åœ¨å®ƒæ¯”é˜¿é‡Œäº‘ä¾¿å®œï¼Œ2æ ¸å¿ƒ4GBçš„ç‰ˆæœ¬åªéœ€è¦168ä¸€å¹´ï¼ˆä½œä¸ºå¯¹æ¯”ï¼ŒåŒæ—¶æœŸé˜¿é‡Œäº‘æ²¡æœ‰æ‰“æŠ˜ï¼Œ1æ ¸2GBçš„ç‰ˆæœ¬99ä¸€å¹´ï¼‰\n\nè…¾è®¯äº‘æ ¡å›­è®¡åˆ’https://cloud.tencent.com/act/campus\n\næ³¨æ„ï¼šå¦‚æœä½ åªä¹°ä¸€å¹´ï¼Œè¯·ä¸è¦è´­ä¹°ä¸‹é¢çš„æ ¡å›­æœåŠ¡å™¨ï¼ï¼ï¼ï¼è´­ä¹°æ ¡å›­æœåŠ¡å™¨çš„èµ„æ ¼åªæœ‰ä¸€æ¬¡ï¼Œåªä¹°ä¸€å¹´å°±èŠ±æ‰è¿™ä¸ªèµ„æ ¼å¤ªä¸åˆ’ç®—äº†ï¼ï¼ï¼\nè€Œä¸”æ ¡å›­äº‘æœåŠ¡å™¨å› ä¸ºæ˜¯â€œé¦–å•ç‰¹æƒ â€ï¼Œæ˜¯ä¸æ”¯æŒåŒä»·ç»­è´¹çš„ï¼Œç»­è´¹ä»·æ ¼ä¹Ÿæ˜¯å¤©ä»·ï¼ï¼ï¼ï¼ˆç»­è´¹è¦900å¤šä¸€å¹´ï¼‰\n\nåœ¨è½»é‡åº”ç”¨æœåŠ¡å™¨é‡Œé¢è¿˜æœ‰ä¸€ä¸ªä¾¿å®œçš„ç‰ˆæœ¬ï¼Œ2æ ¸2GBåªè¦58ä¸€å¹´ï¼Œä½†æ˜¯é‚£ä¸ªåªèƒ½ä¹°ä¸€å¹´ï¼Œç»­è´¹çš„ä»·æ ¼å¾ˆè´µï¼ï¼ï¼\n\nå¦‚æœè¦ä¹°2-3å¹´ï¼Œè¯·è´­ä¹°ä¸Šé¢çš„æ ¡å›­æœåŠ¡å™¨\nå¦‚æœåªä¹°ä¸€å¹´ï¼Œè¯·è´­ä¹°ä¸‹é¢çš„è¿™ä¸ª58/å¹´çš„ç‰ˆæœ¬ã€é“¾æ¥ã€‘\n\n\n230312æ›´æ–°ï¼šç°åœ¨æ ¡å›­æœåŠ¡å™¨ä¼¼ä¹å·²ç»ä¸æ”¯æŒè´­ä¹°å¤šå¹´äº†ğŸ˜‚\n\næ³¨å†Œè…¾è®¯äº‘è´¦æˆ·å¹¶å®åè®¤è¯åï¼Œå°±å¯ä»¥æ­£å¸¸è´­ä¹°ã€‚è¿™é‡Œä¸èµ˜è¿°äº†ã€‚\næˆ‘é€‰æ‹©çš„ç³»ç»Ÿæ˜¯CentOS7.6ï¼Œè¿™ä¸ªç³»ç»Ÿéå¸¸é€‚åˆæˆ‘ä»¬åˆå­¦Linux\n\n\n1.2æ§åˆ¶å°ç®¡ç†åˆ›å»ºå®Œå®ä¾‹åï¼Œä½ åº”è¯¥å°±èƒ½åœ¨æ§åˆ¶å°é‡Œé¢çœ‹åˆ°ä½ çš„äº‘æœåŠ¡å™¨äº†ï¼Œå³ä¸‹è§’æ˜¾ç¤ºçš„æ˜¯å…¬ç½‘IPï¼Œæˆ‘ä»¬åç»­ä½¿ç”¨Xshellé“¾æ¥çš„æ—¶å€™éœ€è¦å®ƒ\n\nè¿›å…¥ååšçš„ç¬¬ä¸€ä»¶äº‹ï¼Œå°±æ˜¯å……å€¼ä½ çš„rootè´¦æˆ·å¯†ç ã€‚å»ºè®®è®¾ç½®çš„ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œä¸€å®šè¦ç”¨å°æœ¬æœ¬è®°ä¸‹æ¥ï¼\n\n1.3ä¸‹è½½Xshellæˆ‘ä»¬éœ€è¦ç”¨Xshellå’ŒXftpä½œä¸ºæˆ‘ä»¬çš„linuxé“¾æ¥ç»ˆç«¯ï¼Œç‚¹å‡»å®˜ç½‘é“¾æ¥ä¸‹è½½\n\nhttps://www.xshell.com/zh/free-for-home-school/\n\nå®¶åº­å’Œæ ¡å›­ä½¿ç”¨æ˜¯å…è´¹çš„ï¼ˆä¸ªäººç”¨æˆ·ï¼‰å¡«äº†é‚®ç®±å°±å¯ä»¥äº†ï¼Œå®˜æ–¹ä¼šå¾€ä½ çš„é‚®ç®±é‡Œé¢å‘ä¸€ä¸ªä¸‹è½½è½¯ä»¶çš„é“¾æ¥\nå®Œæˆä¸Šé¢ä¸‰æ­¥åï¼Œç°åœ¨å·²ç»å¯ä»¥è¿æ¥æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨äº†ï¼\n2.è¿æ¥äº‘æœåŠ¡å™¨2.0ç›´æ¥è¿æ¥rootè´¦æˆ·ä½ å¯ä»¥å…ˆä½¿ç”¨rootçš„è´¦æˆ·å¯†ç ä»¥åŠå…¬ç½‘ipè¿æ¥æœåŠ¡å™¨\n\nè¾“å…¥å…¬ç½‘IPï¼Œç«¯å£å·22ä¸è¦æ”¹\n\nç„¶åç‚¹å‡»ç¡®è®¤ï¼Œç³»ç»Ÿä¼šè®©ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œä½¿ç”¨ç”¨æˆ·årootå’Œä½ åˆšåˆšè®¾ç½®çš„rootå¯†ç å°±å¯ä»¥ç™»å½•äº†\n\nè¿˜å¯ä»¥åœ¨txäº‘è¿™é‡Œç›´æ¥ç‚¹ç™»å½•ï¼Œä¼šä½¿ç”¨txäº‘çš„é»˜è®¤è´¦æˆ·lighthouseè¿æ¥ä½ çš„äº‘ä¸»æœº\n\n\n\nè¿™ä¸ªæ–¹æ³•åªé€‚åˆåŸºç¡€ä½¿ç”¨ï¼Œä¸‹é¢è®²è§£ä¸¤ä¸ªä¸åŒçš„æ–¹æ³•\n\n\n2.1ä½¿ç”¨SSHå¯†é’¥å› ä¸ºXshellæ¯”è¾ƒèªæ˜ï¼Œä¼šå¸®æˆ‘ä»¬è®°ä½è´¦æˆ·å¯†ç ï¼Œè‡ªåŠ¨è¾“å…¥ã€‚ä½†æ˜¯åœ¨å¾ˆå¤šè½¯ä»¶ï¼ˆæ¯”å¦‚puttyï¼‰æ¯æ¬¡å¼€å¯è¿æ¥éƒ½éœ€è¦è¾“å…¥è´¦æˆ·å’Œå¯†ç ã€‚è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´åŠ å®‰å…¨çš„åŠ å¯†SSHæ–¹å¼è¿æ¥æˆ‘ä»¬çš„ç»ˆç«¯\n\nå¦‚æœä½ æƒ³è¾¾åˆ°å¤šäººä¸€æœºçš„ç›®çš„ï¼Œè¯·è·³è¿‡æœ¬æ­¥éª¤ï¼Œç›´æ¥çœ‹2.2\n\n2.1.1åˆ›å»ºæœ¬åœ°å¯†é’¥åœ¨Xshellçš„é€‰é¡¹å¡ä¸­ï¼Œæ–°å»ºä¸€ä¸ªå¯†åŒ™\n\næ— éœ€ä¿®æ”¹é»˜è®¤å‚æ•°\n\nè¿™é‡Œä¼šè®©ä½ è¾“å…¥å¯†åŒ™åç§°å’Œå¯†ç ï¼Œè¯·è®°ä½è¿™é‡Œçš„å¯†ç ï¼å¦‚æœå¿˜è®°äº†å°±åªèƒ½é‡æ–°ç”Ÿæˆä¸€ä¸ªå¯†åŒ™äº†\n\n\nç”Ÿæˆå®Œæ¯•åï¼Œç‚¹å‡»ç”¨æˆ·å¯†åŒ™ç®¡ç†è€…\n\næ‰¾åˆ°åˆšåˆšç”Ÿæˆçš„å¯†åŒ™ï¼Œç‚¹å‡»å±æ€§-å…¬é’¥ï¼ŒæŠŠè¿™é‡Œçš„å†…å®¹å¤åˆ¶ä¸‹æ¥\n\n2.1.2ç»‘å®šå®ä¾‹ç„¶åæ¥åˆ°txäº‘æ§åˆ¶å°ï¼Œå¯†é’¥ï¼Œç‚¹å‡»åˆ›å»ºå¯†é’¥\n\né€‰æ‹©å·²æœ‰å…¬é’¥ï¼ŒæŠŠåˆšåˆšå¤åˆ¶çš„å†…å®¹ä¸¢è¿›å»å¹¶èµ·ä¸ªåå­—ã€‚æ³¨æ„è¿™é‡Œçš„åœ°åŸŸå¿…é¡»å’Œäº‘æœåŠ¡é€‰æ‹©çš„ç›¸åŒï¼\n\næå®šåï¼Œåœ¨äº‘æœåŠ¡å™¨çš„å¯†é’¥å¯¹ç•Œé¢ä¸­ç»‘å®šå¯†é’¥ï¼ˆéœ€è¦å…ˆæŠŠäº‘æœåŠ¡å™¨å…³æœºï¼‰\n\nç»‘å®šæˆåŠŸåï¼Œé‡å¯äº‘æœåŠ¡å™¨\n2.1.3Xshellä¼šè¯è®¾ç½®æ–°å»ºä¸€ä¸ªä¼šè¯ï¼Œè¿™é‡ŒåŒæ ·å¡«å…¬ç½‘ip\n\nç„¶åéœ€è¦è®¾ç½®ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œè¿™é‡Œå¾ˆé‡è¦ï¼Xshellæç¤ºâ€œå¯†é’¥æ²¡æœ‰å’Œäº‘æœåŠ¡å™¨ç»‘å®šâ€éƒ½æ˜¯å› ä¸ºè¿™é‡Œæ²¡æœ‰è®¾ç½®ï¼\n\né€‰æ‹©ä½ åˆ›å»ºçš„æœ¬åœ°å¯†åŒ™ï¼Œè¾“å…¥åˆ›å»ºå¯†åŒ™æ—¶çš„å¯†ç ï¼\n\nä¸å‡ºæ„å¤–ï¼Œè®¾ç½®å®Œæ¯•åï¼Œä½ å°±å¯ä»¥å…ç™»å½•è¿æ¥åˆ°äº‘æœåŠ¡å™¨çš„rootç”¨æˆ·äº†\n\nè¿™ä¸ªæ–¹æ¡ˆåªé€‚ç”¨äºå•ç”¨æˆ·ä½¿ç”¨ï¼Œå¦‚æœå¤šä¸ªç”¨æˆ·æƒ³ç”¨è¿™ä¸ªæ–¹æ³•è¿æ¥åŒä¸€ä¸ªäº‘æœåŠ¡å™¨ï¼Œå°±ä¼šå‡ºç°å¤§å®¶ä¸€èµ·ç”¨ä¸€ä¸ªæ–‡ä»¶è·¯å¾„çš„é—®é¢˜ï¼ˆå°±æ¯”å¦‚æˆ‘å’ŒåŒå­¦æ‹¼ï¼Œå¤§å®¶éƒ½ç”¨SSHè¿æ¥äº†rootç”¨æˆ·ï¼Œç™½æï¼‰\n\nç›®å‰æˆ‘æ²¡æ‰¾åˆ°å¦‚ä½•ç”¨SSHå¯†åŒ™è¿æ¥åˆ°äº‘æœåŠ¡å™¨æŒ‡å®šç”¨æˆ·ä¸‹\n\n2.2ä½¿ç”¨è´¦æˆ·å¯†ç ç™»å½•å®ç°å¤šäººä¸€æœºLinuxç³»ç»Ÿæ˜¯å¯ä»¥å®ç°å¤šç”¨æˆ·ç®¡ç†çš„ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ç”¨æˆ·\n\nå‚è€ƒhttps://cloud.tencent.com/developer/ask/24465\n\n2.2.1åˆ›å»ºæ–°ç”¨æˆ·å…ˆç”¨rootè¿æ¥ç»ˆç«¯ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤\nuseradd ç”¨æˆ·å\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤ä¼šå»ºç«‹ä¸€ä¸ªæ–°çš„ç”¨æˆ·å’ŒåŒåç”¨æˆ·ç»„ï¼Œç”¨æˆ·åè‡ªå®šä¹‰;\nuseradd -g root ç”¨æˆ·å\n\nè¿™ä¸ªå‘½ä»¤çš„å«ä¹‰æ˜¯åœ¨rootåˆ†ç»„ä¸‹ï¼ˆè¿™ä¸ªæ˜¯rootç”¨æˆ·é»˜è®¤çš„åˆ†ç»„ï¼‰åˆ›å»ºä¸€ä¸ªç”¨æˆ·ã€‚å¦‚æœæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„éœ€æ±‚ï¼Œæ²¡å¿…è¦æŒ‡å®šç”¨æˆ·ç»„ä¸ºrootï¼Œç”¨ç¬¬ä¸€æ¡å‘½ä»¤ç›´æ¥æ·»åŠ ç”¨æˆ·å°±å¯ä»¥äº†\n\nä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è®¾ç½®åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·çš„å¯†ç \npasswd ç”¨æˆ·å\n\néšåï¼Œä½¿ç”¨ä¸‹é¢å‘½ä»¤æµ‹è¯•è¿›å…¥å¦å¤–ä¸€ä¸ªç”¨æˆ·\nsu - ç”¨æˆ·å\n\nå› ä¸ºæˆ‘ä»¬æ˜¯ä»å…·æœ‰æœ€é«˜æƒé™çš„rootç”¨æˆ·è¿›å…¥å­ç”¨æˆ·ï¼Œæ‰€ä»¥æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç çš„ï¼Œä½†æ˜¯å¦‚æœä½ ä»å­ç”¨æˆ·å¾€rootè·‘ï¼Œå°±éœ€è¦è¾“å…¥rootç”¨æˆ·çš„å¯†ç ï¼\n\nä½ å¯ä»¥åœ¨rootç”¨æˆ·å’Œå­ç”¨æˆ·ç»ˆç«¯ä¸‹ç”¨mkdir æ–‡ä»¶å¤¹åå­—åˆ›å»ºä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶å¤¹ï¼ŒlsæŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶å¤¹\nä½ ä¼šå‘ç°ï¼Œrootå’Œå¦å¤–ä¸€ä¸ªç”¨æˆ·ç›´æ¥æ˜¯ç›¸äº’çœ‹ä¸åˆ°å¯¹æ–¹çš„æ–‡ä»¶å¤¹çš„ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦è¾¾åˆ°çš„éš”ç¦»æ•ˆæœï¼ç›¸å½“äºäº’ä¸å¹²æ‰°ï¼\nä»å­ç”¨æˆ·Aè·‘åˆ°å­ç”¨æˆ·Bä¸­ï¼Œéœ€è¦è¾“å…¥å­ç”¨æˆ·Bçš„å¯†ç ã€‚\nè¿™éœ€è¦rootç”¨æˆ·åœ¨é‡Œé¢åˆ›å»ºæ–°çš„ç”¨æˆ·ã€‚åœ¨rooté‡Œé¢è®¾ç½®è¿‡å­ç”¨æˆ·å¯†ç å¯†ç åï¼Œåç»­å¯ä»¥ä¿®æ”¹å­ç”¨æˆ·å¯†ç ğŸ‘‡\n2.2.2ä¿®æ”¹å¯†ç å®é™…ä¸Šï¼Œåœ¨è‡ªå·±çš„ç”¨æˆ·åä¸‹ï¼Œæ˜¯å¯ä»¥æ›´æ”¹å½“å‰ç”¨æˆ·åçš„å¯†ç çš„\npasswd\n\n\næ‰€ä»¥å¯ä»¥è®©æœä¸»åˆ›å»ºå¥½ç”¨æˆ·åï¼Œè‡ªå·±ç™»é™†è¿›å»ï¼ŒæŠŠè‡ªå·±çš„å¯†ç æ”¹æ‰\n\næ³¨æ„ï¼šLinuxå­¦ä¹ ä¸­æœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›æŒ‡ä»¤åªæœ‰rootç”¨æˆ·èƒ½å¹²ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯ä¸è¦é‚£ä¹ˆåœ¨ä¹è¿™äº›â€œéšç§é—®é¢˜â€ï¼Œrootä¹Ÿå…¬å¼€ç»™å¤§å®¶ä½¿ç”¨å°±è¡Œäº†\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç›´æ¥åœ¨æŸä¸€ä¸ªè¯­å¥ä¹‹å‰åŠ sudoï¼Œå°±ä¼šç”¨ä¸Šrootæƒé™\n2.2.3è…¾è®¯äº‘å¤šç”¨æˆ·ç®¡ç†å¦å¤–ï¼Œè…¾è®¯äº‘æ”¯æŒå¤šç”¨æˆ·ç®¡ç†ï¼Œä½ å¯ä»¥åœ¨ç”¨æˆ·ç»„è¿™é‡Œé‚€è¯·å…¶ä»–äººï¼Œä»–ä»¬å°±èƒ½åœ¨è‡ªå·±çš„æ§åˆ¶å°é‡Œé¢çœ‹åˆ°ä½ çš„äº‘æœåŠ¡å™¨äº†\n\n\n2.2.4Xshellä½¿ç”¨è´¦æˆ·å¯†ç è¿æ¥è¿™æ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ä½¿ç”¨2.1æ‰€ç”¨çš„sshå¯†é’¥ç™»å½•äº†ï¼Œè€Œæ˜¯ä½¿ç”¨è´¦æˆ·å’Œå¯†ç \n\nä½¿ç”¨è¿™ä¸ªæ–¹å¼å‰ï¼Œéœ€è¦åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°è§£ç»‘æ‰€æœ‰SSHå¯†é’¥\n\nåˆšå¼€å§‹ç›´æ¥è¿æ¥ä¼šæ˜¾ç¤ºâ€œSSHæœåŠ¡å™¨æ‹’ç»äº†å¯†ç â€ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¼€å¯å…è®¸å¯†ç ç™»å½•\n\n\nå‚è€ƒhttps://cloud.tencent.com/developer/article/1909909\n\nåœ¨rootç”¨æˆ·ä¸‹ï¼Œä½¿ç”¨vimæ‰“å¼€ä¸‹é¢è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœä½ ä¸ä¼šä½¿ç”¨vimç¼–è¾‘å™¨ï¼Œè¯·è§æœ¬æ–‡çš„ç¬¬ä¸‰ç‚¹\nvim /etc/ssh/sshd_config\n\nåœ¨æœ€åæ·»åŠ ä¸‹é¢çš„è¿™ä¸ªè¯­å¥ï¼Œ:wq!ä¿å­˜å¹¶é€€å‡º\nPasswordAuthentication=yes\n\n\næå®šåï¼Œé‡å¯äº‘ä¸»æœºï¼Œå³å¯ç”¨è´¦å·å¯†ç ç™»å½•å…¶ä»–è´¦æˆ·\n\nå¦‚æœè®¾ç½®äº†è¿™ä¸ªè¿˜æ˜¯ä¸è¡Œï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­ç›´æ¥é‡ç½®rootå¯†ç ã€‚é‡ç½®å¯†ç çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®ä½ è®¾ç½®å¥½è¿™ä¸ªï¼ˆå¦‚æœæ²¡æœ‰å°±å†æ‰‹åŠ¨è®¾ç½®ä¸€ä¸‹ï¼Œå“ˆå“ˆï¼‰\n\n\nç³»ç»Ÿå†…é…ç½®å¥½åï¼Œåœ¨xshellä¸­æ–°å»ºä¼šè¯ï¼Œå¡«å…¥å¦‚ä¸‹çš„å†…å®¹\n\nåœ¨Xshellä¸­ç›´æ¥ç”¨å¯¹åº”çš„è´¦æˆ·å’Œå¯†ç ç™»å½•ï¼Œå°±å¯ä»¥æ‰“å¼€æ¯ä¸ªå•ç‹¬çš„è´¦æˆ·\n\nX11è­¦å‘Šæ˜¯æ­£å¸¸ç°è±¡ï¼Œè¯·å¿½ç•¥å®ƒ\n\nåˆ°è¿™é‡Œï¼Œä½ å°±å¯ä»¥å’Œå¥½åŸºå‹åˆ†äº«è¿™ä¸ªæœåŠ¡å™¨äº†ï¼æˆæœ¬å¤§å¤§é™ä½\n2.3æŸ¥çœ‹å½“å‰ä½¿ç”¨äº‘æœåŠ¡å™¨çš„ç”¨æˆ·åœ¨Xshellç»ˆç«¯ä¸­è¾“å…¥whoï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰æœ‰è°è¿æ¥äº†äº‘æœåŠ¡å™¨\nè¿™é‡Œä¼šæ˜¾ç¤ºè¿æ¥äº‘æœåŠ¡å™¨çš„æ—¶é—´ï¼Œptsä»£è¡¨è¿œç¨‹è¿æ¥ï¼Œ/2ä»£è¡¨ä¸åŒçš„è¿œç¨‹è¿æ¥çª—å£\n\n\n3.ä¸€äº›åŸºæœ¬çš„LinuxæŒ‡ä»¤ä¹‹å‰å†™åšå®¢çš„æ—¶å€™ï¼Œå¿½ç•¥äº†å¤§å®¶å¯èƒ½éƒ½æ˜¯ç¬¬ä¸€æ¬¡ä¸Šæ‰‹linuxï¼Œå¯¹linuxå‘½ä»¤è¡Œä¸€çªä¸é€šçš„ã€‚æœ‰æœ‹å‹ååº”åé¢çš„gitæ“ä½œï¼Œå¾ˆå¤šéƒ¨åˆ†éƒ½æä¸æ˜ç™½æ€ä¹ˆç”¨\nè¿™é‡Œåˆ—å‡ºæœ¬ç¯‡åšå®¢éœ€è¦ç”¨åˆ°çš„ä¸€äº›linuxæŒ‡ä»¤å’Œvimç¼–è¾‘å™¨çš„æŒ‡ä»¤ã€‚æ³¨æ„ï¼Œè¿™ä¸ªåªæ˜¯å¸®åŠ©ä½ å®Œæˆæœ¬ç¯‡åšå®¢å‘å¯¼åç»­çš„gitè®¾ç½®ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘½ä»¤è¡Œæ•™å­¦ã€‚å»ºè®®è‡ªè¡Œæœç´¢gitå‘½ä»¤è¡Œä»¥åŠLinuxå‘½ä»¤è¡Œè¿›è¡Œå­¦ä¹ \n3.1LinuxæŒ‡ä»¤ls #æ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ls -a #æ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹åŒ…æ‹¬éšè—æ–‡ä»¶çš„æ‰€æœ‰æ–‡ä»¶cd æ–‡ä»¶è·¯å¾„   #æ‰“å¼€å¯¹åº”æ–‡ä»¶è·¯å¾„cd ..   #å›åˆ°ä¸Šä¸€ä¸ªæ–‡ä»¶ç›®å½•cd ~   #å›åˆ°ç”¨æˆ·çš„æ ¹ç›®å½•touch æ–‡ä»¶å  #åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶mkdir æ–‡ä»¶å¤¹åå­— #åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹mv æºè·¯å¾„ ç›®æ ‡è·¯å¾„ #ç§»åŠ¨æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶#mvè¯­å¥è¿˜ç”¨äºé‡å‘½åæ–‡ä»¶ï¼Œæ“ä½œæ˜¯mv åŸæ¥çš„åå­— æ–°åå­—cat æ–‡ä»¶åå­—  #æ˜¾ç¤ºå¯¹åº”æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹#å¦‚cat .gitconfigï¼Œä¼šæ˜¾ç¤º.gitconfigæ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹\n\nä¸‹å›¾æ¼”ç¤ºäº†éƒ¨åˆ†è¯­å¥ï¼Œèƒ½å¸®åŠ©ä½ ç†è§£è¿™äº›å‘½ä»¤çš„ä½œç”¨\n\nå¦‚æœä½ ä¸å°å¿ƒè¾“é”™äº†æŸäº›æŒ‡ä»¤æˆ–è€…æŒ‡ä»¤æ²¡è¾“å…¥å®Œæ¯•å°±æŒ‰äº†å›è½¦ï¼Œå¯ä»¥ä½¿ç”¨ctrl+cç»ˆæ­¢å½“å‰æ“ä½œï¼Œlinuxä¼šå¦èµ·ä¸€ä¸ªæ–°çš„å…¥å£ç»™ä½ è¾“å…¥å‘½ä»¤\n\n3.2vimç¼–è¾‘å™¨æ“ä½œvim æ–‡ä»¶å #æ‰“å¼€å¯¹åº”çš„æ–‡ä»¶è¿›è¡Œå†™å…¥\n\nè¿™é‡Œæˆ‘ç›´æ¥ä»¥ç¼–è¾‘ä¸€ä¸ªC++ç¨‹åºä¸ºä¾‹ï¼Œæ¼”ç¤ºvimçš„æ“ä½œ\n\næ‰“å¼€åæ˜¯è¿™æ ·çš„ï¼Œå› ä¸ºä½ çš„vimç¼–è¾‘å™¨è¿˜æ²¡æœ‰è®¾ç½®ï¼ˆè§æœ¬æ–‡ç¬¬5ç‚¹ï¼‰ï¼Œæ‰€ä»¥å’Œæˆ‘çš„ä¸ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸å½±å“æˆ‘ä»¬çš„æ“ä½œã€‚\næ³¨æ„å·¦ä¸‹è§’æ˜¯vimæŒ‡ä»¤è¾“å…¥çš„ä½ç½®ä»¥åŠvimå½“å‰æ¨¡å¼çš„æç¤ºä½ç½®\n\nç°åœ¨å¾€è¿™ä¸ªæ–‡ä»¶ä¸­é”®å…¥å†…å®¹ï¼Œä½ ä¼šå‘ç°æ— æ³•é”®å…¥ï¼Œè¿™æ˜¯å› ä¸ºvimæ˜¯æŸ¥çœ‹æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è‹±æ–‡æ¨¡å¼ä¸‹æŒ‰é”®ç›˜ä¸Šçš„çš„iï¼ˆä¸­æ–‡æ¨¡å¼æŒ‰iæ˜¯æ²¡æœ‰ååº”çš„ï¼‰å¼€å¯vimçš„æ’å…¥æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯insertæ¨¡å¼ï¼‰\n\nå¼€å¯æ’å…¥æ¨¡å¼åï¼Œä½ å°±å¯ä»¥å¾€è¿™ä¸ªæ–‡ä»¶é‡Œé¢å†™å…¥å†…å®¹äº†ã€‚æ³¨æ„vimç¼–è¾‘å™¨æ˜¯åŸºäºé”®ç›˜çš„ï¼Œä½ éœ€è¦ç”¨é”®ç›˜æ–¹å‘é”®å®šä½ä½ç½®ï¼Œè€Œä¸æ˜¯ç”¨é¼ æ ‡\n\næˆ‘å¾€æ–‡ä»¶ä¸­æ–°å¢äº†c++è¯­æ³•çš„å†…å®¹ï¼Œç°åœ¨æˆ‘æƒ³ä¿å­˜è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶é€€å‡ºvimç¼–è¾‘å™¨\næ“ä½œæ˜¯å…ˆåœ¨è‹±æ–‡æ¨¡å¼ä¸‹æŒ‰é”®ç›˜çš„ESCé€€å‡ºæ’å…¥æ¨¡å¼ï¼Œç„¶åè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶\n\nè¿™å°±å›åˆ°äº†ä¹‹å‰çš„linuxå‘½ä»¤è¡Œç•Œé¢\n\nä¸‹é¢ç»™å‡ºä¸€äº›å¸¸ç”¨çš„vimæŒ‡ä»¤ï¼Œåç»­é…ç½®gitçš„æ—¶å€™ä¼šç”¨åˆ°\n:w  #ä¿å­˜æ–‡ä»¶ï¼Œç›¸å½“äºwindowsçš„ctrl+s:q  #é€€å‡ºæ–‡ä»¶ï¼Œå‰ææ˜¯è¿™ä¸ªæ–‡ä»¶æ²¡æœ‰è¢«æ›´æ”¹#å¦‚æœä½ ä¸æƒ³ä¿å­˜åˆšåˆšçš„æ›´æ”¹ï¼Œå¯ä»¥ä½¿ç”¨:q! #å¼ºåˆ¶é€€å‡ºæ–‡ä»¶:wq #ä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶:wq! #å› ä¸ºéƒ¨åˆ†æ–‡ä»¶æ˜¯é…ç½®æ–‡ä»¶ï¼Œç³»ç»Ÿæƒé™ä¸å¤Ÿï¼Œæ‰€ä»¥éœ€è¦åŠ !ç»•å¼€#åç»­åœ¨ç¼–è¾‘gitconfigæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨:wq!\n\n\nå¦‚æœä½ æƒ³ä»windowsä¸­å¤åˆ¶å†…å®¹ï¼Œç²˜è´´åˆ°ç»ˆç«¯ä¸­ï¼Œéœ€è¦ä½¿ç”¨shift+insé”®è€Œä¸æ˜¯ä½¿ç”¨ctrl+v\nå¤åˆ¶ctrl+insï¼Œç²˜è´´ shift+ins\nå¦‚æœä½ ä¸å°å¿ƒä¹ æƒ¯æ€§åœ°æŒ‰äº†ctrl+så¹¶å‘ç°ç³»ç»Ÿå¡ä½äº†ï¼Œé‚£æ˜¯å› ä¸ºè¿™ä¸ªå¿«æ·é”®åœ¨Linuxä¸­æ˜¯æš‚åœç»ˆç«¯ï¼Œå¯ä»¥æŒ‰ctrl+qå¤åŸ\n\nä¸Šé¢è®²è¿°äº†vimçš„ä¸€äº›æ“ä½œï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹ç¼–ä¸€ä¸ªä»£ç \n3.3å°è¯•ç¼–è¯‘ä»£ç C++éœ€è¦ä½¿ç”¨g++ç¼–è¯‘å™¨æ¥ç¼–è¯‘ä»£ç ï¼Œå¦‚æœæ˜¯Cè¯­è¨€å†…å®¹ï¼Œåˆ™ä½¿ç”¨gccæ¥ç¼–è¯‘ï¼Œæ“ä½œæ˜¯ä¸€æ ·çš„\nä»¥ä¸‹é¢çš„æŒ‡ä»¤ç¼–è¯‘æˆ‘ä»¬åˆšåˆšå†™çš„ä»£ç æ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ng++ test.cpp -o TEST\n\nå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨æŠ¥é”™äº†ï¼Œæˆ‘ä»¬å†vimå›å»ä¿®æ”¹ä»£ç \n\nä¿®æ”¹å®Œæ¯•åï¼Œé‡æ–°ç¼–è¯‘æˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ²¡æœ‰æŠ¥é”™ï¼Œç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶TEST\n\nä½¿ç”¨./TESTè¯­å¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶TESTï¼Œå³å¯çœ‹åˆ°ç¨‹åºè¾“å‡ºç»“æœ\n\nå¥½äº†ï¼Œå­¦ä¼šè¿™äº›åï¼Œä½ åº”è¯¥å°±èƒ½å®Œæˆåé¢gitçš„é…ç½®æ“ä½œäº†ï¼ğŸ˜‹\n\n4.Linuxçš„gitè®¾ç½®è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼æ¥é…ç½®æˆ‘ä»¬çš„gitï¼Œå› ä¸ºsshå¯†é’¥çš„æ–¹å¼å‡ºç°äº†äº›è®¸bug\n4.1ä¸‹è½½gitè¾“å…¥ä¸‹é¢çš„æŒ‡ä»¤æŸ¥çœ‹gitçš„ç‰ˆæœ¬ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°ï¼Œé‚£è¯´æ˜gitæ²¡æœ‰è¢«å®‰è£…\ngit --version\n\nCentOSä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤å®‰è£…ï¼Œå¿…é¡»ä½¿ç”¨rootç”¨æˆ·ã€‚å…¶ä»–LINUXç³»ç»Ÿï¼ˆæ¯”å¦‚ubuntuï¼‰éœ€è¦æŠŠyumæ”¹æˆapt-get\nsudo yum install git\n\n\nå› ä¸ºæˆ‘ä¹‹å‰ç”¨äº†æ ‘è“æ´¾ï¼Œä½¿ç”¨çš„æ˜¯apt-getã€‚åœ¨è¿™ä¸Šé¢ä¸ç®¡ç”¨ï¼Œæˆ‘è¿˜å»æœäº†å¥½ä¹…ä¸ºå•¥sudo: apt-get: command not foundğŸ˜¥\nåé¢æ‰çŸ¥é“CentOSä½¿ç”¨çš„æ–¹æ³•ä¸ä¸€æ ·\n4.2åˆ›å»ºSSHå¯†åŒ™ä½¿ç”¨SSHçš„æ–¹å¼æ“ä½œgitå­˜å‚¨åº“ï¼Œå‚è€ƒğŸ‘‰ã€Linuxã€‘å¦‚ä½•ä½¿ç”¨sshå¯†é’¥é…ç½®git\n\næ³¨ï¼šå¦‚æœä½ æ˜¯githubç”¨æˆ·ï¼Œä¸”ä½¿ç”¨httpsçš„gitä»“åº“é“¾æ¥æ—¶ï¼Œå¤šæ¬¡é‡åˆ°å„ç§å„æ ·çš„æ— æ³•è¿æ¥é—®é¢˜ï¼Œåˆ™éœ€è¦åˆ‡æ¢ä½¿ç”¨sshæ–¹å¼ä¸githubé€šä¿¡ï¼è¿™èƒ½è§£å†³httpsé“¾æ¥æ—¶éƒ¨åˆ†ç±»ä¼¼time outçš„ç½‘ç»œé—®é¢˜ï¼›\nä¸ç®¡ç”¨giteeè¿˜æ˜¯githubï¼Œéƒ½æ›´åŠ æ¨èsshæ¥æ“ä½œgitã€‚\n\n4.3ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼æ“ä½œgitå…¶å®åœ¨é…ç½®äº‘æœåŠ¡å™¨ä¹‹å‰ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“git configå¯ä¸å¯ä»¥å®ç°å¤šç”¨æˆ·ç‹¬ç«‹ä¸Šä¼ åˆ°è‡ªå·±çš„ä»“åº“ï¼Œä½†æ˜¯æˆ‘çŸ¥é“SSHè‚¯å®šæ˜¯å¯ä»¥ï¼Œè¿™ç‚¹ä¹ŸéªŒè¯è¿‡äº†ã€‚\nåæ¥æ‰æ˜ç™½ï¼Œ gitçš„é…ç½®æ–‡ä»¶æ˜¯å­˜åœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„ï¼Œä¸åŒç”¨æˆ·çš„gité…ç½®ç›¸äº’ä¸ä¼šå¹²æ‰°ï¼Œå•ä¸ªgitä»“åº“ä¹Ÿå¯ä»¥è®¾ç½®ç‹¬ç«‹çš„é…ç½®é¡¹ã€‚å‰æœŸçš„æ‹…å¿ƒå¤šä½™äº†ï¼\nä¸è¿‡ï¼Œæˆ‘è¿˜æ˜¯æ›´æ¨èä½ ä½¿ç”¨4.2æ‰€æåˆ°çš„sshçš„æ–¹å¼æ“ä½œgitï¼Œè¿™æ ·ä¼šæ›´æ–¹ä¾¿ï¼\n4.3.1 é…ç½®å…¨å±€gitè®¾ç½®ç›´æ¥ä½¿ç”¨ä¸‹é¢3ä¸ªè¯­å¥æ¥è®¾ç½®æŸä¸ªLinuxç”¨æˆ·ä¸‹çš„å…¨å±€gité‚®ç®±å’Œç”¨æˆ·å\ngit config --global user.email &quot;you@example.com&quot;git config --global user.name &quot;Your Name&quot;git config --global push.default current\n\næµ‹è¯•äº†ä¸€ä¸‹--globalæŒ‡ä»¤åï¼Œå‘ç°å®ƒä¿å­˜çš„æ–‡ä»¶æ˜¯æˆ‘ä»¬ç”¨æˆ·å®¶è·¯å¾„ä¸‹çš„ï¼Œè€Œä¸æ˜¯rootä¸‹çš„å…¨å±€ç›®å½•ã€‚ç»è¿‡æˆ‘å’ŒåŒå­¦çš„æµ‹è¯•ï¼Œè¿™ä¸ªé…ç½®ä¼šä¸€ç›´ä¿ç•™ï¼Œå¹¶ä¸ä¼šå› ä¸ºç»ˆç«¯å…³é—­è€Œå¤±æ•ˆï¼Œä¸åŒç”¨æˆ·çš„é…ç½®ä¹Ÿä¸ä¼šç›¸äº’å¹²æ‰°ã€‚\nåœ¨ç”¨æˆ·çš„~å®¶ç›®å½•ï¼Œä½¿ç”¨ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤å¯ä»¥æŸ¥çœ‹gité…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œæ¯ä¸ªä¸åŒçš„Linuxç”¨æˆ·ä¸­ï¼Œé…ç½®æ–‡ä»¶äº’ä¸å½±å“ï¼\ncat .gitconfig \n\n\nä½¿ç”¨SSHçš„å¥½å¤„æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨gité…ç½®æ¥è®©gitä¿å­˜ä½ çš„å¯†ç ï¼Œè¿™æ ·ä¹Ÿèƒ½åœ¨ä¹‹åä½¿ç”¨httpsæ–¹å¼çš„ä¸Šä¼ ä¸­ä¸éœ€è¦è¾“å…¥gitè¿œç¨‹ä»“åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚\næ“ä½œæ˜¯ç¼–è¾‘.gitconfig æ–‡ä»¶ï¼Œåœ¨æœ€ååŠ ä¸Šä¸‹é¢è¿™ä¸¤è¡Œã€‚å…¶ä½œç”¨æ˜¯åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œgit pushæ“ä½œçš„æ—¶å€™ï¼Œä¿å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œåç»­å¯¹ç›¸åŒgitè¿œç¨‹ä»“åº“å¹³å°è¿›è¡Œpushæ“ä½œçš„æ—¶å€™éƒ½ä¸éœ€è¦è¾“å…¥å¯†ç äº†ã€‚\n[credential]          helper = store\n\nä½¿ç”¨vim .gitconfigä¿®æ”¹åçš„é…ç½®æ–‡ä»¶åº”è¯¥å’Œæˆ‘è¿™ä¸ªç›¸åŒ\n[user]\temail = ä½ çš„gitee/githubé‚®ç®±\tname = ç”¨æˆ·å[push]\tdefault = current[credential]\thelper = store\n\n\n4.3.2 å…‹éš†å’Œä¸Šä¼ æ“ä½œä½¿ç”¨mkdir æ–‡ä»¶å¤¹ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œcdè¿›å»åï¼Œæ‰§è¡Œcloneå·¥ä½œï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨çš„æ˜¯HTTPSé“¾æ¥\n\ngit clone è¿œç¨‹ä»“åº“çš„httpsé“¾æ¥\n\n\nå¦‚æœä½ ä¹‹å‰ä½¿ç”¨äº†SSHå…‹éš†äº†ä»“åº“ï¼Œå¯ä»¥è€ƒè™‘é‡æ–°å…‹éš†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­å¥æ›´æ”¹ä»“åº“URLï¼Œæ³¨æ„è¿™é‡Œçš„URLæ˜¯æ–°çš„ä»“åº“gitåœ°å€\ngit remote set-url origin URL \n\ncdè¿›å…¥ä»“åº“ç›®å½•ï¼Œå³å¯ä¿®æ”¹ä»“åº“ä¸­çš„æ–‡ä»¶\n\nä¿®æ”¹å®Œæ¯•åï¼Œå…ˆç”¨git statusæŸ¥çœ‹å½“å‰çŠ¶æ€\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œåˆ—å‡ºæ¥æˆ‘ä»¬çš„READMEæ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œä¸‹é¢æ‰§è¡Œä¸€æ¬¡git pushæ“ä½œã€‚è¿™éƒ¨åˆ†æ¶‰åŠåˆ°gitå‘½ä»¤è¡Œæ“ä½œï¼Œå¦‚æœä½ ä¸ä¼šï¼Œå¯ä»¥æœå‡ ç¯‡gitçš„åšå®¢å­¦ä¹ ä¸€ä¸‹\ngit add æ–‡ä»¶å¤¹ #æ·»åŠ éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„git commit -m &quot;è¾“å…¥pushä¿¡æ¯&quot; #git pushçš„ä¿¡æ¯\n\nè¿™é‡Œçš„git addå¯ä»¥æ·»åŠ å•ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ•´ä¸ªæ–‡ä»¶å¤¹\n\ngit push # æ¨é€æœ¬åœ°ä¿®æ”¹åˆ°è¿œç¨‹ä»“åº“\n\næœ€ågit pushçš„æ—¶å€™ï¼Œä¼šæç¤ºè®©ä½ è¾“å…¥è¿œç¨‹ä»“åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚\næˆ‘åŒå­¦å°è¯•çš„æ—¶å€™ï¼Œè¿™é‡Œå‡ºç°äº†æŠ¥é”™ã€‚æœ¬æ¥æˆ‘ä»¬ä»¥ä¸ºæ˜¯ç”¨æˆ·åæˆ–è€…å¯†ç æœ‰é—®é¢˜ï¼Œä¸€ç›´åœ¨æ‰¾åˆ°åº•æ˜¯å“ªé‡Œå‡ºé”™äº†\nfatal: Authentication failed for &#x27;https://gitee.com/â€¦â€¦&#x27;\n\nå®é™…ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬å¡«é”™äº†ç”¨æˆ·åï¼ï¼ï¼é“¾æ¥\n\næ­£ç¡®çš„å¡«å†™æ–¹æ³•åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼ï¼ï¼æˆ‘ä»¬é”™è¯¯çš„æŠŠç¬¬ä¸€ä¸ªå¡«äº†giteeçš„ç”¨æˆ·åï¼Œåº”è¯¥è¦å¡«å†™çš„æ˜¯giteeè´¦æˆ·çš„é‚®ç®±ï¼Œè€Œä¸æ˜¯ç”¨æˆ·åã€‚\nUsername for &#x27;https://gitee.com&#x27;: ä½ çš„giteeé‚®ç®±Password for &#x27;https://xxxxx@gitee.com&#x27;: å¡«giteeå¯†ç \n\næ³¨ï¼šè¿™é‡Œå¡«å†™å¯†ç çš„æ—¶å€™æ˜¯ä¸ä¼šæ˜¾ç¤ºå†…å®¹çš„ï¼Œç›´æ¥ç›²æ‰“å°±å¯ä»¥äº†\nä¿®æ”¹æ­£ç¡®ä¹‹åå°±å¯ä»¥æ­£å¸¸PUSHä»£ç äº†\n\nç»è¿‡æˆ‘å’ŒåŒå­¦çš„æµ‹è¯•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå› ä¸ºç»ˆç«¯å…³é—­è€Œé‡ç½®ï¼Œå¯ä»¥å¤šæ¬¡å¤ç”¨ä¸”ä¸éœ€è¦æ¯æ¬¡éƒ½è¾“å…¥gitçš„è´¦æˆ·å’Œå¯†ç ï¼Œè®¡åˆ’é€šï¼\nä½ è¿˜å¯ä»¥çœ‹çœ‹gitå‘½ä»¤è¡Œè¯­å¥çš„è¿›é˜¶å­¦ä¹ ğŸ‘‰ä¼ é€é—¨\n4.4 git statusä¸­æ–‡ä¹±ç ä¸€æ¡å‘½ä»¤è§£å†³\ngit config --global core.quotepath false\n\nä¿®å¤å‰ï¼Œä¸­æ–‡ä¼šä¹±ç \n&quot;project/Library_c/Student - \\345\\211\\257\\346\\234\\254.txt&quot;\n\nä¿®å¤å\nproject/Library_c/Student - å‰¯æœ¬.txt\n\n\n5.vimç¼–è¾‘å™¨é…ç½®è…¾è®¯äº‘çš„CentOSå·²ç»é»˜è®¤å®‰è£…äº†vimç¼–è¾‘å™¨ï¼Œä½†æ˜¯vimç¼–è¾‘å™¨æœ¬èº«çš„é»˜è®¤è®¾ç½®å’Œæˆ‘ä»¬çš„ä¹ æƒ¯ä¸åŒï¼Œæ¯”å¦‚tapå®ƒé»˜è®¤æ˜¯8ä¸ªç©ºæ ¼ï¼ˆwindowsä¸‹æ˜¯4ä¸ªï¼‰ä»¥åŠç¼©è¿›çš„ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±è®¾ç½®ä¸€ä¸‹vimç¼–è¾‘å™¨\nvim  ~/.vimrc\n\nç”¨ä¸Šé¢çš„è¯­å¥æ‰“å¼€vimç¼–è¾‘å™¨åï¼Œç”¨iå¼€å¯vimçš„æ’å…¥æ¨¡å¼ï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤\nsyntax on #å¼€å¯è¯­æ³•é«˜äº®set nu  #æ˜¾ç¤ºè¡Œå·set tabstop=4 #è®¾ç½®tapä¸º4ä¸ªç©ºæ ¼set softtabstop=4 set shiftwidth=4 set autoindent #è‡ªåŠ¨å¯¹é½\n\nå†™å®Œåï¼Œ:wq!ä¿å­˜å³å¯\nè¿™é‡Œæˆ‘ç»™å‡ºäº†æ³¨é‡Šï¼Œå®é™…å†™å…¥é…ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œè¯·å»æ‰æ³¨é‡Š\n6.å°†Linuxå‘½ä»¤è¡Œè®¾ç½®ä¸ºä¸­æ–‡ä»¥CentOSä¸ºä¾‹ï¼Œé»˜è®¤çš„å‘½ä»¤è¡Œæ˜¾ç¤ºæ˜¯å…¨è‹±æ–‡çš„ï¼ˆä½†è¿™ä¸ä»£è¡¨ä½ ä¸èƒ½åœ¨é‡Œé¢è®¾ç½®ä¸­æ–‡çš„æ–‡ä»¶å¤¹åå­—ï¼‰æˆ‘ä¹Ÿæ›´æ¨èå¤§å®¶é‡‡ç”¨è‹±è¯­çš„ç»ˆç«¯æ¥å­¦ä¹ linuxï¼Œå› ä¸ºç»å¤§å¤šæ•°linuxä¸‹çš„ç»ˆç«¯å·¥å…·ï¼Œéƒ½æ˜¯ä»¥è‹±è¯­ä½œä¸ºå·¥å…·çš„å‘½ä»¤æ•™ç¨‹çš„ã€‚\n\nå®åœ¨çœ‹ä¸æ‡‚ï¼Œå°±ç”¨ç¿»è¯‘è½¯ä»¶è¯»è¯»ï¼Œåæ¥çœ‹å¾—å¤šäº†ï¼Œå°±ç†Ÿæ‚‰äº†ï¼\n\nä¸‹é¢ä»‹ç»å¦‚ä½•å°†Linuxçš„å‘½ä»¤è¡Œæ”¹æˆä¸­æ–‡çš„ï¼ˆå…¶å®å°±æ˜¯ä¿®æ”¹ç³»ç»Ÿè¯­è¨€ä¸ºä¸­æ–‡ï¼‰\næˆ‘ä»¬æ‰“å¼€äº‘æœåŠ¡å™¨çš„rootè´¦æˆ·ï¼ˆå¿…é¡»æ˜¯rootè´¦æˆ·ï¼‰\nlocale\n\nä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªæŒ‡ä»¤æŸ¥çœ‹ç°åœ¨çš„è¯­è¨€ï¼Œå‘ç°æ˜¯enè‹±æ–‡\n\nlocale -a\n\nä½¿ç”¨ä¸Šè¿°å‘½ä»¤æŸ¥çœ‹å½“å‰æ”¯æŒçš„è¯­è¨€ï¼Œä¼šæ˜¾ç¤ºä¸€å¤§å †ï¼Œæ»‘åˆ°æœ€åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘è¿™ä¸ªç³»ç»Ÿé‡Œé¢å·²ç»æœ‰äº†zh-CNï¼Œæ”¯æŒä¸­æ–‡ï¼\n\n\nå¦‚æœlocale -aå‘ç°æ²¡æœ‰å‡ºç°zhï¼Œé‚£å°±ä¸‹è½½ä¸­æ–‡æ”¯æŒåŒ…\n&gt;yum install kde-l10n-Chinese\n\nè…¾è®¯äº‘çš„CentOSé‡Œé¢å·²ç»æœ‰ä¸­æ–‡äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œè¿™ä¸€æ­¥æ“ä½œ\n\næ‰¾åˆ°è¯­è¨€åŒ…åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œä¿®æ”¹ç³»ç»Ÿè¯­è¨€ä¸ºä¸­æ–‡\nlocalectl set-locale LANG=zh_CN.utf8\n\né‡å¯Xshellè¿æ¥çš„sshç»ˆç«¯ï¼ˆä¸æ˜¯é‡å¯äº‘æœåŠ¡å™¨ï¼‰ï¼Œå†æ¬¡ä½¿ç”¨localeæŒ‡ä»¤æŸ¥çœ‹ï¼Œå‘ç°å·²ç»è®¾ç½®æˆäº†ä¸­æ–‡è¯­è¨€åŒ…\n\né‡å¯Xshellç»ˆç«¯ï¼ˆä¸æ˜¯é‡å¯äº‘æœåŠ¡å™¨ï¼‰ï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œgitè¿™é‡Œçš„æç¤ºå·²ç»å˜æˆäº†ä¸­æ–‡ã€‚ä¸ç„¶å°±æ˜¯ä¸Šæ–‡å‡ºç°è¿‡çš„çš„è‹±æ–‡é¡µé¢ğŸ‘‰å›åˆ°ä¸Šå¤´åº·åº·\n\nä¿®æ”¹Xshellä¸­æ–‡æ˜¾ç¤ºå­—ä½“å¦‚æœä½ è§‰å¾—é»˜è®¤çš„ä¸­æ–‡å­—ä½“å¾ˆéš¾çœ‹ï¼Œå¯ä»¥åœ¨Xshellä¸­ä¿®æ”¹ä¸€ä¸‹ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„æ–‡ä»¶-å½“å‰ä¼šè¯å±æ€§\n\næ‰¾åˆ°å¤–è§‚ï¼ŒæŠŠäºšæ´²å­—ä½“æ”¹æˆé»‘ä½“ï¼Œçœ‹èµ·æ¥å°±èˆ’æœå¤šäº†\n\nè¿™é‡Œè¿˜å¯ä»¥æ›´æ”¹æ¸¸æ ‡çš„æ ·å¼ï¼Œæˆ‘æ”¹æˆäº†åœ¨windowsä¸­æ›´ç†Ÿæ‚‰çš„ç«–çº¿æ ·å¼\n7.è®¾ç½®å‘½ä»¤è¡Œç”¨æˆ·åçš„æ˜¾ç¤ºé¢œè‰²\nå‚è€ƒ https://blog.csdn.net/nmb_jiang/article/details/105195981\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œbashæ˜¾ç¤ºçš„æœåŠ¡å™¨ç”¨æˆ·åå’Œåå­—éƒ½æ˜¯ç™½è‰²çš„\n\næ•²çš„å‘½ä»¤å¤šäº†ä¹‹åï¼Œå°±åˆ†ä¸æ¸…å•¥æ˜¯å•¥äº†ï¼Œçœ¼ç›éƒ½å¾—çæ‰ï¼\næˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸‹å›æ˜¾çš„é¢œè‰²ï¼Œä»¥CentOSä¸ºä¾‹ï¼Œéœ€è¦ç”¨vimç¼–è¾‘å™¨æ‰“å¼€.bashrcæ–‡ä»¶\nvim .bashrc\n\nåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­ï¼Œé”®å…¥iå¼€å¯vimçš„ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨æ–‡ä»¶çš„æœ«å°¾è¾“å…¥\nPS1=&#x27;[\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]]\\$ &#x27;\n\nè¾“å…¥å®Œæ¯•åï¼ŒæŒ‰escé€€å‡ºæ’å…¥æ¨¡å¼ï¼Œè¾“å…¥:wq!ä¿å­˜è¯¥æ–‡ä»¶\n\né¡ºå¸¦ä¸€æï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ç”¨çš„æ˜¯tabbyè¿™ä¸ªsshç»ˆç«¯ï¼Œåˆ™è¿˜å¯ä»¥åœ¨æœ«å°¾è¿½åŠ å¦‚ä¸‹å†…å®¹å®ç°æ£€æµ‹å·¥ä½œè·¯å¾„ï¼ˆæ–¹ä¾¿sftpä¼ æ–‡ä»¶ï¼‰\n&gt;PS1=&quot;$PS1\\[\\e]1337;CurrentDir=&quot;&#x27;$(pwd)\\a\\]&#x27;\n\nä¿®æ”¹å¥½é€€å‡ºåè¿è¡Œä¸‹é¢çš„æŒ‡ä»¤ä½¿å…¶ç”Ÿæ•ˆ\nsource .bashrc\n\n\nçœ‹èµ·æ¥å°±èˆ’æœå¤šäº†ï¼\nå¦å¤–ï¼Œå»ºè®®æŠŠrootæ”¹æˆé»„è‰²+ç»¿è‰²çš„ç»„åˆï¼Œå’Œå­ç”¨æˆ·åŒºåˆ†å¼€æ¥ã€‚ä¿®æ”¹çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œå†…å®¹æ›¿æ¢æˆå¦‚ä¸‹é…ç½®ã€‚\nPS1=&#x27;[\\[\\033[01;33m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;32m\\]\\w\\[\\033[00m\\]]\\$ &#x27;\n\nå¦‚æœä¸æƒ³æ˜¾ç¤ºhostä¸»æœºçš„åå­—ï¼Œå¯ä»¥æŠŠä¸­é—´çš„ä¸»æœºåéƒ¨åˆ†ç»™åˆ é™¤äº†\nPS1=&#x27;[\\[\\033[01;33m\\]\\u\\033[00m\\]:\\[\\033[01;32m\\]\\w\\[\\033[00m\\]]\\$ &#x27;\n\nè¿™æ ·é…ç½®åçš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼Œæ›´ç®€æ´\n[muxue:~]$\n\n8.å‡ºç°is not in the sudoers fileè§£å†³æ–¹æ³•\nå½“æˆ‘ä»¬ä½¿ç”¨sudoå‘½ä»¤åˆ‡æ¢ç”¨æˆ·çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°æç¤ºä»¥ä¸‹é”™è¯¯ï¼šç”¨æˆ·å is not in the sudoers file.\n\næˆ‘ä»¬éœ€è¦æŠŠå½“å‰ç”¨æˆ·åŠ å…¥sudoçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™ç”¨æˆ·æ²¡æœ‰æƒé™æ‰§è¡Œsudoå‘½ä»¤ã€‚\nåœ¨rootç”¨æˆ·ä¸‹ï¼Œæ‰“å¼€sudoçš„é…ç½®æ–‡ä»¶\nvim /etc/sudoers\n\næ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘ç°è…¾è®¯äº‘çš„é»˜è®¤ç”¨æˆ·lighthouseå·²ç»æ·»åŠ è¿‡è¿™ä¸ªè¯­å¥äº†ã€‚æˆ‘ä»¬åœ¨æœ€ååŠ ä¸Šxxx ALL=(ALL) ALLï¼Œå…¶ä¸­xxxä»£è¡¨ç”¨æˆ·å\næ¯”å¦‚éœ€è¦æ·»åŠ KKç”¨æˆ·ï¼Œå°±è¿™ä¹ˆå¡«\nKK ALL=(ALL) ALL\n\n\n9.åˆ é™¤ç”¨æˆ·å¦‚æœæœ‰ç”¨æˆ·çš„åè®¾ç½®é”™äº†ï¼Œæˆ–è€…æƒ³å½»åº•åˆ é™¤æ‰æŸä¸€ä¸ªç”¨æˆ·ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤\nuserdel -r ç”¨æˆ·å\n\nç»“è¯­çœ‹åˆ°è¿™é‡Œï¼Œäº‘Linuxç¼–ç¨‹å­¦ä¹ ç¯å¢ƒå°±æ­å»ºå¥½å•¦ï¼\né€Ÿé€Ÿå¼€å§‹å­¦ä¹ Linuxå‘½ä»¤è¡Œå§ï¼ğŸ‘\n\n\næœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","git"]},{"title":"ã€Pythonã€‘ValueError:Sample larger than population or is negativeçš„åŸå› ","url":"/posts/2918276452/","content":"ValueError: Sample larger than population or is negative çš„åŸå› ä»¥åŠè§£å†³åŠæ³•\n\n\n1.å‡ºç°è¿™å‡ å¤©é‡æ„kook-valorant-botçš„ä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°äº†è¿™ä¸ªé—®é¢˜\nJob &quot;vip_roll_task (trigger: interval[0:01:20], next run at: 2023-01-25 19:59:21 CST)&quot; raised an exceptionTraceback (most recent call last):  File &quot;/home/muxue/.local/lib/python3.10/site-packages/apscheduler/executors/base_py3.py&quot;, line 30, in run_coroutine_job    retval = await job.func(*job.args, **job.kwargs)  File &quot;/home/muxue/kook/val-bot/code/main.py&quot;, line 793, in vip_roll_task    ran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;]) - 1), vnum)  File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negativeerror raised during taskTraceback (most recent call last):  File &quot;/home/muxue/.local/lib/python3.10/site-packages/apscheduler/executors/base_py3.py&quot;, line 30, in run_coroutine_job    retval = await job.func(*job.args, **job.kwargs)  File &quot;/home/muxue/kook/val-bot/code/main.py&quot;, line 793, in vip_roll_task    ran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;]) - 1), vnum)  File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negative\n\nè¿™éƒ¨åˆ†ä»£ç æ˜¯ç”¨æ¥ç”ŸæˆæŠ½å¥–ç»“æœçš„éšæœºæ•°çš„ï¼Œåœ¨ç½‘ä¸Šç™¾åº¦äº†æŠ¥é”™ä¹‹åï¼Œå¾—çŸ¥æ˜¯randomç”Ÿæˆéšæœºæ•°æ—¶äº§ç”Ÿçš„æŠ¥é”™\n2.å¤ç°æ‰¾åˆ°å¯¹åº”çš„ä»£ç \nran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;])-1), vnum) # ç”Ÿæˆnä¸ªéšæœºæ•°\n\nè¿™ä¸ªä»£ç çš„ä½œç”¨æ˜¯ï¼Œç”Ÿæˆvnumä¸ªä»0åˆ°len(VipRollDcit[msg_id][&#39;user&#39;]) - 1çš„éšæœºæ•°ï¼Œä¸åŒ…å«len(VipRollDcit[msg_id][&#39;user&#39;])-1\n\nå’³å’³ï¼Œè¿™é‡Œåˆå‘ç°äº†å¦å¤–ä¸€ä¸ªbugï¼šæˆ‘ä»¥ä¸ºæ˜¯åŒ…å«å³è¾¹ç•Œçš„ï¼Œæ‰€ä»¥æ‰‹åŠ¨-1äº†ï¼›ç°åœ¨å¯¼è‡´æœ€åä¸€ä¸ªå‚åŠ æŠ½å¥–çš„ç”¨æˆ·æ°¸è¿œéƒ½æŠ½ä¸åˆ°å¥–äº†ğŸ˜¥\næ­£ç¡®çš„rangeåº”è¯¥æ˜¯(0, len(VipRollDcit[msg_id][&#39;user&#39;]))\n\nä½†æ˜¯ï¼Œå¦‚æœå‚ä¸æŠ½å¥–çš„äººæ•°å°‘äºvnumï¼Œå°±ä¼šå‡ºç°ä¸Šé¢çš„æŠ¥é”™\nimport randomran = random.sample(range(0, 2), 3) \n\nå¯ä»¥æ¥ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œæˆ‘æƒ³åœ¨0åˆ°2ä¹‹é—´ï¼ˆå…¶å®å°±æ˜¯0,1ï¼‰ç”Ÿæˆ3ä¸ªéšæœºæ•°\n$ py3 test1.pyTraceback (most recent call last):  File &quot;/home/muxue/kook/test/global_val_test/test1.py&quot;, line 16, in &lt;module&gt;    ran = random.sample(range(0, 2), 3)   File &quot;/usr/local/lib/python3.10/random.py&quot;, line 482, in sample    raise ValueError(&quot;Sample larger than population or is negative&quot;)ValueError: Sample larger than population or is negative\n\næ­¤æ—¶è¿è¡Œï¼Œå°±ä¼šæœ‰è¿™æ ·çš„æŠ¥é”™ã€‚\nå› ä¸ºè¿™ä¸ªå†™æ³•çš„ä½œç”¨æ˜¯åœ¨0-2ä¹‹é—´äº§ç”Ÿä¸é‡å¤çš„éšæœºæ•°ï¼Œä½ çš„ç›®æ ‡æ•°é‡éƒ½å¤§äºè¿™ä¸ªé›†åˆä¹‹ä¸­å·²æœ‰æ•°æ®çš„æ•°é‡äº†ï¼Œé‚£è¦æ€ä¹ˆç”Ÿæˆä¸é‡å¤çš„éšæœºæ•°å‘¢ï¼Ÿ\n3.è§£å†³è§£å†³åŠæ³•å¾ˆç®€å•\n\nå³è¾¹ç•Œä¸èƒ½ç­‰äºæˆ–è€…å°äºå·¦è¾¹ç•Œ\näº§ç”Ÿéšæœºæ•°çš„æ•°é‡è¦å°äºè¾¹ç•Œä¹‹ä¸­æ•°æ®çš„æ•°é‡\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹è¾¹ç•Œï¼Œå°±èƒ½è·å¾—æ­£ç¡®çš„ç»“æœ\nimport randomran = random.sample(range(0, 3), 3) print(ran)\n\nè¿è¡Œ\n$ py3 test1.py[0, 2, 1]\n\nå¯¹äºæˆ‘çš„æŠ½å¥–ä»£ç è€Œè¨€ï¼Œåˆ™éœ€è¦é‡æ–°æ“ä½œä¸€ç•ªã€‚å³å¯èƒ½å‡ºç°å¥–å“æ•°é‡å¤§äºå‚ä¸æŠ½å¥–çš„äººæ•°çš„æƒ…å†µï¼›\nè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œåˆ¤æ–­äº†\n\nå¥–å“æ•°é‡å°‘äºæŠ½å¥–äººæ•°ï¼Œä½¿ç”¨randomç”Ÿæˆéšæœºæ•°\nå¥–å“æ•°é‡å¤§äºæŠ½å¥–äººæ•°ï¼ŒæŠ›å¼ƒå¤šä½™å¥–å“ï¼Œç›´æ¥ç”Ÿæˆä¸€ä¸ªä»0åˆ°æ€»äººæ•°çš„åˆ—è¡¨\nå¥–å“æ•°é‡ç­‰äºæŠ½å¥–äººæ•°ï¼Œä¸Šé¢ä¸¤ç§æƒ…å†µéƒ½å¯ä»¥ç”¨\n\nä»£ç å¦‚ä¸‹\n# äººæ•°å¤§äºå¥–å“æ•°é‡if len(VipRollDcit[msg_id][&#x27;user&#x27;])&gt;vnum: \tran = random.sample(range(0, len(VipRollDcit[msg_id][&#x27;user&#x27;])), vnum) # ç”Ÿæˆvnumä¸ªéšæœºæ•°else: # ç”Ÿæˆä¸€ä¸ªä»0åˆ°len-1çš„åˆ—è¡¨ å¦‚æœåªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œç”Ÿæˆçš„æ˜¯[0]\tran = list(range(len(VipRollDcit[msg_id][&#x27;user&#x27;])))\n\nè¿™æ—¶å€™å°±okäº†ï¼Œæ²¡æœ‰é—®é¢˜äº†\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Pythonã€‘è‡ªåŠ¨è§£æmarkdownä¸­çš„å›¾ç‰‡å¹¶ä¿å­˜","url":"/posts/3761902412/","content":"pythonè‡ªåŠ¨åŒ–ä¸‹è½½&#x2F;ä¸Šä¼ mdä¸­å›¾ç‰‡å®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†\n\n\n1.èµ·å› ä¸ºä»€ä¹ˆéœ€è¦pythonæ¥ä¸‹è½½mdé‡Œé¢çš„å›¾ç‰‡ï¼ŸåŸå› å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯éœ€è¦æŠŠå›¾ç‰‡ä¿å­˜ä¸‹æ¥ï¼Œä¸Šä¼ åˆ°ç¬¬äºŒä¸ªå›¾åºŠï¼ˆè¿ç§»ï¼‰\nå¯¹äºé˜¿é‡Œäº‘OSSæ¥è¯´ï¼Œæœ‰ä¸¤ç§è¿ç§»åŠæ³•\n\nä½¿ç”¨å®˜æ–¹çš„æ•°æ®å¯¼å‡ºåŠŸèƒ½\nä½¿ç”¨apiæ¥å£éå†ossç›®å½•ä¸‹è½½æ‰€æœ‰å›¾ç‰‡\n\nè¿™ä¸¤ç§åŠæ³•éƒ½ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ç¬¬ä¸‰ç§\n\nè§£ææœ¬åœ°mdæ–‡ä»¶ä¸­çš„img urlï¼Œä¸‹è½½å›¾ç‰‡å¹¶ä¿å­˜åˆ°æœ¬åœ°\n\né‚£è¦æ€ä¹ˆåšå‘¢ï¼ŸğŸ‘‡\n2.æ•™ç¨‹æˆ‘åœ¨githubæ‰¾åˆ°äº†è¿™ä¸ªé¡¹ç›® ğŸ‘‰ Deali-Axy&#x2F;Markdown-Image-Parser\nä½œè€…çš„ä»£ç å†™çš„å¾ˆæ£’ï¼Œä½†æ˜¯READMEé‡Œé¢å´å°‘äº†ä¸€ä¸ªé‡è¦çš„å¯åŠ¨æ•™ç¨‹ï¼Œé‚£å°±æ˜¯ä½ éœ€è¦åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªfilesæ–‡ä»¶å¤¹ï¼ˆmdæ–‡ä»¶æ”¾åˆ°è¿™é‡Œé¢ï¼‰ï¼Œå¯¹åº”å¯åŠ¨é¡¹é‡Œé¢å¼€å¯çš„æ ¹ç›®å½•\nif __name__ == &#x27;__main__&#x27;:    files_list = get_files_list(os.path.abspath(os.path.join(&#x27;.&#x27;, &#x27;files&#x27;)))\n\néšåï¼Œæ‰§è¡Œpython spider.pyï¼Œå¼€å§‹è¿è¡Œï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å°†mdè½¬æˆhtmlå¹¶ä¸‹è½½å›¾ç‰‡\næˆ‘å°†ä½œè€…çš„ä»£ç è¿›ä¸€æ­¥ç»†åŒ–ï¼Œå¹¶ä¿®æ”¹äº†ä¸€éƒ¨åˆ†bugğŸ‘‡å»ºè®®ä½¿ç”¨æˆ‘forkçš„ç‰ˆæœ¬\nhttps://github.com/musnows/Markdown-Image-Parser\n2.1 UnicodeDecodeErroråœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°è¿™ä¸ªæŠ¥é”™\nUnicodeDecodeError: &#x27;utf-8&#x27; codec can&#x27;t decode byte 0xbc in position 2: invalid start byt\n\nè§£å†³åŠæ³•å‚è€ƒ ğŸ‘‰ ç‚¹æˆ‘\nè§£å†³åŠæ³•æ˜¯å°†æ‰“å¼€æ–‡ä»¶ç¼–ç çš„utf-8 ä¿®æ”¹æˆISO-8859-1\nwith open(file, encoding=&#x27;ISO-8859-1&#x27;) as f:           md_content = f.read()\n\n2.2 request failedå› ä¸ºä½œè€…å¹¶æ²¡æœ‰å†™åˆ¤æ–­ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡é—®é¢˜ï¼šæœ¬åœ°å›¾ç‰‡ä¹Ÿä¼šè¿›è¡Œrequestsè¯·æ±‚\næ¯”å¦‚æˆ‘çš„mdé‡Œé¢å°±æœ‰ä¸€äº›å›¾ç‰‡æ˜¯æœ¬åœ°çš„img/å›¾ç‰‡æ–‡ä»¶åï¼Œè¿™ä¸ªä»£ç ä¾æ—§å¯¹è¿™ä¸ªè·¯å¾„å½“åšç½‘ç»œè·¯å¾„è¿›è¡Œè¯·æ±‚ï¼Œäºæ˜¯å°±å‡ºç°äº†æŠ¥é”™\næ‰€ä»¥å°±éœ€è¦åœ¨download_picså‡½æ•°ä¸­å¯¹urlè¿›è¡Œåˆ¤æ–­ï¼Œè¿™é‡Œå¯ä»¥å†™æˆä¸‹é¢çš„æ ¼å¼ï¼ˆå› ä¸ºæˆ‘çŸ¥é“æˆ‘çš„é˜¿é‡Œäº‘OSSé“¾æ¥é‡Œé¢ä¸åŒ…å«imgæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥img/çš„å›¾ç‰‡æ˜¯æœ¬åœ°æ–‡ä»¶\ndef download_pics(url, file,MDfilename):    if &#x27;img/&#x27; in url:        print(&#x27;ä¸å¤„ç†æœ¬åœ°å›¾ç‰‡: &#x27;, url)        return\n\nä½†æ˜¯è¿™æ ·å…¶å®è¿˜æ˜¯æœ‰ç‚¹å‘†å‘†çš„ï¼Œæˆ‘ä»¬ç›´æ¥åˆ¤æ–­httpåœ¨ä¸åœ¨é‡Œé¢ä¸å°±çŸ¥é“æ˜¯ä¸æ˜¯ç½‘ç»œå›¾ç‰‡äº†ğŸ˜‚\ndef download_pics(url, file,MDfilename):    if &#x27;http&#x27; not in url:        print(&#x27;ä¸å¤„ç†æœ¬åœ°å›¾ç‰‡: &#x27;, url)        return\n\n2.3 å›¾ç‰‡ä¿å­˜è·¯å¾„é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡ä¼šä¿å­˜åˆ°å­æ–‡ä»¶å¤¹ä¸‹çš„markdownæ–‡ä»¶åç›®å½•\ntarger_dir = os.path.join(dirname,assert_dir)if not os.path.exists(targer_dir):     os.mkdir(targer_dir)\n\nè¿™æ ·å…¶å®éå¸¸éå¸¸ä¸æ–¹ä¾¿ç®¡ç†ï¼Œæœ‰å‡ ä¸ªmdæ–‡æ¡£å°±æœ‰å‡ ä¸ªmdå›¾ç‰‡è·¯å¾„ï¼Œå¯å¤ªéš¾å—äº†\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æ³¨é‡Šæ‰è¿™éƒ¨åˆ†ä»£ç ï¼Œç›´æ¥é€‰æ‹©ä¸€ä¸ªæ ¹ç›®å½•è¿›è¡Œå›¾ç‰‡çš„ä¿å­˜\ntarger_dir =&#x27;./files/img/&#x27; # æ‰€æœ‰å›¾ç‰‡éƒ½ä¿å­˜åˆ° ./files/img/ æ–‡ä»¶å¤¹é‡Œé¢\n\n2.4 try&#x2F;exceptä½œè€…ä»£ç é‡Œé¢çš„æœ€æœ€æœ€å¤§æ¼æ´ï¼Œé‚£å°±æ˜¯æ²¡æœ‰å¯¹forå¾ªç¯é‡Œé¢çš„è¯·æ±‚è¿›è¡Œtry/except\nè¿™æ ·å°±ä¼šå¯¼è‡´ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå›¾ç‰‡è¯·æ±‚å¤±è´¥ï¼Œæ•´ä¸ªè¿›ç¨‹ä¼šç›´æ¥ç»ˆæ­¢ï¼\né‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå³ä¾¿è¿™ä¸ªç¨‹åºä¼šåœ¨éå†çš„æ—¶å€™æ‰“å°å½“å‰å¤„ç†çš„æ–‡ä»¶åå­—ï¼Œä½†è¿™éœ€è¦ç”¨æˆ·å»ç¿»å‘½ä»¤è¡Œè¾“å‡ºï¼Œå†æ‰¾åˆ°åˆ°åº•æ˜¯å“ªä¸€ä¸ªå›¾ç‰‡å‘ç”Ÿé”™è¯¯ï¼Œéå¸¸éå¸¸éå¸¸éš¾å—ï¼\nå¦‚æœé‡æ–°æ‰§è¡Œï¼Œé‚£å°±ç›¸å½“ä¸æŠŠå·²ç»ä¸‹å¥½çš„å›¾ç‰‡åˆé‡ä¸‹ä¸€éï¼Œæµªè´¹OSSçš„æµé‡ã€‚\næ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦ç»™forå¾ªç¯å†…éƒ¨æ·»åŠ ä¸Šå¼‚å¸¸æ•è·ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼Œå°±å°†è¿™ä¸ªå›¾ç‰‡çš„urlå­˜ä¸‹æ¥ï¼Œç»§ç»­å¾€åæ‰§è¡Œï¼\nfor file in files_list:    print(f&#x27;æ­£åœ¨å¤„ç†ï¼š&#123;file&#125;&#x27;)    with open(file, encoding=&#x27;ISO-8859-1&#x27;) as f:        md_content = f.read()    pics_list = get_pics_list(md_content)    print(f&#x27;å‘ç°å›¾ç‰‡ &#123;len(pics_list)&#125; å¼ &#x27;)    for index, pic in enumerate(pics_list):        try:            print(f&#x27;æ­£åœ¨ä¸‹è½½ç¬¬ &#123;index + 1&#125; å¼ å›¾ç‰‡...&#x27;)            MDfilename = os.path.basename(file) # å½“å‰å¤„ç†çš„mdæ–‡ä»¶çš„åå­—            download_pics(pic, file,MDfilename)            time.sleep(0.5) # é¿å…ä¸‹è½½è¶…é€Ÿ        except KeyboardInterrupt:            os.abort()        except:            print(traceback.format_exc())            if MDfilename not in err_img:                err_img[MDfilename]=[]            # æ·»åŠ å›¾ç‰‡            err_img[MDfilename].append(pic)            print(&quot;å›¾ç‰‡è·å–é”™è¯¯ï¼š&quot;,pic)            time.sleep(1)print(f&#x27;å¤„ç†å®Œæˆã€‚&#x27;)write_file(&#x27;err.json&#x27;,err_img)print(f&#x27;å†™å…¥errå®Œæˆ&#x27;)\n\nå®Œæ•´ä»£ç è§æˆ‘çš„githubä»“åº“\n2.5 ä¸Šä¼ åˆ°lskyå›¾åºŠç°åœ¨æˆ‘è¦è¿ç§»çš„å›¾åºŠæ˜¯lskyï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥åœ¨å°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°çš„åŒæ—¶ï¼Œå°†å›¾ç‰‡ä¸Šä¼ åˆ°lskyå›¾åºŠ\næ³¨æ„ï¼Œä¸Šä¼ ä¹‹å‰ï¼Œè¯·åœ¨ç”¨æˆ·ç»„å°†å›¾ç‰‡ä¸Šä¼ çš„æ ¼å¼æ”¹ä¸ºåŸå§‹æ–‡ä»¶å‘½åï¼Œå¦åˆ™é‡å‘½åäº†é‚£å°±ä»€ä¹ˆéƒ½æ²¡äº†ï¼\n\n\nè¿˜å‘ç°äº†ä¸€ä¸ªç¦»è°±çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ä¸€äº›å›¾ç‰‡ä¸Šä¼ äº†ä¹‹åï¼Œlskyè¿˜æ˜¯ä¼šç»™ä»–æ”¹åå­—ï¼ï¼ï¼\n\næ¯”å¦‚è¿™ä¸ªgifï¼Œä»–çš„alté‡Œé¢æ˜¯åŸå§‹åå­—ï¼Œä½†æ˜¯urlå¹¶ä¸æ˜¯ï¼ï¼ï¼ä½ è¯´è¿™ç¦»è°±ä¸\nè§£å†³æ–¹æ³•é‚£å°±æ˜¯æŠŠæœ¬åœ°çš„å›¾ç‰‡æ‰“ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œä¼ åˆ°äº‘æœåŠ¡å™¨åå°å­˜å‚¨è·¯å¾„ä¸­è¦†ç›–ä¸€éï¼ŒæŠŠæ²¡æœ‰çš„å›¾ç‰‡ç»™æ·»åŠ ä¸Š\nunzip -o ~/docker/img.zip -d ~/docker/lsky/storage/app/uploads/23/02\n\nä¸Šä¼ ä¹‹å‰ï¼Œå…ˆè·å–token\ndef lsky():    url = &quot;æœåŠ¡å™¨åœ°å€/api/v1/tokens&quot;    params = &#123;        &#x27;email&#x27;:&#x27;è´¦æˆ·é‚®ç®±&#x27;,        &#x27;password&#x27;:&#x27;å¯†ç &#x27;    &#125;    res = requests.post(url,  params=params)  # è¯·æ±‚api    return res.json()\n\nç»“æœå¦‚ä¸‹\n&#123;&#x27;status&#x27;: True, &#x27;message&#x27;: &#x27;success&#x27;, &#x27;data&#x27;: &#123;&#x27;token&#x27;: &#x27;è¿™é‡Œä¼šè¿”å›token&#x27;&#125;&#125;\n\néšåæ˜¯ä¸Šä¼ çš„ä»£ç ï¼Œæ³¨æ„å…°ç©ºå¿…é¡»è¦ç”¨open &#39;rb&#39;é‡æ–°æ‰“å¼€ä¸€è¾¹å›¾ç‰‡ï¼Œæ‰€ä»¥å‚æ•°ç»™img_pathä¹Ÿå°±æ˜¯å›¾ç‰‡çš„è·¯å¾„å³å¯\n# å…°ç©ºå›¾åºŠdef lsky_upload(img_path:str):    url = &quot;ä½ çš„å…°ç©ºå›¾åºŠæœåŠ¡å™¨/api/v1/upload&quot;    header = &#123;        &quot;Authorization&quot;: &quot;Bearer ä½ çš„å…°ç©ºtoken&quot;,        &quot;Accept&quot;: &quot;application/json&quot;    &#125;    img = open(img_path, &#x27;rb&#x27;)    params = &#123;&#x27;strategy_id&#x27;: 1&#125;    myfiles = &#123;&#x27;file&#x27;: img&#125;    res = requests.post(url, headers=header, params=params,                        files=myfiles)  # è¯·æ±‚api    return res.json()\n\nåœ¨download_picsçš„æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œå¹¶å¯¹å…°ç©ºå›¾åºŠçš„è¿”å›å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸Šä¼ é”™è¯¯ï¼ŒåŒæ ·æ·»åŠ åˆ°é”™è¯¯å›¾ç‰‡ä¸­ï¼\n# ä¸Šä¼ lskyres = lsky_upload(img_path=f&quot;&#123;targer_dir&#125;/&#123;filename&#125;&quot;)print(res)if not res[&#x27;status&#x27;]:    global err_img    if MDfilename not in err_img:        err_img[MDfilename]=[]         err_img[MDfilename].append(url)    print(&quot;å…°ç©ºä¸Šä¼ é”™è¯¯ï¼&quot;,url)    time.sleep(1)\n\nä¸Šä¼ æˆåŠŸçš„è¿”å›å€¼statusæ˜¯True\n3.å¼€å§‹è‡ªåŠ¨åŒ–ä¸Šä¼ å°†ä¸Šé¢çš„bugä¿®æ”¹å¥½äº†ä¹‹åï¼Œå°±å¯ä»¥æ­£å¼è¿è¡Œï¼Œåœ¨ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°çš„åŒæ—¶ï¼Œä¸Šä¼ åˆ°å…°ç©ºå›¾åºŠäº†ï¼\n\nå›¾ç‰‡ä¹Ÿéƒ½æˆåŠŸä¿å­˜åˆ°æœ¬åœ°äº†\n\nä¸Šä¼ å®Œæ¯•ä¹‹åï¼Œä¹Ÿèƒ½åœ¨erré‡Œé¢çœ‹åˆ°é”™è¯¯çš„å›¾ç‰‡è·¯å¾„ï¼Œä»¥ä¾¿é‡æ–°å¤„ç†ã€‚\nå¯ä»¥çœ‹åˆ°è¿™é‡Œé¢æœ‰ä¸€éƒ¨åˆ†æ˜¯giteeå’Œcsdnçš„é“¾æ¥ï¼Œè¿™äº›å›¾ç‰‡æœ‰é˜²ç›—é“¾ï¼Œè€Œä¸”å›¾ç‰‡å°¾éƒ¨æ·»åŠ äº†å…¶ä»–å­—æ®µï¼Œå¯¼è‡´lskyæ²¡æœ‰åŠæ³•å°†å…¶è¯†åˆ«ä¸ºå›¾ç‰‡ï¼ˆå´å°‘å›¾ç‰‡æ ¼å¼åç¼€ï¼‰\nä¸è¿‡æˆ‘çš„ç›®æ ‡æ˜¯å°†é˜¿é‡Œäº‘OSSçš„å›¾ç‰‡è½¬åˆ°lskyï¼Œè¿™äº›æœ¬æ¥å°±ä¸æ˜¯é˜¿é‡Œäº‘OSSçš„å›¾ç‰‡å’Œæˆ‘çš„ç›®çš„æ— å…³ï¼\n\nåšå®Œè¿™ä¸€åˆ‡ï¼Œæœ€è®©æˆ‘æ„Ÿæ…¨çš„æ˜¯ï¼Œæˆ‘çš„é˜¿é‡Œäº‘ossé‡Œé¢æœ‰1gçš„å›¾ç‰‡ï¼Œå®é™…ç”¨çš„å´åªæœ‰ä¸‹é¢è¿™ä¸€ä¸¢ä¸¢ï¼›å…¶ä»–ä¼°è®¡éƒ½æ˜¯é‡å¤ä¸Šä¼ çš„\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","å›¾åºŠ"]},{"title":"ã€Linuxã€‘æƒé™ç®¡ç†","url":"/posts/3787294814/","content":"Linuxéƒ¨åˆ†çš„å†…å®¹ï¼Œæˆ‘ä»¥æƒé™ç®¡ç†ä½œä¸ºèµ·å§‹ã€‚\n\n\nå…³äºLinuxå‘½ä»¤è¡Œæ“ä½œçš„éƒ¨åˆ†ï¼Œå¤§å®¶å¯ä»¥å»ç½‘ä¸Šæœæœï¼Œæ•™ç¨‹å¾ˆå¤šï¼Œä¸”å…¨é¢ï¼šã€é“¾æ¥ã€‘ã€‚è¿™é‡Œæˆ‘å°±ä¸å†æŠŠç›¸åŒçš„ä¸œè¥¿å¤è¿°ä¸€éäº†ï¼Œæ¯•ç«ŸLinuxå‘½ä»¤è¿™ç§ä¸œè¥¿ï¼Œä½ ä¸ä¼šçš„æ—¶å€™å¯ä»¥å»æŸ¥ï¼Œå¸¸è§çš„å‘½ä»¤æ•²å¤šäº†è‚¯å®šå¿˜ä¸æ‰\nä¸å¤šè¯´ï¼Œå¼€å§‹Linuxæƒé™æ“ä½œçš„å†…å®¹å§ï¼\n\næœ¬ç¯‡åšå®¢æ‰€æœ‰æ¼”ç¤ºå‡åœ¨CentOS7.6ä¸‹è¿›è¡Œ\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯æƒé™ï¼Ÿæƒé™æ˜¯ç”¨äºå¯¹ç”¨æˆ·è¿›è¡Œçº¦æŸçš„ã€‚æ­£å¥½æ¯”è§†é¢‘ç½‘ç«™çš„vipä¸€æ ·ï¼Œæ²¡æœ‰vipæƒé™ï¼Œä½ å°±çœ‹ä¸åˆ°åªæœ‰vipæ‰èƒ½è§‚çœ‹çš„å½±ç‰‡ã€‚\n1.1 rootå’Œuseråœ¨linuxä¸­ï¼Œç”¨æˆ·åˆ†ä¸ºä¸¤ç§\n\nrootï¼šè¶…çº§ç”¨æˆ·\nå…¶ä»–ï¼šæ™®é€šç”¨æˆ·\n\nå…¶ä¸­rootç”¨æˆ·çš„æƒé™æœ€é«˜ï¼Œå¯ä»¥åœ¨ç³»ç»Ÿé‡Œé¢ä¸ºæ‰€æ¬²ä¸ºã€‚å…¶æ‰€ä½œæ“ä½œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå½±å“ç”¨æˆ·çš„ä½¿ç”¨ç¯å¢ƒã€‚æ¯”å¦‚ä½ åœ¨rooté‡Œé¢å®‰è£…äº†æŸä¸ªç¨‹åºï¼Œé‚£ä¹ˆæ‰€æœ‰å­ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªç¨‹åºï¼Œåä¹‹ä¸è¡Œã€‚\nåœ¨rootç”¨æˆ·ä¸­ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡su userè¿™ä¸ªå‘½ä»¤åˆ‡æ¢åˆ°ä»»ä½•å­ç”¨æˆ·è€Œä¸ç”¨è¾“å…¥å¯†ç ã€‚ä½†æ˜¯ä»å­ç”¨æˆ·åˆ‡æ¢åˆ°rootåˆ™éœ€è¦è¾“å…¥rootç”¨æˆ·çš„å¯†ç ã€‚æ‰€ä»¥ï¼Œä¿è¯ä½ çš„rootç”¨æˆ·å¯†ç ä¸è¢«ä»–äººçŸ¥é“æ˜¯å¾ˆé‡è¦çš„ï¼\n\n2.æƒé™ç®¡ç†æœ¬ç¯‡åšå®¢ä¸»è¦å…³æ³¨Linuxä¸­çš„æ–‡ä»¶æƒé™\n2.1 æ–‡ä»¶è®¿é—®è€…åœ¨Linuxä¸­ï¼Œæ–‡ä»¶è®¿é—®è€…åˆ†3ç±»ï¼Œå¯¹äºæ–‡ä»¶çš„æƒé™ä¹Ÿåˆ†3ç±»\n\n\n\nè®¿é—®è€…\næ–‡ä»¶æƒé™\n\n\n\næ‹¥æœ‰è€… owner\nr è¯»\n\n\næ‰€å±ç»„ grouper\nw å†™\n\n\nå…¶ä»–ç”¨æˆ· other\nx æ‰§è¡Œ\n\n\næˆ‘ä»¬è¦æ€ä¹ˆçœ‹ä¸€ä¸ªæ–‡ä»¶å¯¹äºè¿™ä¸‰ä½ä¸åŒçš„è®¿é—®è€…çš„æƒé™æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\nä½¿ç”¨llæˆ–è€…ls -lå‘½ä»¤å³å¯çœ‹åˆ°åŒºåˆ«\n\nè¿™é‡Œæ–‡ä»¶çš„å‰ç¼€ï¼Œå³æ ‡è¯†äº†ä¸€ä¸ªæ–‡ä»¶çš„å¯¹äº3ä¸ªè§’è‰²çš„æƒé™ã€‚\nå…¶ä¸­muxueæ˜¯æ–‡ä»¶çš„æ‹¥æœ‰è€…ï¼Œrootä»£è¡¨æ‰€å±ç»„ã€‚\n2.1.1 linuxçš„ç»„è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œåœ¨æˆ‘ä¹‹å‰çš„è…¾è®¯äº‘å¤šäººä¸€æœºçš„åšå®¢ä¸­ï¼Œæ˜¯ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åˆ›å»ºå­ç”¨æˆ·çš„ğŸ‘‡\n\nè¿™é‡Œå°±æŠŠå­ç”¨æˆ·åˆ†åˆ°äº†rootç»„ä¸‹é¢ï¼Œä½œç”¨æ˜¯è®©å­ç”¨æˆ·å¯ä»¥é€šè¿‡suè·å¾—rootæƒé™\nå¦‚æœä½ åœ¨åˆ›å»ºç”¨æˆ·çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šç»„çš„è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¸ç”¨æˆ·ååŒåçš„ç»„ã€‚\n\nç»„æœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n\nå½“åœ¨ä¸€ä¸ªå…¬å¸ä¸­ï¼Œå¤šäººä½¿ç”¨åŒä¸€å°æœåŠ¡å™¨è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œå°±éœ€è¦é€šè¿‡ç»„æ¥å¯¹å­ç”¨æˆ·è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç±»ã€‚å³Aç»„ä¸­å…¶ä»–ç”¨æˆ·ï¼ˆgrouperï¼‰å¯ä»¥æŸ¥çœ‹åˆ°å­ç”¨æˆ·A1çš„ä»£ç ï¼Œä½†æ˜¯Bç»„çš„ç”¨æˆ·ï¼ˆotherï¼‰éƒ½çœ‹ä¸åˆ°Aç»„å†…çš„ä¸œè¥¿ã€‚\nè¿™æ ·å°±èƒ½å®ç°å¤šä¸ªå°ç»„å¼€å‘ä¸åŒçš„æ¿å—ï¼Œè€Œäº’ä¸å¹²æ‰°ã€‚\n\n2.1.2 å­¦ä¼šçœ‹æ–‡ä»¶å‰ç¼€è¯´å›æ­£é¢˜ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆçœ‹ä¸€ä¸ªæ–‡ä»¶å¤¹&#x2F;æ–‡ä»¶çš„å‰ç¼€å‘¢ï¼Ÿ\ndrwxr-xr-x 5 muxue root    4096 7æœˆ   3 11:56 code-rw-r--r-- 1 muxue root 1908226 2æœˆ  23 2021 get-pip.pydrwxr-xr-x 7 muxue root    4096 6æœˆ  26 08:10 GIT\n\n\nå…³äºç¬¬ä¸€åˆ—çš„æ–‡ä»¶ç±»å‹ï¼Œæœ‰ä¸‹é¢å‡ ç§\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ–‡ä»¶æƒé™çš„æŸ¥çœ‹æ–¹å¼ï¼Œè¦å¦‚ä½•ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„ç‰¹å®šæƒé™å‘¢ï¼Ÿ\n2.2 chmodä¿®æ”¹æƒé™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨chmodå‘½ä»¤æ¥ä¿®æ”¹æ–‡ä»¶æƒé™\nchmod u-r test.txt\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œç»™æ‹¥æœ‰è€…å»æ‰test.txtæ–‡ä»¶çš„ræƒé™ã€‚å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤æŠŠæƒé™åŠ å›å»\nchmod u+r test.txt\n\nåŒç†ï¼Œå¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€å±ç»„å’Œå…¶ä»–äººçš„æƒé™çš„è¯ï¼ŒæŒ‡å®šgå’Œoå³å¯\nchmod g-r test.txt //å»æ‰æ‰€å±ç»„çš„ræƒé™chmod o-rwx test.txt //å»æ‰å…¶ä»–ç”¨æˆ·çš„æ‰€æœ‰æƒé™\n\né™¤äº†ä¸Šé¢è¿™ç§ä¾æ¬¡ä¿®æ”¹çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨é€—å·éš”å¼€ï¼Œç”¨ä¸€æ¡å‘½ä»¤æå®š\nchmod u+rwx,g+rwx,o-rwx test.txt //ç»™æ‹¥æœ‰è€…ï¼Œæ‰€å±ç»„åŠ ä¸Šæ‰€æœ‰æƒé™ã€‚å»æ‰otherçš„æ‰€æœ‰æƒé™\n\nå¦‚æœä½ æƒ³æ‰¹é‡ä¿®æ”¹æˆåŒä¸€ä¸ªæƒé™ï¼Œè¿˜å¯ä»¥ä½¿ç”¨aæ¥æŒ‡å®šall\nchmod a=rw test.txt\n\n\n2.2.1 ä»¥å…«è¿›åˆ¶ä¿®æ”¹æ–‡ä»¶æƒé™é™¤äº†ä¸Šé¢è¿™ä¸ª+å’Œ-æ¯”è¾ƒå¥½è¾©è®¤çš„æ–¹å¼ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡â€œå…«è¿›åˆ¶â€çš„æ–¹å¼æ¥ä¿®æ”¹æ–‡ä»¶æƒé™ã€‚\nå¯¹äºä¸€ä¸ªç”¨æˆ·æ¥è¯´ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™rwxï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒä¸äºŒè¿›åˆ¶è¿›è¡Œå¯¹åº”ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„ç»“æœ\nrwx111äºŒè¿›åˆ¶å¯¹åº”7\n\næ³¨æ„ï¼Œè¿™é‡Œçš„å…«è¿›åˆ¶å¹¶ä¸æ˜¯è¦é€šè¿‡å…«è¿›åˆ¶æ¥è¯»å†™æƒé™çš„ç¼–ç ï¼Œè€Œæ˜¯ç”¨äºŒè¿›åˆ¶æ¥è¯»å–åï¼Œå¯å¾—åˆ°æœ€é«˜æƒé™7ï¼ˆä¸ä¼šè¶…è¿‡7ï¼Œæ‰€ä»¥æ˜¯å…«è¿›åˆ¶ï¼‰\näº†è§£ä¸Šé¢è¿™ä¸ªæ–¹å¼åï¼Œä½ ä¾¿å¯ä»¥å†™å‡ºæ‰€æœ‰æƒé™ç±»å‹å¯¹åº”çš„ç¼–å·\n\n\n\næƒé™\näºŒè¿›åˆ¶\nå¯¹åº”ç¼–å·\n\n\n\nrwx\n111\n7\n\n\nrw-\n110\n6\n\n\nr-x\n101\n5\n\n\nrâ€“\n100\n4\n\n\n-w-\n010\n2\n\n\n-wx\n011\n3\n\n\nâ€“x\n001\n1\n\n\nå½“æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶çš„æƒé™çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç”¨a=è¿™ç§ç›¸å¯¹å¤æ¿çš„æ–¹å¼ã€‚è€Œå¯ä»¥é€šè¿‡ç¼–ç æ¥ç›´æ¥æŒ‡å®š3ç±»ç”¨æˆ·çš„ä¸åŒæƒé™\nchmod 777 test.txt //ç»™æ‰€æœ‰ç”¨æˆ·ä¸ºrwxæƒé™chmod 664 test.txt //ç»™uå’Œgç”¨æˆ·ä¸ºrw-ï¼Œoç”¨æˆ·ä¸ºr--//â€¦â€¦\n\n2.3 rwxæƒé™åŒºåˆ«ä¿®æ”¹å®Œè¿™äº›æ–‡ä»¶åæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å’Œä¸€ä¸ªå¸¸è§„æ–‡ä»¶æ—¶ï¼Œä½œä¸ºæ‹¥æœ‰è€…ï¼Œé»˜è®¤æœ‰æ–‡ä»¶å¤¹çš„æ‰€æœ‰æƒé™å’Œæ–‡æœ¬æ–‡ä»¶çš„rwæƒé™ã€‚\n\n2.3.1 å¸¸è§„æ–‡ä»¶å…ˆæ¥çœ‹çœ‹test.cçš„å„ç§æƒé™æœ‰ä»€ä¹ˆä¸åŒå§ï¼\næˆ‘ä»¬å¯ä»¥é€šè¿‡catè¯»å–test.cæ–‡ä»¶çš„å†…å®¹ï¼Œè¿™ä¾¿æ˜¯è¯»æƒé™r\n\nè€Œé€šè¿‡vimã€nanoç­‰ç¼–è¾‘å™¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯å†™æƒé™w\nå¦‚æœæˆ‘ä»¬å»æ‰rå’Œwæƒé™ï¼Œå°±æ— æ³•è¯»ï¼Œä¹Ÿæ— æ³•å†™\n\nä½¿ç”¨nanoæ‰“å¼€test.cæ–‡ä»¶ï¼Œä¼šæœ‰ä»¥ä¸‹æŠ¥é”™\n\né‚£ä¹ˆå¯¹äºä¸€ä¸ªå¸¸è§„æ–‡ä»¶è€Œè¨€ï¼Œxæƒé™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\næˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨gccç­‰ç¼–è¯‘å™¨ç¼–è¯‘ä»£ç æ–‡ä»¶æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªa.outå¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™é‡Œçš„xä¾¿æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„æ ‡è¯†ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯ç”¨ç»¿è‰²æ ‡æ˜å‡ºæ¥äº†ã€‚\n\nå¦‚æœæˆ‘ä»¬ç»™test.cä¹ŸåŠ ä¸Šxæƒé™ï¼Œåˆ™å®ƒä¹Ÿä¼šå˜æˆç»¿è‰²ï¼Œå¯ä»¥ç›´æ¥ç”¨./test.cæ¥æ‰§è¡Œã€‚å½“ç„¶ï¼Œç›´æ¥æ‰§è¡Œä¸€ä¸ª.cæ–‡ä»¶æ˜¯æ²¡æœ‰æ„ä¹‰çš„\n\n2.3.2 æ–‡ä»¶å¤¹ï¼ˆç›®å½•ï¼‰\nåœ¨Linuxä¸‹ï¼Œä¸€åˆ‡çš†æ–‡ä»¶ã€‚æˆ‘ä»¬æ‰€è¯´çš„ç›®å½•ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶\næ–‡ä»¶=å†…å®¹+å±æ€§\nåœ¨ç›®å½•ä¸­ä¿å­˜çš„æ˜¯æ–‡ä»¶çš„å±æ€§ï¼ˆåŒ…æ‹¬æ–‡ä»¶åï¼‰æˆ‘ä»¬æƒ³è®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼Œé¦–å…ˆè¦é€šè¿‡è·¯å¾„å»æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚\n\né‚£ä¹ˆå¯¹äºä¸€ä¸ªæ–‡ä»¶å¤¹è€Œè¨€ï¼Œrwxæƒé™åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå½“æˆ‘ä»¬ä½¿ç”¨lsçš„æ—¶å€™ï¼Œå…¶å®æ˜¯å¯ä»¥æŒ‡å®šè·¯å¾„çš„ï¼Œé»˜è®¤ä¸º.ï¼ˆå½“å‰è·¯å¾„ï¼‰\nå¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨æ˜¾ç¤ºå‡ºäº†Mytestä¸­çš„my.txtæ–‡ä»¶ã€‚\nå¦‚æœæˆ‘ä»¬å»æ‰æ–‡ä»¶å¤¹çš„ræƒé™ï¼Œåœ¨æ‰§è¡Œlsã€‚å°±ä¼šæŠ¥é”™æƒé™ä¸å¤Ÿ\n\nå¾—å‡ºç»“è®ºï¼ŒlsæŸ¥çœ‹æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œéœ€è¦æ‹¥æœ‰æ–‡ä»¶å¤¹çš„ræƒé™ã€‚å³ä¾¿ä½ è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚æœæ²¡æœ‰ræƒé™ï¼Œä¾æ—§æ— æ³•ç”¨lsæ˜¾ç¤ºæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ã€‚\nä½†æ˜¯è¿™æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ‹¥æœ‰æ–‡ä»¶å¤¹çš„wæƒé™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…¶ä»–æ–‡ä»¶æ‹·è´åˆ°Mytestæ–‡ä»¶å¤¹ä¸­\n\næŠŠræƒé™åŠ å›æ¥ï¼Œå¯ä»¥çœ‹åˆ°test.cæ–‡ä»¶å·²ç»è¢«æ‹·è´è¿›å»äº†\n\nè¿™ä¾¿æ˜¯wæƒé™çš„ä½œç”¨ï¼Œä¿®æ”¹æ–‡ä»¶å¤¹ä¸­é—´çš„å†…å®¹ã€‚æ¯”å¦‚æ‹·è´å¦å¤–ä¸€ä¸ªæ–‡ä»¶åˆ°æ–‡ä»¶å¤¹ä¸­\n\nå»æ‰wæƒé™åï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•åˆ é™¤æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹\n\næœ€åï¼Œå¯¹äºæ–‡ä»¶å¤¹è€Œè¨€ï¼Œxæƒé™ä»£è¡¨çš„æ˜¯èƒ½å¦cdè¿›å…¥è¯¥æ–‡ä»¶å¤¹\n\n\næ­¤æ—¶è™½ç„¶æˆ‘ä»¬æ— æ³•cdè¿›å…¥ï¼Œä½†æˆ‘ä»¬æ‹¥æœ‰rwæƒé™ï¼Œå¯ä»¥ç›´æ¥ä»å¤–éƒ¨ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼Œå¹¶è¿›è¡Œè®¿é—®å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯nopeï¼ä¸å¯ä»¥\n\nå› ä¸ºåœ¨Linuxä¸­ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½è¦é€šè¿‡è·¯å¾„æ¥è¿›è¡Œã€‚è·¯å¾„ä¹Ÿæ˜¯è®¿é—®æ–‡ä»¶å¤¹çš„ä¸€ä¸ªæ–¹å¼ï¼ˆéœ€è¦xæƒé™ï¼‰æ­¤æ—¶å› ä¸ºæ— æ³•cdè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡è·¯å¾„è®¿é—®è¿™ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹ã€‚æ‰€ä»¥æ²¡äº†xæƒé™ä¹‹åå•¥äº‹éƒ½å¹²ä¸äº†\nå½“æˆ‘ä»¬æŠŠxæƒé™åŠ å›æ¥ä¹‹åï¼Œå°±å¯ä»¥è¿™ä¹ˆåšäº†\n\n\nå¦‚æœå¯¹äºç›®å½•åªæ²¡æœ‰ræƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œå¯åˆ›å»ºæ–‡ä»¶å¹¶å†™å…¥å†…å®¹ï¼Œä½†ä¸å¯è¯»å–å…¶ä¸­å†…å®¹\nå¦‚æœå¯¹äºç›®å½•åªæ²¡æœ‰wæƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œå…è®¸åœ¨ç›®å½•ä¸‹lsæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ï¼Œä½†ä¸å¯ä»¥ä¿®æ”¹é‡Œé¢çš„æ–‡ä»¶\nå¦‚æœç›®å½•æ²¡æœ‰rwæƒé™ï¼Œå…è®¸è¿›å…¥ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ä¹Ÿä¸èƒ½æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶å†…å®¹\nå¦‚æœæ²¡æœ‰xæƒé™ï¼Œæ— æ³•è¿›å…¥ï¼Œä¹Ÿæ— æ³•ä¿®æ”¹&#x2F;æŸ¥çœ‹å…¶ä¸­å†…å®¹\n\nå…³äºæœ€åä¸€ç‚¹ï¼Œä¸åŒç³»ç»Ÿçš„å®ç°å¯èƒ½ä¸ä¸€æ ·ã€‚æˆ‘çš„ç³»ç»Ÿæ˜¯CentOS7.6ï¼Œè¯·ä»¥ä½ çš„å®é™…æƒ…å†µä¸ºå‡†ï¼\n\n2.4 chown&#x2F;chgrp2.4.1 chownä¿®æ”¹æ‹¥æœ‰è€…æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡ä»¤ï¼ŒæŠŠä¸€ä¸ªæ–‡ä»¶çš„æ‹¥æœ‰è€…ä¿®æ”¹ä¸ºæŒ‡å®šç”¨æˆ·\nchown [å‚æ•°] ç”¨æˆ·å æ–‡ä»¶å\n\næ³¨æ„ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿæ˜¯ä¸å…è®¸ä½ ä¿®æ”¹æ–‡ä»¶çš„æ‹¥æœ‰è€…çš„ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¯­å¥å‰é¢åŠ sudoçš„æ–¹å¼ï¼ŒçŸ­æš‚è·å–rootæƒé™ï¼Œå¯¹æ–‡ä»¶æ‹¥æœ‰è€…è¿›è¡Œä¿®æ”¹\n\nè¿™é‡Œå¦‚æœæç¤ºä¸åœ¨sudoer flisé‡Œé¢ï¼Œå¯ä»¥å‚è€ƒåšå®¢é‡Œé¢ç¬¬å…«ç‚¹çš„è§£å†³æ–¹æ¡ˆ\n\n\næ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä¿®æ”¹ä¸ºäº†rootç”¨æˆ·ï¼Œrootç”¨æˆ·æ‹¥æœ‰æœ€é«˜æƒé™ï¼å³ä¾¿è¿™æ˜¯å­ç”¨æˆ·çš„æ–‡ä»¶ï¼Œrootç”¨æˆ·ä¹Ÿå¯ä»¥ä¸ºæ‰€æ¬²ä¸ºè¿›è¡Œä¿®æ”¹å’Œåˆ é™¤ï¼Œä¸å—ä»»ä½•æƒé™çš„çº¦æŸã€‚\nå¦‚æœæˆ‘ä»¬æŠŠç”¨æˆ·æ”¹æˆå…¶ä»–å­ç”¨æˆ·ï¼Œå…¶å®è¿™ä¸ªå­ç”¨æˆ·ä¾æ—§è®¿é—®ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚\n\nè¿™å°±å¥½æ¯”ä½ å‘Šè¯‰ä½ çš„æœ‹å‹ï¼Œæˆ‘è¦é€ä½ ä¸€ä¸ªé”®ç›˜ã€‚è¿™ä¸ªé”®ç›˜çš„æ‹¥æœ‰è€…å³å°†å˜æˆä½ çš„æœ‹å‹ã€‚ä½†æ˜¯ä½ æ²¡æœ‰æŠŠé”®ç›˜ç»™ä½ æœ‹å‹ï¼Œé”®ç›˜è¿˜åœ¨ä½ å®¶é‡Œï¼Œä½ çš„æœ‹å‹ä¾æ—§ç”¨ä¸äº†è¿™ä¸ªé”®ç›˜ã€‚\n\næ¢åˆ°Linuxç¯å¢ƒä¸­ï¼Œå°±æ˜¯åœ¨Açš„ç”¨æˆ·è·¯å¾„ä¸‹æœ‰ä¸€ä¸ªBç”¨æˆ·çš„æ–‡ä»¶ã€‚ä½†ç”±äºBç”¨æˆ·æ— æ³•è®¿é—®Açš„ç”¨æˆ·è·¯å¾„ï¼Œæ‰€ä»¥ä¾æ—§æ— æ³•è®¿é—®åˆ°è¿™ä¸ªâ€œå±äºBçš„æ–‡ä»¶â€\n2.4.2 chgrpä¿®æ”¹æ‰€å±ç»„chgrp [å‚æ•°] ç”¨æˆ·å æ–‡ä»¶å\n\nè¿™é‡Œå› ä¸ºæˆ‘çš„ç¯å¢ƒé‡Œé¢æ²¡æœ‰å…¶ä»–ç»„ï¼Œæ‰€ä»¥å°±ä¸æ¼”ç¤ºè¯¥åŠŸèƒ½çš„æˆæœäº†\n\n\n2.5 å…³äºé»˜è®¤æƒé™Linuxä¸­æœ‰ä¸€ä¸ªé»˜è®¤æƒé™ï¼š\n\né»˜è®¤ç›®å½•æƒé™777\né»˜è®¤å¸¸è§„æ–‡ä»¶666\n\nå¯ä¸ºä»€ä¹ˆæˆ‘åˆ›å»ºçš„ç›®å½•æ–‡ä»¶çš„æƒé™æ˜¯755ï¼Œè€Œå¸¸è§„æ–‡ä»¶çš„æƒé™æ˜¯644å‘¢ï¼Ÿ\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨umaskå‘½ä»¤æŸ¥çœ‹æƒé™æ©ç \n\nè¿™ä¸ªæƒé™æ©ç æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ\næŠ›å¼ƒé¦–ä½ä¸çœ‹ï¼Œåé¢çš„æ˜¯022ã€‚æ ¹æ®2.2.1ä¸­æåˆ°çš„å…«è¿›åˆ¶æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è§£è¯»å‡ºè¿™ä¸ªæƒé™ä¸º\n--- -w- -w-\n\næƒé™æ©ç çš„ä½œç”¨å°±æ˜¯ï¼Œåœ¨æƒé™æ©ç ä¸­å‡ºç°çš„æƒé™ï¼Œåœ¨å®é™…åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™ä¸ä¼šå‡ºç°ï¼\nä»”ç»†è§‚å¯Ÿä½ å°±å¯ä»¥å‘ç°ï¼Œè¿™é‡Œæˆ‘çš„æ–‡ä»¶å¤¹æƒé™å¦‚ä¸‹ï¼Œæ­£å¥½å’Œæ©ç ç›¸åï¼\nrwx rwx rwx //é»˜è®¤æƒé™777--- -w- -w- //æ©ç 022rwx r-x r-x //å®é™…åˆ›å»º755\n\nè€Œå¸¸è§„æ–‡ä»¶çš„é»˜è®¤æƒé™666æ˜¯rw-rw-rw-ï¼Œå®é™…åˆ›å»ºçš„ç»“æœä¹Ÿå’Œæ©ç ç›¸åï¼\nrw- rw- rw- //é»˜è®¤æƒé™666--- -w- -w- //æ©ç 022rw- r-- r-- //å®é™…æƒé™644\n\nå¦‚ä½•è®¡ç®—ï¼Ÿè¿™é‡Œçš„æƒé™å¹¶ä¸æ˜¯ç®€å•çš„ç›¸å‡å¾—å‡ºæ¥çš„ï¼Œå…¶æ˜¯é€šè¿‡é»˜è®¤æƒé™&amp;(~umask)å¾—å‡ºçš„\n\nå…ˆå¯¹é»˜è®¤æƒé™çš„umaskè¿›è¡ŒæŒ‰ä½å–å\nå†å°†å–ååçš„ç»“æœå’Œé»˜è®¤æƒé™ï¼ˆç›®å½•777ï¼Œå¸¸è§„æ–‡ä»¶666ï¼‰æŒ‰ä½ä¸å¾—å‡º\n\n2.5 fileå‘½ä»¤é™¤äº†ç”¨æ–‡ä»¶å±æ€§çš„ç¬¬ä¸€ä½æ¥æŸ¥çœ‹æˆ‘ä»¬æ–‡ä»¶çš„å±æ€§ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨fileå‘½ä»¤æ¥æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„æ–‡ä»¶å±æ€§\n\nå½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªCè¯­è¨€æ–‡ä»¶ï¼Œå¹¶å¯¹ä»–è¿›è¡Œç¼–è¯‘åï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªCçš„æºæ–‡ä»¶å’Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶\n\nå¸¸ç”¨é€‰é¡¹å¦‚ä¸‹\n-c è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ï¼Œä¾¿äºæ’é”™æˆ–åˆ†æç¨‹åºæ‰§è¡Œçš„æƒ…å½¢-z å°è¯•å»è§£è¯»å‹ç¼©æ–‡ä»¶çš„å†…å®¹\n\n2.6 ç²˜æ»ä½ç®€å•ä»‹ç»ï¼Œç²˜æ»ä½å°±ç›¸å½“äºç»™ä¸€ä¸ªç›®å½•ä¸Šäº†èƒ¶æ°´ï¼Œå…¶ä»–äººæ— æ³•åˆ é™¤è¢«é»ä½çš„ç›®å½•ï¼ˆå’Œç›®å½•ä¸‹çš„æ–‡ä»¶ï¼‰ï¼\nchmod +t test\n\nå‰é¢æåˆ°äº†ï¼Œä½œä¸ºotherï¼Œä½ å¯ä»¥å»è®¿é—®åˆ«äººçš„ç›®å½•ï¼ˆåªè¦otheræœ‰å¯¹åº”çš„æƒé™ï¼‰\næ¯”å¦‚è¿™é‡Œæˆ‘ç”¨\tmuxueç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªtest1.cæ–‡ä»¶ï¼Œå¦å¤–ä¸€ä¸ªç”¨æˆ·å¯ä»¥è¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½å†™å…¥\n\nvimæ‰“å¼€è¯¥æ–‡ä»¶ä¼šæŠ¥é”™\n\nä½†è¿™é‡Œæœ‰ä¸€ä¸ªbugå°±æ˜¯ï¼Œå³ä¾¿ä½ æ²¡æœ‰é‚£ä¸ªç›®å½•å†…æ–‡ä»¶çš„æƒé™ï¼Œä½ ä¾æ—§å¯ä»¥åˆ é™¤è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼\n\nç²˜æ»ä½çš„å­˜åœ¨å°±æ˜¯ä¿æŠ¤æ•´ä¸ªç›®å½•ï¼Œä¸å…è®¸è¢«å…¶ä»–ç”¨æˆ·åˆ é™¤ï¼\n\næ·»åŠ ç²˜æ»ä½åï¼Œå¯ä»¥çœ‹åˆ°åœ¨Otherçš„æƒé™å¤„å‡ºç°äº†ä¸€ä¸ªå¤§å†™çš„T\nè¿™æ—¶å€™æˆ‘ä»¬å†å°è¯•ç”¨å¦å¤–ä¸€ä¸ªè´¦æˆ·åˆ é™¤ï¼Œå°±ä¼šæŠ¥é”™â€”â€”å—ï¼Ÿ\n\nä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„é”™è¯¯ç¤ºèŒƒï¼Œç²˜æ»ä½ä¿æŠ¤åªèƒ½åœ¨rootä¸‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸”ç²˜æ»ä½åªèƒ½ç»™ç›®å½•ä¸Šï¼Œå¹¶ä¸èƒ½å•ç‹¬ç»™ä¸€ä¸ªæ–‡ä»¶ä¸Šï¼\n\nç»™ç›®å½•ä¸Šäº†ç²˜æ»ä½åï¼Œå†å°è¯•åˆ é™¤ï¼Œç³»ç»Ÿä¼šæŠ¥è­¦å‘Š\n\nè¢«ä¿æŠ¤åçš„ç›®å½•ï¼Œè¯¥ç›®å½•å’Œç›®å½•ä¸‹çš„æ–‡ä»¶åªèƒ½è¢«ä¸‹é¢çš„ç”¨æˆ·åˆ é™¤ï¼š\n\nè¶…çº§ç”¨æˆ·root\nç›®å½•çš„æ‰€æœ‰è€…\nè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…\n\nå…³äºæœ€åä¸€ç‚¹ï¼Œè™½ç„¶ç²˜æ»ä½ä¿æŠ¤äº†ç›®å½•ä¸‹çš„å…¶ä»–äººçš„æ–‡ä»¶ä¸èƒ½è¢«ä½ åˆ é™¤ã€‚ä½†è¿™ä¸å½±å“ä½ åœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»º&#x2F;å†™å…¥&#x2F;åˆ é™¤ä½ è‡ªå·±çš„æ–‡ä»¶\n\nç»“è¯­å…³äºlinuxæƒé™ç®¡ç†åˆ°è¿™å°±ç»“æŸå•¦ï¼\nlinuxæ“ä½œåœ¨æœªæ¥æ‰¾å·¥ä½œçš„æ—¶å€™éå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å­¦ä¹ çš„æ—¶å€™å’Œå…¶ä»–ç«¥é‹æ‹‰å¼€å·®è·çš„ä¸€ç¯ã€‚\n\nå› ä¸ºå¾ˆå¤šäººå¯èƒ½ä¸Šå®Œæœ¬ç§‘4å¹´éƒ½ä¸çŸ¥é“ä¼ä¸šæ‹›è˜çš„æ—¶å€™ä¼šè€ƒlinuxæ“ä½œğŸ˜¥\n\næœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼çœ‹åˆ°äº†å°±ä¼šå›å¤çš„\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Pythonã€‘valorantå›½æœå’Œæ¸¯æœæ–‡ä»¶å·®è·","url":"/posts/87392930/","content":"ç¼˜èµ·ä»Šå¤©æ•´ç†æœ¬åœ°æ–‡ä»¶çš„æ—¶å€™çªç„¶æœ‰ç‚¹å¥½å¥‡ï¼Œvalorantå›½æœå’Œæ¸¯æœçš„æ–‡ä»¶æ˜¯å¦ä¼šæœ‰å¤§é‡ç›¸åŒçš„æ–‡ä»¶ï¼Ÿ\nå¦‚æœæœ‰å¾ˆå¤šç›¸åŒçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨windowsæ–‡ä»¶ç³»ç»Ÿçš„ç¡¬é“¾æ¥åŠŸèƒ½å°†ç›¸åŒçš„æ–‡ä»¶æ˜ å°„ä¸ºåŒä¸€ä¸ªï¼Œè¿™æ ·å°±èƒ½èŠ‚çœæœ¬åœ°çš„å­˜å‚¨ç©ºé—´ã€‚\n1.ç›®è§†è§‚å¯Ÿæ¸¸æˆéƒ½æ›´æ–°äº†2024-01-19 17:00å½“æ—¥çš„æœ€æ–°ç‰ˆæœ¬ã€‚\né¦–å…ˆæ˜¯çœ‹ä¸¤ä¸ªæ¸¸æˆçš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥å‘ç°éƒ½æœ‰liveæ–‡ä»¶å¤¹ï¼›\n\n\nä»windowsçš„æ–‡ä»¶å¤¹å±æ€§æ¥çœ‹ï¼Œæ¸¯æœçš„æ–‡ä»¶ä¼šå¤šä¸€äº›ï¼Œå®¹é‡ä¹Ÿå¤šäº†å°†è¿‘12GBï¼›ä½†æ˜¯å›½æœçš„æ–‡ä»¶å¤¹æ•°é‡ä¼šæ¯”æ¸¯æœå¤šå¾ˆå¤šã€‚\n\n2.Pythonä»£ç è®¡ç®—md5ä½¿ç”¨pythonç®€å•å†™ä¸ªä»£ç æ¥éå†è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œé€šè¿‡è®¡ç®—MD5æ¥åˆ¤æ–­æœ‰å¤šå°‘æ–‡ä»¶æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚\n\nMD5å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ–‡ä»¶çš„æ•°å­—ç­¾åï¼Œåªè¦æ–‡ä»¶å†…å®¹ç›¸åŒï¼Œè®¡ç®—å‡ºæ¥çš„MD5å°±æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚å½“ç„¶ä¹Ÿæœ‰å¯èƒ½å‡ºç°ä¸¤ä¸ªæ¯«ä¸ç›¸å¹²çš„æ–‡ä»¶è®¡ç®—å‡ºæ¥çš„MD5ç›¸åŒçš„æƒ…å†µï¼ˆå“ˆå¸Œå†²çªï¼‰ï¼Œä½†æ˜¯å‡ ç‡å¾ˆå°ï¼Œåœ¨æœ¬æ¬¡å®éªŒä¸­åº”è¯¥æ˜¯ä¸å­˜åœ¨è¿™ç§æƒ…å†µçš„ã€‚\nPythonå¯ä»¥ä½¿ç”¨osæ¨¡å—æ¥è·å–ä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚\n\nä»£ç æ–‡ä»¶å±‚çº§å¦‚ä¸‹ï¼š\n- main.py- utils\t- Files.py\t- Logger.py\t- __init__.py- log\n\nåˆ†äº†ä¸‰ä¸ªæ¨¡å—ï¼Œå…¶ä¸­Loggeræ¨¡å—é‡Œé¢åªæœ‰ä¸€ä¸ªlogåˆå§‹åŒ–çš„ä»£ç ï¼›ä»£ç å¦‚ä¸‹\n# utils/Logger.pyimport logging # é‡‡ç”¨loggingæ¥æ›¿æ¢æ‰€æœ‰printimport shutil,osfrom time import timeLOGGER_NAME = &quot;valorant-test&quot;LOGGER_FILE = &quot;valorant-test.log&quot; # å¦‚æœæƒ³ä¿®æ”¹logæ–‡ä»¶çš„åå­—å’Œè·¯å¾„ï¼Œä¿®æ”¹æ­¤å˜é‡# æ£€æŸ¥æ˜¯å¦å·²æœ‰æ—¥å¿—æ–‡ä»¶ï¼Œå¦‚æœæœ‰å°†å…¶ç§»åŠ¨èµ°if os.path.exists(LOGGER_FILE):    new_path = LOGGER_FILE + &quot;.&quot; + str(int(time())) +  &quot;.bak&quot;    shutil.move(LOGGER_FILE, new_path) # ç§»åŠ¨æ–‡ä»¶    print(f&quot;[log] Previous log moved to &#123;new_path&#125;&quot;)# åˆå§‹åŒ–æ—¥å¿—æ¨¡å—# åªæ‰“å°infoä»¥ä¸Šçš„æ—¥å¿—ï¼ˆdebugä½äºinfoï¼‰logging.basicConfig(level=logging.INFO,                    format=&quot;[%(asctime)s] %(levelname)s:%(filename)s:%(funcName)s:%(lineno)d | %(message)s&quot;,                    datefmt=&quot;%y-%m-%d %H:%M:%S&quot;)# è·å–ä¸€ä¸ªloggerå¯¹è±¡_log = logging.getLogger(LOGGER_NAME)&quot;&quot;&quot;è‡ªå®šä¹‰çš„loggerå¯¹è±¡&quot;&quot;&quot;# 1.å®ä¾‹åŒ–æ§åˆ¶å°handlerå’Œæ–‡ä»¶handlerï¼ŒåŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶file_handler = logging.FileHandler(LOGGER_FILE, mode=&quot;a&quot;, encoding=&quot;utf-8&quot;)fmt = logging.Formatter(fmt=&quot;[%(asctime)s] %(levelname)s:%(filename)s:%(funcName)s:%(lineno)d | %(message)s&quot;,                    datefmt=&quot;%y-%m-%d %H:%M:%S&quot;)file_handler.setFormatter(fmt)# æ·»åŠ handler_log.addHandler(file_handler)\n\n# utils/Files.pyimport jsonimport osimport shutilimport hashlibfrom .Logger import _logdef open_json_file(path: str):    &quot;&quot;&quot;æ‰“å¼€jsonæ–‡ä»¶&quot;&quot;&quot;    with open(path, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f:        tmp = json.load(f)    return tmpdef write_json_file(path: str, value):    &quot;&quot;&quot;å†™å…¥jsonæ–‡ä»¶&quot;&quot;&quot;    with open(path, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as fw2:        json.dump(value, fw2, indent=2, sort_keys=True, ensure_ascii=False)def copy_file(source:str,target:str):    &quot;&quot;&quot;æ‹·è´æ–‡ä»¶&quot;&quot;&quot;    if source == target:        return    shutil.copy2(source, target)    _log.info(f&quot;[file] copy file from &#x27;&#123;source&#125;&#x27; to &#x27;&#123;target&#125;&#x27;&quot;)def get_files_list(dir: str):    &quot;&quot;&quot;    è·å–ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨ï¼ŒåŒ…æ‹¬å­ç›®å½•    :param dir: æ–‡ä»¶è·¯å¾„    :return: æ–‡ä»¶åˆ—è¡¨    &quot;&quot;&quot;    files_list = []    for root, dirs, files in os.walk(dir, topdown=False):        for file in files:            files_list.append(os.path.join(root, file))    return files_listdef create_dir(dir: str):    &quot;&quot;&quot;åˆ›å»ºæ–‡ä»¶å¤¹&quot;&quot;&quot;    # å¦‚æœç›®æ ‡æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–‡ä»¶ç›®å½•    if not os.path.exists(dir):        os.mkdir(dir)        _log.info(f&quot;[file] create dir: &#123;dir&#125;&quot;)def get_file_md5(file_path: str):    &quot;&quot;&quot;    get file md5 by file path    &quot;&quot;&quot;    chunk_size = 4 * 1024 * 1024  # æ ¹æ®éœ€è¦è°ƒæ•´å•å—çš„å¤§å°    with open(file_path, &#x27;rb&#x27;) as f:        file_md5 = hashlib.md5()        while chunk := f.read(chunk_size):            file_md5.update(chunk)    return file_md5.hexdigest()def get_file_size(file_path):    &quot;&quot;&quot;è·å–æ–‡ä»¶çš„å­—èŠ‚å¤§å°&quot;&quot;&quot;    size = os.path.getsize(file_path)    return size\n\nä¸»æ–‡ä»¶å¦‚ä¸‹ï¼Œå‡½æ•°çš„æµç¨‹å¾ˆç®€å•ï¼Œå°±æ˜¯éå†è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè®¡ç®—å®ƒä»¬çš„MD5ï¼Œå¹¶å°†ç»“æœé€šè¿‡dictå†™å…¥ä¸€ä¸ªjsonæ–‡ä»¶ä¸­\n# main.pyimport time# è‡ªå®šä¹‰åŒ…from utils import Filesfrom utils.Logger import _logDIR_HK = &quot;E:\\GAME\\Riot Games\\VALORANT\\live&quot;  # æ¸¯æœDIR_TX = &quot;E:\\GAME\\Tencent Games\\VALORANT\\live&quot;  # å›½æœdef calculate_md5_for_valorant():    &quot;&quot;&quot;    éå†ä¸¤ä¸ªæ¸¸æˆå®‰è£…ç›®å½•çš„æ–‡ä»¶ï¼Œè®¡ç®—md5ï¼›    æ­¤æ“ä½œè€—æ—¶è¾ƒé•¿ã€‚    &quot;&quot;&quot;    hk_file = Files.get_files_list(DIR_HK)    tx_file = Files.get_files_list(DIR_TX)    _log.info(f&quot;[hk] &#123;len(hk_file)&#125; files&quot;)    _log.info(f&quot;[tx] &#123;len(tx_file)&#125; files&quot;)    hk_file_dict = &#123;&#125;    tx_file_dict = &#123;&#125;    # éå†æ¸¯åºœæ–‡ä»¶    for file in hk_file:        md5_str = Files.get_file_md5(file)        hk_file_dict[file] = md5_str        _log.info(f&quot;[hk] &#123;file&#125; | &#123;md5_str&#125;&quot;)        time.sleep(0.05)    # éå†å›½æœæ–‡ä»¶    for file in tx_file:        md5_str = Files.get_file_md5(file)        tx_file_dict[file] = md5_str        _log.info(f&quot;[tx] &#123;file&#125; | &#123;md5_str&#125;&quot;)        time.sleep(0.05)    # å†™å…¥jsonæ–‡ä»¶    Files.write_json_file(&#x27;./log/hk.json&#x27;, hk_file_dict)    Files.write_json_file(&#x27;./log/tx.json&#x27;, tx_file_dict)\n\nè¿™ä¸ªä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹\n[24-01-19 18:10:46] INFO:test.py:&lt;module&gt;:27 | [start][24-01-19 18:10:46] INFO:test.py:&lt;module&gt;:30 | [hk] 1073 files[24-01-19 18:10:46] INFO:test.py:&lt;module&gt;:31 | [tx] 967 files...çœç•¥ä¸­é—´éå†çš„æ‰“å°[24-01-19 18:14:23] INFO:test.py:&lt;module&gt;:50 | [success]\n\nè®¡ç®—å®Œæ¯•md5åï¼Œè·å¾—äº†ä¸¤ä¸ªjsonæ–‡ä»¶ï¼Œé‡æ–°åŠ è½½è¿™ä¸¤ä¸ªæ–‡ä»¶æ¥è¯»å–å…¶ä¸­å†…å®¹ï¼Œéå†åˆ¤æ–­æ˜¯å¦æœ‰ç›¸åŒçš„æ–‡ä»¶ã€‚\næˆ‘çŸ¥é“è¿™é‡Œå¤šç»•äº†ä¸€å±‚ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªå‡½æ•°ä¸æ˜¯åŒæ—¶å†™å‡ºæ¥çš„ï¼Œæˆ‘æ‹…å¿ƒç¬¬ä¸€ä¸ªå‡½æ•°è¿è¡Œæœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥é‡‡ç”¨äº†å†™å…¥jsonæ–‡ä»¶çš„æ–¹å¼è€Œä¸æ˜¯ç›´æ¥ç”¨å˜é‡å­˜æ”¾ç»“æœå†è¿›è¡Œå¤„ç†ã€‚\ndef show_md5_diff_for_valorant():    &quot;&quot;&quot;å±•ç¤ºæ¸¯æœå’Œå›½æœæ–‡ä»¶å·®å¼‚&quot;&quot;&quot;    hk_file_dict = Files.open_json_file(&#x27;./log/hk.json&#x27;)    tx_file_dict = Files.open_json_file(&#x27;./log/tx.json&#x27;)    _log.info(f&quot;[hk] &#123;len(hk_file_dict)&#125; files&quot;)    _log.info(f&quot;[tx] &#123;len(tx_file_dict )&#125; files&quot;)    # å›½æœçš„æ–‡ä»¶è¾ƒå°‘ï¼Œéå†å›½æœæ–‡ä»¶åˆ—è¡¨ï¼ŒæŸ¥è¯¢æ˜¯å¦å­˜åœ¨äºæ¸¯æœæ–‡ä»¶ä¸­    match_file_dict = &#123;&#125;    match_count = 0    file_name_match_count = 0 # æ–‡ä»¶åä¹Ÿç›¸åŒ    file_size_sum = 0 # ç›¸åŒæ–‡ä»¶çš„å­—èŠ‚æ•°é‡    # å¼€å§‹éå†    for tx_file in tx_file_dict:        for hk_file,hk_md5 in hk_file_dict.items():            if tx_file_dict[tx_file] == hk_md5:                # å­—èŠ‚æ•°ç›¸åŠ                 cur_file_size = Files.get_file_size(tx_file)                file_size_sum += cur_file_size                # æ‰“å°                _log.info(f&quot;[match] tx:&#123;tx_file&#125; hk:&#123;hk_file&#125; | &#123;hk_md5&#125; | &#123;cur_file_size&#125; Bytes&quot;)                match_file_dict[hk_md5] = &#123;                    &quot;hk_file&quot;:hk_file,                    &quot;tx_file&quot;:tx_file                &#125;                match_count += 1                if hk_file == tx_file:                    file_name_match_count += 1                continue    # ç»“æŸã€æ‰“å°    Files.write_json_file(&#x27;./log/match_file.json&#x27;,match_file_dict)    _log.info(f&quot;[match] &#123;match_count&#125; files | name match:&#123;file_name_match_count&#125; | total size:&#123;file_size_sum / (1024 * 1024)&#125; MB&quot;)\n\nè¿™ä¸ªå‡½æ•°çš„è¿è¡Œç»“æœå¦‚ä¸‹\n[24-01-19 18:29:27] INFO:test.py:&lt;module&gt;:76 | [start][24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:44 | [hk] 1073 files[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:45 | [tx] 967 files... çœå»ä¸­é—´éƒ¨åˆ†çš„æ‰“å°[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:71 | [match] 279 files | name match:0 | total size:171.2870855331421 MB[24-01-19 18:29:27] INFO:test.py:&lt;module&gt;:79 | [success]\n\næƒŠå¥‡çš„å‘ç°ï¼Œå›½æœå’Œæ¸¯æœçš„æ–‡ä»¶é‡Œé¢ï¼Œåªæœ‰279ä¸ªæ–‡ä»¶çš„md5æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”è¿™äº›æ–‡ä»¶çš„åå­—éƒ½ä¸ä¸€æ ·ï¼ŒåŠ èµ·æ¥çš„æ€»å¤§å°åªæœ‰171MBï¼\nè¿™ç‚¹å¤§å°å°±æ²¡æœ‰å¿…è¦ç”¨ç¡¬é“¾æ¥æ¥çœç¡¬ç›˜å®¹é‡äº†ğŸ¤£ã€‚\nThe endæˆ‘å¯¹æ¸¸æˆåˆ¶ä½œå¹¶ä¸ç†è§£ï¼Œçœ‹ä¸Šå»å›½æœè¿˜æ˜¯ä¿®æ”¹äº†å¾ˆå¤šä¸œè¥¿çš„ã€‚åšè¿™ä¸ªæµ‹è¯•ä¹‹å‰ï¼Œæˆ‘è¿˜ä»¥ä¸ºå›½æœå’Œæ¸¯æœè‡³å°‘èƒ½æœ‰10GBå·¦å³çš„æ–‡ä»¶æ˜¯ç›¸åŒçš„å‘¢â€¦â€¦\nåœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„çœ‹æ³•å§ï¼\né™„ä»¶\nä»¥ä¸‹æ˜¯ç›¸åŒmd5æ–‡ä»¶çš„å®Œæ•´æ—¥å¿—è¾“å‡º\n\n\n[24-01-19 18:29:27] INFO:test.py:&lt;module&gt;:76 | [start][24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:44 | [hk] 1073 files[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:45 | [tx] 967 files[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef.pak | 1a909a4e490c1121c0e01c94be4d8c77 | 6003861 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_100_percent.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_100_percent.pak | 353041a41d9da52ffefcc37c89dbb83b | 279905 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_200_percent.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_200_percent.pak | 78cf51888cf52a0f6131e948b2385c62 | 386884 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_extensions.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\cef_extensions.pak | 03e4b627d65ccca6b810b99ef86dc88f | 3565138 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\devtools_resources.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\devtools_resources.pak | 75885f20b96687eb1a91905da87397dd | 5183550 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\am.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\am.pak | df0db5ceaee6af95c163b3bd22efabc4 | 317735 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ar.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ar.pak | 22299027a8a31c24a2f667f218163621 | 314031 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\bg.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\bg.pak | f6d256329b24a73d131a442fe1bdcd05 | 366595 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\bn.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\bn.pak | 37b37cdc6136fc8a0f5232bcaae9443e | 478939 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ca.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ca.pak | 98c2430f86321e05ffa21fb5de8e0823 | 228122 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\cs.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\cs.pak | ba68d98c5741feea3a2a8b3062e6b33c | 231572 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\da.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\da.pak | 62593b1c724fa2f7909683676e517ee5 | 207739 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\de.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\de.pak | 87f8df5088cf2e324e0b50a788e41b1e | 226211 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\el.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\el.pak | 37f2d16ff1e6423fe6c93bb5f3704f78 | 402687 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\en-GB.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\en-GB.pak | af1aee16186d1f5b808fea62788ba65b | 186958 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\en-US.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\en-US.pak | 32a7083e4afed6cbdd87489bf00fb72e | 186991 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\es-419.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\es-419.pak | 3a5e07e83ab696325194fda667f40adb | 224532 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\es.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\es.pak | 9a6a00edf4f4aebe264335d32dfbdd5a | 228808 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\et.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\et.pak | b706ebcee9553e038b82479edccf4165 | 202214 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fa.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fa.pak | d208ba29eb26f7325f7f055b4e6f3ba0 | 321134 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fi.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fi.pak | cd2443564cb7216f3a52578c76e83c80 | 211980 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fil.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fil.pak | ecdd6b5ebe2bd4c7e40a637ebc00f363 | 232070 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fr.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\fr.pak | a0fb5f9fa4237ffcd73fb9a0b75df93f | 243625 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\gu.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\gu.pak | af47fe7576ef7f957a3dad4c2dbee25e | 451818 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\he.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\he.pak | 9b57b3e79446429691b04c848443ec1f | 265463 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hi.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hi.pak | 48dcfd6dbb6054b00f2eaaa98eb2854d | 460810 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hr.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hr.pak | 7803ed6631f55e56209a5a82e2c63e9e | 217428 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hu.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\hu.pak | fe1a0fdb4f2102b21306ab175ad07d74 | 239083 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\id.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\id.pak | 4b8cbfcd0cc3cbd95b46ff927e17d3cc | 201977 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\it.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\it.pak | 814924c80224d39186d32d876c38a930 | 220397 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ja.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ja.pak | 49158449aedda1f3b020b5557ac0cf9a | 270807 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\kn.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\kn.pak | 8bff968d6f06d429759675eb278fee83 | 519415 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ko.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ko.pak | 0a73db278ddb5abcbe43ad4066bf239b | 230850 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\lt.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\lt.pak | 4a8f1111461833ba54bbf9a2c06d4896 | 234416 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\lv.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\lv.pak | 7c763171bdde1a6a8358180ed585034e | 234204 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ml.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ml.pak | 02809db4176d1a0819562a0c9707b893 | 567612 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\mr.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\mr.pak | ce0b8d9a5d379aeef89f4755e283a273 | 456368 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ms.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ms.pak | 96477cd1228bb45f0597c079492fdace | 208619 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\nb.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\nb.pak | 06b059219b57a339f6f324b2ca16ed78 | 205047 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\nl.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\nl.pak | b199dfcb09fbbc226c07b4091d654669 | 215699 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pl.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pl.pak | 9d831f342acb5ec998ba9a7368239759 | 225555 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pt-BR.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pt-BR.pak | 6d7bca559226543213e0bb122efd95d6 | 221133 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pt-PT.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\pt-PT.pak | fa370bc586055c3f9c518af9d0070e5c | 223472 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ro.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ro.pak | 00199374b56500de5d89bcb1eaf9bca0 | 229091 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ru.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ru.pak | 531b7ab45701c376fbb35d09b641c386 | 351003 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sk.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sk.pak | 36fd894c0d958c754b5544754cb74af8 | 237218 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sl.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sl.pak | aa47507900c5c6a12074e6b928f8f5eb | 217919 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sr.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sr.pak | f87c694d5d45e2fce3640d7f10d58f1f | 341731 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sv.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sv.pak | 536462c950527c7a68b4bdca15feaed9 | 206145 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sw.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\sw.pak | c55b06f4e9b461803bb768a6ffa9100a | 209319 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ta.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\ta.pak | 5885c004fc8bb9a138f5ebdaf2601b2f | 527387 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\te.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\te.pak | 95479ec9ff43dae880acae39f8c9b710 | 503299 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\th.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\th.pak | 841f0db1bd81e44ee9825d1d56d34d8a | 438108 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\tr.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\tr.pak | 050b25ecc7718e55e3fcec5a7b239d7d | 221774 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\uk.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\uk.pak | 3fc1f166ec7c2efa83ef153ad584b78f | 358245 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\vi.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\vi.pak | fd23fb189a14b3f9e5dc25d84d6af873 | 254300 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\zh-CN.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\zh-CN.pak | 889d29f0d68c8bab9ebf2c7426f3613a | 190714 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\zh-TW.pak hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\Resources\\locales\\zh-TW.pak | 59cb5352e750cb44a07eae223f30c3c9 | 192079 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\d3dcompiler_43.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\d3dcompiler_43.dll | 1c9b45e87528b8bb8cfa884ea0099a85 | 2106216 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\d3dcompiler_47.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\d3dcompiler_47.dll | a7675ddea31dbacd14cc6e9199f7641f | 4488904 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\icudtl.dat hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\icudtl.dat | bc7f54e4df91c9137dced27976228b66 | 10130560 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\natives_blob.bin hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\natives_blob.bin | 94855c31f6c24656a6d67ceae0b04cca | 246209 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\snapshot_blob.bin hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\CEF3\\Win64\\snapshot_blob.bin | dfb3f71057e263620565783f9f676fb4 | 1562112 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\DbgHelp\\dbghelp.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\DbgHelp\\dbghelp.dll | a970b7fcc13c18a1998cf65a5b8cb699 | 1868736 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\NVIDIA\\GeForceNOW\\Win64\\GfnRuntimeSdk.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\NVIDIA\\GeForceNOW\\Win64\\GfnRuntimeSdk.dll | c5be9b2846ad20b7abf3b1e3afe3f3ff | 3212640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\Windows\\XAudio2_9\\x64\\xaudio2_9redist.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\ThirdParty\\Windows\\XAudio2_9\\x64\\xaudio2_9redist.dll | 835591acabfb69a6f9dace12711f2243 | 847440 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll | e2f8b08d3e7cb64aade7401abb95e5c1 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll | e2f8b08d3e7cb64aade7401abb95e5c1 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll | 542d47795c4b54e269a108fb116f4de7 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll | 542d47795c4b54e269a108fb116f4de7 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll | a8bc700547a72d77a1ad67727068e87f | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll | a8bc700547a72d77a1ad67727068e87f | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll | 63b61e10bbe0273d8c63d32fb5e564be | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll | 63b61e10bbe0273d8c63d32fb5e564be | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll | b6e56cb1bd2d5495addcbc798f555851 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll | b6e56cb1bd2d5495addcbc798f555851 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll | d52c2bc891ab27809b16bddff993a5d1 | 15712 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll | d52c2bc891ab27809b16bddff993a5d1 | 15712 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll | 61ae2315e7a597bcbb3b2e29bf8025f7 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll | 61ae2315e7a597bcbb3b2e29bf8025f7 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll | 41b0560f416eca31cab63bde7c91ae28 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll | 41b0560f416eca31cab63bde7c91ae28 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll | b98b03972e5385175b4dfc5fedf05005 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll | b98b03972e5385175b4dfc5fedf05005 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll | 3abc73e44e75c77aac16032949df1549 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll | 3abc73e44e75c77aac16032949df1549 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll | 21dea0d4f1e60f897ac1c2f231ad4e59 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll | 21dea0d4f1e60f897ac1c2f231ad4e59 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll | be27d237bae3fa9004262c2a93b834c8 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll | be27d237bae3fa9004262c2a93b834c8 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll | b31177c3134f9cf4be5fdb616e429159 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll | b31177c3134f9cf4be5fdb616e429159 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll | 8e638ab12851e2318ccb88f1295c7946 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll | 8e638ab12851e2318ccb88f1295c7946 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll | e69d1f511ad357125c34b07a7e7f9d46 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll | e69d1f511ad357125c34b07a7e7f9d46 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll | 2306b0eeee53733e09b33471bfebe917 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll | 2306b0eeee53733e09b33471bfebe917 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll | c76392da33d2a8dc33199b54236bcc12 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll | c76392da33d2a8dc33199b54236bcc12 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll | 4bff92bb27fb70ff05ab1f59cb4ddea0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll | 4bff92bb27fb70ff05ab1f59cb4ddea0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll | e8dc04ac0733fb9c68633e03afb6b53a | 11616 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll | e8dc04ac0733fb9c68633e03afb6b53a | 11616 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll | 474e48c84874d76c48e596fe960a1f22 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll | 474e48c84874d76c48e596fe960a1f22 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll | 3eb0726e50c2b7f39b148cd96f084d36 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll | 3eb0726e50c2b7f39b148cd96f084d36 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll | 5f9aaadb0a71670c262cece360715b51 | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll | 5f9aaadb0a71670c262cece360715b51 | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll | 273a789b794dfd0e4a370e29932f5f42 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll | 273a789b794dfd0e4a370e29932f5f42 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll | 1589ffcc59fad86253ab7de1fe9733b3 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll | 1589ffcc59fad86253ab7de1fe9733b3 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll | ac611793e2221acce8040b5641fdce2e | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll | ac611793e2221acce8040b5641fdce2e | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll | 3c5fbeabfeb08e02a1875fd1b40b742a | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll | 3c5fbeabfeb08e02a1875fd1b40b742a | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll | a69121352fa09905b1f0b5c8eff8b4e1 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll | a69121352fa09905b1f0b5c8eff8b4e1 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll | 0df91e9ccb1639af18e1512efd4b8d41 | 16224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll | 0df91e9ccb1639af18e1512efd4b8d41 | 16224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll | 290804fca4c9f6e4253201eed9ab7bd0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll | 290804fca4c9f6e4253201eed9ab7bd0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll | 821da1308062d9548cc4cd276ac8a5bb | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll | 821da1308062d9548cc4cd276ac8a5bb | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll | b6945fa978f55187d2de15061f5c5145 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll | b6945fa978f55187d2de15061f5c5145 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll | 87dde4b6bc93556e2104f25892b21a83 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll | 87dde4b6bc93556e2104f25892b21a83 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll | 3603ec844137b2cb6c55ee9ec5f63b5c | 21344 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll | 3603ec844137b2cb6c55ee9ec5f63b5c | 21344 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll | cec239d062fb0fa275cfadd2eb0e9307 | 20320 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll | cec239d062fb0fa275cfadd2eb0e9307 | 20320 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll | cb8a3abf15c3a44127c3eaa7fcb01367 | 64864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll | cb8a3abf15c3a44127c3eaa7fcb01367 | 64864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll | 8d3c687d379f71feb6cc9cf9ecf3cdcd | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll | 8d3c687d379f71feb6cc9cf9ecf3cdcd | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll | 967e1532e69e1dbaf63d6ab3dd805cae | 16736 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll | 967e1532e69e1dbaf63d6ab3dd805cae | 16736 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll | 52373f7c6cc27245635a4163f4502ed8 | 18272 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll | 52373f7c6cc27245635a4163f4502ed8 | 18272 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll | 0222c83bdeb5f6998f0ba4c5296a5156 | 18784 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll | 0222c83bdeb5f6998f0ba4c5296a5156 | 18784 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll | 2d8fe86c92a45d998a281eefedba182d | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll | 2d8fe86c92a45d998a281eefedba182d | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll | 1808a059cf85a1261f99022d0ddffafd | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll | 1808a059cf85a1261f99022d0ddffafd | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\concrt140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\concrt140.dll | cd12471b295f6a1c66dcc9fc519eef5b | 317864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\concrt140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\concrt140.dll | cd12471b295f6a1c66dcc9fc519eef5b | 317864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140.dll | 6da7f4530edb350cf9d967d969ccecf8 | 566704 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140.dll | 6da7f4530edb350cf9d967d969ccecf8 | 566704 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_1.dll | 0832532fab0d5c949aa0c65169aa9d61 | 23944 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_1.dll | 0832532fab0d5c949aa0c65169aa9d61 | 23944 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_2.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_2.dll | e35261e9f4478aabe736bb2269c20b59 | 186800 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_2.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_2.dll | e35261e9f4478aabe736bb2269c20b59 | 186800 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_atomic_wait.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_atomic_wait.dll | 4e81a05a4b996d180f811426c5e23278 | 57264 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_atomic_wait.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_atomic_wait.dll | 4e81a05a4b996d180f811426c5e23278 | 57264 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_codecvt_ids.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_codecvt_ids.dll | c7e047cea075a9256916cfb83eaed1a6 | 21424 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_codecvt_ids.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_codecvt_ids.dll | c7e047cea075a9256916cfb83eaed1a6 | 21424 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\ucrtbase.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\ucrtbase.dll | deab9ba76ed239240014260fbce74a5b | 1036128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\ucrtbase.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\ucrtbase.dll | deab9ba76ed239240014260fbce74a5b | 1036128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vccorlib140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vccorlib140.dll | 2d581d8598f4db0fc55b415b841c7544 | 335792 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vccorlib140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vccorlib140.dll | 2d581d8598f4db0fc55b415b841c7544 | 335792 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140.dll | f34eb034aa4a9735218686590cba2e8b | 98224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140.dll | f34eb034aa4a9735218686590cba2e8b | 98224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140_1.dll | 135359d350f72ad4bf716b764d39e749 | 37256 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140_1.dll | 135359d350f72ad4bf716b764d39e749 | 37256 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Content\\SlateDebug\\Fonts\\LastResort.tps hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Content\\SlateDebug\\Fonts\\LastResort.tps | e15c3c2ad82c41935c7ab27b76e58964 | 930 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\Engine\\Content\\SlateDebug\\Fonts\\LastResort.ttf hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Content\\SlateDebug\\Fonts\\LastResort.ttf | 89454f173319872a5fa975b26d028f9d | 5395052 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\OpenImageDenoise.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\OpenImageDenoise.dll | 43b8ae36fb551bb0226bb59cf21431ce | 49771408 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll | e2f8b08d3e7cb64aade7401abb95e5c1 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-1-0.dll | e2f8b08d3e7cb64aade7401abb95e5c1 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll | 542d47795c4b54e269a108fb116f4de7 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-console-l1-2-0.dll | 542d47795c4b54e269a108fb116f4de7 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll | a8bc700547a72d77a1ad67727068e87f | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-datetime-l1-1-0.dll | a8bc700547a72d77a1ad67727068e87f | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll | 63b61e10bbe0273d8c63d32fb5e564be | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-debug-l1-1-0.dll | 63b61e10bbe0273d8c63d32fb5e564be | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll | b6e56cb1bd2d5495addcbc798f555851 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-errorhandling-l1-1-0.dll | b6e56cb1bd2d5495addcbc798f555851 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll | d52c2bc891ab27809b16bddff993a5d1 | 15712 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-1-0.dll | d52c2bc891ab27809b16bddff993a5d1 | 15712 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll | 61ae2315e7a597bcbb3b2e29bf8025f7 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l1-2-0.dll | 61ae2315e7a597bcbb3b2e29bf8025f7 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll | 41b0560f416eca31cab63bde7c91ae28 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-file-l2-1-0.dll | 41b0560f416eca31cab63bde7c91ae28 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll | b98b03972e5385175b4dfc5fedf05005 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-handle-l1-1-0.dll | b98b03972e5385175b4dfc5fedf05005 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll | 3abc73e44e75c77aac16032949df1549 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-heap-l1-1-0.dll | 3abc73e44e75c77aac16032949df1549 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll | 21dea0d4f1e60f897ac1c2f231ad4e59 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-interlocked-l1-1-0.dll | 21dea0d4f1e60f897ac1c2f231ad4e59 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll | be27d237bae3fa9004262c2a93b834c8 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-libraryloader-l1-1-0.dll | be27d237bae3fa9004262c2a93b834c8 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll | b31177c3134f9cf4be5fdb616e429159 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-localization-l1-2-0.dll | b31177c3134f9cf4be5fdb616e429159 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll | 8e638ab12851e2318ccb88f1295c7946 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-memory-l1-1-0.dll | 8e638ab12851e2318ccb88f1295c7946 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll | e69d1f511ad357125c34b07a7e7f9d46 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-namedpipe-l1-1-0.dll | e69d1f511ad357125c34b07a7e7f9d46 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll | 2306b0eeee53733e09b33471bfebe917 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processenvironment-l1-1-0.dll | 2306b0eeee53733e09b33471bfebe917 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll | c76392da33d2a8dc33199b54236bcc12 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-0.dll | c76392da33d2a8dc33199b54236bcc12 | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll | 4bff92bb27fb70ff05ab1f59cb4ddea0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-processthreads-l1-1-1.dll | 4bff92bb27fb70ff05ab1f59cb4ddea0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll | e8dc04ac0733fb9c68633e03afb6b53a | 11616 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-profile-l1-1-0.dll | e8dc04ac0733fb9c68633e03afb6b53a | 11616 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll | 474e48c84874d76c48e596fe960a1f22 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-rtlsupport-l1-1-0.dll | 474e48c84874d76c48e596fe960a1f22 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll | 3eb0726e50c2b7f39b148cd96f084d36 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-string-l1-1-0.dll | 3eb0726e50c2b7f39b148cd96f084d36 | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll | 5f9aaadb0a71670c262cece360715b51 | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-1-0.dll | 5f9aaadb0a71670c262cece360715b51 | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll | 273a789b794dfd0e4a370e29932f5f42 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-synch-l1-2-0.dll | 273a789b794dfd0e4a370e29932f5f42 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll | 1589ffcc59fad86253ab7de1fe9733b3 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-sysinfo-l1-1-0.dll | 1589ffcc59fad86253ab7de1fe9733b3 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll | ac611793e2221acce8040b5641fdce2e | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-timezone-l1-1-0.dll | ac611793e2221acce8040b5641fdce2e | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll | 3c5fbeabfeb08e02a1875fd1b40b742a | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-core-util-l1-1-0.dll | 3c5fbeabfeb08e02a1875fd1b40b742a | 12128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll | a69121352fa09905b1f0b5c8eff8b4e1 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-conio-l1-1-0.dll | a69121352fa09905b1f0b5c8eff8b4e1 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll | 0df91e9ccb1639af18e1512efd4b8d41 | 16224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-convert-l1-1-0.dll | 0df91e9ccb1639af18e1512efd4b8d41 | 16224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll | 290804fca4c9f6e4253201eed9ab7bd0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-environment-l1-1-0.dll | 290804fca4c9f6e4253201eed9ab7bd0 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll | 821da1308062d9548cc4cd276ac8a5bb | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-filesystem-l1-1-0.dll | 821da1308062d9548cc4cd276ac8a5bb | 14176 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll | b6945fa978f55187d2de15061f5c5145 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-heap-l1-1-0.dll | b6945fa978f55187d2de15061f5c5145 | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll | 87dde4b6bc93556e2104f25892b21a83 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-locale-l1-1-0.dll | 87dde4b6bc93556e2104f25892b21a83 | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll | 3603ec844137b2cb6c55ee9ec5f63b5c | 21344 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-math-l1-1-0.dll | 3603ec844137b2cb6c55ee9ec5f63b5c | 21344 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll | cec239d062fb0fa275cfadd2eb0e9307 | 20320 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-multibyte-l1-1-0.dll | cec239d062fb0fa275cfadd2eb0e9307 | 20320 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll | cb8a3abf15c3a44127c3eaa7fcb01367 | 64864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-private-l1-1-0.dll | cb8a3abf15c3a44127c3eaa7fcb01367 | 64864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll | 8d3c687d379f71feb6cc9cf9ecf3cdcd | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-process-l1-1-0.dll | 8d3c687d379f71feb6cc9cf9ecf3cdcd | 13152 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll | 967e1532e69e1dbaf63d6ab3dd805cae | 16736 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-runtime-l1-1-0.dll | 967e1532e69e1dbaf63d6ab3dd805cae | 16736 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll | 52373f7c6cc27245635a4163f4502ed8 | 18272 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-stdio-l1-1-0.dll | 52373f7c6cc27245635a4163f4502ed8 | 18272 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll | 0222c83bdeb5f6998f0ba4c5296a5156 | 18784 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-string-l1-1-0.dll | 0222c83bdeb5f6998f0ba4c5296a5156 | 18784 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll | 2d8fe86c92a45d998a281eefedba182d | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-time-l1-1-0.dll | 2d8fe86c92a45d998a281eefedba182d | 14688 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll | 1808a059cf85a1261f99022d0ddffafd | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\api-ms-win-crt-utility-l1-1-0.dll | 1808a059cf85a1261f99022d0ddffafd | 12640 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\concrt140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\concrt140.dll | cd12471b295f6a1c66dcc9fc519eef5b | 317864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\concrt140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\concrt140.dll | cd12471b295f6a1c66dcc9fc519eef5b | 317864 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\dbgeng.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\dbgeng.dll | 53a932b4f7819a9e62be4e84a2e808cd | 4327248 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\dbghelp.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\dbghelp.dll | 15ee5c7404fa5b6de0eb0c042474d3bf | 1369936 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140.dll | 6da7f4530edb350cf9d967d969ccecf8 | 566704 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140.dll | 6da7f4530edb350cf9d967d969ccecf8 | 566704 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_1.dll | 0832532fab0d5c949aa0c65169aa9d61 | 23944 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_1.dll | 0832532fab0d5c949aa0c65169aa9d61 | 23944 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_2.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_2.dll | e35261e9f4478aabe736bb2269c20b59 | 186800 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_2.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_2.dll | e35261e9f4478aabe736bb2269c20b59 | 186800 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_atomic_wait.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_atomic_wait.dll | 4e81a05a4b996d180f811426c5e23278 | 57264 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_atomic_wait.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_atomic_wait.dll | 4e81a05a4b996d180f811426c5e23278 | 57264 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_codecvt_ids.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\msvcp140_codecvt_ids.dll | c7e047cea075a9256916cfb83eaed1a6 | 21424 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_codecvt_ids.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\msvcp140_codecvt_ids.dll | c7e047cea075a9256916cfb83eaed1a6 | 21424 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\tbb12.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\tbb12.dll | 123404fa3ab377e006e8bb777dc58b36 | 383856 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\ucrtbase.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\ucrtbase.dll | deab9ba76ed239240014260fbce74a5b | 1036128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\ucrtbase.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\ucrtbase.dll | deab9ba76ed239240014260fbce74a5b | 1036128 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vccorlib140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vccorlib140.dll | 2d581d8598f4db0fc55b415b841c7544 | 335792 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vccorlib140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vccorlib140.dll | 2d581d8598f4db0fc55b415b841c7544 | 335792 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140.dll | f34eb034aa4a9735218686590cba2e8b | 98224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140.dll | f34eb034aa4a9735218686590cba2e8b | 98224 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\Engine\\Binaries\\Win64\\vcruntime140_1.dll | 135359d350f72ad4bf716b764d39e749 | 37256 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140_1.dll hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Binaries\\Win64\\vcruntime140_1.dll | 135359d350f72ad4bf716b764d39e749 | 37256 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Battle Pass Glitches.webm hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Battle Pass Glitches.webm | b846e42b7caeadf1854f8739f4966e36 | 588065 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Contract Glitches.webm hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Contract Glitches.webm | 6c0a4b8cabcc30ae3e135a9af7a2df8b | 2729576 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:59 | [match] tx:E:\\GAME\\Tencent Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Homescreen_E8A1_800.mp4 hk:E:\\GAME\\Riot Games\\VALORANT\\live\\ShooterGame\\Content\\Movies\\Menu\\Homescreen_E8A1_800.mp4 | 8c1b4ebecd4d973e7520a5eca76d4992 | 46811173 Bytes[24-01-19 18:29:27] INFO:test.py:show_md5_diff_for_valorant:71 | [match] 279 files | name match:0 | total size:171.2870855331421 MB[24-01-19 18:29:27] INFO:test.py:&lt;module&gt;:79 | [success]\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ¦‚å¿µ","url":"/posts/3785030062/","content":"æœ¬æ–‡æ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿä¸ºCentOS 7.6\n\n\n1.æ“ä½œç³»ç»Ÿæ“ä½œç³»ç»Ÿæ˜¯ä¸ä¼šç›´æ¥å¯¹ç”¨æˆ·æä¾›æœåŠ¡çš„ã€‚å› ä¸ºè¿™æ ·ä¼šæš´éœ²è‡ªå·±çš„åº•å±‚å®ç°ï¼Œå¯¹ç³»ç»Ÿç¨³å®šæ€§é€ æˆäº†å¨èƒ\n\næ“ä½œç³»ç»Ÿæ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨å±‚çš„æ–¹å¼å¯¹å¤–æä¾›æ¥å£æœåŠ¡çš„ã€‚\n\nè¿™å°±å¥½æ¯”ä½ æ˜¯é€šè¿‡å‰ç«¯æŒ‰é’®æ¥ä½¿ç”¨ä¸€ä¸ªç½‘ç«™çš„åŠŸèƒ½ï¼Œè€Œé€šå¸¸ä½ æ˜¯çœ‹ä¸åˆ°ç½‘é¡µçš„åç«¯å®ç°çš„ã€‚\n\nLinuxç³»ç»Ÿçš„åº•å±‚æ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œæ‰€ä»¥è¿™äº›æ¥å£æœåŠ¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€äº›Cè¯­è¨€çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°ç”¨äºæ“ä½œç³»ç»Ÿçš„å„ç§ç®¡ç†ã€‚\næˆ‘ä»¬å­¦ä¹ Linuxçš„ç³»ç»Ÿç¼–ç¨‹ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å­¦ä¹ è¿™äº›å’Œç³»ç»Ÿå¯¹æ¥çš„å‡½æ•°ã€‚\n1.1 ç¼–ç¨‹è¯­è¨€å’Œç³»ç»Ÿå¯¹æ¥ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå…¶æä¾›çš„å„ç§ç®¡ç†ç¡¬ä»¶çš„å‡½æ•°æ˜¯ä¸åŒçš„ã€‚è¿™æ—¶å€™æˆ‘ä»¬çš„C&#x2F;C++ç­‰å…¶ä»–è¯­è¨€æƒ³å’Œç³»ç»Ÿå¯¹æ¥ï¼ˆå¦‚printfæ‰“å°åˆ°å±å¹•ä¸Šï¼‰å°±éœ€è¦åœ¨åº•å±‚å¸®ç”¨æˆ·ç®¡ç†å¥½è¿™äº›ç³»ç»Ÿæ¥å£çš„è°ƒç”¨ã€‚å½“æˆ‘ä»¬ä½¿ç”¨è¿™äº›è¯­è¨€çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨å»è°ƒç”¨\n1.2 æè¿°è¿›ç¨‹-PCB\nPCBå¹¶ä¸æ˜¯é‚£äº›ç»¿æ²¹æ²¹çš„ç”µè·¯æ¿ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯process control block\n\nè¿›ç¨‹æ˜¯æœ‰ä¸€ä¸ªæ‹…å½“åˆ†é…ç³»ç»Ÿèµ„æºï¼ˆCPUæ—¶é—´ï¼Œå†…å­˜ï¼‰çš„å®ä½“\n\nè¿›ç¨‹ä¿¡æ¯è¢«æ”¾åœ¨ä¸€ä¸ªå«åšè¿›ç¨‹æ§åˆ¶æ¨¡å—çš„æ•°æ®ç»“æ„ä¸­ï¼Œå¯ä»¥ç†è§£ä¸ºè¿›ç¨‹å±æ€§çš„é›†åˆ\nåœ¨Linuxä¸­çš„PCBå…¶å®å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“task strcutï¼ŒåŒ…å«äº†è¿™ä¸ªè¿›ç¨‹çš„å„ç§ä¿¡æ¯ã€‚\n\ntask_structçš„å†…å®¹å¤§å®¶å¯ä»¥ä¸Šç½‘æœæœï¼Œèƒ½åŠ›å¼ºçš„æœ‹å‹å¯ç›´æ¥å»çœ‹Linuxçš„æºç ã€‚\n1.3 ç»„ç»‡è¿›ç¨‹æˆ‘ä»¬å¯ä»¥åœ¨Linuxçš„æºç ä¸­æ‰¾åˆ°ç»„ç»‡è¿›ç¨‹çš„æ–¹å¼ã€‚æ‰€æœ‰è¿è¡Œåœ¨ç³»ç»Ÿé‡Œé¢çš„è¿›ç¨‹éƒ½æ˜¯ä»¥task_structä¸ºæˆå‘˜çš„é“¾è¡¨å½¢å¼å­˜åœ¨å†…æ ¸ä¸­ã€‚ä¸‹é¢æ˜¯å…³äºè¿™ä¸ªç»“æ„ä½“çš„ä¸€éƒ¨åˆ†è§£æ\n\n\næ ‡ç¤ºç¬¦: æè¿°æœ¬è¿›ç¨‹çš„å”¯ä¸€æ ‡ç¤ºç¬¦ï¼Œç”¨æ¥åŒºåˆ«å…¶ä»–è¿›ç¨‹\nçŠ¶æ€: ä»»åŠ¡çŠ¶æ€ï¼Œé€€å‡ºä»£ç ï¼Œé€€å‡ºä¿¡å·ç­‰ã€‚\nä¼˜å…ˆçº§: ç›¸å¯¹äºå…¶ä»–è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚ \nç¨‹åºè®¡æ•°å™¨: ç¨‹åºä¸­å³å°†è¢«æ‰§è¡Œçš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ã€‚ \nå†…å­˜æŒ‡é’ˆ: åŒ…æ‹¬ç¨‹åºä»£ç å’Œè¿›ç¨‹ç›¸å…³æ•°æ®çš„æŒ‡é’ˆï¼Œè¿˜æœ‰å’Œå…¶ä»–è¿›ç¨‹å…±äº«çš„å†…å­˜å—çš„æŒ‡é’ˆ\nä¸Šä¸‹æ–‡æ•°æ®: è¿›ç¨‹æ‰§è¡Œæ—¶å¤„ç†å™¨çš„å¯„å­˜å™¨ä¸­çš„æ•°æ®[ä¼‘å­¦ä¾‹å­ï¼Œè¦åŠ å›¾CPUï¼Œå¯„å­˜å™¨]ã€‚\nIï¼OçŠ¶æ€ä¿¡æ¯: åŒ…æ‹¬æ˜¾ç¤ºçš„I&#x2F;Oè¯·æ±‚,åˆ†é…ç»™è¿›ç¨‹çš„Iï¼Oè®¾å¤‡å’Œè¢«è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶åˆ—è¡¨ã€‚ \nè®°è´¦ä¿¡æ¯: å¯èƒ½åŒ…æ‹¬å¤„ç†å™¨æ—¶é—´æ€»å’Œï¼Œä½¿ç”¨çš„æ—¶é’Ÿæ•°æ€»å’Œï¼Œæ—¶é—´é™åˆ¶ï¼Œè®°è´¦å·ç­‰ã€‚ \nå…¶ä»–ä¿¡æ¯\n\n\nç›¸å…³è§£æå¯ä»¥çœ‹çœ‹è¿™ç¯‡åšå®¢ã€ä¼ é€é—¨ã€‘\n1.4 æŸ¥çœ‹è¿›ç¨‹1.4.1 pså‘½ä»¤å¯ä»¥ç”¨pså‘½ä»¤æ¥æŸ¥æ‰¾è¿›ç¨‹ä¿¡æ¯ã€‚ä¸‹é¢è¿™ä¸ªæŒ‡ä»¤æ˜¯æ˜¾ç¤ºæ‰€æœ‰çš„è¿›ç¨‹\nps axj\n\nç³»ç»Ÿä¼šæ‰“å°ä¸‹é¢çš„å¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œè¿™å°±å¥½æ¯”windowsä¸‹çš„ä»»åŠ¡ç®¡ç†å™¨\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªwhile(1)çš„æ­»å¾ªç¯å‡½æ•°ï¼Œè¿è¡Œçš„æ—¶å€™å°±å˜æˆäº†ä¸€ä¸ªè¿›ç¨‹äº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥æ‰¾ç‰¹å®šçš„è¿›ç¨‹ä¿¡æ¯\nps axj | grep test\n\n\nä¸Šå›¾ä¸­æˆ‘ä»¬æœç´¢testï¼Œå‡ºç°äº†ä¸¤ä¸ªè¿›ç¨‹ã€‚ç¬¬ä¸€ä¸ªè¿›ç¨‹å¾ˆæ˜æ˜¾æ˜¯æˆ‘ä»¬è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºã€‚é‚£ä¹ˆç¬¬äºŒä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚åªä¸è¿‡lsè¿™ç§ç±»å‹çš„å‘½ä»¤å¾ˆå¿«å°±èƒ½æ‰§è¡Œå®Œæ¯•ã€‚\n\nè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ç¡®è®¤ï¼Œå‡ºç°çš„ç¬¬äºŒä¸ªè¿›ç¨‹å®é™…ä¸Šæ˜¯æˆ‘ä»¬æ‰§è¡Œè¿™æ¡æœç´¢è¯­å¥å‡ºç°çš„ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªæŒ‡ä»¤æ¥å±è”½grepçš„ç»“æœï¼Œåªæ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±çš„é‚£ä¸ªç¨‹åºã€‚\nps axj | grep test | grep -v grep\n\næœ€åä¸€ä¸ªæŒ‡ä»¤çš„æ„æ€æ˜¯å¿½ç•¥æ‰åŒ…å«grepçš„ç»“æœï¼Œç°åœ¨å°±ä¸ä¼šæ˜¾ç¤ºç¬¬äºŒä¸ªgrepçš„è¿›ç¨‹äº†\n\n1.4.2 procç›®å½•è¿˜å¯ä»¥é€šè¿‡/procç³»ç»Ÿæ–‡ä»¶å¤¹æ¥æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ä¿¡æ¯ã€‚è¿™é‡Œé¢çš„å†…å®¹éƒ½æ˜¯ä¸€ä¸ªå®æ—¶çš„è¿›ç¨‹ä¿¡æ¯\n\næ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„PID(process id)ï¼Œç”¨æ¥æ ‡è¯†å”¯ä¸€çš„è¿›ç¨‹\nå¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªæŒ‡ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæç¤ºä¿¡æ¯ï¼Œå…¶ä¸­çš„&amp;&amp;ä»£è¡¨é€»è¾‘ä¸ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œç¬¬äºŒä¸ªå‘½ä»¤\nps ajx | head -1 &amp;&amp; ps ajx | grep test | grep -v grep\n\n\nè¿™é‡Œå°±å‘Šè¯‰æˆ‘ä»¬äº†è¿™ä¸ªå‘½ä»¤çš„PIDæ˜¯ä»€ä¹ˆï¼Œå³ç¬¬2ä½æ•°å­—\n\nå¦‚æœä½ éœ€è¦æŸ¥çœ‹PIDä¸º1çš„è¿›ç¨‹ï¼Œåˆ™æ‰“å¼€å¯¹åº”è¿›ç¨‹çš„æ–‡ä»¶å¤¹\n\nä¸Šé¢æˆ‘ä»¬æœåˆ°çš„è¿›ç¨‹PIDä¸º5408ï¼ŒæŸ¥çœ‹å¯¹åº”æ–‡ä»¶å¤¹å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…å®¹\n\nå½“æˆ‘ä»¬å…³é—­äº†./testè¿›ç¨‹åœ¨å»æŸ¥æ‰¾ï¼Œä¼šå‘ç°æ²¡æœ‰è¿™ä¸ªè·¯å¾„äº†\n\nåœ¨æ¯ä¸€ä¸ªè¿›ç¨‹æ–‡ä»¶å¤¹ä¸­éƒ½æœ‰ä¸€ä¸ªcwdå’Œexe\n\ncwdå…¶æŒ‡å‘çš„æ˜¯è¿›ç¨‹å½“å‰çš„å·¥ä½œè·¯å¾„\nexeæŒ‡å‘çš„æ˜¯è¿›ç¨‹å¯¹åº”å¯æ‰§è¡Œç¨‹åºçš„ç£ç›˜æ–‡ä»¶\n\næ¯”å¦‚ç°åœ¨æˆ‘ä½¿ç”¨pså‘½ä»¤æŸ¥æ‰¾åˆ°äº†ä¸‹é¢è¿™ä¸ªpythonä»£ç è¿›ç¨‹\n\nä½¿ç”¨ls -l /proc/19423å‘½ä»¤æ‰“å¼€å¯¹åº”æ–‡ä»¶å¤¹ï¼Œä¾¿å¯ä»¥çœ‹åˆ°cwdå’Œexeçš„æŒ‡å‘\n\nè¿™ä»£è¡¨è¯¥è¿›ç¨‹æ˜¯ç”¨python3.10è¿›è¡Œæ‰§è¡Œçš„ï¼Œå…¶å·¥ä½œç›®å½•ä¸ºcwdæŒ‡å‘çš„è·¯å¾„\n\npidã€å·¥ä½œè·¯å¾„ç­‰ç­‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨è¿›ç¨‹çš„task_structä¸­\n\n1.4.3 Cè¯­è¨€ä»£ç è·å–ppidå’Œpidé™¤äº†åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡Cè¯­è¨€ä»£ç ä¸­å’Œç³»ç»Ÿé€šä¿¡çš„åº“å‡½æ•°æ¥è·å–å½“å‰è¿›ç¨‹çš„ppidå’Œpid\n#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main()&#123;    printf(&quot;pid: %d\\n&quot;, getpid());    printf(&quot;ppid: %d\\n&quot;, getppid());    return 0;&#125;\n\n\nä½¿ç”¨ä¸€ä¸ªwhile(1)å¾ªç¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹çœ‹è¿™ä¸ªè¿›ç¨‹æ˜¯å¦å’Œæˆ‘ä»¬ç”¨psæœå‡ºæ¥çš„ç»“æœç›¸åŒ\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœå¯»å‡ºæ¥çš„ç»“æœå’Œè¯¥ç¨‹åºè‡ªå·±æ‰“å°çš„ç»“æœæ˜¯ä¸€æ ·çš„\nå®é™…ä¸Šï¼Œæˆ‘ä»¬æ‰€æœ‰åœ¨å‘½ä»¤è¡Œä¸Šæ‰§è¡Œçš„ç¨‹åºï¼Œéƒ½æ˜¯bashï¼ˆå³å½“å‰å‘½ä»¤è¡Œï¼‰çš„å­è¿›ç¨‹\n\n1.5 fork é€šè¿‡ç³»ç»Ÿè°ƒç”¨åˆ›å»ºçˆ¶å­è¿›ç¨‹å¦‚æœä½ ç”¨è¿‡giteeæˆ–è€…githubï¼Œæƒ³å¿…å¯¹forkå¹¶ä¸é™Œç”Ÿã€‚åœ¨gitæ‰˜ç®¡ç½‘ç«™ä¸Šï¼Œæˆ‘ä»¬forkåˆ«äººçš„ä»“åº“ï¼Œä¾¿ä¼šåœ¨è‡ªå·±çš„è´¦æˆ·ä¸­å‡ºç°ä¸€ä¸ªåˆ«äººä»“åº“çš„â€œå­ä»“åº“â€ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªâ€œå­ä»“åº“â€é‡Œé¢ä¿®æ”¹ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œå†åˆ›å»ºä¸€ä¸ªpull requeståˆå¹¶å…¥è¢«forkçš„ä»“åº“\nè€Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œforkçš„ä½œç”¨ä¾¿æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªçˆ¶å­è¿›ç¨‹ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹ç›¸äº’ç‹¬ç«‹ï¼Œä¸”æœ‰å¾ˆå¤šç‰¹æ®Šçš„åœ°æ–¹ç­‰ç€æˆ‘ä»¬çš„æ¢ç´¢\næ¯”å¦‚ï¼šforkå…·æœ‰ä¸¤ä¸ªä¸åŒçš„è¿”å›å€¼ï¼\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç \n#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main()&#123;    pid_t id = fork();    //id=0 å­è¿›ç¨‹ï¼›&gt;0ä¸ºçˆ¶è¿›ç¨‹    if(id == 0)    &#123;        //child        while(1)        &#123;            printf(&quot;å­è¿›ç¨‹ï¼Œpid: %d, çˆ¶è¿›ç¨‹æ˜¯: %d\\n&quot;, getpid(), getppid());            sleep(1);        &#125;    &#125;    else&#123;        //parent        while(1)        &#123;            printf(&quot;çˆ¶è¿›ç¨‹ï¼Œpid: %d, çˆ¶è¿›ç¨‹æ˜¯: %d\\n&quot;, getpid(), getppid());            sleep(1);        &#125;    &#125;&#125;\n\nè¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå‘ç°çˆ¶å­è¿›ç¨‹ç«Ÿç„¶äº¤å‰è¿è¡Œäº†ï¼è€Œä¸”è¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸åŒçš„pidã€‚å…¶ä¸­å­è¿›ç¨‹çš„ppidå³ä¸ºçˆ¶è¿›ç¨‹çš„pidï¼\n\nå¥‡æ€ªï¼Œæˆ‘ä»¬çš„whileå¾ªç¯æ˜æ˜æ˜¯å†™åœ¨ifé‡Œé¢çš„å•Šï¼Ÿä¸ºä»€ä¹ˆelseé‡Œé¢çš„whileä¹Ÿè¢«æ­£å¸¸æ‰§è¡Œäº†å‘¢ï¼Ÿ\n1.5.1 man forkè¿™ä¾¿éœ€è¦æˆ‘ä»¬äº†è§£ä¸€ä¸‹forkåˆ°åº•æ˜¯ä½•æ–¹ç¥åœ£äº†ã€‚\nman fork\n\n\nå¦‚æœä½ å‡ºç°No manual entry for forkçš„æŠ¥é”™ï¼Œåœ¨CentOSä¸‹è¯·å°è¯•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\nsudo yum install -y man-pages\n\n\nåŒæ—¶å¯ä»¥çœ‹åˆ°å…³äºforkçš„è¿”å›å€¼çš„æè¿°\n\nè¿™ä¾¿èƒ½å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸ºå•¥forkä¸‹æ–¹åŒä¸€ä¸ªidå€¼ä½¿ç”¨æ‰“å°ä¼šè¿”å›ä¸åŒçš„ç»“æœï¼›ä»¥åŠif elseè¢«äº¤å‰è¿è¡Œçš„åŸå› ã€‚\n\nforkä¹‹åï¼Œçˆ¶å­è¿›ç¨‹å…±äº«ä»£ç ï¼Œéƒ½ä¼šæ‰§è¡Œåé¢çš„if elseè¯­å¥\nforkä¹‹åï¼Œçˆ¶å­è¿›ç¨‹çš„è¿”å›å€¼ä¸ç›¸åŒï¼Œæ‰€ä»¥if elseè¯­å¥è¿›å…¥çš„æ¨¡å—ä¹Ÿä¸ç›¸åŒ\n\nforkè¿›ç¨‹ç»™çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹pidï¼Œæ–¹ä¾¿çˆ¶è¿›ç¨‹ç®¡ç†è‡ªå·±çš„å­è¿›ç¨‹ã€‚è¿™æ˜¯å› ä¸ºçˆ¶è¿›ç¨‹å¿…é¡»è¦æœ‰æ ‡è¯†å­è¿›ç¨‹çš„æ–¹æ³•ï¼\n\nä¸€ä¸ªçˆ¶äº²å¯ä»¥æœ‰å¤šä¸ªå­©å­ï¼Œéœ€è¦pidæ¥è¿›è¡Œç®¡ç†\nä¸€ä¸ªå­è¿›ç¨‹åªèƒ½æœ‰1ä¸ªçˆ¶äº²ï¼Œæ‰€ä»¥ç”¨0æ¥æ ‡è¯†å­è¿›ç¨‹åˆ›å»ºæˆåŠŸå³å¯ã€‚å®ƒå¯ä»¥ç”¨ppidæ–¹ä¾¿çš„æ‰¾åˆ°è‡ªå·±çš„çˆ¶è¿›ç¨‹ã€‚\n\n1.5.2 forkåšäº†ä»€ä¹ˆforkä¼šè°ƒç”¨ç³»ç»Ÿçš„OS system callï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹\n\ntask_struct + çˆ¶è¿›ç¨‹ä»£ç å’Œæ•°æ®\ntask_struct + å­è¿›ç¨‹ä»£ç å’Œæ•°æ®\n\nå­è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®å¤§å¤šæ•°éƒ½æ˜¯ä»çˆ¶è¿›ç¨‹ç»§æ‰¿ä¸‹æ¥çš„ï¼Œä¸è¿‡pidå’Œppidè‚¯å®šä¸ä¼šç»§æ‰¿ã€‚å…¶å†…éƒ¨çš„å˜é‡/æ•°æ®å’Œçˆ¶è¿›ç¨‹ç‹¬ç«‹ï¼ˆè¿™ä¸ªåç»­çš„åšå®¢ä¼šæ¶‰åŠï¼‰\n\nå½“forkåˆ›å»ºå¥½å­è¿›ç¨‹å¹¶è¿›è¡Œreturnçš„æ—¶å€™ï¼Œå®ƒçš„åŠŸèƒ½å°±å·²ç»å®Œæˆäº†\næ­¤æ—¶è¿˜ä¼šå°†å­è¿›ç¨‹æ”¾å…¥è¿è¡Œé˜Ÿåˆ—\n\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œå†æ¥ç†è§£ä¸€ä¸‹è¿›ç¨‹æ˜¯å¦‚ä½•è¢«è¿è¡Œçš„ğŸ‘‡\n2. å¦‚ä½•ç†è§£è¿›ç¨‹è¢«è¿è¡Œåœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæ¯ä¸€ä¸ªCPUéƒ½æœ‰ä¸€ä¸ªè¿è¡Œé˜Ÿåˆ—\nè¿™ä¸ªè¿è¡Œé˜Ÿåˆ—ä¹‹ä¸­å­˜æ”¾çš„ä¾¿æ˜¯task_structï¼Œç³»ç»Ÿä¼šä¾æ¬¡è¿è¡Œæ¯ä¸€ä¸ªè¿›ç¨‹ã€‚\n\nåœ¨ä¸Šé¢æˆ‘ä»¬çš„forkåˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œä¾¿ä¼šæŠŠå­è¿›ç¨‹æ”¾å…¥è¿è¡Œé˜Ÿåˆ—\n\næ‰€ä»¥å®é™…ä¸Šï¼Œforkå¹¶ä¸æ˜¯æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œè€Œæ˜¯åœ¨å…ˆè¿è¡Œäº†çˆ¶è¿›ç¨‹åï¼Œåˆåˆ›å»ºäº†ä¸€ä¸ªå­è¿›ç¨‹ã€‚è¿™ä¸¤ä¸ªè¿›ç¨‹å…±äº«ä»£ç ï¼Œè€Œä¸”å®ƒä»¬éƒ½æ˜¯æŒ‚è½½åœ¨åŒä¸€ä¸ªbashå‘½ä»¤è¡Œä¸Šï¼Œæ‰ä¼šå‡ºç°ä¸Šè¿°äº¤æ›¿æ‰“å°çš„æƒ…å†µã€‚\n\nç»“è¯­ä¸‹ç¯‡åšå®¢æ˜¯æœ‰å…³è¿›ç¨‹çŠ¶æ€çš„å†…å®¹ï¼Œé˜¿å·´é˜¿å·´ï¼Œå¥½ä¹…æ²¡å†™åšå®¢äº†\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘ä¸€äº›å·¥å…·çš„ç®€å•ä½¿ç”¨ï¼Œvim/gcc/gdb/make","url":"/posts/1451721896/","content":"æœ¬ç¯‡åšå®¢å°†ä»‹ç»linuxä¸‹é¢ä¸€äº›ç®€å•å·¥å…·çš„ä½¿ç”¨\n\n\n[TOC]\n1.vimç¼–è¾‘å™¨1.1 å®‰è£…vim# centossudo yum install vim# debiansudo apt-get install vim\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvimç¼–è¾‘å™¨ä¸‹ä¸èƒ½ä½¿ç”¨CTRL+Sæ¥ä¿å­˜æ–‡ä»¶ï¼Œå› ä¸ºåœ¨linuxä¸­è¿™ä¸ªå¿«æ·é”®çš„ä½œç”¨æ˜¯æš‚åœè¯¥ç»ˆç«¯ï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½ä¼šå¡ä½ï¼Œè¿™æ—¶å€™ä½¿ç”¨CTRL+Qå–æ¶ˆæš‚åœå°±å¯ä»¥äº†ã€‚\n1.2 æ–‡æœ¬æ“ä½œvimä¸€å…±æœ‰ä¸‰ç§æ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼ï¼Œç¼–è¾‘æ¨¡å¼ï¼Œåº•è¡Œæ¨¡å¼ï¼›\n\nè¿›å…¥vimæ—¶å°±æ˜¯é»˜è®¤çš„å‘½ä»¤æ¨¡å¼ï¼Œæ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜ä¼šè¢«è¯†åˆ«ä¸ºå‘½ä»¤\næŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ­¤æ—¶çš„è¾“å…¥æ˜¯æ­£å¸¸å†™å…¥æ–‡æœ¬\nåœ¨å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒæŒ‰è‹±æ–‡åŠè§’ä¸‹çš„ : è¿›å…¥åº•è¡Œæ¨¡å¼ï¼Œæ­¤æ—¶è¾“å…¥çš„æ˜¯åº•è¡Œæ¨¡å¼çš„ç‰¹æ®Šå‘½ä»¤ä¸é…ç½®\n\nä»¥ä¸‹æ˜¯å‘½ä»¤æ¨¡å¼ä¸‹çš„ä¸€äº›æ–‡æœ¬æ‰¹é‡åŒ–æ“ä½œ\nyy å¤åˆ¶å½“å‰è¡Œï¼Œnyyå¤åˆ¶nè¡Œp  ç²˜è´´å†å½“å‰è¡Œçš„åé¢ï¼Œnpç²˜è´´næ¬¡å‰ªè´´æ¿çš„å†…å®¹dd å‰ªåˆ‡ï¼ˆåˆ é™¤ï¼‰å½“å‰è¡Œï¼Œnddæ“ä½œnè¡Œu  æ’¤é”€ctrl+r  é‡åšshift+g å…‰æ ‡å¿«é€Ÿå®šä½åˆ°æ–‡æœ¬æœ«å°¾gg å…‰æ ‡å¿«é€Ÿç§»åŠ¨åˆ°æ–‡æœ¬å¤´n+shift+g å…‰æ ‡å®šä½åˆ°æ–‡æœ¬çš„ç¬¬nè¡Œshift+4 å…‰æ ‡å®šä½åˆ°è¯¥è¡Œæœ«å°¾shift+6 å…‰æ ‡å®šä½åˆ°è¯¥è¡Œå¼€å¤´w,b   ä»¥å•è¯ä¸ºå•ä½è¿›è¡Œç§»åŠ¨å…‰æ ‡h,j,k,l  å·¦ã€ä¸‹ã€ä¸Šã€å³shift+`  å¤§å°å†™å¿«é€Ÿåˆ‡æ¢r   æ›¿æ¢å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ï¼Œæ”¯æŒnrshift+r  æ‰¹é‡åŒ–æ›¿æ¢x  åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ï¼Œnxåˆ é™¤nä¸ª\n\nvimè¿›å…¥æ’å…¥æ¨¡å¼çš„å¿«æ·é”®æœ‰a i oï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒçš„åŠŸèƒ½\n1.3 åº•è¡Œæ¨¡å¼çš„æ“ä½œvimç¼–è¾‘å™¨ä¸­åº•è¡Œæ¨¡å¼çš„ä¸€äº›æ“ä½œå¦‚ä¸‹ã€‚åœ¨å…¶ä»–æ¨¡å¼ä¸‹æŒ‰escå³é€€å‡ºåˆ°åº•è¡Œæ¨¡å¼\n:w   &quot;åªä¿å­˜:q   &quot;ä¸ä¿å­˜é€€å‡º:wq  &quot;ä¿å­˜å¹¶é€€å‡º:reg &quot;æ‰“å¼€vimçš„å¯„å­˜å™¨é¢æ¿:syntax on &quot;å¼€å¯è¯­æ³•é«˜äº®:set nu    &quot;æ˜¾ç¤ºè¡Œå·:set nonu  &quot;å–æ¶ˆè¡Œå·æ˜¾ç¤º:set tabstop=4 &quot;è®¾ç½®tabçš„ç¼©è¿›ï¼Œé»˜è®¤ä¸º8:set softtabstop=4 &quot;softtabstopæ˜¯â€œé€¢8ç©ºæ ¼è¿›1åˆ¶è¡¨ç¬¦â€,å‰ææ˜¯ä½ tabstop=8:set shiftwidth=4 &quot;è®¾ç½®ç¨‹åºè‡ªåŠ¨ç¼©è¿›æ‰€ä½¿ç”¨çš„ç©ºæ ¼é•¿åº¦:set autoindent &quot;è‡ªåŠ¨å¯¹é½ä¸Šä¸€è¡Œï¼ˆè¿™ä¸ªé€‰é¡¹ä¼šå¯¼è‡´å¤åˆ¶çš„æ—¶å€™ä»£ç æ’ç‰ˆæ··ä¹±ï¼Œå¯ä»¥è€ƒè™‘å…³é—­ï¼Œæˆ–è€…å¼€å¯ç²˜è´´æ¨¡å¼ï¼‰:set paste &quot;å¼€å¯ç²˜è´´æ¨¡å¼:set mouse=a &quot;è®¾ç½®é¼ æ ‡æ¨¡å¼ï¼Œé»˜è®¤æ˜¯a:%s/A/B/g å°†å½“å‰æ–‡ä»¶ä¸­çš„Aå…¨éƒ¨æ›¿æ¢æˆB\nä¸Šé¢çš„ä¸€äº›é…ç½®ï¼Œå†™å…¥.vimrcé…ç½®æ–‡ä»¶å³å¯é•¿æ—¶ç”Ÿæ•ˆã€‚\nå¦‚æœéœ€è¦å†™å…¥.vimrcé…ç½®æ–‡ä»¶ï¼Œéœ€è¦å…ˆæŠŠ:å’Œæ³¨é‡Šéƒ½å»æ‰\n2.gcc&#x2F;g++ç¼–è¯‘å™¨g++æ“ä½œå’Œgccæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨gccä½œä¸ºæ¼”ç¤º\n2.1linuxä¸‹ä½¿ç”¨ä¸åŒå‘½ä»¤æ‰§è¡Œç¨‹åºçš„å‡ ä¸ªé˜¶æ®µç¬¬ä¸€æ­¥æ˜¯é¢„å¤„ç†ï¼Œåªåšæ–‡æœ¬æ“ä½œ\ngcc -E test.c -o tset.i\nåœ¨è¿™ä¸ªé˜¶æ®µä¼š\n\nå±•å¼€å¤´æ–‡ä»¶\nå¯¹defineç­‰ç­‰æ“ä½œè¿›è¡Œæ›¿æ¢\nå¤„ç†æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤\nåŒæ—¶åˆ é™¤æ‰€æœ‰æ³¨é‡Š\n\nç¼–è¯‘æ“ä½œ\ngcc -S test.i -o test.s\n\næ±‡ç¼–æ“ä½œ\ngcc -c test.s -o test.o\nå½¢æˆå¯æ‰§è¡Œç¨‹åº\ngcc test.o -o mytest\nè¿™ä¸‰ä¸ªå‘½ä»¤çš„é¡ºåºå°±æ˜¯EScå…¶ä¸­åªæœ‰-cé€‰é¡¹æ˜¯å°å†™çš„\næ­£å¥½å°±æ˜¯é”®ç›˜å·¦ä¸Šè§’escæŒ‰é”®çš„é¡ºåº\n2.2ä»£ç å’Œåº“è¿™é‡Œæˆ‘ä»¬æ“ä½œ&#x2F;ç¼–è¯‘çš„éƒ½æ˜¯è‡ªå·±çš„ä»£ç ã€‚æ¯”å¦‚printfæˆ‘æ˜¯è°ƒç”¨çš„cè¯­è¨€åº“ä¸­çš„å‡½æ•°ï¼Œå¹¶æ²¡æœ‰è‡ªå·±å®Œæˆä¸€ä¸ªæ‰“å°çš„å®ç°ã€‚\nè¿™æ—¶å€™å°±éœ€è¦å’Œç³»ç»Ÿçš„cè¯­è¨€åº“äº§ç”Ÿå…³è”\ncæ ‡å‡†åº“çš„ä½ç½®ls /lib64/libc*\nä¸Šé¢çš„æœ€åä¸€æ­¥å½¢æˆå¯æ‰§è¡Œç¨‹åºmytestæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠè¿™é‡Œçš„ä»£ç å’Œåº“é‡Œé¢çš„æ–¹æ³•è¿æ¥èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæœ€ç»ˆçš„å¯æ‰§è¡Œç¨‹åºï¼Œå¹¶ä½¿ç”¨./mytestæ¥æ‰§è¡Œè¾“å‡ºç»“æœ\næ‰€ä»¥æˆ‘ä»¬å¹³æ—¶è¯´çš„è£…ç¯å¢ƒå°±æ˜¯éœ€è¦å®‰è£…è¯­è¨€çš„é™æ€å’ŒåŠ¨æ€åº“ï¼Œè¿™æ ·æ‰èƒ½æ­£å¸¸åˆ©ç”¨åº“é‡Œé¢çš„å‡½æ•°è¿›è¡Œä»£ç çš„ç¼–è¯‘å¤„ç†\nåŒæ—¶æˆ‘ä»¬åœ¨ç¼–è¯‘å™¨é‡Œé¢å†™ä»£ç æ—¶çš„ä»£ç è¡¥å…¨åŠŸèƒ½ä¹Ÿæ˜¯é€šè¿‡åœ¨åº“å‡½æ•°çš„å¤´æ–‡ä»¶é‡Œé¢æœç´¢æ¥å®Œæˆçš„ã€‚\n\n2.3åŠ¨æ€&#x2F;é™æ€é“¾æ¥&amp;åº“\nåŠ¨æ€ï¼šlinux(.so) windows(.dll)\né™æ€ï¼šlinux(.a)  windows(.lib)\n\nç½‘å§æ˜¯å…¨æ ¡æ‰€æœ‰åŒå­¦å…±äº«çš„ï¼Œä½ åœ¨ç½‘å§å¼€çš„æœºå­æ˜¯å’Œåˆ«äººä¸€èµ·ç”¨çš„ã€‚ä»å­¦æ ¡å»ç½‘å§ï¼ˆåº“ï¼‰ï¼Œç„¶åè·å¾—ä¸€å°æœºå­ï¼ˆåº“å‡½æ•°ï¼‰ï¼Œæ‰“æ¸¸æˆï¼ˆæ‰§è¡Œæ–¹æ³•ï¼‰.è¿™å°±æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ç¼–è¯‘é“¾æ¥çš„è¿‡ç¨‹ï¼Œå³ä¸ºåŠ¨æ€åº“ã€‚\nå¦‚æœå­¦æ ¡å…è®¸å¸¦ç”µè„‘ï¼Œå½“ä½ æƒ³æ‰“æ¸¸æˆçš„æ—¶å€™ç”¨çš„æ˜¯è‡ªå·±çš„ç”µè„‘ï¼Œç”¨çš„æ˜¯è‡ªå·±çš„æ–¹æ³•ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯ç”¨çš„é™æ€åº“ã€‚æ¯ä¸€ä¸ªäººæ‹¥æœ‰è‡ªå·±çš„ç”µè„‘ï¼Œè¿™ä¸ªç”µè„‘çš„åŠŸèƒ½å’Œç½‘å§é‡Œé¢çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œå½“æˆ‘ä»¬æŠŠåº“ä¸­çš„ç›¸å…³ä»£ç ç›´æ¥æ‹·è´åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œå³ä¸ºé™æ€é“¾æ¥\n\nåŠ¨æ€é“¾æ¥ï¼šæ‰€æœ‰äººå…±äº«åŒä¸€ä¸ªèµ„æº\nä¼˜ç‚¹ï¼šå¯ä»¥èŠ‚çœèµ„æºï¼›\nç¼ºç‚¹ï¼šä¸€æ—¦åº“ä¸¢å¤±ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ç¨‹åºå¤±æ•ˆ\n\n\né™æ€é“¾æ¥ï¼šéƒ½ç”¨çš„æ˜¯è‡ªå·±çš„æ–¹æ³•ï¼Œå°†åº“é‡Œé¢çš„ä»£ç æ‹·è´åˆ°è‡ªå·±çš„æ–‡ä»¶ä¸­\nä¼˜ç‚¹ï¼šä¸ä¾èµ–ä»»ä½•åº“ï¼Œç¨‹åºå¯ä»¥ç‹¬ç«‹è¿è¡Œ\nç¼ºç‚¹ï¼šæµªè´¹èµ„æº\n\n\n\næŸ¥çœ‹é“¾æ¥çŠ¶æ€ï¼Œé»˜è®¤æ˜¯åŠ¨æ€é“¾æ¥\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ ldd mytest    linux-vdso.so.1 =&gt;  (0x00007ffc0dd8b000)    /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007f89bd66c000)    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f89bd185000)    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f89bcf81000)    /lib64/ld-linux-x86-64.so.2 (0x00007f89bd553000)\n\næŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºçš„æ„æˆ\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ file mytestmytest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=7cf0ffacfdaeadf8de9b4c0fea379b2a15c37e4c, not stripped\n\n2.3.1æ‰‹åŠ¨æŒ‡å®šè¿›è¡Œé™æ€é“¾æ¥gcc test.c -o mytest1 -static\né™æ€é“¾æ¥ç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºå¤§å°å¾ˆå¤§ï¼ŒåŠ¨æ€é“¾æ¥çš„é»˜è®¤æ˜¯8040å·¦å³çš„ä½“ç§¯ã€‚\n-rwxrwxr-x 1 muxue muxue   8416 Aug  7 07:34 mytest-rwxrwxr-x 1 muxue muxue 861288 Aug  7 07:44 hello\næ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ¨èä½¿ç”¨åŠ¨æ€é“¾æ¥ï¼Œé¿å…å ç”¨å¤ªå¤§çš„ç©ºé—´\n\nå½“æˆ‘é¦–æ¬¡å°è¯•è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ gcc hello.c -o hello -static/usr/bin/ld: cannot find -lccollect2: error: ld returned 1 exit status\nå› ä¸ºç³»ç»Ÿé‡Œé¢é»˜è®¤ä¸ä¼šå¸¦.açš„é™æ€åº“ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚è¿™æ—¶å€™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚\nsudo yum install -y glibc-staticsudo yum install -y libstdc++-static\nå®‰è£…æˆåŠŸï¼\nInstalled:  glibc-static.x86_64 0:2.17-326.el7_9                                                          Complete!\nè¿™æ—¶å€™æ‰§è¡Œå°±ä¸ä¼šæŠ¥é”™äº†ï¼\n[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ gcc hello.c -o hello -static[muxue@bt-7274:~/GIT/raspi/code/TestProgram]$ \n\n3.gdbè°ƒè¯•é»˜è®¤ç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºæ˜¯æ— æ³•è°ƒè¯•çš„ï¼åœ¨linuxé‡Œé¢å‘å¸ƒçš„å¯æ‰§è¡Œç¨‹åºé»˜è®¤æ˜¯releaseç‰ˆæœ¬çš„ï¼Œæ— æ³•debug\néœ€è¦æ·»åŠ ä¸€ä¸ª-gé€‰é¡¹è¿›è¡Œç¼–è¯‘\ngcc test.c -o test_g -g\nåŒæ—¶debugç‰ˆæœ¬çš„å¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿä¼šæ¯”releaseç‰ˆæœ¬å¤§ä¸€äº›ï¼Œè¿™å¤§çš„ç©ºé—´é‡Œé¢å­˜æ”¾çš„å°±æ˜¯è°ƒè¯•ä¿¡æ¯\n-rwxrwxr-x 1 muxue muxue 8360 Aug  7 07:50 test-rwxrwxr-x 1 muxue muxue 9376 Aug  7 07:53 test_g\n\nåˆ©ç”¨ä¸‹é¢è¿™ä¸ªè¯­å¥å¯ä»¥æŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºçš„è°ƒè¯•ä¿¡æ¯\nreadelf -S test | grep debug\nå¯ä»¥çœ‹åˆ°debugç‰ˆæœ¬åŒ…å«äº†å¾ˆå¤šè°ƒè¯•ä¿¡æ¯ï¼Œè€Œreleaseç‰ˆæœ¬é‡Œé¢æ²¡æœ‰\n[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ readelf -S test | grep debug[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ readelf -S test_g | grep debug  [27] .debug_aranges    PROGBITS         0000000000000000  00001061  [28] .debug_info       PROGBITS         0000000000000000  00001091  [29] .debug_abbrev     PROGBITS         0000000000000000  00001122  [30] .debug_line       PROGBITS         0000000000000000  00001164  [31] .debug_str        PROGBITS         0000000000000000  0000119f\n3.1å°è¯•è°ƒè¯•ä¸€ä¸ªç®€å•çš„ä»£ç ä»¥ä¸‹æ˜¯ä¸€äº›ç®€å•çš„gdbæ“ä½œ\nb è¡Œå·ï¼šæ‰“æ–­ç‚¹info bï¼šæŸ¥çœ‹æ–­ç‚¹d æ–­ç‚¹ç¼–å·ï¼šå–æ¶ˆæ–­ç‚¹l è¡Œå·ï¼šæ˜¾ç¤ºä»£ç l mainï¼šæ˜¾ç¤ºåŒ…å«mainçš„é‚£ä¸€è¡Œrï¼šrunï¼Œå¼€å§‹è¿è¡Œç¨‹åº,è·³åˆ°ç¬¬ä¸€ä¸ªæ–­ç‚¹r å‚æ•°1 å‚æ•°2ï¼šè¿è¡Œç¨‹åºçš„æ—¶å€™ç»™ç¨‹åºä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼Œè·³åˆ°ç¬¬ä¸€ä¸ªæ–­ç‚¹sï¼šstepï¼Œé€è¯­å¥ï¼Œå¯¹åº”vsçš„F11ï¼ˆè¿›å…¥å‡½æ•°ï¼‰nï¼šnextï¼Œé€è¿‡ç¨‹ï¼Œå¯¹åº”vsçš„F10cï¼šcontinueï¼Œè·³è½¬é“ä¸‹ä¸€ä¸ªæ–­ç‚¹pï¼šæŸ¥çœ‹å˜é‡display / undisplayï¼šå¸¸æ˜¾ç¤º æˆ– å–æ¶ˆå¸¸æ˜¾ç¤ºuntil è¡Œå·ï¼šè·³è½¬åˆ°æŒ‡å®šè¡Œfinishï¼šæ‰§è¡Œå®Œä¸€ä¸ªå‡½æ•°ååœä¸‹btï¼šæŸ¥çœ‹å‡½æ•°è°ƒç”¨å †æ ˆsignal ä¿¡å·åï¼šç»™å½“å‰æ­£åœ¨è°ƒè¯•çš„ç¨‹åºå‘é€ä¿¡å·\n\næé†’ï¼šç¼–è¯‘çš„æ—¶å€™è®°å¾—åŠ ä¸Š-gé€‰é¡¹æŒ‡å®šdebugç‰ˆæœ¬\nä¸‹é¢æ˜¯ä¸€ä¸ªç”¨äºæ¼”å¼çš„ç¤ºä¾‹ä»£ç \n#include &lt;stdio.h&gt;int Add(int a,int b)&#123;    printf(&quot;Add(a,b)\\n&quot;);    return a+b;&#125;int main()&#123;    printf(&quot;hello wolrdï¼\\n&quot;);    int ret=Add(1,20);    printf(&quot;ret: %d\\n&quot;,ret);    return 0;&#125;\n\ndebugæ“ä½œæ¼”ç¤ºå¦‚ä¸‹ï¼Œå‘½ä»¤æ˜¯gdb å¯æ‰§è¡Œæ–‡ä»¶åï¼›\n[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ gdb test_gGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7Copyright (C) 2013 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;and &quot;show warranty&quot; for details.This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.For bug reporting instructions, please see:&lt;http://www.gnu.org/software/gdb/bugs/&gt;...Reading symbols from /home/muxue/GIT/raspi/vim/TestGdb/test_g...done.(gdb) l23       int Add(int a,int b)4       &#123;5           printf(&quot;Add(a,b)\\n&quot;);6           return a+b;7       &#125;89       int main()10      &#123;11          printf(&quot;hello wolrdï¼\\n&quot;);(gdb) b 11Breakpoint 1 at 0x4005a7: file test.c, line 11.(gdb) llUndefined command: &quot;ll&quot;.  Try &quot;help&quot;.(gdb) l 105           printf(&quot;Add(a,b)\\n&quot;);6           return a+b;7       &#125;89       int main()10      &#123;11          printf(&quot;hello wolrdï¼\\n&quot;);12          int ret=Add(1,20);13          printf(&quot;ret: %d\\n&quot;,ret);14          return 0;(gdb) b 13Breakpoint 2 at 0x4005c3: file test.c, line 13.(gdb) rStarting program: /home/muxue/GIT/raspi/vim/TestGdb/test_g Breakpoint 1, main () at test.c:1111          printf(&quot;hello wolrdï¼\\n&quot;);Missing separate debuginfos, use: debuginfo-install glibc-2.17-326.el7_9.x86_64(gdb) shello wolrdï¼12          int ret=Add(1,20);(gdb) sAdd (a=1, b=20) at test.c:55           printf(&quot;Add(a,b)\\n&quot;);(gdb) p retNo symbol &quot;ret&quot; in current context.(gdb) finishRun till exit from #0  Add (a=1, b=20) at test.c:5Add(a,b)0x00000000004005c0 in main () at test.c:1212          int ret=Add(1,20);Value returned is $1 = 21(gdb) sBreakpoint 2, main () at test.c:1313          printf(&quot;ret: %d\\n&quot;,ret);(gdb) p ret$2 = 21(gdb) p &amp;ret$3 = (int *) 0x7fffffffdf3c(gdb) sret: 2114          return 0;(gdb) s15      &#125;(gdb) qA debugging session is active.        Inferior 1 [process 5932] will be killed.Quit anyway? (y or n) y[muxue@bt-7274:~/GIT/raspi/vim/TestGdb]$ \næ•´ä½“çš„æ“ä½œå¹¶ä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å°è¯•ä¸€ç•ªï¼Œæœ‰é—®é¢˜å¯ä»¥è¯„è®ºæå‡º\n\n4.make&#x2F;makefileè¿™æ˜¯ä¸€ä¸ªæ‰¹é‡å¤„ç†å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡makeæ¥æ‰¹é‡ç¼–è¯‘ä¸€äº›ä»£ç ï¼Œé¿å…æ‰‹åŠ¨æ•²æ‰“å‘½ä»¤è¡Œçš„å‡ºé”™é—®é¢˜ã€‚è¿™åœ¨å¤§å‹é¡¹ç›®ä¸­éå¸¸é‡è¦ã€‚\nmakefileæ˜¯å½“å‰è·¯å¾„ä¸‹çš„ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œå­˜æ”¾äº†å¦‚ä¸‹å†…å®¹ï¼š\n\nä¾èµ–å…³ç³»\nä¾èµ–æ–¹æ³•\n\nå‡è®¾æˆ‘ä»¬éœ€è¦å½¢æˆä¸€ä¸ªcè¯­è¨€çš„å¯æ‰§è¡Œæ–‡ä»¶\nä¾èµ–å…³ç³»ï¼štest -&gt; test.cä¾èµ–æ–¹æ³•ï¼šgcc test.c -o test\nå…¶å¯¹åº”çš„makefileå¦‚ä¸‹\ntest:test.c    gcc test.c -o mytest\næ³¨æ„ï¼Œç¬¬äºŒè¡Œçš„ä¾èµ–æ–¹æ³•å¿…é¡»tabç¼©è¿›ï¼Œä¸ç„¶æ— æ³•æ­£å¸¸è°ƒç”¨ï¼\nç¼–å†™å¥½makefileåï¼Œç›´æ¥åœ¨å½“å‰è·¯å¾„ä¸‹æ‰§è¡Œmakeã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥æ‰¾åç§°ä¸ºmakefile&#x2F;Makefileçš„æ–‡ä»¶æ‰§è¡Œ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makegcc test.c -o test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ ./testhello wolrdï¼Add(a,b)ret: 21\n\næˆ‘ä»¬è¿˜å¯ä»¥å†™ä¸€ä¸ªæ¸…é™¤æŒ‡ä»¤ï¼Œç”¨äºåœ¨ç¼–è¯‘ååˆ é™¤å¤§é‡ä¸´æ—¶å‡ºç°çš„å¯æ‰§è¡Œç¨‹åº\n.PHONY:cleanclean:    rm -f test\nåœ¨åŸæœ¬çš„makefileåè¿½åŠ è¿™éƒ¨åˆ†å†…å®¹å³å¯\né€šè¿‡make cleanæ¥æ¸…ç†æ–‡ä»¶\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ make cleanrm -f test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c\n4.1å‡ºç°missing separatorè§£å†³æ–¹æ¡ˆå½“æˆ‘æ‰§è¡Œmake cleançš„æ—¶å€™å‡ºç°äº†è¿™ä¸ªæŠ¥é”™\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ make cleanmakefile:4: *** missing separator.  Stop.\nè¿™æ˜¯å› ä¸ºåœ¨æˆ‘çš„makefileä¸­ï¼Œä¾èµ–æ–¹æ³•å‰é¢çš„ç¼©è¿›æ˜¯4ä¸ªç©ºæ ¼ï¼Œè€Œä¸æ˜¯1ä¸ªtab\næ³¨æ„éœ€è¦ä½¿ç”¨tabè¿›è¡Œç¼©è¿›ï¼Œè€Œä¸èƒ½æ‰‹åŠ¨æ‰“ç©ºæ ¼ï¼\n4.2makeå¦‚ä½•åˆ¤æ–­éœ€ä¸éœ€è¦é‡æ–°ç”Ÿæˆï¼Ÿå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…æ‰§è¡Œè¿‡makeä¹‹åï¼Œå†æ¬¡makeï¼Œç³»ç»Ÿä¼šæç¤ºå½“å‰çš„å¯æ‰§è¡Œç¨‹åºtestå·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°ã€‚\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makegcc test.c -o test[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ lsmakefile  test  test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ makemake: `test&#x27; is up to date.[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ \n\né‚£ä¹ˆç³»ç»Ÿæ˜¯å¦‚ä½•å®åˆ«å‡ºæ¥æˆ‘ä»¬çš„åŸä»£ç æ˜¯å¦æœ‰è¿‡æ›´æ”¹çš„å‘¢ï¼Ÿ\n4.2.1 statæ—¶é—´æˆ³æˆ‘ä»¬å¯ä»¥ä½¿ç”¨statå‘½ä»¤æŸ¥çœ‹ä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´æˆ³\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test  File: â€˜testâ€™  Size: 8440            Blocks: 24         IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450818     Links: 1Access: (0775/-rwxrwxr-x)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:18:40.463120772 +0800Modify: 2022-08-07 17:18:40.463120772 +0800Change: 2022-08-07 17:18:40.463120772 +0800 Birth: -[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 201             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 09:30:39.043992599 +0800Modify: 2022-08-07 09:30:38.544992699 +0800Change: 2022-08-07 09:30:38.544992699 +0800 Birth: -\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œä¸€ä¸ªæ–‡ä»¶çš„æ—¶é—´æˆ³åˆ†ä¸º3ä¸ªï¼Œåˆ†åˆ«æ˜¯AccessæŸ¥çœ‹ã€modifyä¿®æ”¹ï¼ŒChangeæ›´æ”¹ã€‚\nç¬¬ä¸€ä¸ªæŸ¥çœ‹å¾ˆå¥½ç†è§£ï¼Œé‚£ä¹ˆmodifyå’Œchangeæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸ªç¨‹åºçœ‹çœ‹æƒ…å†µ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ vim test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 207             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:25:12.958082845 +0800Modify: 2022-08-07 17:25:12.808082859 +0800Change: 2022-08-07 17:25:12.808082859 +0800 Birth: -\n\nè¿™é‡Œæˆ‘é€šè¿‡vimè¿›å…¥è¯¥æ–‡ä»¶ï¼Œæ·»åŠ äº†ä¸€è¡Œæ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”äºä¹‹å‰çš„æ—¶é—´ï¼Œ3ä¸ªæ—¶é—´æˆ³éƒ½è¢«ä¿®æ”¹æˆäº†æœ€æ–°çš„æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶çš„æ—¶å€™ä¸€å®šä¼šæŸ¥çœ‹ï¼Œä¹Ÿæœ‰modifyå’Œchange\nè€Œå¦‚æœæˆ‘åªæ˜¯ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼Œå¹¶ä¸ä¿®æ”¹å®ƒçš„å†…å®¹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ chmod o-r test.c[muxue@bt-7274:~/GIT/raspi/vim/TestMake]$ stat test.c  File: â€˜test.câ€™  Size: 207             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1450788     Links: 1Access: (0660/-rw-rw----)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-08-07 17:25:12.958082845 +0800Modify: 2022-08-07 17:25:12.808082859 +0800Change: 2022-08-07 17:27:34.378068762 +0800 Birth: -\n\nå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰changeå‘ç”Ÿäº†å˜åŒ–ã€‚\næ–‡ä»¶=å†…å®¹+å±æ€§ï¼Œåœ¨è¿™é‡Œçš„modifyå¯¹åº”çš„å°±æ˜¯å†…å®¹ä¿®æ”¹ï¼Œè€Œchangeå¯¹åº”çš„æ˜¯å±æ€§ä¿®æ”¹ã€‚è€Œå½“æˆ‘ä»¬ä¿®æ”¹æ–‡ä»¶å†…å®¹çš„æ—¶å€™ï¼Œä¼šå¼•èµ·æ–‡ä»¶å¤§å°çš„å˜åŒ–ï¼Œä¹Ÿæ˜¯å±æ€§å˜åŒ–ï¼Œæ‰€ä»¥ä¿®æ”¹å†…å®¹ä¹Ÿå¯èƒ½ä¼šå¼•èµ·changeçš„å˜åŒ–ï¼\n\näº†è§£äº†è¿™ä¸ªæ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç³»ç»Ÿæ˜¯æ€ä¹ˆåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°ç”Ÿæˆå°±å¾ˆç®€å•äº†ï¼šæ¯”è¾ƒä¾èµ–å…³ç³»ä¸­å·¦è¾¹çš„ç›®æ ‡æ–‡ä»¶å’Œå³è¾¹æºæ–‡ä»¶çš„modifyæ—¶é—´ï¼Œå¦‚æœæºæ–‡ä»¶çš„modifyæ—¶é—´æ—©äºç›®æ ‡æ–‡ä»¶ï¼Œé‚£ä¹ˆè¯´æ˜ç›®æ ‡æ–‡ä»¶ç”Ÿæˆä¹‹åï¼Œæºæ–‡ä»¶å¹¶æ²¡æœ‰å‘ç”Ÿæ›´æ”¹ï¼Œé‚£ä¹ˆä¹Ÿæ— éœ€å†æ¬¡ç”Ÿæˆ\n4.2.2  PHONYå…³é”®å­—çš„ä½œç”¨åœ¨å‰é¢æåˆ°çš„cleanä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†.PHONYå…³é”®å­—æ¥ä¿®é¥°cleanã€‚\nè¿™ä¸ªå…³é”®å­—è®©cleanä½œä¸ºä¸€ä¸ªä¼ªç›®æ ‡ï¼Œä¸”æ€»æ˜¯è¢«æ‰§è¡Œ\n\næ€ä¹ˆç†è§£è¿™ä¸ªæ€»æ˜¯è¢«æ‰§è¡Œï¼Ÿ\n\nå½“æˆ‘ä»¬çš„æºæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ›´æ”¹çš„æ—¶å€™ï¼Œmakeä¸ä¼šé‡æ–°ç”Ÿæˆï¼Œè¿™ä¸ªå«åšæ€»æ˜¯ä¸è¢«æ‰§è¡Œ\n\nPHONYå…³é”®å­—çš„ä½œç”¨å°±æ˜¯å±è”½ç³»ç»Ÿå¯¹äºmodifyæ—¶é—´çš„æ£€æŸ¥ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šå¼ºåˆ¶æ‰§è¡Œè¯¥è¯­å¥çš„ä¾èµ–æ–¹æ³•ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åªæœ‰åœ¨cleançš„æ—¶å€™æ‰ä¼šä½¿ç”¨.PHONYå…³é”®å­—æ¥ä¿®é¥°\n4.3 $@ $^ é«˜çº§ç”¨æ³•makefileä¸­å¦‚æœæŸä¸ªé¡¹ç›®æœ‰å¤šä¸ªä¾èµ–é¡¹æ–‡ä»¶ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼æ¥å†™ã€‚\nmytest:test1.c test2.c\tgcc -o $@ $^\n\nç¬¬ä¸€ä¸ª$@ä»£è¡¨æ˜¯å·¦è¾¹çš„ç›®æ ‡æ–‡ä»¶ï¼Œ$^ä»£è¡¨æ˜¯æºæ–‡ä»¶ï¼Œè¿™æ ·å†™å¯ä»¥å®ç°å…¨åŒ¹é…ï¼Œä¸éœ€è¦è‡ªå·±ä¸€ä¸ªä¸€ä¸ªå†™æºæ–‡ä»¶äº†\n[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ cat makefiletest:test.c add.c\tgcc $^ -o $@[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ makegcc test.c add.c -o test[muxue@bt-7274:~/git/linux/code/22-08-07_make_gdb]$ ./test4\n\n4.4 å®šä¹‰å˜é‡ç›´æ¥ä½¿ç”¨ç­‰äºå·å³å¯ï¼Œè€Œä¸”ä¸éœ€è¦æ·»åŠ å¼•å·ã€‚\nCC = g++FLAGS = -std=c++11\n\n\n4.5 å‘½ä»¤è¡Œæä¾›å˜é‡makefileé™¤äº†å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿç¼–è¯‘é¡¹ç›®ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥æŠŠä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ç»™å†™è¿›å»ã€‚\næ¯”å¦‚æ‰“åŒ…å‹ç¼©æŸä¸€ä¸ªç›®å½•çš„æ–‡ä»¶ï¼ˆå¤‡ä»½ï¼‰ï¼Œç”¨äº†makefileåï¼Œæˆ‘ä»¬æƒ³å¤‡ä»½ã€æ‰“åŒ…æŸä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œåªéœ€è¦makeä¸€ä¸‹ï¼Œä¸éœ€è¦å†™ä¸€é•¿ä¸²çš„tarå‘½ä»¤äº†ã€‚\ntar -zcvf ./.bak/code.tar.gz ./code\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œå°†codeç›®å½•æ‰“åŒ…ç”Ÿæˆä¸€ä¸ªcode.tar.gzå‹ç¼©æ–‡ä»¶ï¼Œæ”¾å…¥åˆ°å½“å‰è·¯å¾„çš„.bakæ–‡ä»¶å¤¹ä¸­ã€‚\næ­¤æ—¶æˆ‘çš„éœ€æ±‚æ˜¯ç»™è¿™ä¸ªå‘½ä»¤ä¼ ä¸€ä¸ªå‚æ•°æ—¥æœŸï¼Œè®©ç”Ÿæˆçš„å‹ç¼©åŒ…æ–‡ä»¶åèƒ½å¸¦ä¸Šæ—¥æœŸï¼Œmakefileå¯ä»¥è¿™ä¹ˆå†™\n.PHONY:tartar:\ttar -zcvf ./.bak/code$&#123;d&#125;.tar.gz ./code\n\nè¿™é‡Œç•™ä¸‹äº†dä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨æ‰§è¡Œmakeå‘½ä»¤çš„æ—¶å€™æŒ‡å®š\nmake d=230128\n\nè¿™æ ·æ“ä½œäº†ä¹‹åï¼Œæ‰“åŒ…å‹ç¼©å‡ºæ¥çš„æ–‡ä»¶åå°±ä¼šæ˜¯code230128.tar.gz ï¼Œå®Œç¾è¾¾æˆç›®çš„ï¼\n\n5.å°è¯•ç¼–å†™ä¸€ä¸ªç®€å•çš„linuxè¿›å›¾æ¡å½“æˆ‘ä»¬åœ¨linuxç³»ç»Ÿä¸Šä¸‹è½½ä¸€äº›è½¯ä»¶çš„æ—¶å€™ï¼Œæ€»æ˜¯å¯ä»¥çœ‹åˆ°ç”¨æ–‡å­—ç»„æˆçš„è¿›åº¦æ¡ï¼Œè¿™äº›è¿›å›¾æ¡æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„å‘¢ï¼Ÿ\nä¸‹é¢æˆ‘ä»¬å¯ä»¥å°è¯•ç”¨Cè¯­è¨€å†™å‡ºä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸€äº›æ¦‚å¿µ\n5.1 ç¼“å†²åŒºåœ¨æˆ‘ä¹‹å‰çš„Cè¯­è¨€æ–‡ä»¶æ“ä½œåšå®¢ä¸­ï¼Œæåˆ°äº†ä¸€ä¸ªç¼“å†²åŒºçš„æ¦‚å¿µã€‚ç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬printfä¸€é“å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œç³»ç»Ÿæ˜¯å…ˆæŠŠè¿™ä¸ªå­—ç¬¦ä¸²å†™å…¥ç¼“å†²åŒºï¼Œå†æŠŠç¼“å†²åŒºçš„å†…å®¹è¾“å‡ºåˆ°å±å¹•ä¸Š\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå†linuxç¯å¢ƒä¸­ï¼Œ\\nä¼šè‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒºã€‚\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main()&#123;\twhile (1)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°\t\tsleep(1);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep\t&#125;\treturn 0;&#125;\n\nå¦‚æœæˆ‘ä»¬å»æ‰\\nï¼Œç³»ç»Ÿåˆ™ä¸ä¼šç«‹å³æ‰“å°å†…å®¹ã€‚\n\nè¿™æ—¶å€™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ç”¨fflush(stdout)åˆ·æ–°ä¸€ä¸‹ç¼“å†²åŒºï¼Œç°åœ¨ç¨‹åºä¼šåœ¨ä¸€è¡Œä¸­æ‰“å°äº†\nfflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\n\n\n5.2 å›è½¦å’Œæ¢è¡Œåœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­æåˆ°çš„æ¢è¡Œä¸€èˆ¬æŒ‡çš„æ˜¯å›è½¦+æ¢è¡Œ\nå®é™…ä¸Šï¼Œå›è½¦å’Œæ¢è¡Œæ˜¯æœ‰åŒºåˆ«çš„ï¼š\n\nå›è½¦ï¼šå…‰æ ‡å›åˆ°è¯¥è¡Œçš„æœ€å‰é¢\næ¢è¡Œï¼šå…‰æ ‡å»åˆ°ä¸‹ä¸€è¡Œï¼Œä½†æ˜¯ä½ç½®ä¸å˜\n\nåœ¨Cè¯­è¨€ä¸­ï¼Œ\\næ‰§è¡Œçš„å°±æ˜¯å›è½¦+æ¢è¡Œï¼Œè€Œ\\ræ˜¯å›è½¦\né‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæ¥å®ç°ä¸€ä¸ªç®€å•çš„å€’è®¡æ—¶\n#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;int main()&#123;    int i=9;\twhile (i&gt;=0)\t&#123;\t\tprintf(&quot;%d\\r&quot;,i);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°         fflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\t\tsleep(1);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep        i--;\t&#125;\treturn 0;&#125;\n\n\n\n5.3 è¿›åº¦æ¡åšå¥½å‰é¢çš„å‡†å¤‡å·¥ä½œåï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æ¥æ‰“å°ä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡äº†ï¼\n#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#define NUM 102#define STYLE &#x27;#&#x27;void process()&#123;    char bar[NUM];    memset(bar, &#x27;\\0&#x27;, sizeof(bar));    const char *lable = &quot;|/-\\\\&quot;;//åœ¨æœ«å°¾æ‰“å°ä¸€ä¸ªè½¬åŠ¨çš„â€œå°åœ†åœˆâ€    int cnt = 0;    while(cnt &lt;= 100)    &#123;        //é»˜è®¤æ˜¯å³å¯¹é½ï¼Œä½¿ç”¨-æ”¹ä½å·¦å¯¹é½        printf(&quot;åŠ è½½ä¸­:%-100s[%d\\%][%c]\\r&quot;, bar, cnt, lable[cnt%4]);        fflush(stdout);        bar[cnt++] = STYLE;//æ‰“å°é¢„å®šä¹‰çš„ç¬¦å·        usleep(200000);    &#125;    printf(&quot;\\n&quot;);&#125;int main()&#123;    process();    return 0;&#125;\n\n\nè¿™æ ·ä¸€ä¸ªç®€å•çš„è¿›åº¦æ¡å°±æå®šè¾£ï¼\nåè®°linuxä¸­ä¸€äº›å·¥å…·çš„ä½¿ç”¨å¯èƒ½ä¸ä¼šæœ‰windowsçš„ç¼–è¯‘å™¨é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ¯”å¦‚GDBè°ƒè¯•ã€‚ä½†æ˜¯åœ¨åç»­ç¼–å†™ä¸€äº›åªæœ‰linuxå¹³å°æ‰èƒ½è¿è¡Œçš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»å­¦ä¼šä½¿ç”¨è¿™äº›å·¥å…·ï¼Œå¦åˆ™æ“ä½œèµ·æ¥ä¼šéå¸¸éº»çƒ¦ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæœ‰ä»»ä½•é—®é¢˜éƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘ç¯å¢ƒå˜é‡","url":"/posts/977518181/","content":"æœ¬ç¯‡åšå®¢è®°å½•äº†Linuxä¸‹ä¸€äº›æ¦‚å¿µçš„è§£é‡Šï¼Œä»¥åŠç¯å¢ƒå˜é‡çš„ç›¸å…³æ“ä½œ\n\n\n\næ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n1.æ¦‚å¿µè§£é‡Š1.1 è¿›ç¨‹ç«äº‰æ€§ç³»ç»Ÿè¿›ç¨‹çš„æ•°ç›®è¾ƒå¤šã€‚è€ŒCPUèµ„æºç­‰å…¶ä»–èµ„æºä¸å¤Ÿç”¨ï¼Œæ‰€ä»¥è¿›ç¨‹ä¹‹é—´å­˜åœ¨ç«äº‰æ€§ï¼Œä¹Ÿå°±å‡ºç°äº†ä¼˜å…ˆçº§ï¼Œè¿™åœ¨ä¸Šç¯‡åšå®¢ä¸­æœ‰è¿‡ä»‹ç»\n1.2 è¿›ç¨‹ç‹¬ç«‹æ€§è¿›ç¨‹è¿è¡Œå…·æœ‰ç‹¬ç«‹æ€§ï¼Œä¸ä¼šå› ä¸ºæŸä¸ªè¿›ç¨‹å‡ºé”™ï¼Œè€Œå½±å“å…¶ä»–è¿›ç¨‹çš„è¿è¡Œ\næˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯å†…æ ¸ç»“æ„task_truck+ä»£ç å’Œæ•°æ®ç»„æˆçš„ã€‚è€Œlinuxç³»ç»Ÿæ˜¯é€šè¿‡è¿›ç¨‹åœ°å€ç©ºé—´æ–¹å¼æ¥ä¿è¯è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼Œé‚£æ˜¯ä¸‹ç¯‡åšå®¢ä¼šè®²åˆ°çš„å†…å®¹\n1.3 å¹¶è¡Œå¹¶è¡Œï¼šå¤šä¸ªè¿›ç¨‹åœ¨å¤šä¸ªCPUä¸‹åˆ†å‰²ï¼ŒåŒæ—¶è¿è¡Œ\n\næˆ‘ä»¬ä¸€èˆ¬çš„ç”µè„‘éƒ½æ˜¯åªæœ‰1ä¸ªcpuï¼Œé‚£æ˜¯æ€ä¹ˆåšåˆ°å¤šä¸ªè¿›ç¨‹è¿è¡Œçš„ï¼Ÿ\næ³¨æ„ï¼šå¤šä¸ªè¿›ç¨‹éƒ½åœ¨ç³»ç»Ÿä¸­è¿è¡Œâ‰ å¤šä¸ªè¿›ç¨‹åœ¨ç³»ç»Ÿä¸­åŒæ—¶è¿è¡Œã€‚è¦æƒ³çŸ¥é“è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Œéœ€è¦äº†è§£å¹¶å‘çš„æ¦‚å¿µ\n1.4 å¹¶å‘å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿéƒ½æ˜¯åˆ†æ—¶çš„ï¼Œæ“ä½œç³»ç»Ÿä¼šç»™æ¯ä¸€ä¸ªè¿›ç¨‹èµ‹äºˆä¸€ä¸ªæ—¶é—´ç‰‡ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªè°ƒåº¦å‘¨æœŸä¸­ï¼Œå¯ä»¥è°ƒç”¨åˆ°æ¯ä¸€ä¸ªéœ€è¦è¿è¡Œçš„è¿›ç¨‹ã€‚\nè¿™æ ·ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…ï¼Œå¤šä¸ªè¿›ç¨‹ä¼šé€šè¿‡äº¤å‰è¿è¡Œçš„æ–¹å¼ï¼Œè®©æ¯ä¸€ä¸ªè¿›ç¨‹çš„ä»£ç ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…éƒ½èƒ½å¾—åˆ°è¿è¡Œ\n\næ¯”å¦‚æ¯ä¸€ä¸ªè¿›ç¨‹è¿è¡Œ10msï¼Œå‡è®¾æœ‰10ä¸ªè¿›ç¨‹éœ€è¦è¿è¡Œï¼Œé‚£ä¹ˆåœ¨1så†…ï¼Œè¿™10ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«è¿è¡Œ10æ¬¡ã€‚1s=1000ms\n\ncpuè¿›è¡Œå¤šä¸ªè¿›ç¨‹çš„å¿«é€Ÿäº¤æ›¿è¿è¡Œï¼Œä»¥å®ç°æˆ‘ä»¬çœ‹åˆ°çš„å•cpuè¿è¡Œå¤šä¸ªè¿›ç¨‹çš„æƒ…å†µ\nè¿™ç§æƒ…å†µå°±å«åšå¹¶å‘\n\n1.5  è¿›ç¨‹ä¼˜å…ˆçº§ç®¡ç†æ“ä½œç³»ç»Ÿæ­£åœ¨è¿è¡Œä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹çš„æ—¶å€™ï¼Œçªç„¶æ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§æ•°æ®æ€ä¹ˆåŠï¼Ÿ\n\næ“ä½œç³»ç»Ÿæ”¯æŒä¸åŒä¼˜å…ˆçº§è¿›ç¨‹çš„å­˜åœ¨\nåŒä¸€ä¸ªä¼˜å…ˆçº§çš„è¿›ç¨‹å¯ä»¥å­˜åœ¨å¤šä¸ª\næ“ä½œç³»ç»Ÿæ˜¯ç”¨é˜Ÿåˆ—æ¥ç®¡ç†è¿›ç¨‹çš„ï¼Œé˜Ÿåˆ—åªæ”¯æŒæ”¯æŒå°¾åˆ å°¾æ’\n\nè¿™ç§æƒ…å†µè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿå¦‚æœç»™é˜Ÿåˆ—å¤´æ’ï¼Œé‚£ä¸å°±ç ´åäº†é˜Ÿåˆ—çš„å±æ€§äº†ï¼Ÿ\nå®é™…ä¸Šï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯ç”¨å•ä¸€é˜Ÿåˆ—æ¥è¿›è¡Œç®¡ç†çš„ï¼Œè€Œæ˜¯ç”¨äº†ä¸€ä¸ªå“ˆå¸Œæ¡¶æ¥è¿›è¡Œå¤„ç†\n\nå¯ä»¥ç†è§£ä¸ºå“ˆå¸Œæ¡¶æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåé¢é“¾æ¥äº†ä¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹\nå½“ä¸€ä¸ªæ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹éœ€è¦è¿è¡Œçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåªéœ€è¦æ”¹å˜cpuå½“å‰è¿è¡Œé˜Ÿåˆ—åœ¨å“ˆå¸Œæ¡¶é‡Œé¢çš„æŒ‡å‘ï¼Œå³å¯é©¬ä¸Šå®Œæˆé«˜ä½ä¼˜å…ˆçº§è¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢\næ“ä½œç³»ç»Ÿè¿˜ä¼šç®¡ç†ä¸€ä¸ªä½å›¾ï¼Œç”¨äºæ ‡è¯†æŸä¸€ä¸ªä¼˜å…ˆçº§å†…æ˜¯å¦å­˜åœ¨è¿›ç¨‹\n\nå“ˆå¸Œå’Œä½å›¾è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„éƒ½ä¼šåœ¨C++çš„åšå®¢ä¸­è®²è§£\n\né™¤äº†ä½å›¾å’Œå“ˆå¸Œè¡¨ä¹‹å¤–ï¼Œæ“ä½œç³»ç»Ÿè¿˜ä¼šç®¡ç†ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨äºæ ‡è¯†ç›®å‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹å“ˆå¸Œæ¡¶activeï¼Œä»¥åŠæ–°è¿›ç¨‹çš„ç®¡ç†æ¡¶old\nstruct runqueue&#123;\thash_queue* active;\thash_queue* old;&#125;;\n\nå½“å‡ºç°æ–°è¿›ç¨‹çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¸ä¼šæŠŠå®ƒç›´æ¥é“¾æ¥åˆ°activeé‡Œé¢ï¼Œè€Œæ˜¯æ”¾å…¥oldä¸­ï¼›\nactiveå†…éƒ¨çš„è¿›ç¨‹è¿è¡Œå®Œäº†ä¹‹åï¼Œåªéœ€è¦swapä¸€ä¸‹active/oldæŒ‡é’ˆï¼Œå³å¯å®Œæˆæ–°è¿›ç¨‹è¡¨å’Œè¿è¡Œå®Œçš„æ—§è¡¨ä¹‹é—´çš„äº¤æ¢ï¼\n\nè¿™ç§è°ƒåº¦ç®—æ³•ä¹Ÿè¢«ç§°ä¸ºå¤§O(1)è°ƒåº¦æ³•\n\n1.6 è¿›ç¨‹é—´åˆ‡æ¢CPUå­˜åœ¨å¯„å­˜å™¨ï¼Œè¿™äº›å¯„å­˜å™¨å‚¨å­˜äº†è¿›ç¨‹çš„ä¸´æ—¶æ•°æ®\n\nå¯„å­˜å™¨åˆ†ä¸ºå¯è§å¯„å­˜å™¨ï¼ˆeax&#x2F;ebxï¼‰å’Œä¸å¯è§å¯„å­˜å™¨\n\nå½“è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå„ç§ä¸´æ—¶æ•°æ®\nint test()&#123;\tint a = 10;\treturn a;&#125;int main()&#123;    int b = test();    return 0;&#125;\n\næˆ‘ä»¬çŸ¥é“ï¼Œå®šä¹‰åœ¨å‡½æ•°testä¸­çš„aæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå‡ºäº†ä½œç”¨åŸŸå°±ä¼šé”€æ¯ï¼Œé‚£ä¹ˆmainå‡½æ•°é‡Œé¢çš„bæ˜¯æ€ä¹ˆæ‹¿åˆ°testçš„è¿”å›å€¼çš„ï¼Ÿ\nè¿™é‡Œå°±ç”¨åˆ°äº†å¯„å­˜å™¨ï¼šaçš„å€¼ä¼šå…ˆæ”¾å…¥å¯„å­˜å™¨ä¸­ï¼Œé”€æ¯äº†ä¹‹åï¼Œå†æŠŠå¯„å­˜å™¨é‡Œé¢çš„å€¼èµ‹å€¼ç»™b\nå’Œå†…å­˜ä¸€æ ·ï¼ŒCPUåªæœ‰ä¸€å¥—å¯„å­˜å™¨ã€‚è¿™ä¸€å¥—å¯„å­˜å™¨åœ¨è¿è¡Œä¸åŒè¿›ç¨‹çš„æ—¶å€™ï¼Œå¯ä»¥ä¿å­˜ä¸åŒçš„ä¸´æ—¶æ•°æ®\n\nè¿™æ—¶å€™å¦‚æœæ¥äº†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹Aï¼Œç›´æ¥è¦†ç›–äº†æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹BåŠå…¶å¯„å­˜å™¨ä¸­çš„æ•°æ®ï¼Œå°±å¯èƒ½å¯¼è‡´è¿›ç¨‹Bå­˜åœ¨å¯„å­˜å™¨ä¸­çš„æ•°æ®ä¸¢å¤±ï¼Œå¯¼è‡´Bæ— æ³•ç»§ç»­è¿è¡Œ\n\næ‰€ä»¥ï¼Œåœ¨è¿›ç¨‹çš„task_structç»“æ„ä½“ä¸­ï¼Œå°±æœ‰ä¸€ä¸ªä¸“é—¨çš„æˆå‘˜ç”¨äºä¿å­˜è¿›ç¨‹çš„ä¸Šä¸‹æ–‡æ•°æ®\n\nä¸Šä¸‹æ–‡æ•°æ®ï¼šè¿›ç¨‹åœ¨è¿è¡Œä¸­äº§ç”Ÿçš„å„ç§ä¸´æ—¶æ•°æ®\nå½“è¿›ç¨‹è¢«å‰¥ç¦»çš„æ—¶å€™ï¼Œéœ€è¦ä¿å­˜ä¸Šä¸‹æ–‡æ•°æ®\nå½“è¿›ç¨‹æ¢å¤è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åŠ è½½ä¸Šä¸‹æ–‡æ•°æ®\n\n\nå…³äºè¿›ç¨‹pcbå’Œtask_structçš„å†…å®¹å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ è¿›ç¨‹æ¦‚å¿µ\n\n2.ç¯å¢ƒå˜é‡2.1 å¼•å…¥ç¯å¢ƒå˜é‡å½“æˆ‘ä»¬è¿è¡Œè‡ªå·±ç¼–è¯‘çš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦å¸¦ä¸Š./æŒ‡å®šè·¯å¾„\n\nä½¿ç”¨fileå‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿçš„ç›¸å…³æŒ‡ä»¤ï¼Œä½ ä¼šå‘ç°å®ƒä»¬å’Œæˆ‘ä»¬è‡ªå·±å†™çš„mytestæœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªexecutableçš„å¯æ‰§è¡Œæ–‡ä»¶\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file /bin/ls/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=c8ada1f7095f6b2bb7ddc848e088c2d615c3743e, stripped[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file /bin/gcc/bin/gcc: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=84ea48c51fa70f8cd586b7801bc655487156db7b, stripped[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ file mytestmytest: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, BuildID[sha1]=db352023d208d9f48899641c3536a8c13b7bc7bf, not stripped\n\né‚£ä¸ºä½•è¿è¡Œè¯¸å¦‚ls pwd gccç­‰ç­‰ç³»ç»Ÿå‘½ä»¤çš„æ—¶å€™ï¼Œä¸éœ€è¦åœ¨å‰é¢å¸¦ä¸Š./è·¯å¾„æ¥è¿è¡Œå‘¢ï¼Ÿ\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ mytest-bash: mytest: command not found[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ lsmakefile  mytest  mytest.c\n\nè¿™æ˜¯å› ä¸ºï¼šæŒ‡å‘ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå‰ææ˜¯éœ€è¦æ‰¾åˆ°å®ƒï¼\nlinuxç³»ç»Ÿåªèƒ½æ‰¾åˆ°å®ƒè‡ªå·±é¢„è®¾å¥½çš„å‘½ä»¤ï¼Œæ‰¾ä¸åˆ°æˆ‘ä»¬çš„mytest\nåœ¨linuxå‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥envå³å¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡\n\nå…¶ä¸­PATHå°±æ˜¯å¯æ‰§è¡Œç¨‹åºå­˜æ”¾çš„è·¯å¾„ï¼ç³»ç»Ÿå°±æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡æ¥æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åºçš„\n2.2 æ·»åŠ åˆ é™¤ç¯å¢ƒå˜é‡åˆ«æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆæ·»åŠ ç¯å¢ƒå˜é‡ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„bashå‘½ä»¤è¡Œé‡Œé¢æ˜¯å¯ä»¥å®šä¹‰å˜é‡çš„ï¼Œå˜é‡åˆ†ä¸ºä¸¤ç§ç±»å‹\n\næœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨ï¼‰\nç¯å¢ƒå˜é‡ï¼ˆå…¨å±€ï¼‰\n\nç›´æ¥ä½¿ç”¨å˜é‡å=å€¼çš„æ–¹å¼ï¼Œå°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæœ¬åœ°å˜é‡ã€‚ä½¿ç”¨echoå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ä¸ªæœ¬åœ°å˜é‡ã€‚è¿™æ—¶å€™æˆ‘ä»¬ç”¨env | grep å˜é‡ååœ¨ç¯å¢ƒå˜é‡é‡Œé¢æŸ¥æ‰¾ï¼Œä¼šå‘ç°å½“å‰çš„ç¯å¢ƒå˜é‡é‡Œé¢æ²¡æœ‰è¿™ä¸ªä¸œè¥¿\n[muxue@bt-7274:~]$ aaaa=1234[muxue@bt-7274:~]$ echo $aaaa1234[muxue@bt-7274:~]$ env | grep aaaa[muxue@bt-7274:~]$\n\nè¿™æ—¶å€™éœ€è¦ç”¨exportå‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªç¯å¢ƒå˜é‡\n[muxue@bt-7274:~]$ export bbbb=4321[muxue@bt-7274:~]$ env | grep bbbbbbbb=4321\n\næˆ–è€…å¯ä»¥å¯¼å…¥å½“å‰çš„æœ¬åœ°å˜é‡\n[muxue@bt-7274:~]$ export aaaa[muxue@bt-7274:~]$ env | grep aaaaaaaa=1234\n\nåˆ é™¤çš„æ—¶å€™åˆ™ä½¿ç”¨unsetå‘½ä»¤å–æ¶ˆç¯å¢ƒå˜é‡\n[muxue@bt-7274:~]$ unset bbbb[muxue@bt-7274:~]$ env | grep bbbb[muxue@bt-7274:~]$ \n\næŸ¥çœ‹ç¯å¢ƒå˜é‡\necho: æ˜¾ç¤ºæŸä¸ªç¯å¢ƒå˜é‡å€¼\nexport: è®¾ç½®ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡\nenv: æ˜¾ç¤ºæ‰€æœ‰ç¯å¢ƒå˜é‡\nunset: æ¸…é™¤ç¯å¢ƒå˜é‡\nset: æ˜¾ç¤ºæœ¬åœ°å®šä¹‰çš„shellå˜é‡å’Œç¯å¢ƒå˜é‡\n\necho $ç¯å¢ƒå˜é‡å #æŸ¥çœ‹ç¯å¢ƒå˜é‡set | less #æŸ¥çœ‹æ‰€æœ‰çš„shellå˜é‡å’Œç¯å¢ƒå˜é‡\n\nè®¤è¯†ä¸€äº›ç¯å¢ƒå˜é‡\nUSERï¼šå½“å‰ç™»å½•çš„ç”¨æˆ·\nHOMEï¼šå½“å‰ç”¨æˆ·çš„å·¥ä½œè·¯å¾„\nLANGï¼šå½“å‰çš„è¯­è¨€å’Œç¼–ç è®¾å®š\nPATHï¼šå¯æ‰§è¡Œå‘½ä»¤çš„è·¯å¾„\nSHELLï¼šå½“å‰ä½¿ç”¨çš„å‘½ä»¤è¡Œæ˜¯å•¥\nLOGNAMEï¼šå½“å‰ç™»å½•çš„ç”¨æˆ·å\nPWDï¼šå½“å‰æ‰€å¤„è·¯å¾„\nOLDPWDï¼šä¸Šä¸€ä¸ªè·¯å¾„ï¼Œä½¿ç”¨cd -è·³å›ä¸Šä¸€ä¸ªè·¯å¾„\nHISTSIZEï¼šç³»ç»Ÿä¼šè®°å½•çš„å†å²å‘½ä»¤æ¡æ•°\n\næˆ‘ä»¬å¯ä»¥ç”¨historyå‘½ä»¤æŸ¥çœ‹ä¹‹å‰è¿è¡Œè¿‡çš„å‘½ä»¤ï¼Œè¿™é‡Œé¢ä¿å­˜çš„æ­£å¥½æ˜¯3000æ¡ï¼Œå’Œç¯å¢ƒå˜é‡HISTSIZEçš„è®¾ç½®ä¸€è‡´ï¼\n[muxue@bt-7274:~]$ env | grep $HISTSIZEHISTSIZE=3000[muxue@bt-7274:~]$ history | wc --l3000\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»Ÿé¢„è½½çš„ç¯å¢ƒå˜é‡éƒ½æ˜¯åœ¨é…ç½®æ–‡ä»¶é‡Œé¢çš„ã€‚å½“å‰æˆ‘ä»¬å¯¹ç¯å¢ƒå˜é‡åšçš„ä»»ä½•æ“ä½œéƒ½åªä¼šä¸´æ—¶ä¿å­˜ã€‚å…³é—­å½“å‰çš„å‘½ä»¤è¡Œé‡æ–°å¼€ä¸€ä¸ªï¼Œä¹‹å‰è®¾ç½®çš„ç¯å¢ƒå˜é‡å°±ä¼šæ¶ˆå¤±\n[muxue@bt-7274:~]$ cat /etc/bashrc\n\nç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸º/etc/bashrcï¼Œç”¨æˆ·çš„åˆ™ä¸ºå·¥ä½œç›®å½•ä¸‹çš„.bashrcä»¥åŠ.bash_profile\næŸ¥çœ‹ä¸Šä¸ªè¿›ç¨‹é€€å‡ºçŠ¶æ€ç åœ¨linuxä¸‹æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç¯å¢ƒå˜é‡?ï¼Œè¿™ä¸ªç¯å¢ƒå˜é‡å­˜æ”¾çš„æ˜¯ä¸Šä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºç ã€‚æ¯”å¦‚æˆ‘ä»¬è¿›ç¨‹ä¸­return 0é€€å‡ºï¼Œé‚£ä¹ˆæŸ¥è¯¢åˆ°çš„å°±æ˜¯0\necho $?\n\n\n\n2.3 ç¯å¢ƒå˜é‡PATHä½¿ç”¨echo $PATHæŸ¥çœ‹å½“å‰ç³»ç»Ÿå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„\nè¿™é‡Œçš„è·¯å¾„éƒ½ä»¥:ä½œä¸ºåˆ†å‰²ï¼ŒlinuxæŸ¥æ‰¾å‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨ä¸‹é¢çš„è¿™äº›è·¯å¾„é‡Œé¢æŸ¥æ‰¾\n[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin\n\né™¤äº†ç›´æ¥ä½¿ç”¨lsï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è·¯å¾„çš„æ–¹å¼æ¥è°ƒç”¨ls\n[muxue@bt-7274:~]$ /usr/bin/ls bin  git  install.sh  kook  mon\n\nè€Œå¦‚æœæƒ³è®©ç³»ç»Ÿèƒ½æ‰¾åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºï¼Œå°±å¯ä»¥ç›´æ¥æŠŠå¯æ‰§è¡Œç¨‹åºå¤åˆ¶åˆ°è¿™äº›è·¯å¾„ä¸­ï¼\nç»™PATHä¸­æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ cp mytest ~/bin[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ mytesthello world!hello world!\n\næ¯”å¦‚ç°åœ¨ï¼Œæˆ‘æŠŠmytestè¿™ä¸ªå¯æ‰§è¡Œç¨‹åºå¤åˆ¶åˆ°äº†~/binä¹Ÿå°±æ˜¯/home/muxue/binçš„è·¯å¾„ä¸‹ï¼Œæ­¤æ—¶ç›´æ¥ä½¿ç”¨mytestå°±èƒ½æ‰¾åˆ°å¯¹åº”çš„å‘½ä»¤äº†ï¼\né™¤äº†è¿™ç§åŠæ³•ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå½“å‰çš„è·¯å¾„å†™å…¥PATHç¯å¢ƒå˜é‡ä¸­\n[muxue@bt-7274:~]$ export PATH=$PATH:/home/muxue/git/raspi/code/test#è¿™æ ·å†™æ˜¯åœ¨åŸæœ¬çš„pathåé¢è¿½åŠ å†…å®¹ã€‚ä¸èƒ½ç›´æ¥path=è‡ªå·±çš„è·¯å¾„ï¼Œä¼šç›´æ¥è¦†ç›–[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin:/home/muxue/git/raspi/code/test\n\nè¿™æ—¶å€™ç›´æ¥æ‰§è¡Œmytestä¹ŸæˆåŠŸäº†ï¼\n[muxue@bt-7274:~]$ mytesthello world!hello world!hello world!\n\nå‰é¢æåˆ°äº†æˆ‘ä»¬è®¾ç½®çš„è¿™ä¸ªç¯å¢ƒå˜é‡éƒ½æ˜¯ä¸´æ—¶çš„ï¼Œæ‰€ä»¥é‡å¯äº†ä¹‹åï¼Œè‡ªå·±è®¾ç½®çš„è¿™ä¸ªè·¯å¾„ä¹Ÿä¼šæ¶ˆå¤±\n[muxue@bt-7274:~]$ echo $PATH/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin\n\næ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹ä¸å»ºè®®åœ¨linuxç³»ç»Ÿè·¯å¾„ä¸­å®‰è£…è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºï¼Œå› ä¸ºè¿™æ ·ä¼šæ±¡æŸ“ç³»ç»Ÿçš„å‘½ä»¤ç¯å¢ƒï¼\n3.C&#x2F;C++è·å–ç¯å¢ƒå˜é‡3.1 mainå‡½æ•°çš„å‚æ•°ä¹‹å‰ä¸€ç›´æ²¡æœ‰äº†è§£è¿‡è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼ŒC&#x2F;C++çš„mainå‡½æ•°æ˜¯å¯ä»¥å¸¦å‚æ•°çš„ï¼\n#include&lt;stdio.h&gt;//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²int main(int arg,char* argv[])&#123;    printf(&quot;arg: %d\\n&quot;,arg);    for(int i =0;i&lt;arg;i++)    &#123;        printf(&quot;argv[%d]: %s\\n&quot;,i,argv[i]);    &#125;    return 0;&#125;\n\n\næœ‰äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å®ƒå†™ä¸€ä¸ªå‘½ä»¤è¡Œç‰ˆæœ¬çš„è®¡ç®—å™¨\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;//mainå‡½æ•°å¯ä»¥å¸¦å‚æ•°//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²int main(int arg,char* argv[],char *envs[])&#123;    if(arg != 4)    &#123;        printf(&quot;Usage: %s [-a|-s|-m|-d] first second\\n&quot;, argv[0]);        return 0;    &#125;    int x = atoi(argv[2]);    int y = atoi(argv[3]);    if(strcmp(&quot;-a&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d+%d=%d\\n&quot;,x, y, x + y);    &#125;    else if(strcmp(&quot;-s&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d-%d=%d\\n&quot;,x, y, x - y);    &#125;    else if(strcmp(&quot;-m&quot;, argv[1]) ==0)    &#123;        printf(&quot;%d*%d=%d\\n&quot;,x, y, x * y);    &#125;    else if(strcmp(&quot;-d&quot;, argv[1]) ==0 &amp;&amp; y != 0)    &#123;        printf(&quot;%d/%d=%d\\n&quot;,x, y, x / y);    &#125;    else    &#123;        printf(&quot;Usage: %s [-a|-s|-m|-d] first second\\n&quot;, argv[0]);    &#125;    return 0;&#125;\n\nå®ç°éå¸¸ç®€å•ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ğŸ‘‡\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ gcc test.c -o test -std=c99[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -a 10 2010+20=30[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -s 10 2010-20=-10[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -m 10 3010*30=300[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test -d 30 1030/10=3[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./test 1 1 1 1 Usage: ./test [-a|-s|-m|-d] first second\n\nä¸Šé¢è¿™ä¸ªå°ç¨‹åºæ¼”ç¤ºäº†mainå‡½æ•°çš„å‚æ•°çš„ä½œç”¨ã€‚\nçœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…ä½ åº”è¯¥ä¸éš¾ç†è§£linuxç³»ç»Ÿçš„å‘½ä»¤æ˜¯å¦‚ä½•ä½¿ç”¨å‚æ•°çš„ï¼Œè¯¸å¦‚ls -lç­‰ç­‰é€‰é¡¹ï¼Œå…¶å®éƒ½æ˜¯é€šè¿‡mainå‡½æ•°çš„å‚æ•°å®ç°çš„ï¼\né€šè¿‡mainå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥è®©åŒä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¾æ®å‘½ä»¤è¾“å‡ºä¸åŒçš„ç»“æœï¼\n3.2 ä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è·å–ç¯å¢ƒå˜é‡é™¤äº†ä¸Šé¢æåˆ°çš„mainå‡½æ•°å‰ä¸¤ä¸ªå‚æ•°ï¼Œå®é™…ä¸Šmainå‡½æ•°è¿˜å¯ä»¥å¸¦ç¬¬ä¸‰ä¸ªå‚æ•°ï¼\n//ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡ä»£å‘½ä»¤ä¸ªæ•°ï¼Œæ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¼ å…¥çš„å‡ ä¸ªå‘½ä»¤//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾äº†æ¯ä¸€ä¸ªå‘½ä»¤çš„å¸¸é‡å­—ç¬¦ä¸²//ç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºå¯¼å…¥ç¯å¢ƒå˜é‡ï¼int main(int arg,char* argv[],char *envs[])&#123;    for(int i =0;envs[i];i++)    &#123;        printf(&quot;envs[%d]: %s\\n&quot;,i,envs[i]);    &#125;\treturn 0;&#125;\n\nå› ä¸ºenvsæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡åˆ¤ç©ºæ¥ç»ˆæ­¢forå¾ªç¯\n\nåœ¨è¿™ä¸ªæ•°ç»„çš„æœ€åï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ‰§è¡Œçš„å‘½ä»¤ä¹Ÿè¢«å†™å…¥äº†ç¯å¢ƒå˜é‡\n\né™¤äº†ä¸Šé¢è¿™ä¸ªåŠæ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥è·å–ç¯å¢ƒå˜é‡\nenvironå¤–éƒ¨å¯¼å…¥ç¯å¢ƒå˜é‡Cè¯­è¨€æä¾›äº†ä¸€ä¸ªenvironæ¥å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œå…¶ä½œç”¨å’Œmainå‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€æ ·çš„\n\nextern char ** environ;printf(&quot;get env from [environ]\\n&quot;);for(int i = 0; environ[i]; i++)&#123;    printf(&quot;%d: %s\\n&quot;, i, environ[i]);&#125;\n\n\nå…¶è¾“å‡ºçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„\ngetenvå‡½æ•°man getenv\n\n\nè¿™ä¸ªå‡½æ•°å°±èƒ½å®ç°ä¸€äº›éªšæ“ä½œï¼Œæ¯”å¦‚å†™ä¸€ä¸ªåªæœ‰æˆ‘è‡ªå·±å¯ä»¥è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶\nint main(int arg,char* argv[],char *envs[])&#123;    char* user = getenv(&quot;USER&quot;);    if(strcasecmp(user,&quot;muxue&quot;)!=0)//strcasecmpå¿½ç•¥å¤§å°å†™    &#123;        printf(&quot;æƒé™ç¦æ­¢ï¼\\n&quot;);        return -1;    &#125;    printf(&quot;æˆåŠŸæ‰§è¡Œï¼\\n&quot;);    return 0;&#125;\n\né€šè¿‡getenvå‡½æ•°è·å–åˆ°ç¯å¢ƒå˜é‡ä¸­çš„USERï¼Œåˆ¤æ–­å…¶ä¸æˆ‘è‡ªå·±è®¾å®šçš„useræ˜¯å¦ç›¸åŒã€‚å¦‚æœä¸åŒå°±æ‹’ç»æ‰§è¡Œï¼Œç›¸åŒæ‰æˆåŠŸæ‰§è¡Œ\n[muxue@bt-7274:~/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]$ ./testæˆåŠŸæ‰§è¡Œï¼[root@bt-7274:/home/muxue/git/raspi/code/22-10-04_ç¯å¢ƒå˜é‡]# ./testæƒé™ç¦æ­¢ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œå“ªæ€•æ˜¯rootç”¨æˆ·ä¹Ÿæä¸æ¥è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºï¼\n\n4.å…³äºæœ¬åœ°å˜é‡çš„è¯´æ˜åœ¨2.2ä¸­æåˆ°äº†æœ¬åœ°å˜é‡å’Œç¯å¢ƒå˜é‡çš„åŒºåˆ«\n\næœ¬åœ°å˜é‡ï¼ˆå±€éƒ¨ï¼‰\nç¯å¢ƒå˜é‡ï¼ˆå…¨å±€ï¼‰\n\næ‰€è°“çš„æœ¬åœ°å˜é‡ï¼Œå…¶å®æ˜¯bashå†…éƒ¨å®šä¹‰çš„å˜é‡ã€‚\næˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£çš„æ˜¯ï¼Œlinuxä¸‹å¤§éƒ¨åˆ†çš„è¿›ç¨‹æˆ–å‘½ä»¤éƒ½æ˜¯ä»¥å­è¿›ç¨‹æ–¹å¼è¿è¡Œçš„ï¼Œå…¶çˆ¶è¿›ç¨‹éƒ½æ˜¯å½“å‰æ‰“å¼€çš„bash\nç”±æ­¤å¯çŸ¥ï¼Œbashå†…éƒ¨çš„æœ¬åœ°å˜é‡ï¼Œå¹¶ä¸ä¼šè¢«è¿™äº›å­è¿›ç¨‹æ‰€ç»§æ‰¿\nè€Œç¯å¢ƒå˜é‡å…·æœ‰å…¨å±€å±æ€§ï¼Œå¯ä»¥è¢«å­è¿›ç¨‹ç»§æ‰¿å¹¶è·å–ï¼\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œexport/echoä¹Ÿæ˜¯å‘½ä»¤ã€‚å¦‚æœå®ƒä»¬ä¹Ÿæ˜¯å­è¿›ç¨‹ï¼Œé‚£å®ƒä»¬æ˜¯æ€ä¹ˆè·å–åˆ°bashå†…éƒ¨çš„æœ¬åœ°å˜é‡ï¼Œå¹¶å°†å…¶å¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­çš„å‘¢ï¼Ÿ\nnopeï¼å®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ç”±bashè‡ªå·±æ‰§è¡Œçš„ï¼ˆè°ƒç”¨è‡ªå·±çš„å¯¹åº”çš„å‡½æ•°å®ŒæˆåŠŸèƒ½ï¼‰æˆ‘ä»¬æŠŠè¿™ç§å‘½ä»¤ç§°ä½œå†…å»ºå‘½ä»¤\nç»“è¯­å…³äºç¯å¢ƒå˜é‡çš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±OVERå•¦ã€‚æœ¬åšå®¢æ˜¯æˆ‘çš„è¯¾å ‚ç¬”è®°ï¼Œéš¾å…ä¼šæœ‰é—®é¢˜ï¼Œè¿˜è¯·å„ä½å¤§ä½¬æŒ‡å‡º~\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ¦‚å¿µ","url":"/posts/3785030063/","content":"æœ¬ç¯‡åšå®¢æ˜¯æœ‰å…³è¿›ç¨‹çŠ¶æ€çš„ï¼Œå¥½ä¹…æ²¡æœ‰å†™Linuxçš„åšå®¢äº†ï¼Œä¸€èµ·æ¥çœ‹çœ‹å§ï¼\n\n\n\nå®éªŒç³»ç»Ÿï¼šCentOS 7.6\n\n1.ç³»ç»Ÿè¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€å½“æˆ‘ä»¬æƒ³åˆ°è¿›ç¨‹çš„æ—¶å€™ï¼Œä¸€å®šè¦é¦–å…ˆæƒ³åˆ°task_structç»“æ„ä½“ã€‚è¯¥ç»“æ„ä½“å†…éƒ¨æœ‰ä¸€ä¸ªstateçŠ¶æ€ç ï¼Œç”¨äºæ ‡è¯†å½“å‰è¿›ç¨‹å¤„äºä»€ä¹ˆçŠ¶æ€\n\n1.1 è¿è¡Œæ€CPUä¼šæœ‰ä¸€ä¸ªè¿›ç¨‹é˜Ÿåˆ—ï¼ˆåŒé“¾è¡¨ï¼‰ï¼Œé˜Ÿåˆ—çš„æ¯ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªtask_structç»“æ„ä½“ï¼Œç”¨æ¥ç»´æŠ¤å³å°†è¿è¡Œçš„è¿›ç¨‹ã€‚å½“è½®åˆ°æŸä¸ªè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼ŒCPUå°±ä¼šå°†è¿™ä¸ªè¿›ç¨‹çš„æ•°æ®å’Œä»£ç æ”¾å…¥å†…å­˜å’Œè‡ªå·±çš„å¯„å­˜å™¨ï¼Œå¹¶å¼€å§‹è¿è¡Œ\nåªè¦è¿›å…¥äº†è¿è¡Œé˜Ÿåˆ—çš„è¿›ç¨‹ï¼Œå°±æ˜¯è¿è¡Œæ€çš„è¿›ç¨‹\n\næ‰€ä»¥è¿è¡Œæ€å¹¶ä¸æ˜¯æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬å¯¹è¿™ä»¶äº‹çš„æ„ŸçŸ¥ä¸å¤§å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºç°ä»£çš„CPUçš„è¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œè¿™äº›è¿è¡Œé˜Ÿåˆ—çš„è½®è½¬å‘¨æœŸå¾ˆçŸ­\n1.2 ç»ˆæ­¢æ€ç»ˆæ­¢æ€ï¼šè¿›ç¨‹è¿˜åœ¨ï¼Œä½†æ˜¯æ°¸è¿œä¸ä¼šè¿è¡Œï¼Œåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…è¢«é‡Šæ”¾\nä¸ºä»€ä¹ˆè¿›ç¨‹éƒ½ç»ˆæ­¢äº†ï¼Œä¸ç«‹é©¬é‡Šæ”¾å¯¹åº”çš„èµ„æºï¼Œè€Œéœ€è¦ç»´æŠ¤ä¸€ä¸ªç»ˆæ­¢æ€ï¼Ÿ\n\nè¿™æ˜¯å› ä¸ºå½“å‰CPU&#x2F;æ“ä½œç³»ç»Ÿæ­£åœ¨å¿™ç€å¹²å…¶ä»–çš„äº‹æƒ…ï¼Œæ²¡æ—¶é—´è¿‡æ¥é‡Šæ”¾ä½ ã€‚æ‰€ä»¥ä¼šå°†ä¸è¿è¡Œçš„è¿›ç¨‹æ”¾å…¥ç»ˆæ­¢æ€çš„é˜Ÿåˆ—ï¼ˆå°†è¯¥è¿›ç¨‹task_structç»“æ„ä½“æ’å…¥è¯¥é˜Ÿåˆ—ï¼‰\nå½“æ“ä½œç³»ç»Ÿç©ºé—²çš„æ—¶å€™ï¼Œä¾¿ä¼šå–ç»ˆæ­¢æ€é˜Ÿåˆ—é‡Œé¢çš„è¿›ç¨‹è¿›è¡Œé‡Šæ”¾\n\n1.3 é˜»å¡æ€ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨èµ„æºçš„æ—¶å€™ï¼Œä¸ä»…ä»…ä¼šç”³è¯·CPUçš„è®¡ç®—èµ„æºï¼Œè¿˜æœ‰å¯èƒ½ç”³è¯·å…¶ä»–æ›´å¤šçš„èµ„æºï¼Œæ¯”å¦‚ç½‘ç»œ/ç¡¬ç›˜/ç½‘å¡/æ˜¾å¡ç­‰ç­‰\nå¦‚æœç”³è¯·è¿™äº›èµ„æºçš„æ—¶å€™å¾—ä¸åˆ°æ»¡è¶³ï¼Œå°±éœ€è¦æ’é˜Ÿ\n\nCPUèµ„æºï¼šè¿è¡Œé˜Ÿåˆ—\nå…¶ä»–èµ„æºï¼šä¹Ÿéœ€è¦è¿›è¡Œæ’é˜Ÿ\n\n ä¸‹é¢ç”¨ä¼ªä»£ç çš„æ–¹å¼æ¥æè¿°ä¸€ä¸‹è¿›ç¨‹ä¸ºä½•ä¼šé˜»å¡ \nstruct cpuinfo&#123;    //â€¦â€¦    //è¿è¡Œé˜Ÿåˆ—    task_struct *queue;&#125;struct disk_div&#123;   \t//ç£ç›˜çš„ç­‰å¾…é˜Ÿåˆ—    task_struct *queue;&#125;struct net_div&#123;   \t//ç½‘å¡çš„ç­‰å¾…é˜Ÿåˆ—    task_struct *queue;&#125;\n\nå½“æˆ‘ä»¬çš„è¿›ç¨‹è®¿é—®æŸç§èµ„æºï¼Œç‰¹åˆ«æ˜¯å¤–å­˜ï¼ˆç£ç›˜ï¼‰è¿™ç§æ…¢è®¾å¤‡èµ„æºçš„æ—¶å€™ï¼Œå¦‚æœç£ç›˜æš‚æ—¶è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šæŠŠå½“å‰è¿›ç¨‹ä»è¿è¡Œé˜Ÿåˆ—å‰¥ç¦»ï¼Œæ’å…¥åˆ°å¯¹åº”éœ€è¦è®¿é—®çš„è®¾å¤‡ä¸‹çš„ç­‰å¾…é˜Ÿåˆ—ä¸­\n\nDDR4å†…å­˜çš„è¯»å†™å¤§çº¦æ˜¯40GB&#x2F;Sï¼Œå³ä¾¿æ˜¯ç°åœ¨å¸‚é¢ä¸Šè¾ƒå¿«çš„pcie4.0å›ºæ€ç¡¬ç›˜å…¶è¯»å†™é€Ÿåº¦ä¹Ÿåªæœ‰7GB&#x2F;Så·¦å³ï¼Œè¿™ä¸ªå·®è·è¿˜æ˜¯å¾ˆå¤§çš„ã€‚æ‰€ä»¥æ‰è¯´ç£ç›˜æ˜¯â€œæ…¢è®¾å¤‡â€èµ„æº\n\næ“ä½œç³»ç»Ÿç§»åŠ¨task_structåˆ°å¯¹åº”çš„é˜Ÿåˆ—ä¸‹ï¼Œå°±æ˜¯èµ·äº†å®ƒç®¡ç†è¿›ç¨‹çš„ä½œç”¨ã€‚åŒæ—¶å°†è¿›ç¨‹å‰¥ç¦»è¿è¡Œé˜Ÿåˆ—ï¼Œä¹Ÿèƒ½è®©ç­‰å¾…æ…¢è®¾å¤‡èµ„æºçš„è¿›ç¨‹ä¸è‡³äºæŠŠæ•´ä¸ªç³»ç»Ÿå¡æ­»ã€‚å½“æˆ‘ä»¬ç”µè„‘ä¸Šè¿è¡Œçš„è¿›ç¨‹å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½é‡åˆ°å½“å‰çš„è¿›ç¨‹åœ¨ç­‰å¾…è¿‡ç¨‹ä¸­å‡ºç°äº†é˜»å¡ï¼Œæ­¤æ—¶è¿›ç¨‹çš„ä»£ç ä¸ä¼šè¿è¡Œã€‚æœ€ç›´è§‚çš„ååº”ä¾¿æ˜¯å½“å‰è¿›ç¨‹å¡ä½ä¸åŠ¨äº†ã€‚\n\n1.4 è¿›ç¨‹æŒ‚èµ·è¿›ç¨‹æŒ‚èµ·å’Œè¿›ç¨‹é˜»å¡å¾ˆç±»ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸åŒã€‚\n\nè¿›ç¨‹æŒ‚èµ·å’Œé˜»å¡ä¸åŒçš„æ˜¯ï¼Œé˜»å¡åªæ˜¯å•çº¯åœ°åœ¨ç­‰å¾…æ…¢èµ„æºã€‚è€ŒæŒ‚èµ·åˆ™æ˜¯è¯¥è¿›ç¨‹çš„æ•°æ®è¢«æ”¾å…¥å›äº†ç£ç›˜ï¼Œè¿›ç¨‹æœ¬èº«ä¾æ—§åœ¨æ’é˜Ÿç­‰å¾…ã€‚æ“ä½œç³»ç»Ÿä¼šæœ‰ä¸€ä¸ªä¸“é—¨çš„swapåˆ†åŒºï¼Œç”¨æ¥å­˜æ”¾æŒ‚èµ·è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®ã€‚\næ“ä½œç³»ç»Ÿè¿™ä¹ˆç®¡ç†ï¼Œæ˜¯ä¸ºäº†ä¸è®©å†…å­˜åœ¨å¤šè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ä¸å¤Ÿç”¨äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œå½“æˆ‘ä»¬å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå¾€å¾€ä¼´éšç€ç£ç›˜çš„é¢‘ç¹è¯»å–ã€‚\n\nå½“ç„¶ï¼Œå†…å­˜ä¸å¤Ÿä¹Ÿæœ‰å¯èƒ½æ˜¯æŸä¸€ä¸ªè¿›ç¨‹éœ€è¦ä¸€æ¬¡æ€§åŠ è½½çš„ä»£ç æ•°æ®å·²ç»è¶…è¿‡äº†å†…å­˜çš„å¤§å°ğŸ˜‚\n\nä¸‹å›¾ä¸­å·¦ä¸‹è§’çš„éƒ¨åˆ†ä¾¿æ¼”ç¤ºäº†æ“ä½œç³»ç»Ÿåœ¨å¤„ç†é˜»å¡å’ŒæŒ‚èµ·æ€çš„æ“ä½œå¾ªç¯\n\n\n2.Linuxä¸‹çš„è¿›ç¨‹çŠ¶æ€æè¿°åœ¨linuxä¸‹è¿›ç¨‹çš„çŠ¶æ€æ˜¯å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢çš„\n\n2.1 Så’ŒRçŠ¶æ€çš„è¯´æ˜å…¶ä¸­Rå¯¹åº”çš„æ˜¯è¿è¡Œæ€ï¼ŒSå¯¹åº”çš„å°±æ˜¯é˜»å¡æ€ï¼ˆlinuxä¸‹ä¸ºä¼‘çœ ï¼‰\næˆ‘ä»¬å¯ä»¥è¿è¡Œä¸€ä¸ªç¨‹åºçœ‹çœ‹å®ƒå¤„äºä»€ä¹ˆçŠ¶æ€\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    while(1)&#123;        printf(&quot;%d\\n&quot;,getppid());        sleep(1);    &#125;    return 0;&#125;\n\nè¿è¡Œå‘ç°ï¼Œå·¦ä¾§æ‰“å°å‡ºäº†å½“å‰è¿›ç¨‹PIDï¼Œè€Œå³ä¾§å½“æˆ‘ä»¬ä½¿ç”¨pså‘½ä»¤æŸ¥è¯¢è¯¥è¿›ç¨‹çš„æ—¶å€™ï¼Œå‘ç°è¯¥è¿›ç¨‹çš„çŠ¶æ€æ˜¯S+ä¹Ÿå°±æ˜¯ä¼‘çœ çŠ¶æ€\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test32080 30455 30455 32080 pts/0    30455 S+    1001   0:00 ./test\n\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿç¨‹åºä¸æ˜¯ä¸€ç›´éƒ½åœ¨è¿è¡Œå—ï¼Ÿ\né¦–å…ˆéœ€è¦çŸ¥é“çš„æ˜¯ï¼Œprintféœ€è¦å°†æ•°æ®æ‰“å°è¾“å‡ºåˆ°å±å¹•ä¸Šï¼Œå±å¹•ä½œä¸ºå¤–è®¾ï¼ŒåŒæ ·å±äºæ…¢èµ„æºã€‚æ‰€ä»¥æˆ‘ä»¬çš„è¿›ç¨‹ç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯å¤„äºsleep(1)ä»¥åŠç­‰å¾…å±å¹•åˆ·æ–°çš„è¿‡ç¨‹ä¸­ã€‚è€ŒCPUåªéœ€è¦æ‰§è¡Œprintfä¸€ä¸ªæ“ä½œï¼Œè¿™ä¸ªæ“ä½œå‡ ä¹æ˜¯ç¬é—´å°±è¿›è¡Œï¼Œå½“ç„¶ä¹Ÿçœ‹ä¸åˆ°è¯¥è¿›ç¨‹å¤„äºè¿è¡Œæ€äº†\nå³ä¾¿æˆ‘ä»¬æŠŠsleep(1)å»æ‰ï¼Œè¿›ç¨‹ä¹Ÿæ˜¯éœ€è¦ç­‰å¾…å±å¹•åˆ·æ–°ï¼ŒåŒæ ·å¤„äºS+çŠ¶æ€\né‚£è¦æ€æ ·æ‰èƒ½è®©è¿›ç¨‹å¤„äºè¿è¡Œæ€å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªä¸å’Œå¤–è®¾äº¤äº’çš„æ­»å¾ªç¯å³å¯\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    while(1)&#123;\t\tint a = 10;    &#125;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ç°åœ¨è¿›ç¨‹çš„çŠ¶æ€æ˜¯R+ï¼Œå¤„äºè¿è¡Œæ€ï¼\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test32080 32489 32489 32080 pts/0    32489 R+    1001   0:06 ./test\n\n\n2.2 DçŠ¶æ€disk sleepé™¤äº†åŸºæœ¬çš„SçŠ¶æ€ï¼Œlinuxä¸‹è¿˜æœ‰ä¸€ä¸ªä¸“é—¨çš„disk sleepçŠ¶æ€ã€‚å¦‚åŒå®ƒçš„åå­—ä¸€æ ·ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯ä¸“é—¨ä¸ºè®¿é—®ç¡¬ç›˜çš„è¿›ç¨‹è®¾è®¡çš„\nå‡è®¾æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªåœºæ™¯\n1.è¿›ç¨‹Aéœ€è¦è®¿é—®ç£ç›˜èµ„æºï¼Œå†™å…¥1GBçš„æ•°æ®2.ç£ç›˜å¾ˆå¿™ï¼Œè¿›ç¨‹Aè¿›å…¥SçŠ¶æ€ç­‰å¾…è¯»å†™3.æ“ä½œç³»ç»Ÿå‘ç°è¿™é‡Œæœ‰ä¸ªè¿›ç¨‹æ²¡å¹²æ´»ï¼Œå†…å­˜åˆä¸å¤Ÿäº†ï¼Œäºæ˜¯æŠŠè¿›ç¨‹Aå¹²æ‰äº†4.è½®åˆ°è¿›ç¨‹Aç‹¬å†™çš„æ—¶å€™ï¼Œç£ç›˜å‘ç°è¿›ç¨‹Aå·²ç»è¢«å¹²æ‰äº†ï¼Œäºæ˜¯æ²¡ç®¡å®ƒçš„1GBæ•°æ®5.ç»“æœï¼šè¿™ä¸ª1GBæ•°æ®ä¸¢å¤±äº†\n\nå‡ºç°è¿™ç§æ•°æ®ä¸¢å¤±ï¼Œè°éƒ½ä¸æƒ³çš„å˜›ã€‚æ‰€ä»¥Linuxå°±è®¾ç½®äº†ä¸€ä¸ªDçŠ¶æ€ï¼Œ\n\nS æµ…åº¦ç¡çœ \nD æ·±åº¦ç¡çœ \n\nå¤„äºDçŠ¶æ€çš„è¿›ç¨‹ä¸èƒ½è¢«æ“ä½œç³»ç»Ÿkillæ‰ã€‚è¦æƒ³æ€æ‰ä¸€ä¸ªDçŠ¶æ€çš„è¿›ç¨‹ï¼Œåªæœ‰ä¸‹é¢ä¸‰ç§åŠæ³•\n\nç­‰ç¡¬ç›˜è¯»å†™å®Œæ¯•ï¼Œç»™è¿›ç¨‹è¿”å›ç»“æœä¹‹åï¼Œè¿›ç¨‹ä»DçŠ¶æ€å˜æˆå…¶ä»–çŠ¶æ€ï¼Œæ“ä½œç³»ç»Ÿè¿›è¡Œå¤„ç†\nå…³æœºé‡å¯\næ‹”æ‰ç”µè„‘çš„ç”µæº\n\n\n\nlinuxä¸‹å¯ä»¥ç”¨DDå‘½ä»¤ç›´æ¥å¯¹ç¡¬ç›˜è¿›æ“ä½œ\n\n\n3.åƒµå°¸è¿›ç¨‹Zåƒµå°¸è¿›ç¨‹å¯¹åº”çš„çŠ¶æ€ç æ˜¯Zï¼Œè€ŒXæ˜¯1.2æåˆ°çš„ç»ˆæ­¢æ€\n3.1 ä¸ºä»€ä¹ˆä¼šå­˜åœ¨åƒµå°¸è¿›ç¨‹?å½“Linuxä¸­çš„ä¸€ä¸ªè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸ä¼šè¿›å…¥XçŠ¶æ€ï¼ˆç»ˆæ­¢æ€ï¼Œå¯ä»¥å›æ”¶èµ„æºï¼‰ï¼Œè€Œæ˜¯è¿›å…¥ZçŠ¶æ€\n\nè¿›ç¨‹è¿è¡Œäº†ä¸€å®šçš„ç¨‹åºï¼Œå¯ä»¥ç†è§£ä¸ºè¿™ä¸ªè¿›ç¨‹çš„ä»»åŠ¡\nå½“è¯¥è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œéœ€è¦çŸ¥é“è¿™ä¸ªè¿›ç¨‹æ˜¯å¦‚ä½•ç»“æŸçš„ï¼ˆå¯ä»¥ç†è§£ä¸ºç»ˆæ­¢çš„åŸå› ï¼‰\nä¸€èˆ¬æ˜¯å°†æ‰§è¡Œç»“æœäº¤è¿˜ç»™æ“ä½œç³»ç»Ÿæˆ–è€…çˆ¶è¿›ç¨‹\n\nç»´æŠ¤ä¸€ä¸ªçŠ¶æ€Zï¼Œå°±æ˜¯ä¸ºäº†ç»´æŠ¤è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯ï¼Œå¯ä»¥è®©çˆ¶è¿›ç¨‹/æ“ä½œç³»ç»Ÿè¯»å–\n\nçˆ¶è¿›ç¨‹/æ“ä½œç³»ç»Ÿæ˜¯é€šè¿‡è¿›ç¨‹ç­‰å¾…æ¥è¯»å–è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯çš„\n\nåœ¨task_structé‡Œé¢å°±æœ‰ä¸€ä¸ªä¸“é—¨çš„æˆå‘˜æ¥ç»´æŠ¤é€€å‡ºä¿¡æ¯\n\n3.2 å¦‚ä½•å¤ç°åƒµå°¸çŠ¶æ€ï¼Ÿæˆ‘ä»¬åˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œåªè¦çˆ¶è¿›ç¨‹ä¸æ­ç†å­è¿›ç¨‹ï¼Œä¸€ç›´è¿è¡Œçˆ¶è¿›ç¨‹ï¼Œæå‰ç»ˆæ­¢å­è¿›ç¨‹ï¼Œå°±å¯ä»¥è§‚å¯Ÿåˆ°å­è¿›ç¨‹è¿›å…¥åƒµå°¸çŠ¶æ€\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    int ret = fork();    if(ret == 0)    &#123;        int i = 6;        while(i)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹ï¼Œæˆ‘çš„ppidæ˜¯%d,pidæ˜¯%d\\næˆ‘è¿˜æœ‰%iç§’ç»ˆæ­¢&quot;,getppid(),getpid(),i--);            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹è¿›å…¥åƒµå°¸çŠ¶æ€\\n&quot;);        exit(0);    &#125;    else&#123;        printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹ï¼Œæˆ‘çš„ppidæ˜¯%d,pidæ˜¯%d\\n&quot;,getppid(),getpid());        while(1)        &#123;            int a = 10;           &#125;    &#125;           return 0;&#125;\n\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test1 | grep -v grep32080 30962 30962 32080 pts/0    30962 R+    1001   0:05 ./test130962 30963 30962 32080 pts/0    30962 S+    1001   0:00 ./test1[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test1 | grep -v grep32080 30962 30962 32080 pts/0    30962 R+    1001   0:06 ./test130962 30963 30962 32080 pts/0    30962 Z+    1001   0:00 [test1] &lt;defunct&gt;\n\nè‹±è¯­å°è¯¾å ‚ï¼šdefunct\n\nä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šè¦æ±‚çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹ï¼Œä¸è¿‡è¿™ä¸ªå¾—åç»­æ‰èƒ½å­¦åˆ°äº†ï¼\npså¾ªç¯ç›‘æ§è„šæœ¬æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç›‘æ§è„šæœ¬æ¥æ›´æ–¹ä¾¿çš„ç›‘æ§ç»“æœ\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„ä½œç”¨æ˜¯ï¼Œæ¯ä¸€ç§’æ‰§è¡Œä¸€æ¬¡ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grepå‘½ä»¤ï¼Œç›´åˆ°æˆ‘ä»¬ä½¿ç”¨ctrl+cç»ˆæ­¢è¿›ç¨‹\néœ€è¦æ³¨æ„åˆ†éš”ç¬¦ï¼Œwhileåé¢çš„æ˜¯:;ä¸è¦å†™æˆåŒå†’å·ï¼\n3.3 é•¿æ—¶é—´åƒµå°¸çŠ¶æ€çš„å¼Šç«¯å¦‚æœä¸€ä¸ªåƒµå°¸è¿›ç¨‹é•¿æ—¶é—´ä¸è¢«å¤„ç†ï¼Œå°±å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼ï¼\nå­è¿›ç¨‹çš„çŠ¶æ€æ˜¯ç”¨æ•°æ®ç»´æŠ¤çš„ï¼Œå¦‚æœçˆ¶è¿›ç¨‹ä¸€ç›´ä¸å›æ”¶å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹çš„task_structå°±ä¸€ç›´ç•™å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™å°±æ˜¯ä¸€å®šçš„å†…å­˜æ³„æ¼ã€‚\n3.4 å­¤å„¿è¿›ç¨‹å½“ä¸€ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å…ˆé€€å‡ºçš„æ—¶å€™ï¼Œå­è¿›ç¨‹å°±ä¼šå˜æˆå­¤å„¿è¿›ç¨‹\n\nä¸ºä»€ä¹ˆè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°çˆ¶è¿›ç¨‹è¿›å…¥Zæˆ–è€…XçŠ¶æ€å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºè¿™é‡Œçˆ¶è¿›ç¨‹çš„çˆ¶è¿›ç¨‹æ˜¯bashï¼Œå‘½ä»¤è¡Œå›æ”¶äº†æˆ‘ä»¬çš„çˆ¶è¿›ç¨‹ã€‚\nå¯å­è¿›ç¨‹ä¸ºä½•è¿˜åœ¨è¿™é‡Œå‘¢ï¼Ÿ\n\nçˆ¶è¿›ç¨‹é€€å‡ºä¹‹åï¼Œå­è¿›ç¨‹å¹¶ä¸ä¼šä¸è§ï¼Œè€Œæ˜¯ä¼šè¢«1å·è¿›ç¨‹ï¼ˆæ“ä½œç³»ç»Ÿï¼‰é¢†å…»ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå­è¿›ç¨‹ç§°ä¸ºå­¤å„¿è¿›ç¨‹\n\næ³¨ï¼š1å·è¿›ç¨‹åˆç§°initè¿›ç¨‹\n\n\nè€Œæ“ä½œç³»ç»Ÿé¢†å…»ä¹‹åçš„å­è¿›ç¨‹ï¼Œå³ä¾¿ä½ ä½¿ç”¨ctrl+cä¹Ÿå¹²ä¸æ‰è¿™ä¸ªè¿›ç¨‹\n\nä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥çœ‹åˆ°å­è¿›ç¨‹è¢«æ“ä½œç³»ç»Ÿé¢†å…»åï¼Œè¿è¡ŒçŠ¶æ€ä¸Šçš„+ä¸è§äº†\n PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  2842  2842 32080 pts/0     2842 S+    1001   0:00 ./test2 2842  2843  2842 32080 pts/0     2842 S+    1001   0:00 ./test2################################################################ PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND    1  2843  2842 32080 pts/0    32080 S     1001   0:00 ./test2\n\nå‰å°å’Œåå°è¿›ç¨‹çŠ¶æ€ç ä¸Šå¸¦æœ‰+å·ï¼Œä»£è¡¨è¿›ç¨‹æ˜¯ä¸€ä¸ªå‰å°è¿›ç¨‹\n\nèƒ½è¢«CTRL+Cç»ˆæ­¢çš„éƒ½æ˜¯å‰å°è¿›ç¨‹\nåå°è¿›ç¨‹ä¸€ç›´åœ¨è¿è¡Œï¼Œä¼šå½±å“æˆ‘ä»¬çš„å‘½ä»¤è¡Œè¾“å…¥\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨kill -9å¹²æ‰è¯¥è¿›ç¨‹ï¼Œå¹²æ‰è¿›ç¨‹ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨CTRL+Cæ¢å¤æ­£å¸¸çš„å‘½ä»¤è¡Œäº†\n\n3.5 å®ˆæŠ¤è¿›ç¨‹å’Œç²¾çµè¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹&amp;ç²¾çµè¿›ç¨‹ï¼šè¿™ä¸¤ç§æ˜¯åŒä¸€ç§è¿›ç¨‹çš„ä¸åŒç¿»è¯‘ï¼Œæ˜¯ç‰¹æ®Šçš„å­¤å„¿è¿›ç¨‹ï¼Œä¸ä½†è¿è¡Œåœ¨åå°ï¼Œæœ€ä¸»è¦çš„æ˜¯è„±ç¦»äº†ä¸ç»ˆç«¯å’Œç™»å½•ä¼šè¯çš„æ‰€æœ‰è”ç³»ï¼Œä¹Ÿå°±æ˜¯é»˜é»˜çš„è¿è¡Œåœ¨åå°ä¸æƒ³å—åˆ°ä»»ä½•å½±å“\n\n4.è¿›ç¨‹æš‚åœTæš‚åœä¸€å…±æœ‰ä¸¤ç§çŠ¶æ€ï¼Œä¸€ç§æ˜¯stoppedï¼Œç¬¬äºŒç§æ˜¯tarcing stop\n\nä¸€èˆ¬linuxç³»ç»Ÿæ˜¯ç”¨å¤§TæŒ‡ä»£stoppedï¼Œç”¨å°tæŒ‡ä»£tarcing stop\n4.1 T-stoppedkillå‘ä¿¡å·åœ¨ä¹‹å‰çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦è¿‡ä½¿ç”¨kill -9 pidæ¥å¹²æ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå®é™…ä¸Škillå‘½ä»¤èƒ½å¹²çš„äº‹æƒ…è¿œä¸æ­¢è¿™ä¸€ä¸ª\nkill -l\n\nä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°killå‘½ä»¤æ”¯æŒä»€ä¹ˆæ“ä½œ\n\nå…¶ä¸­æˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯ç¬¬19å’Œç¬¬18ï¼Œåˆ†åˆ«ç”¨äºæš‚åœ/æ¢å¤ä¸€ä¸ªè¿›ç¨‹\n#include &lt;stdio.h&gt;int main()&#123;    printf(&quot;start!\\n&quot;);    while(1)&#123;        ;    &#125;    return 0;&#125;\n\nå†™ä¸€ä¸ªå•¥äº‹ä¸å¹²çš„æ­»å¾ªç¯ç”¨äºæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹å¤„äºR+çŠ¶æ€\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ kill -19 9503\n\næ‰§è¡Œkill -19å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥è¿›ç¨‹è¢«ç»ˆæ­¢ï¼ŒçŠ¶æ€ç å˜ä¸ºå¤§T\n\nè¿›ç¨‹æš‚åœå¹¶ä¸ä»£è¡¨è¿›ç¨‹ç»“æŸï¼Œè¿™å°±å¥½æ¯”æˆ‘ä»¬çœ‹è§†é¢‘çš„æ—¶å€™æš‚åœä¸€æ ·ã€‚ä½ æš‚åœäº†æ’­æ”¾ï¼Œä½†æ˜¯æ’­æ”¾å™¨è¿™ä¸ªè¿›ç¨‹å¹¶ä¸ä¼šç›´æ¥ç»ˆæ­¢ï¼\nè¦æƒ³è®©è¿™ä¸ªè¿›ç¨‹é‡æ–°è¿è¡Œï¼Œæ‰§è¡Œkill -18å³å¯ï¼Œè¿›ç¨‹æ¢å¤ä¸ºRçŠ¶æ€ã€‚æ­¤æ—¶ä¹Ÿæ²¡æœ‰äº†+ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªåå°è¿›ç¨‹\n\n PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  9503  9503 32080 pts/0    32080 T     1001   0:55 ./test3######################## PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND32080  9503  9503 32080 pts/0    32080 R     1001   0:55 ./test3\n\nä½¿ç”¨kill -9å¹²æ‰è¯¥åå°è¿›ç¨‹å³å¯\n4.2 t-tarcing stoptarcingä¸€è¯æ„ä¸ºè¿½è¸ªï¼Œæœ€ç®€å•çš„æƒ…å†µä¾¿æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„gdbè°ƒè¯•æ‰“æ–­ç‚¹\n\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps jax | grep test30493 12333 12333 30493 pts/1    12333 S+    1001   0:00 gdb test_g12333 12412 12412 30493 pts/1    12333 t     1001   0:00 /home/muxue/GIT/raspi/code/22-09-24_?ç¨‹/test_g\n\nè¿™æ—¶å€™test_gè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªå¤„äºå°tçŠ¶æ€çš„è¿›ç¨‹\n\n5. è¿›ç¨‹ä¼˜å…ˆçº§\næƒé™ï¼šèƒ½è¿˜æ˜¯ä¸èƒ½çš„é—®é¢˜ï¼Œå†³å®šè¿›ç¨‹èƒ½ä¸èƒ½è®¿é—®æŸç§ç‰¹å®šçš„èµ„æº\nä¼˜å…ˆçº§ï¼šè¿›ç¨‹å¯ä»¥è®¿é—®è¯¥èµ„æºï¼Œä½†æœ‰å…ˆåé¡ºåºï¼ˆè¿è¡Œé˜Ÿåˆ—ï¼‰\n\nè¿›ç¨‹åœ¨æ’é˜Ÿè·å–èµ„æºçš„æœ¬è´¨å°±æ˜¯åœ¨ç¡®è®¤ä¼˜å…ˆçº§ã€‚è¿™æ˜¯å› ä¸ºç³»ç»Ÿçš„æŸäº›æ…¢èµ„æºä¸å¤Ÿå¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦è®©è¿›ç¨‹è¿›å…¥æ’é˜Ÿæ¥å…ˆåè®¿é—®ã€‚\nè€Œä¼˜å…ˆçº§è¶Šé«˜çš„è¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿæ‰§è¡Œå®ƒçš„å“åº”å°±ä¼šæ›´å¿«ã€‚å…¶ä¼šæŠŠå®ƒæ’å…¥åˆ°ä¼˜å…ˆçº§ä½äºå®ƒçš„è¿›ç¨‹ä¹‹å‰ï¼Œå…ˆè¿è¡Œè¿™ä¸ªâ€œvipè¿›ç¨‹â€ï¼Œå†è¿è¡Œé‚£äº›â€œæ™®é€šè¿›ç¨‹â€\n5.1 linuxè¿›ç¨‹ä¼˜å…ˆçº§å¯ä»¥ç”¨ä¸‹é¢çš„ps -laå‘½ä»¤æŸ¥çœ‹å½“å‰bashä¸‹çš„è¿›ç¨‹\n[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps -lF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 27595 30493  0  80   0 - 38587 -      pts/1    00:00:00 ps0 S  1001 30493 30492  0  80   0 - 29576 do_wai pts/1    00:00:00 bash[muxue@bt-7274:~/GIT/raspi/code/22-09-24_è¿›ç¨‹]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD1 S  1001 27546     1  0  80   0 -  1833 hrtime pts/0    00:00:00 test20 R  1001 27598 30493  0  80   0 - 38595 -      pts/1    00:00:00 ps\n\nå…¶ä¸­çš„PRIå’ŒNIå°±æ˜¯æˆ‘ä»¬è¿›ç¨‹ä¼˜å…ˆçº§çš„æ•°æ®\n\nlinuxçš„è¿›ç¨‹ä¼˜å…ˆçº§&#x3D;priority_old+nice\nlinuxä¸‹è¿›ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§æ˜¯80ï¼ŒPRIå€¼è¶Šä½ï¼Œä¼˜å…ˆçº§è¶Šé«˜\nNIå€¼æ˜¯è¿›ç¨‹ä¼˜å…ˆçº§çš„ä¿®æ­£æ•°æ®ï¼Œæˆ‘ä»¬ä¿®æ”¹è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œä¿®æ”¹çš„æ˜¯NIå€¼è€Œä¸æ˜¯PRI\n\nè¿™ä¸¤ä¸ªå€¼å…è®¸çš„èŒƒå›´å¦‚ä¸‹ï¼ŒLinuxç³»ç»Ÿå¹¶ä¸æ”¯æŒç”¨æˆ·æ— èŠ‚åˆ¶çš„ä¿®æ”¹ä¼˜å…ˆçº§\n-20 &lt;= NI &lt;= 1960 &lt;= PRI &lt;= 99\n\n5.2 ä½¿ç”¨topå‘½ä»¤è¿›è¡Œä¿®æ”¹ä¼˜å…ˆçº§linuxä¸‹ä¿®æ”¹ä¼˜å…ˆçº§çš„æ“ä½œå¦‚ä¸‹ï¼Œè¿è¡Œtest1ç¨‹åºåï¼Œå…ˆæŸ¥çœ‹å®ƒçš„ä¼˜å…ˆçº§ä¿¡æ¯\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 29632 30493 98  80   0 -  1833 -      pts/1    00:00:42 test11 Z  1001 29633 29632  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;0 R  1001 30732 29713  0  80   0 - 38595 -      pts/0    00:00:00 ps\n\nåœ¨ä½¿ç”¨sudo topåï¼Œè¿›å…¥ç•Œé¢æŒ‰rï¼Œè¾“å…¥éœ€è¦è®¾ç½®çš„è¿›ç¨‹pidåï¼Œå†è¾“å…¥éœ€è¦è°ƒæ•´çš„niceå€¼\n\n\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 29632 30493 99  70 -10 -  1833 -      pts/1    00:02:41 test11 Z  1001 29633 29632  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œtest1è¿›ç¨‹çš„ä¼˜å…ˆçº§å·²ç»è¢«æˆ‘ä»¬æ”¹æˆäº†70\nå†æ¥å°è¯•ç¬¬äºŒæ¬¡ï¼Œè¿™æ¬¡niceè®¾ç½®ä¸º20çœ‹çœ‹\n\n[muxue@bt-7274:~]$ ps -laF S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD0 R  1001 30697 30493 98  99  19 -  1833 -      pts/1    00:00:16 test11 Z  1001 30698 30697  0  80   0 -     0 do_exi pts/1    00:00:00 test1 &lt;defunct&gt;\n\nè¯¶ï¼Œpidè®¾ç½®æˆ20ä¹‹åï¼Œä¸ºå•¥NIå€¼å˜æˆäº†19ï¼Œè€ŒPRIå˜æˆäº†99å‘¢ï¼Ÿ\n\nä¾æ®æˆ‘ä»¬ä»¥å¾€çš„æƒ¯æ€§æ€ç»´ï¼Œæ—¢ç„¶è¿›ç¨‹ä¼˜å…ˆçº§&#x3D;priority_old+niceï¼Œé‚£ä¹ˆä¿®æ”¹äº†ä¹‹åä¸åº”è¯¥æ˜¯åŸæœ¬çš„70+20&#x3D;90å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯99å‘¢ï¼Ÿ\n\nè¿™æ˜¯å› ä¸ºæ¯ä¸€æ¬¡è®¾ç½®çš„æ—¶å€™ï¼Œpriority_oldéƒ½ä¼šè¢«é‡ç½®æˆ80ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥è®°ä½ï¼ŒLinuxä¸‹è¿›ç¨‹çš„ä¼˜å…ˆçº§&#x3D;80+Niå€¼\nThe Endæ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœæœ¬ç¯‡åšå®¢æœ‰å•¥é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹åœ°å€ç©ºé—´","url":"/posts/1845419185/","content":"æœ¬ç¯‡åšå®¢æ¥è®¤è¯†ä¸€ä¸‹linuxä¸‹ç¨‹åºåœ°å€ç©ºé—´çš„æ¦‚å¿µ\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n[TOC]\n1.å¼•å…¥ç¨‹åºåœ°å€ç©ºé—´ä¹‹å‰å­¦ä¹ C/C++çš„æ—¶å€™ï¼Œå¤šå°‘åº”è¯¥éƒ½å¬è¿‡æ ˆåŒº&#x2F;å †åŒº&#x2F;é™æ€åŒº&#x2F;å…¨å±€åŒºçš„æ¦‚å¿µï¼Œè¿˜æœ‰ä¸€å¼ å¾ˆç»å…¸çš„æ¼”ç¤ºå›¾ï¼Œå¤§éƒ¨åˆ†è®²è§£è¿™å‡ ä¸ªå†…å­˜åŒºåŸŸçš„å›¾ç‰‡éƒ½å’Œä¸‹å›¾ç±»ä¼¼\n\nä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œçš„ç¨‹åºåœ°å€ç©ºé—´ï¼Œæ˜¯æˆ‘ä»¬çš„ç‰©ç†å†…å­˜ä¸Šçš„ä¸œè¥¿å—ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼\n\nç¨‹åº&#x2F;è¿›ç¨‹åœ°å€ç©ºé—´æ˜¯æ“ä½œç³»ç»Ÿä¸Šçš„æ¦‚å¿µï¼Œå®ƒå’Œæˆ‘ä»¬ç‰©ç†å†…å­˜æœ¬èº«ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿\n\n\n1.1 éªŒè¯ä¸åŒåŒºåŸŸç”¨ä¸‹é¢è¿™ä¸ªä»£ç æ¥ç®€å•éªŒè¯ä¸€ä¸‹ä¸åŒåŒºåŸŸä¸Šçš„åŒºåˆ«\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;int un_global_val;//æœªåˆå§‹åŒ–å…¨å±€å˜é‡int global_val=100;//å·²åˆå§‹åŒ–å…¨å±€å˜é‡//mainå‡½æ•°çš„å‚æ•°int main(int argc, char *argv[], char *env[])&#123;    printf(&quot;code addr         : %p\\n&quot;, main);    printf(&quot;init global addr  : %p\\n&quot;, &amp;global_val);    printf(&quot;uninit global addr: %p\\n&quot;, &amp;un_global_val);    char *m1 = (char*)malloc(100);    char *m2 = (char*)malloc(100);    char *m3 = (char*)malloc(100);    char *m4 = (char*)malloc(100);    int a = 100;    static int s = 100;    printf(&quot;heap addr         : %p\\n&quot;, m1);    printf(&quot;heap addr         : %p\\n&quot;, m2);    printf(&quot;heap addr         : %p\\n&quot;, m3);    printf(&quot;heap addr         : %p\\n&quot;, m4);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m1);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m2);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m3);    printf(&quot;stack addr        : %p\\n&quot;, &amp;m4);    printf(&quot;stack addr a      : %p\\n&quot;, &amp;a);    printf(&quot;stack addr s      : %p\\n&quot;, &amp;s);    printf(&quot;\\n&quot;);    for(int i = 0; i &lt; argc; i++)    &#123;        printf(&quot;argv addr         : %p\\n&quot;, argv[i]);    &#125;    printf(&quot;\\n&quot;);    for(int i =0 ; env[i];i++)    &#123;        printf(&quot;env addr          : %p\\n&quot;, env[i]);    &#125;    return 0;&#125;\n\n\né€šè¿‡ä¸Šé¢çš„æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°å…¶ç»“æœå’Œæ–‡ç« æœ€å¼€å§‹çš„é‚£å¼ å›¾ç›¸åŒã€‚è¿™é‡Œè§£é‡Šä¸€ä¸‹å‘ä¸Š/å‘ä¸‹çš„å«ä¹‰\n\nå‘ä¸Šå¢é•¿ï¼šå‘åœ°å€å¢å¤§çš„æ–¹å‘å¢é•¿\nå‘ä¸‹å¢é•¿ï¼šå‘åœ°å€å‡å°çš„æ–¹å‘å¢é•¿\n\nä¸è¿‡é‚£ä¸ªå›¾ç‰‡å†…éƒ¨è¿˜å°‘äº†ä¸€äº›ä¸œè¥¿ï¼Œæ¯”å¦‚å‘½ä»¤è¡Œå‚æ•°å’Œç¯å¢ƒå˜é‡å…¶å®æ˜¯å­˜æ”¾åœ¨æ ˆåŒºä¹‹ä¸Šçš„ã€‚è¡¥å…¨ä¹‹åçš„å›¾ç‰‡å¦‚ä¸‹\n\nå…¶ä¸­æˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œæ ˆåŒºå’Œå †åŒºä¹‹é—´æœ‰éå¸¸å¤§çš„å†…å­˜ç©ºéš™\nheap addr         : 0x1a140f0heap addr         : 0x1a14160stack addr        : 0x7ffe6671ec60stack addr        : 0x7ffe6671ec58\n\nå› ä¸ºåœ¨C&#x2F;C++ä¸­å®šä¹‰çš„å˜é‡éƒ½æ˜¯åœ¨æ ˆä¸Šä¿å­˜çš„ï¼Œæ ˆå‘ä¸‹å¢é•¿ï¼Œå…ˆå®šä¹‰çš„å˜é‡åœ°å€è¾ƒé«˜ï¼\nint a = 100;static int s = 100;\n\nå…³äºå‡½æ•°ä¸­staticä¿®é¥°çš„å˜é‡ï¼Œå¯ä»¥çœ‹åˆ°å…¶åœ°å€ç©ºé—´å±äºå…¨å±€é™æ€åŒºã€‚è™½ç„¶åœ¨å‡½æ•°ä¸­ç”¨staticä¿®é¥°æ˜¯é™åˆ¶å…¶åªèƒ½åœ¨è¯¥å‡½æ•°å†…è®¿é—®ï¼Œä½†æ˜¯è¯¥å˜é‡çš„å£°æ˜å‘¨æœŸæ˜¯è·Ÿéšæ•´ä¸ªç¨‹åºçš„ï¼\nstack addr a      : 0x7ffe6671ec44stack addr s      : 0x601048\n\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬ä¹Ÿæ²¡çœ‹çœ‹å‡ºæ¥ç¨‹åºåœ°å€ç©ºé—´åœ¨å“ªå„¿å•Šï¼Ÿ\n1.2 forkæ„ŸçŸ¥åœ°å€ç©ºé—´çš„å­˜åœ¨ä¸‹é¢å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„forkä»£ç æ¥ç¡®è®¤ç¨‹åºåœ°å€ç©ºé—´çš„å­˜åœ¨ï¼\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;int main()&#123;    int test = 10;    int ret = fork();    if(ret == 0)    &#123;        while(1)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%d,ppid:%d,test:%d,&amp;test: %p\\n\\n&quot;,getpid(),getppid(),test,&amp;test);            sleep(1);        &#125;    &#125;    else    &#123;            while(1)        &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%d,ppid:%d,test:%d,&amp;test: %p\\n\\n&quot;,getpid(),getppid(),test,&amp;test);            sleep(1);        &#125;    &#125;           return 0;&#125;\n\nä¾æ—§æ˜¯æœ€ç®€å•çš„ä¸€ä¸ªforkä»£ç ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒäºŒè€…æ‰“å°çš„ç»“æœåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼\n\nå¯å¦‚æœæˆ‘ä»¬åœ¨å­è¿›ç¨‹ä¸­ä¿®æ”¹ä¸€ä¸‹testå‘¢ï¼Ÿ\n\nè¿™æ—¶å€™å°±ä¼šå‘ç°ä¸€ä¸ªç¦»è°±çš„ç°è±¡ï¼šå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹æ‰“å°çš„testå€¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯å…¶åœ°å€å´å®Œå…¨ç›¸åŒï¼\nå¦‚æœæˆ‘ä»¬åœ¨C/C++ä¸­ä½¿ç”¨çš„åœ°å€å°±æ˜¯ç‰©ç†åœ°å€ï¼Œæ˜¯ä¸å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µçš„ï¼æ€ä¹ˆå¯èƒ½åœ¨ç‰©ç†å†…å­˜çš„åŒä¸€ä¸ªåœ°å€è®¿é—®å‡ºä¸¤ä¸ªä¸åŒçš„ç»“æœå‘¢ï¼Ÿ\n\nå°±å¥½æ¯”å¼ ä¸‰å’Œæå››åœ¨åŒä¸€å¤©çš„åŒä¸€æ—¶é—´å»äº†AAè·¯30å·è¿™ä¸ªåœ°å€ï¼Œä¸å¯èƒ½ä¼šå‡ºç°å¼ ä¸‰å»äº†å‘ç°æ˜¯è¶…å¸‚ï¼Œè€Œæå››å»äº†å‘ç°æ˜¯åŒ»é™¢çš„æƒ…å†µ\n\nè¿™ä¾¿å‘Šè¯‰æˆ‘ä»¬äº†ç¨‹åºåœ°å€ç©ºé—´çš„å­˜åœ¨ï¼Œäº¦æˆ–è€…è¯´ï¼Œæˆ‘ä»¬åœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨çš„åœ°å€éƒ½æ˜¯è™šæ‹Ÿåœ°å€\n2.ç®€è¿°ç¨‹åºåœ°å€ç©ºé—´æ¯ä¸€ä¸ªè¿›ç¨‹åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œéƒ½ä¼šè®©æ“ä½œç³»ç»Ÿç»™å…¶åˆ†é…ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œè¿™å°±æ˜¯è¿›ç¨‹åœ°å€ç©ºé—´\n\nä»¥å…ˆæè¿°å†ç»„ç»‡çš„ç†å¿µï¼Œè¿›ç¨‹åœ°å€ç©ºé—´å…¶å®æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä¸€ä¸ªæ•°æ®ç»“æ„struct mm_struct\nä¹‹å‰æåˆ°è¿‡è¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼Œåœ¨å¤šè¿›ç¨‹è¿è¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç‹¬äº«å„ç§èµ„æºã€‚è€Œè¿›ç¨‹åœ°å€ç©ºé—´çš„ä½œç”¨ï¼Œå°±æ˜¯è®©è¿›ç¨‹è®¤ä¸ºè‡ªå·±æ˜¯ç‹¬å æ“ä½œç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºï¼\n\nè¿™ä¸ªæ“ä½œï¼Œå…¶å®å°±æ˜¯æ“ä½œç³»ç»Ÿç»™è¯¥è¿›è¿›ç¨‹ç”»äº†ä¸€ä¸ªå‡çš„å†…å­˜ï¼ˆè™šæ‹Ÿåœ°å€ï¼‰è¿›ç¨‹éœ€è¦å†…å­˜çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šåœ¨é¡µè¡¨é‡Œé¢ç”»ä¸€ä¸ªåœ°å€ç»™ä»–ï¼Œå†å°†è¯¥åœ°å€æ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šé¢\n\né—®é¢˜ï¼šä¸€ä¸ªåˆ†é¡µå­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œåœ°å€é•¿åº¦ä¸º 32 ä½ï¼Œå…¶ä¸­é¡µå·å  8 ä½ï¼Œåˆ™é¡µè¡¨é•¿åº¦æ˜¯ï¼Ÿ\nè§£æï¼šé¡µå·å³é¡µè¡¨é¡¹çš„åºå·ï¼Œæ€»å…±å 8ä¸ªäºŒè¿›åˆ¶ä½ï¼Œæ„å‘³ç€é¡µè¡¨é¡¹çš„ä¸ªæ•°å°±æ˜¯2^8\n\n\nè€Œå½“è¿›ç¨‹éœ€è¦ç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œæœ¬è´¨å°±æ˜¯æ“ä½œç³»ç»Ÿåœ¨mm_strcutä¸­ä¿®æ”¹ä¸åŒåŒºåŸŸçš„endç½¢äº†ï¼\nåœ¨Linuxæºç ä¸­å¯ä»¥çœ‹åˆ°è¿™ç©æ„çš„å­˜åœ¨ï¼Œå…¶ä¸­çš„struct vm_area_struct * mmap;å°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬çš„è™šæ‹Ÿåœ°å€ç®¡ç†çš„å†…æ ¸\n\nè¿™é‡Œå°±èƒ½çœ‹åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´çš„startå’Œendäº†ï¼\n\n2.1 ç¨‹åºåœ°å€ç©ºé—´å’Œä»£ç ç¼–è¯‘\nç¨‹åºåœ°å€ç©ºé—´ä¸ä»…æ˜¯æ“ä½œç³»ç»Ÿéœ€è¦è€ƒè™‘ï¼Œæˆ‘ä»¬ç”¨çš„ç¼–è¯‘å™¨ä¹Ÿä¼šè€ƒè™‘è¿™éƒ¨åˆ†çš„å†…å®¹\n\næˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€ä»£ç éœ€è¦ç»è¿‡é¢„å¤„ç†-ç¼–è¯‘-é“¾æ¥-æ±‡ç¼–è¿™å‡ ä¸ªæ­¥éª¤\n\nç¨‹åºç¼–è¯‘å‡ºæ¥ï¼Œæ²¡æœ‰è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¨‹åºå†…éƒ¨æœ‰åœ°å€ï¼ˆå¦‚æœæ²¡æœ‰åœ°å€ï¼Œæ— æ³•è¿›è¡Œé“¾æ¥ï¼‰\nç¨‹åºç¼–è¯‘å‡ºæ¥ï¼Œæ²¡æœ‰è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¨‹åºå†…éƒ¨æœ‰åŒºåŸŸï¼ˆreadelf -s å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥æŸ¥çœ‹åŒºåŸŸï¼‰\n\n[muxue@bt-7274:~/git/raspi/code/22-10-07_ç¨‹åºåœ°å€ç©ºé—´]$ readelf -S testThere are 30 section headers, starting at offset 0x19f8:Section Headers:  [Nr] Name              Type             Address           Offset       Size              EntSize          Flags  Link  Info  Align  [ 0]                   NULL             0000000000000000  00000000       0000000000000000  0000000000000000           0     0     0  [ 1] .interp           PROGBITS         0000000000400238  00000238       000000000000001c  0000000000000000   A       0     0     1  [ 2] .note.ABI-tag     NOTE             0000000000400254  00000254       0000000000000020  0000000000000000   A       0     0     4  [ 3] .note.gnu.build-i NOTE             0000000000400274  00000274       0000000000000024  0000000000000000   A       0     0     4  [ 4] .gnu.hash         GNU_HASH         0000000000400298  00000298       000000000000001c  0000000000000000   A       5     0     8  [ 5] .dynsym           DYNSYM           00000000004002b8  000002b8       00000000000000c0  0000000000000018   A       6     1     8  [ 6] .dynstr           STRTAB           0000000000400378  00000378       0000000000000059  0000000000000000   A       0     0     1  [ 7] .gnu.version      VERSYM           00000000004003d2  000003d2       0000000000000010  0000000000000002   A       5     0     2  [ 8] .gnu.version_r    VERNEED          00000000004003e8  000003e8       0000000000000020  0000000000000000   A       6     1     8  [ 9] .rela.dyn         RELA             0000000000400408  00000408       0000000000000018  0000000000000018   A       5     0     8  [10] .rela.plt         RELA             0000000000400420  00000420       00000000000000a8  0000000000000018  AI       5    23     8  [11] .init             PROGBITS         00000000004004c8  000004c8       000000000000001a  0000000000000000  AX       0     0     4  [12] .plt              PROGBITS         00000000004004f0  000004f0       0000000000000080  0000000000000010  AX       0     0     16  [13] .text             PROGBITS         0000000000400570  00000570       00000000000001e2  0000000000000000  AX       0     0     16  [14] .fini             PROGBITS         0000000000400754  00000754       0000000000000009  0000000000000000  AX       0     0     4  [15] .rodata           PROGBITS         0000000000400760  00000760       000000000000005e  0000000000000000   A       0     0     8  [16] .eh_frame_hdr     PROGBITS         00000000004007c0  000007c0       0000000000000034  0000000000000000   A       0     0     4  [17] .eh_frame         PROGBITS         00000000004007f8  000007f8       00000000000000f4  0000000000000000   A       0     0     8  [18] .init_array       INIT_ARRAY       0000000000600e10  00000e10       0000000000000008  0000000000000008  WA       0     0     8  [19] .fini_array       FINI_ARRAY       0000000000600e18  00000e18       0000000000000008  0000000000000008  WA       0     0     8  [20] .jcr              PROGBITS         0000000000600e20  00000e20       0000000000000008  0000000000000000  WA       0     0     8  [21] .dynamic          DYNAMIC          0000000000600e28  00000e28       00000000000001d0  0000000000000010  WA       6     0     8  [22] .got              PROGBITS         0000000000600ff8  00000ff8       0000000000000008  0000000000000008  WA       0     0     8  [23] .got.plt          PROGBITS         0000000000601000  00001000       0000000000000050  0000000000000008  WA       0     0     8  [24] .data             PROGBITS         0000000000601050  00001050       0000000000000004  0000000000000000  WA       0     0     1  [25] .bss              NOBITS           0000000000601054  00001054       0000000000000004  0000000000000000  WA       0     0     1  [26] .comment          PROGBITS         0000000000000000  00001054       000000000000002d  0000000000000001  MS       0     0     1  [27] .symtab           SYMTAB           0000000000000000  00001088       0000000000000648  0000000000000018          28    46     8  [28] .strtab           STRTAB           0000000000000000  000016d0       000000000000021e  0000000000000000           0     0     1  [29] .shstrtab         STRTAB           0000000000000000  000018ee       0000000000000108  0000000000000000           0     0     1Key to Flags:  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),  L (link order), O (extra OS processing required), G (group), T (TLS),  C (compressed), x (unknown), o (OS specific), E (exclude),  l (large), p (processor specific)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¨‹åºå†…éƒ¨çš„åœ°å€ï¼Œå’Œå†…å­˜çš„åœ°å€æ²¡æœ‰å…³ç³»\nå¯ä»¥ç†è§£ä¸ºï¼Œæˆ‘ä»¬ç¨‹åºå†…éƒ¨éƒ½å­˜æ”¾çš„æ˜¯ä¸€ä¸ªç›¸å¯¹åœ°å€ã€‚ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œè®¤ä¸ºç¨‹åºæ˜¯æŒ‰ç…§0000~FFFFè¿›è¡Œç¼–å€çš„ã€‚\nå½“ç¨‹åºè¢«åŠ è½½åˆ°å†…å­˜å½“ä¸­æ—¶ï¼Œå‡è®¾ç³»ç»Ÿå°†è¯¥ç¨‹åºçš„ä»£ç ä»å†…å­˜0x100å¼€å§‹åŠ è½½ï¼Œå°±å¯ä»¥ä¾ç…§ç¨‹åºç¼–å€çš„æ•°æ®åŠ ä¸Šè¿™ä¸ªåç§»é‡ï¼Œä»è€Œå­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚\næ¯”å¦‚ç¨‹åºä¸­æœ‰ä¸€ä¸ªä»£ç æ®µçš„ä½ç½®æ˜¯0x1Fï¼Œè¿™æ—¶å€™åœ¨åŠ è½½ç¨‹åºçš„æ—¶å€™ï¼Œå°±ä¼šæŠŠè¿™ä¸ªä»£ç æ®µåŠ ä¸Šåç§»é‡æ¥åŠ è½½\n\n\n\nä»£ç åœ°å€\nè™šæ‹Ÿåœ°å€\n\n\n\n0x1f\n0x11f\n\n\n0x20\n0x120\n\n\nå¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œå§å“©å§å•¦â€¦â€¦\n2.2 å†™æ—¶æ‹·è´ç°åœ¨å°±å¯ä»¥æ¥è§£ç­”ä¸€ä¸‹1.2ä¸­å‡ºç°çš„é—®é¢˜äº†\n\nå½“å­è¿›ç¨‹å°è¯•ä¿®æ”¹testå˜é‡çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå¼€å§‹ä¸€ä¸ªå†™æ—¶æ‹·è´ï¼Œå¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´ï¼Œå°†å¯¹åº”çš„å€¼è€ƒå…¥è¯¥ç©ºé—´ï¼Œå†é‡æ–°æ˜ å°„é¡µè¡¨ã€‚\nè¿™æ—¶å€™ï¼Œè™½ç„¶é¡µè¡¨å·¦ä¾§çš„è™šæ‹Ÿåœ°å€æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯æ˜ å°„çš„ç‰©ç†åœ°å€å·²ç»ä¸ä¸€æ ·äº†ï¼\n\nè¿™æ ·å°±èƒ½ä¿è¯çˆ¶å­è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼Œè°ä¿®æ”¹å˜é‡éƒ½äº’ä¸å½±å“ï¼\n\nç±»ä¼¼C++ä¸­å®ç°çš„æ·±æ‹·è´ï¼\n\n2.2.1 forkä¸¤ä¸ªè¿”å›å€¼çš„è§£é‡Špid_t idè¿™ä¸ªå˜é‡å±äºçˆ¶è¿›ç¨‹æ ˆç©ºé—´ä¸­å®šä¹‰çš„å˜é‡ï¼Œä½†æ˜¯forkå†…éƒ¨ï¼Œreturnä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼ˆreturnçš„æœ¬è´¨æ˜¯é€šè¿‡å¯„å­˜å™¨å°†è¿”å›å€¼å†™å…¥åˆ°æ¥æ”¶è¿”å›å€¼çš„å˜é‡ä¸­ï¼‰\nå½“id = fork()çš„æ—¶å€™ï¼Œè°å…ˆè¿”å›ï¼Œè°å°±ä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´ã€‚æ‰€ä»¥åŒä¸€ä¸ªå˜é‡æœ‰ä¸åŒçš„å†…å®¹å€¼ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯åŒä¸€ä¸ªè™šæ‹Ÿåœ°å€ï¼Œå¯¹åº”äº†ä¸åŒç‰©ç†åœ°å€çš„ä½“ç°ï¼\n\næ‰“å°forkçš„è¿”å›å€¼ï¼Œå³å¯è§‚å¯Ÿåˆ°å’Œ1.2ä¸­ä¸€æ ·çš„æƒ…å†µï¼Œè™šæ‹Ÿåœ°å€ç›¸åŒï¼Œä½†æ˜¯retçš„å€¼ä¸åŒ\n\n\n3.ç¨‹åºåœ°å€ç©ºé—´çš„ä½œç”¨éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†…å­˜ä½œä¸ºä¸€ä¸ªç¡¬ä»¶ï¼Œæ²¡æœ‰åŠæ³•æ‹’ç»ä½ çš„è¯»å†™ï¼å†…å­˜æ˜¯ä¸å¸¦æ§åˆ¶åŠŸèƒ½çš„ï¼\nç›´æ¥è®©ç”¨æˆ·ä¿®æ”¹ç‰©ç†å†…å­˜é£é™©æå¤§ï¼š\n\né‡æŒ‡é’ˆé—®é¢˜\nç”¨æˆ·å¯èƒ½ç›´æ¥ä¿®æ”¹æ“ä½œç³»ç»Ÿéœ€è¦ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œå¯¼è‡´ç³»ç»Ÿboom\n\nç¨‹åºåœ°å€ç©ºé—´è®©è®¿é—®å†…å­˜æ—¶æ·»åŠ äº†ä¸€å±‚è½¯ç¡¬ä»¶å±‚ï¼Œå¯ä»¥å¯¹è½¬åŒ–è¿‡ç¨‹è¿›è¡Œå®¡æ ¸ï¼Œæ‹¦æˆªéæ³•çš„è®¿é—®\n\næ¯”å¦‚æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿›ç¨‹åœ¨å¾€è™šæ‹Ÿåœ°å€çš„å¸¸é‡åŒºè¯»å–æ•°æ®çš„æ—¶å€™ï¼Œä¸åšé˜»æ‹¦ï¼›ä½†æ˜¯å¾€å¸¸é‡åŒºå†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ‹¦æˆªã€‚è¿™æ‰æ˜¯æ— æ³•ä¿®æ”¹å¸¸é‡æ•°æ®çš„çœŸæ­£åŸç†\n\n\nä¿æŠ¤å†…å­˜\nå¯ä»¥ä½¿ç”¨è¿›ç¨‹ç®¡ç†æ›´å¥½çš„å¯¹åŠŸèƒ½æ¨¡å—è¿›è¡Œè§£è€¦ï¼ˆlinuxå†…å­˜ç®¡ç†ï¼‰\nè®©ç¨‹åº&#x2F;è¿›ç¨‹å¯ä»¥ç”¨ç»Ÿä¸€çš„æ–¹å¼&#x2F;è§†è§’æ¥çœ‹å¾…å†…å­˜ï¼Œä»¥ç»Ÿä¸€çš„æ–¹å¼ç¼–è¯‘åŠ è½½æ‰€æœ‰å¯æ‰§è¡Œç¨‹åºï¼Œç®€åŒ–ç¨‹åºæœ¬èº«çš„è®¾è®¡å’Œå®ç°\n\nåŒæ—¶ï¼Œç¨‹åºåœ°å€ç©ºé—´è¿˜å¯ä»¥å»¶è¿Ÿç”¨æˆ·çš„å†…å­˜ä½¿ç”¨ã€‚æ¯”å¦‚æˆ‘ä»¬ç°åœ¨mallocäº†100ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œå®é™…ä¸Šæ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šç«‹é©¬ç»™ä½ ç”³è¯·ç©ºé—´ï¼Œè€Œæ˜¯æ“ä½œä½ çš„mm_structè®©è¿›ç¨‹ä»¥ä¸ºè‡ªå·±å·²ç»ç”³è¯·æˆåŠŸäº†ã€‚å½“ç¨‹åºçœŸæ­£ä½¿ç”¨è¿™ä¸ªç©ºé—´çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šå»ç‰©ç†å†…å­˜ä¸­è¿›è¡Œæ˜ å°„ï¼\n\nç”³è¯·çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡linuxçš„å†…å­˜ç®¡ç†æ¨¡å—è¿›è¡Œæ“ä½œçš„ã€‚åŒæ—¶ï¼Œå†™æ—¶æ‹·è´ä¹Ÿæ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿçš„å†…å­˜ç®¡ç†æ¨¡å—æ¥å®Œæˆçš„ï¼\n\nè¿™ç§â€œå»¶è¿Ÿè®¿é—®â€ï¼Œå¯ä»¥é¿å…æŸäº›ç¨‹åºç”³è¯·äº†å†…å­˜è€Œåœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰ä½¿ç”¨çš„é—®é¢˜ï¼é¿å…äº†å†…å­˜èµ„æºçš„æ— æ•ˆå ç”¨ï¼ˆä¹Ÿæ˜¯ä¸€ç§æµªè´¹ï¼‰\n4.é¡µè¡¨å‰é¢åªæ˜¯å¯¹é¡µè¡¨åšäº†ä¸€ä¸ªåŸºæœ¬çš„è§£é‡Šï¼Œä½†é¡µè¡¨å¹¶ä¸å•çº¯è¿›è¡Œè™šæ‹Ÿåœ°å€å’Œç‰©ç†åœ°å€çš„æ˜ å°„ï¼Œå…¶è¿˜ä¼šå¢æ·»æƒé™ï¼Œæ˜¯å¦å‘½ä¸­çš„åˆ¤æ–­ï¼Œä»¥åŠU/Kæƒé™çš„æ ‡è¯†\n\n\næƒé™ï¼šé¿å…ä½ ä¿®æ”¹constå±æ€§çš„æ•°æ®\næ˜¯å¦å‘½ä¸­ï¼šå¦‚æœå¯¹äºç‰©ç†å†…å­˜å¤„æ²¡æœ‰æ•°æ®ï¼Œåˆ™æ²¡æœ‰å‘½ä¸­ï¼›éœ€è¦ä»ç¡¬ç›˜ä¸­åŠ è½½æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œå°†æ˜¯å¦å‘½ä¸­æ›´æ”¹ä¸ºæ˜¯\nU&#x2F;Kæƒé™ï¼šç”¨æˆ·çº§å’Œå†…æ ¸çº§çš„å·®åˆ«ï¼Œå‚è€ƒ linuxä¿¡å· 5.1ä¸­å…³äºç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„æè¿°ï¼›é¿å…ç”¨æˆ·æ€çš„è¿›ç¨‹æ‰§è¡Œå†…æ ¸æ€çš„æºç \n\nå‰é¢æåˆ°ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºåœ°å€ç©ºé—´ã€‚è¦æ˜¯é¡µè¡¨åªæœ‰ä¸€å¼ çš„è¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹å‘¢ï¼Ÿ\nä»¥32ä½ç³»ç»Ÿä¸ºä¾‹ï¼š\n\nå†…å­˜ä¸€å…±æœ‰2^32æ¬¡æ–¹ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯4Gb\nå‡è®¾é¡µè¡¨æ¯ä¸€ä¸ªå­—èŠ‚çš„æ¡ç›®éœ€è¦8ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œé‚£å°±éœ€è¦32Gçš„ç©ºé—´æ¥å­˜æ”¾é¡µè¡¨ï¼\né¡µè¡¨è‚¯å®šä¸èƒ½å­˜åœ¨ç¡¬ç›˜é‡Œé¢ï¼Œä½†è¿™ä¹ˆå¤§çš„ç©ºé—´ä¸€èˆ¬ç”µè„‘çš„å†…å­˜å¯æ”¾ä¸ä¸‹\nè¿™ä¹Ÿå°±å‘Šè¯‰æˆ‘ä»¬ï¼Œé¡µè¡¨å¹¶ä¸æ˜¯åªæœ‰ä¸€å¼ ï¼\n\né¡µè¡¨å®é™…ä¸Šæ˜¯æœ‰å¤šå¼ çš„ğŸ‘Œ\n4.1 åˆ†é¡µå­˜å‚¨å½“cpuè®¿é—®è¿›ç¨‹åœ°å€ç©ºé—´çš„æ—¶å€™ï¼Œå…¶è®¿é—®çš„å…¶å®æ˜¯è™šæ‹Ÿåœ°å€\n32ä½ç¯å¢ƒä¸‹ï¼Œä¸ºäº†ä¿è¯åœ°å€èƒ½è¦†ç›–åˆ°æ‰€æœ‰ä½ç½®ï¼Œæ¯ä¸€ä¸ªåœ°å€éƒ½æœ‰32ä¸ªæ¯”ç‰¹ä½ï¼›å½“MMUæ‹¿åˆ°è™šæ‹Ÿåœ°å€çš„æ—¶å€™ï¼Œå…¶å®ä¼šå°†è™šæ‹Ÿåœ°å€æ‹†åˆ†\n10     +    10     +    1201010101 00 01000111 11 00001011 1001xxxxxxxx xx yyyyyyyy yy zzzzzzzz zzzz\n\n\nè¿™é‡Œé¢çš„å‰10ä½ä¼šç”¨äºåœ¨é¡µç›®å½•ä¸­ï¼Œç”¨äºæŸ¥æ‰¾äºŒçº§é¡µè¡¨\nä¸­é—´10ä½ä¼šåœ¨äºŒçº§é¡µè¡¨ä¸­æŸ¥æ‰¾é¡µï¼ŒæŒ‡å‘çš„æ˜¯é¡µåœ¨ç‰©ç†å†…å­˜ä¸­çš„èµ·å§‹åœ°å€\næœ€åçš„12å­—èŠ‚ï¼Œä¸€å…±æ˜¯2^12=4kbï¼Œå¯ä»¥è¦†ç›–å•ä¸ªé¡µçš„å¤§å°ï¼Œæ˜¯å•ä¸ªé¡µä¸­çš„åç§»é‡\n\nè¿™é‡Œåˆæ¶‰åŠåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œé‚£ä¾¿æ˜¯Linuxä¸‹IOçš„åŸºæœ¬å•ä½æ˜¯4kb\næœ‰äº†è¿™ä¸¤çº§çš„é¡µè¡¨åï¼Œç¬¬ä¸€çº§é¡µè¡¨åªéœ€è¦2^10ä¸ªæ¡ç›®ï¼Œç¬¬äºŒçº§é¡µè¡¨æœ‰å¤šä¸ªï¼Œæ¯ä¸€ä¸ªä¹Ÿæ˜¯2^10ä¸ªæ¡ç›®ï¼Œæœ€åå†æŒ‡å‘4kbçš„é¡µ\nlinuxä¸‹æœ‰ä¸“é—¨çš„ç»“æ„ä½“æ¥æè¿°å•ä¸ªé¡µï¼Œå’Œå…¶ä»–ç³»ç»Ÿä¸€æ ·ï¼Œæœ‰äº†å¯¹å•ä¸ªé¡µçš„æè¿°åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„å°†é¡µç»™ç®¡ç†èµ·æ¥ã€‚æ­¤æ—¶å¯¹å†…å­˜çš„ç®¡ç†ï¼Œå°±è½¬æ¢æˆäº†å¯¹æ•°ç»„çš„å¢åˆ æŸ¥æ”¹\nstruct page&#123;&#125;;\n\né¡µè¡¨å®ç°äº†åˆ†ç¦»ä¹‹åï¼Œå°±å¯ä»¥æŒ‰éœ€åˆ›å»ºï¼Œä¸ä¼šå‡ºç°ä¸€æ¬¡æ€§åˆ›å»ºä¸€ä¸ªéå¸¸å¤§çš„é¡µè¡¨ï¼Œå¯¼è‡´å†…å­˜ç©ºé—´éƒ½è¢«å æ»¡çš„æƒ…å†µï¼\n\næœ€åˆçš„ç®—æ³•å…¶å®æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºé¡µè¡¨çš„æ˜ å°„å¹¶ä¸éœ€è¦å¯¹æ¯ä¸€ä¸ªå­—èŠ‚è¿›è¡Œæ˜ å°„ã€‚åªéœ€è¦æ˜ å°„åˆ°4kbè¿™ä¸€å—å³å¯ï¼Œæ€»å…±çš„æ¡ç›®æ˜¯2^32 / 2^12 = 2^20ä¸ªï¼Œæ‰€å ç”¨ç©ºé—´ä¹Ÿæ²¡é‚£ä¹ˆå¤§äº†\n\n4.2 åŠ è½½å¦‚æœåœ¨å¯»å€çš„æ—¶å€™ï¼Œå‘ç°äºŒçº§é¡µè¡¨ä¸­æ‰€å¯¹åº”çš„pageæ˜¯NULLï¼Œé‚£ä¹ˆä»£è¡¨è¯¥ä»£ç çš„æ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°å†…å­˜ä¸­\næ­¤æ—¶å°±å¯ä»¥ä»ç¡¬ç›˜ä¸­åŠ è½½ï¼Œå¹¶æŠŠpageçš„é¦–åœ°å€ç»™æ˜ å°„è¿›äºŒçº§é¡µè¡¨ä¸­\n\nç»“è¯­å…³äºè¿™éƒ¨åˆ†çš„ç†è§£å…¶å®å¹¶ä¸ç®—ååˆ†é€å½»ï¼Œæˆ–è®¸åœ¨æ—¥åçš„é¡¹ç›®å®è·µä¸­èƒ½åŠ æ·±ç†è§£å‘¢~\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹æ§åˆ¶","url":"/posts/2395550697/","content":"é˜¿å·´é˜¿å·´ï¼Œè¿›ç¨‹æ¦‚å¿µç»“æŸäº†ï¼Œç°åœ¨è¯¥å­¦ä¹ å¦‚ä½•æ§åˆ¶ä¸€ä¸ªè¿›ç¨‹äº†\n\n\n\næ‰€ç”¨ç³»ç»Ÿï¼šCentOS 7.6\n\n[TOC]\n1.è¿›ç¨‹åˆ›å»º1.1 forkå…³äºlinuxä¸‹çš„è¿›ç¨‹åˆ›å»ºå…¶å®æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡äº†ï¼Œé‚£ä¾¿æ˜¯ä½¿ç”¨forkå‡½æ•°æ¥è¿›è¡Œæ“ä½œ\npid_t ret = fork();\n\nforkçš„è¿”å›å€¼ï¼šå­è¿›ç¨‹è¿”å›0ã€çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹pidï¼›å‡ºé”™è¿”å›-1\n\nå°tipsï¼Œå…¶å®pid_tå°±æ˜¯intç±»å‹ï¼\ntypedef __pid_t pid_t;\n\nåœ¨ä¸Šç¯‡ç¨‹åºåœ°å€ç©ºé—´çš„åšå®¢ä¸­å·²ç»æåˆ°ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹è°ƒç”¨forkå‡½æ•°çš„æ—¶å€™\n\næ“ä½œç³»ç»Ÿä¼šç»™å­è¿›ç¨‹åˆ†é…ä¸€ä¸ªæ–°çš„å†…å­˜å—mm_struct+é¡µè¡¨å’Œå†…æ ¸æ•°æ®ç»“æ„task_strcutç»™å­è¿›ç¨‹\nå°†çˆ¶è¿›ç¨‹çš„éƒ¨åˆ†æ•°æ®ç»“æ„æ‹·è´è‡ªå­è¿›ç¨‹ï¼ˆå†™æ—¶æ‹·è´ï¼‰\nå°†å­è¿›ç¨‹æ·»åŠ ç³»ç»Ÿè¿›ç¨‹åˆ—è¡¨å½“ä¸­\nforkè¿”å›ï¼Œå¼€å§‹è°ƒåº¦å™¨è°ƒåº¦\n\nç®€å•è¯´æ¥ï¼Œä¾¿æ˜¯forkä¹‹å‰åªæœ‰çˆ¶è¿›ç¨‹å•ç‹¬è¿è¡Œã€‚forkä¹‹åçˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œæµä¼šåˆ†åˆ«æ‰§è¡Œï¼Œä¸”ç›¸äº’ç‹¬ç«‹\n\nforkä¹‹åï¼Œæ˜¯çˆ¶è¿›ç¨‹å…ˆæ‰§è¡Œè¿˜æ˜¯å­è¿›ç¨‹å…ˆæ‰§è¡Œä¾èµ–äºè°ƒåº¦å™¨çš„è°ƒåº¦ã€‚å¹¶éä¸€å®šæ˜¯çˆ¶è¿›ç¨‹å…ˆæ‰§è¡Œï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå­è¿›ç¨‹è™½ç„¶å…±äº«çˆ¶è¿›ç¨‹çš„æ‰€æœ‰ä»£ç ï¼Œä½†æ˜¯å®ƒåªèƒ½ä»forkä¹‹åå¼€å§‹æ‰§è¡Œ\nè¿™é‡Œæ¶‰åŠåˆ°äº†cpuçš„eipç¨‹åºè®¡æ•°å™¨ï¼ˆåˆç§°pcæŒ‡é’ˆï¼‰è¿™ç©æ„çš„ä½œç”¨å°±æ˜¯ä¿å­˜å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼\n\næ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯CPUæ‰§è¡Œçš„æŒ‡ä»¤ï¼Œå¹¶élinuxä¸‹bashé‡Œé¢çš„å‘½ä»¤\n\neipç¨‹åºè®¡æ•°å™¨ä¼šæŠŠä¸‹ä¸€ä¸ªæŒ‡ä»¤æ‹·è´ç»™å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å°±ä¼šä»è¯¥eipæ‰€æŒ‡å‘çš„ä»£ç å¤„ï¼ˆå³forkä¹‹åçš„ä»£ç ï¼‰å¼€å§‹è¿è¡Œ\nforkå•¥æ—¶å€™ä¼šå‡ºé”™å¦‚æœä½ å†™ä¸€ä¸ªå¾ªç¯ä»£ç ä¸€ç›´åˆ›å»ºå­è¿›ç¨‹ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½åˆ›å»ºå¤±è´¥ï¼\nèƒ½å¤Ÿåˆ›å»ºçš„å­è¿›ç¨‹ä¸ªæ•°ä¾èµ–äºä»£ç çš„å¤æ‚åº¦\n1.2 å†™æ—¶æ‹·è´ä¹‹å‰å·²ç»æåˆ°è¿‡å†™æ—¶æ‹·è´çš„æ¦‚å¿µï¼Œè¿™é‡Œå†æ¬¡è¯´æ˜ä¸€ç•ª\n\n\nä¸ºä»€ä¹ˆè¦å†™æ—¶æ‹·è´ï¼Œåˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ç›´æ¥æŠŠæ•°æ®åˆ†å¼€ä¸è¡Œå—\n\nç­”ï¼Œè¿™æ ·ä¼šå­˜åœ¨å†…å­˜æµªè´¹ï¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œçˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œä¼šå‡ºç°ä¸‹é¢çš„ä¸€äº›æƒ…å†µ\n\nçˆ¶è¿›ç¨‹çš„ä»£ç å’Œæ•°æ®ï¼Œå­è¿›ç¨‹ä¸ä¸€å®šå…¨éƒ¨éƒ½ä¼šä½¿ç”¨ã€‚å³ä¾¿ä½¿ç”¨ã€ä¹Ÿä¸ä¸€å®šä¼šè¿›è¡Œä¿®æ”¹\nç†æƒ³çŠ¶æ€ä¸‹ï¼Œå¯ä»¥æŠŠçˆ¶å­è¿›ç¨‹ä¼šä¿®æ”¹çš„å†…å®¹è¿›è¡Œåˆ†ç¦»ï¼Œä¸ä¼šä¿®æ”¹çš„éƒ¨åˆ†å…±äº«å³å¯ã€‚ä½†æ˜¯è¿™æ ·çš„å®ç°éå¸¸å¤æ‚\nå¦‚æœforkçš„æ—¶å€™ï¼Œå°±ç›´æ¥åˆ†ç¦»çˆ¶å­è¿›ç¨‹çš„æ•°æ®ï¼Œä¼šå¢åŠ forkè¿è¡Œçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦\n\næ‰€ä»¥æœ€ç»ˆlinuxé‡‡ç”¨äº†å†™æ—¶æ‹·è´çš„æ–¹å¼ï¼Œåªä¼šåœ¨éœ€è¦çš„æ—¶å€™ï¼Œæ‹·è´çˆ¶å­éœ€è¦ä¿®æ”¹çš„æ•°æ®ã€‚è¿™æ ·å»¶è¿Ÿæ‹·è´ï¼Œå˜ç›¸æé«˜äº†å†…å­˜çš„ä½¿ç”¨ç‡\n2.è¿›ç¨‹ç»ˆæ­¢2.1 ç¨‹åºé€€å‡ºç åœ¨ä¹‹å‰å­¦ä¹ C&#x2F;C++çš„æ—¶å€™ï¼Œæˆ‘ä»¬çŸ¥é“mainå‡½æ•°æ˜¯ä¸€ä¸ªç¨‹åºçš„å…¥å£å‡½æ•°ï¼Œé‚£ä¹ˆä½ çŸ¥é“mainå‡½æ•°å†…éƒ¨çš„è¿”å›æœ‰ä½•ç”¨ï¼Œåˆè¢«è°æ¥æ”¶äº†å—ï¼Ÿ\nint main()&#123;\treturn 0;&#125;\n\nä½¿ç”¨echo $?å‘½ä»¤æŸ¥çœ‹ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿›ç¨‹çš„æ¨å‡ºç \n\nint main()&#123;\treturn 10;&#125;\n\nä¿®æ”¹å¯¹åº”çš„è¿”å›å€¼ï¼Œå†æ¬¡è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒçš„ç»“æœ\n\nçŸ¥è¯†ç‚¹ï¼š?ç¯å¢ƒå˜é‡å­˜æ”¾çš„æ˜¯ä¸Šä¸€æ¬¡è¿è¡Œçš„ç¨‹åºçš„é€€å‡ºç \n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ echo $?10[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ echo $?0\n\næ¯”å¦‚è¿™é‡Œæˆ‘ä»¬è¿ç»­ä¸¤æ¬¡è®¿é—®è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡çš„ç»“æœæ˜¯æˆ‘ä»¬è‡ªå·±è¿è¡Œçš„ç¨‹åºè¿”å›çš„10ï¼Œç¬¬äºŒæ¬¡çš„ç»“æœæ˜¯0ï¼ˆechoå‘½ä»¤çš„è¿”å›å€¼ï¼‰\n\n2.1.1 strerroré‚£ä¹ˆï¼Œè¿™ä¸ªç¨‹åºé€€å‡ºç æœ‰ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨forå¾ªç¯æ‰“å°ä¸€ä¸‹åº“å‡½æ•°ä¸­strerrrorå‡½æ•°å†…è®°å½•çš„é”™è¯¯ç \n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    int i=0;    for(i=0;i&lt;100;i++)    &#123;        printf(&quot;[%d] %s\\n&quot;,i,strerror(i));    &#125;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œ100ä¸ªé”™è¯¯ç è¢«æ‰“å°äº†å‡ºæ¥\n\nè¿›ä¸€æ­¥åŠ å¤§å¾ªç¯çš„æ¬¡æ•°ï¼Œèƒ½çœ‹åˆ°Cè¯­è¨€ä¸­å®šä¹‰çš„é”™è¯¯ç ä¸€å…±æ˜¯134ä¸ªã€‚åç»­å…¨éƒ¨æ‰“å°unknown error\n\næˆ‘ä»¬è®¾è®¡ç¨‹åºçš„é€€å‡ºç çš„æ—¶å€™ï¼Œå¯ä»¥å‚ç…§Cè¯­è¨€åº“å‡½æ•°çš„é”™è¯¯ç æ¥è¿›è¡Œè®¾ç½®ï¼Œè¿™æ ·èƒ½æ›´å¥½åœ°å’Œåº“å†…éƒ¨è¿›è¡Œå¯¹æ¥ï¼Œæˆ–ç”¨strerrorå‡½æ•°æ¥è·å–åˆ°é”™è¯¯ä¿¡æ¯\n\nè¿™å°±æ˜¯ç”¨é”™è¯¯ç æ¥å®ç°çš„å¼‚å¸¸ç®¡ç†\n\n2.2 ç¨‹åºé€€å‡ºçš„å‡ ç§çŠ¶æ€ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç¨‹åºæœ‰ä¸‹é¢çš„å‡ ç§é€€å‡ºçŠ¶æ€ï¼š\n\nä»£ç è·‘å®Œï¼Œç»“æœä¸é¢„æœŸç›¸ç¬¦\nä»£ç è·‘å®Œï¼Œç»“æœæœ‰é—®é¢˜\nä»£ç æ²¡æœ‰è·‘å®Œï¼Œæå‰å‡ºç°å¼‚å¸¸ç»ˆæ­¢ï¼Œæˆ–è€…è¢«å¤–éƒ¨å…³é—­\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šå»åœ¨ä¹ä¸€ä¸ªè¿›ç¨‹ä¸ºä½•ä¼šæˆåŠŸï¼›è€Œæ›´åœ¨ä¹ä¸€ä¸ªé”™è¯¯çš„è¿›ç¨‹åˆ°åº•å“ªå„¿æœ‰bugã€‚æ‰€ä»¥å°±éœ€è¦æƒ³åŠæ³•è·å–åˆ°è¿™ä¸ªè¿›ç¨‹çš„é”™è¯¯ç \né”™è¯¯ç è¡¨å¾äº†ç¨‹åºé€€å‡ºçš„ä¿¡æ¯ï¼Œäº¤ç”±çˆ¶è¿›ç¨‹è¿›è¡Œè¯»å–\nä¸Šé¢æˆ‘ä»¬åœ¨bashä¸­èƒ½é€šè¿‡echoè¯»å–ä¸Šä¸€ä¸ªè¿›ç¨‹çš„é€€å‡ºç ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è‡ªå·±è¿è¡Œçš„å¯æ‰§è¡Œç¨‹åºï¼Œå…¶çˆ¶è¿›ç¨‹å°±ä¸ºå½“å‰çš„bashã€‚bashæ¥å—äº†æˆ‘ä»¬è¿›ç¨‹çš„é€€å‡ºç ï¼Œæ”¾å…¥åˆ°äº†ç¯å¢ƒå˜é‡ä¸­\n\n2.3 ç»ˆæ­¢çš„å¸¸è§åšæ³•ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨mainå‡½æ•°ä¸­returnï¼Œæˆ–è€…åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨exit()æ¥ç»ˆæ­¢ç¨‹åº\nè¿™é‡Œè¿˜éœ€è¦æåŠå¦å¤–ä¸€ä¸ªç‰ˆæœ¬çš„exit()ï¼Œå³_exit\n\næœ€å¯è§çš„åŒºåˆ«ä¾¿æ˜¯ï¼Œexitä¼šåˆ·æ–°ç¼“å†²åŒºï¼Œè€Œ_exitä¸ä¼š\nvoid test2()&#123;    printf(&quot;i&#x27;m good, exit&quot;);    exit(0);&#125;void test3()&#123;    printf(&quot;i&#x27;m good, _exit&quot;);    _exit(0);&#125;\n\nè¿™é‡Œæˆ‘å…ˆè°ƒç”¨test2å‡½æ•°ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯è¿™æ ·çš„ğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ gcc test_strerror.c -o test &amp;&amp; ./testi&#x27;m good, exit[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ \n\nå¦‚æœè°ƒç”¨çš„æ˜¯test3ï¼Œåˆ™ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µ\n[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ gcc test_strerror.c -o test &amp;&amp; ./test[muxue@bt-7274:~/git/linux/code/22-10-08_è¿›ç¨‹æ§åˆ¶]$ \n\nç¨‹åºä»€ä¹ˆéƒ½æ²¡æœ‰æ‰“å°ï¼\nç¼“å†²åŒºè¿™éƒ¨åˆ†æ˜¯åŸºç¡€IOçš„çŸ¥è¯†\nlinuxä¸‹æœ‰ä¸€ä¸ªè¾“å…¥è¾“å‡ºçš„ç¼“å†²åŒºï¼Œå½“æˆ‘ä»¬è°ƒç”¨printfçš„æ—¶å€™ï¼Œç³»ç»Ÿä¸ä¼šç«‹é©¬æ‰“å°ï¼Œè€Œæ˜¯ä¼šå°†å¾…æ‰“å°çš„å†…å®¹å…ˆå†™å…¥ç¼“å†²åŒºï¼Œç›´åˆ°æˆ‘ä»¬è¾“å‡º\\næˆ–è€…è°ƒç”¨fflushå‡½æ•°æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒºã€‚\nfflush(stdout);//æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒº\n\nexitå’Œ_exitåœ¨_exitçš„manæ‰‹å†Œä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³å¹²æ‰è¿™ä¸ªè¿›ç¨‹ï¼›è€Œexitè¿˜ä¼šåšä¸€äº›å…¶ä»–çš„æ“ä½œ\n\n2.4 ç»ˆæ­¢çš„æ—¶å€™ï¼Œå†…æ ¸åšäº†ä»€ä¹ˆï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼Œè¿›ç¨‹&#x3D;å†…æ ¸ç»“æ„task/mm_structç­‰+è¿›ç¨‹ä»£ç ã€æ•°æ®\næ“ä½œç³»ç»Ÿå¯èƒ½å¹¶ä¸ä¼šé‡Šæ”¾è¯¥è¿›ç¨‹çš„task_struct/mm_structï¼Œè€Œæ˜¯ç•™ç»™ä¸‹ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼\nè¦çŸ¥é“ï¼Œå¦‚æœæƒ³ä½¿ç”¨ä¸€ä¸ªç»“æ„ä½“ï¼Œå°±éœ€è¦å¯¹å®ƒè¿›è¡Œå¼€ç©ºé—´å’Œåˆå§‹åŒ–æ“ä½œã€‚è€Œåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œåˆ›å»ºã€ç»ˆæ­¢è¿›ç¨‹æ˜¯ä¸€ä¸ªéå¸¸é«˜é¢‘çš„æ“ä½œã€‚å¦‚æœæ€»æ˜¯ä¸æ–­çš„åˆ›å»ºå†…æ ¸ç»“æ„å†é‡Šæ”¾ï¼Œå…¶å†…å­˜åˆ©ç”¨ç‡å°±å¾ˆä½ï¼Œè€Œä¸”æ‹–æ…¢ç³»ç»Ÿè¿è¡Œé€Ÿåº¦ã€‚\nè¿™æ—¶å€™ç³»ç»Ÿå°±ä¼šä½¿ç”¨å†…æ ¸çš„æ•°æ®ç»“æ„ç¼“å†²æ± ï¼Œåˆç§°slabåˆ†æ´¾å™¨ï¼Œæ¥ç®¡ç†è¿™äº›ä»å¾…ä½¿ç”¨çš„å†…æ ¸ç»“æ„ã€‚å½“æœ‰æ–°è¿›ç¨‹å‡ºç°çš„æ—¶å€™ï¼Œæ›´æ–°å†…æ ¸ç»“æ„çš„ä¿¡æ¯ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°è¿è¡Œé˜Ÿåˆ—ä¸­\n\n3.è¿›ç¨‹ç­‰å¾…ä¹‹å‰è®²è¿‡å­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹å¦‚æœä¸ç®¡ä¸é¡¾ï¼Œå°±ä¼šé€ æˆåƒµå°¸è¿›ç¨‹çš„é—®é¢˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ç­‰ä¸€ç³»åˆ—é—®é¢˜\n\nå¦å¤–ï¼Œåƒµå°¸è¿›ç¨‹ä¸€æ—¦å‡ºç°ï¼Œå³ä¾¿æ˜¯kill -9ä¹Ÿæ— æ³•æ€æ‰è¿™ä¸ªè¿›ç¨‹\n\næ‰€ä»¥çˆ¶è¿›ç¨‹éœ€è¦ç›‘çœ‹å­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„æ“ä½œ\nçˆ¶è¿›ç¨‹é€šè¿‡è¿›ç¨‹ç­‰å¾…çš„æ–¹å¼å›æ”¶å­è¿›ç¨‹èµ„æºï¼Œè·å–å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\n\n3.1 å¦‚ä½•ç­‰å¾…è¿›ç¨‹ç­‰å¾…è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°\npid_t wait(int*status);pid_t waitpid(pid_t pid, int *status, int options);\n\nå®ƒä»¬çš„å¤´æ–‡ä»¶æ˜¯\n#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;\n\n3.2 waitå…ˆæ¥åº·åº·ç¬¬ä¸€ä¸ªï¼Œå…¶ä½œç”¨æ˜¯ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œstatusæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œå­è¿›ç¨‹é€€å‡ºåï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸­è·å–åˆ°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\n\nstatusæ˜¯ä»å­è¿›ç¨‹çš„task_structä¸­æ‹¿å‡ºæ¥çš„ï¼Œå­è¿›ç¨‹ä¼šå°†è‡ªå·±çš„é€€å‡ºç å†™å…¥task_struct\nå¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒå­è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ï¼Œåˆ™å¯ä»¥ç»™statusä¼ ä¸€ä¸ªNULLç©ºæŒ‡é’ˆ\nè‹¥ç­‰å¾…å¤±è´¥ï¼Œåˆ™è¿”å›-1\n\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = wait(&amp;status);        printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,status);        sleep(5);    &#125;           return 0;&#125;\n\n\nå—¯ï¼Œçœ‹èµ·æ¥æ²¡å•¥é—®é¢˜ï¼Œæˆ‘ä»¬æˆåŠŸè·å–äº†å­è¿›ç¨‹çš„pidä»¥åŠé€€å‡ºç 0\né‚£å¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å­è¿›ç¨‹ä¸­exitçš„å€¼å‘¢ï¼Ÿ\nexit(11);\n\n\nå‘€ï¼Œå‡ºé—®é¢˜äº†ï¼Œä¸ºä½•çŠ¶æ€ç å˜æˆ2816äº†ï¼Ÿ\n3.2.1 å…³äºstatuså®é™…ä¸Šï¼Œè¾“å‡ºå‹å‚æ•°ä¸­statusçš„å€¼å¹¶éæ˜¯å®Œæ•´çš„é€€å‡ºçŠ¶æ€ä¿¡æ¯ï¼Œå…¶åˆ†ä¸ºä¸‹é¢ä¸¤ç§æƒ…å†µ\n\næ‰€ä»¥è¯´ï¼Œæ­£ç¡®è®¿é—®çŠ¶æ€ç çš„æ–¹å¼ï¼Œæ˜¯å…ˆå°†statuså³ç§»8ä½ï¼Œå†ç”¨æŒ‰ä½ä¸å–å‡ºçŠ¶æ€ç \n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(11);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = wait(&amp;status);        //printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,status);//ç›´æ¥æ‰“å°statusæ˜¯é”™è¯¯çš„ï¼        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF);//0xffæ˜¯8ä¸ª1        sleep(5);    &#125;           return 0;&#125;\n\n\nå†æ¥ä¿®æ”¹ä¸€ä¸‹exitçš„å€¼ä¸º200ï¼Œä¾æ—§æ­£ç¡®ï¼\nå­è¿›ç¨‹é€€å‡ºç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:770, çŠ¶æ€ä¿¡æ¯ï¼š200\n\n\n3.3 waitpidè¯¥å‡½æ•°çš„åŸå‹å¦‚ä¸‹\npid_t waitpid(pid_t pid, int *status, int options);\n\n\npidï¼š&gt;0æŒ‡å®šç­‰å¾…å­è¿›ç¨‹pidï¼›-1ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹\nstatusï¼šåŒwaitï¼Œä¸ºè¾“å‡ºå‹å‚æ•°\noptionsï¼šè‹¥è®¾ç½®ä¸º0ï¼Œåˆ™è¿›è¡Œé˜»å¡ç­‰å¾…ï¼›å…¶ä½™é€‰é¡¹è§ä¸‹å›¾\n\n\nè¿”å›å€¼ï¼š\n\næ­£å¸¸ç­‰å¾…ï¼Œè¿”å›å­è¿›ç¨‹çš„pid\nå¦‚æœè®¾ç½®äº†optionsï¼Œè€Œwaitpidå‘ç°æ²¡æœ‰å·²é€€å‡ºçš„å­è¿›ç¨‹å¯æ”¶é›†ï¼Œè¿”å›0\nè°ƒç”¨ä¸­å‡ºé”™ï¼Œè¿”å›-1ã€‚æ­¤æ—¶errnoä¼šè¢«è®¾ç½®æˆç›¸å¯¹åº”çš„å€¼æ¥æ˜¾ç¤ºé”™è¯¯\n\nwait(): on success, returns the process ID of the terminated child; on error, -1 is returned.waitpid(): on success, returns the process ID of the child whose state has changed; if WNOHANG  was  specified  and  one  or  more child(ren) specified by pid exist, but have not yet changed state, then 0 is returned.  On error, -1 is returned.\n\nä»£ç ç¤ºä¾‹\nint main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 4;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(5);        int status = 0;        pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ä¿¡æ¯ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF);//0xffæ˜¯8ä¸ª1        sleep(5);    &#125;          return 0;&#125;\n\n\n3.4 ä¿¡å·ç»ˆæ­¢ç›®å‰linuxæ”¯æŒçš„ä¿¡å·å¦‚ä¸‹ï¼Œåœ¨åç»­ä¿¡å·çš„ç« èŠ‚ä¼šå•ç‹¬è®²è§£ï¼\n\n\nå‰é¢æåˆ°äº†ï¼Œé™¤äº†æ­£å¸¸çš„ç»ˆæ­¢ï¼Œstatusä¸­è¿˜å¯ä»¥ä¿å­˜ä¿¡å·ç»ˆæ­¢çš„ä¿¡æ¯\n\nè¿™é‡Œçš„core dumpæ ‡å¿—æ˜¯ç”¨æ¥å¹²å˜›çš„æˆ‘ä»¬æš‚ä¸”ä¸æï¼ˆåç»­ä¿¡å·éƒ¨åˆ†ä¼šæœ‰è®²è§£ï¼‰å…ˆæ¥è¯•è¯•ç”¨killæ¥å¹²æ‰å­è¿›ç¨‹ï¼\nè¿™é‡Œæˆ‘ä»¬è¦å–å‡ºçš„æ˜¯statusä¸­æœ€ä½7ä½çš„æ•°æ®ï¼Œå°±éœ€è¦æŒ‰ä½ä¸ä¸€ä¸ªäºŒè¿›åˆ¶æœ«å°¾æ˜¯7ä¸ª1çš„æ•°å­—\næ³¨æ„ï¼šå¦‚æœå­è¿›ç¨‹æ˜¯å› ä¸ºä¿¡å·é€€å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸éœ€è¦å…³æ³¨é€€å‡ºç ï¼Œå…¶æ²¡æœ‰æ„ä¹‰ï¼\nint main()&#123;    int test = 10;    pid_t ret = fork();    if(ret == 0)    &#123;        int i = 20;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n&quot;,getpid(),getppid(),ret,&amp;ret);            //i++;            sleep(1);        &#125;        printf(&quot;å­è¿›ç¨‹é€€å‡º\\n&quot;);        exit(0);    &#125;    else    &#123;            printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹%-5d, ppid:%-5d, ret:%-5d, &amp;ret:%p\\n\\n&quot;,getpid(),getppid(),ret,&amp;ret);        sleep(30);        int status = 0;        pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹        //statusçš„ä½16ä½æ‰æœ‰æ•ˆï¼Œå…¶ä¸­è¿™16ä½çš„é«˜8ä½æ˜¯çŠ¶æ€ç         printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,(status&gt;&gt;8)&amp;0xFF,status&amp;0x7F);//0xffæ˜¯8ä¸ª1        sleep(10);    &#125;          return 0;&#125;\n\n ç¨‹åºæœ€å¼€å§‹çš„æ—¶å€™ï¼Œå­è¿›ç¨‹æ­£å¸¸åˆ›å»ºï¼Œçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ\n\nè¿™é‡Œä½¿ç”¨killç»™å­è¿›ç¨‹å‘ä¿¡å·ï¼Œå¹²æ‰äº†å­è¿›ç¨‹\n[muxue@bt-7274:~/git/c_code]$ kill -9 5952[muxue@bt-7274:~/git/c_code]$ \n\nçˆ¶è¿›ç¨‹sleepç»“æŸåæ‰§è¡Œwaitpidè·å–åˆ°äº†å­è¿›ç¨‹çš„ç»“æŸä¿¡æ¯ä»¥åŠä¿¡å·9\n\nåŒæ—¶é€šè¿‡ä¹‹å‰å†™çš„æ£€æµ‹è„šæœ¬\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nèƒ½çœ‹åˆ°å­è¿›ç¨‹è¿›å…¥zåƒµå°¸çŠ¶æ€\n\nçˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹çš„è¿‡ç¨‹\n\næ¢ä¸€ä¸ªkillçš„ä¿¡å·ï¼Œçˆ¶è¿›ç¨‹ä¹Ÿèƒ½æ­£ç¡®è·å¾—å…¶ç»“æœ\n[muxue@bt-7274:~/git/c_code]$ kill -30 7607[muxue@bt-7274:~/git/c_code]$ \n\næˆ‘æ˜¯å­è¿›ç¨‹7607 , ppid:7606 , ret:0    , &amp;ret:0x7ffccf2aeb20æˆ‘æ˜¯å­è¿›ç¨‹7607 , ppid:7606 , ret:0    , &amp;ret:0x7ffccf2aeb20ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:7607, çŠ¶æ€ï¼š0ï¼Œä¿¡å·ï¼š30\n\né™¤äº†æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä½¿ç”¨kill ç»™è¿›ç¨‹å‘ä¿¡å·ï¼Œä¸€äº›é”™è¯¯ä¹Ÿä¼šè®©è¿›ç¨‹è‡ªå·±é€€å‡ºã€‚æ¯”å¦‚ä¿¡å·8å°±æ˜¯æµ®ç‚¹æ•°é”™è¯¯ï¼Œå¯ä»¥ç”¨é™¤0æ¥å¤ç°è¿™ä¸ªé”™è¯¯\næ“ä½œç³»ç»Ÿæ˜¯æ€ä¹ˆçŸ¥é“æˆ‘ä»¬é™¤0äº†ï¼Ÿ\n\nåœ¨CPUå†…æœ‰ä¸€ä¸ªçŠ¶æ€å¯„å­˜å™¨ï¼Œå½“cpuè¿›è¡Œè¿ç®—çš„æ—¶å€™å‡ºé”™äº†ï¼Œä¼šæ›´æ–°çŠ¶æ€å¯„å­˜å™¨ã€‚æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°CPUç”¨çŠ¶æ€å¯„å­˜å™¨ç»™ä»–æŠ¥äº†ä¸ªé”™ï¼Œå°±ä¼šè¯†åˆ«é”™è¯¯ç±»å‹ï¼Œå¹¶é€šè¿‡ä¿¡å·å¹²æ‰å½“å‰è¿è¡Œçš„è¿›ç¨‹\næˆ‘ä»¬è¿è¡Œçš„è¿›ç¨‹ä¸­çš„è½¯ä»¶é”™è¯¯ï¼Œéƒ¨åˆ†æ˜¯ä¼šåœ¨ç¡¬ä»¶å±‚é¢ä¸Šä½“ç°çš„\n\n3.5 åº“é‡Œé¢æä¾›çš„å®è‡ªå·±å†™æŒ‰ä½ä¸å¤šéº»çƒ¦å‘€ï¼Œåº“é‡Œé¢æä¾›äº†å‡ ä¸ªå®ä¾›æˆ‘ä»¬ä½¿ç”¨\n\nWIFEXITED(status)  æŸ¥çœ‹å­è¿›ç¨‹æ˜¯å¦æ˜¯æ­£å¸¸é€€å‡ºçš„ï¼Œæ­£å¸¸é€€å‡ºä¸ºçœŸ\nWIFSIGNALED(status)æŸ¥çœ‹å­è¿›ç¨‹æ˜¯å¦ä¸ºä¿¡å·ç»ˆæ­¢ï¼Œä¿¡å·ç»ˆæ­¢è¿”å›çœŸ\nWEXITSTATUS(status) æå–å­è¿›ç¨‹é€€å‡ºç \nWTERMSIG(status) æå–å­è¿›ç¨‹é€€å‡ºä¿¡å·\n\n//å…¶ä½™éƒ¨åˆ†ä»£ç å’Œä¸Šé¢ç›¸åŒï¼Œå­è¿›ç¨‹exit(11)int status = 0;pid_t st = waitpid(ret,&amp;status,0);//æŒ‡å®šç­‰å¾…ä¸Šé¢åˆ›å»ºçš„å­è¿›ç¨‹if(WIFEXITED(status))//å­è¿›ç¨‹æ­£å¸¸é€€å‡ºè¿”å›çœŸ&#123;       printf(&quot;ç­‰å¾…æˆåŠŸ,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,WEXITSTATUS(status),WTERMSIG(status));&#125;else&#123;    printf(&quot;éæ­£å¸¸é€€å‡º,å­è¿›ç¨‹pid:%d, çŠ¶æ€ï¼š%dï¼Œä¿¡å·ï¼š%d\\n&quot;,st,WEXITSTATUS(status),WTERMSIG(status));&#125;\n\nä¸‹å›¾ä¸ºå­è¿›ç¨‹æ­£å¸¸exit\n\nä¸‹å›¾ä¸ºå­è¿›ç¨‹è¢«kill -9å¹²æ‰\n\n3.6 é˜»å¡ç­‰å¾…å’Œéé˜»å¡ç­‰å¾…å‰é¢çš„waitpidå‡½æ•°ä¸­çš„optionå‚æ•°å°±å’Œé˜»å¡&#x2F;éé˜»å¡ç­‰å¾…æœ‰å…³\n0       é˜»å¡WNOHANG éé˜»å¡\n\n3.6.1 é˜»å¡ç­‰å¾…å½“æˆ‘ä»¬è°ƒç”¨æŸäº›å‡½æ•°çš„æ—¶å€™ï¼Œå› ä¸ºæ¡ä»¶ä¸å°±ç»ªï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œé˜»å¡ç­‰å¾…\n\næœ¬è´¨ï¼šå½“å‰ç¨‹åºè‡ªå·±å˜æˆé˜»å¡çŠ¶æ€ï¼Œå½“ä¸€åˆ‡å°±ç»ªçš„æ—¶å€™å†è¢«å”¤é†’ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬ç­‰å¾…çš„ä¸æ˜¯ç¡¬ä»¶èµ„æºï¼Œè€Œæ˜¯ç­‰å¾…å­è¿›ç¨‹è¿è¡Œç»“æŸï¼ˆè½¯ä»¶èµ„æºï¼‰\n\né˜»å¡ç­‰å¾…æ—¶ï¼Œå°†çˆ¶è¿›ç¨‹æ”¾å…¥å­è¿›ç¨‹task_structä¸­çš„ç­‰å¾…é˜Ÿåˆ—ã€‚å½“æ“ä½œç³»ç»Ÿæ£€æµ‹å‡ºå­è¿›ç¨‹é€€å‡ºï¼Œå°±ä»ç­‰å¾…é˜Ÿåˆ—ä¸­å”¤é†’çˆ¶è¿›ç¨‹ï¼Œé˜»å¡ç­‰å¾…æˆåŠŸï¼\n\nç»™waitpidçš„optionä¼ å…¥0ï¼Œå³ä¸ºé˜»å¡ç­‰å¾…\npid_t st = waitpid(-1,&amp;status,0);//é˜»å¡ç­‰å¾…\n\nåœ¨å­è¿›ç¨‹è¢«ä¿¡å·å¹²æ‰æˆ–è€…æ‰§è¡Œå®Œæ¯•é€€å‡ºä¹‹å‰ï¼Œçˆ¶è¿›ç¨‹ä¸ä¼šå‘åæ‰§è¡Œä»£ç ã€‚åœ¨ç”¨æˆ·å±‚é¢çœ‹æ¥ï¼Œå°±æ˜¯ä¸€ä¸ªç¨‹åºå¡ä½äº†\n3.6.2 éé˜»å¡ç­‰å¾…ç»™waitpidçš„optionä¼ å…¥WNOHANGï¼Œå³ä¸ºéé˜»å¡ç­‰å¾…\nç­‰å¾…æœŸé—´ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥å¹²å…¶ä»–çš„äº‹æƒ…\n#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;int add(int a,int b)&#123;    return a+b;&#125;int pls(int a,int b)&#123;    return a*b;&#125;int main()&#123;    pid_t id = fork();    if(id == 0)    &#123;        // å­è¿›ç¨‹        int i =5;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());            sleep(2);        &#125;        exit(0);    &#125;    else if(id &gt;0)    &#123;        // çˆ¶è¿›ç¨‹        // åŸºäºéé˜»å¡çš„è½®è¯¢ç­‰å¾…æ–¹æ¡ˆ        int status = 0;        int i = 1, j=2;        while(1)        &#123;            pid_t ret = waitpid(-1, &amp;status, WNOHANG);            if(ret &gt; 0)            &#123;                printf(&quot;ç­‰å¾…æˆåŠŸ, %d, exit code: %d, exit sig: %d\\n&quot;, ret, WIFEXITED(status), WTERMSIG(status));                break;            &#125;            else if(ret == 0)            &#123;                //ç­‰å¾…æˆåŠŸäº†ï¼Œä½†å­è¿›ç¨‹æ²¡æœ‰é€€å‡º                printf(&quot;å­è¿›ç¨‹å¥½äº†æ²¡ï¼Ÿæ²¡æœ‰ï¼Œçˆ¶è¿›ç¨‹åšå…¶ä»–äº‹æƒ…\\n&quot;);                printf(&quot;add %d  &quot;,add(i++,j++));                printf(&quot;pls %d\\n&quot;,pls(i++,j++));                sleep(1);            &#125;            else&#123;                //err                printf(&quot;çˆ¶è¿›ç¨‹ç­‰å¾…å‡ºé”™ï¼\\n&quot;);                break;            &#125;        &#125;    &#125;    return 0;&#125;\n\nè¿™é‡Œæˆ‘ä»¬ç»™çˆ¶è¿›ç¨‹å†™äº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸€ç›´ç­‰å¾…å­è¿›ç¨‹é€€å‡ºã€‚æ¯ä¸€æ¬¡å¾ªç¯éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡waitpidçš„æ¥å£ï¼Œç›´åˆ°æˆåŠŸè·å–äº†å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯\nè¿™ç§å¤šæ¬¡è°ƒç”¨waitpidæ¥å£çš„æ–¹å¼åˆè¢«ç§°ä¸ºè½®è¯¢æ£€æµ‹\n\nä¸¾ä¸ªå…·ä½“ä¾‹å­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªèŠå¤©è½¯ä»¶éœ€è¦åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹ï¼ˆèŠå¤©æ¡†ï¼‰å¯ä»¥å…ˆæ˜¾ç¤ºä¸€ä¸ªå›¾ç‰‡çš„åŠ è½½å›¾ï¼Œå‘Šè¯‰ä½ å›¾ç‰‡æ­£åœ¨åŠ è½½ï¼ˆå­è¿›ç¨‹ï¼‰ã€‚è€Œä½ è¿˜æ˜¯å¯ä»¥æ­£å¸¸æµè§ˆå…¶ä»–äººçš„å‘è¨€ã€‚ç­‰å›¾ç‰‡åŠ è½½å®Œæ¯•ï¼ˆå­è¿›ç¨‹é€€å‡ºï¼‰ä¹‹åï¼Œçˆ¶è¿›ç¨‹å°±å¯ä»¥æŠŠé‚£ä¸ªä¸´æ—¶çš„åŠ è½½å›¾æ›¿æ¢æˆè·å–åˆ°çš„å›¾ç‰‡æœ¬èº«ï¼Œè¿™å°±æ˜¯ä¸€æ¬¡æˆåŠŸçš„éé˜»å¡ç­‰å¾…\n\n4.è¿›ç¨‹æ›¿æ¢åœ¨ä¹‹å‰çš„forkä¸­ï¼Œæˆ‘ä»¬çš„å­è¿›ç¨‹éƒ½æ˜¯è¿è¡Œçš„å·²ç»é¢„å…ˆå†™å¥½çš„ä»£ç ï¼Œæˆ–è€…è¯´æ˜¯ç»§æ‰¿äº†çˆ¶è¿›ç¨‹çš„ä»£ç ç»§ç»­å‘åæ‰§è¡Œã€‚\nè¿›ç¨‹æ›¿æ¢å°±æ˜¯è®©å­è¿›ç¨‹å¯ä»¥æ‰§è¡Œç£ç›˜é‡Œé¢å…¶ä»–çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿçš„å‘½ä»¤ã€å…¶ä»–è¯­è¨€å†™çš„ä»£ç py c++ phpç­‰ç­‰â€¦â€¦\n4.1 åŸç†å…¶å®å°±æ˜¯è®©å­è¿›ç¨‹é€šè¿‡è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æ¥å£ï¼Œæ¥æ‰§è¡Œä¸€ä¸ªå·²æœ‰çš„å¯æ‰§è¡Œç¨‹åº\n\nè¿™ä¸ªè¿‡ç¨‹ä¸­å¹¶æ²¡æœ‰åˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯å½“å‰å­è¿›ç¨‹\n\nç¨‹åºæ›¿æ¢çš„è¿‡ç¨‹\n\nå°†ç£ç›˜ä¸­çš„ç¨‹åºåŠ è½½è¿›å…¥å†…æ ¸ç»“æ„\né‡æ–°å»ºç«‹é¡µè¡¨æ˜ å°„ï¼Œå› ä¸ºæ˜¯å­è¿›ç¨‹è°ƒç”¨çš„ç¨‹åºæ›¿æ¢ï¼Œé‚£ä¹ˆå°±ä¼šä¿®æ”¹å­è¿›ç¨‹çš„é¡µè¡¨æ˜ å°„\næ•ˆæœï¼šå­è¿›ç¨‹ä»£ç å’Œçˆ¶è¿›ç¨‹å½»åº•åˆ†ç¦»ï¼Œå­è¿›ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªå…¨æ–°çš„ç¨‹åº\n\n\n4.2 å¦‚ä½•æ›¿æ¢ç³»ç»Ÿæä¾›äº†éå¸¸å¤šçš„å‡½æ•°æ¥å£ï¼Œä¾›æˆ‘ä»¬åœ¨ä¸€ä¸ªç¨‹åºä¸­è°ƒç”¨ç³»ç»Ÿä¸­å…¶ä»–çš„å¯æ‰§è¡Œç¨‹åº\n\n\nè¦æƒ³è°ƒç”¨ï¼Œé¦–å…ˆè¦æ‰¾åˆ°è¿™ä¸ªç¨‹åºåœ¨é‚£å„¿ï¼Œä»¥åŠè¦ç”¨ä»€ä¹ˆåŠæ³•æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰ä¸‹é¢ä»¥å…·ä½“çš„ä¾‹å­æ¥äº†è§£ä¸€ä¸‹å§\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šæˆ‘ä»¬éœ€è¦å…ˆç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå†è°ƒç”¨ä¸Šé¢è¿™äº›å‡½æ•°æ¥å£æ¥ä½¿ç”¨å…¶ä»–å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™äº›å‡½æ•°æ¥å£æœ¬èº«å¹¶ä¸ä¼šåˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼\n\n4.3 execlint execl(const char *path, const char *arg, ...);\n\n\npathæ˜¯éœ€è¦è¿è¡Œç¨‹åºçš„è·¯å¾„\nargä»£è¡¨éœ€è¦æ‰§è¡Œçš„ç¨‹åº\n...æ˜¯å¯å˜å‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸å®šé‡çš„å‚æ•°ã€‚è¿™é‡Œæˆ‘ä»¬å¡«å…¥çš„æ˜¯å‘½ä»¤è¡Œçš„å‚æ•°\n\nè¯´èµ·æ¥å­¦åˆ°äº†è¿™é‡Œæˆ‘æ‰çŸ¥é“åŸæ¥Cè¯­è¨€æ”¯æŒå¯å˜å‚æ•°â€¦â€¦\n#include&lt;stdlib.h&gt;#include&lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;int main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/bin/ls&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ %d\\n&quot;,ret);    return 0;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å¡«å…¥å‘½ä»¤è¡Œå‚æ•°çš„æ—¶å€™ï¼Œå¿…é¡»è¦ä»¥NULLä½œä¸ºå‚æ•°çš„ç»“å°¾\n\næˆ‘ä»¬ä¼šå‘ç°ï¼Œè°ƒç”¨äº†å…¶ä»–å¯æ‰§è¡Œç¨‹åºä¹‹åï¼Œåœ¨åé¢çš„printfå‡½æ•°å¹¶æ²¡æœ‰è¢«æ‰§è¡Œï¼\nè¿™æ˜¯å› ä¸ºï¼Œå½“æˆ‘ä»¬ç”¨è¿™ä¸ªå‡½æ•°æ¥è°ƒç”¨å…¶ä»–å¯æ‰§è¡Œç¨‹åºï¼Œæœ¬è´¨ä¸Šå·²ç»æŠŠå½“å‰çš„ä»£ç å’Œæ•°æ®æ›¿æ¢æ‰äº†ï¼æ—¢ç„¶æ˜¯æ›¿æ¢ï¼Œé‚£ä¹ˆåŸæœ¬çš„printf(&quot;æ‰§è¡Œç»“æŸ %d\\n&quot;,ret);è‚¯å®šä¹Ÿä¸ä¼šæ‰§è¡Œ\nè¿”å›å€¼é—®é¢˜é‚£execlä¸æ˜¯æœ‰ä¸€ä¸ªintç±»å‹çš„è¿”å›å€¼å—ï¼Ÿå¦‚æœç¨‹åºæ›¿æ¢äº†ä¹‹åä¸ä¼šæ‰§è¡Œåé¢çš„ä»£ç ï¼Œé‚£è¿™ä¸ªè¿”å›å€¼è¿˜æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\n\næŸ¥æ‰‹å†Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¿”å›å€¼åªæœ‰å‡ºé”™çš„æ—¶å€™æ‰ä¼šè¿”å›-1ï¼ŒåŒæ—¶ä¼šæ›´æ–°ERRNO\nint main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/bin/&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return 0;&#125;\n\nç°åœ¨æˆ‘ä»¬æŠŠæ‰§è¡Œæ–‡ä»¶æ”¹æˆusr/bin/è¿™ä¸ªé”™è¯¯æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨å¤±è´¥ï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°è°ƒç”¨å¤±è´¥çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰æƒé™å»æ‰§è¡Œ/usr/bin\n\nint ret = execl(&quot;/usr/erqer/&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);\n\nå¦‚æœæ”¹æˆä¸€ä¸ªä¹±ä¸ƒå…«ç³Ÿçš„è·¯å¾„ï¼Œä¹Ÿä¼šæ‰“å°å‡ºé”™è¯¯ç»“æœä¸ºâ€œæ–‡ä»¶æˆ–è·¯å¾„ä¸å­˜åœ¨â€\n\næ ¹æ®è¿™ä¸ªç‰¹æ•ˆï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œexecè¿™äº›æ›¿æ¢å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®æ²¡æœ‰å¿…è¦å»åˆ¤æ–­è¿”å›å€¼ã€‚å› ä¸ºè¿™äº›å‡½æ•°åªæœ‰å‡ºé”™çš„æ—¶å€™ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„ä»£ç ï¼\n\næ— éœ€åˆ¤æ–­è¿”å›å€¼ï¼Œç›´æ¥æ‰“å°errnoæ‰¾å‡ºé”™è¯¯åŸå› å³å¯\n\næ›¿æ¢åˆ«çš„ä»£ç ä¹‹å‰è¯´è¿‡ï¼Œæ›¿æ¢ä¸ä»…å¯ä»¥æ›¿æ¢ç³»ç»Ÿçš„å‘½ä»¤ï¼Œè¿˜å¯ä»¥æ›¿æ¢æˆå…¶ä»–è¯­è¨€çš„ä»£ç \næ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„pyä»£ç \nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)#pythonä¸­printä¼šé»˜è®¤æ¢ä¸€è¡Œ\n\næˆ‘ä»¬åœ¨Cä¸­åˆ©ç”¨execlæ¥è°ƒç”¨è¿™ä¸ªè‡ªå·±å†™çš„pythonç¨‹åºã€‚å¦‚æœä½ ä¸çŸ¥é“ä½ ç³»ç»Ÿä¸­æœ‰æ²¡æœ‰pythonï¼Œæˆ–è€…ä¸çŸ¥é“å®ƒçš„è·¯å¾„ï¼Œå¯ä»¥ç”¨whichæ¥æŸ¥çœ‹ä½ç½®\n\nint main()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execl(&quot;/usr/local/bin/python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);    //int ret = execl(&quot;/usr/bin/ls&quot;,&quot;ls&quot;,&quot;-l&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œpythonç¨‹åºè¢«æˆåŠŸæ‰§è¡Œï¼\n\nå­è¿›ç¨‹æ›¿æ¢äº†è§£äº†æ›¿æ¢ç¨‹åºçš„åŸºæœ¬æ–¹æ³•äº†ä¹‹åï¼Œå¯ä»¥å…ˆæ¥è¯•è¯•å†™ä¸€ä¸ªçˆ¶å­è¿›ç¨‹\nè¿™é‡Œè®©çˆ¶è¿›ç¨‹è¿›è¡Œ3.6.2é‡Œé¢çš„è½®è¯¢æ£€æµ‹\nint add(int a,int b)&#123;    return a+b;&#125;int pls(int a,int b)&#123;    return a*b;&#125;int main()&#123;    pid_t id = fork();    if(id == 0)    &#123;        // å­è¿›ç¨‹        int i = 3;        while(i--)        &#123;            printf(&quot;æˆ‘æ˜¯å­è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());            sleep(2);//ä¾¿äºè§‚å¯Ÿ            int ret = execl(&quot;/usr/local/bin/python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);            printf(&quot;å­è¿›ç¨‹æ‰§è¡Œå‡ºé”™: %d\\n&quot;,ret);            printf(&quot;å­è¿›ç¨‹é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));            exit(-1);        &#125;    &#125;    else if(id &gt;0)    &#123;        // çˆ¶è¿›ç¨‹        // åŸºäºéé˜»å¡çš„è½®è¯¢ç­‰å¾…æ–¹æ¡ˆ        int status = 0;        int i = 1, j=2;        printf(&quot;æˆ‘æ˜¯çˆ¶è¿›ç¨‹, æˆ‘çš„PID: %d, æˆ‘çš„PPID:%d\\n&quot;, getpid(), getppid());        while(1)        &#123;            pid_t ret = waitpid(-1, &amp;status, WNOHANG);            if(ret &gt; 0)            &#123;                printf(&quot;ç­‰å¾…æˆåŠŸ, %d, exit code: %d, exit sig: %d\\n&quot;, ret, WIFEXITED(status), WTERMSIG(status));                break;            &#125;            else if(ret == 0)            &#123;                //ç­‰å¾…æˆåŠŸäº†ï¼Œä½†å­è¿›ç¨‹æ²¡æœ‰é€€å‡º                printf(&quot;å­è¿›ç¨‹å¥½äº†æ²¡ï¼Ÿæ²¡æœ‰ï¼Œçˆ¶è¿›ç¨‹åšå…¶ä»–äº‹æƒ…\\n&quot;);                printf(&quot;add %d  &quot;,add(i++,j++));                printf(&quot;pls %d\\n&quot;,pls(i++,j++));                sleep(1);            &#125;            else&#123;                //err                printf(&quot;çˆ¶è¿›ç¨‹ç­‰å¾…å‡ºé”™ï¼\\n&quot;);                break;            &#125;        &#125;    &#125;    return 0;&#125;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ›¿æ¢äº†pythonç¨‹åºæˆåŠŸäº†ä¹‹åï¼Œä¸ä¼šæ‰§è¡Œåé¢çš„printf\nè¿™é‡Œçš„exit codeä¹Ÿè¢«è®¾ç½®æˆäº†1\n\nè¿™é‡Œæˆ‘è‡ªå·±æƒ³å‡ºæ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œçš„exit codeå’Œæˆ‘ä»¬pythonç¨‹åºé‡Œé¢è®¾ç½®çš„æœ‰æ²¡æœ‰å…³ç³»å‘¢ï¼Ÿæ¥è¯•è¯•~\nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)exit(10)#execlçˆ¶è¿›ç¨‹æ¥æ”¶åˆ°çš„é€€å‡ºç å’Œè¿™é‡Œæ²¡æœ‰å…³ç³»\n\nemmç»“æœæ²¡å˜ï¼Œè¯´æ˜æ²¡æœ‰å…³ç³»\næˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼ç­‰å¾…æˆåŠŸ, 20333, exit code: 1, exit sig: 0\n\nå³ä¾¿æˆ‘ä»¬pythonç¨‹åºé‡Œé¢æœ‰bugï¼Œè¿™é‡Œä¹Ÿä¸ä¼šæœ‰å•¥å˜åŒ–\nprint(&quot;æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼&quot;)a =10/0\n\næˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼Traceback (most recent call last):  File &quot;/home/muxue/git/linux/code/22-10-13_exec/test.py&quot;, line 3, in &lt;module&gt;    a =10/0ZeroDivisionError: division by zeroç­‰å¾…æˆåŠŸ, 21179, exit code: 1, exit sig: 0\n\nåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ‰§è¡Œç¨‹åºæ›¿æ¢ï¼Œæ˜¯ä¸ä¼šå½±å“çˆ¶è¿›ç¨‹çš„ï¼ˆè¿›ç¨‹å…·æœ‰ç‹¬ç«‹æ€§ï¼‰\nè¿™æ˜¯å› ä¸ºæ•°æ®å‘ç”Ÿäº†å†™æ—¶æ‹·è´ï¼Œç¨‹åºæ›¿æ¢çš„æ—¶å€™å¯ä»¥ç†è§£ä¸ºä»£ç å’Œæ•°æ®éƒ½é€šè¿‡å†™æ—¶æ‹·è´è¿›è¡Œäº†çˆ¶å­çš„åˆ†ç¦»ï¼ˆæ³¨æ„åˆ†ç¦»çš„æ˜¯ä»£ç å’Œæ•°æ®ï¼Œå¹¶éçˆ¶å­å…³ç³»ï¼ï¼‰\n4.4 execvå­¦ä¼šäº†å‰é¢çš„execlï¼Œå†æ¥çœ‹çœ‹è¿™ä¸ª\nint execv(const char *path, char *const argv[]);\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°è«å¾—å¯å˜å‚æ•°ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ç”¨ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„æ¥ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼å…¶ä½™éƒ½æ˜¯ä¸€æ ·çš„ï¼\n\nå¤ä¹ ä¸€ä¸‹ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\n\nvoid testExecv()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;ls&quot;,        &quot;-l&quot;,        &quot;-a&quot;,        NULL    &#125;;    int ret = execv(&quot;/usr/bin/ls&quot;,arg);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nè°ƒç”¨æˆåŠŸï¼\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•total 36drwxrwxr-x  2 muxue muxue  4096 Oct 14 13:36 .drwxrwxr-x 12 muxue muxue  4096 Oct 13 15:19 ..-rw-rw-r--  1 muxue muxue    69 Oct 13 15:24 makefile-rwxrwxr-x  1 muxue muxue 13192 Oct 14 13:36 test-rw-rw-r--  1 muxue muxue  2402 Oct 14 13:37 test.c-rw-rw-r--  1 muxue muxue   111 Oct 14 13:23 test.py[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n\n4.5 execlpint execlp(const char *file, const char *arg, ...);\n\næ³¨æ„ï¼Œè¿™é‡Œå‚æ•°çš„è¯´æ˜ä»pathå˜æˆäº†file\nè¿™ä¸ªå‡½æ•°å’Œexeclçš„åŒºåˆ«åœ¨äºï¼Œå®ƒä¼šè‡ªå·±å»ç³»ç»Ÿç¯å¢ƒå˜é‡çš„PATHé‡Œé¢æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åº\n[muxue@bt-7274:~/git]$ echo $PATH/home/muxue/.vscode-server/bin/d045a5eda657f4d7b676dedbfa7aab8207f8a075/bin/remote-cli:/usr/local/bin:/usr/bin:/usr/local/python3/bin:/usr/local/python3/bin:/usr/local/sbin:/usr/sbin:/usr/local/python3/bin:/usr/local/python3/bin:/home/muxue/.local/bin:/home/muxue/bin:/usr/local/python3/bin:/usr/local/python3/bin[muxue@bt-7274:~/git]$ \n\nåªæœ‰æ‰¾ä¸åˆ°è¿™ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæ‰ä¼šæŠ¥é”™ï¼\nvoid testExeclp()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    int ret = execlp(&quot;python3&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nç»“æœå¦‚ä¸‹ï¼ŒæˆåŠŸè°ƒç”¨\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æˆ‘æ˜¯ä¸€ä¸ªpythonç¨‹åºï¼[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\néšæ„æŒ‡å®šä¸€ä¸ªç¨‹åºï¼Œå°±ä¼šæŠ¥é”™\nint ret = execlp(&quot;python3300&quot;,&quot;python3&quot;,&quot;test.py&quot;,NULL);\n\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æ‰§è¡Œç»“æŸ: -1é”™è¯¯åŸå› : No such file or directory[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n4.6 execvpint execvp(const char *file, char *const argv[]);\n\nçŸ¥é“äº†execv/excelä¹‹é—´çš„åŒºåˆ«ï¼Œé‚£ä¹ˆexecvp/execlpä¹‹é—´çš„åŒºåˆ«ä¹Ÿå°±å¾ˆæ˜æ˜¾è¾£ï¼\nåŒæ ·ä¹Ÿæ˜¯åªæœ‰ä¼ å‚çš„åŒºåˆ«ï¼Œå…¶ä»–çš„æ“ä½œå®Œå…¨ä¸€æ ·\nvoid testExecvp()&#123;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;ls&quot;,        &quot;-l&quot;,        &quot;-a&quot;,        NULL    &#125;;    int ret = execvp(&quot;ls&quot;,arg);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•total 36drwxrwxr-x  2 muxue muxue  4096 Oct 14 13:48 .drwxrwxr-x 12 muxue muxue  4096 Oct 13 15:19 ..-rw-rw-r--  1 muxue muxue    69 Oct 13 15:24 makefile-rwxrwxr-x  1 muxue muxue 13368 Oct 14 13:48 test-rw-rw-r--  1 muxue muxue  2994 Oct 14 13:48 test.c-rw-rw-r--  1 muxue muxue   112 Oct 14 13:45 test.py[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\n4.7 execle&#x2F;execvpe&#x2F;execveè¿™å‡ ä¸ªå‡½æ•°æ”¾åœ¨ä¸€èµ·äº†ï¼Œå› ä¸ºå®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•å¾ˆç›¸ä¼¼\nint execle(const char *path, const char *arg,                  ..., char * const envp[]);int execvpe(const char *file, char *const argv[],                   char *const envp[]);int execve(const char *filename, char *const argv[],           char *const envp[]);\n\né¦–å…ˆå®ƒä»¬çš„å‡½æ•°åä¸­éƒ½æœ‰ä¸ªeï¼Œè¿™ä¸ªeä»£è¡¨çš„æ˜¯ç¯å¢ƒå˜é‡ï¼Œä»£è¡¨æˆ‘ä»¬å¯ä»¥æŠŠç‰¹å®šçš„ç¯å¢ƒå˜é‡ä¼ å…¥å…¶ä¸­è¿›è¡Œå¤„ç†ã€‚å®ƒä»¬çš„ç¯å¢ƒå˜é‡éƒ½æ˜¯åœ¨æœ€æœ«å°¾ä¼ çš„\n\n\n\nå‡½æ•°\nå‚æ•°\nè¯´æ˜\n\n\n\nexecle\nå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨å¯å˜å‚æ•°ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°\n\n\nexecve\nå¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨æ•°ç»„ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°\n\n\nexecvpe\nå¯æ‰§è¡Œæ–‡ä»¶åå­—ï¼Œå‘½ä»¤è¡Œå‚æ•°ï¼Œç¯å¢ƒå˜é‡\nåˆ©ç”¨æ•°ç»„ä¼ å…¥å‘½ä»¤è¡Œå‚æ•°ï¼›åªéœ€è¦ä¼ å…¥å¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ï¼Œä¼šè‡ªåŠ¨åœ¨PATHé‡Œé¢æœç´¢\n\n\næµ‹è¯•è¿™é‡Œæˆ‘å…ˆç”¨C++å†™ä¸€ä¸ªæ‰“å°ç¨‹åºï¼Œæ¥æ‰“å°æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡\n#include &lt;iostream&gt;#include &lt;stdlib.h&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;hello c++&quot; &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;    cout &lt;&lt; &quot;PATH:&quot; &lt;&lt; getenv(&quot;PATH&quot;) &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;    cout &lt;&lt; &quot;MYPATH:&quot; &lt;&lt; getenv(&quot;MYPATH&quot;) &lt;&lt; endl;    cout &lt;&lt; &quot;-------------------------------------------\\n&quot;;        return 0;&#125;\n\nåˆ©ç”¨g++å°†å…¶ç¼–è¯‘ä¸ºå¯æ‰§è¡Œæ–‡ä»¶mytest\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ lsmakefile  mytest  test  test.c  test.cpp  test.py\n\nä¸‹é¢å¼€å§‹æµ‹è¯•\nvoid testExecve()&#123;    extern char ** environ;//å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;./mytest&quot;,        NULL    &#125;;    int ret = execve(&quot;/home/muxue/git/linux/code/22-10-13_exec/mytest&quot;,arg,environ);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\n\nä»cppæ–‡ä»¶çš„æ‰“å°ç»“æœå¯ä»¥åˆ°ï¼Œæˆ‘ä»¬ä¼ å…¥äº†å®Œæ•´çš„ç¯å¢ƒå˜é‡ï¼ŒPATHæˆåŠŸæ‰“å°ï¼Œä½†æ˜¯MYPATHæ²¡æœ‰æ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯å› ä¸ºç¯å¢ƒå˜é‡é‡Œé¢æ²¡æœ‰è¿™ä¸ª\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ echo $MYPATH[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\nåˆ©ç”¨exportå¯¼å…¥ç¯å¢ƒå˜é‡\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ export MYPATH=4321[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ echo $MYPATH4321[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ \n\nå†æ¬¡æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡éƒ½è¢«æ‰“å°å‡ºæ¥äº†\n\nè‡ªå·±ä¼ å…¥ç¯å¢ƒå˜é‡ä¸Šé¢æˆ‘ä»¬æ˜¯ç›´æ¥å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡\nextern char ** environ;//å¼•å…¥å¤–éƒ¨ç¯å¢ƒå˜é‡\n\næˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±æ•´ä¸€ä¸ªæ•°ç»„æ¥ä¼ å…¥ç¯å¢ƒå˜é‡\nvoid testExecve()&#123;    extern char ** environ;    printf(&quot;å¼€å§‹æµ‹è¯•\\n\\n&quot;);    char*const arg[]=&#123;        &quot;./mytest&quot;,        NULL    &#125;;    char*const env[]=&#123;        &quot;MYPATH=this is c test&quot;,        NULL    &#125;;    int ret = execve(&quot;/home/muxue/git/linux/code/22-10-13_exec/mytest&quot;,arg,env);    printf(&quot;æ‰§è¡Œç»“æŸ: %d\\n&quot;,ret);    printf(&quot;é”™è¯¯åŸå› : %s\\n&quot;,strerror(errno));    return ;&#125;\n\nè¯¶ï¼Œæ€ä¹ˆè¿PATHéƒ½æ‰“å°ä¸å‡ºæ¥äº†ï¼Ÿï¼Ÿè¿™ä¸æ˜¯ç³»ç»Ÿé‡Œé¢æœ‰çš„ç¯å¢ƒå˜é‡å—ï¼Ÿ\n\nchar*const env[]=&#123;    &quot;PATH=path test&quot;,    &quot;MYPATH=this is c test&quot;,    NULL&#125;;\n\né‡æ–°è®¾ç½®ä¼ å…¥çš„ç¯å¢ƒå˜é‡ï¼ŒPATHæ‰èƒ½æˆåŠŸæ‰“å°\n\nè¿™è¯´æ˜è¿™å‡ ä¸ªå‡½æ•°çš„ç¯å¢ƒå˜é‡å‚æ•°ï¼Œåœ¨ä¼ å…¥çš„æ—¶å€™ï¼Œæ˜¯ä¼šè¦†ç›–æ‰ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡çš„ï¼\nå…³äºç¯å¢ƒå˜é‡å‚æ•°çš„é—®é¢˜å®é™…ä¸Šï¼Œå…¶ä½™ä¸å¸¦eçš„å‡½æ•°ï¼Œä¹Ÿæ˜¯èƒ½è·å–åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡çš„ï¼ˆç›´æ¥ç»§æ‰¿çˆ¶è¿›ç¨‹BASHçš„ç¯å¢ƒå˜é‡ï¼‰\nè€Œå¸¦eçš„å‡½æ•°å…è®¸æˆ‘ä»¬å•ç‹¬æ§åˆ¶ç¯å¢ƒå˜é‡\n\nç›´æ¥ä¼ å…¥extern char ** environ;çš„ç³»ç»Ÿç¯å¢ƒå˜é‡\nå°†ç‰¹å®šçš„ç¯å¢ƒå˜é‡ä¼ å…¥\nä¸´æ—¶è‡ªå®šä¹‰ä¸€éƒ¨åˆ†ç¯å¢ƒå˜é‡\n\n\næ³¨æ„PATHå’Œè‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºè¿™é‡Œåªå¯¹execvpeè¯´æ˜ä¸€ä¸‹ï¼Œå¦‚æœæƒ³ç”¨å®ƒè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„mytestï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠmytestæ”¾å…¥ç³»ç»ŸPATHé‡Œé¢ï¼Œä¸ç„¶æ˜¯æ‰¾ä¸åˆ°çš„ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-13_exec]$ ./testå¼€å§‹æµ‹è¯•æ‰§è¡Œç»“æŸ: -1é”™è¯¯åŸå› : No such file or directory\n\næ‰€ä»¥è¿˜æ˜¯ç”¨å®ƒæ¥è°ƒç”¨ç³»ç»Ÿçš„å‘½ä»¤å§\nchar*const arg_[]=&#123;    &quot;ls&quot;,    &quot;-l&quot;,    &quot;-a&quot;,    NULL&#125;;int ret = execvpe(&quot;ls&quot;,arg_,env);\n\n4.8 execveæ˜¯ç³»ç»Ÿæ¥å£å¦‚æœä½ æœ‰æ³¨æ„çœ‹ï¼Œåº”è¯¥ä¼šå‘ç°execveçš„manæ‰‹å†Œæ˜¯å•ç‹¬æ‹å‡ºæ¥çš„ï¼Œå·¦ä¸Šè§’çš„ç¼–å·ä¹Ÿä¸ä¸€æ ·\n\nè¿™æ˜¯å› ä¸ºï¼Œå®é™…ä¸Šåªæœ‰execveæ˜¯Linuxç³»ç»Ÿæä¾›çš„æ¥å£\nè€Œå…¶ä»–å‡½æ•°éƒ½æ˜¯Cè¯­è¨€åº“ä¸­å¯¹execveçš„äºŒæ¬¡å°è£…ï¼Œæ¥é€‚åº”ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼\n4.9 å‡½æ•°å‘½åæ€»ç»“\nl(list)ï¼šä½¿ç”¨å¯å˜å‚æ•°åˆ—è¡¨\nv(vector)ï¼šç”¨æ•°ç»„ä¼ å‚\np(path)ï¼šè‡ªåŠ¨åœ¨ç¯å¢ƒå˜é‡PATHä¸­æœç´¢\ne(env)ï¼šè¡¨ç¤ºè‡ªå·±ç»´æŠ¤ç¯å¢ƒå˜é‡\n\n\nç»“è¯­è¿›ç¨‹æ§åˆ¶ç« èŠ‚çš„å†…å®¹åˆ°è¿™é‡Œå°±åŸºæœ¬ç»“æŸå•¦ï¼Œåç»­æœ‰è¡¥å……çš„å†…å®¹ä¼šåœ¨æœ¬åšå®¢é‡Œé¢æ–°å¢ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæœ‰å•¥é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘æ–‡ä»¶IO","url":"/posts/2864480005/","content":"è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹linuxä¸‹çš„æ–‡ä»¶æ¥å£å§ï¼\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šCentOS7.6\næœ¬æ–‡æ‰€æœ‰ä»£ç éƒ½å¯ä»¥åœ¨æˆ‘çš„giteeä»“åº“æŸ¥çœ‹ã€é“¾æ¥ã€‘\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿ\næ–‡ä»¶=æ–‡ä»¶å†…å®¹+æ–‡ä»¶å±æ€§ï¼Œæ–‡ä»¶å±æ€§ä¹Ÿæ˜¯æ•°æ®ï¼Œå³ä¾¿æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¼šå ç”¨ç£ç›˜ç©ºé—´çš„\næ–‡ä»¶æ“ä½œ=æ–‡ä»¶å†…å®¹çš„æ“ä½œ+æ–‡ä»¶å±æ€§çš„æ“ä½œï¼Œåœ¨ä¹‹å‰linuxæƒé™çš„åšå®¢é‡Œé¢å°±æåˆ°è¿‡ï¼Œæ–‡ä»¶æ“ä½œæœ‰å¯èƒ½å³æ”¹å˜å†…å®¹ï¼Œåˆæ”¹å˜å±æ€§\næ–‡ä»¶æ‰“å¼€æ“ä½œå…¶å®æ˜¯æŠŠæ–‡ä»¶çš„å±æ€§å’Œå†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ²¡æœ‰è¢«æ‰“å¼€çš„æ–‡ä»¶ä¾æ—§å¤„äºç£ç›˜å½“ä¸­\nå½“å‰è·¯å¾„ä¸ºå½“å‰è¿›ç¨‹æ‰€å¤„çš„å·¥ä½œè·¯å¾„\n\næˆ‘ä»¬çš„æ‰“å¼€æ–‡ä»¶æ“ä½œéœ€è¦å’Œç£ç›˜è¿™ä¸ªç¡¬ä»¶æ‰“äº¤é“ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿæ‰èƒ½ç›´æ¥æ“ä½œç¡¬ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ–‡ä»¶æ“ä½œå…¶å®éƒ½æ˜¯è°ƒç”¨çš„ç³»ç»Ÿæ¥å£ã€‚\nå®é™…ä¸Šï¼Œæ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½å¯¹æ“ä½œç³»ç»Ÿæ¥å£è¿›è¡Œäº†å°è£…ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ä»–ä»¬çš„è·¨å¹³å°æ€§ã€‚å› ä¸ºä¸åŒæ“ä½œç³»ç»Ÿçš„å„ç§æ¥å£å„ä¸ç›¸åŒï¼Œå¦‚æœä¸è¿›è¡Œå°è£…ï¼Œç›´æ¥è°ƒç”¨ç³»ç»Ÿæ¥å£ï¼Œåˆ™è¯¥ä»£ç åªèƒ½åœ¨æŒ‡å®šç³»ç»Ÿä¸Šè·‘ï¼\n1.2 Cè¯­è¨€æ–‡ä»¶æ“ä½œåœ¨å­¦ä¹ Linuxä¸‹æ–‡ä»¶ç›¸å…³å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å¤ä¹ ä¸€ä¸‹Cè¯­è¨€çš„æ–‡ä»¶æ¥å£\nvoid writetest()&#123;    char*file=&quot;test.txt&quot;;    FILE* f=fopen(file,&quot;w&quot;);    for(int i =0;i&lt;10;i++)    &#123;        fprintf(f,&quot;hello linux! %d\\n&quot;,i);    &#125;        fclose(f);    f=NULL;&#125;void readtest()&#123;    char*file=&quot;test.txt&quot;;    FILE* f=fopen(file,&quot;r&quot;);    char buff[128];//å°†è¯»å–åˆ°çš„æ•°æ®å†™å…¥buffæ•°ç»„é‡Œé¢    for(int i =0;i&lt;10;i++)    &#123;        fgets(buff,20,f);        printf(&quot;%s&quot;,buff);    &#125;    fclose(f);    f=NULL;&#125;\n\nè¿™é‡Œç”¨å¾ªç¯å…ˆå¾€test.txtå†…è¾“å…¥10è¡Œæ•°æ®ï¼Œå†è¯»å–å¹¶æ‰“å°åˆ°å±å¹•ä¸Š\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test1hello linux! 0hello linux! 1hello linux! 2hello linux! 3hello linux! 4hello linux! 5hello linux! 6hello linux! 7hello linux! 8hello linux! 9[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\né™¤äº†wå’Œræ–¹æ³•å¤–ï¼ŒCè¯­è¨€è¿˜æä¾›äº†w+ r+ aä»¥åŠå¸¦bçš„äºŒè¿›åˆ¶è¯»å†™\n\nè¿™éƒ¨åˆ†å†…å®¹å¯ä»¥å»çœ‹çœ‹æˆ‘ä¹‹å‰çš„Cè¯­è¨€æ–‡ä»¶æ“ä½œåšå®¢ï¼\n\nCè¯­è¨€é»˜è®¤æ‰“å¼€äº†ä¸‰ä¸ªè¾“å…¥è¾“å‡ºæµï¼Œéƒ½æ˜¯ä¸€ä¸ªFILE*çš„æŒ‡é’ˆï¼Œåˆ†åˆ«ä¸ºstdin/stdout/stderrï¼Œè®°ä½è¿™ä¸ªç‚¹ï¼Œåé¢ä¼šç”¨åˆ°å“¦\n\n2.åˆè¯†Linuxç³»ç»Ÿçš„æ–‡ä»¶æ¥å£Linuxä¸‹çš„æ–‡ä»¶æ“ä½œç”¨çš„æ¥å£ä¸ºopen/write/readï¼Œéƒ½éœ€è¦å…ˆç”¨openæ‰“å¼€æ–‡ä»¶å¹¶æŒ‡å®šæ‰“å¼€æ–¹å¼åï¼Œå†ç”¨write/readæ“ä½œè¿›è¡Œè¯»å†™\n\næ³¨ï¼šmanæŸ¥è¯¢çš„æ—¶å€™éœ€è¦æŒ‡å®šman 2 openï¼Œå¦åˆ™æŸ¥è¯¢åˆ°çš„æ˜¯å‘½ä»¤ä¸æ˜¯å‡½æ•°æ¥å£\n\n\nè¿™é‡Œopenä¸€å…±æœ‰ä¸¤ä¸ªå‡½æ•°æ¥å£ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å‡½æ•°é‡è½½ï¼è¿™æ˜¯å› ä¸ºlinuxä¸‹çš„Cè¯­è¨€æ ‡å‡†å’Œæˆ‘ä»¬ä¹‹å‰åœ¨winä¸‹å­¦ä¹ æ‰€ç”¨çš„æ ‡å‡†æ˜¯ä¸ä¸€æ ·çš„ï¼\n\nç¬¬ä¸€ä¸ªå‚æ•°ä¸ºpathnameï¼Œæ–‡ä»¶è·¯å¾„\nç¬¬äºŒä¸ªå‚æ•°ä¸ºflagsï¼Œæ‰“å¼€æ–‡ä»¶çš„æ–¹å¼\n\næ‰“å¼€æ–‡ä»¶çš„æ–¹å¼å¹¶ä¸åƒCè¯­è¨€ç”¨w/rç­‰ç­‰ä»£æ›¿ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬ä¼ å…¥å¤šä¸ªflagè¿›è¡ŒæŒ‰ä½ä¸ï¼Œè¿™ä¸€ç‚¹å’ŒC++ä¸­çš„æ–‡ä»¶ç±»ä¸€æ ·ï¼\n\nè¿™é‡Œçš„flagå…¶å®æ˜¯ä¸€ç§ä½å›¾ç»“æ„ã€‚æ¯ä¸€ä¸ªflagåªéœ€è¦åœ¨ä¸€ä¸ªæ¯”ç‰¹ä½ä¸Šä¸º1ï¼ˆåè¿›åˆ¶2çš„å€æ•°ï¼‰å…¶ä½™ä½ä¸º0ï¼Œä¿è¯äº’ä¸å½±å“ã€‚è¿™æ ·åœ¨æŒ‰ä½ä¸çš„æ—¶å€™ï¼Œæ‰èƒ½æ­£ç¡®å‡‘åˆ°ä¸€èµ·ï¼Œå¹¶é€šè¿‡æŒ‰ä½æˆ–è¿›è¡Œflagçš„å–å‡º\n\n flagçš„å‚æ•°ä¸­ï¼Œä¸‹é¢è¿™ä¸‰ä¸ªå€¼ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªä¸”åªèƒ½æŒ‡å®šä¸€ä¸ª\n\nO_RDONLY: åªè¯»æ‰“å¼€\nO_WRONLY: åªå†™æ‰“å¼€\nO_RDWR: è¯»ï¼Œå†™æ‰“å¼€\n\nå‰©ä½™çš„å‚æ•°æ˜¯ç”¨ä½œé¢å¤–æ“ä½œçš„\n\nO_CREAT: è‹¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼›éœ€è¦ä¼ å…¥modeå‚æ•°ï¼Œæ¥æŒ‡æ˜æ–°æ–‡ä»¶çš„è®¿é—®æƒé™\nO_APPEND: è¿½åŠ å†™\nO_TRUNC: æ¸…ç©ºæ–‡ä»¶\nâ€¦â€¦\n\nå¸¸ç”¨çš„å‚æ•°å°±ä¸Šé¢è¿™äº›ï¼Œæ›´å¤šå‚æ•°å¯ä»¥ä½¿ç”¨man 2 openæŸ¥çœ‹å®Œæ•´flagåˆ—è¡¨\n\nè¿™ç§å¤§å†™+ä¸‹åˆ’çº¿çš„å‘½åæ–¹å¼å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒå…¶å®å°±æ˜¯ç³»ç»Ÿä¸­é¢„å…ˆå®šä¹‰å¥½çš„å®ï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œopenå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªintç±»å‹ï¼Œå®ƒè¢«ç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼Œåé¢ä¼šæœ‰è¯¦è§£\n\n2.1 è¯»æ–‡ä»¶\nè¯»æ–‡ä»¶çš„æ“ä½œå’Œfgetsç±»ä¼¼ï¼Œéœ€è¦æŒ‡å®šæ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥åŠç”¨äºä¿å­˜æ–‡ä»¶å†…å®¹çš„bufï¼Œå’Œæ•°æ®é•¿åº¦count\n#define SIZE 256void test1()&#123;    char buf[SIZE];    int fd1 = open(&quot;test.txt&quot;, O_RDONLY);    read(fd1,buf,strlen(buf)-1);    ssize_t s = read(fd1, buf, sizeof(buf)-1);    if(s &gt; 0)    &#123;       buf[s] = &#x27;\\0&#x27;;       printf(&quot;%s&quot;, buf);    &#125;    close(fd1);&#125;\n\nssize_tæ˜¯æœ‰ç¬¦å·æ•´å‹ï¼Œå…¶å®å°±æ˜¯int\ntypedef int ssize_t\n\nè¿™é‡Œæˆ‘ä»¬æ‰“å¼€äº†åˆšåˆšæµ‹è¯•Cè¯­è¨€ç”¨çš„test.txtæ–‡ä»¶ï¼ŒæˆåŠŸè¯»å‡ºäº†é‡Œé¢çš„å†…å®¹\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testhello linux! 0hello linux! 1hello linux! 2hello linux! 3hello linux! 4hello linux! 5hello linux! 6hello linux! 7hello linux! 8hello linux! 9[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n2.2 å†™æ–‡ä»¶\næ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸åœ¨opençš„æ—¶å€™æŒ‡å®šç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå…¶åˆ›å»ºçš„æ–°æ–‡ä»¶ï¼Œæƒé™æ˜¯ä¹±æ‰çš„ã€‚è€Œå•ç»™ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥0666è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠç³»ç»Ÿçš„umaskåœ¨å½“å‰è¿›ç¨‹ä¸­è®¾ç½®ä¸º0ï¼Œä»¥é¿å…ç³»ç»Ÿumaskçš„é»˜è®¤å€¼å¯¹æˆ‘ä»¬åˆ›å»ºæ–‡ä»¶çš„æƒé™é€ æˆå½±å“\nvoid test2()&#123;    umask(0);//å…ˆæŠŠumaskè®¾ç½®ä¸º0ï¼Œä¿è¯æƒé™å€¼è®¾ç½®æ­£ç¡®ï¼Œä¸å—ç³»ç»Ÿumaskå½±å“    int fd = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);\t//è¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†0_CREATï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®š0666ä½œä¸ºæƒé™å€¼    const char *str = &quot;bbbbbb\\n&quot;;    write(fd, str, strlen(str));    close(fd);&#125;\n\næ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®è¢«æˆåŠŸå†™å…¥\n\nè¿™é‡Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†O_TRUNCï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œæ–‡ä»¶å†…éƒ¨çš„å†…å®¹éƒ½ä¼šè¢«æ¸…ç©ºã€‚ä¿®æ”¹stråé‡æ–°è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°åŸæœ‰çš„å†…å®¹ä¸è§äº†\n\nå¦‚æœä¸æŒ‡å®šï¼Œå…¶ä¸ä¼šæ¸…ç©ºå·²æœ‰å†…å®¹ã€‚è€Œæ˜¯ä¼šä»å¼€å¤´è¿›è¡Œå†™å…¥ï¼Œè¦†ç›–å¼€å¤´å·²æœ‰çš„å†…å®¹ï¼ˆå·¦è¾¹ä¸ºå†™å…¥åï¼Œå³è¾¹ä¸ºå†™å…¥å‰ï¼‰\n\nå®é™…ä¸Šï¼ŒCè¯­è¨€çš„æ–‡ä»¶æ“ä½œï¼Œè°ƒç”¨çš„å°±æ˜¯linuxçš„æ–‡ä»¶æ¥å£\nfopen(&quot;test.txt&quot;, &quot;w&quot;); //åº•å±‚è°ƒç”¨openï¼ŒO_WRONLY | O_CREAT | O_TRUNCfopen(&quot;test.txt&quot;, &quot;a&quot;); //åº•å±‚è°ƒç”¨openï¼ŒO_WRONLY | O_CREAT | O_APPEND\n\nå†™æ–¹å¼è¦†ç›–ï¼Ÿåœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç¥å¥‡çš„æƒ…å†µ\nvoid test2()&#123;    umask(0);//å…ˆæŠŠumaskè®¾ç½®ä¸º0ï¼Œä¿è¯æƒé™å€¼è®¾ç½®æ­£ç¡®ï¼Œä¸å—ç³»ç»Ÿumaskå½±å“    int fd1 = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT, 0666);    int fd2 = open(&quot;test.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fd1: %d  fd2: %d\\n&quot;,fd1,fd2);    const char *str = &quot;bbadsfasdfasdfa23123bbbb&quot;;    write(fd1, str, strlen(str));    close(fd1);&#125;\n\nè¿™é‡Œæˆ‘åˆ†åˆ«ç”¨fd1/fd2æ‰“å¼€äº†test.txtæ–‡ä»¶ï¼Œæ‰“å°å®ƒä»¬çš„æ–‡ä»¶æè¿°ç¬¦å¯ä»¥çœ‹åˆ°ï¼Œç»“æœä¸ä¸€æ ·\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testfd1: 3  fd2: 4[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nä½†æ˜¯ï¼Œæ‰§è¡Œçš„å†™å…¥ï¼Œå´æ˜¯ O_TRUNCçš„è¦†ç›–æ–¹æ³•ï¼\n\nå®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯fd2çš„å†™å…¥æ–¹æ³•è¦†ç›–äº†fd1çš„ï¼Œè€Œæ˜¯å½“æˆ‘ä»¬ä½¿ç”¨ O_TRUNCæ–¹æ³•æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶é‡Œé¢çš„å†…å®¹å°±å·²ç»è¢«æ¸…ç©ºäº†ï¼\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œåˆšåˆšæ‰begin fd2çš„æ—¶å€™ï¼Œtest.txtçš„æ–‡ä»¶å¤§å°å°±å·²ç»å˜æˆ0äº†\nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå»ºè®®ä¸è¦åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢å¤šæ¬¡æ‰“å¼€ä¸€ä¸ªä¹‹å‰å·²ç»æ‰“å¼€è¿‡çš„æ–‡ä»¶ï¼\n3.æ–‡ä»¶æè¿°ç¬¦3.1 ä¸ºä»€ä¹ˆæ˜¯ä»3å¼€å§‹ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¸€æ¬¡æ€§æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œæ‰“å°ä»–ä»¬çš„æ–‡ä»¶æè¿°ç¬¦\nvoid test3()&#123;    int fda = open(&quot;loga.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdb = open(&quot;logb.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdc = open(&quot;logc.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdd = open(&quot;logd.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fde = open(&quot;loge.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fda: %d\\n&quot;, fda);    printf(&quot;fdb: %d\\n&quot;, fdb);    printf(&quot;fdc: %d\\n&quot;, fdc);    printf(&quot;fdd: %d\\n&quot;, fdd);    printf(&quot;fde: %d\\n&quot;, fde);&#125;\n\n\nä¼šå‘ç°æ‰“å°çš„æ–‡ä»¶æ˜¯ä»3å¼€å§‹çš„ã€‚è¿™å’Œæˆ‘ä»¬ä¹‹å‰æ˜¯å¦æœ‰æ‰“å¼€è¿‡æ–‡ä»¶æ²¡å…³ç³»ï¼Œä»»ä½•è¿›ç¨‹opençš„è‡ªå·±çš„æ–‡ä»¶éƒ½æ˜¯ä»3å¼€å§‹çš„ï¼\nè¿˜è®°å¾—å‰é¢Cè¯­è¨€éƒ¨åˆ†æåˆ°çš„stdin/stdout/stderrå—ï¼Ÿ\nlinuxç³»ç»Ÿä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè¿™ä¸‰ä¸ªå®¶ä¼™ä¹Ÿä¸ä¾‹å¤–ï¼æ—¢ç„¶Cè¯­è¨€çš„æ–‡ä»¶æ“ä½œå°è£…äº†ç³»ç»Ÿçš„æ¥å£ï¼Œé‚£ä¹ˆå…¶å†…éƒ¨è‚¯å®šæ˜¯æœ‰æ–‡ä»¶æè¿°ç¬¦çš„å­˜åœ¨çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°å®ƒå°±è¡Œäº†ã€‚\nè¿™ä¸€ç‚¹ï¼Œä»£ç è¡¥å…¨å°±å¯ä»¥å¸®å¿™äº†\n\nvoid test4()&#123;    //cè¯­è¨€ä¸­çš„FILEæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œé‡Œé¢ç®¡ç†äº†linuxç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦    printf(&quot;stdin %d\\n&quot;,stdin-&gt;_fileno);//  0    printf(&quot;stdout %d\\n&quot;,stdout-&gt;_fileno);// 1    printf(&quot;stderr %d\\n&quot;,stderr-&gt;_fileno);// 2    FILE* f1 = fopen(&quot;test.txt&quot;,&quot;w&quot;);    printf(&quot;f1 %d\\n&quot;,f1-&gt;_fileno);//3&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./teststdin 0stdout 1stderr 2f1 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\næ‰“å°ä¹‹åæˆ‘ä»¬å‘ç°ï¼Œå…¶0 1 2å°±æ˜¯è¢«Cè¯­è¨€çš„è¿™ä¸‰ä¸ªé»˜è®¤æ‰“å¼€çš„æ–‡ä»¶æµå ç”¨äº†ï¼Œè€Œæˆ‘ä»¬ç”¨Cè¯­è¨€fopenæ‰“å¼€çš„æ–‡ä»¶ï¼Œå…¶æ–‡ä»¶æè¿°ç¬¦ä¹Ÿæ˜¯ä»3å¼€å§‹çš„ï¼\n\nç”¨æ–‡ä»¶æè¿°ç¬¦è°ƒç”¨stdin&#x2F;outæ—¢ç„¶stdoutå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯1ï¼Œé‚£æˆ‘ä»¬å¯ä¸å¯ä»¥ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„æ¥å£å¾€å±å¹•ä¸Šè¾“å‡ºä¸œè¥¿å‘¢ï¼Ÿ\nvoid test5()&#123;    char buf[SIZE]=&quot;12345678910\\n&quot;;    write(1,buf,strlen(buf));&#125;\n\nå½“ç„¶æ˜¯å¯ä»¥çš„ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test12345678910[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nåŒç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿™æ ·æ¥æ¥æ”¶ç”¨æˆ·è¾“å…¥\nvoid test6()&#123;    char buf[SIZE];    ssize_t s = read(0,buf,sizeof(buf));    if(s&gt;0)    &#123;        buf[s]=&#x27;\\0&#x27;;        printf(&quot;stdin: %s\\n&quot;,buf);    &#125;&#125;\n\n\nè¿è¡Œçš„æ—¶å€™ï¼Œç¨‹åºä¼šæŒ‚èµ·ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œç”±æ­¤å¯ä»¥æ‰“å°è·å–è¾“å…¥çš„ç»“æœğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ makegcc test.c -o test -std=c99[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testasdfasdfadfadfstdin: asdfasdfadfadf[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\n3.2 ä»0å¼€å§‹ï¼Ÿæ•°ç»„ä¸‹æ ‡ï¼\næ—¢ç„¶stdin/stdout/stderråˆ†åˆ«å¯¹åº”çš„æ˜¯0/1/2ï¼Œè€Œæˆ‘ä»¬æ‰“å¼€çš„è‡ªå·±çš„æ–‡ä»¶å¯¹åº”çš„æ˜¯3å¼€å§‹ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ï¼Œè¿™äº›æ•°å­—æ˜¯ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡å‘¢ï¼Ÿ\n\nä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ï¼Œå…¶æ•°æ®æ˜¯åœ¨å†…å­˜ä¸­çš„ã€‚æ“ä½œç³»ç»Ÿå†…æ ¸è‚¯å®šéœ€è¦ç®¡ç†ä¸€ä¸ªè¿›ç¨‹å·²ç»æ‰“å¼€çš„æ–‡ä»¶ï¼ä¸‡ä¸€æœ‰â€œå¤§èªæ˜â€å¿˜è®°closeæ–‡ä»¶äº†ï¼Œè€Œæ“ä½œç³»ç»Ÿåˆæ²¡å»ç®¡ç†å·²æœ‰æ–‡ä»¶ï¼Œå…¶ä¸å°±ä¼šé€ æˆå†…å­˜æ³„æ¼å—ï¼Ÿ\nåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ä¸ªstruct fileï¼Œå…¶ç®¡ç†çš„å°±æ˜¯å·²ç»æ‰“å¼€äº†çš„æ–‡ä»¶\nstruct file&#123;    //åŒ…å«äº†æ–‡ä»¶çš„å†…å®¹+å±æ€§&#125;\n\nåŒæ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶å†…æ ¸è¿˜ä¼šè¢«æ’å…¥åˆ°è¿›ç¨‹çš„task_structä¸­ï¼Œå› ä¸ºä¸€ä¸ªè¿›ç¨‹æ˜¯å¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶çš„ã€‚æ“ä½œç³»ç»Ÿåœ¨å¯¹å·²æ‰“å¼€æ–‡ä»¶è¿›è¡Œç®¡ç†çš„åŒæ—¶ï¼Œè¿˜éœ€è¦å¯¹ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼ˆçŸ¥é“æŸä¸ªæ–‡ä»¶æ˜¯è°æ‰“å¼€çš„ï¼‰\n\nä¸‹è½½çš„linuxæºç ä¸­ï¼Œtask_strcutçš„ä½ç½®å¦‚ä¸‹\nlinux-2.6.32.12/include/linux/sched.h\n\n\n\nè€Œæˆ‘ä»¬æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶å®å°±æ˜¯è¿›ç¨‹ä¸­ç®¡ç†æ–‡ä»¶çš„ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡ã€‚\n\nstruct files_struct &#123;  /*   * read mostly part   */\tatomic_t count;\tstruct fdtable *fdt;\tstruct fdtable fdtab;  /*   * written part on a separate cache line in SMP   */\tspinlock_t file_lock ____cacheline_aligned_in_smp;\tint next_fd;\tstruct embedded_fd_set close_on_exec_init;\tstruct embedded_fd_set open_fds_init;\tstruct file * fd_array[NR_OPEN_DEFAULT];//æ–‡ä»¶æ•°ç»„&#125;;\n\nè¿™æ ·å¯¹è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶çš„ç®¡ç†ï¼Œå°±è¢«è½¬åŒ–ä¸ºäº†å¯¹è¿™ä¸ªæ•°ç»„çš„å¢åˆ æŸ¥æ”¹\n3.3 Linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶æœ€åˆå­¦ä¹ Linuxçš„æ—¶å€™ï¼Œå°±æåˆ°äº†Linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å†…æ ¸ä¸­æ˜¯ç”¨fileç»“æ„ä½“æ¥ç®¡ç†æ–‡ä»¶çš„ï¼Œé‚£ä¹ˆï¼Œå®ƒæ˜¯æ€ä¹ˆç”¨æ–‡ä»¶æ¥ç®¡ç†é”®ç›˜ã€é¼ æ ‡ã€æ˜¾ç¤ºå™¨ã€ç£ç›˜ã€ç½‘å¡çš„å‘¢ï¼Ÿ\nè¿™æ—¶å€™å°±å¯ä»¥æ¥â€œæµ…æµ…â€çš„çœ‹ä¸€ä¸‹æºç äº†ï¼ä¸æ±‚çœ‹æ‡‚ä»£ç å®ç°ï¼Œåªæ±‚ç†è§£ç†å¿µ\n\nstruct fileä½äºinclude/linux/fs.hä¸­\n\nstruct file &#123;\t/*\t * fu_list becomes invalid after file_free is called and queued via\t * fu_rcuhead for RCU freeing\t */\tunion &#123;\t\tstruct list_head\tfu_list;\t\tstruct rcu_head \tfu_rcuhead;\t&#125; f_u;\tstruct path\t\tf_path;#define f_dentry\tf_path.dentry#define f_vfsmnt\tf_path.mnt\tconst struct file_operations\t*f_op;\tspinlock_t\t\tf_lock;  /* f_ep_links, f_flags, no IRQ */\tatomic_long_t\t\tf_count;\tunsigned int \t\tf_flags;\tfmode_t\t\t\tf_mode;\tloff_t\t\t\tf_pos;\tstruct fown_struct\tf_owner;\tconst struct cred\t*f_cred;\tstruct file_ra_state\tf_ra;\tu64\t\t\tf_version;#ifdef CONFIG_SECURITY\tvoid\t\t\t*f_security;#endif\t/* needed for tty driver, and maybe others */\tvoid\t\t\t*private_data;#ifdef CONFIG_EPOLL\t/* Used by fs/eventpoll.c to link all the hooks to this file */\tstruct list_head\tf_ep_links;#endif /* #ifdef CONFIG_EPOLL */\tstruct address_space\t*f_mapping;#ifdef CONFIG_DEBUG_WRITECOUNT\tunsigned long f_mnt_write_state;#endif&#125;;\n\nå…¶ä½™å†…å®¹ç”¨æ¥å¹²å“ˆå­çš„å’±æš‚ä¸”ä¸ç®¡ï¼Œç›®å…‰èšç„¦äºè¿™ä¸€ä¸ªç»“æ„ä½“\nconst struct file_operations\t*f_op;\n\nç¿»è¯‘è¿‡æ¥ï¼Œè¿™ä¸ªæˆå‘˜çš„åå­—ä¸ºæ–‡ä»¶æ“ä½œã€‚å†æ¥å¤ä¹ ä¸€ä¸‹constä¿®é¥°æŒ‡é’ˆçš„çŸ¥è¯†ç‚¹\n\nconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼ï¼ˆå…³é”®å­—ï¼šconstå’ŒæŒ‡é’ˆï¼Œconstå¸¸é‡æŒ‡é’ˆï¼ŒconstæŒ‡é’ˆï¼‰\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\n\nåœ¨è¿™ä¸ªç»“æ„ä½“ä¸­ï¼Œå°±æœ‰read/writeæ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°æŒ‡é’ˆ\nstruct file_operations &#123;\tstruct module *owner;\tloff_t (*llseek) (struct file *, loff_t, int);\tssize_t (*read) (struct file *, char __user *, size_t, loff_t *);\tssize_t (*write) (struct file *, const char __user *, size_t, loff_t *);\tssize_t (*aio_read) (struct kiocb *, const struct iovec *, unsigned long, loff_t);\tssize_t (*aio_write) (struct kiocb *, const struct iovec *, unsigned long, loff_t);\tint (*readdir) (struct file *, void *, filldir_t);\tunsigned int (*poll) (struct file *, struct poll_table_struct *);\tint (*ioctl) (struct inode *, struct file *, unsigned int, unsigned long);\tlong (*unlocked_ioctl) (struct file *, unsigned int, unsigned long);\tlong (*compat_ioctl) (struct file *, unsigned int, unsigned long);\tint (*mmap) (struct file *, struct vm_area_struct *);\tint (*open) (struct inode *, struct file *);\tint (*flush) (struct file *, fl_owner_t id);\tint (*release) (struct inode *, struct file *);\tint (*fsync) (struct file *, struct dentry *, int datasync);\tint (*aio_fsync) (struct kiocb *, int datasync);\tint (*fasync) (int, struct file *, int);\tint (*lock) (struct file *, int, struct file_lock *);\tssize_t (*sendpage) (struct file *, struct page *, int, size_t, loff_t *, int);\tunsigned long (*get_unmapped_area)(struct file *, unsigned long, unsigned long, unsigned long, unsigned long);\tint (*check_flags)(int);\tint (*flock) (struct file *, int, struct file_lock *);\tssize_t (*splice_write)(struct pipe_inode_info *, struct file *, loff_t *, size_t, unsigned int);\tssize_t (*splice_read)(struct file *, loff_t *, struct pipe_inode_info *, size_t, unsigned int);\tint (*setlease)(struct file *, long, struct file_lock **);&#125;;\n\nlinuxæ“ä½œç³»ç»Ÿå†…çš„æ–‡ä»¶ç³»ç»Ÿä»¥ç»Ÿä¸€çš„æ–¹å¼çœ‹å¾…æ‰€æœ‰çš„è®¾å¤‡ã€‚\nç‰¹å®šçš„è®¾å¤‡çš„read/writeæ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ï¼Œåªéœ€è¦åœ¨è¿™äº›ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºä¸­ç»™æ“ä½œç³»ç»Ÿæä¾›è¯»å†™è¿™ä¸ªè®¾å¤‡çš„å‡½æ•°å®ç°ï¼Œæ“ä½œç³»ç»Ÿåˆ™å°†å‡½æ•°æŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„å‡½æ•°ï¼Œä¾¿èƒ½å®ç°å¯¹æŸä¸€ä¸ªç¡¬ä»¶è®¾å¤‡çš„æ“ä½œï¼\næ¯”å¦‚è°ƒç”¨æ˜¾ç¤ºå™¨é©±åŠ¨çš„writeåˆ·æ–°æ˜¾ç¤ºå™¨çš„ç”»é¢ï¼Œè°ƒç”¨ç½‘å¡çš„read/writeæ¥ä¸‹è½½/ä¸Šä¼ æ•°æ®ç­‰ç­‰ï¼\n\n\n3.4 åˆ†é…è§„åˆ™åˆ†é…æ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™ï¼Œä¼šä»å¤´å¼€å§‹éå†fd_array[]ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ä¸‹æ ‡ï¼Œåˆ†é…ç»™æ–°çš„æ–‡ä»¶ï¼\nvoid test7()&#123;    int fda = open(&quot;loga.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    int fdb = open(&quot;logb.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);        printf(&quot;fda: %d\\n&quot;, fda);    printf(&quot;fdb: %d\\n&quot;, fdb);    close(fda);    printf(&quot;\\n&quot;);    int fdc = open(&quot;logc.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fdc: %d\\n&quot;, fdc);&#125;\n\nä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å…ˆæ‰“å¼€äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‰“å°å¯ä»¥çœ‹åˆ°å…¶æ–‡ä»¶æè¿°ç¬¦ä¸º3/4ï¼›å…³æ‰ç¬¬ä¸€ä¸ªæ–‡ä»¶åï¼Œå†æ‰“å¼€ä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œä¼šå‘ç°æ–‡ä»¶æè¿°ç¬¦è¿˜æ˜¯3ï¼ˆç¬¬ä¸€ä¸ªä¸ºç©ºçš„æ–‡ä»¶æè¿°ç¬¦ï¼‰\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testfda: 3fdb: 4fdc: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¾“å‡ºé‡å®šå‘åŒç†ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ‰“å¼€æ–‡ä»¶ä¹‹å‰ï¼Œå°±å…³é—­æ‰Cè¯­è¨€æ‰“å¼€çš„stdoutï¼Œé‚£ä¹ˆæ­¤æ—¶æ‰“å¼€æ–‡ä»¶çš„fdå°±ä¸º1ï¼Œæˆ‘ä»¬çš„printfåˆ™ä¼šæŠŠæ•°æ®æ‰“å°åˆ°è¯¥æ–‡ä»¶å½“ä¸­ï¼\nvoid test8()&#123;    //æ–‡ä»¶æè¿°ç¬¦åˆ†é…çš„æ—¶å€™ï¼Œä¼šåœ¨æ•°ç»„é‡Œé¢æ‰¾ç¬¬ä¸€ä¸ªä¸ºç©ºçš„æè¿°ç¬¦    printf(&quot;start test!\\n&quot;);//æ‰“å°åˆ°å±å¹•ä¸Š    close(1);//å…³é—­stdout    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    printf(&quot;fd: %d\\n&quot;,fd);//æ‰“å°åˆ°æ–‡ä»¶ä¸­    close(fd);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œ./testä¹‹å‰ï¼Œæ–‡ä»¶é‡Œé¢æ²¡æœ‰å†…å®¹ã€‚æ‰§è¡Œä¹‹åï¼Œå°±æŠŠæˆ‘ä»¬printfçš„æ•°æ®è¾“å‡ºåˆ°æ–‡ä»¶å½“ä¸­äº†ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./teststart test![muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtfd: 1[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¿™ç§æ“ä½œå°±å«åšè¾“å‡ºé‡å®šå‘ï¼\nå¦å¤–ä¸€ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å…³é—­stdoutä¹‹å‰ä¸è¿›è¡Œprintfï¼Œåˆ™ä¸ä¼šç«‹é©¬åˆ·æ–°åˆ°log.txtè€Œæ˜¯éœ€è¦æˆ‘ä»¬åˆ·æ–°äº†ç¼“å†²åŒºä¹‹åï¼Œæ‰ä¼šå†™å…¥åˆ°æ–‡ä»¶ä¸­\nclose(1);//å…³é—­stdoutint fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);printf(&quot;fd: %d\\n&quot;,fd);fflush(stdout);close(fd);\n\nè¿™é‡Œæœ‰ä¸ªå°æŠ€å·§&gt;log.txtå¯ä»¥ç”¨æ¥æ¸…ç©ºæ–‡ä»¶çš„å†…å®¹\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$\n\n\n3.5 dup2ä¸Šé¢æ˜¯æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œçš„è¾“å‡ºé‡å®šå‘æ“ä½œã€‚æ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œè¾“å‡ºé‡å®šå‘\nint dup2(int oldfd, int newfd);\n\n\nè¿™é‡Œæˆ‘ä»¬è¦ç”¨çš„æ˜¯dup2å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å¦‚ä¸‹\ndup2() makes newfd be the copy of oldfd, closing newfd first if necessary, but note the following:*  If oldfd is not a valid file descriptor, then the call fails, and newfd is not closed.*  If oldfd is a valid file descriptor, and newfd has the same value as oldfd, then dup2() does nothing, and returns newfd.\n\nä¸€å®šè¦çœ‹æ¸…æ¥šï¼Œæ˜¯å°†newfdå˜æˆoldfdçš„ä¸€ä¸ªæ‹·è´ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå°±åªå‰©oldfdäº†ï¼\nå¦‚æœnewfdåŸæœ¬å·²ç»æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ“ä½œä¼šå…ˆå°†newfdç»™å…³æ‰\nRETURN VALUEOn success, these system calls return the new descriptor.  On error, -1 is returned, and errno is set appropriately.\n\nè¯¥å‡½æ•°æˆåŠŸçš„æ—¶å€™ä¼šè¿”å›newfdï¼Œå¦åˆ™è¿”å›-1\n\nä¸‹é¢ä¸ºä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå‡è®¾æˆ‘ä»¬æƒ³å°†è¾“å‡ºçš„å†…å®¹é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨dup2å°†1æ›¿æ¢ä¸ºæˆ‘ä»¬è‡ªå·±çš„fdï¼Œæ­¤æ—¶oldfd=fd,newfd=1\nvoid test9()&#123;    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);    dup2(fd, 1);    int ret = dup2(fd, 1);    if(ret &gt; 0)         close(fd);    printf(&quot;ret: %d\\n&quot;, ret);//retä¸ºnewfd    //æœ¬æ¥å¾€æ˜¾ç¤ºå™¨æ‰“å°ï¼Œæœ€ç»ˆå˜æˆå‘æŒ‡å®šæ–‡ä»¶æ‰“å° -&gt; é‡å®šå‘    fprintf(stdout, &quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: %d\\n&quot;, fd);    fflush(stdout);//åˆ·æ–°ç¼“å†²åŒº    close(fd);&#125;\n\nç»“æœå¦‚ä¸‹ï¼Œæˆ‘ä»¬æˆåŠŸçš„å°†å†…å®¹printfåˆ°äº†æŒ‡å®šæ–‡ä»¶ä¸­\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n\nä¸ºä»€ä¹ˆè¿™é‡Œå¯ä»¥ç”¨stdoutæ¥è¾“å‡ºåˆ°æ–‡ä»¶ä¸­å‘¢ï¼Ÿ\n\nå› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨dup2çš„æ—¶å€™ï¼Œstdoutæ‰€æŒ‡å‘çš„æ–‡ä»¶æè¿°ç¬¦1å·²ç»è¢«æ›¿æ¢æˆäº†log.txtï¼Œæ­¤æ—¶å¯¹stdoutçš„æ“ä½œå°±æ˜¯å¯¹æˆ‘ä»¬è‡ªå·±çš„æ–‡ä»¶æ“ä½œ\n\nä¸ºä»€ä¹ˆè¿™é‡Œæˆ‘ä»¬å·²ç»æŠŠfdå…³æ‰äº†ï¼Œä½†æ˜¯æ›¿æ¢æ‰çš„æ–‡ä»¶æè¿°ç¬¦1ä¸å—å½±å“å‘¢ï¼Ÿ\n\nåŒä¸€ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥è¢«æ‰“å¼€å¤šæ¬¡çš„ï¼æ‰§è¡Œdup2çš„æ—¶å€™ï¼Œå¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿåˆä¸€æ¬¡æ‰“å¼€äº†fdæŒ‡å‘çš„æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶åº•å±‚ï¼Œåˆ™æœ‰ä¸€ä¸ªè®¡æ•°æ¥åˆ¤æ–­è¯¥æ–‡ä»¶è¢«æ‰“å¼€äº†å‡ æ¬¡ã€‚å½“æˆ‘ä»¬close(fd)çš„æ—¶å€™ï¼Œåªæ˜¯è®©è¯¥æ–‡ä»¶åº•å±‚struct fileçš„æ‰“å¼€è®¡æ•°-1ï¼Œå¹¶éå®Œå…¨å…³é—­äº†è¯¥æ–‡ä»¶ï¼æ­¤æ—¶1è¿˜èƒ½æ­£ç¡®æŒ‡å‘log.txtå‘¢\nè¿½åŠ é‡å®šå‘è¿™é‡Œåªéœ€è¦æˆ‘ä»¬æ”¹å˜fdæ‰“å¼€çš„æ–¹å¼ï¼ŒåŠ ä¸ŠO_APPENDå³å¯ï¼\nvoid test9()&#123;    int fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_APPEND, 0666);    dup2(fd, 1);    int ret = dup2(fd, 1);//    if(ret &gt; 0)         close(fd);    printf(&quot;ret: %d\\n&quot;, ret);//retä¸ºnewfd    //æœ¬æ¥å¾€æ˜¾ç¤ºå™¨æ‰“å°ï¼Œæœ€ç»ˆå˜æˆå‘æŒ‡å®šæ–‡ä»¶æ‰“å° -&gt; é‡å®šå‘    fprintf(stdout, &quot;æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: %d\\n&quot;, fd);    fflush(stdout);//åˆ·æ–°ç¼“å†²åŒº    close(fd);&#125;\n\nè¿è¡Œå¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸåœ¨åé¢è¿½åŠ \n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./test[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\nè¾“å…¥é‡å®šå‘//è¾“å…¥é‡å®šå‘void test11()&#123;    int fd = open(&quot;log.txt&quot;,O_RDONLY);    if(fd&lt;0)    &#123;        perror(&quot;open&quot;);        return ;    &#125;    int ret = dup2(fd,0);//é‡å®šå‘stdin    if(ret &gt; 0)         close(fd);    char buf[128];    while(fgets(buf,sizeof(buf),stdin)!=NULL)    &#123;        printf(&quot;%s&quot;,buf);    &#125;&#125;\n\næ­¤æ—¶æˆ‘ä»¬çš„stdinè¢«dup2æ›¿æ¢æˆäº†log.txtï¼Œå…¶è·å–è¾“å…¥çš„æ“ä½œè½¬ä¸ºäº†è¯»å–æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ cat log.txtret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ ./testret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3ret: 1æ‰“å¼€æ–‡ä»¶æˆåŠŸï¼Œfd: 3[muxue@bt-7274:~/git/linux/code/22-10-18_files]$ \n\n3.6 æ ‡å‡†è¾“å‡º&#x2F;æ ‡å‡†é”™è¯¯ä¹‹å‰å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸ç›´æ¥ä½¿ç”¨äº†printfæ¥æ‰“å°ä¸€äº›é”™è¯¯ä¿¡æ¯ï¼Œè€Œæ²¡æœ‰æ€ä¹ˆç”¨è¿‡perror/cerrè¿™ä¸¤ä¸ªåº“å‡½æ•°\né‚£ä¹ˆå®ƒä»¬å’Œprintf/coutåˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nint main()&#123;    // stdout    printf(&quot;hello printf\\n&quot;);    fprintf(stdout, &quot;hello fprintf to stdout\\n&quot;);    fputs(&quot;hello fputs to stdout\\n&quot;, stdout);    cout &lt;&lt; &quot;hello cout&quot; &lt;&lt; endl;    // stderr    perror(&quot;hello perror&quot;);    fprintf(stderr, &quot;hello fprintf to stderr\\n&quot;);    fputs(&quot;hello fputs to stderr\\n&quot;, stderr);    cerr &lt;&lt; &quot;hello cerr&quot; &lt;&lt; endl;    return 0;&#125;\n\næµ‹è¯•å‘ç°ï¼Œä¼¼ä¹æ²¡æœ‰å•¥åŒºåˆ«å•Šï¼Œä¸éƒ½æ‰“å°åˆ°å±å¹•ä¸Šäº†å—ï¼Ÿ\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./testhello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\néä¹Ÿï¼å½“æˆ‘ä»¬ä½¿ç”¨é‡å®šå‘çš„æ—¶å€™ï¼Œå°±å‡ºç°é—®é¢˜äº†\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &gt;log.txthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello cout[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\næ¬¸ï¼Ÿä¸æ˜¯ä½¿ç”¨äº†é‡å®šå‘å—ï¼Œä¸ºä»€ä¹ˆè¿˜åœ¨å±å¹•ä¸Šè¾“å‡ºäº†å†…å®¹å‘¢ï¼Ÿ\nä»”ç»†ä¸€çœ‹ï¼Œè¾“å‡ºçš„éƒ½æ˜¯stderrçš„å†…å®¹ï¼Œè€Œæ²¡æœ‰stdoutã€‚catæ–‡ä»¶ä¸€çœ‹ï¼Œstdoutçš„å†…å®¹éƒ½åœ¨æ–‡ä»¶é‡Œé¢å˜ï¼\nè¿˜è®°å¾—å—ï¼Ÿstdout/stderrå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯1/2ï¼Œè€Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½æŒ‡å‘çš„æ˜¯æ˜¾ç¤ºå™¨ã€‚\n\næ³¨æ„ï¼šè™½ç„¶å®ƒä»¬ä¸¤ä¸ªæŒ‡å‘éƒ½æ˜¯æ˜¾ç¤ºå™¨ï¼Œä½†å®ƒä»¬æ˜¯é€šè¿‡ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œç‹¬ç«‹åœ°å¾€æ˜¾ç¤ºå™¨ä¸Šæ‰“å°å†…å®¹çš„ï¼\n\næˆ‘ä»¬é‡å®šå‘çš„æ—¶å€™ï¼Œå…¶å®çœç•¥äº†ä¸€ä¸ª1ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé‡å®šå‘åªå¯¹1å·æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯stdoutæœ‰æ•ˆï¼\n./test &gt;log.txt./test 1&gt;log.txt\n\nå¦‚æœæˆ‘ä»¬æŠŠè¿™é‡Œçš„1æ¢æˆ2ï¼Œç»“æœå°±ä¸ä¸€æ ·äº†\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test 2&gt;log.txthello printfhello fprintf to stdouthello fputs to stdouthello cout[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\nå¯ä»¥çœ‹åˆ°ï¼Œstderrçš„å†…å®¹è¿›äº†æ–‡ä»¶ï¼Œè€Œstdoutçš„å†…å®¹è¾“å‡ºåˆ°äº†å±å¹•ä¸Š\nåŒºåˆ†é”™è¯¯å’Œæ­£å¸¸è¾“å‡ºè¿™ä¹ˆè®¾è®¡çš„æ„ä¹‰ï¼Œå°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å®šä½é—®é¢˜ã€‚å°†é”™è¯¯å’Œæ­£å¸¸çš„æ‰“å°è¾“å‡ºå†™é“ä¸åŒçš„æ–‡ä»¶ä¸­ã€‚å¦‚æœæˆ‘ä»¬åƒåªå…³æ³¨é”™è¯¯ï¼Œå°±åªéœ€è¦å»æŸ¥æ‰¾è®°å½•äº†é”™è¯¯ä¿¡æ¯çš„æ–‡ä»¶å³å¯\næ··åˆè¾“å‡º2&gt;&amp;1å¦‚æœæˆ‘ä»¬å°±æ˜¯ä¸å¬ä¸å¬ï¼Œéè¦æŠŠä»–ä¿©æ‰“ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œåº”è¯¥æ€ä¹ˆå¼„å‘¢ï¼Ÿ\n./test &gt;log.txt 2&gt;&amp;1\n\nè¿™ä¸ª2&gt;&amp;1çš„æ“ä½œéœ€è¦æˆ‘ä»¬ç†è§£ï¼š\n\n./testè¿è¡Œå¯æ‰§è¡Œç¨‹åº\n&gt;log.txtä»£è¡¨é‡å®šå‘ï¼Œé»˜è®¤åªé‡å®šå‘äº†1\nç°åœ¨æŒ‡å‘log.txtçš„æ˜¯1å·æ–‡ä»¶æè¿°ç¬¦ï¼Œä»£è¡¨stdout\n2&gt;&amp;1ä»£è¡¨å°†2é‡å®šå‘åˆ°1ï¼Œå¯ä»¥ç†è§£ä¸ºdup2(1,2);\næ‰§è¡Œç»“æŸåï¼Œ2å°±æˆäº†1çš„ä¸€ä»½æ‹·è´ï¼Œç°åœ¨åªå‰©ä¸‹äº†1\nå› ä¸º1æŒ‡å‘çš„æ˜¯log.txtï¼Œæ‰€ä»¥2ä¹ŸæŒ‡å‘çš„æ˜¯ç›¸åŒæ–‡ä»¶\n\nè€Œè¿™ä¸ªè¯­å¥å¿…é¡»å†™åœ¨&gt;log.txtçš„åé¢ï¼Œ å¦åˆ™æ„ä¹‰å°±é”™è¯¯äº†ğŸ‘‡\n./test 2&gt;&amp;1 &gt;log.txt #é”™è¯¯å†™æ³•\n\n\n2&gt;&amp;1ä»£è¡¨å°†2é‡å®šå‘åˆ°1ï¼Œæ­¤æ—¶1æŒ‡å‘çš„æ˜¯å±å¹•ï¼Œæ‰€ä»¥2ä¹ŸæŒ‡å‘äº†å±å¹•\n&gt;log.txtä»£è¡¨å°†1æŒ‡å‘æ–‡ä»¶ï¼Œæ­¤æ—¶1æŒ‡å‘äº†æ–‡ä»¶ï¼Œä½†æ˜¯2è¿˜æ˜¯æŒ‡å‘å±å¹•\nç™½å†™ï¼\n\næ‰§è¡Œäº†æ­£ç¡®çš„å‘½ä»¤åï¼Œæ¥çœ‹çœ‹ç»“æœå§ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &gt;log.txt 2&gt;&amp;1[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\næ ‡å‡†é”™è¯¯å’Œæ ‡å‡†è¾“å‡ºçš„å†…å®¹éƒ½è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­äº†ï¼\nä¸Šé¢çš„æ•´æ³•å®åœ¨æœ‰ç‚¹å¤ªé•¿äº†ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½è®°ä¸ä½å†™åäº†ã€‚æ‰€ä»¥æœ‰ä¸€ç§ç®€å†™çš„æ–¹å¼\n#ç®€å†™æ–¹å¼&amp;&gt;log.txt#ä¸Šé¢çš„å†™æ³•ç­‰åŒäº&gt;log.txt 2&gt;&amp;1\n\næµ‹è¯•ä¸€ä¸‹ï¼Œæ²¡é—®é¢˜ï¼\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ &gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ./test &amp;&gt;log.txt[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ cat log.txthello printfhello fprintf to stdouthello fputs to stdouthello couthello perror: Successhello fprintf to stderrhello fputs to stderrhello cerr[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\n\nå…³äº2&gt;&amp;1çš„è¯¦è§£å‚è€ƒğŸ‘‰ ä¼ é€é—¨\n\n\n4.Cè¯­è¨€ç¼“å†²åŒº4.1 è§‚å¯Ÿç°è±¡å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼Œåˆ†åˆ«è°ƒç”¨Cè¯­è¨€çš„printfå’Œæ“ä½œç³»ç»Ÿçš„writeæ¥å£ï¼Œå¾€å±å¹•ä¸Šæ‰“å°å†…å®¹ã€‚ç»“æŸåsleep(3)\nvoid test1()&#123;    printf(&quot;test printf &quot;);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));    sleep(3);&#125;\n\n\næˆ‘ä»¬æƒŠå¥‡çš„å‘ç°ï¼Œç¬¬ä¸€ä¸ªæ‰“å°å‡ºæ¥çš„ç«Ÿç„¶æ˜¯writeï¼Œè€Œä¸æ˜¯åœ¨å®ƒä¹‹å‰çš„printfæ¥å£ï¼\nvoid test1()&#123;    printf(&quot;test printf &quot;);    fflush(stdout);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));        sleep(3);&#125;\n\nåªæœ‰åœ¨printfåç«‹é©¬è°ƒç”¨fflushåˆ·æ–°ç¼“å†²åŒºï¼Œæ‰èƒ½æŒ‰æ­£ç¡®çš„â€œé¡ºåºâ€æ‰“å°å‡ºå†…å®¹æ¥\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest printf test write [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nåœ¨è°ƒç”¨å…¶ä»–Cè¯­è¨€çš„å‡½æ•°ï¼Œå¾€å±å¹•ä¸Šè¾“å‡ºä¿¡æ¯ã€‚æˆ‘ä»¬ä¼šå‘ç°ç»“æœç›¸åŒï¼éƒ½æ˜¯å…ˆæ‰“å°å‡ºæ¥writeç»“æœï¼Œæ‰ä¸€æ¬¡æ€§æ‰“å°å‡ºæ‰€æœ‰Cè¯­è¨€å‡½æ•°çš„ç»“æœ\nvoid test2()&#123;    printf(&quot;test printf &quot;);    fprintf(stdout,&quot;test fprintf &quot;);    fputs(&quot;test fputs &quot;,stdout);    const char*msg = &quot;test write &quot;;    write(stdout-&gt;_fileno,msg,strlen(msg));        sleep(3);&#125;\n\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest write test printf test fprintf test fputs [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nç”±æ­¤å¯è§ï¼Œä¹‹å‰æˆ‘ä»¬ä¸€ç›´æåˆ°çš„ç¼“å†²åŒºï¼Œå…¶å®æ˜¯Cè¯­è¨€æä¾›çš„ï¼\n\næ³¨æ„ï¼šç¼“å†²åŒºä¸æ­¢Cè¯­è¨€å†…éƒ¨æœ‰ï¼Œæ“ä½œç³»ç»Ÿå†…ä¹Ÿæœ‰ã€‚æœ¬æ–‡åªè®¨è®ºCè¯­è¨€æä¾›çš„ç¼“å†²åŒº\n\n\n4.2 ç¼“å†²åŒºåœ¨å“ª?printf(&quot;test printf &quot;);fprintf(stdout,&quot;test fprintf &quot;);fputs(&quot;test fputs &quot;,stdout);\n\nä¸Šé¢è¿™å‡ ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå®ƒä»¬éƒ½å¾€stdouté‡Œé¢æ‰“å°äº†å†…å®¹ï¼\n\nprintfè™½ç„¶æ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šstdoutï¼Œä½†æ˜¯åº•å±‚æ˜¯æœ‰çš„\n\næˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€çš„æ–‡ä»¶æ˜¯ä¸€ä¸ªFILEç±»å‹çš„ç»“æ„ä½“ã€‚è¯¥ç»“æ„ä½“å†…å°è£…äº†å¾ˆå¤šå±æ€§ï¼Œå…¶ä¸­stdoutçš„_filenoæ–‡ä»¶æè¿°ç¬¦ï¼Œå°±æ˜¯è¯¥FILEå¯¹åº”çš„è¯­è¨€çº§åˆ«çš„ç¼“å†²åŒºï¼\nå…³é—­æ–‡ä»¶æè¿°ç¬¦å¦‚æœæˆ‘ä»¬åœ¨æ•°æ®åˆ·æ–°ä¹‹å‰ï¼Œå…³é—­äº†stdoutå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nprintf(&quot;test printf &quot;);fprintf(stdout,&quot;test fprintf &quot;);fputs(&quot;test fputs &quot;,stdout);const char*msg = &quot;test write &quot;;write(stdout-&gt;_fileno,msg,strlen(msg));sleep(3);close(stdout-&gt;_fileno);\n\nç»“æœå°±æ˜¯ï¼Œå•¥éƒ½æ²¡æœ‰åˆ·æ–°ï¼\nç¼“å†²åŒºéƒ½è¢«å…³é—­äº†ï¼Œå…¶å†…éƒ¨çš„æ•°æ®éƒ½æ— äº†ï¼Œè‚¯å®šä¸ä¼šåˆ·æ–°å•¦~\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest write [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nè€Œåœ¨è¾“å‡ºé‡å®šå‘ä¸­ï¼Œæ‰“å°çš„å†…å®¹æ²¡æœ‰ç›´æ¥è¢«æ˜¾ç¤ºçš„ï¼Œä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨å…³é—­fdä¹‹å‰åˆ·æ–°stdoutï¼ˆæ­¤æ—¶æŒ‡å‘çš„æ˜¯fdï¼‰ä¸­çš„ç¼“å†²åŒº\nclose(1);//å…³é—­stdoutint fd = open(&quot;log.txt&quot;, O_WRONLY | O_CREAT | O_TRUNC, 0666);printf(&quot;fd: %d\\n&quot;,fd);fflush(stdout);close(fd);\n\nFILEæ—¢ç„¶stdoutçš„ç¼“å†²åŒºåœ¨FILEå†…éƒ¨ï¼Œæ¨è€Œå¹¿ä¹‹ï¼Œæ‰€æœ‰ç”¨Cè¯­è¨€æ‰“å¼€çš„æ–‡ä»¶ï¼ŒFILEä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å’Œå®ƒè‡ªå·±çš„è¯­è¨€çº§åˆ«ç¼“å†²åŒº\ntypedef struct _IO_FILE FILE;\n\nåº“å‡½æ•°ä¸­çš„FILEæ˜¯ä¸€ä¸ªstruct _IO_FILEç±»å‹çš„ç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹\nstruct _IO_FILE &#123;  int _flags;\t\t/* High-order word is _IO_MAGIC; rest is flags. */#define _IO_file_flags _flags  //ä¸‹é¢è¿™äº›å°±æ˜¯å®ƒçš„ç¼“å†²åŒº  /* The following pointers correspond to the C++ streambuf protocol. */  /* Note:  Tk uses the _IO_read_ptr and _IO_read_end fields directly. */  char* _IO_read_ptr;\t/* Current read pointer */  char* _IO_read_end;\t/* End of get area. */  char* _IO_read_base;\t/* Start of putback+get area. */  char* _IO_write_base;\t/* Start of put area. */  char* _IO_write_ptr;\t/* Current put pointer. */  char* _IO_write_end;\t/* End of put area. */  char* _IO_buf_base;\t/* Start of reserve area. */  char* _IO_buf_end;\t/* End of reserve area. */  /* The following fields are used to support backing up and undo. */  char *_IO_save_base; /* Pointer to start of non-current get area. */  char *_IO_backup_base;  /* Pointer to first valid character of backup area */  char *_IO_save_end; /* Pointer to end of non-current get area. */  struct _IO_marker *_markers;  struct _IO_FILE *_chain;  int _fileno;//æ–‡ä»¶æè¿°ç¬¦#if 0  int _blksize;#else  int _flags2;#endif  _IO_off_t _old_offset; /* This used to be _offset but it&#x27;s too small.  */#define __HAVE_COLUMN /* temporary */  /* 1+column number of pbase(); 0 is unknown. */  unsigned short _cur_column;  signed char _vtable_offset;  char _shortbuf[1];  /*  char* _save_gptr;  char* _save_egptr; */  _IO_lock_t *_lock;#ifdef _IO_USE_OLD_IO_FILE&#125;;\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¤šä¸ªå˜é‡ç”¨äºç»´æŠ¤è¯¥æ–‡ä»¶çš„ç¼“å†²åŒºï¼Œä¹Ÿè¯å®äº†ç¼“å†²åŒºæ˜¯ç”±Cè¯­è¨€æä¾›çš„è¿™ä¸€ç»“è®ºã€‚\n4.3 ç¼“å†²åŒºçš„ä½œç”¨Cè¯­è¨€æä¾›ç¼“å†²åŒºçš„ç†ç”±å¾ˆç®€å•ï¼Œç›¸å¯¹äºå†…å­˜è€Œè¨€ï¼Œå…¶ä½™ç¡¬ä»¶éƒ½æ˜¯æ»¡è®¾å¤‡ã€‚\n\nä¸ºä»£ç æä¾›ç¼“å†²åŒºï¼Œå¯ä»¥æé«˜è¯¥ç¨‹åº&#x2F;è¿›ç¨‹è¾“å‡ºçš„æ•ˆç‡\nç¼“å†²åŒºå¯ä»¥é›†ä¸­å¤„ç†æ•°æ®åˆ·æ–°ï¼Œå‡å°‘IOçš„æ¬¡æ•°ï¼Œæé«˜äº†æ•´æœºè¿è¡Œæ•ˆç‡\n\n4.4 ä»€ä¹ˆæ—¶å€™åˆ·æ–°ç¼“å†²åŒºï¼Ÿä»€ä¹ˆæ—¶å€™åˆ·æ–°ç¼“å†²åŒºï¼Œå¯¹åº”çš„æ˜¯åˆ·æ–°ç­–ç•¥é—®é¢˜\nå¸¸è§„çš„åˆ·æ–°ç­–ç•¥\n\næ— ç¼“å†²ï¼ˆç«‹å³åˆ·æ–°ï¼‰\nè¡Œç¼“å†²ï¼ˆé€è¡Œåˆ·æ–°ï¼‰\nå…¨ç¼“å†²ï¼ˆç¼“å­˜åŒºæ»¡ï¼Œåˆ·æ–°ï¼‰\n\nç‰¹æ®Šæƒ…å†µ\n\nè¿›ç¨‹é€€å‡ºï¼ˆåˆ·æ–°ï¼‰\nç”¨æˆ·è°ƒç”¨å‡½æ•°ï¼Œå¼ºåˆ¶åˆ·æ–°\n\nåˆ·æ–°ä¸å­è¿›ç¨‹void test3()&#123;    const char*str1=&quot;test printf\\n&quot;;    const char*str2=&quot;test fprintf\\n&quot;;    const char*str3=&quot;test fputs\\n&quot;;    const char*str4=&quot;test write\\n&quot;;    //Cè¯­è¨€    printf(str1);//è¿™æ ·å†™ä¹Ÿæ˜¯okçš„    fprintf(stdout,str2);    fputs(str3,stdout);    //ç³»ç»Ÿæ¥å£    write(stdout-&gt;_fileno,str4,strlen(str4));    //å­è¿›ç¨‹åˆ›å»º    fork();&#125;\n\nä¸Šé¢çš„ä»£ç ï¼Œä¼šå‡ºç°ä¸¤ç§è¿è¡Œæƒ…å†µ\n\nå¦‚æœç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Šï¼Œæ‰“å°çš„é¡ºåºå’Œå†…å®¹éƒ½æ˜¯æ­£ç¡®çš„\nå¦‚æœé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œå´å‘ç°Cè¯­è¨€æ‰“å°çš„å†…å®¹éƒ½å¤šæ‰“äº†ä¸€æ¬¡ï¼\n\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./testtest printftest fprintftest fputstest write[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./test &gt; log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txttest writetest printftest fprintftest fputstest printftest fprintftest fputs[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\nåˆ·æ–°çš„æœ¬è´¨ï¼Œå…¶å®å°±æ˜¯æŠŠç¼“å†²åŒºä¸­æ•°æ®ï¼Œè°ƒç”¨writeæ¥å£é€šè¿‡æ“ä½œç³»ç»Ÿå†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚è€ŒFILEå†…éƒ¨çš„ç¼“å†²åŒºï¼Œæ˜¯å±äºçˆ¶è¿›ç¨‹å†…éƒ¨çš„æ•°æ®ã€‚\nå½“æˆ‘ä»¬åœ¨åˆ·æ–°ä¹‹å‰forkåˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´\nç»“æœå°±æ˜¯çˆ¶è¿›ç¨‹ã€å­è¿›ç¨‹å„åˆ·æ–°ä¸€æ¬¡ã€‚äºæ˜¯å°±å‡ºç°äº†ä¸Šé¢çš„Cè¯­è¨€çš„å†…å®¹å¤šäº†ä¸€ä»½çš„ç°è±¡ï¼\n\n4.5 ç®€å•æ¨¡æ‹Ÿå®ç°ç¼“å†²åŒºï¼Œæœ¬è´¨å°±æ˜¯Cè¯­è¨€åœ¨æ–‡ä»¶çš„ç»“æ„ä½“ä¸­ç»´æŠ¤çš„ä¸€ä¸ªæ•°ç»„ã€‚åŒæ—¶ç»´æŠ¤äº†å¤šç§åˆ·æ–°ç­–ç•¥ï¼Œåœ¨ä¸åŒçš„æ—¶åˆ»å°†è¯¥æ•°ç»„çš„å†…å®¹è°ƒç”¨ç³»ç»Ÿæ¥å£writeå†™å…¥æ–‡ä»¶\nè¿™é‡Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€å•çš„MyFILEç»“æ„ä½“ï¼Œå†…éƒ¨å°è£…æ–‡ä»¶æè¿°ç¬¦ã€åˆ·æ–°ç­–ç•¥ã€ç¼“å†²åŒº\n#define NONE_FLUSH 0x0 //æ— åˆ·#define LINE_FLUSH 0x1 //è¡Œåˆ·#define FULL_FLUSH 0x2 //å…¨ç¼“å­˜typedef struct MyFILE&#123;    int _fileno;    char _buffer[NUM];    int _end;//ç¼“å†²åŒºç»“å°¾    int _fflags; //åˆ·æ–°ç­–ç•¥&#125;MyFILE;\n\næœ‰äº†è‡ªå·±çš„æ–‡ä»¶ç»“æ„ä½“ï¼Œå¯¹åº”çš„ä¹Ÿéœ€è¦åˆ†è£…ä¸€ä¸‹ç³»ç»Ÿçš„open/read/write/closeç­‰æ¥å£ï¼Œè¿˜æœ‰fflushç”¨äºå¼ºåˆ¶åˆ·æ–°\n\nå°è£…æ¥å£ä¸ºäº†åšåˆ°å°½é‡ç®€å•ï¼Œè¿™é‡Œæš‚æ—¶åªå°è£…r/w/aä¸‰ç§æ‰“å¼€æ–¹æ³•\nMyFILE *my_fopen(const char *filename, const char *method)&#123;    assert(filename);    assert(method);    int flags = O_RDONLY;    if(strcmp(method, &quot;r&quot;) == 0)    &#123;        flags = O_RDONLY;    &#125;    else if(strcmp(method, &quot;w&quot;) == 0)    &#123;        flags = O_WRONLY | O_CREAT | O_TRUNC;    &#125;    else if(strcmp(method, &quot;a&quot;) == 0)    &#123;        flags = O_WRONLY | O_CREAT | O_APPEND;    &#125;    int fileno = open(filename, flags, 0666);    if(fileno &lt; 0)    &#123;        return NULL;    &#125;    MyFILE *fp = (MyFILE *)malloc(sizeof(MyFILE));    if(fp == NULL) return fp;    memset(fp, 0, sizeof(MyFILE));    fp-&gt;_fileno = fileno;    fp-&gt;_fflags |= LINE_FLUSH;//é»˜è®¤è¡Œç¼“å†²    fp-&gt;_end = 0;    return fp;&#125;\n\nè¿™é‡Œæš‚æ—¶åªç”¨è¡Œç¼“å†²å’Œå…¨ç¼“å†²æ¥ä½“éªŒä¸€ä¸‹ç¼“å†²åŒºçš„ä½œç”¨ã€‚åŒæ—¶åªå¯¹å­—ç¬¦ä¸²ç»“å°¾çš„\\nè¿›è¡Œäº†åˆ¤æ–­ï¼Œæƒ…å†µä¸å¤Ÿå…¨é¢ã€‚\n\nè¿™é‡Œå…¶å®æˆ‘å¾ˆå¥½å¥‡ï¼ŒCåº“é‡Œé¢æ˜¯æ€ä¹ˆå¤„ç†\\nçš„æï¼›æ€»ä¸èƒ½ç”¨éå†å§ï¼Ÿé‚£æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ã€‚ä¸ªäººçŒœæµ‹æ˜¯å’Œé¢„å…ˆè®¾ç½®çš„ç‰¹æ®Šå­—ç¬¦æœ‰å…³ç³»ã€‚\n\nvoid my_fwrite(MyFILE *fp, const char *start, int len)&#123;    assert(fp);    assert(start);    assert(len &gt; 0);    //å…ˆå†™å…¥åˆ°ç¼“å†²åŒºé‡Œé¢    strncpy(fp-&gt;_buffer+fp-&gt;_end, start, len); //å°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒºäº†    fp-&gt;_end += len;    if(fp-&gt;_fflags &amp; NONE_FLUSH)    &#123;&#125;    else if(fp-&gt;_fflags &amp; LINE_FLUSH)    &#123;        //è¿™é‡Œçš„åˆ¤æ–­åªæ˜¯æµ‹è¯•ï¼Œå®é™…ä¸Šè¿˜éœ€è¦åˆ¤æ–­ä¸­é—´æœ‰æ— \\n        if(fp-&gt;_end &gt; 0 &amp;&amp; fp-&gt;_buffer[fp-&gt;_end-1] == &#x27;\\n&#x27;)        &#123;            //å†™å…¥åˆ°å†…æ ¸ä¸­            write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);            fp-&gt;_end = 0;            syncfs(fp-&gt;_fileno);        &#125;    &#125;    else if(fp-&gt;_fflags &amp; FULL_FLUSH)    &#123;//æ»¡äº†åˆ·æ–°        if(fp-&gt;_end &gt; 0 &amp;&amp; fp-&gt;_end==NUM)        &#123;            //å†™å…¥åˆ°å†…æ ¸ä¸­            write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);            fp-&gt;_end = 0;            syncfs(fp-&gt;_fileno);        &#125;    &#125;&#125;\n\nè¿™é‡Œæœ‰ä¸€ä¸ªæ–°æ¥è§¦çš„å‡½æ•°syncfs\nint syncfs(int fd);\n\nè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œç”¨äºå°†æ–‡ä»¶å†…æ ¸ç¼“å†²åŒºå†…çš„æ•°æ®å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ã€‚\nå‰é¢æˆ‘ä»¬æåˆ°çš„ç¼“å†²åŒºï¼Œä¸€ç›´è¯´çš„éƒ½æ˜¯Cè¯­è¨€å†…éƒ¨ç»´æŠ¤çš„ã€‚ä»è¿™ä¸ªæ¥å£ä¹Ÿèƒ½çœ‹å‡ºï¼Œæ“ä½œç³»ç»ŸåŒæ ·å¯¹æ–‡ä»¶è¿›è¡Œäº†ç¼“å†²åŒºçš„ç»´æŠ¤ã€‚\n\nvoid my_fflush(MyFILE *fp)&#123;    assert(fp);    if(fp-&gt;_end &gt; 0)    &#123;        write(fp-&gt;_fileno, fp-&gt;_buffer, fp-&gt;_end);        fp-&gt;_end = 0;        syncfs(fp-&gt;_fileno);    &#125;&#125;void my_fclose(MyFILE *fp)&#123;    my_fflush(fp);    close(fp-&gt;_fileno);    free(fp);&#125;\n\nè¿è¡Œæµ‹è¯•int main()&#123;    MyFILE *fp = my_fopen(&quot;log.txt&quot;, &quot;w&quot;);    if(fp == NULL)    &#123;        printf(&quot;my_fopen error\\n&quot;);        return 1;    &#125;        const char *a = &quot;hello my 111\\n&quot;;    my_fwrite(fp, a, strlen(a));    printf(&quot;æ¶ˆæ¯ç«‹å³åˆ·æ–°\\n&quot;);    sleep(3);    const char *b = &quot;hello my 222 &quot;;    my_fwrite(fp, b, strlen(b));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    const char *c = &quot;hello my 333 &quot;;    my_fwrite(fp, c, strlen(c));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    const char *d = &quot;end\\n&quot;;    my_fwrite(fp, d, strlen(d));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªæ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    sleep(3);    my_fclose(fp);    printf(&quot;ç¨‹åºç»“æŸ\\n&quot;);&#125;\n\nåˆšå¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å†™å…¥äº†ä¸€ä¸ª\\nç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå…¶ç«‹é©¬å†™å…¥åˆ°äº†æ–‡ä»¶ä¸­\n\néšåå†™å…¥äº†ä¸¤ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²ï¼Œæ–‡ä»¶ä¸­æ²¡æœ‰å‡ºç°ç»“æœ\n\n\nè€Œå½“æˆ‘ä»¬å†™å…¥ä¸€ä¸ªæ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²åï¼Œç¼“å†²åŒºçš„å†…å®¹å°±åŒæ—¶è¢«å†™å…¥åˆ°æ–‡ä»¶ä¸­äº†ï¼\n\nå­è¿›ç¨‹æµ‹è¯•é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æµ‹è¯•ä¸€ä¸‹å­è¿›ç¨‹æ˜¯å¦ä¼šå‡ºç°åˆ·æ–°ä¸¤æ¬¡çš„æƒ…å†µ\nvoid test2(MyFILE * fp)&#123;    const char *s = &quot;-test &quot;;    my_fwrite(fp, s, strlen(s));    printf(&quot;å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²\\n&quot;);    fork();&#125;int main()&#123;    MyFILE *fp = my_fopen(&quot;log.txt&quot;, &quot;w&quot;);    if(fp == NULL)    &#123;        printf(&quot;my_fopen error\\n&quot;);        return 1;    &#125;    //test1(fp);    test2(fp);    //æ¨¡æ‹Ÿè¿›ç¨‹é€€å‡º    my_fclose(fp);    printf(&quot;ç¨‹åºç»“æŸ\\n&quot;);&#125;\n\nç»“æœå¦‚æˆ‘ä»¬æ‰€æ–™ï¼Œæ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤ä¸ª-test  ï¼ŒåŸå› åœ¨4.4ä¸­å·²åšè§£é‡Š\n[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ ./test1å†™å…¥äº†ä¸€ä¸ªä¸æ»¡è¶³åˆ·æ–°æ¡ä»¶çš„å­—ç¬¦ä¸²ç¨‹åºç»“æŸç¨‹åºç»“æŸ[muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ cat log.txt-test -test [muxue@bt-7274:~/git/linux/code/22-10-27_buffer]$ \n\n\n5.æ–‡ä»¶ç³»ç»Ÿä¹‹å‰æˆ‘ä»¬æåˆ°çš„è¿™äº›æ•°æ®ï¼Œéƒ½æ˜¯å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¾¿è¦æ¥äº†è§£ä¸€ä¸‹æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•ç®¡ç†ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚\n\n5.1 ç£ç›˜çš„ç‰©ç†ç»“æ„ä»¥æœºæ¢°ç¡¬ç›˜ä¸ºä¾‹ï¼Œå…¶å†…éƒ¨ä¸»è¦ç”±ç›˜ç‰‡å’Œç£å¤´ç»„æˆã€‚\n\nå½“æˆ‘ä»¬æ”¹å˜ç£ç›˜ä¸ŠæŸä¸€ä¸ªä½ç½®çš„NSæï¼Œå°±å¥½æ¯”æ›´æ”¹äº†æ­¤å¤„ä¿å­˜çš„æ•°æ®0/1\n\nåœ¨æœºæ¢°ç¡¬ç›˜ä¸­ï¼Œä¸€ä¸ªç›˜ç‰‡å¯¹åº”ä¸€ä¸ªç£å¤´\n\næ¯ä¸ªç›˜ç‰‡è¢«åˆ†ä¸ºè¯ºå¹²ä¸ªåŒå¿ƒåœ†ï¼Œæ¯ä¸€ä¸ªåŒå¿ƒåœ†å°±æ˜¯ä¸€ä¸ªç£é“\næ¯ä¸ªç£é“è¢«åˆ’åˆ†ä¸ºè¯ºå¹²æ®µï¼ˆæ‰‡åŒºï¼‰\næ¯ä¸ªæ‰‡åŒºçš„å­˜å‚¨å®¹é‡ä¸º512å­—èŠ‚\n\nç”±æ­¤å¯è§ï¼Œå½“æˆ‘ä»¬è¯»å†™æœºæ¢°ç¡¬ç›˜çš„æ—¶å€™ï¼Œéœ€è¦å»æ‰¾æŸä¸€ä¸ªç›˜é¢ã€æŸä¸€ä¸ªç£é“çš„æŸä¸€ç‰‡æ‰‡åŒºï¼Œå°±èƒ½æ‰¾åˆ°è¯¥æ‰‡åŒºçš„æ•°æ®ï¼\n\nç›˜é¢ï¼ˆç£é¢ï¼‰æœ‰è‡ªå·±å¯¹åº”çš„ç£å¤´\nç£é“æ˜¯ç”±è·ç¦»åœ†å¿ƒçš„åŠå¾„å†³å®šçš„\næ‰‡åŒºæ˜¯ç”±ç›˜é¢æ—‹è½¬å†³å®šçš„\n\nè€Œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿæ‰€ä½œçš„å·¥ä½œï¼Œä¾¿æ˜¯å°†æ–‡ä»¶å’Œå…¶å¯¹åº”çš„æ‰‡åŒºè”ç³»èµ·æ¥ã€‚ç”¨ä¸Šé¢æåˆ°çš„åŠæ³•ï¼Œä¾¿å¯ä»¥æŸ¥æ‰¾åˆ°æ¯ä¸€ä¸ªæ‰‡åŒºï¼\n\nè¿™ç§æŸ¥æ‰¾æ•°æ®ä½ç½®çš„æ“ä½œï¼Œè¢«ç§°ä¸ºCHSå¯»å€ï¼ŒCHSåˆ†åˆ«å¯¹åº”ç£æŸ±ã€ç£é¢ã€æ‰‡åŒº\n5.2 CHSå’ŒLBA\næ›´è¯¦ç»†çš„è§£æå‚è€ƒï¼šhttps://blog.csdn.net/jadeshu/article/details/89072512\n\nå‡è®¾æˆ‘ä»¬æŠŠä¸€ä¸ªç£é“çš„æ•°æ®â€œæ‹‰ç›´â€ï¼Œå…¶å°±å˜æˆäº†ä¸€æ¡ç›´çº¿ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¯ä»¥æŠŠæ¯ä¸€ä¸ªç›˜é¢ä¸Šçš„æ¯ä¸€æ¡ç£é“éƒ½â€œæ‹‰ç›´â€\n\næœ€ç»ˆï¼Œå…¶ä¸å°±å˜æˆäº†å’Œä¸Šå›¾ç±»ä¼¼çš„â€œé•¿æ¡çŠ¶â€äº†å—ï¼Ÿæˆ‘ä»¬å­¦è¿‡çš„ä»€ä¹ˆæ•°æ®ç»“æ„ä¹Ÿæ˜¯çº¿æ€§é•¿æ¡çš„æï¼Ÿ\næ²¡é”™ï¼å°±æ˜¯æ•°ç»„ï¼\næ­¤æ—¶ï¼Œå¯¹ç£ç›˜æ–‡ä»¶çš„ä¿®æ”¹ï¼Œå°±å¯ä»¥æŠ½è±¡æˆå¯¹å†…æ ¸ä¸­ä¸€ä¸ªæ•°ç»„çš„å¢åˆ æŸ¥æ”¹æ“ä½œï¼\nè¿™ç§æŠ½è±¡ä¹‹åçš„ç£ç›˜ï¼Œè¢«ç§°ä¸ºLBAé€»è¾‘å—åœ°å€ï¼Œä»–ä»¬ä¹‹ä¸­æœ‰ä¸€ä¸ªè½¬æ¢å…³ç³»ğŸ‘‡\nç”¨Cè¡¨ç¤ºå½“å‰æŸ±é¢å·ï¼ŒHè¡¨ç¤ºå½“å‰ç£å¤´å·ï¼ŒSè¡¨ç¤ºå½“å‰æ‰‡åŒºå·ï¼ŒCSè¡¨ç¤ºèµ·å§‹æŸ±é¢å·ï¼ŒHSè¡¨ç¤ºèµ·å§‹ç£å¤´å·ï¼ŒSSè¡¨ç¤ºèµ·å§‹æ‰‡åŒºå·ï¼ŒPSè¡¨ç¤ºæ¯ç£é“æœ‰å¤šå°‘ä¸ªæ‰‡åŒºï¼ŒPHè¡¨ç¤ºæ¯æŸ±é¢æœ‰å¤šå°‘ä¸ªç£é“ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š$$LBA &#x3D; ( C â€“ CS ) * PH * PS + ( H â€“ HS ) * PS + ( S â€“ SS )$$é€šè¿‡è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ä»¬å°±èƒ½å°†ç£ç›˜ä¸­çš„ä¸€ä¸ªåŒºå—çš„æ•°æ®ï¼Œè½¬ä¸ºæ•°ç»„ä¸­çš„ä¸€ä¸ªä¸‹æ ‡ï¼Œæ¥æ–¹ä¾¿æ“ä½œç³»ç»Ÿè®¿é—®$$C &#x3D; LBA &#x2F; ( PH * PS ) + CS$$\n$$H &#x3D; ( LBA &#x2F; PS ) % PH + HS$$\n$$S &#x3D; LBA &#x2F; PS + SS$$ä¿®æ”¹äº†æ•°ç»„ä¸­çš„æ•°æ®ä¹‹åï¼Œæ“ä½œç³»ç»Ÿå°†LBAå¯¹åº”çš„CHSåœ°å€ç®—å‡ºæ¥äº¤ç»™ç£ç›˜ï¼Œè®©ç£ç›˜æ¥ä¿®æ”¹æŒ‡å®šæ‰‡åŒºçš„æ•°æ®ï¼Œä¾¿å®ç°äº†ä¿å­˜æ•°æ®åˆ°ç£ç›˜ä¸­çš„æ“ä½œ\n\n5.3 IOçš„åŸºæœ¬å•ä½å¯¹äºæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œä¸€æ¬¡IOçš„åŸºæœ¬å•ä½æ˜¯4kbï¼Œä¹Ÿå°±æ˜¯8ä¸ªæ‰‡åŒº8*512å­—èŠ‚\n\nç£ç›˜çš„åŸºæœ¬å•ä½ï¼šæ‰‡åŒºï¼ˆä¸€èˆ¬ä¸º512å­—èŠ‚)\næ–‡ä»¶ç³»ç»Ÿè®¿é—®ç£ç›˜çš„åŸºæœ¬å•ä½ï¼š4kb\n\nåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œä¼šå¯¹å‰é¢æåˆ°çš„é‚£ä¸ªâ€œæ•°ç»„â€è¿›ä¸€æ­¥æŠ½è±¡ï¼Œ8ä¸ªæ‰‡åŒºä¼šè¢«åˆå¹¶æˆä¸€ä¸ª4KBçš„åŒºå—ï¼Œç”¨äºå•æ¬¡IOã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†æ¯ä¸€ä¸ªåŒºå—ï¼Œåˆå°†å¤šä¸ªåŒºå—åˆå¹¶ï¼Œä½œä¸ºä¸€ä¸ªåˆ†åŒºè¿›è¡Œç®¡ç†\nè¿™ä¾¿æ˜¯æˆ‘ä»¬ç”µè„‘ä¸ŠåŒä¸€å—ç‰©ç†ç¡¬ç›˜å¯ä»¥å¯¹åº”ä¸åŒåˆ†åŒºçš„æ¥æºäº†ï¼\n\nä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿè¦ä»¥4kbä½œä¸ºIOçš„åŸºæœ¬å•ä½å‘¢ï¼Ÿ\n\nhttps://www.51cto.com/article/617936.html\n\nåœ¨ä¸Šæ–‡ä¸­æåˆ°ï¼ŒLinuxé€‰æ‹©4KBä½œä¸ºâ€œé¡µæ“ä½œâ€ï¼ˆå³è¯»å–å†…å­˜ï¼Œä»¥åŠä»å†…å­˜å†™å…¥ç£ç›˜ï¼‰çš„åŸºæœ¬å•ä½ç®—æ˜¯ä¸€ä¸ªå†å²é—ç•™é—®é¢˜äº†ã€‚\n\nè¿‡å°çš„é¡µå¤§å°ä¼šå¸¦æ¥è¾ƒå¤§çš„å¯»å€å¼€é”€\nè¿‡å¤§çš„é¡µå¤§å°æµªè´¹å†…å­˜ç©ºé—´ï¼Œé€ æˆå†…å­˜ç¢ç‰‡\n\nè€Œå½“åˆè¿™ä¹ˆé€‰æ‹©ï¼Œè‚¯å®šæ˜¯æœ‰å…¶åŠŸç”¨çš„ï¼\n\nèƒ½æé«˜IOæ•ˆç‡ï¼Œä¸éœ€è¦å¤šæ¬¡å†™å…¥512å­—èŠ‚çš„æ•°æ®\nä¸è®©æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡å’Œç£ç›˜æœ‰å¼ºç›¸å…³æ€§ï¼Œè§£è€¦åˆ\n\nå¯¹äºç¬¬äºŒç‚¹è¿›è¡Œè¯´æ˜ï¼Œå¦‚æœæ–‡ä»¶ç³»ç»Ÿä¸åœ¨æ‰‡åŒºå¤–é¢å¤–é€‰æ‹©ä¸€ä¸ªç©ºé—´ä½œä¸ºIOçš„åŸºæœ¬å•ä½ï¼Œé‚£ä¹ˆå…¶è®¾è®¡å¿…å®šä¼šä¾èµ–äºç£ç›˜æ‰‡åŒºå¤§å°ã€‚\nå¦‚æœæŸä¸€å¤©ï¼Œæ‰€æœ‰ç£ç›˜çš„æ‰‡åŒºå¤§å°éƒ½ä»512å­—èŠ‚å˜æˆäº†1024å­—èŠ‚ï¼Œé‚£å°±å¿…é¡»è¦ä¿®æ”¹æ“ä½œç³»ç»Ÿçš„æºç ï¼Œæ‰èƒ½æ­£ç¡®è®¿é—®æ–°çš„ç¡¬ç›˜ã€‚åŒæ—¶è¿˜éœ€è¦å¯¹æ—§ç›˜åšä¼˜åŒ–ï¼Œå¯è°“äº‹å€åŠŸåŠã€‚\nè€Œæå‰è®¾å®šå¥½ä¸€ä¸ªæ›´å¤§çš„IOåŸºæœ¬å•ä½ï¼Œä¾¿æ˜¯é¿å…äº†ç£ç›˜å˜åŠ¨è€Œé€ æˆçš„æ— æ³•è®¿é—®ã€‚æœ‰äº†è¿™ä¸ªæ›´å¤§çš„IOåŸºæœ¬å•ä½ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç£ç›˜çš„æ‰‡åŒºç»„æˆä¸€ä¸ª4kbå¤§å°çš„ç©ºé—´è¿›è¡ŒIOï¼Œä¸ç”¨ç®¡å…¶ç£ç›˜æ‰‡åŒºå¤§å°åˆ°åº•æ˜¯å¤šå°‘äº†ã€‚\n\nå½“ç„¶ï¼Œå¦‚æœå“ªå¤©æ‰‡åŒºå¤§å°å¤§äº4kbäº†ï¼Œææ€•å°±å¾—æ”¹æºç äº†ï¼Ÿ\nè¿™éƒ¨åˆ†æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚å‘¢ï¼Œä»¥ä¸Šåªæ˜¯ä¸ªäººæµ…æ˜¾çš„ç†è§£\n\n\n5.4 ç³»ç»Ÿç»“æ„ä¸‹å›¾å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä¸ªç£ç›˜æ˜¯å¦‚ä½•è¢«æ–‡ä»¶ç³»ç»Ÿâ€œæ‹†åˆ†â€çš„\né¦–å…ˆæ˜¯åˆ†åŒºï¼Œæ¯ä¸€ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªBootSectorå’Œæ–‡ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬ä¸»è¦å…³æ³¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå•ä¸ªBlock Groupé‡Œé¢çš„å†…å®¹\n\nlinuxé‡‡ç”¨çš„æ˜¯æ–‡ä»¶å†…å®¹ã€æ–‡ä»¶å±æ€§åˆ†å¼€å­˜æ”¾çš„å­˜å‚¨æ–¹å¼\n\næ–‡ä»¶çš„å±æ€§æ˜¯ç¨³å®šçš„\næ–‡ä»¶çš„å†…å®¹åœ¨ä¸æ–­å¢å¤š\n\ndata blocksï¼šä¿å­˜æ•°æ®å†…å®¹inode tableï¼šä¿å­˜æ–‡ä»¶çš„inodeinode bitmapï¼šä½å›¾ç»“æ„ï¼ŒæŒ‡ç¤ºinodeæ˜¯å¦è¢«ä½¿ç”¨GDTï¼šå…¨ç§°group descriptor tableï¼Œä¿å­˜äº†inodeä¸ªæ•°ã€èµ·å§‹inodeç¼–å·ã€å¤šå°‘inodeè¢«ä½¿ç”¨ã€å¤šå°‘data blocksè¢«ä½¿ç”¨â€¦â€¦Super Blocksï¼šè¯¥Block Groupæ–‡ä»¶ç³»ç»Ÿçš„é¡¶å±‚æ•°æ®ç»“æ„\n\ninodeè¿™é‡Œæåˆ°çš„inodeæ˜¯linuxä¸‹æ¯ä¸€ä¸ªæ–‡ä»¶çš„ç‹¬ç«‹ç¼–å·ã€‚linuxå¹¶ä¸ä»¥æ–‡ä»¶åæ¥è¯†åˆ«æ–‡ä»¶ï¼Œè€Œæ˜¯ç”¨æ–‡ä»¶ç¼–å·æ¥è¯†åˆ«å”¯ä¸€çš„æ–‡ä»¶çš„ã€‚\ninodeä¿å­˜äº†ä¸€ä¸ªæ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯\n\næ–‡ä»¶çš„å±æ€§\nrwxæƒé™\næ‰€å±ç”¨æˆ·ã€æ‰€å±ç»„\nç¡¬é“¾æ¥ä¸ªæ•°\næ–‡ä»¶è®¿é—®ã€ä¿®æ”¹ã€åˆ›å»ºçš„æ—¶é—´\næŒ‡å‘data blocksä¸­æ–‡ä»¶çš„å†…å®¹\n\n\nstruct inodeçš„ä½ç½®åœ¨/include/linux/fs.h\n\n\næŸ¥çœ‹inodeç¼–å·çš„æ–¹æ³•ä¸ºls -iï¼Œå…¶ä¸­è¿™ä¸²æ•°å­—ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„inodeç¼–å·\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -i1453833 makefile  1453832 test.cpp\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œ.å’Œ..è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¹Ÿæ˜¯æœ‰è‡ªå·±çš„inodeç¼–å·çš„ï¼Œå°è¯äº†linuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®å½•\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -ilatotal 161453831 drwxrwxr-x  2 muxue muxue 4096 Nov  2 09:58 .1443736 drwxrwxr-x 16 muxue muxue 4096 Nov  2 09:20 ..1453833 -rw-rw-r--  1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r--  1 muxue muxue  437 Nov  2 09:35 test.cpp\n\nstatå‘½ä»¤è¿˜å¯ä»¥ç”¨statå‘½ä»¤æ¥æŸ¥çœ‹å•ä¸ªæ–‡ä»¶çš„inodeä¿¡æ¯\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ stat test.cpp  File: â€˜test.cppâ€™  Size: 437             Blocks: 8          IO Block: 4096   regular fileDevice: fd01h/64769d    Inode: 1453832     Links: 1Access: (0664/-rw-rw-r--)  Uid: ( 1001/   muxue)   Gid: ( 1001/   muxue)Access: 2022-11-02 09:35:07.684160444 +0800Modify: 2022-11-02 09:35:04.328161202 +0800Change: 2022-11-02 09:35:04.328161202 +0800 Birth: -\n\ninodeå†…éƒ¨æœ‰ä¸€ä¸ªç»“æ„ï¼ŒæŒ‡å‘data blocksã€‚å‰é¢æåˆ°è¿‡ï¼Œæ–‡ä»¶ç³»ç»ŸIOçš„åŸºæœ¬å•ä½æ˜¯4KBï¼Œå¯¹åº”çš„ï¼Œä¸€ä¸ªblocksçš„å¤§å°å°±æ˜¯4KB\næ¯ä¸€ä¸ªæ–‡ä»¶éƒ½å¯¹åº”ä¸€ä¸ªinodeï¼Œè‡³å°‘å¯¹åº”ä¸€ä¸ªdata blocksï¼ˆinodeä¸­å‚¨å­˜äº†blocksç¼–å·ï¼‰\nå› ä¸ºinodeæ‰€èƒ½ä¿å­˜çš„ç¼–å·æœ‰é™ï¼Œæ‰€ä»¥å¯¹data blocksçš„ä¿å­˜åˆ†ä¸ºä¸¤ç§æƒ…å†µ\n\néƒ¨åˆ†data blocksç›´æ¥ä¿å­˜äº†æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœæ˜¯å°æ–‡ä»¶ï¼Œinodeä¸­ä¿å­˜çš„blockå°±è¶³å¤Ÿå­˜ä¸‹æ‰€æœ‰æ–‡ä»¶å†…å®¹äº†\nå¦‚æœæ˜¯å¤§æ–‡ä»¶ï¼Œinodeä¸­ä¸€éƒ¨åˆ†blocksä¼šç”¨æ¥ä¿å­˜è¯¥æ–‡ä»¶å‰©ä½™data blocksçš„ç¼–å·\n\nåœ¨å†…æ ¸ä¸­ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šå¯¹è¿™ä¸¤ç§æƒ…å†µè¿›è¡ŒåŒºåˆ†\næ³¨æ„\n\nå› ä¸ºæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½è‚¯å®šæœ‰ä¸€ä¸ªinodeä¸ä¹‹å¯¹åº”ï¼Œæ‰€ä»¥åˆ›å»ºç©ºæ–‡ä»¶ä¹Ÿæ˜¯å ç”¨ç£ç›˜ç©ºé—´çš„\nå¯èƒ½ä¼šå‡ºç°inodeè¢«ç”¨å®Œäº†ï¼Œç£ç›˜ç©ºé—´å´æ²¡æœ‰æ»¡çš„æƒ…å†µã€‚ä½†è¿™æ—¶å€™ä¹Ÿå·²ç»æ— æ³•åˆ›å»ºæ–°æ–‡ä»¶äº†\n\nğŸ˜‚ä½ å¯ä»¥å°è¯•å†™ä¸€ä¸ªwhile1å¾ªç¯ï¼Œä¸æ–­å¾€ç³»ç»Ÿä¸­åˆ›å»ºæ–°æ–‡ä»¶ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½è¾¾åˆ°è¿™ä¸ªä¸´ç•Œå€¼ï¼ˆå’³å’³ï¼Œè™½ç„¶å¥½ç©ï¼Œä½†å¹¶ä¸æ¨èä½ è¿™ä¹ˆåšï¼‰\n\næ–‡ä»¶åå­˜åœ¨å“ªå„¿ï¼Ÿå‰é¢æåˆ°è¿‡ï¼Œinodeä¿å­˜äº†æ–‡ä»¶çš„å±æ€§ï¼Œæ–‡ä»¶åæ˜¯å¦ä¸ºæ–‡ä»¶çš„å±æ€§å‘¢ï¼Ÿä¹Ÿç®—ï¼\nä½†inodeä¸­å¹¶ä¸ä¿å­˜æ–‡ä»¶åå­—ï¼\nå®é™…ä¸Šï¼Œæ–‡ä»¶åæ˜¯å­˜åœ¨è¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶å†…å®¹ä¸­çš„\n\nç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œæ–‡ä»¶å°±æœ‰æ–‡ä»¶å±æ€§+æ–‡ä»¶å†…å®¹\n\nå¯ä»¥ç†è§£ä¸ºï¼Œç›®å½•çš„å†…å®¹ä¿å­˜çš„æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œå…¶ä¸­keyä¸ºæ–‡ä»¶åï¼Œvalueä¸ºinodeç¼–å·\nè¿™ä¾¿æ˜¯ä¸ºä½•ä¸€ä¸ªç›®å½•ä¸­ä¸èƒ½å‡ºç°åŒåæ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸æ”¯æŒé”®å€¼å†—ä½™çš„map(cpp-stl)\nç›®å½•æƒé™æ—¢ç„¶ç›®å½•ä¹Ÿæ˜¯æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¹Ÿæœ‰è‡ªå·±çš„æ–‡ä»¶æƒé™\n\nhttps://blog.csdn.net/muxuen/article/details/125776348\n\nåœ¨æˆ‘ä¹‹å‰å…³äºlinuxæ–‡ä»¶æƒé™çš„è®²è§£ä¸­ï¼Œå°±æåˆ°äº†å’Œç›®å½•æœ‰å…³çš„æƒé™é—®é¢˜\n\nè¿›å…¥ç›®å½•éœ€è¦xæƒé™\nåˆ›å»ºæ–‡ä»¶éœ€è¦wæƒé™\næŸ¥çœ‹æ–‡ä»¶åéœ€è¦ræƒé™\n\näº†è§£æ–‡ä»¶ç³»ç»Ÿäº†ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“ä¸ºä»€ä¹ˆç›®å½•çš„æ“ä½œéœ€è¦è¿™äº›æƒé™äº†ã€‚åœ¨ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œæœ¬è´¨å°±æ˜¯åœ¨ä¿®æ”¹ç›®å½•æ‰€å¯¹åº”çš„æ–‡ä»¶å†…å®¹ï¼\n\n5.5 åˆ›å»º&#x2F;åˆ é™¤æ–‡ä»¶å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæ–‡ä»¶ç³»ç»Ÿåšäº†ä»€ä¹ˆæï¼Ÿ\n\nåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ç»“æ„ä½“ï¼Œå’Œå¯¹åº”çš„inodeç¼–å·\næ ¹æ®ç›®å½•çš„inodeï¼Œæ‰¾åˆ°è¯¥ç›®å½•çš„data blocks\nå°†æ–‡ä»¶åå’Œinodeç¼–å·çš„å¯¹åº”å…³ç³»å†™å…¥åˆ°ç›®å½•çš„æ•°æ®å—ä¸­\n\nå½“æˆ‘ä»¬åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼š\n\næ“ä½œç³»ç»Ÿåªéœ€è¦åˆ é™¤å½“å‰ç›®å½•ä¸‹inodeå’Œæ–‡ä»¶åçš„å¯¹åº”å…³ç³»\nåŒæ—¶åœ¨inode bitmapä¸­å°†å¯¹åº”çš„inodeç½®ä¸º0ï¼ˆä»£è¡¨æ²¡æœ‰ä½¿ç”¨ï¼‰\n\nè¿™æ ·å°±ç®—æ˜¯åˆ é™¤è¯¥æ–‡ä»¶äº†ï¼å¥½æ¯”æˆ‘ä»¬æ“ä½œçº¿æ€§è¡¨è¿›è¡Œå°¾åˆ æ“ä½œï¼Œåªæ˜¯å¯¹size-1ï¼Œå¹¶æ²¡æœ‰çœŸçš„æŠŠè¯¥ä½ç½®çš„æ•°æ®åˆ é™¤\n\nè¿™ä¾¿èƒ½è§£é‡Šä¸ºä»€ä¹ˆå¤åˆ¶ç²˜è´´ä¸€ä¸ªæ–‡ä»¶çš„é€Ÿåº¦è¿œæ…¢äºåˆ é™¤æ–‡ä»¶çš„é€Ÿåº¦\nå› ä¸ºæ²¡æœ‰å°†æ–‡ä»¶çš„inodeå’Œdata blockæ¸…ç©ºï¼Œæ‰€ä»¥ç»™æˆ‘ä»¬æ¢å¤æ•°æ®å¸¦æ¥äº†å¯èƒ½ã€‚åªè¦è¯¥æ–‡ä»¶ä¹‹å‰ä½¿ç”¨çš„inode/data blockå¹¶æ²¡æœ‰è¢«å¤å†™ï¼Œæˆ‘ä»¬å°±æœ‰å¯èƒ½è¿˜åŸå‡ºè¯¥æ–‡ä»¶çš„æ•°æ®ï¼\n\n\n6.è½¯ç¡¬é“¾æ¥åœ¨æœ€åˆå­¦ä¹ linuxå‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œå°±å·²ç»å­¦ä¹ è¿‡äº†lnåˆ›å»ºæ–‡ä»¶é“¾æ¥çš„æ“ä½œ\n\n è¿™éƒ¨åˆ†æˆ‘æ²¡æœ‰å†™åšå®¢ï¼Œå› ä¸ºç½‘ä¸Šçš„æ•™ç¨‹å®åœ¨æ˜¯å¤ªå¤šå•¦\n\nä½†æ˜¯å½“æ—¶å¹¶ä¸çŸ¥é“è½¯é“¾æ¥/ç¡¬é“¾æ¥åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå­¦ä¹ äº†æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œå›å¤´å†æ¥çœ‹çœ‹\n\n6.1 æŸ¥çœ‹æ–‡ä»¶ç¡¬é“¾æ¥ä¸ªæ•°ls -li\n\nå½“æˆ‘ä»¬æ‰§è¡Œä¸Šé¢è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªæ–‡ä»¶çš„å®Œæ•´å±æ€§\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -liatotal 161453831 drwxrwxr-x  2 muxue muxue 4096 Nov  2 09:58 .1443736 drwxrwxr-x 16 muxue muxue 4096 Nov  2 09:20 ..1453833 -rw-rw-r--  1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r--  1 muxue muxue  437 Nov  2 09:35 test.cpp\n\nå¯ä¹‹å‰ä¸€ç›´æ²¡æœ‰å»äº†è§£ï¼Œè¿™ä¸ªç¬¬ä¸‰åˆ—çš„2  16   1  1 åˆ°åº•æ˜¯ä»€ä¹ˆç©æ„å‘¢ï¼Ÿ\nä¸å–å…³å­ï¼Œå‰é¢æåˆ°inodeä¼šä¿å­˜æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼Œç¬¬ä¸‰åˆ—çš„æ•°å­—ï¼Œä»£è¡¨çš„ä¾¿æ˜¯è¯¥æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼\nè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ mkdir test_r[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ touch test_f[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ ls -litotal 121453833 -rw-rw-r-- 1 muxue muxue   81 Nov  2 09:58 makefile1453832 -rw-rw-r-- 1 muxue muxue  437 Nov  2 09:35 test.cpp1453836 -rw-rw-r-- 1 muxue muxue    0 Nov  2 16:07 test_f1449813 drwxrwxr-x 2 muxue muxue 4096 Nov  2 16:07 test_r[muxue@bt-7274:~/git/linux/code/22-10-31_stdout_err]$ \n\nä½ ä¼šå‘ç°ï¼Œæ–‡ä»¶å¤¹é»˜è®¤çš„ç¡¬é“¾æ¥æ•°æ˜¯2ï¼Œè€Œæ–‡ä»¶é»˜è®¤çš„ç¡¬é“¾æ¥æ•°æ˜¯1\nä¸ºä»€ä¹ˆï¼Ÿå½“æˆ‘ä»¬cdè¿›å…¥ç›®å½•çš„æ—¶å€™ï¼Œlinuxä¾¿ä¼šæ‰¾åˆ°åº•å±‚çš„inodeï¼Œè¿›å…¥è¯¥inodeæ‰€å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚\nå¦‚æœæƒ³çŸ¥é“ä¸€ä¸ªç›®å½•çš„ç›®å½•åï¼Œæˆ‘ä»¬å¿…é¡»è¦å»è¯¥ç›®å½•çš„ä¸Šçº§æ‰¾ã€‚\nä¸ºäº†æ–¹ä¾¿æŸ¥æ‰¾å½“å‰ç›®å½•ä»¥åŠå…¶ä¸Šçº§ç›®å½•çš„inodeï¼Œæ¯ä¸€ä¸ªç›®å½•ä¸‹é¢ï¼Œé»˜è®¤éƒ½ä¼šæœ‰..å’Œ.è¿™ä¸¤ä¸ªç›®å½•æ–‡ä»¶ï¼\nè¿›å…¥åˆšåˆšæˆ‘ä»¬æ–°åˆ›çš„æ–‡ä»¶å¤¹çœ‹çœ‹ï¼Œä½ ä¼šå‘ç°ï¼Œ.æ–‡ä»¶çš„inodeå°±æ˜¯è¯¥æ–‡ä»¶å¤¹çš„inodeï¼\n\nä»è¿™é‡Œä¾¿å¼•å‡ºäº†è½¯è¿æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«\n6.2 è½¯ç¡¬é“¾æ¥åŒºåˆ«è¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ªtest.cæ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 41453842 -rw-rw-r-- 1 muxue muxue 78 Nov  2 16:13 test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nåŒæ—¶å¯¹è¯¥æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥å’Œè½¯è¿æ¥\nln -s æº ç›®æ ‡ #åˆ›å»ºè½¯è¿æ¥ln æº ç›®æ ‡ #åˆ›å»ºç¡¬é“¾æ¥\n\nåº·åº·ç»“æœğŸ‘‡\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ln -s test.c testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 41453842 -rw-rw-r-- 1 muxue muxue 78 Nov  2 16:13 test.c1453843 lrwxrwxrwx 1 muxue muxue  6 Nov  2 16:14 testSoft.c -&gt; test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ln test.c testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -litotal 81453842 -rw-rw-r-- 2 muxue muxue 78 Nov  2 16:13 test.c1453842 -rw-rw-r-- 2 muxue muxue 78 Nov  2 16:13 testHard.c1453843 lrwxrwxrwx 1 muxue muxue  6 Nov  2 16:14 testSoft.c -&gt; test.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nä½ èƒ½çœ‹å‡ºåŒºåˆ«å—ï¼Ÿ\n\nè½¯é“¾æ¥çš„inodeå’Œæºæ–‡ä»¶ä¸ç›¸åŒï¼Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„æ–‡ä»¶\nç¡¬é“¾æ¥çš„inodeå’Œæºæ–‡ä»¶ç›¸åŒï¼åŒæ—¶å®ƒä»¬çš„ç¡¬é“¾æ¥æ•°+1\n\næŠŠè¿™äº›æ–‡ä»¶éƒ½ä»¥æŒ‡é’ˆç†è§£ï¼Œä¼šæ›´æ–¹ä¾¿ä¸€äº›\n\n\nè½¯è¿æ¥çš„æ–‡ä»¶å†…å®¹æ˜¯æ‰€æŒ‡å‘æ–‡ä»¶çš„è·¯å¾„\nç¡¬é“¾æ¥åªæ˜¯åœ¨å½“å‰ç›®å½•ä¸‹æ–°å¢æ–‡ä»¶åå’Œinodeç¼–å·çš„æ˜ å°„å…³ç³»ï¼Œå¹¶å¯¹inodeä¸­ç¡¬é“¾æ¥ä¸ªæ•°+1\n\nå¦‚æœæˆ‘ä»¬åˆ é™¤äº†test.cï¼Œè½¯è¿æ¥å°±ä¼šå¤±æ•ˆï¼Œä½†ç¡¬é“¾æ¥å¹¶ä¸ä¼šï¼Œå› ä¸ºç¡¬é“¾æ¥æœ¬èº«å’Œtest.cæ˜¯ä¸€ä¸ªä¸œè¥¿ï¼\n\nè€Œinodeä¸­å¯¹ç¡¬é“¾æ¥çš„è®¡æ•°ï¼Œå°±å¥½æ¯”C++ä¸­æ™ºèƒ½æŒ‡é’ˆçš„å¼•ç”¨è®¡æ•°ï¼Œå¦‚æœè¯¥è®¡æ•°ä¸º0ï¼Œå°±ä»£è¡¨è¿™ä¸ªæ–‡ä»¶éœ€è¦åˆ é™¤äº†ï¼\n\nè§£ç­”ï¼çŸ¥é“äº†åŒºåˆ«ï¼Œæˆ‘ä»¬ä¹Ÿä¾¿çŸ¥é“ä¸ºä½•ä¸€ä¸ªæ–°ç›®å½•çš„é»˜è®¤ç¡¬é“¾æ¥ä¸ªæ•°æ˜¯2äº†ï¼Œå…¶ä¾¿æ˜¯æ¯ä¸€ä¸ªç›®å½•éƒ½é»˜è®¤å¸¦çš„.æ–‡ä»¶ï¼Œç”¨äºæ ‡è¯†å½“å‰ç›®å½•çš„inodeï¼›å¦å¤–ä¸€ä¸ªæ˜¯è¯¥æ–‡ä»¶æœ¬èº«\n\næ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œé»˜è®¤éƒ½å’Œè‡ªå·±æ˜ å°„ï¼Œæ‰€ä»¥ç¡¬é“¾æ¥ä¸ªæ•°ä¸º1\n\nåŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•°ï¼Œå¿«é€ŸçŸ¥é“ä¸Šçº§ç›®å½•ä¸­æœ‰å¤šå°‘ä¸ªæ–‡ä»¶å¤¹ï¼ˆé™¤å»é»˜è®¤çš„.å’Œ..ï¼‰\nä¸Šçº§ç›®å½•å†…çš„æ–‡ä»¶å¤¹ä¸ªæ•° = å½“å‰ç›®å½•..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•° - 2æŸä¸€ä¸ªç›®å½•å†…çš„æ–‡ä»¶å¤¹ä¸ªæ•° = è¯¥ç›®å½•..æ–‡ä»¶çš„ç¡¬é“¾æ¥ä¸ªæ•° - 2\n\n6.3 unlinkå‘½ä»¤æˆ‘ä»¬å¯ä»¥é€šè¿‡unlinkå‘½ä»¤æ¥å–æ¶ˆé“¾æ¥\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ lstestHard.c  testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ unlink testSoft.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 121453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:39 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..1453842 -rw-rw-r--  1 muxue muxue   78 Nov  2 16:13 testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ \n\nunlinkä¹Ÿå¯ä»¥ç”¨æ¥åˆ é™¤æ­£å¸¸æ–‡ä»¶ï¼Œä½†ä¸€èˆ¬åªç”¨å®ƒæ¥åˆ é™¤é“¾æ¥æ–‡ä»¶ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 121453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:39 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..1453842 -rw-rw-r--  1 muxue muxue   78 Nov  2 16:13 testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ unlink testHard.c[muxue@bt-7274:~/git/linux/code/22-11-01_è½¯ç¡¬é“¾æ¥]$ ls -liatotal 81453838 drwxrwxr-x  2 muxue muxue 4096 Nov  2 16:40 .1443736 drwxrwxr-x 17 muxue muxue 4096 Nov  2 16:12 ..\n\n\nç»“è¯­linuxæ–‡ä»¶ç³»ç»Ÿçš„å†…å®¹ï¼Œåˆ°è¿™é‡Œå°±overè¾£ï¼åç»­å¦‚æœæœ‰ä»€ä¹ˆæ–°å¢çŸ¥è¯†ï¼Œä¼šæ¥è¿™é‡Œæ·»åŠ ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","æ–‡ä»¶"]},{"title":"ã€Linuxã€‘ç®€æ˜“shellçš„å®ç°","url":"/posts/2663421239/","content":"æœ¬ç¯‡åšå®¢ï¼Œæ¥æ•™å¤§å®¶ç”¨Cå†™ä¸€ä¸ªç®€æ˜“çš„linux shellï¼Œå¸®åŠ©ç†è§£ä¹‹å‰å­¦ä¹ çš„è¿›ç¨‹æ§åˆ¶ç›¸å…³çŸ¥è¯†\n\n\n\næ¼”ç¤ºç³»ç»Ÿï¼šCentOS7.6\n\n[TOC]\nå‰è¨€ä¹‹æ‰€ä»¥è¯´æ˜¯ç®€æ˜“çš„shellï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨çš„æ°´å¹³è‚¯å®šå†™ä¸å‡ºæ¥linuxç³»ç»Ÿé‡Œé¢é‚£ä¹ˆå¤æ‚çš„shellã€‚\næˆ‘ä»¬çš„ç›®çš„ä»…ä»…æ˜¯ä¸ºäº†å­¦ä¹ çˆ¶å­è¿›ç¨‹ã€è¿›ç¨‹æ›¿æ¢ã€å†…å»ºå‘½ä»¤ç­‰ç­‰çŸ¥è¯†ï¼Œå¹¶æŠŠè¿™äº›çŸ¥è¯†çš„ä½œç”¨é€šè¿‡è¿™ä¸ªå°shellä½“ç°å‡ºæ¥\n\næºç ä»“åº“ï¼šgitee\n\n\n1.åŸºç¡€æ¡†æ¶ä¹‹å‰çš„å­¦ä¹ ä¸­æœ‰æåˆ°è¿‡ï¼Œæˆ‘ä»¬åœ¨linuxå‘½ä»¤è¡Œå†…è¿è¡Œçš„å¾ˆå¤šè¿›ç¨‹ï¼Œéƒ½æ˜¯ä»¥å­è¿›ç¨‹çš„æ–¹å¼è¿è¡Œçš„ã€‚è¯´ç™½äº†å°±æ˜¯bashè¿›ç¨‹é‡Œé¢ç»™æˆ‘ä»¬forkåˆ›å»ºäº†å…¶ä»–å­è¿›ç¨‹ï¼Œå†ç”¨å­è¿›ç¨‹è¿›è¡Œè¿›ç¨‹æ›¿æ¢ï¼ŒæŒ‡å‘å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶\nè€Œéœ€è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¦ä¸€æ­¥ä¸€æ­¥æ¥\n\nbashé¦–å…ˆè¦æ˜¾ç¤ºå‘½ä»¤è¡Œçš„æç¤ºç¬¦ç”¨æˆ·å@ä¸»æœºå è·¯å¾„ï¼ˆå‚è€ƒä¹‹å‰vimåšå®¢ä¸­çš„è¿›åº¦æ¡ç¨‹åºï¼‰\nè·å–ç”¨æˆ·çš„è¾“å…¥å†…å®¹\nä»ç”¨æˆ·çš„è¾“å…¥ä¸­ï¼Œä»¥&quot; &quot;ç©ºæ ¼ä¸ºåˆ†å‰²ï¼Œåˆ†ç¦»å‡ºå‘½ä»¤å’Œå‚æ•°\nforkåˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹æ‰§è¡Œè¿›ç¨‹æ›¿æ¢ï¼Œçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ\n\nè¿™ä¸€åˆ‡éƒ½æ˜¯åœ¨ä¸€ä¸ªwhile(1)çš„æ­»å¾ªç¯é‡Œé¢æ‰§è¡Œçš„ï¼Œbashæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ­»å¾ªç¯çš„çˆ¶è¿›ç¨‹\n2.å¼€æ•´ä¸€ä¸ª2.1 æ‰“å°å‘½ä»¤è¡Œæç¤ºç¬¦å…ˆæ¥è¯•è¯•æ‰“å°å‡ºå‘½ä»¤è¡Œçš„æç¤ºç¬¦å§ï¼\nprintf(&quot;[æ…•é›ª@FS-1041 å½“å‰è·¯å¾„]# &quot;);fflush(stdout); //åˆ·æ–°ç¼“å†²åŒºï¼Œè¾¾åˆ°ä¸æ¢è¡Œçš„æ•ˆæœ\n\n\n\nä¸ºä½•è¦ä½¿ç”¨fflushï¼Ÿ\n\nå¦‚æœä¸è¿™ä¹ˆå¼„ï¼Œè€Œä½¿ç”¨\\næ¢è¡Œï¼Œå°±ä¼šå‡ºç°å‘½ä»¤è¡Œæç¤ºç¬¦ä¸€ç›´åœ¨é—ªåŠ¨æ‰“å°ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœ\nå…‰æ˜¯æ‰“å°ä¸€ä¸ªåŸºæœ¬çš„è·¯å¾„å¯ä¸å¤ªå¤Ÿå“¦ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¯•ç€è·å–ç¯å¢ƒå˜é‡çš„PWDå¾—åˆ°å½“å‰çš„è·¯å¾„ï¼Œå†æ‰“å°å‡ºæ¥\nchar cur_pwd[SIZE] = &quot;~&quot;;int sz_pwd = strlen(getenv(&quot;HOME&quot;));strcat(cur_pwd, getenv(&quot;PWD&quot;) + sz_pwd);printf(&quot;[æ…•é›ª@FS-1041 %s]# &quot;, cur_pwd);fflush(stdout); //åˆ·æ–°ç¼“å†²åŒºï¼Œè¾¾åˆ°ä¸æ¢è¡Œçš„æ•ˆæœ\n\nè¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦å»æ‰PWDå‰é¢/home/ç”¨æˆ·åçš„å†…å®¹ï¼Œå°†å…¶æ›¿æ¢æˆ~\næ‰“å°å‡ºæ¥çš„æ•ˆæœå¦‚ä¸‹ï¼Œæ˜¯ä¸æ˜¯å’Œæˆ‘ä»¬linuxçš„å‘½ä»¤è¡Œå¾ˆåƒå•¦ï¼\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nä½ è¿˜å¯ä»¥ä»ç¯å¢ƒå˜é‡ä¸­è·å–HOSTNAMEå’ŒUSERæ¥æ›¿æ¢æ‰å‰é¢çš„å†…å®¹\nè¿™é‡Œä¸ºäº†å’Œlinuxè‡ªå·±çš„shellåŒºåˆ†ä¸€ä¸‹ï¼Œæˆ‘å°±ä¸æ›¿æ¢äº†\n\n2.2 è·å–ç”¨æˆ·è¾“å…¥Cè¯­è¨€è·å–ç”¨æˆ·è¾“å…¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨çš„æ˜¯scanf\nä½†æ˜¯è¿™ä¸ªå‡½æ•°åœ¨ç°åœ¨è¿™ä¸ªåœ°æ–¹å¯ä¸é‚£ä¹ˆå¥½ç”¨å–½ï¼æˆ‘ä»¬è¾“å…¥å‘½ä»¤çš„æ—¶å€™éœ€è¦ç”¨ç©ºæ ¼åˆ†å¼€å‘½ä»¤è¡Œå‚æ•°ã€‚scanfä¼šå› ä¸ºç©ºæ ¼è€Œåœæ­¢æ¥å—\næˆ‘ä»¬å¯ä»¥ç”¨getså‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼\n#define NUM 1024char cmd_line[NUM]; //å‘½ä»¤è¡Œè¾“å…¥// 2.è·å–ç”¨æˆ·çš„è¾“å…¥å†…å®¹memset(cmd_line, &#x27;\\0&#x27;, sizeof(cmd_line) * sizeof(char));fgets(cmd_line, NUM, stdin);           //æ ‡å‡†è¾“å…¥stdinè·å–é”®ç›˜è¾“å…¥å†…å®¹\n\nè·å–äº†ä¹‹åå…ˆæ‰“å°ä¸€ä¸‹cmd_lineï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸè·å–äº†æˆ‘ä»¬è¾“å…¥çš„ç»“æœ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# test i k dtest i k d[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]#\n\nä½†ä¸ºä»€ä¹ˆå¤šæ‰“äº†ä¸€ä¸ªæ¢è¡Œå‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºfgetsåœ¨æ¥å—è¾“å…¥çš„æ—¶å€™ï¼ŒæŠŠæˆ‘ä»¬è¾“å…¥ç»“æŸçš„å›è½¦ä¹Ÿç»™æ”¶èµ·æ¥è¾£\ncmd_line[strlen(cmd_line) - 1] = &#x27;\\0&#x27;; // å»æ‰\\nå›è½¦\n\nå…‰æ˜¯å»æ‰å›è½¦è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åªæ•²äº†ä¸€ä¸ªå›è½¦ï¼Œåç»­æˆ‘ä»¬åˆ†ç¦»å‚æ•°çš„æ—¶å€™ï¼Œæ€»ä¸èƒ½å¯¹ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²è¿›è¡Œå¤„ç†å§ï¼Ÿ\næ‰€ä»¥è¿˜éœ€è¦å•ç‹¬åˆ¤æ–­strlen(cmd_line)==1çš„æƒ…å†µï¼Œç›´æ¥continue\nif(strlen(cmd_line)==1)&#123;    continue;//ç­‰äº1çš„æƒ…å†µåªèƒ½æ˜¯æ•²äº†ä¸€ä¸ªå›è½¦&#125;// å…¶ä»–æƒ…å†µå»æ‰\\nå›è½¦cmd_line[strlen(cmd_line) - 1] = &#x27;\\0&#x27;; \n\nè¿™æ ·æˆ‘ä»¬çš„bashå°±å’Œlinuxè‡ªå·±çš„bashä¸€æ ·ï¼Œæ•²å›è½¦ä¼šç›´æ¥æ–°èµ·ä¸€è¡Œï¼Œä¸åšä»»ä½•æ“ä½œ\n\nå¦‚æœä¸è¿™ä¹ˆå¤„ç†ï¼Œå°±ä¼šå¼•å‘æ®µé”™è¯¯å¯¼è‡´bashç›´æ¥ç»ˆæ­¢\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# Segmentation fault\n\n2.3 åˆ†ç¦»å‚æ•°è·å–å¥½ç”¨æˆ·è¾“å…¥å•¦ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯åˆ†ç¦»å‚æ•°äº†ï¼\nè¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥ä½¿ç”¨strtokè¿™ä¸ªå‡½æ•°å³å¯ï¼\nchar * strtok ( char * str, const char * sep );\n\nå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®åˆ†éš”ç¬¦è¿”å›è¿™ä¸ªåˆ†éš”ç¬¦åœ¨å­—ç¬¦ä¸²é‡Œé¢çš„èµ·å§‹ä½ç½®ï¼›å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªNULLï¼Œåˆ™ä»ä¸Šä¸€æ¬¡å¤„ç†çš„ä½ç½®ç»§ç»­å¾€åå¤„ç†ã€‚\n\nstrtokå‡½æ•°æ‰¾åˆ°strä¸­çš„ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶ç”¨\\0ç»“å°¾ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ ‡è®°çš„æŒ‡é’ˆ\nå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨æ›´å¤šçš„æ ‡è®°ï¼Œåˆ™è¿”å› NULL æŒ‡é’ˆ\n\n\nè¯¥å‡½æ•°çš„è¯¦è§£å‚è€ƒæˆ‘çš„åšå®¢ ç‚¹æˆ‘ \n\nğŸ˜¥æœ€å¼€å§‹çš„æ—¶å€™æˆ‘å¿˜è®°äº†è¿™ä¸ªå‡½æ•°ï¼Œç›´æ¥è‡ªå·±å†™äº†ä¸€ä¸ªåˆ†ç¦»ç®—æ³•ï¼Œdebugäº†å¥½ä¹…æ‰å‹‰å¼ºæå‡ºæ¥ï¼Œå¤ªç¬¨è›‹äº†\n#define SEP &quot; &quot; //åˆ†éš”ç¬¦size_t cmd_args_num = 0;  //åˆ†ç¦»å‡ºæ¥çš„å‚æ•°ä¸ªæ•°char *cmd_args[SIZE];     //åˆ†ç¦»å‚æ•°cmd_args[0] = strtok(cmd_line, SEP);cmd_args_num = 1;while (cmd_args[cmd_args_num++] = strtok(NULL, SEP));cmd_args_num--;//è¿™é‡Œ-1æ˜¯å› ä¸ºwhileå¾ªç¯æœ€åä¼šå¤š++ 1æ¬¡\n\næ³¨æ„ï¼=èµ‹å€¼æ“ä½œç¬¦æ˜¯æœ‰è¿”å›å€¼çš„ï¼å®ƒçš„è¿”å›å€¼æ˜¯æˆ‘ä»¬çš„å·¦å€¼ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€æ¬¡è·å–åˆ°çš„strtokçš„ç»“æœï¼Œè¿™ä¸ªç»“æœè¢«cmd_args[cmd_args_num]æ‰€æ¥å—\né‚£ä¹ˆï¼Œå½“strtokè¿”å›NULLçš„æ—¶å€™ï¼Œwhileå°±ä¼šæ¥å—åˆ°=çš„è¿”å›å€¼ï¼Œä»è€Œåœæ­¢å¾ªç¯\nfor(int j=0;j&lt;cmd_args_num;j++)&#123;    printf(&quot;args[%d] %s\\n&quot;,j,cmd_args[j]);&#125;\n\né€šè¿‡æ‰“å°ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæˆåŠŸåˆ†ç¦»å‡ºæ¥äº†æˆ‘ä»¬çš„å‚æ•°\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ls -largs[0] lsargs[1] -l\n\nå•ç‹¬å¤„ç†lsåœ¨linuxçš„bashä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„lséƒ½æ˜¯å¸¦é¢œè‰²çš„ã€‚è¿™æ˜¯å› ä¸ºcentosçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå°†lsè®¾ç½®æˆäº†ls --color=autoçš„åˆ«åï¼Œè¦æƒ³æˆ‘ä»¬è‡ªå·±bashé‡Œé¢çš„lsä¹Ÿå¸¦ä¸Šé¢œè‰²ï¼Œåˆ™éœ€è¦å•ç‹¬å¤„ç†ä¸€ä¸‹ls\n// 3.åˆ†ç¦»å‡ºå‘½ä»¤å’Œå‚æ•°cmd_args[0] = strtok(cmd_line, SEP);cmd_args_num = 1;// ç»™lså‘½ä»¤æ·»åŠ é¢œè‰²if (strcmp(cmd_args[0], &quot;ls&quot;) == 0)    cmd_args[cmd_args_num++] = (char *)&quot;--color=auto&quot;;while (cmd_args[cmd_args_num++] = strtok(NULL, SEP));cmd_args_num--;//è¿™é‡Œ-1æ˜¯å› ä¸ºwhileå¾ªç¯æœ€åä¼šå¤š++ä¸€æ¬¡\n\næœ€ç»ˆls -låˆ†ç¦»å‡ºæ¥çš„å‚æ•°å¦‚ä¸‹\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ls -largs[0] lsargs[1] --color=autoargs[2] -l\n\n2.4 è¿›ç¨‹æ›¿æ¢å‚æ•°åˆ†ç¦»å‡ºæ¥äº†ï¼Œä¸‹ä¸€æ­¥è¦åšçš„ï¼Œä¾¿æ˜¯è¿›ç¨‹æ›¿æ¢äº†\næˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„æ˜¯execå‡½æ•°é‡Œé¢çš„å“ªä¸€ä¸ªå‘¢ï¼Ÿ\n\nå¸¦pçš„execå‡½æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨å»PATHé‡Œé¢æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶\nå¸¦vçš„ï¼Œå‡½æ•°ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä¼ å‚å·²ç»åˆ†ç¦»åœ¨äº†ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆæ•°ç»„é‡Œé¢\n\nåŸºæœ¬çš„ä»£ç å¦‚ä¸‹ï¼Œçˆ¶è¿›ç¨‹æ‰“å°å†…å®¹æ˜¯ä¸ºäº†æµ‹è¯•ï¼Œå®é™…çš„bashè‚¯å®šæ˜¯æ²¡æœ‰è¿™ä¸ªæ‰“å°çš„~\n// 6.åˆ›å»ºç¨‹åº æ›¿æ¢pid_t ret_id = fork();if (ret_id == 0) //å­è¿›ç¨‹&#123;    execvp(cmd_args[0], cmd_args); //ç¨‹åºæ›¿æ¢    exit(134);                     //æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå­è¿›ç¨‹ä¸€å®šæ›¿æ¢å¤±è´¥&#125;// çˆ¶è¿›ç¨‹int status = 0;pid_t ret = waitpid(ret_id, &amp;status, 0);printf(&quot;\\n&quot;);if (ret &gt; 0)&#123;    printf(&quot;bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: %d, sig: %d\\n&quot;, WEXITSTATUS(status), WTERMSIG(status));&#125;\n\nè¿è¡ŒæˆåŠŸï¼\n\næ‰§è¡Œpython3çš„æ–‡ä»¶ä¹Ÿæ˜¯okçš„\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# python3 test.pyargs[0] python3args[1] test.pyhello pythonbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]#\n\n3.å†…å»ºå‘½ä»¤å®Œæˆäº†ä¸Šé¢çš„å‡ æ­¥åï¼Œä¸€ä¸ªåŸºç¡€çš„bashå°±æå®šäº†\nä½†æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿï¼Œä¸ä¿¡cdè¯•ä¸€ä¸‹ï¼Ÿ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# cd testbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\n è¯¶ï¼Œä¸ºä»€ä¹ˆcdäº†ä¹‹åï¼Œå†æ¬¡lsï¼Œè·¯å¾„æ²¡æœ‰å˜åŒ–å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„cdæ˜¯è¢«å­è¿›ç¨‹æ‰§è¡Œçš„ï¼Œåˆ‡æ¢çš„æ˜¯å­è¿›ç¨‹çš„å·¥ä½œç›®å½•ã€‚å¯å­è¿›ç¨‹æ‰§è¡Œå®Œcdä¹‹åå°±ç»“æŸè¿è¡Œäº†ï¼Œå®ƒæ ¹æœ¬æ²¡æœ‰å½±å“åˆ°çˆ¶è¿›ç¨‹bashï¼\n\nä¹‹å‰å­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°è¿‡å†…å»ºå‘½ä»¤è¿™ä¸€ä¸ªæ¦‚å¿µã€‚æœ‰ä¸€äº›å‘½ä»¤ä¸åº”è¯¥æ˜¯å­è¿›ç¨‹æ‰§è¡Œçš„ï¼Œè€Œåº”è¯¥æ˜¯bashè‡ªå·±æ‰§è¡Œçš„ï¼Œæ¯”å¦‚è¿™é‡Œçš„cdï¼Œè¿˜æœ‰å¯¼å…¥ç¯å¢ƒå˜é‡çš„export\nå…¶å®è¯´ç™½äº†å°±æ˜¯bashæ£€æµ‹åˆ°å†…å»ºå‘½ä»¤ï¼Œå°±æ‰§è¡Œä»–è‡ªå·±çš„ä¸€ä¸ªå‡½æ•°å‘—\n3.1 cdå’Œexportå‘½ä»¤cd/exportå‘½ä»¤ï¼Œcè¯­è¨€ä¸­éƒ½æœ‰ç°æˆçš„å‡½æ•°ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„\n//è¿™é‡Œå¯¼å…¥ç¯å¢ƒå˜é‡ä¹‹åï¼Œä¸ä¼šå½±å“linuxçš„shell//è€Œæ˜¯ä»æˆ‘ä»¬çš„myshellå¼€å§‹æ‰€æœ‰å­è¿›ç¨‹éƒ½ä¼šç»§æ‰¿int PutEnvIn(char *new_env)&#123;    putenv(new_env);    return 0;&#125;//ä¸ä½¿ç”¨å†…å»ºå‘½ä»¤ï¼Œåˆ™ä¸ä¼šç”Ÿæ•ˆint ChangeDir(const char *new_path)&#123;    chdir(new_path);    return 0; // è°ƒç”¨æˆåŠŸ&#125;\n\nä»¥ä¸‹æ˜¯mainå‡½æ•°é‡Œé¢çš„å†…å®¹ï¼Œå®Œæ•´ä»£ç è¯·å»æˆ‘çš„ä»£ç ä»“åº“æŸ¥çœ‹\n// 5.å†…å»ºå‘½ä»¤if (strcmp(cmd_args[0], &quot;cd&quot;) == 0 &amp;&amp; cmd_args[1] != NULL)&#123;    ChangeDir(cmd_args[1]); //è®©è°ƒç”¨æ–¹è¿›è¡Œè·¯å¾„åˆ‡æ¢, çˆ¶è¿›ç¨‹    continue;&#125;// ç›®å‰ï¼Œç¯å¢ƒå˜é‡ä¿¡æ¯åœ¨cmd_line,ä¼šè¢«æ¸…ç©º// æ­¤å¤„æˆ‘ä»¬éœ€è¦è‡ªå·±ä¿å­˜ä¸€ä¸‹ç¯å¢ƒå˜é‡å†…å®¹char env_buffer[SIZE][NUM];size_t env_num = 0; //ç¯å¢ƒå˜é‡çš„æ•°é‡if (strcmp(cmd_args[0], &quot;export&quot;) == 0 &amp;&amp; cmd_args[1] != NULL)&#123;    strcpy(env_buffer[env_num], cmd_args[1]);    PutEnvIn(env_buffer[env_num]);    env_num++;    continue;&#125;\n\nè¿™æ—¶å€™cdå°±èƒ½æ­£å¸¸æ‰§è¡Œäº†ï¼Œä¸è¿‡pwdè¿˜æ²¡æœ‰ä¿®æ”¹ï¼Œæˆ‘æ²¡æƒ³å¥½è¦æ€ä¹ˆæ“ä½œæ\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsmakefile  myshell  myshell.c  myshell_err.c  test  test.cpp  test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# cd test[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lsbashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nè¯•ä¸€è¯•exportï¼Œä¹Ÿæ²¡é—®é¢˜å‘¢\n//test.cpp#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;ts= &quot; &lt;&lt; getenv(&quot;ts&quot;) &lt;&lt;endl;    return 0;&#125;\n\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# make testg++ test.cpp -o test -std=c++11bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# export ts=12341[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# ./testts= 12341bashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\n3.2 aliasåˆ«åè®¾ç½®ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤æœ‰ç°æˆçš„ï¼Œaliasçš„è®¾ç½®å°±éœ€è¦æˆ‘ä»¬æ‰‹å†™å•¦\n#define NUM 1024#define SIZE 128//å˜é‡ååˆ«åtypedef struct alias_cmd&#123;    char _cmd[SIZE];    char _acmd[SIZE];&#125; alias;alias cmd_alias[SIZE]; //ç¼“å­˜åˆ«åé”®å€¼å¯¹(ç»“æ„ä½“)size_t alias_num = 0;  //å·²ç¼“å­˜çš„åˆ«åä¸ªæ•°\n\nè¿™é‡Œæˆ‘å…ˆå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œç”¨æ¥å­˜æ”¾å˜é‡åˆ«åçš„é”®å€¼å¯¹ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ›¿æ¢\nç„¶åå°±æ˜¯æ¼«é•¿çš„æ›¿æ¢æ­¥éª¤ï¼Œè¿™éƒ¨åˆ†æˆ‘debugäº†éå¸¸ä¹…æ‰å†™å‡ºæ¥ï¼Œéƒ½å¸¦äº†æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹\n//è®¾ç½®åˆ«å(æ–°å‘½ä»¤ï¼ŒåŸå‘½ä»¤)void set_alias(char *cmd, char *acmd)&#123;    //æŸ¥æ‰¾åˆ«åé‡Œæ˜¯å¦å·²ç»æœ‰äº†è¿™ä¸ª    for (int i = 0; i &lt; alias_num; i++)    &#123;        if (strcmp(cmd_alias[i]._cmd, cmd) == 0) //æ˜¯å·²æœ‰çš„åˆ«å        &#123;            strcpy(cmd_alias[i]._acmd, acmd);            // printf(&quot;set cmd %s acmd %s\\n&quot;,cmd_alias[i]._cmd,cmd_alias[i]._acmd);            return;        &#125;    &#125;    //æ²¡æœ‰æå‰é€€å‡ºï¼Œè¯´æ˜æ˜¯æ–°å¢åˆ«å    strcpy(cmd_alias[alias_num]._cmd, cmd);    strcpy(cmd_alias[alias_num]._acmd, acmd);    alias_num++;&#125;//åˆ¤æ–­ä¸€ä¸ªå‘½ä»¤æ˜¯å¦æœ‰åˆ«åbool is_alias(char *cmd_args[], int sz)&#123;    int i = 0;    for (i = 0; i &lt; alias_num; i++)    &#123;        if (strcmp(cmd_alias[i]._cmd, cmd_args[0]) == 0) //æ˜¯åˆ«å        &#123;            size_t index = 1, j;            char *cmd_args_temp[SIZE];                                           //ä¸´æ—¶æ•°ç»„ç”¨äºåˆ†ç¦»åˆ«åé‡Œé¢çš„å‘½ä»¤            memset(cmd_line_alias, &#x27;\\0&#x27;, sizeof(cmd_line_alias) * sizeof(char)); //æ¸…ç©ºåˆ«åå‘½ä»¤ç¼“å­˜            //å…ˆæŠŠåˆ«åä¸­çš„å‘½ä»¤åˆ†å¼€            strcpy(cmd_line_alias, cmd_alias[i]._acmd); //ä¸èƒ½ç›´æ¥ä½¿ç”¨_acmdï¼Œä¸ç„¶ä¼šå½±å“ä¸‹æ¬¡åˆ«åä½¿ç”¨            cmd_args_temp[0] = strtok(cmd_line_alias, SEP);            //åˆ«åçš„æ—¶å€™ä¹Ÿéœ€è¦è®¾ç½®lsçš„é¢œè‰²ï¼ˆéœ€è¦ä¿è¯åŸæœ¬å‘½ä»¤çš„ç¬¬ä¸€ä¸ªä¸æ˜¯lsï¼Œä¸ç„¶æœ¬æ¥å°±å·²ç»æœ‰&quot;--color=auto&quot;äº†ï¼‰            if (strcmp(cmd_args_temp[0], &quot;ls&quot;) == 0 &amp;&amp; strcmp(cmd_args[0], &quot;ls&quot;) != 0)                cmd_args_temp[index++] = (char *)&quot;--color=auto&quot;;            while (cmd_args_temp[index++] = strtok(NULL, SEP))                ;            index--; // whileä¼šå¤š+1ï¼Œéœ€è¦é‡æ–°æ“ä½œä¸€ä¸‹            //ä»åŸæœ¬æ•°ç»„çš„ç¬¬äºŒä½å¼€å§‹å¾€åè®¾ç½®            for (j = 1; j &lt; cmd_args_num; j++)            &#123;                cmd_args_temp[index++] = cmd_args[j];            &#125;            //æ›¿æ¢æ‰åŸæœ¬çš„æ•°ç»„            cmd_args_num = index;              //æ­¤æ—¶çš„indexé•¿åº¦æ­£ç¡®ï¼Œä¸éœ€è¦-1            for (j = 0; j &lt; cmd_args_num; j++) //å› ä¸ºwhileæœ€åä¼šå¤š++ä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦-1            &#123;                //åŸæœ¬çš„ä½ç½®æ²¡æœ‰é‚£ä¹ˆå¤§ç©ºé—´ï¼Œæ”¾ä¸ä¸‹ï¼Œä¸èƒ½æ‹·è´                // strcpy(cmd_args[j],cmd_args_temp[j]);                cmd_args[j] = cmd_args_temp[j];                // printf(&quot;temp[%d] %s   args[%d] %s\\n&quot;,j,cmd_args_temp[j],j,cmd_args[j]);            &#125;            cmd_args[j] = NULL; //æœ€åä¸€ä¸ªä½ç½®è®¾ç½®æˆNULL            return true;        &#125;    &#125;    return false;&#125;\n\nå…¶å®è‚¯å®šæ˜¯æœ‰æ›´å¥½çš„æ–¹æ¡ˆçš„ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æƒ³å‡ºæ¥å’‹å¼„ã€‚ç°åœ¨è¿™ä¸ªèƒ½è·‘å°±OKï¼Œå“ˆå“ˆ\nä»¥æœ€åŸºæœ¬çš„llå‘½ä»¤æ¥æµ‹è¯•ä»¥ä¸‹ï¼Œæ›¿æ¢æˆåŠŸï¼ä¿®æ”¹å·²æœ‰çš„åˆ«åä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„\n[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# alias ll=&#x27;ls -l&#x27;[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lltotal 60-rw-rw-r-- 1 muxue muxue   136 Oct 15 23:21 makefile-rwxrwxr-x 1 muxue muxue 14040 Oct 16 17:05 myshell-rw-rw-r-- 1 muxue muxue  8217 Oct 16 16:59 myshell.c-rw-rw-r-- 1 muxue muxue  6942 Oct 15 22:38 myshell_err.c-rwxrwxr-x 1 muxue muxue  9072 Oct 16 17:08 test-rw-rw-r-- 1 muxue muxue   130 Oct 15 23:22 test.cpp-rw-rw-r-- 1 muxue muxue    21 Oct 16 00:11 test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# alias ll=&#x27;ls -l -a&#x27;[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# lltotal 68drwxrwxr-x  2 muxue muxue  4096 Oct 16 17:08 .drwxrwxr-x 13 muxue muxue  4096 Oct 15 17:31 ..-rw-rw-r--  1 muxue muxue   136 Oct 15 23:21 makefile-rwxrwxr-x  1 muxue muxue 14040 Oct 16 17:05 myshell-rw-rw-r--  1 muxue muxue  8217 Oct 16 16:59 myshell.c-rw-rw-r--  1 muxue muxue  6942 Oct 15 22:38 myshell_err.c-rwxrwxr-x  1 muxue muxue  9072 Oct 16 17:08 test-rw-rw-r--  1 muxue muxue   130 Oct 15 23:22 test.cpp-rw-rw-r--  1 muxue muxue    21 Oct 16 00:11 test.pybashç­‰å¾…å­è¿›ç¨‹æˆåŠŸï¼code: 0, sig: 0[æ…•é›ª@FS-1041 ~/git/linux/code/22-10-15_myshell]# \n\nç»“è¯­å°±è¿™æ ·ï¼Œä¸€ä¸ªæœ€åŸºæœ¬çš„bashæˆ–è€…è¯´shellå°±è¢«æˆ‘ä»¬æå®šå•¦\nå…¶å®å†…å»ºå‘½ä»¤è¿œä¸æ­¢3é‡Œé¢æåˆ°çš„é‚£å‡ ä¸ªï¼Œä¸è¿‡æˆ‘ä»¬å­¦ä¹ çš„ç›®çš„å·²ç»è¾¾åˆ°äº†~ä¹Ÿæ²¡å¿…è¦æ­»ç£•åœ¨è¿™é‡Œ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | ç®¡é“","url":"/posts/3971907787/","content":"ä»Šå¤©è®©æˆ‘ä»¬æ¥è®¤è¯†å¦‚ä½•ä½¿ç”¨ç®¡é“æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡\n\n\n[TOC]\n1.ä½•ä¸ºç®¡é“ï¼Ÿåœ¨æœ€åˆå­¦ä¹ linuxçš„åŸºç¡€å‘½ä»¤æ—¶ï¼Œæ¥è§¦è¿‡ç”¨|æ¥è¿æ¥å¤šä¸ªå‘½ä»¤çš„æ“ä½œã€‚å½“æ—¶ä¾¿æåˆ°äº†è¿™æ˜¯ä¸€ä¸ªç®¡é“æ“ä½œï¼Œä½†æ²¡æœ‰è¯¦è§£ç®¡é“åˆ°åº•æ˜¯ä»€ä¹ˆã€‚\n1.1 ç®¡é“æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ç®¡é“ç®¡é“ï¼Œå¦‚åŒå…¶åï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥è®©æ•°æ®åœ¨å†…éƒ¨æµåŠ¨çš„ä¸œè¥¿ã€‚åˆ›å»ºç®¡é“ï¼Œå°±å¥½æ¯”åœ¨ä¸¤ä¸ªé˜€é—¨ï¼ˆè¿›ç¨‹ï¼‰ä¹‹é—´æ­äº†ä¸€æ ¹æ°´ç®¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±æ§åˆ¶ç®¡é“ä¸­æ°´çš„æµå‘\nä¸è¿‡ï¼Œåœ¨Linuxç³»ç»Ÿä¸­æä¾›çš„ç®¡é“æ¥å£ï¼Œåªæ”¯æŒå•é¡¹æµåŠ¨ã€‚ä¸€ä¸ªç®¡é“åªæ”¯æŒä»A-&gt;Bï¼Œä¸æ”¯æŒB-&gt;A\nè¦æƒ³è¿›è¡ŒåŒå‘é€šä¿¡ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸¤ä¸ªç®¡é“\n1.2 è¿›ç¨‹é€šä¿¡æ—¢ç„¶ç®¡é“æ˜¯ç”¨æ¥è¿›ç¨‹é€šä¿¡çš„ï¼Œé‚£è¿›ç¨‹é€šä¿¡åˆæ˜¯ä»€ä¹ˆï¼Œå®ƒæœ‰ä½•ç”¨å‘¢ï¼Ÿ\nè¿›ç¨‹é€šä¿¡çš„ç›®çš„æ˜¯è®©ä¸¤ä¸ªè¿›ç¨‹å¯ä»¥ç›¸äº’äº¤æµï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š\n\næ•°æ®ä¼ è¾“ï¼Œä»è¿›ç¨‹Aå‘é€æ•°æ®é“è¿›ç¨‹B\nèµ„æºå…±äº«ï¼Œå¤šä¸ªè¿›ç¨‹ä½¿ç”¨åŒä¸€ä¸ªèµ„æº\né€šçŸ¥äº‹ä»¶ï¼Œè¿›ç¨‹Aå‘è¿›ç¨‹Bå‘é€æ¶ˆæ¯ï¼Œå‘ŠçŸ¥è¿›ç¨‹Bå‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶\nè¿›ç¨‹æ§åˆ¶ï¼Œçˆ¶è¿›ç¨‹é€šè¿‡ç®¡é“æ¥æ§åˆ¶å­è¿›ç¨‹çš„æ‰§è¡Œï¼Œè¿›ç¨‹Aæ§åˆ¶è¿›ç¨‹Bçš„æ‰§è¡Œç­‰ç­‰\n\né™¤äº†ç®¡é“ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡systemV/POSIXæ¥å®ç°è¿›ç¨‹é€šä¿¡\nè¿›ç¨‹é€šä¿¡çš„æ ¸å¿ƒæ€æƒ³ï¼šè®©ä¸¤ä¸ªè¿›ç¨‹è·å–åˆ°åŒä¸€ä»½èµ„æº\n1.3 ç®¡é“åˆ†ç±»ç®¡é“åˆ†ä¸ºä¸¤ç§\n\nåŒ¿åç®¡é“ï¼Œpipe\nå‘½åç®¡é“ï¼Œç®¡é“æ–‡ä»¶\n\nä¸”å¬æˆ‘æ…¢æ…¢é“æ¥\n2.åŒ¿åç®¡é“åŒ¿åç®¡é“ä¸»è¦ç”¨äºçˆ¶å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå…¶ä½¿ç”¨pipeæ¥å£æ¥è¿›è¡Œåˆ›å»º\n\n\nç±»ä¼¼äºforkï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºäº†ä¹‹ååˆ¤æ–­å‡½æ•°çš„è¿”å›å€¼å°±å¯ä»¥äº†\nå…¶ä¸­pipefd[2]æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œæˆ‘ä»¬è¦é¢„å…ˆåˆ›å»ºå¥½ä¸€ä¸ª2ä¸ªç©ºé—´çš„æ•°ç»„ï¼Œä¼ å…¥è¯¥å‡½æ•°ã€‚pipeä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ï¼ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåªå±äºè¯¥è¿›ç¨‹çš„ä¸´æ—¶æ–‡ä»¶ï¼‰å¹¶å°†è¯»ç«¯èµ‹å€¼ç»™pipefd[0]ï¼Œå†™ç«¯èµ‹å€¼ç»™pipefd[1]\n\nå¦‚æœæˆ‘ä»¬éœ€è¦çˆ¶è¿›ç¨‹å†™ï¼Œå­è¿›ç¨‹è¯»ï¼Œå°±åœ¨çˆ¶è¿›ç¨‹å…³é—­è¯»ç«¯ï¼Œå­è¿›ç¨‹å…³é—­å†™ç«¯\nå¦‚æœæˆ‘ä»¬éœ€è¦çˆ¶è¿›ç¨‹è¯»ï¼Œå­è¿›ç¨‹å†™ï¼Œå°±åœ¨çˆ¶è¿›ç¨‹å…³é—­å†™æ®µï¼Œå­è¿›ç¨‹å…³é—­è¯»ç«¯\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±åœ¨çˆ¶å­è¿›ç¨‹ä¸­æ‰“é€šäº†ä¸€ä¸ªç®¡é“ï¼Œå¯ä»¥è®©çˆ¶å­è¿›ç¨‹è¿›è¡Œä¸€å®šçš„äº¤æµ\nè€Œfdæ­£æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ è¿‡çš„Linuxä¸‹æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶ç®¡é“çš„è¯»å†™æ“ä½œå’Œè°ƒç”¨ç³»ç»Ÿæ¥å£è¯»å†™æ–‡ä»¶å®Œå…¨ç›¸åŒï¼\n\nåšå®¢ï¼šlinuxæ–‡ä»¶æ“ä½œ\n\n2.0 åº·åº·æºç /include/linux/pipe_fs_i.hä¸­å¯ä»¥æ‰¾åˆ°ç®¡é“æ“ä½œçš„æºç \nstruct pipe_buffer &#123;\tstruct page *page;\tunsigned int offset, len;\tconst struct pipe_buf_operations *ops;\tunsigned int flags;\tunsigned long private;&#125;;\n\nå…¶ä¸­æˆ‘ä»¬çš„ç®¡é“æ–‡ä»¶æ‹¥æœ‰ä¸€ä¸ªç¼“å†²åŒºï¼Œè¿™ä¸ªç¼“å†²åŒºæœ‰ä¸€ä¸ªä¸“é—¨çš„struct pipe_buf_operationsç»“æ„ä½“ç”¨æ¥å¤„ç†å®ƒçš„è¾“å…¥è¾“å‡ºæ–¹æ³•ï¼Œä»¥åŠflagsç”¨æ¥æ ‡è¯†å½“å‰ç¼“å†²åŒºçš„è£…æ€\n2.1 åˆ›å»ºé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨pipeæ¥å£åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ï¼Œä½¿ç”¨å¹¶ä¸éš¾\n// 1.åˆ›å»ºç®¡é“int pipefd[2] = &#123;0&#125;;if(pipe(pipefd) != 0)&#123;    cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;    return 1;&#125;\n\nå› ä¸ºpipeæ˜¯é€šè¿‡pipefdè¿™ä¸ªè¾“å‡ºå‹å‚æ•°æ¥åˆ›å»ºç®¡é“çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€å•ç‹¬å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ¥å—è¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œç›´æ¥åœ¨ifè¯­å¥ä¸­è¿›è¡Œåˆ¤æ–­å³å¯\nvoid TestPipe2()&#123;     // 1.åˆ›å»ºç®¡é“    int pipefd[2] = &#123;0&#125;;    if(pipe(pipefd) != 0)    &#123;        cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;        return ;    &#125;    cout &lt;&lt; pipefd[0] &lt;&lt; &quot; &quot; &lt;&lt; pipefd[1] &lt;&lt; endl;&#125;\n\nå…ˆæ¥ä¸ªå°æµ‹è¯•ï¼Œæ‰“å°è¿™ä¸¤ä¸ªå€¼å¯ä»¥å‘ç°ï¼Œå®ƒå…¶å®æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶æè¿°ç¬¦ã€‚ç³»ç»Ÿåˆ†åˆ«ç”¨è¯»æ–¹æ³•å’Œå†™æ–¹æ³•æ‰“å¼€äº†åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¾›æˆ‘ä»¬ä½¿ç”¨\n\n0ä¸ºè¯»ç«¯ï¼›1ä¸ºå†™ç«¯\n\n[muxue@bt-7274:~/git/linux/code/22-11-04_pipe]$ ./test3 4[muxue@bt-7274:~/git/linux/code/22-11-04_pipe]$ \n\næˆ‘ä»¬è‡ªå·±æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯ä»3å¼€å§‹çš„ï¼Œ012å¯¹åº”çš„æ˜¯stdin/stdout/stderr\n2.2 çˆ¶å­é€šä¿¡æœ‰äº†åŒ¿åç®¡é“ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å°è¯•åœ¨çˆ¶å­è¿›ç¨‹ä¸­è¿›è¡Œé€šä¿¡äº†\nä»¥çˆ¶å†™å­è¯»ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å­è¿›ç¨‹å…³é—­å†™æ®µï¼Œçˆ¶è¿›ç¨‹å…³é—­è¯»ç«¯\npipefdæ˜¯çˆ¶è¿›ç¨‹çš„èµ„æºï¼Œforkåˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œè¯¥èµ„æºä¼šå‘ç”Ÿä¸€æ¬¡å†™æ—¶æ‹·è´ï¼Œä»¥ä¾›çˆ¶å­è¿›ç¨‹å…±äº«\n// 2.åˆ›å»ºå­è¿›ç¨‹pid_t id = fork();if(id &lt; 0)&#123;    cerr &lt;&lt; &quot;fork error&quot; &lt;&lt; endl;    return 2;&#125;else if (id == 0)&#123;    // 3.å­è¿›ç¨‹ç®¡é“    // å­è¿›ç¨‹è¯»å–, å…³æ‰å†™ç«¯    close(pipefd[1]);    //...&#125;else&#123;    // 4.çˆ¶è¿›ç¨‹ç®¡é“    // çˆ¶è¿›ç¨‹å†™å…¥ï¼Œå…³æ‰è¯»ç«¯    close(pipefd[0]);    //...&#125;\n\nå¤„ç†å®Œä¹‹åï¼Œåç»­çš„æ“ä½œä¾¿æ˜¯linuxçš„æ–‡ä»¶æ“ä½œäº†\nå®Œæ•´ä»£ç ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ï¼Œé€šè¿‡æ–‡ä»¶æ¥å£å¯¹pipefdè¿›è¡Œread/writeï¼Œå°±èƒ½è®©çˆ¶è¿›ç¨‹å‘é€çš„å­—ç¬¦ä¸²è¢«å­è¿›ç¨‹è¯»å–é“\n#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;using namespace std;#define NUM 1024//åŒ¿åç®¡é“int TestPipe()&#123;    // 1.åˆ›å»ºç®¡é“    int pipefd[2] = &#123;0&#125;;    if(pipe(pipefd) != 0)    &#123;        cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;        return 1;    &#125;    // 2.åˆ›å»ºå­è¿›ç¨‹    pid_t id = fork();    if(id &lt; 0)    &#123;        cerr &lt;&lt; &quot;fork error&quot; &lt;&lt; endl;        return 2;    &#125;    else if (id == 0)    &#123;        // 3.å­è¿›ç¨‹ç®¡é“        // å­è¿›ç¨‹æ¥è¿›è¡Œè¯»å–, å­è¿›ç¨‹å°±åº”è¯¥å…³æ‰å†™ç«¯        close(pipefd[1]);        char buffer[NUM];        while(1)        &#123;            cout &lt;&lt; &quot;time_stamp: &quot; &lt;&lt; (size_t)time(nullptr) &lt;&lt; endl;            // å­è¿›ç¨‹æ²¡æœ‰å¸¦sleepï¼Œä¸ºä»€ä¹ˆå­è¿›ç¨‹ä½ ä¹Ÿä¼šä¼‘çœ å‘¢ï¼Ÿï¼Ÿ            memset(buffer, 0, sizeof(buffer));            ssize_t s = read(pipefd[0], buffer, sizeof(buffer) - 1);            if(s &gt; 0)            &#123;                //è¯»å–æˆåŠŸ                buffer[s] = &#x27;\\0&#x27;;                cout &lt;&lt; &quot;å­è¿›ç¨‹æ”¶åˆ°æ¶ˆæ¯,å†…å®¹æ˜¯: &quot; &lt;&lt; buffer &lt;&lt; endl;            &#125;            else if(s == 0)            &#123;                cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹å†™å®Œäº†ï¼Œæˆ‘ä¹Ÿé€€å‡ºå•¦&quot; &lt;&lt; endl;                break;            &#125;            else&#123;                cerr &lt;&lt; &quot;err while chlid read pipe&quot; &lt;&lt; endl;            &#125;        &#125;        close(pipefd[0]);        exit(0);    &#125;    else    &#123;        // 4.çˆ¶è¿›ç¨‹ç®¡é“        // çˆ¶è¿›ç¨‹æ¥è¿›è¡Œå†™å…¥ï¼Œå°±åº”è¯¥å…³æ‰è¯»ç«¯        close(pipefd[0]);        const char *msg = &quot;ä½ å¥½å­è¿›ç¨‹ï¼Œæˆ‘æ˜¯çˆ¶è¿›ç¨‹, è¿™æ¬¡å‘é€çš„ä¿¡æ¯ç¼–å·æ˜¯&quot;;        int cnt = 0;        while(cnt &lt; 10)        &#123;            char sendBuffer[1024];            sprintf(sendBuffer, &quot;%s : %d&quot;, msg, cnt);//æ ¼å¼åŒ–æ§åˆ¶å­—ç¬¦ä¸²            write(pipefd[1], sendBuffer, strlen(sendBuffer));            cnt++;            cout &lt;&lt; &quot;cnt: &quot; &lt;&lt; cnt &lt;&lt; endl;            sleep(1);        &#125;        close(pipefd[1]);        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹å†™å®Œäº†&quot; &lt;&lt; endl;    &#125;    // çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸ    pid_t res = waitpid(id, nullptr, 0);    if(res &gt; 0)    &#123;        cout &lt;&lt; &quot;ç­‰å¾…å­è¿›ç¨‹æˆåŠŸ&quot; &lt;&lt; endl;    &#125;    cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹é€€å‡º&quot; &lt;&lt;endl;    return 0;&#125;\n\nè¿è¡ŒæˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°çˆ¶è¿›ç¨‹æ¯æ¬¡å†™å…¥ä¹‹åï¼Œå­è¿›ç¨‹è¯»å–\n\nçˆ¶è¿›ç¨‹ä¼‘çœ çš„æ—¶å€™ï¼Œå­è¿›ç¨‹çœ‹èµ·æ¥å•¥äº‹æ²¡æœ‰åš\nå®é™…ä¸Šï¼Œå­è¿›ç¨‹æ˜¯åœ¨ç­‰å¾…çˆ¶è¿›ç¨‹å¯¹ç®¡é“çš„å†™å…¥\n2.3 ç­‰å¾…ä¹‹å‰æˆ‘ä»¬å­¦ä¹ è¿‡è¿›ç¨‹ç­‰å¾…ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå…¶ä¸­æåˆ°äº†è¿›ç¨‹æœ‰æ—¶å€™éœ€è¦ç­‰å¾…å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚æ¯”å¦‚çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œå®Œæˆï¼ˆä¸Šé¢çš„ä»£ç ä¹Ÿç”¨äº†waitpidç­‰å¾…ï¼‰\nè€Œç®¡é“ï¼Œå°±æ˜¯è¿›ç¨‹éœ€è¦ç­‰å¾…çš„èµ„æºä¹‹ä¸€\n\nå¦‚æœç®¡é“ä¸ºç©ºï¼Œè¯»ç«¯å¿…é¡»è¦ç­‰å¾…å†™ç«¯å†™å…¥ï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œåé¢çš„ä»£ç \nå¦‚æœç®¡é“æ»¡äº†ï¼Œå†™æ®µå¿…é¡»ç­‰å¾…è¯»ç«¯å–èµ°æ•°æ®ï¼Œå¦åˆ™ä¸èƒ½å†™å…¥ã€‚å› ä¸ºæ­¤æ—¶å†™å…¥ä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®\n\né‚£ä¹ˆï¼Œè¿›ç¨‹æ˜¯åœ¨æ‰§è¡Œåˆ°ä»€ä¹ˆå‡½æ•°çš„æ—¶å€™å¼€å§‹ç­‰å¾…çš„å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ï¼šè¿›ç¨‹å°†åœ¨read/writeä¸­è¿›è¡Œé˜»å¡ç­‰å¾…ï¼\n\næ‰§è¡Œåˆ°readçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåˆ¤æ–­åŒ¿åç®¡é“ä¸­æ²¡æœ‰æœ‰æ•ˆæ•°æ®ï¼Œè®©æ‰§è¡Œreadçš„è¿›ç¨‹ç­‰å¾…ç®¡é“å†™å…¥\næ‰§è¡Œåˆ°writeçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿåˆ¤æ–­ç®¡é“å·²ç»æ»¡äº†ï¼Œå°±è®©æ‰§è¡Œwriteçš„è¿›ç¨‹ç­‰å¾…ç®¡é“è¢«è¯»å–ï¼ˆè€Œä¸”éœ€è¦ç®¡é“è¢«æ¸…ç©ºäº†æ‰èƒ½ç»§ç»­å†™å…¥ï¼‰\nè¿™ä¸ªåˆ¤æ–­æœºåˆ¶æ˜¯ç®¡é“æ–‡ä»¶ä¸­è‡ªå¸¦çš„ï¼Œæ˜¯ä¸€ç§åŒæ­¥å’Œäº’æ–¥æœºåˆ¶\nç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å‘æ˜¾ç¤ºå™¨è¾“å‡ºçš„æ—¶å€™ï¼Œå°±æ²¡æœ‰è®¿é—®æ§åˆ¶ï¼Œçˆ¶å­è¿›ç¨‹å‘æ˜¾ç¤ºå™¨è¾“å‡ºå†…å®¹çš„é¡ºåºæ˜¯å®Œå…¨éšæœºçš„\n\næœ¬è´¨å°±æ˜¯å°†è¯¥è¿›ç¨‹çš„task_strcutæ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶å°†çŠ¶æ€ä»Rè®¾ç½®ä¸ºS/D/T\nå†™å…¥ç­‰å¾…å¯¹ç¬¬äºŒç‚¹è¿›è¡Œä¸€ä¸ªæµ‹è¯•ï¼Œæˆ‘ä»¬æŠŠçˆ¶è¿›ç¨‹æ”¹æˆæ­»å¾ªç¯ï¼Œå­è¿›ç¨‹æ¯ä¼‘çœ 3sè¯»å–ä¸€æ¬¡ç®¡é“\n\næ‰§è¡Œåä¼šå‘ç°ï¼Œçˆ¶è¿›ç¨‹å‡ ä¹æ˜¯åœ¨ä¸€ç¬é—´å†™å…¥äº†1226æ¬¡æ•°æ®ï¼Œéšåå­è¿›ç¨‹å¼€å§‹è¯»å–ï¼Œæ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°ï¼Œå°½ç®¡å­è¿›ç¨‹å·²ç»å¼€å§‹è¯»å–äº†ï¼Œä½†æ˜¯çˆ¶è¿›ç¨‹å´ç±³æœ‰åŠ¨é™ã€‚\n\nå­è¿›ç¨‹éœ€è¦å°†ç®¡é“å†…çš„æ•°æ®è¯»å–ä¸€éƒ¨åˆ†ï¼Œçˆ¶è¿›ç¨‹æ‰èƒ½ç»§ç»­æ‰§è¡Œå†™å…¥ã€‚\næ­¤æ—¶çˆ¶è¿›ç¨‹å°±æ˜¯åœ¨writeé‡Œé¢è¿›è¡Œç­‰å¾…çš„\n\nè¿›ä¸€æ­¥è§‚å¯Ÿä¼šå‘ç°ï¼Œå½“å­è¿›ç¨‹è¯»å–åˆ°77æ¬¡æ¶ˆæ¯çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹åˆå¼€å§‹å¾€ç®¡é“é‡Œé¢å†™å…¥äº†\n\nå˜¿ï¼Œä½ çŒœæ€ä¹ˆç€ï¼Ÿçˆ¶è¿›ç¨‹åˆšå¥½å†™å…¥äº†74æ¬¡æ¶ˆæ¯ï¼è€Œå­è¿›ç¨‹ç»§ç»­è¯»å–ä¹‹å‰çš„ç®¡é“ä¿¡æ¯\n\nè¿™ä¾¿å‘Šè¯‰æˆ‘ä»¬ï¼Œçˆ¶è¿›ç¨‹éœ€è¦ç­‰å¾…å­è¿›ç¨‹å°†ç®¡é“å†…å®¹è¯»å–ä¸€éƒ¨åˆ†ï¼ˆæ¸…ç†æ‰ä¸€éƒ¨åˆ†ï¼‰ä¹‹åï¼Œæ‰èƒ½ç»§ç»­å¾€ç®¡é“å†…éƒ¨å†™å…¥ã€‚\n\nä½†åœ¨è¯»ç«¯ï¼Œè¿™ä¸€åˆ‡éƒ½ä¸ä¸€æ ·äº†\nè¯»å–ç­‰å¾…æˆ‘ä»¬è®©çˆ¶è¿›ç¨‹ç›´æ¥ç¡ä¸Š20såœ¨è¿›è¡Œå†™å…¥ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå­è¿›ç¨‹æ˜¯æ‰§è¡Œåˆ°readå¼€å§‹ç­‰å¾…çš„\n\nå½“çˆ¶è¿›ç¨‹ç¬¬ä¸€æ¬¡å†™å…¥ä¹‹åï¼Œå­è¿›ç¨‹ç«‹é©¬æ‰“å°å‡ºäº†æ¶ˆæ¯çš„å†…å®¹ã€‚éšåçˆ¶è¿›ç¨‹åˆè¿›å…¥äº†ä¼‘çœ ï¼Œå­è¿›ç¨‹å¼€å§‹äº†æ–°ä¸€æ¬¡ç­‰å¾…\n\nç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åªè¦ä½ ä¸å¾€ç®¡é“é‡Œé¢å†™ä¸œè¥¿ï¼Œå­è¿›ç¨‹å°±éœ€è¦ä¸€ç›´ç­‰ä¸‹å»ï¼\næºç ä¸­çš„ä½“ç°æºç ä¸­æœ‰ä¸€ä¸ªå•ç‹¬çš„ç»“æ„ä½“ï¼Œç”¨æ¥æ ‡è¯†ç®¡é“æ–‡ä»¶ã€‚å…¶ä¸­inodeä¾¿æ˜¯Linuxä¸‹çš„æ–‡ä»¶æè¿°ç¬¦\nstruct pipe_inode_info &#123;\twait_queue_head_t wait;\tunsigned int nrbufs, curbuf;\tstruct page *tmp_page;\tunsigned int readers;\tunsigned int writers;\tunsigned int waiting_writers;\tunsigned int r_counter;\tunsigned int w_counter;\tstruct fasync_struct *fasync_readers;\tstruct fasync_struct *fasync_writers;\tstruct inode *inode;\tstruct pipe_buffer bufs[PIPE_BUFFERS];&#125;;\n\nåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªwaitç»“æ„ä½“ï¼Œå…¶ä¸ºä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œç»´æŠ¤å†™å…¥å’Œè¯»å–çš„ç­‰å¾…\nstruct __wait_queue_head &#123;\tspinlock_t lock;\tstruct list_head task_list;&#125;;typedef struct __wait_queue_head wait_queue_head_t;\n\nspinlockæ˜¯ä½•æ–¹ç¥åœ£æˆ‘ä»¬æš‚ä¸”ä¸çŸ¥ï¼Œä½†list_headç»“æ„ä½“å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªç­‰å¾…é˜Ÿåˆ—çš„é“¾è¡¨\nstruct list_head &#123;\tstruct list_head *next, *prev;&#125;;\n\n\n2.4 æ§åˆ¶å¤šä¸ªå­è¿›ç¨‹ä¸Šé¢åªæ˜¯å®ç°äº†çˆ¶è¿›ç¨‹å’Œä¸€ä¸ªå­è¿›ç¨‹çš„é€šä¿¡ï¼Œåœ¨å®é™…åœºæ™¯ä¸­è¿™è¿œè¿œä¸å¤Ÿç”¨ã€‚æ¥ä¸‹æ¥å°±æ¥å®ç°ä¸€ä¸ªçˆ¶è¿›ç¨‹å’Œå¤šä¸ªå­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œé€šè¿‡ç®¡é“ç»™å­è¿›ç¨‹åˆ†é…ä¸åŒçš„ä»»åŠ¡ï¼\nå…·ä½“çš„æ“ä½œåœ¨æ³¨é‡Šä¸­æœ‰æ‰€æ ‡æ˜ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿è¯„è®ºæå‡ºï¼\n#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;functional&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;//æä¾›ä¸‰ä¸ªlambdaè¡¨è¾¾å¼auto func1 = []() &#123;cout &lt;&lt; &quot;this is func1,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;auto func2 = []() &#123;cout &lt;&lt; &quot;this is func2,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;auto func3 = []() &#123;cout &lt;&lt; &quot;this is func3,run by &quot; &lt;&lt; getpid() &lt;&lt;endl;&#125;;//é€šè¿‡funcå­˜åœ¨æ•°ç»„ä¸­vector&lt;function&lt;void()&gt;&gt; func_v;void LoadFunc()&#123;    func_v.push_back(func1);    func_v.push_back(func2);    func_v.push_back(func3);&#125;//æœ‰ä¸€ç§æ¦‚å¿µå«åšâ€è´Ÿè½½å‡è¡¡â€ï¼Œåœ¨å¤šçº¿ç¨‹/å¤šè¿›ç¨‹æ“ä½œä¸­è¾ƒå¤šä½¿ç”¨//å…¶ç†å¿µå°±æ˜¯æ¯ä¸€ä¸ªè¿›ç¨‹/çº¿ç¨‹åˆ†åˆ°çš„ä»»åŠ¡åº”è¯¥æ˜¯å¹³å‡çš„ï¼Œé¿å…å‡ºç°æŸä¸€ä¸ªè¿›ç¨‹å¹²çš„æ´»æ¯”åˆ«äººå¤šçš„æƒ…å†µvoid BalanceDivide(const vector&lt;pair&lt;int,int&gt;&gt;&amp; processMap)&#123;    //è®¾ç½®åˆå§‹åŒ–    srand((size_t)time(nullptr));    int total = 15;//åˆ†é…20æ¬¡ä»»åŠ¡    while(total&gt;0)    &#123;        sleep(1);        // é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹, é€‰æ‹©è¿›ç¨‹æ˜¯éšæœºçš„ï¼Œæ²¡æœ‰å‹ç€ä¸€ä¸ªè¿›ç¨‹ç»™ä»»åŠ¡        // è¾ƒä¸ºå‡åŒ€çš„å°†ä»»åŠ¡ç»™æ‰€æœ‰çš„å­è¿›ç¨‹ --- è´Ÿè½½å‡è¡¡        int pick = rand() % processMap.size();        // é€‰æ‹©ä¸€ä¸ªä»»åŠ¡        int task = rand() % func_v.size();        // æŠŠä»»åŠ¡ç»™ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹        write(processMap[pick].second, &amp;task, sizeof(task));        // æ‰“å°å¯¹åº”çš„æç¤ºä¿¡æ¯        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹æŒ‡æ´¾ä»»åŠ¡-&gt;&quot; &lt;&lt; task &lt;&lt; &quot; ç»™è¿›ç¨‹: &quot; &lt;&lt; processMap[pick].first &lt;&lt; &quot; ç¼–å·: &quot; &lt;&lt; pick &lt;&lt; endl;        total--;    &#125;    //ç»“æŸåï¼Œå†™å…¥0ä»£è¡¨è¿›ç¨‹ç»ˆæ­¢    for(int i=0;i&lt;processMap.size();i++)    &#123;        int end = -1;        write(processMap[i].second, &amp;end, sizeof(end));        cout &lt;&lt; &quot;stopping process pid = &quot; &lt;&lt; processMap[i].first &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;assign task end!&quot; &lt;&lt; endl;&#125;//å­è¿›ç¨‹å·¥ä½œï¼Œå‚æ•°ä¸ºpipefd[0]void Working(int pfd)&#123;    cout &lt;&lt; &quot;chlid [&quot; &lt;&lt; getpid() &lt;&lt; &quot;] start working&quot; &lt;&lt; endl;    while(1)    &#123;        int optCode = 0;//è¯»å–ä»»åŠ¡ä¸‹æ ‡        ssize_t s = read(pfd, &amp;optCode, sizeof(optCode));        if(s == 0)        &#123;            break;//è¯»å–äº†0ä¸ªå­—èŠ‚ä»£è¡¨é”™è¯¯        &#125;        else if(optCode == -1)        &#123;            break;//è¯»å–åˆ°-1ï¼Œä»£è¡¨ç»ˆæ­¢        &#125;           assert(s == sizeof(int));//åˆ¤æ–­æ˜¯å¦ä¸ºæ­£ç¡®çš„size        // æ‰§è¡Œçˆ¶è¿›ç¨‹æä¾›çš„ä»»åŠ¡        if(optCode &lt; func_v.size())         &#123;            func_v[optCode]();        &#125;    &#125;    cout &lt;&lt; &quot;chlid [&quot; &lt;&lt; getpid() &lt;&lt; &quot;] end working&quot; &lt;&lt; endl;&#125;int main()&#123;       LoadFunc();//åŠ è½½    vector&lt;pair&lt;int,int&gt;&gt; assignMap;    int processNum = 5;    for(int i=0;i&lt;processNum;i++)    &#123;        int pipefd[2];        if(pipe(pipefd)!=0)        &#123;            cerr &lt;&lt; &quot;pipe error&quot; &lt;&lt; endl;            continue;        &#125;        int pid = fork();        if(pid==0)//å­è¿›ç¨‹        &#123;            close(pipefd[1]);//å…³é—­å†™            //å¼€å§‹å·¥ä½œ            Working(pipefd[0]);            close(pipefd[0]);            exit(0);//é€€å‡ºå­è¿›ç¨‹        &#125;        close(pipefd[0]);//çˆ¶è¿›ç¨‹å…³é—­è¯»        pair&lt;int,int&gt; p = &#123;pid, pipefd[1]&#125;;//è¿›ç¨‹pidå’Œpipefdå†™ç«¯çš„é”®å€¼å¯¹        assignMap.push_back(p);        sleep(1);    &#125;    cout &lt;&lt; &quot;create all process success!&quot; &lt;&lt; endl;    BalanceDivide(assignMap);//åˆ†é…ä»»åŠ¡    //ç»“æŸåˆ†é…åï¼Œç­‰å¾…å­è¿›ç¨‹åœæ­¢è¿è¡Œ    for (int i = 0; i &lt; processNum; i++)    &#123;        if (waitpid(assignMap[i].first, nullptr, 0) &gt; 0)        &#123;            cout &lt;&lt; &quot;wait for pid = &quot; &lt;&lt; assignMap[i].first &lt;&lt; &quot; wait success! &quot;                 &lt;&lt; &quot;num: &quot; &lt;&lt; i &lt;&lt; endl;        &#125;        close(assignMap[i].second);    &#125;        return 0;&#125;\n\nå…ˆæ˜¯çˆ¶è¿›ç¨‹åˆ›å»ºäº†5ä¸ªå­è¿›ç¨‹\n\nå†å¼€å§‹ç”¨ç”Ÿæˆéšæœºæ•°çš„æ–¹å¼ï¼Œä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æŒ‡æ´¾ç›¸åº”çš„â€œä»»åŠ¡â€ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰\n\n15æ¬¡ä»»åŠ¡æŒ‡æ´¾å®Œæ¯•ä¹‹åï¼Œä»¥ä¸€ä¸ªå¾ªç¯ï¼Œé€šè¿‡ç®¡é“å†™å…¥-1ä½œä¸ºåœæ­¢ç¬¦ï¼Œè®©å­è¿›ç¨‹åœæ­¢å·¥ä½œã€‚åŒæ—¶mainå‡½æ•°ä¸­è¿›è¡Œwaitpidç­‰å¾…å­è¿›ç¨‹è¿è¡ŒæˆåŠŸï¼\n\n2.5 å‘½ä»¤è¡Œ |å‘½ä»¤è¡Œä¸­è¾“å…¥çš„|å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªåŒ¿åç®¡é“\n\nè¿™é‡Œæˆ‘ä»¬ç”¨|è¿è¡Œä¸¤ä¸ªsleepå‘½ä»¤ï¼Œå†æŸ¥çœ‹è¿™ä¸¤ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªè¿›ç¨‹æ˜¯å±äºåŒä¸€ä¸ªçˆ¶è¿›ç¨‹çš„ï¼Œè¿™è¯´æ˜è¿™ä¸¤ä¸ªsleepè¿›ç¨‹æ˜¯ä¸€å¯¹å…„å¼Ÿ~\n\nå½“çˆ¶è¿›ç¨‹åˆ›å»ºä¸€å¯¹ç®¡é“çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸¤ä¸ªå­è¿›ç¨‹ï¼Œå¹¶å°†ç®¡é“äº¤ä»˜ç»™å­è¿›ç¨‹è¿›è¡Œä½¿ç”¨\n\nçˆ¶è¿›ç¨‹åˆ›å»ºç®¡é“ï¼Œåˆ›å»ºå­è¿›ç¨‹AB\nçˆ¶è¿›ç¨‹å…³é—­pipefd[0]å’Œ[1]\nå­è¿›ç¨‹Aå…³é—­è¯»ç«¯ï¼Œæ‰§è¡Œå†™å…¥\nå­è¿›ç¨‹Bå…³é—­å†™æ®µï¼Œæ‰§è¡Œè¯»å–\n\nè€Œ|å°±æ˜¯å°†ä¿¡æ¯è½¬ç»™ä¸¤ä¸ªå­è¿›ç¨‹ä½¿ç”¨çš„ä¸€ç§åŒ¿åç®¡é“ï¼è¿™ä¹Ÿèƒ½è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å…ˆps ajxï¼Œå†ç”¨| grepåœ¨å†…éƒ¨æœç´¢å†…å®¹å¹¶æ‰“å°å‡ºæ¥ã€‚å…¶å°±æ˜¯é€šè¿‡åŒ¿åç®¡é“å®ç°äº†å‡ ä¸ªå‘½ä»¤ä¸­çš„ä¿¡æ¯å…±äº«\n\n3.å‘½åç®¡é“å’ŒåŒ¿åç®¡é“ä¸åŒçš„æ˜¯ï¼Œå‘½åç®¡é“æ˜¯é€šè¿‡ä¸€ä¸ªç®¡é“æ–‡ä»¶æ¥å®ç°çš„ï¼Œå…¶æœ‰ä¸€ä¸ªæ–‡ä»¶çš„â€œå®ä½“â€ï¼Œæ”¯æŒå¤šä¸ªè¿›ç¨‹æ‰“å¼€åŒä¸€ä¸ªç®¡é“æ–‡ä»¶ï¼Œæ‰§è¡Œè¯»å†™æ“ä½œï¼Œå®ç°ç®¡é“çš„äº¤æµ\n\næˆ‘ä»¬é€šè¿‡mkfifoæ¥å£åˆ›å»ºä¸€ä¸ªFIFO(front in front out/å…ˆè¿›å…ˆå‡º)çš„ç®¡é“æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ³¨é‡Šä¹Ÿè¡¨æ˜ä»–æ˜¯ä¸€ä¸ªå‘½åç®¡é“a named pipe\né™¤äº†å¯ä»¥ç”¨å‡½æ•°è°ƒç”¨ï¼ŒmkfifoåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤\nmkfifo ç®¡é“åå­—\n\n3.1 åˆ›å»ºç®¡é“æ–‡ä»¶æ“ä½œæ–¹æ³•å’Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼ŒæŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼Œå¹¶æŒ‡å®šè¯¥æ–‡ä»¶çš„æƒé™ã€‚ä¸ºäº†é¿å…å—ç³»ç»Ÿçš„æƒé™æ©ç å€¼çš„å½±å“ï¼Œæˆ‘ä»¬è¦ç”¨umaskå°†æƒé™æ©ç å€¼ç½®é›¶\numask(0);if(mkfifo(&quot;test.pipe&quot;, 0600) != 0)&#123;//å½“è¿”å›å€¼ä¸ä¸º0çš„æ—¶å€™ï¼Œä»£è¡¨å‡ºç°äº†é”™è¯¯    cerr &lt;&lt; &quot;mkfifo error&quot; &lt;&lt; endl;    return 1;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚å…¶æ–‡ä»¶æƒé™å€¼çš„å¼€å¤´ä¸ºpï¼Œä»£è¡¨å®ƒæ˜¯ä¸€ä¸ªç®¡é“æ–‡ä»¶\n\nä¹‹åçš„æ“ä½œåŒæ ·æ˜¯æ–‡ä»¶æ“ä½œï¼Œå› ä¸ºç®¡é“æ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶\n\nå…ˆä½¿ç”¨openæ–¹æ³•ï¼ŒæŒ‡å®šç”¨è¯»ã€å†™æ–¹æ³•\nå†åˆ†åˆ«åœ¨è¯»å†™ç«¯read/writeæ“ä½œæ–‡ä»¶\næ“ä½œå®Œæˆä¹‹åï¼Œcloseæ–‡ä»¶ï¼Œå¹¶åˆ é™¤è¯¥æ–‡ä»¶\nå› ä¸ºç®¡é“æ–‡ä»¶æœ‰å”¯ä¸€çš„è·¯å¾„ï¼Œå…¶èƒ½å¤Ÿå®Œæˆè®©ä¸¤ä¸ªè¿›ç¨‹çœ‹åˆ°åŒä¸€ä»½èµ„æºï¼Œä¹Ÿå°±å®ç°äº†è¿›ç¨‹é€šä¿¡çš„åŠŸèƒ½ï¼\n\n3.2 å®ç°ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¸‹é¢é€šè¿‡ä¸€ä¸ªæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ä»£ç ï¼Œæ¥æ¼”ç¤ºå¤šè¿›ç¨‹é€šä¿¡ã€‚\n\næœåŠ¡ç«¯è´Ÿè´£åˆ›å»ºç®¡é“æ–‡ä»¶ï¼Œä»¥è¯»æ–¹å¼æ‰“å¼€è¯¥ç®¡é“æ–‡ä»¶\nå®¢æˆ·ç«¯ä»¥å†™æ–¹å¼æ‰“å¼€ç®¡é“æ–‡ä»¶ï¼Œå‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯\n\nå®Œæ•´ä»£ç å¦‚ä¸‹ï¼ŒåŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶å’Œä¸¤ä¸ªæºæ–‡ä»¶\n//MyPath.h#pragma once#include &lt;iostream&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;#define NUM 1024#define FILE_PATH &quot;test.pipe&quot;//server.cpp#include&quot;MyPath.h&quot;int main()&#123;    //åˆ›å»ºç®¡é“æ–‡ä»¶    umask(0);    if(mkfifo(FILE_PATH, 0600) != 0)    &#123;        cerr &lt;&lt; &quot;mkfifo error&quot; &lt;&lt; endl;        return 1;    &#125;    //æ‰“å¼€ç®¡é“æ–‡ä»¶    int pipeFd = open(FILE_PATH, O_RDONLY);    if(pipeFd &lt; 0)    &#123;        cerr &lt;&lt; &quot;open fifo error&quot; &lt;&lt; endl;        return 2;    &#125;    //å¼€å§‹é€šä¿¡    cout &lt;&lt; &quot;æœåŠ¡å™¨å¯åŠ¨&quot; &lt;&lt; endl;    char buffer[NUM];    while(1)    &#123;        //æœåŠ¡ç«¯æ‰§è¡Œè¯»        ssize_t s = read(pipeFd, buffer, sizeof(buffer)-1);        if(s &gt; 0)        &#123;            buffer[s] = &#x27;\\0&#x27;;            cout &lt;&lt; &quot;å®¢æˆ·ç«¯-&gt;æœåŠ¡å™¨# &quot; &lt;&lt; buffer &lt;&lt; endl;        &#125;        else if(s == 0)        &#123;            cout &lt;&lt; &quot;å®¢æˆ·ç«¯é€€å‡ºï¼ŒæœåŠ¡å™¨ç»ˆæ­¢æ¥æ”¶&quot; &lt;&lt; endl;            break;        &#125;        else        &#123;            cout &lt;&lt; &quot;read: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;            break;        &#125;    &#125;    close(pipeFd);    cout &lt;&lt; &quot;æœåŠ¡å™¨å…³é—­&quot; &lt;&lt; endl;    unlink(FILE_PATH);    return 0;&#125;//client.cpp#include&quot;MyPath.h&quot;int main()&#123;    int pipeFd = open(FILE_PATH, O_WRONLY);    if(pipeFd &lt; 0)    &#123;        cerr &lt;&lt; &quot;open: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        return 1;    &#125;    //å®¢æˆ·ç«¯æ‰§è¡Œç®¡é“å†™å…¥    char line[NUM];    while(true)    &#123;        printf(&quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;);        fflush(stdout);        memset(line, 0, sizeof(line));        //fgetsçš„ç»“å°¾ä¼šè‡ªåŠ¨æ·»åŠ \\0        if(fgets(line, sizeof(line), stdin) != nullptr)        &#123;            //è¿™é‡Œçš„æ„ä¹‰æ˜¯å»æ‰æ¥æ”¶åˆ°çš„å›è½¦\\n            //å¦‚ï¼šabcde\\n\\0 é€šè¿‡ä¸‹é¢çš„ä»£ç å»æ‰\\n            line[strlen(line) - 1] = &#x27;\\0&#x27;;            write(pipeFd, line, strlen(line));//ç®¡é“å†™å…¥        &#125;        else        &#123;            break;        &#125;    &#125;    close(pipeFd);    cout &lt;&lt; &quot;å®¢æˆ·ç«¯é€€å‡º&quot; &lt;&lt; endl;    return 0;&#125;\n\né€šè¿‡å¤´æ–‡ä»¶ä¸­çš„æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬èƒ½ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¤„äºåŒä¸€ä¸ªå·¥ä½œç›®å½•ä¸‹ï¼Œä»¥ä¾¿ä»–ä»¬æ­£ç¡®æ‰“å¼€åŒä¸€ä¸ªç®¡é“æ–‡ä»¶\nå…ˆè¿è¡Œserverï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰å‡ºç°æœåŠ¡å™¨å¯åŠ¨çš„æ‰“å°\n\nå®¢æˆ·ç«¯å¯åŠ¨äº†ä¹‹åï¼ŒæœåŠ¡å™¨ç«¯æ‰æ‰“å°å‡ºæœåŠ¡å™¨å¯åŠ¨\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®¢æˆ·ç«¯è¾“å…¥æ¶ˆæ¯ï¼Œè½¬åˆ°æœåŠ¡ç«¯è¯»å–\n\nè¿™å°±å®Œæˆäº†ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚è¿™ä¸¤ä¸ªè¿›è¡Œå¹¶éçˆ¶å­è¿›ç¨‹ï¼Œä¹Ÿä¸æ˜¯å…„å¼Ÿå…³ç³»ï¼\nå®¢æˆ·ç«¯CTRL+Cç»ˆæ­¢çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šé€€å‡ºï¼\n\nç­‰å¾…å‰é¢æåˆ°äº†ï¼Œå½“å®¢æˆ·ç«¯æ²¡æœ‰å¯åŠ¨çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯çš„æ‰“å°æ²¡æœ‰è¢«æ‰§è¡Œ\nè¿›ä¸€æ­¥æµ‹è¯•å‘ç°ï¼Œå½“æˆ‘ä»¬åŒæ—¶ç”¨å†™æ–¹å¼æ‰“å¼€ç®¡é“æ–‡ä»¶çš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹éƒ½ä¼šåœ¨openä¸­ç­‰å¾…ï¼Œè€Œä¸æ‰§è¡Œcout\n\n23776 31027 31027 23776 pts/23   31027 S+    1001   0:00 ./server23952 31043 31043 23952 pts/24   31043 S+    1001   0:00 ./client\n\nè¿™è¯´æ˜ï¼Œç®¡é“æ–‡ä»¶å¿…é¡»è¦åŒæ—¶ä»¥è¯»å†™æ–¹å¼æ‰“å¼€ï¼Œæ‰èƒ½æ­£å¸¸æ‰§è¡Œåç»­ä»£ç ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹ä»¥å†™æ–¹å¼æ‰“å¼€äº†ä¸€ä¸ªç®¡é“ï¼Œè€Œè¯¥ç®¡é“æ²¡æœ‰è¯»ç«¯ï¼ˆåè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼‰ï¼Œè¯¥è¿›ç¨‹å°±ä¼šè¿›è¡Œé˜»å¡ç­‰å¾…\n\n4.ç®¡é“çš„ç‰¹æ€§\nå•ä¸ªç®¡é“åªæ”¯æŒå•å‘é€šä¿¡ï¼Œè¿™æ˜¯å†…æ ¸å®ç°å†³å®šçš„ã€‚åŠåŒå·¥çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ\nç®¡é“è‡ªå¸¦åŒæ­¥æœºåˆ¶ï¼Œèƒ½å¤Ÿåˆ¤æ–­ç®¡é“çš„çŠ¶æ€ï¼Œæ˜¯å¦å†™æ»¡ï¼Œæ˜¯å¦æ²¡æœ‰å†™å…¥ç­‰ç­‰\nç®¡é“æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œå…ˆå†™çš„å­—ç¬¦ä¸€å®šæ˜¯å…ˆè¢«è¯»å–çš„ï¼Œåœ¨2.3ä¸­æœ‰æ‰€ä½“ç°ã€‚éœ€è¦ç”¨æˆ·æ¥å®šä¹‰åŒºåˆ†å†…å®¹çš„è¾¹ç•Œï¼ˆæ¯”å¦‚ç½‘ç»œtcpåè®®ï¼‰\nç®¡é“æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç®¡é“çš„ç”Ÿå‘½å‘¨æœŸè·Ÿéšè¿›ç¨‹\n\n4.1 ä»€ä¹ˆæ˜¯åŠåŒå·¥ï¼ŸåŠåŒå·¥æ•°æ®ä¼ è¾“å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åˆ‡æ¢æ–¹å‘çš„å•å·¥é€šä¿¡ï¼›\nç®¡é“å°±æ˜¯ä¸€ç§åŠåŒå·¥çš„ç‰¹æ®Šæƒ…å†µï¼Œå› ä¸ºç®¡é“æœ¬èº«æ˜¯æ”¯æŒä»»æ„è¿›ç¨‹è¯»å†™çš„ã€‚å¯¹äºè¿›ç¨‹Aï¼Œå®ƒæ—¢å¯ä»¥æˆä¸ºç®¡é“çš„è¯»ç«¯ï¼Œåˆå¯ä»¥æˆä¸ºç®¡é“çš„å†™ç«¯ã€‚ä½†ä¸€æ—¦ç¡®è®¤ä¹‹åï¼Œç®¡é“çš„è¯»å†™æ–¹å‘å°±ä¸èƒ½è¢«æ”¹å˜ã€‚\næ‰€ä»¥ç®¡é“æ˜¯å±äºåŠåŒå·¥çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ\n4.2 æ‹“å±•ï¼šå•å·¥&#x2F;åŠåŒå·¥&#x2F;åŒå·¥å‚è€ƒèµ„æ–™æ¥æºï¼šåšå®¢å›­\n\nå•å·¥æ•°æ®ä¼ è¾“åªæ”¯æŒæ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼›\nåŠåŒå·¥æ•°æ®ä¼ è¾“å…è®¸æ•°æ®åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†æ˜¯ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªå…è®¸æ•°æ®åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ç§åˆ‡æ¢æ–¹å‘çš„å•å·¥é€šä¿¡ï¼›\nå…¨åŒå·¥æ•°æ®é€šä¿¡å…è®¸æ•°æ®åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œå› æ­¤ï¼Œå…¨åŒå·¥é€šä¿¡æ˜¯ä¸¤ä¸ªå•å·¥é€šä¿¡æ–¹å¼çš„ç»“åˆï¼Œå®ƒè¦æ±‚å‘é€è®¾å¤‡å’Œæ¥æ”¶è®¾å¤‡éƒ½æœ‰ç‹¬ç«‹çš„æ¥æ”¶å’Œå‘é€èƒ½åŠ›ã€‚\n\nç»“è¯­é˜¿å·´é˜¿å·´ï¼Œå…³äºç®¡é“çš„å†…å®¹åˆ°è¿™é‡Œå°±åŸºæœ¬overäº†ï¼Œæˆ‘ä»¬é€šè¿‡åŒ¿åç®¡é“å®ç°äº†æ§åˆ¶å¤šä¸ªå­è¿›ç¨‹ã€‚é€šè¿‡å‘½åç®¡é“å®ç°äº†ä¸¤ä¸ªä¸ç›¸å¹²è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡\n\nä¸‹ç¯‡åšå®¢æ˜¯å…³äºå…±äº«å†…å­˜çš„\n\nå¦‚æœæœ‰å•¥é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | ä¿¡å·","url":"/posts/2620423276/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬ä¸€èµ·æ¥åº·åº·ä¿¡å·éƒ¨åˆ†çš„å†…å®¹\n\nç³»ç»Ÿä¸ºCentOS7.6ï¼Œå®Œæ•´ä»£ç è§ Gitee\n\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯ä¿¡å·åœ¨è¿›ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å„ç§å„æ ·çš„æƒ…å†µã€‚æ“ä½œç³»ç»Ÿéœ€è¦ç”¨ä¸€å¥—æœºåˆ¶ï¼Œæ¥ç®¡ç†è¿›ç¨‹çš„äº‹ä»¶\n\nè¿›ç¨‹é€€å‡º\nè¿›ç¨‹åœæ­¢\nè¿›ç¨‹æ¢å¤è¿è¡Œ\nâ€¦â€¦\n\nåŒæ—¶ï¼Œè¿™å¥—ç®¡ç†æœºåˆ¶æ˜¯å¼‚æ­¥çš„ï¼Œå±äºä¸€ç§è½¯ï¼ˆä»¶ï¼‰ä¸­æ–­\n\nå’Œç¡¬ä»¶ä¸­æ–­æ‰“æ–­å¤„ç†å™¨ç±»ä¼¼ï¼Œè½¯ä»¶ä¸­æ–­æ‰“æ–­è¿›ç¨‹çš„æ‰§ï¼Œè®©å…¶æ‰§è¡Œå¯¹åº”ä»£ç è¿›è¡Œå“åº”\n\n1.1 ä½•ä¸ºå¼‚æ­¥?\nä»¥ç½‘è´­ç‰©å“ä¸ºä¾‹ï¼šå½“å•†å“å¯„åˆ°è‡ªæç‚¹çš„æ—¶å€™ï¼Œä¼šç»™ä½ å‘é€ä¸€æ¡å–ä»¶çš„çŸ­ä¿¡ï¼ˆä¿¡å·ï¼‰ã€‚æ­¤æ—¶æˆ‘æ­£åœ¨æ‰“æ¸¸æˆï¼Œæ²¡æ—¶é—´å»å¤„ç†è¿™ä¸ªå¿«é€’ï¼ˆå³å–å¿«é€’çš„è¡Œä¸ºå¹¶ä¸æ˜¯å¿…é¡»ç«‹é©¬æ‰§è¡Œï¼‰\nä½†è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘å·²ç»çŸ¥é“æœ‰ä¸€ä¸ªå¿«é€’åˆ°äº†ï¼ˆçŸ¥é“è‡ªå·±è·å–åˆ°äº†ä¸€ä¸ªä¿¡å·ï¼‰æœ¬è´¨ä¸Šå°±æ˜¯çŸ¥é“äº†ä¸€ä¼šè¦å»å–å¿«é€’ï¼ˆä¸€ä¼šè¦å¤„ç†ä¿¡å·ï¼‰\nå½“æ¸¸æˆä¸€æŠŠæ‰“å®Œäº†ï¼Œæˆ‘ä»¬å°±å»å–å¿«é€’äº†ï¼ˆå¤„ç†ä¿¡å·ï¼‰\n\nè¿™å°±æ˜¯ä¸€ç§å¼‚æ­¥çš„è¿‡ç¨‹ã€‚å› ä¸ºä½ ä¸çŸ¥é“ä½ çš„å¿«é€’ä»€ä¹ˆæ—¶å€™ä¼šåˆ°ç«™ç‚¹ï¼Œè¿›ç¨‹ä¹Ÿä¸çŸ¥é“è‡ªå·±ä»€ä¹ˆæ—¶å€™ä¼šæ”¶åˆ°ä¸€ä¸ªä¿¡å·\n1.2 ä¿¡å·çš„ç§ç±»ä½¿ç”¨kill -lå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›®å‰linuxç³»ç»Ÿä¸‹64ç§ä¸åŒçš„ç±»å‹ã€‚\nå…¶ä¸­å‰32ä¸ºæ ‡å‡†ï¼ˆStandardï¼‰ä¿¡å·ï¼Œå32ä¸ºå®æ—¶ï¼ˆReal-timeï¼‰ä¿¡å·ï¼›æœ¬ç¯‡åšå®¢åªå…³æ³¨æ ‡å‡†ä¿¡å·\n\nè¿™äº›ä¿¡å·ï¼Œéƒ½æ˜¯linuxç³»ç»Ÿä¸­é¢„å®šä¹‰çš„å®\n\nå…¶ä¸­æœ€å¸¸ç”¨çš„ä¾¿æ˜¯9å·ä¿¡å·ï¼Œæ¥ä¸­æ–­è¿›ç¨‹ã€‚å¹³æ—¶æˆ‘ä»¬æœ€å¸¸ç”¨çš„CTRL+Cï¼Œä¹Ÿæ˜¯é€šè¿‡å‘è¿›ç¨‹å‘2å·ä¿¡å·è®©è¿›ç¨‹é€€å‡ºçš„\n[muxue@bt-7274:~/git]$ kill -l 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR111) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+338) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+843) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+1348) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-1253) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-758) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-263) SIGRTMAX-1  64) SIGRTMAX\n\nåœ¨include/linux/signal.hä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹ä¿¡å·çš„è§£é‡Šï¼Œä»¥åŠå…¶é»˜è®¤å¤„ç†æ–¹æ³• default action\n/* * In POSIX a signal is sent either to a specific thread (Linux task) * or to the process as a whole (Linux thread group).  How the signal * is sent determines whether it&#x27;s to one thread or the whole group, * which determines which signal mask(s) are involved in blocking it * from being delivered until later.  When the signal is delivered, * either it&#x27;s caught or ignored by a user handler or it has a default * effect that applies to the whole thread group (POSIX process). * * The possible effects an unblocked signal set to SIG_DFL can have are: *   ignore\t- Nothing Happens *   terminate\t- kill the process, i.e. all threads in the group, * \t\t  similar to exit_group.  The group leader (only) reports *\t\t  WIFSIGNALED status to its parent. *   coredump\t- write a core dump file describing all threads using *\t\t  the same mm and then kill all those threads *   stop \t- stop all the threads in the group, i.e. TASK_STOPPED state * * SIGKILL and SIGSTOP cannot be caught, blocked, or ignored. * Other signals when not blocked and set to SIG_DFL behaves as follows. * The job control signals also have other special effects. * *\t+--------------------+------------------+ *\t|  POSIX signal      |  default action  | *\t+--------------------+------------------+ *\t|  SIGHUP            |  terminate\t| *\t|  SIGINT            |\tterminate\t| *\t|  SIGQUIT           |\tcoredump \t| *\t|  SIGILL            |\tcoredump \t| *\t|  SIGTRAP           |\tcoredump \t| *\t|  SIGABRT/SIGIOT    |\tcoredump \t| *\t|  SIGBUS            |\tcoredump \t| *\t|  SIGFPE            |\tcoredump \t| *\t|  SIGKILL           |\tterminate(+)\t| *\t|  SIGUSR1           |\tterminate\t| *\t|  SIGSEGV           |\tcoredump \t| *\t|  SIGUSR2           |\tterminate\t| *\t|  SIGPIPE           |\tterminate\t| *\t|  SIGALRM           |\tterminate\t| *\t|  SIGTERM           |\tterminate\t| *\t|  SIGCHLD           |\tignore   \t| *\t|  SIGCONT           |\tignore(*)\t| *\t|  SIGSTOP           |\tstop(*)(+)  \t| *\t|  SIGTSTP           |\tstop(*)  \t| *\t|  SIGTTIN           |\tstop(*)  \t| *\t|  SIGTTOU           |\tstop(*)  \t| *\t|  SIGURG            |\tignore   \t| *\t|  SIGXCPU           |\tcoredump \t| *\t|  SIGXFSZ           |\tcoredump \t| *\t|  SIGVTALRM         |\tterminate\t| *\t|  SIGPROF           |\tterminate\t| *\t|  SIGPOLL/SIGIO     |\tterminate\t| *\t|  SIGSYS/SIGUNUSED  |\tcoredump \t| *\t|  SIGSTKFLT         |\tterminate\t| *\t|  SIGWINCH          |\tignore   \t| *\t|  SIGPWR            |\tterminate\t| *\t|  SIGRTMIN-SIGRTMAX |\tterminate       | *\t+--------------------+------------------+ *\t|  non-POSIX signal  |  default action  | *\t+--------------------+------------------+ *\t|  SIGEMT            |  coredump\t| *\t+--------------------+------------------+ * * (+) For SIGKILL and SIGSTOP the action is &quot;always&quot;, not just &quot;default&quot;. * (*) Special job control effects: * When SIGCONT is sent, it resumes the process (all threads in the group) * from TASK_STOPPED state and also clears any pending/queued stop signals * (any of those marked with &quot;stop(*)&quot;).  This happens regardless of blocking, * catching, or ignoring SIGCONT.  When any stop signal is sent, it clears * any pending/queued SIGCONT signals; this happens regardless of blocking, * catching, or ignored the stop signal, though (except for SIGSTOP) the * default action of stopping the process may happen later or never. */\n\nè¿™ä¹Ÿæ„å‘³ç€ï¼šå³ä¾¿æ²¡æœ‰æ¥æ”¶åˆ°ä¿¡å·ï¼Œè¿›ç¨‹ä¹Ÿå…·å¤‡æœ‰è¯†åˆ«å’Œå¤„ç†è¿™ä¸ªä¿¡å·çš„èƒ½åŠ›ï¼å› ä¸ºåœ¨ç³»ç»Ÿä¸­ï¼Œå·²ç»ç»™æ¯ä¸€ä¸ªè¿›ç¨‹å’Œä¿¡å·æŒ‡å®šäº†é»˜è®¤åŠ¨ä½œï¼\n1.3 ä¿¡å·äº§ç”Ÿæœ‰å¾ˆå¤šæƒ…å†µä¼šäº§ç”Ÿä¿¡å·\n\nç³»ç»Ÿæ¥å£ï¼ˆkillå‘½ä»¤ï¼‰\né”®ç›˜äº§ç”Ÿï¼ˆCTRL+R  CTRL+\\)\nè½¯ä»¶æ¡ä»¶ï¼ˆè¿›ç¨‹åœæ­¢ï¼Œè¿›ç¨‹è¿è¡Œå®Œé€€å‡ºï¼‰\nç¡¬ä»¶å¼‚å¸¸ï¼ˆæ¯”å¦‚é™¤0é”™è¯¯ï¼‰\n\n1.4 ä¿¡å·åŠ¨ä½œæ—¢ç„¶æœ‰é»˜è®¤åŠ¨ä½œï¼Œé‚£è‚¯å®šä¹Ÿæœ‰éé»˜è®¤çš„äº†ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹å¯¹ä¿¡å·çš„å¤„ç†åˆ†ä¸ºä¸‰ç§ä¸åŒçš„æ–¹å¼\n\né»˜è®¤åŠ¨ä½œ\nè‡ªå®šä¹‰åŠ¨ä½œ\nå¿½ç•¥\n\nå‰é¢æåˆ°ï¼Œä¸€ä¸ªè¿›ç¨‹å¹¶ä¸ä¸€å®šéœ€è¦ç«‹åˆ»å¤„ç†ä¸€ä¸ªä¿¡å·ã€‚é‚£ä¹ˆå®ƒä¸€å®šéœ€è¦æœ‰ä¸€ä¸ªåŠæ³•æ¥è®°ä½è‡ªå·±æ”¶åˆ°çš„ä¿¡å·ã€‚\nè€Œå­˜å‚¨ä¿¡å·ï¼Œæ˜¯ç”±è¿›ç¨‹çš„PCBæ¥å®Œæˆçš„ï¼\nç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿›ç¨‹ä¸­çš„ä¿¡å·ä¸€å…±æ˜¯64ä¸ªï¼Œåˆšå¥½æ˜¯8ä¸ªå­—èŠ‚ï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½å›¾ç»“æ„ï¼Œç”¨ä¸¤ä¸ªintç±»å‹æ¥å­˜æ”¾ä¸€ä¸ªè¿›ç¨‹æ”¶åˆ°çš„å„ç§ä¿¡å·ã€‚\n\nåœ¨ç³»ç»Ÿå†…æ ¸ä¸­ï¼Œåˆ†åˆ«æœ‰ä¸‰ä¸ªè¡¨ï¼Œç”¨æ¥å­˜æ”¾è¿›ç¨‹çš„ä¿¡å·ã€‚è€Œè¿™äº›ä¿¡å·åœ¨ä½å›¾ä¸­çš„ä½ç½®ï¼Œå°±æ˜¯åœ¨handleræ–¹æ³•é›†ä¸­å¤„ç†åŠ¨ä½œçš„ä¸‹æ ‡\nblock - 1è¡¨ç¤ºè¯¥è¿›ç¨‹å±è”½è¿™ä¸ªä¿¡å·pending - è¡¨ç¤ºè¿›ç¨‹æ”¶åˆ°äº†ä»€ä¹ˆä¿¡å·ï¼Œ1ä»£è¡¨æ”¶åˆ°ä¸”æœªå¤„ç†handler - æ¯ä¸€ä¸ªä¿¡å·æ‰€å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œé»˜è®¤/å¿½ç•¥/è‡ªå®šä¹‰\n\nè¿™ä¸€åˆ‡éƒ½æ˜¯å¤„äºè¿›ç¨‹PCBä¸­çš„ï¼Œåªæœ‰æ“ä½œç³»ç»Ÿèƒ½ä¸ºæˆ‘ä»¬ç®¡ç†ã€‚æ‰€ä»¥æ“ä½œç³»ç»Ÿæä¾›äº†ç›¸å…³çš„æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¯¹è¿›ç¨‹ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰è®¾ç½®ã€‚\npendingè¡¨ä¸­çš„ä¿¡å·åªèƒ½ä¿å­˜ä¸€ä¸ªï¼Œå¦‚æœä¸€ä¸ªä¿¡å·å°šæœªå¤„ç†ï¼Œè¯¥ä½å›¾ä¸º1ï¼›å¦å¤–ä¸€ä¸ªç›¸åŒä¿¡å·åˆ°æ¥çš„æ—¶å€™ï¼Œä¼šè¢«ç›´æ¥ä¸¢å¼ƒæ‰ã€‚ï¼ˆpendingè¡¨åªèƒ½è®°ä½ä¸€ä¸ªä¿¡å·ï¼‰\nhandlerè¡¨ä¸­çš„ä¸¤ä¸ªå®å¦‚ä¸‹ï¼š\n\nSIG_DFL é»˜è®¤æ–¹æ³•\nSIG_IGN å¿½ç•¥\nå¿½ç•¥æ˜¯ä¿¡å·å¤„ç†çš„ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬èƒ½æ­£å¸¸æ”¶åˆ°è¿™ä¸ªä¿¡å·ï¼Œå¤„ç†æ–¹æ³•æ˜¯ä¸ç®¡ä»–\n\n\n2.ç³»ç»Ÿæ¥å£2.1 signal#include &lt;signal.h&gt;typedef void (*sighandler_t)(int);sighandler_t signal(int signum, sighandler_t handler);\n\nè¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨äºè®¾ç½®æŸä¸ªä¿¡å·çš„å¤„ç†æ–¹æ³•ã€‚å¦‚æœè®¾ç½®æˆåŠŸï¼Œåˆ™è¿”å›å€¼ä¸ºè¿™ä¸ªä¿¡å·çš„æ—§å¤„ç†åŠ¨ä½œï¼›ä¸è¿‡æˆ‘ä»¬ä¸€èˆ¬ä¸å…³å¿ƒè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚\nRETURN VALUE   signal()  returns the previous value of the signal handler, or SIG_ERR on error. In the event of an error, errno is set to indicate the cause.\n\næ¯”å¦‚æˆ‘ä»¬å°†é”®ç›˜é€€å‡ºçš„2å·è‡ªå®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ç”¨ctrl+cç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼›\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;int main()&#123;    //å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    signal(2, handler);    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);    while (true)    &#123;        cout &lt;&lt; &quot;è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\nå› ä¸ºæ˜¯ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å½“å‰è¿›ç¨‹å¤„äºä»€ä¹ˆçŠ¶æ€ï¼Œéƒ½ä¸ä¼šå½±å“è¿™ä¸ªå›è°ƒåŠæ³•çš„è°ƒç”¨ã€‚\næ¯”å¦‚CTRL+Cçš„é»˜è®¤ç­–ç•¥æ˜¯ç»ˆæ­¢æŸä¸ªå‰å°è¿›ç¨‹ï¼Œä½†åœ¨æˆ‘ä»¬ä¹‹å‰çš„æµ‹è¯•ä¸­ï¼Œå³ä¾¿è¿™ä¸ªè¿›ç¨‹åœ¨sleepæˆ–è€…æ˜¯åœ¨æŸäº›å…±äº«èµ„æºä¸­è¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œå®ƒä¾æ—§èƒ½è¢«CTRL+Cæ‰€å‘é€çš„2å·ä¿¡å·ç»ˆæ­¢ã€‚\nåŒç†ï¼Œåœ¨è®¾ç½®äº†è‡ªå®šä¹‰çš„ä¿¡å·æ•æ‰å‡½æ•°åï¼Œæˆ‘ä»¬å‘é€ä¿¡å·çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¹Ÿèƒ½æ ¹æ®å½“åˆè®¾ç½®çš„å›è°ƒå‡½æ•°ï¼ˆåº•å±‚æœ‰å¯¹åº”çš„ç»“æ„ä½“æ¥å­˜å‚¨å’Œè¿™ä¸ªè¿›ç¨‹ç›¸å…³çš„ä¿¡å·å¤„ç†å‡½æ•°ï¼‰æˆåŠŸå°†å…¶è°ƒç”¨ã€‚\n2.1.1 å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹è¿™é‡Œå¯¹ctrl+cçš„ä½œç”¨è¿›ä¸€æ­¥æè¿°ï¼Œå®ƒåªèƒ½ç”¨æ¥ä¸­æ–­ä¸€ä¸ªå‰å°è¿›ç¨‹\n./test #æˆ‘ä»¬ç›´æ¥è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå°±æ˜¯å‰å°è¿›ç¨‹\n\nä¹‹å‰è¿™ç§ç›´æ¥è¿è¡Œè¿›ç¨‹ï¼Œåœ¨bashä¸Šæ‰“å°å†…å®¹çš„æ–¹å¼ï¼Œéƒ½æ˜¯ä¸€ä¸ªå‰å°è¿›ç¨‹ï¼Œå¯ä»¥ç”¨ctrl+cç»ˆæ­¢ï¼›æˆ‘ä»¬å¯ä»¥åœ¨åé¢åŠ ä¸Š&amp;è®¾ç½®ä¸ºä¸€ä¸ªåå°è¿›ç¨‹\n\n&amp;åªæ˜¯ä¸´æ—¶åœ¨åå°è¿è¡Œï¼Œbashå…³é—­åä¼šç»ˆæ­¢ï¼›å¦‚æœæƒ³æŒä¹…åœ¨åå°è¿è¡Œï¼Œéœ€è¦åœ¨å‘½ä»¤æœ€å‰é¢åŠ ä¸Šnohup\n\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./test &amp;[1] 8898[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898^C[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898^C[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 8898\n\nè¿™æ—¶å€™è¿™ä¸ªè¿›ç¨‹ä¼šä¸€ç›´åœ¨å½“å‰bashçš„åå°æ‰“å°ï¼ŒæœŸé—´æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ï¼Œä½†æ˜¯å®ƒä¾æ—§ä¼šä¸åœçš„æ‰“å°ã€‚ctrl+cæ— æ³•ç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰åœ¨å‰å°è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ps jax | grep test22965  8898  8898 22965 pts/22   22965 S     1001   0:00 ./test\n\npså‘½ä»¤æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°å…¶è¿è¡Œæ€ä¸ºSï¼›è€Œå‰å°è¿›ç¨‹ï¼Œè¿è¡Œæ€ä¸ºS+\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ps jax | grep test22965  9664  9664 22965 pts/22    9664 S+    1001   0:00 ./test\n\nä¸è¿‡ï¼Œè™½ç„¶æˆ‘ä»¬ä¸èƒ½ç”¨CTRL+Cç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼Œä½†ä½¿ç”¨kill -2å‘é€2å·ä¿¡å·ï¼Œæ˜¯å¯ä»¥ç»ˆæ­¢æ‰è¿™ä¸ªè¿›ç¨‹çš„ï¼ˆå‰ææ˜¯æ²¡æœ‰è‡ªå®šä¹‰2å·ä¿¡å·çš„æ–¹æ³•ï¼‰\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464è¿›ç¨‹æ­£åœ¨è¿è¡Œ: 10464[1]+  Interrupt               ./test[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\n2.1.2 å¾ªç¯æ•æ‰æ‰€æœ‰ä¿¡å·æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œæ•æ‰æ‰€æœ‰çš„ä¿¡å·ï¼›æ‰€æœ‰ä¿¡å·çš„åˆ—è¡¨å¯ä»¥é€šè¿‡kill -lå‘½ä»¤è·å–åˆ°ã€‚\n//.....//å…¶ä½™ä»£ç åŒä¸Šint main()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    //signal(2, handler);//å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);    while (true)    &#123;        cout &lt;&lt; &quot;è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\nè®¾ç½®äº†ä¹‹åï¼Œå¯¹åº”çš„ä¿¡å·éƒ½ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°ã€‚ä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œé‚£ä¾¿æ˜¯kill -9ï¼Œä¹å·ä¿¡å·æ˜¯ä¸èƒ½è¢«è‡ªå®šä¹‰æ•è·çš„ï¼\n\n2.1.3 ä¿¡å·9&#x2F;19åœ¨LINUXä¸‹ï¼Œ9å·ä¿¡å·æ˜¯ä¸€ä¸ªç®¡ç†å‘˜ä¿¡å·ï¼Œå…·æœ‰æ€æ­»è¿›ç¨‹çš„æœ€é«˜æƒé™ï¼Œä¸èƒ½è¢«è‡ªå®šä¹‰æ•æ‰ï¼\n\nä½ æƒ³å•Šï¼Œè¦æ˜¯linuxä¸å¯¹9å·è¿›è¡Œé™åˆ¶ï¼Œé‚£æˆ‘æŠŠæ‰€æœ‰ä¿¡å·éƒ½æ•æ‰äº†ï¼Œå²‚ä¸æ˜¯è¿™ä¸ªè¿›è¡Œæ²¡æœ‰åŠæ³•è¢«å¤–éƒ¨ä¸­æ­¢äº†ï¼Ÿå°ç—…æ¯’å•Šï¼ğŸ˜‚\n\nå’Œ9å·ä¿¡å·ä¸€æ ·ä¸èƒ½è¢«å±è”½çš„ï¼Œè¿˜æœ‰19å·ä¿¡å·SIGSTOP\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process running: 7779process running: 7779process running: 7779process running: 7779process running: 7779[1]+  Stopped                 ./tsig[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nè€Œ6å·ä¿¡å·å¯ä»¥è¢«æ•æ‰ï¼Œè‡ªå®šä¹‰æ•æ‰æ–¹æ³•æ‰§è¡Œåï¼Œè¿›ç¨‹ä¾æ—§ä¼šé€€å‡ºã€‚å‚è€ƒ2.4 abort\n2.2 killkillä¸ä»…æ˜¯ä¸€ä¸ªç³»ç»Ÿå‘½ä»¤ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªç³»ç»Ÿæ¥å£ï¼›\n\nä¸€èˆ¬è¿™ç§æƒ…å†µï¼Œç”¨man killæŸ¥çœ‹å‘½ä»¤çš„æ–‡æ¡£ï¼Œman 2 killæŸ¥çœ‹æ¥å£å‡½æ•°\n\nä¹‹å‰æˆ‘ä»¥ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªç”¨æ¥å¹²æ‰è¿›ç¨‹çš„å‘½ä»¤ï¼ˆæ¯•ç«Ÿkillå°±æ˜¯è¿™ä¸ªæ„æ€ï¼‰ç°åœ¨æ‰çŸ¥é“åŸæ¥å®ƒçš„ä½œç”¨æ˜¯ç»™è¿›ç¨‹å‘ä¿¡å·\n//kill - send signal to a process#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;int kill(pid_t pid, int sig);\n\nå®ƒçš„è¿”å›å€¼å¾ˆç®€å•ï¼Œå¦‚æœæˆåŠŸå‘é€ä¿¡å·ï¼Œåˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›-1å¹¶ä¸”æ›´æ–°errno\nRETURN VALUE       On success (at least one signal was sent), zero is returned.  On error, -1 is returned, and errno is set appropriately\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°å®ç°ï¼Œæ¥åˆ¶ä½œä¸€ä¸ªè‡ªå·±çš„killå‘½ä»¤\nvoid mykill(int argc,char *argv[])&#123;    if(argc != 3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; signo-id process-id&quot; &lt;&lt;endl;        exit(1);    &#125;    if(kill(static_cast&lt;pid_t&gt;(atoi(argv[2])), atoi(argv[1])) == -1)    &#123;        cerr &lt;&lt; &quot;kill: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(2);//å‡ºç°é”™è¯¯    &#125;    exit(0);//æ­£å¸¸æ‰§è¡Œ&#125;//argcå’Œargvæ˜¯å‘½ä»¤è¡Œå‚æ•°//argcä¼ å…¥å‘½ä»¤ä¸ªæ•°ï¼ŒåŒ…æ‹¬./test//argvä¼ å…¥å‘½ä»¤çš„å­—ç¬¦ä¸²åœ°å€int main(int argc, char *argv[])&#123;    mykill(argc,argv);    return 0;&#125;\n\næˆåŠŸå‘é€äº†ä¿¡å·ï¼\n\nå¦‚æœæˆ‘ä»¬ä½¿ç”¨é”™è¯¯çš„æ—¶å€™ï¼Œåˆ™ä¼šå‘é€æç¤ºä¿¡æ¯ğŸ‘\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./mkillUsage: ./mkill signo-id process-id\n\n2.2.1 killallè¿™ä¸ªæ¥å£å¯ä»¥é€šè¿‡è¿›ç¨‹åå‘æ‰€æœ‰è¿™ä¸ªåå­—çš„è¿›ç¨‹å‘ä¿¡å·\n[muxue@bt-7274:~/git]$ killall tsig\n\né€šè¿‡æµ‹è¯•å¯ä»¥å‘ç°ï¼Œå®ƒå‘é€çš„æ˜¯ç¬¬15å·ä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process running: 5846process running: 5846process 5846 get signal: 15process running: 5846process running: 5846\n\n\n2.3 raiseè¿™ä¸ªç³»ç»Ÿæ¥å£çš„ä½œç”¨æ˜¯ç»™è‡ªå·±å‘ä¿¡å·\n#include &lt;signal.h&gt;int raise(int sig);\n\nè¿”å›0ä»£è¡¨è°ƒç”¨æˆåŠŸï¼Œé0ä»£è¡¨å¤±è´¥\nRETURN VALUE       raise() returns 0 on success, and nonzero for failure.\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œè¿›ç¨‹ä¼šä¸æ–­çš„ç»™è‡ªå·±å‘é€2å·ä¿¡å·\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    signal(2, handler);//å°†äºŒå·ä¿¡å·è®¾ç½®ä¸€ä¸ªå›è°ƒï¼Œå…¶ä½™ä¿¡å·ä¸åšå¤„ç†    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();//è®¾ç½®å¯¹è¿›ç¨‹ä¿¡å·çš„å±è”½    while(1)    &#123;        raise(2);        sleep(1);    &#125;    return 0;&#125;\n\næ­¤æ—¶èƒ½çœ‹åˆ°æ¯ä¸€ç§’ä¼šè°ƒç”¨æˆ‘ä»¬è‡ªå·±å†™çš„handleræ–¹æ³•ï¼Œæ‰“å°æ”¶åˆ°2å·ä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process get signal: 2process get signal: 2process get signal: 2process get signal: 2process get signal: 2\n\n2.4 abortå‘è‡ªå·±å‘é€6) SIGABRTä¿¡å·\n#include &lt;stdlib.h&gt;void abort(void);\n\nè¿˜æ˜¯2.3ä¸­çš„ä»£ç ï¼Œå°†raise(2)ä¿®æ”¹ä¸ºabort()ï¼ŒåŒæ—¶æ•æ‰6å·ä¿¡å·ã€‚\næ­¤æ—¶èƒ½è§‚å¯Ÿåˆ°æˆ‘ä»¬è‡ªå·±å†™çš„handleræ–¹æ³•çš„ç¡®è¢«è°ƒç”¨äº†ï¼Œä½†æ˜¯è¿›ç¨‹ä¾æ—§ç»ˆæ­¢äº†\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†process get signal: 6Aborted[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nè¿™è¯´æ˜6å·ä¿¡å·æœ‰ä¸€ä¸ªç‰¹æ€§ï¼šå¯ä»¥è¢«æ•æ‰æ‰§è¡Œè‡ªå®šä¹‰æ–¹æ³•ï¼Œä½†æ‰§è¡Œå®Œæ¯•ä¹‹åéœ€è¦é€€å‡ºï¼\nç›¸æ¯”ä¹‹ä¸‹ï¼Œ9å·ä¿¡å·æ˜¯ä¸èƒ½è¢«æ•æ‰\n\n2.5 alarmè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè®¾å®šç§’æ•°ï¼Œæ—¶é—´åˆ°äº†ä¹‹åï¼Œä¼šæ”¶åˆ°14) SIGALRMä¿¡å·\n#include &lt;unistd.h&gt;unsigned int alarm(unsigned int seconds);\n\nRETURN VALUE    alarm()  returns  the number of seconds remaining until any previously scheduled alarm was due to be delivered, or zero if there was no previously scheduled alarm.\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();//è®¾ç½®å¯¹è¿›ç¨‹ä¿¡å·çš„å±è”½    alarm(4);//4såå‘è‡ªå·±å‘é€14ä¿¡å·    cout &lt;&lt; &quot;set alarm, sleep&quot; &lt;&lt; endl;    sleep(8);    cout &lt;&lt; &quot;sleep finish&quot;&lt;&lt;endl;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°åœ¨ä¼‘çœ æœŸé—´ï¼Œè¿›ç¨‹æ”¶åˆ°äº†14å·ä¿¡å·ã€‚æ­¤æ—¶è¿›ç¨‹å¹¶æ²¡æœ‰é€€å‡ºï¼Œè€Œæ˜¯ç»§ç»­ä¼‘çœ \n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†set alarm, sleepprocess get signal: 14sleep finish[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nå¦‚æœæˆ‘ä»¬ä¸å¯¹14å·ä¿¡å·è‡ªå®šä¹‰æ•æ‰ï¼Œåˆ™ä¼šç›´æ¥é€€å‡ºè¿›ç¨‹\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigset alarm, sleepAlarm clock[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œalarmä¿¡å·æœ¬èº«ä¸ä¼šè®©è¿›ç¨‹ä¼‘çœ ã€‚å¦‚æœè¿›ç¨‹åœ¨alarmä¿¡å·è®¾å®šç§’æ•°ä¹‹å‰ç»“æŸï¼Œåˆ™ä»€ä¹ˆäº‹æƒ…éƒ½ä¸ä¼šå‘ç”Ÿ\n2.6 sigset_tä¿¡å·é›†è¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œå…¶ä¸ºblock&#x2F;pendingä½å›¾çš„å­˜å‚¨ç»“æ„ï¼Œè¢«ç§°ä½œä¿¡å·é›†/ä¿¡å·å±è”½å­—\nè™½ç„¶æˆ‘ä»¬èƒ½ç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»å‹ï¼Œ ä½†æ˜¯å¯¹è¿™ä¸ªä¿¡å·é›†ä¸­çš„ä½å›¾æ“ä½œå¿…é¡»è¦è°ƒç”¨ç³»ç»Ÿæ¥å£æ¥å®Œæˆ\n#include &lt;signal.h&gt;int sigemptyset(sigset_t *set);//åˆå§‹åŒ–ä½å›¾(æ¸…ç©º)int sigfillset(sigset_t *set);//å…¨éƒ¨ç½®ä¸º1int sigaddset(sigset_t *set, int signum);//è®¾ç½®ä½å›¾ä¸­æŸä¸€ä½çš„æ•°æ®int sigdelset(sigset_t *set, int signum);//åˆ é™¤ä½å›¾ä¸­æŸä¸€ä½çš„æ•°æ®//åˆ¤æ–­æŸä¸€ä½ä¿¡å·æ˜¯å¦åœ¨è¯¥é›†åˆä¸­int sigismember(const sigset_t *set, int signum);\n\n2.7 sigprocmaskæ›´æ”¹æˆ–åˆ™è·å–å½“å‰è¿›ç¨‹çš„ä¿¡å·å±è”½å­—\n#include &lt;signal.h&gt;int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¤„ç†æ–¹æ³•ï¼Œåˆ†åˆ«æœ‰ä¸‹é¢ä¸‰ç§\n\nSIG_BLOCK å°†setå‚æ•°ä¸­åŒ…å«çš„ä½æ•°è®¾ç½®ä¸ºå±è”½\nSIG_UNBLOCK å°†setå‚æ•°ä¸­åŒ…å«çš„ä½æ•°è§£é™¤å±è”½\nSIG_SETMASK å°†å½“å‰çš„ä¿¡å·å±è”½å­—è®¾ç½®ä¸ºsetï¼ˆè¦†ç›–ï¼‰\n\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚å¦‚æœä¼ å…¥äº†oldsetï¼Œé‚£ä¹ˆæ—§çš„ä¿¡å·å±è”½å­—ä¼šè¢«æ”¾å…¥oldsetä¸­\nSIG_BLOCK  The set of blocked signals is the union of the current set and the set argument.SIG_UNBLOCK  The signals in set are removed from the current set of blocked signals.  It is permissible to attempt  to  unblock  a  signal which is not blocked.SIG_SETMASK   The set of blocked signals is set to the argument set.If oldset is non-NULL, the previous value of the signal mask is stored in oldset.RETURN VALUE       sigprocmask() returns 0 on success and -1 on error.  In the event of an error, errno is set to indicate the cause.\n\nå¦‚æœç”¨è¯¥æ¥å£æ¥è§¦äº†å¯¹æŸä¸€ä¸ªä¿¡å·çš„é˜»å¡ï¼Œé‚£ä¹ˆåœ¨è¯¥å‡½æ•°returnå‰ï¼Œè‡³å°‘å…¶ä¸­ä¸€ä¸ªæ¶ˆæ¯è¢«é€è¾¾\n2.8 sigpendingè·å–å½“å‰è¿›ç¨‹çš„pendingä¿¡å·é›†\n#include &lt;signal.h&gt;int sigpending(sigset_t *set);\n\nå‚æ•°ä¸ºä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚æ­£ç¡®è·å–è¿”å›0ï¼Œå¦åˆ™-1\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥æ‰“å°å½“å‰è¿›ç¨‹çš„ä¿¡å·é›†äº†\n//æ‰“å°ä¿¡å·é›†çš„å†…å®¹void showPending(sigset_t* pdg_ptr)&#123;    for(int i=1;i&lt;32;i++)    &#123;        if(sigismember(pdg_ptr,i))        &#123;            cout &lt;&lt; &quot;1&quot;;        &#125;        else        &#123;            cout &lt;&lt; &quot;0&quot;;        &#125;    &#125;    cout &lt;&lt; endl;&#125;int main()&#123;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºä¸€ç›´åœ¨æ‰“å°å½“å‰è¿›ç¨‹çš„ä¿¡å·é›†\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigstart process: 30981000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n\nä¸è¿‡æ­¤æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹ä¿¡å·è¿›è¡Œå±è”½ï¼Œæ‰€ä»¥ç»™è¿™ä¸ªè¿›ç¨‹å‘ä¿¡å·ä¼šè¢«ç«‹å³å¤„ç†ï¼ˆé€’è¾¾ï¼‰ä¸èƒ½åœ¨pendingè¡¨ä¸­è§‚å¯Ÿåˆ°ç°è±¡\n2.8.1 å±è”½2å·ä¿¡å·æ­¤æ—¶å°è¯•ä½¿ç”¨sigprocmaskæ¥å±è”½æŸä¸€ä¸ªä¿¡å·ï¼Œå†æ¥è§‚å¯Ÿæƒ…å†µ\nint main(int argc, char *argv[])&#123;    //blockæ‰2å·ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    sigaddset(&amp;nsig,2);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°å½“æˆ‘ä»¬é”®å…¥CTRL+Cçš„æ—¶å€™ï¼Œ2å·ä¿¡å·è¢«blockäº†æ²¡æœ‰å¤„ç†ï¼Œpendingè¡¨ä¸Šçš„2å·ä¿¡å·å°±ä¼šå˜ä¸º1ï¼Œä¸”å¤šæ¬¡CTRL+Cä¸ä¼šæœ‰å˜åŒ–\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigstart process: 360800000000000000000000000000000000000000000000000000000000000000^C0100000000000000000000000000000010000000000000000000000000000001000000000000000000000000000000100000000000000000000000000000^C01000000000000000000000000000000100000000000000000000000000000\n\n2.8.2 å±è”½æ‰€æœ‰ä¿¡å·å¯ä»¥ç”¨ä¸€ä¸ªå¾ªç¯è®¾ç½®æ‰€æœ‰çš„ä¿¡å·ä½ï¼Œè®©å½“å‰è¿›ç¨‹å±è”½æ‰æ‰€æœ‰ä¿¡å·\nint main(int argc, char *argv[])&#123;    //blockæ‰æ‰€æœ‰ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    for(int i=1;i&lt;32;i++)    &#123;        sigaddset(&amp;nsig,i);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    &#125;    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    while(1)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œä¸ç®¡ç»™è¿™ä¸ªè¿›ç¨‹å‘å‡ å·ä¿¡å·ï¼Œéƒ½ä¼šè¢«å±è”½æ˜¾ç¤ºåœ¨pendingé›†ä¸­ï¼›9å·ä¿¡å·ä¾æ—§æ˜¯è€å¤§å“¥ï¼Œä¸å—å½±å“ï¼Œä¾æ—§èƒ½å¹²æ‰è¿™ä¸ªè¿›ç¨‹\n\n2.8.3 è§£é™¤å±è”½å¦‚æœåœ¨è®¾ç½®å±è”½ä¹‹åï¼Œä¼‘çœ 15sï¼ˆåœ¨æ­¤æœŸé—´æ¥æ”¶ä¿¡å·ï¼‰å†æ¥è§¦å¯¹ä¿¡å·çš„å±è”½\nint main(int argc, char *argv[])&#123;    //blockæ‰æ‰€æœ‰ä¿¡å·    sigset_t nsig,osig;    sigemptyset(&amp;nsig);    sigemptyset(&amp;osig);    for(int i=1;i&lt;32;i++)    &#123;        sigaddset(&amp;nsig,i);//åœ¨nsigä¸­è®¾ç½®2ä¸º1    &#125;    sigprocmask(SIG_BLOCK,&amp;nsig,&amp;osig);//æ·»åŠ å±è”½    TestSignal();//è®¾ç½®ä¿¡å·è‡ªå®šä¹‰å¤„ç†    cout &lt;&lt; &quot;start process: &quot; &lt;&lt; getpid() &lt;&lt; endl;    sigset_t pdg;    int k=15;    while(k--)    &#123;        sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†        if(sigpending(&amp;pdg)==0)//è·å–        &#123;            showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°        &#125;        else        &#123;            cout &lt;&lt; getpid() &lt;&lt; &quot; get pending err&quot;&lt;&lt;endl;        &#125;        sleep(1);    &#125;    //åˆ©ç”¨osigæ¢å¤ä¹‹å‰çš„blockè¡¨    sigprocmask(SIG_SETMASK,&amp;osig,nullptr);    sigemptyset(&amp;pdg);//åˆå§‹åŒ–ä¿¡å·é›†    if(sigpending(&amp;pdg)==0)//è·å–    &#123;        showPending(&amp;pdg);//è·å–æˆåŠŸï¼Œæ‰“å°    &#125;    sleep(10);    cout &lt;&lt; &quot;process quit&quot;&lt;&lt;endl;    return 0;&#125;\n\næ­¤æ—¶å°±èƒ½è§‚å¯Ÿåˆ°ï¼Œä¿¡å·è¢«ç«‹é©¬å¤„ç†ï¼Œpendingè¡¨å˜ä¸ºå…¨0\n\n2.9 sigaction#include &lt;signal.h&gt;int sigaction(int signum, const struct sigaction *act,\t\t\tstruct sigaction *oldact);\n\nè¿™ä¸ªå‡½æ•°çš„å‚æ•°å’Œsignalå‡½æ•°å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡éƒ½å˜ä¸ºäº†ä¸€ä¸ªç»“æ„ä½“ã€‚è¿™ä¸ªæ¥å£ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†å®æ—¶ä¿¡å·ï¼ˆä¸åœ¨æ–‡æœ¬è€ƒè™‘èŒƒå›´å†…ï¼‰\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¤„ç†ä¿¡å·çš„ç¼–å·\nç¬¬äºŒä¸ªå‚æ•°æ˜¯è‡ªå®šä¹‰çš„action\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œå¯ä»¥è·å–åˆ°æ—§çš„å¤„ç†æ–¹æ³•ï¼›å¦‚æœä½ ä¸å…³å¿ƒæ—§çš„å¤„ç†æ–¹æ³•ï¼Œå¯ä»¥å°†å®ƒç½®ä¸ºNULLç©ºæŒ‡é’ˆï¼›\n\nè®¾ç½®æˆåŠŸåè¿”å›0ï¼Œå‡ºé”™è¿”å›-1ï¼›\nè¿™ä¸ªç»“æ„ä½“çš„æˆå‘˜å¦‚ä¸‹ï¼š\nstruct sigaction &#123;    void     (*sa_handler)(int);//å¯¹ä¿¡å·çš„å¤„ç†æ–¹æ³•    void     (*sa_sigaction)(int, siginfo_t *, void *);//å¯å¿½ç•¥    sigset_t   sa_mask;//å‚è€ƒ2.8ä¸­çš„å¤„ç†æ–¹æ³•    int        sa_flags;//è®¾ä¸º0    void     (*sa_restorer)(void);//å¯å¿½ç•¥&#125;;\n\n2.9.1 åŸºæœ¬ä½¿ç”¨#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;using namespace std;//æ‰“å°æ”¶åˆ°çš„ä¿¡å·void handler(int signo)&#123;    cout &lt;&lt; &quot;process &quot; &lt;&lt; getpid() &lt;&lt; &quot; get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;int main(int argc, char *argv[])&#123;    struct sigaction nact,oact;    nact.sa_flags = 0;    nact.sa_handler = handler;    sigemptyset(&amp;nact.sa_mask);//åˆå§‹åŒ–    sigaction(2,&amp;nact,&amp;oact);    while(1)    &#123;        cout &lt;&lt; &quot;process running: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(2);    &#125;    return 0;&#125;\n\nè¿è¡Œä¹‹åï¼Œæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†2å·ä¿¡å·ï¼ŒæˆåŠŸè°ƒç”¨è‡ªå·±çš„handleræ–¹æ³•ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigprocess running: 15029process running: 15029^Cprocess 15029 get signal: 2process running: 15029process running: 15029^Cprocess 15029 get signal: 2process running: 15029process running: 15029process running: 15029^\\Quit[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nè¯·æ³¨æ„ï¼Œä¿¡å·å¤„ç†å‡½æ•°åœ¨è‡ªå®šä¹‰æ•è·åï¼Œè¿›ç¨‹æ¥æ”¶åˆ°ä¿¡å·ï¼Œä¼šè°ƒç”¨è‡ªå®šä¹‰æ•æ‰çš„å‡½æ•°ï¼Œå†ç»§ç»­å¾€åè¿è¡Œã€‚æ‰€ä»¥å¦‚æœä½ æ•è·äº†2å·ä¿¡å·ï¼Œç”¨ctrl+cæ¥é€€å‡ºçš„æ—¶å€™ï¼Œç†è®ºä¸Šä¹Ÿæ˜¯ä¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°çš„ï¼ˆå‰ææ˜¯ä½ çš„è¿›ç¨‹é‡Œé¢æ²¡æœ‰æ­»å¾ªç¯ï¼‰ã€‚\nä¿¡å·2ç»ˆæ­¢åæ˜¯å¦ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Ÿä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æœ‰æ­»å¾ªç¯ï¼Œæ‰€ä»¥å†æ¥å—åˆ°ä¿¡å·å¤„ç†åï¼Œè°ƒç”¨å®Œæ¯•å‡½æ•°ï¼Œå°±ä¼šè‡ªåŠ¨å›åˆ°æ­»å¾ªç¯çš„ä½ç½®ã€‚\nåœ¨ä¸‹é¢çš„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çš„mainæ˜¯ç›´æ¥åœ¨sleepé‡Œé¢é˜»å¡ç­‰å¾…çš„ï¼Œé‚£ä¹ˆåœ¨è·å–åˆ°ctrl+cçš„ä¿¡å·åï¼Œä¼šå…ˆè°ƒç”¨ä¿¡å·å¤„ç†å‡½æ•°ï¼Œå†å›åˆ°mainå‡½æ•°ä¸­ç»§ç»­å¾€åæ‰§è¡Œï¼Œæœ€ç»ˆè°ƒç”¨å¯¹è±¡çš„ææ„ã€‚\n// ä¸Šé¢çš„ä»£ç çœç•¥äº†// mytestå’Œmyclassæ˜¯ä¸¤ä¸ªç±»ï¼Œç±»ä¸­çš„æ„é€ å’Œææ„éƒ½æ·»åŠ äº†æ‰“å°// mytestä¸­ç”¨æ™ºèƒ½æŒ‡é’ˆåŒ…è£¹äº†ä¸€ä¸ªmyclasså¯¹è±¡class mytest&#123;public:    mytest(int a):_ptr(make_shared&lt;myclass&gt;(a))    &#123;        cout &lt;&lt; &quot;init mytest&quot; &lt;&lt; endl;    &#125;    ~mytest()    &#123;        cout &lt;&lt; &quot;destroy mytest&quot; &lt;&lt; endl;    &#125;private:    shared_ptr&lt;myclass&gt; _ptr;&#125;;int main()&#123;    RegisterSigTermHandler(); // æ•æ‰2å·ä¿¡å·    mytest t1(1);    map&lt;int,mytest&gt; tmap;    for(int i=0;i&lt;6;i++)    &#123;        tmap.emplace(i,t1);    &#125;    cout &lt;&lt; &quot;----&quot; &lt;&lt; endl;    tmap.clear();    cout &lt;&lt; &quot;----&quot; &lt;&lt; endl;    sleep(10); // åœ¨è¿™é‡Œctrl+cï¼Œæ¥æ”¶åˆ°ä¿¡å·ï¼Œè¿è¡Œå®Œæ¯•ä¿¡å·å¤„ç†å‡½æ•°åï¼Œä¼šç»§ç»­å¾€åè¿è¡Œã€‚    cout &lt;&lt; &quot;-- end --&quot; &lt;&lt; endl;    return 0;&#125;\nè¿™ä¸ªç¨‹åºçš„ç»ˆç«¯è¾“å‡ºå¦‚ä¸‹ï¼Œåœ¨æ¥æ”¶åˆ°ä¿¡å·åï¼Œä¼šå…ˆè°ƒç”¨ä¿¡å·å¤„ç†å‡½æ•°ï¼Œæ‰“å°singalå­—ç¬¦ä¸²ï¼Œå†è¿”å›åˆ°mainå‡½æ•°ï¼Œæ‰“å°-- end --å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆé€€å‡ºmainå‡½æ•°ï¼Œææ„æ‰ä¸¤ä¸ªå¯¹è±¡ã€‚\n&gt; ./testinit myclassinit mytest----destroy mytestdestroy mytestdestroy mytestdestroy mytestdestroy mytestdestroy mytest----^Csingal-- end --destroy mytestdestroy myclass\n\nè®°å½•è¿™ä¸€ç‚¹ï¼Œæ˜¯å› ä¸ºGPTå‘Šè¯‰æˆ‘å¦‚æœæ˜¯æ¥æ”¶åˆ°ä¿¡å·é€€å‡ºæ˜¯ä¸ä¼šæ‰§è¡Œææ„å‡½æ•°çš„ã€‚ç„¶è€Œæƒ…å†µå¹¶éå¦‚æ­¤ã€‚ææ„å‡½æ•°ä¾æ—§ä¼šè¢«æ­£å¸¸æ‰§è¡Œï¼\né‚£å¦‚æœæœ‰æ­»å¾ªç¯çš„è¯ï¼Œåº”è¯¥å¦‚ä½•ä¿è¯å¯¹è±¡çš„ææ„èƒ½è¢«æ­£å¸¸æ‰§è¡Œå‘¢ï¼Ÿ\n\nåœ¨æ­»å¾ªç¯ä¸­åŠ ä¸Šif(å…¨å±€å˜é‡)çš„åˆ¤æ–­é€»è¾‘ï¼Œå¹¶åœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­è®¾ç½®å˜é‡\nåœ¨ä¿¡å·å¤„ç†å‡½æ•°ä¸­æ‰‹åŠ¨è°ƒç”¨ä¸€ä¸ªshutdownå‡½æ•°ï¼Œä¸ºäº†é¿å…ä¸€ä¸ªå‡½æ•°å†™ä¸¤æ¬¡ï¼Œå¯ä»¥åœ¨ææ„å‡½æ•°ä¸­ä¹Ÿè°ƒç”¨è¿™ä¸ªshutdownå‡½æ•°ã€‚\n\nä½†æ˜¯ï¼Œå¦‚æœä½ çš„è¿›ç¨‹ä¸­æ˜¯å¤šå±‚åµŒå¥—å¾ªç¯çš„è¯ï¼Œæœ€ç»ˆçš„é€€å‡ºå¯èƒ½æ²¡æœ‰å®Œå…¨é€€å‡ºï¼Œä¼šå¯¼è‡´ææ„å‡½æ•°ä¸è¢«æ­£å¸¸è°ƒç”¨çš„èµ„æºæ³„æ¼é—®é¢˜ï¼å¦‚æœä½ éœ€è¦ä½¿ç”¨çš„èµ„æºä¸­åŒ…å«IPCï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰è¿™äº›å¿…é¡»è¦è¢«åˆ é™¤çš„å¯¹è±¡çš„è¯ï¼Œè¿™ä¸ªé—®é¢˜å°±éœ€è¦æ³¨æ„äº†ã€‚\n\næ¯”å¦‚ä½ è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ææ„å‡½æ•°æ²¡æœ‰è°ƒç”¨ï¼Œæ²¡æœ‰åˆ é™¤æ‰æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸‹ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œæ¶ˆæ¯é˜Ÿåˆ—è¯»ç«¯å¦‚æœå…ˆå¯åŠ¨ï¼Œæœ‰å¯èƒ½ä¼šè¯»å–åˆ°ä¸Šæ¬¡å†—ä½™çš„è„æ•°æ®ã€‚\næ‰€ä»¥æˆ‘ä»¬è¦ä¿è¯IPCèµ„æºèƒ½è¢«æ­£å¸¸é‡Šæ”¾ã€‚\n\n2.9.2 sa_maskè¿™ä¸ªæˆå‘˜æ˜¯ä¸€ä¸ªsigset_tç±»å‹ï¼Œç”¨äºå½“å¤„ç†ä¸€ä¸ªä¿¡å·çš„æ—¶å€™ï¼Œè¿å¸¦å±è”½å…¶ä»–ä¿¡å·ï¼›\n\nå½“ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨å¤„ç†Aä¿¡å·çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠAä¿¡å·è‡ªåŠ¨æ·»åŠ å…¥Blockè¡¨ï¼Œå±è”½è¯¥ä¿¡å·ï¼ˆä¸å…è®¸åŒæ—¶å¤„ç†ä¸¤ä¸ªAä¿¡å·ï¼Œé¿å…ä¿¡å·Açš„é€’å½’å¼å¤„ç†ï¼‰\n\nå¦‚æœä½ æƒ³åœ¨å¤„ç†2å·ä¿¡å·çš„æ—¶å€™ï¼Œé˜»å¡æ‰3ã€4ã€5å·ä¿¡å·ï¼Œå°±å¯ä»¥å¯¹sa_maskè¿›è¡Œè®¾ç½®ï¼Œè®¾ç½®æ–¹æ³•å‚è€ƒ2.8çš„æ“ä½œ\nå› ä¸ºç°åœ¨æˆ‘æ¼”ç¤ºçš„è‡ªå®šä¹‰æ–¹æ³•åªæ˜¯ä¸€ä¸ªå†ç®€å•ä¸è¿‡çš„ç¤ºä¾‹ï¼Œå®é™…ä¸Šè¿›ç¨‹æ”¶åˆ°ä¿¡å·çš„æ—¶å€™éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œä¸åŒçš„è‡ªå®šä¹‰å¤„ç†ï¼Œè¿™äº›è‡ªå®šä¹‰å¤„ç†çš„è¿‡ç¨‹å¯èƒ½ä¼šå¾ˆé•¿ã€‚æ­¤æ—¶å°±å¯ä»¥blockæ‰å…¶ä»–çš„ä¿¡å·ï¼Œä¸è®©å®ƒä»¬å½±å“å½“å‰è¿›ç¨‹è¿è¡Œçš„è‡ªå®šä¹‰æ–¹æ³•\n3.è½¯ä»¶å´©æºƒçš„æœ¬è´¨ä¹‹å‰æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è½¯ä»¶å‡ºé”™å¥”æºƒçš„æƒ…å†µï¼Œé‚£ä¹ˆå¥”æºƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n3.1 æƒ…æ™¯æ¼”ç¤ºç”¨ä¸‹é¢çš„ä¸€ä¸ªé™¤é›¶é”™è¯¯ä½œä¸ºæ¼”ç¤º\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;using namespace std;void handler(int signo)&#123;    cout &lt;&lt; &quot;process &quot; &lt;&lt; getpid() &lt;&lt; &quot; get signal: &quot; &lt;&lt; signo &lt;&lt; endl;&#125;void TestSignal()&#123;    //å¯¹æ‰€æœ‰çš„è¿›ç¨‹ä¿¡å·éƒ½è®¾ç½®ä¸€ä¸ªå›è°ƒ    for (int sig = 1; sig &lt;= 31; sig++)    &#123;        signal(sig, handler);    &#125;    cout &lt;&lt; &quot;è¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†&quot; &lt;&lt; endl;    sleep(3);&#125;int main(int argc, char *argv[])&#123;    TestSignal();    int a = 10;    int b = 0;    try    &#123;        int c = a / b; // C++çš„é™¤0ä¸æ˜¯å¼‚å¸¸ï¼Œä¸ä¼šæŠ›å‡º        //æ‰€ä»¥ä¼šç›´æ¥linuxç³»ç»Ÿè¿è¡ŒæŠ¥é”™    &#125;    catch (const exception &amp;e)    &#123;        cerr &lt;&lt; &quot;a/0 err&quot; &lt;&lt; endl;        abort();    &#125;    catch (...)    &#123;        cout &lt;&lt; &quot;base catch&quot; &lt;&lt; endl;        abort();    &#125;    return 0;&#125;\n\nè¿è¡Œäº†ä¹‹åï¼Œè¯¥è¿›ç¨‹ä¼šä¸€ç›´æ”¶åˆ°8å·ä¿¡å·ï¼Œç›´åˆ°æˆ‘ä»¬æ‰‹åŠ¨killæ‰è¿™ä¸ªè¿›ç¨‹\nprocess 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8process 3947 get signal: 8Killed\n\nä½ å¯èƒ½ä¼šè§‰å¾—å¥‡æ€ªï¼Œä¸æ˜¯ç”¨try/catchè¿›è¡Œäº†å¼‚å¸¸å¤„ç†å—ï¼Ÿä¸ºä»€ä¹ˆæ²¡æœ‰ç”¨å‘¢ï¼Ÿ\né‚£æ˜¯å› ä¸ºï¼Œåœ¨C++ä¸­ï¼Œå¹¶ä¸ä¼šå°†é™¤é›¶é”™è¯¯å½“ä½œä¸€ä¸ªå¼‚å¸¸è¿›è¡Œå¤„ç†ï¼\n\n\næˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†8å·ä¿¡å·ï¼Œæ²¡èƒ½è®©è¿›ç¨‹ç»ˆæ­¢ã€‚ä½†æ­¤æ—¶è¿™ä¸ªè¿›ç¨‹å·²ç»å‡ºç°äº†ä¸€ä¸ªä¸¥é‡çš„bugï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šä¸€ç›´ç»™è¿›ç¨‹å‘è¿™ä¸ªä¿¡å·\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigFloating point exception[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä¸è‡ªå®šä¹‰æ•æ‰ï¼Œåˆ™ä¼šç›´æ¥æŠ¥é”™+ç»ˆæ­¢è¿›ç¨‹ï¼›\n8å·ä¿¡å·æ˜¯SIGFPEï¼ŒFPEå³ä¸ºFloating point exceptionçš„ç¼©å†™ï¼\n3.2 è¯´æ˜å´©æºƒçš„æœ¬è´¨ï¼Œæ˜¯è¯¥è¿›ç¨‹æ”¶åˆ°äº†å¼‚å¸¸ä¿¡å·ï¼Œä»è€Œç»ˆæ­¢ã€‚\nä»¥é™¤é›¶é”™è¯¯ä¸ºä¾‹ï¼ŒCPUå†…éƒ¨ä¼šæœ‰ä¸€ä¸ªçŠ¶æ€å¯„å­˜å™¨ï¼Œæ£€æµ‹åˆ°ç”¨æˆ·è¿›è¡Œé™¤é›¶è®¡ç®—çš„æ—¶å€™ï¼Œä¼šå°†çŠ¶æ€å¯„å­˜å™¨è®¾ç½®ä¸ºæµ®ç‚¹æ•°é”™è¯¯ã€‚å½“æ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿™ä¸ªé”™è¯¯çš„æ—¶å€™ï¼Œä¾¿ä¼šå‘å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å‘é€8å·ä¿¡å·ã€‚è€Œæˆ‘ä»¬çš„è¿›ç¨‹åœ¨æ”¶åˆ°ä¿¡å·çš„æ—¶å€™ï¼Œä¼šå¤„ç†è¿™ä¸ªä¿¡å·ï¼Œé»˜è®¤çš„å¤„ç†æ–¹æ³•å°±æ˜¯ç»ˆæ­¢è¿›ç¨‹ï¼\nåŒç†ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªé‡æŒ‡é’ˆçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿèƒ½åœ¨è™šæ‹Ÿåœ°å€è½¬æ¢çš„æ—¶å€™å‘ç°è¿™ä¸ªé—®é¢˜ï¼Œå‘æˆ‘ä»¬çš„è¿›ç¨‹å‘é€11å·ä¿¡å·\nint main(int argc, char *argv[])&#123;    TestSignal();    int *p;    *p=20;    return 0;&#125;\n\n11) SIGSEGV ä»£è¡¨æ®µé”™è¯¯ï¼Œå†™OJé¢˜ç›®çš„æ—¶å€™è¿™ä¸ªæŠ¥é”™å¾ˆå¸¸è§ğŸ˜‚\nprocess 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11process 6754 get signal: 11Killed\n\n4.coredumpåœ¨è¿›ç¨‹æ§åˆ¶çš„åšå®¢ä¸­ï¼Œæåˆ°å½“è¿›ç¨‹å› ä¸ºä¿¡å·ç»ˆæ­¢çš„æ—¶å€™ï¼Œå…¶statusä¸­çš„0-7ä½ä¼šæ˜¯å¯¹åº”çš„ç»ˆæ­¢ä¿¡å·ï¼Œè€Œç¬¬8ä½æ˜¯è¯¥è¿›ç¨‹çš„core dumpæ ‡è®°ä½\n\nåœ¨1.2è´´å‡ºæ¥çš„æºç æ³¨é‡Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸å°‘ä¿¡å·çš„é»˜è®¤åŠ¨ä½œæ˜¯è¿›è¡Œcore dumpï¼Œæ¯”å¦‚8å·ä¿¡å·ã€‚é‚£ä¹ˆè¿™ä¸ªä¸œè¥¿åˆ°åº•æ˜¯ä»€ä¹ˆç©æ„å‘¢ï¼Ÿ\n\né€šè¿‡forkåˆ›å»ºå­è¿›ç¨‹ï¼Œè®©å­è¿›ç¨‹é™¤é›¶äº§ç”Ÿ8å·ä¿¡å·ï¼Œå­è¿›ç¨‹é€€å‡º\nint main(int argc, char *argv[])&#123;    int status;    int id = fork();    if(id == 0)    &#123;        //å­è¿›ç¨‹        int b=0;        int a = 10/b;    &#125;    int ret = waitpid(id,&amp;status,0);    //æ‰“å°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯    printf(&quot;exitcode:%d signo:%d coredump: %d\\n&quot;,(status&gt;&gt;8)&amp;&amp;0xff,status&amp;0x7f,(status&gt;&gt;7)&amp;0x1);    return 0;&#125;\n\næ­¤æ—¶å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œcoredumpæ ‡è®°ä½ä¸º0\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigexitcode:0 signo:8 coredump: 0\n\n4.1 å¼€å¯è¯¥åŠŸèƒ½é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬äº‘æœåŠ¡å™¨çš„core dumpåŠŸèƒ½æ˜¯è¢«å…³é—­çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼€å¯ï¼›\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 0  #coredumpåŠŸèƒ½è¢«å…³é—­äº†data seg size           (kbytes, -d) unlimitedscheduling priority             (-e) 0file size               (blocks, -f) unlimitedpending signals                 (-i) 14691max locked memory       (kbytes, -l) unlimitedmax memory size         (kbytes, -m) unlimitedopen files                      (-n) 100002pipe size            (512 bytes, -p) 8POSIX message queues     (bytes, -q) 819200real-time priority              (-r) 0stack size              (kbytes, -s) 8192cpu time               (seconds, -t) unlimitedmax user processes              (-u) 14691virtual memory          (kbytes, -v) unlimitedfile locks                      (-x) unlimited[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nä½¿ç”¨ulimit -aå‘½ä»¤æŒ‡å®šcore fileçš„å¤§å°\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -c 10000[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 10000\n\nå†æ¬¡è¿è¡Œåˆšåˆšçš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ ‡è®°ä½ä¸º1ï¼Œå¹¶ä¸”äº§ç”Ÿäº†ä¸€ä¸ªcore.27908æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„åç¼€æ˜¯äº§ç”Ÿcoredumpæ–‡ä»¶çš„è¿›ç¨‹pid\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigexitcode:0 signo:8 coredump: 1[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ lltotal 292-rw------- 1 muxue muxue 593920 Nov 20 12:34 core.27908-rw-rw-r-- 1 muxue muxue    194 Nov 20 10:31 makefile-rw-rw-r-- 1 muxue muxue    601 Nov 20 09:57 mkill.cc-rw-rw-r-- 1 muxue muxue    203 Nov 20 09:56 test.cc-rwxrwxr-x 1 muxue muxue  13768 Nov 20 12:34 tsig-rw-rw-r-- 1 muxue muxue   1772 Nov 20 12:34 tsignal.cpp[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\nvscodeå‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶\n\nè¿™ä¸ªç°è±¡å‘Šè¯‰æˆ‘ä»¬ï¼Œé»˜è®¤åŠ¨ä½œæ˜¯coredumpçš„ä¿¡å·ï¼Œä¼šè®©è¿›ç¨‹é€€å‡ºï¼Œå°†coredumpæ ‡è®°ä½ç½®ä¸º1å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªcore.æ–‡ä»¶\n4.2 ä½¿ç”¨coredumpè¿™ä¸ªåŠŸèƒ½ä¼šå°†è¿›ç¨‹åœ¨è¿è¡Œä¸­äº§ç”Ÿå¼‚å¸¸çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼Œæ‰§è¡Œcore dumpï¼ˆæ ¸å¿ƒè½¬å‚¨ï¼‰ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬debug\nå¦‚ä¸‹æ‰€ç¤ºï¼Œä½¿ç”¨-gå‘½ä»¤ä»¥debugæ¨¡å¼ç¼–è¯‘test.cc,è¿è¡Œçš„æ—¶å€™å¯ä»¥çœ‹åˆ°é™¤é›¶é”™è¯¯ä¹‹åè·Ÿäº†ä¸€ä¸ª(core dumped)æç¤ºæˆ‘ä»¬è¿›è¡Œäº†core dumpæ“ä½œï¼Œå¯¹åº”äº§ç”Ÿäº†ä¸€ä¸ªcore.æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ g++ test.cc -g -o test[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./testFloating point exception (core dumped)\n\nè¿™æ—¶å€™æ‰“å¼€gdbï¼Œè¾“å…¥core-file æ–‡ä»¶ååŠ è½½æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥å®šä½åˆ°å‡ºé”™ä»£ç çš„ä½ç½®ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ gdb testGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-120.el7Copyright (C) 2013 Free Software Foundation, Inc.License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;This is free software: you are free to change and redistribute it.There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;and &quot;show warranty&quot; for details.This GDB was configured as &quot;x86_64-redhat-linux-gnu&quot;.For bug reporting instructions, please see:&lt;http://www.gnu.org/software/gdb/bugs/&gt;...Reading symbols from /home/muxue/git/linux/code/22-11-16_signal/test...done.(gdb) core-file core.31997[New LWP 31997]Core was generated by `./test&#x27;.Program terminated with signal 8, Arithmetic exception.#0  0x000000000040065c in main () at test.cc:1313          int a=10/0;Missing separate debuginfos, use: debuginfo-install glibc-2.17-326.el7_9.x86_64 libgcc-4.8.5-44.el7.x86_64(gdb)(gdb)\n\nè¿™å¯æ¯”æˆ‘ä»¬æ‰‹åŠ¨debugæ‰¾é”™è¯¯æ–¹ä¾¿å¤šäº†\n\n4.3 ä¸ºä»€ä¹ˆé»˜è®¤å…³é—­ï¼Ÿä½ å¯èƒ½ä¼šè§‰å¾—ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸æŒºå¥½çš„å—ï¼Œä¸ºå•¥é»˜è®¤æ²¡æœ‰å¼€å¯å‘¢ï¼Ÿ\nå…ˆæ¥çœ‹çœ‹è¿™ä¸ªæ–‡ä»¶çš„å¤§å°ï¼Œè¶³è¶³æœ‰580KB\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ls -lhttotal 292K-rw-rw-r-- 1 muxue muxue 1.8K Nov 20 12:37 tsignal.cpp-rw------- 1 muxue muxue 580K Nov 20 12:34 core.27908\n\nä¸€èˆ¬è€Œè¨€ï¼ŒæœåŠ¡ç«¯è¿è¡Œçš„ä¸€äº›è¿›ç¨‹ï¼Œéƒ½éœ€è¦ä¿æŒç¨³å®šæ€§ã€‚æ¯”å¦‚Bç«™çš„æœåŠ¡å™¨æŒ‚äº†ï¼Œç¬¬ä¸€æ—¶é—´è¦åšçš„æ˜¯é‡å¯æœåŠ¡è¿›ç¨‹ï¼ˆå¹¶ä¸æ˜¯é‡å¯æœåŠ¡å™¨æœºå™¨ï¼‰\nå¦‚æœè®¾ç½®äº†è¿™ä¸ªcoredumpï¼Œå½“æœåŠ¡å™¨è¿›ç¨‹å› ä¸ºé”™è¯¯é€€å‡ºçš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªcore.æ–‡ä»¶ï¼›è¿™æ—¶å€™æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼ˆç”¨æ¥ç›‘è§†å¹¶åŠæ—¶é‡å¯æœåŠ¡å™¨è¿›ç¨‹ï¼‰å‘ç°æœåŠ¡å™¨è¿›ç¨‹é€€å‡ºäº†ï¼Œå°±ä¼šé‡å¯å®ƒã€‚\nè¿™æ—¶å€™åˆé‡åˆ°äº†åˆšåˆšé‚£ä¸ªbugï¼ŒæœåŠ¡å™¨è¿›ç¨‹åˆé€€å‡ºäº†ï¼Œå®ˆæŠ¤è¿›ç¨‹åˆæ¥é‡å¯å®ƒâ€¦â€¦\nå¦‚æ­¤å¾€å¤ï¼Œå°±ä¼šç”Ÿæˆéå¸¸éå¸¸å¤šçš„core.æ–‡ä»¶ï¼Œå¡æ»¡æˆ‘ä»¬çš„ç¡¬ç›˜ã€‚\nå¯¹äºæ±‚ç¨³ä¸ºä¸»çš„æœåŠ¡å™¨è€Œè¨€ï¼Œè¿™å¯ä¸æ˜¯ä¸€ä¸ªå¥½äº‹ã€‚æ‰€ä»¥äº‘æœåŠ¡å™¨ä¸Šé»˜è®¤ç¦æ­¢äº†è¿™ä¸ªåŠŸèƒ½ã€‚\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -c 0[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ulimit -acore file size          (blocks, -c) 0\n\nç”¨umlimit -c 0æŒ‡å®šå¤§å°ä¸º0å…³é—­è¯¥åŠŸèƒ½\n\n5.è¿›ç¨‹å¤„ç†ä¿¡å·å‰é¢å…«å…«äº†è¿™ä¹ˆä¸€å¤§å †ï¼Œè¿›ç¨‹åˆ°åº•æ˜¯ä»€ä¹ˆæ—¶å€™æ¥å¤„ç†ä¿¡å·çš„å‘¢ï¼Ÿ\n\nå¼€é—¨è§å±±ï¼šè¿›ç¨‹ä»å†…æ ¸æ€åˆ‡æ¢æˆç”¨æˆ·æ€çš„æ—¶å€™ï¼Œå¤„ç†ä¿¡å·\n\n5.1 å†…æ ¸æ€&#x2F;ç”¨æˆ·æ€åœ¨ç¨‹åºåœ°å€ç©ºé—´çš„åšå®¢ä¸­ï¼Œæåˆ°äº†æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰1gbçš„å†…æ ¸ç©ºé—´ï¼›è¯¥å†…æ ¸ç©ºé—´ç”¨äºå†…æ ¸çº§é¡µè¡¨çš„æ˜ å°„ï¼Œå³æ˜ å°„æ“ä½œç³»ç»Ÿçš„ç‰©ç†å†…å­˜ï¼\n\næœ‰å†…æ ¸çº§é¡µè¡¨çš„å­˜åœ¨ï¼Œæ— è®ºè¿›ç¨‹æ€ä¹ˆåˆ‡æ¢ï¼Œéƒ½èƒ½æ‰¾åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ä»£ç å’Œæ•°æ®ï¼Œå‰ææ˜¯æœ‰æƒé™è®¿é—®ã€‚\n\nCPUä¸­çš„CR3çŠ¶æ€å¯„å­˜å™¨ä¼šæ ‡è¯†å½“å‰è¿›ç¨‹å¤„äºå†…æ ¸æ€è¿˜æ˜¯ç”¨æˆ·æ€\nå†…æ ¸æ€å¯ä»¥è®¿é—®æ‰€æœ‰ä»£ç å’Œæ•°æ®ï¼Œæƒé™æœ€é«˜\nç”¨æˆ·æ€åªèƒ½è®¿é—®å½“å‰è¿›ç¨‹è‡ªå·±çš„æ•°æ®\n\nå½“æˆ‘ä»¬è¿›ç¨‹éœ€è¦æ‰§è¡Œå†…æ ¸æ¥å£çš„æ—¶å€™ï¼Œå°±éœ€è¦å°†è¿›ç¨‹åˆ‡æ¢ä¸ºå†…æ ¸æ€ï¼›è¿è¡Œå®Œæ¯•ä¹‹åï¼Œåˆ‡æ¢å›ç”¨æˆ·æ€ã€‚\nå½“æˆ‘ä»¬è¿›ç¨‹å‡ºç°äº†å¼‚å¸¸ï¼Œä¼šä»ç”¨æˆ·æ€åˆ‡æ¢æˆå†…æ ¸æ€ï¼Œç”±æ“ä½œç³»ç»Ÿæ£€æµ‹ç›¸å…³å¼‚å¸¸å¹¶å‘è¿›ç¨‹å‘é€å¯¹åº”ä¿¡å·ã€‚\nå½“æˆ‘ä»¬è¿›ç¨‹çš„æ—¶é—´ç‰‡åˆ°äº†ï¼ˆéœ€è¦åˆ‡æ¢è¿›ç¨‹ï¼‰ä¹Ÿä¼šä»ç”¨æˆ·æ€è½¬ä¸ºå†…æ ¸æ€ï¼Œç”±æ“ä½œç³»ç»Ÿæ¥è¿›è¡Œè¿›ç¨‹åˆ‡æ¢ã€‚\n5.2 ä¿¡å·æ£€æµ‹å½“è¿›ç¨‹ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œä¿¡å·çš„æ£€æµ‹å’Œå¤„ç†ã€‚æ­¤æ—¶åˆ¤æ–­pendingè¡¨ä¸­æ˜¯å¦æœ‰æœªå¤„ç†ä¿¡å·ï¼Œä»¥åŠè¯¥ä¿¡å·æ˜¯å¦æœ‰è¢«blockã€‚å¦‚æœä¸€ä¸ªä¿¡å·æ²¡æœ‰è¢«blockï¼Œåˆ™å°†è¯¥ä¿¡å·é€’è¾¾ç»™è¿›ç¨‹ï¼Œæ‰§è¡Œå¯¹åº”çš„å¤„ç†æ–¹æ³•\n\næ‰§è¡Œç”¨æˆ·çš„è‡ªå®šä¹‰æ–¹æ³•æ—¶ï¼Œåº”è¯¥ä»¥ä»€ä¹ˆèº«ä»½æ‰§è¡Œï¼Ÿ\n\næ³¨æ„ï¼Œå½“æˆ‘ä»¬ç»™ä¸€ä¸ªä¿¡å·æŒ‡å®šäº†è‡ªå®šä¹‰å¤„ç†æ–¹æ³•ï¼Œå°±ä»£è¡¨è¯¥ä¿¡å·çš„å¤„ç†æ–¹æ³•æ˜¯ç”¨æˆ·æä¾›çš„ã€‚æ­¤æ—¶éœ€è¦ä»¥ç”¨æˆ·çš„èº«ä»½å»æ‰§è¡Œè¿™ä¸ªä»£ç ï¼Œæ‰èƒ½æ­£ç¡®è®¿é—®ç”¨æˆ·çº§é¡µè¡¨ã€‚\nè¿™ä¹ˆåšä¹Ÿèƒ½é¿å…æ¶æ„ä»£ç çš„æ³¨å…¥ã€‚å¦‚æœæœ‰äººåœ¨è‡ªå®šä¹‰æ–¹æ³•ä¸­å†™ä¸€ä¸ªä¿®æ”¹ç³»ç»Ÿå†…æ ¸çš„æ¶æ„ä»£ç ï¼Œä¹Ÿèƒ½è¢«æ“ä½œç³»ç»Ÿå‘ç°å¹¶é˜»æ­¢ã€‚\nè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä¸‹é¢è¿™å¼ å›¾æ¥è§£é‡Šï¼ˆå¹¶éå®Œæ•´è¿‡ç¨‹ï¼Œä»…ä¾›å‚è€ƒç†è§£ï¼‰\n\næ¯æ¬¡å¤„ç†å®Œä¿¡å·åï¼Œä¼šè¿”å›ç”¨æˆ·è¿›ç¨‹ï¼Œä»ä¸Šä¸€æ¬¡ä¸­æ–­çš„ä½ç½®å¼€å§‹ç»§ç»­å¾€åè¿è¡Œ\n6.å¯é‡å…¥å‡½æ•°//å¤´æ’void insert(Node* p)&#123;\tp-&gt;next=head;\thead=p;&#125;\n\nä¸Šé¢è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„é“¾è¡¨å¤´æ’å‡½æ•°\nå¦‚æœæˆ‘ä»¬è¿™ä¸ªå¤´æ’å‡½æ•°å¤„ç†çš„æ˜¯ä¸€ä¸ªå…¨å±€çš„é“¾è¡¨ï¼Œå°±å¯èƒ½ä¼šå› ä¸ºç”¨æˆ·æ€ã€å†…æ ¸æ€çš„åˆ‡æ¢ï¼Œå‡½æ•°é‡å…¥é€ æˆé”™è¯¯\n\næ‰€ä»¥insertå°±æ˜¯ä¸€ä¸ªä¸å¯é‡å…¥å‡½æ•°ï¼é™¤äº†è¿™ä¸ªå¤´æ’ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„å‡½æ•°ä¹Ÿç¬¦åˆè¿™ä¸ªç‰¹æ•ˆï¼š\n\nè°ƒç”¨äº†mallocæˆ–è€…freeï¼ˆå¯èƒ½ä¼šå¤šæ¬¡mallocå’Œå¤šæ¬¡freeï¼‰\nè°ƒç”¨äº†I&#x2F;Oåº“çš„å‡½æ•°\nç»å¤§å¤šæ•°åº“å‡½æ•°éƒ½æ˜¯ä¸å¯é‡å…¥çš„ï¼Œæ¯”å¦‚C++çš„STLåº“\n\nä¾æ­¤ç±»æ¨ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°åªè®¿é—®ä»–è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œä¸ä¼šå½±å“å…¶ä»–å‚æ•°ã€‚é‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªå¯é‡å…¥å‡½æ•°\n6.1 åŸå­æ“ä½œæ‰€è°“åŸå­æ“ä½œæ˜¯æŒ‡ä¸ä¼šè¢« çº¿ç¨‹è°ƒåº¦ æœºåˆ¶æ‰“æ–­çš„æ“ä½œï¼›è¿™ç§æ“ä½œä¸€æ—¦å¼€å§‹ï¼Œå°±ä¸€ç›´è¿è¡Œåˆ°ç»“æŸï¼Œä¸­é—´ä¸ä¼šæœ‰ä»»ä½• context switch ï¼ˆåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼‰\n\nå¦‚æœä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†å¯¹å…¨å±€å˜é‡çš„åŸå­æ“ä½œï¼Œé‚£ä¹ˆå®ƒä¹Ÿæ˜¯å¯é‡å…¥çš„å‡½æ•°ã€‚å› ä¸ºåŸå­æ“ä½œä¸åŒ…å«ä¸­é—´æ€\nå¦‚æœä¸€ä¸ªå‡½æ•°å¯¹å…¨å±€å˜é‡è¿›è¡Œäº†éåŸå­æ“ä½œï¼ˆæ¯”å¦‚ä¸Šé¢çš„é“¾è¡¨å¤´æ’ï¼‰é‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªä¸å¯é‡å…¥å‡½æ•°\n\n7.volatileä¹‹å‰çš„å­¦ä¹ ä¸­å°±å·²ç»çŸ¥é“ï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨æ˜¯æ¯ä¸€æ¬¡è®¿é—®å˜é‡çš„æ—¶å€™ï¼Œéƒ½å¿…é¡»è¦å»å†…å­˜ä¸­å–ã€‚\n\nå‡è®¾æˆ‘ä»¬è¿›ç¨‹ä¸­éœ€è¦é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡è¿›è¡Œæ¡ä»¶åˆ¤æ–­\nint flag=0;int main()&#123;    if(flags)    &#123;        //..    &#125;    else    &#123;        //..    &#125;    return 0;&#125;\n\nå¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰äº†ä¸€ä¸ªä¿¡å·ï¼Œæ”¶åˆ°è¯¥ä¿¡å·çš„æ—¶å€™ï¼Œä¼šä¿®æ”¹flagï¼Œæ‰§è¡Œif&#x2F;elseè¯­å¥ä¸­å¯¹åº”çš„ä»£ç ã€‚\nç”±äºç¼–è¯‘å™¨çš„ä¼˜åŒ–é—®é¢˜ï¼Œæ¯ä¸€æ¬¡è®¿é—®flagçš„æ—¶å€™ï¼Œå®ƒå¯èƒ½ä¸ä¼šæ¯æ¬¡éƒ½å»å†…å­˜ä¸­å–ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜\n\nå¯„å­˜å™¨ä¸­ flag&#x3D;0\nç»è¿‡è‡ªå®šä¹‰æ•æ‰å‡½æ•°å¤„ç†ï¼Œå†…å­˜ä¸­ flag&#x3D;1\n\nè¿™ä¸¤ä¸ªflagåœ¨ifæ¡ä»¶ä¸­ä¼šå¯¼å‘ä¸åŒçš„ç»“æœï¼\nä¸ºäº†é¿å…è¿™ç§å¯èƒ½å› ä¸ºå¹³å°ã€ç¼–è¯‘å™¨ã€ä¼˜åŒ–é—®é¢˜å¯¼è‡´çš„ä»£ç bugï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰æ‰€æœ‰ç¼–è¯‘å™¨ï¼Œä¸å‡†å¯¹flagå˜é‡åšä»»ä½•ä¼˜åŒ–å¤„ç†ï¼Œå¿…é¡»è¦è€è€å®å®çš„å»å†…å­˜ä¸­æ‹¿è¿™ä¸ªå˜é‡çš„æ•°æ®ï¼\n//volatileä¿æŒå†…å­˜çš„å¯è§æ€§volatile int flag = 0;\n\n7.1 ç¤ºä¾‹\ngccç¼–è¯‘å™¨å¯ä»¥é€šè¿‡-O2æŒ‡å®šè¾ƒé«˜çš„ä¼˜åŒ–ç­‰çº§\n\nä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹\n#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;// ä¿æŒå†…å­˜çš„å¯è§æ€§int flag = 0;void handler(int signo)&#123;    flag = 1;    printf(&quot;\\næ›´æ”¹flags: 0-&gt;1\\n&quot;);&#125;int main()&#123;    printf(&quot;process start %d\\n&quot;,getpid());    signal(2, handler);//è‡ªå®šä¹‰æ•æ‰2å·ä¿¡å·    while (!flag)        ;//å•¥äº‹ä¸å¹²çš„å¾ªç¯   \tprintf(&quot;process exit!\\n&quot;);    return 0;&#125;\n\nè¿è¡Œä¹‹åï¼Œé”®å…¥CTRL+Cï¼Œä½ ä¼šå‘ç°è¿›ç¨‹ä¾æ—§æ²¡æœ‰é€€å‡ºï¼ç†è®ºä¸Šæ¥è¯´flags=1ï¼Œ!flagsä¸ºå‡ï¼Œåº”ç»ˆæ­¢å¾ªç¯ï¼Œé€€å‡ºè¿›ç¨‹æ‰å¯¹ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test -O2[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 22333^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^Cæ›´æ”¹flags: 0-&gt;1^\\Quit[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$\n\nå¦‚æœæˆ‘ä»¬åŠ ä¸Švolatileå…³é”®å­—ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¿›ç¨‹èƒ½å¤Ÿæ­£å¸¸é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test -O2[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 23086^Cæ›´æ”¹flag: 0-&gt;1process exit![muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$\n\nå»æ‰gccç¼–è¯‘å™¨çš„ä¼˜åŒ–å‚æ•°ï¼Œå»æ‰volatileå…³é”®å­—ï¼Œä¼šå‘ç°è¿›ç¨‹ä¹Ÿèƒ½æ­£å¸¸é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ gcc test.c -o test[muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$ ./testprocess start 23224^Cæ›´æ”¹flag: 0-&gt;1process exit![muxue@bt-7274:~/git/linux/code/22-11-21_volatile]$\n\nè¿™å°±æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–ä¸åŒçš„å½±å“ï¼åŠ ä¸Švolatileå…³é”®å­—èƒ½é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½¿ä»£ç è¿è¡Œèƒ½æœ‰å”¯ä¸€ç»“æœï¼\n8.å­è¿›ç¨‹å‘é€ä¿¡å·å½“å­è¿›ç¨‹çš„çŠ¶æ€å˜åŒ–çš„æ—¶å€™ï¼Œä¼šå‘çˆ¶è¿›ç¨‹å‘é€17å·ä¿¡å·\nvoid testfork()&#123;    int status;    int id = fork();    if(id == 0)    &#123;        //å­è¿›ç¨‹        cout &lt;&lt; &quot;chlid process: &quot; &lt;&lt;getpid()&lt;&lt;endl;        int b=0;        int a = 10/b;    &#125;    TestSignal();    int ret = waitpid(id,&amp;status,0);    //æ‰“å°å­è¿›ç¨‹çš„é€€å‡ºä¿¡æ¯    printf(&quot;exitcode:%d signo:%d coredump: %d\\n&quot;,(status&gt;&gt;8)&amp;&amp;0xff,status&amp;0x7f,(status&gt;&gt;7)&amp;0x1);&#125;\n\nè§‚å¯Ÿç»“æœï¼Œå¯ä»¥çœ‹åˆ°çˆ¶è¿›ç¨‹æ”¶åˆ°äº†å­è¿›ç¨‹çš„17å·ä¿¡å·ï¼Œæ­¤æ—¶å­è¿›ç¨‹å› ä¸ºé”™è¯¯é€€å‡º\n[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$ ./tsigè¿›ç¨‹ä¿¡å·å·²ç»è®¾ç½®å®Œäº†chlid process: 25319process 25318 get signal: 17exitcode:0 signo:8 coredump: 0[muxue@bt-7274:~/git/linux/code/22-11-16_signal]$\n\né™¤äº†é€€å‡ºæ—¶ä¼šå‘é€ä¿¡å·ï¼Œå­è¿›ç¨‹æš‚åœã€ç»§ç»­è¿è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¿¡å·\n\n8.1 çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹æ—¢ç„¶çˆ¶è¿›ç¨‹èƒ½æ”¶å–åˆ°å­è¿›ç¨‹å‘é€çš„ä¿¡å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªå®šä¹‰æ•æ‰17å·ä¿¡å·ï¼Œåœ¨å…¶ä¸­è°ƒç”¨waitpidï¼Œå³å¯åœ¨å­è¿›ç¨‹å‡ºé”™æˆ–æ‰§è¡Œå®Œæ¯•éœ€è¦é€€å‡ºçš„æ—¶å€™ï¼Œè¿›è¡Œçˆ¶è¿›ç¨‹å›æ”¶\n\nè¿™æ ·å°±ä¸éœ€è¦åœ¨mainå‡½æ•°ä¸­è¿›è¡Œä¸»åŠ¨waitäº†\n\næ“ä½œå¹¶ä¸éš¾ï¼Œæˆ‘ä»¬åªéœ€è¦å°†17å·ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œåœ¨æ•æ‰å‡½æ•°ä¸­æ‰§è¡Œwaitpidè¿›è¡Œç­‰å¾…å³å¯\n\næ³¨æ„ï¼šè¿™é‡Œçš„waitpidå¿…é¡»ä½¿ç”¨WNOHANGè¿›è¡Œéé˜»å¡ç­‰å¾…\nå½“çˆ¶è¿›ç¨‹æ­£åœ¨é˜»å¡ç­‰å¾…å­è¿›ç¨‹Açš„æ—¶å€™ï¼Œå®ƒåœ¨å¤„ç†17å·ä¿¡å·ï¼Œæ–°çš„17å·ä¿¡å·æ— æ³•æ”¶åˆ°\nè¿™å°±ä¼šå¯¼è‡´åœ¨Aä¹‹åç§å­çš„å­è¿›ç¨‹ï¼Œæ— æ³•å‘çˆ¶è¿›ç¨‹å‘é€æœ‰æ•ˆçš„17å·ä¿¡å·\nä»è€Œå‡ºç°äº†åƒµå°¸è¿›ç¨‹ï¼ˆæœªå›æ”¶çš„å­è¿›ç¨‹ï¼‰\n\nä½¿ç”¨éé˜»å¡ç­‰å¾…ï¼Œå³å¯ä»¥é¿å…æ­¤é—®é¢˜ï¼Œåˆèƒ½è®©çˆ¶è¿›ç¨‹åœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­å¤„ç†è‡ªå·±çš„å…¶ä»–å·¥ä½œï¼Œä¸€ä¸¾ä¸¤å¾—ã€‚\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;#include &lt;cassert&gt;using namespace std;void FreeChld(int signo)&#123;    assert(signo == SIGCHLD);    while (true)    &#123;        //å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†ï¼Œwaitpidå°±ä¼šè°ƒç”¨å¤±è´¥        pid_t id = waitpid(-1, nullptr, WNOHANG); // éé˜»å¡ç­‰å¾…        if (id &gt; 0)        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æˆåŠŸ, child pid: &quot; &lt;&lt; id &lt;&lt; endl;        &#125;        else if(id == 0)        &#123;            //è¿˜æœ‰å­è¿›ç¨‹æ²¡æœ‰é€€å‡º            cout &lt;&lt; &quot;å°šæœ‰æœªé€€å‡ºçš„å­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œ&quot; &lt;&lt; endl;            break;//é€€å‡ºç­‰å¾…å­è¿›ç¨‹        &#125;        else        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ&quot; &lt;&lt; endl;            break;        &#125;    &#125;&#125;int main()&#123;    signal(SIGCHLD, FreeChld);    for (int i = 0; i &lt; 5; i++)    &#123;        pid_t id = fork();        if (id == 0)        &#123;            //å­è¿›ç¨‹            int cnt = 8;            while (cnt)            &#123;                cout &lt;&lt; &quot;å­è¿›ç¨‹ pid: &quot; &lt;&lt; getpid() &lt;&lt; &quot; cnt: &quot; &lt;&lt; cnt-- &lt;&lt; endl;                sleep(1);            &#125;            cout &lt;&lt; &quot;å­è¿›ç¨‹é€€å‡ºï¼Œè¿›å…¥åƒµå°¸çŠ¶æ€: &quot; &lt;&lt; i &lt;&lt; endl;            exit(0);        &#125;        sleep(2);    &#125;    while (true)    &#123;        cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    return 0;&#125;\n\nå¦‚ä¸‹å³å›¾ä¸­ï¼Œç¬¬0ä¸ªå­è¿›ç¨‹é€€å‡ºè¿›å…¥å°†æ˜¯çŠ¶æ€ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°17å·ä¿¡å·ï¼Œå°±å¼€å§‹å›æ”¶å­è¿›ç¨‹ã€‚æ­¤æ—¶è¿˜æœ‰4ä¸ªå­è¿›ç¨‹æ²¡æœ‰è¿è¡Œå®Œæ¯•ï¼Œçˆ¶è¿›ç¨‹ä¼šç»§ç»­è¿è¡Œï¼Œç­‰å¾…å…¶ä»–å­è¿›ç¨‹ç»“æŸ\n\nå½“æ‰€æœ‰å­è¿›ç¨‹éƒ½ç­‰å¾…ç»“æŸäº†ï¼Œwaitpidè¿”å›-1è®©çˆ¶è¿›ç¨‹é€€å‡ºå›æ”¶å­è¿›ç¨‹çš„å¾ªç¯ï¼Œç°åœ¨å°±åªæœ‰çˆ¶è¿›ç¨‹è‡ªå·±åœ¨å¹²æ´»äº†\nwhile :; do ps jax | head -1 &amp;&amp; ps jax | grep test | grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nååº”åˆ°ç›‘æ§ä¿¡æ¯ä¸Šï¼Œçˆ¶è¿›ç¨‹å…ˆæ˜¯åˆ›å»ºäº†5ä¸ªå­è¿›ç¨‹\n\néšåå½“ç¬¬ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹å¼€å§‹å›æ”¶å­è¿›ç¨‹ã€‚è¿™é‡Œä¹Ÿèƒ½è§‚æµ‹åˆ°ï¼Œå›æ”¶æˆåŠŸï¼Œå¹¶æ²¡æœ‰å‡ºç°åƒµå°¸çŠ¶æ€çš„å­è¿›ç¨‹ã€‚\n\n8.2 çˆ¶è¿›ç¨‹å¿½ç•¥å­è¿›ç¨‹å‰é¢æåˆ°è¿‡ï¼ŒSIG_IGNçš„ä½œç”¨æ˜¯å¿½ç•¥è¿™ä¸ªå­è¿›ç¨‹ï¼›ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™ä¸å¯¹å•Šï¼Œå¿½ç•¥äº†å­è¿›ç¨‹çš„ä¿¡å·ï¼Œé‚£å²‚ä¸æ˜¯çˆ¶è¿›ç¨‹ä¸æƒ³æ­ç†å­è¿›ç¨‹äº†å—ï¼Ÿ\n*\t|  SIGCHLD           |\tignore   \t|\n\næŸ¥1.2è¡¨ä½ è¿˜ä¼šå‘ç°ï¼ŒSIGCHLDçš„é»˜è®¤åŠ¨ä½œä¸å°±æ˜¯å¿½ç•¥å—ï¼Ÿè‡ªå·±è®¾ç½®ä¸€ä¸‹æ˜¯ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼Ÿ\nsignal(SIGCHLD, SIG_IGN);\n\nç„¶å¹¶ä¸æ˜¯è¿™æ ·ï¼Œå¯¹äºSIGCHLD17å·ä¿¡å·è€Œè¨€ï¼Œæˆ‘ä»¬ç»™çˆ¶è¿›ç¨‹è®¾ç½®äº†æ‰‹åŠ¨å¿½ç•¥åï¼Œå­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å°†è‡ªåŠ¨è¢«å›æ”¶\nè¿™ä¹ˆåšçš„å‰æï¼Œæ˜¯çˆ¶è¿›ç¨‹ä¸éœ€è¦å’Œå­è¿›ç¨‹åœ¨å›æ”¶èµ„æºçš„æ—¶å€™è¿›è¡Œå¤„ç†ï¼Œè¯´äººè¯å°±æ˜¯ï¼Œåªè¦çˆ¶è¿›ç¨‹ä¸æƒ³ç®¡ä»»ä½•å­è¿›ç¨‹çš„å·¥ä½œï¼Œé‚£å°±å¯ä»¥ç›´æ¥æŠŠ17å·ä¿¡å·æ‰‹åŠ¨è®¾ç½®æˆSIG_IGN\n\nç»“è¯­è¿›ç¨‹ä¿¡å·åˆ°è¿™é‡Œå°±åŸºæœ¬overäº†ï¼Œå¹²è´§æ»¡æ»¡ï¼\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå§ï¼ï¼ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘åŠ¨é™æ€åº“","url":"/posts/2737580475/","content":"åœ¨æœ€åˆå­¦ä¹ GCCçš„ä½¿ç”¨çš„æ—¶å€™ï¼Œæåˆ°äº†åŠ¨æ€ã€é™æ€åº“çš„åˆ›å»ºåŠæ³•ã€‚ä»Šå¤©å°±è®©æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸€ç•ªï¼Œå®ƒä»¬ä¹‹é—´ç©¶ç«Ÿæœ‰ä½•ä¸åŒå§ï¼\n\n\n\næ¼”ç¤ºæ‰€ç”¨ç³»ç»Ÿï¼šcentos7.6\n\n[TOC]\n1.åŠ¨æ€åº“å’Œé™æ€åº“å…ˆæ¥äº†è§£ä¸€ä¸‹åŠ¨æ€åº“å’Œé™æ€åº“çš„åŸºæœ¬æ¦‚å¿µå§ï¼\n\né™æ€åº“.a ç¨‹åºç¼–è¯‘é“¾æ¥çš„æ—¶å€™ï¼ŒæŠŠé™æ€åº“çš„ä»£ç è¿æ¥åˆ°è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œç¨‹åºè¿è¡Œçš„æ—¶å€™å°†ä¸å†éœ€è¦é™æ€åº“\nåŠ¨æ€åº“.so ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™æ‰å»é“¾æ¥åŠ¨æ€åº“çš„ä»£ç ï¼Œå¤šä¸ªç¨‹åºå…±äº«åº“çš„ä»£ç \n\n2.ç”Ÿæˆ\næµ‹è¯•æ‰€ç”¨ä»£ç  ğŸ‘‰ ç‚¹æˆ‘\n\næˆ‘å†™å¥½äº†ä¸¤ä¸ªå¤´æ–‡ä»¶å’Œä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸ºäº†å‡å°‘åšå®¢ç¯‡å¹…ï¼Œæ­¤å¤„åªè´´å‡º.cçš„å‡½æ•°å®ç°\n//myMath.c#include&quot;myMath.h&quot;int Add(int a,int b)&#123;    return a+b;&#125;//myPrint.c#include &quot;myPrint.h&quot;void Print(const char* msg)&#123;    printf(&quot;time: %d, msg: %s\\n&quot;,(unsigned int)time(NULL),msg);&#125;\n\n2.1 é™æ€åº“ç”Ÿæˆé™æ€åº“æ‰€ç”¨å‘½ä»¤ä¸ºar -rcï¼Œå¯¹åº”çš„å®Œæ•´makeæ“ä½œå¦‚ä¸‹\nlibMytest.a:myMath.o myPrint.o\tar -rc libMytest.a myMath.o myPrint.omyMath.o:myMath.c\tgcc -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -c myPrint.c -o myPrint.o\n\nç”Ÿæˆå¥½é™æ€åº“åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ar -två‘½ä»¤æ¥æŸ¥çœ‹è¯¥åº“çš„ç›®å½•åˆ—è¡¨\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ ar -tv libmytest.arw-rw-r-- 1001/1001   1240 Nov  3 09:28 2022 myMath.orw-rw-r-- 1001/1001   1632 Nov  3 09:28 2022 myPrint.o[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ \n\n2.2 åŠ¨æ€åº“åŠ¨æ€åº“çš„ç”Ÿæˆæ— éœ€é¢å¤–çš„å‘½ä»¤ï¼Œåªéœ€è¦åœ¨gccç¼–è¯‘çš„æ—¶å€™ï¼ŒæŒ‡å®š-sharedå³å¯\nåŒæ—¶ï¼Œä¾èµ–çš„.oæ–‡ä»¶ä¹Ÿéœ€è¦ç”¨-fPICæ¥ç¼–è¯‘\n-fPIC ä¸ä½ç½®æ— å…³ç ï¼Œå’ŒåŠ¨æ€åº“çš„ç‰¹æ€§æœ‰å…³-shared ä»£è¡¨éœ€è¦ç¼–è¯‘ä¸€ä¸ªåŠ¨æ€åº“\n\nå…¶makeæ“ä½œå¦‚ä¸‹\nlibmytest.so:myMath.o myPrint.o\tgcc -shared -o libmytest.so myMath.o myPrint.omyMath.o:myMath.c\tgcc -fPIC -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -fPIC -c myPrint.c -o myPrint.o\n\n2.3 ä¸€å¹¶å‘å¸ƒè¿™é‡Œæˆ‘å†™äº†ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„makefileï¼Œå¯ä»¥åŒæ—¶ç¼–è¯‘ç”ŸæˆåŠ¨é™æ€åº“ï¼Œå¹¶å°†å…¶æ‰“åŒ…åˆ°ä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶å¤¹å†…\n.PHONY:allall:libmytest.so libmytest.a.PHONY:liblib:\tmkdir -p lib-static/lib\tmkdir -p lib-static/include\tcp *.a lib-static/lib\tcp *.h lib-static/include\tmkdir -p lib-dynamic/lib\tmkdir -p lib-dynamic/include\tcp *.so lib-dynamic/lib\tcp *.h lib-dynamic/includelibmytest.so:myMath.o myPrint.o\tgcc -shared -o libmytest.so myMath.o myPrint.omyMath.o:myMath.c\tgcc -fPIC -c myMath.c -o myMath.omyPrint.o:myPrint.c\tgcc -fPIC -c myPrint.c -o myPrint.olibmytest.a:myMath.o myPrint.o\tar -rc libmytest.a myMath.o myPrint.omyMath_s.o:myMath.c\tgcc -c myMath.c -o myMath_s.omyPrint_s.o:myPrint.c\tgcc -c myPrint.c -o myPrint_s.o.PHONY:cleanclean:\trm -rf *.o *.a *.so lib-static lib-dynamic\n\n3.ä½¿ç”¨#include &quot;myPrint.h&quot;#include &quot;myMath.h&quot;#include &quot;stdio.h&quot;int main()&#123;    printf(&quot;ret %d\\n&quot;,Add(1,2));    Print(&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&quot;);    return 0;&#125;\n\nå½“æˆ‘ä»¬ä½¿ç”¨äº†åŠ¨é™æ€åº“åï¼Œå°±æ²¡æœ‰åŠæ³•ç›´æ¥ç¼–è¯‘è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºäº†\nmuxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ gcc test.c/tmp/ccKHwYHv.o: In function `main&#x27;:test.c:(.text+0xf): undefined reference to `Add&#x27;test.c:(.text+0x2a): undefined reference to `Print&#x27;collect2: error: ld returned 1 exit status[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™æ˜¯å› ä¸ºï¼Œgccæ²¡åŠæ³•æ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„å¤´æ–‡ä»¶\n\n&quot;&quot;æ˜¯åœ¨å½“å‰è·¯å¾„ä¸‹æ‰¾\n&lt;&gt;æ˜¯åœ¨åº“ç›®å½•ä¸‹é¢æ‰¾\n\nå› ä¸ºæˆ‘ä»¬çš„å¤´æ–‡ä»¶æ—¢ä¸åœ¨å½“å‰è·¯å¾„ï¼Œä¹Ÿä¸åœ¨ç³»ç»Ÿçš„åº“ä¸­ï¼Œæ‰€ä»¥gccå°±æ²¡æœ‰åŠæ³•æ‰¾åˆ°å¤´æ–‡ä»¶å’Œå‡½æ•°å£°æ˜\n3.1 é™æ€åº“é“¾æ¥é™æ€åº“çš„æ–¹æ³•å¦‚ä¸‹\ngcc test.c -L../lib-static/lib/ -I../lib-static/include/ -lmytest -o test\n\n\n-Lé€‰é¡¹åå¸¦çš„æ˜¯åº“çš„è·¯å¾„\n-Ié€‰æ‹©åå¸¦çš„æ˜¯å¤´æ–‡ä»¶çš„æœç´¢è·¯å¾„\n-l(å°å†™çš„L)é€‰é¡¹å¸¦çš„æ˜¯åº“çš„åå­—ï¼Œéœ€è¦å»æ‰åº“æ–‡ä»¶åå‰é¢çš„libå’Œåç¼€.a\n-o testä»£è¡¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åä¸ºtest\n\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ gcc test.c -L../lib-static/lib/ -I ../lib-static/include/ -lmytest -o test[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testret 3time: 1667441311, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nç‰¹ç‚¹é™æ€åº“çš„ç‰¹ç‚¹ä¾¿æ˜¯ï¼Œå…¶åº“çš„å®ç°å·²ç»è¢«ç¼–è¯‘é“¾æ¥è¿›å…¥äº†å¯æ‰§è¡Œç¨‹åºï¼Œå³ä¾¿æˆ‘ä»¬å°†åº“ç»™åˆ é™¤ï¼Œä¹Ÿä¸å½±å“å¯æ‰§è¡Œç¨‹åºçš„è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ make cleanrm -rf *.o *.a *.so lib-static lib-dynamic[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ lltotal 24-rw-rw-r-- 1 muxue muxue  702 Nov  3 09:28 makefile-rw-rw-r-- 1 muxue muxue   60 Nov  3 08:52 myMath.c-rw-rw-r-- 1 muxue muxue   35 Nov  3 08:51 myMath.h-rw-rw-r-- 1 muxue muxue  117 Nov  3 09:01 myPrint.c-rw-rw-r-- 1 muxue muxue   77 Nov  3 09:01 myPrint.hdrwxrwxr-x 2 muxue muxue 4096 Nov  3 09:50 test[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ ./test/./testret 3time: 1667440486, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“]$ \n\nå¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±çš„åº“çš„å®ç°ä¸¢å…¥äº†ç³»ç»Ÿçš„åº“ç›®å½•ä¸‹ï¼ˆä¸€èˆ¬æ˜¯/lib64/ï¼‰ç¼–è¯‘çš„æ—¶å€™å°±ä¸éœ€è¦å¸¦-Lé€‰é¡¹äº†ï¼Œåªéœ€è¦ç”¨-læŒ‡å®šåº“åå³å¯\ngcc test.c -lmytest\n\nä½†æ˜¯å°†è‡ªå·±çš„åº“ä¸¢å…¥ç³»ç»Ÿåº“è·¯å¾„ä¸‹çš„æ“ä½œå¹¶ä¸æ¨èï¼Œå°±å’Œä½ å°†è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åºä¸¢å…¥/usr/binè·¯å¾„é‡Œé¢ä¸€æ ·ï¼Œä¼šæ±¡æŸ“ç³»ç»Ÿçš„ç¯å¢ƒ\n\n3.2 åŠ¨æ€åº“åŠ¨æ€åº“å’Œé™æ€åº“é“¾æ¥çš„åŸºæœ¬æ–¹å¼æ˜¯ä¸€æ ·çš„\ngcc test.c -L../lib-dynamic/lib/ -I ../lib-dynamic/include/ -lmytest -o testd\n\nè¿™é‡Œé€‰é¡¹çš„å«ä¹‰å’Œä¸Šé¢å®Œå…¨ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯è¿è¡Œçš„æ—¶å€™\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testd./testd: error while loading shared libraries: libmytest.so: cannot open shared object file: No such file or directory[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nç›´æ¥è¿è¡Œï¼Œä½ ä¼šå‘ç°æŠ¥é”™äº†ï¼è¿™ä¸ªæŠ¥é”™çš„å¤§æ¦‚æ„æ€å°±æ˜¯æ‰¾ä¸åˆ°åŠ¨æ€åº“æ–‡ä»¶\nlddå‘½ä»¤ä½¿ç”¨lddå‘½ä»¤æŸ¥çœ‹testdå¯æ‰§è¡Œæ–‡ä»¶çš„åŠ¨æ€åº“ç»“æ„ï¼Œä¼šå‘ç°æˆ‘ä»¬è‡ªå·±çš„åº“æ˜¯æ²¡æœ‰æ‰¾åˆ°çš„\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ldd testd        linux-vdso.so.1 =&gt;  (0x00007ffd051fe000)        /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007f7de6d19000)        libmytest.so =&gt; not found        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f7de6832000)        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f7de662e000)        /lib64/ld-linux-x86-64.so.2 (0x00007f7de6c00000)[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™æ˜¯å› ä¸ºï¼ŒåŠ¨æ€åº“çš„ç‰¹ç‚¹ä¾¿æ˜¯è¿è¡Œçš„æ—¶å€™ä¹Ÿéœ€è¦æŒ‡å®šï¼è¿™æ˜¯ä¸€ä¸ªåŠ¨æ€é“¾æ¥çš„è¿‡ç¨‹ï¼\nåŠ¨æ€é“¾æ¥åŠ¨æ€åº“éœ€è¦æ‰§è¡ŒåŠ¨æ€é“¾æ¥ï¼šåœ¨å¯æ‰§è¡Œç¨‹åºå¼€å§‹è¿è¡Œä¹‹å‰ï¼Œå¤–éƒ¨å‡½æ•°çš„æœºå™¨ç ç”±æ“ä½œç³»ç»Ÿä»ç£ç›˜ä¸Šçš„è¯¥åŠ¨æ€åº“å¤åˆ¶åˆ°å†…å­˜ä¸­\nåˆšåˆšæˆ‘ä»¬çš„æŒ‡å®šåªæ˜¯å‘Šè¯‰äº†gccç¼–è¯‘å™¨åº“è·¯å¾„åœ¨å“ªå„¿ï¼Œä½†æ˜¯å¯æ‰§è¡Œç¨‹åºè¿è¡Œçš„æ—¶å€™å¹¶ä¸çŸ¥é“ï¼\né‚£ä¹ˆå¦‚ä½•è®©å¯æ‰§è¡Œç¨‹åºæ‰¾åˆ°æˆ‘ä»¬çš„åŠ¨æ€åº“å‘¢ï¼Ÿ\n\nå°†åŠ¨æ€åº“æ‹·è´åˆ°ç³»ç»Ÿçš„/lib64æ–‡ä»¶å¤¹ä¸­\né€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œç±»ä¼¼äºPATHï¼Œå¯æ‰§è¡Œç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ°LD_LIBRARY_PATHé‡Œé¢æ‰¾åŠ¨æ€åº“\nä¿®æ”¹ç³»ç»Ÿé…ç½®æ–‡ä»¶\n\n3.3 æ‰¾åˆ°åŠ¨æ€åº“3.3.1 ç¯å¢ƒå˜é‡LD_LIBRARY_PATHå’Œä¿®æ”¹PATHçš„ç¯å¢ƒå˜é‡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ–¹å¼å¢åŠ åŠ¨æ€åº“çš„æŸ¥æ‰¾è·¯å¾„\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/\n\nä¿®æ”¹äº†ä¹‹åçš„ç¯å¢ƒå˜é‡å¦‚ä¸‹\nLD_LIBRARY_PATH=:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/.VimForCpp/vim/bundle/YCM.so/el7.x86_64:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/\n\nå†æ¬¡è¿è¡Œ./testd æˆåŠŸæ‰§è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testdret 3time: 1667443224, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•\n\nä¿®æ”¹é…ç½®æ–‡ä»¶çš„åŠæ³•ï¼Œä¾¿æ˜¯å°†è¯¥è·¯å¾„æ°¸ä¹…å†™å…¥ç¯å¢ƒå˜é‡ï¼ˆä¿®æ”¹ç¯å¢ƒå˜é‡çš„æ“ä½œåªå¯¹å½“å‰bashæœ‰æ•ˆï¼‰è¿™é‡Œå°±ä¸æ¼”ç¤ºè¾£ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ldd testd        linux-vdso.so.1 =&gt;  (0x00007ffde04ea000)        /$LIB/libonion.so =&gt; /lib64/libonion.so (0x00007fe9000bc000)        libmytest.so =&gt; /home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/libmytest.so (0x00007fe8ffda1000)        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fe8ff9d3000)        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fe8ff7cf000)        /lib64/ld-linux-x86-64.so.2 (0x00007fe8fffa3000)\n\nlddå‘½ä»¤çš„ç»“æœä¹Ÿæ˜¾ç¤ºå‡ºäº†æˆ‘ä»¬è‡ªå·±å†™çš„åŠ¨æ€åº“çš„è·¯å¾„\n3.3.2 &#x2F;etc&#x2F;ld.so.conf.dé™¤äº†ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¿®æ”¹/etc/ld.so.conf.dä¸‹çš„æ–‡ä»¶\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ls /etc/ld.so.conf.dbind-export-x86_64.conf  kernel-3.10.0-1160.62.1.el7.x86_64.conf  kernel-3.10.0-1160.76.1.el7.x86_64.confdyninst-x86_64.conf      kernel-3.10.0-1160.71.1.el7.x86_64.conf  mariadb-x86_64.conf[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè¿™é‡Œçš„æ“ä½œéå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¯¥ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª.confæ–‡ä»¶ï¼Œå¹¶åœ¨é‡Œé¢å†™å…¥åŠ¨æ€åº“çš„ç»å¯¹è·¯å¾„å³å¯ï¼\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ls /etc/ld.so.conf.dbind-export-x86_64.conf  kernel-3.10.0-1160.62.1.el7.x86_64.conf  kernel-3.10.0-1160.76.1.el7.x86_64.conf  mytest.confdyninst-x86_64.conf      kernel-3.10.0-1160.71.1.el7.x86_64.conf  mariadb-x86_64.conf[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ cat /etc/ld.so.conf.d/mytest.conf/home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\nè®¾ç½®äº†ä¹‹åï¼Œç¬¬ä¸€æ¬¡è¿è¡Œï¼Œè¿˜æ˜¯æ˜¾ç¤ºæ‰¾ä¸åˆ°åŠ¨æ€åº“\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testd./testd: error while loading shared libraries: libmytest.so: cannot open shared object file: No such file or directory[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\næˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è®©é…æ–‡ä»¶ç”Ÿæ•ˆï¼Œå°±OKäº†ï¼\nsudo ldconfig #å­ç”¨æˆ·æƒé™ä¸å¤Ÿï¼Œéœ€è¦åŠ sudo\n\næ‰§è¡Œå®Œè¯¥å‘½ä»¤åï¼Œå¯æ‰§è¡Œç¨‹åºä¹Ÿèƒ½æˆåŠŸè¿è¡Œäº†1\n[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ sudo ldconfig[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ ./testdret 3time: 1667448942, msg: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•[muxue@bt-7274:~/git/linux/code/22-11-02_åŠ¨é™æ€åº“/test]$ \n\næµ‹è¯•å®Œæ¯•ä¹‹åï¼Œå»ºè®®å°†é…ç½®æ–‡ä»¶åˆ é™¤ï¼Œå¹¶é‡æ–°åŠ è½½åŠ¨æ€åº“é…ç½®æ–‡ä»¶\nsudo rm /etc/ld.so.conf.d/mytest.confsudo ldconfig\n\nè¿™æ ·åšæ˜¯é¿å…æ±¡æŸ“\n3.3.3 åœ¨lib64ä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ln -s /home/muxue/git/linux/code/22-11-02_åŠ¨é™æ€åº“/lib-dynamic/lib/libmytest.so /lib64/libmytest.so\n\nåˆ›å»ºè½¯è¿æ¥çš„æ–¹å¼å’Œå°†æˆ‘ä»¬çš„æ–‡ä»¶å¤åˆ¶è¿›å»æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡è½¯è¿æ¥åªæ˜¯ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæºç»™åˆ äº†ï¼Œè½¯è¿æ¥ä¹Ÿä¼šå¤±æ•ˆ\nè¿™éƒ¨åˆ†å°±ä¸åšæ¼”ç¤ºäº†\n\n4.ä¼˜åŠ£4.1 é™æ€åº“é™æ€åº“ç¼–è¯‘ä¹‹åçš„å¯æ‰§è¡Œç¨‹åºå¯ä»¥è„±ç¦»é™æ€åº“è¿è¡Œï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“åº“çš„è·¯å¾„ã€‚\nå³ä¾¿è¿™ä¸ªåº“è¢«åˆ é™¤ï¼Œä¹Ÿä¸æ¯«ä¸å½±å“æˆ‘ä»¬çš„å¯æ‰§è¡Œç¨‹åº\n4.2 åŠ¨æ€åº“åŠ¨æ€åº“çš„ä»£ç åªéœ€è¦ä¸€ä»½ï¼Œæ‰€æœ‰çš„å¯æ‰§è¡Œç¨‹åºä¾¿éƒ½å¯ä»¥ä½¿ç”¨\nåœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åº“å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹æ‰€å…±äº«ã€‚ä½†å‰ææ˜¯ï¼Œå¯æ‰§è¡Œç¨‹åºéœ€è¦çŸ¥é“è¯¥åŠ¨æ€åº“çš„è·¯å¾„ï¼Œä»¥ä¾¿å°†å…¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼ˆæˆ–è€…æ‰¾åˆ°å®ƒåœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼‰\n\nè¿™æ ·å°±ä¿è¯äº†å¤šä¸ªè¿›ç¨‹åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªåº“ï¼ŒèŠ‚çœäº†å†…å­˜çš„æ¶ˆè€—ï¼Œä¹ŸèŠ‚çœäº†ç£ç›˜ç©ºé—´\n\nè¿™é‡ŒåŠ¨æ€åº“çš„å¯æ‰§è¡Œæ–‡ä»¶å¤§å°ï¼Œå°äºé™æ€åº“çš„å¯æ‰§è¡Œæ–‡ä»¶\n\nå› ä¸ºæµ‹è¯•çš„ä»£ç ä¸å¤šï¼Œæ‰€ä»¥å·®è·å°šä¸æ˜æ˜¾\n\n5.åŠ¨æ€åº“-fPICçš„ä½œç”¨\nå‚è€ƒhttps://blog.csdn.net/itworld123/article/details/117587091\n\ngcc -fPIC -c myMath.c -o myMath.o\n\nfPIC çš„å…¨ç§°æ˜¯ Position Independent Codeï¼Œ ç”¨äºç”Ÿæˆä½ç½®æ— å…³ä»£ç \n\nä»€ä¹ˆæ˜¯ä½ç½®æ— å…³ä»£ç ï¼Ÿ\nä¸ªäººç†è§£æ˜¯ä»£ç æ— ç»å¯¹è·³è½¬ï¼Œè·³è½¬éƒ½ä¸ºç›¸å¯¹è·³è½¬\n\nå¦‚æœæˆ‘ä»¬çš„é™æ€åº“ä¸­ï¼Œä¸ä½¿ç”¨å…¶ä»–åº“çš„ä»£ç ï¼ˆæ¯”å¦‚stdio.hï¼‰\nint fuc(int a)&#123;\treturn ++a;&#125;\n\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥å†ç¼–è¯‘çš„æ—¶å€™ä¸å¸¦-fPIC å¦åˆ™ä¼šæŠ¥é”™\n/usr/bin/ld: /tmp/ccCViivC.o: relocation R_X86_64_32 against `.rodata&#x27; can not be used when making a shared object; recompile with -fPIC/tmp/ccCViivC.o: could not read symbols: Bad value\n\nä½†æ˜¾ç„¶ï¼Œè¿™ç§æƒ…å†µæ˜¯éå¸¸å°‘è§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ç¼–è¯‘åŠ¨æ€åº“çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¸¦ä¸Šè¿™ä¸ªå‚æ•°ï¼Œæ¥å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„åŠ¨æ€åº“ç¼–è¯‘\n\n\nåŠ  fPIC é€‰é¡¹ç”Ÿæˆçš„åŠ¨æ€åº“ï¼Œæ˜¾ç„¶æ˜¯ä½ç½®æ— å…³çš„ï¼Œè¿™æ ·çš„ä»£ç æœ¬èº«å°±èƒ½è¢«æ”¾åˆ°çº¿æ€§åœ°å€ç©ºé—´çš„ä»»æ„ä½ç½®ï¼Œæ— éœ€ä¿®æ”¹å°±èƒ½æ­£ç¡®æ‰§è¡Œã€‚é€šå¸¸çš„æ–¹æ³•æ˜¯è·å–æŒ‡ä»¤æŒ‡é’ˆçš„å€¼ï¼ŒåŠ ä¸Šä¸€ä¸ªåç§»å¾—åˆ°å…¨å±€å˜é‡ &#x2F; å‡½æ•°çš„åœ°å€ã€‚\nåŠ  fPIC é€‰é¡¹çš„æºæ–‡ä»¶å¯¹äºå®ƒå¼•ç”¨çš„å‡½æ•°å¤´æ–‡ä»¶ç¼–å†™æœ‰å¾ˆå®½æ¾çš„å°ºåº¦ã€‚æ¯”å¦‚åªéœ€è¦åŒ…å«ä¸ªå£°æ˜çš„å‡½æ•°çš„å¤´æ–‡ä»¶ï¼Œå³ä½¿æ²¡æœ‰ç›¸åº”çš„ C æ–‡ä»¶æ¥å®ç°ï¼Œç¼–è¯‘æˆ so åº“ç…§æ ·å¯ä»¥é€šè¿‡ã€‚\nå¯¹äºä¸åŠ  fPICï¼Œåˆ™åŠ è½½ so æ–‡ä»¶æ—¶ï¼Œéœ€è¦å¯¹ä»£ç æ®µå¼•ç”¨çš„æ•°æ®å¯¹è±¡éœ€è¦é‡å®šä½ï¼Œé‡å®šä½ä¼šä¿®æ”¹ä»£ç æ®µçš„å†…å®¹ï¼Œè¿™å°±é€ æˆæ¯ä¸ªä½¿ç”¨è¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µçš„è¿›ç¨‹åœ¨å†…æ ¸é‡Œéƒ½ä¼šç”Ÿæˆè¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µçš„ copyã€‚æ¯ä¸ª copy éƒ½ä¸ä¸€æ ·ï¼Œå–å†³äºè¿™ä¸ª .so æ–‡ä»¶ä»£ç æ®µå’Œæ•°æ®æ®µå†…å­˜æ˜ å°„çš„ä½ç½®ã€‚è¿™ç§æ–¹å¼æ›´æ¶ˆè€—å†…å­˜ï¼Œä¼˜ç‚¹æ˜¯åŠ è½½é€Ÿåº¦å¯èƒ½ä¼šå¿«ä¸€ä¸¢ä¸¢ï¼Œå¼Šå¤§äºåˆ©\n\n\nç»“è¯­åŠ¨é™æ€åº“çš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±OVERè¾£ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»å°è¯•ä¸‹è½½ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ ‘è“æ´¾ä¸Šæœ€å¸¸ç”¨çš„wiringPiåº“ï¼Œè¿˜æœ‰C++çš„booståº“ç­‰ç­‰\nsudo yum install -y boost-devel\n\næœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘çº¿ç¨‹å®ä¾‹ | ç®€å•çº¿ç¨‹æ± ","url":"/posts/1969264863/","content":"ä»Šå¤©æ¥å†™ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„çº¿ç¨‹æ± \n\n\n1.å•¥æ˜¯çº¿ç¨‹æ± æ± å¡˜ï¼Œé¡¾åæ€ä¹‰ï¼Œçº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šçº¿ç¨‹çš„å®¹å™¨ã€‚\næˆ‘ä»¬åªéœ€è¦æŠŠä»»åŠ¡äº¤åˆ°è¿™ä¸ªçº¿ç¨‹çš„æ± å­é‡Œé¢ï¼Œå…¶å°±èƒ½å¸®æˆ‘ä»¬å¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè®¡ç®—å‡ºç»“æœã€‚\nä¸é˜»å¡é˜Ÿåˆ—ä¸åŒçš„æ˜¯ï¼Œçº¿ç¨‹æ± ä¸­å†…æœ‰ä¸€ä¸ªé˜Ÿåˆ—ç”¨äºä»»åŠ¡ç®¡ç†ï¼Œå¹¶å¸®æˆ‘ä»¬å°è£…äº†çº¿ç¨‹åˆ›å»ºçš„å·¥ä½œã€‚æˆ‘ä»¬ä¸å†éœ€è¦åœ¨ä¸»æ‰§è¡Œæµé‡Œé¢åˆ›å»ºçº¿ç¨‹ï¼ˆåˆ›å»ºçº¿ç¨‹ä¹Ÿæ˜¯æœ‰æ—¶é—´æ¶ˆè€—çš„ï¼‰ï¼Œè€Œæ˜¯åªå…³æ³¨äºä»»åŠ¡çš„åˆ›å»ºï¼Œäº¤ç»™çº¿ç¨‹æ± æ¥è¿è¡Œå¹¶äº§ç”Ÿç»“æœå°±OKäº†\nå‰é¢å·²ç»å­¦ä¹ è¿‡é˜»å¡é˜Ÿåˆ—äº†ï¼Œæ­¤æ—¶å†æ¥å†™çº¿ç¨‹æ± ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆå›°éš¾äº†ï¼\næœ¬æ¬¡çº¿ç¨‹æ± çš„è®¾è®¡è¿˜ä¼šé‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼ŒåŒä¸€ä¸ªæ¨¡æ¿ç±»å‹çš„ä»»åŠ¡ï¼Œåªéœ€è¦ä¸€ä¸ªçº¿ç¨‹æ± å³å¯\n1.1 ç®€å•å¤ä¹ å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼åˆ†ä¸ºä¸¤ç§è®¾è®¡æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æ‡’æ±‰ï¼Œä¸€ä¸ªæ˜¯é¥¿æ±‰\n\næ‡’æ±‰ï¼šåˆšå¼€å§‹å…ˆä¸åˆ›å»ºå•ä¾‹ï¼Œç­‰ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™åœ¨åˆ›å»ºï¼›ç¼ºç‚¹æ˜¯ç¬¬ä¸€æ¬¡è·å–å•ä¾‹éœ€è¦ç­‰å¾…ï¼Œä¼˜ç‚¹æ˜¯ç¨‹åºå¯åŠ¨å¿«\né¥¿æ±‰ï¼šmainå‡½æ•°æ‰§è¡Œå‰ï¼Œå°±å°†å•ä¾‹åˆ›å»ºèµ·æ¥ï¼›ç¼ºç‚¹æ˜¯ç¨‹åºå¯åŠ¨ä¼šæ¯”è¾ƒæ…¢ï¼Œä¼˜ç‚¹æ˜¯å¯åŠ¨ä¹‹åè·å–å•ä¾‹ä¼šå¿«\n\n2.ä»£ç ç¤ºä¾‹-å¤„ç†task2.1 æˆå‘˜å˜é‡å› ä¸ºæ˜¯çº¿ç¨‹æ± ï¼Œéœ€è¦åœ¨å†…éƒ¨åˆ›å»ºå‡ºçº¿ç¨‹æ¥è¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªnumæ¥æ ‡è¯†éœ€è¦åˆ›å»ºçš„çº¿ç¨‹çš„æ•°é‡\ntemplate &lt;class T&gt;class ThreadPool&#123;private:\tbool _isStart;  // çº¿ç¨‹æ± å­æ˜¯å¦å¯åŠ¨    int _threadNum; // çº¿ç¨‹æ•°é‡    queue&lt;T&gt; _tq;   // ä»»åŠ¡é˜Ÿåˆ—    pthread_mutex_t _mutex;// é”    pthread_cond_t _cond;  // æ¡ä»¶å˜é‡    static ThreadPool&lt;T&gt; *instance; // å•ä¾‹æ¨¡å¼éœ€è¦ç”¨åˆ°çš„æŒ‡é’ˆ&#125;\n\nè¿™é‡Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¼„ä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾å·²ç»åˆ›å»ºçš„çº¿ç¨‹ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒçº¿ç¨‹çš„é€€å‡ºä¿¡æ¯ï¼Œä¹Ÿä¸éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œç®¡ç†ã€‚åœ¨åˆ›å»ºå¥½çº¿ç¨‹ä¹‹åï¼Œç›´æ¥detachå³å¯\nstaticå˜é‡æˆ‘ä»¬éœ€è¦åœ¨ç±»å¤–åˆå§‹åŒ–ï¼Œå› ä¸ºæ˜¯æ¨¡æ¿ç±»å‹ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¸¦ä¸Štemplateå…³é”®å­—\n// åˆå§‹åŒ–staticå˜é‡template &lt;class T&gt;ThreadPool&lt;T&gt; *ThreadPool&lt;T&gt;::instance = nullptr;\n\n2.2 æ„é€ &#x2F;ææ„ï¼ˆå•ä¾‹ï¼‰æœ¬æ¬¡ä½¿ç”¨çš„æ˜¯æ‡’æ±‰æ¨¡å¼çš„å•ä¾‹ï¼Œæä¾›ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºå•ä¾‹ï¼Œä¸å¼€æ”¾æ„é€ å‡½æ•°ï¼ˆæ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼‰\nåŒæ—¶ï¼Œåˆ©ç”¨deleteå…³é”®å­—ï¼Œç¦æ­¢æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½ï¼›ææ„ä¾æ—§ä¿æŒå…¬æœ‰\nprivate:    ThreadPool(int num = DEFALUT_NUM)        : _threadNum(num),          _isStart(false)    &#123;        assert(num &gt; 0);        pthread_mutex_init(&amp;_mutex, nullptr);        pthread_cond_init(&amp;_cond, nullptr);    &#125;    ThreadPool(const ThreadPool&lt;T&gt; &amp;) = delete;//å–æ¶ˆæ‹·è´    void operator=(const ThreadPool&lt;T&gt; &amp;) = delete;//å–æ¶ˆèµ‹å€¼\n\nææ„å‡½æ•°å¹¶ä¸éœ€è¦è¿›è¡Œè¿‡å¤šå¤„ç†ï¼Œå°†é”å’Œæ¡ä»¶å˜é‡é”€æ¯å³å¯\n~ThreadPool()&#123;    pthread_mutex_destroy(&amp;_mutex);    pthread_cond_destroy(&amp;_cond);&#125;\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æœ‰ä¸€ä¸ªstaticæˆå‘˜å‡½æ•°æ¥è·å–å•ä¾‹ï¼›åœ¨ä¹‹å‰çš„å•ä¾‹æ¨¡å¼åšå®¢ä¸­ï¼Œæåˆ°å½“åˆå®ç°çš„æ‡’æ±‰æ¨¡å¼æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæ²¡æœ‰å¯¹çº¿ç¨‹è¿›è¡ŒåŠ é”ï¼Œé¿å…å¤šä¸ªæ‰§è¡ŒæµåŒæ—¶è·å–å•ä¾‹ï¼Œå¯¼è‡´å•ä¾‹å¯¹è±¡å†²çªçš„é—®é¢˜ã€‚\nç°åœ¨å­¦ä¹ äº†linuxçš„åŠ é”æ“ä½œï¼Œå°±å¯ä»¥é¿å…æ‰è¿™ä¸ªbugäº†\nä¸¤æ¬¡nullptråˆ¤æ–­å…¶ä¸­å…³äºä¸¤æ¬¡nullptråˆ¤æ–­çš„åŸå› ï¼Œè¯¦è§æ³¨é‡Š\n\nç¬¬ä¸€ä¸ªåˆ¤æ–­æ˜¯ä¸ºäº†ä¿è¯å•ä¾‹ï¼Œåªè¦å•ä¾‹å­˜åœ¨äº†ï¼Œå°±ä¸å†åˆ›å»ºå•ä¾‹\nç¬¬äºŒä¸ªåˆ¤æ–­æ˜¯ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¯èƒ½ä¼šå‡ºç°çº¿ç¨‹aåœ¨åˆ›å»ºå•ä¾‹ï¼Œçº¿ç¨‹båœ¨é”ä¸­ç­‰å¾…çš„æƒ…å†µï¼›æ­¤æ—¶å¦‚æœä¸è¿›è¡Œç¬¬äºŒæ¬¡nullptråˆ¤æ–­ï¼Œçº¿ç¨‹bä»é”ä¸­è¢«å”¤é†’åï¼Œåˆä¼šç»§ç»­æ‰§è¡Œï¼Œå¤šåˆ›å»ºäº†ä¸€ä¸ªå•ä¾‹ï¼\n\npublic:    static ThreadPool&lt;T&gt; *getInstance()    &#123;        static pthread_mutex_t mt;//ä½¿ç”¨staticï¼Œé”åªä¼šåˆ›å»ºä¸€æ¬¡ï¼›é¿å…å¤šæ¬¡å®ä¾‹åŒ–ï¼Œä¸€ä¸ªæ‰§è¡Œæµä¸€ä¸ªé”å°±å¤±å»æ•ˆæœäº†        pthread_mutex_init(&amp;mt,nullptr);        if (instance == nullptr) // ç¬¬ä¸€æ¬¡åˆ¤æ–­        &#123;            pthread_mutex_lock(&amp;mt);// åŠ é”ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµèµ°åˆ°è¿™é‡Œ            if (instance == nullptr)// ç¬¬äºŒæ¬¡åˆ¤æ–­æ˜¯æ¥ç¡®è®¤çš„ï¼Œé¿å…å‡ºç°åœ¨åŠ é”å‰ï¼Œè¢«å…¶ä»–æ‰§è¡Œæµè·å–è¿‡å®ä¾‹äº†            &#123;                instance = new ThreadPool&lt;T&gt;();// ç¡®è®¤æ˜¯nullï¼Œåˆ›å»ºå•ä¾‹            &#125;        &#125;        pthread_mutex_unlock(&amp;mt);        pthread_mutex_destroy(&amp;mt);        return instance;    &#125;\n\n2.3 å¯åŠ¨çº¿ç¨‹æ± æœ‰äº†çº¿ç¨‹æ± ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å¯åŠ¨å®ƒğŸ˜\nå¯åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦assertåˆ¤æ–­ä¸€ä¸‹è¯¥çº¿ç¨‹æ± æ˜¯å¦å·²ç»å¯åŠ¨äº†ï¼Œé¿å…å¤šæ¬¡å¯åŠ¨çº¿ç¨‹æ± å‡ºç°é—®é¢˜ã€‚å¯åŠ¨å®Œæˆä¹‹åï¼Œæ›´æ–°isStartçš„çŠ¶æ€å€¼\nvoid start()&#123;    assert(!_isStart);//å¦‚æœå¼€å¯äº†ï¼Œé‚£ä¹ˆå°±ä¸èƒ½æ‰§è¡Œè¯¥å‡½æ•°    for (int i = 0; i &lt; _threadNum; i++)    &#123;        pthread_t temp;        pthread_create(&amp;temp, nullptr, threadRoutine, this);//æŠŠthiså½“å‚æ•°ä¼ å…¥        usleep(100);        pthread_detach(temp);//åˆ†ç¦»çº¿ç¨‹    &#125;    _isStart = true;//æ ‡è¯†çŠ¶æ€ï¼Œä»£è¡¨çº¿ç¨‹æ± å·²ç»å¯åŠ¨äº†&#125;\n\nè¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªå‡½æ•°threadRoutineï¼Œè¿™æ˜¯æ¯ä¸€ä¸ªçº¿ç¨‹éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œå…¶ä¸ºstaticå‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬è·å–åˆ°çš„éƒ½æ˜¯å•ä¾‹çš„thisæŒ‡é’ˆï¼Œè®¿é—®æˆå‘˜éƒ½éœ€è¦é€šè¿‡thisæŒ‡é’ˆæ¥è®¿é—®\nstatic void *threadRoutine(void *args)&#123;    ThreadPool&lt;T&gt; *tp = static_cast&lt;ThreadPool&lt;T&gt; *&gt;(args);//c++å¼ºè½¬    while (1)    &#123;        tp-&gt;lockQueue();        while (!tp-&gt;haveTask())        &#123;            tp-&gt;waitForTask();        &#125;        // ä»»åŠ¡è¢«æ‹¿åˆ°äº†çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­        T t = tp-&gt;pop();        tp-&gt;unlockQueue();        // è§„å®šæ¯ä¸€ä¸ªå°è£…çš„taskå¯¹è±¡éƒ½éœ€è¦æœ‰ä¸€ä¸ªrunå‡½æ•°        t.resultPrint(t.run());//è¿è¡Œå¹¶æ‰“å°ç»“æœ    &#125;&#125;\n\n2.4 å°è£…çš„åŠ é”&#x2F;è§£é”&#x2F;é€šçŸ¥æ“ä½œè¿™éƒ¨åˆ†æ“ä½œæ¯”è¾ƒç®€å•ï¼Œå°±ä¸å¤šæäº†ã€‚å…¶å®å°±æ˜¯æŠŠå·²æœ‰çš„å‡½æ•°æ”¹ä¸ªåå­—ï¼Œå˜æˆæ— å‚å¯ç›´æ¥è°ƒç”¨çš„å‡½æ•°ç½¢äº†ã€‚\nprivate:    void lockQueue() &#123; pthread_mutex_lock(&amp;_mutex); &#125;    void unlockQueue() &#123; pthread_mutex_unlock(&amp;_mutex); &#125;    bool haveTask() &#123; return !_tq.empty(); &#125;    void waitForTask() &#123; pthread_cond_wait(&amp;_cond, &amp;_mutex); &#125;    void singalThread() &#123; pthread_cond_signal(&amp;_cond); &#125;    T pop()    &#123;        T temp = _tq.front();        _tq.pop();        return temp;    &#125;\n\nå…¶ä¸­pop()å‡½æ•°è®¾ç½®ä¸ºäº†ç§æœ‰ï¼Œå› ä¸ºçº¿ç¨‹æ± ä¼šè‡ªå·±å¼€å§‹å¤„ç†ä»»åŠ¡ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤–éƒ¨pop\n\n2.5 æ’å…¥ä»»åŠ¡æœ€åå°±åªå‰©ä¸‹ä»»åŠ¡çš„æ’å…¥äº†ï¼Œæ’å…¥ä¸€ä¸ªä»»åŠ¡åï¼Œä½¿ç”¨æ¡ä»¶å˜é‡ï¼Œå”¤é†’çº¿ç¨‹æ± ä¸­çš„ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼\n//å¾€çº¿ç¨‹æ± ä¸­ç»™ä»»åŠ¡void push(const T &amp;in)&#123;    lockQueue();    _tq.push(in);//æ’å…¥ä»»åŠ¡    singalThread();//ä»»åŠ¡æ’å…¥åï¼Œå”¤é†’ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ    unlockQueue();&#125;\n\nåˆ°è¿™é‡Œï¼Œçº¿ç¨‹æ± å°±å¤§åŠŸå‘Šæˆäº†ï¼\n3.æµ‹è¯•æœ¬æ¬¡æµ‹è¯•ä¾æ—§ä½¿ç”¨äº†åœ¨çº¿ç¨‹åšå®¢ä¸­æåˆ°è¿‡çš„task.hppï¼Œå®Œæ•´ä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“\nå› ä¸ºä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œä¸»æ‰§è¡Œæµåªéœ€è¦æ¥æ´¾å‘ä»»åŠ¡å³å¯ï¼›\n#include &quot;threadpool.hpp&quot;#include &quot;task.hpp&quot;#include &lt;string&gt;#include &lt;time.h&gt;int main()&#123;    const string operators = &quot;+/*/%&quot;;    ThreadPool&lt;Task&gt;*tp = ThreadPool&lt;Task&gt;::getInstance();    tp-&gt;start();    srand((unsigned long)time(nullptr) ^ getpid() ^ pthread_self());    // æ´¾å‘ä»»åŠ¡çš„çº¿ç¨‹    while(1)    &#123;        int one = rand()%50;        int two = rand()%10;        char oper = operators[rand()%operators.size()];        cout &lt;&lt; &quot;[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; oper &lt;&lt; two &lt;&lt; &quot;=?&quot; &lt;&lt; &quot;\\n&quot;;        Task t(one, two, oper);        tp-&gt;push(t);        sleep(1);    &#125;    &#125;\n\næ­¤æ—¶çº¿ç¨‹æ± å°±ä¼šå¸®æˆ‘ä»¬è¿è¡Œï¼Œå¹¶å°†ç»“æœè¾“å‡ºï¼\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ./test[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 14/8=?[140202973767424] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 14/8=1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 43*2=?[140202965374720] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 43*2=86[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 10/9=?[140202956982016] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 10/9=1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 25*9=?[140202948589312] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 25*9=225[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 8/0=?div zero, abort[140202940196608] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 8/0=-1[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 38%1=?[140202973767424] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 38%1=0[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 23/7=?[140202965374720] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 23/7=3[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 4%4=?[140202956982016] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 4%4=0[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 44*8=?[140202948589312] æ–°çº¿ç¨‹å®Œæˆè®¡ç®—ä»»åŠ¡: 44*8=352[140202992179008] ä¸»çº¿ç¨‹æ´¾å‘è®¡ç®—ä»»åŠ¡: 4/2=?\n\n3.1 ä¿®æ”¹è½»é‡çº§è¿›ç¨‹çš„åå­—Linuxæä¾›äº†ä¸€ä¸ªæœ‰è¶£çš„æ¥å£ï¼Œå¯ä»¥å…è®¸æˆ‘ä»¬ä¿®æ”¹è½»é‡çº§è¿›ç¨‹çš„åå­—ï¼›\næ²¡æœ‰ä¿®æ”¹çš„æ—¶å€™ï¼Œé»˜è®¤çš„åå­—éƒ½æ˜¯è¯¥è¿›ç¨‹çš„å¯æ‰§è¡Œç¨‹åºçš„åå­—\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ps -aL  PID   LWP TTY          TIME CMD 6592  6592 pts/7    00:00:00 test 6592  6593 pts/7    00:00:00 test 6592  6594 pts/7    00:00:00 test 6592  6595 pts/7    00:00:00 test 6592  6596 pts/7    00:00:00 test 6592  6597 pts/7    00:00:00 test 6730  6730 pts/8    00:00:00 ps\n\næˆ‘ä»¬ä½¿ç”¨prctlæ¥å£ï¼Œä¿®æ”¹åå­—ï¼›è¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å¯¹ä¸€ä¸ªè¿›ç¨‹è¿›è¡Œæ“ä½œã€‚\n#include &lt;sys/prctl.h&gt;int prctl(int option, unsigned long arg2, unsigned long arg3,\t\tunsigned long arg4, unsigned long arg5);\n\nå…¶ä¸­ä¿®æ”¹çº¿ç¨‹åå­—çš„æ“ä½œå¦‚ä¸‹\nprctl(PR_SET_NAME, &quot;handler&quot;);//ä¿®æ”¹çº¿ç¨‹åå­—ä¸ºhandler\n\nåˆ†åˆ«ä¿®æ”¹ä¸»æ‰§è¡Œæµå’Œçº¿ç¨‹æ± ä¸­çº¿ç¨‹çš„åå­—ï¼Œå³å¯è·å¾—ä¸ä¸€æ ·çš„ç»“æœ\n[muxue@bt-7274:~/git/linux/code/23-01-18 threadpool]$ ps -aL  PID   LWP TTY          TIME CMD 7793  7793 pts/7    00:00:00 master 7793  7794 pts/7    00:00:00 handler 7793  7795 pts/7    00:00:00 handler 7793  7796 pts/7    00:00:00 handler 7793  7797 pts/7    00:00:00 handler 7793  7798 pts/7    00:00:00 handler 7828  7828 pts/8    00:00:00 ps\n\nè¿™æ ·å¯ä»¥ç”¨äºæ ‡è¯†çº¿ç¨‹çš„å±æ€§ï¼Œè¿˜æ˜¯æœ‰äº›ç”¨çš„ï¼\nThe endæœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±overå•¦ï¼Œæœ‰å•¥é—®é¢˜æ¬¢è¿è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘tarå‘½ä»¤æ‰“åŒ… | æŸ¥çœ‹å‹ç¼©æ–‡ä»¶ | æ‰“åŒ…æ—¶å¿½ç•¥æ–‡ä»¶","url":"/posts/4159326627/","content":"tarå‘½ä»¤æ‰“åŒ… | æŸ¥çœ‹å‹ç¼©æ–‡ä»¶ | æ‰“åŒ…æ—¶å¿½ç•¥æ–‡ä»¶ ç­‰æ“ä½œ\n\n\n1.èµ·å› ä»Šå¤©ä¸‹åˆå†™é˜¿ç‹¸botçš„ä»£ç çš„æ—¶å€™ï¼Œå†™é”™äº†aiofilesçš„ä¿å­˜æ“ä½œ\n# æ­£ç¡®å†™æ³•async def write_file_aio(path:str, value):    async with aiofiles.open(path, &#x27;w&#x27;, encoding=&#x27;utf-8&#x27;) as f:        await f.write(json.dumps(value, indent=2, sort_keys=True,ensure_ascii=False))        # é”™è¯¯å†™æ³•# å‰é¢æ˜¯ä¸€æ ·çš„await f.write(json.dump(value, indent=2, sort_keys=True,ensure_ascii=False))\n\næ³¨æ„è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯json.dumpï¼›ä¸€ä¸ªæ˜¯json.dumps\nå°±æ˜¯å› ä¸ºè¿™é‡Œå†™é”™äº†ï¼Œå¯¼è‡´botæ‰§è¡Œå…¨å±€å˜é‡ä¿å­˜çš„æ—¶å€™ï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½æ²¡æœ‰æˆåŠŸä¿å­˜â€”â€”è¿˜ç›´æ¥æŠŠæœ¬åœ°æ–‡ä»¶æ¸…ç©ºäº†ï¼ï¼ï¼\n\nå½“æ—¶çš„æˆ‘æ˜¯çœŸçš„æ¬²å“­æ— æ³ªå•Šï¼Œéƒ½ä¸çŸ¥é“å¦‚ä½•æ˜¯å¥½\n\nvscodeçš„æ—¶é—´çº¿åŠŸèƒ½å¸®æˆ‘ä¿å­˜äº†ä¸€éƒ¨åˆ†æ–‡ä»¶ï¼Œå¯æ˜¯ç»å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¨‹åºç”Ÿæˆçš„ï¼Œæ²¡æœ‰ç»è¿‡vscodeï¼Œå…¶è‡ªç„¶ä¹Ÿå°±æ²¡æœ‰ä¿å­˜å†å²ç‰ˆæœ¬ï¼Œè¿™å¯ç»™æˆ‘æ•´éš¾å—äº†\n\n\nè¦ä¸æ˜¯ä¹‹å‰æœ‰ä¸€ä¸ªval-bot-testç›®å½•ç”¨äºä»£ç æµ‹è¯•ï¼Œé‚£å°±å‡ ä¹ç­‰åŒäºé˜¿ç‹¸botçš„ç”¨æˆ·ä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼Œæœ€æœ€æœ€æœ€éš¾å—çš„ï¼Œè¿˜æ˜¯æˆ‘botè®°å½•äº†å¥½ä¹…çš„æœåŠ¡å™¨æ—¥å¿—å•Šï¼Œæœ¬æ¥æœ‰3wå¤šcmdçš„ï¼Œç°åœ¨æ¢å¤çš„æ–‡ä»¶è¿˜æ˜¯å‡ ä¸ªæœˆå‰çš„ï¼Œæ•°æ®é‡å°‘äº†å¥½å¤šâ€¦â€¦\n\nå”‰ï¼Œä¸è¯´è¿™äº›ç©æ„äº†ï¼Œä»Šå¤©æˆ‘ä»¬è¦æ¥åº·åº·æ€ä¹ˆåœ¨linuxä¸‹ç”¨tarå‘½ä»¤æ‰“åŒ…å’Œå‹ç¼©æ–‡ä»¶å¤¹ï¼Œç•™ä½œå¤‡ä»½ï¼\n2.tarå‘½ä»¤æ‰“åŒ…å‚è€ƒ https://blog.csdn.net/catoop/article/details/40651947\n2.1 å°†æ•´ä¸ªç›®å½•æ‰“åŒ…ä»¥å½“å‰ç›®å½•ä¸‹çš„codeæ–‡ä»¶å¤¹ä¸ºä¾‹\ntar -cvf ./code.tar ./code #ä»…æ‰“åŒ…ä¸å‹ç¼©tar -zcvf ./code.tar.gz ./code #æ‰“åŒ…ï¼Œgzipå‹ç¼©tar -jcvf ./code.tar.bz2 ./code #æ‰“åŒ…ï¼Œbzip2å‹ç¼©\n\næ³¨æ„ï¼Œè¿™é‡Œçš„./code.taræ˜¯ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ï¼Œ./codeæ˜¯æºè·¯å¾„ï¼›ç›®æ ‡æ–‡ä»¶çš„å‘½åæ²¡æœ‰è¦æ±‚ï¼Œå‘½åæˆtar.gz/tar.bz2åªæ˜¯ä¸€ä¸ªç”¨äºæ ‡æ˜çš„å¥½ä¹ æƒ¯\n2.2 æŸ¥çœ‹å‹ç¼©åŒ…é‡Œé¢çš„æ–‡ä»¶ä¸‹é¢çš„å‘½ä»¤æ˜¯åˆ†åˆ«æŸ¥çœ‹ä¸åŒå‹ç¼©æ ¼å¼çš„å‹ç¼©åŒ…é‡Œé¢çš„æ–‡ä»¶ç›®å½•çš„ï¼Œå…¶ä¼šç›´æ¥åœ¨bashæ‰“å°å‡ºæ¥\ntar -tvf ./code.tar tar -ztvf ./code.tar.gz tar -jtvf ./code.tar.bz2 \n\n2.3 è§£å‹æ–‡ä»¶è§£å‹çš„æ–‡ä»¶ä¼šé»˜è®¤å­˜åœ¨å½“å‰ç›®å½•\ntar -xvf ./code.tar tar -zxvf ./code.tar.gz tar -jxvf ./code.tar.bz2 \n\n2.4 è§£å‹ä¸€éƒ¨åˆ†æ–‡ä»¶å‡è®¾æˆ‘ä»¬éœ€è¦è§£å‹code.taré‡Œé¢testç›®å½•çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤\ntar -xvf ./code.tar test\n\nçŸ¥é“è¿™å‡ ä¸ªç”¨æ³•ï¼Œå°±åŸºæœ¬å¤Ÿç”¨äº†ï¼\n2.5 æ‰“åŒ…çš„æ—¶å€™å¿½ç•¥ä¸€äº›æ–‡ä»¶ç°åœ¨æˆ‘éœ€è¦å‹ç¼©çš„æ˜¯codeé‡Œé¢çš„pythonè¿è¡Œä»£ç ï¼Œå…¶ä¸­ä¼šæœ‰ä¸€ä¸ªæ²¡æœ‰ç”¨çš„__pycache_ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶å¿½ç•¥ï¼Œä»¥å‡å°å‹ç¼©åŒ…ä½“ç§¯\nä¸‹é¢çš„å‘½ä»¤å°±æ˜¯å¿½ç•¥codeè·¯å¾„ä¸‹æ‰€æœ‰__pycache__æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•\ntar -zcvf code.tar.gz --exclude=*__pycache__ code\n\næ³¨æ„ï¼Œå¿½ç•¥çš„è·¯å¾„åé¢ä¸éœ€è¦å¸¦/ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šè¢«æ‰“åŒ…ã€‚æ¯”å¦‚ä¸‹é¢çš„ç”¨æ³•å°±æ˜¯é”™çš„\ntar -zcvf code.tar.gz --exclude=*__pycache__/ code # é”™è¯¯ç”¨æ³•ï¼\n\n3.ä¸€å®šè¦å¤šå¤šå¤‡ä»½åƒæˆ‘ä»Šå¤©å‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œå®åœ¨æ˜¯ä¸åº”è¯¥ï¼\né˜¿ç‹¸botæ˜¯æœ‰vipä¸šåŠ¡çš„ï¼Œvipä¿¡æ¯æ–‡ä»¶çš„ä¸¢å¤±ï¼Œä¹Ÿå¾ˆæœ‰å¯èƒ½ä¼šå¯¼è‡´vipç”¨æˆ·çš„ä¸¢å¤±ã€‚æ›´åˆ«æè¿˜æœ‰å¹¿å¤§çš„æ™®é€šç”¨æˆ·åœ¨ä½¿ç”¨é˜¿ç‹¸å‘¢ã€‚\nå¹³æ—¶æˆ‘çŸ¥é“è¦åœ¨äº‘ç›˜ã€naså¤‡ä»½è‡ªå·±çš„ä»£ç ã€ç¬”è®°ã€å­¦ä¹ èµ„æ–™ç­‰ç­‰ä¸ªäººæ–‡ä»¶ï¼Œå´å¿˜è®°äº†äº‘æœåŠ¡å™¨ä¸Šçš„botåŒæ ·éœ€è¦å¤‡ä»½\n\nè¿™ä¸‹å¯ç®—æ˜¯å¸å–æ•™è®­äº†ï¼Œä¸€æ¬¡æ€§æŠŠæ‰€æœ‰botéƒ½ç»™å¤‡ä»½äº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—"]},{"title":"ã€Linuxã€‘çº¿ç¨‹æ¦‚å¿µ | åŒæ­¥","url":"/posts/2186356144/","content":"é™¤äº†çº¿ç¨‹äº’æ–¥ï¼Œæˆ‘ä»¬è¿˜æœ‰çº¿ç¨‹åŒæ­¥ï¼Œæ¥åº·åº·å§\n\n\n[TOC]\n1.ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥åœ¨éƒ¨åˆ†æ¡ä»¶ä¸‹ï¼Œäº’æ–¥æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ä¸åˆç†ã€‚æ¯”å¦‚é£Ÿå ‚æ‰“é¥­çš„æ—¶å€™ï¼Œé£Ÿå ‚é˜¿å§¨ä¸€æ¬¡åªèƒ½ç»™ä¸€ä¸ªäººæ‰“é¥­ï¼Œäºæ˜¯å°±é€‰æ‹©é€šè¿‡ç«äº‰æ¥è·å¾—æ‰“é¥­çš„æƒåˆ©ã€‚æ­¤æ—¶å°±ä¼šå‡ºç°æœ‰äº›çº¿ç¨‹å› ä¸ºä¼˜å…ˆçº§è¿‡ä½æˆ–è€…CPUè°ƒåº¦é—®é¢˜ï¼Œä¸€ç›´æ‰“ä¸åˆ°é¥­ï¼Œäºæ˜¯å°±å‡ºç°äº†é¥¥é¥¿é—®é¢˜ã€‚\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯¹å¤šçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªèµ„æºæ²¡æœ‰è¿›è¡Œé™åˆ¶ï¼Œå…¨é CPUè°ƒåº¦æ¥å†³å®šè¿è¡Œé¡ºåºï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹çº¿ç¨‹è¿›è¡Œä¸€å®šçš„æ§åˆ¶ï¼Œè¿™å°±æ˜¯çº¿ç¨‹åŒæ­¥çš„æ¦‚å¿µ\n\né¥¥é¥¿é—®é¢˜ï¼šæŸä¸€ä¸ªçº¿ç¨‹ä¸€ç›´æ— æ³•ç”³è¯·åˆ°æŸç§èµ„æºï¼ˆæ¯”å¦‚å› ä¸ºä¼˜å…ˆçº§è¿‡ä½ï¼‰\nåŒæ­¥ï¼šä¿è¯æ•°æ®å®‰å…¨ï¼ˆä¸´ç•Œèµ„æºè®¿é—®ï¼‰çš„å‰æä¸‹ï¼Œè®©çº¿ç¨‹æ ¹æ®ä¸€å®šæ¡ä»¶å’Œé¡ºåºè®¿é—®ä¸´ç•Œèµ„æºï¼Œä»è€Œé¿å…é¥¥é¥¿é—®é¢˜\nç«æ€æ¡ä»¶ï¼šå› ä¸ºæ—¶åºé—®é¢˜ï¼ˆCPUè°ƒåº¦ï¼‰è€Œå¯¼è‡´ç¨‹åºå¼‚å¸¸ï¼›\n\n2.ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹è¿™ä¸ªæ¨¡å‹å…¶å®å¾ˆç®€å•ï¼Œæ¶ˆè´¹è€…å»è¶…å¸‚è´­ä¹°ä¸œè¥¿ï¼Œç”Ÿäº§è€…æŠŠå•†å“æŠ•æ”¾åˆ°è¶…å¸‚ä¸­ã€‚\n\nè¿™æ—¶å€™å°±ä¸éœ€è¦æ¶ˆè´¹è€…ç›´æ¥å»æ‰¾å·¥å‚é—®ä»–xxä¸œè¥¿åˆæ²¡æœ‰ç”Ÿäº§ï¼Œä»–éœ€è¦è´­ä¹°ï¼›è€Œæ˜¯è½¬å»è¶…å¸‚é‡Œé¢è´­ä¹°xxä¸œè¥¿ï¼›\nå¦‚æœxxä¸œè¥¿æ²¡æœ‰è´§äº†ï¼Œè¶…å¸‚å°±ä¼šé€šçŸ¥ç”Ÿäº§è€…è¿›è¡Œè¡¥è´§ã€‚å¦‚æœè¶…å¸‚é‡Œé¢çš„è´§æ¶å·²ç»æ»¡äº†ï¼Œå°±é€šçŸ¥ç”Ÿäº§è€…ä¸éœ€è¦ç»§ç»­ç”Ÿäº§äº†ï¼›\nå½“å•†å“æ²¡è´§äº†ï¼Œè¶…å¸‚ä¼šå‘ŠçŸ¥æ¶ˆè´¹è€…è¿™ä¸ªä¸œè¥¿æ²¡è´§ï¼Œæ¶ˆè´¹è€…ä¼šåœæ­¢æ¶ˆè´¹è¡Œä¸ºï¼›è€Œç”Ÿäº§è€…è¡¥è´§äº†ä¹‹åï¼Œè¶…å¸‚å°±ä¼šé€šçŸ¥æ¶ˆè´¹è€…è®©ä»–æ¥è´­ä¹°\n\n\nåœ¨åŸºç¡€æ¨¡å¼ä¸­ï¼Œæ¶ˆè´¹è€…è¦æƒ³çŸ¥é“ä¸€ä¸ªä¸œè¥¿æœ‰æ²¡æœ‰è´§ï¼Œéœ€è¦å»è¶…å¸‚é‡Œé¢çœ‹ï¼ˆç›¸å½“äºè½®å¾ªæ£€æµ‹ï¼‰\næˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªé€šçŸ¥æ–¹å¼ï¼Œæ¯”å¦‚è¶…å¸‚å¼€æ”¾ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼Œå‘ŠçŸ¥æ¶ˆè´¹è€…xxç‰©å“æ˜¯å¦æœ‰è´§ï¼Œä»¥åŠå‘ŠçŸ¥æ¶ˆè´¹è€…ä»€ä¹ˆæ—¶å€™éœ€è¦è¡¥è´§ï¼Œæ­¤æ—¶å°±ä¸éœ€è¦æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¸æ–­è¯¢é—®è¶…å¸‚å…³äºä¸€ä¸ªå•†å“çš„æƒ…å†µäº†ï¼è¿™å°±ç›¸å½“äºçº¿ç¨‹åŒæ­¥ï¼\n2.1 ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å…³ç³»ä¸‹é¢æåˆ°çš„æ˜¯æ™®é€‚æƒ…å†µ\n\næ¶ˆè´¹è€…æœ‰å¤šä¸ªï¼Œä»–ä»¬ä¹‹é—´æ˜¯ç«äº‰å…³ç³»ï¼ˆäº’æ–¥ï¼‰ç«äº‰å•†å“çš„è´­ä¹°\nç”Ÿäº§è€…æœ‰å¤šä¸ªï¼Œä»–ä»¬ä¹‹é—´æ˜¯ç«äº‰å…³ç³»ï¼ˆäº’æ–¥ï¼‰ç«äº‰è¶…å¸‚çš„è´§æ¶\næ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ä¹‹é—´ï¼Œæ—¢æœ‰äº’æ–¥å…³ç³»ï¼Œä¹Ÿæ˜¯åŒæ­¥å…³ç³»ï¼ˆéœ€è¦ç”Ÿäº§è€…ä¾›è´§äº†ä¹‹åï¼Œæ¶ˆè´¹è€…æ‰èƒ½æ¶ˆè´¹ï¼‰è¿™ä¸¤ä¸ªå…³ç³»å¹¶ä¸å†²çªï¼\n\né™¤äº†ä¸Šé¢æåˆ°çš„3ç§ç”Ÿäº§å…³ç³»ï¼Œè¿˜æœ‰ä¸‹é¢ä¿©ç‚¹\nåœ¨å®é™…ç¨‹åºä¸­ï¼Œæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…éƒ½æ˜¯ç”±çº¿ç¨‹æ‰¿æ‹…çš„ï¼ˆ2ç§è§’è‰²ï¼‰\nè¶…å¸‚æ˜¯å†…å­˜ä¸­ç‰¹å®šçš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä¹Ÿæ˜¯ä¸´ç•Œèµ„æºï¼ˆ1ä¸ªäº¤æ˜“åœºæ‰€ï¼‰\n\næˆ‘ä»¬å¯ä»¥ç”¨321åŸåˆ™æ¥å¿«é€Ÿè®°ä½è¿™å‡ æ¡ï¼Œè¿™æ ·å°±è®°ä½äº†ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹ï¼ğŸ‘\n\n2.2 ä»¥ç®€å•ä»£ç ä¸ºä¾‹åœ¨æ—§æ¨¡å¼ä¸­ï¼Œmainå‡½æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œæƒ³è·å¾—è¿”å›å€¼ï¼Œéœ€è¦ç­‰è¿™ä¸ªå‡½æ•°è¿è¡Œå®Œæ¯•ï¼›å¥½æ¯”æ¶ˆè´¹è€…è´­ä¹°ä¸œè¥¿ï¼Œéœ€è¦å»æ‰¾å‚å®¶å¹¶ç­‰å¾…å‚å®¶ç”Ÿäº§â€¦â€¦\n\nè€Œåœ¨ç”Ÿäº§æ¶ˆè´¹è€…æ¨¡å‹ä¸­ï¼Œmainä½œä¸ºä¸»çº¿ç¨‹ï¼Œåªéœ€è¦æŠŠå¾…å¤„ç†çš„æ•°æ®ä¸¢è¿›ç¼“å†²åŒºï¼›è€Œçº¿ç¨‹Bä»ç¼“å†²åŒºä¸­å–å‡ºæ•°æ®ï¼Œå¤„ç†å®Œæ¯•åæ”¾å›ç¼“å†²åŒºã€‚mainå¯ä»¥å…ˆæ‰§è¡Œå…¶ä»–ä»£ç ï¼Œè¿‡ä¸€ä¼šå†è¿‡æ¥æ‹¿çº¿ç¨‹Bå¤„ç†å¥½çš„ç»“æœã€‚\nè¿™å°±å®ç°äº†ç”Ÿäº§å’Œæ¶ˆè´¹çš„è§£è€¦ï¼\n\n2.3 å¹¶å‘ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹çš„å¹¶å‘ï¼Œæ›´å¤šçš„ä½“ç°åœ¨æ¶ˆè´¹è€…åœ¨å¤„ç†ä»»åŠ¡çš„åŒæ—¶ï¼Œç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§ä»»åŠ¡ï¼›\nçº¿ç¨‹åˆ‡æ¢çš„æˆæœ¬ä½äºè¿›ç¨‹ï¼Œç”±æ­¤ä¾¿æé«˜äº†æ•°æ®å¤„ç†çš„æ•ˆç‡\n\næ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è§£å†³ä¸‹é¢è¿™äº›é—®é¢˜ğŸ˜\n1.å¦‚ä½•è®©å¤šä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ç­‰å¾…å‘¢? åˆå¦‚ä½•è®©æ¶ˆè´¹è€…çº¿ç¨‹è¢«å”¤é†’å‘¢?2.å¦‚ä½•è®©å¤šä¸ªç”Ÿäº§è€…çº¿ç¨‹ç­‰å¾…å‘¢? åˆå¦‚ä½•è®©ç”Ÿäº§è€…çº¿ç¨‹è¢«å”¤é†’å‘¢?3.å¦‚ä½•è¡¡é‡æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…æ‰€å…³å¿ƒçš„æ¡ä»¶æ˜¯å¦å°±ç»ªå‘¢?\n\nè€Œå‰é¢æåˆ°çš„é€šçŸ¥æ–¹å¼ï¼Œåœ¨linuxç³»ç»Ÿä¸­ï¼Œå°±æ˜¯æ¡ä»¶å˜é‡äº†ï¼\n3.æ¡ä»¶å˜é‡æ¥å£3.1 init&#x2F;destroyåŸºæœ¬çš„æ¥å£å’Œpthreadåº“çš„å…¶ä»–æ¥å£å¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ç”¨æ³•ï¼›å…¶ä¸­atträ¹Ÿæ˜¯è®¾ç½®æ¡ä»¶å˜é‡çš„å±æ€§ï¼Œè¿™é‡Œç½®ä¸ºnullptrå³å¯\n#include &lt;pthread.h&gt;int pthread_cond_destroy(pthread_cond_t *cond);int pthread_cond_init(pthread_cond_t *restrict cond,                      const pthread_condattr_t *restrict attr);pthread_cond_t cond = PTHREAD_COND_INITIALIZER;\n\n3.2 pthread_cond_waitè¿™ä¸¤ä¸ªæ¥å£éƒ½æ˜¯è®©çº¿ç¨‹åœ¨ä¸€ä¸ªæ¡ä»¶å˜é‡ä¸‹è¿›è¡Œç­‰å¾…ï¼Œå…¶ä¸­timewaitæ¥å£å¯ä»¥è®¾ç½®ç­‰å¾…çš„æ—¶é—´ï¼ˆè¶…æ—¶äº†å°±ä¸ç­‰äº†ï¼‰\næ¡ä»¶å˜é‡ä¹Ÿæ˜¯ä¸´ç•Œèµ„æºï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªmutexé”æ¥ä¿è¯æ¡ä»¶å˜é‡è¯»å†™çš„åŸå­æ€§\n#include &lt;pthread.h&gt;int pthread_cond_timedwait(pthread_cond_t *restrict cond,                           pthread_mutex_t *restrict mutex,                           const struct timespec *restrict abstime);int pthread_cond_wait(pthread_cond_t *restrict cond,                      pthread_mutex_t *restrict mutex);\n\n3.3 pthrea_cond_signal&#x2F;broadcastè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯ç»™åœ¨æ¡ä»¶å˜é‡ä¸‹ç­‰å¾…çš„çº¿ç¨‹å‘ä¿¡å·\n#include &lt;pthread.h&gt;int pthread_cond_broadcast(pthread_cond_t *cond);int pthread_cond_signal(pthread_cond_t *cond);\n\nå…¶ä¸­broadcastæ˜¯ç»™åœ¨å½“å‰æ¡ä»¶å˜é‡ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹å‘ä¿¡å·ï¼Œè€Œsignalæ˜¯å‘é€ä¿¡å·ï¼Œåªå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼›\nå¦‚æœè°ƒç”¨æˆåŠŸï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šè¿”å›0ï¼›å¦åˆ™è¿”å›é”™è¯¯ç \nRETURN VALUE       If  successful, the pthread_cond_broadcast() and pthread_cond_signal() functions shall return zero; otherwise, an error number shall       be returned to indicate the error.\n\n3.4 ä»£ç ç¤ºä¾‹ä¸‹é¢è¿™ä¸ªä»£ç å¯ä»¥å¾ˆå¥½çš„æ¼”ç¤ºä¸Šé¢æåˆ°çš„å¤šä¸ªæ¥å£\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;//é”pthread_cond_t cond;//æ¡ä»¶å˜é‡volatile bool quit = false;void*func(void* arg)&#123;    while(!quit)//è¿™é‡Œæœ‰bugï¼Œåç»­ä¼šæåˆ°    &#123;        pthread_cond_wait(&amp;cond,&amp;mutex);        cout &lt;&lt; &quot;thread is running... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;    &#125;    cout &lt;&lt; &quot;thread quit... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;&#125;int main()&#123;    pthread_cond_init(&amp;cond,nullptr);    pthread_t t1,t2,t3;    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    char c;    while(1)    &#123;        cout &lt;&lt; &quot;[a/b]$ &quot;;        cin &gt;&gt; c;        if(c==&#x27;a&#x27;)        &#123;            pthread_cond_signal(&amp;cond);        &#125;        else if(c==&#x27;b&#x27;)        &#123;            pthread_cond_broadcast(&amp;cond);        &#125;        else        &#123;            quit = true;            break;        &#125;        usleep(500);    &#125;    cout &lt;&lt; &quot;main break: &quot; &lt;&lt; quit &lt;&lt; endl;    sleep(1);    pthread_cond_broadcast(&amp;cond);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    pthread_join(t3,nullptr);    return 0;&#125;\n\næ¯æ¬¡è¾“å…¥aï¼Œå°±signalä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼›æ¯æ¬¡è¾“å…¥bï¼Œä¼šè°ƒç”¨broadcastï¼Œå”¤é†’å½“å‰æ‰€æœ‰çº¿ç¨‹\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ athread is running... t1[a/b]$ athread is running... t2[a/b]$ athread is running... t3[a/b]$ bthread is running... t1thread is running... t2thread is running... t3\n\n3.4.1 å°bugä¸Šé¢çš„ä»£ç ç¤ºä¾‹ï¼Œä¼šå‡ºç°ä¸‹é¢çš„é—®é¢˜ï¼Œå³æˆ‘ä»¬è¾“å…¥é™¤äº†aå’Œbä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼Œéƒ½åº”è¯¥ä¼šæŠŠå…¨å±€å˜é‡quitæ”¹æˆtrueï¼Œè®©ä¸‰ä¸ªçº¿ç¨‹éƒ½é€€å‡º\nä½†è§‚å¯Ÿåˆ°çš„ç°è±¡å´æ˜¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹é€€å‡ºäº†ï¼Œå…¶ä»–çº¿ç¨‹é˜»å¡ç­‰å¾…äº†\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ qmain break: 1thread is running... t3thread quit... t3\n\nè¿™æ˜¯å› ä¸ºpthread_cond_waité‡Œé¢è¿›è¡Œäº†ç‹¬ç‰¹çš„æ“ä½œï¼Œå³ç­‰å¾…ä¹‹å‰ï¼Œå®ƒä¼šé‡Šæ”¾é”ï¼Œç­‰å¾…ä¹‹åï¼Œä»–ä¼šé‡æ–°ç”³è¯·é”\nint pthread_cond_wait(pthread_cond_t *restrict cond,                      pthread_mutex_t *restrict mutex)&#123;\tpthread_mutex_unlock(mutex);//å…ˆè§£é”    //é¿å…å› ä¸ºè¯¥çº¿ç¨‹æ‹¿ç€é”å»ä¼‘çœ äº†ï¼Œå¯¼è‡´å…¶ä»–çº¿ç¨‹æ— æ³•ç”³è¯·è¯¥é”    \t//æ¡ä»¶å˜é‡ç›¸å…³ä»£ç \t    pthread_mutex_lock(mutex);//æ¡ä»¶æ»¡è¶³åï¼Œå†åŠ é”&#125;\n\nç¬¬ä¸€ä¸ªé€€å‡ºçš„çº¿ç¨‹ï¼Œé€€å‡ºä¹‹å‰ç”³è¯·äº†é”å´æ²¡æœ‰é‡Šæ”¾ï¼Œäºæ˜¯å°±å¯¼è‡´å…¶ä»–çº¿ç¨‹åœ¨æ¡ä»¶æ»¡è¶³åï¼Œæ²¡æœ‰åŠæ³•ç”³è¯·é”ï¼Œåªèƒ½é˜»å¡ç­‰å¾…ï¼\n3.4.2 ä¿®æ­£ä¿®æ­£çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨while(!quit)å¾ªç¯çš„é€€å‡ºæ¡ä»¶æ»¡è¶³ä¹‹åï¼Œé‡Šæ”¾ä¸€ä¸‹é”ï¼Œå°±OKäº†ï¼\nvoid*func(void* arg)&#123;    while(!quit)    &#123;        pthread_cond_wait(&amp;cond,&amp;mutex);        cout &lt;&lt; &quot;thread is running... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;            &#125;    pthread_mutex_unlock(&amp;mutex);//æ­£ç¡®æ“ä½œï¼šéœ€è¦åœ¨æ¡ä»¶æ»¡è¶³åï¼Œè§£é”    cout &lt;&lt; &quot;thread quit... &quot; &lt;&lt; (char*)arg &lt;&lt; endl;&#125;\n\næ­¤æ—¶å°±èƒ½çœ‹åˆ°ï¼Œæ‰€æœ‰çº¿ç¨‹éƒ½æ­£å¸¸é€€å‡ºäº†ï¼\n[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$ ./test[a/b]$ qmain break: 1thread is running... t1thread quit... t1thread is running... t2thread quit... t2thread is running... t3thread quit... t3[muxue@bt-7274:~/git/linux/code/22-12-25_çº¿ç¨‹åŒæ­¥]$\n\n3.4.3 å…¸å‹é”™è¯¯åœ¨æˆ‘ä»¬çš„æ­£å¸¸æ€è·¯ä¸­ï¼Œç”³è¯·æ¡ä»¶å˜é‡ä¹‹å‰åº”è¯¥è§£é”ï¼Œç”³è¯·å®Œæ¯•åå†åŠ é”ï¼›æ ¹æ®è¿™ç‚¹ï¼Œå°±èƒ½å¼•å‡ºä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„æ­»é”é”™è¯¯ã€‚\nå› ä¸ºï¼Œå®é™…ä¸Špthread_cond_wait(&amp;cond); è¿™ä¸ªå‡½æ•°æ˜¯ä¼šä¸»åŠ¨å¸®æˆ‘ä»¬å¤„ç†åŠ é”å’Œè§£é”çš„æ“ä½œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦è‡ªå·±æ¥å¤„ç†ã€‚å¦åˆ™ä¼šå‡ºç°æ­»é”ï¼æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠé”ä¼ å…¥è¿™ä¸ªå‡½æ•°ï¼Œè®©å®ƒæ¥å¸®æˆ‘ä»¬å¤„ç†ã€‚\npthread_mutex_lock(&amp;mutex);while (condition_is_false) &#123;    pthread_mutex_unlock(&amp;mutex);    pthread_cond_wait(&amp;cond);//è§£é”å’ŒåŠ é”çš„æ“ä½œï¼Œè¯¥å‡½æ•°ä¼šå¸®æˆ‘ä»¬å®Œæˆ    pthread_mutex_lock(&amp;mutex);//äºŒæ¬¡ç”³è¯·åŒä¸€æŠŠé”ï¼Œå‡ºç°æ­»é”ï¼&#125;pthread_mutex_unlock(&amp;mutex);\n\nä¸¤æ¬¡ç”³è¯·åŒä¸€æŠŠé”ï¼Œå°±å¥½æ¯”è‡ªå·±æŠŠè‡ªå·±ç»Šå€’äº†ğŸ˜‚æˆ‘ä»¬è¦é¿å…å†™å‡ºè¿™æ ·çš„é”™è¯¯ä»£ç ï¼\n\n4.é˜»å¡é˜Ÿåˆ—-ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹å®ä¾‹è¿™ä¸ªé˜Ÿåˆ—çš„ä½œç”¨ï¼Œå°±æ˜¯æä¾›ä¸€ä¸ªè¶…å¸‚ï¼Œä¾›ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…è¿›è¡Œæ•°æ®çš„äº¤æ¢\n\nç”Ÿäº§è€…ï¼Œå¾€é˜Ÿåˆ—é‡Œé¢pushæ•°æ®\næ¶ˆè´¹è€…ï¼Œä»é˜Ÿåˆ—é‡Œé¢popæ•°æ®\n\nçœ‹èµ·æ¥æœ‰äº›ç±»ä¼¼äºç®¡é“ï¼ŒåŒæ ·çš„ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åœ¨è¯»å–é˜»å¡é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¸ä»…éœ€è¦ä¿è¯è‡ªå·±çš„æ“ä½œæ˜¯åŸå­æ“ä½œï¼Œè¿˜éœ€è¦åšåˆ°ä¸€å®šçš„è®¿é—®æ§åˆ¶ï¼›å³æ¶ˆè´¹è€…åœ¨é˜Ÿåˆ—ç©ºçš„æ—¶å€™ä¸èƒ½ç»§ç»­popï¼Œç”Ÿäº§è€…åœ¨é˜Ÿåˆ—æ»¡çš„æ—¶å€™ä¸èƒ½ç»§ç»­push\næ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•å…¥ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šçš„é€šçŸ¥æ–¹å¼ï¼šä¸è¦è®©ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…ç–¯ç‹‚æ£€æµ‹é˜»å¡é˜Ÿåˆ—ï¼Œè€Œæ˜¯å¼•å…¥æ¡ä»¶å˜é‡ï¼Œåœ¨é˜Ÿåˆ—ä¸ä¸ºç©ºçš„æ—¶å€™ï¼Œé€šçŸ¥æ¶ˆè´¹è€…ï¼›åœ¨é˜Ÿåˆ—ä¸ä¸ºæ»¡çš„æ—¶å€™ï¼Œé€šçŸ¥ç”Ÿäº§è€…ï¼›è¿™æ ·å°±è¾¾åˆ°äº†çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ã€‚\n4.1 æˆå‘˜å˜é‡è¦å®ç°é˜»å¡é˜Ÿåˆ—ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†æ¸…æ¥šéœ€è¦ä»€ä¹ˆæˆå‘˜å˜é‡ï¼Œæ¥ä¿æŠ¤è¯¥é˜Ÿåˆ—\n\nç”¨äºè®¿é—®æ§åˆ¶çš„é”ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®é˜Ÿåˆ—\nç”¨æˆ·çº¿ç¨‹åŒæ­¥çš„æ¡ä»¶å˜é‡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„æ¡ä»¶ä¸‹é€šçŸ¥ä¸åŒçš„äººï¼Œæ‰€ä»¥éœ€è¦2ä¸ªæ¡ä»¶å˜é‡\nä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œé‡‡ç”¨std::queueï¼Œè¿™æ ·å°±ä¸ç”¨è‡ªå·±é€ è½®å­äº†\n\nç†æ¸…æ¥šäº†ä¹‹åï¼Œå°±å¯ä»¥æ¥å†™æˆå‘˜å˜é‡å•¦ï¼›æˆ‘é‡‡ç”¨äº†æ¨¡æ¿ç±»å‹ï¼Œè¿™æ ·é˜»å¡é˜Ÿåˆ—å°±å¯ä»¥ç”¨æ¥å­˜æ”¾ä»»ä½•æˆ‘ä»¬æƒ³è¦çš„ç±»å‹äº†\ntemplate&lt;class T&gt;class BlockQueue&#123;private:    queue&lt;T&gt; _bq;//é˜Ÿåˆ—    size_t _size;//å¤§å°    pthread_mutex_t _mutex;//é”    pthread_cond_t _proInf;//é€šçŸ¥ç”Ÿäº§è€…    pthread_cond_t _conInf;//é€šçŸ¥æ¶ˆè´¹è€…public:    BlockQueue(int sz=5)        :_size(sz)    &#123;        pthread_mutex_init(&amp;_mutex,nullptr);        pthread_cond_init(&amp;_proInf,nullptr);        pthread_cond_init(&amp;_conInf,nullptr);    &#125;    ~BlockQueue()    &#123;        pthread_mutex_destroy(&amp;_mutex);        pthread_cond_destroy(&amp;_proInf);        pthread_cond_destroy(&amp;_conInf);    &#125;&#125;;\n\nä½ å¯èƒ½æƒ³é—®ï¼Œqueueä¸æ˜¯æœ‰å°è£…sizeå—ï¼Ÿå“ªè¿™é‡Œæˆ‘ä»¬è¿˜å®šä¹‰ä¸€ä¸ªå¤§å°å˜é‡ï¼Œä¼šä¸ä¼šæœ‰äº›å¤šä½™ï¼Ÿ\nnopeï¼å®é™…ä¸Šï¼Œè¿™é‡Œçš„è¿™ä¸ª_size å°±å¥½æ¯”æˆ‘ä»¬åœ¨Cè¯­è¨€å†™é¡ºåºè¡¨çš„æ—¶å€™ï¼Œæˆå‘˜capacityï¼›å…¶ä½œç”¨æ˜¯æ¥åˆ¤æ–­æˆ‘ä»¬çš„é˜Ÿåˆ—æœ‰æ²¡æœ‰æ»¡çš„ã€‚\n\n4.2 pushå’Œpopå¯¹äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œæœ€é‡è¦çš„æ“ä½œå°±æ˜¯åœ¨é˜Ÿå¤´å‡ºæ•°æ®ï¼Œé˜Ÿå°¾å…¥æ•°æ®\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯éœ€è¦åœ¨å¤„ç†é˜Ÿåˆ—æ•°æ®çš„æ—¶å€™è¿›è¡ŒåŠ é”ï¼Œä¿è¯åŸå­æ€§ï¼›\né™¤æ­¤ä»¥å¤–ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æœ‰ä¸åŒçš„æ“ä½œé€»è¾‘ï¼š\n\nç”Ÿäº§\nåˆ¤æ–­æ˜¯å¦ç¬¦åˆç”Ÿäº§æ¡ä»¶ï¼ˆé˜Ÿåˆ—æ²¡æœ‰æ»¡ï¼‰\næ»¡ï¼Œä¸ç”Ÿäº§ï¼›ä¸æ»¡ï¼Œç”Ÿäº§ï¼›\næ»¡äº†çš„æ—¶å€™ï¼Œç”Ÿäº§è€…åº”åœ¨æ¡ä»¶å˜é‡ä¸­ç­‰å¾…ï¼ˆç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹ï¼‰\nä¸æ»¡çš„æ—¶å€™ï¼Œç”Ÿäº§è€…ç”Ÿäº§ï¼Œå¹¶é€šçŸ¥æ¶ˆè´¹è€…æ¥æ¶ˆè´¹\n\n\næ¶ˆè´¹\nåˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¶ˆè´¹æ¡ä»¶ï¼ˆé˜Ÿåˆ—ä¸ä¸ºç©ºï¼‰\nç©ºï¼Œä¸æ¶ˆè´¹ï¼›ä¸ç©ºï¼Œæ¶ˆè´¹ï¼›\nç©ºäº†çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…åº”è¯¥åœ¨æ¡ä»¶å˜é‡ä¸­ç­‰å¾…ï¼ˆç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§ï¼‰\nä¸ç©ºçš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå¹¶é€šçŸ¥ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§\n\n\n\nè¿™æ ·å°±å®ç°äº†é˜»å¡é˜Ÿåˆ—pushå’Œpopçš„åŸºæœ¬é€»è¾‘ï¼›ç”±æ­¤å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç \n//æ¶ˆè´¹è€…æ¶ˆè´¹T pop()&#123;    //åŠ é”    pthread_mutex_lock(&amp;_mutex);    //åˆ¤æ–­æ¡ä»¶    if(_size)//ç©ºï¼Œä¸æ¶ˆè´¹    &#123;        pthread_cond_wait(&amp;_conInf,&amp;_mutex);    &#125;    //æ¶ˆè´¹å¹¶é€šçŸ¥ç”Ÿäº§è€…    T tmp = _bq.front();    _bq.pop();    pthread_cond_signal(&amp;_proInf);    //è§£é”    pthread_mutex_unlock(&amp;_mutex);    return tmp;&#125;//ç”Ÿäº§è€…ç”Ÿäº§void Push(const T&amp; in)&#123;    //åŠ é”    pthread_mutex_lock(&amp;_mutex);    //åˆ¤æ–­æ¡ä»¶    if(bq.size()&gt;=_size)//æ»¡ï¼Œä¸ç”Ÿäº§    &#123;        pthread_cond_wait(&amp;_proInf,&amp;_mutex);    &#125;    //ç”Ÿäº§å¹¶é€šçŸ¥æ¶ˆè´¹è€…    _bq.push(in);    pthread_cond_signal(&amp;_conInf);    //è§£é”    pthread_mutex_unlock(&amp;_mutex);&#125;\n\n4.2.1 è¿è¡Œæµ‹è¯•æœ‰äº†è¿™ä¸ªåŸºæœ¬æ¡†æ¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥æµ‹è¯•ä¸€ä¸‹ä»£ç å•¦ï¼\nå…ˆæ¥ä¸€ä¸ªç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…åº·åº·å§\n#include &quot;blockqueue.hpp&quot;#include &lt;time.h&gt;#include &lt;stdlib.h&gt;void *consume(void *args)&#123;    BlockQueue&lt;int&gt; *bqp = (BlockQueue&lt;int&gt; *)args;    while(1)    &#123;        // æ¶ˆè´¹        int ret = bqp-&gt;pop();        cout &lt;&lt; &quot;consume &quot; &lt;&lt; pthread_self() &lt;&lt; &quot; æ¶ˆè´¹ï¼š&quot; &lt;&lt; ret &lt;&lt; endl;        sleep(1);    &#125;&#125;void *produce(void *args)&#123;    BlockQueue&lt;int&gt; *bqp = (BlockQueue&lt;int&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œ        cout &lt;&lt; &quot;########â†“&quot; &lt;&lt; endl;        int a = rand()%100;        // æŠ•æ”¾åˆ°è¶…å¸‚        bqp-&gt;push(a);        cout &lt;&lt; &quot;produce &quot; &lt;&lt; pthread_self() &lt;&lt; &quot; ç”Ÿäº§ï¼š&quot; &lt;&lt; a &lt;&lt; endl;        sleep(2);    &#125;&#125;int main()&#123;    srand((unsigned int)time(nullptr));    pthread_t t1,t2;    BlockQueue&lt;int&gt; bq(5);    pthread_create(&amp;t1,nullptr,produce,(void*)&amp;bq);    pthread_create(&amp;t2,nullptr,consume,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåˆšå¼€å§‹æ¶ˆè´¹è€…å¹¶æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯ç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§å‡ºæ•°æ®äº†ä¹‹åï¼Œå†å¼€å§‹æ¶ˆè´¹ï¼æˆ‘ä»¬çš„ç›®çš„æˆåŠŸè¾¾æˆï¼\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./test########â†“produce 139716365768448 ç”Ÿäº§ï¼š41########â†“produce 139716365768448 ç”Ÿäº§ï¼š11consume 139716357375744 æ¶ˆè´¹ï¼š41########â†“produce 139716365768448 ç”Ÿäº§ï¼š19consume 139716357375744 æ¶ˆè´¹ï¼š11########â†“produce 139716365768448 ç”Ÿäº§ï¼š19consume 139716357375744 æ¶ˆè´¹ï¼š19########â†“produce 139716365768448 ç”Ÿäº§ï¼š25consume 139716357375744 æ¶ˆè´¹ï¼š19########â†“produce 139716365768448 ç”Ÿäº§ï¼š63consume 139716357375744 æ¶ˆè´¹ï¼š25\n\nå¦‚æœå¢åŠ çº¿ç¨‹åˆ°2ç”Ÿäº§2æ¶ˆè´¹ï¼Œåˆ™ä¼šçœ‹åˆ°ä¸‹é¢çš„æƒ…å†µ\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./test########â†“produce 140483816179456 ç”Ÿäº§ï¼š51consume 140483807786752 æ¶ˆè´¹ï¼š51########â†“produce 140483799394048 ç”Ÿäº§ï¼š38consume 140483791001344 æ¶ˆè´¹ï¼š38########â†“produce 140483816179456 ç”Ÿäº§ï¼š37consume 140483807786752 æ¶ˆè´¹ï¼š37\n\næ¯æ¬¡è¢«å”¤é†’çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œäº¤æ›¿å”¤é†’\n4.2.2 è¿›ä¸€æ­¥å°è£…ä¸ºäº†ä»£ç çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹é˜»å¡é˜Ÿåˆ—è¿›ä¸€æ­¥å°è£…\n#include&lt;iostream&gt;#include&lt;queue&gt;#include&lt;pthread.h&gt;#include&lt;unistd.h&gt;using namespace std;template&lt;class T&gt;class BlockQueue&#123;private:    queue&lt;T&gt; _bq;//é˜Ÿåˆ—    size_t _size;//å¤§å°    pthread_mutex_t _mutex;//é”    pthread_cond_t _proInf;//é€šçŸ¥ç”Ÿäº§è€…    pthread_cond_t _conInf;//é€šçŸ¥æ¶ˆè´¹è€…public:    BlockQueue(int sz=5)        :_size(sz)    &#123;        pthread_mutex_init(&amp;_mutex,nullptr);        pthread_cond_init(&amp;_proInf,nullptr);        pthread_cond_init(&amp;_conInf,nullptr);    &#125;    ~BlockQueue()    &#123;        pthread_mutex_destroy(&amp;_mutex);        pthread_cond_destroy(&amp;_proInf);        pthread_cond_destroy(&amp;_conInf);    &#125;    //æ¶ˆè´¹è€…æ¶ˆè´¹    T pop()    &#123;        //åŠ é”        lock();        //åˆ¤æ–­æ¡ä»¶        if(isEmpty())//ç©ºï¼Œä¸æ¶ˆè´¹        &#123;            ConWait();        &#125;        //æ¶ˆè´¹å¹¶é€šçŸ¥ç”Ÿäº§è€…        T tmp = _bq.front();        _bq.pop();        WakeUpPro();        //è§£é”        unlock();        return tmp;    &#125;    //ç”Ÿäº§è€…ç”Ÿäº§    void push(const T&amp; in)    &#123;        //åŠ é”        lock();        //åˆ¤æ–­æ¡ä»¶        if(isFull())//æ»¡ï¼Œä¸ç”Ÿäº§        &#123;            ProWait();        &#125;        //ç”Ÿäº§å¹¶é€šçŸ¥æ¶ˆè´¹è€…        _bq.push(in);        WakeUpCon();        //è§£é”        unlock();    &#125;private:    void lock()    &#123;        pthread_mutex_lock(&amp;_mutex);    &#125;    void unlock()    &#123;        pthread_mutex_unlock(&amp;_mutex);    &#125;    //å”¤é†’æ¶ˆè´¹è€…    void WakeUpCon()    &#123;        pthread_cond_signal(&amp;_conInf);    &#125;    //å”¤é†’ç”Ÿäº§è€…    void WakeUpPro()    &#123;        pthread_cond_signal(&amp;_proInf);    &#125;    //æ¶ˆè´¹è€…ç­‰å¾…    void ConWait()    &#123;        pthread_cond_wait(&amp;_conInf,&amp;_mutex);    &#125;    //ç”Ÿäº§è€…ç­‰å¾…    void ProWait()    &#123;        pthread_cond_wait(&amp;_proInf,&amp;_mutex);    &#125;    //åˆ¤æ–­æ¡ä»¶    bool isFull()    &#123;        return _size == _bq.size();    &#125;    bool isEmpty()    &#123;        return _bq.empty();    &#125;&#125;;\n\n4.2.3 ä½¿ç”¨taskåˆ†é…è¿ç®—ä»»åŠ¡å› ä¸ºé˜»å¡é˜Ÿåˆ—æ˜¯ç”¨æ¨¡æ¿ç±»å‹çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªä»¿å‡½æ•°ï¼Œæ¥ç»™ç”Ÿäº§è€…æ¶ˆè´¹è€…åˆ†é…ä»»åŠ¡\n#pragma once#include &lt;iostream&gt;using namespace std;class Task&#123;public:    Task(int one=0, int two=0, char op=&quot;+&quot;)         : _elem1(one), _elem2(two), _operator(op)    &#123;&#125;    // ä»¿å‡½æ•°    int operator() ()    &#123;        return run();    &#125;    // è¿è¡Œä»¿å‡½æ•°    int run()    &#123;        int result = 0;        switch (_operator)        &#123;        case &#x27;+&#x27;:            result = _elem1 + _elem2;            break;        case &#x27;-&#x27;:            result = _elem1 - _elem2;            break;        case &#x27;*&#x27;:            result = _elem1 * _elem2;            break;        case &#x27;/&#x27;:        &#123;            if (_elem2 == 0)            &#123;                cout &lt;&lt; &quot;div zero, abort&quot; &lt;&lt; endl;                result = -1;            &#125;            else            &#123;                result = _elem1 / _elem2;            &#125;            break;        &#125;         case &#x27;%&#x27;:        &#123;            if (_elem2 == 0)            &#123;                cout &lt;&lt; &quot;mod zero, abort&quot; &lt;&lt; endl;                result = -1;            &#125;            else            &#123;                result = _elem1 % _elem2;            &#125;            break;        &#125;        default:            cout &lt;&lt; &quot;unknown: &quot; &lt;&lt; _operator &lt;&lt; endl;            break;        &#125;        return result;    &#125;    // è·å–å…ƒç´ ï¼Œæ–¹ä¾¿æ‰“å°    void get(int *e1, int *e2, char *op)    &#123;        *e1 = _elem1;        *e2 = _elem2;        *op = _operator;    &#125;private:    int _elem1;    int _elem2;    char _operator;&#125;;\n\næµ‹è¯•ä¸€ä¸‹\n#include &quot;blockqueue.hpp&quot;#include &quot;task.hpp&quot;#include &lt;time.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;string ops =&quot;+-*/%&quot;;void *consumer(void *args)&#123;    BlockQueue&lt;Task&gt; *bqp = (BlockQueue&lt;Task&gt; *)args;    while (1)    &#123;        Task t = bqp-&gt;pop();        int result = t();    //å¤„ç†ä»»åŠ¡        int one, two;        char op;        t.get(&amp;one, &amp;two, &amp;op);        cout &lt;&lt; &quot;consumer [&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = &quot; &lt;&lt; result &lt;&lt; endl;    &#125;&#125;void *producer(void *args)&#123;    BlockQueue&lt;Task&gt; *bqp = (BlockQueue&lt;Task&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œä»»åŠ¡        int one = rand() % 50;        int two = rand() % 20;        char op = ops[rand() % ops.size()];        Task t(one, two, op);        // æŠ•æ”¾ç»™æ¶ˆè´¹è€…ç”Ÿäº§        bqp-&gt;push(t);        cout &lt;&lt; &quot;producter[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = ?&quot; &lt;&lt; endl;        sleep(1);    &#125;&#125;void test2()&#123;    pthread_t t1,t2;    BlockQueue&lt;Task&gt; bq(5);    pthread_create(&amp;t1,nullptr,producer,(void*)&amp;bq);    sleep(1);    pthread_create(&amp;t2,nullptr,consumer,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;int main()&#123;    srand((unsigned long)time(nullptr));//ä¹˜ä¸€ä¸ªæ•°å­—æ·»åŠ éšæœºæ€§    test2();    return 0;&#125;\n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿäº§è€…ç”Ÿäº§äº†é—®é¢˜ä¹‹åï¼Œæ¶ˆè´¹è€…ä¼šå»è§£ç­”ã€‚æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦åœ¨çº¿ç¨‹ä¸­å–å›è¿ç®—å¥½çš„ç»“æœï¼Œå°±OKäº†ï¼\n[muxue@bt-7274:~/git/linux/code/23-01-08 blockqueue]$ ./testproducter[140703422265088] 1673319321 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 43-16 = ?consumer [140703413872384] 1673319322 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 43-16 = 27producter[140703422265088] 1673319322 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 45/12 = ?consumer [140703413872384] 1673319322 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 45/12 = 3producter[140703422265088] 1673319323 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 17/7 = ?consumer [140703413872384] 1673319323 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 17/7 = 2producter[140703422265088] 1673319324 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 49-14 = ?consumer [140703413872384] 1673319324 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 49-14 = 35producter[140703422265088] 1673319325 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 4%4 = ?consumer [140703413872384] 1673319325 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 4%4 = 0\n\n\n5.é˜»å¡é˜Ÿåˆ—-å¾ªç¯é˜Ÿåˆ—5.0 ä¸ºå•¥ç”¨å¾ªç¯é˜Ÿåˆ—ä¸Šé¢çš„é˜Ÿåˆ—æ˜¯å°è£…äº†queueï¼Œä¸‹é¢æˆ‘ä»¬è¦åˆ©ç”¨ç¯å½¢é˜Ÿåˆ—çš„æ–¹å¼æ¥å®ç°ä¸€ä¸ªåŠŸèƒ½ç›¸åŒçš„ç¯å½¢é˜Ÿåˆ—ã€‚\næ‰€è°“å¾ªç¯é˜Ÿåˆ—ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ä¸­ï¼Œé€šè¿‡å¤´å°¾ä¸¤ä¸ªæŒ‡é’ˆï¼Œæ¥æ ‡è¯†é˜Ÿåˆ—çš„å¤´å°¾ã€‚å¦‚æœæ•°æ®æ•°é‡è¶…å‡ºç©ºé—´æœ«å°¾ï¼Œåˆ™åœ¨ç©ºé—´çš„å¼€å¤´æ”¾å…¥ï¼Œå¹¶ç§»åŠ¨å°¾æŒ‡é’ˆ\n\nè¿™éƒ¨åˆ†å¯ä»¥çœ‹æˆ‘çš„åšå®¢ å¾ªç¯é˜Ÿåˆ—\n\nç”¨ä¸Šå¾ªç¯é˜Ÿåˆ—ï¼Œå°±æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ä¼˜åŠ¿ï¼šå› ä¸ºæˆ‘ä»¬è®¿é—®çš„ï¼ˆå‡è®¾æ˜¯æ•°ç»„ï¼‰æ˜¯ä¸åŒä¸‹æ ‡ä½ç½®ï¼Œå…¶å¹¶éåŒä¸€å—å†…å­˜ç©ºé—´ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥åŒæ—¶è®¿é—®çš„ï¼è¿™æ ·å°±è¿›ä¸€æ­¥æ˜¾ç°äº†ç”Ÿäº§æ¶ˆè´¹çš„å¹¶å‘å±æ€§\nè¿™å°±ç›¸å½“äºæŠŠå¾ªç¯é˜Ÿåˆ—è¿™ä¸ªä¸´ç•Œèµ„æºåˆ†æˆäº†ä¸€å°å—ä¸€å°å—ï¼›åªæœ‰æ»¡&#x2F;ç©ºçš„æ—¶å€™ï¼Œå¤´å°¾æŒ‡é’ˆä¼šæŒ‡å‘åŒä¸€å—ç©ºé—´ï¼Œå…¶ä½™æ—¶é—´éƒ½æ˜¯ä¸å†²çªçš„ï¼\næ³¨æ„ï¼šè¿™éœ€è¦ç¨‹åºçŒ¿æ¥ä¿è¯ï¼Œè·å–äº†ä¿¡å·é‡ä¹‹åï¼Œè®¿é—®çš„è‚¯å®šæ˜¯ä¸´ç•Œèµ„æºä¸­çš„ä¸åŒåŒºåŸŸï¼Œå¦åˆ™å¦‚æœè®¿é—®åˆ°äº†åŒä¸€å—åŒºåŸŸï¼Œè¿˜æ˜¯ä¼šå‡ºé—®é¢˜çš„ï¼\n5.1 POSIXä¿¡å·é‡è¿™é‡Œåˆè¦é‡æ–°è®¤è¯†ä¸€ä¸‹ä¿¡å·é‡äº†ï¼Œåœ¨å…ˆå‰çš„åšå®¢ä¸­ï¼Œç®€å•æåˆ°äº†ä¿¡å·é‡çš„æ¦‚å¿µï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ã€‚\n\npæ“ä½œï¼šç”³è¯·èµ„æº\nvæ“ä½œï¼šå½’è¿˜èµ„æº\n\nå¯¹ä¿¡å·é‡çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œä¸ä¼šå› ä¸ºçº¿ç¨‹åˆ‡æ¢è€Œå‘ç”Ÿé”™è¯¯å’Œå†²çªã€‚\nå¾ªç¯é˜Ÿåˆ—éœ€è¦æœ‰ä¸¤ä¸ªæ ‡è¯†ç¬¦ï¼Œæ¥æ ‡è¯†å½“å‰æ•°æ®çš„å¤´å°¾ã€‚æ³¨æ„ï¼Œä¿¡å·é‡å¯ä¸èƒ½åšä¸‹æ ‡ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨intç±»å‹ï¼ŒåŠ é”æ¥è§£å†³åŸå­æ€§é—®é¢˜ï¼›\n\nä¿¡å·é‡åœ¨ç¯å½¢é˜Ÿåˆ—ä¸­çš„ä½œç”¨ï¼Œè¿˜æ˜¯ç”¨äºæ ‡è¯† ç©ºé—´å‰©ä½™/æ•°æ®æ•°é‡\nå› ä¸ºè¿™æ˜¯ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼š\n\nç”Ÿäº§è€…æ”¾å…¥æ•°æ®ï¼Œå¯¹åº”çš„æ˜¯ç©ºé—´ä¿¡å·é‡ï¼Œåªæœ‰æœ‰ç©ºé—´çš„æ—¶å€™ï¼Œæ‰èƒ½å¾€ç¯å½¢é˜Ÿåˆ—é‡Œé¢æ”¾å…¥\næ¶ˆè´¹è€…å–å‡ºæ•°æ®ï¼Œå¯¹åº”çš„æ˜¯æ•°æ®ä¿¡å·é‡ï¼Œæ²¡æœ‰æ•°æ®ä¹Ÿå°±ä¸èƒ½å–äº†\n\næ­¤æ—¶ï¼Œå…ˆå‰ä»‹ç»çš„semopå‡½æ•°åœ¨æ­¤ç¯èŠ‚ä¸å¤ªé€‚åˆï¼Œåœ¨æ­¤ä»‹ç»ä¸¤ä¸ªæ¥è‡ªpthreadåº“çš„æ–°æ¥å£ï¼›è¿™äº›æ¥å£åœ¨ç¼–è¯‘çš„æ—¶å€™éƒ½éœ€è¦å¸¦ä¸Š-lpthread\n5.1.1 sem_init&#x2F;destroy#include &lt;semaphore.h&gt;int sem_init(sem_t *sem, int pshared, unsigned int value);int sem_destroy(sem_t *sem);\n\nå› ä¸ºéƒ½æ˜¯pthreadåº“çš„ï¼Œå…¶ä½¿ç”¨æ–¹æ³•è¿˜æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¿¡å·é‡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ç»™å®šä¸€ä¸ªvalueä½œä¸ºä¿¡å·é‡çš„åˆå§‹å€¼ï¼›\nå¯¹initå‡½æ•°çš„psharedå‚æ•°åšä¸€å®šè®²è§£ï¼Œåœ¨manæ‰‹å†Œä¸­çš„ä»‹ç»æ˜¯è¿™æ ·çš„\n\nå¦‚æœæˆ‘ä»¬çš„ä¿¡å·é‡éœ€è¦åœ¨çº¿ç¨‹ä¸­å…±äº«ï¼Œé‚£å°±å°†è¯¥å‚æ•°è®¾ç½®ä¸º0ï¼›\nå¦‚æœä¿¡å·é‡éœ€è¦åœ¨è¿›ç¨‹ä¸­å…±äº«ï¼Œå…¶å°±åº”è¯¥å¤„åœ¨å…±äº«å†…å­˜åŒºåŸŸï¼Œå¯ä»¥å¯¹æ·»åŠ äº†å…±äº«å†…å­˜çš„è¿›ç¨‹ä¹‹é—´å…±äº«ï¼›\né˜»å¡é˜Ÿåˆ—æ˜¯ç»™çº¿ç¨‹ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾ç½®æˆ0å°±å¯ä»¥äº†ã€‚\n5.1.2 sem_waitè¿™ä¸ªæ¥å£å’Œé”&#x2F;æ¡ä»¶å˜é‡çš„waitæ˜¯ä¸€æ ·çš„ï¼Œå…¶ä½œç”¨æ˜¯ç”³è¯·ä¸€ä¸ªä¿¡å·é‡ï¼Œå¦‚æœä¿¡å·é‡ä¸º0ï¼Œåˆ™åœ¨æ­¤å¤„ç­‰å¾…ï¼Œç›´åˆ°ä¿¡å·é‡é0\nNAME       sem_wait, sem_timedwait, sem_trywait - lock a semaphoreSYNOPSIS       #include &lt;semaphore.h&gt;       int sem_wait(sem_t *sem);       int sem_trywait(sem_t *sem);       int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout);       Link with -pthread.\n\nå¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯è®©ä¿¡å·é‡-1\ntrywaitåˆ™æ˜¯éé˜»å¡æ£€æµ‹ï¼›timewaitæ˜¯è®¾ç½®ç­‰å¾…çš„æ—¶é—´ï¼Œè¶…æ—¶å°±ä¸ç­‰äº†ã€‚è¿™ç‚¹å’Œæ¡ä»¶å˜é‡çš„æ¥å£æ˜¯ä¸€æ ·çš„\n5.1.3  sem_postè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯é‡Šæ”¾ä¸€ä¸ªä¿¡å·é‡ï¼Œç›¸å½“äºç»™è¿™ä¸ªä¿¡å·é‡+1\nNAME       sem_post - unlock a semaphoreSYNOPSIS       #include &lt;semaphore.h&gt;       int sem_post(sem_t *sem);\n\n5.1.4 åœ¨å¾ªç¯é˜Ÿåˆ—é‡Œé¢ä½¿ç”¨çŸ¥é“äº†è¿™å‡ ä¸ªæ¥å£ï¼Œå¯¹äºæˆ‘ä»¬ç¯å½¢é˜Ÿåˆ—çš„ä½¿ç”¨å°±æ¯”è¾ƒæ˜äº†äº†\n\nå½“ç”Ÿäº§è€…å¼€å§‹ç”Ÿäº§çš„æ—¶å€™ï¼Œç”³è¯·ä¸€ä¸ªç©ºé—´ä¿¡å·é‡ï¼ˆå‰©ä½™ç©ºé—´-1ï¼‰ç”Ÿäº§å®Œæ¯•åï¼Œé‡Šæ”¾ä¸€ä¸ªæ•°é‡ä¿¡å·é‡ï¼ˆå‰©ä½™æ•°é‡+1ï¼‰\nå½“æ¶ˆè´¹è€…å¼€å§‹æ¶ˆè´¹çš„æ—¶å€™ï¼Œç”³è¯·ä¸€ä¸ªæ•°é‡ä¿¡å·é‡ï¼ˆå‰©ä½™æ•°é‡-1ï¼‰ç”Ÿäº§å®Œæ¯•åï¼Œé‡Šæ”¾ä¸€ä¸ªç©ºé—´ä¿¡å·é‡ï¼ˆå‰©ä½™ç©ºé—´+1ï¼‰\n\né™¤äº†è¿™ä¸¤ä¸ªä¿¡å·é‡ï¼Œç”Ÿäº§æ¶ˆè´¹çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ“ä½œå¤´å°¾æŒ‡é’ˆï¼ŒæŒ‡å‘é˜Ÿåˆ—æ­£ç¡®çš„ä½ç½®\n5.2 æˆå‘˜å˜é‡å‰é¢é“ºå«äº†é‚£ä¹ˆå¤šï¼Œç°åœ¨å°±å¯ä»¥æ¥è¯•è¯•æ°´äº†ï¼\nvector&lt;T&gt; _rq;//é˜Ÿåˆ—sem_t _spaceSem;//ç©ºé—´ä¿¡å·é‡sem_t _valueSem;//æ•°æ®ä¿¡å·é‡pthread_mutex_t _proMutex;//ç”Ÿäº§è€…çš„é”pthread_mutex_t _conMutex;//æ¶ˆè´¹è€…çš„é”size_t _rear;//å°¾æŒ‡é’ˆsize_t _front;//å¤´æŒ‡é’ˆ\n\nå› ä¸ºä¿¡å·é‡å°±å¯ä»¥å……å½“æ¡ä»¶å˜é‡çš„è§’è‰²ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸éœ€è¦æ¡ä»¶å˜é‡æ¥é€šçŸ¥ç”Ÿäº§è€…&#x2F;æ¶ˆè´¹è€…äº†\n5.3 æ„é€ &#x2F;ææ„æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯å†™æ„é€ &#x2F;ææ„äº†\nRingQueue(int capa = 5)    :_rq(capa),    _rear(0),    _front(0)&#123;    sem_init(&amp;_spaceSem,0,capa);//ç©ºé—´    sem_init(&amp;_valueSem,0,0);//æ•°é‡ä¸º0    pthread_mutex_init(&amp;_proMutex,nullptr);    pthread_mutex_init(&amp;_conMutex,nullptr);&#125;~RingQueue()&#123;    sem_destroy(&amp;_spaceSem);    sem_destroy(&amp;_valueSem);    pthread_mutex_destroy(&amp;_proMutex);    pthread_mutex_destroy(&amp;_conMutex);&#125;\n\n5.4 ç”Ÿäº§æ¶ˆè´¹é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œå½“é˜Ÿåˆ—æ»¡&#x2F;ç©ºçš„æ—¶å€™ï¼Œåˆ†åˆ«å¯¹åº”å•¥æƒ…å†µ\n\næ»¡ï¼šç”Ÿäº§å¤ªå¤šäº†ï¼Œç”Ÿäº§è€…å¾—ä¼‘æ¯\nç©ºï¼šæ¶ˆè´¹å¤ªå¤šäº†ï¼Œæ¶ˆè´¹è€…å¾—ç¼“ç¼“\n\nå› ä¸ºæœ‰ä¿¡å·é‡å¸®æˆ‘ä»¬åšäº†è®¿é—®æ§åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åˆ¤æ–­å¾ªç¯é˜Ÿåˆ—ä»€ä¹ˆæ—¶å€™ä¸ºæ»¡ï¼Œä»€ä¹ˆæ—¶å€™ä¸ºç©ºï¼š\n\næ»¡çš„æ—¶å€™ï¼šæ•°é‡&#x3D;é˜Ÿåˆ—å®¹é‡ï¼Œç©ºé—´ä¿¡å·é‡&#x3D;0ï¼Œæ— æ³•ç”³è¯·ç©ºé—´ï¼Œæ— æ³•ç”Ÿäº§\næ­¤æ—¶ç”Ÿäº§è€…ä¼šåœ¨ç©ºé—´ä¿¡å·é‡é‡Œé¢ç­‰å¾…ï¼Œä¸ä¼šç»§ç»­ç”Ÿäº§ï¼›æ¶ˆè´¹è€…ç»§ç»­æ¶ˆè´¹\nç©ºçš„æ—¶å€™ï¼šç©ºé—´&#x3D;é˜Ÿåˆ—å®¹é‡ï¼Œæ•°é‡ä¿¡å·é‡&#x3D;0ï¼Œæ²¡æœ‰å¯ä»¥æ¶ˆè´¹çš„\næ­¤æ—¶æ¶ˆè´¹è€…ä¼šåœ¨æ•°é‡ä¿¡å·é‡é‡Œé¢ç­‰å¾…ï¼Œä¸ä¼šç»§ç»­æ¶ˆè´¹ï¼›ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§\n\nè¿™ä¹Ÿæ˜¯ä¿¡å·é‡ä½œä¸ºè®¿é—®æ§åˆ¶çš„ä¸€å¤§ç‰¹å¾ï¼Œå½“ä½ ç”³è¯·æˆåŠŸäº†ï¼Œå°±ä»£è¡¨ä½ è‚¯å®šæœ‰ä¸´ç•Œèµ„æºçš„è®¿é—®æƒé™äº†ï¼›å†åŠ ä¸Šæˆ‘ä»¬ç»™è®¿é—®ä¸´ç•ŒåŒºåŠ äº†é”ï¼Œè‡ªç„¶ä¹Ÿä¸ä¼šå‡ºç°è¢«å…¶ä»–çº¿ç¨‹æŠ¢äº†çš„æƒ…å†µğŸ‰\n//ç”Ÿäº§è€…void Push(T&amp; in)&#123;    sem_wait(&amp;_spaceSem);//è·å–ç©ºé—´    pthread_mutex_lock(&amp;_proMutex);    _rq[_rear] = in; //ç”Ÿäº§    _rear++;         // å†™å…¥ä½ç½®åç§»    _rear %= _rq.size(); // æ›´æ–°ä¸‹æ ‡ï¼Œé¿å…è¶Šç•Œ    pthread_mutex_unlock(&amp;_proMutex);    sem_post(&amp;_valueSem);//é‡Šæ”¾æ•°é‡&#125;//æ¶ˆè´¹T pop()&#123;    sem_wait(&amp;_valueSem);    pthread_mutex_lock(&amp;_conMutex);    T tmp = _rq[_front];    _front++;    _front %= _rq.size();// æ›´æ–°ä¸‹æ ‡ï¼Œä¿è¯ç¯å½¢ç‰¹å¾    pthread_mutex_unlock(&amp;_conMutex);    sem_post(&amp;_spaceSem);    return tmp;&#125;\n\n5.5 æµ‹è¯•string ops =&quot;+-*/%&quot;;void *consumer(void *args)&#123;    RingQueue&lt;Task&gt; *bqp = (RingQueue&lt;Task&gt; *)args;    while (1)    &#123;        Task t = bqp-&gt;pop();        int result = t();    //å¤„ç†ä»»åŠ¡        int one, two;        char op;        t.get(&amp;one, &amp;two, &amp;op);        cout &lt;&lt; &quot;consumer [&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = &quot; &lt;&lt; result &lt;&lt; endl;    &#125;&#125;void *producer(void *args)&#123;    RingQueue&lt;Task&gt; *bqp = (RingQueue&lt;Task&gt; *)args;    while (1)    &#123;        // åˆ¶ä½œä»»åŠ¡        int one = rand() % 50;        int two = rand() % 20;        char op = ops[rand() % ops.size()];        Task t(one, two, op);        // æŠ•æ”¾ç»™æ¶ˆè´¹è€…ç”Ÿäº§        bqp-&gt;push(t);        cout &lt;&lt; &quot;producter[&quot; &lt;&lt; pthread_self() &lt;&lt; &quot;] &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; &quot; ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: &quot; &lt;&lt; one &lt;&lt; op &lt;&lt; two &lt;&lt; &quot; = ?&quot; &lt;&lt; endl;        sleep(1);    &#125;&#125;void test2()&#123;    pthread_t t1,t2;    RingQueue&lt;Task&gt; bq(5);    pthread_create(&amp;t1,nullptr,producer,(void*)&amp;bq);    sleep(1);    pthread_create(&amp;t2,nullptr,consumer,(void*)&amp;bq);    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;int main()&#123;    srand((unsigned long)time(nullptr));//ä¹˜ä¸€ä¸ªæ•°å­—æ·»åŠ éšæœºæ€§    test2();    return 0;&#125;\n\nåˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œå‘ç°äº†è¿™ä¸ªé”™è¯¯\n\nè¿™æ˜¯å› ä¸ºåœ¨taskä¸­ï¼Œæˆ‘ä»¬é‡å†™äº†æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šç”Ÿæˆé»˜è®¤æ„é€ äº†\nTask(int one, int two, char op)     : _elem1(one), _elem2(two), _operator(op)&#123;&#125;\n\nè€Œåˆ›å»ºç¯å½¢é˜Ÿåˆ—çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚æ­¤æ—¶å‘ç°æ²¡æœ‰åŒ¹é…çš„æ„é€ å‡½æ•°ï¼ˆæ— å‚ï¼‰ï¼Œå°±ä¼šæŠ¥é”™ï¼\nè§£å†³åŠæ³•æ˜¯ï¼Œæ·»åŠ ä¸Šä¸€ä¸ªæ— å‚æ„é€ ï¼Œç›´æ¥ä½¿ç”¨defaultå…³é”®å­—å³å¯\nTask() = default;//ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„æ— å‚æ„é€ \n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿäº§æ¶ˆè´¹ç¨³å®šè·‘èµ·æ¥äº†ï¼\n[muxue@bt-7274:~/git/linux/code/23-01-17 ringqueue]$ ./testproducter[139758380586752] 1673936332 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 24-8 = ?producter[139758380586752] 1673936333 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 34/19 = ?consumer [139758372194048] 1673936333 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 24-8 = 16consumer [139758372194048] 1673936333 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 34/19 = 1producter[139758380586752] 1673936334 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 18*16 = ?consumer [139758372194048] 1673936334 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 18*16 = 288producter[139758380586752] 1673936335 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 48+15 = ?consumer [139758372194048] 1673936335 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 48+15 = 63\n\nå¢å¤šçº¿ç¨‹ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/23-01-17 ringqueue]$ ./testproducter[140344921630464] 1673936659 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 44-15 = ?consumer [140344913237760] 1673936660 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 44-15 = 29producter[140344921630464] 1673936660 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 33+14 = ?consumer [140344913237760] 1673936660 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 33+14 = 47producter[140344904845056] 1673936661 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 14/12 = ?consumer [140344896452352] 1673936661 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 14/12 = 1producter[140344921630464] 1673936661 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 24-16 = ?consumer [140344913237760] 1673936661 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 24-16 = 8producter[140344904845056] 1673936662 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 3-3 = ?consumer [140344896452352] 1673936662 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 3-3 = 0producter[140344921630464] 1673936662 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 36*7 = ?consumer [140344913237760] 1673936662 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 36*7 = 252producter[140344904845056] 1673936663 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 28+8 = ?consumer [140344896452352] 1673936663 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 28+8 = 36producter[140344921630464] 1673936663 ç”Ÿäº§äº†ä¸€ä¸ªä»»åŠ¡: 26-5 = ?consumer [140344913237760] 1673936663 æ¶ˆè´¹äº†ä¸€ä¸ªä»»åŠ¡: 26-5 = 21\n\nç»“è¯­å…³äºçº¿ç¨‹åŒæ­¥çš„çŸ¥è¯†ç‚¹ï¼Œå¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚åšå®¢å†™çš„æ»¡æ»¡å½“å½“ï¼Œåœ¨ç†è§£äº†æ¥å£çš„åŸºæœ¬å‘½åå’Œä½¿ç”¨é€»è¾‘åï¼Œæ„Ÿè§‰å°±æ²¡æœ‰é‚£ä¹ˆéš¾äº†\nåŠ æ²¹å“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘è¿›ç¨‹é€šä¿¡ | å…±äº«å†…å­˜ | ä¿¡å·é‡","url":"/posts/3323274806/","content":"ä¸Šç¯‡Linuxçš„åšå®¢æ˜¯æœ‰å…³ç®¡é“çš„ï¼Œä»Šæ—¥å°±è®©æˆ‘ä»¬ç»§ç»­åº·åº·è¿›ç¨‹é—´é€šä¿¡çš„å¦å¤–ä¸€ç§æ–¹æ³•ï¼šå…±äº«å†…å­˜\n\n\nå®Œæ•´ä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“ ğŸ‘‡\n\nhttps://gitee.com/musnow/raspberry-practice/tree/master/code/22-11-12_systemV\n\n[TOC]\n1.å•¥æ˜¯å…±äº«å†…å­˜ï¼Ÿè¿›ç¨‹é—´é€šä¿¡çš„åŸºæœ¬æ–¹å¼ï¼Œå°±æ˜¯è®©ä¸¤ä¸ªè¿›ç¨‹çœ‹åˆ°åŒä¸€ä»½èµ„æºã€‚\nå…±äº«å†…å­˜(shm)å®ç°è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€šè¿‡ç³»ç»Ÿæ¥å£å¼€è¾Ÿä¸€æ®µå†…å­˜ï¼Œå†è®©å¤šä¸ªè¿›ç¨‹å»è®¿é—®è¿™å—å†…å­˜ï¼Œå°±èƒ½åŒæ—¶çœ‹åˆ°ä¸€ä»½èµ„æºã€‚\n\nè¿™é‡Œè´´å‡ºä¹‹å‰åŠ¨æ€åº“åšå®¢ä¸­çš„å›¾ï¼Œå…±äº«å†…å­˜çš„æ–¹å¼å’Œè¯¥å›¾å±•ç¤ºçš„æ–¹å¼ç±»ä¼¼ã€‚è¿›ç¨‹éœ€è¦è°ƒç”¨ç³»ç»Ÿæ¥å£ï¼Œå°†å·²ç»å¼€è¾Ÿå¥½çš„å…±äº«å†…å­˜æ˜ å°„åˆ°è‡ªå·±çš„é¡µè¡¨ä¸­ï¼Œä»¥å®ç°è®¿é—®ã€‚\nè¿™é‡Œå°±å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼š\n\næ“ä½œç³»ç»Ÿçš„æ¥å£æ€ä¹ˆçŸ¥é“è¿›ç¨‹è¦çš„æ˜¯é‚£ä¸€å—å…±äº«å†…å­˜ï¼Ÿå³å…±äº«å†…å­˜æ˜¯æ€ä¹ˆæ ‡è¯†çš„ï¼Ÿ\n\nè¦çŸ¥é“ï¼Œä¹‹å‰æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶ã€å¼€è¾Ÿç®¡é“ç­‰ç­‰ï¼Œéƒ½æ˜¯å…·æœ‰å”¯ä¸€çš„æ–‡ä»¶è·¯å¾„æ¥æ ‡è¯†æ–‡ä»¶çš„ã€‚å¦‚æœæŒ‰ä»¥å‰çš„æƒ³æ³•ï¼šæ‰“å¼€æ–‡ä»¶-&gt;ç³»ç»Ÿè¿”å›æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå…±äº«å†…å­˜åˆ™åº”è¯¥æ˜¯å¼€è¾Ÿå…±äº«å†…å­˜-&gt;ç³»ç»Ÿè¿”å›å…±äº«å†…å­˜çš„ç¼–å·\n\nè¿™å°±å‡ºç°äº†é—®é¢˜ï¼\n\nå‡è®¾è¿›ç¨‹Aå¼€è¾Ÿäº†ä¸€æ®µå…±äº«å†…å­˜ï¼Œç³»ç»Ÿè¿”å›äº†ç¼–å·123ï¼Œé‚£ä¹ˆè¿›ç¨‹Aè¦æ€ä¹ˆè®©å…¶ä»–æƒ³ä½¿ç”¨è¿™å—å…±äº«å†…å­˜è¿›è¡Œé€šä¿¡çš„è¿›ç¨‹ï¼ŒçŸ¥é“å®ƒå¼€è¾Ÿçš„å…±äº«å†…å­˜ç¼–å·æ˜¯123å‘¢ï¼Ÿæ€»ä¸èƒ½å¼€ä¸ªç®¡é“å‘Šè¯‰å®ƒå§ï¼Ÿé‚£å²‚ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾ğŸ˜‚\n\næ‰€ä»¥ï¼Œå…±äº«å†…å­˜çš„ç¼–å·å…¶å®å’Œå‘½åç®¡é“ä¸€æ ·ï¼Œæ˜¯ç”±ç”¨æˆ·æ‰‹åŠ¨åœ¨ä»£ç ä¸­æŒ‡å®šçš„ã€‚åªè¦è¿›ç¨‹ä½¿ç”¨è¿™ä¸ªç¼–å·å»è·å–å…±äº«å†…å­˜ï¼Œä»–ä»¬å°±èƒ½è·å–åˆ°åŒä¸€ä»½ï¼\n\n2.ç›¸å…³æ¥å£è¯´å®Œäº†åŸºæœ¬æ¦‚å¿µï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥åº·åº·å®ƒçš„ä½¿ç”¨\n2.1 ftokftok - convert a pathname and a project identifier to a System V IPC key\n#include &lt;sys/types.h&gt;#include &lt;sys/ipc.h&gt;key_t ftok(const char *pathname, int proj_id);\n\nå‰é¢æåˆ°äº†ï¼Œå…±äº«å†…å­˜çš„keyæ˜¯æˆ‘ä»¬è‡ªå·±æŒ‡å®šçš„ã€‚Linuxç³»ç»Ÿç»™å®šäº†ftokæ¥å£ï¼Œå°†ç”¨æˆ·æä¾›çš„pathnameå·¥ä½œè·¯å¾„ï¼Œä»¥åŠproj_idé¡¹ç›®ç¼–å·è½¬æ¢ä¸ºä¸€ä¸ªå…±äº«å†…å­˜çš„keyï¼ˆå…¶å®å°±æ˜¯intç±»å‹ï¼‰\n\nåªè¦æˆ‘ä»¬çš„å·¥ä½œè·¯å¾„å’Œé¡¹ç›®ç¼–å·ä¼ çš„æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå®ƒè¿”å›çš„keyå°±æ˜¯ä¸€æ ·çš„ï¼\nè¿™ä¸ªå‡½æ•°ä¹Ÿèƒ½ç”¨äºä¿¡å·é‡çš„keyçš„åˆ›å»ºï¼\n2.2 shmgetshmget - allocates a System V shared memory segment\n#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;int shmget(key_t key, size_t size, int shmflg);\nå‚æ•°åˆ†åˆ«ä¸ºkeyå€¼ï¼Œå…±äº«å†…å­˜çš„å¤§å°ï¼Œä»¥åŠåˆ›å»ºå…±äº«å†…å­˜çš„æ–¹å¼ã€‚\nkeyå€¼éœ€è¦é€šè¿‡ ftokå‡½æ•°è·å–ï¼›\nå…¶ä¸­å…±äº«å†…å­˜çš„å¤§å°æœ€å¥½è®¾ç½®ä¸º4kbçš„æ•´æ•°å€ï¼Œå› ä¸ºæ“ä½œç³»ç»ŸIOçš„åŸºæœ¬å•ä½æ˜¯4KBã€‚å¦‚æœä½ ç”³è¯·äº†ä¸æ˜¯4çš„æ•´æ•°å€çš„å­—èŠ‚ï¼Œæ¯”å¦‚15ä¸ªå­—èŠ‚ï¼Œå…¶è¿˜æ˜¯ä¼šç”³è¯·16ä¸ªå­—èŠ‚(4ä¸ªé¡µ)äº¤ç»™ä½ ï¼Œè€Œå…¶ä¸­æœ‰1kbçš„å†…å­˜ä½ æ˜¯æ— æ³•ä½¿ç”¨çš„ï¼Œå³é€ æˆäº†å†…å­˜æµªè´¹ğŸ˜¥\nåˆ›å»ºå…±äº«å†…å­˜çš„shmflg:\n\nIPC_CREATï¼šåˆ›å»ºå…±äº«å†…å­˜ã€‚å¦‚æœå­˜åœ¨åˆ™è·å–ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºåè·å–\nIPC_EXCLï¼šå¿…é¡»é…åˆIPC_CREATä½¿ç”¨ï¼Œå¦‚æœä¸å­˜åœ¨æŒ‡å®šçš„å…±äº«å†…å­˜ï¼Œå°±è¿›è¡Œåˆ›å»ºï¼›å¦‚æœè¯¥å…±äº«å†…å­˜å­˜åœ¨ï¼Œåˆ™å‡ºé”™è¿”å›ï¼ˆå³ä¿è¯è·å–åˆ°çš„å…±äº«å†…å­˜ä¸€å®šæ˜¯å½“å‰è¿›ç¨‹åˆ›å»ºçš„ï¼Œæ˜¯ä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜ï¼‰\n\nè¿”å›å€¼æ˜¯ä¸€ä¸ªå…±äº«å†…å­˜çš„æ ‡è¯†ç¬¦\nRETURN VALUE       On success, a valid shared memory identifier is returned.  On errir, -1 is returned, and errno is set to indicate the error.\n\nè¿™äº›å·¥ä½œéƒ½æ˜¯æ“ä½œç³»ç»Ÿåšçš„ã€‚å…¶å†…æ ¸ä¸­æœ‰ä¸“é—¨çš„ç®¡ç†å•å…ƒæ¥åˆ¤æ–­ä¸€ä¸ªå…±äº«å†…å­˜æ˜¯å¦å­˜åœ¨ï¼Œä»¥åŠä½•æ—¶è¢«åˆ›å»ºã€è¢«ä½¿ç”¨ã€è¢«ä»€ä¹ˆè¿›ç¨‹ç»‘å®šç­‰ç­‰â€¦\nå‘½ä»¤è¡Œé”®å…¥man shmctlï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…æ ¸ç»“æ„\nstruct shmid_ds &#123;    struct ipc_perm shm_perm;    /* Ownership and permissions */    size_t          shm_segsz;   /* Size of segment (bytes) */    time_t          shm_atime;   /* Last attach time */    time_t          shm_dtime;   /* Last detach time */    time_t          shm_ctime;   /* Last change time */    pid_t           shm_cpid;    /* PID of creator */    pid_t           shm_lpid;    /* PID of last shmat(2)/shmdt(2) */    shmatt_t        shm_nattch;  /* No. of current attaches */    ...&#125;;struct ipc_perm &#123;    key_t          __key;    /* Key supplied to shmget(2) */    uid_t          uid;      /* Effective UID of owner */    gid_t          gid;      /* Effective GID of owner */    uid_t          cuid;     /* Effective UID of creator */    gid_t          cgid;     /* Effective GID of creator */    unsigned short mode;     /* Permissions + SHM_DEST and                                           SHM_LOCKED flags */    unsigned short __seq;    /* Sequence number */&#125;;\n\nå…±äº«å†…å­˜è¦è¢«ç®¡ç†ï¼Œå…¶å†…æ ¸ç»“æ„ä¸­ä¸€å®šæœ‰ä¸€ä¸ªå”¯ä¸€çš„keyå€¼æ¥æ ‡è¯†è¯¥å…±äº«å†…å­˜ï¼Œå³å’Œæ–‡ä»¶çš„inodeä¸€æ ·\nkey_t     __key; //å…±äº«å†…å­˜çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”±ç”¨æˆ·åœ¨shmgetä¸­æä¾›\n\nå…³äºkeyä¸ºä½•è¦è®©ç”¨æˆ·æä¾›ï¼Œå·²ç»åœ¨ä¸Šé¢åšå‡ºè¿‡è§£é‡ŠğŸ‘‰ å›é¡¾ä¸€ä¸‹\n\n2.3 shmat&#x2F;shmdtatå…¶å®æ˜¯attachç»‘å®šçš„ç¼©å†™ï¼Œè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå…±äº«å†…å­˜å’Œæˆ‘ä»¬å½“å‰çš„è¿›ç¨‹ç»‘å®šã€‚\nå…¶å®å°±æ˜¯å°†è¿™ä¸ªå…±äº«å†…å­˜æ˜ å°„åˆ°è¿›ç¨‹çš„é¡µè¡¨ä¸­ï¼ˆå †æ ˆä¹‹é—´ï¼‰\nshmat, shmdt - System V shared memory operations\n#include &lt;sys/types.h&gt;#include &lt;sys/shm.h&gt;void *shmat(int shmid, const void *shmaddr, int shmflg);int shmdt(const void *shmaddr);\n\nä¸€å…±æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ä¸ºatå’Œdtï¼Œç”¨äºç»‘å®š&#x2F;è§£ç»‘å…±äº«å†…å­˜\nshmatçš„ä¸‰ä¸ªå‚æ•°å¦‚ä¸‹\n\nshmidï¼šä¸ºshmgetçš„è¿”å›å€¼\nshmaddrï¼šæŒ‡å®šå…±äº«å†…å­˜è¿æ¥åˆ°å½“å‰è¿›ç¨‹ä¸­çš„åœ°å€ä½ç½®ã€‚é€šå¸¸ä¸ºç©ºï¼Œè¡¨ç¤ºè®©ç³»ç»Ÿæ¥é€‰æ‹©å…±äº«å†…å­˜çš„åœ°å€ã€‚\nshmflgï¼šå¦‚æœæŒ‡å®šäº†SHM_RDONLYä½ï¼Œåˆ™ä»¥åªè¯»æ–¹å¼è¿æ¥æ­¤æ®µï¼›å¦åˆ™ä»¥è¯»å†™çš„æ–¹å¼è¿æ¥æ­¤æ®µï¼›é€šå¸¸è®¾ç½®ä¸º0\n\nè°ƒç”¨æˆåŠŸçš„æ—¶å€™ï¼Œè¿”å›æŒ‡å‘å…±äº«å†…å­˜ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æŒ‡é’ˆï¼›å‡ºé”™è¿”å›-1\n\nshmdtçš„å‚æ•°ä¸ºshmatæ­£ç¡®è°ƒç”¨æ—¶çš„è¿”å›å€¼\n\nä»¥ä¸‹æ˜¯manæ‰‹å†Œä¸­å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è¿”å›å€¼çš„æè¿°ğŸ‘‡\nRETURN VALUE       On success shmat() returns the address of the attached shared memory segment; on error (void *) -1 is returned, and errno is set  to       indicate the cause of the error.       On success shmdt() returns 0; on error -1 is returned, and errno is set to indicate the cause of the error.\n\n2.4 shmctlè¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨äºæ“ä½œæˆ‘ä»¬çš„å…±äº«å†…å­˜\n#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;int shmctl(int shmid, int cmd, struct shmid_ds *buf);\n\nå…¶ä¸­cmdçš„å‚æ•°æœ‰ä¸‹é¢å‡ ç§\n\nIPC_RMID  åˆ é™¤è¯¥å…±äº«å†…å­˜\n\nIPC_STAT  æŠŠshmid_dsç»“æ„ä¸­çš„æ•°æ®è®¾ç½®ä¸ºå…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼ï¼Œå³ç”¨å…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼è¦†ç›–shmid_dsçš„å€¼\n\nIPC_SET å¦‚æœè¿›ç¨‹æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œå°±æŠŠå…±äº«å†…å­˜çš„å½“å‰å…³è”å€¼è®¾ç½®ä¸ºshmid_dsç»“æ„ä¸­ç»™å‡ºçš„å€¼\n\n\næœ€åä¸€ä¸ªbufå‚æ•°æ˜¯ä¸€ä¸ªæŒ‡å‘shmid_dsç»“æ„çš„æŒ‡é’ˆï¼Œä¸€èˆ¬è®¾ä¸ºNULL\nThe buf argument is a pointer to a shmid_ds structure\n\nshmid_dsçš„åŸºæœ¬ç»“æ„å¦‚ä¸‹\nstruct shmid_ds&#123;    uid_t shm_perm.uid;    uid_t shm_perm.gid;    mode_t shm_perm.mode;&#125;;\n\nä»¥åˆ é™¤ä¸ºä¾‹ï¼Œå…¶æ“ä½œå¦‚ä¸‹\nshmctl(shmid, IPC_RMID, NULL);//åˆ é™¤shmidçš„å…±äº«å†…å­˜\n\n2.5 ipcså‘½ä»¤å…ˆæ¥åº·åº·å‡ ä¸ªipcså‘½ä»¤çš„é€‰é¡¹ï¼Œè¿™äº›å‘½ä»¤å¯ä»¥å¸®åŠ©æˆ‘ä»¬æŸ¥çœ‹å…±äº«èµ„æºã€‚å…¶ä¸­æˆ‘ä»¬è¦ç”¨åˆ°çš„æ˜¯-mæŸ¥çœ‹å…±äº«å†…å­˜\nipcs -c #æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—/å…±äº«å†…å­˜/ä¿¡å·é‡ipcs -s #å•ç‹¬æŸ¥çœ‹ä¿¡å·é‡ipcs -q #å•ç‹¬æŸ¥çœ‹æ¶ˆæ¯é˜Ÿåˆ—ipcs -m #å•ç‹¬æŸ¥çœ‹å…±äº«å†…å­˜\n\næ‰§è¡Œäº†ä¹‹åï¼Œä¼šåˆ—å‡ºå½“å‰æ“ä½œç³»ç»Ÿä¸­å¼€è¾Ÿçš„å…±äº«å†…å­˜ï¼Œä»¥åŠå®ƒä»¬çš„åŸºæœ¬ä¿¡æ¯\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m ------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 1          muxue      0          1024       0    \n\nè¿™é‡Œçš„keyå’Œæˆ‘ä»¬ä½¿ç”¨ftokè·å–åˆ°çš„keyå€¼æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬æ‰“å°çš„æ—¶å€™æ˜¯åè¿›åˆ¶ï¼Œæ“ä½œç³»ç»Ÿåˆ—å‡ºæ¥çš„ä¸ºåå…­è¿›åˆ¶ã€‚\nipcrm åˆ é™¤è¿›ç¨‹é€šä¿¡èµ„æºè¿™ä¸ªå‘½ä»¤å¯ä»¥ç”¨ä¸åˆ é™¤ipcèµ„æºï¼ŒåŒ…æ‹¬å…±äº«å†…å­˜\nipcrm -m shmid #åˆ é™¤å…±äº«å†…å­˜\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ipcrm -m å…±äº«å†…å­˜çš„shmidæ¥åˆ é™¤å…±äº«å†…å­˜\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 1          muxue      0          1024       0                       [muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcrm -m 1[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       \n\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å…±äº«å†…å­˜å·²ç»è¢«åˆ é™¤äº†ã€‚\n\nä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•ç”¨è¯¥å‘½ä»¤åˆ é™¤ä¸€ä¸ªæ­£åœ¨è¢«ä½¿ç”¨çš„å…±äº«å†…å­˜æ—¶ï¼Œå®ƒå¹¶ä¸ä¼šè¢«ç«‹å³åˆ é™¤ï¼ˆç«‹å³åˆ é™¤ä¼šå½±å“è¿›ç¨‹è¿è¡Œï¼‰\næ­¤æ—¶æ‰§è¡Œåˆ é™¤ï¼Œåœ¨å…±äº«å†…å­˜çš„statusåˆ—ä¼šå‡ºç°destï¼›è§‚å¯Ÿç»“æœï¼Œå½“è¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œè¿™ä¸ªå…±äº«å†…å­˜ä¼šè¢«ç›´æ¥åˆ é™¤ï¼ˆè¿›ç¨‹å†…éƒ¨å¹¶æ²¡æœ‰è°ƒç”¨shmctlæ¥å£ï¼‰\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 21         muxue      666        1024       2                       [muxue@bt-7274:~/git]$ ipcrm -m 21[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x00000000 21         muxue      666        1024       2          dest         [muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                 \n\nç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä¸æ‰§è¡Œipcrmå‘½ä»¤+è¿›ç¨‹å†…éƒ¨ä¸è°ƒç”¨shmctlæ¥å£ï¼Œè¿™ä¸ªå…±äº«å†…å­˜å°±ä¼šä¸€ç›´å­˜åœ¨\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 22         muxue      666        1024       0                       \n\nç»“è®ºï¼šä½¿ç”¨ipcrm -må‘½ä»¤åˆ é™¤å…±äº«å†…å­˜ä¹‹åï¼Œå…¶å…±äº«å†…å­˜ä¸ä¸€å®šä¼šç«‹å³é‡Šæ”¾ã€‚å¦‚æœæœ‰è¿›ç¨‹å…³è”äº†è¯¥å…±äº«å†…å­˜ï¼Œåˆ™ä¼šåœ¨è¿›ç¨‹å»å…³è”ä¹‹åé‡Šæ”¾ï¼›\n2.6 å…±äº«å†…å­˜å’Œç®¡é“çš„å¯¹æ¯”é¢è¯•çš„æ—¶å€™é—®é“äº†è¿™ä¸ªé—®é¢˜ï¼\n\n2.7 æ¶ˆæ¯é˜Ÿåˆ—mq&#x2F;ä¿¡å·é‡çš„æ¥å£æ¶ˆæ¯é˜Ÿåˆ—å’Œä¿¡å·é‡çš„æ¥å£å’Œå…±äº«å†…å­˜å¾ˆç›¸ä¼¼\næ¶ˆæ¯é˜Ÿåˆ—ç”¨çš„ä¸å¤šï¼Œä¿¡å·é‡çš„éš¾åº¦å¾ˆé«˜ï¼ğŸ˜‚ åæ–‡ä¼šä»‹ç»ä¿¡å·é‡ã€‚\n//æ¶ˆæ¯é˜Ÿåˆ—ç›¸å…³æ¥å£msgget //è·å–msgctl //æ“ä½œmsgsnd //å‘é€ä¿¡æ¯msgrcv //ä¿¡å·é‡semgetsemctlsemop\n\n3.ä½¿ç”¨3.1 åˆ›å»ºå¹¶è·å–//å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šï¼Œä¸ºäº†åšå®¢ç¯‡å¹…ï¼Œè¿™é‡Œçœç•¥äº†#define NUM 1024#define PROJ_ID 0x20#define PATH_NAME &quot;/home/muxue/git/linux/code/22-11-12_systemV&quot;key_t CreateKey()&#123;    key_t key = ftok(PATH_NAME, PROJ_ID);    if(key &lt; 0)    &#123;        cerr &lt;&lt;&quot;ftok: &quot;&lt;&lt; strerror(errno) &lt;&lt; endl;        exit(1);//keyè·å–é”™è¯¯ç›´æ¥é€€å‡ºç¨‹åº    &#125;    return key;&#125;int main()&#123;    key_t key = CreateKey();    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    return 0;&#125;\n\nFile existsè¿™é‡Œä¼šå‘ç°ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œç¨‹åºæˆåŠŸè·å–äº†å…±äº«å†…å­˜ï¼›ä½†æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå´æŠ¥é”™è¯´File exists(æ–‡ä»¶å­˜åœ¨)\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget: 1[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget err: File exists\n\nè¿™æ˜¯å› ä¸ºå…±äº«å†…å­˜çš„å£°æ˜å‘¨æœŸæ˜¯éšå†…æ ¸çš„ã€‚å³åªè¦è¿™ä¸ªå…±äº«å†…å­˜ä¸è¢«åˆ é™¤ï¼Œä»–å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°å†…æ ¸å› ä¸ºæŸç§åŸå› é‡Šæ”¾æ‰å®ƒï¼Œäº¦æˆ–è€…æ“ä½œç³»ç»Ÿå…³æœº\né€šè¿‡ä¸Šé¢æåˆ°çš„ipcrm -m shmid å‘½ä»¤åˆ é™¤å…±äº«å†…å­˜ï¼Œæ‰èƒ½é‡æ–°è¿è¡Œä»£ç è·å–æ–°çš„å…±äº«å†…å­˜\n\nä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œåº”è¯¥åœ¨è¿›ç¨‹ç»“æŸåä½¿ç”¨shmctlæ¥å£åˆ é™¤å…±äº«å†…å­˜\n\n[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ./testshmget success: 2[muxue@bt-7274:~/git/linux/code/22-11-12_systemV]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 2          muxue      0          1024       0                       \n\nè®¾ç½®æƒé™å€¼é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„å…±äº«å†…å­˜çš„permsæ˜¯0ï¼Œä»£è¡¨æ²¡æœ‰ç”¨æˆ·èƒ½è®¿é—®è¿™ä¸ªå…±äº«å†…å­˜ã€‚æ‰€ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åœ¨flagé‡Œé¢ç›´æ¥æˆ–ä¸Šè¿™ä¸ªå…±äº«å†…å­˜çš„æƒé™å€¼       \nä»£ç å¦‚ä¸‹ğŸ‘‡\nint main()&#123;    key_t key = CreateKey();    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(5);    shmctl(id,IPC_RMID,nullptr);    return 0;&#125;\n\nè¿™æ—¶å€™åˆ›å»ºçš„å…±äº«å†…å­˜å°±æœ‰æ­£ç¡®çš„æƒé™å€¼äº†\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 4          muxue      666        1024       0    \n\n3.2 æŒ‚æ¥&#x2F;å–æ¶ˆæŒ‚æ¥//å…³è”å…±äº«å†…å­˜char *str = (char*)shmat(id, nullptr, 0);\n\nå› ä¸ºshmatå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªvoid*æŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä½¿ç”¨mallocä¸€æ ·çš„æ–¹å¼ä½¿æ¥æŒ‚æ¥å…±äº«å†…å­˜ã€‚éšåå¯¹è¿™ä¸ªå†…å­˜çš„æ“ä½œå°±æ˜¯æ­£å¸¸çš„æŒ‡é’ˆæ“ä½œäº†ï¼\nåŒæ ·çš„ï¼Œå¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹Ÿéœ€è¦ç”¨åŒæ ·çš„æ–¹å¼æŒ‚æ¥å…±äº«å†…å­˜ï¼Œæ‰èƒ½è¯»å–åˆ°ç›¸åŒçš„æ•°æ®\n[muxue@bt-7274:~/git]$ ipcs -m------ Shared Memory Segments --------key        shmid      owner      perms      bytes      nattch     status      0x00005feb 0          root       666        12000      1                       0x20011ac8 4          muxue      666        1024       1   \n\næŒ‚æ¥æˆåŠŸåï¼Œå¯ä»¥å‘ç°nattchçš„å€¼ä»0å˜ä¸º1\nå–æ¶ˆ&#x2F;åˆ é™¤å–æ¶ˆæŒ‚æ¥çš„æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥æŠŠshmatçš„è¿”å›å€¼ä¼ å…¥å³å¯\nshmdt(str);//å–æ¶ˆæŒ‚æ¥\n\nå¦‚æœæ˜¯æœåŠ¡ç«¯ï¼Œåˆ™è¿˜éœ€è¦åœ¨å–æ¶ˆæŒ‚æ¥ä¹‹åï¼Œåˆ é™¤å…±äº«å†…å­˜ã€‚é¿å…ä¸‹æ¬¡ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œæ— æ³•é€šè¿‡keyè·å–åˆ°æ–°çš„å…±äº«å†…å­˜\nshmctl(id,IPC_RMID,nullptr);//åˆ é™¤å…±äº«å†…å­˜\n\n3.3 å†™å…¥å†…å®¹å› ä¸ºå…±äº«å†…å­˜æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå†…å­˜ï¼Œå…¶å’Œmallocå‡ºæ¥çš„å†…å­˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œç›´æ¥ä½¿ç”¨å³å¯\nè¿™é‡Œè¿˜æ˜¯ç”¨ä¸€ä¸ªæœåŠ¡ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯æ¥è¿›è¡Œæ¼”ç¤º\n//server.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //åˆ›å»ºå…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[server] shmat success\\n&quot;);    //è¯»å–æ•°æ®ï¼Œsleep(1)    int i=0;    while(i&lt;=40)    &#123;        printf(&quot;[%03d] %s\\n&quot;,i,str);        i++;        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[server] shmdt(str)\\n&quot;);    //åˆ é™¤å…±äº«å†…å­˜    shmctl(id,IPC_RMID,nullptr);    printf(&quot;[server] exit\\n&quot;);    return 0;&#125;//client.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //è·å–å…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[client] shmat success\\n&quot;);    //å†™å…¥æ•°æ®    int i=0;    while(i&lt;26)    &#123;        char base = &#x27;A&#x27;;        str[i] = base+i;        str[i+1] = &#x27;\\0&#x27;;        printf(&quot;write times: %02d\\n&quot;,i);        i++;        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[client] shmdt &amp; exit\\n&quot;);    return 0;&#125;\n\nè·‘èµ·æ¥ä¹‹åï¼Œå®¢æˆ·ç«¯å‘å…±äº«å†…å­˜ä¸­å†™å…¥æ•°æ®ï¼ˆæ³¨æ„æ§åˆ¶\\0ï¼‰æœåŠ¡ç«¯è¿›è¡Œè¯»å–ã€‚è¿™ä¾¿å®ç°äº†æˆ‘ä»¬è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡\n\nä¸è¿‡æˆ‘ä»¬å‘ç°ï¼Œå®¢æˆ·ç«¯å·²ç»åœæ­¢å†™å…¥ä¹‹åï¼ŒæœåŠ¡ç«¯è¿˜æ˜¯åœ¨ä¸åœçš„è¯»å–ã€‚å¦‚æœæˆ‘ä»¬ä¸æ§åˆ¶whileå¾ªç¯çš„è¯ï¼Œå…¶ä¼šä¸€ç›´è¿™ä¹ˆè¯»å–ä¸‹å»\n\nè¿™ä¾¿ç‰µæ‰¯å‡ºå…±äº«å†…å­˜çš„ä¸€ä¸ªç‰¹æ€§äº†\nå…±äº«å†…å­˜æ²¡æœ‰è®¿é—®æ§åˆ¶åœ¨ç®¡é“çš„åšå®¢ä¸­æåˆ°ï¼Œç®¡é“æ˜¯æœ‰è®¿é—®æ§åˆ¶çš„è¿›ç¨‹é€šä¿¡æ–¹å¼ï¼Œå†™ç«¯æ²¡æœ‰å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œè¯»ç«¯ä¼šåœ¨readä¸­è¿›è¡Œç­‰å¾…ã€‚\nè€Œå…±äº«å†…å­˜å› ä¸ºæˆ‘ä»¬æ˜¯ç›´æ¥åƒæ“ä½œä¸€ä¸ªmallocå‡ºæ¥çš„ç©ºé—´ä¸€æ ·è®¿é—®ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•ç³»ç»Ÿæ¥å£ï¼ˆç›¸æ¯”ä¹‹ä¸‹ç®¡é“éœ€è¦ä½¿ç”¨read/writeï¼‰æ‰€ä»¥æ“ä½œç³»ç»Ÿæ²¡æœ‰åŠæ³•å¸®æˆ‘ä»¬è¿›è¡Œè®¿é—®æ§åˆ¶ï¼\nä¹Ÿæ­£æ˜¯å› ä¸ºæ²¡æœ‰é˜»å¡ç­‰å¾…å°±èƒ½ç›´æ¥è®¿é—®è¿™å—å†…å­˜ç©ºé—´ï¼Œå…±äº«å†…å­˜æ˜¯è¿›ç¨‹ä¸­é€šä¿¡ä¸­æœ€å¿«çš„ä¸€ç§æ–¹å¼ã€‚\né€šè¿‡ç®¡é“è¿›è¡Œå…±äº«å†…å­˜çš„æ§åˆ¶æ—¢ç„¶å…±äº«å†…å­˜æ²¡æœ‰è®¿é—®æ§åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç®¡é“æ¥è®©æ§åˆ¶å…±äº«å†…å­˜çš„è¯»å†™\n\nå†™ç«¯å†™å®Œåï¼Œå°†å®Œæˆä¿¡å·å†™å…¥ç®¡é“ï¼Œç”±è¯»ç«¯è¯»å–\nè¯»ç«¯ä»ç®¡é“ä¸­è·å–åˆ°ä¿¡å·åï¼Œè®¿é—®å…±äº«å†…å­˜è¯»å‡ºå†…å®¹\nå¦‚æœå†™ç«¯æ²¡æœ‰å†™å¥½ï¼Œè¯»ç«¯å°±ä¼šåœ¨ç®¡é“readå†…éƒ¨ç­‰å¾…\n\nä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£ä¸ºä½•ä¸ç›´æ¥ç”¨ç®¡é“é€šä¿¡å‘¢ï¼Ÿ\n\nç®¡é“ä»…ä½œè®¿é—®æ§åˆ¶ï¼Œåªéœ€è¦ä¸€ä¸ªintä¹ƒè‡³ä¸€ä¸ªcharç±»å‹å³å¯ï¼›\nç›¸æ¯”ç›´æ¥ç®¡é“é€šä¿¡ï¼Œå…±äº«å†…å­˜çš„æ–¹å¼æ›´å¥½æ§åˆ¶ï¼ˆæ¯•ç«Ÿä½¿ç”¨å†…å­˜çš„æ–¹å¼å’Œä½¿ç”¨æŒ‡é’ˆä¸€æ ·ï¼Œæˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰ï¼Œç®¡é“è¿˜éœ€è¦æ–‡ä»¶æ“ä½œï¼›ï¼‰\nè¯»å–å¾ˆé•¿ä¸€ä¸²æ•°æ®çš„æ—¶å€™ï¼Œå…±äº«å†…å­˜çš„é€Ÿåº¦ä¼˜åŠ¿èƒ½ä½“ç°å‡ºæ¥ï¼›\n\nä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ğŸ‘‡\n//mykey.hpp#pragma once#include &lt;iostream&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;ctime&gt;#include &lt;cstdlib&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;cassert&gt;using namespace std;#define NUM 1024#define PROJ_ID 0x20#define PATH_NAME &quot;/home/muxue/git/linux/code/22-11-12_systemV&quot;#define FIFO_FILE &quot;sc.pipe&quot;key_t CreateKey()&#123;    key_t key = ftok(PATH_NAME, PROJ_ID);    if(key &lt; 0)    &#123;        cerr &lt;&lt;&quot;ftok: &quot;&lt;&lt; strerror(errno) &lt;&lt; endl;        exit(1);//keyè·å–é”™è¯¯ç›´æ¥é€€å‡ºç¨‹åº    &#125;    return key;&#125;void CreateFifo()&#123;    umask(0);    if(mkfifo(FIFO_FILE, 0666) &lt; 0)    &#123;        cerr &lt;&lt; &quot;fifo: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(2);    &#125;&#125;//æ‰“å¼€ç®¡é“æ–‡ä»¶int Open(int flags)&#123;    return open(FIFO_FILE, flags);&#125;//è®©è¯»ç«¯é€šè¿‡ç®¡é“ç­‰å¾…ssize_t Wait(int fd)&#123;    char val = 0;    //å¦‚æœå†™ç«¯æ²¡æœ‰å†™å…¥ï¼Œå…¶å°±ä¼šåœ¨readä¸­ç­‰å¾…    ssize_t s = read(fd, &amp;val, sizeof(val));    return s;&#125;//å‘é€å®Œæˆä¿¡æ¯int Signal(int fd)&#123;    char sig = &#x27;g&#x27;;    write(fd, &amp;sig, sizeof(sig));&#125;//server.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //åˆ›å»ºç®¡é“    CreateFifo();    //è·å–keyå€¼    key_t key = CreateKey();    //åˆ›å»ºå…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT | IPC_EXCL | 0666);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    //è·å–ç®¡é“    int fd = Open(O_RDONLY);    cout &lt;&lt; &quot;open fifo success: &quot; &lt;&lt; fd &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[server] shmat success\\n&quot;);    //è¯»å–æ•°æ®    int i=0;    while(i&lt;=40)    &#123;        ssize_t ret = Wait(fd);//é€šè¿‡ç®¡é“ç­‰å¾…        if(ret!=0)        &#123;            printf(&quot;[%03d] %s\\n&quot;,i,str);            i++;            sleep(1);        &#125;        else        &#123;            cout&lt;&lt;&quot;[server] wait finish, break&quot; &lt;&lt; endl;            break;        &#125;    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[server] shmdt(str)\\n&quot;);    //åˆ é™¤å…±äº«å†…å­˜    shmctl(id,IPC_RMID,nullptr);    close(fd);    unlink(FIFO_FILE);    printf(&quot;[server] exit\\n&quot;);    return 0;&#125;//client.cpp#include &quot;Mykey.hpp&quot;int main()&#123;    //è·å–keyå€¼    key_t key = CreateKey();    //è·å–å…±äº«å†…å­˜    int id = shmget(key, NUM, IPC_CREAT);    if(id&lt;0)    &#123;        cerr&lt;&lt; &quot;shmget err: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;         return 1;    &#125;    cout &lt;&lt; &quot;shmget success: &quot; &lt;&lt; id &lt;&lt; endl;    //è·å–ç®¡é“    int fd = Open(O_WRONLY);    cout &lt;&lt; &quot;open fifo success: &quot; &lt;&lt; fd &lt;&lt; endl;    sleep(2);    //å…³è”å…±äº«å†…å­˜    char *str = (char*)shmat(id, nullptr, 0);    printf(&quot;[client] shmat success\\n&quot;);    //å†™å…¥æ•°æ®    int i=0;    while(i&lt;26)    &#123;        char base = &#x27;A&#x27;;        str[i] = base+i;        str[i+1] = &#x27;\\0&#x27;;        printf(&quot;write times: %02d\\n&quot;,i);        i++;        Signal(fd);        sleep(1);    &#125;    //å»å…³è”    shmdt(str);//shmatçš„è¿”å›å€¼    printf(&quot;[client] shmdt &amp; exit\\n&quot;);    close(fd);    printf(&quot;[client] close fifo\\n&quot;);    return 0;&#125;\n\nè¿è¡Œç»“æœç®¡é“æ§åˆ¶äº†ä¹‹åï¼Œå½“å®¢æˆ·ç«¯é€€å‡ºçš„æ—¶å€™ï¼Œç®¡é“ä¹Ÿä¸ä¼šç»§ç»­è¯»å–ï¼Œè€Œæ˜¯åœ¨readå†…ç­‰å¾…\n\nå¦‚æœå®¢æˆ·ç«¯æœ€åå…³é—­äº†ç®¡é“çš„å†™æ®µï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šç›´æ¥é€€å‡ºã€‚è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†é€šè¿‡ç®¡é“æ§åˆ¶å…±äº«å†…å­˜çš„è¯»å†™ğŸ‘\n\n\n4.ç›¸å…³æ¦‚å¿µ4.0 ä¸´ç•Œèµ„æºèƒ½è¢«å¤šä¸ªè¿›ç¨‹çœ‹åˆ°çš„èµ„æºï¼Œè¢«ç§°ä¸ºä¸´ç•Œèµ„æº\nå¦‚æœä¸å¯¹ä¸´ç•Œèµ„æºè¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œè¿›ç¨‹å¯¹è¯¥èµ„æºçš„è®¿é—®å°±æ˜¯ä¹±åºçš„ï¼ˆæ¯”å¦‚çˆ¶å­è¿›ç¨‹å‘æ˜¾ç¤ºå™¨æ‰“å°å†…å®¹ï¼‰å¯èƒ½ä¼šå› ä¸ºæ•°æ®äº¤å‰å¯¼è‡´ä¹±ç ã€æ•°æ®ä¸å¯ç”¨ç­‰æƒ…å†µï¼›\nä»¥æ­¤å¯è§ï¼Œæ˜¾ç¤ºå™¨ã€ç®¡é“ã€å…±äº«å†…å­˜éƒ½æ˜¯ä¸´ç•Œèµ„æºã€‚\n\nç®¡é“æ˜¯æœ‰è®¿é—®æ§åˆ¶çš„ä¸´ç•Œèµ„æº\n\nè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æºçš„ä»£ç ï¼Œç§°ä¸ºä¸´ç•ŒåŒº\n\nä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ä»£ç éƒ½åœ¨è®¿é—®ä¸´ç•Œèµ„æºã€‚å¦‚ç®¡é“ä¸­ï¼Œå…¶å®åªæœ‰read/writeæ¥å£åœ¨è®¿é—®ä¸´ç•Œèµ„æºã€‚\n\näº’æ–¥ï¼šä»»ä½•æ—¶åˆ»ï¼Œåªå…è®¸ä¸€ä¸ªè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æºã€‚\nåŸå­æ€§ï¼šä¸€ä»¶äº‹æƒ…åªæœ‰åšå®Œ/æ²¡åšä¸¤ç§çŠ¶æ€ï¼Œæ²¡æœ‰ä¸­é—´çŠ¶æ€ã€‚\nä¸‹é¢å¯¹ä¿¡å·é‡çš„æ¦‚å¿µè¿›è¡Œè®²è§£~ åªç”¨åŸºæœ¬ç†è§£å³å¯ï¼›\n4.1 ä¿¡å·é‡4.1.1 æ¦‚å¿µä¿¡å·é‡æ˜¯å¯¹ä¸´ç•Œèµ„æºçš„æ§åˆ¶æ–¹å¼ä¹‹ä¸€ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼›å‡†ç¡®æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰åŸå­æ€§çš„è®¡æ•°å™¨ã€‚\n\nä¿¡å·é‡ä¿è¯ä¸ä¼šæœ‰å¤šä½™çš„è¿›ç¨‹è¿æ¥åˆ°è¿™ä»½ä¸´ç•Œèµ„æº\nè¿˜éœ€è¦ä¿è¯æ¯ä¸€ä¸ªè¿›ç¨‹çš„èƒ½å¤Ÿè®¿é—®åˆ°ä¸´ç•Œèµ„æºçš„ä¸åŒä½ç½®ï¼ˆæ ¹æ®ä¸Šå±‚ä¸šåŠ¡å†³å®šï¼‰\n\nä¿¡å·é‡æ ¹æ®æƒ…å†µçš„ä¸åŒåˆ†ä¸ºä¸¤ç§ï¼š\n\näºŒå…ƒä¿¡å·é‡ï¼ˆäº’æ–¥çŠ¶æ€ï¼Œå½“è¿›ç¨‹ä½¿ç”¨çš„æ—¶å€™ä¸º1ï¼Œæ²¡æœ‰è¿›ç¨‹ä½¿ç”¨çš„æ—¶å€™ä¸º0ï¼‰\nå¤šå…ƒä¿¡å·é‡ï¼ˆå¸¸è§„çš„è®¡æ•°å™¨ï¼‰\n\nå¦‚æœä¸€ä¸ªè¿›ç¨‹æƒ³è®¿é—®ç”±ä¿¡å·é‡æ§åˆ¶çš„ä¸´ç•Œèµ„æºï¼Œå¿…é¡»å…ˆç”³è¯·ä¿¡å·é‡æ‰èƒ½è¿›è¡Œè®¿é—®ã€‚ä½†æ˜¯åªè¦æˆ‘ç”³è¯·æˆåŠŸäº†ï¼Œå°±ä¸€å®šèƒ½è®¿é—®åˆ°è¿™ä¸ªä¸´ç•Œèµ„æºä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ–è€…å…¨éƒ¨ï¼‰\n4.1.2 åŸå­æ€§çš„è¯´æ˜å…ˆæ¥æƒ³æƒ³ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªå˜é‡+1/-1éœ€è¦åšä»€ä¹ˆå·¥ä½œï¼š\n\nå°†è¿™ä¸ªå˜é‡ä»å†…å­˜ä¸­æ‹¿åˆ°CPUçš„å¯„å­˜å™¨ä¸­\nåœ¨å¯„å­˜å™¨ä¸­å®ŒæˆåŠ å‡æ“ä½œ\næ”¾å›å†…å­˜\n\nè¿™å…¶ä¸­æ˜¯æœ‰å¾ˆå¤šä¸ªä¸­é—´çŠ¶æ€çš„ï¼Œè®¾è¯¥å˜é‡åˆå§‹å€¼ä¸º100\n\nå‡è®¾ä¸€ä¸ªè¿›ç¨‹Aæ‹¿èµ°äº†è¿™ä¸ªå˜é‡ï¼Œæ”¾å…¥CPUçš„å¯„å­˜å™¨\nå¦å¤–ä¸€ä¸ªè¿›ç¨‹Bä¹Ÿæ¥æ‹¿èµ°äº†è¿™ä¸ªå˜é‡\næ­¤æ—¶Aå’ŒBæ‹¿åˆ°çš„éƒ½æ˜¯100\nAå¯¹è¯¥å˜é‡è¿›è¡Œäº†å¾ªç¯--æ“ä½œï¼Œæœ€ç»ˆè¯¥å˜é‡å˜æˆäº†50ï¼Œå°†å…¶æ”¾å›å†…å­˜\nBå¯¹è¯¥å˜é‡-1ï¼Œå°†å…¶æ”¾å›å†…å­˜\næœ€ç»ˆå¯¼è‡´Aå¯¹å˜é‡çš„æ“ä½œè¢«Bè¦†ç›–ï¼Œå‡ºç°äº†å˜é‡ä¸ç»Ÿä¸€çš„æƒ…å†µ\n\nè€Œæˆ‘ä»¬çš„ä¿¡å·é‡ä¸ºäº†ä¿è¯èƒ½å¤Ÿæ­£ç¡®çš„æ§åˆ¶è¿›ç¨‹çš„è®¿é—®ï¼Œå…¶å°±å¿…é¡»ç»´æŠ¤è‡ªèº«çš„åŸå­æ€§ï¼ä¸èƒ½æœ‰ä¸­é—´çŠ¶æ€\n\nè¯´äººè¯å°±æ˜¯ï¼Œå¦‚æœè¿›ç¨‹Aåœ¨è®¿é—®ä¿¡å·é‡ï¼Œè¿›ç¨‹Bæ¥äº†ï¼Œä¿¡å·é‡åº”è¯¥æ‹’ç»Bçš„è®¿é—®ï¼Œç›´åˆ°Aè®¿é—®ç»“æŸã€‚ä¸èƒ½è®©Bä¸­é€”æ’å…¥è®¿é—®ï¼Œä»è€Œå¯¼è‡´å¯èƒ½çš„æ•°æ®ä¸ç»Ÿä¸€ï¼›\n\nå…±äº«å†…å­˜åŒæ ·å¯ä»¥é€šè¿‡ä¿¡å·é‡è¿›è¡Œè®¿é—®æ§åˆ¶\n\n4.1.3 æ¥å£åˆ›å»ºä¿¡å·é‡ semgetä½¿ç”¨å¦‚ä¸‹å‡½æ•°è·å–ä¸€ä¸ªä¿¡å·é‡ï¼Œæˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·é‡ï¼›\nè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ ftok å‡½æ•°åˆ›å»ºä¸€ä¸ª key_t å€¼ä½œä¸ºä¿¡å·é‡çš„æ ‡è¯†ç¬¦ã€‚\nint semget(key_t key, int nsems, int semflg);\n\n\nkeyÂ æ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†ä¿¡å·é‡é›†ã€‚\nnsemsÂ æ˜¯ä¿¡å·é‡é›†ä¸­ä¿¡å·é‡çš„æ•°é‡ã€‚\nsemflgÂ æ˜¯æ ‡å¿—ä½ï¼Œç”¨äºæŒ‡å®šä¿¡å·é‡çš„æƒé™ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†semflgå†™ä¸º IPC_CREAT | æƒé™å€¼ï¼Œè¿™é‡Œçš„æƒé™å€¼å’Œlinuxä¸­æ–‡ä»¶æƒé™å€¼æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚éœ€è¦æ‰€æœ‰äººéƒ½æœ‰ä¸€åˆ‡æƒé™ï¼Œå°±å¯ä»¥å†™ 777ï¼›ä¸€èˆ¬å†™æˆ 666å°±è¡Œäº†ï¼Œè¿™ä»£è¡¨æ‰€æœ‰ç”¨æˆ·ï¼Œæ‰€å±ç»„å’Œå…¶ä»–ç”¨æˆ·éƒ½æ‹¥æœ‰è¯»å†™æƒé™ã€‚\næŒ‡å®šäº† IPC_CREAT æ ‡å¿—ä½ï¼Œåˆ™è¡¨ç¤ºå¦‚æœè¯¥ä¿¡å·é‡ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒï¼›å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›å·²å­˜åœ¨çš„ä¿¡å·é‡çš„æ ‡è¯†ç¬¦ã€‚\nåˆå§‹åŒ–ä¿¡å·é‡ semctlint semctl(int semid, int semnum, int cmd, ...);\n\n\nsemidÂ æ˜¯ä¿¡å·é‡é›†çš„æ ‡è¯†ç¬¦ã€‚\nsemnumÂ æ˜¯ä¿¡å·é‡åœ¨ä¿¡å·é‡é›†ä¸­çš„ç´¢å¼•ã€‚\ncmdÂ æ˜¯æ“ä½œæŒ‡ä»¤ï¼Œå¯ä»¥æ˜¯Â SETVALã€GETVALÂ ç­‰ã€‚\nå¯¹äºÂ SETVALÂ æ“ä½œæŒ‡ä»¤ï¼Œéœ€è¦é€šè¿‡å¯å˜å‚æ•°Â ...Â æ¥è®¾ç½®åˆå§‹åŒ–çš„å€¼ã€‚\n\nå¯¹äºè¯¥å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°cmdï¼Œæœ‰å¦‚ä¸‹ç±»å‹çš„é€‰é¡¹\n\nIPC_STATï¼šè·å–ä¿¡å·é‡çš„çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¿¡å·é‡çš„å½“å‰å€¼ã€æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´ç­‰ã€‚\nIPC_SETï¼šè®¾ç½®ä¿¡å·é‡çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚è®¾ç½®ä¿¡å·é‡çš„æƒé™ã€æ‰€æœ‰è€…ç­‰ã€‚\nIPC_RMIDï¼šåˆ é™¤ä¿¡å·é‡ï¼Œé‡Šæ”¾å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚\nGETVALï¼šè·å–ä¿¡å·é‡çš„å½“å‰å€¼ã€‚\nSETVALï¼šè®¾ç½®ä¿¡å·é‡çš„å½“å‰å€¼ã€‚\n\né™¤äº†ä¸Šè¿°å¸¸è§çš„æ“ä½œç±»å‹ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›æ“ä½œç±»å‹ç”¨äºæ›´å…·ä½“çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š\n\nGETPIDï¼šè·å–æœ€åä¸€æ¬¡æ“ä½œä¿¡å·é‡çš„è¿›ç¨‹ IDã€‚\nGETNCNTï¼šè·å–å½“å‰æ­£åœ¨ç­‰å¾…ä¿¡å·é‡è§£é”çš„è¿›ç¨‹æ•°é‡ã€‚\nGETZCNTï¼šè·å–å½“å‰ç­‰å¾…ä¿¡å·é‡è§£é”çš„è¿›ç¨‹æ•°é‡ã€‚\n\næ ¹æ®æˆ‘ä»¬çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„æ“ä½œç¬¦æ¥è¿›è¡Œä¿¡å·é‡çš„æ“ä½œå³å¯ï¼›\nå¦‚ä¸‹æ˜¯ä¸€ä¸ªè·å–ä¿¡å·é‡å½“å‰å€¼çš„æ“ä½œã€‚\nint semid;  // ä¿¡å·é‡é›†æ ‡è¯†ç¬¦// éœ€è¦åˆå§‹åŒ–int sem_num = 0;  // ä¿¡å·é‡ç´¢å¼•ï¼Œå¦‚æœä¿¡å·é‡é›†é‡Œé¢åªæœ‰ä¸€ä¸ªä¿¡å·é‡ï¼Œå°±ç”¨0int cmd = GETVAL;  // è·å–ä¿¡å·é‡çš„å‘½ä»¤ï¼ŒGETVALè¡¨ç¤ºè·å–å½“å‰å€¼// æ‰§è¡Œè¿™ä¸ªå‡½æ•°æ—¶ï¼Œè¿”å›å€¼å°±æ˜¯ä¿¡å·é‡å½“å‰å€¼// å¦‚æœè¿”å›-1å°±ä»£è¡¨è·å–å¤±è´¥äº†int sem_value = semctl(semid, sem_num, cmd);\n\nä¿®æ”¹ä¿¡å·é‡ semopint semop(int semid, struct sembuf *sops, size_t nops);\n\nåŠŸèƒ½ï¼š æ“ä½œä¿¡å·é‡ï¼ŒP V æ“ä½œ\nå‚æ•°ï¼š \n\nsemid ä¸ºä¿¡å·é‡é›†çš„æ ‡è¯†ç¬¦ï¼›\nsops æŒ‡å‘è¿›è¡Œæ“ä½œçš„ç»“æ„ä½“æ•°ç»„çš„é¦–åœ°å€ï¼›\nnsops æŒ‡å‡ºå°†è¦è¿›è¡Œæ“ä½œçš„ä¿¡å·çš„ä¸ªæ•°ï¼›\n\nè¿”å›å€¼ï¼š æˆåŠŸè¿”å›0ï¼Œå‡ºé”™è¿”å›-1\nRETURN VALUE       If successful semop() and semtimedop() return 0; otherwise they return -1 with errno indicating the error.\n\nç»“æ„ä½“ sembufè¿™é‡Œæˆ‘ä»¬ä¼šç”¨åˆ° struct sembufè¿™ä¸ªç»“æ„ä½“æ¥æ“ä½œä¿¡å·é‡ï¼Œåœ¨ç³»ç»Ÿä¸­è¿™ä¸ªç»“æ„ä½“çš„å£°æ˜å¦‚ä¸‹\nstruct sembuf&#123;  unsigned short int sem_num;\t/* semaphore number */  short int sem_op;\t\t/* semaphore operation */  short int sem_flg;\t\t/* operation flag */&#125;;\n\n\nsem_numï¼šè¡¨ç¤ºè¦æ“ä½œçš„ä¿¡å·é‡åœ¨ä¿¡å·é‡é›†ä¸­çš„ç´¢å¼•ï¼Œå¦‚æœä¿¡å·é‡é›†åªæœ‰ä¸€ä¸ªä¿¡å·é‡ï¼Œåˆ™ä¸º 0ã€‚\nsem_opï¼šè¡¨ç¤ºè¿›è¡Œçš„æ“ä½œç±»å‹ï¼Œå¯ä»¥æ˜¯æ­£æ•°ã€è´Ÿæ•°æˆ–é›¶ã€‚æ­£æ•°è¡¨ç¤ºå¢åŠ ï¼ˆé‡Šæ”¾ï¼‰ä¿¡å·é‡çš„å€¼ï¼Œè´Ÿæ•°è¡¨ç¤ºå‡å°‘ï¼ˆè·å–ï¼‰ä¿¡å·é‡çš„å€¼ï¼Œé›¶è¡¨ç¤ºæ£€æŸ¥ä¿¡å·é‡çš„å€¼ã€‚\nsem_flgï¼šè¡¨ç¤ºæ“ä½œçš„æ ‡å¿—ä½ï¼Œç”¨äºæŒ‡å®šé¢å¤–çš„æ“ä½œé€‰é¡¹ã€‚ä¸€èˆ¬ç”¨çš„æ˜¯ä¸¤ä¸ªï¼š\nSEM_UNDO è¡¨ç¤ºå¼‚å¸¸æ—¶æ’¤å›å¯¹ä¿¡å·é‡çš„æ“ä½œ\nIPC_NOWAIT è¡¨ç¤ºå¦‚æœä¿¡å·é‡æ²¡æœ‰å°±ç»ªï¼Œä¸è¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œç›´æ¥é”™è¯¯é€€å‡º\n\n\n\næ¯”å¦‚å¦‚ä¸‹æ“ä½œï¼Œå°±æ˜¯ç»™ä¿¡å·é‡æ–°å¢å€¼çš„å¤„ç†ï¼ˆå¦‚æœsem_opä¸ºè´Ÿæ•°ï¼Œé‚£å°±æ˜¯å‡å»å€¼ï¼‰éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¿¡å·é‡çš„å€¼ä¸èƒ½ä¸ºè´Ÿæ•°ã€‚å¦‚æœä½ æƒ³å‡å»å€¼ï¼Œè¯·ä¿è¯ä¿¡å·é‡é‡Œé¢æœ‰è¶³å¤Ÿçš„å€¼ç»™ä½ å‡ï¼Œå¦åˆ™è¿›ç¨‹ä¼šåœ¨semopä¸­é˜»å¡ç­‰å¾…ã€‚\nstruct sembuf semaphore;semaphore.sem_num = 0;semaphore.sem_op = 1;  // æ–°å¢ä¿¡å·é‡1semaphore.sem_flg = SEM_UNDO; // SEM_UNDO æ ‡è®°ä½ä»£è¡¨å¼‚å¸¸çš„æ—¶å€™è¿˜åŸï¼ˆæ’¤é”€ï¼‰æ“ä½œ\n\nå¦‚ä¸‹æ“ä½œæ˜¯ç­‰å¾…ä¿¡å·é‡å˜æˆ0\nstruct sembuf semaphore;semaphore.sem_num = 0;    // æ“ä½œçš„ä¿¡å·é‡ç´¢å¼•semaphore.sem_op = 0;     // æ£€æŸ¥ä¿¡å·é‡çš„å€¼semaphore.sem_flg = 0;    // æ“ä½œæ ‡å¿—ä½ä¸º0semop(semid, &amp;semaphore, 1);  // ç­‰å¾…ä¿¡å·é‡å˜æˆ0// å¦‚æœæ²¡æœ‰å˜æˆ0ï¼Œå°±ä¼šé˜»å¡ç­‰å¾…// å¦‚æœsem_flgè®¾ç½®äº†IPC_NOWAITï¼Œé‚£å°±ä¸ä¼šé˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›EAGAIN\n\nåœ¨manæ‰‹å†Œé‡Œé¢æ˜¯è¿™ä¹ˆæè¿°çš„\nIf  sem_op is zero, the process must have read permission on the semaphore set.  This is a &quot;wait-for-zero&quot; operation: if semval is zero,the operation can immediately proceed.  Otherwise, if IPC_NOWAIT is specified in sem_flg, semop() fails with errno set  to  EAGAIN  (andnone  of  the  operations  in sops is performed).  Otherwise, semzcnt (the count of threads waiting until this semaphore&#x27;s value becomeszero) is incremented by one and the thread sleeps until one of the following occurs:Â·  semval becomes 0, at which time the value of semzcnt is decremented.Â·  The semaphore set is removed: semop() fails, with errno set to EIDRM.Â·  The calling thread catches a signal: the value of semzcnt is decremented and semop() fails, with errno set to EINTR.\n\nç¿»è¯‘ä¸€ä¸‹ï¼Œå¦‚æœ sem_opè®¾ç½®ä¸ºäº†0ï¼Œä¸”æ²¡æœ‰è®¾ç½® IPC_NOWAITï¼Œé‚£ä¹ˆè¿›ç¨‹å°±ä¼šåœ¨ semopå‡½æ•°ä¸­ç­‰å¾…ï¼Œç›´åˆ°å‡ºç°ä¸‹é¢çš„æƒ…å†µï¼š\n\nä¿¡å·é‡å˜æˆ0ï¼Œç­‰å¾…æˆåŠŸ\nä¿¡å·é‡è¢«é”€æ¯\næ‰§è¡Œæµæ¥æ”¶åˆ°ä¿¡å·é€€å‡ºï¼ˆä¿¡å·æ˜¯ä¸‹ä¸€ç« è¦å­¦ä¹ çš„å†…å®¹ï¼Œå’Œä¿¡å·é‡æ²¡å…³ç³»ï¼‰\n\nç¤ºä¾‹å¦‚ä¸‹æ˜¯å•ä¸ªè¿›ç¨‹æ“ä½œä¿¡å·é‡çš„ç¤ºä¾‹ä»£ç \n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/sem.h&gt;#include &lt;sys/unistd.h&gt;int main() &#123;    int semid;    key_t key;    struct sembuf semaphore;    // åˆ›å»ºæˆ–è·å–ä¿¡å·é‡é›†    key = ftok(&quot;.&quot;, &#x27;S&#x27;);    semid = semget(key, 1, IPC_CREAT | 0666);    if (semid == -1) &#123;        perror(&quot;Failed to create semaphore\\n&quot;);        exit(1);    &#125;    printf(&quot;1\\n&quot;);    // åˆå§‹åŒ–ä¿¡å·é‡çš„å€¼ä¸º1    if (semctl(semid, 0, SETVAL, 1) == -1) &#123;        perror(&quot;Failed to initialize semaphore value\\n&quot;);        exit(1);    &#125;    printf(&quot;12\\n&quot;);    // å¯¹ä¿¡å·é‡è¿›è¡Œæ“ä½œ    semaphore.sem_num = 0;    semaphore.sem_op = 34;  // æ–°å¢ä¿¡å·é‡å€¼    semaphore.sem_flg = SEM_UNDO;    if (semop(semid, &amp;semaphore, 1) == -1) &#123;        perror(&quot;Failed to perform semaphore operation\\n&quot;);        exit(1);    &#125;    printf(&quot;13\\n&quot;);    // è·å–ä¿¡å·é‡çš„å½“å‰å€¼    int cmd = GETVAL;  // è·å–ä¿¡å·é‡çš„å‘½ä»¤ï¼ŒGETVALè¡¨ç¤ºè·å–å½“å‰å€¼    int sem_value = semctl(semid, 0, cmd);    if(sem_value == -1)    &#123;        perror(&quot;Failed to perform semaphore operation\\n&quot;);        exit(1);    &#125;    else&#123;        printf(&quot;current val for sem: %d\\n&quot;,sem_value);    &#125;    printf(&quot;14\\n&quot;);    // é‡Šæ”¾ä¿¡å·é‡    semaphore.sem_op = -34;  // å‡å°‘ä¿¡å·é‡å€¼    if (semop(semid, &amp;semaphore, 1) == -1) &#123;        perror(&quot;Failed to release semaphore\\n&quot;);        exit(1);    &#125;    printf(&quot;15\\n&quot;);    // åˆ é™¤ä¿¡å·é‡é›†    if (semctl(semid, 0, IPC_RMID) == -1) &#123;        perror(&quot;Failed to remove semaphore\\n&quot;);        exit(1);    &#125;    printf(&quot;16\\n&quot;);    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œè¿™é‡Œçš„printfæ˜¯æˆ‘ç”¨æ¥æ ‡è¯†è¿›ç¨‹è·‘åˆ°é‚£ä¸ªé˜¶æ®µçš„ï¼Œæ²¡æœ‰å•¥å®é™…æ„ä¹‰ã€‚\n11213current val for sem: 35141516\n\n4.2 æ‰©å±•: mmap\nè¿™éƒ¨åˆ†ä»…ä¾›å‚è€ƒï¼Œå¯èƒ½æœ‰é”™è¯¯ğŸ˜¥éƒ¨åˆ†èµ„æ–™å‚è€ƒ\n\n å‰é¢è´´å‡ºè¿‡IPCèµ„æºçš„å†…æ ¸ç»“æ„ï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šç¬¬ä¸€ä¸ªæˆå‘˜éƒ½ç›¸åŒ\nstruct shmid_ds &#123;    struct ipc_perm shm_perm;    /* Ownership and permissions */    size_t          shm_segsz;   /* Size of segment (bytes) */    time_t          shm_atime;   /* Last attach time */    time_t          shm_dtime;   /* Last detach time */    time_t          shm_ctime;   /* Last change time */    pid_t           shm_cpid;    /* PID of creator */    pid_t           shm_lpid;    /* PID of last shmat(2)/shmdt(2) */    shmatt_t        shm_nattch;  /* No. of current attaches */    ...&#125;;struct semid_ds &#123;    struct ipc_perm sem_perm;  /* Ownership and permissions */    time_t          sem_otime; /* Last semop time */    time_t          sem_ctime; /* Last change time */    unsigned long   sem_nsems; /* No. of semaphores in set */&#125;;struct msqid_ds &#123;    struct ipc_perm msg_perm;     /* Ownership and permissions */    time_t          msg_stime;    /* Time of last msgsnd(2) */    time_t          msg_rtime;    /* Time of last msgrcv(2) */    time_t          msg_ctime;    /* Time of last change */    unsigned long   __msg_cbytes; /* Current number of bytes in                                                queue (nonstandard) */    msgqnum_t       msg_qnum;     /* Current number of messages                                                in queue */    msglen_t        msg_qbytes;   /* Maximum number of bytes                                                allowed in queue */    pid_t           msg_lspid;    /* PID of last msgsnd(2) */    pid_t           msg_lrpid;    /* PID of last msgrcv(2) */&#125;;\n\nå®ƒä»¬çš„ç¬¬ä¸€ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªstruct ipc_permï¼Œå…¶ä¸­åŒ…å«äº†ä¸€ä¸ªä¿¡å·é‡çš„åŸºæœ¬ä¿¡æ¯\nstruct ipc_perm &#123;    key_t          __key;    /* Key supplied to shmget(2) */    uid_t          uid;      /* Effective UID of owner */    gid_t          gid;      /* Effective GID of owner */    uid_t          cuid;     /* Effective UID of creator */    gid_t          cgid;     /* Effective GID of creator */    unsigned short mode;     /* Permissions + SHM_DEST and                                           SHM_LOCKED flags */    unsigned short __seq;    /* Sequence number */&#125;;\n\nè€Œå†…æ ¸ä¸­å¯¹IPCèµ„æºçš„ç®¡ç†ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„è¿›è¡Œçš„ã€‚æˆ‘ä»¬æ‰€è·å–çš„shmidï¼Œå’Œæ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ä¸ªæ•°ç»„çš„ä¸‹æ ‡\nå…¶ä¸­æˆ‘åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œä¾¿å‘ç°äº†ä¸€ç‚¹ï¼šæˆ‘ä»¬æ¯ä¸€æ¬¡è·å–çš„æ–°çš„å…±äº«å†…å­˜ï¼Œå®ƒçš„ç¼–å·éƒ½ä¼š+1ï¼Œè€Œä¸åƒæ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ï¼Œæä¾›ç¬¬ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ä¸‹æ ‡\nstruct ipc_ids &#123;    int in_use;//è¯´æ˜å·²åˆ†é…çš„èµ„æºä¸ªæ•°    int max_id;//åœ¨ä½¿ç”¨çš„æœ€å¤§çš„ä½ç½®ç´¢å¼•    unsigned short seq;//ä¸‹ä¸€ä¸ªåˆ†é…çš„ä½ç½®åºåˆ—å·    unsigned short seq_max;//æœ€å¤§ä½ç½®ä½¿ç”¨åºåˆ—    struct semaphore sem; //ä¿æŠ¤ ipc_idsçš„ä¿¡å·é‡    struct ipc_id_ary nullentry;//å¦‚æœIPCèµ„æºæ— æ³•åˆå§‹åŒ–ï¼Œåˆ™entrieså­—æ®µæŒ‡å‘ä¼ªæ•°æ®ç»“æ„    struct ipc_id_ary* entries;//æŒ‡å‘èµ„æºipc_id_aryæ•°æ®ç»“æ„çš„æŒ‡é’ˆ&#125;;\n\nåœ¨å†…æ ¸ä¸­ï¼Œstruct ipc_id_ary* entriesæ˜¯ä¸€ä¸ªæŒ‡å‘æ‰€æœ‰ipc_permçš„æŒ‡é’ˆæ•°ç»„ã€‚å…¶èƒ½å¤Ÿé€šè¿‡è¯¥æ•°ç»„æ‰¾åˆ°æˆ‘ä»¬å¯¹äºidï¼ˆä¸‹æ ‡ï¼‰çš„èµ„æºï¼Œå¯¹å…¶è¿›è¡Œè®¿é—®\nstruct ipc_id_ary&#123;        int size;        struct kern_ipc_perm *p[0];//æŒ‡é’ˆæ•°ç»„&#125;;\n\n\né‚£ä½ å¯èƒ½æƒ³é—®äº†ï¼Œè¿™é‡Œåªæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ å•Šï¼Ÿé‚£å¦‚æœæˆ‘æƒ³è®¿é—®shmid_dsç»“æ„çš„å…¶ä»–æˆå‘˜ï¼Œå²‚ä¸æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®äº†ï¼Ÿ\nè¦æ˜¯è¿™ä¹ˆæƒ³ï¼Œå°±è¿˜æ˜¯å¤ªå¹´è½»äº†ğŸ˜‚\n(strcut shmid_ds*)\n\næˆ‘ä»¬åªéœ€è¦å¯¹è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œå¼ºè½¬ï¼Œå°±èƒ½ç›´æ¥è®¿é—®å…¶ä»–æˆå‘˜ï¼\nè¿™æ˜¯å› ä¸ºï¼šCè¯­è¨€ä¸­ï¼Œç»“æ„ä½“ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œå’Œç»“æ„ä½“æ•´ä½“çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼\næŒ‡é’ˆçš„ç±»å‹ä¼šé™åˆ¶è¿™ä¸ªæŒ‡é’ˆè®¿é—®å…ƒç´ çš„èƒ½åŠ›ï¼Œåªè¦æˆ‘ä»¬è¿›è¡Œå¼ºè½¬ï¼Œå…¶å°±èƒ½ç›´æ¥è®¿é—®çˆ¶ç»“æ„ä½“çš„å…¶ä»–æˆå‘˜ï¼\n\nè¿™æ˜¯ä¸€ç§åˆ‡ç‰‡çš„æ€æƒ³\n\nç”¨è¿™ç§åŠæ³•ï¼Œå¯ä»¥ç”¨ç»Ÿä¸€çš„è§„åˆ™åœ¨å†…æ ¸ä¸­ç®¡ç†ä¸åŒçš„IPCèµ„æºï¼Œæ²¡æœ‰å¿…è¦å†ä¸ºæ¯ä¸€ä¸ªIPCèµ„æºå»ºç«‹ä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥ç®¡ç†ã€‚\n\nä¸å¾—ä¸è¯´ï¼Œlinuså¤§ä½¬æ˜¯çœŸçš„ç‰›é€¼ï¼\n\n4.3 å¤šè¿›ç¨‹å…±äº«é” mutexå…±äº«å†…å­˜å› ä¸ºç¼ºå°‘è®¿é—®æ§åˆ¶ï¼Œå¸¸å¸¸éœ€è¦å€ŸåŠ©å…¶ä»–å…·æœ‰è®¿é—®æ§åˆ¶çš„è¿›ç¨‹é€šä¿¡æ‰‹æ®µæ¥é—´æ¥å®ç°è®¿é—®æ§åˆ¶ã€‚\nä½†å®é™…ä¸Šæœ‰ä¸€ä¸ªæ›´åŠ ç¬¦åˆæˆ‘ä»¬ä½¿ç”¨ä¹ æƒ¯çš„å†™æ³•ï¼Œé‚£å°±æ˜¯ä½¿ç”¨ pthread_mutex é”çš„ PTHREAD_PROCESS_SHARED å¤šè¿›ç¨‹å…±äº«å±æ€§ï¼Œè®©è¿™æŠŠé”å¯ä»¥åœ¨å¤šä¸ªè¿›ç¨‹ä¸­è¢«ä½¿ç”¨ã€‚åœ¨æ¯ä¸ªè¿›ç¨‹ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åƒä½¿ç”¨è‡ªå·±çš„é”ä¸€æ ·ä½¿ç”¨å®ƒï¼Œä»¥æ­¤å®ç°äº†ä¸€æŠŠèƒ½åŒæ—¶ç®¡å¤šä¸ªè¿›ç¨‹çš„ä¸€æŠŠäº’æ–¥é”ï¼\n#include &lt;pthread.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/wait.h&gt;#include &lt;sys/mman.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;int main()&#123;    // å…±äº«å†…å­˜çš„åå­—å¿…é¡»ä»¥/å¼€å¤´    int shared_mem_fd = shm_open(&quot;/my_shared_memory&quot;, O_CREAT | O_RDWR, 0666);    // åˆ›å»ºäº†ä¸€ä¸ªmutexå¤§å°çš„å…±äº«å†…å­˜(è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†fdæ–‡ä»¶ç»™æˆªæ–­/æ‰©å±•ä¸ºç¬¬äºŒä¸ªå‚æ•°çš„å¤§å°)    ftruncate(shared_mem_fd, sizeof(pthread_mutex_t));    // ç”¨mmapæŒ‚è½½åˆ°æœ¬åœ°    // addrï¼šæŒ‡å®šæ˜ å°„çš„è™šæ‹Ÿåœ°å€ï¼Œé€šå¸¸è®¾ç½®ä¸ºNULLï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ã€‚    // lengthï¼šæŒ‡å®šæ˜ å°„çš„é•¿åº¦ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚    // protï¼šæŒ‡å®šæ˜ å°„åŒºåŸŸçš„ä¿æŠ¤æƒé™ï¼Œå¯é€‰å€¼ä¸ºPROT_READï¼ˆå¯è¯»æƒé™ï¼‰ã€PROT_WRITEï¼ˆå¯å†™æƒé™ï¼‰ã€PROT_EXECï¼ˆå¯æ‰§è¡Œæƒé™ï¼‰ä»¥åŠå®ƒä»¬çš„ç»„åˆã€‚    // flagsï¼šæŒ‡å®šæ˜ å°„çš„ç±»å‹å’Œå…¶ä»–æ ‡å¿—ä½ï¼Œå¸¸è§çš„æ ‡å¿—ä½æœ‰MAP_SHAREDï¼ˆå…±äº«æ˜ å°„ï¼‰ã€MAP_PRIVATEï¼ˆç§æœ‰æ˜ å°„ï¼‰ã€MAP_ANONYMOUSï¼ˆåŒ¿åæ˜ å°„ï¼‰ç­‰ã€‚    // fdï¼šå¦‚æœè¦æ˜ å°„æ–‡ä»¶ï¼Œåˆ™ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼›å¦‚æœæ˜ å°„çš„æ˜¯åŒ¿åå†…å­˜åŒºåŸŸï¼Œåˆ™ä¼ å…¥-1ã€‚    // offsetï¼šä»æ–‡ä»¶å¼€å§‹å¤„çš„åç§»é‡ï¼Œé€šå¸¸è®¾ç½®ä¸º0ã€‚    //    // è¿”å›å€¼ï¼šæˆåŠŸæ—¶ï¼Œè¿”å›æ˜ å°„åŒºåŸŸçš„èµ·å§‹åœ°å€æŒ‡é’ˆï¼›    //        å¤±è´¥æ—¶ï¼Œè¿”å›MAP_FAILEDï¼Œå¹¶è®¾ç½®errnoæ¥æŒ‡ç¤ºé”™è¯¯ç±»å‹ã€‚    void *shared_mem_ptr = mmap(NULL, sizeof(pthread_mutex_t), PROT_READ | PROT_WRITE, MAP_SHARED, shared_mem_fd, 0);    pthread_mutexattr_t attr;    pthread_mutexattr_init(&amp;attr);    pthread_mutexattr_setpshared(&amp;attr, PTHREAD_PROCESS_SHARED); // è®¾ç½®é”çš„å±æ€§ä¸ºå…±äº«é”    // å¦‚æœåˆ é™¤ä¸Šé¢è¿™ä¸€è¡Œï¼Œé‚£ä¹ˆå½“ä¸‹è¿™ä¸ªé”å°±æ˜¯çˆ¶è¿›ç¨‹çš„ç§æœ‰é”ï¼Œä¸å…·æœ‰å…¬æœ‰å±æ€§    // å³ä¾¿æˆ‘ä»¬ä½¿ç”¨å…±äº«å†…å­˜å°†é”æ˜ å°„åˆ°äº†çˆ¶å­è¿›ç¨‹çš„é¡µè¡¨ä¸­    // è§‚å¯Ÿåˆ°çš„ç°è±¡æ˜¯ï¼Œå³ä¾¿çˆ¶è¿›ç¨‹å·²ç»é‡Šæ”¾é”äº†ï¼Œä½†æ˜¯å­è¿›ç¨‹ä¾æ—§æ˜¯åœ¨é˜»å¡çŠ¶æ€ä¸­    // ä¸ªäººçŒœæµ‹ï¼šå› ä¸ºè¿™ä¸ªé”æ˜¯çˆ¶è¿›ç¨‹ç‹¬æœ‰çš„ï¼Œæ‰€ä»¥å­è¿›ç¨‹åœ¨è°ƒç”¨lockå‡½æ•°è®¿é—®mutexçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯å°†mutexè¿›è¡Œäº†ä¸€æ¬¡å†™æ—¶æ‹·è´ï¼›    //          æ‹·è´çš„æ—¶å€™ï¼Œè¿™ä¸ªé”æ˜¯è¢«å ç”¨çš„ï¼Œæ‹·è´è¿‡å»ä¹‹åä¹Ÿæ˜¯ä¸€ä¸ªè¢«å ç”¨ä¸­çš„é”ã€‚    //          ä½†å®é™…ä¸Šå‹æ ¹æ²¡æœ‰è¿›ç¨‹åœ¨å ç”¨è¿™ä¸ªè¢«å­è¿›ç¨‹æ‹·è´å‡ºå»çš„ç‹¬ç«‹çš„é”ï¼Œçˆ¶è¿›ç¨‹çš„è§£é”æ“ä½œä¹Ÿä¸ä¼šåœ¨è¿›ç¨‹é—´åŒæ­¥ï¼Œè¿™å°±æ˜¯ä¸€ç§æ­»é”ã€‚    pthread_mutex_t *mutex = (pthread_mutex_t *)shared_mem_ptr;    pthread_mutex_init(mutex, &amp;attr); // æŒ‡å®šä½¿ç”¨å…±äº«å†…å­˜çš„åœ°å€æ¥åˆå§‹åŒ–é”    pid_t pid = fork();    if (pid &lt; 0)    &#123;        fprintf(stderr, &quot;Fork failed.\\n&quot;);        return 1;    &#125;    else if (pid == 0)    &#123;        // Child process        sleep(1); // å­è¿›ç¨‹å…ˆä¼‘çœ 1ç§’ï¼Œç­‰å¾…å¤«è¿›ç¨‹è·å–é”        printf(&quot;Child trying to acquire the mutex... %p\\n&quot;, mutex);        pthread_mutex_lock(mutex); // å­è¿›ç¨‹è·å–é”ï¼Œè¿™æ—¶å€™çˆ¶è¿›ç¨‹åœ¨ä¼‘çœ ï¼Œæ— æ³•è·å–        printf(&quot;Child acquired the mutex.\\n&quot;);        // Do some work...        sleep(2);        pthread_mutex_unlock(mutex);        printf(&quot;Child released the mutex.\\n&quot;);    &#125;    else    &#123;        // Parent process        printf(&quot;Parent trying to acquire the mutex... %p\\n&quot;, mutex);        pthread_mutex_lock(mutex);        printf(&quot;Parent acquired the mutex.\\n&quot;);        // Do some work...        sleep(2);        pthread_mutex_unlock(mutex); // çˆ¶è¿›ç¨‹é‡Šæ”¾é”åï¼Œè§‚å¯Ÿåˆ°çš„æƒ…å†µæ˜¯å­è¿›ç¨‹æˆåŠŸè·å–é”        printf(&quot;Parent released the mutex.\\n&quot;);        wait(NULL); // ç­‰å¾…å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•        pthread_mutexattr_destroy(&amp;attr); // çˆ¶è¿›ç¨‹æ¥é”€æ¯ç›¸å…³èµ„æº        pthread_mutex_destroy(mutex);        munmap(shared_mem_ptr, sizeof(pthread_mutex_t));        shm_unlink(&quot;/my_shared_memory&quot;);    &#125;    return 0;&#125;\n\n\nç»“è¯­å…³äºå…±äº«å†…å­˜çš„æ“ä½œåˆ°è¿™é‡Œå°±OVERäº†ï¼\næœ€åè¿˜äº†è§£äº†ä¸€äº›å†…æ ¸è®¾è®¡ä¸Šçš„å°å¦™æ‹›ï¼Œä¸å¾—ä¸è¯´ï¼ŒçœŸçš„ç‰›æ‰¹~\nå¦‚æœæœ¬æ–‡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡º\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è¿›ç¨‹"]},{"title":"ã€Linuxã€‘çº¿ç¨‹æ¦‚å¿µ | äº’æ–¥","url":"/posts/1309150756/","content":"åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼Œç»ˆäºåˆ°å¤šçº¿ç¨‹æ–¹é¢çš„å­¦ä¹ äº†ï¼\n\n\n\næ‰€ç”¨ç³»ç»ŸCentos7.6  æœ¬æ–‡çš„æºç ğŸ‘‰ã€ä¼ é€é—¨ã€‘\n\n[TOC]\n1.çº¿ç¨‹çš„æ¦‚å¿µåœ¨ä¹‹å‰çš„linuxå­¦ä¹ ä¸­ï¼Œå·²ç»æ¥è§¦è¿‡äº†è¿›ç¨‹çš„æ¦‚å¿µï¼Œè¿›ç¨‹ç”±ä¸€ä¸ªtask_structç»“æ„ä½“åœ¨æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæè¿°ï¼ŒCPUåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šä¾ç…§è¿›ç¨‹æ—¶é—´ç‰‡è¿›è¡Œè½®è¯¢è°ƒåº¦ï¼Œè®©æ¯ä¸€ä¸ªè¿›ç¨‹çš„ä»£ç éƒ½å¾—ä»¥æ¨è¿›ï¼Œå®ç°å¤šä¸ªè¿›ç¨‹çš„åŒæ—¶è¿è¡Œ\nè€Œçº¿ç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ç§è½»é‡åŒ–çš„è¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½å¯ä»¥åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»£ç \nè¿›ç¨‹:çº¿ç¨‹ = 1:N\n\nåœ¨ä¹‹å‰çš„å¤šè¿›ç¨‹æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨forkæ¥å£åˆ›å»ºå­è¿›ç¨‹ï¼Œé€šè¿‡if/elseè¯­å¥åˆ¤æ–­ï¼Œå®ç°å¯¹ç‰¹å®šæ‰§è¡Œæµçš„åˆ’åˆ†\n\nåˆ›å»ºå­è¿›ç¨‹æ—¶ï¼Œéœ€è¦æ‹·è´ä¸€ä»½task_struct/mm_structå¹¶åˆ›å»ºé¡µè¡¨\nå½“å­è¿›ç¨‹ä¿®æ”¹äº†ä¸€éƒ¨åˆ†å˜é‡ï¼Œä¼šå‘ç”Ÿå†™æ—¶æ‹·è´ï¼Œä¿®æ”¹é¡µè¡¨åœ¨ç‰©ç†å†…å­˜ä¸Šçš„æ˜ å°„\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦åšä¸å°‘çš„å·¥ä½œ\n\n1.1 æ‰§è¡Œæµè®©æˆ‘ä»¬åº·åº·æ‰§è¡Œæµè¿™ä¸€æ¦‚å¿µï¼š\n\nå•æ‰§è¡Œæµè¿›ç¨‹ï¼šå†…éƒ¨åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµçš„è¿›ç¨‹\nå¤šæ‰§è¡Œæµè¿›ç¨‹ï¼šå†…éƒ¨æœ‰å¤šä¸ªæ‰§è¡Œæµçš„è¿›ç¨‹\n\nè¿›ç¨‹=å†…æ ¸æ•°æ®ç»“æ„+ä»£ç å’Œæ•°æ®ï¼Œåœ¨å†…æ ¸è§†è§’ä¸­ï¼Œè¿›ç¨‹æ˜¯æ‰¿æ‹…åˆ†é…ç³»ç»Ÿèµ„æºçš„åŸºæœ¬å®ä½“ï¼ˆè¿›ç¨‹çš„åŸºåº§å±æ€§ï¼‰\n\nè¿›ç¨‹ï¼šå‘ç³»ç»Ÿç”³è¯·èµ„æºçš„åŸºæœ¬å•ä½ï¼ˆç³»ç»Ÿåˆ†é…ï¼‰\nçº¿ç¨‹ï¼šç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•ä½\n\n\n1.2 çº¿ç¨‹åˆ›å»ºæ—¶åšäº†ä»€ä¹ˆï¼Ÿé‚£çº¿ç¨‹çš„åˆ›å»ºéœ€è¦åšä»€ä¹ˆå‘¢ï¼Ÿ\n\nä¸åŒæ“ä½œç³»ç»Ÿçš„å®ç°ä¸åŒï¼Œä¸€èˆ¬ç”¨tcbæŒ‡ä»£æè¿°çº¿ç¨‹çš„ç»“æ„ä½“\n\nåœ¨linuxä¸­ï¼Œæ²¡æœ‰è¿›ç¨‹å’Œçº¿ç¨‹åœ¨æ¦‚å¿µä¸Šçš„åŒºåˆ†ï¼Œå…¶ä»¥æ‰§è¡Œæµä¸ºåŸºç¡€ï¼Œçº¿ç¨‹åªæ˜¯ç®€å•çš„å¯¹task_strcutè¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼›çº¿ç¨‹æ˜¯åœ¨è¿›ç¨‹å†…éƒ¨è¿è¡Œçš„æ‰§è¡Œæµ\n\nè¯´äººè¯ï¼šlinuxä¸‹çš„çº¿ç¨‹æ˜¯ç”¨è¿›ç¨‹æ¨¡æ‹Ÿçš„\næ¢å¥è¯ï¼šlinuxä¸‹çš„è¿›ç¨‹ä¹Ÿæ˜¯ä¸€ç§çº¿ç¨‹ï¼Œä½†æ˜¯å…¶åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµ\nå¯¹äºCPUè€Œè¨€ï¼Œå…¶çœ‹åˆ°çš„task_structéƒ½æ˜¯ä¸€ä¸ªæ‰§è¡Œæµ\n\nè€Œåˆ›å»ºçº¿ç¨‹æ—¶ä¹Ÿæœ‰è¯´æ³•ï¼Œçº¿ç¨‹éš¶å±äºæŸä¸€ä¸ªè¿›ç¨‹ä¸‹ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹çš„å­è¿›ç¨‹ï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ›å»ºæ–°çš„mm_structå’Œé¡µè¡¨æ˜ å°„ï¼Œåˆ›å»ºçš„æ•ˆç‡é«˜äºå­è¿›ç¨‹ã€‚åªéœ€è¦å°†task_structæŒ‡å‘åŸæœ‰è¿›ç¨‹çš„mm_structå’Œé¡µè¡¨å³å¯ã€‚\n\nåŒæ ·çš„ï¼ŒCPUåœ¨æ¨è¡Œå¤šçº¿ç¨‹æ“ä½œçš„æ—¶å€™ï¼Œæ— é¡»æ‰§è¡Œpcbåˆ‡æ¢ï¼Œå°±èƒ½å®ç°å•è¿›ç¨‹å¤šä¸ªçº¿ç¨‹æ“ä½œçš„åŒæ—¶è¿›è¡Œï¼Œæ‰§è¡Œæ•ˆç‡å˜é«˜ï¼\n\nçº¿ç¨‹æ˜¯ä¸€ç§ Light weight process è½»é‡çº§è¿›ç¨‹ï¼Œç®€ç§°LWPï¼›æ˜¯ç°ä»£linuxå¯¹çº¿ç¨‹æä¾›çš„åŸç”Ÿæ”¯æŒ\n\n1.3 å†…æ ¸æºç ä¸­çš„ä½“ç°åœ¨task_strcutç»“æ„ä½“ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªå­—æ®µ\n/* CPU-specific state of this task */\tstruct thread_struct thread;\n\nè½¬åˆ°å®šä¹‰ï¼Œå…¶å†…éƒ¨éƒ½æ˜¯ä¸€äº›å¯„å­˜å™¨ä¿¡æ¯ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªçº¿ç¨‹çš„åŸºæœ¬ä¿¡æ¯ã€‚è¿™ä¹Ÿæ˜¯linuxä¸­æ²¡æœ‰å•ç‹¬å®ç°çº¿ç¨‹tcbçš„ä½“ç°ï¼Œè€Œæ˜¯ç”¨task_structæ¥æ¨¡æ‹Ÿçš„ï¼ˆtask_structä¸­åŒ…å«çº¿ç¨‹çš„ä¿¡æ¯ï¼‰\nstruct thread_struct &#123;\t/* Cached TLS descriptors: */\tstruct desc_struct\ttls_array[GDT_ENTRY_TLS_ENTRIES];\tunsigned long\t\tsp0;\tunsigned long\t\tsp;#ifdef CONFIG_X86_32\tunsigned long\t\tsysenter_cs;#else\tunsigned long\t\tusersp;\t/* Copy from PDA */\tunsigned short\t\tes;\tunsigned short\t\tds;\tunsigned short\t\tfsindex;\tunsigned short\t\tgsindex;#endif#ifdef CONFIG_X86_32\tunsigned long\t\tip;#endif#ifdef CONFIG_X86_64\tunsigned long\t\tfs;#endif\tunsigned long\t\tgs;\t/* Hardware debugging registers: */\tunsigned long\t\tdebugreg0;\tunsigned long\t\tdebugreg1;\tunsigned long\t\tdebugreg2;\tunsigned long\t\tdebugreg3;\tunsigned long\t\tdebugreg6;\tunsigned long\t\tdebugreg7;\t/* Fault info: */\tunsigned long\t\tcr2;\tunsigned long\t\ttrap_no;\tunsigned long\t\terror_code;\t/* floating point and extended processor state */\tunion thread_xstate\t*xstate;#ifdef CONFIG_X86_32\t/* Virtual 86 mode info */\tstruct vm86_struct __user *vm86_info;\tunsigned long\t\tscreen_bitmap;\tunsigned long\t\tv86flags;\tunsigned long\t\tv86mask;\tunsigned long\t\tsaved_sp0;\tunsigned int\t\tsaved_fs;\tunsigned int\t\tsaved_gs;#endif\t/* IO permissions: */\tunsigned long\t\t*io_bitmap_ptr;\tunsigned long\t\tiopl;\t/* Max allowed port in the bitmap, in bytes: */\tunsigned\t\tio_bitmap_max;/* MSR_IA32_DEBUGCTLMSR value to switch in if TIF_DEBUGCTLMSR is set.  */\tunsigned long\tdebugctlmsr;\t/* Debug Store context; see asm/ds.h */\tstruct ds_context\t*ds_ctx;&#125;;\n\nå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ—¶ï¼ŒLinuxå†…æ ¸ä¼šä¸ºè¯¥çº¿ç¨‹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„çº¿ç¨‹æ ‡è¯†ç¬¦ï¼ˆTIDï¼‰ï¼Œå¹¶åœ¨å†…éƒ¨ç»´æŠ¤çº¿ç¨‹ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚ç„¶è€Œï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨å†…æ ¸ä¸­ä»ç„¶è¢«è§†ä¸ºç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¹¶ä¸”å…±äº«åŒä¸€ä¸ªè¿›ç¨‹åœ°å€ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦è¡¨ä»¥åŠå…¶ä»–è¿›ç¨‹èµ„æºã€‚\né€šè¿‡ä½¿ç”¨è¿›ç¨‹æ¨¡æ‹Ÿçº¿ç¨‹çš„æ–¹å¼ï¼ŒLinuxå®ç°äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š\n\nè½»é‡çº§ï¼šç›¸æ¯”äºä¼ ç»Ÿæ„ä¹‰ä¸Šçš„è¿›ç¨‹ï¼Œçº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯æ›´åŠ é«˜æ•ˆï¼Œå ç”¨çš„ç³»ç»Ÿèµ„æºæ›´å°‘ã€‚\n\nå¹¶å‘æ€§ï¼šçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œé€šè¿‡å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œçº¿ç¨‹å¯ä»¥ç›´æ¥è®¿é—®è¿›ç¨‹çš„å†…å­˜åŒºåŸŸï¼Œç®€åŒ–äº†çº¿ç¨‹é—´çš„é€šä¿¡å’ŒåŒæ­¥æ“ä½œã€‚\n\nå…¼å®¹æ€§ï¼šç”±äºæ—©æœŸç‰ˆæœ¬çš„Linuxå†…æ ¸å¹¶ä¸ç›´æ¥æ”¯æŒçº¿ç¨‹ï¼Œä½¿ç”¨è¿›ç¨‹æ¨¡æ‹Ÿçº¿ç¨‹çš„æ–¹å¼ä½¿å¾—è€æ—§çš„ä»£ç å¯ä»¥æ— ç¼è¿ç§»åˆ°æ–°çš„å†…æ ¸ç‰ˆæœ¬ä¸­è¿è¡Œã€‚\n\n\nç°ä»£çš„Linuxå†…æ ¸å·²ç»æä¾›äº†å¯¹çº¿ç¨‹çš„åŸç”Ÿæ”¯æŒï¼Œç§°ä¸ºè½»é‡çº§è¿›ç¨‹ï¼ˆLightweight Processï¼ŒLWPï¼‰ã€‚é€šè¿‡ä½¿ç”¨LWPï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥åœ¨å†…æ ¸ä¸­ç‹¬ç«‹åœ°è¿›è¡Œè°ƒåº¦å’Œç®¡ç†ï¼Œè€Œæ— éœ€ä¾èµ–è¿›ç¨‹èµ„æºã€‚è¿™ç§æ–¹å¼æ›´åŠ é«˜æ•ˆï¼Œå¹¶ä¸”æ›´ç¬¦åˆçº¿ç¨‹æ¦‚å¿µçš„å®šä¹‰ã€‚ç„¶è€Œï¼Œä¸ºäº†ä¿æŒå‘åå…¼å®¹æ€§ï¼ŒLinuxä»ç„¶ä¿ç•™äº†ä½¿ç”¨è¿›ç¨‹æ¨¡æ‹Ÿçº¿ç¨‹çš„æœºåˆ¶ã€‚\n1.4 çº¿ç¨‹çš„ç§æœ‰ç‰©æˆ‘ä»¬çŸ¥é“ï¼Œä¸€ä¸ªè¿›ç¨‹æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ä½†æ˜¯çº¿ç¨‹å¹¶ä¸æ˜¯ï¼Œå› ä¸ºçº¿ç¨‹åªæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œæµåˆ†æ”¯ï¼Œå®ƒä»è¿›ç¨‹ç»§æ‰¿äº†ç»å¤§éƒ¨åˆ†å±æ€§ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯å…±äº«çš„ï¼‰\n\nç”¨æˆ·idå’Œç»„id\nè¿›ç¨‹id\nè¿›ç¨‹å·¥ä½œç›®å½•\næ–‡ä»¶æè¿°ç¬¦è¡¨\nä¿¡å·çš„å¤„ç†æ–¹å¼ï¼ˆå¦‚æœè¿›ç¨‹æœ‰å¯¹æŸä¸ªä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¼šå…±ç”¨è¿™ä¸ªè‡ªå®šä¹‰æ•æ‰ï¼‰\nå’Œè¿›ç¨‹å…±ç”¨ä¸€ä¸ªå †\n\nä½†çº¿ç¨‹ä¹Ÿä¼šæœ‰è‡ªå·±çš„ç§æœ‰ç‰©ï¼\n\nçº¿ç¨‹id\nçº¿ç¨‹ç‹¬ç«‹çš„å¯„å­˜å™¨ï¼ˆå› ä¸ºçº¿ç¨‹ä¹Ÿéœ€è¦æ‰§è¡Œä»£ç ï¼Œæœ‰ä¸Šä¸‹æ–‡æ•°æ®ï¼‰\næ ˆï¼ˆçº¿ç¨‹è¿è¡Œå‡½æ•°æ—¶ä¹Ÿéœ€è¦å‹æ ˆå’Œå‡ºæ ˆï¼Œå¿…é¡»ç‹¬ç«‹å¦åˆ™æ‰§è¡Œæµä¼šå‡ºé—®é¢˜ï¼‰\nerrnoï¼ˆå•ç‹¬çš„æŠ¥é”™ä¿¡æ¯ï¼‰\nä¿¡å·å±è”½å­—ï¼ˆå¯ä»¥å•ç‹¬é’ˆå¯¹æŸä¸ªä¿¡å·å¤„ç†ï¼‰\nçº¿ç¨‹è°ƒåº¦ä¼˜å…ˆçº§\n\n1.5.3 çº¿ç¨‹ç»“æ„ä½“åœ¨Linuxå†…æ ¸ä¸­çš„struct thread_structç»“æ„ä½“ä¸­åŒ…å«äº†å¦‚ä¸‹å­—æ®µï¼Œè¿™äº›å­—æ®µæœ‰åŠ©äºæ¨¡æ‹Ÿçº¿ç¨‹ã€‚å› ä¸ºæˆ‘ä»¬å¯¹linuxå†…æ ¸ä»£ç çš„äº†è§£å¹¶ä¸å¤šï¼Œè¿™é‡ŒåªåšåŸºæœ¬è®¤è¯†ï¼Œå¯ä»¥å’Œä¸Šæ–¹çš„struct thread_structç»“æ„ä½“æºç å¯¹ç…§ç€çœ‹\n\ntls_array: è¿™ä¸ªå­—æ®µè¡¨ç¤ºçº¿ç¨‹çš„TLSï¼ˆThread Local Storageï¼‰æè¿°ç¬¦æ•°ç»„ã€‚TLSæ˜¯ä¸€ç§æœºåˆ¶ï¼Œå…è®¸çº¿ç¨‹åœ¨å…¶å•ç‹¬çš„å­˜å‚¨åŒºåŸŸä¸­å­˜å‚¨å’Œè®¿é—®å˜é‡ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½å¯ä»¥æœ‰è‡ªå·±çš„TLSæ•°ç»„ã€‚\n\nsp0å’Œsp: è¿™äº›å­—æ®µè¡¨ç¤ºçº¿ç¨‹çš„æ ˆæŒ‡é’ˆï¼Œç”¨äºç®¡ç†çº¿ç¨‹çš„å‡½æ•°è°ƒç”¨æ ˆã€‚\n\nsysenter_cs, usersp, es, ds, fsindex, gsindex: è¿™äº›å­—æ®µç”¨äºä¿å­˜ä¸çº¿ç¨‹ç›¸å…³çš„æ®µå¯„å­˜å™¨ä¿¡æ¯ï¼Œä¾‹å¦‚ä»£ç æ®µé€‰æ‹©å­ã€ç”¨æˆ·æ ˆæŒ‡é’ˆä»¥åŠå„ç§æ®µå¯„å­˜å™¨çš„ç´¢å¼•ã€‚\n\nip, fs, gs: è¿™äº›å­—æ®µè®°å½•çº¿ç¨‹çš„æŒ‡ä»¤æŒ‡é’ˆå’Œæ®µå¯„å­˜å™¨çš„å€¼ã€‚\n\ndebugreg0, debugreg1, debugreg2, debugreg3, debugreg6, debugreg7: è¿™äº›å­—æ®µç”¨äºä¿å­˜ç¡¬ä»¶è°ƒè¯•å¯„å­˜å™¨çš„å€¼ï¼Œç”¨äºè°ƒè¯•ç›®çš„ã€‚\n\ncr2, trap_no, error_code: è¿™äº›å­—æ®µè®°å½•äº†å‘ç”Ÿå¼‚å¸¸æˆ–ä¸­æ–­æ—¶çš„ç›¸å…³ä¿¡æ¯ã€‚\n\nxstate: è¿™ä¸ªå­—æ®µç”¨äºä¿å­˜æµ®ç‚¹æ•°å’Œæ‰©å±•å¤„ç†å™¨çŠ¶æ€ã€‚\n\n\n1.5 çº¿ç¨‹ä¼˜ç¼ºç‚¹1.5.1 ç¼ºç‚¹\nçº¿ç¨‹æ˜¯ç¼ºä¹ä¿æŠ¤çš„ï¼ˆä¸å…·å¤‡è¿›ç¨‹çš„ç‹¬ç«‹æ€§ï¼‰è¿™ä¹Ÿè¢«ç§°ä¸ºå¥å£®æ€§ï¼›çº¿ç¨‹çš„å¥å£®æ€§ä½\n\nå½“è¿›ç¨‹è¢«åœæ­¢çš„æ—¶å€™ï¼Œå…¶ä¸‹çº¿ç¨‹ä¹Ÿä¼šè¢«åœæ­¢\nå½“æœ‰ä¸€ä¸ªçº¿ç¨‹å‡ºbugäº†ï¼Œä¼šè®©æ•´ä¸ªè¿›ç¨‹é€€å‡º\nå¤šçº¿ç¨‹ä¸­çš„å…¨å±€å˜é‡é—®é¢˜\n\n\nçº¿ç¨‹ç¼ºä¹è®¿é—®æ§åˆ¶ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨æŸäº›æ“ä½œç³»ç»Ÿçš„æ¥å£ä¼šå½±å“æ•´ä¸ªè¿›ç¨‹\n\ndebugå¤šçº¿ç¨‹è¾ƒéº»çƒ¦\n\nå¦‚æœåŒä¸€ä¸ªè¿›ç¨‹æ‰€ç”¨çº¿ç¨‹å¤ªå¤šï¼Œå¯èƒ½ä¼šæ— æ³•å……åˆ†åˆ©ç”¨cpuæ€§èƒ½è€Œé€ æˆæ€§èƒ½æŸå¤±\n\n\n1.5.2 ä¼˜ç‚¹\nçº¿ç¨‹å¼€è¾Ÿçš„æ¶ˆè€—ä½äºè¿›ç¨‹ï¼Œå ç”¨çš„èµ„æºä½äºè¿›ç¨‹\nåˆ‡æ¢çº¿ç¨‹æ— é¡»åˆ‡æ¢é¡µè¡¨ç­‰ç»“æ„ï¼Œé€Ÿåº¦å¿«ï¼\nç­‰å¾…æ…¢IOè®¾å¤‡æ—¶ï¼Œè¿›ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œï¼›å°†éƒ¨åˆ†IOæ“ä½œé‡å ï¼Œèƒ½è®©è¿›ç¨‹åŒæ—¶ç­‰å¾…å¤šä¸ªIOæ“ä½œï¼›\nèƒ½å……åˆ†åˆ©ç”¨å¤„ç†å™¨çš„å¯å¹¶è¡Œæ•°é‡ï¼›\n\n1.6 linuxä¸‹çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹æ˜¯ä¸¤ä¸ªå¹¶å‘æ‰§è¡Œçš„åŸºæœ¬å•ä½ã€‚å®ƒä»¬ä¹‹é—´æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š\n\nèµ„æºå ç”¨ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ã€å †æ ˆç­‰èµ„æºï¼Œè€Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºï¼ŒåŒ…æ‹¬åœ°å€ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ç­‰ã€‚å› æ­¤ï¼Œåˆ›å»ºçº¿ç¨‹æ¯”åˆ›å»ºè¿›ç¨‹æ›´åŠ è½»é‡çº§ã€‚åœ¨çº¿ç¨‹ç›´æ¥åˆ‡æ¢ä¹Ÿæ¯”è¿›ç¨‹åˆ‡æ¢æ•ˆç‡æ›´é«˜ã€‚\nè°ƒåº¦ï¼šè¿›ç¨‹æ˜¯ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦å’Œåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„æ‰§è¡Œå•å…ƒï¼Œç”±æ“ä½œç³»ç»Ÿè¿›è¡Œè°ƒåº¦å’Œåˆ†é…CPUæ—¶é—´ç‰‡ã€‚\né€šä¿¡å’ŒåŒæ­¥ï¼šè¿›ç¨‹é—´é€šä¿¡éœ€è¦ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æœºåˆ¶ï¼Œå¦‚ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ç­‰ã€‚è€Œçº¿ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼ç›´æ¥è¿›è¡Œé€šä¿¡ã€‚æ­¤å¤–ï¼Œçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥æ›´åŠ æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨äº’æ–¥é”ã€æ¡ä»¶å˜é‡ç­‰æœºåˆ¶ã€‚\nç‹¬ç«‹æ€§ï¼šè¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å´©æºƒä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ã€‚è€Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„èµ„æºï¼Œä¸€ä¸ªçº¿ç¨‹çš„å´©æºƒä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒã€‚\n\næ€»ç»“æ¥è¯´ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯æ‰§è¡Œçš„åŸºæœ¬å•ä½ã€‚è¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«éƒ¨åˆ†èµ„æºã€‚\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ ¹æ®æƒ…å†µçš„ä¸åŒï¼Œé€‰æ‹©ä½¿ç”¨è¿›ç¨‹æˆ–çº¿ç¨‹æ¥å®ç°å¹¶å‘æ‰§è¡Œã€‚\n\n2.åŸºç¡€å‡½æ•°linuxä¸‹æä¾›äº†pthreadåº“æ¥å®ç°çº¿ç¨‹æ“ä½œ\n2.1 pthread_createäººå¦‚å…¶åï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¥åˆ›å»ºæ–°è¿›ç¨‹çš„\n#include &lt;pthread.h&gt;int pthread_create(pthread_t *thread, const pthread_attr_t *attr,\t\t\t\t\tvoid *(*start_routine) (void *), void *arg);//Compile and link with -pthread.\n\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œä¸ºè¯¥çº¿ç¨‹çš„id\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºæŒ‡å®šçº¿ç¨‹çš„å±æ€§ï¼Œæš‚æ—¶è®¾ç½®ä¸ºNULLä½¿ç”¨é»˜è®¤å±æ€§\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è®©è¯¥è¿›ç¨‹æ‰§è¡Œçš„å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œå‚æ•°å’Œè¿”å›å€¼éƒ½ä¸ºvoid*\nç¬¬å››ä¸ªå‚æ•°æ˜¯ä¼ ç»™ç¬¬ä¸‰ä¸ªæ‰§è¡Œå‡½æ•°çš„å‚æ•°\n\nåˆ›å»ºæ­£å¸¸åè¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ç \næ³¨æ„ï¼Œä½¿ç”¨äº†pthreadåº“åï¼Œéœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™æŒ‡å®šé“¾æ¥ï¼Œ-lpthread\ntypedef unsigned long int pthread_t;//çº¿ç¨‹id\n\nåˆ›å»ºçº¿ç¨‹åæ‰“å°å¯ä»¥å‘ç°ï¼Œçº¿ç¨‹idæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„å€¼ï¼Œå¹¶ä¸åƒè¿›ç¨‹PIDé‚£ä¹ˆå°\n//cout &lt;&lt; &quot;pthread_create &quot;&lt;&lt; t1 &lt;&lt; &quot; &quot; &lt;&lt; t2 &lt;&lt; endl;pthread_create 140689524995840 140689516603136\n\nå¯ä»¥é€šè¿‡printf %xçš„æ–¹å¼æ‰“å°åå…­è¿›åˆ¶ï¼Œæ¥å‡å°‘æ‰“å°é•¿åº¦\n//printf(&quot;0x%x  0x%x\\n&quot;,t1,t2);0x393d0700  0x38bcf700\n\n2.2 pthread_joinå…‰æ˜¯åˆ›å»ºè¿›ç¨‹è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿›ç¨‹è¿›è¡Œç­‰å¾…\n#include &lt;pthread.h&gt;int pthread_join(pthread_t thread, void **retval);//Compile and link with -pthread.\n\nè¿™é‡Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çº¿ç¨‹çš„idï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€\nç­‰å¾…æˆåŠŸåè¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ç \n\njoinå¯ä»¥åœ¨çº¿ç¨‹é€€å‡ºåï¼Œé‡Šæ”¾çº¿ç¨‹çš„èµ„æº\nåŒæ—¶è·å–çº¿ç¨‹å¯¹åº”çš„é€€å‡ºç \njoinè¿˜èƒ½ä¿è¯æ˜¯æ–°åˆ›å»ºçš„çº¿ç¨‹é€€å‡ºåï¼Œä¸»çº¿ç¨‹æ‰é€€å‡º\n\n2.2.1 åŸºç¡€çš„å¤šçº¿ç¨‹æ“ä½œæœ‰äº†è¿™ä¸¤ä¸ªï¼Œæˆ‘ä»¬å°±èƒ½å†™ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹æ“ä½œäº†\n#include&lt;iostream&gt;#include&lt;pthread.h&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;using namespace std;void* func1(void* arg)&#123;    while(1)    &#123;        cout &lt;&lt; &quot;func1 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;void* func2(void* arg)&#123;    while(1)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;int main()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main::&quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);    return 0;&#125;\n\næ‰§è¡Œä¼šå‘ç°ï¼Œå¤šçº¿ç¨‹æ“ä½œæˆåŠŸå¯åŠ¨ï¼Œä¸”æ‰“å°çš„è¿›ç¨‹pidéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»£è¡¨å…¶éš¶å±äºåŒä¸€ä¸ªè¿›ç¨‹\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æ¥æŸ¥çœ‹è½»é‡çº§è¿›ç¨‹\nps -aL\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œäº†ç¨‹åºä¹‹åï¼Œå‡ºç°äº†3ä¸ªPIDç›¸åŒï¼ŒLWPä¸åŒçš„è½»é‡çº§è¿›ç¨‹ï¼Œè¿™å°±ä»£è¡¨æˆ‘ä»¬çš„å¤šçº¿ç¨‹æ“ä½œæˆåŠŸäº†ï¼›\nåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°ï¼Œåœ¨å¤šçº¿ç¨‹æ“ä½œæ—¶ï¼Œè°å…ˆè¿è¡Œæ˜¯ä¸ç¡®å®šçš„ã€‚è¿™æ˜¯ç”±ç³»ç»Ÿè°ƒåº¦éšæœºå†³å®šçš„\n\n2.2.2 C++çš„å¤šçº¿ç¨‹æ“ä½œC++11ä¹Ÿæ”¯æŒäº†å¤šçº¿ç¨‹æ“ä½œï¼Œå…¶å°è£…äº†æ“ä½œç³»ç»Ÿçš„pthreadæ¥å£ï¼ŒåŸºæœ¬çš„æ“ä½œå¾ˆç›¸ä¼¼\nvoid test2()&#123;    thread t1(func1,(char*)&quot;test1&quot;);    thread t2(func2,(char*)&quot;test2&quot;);       while(1)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    t1.join();    t2.join();&#125;\n\næ‰§è¡Œåçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒC++çš„threadåº“è¿˜å¯ä»¥ä¼ å…¥functionalå°è£…çš„å¯è°ƒç”¨å‡½æ•°ï¼Œå’Œlambdaè¡¨è¾¾å¼\n\n2.3 çº¿ç¨‹é€€å‡º2.3.1 retvalint pthread_join(pthread_t thread, void **retval);\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ¥è·å–çº¿ç¨‹æ‰€æ‰§è¡Œæ–¹æ³•çš„è¿”å›å€¼ã€‚retvalæ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°\n#include&lt;iostream&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;using namespace std;void* func1(void* arg)&#123;    int a = 5;    while(a--)    &#123;        cout &lt;&lt; &quot;func1 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func1 exit&quot; &lt;&lt; endl;    return (void*)100;&#125;void* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    return (void*)10;&#125;void test3()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    int a = 15;    while(a--)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);    &#125;    void* r1;    void* r2;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;int main()&#123;        test3();    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹é€€å‡ºä¹‹åï¼Œä¸»å‡½æ•°ä¸­æˆåŠŸæ‰“å°å‡ºäº†ä»–ä»¬çš„è¿”å›å€¼\n\næ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯å°†void*çš„æŒ‡é’ˆå¼ºè½¬ä¸ºintï¼Œå¦‚æœåœ¨æ‰“å°çš„æ—¶å€™å¼ºè½¬ä¸ºintï¼Œä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±çš„æŠ¥é”™ï¼Œéœ€è¦ä½¿ç”¨long longæ¥è§„é¿æŠ¥é”™\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ makeg++ test.cpp -o test -lpthread -std=c++11.test.cpp: In function â€˜void test3()â€™:test.cpp:88:35: error: cast from â€˜void*â€™ to â€˜intâ€™ loses precision [-fpermissive]     cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (int)r1 &lt;&lt; endl;                                   ^make: *** [test] Error 1\n\n2.3.2 pthread_exité™¤äº†ç›´æ¥returnï¼Œçº¿ç¨‹è¿˜å¯ä»¥è°ƒç”¨pthread_exitå‡½æ•°å®ç°é€€å‡º\n#include &lt;pthread.h&gt;void pthread_exit(void *retval);//Compile and link with -pthread.\n\næ•ˆæœå®Œå…¨ä¸€æ ·\n//return (void*)10;pthread_exit((void*)10);\n\næ³¨æ„ï¼Œä¸»çº¿ç¨‹mainä¸­è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¸ä¼šå¯¼è‡´è¿›ç¨‹é€€å‡º\nvoid* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; &quot; tid: &quot; &lt;&lt; syscall(SYS_gettid) &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    pthread_exit((void*)10);&#125;void test5()&#123;    pthread_t t1,t2;\t//func2ä¼šæ‰§è¡Œ10s    pthread_create(&amp;t1,nullptr,func2,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    sleep(1);    pthread_detach(t1);    pthread_detach(t2);    sleep(1);&#125;int main()&#123;        test5();    pthread_exit(0);//ä¸»çº¿ç¨‹æå‰é€€å‡º    cout &lt;&lt; &quot;main exit&quot; &lt;&lt; endl;    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸»å‡½æ•°å·²ç»è°ƒç”¨äº†pthread_exité€€å‡ºäº†ï¼Œä½†æ˜¯çº¿ç¨‹è¿˜åœ¨è·‘\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476func2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476main exitfunc2 thread:: 1 :: 9474 tid: 9475func2 thread:: 2 :: 9474 tid: 9476\n\n2.3.3 ptrhead_cancelé™¤äº†ä¸Šé¢ä¿©ç§æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨mainé‡Œé¢ç›´æ¥æŠŠæŸä¸€ä¸ªçº¿ç¨‹ç»™å…³æ‰\n#include &lt;pthread.h&gt;int pthread_cancel(pthread_t thread);//Compile and link with -pthread.\n\nvoid test3()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);    int a = 15;    while(a--)    &#123;        cout &lt;&lt; &quot;this is main:: &quot; &lt;&lt; getpid()&lt;&lt;endl;        sleep(1);        if(a==11)        &#123;            pthread_cancel(t1);            pthread_cancel(t2);            break;        &#125;    &#125;    void* r1;    void* r2;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;\n\nè¢«æå‰ç»ˆæ­¢çš„è¿›ç¨‹ï¼Œè¿”å›å€¼éƒ½ä¸º-1\n\n2.3.4 ä¸ºä»€ä¹ˆè¿›ç¨‹é€€å‡ºä¸ä¼šå‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Ÿè¦ç†æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œè¿˜æ˜¯éœ€è¦æ·±çŸ¥ä¸€ä¸ªæ¦‚å¿µï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªæ‰§è¡Œæµï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚\nå…ˆæ¥å›é¡¾ä¸€ä¸‹è¿›ç¨‹é€€å‡ºçš„å‡ ç§æƒ…å†µï¼š\n\nä»£ç è·‘å®Œï¼Œç»“æœæ­£ç¡®\nä»£ç è·‘å®Œï¼Œç»“æœæœ‰é—®é¢˜\nä»£ç å‡ºé”™äº†ï¼Œå¼‚å¸¸\n\nçº¿ç¨‹é€€å‡ºçš„æƒ…å†µä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†çº¿ç¨‹å¦‚æœå› ä¸ºæŸäº›å¼‚å¸¸é€€å‡ºï¼Œè¿›ç¨‹ä¹Ÿä¼šåŒæ­¥é€€å‡ºï¼\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testthis is main:: 13845Floating point exception[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nç”±æ­¤å¯è§ï¼Œçº¿ç¨‹å¼‚å¸¸ = è¿›ç¨‹å¼‚å¸¸\nè¿™é‡Œä¹Ÿå°±æ¶‰åŠåˆ°1.5.1ä¸­æåˆ°çš„çº¿ç¨‹å¥å£®æ€§é—®é¢˜ï¼Œçº¿ç¨‹çš„å¼‚å¸¸ä¼šå½±å“å…¶ä»–çº¿ç¨‹çš„è¿è¡Œï¼Œä¼šå¯¼è‡´è¿›ç¨‹æ•´ä½“å¼‚å¸¸é€€å‡ºã€‚\næ‰€ä»¥åœ¨joinç­‰å¾…çº¿ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦è€ƒè™‘çº¿ç¨‹æ­£å¸¸é€€å‡ºçš„æƒ…å†µï¼›\n\nå¼‚å¸¸é€€å‡ºçš„æ—¶å€™ææ€•ä¹Ÿç­‰ä¸äº†ğŸ˜‚å› ä¸ºè¿›ç¨‹ä¹ŸæŒ‚äº†\n\n2.3.5 exitä»»ä½•ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œexit()å‡½æ•°ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹é€€å‡º\n\n2.4 pthread_detachç­‰å¾…æ˜¯æœ‰æ€§èƒ½æŸå¤±çš„ï¼é»˜è®¤åˆ›å»ºçš„è¿›ç¨‹æ˜¯joinableï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è¢«ä¸»çº¿ç¨‹è¿›è¡Œpthread_joinç­‰å¾…çš„ï¼›\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è®©ä¸»çº¿ç¨‹ä¸ç®¡åˆ›å»ºå‡ºæ¥çš„å­çº¿ç¨‹ï¼Œä¹Ÿä¸ç”¨å»ç­‰å¾…å®ƒï¼Œç›¸å½“äºå–æ¶ˆäº†å®ƒçš„joinableå±æ€§ï¼›\nå°±å¥½æ¯”çˆ¶è¿›ç¨‹ä¸æƒ³ç®¡å­è¿›ç¨‹çš„æ—¶å€™ï¼Œå°†SIGCHLDè®¾ç½®ä¸ºSIG_IGN\n#include &lt;pthread.h&gt;int pthread_detach(pthread_t thread);//Compile and link with -pthread.\n\nä¸€ä¸ªçº¿ç¨‹æ˜¯å¦åº”è¯¥ç­‰å¾…ï¼Œå–å†³äºæ˜¯å¦éœ€è¦è·å–è¯¥çº¿ç¨‹çš„è¿”å›å€¼ï¼›å¦‚æœæ— é¡»è·å–è¿”å›å€¼ï¼Œåˆ™ä½¿ç”¨åˆ†ç¦»èƒ½æé«˜è¿è¡Œæ•ˆç‡\n\nå³ä¾¿çº¿ç¨‹æ‰€è¿è¡Œçš„å‡½æ•°returnæ˜¯æ— æ•ˆçš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨è¾“å‡ºå‹å‚æ•°æ¥è·å–è¿”å›å€¼\n\n2.4.1 å®æ“ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦æŒ‡å®šçº¿ç¨‹çš„idå°±è¡Œäº†\nvoid test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    pthread_detach(t1);    pthread_detach(t2);&#125;\n\nè¿è¡Œä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯æˆ‘ä»¬å·²æ— æ³•è·å–åˆ°è¯¥çº¿ç¨‹çš„è¿”å›å€¼\n\n\n2.4.2 detachåjoinä½†å¦‚æœæˆ‘ä»¬åœ¨detachä¹‹ååˆè¿›è¡Œpthread_joinä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\nvoid* func3(void* arg)&#123;    pthread_detach(pthread_self());    int a = 7;    while(a--)    &#123;        printf(&quot;func thread:%s - global:%d - &amp;global:%p\\n&quot;,(char*)arg,global,&amp;global);        global++;        sleep(1);    &#125;    cout &lt;&lt; &quot;func exit&quot; &lt;&lt; endl;    return (void*)10;&#125;void test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    void* r1=nullptr;    void* r2=nullptr;    pthread_join(t1,&amp;r1);    pthread_join(t2,&amp;r2);    sleep(2);    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;&#125;\n\nè¯¶ï¼Œè¿™ä¸è¿˜æ˜¯è·å–åˆ°äº†è¿”å›å€¼å—ï¼Ÿè¿™ä¹ˆè¯´ï¼Œä»–è¿™ä¸ªdetachå²‚ä¸æ˜¯æ²¡ç”¨ï¼Ÿ\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:103 - &amp;global:0x7fb5648b06fcfunc thread:2 - global:103 - &amp;global:0x7fb5640af6fcfunc thread:1 - global:104 - &amp;global:0x7fb5648b06fcfunc thread:2 - global:104 - &amp;global:0x7fb5640af6fcfunc exitfunc exitretval 1 : 10retval 2 : 10[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬createä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œå®ƒä¼šå…ˆå»æ‰§è¡Œçº¿ç¨‹åˆ›å»ºçš„ç›¸å…³ä»£ç ï¼Œæ­¤æ—¶mainåˆç›´æ¥å»æ‰§è¡Œåé¢çš„ä»£ç äº†ï¼›æ­¤æ—¶pthread_joinçš„è°ƒç”¨æ˜¯æˆåŠŸçš„ï¼Œå› ä¸ºçº¿ç¨‹è‡ªå·±çš„detachä»£ç è¿˜æ²¡æœ‰è¢«æ‰§è¡Œï¼\n\nè€Œå¦‚æœæˆ‘ä»¬åœ¨createä¹‹åï¼Œç­‰çº¿ç¨‹å¼€å§‹è¿è¡Œäº†åœ¨æ‰§è¡Œdetachï¼Œæ­¤æ—¶joinå°±ä¼šå¤±è´¥\nvoid test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    sleep(2);    pthread_detach(t1);    pthread_detach(t2);    sleep(1);    void* r1=nullptr;    void* r2=nullptr;    int ret = pthread_join(t1,&amp;r1);    cout &lt;&lt; ret &lt;&lt; &quot;:&quot; &lt;&lt; strerror(ret) &lt;&lt; endl;    ret = pthread_join(t2,&amp;r2);    cout &lt;&lt; ret &lt;&lt; &quot;:&quot; &lt;&lt; strerror(ret) &lt;&lt; endl;    cout &lt;&lt; &quot;retval 1 : &quot; &lt;&lt; (long long)r1 &lt;&lt; endl;    cout &lt;&lt; &quot;retval 2 : &quot; &lt;&lt; (long long)r2 &lt;&lt; endl;    sleep(20);&#125;\n\næ‰“å°é”™è¯¯ç ä¹Ÿèƒ½çœ‹åˆ°ï¼Œç³»ç»Ÿæç¤ºæˆ‘ä»¬ç»™joinä¼ å…¥äº†ä¸€ä¸ªæ— æ•ˆçš„å‚æ•°ï¼Œçº¿ç¨‹ä¾æ—§åœ¨æ­£å¸¸è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:101 - &amp;global:0x7f2d439136fcfunc thread:2 - global:101 - &amp;global:0x7f2d431126fcfunc thread:2 - global:102 - &amp;global:0x7f2d431126fcfunc thread:1 - global:102 - &amp;global:0x7f2d439136fc22:Invalid argument22:Invalid argumentretval 1 : 0retval 2 : 0func thread:2 - global:103 - &amp;global:0x7f2d431126fcfunc thread:1 - global:103 - &amp;global:0x7f2d439136fc\n\næ‰€ä»¥æ­£ç¡®çš„åšæ³•ï¼Œåº”è¯¥æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­åˆ†ç¦»çº¿ç¨‹ï¼Œä¸è¦åœ¨çº¿ç¨‹è‡ªå·±çš„ä»£ç ä¸­æ‰§è¡Œdetachï¼Œå¦åˆ™å°±ä¼šå‡ºç°ä¸Šé¢çš„åˆ†ç¦»å¤±è´¥çš„æƒ…å†µ\n2.4.3 çº¿ç¨‹åˆ†ç¦»åï¼Œä¸»çº¿ç¨‹å…ˆé€€å‡ºå¦‚æœæ‰§è¡Œå®Œæ¯•pthread_detachåï¼Œä¸»çº¿ç¨‹æå‰é€€å‡ºäº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\nvoid test5()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    sleep(1);    pthread_detach(t1);    pthread_detach(t2);    sleep(2);    cout &lt;&lt; &quot;main exit&quot; &lt;&lt; endl;&#125;\n\næ˜¾è€Œæ˜“è§ï¼Œçº¿ç¨‹ä¹Ÿè·Ÿç€ä¸€å¹¶é€€å‡ºäº†\n[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ ./testfunc thread:1 - global:100 - &amp;global:0x7f01cd49a6fcfunc thread:2 - global:100 - &amp;global:0x7f01ccc996fcfunc thread:2 - global:101 - &amp;global:0x7f01ccc996fcfunc thread:1 - global:101 - &amp;global:0x7f01cd49a6fcfunc thread:2 - global:102 - &amp;global:0x7f01ccc996fcfunc thread:1 - global:102 - &amp;global:0x7f01cd49a6fcmain exit[muxue@bt-7274:~/git/linux/code/22-12-15_pthread]$ \n\nå› ä¸ºçº¿ç¨‹æ²¡æœ‰ç‹¬ç«‹æ€§ï¼Œå®Œå…¨å±äºè¿™ä¸ªè¿›ç¨‹ã€‚ä¸å¯èƒ½å‡ºç°ä½ å®¶æˆ¿å­å¡Œäº†ï¼Œä½ è‡ªå·±çš„æˆ¿é—´è¿˜åœ¨çš„æƒ…å†µğŸ˜‚\n\nè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±å›æ”¶äº†è¿™ä¸ªè¿›ç¨‹çš„ç¨‹åºåœ°å€ç©ºé—´ï¼Œè¿èµ„æºéƒ½è¢«é‡Šæ”¾äº†ï¼Œçº¿ç¨‹å°±æ²¡æœ‰åŠæ³•ç»§ç»­è¿è¡Œï¼Œè‡ªç„¶å°±é€€å‡ºäº†ã€‚\n\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼Œä¸€èˆ¬æˆ‘ä»¬åˆ†ç¦»çº¿ç¨‹çš„æ—¶å€™ï¼Œéƒ½å€¾å‘äºè®©ä¸»çº¿ç¨‹ä¿æŒåœ¨åå°è¿è¡Œï¼ˆå¸¸é©»å†…å­˜çš„ç¨‹åºï¼‰\n2.5 gettid&#x2F;syscallè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªç³»ç»Ÿæ¥å£ï¼Œä½†å®ƒå¹¶ä¸èƒ½ç›´æ¥è¿è¡Œ\nNAME       gettid - get thread identificationSYNOPSIS       #include &lt;sys/types.h&gt;       pid_t gettid(void);       Note:  There  is  no  glibc wrapper for this system call; see       NOTES.\n\næˆ‘ä»¬éœ€è¦ç”¨syscallå‡½æ•°æ¥è°ƒç”¨è¯¥æ¥å£ï¼Œè¿™ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°syscallå‡½æ•°\n#define _GNU_SOURCE         /* See feature_test_macros(7) */#include &lt;unistd.h&gt;#include &lt;sys/syscall.h&gt;   /* For SYS_xxx definitions */int syscall(int number, ...);\n\nåœ¨syscallçš„manæ‰‹å†Œä¸­ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°è·å–çº¿ç¨‹idç›¸å…³çš„ç¤ºä¾‹\n//EXAMPLE#define _GNU_SOURCE#include &lt;unistd.h&gt;#include &lt;sys/syscall.h&gt;#include &lt;sys/types.h&gt;int main(int argc, char *argv[])&#123;    pid_t tid;    tid = syscall(SYS_gettid);    tid = syscall(SYS_tgkill, getpid(), tid);&#125;\n\nç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\nvoid* func2(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func2 thread:: &quot; &lt;&lt; (char*)arg &lt;&lt; &quot; :: &quot; &lt;&lt; getpid() &lt;&lt; &quot; tid: &quot; &lt;&lt; syscall(SYS_gettid) &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func2 exit&quot; &lt;&lt; endl;    pthread_exit((void*)10);&#125;void test1()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func2,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;2&quot;);       while(1)    &#123;        printf(&quot;tis is main - pid:%d - tid:%d\\n&quot;,getpid(),syscall(SYS_gettid));        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;\n\nè¿è¡Œå¯ä»¥çœ‹åˆ°è¿›ç¨‹æ‰“å°å‡ºäº†ç›¸åŒçš„PIDå’Œä¸åŒçš„TIDï¼Œå…¶TIDå¯¹åº”çš„å°±æ˜¯ps -aLä¸­æ˜¾ç¤ºçš„LWPç¼–å·\n\n3.ç›¸å…³æ¦‚å¿µ3.1 çº¿ç¨‹idæ˜¯ä»€ä¹ˆï¼Ÿå‰é¢æåˆ°è¿‡ï¼Œpthread_tæ˜¯çº¿ç¨‹ç‹¬ç«‹çš„idï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— ç¬¦å·é•¿æ•´å½¢ï¼Œæ‰“å°å‡ºæ¥åï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ã€‚è¿™ä¸ªæ•°å­—æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å«ä¹‰å—ï¼Ÿ\nå…ˆæ¥å›é¡¾ä¸€ä¸‹çº¿ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼š\n\nçº¿ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ‰§è¡Œæµ\nçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿè‡ªå·±çš„ä¸´æ—¶æ•°æ®\nçº¿ç¨‹è°ƒç”¨å‡½æ•°çš„å‹æ ˆå‡ºæ ˆæ“ä½œï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç»“æ„\n\nå› æ­¤ï¼Œæ—¢ç„¶æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æ ˆç»“æ„ï¼Œå…¶å°±éœ€è¦æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦æ¥æŒ‡å‘è¿™ä¸ªæ ˆç»“æ„ï¼Œæ–¹ä¾¿ç¨‹åºè¿è¡Œçš„æ—¶å€™è¿›è¡Œè°ƒç”¨ï¼\næ‰€ä»¥ï¼Œpthread_tæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåœ°å€ï¼å…¶æŒ‡å‘çš„å°±æ˜¯è¿™ä¸ªçº¿ç¨‹çš„æ§åˆ¶å—ï¼Œå…¶å†…éƒ¨åŒ…å«äº†è¿™ä¸ªçº¿ç¨‹çš„ç‹¬ç«‹æ ˆç»“æ„ã€‚\n//printf(&quot;0x%x  0x%x\\n&quot;,t1,t2);0x393d0700  0x38bcf700 //æ‰“å°å‡ºæ¥çš„ç»“æœä¹Ÿå¾ˆåƒåœ°å€\n\n3.2 pthreadåº“pthreadåº“å¹¶ä¸æ˜¯ä¸€ä¸ªå†…æ ¸çº§çš„æ¥å£åº“ï¼Œå…¶å®é™…ä¸Šæ˜¯å°è£…äº†ç³»ç»Ÿçš„clone/vforkç­‰æ¥å£ï¼Œä»è€Œä¸ºæˆ‘ä»¬æä¾›çš„ç”¨æˆ·çº§çš„çº¿ç¨‹åº“ã€‚\nä½¿ç”¨pthreadåº“åˆ›å»ºçš„è¿›ç¨‹ï¼Œå’Œå†…æ ¸ä¸­çš„LWPæ˜¯1:1çš„\n\npthreadæ˜¯ä¸€ä¸ªåŠ¨æ€åº“ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦åŠ ä¸Šé“¾æ¥é€‰é¡¹\ng++ test.cpp -o test -lpthread\n\nåœ¨æˆ‘çš„ åŠ¨é™æ€åº“ çš„åšå®¢ä¸­æœ‰è®²è¿°è¿‡ï¼ŒåŠ¨æ€åº“æ˜¯åœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€é“¾æ¥çš„ï¼Œå…¶ä¼šå°†åº“ä¸­çš„ä»£ç æ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´çš„å…±äº«åŒºï¼Œä»è€Œè°ƒç”¨åŠ¨æ€åº“ä¸­çš„ä»£ç \n\nä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨pthead_createçš„æ—¶å€™ï¼Œè¿›ç¨‹ä¼šè·³åˆ°å…±äº«åŒºä¸­ï¼Œæ‰§è¡ŒåŠ¨æ€åº“ä¸­çš„ä»£ç ï¼Œåˆ›å»ºæˆåŠŸåè¿”å›è‡ªå·±çš„ä»£ç åŒºï¼Œå®Œæˆä¸€ä¸ªçº¿ç¨‹çš„åˆ›å»º\n\nè€Œçº¿ç¨‹æ‰€ç”¨çš„ç‹¬ç«‹æ ˆï¼Œä¹Ÿæ˜¯pthreadåº“å¸®æˆ‘ä»¬ç®¡ç†çš„ã€‚å› ä¸ºæœ‰å…±äº«åŒºçš„å­˜åœ¨ï¼Œæˆ‘ä»¬èƒ½é€šè¿‡pthread_tç›´æ¥è®¿é—®åˆ°åŠ¨æ€åº“ä¸­ç®¡ç†çš„çº¿ç¨‹çš„æ§åˆ¶æ¨¡å—ï¼Œä»è€Œå®Œæˆçº¿ç¨‹çš„å‹æ ˆã€å‡ºæ ˆç­‰ç­‰æ“ä½œ\n\nä¸‹ä¸ºlinuxçš„pthreadtypes.hä¸­çš„éƒ¨åˆ†å†…å®¹\n# define __SIZEOF_PTHREAD_ATTR_T 36typedef unsigned long int pthread_t;union pthread_attr_t&#123;  char __size[__SIZEOF_PTHREAD_ATTR_T];  long int __align;&#125;;#ifndef __have_pthread_attr_ttypedef union pthread_attr_t pthread_attr_t;# define __have_pthread_attr_t\t1#endif\n\n3.3 çº¿ç¨‹çš„å±€éƒ¨å­˜å‚¨å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæˆ‘ä»¬æƒ³è®©åˆ›å»ºå‡ºæ¥çš„æ¯ä¸€ä¸ªçº¿ç¨‹ï¼Œéƒ½èƒ½ç‹¬ç«‹çš„ä½¿ç”¨è¿™ä¸ªå…¨å±€å˜é‡ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°çº¿ç¨‹çš„å±€éƒ¨å­˜å‚¨\nint global = 10;//å…¨å±€å˜é‡void* func3(void* arg)&#123;    int a = 10;    while(a--)    &#123;        cout &lt;&lt; &quot;func thread &quot; &lt;&lt; (char*)arg &lt;&lt;  &quot; - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    cout &lt;&lt; &quot;func exit&quot; &lt;&lt; endl;&#125;void test4()&#123;    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func3,(void*)&quot;1&quot;);    pthread_create(&amp;t2,nullptr,func3,(void*)&quot;2&quot;);    while(1)    &#123;        cout &lt;&lt; &quot;this is main - global: &quot; &lt;&lt; global &lt;&lt; &quot; - &amp;global: &quot; &lt;&lt; &amp;global &lt;&lt; endl;        sleep(1);    &#125;    pthread_join(t1,nullptr);    pthread_join(t2,nullptr);&#125;\n\næ‰§è¡Œï¼Œä¸ç®¡æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œéƒ½æ‰“å°çš„æ˜¯ç›¸åŒçš„å€¼å’Œåœ°å€\n\nå¦‚æœåœ¨æ‰§è¡Œçš„å‡½æ•°func3ä¸­æ·»åŠ ä¸€ä¸ªglobal++ï¼Œåˆ™èƒ½è§‚å¯Ÿåˆ°æ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å…¬ç”¨çš„ä¸€ä¸ªå˜é‡ï¼Œè¿™é‡Œçš„+æ˜¯åŒæ­¥çš„ã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³è®©int globalå˜æˆå±€éƒ¨å˜é‡ï¼Œåˆ™éœ€è¦åœ¨å®ƒä¹‹å‰åŠ ä¸Šä¸€ä¸ª__thread\n__thread int global = 100;//å¯ä»¥è®©çº¿ç¨‹ç‹¬ç«‹ä½¿ç”¨çš„å…¨å±€å˜é‡\n\næ­¤æ—¶å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªçº¿ç¨‹å’Œä¸»çº¿ç¨‹æ‰“å°çš„globalå˜é‡åœ°å€ä¸åŒï¼Œä»–ä»¬çš„++æ“ä½œæ˜¯ç‹¬ç«‹çš„ï¼Œå˜é‡çš„å€¼ä¹Ÿæ˜¯ç‹¬ç«‹çš„\n\nè¿™å°±å®ç°äº†å°†æŸä¸€ä¸ªå˜é‡åˆ’åˆ†ç»™çº¿ç¨‹è¿›è¡Œå±€éƒ¨å­˜å‚¨\n4.çº¿ç¨‹äº’æ–¥é—®é¢˜4.1 ä¸´ç•Œèµ„æºåœ¨å…ˆå‰å…±äº«å†…å­˜ ä¿¡å·é‡çš„åšå®¢ä¸­ï¼Œå·²ç»æ¶‰åŠåˆ°äº†è¿™éƒ¨åˆ†çš„å†…å®¹ï¼›å³å…³äºæ“ä½œåŸå­æ€§å’Œè®¿é—®ä¸´ç•Œèµ„æº&#x2F;ä¸´ç•ŒåŒºçš„ç›¸å…³é—®é¢˜ã€‚\n\nèƒ½è¢«å¤šä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹çœ‹åˆ°çš„èµ„æºï¼Œè¢«ç§°ä¸ºä¸´ç•Œèµ„æº\nè¿›ç¨‹&#x2F;çº¿ç¨‹è®¿é—®ä¸´ç•Œèµ„æºçš„ä»£ç ï¼Œè¢«ç§°ä¸ºä¸´ç•ŒåŒº\n\nåœ¨çº¿ç¨‹ä¸­ï¼ŒåŒæ ·å­˜åœ¨è®¿é—®ä¸´ç•Œèµ„æºè€Œå¯¼è‡´çš„å†²çªï¼š\n\nçº¿ç¨‹Aå¯¹ä¸€ä¸ªå…¨å±€å˜é‡valè¿›è¡Œäº†-1æ“ä½œï¼Œå½“æ“ä½œæ‰§è¡Œåˆ°æ”¾å›å†…å­˜é‚£ä¸€æ­¥çš„æ—¶å€™ï¼Œå‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹Bå¼€å§‹å·¥ä½œ\nçº¿ç¨‹BåŒæ ·è®¿é—®äº†è¯¥å…¨å±€å˜é‡valï¼Œå¯¹å®ƒè¿›è¡Œäº†-10æ“ä½œï¼Œæ­¤æ—¶å› ä¸ºçº¿ç¨‹Açš„-1æ“ä½œå°šæœªå†™å›å†…å­˜ï¼Œå…¨å±€å˜é‡valè¿˜æ˜¯ä¿æŒåˆå€¼ã€‚çº¿ç¨‹bå°†-10ä¹‹åçš„å…¨å±€å˜é‡valå†™å›äº†å†…å­˜\nåˆå‘ç”Ÿäº†çº¿ç¨‹åˆ‡æ¢ï¼Œè·³è½¬åˆ°çº¿ç¨‹Aåœæ­¢çš„çº¿ç¨‹ä¸Šä¸‹æ–‡æ•°æ®ä¸­å¼€å§‹æ‰§è¡Œï¼Œå°†å…¨å±€å˜é‡å†™å…¥å†…å­˜\nè¿™æ—¶å€™ï¼Œçº¿ç¨‹Bçš„-10æ“ä½œå°±è¢«Açš„å†™å…¥è¦†ç›–äº†ï¼\n\nä¸¾ä¸ªå®é™…ç‚¹çš„ä¾‹å­ï¼Œä»¥100ä¸ºå…¨å±€å˜é‡çš„åˆå§‹å€¼\n\nçº¿ç¨‹Aæ‰§è¡Œ-1ï¼Œ100-1=99ï¼Œè¿˜æœªå†™å…¥å†…å­˜æ—¶ï¼Œå°±çº¿ç¨‹åˆ‡æ¢\nçº¿ç¨‹Bå–åˆ°çš„å…¨å±€å˜é‡è¿˜æ˜¯100ï¼Œå¯¹å…¶æ‰§è¡Œ-10ï¼Œå¹¶å†™å…¥å†…å­˜ï¼Œ æ­¤æ—¶å…¨å±€å˜é‡ä¸º90\nè¿”å›çº¿ç¨‹Aç»§ç»­æ‰§è¡Œå†™å…¥å†…å­˜æ“ä½œï¼Œå…¨å±€å˜é‡åˆè¢«å¤å†™æˆäº†99ï¼›ç›¸å½“äºBçš„æ“ä½œæ˜¯æ— æ•ˆçš„\n\nè¿™ç§æ¡ä»¶ä¸‹ä¼šäº§ç”Ÿå¾ˆå¤šé—®é¢˜ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼\n4.2 åŸå­&#x2F;äº’æ–¥æ€§è¿™ç§æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿è¯è®¿é—®è¯¥å…¨å±€å˜é‡çš„æ“ä½œæ˜¯åŸå­çš„ï¼Œä¸èƒ½å‡ºç°ä¸­é—´çŠ¶æ€ï¼›\nä¹Ÿåº”è¯¥æ˜¯äº’æ–¥çš„ï¼Œä¸èƒ½å‡ºç°ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä»½èµ„æºçš„æƒ…å†µ\n\näº’æ–¥æ€§ï¼šä»»ä½•æ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµåœ¨è®¿é—®æŸä¸€ä»½èµ„æº\n\n\næ“ä½œç³»ç»Ÿç»´æŠ¤åŸå­æ€§ï¼Œå°±å¿…é¡»ä¿è¯è¯¥æ“ä½œåªç”¨ä¸€æ¡æ±‡ç¼–è¯­å¥æ‰§è¡Œï¼ˆè¿™æ ·æ‰ä¸ä¼šå‡ºç°è¿›ç¨‹&#x2F;çº¿ç¨‹åˆ‡æ¢å¯¼è‡´çš„é—®é¢˜ï¼‰è¿™ä¸ªåœ¨åé¢ä¼šè¯¦ç»†ä»‹ç»\nä¸ºäº†è¾¾æˆè¿™ä¸€ç›®çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™çº¿ç¨‹çš„æ“ä½œåŠ é”\n4.3 çº¿ç¨‹åŠ é”çº¿ç¨‹åŠ é”æ¶‰åŠåˆ°å‡ ä¸ªæ“ä½œï¼š\n\næä¾›ä¸€æŠŠé”\nåœ¨éœ€è¦ç»´æŒåŸå­æ€§ï¼ˆä¸´ç•ŒåŒºï¼‰çš„ä½ç½®åŠ ä¸Šé”\nè®¿é—®ä¸´ç•ŒåŒºç»“æŸåï¼Œæ‰“å¼€é”\nè¿›ç¨‹ç»“æŸåï¼ŒæŠŠé”ä¸¢äº†\n\næ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€ä¸€è§£å†³è¿™äº›é—®é¢˜\n4.3.1 pthread_mutex_initpthreadçº¿ç¨‹åº“åœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥å®ƒä¾¿ç»™æˆ‘ä»¬æä¾›äº†åŠ é”ç›¸å…³çš„æ“ä½œã€‚\n#include &lt;pthread.h&gt;int pthread_mutex_destroy(pthread_mutex_t *mutex);int pthread_mutex_init(pthread_mutex_t *restrict mutex,                       const pthread_mutexattr_t *restrict attr);pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€æŠŠé”ï¼Œç±»å‹æ˜¯pthread_mutex_t\n\nå¦‚æœæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€æŠŠå…¨å±€å˜é‡çš„é”ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨èµ‹å€¼PTHREAD_MUTEX_INITIALIZERç»™è¿™æŠŠé”åˆå§‹åŒ–\nå¦‚æœæ˜¯ä¸€æŠŠå±€éƒ¨çš„é”ï¼Œåˆ™ä½¿ç”¨å‡½æ•°pthread_mutex_initè¿›è¡Œåˆå§‹åŒ–\n\nåˆå§‹åŒ–çš„æ–¹æ³•å¾ˆç®€å•ï¼Œä¼ å…¥é”å’Œå¯¹åº”çš„å±æ€§å°±è¡Œã€‚æ­¤æ—¶æˆ‘ä»¬å¿½ç•¥å±æ€§é—®é¢˜ï¼Œè®¾ç½®ä¸ºNULLä½¿ç”¨é»˜è®¤å±æ€§\n//ä½¿ç”¨é»˜è®¤å±æ€§çš„å…¨å±€é”oré™æ€staticé”//æ— é¡»è°ƒç”¨å‡½æ•°åˆå§‹åŒ–ï¼Œå¯ä»¥ç›´æ¥ç”¨pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;//ä½¿ç”¨å‡½æ•°è¿›è¡Œåˆå§‹åŒ–å±€éƒ¨çš„é”ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥åˆå§‹åŒ–å…¨å±€é”ï¼‰pthread_mutex_t mutex;//å®šä¹‰ä¸€æŠŠé”pthread_mutex_init(&amp;mutex, nullptr);//åˆå§‹åŒ–pthread_mutex_destroy(&amp;mutex);//é”€æ¯\n\n4.3.2 åŠ é”&#x2F;è§£é”æœ‰äº†é”ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨éœ€è¦çš„ä½ç½®åŠ ä¸Šè¿™æŠŠé”\n#include &lt;pthread.h&gt;int pthread_mutex_lock(pthread_mutex_t *mutex);int pthread_mutex_trylock(pthread_mutex_t *mutex);int pthread_mutex_unlock(pthread_mutex_t *mutex);\n\nå…¶ä¸­lockæ˜¯é˜»å¡å¼åŠ é”ï¼Œå¦‚æœä½ è°ƒç”¨è¿™ä¸ªæ¥å£çš„æ—¶å€™ï¼Œé”æ­£åœ¨è¢«åˆ«äººä½¿ç”¨ï¼Œåˆ™ä¼šåœ¨è¿™é‡Œç­‰å¾…ï¼›trylockæ˜¯éé˜»å¡åŠ é”ï¼Œå¦‚æœä½ è°ƒç”¨è¯¥æ¥å£æ—¶é”æ­£è¢«ä½¿ç”¨ï¼Œåˆ™ç›´æ¥returnè¿”å›ï¼ˆç›¸å½“äºçœ‹çœ‹é”èƒ½å¦è¢«è·å–ï¼‰\nThe pthread_mutex_trylock() function shall be equivalent to pthread_mutex_lock(), except that if the mutex object referenced  by  mutex  is  currently locked (by any thread, including the current thread), the call shall return immediately. \n\nåŠ äº†é”ä¹‹åï¼Œåœ¨éœ€è¦çš„ä½ç½®unlockè§£é”ï¼›\n\nåŠ é”å’Œè§£é”æ“ä½œæœ¬èº«æ˜¯åŸå­çš„ï¼Œä¸ä¼šå‡ºç°å†²çª\nåŠ äº†é”ä¹‹åï¼Œå¯ä»¥ç†è§£ä¸ºåŠ é”è§£é”æ“ä½œä¸­é—´çš„ä»£ç ä¹Ÿæ˜¯åŸå­æ€§çš„ï¼Œå¿…é¡»è¦è¿è¡Œåˆ°è§£é”ä½ç½®æ‰èƒ½è®©å¦å¤–ä¸€ä¸ªçº¿ç¨‹&#x2F;è¿›ç¨‹æ‰§è¡Œè¿™é‡Œçš„ä»£ç \nåŠ é”çš„æœ¬è´¨æ˜¯è®©çº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºçš„ä»£ç ä¸²è¡ŒåŒ–\n\n4.3.3 åŠ é”çš„æ³¨æ„äº‹é¡¹\nåªå¯¹ä¸´ç•ŒåŒºåŠ é”ï¼›é”ä¿æŠ¤çš„å°±æ˜¯ä¸´ç•ŒåŒº\nåŠ é”çš„ç²’åº¦è¶Šç»†è¶Šå¥½ï¼ˆå³åŠ é”çš„åŒºåŸŸè¶Šå°è¶Šå¥½ã€‚å¦‚æœè®¿é—®çš„ä¸æ˜¯ä¸´ç•ŒåŒºï¼Œåˆ™å¯ä»¥ä¸è€ƒè™‘åŠ é”ï¼‰\nåŠ é”æ˜¯ç¼–ç¨‹çš„ä¸€ç§è§„èŒƒï¼›åœ¨å®é™…é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬è¦ä¿è¯è®¿é—®æŸä¸€ä¸´ç•Œèµ„æºçš„æ‰€æœ‰æ“ä½œéƒ½è¦åŠ ä¸Šé”ã€‚ä¸èƒ½å‡ºç°å‡½æ•°AåŠ é”äº†ï¼Œä½†æ˜¯Bæ²¡æœ‰åŠ é”çš„æƒ…å†µï¼ˆè¿™æ ·ä¼šå¯¼è‡´Açš„åŠ é”ä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼‰\n\n4.4 ç¤ºä¾‹-å€’æ°´é—®é¢˜\nä»¥å€’æ°´ä¸ºç¤ºä¾‹ï¼Œå‡è®¾æ¯å­å®¹é‡ä¸º10000ï¼Œè£…æ»¡äº†æ°´å°±ä¼šæº¢å‡ºã€‚æˆ‘ä»¬ä½¿ç”¨å¤šä¸ªçº¿ç¨‹å¯¹è¿™ä¸ªæ¯å­åŠ æ°´ï¼Œç›´åˆ°æ»¡äº†ä¹‹åçº¿ç¨‹é€€å‡º\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;//ä¸´ç•Œèµ„æºint water = 0;//å…¨å±€å˜é‡int cup = 10000;//æ¯å­çš„å®¹é‡void* func(void* arg)&#123;    while(1)    &#123;        if(water&lt;cup)//ä¸´ç•ŒåŒº        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº† &quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;int main()&#123;    pthread_t t1,t2,t3,t4;//åˆ›å»º4ä¸ªçº¿ç¨‹    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    pthread_create(&amp;t4,nullptr,func,(void*)&quot;t4&quot;);    //ç›´æ¥åˆ†ç¦»çº¿ç¨‹    pthread_detach(t1);    pthread_detach(t2);    pthread_detach(t3);    pthread_detach(t4);    while(1)    &#123;        ;//å•¥éƒ½ä¸å¹²    &#125;    return 0;&#125;\n\nè¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼Œæ˜æ˜æ°´å·²ç»æ»¡äº†ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰éƒ¨åˆ†çº¿ç¨‹æŠ¥å‘Šæ°´è¿˜æ²¡æœ‰æ»¡ï¼Œä¸”æ•°å­—æœ‰å¾ˆä¸¥é‡çš„åå·®\nt3 æ°´æ²¡æœ‰æ»¡ï¼š9993t3 æ°´æ²¡æœ‰æ»¡ï¼š9994t3 æ°´æ²¡æœ‰æ»¡ï¼š9995t3 æ°´æ²¡æœ‰æ»¡ï¼š9996t3 æ°´æ²¡æœ‰æ»¡ï¼š9997t3 æ°´æ²¡æœ‰æ»¡ï¼š9998t3 æ°´æ²¡æœ‰æ»¡ï¼š9999t3 æ°´å·²ç»æ»¡äº†t3 çº¿ç¨‹é€€å‡º æ°´æ²¡æœ‰æ»¡ï¼š2723t4 æ°´å·²ç»æ»¡äº†t4 çº¿ç¨‹é€€å‡º0t2 æ°´å·²ç»æ»¡äº†t2 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š9668t1 æ°´å·²ç»æ»¡äº†t1 çº¿ç¨‹é€€å‡º\n\nå¤šè¿è¡Œå‡ æ¬¡ï¼Œä¹Ÿèƒ½å‘ç°ç›¸åŒçš„é—®é¢˜\nt2 æ°´æ²¡æœ‰æ»¡ï¼š9997t2 æ°´æ²¡æœ‰æ»¡ï¼š9998t2 æ°´æ²¡æœ‰æ»¡ï¼š9999t2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡ºt4 æ°´æ²¡æœ‰æ»¡ï¼š1889t4 æ°´å·²ç»æ»¡äº† 10001t4 çº¿ç¨‹é€€å‡ºt3 æ°´æ²¡æœ‰æ»¡ï¼š0t3 æ°´å·²ç»æ»¡äº† 10002t3 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š0t1 æ°´å·²ç»æ»¡äº† 10003t1 çº¿ç¨‹é€€å‡º\n\n4.4.1 åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å·¥ä½œï¼Ÿé™¤äº†åå·®å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå¾€å‰ç¿»æ‰“å°è®°å½•ï¼Œä¼šå‘ç°ä¸€ç›´éƒ½æ˜¯æŸä¸€ä¸ªçº¿ç¨‹åœ¨å€’æ°´ï¼Œå…¶ä»–çº¿ç¨‹ä¼¼ä¹å•¥äº‹æ²¡æœ‰å¹²ï¼Ÿ\nt3 æ°´æ²¡æœ‰æ»¡ï¼š9786t3 æ°´æ²¡æœ‰æ»¡ï¼š9787t3 æ°´æ²¡æœ‰æ»¡ï¼š9788t3 æ°´æ²¡æœ‰æ»¡ï¼š9789t3 æ°´æ²¡æœ‰æ»¡ï¼š9790\n\nè¿™æ˜¯å› ä¸ºå½“è¿è¡Œt3çš„æ—¶å€™ï¼Œt3åœ¨whileå¾ªç¯ä¸­ç»§ç»­è¿è¡Œçš„æ¶ˆè€—ï¼Œå°äºåˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹çš„æ¶ˆè€—ã€‚æ‰€ä»¥æ§åˆ¶å—å°±è®©t3ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å®ƒbreaké€€å‡ºå¾ªç¯\næ­¤æ—¶æˆ‘ä»¬åªéœ€è¦åŠ ä¸Šä¸€ä¸ªusleepï¼Œå¢åŠ æ¯ä¸€ä¸ªwhileå¾ªç¯ä¸­éœ€è¦å¤„ç†çš„è´Ÿæ‹…ï¼Œå°±èƒ½è®©æ‰€æœ‰çº¿ç¨‹éƒ½æ¥å€’æ°´\n//usleepåŠŸèƒ½æŠŠè¿›ç¨‹æŒ‚èµ·ä¸€æ®µæ—¶é—´ï¼Œ å•ä½æ˜¯å¾®ç§’ï¼ˆç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ï¼‰#include &lt;unistd.h&gt;int usleep(useconds_t usec);\n\nè¿™æ˜¯å› ä¸ºçº¿ç¨‹åˆ‡æ¢åŒæ ·ä¹Ÿæ˜¯æ—¶é—´ç‰‡åˆ°äº†ï¼Œä»å†…æ ¸è¿”å›ç”¨æˆ·æ€çš„æ—¶å€™åšæ£€æµ‹ï¼Œåˆ‡æ¢è‡³å…¶ä»–çº¿ç¨‹ã€‚\næ·»åŠ usleepèƒ½åˆ›é€ æ›´å¤šå†…æ ¸&#x2F;ç”¨æˆ·çš„ä¸­é—´æ€ï¼Œä»è€Œå¢å¤šåˆ‡æ¢çº¿ç¨‹çš„æ¬¡æ•°\nvoid* func(void* arg)&#123;    while(1)    &#123;        if(water&lt;cup)        &#123;            usleep(100);//ä¼‘æ¯100å¾®ç§’            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº†&quot; &lt;&lt; &quot;\\n&quot;;            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;\n\nä½†æ˜¯è¿™è¿˜æ˜¯æ²¡æœ‰è§£å†³æ•°å­—å‡ºé”™çš„é—®é¢˜\nt4 æ°´æ²¡æœ‰æ»¡ï¼š9995t3 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t2 æ°´æ²¡æœ‰æ»¡ï¼š9998t4 æ°´æ²¡æœ‰æ»¡ï¼š9999t4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡ºt3 æ°´æ²¡æœ‰æ»¡ï¼š10000t3 æ°´å·²ç»æ»¡äº† 10001t3 çº¿ç¨‹é€€å‡ºt1 æ°´æ²¡æœ‰æ»¡ï¼š10001t1 æ°´å·²ç»æ»¡äº† 10002t1 çº¿ç¨‹é€€å‡ºt2 æ°´æ²¡æœ‰æ»¡ï¼š10002t2 æ°´å·²ç»æ»¡äº† 10003t2 çº¿ç¨‹é€€å‡º\n\n4.4.2 åŠ é”-é—®é¢˜è§£å†³è¿™æ—¶å€™å°±éœ€è¦è¯·å‡ºæˆ‘ä»¬çš„é”äº†\n//çœç•¥å¤´æ–‡ä»¶int water = 0;//å…¨å±€å˜é‡int cup = 10000;//æ¯å­çš„å®¹é‡pthread_mutex_t mutex;void* func(void* arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;mutex);        if(water&lt;cup)        &#123;            usleep(100);            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            water++;            pthread_mutex_unlock(&amp;mutex);            usleep(100);//å‡è£…å–æ°´        &#125;        else        &#123;            cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´å·²ç»æ»¡äº† &quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;            pthread_mutex_unlock(&amp;mutex);            //æ­¤å¤„ä¹Ÿéœ€è¦åŠ é”ï¼Œå¦åˆ™breakå‡ºå»ä¹‹åå…¶ä»–çº¿ç¨‹ä¼šå› ä¸ºæ²¡æœ‰è§£é”è€ŒæŒ‚èµ·            break;        &#125;    &#125;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; çº¿ç¨‹é€€å‡º&quot; &lt;&lt; &quot;\\n&quot;;    return (void*)0;&#125;// å¦‚æœé‡åˆ°2å·ä¿¡å·ï¼Œå°±åœ¨é”€æ¯é”åé€€å‡ºè¿›ç¨‹void des(int signo)&#123;    //é”€æ¯é”    pthread_mutex_destroy(&amp;mutex);    cout &lt;&lt; &quot;pthread_mutex_destroy, exit&quot; &lt;&lt; endl;    exit(0);&#125;int main()&#123;    signal(SIGINT,des);//è‡ªå®šä¹‰æ•æ‰2å·ä¿¡å·    pthread_mutex_init(&amp;mutex,nullptr);//åˆå§‹åŒ–é”    pthread_t t1,t2,t3,t4;//åˆ›å»º4ä¸ªçº¿ç¨‹    pthread_create(&amp;t1,nullptr,func,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func,(void*)&quot;t2&quot;);    pthread_create(&amp;t3,nullptr,func,(void*)&quot;t3&quot;);    pthread_create(&amp;t4,nullptr,func,(void*)&quot;t4&quot;);    //ç›´æ¥åˆ†ç¦»çº¿ç¨‹    pthread_detach(t1);    pthread_detach(t2);    pthread_detach(t3);    pthread_detach(t4);    while(1)    &#123;        ;//å•¥éƒ½ä¸å¹²    &#125;    return 0;&#125;\n\nè¿è¡Œå¯è§ï¼Œæ•°å­—é”™è¯¯é—®é¢˜å°±æ²¡æœ‰å‡ºç°äº†ï¼›ä½†åˆå‡ºç°äº†åªæœ‰ä¸€ä¸ªçº¿ç¨‹å·¥ä½œçš„é—®é¢˜\nt1 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t1 æ°´æ²¡æœ‰æ»¡ï¼š9998t1 æ°´æ²¡æœ‰æ»¡ï¼š9999t1 æ°´å·²ç»æ»¡äº† 10000t1 çº¿ç¨‹é€€å‡ºt3 æ°´å·²ç»æ»¡äº† 10000t3 çº¿ç¨‹é€€å‡ºt4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡ºt2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡º^Cpthread_mutex_destroy, exit\n\nè¿™è¿˜æ˜¯å› ä¸ºçº¿ç¨‹åˆ‡æ¢çš„æ•ˆç‡é—®é¢˜ï¼›ä¹Ÿæœ‰å¯èƒ½æ˜¯å› ä¸ºå…¶å®ƒçº¿ç¨‹ç”³è¯·é”çš„æ—¶å€™ï¼Œå‘ç°t1åœ¨ç”¨ï¼Œå°±è¿›è¡Œäº†é˜»å¡ç­‰å¾…è€ŒæŒ‚èµ·\n\nåªéœ€è¦åœ¨è§£é”ä¹‹åæ·»åŠ ä¸€ä¸ªusleepæ¨¡æ‹Ÿå…¶ä»–å·¥ä½œï¼Œå°±èƒ½è®©æ‰€æœ‰çº¿ç¨‹éƒ½è·‘èµ·æ¥\npthread_mutex_lock(&amp;mutex);if(water&lt;cup)&#123;    usleep(100);    cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;    water++;    pthread_mutex_unlock(&amp;mutex);    usleep(100);//å‡è£…å–æ°´&#125;\n\næ²¡æœ‰å‡ºç°æ•°æ®é”™è¯¯ï¼ŒåŠ é”çš„ç›®çš„æˆåŠŸè¾¾åˆ°ï¼\nt1 æ°´æ²¡æœ‰æ»¡ï¼š9993t3 æ°´æ²¡æœ‰æ»¡ï¼š9994t4 æ°´æ²¡æœ‰æ»¡ï¼š9995t2 æ°´æ²¡æœ‰æ»¡ï¼š9996t1 æ°´æ²¡æœ‰æ»¡ï¼š9997t3 æ°´æ²¡æœ‰æ»¡ï¼š9998t4 æ°´æ²¡æœ‰æ»¡ï¼š9999t2 æ°´å·²ç»æ»¡äº† 10000t2 çº¿ç¨‹é€€å‡ºt1 æ°´å·²ç»æ»¡äº† 10000t1 çº¿ç¨‹é€€å‡ºt3 æ°´å·²ç»æ»¡äº† 10000t3 çº¿ç¨‹é€€å‡ºt4 æ°´å·²ç»æ»¡äº† 10000t4 çº¿ç¨‹é€€å‡º^Cpthread_mutex_destroy, exit\n\n4.5 åŠ é”çš„è¿›ä¸€æ­¥è§£é‡Šåœ¨è¿™ä¸ªä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»™ä¸­é—´çš„å‡ è¡Œä»£ç åŠ äº†é”ï¼›ä½†è¿™å¹¶ä¸æ„å‘³ç€æ‰§è¡Œä¸­é—´è¿™éƒ¨åˆ†ä»£ç çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢\npthread_mutex_lock(&amp;mutex);//åŠ é”if(water&lt;cup)&#123;    cout &lt;&lt; (char*)arg &lt;&lt; &quot; æ°´æ²¡æœ‰æ»¡ï¼š&quot; &lt;&lt; water &lt;&lt; &quot;\\n&quot;;    water++;&#125;pthread_mutex_unlock(&amp;mutex);//è§£é”\n\näº‹å®ä¸Šï¼Œä»£ç æ‰§è¡Œçš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½å¯èƒ½å‘ç”Ÿè¿›ç¨‹&#x2F;çº¿ç¨‹çš„åˆ‡æ¢ã€‚ä½†å› ä¸ºæˆ‘ä»¬åŠ äº†é”ï¼Œåˆ‡æ¢çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹è¦æ¥è®¿é—®è¿™é‡Œçš„èµ„æºï¼Œå°±å¿…é¡»å…ˆç”³è¯·é”\næ­¤æ—¶é”åœ¨è¢«åˆ‡èµ°çš„è¿›çº¿ç¨‹æ‰‹ä¸Šï¼Œæ‰€ä»¥å…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®ä¸´ç•ŒåŒºçš„èµ„æºï¼Œä¹Ÿå°±ä¸ä¼šå‘ç”Ÿæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚\n\n\næ¢è¨€ä¹‹ï¼Œåªè¦å¼ ä¸‰æ‹¿åˆ°äº†é”ï¼Œé‚£ä¹ˆå®ƒä¹Ÿå°±ä¸æ‹…å¿ƒè‡ªå·±çš„å·¥ä½œä¼šè¢«åˆ«äººè¦†ç›–çš„é—®é¢˜ï¼›\nè€Œå¯¹å…¶ä»–çº¿ç¨‹è€Œè¨€ï¼Œå¼ ä¸‰è®¿é—®ä¸´ç•ŒåŒºçš„å·¥ä½œï¼Œåªæœ‰è¿˜æ²¡è¿›å…¥ä¸´ç•ŒåŒºå’Œè®¿é—®å®Œæ¯•ä¸´ç•ŒåŒºä¸¤ç§çŠ¶æ€\n\nå› æ­¤ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯çº¿ç¨‹åˆ‡æ¢çš„æ•ˆç‡è¾ƒä½ï¼Œå…¶ä»–çº¿ç¨‹å‡ºç°äº†é˜»å¡ç­‰å¾…çš„æƒ…å†µï¼›ä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥è®©è®¿é—®ä¸´ç•ŒåŒºçš„æ“ä½œå¿«å»å¿«å›ï¼Œå°½é‡ä¸è¦åœ¨ä¸´ç•ŒåŒºé‡Œé¢å¹²å•¥è€—æ—¶çš„äº‹æƒ…\n4.5.1 åŠ é”åŸå­æ€§çš„ä¿è¯\nå¤‡æ³¨ï¼šè¿™éƒ¨åˆ†ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œè‹¥æœ‰é”™è¯¯ï¼Œè¿˜è¯·æŒ‡å‡ºï¼\n\né‚£ä¹ˆåŠ é”è¿™ä¸ªæ“ä½œï¼Œæ˜¯å¦‚ä½•ä¿è¯å…¶è‡ªèº«çš„åŸå­æ€§å‘¢ï¼Ÿåœ¨åŠ é”çš„é€”ä¸­ä¸ä¼šå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢å—ï¼Ÿ\n\næˆ‘æ‰¾åˆ°äº†ä¸€å¼ èƒ½å¤§æ¦‚è¯´æ˜æ±‡ç¼–åŠ é”è¿‡ç¨‹çš„å›¾ç‰‡ï¼Œå…¶ä¸­movbçš„æ“ä½œå°±æ˜¯å°†alå¯„å­˜å™¨å†™ä¸º0ï¼Œxchgbçš„æ“ä½œæ˜¯å°†alå¯„å­˜å™¨çš„å†…å®¹å’Œå†…å­˜ä¸­mutexé”çš„å€¼è¿›è¡Œäº¤æ¢\n\nå¼€å§‹çš„æ—¶å€™ï¼Œé”è¢«æ­£å¸¸åˆå§‹åŒ–ï¼Œå†…å­˜ä¸­mutexçš„å€¼ä¸º1ï¼ˆé”åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼‰\nçº¿ç¨‹Aå¼€å§‹åŠ é”ï¼Œalå¯„å­˜å™¨å’Œmutexçš„å€¼å‘ç”Ÿäº¤æ¢ï¼Œæ­¤æ—¶å†…å­˜ä¸­çš„mutexä¸º0ï¼Œalä¸º1\nåˆ¤æ–­alä¸ä¸º0ï¼Œä»£è¡¨è·å–é”æˆåŠŸï¼Œçº¿ç¨‹AåŠ é”æˆåŠŸ\nçº¿ç¨‹Bä¹Ÿæ¥ç”³è¯·é”äº†ï¼Œmovbå°†alå¯„å­˜å™¨å†™ä¸º0ï¼Œå†å’Œå†…å­˜ä¸­çš„mutexäº¤æ¢åï¼Œå‘ç°è¿˜æ˜¯0ï¼Œåˆ™ä»£è¡¨é”åœ¨åˆ«äººæ‰‹ä¸Šï¼Œæ­¤æ—¶å°±éœ€è¦æŒ‚èµ·ç­‰å¾…\n\nå‰é¢ä¸€ç›´å¼ºè°ƒï¼Œçº¿ç¨‹æ˜¯æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆç»“æ„å’Œä¸Šä¸‹æ–‡æ•°æ®çš„ï¼Œåœ¨åŠ é”çš„è¿™éƒ¨åˆ†æ±‡ç¼–æ“ä½œä¸­ï¼ŒåŒæ ·å¯èƒ½ä¼šåœ¨ä»»ä½•åœ°æ–¹å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ã€‚åˆ‡æ¢çš„æ—¶å€™ï¼Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡æ•°æ®ï¼ˆå›¾ä¸­å¯„å­˜å™¨çš„çŠ¶æ€ï¼‰ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œéšè¿™ä¸ªçº¿ç¨‹ä¸€èµ·è¢«åˆ‡æ¢èµ°\næ‰€ä»¥çº¿ç¨‹Aè¢«åˆ‡æ¢çš„æ—¶å€™ï¼Œå±äºå®ƒä¸Šä¸‹æ–‡ä¸­é‚£ä¸ªå€¼ä¸º1çš„alå¯„å­˜å™¨ä¹Ÿè¢«åˆ‡èµ°äº†ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œåˆ‡èµ°çš„æ˜¯æ•°æ®ï¼Œalå¯„å­˜å™¨æœ¬èº«ä½œä¸ºç¡¬ä»¶ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼‰\nç”±æ­¤çœ‹æ¥ï¼ŒçœŸæ­£è·å–é”çš„æ“ä½œï¼Œå…¶å®åªæœ‰xchgbä¸€æ¡äº¤æ¢æŒ‡ä»¤æ¥å®Œæˆï¼Œä¿è¯åŠ é”æ“ä½œåªç”±ä¸€æ¡æ±‡ç¼–è¯­å¥å®ç°ï¼Œå°±èƒ½ä¿è¯è¯¥æ“ä½œçš„åŸå­æ€§ï¼\nè§£é”çš„æ–¹æ³•å°±å¾ˆç®€å•äº†ï¼Œmovbå°†1å†™å›mutexå˜é‡å³å¯ï¼Œä¹Ÿæ˜¯ä¸€æ¡æ±‡ç¼–å®Œæˆï¼›è€Œä¸”ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè§£é”æ˜¯ä¸ä¼šæœ‰æ‰§è¡Œæµå’Œä½ æŠ¢çš„ã€‚\n\nå…¶å®åŠ é”è¿œä¸æ­¢ä¸€ç§æ–¹æ³•ï¼Œé”çš„ç§ç±»æœ‰éå¸¸å¤šï¼Œè¿˜æœ‰æ€»çº¿é”ã€æ—‹è½¬é”ç­‰ç­‰ï¼Œæ¯ä¸€ä¸ªé”çš„å®ç°éƒ½ä¸å¤ªä¸€æ ·ï¼ä¸Šé¢æåˆ°çš„ä¸ºäº’æ–¥é”\n\n4.5.2 æ€»çº¿é”ç°åœ¨çš„CPUä¸€èˆ¬éƒ½æœ‰è‡ªå·±çš„å†…éƒ¨ç¼“å­˜ï¼Œæ ¹æ®ä¸€äº›è§„åˆ™å°†å†…å­˜ä¸­çš„æ•°æ®è¯»å–åˆ°å†…éƒ¨ç¼“å­˜ä¸­æ¥ï¼Œä»¥åŠ å¿«é¢‘ç¹è¯»å–çš„é€Ÿåº¦ã€‚ç°åœ¨æœåŠ¡å™¨é€šå¸¸æ˜¯å¤š CPUï¼Œæ›´æ™®éçš„æ˜¯ï¼Œæ¯å—CPUé‡Œæœ‰å¤šä¸ªå†…æ ¸ï¼Œè€Œæ¯ä¸ªå†…æ ¸éƒ½ç»´æŠ¤äº†è‡ªå·±çš„ç¼“å­˜ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¤šçº¿ç¨‹å¹¶å‘å°±ä¼šå­˜åœ¨ç¼“å­˜ä¸ä¸€è‡´æ€§ï¼Œè¿™ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ã€‚\n\næ€»çº¿é”å°±æ˜¯å°†cpuå’Œå†…å­˜ä¹‹é—´çš„é€šä¿¡é”ä½ï¼Œä½¿å¾—åœ¨é”å®šæœŸé—´ï¼Œå…¶ä»–cpuå¤„ç†å™¨ä¸èƒ½æ“ä½œå…¶ä»–å†…å­˜ä¸­æ•°æ®ï¼Œæ•…æ€»çº¿é”å¼€é”€æ¯”è¾ƒå¤§ï¼\næ€»çº¿é”çš„å®ç°æ˜¯é‡‡ç”¨cpuæä¾›çš„LOCK#ä¿¡å·ï¼Œå½“ä¸€ä¸ªcpuåœ¨æ€»çº¿ä¸Šè¾“å‡ºæ­¤ä¿¡å·æ—¶ï¼Œå…¶ä»–cpuçš„è¯·æ±‚å°†è¢«é˜»å¡ï¼Œé‚£ä¹ˆè¯¥cpuåˆ™ç‹¬å å…±äº«å†…å­˜ï¼Œç›¸å½“äºé”ä½äº†\n\nä½•ä¸ºæ€»çº¿ï¼Ÿ\n\nCPUæ€»çº¿æ˜¯æ‰€æœ‰CPUä¸èŠ¯ç‰‡ç»„è¿æ¥çš„ä¸»å¹²é“ï¼Œè´Ÿè´£CPUä¸å¤–ç•Œæ‰€æœ‰éƒ¨ä»¶çš„é€šä¿¡ï¼ŒåŒ…æ‹¬é«˜é€Ÿç¼“å­˜ã€å†…å­˜ã€åŒ—æ¡¥ï¼Œå…¶æ§åˆ¶æ€»çº¿å‘å„ä¸ªéƒ¨ä»¶å‘é€æ§åˆ¶ä¿¡å·ã€é€šè¿‡åœ°å€æ€»çº¿å‘é€åœ°å€ä¿¡å·æŒ‡å®šå…¶è¦è®¿é—®çš„éƒ¨ä»¶ã€é€šè¿‡æ•°æ®æ€»çº¿åŒå‘ä¼ è¾“\n\n5.æ­»é”æ­»é”å°±æ˜¯ä¸€ç§å› ä¸ºä¸¤æ”¾éƒ½ä¸ä¼šé‡Šæ”¾å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œä»è€Œé™·å…¥çš„æ°¸ä¹…ç­‰å¾…çŠ¶æ€\n5.1 æ­»é”æƒ…å†µæ¼”ç¤ºä¸¾ä¸ªä¾‹å­ï¼Œå¼ ä¸‰æ‹¿äº†é”Aï¼Œç”³è¯·é”Bçš„æ—¶å€™ï¼Œå‘ç°é”Bæ— æ³•ç”³è¯·ï¼Œè€Œè¿›å…¥ç­‰å¾…ï¼›æå››æ‹¿äº†é”Bï¼Œæ¥ä¸‹æ¥ä»–æƒ³ç”³è¯·é”Aï¼Œç»“æœå‘ç°å¼ ä¸‰æ‹¿ç€é”Aï¼Œé‚£å°±åªèƒ½è¿›å…¥ç­‰å¾…ã€‚è¿™å°±é™·å…¥äº†ä¸€ä¸ªåƒµå±€ï¼Œå¼ ä¸‰æƒ³è¦æå››çš„ï¼Œæå››æƒ³è¦å¼ ä¸‰çš„ï¼Œè°éƒ½ä¸è®©è°\n#include&lt;iostream&gt;#include&lt;string.h&gt;#include&lt;signal.h&gt;#include&lt;pthread.h&gt;#include&lt;thread&gt;#include&lt;unistd.h&gt;#include&lt;sys/types.h&gt;#include&lt;sys/syscall.h&gt;using namespace std;pthread_mutex_t m1;//é”1pthread_mutex_t m2;//é”2void* func1(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m1);        pthread_mutex_lock(&amp;m2);        cout &lt;&lt; &quot;func1 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;void* func2(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m2);        pthread_mutex_lock(&amp;m1);        cout &lt;&lt; &quot;func2 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;int main()&#123;    pthread_mutex_init(&amp;m1,nullptr);    pthread_mutex_init(&amp;m2,nullptr);    pthread_t t1,t2;    pthread_create(&amp;t1,nullptr,func1,(void*)&quot;t1&quot;);    pthread_create(&amp;t2,nullptr,func2,(void*)&quot;t2&quot;);    //åˆ†ç¦»    pthread_detach(t1);    pthread_detach(t2);    while(1)    &#123;        cout &lt;&lt; &quot;main running...&quot; &lt;&lt;endl;        sleep(1);    &#125;    pthread_mutex_destroy(&amp;m1);    pthread_mutex_destroy(&amp;m2);    return 0;&#125;\n\nä¸Šé¢çš„è¿™ä¸ªä»£ç ä¾¿èƒ½æ¨¡æ‹Ÿå‡ºè¿™ä¸ªæƒ…å†µï¼Œçº¿ç¨‹1å…ˆè¦äº†é”1ï¼Œå†è¦é”2ï¼›çº¿ç¨‹2å…ˆè¦é”2å†è¦é”1ï¼Œä»–ä»¬ä¿©å°±å®¹æ˜“æ‰“èµ·æ¥ï¼Œé€ æˆæ­»é”ã€‚\nè¿è¡Œä»£ç çš„æ—¶å€™æˆ‘ä»¬å´å‘ç°ï¼Œä¼¼ä¹å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œçº¿ç¨‹1å¥½åƒè¿˜æ˜¯æˆåŠŸæ‹¿åˆ°äº†ä¿©æŠŠé”ï¼Œå¹¶è¿è¡Œäº†èµ·æ¥\n[muxue@bt-7274:~/git/linux/code/22-12-23_çº¿ç¨‹æ­»é”]$ ./testmain running...func1 is running... t1func1 is running... t1main running...func1 is running... t1main running...func1 is running... t1main running...\n\né‚£æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æ‰§è¡Œå…¶ä»–ä¸€äº›å·¥ä½œï¼Œä»è€Œå°†çº¿ç¨‹1å’Œ2ç”³è¯·é”çš„æ—¶é—´é”™å¼€\nå°†ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ï¼Œåˆ©ç”¨usleepè®©ä¸¤ä¸ªçº¿ç¨‹ä¼‘çœ ä¸åŒæ—¶é—´ï¼Œç»“æœå°±ä¸åŒäº†\nvoid* func1(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m1);        usleep(200);        pthread_mutex_lock(&amp;m2);        cout &lt;&lt; &quot;func1 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;void* func2(void*arg)&#123;    while(1)    &#123;        pthread_mutex_lock(&amp;m2);        usleep(300);        pthread_mutex_lock(&amp;m1);        cout &lt;&lt; &quot;func2 is running... &quot; &lt;&lt;(const char*)arg&lt;&lt;endl;        pthread_mutex_unlock(&amp;m1);        pthread_mutex_unlock(&amp;m2);    &#125;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶åªæœ‰ä¸»çº¿ç¨‹åœ¨è¿è¡Œï¼Œçº¿ç¨‹t1å’Œt2å‡ºç°äº†æ­»é”ï¼\n[muxue@bt-7274:~/git/linux/code/22-12-23_çº¿ç¨‹æ­»é”]$ ./testmain running...main running...main running...main running...\n\n\n5.2 æ­»é”çš„æ¡ä»¶\näº’æ–¥æ¡ä»¶ï¼šæŸä»½èµ„æºåŒä¸€æ—¶é—´åªèƒ½ç”±ä¸€ä¸ªæ‰§è¡Œæµè®¿é—®\nè¯·æ±‚ä¸ä¿æŒï¼šä¸€ä¸ªæ‰§è¡Œæµå› è¯·æ±‚æŸç§èµ„æºè¿›å…¥é˜»å¡ç­‰å¾…ï¼Œè€Œä¸é‡Šæ”¾è‡ªå·±çš„èµ„æºï¼ˆå¥½æ¯”ä¸Šé¢ä»£ç ä¾‹å­ä¸­ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¸é‡Šæ”¾è‡ªå·±çš„é”ï¼Œåˆæƒ³è¦åˆ«äººçš„é”ï¼‰\nä¸å‰¥å¤ºæ¡ä»¶ï¼šä¸€ä¸ªæ‰§è¡Œæµå·²è·å¾—çš„èµ„æºï¼Œåœ¨æœªä½¿ç”¨ä¹‹å‰ä¸èƒ½è¢«å‰¥å¤ºï¼ˆéƒ¨åˆ†é”æ˜¯å…è®¸è¢«å‰¥å¤ºçš„ï¼‰\nå¾ªç¯ç­‰å¾…ï¼šè‹¥å¹²æ‰§è¡Œæµä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯ç­‰å¾…èµ„æºçš„çŠ¶æ€\n\nä¸€æŠŠé”ä¹Ÿèƒ½é€ æˆæ­»é”å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼\npthread_mutex_lock(&amp;m1);pthread_mutex_lock(&amp;m1);//ä¸¤æ¬¡ç”³è¯·åŒä¸€æŠŠé”\n\nå¦‚æœæœ‰äººå†™å‡ºè¿™ç§bugä»£ç ï¼Œé‚£å°±ä¼šå‡ºç°ä¸€æŠŠé”æŠŠè‡ªå·±æ­»é”äº†ï¼›æ­»é”æœ¬æ¥å°±æ˜¯ä»£ç çš„bugï¼Œæ‰€ä»¥è¿™ç§ä½çº§é”™è¯¯ä¹Ÿæ˜¯æ­»é”çš„æƒ…å†µä¹‹ä¸€ğŸ˜‚\n5.3 é¿å…æ­»é”é¿å…æ­»é”ï¼Œå…¶ä¸­æœ€ç®€å•æ˜äº†çš„åŠæ³•ï¼Œå°±æ˜¯ç ´åä¸Šé¢æåˆ°çš„æ­»é”çš„4ä¸ªæ¡ä»¶ï¼›å…¶ä¸­äº’æ–¥æ¡ä»¶æ²¡å•¥å¥½åŠæ³•ç ´åï¼ˆé™¤éä½ ä¸åŠ é”ï¼‰ï¼Œæ›´ä¸»è¦çš„æ˜¯çœ‹å¦å¤–3ä¸ªæ¡ä»¶æ˜¯å¦èƒ½ç ´åï¼\n\nä¿æŒåŠ é”é¡ºåºä¸€è‡´ï¼šä¸è¦å‡ºç°ä¸Šé¢ä»£ç ä¸­çš„çº¿ç¨‹aå…ˆç”³è¯·é”1ï¼Œçº¿ç¨‹bå…ˆç”³è¯·é”2çš„æƒ…å†µã€‚åœ¨ä¸åŒçš„æ‰§è¡Œæµä¸­ï¼ŒæŒ‰ç›¸åŒçš„é¡ºåºç”³è¯·é”ï¼ˆæ¯”å¦‚çº¿ç¨‹aå’Œbéƒ½æ˜¯æŒ‰é”1&#x2F;2çš„é¡ºåºç”³è¯·çš„ï¼‰ä¸€å®šç¨‹åº¦ä¸Šèƒ½ç ´åè¯·æ±‚ä¸ä¿æŒæ¡ä»¶\né™ä½åŠ é”çš„ç²’åº¦ï¼šé”ä¿æŠ¤çš„åŒºåŸŸå˜å°ï¼ŒåŠ é”çš„ç²’åº¦å‡å°ï¼Œèƒ½ä¸€å®šç¨‹åº¦ä¸Šé¿å…é”æœªé‡Šæ”¾\nèµ„æºä¸€æ¬¡æ€§åˆ†é…ï¼šå‡å°‘ä¸´æ—¶èµ„æºåˆ†å¼€ç»™çš„æƒ…å†µ\nå…è®¸æŠ¢å ï¼šçº¿ç¨‹ä¹‹é—´ä¾é ä¼˜å…ˆçº§æŠ¢å¤ºé”ï¼Œè¿™ç§æƒ…å†µå°±æ˜¯é”å…è®¸è¢«å‰¥å¤º\n\n\n6.çº¿ç¨‹å®‰å…¨çº¿ç¨‹å®‰å…¨ï¼šå¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡ŒåŒä¸€æ®µä»£ç çš„æ—¶å€™ï¼Œä¸ä¼šå‡ºç°ä¸åŒçš„ç»“æœ\nçº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µï¼š\n\nä¸ä¿æŠ¤ä¸´ç•Œèµ„æº\nåœ¨å¤šçº¿ç¨‹æ“ä½œä¸­è°ƒç”¨ä¸å¯é‡å…¥å‡½æ•°ï¼ˆæ¦‚å¿µè§linuxä¿¡å·éƒ¨åˆ†ï¼‰\nè¿”å›æŒ‡å‘é™æ€å˜é‡çš„æŒ‡é’ˆçš„å‡½æ•°\n\nçº¿ç¨‹å®‰å…¨ï¼š\n\næ¯ä¸ªçº¿ç¨‹åªæ“ä½œå±€éƒ¨å˜é‡ï¼Œæˆ–è€…åªå¯¹å…¨å±€ã€é™æ€å˜é‡åªè¯»ä¸å†™\næ¥å£å¯¹çº¿ç¨‹æ¥è¯´æ˜¯åŸå­æ“ä½œï¼ˆè¢«é”ä¿æŠ¤ï¼‰\nå¤šä¸ªçº¿ç¨‹åˆ‡æ¢ä¸ä¼šä½¿å‡½æ•°æ¥å£çš„ç»“æœå‡ºç°äºŒä¹‰æ€§\nå¤šçº¿ç¨‹æ“ä½œä¸è°ƒç”¨ä¸å¯é‡å…¥å‡½æ•°\n\næ³¨æ„ï¼Œç»å¤§å¤šæ•°çš„ç³»ç»Ÿè‡ªå¸¦çš„åº“ï¼ˆæ¯”å¦‚C++çš„STLåº“ï¼‰éƒ½æ˜¯ä¸å¯é‡å…¥çš„\n\nä¸å¯é‡å…¥æ˜¯å‡½æ•°çš„ä¸€ç§æ€§è´¨ï¼Œå¹¶ä¸æ˜¯å®ƒçš„ç¼ºç‚¹ï¼å¦‚æœä¸€ä¸ªåº“å‡½æ•°æ˜æ˜å‘ŠçŸ¥ä½ äº†æˆ‘æ˜¯ä¸å¯é‡å…¥çš„ï¼Œä½ è¿˜ä¸åŠ ä¿æŠ¤çš„åœ¨å¤šçº¿ç¨‹æ“ä½œä¸­è°ƒç”¨å®ƒï¼Œé‚£ä¹ˆè¿™æ®µä»£ç æ˜¯æœ‰bugçš„ï¼Œå¹¶ä¸æ˜¯åº“å‡½æ•°æœ¬èº«æœ‰é—®é¢˜\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘æ—‹è½¬é” | è¯»å†™é”","url":"/posts/822375107/","content":"åœ¨ä¹‹å‰çš„çº¿ç¨‹å­¦ä¹ ä¸­ï¼Œç”¨åˆ°çš„é”éƒ½æ˜¯æŒ‚èµ·ç­‰å¾…é”ï¼Œå¦‚æœç”³è¯·ä¸åˆ°é”ï¼Œé‚£å°±ä¼šåœ¨é”ä¸­ç­‰å¾…ï¼›\nè‡ªæ—‹é”åˆ™ä¸å¤§ç›¸ä¼¼\n\n\n[TOC]\n1.è‡ªæ—‹é”1.1 æ¦‚å¿µè‡ªæ—‹é”æ˜¯ä¸€ä¸ªè½®è¯¢æ£€æµ‹é”ï¼Œå…¶æ£€æµ‹æœºåˆ¶å¹¶ä¸æ˜¯æŒ‚èµ·ç­‰å¾…ï¼Œè€Œæ˜¯ä¸æ–­çš„è¯¢é—®é”æœ‰æ²¡æœ‰ç©ºé—²ï¼›ç±»ä¼¼äºä¸€ä¸ªwhile(1)å¾ªç¯çš„trylock()\nç”±äºå…¶éœ€è¦ä¸æ–­çš„è½®è¯¢æ£€æµ‹ï¼Œæ‰€ä»¥ä¼šå ç”¨ä¸€å®šçš„CPUèµ„æºï¼›å¦‚æœçº¿ç¨‹è¾ƒå¤šï¼Œå°±å®¹æ˜“ç»™cpué€ æˆè´Ÿè·ã€‚\nä½†æ˜¯è‡ªæ—‹é”æ— é¡»å”¤é†’æŒ‚èµ·ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œå…¶æ¶ˆè€—è¾ƒå°ã€‚\næ€»ç»“ä¸€ä¸‹ï¼š\n\nè‡ªæ—‹é”é€‚åˆç«äº‰ä¸æ¿€çƒˆï¼Œä¸”ä¸´ç•ŒåŒºè¾ƒå°ï¼ˆå‘†çš„æ—¶é—´çŸ­ï¼‰çš„æƒ…å†µ\nè‡ªæ—‹é”ä¸é€‚åˆå¤§é‡çº¿ç¨‹ï¼Œä¸´ç•ŒåŒºé•¿çš„æƒ…å†µ\n\nè‡ªæ—‹é”çš„ä¼˜ç¼ºç‚¹åè¿‡æ¥ï¼Œä¾¿æ˜¯æŒ‚èµ·ç­‰å¾…é”çš„ä¼˜ç¼ºç‚¹äº†ã€‚æˆ‘ä»¬è¦æ ¹æ®ä¸åŒåœºæ™¯ï¼Œæ­£ç¡®é€‰æ‹©é”çš„ç±»å‹\n1.2 æ¥å£ç›¸å…³æ¥å£å’Œmutexéƒ½æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºä½¿ç”¨çš„æ•ˆæœäº†\n1.2.1 pthread_spin_init&#x2F;destroy#include &lt;pthread.h&gt;int pthread_spin_destroy(pthread_spinlock_t *lock);int pthread_spin_init(pthread_spinlock_t *lock, int pshared);\n\n1.2.2 pthread_spin_lockè‡ªæ—‹é”åŒæ ·æœ‰trylockæ¥å£ï¼Œç”¨äºåˆ¤æ–­é”æ˜¯å¦å°±ç»ª\n#include &lt;pthread.h&gt;int pthread_spin_lock(pthread_spinlock_t *lock);int pthread_spin_trylock(pthread_spinlock_t *lock);\n\n1.2.3 pthread_spin_unlock#include &lt;pthread.h&gt;int pthread_spin_unlock(pthread_spinlock_t *lock);\n2.è¯»å†™é”æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€ä»½configé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¼šæœ‰éå¸¸å¤šçš„çº¿ç¨‹è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯å¾ˆå°‘è¿›è¡Œä¿®æ”¹å’Œå†™å…¥ã€‚\næ­¤æ—¶æˆ‘ä»¬å¦‚æœå¯¹é…ç½®æ–‡ä»¶çš„è¯»å–è¿›è¡ŒåŠ é”ï¼Œå°±å®¹æ˜“å¯¼è‡´æ•ˆç‡é—®é¢˜ï¼Œä¼—å¤šçº¿ç¨‹ä¸æ–­è¢«é˜»å¡ï¼Œäº§ç”Ÿæ€§èƒ½æŸå¤±ã€‚\næ­¤æ—¶ï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ªä¸“é—¨çš„è¯»å†™é”ï¼Œå¯¹è¯»è€…å’Œå†™è€…åŠ ä¸åŒçš„é”ï¼Œåœ¨æå‡è¯»å–æ€§èƒ½çš„åŒæ—¶ï¼Œä¿è¯å†™å…¥ä¸å†²çª\n2.1 è¯»è€…å†™è€…çš„å…³ç³»å†™ç€å’Œå†™ç€ä¹‹é—´ä¸ç”¨å¤šè¯´ï¼Œè‚¯å®šæ˜¯äº’æ–¥å…³ç³»ï¼›\nè¯»è€…å’Œå†™è€…ä¹‹é—´ä¹Ÿæ˜¯äº’æ–¥å…³ç³»ï¼Œåœ¨å†™å…¥çš„æ—¶å€™ï¼Œä¸èƒ½è¿›è¡Œè¯»å–ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°äºŒä¹‰æ€§é—®é¢˜ï¼›\n\nå†™è€…å†™å…¥äº†ä¸€ä¸ªaï¼Œçº¿ç¨‹ç”²æ¥è¯»å–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯a\nå†™è€…ç»§ç»­å†™å…¥äº†bï¼Œçº¿ç¨‹ä¹™æ¥è¯»å–ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ab\n\nè¿™æ˜¯å› ä¸ºå†™è€…çš„å†™å…¥è¿˜æ²¡æœ‰å®Œæˆï¼Œå¯¼è‡´ç”²ä¹™è¯»è€…ä¼šè·å–åˆ°å®Œå…¨ä¸åŒçš„ç»“æœï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼›\nè¯»è€…å’Œè¯»è€…ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¯»è€…å¹¶ä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œä¹Ÿä¸ä¼šå–èµ°æ•°æ®ï¼Œå…¶å­˜åœ¨å¯¹ä¸´ç•Œèµ„æºæ²¡æœ‰å½±å“ã€‚\n\n2.2 æ¥å£2.2.1 init&#x2F;destroyè¯»å†™é”åªéœ€è¦åˆå§‹ä¸€ä¸ªé”å°±è¡Œäº†ï¼Œæ— é¡»å¯¹è¯»è€…å†™è€…åˆå§‹åŒ–ä¸¤ä¸ªä¸åŒçš„é”\n#include &lt;pthread.h&gt;int pthread_rwlock_destroy(pthread_rwlock_t *rwlock);int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock,\t\t\t\t\tconst pthread_rwlockattr_t *restrict attr);\n\n2.2.2 è¯»è€…åŠ é”è¯»å†™é”çš„è¯»è€…é”&#x2F;å†™è€…é”æ˜¯åˆ†å¼€çš„ï¼Œæˆ‘ä»¬è¦é’ˆå¯¹ä¸åŒçš„çº¿ç¨‹è°ƒç”¨ä¸åŒçš„é”\n#include &lt;pthread.h&gt;int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock);int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock);\n\nä½†æ˜¯è§£é”çš„æ¥å£æ˜¯ä¸€æ ·çš„\n#include &lt;pthread.h&gt;int pthread_rwlock_unlock(pthread_rwlock_t *rwlock);\n\n2.2.3 å†™è€…åŠ é”#include &lt;pthread.h&gt;int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock);int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock);\n\n2.2.4 è®¾ç½®é”çš„å±æ€§\nå‚è€ƒ PTHREAD_RWLOCKATTR_SETKIND_NP - Linuxæ‰‹å†Œé¡µ\n\nè¯»å†™é”å¯ä»¥å…è®¸æˆ‘ä»¬è®¾ç½®æ˜¯è¯»è€…ä¼˜å…ˆè¿˜æ˜¯å†™è€…ä¼˜å…ˆã€‚å¦‚æœé‡‡ç”¨é»˜è®¤çš„å±æ€§ï¼Œå¯èƒ½ä¼šå‡ºç°è¯»è€…ä¸€ç›´åœ¨è¯»ï¼Œå†™è€…æ²¡æœ‰åŠæ³•å†™å…¥çš„æƒ…å†µï¼ˆæ‰“å°é”™ä½æ˜¯æ­£å¸¸æƒ…å†µï¼‰\n[muxue@bt-7274:~/git/linux/code/23-01-20 rwlock]$ ./testreader [140484801697536]reader [140484801697536] 0reader [140484793304832]reader [reader [140484784912128140484793304832]reader [140484784912128] 0] 0reader [140484759734016]reader [140484759734016] 0reader [140484776519424]\n\næ­¤æ—¶å°±å‡ºç°äº†å†™è€…é¥¥é¥¿é—®é¢˜ï¼Œå†™è€…æ— æ³•è®¿é—®ä¸´ç•Œèµ„æºï¼Œé¥¿æ­»äº†ğŸ˜‚\næˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè®¾ç½®è¯»å†™é”çš„å±æ€§\nint pthread_rwlockattr_setkind_np(pthread_rwlockattr_t *attr, int pref); /* pref å…±æœ‰ 3 ç§é€‰æ‹©PTHREAD_RWLOCK_PREFER_READER_NP (é»˜è®¤è®¾ç½®) è¯»è€…ä¼˜å…ˆï¼Œå¯èƒ½ä¼šå¯¼è‡´å†™è€…é¥¥é¥¿æƒ…å†µPTHREAD_RWLOCK_PREFER_WRITER_NP å†™è€…ä¼˜å…ˆï¼Œç›®å‰æœ‰ BUGï¼Œå¯¼è‡´è¡¨ç°è¡Œä¸ºå’Œ PTHREAD_RWLOCK_PREFER_READER_NP ä¸€è‡´PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP å†™è€…ä¼˜å…ˆï¼Œä½†å†™è€…ä¸èƒ½é€’å½’åŠ é”ï¼Œé¿å…æ­»é”*/\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹\npthread_rwlock_t rwlock;//é”pthread_rwlockattr_t attr;//å±æ€§pthread_rwlockattr_init(&amp;attr);//åˆå§‹åŒ–å±æ€§pthread_rwlockattr_setkind_np(&amp;attr, PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP);//è®¾ç½®é”çš„å±æ€§ä¸ºå†™è€…ä¼˜å…ˆpthread_rwlock_init(&amp;rwlock, &amp;attr);//åˆå§‹åŒ–å¹¶è®¾ç½®è¯»å†™é”çš„å±æ€§\n\n2.3 ä»£ç #include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;pthread.h&gt;using namespace std;volatile int board = 0;//ä¸´ç•Œèµ„æºpthread_rwlock_t rw;//å…¨å±€è¯»å†™é”void *reader(void* args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;    //sleep(1);    while(true)    &#123;        pthread_rwlock_rdlock(&amp;rw);        cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;] &quot; &lt;&lt; board &lt;&lt; endl;        pthread_rwlock_unlock(&amp;rw);        usleep(110);    &#125;&#125;void *writer(void *args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    //sleep(1);    while(true)    &#123;        pthread_rwlock_wrlock(&amp;rw);        board++;        cout &lt;&lt; &quot;writer [&quot; &lt;&lt; pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;        pthread_rwlock_unlock(&amp;rw);        usleep(100);    &#125;&#125;int main()&#123;    pthread_rwlock_init(&amp;rw, nullptr);    pthread_t r1,r2,r3,r4,r5,r6, w1,w2;    pthread_create(&amp;r1, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r2, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r3, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r4, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r5, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;r6, nullptr, reader, (void*)&quot;reader&quot;);    pthread_create(&amp;w1, nullptr, writer, (void*)&quot;writer&quot;);    pthread_create(&amp;w2, nullptr, writer, (void*)&quot;writer&quot;);    pthread_join(r1, nullptr);    pthread_join(r2, nullptr);    pthread_join(r3, nullptr);    pthread_join(r4, nullptr);    pthread_join(r5, nullptr);    pthread_join(r6, nullptr);    pthread_join(w1, nullptr);    pthread_join(w2, nullptr);    pthread_rwlock_destroy(&amp;rw);    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\nreader [140067523458816] 7086reader [140067548636928] 7086writer [140067515066112]writer [140067506673408]reader [140067540244224] 7088reader [140067565422336] 7088reader [140067557029632] 7088reader [140067531851520] 7088reader [140067523458816] 7088writer [140067515066112]writer [140067506673408]reader [140067548636928] 7090writer [140067515066112]reader [140067523458816] 7091writer [140067506673408]reader [140067548636928] 7092reader [140067557029632] 7092\n\nå¯ä»¥çœ‹åˆ°è¯»è€…çš„çº¿ç¨‹è¾ƒå¤šï¼Œä¸”èƒ½å¤Ÿæ­£ç¡®è¯»å–æ•°æ®ã€‚\nå¦‚æœåœ¨è¯»è€…çš„whiileä¸­åŠ ä¸Šsleep(10)\nvoid *reader(void* args)&#123;    const char *name = static_cast&lt;const char *&gt;(args);    cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;]&quot;&lt;&lt; endl;    while(true)    &#123;        pthread_rwlock_rdlock(&amp;rw);        cout &lt;&lt; &quot;reader [&quot;&lt;&lt;pthread_self() &lt;&lt;&quot;] &quot; &lt;&lt; board &lt;&lt; endl;        sleep(10);//ç¡        pthread_rwlock_unlock(&amp;rw);        usleep(110);//é¿å…å‡ºç°åªæœ‰ä¸€ä¸ªçº¿ç¨‹å·¥ä½œ    &#125;&#125;\n\nèƒ½å¤Ÿçœ‹åˆ°å¤šä¸ªè¯»è€…ä¹‹é—´ä¸å†²çªï¼Œä¸ä¼šå‡ºç°è¯»è€…Aç”³è¯·é”åï¼Œè¯»è€…Bå°±æ— æ³•è®¿é—®ä¸´ç•ŒåŒºçš„æƒ…å†µã€‚å¦‚æœæ˜¯äº’æ–¥é”ï¼Œè¯»è€…Aç”³è¯·ä¹‹åè¿›å…¥ä¼‘çœ ï¼ŒBå°±æ— æ³•ç”³è¯·è¯¥é”ã€‚\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹"]},{"title":"ã€Linuxã€‘popen pcloseæ¥å£ä»‹ç»","url":"/posts/2190670283/","content":"æœ¬ç¯‡æ–‡ç« ç®€å•è®²è¿°äº†cè¯­è¨€æ¥å£popen/pcloseçš„ç”¨æ³•\n\n\n\n1.å‡½æ•°ä½œç”¨å‡½æ•°å®šä¹‰å¦‚ä¸‹\n#include &lt;stdio.h&gt;FILE *popen(const char *command, const char *type);int pclose(FILE *stream);\n\npopenå‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œforkä¸€ä¸ªå­è¿›ç¨‹ï¼Œå…³é—­ç®¡é“çš„ä¸ä½¿ç”¨ç«¯ï¼Œé€šè¿‡execå‡½æ•°æ‰§è¡Œä¸€ä¸ªshellå‘½ä»¤ï¼Œç­‰å¾…å‘½ä»¤ç»ˆæ­¢ã€‚å¹¶å°†å‘½ä»¤çš„è¾“å‡ºç»“æœé€šè¿‡ç®¡é“è¿”å›ç»™å½“å‰çš„è¿›ç¨‹ï¼›\n1.1 popenpopenå‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªç®¡é“ï¼Œforkåè°ƒç”¨shellæ¥æ‰“å¼€è¿›ç¨‹ã€‚ç”±äºç®¡é“çš„å®šä¹‰æ˜¯å•å‘çš„ï¼Œç¬¬äºŒä¸ªå‚æ•°typeåªèƒ½æŒ‡å®šè¯»æˆ–å†™ï¼Œä¸èƒ½åŒæ—¶æŒ‡å®šè¯»å’Œå†™ï¼›\næ‰€å¾—åˆ°çš„ç®¡é“ç›¸åº”åœ°æ˜¯åªè¯»æˆ–åªå†™çš„\n   The  popen()  function opens a process by creating a pipe, forking, and invoking the shell.  Since a pipe is by definition unidirectional, the type argument may specify only reading or writing, not both; the resulting stream is correspondingly read-only or write-only.\n\nç®€å•è¯´æ¥ï¼Œpopenä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬forkåˆ›å»ºå­è¿›ç¨‹å’Œä¸€ä¸ªç®¡é“ï¼Œå°†æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°commandåœ¨shellä¸­æ‰§è¡Œåï¼Œå°†è¿”å›å€¼ä»¥ç®¡é“æ–‡ä»¶çš„å½¢å¼å‘é€ç»™è°ƒç”¨æ–¹ã€‚\nå¦‚æœè°ƒç”¨forkæˆ–pipeå¤±è´¥ï¼Œæˆ–è€…ä¸èƒ½åˆ†é…å†…å­˜ï¼Œå°†è¿”å›NULLï¼›å¦åˆ™è¿”å›æ ‡å‡†I&#x2F;Oæµã€‚popen()æ²¡æœ‰ä¸ºå†…å­˜åˆ†é…å¤±è´¥è®¾ç½®errnoå€¼ã€‚å¦‚æœè°ƒç”¨fork()æˆ–pipe()æ—¶å‡ºç°é”™è¯¯ï¼Œerrnoè¢«è®¾ä¸ºç›¸åº”çš„é”™è¯¯ç±»å‹ã€‚å¦‚æœtypeå‚æ•°ä¸åˆæ³•ï¼Œerrnoå°†è¿”å›EINVAL\n1.2 pclose\nè¿™ä¸ªå‡½æ•°æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ˜¯ç”¨æ¥å…³æ‰popenæ‰“å¼€çš„æ–‡ä»¶çš„ï¼ˆå³popençš„è¿”å›å€¼ï¼‰\n\nä½†æ˜¯ï¼Œå®ƒçš„è¿”å›å€¼å¯æœ‰è¯´åˆ°äº†ï¼Œå…¶è¿”å›å€¼å°±æ˜¯æˆ‘ä»¬ç»ˆç«¯æ“ä½œçš„é€€å‡ºçŠ¶æ€ï¼Œä»¥æ ‡è¯†å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ\nä½†æ˜¯è¿™ä¸ªè¿”å›æ˜¯é€šè¿‡wait4å¾—åˆ°çš„ï¼Œå¦‚æœwait4å‡ºç°é”™è¯¯ï¼Œå°±ä¼šè¿”å›-1å¹¶è®¾ç½®errno\nThe pclose() function returns -1 if wait4(2) returns an error, or some other error is detected.  In the event of an error, these functions set errnro to indicate the cause of the error.\n\nè¿™é‡Œè¿˜å‡ºç°äº†ä¸€ä¸ªæ–°çš„é”™è¯¯ç errnroï¼Œä½†æ˜¯ç»è¿‡æˆ‘çš„ä¸€ç•ªç™¾åº¦ï¼Œæ²¡æœ‰å‘ç°ä»»ä½•åœ°æ–¹æœ‰å¯¹errnroçš„è¯´æ˜ï¼Œmanæ‰‹å†Œä¸‹æ–¹åˆå˜æˆäº†errno\nIf pclose() cannot obtain the child status, errno is set to ECHILD.\n\nè€Œä¸”ç¼–è¯‘æ‰§è¡Œçš„æ—¶å€™ï¼Œerrnroæ˜¯ä¼šæŠ¥é”™çš„ï¼Œæ‰€ä»¥å§‘ä¸”è®¤ä¸ºè¿™é‡Œæ˜¯manæ‰‹å†Œå‡ºé”™äº†ï¼\n\nerrnoæ‰æ˜¯æ­£ç¡®çš„\nint ret = pclose(f);printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));\n\n\n2.ä»£ç ç¤ºä¾‹2.1 popenè¯»ä»¥ä¸‹æ–¹æœ€ç®€å•çš„lså‘½ä»¤ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä»¥è¯»æ–¹å¼æ‰“å¼€ï¼Œpopenå°±ä¼šå°†lsçš„æ‰§è¡Œç»“æœå†™åˆ°æ–‡ä»¶é‡Œé¢è¿”å›ç»™æˆ‘ä»¬\n#include &lt;stdio.h&gt; int main()&#123;    FILE *f;    char readBuf[1024] = &#123;0&#125;;    f = popen(&quot;ls&quot;,&quot;r&quot;);    fread(readBuf,1024,1,f);    printf(&quot;%s\\n&quot;,readBuf);    pclose(f);    return 0;&#125;\n\nç¼–è¯‘åæ‰§è¡Œç»“æœå¦‚ä¸‹\n$ ./testtesttest.cpp    \n\n2.2 popenå†™å’Œè¯»ä¸åŒï¼Œå¦‚æœç”¨å†™æ–¹å¼æ‰§è¡Œpopenï¼Œå‘½ä»¤çš„è¾“å‡ºç»“æœä¼šç›´æ¥æ‰“å°åˆ°å±å¹•ä¸Š\nvoid test2(FILE* f)&#123;    f = popen(&quot;ls&quot;,&quot;w&quot;);    int ret = pclose(f);    printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));&#125;\n\nmakefile  test  test.cpppclose: 0 | Success\n\nè¿™é‡Œæˆ‘è¿˜ä»¥ä¸ºåç»­å¯ä»¥æ¥ç€å¾€ç®¡é“é‡Œé¢å†™æ•°æ®ï¼Œè®©ä»–ç»§ç»­æ‰§è¡Œå‘½ä»¤\nvoid test2(FILE* f)&#123;    f = popen(&quot;ls&quot;,&quot;w&quot;);    // ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®    strcpy(readBuf,&quot;ls -l&quot;);    printf(&quot;cmd: %s\\n&quot;,readBuf);    // å†™é“ç®¡é“æ–‡ä»¶ä¸­    fwrite(readBuf,1024,1,f);    int ret = pclose(f);    printf(&quot;pclose: %d | %s\\n&quot;,ret,strerror(errno));&#125;\n\nå¯æµ‹è¯•çš„ç»“æœå‘Šè¯‰æˆ‘ï¼Œå¹¶ä¸è¡Œ\ncmd: ls -lmakefile  test  test.cpppclose: 0 | Success\n\nç½‘ä¸Šçš„èµ„æ–™å¤§å¤šæ•°éƒ½æ˜¯åªæ¼”ç¤ºäº†ræ–¹æ³•ï¼Œæˆ‘ä¸ç¡®å®šè¿™é‡Œæ˜¯ä¸æ˜¯æˆ‘å†™çš„ä»£ç æœ‰é—®é¢˜ï¼Œè¿˜æ˜¯è¯´æœ¬æ¥å°±æ˜¯è¿™æ ·çš„ã€‚æš‚ä¸”åœç•™åœ¨è¿™é‡Œå§ï¼\n3.ä¼˜ç¼ºç‚¹ä¼˜ç‚¹æ˜¯ï¼šç”±äºæ‰€æœ‰ç±»Unixç³»ç»Ÿä¸­å‚æ•°æ‰©å±•éƒ½æ˜¯ç”±shellå®Œæˆçš„ï¼Œæ‰€æœ‰å®ƒè¿è¡Œæˆ‘ä»¬é€šè¿‡popenå®Œæˆéå¸¸å¤æ‚çš„shellå‘½ä»¤ã€‚è€Œå…¶ä»–ä¸€äº›åˆ›å»ºè¿›ç¨‹çš„å‡½æ•°ï¼ˆå¦‚execlï¼‰è°ƒç”¨èµ·æ¥å°±å¤æ‚çš„å¤šï¼Œå› ä¸ºè°ƒç”¨è¿›ç¨‹å¿…é¡»è‡ªå·±å®Œæˆshellæ‰©å±•ã€‚\nç¼ºç‚¹æ˜¯ï¼šé’ˆå¯¹æ¯ä¸ªpopenè°ƒç”¨ï¼Œä¸ä»…è¦å¯åŠ¨ä¸€ä¸ªè¢«è¯·æ±‚çš„ç¨‹åºï¼Œè¿˜è¦å¯åŠ¨ä¸€ä¸ªshell,å³æ¯ä¸ªpopenè°ƒç”¨å°†å¯åŠ¨ä¸¤ä¸ªè¿›ç¨‹ã€‚ä»èŠ‚çœç³»ç»Ÿèµ„æºçš„è§’åº¦æ¥çœ‹ï¼Œpopenå‡½æ•°çš„è°ƒç”¨æˆæœ¬ç•¥é«˜ï¼Œå¹¶ä¸”å¯¹ç›®æ ‡å‘½ä»¤çš„è°ƒç”¨æ¯”æ­£å¸¸æ–¹å¼æ…¢ä¸€äº›ï¼ˆé€šè¿‡pipeæ”¹è¿›ï¼‰ã€‚\nendå…³äºpopenå’Œpcloseçš„ç®€å•ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","Cè¯­è¨€"]},{"title":"ã€Linuxã€‘æ¥å†™ä¸€ä¸ªudpçš„æœåŠ¡ç«¯+å®¢æˆ·ç«¯","url":"/posts/368672249/","content":"æ¥å†™ä¸€ä¸ªudpçš„ä»£ç \n\n\n1.socketç¼–ç¨‹æ¥å£#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;arpa/inet.h&gt;// åˆ›å»º socket æ–‡ä»¶æè¿°ç¬¦ (TCP/UDP, å®¢æˆ·ç«¯ + æœåŠ¡å™¨)int socket(int domain, int type, int protocol);// ç»‘å®šç«¯å£å· (TCP/UDP, æœåŠ¡å™¨)      int bind(int socket, const struct sockaddr *address,         socklen_t address_len);// å¼€å§‹ç›‘å¬socket (TCP, æœåŠ¡å™¨)int listen(int socket, int backlog);// æ¥æ”¶è¯·æ±‚ (TCP, æœåŠ¡å™¨)int accept(int socket, struct sockaddr* address,         socklen_t* address_len);// å»ºç«‹è¿æ¥ (TCP, å®¢æˆ·ç«¯)int connect(int sockfd, const struct sockaddr *addr,         socklen_t addrlen);\n\nlinuxä¸‹ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œsocketæ¥å£ä¹Ÿä¸ä¾‹å¤–ã€‚å…¶è¿”å›å€¼æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªfdæ–‡ä»¶æè¿°ç¬¦ï¼Œè¿™æ ·æˆ‘ä»¬å¯¹ç½‘ç»œçš„å‘é€&#x2F;æ¥æ”¶æ“ä½œï¼Œå°±è½¬æ¢æˆäº†å¯¹æ–‡ä»¶çš„å†™å…¥&#x2F;è¯»å–æ“ä½œäº†\nåœ¨è¿™é‡Œé¢æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç»“æ„sockaddréœ€è¦è¯´æ˜ä¸€ç•ª\n1.1 sockaddrsocketæ˜¯ä¸€å±‚æŠ½è±¡çš„ç½‘ç»œç¼–ç¨‹æ¥å£ï¼Œé€‚ç”¨äºå„ç§åº•å±‚ç½‘ç»œåè®®ï¼Œå¦‚IPv4&#x2F;IPv6ã€‚åŒæ—¶ï¼Œè¿™ä¸ªæ¥å£è¿˜å¯ä»¥ç”¨äºç³»ç»Ÿå†…éƒ¨çš„é€šä¿¡ã€‚è¿™å°±å®ç°äº†ç”¨ä¸€ä¸ªæ¥å£æ¥å¹²ä¸¤ä»¶äº‹ã€‚\nä¸ºæ­¤ï¼Œå°±å¿…é¡»è¦åœ¨ä¼ å€¼ä¸­è¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è¯¥æ¥å£æ–°å¢äº†ä¸€ä¸ªsockaddrï¼Œç”¨æ¥æ¥æ”¶ç›®æ ‡ä¿¡æ¯ã€‚è¿™ä¸ªå€¼çš„å‚æ•°å¯ä»¥æ˜¯sockaddr_in/scokaddr_un/sockadd_in6ä¹‹ä¸­çš„ä»»æ„ä¸€ä¸ªï¼ˆéœ€è¦å¼ºè½¬æŒ‡é’ˆï¼‰\nsockaddræœ¬èº«ä¸å­˜æ”¾ä»»ä½•ä¿¡æ¯ã€‚\nè¿™ä¸ªå‚æ•°å¯æ¥æ”¶çš„ç»“æ„ä½“ä¸­ï¼Œå›ºå®šå‰16ä½å°±æ˜¯ç”¨äºæ ‡è¯†ç¬¦çš„ã€‚ä¼ åˆ°å¤„ç†å‡½æ•°ä¸­ï¼Œå°±ä¼šåˆ¤æ–­å‰16ä½ä¸­çš„æ ‡è¯†ç¬¦çš„ç±»å‹ï¼Œä»¥ç¡®å®šä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œå†æ‰§è¡Œä¸åŒçš„å®ç°\n\næ¯”å¦‚ä¼ å…¥çš„scokaddr_unï¼Œå‰16ä½æ˜¯AF_UNIXï¼Œé‚£ä¹ˆå½“å‰ä½¿ç”¨çš„å°±æ˜¯æœ¬åœ°é€šä¿¡\nsockaddr_inæ˜¯ipv4é€šä¿¡ï¼Œsockaddr_in6æ˜¯ipv6é€šä¿¡\n\n\nä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæ—¢ç„¶sockaddrä¸å­˜æ”¾ä¿¡æ¯ï¼Œé‚£ä¸ºä½•ä¸æŠŠè¿™ä¸ªå‚æ•°è®¾ç½®ä¸ºä¸€ä¸ªvoid*çš„æŒ‡é’ˆï¼Ÿåæ­£æœ€åéƒ½æ˜¯è¿›äº†å‡½æ•°ä¹‹ååˆ¤æ–­å‚æ•°ç±»å‹ï¼Œvoid*æŒ‡é’ˆä¹Ÿèƒ½è¾¾æˆç›®æ ‡å‘€ğŸ§\nè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¾ˆç®€å•ï¼šå½“åˆè®¾è®¡è¿™å¥—æ¥å£çš„æ—¶å€™ï¼ŒCè¯­è¨€è¿˜ä¸æ”¯æŒvoid*ğŸ˜‚\n\n1.2 å­˜æ”¾ä½ç½®å› ä¸ºsockaddr_inè¿™ç±»çš„ç»“æ„ä½“ï¼Œæœ€ç»ˆéƒ½éœ€è¦è¢«æ“ä½œç³»ç»Ÿè½½å…¥å¹¶å®ç°ç½‘ç»œæ“ä½œã€‚æ‰€ä»¥å®ƒä»¬è‚¯å®šæ˜¯éœ€è¦è½½å…¥å†…æ ¸ä¸­çš„\nä½†è¿™å¹¶ä¸æ„å‘³ç€è¿™ç±»ç»“æ„ä½“æ˜¯å­˜æ”¾åœ¨å†…æ ¸é‡Œé¢çš„ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨ç”¨æˆ·æ ˆï¼Œç”¨æˆ·æ€å’Œå†…æ ¸æ€äº¤æ¢çš„æ—¶å€™ï¼Œé€šè¿‡æ¥å£ä¼ å€¼è½½å…¥åˆ°å†…æ ¸çš„ç©ºé—´è¿›è¡Œä½¿ç”¨\n2.serveräº†è§£äº†ä¸Šé¢çš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥ï¼Œè®¤è¯†ä¸€ä¸‹å¦‚æœæƒ³å»ºç«‹ä¸€ä¸ªudpserverï¼Œéœ€è¦æ€ä¹ˆæ“ä½œå§ï¼\nä»¥ä¸‹æ˜¯ä¸€ä¸ªserverçš„ç±»ï¼ŒåŒ…å«äº†ç«¯å£ã€ipã€socker fdä¸‰ä¸ªåŸºæœ¬ä¿¡æ¯\nclass UdpServer&#123;public:    UdpServer(uint16_t port,const string&amp; ip=&quot;&quot;)     : _port((uint16_t)port), _ip(ip), _sockfd(-1)    &#123;&#125;private:    // æœåŠ¡å™¨ç«¯å£å·    uint16_t _port;    // æœåŠ¡å™¨ipåœ°å€    string _ip;    // æœåŠ¡å™¨socket fdä¿¡æ¯    int _sockfd;&#125;;\n\n2.1 åˆ›å»ºå¥—æ¥å­—è¿™é‡Œéœ€è¦ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸ªæ¥å£\nint socket(int domain, int type, int protocol);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°domainæ ‡è¯†è¯¥sockerçš„ä½œç”¨åŸŸ\n\nå¯ä»¥è®¾ç½®ä¸ºæœ¬åœ°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºç½‘ç»œã€‚æ”¯æŒå¦‚ä¸‹å‚æ•°\nName                Purpose                          Man pageAF_UNIX, AF_LOCAL   Local communication              unix(7)AF_INET             IPv4 Internet protocols          ip(7)AF_INET6            IPv6 Internet protocols          ipv6(7)AF_IPX              IPX - Novell protocolsAF_NETLINK          Kernel user interface device     netlink(7)AF_X25              ITU-T X.25 / ISO-8208 protocol   x25(7)AF_AX25             Amateur radio AX.25 protocolAF_ATMPVC           Access to raw ATM PVCsAF_APPLETALK        Appletalk                        ddp(7)AF_PACKET           Low level packet interface       packet(7)\n\nå› ä¸ºæˆ‘ä»¬è¦åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç½‘ç»œæœåŠ¡å™¨ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸ºAF_INETï¼Œä¹Ÿå°±æ˜¯IPV4çš„æœåŠ¡\n\nç¬¬äºŒä¸ªå‚æ•°typeæŒ‡ä»£å¥—æ¥å­—çš„ç±»å‹ï¼Œå†³å®šäº†é€šä¿¡æ—¶çš„æŠ¥æ–‡ç±»å‹\n\nè¿™é‡Œæ”¯æŒæµå¼ï¼ˆTCPï¼‰æˆ–è€…ç”¨æˆ·æ•°æ®æŠ¥ï¼ˆUDPï¼‰ï¼Œä»¥åŠRAWåŸå§‹æ ¼å¼ï¼ˆèƒ½å¤Ÿç›´æ¥è®¿é—®åè®®ï¼Œæ–¹ä¾¿debugï¼‰\nSOCK_STREAM   Provides sequenced, reliable, two-way, connection-based byte streams. An out-of-band data  transmission  mechanism  may  be supported.SOCK_DGRAM    Supports datagrams (connectionless, unreliable messages of a fixed maximum length). SOCK_RAW        Provides raw network protocol access.\n\næ›´å¤šæ”¯æŒçš„å‚æ•°å‚è€ƒmanæ‰‹å†Œ\n\nç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡ä»£åè®®ï¼Œåœ¨ç½‘ç»œåº”ç”¨ä¸­ï¼Œè®¾ç½®ä¸º0å³å¯\n\nè¿”å›å€¼æ˜¯ä¸€ä¸ªlinuxç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦\nRETURN VALUE       On success, a file descriptor for the new socket is returned.  On error, -1 is returned, and errno is set appropriately.\n\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½å†™å‡ºç¬¬ä¸€è¡Œä»£ç ï¼Œä»¥åŠå¯¹è¿™ä¸ªä»£ç çš„è¿”å›å€¼åˆ¤æ–­\n_sockfd = socket(AF_INET, SOCK_DGRAM, 0);if (_sockfd &lt; 0)&#123;    logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), _sockfd);    exit(1);&#125;\n\nå› ä¸ºsocketæ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ºäº†è§„èŒƒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ææ„å‡½æ•°é‡Œé¢è°ƒç”¨ä¸€ä¸‹close\n~UdpServer()&#123;    close(_sockfd);&#125;\n\n2.2 é…ç½®sockaddr_in// 2. ç»‘å®šç½‘ç»œä¿¡æ¯ï¼ŒæŒ‡æ˜ip+portstruct sockaddr_in local;memset(&amp;local,0,sizeof(local));//é…ç½®ä¸º 0\n\nå› ä¸ºç”¨çš„æ˜¯ipv4çš„ç½‘ç»œé€šä¿¡ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åˆå§‹åŒ–ä¸€ä¸ªsockaddr_inç±»å‹\næ­¤æ—¶åœ¨vscodeçš„ä»£ç è¡¥å…¨ä¸­ï¼Œå¯ä»¥çœ‹åˆ°4ä¸ªæˆå‘˜ï¼Œéœ€è¦å¯¹å®ƒä»¬èµ‹å€¼ä»¥é…ç½®æœåŠ¡å™¨ä¿¡æ¯\n\né¦–å…ˆæ˜¯æŠŠåè®®å®¶æ—è®¾ç½®ä¸ºIPV4ï¼Œç«¯å£é…ç½®ä¸ºå‡½æ•°å‚æ•°ä¸­çš„ç«¯å£\n// åè®®å®¶æ—ï¼Œè®¾ç½®ä¸ºipv4local.sin_family = AF_INET; // ç«¯å£ï¼Œéœ€è¦è¿›è¡Œ æœ¬åœ°-&gt;ç½‘ç»œè½¬æ¢local.sin_port = htons(_port);\n\néšåé…ç½®ip\n// å¦‚æœåˆå§‹åŒ–æ—¶å€™çš„ipä¸ºç©ºï¼Œåˆ™è°ƒç”¨INADDR_ANYä»£è¡¨ä»»æ„ipã€‚å¦åˆ™å¯¹ä¼ å…¥çš„ipè¿›è¡Œè½¬æ¢åèµ‹å€¼local.sin_addr.s_addr = _ip.empty() ? htonl(INADDR_ANY) : inet_addr(ip_.c_str());\n\nè¿™é‡Œé‡‡ç”¨äº†?:ä¸‰ç›®æ“ä½œç¬¦ï¼Œå¦‚æœç±»æ„é€ çš„æ—¶å€™ä¼ å…¥çš„ipæ˜¯ç©ºï¼ˆæ²¡æœ‰é…ç½®ipï¼‰é‚£å°±ç›´æ¥è®¾ç½®ä¸ºä»»æ„ipï¼Œå¦åˆ™ä¼ å…¥æˆå‘˜å˜é‡ï¼›\nè¿™æ ·å¯¹sockaddr_inçš„é…ç½®å°±å®Œæˆäº†ã€‚\n2.2.1 inet_addrè¿™é‡Œéœ€è¦ä½¿ç”¨inet_addrå‡½æ•°å¯¹ä¼ å…¥çš„å­—ç¬¦ä¸²ç±»å‹çš„ipï¼ˆå¦‚192.168.0.1ï¼‰è¿›è¡Œè½¬æ¢\nin_addr_t inet_addr(const char *cp);//å¯¹å­—ç¬¦ä¸²ipè¿›è¡Œè½¬æ¢\n\nå› ä¸ºå¯¹äºç½‘ç»œæ¥è¯´ï¼Œå®ƒå¹¶ä¸è®¤è¯†å­—ç¬¦ä¸²ç±»å‹çš„ipï¼Œè€Œæ˜¯è¦ç”¨ç½‘ç»œå­—èŠ‚æµè§„å®šçš„ç±»å‹ã€‚\n/* Internet address.  */typedef uint32_t in_addr_t;struct in_addr  &#123;    in_addr_t s_addr;  &#125;;\n\nå¯¹äºè¯¥æ¥å£çš„åº•å±‚åšä¸€ä¸ªç®€å•çš„è¯´æ˜ï¼šå…¶å®å°±æ˜¯åˆ©ç”¨ä½æ®µï¼Œå°†æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹\n//ç¤ºä¾‹ï¼Œéåº•å±‚å®ç°struct ip&#123;    uint32_t part1:8;    uint32_t part2:8;    uint32_t part3:8;    uint32_t part4:8;&#125;\n\n2.2.2 inet_ntoaåŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬ä½œä¸ºå®¢æˆ·ç«¯æ¥å—åˆ°äº†ç½‘ç»œè¯·æ±‚ä¸­çš„ipï¼Œå¯ä»¥ç”¨inet_ntoaå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚\nchar *inet_ntoa(struct in_addr in);\n\nè¿™é‡Œå°±å¼•ç”³å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šè¿”å›å€¼çš„char*æ˜¯å­˜åœ¨å“ªé‡Œçš„ï¼Ÿæ˜¯é™æ€åŒºè¿˜æ˜¯mallocï¼Ÿ\n\nThe inet_ntoa() function converts the Internet host address in, given in network byte order, to a string in IPv4 dotted-decimal notation.  The string  is returned in a statically allocated buffer, which subsequent calls will overwrite.\n\næ‰‹å†Œå‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ç»´æŠ¤äº†ä¸€ä¸ªstaticå˜é‡æ¥å­˜æ”¾è¿”å›çš„ipçš„ã€‚\nå› æ­¤ï¼Œè¯¥å‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å‡½æ•°ï¼Œåœ¨APUEä¸­æ˜ç¡®æ ‡æ˜äº†è¿™ä¸€ç‚¹ï¼›åç»­çš„è°ƒç”¨ä¼šè¦†ç›–æ‰è¿™ä¸ªIPåœ°å€ï¼›\n2023.09.15çš„é¢è¯•é—®é“äº†è¿™ä¸ªé—®é¢˜ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹æˆ‘çš„é¢ç»é‡Œé¢çš„é¢˜ç›®å’Œè§£é‡Šï¼Œè¿™é‡ŒæŠŠé¢˜ç›®è´´å‡ºæ¥ï¼›å¦‚ä¸‹çš„å‡½æ•°è°ƒç”¨ä¼šä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\nprintf(&quot;%s %s\\n&quot;,inet_ntoa(ip1),inet_ntoa(ip2));\n\nè¯´ç»“è®ºï¼šå¯¹äºinet_atonå‡½æ•°è€Œè¨€ï¼Œæ­£ç¡®çš„è°ƒç”¨åŠæ³•æ˜¯æ¯æ¬¡è°ƒç”¨åéƒ½ç«‹å³å–èµ°è¿”å›çš„IPåœ°å€å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨std::stringæ¥æ”¶ï¼Œä¹Ÿå¯ä»¥ç”¨strcmpæ‹·è´åˆ°ä¸€ä¸ªè‡ªå·±å®šä¹‰çš„å­—ç¬¦ä¸²æ•°ç»„å˜é‡ä¸­ï¼›\nå…·ä½“çš„ä»‹ç»è¯·ç§»æ­¥é¢ç»å“¦ï¼\n\n2.3 bindç»‘å®šipç«¯å£#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int bind(int sockfd, const struct sockaddr *addr,         socklen_t addrlen);\n\nè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±æ˜¯æŒ‡å®šsocketå’Œsockaddrè¿›è¡Œç»‘å®šã€‚ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯addrå…ƒç´ çš„å¤§å°ï¼ˆä¸æ˜¯æŒ‡é’ˆå¤§å°ï¼Œåˆ«æé”™äº†ï¼‰\n// 2.2 ç»‘å®šipç«¯å£if (bind(_sockfd,(const struct sockaddr *)&amp;local, sizeof(local)) == -1)&#123;    logging(FATAL, &quot;bind: %s:%d&quot;, strerror(errno), _sockfd);    exit(2);&#125;logging(DEBUG,&quot;socket bind success: %d&quot;, _sockfd);\n\nç»‘å®šäº†ä¹‹åï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨å°±é…ç½®æˆåŠŸäº†\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¯‘æ²¡æœ‰æŠ¥é”™ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼\n[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ make udpServerg++ -o udpServer udpServer.cpp -std=c++11[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServerDEBUG | 1675326460 | muxue | socket create success: 3DEBUG | 1675326460 | muxue | socket bind success: 3\n\nåœ¨ä½¿ç”¨UDPè¿›è¡Œé€šä¿¡çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä¸€å®šéœ€è¦ç»‘å®šå…·ä½“çš„IPåœ°å€ï¼Œå¯ä»¥ç”¨INADR_ANYæ¥ä»£æ›¿å…·ä½“çš„æœ¬æœºIPåœ°å€ï¼Œä½†æ˜¯ç«¯å£å·ä¸€å®šè¦è¿›è¡Œç»‘å®šã€‚ï¼ˆä¸ç„¶ç³»ç»Ÿæ²¡åŠæ³•è®©ä½ çš„è¿›ç¨‹å’ŒæŸä¸ªç«¯å£å…³è”æ¥æ¥æ”¶ä¿¡æ¯ï¼‰\n2.3.1 mainç°åœ¨å…ˆæ¥ç®€å•å†™ä¸€ä¸‹mainå‡½æ•°ä¸­å¯åŠ¨æœåŠ¡çš„å‘½ä»¤è¡Œå‚æ•°å§\nint main(int argc,char* argv[])&#123;    //å‚æ•°åªæœ‰ä¸¤ä¸ªï¼ˆç«¯å£/ipï¼‰æ‰€ä»¥å‚æ•°ä¸ªæ•°åº”è¯¥æ˜¯2-3    if(argc!=2 &amp;&amp; argc!=3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; port [ip]&quot; &lt;&lt; endl;        return 1;    &#125;        string ip;    // 3ä¸ªå‚æ•°ï¼Œæœ‰ip    if(argc==3)    &#123;        ip = argv[2];    &#125;    UdpServer s(atoi(argv[1]),ip);    s.start();    return 0;&#125;\n\nä¸ºäº†æµ‹è¯•ï¼Œå…ˆæŠŠstart()å‡½æ•°è®¾ç½®ä¸ºä¸€ä¸ªæ­»å¾ªç¯\nvoid start()&#123;    while(1)    &#123;        cout &lt;&lt; &quot;running &quot; &lt;&lt; getpid() &lt;&lt; endl;        sleep(1);    &#125;&#125;\n\nç¼–è¯‘è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°é”™è¯¯æç¤ºæ˜¯å¯ä»¥ç”¨çš„ã€‚æ­£ç¡®æ·»åŠ å‚æ•°ä¹‹åï¼Œä¹Ÿèƒ½ç»‘å®šå¹¶å¼€å§‹è¿è¡Œ\n[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ make udpServerg++ -o udpServer udpServer.cpp -std=c++11[muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServerUsage: ./udpServer port [ip][muxue@bt-7274:~/git/linux/code/23-02-01 udp]$ ./udpServer 8080DEBUG | 1675327610 | muxue | socket create success: 3DEBUG | 1675327610 | muxue | socket bind success: 3running 4467running 4467running 4467^C\n\næ³¨æ„ï¼Œbindè¿™ä¸ªå‡½æ•°æ˜¯ä¸å…è®¸ä½ ç»‘å®šäº‘æœåŠ¡å™¨çš„å…¬ç½‘ipçš„ã€‚å› ä¸ºäº‘æœåŠ¡å™¨å¹¶ä¸æ˜¯ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šçš„ï¼Œè€Œæ˜¯ç”±æä¾›å•†çš„å…¥å£æœåŠ¡å™¨è¿›å…¥å†…ç½‘ï¼Œåœ¨è¿›å…¥ä½ çš„æœåŠ¡å™¨ã€‚æ‰€ä»¥ä»–ä¸å…è®¸ä½ ç»‘å®šå…¬ç½‘ipï¼›\n$ ./udpServer 8080 äº‘æœåŠ¡å™¨å…¬ç½‘ipDEBUG | 1675327690 | muxue | socket create success: 3FATAL | 1675327690 | muxue | bind: Cannot assign requested address:3\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯ä»¥é€‰æ‹©ä¸ç»‘å®šipï¼Œæˆ–è€…ç»‘å®šæœ¬åœ°ç«¯å£127.0.0.1\n\nå¦‚æœç»‘å®šäº†127.0.0.1ï¼Œé‚£ä¹ˆæœåŠ¡åªæœ‰æœ¬åœ°å¯ä»¥è®¿é—®ã€‚ä¸ç»‘å®šç«¯å£ï¼Œå°±ä¼šé»˜è®¤ç»‘å®šæˆ0.0.0.0ï¼Œå…è®¸æœ¬åœ°å’Œè¿œç¨‹ç«¯å£è¿æ¥\n\n$ ./udpServer 8080 127.0.0.1DEBUG | 1675327757 | muxue | socket create success: 3DEBUG | 1675327757 | muxue | socket bind success: 3running 5067running 5067\n\n2.3.2 netstatå¯ä»¥ç”¨netstat -lnupå‘½ä»¤æŸ¥çœ‹å½“å‰å¼€æ”¾çš„ç«¯å£ä¿¡æ¯\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è¡Œå°±æ˜¯æˆ‘ä»¬çš„udpæœåŠ¡å™¨ï¼Œæœ¬åœ°ç«¯å£æ˜¯æˆ‘ä»¬ç»‘å®šçš„127.0.0.1:8080ï¼Œè¿œç¨‹ç«¯å£æ˜¯0.0.0.0:*ï¼Œä»£è¡¨å…è®¸ä»»ä½•è¿œç¨‹ipçš„ä»»ä½•ç«¯å£æ¥è®¿é—®\n2.4 å¼€å§‹è¿è¡Œä¸Šé¢çš„æ“ä½œåªæ˜¯åˆå§‹åŒ–äº†è¿™ä¸ªudpæœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œå¹¶æ²¡æœ‰è®©å®ƒçœŸæ­£çš„è¿è¡Œèµ·æ¥ï¼›\næ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯è®©æœåŠ¡å™¨å¼€å§‹æ¥æ”¶ä¿¡æ¯ï¼Œå¹¶åœ¨å±å¹•ä¸Šæ‰“å°å‡ºæ¥\n2.4.1 recvfromè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯æ¥æ¥æ”¶ä¿¡æ¯\n#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags,                 struct sockaddr *src_addr, socklen_t *addrlen);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‰é¢åˆ›å»ºçš„å¥—æ¥å­—\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æ¥æ¥æ”¶ä¿¡æ¯çš„ç¼“å†²åŒº\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¼“å†²åŒºçš„å¤§å°\nç¬¬å››ä¸ªå‚æ•°æ˜¯æ ‡è¯†ç¬¦ï¼Œè®¾ç½®ä¸º0ï¼Œä»£è¡¨é˜»å¡ç­‰å¾…\nç¬¬äº”ä¸ªå‚æ•°ï¼Œè¾“å‡ºå‹å‚æ•°ï¼Œè·å–å‘é€æ–¹çš„ä¿¡æ¯\nç¬¬å…­ä¸ªå‚æ•°ï¼Œè¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦åˆå§‹åŒ–ä¸ºsizeof(src_addr)\n\nå‡½æ•°çš„è¿”å›å€¼æ˜¯æ¥æ”¶åˆ°çš„æ•°æ®çš„é•¿åº¦ï¼Œæ²¡æœ‰æ¥æ”¶åˆ°æˆ–è€…æ¥å—å¤±è´¥ï¼Œåˆ™ä¸º-1\nç¤ºä¾‹å¦‚ä¸‹\nchar inBuf[BUF_SIZE];struct sockaddr_in peer;      //è¾“å‡ºå‹å‚æ•°socklen_t len = sizeof(peer); //è¾“å…¥è¾“å‡ºå‹å‚æ•°// peerå’Œlenéƒ½æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œç”¨äºè·å–å‘é€æ–¹çš„ä¿¡æ¯// lenæ˜¯è¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦ä»¥sizeof(peer)åˆå§‹åŒ–åä¼ å…¥// ç¬¬ä¸‰ä¸ªå‚æ•°0ä¸ºé»˜è®¤ç­‰å¾…æ–¹å¼ï¼ˆé˜»å¡ç­‰å¾…ï¼‰ssize_t s = recvfrom(_sockfd, inBuf, sizeof(inBuf)-1,0,(struct sockaddr *)&amp;peer, &amp;len);if (s &gt; 0) // sä»£è¡¨è·å–åˆ°çš„æ•°æ®é•¿åº¦ï¼Œä¸ä¸º0ä»£è¡¨æˆåŠŸè·å–&#123;    inBuf[s] = &#x27;\\0&#x27;; //æœ«å°¾è¿½åŠ &#x27;\\0&#x27;&#125;else if (s == -1) // -1æ²¡æœ‰æ”¶åˆ°ä¿¡æ¯ï¼Œé”™è¯¯&#123;    logging(WARINING, &quot;recvfrom: %s:%d&quot;, strerror(errno), _sockfd);    continue;&#125;\n\nè¿™æ ·å°±èƒ½åœ¨inBufä¸­ç›´æ¥è·å–åˆ°å‘é€ä¿¡æ¯çš„å†…å®¹\n2.5 æœåŠ¡ç«¯startä»¥ä¸‹æ˜¯æœåŠ¡ç«¯è¿è¡Œçš„å®Œæ•´ä»£ç \nvoid start()&#123;    char inBuf[BUF_SIZE];//æ¥æ”¶åˆ°ä¿¡æ¯çš„ç¼“å†²åŒº    while(1)    &#123;        struct sockaddr_in peer;      //è¾“å‡ºå‹å‚æ•°        socklen_t len = sizeof(peer); //è¾“å…¥è¾“å‡ºå‹å‚æ•°        // peerå’Œlenéƒ½æ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œç”¨äºè·å–å‘é€æ–¹çš„ä¿¡æ¯        // lenæ˜¯è¾“å…¥è¾“å‡ºå‹å‚æ•°ï¼Œéœ€è¦ä»¥sizeof(peer)åˆå§‹åŒ–åä¼ å…¥        // ç¬¬ä¸‰ä¸ªå‚æ•°0ä¸ºé»˜è®¤ç­‰å¾…æ–¹å¼ï¼ˆé˜»å¡ç­‰å¾…ï¼‰        ssize_t s = recvfrom(_sockfd, inBuf, sizeof(inBuf)-1,0,(struct sockaddr *)&amp;peer, &amp;len);        if (s &gt; 0) // sä»£è¡¨è·å–åˆ°çš„æ•°æ®é•¿åº¦ï¼Œä¸ä¸º0ä»£è¡¨æˆåŠŸè·å–        &#123;            inBuf[s] = &#x27;\\0&#x27;; //æœ«å°¾è¿½åŠ &#x27;\\0&#x27;        &#125;        else if (s == -1) // -1æ²¡æœ‰æ”¶åˆ°ä¿¡æ¯ï¼Œé”™è¯¯        &#123;            logging(WARINING, &quot;recvfrom: %s:%d&quot;, strerror(errno), _sockfd);            continue;        &#125;        string senderIP = inet_ntoa(peer.sin_addr);// æ¥æºip        uint16_t senderPort = ntohs(peer.sin_port); // æ¥æºç«¯å£        logging(NOTICE, &quot;[%s:%d]# %s&quot;, senderIP.c_str(),senderPort, inBuf);//æ‰“å°ä¿¡æ¯    &#125;&#125;\n\nå¦‚æœä½ æƒ³è®©å¦å¤–ä¸€å°ä¸»æœºè®¿é—®è¿™ä¸ªæœåŠ¡ï¼Œåˆ™éœ€è¦åœ¨äº‘æœåŠ¡å™¨æ§åˆ¶å°å’Œlinuxç³»ç»Ÿä¸­åŒæ—¶å¼€æ”¾å¯¹åº”çš„udpç«¯å£\n\nå‚è€ƒ ã€Linuxã€‘è®¾ç½®ç³»ç»Ÿé˜²ç«å¢™\n\n3.clientæœ‰äº†æœåŠ¡ç«¯ï¼Œä¹Ÿè¦æœ‰å¯¹åº”çš„å®¢æˆ·ç«¯æ¥å‘é€æ¶ˆæ¯ï¼›é™¤äº†å‘é€æ¶ˆæ¯çš„éƒ¨åˆ†ï¼Œå…¶ä½™æ“ä½œå’ŒæœåŠ¡ç«¯åŸºæœ¬ä¸€è‡´ã€‚\n3.1 sendto#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;ssize_t send(int sockfd, const void *buf, size_t len, int flags);ssize_t sendto(int sockfd, const void *buf, size_t len, int flags,               const struct sockaddr *dest_addr, socklen_t addrlen);ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);\n\nè¿™é‡Œæˆ‘ä»¬è¦ç”¨çš„æ˜¯sendtoæ¥å£\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯socketå¥—æ¥å­—\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºè¾“å…¥çš„ç¼“å†²åŒº\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¼“å†²åŒºçš„ç±»å‹\nç¬¬å››ä¸ªå‚æ•°æ˜¯æ ‡è¯†ç¬¦ï¼Œä¹Ÿè®¾ç½®ä¸º0\nç¬¬äº”ä¸ªå‚æ•°å’Œç¬¬å…­ä¸ªå‚æ•°ä¸recvfromä¸€è‡´ï¼Œä¸ºç›®æ ‡æœåŠ¡å™¨çš„ä¿¡æ¯\n\nå…³äºflagå‚æ•°ï¼Œmanæ‰‹å†Œä¸­æœ‰æ›´å¤šé€‰é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¾æ—§ä¼ å…¥0é‡‡ç”¨é»˜è®¤ç­–ç•¥\nThe flags argument is the bitwise OR of zero or more of the following flags.\n\n3.2 å®¢æˆ·ç«¯éœ€ä¸éœ€è¦æ‰‹åŠ¨bind?é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ä¸€ç‚¹ï¼Œbindå‡½æ•°å¹¶æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯æœåŠ¡ç«¯æ‰èƒ½ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦ä¸è¦ä½¿ç”¨bindæ˜¯ç¨‹åºçŒ¿è‡ªå·±çš„é€‰æ‹©ã€‚\nç­”æ¡ˆå…¶å®å¾ˆç®€å•ï¼šé‚£å°±æ˜¯ä¸éœ€è¦æ‰‹åŠ¨bind\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä¸€ç‚¹ï¼šå¦‚æœä¸€ä¸ªç½‘ç»œè¿›ç¨‹åœ¨å¯åŠ¨çš„æ—¶å€™æ²¡æœ‰æ‰‹åŠ¨bindç«¯å£ï¼Œç³»ç»Ÿæ˜¯ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªæœªä½¿ç”¨çš„ç«¯å£ç»™å®ƒçš„\n\nå¯¹äºæœåŠ¡å™¨æ¥è¯´ï¼ŒIP:ç«¯å£å¿…é¡»å›ºå®šï¼Œå¦åˆ™æ²¡æœ‰åŠæ³•ç»™å®¢æˆ·ç«¯æä¾›ç¨³å®šçš„æœåŠ¡ã€‚å®¢æˆ·åˆä¸èƒ½æ‹†äº†ä½ çš„åº”ç”¨ç¨‹åºä¿®æ”¹æºç ä¸­çš„ç«¯å£ï¼\nè€Œå¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œç«¯å£åº”è¯¥è®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ã€‚å› ä¸ºè¿™æ ·èƒ½é¿å…å†²çªé—®é¢˜ã€‚ä¸ç„¶å¦‚æœæœ‰å¦å¤–ä¸€ä¸ªåº”ç”¨å ç”¨äº†å®¢æˆ·ç«¯bindçš„ç«¯å£ï¼Œé‚£è¿™ä¸ªç¨‹åºå°±ä¼šå› ä¸ºç«¯å£å†²çªè€Œä¸€ç›´æ‰“ä¸å¼€ï¼\n\næ‰€ä»¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦æˆ‘ä»¬è°ƒç”¨bindå‡½æ•°ï¼Œåªéœ€è¦é…ç½®å¥½æœåŠ¡ç«¯çš„ç›®æ ‡ipå’Œç›®æ ‡ç«¯å£å°±è¡Œäº†\n3.3 ä»£ç ç¤ºä¾‹#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstdlib&gt;#include &lt;cassert&gt;#include &lt;unistd.h&gt;#include &lt;strings.h&gt;#include &lt;netinet/in.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;using namespace std;struct sockaddr_in server;// ./udpClient server_ip server_port// å®¢æˆ·ç«¯è¦è¿æ¥serverï¼Œå¿…é¡»çŸ¥é“serverå¯¹åº”çš„ipå’Œportint main(int argc, char *argv[])&#123;    if (argc != 3)    &#123;        cout &lt;&lt; &quot;Usage:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; server_ip server_port&quot; &lt;&lt; endl;        return 1;    &#125;    // 1. æ ¹æ®å‘½ä»¤è¡Œï¼Œè®¾ç½®è¦è®¿é—®çš„æœåŠ¡å™¨IP    string server_ip = argv[1];    uint16_t server_port = atoi(argv[2]);    // 2. åˆ›å»ºå®¢æˆ·ç«¯    // 2.1 åˆ›å»ºsocket    int sockfd = socket(AF_INET, SOCK_DGRAM, 0);    if(sockfd&lt;0)    &#123;        cout &lt;&lt; &quot;socket åˆ›å»ºå¤±è´¥&quot; &lt;&lt; endl;        return 2;    &#125;    bzero(&amp;server, sizeof(server));//è¿™ä¸ªå‡½æ•°ç›¸å½“äºmemsetå…¨0    server.sin_family = AF_INET;//ipv4    server.sin_port = htons(server_port);//ç›®æ ‡æœåŠ¡å™¨ç«¯å£    server.sin_addr.s_addr = inet_addr(server_ip.c_str());//ç›®æ ‡ip    // 3. é€šè®¯è¿‡ç¨‹    string buffer;    while (true)    &#123;        cerr &lt;&lt; &quot;Please Enter# &quot;;        getline(cin, buffer);        // å‘é€æ¶ˆæ¯ç»™server        sendto(sockfd, buffer.c_str(), buffer.size(), 0,               (const struct sockaddr *)&amp;server, sizeof(server));         // é¦–æ¬¡è°ƒç”¨sendtoå‡½æ•°çš„æ—¶å€™ï¼Œclientä¼šè‡ªåŠ¨bindè‡ªå·±çš„ipå’Œport        // å®¢æˆ·ç«¯ä¸åº”è¯¥è‡ªå·±ç»‘å®šç«¯å£ï¼Œå¦åˆ™ç«¯å£è¢«å ç”¨=å®¢æˆ·ç«¯ä¸èƒ½ç”¨    &#125;    close(sockfd);    return 0;&#125;\n\n3.4 è¿è¡Œæµ‹è¯•è¿™é‡Œæä¾›ä¸€ä¸ªmakefileï¼Œæ¥å¿«é€Ÿç¼–è¯‘æœåŠ¡ç«¯&#x2F;å®¢æˆ·ç«¯çš„æºç \n.PHONY:allall:udpClient udpServerudpClient: udpClient.cpp\tg++ -o $@ $^ -std=c++11 -lpthreadudpServer:udpServer.cpp\tg++ -o $@ $^ -std=c++11.PHONY:cleanclean:\trm -f udpClient udpServer\n\nè¿è¡ŒæœåŠ¡å™¨ï¼ŒæŒ‡å®š8080ç«¯å£å¯åŠ¨ã€‚å†è¿è¡Œå®¢æˆ·ç«¯ï¼ŒæŒ‡å®š127.0.0.1æœ¬åœ°ipå’Œ8080ç«¯å£\n\nå¯ä»¥çœ‹åˆ°ï¼Œå³ä¾§æˆ‘ä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œéƒ½åœ¨å·¦ä¾§è¢«æ‰“å°äº†å‡ºæ¥ï¼ŒåŒæ—¶æ˜¾ç¤ºäº†æ¥æºipå’Œç«¯å£\n3.5 windowså®¢æˆ·ç«¯è®©æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œwindowsä¸Šç½‘ç»œçš„æ¥å£å’Œlinuxå¾ˆç›¸ä¼¼ï¼›è¿™é‡Œæä¾›ä¸€ä¸ªwindowsä¸‹çš„udpå®¢æˆ·ç«¯ï¼Œå‘æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨å‘é€ä¿¡æ¯\næ³¨ï¼šè¿›è¡Œæµ‹è¯•å‰ï¼Œä¸€å®šè¦åœ¨é˜²ç«å¢™é‡Œé¢å¼€æ”¾äº‘æœåŠ¡å™¨å¯¹åº”çš„udpç«¯å£\n#define _WINSOCK_DEPRECATED_NO_WARNINGS 1//å±è”½æŠ¥é”™#include&lt;winsock2.h&gt;#include&lt;stdio.h&gt;#include&lt;string.h&gt;#include&lt;string&gt;#include&lt;iostream&gt;using namespace std;#pragma comment(lib,&quot;ws2_32.lib&quot;)#define BUFFER_SIZE  1024    //ç¼“å†²åŒºå¤§å°int main() &#123;    WSADATA WSAData;    //åˆå§‹åŒ–    if (WSAStartup(MAKEWORD(2, 2), &amp;WSAData) != 0)     &#123;        printf(&quot;åˆå§‹åŒ–å¤±è´¥!&quot;);        return -1;    &#125;        //åˆ›å»ºå®¢æˆ·ç«¯ç”¨äºé€šä¿¡çš„Socket    SOCKET sock_Client = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);    //æœåŠ¡å™¨çš„åœ°å€æ•°æ®ç»“æ„    SOCKADDR_IN addr_server;       addr_server.sin_family = AF_INET;    addr_server.sin_port = htons(10000);// ç›®æ ‡ç«¯å£    addr_server.sin_addr.S_un.S_addr = inet_addr(&quot;127.0.0.1&quot;); //ç›®æ ‡å…¬ç½‘ip(éœ€è¦æ”¹æˆä½ è‡ªå·±çš„)    string sendBuf;    while (true)     &#123;        cout &lt;&lt; &quot;è¯·è¾“å…¥è¦ä¼ é€çš„æ•°æ®: &quot;;        getline(cin,sendBuf);        sendto(sock_Client, sendBuf.c_str(),sendBuf.size(), 0, (const SOCKADDR*)&amp;addr_server, sizeof(addr_server));        cout &lt;&lt; sendBuf.size() &lt;&lt; &quot;: &quot; &lt;&lt; sendBuf &lt;&lt; endl;    &#125;    closesocket(sock_Client);    WSACleanup();    return 0;&#125;\n\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°äº‘æœåŠ¡å™¨æˆåŠŸæ”¶åˆ°äº†ä¿¡æ¯ï¼Œä½†å› ä¸ºwindowså’Œlinuxçš„æ–‡å­—ç¼–ç é—®é¢˜ï¼Œæ²¡èƒ½æ­£ç¡®æ˜¾ç¤ºå‡ºä¸­æ–‡\n\nå‘é€è‹±æ–‡ä¿¡æ¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼\n\n4.æ›´è¿›ä¸€æ­¥4.1 è®°å½•ç”¨æˆ·æœ‰ç”¨æˆ·ç»™ä½ å‘é€ä¿¡æ¯ï¼Œç†è®ºä¸Šæ¥è¯´ï¼ŒæœåŠ¡ç«¯åº”è¯¥è®°å½•ä¸‹ç”¨æˆ·ï¼Œä»¥å¤‡debug;\nè¿™éƒ¨åˆ†å¹¶ä¸éš¾ï¼Œæˆ‘ä»¬è®°å½•ä¸‹ç”¨æˆ·çš„ipå’Œç«¯å£ï¼Œè¿˜æœ‰ç”¨æˆ·çš„peerç»“æ„ä½“ï¼Œåœ¨æœåŠ¡å™¨é‡Œé¢ç»´æŠ¤ä¸€ä¸ªmapæ¥å­˜æ”¾å°±å¯ä»¥äº†\nvoid CheckUser(struct sockaddr_in peer)&#123;    string tmp = inet_ntoa(peer.sin_addr);// æ¥æºip    tmp += &#x27;:&#x27;;    tmp += to_string(ntohs(peer.sin_port));// æ¥æºç«¯å£    // åœ¨mapä¸­ç”¨ipç«¯å£æ¥æ ‡è¯†ç”¨æˆ·    auto it = _usrMap.find(tmp);    if(it == _usrMap.end())// æ²¡æ‰¾åˆ°    &#123;        _usrMap.insert(&#123;tmp,peer&#125;);    &#125;&#125;\n\n4.2 å®¢æˆ·ç«¯æ¥æ”¶å›ä¿¡å®¢æˆ·ç«¯å‘é€ä¿¡æ¯ç»™æœåŠ¡å™¨åï¼Œå¯ä»¥æ¥æ¥æ”¶ä¸€ä¸‹æœåŠ¡å™¨çš„å›ä¿¡ã€‚æ¯”å¦‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å‘é‚®ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…å¯¹æ–¹å›ä¿¡ï¼Œè¿™æ‰è¡¨æ˜ä½ çš„ä¿¡å¯¹æ–¹ç¡®å®æ”¶åˆ°äº†ï¼Œè€Œä¸æ˜¯ä¸¢åœ¨åŠè·¯ä¸Šäº†\n// ä½¿ç”¨å¤šçº¿ç¨‹æ“ä½œï¼Œæ¥è·å–æœåŠ¡å™¨ä¼ å›çš„ä¿¡æ¯pthread_t t;pthread_create(&amp;t, nullptr, recverAndPrint, (void *)&amp;sockfd);\n\nä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ¥æ“ä½œï¼›å®¢æˆ·ç«¯åœ¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å›ä¿¡åï¼Œä¼šæ‰“å°å‡ºæ¥\nvoid *recverAndPrint(void *args)&#123;    while (true)    &#123;        int sockfd = *(int *)args;        char buffer[1024];        struct sockaddr_in temp;        socklen_t len = sizeof(temp);        ssize_t s = recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr *)&amp;temp, &amp;len);        if (s &gt; 0)        &#123;            buffer[s] = 0;//å°†æ¥æ”¶åˆ°çš„ä¿¡æ¯æ‰“å°å‡ºæ¥ï¼ˆæœåŠ¡å™¨è¿”å›çš„ï¼‰            cout &lt;&lt; &quot;server echo# &quot; &lt;&lt; buffer &lt;&lt; &quot;\\n&quot;;        &#125;    &#125;&#125;\n\n4.3 æ¶ˆæ¯è·¯ç”±æ‰€è°“æ¶ˆæ¯è·¯ç”±ï¼Œå°±æ˜¯æŠŠæ¥æ”¶åˆ°çš„æ¶ˆæ¯å¹¿æ’­ç»™æ‰€æœ‰ç”¨æˆ·ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªç®€å•çš„èŠå¤©å®¤ã€‚\nä¸Šé¢æˆ‘ä»¬å·²ç»è·å–å¹¶è®°å½•äº†ä¿¡æ¯ï¼Œä¸‹é¢è¦åšçš„å°±æ˜¯æŠŠä¿¡æ¯é‡æ–°å‘ç»™å…¶ä»–ç”¨æˆ·ï¼›æ“ä½œå’Œå®¢æˆ·ç«¯çš„å‘é€æ˜¯ä¸€æ ·çš„\nvoid MsgRoute(const char* inBuf,size_t len)&#123;    struct sockaddr_in user;    for(auto e:_usrMap)    &#123;        user.sin_family = AF_INET;//ipv4        user.sin_port = e.second.sin_port;//ç”¨æˆ·ç«¯å£        user.sin_addr.s_addr = e.second.sin_addr.s_addr;//ç”¨æˆ·ip        // å‘ç”¨æˆ·å‘é€ä¿¡æ¯        sendto(_sockfd, inBuf, len, 0,               (const struct sockaddr *)&amp;user, sizeof(user));     &#125;&#125;\n\næµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡ç«¯æŠŠæ”¶åˆ°çš„æ¶ˆæ¯å‘é€ç»™äº†ç”¨æˆ·\n\nå†æ–°å¢ä¸€ä¸ªå®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå®¢æˆ·éƒ½æ”¶åˆ°äº†æœåŠ¡å™¨çš„å›ä¿¡\n\nè¿™é‡Œå¯¹äºèŠå¤©å®¤æ¥è¯´è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œé‚£å°±æ˜¯èŠå¤©æ¡†é‡Œé¢å¹¶ä¸ä¼šäºŒæ¬¡å‡ºç°ä½ çš„æ¶ˆæ¯ã€‚ä¹Ÿå°±æ˜¯æœåŠ¡å™¨ä¸ä¼šæŠŠä½ å‘é€çš„æ¶ˆæ¯å†è½¬å‘ç»™ä½ ã€‚\næˆ‘ä»¬åœ¨æ¶ˆæ¯è·¯ç”±å‡½æ•°é‡Œé¢è¿›è¡Œåˆ¤æ–­å³å¯ï¼\nvoid MsgRoute(struct sockaddr_in peer,const char* inBuf,size_t len)&#123;    struct sockaddr_in user;    for(auto e:_usrMap)    &#123;        // å¦‚æœipå’Œç«¯å£éƒ½ç›¸ç­‰ï¼Œå°±ä»£è¡¨æ˜¯å‘é€æ¶ˆæ¯çš„ç”¨æˆ·        if(e.second.sin_port != peer.sin_port || e.second.sin_addr.s_addr != peer.sin_addr.s_addr)        &#123;            user.sin_family = AF_INET;//ipv4            user.sin_port = e.second.sin_port;//ç”¨æˆ·ç«¯å£            user.sin_addr.s_addr = e.second.sin_addr.s_addr;//ç”¨æˆ·ip            // å‘ç”¨æˆ·å‘é€ä¿¡æ¯            sendto(_sockfd, inBuf, len, 0,                   (const struct sockaddr *)&amp;user, sizeof(user));         &#125;    &#125;&#125;\n\nå› ä¸ºä¹±åºæ‰“å°çš„é—®é¢˜ï¼Œæ‰€ä»¥çœ‹çš„å¯èƒ½ä¸æ˜¯å¾ˆæ˜æ˜¾ã€‚ä½†æ˜¯æˆ‘ä»¬çš„ç›®çš„å·²ç»è¾¾åˆ°äº†ï¼\n\nè¿™æ ·æ‰“å°çœ‹çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œå¯ä»¥ä½¿ç”¨ç®¡é“æ–‡ä»¶æ¥å®ç°è¾“å‡ºé‡å®šå‘\nmkfifo fifo #åˆ›å»ºä¸€ä¸ªfifoç®¡é“æ–‡ä»¶\n\nè¿è¡Œå®¢æˆ·ç«¯çš„æ—¶å€™ï¼ŒæŒ‡å®šè¾“å‡º\n./udpClient 127.0.0.1 1000 &gt; fifo\n\nåœ¨å¦å¤–ä¸€ä¸ªbashé‡Œé¢ï¼Œç”¨catæ¥è·å–è¾“å‡º\ncat &lt; fifo\n\nè¿™å°±ä¸ä¼šå‡ºç°ä¹±åºæ‰“å°çš„é—®é¢˜äº†ã€‚\nfifoæ˜¯ä¸€ä¸ªç®¡é“æ–‡ä»¶ï¼Œéœ€è¦æ‰§è¡Œcatåï¼ˆè¯»ç«¯ï¼‰ï¼Œå®¢æˆ·ç«¯ï¼ˆå†™ç«¯ï¼‰æ‰èƒ½è¿è¡Œ\n5.å…³äºä»€ä¹ˆæ—¶å€™éœ€è¦bindæœ¬æ–‡ä»¥ä¸‹å†…å®¹å»ºè®®å­¦ä¹ äº†UDPåº•å±‚æŠ¥æ–‡å’Œç›¸å…³ç½‘ç»œåè®®æ ˆçš„çŸ¥è¯†åå†æ¥çœ‹ï¼Œä¼šæ–¹ä¾¿ç†è§£ä¸€äº›ã€‚\nå‚è€ƒæ–‡ç« ï¼šsocket é€šä¿¡å…³äºbind IPåœ°å€\n5.1 æƒ…å†µä¸€æƒ…å†µä¸€ï¼šè‹¥æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹åˆ†çš„ç¨‹åºï¼Œåˆ›å»ºsockåå³å¯åœ¨è¯¥socketä¸Šç”¨recvfrom/sendtoæ–¹æ³•å‘é€æ¥å—æ•°æ®äº†ã€‚\nå› ä¸ºå®¢æˆ·ç«¯åªéœ€è¦ç”¨sendtoå‘é€æ•°æ®åˆ°æŒ‡å®šçš„åœ°å€ï¼Œæ‰€ä»¥ä¸éœ€è¦bindæœ¬åœ°çš„ipå’Œç«¯å£ã€‚å½“ç„¶è‹¥æ˜¯bindäº†ï¼Œç¨‹åºä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ï¼ŒåŒºåˆ«å°±æ˜¯ä¸bindçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨bind()æŒ‡å®šæœ¬æœºçš„socketå‚æ•°åœ°å€æ¥è¿›è¡Œå‘é€æ•°æ®åº“ã€‚\nè€ŒæœåŠ¡å™¨å› ä¸ºå¿…é¡»è¦æœ‰ä¸€ä¸ªæ˜¾å¼çš„ã€å›ºå®šçš„IPç«¯å£ä¾›å®¢æˆ·ç«¯è¿æ¥ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹æ˜¯å¿…é¡»è¦è¿›è¡Œbindçš„ã€‚\né‚£UDPæœåŠ¡å™¨æ˜¯æ€ä¹ˆçŸ¥é“å®¢æˆ·ç«¯çš„IPåœ°å€å’ŒUDPç«¯å£ï¼Ÿä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\nä¸€ç§æ˜¯å®¢æˆ·ç«¯å‘æ¶ˆæ¯æ˜¾å¼åœ°å‘Šè¯‰æœåŠ¡å™¨IPåœ°å€å’Œç«¯å£ï¼Œæ¶ˆæ¯å†…å®¹å°±åŒ…æ‹¬IPåœ°å€å’ŒUDPç«¯å£ã€‚\nå¦å¤–ä¸€ç§å°±æ˜¯éšå¼çš„ï¼ŒæœåŠ¡å™¨ä»æ”¶åˆ°çš„åŒ…çš„æŠ¥æ–‡å¤´éƒ¨ä¸­å¾—åˆ°åŒ…çš„æºIPåœ°å€å’Œç«¯å£ã€‚\n\n5.2 æƒ…å†µäºŒè‹¥æ˜¯æ²¡æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹åˆ†çš„ç¨‹åºï¼Œå³è‡ªå·±æŒ‡å®šç‰¹å®šç«¯å£çš„UDPå¯¹ç­‰é€šä¿¡ï¼ˆåŒå‘å¯¹ç­‰é€šä¿¡ï¼‰ï¼Œåˆ™å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½éœ€è¦bind() IPåœ°å€å’Œç«¯å£äº†ã€‚å› ä¸ºåŒæ–¹éƒ½éœ€è¦çŸ¥é“å¯¹æ–¹çš„IPå’Œç«¯å£æ‰èƒ½è¿›è¡Œæ•°æ®æ”¶å‘ã€‚\n5.3 å¤šæ’­ä½†UDPä¸­æ›´å¸¸ç”¨çš„æ˜¯å¹¿æ’­åˆ†å‘ï¼ŒæœåŠ¡ç«¯socketè®¾å®šä¸€ä¸ªX.X.X.255çš„å¹¿æ’­åœ°å€å¹¶å§‹ç»ˆå‘å®ƒå‘é€ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯å»ºç«‹çš„socketåªéœ€è¦åŠ å…¥è¿™ä¸ªå¹¿æ’­åœ°å€ä¾¿å¯ä»¥æ”¶åˆ°ï¼Œè¿™ä¸ªè¡Œä¸ºç§°ä¸ºåŠ å…¥å¤šæ’­ç»„ã€‚è¿™ä¾¿æ˜¯å¤šæ’­çš„æ¦‚å¿µã€‚\nä¸€ä¸ªå¤šæ’­ç»„å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹åŠ å…¥ï¼ŒåŠ å…¥äº†è¿™ä¸ªå¤šæ’­ç»„åï¼Œæ‰€æœ‰è¿›ç¨‹å°†æ”¶åˆ°ç›¸åŒçš„æ¶ˆæ¯ã€‚è¿™æ ·å°±å®ç°äº†ä¸€å¯¹å¤šé€šä¿¡ã€‚\nè¯·æ³¨æ„ï¼Œå¤šæ’­åœ°å€æ˜¯ä¸èƒ½è¿›è¡Œbindçš„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ç›¸å…³çš„æ¥å£å°†è‡ªå·±çš„fdåŠ å…¥ç›®æ ‡å¤šæ’­ç»„ï¼Œæ‰èƒ½ä»è¿™ä¸ªå¤šæ’­ç»„ä¸­æ”¶åˆ°ä¿¡æ¯ã€‚å‘é€æ–¹æ˜¯ä¸éœ€è¦åŠ å…¥å¤šæ’­ç»„çš„ï¼Œç›´æ¥å¾€å¤šæ’­ç»„çš„ipåœ°å€é‡Œé¢å‘å°±è¡Œäº†ã€‚\n\næ¥æ”¶æ–¹éœ€è¦è°ƒç”¨æ¥å£åŠ å…¥æŒ‡å®šå¤šæ’­ç»„\nå‘é€æ–¹ä¸éœ€è¦åŠ å…¥å¤šæ’­ç»„\n\n\né‡ç‚¹: åŠ å…¥äº†å¤šæ’­ç»„åï¼Œå°†æ— æ³•æ”¶åˆ°åŸæœ¬bindçš„ipåœ°å€çš„æ¶ˆæ¯ï¼æ¯”å¦‚ä¸€ä¸ªudpçš„socketï¼ŒåŸæœ¬bindäº†0.0.0.0:5000ï¼Œåœ¨åŠ å…¥å¤šæ’­ç»„ä¹‹å‰ï¼Œæˆ‘èƒ½æ­£å¸¸ä»5000ç«¯å£ä¸­æ”¶åˆ°ä¿¡æ¯ï¼›ä½†æ˜¯åŠ å…¥äº†å¤šæ’­ç»„åï¼Œæˆ‘å°±åªèƒ½ä»å¤šæ’­ç»„é‡Œé¢æ”¶ä¿¡æ¯äº†ã€‚\n\næ¥æ”¶æ–¹åŠ å…¥å¤šæ’­ç»„çš„æ¥å£å¦‚ä¸‹ï¼Œåœ¨æ¥æ”¶æ–¹çš„bindä¹‹åè°ƒç”¨å°±è¡Œäº†\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;#define MCAST_GROUP &quot;224.0.0.1&quot;#define MCAST_PORT 5007int main() &#123;    int sockfd;    struct sockaddr_in addr;    socklen_t addrlen = sizeof(addr);    char buffer[1024];    // åˆ›å»ºUDPå¥—æ¥å­—    if ((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) &#123;        perror(&quot;socket&quot;);        exit(EXIT_FAILURE);    &#125;    // è®¾ç½®æ¥æ”¶ç«¯åœ°å€å’Œç«¯å£    memset(&amp;addr, 0, sizeof(addr));    addr.sin_family = AF_INET;    addr.sin_addr.s_addr = htonl(INADDR_ANY);    addr.sin_port = htons(MCAST_PORT);    // ç»‘å®šæ¥æ”¶ç«¯åœ°å€å’Œç«¯å£    if (bind(sockfd, (struct sockaddr*)&amp;addr, sizeof(addr)) == -1) &#123;        perror(&quot;bind&quot;);        exit(EXIT_FAILURE);    &#125;    // åŠ å…¥å¤šæ’­ç»„    struct ip_mreq mreq;    mreq.imr_multiaddr.s_addr = inet_addr(MCAST_GROUP);    mreq.imr_interface.s_addr = htonl(INADDR_ANY);    if (setsockopt(sockfd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &amp;mreq, sizeof(mreq)) == -1) &#123;        perror(&quot;setsockopt&quot;);        exit(EXIT_FAILURE);    &#125;    // æ¥æ”¶æ•°æ®    if (recvfrom(sockfd, buffer, sizeof(buffer), 0, (struct sockaddr*)&amp;addr, &amp;addrlen) == -1) &#123;        perror(&quot;recvfrom&quot;);        exit(EXIT_FAILURE);    &#125;    // æ‰“å°æ¥æ”¶åˆ°çš„æ•°æ®    printf(&quot;Received: %s\\n&quot;, buffer);    // å…³é—­å¥—æ¥å­—    close(sockfd);    return 0;&#125;\n\nå› ä¸ºå¤šæ’­é€šå¸¸éœ€è¦ç»‘å®šç‰¹æ®Šçš„IPåœ°å€ï¼ˆä¾‹å¦‚ 224.0.0.0 åˆ° 239.255.255.255ï¼‰ï¼Œè¿™äº›IPåœ°å€æ˜¯æ— æ³•åœ¨å…¬ç½‘ä¸Šä½¿ç”¨çš„ï¼Œæ‰€ä»¥å¤šæ’­æ˜¯åªå­˜åœ¨äºå±€åŸŸç½‘ä¸­çš„æ¦‚å¿µã€‚è¦æƒ³å®ç°å¤šæ’­ï¼Œå‘é€ç«¯å’Œæ¥å—ç«¯å¿…é¡»å¤„äºåŒä¸€å±€åŸŸç½‘ã€‚\n5.4 ç›´æ’­æ¨æµ\nä»¥ä¸‹éƒ½æ˜¯æˆ‘æ ¹æ®è‡ªå·±çš„ç†è§£çé€¼é€¼çš„ï¼Œæœ‰é—®é¢˜è¿˜è¯·æŒ‡å‡ºã€‚\n\nå…¬ç½‘ä¸Šï¼Œä¹Ÿæœ‰ä½¿ç”¨UDPè¿›è¡Œâ€œå¤šæ’­â€çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ç›´æ’­å°±æ˜¯ä½¿ç”¨çš„UDPï¼ˆå› ä¸ºç›´æ’­æ˜¯ä¸€ä¸ªè§†é¢‘æµæ¨é€ç»™Nä¸ªç”¨æˆ·ï¼Œå¦‚æœæ¯ä¸ªç”¨æˆ·éƒ½å»ºç«‹ä¸€ä¸ªtcpè¿æ¥ä¼šæœ‰å·¨å¤§çš„æ¶ˆè€—ï¼ŒæœåŠ¡å™¨å‹æ ¹é¡¶ä¸ä½ã€‚å†åŠ ä¸Štcpéœ€è¦ç­‰å¾…ç”¨æˆ·å‘å›ackï¼Œåœ¨ä¸€å¯¹å¤šçš„å¤§å‹æ¨æµåœºæ™¯ä¸‹ï¼Œç­‰å¾…ackçš„æ¶ˆè€—ä¹Ÿä¸å®¹å¿½è§†ï¼‰\nç›´æ’­æ¨æµæƒ…å†µä¸‹ï¼Œå…¶å®å¹¶ä¸æ˜¯ç”¨å±€åŸŸç½‘å†…çš„å¤šæ’­å®ç°çš„ï¼Œè€Œæ˜¯ç”¨UDPæ¨¡æ‹Ÿå®ç°ä¸€ä¸ªç±»ä¼¼â€œå¤šæ’­â€çš„ä¸€å¯¹å¤šé€šä¿¡ã€‚\nä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æš‚æ—¶è®¤ä¸ºå®¢æˆ·æœºä¹Ÿæ˜¯æ‹¥æœ‰å…¬ç½‘IPçš„ï¼Œåç»­å­¦ä¹ åˆ°IPå±‚ï¼Œä¼šæåˆ°NATæŠ€æœ¯ï¼Œåˆ°æ—¶å€™å°±èƒ½ç†è§£å®¶å®½æ˜¯æ€ä¹ˆå’ŒæœåŠ¡å™¨é€šä¿¡çš„äº†\n\nå®¢æˆ·æœºæƒ³çœ‹ä¸»æ’­çš„ç›´æ’­ï¼Œç›´æ’­appä¼šå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°ç‰¹å®šçš„IP:ç«¯å£ï¼Œè¯·æ±‚å»ºç«‹ä¸€ä¸ªç›´æ’­æ¨æµçš„è¿æ¥ã€‚è¿™ä¸ªè¯·æ±‚ä¸­å°±ä¼šåŒ…å«å®¢æˆ·æœºè‡ªå·±çš„IPåœ°å€å’Œç«¯å£å·\næœåŠ¡ç«¯æ¥å—è¯·æ±‚ï¼Œè§£æå‡ºå®¢æˆ·æœºçš„IPå’Œç«¯å£å·ï¼Œå¹¶å°†å…¶åŠ å…¥åˆ°æ¨æµé˜Ÿåˆ—ä¸­\næœåŠ¡ç«¯æ¯ä¸€æ¬¡æ¨æµè§†é¢‘ï¼Œéƒ½éå†å…¨éƒ¨è¿æ¥åˆ°è¿™ä¸ªç›´æ’­ä¸Šçš„å®¢æˆ·æœºçš„IPç«¯å£ï¼Œé€šè¿‡UDPå‘ä»–ä»¬å‘é€è§†é¢‘æ•°æ®ã€‚\nè¿™æ ·å°±å®ç°äº†ä¸€ä¸ªæœåŠ¡ç«¯å‘å¤šä¸ªå®¢æˆ·æœºâ€œå¹¿æ’­â€ç›´æ’­æ¨æµæ•°æ®çš„é€šä¿¡ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å’Œå‰æ–‡æåˆ°çš„å±€åŸŸç½‘å†…çš„å¤šæ’­å®Œå…¨ä¸åŒï¼è¿™é‡Œæˆ‘ä»¬ä¾æ—§æ˜¯ç”¨å…¬ç½‘IPå’Œç«¯å£è¿›è¡Œä¸€å¯¹ä¸€é€šä¿¡çš„ï¼Œåªä¸è¿‡æœåŠ¡å™¨ç«¯è¿›è¡Œäº†å¤„ç†ï¼Œä¼šå‘æ‰€æœ‰å®¢æˆ·æœºå‘é€è§†é¢‘æµæ•°æ®ç½¢äº†ã€‚\nä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œç°åœ¨çš„ç›´æ’­é‚£ä¹ˆå¤šäººçœ‹ï¼Œä¸€ä¸ªçƒ­é—¨çš„ç›´æ’­é—´å‡ ä¸‡äººç”šè‡³ä¸Šåå‡ ä¸‡äººï¼ŒæœåŠ¡å™¨ç”¨éå†å‘é€çš„æ–¹å¼æ¥å¾—åŠå—ï¼Ÿå¦‚æœéå†å‘é€ä¸€æ¬¡æ‰€æœ‰å®¢æˆ·æœºçš„è€—æ—¶è¶…è¿‡äº†æ¯æ¬¡å‘é€çš„æ•°æ®å¤§å°ï¼Œå²‚ä¸æ˜¯å¤§å®¶éƒ½å¡é¡¿äº†å—ï¼Ÿ\n\nå¦‚æœä½ äº†è§£UDPæŠ¥æ–‡çš„ç»“æ„çš„è¯ï¼Œå°±çŸ¥é“UDPä¸€æ¬¡å‘é€æœ€å¤šåªèƒ½å‘é€64KBçš„æ•°æ®ï¼Œå¯¹äºç›´æ’­æ¨æµ&#x2F;è§†é¢‘æ¥è¯´ï¼Œ64KBçš„æ•°æ®ææ€•åªæœ‰1ç§’çš„è§†é¢‘ã€‚\n\nå…¶å®æˆ‘ä»¬ç›´æ’­å‡ºç°å¡é¡¿ï¼Œå°±æ˜¯è¿™ä¹ˆä¸ªåŸå› ã€‚æœåŠ¡ç«¯æ²¡æœ‰åŠæ³•æ¨æµé‚£ä¹ˆå¤šç”¨æˆ·äº†ï¼Œå°±ä¼šå‡ºç°å¡é¡¿ä¹ƒè‡³ä¸­æ–­çš„æƒ…å†µã€‚è€Œä¸”ï¼Œåªç”¨åŒä¸€å°æœåŠ¡å™¨å¯¹æ‰€æœ‰ç”¨æˆ·è¿›è¡Œå¹¿æ’­è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œè¿™æ—¶å€™å°±ä¼šå¼•å…¥ä¸åŒçº¿è·¯æ¥è¿›è¡Œä¼˜åŒ–ï¼š\n\nä¸»æ’­è¿æ¥ä¸€ä¸ªä¸»æœåŠ¡å™¨ï¼Œæ¨æµè‡ªå·±çš„ç›´æ’­è§†é¢‘æ•°æ®\nä¸»æœåŠ¡å™¨å°†è¯¥ç›´æ’­è§†é¢‘æµæ•°æ®å‘é€ç»™å…¨å›½å„åœ°çš„å­æœåŠ¡å™¨\nç”¨æˆ·Aè¿›å…¥ç›´æ’­é—´ï¼Œå°†è¯·æ±‚ä¸»æœåŠ¡å™¨ï¼Œå‘é€è‡ªå·±çš„IPå’Œç«¯å£å·\nä¸»æœåŠ¡å™¨å°†ç”¨æˆ·Açš„IPå’Œç«¯å£å·è§£æï¼Œæ ¹æ®IPå±åœ°ï¼Œå‘é€ç»™ä¸€ä¸ªè·ç¦»ç”¨æˆ·Aæœ€è¿‘çš„å­æœåŠ¡å™¨Bï¼Œè®©å­æœåŠ¡å™¨Bæ¥ç»™ç”¨æˆ·Aè¿›è¡Œç›´æ’­çš„æ¨æµ\næ­¤æ—¶ç”¨æˆ·Aæ”¶åˆ°çš„è§†é¢‘æ•°æ®ï¼šä¸»æ’­-&gt;ä¸»æœåŠ¡å™¨-&gt;å­æœåŠ¡å™¨B-&gt;ç”¨æˆ·Aï¼›\n\nè¿™æ ·ï¼Œæ¨æµçš„å‹åŠ›å°±èƒ½åˆ†æ•£ç»™ä¸åŒçš„å­æœåŠ¡å™¨çº¿è·¯ã€‚\næˆ‘ä»¬çœ‹ç›´æ’­çš„æ—¶å€™å¯ä»¥é€‰æ‹©çº¿è·¯åˆ‡æ¢ï¼Œå…¶å®ä¹Ÿå°±æ˜¯åœ¨ä¸åŒçš„å­æœåŠ¡å™¨ä¸­è¿›è¡Œåˆ‡æ¢ï¼Œå¦‚æœæŸä¸ªå­æœåŠ¡å™¨å‹åŠ›è¾ƒä½ï¼Œæ­¤æ—¶åœ¨è¿™ä¸ªå­æœåŠ¡å™¨çš„çº¿è·¯ä¸Šæ¥æ”¶ç›´æ’­æ¨æµï¼Œç”¨æˆ·çš„è§‚çœ‹ä½“éªŒå°±æ¯”è¾ƒæµç•…äº†ã€‚\n\nmoreâ€¦å…³äºudpç¼–ç¨‹çš„æ“ä½œåˆ°è¿™é‡Œå°±Overå•¦ï¼Œç°åœ¨æˆ‘ä»¬è®¤è¯†äº†å¤§éƒ¨åˆ†çš„ç½‘ç»œæ¥å£ï¼Œä¸‹ä¸€æ­¥çš„ç›®æ ‡ï¼Œå°±æ˜¯å®ç°tcpæœåŠ¡å™¨å•¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€Linuxã€‘æ¥å†™ä¸€ä¸ªtcpçš„æœåŠ¡ç«¯+å®¢æˆ·ç«¯","url":"/posts/2171263616/","content":"ä»Šå¤©è®©æˆ‘ä»¬æ¥å†™ä¸€ä¸ªtcpçš„æœåŠ¡å™¨&#x2F;å®¢æˆ·ç«¯ä»£ç \n\n\n\nå®Œæ•´ä»£ç è§æˆ‘çš„gitee è¿æ¥\né˜…è¯»æœ¬æ–‡å‰ï¼Œå»ºè®®å…ˆé˜…è¯»ğŸ‘‰ udpæœåŠ¡å™¨\n\n1.åŸºæœ¬æ¡†æ¶tcpçš„æœåŠ¡å™¨å’ŒudpæœåŠ¡å™¨åˆå§‹åŒ–æ¥å£æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼ŒåŒºåˆ«å°±åœ¨äºè¦é€‰æ‹©å­—èŠ‚æµè¿›è¡Œåˆå§‹åŒ–\nä½†æ˜¯åˆ°è¿è¡ŒçŠ¶æ€å°±ä¸åŒäº†\n\ntcpæ˜¯éœ€è¦è¿æ¥çš„\nudpä¸éœ€è¦è¿æ¥\n\næ‰€ä»¥å°±ä¼šå‡ºç°åˆ†æ­§ï¼šudpå¯ä»¥ç”¨sendtoå’Œreceveæ¥å‘é€&#x2F;æ¥æ”¶ä¿¡æ¯ï¼ŒæœåŠ¡ç«¯åªéœ€è¦ç›‘å¬ç‰¹å®šç«¯å£æ”¶åˆ°äº†ä»€ä¹ˆä¿¡æ¯ï¼›\nä½†tcpå¹¶ä¸èƒ½è¿™ä¹ˆåšï¼Œåœ¨é€šä¿¡ä¹‹å‰ï¼ŒtcpæœåŠ¡å™¨å¿…é¡»è¦å’Œå®¢æˆ·ç«¯å»ºç«‹é“¾æ¥ã€‚\nä¸¾ä¸ªä¸æ°å½“çš„ä¾‹å­ï¼ŒudpæœåŠ¡å™¨å¥½æ¯”ä¸€ä¸ªæ°´ç›†ï¼Œç­‰å¾…æ°´çš„æ³¨å…¥ï¼›è€ŒtcpæœåŠ¡å™¨æ˜¯ä¸ªæ°´ç®¡ï¼Œå¿…é¡»è¦ä¸¤å¤´è¿é€šäº†ï¼Œæ‰èƒ½å¼€å§‹æ³¨æ°´\n1.1 ç±»æˆå‘˜ç±»çš„æˆå‘˜å˜é‡å’Œudpå¾ˆç›¸ä¼¼ï¼Œéƒ½æ˜¯éœ€è¦æœåŠ¡å™¨çš„ipã€ç«¯å£ã€sockfdè¿™äº›ä¿¡æ¯ã€‚ä¸ºäº†æ›´å®¹æ˜“åŒºåˆ†ï¼Œå°†tcpæœåŠ¡å™¨çš„socket fdæ”¹ä¸º_listenSockï¼Œæ„ä¸ºç›‘å¬ç«¯å£\nclass TcpServer&#123;private:    // æœåŠ¡å™¨ç«¯å£å·    uint16_t _port;    // æœåŠ¡å™¨ipåœ°å€    string _ip;    // æœåŠ¡å™¨socket fdä¿¡æ¯    int _listenSock;&#125;;\n\n1.2 å¤´æ–‡ä»¶è¿™é‡Œå¯¹å¤´æ–‡ä»¶è¿›è¡Œä¸€å®šçš„è¯´æ˜ï¼Œå› ä¸ºæœåŠ¡å™¨ä»£ç ä¸­çš„å¤´æ–‡ä»¶å®åœ¨å¤ªå¤šäº†\nå½“ä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ¥å£çš„æ—¶å€™ï¼Œå¯ä»¥å»é‡‡ç”¨manæ‰‹å†Œæ¥è·å–è¯¥æ¥å£çš„å¤´æ–‡ä»¶ä¿¡æ¯\n#pragma once// å¤´æ–‡ä»¶å¤ªå¤šäº†ï¼Œæ‰€ä»¥æ–°èµ·ä¸€ä¸ªæ–‡ä»¶#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cstring&gt;#include &lt;cstdlib&gt;#include &lt;cassert&gt;#include &lt;ctype.h&gt;//åˆ¤æ–­å­—ç¬¦ä¸²å¤§å†™å°å†™æ¥å£éœ€è¦çš„åº“#include &lt;unistd.h&gt; #include &lt;strings.h&gt;// å¿½ç•¥å¤§å°å†™æ¯”è¾ƒstrcasecmp#include &lt;sys/types.h&gt;  //å¾ˆå¤šliunxç³»ç»Ÿæ¥å£éƒ½éœ€è¦è¿™ä¸ª#include &lt;sys/socket.h&gt; // ç½‘ç»œ#include &lt;netinet/in.h&gt; // ç½‘ç»œ#include &lt;arpa/inet.h&gt; // ç½‘ç»œusing namespace std;#define SOCKET_ERR 1#define BIND_ERR   2#define LISTEN_ERR 3#define USAGE_ERR  4#define CONN_ERR   5#define BUFFER_SIZE 1024\n\n2.åˆå§‹åŒ–æ¥å£çš„ä»‹ç»å°±è·Ÿéšå®ç°ä¸€æ­¥ä¸€æ­¥æ¥å§\n2.1 æ„é€ sockè¿™é‡Œå‡ºç°äº†tcpå’Œudpç¬¬ä¸€ä¸ªä¸åŒä¹‹å¤„ï¼Œtcpæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œudpé¢å‘çš„æ˜¯æ•°æ®æŠ¥\nTcpServer(uint16_t port,const string&amp; ip=&quot;&quot;) :_port(port), _ip(ip), _listenSock(-1)&#123;    // 1.åˆ›å»ºsocketå¥—æ¥å­—,é‡‡ç”¨å­—èŠ‚æµï¼ˆå³tcpï¼‰    _listenSock = socket(AF_INET, SOCK_STREAM, 0); //æœ¬è´¨æ˜¯æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶    if (_listenSock &lt; 0)    &#123;        logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), _listenSock);        exit(1);    &#125;    logging(DEBUG, &quot;socket create success: %d&quot;, _listenSock);&#125;\n\n2.2 åˆå§‹åŒ–sockaddr_inç»§ç»­ï¼Œåˆå§‹åŒ–sockaddr_inçš„æ“ä½œå’Œudpæ˜¯å®Œå…¨ä¸€è‡´çš„\n// 2. ç»‘å®šç½‘ç»œä¿¡æ¯ï¼ŒæŒ‡æ˜ip+port// 2.1 å…ˆå¡«å……åŸºæœ¬ä¿¡æ¯åˆ° struct sockaddr_instruct sockaddr_in local;memset(&amp;local,0,sizeof(local));//åˆå§‹åŒ–// åè®®å®¶æ—ï¼Œè®¾ç½®ä¸ºipv4local.sin_family = AF_INET; // ç«¯å£ï¼Œéœ€è¦è¿›è¡Œ æœ¬åœ°-&gt;ç½‘ç»œè½¬æ¢local.sin_port = htons(_port);// é…ç½®ip// å¦‚æœåˆå§‹åŒ–æ—¶å€™çš„ipä¸ºç©ºï¼Œåˆ™è°ƒç”¨INADDR_ANYä»£è¡¨ä»»æ„ipã€‚å¦åˆ™å¯¹ä¼ å…¥çš„ipè¿›è¡Œè½¬æ¢åèµ‹å€¼local.sin_addr.s_addr = _ip.empty() ? htonl(INADDR_ANY) : inet_addr(_ip.c_str());\n\n2.3 bindä¹Ÿæ˜¯ä¸€æ ·ï¼Œç»‘å®šæœåŠ¡å™¨çš„ipå’Œç«¯å£\n// 2.2 ç»‘å®šipç«¯å£if (bind(_listenSock,(const struct sockaddr *)&amp;local, sizeof(local)) == -1)&#123;    logging(FATAL, &quot;bind: %s:%d&quot;, strerror(errno), _listenSock);    exit(2);&#125;logging(DEBUG,&quot;socket bind success: %d&quot;, _listenSock);\n\n2.4 ç›‘å¬listenå¯¹äºtcpæœåŠ¡å™¨æ¥è¯´ï¼Œæˆå‘˜å˜é‡çš„_listenSockæ˜¯ç”¨æ¥ç›‘å¬çš„ï¼Œå³æ‰¾ä¸ªè€å“¥ä¸€ç›´ç›¯ç€äº‘æœåŠ¡å™¨çš„è¿™ä¸ªç«¯å£ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰éœ€è¦è¿æ¥å®ƒçš„å®¢æˆ·ç«¯\n#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int listen(int sockfd, int backlog);\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬çš„_listenSockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨äºé™åˆ¶åœ¨é˜»å¡ç­‰å¾…è¿æ¥çš„æ•°é‡\nThe backlog argument defines the maximum length to which the queue of pending connections for sockfd may grow.   If  a connection  request arrives when the queue is full, the client may receive an error with an indication of ECONNREFUSED or, if the underlying protocol supports retransmission, the request may be ignored so that a later reattempt  at  conâ€nection succeeds.\n\nç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œbacklogå‚æ•°é™åˆ¶äº†èƒ½è¢«é˜»å¡ç­‰å¾…è¿æ¥çš„æ•°é‡ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªæ•°é‡ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªECONNREFUSEDé”™è¯¯ã€‚äº¦æˆ–è€…å¦‚æœåè®®æ”¯æŒé‡ä¼ ï¼Œå¤šä½™çš„è¯·æ±‚ä¼šè¢«å¿½ç•¥ï¼Œåç»­å¯ä»¥é‡ä¼ \nmanæ‰‹å†Œä¸‹é¢çš„notesè¿˜æœ‰æ›´å¤šè§£é‡Š\nThe behavior of the backlog argument on TCP sockets changed with Linux 2.2.  Now it specifies  the  queue  length  for completely  established  sockets waiting to be accepted, instead of the number of incomplete connection requests.  The maximum length of the queue for incomplete sockets can be set using /proc/sys/net/ipv4/tcp_max_syn_backlog.  When synâ€cookies are enabled there is no logical maximum length and this setting is ignored.  See tcp(7) for more information. If  the  backlog  argument is greater than the value in /proc/sys/net/core/somaxconn, then it is silently truncated to that value; the default value in this file is 128.  In kernels before 2.4.25, this  limit  was  a  hard  coded  value,SOMAXCONN, with the value 128.\n\nå¦‚æœbacklogå‚æ•°é«˜äº/proc/sys/net/core/somaxconnä¸­çš„é»˜è®¤å€¼128ï¼Œåˆ™ä¼šè¢«æˆªæ–­ä¸º128\n\nåœ¨æˆ‘ä»¬è¿™é‡Œï¼Œå°†å…¶è®¾ç½®ä¸º5å³å¯ï¼Œåæ­£ä¹Ÿæ˜¯åšæµ‹è¯•å˜›ï¼Œé—®é¢˜ä¸å¤§\n// 3.ç›‘å¬// tcpæœåŠ¡å™¨æ˜¯éœ€è¦è¿æ¥çš„ï¼Œè¿æ¥ä¹‹å‰è¦å…ˆç›‘å¬æœ‰æ²¡æœ‰äººæ¥è¿if (listen(_listenSock, 5) &lt; 0)&#123;    logging(FATAL, &quot;listen: %s&quot;, strerror(errno));    exit(LISTEN_ERR);&#125;logging(DEBUG, &quot;listen: %s, %d&quot;, strerror(errno), _listenSock);\n\n3.è¿è¡Œåˆå§‹åŒ–åˆ°è¿™å°±å®Œæ¯•äº†ï¼Œä¸‹é¢å°±æ˜¯å¼€è·‘äº†\n3.1 accept#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);\n\nè¿™ä¸ªæ¥å£çš„ä½œç”¨å°±ç›¸å½“äºtcpä¸­çš„recevefromï¼Œä¼ å‚æ˜¯å®Œå…¨ç›¸åŒçš„ï¼›ä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå…¨æ–°çš„sockfd\n\ntcpéœ€è¦å’Œå®¢æˆ·ç«¯å»ºç«‹é“¾æ¥\né“¾æ¥éœ€è¦ç”¨socket fd æ¥ç®¡ç†\næ‰€ä»¥acceptå¿…é¡»è¿”å›æ–°çš„socket fdï¼Œè®©æœåŠ¡ç«¯æœ‰åŠæ³•ç®¡ç†æ–°çš„é“¾æ¥å’Œå·²æœ‰é“¾æ¥\nåŸæœ‰çš„socket fdä¸å—å½±å“\nå¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯æ¥è¿æ¥ï¼Œè¿›ç¨‹ä¼šåœ¨acceptå†…é˜»å¡ç­‰å¾…\n\nä¸‹ä¸ºmanæ‰‹å†Œä¸­çš„æè¿°\nThe  accept()  system  call  is  used  with connection-based socket types (SOCK_STREAM, SOCK_SEQPACKET).  It extracts the first connection request on the queue of pending connections for the listening socket, sockfd, creates a new connected  socket,  and  returns  a  new  file descriptor referring to that socket.  The newly created socket is not in the listening state.  The original socket sockfd is unaffected by this call.\n\nä¸¾ä¸ªä¾‹å­ï¼ŒtcpæœåŠ¡å™¨è‡ªèº«çš„socket fdåªä¼šç”¨æ¥ç›‘å¬ç«¯å£ä¸Šæœ‰æ²¡æœ‰æ¶ˆæ¯ï¼Œå½“ç›‘å¬åˆ°æœ‰æ¶ˆæ¯å¹¶é€šè¿‡acceptå»ºç«‹è¿æ¥åï¼Œå°±ä¼šè®©å¦å¤–ä¸€ä½æœåŠ¡å‘˜æ¥å¯¹è¿™ä¸ªè¿æ¥æä¾›æœåŠ¡ã€‚\nwhile(1)&#123;    struct sockaddr_in peer;    socklen_t len = sizeof(peer);    // è·å–è¿æ¥    int conet = accept(_listenSock,(struct sockaddr*)&amp;peer,&amp;len);    if(conet&lt;0)    &#123;        logging(FATAL, &quot;accept: %s&quot;, strerror(errno));        exit(CONN_ERR);//è¿æ¥é”™è¯¯    &#125;    //ã€‚ã€‚ã€‚&#125;\n\næ³¨æ„è¿™é‡Œlençš„å‚æ•°æ˜¯socklen_tï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´å½¢\ntypedef __socklen_t socklen_t;__STD_TYPE __U32_TYPE __socklen_t;#define __U32_TYPE\t\tunsigned int\n\n3.2 è·å–è¿æ¥ä¿¡æ¯è¿™éƒ¨åˆ†å’Œudpæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œé€šè¿‡acceptè¿”å›çš„socket fdï¼Œè·å–ç”¨æˆ·çš„ipå’Œç«¯å£è€¨\n// è·å–è¿æ¥ä¿¡æ¯string senderIP = inet_ntoa(peer.sin_addr);// æ¥æºipuint16_t senderPort = ntohs(peer.sin_port); // æ¥æºç«¯å£logging(DEBUG, &quot;accept: %s | %s[%d], socket fd: %d&quot;, strerror(errno), senderIP.c_str(), senderPort, conet);\n\nå…¶å®åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡ŒæœåŠ¡å™¨è¿›è¡Œæµ‹è¯•äº†ã€‚å› ä¸ºtcpçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†™å®¢æˆ·ç«¯ï¼Œç›´æ¥ç”¨æµè§ˆå™¨å°±èƒ½è¿ä¸ŠæœåŠ¡ç«¯\nint main(int argc,char* argv[])&#123;    //å‚æ•°åªæœ‰ä¸¤ä¸ªï¼ˆç«¯å£/ipï¼‰æ‰€ä»¥å‚æ•°ä¸ªæ•°åº”è¯¥æ˜¯2-3    if(argc!=2 &amp;&amp; argc!=3)    &#123;        cout &lt;&lt; &quot;Usage: &quot; &lt;&lt; argv[0] &lt;&lt; &quot; port [ip]&quot; &lt;&lt; endl;        return 1;    &#125;        string ip;    // 3ä¸ªå‚æ•°ï¼Œæœ‰ip    if(argc==3)    &#123;        ip = argv[2];    &#125;    TcpServer t(atoi(argv[1]),ip);    t.start();    return 0;&#125;\n\nå…ˆç¼–è¯‘åæ‰§è¡Œä»£ç ï¼Œè®©tcpæœåŠ¡å™¨è¿è¡Œèµ·æ¥\n\néšååœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥å…¬ç½‘ip:ç«¯å£ï¼ˆå…ˆè¦å¼€å¯é˜²ç«å¢™å†…çš„ç«¯å£ï¼‰\n\næ­¤æ—¶ä¼šå‘ç°ä»€ä¹ˆéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œè¿™æ˜¯å¯¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰å†™å‰ç«¯ï¼Œä¹Ÿæ²¡æœ‰æä¾›ä»»ä½•æœåŠ¡ã€‚ä½†æ˜¯æ¥åˆ°åå°ï¼Œå¯ä»¥çœ‹åˆ°å‡ºç°äº†ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œå¹¶æ˜¾ç¤ºå‡ºäº†ip+ç«¯å£\n\n3.3 æä¾›æœåŠ¡ï¼ˆçº¿ç¨‹ï¼‰æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯å†™ä¸€ä¸ªç®€å•çš„æœåŠ¡äº†ï¼Œè¿™é‡Œæˆ‘å†™çš„æ˜¯å­—ç¬¦ä¸²è½¬ASCIIç ï¼Œä¼šå°†å‘å‡ºå»çš„å­—ç¬¦ä¸²çš„asciiç åŠ åŠ èµ·æ¥åè¿”å›\n3.3.1 é—®é¢˜1 å¦‚ä½•é€šä¿¡æ­¤æ—¶é—®é¢˜å°±æ¥äº†ï¼ŒtcpæœåŠ¡å™¨ä¸èƒ½ä½¿ç”¨recevefromå’Œsendtoï¼Œé‚£ä¹ˆè·å–åˆ°socketä¹‹åè¦æ€ä¹ˆè¿›è¡Œé€šä¿¡å‘¢ï¼Ÿ\nç­”æ¡ˆæ˜¯ï¼šç”¨linuxçš„æ–‡ä»¶è¯»å†™æ¥å£ï¼Œreadå’Œwriteã€‚åˆ«å¿˜äº†ï¼Œsocket fdæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªlinuxä¸‹çš„æ–‡ä»¶æè¿°ç¬¦ï¼\n3.3.2 é—®é¢˜2 å¤šå®¢æˆ·ç«¯tcpæœåŠ¡å™¨è¦æƒ³ç»™å¤šä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œå°±å¿…é¡»é‡‡ç”¨å¤šçº¿ç¨‹&#x2F;å¤šè¿›ç¨‹çš„æ–¹å¼æ¥å®ç°æ“ä½œã€‚å¦åˆ™ä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼ŒæœåŠ¡ç«¯å› ä¸ºæä¾›æœåŠ¡è€Œæ²¡æœ‰acceptï¼Œæ— æ³•é“¾æ¥ä¸Šä¸‹ä¸€ä¸ªå®¢æˆ·ç«¯\nwhile(1)&#123;    //accept è·å–åˆ°é“¾æ¥ä¸Šçš„å®¢æˆ·ç«¯        while(1)    &#123;         //å¦‚æœåœ¨è¿™é‡Œæä¾›æœåŠ¡ï¼Œåˆ™ä¼šå…¶ä»–è¿æ¥ä¼šåœ¨listené‡Œé¢é˜»å¡    \t//åªæœ‰å½“å‰æœåŠ¡ç»ˆæ­¢äº†ï¼Œå…¶ä»–å®¢æˆ·ç«¯çš„å…¶ä¸­ä¹‹ä¸€æ‰èƒ½è¿ä¸ŠæœåŠ¡å™¨    &#125;&#125;\n\n3.3.3 é—®é¢˜3 çº¿ç¨‹ä¼ å‚æ—¢ç„¶éœ€è¦é‡‡ç”¨å¤šçº¿ç¨‹æœåŠ¡ï¼Œé‚£å°±éœ€è¦è®¾å®šå¥½ç»™çº¿ç¨‹ä¼ çš„å‚æ•°ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥acceptçš„è¿”å›å€¼socket fdå³å¯è¿›è¡Œread/write\nä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰“å°debugæ¶ˆæ¯ï¼Œè¦çŸ¥é“å½“å‰æ˜¯è°å‘ä½ å‘é€äº†è¿™æ¡æ¶ˆæ¯ï¼Œipå’Œç«¯å£æ˜¯ä»€ä¹ˆã€‚\nä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œè¿™é‡Œå°è£…ä¸€ä¸ªç»“æ„ä½“ï¼Œå°†socket fdï¼Œå®¢æˆ·ç«¯çš„ip+ç«¯å£å°è£…æˆä¸€ä¸ªå‚æ•°è¿›è¡Œä¼ å‚ï¼ˆçº¿ç¨‹çš„å‡½æ•°åªèƒ½ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼‰\nstruct ClientData&#123;    int _fd;    uint16_t _port;    string _ip;    TcpServer* _this;    ClientData(int fd,uint16_t port,const string&amp; ip,TcpServer* this1)        :_fd(fd),_port(port), _ip(ip),_this(this1)    &#123;&#125;&#125;;\n\nä½ å¯èƒ½ä¼šæƒ³åˆ°å¦å¤–ä¸€ä¸ªåŠæ³•ï¼Œé‚£å°±æ˜¯åœ¨tcpæœåŠ¡å™¨çš„classä¸­æ–°å¢ä¸€ä¸ªmapæˆå‘˜å˜é‡ï¼Œç”¨äºæ˜ å°„socket fdå’Œå®¢æˆ·ç«¯ä¿¡æ¯çš„é”®å€¼å¯¹ï¼Œä½†æ˜¯è¿™æ— æ³•å®ç°ã€‚\nå› ä¸ºåœ¨ç±»ä¸­è®¾è®¡çš„å¤šçº¿ç¨‹å‡½æ•°ï¼Œä¸ºäº†å»æ‰é»˜è®¤ä¼ å…¥çš„thisæŒ‡é’ˆï¼Œå¿…é¡»è¦è®¾ç½®æˆstaticé™æ€çš„ï¼Œæ­¤æ—¶è¯¥é™æ€å‡½æ•°æ— æ³•è®¿é—®ç±»å†…æˆå‘˜ï¼\n// å› ä¸ºéœ€è¦å–æ¶ˆthisæŒ‡é’ˆï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®æˆé™æ€çš„static void* threadRoutine(void*args)&#123;       pthread_detach(pthread_self()); //è®¾ç½®çº¿ç¨‹åˆ†ç¦»    ClientData* data=(ClientData*)args;    // é€šè¿‡é¢„å…ˆè®¾ç½®çš„thisæŒ‡é’ˆæ¥è®¿é—®ç±»å†…æˆå‘˜ï¼Œå¹¶è¿›è¡Œä¼ å‚    data-&gt;_this-&gt;transService(data-&gt;_fd,data-&gt;_ip,data-&gt;_port);    delete data;    return nullptr;&#125;\n\n3.3.4 æœåŠ¡ä»£ç è§£å†³äº†ä¸Šé¢çš„é—®é¢˜ï¼Œå°±å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹çœ‹æœåŠ¡ç«¯çš„ä»£ç äº†\n// æä¾›æœåŠ¡pthread_t service;// å› ä¸ºè¿™ä¸ªæˆå‘˜ä½¿ç”¨èŒƒå›´æå°ï¼Œæ‰€ä»¥é‡‡ç”¨new/deleteï¼Œé¿å…å ç”¨å¤ªå¤šç©ºé—´ClientData* data = new ClientData(conet,senderPort,senderIP,this);pthread_create(&amp;service,nullptr,threadRoutine,(void*)data);\n\nåœ¨acceptä¹‹åï¼Œé€šè¿‡çº¿ç¨‹æ“ä½œç”¨çº¿ç¨‹æ¥æä¾›æœåŠ¡\nstatic void* threadRoutine(void*args)&#123;       pthread_detach(pthread_self()); //è®¾ç½®çº¿ç¨‹åˆ†ç¦»    ClientData* data=(ClientData*)args;    // é€šè¿‡é¢„å…ˆè®¾ç½®çš„thisæŒ‡é’ˆæ¥è®¿é—®ç±»å†…æˆå‘˜ï¼Œå¹¶è¿›è¡Œä¼ å‚    data-&gt;_this-&gt;transService(data-&gt;_fd,data-&gt;_ip,data-&gt;_port);    delete data;    return nullptr;&#125;\n\nthreadRoutineçš„ä½œç”¨å°±æ˜¯æŠŠçº¿ç¨‹çš„å•å‚æ•°è½¬ä¸ºå¤šå‚æ•°ï¼Œä¼ ç»™çœŸæ­£ç”¨æ¥æœåŠ¡çš„å‡½æ•°ã€‚å‡½æ•°çš„æ“ä½œå¾ˆç®€å•ï¼Œå°±æ˜¯Linuxä¸‹æ–‡ä»¶æ“ä½œçš„è¯»å†™ã€‚\nè¯»å†™æˆåŠŸåï¼Œå°†å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯è½¬æˆASCIIç çš„å’Œå‘å›ç»™å®¢æˆ·ç«¯\nvoid transService(int sockfd, const string &amp;clientIp, uint16_t clientPort)&#123;    assert(sockfd &gt;= 0);    assert(!clientIp.empty());    assert(clientPort&gt;0);    // å¼€å§‹æœåŠ¡    char buf[BUFFER_SIZE];    while(1)    &#123;        // è¯»å–å®¢æˆ·ç«¯å‘æ¥çš„ä¿¡æ¯,sæ˜¯è¯»å–åˆ°çš„å­—èŠ‚æ•°        ssize_t s = read(sockfd, buf, sizeof(buf)-1);        if(s&gt;0)        &#123;            buf[s]=&#x27;\\0&#x27;;//æ‰‹åŠ¨æ·»åŠ å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦            if(strcasecmp(buf,&quot;quit&quot;)==0)            &#123;//å®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º                break;            &#125;            // æœåŠ¡            string tmp = buf;            int ret = str2ascii(tmp);//è·å–å­—ç¬¦ä¸²çš„asciiæ€»å’Œ            cout &lt;&lt; ret &lt;&lt; endl;            string retS =  to_string(ret);//è½¬å­—ç¬¦ä¸²            cout &lt;&lt; retS &lt;&lt; endl;            write(sockfd,retS.c_str(),retS.size());//å†™å…¥        &#125;        else if (s == 0)        &#123;//s == 0ä»£è¡¨å¯¹æ–¹å…³é—­,å®¢æˆ·ç«¯é€€å‡º            logging(DEBUG, &quot;client quit: %s[%d]&quot;, clientIp.c_str(), clientPort);            break;        &#125;        else        &#123;            logging(DEBUG, &quot;read err: %s[%d] -  %s&quot;, clientIp.c_str(), clientPort, strerror(errno));            continue;        &#125;    &#125;    close(sockfd);    logging(DEBUG,&quot;server quit %d&quot;,sockfd);&#125;private:    // æœåŠ¡å‡½æ•°å¯ä»¥ä¸æš´éœ²    int str2ascii(const string&amp; str)    &#123;        int ret = 0;        for(auto e:str)        &#123;            ret += e;        &#125;        return ret;    &#125;\n\n3.4 æä¾›æœåŠ¡ï¼ˆå­è¿›ç¨‹ï¼‰ä¸Šé¢çš„ä»£ç é‡‡ç”¨çš„æ˜¯çº¿ç¨‹æ¥æä¾›æœåŠ¡ï¼Œé™¤äº†çº¿ç¨‹ï¼Œæˆ‘ä»¬è¿˜æœ‰çˆ¶å­è¿›ç¨‹çš„æ–¹å¼ï¼Œä¹Ÿèƒ½é¿å…é˜»å¡\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçˆ¶å­è¿›ç¨‹éƒ½éœ€è¦å…³é—­æ‰å¯¹æ–¹ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œé¿å…å‡ºç°æ–‡ä»¶æè¿°ç¬¦åœ¨æœåŠ¡ç»“æŸåè¿˜æ²¡æœ‰å…³é—­çš„æƒ…å†µ\npid_t id = fork();if(id == 0)&#123;    close(_listenSock);//å› ä¸ºå­è¿›ç¨‹ä¸éœ€è¦ç›‘å¬ï¼Œæ‰€ä»¥å…³é—­æ‰ç›‘å¬socket    //å­è¿›ç¨‹    transService(conet, senderIP, senderPort);    exit(0);// æœåŠ¡ç»“æŸåï¼Œé€€å‡ºï¼Œå­è¿›ç¨‹ä¼šè¿›å…¥åƒµå°¸çŠ¶æ€ç­‰å¾…çˆ¶è¿›ç¨‹å›æ”¶&#125;// çˆ¶è¿›ç¨‹close(conet); // å› ä¸ºæ­¤æ—¶æ˜¯å­è¿›ç¨‹æä¾›æœåŠ¡ï¼Œconetä¼šæœ‰æ‹·è´ï¼Œç›¸å½“äºæœ‰ä¸¤ä¸ªè¿›ç¨‹æ‰“å¼€äº†è¯¥æ–‡ä»¶// å¦‚æœçˆ¶è¿›ç¨‹ä¸å…³é—­ï¼Œå³ä¾¿å­è¿›ç¨‹ç»“æŸæœåŠ¡äº†ï¼Œè¯¥æ–‡ä»¶æè¿°ç¬¦ä¹Ÿä¼šä¿æŒå¼€å¯pid_t ret = waitpid(id, nullptr, 0);\n\nç›´æ¥è¿™æ ·å†™æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯çˆ¶è¿›ç¨‹æ²¡æœ‰åŠæ³•æ­£å¸¸é‡Šæ”¾å­è¿›ç¨‹çš„èµ„æº\n\nå¦‚æœè¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œé‚£å°±è¿èƒŒäº†åˆè¡·ï¼Œå®Œå…¨æ²¡æœ‰æ„ä¹‰\nå¦‚æœè¿›è¡Œéé˜»å¡ç­‰å¾…ï¼Œåœ¨waitpidç»“æŸä¹‹åï¼Œçˆ¶è¿›ç¨‹ç›´æ¥å»å¹²å…¶ä»–äº‹äº†ï¼Œå®Œå…¨å¿˜è®°äº†è¿™é‡Œçš„è¿™ä¸ªå­è¿›ç¨‹\n\næ‰€ä»¥æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨å­è¿›ç¨‹é€€å‡ºï¼Œå‘çˆ¶è¿›ç¨‹å‘é€ä¿¡å·çš„æ—¶å€™å›æ”¶å­è¿›ç¨‹\n3.4.1 ä¿¡å·å›æ”¶å­è¿›ç¨‹é€šè¿‡è‡ªå®šä¹‰æ•æ‰ç³»ç»Ÿä¿¡å·ï¼Œæ¥å›æ”¶å­è¿›ç¨‹\nsignal(SIGCHLD, FreeChild);//è‡ªå®šä¹‰æ•æ‰\n\n// å›æ”¶å­è¿›ç¨‹void FreeChild(int signo)&#123;    assert(signo == SIGCHLD);    while (true)    &#123;        //å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†ï¼Œwaitpidå°±ä¼šè°ƒç”¨å¤±è´¥        pid_t id = waitpid(-1, nullptr, WNOHANG); // éé˜»å¡ç­‰å¾…        if (id &gt; 0)        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æˆåŠŸ, child pid: &quot; &lt;&lt; id &lt;&lt; endl;        &#125;        else if(id == 0)        &#123;            //è¿˜æœ‰å­è¿›ç¨‹æ²¡æœ‰é€€å‡º            cout &lt;&lt; &quot;å°šæœ‰æœªé€€å‡ºçš„å­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»§ç»­è¿è¡Œ&quot; &lt;&lt; endl;            break;//é€€å‡ºç­‰å¾…å­è¿›ç¨‹        &#125;        else        &#123;            cout &lt;&lt; &quot;çˆ¶è¿›ç¨‹ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ&quot; &lt;&lt; endl;            break;        &#125;    &#125;&#125;\n\né™¤äº†è‡ªå®šä¹‰æ•æ‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®æˆignoreä¸æ­ç†å­è¿›ç¨‹ï¼Œè¿™æ ·å­è¿›ç¨‹é€€å‡ºçš„æ—¶å€™å°±ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾\nsignal(SIGCHLD, SIG_IGN);\n\n3.4.2 çˆ·çˆ·è¿›ç¨‹è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªéªšæ“ä½œï¼Œé‚£å°±æ˜¯åœ¨åˆ›å»ºå­è¿›ç¨‹ä¹‹åï¼Œå†åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹\n// æä¾›æœåŠ¡ï¼ˆå­™å­è¿›ç¨‹ï¼‰-2pid_t id = fork();if(id == 0)&#123;    close(_listenSock);//å› ä¸ºå­è¿›ç¨‹ä¸éœ€è¦ç›‘å¬ï¼Œæ‰€ä»¥å…³é—­æ‰ç›‘å¬socket    //åˆåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¤§äº0ä»£è¡¨æ˜¯çˆ¶è¿›ç¨‹ï¼Œå³åˆ›å»ºå®Œå­è¿›ç¨‹åçˆ¶è¿›ç¨‹ç›´æ¥é€€å‡º    if(fork()&gt;0)&#123;        exit(0);    &#125;    // å­™å­è¿›ç¨‹æ‰§è¡Œ    transService(conet, senderIP, senderPort);    exit(0);// æœåŠ¡ç»“æŸåï¼Œé€€å‡ºï¼Œå­è¿›ç¨‹ä¼šè¿›å…¥åƒµå°¸çŠ¶æ€ç­‰å¾…çˆ¶è¿›ç¨‹å›æ”¶&#125;// çˆ·çˆ·è¿›ç¨‹close(conet); pid_t ret = waitpid(id, nullptr, 0); //æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ç”¨é˜»å¡å¼ç­‰å¾…äº†assert(ret &gt; 0);//retå¦‚æœä¸å¤§äº0ï¼Œåˆ™ä»£è¡¨ç­‰å¾…å‘ç”Ÿäº†é”™è¯¯\n\né‡‡ç”¨è¿™ç§åŠæ³•ä»¥åï¼Œç”±äºçˆ¶è¿›ç¨‹é€€å‡ºäº†ï¼Œå­™å­è¿›ç¨‹ä¼šç›´æ¥è¢«æ“ä½œç³»ç»Ÿæ¥ç®¡ã€‚ä¸‹å›¾ä¸­èƒ½çœ‹åˆ°è¿™äº›è¿›ç¨‹çš„çˆ¶è¿›ç¨‹éƒ½æ˜¯1ï¼Œå³æ“ä½œç³»ç»Ÿã€‚è¿™æ—¶å€™æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ‹…å¿ƒå­è¿›ç¨‹çš„é‡Šæ”¾é—®é¢˜äº†\n\n4.å®¢æˆ·ç«¯å®¢æˆ·ç«¯éƒ¨åˆ†çš„ä»£ç å’Œudpä¹Ÿå¾ˆç›¸ä¼¼ï¼Œåªä¸è¿‡å°†sendtoæ”¹æˆäº†write\nä¸‹æ–¹æä¾›äº†å®¢æˆ·ç«¯çš„ä»£ç ï¼Œéƒ½å†™äº†æ³¨é‡ŠğŸ˜\n#include &quot;utils.h&quot;// ./clientTcp serverIp serverPortint main(int argc, char *argv[])&#123;    if (argc != 3)//å®¢æˆ·ç«¯å¿…é¡»è¦æœ‰3ä¸ªå‚æ•°    &#123;        cerr &lt;&lt; &quot;Usage:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; serverIp serverPort&quot; &lt;&lt; endl;        cerr &lt;&lt; &quot;Example:\\n\\t&quot; &lt;&lt; argv[0] &lt;&lt; &quot; 127.0.0.1 8080\\n&quot;                &lt;&lt; endl;        exit(USAGE_ERR);    &#125;    // è§£ææœåŠ¡ç«¯çš„ipå’Œç«¯å£    string serverIp = argv[1];    uint16_t serverPort = atoi(argv[2]);    // 1. åˆ›å»ºtcpçš„socket SOCK_STREAM    int sock = socket(AF_INET, SOCK_STREAM, 0);    if (sock &lt; 0)    &#123;        cerr &lt;&lt; &quot;socket: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(SOCKET_ERR);    &#125;    // 2. connectï¼Œå‘èµ·é“¾æ¥è¯·æ±‚ï¼Œä½ æƒ³è°å‘èµ·è¯·æ±‚å‘¢ï¼Ÿï¼Ÿå½“ç„¶æ˜¯å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚å–½    // 2.1 å…ˆå¡«å……éœ€è¦è¿æ¥çš„è¿œç«¯ä¸»æœºçš„åŸºæœ¬ä¿¡æ¯    struct sockaddr_in server;    memset(&amp;server, 0, sizeof(server));    server.sin_family = AF_INET;    server.sin_port = htons(serverPort);    inet_aton(serverIp.c_str(), &amp;server.sin_addr);    // 2.2 å‘èµ·è¯·æ±‚ï¼Œconnect ä¼šè‡ªåŠ¨bind    if (connect(sock, (const struct sockaddr *)&amp;server, sizeof(server)) != 0)    &#123;        cerr &lt;&lt; &quot;connect: &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        exit(CONN_ERR);    &#125;    cout &lt;&lt; &quot;connect success: &quot; &lt;&lt; sock &lt;&lt; endl;    // å®¢æˆ·ç«¯å‘ç°çš„æ¶ˆæ¯    string message;    while (1)    &#123;        message.clear();//æ¯æ¬¡å¾ªç¯å¼€å§‹ï¼Œéƒ½æ¸…ç©ºä¸€ä¸‹msg        cout &lt;&lt; &quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;;        getline(cin, message);//è·å–è¾“å…¥        // å¦‚æœå®¢æˆ·ç«¯è¾“å…¥äº†quitï¼Œåˆ™é€€å‡º        if (strcasecmp(message.c_str(), &quot;quit&quot;) == 0)            break;        // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯        ssize_t s = write(sock, message.c_str(), message.size());        if (s &gt; 0) // å†™å…¥æˆåŠŸ        &#123;            message.clear();//æ¸…ç©ºè¾“å…¥çš„æ¶ˆæ¯            message.resize(BUFFER_SIZE);            // å› ä¸ºstringçš„c_stræœ¬è´¨ä¸Šæ˜¯è¿”å›åœ°å€ï¼Œæ‰€ä»¥å¼ºè½¬åæ˜¯å¯ä»¥å¾€é‡Œé¢å†™å…¥çš„            s = read(sock, (char *)(message.c_str()), BUFFER_SIZE);// è·å–æœåŠ¡ç«¯çš„ç»“æœ            if (s &gt; 0)// è¯»å–æˆåŠŸ            &#123;                message[s] = &#x27;\\0&#x27;;//è¿½åŠ \\0            &#125;            // æ‰“å°è¿”å›å€¼            cout &lt;&lt; &quot;Server Echo# &quot; &lt;&lt; message &lt;&lt; endl;        &#125;        else if (s &lt;= 0) // å†™å…¥å¤±è´¥        &#123;            break;        &#125;    &#125;    // å…³é—­æ–‡ä»¶æè¿°ç¬¦    close(sock);    return 0;&#125;\n\n4.1 è¿è¡Œæµ‹è¯•å…ˆè¿è¡ŒæœåŠ¡ç«¯ï¼Œå†è¿è¡Œå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è¾“å…¥åï¼ŒæœåŠ¡çŸ­ä¼šè¿”å›å­—ç¬¦ä¸²çš„asciiç æ€»å’Œ\n\nè€Œå®¢æˆ·ç«¯è¾“å…¥quitåï¼Œåœ¨æœåŠ¡ç«¯å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯é€€å‡ºï¼Œä½†æœåŠ¡ç«¯å¹¶æ²¡æœ‰æ¨å‡ºï¼Œæ­£åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿æ¥\n\n5.çº¿ç¨‹æ± åœ¨ä¸Šé¢çš„æ“ä½œä¸­ï¼Œæ¯æ¬¡æä¾›æœåŠ¡éƒ½éœ€è¦å½“åœºæ–°å»ºä¸€ä¸ªçº¿ç¨‹ã€‚å¯¹äºtcpè¿™ç§è¦æ±‚é«˜æ€§èƒ½çš„ç½‘ç»œæœåŠ¡å™¨è€Œè¨€ï¼Œå…¶å®æ˜¯ä¸å¤ªåˆé€‚çš„ã€‚ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›è¶Šæ—©ç»™å®¢æˆ·å»ºç«‹è”ç³»è¶Šå¥½ï¼Œè€Œä¸æ˜¯é£Ÿå®¢éƒ½æ¥äº†è€æ¿æ‰å»ä¹°èœã€‚\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠæˆ‘ä»¬å†™çš„çº¿ç¨‹æ± å’ŒtcpæœåŠ¡å™¨ç»™è”ç³»èµ·æ¥ï¼\n\nçº¿ç¨‹æ± çš„ä»£ç è§æˆ‘çš„giteeï¼Œæ­¤å¤„åªè¯´æ˜taskç±»çš„ç¼–å†™\n\n5.1 taskå…ˆå‰ç¼–å†™çº¿ç¨‹æ± çš„æ—¶å€™ï¼Œå°†çº¿ç¨‹æ± è¦å¤„ç†çš„ä»»åŠ¡å†™æˆäº†ä¸€ä¸ªtaskç±»ï¼Œå¹¶è§„å®šæ‰€æœ‰taskç±»éƒ½éœ€è¦æä¾›ä¸€ä¸ª()æ“ä½œç¬¦é‡è½½ï¼Œå³ä»¿å‡½æ•°ã€‚è¿™æ ·çº¿ç¨‹æ± å°±å¯ä»¥ä¸€è§†åŒä»çš„å¤„ç†è¿™äº›å·¥ä½œï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ–°å¢çš„å·¥ä½œæ·»åŠ åˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢\nclass Task&#123;    using callback_t = std::function&lt;void (int, std::string, uint16_t)&gt;;//ç›¸å½“äºtypedefpublic:    Task() = default;    // å°†éœ€è¦è°ƒç”¨çš„å‡½æ•°ä¼ å…¥ï¼Œç›¸å½“äºé€šç”¨    Task(int sockfd, const std::string &amp;clientIP, uint16_t clientPort,callback_t func)        : _sockfd(sockfd), _ip(clientIP), _port(clientPort),_func(func)    &#123;    &#125;    // ä»¿å‡½æ•°    void operator()()    &#123;        logging(DEBUG, &quot;TID[%p] = %s:%d START&quot;,\\            pthread_self(), _ip.c_str(), _port);        _func(_sockfd, _ip, _port);        logging(DEBUG, &quot;TID[%p] = %s:%d END  &quot;,\\            pthread_self(), _ip.c_str(), _port);    &#125;private:    int _sockfd;    std::string _ip;    uint16_t _port;    callback_t _func;&#125;;\n\nè¿™é‡Œï¼Œæˆ‘åˆå°†taské˜Ÿåˆ—ç»™å°è£…æˆäº†ä¸€ä¸ªå¯ä»¥æ¥æ”¶å‡½æ•°æŒ‡é’ˆçš„æ–¹å¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªè¦æˆ‘ä»¬ä»»åŠ¡çš„å‡½æ•°å‚æ•°ä¸º(SOCKET,IP,PROT)ï¼Œå°±èƒ½ä¼ å…¥ç»™è¿™ä¸ªtaskç±»ï¼Œè®©çº¿ç¨‹æ± æ¥è¿è¡Œ\n5.2 tcpServerçš„å¤„ç†å› ä¸ºéœ€è¦çº¿ç¨‹æ± ï¼Œæˆ‘ä»¬åœ¨tcpserverä¸­æ·»åŠ ä¸€ä¸ªçº¿ç¨‹æ± çš„æŒ‡é’ˆï¼Œé€šè¿‡çº¿ç¨‹æ± çš„ç±»åæ¥è·å–å•ä¾‹ï¼Œèµ‹å€¼ç»™æˆå‘˜å˜é‡ã€‚å¹¶è®©è·å–åˆ°çš„å•ä¾‹çº¿ç¨‹æ± å¼€å§‹è¿è¡Œ\n// 4.è·å–çº¿ç¨‹æ±  å•ä¾‹_tpool = ThreadPool&lt;Task&gt;::getInstance(4);_tpool-&gt;start();//å¼€å§‹è¿è¡Œ\n\nåœ¨startå‡½æ•°ä¸­ï¼Œåˆ™å°†ä¹‹å‰çš„ä»»åŠ¡å‡½æ•°å®ä¾‹åŒ–ä¸ºä¸€ä¸ªtaskï¼Œå¹¶å°†å…¶pushåˆ°çº¿ç¨‹æ± çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­\n// æä¾›æœåŠ¡ï¼ˆé€šè¿‡çº¿ç¨‹æ± ï¼‰Task t(conet,senderIP,senderPort,transService);_tpool-&gt;push(t);\n\nè¿™æ ·ï¼Œå°±èƒ½é€šè¿‡çº¿ç¨‹æ± æ¥æä¾›æœåŠ¡äº†ï¼\n5.3 è¿è¡Œæµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„çº¿ç¨‹æ± æ­£ç¡®è¿è¡Œäº†ä»»åŠ¡ï¼Œç»™å®¢æˆ·ç«¯æä¾›äº†asciiè¿”å›å€¼\n\nä½¿ç”¨ps -aLå‘½ä»¤æŸ¥çœ‹è½»é‡çº§è¿›ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°æœ‰4ä¸ªçº¿ç¨‹åœ¨ä¸ºæˆ‘ä»¬æœåŠ¡\n PID   LWP TTY          TIME CMD7288  7288 pts/8    00:00:00 tcpServer7288  7289 pts/8    00:00:00 handler7288  7290 pts/8    00:00:00 handler7288  7291 pts/8    00:00:00 handler7288  7292 pts/8    00:00:00 handler7441  7441 pts/9    00:00:00 tcpClient7632  7632 pts/7    00:00:00 ps\n\næ­¤æ—¶ï¼Œå³ä¾¿æˆ‘ä»¬å¤šå¼€å‡ ä¸ªç»ˆç«¯ï¼ŒtcpæœåŠ¡å™¨ä¹Ÿèƒ½æ­£å¸¸æä¾›æœåŠ¡\n\nä½†æ˜¯ï¼å¦‚æœå‡ºç°äº†ä¸€ä¸ªå°´å°¬çš„æƒ…å†µï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹&lt;å½“å‰éœ€è¦è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n5.4 taskç­‰å¾…é—®é¢˜ä¸ºäº†æµ‹è¯•ï¼Œæˆ‘ä»¬å°†çº¿ç¨‹æ± å•ä¾‹ä¸­çš„çº¿ç¨‹ä¸ªæ•°åˆå§‹åŒ–ä¸º2ä¸ª\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬å‘ç°ç¬¬ä¸‰ä¸ªå®¢æˆ·ç«¯ä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼Œä½†å®é™…ä¸Šå®ƒå·²ç»æˆåŠŸé“¾æ¥ä¸Šäº†æœåŠ¡å™¨ï¼Œtaskä¹Ÿè¢«æ’å…¥åˆ°äº†ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢ï¼Œåªä¸è¿‡å½“å‰æ²¡æœ‰ç©ºé—²çš„çº¿ç¨‹æ¥è¿è¡Œå®ƒ\n\nå¦‚æœæˆ‘ä»¬æŠŠå·¦ä¾§å…¶ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯é€€å‡ºï¼Œæœ€å³ä¾§çš„å®¢æˆ·ç«¯å°±èƒ½æ­£å¸¸æ”¶åˆ°æœåŠ¡å™¨è¿”å›çš„ç»“æœäº†\n\nè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦è®©çº¿ç¨‹æ± æœ‰èƒ½åŠ›åˆ¤æ–­æ˜¯å¦å‡ºç°äº†é˜»å¡é—®é¢˜ï¼Œå¹¶æ‰©å®¹çº¿ç¨‹æ¥è§£å†³é˜»å¡ã€‚\nå¯æ˜¯è¿™åˆå¼•å‡ºäº†å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœç©ºé—²äº†å¾ˆä¹…éƒ½æ²¡æœ‰ä»»åŠ¡è¿‡æ¥ï¼Œå¤šå‡ºæ¥çš„çº¿ç¨‹ä¸å°±æ˜¯åœ¨ç™½ç™½æ¶ˆè€—èµ„æºå—ï¼Ÿ\nå®é™…ä¸Šï¼Œçº¿ç¨‹æ± é€‚åˆå¤„ç†çš„ï¼Œåº”è¯¥æ˜¯çŸ­å°çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªwhile(1)å¾ªç¯ï¼›\n\nä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰å­¦ä¹ åˆ°å¦‚ä½•å°†å…¶ä¿®æ”¹ä¸ºæœåŠ¡äºçŸ­å°ä»»åŠ¡çš„çº¿ç¨‹æ± ï¼Œä»å¾…åç»­çš„ç²¾è¿›\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","çº¿ç¨‹","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€Linuxã€‘ç½‘ç»œåŸç†","url":"/posts/4145270627/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸€ä¸‹ç½‘ç»œçš„åŸºæœ¬åŸç†\n\n\n1.ç½‘ç»œå‘å±•èƒŒæ™¯å…³äºç½‘ç»œå‘å±•çš„å†å²èƒŒæ™¯è¿™ç§ä¸œè¥¿å°±ä¸å¤šbbäº†ï¼Œç½‘ä¸Šå¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°å‚è€ƒèµ„æ–™ï¼Œæˆ‘çš„ä¸“ä¸šæ€§æ¬ ç¼ºï¼Œæ–‡ç« å‚è€ƒæ„ä¹‰ä¹Ÿä¸å¤§ã€‚è¿™é‡Œåªåšç®€å•è¯´æ˜ã€‚\nç½‘ç»œå‘å±•ç»è¿‡äº†å¦‚ä¸‹å‡ ä¸ªæ¨¡å¼ï¼š\n\nç‹¬ç«‹æ¨¡å¼ï¼šè®¡ç®—æœºä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œé äººç§»åŠ¨æ•°æ®\näº’è”æ¨¡å¼ï¼šå¤šå°è®¡ç®—æœºè¿æ¥åˆ°ä¸€èµ·ï¼Œå®ç°æ•°æ®å…±äº«\nå±€åŸŸç½‘LANï¼šè®¡ç®—æœºæ•°é‡å¢å¤šï¼Œé€šè¿‡äº¤æ¢æœº&#x2F;è·¯ç”±å™¨è¿æ¥åˆ°ä¸€èµ·\nå¹¿åŸŸç½‘WANï¼šå°†ç›¸éš”è·ç¦»éå¸¸è¿œçš„è®¡ç®—æœºè¿åœ¨ä¸€èµ·\n\näº¤æ¢æœºæ˜¯å•¥ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ‰å¾ˆå¤šç½‘å£çš„è®¾å¤‡ï¼Œå°†è®¾å¤‡æ’ä¸Šå»åï¼ˆä¸€èˆ¬ç”¨çš„éƒ½æ˜¯RJ45ç½‘çº¿ï¼‰å°±èƒ½ç›¸äº’äº¤æµä¿¡æ¯ã€‚æˆ‘ä»¬å®¶ç”¨çš„WIFIè·¯ç”±å™¨å…¶å®å·²ç»é›†æˆäº†äº¤æ¢æœºçš„åŠŸèƒ½ï¼\n1983å¹´ï¼ŒTCP&#x2F;IPåè®®æˆä¸ºARPANETä¸Šçš„æ ‡å‡†åè®®ï¼Œäººä»¬æŠŠ1983å¹´ç§°ä¸ºäº’è”ç½‘çš„è¯ç”Ÿæ—¶é—´ã€‚\n1.1 è®¡ç®—æœºè®¾å¤‡ä¹‹é—´æ˜¯æ€ä¹ˆäº¤æµçš„ï¼Ÿè®¡ç®—æœºå†…éƒ¨æœ‰éå¸¸å¤šçš„è®¾å¤‡ï¼Œåœ¨è®¾å¤‡å’Œè®¾å¤‡ä¹‹é—´ä¸€å®šè¦ç”¨â€œçº¿â€è¿›è¡Œè¿æ¥ã€‚è¿™æ ·è¿™äº›è®¾å¤‡æ‰èƒ½ç›¸äº’é€šä¿¡ã€‚æ¯”å¦‚ä¸»æ¿ä¸Šçš„æ€»çº¿ï¼Œé“¾æ¥ç¡¬ç›˜çš„sataçº¿ç­‰ç­‰ã€‚\nè€Œè¿™ä¸ªè®¡ç®—æœºçš„ç»“æ„æœ¬è´¨ä¸Šä¹Ÿèƒ½è¢«çœ‹ä½œä¸€ä¸ªå°å‹ç½‘ç»œã€‚\næ­¤æ—¶æˆ‘ä»¬å°†è®¡ç®—æœºAå’ŒBç”¨æ•°æ®çº¿è¿æ¥èµ·æ¥ï¼Œå°±èƒ½åœ¨ç‰©ç†å±‚é¢ä¸Šï¼Œè®©Aå’ŒBç›¸äº’é€šä¿¡ï¼ˆæ­¤æ—¶æš‚ä¸”ä¸è€ƒè™‘é€šè¿‡ä½•ç§æ–¹å¼é€šä¿¡ï¼Œåªè¦ç”¨æ•°æ®çº¿è¿èµ·æ¥äº†ï¼Œé‚£å°±ä¸€å®šèƒ½é€šä¿¡ï¼‰\n\nåœ¨ä¸»æœºå†…ï¼Œçº¿çŸ­\nè·¨ä¸»æœºï¼Œçº¿é•¿\n\nå½“æ•°æ®çº¿é•¿äº†ä¹‹åï¼Œçº¿è·¯å’Œçº¿è·¯ä¹‹é—´å°±å®¹æ˜“äº§ç”Ÿä¿¡å·çš„å¹²æ‰°ï¼Œå¯¼è‡´æ•°æ®çš„é”™è¯¯&#x2F;ä¸¢å¤±ã€‚æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªæ›´å¯é ã€é«˜æ•ˆçš„æ–¹å¼æ¥å®ç°è¿œè·ç¦»è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ï¼Œè¿™å°±æ˜¯ç½‘ç»œçš„æ„ä¹‰\n1.2 é›†ç¾¤è¿›ä¸€æ­¥æ‰©å¤§ï¼Œå®é™…ä¸Šï¼Œè¿˜å¯ä»¥ç”¨å¤šå°ä¸»æœºç›¸è¿ï¼Œå®ç°å•ä¸€çš„åŠŸèƒ½ã€‚è¿™æ—¶å€™ï¼Œè¿™ä¸€å †ä¸»æœºè¢«ç§°ä¸ºé›†ç¾¤\n\nå­˜å‚¨é›†ç¾¤ï¼šç¡¬ç›˜\nç¼“å­˜é›†ç¾¤ï¼šå†…å­˜\nè®¡ç®—é›†ç¾¤ï¼šCpu&#x2F;Gpu\n\nä¸åŒçš„é›†ç¾¤å¹²ä¸åŒçš„äº‹ï¼Œå†ç”¨æ•°æ®çº¿è¿èµ·æ¥ï¼Œå°±æˆäº†ä¸€å°ç”±å¤šä¸ªä¸»æœºå…±åŒæ„æˆçš„â€œç”µè„‘â€\n\nåœ¨å¤§å‹çš„æ•°æ®ä¸­å¿ƒé‡Œé¢ï¼Œå°±æ˜¯ç”¨è¿™ç§æ–¹å¼æ¥å¤„ç†æµ·é‡çš„æ•°æ®çš„ã€‚\n1.3 å› ç‰¹ç½‘å½“å‰æˆ‘ä»¬ä¸»è¦åœ¨è®¡ç®—æœºä¸Šä½¿ç”¨çš„æ˜¯Internetï¼Œå®˜æ–¹åç§°ä¸ºå› ç‰¹ç½‘ï¼Œæ—¥å¸¸è¯´çš„äº’è”ç½‘å°±æ˜¯å› ç‰¹ç½‘ã€‚\nä½†è¿˜æœ‰å¦å¤–ä¸€ä¸ªäº’è¿ç½‘ï¼Œå…¶æ¦‚å¿µæ˜¯äº’ç›¸è¿æ¥çš„ç½‘ç»œï¼Œè‹±æ–‡åæ˜¯internetï¼ˆå°å†™çš„iï¼‰ï¼Œäº’è”ç½‘ â‰  äº’è¿ç½‘ï¼\n1.4 ISP&#x2F;IXPISPçš„ä¸­æ–‡åæ˜¯äº’è”ç½‘æœåŠ¡æä¾›è€…ï¼Œåœ¨æˆ‘ä»¬å›½å†…è¯´çš„å°±æ˜¯ä¸‰å¤§è¿è¥å•†\nIXPæ˜¯ç‹ç‹¸é‚£æˆ‘äº¤æ¢ç‚¹ï¼Œå…è®¸ä¸¤ä¸ªç½‘ç»œç›´æ¥ç›¸è¿å¹¶å¿«é€Ÿæä¾›åˆ†ç»„çš„è½¬å‘ã€‚\n2.åè®®åè®®æ˜¯ä¸€ç§çº¦å®šï¼Œçº¦å®šå¥½ä¸¤å°è®¾å¤‡è¦ç”¨ä»€ä¹ˆæ–¹å¼æ¥äº¤æµã€‚\næ¯”å¦‚æˆ‘ä»¬éƒ½æ˜¯ä¸­å›½äººï¼Œå¯ä»¥ç”¨æ™®é€šè¯è¿™ä¸ªåè®®æ¥äº¤æµï¼›è€Œå¹¿ä¸œåœ°åŒºçš„äººï¼Œå¯ä»¥ç”¨ç²¤è¯­æ¥äº¤æµã€‚\nè®¡ç®—æœºä¹‹é—´æƒ³äº¤æµï¼Œè‚¯å®šä¹Ÿéœ€è¦ç¡®å®šå¥½ä¸€ä¸ªè¡Œä¸šé€šç”¨çš„åè®®ï¼\nå¦åˆ™ä¸åŒè®¡ç®—æœºçš„æ¶æ„/æ“ä½œç³»ç»Ÿ/ç¡¬ä»¶è®¾å¤‡ä¸ä¸€æ ·ï¼Œè‹¥åè®®ä¸ç»Ÿä¸€ï¼Œä¹Ÿå°±æ— æ³•æ­£å¸¸äº¤æµã€‚è¿™å°±å¥½æ¯”ä¸€ä¸ªè¯´è‹±è¯­çš„äººå¬ä¸æ‡‚æ™®é€šè¯ä¸€æ ·ã€‚\n2.1 åˆ†å±‚ç½‘ç»œçš„åè®®æ˜¯åˆ†å±‚çš„\n2.1.1 ä¸ºä»€ä¹ˆè¦åˆ†å±‚è½¯ä»¶åˆ†å±‚ï¼Œå°±å¥½æ¯”å°†ä¸»ä»£ç å’ŒåŠŸèƒ½ä»£ç ç»™åˆ†å¼€\n\næ­¤æ—¶åªè¦åŠŸèƒ½ä»£ç æä¾›çš„æ¥å£ä¸å˜ï¼Œä¸»ä»£ç çš„è°ƒç”¨æ–¹å¼å°±ä¸å˜\nä¸»ä»£ç æ— é¡»å…³å¿ƒåŠŸèƒ½ä»£ç æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Œåªå…³å¿ƒå…¶å¤„ç†çš„ç»“æœï¼ˆè¿”å›å€¼ï¼‰\nå·¥ç¨‹å¸ˆä¿®æ”¹ä»£ç çš„æ—¶å€™ï¼Œåªéœ€è¦å®šä½åˆ°å…·ä½“æ¨¡å—è¿›è¡Œä¿®æ”¹ï¼Œä¸ä¼šå‡ºç°ç‰µä¸€å‘åŠ¨å…¨èº«çš„æƒ…å†µ\n\nè¿™æ ·ï¼Œå°±å®ç°äº†ä¸»æ¨¡å—å’ŒåŠŸèƒ½æ¨¡å—çš„è§£è€¦\n\nç”±äºç½‘ç»œæ¶‰åŠåˆ°äº†è½¯ä»¶åˆ°ç¡¬ä»¶å„ç§å±‚é¢çš„è®¾å¤‡æ“ä½œï¼Œæ‰€ä»¥å…¶å¿…é¡»é‡‡ç”¨åˆ†å±‚çš„åè®®ã€‚ä¸åŒè®¾å¤‡é‡‡ç”¨ä¸åŒçš„åè®®ï¼Œæ‰èƒ½æœ€å¤§å±‚é¢çš„ä¿è¯ç½‘ç»œç³»ç»Ÿæ•´ä½“ä¸å‡ºbug\n\nç½‘ç»œåè®®æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼šåŒå±‚è®¾å¤‡éƒ½å¯ä»¥è®¤ä¸ºè‡ªå·±åœ¨ç›´æ¥å’Œå¯¹æ–¹é€šä¿¡\n2.1.2 ç”µè¯æœºä¾‹å­ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“ä¿©ä¸ªäººç”¨åº§æœºæ‰“ç”µè¯çš„æ—¶å€™ï¼Œä»–ä»¬ä¼šè®¤ä¸ºè‡ªå·±åœ¨ç›´æ¥å’Œå¯¹æ–¹äº¤æµï¼Œè€Œä¸ä¼šè®¤ä¸ºè‡ªå·±æ˜¯åœ¨å’Œç”µè¯æœºäº¤æµ\n\næ­¤æ—¶ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªç³»ç»Ÿåˆ†3å±‚ï¼šåˆ†åˆ«æ˜¯ä¸¤äººä¹‹é—´çš„è¯­è¨€åè®®ï¼Œç”µè¯æœºå’Œç”µè¯æœºä¹‹é—´è¯»å–æ•°æ®çš„åè®®ï¼Œä»¥åŠæœ€åº•å±‚ç”¨äºä¼ è¾“ä¿¡å·çš„é€šä¿¡åè®®\n\nç”¨æˆ·ä¸ä¼šå»å…³å¿ƒç”µè¯æœºç”¨çš„æ˜¯ä»€ä¹ˆåè®®ï¼Œè€Œæ˜¯å…³å¿ƒè‡ªå·±åº”è¯¥ç”¨ä»€ä¹ˆè¯­è¨€å’Œå¯¹æ–¹äº¤æµ\nç”µè¯æœºä¸ä¼šå»å…³å¿ƒç”¨æˆ·æ˜¯ç”¨ä»€ä¹ˆè¯­è¨€äº¤æµçš„ï¼Œå…¶åªè´Ÿè´£æŠŠæ”¶åˆ°çš„å£°éŸ³è½¬æ¢æˆç”µä¿¡å·\né€šä¿¡åè®®ä¸ç®¡ç”µè¯æœºæ˜¯æ€ä¹ˆå°è£…çš„ï¼Œå…¶åªè´Ÿè´£ä¼ è¾“æ•°æ®\n\nè¿™é‡Œå°±èƒ½çœ‹å‡ºæ¥ï¼Œä¸ä»…åŒå±‚çš„è®¾å¤‡å¯ä»¥è®¤ä¸ºè‡ªå·±æ˜¯ç›´æ¥å’Œå¯¹æ–¹äº¤æµï¼Œè€Œä¸”å®ƒè¿˜ä¸éœ€è¦ç®¡å…¶ä»–å±‚ç”¨çš„æ˜¯ä»€ä¹ˆåè®®ï¼\n\nç”µè¯æœºä¸ä¼šå› ä¸ºä½ è¯´è‹±è¯­è€Œç”¨ä¸äº†\n\nè¿™å°±æ˜¯åˆ†å±‚å®ç°è§£è€¦çš„æ•ˆæœï¼Œä¹Ÿç®—æ˜¯æ¯ä¸€å±‚éƒ½å®ç°äº†è‡ªå·±çš„å°è£…\n2.2 OSIä¸ƒå±‚æ¨¡å‹\nOSIï¼ˆOpen System Interconnectionï¼Œå¼€æ”¾ç³»ç»Ÿäº’è¿ï¼‰ä¸ƒå±‚ç½‘ç»œæ¨¡å‹ç§°ä¸ºå¼€æ”¾å¼ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹ï¼Œ æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„å®šä¹‰å’Œè§„èŒƒ; \nå®ƒæŠŠç½‘ç»œä»é€»è¾‘ä¸Šåˆ†ä¸ºäº†7å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰ç›¸å…³ã€ç›¸å¯¹åº”çš„ç‰©ç†è®¾å¤‡ï¼Œæ¯”å¦‚è·¯ç”±å™¨ï¼Œäº¤æ¢æœº;\nOSI ä¸ƒå±‚æ¨¡å‹æ˜¯ä¸€ç§æ¡†æ¶æ€§çš„è®¾è®¡æ–¹æ³•ï¼Œå…¶æœ€ä¸»è¦çš„åŠŸèƒ½ä½¿å°±æ˜¯å¸®åŠ©ä¸åŒç±»å‹çš„ä¸»æœºå®ç°æ•°æ®ä¼ è¾“;\nå®ƒçš„æœ€å¤§ä¼˜ç‚¹æ˜¯å°†æœåŠ¡ã€æ¥å£å’Œåè®®è¿™ä¸‰ä¸ªæ¦‚å¿µæ˜ç¡®åœ°åŒºåˆ†å¼€æ¥ï¼Œæ¦‚å¿µæ¸…æ¥šï¼Œç†è®ºä¹Ÿæ¯”è¾ƒå®Œæ•´ã€‚ é€šè¿‡ä¸ƒ ä¸ªå±‚æ¬¡åŒ–çš„ç»“æ„æ¨¡å‹ä½¿ä¸åŒçš„ç³»ç»Ÿä¸åŒçš„ç½‘ç»œä¹‹é—´å®ç°å¯é çš„é€šè®¯\n\n\nå¯ä»¥ç”¨ä¸‹é¢çš„è¿™ä¸ªè¡¨æ ¼æ¥ç®€å•äº†è§£ä¸€ä¸‹æ¯ä¸€å±‚çš„åŠŸèƒ½\n\n\n\nåˆ†å±‚åç§°\nåŠŸèƒ½\næ¦‚è§ˆ\n\n\n\nåº”ç”¨\né’ˆå¯¹ç‰¹å®šåº”ç”¨çš„åè®®\nSTMPé‚®ä»¶&#x2F;è¿œç¨‹ç™»å½•&#x2F;æ–‡ä»¶ä¼ è¾“\n\n\nè¡¨ç¤º\næ•°æ®å›ºæœ‰æ ¼å¼å’Œç½‘ç»œæ ‡å‡†æ ¼å¼çš„è½¬æ¢\næ¥æ”¶ä¸åŒè¡¨ç°å½¢å¼çš„ä¿¡æ¯\n\n\nä¼šè¯\né€šä¿¡ç®¡ç†ï¼Œè´Ÿè´£å»ºç«‹&#x2F;æ–­å¼€é€šä¿¡è¿æ¥ï¼Œç»´æŒä¸åŒåº”ç”¨ç¨‹åºçš„é€šä¿¡\nä½•æ—¶å»ºç«‹&#x2F;ä½•æ—¶æ–­å¼€&#x2F;å»ºç«‹å¤šä¹…\n\n\nä¼ è¾“\nä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¼ è¾“\nç»´æŒä¼ è¾“å¯é æ€§\n\n\nç½‘ç»œ\nåœ°å€ç®¡ç†&#x2F;è·¯ç”±é€‰æ‹©ï¼ˆé€»è¾‘å¯»å€\nç¡®å®šæœ€ä½³è·¯å¾„\n\n\næ•°æ®é“¾è·¯\näº’è”è®¾å¤‡ä¹‹é—´ä¼ é€å’Œè¯†åˆ«æ•°æ®\nå°†æ•°æ®ç»„åˆæˆå­—èŠ‚\n\n\nç‰©ç†\nä»¥01äºŒè¿›åˆ¶è¿›è¡Œæ•°æ®ä¼ è¾“\nç½‘çº¿\n\n\nä½†æ˜¯OSIä¸ƒå±‚æ¨¡å‹ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„è¿˜æ˜¯TCP/IPæ¨¡å‹\n2.3 TCP&#x2F;IPTCP&#x2F;IPæ˜¯ä¸€ç»„åè®®çš„ä»£åè¯ï¼Œå®ƒå…¶ä¸­åŒ…æ‹¬å¾ˆå¤šåè®®ï¼Œç»„æˆäº†ä¸€ä¸ªæ•´ä½“ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒTCP&#x2F;IPåè®®å°†OSIçš„ä¸Šæ–¹3å±‚ç»Ÿä¸€ç§°ä¸ºåº”ç”¨å±‚ï¼Œç”±ç”¨æˆ·å­—èŠ‚å†³å®šå¦‚ä½•è¿›è¡Œæ•°æ®çš„åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ï¼Œä»€ä¹ˆæ—¶å€™å»ºç«‹è¿æ¥ï¼Œä»€ä¹ˆæ—¶å€™æ–­å¼€è¿æ¥\n\nTCP&#x2F;IPæ¨¡å‹å¯ä»¥è®¤ä¸ºæ˜¯4&#x2F;5å±‚ï¼Œæ¯ä¸€å±‚ä¹Ÿæœ‰è‡ªå·±ä¸åŒçš„åŠŸèƒ½ã€‚æ¯ä¸€å±‚éƒ½ä¼šè°ƒç”¨å¦å¤–ä¸€å±‚ï¼Œæ¥å®ç°è‡ªå·±çš„éœ€æ±‚\n\nç‰©ç†å±‚: è´Ÿè´£å…‰&#x2F;ç”µä¿¡å·çš„ä¼ é€’æ–¹å¼ã€‚ æ¯”å¦‚ç°åœ¨ä»¥å¤ªç½‘é€šç”¨çš„ç½‘çº¿(åŒç» çº¿)ã€æ—©æœŸä»¥å¤ªç½‘é‡‡ç”¨çš„çš„åŒè½´ç”µç¼† (ç°åœ¨ä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†)ã€å…‰çº¤, ç°åœ¨çš„wifiæ— çº¿ç½‘ä½¿ç”¨ç”µç£æ³¢ç­‰éƒ½å±äºç‰©ç†å±‚çš„æ¦‚å¿µã€‚ç‰©ç†å±‚çš„èƒ½åŠ›å†³ å®šäº†æœ€å¤§ä¼ è¾“é€Ÿç‡ã€ä¼ è¾“è·ç¦»ã€æŠ—å¹²æ‰°æ€§ç­‰ã€‚é›†çº¿å™¨(Hub)å·¥ä½œåœ¨ç‰©ç†å±‚\næ•°æ®é“¾è·¯å±‚: è´Ÿè´£è®¾å¤‡ä¹‹é—´çš„æ•°æ®å¸§çš„ä¼ é€å’Œè¯†åˆ«ã€‚ ä¾‹å¦‚ç½‘å¡è®¾å¤‡çš„é©±åŠ¨ã€å¸§åŒæ­¥(å°±æ˜¯è¯´ä»ç½‘çº¿ä¸Šæ£€æµ‹ åˆ°ä»€ä¹ˆä¿¡å·ç®—ä½œæ–°å¸§çš„å¼€å§‹)ã€å†²çªæ£€æµ‹(å¦‚æœæ£€æµ‹åˆ°å†²çªå°±è‡ªåŠ¨é‡å‘)ã€æ•°æ®å·®é”™æ ¡éªŒç­‰å·¥ä½œã€‚ æœ‰ä»¥å¤ª ç½‘ã€ä»¤ç‰Œç¯ç½‘, æ— çº¿LANç­‰æ ‡å‡†ã€‚äº¤æ¢æœº(Switch)å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚\nç½‘ç»œå±‚: è´Ÿè´£åœ°å€ç®¡ç†å’Œè·¯ç”±é€‰æ‹©ã€‚ ä¾‹å¦‚åœ¨IPåè®®ä¸­, é€šè¿‡IPåœ°å€æ¥æ ‡è¯†ä¸€å°ä¸»æœº, å¹¶é€šè¿‡è·¯ç”±è¡¨çš„æ–¹å¼è§„ åˆ’å‡ºä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“çš„çº¿è·¯(è·¯ç”±)ã€‚è·¯ç”±å™¨(Router)å·¥ä½œåœ¨ç½‘è·¯å±‚\nä¼ è¾“å±‚: è´Ÿè´£ä¸¤å°ä¸»æœºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ å¦‚ä¼ è¾“æ§åˆ¶åè®® (TCP)ï¼Œ èƒ½å¤Ÿç¡®ä¿æ•°æ®å¯é çš„ä»æºä¸»æœºå‘é€åˆ°ç›®æ ‡ ä¸»æœº\nåº”ç”¨å±‚: è´Ÿè´£åº”ç”¨ç¨‹åºé—´æ²Ÿé€šï¼Œå¦‚ç®€å•ç”µå­é‚®ä»¶ä¼ è¾“ï¼ˆSMTPï¼‰ã€æ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ã€ç½‘ç»œè¿œç¨‹è®¿é—® åè®®ï¼ˆTelnetï¼‰ç­‰ã€‚ æˆ‘ä»¬çš„ç½‘ç»œç¼–ç¨‹ä¸»è¦å°±æ˜¯é’ˆå¯¹åº”ç”¨å±‚ã€‚\n\nä¸ºå•¥è¿™é‡Œæœ‰5å±‚ï¼Œå´æœ‰æ—¶å€™åˆè¯´æ˜¯4å±‚å‘¢ï¼ŸğŸ˜\nå› ä¸ºç‰©ç†å±‚å…³æ³¨çš„è¾ƒå°‘ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½åªæ³¨é‡äºå‰©ä¸‹çš„4å±‚\n3.ç½‘ç»œå’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„å…³ç³»ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚è¦æƒ³æˆåŠŸå‘é€ç»™å¯¹æ–¹ï¼Œé‚£å°±ä¸€å®šè¦ç»è¿‡ç½‘å¡è¿™ä¸ªç¡¬ä»¶ï¼›è€Œè¦ç»è¿‡ç½‘å¡ï¼Œé‚£å°±è‚¯å®šè¦ç»è¿‡æ“ä½œç³»ç»Ÿâ€”â€”åªæœ‰æ“ä½œç³»ç»Ÿèƒ½ç›´æ¥è®¿é—®ç¡¬ä»¶ï¼\næ‰€ä»¥ï¼Œæ•°æ®åœ¨ä¸»æœºå†…æµåŠ¨çš„æ—¶å€™ï¼Œå°±ä¸€å®šä¼šä»ç”¨æˆ·èµ°åˆ°å†…æ ¸ï¼Œå†æœ€ç»ˆèµ°åˆ°ç‰©ç†å±‚è¿›è¡Œä¼ è¾“ï¼\n\nå› ä¸ºè®¡ç®—æœºçš„ä½“ç³»ç»“æ„å†³å®šäº†æ•°æ®æµåŠ¨çš„æ—¶å€™ï¼Œä¸€å®šè¦ç»è¿‡æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥è‚¯å®šä¼šæ˜¯è‡ªé¡¶å‘ä¸‹&#x2F;è‡ªåº•å‘ä¸Šè¿›è¡ŒæµåŠ¨çš„ï¼\n\nè¿™å°±å¼•å‡ºäº†äºŒè€…çš„å…³ç³»\n\nç½‘ç»œåè®®æ ˆæ˜¯å±äºæ“ä½œç³»ç»Ÿçš„ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸“é—¨æ¥å¤„ç†tcp&#x2F;ipåè®®çš„ã€‚\n\nå‰é¢æåˆ°ï¼Œæ¯ä¸€å±‚éƒ½å¯ä»¥è®¤ä¸ºè‡ªå·±æ˜¯åœ¨å’Œå¯¹æ–¹åŒå±‚çš„ç”¨æˆ·ç›´æ¥é€šä¿¡ã€‚è¿™æ ·åšæ˜¯æœ‰ä¸€å®šä»£ä»·çš„ï¼Œä¸”å¬æˆ‘ç»†ç»†é“æ¥ã€‚\n3.1 å¿«é€’ä¾‹å­å½“æˆ‘ä»¬ç½‘è´­å•†å“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½œä¸ºç”¨æˆ·ï¼Œæ˜¯ç›´æ¥å’Œå•†å®¶è”ç³»çš„ã€‚ä¸‹äº†è®¢å•åï¼Œå•†å®¶è¦å»åšä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ€ç»ˆæˆ‘ä»¬ä»å¿«é€’å°å“¥å¤„æ‹¿åˆ°äº†å•†å“\n\n\n\nå®¢æˆ·\nå•†å®¶\n\n\n\nåœ¨å•†å®¶å¤„ä¸‹è®¢å•\næ¥æ”¶åˆ°ç”¨æˆ·è®¢å•\n\n\nä»å¿«é€’å‘˜å¤„æ”¶åˆ°è´§ç‰©\nå°†è´§ç‰©äº¤ç»™å¿«é€’å‘˜\n\n\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\n\n\nä½†ï¼Œæˆ‘ä»¬æ”¶åˆ°çš„å¿«é€’å¹¶ä¸æ˜¯åªæœ‰æˆ‘ä»¬è¦çš„å•†å“ï¼Œå¾€å¾€è¿™é‡Œé¢éƒ½ä¼šå¤šå‡ºä¸€äº›ä¸œè¥¿\n\nå¦‚å›¾ï¼Œæˆ‘ä»¬çš„å•†å“è¢«ä¸€ä¸ªç›’å­åŒ…è£¹ç€ï¼Œå¤–å¤´è¿˜å¤šäº†ä¸€ä¸ªå¿«é€’å•\n\n\n\nå®¢æˆ·\nå•†å®¶\n\n\n\n\nåœ¨å•†å®¶å¤„ä¸‹è®¢å•\næ¥æ”¶åˆ°ç”¨æˆ·è®¢å•\nç»™å‡ºæ”¶ä»¶åœ°å€\n\n\nä»å¿«é€’å‘˜å¤„æ”¶åˆ°è´§ç‰©\nå°†è´§ç‰©äº¤ç»™å¿«é€’å‘˜\næ·»åŠ å¤–ç®±å¹¶å¡«å†™é‚®å¯„å•\n\n\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nè´§ç‰©è¿è¾“åˆ°é›†æ•£ç‚¹\nå¼€å§‹è¿è¾“\n\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸€å±‚å…¶å®éƒ½ç»™å‡ºäº†è‡ªå·±çš„ç‹¬æœ‰åè®®ã€‚æˆ‘ä»¬å¯ä»¥æŠŠæœ€ä¸‹é¢çš„è¿è¾“å½“ä½œç‰©ç†å±‚ã€‚\nå¿«é€’å°å“¥åœ¨åŒ…è£…å¿«é€’çš„æ—¶å€™ï¼Œå°±ä¼šç»™å¿«é€’å¢åŠ ä¸€ä¸ªå¤–ç®±ï¼Œå¹¶å¡«å†™å¥½é‚®å¯„å•ã€‚å½“å¦å¤–ä¸€è¾¹çš„å¿«é€’å°å“¥æ”¶åˆ°è¿™ä¸ªè´§ç‰©çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ›´å…·é‚®å¯„å•ä¸Šçš„ä¿¡æ¯ï¼Œå°†å¿«é€’é€åˆ°ç”¨æˆ·æ‰‹ä¸Šã€‚\n3.2 æŠ¥å¤´&#x2F;è§£åŒ…æ­¤è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ç»´æŠ¤å¿«é€’çš„å‡ºå‘åœ°/ç»ˆç‚¹åœ°ä¿¡æ¯ï¼Œå¿«é€’å‘˜ç»™è´§ç‰©æ·»åŠ ä¸Šäº†å®¢æˆ·ä¸éœ€è¦çš„ä¸œè¥¿ã€‚\n\nåœ¨ç½‘ç»œåè®®ä¸­ï¼Œæ¯ä¸€å±‚åè®®ï¼Œéƒ½ä¼šç»™æˆ‘ä»¬è¦ä¼ è¾“çš„æ•°æ®æ·»åŠ ä¸Šç‹¬æœ‰çš„åè®®ä¿¡æ¯ï¼Œå†äº¤ä»˜ç»™ä¸‹ä¸€å±‚ï¼›è¿™äº›ä¿¡æ¯æ˜¯ç”¨æ¥ç»´æŠ¤æ•°æ®çš„ï¼ˆå°±å¥½æ¯”å¿«é€’å•å·ä¸Šçš„åœ°å€ï¼‰\nå¤šå‡ºæ¥çš„åè®®æ•°æ®è¢«ç§°ä¸ºï¼šæŠ¥å¤´\n\n\næ”¶åˆ°ä¿¡æ¯åï¼ŒåŒå±‚åè®®ä¼šå–å‡ºè‡ªå·±çš„é‚£ä»½åè®®ä¿¡æ¯è¿›è¡Œåˆ†æï¼Œå†äº¤ä»˜ç»™ä¸Šä¸€å±‚\næ‹†å¼€æ•°æ®çš„è¿‡ç¨‹è¢«ç§°ä¸ºï¼šè§£åŒ…\n\n\n\n\nä¸çŸ¥é“å¿«é€’çš„ä¾‹å­èƒ½å¦å¸®åŠ©ä½ ç†è§£è¿™ä¸ªè¿‡ç¨‹\n\n3.3 æŠ¥å¤´çš„ä½œç”¨æ•°æ®ä¼šæœ‰ä¸åŒçš„åº”ç”¨ï¼Œä¹Ÿå¯¹åº”äº†ä¸åŒçš„åè®®ã€‚åœ¨å°åŒ…çš„æ—¶å€™ï¼Œæ·»åŠ çš„æŠ¥å¤´ä¿¡æ¯é‡Œé¢å°±åº”åŒ…å«ç›®æ ‡çš„åè®®ä¿¡æ¯\n\næ¯”å¦‚æˆ‘çš„ä¿¡æ¯æ˜¯SMTPé‚®ç®±ä¿¡æ¯ï¼Œé‚£ä¹ˆåœ¨ç›®æ ‡ä¸»æœºæ¥æ”¶åˆ°è¿›è¡Œè§£åŒ…äº†ä»¥åï¼Œä¹Ÿéœ€è¦å°†è¿™ä¸ªä¿¡æ¯äº¤ç»™æ”¯æŒSMTPçš„é‚®ç®±è½¯ä»¶è¿›è¡Œå¤„ç†\næŠ¥å¤´å±æ€§é‡Œé¢å°±éœ€è¦åŒ…å«æ”¯æŒåˆ†ç”¨ğŸ‘†çš„å±æ€§ï¼ˆè¿˜æœ‰ä¸€äº›å…¬å…±å±æ€§ï¼‰\næŠ¥å¤´å±æ€§é‡Œé¢è¿˜éœ€è¦åŒ…å«åŒºåˆ†æœ‰æ•ˆè½½è·å’ŒæŠ¥å¤´çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯å°†è¦å‘é€çš„æ•°æ®ï¼Œå’Œè¿™ä¸€å±‚çš„æŠ¥å¤´ç»™æ‹†å¼€ï¼Œä¸èƒ½åˆ°æ—¶å€™åˆ†ä¸å‡ºæ¥ï¼Œæ— æ³•æ­£å¸¸è§£åŒ…äº†\n\nè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªåˆ†ç”¨çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼ é€çš„ä¿¡æ¯ï¼Œè¢«ç§°ä¸ºæœ‰æ•ˆè½½è·\n\nå¿«é€’ç‚¹ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå¦‚æœå¿«é€’ç‚¹æ”¶åˆ°çš„éƒ½æ˜¯å•†å“è€Œæ²¡æœ‰å¿«é€’å•ï¼Œå¿«é€’å°å“¥ä¹Ÿå°±æ— æ³•çŸ¥é“å¿«é€’åº”è¯¥é€ç»™è°äº†\n4.å±€åŸŸç½‘ä»¥å¤ªç½‘çš„å‘½åæ¥è‡ªç‰©ç†å­¦ä¸­çš„ä»¥å¤ªï¼Œè¿™éƒ¨åˆ†çš„æ•…äº‹å¯ä»¥ç™¾åº¦ğŸ˜¶â€ğŸŒ«ï¸å¤§å­¦ç‰©ç†è¯¾ä¸Šä¹Ÿè®²è¿‡ã€‚\n\nå¦‚æœä¸¤å°ä¸»æœºï¼Œå¤„äºåŒä¸€å±€åŸŸç½‘ä¸­ï¼Œä»–ä»¬ä¹‹é—´èƒ½é€šä¿¡å—ï¼Ÿ\nå’ŒåŒå­¦å¼€æ‰‹æœºçƒ­ç‚¹è”æœºMCçš„ç»å†å‘Šè¯‰æˆ‘ğŸ˜ï¼Œæ˜¯å¯ä»¥çš„\n\n4.1 MACåœ°å€å±€åŸŸç½‘å°±å¥½æ¯”ä¸€ä¸ªé¤å…ï¼Œé‡Œé¢æœ‰å¾ˆå¤šäººåœ¨èŠå¤©ã€‚å½“ä½ åœ¨é¤å…é‡Œé¢å’Œå¼ ä¸‰èŠå¤©çš„æ—¶å€™ï¼Œæ—è¾¹çš„äººä¹Ÿèƒ½å¬åˆ°ä½ ä»¬ä¿©äº¤æµçš„å†…å®¹ã€‚å±€åŸŸç½‘å†…ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\nè¦æƒ³åœ¨å±€åŸŸç½‘å†…å‡†ç¡®åœ°æ‰¾åˆ°ä¸€ä¸ªè®¾å¤‡ï¼Œé‚£å°±éœ€è¦ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç ã€‚å°±å¥½æ¯”æƒ³åœ¨æ•™å®¤é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªäººï¼Œéœ€è¦çŸ¥é“åå­—ä¸€æ ·ï¼ˆæ’é™¤åŒåé—®é¢˜ï¼‰\næ¯å°ä¸»æœºå”¯ä¸€çš„æ ‡è¯†ç ï¼Œå°±æ˜¯è¯¥ä¸»æœºå¯¹åº”çš„MACåœ°å€\n\nMACåœ°å€ç”¨æ¥è¯†åˆ«æ•°æ®é“¾è·¯å±‚ä¸­ç›¸è¿çš„èŠ‚ç‚¹\né•¿åº¦ä¸º48ä½, åŠ6ä¸ªå­—èŠ‚ã€‚ ä¸€èˆ¬ç”¨16è¿›åˆ¶æ•°å­—åŠ ä¸Šå†’å·çš„å½¢å¼æ¥è¡¨ç¤º(ä¾‹å¦‚: 08:01:27:04:fb:19) \nMACåœ°å€åœ¨ç½‘å¡å‡ºå‚æ—¶å°±ç¡®å®šäº†ï¼Œä¸èƒ½ä¿®æ”¹ï¼ ä¸”macåœ°å€é€šå¸¸æ˜¯å”¯ä¸€çš„ï¼ˆè™šæ‹Ÿæœºä¸­çš„macåœ°å€ä¸æ˜¯çœŸå®çš„macåœ°å€ï¼Œå¯èƒ½ä¼šå†²çªï¼›ä¹Ÿæœ‰äº›ç½‘å¡æ”¯æŒç”¨æˆ·é…ç½®macåœ°å€ï¼‰\n\nå±€åŸŸç½‘å†…æ²¡æœ‰å‘é€é™åˆ¶ï¼Œä»»ä½•ä¸€å°ä¸»æœºéšæ—¶éƒ½å¯å‘é€æ¶ˆæ¯ã€‚æ­¤æ—¶è¿˜éœ€è¦å¼•å…¥ç¢°æ’æ£€æµ‹æœºåˆ¶ï¼Œåœ¨æ²¡æœ‰äººå‘é€ä¿¡å·çš„æ—¶å€™ï¼Œæœ¬è®¾å¤‡å†å‘é€ä¿¡å·ã€‚é¿å…å¤šå°ä¸»æœºé€šä¿¡æ—¶ï¼Œå‡ºç°ä¿¡å·æ’åˆ°ä¸€èµ·ï¼ˆç¢°æ’åŸŸï¼‰è€Œå¯¼è‡´çš„ä¿¡æ¯ä¸¢å¤±ã€‚\nä»¥ç³»ç»Ÿç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œæ­¤æ—¶çš„å±€åŸŸç½‘å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æºã€‚ä¿è¯æ•°æ®ä¸è¢«ç¢°æ’ï¼Œå°±æ˜¯ä¿æŠ¤ä¸´ç•Œèµ„æºçš„ä¸€è‡´æ€§ï¼ğŸ˜›\n4.2 é€šä¿¡åŸç†å’Œå‰é¢æåˆ°çš„æŠ¥å¤´&#x2F;è§£åŒ…ä¸€æ ·ï¼Œå±€åŸŸç½‘å†…çš„æ•°æ®ï¼Œä¹Ÿæ˜¯è‡ªé¡¶å‘ä¸‹ã€è‡ªåº•å‘ä¸ŠæµåŠ¨çš„ã€‚\næ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åè®®ï¼Œä¹Ÿéœ€è¦åŠ ä¸Šè‡ªå·±çš„æŠ¥å¤´\n\n5.å¹¿åŸŸç½‘åœ¨å¹¿åŸŸç½‘å†…é€šä¿¡å°±æ²¡æœ‰é‚£ä¹ˆç®€å•äº†ã€‚è¿™å°±å¥½æ¯”å”åƒ§å»è¥¿å¤©å–ç»ï¼Œä¸æ˜¯ç›´æ¥èµ°åˆ°è¥¿å¤©çš„ï¼Œè€Œæ˜¯éœ€è¦ç»è¿‡å¤šä¸ªé©¿ç«™ï¼ˆä¸­é€”åœ°ç‚¹ï¼‰\nåœ¨å¹¿åŸŸç½‘å†…é€šä¿¡ï¼Œæˆ‘ä»¬åˆ™æ˜¯é€šè¿‡ipåœ°å€æ¥åšé©¿ç«™ï¼Œæ¥æŸ¥æ‰¾ç›®æ ‡ä¸»æœºçš„\n\nåœ¨å±€åŸŸç½‘å†…ç”¨çš„æ˜¯macæ¥æ ‡è¯†ç›®æ ‡çš„å”¯ä¸€æ€§\nå¹¿åŸŸç½‘å†…é‡‡ç”¨ipæ¥æ ‡è¯†ç›®æ ‡çš„å”¯ä¸€æ€§\n\n5.1 IPåœ°å€IPåè®®æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒIPv4å’ŒIPv6ï¼ˆæœ¬æ–‡åªå…³æ³¨v4ï¼‰\nIPåœ°å€æ˜¯åœ¨IPåè®®ä¸­ï¼Œç”¨æ¥æ ‡è¯†ç½‘ç»œä¸­ä¸åŒä¸»æœºçš„åœ°å€ï¼›\nå¯¹äºIPv4æ¥è¯´ï¼ŒIPåœ°å€æ˜¯ä¸€ä¸ª4å­—èŠ‚ï¼Œ32ä½çš„æ•´æ•°ã€‚é€šå¸¸ä½¿ç”¨ â€œç‚¹åˆ†åè¿›åˆ¶â€ çš„å­—ç¬¦ä¸²è¡¨ç¤ºIPåœ°å€, ä¾‹å¦‚ 192.168.0.1ï¼›ç”¨ç‚¹åˆ†å‰²çš„æ¯ä¸€ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªå­—èŠ‚, èŒƒå›´æ˜¯ 0 - 255ï¼›\nå› ipv4çš„è§„å®šçš„å±€é™æ€§ï¼Œipv4çš„ipç°åœ¨å·²ç»é€æ¸æ¯ç«­ï¼Œå¾ˆå¤šåœ°æ–¹çš„è¿è¥å•†å·²ç»ä¸æä¾›å®¶ç”¨å®½å¸¦çš„å…¬ç½‘IPåœ°å€ã€‚\n5.2 é€šä¿¡è¿‡ç¨‹åœ¨å¹¿åŸŸç½‘é€šä¿¡çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½éœ€è¦æä¾›æºIPå’Œç›®æ ‡IPï¼Œè¿™å°±æ˜¯ä»å“ªå„¿æ¥/åˆ°å“ªå„¿å»ï¼›åŒæ—¶ï¼Œè¿˜éœ€è¦æä¾›æºMACå’Œç›®æ ‡MACè¿›è¡Œæ ‡è¯†ã€‚\nåœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰è·¯ç”±å™¨æ¥å‘Šè¯‰ä½ åº”è¯¥å»å“ªå„¿ã€‚åœ¨è¿™æœŸé—´ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¼šåœ¨ä¸åŒçš„å±€åŸŸç½‘å†…è¿›è¡Œåˆ‡æ¢ã€‚\n\nåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼Œè·¯ç”±å™¨ä¼šæ›´æ–°ä½ çš„æºIP&#x2F;MACï¼ˆç›®æ ‡IPä¸å˜ï¼‰å¹¶æä¾›ç›®æ ‡çš„MACåœ°å€\n\nå”åƒ§å»è¥¿å¤©å–ç»ï¼Œä»–çš„ç›®çš„åœ°æ˜¯ä¸ä¼šå˜çš„ï¼Œä½†æ˜¯ä¸Šä¸€ç«™&#x2F;ä¸‹ä¸€ç«™ä¼šä¸æ–­å˜åŒ–\n\nä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬çš„æ•°æ®èµ°åˆ°IPè¿™ä¸€å±‚æ—¶ï¼Œå°±ä¼šåŠ ä¸ŠIPåè®®çš„æŠ¥å¤´ã€‚å¹¶åœ¨è·¯ç”±å™¨å†…è¿›è¡Œè§£åŒ…ï¼Œå†æ¢ä¸Šæ–°çš„IPæŠ¥å¤´ã€‚\n\næ­¤æ—¶IPä¸€å±‚å°±å¯ä»¥å’Œå…¶ä»–å±‚åŒºåˆ†å¼€ï¼Œå› ä¸ºåœ¨IPå±‚ä¹‹ä¸Šï¼Œå‘é€/æ¥æ”¶ä¸»æœºæ”¶åˆ°çš„æ•°æ®æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼\n\nIPå±‚æ˜¯ä¸€ä¸ªè½¯ä»¶å±‚ï¼Œä»»ä½•åº•å±‚çš„å·®å¼‚ï¼Œéƒ½å¯ä»¥é€šè¿‡åŠ ä¸€å±‚è½¯ä»¶å±‚æ¥è§£å†³ã€‚è¿™æ˜¯ä¸€ç§è½¯ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œlinuxçš„æ–‡ä»¶ç³»ç»Ÿä¹Ÿä½¿ç”¨äº†è¿™ç§æŠ€æœ¯\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡IPå±‚ï¼Œå¯ä»¥å±è”½åº•å±‚ç½‘ç»œçš„å·®è·ã€‚åœ¨é€šè¿‡ipé€šä¿¡çš„æ—¶å€™ï¼Œä¸éœ€è¦å…³æ³¨åº•å±‚çš„è·¯ç”±ç­‰ç¡¬ä»¶ä¿¡æ¯ä»¥åŠæ•°æ®ä¼ è¾“çš„å®ç°ã€‚\n5.3 ç«¯å£ä¸€å°ä¸»æœºé‡Œé¢æœ‰éå¸¸å¤šçš„è¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½èƒ½è®¿é—®ç½‘ç»œå‘é€ä¿¡æ¯ã€‚\nå…‰ç”¨IPåœ°å€ï¼Œæˆ‘ä»¬å®é™…ä¸Šåªèƒ½æ‰¾åˆ°å¯¹åº”çš„ä¸»æœºï¼Œå´æ— æ³•ç¡®å®šæ˜¯è¿™å°ä¸»æœºé‡Œé¢çš„xxåº”ç”¨å‘å‡ºçš„ä¿¡æ¯ã€‚\næ­¤æ—¶ï¼Œå°±éœ€è¦åˆ©ç”¨ç«¯å£å·æ¥ç¡®å®šæˆ‘ä»¬è¦è®¿é—®çš„è¿›ç¨‹æ˜¯ä»€ä¹ˆäº†ã€‚\n\nIPï¼šç¡®ä¿ä¸»æœºå”¯ä¸€æ€§\nç«¯å£portï¼šç¡®ä¿è¯¥ä¸»æœºä¸Šçš„è¿›ç¨‹å”¯ä¸€æ€§\n\nå¦‚æœä½ æœ‰ç”¨è¿‡dockerï¼Œé‚£è‚¯å®šå°±çŸ¥é“ç«¯å£å·è¿™ä¸€å­˜åœ¨ã€‚å¤§éƒ¨åˆ†dockeréƒ½éœ€è¦æ˜ å°„ä¸€ä¸ªç«¯å£ä»¥å¯¹å¤–æä¾›æœåŠ¡ã€‚\nç½‘ç»œé—´çš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸åŒä¸»æœºä¸Šçš„è¿›ç¨‹é€šä¿¡\n\nç«¯å£å·æ˜¯ä¸€ä¸ª2å­—èŠ‚çš„æ•´æ•°ï¼Œé™å®šäº†ç«¯å£èŒƒå›´ï¼ˆ1-65,536ï¼‰\nç«¯å£å·ç”¨äºæ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ï¼Œå‘Šè¯‰ç³»ç»Ÿï¼Œå½“å‰çš„æ•°æ®åº”äº¤ç»™å“ªä¸€ä¸ªè¿›ç¨‹å»è¿è¡Œ\nåŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨å¤šä¸ªç«¯å£å·\nä½†æ˜¯ä¸€ä¸ªç«¯å£å·åªèƒ½å¯¹åº”ä¸€ä¸ªè¿›ç¨‹\n\nç½‘ç»œé€šä¿¡ä¸­ï¼Œæœ‰æºIPå’Œç›®æ ‡IPï¼Œä¹Ÿæœ‰æºç«¯å£å’Œç›®æ ‡ç«¯å£ã€‚æˆ‘ä»¬æŠŠè¿™ä¸€å¯¹IP+ç«¯å£è¢«ç§°ä¸ºsocketå¯¹\n5.3.1 ç«¯å£&#x2F;PIDçš„å…³ç³»åœ¨ä¸€å°ä¸»æœºé‡Œé¢ï¼ŒPIDä¹Ÿå¯ä»¥ç”¨äºæ ‡è¯†å”¯ä¸€çš„è¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œç«¯å£å·å’ŒPIDæ˜¯å±äºä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚\n\nå‡è®¾é¤å…é‡Œæœ‰ä¸€ä¸ªæ‰«æŠŠï¼Œé¤å…é›‡äº†ä¸ªä¿æ´å‘˜Aï¼Œè®©ä»–æ¥æ‰“æ‰«é¤å…çš„å«ç”Ÿã€‚æ­¤æ—¶å°±å¯ä»¥æŠŠæ‰«æŠŠè®¤ä¸ºæ˜¯ç«¯å£ï¼Œä¿æ´å‘˜Aæ˜¯ä¸€ä¸ªè¿›ç¨‹ã€‚\næœ‰ä¸€å¤©ï¼Œä¿æ´å‘˜Aç”Ÿç—…äº†ï¼Œè¯·å‡ä¸€å‘¨ã€‚äºæ˜¯è€æ¿åˆè¯·äº†ä¸€ä¸ªä¿æ´å‘˜Bï¼Œè®©ä»–æ¥æ‰“æ‰«ä¸€å‘¨çš„å«ç”Ÿã€‚æ­¤æ—¶ï¼Œä¿æ´å‘˜Bä¹Ÿèƒ½ä½¿ç”¨é¤å…é‡Œé¢å·²æœ‰çš„æ‰«æŠŠï¼Œæ¥è¿›è¡Œæ‰“æ‰«å·¥ä½œ\n\nä¿æ´å‘˜A&#x2F;ä¿æ´å‘˜Bå¹²çš„å·¥ä½œæ˜¯å®Œå…¨ä¸€è‡´çš„\nä»–ä»¬ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªæ‰«æŠŠ\n\n\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨linuxä¸­ï¼Œä¸€ä¸ªåŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œæ¯ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒçš„è¿›ç¨‹PIDéƒ½æ˜¯ä¸åŒçš„ï¼›ä½†åŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œå¹²çš„æ´»è‚¯å®šæ˜¯ä¸€æ ·çš„ã€‚\nä¿æ´å‘˜Aå’ŒBå°±å¯ä»¥çœ‹ä½œæ˜¯åŒä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºï¼Œä»–ä»¬ç”¨çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªç«¯å£ï¼ˆæ‰«æŠŠï¼‰ï¼Œä½†ä¿æ´å‘˜Aå’ŒBçš„è¿›ç¨‹PIDæ˜¯ä¸ä¸€æ ·çš„ï¼\næ‰€ä»¥ï¼Œåœ¨ç½‘ç»œé€šä¿¡çš„æ—¶å€™ï¼Œé‡‡ç”¨äº†ç«¯å£è¿™ä¸ªæ‰«æŠŠæ¥æ ‡è¯†éœ€è¦è¿›è¡Œç½‘ç»œé€šä¿¡çš„è¿›ç¨‹ï¼Œè€Œä¸æ˜¯ç»§ç»­é‡‡ç”¨PIDæ¥æ ‡è¯†ğŸ‘»\n\næ“ä½œç³»ç»Ÿåªéœ€è¦ç»´æŠ¤ä¸€ä¸ªç«¯å£å·å’Œè¿›ç¨‹çš„å“ˆå¸Œè¡¨ï¼Œå°±èƒ½å¿«é€Ÿåœ°é€šè¿‡ç«¯å£å·æ‰¾åˆ°å¯¹åº”çš„è¿›ç¨‹\n\n5.4 TCP&#x2F;UDPTCPï¼ˆTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®ï¼‰\n\nä¼ è¾“å±‚åè®®\næœ‰é“¾æ¥ï¼ˆå¿…é¡»è¦å’Œç›®æ ‡å»ºç«‹è¿æ¥ï¼Œæ‰èƒ½å¼€å§‹æ•°æ®ä¼ è¾“ï¼‰\nå¯é ä¼ è¾“ï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰ä¸¢åŒ…ï¼Œéœ€è¦ä¿è¯æ•°æ®å®Œå…¨è¢«ä¼ è¾“åˆ°ç›®æ ‡ä¸»æœºï¼‰\né¢å‘å­—èŠ‚æµ\n\nUDPï¼ˆUser Datagram Protocol ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰\n\nä¼ è¾“å±‚åè®®\næ— è¿æ¥ï¼ˆæ— é¡»å»ºç«‹è¿æ¥ï¼Œæ¯”å¦‚æ‰€æœ‰äººéƒ½èƒ½ç»™ä½ çš„ç”µå­é‚®ç®±å‘é€é‚®ä»¶ï¼‰\nä¸å¯é ä¼ è¾“ï¼ˆä¸æ£€æŸ¥ä¸¢åŒ…ï¼‰\né¢å‘æ•°æ®æŠ¥\n\n6.ç½‘ç»œå­—èŠ‚åºåœ¨ä¹‹å‰å­¦ä¹ intç±»å‹çš„å­˜å‚¨çš„æ—¶å€™ï¼Œæåˆ°è¿‡å¤§ç«¯/å°ç«¯çš„æ¦‚å¿µ\n6.1 è¯´æ˜åœ¨ç½‘ç»œä¸­ï¼Œæ•°æ®æµåŒæ ·æœ‰å¤§ç«¯å°ç«¯ä¹‹åˆ†ã€‚TCP/IPåè®®è§„å®šï¼Œç½‘ç»œæ•°æ®æµåº”è¯¥é‡‡ç”¨å¤§ç«¯å­—èŠ‚åºï¼ˆä½åœ°å€é«˜å­—èŠ‚ï¼‰åå‘å‡ºçš„æ•°æ®æ˜¯é«˜åœ°å€\n\nå¦‚ä¸Šå›¾çš„1ä¸ºä¾‹ï¼Œå½“ç½‘ç»œä¸­å‘é€è¿™ä¸ªæ•°å­—1çš„æ—¶å€™ï¼Œä¼šå…ˆå‘é€00 00 00ï¼Œæœ€åå‘é€çš„æ˜¯01ã€‚è¿™æ ·èƒ½å¤Ÿæ–¹ä¾¿æ•°æ®çš„æ‹¼æ¥\n\nå‘é€ä¸»æœºå°†ç¼“å†²åŒºä¸­çš„æ•°æ®æŒ‰å†…å­˜åœ°å€ä»ä½åˆ°é«˜çš„é¡ºåºå‘å‡º\næ¥å—ä¸»æœºæŠŠæ•°æ®ä¾æ¬¡ä¿å­˜åˆ°ç¼“å­˜åŒºä¸­ï¼Œä¹Ÿæ˜¯æŒ‰åœ°å€ä»ä½åˆ°é«˜çš„é¡ºåºä¿å­˜\n\nè¿™ä¸ªè§„å®šæ›´é‡è¦çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å¯¹ç½‘ç»œå­—èŠ‚æ•°æ®çš„å¤§å°ç«¯åšå‡ºé™åˆ¶ï¼Œé‚£ä¹ˆç½‘ç»œé‡Œé¢å°±ä¼šå‡ºç°æ—¢æœ‰å¤§ç«¯åˆæœ‰å°ç«¯çš„æƒ…å†µï¼Œå¾—å†™ä¿©å¥—ä»£ç æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\nè€Œé™åˆ¶ä¸ºå¤§ç«¯ä¹‹åï¼Œå°ç«¯æœºå™¨å°±éœ€è¦åœ¨å‘é€ä¿¡æ¯ä¹‹å‰å°†æ•°æ®è½¬ä¸ºå¤§ç«¯ï¼Œåœ¨æ¥æ”¶åˆ°æ•°æ®ä¹‹åï¼Œå°†æ•°æ®è½¬æ¢ä¸ºå°ç«¯ã€‚æ­¤æ—¶çš„å¤„ç†å°±æ˜¯æ“ä½œç³»ç»Ÿçš„å·¥ä½œäº†ï¼Œå’ŒTCP/IPåè®®æœ¬èº«æ²¡æœ‰å…³ç³»äº†ğŸ˜›\n6.2 è½¬æ¢æ¥å£ä¸ºäº†æé«˜å¯ä»¥ç§»æ¤æ€§ï¼Œæœ‰ä»¥ä¸‹çš„è¿™ä¸ªæ¥å£å°†ç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºè¿›è¡Œè½¬æ¢\n#include &lt;arpa/inet.h&gt;uint32_t htonl(uint32_t hostlong);uint16_t htons(uint16_t hostshort);uint32_t ntohl(uint32_t hostlong);uint16_t ntohs(uint16_t hostshort);\n\nåœ¨å‘½åä¸­ï¼Œnä»£è¡¨networkï¼Œhä»£è¡¨hostï¼Œlä»£è¡¨longï¼Œsä»£è¡¨shortã€‚\nå¦‚æœä¸»æœºå°±æ˜¯å¤§ç«¯ï¼Œè¿™äº›å‡½æ•°ä»€ä¹ˆéƒ½ä¸ä¼šåšã€‚å¦‚æœä¸»æœºæ˜¯å°ç«¯ï¼Œåˆ™ä¼šå°†ä¸»æœºå­—èŠ‚åºè½¬æ¢æˆç½‘ç»œå­—èŠ‚åºï¼ˆæˆ–åä¹‹ï¼‰\næ›´å¤šâ€¦å…³äºç½‘ç»œåŸç†çš„å‰ç½®çŸ¥è¯†æš‚æ—¶å°±è®°å½•è¿™ä¹ˆå¤šï¼Œåç»­æœ‰æ–°å¢ä¼šæ¥æ›´æ–°æœ¬æ–‡\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€ç½‘ç»œã€‘è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | ä»¥tcpServerä¸ºä¾‹","url":"/posts/4225991450/","content":"ä»¥tcpServerçš„è®¡ç®—å™¨æœåŠ¡ä¸ºä¾‹ï¼Œå®ç°ä¸€ä¸ªè‡ªå®šä¹‰åè®®\n\n\n\né˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯» tcpServer\næœ¬æ–‡å®Œæ•´ä»£ç è¯¦è§ Gitee\n\n1.é‡è°ˆtcpæ³¨æ„ï¼Œå½“ä¸‹æ‰€å¯¹tcpçš„æè¿°éƒ½æ˜¯ä»¥ç®€å•ã€æ–¹ä¾¿ç†è§£èµ·è§ï¼Œåç»­ä¼šå¯¹tcpåè®®è¿›è¡Œæ·±å…¥è§£è¯»\n1.1 é“¾æ¥æˆ‘ä»¬çŸ¥é“ï¼Œtcpæ˜¯é¢å‘è¿æ¥çš„ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¦å…ˆå»ºç«‹é“¾æ¥ï¼Œæ‰èƒ½å¼€å§‹é€šä¿¡\n\nåœ¨é“¾æ¥è¿‡ç¨‹ä¸­ï¼Œtcpé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹\nåœ¨æ–­çº¿è¿‡ç¨‹ä¸­ï¼Œtcpé‡‡ç”¨å››æ¬¡æŒ¥æ‰‹\n\nä¸¾ä¸ªæ—¥å¸¸ç”Ÿæ´»ä¸­çš„æ —å­ï¼Œå¸®åŠ©ç†è§£3æ¬¡æ¡æ‰‹å’Œ4æ¬¡æŒ¥æ‰‹\n\n1.2 ä¿¡æ¯å‘é€\nå‡å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦å‘é€ç»“æ„åŒ–æ•°æ®ï¼Œé‚£åº”è¯¥æ€ä¹ˆåŠï¼Ÿ\n\næˆ‘ä»¬çŸ¥é“ï¼Œtcpæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œä¹Ÿå°±æ˜¯å…¶èƒ½å¤Ÿå‘é€ä»»æ„æ•°æ®ã€‚ä¹Ÿèƒ½å¤Ÿå‘é€Cè¯­è¨€ç»“æ„ä½“çš„äºŒè¿›åˆ¶æ•°æ®ï¼›\n\nä½†èƒ½å‘é€ï¼Œå°±ä»£è¡¨æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå¹²å—ï¼Ÿ\nç­”æ¡ˆè‡ªç„¶æ˜¯ä¸è¡Œï¼\n\nä¸åŒå¹³å°ï¼Œå¯¹ç»“æ„ä½“å¯¹é½çš„é…ç½®ä¸åŒï¼Œå¤§å°ç«¯ä¸åŒï¼Œå…¶æœ€ç»ˆå¯¹æˆ‘ä»¬å­—èŠ‚æµçš„è§£æä¹Ÿå°±ä¸ä¸€æ ·ã€‚å¦‚æœé‡‡ç”¨ç›´æ¥å‘é€ç»“æ„ä½“æ•°æ®çš„æ–¹å¼æ¥é€šä¿¡ï¼Œé€‚é…æ€§æä½ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½ä¼šè¢«é™åˆ¶åœ¨å½“å‰çš„ç³»ç»Ÿç¯å¢ƒä¸­è¿è¡Œï¼›\nå¯æ˜¯ï¼Œå“ªæ€•æ˜¯åŒä¸€ä¸ªç³»ç»Ÿï¼Œå…¶å†…éƒ¨å¯¹å¤§å°ç«¯çš„é…ç½®ä¹Ÿæœ‰å¯èƒ½æ”¹å˜ï¼åˆ°æ—¶å€™æˆ‘ä»¬çš„ä»£ç ææ€•å°±æ— æ³•è¿è¡Œäº†ï¼\nåŒç†ï¼Œåœ¨å½“åˆç¼–å†™Cè¯­è¨€é€šè®¯å½•çš„ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿä¸èƒ½é‡‡ç”¨ç›´æ¥å°†ç»“æ„ä½“æ•°æ®å†™å…¥æ–‡ä»¶çš„æ–¹å¼ã€‚åç»­ä»£ç å‡çº§ã€ç¯å¢ƒæ”¹å˜ï¼Œéƒ½å¯èƒ½å¯¼è‡´æˆ‘ä»¬å­˜åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®å¤±æ•ˆï¼Œè¿™è‚¯å®šæ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„æƒ…å†µã€‚\næ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±åº”è¯¥å°†æ•°æ®è¿›è¡Œåºåˆ—åŒ–ä¹‹åå†å‘é€ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°ä¿¡æ¯åï¼Œè¿›è¡Œååºåˆ—åŒ–è§£æå‡ºæ•°æ®ï¼\n2.åºåˆ—åŒ–å’Œååºåˆ—åŒ–2.1 ç®€ä»‹æ‰€è°“åºåˆ—åŒ–ï¼Œå°±æ˜¯å°†ç»“æ„åŒ–çš„æ•°æ®ï¼ˆå¯ä»¥æš‚æ—¶ç†è§£ä¸ºcçš„ç»“æ„ä½“ï¼‰è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå‘é€å‡ºå»\nstruct date&#123;    int year;    int month;    int day;&#125;;\n\næ¯”å¦‚ä¸Šé¢è¿™ä¸ªæ—¥æœŸç»“æ„ä½“ï¼Œæˆ‘ä»¬è¦æƒ³å°†å…¶åºåˆ—åŒ–ï¼Œå°±å¯ä»¥ç”¨ä¸€ä¸ªå¾ˆç®€å•çš„æ–¹å¼æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆåºåˆ—åŒ–ï¼‰\nyear-month-day\n\nå®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ªå­—ç¬¦ä¸²ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥æ‰¾åˆ†éš”ç¬¦-çš„æ–¹å¼ï¼Œå–å‡ºä¸‰ä¸ªå˜é‡ï¼Œå°†å…¶è½¬æˆintåå­˜æ”¾å›ç»“æ„ä½“ï¼ˆååºåˆ—åŒ–ï¼‰\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±ç®—æ˜¯è§„å®šäº†ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç®€å•çš„åè®®ï¼\n\n2.2 ç¼–ç è§£ç è¿™é‡Œè¿˜ä¼šå‡ºç°å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘è¦æ€ä¹ˆçŸ¥é“æˆ‘å·²ç»è¯»å–å®Œæ¯•äº†ä¸€ä¸ªåºåˆ—åŒ–åçš„æ•°æ®å‘¢ï¼Ÿ\n2000-12-1010000-01-01\n\nå¦‚ä¸Šï¼Œå‡è®¾æœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬çš„å¹´å˜æˆäº†äº”ä½æ•°ï¼›è¿™æ—¶å€™ï¼ŒæœåŠ¡ç«¯è¦æ€ä¹ˆçŸ¥é“è‡ªå·±æ˜¯å¦è¯»å–å®Œæ¯•äº†ä¸€ä¸ªå®Œæ•´çš„åºåˆ—åŒ–æ•°æ®å‘¢ï¼Ÿ\nè¿™å°±éœ€è¦æˆ‘ä»¬åšå¥½è§„å®šï¼Œå°†å‰nå­—èŠ‚ä½œä¸ºæ ‡è¯†é•¿åº¦çš„æ•°æ®ã€‚æ¥æ”¶åˆ°æ•°æ®åï¼Œå…ˆå–å‡ºå‰nä¸ªå­—èŠ‚ï¼Œè¯»å–é“æ­¤æ¬¡æ¶ˆæ¯çš„é•¿åº¦mï¼Œå†å¾€åè¯»å–mä¸ªå­—èŠ‚çš„æ•°æ®ï¼ŒæˆåŠŸå–å‡ºå®Œæ•´çš„å­—ç¬¦ä¸²;\n\nè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä½œç¼–ç å’Œè§£ç çš„è¿‡ç¨‹\n\nä¸ºäº†åŒºåˆ†æ ‡è¯†é•¿åº¦çš„æ•°æ®å’Œå®é™…éœ€è¦çš„åºåˆ—åŒ–å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¹‹ä¸­åŠ ä¸Šåˆ†éš”ç¬¦\\tï¼›ä½†è¿™ä¹Ÿéœ€è¦æˆ‘ä»¬ç¡®è®¤ï¼Œä¼ è¾“çš„æ•°æ®æœ¬èº«ä¸èƒ½å¸¦ä¸Š\\tï¼Œå¦åˆ™ä¼šäº§ç”Ÿä¸€ç³»åˆ—çš„é—®é¢˜\n10\\t2000-12-10\\t11\\t10000-01-01\\t\n\nä»¥ä¸Šçš„è¿™ä¸€ç³»åˆ—å·¥ä½œï¼Œéƒ½æ˜¯åè®®å®šåˆ¶çš„ä¸€éƒ¨åˆ†ï¼æˆ‘ä»¬ç»™æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è§„å®šäº†ä¸€ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼ï¼Œè®©äºŒè€…é€šä¿¡è§„é¿æ‰äº†å¹³å°çš„é™åˆ¶ã€‚æ¯•ç«Ÿä»»ä½•å¹³å°å¯¹å­—ç¬¦ä¸²è§£ç å‡ºæ¥çš„æ•°æ®éƒ½ä¼šæ˜¯ç›¸åŒçš„ï¼\nä¸‹é¢å°±ç”¨ä¸€ä¸ªè®¡ç®—å™¨çš„æœåŠ¡ï¼Œæ¥æ¼”ç¤ºä¸€ä¸‹å§ğŸ˜\n3.è®¡ç®—å™¨æœåŠ¡å› ä¸ºæœ¬æ–‡çš„é‡å¿ƒæ˜¯å¯¹åè®®å®šåˆ¶çš„æ¼”ç¤ºï¼Œæ‰€ä»¥è¿™é‡Œçš„è®¡ç®—å™¨ä¸è€ƒè™‘è¿ç»­æ“ä½œç¬¦çš„æƒ…å†µï¼Œ\n3.1 åè®®å®šåˆ¶è¦æƒ³å®ç°ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ˜ç™½è®¡ç®—å™¨æœ‰å‡ ä¸ªæˆå‘˜\nx+yx/yx*y...\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªè®¡ç®—å™¨åªéœ€è¦3ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«æ˜¯ä¸¤ä¸ªæ“ä½œæ•°å’Œä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå°±èƒ½å¼€å§‹è®¡ç®—ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿™é‡Œçš„ä¸‰ä¸ªå­—æ®µè®¾è®¡æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ç°åºåˆ—åŒ–ï¼›\næ¯”å¦‚æˆ‘ä»¬åº”è¯¥è§„å®šåºåˆ—åŒ–ä¹‹åçš„æ•°æ®åº”è¯¥æ˜¯å¦‚ä¸‹çš„ï¼Œä¸¤ä¸ªæ“ä½œæ•°å’Œæ“ä½œç¬¦ä¹‹é—´åº”è¯¥è¦æœ‰ç©ºæ ¼\na + b\n\nå†åœ¨å¼€å¤´æ·»åŠ ä¸Šæ•°æ®é•¿åº¦çš„æ ‡è¯†\næ•°æ®é•¿åº¦\\tå…¬å¼\\t7\\t10 + 20\\t8\\t100 / 30\\t9\\t300 - 200\\t\n\nå¯¹äºæœåŠ¡ç«¯ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›ä¸¤ä¸ªå‚æ•°ï¼šçŠ¶æ€ç å’Œç»“æœ\né€€å‡ºçŠ¶æ€ ç»“æœ\n\nå¦‚æœé€€å‡ºçŠ¶æ€ä¸ä¸º0ï¼Œåˆ™ä»£è¡¨å‡ºç°é”™è¯¯ï¼Œç»“æœæ— æ•ˆï¼›åªæœ‰é€€å‡ºç»“æœä¸º0ï¼Œç»“æœæ‰æ˜¯æœ‰æ•ˆçš„ã€‚\nåŒæ ·çš„ï¼Œä¹Ÿéœ€è¦ç»™æœåŠ¡å™¨çš„åºåˆ—åŒ–å­—ç¬¦ä¸²æ·»åŠ ä¸Šæ•°æ®çš„é•¿åº¦\næ•°æ®é•¿åº¦\\té€€å‡ºçŠ¶æ€ ç»“æœ\\t\n\nè¿™æ ·å°±æå®šäº†ä¸€ä¸ªè®¡ç®—å™¨çš„è‡ªå®šä¹‰åè®®ï¼›\n3.2 æˆå‘˜ä¾ç…§å¦‚ä¸Šçš„åè®®ï¼Œå…ˆæŠŠè¯·æ±‚å’Œè¿”å›çš„æˆå‘˜å˜é‡å†™å¥½\nclass Request&#123;    int _x;    int _y;    char _ops;&#125;;\n\nclass Response&#123;\tint _exitCode; //è®¡ç®—æœåŠ¡çš„é€€å‡ºç \tint _result;  // ç»“æœ&#125;;  \n\nè¿™äº›æˆå‘˜å˜é‡éƒ½è®¾ç½®ä¸ºå…¬æœ‰ï¼Œæ–¹ä¾¿åœ¨taské‡Œé¢è¿›è¡Œå¤„ç†ï¼ˆå¦åˆ™å°±éœ€è¦å†™getå‡½æ•°ï¼Œå¾ˆéº»çƒ¦ï¼‰\nåŒæ—¶ï¼Œæœ€å¥½è¿˜æ˜¯æŠŠåè®®ä¸­çš„åˆ†éš”ç¬¦ç»™å®šä¹‰å‡ºæ¥ï¼Œæ–¹ä¾¿åç»­ç»Ÿä¸€ä½¿ç”¨oræ›´æ”¹\n#define CRLF &quot;\\t&quot;   //åˆ†éš”ç¬¦#define CRLF_LEN strlen(CRLF) //åˆ†éš”ç¬¦é•¿åº¦#define SPACE &quot; &quot;   //ç©ºæ ¼#define SPACE_LEN strlen(SPACE) //ç©ºæ ¼é•¿åº¦#define OPS &quot;+-*/%&quot; //è¿ç®—ç¬¦\n\n3.3 ç¼–ç è§£ç å¯¹äºè¯·æ±‚å’Œå›åº”æ¥è¯´ï¼Œç¼–è§£ç çš„æ“ä½œæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å¾€å­—ç¬¦ä¸²çš„å¼€å¤´æ·»åŠ ä¸Šé•¿åº¦å’Œåˆ†éš”ç¬¦\né•¿åº¦\\tåºåˆ—åŒ–å­—ç¬¦ä¸²\\t\n\nè§£ç å°±æ˜¯å°†é•¿åº¦å’Œåˆ†éš”ç¬¦å»æ‰ï¼Œåªè§£æå‡ºåºåˆ—åŒ–å­—ç¬¦ä¸²\nåºåˆ—åŒ–å­—ç¬¦ä¸²\n\nç¼–ç è§£ç çš„æ•´ä¸ªè¿‡ç¨‹åœ¨æ³¨é‡Šé‡Œé¢éƒ½å†™æ˜äº†ğŸ˜ä¸ºäº†æ–¹ä¾¿è¯·æ±‚å’Œå›åº”å»ä½¿ç”¨ï¼Œç›´æ¥æ”¾åˆ°å¤–å¤´ï¼Œä¸åšç±»å†…å°è£…\n//å‚æ•°lenä¸ºinçš„é•¿åº¦ï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚å¦‚æœä¸º0ä»£è¡¨errstd::string decode(std::string&amp; in,size_t*len)&#123;    assert(len);//å¦‚æœé•¿åº¦ä¸º0æ˜¯é”™è¯¯çš„    // 1.ç¡®è®¤inçš„åºåˆ—åŒ–å­—ç¬¦ä¸²å®Œæ•´ï¼ˆåˆ†éš”ç¬¦ï¼‰    *len=0;    size_t pos = in.find(CRLF);//æŸ¥æ‰¾åˆ†éš”ç¬¦    //æŸ¥æ‰¾ä¸åˆ°ï¼Œerr    if(pos == std::string::npos)&#123;        return &quot;&quot;;//è¿”å›ç©ºä¸²    &#125;       // 2.æœ‰åˆ†éš”ç¬¦ï¼Œåˆ¤æ–­é•¿åº¦æ˜¯å¦è¾¾æ ‡    // æ­¤æ—¶posä¸‹æ ‡æ­£å¥½å°±æ˜¯æ ‡è¯†å¤§å°çš„å­—ç¬¦é•¿åº¦    std::string inLenStr = in.substr(0,pos);//æå–å­—ç¬¦ä¸²é•¿åº¦    size_t inLen = atoi(inLenStr.c_str());//è½¬int    size_t left = in.size() - inLenStr.size()- 2*CRLF_LEN;//å‰©ä¸‹çš„å­—ç¬¦é•¿åº¦    if(left&lt;inLen)&#123;        return &quot;&quot;; //å‰©ä¸‹çš„é•¿åº¦æ²¡æœ‰è¾¾åˆ°æ ‡æ˜çš„é•¿åº¦    &#125;    // 3.èµ°åˆ°æ­¤å¤„ï¼Œå­—ç¬¦ä¸²å®Œæ•´ï¼Œå¼€å§‹æå–åºåˆ—åŒ–å­—ç¬¦ä¸²    std::string ret = in.substr(pos+CRLF_LEN,inLen);    *len = inLen;    // 4.å› ä¸ºinä¸­å¯èƒ½è¿˜æœ‰å…¶ä»–çš„æŠ¥æ–‡ï¼ˆä¸‹ä¸€æ¡ï¼‰    // æ‰€ä»¥éœ€è¦æŠŠå½“å‰çš„æŠ¥æ–‡ä»inä¸­åˆ é™¤ï¼Œæ–¹ä¾¿ä¸‹æ¬¡decodeï¼Œé¿å…äºŒæ¬¡è¯»å–    size_t rmLen = inLenStr.size() + ret.size() + 2*CRLF_LEN;    in.erase(0,rmLen);    // 5.è¿”å›    return ret;&#125;//ç¼–ç ä¸éœ€è¦ä¿®æ”¹æºå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥constã€‚å‚æ•°lenä¸ºinçš„é•¿åº¦std::string encode(const std::string&amp; in,size_t len)&#123;    std::string ret = std::to_string(len);//å°†é•¿åº¦è½¬ä¸ºå­—ç¬¦ä¸²æ·»åŠ åœ¨æœ€å‰é¢ï¼Œä½œä¸ºæ ‡è¯†    ret+=CRLF;    ret+=in;    ret+=CRLF;    return ret;&#125;\n\n3.4 requestç¼–ç è§£ç å†™å¥½äº†ï¼Œå…ˆæ¥å¤„ç†æ¯”è¾ƒéº»çƒ¦çš„è¯·æ±‚éƒ¨åˆ†ï¼›è¯´éº»çƒ¦å§ï¼Œå…¶å®å¤§å¤šæ•°ä¹Ÿæ˜¯c++çš„stringæ“ä½œï¼Œè¦ç†Ÿç»ƒè¿ç”¨stringçš„å„ç±»æˆå‘˜å‡½æ•°ï¼Œæ‰èƒ½å¾ˆå¥½çš„å®ç°\n3.4.1 æ„é€ æ¯”è¾ƒé‡è¦çš„æ˜¯è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†ç”¨æˆ·çš„è¾“å…¥è½¬æˆå†…éƒ¨çš„ä¸‰ä¸ªæˆå‘˜\nç”¨æˆ·å¯èƒ½è¾“å…¥x+yï¼Œx+ yï¼Œx +y,x + yç­‰ç­‰æ ¼å¼\n\nè¿™é‡Œè¿˜éœ€è¦æ³¨æ„ï¼Œç”¨æˆ·çš„è¾“å…¥ä¸ä¸€å®šæ˜¯æ ‡å‡†çš„X+Yï¼Œé‡Œé¢å¯èƒ½åœ¨ä¸åŒä½ç½®é‡Œé¢ä¼šæœ‰ç©ºæ ¼ã€‚ä¸ºäº†ç»Ÿä¸€æ–¹ä¾¿å¤„ç†ï¼Œåœ¨è§£æä¹‹å‰ï¼Œæœ€å¥½å…ˆæŠŠç”¨æˆ·è¾“å…¥å†…çš„ç©ºæ ¼ç»™å»æ‰ï¼\nå¯¹äºstringè€Œè¨€ï¼Œå»æ‰ç©ºæ ¼å°±å¾ˆç®€å•äº†ï¼Œç›´æ¥ä¸€ä¸ªéå†æå®š\n// åˆ é™¤è¾“å…¥ä¸­çš„ç©ºæ ¼void rmSpace(std::string&amp; in)&#123;    std::string tmp;    for(auto e:in)    &#123;        if(e!=&#x27; &#x27;)        &#123;            tmp+=e;        &#125;    &#125;    in = tmp;&#125;\n\nå®Œæˆçš„æ„é€ å¦‚ä¸‹ï¼Œè¿™é‡Œæ¶‰åŠåˆ°Cè¯­è¨€çš„å‡½æ•°strtokï¼Œè¦å¤ä¹ å¤ä¹ \n// å°†ç”¨æˆ·çš„è¾“å…¥è½¬æˆå†…éƒ¨æˆå‘˜// ç”¨æˆ·å¯èƒ½è¾“å…¥x+yï¼Œx+ yï¼Œx +y,x + yç­‰ç­‰æ ¼å¼// æå‰ä¿®æ”¹ç”¨æˆ·è¾“å…¥ï¼ˆä¸»è¦è¿˜æ˜¯å»æ‰ç©ºæ ¼ï¼‰ï¼Œæå–å‡ºæˆå‘˜Request(std::string in,bool* status)    :_x(0),_y(0),_ops(&#x27; &#x27;)&#123;    rmSpace(in);    // è¿™é‡Œä½¿ç”¨cçš„å­—ç¬¦ä¸²ï¼Œå› ä¸ºæœ‰strtok    char buf[1024];    // æ‰“å°nä¸ªå­—ç¬¦ï¼Œå¤šçš„ä¼šè¢«æˆªæ–­    snprintf(buf,sizeof(buf),&quot;%s&quot;,in.c_str());    char* left = strtok(buf,OPS);    if(!left)&#123;//æ‰¾ä¸åˆ°        *status = false;        return;    &#125;    char*right = strtok(nullptr,OPS);    if(!right)&#123;//æ‰¾ä¸åˆ°        *status = false;        return;    &#125;    // x+y, strtokä¼šå°†+è®¾ç½®ä¸º\\0    char mid = in[strlen(left)];//æˆªå–å‡ºæ“ä½œç¬¦    //è¿™æ˜¯åœ¨åŸå­—ç¬¦ä¸²é‡Œé¢å–å‡ºæ¥ï¼Œbufé‡Œé¢çš„è¿™ä¸ªä½ç½®è¢«æ”¹æˆ\\0äº†    _x = atoi(left);    _y = atoi(right);    _ops = mid;    *status=true;&#125;\n\n3.4.2 åºåˆ—åŒ–è§£æå‡ºæˆå‘˜ä»¥åï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯å¯¹æˆå‘˜è¿›è¡Œåºåˆ—åŒ–ï¼Œå°†å…¶æŒ‰æŒ‡å®šçš„ä½ç½®æ‘†æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™é‡Œé‡‡ç”¨äº†è¾“å‡ºå‹å‚æ•°çš„æ–¹å¼æ¥åºåˆ—åŒ–å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ”¹æˆç”¨è¿”å›å€¼çš„æ–¹å¼æ¥æ“ä½œã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ“ä½œç¬¦æœ¬èº«å°±æ˜¯charä¸èƒ½ä½¿ç”¨to_stringæ¥æ“ä½œï¼Œä¼šè¢«è½¬æˆasciiç ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚\n// åºåˆ—åŒ– ï¼ˆå…¥å‚åº”è¯¥æ˜¯ç©ºçš„ï¼‰void serialize(std::string&amp; out)&#123;    // x + y    out.clear(); // åºåˆ—åŒ–çš„å…¥å‚æ˜¯ç©ºçš„    out+= std::to_string(_x);    out+= SPACE;    out+= _ops;//æ“ä½œç¬¦ä¸èƒ½ç”¨tostringï¼Œä¼šè¢«è½¬æˆascii    out+= SPACE;    out+= std::to_string(_y);    // ä¸ç”¨æ·»åŠ åˆ†éš”ç¬¦ï¼ˆè¿™æ˜¯encodeè¦å¹²çš„äº‹æƒ…ï¼‰&#125;\n\n3.4.3 ååºåˆ—åŒ–æ³¨æ„ï¼Œæ€è·¯ä¸èƒ½æé”™äº†ã€‚åˆšå¼€å§‹æˆ‘è®¤ä¸ºrequestçš„ååºåˆ—åŒ–åº”è¯¥é’ˆå¯¹çš„æ˜¯æœåŠ¡å™¨çš„è¿”å›å€¼ï¼Œå®é™…å¹¶éå¦‚æ­¤ï¼\nåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦ä½¿ç”¨requestï¼Œå®¢æˆ·ç«¯è¿›è¡Œåºåˆ—åŒ–ï¼ŒæœåŠ¡ç«¯å¯¹æ¥æ”¶åˆ°çš„ç»“æœåˆ©ç”¨requestè¿›è¡Œååºåˆ—åŒ–ã€‚requeståªå…³æ³¨äºå¯¹è¯·æ±‚çš„å¤„ç†ï¼Œè€Œä¸å¤„ç†æœåŠ¡å™¨çš„è¿”å›å€¼ã€‚\n// ååºåˆ—åŒ–bool deserialize(const std::string &amp;in)&#123;    // x + y éœ€è¦å–å‡ºxï¼Œyå’Œæ“ä½œç¬¦    size_t space1 = in.find(SPACE); //ç¬¬ä¸€ä¸ªç©ºæ ¼    if(space1 == std::string::npos)    &#123;        return false;    &#125;    size_t space2 = in.rfind(SPACE); //ç¬¬äºŒä¸ªç©ºæ ¼    if(space2 == std::string::npos)    &#123;        return false;    &#125;    // ä¸¤ä¸ªç©ºæ ¼éƒ½å­˜åœ¨ï¼Œå¼€å§‹å–æ•°æ®    std::string dataX = in.substr(0,space1);    std::string dataY = in.substr(space2+SPACE_LEN);//é»˜è®¤å–åˆ°ç»“å°¾    std::string op = in.substr(space1+SPACE_LEN,space2 -(space1+SPACE_LEN));    if(op.size()!=1)    &#123;        return false;//æ“ä½œç¬¦é•¿åº¦æœ‰é—®é¢˜    &#125;    //æ²¡é—®é¢˜äº†ï¼Œè½¬å†…éƒ¨æˆå‘˜    _x = atoi(dataX.c_str());    _y = atoi(dataY.c_str());    _ops = op[0];    return true;&#125;\n\n3.5 response3.5.1 æ„é€ è¿”å›å€¼çš„æ„é€ æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºæ˜¯æœåŠ¡å™¨å¤„ç†ç»“æœä¹‹åçš„æ“ä½œï¼›è¿™äº›æˆå‘˜å˜é‡éƒ½è®¾ç½®ä¸ºäº†å…¬æœ‰ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹ã€‚\nResponse(int code=0,int result=0)    :_exitCode(code),_result(result)&#123;&#125;\n\n3.5.2 åºåˆ—åŒ–// å…¥å‚æ˜¯ç©ºçš„void serialize(std::string&amp; out)&#123;    // code ret    out.clear();    out+= std::to_string(_exitCode);    out+= SPACE;    out+= std::to_string(_result);    out+= CRLF;&#125;\n\n3.5.3 ååºåˆ—åŒ–å“åº”çš„ååºåˆ—åŒ–åªéœ€è¦å¤„ç†ä¸€ä¸ªç©ºæ ¼ï¼Œç›¸å¯¹æ¥è¯´è¾ƒä¸ºç®€å•\n// ååºåˆ—åŒ–bool deserialize(const std::string &amp;in)&#123;    // åªæœ‰ä¸€ä¸ªç©ºæ ¼    size_t space = in.find(SPACE);    if(space == std::string::npos)    &#123;        return false;    &#125;    std::string dataCode = in.substr(0,space);    std::string dataRes = in.substr(space+SPACE_LEN);    _exitCode = atoi(dataCode.c_str());    _result = atoi(dataRes.c_str());    return true;&#125;\n\n3.6 å®¢æˆ·ç«¯ä¹‹å‰å†™çš„å®¢æˆ·ç«¯ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œåºåˆ—åŒ–æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸Šåºåˆ—åŒ–æ“ä½œï¼Œå¹¶å¯¹æœåŠ¡å™¨çš„è¿”å›å€¼è¿›è¡Œååºåˆ—åŒ–ã€‚è¿™æœŸé—´éœ€è¦åŠ ä¸Šä¸€ç³»åˆ—åˆ¤æ–­ï¼›\nä¸ºäº†é™åˆ¶ç¯‡å¹…ï¼Œä¸‹é¢åªè´´å‡ºæ¥å®¢æˆ·ç«¯çš„å¾ªç¯æ“ä½œï¼›è¯¦æƒ…å‚è€ƒæ³¨é‡Šã€‚\n// å®¢æˆ·ç«¯å‘ç°çš„æ¶ˆæ¯string message;while (1)&#123;    message.clear();//æ¯æ¬¡å¾ªç¯å¼€å§‹ï¼Œéƒ½æ¸…ç©ºä¸€ä¸‹msg    cout &lt;&lt; &quot;è¯·è¾“å…¥ä½ çš„æ¶ˆæ¯# &quot;;    getline(cin, message);//è·å–è¾“å…¥    // å¦‚æœå®¢æˆ·ç«¯è¾“å…¥äº†quitï¼Œåˆ™é€€å‡º    if (strcasecmp(message.c_str(), &quot;quit&quot;) == 0)        break;    // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯    // 1.åˆ›å»ºä¸€ä¸ªrequestï¼ˆåˆ†ç¦»å‚æ•°ï¼‰    bool reqStatus = true;    Request req(message,&amp;reqStatus);    if(!reqStatus)&#123;        cout &lt;&lt; &quot;make req err!&quot; &lt;&lt; endl;        continue;    &#125;    // 2.åºåˆ—åŒ–å’Œç¼–ç     string package;    req.serialize(package);//åºåˆ—åŒ–    package = encode(package,package.size());//ç¼–ç     // 3.å‘é€ç»™æœåŠ¡å™¨    ssize_t s = write(sock,package.c_str(), package.size());    if (s &gt; 0) // å†™å…¥æˆåŠŸ    &#123;        // 4.è·å–æœåŠ¡å™¨çš„ç»“æœ        char buff[BUFFER_SIZE];        size_t s = read(sock, buff, sizeof(buff)-1);        if(s &gt; 0)&#123;            buff[s] = &#x27;\\0&#x27;;        &#125;        std::string echoPackage = buff;        Response resp;        size_t len = 0;        // 5.è§£ç å’Œååºåˆ—åŒ–        std::string tmp = decode(echoPackage, &amp;len);        if(len &gt; 0)//è§£ç æˆåŠŸ        &#123;            echoPackage = tmp;            if(resp.deserialize(echoPackage))//ååºåˆ—åŒ–å¹¶åˆ¤æ–­            &#123;                printf(&quot;ECHO [exitcode: %d] %d\\n&quot;, resp._exitCode, resp._result);            &#125;            else            &#123;                cerr &lt;&lt; &quot;server echo deserialize err!&quot; &lt;&lt; endl;            &#125;        &#125;        else        &#123;            cerr &lt;&lt; &quot;server echo decode err!&quot; &lt;&lt; endl;        &#125;    &#125;    else if (s &lt;= 0) // å†™å…¥å¤±è´¥    &#123;        break;    &#125;&#125;\n\n3.7 æœåŠ¡ç«¯æœåŠ¡ç«¯æ— é¡»ä¿®æ”¹ä»£ç ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯taskæ¶ˆæ¯é˜Ÿåˆ—ä¸­å¤„ç†çš„ä»»åŠ¡ï¼›è¿™å°±æ˜¯ä¹‹å‰åšå¥½å°è£…çš„å¥½å¤„ï¼Œå› ä¸ºåªéœ€è¦ä¿®æ”¹taské‡Œé¢ä¼ å…¥çš„å‡½æ•°æŒ‡é’ˆï¼Œå°±ç®—æ˜¯ä¿®æ”¹äº†æœåŠ¡å™¨æ‰€è¿›è¡Œçš„æœåŠ¡\n// æä¾›æœåŠ¡ï¼ˆé€šè¿‡çº¿ç¨‹æ± ï¼‰Task t(conet,senderIP,senderPort,CaculateService);_tpool-&gt;push(t);\n\nå¦‚ä¸‹æ˜¯è®¡ç®—å™¨æœåŠ¡çš„ä»£ç \nvoid CaculateService(int sockfd, const std::string &amp;clientIP, uint16_t clientPort)&#123;    assert(sockfd &gt;= 0);    assert(!clientIP.empty());    assert(clientPort &gt; 0);    std::string inbuf;    while(1)    &#123;        Request req;        char buf[BUFFER_SIZE];        // 1.è¯»å–å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯        ssize_t s = read(sockfd, buf, sizeof(buf) - 1);        if (s == 0)        &#123;   // s == 0ä»£è¡¨å¯¹æ–¹å‘é€äº†ç©ºæ¶ˆæ¯ï¼Œè§†ä½œå®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º            logging(DEBUG, &quot;client quit: %s[%d]&quot;, clientIP.c_str(), clientPort);            break;        &#125;        else if(s&lt;0)        &#123;            // å‡ºç°äº†è¯»å–é”™è¯¯ï¼Œæ‰“å°æ—¥å¿—åæ–­å¼€è¿æ¥            logging(DEBUG, &quot;read err: %s[%d] = %s&quot;, clientIP.c_str(), clientPort, strerror(errno));            break;        &#125;        // 2.è¯»å–æˆåŠŸ        buf[s] = &#x27;\\0&#x27;; // æ‰‹åŠ¨æ·»åŠ å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦        if (strcasecmp(buf, &quot;quit&quot;) == 0)        &#123; // å®¢æˆ·ç«¯ä¸»åŠ¨é€€å‡º            break;        &#125;        // 3.å¼€å§‹æœåŠ¡        inbuf = buf;        size_t packageLen = inbuf.size();        // 3.1.è§£ç å’Œååºåˆ—åŒ–å®¢æˆ·ç«¯ä¼ æ¥çš„æ¶ˆæ¯        std::string package = decode(inbuf, &amp;packageLen);//è§£ç         if(packageLen==0)&#123;            logging(DEBUG, &quot;decode err: %s[%d] status: %d&quot;, clientIP.c_str(), clientPort, packageLen);            continue;//æŠ¥æ–‡ä¸å®Œæ•´æˆ–æœ‰è¯¯        &#125;        logging(DEBUG,&quot;package: %s[%d] = %s&quot;,clientIP.c_str(), clientPort,package.c_str());        bool deStatus = req.deserialize(package); // ååºåˆ—åŒ–        if(deStatus) // è·å–æ¶ˆæ¯ååºåˆ—åŒ–æˆåŠŸ        &#123;            req.debug(); // æ‰“å°ä¿¡æ¯            // 3.2.è·å–ç»“æ„åŒ–çš„ç›¸åº”            Response resp = Caculater(req);            // 3.3.åºåˆ—åŒ–å’Œç¼–ç å“åº”            std::string echoStr;            resp.serialize(echoStr);            echoStr = encode(echoStr,echoStr.size());            // 3.4.å†™å…¥ï¼Œå‘é€è¿”å›å€¼ç»™å®¢æˆ·ç«¯            write(sockfd, echoStr.c_str(), echoStr.size());        &#125;        else // å®¢æˆ·ç«¯æ¶ˆæ¯ååºåˆ—åŒ–å¤±è´¥        &#123;            logging(DEBUG, &quot;deserialize err: %s[%d] status: %d&quot;, clientIP.c_str(), clientPort, deStatus);            continue;        &#125;    &#125;    close(sockfd);    logging(DEBUG, &quot;server quit: %s[%d] %d&quot;,clientIP.c_str(), clientPort, sockfd);&#125;\n\nå…¶ä¸­æœ‰ä¸€ä¸ªè®¡ç®—å‡½æ•°ï¼Œæ¯”è¾ƒç®€å•ï¼Œé€šè¿‡switch caseè¯­å¥ï¼Œè®¡ç®—ç»“æœï¼Œå¹¶åˆ¤æ–­æ“ä½œæ•°æ˜¯å¦æœ‰é—®é¢˜ã€‚\nResponse Caculater(const Request&amp; req)&#123;    Response resp;//æ„é€ å‡½æ•°ä¸­å·²ç»æŒ‡å®šäº†exitcodeä¸º0    switch (req._ops)    &#123;    case &#x27;+&#x27;:        resp._result = req._x + req._y;        break;    case &#x27;-&#x27;:        resp._result = req._x - req._y;        break;    case &#x27;*&#x27;:        resp._result = req._x * req._y;        break;    case &#x27;%&#x27;:    &#123;        if(req._y == 0)        &#123;            resp._exitCode = -1;//å–æ¨¡é”™è¯¯            break;        &#125;        resp._result = req._x % req._y;//å–æ¨¡æ˜¯å¯ä»¥æ“ä½œè´Ÿæ•°çš„        break;    &#125;    case &#x27;/&#x27;:    &#123;        if(req._y == 0)        &#123;            resp._exitCode = -2;//é™¤0é”™è¯¯            break;        &#125;        resp._result = req._x / req._y;//å–æ¨¡æ˜¯å¯ä»¥æ“ä½œè´Ÿæ•°çš„        break;    &#125;    default:        resp._exitCode = -3;//æ“ä½œç¬¦éæ³•        break;    &#125;    return resp;&#125;\n\nè¿™æ ·ï¼Œæˆ‘ä»¬çš„åºåˆ—åŒ–å¤„ç†å°±æˆåŠŸäº†ï¼æµ‹è¯•ä¸€ä¸‹å§\n4.æµ‹è¯•è¿è¡ŒæœåŠ¡å™¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨èƒ½æˆåŠŸå¤„ç†å®¢æˆ·ç«¯çš„è®¡ç®—ï¼Œå¹¶è¿”å›ç»“æœ\n\nè¾“å…¥quitï¼ŒæœåŠ¡å™¨ä¼šæ‰“å°ä¿¡æ¯ï¼Œå¹¶é€€å‡ºæœåŠ¡\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€Linuxã€‘å®ç°å®ˆæŠ¤è¿›ç¨‹ | ä»¥tcpServerä¸ºä¾‹","url":"/posts/2887088349/","content":"æœ¬æ–‡å°†ä»¥tcpæœåŠ¡å™¨ä»£ç ä¸ºåŸºæœ¬ï¼Œè®²è¿°å¦‚ä½•å°†è¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹åŒ–ï¼Œåå°è¿è¡Œ\n\n\n1.å®ˆæŠ¤è¿›ç¨‹æ‰€è°“å®ˆæŠ¤è¿›ç¨‹ï¼Œå°±æ˜¯å’Œå…¶ä»–è¿›ç¨‹æ²¡æœ‰å…³ç³»çš„è¿›ç¨‹ï¼›å…¶ç‹¬ç«‹è¿è¡Œäºç³»ç»Ÿåå°ï¼Œé™¤éè‡ªå·±é€€å‡ºæˆ–æ”¶åˆ°ä¿¡å·ç»ˆæ­¢ï¼Œå¦åˆ™ä¼šä¸€ç›´è¿è¡Œä¸‹å»\n1.1 è¿›ç¨‹ç»„åœ¨æˆ‘ä»¬ä½¿ç”¨çš„bashä¸­ï¼ŒåŒä¸€æ—¶åˆ»åªä¼šæœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹ç»„\n\nå¦‚å›¾ï¼Œå½“ä¸€ä¸ªå‰å°è¿›ç¨‹å¼€å§‹è¿è¡Œä¹‹åï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨å½“å‰ç»ˆç«¯å¼€å¯ç¬¬äºŒä¸ªå‰å°è¿›ç¨‹ã€‚\nåœ¨è¿è¡Œçš„å‘½ä»¤åé¢åŠ &amp;ï¼Œä¸´æ—¶è®©å½“å‰è¿›ç¨‹åœ¨åå°è¿è¡Œã€‚æ³¨æ„ï¼Œæ­¤æ—¶tcpè™½ç„¶åœ¨åå°è¿è¡Œäº†ï¼Œ ä½†å¯¹äºå®ƒè€Œè¨€ï¼Œstdin/stdout/stderrçš„æ–‡ä»¶æè¿°ç¬¦ä¾æ—§æŒ‡å‘çš„æ˜¯å½“å‰bashçš„è¾“å…¥è¾“å‡ºï¼Œæ‰€ä»¥å®ƒçš„æ—¥å¿—ä¾æ—§ä¼šæ‰“å°åˆ°å½“å‰ç»ˆç«¯ä¸Šã€‚\nç”¨pså‘½ä»¤æŸ¥çœ‹å½“å‰è¿›ç¨‹çš„ä¿¡æ¯ï¼Œå…¶ä¸­ppidæ˜¯å½“å‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯å½“å‰bashï¼Œpidæ˜¯è¿›ç¨‹ç¼–å·ï¼Œpgidæ˜¯è¿›ç¨‹çš„ç»„ç¼–å·ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªç»„ç¼–å·å’Œgrepå‘½ä»¤çš„ç»„ç¼–å·æ˜¯ä¸åŒçš„ã€‚\n\næˆ‘ä»¬ç”¨è¿™ä¸ªcè¯­è¨€çš„ä»£ç è°ƒç”¨ä¸¤æ¬¡forkï¼Œç›¸å½“äºåˆ›å»ºäº†3ä¸ªå­è¿›ç¨‹ã€‚\n#include &lt;sys/wait.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main()&#123;    fork();    fork();    sleep(100);    return 0;&#125;\n\næ­¤æ—¶å†æ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼Œèƒ½çœ‹åˆ°è¿™4ä¸ªè¿›ç¨‹çš„è¿›ç¨‹ç»„pgidæ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”å’Œç¬¬ä¸€ä¸ªtestçš„pidç›¸åŒï¼›è¿™è¯´æ˜ç¬¬ä¸€ä¸ªtestå°±æ˜¯çˆ¶è¿›ç¨‹ï¼Œåé¢çš„3ä¸ªéƒ½æ˜¯å­è¿›ç¨‹ã€‚\n\n1.2 è¿›ç¨‹ä¼šè¯è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ä¹‹å‰æ²¡æœ‰å¤ªå¤šäº†è§£çš„ä¿¡æ¯ï¼Œè¿›ç¨‹çš„sidæ˜¯ä»€ä¹ˆï¼Ÿ\nè¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨å›¾ä¸­èƒ½çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„testå’Œgrepçš„sidéƒ½æ˜¯ç›¸åŒçš„ï¼Œè€Œä¸”éƒ½ç­‰äºç¬¬ä¸€ä¸ªtestè¿›ç¨‹çš„ppidï¼ˆbashçš„pidï¼‰\n\nè¿™è¡¨æ˜å›¾ä¸­çš„5ä¸ªè¿›ç¨‹åŒå±äºä¸€ä¸ªè¿›ç¨‹ä¼šè¯ï¼Œè¿™ä¸ªä¼šè¯å°±æ˜¯æˆ‘ä»¬å½“å‰æ‰“å¼€çš„bashï¼Œå¹¶ç”¨sidæ¥è¡¨ç¤ºè¿›ç¨‹ä¼šè¯ï¼›\n\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç™»å½•linuxçš„æ—¶å€™ä¸€å®šä¼šæœ‰ä¸€ä¸ªç»ˆç«¯ï¼Œlinuxç³»ç»Ÿå°±æ˜¯åˆ›å»ºä¼šè¯å¹¶åŠ è½½bashï¼Œæ¥ç»™ç”¨æˆ·æä¾›æœåŠ¡çš„ã€‚\n\næ—¢ç„¶å­˜åœ¨ä¼šè¯ï¼Œé‚£å°±è‚¯å®šä¼šæœ‰ä¼šè¯çš„èµ„æºä¸Šé™ã€‚ä¸€æ—¦æ»¡äº†ï¼Œå°±ä¼šå¼€å§‹æ€æ‰ä¸€äº›è¿›ç¨‹ã€‚\n./test &amp;\n\nå³ä¾¿æˆ‘ä»¬ç”¨&amp;è®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œå…¶ä¹Ÿæœ‰å¯èƒ½æ”¶åˆ°ä¼šè¯çš„åˆ›å»º/å…³é—­çš„å½±å“è€Œè¢«æ“ä½œç³»ç»Ÿå¹²æ‰ğŸ§æ¯”å¦‚æˆ‘ä»¬å°†å½“å‰æ­£åœ¨è¿è¡Œè¿›ç¨‹çš„bashå…³æ‰ï¼Œå…¶å‰å°è¿›ç¨‹ä¼šè¢«ç›´æ¥ç»ˆæ­¢ï¼Œåå°è¿›ç¨‹ä¹Ÿä¼šå—åˆ°å½±å“ï¼ˆæœ‰å¯èƒ½ç»ˆæ­¢æœ‰å¯èƒ½ä¸ç»ˆæ­¢ï¼Œå–å†³äºç³»ç»Ÿï¼‰\nè¿™å’Œæˆ‘ä»¬å¯¹tcpæœåŠ¡å™¨çš„éœ€æ±‚ä¸ä¸€è‡´ï¼šæˆ‘ä»¬éœ€è¦çš„æ˜¯è®©tcpæœåŠ¡å™¨çš„è¿›ç¨‹èƒ½ä¸€ç›´ç¨³å®šçš„åœ¨åå°è¿è¡Œï¼Œè®©æ“ä½œç³»ç»Ÿåˆ«å»ç®¡å®ƒï¼›é™¤éç³»ç»Ÿå†…å­˜æ»¡äº†ï¼Œè´Ÿè½½é‡åˆ°å®åœ¨æ²¡æœ‰åŠæ³•çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ‰èƒ½è¿‡æ¥æŠŠä»–åˆ€äº†ã€‚\nä¸ºäº†ä¸è®©å®ˆæŠ¤è¿›ç¨‹å—åˆ°è¿›ç¨‹ä¼šè¯çš„å½±å“ï¼Œæˆ‘ä»¬å°±å¿…é¡»è®©å…¶èƒ½å¤Ÿç‹¬ç«‹å‡ºæ¥ï¼Œè‡ªæˆä¸€ä¸ªè¿›ç¨‹ç»„å’Œä¸€ä¸ªæ–°ä¼šè¯\nğŸ‘†è¿™ç§ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå°±å¯ä»¥è¢«ç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹/ç²¾çµè¿›ç¨‹\n2.å®ç°2.1 è‡ªå·±å†™åˆ«ä»¥ä¸ºå†™è¿™ä¸ªå¾ˆéš¾å“¦ï¼Œå®é™…ç‰¹åˆ«ç®€å•ï¼\n2.1.1 setsidè¿™é‡Œéœ€è¦ç”¨åˆ°çš„setsidæ¥å£ï¼Œå…¶ä½œç”¨å¦‚åå­—ä¸€èˆ¬ï¼Œæ˜¯è®¾ç½®å½“å‰è¿›ç¨‹çš„è¿›ç¨‹ä¼šè¯ç»„\n#include &lt;unistd.h&gt;pid_t setsid(void);\n\nä½†æ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªè¦æ±‚ï¼šè°ƒç”¨çš„è¿›ç¨‹ä¸èƒ½æ˜¯è¿›ç¨‹ç»„çš„ç»„é•¿ï¼\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œç¬¬ä¸€ä¸ªtestå°±æ˜¯è¿›ç¨‹ç»„çš„ç»„é•¿ï¼Œå®ƒä¸èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ä¼šæŠ¥é”™\n\né‚£è¦æ€ä¹ˆè®©è‡ªå·±ä¸æˆä¸ºè¿›ç¨‹ç»„çš„ç»„é•¿å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹å°±okäº†ï¼\nif (fork() &gt; 0)    exit(0);//çˆ¶è¿›ç¨‹ç›´æ¥é€€å‡º\n\n2.1.2 é‡å®šå‘åˆ°dev&#x2F;null\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯/dev/nullï¼Œç®€è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªlinuxä¸‹çš„æ•°æ®åƒåœ¾æ¡¶ã€‚å’Œwindowsçš„å›æ”¶ç«™ä¼šå­˜æ”¾åˆ é™¤çš„èµ„æ–™ä¸åŒï¼Œè¿™ä¸ªåƒåœ¾æ¡¶æ˜¯ä¸ªé»‘æ´ï¼Œä¸¢è¿›å»çš„ä¸œè¥¿ä¸ä¼šè¢«å­˜æ”¾ï¼Œæ˜¯ç›´æ¥ä¸¢å¼ƒçš„ï¼\n\nå®ˆæŠ¤è¿›ç¨‹éœ€è¦æŠŠé»˜è®¤çš„0.1.2æ–‡ä»¶æè¿°ç¬¦éƒ½é‡å®šå‘åˆ°dev/nullï¼Œæ˜¯å› ä¸ºè®¾ç½®æˆç‹¬ç«‹çš„è¿›ç¨‹ç»„å’Œè¿›ç¨‹ä¼šè¯äº†ä¹‹åï¼Œå½“å‰è¿›ç¨‹æ˜¯æ²¡æœ‰å’Œbashå…³è”çš„ã€‚\næ­¤æ—¶ï¼Œé»˜è®¤è¿™ä¸ª0 1 2æ‰€æŒ‡å‘çš„bashæ˜¯æ— æ•ˆçš„ï¼å¦‚æœä¸é‡å®šå‘ï¼Œä½¿ç”¨coutæ‰“å°çš„æ—¶å€™ï¼Œå°±ä¼šå¼•å‘å¼‚å¸¸ï¼ˆå¯ä»¥ç†è§£ä¸ºå¾€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ä¸­å†™å†…å®¹ï¼‰ï¼ŒæœåŠ¡å™¨ç›´æ¥é€€å‡ºäº†ï¼Œæ— æ³•å®ç°å®ˆæŠ¤è¿›ç¨‹ã€‚\né‡å®šå‘äº†ä¹‹åï¼Œæ‰€æœ‰çš„æ‰“å°è¾“å‡ºéƒ½ä¼šè¢«ä¸¢åˆ°/dev/nullè¿™ä¸ªæ–‡ä»¶åƒåœ¾æ¡¶ä¸­ï¼Œä¹Ÿå°±ä¸éœ€è¦æ‹…å¿ƒä¸Šè¿°çš„é—®é¢˜ã€‚\nif ((fd = open(&quot;/dev/null&quot;, O_RDWR)) != -1) // fd == 3&#123;    dup2(fd, STDIN_FILENO);    dup2(fd, STDOUT_FILENO);    dup2(fd, STDERR_FILENO);    // 6. å…³é—­æ‰ä¸éœ€è¦çš„fd    // å› ä¸ºfdåªæ˜¯ä¸´æ—¶ç”¨äºé‡å®šå‘ï¼Œæ“ä½œå®Œæ¯•äº†å°±å¯ä»¥å…³æ‰äº†    if(fd &gt; STDERR_FILENO)         close(fd);&#125;\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œé‚£æ—¥å¿—ä¿¡æ¯ä¹Ÿè¢«ä¸¢åˆ°åƒåœ¾æ¡¶é‡Œé¢äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ\nå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬æœåŠ¡å™¨çš„æ—¥å¿—éƒ½ç»Ÿä¸€ä½¿ç”¨äº†log.hppé‡Œé¢çš„loggingå‡½æ•°ï¼Œæ‰€ä»¥åªéœ€è¦å¯¹loggingå‡½æ•°çš„è¾“å‡ºé‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶é‡Œé¢ï¼Œå°±okäº†ï¼\n2.1.3 chdirï¼ˆé€‰åšï¼‰è¿™ä¸ªæ“ä½œçš„ç›®çš„æ˜¯ä¿®æ”¹å·¥ä½œè·¯å¾„ã€‚ä½œä¸ºæœåŠ¡å™¨è¿›ç¨‹ï¼Œå¾ˆå¤šæ—¥å¿—ä¿¡æ¯æ˜¯å­˜æ”¾åœ¨/etc/ç›®å½•è€Œä¸æ˜¯å½“å‰è·¯å¾„ä¸‹çš„ï¼Œä¸ºäº†å®‰å…¨ï¼Œä¹Ÿåº”è¯¥ä½¿ç”¨ç»å¯¹è·¯å¾„è€Œä¸ç”¨ç›¸å¯¹è·¯å¾„ï¼Œé¿å…å‡ºç°å·¥ä½œç›®å½•åˆ‡æ¢è€Œå¯¼è‡´çš„æ— æ³•è¯»å†™æ–‡ä»¶çš„é—®é¢˜\nä¸è¿‡ï¼Œå¦‚æœä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå³ä¾¿æˆ‘ä»¬ä¸ä¿®æ”¹å·¥ä½œç›®å½•ï¼Œä¹Ÿæ˜¯èƒ½æ­£å¸¸è®¿é—®çš„ï¼›æ‰€ä»¥è¿™ä¸ªæ“ä½œæ˜¯é€‰åšçš„\n2.1.4 ä¿¡å·æ•æ‰è‡ªå·±å†™è¿™ä¸ªå‡½æ•°æœ‰ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢è‡ªå®šä¹‰æ•æ‰ä¸€äº›ä¿¡å·ï¼Œç»™è¿™äº›ä¿¡å· åŠ ä¸Šè‡ªå·±çš„è‡ªå®šä¹‰æ–¹æ³•ï¼›\næ¯”å¦‚SIGPIPEå°±æ˜¯ç®¡é“çš„ä¿¡å·ï¼Œå½“ç®¡é“çš„è¯»ç«¯å…³é—­çš„æ—¶å€™ï¼Œå†™ç«¯ä¼šè¢«ç»ˆæ­¢ï¼›æ­¤æ—¶å†™ç«¯å°±ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·ã€‚å¦‚æœä¸å¯¹è¿™ä¸ªä¿¡å·è¿›è¡ŒSIG_IGNå¿½ç•¥ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¼šç›´æ¥ç»ˆæ­¢ï¼\nsignal(SIGPIPE, SIG_IGN);\n\né™¤äº†è¿™ä¸ªä¿¡å·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹2å·æˆ–è€…3å·ä¿¡å·è¿›è¡Œè‡ªå®šä¹‰æ•æ‰ï¼Œè®¾å®šé€€å‡ºä¿¡å·ï¼Œè®©æœåŠ¡å™¨èƒ½å¤Ÿå®‰å…¨é€€å‡ºï¼ˆä¿å­˜æ—¥å¿—ä¿¡æ¯åˆ°ç£ç›˜ï¼Œé‡Šæ”¾èµ„æºç­‰ï¼›è™½ç„¶è¿›ç¨‹é€€å‡ºä¹‹åæ“ä½œç³»ç»Ÿä¼šå¸®æˆ‘ä»¬å¹²è¿™äº›äº‹ï¼Œä½†æˆ‘ä»¬è¿™ä¹ˆå†™èƒ½è®©é¡¹ç›®æ›´è§„èŒƒï¼‰\n2.1.5 å®Œæ•´ä»£ç #pragma once#include &lt;iostream&gt;#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt; #include &lt;fcntl.h&gt; // O_RDWR éœ€è¦void daemonize()&#123;    int fd = 0;    // 1. å¿½ç•¥SIGPIPE (ç®¡é“è¯»å†™ï¼Œè¯»ç«¯å…³é—­ï¼Œå†™ç«¯ä¼šæ”¶åˆ°ä¿¡å·ç»ˆæ­¢)    signal(SIGPIPE, SIG_IGN);    // 2. æ›´æ”¹è¿›ç¨‹çš„å·¥ä½œç›®å½•    // chdir(); // å¯ä»¥æ”¹ï¼Œå¯ä»¥ä¸æ”¹    // 3. è®©è‡ªå·±ä¸è¦æˆä¸ºè¿›ç¨‹ç»„ç»„é•¿    if (fork() &gt; 0)        exit(0);    // 4. è®¾ç½®è‡ªå·±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯    setsid();    // 5. é‡å®šå‘0,1,2    if ((fd = open(&quot;/dev/null&quot;, O_RDWR)) != -1) // fd == 3    &#123;        dup2(fd, STDIN_FILENO);        dup2(fd, STDOUT_FILENO);        dup2(fd, STDERR_FILENO);        // 6. å…³é—­æ‰ä¸éœ€è¦çš„fd        // å› ä¸ºfdåªæ˜¯ä¸´æ—¶ç”¨äºé‡å®šå‘ï¼Œæ“ä½œå®Œæ¯•äº†å°±å¯ä»¥å…³æ‰äº†        if(fd &gt; STDERR_FILENO)             close(fd);    &#125;    // è¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ç§æ“ä½œï¼Œå°±æ˜¯æŠŠstdin/stdout/stderrç»™closeäº†    // ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´åªè¦æœ‰æ‰“å°è¾“å‡ºçš„ä»£ç ï¼Œè¿›ç¨‹ä¼šå°±å¼‚å¸¸é€€å‡º&#125;\n\næ²¡é”™ï¼Œå°±è¿™ä¸€ç‚¹ç‚¹ä»£ç ï¼Œå°±èƒ½è®©æˆ‘ä»¬çš„tcpæœåŠ¡å™¨å˜æˆå®ˆæŠ¤è¿›ç¨‹ï¼\n\næ­¤æ—¶æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¾æ—§èƒ½æ­£å¸¸è¿æ¥æœåŠ¡ç«¯ï¼Œè·å–ç»“æœ\n\n2.2 nohupno hang upï¼ˆä¸æŒ‚èµ·ï¼‰ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œã€‚ç”¨nohupå‘½ä»¤æ‰§è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå°±èƒ½è®©è¿™ä¸ªè¿›ç¨‹æˆä¸ºä¸å—ç»ˆç«¯é€€å‡ºå½±å“çš„è¿›ç¨‹\nnohup ./test &amp;\n\næ­¤æ—¶ï¼Œnohupä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªnohup.outæ–‡ä»¶ï¼Œç”¨äºè®°å½•testè¿›ç¨‹çš„è¾“å‡ºä¿¡æ¯ï¼ˆå¦‚æœé€šè¿‡äº†&gt;æˆ–&gt;&gt;æ‰§è¡Œäº†é‡å®šå‘ï¼Œåˆ™ä¸ä¼šåˆ›å»ºï¼‰\n\né€šè¿‡pså¯å·²çœ‹åˆ°ï¼Œå½“å‰testè¿›ç¨‹çš„è¿›ç¨‹ä¼šè¯è¿˜æ˜¯å’Œbashç›¸åŒï¼Œä½†æˆ‘ä»¬å…³é—­å½“å‰bashï¼Œè¿™ä¸ªtestè¿›ç¨‹ä¾æ—§èƒ½æ­£å¸¸è¿è¡Œï¼Œåªä¸è¿‡çˆ¶è¿›ç¨‹ä¼šå˜æˆæ“ä½œç³»ç»Ÿ1ï¼Œæˆ‘ä»¬çš„ç›®çš„ä¹Ÿç®—æ˜¯è¾¾åˆ°äº†\n\n2.3 deamonæ¥å£linuxç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ¥å£daemonï¼Œå¯ä»¥å¸®æˆ‘ä»¬å®ç°å®ˆæŠ¤è¿›ç¨‹\n#include &lt;unistd.h&gt;int daemon(int nochdir, int noclose);\n\näº†è§£è¿‡å®ˆæŠ¤è¿›ç¨‹çš„å†™æ³•äº†ä¹‹åï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„ä½œç”¨å°±å¾ˆæ˜æ˜¾äº†\n\nç¬¬ä¸€ä¸ªå‚æ•°nochdirè¡¨æ˜æ˜¯å¦éœ€è¦ä¿®æ”¹å·¥ä½œç›®å½•ï¼›å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™åˆ‡æ¢å·¥ä½œç›®å½•åˆ°/ç³»ç»Ÿæ ¹ç›®å½•\nç¬¬äºŒä¸ªå‚æ•°nocloseè¡¨æ˜æ˜¯å¦éœ€è¦é‡å®šå‘åŸºç¡€ioåˆ°/dev/nullï¼›è®¾ç½®ä¸º0åˆ™é‡å®šå‘\n\nä»¥ä¸‹æ˜¯manæ‰‹å†Œä¸­çš„è¯´æ˜\nIf nochdir is zero, daemon() changes the calling process&#x27;s current working directory to the root directory (&quot;/&quot;); otherwise, the  curâ€rent working directory is left unchanged.If noclose is zero, daemon() redirects standard input, standard output and standard error to /dev/null; otherwise, no changes are madeto these file descriptors.\n\næˆ‘ä»¬ç›´æ¥ç”¨ä¸€ä¸ªç®€å•ä»£ç æ¥æ¼”ç¤º\n#include &lt;unistd.h&gt;int main()&#123;    //ä¸éœ€è¦ä¿®æ”¹å·¥ä½œç›®å½•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸º1    //å› ä¸ºæ²¡æœ‰è¿›è¡Œæ‰“å°ï¼Œé‡å®šå‘è®¾ç½®æˆ1ï¼Œä¸è¿›è¡Œé‡å®šå‘    int ret = daemon(1,1);    sleep(100);    return 0;&#125;\n\nè¿è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¿›ç¨‹çš„çˆ¶idæ˜¯æ“ä½œç³»ç»Ÿï¼Œå…¶è‡ªæˆä¸€ä¸ªè¿›ç¨‹ç»„å’Œè¿›ç¨‹ä¼šè¯ï¼›å’Œæˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°ä½œç”¨ç›¸åŒ\n\n3.é‡å®šå‘logå› ä¸ºå®ˆæŠ¤è¿›ç¨‹æŠŠè¾“å…¥è¾“å‡ºä¸¢åˆ°äº†åƒåœ¾æ…é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦é‡å®šå‘æ—¥å¿—çš„è¾“å‡º\n#define LOG_PATH &quot;./log.txt&quot; //å·¥ä½œè·¯å¾„ä¸‹çš„log.txt// è¿™ä¸ªç±»åªç”¨äºé‡å®šå‘ï¼Œä¸éœ€è¦åœ¨é‡Œé¢åŠ å…¶ä»–ä¸œè¥¿class Logdup&#123;public:    Logdup()        :_fdout(-1),_fderr(-1)    &#123;&#125;    Logdup(const char* pout=LOG_PATH,const char* perr=&quot;&quot;)        :_fdout(-1),_fderr(-1)    &#123;        //å¦‚æœåªä¼ å…¥äº†ç¬¬ä¸€ä¸ªpoutï¼Œåˆ™ä»£è¡¨å°†perrå’Œpouté‡å®šå‘ä¸ºä¸€ä¸ªè·¯å¾„        umask(0);        int logfd = open(pout, O_WRONLY | O_CREAT | O_APPEND, 0666);        assert(logfd != -1);        _fdout = _fderr = logfd;//èµ‹å€¼å¯ä»¥è¿ç­‰        //åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºä¸²        if(strcmp(perr,&quot;&quot;)!=0)//ä¸ç›¸åŒï¼Œä»£è¡¨å•ç‹¬è®¾ç½®äº†errçš„è·¯å¾„        &#123;            logfd = open(perr, O_WRONLY | O_CREAT | O_APPEND, 0666);            assert(logfd != -1);            _fderr = logfd;        &#125;        dup2(_fdout, 1);//é‡å®šå‘stdout        dup2(_fderr, 2);//é‡å®šå‘stderr    &#125;    ~Logdup()    &#123;        if(_fdout!= -1)        &#123;            fsync(_fdout);            fsync(_fderr);            // å…ˆå†™ç›˜å†å…³é—­            close(_fdout);            close(_fderr);        &#125;    &#125;private:    int _fdout;//é‡å®šå‘çš„æ—¥å¿—æ–‡ä»¶æè¿°ç¬¦    int _fderr;//é‡å®šå‘çš„é”™è¯¯æ–‡ä»¶æè¿°ç¬¦&#125;;c\n\nåšå®Œè¿™ä¸€åˆ‡ä¹‹åï¼Œæˆ‘ä»¬è¿è¡ŒæœåŠ¡å™¨ï¼Œçš„ç¡®åˆ›å»ºäº†log.txtæ–‡ä»¶ï¼Œå¯é‡Œé¢ç©ºç©ºå¦‚ä¹Ÿ\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ•°æ®å…¶å®éƒ½è¢«å†™é“äº†ç¼“å†²åŒºé‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨loggingé‡Œé¢æ·»åŠ ä¸€ä¸ªåˆ·æ–°æœºåˆ¶ï¼Œæ‰èƒ½è®©æ•°æ®å°½å¿«å†™å…¥åˆ°ç¡¬ç›˜ä¸­ï¼Œé¿å…æ—¥å¿—ä¸¢å¤±\nfflush(out); // å°†Cç¼“å†²åŒºä¸­çš„æ•°æ®åˆ·æ–°åˆ°OSfsync(fileno(out));// å°†OSä¸­çš„æ•°æ®å†™å…¥ç¡¬ç›˜\n\næ­¤æ—¶å†è¿è¡ŒæœåŠ¡å™¨ï¼Œå°±èƒ½çœ‹åˆ°æ—¥å¿—å¾ˆå¿«è¢«å†™å…¥æ–‡ä»¶é‡Œé¢äº†ã€‚\n\noveræå®šå•¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€ç½‘ç»œã€‘è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | Jsoncpp","url":"/posts/4060787526/","content":"ä»¥tcpServerçš„è®¡ç®—å™¨æœåŠ¡ä¸ºä¾‹ï¼Œå®ç°ç”¨jsoncppæ¥è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–\n\n\n\né˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œè¯·å…ˆé˜…è¯» è‡ªå®šä¹‰åè®® | åºåˆ—åŒ–å’Œååºåˆ—åŒ– | ä»¥tcpServerä¸ºä¾‹\n\n1.å®‰è£…jsoncppæˆ‘æ‰€ç”¨çš„ç³»ç»Ÿæ˜¯centos7.6ï¼Œå…ˆç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥æ‰¾ç›¸å…³çš„åŒ…\nsudo yum list | grep jsoncpp-devel\n\næ˜¾ç¤ºå‡ºæ¥çš„åŒ…å¦‚ä¸‹\nRepository epel is listed more than once in the configurationjsoncpp-devel.x86_64                0.10.5-2.el7           @epel \n\néšåå®‰è£…è¿™ä¸ªåŒ…\nsudo yum install jsoncpp\n\nä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå®‰è£…jsoncpp-devel.x86_64æ˜¾ç¤ºæ‰¾ä¸åˆ°ç›¸å…³åŒ…\næˆ–è€…é‡‡ç”¨ä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤\nsudo yum install epel-releasesudo yum install jsoncpp-devel\n\nå¦‚æœæ‰§è¡Œå®Œæ¯•åæ˜¾ç¤ºæ‰¾ä¸åˆ°jsoncppï¼Œå°è¯•é‡æ–°å®‰è£…epel-release\n\nåˆšå¼€å§‹æˆ‘æ˜¾ç¤ºepelå·²ç»å®‰è£…ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°jsoncppè¿™ä¸ªåŒ…ï¼Œæˆ‘åœ¨é‡æ–°å®‰è£…äº†epelåå°±èƒ½æ­£å¸¸å®‰è£…äº†\nsudo yum rm epel-releasesudo yum install epel-releasesudo yum install jsoncpp-devel\n\nå¦‚ä¸‹å›¾ï¼Œæ­£å¸¸æŸ¥æ‰¾åˆ°å¹¶å®‰è£…å®Œæ¯•\n\nåœ¨centos8ä¸‹ï¼Œå®‰è£…å®Œæ¯•åè·¯å¾„å¦‚ä¸‹\n$ ls /usr/include/jsonallocator.h  assertions.h  autolink.h  config.h  features.h  forwards.h  json.h  reader.h  value.h  version.h  writer.h\n\n1.1 ä»€ä¹ˆæ˜¯jsonï¼Ÿjsonæ˜¯ä¸€ä¸ªkvé”®å€¼å¯¹çš„åºåˆ—åŒ–æ–¹å¼ï¼Œæ¯ä¸€ä¸ªkeyéƒ½å¯¹åº”äº†ä¸€ä¸ªvalue\n&#123;\t&quot;data&quot;: &quot;value&quot;&#125;\n\nè¿™å°±æœ‰ç‚¹ç±»ä¼¼c++ä¸­çš„mapï¼Œä¸è¿‡jsonèƒ½åšçš„æ›´å¤š\n&#123;\t&quot;data1&quot;: &quot;value&quot;,\t&quot;data2&quot;: &#123;\t\t&quot;key1&quot;:&quot;value1&quot;,\t\t&quot;key2&quot;:&quot;value2&quot;,         &quot;key3&quot;:0,         &quot;key4&quot;:true\t&#125;&#125;\n\njsonå¯ä»¥åœ¨é‡Œé¢åµŒå¥—æ·»åŠ æ›´å¤šçš„å†…å®¹ï¼Œä¸ç®¡æ˜¯å­—ç¬¦ä¸²è¿˜æ˜¯æ•´å½¢ï¼Œè¿˜èƒ½æ˜¯boolç±»å‹çš„true/falseï¼›\nå› ä¸ºjsonå¯¹ååºåˆ—åŒ–åºåˆ—åŒ–çš„æ§åˆ¶å¾ˆæ˜¯ä¸é”™ï¼Œå¯è¯»æ€§ä¹Ÿå¾ˆå¥½ï¼Œæ‰€ä»¥è¢«å¹¿æ³›ä½¿ç”¨ï¼\nç›¸æ¯”äºè‡ªå·±å†™ä¸€ä¸ªåºåˆ—åŒ–æ–¹å¼ï¼Œç›´æ¥ç”¨åˆ«äººçš„è½®å­ï¼Œä¹Ÿä¸é”™ğŸ‘»\nç±»ä¼¼çš„åºåˆ—åŒ–æ¡†æ¶è¿˜æœ‰xml\n2.ä»£ç ç¤ºä¾‹2.1 åºåˆ—åŒ–ç›¸æ¯”æˆ‘ä»¬è‡ªå·±å†™çš„åºåˆ—åŒ–æ–¹å¼ï¼Œjsonçš„ä½¿ç”¨ç®€å•å¤šäº†\nvoid serialize(std::string&amp; out)&#123;     //ä½¿ç”¨jsoncppçš„ä»£ç     Json::Value root;    root[&quot;x&quot;] = _x;    root[&quot;y&quot;] = _y;    root[&quot;op&quot;] = _ops;    Json::FastWriter fw; // è¿™ä¸ªæ˜¯å†™æˆä¸€è¡Œï¼Œå¯¹äºè®¡ç®—æœºæ¥è¯´å¤„ç†çš„è´Ÿæ‹…å°    // Json::StyledWriter fw; // è¿™ä¸ªä¼šè¿›è¡Œæ ¼å¼åŒ–ï¼Œæ›´å¥½çœ‹ï¼ˆä½†æ˜¯å†…å®¹æ²¡å·®è·ï¼‰    out = fw.write(root);&#125;\n\nå¯¹äºfw.write(root)ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªstringï¼Œä¹Ÿæ–¹ä¾¿æˆ‘ä»¬æ¥æ”¶\n\nå…¶ä¸­FastWriterå’ŒStyledWriteræœ‰ä¸€ç‚¹åŒºåˆ«ï¼Œå¦‚ä¸‹\n//FastWriter&#123;&quot;data&quot;: &quot;value&quot;&#125;//StyledWriter&#123;\t&quot;data&quot;: &quot;value&quot;&#125;\n\nç®€å•æ¥è¯´ï¼ŒStyledWriterä¼šå¯¹æˆ‘ä»¬çš„kvé”®å€¼å¯¹è¿›è¡Œæ ¼å¼åŒ–ï¼Œæ›´æ–¹ä¾¿äººç±»çš„é˜…è¯»ã€‚è€ŒFastWriteræ˜¯ç›´æ¥å†™æˆä¸€æ•´è¡Œï¼Œåœ¨ä¼ è¾“çš„æ—¶å€™ä¼šæ–¹ä¾¿ä¸€ç‚¹ï¼ˆå› ä¸ºä¸éœ€è¦\\nï¼‰\n2.2 ååºåˆ—åŒ–ååºåˆ—åŒ–éœ€è¦ä¸€ä¸ªReaderæ¥è¯»å–å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶å†…å®¹æ ¹æ®é”®å€¼éšå°„ç»™æˆå‘˜å˜é‡\nbool deserialize(const std::string &amp;in)&#123;    //json    Json::Value root;    Json::Reader rd;    rd.parse(in, root);    _x = root[&quot;x&quot;].asInt();    _y = root[&quot;y&quot;].asInt();    _ops = root[&quot;op&quot;].asInt();&#125;\n\n3.æµ‹è¯•å› ä¸ºjsoncppæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæˆ‘ä»¬é“¾æ¥çš„æ—¶å€™éœ€è¦åŠ ä¸Šå‘½ä»¤-ljsoncpp\ntcpServer:tcpServer.cpp\tg++ -o $@ $^ -std=c++11 -lpthread -ljsoncpp\n\nå‘é€æ¶ˆæ¯åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œjsonå¸®æˆ‘ä»¬æ ¼å¼åŒ–ä¸ºå¦‚ä¸‹å½¢å¼çš„å­—ç¬¦ä¸²\n&#123;&quot;op&quot;:43,&quot;x&quot;:1,&quot;y&quot;:200&#125;&#123;&quot;op&quot;:43,&quot;x&quot;:333,&quot;y&quot;:234&#125;\n\n\n4.gccç»™äºˆå®å®šä¹‰ä¸ºäº†æ–¹ä¾¿å¯¹åºåˆ—åŒ–é‡‡ç”¨çš„æ–¹å¼è¿›è¡Œæ§åˆ¶ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†é¢„å¤„ç†æŒ‡ä»¤ifdef/endifæ¥è¿›è¡Œåˆ¤æ–­ï¼Œåªè¦æˆ‘ä»¬åœ¨æ–‡ä»¶å¤´å®šä¹‰äº†MYPROTOCOLï¼Œè¿™é‡Œå°±ä¼šé‡‡ç”¨æˆ‘ä»¬è‡ªå·±çš„å†™çš„åºåˆ—åŒ–æ–¹å¼ï¼Œå¦åˆ™é‡‡ç”¨json\n#define MYPROTOCOL 1  //å¦‚æœdefineäº†è¿™ä¸ªï¼Œé‚£å°±ä½¿ç”¨è‡ªå·±çš„ä»£ç \n\n\n4.1 å‘½ä»¤è¡Œä½†æ˜¯åœ¨æ–‡ä»¶é‡Œé¢ä¿®æ”¹defineè¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é‡‡ç”¨gccçš„å‘½ä»¤è¡Œå‚æ•°çš„æ–¹å¼ï¼Œè¿›è¡Œdefineçš„æ’å…¥ï¼ˆè¿™ä¹ˆåšä¹‹å‰ï¼Œè¦å…ˆåˆ é™¤æ–‡ä»¶ä¸­å¯¹MYPROTOCOLçš„defineï¼‰\ng++ -DMYPROTOCOL tcpServer.cpp -o tcpServer -lpthread -ljsoncppg++ -DMYPROTOCOL tcpClient.cpp -o tcpClient -lpthread -ljsoncpp\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸åŠ ç¼–è¯‘æŒ‡ä»¤ç¼–è¯‘å‡ºæ¥çš„æœåŠ¡å™¨ï¼Œé‡‡ç”¨çš„æ˜¯jsonçš„æ–¹å¼æ¥åºåˆ—åŒ–\n\næ·»åŠ äº†ä¹‹åï¼Œå°±æ˜¯ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„åºåˆ—åŒ–æ–¹å¼æ¥åºåˆ—åŒ–äº†\n\n4.2 makefileå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹makefileæ¥å®ç°è¿™ä¸€ç‚¹\n.PHONY:allall:tcpClient tcpServerMYSELF=-DMYPROTOCOLtcpClient: tcpClient.cpp\tg++ $(MYSELF) -o $@ $^ -std=c++11 -lpthread -ljsoncpptcpServer:tcpServer.cpp\tg++ $(MYSELF) -o $@ $^ -std=c++11 -lpthread -ljsoncpp.PHONY:cleanclean:\trm -f tcpClient tcpServer\n\nå½“æˆ‘ä»¬éœ€è¦ç”¨è‡ªå·±åè®®çš„æ—¶å€™ï¼Œå°±åœ¨æœ€å‰é¢åŠ ä¸Š\nMYSELF=-DMYPROTOCOL\n\nå¦åˆ™ç›´æ¥åˆ é™¤è¿™ä¸ªå®šä¹‰ï¼Œæˆ–è€…æ³¨é‡Šæ‰åé¢çš„å†…å®¹ï¼Œå°±èƒ½é‡‡ç”¨jsoncpp\nMYSELF=#-DMYPROTOCOL\n\nè¿™æ ·å°±æ–¹ä¾¿ä¸€äº›äº†\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è®¡ç®—æœºç½‘ç»œ"]},{"title":"ã€ç½‘ç»œã€‘http(s)åè®® | ä»‹ç»","url":"/posts/2885791654/","content":"å·²ç»å­¦ä¹ è¿‡è‡ªå·±å®šåˆ¶ä¸€ä¸ªåè®®äº†ï¼Œç°åœ¨å°±æ¥çœ‹çœ‹å½“ä¸‹å¹¿æ³›ä½¿ç”¨çš„httpåè®®å§\n\n\n1.ä»‹ç»\nè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyper Text Transfer Protocolï¼ŒHTTPï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚-å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨TCPä¹‹ä¸Šã€‚å®ƒæŒ‡å®šäº†å®¢æˆ·ç«¯å¯èƒ½å‘é€ç»™æœåŠ¡å™¨ä»€ä¹ˆæ ·çš„æ¶ˆæ¯ä»¥åŠå¾—åˆ°ä»€ä¹ˆæ ·çš„å“åº”ã€‚\n\nhttpå’Œhttpsæ˜¯å½“ä¸‹æœ€é€šç”¨çš„åè®®ä¹‹ä¸€ï¼Œæˆ‘ä»¬è®¿é—®çš„å¤§éƒ¨åˆ†ç½‘é¡µç”¨çš„éƒ½æ˜¯è¿™ä¸ªåè®®ï¼›\nhttps://www.bilibili.com/\n\nè¿™ä¸¤ä¸ªåè®®ä¸»è¦çš„å·®åˆ«ï¼Œé‚£å°±æ˜¯httpæ˜¯ç”¨æ˜æ–‡ä¼ è¾“æ•°æ®çš„ï¼Œæˆ‘ä»¬çš„æ•°æ®åœ¨äº’è”ç½‘è£¸å¥”ï¼Œå¯èƒ½æœ‰å®‰å…¨é—®é¢˜ï¼›ç›¸æ¯”ä¹‹ä¸‹ï¼Œhttpsä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¼šå¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œä½†è¿™ä¹Ÿä¸ä»£è¡¨httpsæ˜¯å®Œå…¨å®‰å…¨çš„ã€‚\n1.1 urlè¦è®¤è¯†è¿™ä¸¤ä¸ªåè®®ï¼Œæˆ‘ä»¬è¦ä»urlçš„è®¤è¯†å¼€å§‹ï¼›\nHTTP(S) ä¸å…è®¸ä½¿ç”¨ç”¨æˆ·åæˆ–å¯†ç ï¼Œä¸€ä¸ªåˆæ³•çš„ HTTP(S) URL æ ¼å¼å¦‚ä¸‹ï¼š\nhttp(s)://&lt;host&gt;:&lt;port&gt;/&lt;path&gt;?&lt;query&gt;#&lt;frag&gt;\n\n\nå¼€å¤´ä¸ºåè®®åï¼šhttp æˆ– https åè®®ï¼› \n&lt;host&gt;ï¼šä¸»æœºåã€‚ä¸€ä¸ª URL ä¸­ï¼Œæ—¢å¯ä»¥ä½¿ç”¨åŸŸåä¹Ÿå¯ä»¥ä½¿ç”¨ IP è¡¨ç¤ºä¸»æœºåœ°å€\n&lt;port&gt;ï¼šç«¯å£ã€‚ä¸»æœºåå’Œç«¯å£ä¹‹é—´ä½¿ç”¨å†’å·åˆ†éš”ã€‚ç«¯å£æ˜¯å¯é€‰çš„ï¼Œå¦‚æœçœç•¥å°†é‡‡ç”¨é»˜è®¤ç«¯å£ï¼Œhttp é»˜è®¤ç«¯å£æ˜¯ 80ï¼Œhttps é»˜è®¤ç«¯å£ 443ï¼›\n&lt;path&gt;ï¼šèµ„æºè·¯å¾„ã€‚èµ„æºåœ¨ç½‘ç»œä¸»æœºä¸Šçš„è·¯å¾„ï¼Œè·¯å¾„ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œç¼ºçœè®¿é—®é»˜è®¤èµ„æºï¼› \n&lt;query&gt;ï¼šæŸ¥è¯¢å‚æ•°ã€‚æ ¼å¼ä¸º key&#x3D;valueï¼Œå¤šä¸ªå‚æ•°ä½¿ç”¨ &amp; åˆ†éš”ï¼›å‚æ•°ä¹Ÿæ˜¯å¯é€‰çš„ï¼› \n&lt;frag&gt;ï¼šç‰‡æ®µã€‚ä» # å¼€å§‹åˆ°æœ€åï¼Œä¸€èˆ¬ç”¨äºå®šä½åˆ°èµ„æºå†…çš„ä¸€ä¸ªç‰‡æ®µï¼Œæ¯”å¦‚æ–‡æ¡£çš„ä¸€ä¸ªç« èŠ‚ï¼›ç‰‡æ®µä¹Ÿæ˜¯å¯é€‰çš„ã€‚\n\n1.1.1 æ —å­ â‘ æ¥ä¸‹æ¥ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/#4-make-x2F-makefile\n\nå¦‚ä¸Šæ˜¯æˆ‘çš„ä¸ªäººåšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« \n\nåè®®æ˜¯https\nåŸŸåæ˜¯blog.musnow.topï¼Œå¯¹åº”çš„å°±æ˜¯&lt;host&gt;:&lt;port&gt;ï¼›è¿™é‡Œéšè—äº†ç«¯å£ï¼Œä¼šåœ¨ä¸‹é¢è¯´æ˜ã€‚\n/2022/08/07/note_linux/6gdb_g++_make_vim/è¿™ä¸€é•¿ä¸²éƒ½æ˜¯æ–‡ä»¶çš„è·¯å¾„ï¼Œå…¶æ ‡ç¤ºäº†æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šå­˜æ”¾çš„ä½ç½®\nè¿™ä¸ªurlå†…æ²¡æœ‰å¸¦&lt;query&gt;å‚æ•°\n#4-make-x2F-makefileå¯¹åº”çš„æ˜¯&lt;frag&gt;ç‰‡æ®µï¼Œæ ‡è¯†äº†æˆ‘å½“å‰æµè§ˆçš„ä½ç½®\n\nå½“ä½ æŠŠè¿™ä¸ªurlç²˜è´´é“æµè§ˆå™¨ï¼Œå…¶ä¼šç›´æ¥è·³è½¬åˆ°å¯¹åº”çš„æ ‡é¢˜ä½ç½®ï¼Œè€Œä¸æ˜¯è¿™ç¯‡æ–‡ç« çš„é¡µé¦–ï¼›è¿™å°±æ˜¯&lt;frag&gt;ç‰‡æ®µçš„ä½œç”¨\n\n1.1.2 æ —å­ â‘¡https://www.baidu.com/s?tn=68018901_39_oem_dg&amp;ie=utf-8&amp;word=test\n\nå½“æˆ‘ä»¬åœ¨ç™¾åº¦æœç´¢å•è¯testçš„æ—¶å€™ï¼Œç™¾åº¦çš„urlä¸­å°±ä¼šå‡ºç°&lt;query&gt;å‚æ•°ï¼›\nå…¶ä¸­?æ˜¯å‚æ•°çš„å¼€å¤´ï¼Œåç»­çš„ä¸€ä¸²ä»¥&amp;åˆ†éš”çš„kvé”®å€¼å¯¹ï¼Œå°±æ˜¯å‚æ•°çš„å†…å®¹ã€‚åœ¨è¿™é‡Œé¢æˆ‘ä»¬èƒ½çœ‹åˆ°word=testï¼Œæˆ‘ä»¬æŸ¥è¯¢çš„å•è¯testå°±åœ¨è¿™ä¸ªå‚æ•°åï¼›\næˆ‘ä»¬çš„æœç´¢è®¿é—®ï¼Œå°±æ˜¯å°†è¿™äº›å‚æ•°ä¼ é€ç»™æœåŠ¡å™¨ï¼Œå†ç”±ç™¾åº¦çš„æœåŠ¡å™¨è¿”å›æœç´ ç»“æœçš„ã€‚\n1.2 åŸŸåå’Œç«¯å£éšè—ä½†æˆ‘ä»¬æ—¥å¸¸è®¿é—®çš„ç½‘é¡µä¸­ï¼Œå¾ˆå°‘è§åˆ°è¿‡ip:ç«¯å£çš„å½¢å¼ï¼Œè€Œå¤§å¤šæ˜¯ç”¨åŸŸåä¸ºæˆ‘ä»¬æä¾›æœåŠ¡çš„\nhttps://www.bilibili.com/\n\nè¿™å¹¶ä¸ä»£è¡¨å…¶èƒŒåä¸éœ€è¦ç«¯å£å·ã€‚è€Œæ˜¯å› ä¸ºå¦‚æœæˆ‘ä»¬çš„è®¿é—®ä¸æŒ‡å®šç«¯å£çš„æ—¶å€™ï¼Œhttp(s)åè®®ä¼šé‡‡ç”¨é»˜è®¤ç«¯å£å·80æˆ–443ï¼Œä»è€Œå®ç°éšè—ç«¯å£å·æä¾›æœåŠ¡\n\nhttp é»˜è®¤ç«¯å£æ˜¯ 80ï¼Œhttps é»˜è®¤ç«¯å£ 443\n\næ¯•ç«Ÿå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œè®°ä½ä¸€ä¸ªåŸŸåå·²ç»ä¸å®¹æ˜“äº†ï¼Œè¿˜è¦è®°ä½ä½ çš„æœåŠ¡æ˜¯åœ¨å“ªä¸€ä¸ªç«¯å£ï¼Œé‚£å°±æ›´éš¾äº†ï¼›\nè€ŒåŸŸåä¹Ÿä¸æ˜¯å‡­ç©ºç»™æˆ‘ä»¬æä¾›æœåŠ¡çš„ï¼Œæ¯ä¸€ä¸ªåŸŸåéƒ½éœ€è¦ç»‘å®šä¸€ä¸ªå…·ä½“çš„å…¬ç½‘ipï¼ˆåŸŸåè§£æï¼‰ï¼Œæ‰èƒ½ä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚åœ¨åŸŸåçš„èƒŒåï¼Œéƒ½æ˜¯ä¸€ä¸ªipï¼Œæ¯ä¸€ä¸ªipä¹Ÿå°±æ˜¯ä¸€å°æœåŠ¡å™¨ã€‚\nåŸŸåçš„ä½œç”¨ï¼Œå°±æ˜¯æ¥éšè—æ‰ipè¿™ä¸ªæ— è§„å¾‹çš„é•¿æ•°å­—ï¼Œæ–¹ä¾¿ç”¨æˆ·è®¿é—®ï¼›\n\nä½ è§‰å¾—æ˜¯è®°ä½baidu.comå®¹æ˜“ï¼Œè¿˜æ˜¯è®°ä½114.514.77.58å®¹æ˜“å‘¢ï¼Ÿ\n\nåœ¨å‘½ä»¤è¡Œä½¿ç”¨pingå·¥å…·ï¼Œæˆ‘ä»¬èƒ½çŸ¥é“ä¸€ä¸ªç½‘ç«™æœåŠ¡å™¨çš„ipæ˜¯ä»€ä¹ˆ\nping www.bilibili.com\n\næ¯”å¦‚æˆ‘ä»¬pingä¸€ä¸‹bç«™çš„åŸŸåï¼Œå¯ä»¥çœ‹åˆ°å…¶å…¬ç½‘ipæ˜¯183.131.147.29\næ­£åœ¨ Ping a.w.bilicdn1.com [183.131.147.29] å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=10ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55æ¥è‡ª 183.131.147.29 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=12ms TTL=55183.131.147.29 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 4ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œå¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):    æœ€çŸ­ = 10msï¼Œæœ€é•¿ = 12msï¼Œå¹³å‡ = 11ms\n\n1.3 ip:ç«¯å£æˆ‘ä»¬å¯ä»¥ç”¨ip:ç«¯å£æ¥è®¿é—®è‡ªå·±çš„æœåŠ¡ï¼ˆä»¥ä¸‹ipçº¯å±è™šæ„ï¼Œå¦‚æœ‰æ’è½¦ï¼Œçº¯å±å·§åˆï¼‰\n114.514.77.58:8080\n\nå½“æˆ‘ä»¬æŠŠè¿™ä¸ªç²˜è´´é“æµè§ˆå™¨ï¼Œå†å¤åˆ¶ç²˜è´´å‡ºæ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°å‰é¢å¤šäº†ä¸€ä¸ªhttp\nhttp://114.514.77.58:8080\n\nè¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨ipè®¿é—®ä¸€ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤é‡‡ç”¨httpçš„åè®®å»è®¿é—®ï¼Œæ‰€ä»¥åœ¨å‰é¢åŠ äº†ä¸€ä¸ªæˆ‘ä»¬çœ‹ä¸åˆ°çš„http://\n1.4 åè®®ä½œç”¨httpåè®®çš„ä½œç”¨ï¼Œå°±æ˜¯å‘æœåŠ¡å™¨ç”³è¯·ç‰¹å®šçš„èµ„æºï¼Œå†å°†èµ„æºæ‹‰å–åˆ°æœ¬åœ°è¿›è¡Œå±•ç¤ºorä½¿ç”¨ã€‚\nèµ„æºéƒ½æ˜¯å­˜åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šçš„ï¼Œå½“ç”¨æˆ·è¯·æ±‚çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å¿…é¡»è¦çŸ¥é“èµ„æºçš„è·¯å¾„ï¼Œå°†å…¶readæ‰“å¼€è¯»å–ï¼Œå†writeå†™ç»™æˆ‘ä»¬çš„å®¢æˆ·ç«¯ã€‚\n/2022/08/07/note_linux/6gdb_g++_make_vim/\n\næ‰€ä»¥httpçš„è¯·æ±‚ä¸­æ‰ä¼šå¸¦ä¸Šèµ„æºçš„è·¯å¾„ï¼Œè¿™æ˜¯æ–¹ä¾¿æœåŠ¡å™¨è¿›è¡Œèµ„æºæ–‡ä»¶çš„è¯»å–ï¼›åŒæ—¶ï¼Œæ–‡ä»¶çš„è·¯å¾„ä¹Ÿæ˜¯å¯¹ä¸€ä¸ªæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œåœ¨å‘Šè¯‰æœåŠ¡å™¨æ–‡ä»¶è·¯å¾„çš„åŒæ—¶ï¼Œä¹Ÿä¿è¯äº†æˆ‘ä»¬è¯·æ±‚çš„æ–‡ä»¶çš„å”¯ä¸€æ€§ï¼Œä¸ä¼šå‡ºç°äºŒä¹‰æ€§ï¼›\n\nè¿™æ—¶å€™åˆä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬è®¿é—®ç½‘ç«™çš„æ ¹ç›®å½•çš„æ—¶å€™ï¼Œæ²¡æœ‰æä¾›æ–‡ä»¶çš„è·¯å¾„å‘€ï¼Œé‚£è¿™æ—¶å€™ï¼Œè®¿é—®çš„ä»€ä¹ˆæ–‡ä»¶å‘¢ï¼Ÿ\nhttps://www.baidu.com/\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬è®¿é—®çš„æ˜¯æœåŠ¡å™¨æ ¹ç›®å½•çš„index.htmlæ–‡ä»¶\nhttps://www.baidu.com/https://www.baidu.com/index.html\n\nä½ å¯ä»¥è¯•ç€æ‰“å¼€è¿™ä¸¤ä¸ªé“¾æ¥ï¼Œå…¶å‡ºç°çš„é¡µé¢æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼›\n\nç±»ä¼¼äºç«¯å£å·éšè—ï¼Œhttpåè®®ä¹Ÿç¡®å®šäº†å½“ä¸‹ä½¿ç”¨çš„ç½‘é¡µæ–‡ä»¶çš„å‘½åä¸ºindex.htmlï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ—¶å€™ï¼Œå°±ä¼šé»˜è®¤è®¿é—®æ ¹ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶ï¼ˆæ—¢ç„¶æ˜¯é»˜è®¤çš„ï¼Œé‚£å°±å¯ä»¥ç›´æ¥éšè—ï¼‰å¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£å°±ä¸ä¼šæ¸²æŸ“å‡ºæˆ‘ä»¬çœ‹åˆ°çš„ç½‘é¡µï¼\nindex.htmlæ˜¯ç”¨å‰ç«¯è¯­è¨€ç¼–å†™çš„ç½‘é¡µä»£ç \n\nåŒç†ï¼Œå½“æˆ‘ä»¬è®¿é—®åšå®¢çš„æ—¶å€™ï¼Œè¯»å–é“çš„ä¹Ÿä¸æ˜¯ç›®å½•ï¼Œè€Œæ˜¯ç›®å½•ä¸‹çš„index.htmlæ–‡ä»¶\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/\n\n\næˆ‘çš„åšå®¢ä½¿ç”¨çš„æ˜¯hexoæ¡†æ¶ï¼Œå…¶ç½‘é¡µçš„æºè·¯å¾„åœ¨githubä¸Šå¼€æºäº†ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£urlä¸­çš„æ–‡ä»¶è·¯å¾„ã€‚\nå½“å‰ä½ çœ‹åˆ°çš„æ–‡ä»¶ç›®å½•ï¼Œå°±æ˜¯åšå®¢æœåŠ¡çš„æ ¹ç›®å½•ã€‚è®¿é—®çš„åšå®¢é¦–é¡µï¼Œå°±æ˜¯æ ¹ç›®å½•ä¸‹çš„index.html\n\nç”¨ä½œç¤ºä¾‹çš„linuxå·¥å…·ä½¿ç”¨åšå®¢ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®ƒçš„è·¯å¾„ï¼Œæ‰¾åˆ°index.htmlæ–‡ä»¶\n/2022/08/07/note_linux/6gdb_g++_make_vim/\n\n\nè¿™ä¾¿æ˜¯httpåè®®urlä¸­æ–‡ä»¶è·¯å¾„çš„ä½œç”¨ï¼\nè¿™é‡Œçš„/æ ¹ç›®å½•æ˜¯æœåŠ¡ç«¯è®¾ç½®çš„ï¼Œå¹¶ä¸ä¸€å®šæ˜¯ï¼ˆå¤§æ¦‚ç‡ä¸æ˜¯ï¼‰æœåŠ¡ç«¯linuxæœåŠ¡å™¨çš„æ ¹ç›®å½•\n\nhexoåšå®¢å·²æ›´æ–°ä¸ºç»å¯¹æ•°å­—è·¯å¾„ï¼Œæœ¬æ–‡ä¸­æ¼”ç¤ºçš„è·¯å¾„å·²ç»æ— æ³•è®¿é—®\n\n1.5 ç¼–ç è§£ç åœ¨urlä¸­ï¼Œè¿˜ä¼šå¯¹ä¸€äº›ç‰¹æ®Šå­—ç¬¦è¿›è¡Œç¼–è§£ç ï¼Œæ¯”å¦‚ä¸­æ–‡ï¼Œå’Œä¸€äº›ç‰¹æ®Šçš„ç¬¦å·\nhttps://blog.musnow.top/2022/08/07/note_linux/6gdb_g++_make_vim/#4-make-x2F-makefile\n\næ¯”å¦‚åœ¨ä½œä¸ºç¤ºä¾‹çš„urlä¸­ï¼Œè¿™é‡Œå‡ºç°äº†x2Fï¼Œè€ŒåŸæ–‡ä¸­æ˜¯4.make/makefile;è¿™é‡Œçš„ç¼–ç å°±æ˜¯ä¸ºäº†é¿å…make/makefileè¢«è¯†åˆ«æˆè·¯å¾„çš„æ ‡è¯†ç¬¦ï¼Œä»è€Œå‡ºç°é”™è¯¯ã€‚\nhttps://www.baidu.com/s?tn=68018901_39_oem_dg&amp;ie=utf-8&amp;word=%E4%BD%A0%E5%A5%BD\n\nå½“urlè·¯å¾„ä¸­æœ‰ä¸­æ–‡çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¢«è½¬ç æˆç‰¹å®šçš„æ ¼å¼\n\næˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°çš„ä¾æ—§æ˜¯ä¸­æ–‡ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨è¿™æ®µå¸®æˆ‘ä»¬è¿›è¡Œäº†è§£ç \n\nå°†éœ€è¦è½¬ç çš„å­—ç¬¦è½¬ä¸º16è¿›åˆ¶ï¼Œç„¶åä»å³åˆ°å·¦ï¼Œå–4ä½(ä¸è¶³4ä½ç›´æ¥å¤„ç†)ï¼Œæ¯2ä½åšä¸€ä½ï¼Œå‰é¢åŠ ä¸Š%ï¼Œç¼–ç æˆ%XYæ ¼å¼\n\n2.httpåè®®è¯·æ±‚æ ¼å¼äº†è§£äº†httpåè®®ä¸­çš„urlç½‘å€ï¼Œç°åœ¨å°±å¯ä»¥è¿›ä¸€æ­¥äº†è§£httpåè®®çš„æŠ¥å¤´å’ŒæŠ¥æ–‡äº†;\nä¸€ä¸ªhttp request/responseçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹\n\nåœ¨è¯·æ±‚ä¸­ï¼Œå®¢æˆ·ç«¯ä¼šæä¾›è‡ªå·±çš„è¯·æ±‚æ–¹æ³•ï¼ˆGET&#x2F;POST&#x2F;PUTç­‰ç­‰ï¼‰ï¼Œå¹¶æä¾›urlæ¥æ ‡è¯†è‡ªå·±éœ€è¦çš„æ–‡ä»¶è·¯å¾„ï¼›è¿™ä¸ªurlå¯èƒ½æ˜¯çŸ­é“¾æ¥ï¼ˆæˆªå–æ ¹ç›®å½•ä¹‹åçš„éƒ¨åˆ†ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å®Œæ•´çš„é“¾æ¥ã€‚\néšåï¼Œå°±ä¼šè·Ÿä¸Šä¸€å¤§å †çš„è¯·æ±‚å‚æ•°ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„è¯·æ±‚å‚æ•°å¹¶ä¸æ˜¯urlä¸­çš„&lt;query&gt;å‚æ•°ï¼Œè€Œæ˜¯httpåè®®è‡ªèº«çš„è¯·æ±‚å‚æ•°ã€‚æ¯ä¸€ä¸ªè¯·æ±‚å‚æ•°éƒ½ç”¨äº†\\r\\nä½œä¸ºåˆ†éš”ï¼Œè¿™å’Œæˆ‘ä»¬å†™çš„è‡ªå®šä¹‰åè®®ä¸­é‡‡ç”¨\\tè¿›è¡Œåˆ†å‰²æ˜¯ç›¸åŒçš„åŸç†ï¼\nè¿™å‡ ä¸ªéƒ¨åˆ†ä¸­ï¼Œè¯·æ±‚çš„æ­£æ–‡å¯ä»¥ä¸å¸¦ï¼ˆä¸ºç©ºï¼‰\n2.1 è¯»å–å¤šé•¿ï¼Ÿä¸ºäº†è®©åè®®è¯»å–çš„æ—¶å€™ï¼Œèƒ½å¤ŸçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯»å–å®Œæ¯•äº†æŠ¥å¤´ï¼Œhttpåè®®æä¾›äº†ä¸€ä¸ª\\r\\nçš„ç©ºè¡Œï¼Œè¯»å–é“è¿™ä¸ªç©ºè¡Œï¼Œå°±ä»£è¡¨æŠ¥å¤´è¯»å–å®Œæ¯•äº†ï¼Œå‰©ä¸‹çš„å†…å®¹éƒ½æ˜¯æŠ¥æ–‡ã€‚\nè€Œä¸ºäº†æ ‡è¯†æŠ¥æ–‡çš„é•¿åº¦ï¼Œhttpåè®®ä¼šåœ¨å‘é€çš„æ—¶å€™æä¾›ä¸€ä¸ªå‚æ•°content-lengthï¼Œç”¨äºæ ‡è¯†æŠ¥æ–‡çš„é•¿åº¦ã€‚åœ¨è¯»å–å®Œæ¯•æŠ¥å¤´åï¼Œè‚¯å®šæ˜¯è¯»å–åˆ°äº†è¿™ä¸ªcontent-lengthå‚æ•°çš„ï¼Œä¹Ÿå°±çŸ¥é“åç»­åº”è¯¥ç»§ç»­è¯»å–å¤šé•¿ï¼Œæ‰èƒ½è¯»å®Œæ•´ä¸ªåè®®å­—æ®µï¼\nå…³äºè¿™éƒ¨åˆ†çš„ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹å¦å¤–ä¸€ç¯‡åšå®¢ httpåè®®content-lengthè¯¦è§£\n2.2 å“åº”çš„çŠ¶æ€ç å’Œæˆ‘ä»¬è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€ä¸€æ ·ï¼Œhttpä¹Ÿè¡¨æ˜äº†ä¸€éƒ¨åˆ†å“åº”çš„çŠ¶æ€ç ï¼Œå…¶ä¸­æˆ‘ä»¬æ—¥å¸¸æœ€å¸¸è§åˆ°çš„ï¼Œæ˜¯404/403è¿™ä¸¤ä¸ªçŠ¶æ€ç \n\nhttpçŠ¶æ€ç -ç™¾åº¦ç™¾ç§‘\n\nçŠ¶æ€ç å°±æ˜¯æ ‡è¯†æœåŠ¡å™¨æä¾›çš„æœåŠ¡çŠ¶æ€ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯å®ƒçš„è¯·æ±‚æ˜¯å¦æˆåŠŸäº†ã€‚å¦‚æœçŠ¶æ€ç æ˜¯200ï¼Œä»£è¡¨è¯·æ±‚æ˜¯æˆåŠŸçš„ã€‚å…¶ä½™çŠ¶æ€ç ä¼šæœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚404çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæ‰€ä»¥æ‰å« 404 not found!\n3.å®ä¾‹å®Œæ•´ä»£ç è¯¦è§ Gitee\n3.1 å‰ç«¯é¡µé¢ç”±äºæœ¬äººå¹¶æ²¡æœ‰å­¦ä¹ è¿‡å‰ç«¯è¯­æ³•ï¼Œè¿™é‡Œé‡‡ç”¨ èœé¸Ÿæ•™ç¨‹ æä¾›çš„å‰ç«¯ç¤ºä¾‹ä»£ç æ¥æ¼”ç¤º\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹(runoob.com)&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;&lt;p&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\n\næˆ‘ä»¬æ—¥å¸¸æ‰€è®¿é—®çš„ç½‘é¡µéƒ½æ˜¯è¿™æ ·çš„ä»£ç ï¼Œç»ç”±æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ï¼Œå†å±•ç¤ºå‡ºæ¥\n3.2 æœåŠ¡ç«¯ä»£ç ç”±äºhttpæ˜¯åŸºäºtcpçš„ï¼Œè¿™é‡Œç›´æ¥æŠŠä¹‹å‰å†™çš„tcpServeræ¬è¿‡æ¥å°±èƒ½ç”¨ï¼å…·ä½“çš„ä»£ç è§£æè¯·çœ‹æ³¨é‡Šï¼Œæƒ³å¿…è¯´çš„æ˜¯å¾ˆæ¸…æ¥šçš„\n#define CRLF &quot;\\r\\n&quot;#define CRLF_LEN strlen(CRLF)#define SPACE &quot; &quot;#define SPACE_LEN strlen(SPACE)#define HOME_PAGE &quot;index.html&quot; // é¦–é¡µæ–‡ä»¶#define ROOT_PATH &quot;web&quot; // ç½‘å€æ ¹ç›®å½•åœ°å€// è·å–httpè¯·æ±‚ä¸­çš„è·¯å¾„string getPath(string http_request)&#123;    size_t pos = http_request.find(CRLF);//æ‰¾åˆ°ç¬¬ä¸€è¡Œçš„åˆ†éš”ç¬¦    if(pos == string::npos)         return &quot;&quot;;    string request_line = http_request.substr(0, pos);//å–å‡ºç¬¬ä¸€è¡Œ    //è¯·æ±‚çš„ç¬¬ä¸€è¡Œï¼šGET /a/b/c http/1.0    size_t first = request_line.find(SPACE);// æ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼    if(pos == string::npos)         return &quot;&quot;;    size_t second = request_line.rfind(SPACE); // ä»åå¾€å‰æ‰¾ç©ºæ ¼    if(pos == string::npos)         return &quot;&quot;;    // æ‰¾åˆ°ä¸¤ä¸ªç©ºæ ¼äº†ï¼Œä¸¤ä¸ªç©ºæ ¼ä¹‹é—´çš„å°±æ˜¯è¯·æ±‚çš„è·¯å¾„    string path = request_line.substr(first+SPACE_LEN, second - (first+SPACE_LEN));    // å¯¹pathè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœpathæ˜¯ä»¥/ç»“å°¾çš„ï¼Œåˆ™åœ¨pathä¸­è¿½åŠ index.htmlæ–‡ä»¶å    if(path[path.size()-1] == &#x27;/&#x27;) &#123;        path += HOME_PAGE; //åŠ ä¸Šè¢«éšè—çš„index.htmlæ–‡ä»¶å    &#125;    return path;&#125;// è¯»å–æ–‡ä»¶string readFile(const string &amp;recource)&#123;    ifstream in(recource, ios::binary);    if(!in.is_open()) //æ–‡ä»¶æ‰“å¼€å¤±è´¥    &#123;        return &quot;404&quot;;    &#125;    // å†…å®¹    string content;    string line;    while(getline(in, line))    &#123;        content += line;    &#125;    in.close();    return content;&#125;void handlerHttpRequest(int sock)&#123;    cout &lt;&lt; &quot;###########start#############&quot; &lt;&lt; endl;//æ‰“å°ä¸€ä¸ªåˆ†éš”çº¿    char buffer[10240];    ssize_t s = read(sock, buffer, sizeof(buffer));    if(s &gt; 0)&#123;        cout &lt;&lt; buffer &lt;&lt; endl;        cout &lt;&lt; &quot;###########end############&quot; &lt;&lt; endl;    &#125;    string path = getPath(buffer);    // å‡è®¾ç”¨æˆ·è¯·æ±‚çš„æ˜¯ /a/b è·¯å¾„    // é‚£ä¹ˆæœåŠ¡ç«¯å¤„ç†çš„æ—¶å€™ï¼Œå°±éœ€è¦æ·»åŠ æ ¹ç›®å½•ä½ç½®å’Œé»˜è®¤çš„æ–‡ä»¶å    // &lt;root&gt;/a/b/index.html    // åœ¨æœ¬æ¬¡ç”¨ä¾‹ä¸­ï¼Œæ ¹ç›®å½•ä¸º ./webæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å®Œæ•´çš„æ–‡ä»¶è·¯å¾„åº”è¯¥æ˜¯    // ./web/a/b/index.html    string resources = ROOT_PATH; // æ ¹ç›®å½•è·¯å¾„    resources += path; // æ–‡ä»¶è·¯å¾„    logging(DEBUG,&quot;[sockfd: %d] filePath: %s&quot;,sock,resources.c_str()); // æ‰“å°ç”¨ä½œdebug    string html = readFile(resources);// æ‰“å¼€æ–‡ä»¶    // å¼€å§‹å“åº”    string response = &quot;HTTP/1.0 200 OK\\r\\n&quot;;    //å¦‚æœreadFileè¿”å›çš„æ˜¯404ï¼Œä»£è¡¨æ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨    if(strcmp(html.c_str(),&quot;404&quot;)==0)    &#123;        response = &quot;HTTP/1.0 404 NOT FOUND\\r\\n&quot;;    &#125;    // è¿½åŠ åç»­å­—æ®µ    response += &quot;Content-Type: text/html\\r\\n&quot;;    response += (&quot;Content-Length: &quot; + to_string(html.size()) + &quot;\\r\\n&quot;);    response += &quot;\\r\\n&quot;;    response += html;    // å‘é€ç»™ç”¨æˆ·    send(sock, response.c_str(), response.size(), 0);&#125;\n\n3.3 æµ‹è¯•å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰ï¼Œè¯·å…ˆæ‰“å¼€ä½ çš„äº‘æœåŠ¡å™¨é˜²ç«å¢™ä¸­çš„å¯¹åº”ç«¯å£ï¼›è¿™é‡Œæˆ‘ç»‘å®šçš„æ˜¯ç«¯å£10000ï¼Œåœ¨æµè§ˆå™¨ä¸­ç”¨ip:ç«¯å£çš„æ–¹å¼å¯ä»¥æ­£å¸¸è®¿é—®ï¼\n\nè¿™é‡Œæ ‡è¯†çš„ä¸å®‰å…¨æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰é‡‡ç”¨å¸¦åŠ å¯†çš„httpsåè®®ï¼Œè¿™ä¸æ˜¯å½“ä¸‹éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚ä¸ç®¡ä»–å°±å¯ä»¥äº†ã€‚\næŒ‰F12æ‰“å¼€å¼€å‘è€…é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹æ–¹å‡ºç°äº†å®Œæ•´çš„htmlä»£ç ï¼Œæˆ‘ä»¬æˆåŠŸæä¾›äº†æœåŠ¡ï¼\n\n3.4 åç«¯æ‰“å°çš„æŠ¥æ–‡åœ¨æœåŠ¡å™¨åç«¯ï¼Œæˆ‘ä»¬çœ‹åˆ°å…¶æ‰“å°å‡ºæ¥äº†ä¸€ä¸ªåŸºæœ¬çš„httpè¯·æ±‚ï¼Œå’Œä¸Šé¢è¯´æ˜çš„æ ¼å¼æ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œç®€å•çš„è¿›è¡Œä¸€éƒ¨åˆ†è¯´æ˜ï¼š\n\nGETï¼šè¯·æ±‚æ–¹å¼ä¸ºè·å–æ•°æ®\n/ï¼šè¯·æ±‚çš„æ˜¯æ ¹è·¯å¾„\nHTTP/1.1ï¼šä½¿ç”¨çš„httpåè®®ç‰ˆæœ¬\nConnectionï¼šä»£è¡¨æˆ‘ä»¬å’ŒæœåŠ¡å™¨çš„é“¾æ¥æ–¹å¼ï¼Œkeep-aliveä»£è¡¨ä¿æŒè¿æ¥\nUser-Agentï¼šå®¢æˆ·ç«¯ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯windowsç³»ç»Ÿã€Chromeå†…æ ¸çš„æµè§ˆå™¨ï¼ˆæˆ‘æ˜¯ç”¨çš„æ˜¯edgeæµè§ˆå™¨ï¼‰\nAccept: æ”¯æŒæ¥æ”¶çš„ä¿¡æ¯ç±»å‹\nAceept-Encoding: å¯¹ä¿¡æ¯è¿›è¡Œå‹ç¼©\nAccept-Languageï¼šæ”¯æŒçš„è¯­è¨€\nCookieï¼šèº«ä»½ä¿¡æ¯ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»\n\nå…¶ä¸­å‡ºç°äº†ä¸€ä¸ªç©ºè¡Œï¼Œä»£è¡¨æŠ¥æ–‡ç»“æŸï¼›\n\nå¾€ä¸‹æ»‘ï¼Œä¼šå‘ç°æµè§ˆå™¨è¿˜å‘å‡ºäº†ç¬¬äºŒä¸ªè¯·æ±‚ï¼Œè·¯å¾„æ˜¯/favicon.icoï¼Œè¿™æ˜¯é»˜è®¤çš„ç«™ç‚¹å¤´åƒæ–‡ä»¶çš„å‘½åã€‚å› ä¸ºæˆ‘ä»¬çš„htmlæ–‡ä»¶ä¸­æ²¡æœ‰å†™æ˜ç«™ç‚¹å¤´åƒçš„è·¯å¾„ï¼Œæ‰€ä»¥æµè§ˆå™¨å°±å°è¯•è¯·æ±‚é»˜è®¤çš„å¤´åƒæ–‡ä»¶\nä½†æ˜¯ï¼Œå½“å‰æˆ‘ä»¬çš„ç«™ç‚¹æ ¹ç›®å½•webä¸‹å¹¶æ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œåº”è¯¥è¿”å›ä¸€ä¸ª404çŠ¶æ€ç ã€‚\n\nè¯·æ±‚ä¸­å‡ºç°äº†ä¸€ä¸ªæ–°çš„å‚æ•°Refererï¼Œä»£è¡¨æ˜¯ä»å½“å‰ç½‘é¡µè¯·æ±‚å¤´åƒçš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¯·æ±‚ç½‘é¡µçš„æŠ¥æ–‡ä¸­æ²¡æœ‰Refererå‚æ•°\n\n\næ­¤æ—¶å¯ä»¥éšä¾¿æ‰¾ä¸ªå›¾ç‰‡åšå¤´åƒï¼Œçœ‹çœ‹èƒ½ä¸èƒ½åŠ è½½å‡ºæ¥ï¼›ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘éšä¾¿æ‰¾äº†ä¸€å¼ çº¯ç»¿è‰²çš„å›¾ç‰‡ï¼Œå¹¶å°†å…¶åœ¨çº¿è½¬æ¢ä¸ºicoï¼Œæ”¾å…¥äº†ç«™ç‚¹çš„æ ¹ç›®å½•ã€‚\né‡å¯æœåŠ¡å™¨è¿›ç¨‹ï¼Œåˆ·æ–°æµè§ˆå™¨å†æ¬¡è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸå‡ºç°äº†ç«™ç‚¹çš„å¤´åƒï¼›\n\n3.5 å¸¸è§å‚æ•°è¡¨\n4.è¯·æ±‚æ–¹æ³•ä¸€èˆ¬æˆ‘ä»¬è·å–ä¸€ä¸ªç½‘é¡µï¼Œç”¨çš„éƒ½æ˜¯GETæ–¹æ³•ã€‚æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªå¸¦æŒ‰é’®çš„è¡¨å•åˆ›å»ºè¯·æ±‚ï¼Œå°è¯•å‘æœåŠ¡ç«¯å‘é€&lt;query&gt;å‚æ•°\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;èœé¸Ÿæ•™ç¨‹(runoob.com)&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ ‡é¢˜&lt;/h1&gt;&lt;p&gt;æˆ‘çš„ç¬¬ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;&lt;form action=&quot;/a/index.html&quot; method=&quot;get&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\n\n4.1 GETåœ¨methodé‡Œé¢ï¼Œæˆ‘ä»¬æŒ‡å®šäº†getæ–¹æ³•ï¼Œæ­¤æ—¶\n&lt;form action=&quot;/a/index.html&quot; method=&quot;get&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;\n\næ­¤æ—¶é¡µé¢ä¸­å‡ºç°äº†ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä¾›æˆ‘ä»¬è¾“å…¥å¯†ç ï¼Œä¸”å¯†ç ä¼šæ˜¾ç¤ºä¸º****è€Œä¸æ˜¯æ˜æ–‡\n\nç‚¹å‡»æŒ‰é’®ï¼Œä¼šè·³è½¬åˆ°ä¸€ä¸ª404é¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„a/index.htmlè·¯å¾„å¹¶ä¸æ”¯æŒå‚æ•°è¯·æ±‚ï¼Œæ‰€ä»¥å‘é€äº†404é”™è¯¯ç \n\nä¸è¿‡è¿™ä¸é‡è¦ï¼Œæˆ‘ä»¬çœ‹çœ‹åç«¯æ‰“å°çš„å†…å®¹ã€‚å…¶ä¸­å‚æ•°æ˜¯è¿½åŠ åˆ°urlä¸­ï¼Œä»¥æ˜æ–‡ä¼ è¾“è¿‡æ¥çš„ï¼›æ­£æ–‡éƒ¨åˆ†ä¸ºç©ºï¼Œå¹¶æ²¡æœ‰æºå¸¦å‚æ•°\n\n4.2 POSTå°†è¯·æ±‚æ–¹æ³•æ”¹æˆpostï¼Œå†æ¬¡å°è¯•\n&lt;form action=&quot;/a/index.html&quot; method=&quot;post&quot;&gt;    Username: &lt;input type=&quot;text&quot; name=&quot;user&quot;&gt;&lt;br&gt;    Password: &lt;input type=&quot;password&quot; name=&quot;passwd&quot;&gt;&lt;br&gt;    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/form&gt;\n\nè¿™æ—¶å€™èƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºa/index.htmlé¡µé¢ï¼Œurlä¸­ä¸å†å¸¦æœ‰å‚æ•°\n\næ­¤æ—¶æŸ¥çœ‹åç«¯ä¸­çš„ä¿¡æ¯ï¼Œèƒ½çœ‹åˆ°è¯·æ±‚æ–¹æ³•å˜ä¸ºPOSTï¼Œå‚æ•°å‡ºç°åœ¨äº†æ­£æ–‡éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯urlä¸­\n\n4.3 GET&#x2F;POSTåŒºåˆ«è¿™ä¹Ÿæ˜¯GETå’ŒPOSTæ–¹æ³•çš„åŒºåˆ«ä¹‹ä¸€ï¼š\n\nGETæ–¹æ³•é€šè¿‡urlä¼ å‚\nPOSTæ–¹æ³•ä¼šå°†urlå‚æ•°æå–å‡ºæ¥ï¼Œæ‹¼æ¥åˆ°æ­£æ–‡éƒ¨åˆ†\n\nç”±æ­¤èƒ½æ¨å‡ºäºŒè€…çš„å®‰å…¨æ€§åŒºåˆ«\n\nGETæ–¹æ³•ç›¸å¯¹ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥ä»¥æ˜æ–‡è´´åœ¨äº†urlä¸Š\nPOSTæ–¹æ³•ä»¥æ­£æ–‡ä¼ å‚ï¼Œä½¿ç”¨httpsåè®®çš„æ—¶å€™èƒ½è¿›è¡ŒåŠ å¯†ï¼Œç›¸å¯¹è¾ƒå®‰å…¨\n\n4.4 æ›´å¤šæ–¹æ³•httpè¯·æ±‚è¿˜æ”¯æŒæ›´å¤šæ–¹æ³•ï¼Œå¦‚ä¸‹\n\n5.çŠ¶æ€ç 5.1 çŠ¶æ€ç è¡¨ä¸‹é¢æ˜¯ä¸€ä¸ªå“åº”çŠ¶æ€ç çš„æ€»è¡¨\n\n5.2 404&#x2F;403çŠ¶æ€ç æˆ‘ä»¬èƒ½çœ‹åˆ°404å’Œ403éƒ½æ˜¯å®¢æˆ·ç«¯çŠ¶æ€ç ï¼Œä¸ºä»€ä¹ˆè¯´æ˜¯å®¢æˆ·ç«¯é”™è¯¯å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºä½ å‘æœåŠ¡å™¨è¯·æ±‚äº†ä¸€ä¸ªæœåŠ¡å™¨æ²¡æœ‰çš„èµ„æºï¼Œè¿™ä¸ªé—®é¢˜ä¸åº”è¯¥æ˜¯æœåŠ¡å™¨çš„é—®é¢˜ã€‚\nè¿™å°±å¥½æ¯”ä½ å»è¥¿ç“œæ‘Šä¹°è‚‰ï¼Œäººå®¶å‹æ ¹ä¸å–è‚‰ã€‚é—®é¢˜å‡ºåœ¨ä½ èº«ä¸Šï¼Œä½ ä¸åº”è¯¥æ‰¾è¥¿ç“œæ‘Šè€æ¿ä¹°è‚‰ã€‚æ‰€ä»¥404çŠ¶æ€ç ï¼Œåº”è¯¥æ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜ï¼\nè€Œ403çŠ¶æ€ç çš„å«ä¹‰æ˜¯403 forbiddenï¼ŒæœåŠ¡å™¨æ‹’ç»äº†ä½ çš„è¯·æ±‚ï¼ˆä½ æ²¡æœ‰æƒé™è®¿é—®ï¼‰è¿™ä¹Ÿæ˜¯å®¢æˆ·ç«¯çš„é—®é¢˜ã€‚ä½ ä¸èƒ½å»è¶…å¸‚ä¹°ä¸œè¥¿ï¼Œç„¶åé—®è€æ¿èƒ½ä¸èƒ½è®©ä½ çœ‹çœ‹è€æ¿çš„é’±ç½å­ã€‚è€æ¿è‚¯å®šä¸ç»™ä½ çœ‹å•Šï¼æ‰€ä»¥æ‰ä¼šå‘Šè¯‰ä½ 403ï¼Œä¸ç»™ä½ è®¿é—®ã€‚\n5.3 5xxçŠ¶æ€ç ä»€ä¹ˆæ—¶å€™ä¼šå‡ºç°æœåŠ¡å™¨é”™è¯¯çš„5xxçŠ¶æ€ç å‘¢ï¼Ÿ\nå½“ä½ è¯·æ±‚ä¸€ä¸ªæœåŠ¡ï¼ŒæœåŠ¡ç«¯éœ€è¦å¤„ç†ä¹‹åç»™ä½ è¿”å›ç»“æœã€‚æ­¤æ—¶æœåŠ¡å™¨åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å› ä¸ºç¨‹åºæœ‰bugæå‰é€€å‡ºï¼Œè¿™æ—¶å€™å°±åº”è¯¥ç»™å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª5xxçŠ¶æ€ç ï¼Œæ ‡è¯†æœåŠ¡å™¨åœ¨å¤„ç†ä½ çš„è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†é”™è¯¯ï¼Œæ— æ³•è¿”å›ç»“æœã€‚\n5.4 301&#x2F;302é‡å®šå‘å…³äº3å¼€å¤´çš„çŠ¶æ€ç ï¼Œä¸»è¦è°ˆè°ˆä¸‹é¢è¿™ä¸¤ä¸ª\n301 æ°¸ä¹…é‡å®šå‘302 ä¸´æ—¶é‡å®šå‘\n\nä¸ºä½•ä¸€ä¸ªæ˜¯æ°¸ä¹…ï¼Œä¸€ä¸ªæ˜¯ä¸´æ—¶å‘¢ï¼Ÿ\nåœ¨httpè¿›è¡Œå“åº”çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯å¯ä»¥å‘é€ä¸€ä¸ªlocationå‚æ•°ï¼Œå‘é€ä¸€ä¸ªæ–°çš„urlç»™å®¢æˆ·ç«¯ï¼›æˆ‘ä»¬çš„æµè§ˆå™¨åœ¨æ”¶åˆ°è¿™ä¸ªå‚æ•°åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€å¯¹åº”çš„é¡µé¢\nLocation: https://www.baidu.com/\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸Šé¢çš„ä»£ç æ¥æµ‹è¯•ä¸€ä¸‹\n// å°è¯•è¿›è¡Œ302é‡å®šå‘string response = &quot;HTTP/1.1 302 Temporarily moved\\r\\n&quot;;response+= &quot;Location: https://www.baidu.com/\\r\\n&quot;;response+= &quot;\\r\\n&quot;;// å‘é€ç»™ç”¨æˆ·send(sock, response.c_str(), response.size(), 0);\n\næ­¤æ—¶è®¿é—®æˆ‘ä»¬è‡ªå·±çš„IP:ç«¯å£ï¼Œä¼šè·³è½¬åˆ°ç™¾åº¦çš„é¡µé¢ã€‚è¿™å°±æ˜¯é‡å®šå‘çš„ä½œç”¨\n\n\né‚£ä¸´æ—¶é‡å®šå‘å’Œæ°¸ä¹…é‡å®šå‘æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?\n\nå‡å¦‚æˆ‘è®¾ç«‹äº†ä¸€ä¸ªå…¬å¼€ç«™ç‚¹ï¼ŒåŸŸåæ˜¯test.comï¼Œè¿™å‡ å¹´ä¸€ç›´æä¾›æœåŠ¡ï¼Œç§¯ç´¯äº†ä¸€éƒ¨åˆ†çš„ç”¨æˆ·ã€‚è¿‡äº†ä¸€ä¼šï¼Œæˆ‘ä¸æƒ³è¦è¿™ä¸ªåŸŸåäº†ï¼Œæƒ³æ¢ä¸€ä¸ªtest.cnï¼›å¯ç”¨æˆ·å·²ç»æœ‰é‚£ä¹ˆå¤šï¼Œå¤§å®¶éƒ½åªè®°å¾—ä½ çš„test.comï¼Œå¦‚æœç›´æ¥æ›´æ¢åŸŸåï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•è®¿é—®test.comï¼Œä»¥ä¸ºä½ è·‘è·¯äº†ï¼Œå°±æ”¾å¼ƒä½¿ç”¨ä½ çš„ç½‘é¡µã€‚\nè¿™æ ·çš„ç»“æœæ˜¾è€Œæ˜“è§ï¼šä¸¥é‡çš„å®¢æˆ·æµå¤±ï¼\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¯ä»¥å…ˆå°†æœåŠ¡è¿ç§»åˆ°test.cnæ–°åŸŸåï¼Œåœ¨æ—§åŸŸåtest.comä¸­è®¾ç½®ä¸€ä¸ª301é‡å®šå‘åˆ°test.cnï¼Œå‘Šè¯‰ç”¨æˆ·æˆ‘æ¢æ–°åŸŸåäº†ã€‚è¿™æ ·æŒç»­ä¸€æ®µæ—¶é—´åï¼Œç­‰åˆ°test.comçš„ä½¿ç”¨è€…ä¸å¤šäº†ï¼Œå°±å¯ä»¥è€ƒè™‘å½»åº•å–æ¶ˆtest.comçš„è§£æï¼Œå…³åœæ­¤åŸŸåäº†ã€‚\nåœ¨ä¸Šé¢çš„åœºæ™¯ä¸­ï¼Œæˆ‘æ˜¯éœ€è¦æ›´æ¢åŸŸåï¼Œæ˜¯æ°¸ä¹…æ›´æ¢ã€‚æˆ‘ä»¬å°±åº”è¯¥æŠŠçŠ¶æ€ç è®¾ç½®ä¸º301ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯è¿™ä¸ªåŸŸåå°†è¢«æ°¸ä¹…é‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªåŸŸåä¸Š\n\nå¦å¤–çš„æƒ…å†µæ˜¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªexample.comåŸŸåï¼Œæˆ‘çš„æœåŠ¡éœ€è¦è¿›è¡Œç»´æŠ¤ï¼›æ­¤æ—¶å°±å°†example.comé‡å®šå‘åˆ°å¦å¤–ä¸€ä¸ªåŸŸåexample.cnï¼ŒæŒ‡å‘å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè®©è¿™ä¸ªæœåŠ¡å™¨ä¸´æ—¶æä¾›æœåŠ¡ã€‚\næœåŠ¡ç»´æŠ¤å®Œæ¯•åï¼Œå°±å°†é‡å®šå‘å–æ¶ˆï¼Œç»§ç»­ä½¿ç”¨å½“å‰çš„æœåŠ¡å™¨ã€‚\nè¿™ä¸ªåœºæ™¯ä¸­ï¼Œé‡å®šå‘åªæ˜¯ç»´æŠ¤æœŸé—´çš„ä¸€ä¸ªä¸´æ—¶ç­–ç•¥ï¼Œæ‰€ä»¥çŠ¶æ€ç è®¾ç½®æˆ302ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æˆ‘åªæ˜¯ä¸´æ—¶è¿›è¡Œé‡å®šå‘ï¼Œæˆ‘è¿˜ä¼šå›æ¥çš„ã€‚\n6.cookie&#x2F;sessionæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªwebé¡µé¢ä¸­ç™»å½•äº†ï¼ˆå¦‚github&#x2F;gitee&#x2F;csdnï¼‰è¿™ä¸ªç½‘é¡µåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½ä¼šä¿æŒç™»å½•ï¼Œç›´åˆ°è¶…æ—¶äº¦æˆ–è€…æ˜¯å‡ºç°äº†å¼‚åœ°è®¿é—®ã€‚\nå‡å¦‚ä½ ç°åœ¨æœ‰ä¸ªç½‘é¡µï¼Œä½†æ˜¯æ¯æ¬¡ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œéƒ½éœ€è¦é‡æ–°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œåˆšåˆšè¾“å…¥è¿‡äº†ï¼Œæ¢ä¸€ä¸ªé¡µé¢åˆä¸è¡Œäº†ã€‚è¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·è¿˜ä¼šæƒ³ç”¨ä½ è¿™ä¸ªæœåŠ¡å—ï¼Ÿ\nä¸ºäº†é¿å…æ­¤ç±»é—®é¢˜ï¼Œhttpåè®®å°±éœ€è¦å¼•å…¥å…¶ä»–çš„å‚æ•°ï¼Œæ¥ç»´æŒç”¨æˆ·çš„ç™»å½•ä¼šè¯ã€‚cookie&#x2F;sessionä¾¿æ˜¯å› æ­¤è€Œæ¥çš„ã€‚\n6.1 set cookieæœåŠ¡ç«¯å¯ä»¥åœ¨å“åº”å¤´ä¸­å¸¦ä¸ŠSet-Cookieå­—æ®µï¼Œç»™å®¢æˆ·ç«¯è®¾ç½®ä¸Šcookie\nresponse += &quot;Set-Cookie: This is my cookie test\\r\\n&quot;;\n\næ‰“å¼€f12å¼€å‘è€…ç•Œé¢ï¼Œèƒ½åœ¨å…¶ä¸­çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„cookie\n\nå†æ¬¡åˆ·æ–°ç½‘é¡µï¼Œå¯ä»¥çœ‹åˆ°åœ¨ä¹‹åçš„è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨éƒ½ä¼šå‘é€ä¸€æ¬¡æœåŠ¡å™¨è®¾ç½®çš„cookieã€‚è¿™æ ·æœåŠ¡ç«¯åœ¨æ”¶åˆ°cookieåï¼Œå°±èƒ½è§£æåˆ°è‡ªå·±è®¾ç½®çš„cookieï¼Œç¡®å®šäº†æŒ‡å®šçš„ç”¨æˆ·\n\nåœ¨æœåŠ¡å™¨ç«¯ä¹Ÿèƒ½çœ‹åˆ°è¿™ä¸ªå­—æ®µ\n\n6.1.1 cookie pathå¯¹äºcookieæ¥è¯´ï¼Œå…¶è¿˜æœ‰ä¸€ä¸ªè·¯å¾„çš„é…ç½®é¡¹ã€‚è§ä¸‹å›¾ï¼Œæˆ‘åœ¨å®ç°æˆ‘çš„è§†é¢‘ç‚¹æ’­ç³»ç»Ÿçš„æ—¶å€™ï¼Œåœ¨/usr/loginå¤„ç›´æ¥ç”¨äº†å¦‚ä¸‹headeræ¥set-cookie\nrsp.set_header(&quot;Set-Cookie&quot;,&quot;sid=123456&quot;);// å¦‚ä¸Šè¯­å¥æ˜¯httplibï¼Œç­‰ä»·äº// Set-Cookie: sid=123456\\r\\n\n\n\nè¿™å°±å¯¼è‡´æˆ‘å¯¹æˆ‘çš„è§†é¢‘ç‚¹æ’­å…¶ä»–ç•Œé¢ä¸­çš„æ“ä½œå¹¶æ²¡æœ‰æºå¸¦ä¸Šæˆ‘è‡ªå·±setçš„è¿™ä¸ªcookieï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•å®ç°åç»­çš„seesionè¯†åˆ«ï¼ˆè¿™é‡Œæˆ‘å†™æ­»äº†æ˜¯å› ä¸ºè¿˜åœ¨åˆå§‹æµ‹è¯•é˜¶æ®µï¼‰\næˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨cookieåé¢æºå¸¦ä¸€ä¸ªpathï¼Œæ¥å‘Šè¯‰æµè§ˆå™¨è¿™ä¸ªcookieåº”è¯¥æ˜¯å…¨å±€çš„\nSet-Cookie: sid=123456; path=/\n\nè¿™æ ·æ‰èƒ½å®ç°åç»­æ•´ä¸ªç½‘ç«™çš„è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šè¿™ä¸ªcookieï¼Œå¦åˆ™åªæœ‰è¯·æ±‚ /usrå¼€å¤´çš„è·¯å¾„æ‰èƒ½å¸¦ä¸Šè¿™ä¸ªcookie\n\nå¦‚ä¸Šå›¾ï¼Œè¿™æ ·è®¾ç½®äº†åï¼Œcookie pathå·²ç»æ˜¯/ ä»£è¡¨æ ¹è·¯å¾„äº†\n\n6.2 ä»€ä¹ˆæ˜¯cookieæ‰€è°“cookieï¼Œå…¶å®å°±æ˜¯æµè§ˆå™¨å¸®æˆ‘ä»¬å­˜å–äº†ä¸€å®šçš„èº«ä»½ä¿¡æ¯åœ¨æœ¬åœ°ï¼ˆå†…å­˜orç£ç›˜ï¼‰\nä¸‹ä¸€æ¬¡æ‰“å¼€ç‰¹å®šçš„ç½‘é¡µçš„æ—¶å€™ï¼Œå°±èƒ½æ˜¾ç¤ºå¯¹åº”çš„èº«ä»½ä¿¡æ¯ï¼ˆä¸ä¸€å®šæ˜¯ä½ çš„è´¦æˆ·å¯†ç ï¼‰ï¼Œå¹¶å‘Šè¯‰æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±è¯†åˆ«åˆ°äº†ä½ å½“å‰çš„ç”¨æˆ·ï¼Œå¹¶ä¸ºä½ ä¿æŒç™»é™†çŠ¶æ€ã€‚\næ—¢ç„¶æ˜¯ä¿å­˜åœ¨ç”¨æˆ·æœ¬åœ°çš„ï¼Œé‚£å°±æœ‰å¯èƒ½è¢«çªƒå–ã€‚ä¸€äº›æ¶æ„è½¯ä»¶å°±ä¼šå»æ‰«æä½ æµè§ˆå™¨æœ¬åœ°ç¼“å­˜ä¸­çš„cookieä¿¡æ¯ï¼Œå¯¹äºä¸€äº›å®‰å…¨æ€§ä¸é«˜çš„ç½‘ç«™è€Œè¨€ï¼Œæœ‰äº†è¿™ä¸ªcookieï¼Œå°±ç›¸å½“äºä»–æœ‰äº†ä½ çš„è´¦æˆ·ï¼Œå¯ä»¥ç›´æ¥ç™»å½•ä½ çš„è´¦æˆ·è¿›è¡Œæ“ä½œã€‚\nå› æ­¤ï¼Œå¼•å…¥äº†å¦å¤–ä¸€ç§èº«ä»½è®¤è¯çš„æ–¹å¼ cookie+session\n6.3 cookie+sessionæ¯”èµ·å°†èº«ä»½ä¿¡æ¯å­˜åˆ°å®¢æˆ·ç«¯ï¼Œå­˜è‡³æœåŠ¡ç«¯æ›´ä¸ºå®‰å…¨ï¼ˆæ”»å‡»ä¼ä¸šæœåŠ¡å™¨çš„æˆæœ¬ï¼Œæ¯”åœ¨ç”¨æˆ·ç«¯æ¤å…¥æœ¨é©¬ç¨‹åºçš„æˆæœ¬æ›´é«˜ï¼‰\n\nç”¨æˆ·ä½¿ç”¨è´¦æˆ·å¯†ç è¯·æ±‚ç™»å½•ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ç™»å½•è¯·æ±‚ï¼ŒéªŒè¯æˆåŠŸåï¼Œç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ä¸²session_idæ¥æ ‡è¯†ç”¨æˆ·\nå®¢æˆ·ç«¯ä¸‹ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œå¸¦ä¸Šäº†è¿™ä¸ªå”¯ä¸€å­—ç¬¦ä¸²\næœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œåœ¨æœ¬åœ°çš„session_idåº“ä¸­æŸ¥æ‰¾è¿™ä¸ªidï¼Œæ‰¾åˆ°åï¼Œå°±å°†ç”¨æˆ·ä¿¡æ¯åŒ¹é…ç»™å®¢æˆ·ç«¯ï¼Œç›¸å½“äºå®¢æˆ·ç«¯ç™»å½•æˆåŠŸäº†\n\nè¿™æ ·ï¼Œå°±å°†åŸæœ¬å­˜åœ¨ç”¨æˆ·æœ¬åœ°çš„èº«ä»½è®¤è¯ä¿¡æ¯ï¼Œå­˜åˆ°äº†æœåŠ¡ç«¯ä¸­ã€‚å®¢æˆ·ç«¯å°±åªå‰©ä¸‹ä¸€ä¸ªå­¤é›¶é›¶çš„å­—ç¬¦ä¸²idï¼Œä¸ä¼šæœ‰ç”¨æˆ·çš„ç§å¯†ä¿¡æ¯ã€‚å³ä¾¿ä¸¢å¤±ï¼Œä¹Ÿä¸ä¼šå½±å“ç”¨æˆ·çš„éšç§ã€‚\n\nä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£æˆ‘å·èµ°è¿™ä¸ªidä¸ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Ÿ\n\nå…¶å®æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼ŒæœåŠ¡ç«¯å¯ä»¥å°†session_idå’Œç”¨æˆ·çš„ipæˆ–è€…ç»ˆç«¯User-Agentç»‘å®šï¼Œè¿™æ ·åªè¦ç”¨æˆ·åˆ‡æ¢è®¾å¤‡æˆ–è€…æ¢äº†ç™»å½•çš„åœ°ç‚¹ï¼ˆæ¯”å¦‚ä»ä¸‰äºšè·‘åˆ°äº†å“ˆå°”æ»¨ï¼‰å°±ç›´æ¥è®©session_idå¤±æ•ˆï¼Œè¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ã€‚\n7.é•¿çŸ­é“¾æ¥åœ¨æ—©æœŸçš„httpåè®®ä¸­ï¼Œé‡‡ç”¨çš„éƒ½æ˜¯çŸ­é“¾æ¥ï¼Œä¸€æ¬¡è¿æ¥åªèƒ½å¤„ç†1æ¬¡httpè¯·æ±‚ã€‚å½“æ—¶çš„ç½‘é¡µå¤§å¤šä»¥æ–‡å­—ä¸ºä¸»ï¼Œæ•°æ®é‡å¾ˆå°ï¼Œä¸€èµ·è¯·æ±‚ä¹Ÿèƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€‚\nä½†ç°åœ¨æ—¶ä»£å·²ç»å˜äº†ï¼Œä¸€ä¸ªç½‘é¡µé‡Œé¢æœ‰å›¾ç‰‡ï¼Œæ–‡å­—ï¼ŒéŸ³é¢‘ï¼Œè§†é¢‘ã€‚è¿™äº›æ–‡ä»¶çš„ä½“ç§¯æ‰“èµ·æ¥ä¹‹åï¼ŒçŸ­é“¾æ¥çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚æ­¤æ—¶å°±å‡ºç°äº†é•¿é“¾æ¥ï¼Œä¸€æ¬¡tcpé“¾æ¥ï¼Œå¯ä»¥æŒç»­ä¼ è¾“æ•°æ®ã€‚\nç›¸æ¯”çŸ­é“¾æ¥ï¼Œé•¿é“¾æ¥è¿ä¸Šä¹‹åï¼Œèƒ½æŒç»­ä¼ è¾“æ•°æ®ï¼Œé¿å…äº†tcp3æ¬¡æ¡æ‰‹çš„æ¶ˆè€—ï¼Œæé«˜äº†æ•°æ®ä¼ è¾“çš„æ•ˆç‡ï¼\n7.1 Connectionåœ¨æœ¬æ–‡çš„3.4ä¸­ï¼Œä¾¿å‡ºç°äº†è¿™ä¸ªå‚æ•°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¼šæœ‰ä¸‹é¢ä¸¤ç§æƒ…å†µ\nConnection: keep-aliveConnection: closed\n\nå…¶ä¸­keep-aliveå°±æ˜¯é•¿é“¾æ¥ï¼Œclosedä»£è¡¨å½“å‰ç«¯å£åªæ”¯æŒçŸ­é“¾æ¥ã€‚\nå½“å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å¤´ä¸­åŒ…å«Connection: keep-aliveå­—æ®µï¼Œå¦‚æœæœåŠ¡å™¨æ”¯æŒé•¿é“¾æ¥ï¼Œå°±éœ€è¦åœ¨å“åº”å¤´ä¸­ä¹Ÿå¸¦ä¸ŠConnection: keep-alive\tï¼Œè¿™æ ·åŒæ–¹åå•†æˆåŠŸï¼Œå¤§å®¶éƒ½å¯ä»¥ä½¿ç”¨é•¿é“¾æ¥ã€‚\nå¦‚æœæœåŠ¡å™¨çš„å“åº”å¤´ä¸­æ²¡æœ‰å¸¦Connection: keep-aliveï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±ä¼šè®¤ä¸ºæœåŠ¡å™¨ä¸æ”¯æŒé•¿é“¾æ¥ï¼Œä¸‹æ¬¡è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šé‡æ–°å‘æœåŠ¡å™¨é“¾æ¥ï¼Œå†è·å–èµ„æºã€‚\nå¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»»æ„ä¸€æ–¹çš„å“åº”å¤´ä¸­åŒ…å«Connection: closedï¼Œé‚£ä¹ˆå°±ä¼šè®¤ä¸ºå½“å‰çš„ä¼šè¯åªæ”¯æŒçŸ­é“¾æ¥ï¼Œä¸‹æ¬¡è¯·æ±‚ä¼šé‡æ–°å»ºç«‹é“¾æ¥ã€‚\n7.2 httpå’Œtcpçš„å…³ç³»httpè™½ç„¶æ˜¯åŸºäºtcpçš„ï¼Œä½†httpæœ¬èº«æ˜¯æ— é“¾æ¥çš„ã€‚\n\nä¸¾ä¸ªæœ€æ˜æ˜¾çš„æ —å­ï¼Œåœ¨ä½ æ‰“å¼€ä¸€ä¸ªç½‘é¡µä¹‹åï¼Œä½ å…³é—­æ‰è‡ªå·±çš„wifiï¼Œä½ çš„ç½‘é¡µå¹¶ä¸ä¼šå› æ­¤æ¶ˆå¤±ã€‚åªæ˜¯æ— æ³•è¿›è¡Œåç»­æ“ä½œè€Œå·²ã€‚\n\nhttpæ˜¯ä¸€ä¸ªæ— é“¾æ¥çš„åº”ç”¨å±‚åè®®ï¼Œå…¶å€ŸåŠ©tcpè¿›è¡Œæ•°æ®çš„æµå¼ä¼ è¾“ï¼Œä½†ä¸ä¸€å®šéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¿æŒè¿æ¥ã€‚\næ‰€ä»¥ï¼Œhttpå°±å¯ä»¥å€ŸåŠ©å•ä¸ªtcpå¥—æ¥å­—æŒç»­çš„ä¼ è¾“æ•°æ®ï¼Œä¹Ÿå°±å¤©ç„¶åœ°æ”¯æŒäº†é•¿é“¾æ¥é€šä¿¡ã€‚\næ€»ç»“ä¸€ä¸‹ï¼Œhttpåªæ˜¯å€Ÿç”¨äº†tcpçš„èƒ½åŠ›ï¼Œå…¶æ— è¿æ¥çš„ç‰¹æ€§å’Œtcpæ²¡æœ‰å…³ç³»ï¼\n7.3 pipelineè¿™å…¶ä¸­ä¼šç‰µæ‰¯åˆ°ä¸€ä¸ªpipelineï¼Œå…¶ç»´æŠ¤äº†httpé•¿é“¾æ¥è¯·æ±‚æ—¶çš„å“åº”é¡ºåºã€‚\næ¯”å¦‚äººå®¶éœ€è¦åŠ è½½ä¸€ä¸ªç½‘é¡µï¼ŒæœåŠ¡ç«¯åº”è¯¥å…ˆæŠŠç½‘é¡µçš„æ•´ä½“æ¡†æ¶ç»™ç”¨æˆ·åŠ è½½å‡ºæ¥ï¼Œå†ç»™ç”¨æˆ·åŠ è½½å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰èµ„æºã€‚ä¸‹å›¾Bç«™çš„åŠ è½½å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ —å­ã€‚\n\nå¦åˆ™ä¹±åºäº†ï¼Œæ¯”å¦‚åªå‡ºç°äº†ä¸€ä¸ªå­¤é›¶é›¶çš„å›¾ç‰‡ï¼Œå°±ä¼šè®©äººæ„Ÿè§‰éå¸¸å¥‡æ€ªã€‚\n8.httpså› ä¸ºhttpçš„æ•°æ®æ˜¯æ— åŠ å¯†æ˜æ–‡å‘é€çš„ï¼Œç›¸å¯¹æ¥è¯´å¹¶ä¸æ˜¯éå¸¸çš„å®‰å…¨ï¼›ä¸ºäº†å®ç°æ•°æ®åŠ å¯†ï¼Œhttpsåœ¨httpçš„ä¸‹å±‚æ·»åŠ äº†ä¸€ä¸ªSSL/TLSè½¯ä»¶å±‚ï¼Œæ¥è¿›è¡Œæ•°æ®åŠ è§£å¯†å·¥ä½œ\n\n8.1 ä¸ºå•¥è¦åŠ å¯†ï¼Ÿè¦çŸ¥é“ï¼Œæ‰€æœ‰çš„åŠ å¯†å·¥ä½œï¼Œéƒ½æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®åœ¨ä¸­é—´ä¼ è¾“çš„è¿‡ç¨‹ï¼Œè¢«çªƒå–æˆ–ä¿®æ”¹ã€‚å¦‚æœæˆ‘ä»¬è¯·æ±‚ä¸€ä¸ªç½‘ç«™ç™»å½•çš„æ—¶å€™ï¼Œæ•°æ®åŒ…ä¸­å°±ä¼šåŒ…å«æˆ‘ä»¬çš„è´¦æˆ·å¯†ç ã€‚å¦‚æœè¢«çªƒå–ï¼Œæˆ‘ä»¬çš„éšç§å°±æ³„éœ²äº†ã€‚è¿™æ˜¯å¾ˆéš¾å—çš„ä¸€ä»¶äº‹ï¼\n\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬ç»å¸¸èƒ½å¬åˆ°å…è´¹å…¬å…±wifiä¸å®‰å…¨è¿™ä¸€è¯´æ³•ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿™ä¸ªwifiä¸Šè¿›è¡Œçš„æ‰€æœ‰æ•°æ®äº¤æ¢ï¼Œéƒ½ä¼šèµ°è¿™ä¸ªwifiçš„è·¯ç”±å™¨ï¼Œå¾ˆå®¹æ˜“è¢«ä¸­é—´äººçªƒå–å¹¶è·å–åˆ°æˆ‘ä»¬çš„æ•°æ®åŒ…ã€‚\nè¿™ç§æƒ…å†µä¸‹ï¼Œhttpsçš„åŠ å¯†å°±æ›´æœ‰å¿…è¦äº†ï¼\n\nä½†æ˜¯ï¼ŒåŠ å¯†è§£å¯†æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œæ‰€ä»¥httpså“åº”çš„é€Ÿåº¦ä¼šç¨æ…¢äºhttpã€‚ä¸è¿‡å½“ä¸‹cpuçš„æ‰§è¡Œé€Ÿåº¦å·²ç»éå¸¸å¿«ï¼Œè¿™ç‚¹æ—¶é—´å·®è·å¾ˆå°ï¼Œä¸ä¼šç‰¹åˆ«å½±å“æˆ‘ä»¬çš„æ—¥å¸¸ä½¿ç”¨ï¼\nä¸è¿‡ï¼ŒåŠ å¯†å¹¶ä¸æ˜¯ä¸€ä¸ªä¸‡é‡‘æ²¹ï¼Œå¹¶ä¸æ˜¯è¯´åŠ å¯†äº†ä¹‹åçš„æ•°æ®å°±ä¸€å®šèƒ½é¿å…è¢«çªƒå–ã€‚ä½†åŠ å¯†å¯ä»¥å¤§å¤§æé«˜çªƒå–ç ´è§£çš„æˆæœ¬ï¼Œæ— å½¢ä¸­é™ä½äº†æ•°æ®è¢«çªƒå–çš„æ¦‚ç‡ï¼Œä¿è¯äº†ä¸€å®šçš„æ•°æ®å®‰å…¨ã€‚\n8.2 å¸¸è§åŠ å¯†æ–¹å¼8.2.1 å¯¹ç§°åŠ å¯†æ‰€è°“å¯¹ç§°åŠ å¯†ï¼Œå¥½æ¯”æœ‰ä¸€ä¸ªå¸¦é”çš„ç›’å­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ä¸€æŠŠé’¥åŒ™ã€‚å®¢æˆ·ç«¯å…ˆæŠŠä¿¡æ¯ä¸¢è¿›ç›’å­é‡Œï¼Œå†ç”¨ğŸ”‘é”ä¸Šç›’å­ï¼Œå‘é€ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯ç”¨ğŸ”‘æ‰“å¼€ç›’å­ï¼Œå–å‡ºæ•°æ®ã€‚\nå› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æŒæœ‰çš„é’¥åŒ™æ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¢«ç§°ä¸ºå¯¹ç§°åŠ å¯†ã€‚åœ¨åŠ å¯†çš„åœºæ™¯ä¸‹ï¼Œé’¥åŒ™ä¸€èˆ¬è¢«ç§°ä¸ºå¯†é’¥\nåœ¨ç½‘ç»œåœºæ™¯é‡Œï¼Œå¯¹ç§°åŠ å¯†æ˜¯ä¸å¯å–çš„ã€‚åªè¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼ è¾“å¯†é’¥çš„æ—¶å€™è¢«çªƒå–ï¼Œé‚£ä¹ˆåŒæ–¹çš„åŠ å¯†å°±å¤±æ•ˆäº†ã€‚å› ä¸ºæ˜¯ç”¨åŒä¸€ä¸ªå¯†é’¥æ¥åŠ å¯†è§£å¯†ï¼Œæˆ‘æ‹¿èµ°äº†ä½ çš„é’¥åŒ™ï¼Œè‡ªç„¶å°±èƒ½æ‰“å¼€ä½ è¿™æŠŠé”ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¯†é’¥çš„ä¼ è¾“ä¹Ÿéœ€è¦åŠ å¯†ã€‚ä½†æ˜¯è¿™åˆå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘éƒ½æ²¡æœ‰ä½ çš„å¯†é’¥ï¼Œæˆ‘æ€ä¹ˆè§£å¯†ä½ å‘è¿‡æ¥çš„å¯†é’¥ä¿¡æ¯ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå…ˆæœ‰è›‹è¿˜æ˜¯å…ˆæœ‰é¸¡çš„æ­»å¾ªç¯ï¼\n8.2.2 éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†åœºæ™¯ä¸‹ï¼Œä¼šæœ‰ä¸€ä¸ªå…¬é’¥å’Œç§é’¥\n\nç§é’¥å¯¹æ•°æ®åŠ å¯†ï¼Œå˜æˆå¯†æ–‡\nå…¬é’¥å¯¹æ•°æ®è§£å¯†ï¼Œå˜æˆæ˜æ–‡\n\näºŒè€…ä¹Ÿå¯ä»¥åè¿‡æ¥\n\nç§é’¥å¯¹æ•°æ®è§£å¯†\nå…¬é’¥å¯¹æ•°æ®åŠ å¯†\n\nå…¶ä¸­æœ€å¸¸ç”¨çš„éå¯¹ç§°åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨gitçš„sshæ“ä½œä¸­ä½¿ç”¨è¿‡çš„rsaå¯†é’¥ï¼Œå…¶ä¸­å°±æœ‰ä¸€ä¸ª.pemå…¬é’¥å’Œä¸€ä¸ªç§é’¥ã€‚æˆ‘ä»¬å°†å…¬é’¥æä¾›ç»™githubï¼Œç§é’¥ä¿å­˜åˆ°æœ¬åœ°ï¼Œå°±èƒ½å®ç°æ— å¯†ç ä¸Šä¼ æ•°æ®åˆ°gitä»“åº“ã€‚\n\nä½†æ˜¯éå¯¹ç§°åŠ å¯†è¿˜æ˜¯ä¼šå­˜åœ¨ä¸­é—´äººæ”»å‡»çš„é—®é¢˜ã€‚å…ˆçœ‹å¦‚ä¸‹å›¾ï¼Œä½ åº”è¯¥èƒ½å‘ç°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªé‡è¦çš„ç¯èŠ‚ï¼Œå°±æ˜¯æœåŠ¡ç«¯è¦æŠŠå…¬é’¥å‘é€ç»™å®¢æˆ·ç«¯\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œå…¬é’¥æ˜¯å…¬å¼€ä¼ è¾“ç»™å®¢æˆ·ç«¯çš„ï¼Œä¹Ÿå°±æ˜¯åç»­æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯ï¼Œéƒ½å¯ä»¥è¢«å…¶ä»–äººç”¨è¿™ä¸ªå…¬é’¥è§£æå‡ºæ¥ï¼›\næ•´ä¸ªç¯èŠ‚ä¸­ï¼Œåªåšåˆ°äº†å®¢æˆ·ç«¯å‘é€ç»™æœåŠ¡å™¨çš„ä¿¡æ¯å®‰å…¨ï¼Œå› ä¸ºåªæœ‰æœåŠ¡å™¨æ‹¥æœ‰ç§é’¥ï¼Œèƒ½è§£å¯†å‡ºæ•°æ®ã€‚ï¼ˆå•é¡¹æ•°æ®å®‰å…¨ï¼‰\n8.2.3 åŒéå¯¹ç§°è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨åŒéå¯¹ç§°å¯†é’¥åŠ å¯†çš„æ–¹å¼ï¼æ—¢ç„¶éå¯¹ç§°åªèƒ½ä¿è¯å•æ–¹çš„æ•°æ®å®‰å…¨ï¼Œé‚£ä½¿ç”¨ä¸¤ä¸ªéå¯¹ç§°ï¼Œä¸å°±èƒ½ä¿è¯åŒæ–¹æ•°æ®å®‰å…¨äº†å˜›ï¼\n\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢å…¬é’¥a&#39; å’Œ b&#39;\nå®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘ä¿¡æ¯ï¼šå…ˆç”¨a&#39;å¯¹æ•°æ®åŠ å¯†ï¼Œå†å‘é€ï¼›åªèƒ½ç”±æœåŠ¡å™¨è§£å¯†ï¼Œå› ä¸ºåªæœ‰æœåŠ¡å™¨æœ‰ç§é’¥a\næœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘ä¿¡æ¯ï¼šå…ˆç”¨b&#39;å¯¹æ•°æ®åŠ å¯†ï¼Œå†å‘é€ï¼›åªèƒ½ç”±å®¢æˆ·ç«¯è§£å¯†ï¼Œå› ä¸ºåªæœ‰å®¢æˆ·ç«¯æœ‰ç§é’¥b\n\n\nå› ä¸ºä¸¤ä»½ç§é’¥éƒ½åªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è‡ªå·±æ‹¥æœ‰ï¼Œæ‰€ä»¥é»‘å®¢æ²¡æœ‰åŠæ³•è¿›è¡Œæ•°æ®çš„çªƒå–ï¼Œä¹Ÿå°±ä¿è¯äº†æ•°æ®çš„å®‰å…¨ã€‚\nå³ä¾¿ä¸­é—´äººæ›¿æ¢äº†äº¤æ¢çš„å…¬é’¥ï¼Œä¹Ÿä¼šå› ä¸ºåç»­çš„é€šä¿¡ï¼Œå®¢æˆ·ç«¯oræœåŠ¡ç«¯æœ¬åœ°çš„ç§é’¥æ— æ³•æ­£å¸¸è§£å¯†ï¼Œè€Œå‘ç°æ•°æ®è¢«çªƒå–ï¼\nä½†æ˜¯ä½†æ˜¯ï¼Œè¿™æ ·å·¦è¿˜ç®—æœ‰å¾ˆå¤§çš„ç¼ºç‚¹\n\næ•ˆç‡å¤ªä½ï¼ˆéå¯¹ç§°åŠ å¯†è§£å¯†è´Ÿè½½å¤ªé«˜ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œç‰¹å®šåœºæ™¯ä¸‹æ— æ³•æ»¡è¶³è¦æ±‚ï¼‰\nä¾æ—§å¯èƒ½å­˜åœ¨å®‰å…¨é—®é¢˜\n\n8.2.4 éå¯¹ç§°+å¯¹ç§°\næœåŠ¡ç«¯å…·æœ‰éå¯¹ç§°å…¬é’¥Så’Œç§é’¥Sâ€™\nå®¢â¼¾ç«¯å‘èµ·è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å…¬é’¥S\nå®¢â¼¾ç«¯åœ¨æœ¬åœ°ç”Ÿæˆå¯¹ç§°å¯†é’¥C, é€šè¿‡å…¬é’¥SåŠ å¯†, å‘é€ç»™æœåŠ¡å™¨.\nç”±äºä¸­é—´äººæ²¡æœ‰ç§é’¥ï¼Œå³ä½¿æˆªè·äº†æ•°æ®ï¼Œä¹Ÿæ— æ³•è¿˜åŸå‡ºå†…éƒ¨çš„åŸæ–‡ï¼Œä¹Ÿå°±æ— æ³•è·å–åˆ°å¯¹ç§°å¯†é’¥\næœåŠ¡å™¨é€šè¿‡ç§é’¥S&#39;è§£å¯†ï¼Œè¿˜åŸå‡ºå®¢æˆ·ç«¯å‘é€çš„å¯¹ç§°å¯†é’¥Cï¼Œå¹¶ä¸”ä½¿ç”¨è¿™ä¸ªå¯¹ç§°å¯†é’¥åŠ å¯†ç»™å®¢æˆ·ç«¯å‘é€çš„å“åº”æ•°æ®\nåç»­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½é‡‡ç”¨å¯†é’¥Cæ¥è¿›è¡Œå¯¹ç§°åŠ å¯†é€šä¿¡\n\nå› ä¸ºå¯¹ç§°å¯†é’¥Cåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯åŠ å¯†çš„ï¼Œåªæœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çŸ¥é“å¯†é’¥æ˜¯ä»€ä¹ˆï¼Œä¹Ÿå°±å®ç°äº†æ•°æ®çš„å®‰å…¨é€šä¿¡ï¼\n8.3 æ•°æ®æ‘˜è¦ï¼ˆæŒ‡çº¹ï¼‰æ•°å­—æŒ‡çº¹(æ•°æ®æ‘˜è¦)ï¼Œ å…¶åŸºæœ¬åŸç†æ˜¯åˆ©â½¤å•å‘æ•£åˆ—å‡½æ•°(Hashå‡½æ•°)å¯¹ä¿¡æ¯è¿›è¡Œè¿ç®—ï¼Œç”Ÿæˆâ¼€ä¸²å›ºå®šé•¿åº¦çš„æ•°å­—æ‘˜è¦ã€‚\nå¸¸è§çš„æ‘˜è¦ç®—æ³•æœ‰MD5/SHA1/SHA256/SHA512ç­‰ï¼›\næ•°å­—æŒ‡çº¹å¹¶ä¸æ˜¯â¼€ç§åŠ å¯†æœºåˆ¶ï¼Œä½†å¯ä»¥ç”¨æ¥åˆ¤æ–­æ•°æ®æœ‰æ²¡æœ‰è¢«çªœæ”¹ï¼Œäº¦æˆ–è€…æ˜¯ä¸‹è½½çš„æ•°æ®åŒ…æœ‰æ²¡æœ‰å‡ºç°æŸåã€‚\n\nåŒä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œç”¨åŒä¸€ä¸ªæ–¹æ³•ç”Ÿæˆçš„æ•°æ®æ‘˜è¦æ˜¯ä¸€è‡´çš„\nä¸åŒæ–‡ä»¶ç”Ÿæˆçš„æ•°æ®æ‘˜è¦å¯èƒ½ä¼šæ’è½¦ï¼Œä½†å‡ ç‡æä½ï¼Œå¯ä»¥è®¤ä¸ºå…·æœ‰å”¯ä¸€æ€§ï¼\næˆ‘ä»¬æ— æ³•ç”¨æ•°æ®æ‘˜è¦åæ¨å‡ºæ•°æ®å†…å®¹ï¼ˆæ€ä¹ˆå¯èƒ½ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¨æµ‹å‡ºåŸæœ¬çš„å†…å®¹å‘¢ï¼Ÿé‚£æ ·è¿˜å­˜æ”¾æºæ–‡ä»¶å¹²å“ˆï¼ŸğŸ˜‚ï¼‰\n\næ•°æ®æ‘˜è¦åœ¨ç½‘ç›˜äº§å“ä¸­ä¹Ÿæœ‰ä½¿ç”¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ç™¾åº¦äº‘ç›˜ã€é˜¿é‡Œäº‘ç›˜çš„æ—¶å€™ï¼Œä¼šé‡åˆ°ä¸€ä¸ªå¤§çš„èµ„æºæ–‡ä»¶åªç”¨äº†çŸ­çŸ­å‡ ç§’å°±æˆåŠŸä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æƒ…å†µã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯çœŸçš„ç”¨å‡ ç§’å°±æŠŠæ•°æ®ä¼ è¾“ä¸Šå»äº†ï¼Œè€Œæ˜¯ç»å†äº†ä»¥ä¸‹é˜¶æ®µ\n\nç½‘ç›˜å®¢æˆ·ç«¯å¯¹æœ¬åœ°æ–‡ä»¶ç”Ÿæˆæ•°æ®æ‘˜è¦\nç”Ÿæˆåï¼Œåˆ¤æ–­æœåŠ¡å™¨ç«¯å·²æœ‰æ–‡ä»¶ä¸­ï¼Œæ˜¯å¦æœ‰åŒè¯¥æ•°æ®æ‘˜è¦ç›¸åŒçš„æ–‡ä»¶\nå¦‚æœæœ‰ï¼Œä»£è¡¨è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨äº†äº‘ç›˜çš„æœåŠ¡å™¨ä¸­\næœåŠ¡å™¨å°†è¯¥æ–‡ä»¶ç»™ä½ çš„è´¦æˆ·å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥&#x2F;ç¡¬é“¾æ¥ï¼Œå°±å®ç°äº†&quot;å¦™ä¼ &quot;\nå¦‚æœæ²¡æœ‰ï¼Œåˆ™è€è€å®å®çš„ä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶åˆ°äº‘ç›˜\n\näº‘ç›˜å‚å®¶è¿™ä¹ˆåšçš„åŸå› å¾ˆç®€å•ï¼šé¿å…åŒä¸€ä»½æ–‡ä»¶è¢«å¤šæ¬¡å­˜å‚¨ã€‚å½“ä¸‹ç½‘ç›˜ç»™ç”¨æˆ·çš„å…è´¹ç©ºé—´åŠ¨åˆ™ä¸ŠTï¼Œå¦‚æœæ‰€æœ‰æ–‡ä»¶éƒ½é‡å¤ä¿å­˜ï¼Œé‚£å¯¹äºäº‘æœåŠ¡å™¨å‚å®¶æ¥è¯´ï¼Œèµ„æºæ¶ˆè€—å¤ªå¤§äº†ã€‚\nè¿™ä¸ªåšæ³•å¹¶ä¸ä¼šäº§ç”Ÿæ•°æ®éšç§é—®é¢˜ï¼Œä¸€èˆ¬åªæœ‰ç”µå½±ç­‰èµ„æºæ–‡ä»¶æ‰æœ‰å¯èƒ½å¦™ä¼ æˆåŠŸã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€äº›â€œå…¶ä»–æ‰‹æ®µâ€ï¼Œæ¯”å¦‚æŠŠèµ„æºæ‰“ä¸ªå‹ç¼©åŒ…ï¼Œå¹¶åœ¨å‹ç¼©åŒ…ä¸­éšä¾¿ä¸¢å¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼Œè®©æ–‡ä»¶çš„æ•°æ®æŒ‡çº¹å’Œå·²æœ‰èµ„æºä¸ç›¸åŒï¼Œå°±ä¸ä¼šè¿›è¡Œå¦™ä¼ äº†ã€‚\n\nè¿™æ ·åšè¿˜æœ‰å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯åŸèµ„æºå› ä¸ºè¿è§„è¢«bançš„æ—¶å€™ï¼Œä½ çš„èµ„æºä¸ä¼šè¢«è¿åğŸ˜‚\n\n8.4 æ•°å­—ç­¾åå¯¹æ•°æ®æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œç”Ÿæˆçš„å†…å®¹è¢«ç§°ä¸ºæ•°å­—ç­¾å\n8.5 ä¸­é—´äººæ”»å‡»ä¸­é—´äººæ”»å‡»ï¼ˆMan-in-the-MiddleAttackï¼‰ï¼Œç®€ç§°MITMæ”»å‡»\nä»¥8.2.2çš„å•éå¯¹ç§°åŠ å¯†ä¸ºä¾‹ï¼Œä¸­é—´äººå¯ä»¥åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­è¿›è¡Œå·æ¢æ¢æŸ±ï¼Œçªƒå–åŒæ–¹çš„ä¿¡æ¯ã€‚å¦‚ä¸‹å›¾ï¼š\n\né€è¿‡è¿™ä¸ªæ —å­ğŸŒ°ï¼Œå®é™…ä¸Šï¼Œå¦‚æœä¸­é—´äººåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¼€å§‹é€šä¿¡ä¹‹å‰å°±æ¥çªƒå¬å¹¶å‡†å¤‡æ¢æŸ±äº†ï¼Œä»–å°±æœ‰å¯èƒ½æ›¿æ¢åŒæ–¹å¯†é’¥ï¼Œä»è€Œè§£å¯†åŒæ–¹å‘é€çš„ä¿¡æ¯ï¼\næœ€é‡è¦çš„ä¸€ç‚¹ï¼Œæ˜¯å®¢æˆ·ç«¯oræœåŠ¡ç«¯éƒ½æ²¡æœ‰åŠæ³•è¯æ˜ï¼Œå½“å‰çš„å…¬é’¥æ˜¯ç›´æ¥ä»æœåŠ¡ç«¯orå®¢æˆ·ç«¯å‘æ¥çš„ï¼Œå®ƒä»¬æ²¡æœ‰åŠæ³•æ£€éªŒå…¬é’¥çš„æƒå¨æ€§ï¼Œåªèƒ½è¢«åŠ¨æ¥å—ã€‚ç”±æ­¤ç»™ä¸­é—´äººå·æ¢æ¢æŸ±æä¾›äº†å¯èƒ½ã€‚\nè¿™æ—¶å€™ï¼Œå°±éœ€è¦å¼•å…¥CAæœºæ„å’ŒCAè¯ä¹¦äº†ğŸ‘‡\n8.6 CAè¯ä¹¦æ‰€è°“CAè¯ä¹¦ï¼Œæ˜¯ç”±CAæœºæ„é¢å‘çš„æƒå¨è¯ä¹¦ã€‚CAæœºæ„åœ¨é¢å‘è¯ä¹¦æ—¶ï¼Œä¼šåœ¨è¯ä¹¦ä¸­é™„å¸¦ä¸Šè¯¥ç«™ç‚¹çš„åŸŸåï¼Œä»¥åŠç”³è¯·äººï¼ˆä¼ä¸šï¼‰çš„ç›¸å…³ä¿¡æ¯\n\nCAæœºæ„ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„ç§é’¥å’Œå…¬é’¥ï¼Œå…¶å…¬é’¥å‘æ‰€æœ‰äººå…¬å¼€\nCAæœºæ„çš„ç§é’¥ç”±å…¶è‡ªå·±ä¿å­˜ï¼ˆç§é’¥ä¸€å®šä¸èƒ½æ³„éœ²ï¼‰\nå½“ä¸‹çš„æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿéƒ½ä¼šå†…ç½®è®¤å¯çš„CAï¼›åªæœ‰è¢«è®¤å¯çš„CAï¼Œæ‰èƒ½ä¸ºç«™ç‚¹æä¾›sslè¯ä¹¦æœåŠ¡\n\nåœ¨æˆ‘ä»¬windowsæœ¬åœ°å°±èƒ½çœ‹åˆ°å½“å‰æ“ä½œç³»ç»Ÿè®¤å¯çš„CAæœºæ„å…¶å…¬é’¥ï¼›åœ¨edgeæµè§ˆå™¨ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’é€‰æ‹©ï¼Œè¿›å…¥è®¾ç½®ï¼Œåœ¨é€‰æ‹©éšç§é¡µé¢ï¼Œæ‰¾åˆ°ç®¡ç†è¯ä¹¦\n\nç‚¹å‡»å®ƒï¼Œå°±èƒ½çœ‹åˆ°å½“å‰æœ¬åœ°è®¤å¯çš„CA\n\n8.6.1 sslè¯ä¹¦åŠ å¯†åŸç†å½“ä¸€ä¸ªç«™ç‚¹è·å–äº†sslè¯ä¹¦åï¼Œåœ¨å‘ç”¨æˆ·å‘é€sslè¯ä¹¦ä¸­åŒ…å«çš„å…¬é’¥çš„åŒæ—¶ï¼Œè¿˜ä¼šå‘é€ä¸€ä¸ªç”±CAæœºæ„å¯¹sslè¯ä¹¦å…¬é’¥åšçš„æ•°å­—ç­¾å\n\nsslè¯ä¹¦å…¬é’¥çš„æ•°å­—ç­¾åAï¼Œé€šè¿‡CAæœºæ„çš„ç§é’¥è¿›è¡ŒåŠ å¯†\nsslè¯ä¹¦çš„å…¬é’¥B\n\nå½“å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä»½ä¿¡æ¯ä¹‹åï¼Œä¼šé‡‡ç”¨hashå‡½æ•°å¯¹æ”¶åˆ°çš„sslè¯ä¹¦å…¬é’¥è¿›è¡Œæ•°å­—ç­¾åï¼Œå¾—åˆ°ä¸€ä¸ªæœ¬åœ°ç”Ÿæˆçš„æ•°å­—ç­¾åC\nå†ç”¨CAæœºæ„çš„å…¬é’¥å¯¹ä¼ è¾“è¿‡æ¥çš„æ•°å­—ç­¾åAè¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°æ•°å­—ç­¾åAçš„æ˜æ–‡ï¼›åˆ¤æ–­ç”±CAæœºæ„ç”Ÿæˆçš„sslå…¬é’¥æ•°å­—ç­¾åAæ˜¯å¦å’Œæœ¬åœ°ç”Ÿæˆçš„æ•°å­—ç­¾åCç›¸åŒï¼›\n\nå¦‚æœç›¸åŒï¼Œåˆ™ä»£è¡¨è¯ä¹¦æ­£ç¡®ï¼\nä¸ç›¸åŒï¼Œä»£è¡¨è¯ä¹¦å‡ºç°é”™è¯¯ï¼\n\nç”»ä¸ªå›¾ï¼Œå¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™æ ·\n\nç”±äºå½“ä¸‹å‘é€çš„æ•°æ®åŒ…ä¸­ï¼ŒåŒæ—¶å­˜åœ¨sslå…¬é’¥çš„æ˜æ–‡+ç”±CAæœºæ„åŠ å¯†åçš„æ•°å­—ç­¾åï¼Œä¸­é—´äººæ— æ³•è¿›è¡Œä»»ä½•æ”»å‡»ä¿®æ”¹ï¼\n\nè‹¥ä¿®æ”¹sslå…¬é’¥ï¼Œç”±äºä¸­é—´äººæ²¡æœ‰CAæœºæ„çš„ç§é’¥ï¼Œæ— æ³•å¯¹ä¿®æ”¹åçš„sslå…¬é’¥ç”Ÿæˆå¯¹åº”çš„åŠ å¯†åæ•°å­—ç­¾å\nè‹¥ä½¿ç”¨CAå…¬é’¥è§£å¯†æ•°å­—ç­¾ååä¿®æ”¹â€¦â€¦ä¾æ—§ä¼šå› ä¸ºæ²¡æœ‰CAæœºæ„ç§é’¥ï¼Œæ— æ³•æŠŠä¿®æ”¹åçš„ç­¾ååŠ å¯†å›å»\nå¦‚æœä¸­é—´äººç”¨è‡ªå·±çš„ç§é’¥ç”Ÿæˆä¸€ä¸ªæ•°å­—ç­¾åï¼Œä½†æˆ‘ä¸è®¤è¯†ä½ è¿™ä¸ªCAï¼Œä¹Ÿä¸çŸ¥é“ä½ çš„å…¬é’¥æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆè§£å¯†ä½ çš„ä¿¡æ¯å‘¢ï¼Ÿ\n\nç»¼ä¸Šï¼Œä¸­é—´äººè¦æƒ³å·æ¢æ¢æŸ±ï¼Œåªæœ‰ä¸€ä¸ªåŠæ³•äº†ï¼Œé‚£å°±æ˜¯æ‹¿ä¸€ä¸ªçœŸçš„è¯ä¹¦æ•´ä½“æ›¿æ¢æ‰è¿™ä¸ªæ•°æ®åŒ…ã€‚\nå¯æ˜¯sslè¯ä¹¦ä¸­è¿˜åŒ…å«äº†åŸŸåã€ç«™ç‚¹ä¸»ä½“ç­‰å„ç±»ä¿¡æ¯ï¼Œæˆ‘å½“ä¸‹è®¿é—®çš„æ˜¯baidu.comï¼Œç»“æœæ”¶åˆ°çš„è¯ä¹¦æ˜¯qq.comçš„ï¼Œé‚£è‚¯å®šæœ‰é—®é¢˜å•Šï¼æµè§ˆå™¨ä¼šç›´æ¥æ‹’ç»è®¿é—®ï¼ğŸ˜‚\nå½“æˆ‘ä»¬è®¿é—®ä¸€äº›ç½‘ç«™ï¼Œæµè§ˆå™¨æŠ¥sslè¯ä¹¦è¿‡æœŸï¼Œä¹Ÿæ˜¯ä¼šå‡ºç°ä¸€å®šçš„å®‰å…¨é—®é¢˜çš„ï¼å¦‚æœä¸€ä¸ªç½‘ç«™æ²¡æœ‰ä½¿ç”¨httpsï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªç½‘ç«™ä¸Šè¿›è¡Œç”¨æˆ·ç™»å½•ç­‰æ•æ„Ÿæ“ä½œçš„æ—¶å€™ï¼Œä¸€å®šä¸è¦è®¾ç½®å’Œä½ å…¶ä»–å¹³å°ç›¸åŒçš„å¯†ç ï¼\n\nå½“ç„¶ï¼Œå¦‚æœæŸä¸ªç½‘é¡µæœ¬æ¥å°±åªæ˜¯æä¾›æ–‡ä»¶å…¬å¼€ä¸‹è½½åŠŸèƒ½çš„ï¼Œæ¯”å¦‚ä¸‹è½½linuxç³»ç»Ÿçš„isoé•œåƒï¼Œé‚£ä¹ˆå®ƒä¸å¥—ç”¨httpsä¹Ÿæ˜¯æƒ…æœ‰å¯åŸçš„ï¼Œå› ä¸ºå‹æ ¹æ²¡æœ‰å¿…è¦ï¼\n\n8.6.2 sslè¯ä¹¦+éå¯¹ç§°+å¯¹ç§°æœ‰äº†ä¸Šé¢è¿™ä¸ªä¸èƒ½è¢«ç¯¡æ”¹çš„sslè¯ä¹¦å…¬é’¥ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨éå¯¹ç§°+å¯¹ç§°åŠ å¯†çš„æ–¹å¼è¿›è¡Œé€šä¿¡äº†\n\nå®¢æˆ·ç«¯æ”¶åˆ°sslè¯ä¹¦ï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæœ¬åœ°ç”Ÿæˆçš„å¯†é’¥Dï¼ˆä½¿ç”¨sslè¯ä¹¦å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼‰\næœåŠ¡ç«¯æ”¶åˆ°å¯†é’¥Dçš„åŠ å¯†ä¿¡æ¯ï¼Œä½¿ç”¨sslè¯ä¹¦çš„ç§é’¥è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°å¯†é’¥D\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä½¿ç”¨å¯†é’¥Dè¿›è¡Œå¯¹ç§°åŠ å¯†é€šä¿¡\n\nè¿™æ ·å³è§£å†³äº†å®‰å…¨é—®é¢˜ï¼Œåˆè§„é¿äº†éå¯¹ç§°åŠ å¯†çš„æ•ˆç‡é—®é¢˜ï¼Œä¸€ä¸¾å¤šå¾—ï¼\n9.Content-Type9.1 é—®é¢˜ä¹‹å‰å†™çš„httpæœåŠ¡å™¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ï¼Œå°±æ˜¯Content-Typeæ²¡èƒ½åšåˆ°æ ¹æ®æ–‡ä»¶çš„æ ¼å¼è¿›è¡Œè‡ªå®šä¹‰ä¿®æ”¹\né»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœindex.htmlä¸­æ²¡æœ‰æŒ‡å®šiconçš„è·¯å¾„ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è¯·æ±‚æ ¹è·¯å¾„ä¸‹çš„favicon.icoï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œåˆ™ä¸æ˜¾ç¤ºç«™ç‚¹å›¾æ ‡ã€‚\nå¦‚æœåœ¨index.htmlæœ‰æŒ‡å®šç«™ç‚¹iconçš„è·¯å¾„ï¼Œåˆ™ä¼šè¯·æ±‚å¯¹åº”è·¯å¾„çš„å›¾ç‰‡ã€‚\nå¦‚ä¸‹å›¾ï¼Œæˆ‘åœ¨indexä¸­æŒ‡å®šäº†iconçš„è·¯å¾„\n&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;httpåè®®å­¦ä¹ &lt;/title&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;https://img.musnow.top/i/2022/12/icon.png&quot;&gt;&lt;/head&gt;\n\nä½†æ˜¯æµè§ˆå™¨å»è¯·æ±‚çš„æ—¶å€™ï¼Œè¿”å›çš„æ–‡ä»¶ç±»å‹ä¾æ—§æ˜¯textï¼ˆå› ä¸ºå·²ç»å†™æ­»äº†ï¼‰\n\næœ€ç»ˆç»“æœå°±æ˜¯ï¼Œé…ç½®çš„iconæ— æ•ˆï¼Œä¾æ—§ä¸æ˜¾ç¤ºç«™ç‚¹å›¾æ ‡\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æœåŠ¡ç«¯ç»™è¿”å›çš„æ–‡ä»¶æ·»åŠ ä¸Šæ­£ç¡®çš„Content-Type\n9.2 ä»£ç ä¸ºäº†è®¿é—®æ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹ï¼Œæˆ‘åœ¨tcpServerçš„ç±»ä¸­æ–°å¢äº†ä¸€ä¸ªmapï¼Œç”¨äºæ–‡ä»¶åç¼€å’Œå›¾æ ‡ç±»å‹çš„å¯¹ç…§ã€‚æ¯æ¯çœ‹åˆ°è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘éƒ½æƒ³æ„Ÿæ…¨ä¸€ä¸‹ï¼šPythonçš„dictè¿˜æ˜¯æ–¹ä¾¿å¤šäº†ğŸ¤£\nvoid initMap()&#123;    _fileTypeMap.insert(&#123;&quot;html&quot;,&quot;text/html&quot;&#125;);    _fileTypeMap.insert(&#123;&quot;jpg&quot;,&quot;image/jpeg&quot;&#125;);    _fileTypeMap.insert(&#123;&quot;jpeg&quot;,&quot;image/jpeg&quot;&#125;);    _fileTypeMap.insert(&#123;&quot;png&quot;,&quot;image/png&quot;&#125;);    _fileTypeMap.insert(&#123;&quot;gif&quot;,&quot;image/gif&quot;&#125;);    _fileTypeMap.insert(&#123;&quot;ico&quot;,&quot;image/x-icon&quot;&#125;);&#125;// æ–‡ä»¶ç±»å‹å’Œhttpå“åº”å¤´çš„å¯¹ç…§è¡¨map&lt;string,string&gt; _fileTypeMap;\n\nåœ¨è®¾ç½®Content-Typeçš„æ—¶å€™ï¼Œå…ˆä»pathä¸­åˆ†ç¦»å‡ºå®¢æˆ·ç«¯è¯·æ±‚çš„æ–‡ä»¶ç±»å‹\n// è·å–æ–‡ä»¶çš„åç¼€string getFileType(const string&amp; path)&#123;    size_t i = path.rfind(&#x27;.&#x27;);    if(i!=string::npos)//æ‰¾åˆ°äº†    &#123;        string filetype(path,i+1);//è·å–å‡ºæ–‡ä»¶ç±»å‹        logging(DEBUG,&quot;Path: %s | fileType: %s&quot;,path.c_str(),filetype.c_str()); // æ‰“å°ç”¨ä½œdebug        return filetype;    &#125;    return &quot;&quot;; //æ²¡æœ‰åç¼€&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº›httpè¯·æ±‚æ˜¯è¿™æ ·çš„\nhttps://web.musnow.top/about/\n\nåç«¯ä¼šæ”¶åˆ°è¿™æ ·çš„path\n/about/\n\nè¿™ä¸ªpathé‡Œé¢å¹¶æ²¡æœ‰æ–‡ä»¶åï¼Œè€Œæœ¬æ–‡å‰é¢æåˆ°è¿‡ï¼Œå¦‚æœè¯·æ±‚çš„é“¾æ¥ä¸­æ²¡æœ‰æŒ‡æ˜æ–‡ä»¶ï¼Œé‚£å°±ç»™å®¢æˆ·è¿”å›å¯¹åº”è·¯å¾„ä¸‹çš„index.htmlæ–‡ä»¶ã€‚å¦‚æœè¿™ä¸ªè·¯å¾„ä¸‹æ²¡æœ‰htmlæ–‡ä»¶ï¼Œåˆ™è¿”å›404ã€‚è¿™ä¸€æ­¥åœ¨åˆ†ç¦»è¯·æ±‚å¤´ä¸­çš„pathæ—¶å·²ç»åšäº†\n// å¯¹pathè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœpathæ˜¯ä»¥/ç»“å°¾çš„ï¼Œåˆ™åœ¨pathä¸­è¿½åŠ index.htmlæ–‡ä»¶åif(path[path.size()-1] == &#x27;/&#x27;) &#123;    path += HOME_PAGE; //åŠ ä¸Šè¢«éšè—çš„index.htmlæ–‡ä»¶å&#125;\n\nå›åˆ°æ­£é¢˜ï¼Œåœ¨è·å–åˆ°æ–‡ä»¶åç¼€åï¼Œå°±å¯ä»¥åœ¨mapé‡Œé¢æŸ¥æ‰¾å¯¹åº”çš„content-typeäº†\n// è¿½åŠ æ­£ç¡®çš„æ–‡ä»¶ç±»å‹Content-Typeresponse += &quot;Content-Type: &quot;;string contentType = &quot;text/plain&quot;;auto it = fileTypeMap.find(fileType);if(it != fileTypeMap.end())&#123;    contentType = (*it).second;&#125;response += contentType;response += &quot;\\r\\n&quot;;\n\nä½†æ˜¯ï¼Œè¿™æ ·è¿˜æ˜¯å‡ºç°äº†é—®é¢˜ï¼Œå›¾ç‰‡æ²¡åŠæ³•æ­£å¸¸åŠ è½½\n\nF12æ‰“å¼€å¼€å‘è€…é¢æ¿ï¼Œå¯ä»¥çœ‹åˆ°æœåŠ¡å™¨è¿”å›çš„å“åº”å¤´æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯ä¾æ—§æ— æ³•æ˜¾ç¤ºå‡ºå›¾ç‰‡\n\nè¿™æ˜¯å› ä¸ºè¯»å–å›¾ç‰‡å’Œè¯»å–htmlæ–‡ä»¶çš„æ“ä½œæ˜¯ä¸ä¸€æ ·ã€‚åœ¨è¯»å–htmlæ–‡ä»¶çš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯æŒ‰è¡Œè¯»å–çš„ç­–ç•¥\n// è¯»å–txtæ–‡ä»¶string readTxtFile(const string&amp; file_path)&#123;    // å¦‚æœæ˜¯æ–‡ä»¶å­˜åœ¨ä½†æ˜¯æ‰“å¼€å¤±è´¥äº†ï¼Œåº”è¯¥è¿”å›50xä»£è¡¨æœåŠ¡å™¨å¤„ç†é”™è¯¯    // tcpæ˜¯é¢å‘å­—èŠ‚æµçš„ï¼Œæ–‡ä»¶éœ€è¦ç”¨äºŒè¿›åˆ¶æ‰“å¼€    ifstream in(file_path, ios::binary);    if(!in.is_open()) //æ–‡ä»¶æ‰“å¼€å¤±è´¥    &#123;        return &quot;503&quot;;//æ–‡ä»¶æ‰“å¼€å¤±è´¥    &#125;    // å†…å®¹    string content;    string line;    while(getline(in, line))    &#123;        content += line;    &#125;    in.close();    return content;&#125;\n\nä½†æ˜¯å›¾ç‰‡æ–‡ä»¶åº”è¯¥éœ€è¦ä¸€ä¸ªå®Œæ•´çš„äºŒè¿›åˆ¶æµï¼Œè€Œä¸æ˜¯æŒ‰è¡Œè¯»å–\n// è¯»å–å›¾ç‰‡æ–‡ä»¶string readImgFile(const string&amp; file_path)&#123;    ifstream file(file_path, ios::binary);    // æ‰“å¼€å¤±è´¥ï¼Œ503    if (!file.is_open()) &#123;        return &quot;503&quot;;    &#125;    ostringstream ss;    ss &lt;&lt; file.rdbuf();    string content = ss.str();    file.close();    return content;&#125;\n\nä¸ºäº†åŒºåˆ«å›¾ç‰‡å’Œhtmlæ–‡ä»¶ï¼Œæˆ‘æ–°å¢äº†ä¸€ä¸ªç”¨äºåˆ¤æ–­æ–‡ä»¶åç¼€çš„å‡½æ•°\nconst string imageType[] = &#123;&quot;png&quot;,&quot;jpg&quot;,&quot;gif&quot;,&quot;jpeg&quot;&#125;; // å›¾ç‰‡ç±»å‹// åˆ¤æ–­è¯·æ±‚å¤´ä¸­æ–‡ä»¶ç±»å‹æ˜¯å¦ä¸ºå›¾ç‰‡bool isImg(const string&amp; fileType)&#123;    for(auto&amp; t: imageType)    &#123;        // å¦‚æœå®Œå…¨ä¸€è‡´        if(fileType == t)        &#123;            return true;        &#125;    &#125;    return false;&#125;\n\næœ€ç»ˆåˆå¹¶æˆåŒä¸€ä¸ªå‡½æ•°\nstring readFile(const string &amp;file_path,bool is_img = false)&#123;    //å…¶å®è¿™é‡Œåº”è¯¥åˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¸€ç§æ˜¯æ–‡ä»¶æ‰“å¼€å¤±è´¥äº†    //å¦‚æœæ˜¯æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåº”è¯¥è¿”å›404    if(access(file_path.c_str(),0)!=0)//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›0    &#123;//windowsä¸‹ç›¸åŒä½œç”¨çš„æ¥å£ä¸º_accessï¼Œå¤´æ–‡ä»¶io.h        return &quot;404&quot;;//æ–‡ä»¶ä¸å­˜åœ¨    &#125;    // è¯»å–å¯¹åº”çš„æ–‡ä»¶    if(!is_img)&#123;        return readTxtFile(file_path);    &#125;    else&#123;        return readImgFile(file_path);    &#125;&#125;\n\nåœ¨æœåŠ¡å‡½æ•°é‡Œé¢ï¼Œä¹Ÿåšå‡ºäº†åŒºåˆ«\n// è·å–æ–‡ä»¶çš„åç¼€string fileType = getFileType(path);// æ‰“å¼€æ–‡ä»¶string content = readFile(resources,isImg(fileType));\n\nå†æ¬¡æµ‹è¯•ï¼ŒæˆåŠŸï¼\n\nä¸»é¡µhtmlæ–‡ä»¶ä¸­é…ç½®çš„logä¹Ÿæ­£å¸¸æ˜¾ç¤ºå‡ºæ¥äº†ï¼ï¼ˆå’ŒåŸæ¥çš„é¢œè‰²ä¸ä¸€æ ·ï¼‰\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["Linux","è®¡ç®—æœºç½‘ç»œ","http"]},{"title":"ã€ç½‘ç»œã€‘http(s)åè®® | content-lengthè¯¦è§£ | è½¬è½½","url":"/posts/1805390619/","content":"æœ¬æ–‡é€šè¿‡ä¸€ä¸ªçº¿ä¸Šå®ä¾‹ï¼Œè¯¦ç»†ä»‹ç»httpåè®®ä¸­çš„content-lengthå­—æ®µã€‚\n\n\nå‰è¨€httpåè®®æ˜¯äº’è”ç½‘ä¸­æœ€é‡è¦çš„åè®®ä¹‹ä¸€ï¼Œè™½ç„¶çœ‹ä¸Šå»å¾ˆç®€å•ï¼Œä½†æ˜¯å®é™…ä¸­ç»å¸¸é‡åˆ°é—®é¢˜ï¼Œæˆ‘ä»¬å°±å·²ç»é‡åˆ°å¥½å‡ æ¬¡äº†ã€‚æœ‰é•¿è¿æ¥ç›¸å…³çš„ï¼Œæœ‰æŠ¥æ–‡è§£æç›¸å…³çš„ã€‚å¯¹httpåè®®ä¸èƒ½ä¸€çŸ¥åŠè§£ï¼Œå¿…é¡»é€å½»ç†è§£æ‰è¡Œã€‚\næœ¬æ–‡é€šè¿‡ä¸€ä¸ªçº¿ä¸Šå®ä¾‹ï¼Œè¯¦ç»†ä»‹ç»httpåè®®ä¸­çš„content-lengthå­—æ®µã€‚\né—®é¢˜æˆ‘ä»¬çš„æ‰‹æœºAppåœ¨åšæ›´æ–°æ—¶ä¼šä»æœåŠ¡å™¨ä¸Šä¸‹è½½çš„ä¸€äº›èµ„æºï¼Œä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å°æ–‡ä»¶ï¼Œæ›´æ–°çš„ä»£ç å·®ä¸å¤šæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š\nstatic void update() throws IOException &#123;    URL url = new URL(&quot;http://172.16.59.129:8000/update/test.so&quot;);    HttpURLConnection conn = (HttpURLConnection) url.openConnection();    if(conn.getResponseCode() == 200) &#123;        int totalLength = conn.getContentLength();\tBufferedInputStream in = new BufferedInputStream(conn.getInputStream());\tbyte[] buffer = new byte[512];\tint readLength = 0;\tint length = 0;\twhile((length=in.read(buffer)) != -1) &#123;\t\treadLength += length;\t\t//è¿›åº¦æ¡\t\tSystem.out.println(((float)readLength) /((float)(totalLength)));\t&#125;    &#125;&#125;\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç æ›´æ–°ä¸€ä¸ªsoæ–‡ä»¶ï¼Œå…ˆé€šè¿‡content-lengthè·å–æ–‡ä»¶çš„æ€»å¤§å°ï¼Œç„¶åè¯»Streamï¼Œæ¯è¯»ä¸€æ®µï¼Œå°±è®¡ç®—å‡ºå½“å‰è¯»çš„æ€»å¤§å°ï¼Œé™¤ä»¥content-lengthï¼Œç”¨æ¥æ˜¾ç¤ºè¿›åº¦æ¡ã€‚\nç»“æœweblogicä»10å‡çº§åˆ°12åï¼Œcontent-lengthä¸€ç›´è¿”å›-1ï¼Œè¿™æ ·å°±ä¸èƒ½æ˜¾ç¤ºè¿›åº¦æ¡äº†ï¼Œä½†æ˜¯æ–‡ä»¶æµè¿˜èƒ½æ­£å¸¸è¯»ã€‚æŠŠweblogicé‡å¯äº†ï¼Œä¸€å¼€å§‹è¿˜èƒ½è¿”å›content-lengthï¼Œä¸€ä¼šåˆæ˜¯-1äº†ã€‚\nåŸå› åˆ†æHttpåè®®çš„è¯·æ±‚æŠ¥æ–‡å’Œå›å¤æŠ¥æ–‡éƒ½æœ‰headerå’Œbodyï¼Œbodyå°±æ˜¯ä½ è¦è·å–çš„èµ„æºï¼Œä¾‹å¦‚ä¸€ä¸ªhtmlé¡µé¢ï¼Œä¸€ä¸ªjpegå›¾ç‰‡ï¼Œè€Œheaderæ˜¯ç”¨æ¥åšæŸäº›çº¦å®šçš„ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å•†å®šä¸€äº›ä¼ è¾“æ ¼å¼ï¼Œå®¢æˆ·ç«¯å…ˆè·å–å¤´éƒ¨ï¼Œå¾—çŸ¥ä¸€äº›æ ¼å¼ä¿¡æ¯ï¼Œç„¶åæ‰å¼€å§‹è¯»å–bodyã€‚\n\nå®¢æˆ·ç«¯ï¼š Accept-Encoding:gzip ï¼ˆç»™æˆ‘å‹ç¼©ä¸€ä¸‹ï¼Œæˆ‘ç”¨çš„æ˜¯æµé‡ï¼Œå…ˆä¸‹è½½ä¸‹æ¥æˆ‘å†æ…¢æ…¢è§£å‹å§ï¼‰\næœåŠ¡ç«¯1ï¼šContent-Encoding:null(æ²¡æœ‰Content-Encodingå¤´ã€‚ æˆ‘ä¸ç»™å‹ç¼©ï¼ŒCPUæ²¡ç©ºï¼Œä½ çˆ±è¦ä¸è¦ï¼‰\næœåŠ¡ç«¯2ï¼šContent-Encoding:gzip (ç»™ä½ èŠ‚çœæµé‡ï¼Œå‹ç¼©ä¸€ä¸‹ï¼‰\n\n\nå®¢æˆ·ç«¯ï¼šConnection: keep-alive (å¤§å“¥ï¼Œå’±å¥½ä¸å®¹æ˜“å»ºäº†ä¸ªTCPè¿æ¥ï¼Œä¸‹æ¬¡æ¥ç€ç”¨ï¼‰\næœåŠ¡ç«¯1: Connection: keep-alive ï¼ˆéƒ½ä¸å®¹æ˜“ï¼Œæ¥ç€ç”¨ï¼‰\næœåŠ¡ç«¯2: Connection: close (è°è·Ÿä½ æ¥ç€ç”¨ï¼Œæˆ‘ä»¬è¿™ä¸ªTCPæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œä¸‹æ¬¡å†æ‰¾æˆ‘è¿˜å¾—é‡æ–°è¿)\n\nhttpåè®®æ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸€èˆ¬å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚èµ„æºæ—¶ï¼Œä»¥æœåŠ¡ç«¯ä¸ºå‡†ã€‚è¿˜æœ‰ä¸€äº›headerå¹¶æ²¡æœ‰åå•†çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯æœåŠ¡ç«¯ç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯æŒ‰ä»€ä¹ˆæ¥ã€‚ä¾‹å¦‚ä¸Šè¿°çš„Content-Lengthï¼Œæ˜¯æœåŠ¡ç«¯å‘Šè¯‰å®¢æˆ·ç«¯bodyçš„å¤§å°æœ‰å¤šå¤§ã€‚ä½†æ˜¯ï¼æœåŠ¡ç«¯å¹¶ä¸ä¸€å®šèƒ½å‡†ç¡®çš„æå‰å‘Šè¯‰ä½ bodyæœ‰å¤šå¤§ã€‚æœåŠ¡ç«¯è¦å…ˆå†™headerï¼Œå†å†™bodyï¼Œå¦‚æœè¦åœ¨headeré‡ŒæŠŠbodyå¤§å°å†™è¿›å»ï¼Œå°±å¾—æå‰çŸ¥é“bodyå¤§å°ã€‚å¦‚æœè¿™ä¸ªbodyæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼ŒæœåŠ¡ç«¯å…ˆç”Ÿæˆå®Œï¼Œå†å¼€å§‹å†™headerï¼Œè¿™æ ·éœ€è¦å¾ˆå¤šé¢å¤–çš„å¼€é”€ï¼Œæ‰€ä»¥headeré‡Œä¸ä¸€å®šæœ‰content-lengthã€‚\né‚£å®¢æˆ·ç«¯æ€ä¹ˆçŸ¥é“bodyçš„å¤§å°å‘¢ï¼ŸæœåŠ¡å™¨æœ‰ä¸‰ç§æ–¹å¼å‘Šè¯‰ä½ ã€‚\n1.æœåŠ¡å™¨å·²ç»çŸ¥é“èµ„æºå¤§å°ï¼Œé€šè¿‡content-lengthè¿™ä¸ªheaderå‘Šè¯‰ä½ ã€‚\nContent-Length:1076(bodyçš„å¤§å°æ˜¯1076Bï¼Œä½ è¯»å–1076Bå°±å¯ä»¥å®Œæˆä»»åŠ¡äº†ï¼‰Transfer-Encoding: null\n\n2.æœåŠ¡å™¨æ²¡æ³•æå‰çŸ¥é“èµ„æºçš„å¤§å°ï¼Œæˆ–è€…ä¸æ„¿æ„èŠ±è´¹èµ„æºæå‰è®¡ç®—èµ„æºå¤§å°ï¼Œå°±ä¼šæŠŠhttpå›å¤æŠ¥æ–‡ä¸­åŠ ä¸€ä¸ªheaderå«Transfer-Encoding:chunkedï¼Œå°±æ˜¯åˆ†å—ä¼ è¾“çš„æ„æ€ã€‚æ¯ä¸€å—éƒ½ä½¿ç”¨å›ºå®šçš„æ ¼å¼ï¼Œå‰è¾¹æ˜¯å—çš„å¤§å°ï¼Œåé¢æ˜¯æ•°æ®ï¼Œç„¶åæœ€åä¸€å—å¤§å°æ˜¯0ã€‚è¿™æ ·å®¢æˆ·ç«¯è§£æçš„æ—¶å€™å°±éœ€è¦æ³¨æ„å»æ‰ä¸€äº›æ— ç”¨çš„å­—æ®µã€‚\nContent-Length:nullTransfer-Encoding:chunked (æ¥ä¸‹æ¥çš„bodyæˆ‘è¦ä¸€å—ä¸€å—çš„ä¼ ï¼Œæ¯ä¸€å—å¼€å§‹æ˜¯è¿™ä¸€å—çš„å¤§å°ï¼Œç­‰æˆ‘ä¼ åˆ°å¤§å°ä¸º0çš„å—æ—¶ï¼Œå°±æ²¡äº†ï¼‰\n\n3.æœåŠ¡å™¨ä¸çŸ¥é“èµ„æºçš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿä¸æ”¯æŒchunkedçš„ä¼ è¾“æ¨¡å¼ï¼Œé‚£ä¹ˆå°±æ—¢æ²¡æœ‰content-lengthå¤´ï¼Œä¹Ÿæ²¡æœ‰transfer-encodingå¤´ï¼Œè¿™ç§æƒ…å†µä¸‹å¿…é¡»ä½¿ç”¨çŸ­è¿æ¥ï¼Œä»¥è¿æ¥ç»“æŸæ¥æ ‡ç¤ºæ•°æ®ä¼ è¾“ç»“æŸï¼Œä¼ è¾“ç»“æŸå°±èƒ½çŸ¥é“å¤§å°äº†ã€‚è¿™æ—¶å€™æœåŠ¡å™¨è¿”å›çš„headeré‡ŒConnectionä¸€å®šæ˜¯closeã€‚\nContent-Length:null Transfer-Encoding:null Connection:close(æˆ‘ä¸çŸ¥é“å¤§å°ï¼Œæˆ‘ä¹Ÿç”¨ä¸äº†chunkedï¼Œå•¥æ—¶å€™æˆ‘å…³äº†tcpè¿æ¥ï¼Œå°±è¯´æ˜ä¼ è¾“ç»“æŸäº†ï¼‰\n\nå®éªŒæˆ‘é€šè¿‡nginxåœ¨è™šæ‹Ÿæœºé‡Œåšå®éªŒï¼Œé»˜è®¤nginxæ˜¯æ”¯æŒchunkedæ¨¡å¼çš„ï¼Œå¯ä»¥å…³æ‰ã€‚\nä½¿ç”¨çš„ä»£ç å¦‚ä¸‹ï¼Œå¯èƒ½ä¼šè°ƒæ•´å‚æ•°ã€‚\nstatic void update() throws IOException &#123;    URL url = new URL(&quot;http://172.16.59.129:8000/update/test.so&quot;);    HttpURLConnection conn = (HttpURLConnection) url.openConnection();    //conn.setRequestProperty(&quot;Accept-Encoding&quot;, &quot;gzip&quot;);    //conn.setRequestProperty(&quot;Connection&quot;, &quot;keep-alive&quot;);    conn.connect();    if(conn.getResponseCode() == 200) &#123;        System.out.println(conn.getHeaderFields().keySet());        System.out.println(conn.getHeaderField(&quot;transfer-encoding&quot;));        System.out.println(conn.getHeaderField(&quot;Content-Length&quot;));        System.out.println(conn.getHeaderField(&quot;Content-Encoding&quot;));        System.out.println(conn.getHeaderField(&quot;Connection&quot;));    &#125;&#125;\n\n1.nginxåœ¨å¼€å¯chunked_transfer_encodingçš„æ—¶å€™(1) åœ¨reqeust headeré‡Œä¸ä½¿ç”¨gzipï¼Œä¹Ÿå°±æ˜¯ä¸åŠ accept-encoding: gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n69M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n3072M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\nå¯ä»¥å‘ç°nginxä¸ç®¡èµ„æºå¤šå¤§ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸æ¥å—gzipçš„å‹ç¼©æ ¼å¼ï¼Œå°±ä¸ä¼šä½¿ç”¨chunkedæ¨¡å¼ï¼Œè€Œä¸”è·Ÿæ˜¯å¦ä½¿ç”¨çŸ­è¿æ¥æ²¡å…³ç³»ã€‚\n(2)åœ¨request headeré‡ŒåŠ å…¥gzipï¼Œaccepting-encoding: gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\n69M\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\n3072M\næ²¡æœ‰content-length,transfer-encoding&#x3D;trunked\n\n\nå¯ä»¥çœ‹åˆ°nginxåœ¨å¼€å¯chunked_transfer_encodingï¼Œå¹¶ä¸”å®¢æˆ·ç«¯æ¥å—gzipçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨chunkedæ¨¡å¼ï¼Œnginxå¼€å¯gzipåä¸ä¼šè®¡ç®—èµ„æºçš„å¤§å°ï¼Œç›´æ¥ç”¨chunkedæ¨¡å¼ã€‚\n2.nginxå…³é—­chunked_transfer_encoding(1) åœ¨reqeust headeré‡Œä¸ä½¿ç”¨gzipï¼Œä¹Ÿå°±æ˜¯ä¸åŠ accept-encoding:gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n69M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\n3072M\nèƒ½æ­£å¸¸è¿”å›content-length,æ²¡æœ‰transfer-encodingå¤´\n\n\nå› ä¸ºèƒ½å¾ˆå®¹æ˜“çš„çŸ¥é“æ–‡ä»¶å¤§å°ï¼Œæ‰€ä»¥nginxè¿˜æ˜¯èƒ½è¿”å›content-lengthã€‚\n(2)åœ¨request headeré‡ŒåŠ å…¥gzipï¼Œaccepting-encoding:gzip\n\n\n\ntest.soæ–‡ä»¶å¤§å°\nç»“æœ\n\n\n\n100B\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\n69M\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\n3072M\næ²¡æœ‰content-lengthå’Œtransfer-encodingå¤´ï¼Œä¸è®ºå®¢æˆ·ç«¯connectionä¸ºkeep-aliveè¿˜æ˜¯closeï¼ŒæœåŠ¡ç«¯è¿”å›çš„connectionå¤´éƒ½æ˜¯close\n\n\nè¿™å°±æ˜¯ä¸Šé¢è¯´çš„ç¬¬ä¸‰ç§æƒ…å†µï¼Œä¸çŸ¥é“å¤§å°ï¼Œä¹Ÿä¸æ”¯æŒtrunkedï¼Œé‚£å°±å¿…é¡»ä½¿ç”¨çŸ­è¿æ¥æ¥æ ‡ç¤ºç»“æŸã€‚\né—®é¢˜è§£å†³æ–¹æ¡ˆå’¨è¯¢äº†ä¸­é—´ä»¶ç»„çš„åŒäº‹ï¼Œä»¥å‰ä¹Ÿé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œå› ä¸ºå‡çº§äº†Weblogicå¯¼è‡´å®¢æˆ·ç«¯è§£æXMLå‡ºé”™ï¼Œå› ä¸ºä½¿ç”¨äº†chunkedæ¨¡å¼ï¼Œä¸­é—´æœ‰ä¸€äº›æ ¼å¼åŒ–çš„å­—ç¬¦ï¼Œè€Œå®¢æˆ·ç«¯è§£æçš„ä»£ç å¹¶æ²¡æœ‰è€ƒè™‘chunkedæ¨¡å¼çš„è§£æï¼Œå¯¼è‡´è§£æå‡ºé”™ã€‚\nå› ä¸ºæˆ‘ä»¬å®¢æˆ·ç«¯å¿…é¡»ç”¨content-lengthå±•ç¤ºè¿›åº¦ï¼Œå› æ­¤ä¸èƒ½ç”¨chunkedæ¨¡å¼ï¼ŒWeblogicå¯ä»¥æŠŠchunkedæ¨¡å¼å…³é—­ã€‚ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š\n#!java weblogic.WLSTconnect(&#x27;usernameâ€™,&#x27;password&#x27;, &#x27;t3://localhost:7001&#x27;)edit()startEdit()cd(&quot;Servers/AdminServer/WebServer/AdminServer&quot;)cmo.setChunkedTransferDisabled(true)save()activate()exit()\n\næ”¹äº†ä¹‹åï¼Œç¡®å®ä¸è¿”å›chunkedäº†ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰content-lengthï¼Œå› ä¸ºWeblogicå°±æ˜¯ä¸æå‰è·å–æ–‡ä»¶å¤§å°ï¼Œè€Œæ˜¯å¼ºåˆ¶åŠ äº†connection:closeï¼Œä¹Ÿå°±æ˜¯å‰è¾¹è¯´çš„ç¬¬ä¸‰ç§ï¼Œé€šè¿‡è¿æ¥ç»“æŸæ ‡è¯†æ•°æ®ç»“æŸã€‚æœ€ååªèƒ½æŠŠè¿™äº›èµ„æºæ”¾å€’apacheé‡Œäº†ã€‚\næ€»ç»“ä¸€ä¸ªå¥½çš„httpå®¢æˆ·ç«¯ï¼Œå¿…é¡»å……åˆ†å®ç°åè®®ï¼Œä¸ç„¶å°±å¯èƒ½å‡ºé—®é¢˜ï¼Œæµè§ˆå™¨å¯¹äºæœåŠ¡ç«¯å¯èƒ½äº§ç”Ÿçš„å„ç§æƒ…å†µéƒ½å¾ˆå¥½çš„åšäº†å¤„ç†ï¼Œä½†æ˜¯è‡ªå·±å®ç°httpåè®®çš„è§£ææ—¶ä¸€å®šå¾—æ³¨æ„è€ƒè™‘å¤šç§æƒ…å†µã€‚\næ–‡ç« ä½œè€…ï¼šç‰›ç«‹æ–°åŸæ–‡é“¾æ¥ï¼šhttps://www.cnblogs.com/nxlhero/p/11670942.html\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["è®¡ç®—æœºç½‘ç»œ","http","nginx"]},{"title":"ã€Linuxã€‘buff cacheçš„çœŸç›¸","url":"/posts/2377102236/","content":"1.è¡¨ç°ç°è±¡åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨freeå‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨çŠ¶æ€ã€‚åœ¨ä¸€ä¸ª CoreOS çš„ç³»ç»Ÿä¸Šï¼Œfreeå‘½ä»¤çš„æ˜¾ç¤ºå†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·ä¸€ä¸ªçŠ¶æ€ï¼š\ncore@localhost ~ $ free\n              total        used        free      shared  buff/cache   available\nMem:        8145320      391200     333888      204616      7420232     311660\nSwap:             0           0           0\n\nè¿™é‡Œçš„é»˜è®¤æ˜¾ç¤ºå•ä½æ˜¯kbï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ -hå‚æ•°ï¼Œæ¥è®©free å‘½ä»¤æ˜¾ç¤ºçš„æ›´ä¸ºå‹å¥½ä¸€äº›ã€‚\ncore@localhost ~ $ free -h\n              total        used        free      shared  buff/cache   available\nMem:          7.8Gi       381Mi       0.3Gi       199Mi       7.4Gi       0.3Gi\nSwap:            0B          0B          0B\n\næ–°ç‰ˆlinuxç›¸å¯¹æ¥è¯´å·²ç»å¥½å¾ˆå¤šäº†ï¼Œåœ¨è€ç‰ˆçš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰availableå­—æ®µçš„ã€‚\næ‰€ä»¥æ”¾å½“æ—¶æ¥è¯´ï¼Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸‹é¢å‡ ç§ååº”ï¼š\n\nå¯¹äºä¸å¤ªäº†è§£linuxç³»ç»Ÿçš„äººæ¥è¯´ï¼Œçœ‹åˆ° free ä¹‹åï¼Œä¼šè§‰å¾—å†…å­˜ç”¨äº†å¥½å¤šï¼Œæˆ‘éƒ½æ²¡è·‘ä»€ä¹ˆç¨‹åºï¼Œå†…å­˜å°±ç”¨å®Œäº†ï¼Linuxå¥½å å†…å­˜ï¼\nç¨å¾®äº†è§£linuxï¼Œå¹¶åœ¨ç™¾åº¦æœç´¢è¿‡ç›¸å…³çŸ¥è¯†çš„äººä¹Ÿè®¸ä¼šè¯´ï¼Œå—¯ï¼Œçœ‹èµ·æ¥freeæ˜¯æ²¡æœ‰å¤šå°‘äº†ï¼Œä½†æ˜¯çœŸå®å†…å­˜æ‰ç”¨äº† 400Mi ä¸åˆ°ï¼Œè¿˜æœ‰å¾ˆå¤šå‰©ä½™å†…å­˜å¯ç”¨ã€‚buff&#x2F;cache å ç”¨æ¯”è¾ƒå¤šï¼Œè¯´æ˜ç³»ç»Ÿä¸­æœ‰è¿›ç¨‹æ›¾ç»è¯»å†™è¿‡æ–‡ä»¶ï¼Œä½†æ˜¯ä¸è¦ç´§ï¼Œè¿™éƒ¨åˆ†å†…å­˜åœ¨ç³»ç»Ÿå†…å­˜åƒç´§çš„æ—¶å€™ä¼šé‡Šæ”¾å‡ºæ¥çš„ã€‚\n\nä½†æ˜¯ï¼Œä¸Šé¢ä¸¤ç§è¯´æ³•éƒ½æœ‰äº›ç‰‡é¢äº†ï¼Œéƒ½ä¸æ˜¯å¾ˆæ­£ç¡®ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬é‡æ–°æ¥è®¤è¯†ä¸€ä¸‹buffå’Œcacheã€‚\n2.ä»€ä¹ˆæ˜¯ buff&#x2F;cacheï¼Ÿåœ¨Linux 2.4çš„å†…å­˜ç®¡ç†ä¸­ï¼ŒbufferæŒ‡Linuxå†…å­˜çš„ï¼šBuffer cacheã€‚cacheæŒ‡Linuxå†…å­˜ä¸­çš„ï¼šPage cacheã€‚ä¸€èˆ¬å‘¢ï¼Œæ˜¯è¿™ä¹ˆè§£é‡Šä¸¤è€…çš„ã€‚\n\nA buffer is someting that has yet to be â€˜writtenâ€™ to disk.\nA cache is someting that has been â€˜readâ€™ from the disk and stored for later use.\n\nç¿»è¯‘è¿‡æ¥å°±æ˜¯è¯´ï¼š\n\nbuffer(buff) æ˜¯ç”¨æ¥ç¼“å­˜å°šæœªâ€œå†™å…¥â€ç£ç›˜çš„å†…å®¹ã€‚\ncache æ˜¯ç”¨æ¥ç¼“å­˜ä»ç£ç›˜â€œè¯»å–â€å‡ºæ¥çš„ä¸œè¥¿ã€‚\n\næ‰€ä»¥ buffer è¢«ç”¨æ¥å½“æˆå¯¹ioè®¾å¤‡å†™çš„ç¼“å­˜ã€‚è€Œ cache è¢«ç”¨æ¥å½“ä½œå¯¹ioè®¾å¤‡çš„è¯»ç¼“å­˜ã€‚è¿™é‡Œçš„ioè®¾å¤‡ï¼Œä¸»è¦æŒ‡çš„æ˜¯å—è®¾å¤‡æ–‡ä»¶å’Œæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ™®é€šæ–‡ä»¶ã€‚\nä½†æ˜¯åœ¨ Linux 2.6 ä»¥åï¼Œå®ƒä»¬çš„æ„ä¹‰ä¸ä¸€æ ·äº†ã€‚\nåœ¨Linux 2.6ä¹‹åLinuxå°†ä»–ä»¬ç»Ÿä¸€åˆå¹¶åˆ°äº†Page cacheä½œä¸ºæ–‡ä»¶å±‚çš„ç¼“å­˜ã€‚è€Œbufferåˆ™è¢«ç”¨ä½œblockå±‚çš„ç¼“å­˜ã€‚blockå±‚çš„ç¼“å­˜æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Œä½ å¯ä»¥è®¤ä¸ºä¸€ä¸ªbufferæ˜¯ä¸€ä¸ªphysical disk blockåœ¨å†…å­˜çš„ä»£è¡¨ï¼Œç”¨æ¥å°†å†…å­˜ä¸­çš„pagesæ˜ å°„ä¸ºdisk blocksï¼Œè¿™éƒ¨åˆ†è¢«ä½¿ç”¨çš„å†…å­˜è¢«å«åšbufferã€‚\n\nbufferé‡Œé¢çš„pagesï¼ŒæŒ‡çš„æ˜¯Page cacheä¸­çš„pagesï¼Œæ‰€ä»¥ï¼Œbufferä¹Ÿå¯ä»¥è¢«è®¤ä¸ºPage cacheçš„ä¸€éƒ¨åˆ†ã€‚\n\næˆ–è€…ç®€å•æ¥è¯´ï¼Œbufferè´Ÿè´£è£¸è®¾å¤‡ç›¸å…³çš„ç¼“å­˜ï¼Œcacheè´Ÿè´£æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å­˜ã€‚\nBuffer çš„å…·ä½“èŒè´£åœ¨å½“å‰çš„ç³»ç»Ÿå®ç°é‡Œï¼Œbufferä¸»è¦æ˜¯è®¾è®¡ç”¨æ¥åœ¨ç³»ç»Ÿå¯¹å—è®¾å¤‡è¿›è¡Œè¯»å†™æ—¶ä½œä¸ºç¼“å­˜æ¥ä½¿ç”¨ã€‚è¿™æ„å‘³ç€å¯¹å—çš„æ“ä½œä¼šä½¿ç”¨bufferè¿›è¡Œç¼“å­˜ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿçš„æ—¶å€™ã€‚\nä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ä¸¤ä¸ªç¼“å­˜ç³»ç»Ÿæ˜¯ä¸€èµ·é…åˆä½¿ç”¨çš„ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œcacheçš„å†…å®¹ä¼šè¢«æ”¹å˜ï¼Œè€Œbufferåˆ™ç”¨æ¥å°†cacheçš„pageæ ‡è®°ä¸ºä¸åŒçš„ç¼“å†²åŒºï¼Œå¹¶è®°å½•æ˜¯å“ªä¸€ä¸ªç¼“å†²åŒºè¢«ä¿®æ”¹äº†ã€‚\nè¿™æ ·ï¼Œå†…æ ¸åœ¨åç»­æ‰§è¡Œè„æ•°æ®çš„å›å†™ï¼ˆwritebackï¼‰æ—¶ï¼Œå°±ä¸ç”¨å°†æ•´ä¸ªpageå†™å›ï¼Œè€Œåªéœ€è¦å†™å›ä¿®æ”¹çš„éƒ¨åˆ†å³å¯ã€‚\nCache çš„å…·ä½“èŒè´£cacheä¸»è¦ç”¨æ¥ä½œä¸ºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æ•°æ®çš„ç¼“å­˜æ¥ç”¨ï¼Œå½“è¿›ç¨‹å¯¹æ–‡ä»¶æœ‰read/writeæ“ä½œçš„æ—¶å€™ã€‚åŒ…æ‹¬å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜çš„ç³»ç»Ÿè°ƒç”¨mmapï¼Œå°±ä¼šç”¨åˆ°cacheã€‚\nå› ä¸ºcacheè¢«ä½œä¸ºæ–‡ä»¶ç±»å‹çš„ç¼“å­˜æ¥ç”¨ï¼Œæ‰€ä»¥äº‹å®ä¸Šä¹Ÿè´Ÿè´£äº†å¤§éƒ¨åˆ†çš„å—è®¾å¤‡æ–‡ä»¶çš„ç¼“å­˜å·¥ä½œã€‚\n3.æ€ä¹ˆå›æ”¶ buff&#x2F;cacheï¼ŸLinuxå†…æ ¸ä¼šåœ¨å†…å­˜å°†è¦è€—å°½çš„æ—¶å€™ï¼Œè‡ªåŠ¨è§¦å‘å†…å­˜å›æ”¶çš„å·¥ä½œï¼Œä»¥ä¾¿é‡Šæ”¾å‡ºå†…å­˜ç»™æ€¥éœ€å†…å­˜çš„è¿›ç¨‹ä½¿ç”¨ã€‚\nä½†æ˜¯è¿™ç§å›æ”¶çš„å·¥ä½œä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰æˆæœ¬ã€‚\nç†è§£cacheæ˜¯å¹²ä»€ä¹ˆçš„å°±çŸ¥é“ï¼Œcacheä¸­å­˜åœ¨ç€ä¸€éƒ¨åˆ†writeæ“ä½œçš„æ•°æ®ã€‚æ‰€ä»¥å¿…é¡»ä¿è¯cacheä¸­çš„æ•°æ®è·Ÿå¯¹åº”æ–‡ä»¶ä¸­çš„æ•°æ®ä¸€è‡´ï¼Œæ‰èƒ½å¯¹cacheè¿›è¡Œé‡Šæ”¾ã€‚\näºæ˜¯ä¼´éšç€cacheæ¸…é™¤çš„è¡Œä¸ºçš„ï¼Œä¸€èˆ¬éƒ½æ˜¯ç³»ç»ŸIOé£™é«˜ã€‚è¿™æ˜¯å› ä¸ºå†…æ ¸è¦å°†cacheä¸­ç¼“å­˜çš„writeæ•°æ®è¿›è¡Œå›å†™ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–‡ä»¶æ¥äººå·¥è§¦å‘ç¼“å­˜æ¸…é™¤çš„æ“ä½œï¼ŒLinux æä¾›äº†ä¸‰ç§æ¸…ç©ºæ–¹å¼ï¼š\n\necho 1 &gt; /proc/sys/vm/drop_caches # ä»…æ¸…é™¤é¡µé¢ç¼“å­˜\necho 2 &gt; /proc/sys/vm/drop_caches # æ¸…é™¤ç›®å½•é¡¹å’Œinode\necho 3 &gt; /proc/sys/vm/drop_caches # æ¸…é™¤é¡µé¢ç¼“å­˜ã€ç›®å½•é¡¹ä»¥åŠinode\n\nä½†æ˜¯è¿™ç§æ”¾æ—¶åªèƒ½åœ¨æ‰§è¡Œçš„å½“æ—¶èµ·ä½œç”¨ï¼Œè¿‡ä¸€æ®µæ—¶é—´ä¹‹ååˆä¼šå‘ç°å†…å­˜è¢«å æ»¡ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ\nå®é™…ä¸Šå†…æ ¸æä¾›äº†vm.vfs_cache_pressureå‚æ•°ç”¨æ¥æ§åˆ¶ç¼“å†²åŒºçš„å›æ”¶é¢‘ç‡ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´å®ƒã€‚\nè¿™ä¸ªå‚æ•°æ˜¯ç”¨æ¥æ§åˆ¶å†…æ ¸å›æ”¶VFSç¼“å­˜çš„é¢‘ç‡ã€‚ä¿®æ”¹è¿™ä¸ªå€¼ä¼šæé«˜æˆ–è€…é™ä½å›æ”¶VFSç¼“å­˜çš„é¢‘ç‡ã€‚å€¼å¯ä»¥è®¾ç½®ä¸º0-200ä¸­çš„ä»»æ„å€¼ã€‚è¶Šå¤§å›æ”¶é¢‘ç‡è¶Šå¿«ï¼Œå¯ä»¥æŠŠvm.vfs_cache_pressureèµ‹å€¼ä¸º200æ¥è·å¾—æœ€å¿«çš„å›æ”¶é¢‘ç‡ã€‚è¿™ä¸ªå€¼é»˜è®¤å€¼ä¸€èˆ¬ä¸º100ã€‚\nå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨slabtopåˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œdentryå’Œ*_inode_cacheå€¼è¶Šé«˜å›æ”¶çš„æ•ˆæœè¶Šå¥½ã€‚\nä¸ºä»€ä¹ˆæ˜¯dentryå’Œ*_inode_cacheå‘¢ï¼Œè¿™æ˜¯å› ä¸ºå½“è¯»å†™æ–‡ä»¶æ—¶å†…æ ¸ä¼šä¸ºè¯¥æ–‡ä»¶å¯¹è±¡å»ºç«‹ä¸€ä¸ªdentryï¼Œå¹¶å°†å…¶ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡è¯»å†™æ—¶ç›´æ¥ä»å†…å­˜ä¸­å–å‡ºæé«˜æ•ˆç‡ã€‚è‡³äº*_inode_cacheæˆ‘å°±ä¸æ˜¯å¾ˆæ¸…æ¥šäº†ï¼ŒåªçŸ¥é“æ˜¯ä¸ºäº†åŠ å¿«å¯¹ç´¢å¼•èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œå¦‚æœæœ‰æ¸…æ¥šçš„å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹ã€‚\n4.æµ‹è¯•ä¸€ä¸‹\né¦–å…ˆï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ç›®å‰çš„å†…å­˜ä½¿ç”¨é‡\ncore@localhost ~ $ free -h              total        used        free      shared  buff/cache   availableMem:          7.8Gi       383Mi       7.1Gi       199Mi       291Mi       7.0GiSwap:            0B          0B          0B\n\nç”Ÿæˆä¸€ä¸ªæ–‡ä»¶æµ‹è¯•ä¸€ä¸‹\ncore@localhost ~ $ dd if=/dev/zero of=testfile bs=1M count=10001000+0 records in1000+0 records out1048576000 bytes (1.0 GB, 1000 MiB) copied, 1.39192 s, 753 MB/s\n\næ£€æŸ¥ä¸€ä¸‹å†…å­˜çš„ä½¿ç”¨æƒ…å†µï¼Œæ˜¯å¦å’Œä¸Šé¢ä»‹ç»çš„ä¸€æ ·\ncore@localhost ~ $ free -h              total        used        free      shared  buff/cache   availableMem:          7.8Gi       383Mi       6.1Gi       199Mi       1.3Gi       7.0GiSwap:            0B          0B          0B\n\næ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹é‡Šæ”¾ï¼Œçœ‹èƒ½å¦å°†å†…å­˜é‡Šæ”¾å‡ºæ¥\ncore@localhost ~ $ echo 1 | sudo tee /proc/sys/vm/drop_caches1\n\næ£€æŸ¥ä¸€ä¸‹å†…å­˜æ˜¯å¦è¢«é‡Šæ”¾æ‰\ncore@localhost ~ $ free -h              total        used        free      shared  buff/cache   availableMem:          7.8Gi       383Mi       7.1Gi       199Mi       291Mi       7.0GiSwap:            0B          0B          0B\n\nç»§ç»­æµ‹è¯•ä¸€ä¸‹è¯»å–æ–‡ä»¶\ncore@localhost ~ $ time -p cat testfile &gt; /dev/nullreal 0.39user 0.00sys 0.27\n\nå¯ä»¥çœ‹åˆ°ç”¨æ—¶ 0.39sï¼Œæˆ‘ä»¬çœ‹ä¸‹å†…å­˜ä½¿ç”¨\ncore@localhost ~ $ free -h              total        used        free      shared  buff/cache   availableMem:          7.8Gi       382Mi       6.1Gi       199Mi       1.3Gi       7.0GiSwap:            0B          0B          0B\n\nç„¶åæˆ‘ä»¬å†æ¬¡æ‰§è¡Œä¸€ä¸‹è¯»å–æ–‡ä»¶\ncore@localhost ~ $ time -p cat testfile &gt; /dev/nullreal 0.17user 0.00sys 0.17\n\nå¯ä»¥çœ‹åˆ°ç”¨æ—¶ç¼©çŸ­åˆ°äº† 0.17sï¼Œè¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹çš„æ—¶ç”±äºæˆ‘è¿™è¾¹æ˜¯å›ºæ€ç¡¬ç›˜ï¼Œæ‰€ä»¥å·®è·æ²¡è¿™ä¹ˆå¤§ï¼Œå¦‚æœæ˜¯æœºæ¢°ç¡¬ç›˜çš„è¯å·®è·ä¼šè¿›ä¸€æ­¥æ‰©å¤§ã€‚æ¯•ç«Ÿå†…å­˜ç¼“å­˜è‚¯å®šæ˜¯æ›´å¿«çš„ï¼\n\n\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œkunyusã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/kunyus/article/details/104617426\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘gccä¸­__builtin_expectçš„ä½œç”¨","url":"/posts/3259961914/","content":"å¼•å…¥ä»£ç å­¦ä¹ çš„æ—¶å€™ï¼Œé‡åˆ°äº†__builtin_expectè¿™ä¸ªä¹‹å‰ä»æ¥æ²¡æœ‰é‡åˆ°è¿‡çš„ä¸œè¥¿ï¼Œç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œå‘ç°çº¯Cè¯­è¨€å®ç°çš„GCDï¼ˆGrand Central Dispatchï¼‰ä¸­å°±æœ‰å®šä¹‰è¿‡è¿™ä¸ªå®\n#define _safe_cast_to_long(x) \\        (&#123; _Static_assert(sizeof(typeof(x)) &lt;= sizeof(long), \\                &quot;__builtin_expect doesn&#x27;t support types wider than long&quot;); \\                (long)(x); &#125;)#define fastpath(x) ((typeof(x))__builtin_expect(_safe_cast_to_long(x), ~0l))#define slowpath(x) ((typeof(x))__builtin_expect(_safe_cast_to_long(x), 0l))#define likely(x) __builtin_expect(!!(x), 1)#define unlikely(x) __builtin_expect(!!(x), 0)\n\næˆ‘é‡åˆ°çš„ç”¨æ³•ç±»ä¼¼æœ«å°¾çš„likelyå’Œunlikelyï¼Œåˆšå¼€å§‹æˆ‘è¯¯è§£äº†è¿™ä¸ªå®çš„æ‰€ç”¨ï¼Œä»¥ä¸ºå®ƒä¼šæ”¹å˜åˆ¤æ–­æ¡ä»¶çš„ç»“æœï¼Œä½†å®é™…ä¸Šå¹¶éå¦‚æ­¤ã€‚\nä¸Šé¢æºç ä¸­çš„likelyå’Œunlikelyè¿™ä¸¤ä¸ªå®çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼Œå…¶ä¸­valueæ˜¯ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶\nif(likely(value))  // ç­‰ä»·äº if(value) åªä¸è¿‡valueå¯èƒ½ä¸ºçœŸçš„å¯èƒ½æ€§æ›´å¤§ã€‚if(unlikely(value))  // ä¹Ÿç­‰ä»·äº if(value) åªä¸è¿‡valueå¯èƒ½ä¸ºå‡çš„å¯èƒ½æ€§æ›´å¤§\n\næ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªä»£ç ï¼Œå…¶å«ä¹‰æ˜¯å…¥å‚PTRè¿™ä¸ªæŒ‡é’ˆä¸ºç©ºçš„å¯èƒ½æ€§å¾ˆå°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šå¯¹è¿™é‡Œçš„åˆ†æ”¯åˆ¤æ–­åšä¸€å®šçš„ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦çš„è·³è½¬ã€‚\nif(unlikey(nullptr==PTR))\t&#123;    // é”™è¯¯å¤„ç†æˆ–è€…æç¤º &#125;   \t\t\t\t\t\t\t\t\t    \n\né‚£è¿™é‡Œæ˜¯æ€ä¹ˆä¸ªæ“ä½œçš„å‘¢ï¼Ÿ\næŒ‡ä»¤ä½œç”¨è¯´æ˜\nå‚è€ƒï¼š__builtin_expect æ€»ç»“\n\nè¿™ä¸ªæŒ‡ä»¤æ˜¯gccç¼–è¯‘å™¨å¼•å…¥çš„ï¼ŒæŒ‡ä»¤çš„å†™æ³•ä¸ºï¼š__builtin_expect(EXP, N)ï¼Œæ„æ€æ˜¯ï¼šEXP==Nçš„æ¦‚ç‡å¾ˆå¤§ã€‚\nlikelyå’Œunlikelyè¿™ä¸¤ä¸ªå®ä¸­ä½¿ç”¨äº†!!(x)æ˜¯ä¸ºäº†ä¿è¯è¿”å›çš„ç»“æœä¸€å®šæ˜¯0æˆ–1ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå…¶ä»–æ— æ³•å’Œ1&#x2F;0ç›´æ¥æ¯”è¾ƒçš„è¡¨è¾¾å¼ã€‚\n#define likely(x) __builtin_expect(!!(x), 1)#define unlikely(x) __builtin_expect(!!(x), 0)\n\næ™®é€šåˆ†æ”¯çš„æ±‡ç¼–æ¯”å¦‚æˆ‘ä»¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶çš„åˆ†æ”¯è¯­å¥å¦‚ä¸‹æ‰€ç¤º\n#include &lt;stdio.h&gt;#include &lt;stdbool.h&gt;void function(bool flag)&#123;    if (flag)    &#123;        printf(&quot;all good!\\n&quot;);    &#125; else    &#123;        perror(&quot;this is wrong!\\n&quot;);    &#125;&#125;int main()&#123;    function(true);    function(false);    return 0;&#125;\n\né‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†è¿™ä¸ªä»£ç ç¼–è¯‘æˆæ±‡ç¼–çš„æ—¶å€™ï¼Œä¹Ÿä¼šæŒ‰é¡ºåºè¿›è¡Œå¤„ç†ã€‚ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†test.cæºæ–‡ä»¶ç”Ÿæˆå‡ºæ±‡ç¼–æ–‡ä»¶test.s\ntest:test.c\tgcc -fprofile-arcs -O2 -c test.c\tobjdump -d test.o\n\ntest.sä¸­çš„å†…å®¹å¦‚ä¸‹ï¼ˆçœç•¥äº†ä¸€éƒ¨åˆ†ï¼Œåªä¿ç•™äº†functionéƒ¨åˆ†ï¼‰\n0000000000000000 &lt;function&gt;:   0:   48 83 ec 08             sub    $0x8,%rsp   4:   40 84 ff                test   %dil,%dil   7:   74 27                   je     30 &lt;function+0x30&gt;   9:   bf 00 00 00 00          mov    $0x0,%edi   e:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 16 &lt;function+0x16&gt;  15:   01   16:   e8 00 00 00 00          callq  1b &lt;function+0x1b&gt;  1b:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 23 &lt;function+0x23&gt;  22:   01   23:   48 83 c4 08             add    $0x8,%rsp  27:   c3                      retq     28:   0f 1f 84 00 00 00 00    nopl   0x0(%rax,%rax,1)  2f:   00   30:   bf 00 00 00 00          mov    $0x0,%edi  35:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 3d &lt;function+0x3d&gt;  3c:   01   3d:   e8 00 00 00 00          callq  42 &lt;function+0x42&gt;  42:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 4a &lt;function+0x4a&gt;  49:   01   4a:   48 83 c4 08             add    $0x8,%rsp  4e:   c3                      retq     4f:   90                      nop\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæ˜¯å…ˆé€šè¿‡je     30 &lt;function+0x30&gt;æ¥åˆ¤æ–­å½“å‰flagæ˜¯å¦ä¸ºå‡ï¼Œå¦‚æœä¸ºå‡åˆ™è·³åˆ°30å¤„æ‰§è¡Œperrorï¼Œå¦‚æœä¸ä¸ºå‡åˆ™ç»§ç»­æ‰§è¡Œcallq  1b &lt;function+0x1b&gt;ï¼Œå³printfçš„æ‰“å°ã€‚\njeæ˜¯ä¸€ä¸ªæ±‡ç¼–æŒ‡ä»¤ï¼Œå’Œjzç­‰ä»·ï¼Œåˆ¤æ–­çš„æ˜¯è¿ç®—ç»“æœçš„ZFæ ‡è®°ä½ã€‚å¯¹äºZFæ ‡è®°ä½è€Œè¨€ï¼Œè¿ç®—ç»“æœä¸ä¸ºå…¨0æ—¶Z&#x3D;0ï¼Œè¿ç®—ç»“æœä¸ºå…¨0æ—¶Z&#x3D;1ï¼›æ‰€ä»¥je 30çš„æ„æ€æ˜¯ï¼Œå¦‚æœè¿ç®—ç»“æœä¸ºå…¨0ï¼Œåˆ™è·³è½¬åˆ°30æ ‡è®°å¤„ã€‚\n0:   48 83 ec 08             sub    $0x8,%rsp4:   40 84 ff                test   %dil,%dil7:   74 27                   je     30 &lt;function+0x30&gt;\n\njeä¹‹å‰çš„ä¸¤ä¸ªæ±‡ç¼–æŒ‡ä»¤æ“ä½œè§£æå¦‚ä¸‹ï¼š\n\nsubæ˜¯ç›¸å‡æ“ä½œï¼Œä½¿ç”¨$0x8ä½ç½®çš„å€¼-%rspçš„ç»“æœï¼Œå³$0x8 -= %rspï¼›\ntestæŒ‡ä»¤å’ŒandæŒ‡ä»¤ç­‰ä»·ï¼Œæ˜¯æŒ‰ä½ä¸æ“ä½œï¼Œä½†testå‘½ä»¤ä¸ä¼šæ”¹å˜å€¼ï¼Œåªä¼šæ”¹å˜æ ‡è®°ä½ã€‚ä½†æ˜¯è¿™é‡Œçš„æ“ä½œæ˜¯%dilè‡ªå·±å’Œè‡ªå·±æŒ‰ä½ä¸ï¼Œå¾—åˆ°çš„ç»“æœè¿˜æ˜¯ä»–è‡ªå·±â€¦â€¦æ²¡å¤ªçœ‹æ˜ç™½ä»€ä¹ˆå«ä¹‰\n\nä½†æ˜¯ï¼Œåªä»jeæœ¬èº«çš„æ“ä½œæ¥è€ƒè™‘ï¼Œè¿™é‡Œçš„æµç¨‹æ˜¯è¿™æ ·çš„\n\nje è·³è½¬åˆ°30ï¼ŒZ&#x3D;1çš„æ—¶å€™è·³è½¬åˆ°30ï¼Œè¿ç®—ç»“æœä¸ºå…¨0çš„æ—¶å€™è·³è½¬åˆ°30ï¼Œå¯ä»¥ç†è§£ä¸ºflagä¸º0çš„æ—¶å€™è·³è½¬åˆ°30ï¼ˆå› ä¸º30å¤„æ˜¯perrorçš„æ‰“å°ï¼‰\nZ&#x3D;0ï¼Œè¿ç®—ç»“æœä¸ä¸º30çš„æ—¶å€™ï¼Œä¸è·³è½¬ï¼Œç»§ç»­æ‰§è¡Œprintfçš„æ‰“å°\n\nè¿™é‡Œä¸ºä»€ä¹ˆè¯´30å¤„æ˜¯perrorçš„æ‰“å°å‘¢ï¼Ÿå› ä¸ºä½¿ç”¨å¦‚ä¸‹æ±‡ç¼–å‘½ä»¤æ•´ç†å‡ºçš„test.sæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„è¿‡ç¨‹\ntest:test.c\tgcc -E test.c -o test.i -O2 &amp;&amp; \\\tgcc -S test.i -o test.s -O2 \n\nä»test.så¯ä»¥çœ‹åˆ°ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œé€šè¿‡jeåˆ¤æ–­åä¼šè·³åˆ°.L2å¤„æ‰§è¡Œperrorçš„è°ƒç”¨ï¼Œæˆ–ç»§ç»­å¾€åæ‰§è¡Œputså³printfçš„è°ƒç”¨ã€‚å› ä¸ºå®ƒä»¬çš„é¡ºåºå’Œä¸Šé¢è·å¾—çš„æ±‡ç¼–ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåœ¨ä¸Šé¢çš„æ±‡ç¼–ä¸­je 30æ˜¯è·³è½¬åˆ°æ‰§è¡Œperrorçš„æ“ä½œã€‚\nfunction:.LFB11:\t.cfi_startproc\ttestb\t%dil, %dil\tje\t.L2\tmovl\t$.LC0, %edi\tjmp\tputs\t.p2align 4,,10\t.p2align 3.L2:\tmovl\t$.LC1, %edi\tjmp\tperror\t.cfi_endproc.LFE11:\t.size\tfunction, .-function\t.p2align 4,,15\t.globl\tfunction_likely\t.type\tfunction_likely, @function\næ·»åŠ builtin_expectä¹‹åçš„æ±‡ç¼–ç¤ºä¾‹1ä¸Šæ–¹çš„ä»£ç ï¼Œåœ¨åŠ ä¸Š__builtin_expectçš„unlikelyå’Œlikelyä¹‹åï¼Œæ–°ä»£ç å¦‚ä¸‹\nvoid function_likely(bool flag)&#123;    if (likely(flag))    &#123;        printf(&quot;all good!\\n&quot;);    &#125;    else    &#123;        perror(&quot;this is wrong!\\n&quot;);    &#125;&#125;void function_unlikely(bool flag)&#123;    if (unlikely(flag))    &#123;        printf(&quot;all good!\\n&quot;);    &#125;    else    &#123;        perror(&quot;this is wrong!\\n&quot;);    &#125;&#125;\n\nä½¿ç”¨ç›¸åŒå‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œå¾—åˆ°æ±‡ç¼–å¦‚ä¸‹\n0000000000000050 &lt;function_likely&gt;:  50:   48 83 ec 08             sub    $0x8,%rsp  54:   40 84 ff                test   %dil,%dil  57:   74 27                   je     80 &lt;function_likely+0x30&gt;  59:   bf 00 00 00 00          mov    $0x0,%edi  5e:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 66 &lt;function_likely+0x16&gt;  65:   01   66:   e8 00 00 00 00          callq  6b &lt;function_likely+0x1b&gt;  6b:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 73 &lt;function_likely+0x23&gt;  72:   01   73:   48 83 c4 08             add    $0x8,%rsp  77:   c3                      retq     78:   0f 1f 84 00 00 00 00    nopl   0x0(%rax,%rax,1)  7f:   00   80:   bf 00 00 00 00          mov    $0x0,%edi  85:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 8d &lt;function_likely+0x3d&gt;  8c:   01   8d:   e8 00 00 00 00          callq  92 &lt;function_likely+0x42&gt;  92:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 9a &lt;function_likely+0x4a&gt;  99:   01   9a:   eb d7                   jmp    73 &lt;function_likely+0x23&gt;  9c:   0f 1f 40 00             nopl   0x0(%rax)00000000000000a0 &lt;function_unlikely&gt;:  a0:   48 83 ec 08             sub    $0x8,%rsp  a4:   40 84 ff                test   %dil,%dil  a7:   75 27                   jne    d0 &lt;function_unlikely+0x30&gt;  a9:   bf 00 00 00 00          mov    $0x0,%edi  ae:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # b6 &lt;function_unlikely+0x16&gt;  b5:   01   b6:   e8 00 00 00 00          callq  bb &lt;function_unlikely+0x1b&gt;  bb:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # c3 &lt;function_unlikely+0x23&gt;  c2:   01   c3:   48 83 c4 08             add    $0x8,%rsp  c7:   c3                      retq     c8:   0f 1f 84 00 00 00 00    nopl   0x0(%rax,%rax,1)  cf:   00   d0:   bf 00 00 00 00          mov    $0x0,%edi  d5:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # dd &lt;function_unlikely+0x3d&gt;  dc:   01   dd:   e8 00 00 00 00          callq  e2 &lt;function_unlikely+0x42&gt;  e2:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # ea &lt;function_unlikely+0x4a&gt;  e9:   01   ea:   eb d7                   jmp    c3 &lt;function_unlikely+0x23&gt;\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºfunction_likelyä¸­likelyæ‹¬èµ·æ¥çš„flagåˆ¤æ–­ï¼Œæ˜¯è®¤ä¸ºflagå¤§æ¦‚ç‡ä¸ºçœŸï¼Œæ‰€ä»¥å…¶è¿›è¡Œçš„æ˜¯jeåˆ¤æ–­ï¼›è€Œå¯¹äºunlikelyæ‹¬èµ·æ¥çš„æ“ä½œï¼Œè®¤ä¸ºflagå¤§æ¦‚ç‡ä¸ºå‡ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯jneè¿›è¡Œåˆ¤æ–­\njeå’ŒjneåŠŸèƒ½ç›¸åï¼Œéƒ½æ˜¯åˆ¤æ–­ZFæ ‡è®°ä½\n\njeï¼šZF&#x3D;1çš„æ—¶å€™è·³è½¬\njneï¼šZF&#x3D;0çš„æ—¶å€™è·³è½¬\n\nç¤ºä¾‹2ä¸Šé¢çš„ä¾‹å­ç”¨çš„printfå’Œperroråº“å‡½æ•°ï¼Œæˆ‘ä»¬ä¸å¤ªå¥½è§‚å¯Ÿåˆ°äºŒè€…çš„å·®åˆ«ï¼Œæ”¹æˆå¦‚ä¸‹ä»£ç å†æ¬¡è¿›è¡Œæµ‹è¯•ï¼Œèƒ½æ›´æ˜æ˜¾çš„çœ‹åˆ°äºŒè€…ä¼˜åŒ–åçš„ä¸åŒã€‚\n#include &lt;stdio.h&gt;#include &lt;stdbool.h&gt;#define likely(x) __builtin_expect(!!(x), 1)#define unlikely(x) __builtin_expect(!!(x), 0)int test_likely(int x)&#123;    if(likely(x))    &#123;        x = 5;    &#125;    else    &#123;        x = 6;    &#125;    return x;&#125;int test_unlikely(int x)&#123;    if(unlikely(x))    &#123;        x = 5;    &#125;    else    &#123;        x = 6;    &#125;    return x;&#125;int main()&#123;    test_likely(1);    test_likely(0);    return 0;&#125;\n\nä½¿ç”¨ç›¸åŒå‘½ä»¤è¿›è¡Œç¼–è¯‘\nmain:main.c\tgcc -fprofile-arcs -O2 -c main.c\tobjdump -d main.o\n\nå¾—åˆ°æ±‡ç¼–è¾“å‡ºå¦‚ä¸‹\n0000000000000000 &lt;test_likely&gt;:   0:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 8 &lt;test_likely+0x8&gt;   7:   01    8:   b8 05 00 00 00          mov    $0x5,%eax   d:   85 ff                   test   %edi,%edi   f:   74 07                   je     18 &lt;test_likely+0x18&gt;  11:   c3                      retq     12:   66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)  18:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 20 &lt;test_likely+0x20&gt;  1f:   01   20:   b8 06 00 00 00          mov    $0x6,%eax  25:   c3                      retq     26:   66 2e 0f 1f 84 00 00    nopw   %cs:0x0(%rax,%rax,1)  2d:   00 00 00 0000000000000030 &lt;test_unlikely&gt;:  30:   85 ff                   test   %edi,%edi  32:   75 14                   jne    48 &lt;test_unlikely+0x18&gt;  34:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 3c &lt;test_unlikely+0xc&gt;  3b:   01   3c:   b8 06 00 00 00          mov    $0x6,%eax  41:   c3                      retq     42:   66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)  48:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 50 &lt;test_unlikely+0x20&gt;  4f:   01   50:   b8 05 00 00 00          mov    $0x5,%eax  55:   c3                      retq   \n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­å¯ä»¥å¾ˆæ˜æ˜¾çš„è§‚å¯Ÿåˆ°ï¼Œå¯¹äºlikelyçš„å‡½æ•°æ“ä½œï¼Œjeåç´§è·Ÿç€çš„æ˜¯\n11:   c3                      retq   12:   66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)\n\nè€Œå¯¹äºunlikelyæ“ä½œä¸­ï¼Œjneåé¢ç´§è·Ÿç€çš„æ˜¯\n34:   48 83 05 00 00 00 00    addq   $0x1,0x0(%rip)        # 3c &lt;test_unlikely+0xc&gt;3b:   01 3c:   b8 06 00 00 00          mov    $0x6,%eax\n\nä¸¤ä¸ªæ“ä½œçš„é¡ºåºæ­£å¥½å€’è¿‡æ¥äº†ï¼Œç¬¦åˆä¼˜åŒ–çš„é¢„æœŸï¼\nç»“è®ºé€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ï¼Œ__builtin_expectçš„ä¼˜åŒ–ä½œç”¨å°±ä½“ç°å‡ºæ¥äº†\n\nå½“æˆ‘ä»¬è®¤ä¸ºflagå¤§æ¦‚ç‡ä¸ºå‡çš„æ—¶å€™ï¼Œä½¿ç”¨jneåˆ¤æ–­ä¸ºçœŸçš„æƒ…å†µï¼Œå¦‚æœæ˜¯çœŸæ‰è·³è½¬ã€‚ä¸ºå‡ç»§ç»­å¾€åæ‰§è¡Œï¼›\nå¦‚æœæˆ‘ä»¬è®¤ä¸ºflagå¤§æ¦‚ç‡ä¸ºçœŸçš„æ—¶å€™ï¼Œä½¿ç”¨jeåˆ¤æ–­ä¸ºå‡çš„æƒ…å†µï¼Œå¦‚æœæ˜¯å‡æ‰è¿›è¡Œè·³è½¬ã€‚ä¸ºçœŸç»§ç»­å¾€åæ‰§è¡Œï¼›\n\nç›¸æ¯”äºç›´æ¥å¾€åæ‰§è¡Œæ±‡ç¼–ï¼Œè·³è½¬æ˜¯éœ€è¦ä¸€å®šæ¶ˆè€—çš„ï¼ä½¿ç”¨è¯¥å®è¿›è¡Œä¼˜åŒ–åï¼Œç¼–è¯‘å™¨ä¼šæŠŠæ›´æœ‰å¯èƒ½æ‰§è¡Œçš„æ“ä½œæ”¾åœ¨åˆ¤æ–­è¯­å¥ä¹‹åï¼Œé¿å…å¤šæ¬¡è·³è½¬äº§ç”Ÿçš„æ¶ˆè€—ã€‚\n// if(unlikely(flag)) // Bæ›´æœ‰å¯èƒ½æ‰§è¡Œï¼Œflagæ›´å¤§æ¦‚ç‡ä¸ºå‡if(likely(flag)) // Aæ›´æœ‰å¯èƒ½æ‰§è¡Œï¼Œflagæ›´å¤§æ¦‚ç‡ä¸ºçœŸ&#123;\t//A&#125;else&#123;\t//B&#125;\n\nå†ç”¨ä¸Šé¢è¿™ä¸ªç®€å•çš„demoæ¥è¯´æ˜ä¸€ä¸‹ï¼š\n\nä½¿ç”¨likelyè¿›è¡Œflagåˆ¤æ–­çš„æ—¶å€™ï¼Œæ±‡ç¼–è¯­å¥ä¸­ä¼šä½¿ç”¨jeåˆ¤æ–­ï¼Œå¹¶æŠŠAç´§è·Ÿç€jeåˆ¤æ–­ä¹‹åï¼›\nä½¿ç”¨unlikeyè¿›è¡Œflagåˆ¤æ–­çš„æ—¶å€™ï¼Œæ±‡ç¼–è¯­å¥ä¸­ä¼šä½¿ç”¨jneåˆ¤æ–­ï¼Œå¹¶æŠŠBç´§è·Ÿç€jneåˆ¤æ–­ä¹‹åï¼›\n\nå› ä¸ºä¾ç…§æ›´æœ‰å¯èƒ½å‘ç”Ÿçš„æƒ…å†µæ¥ç”Ÿæˆä¸åŒçš„æ±‡ç¼–ä»£ç ï¼Œå‡å°‘äº†è·³è½¬æ¬¡æ•°ï¼Œè‡ªç„¶ä¼˜åŒ–äº†æ€§èƒ½ï¼ä½ çœ‹æ˜ç™½äº†å—ï¼Ÿ\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","Cè¯­è¨€"]},{"title":"ã€ç½‘ç»œã€‘UDPå’ŒTCPåè®®è¯¦è§£","url":"/posts/4287572457/","content":"æœ¬æ–‡å¸¦ä½ è¯¦ç»†äº†è§£tcpåè®®çš„ç›¸å…³çŸ¥è¯†\n\n\n\næœ¬æ–‡ä¸­éƒ¨åˆ†æˆªå›¾ä¸ºæ‰‹å†™ï¼Œå­—ä¸‘è§è°…\n\n1.linuxä¸‹å¸¸ç”¨ç½‘ç»œå‘½ä»¤cat /etc/servcies # ç³»ç»Ÿå¸¸ç”¨æœåŠ¡å’Œç«¯å£\n\næˆ‘ä»¬è‡ªå·±å†™ç½‘ç»œæœåŠ¡å™¨è¿›ç¨‹æ—¶ï¼Œç»‘å®šçš„ç«¯å£ä¸èƒ½å’Œç³»ç»Ÿç«¯å£å†²çªã€‚å°½é‡ç»‘å®š1024ä»¥ä¸Šçš„ç«¯å£ï¼Œæ¨èç»‘å®šä¸å¸¸ç”¨çš„5ä½æ•°ç«¯å£ã€‚\nç»‘å®šä½äº1024çš„ç«¯å£ï¼Œä¼šå‡ºç°æƒé™ä¸è¶³çš„æŠ¥é”™\n$ ./tcpServer 100DEBUG | 1679473830 | muxue | socket create success: 3FATAL | 1679473830 | muxue | bind: Permission denied:3\n\n1.1 netstatå‘½ä»¤netstatnetstat -l # åªåˆ—å‡ºlistençŠ¶æ€æœåŠ¡netstat -n # å°†æ˜¾ç¤ºçš„ä¿¡æ¯ç”¨æ•°å­—ï¼ˆidï¼‰ä»£æ›¿netstat -p # æ˜¾ç¤ºç«¯å£å’Œè¿›ç¨‹pidçš„å…³è”netstat -t # tcpnetstat -u # udpnetstat -a # æ˜¾ç¤ºæ‰€æœ‰æœåŠ¡\n\n1.2 pidofè·å–æŸä¸ªè¿›ç¨‹åçš„è¿›ç¨‹pid\npidof è¿›ç¨‹å\n\næ¯”å¦‚æˆ‘æƒ³æŸ¥çœ‹sshdçš„è¿›ç¨‹id\n$ pidof sshd20706 20703 10775 6067 6009 3339 3338 3272 3269 1340\n\n2.UDPåè®®ä¸€ä¸‹ä¸ºudpæŠ¥æ–‡æ ¼å¼çš„ç»“æ„å›¾\n\nudpé‡‡ç”¨äº†å®šé•¿æŠ¥æ–‡ï¼Œè¿™ä¹Ÿæ˜¯udp é¢å‘æ•°æ®æŠ¥ çš„\n\nudpé‡‡ç”¨16ä½ä½œä¸ºip+ç«¯å£çš„å­˜æ”¾ï¼Œæºç«¯å£å’Œç›®çš„ç«¯å£ç”¨äºæ•°æ®çš„è§£åŒ…åˆ†ç”¨ï¼ˆç³»ç»Ÿéœ€è¦çŸ¥é“å½“å‰çš„æ•°æ®åŒ…åº”è¯¥ä¸¢ç»™ä¸Šå±‚çš„å“ªä¸€ä¸ªç«¯å£ï¼‰\n16ä½udpé•¿åº¦ï¼Œè¡¨ç¤ºæ•´ä¸ªæ•°æ®æŠ¥ udpé¦–éƒ¨+udpæ•°æ® çš„æœ€å¤§é•¿åº¦\n16ä½æ ¡éªŒå’Œç”¨äºæ ¡éªŒæŠ¥æ–‡æ˜¯å¦å‡ºç°é”™è¯¯ã€‚å¦‚æœæ ¡éªŒå’Œå‡ºé”™ï¼Œå°±ä¼šç›´æ¥ä¸¢å¼ƒæŠ¥æ–‡\n\nç”±äºudpçš„é•¿åº¦æ ‡å¿—ä½åªæœ‰16ä½ï¼Œæ‰€ä»¥ä¸€ä¸ªudpæŠ¥æ–‡èƒ½ä¼ è¾“çš„æœ€å¤§æ•°æ®æ˜¯64kb (216)\nå¦‚æœéœ€è¦ç”¨udpä¼ è¾“å¤§äº64kbçš„æ•°æ®ï¼Œåˆ™éœ€è¦åœ¨åº”ç”¨å±‚è¿›è¡Œæ‹†åˆ†ï¼Œåœ¨æ¥æ”¶æ–¹çš„åº”ç”¨å±‚è¿›è¡Œåˆå¹¶ã€‚\n2.1 ç†è§£æŠ¥å¤´æ‰€è°“æŠ¥å¤´ï¼Œå…¶å®å°±æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­çš„ä¸€ä¸ªCè¯­è¨€çš„ç»“æ„ä½“ã€‚\n//ç¤ºä¾‹ï¼Œä¸ä»£è¡¨çœŸå®æƒ…å†µ//udpæŠ¥å¤´é‡‡ç”¨äº†ä½æ®µstruct udp_hdr&#123;    unsigned int src_port:16;    unsigned int dst_port:16;    unsigned int udp_len:16;    unsigned int udp_check:16;&#125;\n\næ·»åŠ æŠ¥å¤´çš„æœ¬è´¨ï¼Œå…¶å®å°±æ˜¯ç»™æ•°æ®çš„å¤´éƒ¨æ·»åŠ ä¸Šä¸€ä¸ªstruct udp_hdrç»“æ„ä½“ï¼›\nè€Œè§£åŒ…çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å°†æŒ‡é’ˆç§»åŠ¨å›ºå®šé•¿åº¦ï¼ˆ8ä¸ªå­—èŠ‚ï¼‰çš„ç©ºé—´ï¼Œå°†æŒ‡é’ˆå¼ºè½¬ä¸ºstruct udp_hdrï¼Œå³è·å–åˆ°äº†å½“å‰æŠ¥æ–‡çš„udpæŠ¥å¤´\n2.2 udpçš„ç‰¹ç‚¹udpä¼ è¾“çš„è¿‡ç¨‹ç±»ä¼¼äºé£é¸½ä¼ ä¹¦\n\næ— è¿æ¥ï¼šçŸ¥é“å¯¹æ–¹çš„ip:ç«¯å£å°±èƒ½ç›´æ¥ä¼ è¾“æ•°æ®ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥\né¢å‘æ•°æ®æŠ¥ï¼šå®šé•¿æŠ¥æ–‡ï¼Œä¸èƒ½çµæ´»æ§åˆ¶æŠ¥æ–‡çš„è¯»å–æ¬¡æ•°å’Œæ•°é‡\nä¸€æ¬¡å¿…é¡»è¦è¯»å–å®Œæ¯•ä¸€ä¸ªå®Œæ•´çš„udpæŠ¥æ–‡\nå‡è®¾æŠ¥æ–‡100å­—èŠ‚ï¼Œä¸èƒ½é€šè¿‡10æ¬¡æ¯æ¬¡è¯»10å­—èŠ‚æ¥è·å–æŠ¥æ–‡ã€‚å¿…é¡»ä¸€æ¬¡è¯»å®Œ100å­—èŠ‚\n\n\nä¸å¯é ï¼šæ²¡æœ‰ç¡®è®¤æœºåˆ¶å’Œé‡ä¼ æœºåˆ¶ï¼Œå¦‚æœå› ä¸ºå„ç§åŸå› ï¼Œé¸½å­åœ¨è·¯ä¸Šå‡ºäº‹äº†ï¼Œé‚£ä¼ è¾“çš„ä¿¡æ¯ä¹Ÿç›´æ¥ä¸¢å¤±äº†ã€‚udpä¹Ÿä¸ä¼šç»™åº”ç”¨å±‚è¿”å›é”™è¯¯ä¿¡æ¯ã€‚\n\n2.3 udpç¼“å†²åŒºudpæ”¯æŒå…¨åŒå·¥ï¼Œudpçš„socketå³å¯å†™ä¹Ÿå¯è¯»\nudpæ²¡æœ‰å‘é€ç¼“å†²åŒºï¼Œåº”ç”¨å±‚è°ƒç”¨sendtoä¼šç›´æ¥å°†æ•°æ®äº¤ç»™OSå†…æ ¸ï¼ˆå…¶å®å°±æ˜¯æ‹·è´ï¼‰ï¼Œå†…æ ¸å†äº¤ç”±ç½‘ç»œæ¨¡ç»„è¿›è¡Œåç»­ä¼ è¾“ã€‚\n\nç”±äºudpé‡‡ç”¨äº†å®šé•¿æŠ¥å¤´ï¼Œå…¶æŠ¥å¤´è¾ƒä¸ºç®€å•ï¼ŒOSåªéœ€è¦æ·»åŠ ä¸ŠæŠ¥å¤´å³å¯å‘é€ã€‚è¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«ï¼Œæ‰€ä»¥ç¼“å†²åŒºçš„ä½œç”¨ä¸å¤§ã€‚\n\nudpæœ‰æ¥æ”¶ç¼“å†²åŒºï¼Œè¿™ä¸ªæ¥æ”¶ç¼“å†²åŒºåªæ˜¯ä¸€å‘³åœ°æ¥æ”¶ï¼Œå¹¶ä¸èƒ½ä¿è¯æŠ¥æ–‡çš„é¡ºåº\n\nå› ä¸ºä¸ä¿è¯é¡ºåºï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¹±åºï¼Œä¹Ÿæ˜¯udpä¸å¯é çš„ä½“ç°\n\nè‹¥ç¼“å†²åŒºæ»¡ï¼Œæ–°åˆ°è¾¾çš„udpæ•°æ®å°±ä¼šè¢«ä¸¢å¼ƒã€‚\n2.4 ä¸¢åŒ…ä¸€ä¸ªæ•°æ®åŒ…ä¸¢åŒ…å¯èƒ½æœ‰å¤šç§æƒ…å†µ\n\næ•°æ®åŒ…å†…å®¹å‡ºé”™ï¼ˆæ¯”ç‰¹ä½ç¿»è½¬ç­‰ï¼‰\næ•°æ®åŒ…å»¶è¿Ÿåˆ°è¾¾ï¼ˆå»¶è¿Ÿè¿‡ä¹…è§†ä¸ºä¸¢åŒ…ï¼‰\næ•°æ®åŒ…åœ¨è·¯ä¸Šè¢«é˜»å¡ï¼ˆåˆ°ä¸äº†ï¼‰\næ•°æ®åŒ…åœ¨è·¯ä¸Šç”±äºç½‘ç»œæ³¢åŠ¨è€Œä¸¢å¤±ï¼ˆç½‘ç»œçªç„¶æŠ½é£äº†ï¼ŒæŠ¥æ–‡ç›´æ¥ä¸è§äº†ï¼‰\n\nudpçš„æŠ¥æ–‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†udpä¸å¯é å¹¶ä¸æ˜¯ä¸€ä¸ªè´¬ä¹‰è¯ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªä¸­æ€§è¯ã€‚\n\nudpä¸å¯é æ˜¯ä»–çš„ç‰¹ç‚¹ï¼Œç”±äºudpç®€å•ï¼Œå…¶ä¸éœ€è¦è¿›è¡Œè¿æ¥ï¼ŒæŠ¥å¤´æ·»åŠ çš„æ•ˆç‡å¿«ï¼Œç”±æ­¤æ€§èƒ½æ¶ˆè€—å°äºtcpã€‚\nå¸¦æ¥çš„ç¼ºç‚¹å°±æ˜¯udpä¸å¯é \n\nåœ¨ç›´æ’­åœºæ™¯ä¸­ï¼Œudpçš„ä½¿ç”¨å¾ˆå¤šã€‚åŒä¸€åœºç›´æ’­è§‚çœ‹çš„äººæ•°ä¼šå¾ˆå¤šï¼Œå¦‚æœæ¯ä¸€ä¸ªç”¨æˆ·éƒ½ç»´æŒä¸€ä¸ªtcpè¿æ¥ï¼ŒæœåŠ¡å™¨çš„è´Ÿè½½å°±å¤ªå¤§äº†ã€‚ç”¨udpå°±èƒ½ç›´æ¥å‘è¯¥ç”¨æˆ·å¹¿æ’­æ•°æ®ï¼Œè´Ÿè½½å°ã€‚\n2.5 åŸºäºudpçš„åº”ç”¨å±‚åè®®\nNFS: ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ\nTFTP: ç®€å•æ–‡ä»¶ä¼ è¾“åè®®\nDHCP: åŠ¨æ€ä¸»æœºé…ç½®åè®®\nBOOTP: å¯åŠ¨åè®®ï¼ˆç”¨äºæ— ç›˜è®¾å¤‡å¯åŠ¨ï¼‰\nDNS: åŸŸåè§£æåè®®\n\n\næœ¬æ–‡å¾€ä¸‹éƒ½æ˜¯tcpçš„å†…å®¹äº†å“¦ï¼\n3.TCPåè®®ä¸‹å›¾ä¸ºtcpåè®®æŠ¥å¤´çš„ä¸€ä¸ªåŸºæœ¬ç»“æ„å›¾ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£æ•´ä¸ªç»“æ„ï¼Œä»¥åŠæ¯ä¸€ä¸ªéƒ¨åˆ†çš„ä½œç”¨\n\n3.1 æºå’Œç›®çš„ç«¯å£å·è¿™éƒ¨åˆ†å’Œudpç›¸åŒï¼Œtcpä¹Ÿéœ€è¦æºç«¯å£å’Œç›®çš„ç«¯å£å·ï¼Œä»¥ç”¨äºæ‰¾åˆ°æŠ¥æ–‡è¦å»çš„ç›®çš„åœ°ã€‚\n3.2 4ä½é¦–éƒ¨é•¿åº¦ç›¸æ¯”äºudpçš„å®šé•¿æŠ¥å¤´ï¼Œtcpé‡‡ç”¨äº†ä¸å®šé•¿çš„æ–¹å¼ã€‚ä½†tcpçš„æŠ¥å¤´æœ‰æ ‡å‡†çš„20å­—èŠ‚ï¼Œæ‰€æœ‰æŠ¥å¤´éƒ½è‡³å°‘æœ‰20å­—èŠ‚ã€‚\nåœ¨è¿™20å­—èŠ‚ä¸­ï¼Œæœ‰ä¸€ä¸ª4ä½é¦–éƒ¨é•¿åº¦ï¼Œç”¨äºæ ‡è¯†tcpæŠ¥æ–‡çš„çœŸå®é•¿åº¦ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œ4ä½äºŒè¿›åˆ¶å¯ä»¥è¡¨ç¤º0~15ï¼Œè¿™ä¸æ¯”å›ºå®šçš„20å­—èŠ‚è¿˜å°‘å—ï¼Ÿéš¾é“è¯´ï¼Œè¿™4ä½é¦–éƒ¨é•¿åº¦æ ‡è¯†çš„æ˜¯æ¯”20å­—èŠ‚å¤šä½™çš„å†…å®¹ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼è¿™4ä½é¦–éƒ¨é•¿åº¦çš„æ ‡è¯†æ˜¯æœ‰å•ä½çš„ï¼Œæ¯ä¸€ä½é¦–éƒ¨é•¿åº¦ï¼Œå®é™…ä¸Šä»£è¡¨çš„æ˜¯4å­—èŠ‚ï¼Œå³tcpæŠ¥å¤´çš„æœ€å¤§é•¿åº¦ä¸º 15*4=60 å­—èŠ‚ã€‚\nç”±äºæ ‡å‡†é•¿åº¦ä¹Ÿè®°å…¥4ä½é¦–éƒ¨é•¿åº¦ï¼Œæ‰€ä»¥4ä½é¦–éƒ¨é•¿åº¦çš„æœ€å°å€¼ä¸º 0101\n\nè¯»å–tcpæŠ¥æ–‡çš„æ—¶å€™ï¼Œåªéœ€è¦å…ˆè¯»å–20å­—èŠ‚ï¼Œå†ä»è¿™20å­—èŠ‚ä¸­å–å‡º4ä½é¦–éƒ¨é•¿åº¦ï¼Œè·å¾—æŠ¥å¤´çš„å®é™…é•¿åº¦ï¼›å†é‡æ–°è¯»å–ï¼Œå³è·å¾—äº†å®Œæ•´çš„tcpæŠ¥å¤´ã€‚å‰©ä¸‹çš„éƒ¨åˆ†å°±æ˜¯æŠ¥æ–‡æºå¸¦çš„æ•°æ®äº†ï¼ˆæœ‰æ•ˆè½½è·ï¼‰\n3.2.1 TCPæŠ¥æ–‡å®Œæ•´é•¿åº¦ä¸€ä¸ªTCPæŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ä¸º65495å­—èŠ‚.\nTCPå°è£…åœ¨IPå†…ï¼ŒIPæŠ¥å¤´æœ‰ä¸€ä¸ªæœ€å¤§é•¿åº¦å­—æ®µæ˜¯16ä½ï¼Œå³65535 (2^16 - 1)ï¼ŒIPå¤´éƒ¨æœ€å°20ï¼ŒTCPå¤´éƒ¨é•¿åº¦æœ€å°20ï¼Œæ‰€ä»¥æœ€å¤§å°è£…æ•°æ®é•¿åº¦ä¸º 65535-20-20=65495ï¼›\n3.3 32ä½åºå·&#x2F;ç¡®è®¤åºå·3.3.1 å¦‚ä½•ç¡®è®¤ä¿¡æ¯è¢«å¯¹æ–¹æ”¶åˆ°ï¼Ÿ\ntcpå…·æœ‰ç¡®è®¤åº”ç­”çš„æœºåˆ¶\n\nå½“æˆ‘ä»¬å’Œå¯¹æ–¹å¾®ä¿¡äº¤æµçš„æ—¶å€™ï¼Œæ€ä¹ˆæ ·æ‰èƒ½ç¡®è®¤è‡ªå·±çš„ä¿¡æ¯è¢«å¯¹æ–¹çœ‹åˆ°äº†ï¼Ÿ\n\nAå‘ï¼šåƒé¥­äº†å—ï¼Ÿ\nBå›åº”ï¼šåƒäº†\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œåªæœ‰Bç»™Aå‘å‡ºå›åº”ï¼ŒAæ‰èƒ½ç¡®è®¤è‡ªå·±çš„æ¶ˆæ¯è¢«Bçœ‹åˆ°äº†ã€‚\ntcpé€šä¿¡ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæœ‰ç»™å¯¹æ–¹å‘é€çš„æŠ¥æ–‡æ”¶åˆ°äº†å¯¹æ–¹çš„åº”ç­”ï¼Œå‘é€æ–¹æ‰èƒ½ç¡®è®¤è‡ªå·±çš„æŠ¥æ–‡è¢«å¯¹æ–¹æ”¶åˆ°äº†ã€‚\nä¸ºæ­¤ï¼Œtcpå¼•å…¥äº†32ä½ åºå·/ç¡®è®¤åºå·\n\n3.3.2 ç¡®è®¤åº”ç­”ç”¨äºç¡®è®¤è‡ªå·±å’Œå¯¹æ–¹çš„é€šä¿¡ï¼Œç©¶ç«Ÿæ”¶åˆ°äº†å“ªä¸€ä¸ªæŠ¥æ–‡ï¼ˆåºå·ï¼‰ä»¥åŠç¡®è®¤ä¿¡æ¯å‘å‡ºçš„é¡ºåºã€‚\næ¯”å¦‚å®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨å‘ åƒäº†å—ï¼Ÿåƒçš„ä»€ä¹ˆï¼Ÿå¥½åƒå—ï¼Ÿæ™šä¸Šæƒ³å»å¹²ä»€ä¹ˆï¼Ÿï¼Œå¦‚æœæ²¡æœ‰å¯¹æŠ¥å¤´å¸¦ä¸Šåºå·ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°çš„å¯èƒ½å°±ä¼šæ˜¯ä¸‹é¢è¿™æ · å¥½åƒå—ï¼Ÿæ™šä¸Šæƒ³å»å¹²ä»€ä¹ˆï¼Ÿåƒçš„ä»€ä¹ˆï¼Ÿåƒäº†å—ï¼Ÿï¼Œçœ‹èµ·æ¥æ˜¯ä¸æ˜¯ååˆ†æ€ªå¼‚ï¼Ÿ\næ‰€ä»¥ï¼Œä¸ºäº†ä¿è¯tcpæŠ¥æ–‡çš„é¡ºåºæ€§ï¼Œä»¥åŠä¿è¯æŠ¥æ–‡è¢«é€è¾¾åˆ°å¯¹æ–¹ã€‚tcpå¼•å…¥äº†ä»¥åºå·ä¸ºåŸºç¡€çš„ç¡®è®¤åº”ç­”æœºåˆ¶ï¼š\n\nå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæŠ¥å¤´ï¼Œå¹¶å°†åºå·è®¾ç½®ä¸º1\næœåŠ¡ç«¯æ”¶åˆ°ä¿¡æ¯åï¼Œå›å¤å®¢æˆ·ç«¯ä¸€ä¸ªæŠ¥å¤´ï¼Œå°†ç¡®è®¤åºå·è®¾ç½®ä¸º2ï¼ˆä¸ºå·²ç»æ”¶åˆ°äº†çš„å®¢æˆ·ç«¯æ¶ˆæ¯çš„åºå·+1ã€‚ç¡®è®¤åºå·ä¸º2ï¼Œä»£è¡¨1å·æŠ¥æ–‡æ”¶åˆ°ï¼ŒæœŸæœ›æ”¶åˆ°2å·æŠ¥æ–‡ï¼‰\næ­¤æ—¶å®¢æˆ·ç«¯å°±èƒ½ç¡®è®¤æœåŠ¡å™¨æ”¶åˆ°äº†è‡ªå·±åˆšåˆšå‘å‡ºçš„åºå·ä¸º1çš„æ¶ˆæ¯\nä¸‹æ¬¡å‘é€æ¶ˆæ¯ï¼Œå®¢æˆ·ç«¯ä¼šä»2å·å¼€å§‹å‘é€\n\nä»¥ä¸Šæ˜¯ä¸€æ¬¡é€šä¿¡çš„è¿‡ç¨‹ï¼Œå¦‚æœæ˜¯å¤šæ¬¡é€šä¿¡å‘¢ï¼Ÿ\n\nå®¢æˆ·ç«¯è¿ç»­å‘æœåŠ¡å™¨å‘é€äº†nä¸ªæ¶ˆæ¯ï¼ŒæœåŠ¡å™¨åº”ç­”ï¼š1ã€2ã€3ã€4â€¦â€¦\næœåŠ¡å™¨çš„æ¯æ¬¡åº”ç­”ä¼šè®¾ç½®ç¡®è®¤åºå·ï¼Œä»£è¡¨nä¹‹å‰çš„æŠ¥æ–‡ï¼ˆä¸åŒ…æ‹¬nè‡ªå·±ï¼‰è¢«å…¨éƒ¨æ”¶åˆ°\næ¯”å¦‚å‡è®¾å®¢æˆ·ç«¯å‘é€äº†1-10çš„æŠ¥æ–‡ï¼Œè€Œç¬¬6ä¸ªæŠ¥æ–‡å‡ºç°äº†ä¸¢å¤±ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å°±åº”è¯¥è®¾ç½®ç¡®è®¤åºå·ä¸º6ï¼Œä»£è¡¨6ä¹‹å‰çš„æŠ¥æ–‡éƒ½è¢«æ­£å¸¸æ”¶åˆ°ã€‚\næ­¤æ—¶å®¢æˆ·ç«¯å‘ç°ï¼Œæ˜æ˜è‡ªå·±å·²ç»éƒ½å‘åˆ°10äº†ï¼ŒæœåŠ¡ç«¯è¿˜åœ¨å›åº”6ã€‚è¿™å°±ä»£è¡¨å‘é€è¿‡ç¨‹ä¸­ï¼Œ6å·æŠ¥æ–‡ä¸¢å¤±äº†ï¼äºæ˜¯å®¢æˆ·ç«¯ä»6å·æŠ¥æ–‡å¼€å§‹ï¼Œé‡å‘æŠ¥æ–‡ï¼š6ã€7ã€8â€¦â€¦\n\nä¸ç®¡æ˜¯æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å‘ä¿¡æ¯ï¼Œè¿˜æ˜¯å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘ä¿¡æ¯ï¼Œæ”¶æ–¹éƒ½éœ€è¦å¯¹ä¿¡æ¯è¿›è¡Œå›åº”ã€‚tcpé€šä¿¡ä¸­ï¼Œé€šä¿¡åŒæ–¹åœ°ä½æ˜¯å¯¹ç­‰çš„ï¼\né‡ç‚¹ï¼šTCPç¡®è®¤åºå·åº”è¯¥è®¾ç½®ä¸ºå·²ç»æˆåŠŸæ”¶åˆ°çš„æŠ¥æ–‡çš„ä¸‹ä¸€ä½åºå·\n3.3.3 ä¸ºä»€ä¹ˆæœ‰ä¸¤ç»„ç¡®è®¤åºå·ï¼Ÿtcpæ˜¯å…¨åŒå·¥çš„ï¼Œé€šä¿¡ä¸€æ–¹åœ¨å‘é€å“åº”ä¿¡æ¯çš„åŒæ—¶ï¼Œå¯èƒ½ä¹Ÿä¼šæºå¸¦æ–°çš„æŠ¥æ–‡ç»™å¯¹æ–¹ã€‚\n\nå®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘äº†ä¸€æ¡æ¶ˆæ¯ åƒäº†å—ï¼Ÿ\næœåŠ¡å™¨åœ¨å›å¤çš„åŒæ—¶ï¼Œä¹Ÿå¸¦ä¸Šäº†æ–°çš„è¯·æ±‚ åƒäº†ï¼Œä½ å‘¢ï¼Ÿ\næœåŠ¡å™¨çš„è¿™ç§ç­–ç•¥å«åšï¼šæå¸¦åº”ç­”\n\næ­¤æ—¶æœåŠ¡ç«¯å°±éœ€è¦åœ¨å¡«å……å®¢æˆ·ç«¯æ¶ˆæ¯çš„ç¡®è®¤åºå·çš„åŒæ—¶ï¼Œå¡«å……è‡ªå·±æ‰€å‘æ¶ˆæ¯çš„åºå·ã€‚è¿™æ ·æ‰èƒ½ä¿è¯tcpåœ¨åŒå‘äº¤æµä¸­çš„å¯é æ€§ï¼\næ‰€ä»¥åœ¨tcpæŠ¥å¤´ä¸­ï¼Œåºå·å’Œç¡®è®¤åºå·ç¼ºä¸€ä¸å¯ï¼\n3.3.4 æ²¡æœ‰å®Œç¾çš„åè®®ï¼ç»è¿‡ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ€»æœ‰ä¸€æ¡æŠ¥æ–‡ï¼Œåœ¨æ”¶åˆ°å¯¹æ–¹å›åº”ä¹‹å‰ï¼Œæ˜¯æ— æ³•å¾—çŸ¥å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ä¿¡æ¯çš„ã€‚\nè¿™ä¹Ÿè¯´æ˜ï¼šæ²¡æœ‰ä¸€å®šå¯é çš„åè®®ï¼\n3.3.5 æŒ‰åºåˆ°è¾¾\nåºå·é™¤äº†ç”¨äºç¡®è®¤åº”ç­”ï¼Œè¿˜æœ‰å¤šä¸ªåŠŸèƒ½\n\nä¿è¯æ•°æ®çš„é¡ºåºæ”¶å‘é—®é¢˜\n\næ¯”å¦‚ä¸€ä¸ªhttpçš„æŠ¥å¤´ï¼ŒåŸæœ¬çš„æ ¼å¼åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·\nGET / HTTP/1.1\n\nç»“æœç”±äºä¼ è¾“çš„è¿‡ç¨‹ä¸­ä¹±åºäº†ï¼Œå˜æˆäº†ä¸‹é¢è¿™æ ·\nHTTP/1.1 GET /\n\nè¿™ç§æƒ…å†µï¼Œæ˜¯ä¸èƒ½è¢«åº”ç”¨å±‚æ‰€æ­£å¸¸è§£æçš„ï¼æ•°æ®å…¨éƒ½ä¹±äº†ï¼ŒåŸæœ¬å†™å¥½çš„ä»£ç ä¹Ÿæ²¡ç”¨äº†ã€‚\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…æ•°æ®åœ¨ä¼ è¾“ä¸­ä¹±åºï¼Œtcpçš„åºå·å°±æœ‰äº†æ–°çš„åŠŸèƒ½â€”â€”ä¿è¯æ•°æ®çš„æŒ‰åºåˆ°è¾¾ã€‚\n1.å®¢æˆ·ç«¯å‘é€äº†1-5å·æŠ¥æ–‡2.æœåŠ¡ç«¯æ”¶åˆ°äº†1 3 4 2 5ï¼ˆä¹±åºï¼‰3.æœåŠ¡ç«¯åœ¨tcpçš„æ¥æ”¶ç¼“å†²åŒºä¸­ï¼Œå°†æŠ¥æ–‡é‡æ’åºä¸º1-54.å°†é‡æ’åºåçš„æ­£ç¡®æ•°æ®äº¤ä»˜ç»™åº”ç”¨å±‚\n\nä½†æ˜¯ï¼Œå¦‚æœåªæŒ‰é¡ºåºæ¥æ¥æ”¶æ•°æ®ï¼Œé‚£å°±æ— æ³•å¤„ç†ä¼˜å…ˆçº§é—®é¢˜ã€‚è¿™éƒ¨åˆ†å°†åœ¨åæ–‡6ä¸ªæ ‡è®°ä½è¯¦è§£ã€‚\nåºå·é™¤äº†å¯ä»¥ç”¨äºæ’åºï¼Œè¿˜èƒ½ç”¨äºå»é‡ï¼Œè¿™éƒ¨åˆ†ä¹Ÿå°†åœ¨åæ–‡è¶…æ—¶é‡ä¼ éƒ¨åˆ†è§£æã€‚\n3.4 16ä½çª—å£å¤§å°3.4.1 å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºtcpåŒæ—¶æ‹¥æœ‰å‘é€å’Œæ¥æ”¶ç¼“å†²åŒºã€‚\n\næˆ‘ä»¬åœ¨åº”ç”¨å±‚è°ƒç”¨çš„read/writeå‡½æ•°ï¼Œå®é™…ä¸Šåªæ˜¯å°†æ•°æ®ä»æ¥æ”¶ç¼“å†²åŒºä¸­æ‹·è´å‡ºæ¥/å‘é€çš„æ•°æ®æ‹·è´åˆ°å‘é€ç¼“å†²åŒºã€‚\n\nå¦‚æœwriteåŒ…å«å°†æ•°æ®å‘é€ç»™å¯¹æ–¹çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°çš„è°ƒç”¨æ•ˆç‡å°±å¤ªä½äº†ï¼Œå½±å“åº”ç”¨å±‚æ‰§è¡Œå…¶ä»–ä»£ç ã€‚\n\næ•°æ®å¹¶æ²¡æœ‰è¢«ç«‹å³é€å…¥ç½‘ç»œä¼ è¾“ï¼Œè€Œæ˜¯ç”±tcpåè®®è‡ªä¸»å†³å®šå‘é€æ•°æ®çš„é•¿åº¦å’Œå‘é€çš„æ—¶é—´ï¼è¿™ä¸€åˆ‡ï¼Œéƒ½æ˜¯ç”±æ“ä½œç³»ç»Ÿæ¥å†³å®šçš„ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆtcpåˆç§°ä¸ºä¼ è¾“æ§åˆ¶åè®®ï¼\n3.4.2 æ¥æ”¶ç¼“å†²åŒºæ»¡äº†å’‹åŠæ—¢ç„¶æœ‰ç¼“å†²åŒºï¼Œå°±è‚¯å®šä¼šå­˜åœ¨ç¼“å†²åŒºè¢«å†™æ»¡çš„é—®é¢˜ã€‚\n\nå‘é€ç¼“å†²åŒºæ»¡ï¼Œç”±æ“ä½œç³»ç»Ÿå‘ŠçŸ¥åº”ç”¨å±‚ï¼Œä¸å†å¾€å‘é€ç¼“å†²åŒºä¸­å†™å…¥æ•°æ®\næ¥å—ç¼“å†²åŒºæ»¡\nç›´æ¥ä¸¢å¼ƒæ•°æ®ï¼Ÿ\nå‘Šè¯‰å¯¹æ–¹ï¼Œä¸å†ç»™è‡ªå·±å‘ä¿¡æ¯ï¼Ÿ\n\n\n\nåœ¨å®é™…çš„tcpæ”¶å‘è¿‡ç¨‹ä¸­ï¼Œç”±äºæ¥æ”¶æ–¹ç¼“å†²åŒºæ»¡è€Œä¸¢å¼ƒæ•°æ®ï¼Œæ˜¯ä¸å¯æ¥å—çš„ã€‚å› ä¸ºæ•°æ®è·¨è¿‡äº†èŒ«èŒ«ç½‘ç»œï¼Œéƒ½å·²ç»åˆ°ä½ æœºå™¨ä¸Šäº†ï¼Œç»“æœå› ä¸ºä½ ç¼“å†²åŒºæ»¡äº†ç»™å®ƒä¸¢æ‰äº†ï¼Œè¿™ä¸æ˜¯å‘äººå—ï¼Ÿ\nè™½ç„¶å‡ºç°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è®©å‘é€æ–¹é‡ä¼ æŠ¥æ–‡ï¼Œä½†è¿™æ ·æ•ˆç‡å¤ªä½ï¼\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥è®©æ”¶å‘åŒæ–¹çŸ¥æ™“å¯¹æ–¹çš„ç¼“å†²åŒºå¤§å°ï¼Œä»è€Œé¿å…è¿™ä¸ªé—®é¢˜ï¼\nè¿™å°±æ˜¯tcpæŠ¥å¤´ä¸­16ä½çª—å£å¤§å°çš„ä½œç”¨äº†ï¼\n3.4.3 å‘ŠçŸ¥å¯¹æ–¹æ”¶ç¼“å¤§å°å¦‚ä¸‹å›¾ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’é€šæœ‰æ— çš„æ—¶å€™ï¼Œå‡è®¾æœåŠ¡ç«¯çš„æ¥æ”¶ç¼“å†²åŒºæ»¡äº†ï¼Œåº”è¯¥å‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œè®©ä»–åˆ«å†ç»™è‡ªå·±å‘æ¶ˆæ¯äº†ã€‚\næ­¤æ—¶ï¼ŒæœåŠ¡ç«¯è®¾ç½®è‡ªå·±çš„16ä½çª—å£å¤§å°ï¼Œä»¥æ­¤å‘ŠçŸ¥å®¢æˆ·ç«¯è‡ªå·±çš„ç¼“å†²åŒºå‰©ä½™å®¹é‡ã€‚\nå¦‚æœå¯¹æ–¹å‘æ¥çš„æŠ¥æ–‡ä¸­ï¼Œ16ä½çª—å£å¤§å°æ‰€è¡¨ç¤ºçš„ç¼“å†²åŒºå‰©ä½™å®¹é‡å·²ç»ä¸è¶³äº†ï¼Œå‘é€æ–¹å°±ä¸åº”è¯¥ç»§ç»­å‘é€ï¼Œè€Œåº”è¯¥ç­‰å¾…å¯¹æ–¹ä»ç¼“å†²åŒºä¸­å–èµ°æ•°æ®ã€‚\n\nè¿™æ˜¯å·²ç»å¼€å§‹é€šè®¯çš„æƒ…å†µï¼Œä½†å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡é€šè®¯å‘¢ï¼Ÿå¦‚æœå®¢æˆ·ç«¯ä¸€æ¥å°±å‘é€äº†ä¸€ä¸ªå·¨å¤§çš„æ•°æ®ï¼Œç›´æ¥å¡æ»¡äº†æœåŠ¡ç«¯çš„ç¼“å†²åŒºï¼Œé‚£ä¸æ˜¯å‡ºäº‹äº†ï¼Ÿ\nè¿™ä¾¿æ˜¯tcpåœ¨ä¸‰æ¬¡æ¡æ‰‹ä¸­è¦åšçš„äº‹æƒ…äº†ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨é€šä¿¡å¼€å§‹å‰å°±äº’ç›¸å‘ŠçŸ¥è‡ªå·±ç¼“å†²åŒºçš„å¤§å°ã€‚åæ–‡ä¼šè®²è§£ã€‚\n3.4.4 ç¼“å†²åŒºæ˜¯å¦ç‹¬ç«‹ï¼Ÿ\nè¿›ç¨‹çš„tcpç¼“å†²åŒºæ˜¯ç‹¬ç«‹çš„å—ï¼Ÿ\n\næ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„å†…æ ¸ç©ºé—´ï¼Œå†…æ ¸ç©ºé—´é‡Œæœ‰tcpç¼“å†²åŒºï¼Œæ‰€ä»¥æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„tcpç¼“å†²åŒº\n\nçº¿ç¨‹çš„tcpç¼“å†²åŒºæ˜¯ç‹¬ç«‹çš„å—ï¼Ÿ\n\næ˜¯çš„ï¼è™½ç„¶è¿™äº›çº¿ç¨‹å…±äº«åŒä¸€ä¸ªå†…æ ¸TCPç¼“å†²åŒºï¼Œä½†æ˜¯æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨çš„ç¼“å†²åŒºæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ç›¸ä¹‹é—´ä¸ä¼šäº§ç”Ÿå†²çªã€‚æ¯ä¸ªçº¿ç¨‹å¯¹è‡ªå·±çš„ç¼“å†²åŒºè¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œä¼šä½¿ç”¨å†…æ ¸æä¾›çš„åŒæ­¥æœºåˆ¶ï¼Œå¦‚äº’æ–¥é”ã€ä¿¡å·é‡ç­‰æ¥ç¡®ä¿çº¿ç¨‹ä¹‹é—´çš„ç¼“å†²åŒºä¸ä¼šäº’ç›¸å¹²æ‰°ï¼Œä»è€Œå®ç°æ•°æ®çš„å®‰å…¨è¯»å†™ã€‚\n3.5 å…­ä¸ªæ ‡è®°ä½åœ¨4ä½é¦–éƒ¨é•¿åº¦å³ä¾§ï¼Œæœ‰ä¸€å—ä¿ç•™é•¿åº¦ï¼Œå’Œ6ä¸ªæ ‡è®°ä½ã€‚è¿™å…­ä¸ªæ ‡è®°ä½æ˜¯æ‰€æœ‰è®¾å¤‡éƒ½æ”¯æŒçš„æ ‡è®°ä½ã€‚\n\n\nSYN: è¿æ¥æ ‡è®°ä½ï¼Œç”¨äºå»ºç«‹è¿æ¥ï¼ˆåˆç§°åŒæ­¥æŠ¥æ–‡ï¼‰\nFIN: è¡¨ç¤ºè¯·æ±‚å…³é—­è¿æ¥ï¼Œåˆç§°ä¸ºç»“æŸæŠ¥æ–‡\nACKï¼šå“åº”æŠ¥æ–‡ï¼Œä»£è¡¨æœ¬æ¬¡æŠ¥æ–‡ä¸­åŒ…å«å¯¹ä¹‹å‰æŠ¥æ–‡çš„ç¡®è®¤åº”ç­”\nPSHï¼šè¦æ±‚å¯¹æ–¹ç«‹é©¬ä»tcpç¼“å†²åŒºä¸­å–èµ°æ•°æ®\nURGï¼šç´§æ€¥æŒ‡é’ˆæ ‡è®°ä½ï¼Œç”¨äºç´§æ€¥æ•°æ®çš„ä¼ è¾“\nRSTï¼šè¦æ±‚é‡ç½®è¿æ¥ï¼ˆåŒæ–¹é‡æ–°å»ºç«‹ä¸€æ¬¡æ–°çš„tcpè¿æ¥ï¼‰\n\n3.5.1 8ä¸ªæ ‡è®°ä½ï¼Ÿåœ¨éƒ¨åˆ†ä¹¦ç±ä¸­ï¼Œè¿˜ä¼šå‡ºç°8ä¸ªæ ‡è®°ä½ä¸4ä½ä¿ç•™é•¿åº¦çš„è¯´æ³•ï¼ˆä¸‹å›¾æºè‡ªã€Šå›¾è§£tcp&#x2F;ipç¬¬äº”ç‰ˆã€‹ï¼‰\n\n\nCWRï¼ˆCongestion Window Reducedï¼‰ï¼šè¯¥æ ‡å¿—ä½ç”¨äºé€šçŸ¥å¯¹æ–¹è‡ªå·±å·²ç»å°†æ‹¥å¡çª—å£ç¼©å°ã€‚åœ¨TCP SYNæ¡æ‰‹æ—¶ï¼Œå‘é€æ–¹ä¼šå°†CWRæ ‡å¿—ä½è®¾ç½®ä¸º1ï¼Œè¡¨ç¤ºå®ƒæ”¯æŒECNï¼ˆExplicit Congestion Notificationï¼‰æ‹¥å¡æ§åˆ¶ï¼Œå¹¶ä¸”æ¥æ”¶åˆ°çš„TCPåŒ…çš„IPå¤´éƒ¨çš„ECNè¢«è®¾ç½®ä¸º11ã€‚å¦‚æœå‘é€æ–¹æ”¶åˆ°äº†ä¸€ä¸ªè®¾ç½®äº†ECEï¼ˆECN Echoï¼‰æ ‡å¿—ä½çš„TCPæ•°æ®åŒ…ï¼Œåˆ™å®ƒå°†è°ƒæ•´è‡ªå·±çš„æ‹¥å¡çª—å£ï¼Œå°±åƒå®ƒä»ä¸¢å¤±çš„æ•°æ®åŒ…ä¸­å¿«é€Ÿæ¢å¤ä¸€æ ·ã€‚ç„¶åï¼Œå‘é€æ–¹ä¼šåœ¨ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ä¸­è®¾ç½®CWRæ ‡å¿—ä½ï¼Œå‘æ¥æ”¶æ–¹è¡¨æ˜å®ƒå·²å¯¹æ‹¥å¡åšå‡ºååº”ã€‚å‘é€æ–¹åœ¨æ¯ä¸ªRTTï¼ˆRound Trip Timeï¼‰é—´éš”æœ€å¤šåšå‡ºä¸€æ¬¡è¿™ç§ååº”ã€‚\nECEï¼ˆECN Echoï¼‰ï¼šè¯¥æ ‡å¿—ä½ç”¨äºé€šçŸ¥å¯¹æ–¹ä»å¯¹æ–¹åˆ°è¿™è¾¹çš„ç½‘ç»œæœ‰æ‹¥å¡ã€‚åœ¨æ”¶åˆ°æ•°æ®åŒ…çš„IPé¦–éƒ¨ä¸­ECNä¸º1æ—¶ï¼ŒTCPé¦–éƒ¨ä¸­çš„ECEä¼šè¢«è®¾ç½®ä¸º1ã€‚æ¥æ”¶æ–¹ä¼šåœ¨æ‰€æœ‰æ•°æ®åŒ…ä¸­è®¾ç½®ECEæ ‡å¿—ä½ï¼Œä»¥ä¾¿é€šçŸ¥å‘é€æ–¹ç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ã€‚\n\nè€Œæˆ‘ç™¾åº¦åˆ°çš„æ–‡ç« æåˆ°ï¼Œtcpç»™å¤šå‡ºæ¥çš„ä¸¤ä¸ªæ ‡è®°ä½æ–°å¢äº†åŠŸèƒ½ï¼š\n\né™¤äº†ä»¥ä¸Š6ä¸ªæ ‡å¿—ä½ï¼Œè¿˜æœ‰ä¸€ä¸ªå®éªŒæ€§çš„æ ‡å¿—ä½NSï¼ˆNonce Sumï¼‰ï¼Œç”¨äºé˜²æ­¢TCPå‘é€è€…çš„æ•°æ®åŒ…æ ‡è®°è¢«æ„å¤–æˆ–æ¶æ„æ”¹åŠ¨ã€‚NSæ ‡å¿—ä½ä»ç„¶æ˜¯ä¸€ä¸ªå®éªŒæ ‡å¿—ï¼Œç”¨äºå¸®åŠ©é˜²æ­¢å‘é€è€…çš„æ•°æ®åŒ…æ ‡è®°è¢«æ„å¤–æˆ–æ¶æ„æ›´æ”¹ã€‚3 4\nTCPæ ‡å¿—ä½ä¸­è¿˜æœ‰ä¸¤ä¸ªæ ‡å¿—ä½åæ¥åŠ çš„ä¸€ä¸ªåŠŸèƒ½ï¼šæ˜¾å¼æ‹¥å¡é€šçŸ¥ï¼ˆECNï¼‰ã€‚ECNå…è®¸æ‹¥å¡æ§åˆ¶çš„ç«¯å¯¹ç«¯é€šçŸ¥è€Œé¿å…ä¸¢åŒ…ã€‚ä½†æ˜¯ï¼ŒECNåœ¨æŸäº›è€æ—§çš„è·¯ç”±å™¨å’Œæ“ä½œç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼šWindows XPï¼‰ä¸Šä¸å—æ”¯æŒã€‚åœ¨TCPè¿æ¥ä¸Šä½¿ç”¨ECNä¹Ÿæ˜¯å¯é€‰çš„ï¼›å½“ECNè¢«ä½¿ç”¨æ—¶ï¼Œå®ƒå¿…é¡»åœ¨è¿æ¥åˆ›å»ºæ—¶é€šè¿‡SYNå’ŒSYN-ACKæ®µä¸­åŒ…å«é€‚å½“é€‰é¡¹æ¥åå•†ã€‚ 2 3\n\nè¯¸å¦‚tcpçš„æ ‡è®°ä½åˆ°åº•æ˜¯6ä¸ªè¿˜æ˜¯8ä¸ª? è¿™ç§æ‘¸æ£±ä¸¤å¯çš„é—®é¢˜ï¼Œåœ¨è€ƒè¯•ä¸­ä¸ä¼šé—®é“ã€‚\nåœ¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡æ‰€æœ‰è®¾å¤‡éƒ½æ”¯æŒçš„6ä¸ªæ ‡è®°ä½å³å¯\n\n3.5.2 ACKè¯¥æ ‡è®°ä½ç”¨äºæ ‡è¯†æœ¬æ¡æŠ¥æ–‡æ˜¯å¯¹ä¹‹å‰çš„æŠ¥æ–‡çš„ç¡®è®¤åº”ç­”ã€‚è®¾ç½®äº†æ”¹æ ‡è®°ä½ï¼Œé‚£ä¹ˆæ¥æ”¶æ–¹å°±åº”è¯¥å»æŸ¥çœ‹è¯¥æŠ¥æ–‡ä¸­çš„ç¡®è®¤åº”ç­”åºå·ã€‚\nACKæ ‡è®°ä½çš„è®¾ç½®å’Œå…¶ä»–æ ‡è®°ä½å¹¶ä¸å†²çªï¼Œåœ¨æå¸¦åº”ç­”çš„æ—¶å€™ï¼Œå¯ä»¥åŒæ—¶è®¾ç½®åŒ…æ‹¬ACKåœ¨å†…çš„å¤šä¸ªæ ‡è®°ä½ï¼Œè€Œä¸å½±å“å½“å‰æŠ¥æ–‡çš„åŸæœ¬åŠŸèƒ½\n3.5.3 SYN&#x2F;FIN\nSYNï¼šè¡¨ç¤ºè¯·æ±‚å»ºç«‹è¿æ¥ï¼Œå¹¶åœ¨å»ºç«‹è¿æ¥æ—¶ç”¨äºåŒæ­¥åºåˆ—å·ï¼Œæ‰€ä»¥åˆç§°ä¸ºåŒæ­¥æŠ¥æ–‡ï¼›\nFINï¼šè¡¨ç¤ºè¯·æ±‚å…³é—­è¿æ¥ï¼Œåˆç§°ä¸ºç»“æŸæŠ¥æ–‡ã€‚è®¾ç½®ä¸º1æ—¶ï¼Œä»£è¡¨æœ¬æ–¹å¸Œæœ›æ–­å¼€è¿æ¥ã€‚æ­¤æ—¶åŒæ–¹è¦äº¤æ¢FINï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰æ‰èƒ½çœŸæ­£æ–­å¼€tcpè¿æ¥ã€‚\n\n\n3.5.3.1 ä¸‰æ¬¡æ¡æ‰‹åœ¨ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™ï¼Œç»å†äº†å¦‚ä¸‹è¿‡ç¨‹\n\nè¿æ¥å‘æ–¹Aå‘å¯¹æ–¹ä¸»æœºBå‘é€SYNæŠ¥æ–‡ï¼Œè¯·æ±‚å»ºç«‹è¿æ¥ï¼ˆAè¿›å…¥SYN-SENTçŠ¶æ€ï¼‰\nä¸»æœºBåœ¨æ”¶åˆ°æŠ¥æ–‡åï¼Œå›åº”ACK+SYNçš„æŠ¥æ–‡ï¼Œåœ¨ç¡®è®¤åº”ç­”çš„åŒæ—¶ï¼Œè¯·æ±‚å»ºç«‹è¿æ¥ï¼ˆBè¿›å…¥SYN-RCVDçŠ¶æ€ï¼‰\nAæ”¶åˆ°è¿™æ¡æŠ¥æ–‡åï¼Œå‘é€ç¡®è®¤åº”ç­”ACKï¼ˆAè®¤ä¸ºè¿æ¥æˆåŠŸå»ºç«‹ ESTABLISHEDï¼‰\nBæ”¶åˆ°Aå‘é€çš„ACKï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæˆï¼ˆBè®¤ä¸ºè¿æ¥æˆåŠŸå»ºç«‹  ESTABLISHEDï¼‰\n\nA     SYN-&gt;      BA(SYN_SENT)      BA   &lt;-SYN+ACK    BA      (SYN_RCVD)BA     ACK-&gt;      BA(ESTABLISHED)   BA   (ESTABLISHED)B æ”¶åˆ°ACK\n\nä¸ºä»€ä¹ˆæ¥æ”¶æ–¹è¦å‘é€ACK+SYN\nä¸ºä»€ä¹ˆæ¥æ”¶æ–¹è¦å‘é€ACK+SYNï¼Œè€Œä¸æ˜¯åªå‘é€ACKï¼Ÿ\n\næ¥æ”¶æ–¹å‘é€å¸¦æœ‰ACK+SYNæ ‡å¿—çš„æ•°æ®åŒ…ï¼Œæ˜¯ä¸ºäº†ç¡®è®¤æ”¶åˆ°äº†å‘é€æ–¹çš„SYNï¼Œå¹¶å‘å‘é€æ–¹è¡¨æ˜è‡ªå·±ä¹ŸåŒæ„å»ºç«‹è¿æ¥ã€‚ACKå­—æ®µç”¨äºç¡®è®¤æ”¶åˆ°äº†ä¹‹å‰çš„æ•°æ®åŒ…ï¼Œè€ŒSYNå­—æ®µç”¨äºè¡¨ç¤ºæ¥æ”¶æ–¹ä¹Ÿå¸Œæœ›å»ºç«‹è¿æ¥ã€‚\nè‹¥æ¥æ”¶æ–¹åªå‘é€ACKè€Œä¸å¸¦SYNæ ‡å¿—ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚å› ä¸ºTCPä¸­çš„ACKå­—æ®µè¡¨ç¤ºç¡®è®¤æ”¶åˆ°ä¹‹å‰çš„æ•°æ®åŒ…ï¼Œè€Œåœ¨åˆå§‹æ¡æ‰‹é˜¶æ®µï¼ŒåŒæ–¹éƒ½è¿˜æ²¡æœ‰è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ‰€ä»¥ACKå­—æ®µæ— æ³•æ˜ç¡®æŒ‡ç¤ºæ˜¯åœ¨ç¡®è®¤SYNè¿˜æ˜¯ç¡®è®¤å…¶ä»–æ•°æ®åŒ…ã€‚å› æ­¤ï¼Œå‘é€æ–¹åœ¨æ”¶åˆ°åªå¸¦ACKæ ‡å¿—çš„æ•°æ®åŒ…æ—¶ï¼Œæ— æ³•å‡†ç¡®çŸ¥é“æ¥æ”¶æ–¹æ˜¯å¦åŒæ„å»ºç«‹è¿æ¥ã€‚\né€šè¿‡åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­åŒæ—¶å‘é€ACK+SYNæ ‡å¿—ï¼Œæ¥æ”¶æ–¹å¯ä»¥åœ¨ä¸€ä¸ªæ•°æ®åŒ…ä¸­æ˜ç¡®è¡¨ç¤ºä¸¤ä¸ªä¿¡æ¯ï¼šç¡®è®¤æ”¶åˆ°å‘é€æ–¹çš„SYNï¼Œå¹¶è¡¨ç¤ºè‡ªå·±ä¹Ÿæ„¿æ„å»ºç«‹è¿æ¥ã€‚è¿™æ ·å°±èƒ½å¤Ÿç¡®ä¿åŒæ–¹åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­èƒ½å¤Ÿå‡†ç¡®ç†è§£å¯¹æ–¹çš„æ„å›¾ï¼Œå¹¶å»ºç«‹èµ·å¯é çš„è¿æ¥ã€‚\n3.5.3.2 å››æ¬¡æŒ¥æ‰‹åœ¨æ–­å¼€è¿æ¥ï¼Œå››æ¬¡æŒ¥æ‰‹çš„æ—¶å€™ï¼Œç»å†äº†å¦‚ä¸‹è¿‡ç¨‹\n\nAè¦æ–­å¼€è¿æ¥ï¼Œå‘é€FINï¼ˆAè¿›å…¥FIN WAIT 1çŠ¶æ€ï¼‰\nBæ”¶åˆ°äº†FINï¼Œå‘é€ACKï¼ˆBè¿›å…¥CLOSE-WAITåŠå…³é—­çŠ¶æ€ï¼‰\nAæ”¶åˆ°äº†ACKï¼ˆAè¿›å…¥FIN WAIT 2çŠ¶æ€)\næ­¤æ—¶åªæ˜¯Aè¦å’ŒBå•æ–¹é¢åˆ†æ‰‹ï¼ŒA-&gt;Bçš„è·¯è¢«åˆ‡æ–­äº†ï¼Œä½†æ˜¯B-&gt;Açš„è¿˜æ²¡æœ‰ï¼ŒBè¿˜èƒ½ç»§ç»­ç»™Aå‘æ•°æ®\nBå‘å®Œæ•°æ®äº†ï¼Œä¹Ÿå’ŒAåˆ†æ‰‹äº†ï¼ŒBå‘é€FINï¼ˆBè¿›å…¥LAST ACKçŠ¶æ€ï¼‰\nAæ”¶åˆ°FINï¼Œå‘é€å›åº”ACKï¼ˆAè¿›å…¥TIME WAITçŠ¶æ€ï¼Œå°†åœ¨ä¸€æ®µæ—¶é—´åè¿›å…¥CLOSEæ–­è¿çŠ¶æ€ï¼‰\nBæ”¶åˆ°äº†ACKï¼ˆBè¿›å…¥CLOSEçŠ¶æ€ï¼‰\nè¿æ¥å…³é—­\n\næˆ‘ä»¬ä¸ä»…éœ€è¦çŸ¥é“3æ¬¡æ¡æ‰‹å’Œ4æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ï¼Œè¿˜éœ€è¦çŸ¥é“æ¯ä¸€æ¬¡çš„çŠ¶æ€å˜åŒ–ï¼\n\n3æ¬¡æ¡æ‰‹å’Œ4æ¬¡æŒ¥æ‰‹å¯¹äºåº”ç”¨å±‚è€Œè¨€ï¼Œéƒ½åªæœ‰1ä¸ªå¯¹åº”çš„å‡½æ•°ã€‚è¿™äº›æ“ä½œéƒ½æ˜¯ç”±tcpè‡ªä¸»å®Œæˆçš„ã€‚\n3.5.4 PSHPSHæ ‡è®°ä½çš„ä½œç”¨æ˜¯ï¼šè¦æ±‚å¯¹æ–¹ç«‹é©¬å–èµ°ç¼“å†²åŒºä¸­æ•°æ®\nå¦‚ä¸‹å›¾ï¼ŒSåœ¨æ¥æ”¶ç¼“å†²åŒºæ»¡äº†ä¹‹åè¿‡äº†å¾ˆä¹…ï¼Œè¿˜æ²¡æœ‰å–èµ°ç¼“å†²åŒºä¸­çš„æ•°æ®ï¼ŒCå®åœ¨å¿ä¸ä½äº†ï¼Œç»™Så‘ä¸€ä¸ªPSHæ ‡è®°ä½çš„æŠ¥æ–‡ï¼Œè¦æ±‚Sç«‹é©¬å–èµ°è¿™äº›æ•°æ®ï¼\n\ntcpåœ¨æ”¶åˆ°æ­¤æŠ¥æ–‡åï¼Œå°†ç”±æ“ä½œç³»ç»Ÿå‘ŠçŸ¥åº”ç”¨å±‚ï¼Œå–èµ°ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚\nå¦‚æœåº”ç”¨å±‚ä¸å¬æ“ä½œç³»ç»Ÿçš„å’‹åŠï¼Ÿé‚£å°±ä»£è¡¨åº”ç”¨å±‚å†™çš„æœ‰bugï¼äººå®¶ç»™ä½ å‘äº†é‚£ä¹ˆå¤šä¸œè¥¿äº†ä½ è¿˜ä¸å¤„ç†ï¼Œæœ‰ç‚¹è¿‡åˆ†äº†ï¼\n3.5.5 URGURGæ˜¯ç´§æ€¥æŒ‡é’ˆæ ‡è®°ä½ã€‚\nåœ¨3.3.5 æŒ‰åºåˆ°è¾¾éƒ¨åˆ†æåˆ°è¿‡ï¼Œå¦‚æœåªå…³æ³¨åºå·ï¼Œåˆ™æ— æ³•å¤„ç†ä¼˜å…ˆçº§é—®é¢˜ã€‚æœ‰ä¸€äº›æ•°æ®å¯¹äºåº”ç”¨å±‚æ¥è¯´ï¼Œä¼˜å…ˆçº§è¾ƒé«˜ã€‚å¦‚æœtcpåªä¼šè€è€å®å®çš„æŒ‰é¡ºåºæŠŠæ•°æ®äº¤ä»˜ç»™åº”ç”¨å±‚ï¼Œé‚£åœ¨é«˜ä¼˜å…ˆçº§çš„æ•°æ®ä¹Ÿæä¸è¿‡æ“ä½œç³»ç»Ÿå¯¹tcpçš„å¤„ç†ã€‚\næ‰€ä»¥ï¼Œä¸ºäº†èƒ½æ“ä½œä¼˜å…ˆçº§ï¼Œtcpæä¾›äº†URGæ ‡è®°ä½ï¼Œè®¾ç½®äº†æ­¤æ ‡è®°ä½çš„æŠ¥æ–‡å…·æœ‰è¾ƒé«˜ä¼˜å…ˆçº§ã€‚\nåº”ç”¨å±‚æœ‰ä¸“é—¨çš„æ¥å£å¯ä»¥ä¼˜å…ˆè¯»å–å¸¦æœ‰URGæ ‡è®°ä½çš„æŠ¥æ–‡ã€‚\n3.5.5.1 16ä½ç´§æ€¥æŒ‡é’ˆä¸ºäº†èƒ½æ ‡è¯†è¿™ä¸ªç´§æ€¥æ•°æ®åœ¨æŠ¥æ–‡ä¸­çš„ä½ç½®ï¼Œtcpè¿˜æä¾›äº†16ä½ç´§æ€¥æŒ‡é’ˆï¼›è¿™ä¸ªæŒ‡é’ˆçš„æŒ‡å‘ä¾¿æ˜¯ç´§æ€¥æ•°æ®åœ¨tcpæŠ¥æ–‡ä¸­çš„åç§»é‡ã€‚ç´§æ€¥æ•°æ®è§„å®šåªæœ‰1ä¸ªå­—èŠ‚ï¼\nç”±äºç´§æ€¥æŒ‡é’ˆçš„æ•°æ®å¯ä»¥è¢«æå‰è¯»å–ï¼Œä¸å—tcpç¼“å†²åŒºçš„çº¦æŸï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºå¸¦å¤–æ•°æ®\nä¸‹å›¾å°±ä¸¾äº†ä¸€ä¸ªç´§æ€¥æŒ‡é’ˆä½¿ç”¨çš„åœºæ™¯ï¼š\n\nTCP åœ¨ä¼ è¾“æ•°æ®æ—¶æ˜¯æœ‰é¡ºåºçš„ï¼Œå®ƒæœ‰å­—èŠ‚å·ï¼ŒURGé…åˆç´§æ€¥æŒ‡é’ˆï¼Œå°±å¯ä»¥æ‰¾åˆ°ç´§æ€¥æ•°æ®çš„å­—èŠ‚å·ã€‚\nç´§æ€¥æ•°æ®çš„å­—èŠ‚å·å…¬å¼å¦‚ä¸‹ï¼š\nç´§æ€¥æ•°æ®å­—èŠ‚å·(urgSeq) = TCPæŠ¥æ–‡åºå·(seq) + ç´§æ€¥æŒ‡é’ˆ(urgpoint) âˆ’1\n\næ¯”å¦‚å›¾ä¸­çš„ä¾‹å­ï¼Œå¦‚æœ seq = 10,urgpoint = 5ï¼Œé‚£ä¹ˆå­—èŠ‚åºå· urgSeq = 10 + 5 -1 = 14\n\nçŸ¥é“äº†å­—èŠ‚å·åï¼Œå°±å¯ä»¥è®¡ç®—ç´§æ€¥æ•°æ®å­—ä½äºæ‰€æœ‰ä¼ è¾“æ•°æ®ä¸­çš„ç¬¬å‡ ä¸ªå­—èŠ‚äº†ã€‚å¦‚æœä»ç¬¬0ä¸ªå­—èŠ‚å¼€å§‹ç®—èµ·ï¼Œé‚£ä¹ˆç´§æ€¥æ•°æ®å°±æ˜¯ç¬¬urgSeq - ISN - 1ä¸ªå­—èŠ‚ï¼ˆISN è¡¨ç¤ºåˆå§‹åºåˆ—å·ï¼‰ï¼Œå‡1è¡¨ç¤ºä¸åŒ…æ‹¬ç¬¬ä¸€ä¸ªSYNæ®µï¼Œå› ä¸ºä¸€ä¸ªSYNæ®µä¼šæ¶ˆè€—ä¸€ä¸ªå­—èŠ‚å·ã€‚\n3.5.6 RSTRSTä¸ºå¤ä½æŠ¥æ–‡ï¼Œå³RESETã€‚\nå¦‚ä¸‹å›¾ï¼Œå¦‚æœAç»™Bå‘é€çš„ACKåœ¨ä¼ è¾“è·¯é€”ä¸Šä¸¢å¤±äº†ï¼Œå’‹åŠï¼Ÿ\n\nè¿™æ—¶å€™ï¼Œå°±ä¼šå‡ºç°Aè®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ï¼Œè€ŒBç”±äºæ²¡æ”¶åˆ°Açš„ACKè€Œå¤„äºSYN-RCVDçŠ¶æ€ã€‚\n\næ­¤æ—¶Aå¼€å§‹ç»™Bå‘é€æ•°æ®ï¼ŒBä¸€çœ‹ï¼Œä¸æ˜¯è¯´å¥½äº†è¦å»ºç«‹è¿æ¥æ‰èƒ½å‘é€æ•°æ®çš„å—ï¼Œä½ è¿™æ˜¯åœ¨å¹²å˜›ï¼Ÿ\näºæ˜¯Bå‘ŠçŸ¥Aï¼Œå‘é€RSTæ ‡å¿—ä½çš„æŠ¥æ–‡ï¼Œè¦æ±‚å’ŒAé‡æ–°å»ºç«‹è¿æ¥ï¼ˆé‡æ–°è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼‰\né‡æ–°å»ºç«‹è¿æ¥æˆåŠŸåï¼ŒABå†æ­£å¸¸å‘é€ä¿¡æ¯ã€‚\n\nä»¥ä¸Šåªæ˜¯RSTä½¿ç”¨çš„æƒ…å†µä¹‹ä¸€ã€‚æˆ‘ä»¬ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä¸€äº›ç½‘é¡µæ—¶ï¼ŒF5åˆ·æ–°å°±å¯ä»¥ç†è§£ä¸ºæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€äº†ä¸€ä¸ªå¸¦æœ‰RSTæ ‡è®°ä½çš„æŠ¥æ–‡ã€‚\n3.6 ä¸ºä»€ä¹ˆæ˜¯3æ¬¡æ¡æ‰‹ï¼Ÿä¸ºä»€ä¹ˆæ¡æ‰‹çš„æ¬¡æ•°æ˜¯3æ¬¡ï¼Œä¸æ˜¯1æ¬¡ã€2æ¬¡ã€4æ¬¡ã€5æ¬¡ï¼Ÿ\nåœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬è¦çŸ¥é“ï¼šè¿æ¥å»ºç«‹æ˜¯æœ‰æ¶ˆè€—çš„ï¼éœ€è¦ç»´æŠ¤å…¶ç¼“å­˜åŒºã€è¿æ¥æè¿°ç¬¦ï¼ˆlinuxä¸‹ä¸ºæ–‡ä»¶æè¿°ç¬¦ï¼‰ç­‰ç­‰æ•°æ®ã€‚åŸºäºè¿™ç‚¹è®¤è¯†ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹\n\nå¦‚æœæ˜¯ä¸€æ¬¡æ¡æ‰‹ï¼Ÿ\n\nä¸€æ¬¡æ¡æ‰‹ï¼Œå³Aç»™Bå‘é€ä¸€ä¸ªSYNï¼ŒåŒæ–¹å°±è®¤ä¸ºè¿æ¥å»ºç«‹äº†ã€‚\né‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æ‹¿ä¸ªæœºå™¨ï¼Œå†™ä¸ªæ­»å¾ªç¯ï¼Œä¸€ç›´ç»™å¯¹æ–¹å‘é€SYNï¼Œè‡ªå·±ç›´æ¥ä¸¢å¼ƒæ–‡ä»¶æè¿°ç¬¦ï¼ˆä¸åšç»´æŠ¤ï¼‰\nç”±äºæœåŠ¡å™¨å¹¶ä¸çŸ¥é“ä½ ï¼ˆå‘é€æ–¹ï¼‰ç›´æ¥ä¸¢å¼ƒäº†æ–‡ä»¶æè¿°ç¬¦ï¼Œå…¶è¿˜æ˜¯è¦ä¸ºæ­¤æ¬¡è¿æ¥ç»´æŠ¤ç›¸å…³æ•°æ®ï¼Œè¿™æ ·ä¼šå¯¼è‡´æœåŠ¡å™¨çš„èµ„æºï¼ˆä¸ºäº†ç»´æŠ¤tcpé“¾æ¥ï¼‰åœ¨çŸ­æ—¶é—´å†…è¢«å¤§é‡æ¶ˆè€—ï¼Œæœ€åç›´æ¥deadäº†\n\nè¿™ç§æ”»å‡»å«åšSYNæ´ªæ°´\n\n\nå¦‚æœæ˜¯äºŒæ¬¡æ¡æ‰‹ï¼Ÿ\n\nAç»™Bå‘é€ä¸€ä¸ªSYNï¼ŒBç»™Aå‘é€ä¸€ä¸ªACKï¼Œå³è®¤ä¸ºè¿æ¥å»ºç«‹ã€‚\nè¿™å’Œä¸€æ¬¡æ¡æ‰‹å…¶å®æ˜¯ç›¸ä¼¼çš„ï¼ŒæœåŠ¡å™¨å‘é€å®Œæ¯•ACKä¹‹åï¼Œå°±è®¤ä¸ºè¿æ¥å·²ç»å»ºç«‹ï¼Œéœ€è¦ç»´æŠ¤ç›¸å…³èµ„æºã€‚è€Œæˆ‘ä»¬ä¾æ—§å¯ä»¥ç›´æ¥ä¸¢å¼ƒï¼Œä¸è¿›è¡Œä»»ä½•ç»´æŠ¤ï¼Œæœ€åè¿˜æ˜¯æœåŠ¡å™¨çš„èµ„æºè¢«æ¶ˆè€—å®Œäº†\n\nä¸‰æ¬¡æ¡æ‰‹\n\nä¸‰æ¬¡æ¡æ‰‹äº†ä¹‹åï¼ŒåŒæ–¹éƒ½å¿…é¡»ç»´æŠ¤è¿æ¥çš„ç›¸å…³èµ„æºï¼›è¿™æ ·ï¼Œå“ªæ€•ä½ æ”»å‡»æˆ‘çš„æœåŠ¡å™¨ï¼Œä½ ä¹Ÿå¾—ä»˜å‡ºåŒç­‰çš„èµ„æºæ¶ˆè€—ã€‚æœ€åå°±æ˜¯æ¯”è°èµ„æºæ›´å¤šå‘—ï¼\nç›¸æ¯”äºå‰ä¸¤ç§æƒ…å†µï¼Œä¸‰æ¬¡æ¡æ‰‹èƒ½åœ¨éªŒè¯å…¨åŒå·¥çš„åŒæ—¶ï¼Œä¸€å®šç¨‹åº¦ä¸Šé¿å…æ”»å‡»ã€‚\nä¸‰æ¬¡æ¡æ‰‹è¿˜å°†æœ€åä¸€æ¬¡ACKä¸¢å¤±çš„æˆæœ¬å«æ¥ç»™äº†å®¢æˆ·ç«¯ï¼ˆè¿æ¥å‘èµ·æ–¹ï¼‰å¦‚æœæœ€åä¸€æ¬¡ACKä¸¢å¤±ï¼Œè¦ç”±å®¢æˆ·ç«¯é‡æ–°å‘èµ·å’ŒæœåŠ¡å™¨çš„è¿æ¥ã€‚\næ³¨æ„ï¼Œä¸‰æ¬¡æ¡æ‰‹åªæ˜¯ä¸€å®šç¨‹åº¦ä¸Šé¿å…æ”»å‡»ã€‚æˆ‘ä»¬ä¾æ—§å¯ä»¥ç”¨å¾ˆå¤šå®¿ä¸»æœºâ€œå †æ–™â€æ¥å’ŒæœåŠ¡å™¨ç¡¬ç¢°ç¡¬ï¼Œè¿™æ˜¯æ— å¯é¿å…çš„æƒ…å†µã€‚\n\næ›´å¤šæ¬¡æ¡æ‰‹ï¼Ÿ\n\nç”±äºä¸‰æ¬¡æ¡æ‰‹å·²ç»æ»¡è¶³äº†æˆ‘ä»¬çš„è¦æ±‚ï¼Œæ›´å¤šæ¬¡æ¡æ‰‹ä¾æ—§æœ‰è¢«æ”»å‡»çš„å¯èƒ½ï¼Œè¿˜é™ä½äº†æ•ˆç‡ï¼Œå®Œå…¨æ²¡å¿…è¦ï¼\n\n3.7 è¶…æ—¶é‡ä¼ 3.7.1 è¶…æ—¶é‡ä¼ çš„è¯´æ˜ä¸ºäº†ä¿è¯å¯é æ€§ï¼Œå¦‚æœä¸€ä¸ªæŠ¥æ–‡é•¿æ—¶é—´æœªæ”¶åˆ°å¯¹æ–¹çš„ACKå›åº”ï¼Œåˆ™éœ€è¦è¿›è¡Œè¶…æ—¶é‡ä¼ ã€‚\nlinuxä¸‹æ¯ä¸€æ¬¡å°è¯•çš„æ—¶é—´é—´éš”ä¸º500msï¼Œè‹¥500mså†…å°šæœªæ”¶åˆ°å¯¹æ–¹çš„ACKï¼Œåˆ™é‡å‘æŠ¥æ–‡ï¼Œå†ç­‰å¾…1000msâ€¦â€¦ä»¥æ­¤ç±»æ¨ã€‚\n\nè¶…æ—¶é‡ä¼ è¿˜å¯èƒ½é‡åˆ°ä¸‹é¢çš„æƒ…å†µï¼š\n\næœåŠ¡å™¨æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œä¹Ÿå‘é€äº†ACKï¼Œä½†æ˜¯ACKåœ¨è·¯ä¸Šä¸¢å¤±äº†\nå®¢æˆ·ç«¯æ²¡æœ‰æ”¶åˆ°ACKï¼Œäºæ˜¯è¿›è¡Œè¶…æ—¶é‡ä¼ \næœåŠ¡å™¨å†æ¬¡æ”¶åˆ°äº†æ¶ˆæ¯ï¼Œæ­¤æ—¶æ¥æ”¶ç¼“å†²åŒºé‡Œå‡ºç°äº†ä¸¤ä¸ªä¸€æ ·çš„æ•°æ®\n\nä½†æ˜¯ï¼Œæˆ‘ä»¬çš„æŠ¥æ–‡æ˜¯æœ‰åºå·çš„ï¼Œtcpå°±å¯ä»¥ç›´æ¥æ ¹æ®åºå·å»é‡ï¼Œæ‰€ä»¥ï¼Œtcpäº¤ç»™åº”ç”¨å±‚çš„æ•°æ®æ˜¯å»é‡+æ’åºä¹‹åçš„æ•°æ®ï¼åº”ç”¨å±‚å¹¶ä¸éœ€è¦æ‹…å¿ƒæ•°æ®é‡å¤æˆ–è€…é¡ºåºæœ‰è¯¯çš„æƒ…å†µã€‚\nå¦‚æœåŒä¸€ä¸ªæŠ¥æ–‡è¶…æ—¶é‡ä¼ äº†å¥½å‡ æ¬¡ï¼Œè¿˜æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„åº”ç­”ï¼Œå°±ä¼šè®¤ä¸ºå¯¹æ–¹çš„æœåŠ¡æŒ‚æ‰äº†ï¼Œæ­¤æ—¶æœ¬ç«¯ä¼šå¼ºåˆ¶æ–­è¿ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å°±å¯ä»¥å‘é€ä¸€ä¸ªå¸¦æœ‰RSTæ ‡è®°ä½çš„æŠ¥æ–‡ï¼Œè¦æ±‚å’Œå¯¹æ–¹é‡æ–°å»ºç«‹è¿æ¥ã€‚å¦‚æœé‡è¿å¤±è´¥ï¼Œåˆ™å¯ä»¥è®¤ä¸ºå¯¹æ–¹ç¡®å®æŒ‚æ‰äº†ï¼Œè¿™ä¾¿æ˜¯æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æœ‰æ—¶ä¼šçœ‹åˆ°çš„ SERVICE_UNAVALIABLE æœåŠ¡ä¸å¯ç”¨ï¼›\n3.7.2 è¶…æ—¶é‡ä¼ æ—¶é—´RTOçš„é€‰æ‹©è¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©æ˜¯TCPæœ€å¤æ‚çš„é—®é¢˜ä¹‹ä¸€ã€‚\né¦–å…ˆè¦çŸ¥é“ä¸€ä¸ªæ¦‚å¿µï¼šå¾€è¿”æ—¶é—´RTTï¼Œå³ä¸€ç«¯å‘é€ä¸€ä¸ªæŠ¥æ–‡+æ”¶åˆ°ACKæŠ¥æ–‡çš„æ—¶é—´ï¼›\n\nå¦‚æœè¶…æ—¶é‡ä¼ æ—¶é—´RTOè®¾ç½®çš„å°äºå¾€è¿”æ—¶é—´RTTï¼Œåˆ™ä¼šäº§ç”Ÿä¸å¿…è¦çš„é‡ä¼ ï¼ŒåŠ å¤§ç½‘ç»œæ‹¥å¡\nå¦‚æœè¶…æ—¶é‡ä¼ æ—¶é—´RTOè®¾ç½®çš„è¿œå¤§äºå¾€è¿”æ—¶é—´RTTï¼Œåˆ™ä¼šå¯¼è‡´ç½‘ç»œä¸­å‡ºç°å¤§æ®µç©ºé—²ï¼Œç½‘ç»œä½¿ç”¨æ•ˆç‡é™ä½\n\nç”±æ­¤å¯ä»¥å¾—åˆ°ä¸€ä¸ªæš‚æ—¶çš„ç»“è®ºï¼šè¶…æ—¶é‡ä¼ æ—¶é—´RTOçš„å€¼åº”è¯¥è®¾ç½®ä¸ºç•¥å¤§äºRTTçš„å€¼\n\nä½†æ˜¯ï¼Œè¿™ä¸ªé—®é¢˜çš„å¤æ‚åœ¨äºï¼ŒTCPä¸‹å±‚çš„ç½‘ç»œç¯å¢ƒéšæ—¶éƒ½æœ‰å¯èƒ½å˜åŒ–ï¼Œå¾€è¿”æ—¶é—´RTTä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰æå…·çš„æ³¢åŠ¨ï¼Œå› æ­¤RTOä¹Ÿå¾—è·Ÿç€RTTå®æ—¶å‘ç”Ÿå˜åŒ–ã€‚\næ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒRTT1å¤§äºRTT0ï¼Œæ­¤æ—¶RTOå°±ä¸å†é€‚ç”¨äºRTT1çš„æƒ…å†µï¼Œä¼šé€ æˆä¸å¿…è¦çš„é‡ä¼ ã€‚\n\næ‰€ä»¥ï¼Œå¹¶ä¸èƒ½ç®€å•çš„ä½¿ç”¨æŸæ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬æ¥è®¡ç®—è¶…æ—¶é‡ä¼ æ—¶é—´RTOã€‚\nè€Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªåŠ æƒå…¬å¼æ¥è®¡ç®—å¹³å‡å¾€è¿”æ—¶é—´RTTsï¼Œåˆç§°ä¸ºå¹³æ»‘å¾€è¿”æ—¶é—´ã€‚$$RTT_{si} &#x3D; RTT_{i} \\æ–° RTT_{s} &#x3D; (1-Î±) * æ—§  RTT_{s} + Î±*æ–°RTTæ ·æœ¬$$åœ¨ä¸Šè¿°å…¬å¼ä¸­ï¼Œ0&lt;=Î±&lt;1\n\nå¦‚æœÎ±å¾ˆæ¥è¿‘äº0ï¼Œåˆ™æ–°RTTæ ·æœ¬å¯¹RTTså½±å“ä¸å¤§\nå¦‚æœÎ±å¾ˆæ¥è¿‘äº1ï¼Œåˆ™æ–°RTTæ ·æœ¬å¯¹RTTsçš„å½±å“è¾ƒå¤§\n\nå·²æˆä¸ºå»ºè®®æ ‡å‡†çš„RFC6298æ¨èçš„Î±å€¼ä¸º1&#x2F;8ï¼Œå³0.125ï¼›\nç”¨è¿™ç§æ–¹å¼å¾—åˆ°çš„åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTså°±æ¯”æµ‹é‡å‡ºçš„RTTå€¼æ›´åŠ å¹³æ»‘ã€‚è¶…æ—¶é‡ä¼ æ—¶é—´RTOåº”è¯¥ç•¥å¤§äºåŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsï¼›\nRFC6298å»ºè®®ä½¿ç”¨ä¸‹å¼è®¡ç®—å‡ºè¶…æ—¶é‡ä¼ æ—¶é—´RTO$$RTO &#x3D; RTT_S +4*RTT_D$$RTTåå·®çš„åŠ æƒå¹³å‡RTTdçš„è®¡ç®—å…¬å¼å¦‚ä¸‹$$RTT_{DI} &#x3D; RTT_I &#x2F;2 \\æ–° RTT_D &#x3D; (1-Î²) * æ—§ RTT_d + Î² * |RTT_S - æ–°RTTæ ·æœ¬| \\0&lt;&#x3D;Î²&lt;1$$å·²æˆä¸ºå»ºè®®æ ‡å‡†çš„RFC6298æ¨èçš„Î²å€¼ä¸º1&#x2F;4ï¼Œå³0.25ï¼›\n\nç”±æ­¤å¯è§ï¼Œè¶…æ—¶é‡ä¼ æ—¶é—´RTOçš„è®¡ç®—åŸºäºæ–°çš„RTTæ ·æœ¬ã€‚ä½†æ˜¯åœ¨å·²ç»å‡ºç°è¶…æ—¶é‡ä¼ çš„æƒ…å†µä¸‹ï¼ŒRTTçš„æµ‹é‡å¹¶ä¸å®¹æ˜“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå·¦ä¾§æ˜¯å‘é€çš„ç¬¬ä¸€ä¸ªæŠ¥æ–‡ä¸¢å¤±ï¼Œè¿›è¡Œè¶…æ—¶é‡ä¼ åæ”¶åˆ°ACKçš„æƒ…å†µã€‚ä½†æ˜¯Aä¸»æœºå¹¶æ²¡æœ‰åŠæ³•ç¡®è®¤è¿™ä¸ªACKæ˜¯å¯¹ç¬¬ä¸€ä¸ªä¸¢å¤±æŠ¥æ–‡çš„ç¡®è®¤ï¼Œè¿˜æ˜¯å¯¹è¶…æ—¶é‡ä¼ åçš„æŠ¥æ–‡çš„ç¡®è®¤ï¼ŒRTTå°±æœ‰å¯èƒ½ä¼šæœ‰ä¸¤ä¸ªå–å€¼ï¼Œå¦‚æœå–å€¼é”™è¯¯ï¼Œå°±å®¹æ˜“å‡ºç°é—®é¢˜ã€‚å³ä¾§æƒ…å†µä¹Ÿæ˜¯åŒç†\n\nå› ä¸ºè¿™ç§è¶…æ—¶é‡ä¼ çš„æƒ…å†µæ— æ³•å¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„æ–°RTTæ ·æœ¬ï¼Œæ‰€ä»¥Karnæå‡ºä¸€ä¸ªç®—æ³•ï¼Œå¦‚æœå‡ºç°è¶…æ—¶é‡ä¼ ï¼Œåˆ™ä¸æ›´æ–°RTTså’ŒRTOã€‚ä½†è¿™ä¸ªç®—æ³•å¹¶ä¸å®Œå–„ï¼Œéœ€è¦ä¿®æ­£ï¼šæŠ¥æ–‡æ®µæ¯é‡ä¼ ä¸€æ¬¡ï¼Œå°±å°†RTOç¨å¾®å¢å¤§ä¸€äº›ï¼Œå…¸å‹çš„åšæ³•æ˜¯å°†RTOå–å€¼ä¸ºæ—§RTOå€¼çš„2å€ã€‚\n\n3.7.3 è¶…æ—¶é‡ä¼ æ—¶é—´ä¾‹é¢˜\n\n3.8 å‡ºç°äº†å¾ˆå¤šCLOSE-WAITçŠ¶æ€çš„è¿æ¥ï¼Ÿåœ¨ä¸Šé¢æåˆ°è¿‡ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€FINä¹‹åï¼ŒæœåŠ¡å™¨å›å¤ACKï¼Œä¼šè¿›å…¥CLOSE-WAITçŠ¶æ€ã€‚æ­¤æ—¶æœåŠ¡å™¨è¿˜èƒ½ç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼ŒåŒæ–¹éƒ½è¿˜åœ¨ç»´æŠ¤è¿æ¥çš„ç›¸å…³èµ„æºã€‚\nå¦‚æœä¸€ä¸ªæœåŠ¡å‡ºç°äº†å¾ˆå¤šä¸ªå¤„äºCLOSE-WAITçŠ¶æ€çš„è¿æ¥ï¼Œå°±å¿…é¡»è¦æ£€æŸ¥ä¸€ä¸‹ï¼Œåº”ç”¨å±‚çš„ä»£ç é‡Œé¢æ˜¯ä¸æ˜¯æ²¡æœ‰è°ƒç”¨close(fd)å‡½æ•°æ¥å…³é—­å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\n\nä¸€æ–¹çš„close(fd)å°±å¯¹åº”äº†ä¸¤æ¬¡æŒ¥æ‰‹ï¼Œä¸¤ç«¯éƒ½è¿›è¡Œclose(fd)å³å››æ¬¡æŒ¥æ‰‹ã€‚\n\nå¯¹æ–¹æ˜æ˜éƒ½è¦å’Œä½ åˆ†æ‰‹äº†ï¼Œä½ è¿˜æŒ‚ç€å¯¹æ–¹å½“å¤‡èƒï¼Œè¿˜è¦æ‰¾å¯¹æ–¹è¦é’±ï¼Œä¹Ÿå¤ªä¸åƒè¯äº†ğŸ˜‚\n3.8.1 æ´»å­¦æ´»ç”¨ğŸ¤£230322ä¸‹åˆï¼Œæ­£å‡†å¤‡é€šè¿‡ä¹‹å‰å†™çš„tcpä»£ç æ¥éªŒè¯tcpæ¡æ‰‹å’ŒæŒ¥æ‰‹çš„å„ä¸ªçŠ¶æ€çš„ï¼Œæ²¡æƒ³åˆ°ç”¨å‘½ä»¤ä¸€çœ‹ï¼Œå…¨æ˜¯CLOSE-WAITçŠ¶æ€ï¼Œå¡«æ»¡äº†æ•´ä¸ªå±å¹•ï¼Œè¿™å®Œå…¨æ²¡åŠæ³•å†™åšå®¢å•Š\n\nè€Œä¸”è¿™äº›çŠ¶æ€æ¸…ä¸€è‰²æ¥è‡ªpython3.10çš„ç¨‹åºï¼Œçœ‹åˆ°å®ƒçš„æ—¶å€™ï¼Œæˆ‘å·²ç»åŸºæœ¬çŒœåˆ°äº†æ˜¯å•¥è¿›ç¨‹å¼•å‘çš„äº†â€”â€”æˆ‘çš„ä¸¤ä¸ªvalorantæœºå™¨äººã€‚æŸ¥äº†æŸ¥pidï¼Œåå®äº†è¿™ä¸€ç‚¹\n\næˆ‘å°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œç»Ÿè®¡äº†ä¸€ä¸‹ï¼Œä¸€å…±1200å¤šä¸ªCLOSE-WAIT\nnetstat -ntp &gt; log # å°†ç»Ÿè®¡ç»“æœå†™å…¥æ–‡ä»¶lognetstat -antp | grep CLOSE_WAIT # åªç»Ÿè®¡CLOSE_WAITçŠ¶æ€çš„é“¾æ¥\n\n\nè¿™äº›çŠ¶æ€å€¼çš„è¿œç¨‹ipæ¥æºè™½ç„¶æœ‰å¤šä¸ªï¼Œä½†ä¸€ä¸ªipå‡ºç°äº†å¤šæ¬¡ï¼Œäºæ˜¯æˆ‘å°±ä½¿ç”¨ itdog çœ‹äº†ä¸€ä¸‹å…¶ä¸­å‡ ä¸ªipçš„æ¥æºï¼Œæ˜¯Anycast/cloudflare.comï¼Œä¹Ÿå°±æ˜¯å¾ˆå‡ºåçš„cloudflare-cdnã€‚\nåœ¨æˆ‘çš„kook-valorant-boté‡Œé¢ï¼Œæœ‰ä¸€é¡¹ä¸šåŠ¡æ˜¯æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨çš„valorantç™»å½•å’Œå•†åº—æŸ¥è¯¢çš„apiï¼ˆä½¿ç”¨aiohttpåº“ç¼–å†™ï¼‰\nä¸ºäº†ç»Ÿè®¡å…¶ä¸Šçº¿çŠ¶æ€ï¼Œæˆ‘ä½¿ç”¨äº†uptimerobotå®šæ—¶è¯·æ±‚ï¼Œæ¯5åˆ†é’Ÿè·å–ä¸€æ¬¡apiçš„åœ¨çº¿æƒ…å†µ\nhttps://stats.uptimerobot.com/Wl4KwU6Bzz\n\nå—¯ï¼Œè¿è¡ŒçŠ¶æ€å€’æ˜¯è›®å¥½çš„ï¼Œ100%åœ¨çº¿\n\nå‰é¢æåˆ°è¿‡ï¼Œç³»ç»Ÿæ˜¯éœ€è¦æ¶ˆè€—èµ„æºæ¥ç»´æŠ¤tcpé“¾æ¥çš„ã€‚å¦‚ä¸‹å›¾ï¼Œæœºå™¨äººå ç”¨äº†å°†è¿‘400mbçš„å†…å­˜ï¼Œå…¶ä¸­è‚¯å®šæœ‰ä¸€éƒ¨åˆ†å°±æ˜¯è¢«è¿™äº›æ²¡æœ‰å…³é—­çš„tcpé“¾æ¥æ‰€å ç”¨çš„\n\nå¤§é‡CLOSE-WAITï¼Œåªå¯èƒ½æ˜¯ä¸€ä¸ªåŸå› ï¼šuptimebotçš„è¯·æ±‚å·²ç»ç»“æŸå¹¶å‘é€äº†FINï¼Œè€Œæˆ‘çš„apiä»£ç ä½œä¸ºæœåŠ¡ç«¯ï¼Œå¹¶æ²¡æœ‰åœ¨æ”¶åˆ°FINåï¼Œå¯¹é“¾æ¥è¿›è¡Œcloseï¼Œäºæ˜¯é“¾æ¥ä¸€ç›´å¤„äºCLOSE-WAITåŠå…³é—­çŠ¶æ€ã€‚åªæœ‰ç¨‹åºå…³é—­ï¼ˆæœºå™¨äººä¸‹çº¿ï¼‰æ‰ä¼šè¢«æ“ä½œç³»ç»Ÿæ¸…ç©ºã€‚\n\nåæ¥åˆç ”ç©¶äº†ä¸€ä¸‹ï¼Œç»è¿‡ä»–äººç‚¹é†’ï¼Œæ‰å‘ç°ä¸Šé¢çš„ç»“è®ºéƒ½æ˜¯é”™çš„ï¼ï¼\n\nhttps://segmentfault.com/q/1010000043572705/a-1020000043573118\n\nå…¶å®åœ¨netstaté‡Œé¢å¾ˆæ˜æ˜¾çš„ä¸€ç‚¹ï¼Œè¡¨ç¤ºè¿™ä¸€åˆ‡å’Œuptimebotä»¥åŠæˆ‘å†™çš„apiæ²¡æœ‰ä»»ä½•å…³ç³»\n\né‚£å°±æ˜¯è¿™é‡Œé¢Local Addressçš„ç«¯å£ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æœæ˜¯æˆ‘å†™çš„apiå¯¼è‡´çš„ï¼Œé‚£ä¹ˆä»–ä»¬çš„ç«¯å£éƒ½åº”è¯¥æ˜¯apiç»‘å®šçš„ç«¯å£ï¼Œä¸”å›ºå®šæ‰å¯¹ï¼\nåæ¥å°±æ‰¾åˆ°äº†ä¸€ä¸ª2014å¹´çš„issueï¼Œå¤§æ¦‚æƒ…å†µå°±æ˜¯ï¼Œpythonçš„requestsåº“ä¼šç»´æŠ¤ä¸€ä¸ªè¿æ¥æ± ï¼ˆç±»ä¼¼äºçº¿ç¨‹æ± ï¼‰ã€‚è¿™äº›å¤„äºclose-waitçŠ¶æ€çš„è¿æ¥ï¼Œéƒ½æ˜¯requestsåº“ç»´æŠ¤çš„ã€‚å¹¶ä¸æ˜¯è¯´ä»–ä»¬æ˜¯å¿˜è®°å…³é—­çš„é“¾æ¥ã€‚\nhttps://github.com/psf/requests/issues/1973\nå¥½å˜›ï¼ŒåŸæ¥æ˜¯è‡ªå·±å­¦è‰ºä¸ç²¾ï¼Œé—¹äº†ä¸ªå¤§ç¬‘è¯ã€‚å½“æ—¶æ‰¾å¤„ç†aiohttpçš„webçŠ¶æ€çš„èµ„æ–™æ‰¾äº†è€åŠå¤©éƒ½æ²¡æ‰¾åˆ°â€¦â€¦åŸæ¥ä¸€å¼€å§‹æ–¹å‘å°±é”™äº†ğŸ˜¶â€ğŸŒ«ï¸\n3.9 å¼‚å¸¸æƒ…å†µ\nè¿›ç¨‹ç»ˆæ­¢ï¼šè¿›ç¨‹ç»ˆæ­¢ä¼šé‡Šæ”¾æ–‡ä»¶æè¿°ç¬¦ï¼Œä»ç„¶å¯ä»¥å‘é€FINã€‚å’Œæ­£å¸¸å…³é—­æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«\næœºå™¨é‡å¯&#x2F;å…³æœºï¼šå’Œè¿›ç¨‹ç»ˆæ­¢çš„æƒ…å†µç›¸åŒï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨é‡å¯&#x2F;å…³æœºå‰é‡Šæ”¾TCPæ–‡ä»¶æè¿°ç¬¦ã€‚\næœºå™¨æ–­ç”µ&#x2F;ç½‘ç»œæ–­å¼€ï¼šæ¥æ”¶ç«¯è®¤ä¸ºè¿æ¥è¿˜åœ¨ï¼Œä¸€æ—¦æ¥æ”¶ç«¯æœ‰å†™å…¥æ“ä½œï¼Œæ¥æ”¶ç«¯å‘ç°è¿æ¥å·²ç»ä¸åœ¨äº†ï¼Œå°±ä¼šè¿›è¡Œresetã€‚å³ä½¿æ¥æ”¶ç«¯æ²¡æœ‰å†™å…¥æ“ä½œï¼ŒTCPå†…ç½®äº†ä¸€ä¸ªä¿æ´»å®šæ—¶å™¨ï¼Œä¼šå®šæœŸè¯¢é—®å¯¹æ–¹æ˜¯å¦è¿˜åœ¨ã€‚å¦‚æœå¯¹æ–¹ä¸åœ¨ï¼Œä¹Ÿä¼šæŠŠè¿æ¥é‡Šæ”¾ã€‚\n\né™¤äº†TCPæœ¬èº«ï¼Œåº”ç”¨å±‚çš„æŸäº›åè®®ï¼Œä¹Ÿä¼šæœ‰è¿™æ ·çš„é‡è¿æ£€æµ‹æœºåˆ¶ã€‚\n3.10 æ ¡éªŒå’Œ\nè¿™éƒ¨åˆ†å¹¶ä¸æ˜¯é‡ç‚¹ã€‚\n\næ ¡éªŒå’Œèƒ½ä¿è¯TCPåŒæ–¹å‘é€çš„æ•°æ®ä¸ä¼šå‡ºç°æ•°æ®å¯¹ä¸ä¸Šçš„é—®é¢˜\næ ¡éªŒå’Œæ˜¯ä¸€ç§ç®€å•çš„æ•°æ®éªŒè¯æœºåˆ¶ï¼Œå®ƒé€šè¿‡å¯¹æ•°æ®è¿›è¡Œæ•°å­¦è¿ç®—å¾—åˆ°ä¸€ä¸ªæ ¡éªŒå€¼ï¼Œå¹¶å°†è¯¥æ ¡éªŒå€¼ä¸åŸå§‹æ•°æ®ä¸€èµ·ä¼ è¾“ã€‚æ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åï¼Œä¼šå†æ¬¡è®¡ç®—æ•°æ®çš„æ ¡éªŒå’Œï¼Œå¹¶å°†ç»“æœä¸ä¼ è¾“è¿‡æ¥çš„æ ¡éªŒå€¼è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªæ ¡éªŒå’Œç›¸åŒ¹é…ï¼Œé‚£ä¹ˆè¯´æ˜æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰å‘ç”Ÿé”™è¯¯æˆ–æŸåã€‚ä½†å¦‚æœæ ¡éªŒå’Œä¸åŒ¹é…ï¼Œæ¥æ”¶æ–¹ä¼šè®¤ä¸ºæ•°æ®å‘ç”Ÿäº†é”™è¯¯æˆ–æŸåï¼Œäºæ˜¯ä¼šè¯·æ±‚å‘é€æ–¹é‡æ–°ä¼ è¾“æ•°æ®ã€‚\nTCPåœ¨æ•°æ®åŒ…çš„å¤´éƒ¨æ·»åŠ äº†ä¸€ä¸ª16ä½çš„æ ¡éªŒå’Œå­—æ®µï¼Œè¯¥å­—æ®µåŒ…å«äº†æ•°æ®æ®µçš„æ ¡éªŒå’Œå€¼ã€‚åœ¨å‘é€ç«¯ï¼ŒTCPå°†æ•°æ®æ®µä¸­çš„æ‰€æœ‰å­—èŠ‚ï¼ˆåŒ…æ‹¬TCPå¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†ï¼‰åŠ èµ·æ¥ï¼Œç„¶åå–å…¶åç ä½œä¸ºæ ¡éªŒå’Œã€‚æ¥æ”¶ç«¯ä¹Ÿé‡‡ç”¨åŒæ ·çš„æ–¹å¼è®¡ç®—æ ¡éªŒå’Œï¼Œå¹¶ä¸æ¥æ”¶åˆ°çš„æ ¡éªŒå’Œè¿›è¡Œæ¯”è¾ƒï¼Œä»¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ã€‚\n\nä¸¾ä¸ªç®€å•çš„æ —å­ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‘é€çš„æ•°æ®ä½“å½“ä½œä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹å…¶è¿›è¡ŒMD5è®¡ç®—ï¼Œå†å°†è®¡ç®—åçš„MD5åŒæ•°æ®ä½“ä¸€åŒå‘é€ç»™å¯¹æ–¹ã€‚è¿™æ—¶å€™æ¥å—æ–¹æ”¶åˆ°ä¿¡æ¯åï¼ŒåŒæ ·è¿›è¡Œç›¸åŒç®—æ³•çš„MD5è®¡ç®—ï¼Œå¾—å‡ºæ¥çš„MD5å’Œå¯¹æ–¹å‘é€è¿‡æ¥çš„MD5è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœç›¸åŒï¼Œä»£è¡¨æ•°æ®æ²¡æœ‰é—®é¢˜ã€‚ä¸ç›¸åŒä»£è¡¨æ•°æ®å‘é€é”™è¯¯ï¼Œè¯¥æ•°æ®åŒ…è¢«ä¸¢å¼ƒã€‚\nå¦‚æœå‘é€çš„MD5åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†æŸåï¼Œé‚£ä¹ˆæœ€ç»ˆè®¡ç®—å‡ºæ¥çš„MD5å­—ç¬¦ä¸²ä¾æ—§æ˜¯ä¸ç›¸åŒçš„ï¼Œä¹Ÿä¼šå½“ä½œæ— æ•ˆæŠ¥æ–‡è¢«ä¸¢å¼ƒ;\nå®é™…TCPä½¿ç”¨çš„å¹¶ä¸æ˜¯MD5ï¼Œä¸Šé¢çš„è¿™ä¸ªæ —å­åªæ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ã€‚\n\næ ¡éªŒå’Œä¸ä»…ç”¨äºTCPåè®®ï¼Œåœ¨è®¸å¤šå…¶ä»–åè®®ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„æœºåˆ¶ï¼Œç”¨äºç¡®ä¿æ•°æ®ä¼ è¾“çš„å¯é æ€§ã€‚\né€šè¿‡ä½¿ç”¨æ ¡éªŒå’Œï¼Œç½‘ç»œåè®®å¯ä»¥å¸®åŠ©ç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸ä¼šå› ä¸ºå™ªå£°ã€å¹²æ‰°æˆ–å…¶ä»–é”™è¯¯è€Œå˜å¾—æŸåã€‚ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ ¡éªŒå’Œå¹¶ä¸èƒ½æä¾›ç»å¯¹çš„æ•°æ®å®Œæ•´æ€§ä¿è¯ï¼Œå› ä¸ºä¸€äº›å¤æ‚çš„é”™è¯¯æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´æ ¡éªŒå’ŒåŒ¹é…ï¼Œä½†æ•°æ®ä»ç„¶æŸåã€‚\nä¸ºäº†è¿›ä¸€æ­¥å¢å¼ºæ•°æ®çš„å¯é æ€§ï¼ŒTCPåè®®è¿˜ä½¿ç”¨äº†åºåˆ—å·ï¼ˆæŒ‰åºåˆ°è¾¾ï¼‰ã€ç¡®è®¤åº”ç­”ï¼ˆç¡®è®¤æ”¶åˆ°ï¼‰å’Œè¶…æ—¶é‡ä¼ ï¼ˆé¿å…ä¸¢åŒ…ï¼‰ç­‰æœºåˆ¶ã€‚\n3.11 TCPä¿æ´»è®¡æ•°å™¨ä¸ºäº†é¿å…TCPå•ç«¯å‘ç”Ÿæ•…éšœï¼ŒTCPå†…ä¼šæœ‰ä¸€ä¸ªè¿æ¥ä¿æ´»è®¡æ•°å™¨ã€‚\nå½“ä¿æ´»è®¡æ—¶å™¨çš„å‘¨æœŸå†…ï¼Œæ²¡æ”¶åˆ°TCPå‘æ¥çš„æ•°æ®ï¼Œé‚£ä¹ˆä¿æ´»è®¡æ•°å™¨ç»“æŸåï¼ŒTCPæœåŠ¡å™¨å°±ä¼šå‘é€æ¢æµ‹æŠ¥æ–‡æ®µï¼Œåˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦è¿˜å­˜åœ¨ã€‚å¦‚æœè¿ç»­å‘é€10ä¸ªæ¢æµ‹æŠ¥æ–‡è¿˜æ²¡æœ‰æ”¶åˆ°TCPå®¢æˆ·ç«¯çš„å“åº”ï¼Œåˆ™è®¤ä¸ºå®¢æˆ·ç«¯æ–­è¿ï¼ŒæœåŠ¡å™¨å…³é—­è¿æ¥ã€‚\n\n4.éªŒè¯TCPçŠ¶æ€ä¸‹é¢å¯ä»¥ç”¨ä»£ç æ¥å®åœ°æŸ¥çœ‹tcpåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å„ç§çŠ¶æ€ã€‚ä¹‹å‰å†™è¿‡ä¸€ä¸ªç®€å•çš„httpæœåŠ¡å™¨ï¼Œç°åœ¨ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚\né‡‡ç”¨å¦‚ä¸‹bashå‘½ä»¤æ¥è¿›è¡Œnetstatçš„å¾ªç¯ç›‘æµ‹\nwhile :; do netstat -ntp | grep ç«¯å£å·;sleep 1; echo &quot;########################&quot;; done\n\n4.1 TIME-WAITåœ¨æµè§ˆå™¨è®¿é—®ï¼Œå¯ä»¥çœ‹åˆ°æœåŠ¡å™¨è¿”å›çš„htmlé¡µé¢\n\nåå°å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚çš„æŠ¥å¤´\n\nå¹¶æŒ‰å¦‚ä¸‹è¿”å›response\nDEBUG | 1679717397 | muxue | [sockfd: 4] filePath: web/index.html######### response header ##########HTTP/1.0 200 OKContent-Type: text/htmlContent-Length: 362Set-Cookie: This is my cookie test######### response end ##########\n\nä½¿ç”¨netstatå‘½ä»¤æŸ¥çœ‹ï¼Œå½“å‰å¤šå‡ºäº†ä¸€ä¸ªå¤„äºtime waitçŠ¶æ€çš„è¿æ¥\n\nè¿™ä»£è¡¨å››æ¬¡æŒ¥æ‰‹çš„ç¬¬ä¸€ä¸ªFINæ˜¯ç”±æœåŠ¡å™¨å‘å‡ºçš„ï¼Œè¿™ä¸€ç‚¹åœ¨ä»£ç ä¸­ä¹Ÿèƒ½ä½“ç°ï¼ŒæœåŠ¡å™¨accpetåˆ°è¿æ¥åï¼Œä¼šäº¤ç”±å­™å­è¿›ç¨‹æ¥æ‰§è¡ŒhandlerHttpRequest(conet)æœåŠ¡\n// æä¾›æœåŠ¡ï¼ˆå­™å­è¿›ç¨‹ï¼‰pid_t id = fork();if(id == 0)&#123;    close(_listenSock);//å› ä¸ºå­è¿›ç¨‹ä¸éœ€è¦ç›‘å¬ï¼Œæ‰€ä»¥å…³é—­æ‰ç›‘å¬socket    //åˆåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¤§äº0ä»£è¡¨æ˜¯çˆ¶è¿›ç¨‹ï¼Œå³åˆ›å»ºå®Œå­è¿›ç¨‹åçˆ¶è¿›ç¨‹ç›´æ¥é€€å‡º    if(fork()&gt;0)&#123;        exit(0);    &#125;    // çˆ¶è¿›ç¨‹æ¨å‡ºåï¼Œå­è¿›ç¨‹è¢«æ“ä½œç³»ç»Ÿæ¥ç®¡    // å­™å­è¿›ç¨‹æ‰§è¡Œ    handlerHttpRequest(conet);    exit(0);// æœåŠ¡ç»“æŸåï¼Œé€€å‡ºï¼Œå­è¿›ç¨‹ä¼šè¿›å…¥åƒµå°¸çŠ¶æ€ç­‰å¾…çˆ¶è¿›ç¨‹å›æ”¶&#125;// çˆ·çˆ·è¿›ç¨‹close(conet); //è¿™ä¸ªcloseå¹¶ä¸ä¼šå½±å“å­™å­è¿›ç¨‹å†…éƒ¨çš„ï¼Œå› ä¸ºæœ‰å†™æ—¶æ‹·è´pid_t ret = waitpid(id, nullptr, 0); //æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ç”¨é˜»å¡å¼ç­‰å¾…äº†assert(ret &gt; 0);//retå¦‚æœä¸å¤§äº0ï¼Œåˆ™ä»£è¡¨ç­‰å¾…å‘ç”Ÿäº†é”™è¯¯\n\nè¿™ä¸ªæœåŠ¡å‡½æ•°å¹¶ä¸æ˜¯while(1)çš„æ­»å¾ªç¯ï¼Œå†…éƒ¨ä¹Ÿæ²¡æœ‰è¿›è¡Œsocketçš„closeæ“ä½œï¼Œè€Œæ˜¯å‘é€å®Œæ¯•å®¢æˆ·ç«¯è¯·æ±‚çš„æ–‡ä»¶åï¼Œç›´æ¥é€€å‡ºäº†\nvoid handlerHttpRequest(int sock)&#123;    cout &lt;&lt;     &quot;########### header-start ##########&quot; &lt;&lt; endl;//æ‰“å°ä¸€ä¸ªåˆ†éš”çº¿    char buffer[10240];    ssize_t s = read(sock, buffer, sizeof(buffer));    if(s &gt; 0)&#123;        cout &lt;&lt; buffer &lt;&lt; endl;        cout &lt;&lt; &quot;########### header-end   ##########&quot; &lt;&lt; endl;    &#125;    fflush(stdout);    string path = getPath(buffer);    // å‡è®¾ç”¨æˆ·è¯·æ±‚çš„æ˜¯ /a/b è·¯å¾„    // é‚£ä¹ˆæœåŠ¡ç«¯å¤„ç†çš„æ—¶å€™ï¼Œå°±éœ€è¦æ·»åŠ æ ¹ç›®å½•ä½ç½®å’Œé»˜è®¤çš„æ–‡ä»¶å    // &lt;root&gt;/a/b/index.html    // åœ¨æœ¬æ¬¡ç”¨ä¾‹ä¸­ï¼Œæ ¹ç›®å½•ä¸º ./webæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å®Œæ•´çš„æ–‡ä»¶è·¯å¾„åº”è¯¥æ˜¯    // ./web/a/b/index.html    string resources = ROOT_PATH; // æ ¹ç›®å½•è·¯å¾„    resources += path; // æ–‡ä»¶è·¯å¾„    logging(DEBUG,&quot;[sockfd: %d] filePath: %s&quot;,sock,resources.c_str()); // æ‰“å°ç”¨ä½œdebug    string html = readFile(resources);// æ‰“å¼€æ–‡ä»¶    // å¼€å§‹å“åº”    string response = &quot;HTTP/1.0 200 OK\\r\\n&quot;;    //å¦‚æœreadFileè¿”å›çš„æ˜¯404ï¼Œä»£è¡¨æ–‡ä»¶è·¯å¾„ä¸å­˜åœ¨    if(strcmp(html.c_str(),&quot;404&quot;)==0)    &#123;        response = &quot;HTTP/1.0 404 NOT FOUND\\r\\n&quot;;    &#125;    // è¿½åŠ åç»­å­—æ®µ    response += &quot;Content-Type: text/html\\r\\n&quot;;    response += (&quot;Content-Length: &quot; + to_string(html.size()) + &quot;\\r\\n&quot;);    response += &quot;Set-Cookie: This is my cookie test\\r\\n&quot;;    response += &quot;\\r\\n&quot;;    cout &lt;&lt; &quot;######### response header ##########\\n&quot; &lt;&lt; response &lt;&lt; &quot;######### response end ##########\\n&quot;;    fflush(stdout);    response += html;    // å‘é€ç»™ç”¨æˆ·    send(sock, response.c_str(), response.size(), 0);&#125;\n\nå‡½æ•°é€€å‡ºäº†ä¹‹åï¼Œæ–‡ä»¶æè¿°ç¬¦å°±äº¤ç”±äº†æ“ä½œç³»ç»Ÿã€‚ä¸€ä¸ªæ²¡æœ‰è¿›ç¨‹ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¼šè¢«æ“ä½œç³»ç»Ÿç›´æ¥closeå…³æ‰ã€‚ç›¸å½“äºæ“ä½œç³»ç»Ÿå¸®æˆ‘ä»¬å‘å‡ºäº†FINï¼Œå°±å‡ºç°äº†TIME WAITçŠ¶æ€ã€‚\n4.1.1 ä¸ºå•¥è¦æœ‰è¿™ä¸ªçŠ¶æ€ï¼ŸçŸ¥é“äº†4æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹åï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“ï¼ŒTIME-WAITæ˜¯4æ¬¡æŒ¥æ‰‹çš„å‘èµ·æ–¹æ‰æœ‰çš„çŠ¶æ€ã€‚\næ—¢ç„¶å¯¹æ–¹å·²ç»ç»™æˆ‘å‘äº†FINï¼Œè¿™ä¸å°±ä»£è¡¨å¯¹æ–¹ä¹Ÿæƒ³å’Œæˆ‘åˆ†æ‰‹å—ï¼Ÿé‚£æˆ‘ä¸ºå•¥è¿˜ç•™ç€å¥½å‹ä¸åˆ ï¼Œéè¦ç­‰ç­‰å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºï¼Œæˆ‘ä»¬å‘å‡ºçš„æœ€åä¸€æ¬¡ACKæ˜¯å¦è¢«å¯¹æ–¹æ”¶åˆ°ï¼Œæ˜¯æœªçŸ¥çš„ï¼\n\nAç»™Bå‘é€æœ€åä¸€æ¬¡ACKï¼ŒBæ²¡æœ‰æ”¶åˆ°\nAä¸TIME-WAITç›´æ¥é€€å‡ºï¼ŒAå·²ç»æ–­å¼€è¿æ¥äº†ï¼Œä½†æ˜¯Bè¿˜åœ¨ç»´æŠ¤è¿™ä¸ªè¿æ¥\nå¦‚æœæœ‰TIME-WAITçŠ¶æ€ï¼ŒBæ²¡æœ‰æ”¶åˆ°ACKï¼Œä¼šå¯¹FINè¿›è¡Œè¶…æ—¶é‡ä¼ \nAå†æ¬¡æ”¶åˆ°FINï¼Œä»£è¡¨ä¸Šä¸€æ¬¡ACKä¸¢äº†ï¼Œé‚£å°±å†æ¬¡å‘é€ACK\nå¦‚æœAåœ¨TIME-WAITçŠ¶æ€ä»€ä¹ˆä¿¡æ¯éƒ½æ²¡æœ‰æ”¶åˆ°ï¼Œé‚£å°±ä»£è¡¨è‡ªå·±çš„ACKè¢«Bæ”¶åˆ°äº†ï¼Œä¾¿å¯ä»¥æ”¾å¿ƒæ–­è¿\n\næ­¤æ—¶ï¼ŒTIME-WAITçŠ¶æ€ä¿è¯äº†æœ€åä¸€æ¬¡ACKçš„æ­£å¸¸é€’è¾¾\nè¿˜æœ‰ç¬¬äºŒç§æƒ…å†µï¼š\n\nCç»™Så‘é€FINï¼Œå‡†å¤‡æ–­è¿\nSç»™Cå‘é€dataï¼Œå‘é€å®Œæ¯•åï¼Œç«‹é©¬å‘é€FIN\ndataå’ŒFINéƒ½åœ¨è·¯ç”±ä¼ è¾“çš„è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šå‡ºç°FINæ¯”dataæ—©åˆ°çš„æƒ…å†µ\nCæ”¶åˆ°FINï¼Œè¿”å›ACKï¼Œè¿›å…¥TIME-WAITçŠ¶æ€ï¼ŒæœŸé—´æ”¶åˆ°äº†Så‘é€çš„data\nCæˆåŠŸæ¥æ”¶dataï¼Œç»§ç»­ç­‰å¾…åˆ°è®¡æ—¶å™¨ç»“æŸï¼Œé‡Šæ”¾é“¾æ¥\n\næ­¤æ—¶ï¼ŒTIME-WAITçŠ¶æ€ä¿è¯äº†äºŒè€…ä¹‹é—´çš„æ¶ˆæ¯èƒ½éƒ½è¢«æ”¶åˆ°\n4.1.2 ç­‰å¤šä¹…ï¼Ÿè¿™é‡Œå¼•å…¥ä¸€ä¸ªæ–°æ¦‚å¿µï¼šä¸€ä¸ªæŠ¥æ–‡åœ¨åŒæ–¹ä¹‹é—´ä¼ è¾“èŠ±è´¹çš„æ—¶é—´ï¼Œè¢«ç§°ä¸ºè¿™ä¸ªæ¶ˆæ¯çš„ MSLï¼ˆmaximun segment lifetime æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼‰\nTIME-WAITç­‰å¾…çš„æ—¶é—´éœ€è¦é€‚ä¸­ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œé»˜è®¤ç­‰å¾…çš„æ—¶é—´éƒ½æ˜¯ä¸åŒçš„ã€‚CentOSä¸‹ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯60s\n$ cat /proc/sys/net/ipv4/tcp_fin_timeout60\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸ºMSL*2æ˜¯æœ€å¥½çš„ï¼Œè¿™æ ·èƒ½ä¿è¯åŒæ–¹æ•°æ®çš„é€’è¾¾ï¼Œå’Œæœ€åACKçš„é€’è¾¾\n4.2 CLOSE-WAITå¦‚æœæˆ‘ä»¬åœ¨handlerHttpRequest(conet);å‘å®¢æˆ·ç«¯å‘é€äº†htmlæ–‡ä»¶åï¼ŒæœåŠ¡ç«¯ä¼‘çœ å‡ ç§’é’Ÿï¼›å®¢æˆ·ç«¯æ‰“å¼€ç½‘é¡µåå…³é—­ç½‘é¡µï¼Œæ˜¯å¦å°±èƒ½çœ‹åˆ°å…¶ä»–çŠ¶æ€å‘¢ï¼Ÿ\n// å‘é€ç»™ç”¨æˆ·send(sock, response.c_str(), response.size(), 0);// ä¼‘çœ å‡ ç§’é’Ÿä½œä¸ºæµ‹è¯•sleep(20);\n\nå¦‚ä¸‹ï¼Œæƒ…å†µåˆä¸åŒäº†ã€‚è¿™æ¬¡å‡ºç°çš„æ˜¯CLOSE-WAITçŠ¶æ€ï¼Œä»£è¡¨ç¬¬ä¸€ä¸ªFINè¯·æ±‚æ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„\n\nè¿™æ˜¯å› ä¸ºå½“å‰çš„è¿›ç¨‹æ²¡æœ‰è¿›è¡Œé•¿é“¾æ¥çš„ç»´æŠ¤ï¼Œå¦‚æœæƒ³ç»´æŠ¤é•¿è¿æ¥ï¼Œåˆ™æœåŠ¡å™¨åº”è¯¥ç»™å®¢æˆ·ä¹Ÿè¿”å›ä¸€ä¸ªhttpåè®®æŠ¥å¤´ Connection: keep-alive\nå¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯å‘æ¥çš„http-headeré‡Œé¢ï¼Œæ˜¯æœ‰è¯¥å­—æ®µçš„ã€‚è€ŒæœåŠ¡å™¨å¹¶æ²¡æœ‰è¿”å›ç›¸åŒçš„å­—æ®µï¼Œå®¢æˆ·ç«¯å°±è®¤ä¸ºæœåŠ¡å™¨ä¸æ”¯æŒé•¿é“¾æ¥ï¼Œä»è€Œä¸»åŠ¨å‘å‡ºäº†FIN\n\nè¿›ä¸€æ­¥çœ‹tcpçš„çŠ¶æ€ï¼Œå½“å‰æ˜¯æœ‰ä¸¤ä¸ªçˆ¶è¿›ç¨‹ä¸º1ï¼ˆé‡‡ç”¨äº†å­™å­è¿›ç¨‹çš„å†™æ³•ï¼Œçˆ¶è¿›ç¨‹é€€å‡ºåä¼šè¢«æ“ä½œç³»ç»Ÿæ¥ç®¡ï¼‰çš„è¿›ç¨‹åœ¨è¿›è¡Œä¼‘çœ ï¼Œå®ƒä»¬åŒå±äº295942è¿™ä¸ªtcpæœåŠ¡å™¨ä¸»è¿›ç¨‹çš„è¿›ç¨‹ç»„ï¼ˆPGIDç›¸åŒï¼‰\nå½“è¿™ä¸¤ä¸ªè¿›ç¨‹ç»“æŸä¼‘çœ çš„æ—¶å€™ï¼ŒCLOSE-WAITçŠ¶æ€çš„è¿æ¥ç«‹é©¬æ¶ˆå¤±äº†ã€‚å› ä¸ºæ“ä½œç³»ç»Ÿæ¥ç®¡äº†æ–‡ä»¶æè¿°ç¬¦åï¼Œè¿›è¡Œäº†closeï¼ŒæœåŠ¡ç«¯ä¹Ÿå‘å‡ºäº†finï¼Œå››æ¬¡æŒ¥æ‰‹æˆåŠŸï¼Œè¿æ¥ç»ˆæ­¢ã€‚\n\n4.3 ESTABLISHEDå¦‚æœæˆ‘ä»¬ç»™responseåŠ ä¸Šé•¿é“¾æ¥çš„æŠ¥å¤´ï¼Œæ˜¯å¦å¯ä»¥çœ‹åˆ°ESTABLISHEDçŠ¶æ€å‘¢ï¼Ÿ\nresponse += &quot;Connection: keep-alive\\r\\n&quot;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¡®å®å‡ºç°äº†è¿™ä¸ªçŠ¶æ€ï¼Œè¿™ä»£è¡¨åŒæ–¹æˆåŠŸç»´æŠ¤èµ·äº†é•¿é“¾æ¥ï¼ˆè™½ç„¶å½“å‰æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé•¿é“¾æ¥å¹¶æ²¡æœ‰èµ·åˆ°åº”æœ‰çš„ä½œç”¨ï¼‰\n\nè¿›ä¸€æ­¥è½®æ¢ï¼Œå°†å¤„ç†å‡½æ•°æ”¹ä¸ºwhile(1)çš„æ­»å¾ªç¯è°ƒç”¨ï¼Œæˆ‘ä»¬åº”è¯¥å¯ä»¥é€šè¿‡ä¸€ä¸ªsocketå®ç°å¤šä¸ªæŠ¥æ–‡çš„å‘é€\n// å­™å­è¿›ç¨‹æ‰§è¡Œlogging(DEBUG, &quot;new child process&quot;);//æ‰“å°ä¸€ä¸ªæ–°è¿›ç¨‹çš„æç¤ºä¿¡æ¯ï¼Œæ–¹ä¾¿è§‚å¯Ÿç»“æœwhile(1)&#123;    handlerHttpRequest(conet);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåªå‡ºç°äº†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå¯¹å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡\n\næŸ¥çœ‹æ—¥å¿—ï¼Œèƒ½çœ‹åˆ°ï¼ŒæˆåŠŸå®ç°äº†é•¿é“¾æ¥é€šä¿¡\n\nå¦‚æœä¸é‡‡ç”¨while(1)æ­»å¾ªç¯è¿›è¡ŒæœåŠ¡ï¼Œåˆ™å®¢æˆ·ç«¯çš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œéƒ½éœ€è¦ä¸€ä¸ªæ–°çš„å­è¿›ç¨‹æ¥æœåŠ¡\n\nå³ä¾¿responseä¸­å¸¦æœ‰é•¿é“¾æ¥æ ‡è¯†ï¼Œä¹Ÿä¼šå› ä¸ºfdè¢«æ“ä½œç³»ç»Ÿå›æ”¶è€Œè¿›å…¥TIME-WAITçŠ¶æ€\n\n4.4 ç«¯å£ä¸èƒ½è¢«bindä¹‹å‰åœ¨tcpæœåŠ¡å™¨çš„å­¦ä¹ ä¸­ï¼Œå‡ºç°äº†å¦‚æœç«‹é©¬æŠŠtcpæœåŠ¡å™¨å…³äº†åå¼€ï¼ŒåŒä¸€ä¸ªç«¯å£æ— æ³•è¢«bindçš„æƒ…å†µ\n$ ./tcpServer 50000 &gt; logFATAL | 1679720482 | muxue | bind: Address already in use:3$ ./tcpServer 50000 &gt; logFATAL | 1679720491 | muxue | bind: Address already in use:3\n\nç»è¿‡å¯¹tcpåè®®çš„å­¦ä¹ ï¼Œç°åœ¨èƒ½çŸ¥é“ä¸ºä½•è¿™ä¸ªç«¯å£ä¸èƒ½è¢«bindäº†ã€‚ä½¿ç”¨netstat -ntpå‘½ä»¤æŸ¥çœ‹ï¼Œèƒ½çœ‹åˆ°è¿™ä¸ªç«¯å£ä¸Šè¿˜æœ‰å¤„äºTIME-WAITçŠ¶æ€çš„é“¾æ¥ï¼Œæ‰€ä»¥ç³»ç»Ÿè®¤ä¸ºè¿™ä¸ªç«¯å£ä¸Šè¿˜æœ‰tcpé“¾æ¥åœ¨è¿è¡Œï¼Œä¸å…è®¸æˆ‘ä»¬äºŒæ¬¡bindè¿™ä¸ªç«¯å£ã€‚è¿™æ˜¯æ“ä½œç³»ç»Ÿåœ¨é»˜è®¤çŠ¶æ€ä¸‹çš„è¡Œä¸ºã€‚\n\nå‰é¢æåˆ°è¿‡ï¼Œcentosé»˜è®¤çš„TIME-WAITç­‰å¾…æ—¶é—´æ˜¯60sã€‚åªè¦ç­‰å¾…60sï¼Œæ“ä½œç³»ç»Ÿé‡Šæ”¾äº†è¿™ä¸ªç«¯å£ä¸Šçš„å†—ä½™é“¾æ¥ï¼Œå°±èƒ½è¢«bindäº†ï¼\nä½†æ˜¯ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼è¯·æ¥ç€å¾€ä¸‹çœ‹\n4.4.1 é—®é¢˜å‡è®¾æˆ‘ç°åœ¨çš„æœåŠ¡å™¨è¿›ç¨‹æ˜¯ç›´æ¥bind 80ç«¯å£å¯¹å¤–è¿›è¡ŒæœåŠ¡çš„ï¼Œè¿™æ ·ä»–äººå°±èƒ½ç›´æ¥é€šè¿‡æˆ‘æœåŠ¡å™¨çš„ipï¼Œä»¥httpåè®®ä¸æˆ‘çš„æœåŠ¡è¿›ç¨‹è¿›è¡Œé€šä¿¡ã€‚\nä»¥httpç½‘é¡µæœåŠ¡ä¸ºä¾‹ï¼Œç»è¿‡äº†å¾ˆä¹…å¾ˆä¹…çš„è¿è¡Œæ—¶é—´\n\næœåŠ¡å™¨è¿›ç¨‹å‡ºäº†æ¶æ€§bugï¼Œå¯¼è‡´è¿›ç¨‹é€€å‡ºäº†\næœåŠ¡å™¨å‹åŠ›è¿‡å¤§ï¼Œæ“ä½œç³»ç»Ÿä¸ºäº†é‡Šæ”¾èµ„æºï¼Œç›´æ¥æŠŠæœåŠ¡è¿›ç¨‹ç»™killäº†\n\nè¿™æ—¶å€™ï¼Œç”±äºç¬¬ä¸€ä¸ªFINæ˜¯ç”±æœåŠ¡ç«¯å‘å‡ºçš„ï¼ŒæœåŠ¡å™¨ä¼šè¿›å…¥TIME-WAITçŠ¶æ€ã€‚\nå‡è®¾æœåŠ¡è¿›ç¨‹å´©æºƒçš„æ—¶å€™ï¼Œæœ‰æ•°ä¸ªç”¨æˆ·æ­£åœ¨è®¿é—®ä½ çš„ç½‘é¡µã€‚å¯¹äºä»–ä»¬è€Œè¨€ï¼Œå´©æºƒçš„è¡¨ç°å°±æ˜¯ï¼Œåˆ·æ–°ç½‘é¡µï¼Œç›´æ¥ç™½å±ï¼Œæ˜¾ç¤ºä¸å‡ºæ¥åç»­çš„é¡µé¢äº†ã€‚\næ­¤æ—¶å°±éœ€è¦è¿ç»´è€å“¥èµ¶å¿«sshè¿ä¸ŠæœåŠ¡å™¨ï¼Œé‡å¯æœåŠ¡è¿›ç¨‹\nä¸ºäº†å…³ç…§è¿ç»´è€å“¥çš„å¤´å‘ï¼Œè®©å‡ºé”™çš„æœåŠ¡è¿›ç¨‹å¿«é€Ÿé‡å¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç»™è¿™ä¸ªæœåŠ¡è¿›ç¨‹å¢åŠ ä¸€ä¸ªç›‘è§†è¿›ç¨‹\n\nç›‘è§†è¿›ç¨‹æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œå…¶è¦åšçš„åŠŸèƒ½å¾ˆå•ä¸€ï¼Œæ‰€ä»¥è´Ÿè½½å¹¶ä¸å¤§\nç›‘è§†è¿›ç¨‹å®æ—¶æŸ¥çœ‹ï¼Œæ¯å‡ ç§’å°±çœ‹ä¸€çœ¼æœåŠ¡è¿›ç¨‹çš„çŠ¶æ€\næœåŠ¡è¿›ç¨‹æŒ‚æ‰äº†ï¼Œç›‘è§†è¿›ç¨‹åœ¨ä¸‹ä¸€è½®ç›‘è§†æ—¶ä¼šç«‹é©¬å‘ç°ï¼Œé€šè¿‡ execç³»åˆ—å‡½æ•° ç›´æ¥é‡å¯æœåŠ¡è¿›ç¨‹\n\nè¿™æ—¶å€™ï¼ŒTIME-WAITçš„é—®é¢˜å°±å‡ºç°äº†ï¼šæœåŠ¡è¿›ç¨‹æƒ³ç»‘å®šçš„æ˜¯80ç«¯å£ï¼Œä¹Ÿåªèƒ½ç»‘å®š80ç«¯å£ï¼ˆä¸ç„¶å®¢æˆ·ç«¯æ— æ³•çŸ¥é“æœåŠ¡å™¨ç«¯å£æ”¹å˜ï¼Œä¹Ÿä¾æ—§æ— æ³•è®¿é—®æœåŠ¡ï¼‰ä½†æ˜¯80ç«¯å£è¿˜æœ‰æ²¡æœ‰æ¸…ç†çš„tcpé“¾æ¥ï¼Œæ“ä½œä¸ç»™ä½ bindå•Šï¼\nå¦‚æœç­‰æ“ä½œç³»ç»Ÿ60såæ¸…é™¤é“¾æ¥å†bindï¼Œé‚£ä¹Ÿå¤ªæ™šäº†ğŸ™…â€â™€ï¸\nå¤§å‹æœåŠ¡è¿›ç¨‹å¯åŠ¨æ—¶è¦å¹²çš„æ´»å¾ˆå¤šï¼Œæ‰€ä»¥å¯åŠ¨ä¼šè¾ƒæ…¢ã€‚ç­‰å¾…ç³»ç»Ÿé‡Šæ”¾TIME-WAITçš„é“¾æ¥åå†bindï¼Œç›¸å½“äºå¤šç»™æœåŠ¡è¿›ç¨‹å¯åŠ¨å¢åŠ äº†60s\n\nå¯¹äºä¸€äº›å®¢æˆ·é‡çº§å·¨å¤§çš„æœåŠ¡ï¼Œæ—¶é—´å°±æ˜¯ç”Ÿå‘½å‘€ï¼\nç”¨æˆ·çš„è€å¿ƒéƒ½ä¸å’‹åœ°ï¼Œæ‹¿æˆ‘è‡ªå·±ä¸¾æ —å­å§ï¼å½“æˆ‘å»è®¿é—®ä¸€äº›ç½‘ç«™æ—¶ï¼Œå¦‚æœ5sä¹‹å†…ç½‘é¡µæ²¡æœ‰åŠ è½½å‡ºæ¥ï¼Œæˆ‘å°±å‡†å¤‡xæ‰é‚£ä¸ªç½‘é¡µäº†\n\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…ç”±äºTIME-WAIT/CLOSE-WAITæœªé‡Šæ”¾è€Œæ— æ³•bindç«¯å£çš„é—®é¢˜ï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†ç«¯å£å¤ç”¨çš„æ¥å£ã€‚è®©è¿›ç¨‹å¯ä»¥å¿½ç•¥å†—ä½™è¿æ¥ï¼Œç›´æ¥bindè¿™ä¸ªç«¯å£ï¼\n4.4.2 ç«¯å£å¤ç”¨ç«¯å£å¤ç”¨ï¼Œå¤ç”¨çš„æ˜¯æœ‰TIME-WAIT/CLOSE-WAITè¿™ç§å†—ä½™é“¾æ¥çš„ç«¯å£ï¼Œè€Œä¸æ˜¯å¤„äºæœåŠ¡çŠ¶æ€çš„ç«¯å£å“ˆï¼ä¸€ä¸ªç«¯å£åªèƒ½å¯¹åº”ä¸€ä¸ªæœåŠ¡ï¼Œè€è§„çŸ©å¯ä¸èƒ½ç ´åäº†ã€‚\nint setsockopt(int sockfd, int level, int optname, const void *optval, socklen_t optlen);\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œç«¯å£æœ‰å†—ä½™é“¾æ¥ï¼Œæ— æ³•bind\n\nåªéœ€è¦åœ¨bindå‡½æ•°ä¹‹å‰æ·»åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼Œå°±èƒ½å®ç°ç«¯å£å¤ç”¨ã€‚\n// 1.1 å…è®¸ç«¯å£è¢«å¤ç”¨ï¼ˆå³ä¾¿è¿˜æœ‰TIME-WAITçš„é“¾æ¥ï¼‰int optval = 1;setsockopt(_listenSock, SOL_SOCKET, SO_REUSEADDR, &amp;optval, sizeof(optval));\n\nå¦‚ä¸‹å›¾ï¼Œå³ä¾¿50000ç«¯å£å­˜åœ¨time-waitçš„é“¾æ¥ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥æ­£å¸¸bindè¿™ä¸ªç«¯å£ï¼\n\né™¤äº†è¿™ç§å½¢å¼çš„ç«¯å£å¤ç”¨ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªSO_REUSEPORTï¼Œå®ƒå…è®¸å¤šä¸ªè¿›ç¨‹ç»‘å®šåŒä¸€ä¸ªçš„ç«¯å£ï¼›åœ¨nginxä¸­å°±æ˜¯é‡‡ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œè®©å¤šä¸ªworkerçº¿ç¨‹è¿›è¡Œé“¾æ¥çš„ç«äº‰çš„ã€‚\n4.5 accpetä¸å½±å“tcplinuxç»™æˆ‘ä»¬æä¾›çš„æ¥å£accptï¼Œå¹¶ä¸å‚ä¸3æ¬¡æ¡æ‰‹çš„é˜¶æ®µ\nå°†httpæœåŠ¡çš„accpetç»™å»æ‰ï¼Œæ¥è§‚å¯Ÿè¿™ä¸€æƒ…å†µã€‚å¦‚ä¸‹å›¾ï¼ŒæœåŠ¡å™¨ç›´æ¥æ˜¯ä¸€ä¸ªå•¥äº‹ä¸å¹²çš„æ­»å¾ªç¯ï¼Œä¸å¯¹æ–°æ¥çš„è¿æ¥è¿›è¡Œacceptï¼Œæ­¤æ—¶æµè§ˆå™¨è®¿é—®è¯¥æœåŠ¡ï¼Œä¾æ—§ä¼šå‡ºç°ä¸¤ä¸ªå¤„äºESTABLISHEDçš„è¿æ¥\n\nè¿™ä¾¿è¯å®äº†æˆ‘ä»¬çš„ç»“è®ºï¼šaccpetä¸å‚ä¸tcp3æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹\n4.6 listençš„ç¬¬äºŒä¸ªå‚æ•°4.6.1 æ¦‚å¿µä¹‹å‰å­¦ä¹ tcpæœåŠ¡å™¨å†™æ³•çš„æ—¶å€™ï¼Œç²—ç•¥æåˆ°äº†listenå‡½æ•°ç¬¬äºŒä¸ªå‚æ•°çš„ä½œç”¨ã€‚\n#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;int listen(int sockfd, int backlog);//backlogå‚æ•°é™åˆ¶äº†èƒ½è¢«é˜»å¡ç­‰å¾…è¿æ¥çš„æ•°é‡//å¦‚æœè¶…è¿‡è¿™ä¸ªæ•°é‡ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªECONNREFUSEDé”™è¯¯ã€‚äº¦æˆ–è€…å¦‚æœåè®®æ”¯æŒé‡ä¼ ï¼Œå¤šä½™çš„è¯·æ±‚ä¼šè¢«å¿½ç•¥ï¼Œåç»­å¯ä»¥é‡ä¼ \n\nè¿™é‡Œçš„é˜»å¡ç­‰å¾…è¿æ¥æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿˜æ˜¯ç”¨å‰é¢ç”¨åˆ°çš„httpæœåŠ¡ï¼Œä»¥å®é™…æƒ…å†µæ¥çœ‹çœ‹\n\nä»€ä¹ˆæƒ…å†µä¸‹ï¼Œä¸€ä¸ªè¿æ¥ä¼šè¢«é˜»å¡ï¼Ÿ\n\nè¿™ä¸€ç‚¹å°±æ¶‰åŠåˆ°æœåŠ¡å™¨çš„æ‰¿å—èƒ½åŠ›äº†ã€‚å‡è®¾æœåŠ¡å™¨ç°åœ¨å¾ˆå¿™ï¼Œå‹æ ¹æ²¡æ—¶é—´å»acceptä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œé‚£è¿™ä¸ªè¿æ¥å°±ä¸€ç›´å­˜åœ¨æ“ä½œç³»ç»Ÿçš„tcpè¿æ¥ä¸­ï¼Œè€Œæ²¡æœ‰è¿›ç¨‹å¯¹å®ƒæœåŠ¡ã€‚è¿™ç§çŠ¶æ€ï¼Œå°±å¯ä»¥è¢«ç§°ä¸ºè¿æ¥çš„é˜»å¡ç­‰å¾…\n4.6.2 çœ‹çœ‹å…·ä½“æƒ…å†µå‡è®¾æˆ‘å°†listençš„ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºäº†2ï¼ŒæœåŠ¡å™¨æ˜¯ä¸ªå•¥äº‹ä¸å¹²çš„æ­»å¾ªç¯\nif (listen(_listenSock, 2) &lt; 0)&#123;    logging(FATAL, &quot;listen: %s&quot;, strerror(errno));    exit(LISTEN_ERR);&#125;\n\nåœ¨æµè§ˆå™¨å†…ç›´æ¥å¼€5ä¸ªçª—å£è¯·æ±‚è¿™ä¸ªè¿æ¥ï¼ŒåŠ ä¸Šæˆ‘çš„æ‰‹æœºï¼Œä¸€å…±æ˜¯6ä¸ªè¯·æ±‚\n\nä½†åå°å¯ä»¥çœ‹åˆ°ï¼Œå†ç»§ç»­å¢åŠ æµè§ˆå™¨è¯·æ±‚çš„æ•°é‡ï¼Œä¾æ—§éƒ½åªæœ‰ä¸¤ä¸ªè¿æ¥æ˜¯å¤„äºESTABLISHEDçŠ¶æ€ï¼Œå’Œlistençš„ç¬¬äºŒä¸ªå‚æ•°æ­£å¥½ç›¸åŒï¼è¿™ä¸¤ä¸ªè¿æ¥å› ä¸ºæ²¡æœ‰è¢«æœåŠ¡è¿›ç¨‹acceptï¼Œå®ƒä»¬å°±æ˜¯å¤„äºé˜»å¡ç­‰å¾…çŠ¶æ€çš„ï¼\n\n4.6.3 ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿè¦ç»™ä¸€ä¸ªè¿›ç¨‹ç»´æŠ¤é˜»å¡ç­‰å¾…çš„è¿æ¥å‘¢ï¼Ÿæ—¢ç„¶è¿™ä¸ªè¿›ç¨‹ä¸è¿›è¡Œæ–°è¿æ¥çš„acceptï¼Œæ“ä½œç³»ç»Ÿä¸ºä½•ä¸ç›´æ¥æŠŠè¿™ä¸ªè¿æ¥ä¸¢å¼ƒå‘¢ï¼Ÿ\næ‹¿ç”Ÿæ´»ä¸­éå¸¸åœºæ™¯çš„é¤å…æ’é˜Ÿä¸¾ä¾‹å­å§ã€‚å¤§å®¶åº”è¯¥éƒ½è§è¿‡ä¸€ä¸ªé¤é¦†åœ¨ä¸­æ™šé¤é«˜å³°æœŸæ—¶ï¼Œé—¨å£æœ‰äººåœ¨æ’é˜Ÿç­‰ä½å§ï¼Ÿç‰¹åˆ«æ˜¯æ²³æµ·åº•æï¼Œæ¯æ¬¡æƒ³å»éƒ½å¾—æå‰é¢„å®šï¼Œä¸ç„¶æ’é˜Ÿçš„æ—¶é—´åƒé—¨å£çš„å°é›¶é£Ÿéƒ½è¦åƒé¥±äº†ã€‚\n\né‚£ä¹ˆï¼Œé¤é¦†ä¸ºä»€ä¹ˆè¦æä¾›æ’é˜Ÿç­‰ä½å‘¢ï¼Ÿä¸ºä½•æœåŠ¡å‘˜ä¸ç›´æ¥å‘Šè¯‰æ–°æ¥çš„å®¢äººï¼Œé¦†å­é‡Œæ²¡ç©ºä½äº†ï¼Œè¯·å¦å¯»ä»–å¤„å‘¢ï¼Ÿ\n\nåŸå› å¾ˆç®€å•ï¼šä¸ºäº†ä¸Šæ¡Œç‡ã€‚\n\nä¸€ä¸ªé¤é¦†çš„ä¸Šæ¡Œç‡è¶Šé«˜ï¼Œå°±ä»£è¡¨å…¶ç”Ÿæ„è¶Šå¥½ã€‚å¦‚æœé¤é¦†å†…éƒ¨æ²¡æ¡Œäº†ï¼Œä½†æ˜¯å¤–å¤´æœ‰äººæ’é˜Ÿï¼Œè¿™æ ·å°±èƒ½è®©æœ‰å®¢äººç¦»å¼€ï¼ˆç©ºå‡ºæ¡Œå­åï¼‰ç«‹é©¬æœ‰æ–°çš„å®¢äººä¸Šæ¡Œã€‚\n\nå¯¹äºæˆ‘ä»¬çš„æœåŠ¡è¿›ç¨‹ä¹Ÿæ˜¯ä¸€æ ·ï¼\n\nå‡è®¾è¿™ä¸ªæœåŠ¡è¿›ç¨‹æœ‰10ä¸ªçº¿ç¨‹å¯¹å¤–è¿›è¡ŒæœåŠ¡ï¼Œæ­¤æ—¶æ¥äº†ç¬¬11ä½éœ€è¦æœåŠ¡çš„å®¢äººã€‚æœåŠ¡çš„10ä¸ªçº¿ç¨‹ï¼ˆæ¡Œå­ï¼‰éƒ½è¢«åæ»¡äº†ï¼Œæ²¡äººèƒ½ç»™11å·å®¢äººæœåŠ¡ã€‚é‚£è¿™æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±å‘Šè¯‰11ä½å®¢äººï¼šâ€œä½ åœ¨è¿™é‡Œç¨ä½œç­‰å¾…ï¼Œæˆ‘å»ç»™ä½ ä¹°ä¸ªæ©˜å­å–ä¸ªæ’é˜Ÿå•å·â€ï¼Œè¿™æ—¶å€™11å·å®¢äººå°±åœ¨æ“ä½œç³»ç»Ÿä¸ºæœåŠ¡è¿›ç¨‹æä¾›çš„ç­‰å€™ä½ç½®ä¸Šåäº†ä¸‹æ¥ï¼Œç­‰å¾…æœåŠ¡è¿›ç¨‹è…¾å‡ºç©ºä½æ¥ç»™ä»–æœåŠ¡ï¼ˆé“¾æ¥é˜»å¡ç­‰å¾…ï¼‰\nè¿™æ—¶å€™ï¼Œæœ‰ä¸€ä¸ªç”¨æˆ·æ–­å¼€äº†è¿æ¥ï¼Œç©ºå‡ºæ¥äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œé‚£ä¹ˆæœåŠ¡è¿›ç¨‹ï¼ˆé¤é¦†ï¼‰å†…çš„æœåŠ¡å‘˜å°±è·‘å‡ºæ¥ï¼Œå’Œ11å·å®¢æˆ·è¯´ï¼Œä»–å¯ä»¥ä¸Šæ¡Œäº†ï¼ˆacceptï¼‰è¿™æ—¶å€™ï¼ŒæœåŠ¡è¿›ç¨‹å°±å¼€å§‹ç»™11å·å®¢æˆ·æä¾›æœåŠ¡äº†ã€‚\nè¿™æ ·ä¸€æ¥ï¼Œåªè¦æœåŠ¡è¿›ç¨‹æœ‰ç©ºé—²ï¼Œå°±èƒ½ç«‹é©¬æœ‰æ–°çš„è¿›ç¨‹å…¥åº§ï¼Œè®©æœåŠ¡è¿›ç¨‹ä¸è‡³äºæ‘¸é±¼ã€‚æé«˜äº†æœåŠ¡å™¨èµ„æºçš„åˆ©ç”¨æ•ˆç‡ã€‚\næˆ‘ä¹°äº†ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘è‚¯å®šæ˜¯å¸Œæœ›å®ƒåœ¨ä¸å´©æºƒçš„å‰æä¸‹ä¸ºè¶Šå¤šå®¢æˆ·æœåŠ¡è¶Šå¥½ï¼Œèµ„æºæœ€å¤§åŒ–å˜›ï¼\n4.6.4 è¯¥å‚æ•°åº”è¯¥è®¾ç½®æˆå¤šå°‘ï¼Ÿæ—¢ç„¶æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¿™ä¸ªå‚æ•°çš„ä½œç”¨ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠå®ƒè®¾ç½®ä¸ºå¤šå°‘å‘¢ï¼Ÿ\n\né¤é¦†ä¹Ÿéœ€è¦é¢ä¸´è¿™ä¸ªé—®é¢˜\n\nå¦‚æœè‡ªå·±è®¾ç½®çš„æ’é˜Ÿç­‰ä½å¤ªå°‘ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šæœ‰æƒ³æ’é˜Ÿçš„å®¢æˆ·æ²¡æœ‰ä½ç½®åã€‚\nå¦‚æœè®¾ç½®çš„å¤ªå¤šï¼Œé‚£æ–°æ¥çš„å®¢æˆ·å‹æ ¹ä¸æ‰“ç®—æ’é˜Ÿäº†ï¼Œå› ä¸ºä»–ä»¬çŸ¥é“ï¼Œè½®åˆ°è‡ªå·±çš„æ—¶å€™ï¼Œå·²ç»é¥¿æ‰äº†ã€‚\n\næœåŠ¡å™¨ä¹Ÿæ˜¯å¦‚æ­¤\n\nç¬¬äºŒä¸ªå‚æ•°è®¾ç½®çš„ä½äº†ï¼Œæ’é˜Ÿçš„ç©ºä½å¤ªå°‘ï¼Œè¶…è¿‡è¯¥å‚æ•°çš„é“¾æ¥ç›´æ¥è¢«osæ‹’ç»ï¼Œé”™è¿‡äº†æœ¬æ¥å¯ä»¥æä¾›æœåŠ¡çš„ç”¨æˆ·\nç¬¬äºŒä¸ªå‚æ•°è®¾ç½®çš„é«˜äº†ï¼Œç”¨æˆ·è¿‡æ¥æ’é˜Ÿï¼Œç­‰äº†å¥½ä¹…éƒ½æ²¡ç­‰åˆ°ï¼Œäºæ˜¯å°±æŠ¥é”™è¿æ¥è¶…æ—¶äº†ã€‚\nè€Œä¸”ï¼Œæ‰“å¼€ä¸€ä¸ªç½‘é¡µçš„å“åº”é€Ÿåº¦ï¼Œä¹Ÿä¼šç›´æ¥å½±å“ç”¨æˆ·å¯¹ä½ çš„æœåŠ¡çš„æ»¡æ„åº¦ã€‚æ¯æ¬¡ç‚¹å¼€ä½ çš„ç½‘é¡µéƒ½éœ€è¦åŠ è½½ä¸ªåå‡ ç§’çš„ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œç”¨çš„äººåªä¼šè¶Šæ¥è¶Šå°‘ï¼\nè®¾ç½®çš„å¤ªé«˜äº†ï¼Œç»´æŠ¤çš„è¿æ¥ä¹Ÿä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼ŒæœåŠ¡è¿›ç¨‹å¯ç”¨èµ„æºå˜å°‘äº†ï¼\nä¸å…¶å¢é•¿é˜Ÿåˆ—ï¼Œè¿˜ä¸å¦‚å¢åŠ æœåŠ¡è¿›ç¨‹çš„æœåŠ¡èƒ½åŠ›ï¼ˆæ‰©å¤§åº—é¢ï¼‰\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®è‡ªå·±æœåŠ¡çš„é¢å‘ç”¨æˆ·æ•°é‡çº§ï¼Œè®¾ç½®ä¸€ä¸ªåˆé€‚çš„ç­‰ä½æ•°é‡ï¼è¿™ä¸ªåº”è¯¥æ ¹æ®å…·ä½“æƒ…å†µæ¥çœ‹çš„ï¼\n4.6.5 listenå’Œacceptå¦‚ä¸‹å›¾ï¼Œæˆ‘è®©æœåŠ¡è¿›ç¨‹åªå¯¹ä¸€ä¸ªé“¾æ¥è¿›è¡Œacceptï¼Œç›¸å½“äºé¤å…é‡Œé¢åªæœ‰ä¸¤å¼ æ¡Œå­ã€‚æ­¤æ—¶æ–°æ¥çš„é“¾æ¥å°±ä¼šå¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ•°é‡æ­£å¥½æ˜¯listençš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä½†æ˜¯æˆ‘çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯2ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ä¼šæ˜¯3ä¸ªğŸ¤£ï¼‰\n\n5.æ»‘åŠ¨çª—å£ï¼ˆå¯é ä¼ è¾“ï¼‰tcpä¸­å¼•å…¥äº†æ»‘åŠ¨çª—å£çš„æ“ä½œæ¥å®ç°å¯é ä¼ è¾“\n5.1 æ¦‚å¿µåœ¨å®é™…é€šä¿¡ä¸­ï¼Œå¦‚æœçœŸçš„åªæ˜¯è®©åŒæ–¹ä¸€å‘ä¸€ç­”ï¼Œé‚£æ•ˆç‡ä¹Ÿå¤ªä½äº†ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ä¸€æ¬¡æ€§å‘é€å¤šæ¡æ¶ˆæ¯ï¼Œå¯¹æ–¹ä¹Ÿæ˜¯å¯¹å¤šæ¡æŠ¥æ–‡è¿›è¡ŒACKçš„ï¼Œè€Œä¸”åªéœ€è¦ACKä¸€æ¬¡ï¼ˆè¿™ç‚¹åœ¨å‰é¢åºå·éƒ¨åˆ†å·²ç»è®²è¿‡åŸç†äº†ï¼‰\n\nä¸€æ¬¡æ€§å¯ä»¥å‘é€å¤šæ¡æŠ¥æ–‡ï¼Œä½†å‰ææ˜¯å¯¹æ–¹æœ‰èƒ½åŠ›æ”¶é‚£ä¹ˆå¤š\nçª—å£å¤§å°ï¼šä¸€æ¬¡æ€§å¯ä»¥å‘é€çš„æ•°æ®æ•°é‡ï¼ˆæ— éœ€ç­‰å¾…å‰é¢å·²å‘æŠ¥æ–‡çš„ACKï¼Œå°±å¯ä»¥å‘é€è¿™ä¹ˆå¤šï¼‰\nçª—å£å¤§å°æ˜¯ç”±å¯¹æ–¹çš„æ¥æ”¶èƒ½åŠ›å†³å®šçš„\ntcpæŠ¥å¤´ä¸­ï¼Œ16ä½çª—å£å¤§å°å°±æ˜¯æ»‘åŠ¨çª—å£çš„å¤§å°\nSç»™Cæ‰€å‘æŠ¥å¤´ä¸­çš„çª—å£å¤§å°ï¼Œæ—¢ä»£è¡¨Sæ¥æ”¶ç¼“å†²åŒºçš„å¤§å°ï¼Œåˆä»£è¡¨Cå¯ä»¥ä¸€æ¬¡å‘é€çš„æ•°æ®å¤§å°\nSæ¥æ”¶ç¼“å†²åŒºçš„å¤§å°å˜åŒ–ï¼Œä¹Ÿä¼šå¯¼è‡´Sç»™Cæ‰€å‘æŠ¥æ–‡ä¸­ï¼Œçª—å£å¤§å°çš„å˜åŒ–\n\n\nçª—å£è¶Šå¤§ï¼Œä»£è¡¨åŒæ–¹é€šä¿¡çš„ååç‡å°±è¶Šå¤§\nå‘é€çš„æ•°æ®ä¼šä¿ç•™åœ¨å‘é€ç¼“å†²åŒºä¸­ï¼Œå‘é€ç¼“å†²åŒºä»¥å¦‚ä¸‹åŒºåŸŸæ„æˆ\nå·²å‘ï¼Œæ”¶åˆ°äº†ACKçš„æŠ¥æ–‡ï¼ˆå¯åˆ ï¼‰\nå·²å‘ï¼Œæœªæ”¶åˆ°ACKçš„æŠ¥æ–‡\næœªå‘ï¼Œå‡†å¤‡å‘é€çš„æŠ¥æ–‡\n\n\n\n5.2 æ»‘åŠ¨çª—å£ç¤ºæ„å›¾æ»‘åŠ¨çª—å£å¯ä»¥ç”¨ä¸‹å›¾æ¥å½¢è±¡çš„ç†è§£ï¼Œå¯¹å›¾ä¸­çš„æ–‡å­—å°±ä¸å¤è¿°äº†ï¼ˆå¦‚æœå›¾ç‰‡404äº†è¯·åŠæ—¶å‘ŠçŸ¥æˆ‘ï¼Œè°¢è°¢ï¼‰\n\nå’³å’³ï¼Œæœ¬äººå­—ä¸‘ï¼Œç”¨padå†™å°±æ›´ä¸‘äº†ï¼Œè¯·è°…è§£\n5.3 æ€»ç»“å’Œä¹ é¢˜\n\n\n6.æµé‡æ§åˆ¶6.1 æµé‡æ§åˆ¶åŸºæœ¬æ¦‚å¿µæ‰€è°“æµé‡æ§åˆ¶ï¼Œå°±æ˜¯å‘é€æ–¹æ ¹æ®å¯¹æ–¹çš„æ¥æ”¶èƒ½åŠ›æ¥é€‰æ‹©å‘é€æ•°æ®çš„å¤šå°‘ï¼Œè®©å‘é€æ–¹å‘é€é€Ÿç‡åˆ«å¤ªå¿«ã€‚\nå¦‚æœBçš„æ¥æ”¶ç¼“å†²åŒºæ»¡äº†ï¼Œä¼šé€šè¿‡æŠ¥æ–‡ä¸­çš„çª—å£å¤§å°å‘ŠçŸ¥Aï¼ŒAä¸å†ç»§ç»­å‘é€æ•°æ®ã€‚\næ­¤æ—¶ï¼ŒAä¼šåœ¨è¿‡ä¸€ä¼šåï¼Œå‘Bå‘é€ä¸€ä¸ªçª—å£æ¢æµ‹æŠ¥æ–‡ï¼Œè¯¥æŠ¥æ–‡æ²¡æœ‰æœ‰æ•ˆè½½è·ï¼Œæ‰€ä»¥ä¸ä¼šè¿‡å¤šå ç”¨æ¥æ”¶ç¼“å†²åŒºï¼›\nBåœ¨æ”¶åˆ°è¯¥æŠ¥æ–‡åï¼Œä¼šå›åº”æŠ¥æ–‡ï¼Œå‘ŠçŸ¥Aè‡ªå·±çš„çª—å£å¤§å°ï¼Œè¢«ç§°ä¸ºçª—å£æ›´æ–°\n\n6.2 æµé‡æ§åˆ¶ä¸¾ä¾‹ä¸‹å›¾æ˜¯ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„è¿‡ç¨‹ï¼ŒAå’ŒBå»ºç«‹TCPè¿æ¥åï¼Œå¼€å§‹å‘é€æ•°æ®ã€‚å‡è®¾èµ·å§‹çš„æ¥æ”¶çª—å£ä¸º400å­—èŠ‚ï¼Œå‰ä¸¤æ¬¡é€šä¿¡æ­£å¸¸ï¼Œ ä½†æ˜¯Aå‘é€201~300çš„æ•°æ®æ—¶ï¼Œå‡ºç°äº†ä¸¢åŒ…ã€‚\nBç«¯æ”¶åˆ°1åˆ°200çš„æ•°æ®åï¼Œå‘é€äº†ACK&#x3D;201çš„æŠ¥æ–‡ï¼Œå¹¶åœ¨è¯¥æŠ¥æ–‡ä¸­è®¾ç½®rwnd&#x3D;300ï¼Œå³å‘Šè¯‰Aï¼ŒBçš„æ¥æ”¶çª—å£åªæœ‰300å­—èŠ‚ï¼Œè¦æ±‚Aæ›´æ–°å‘é€çª—å£çš„å€¼ã€‚\nAæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡åï¼Œèƒ½å¾—åˆ°ä¸¤ä¸ªä¿¡æ¯\n\n201ä»¥å‰çš„æŠ¥æ–‡ï¼ˆ1åˆ°200ï¼‰éƒ½è¢«BæˆåŠŸæ”¶åˆ°äº†ï¼Œä½†201åˆ°300çš„æŠ¥æ–‡è¿˜æ²¡æœ‰æ”¶åˆ°\néœ€è¦å°†è‡ªå·±çš„å‘é€çª—å£è°ƒæ•´ä¸º300å­—èŠ‚ã€‚\n\néšåï¼ŒAå…ˆæ ¹æ®è‡ªå·±çš„å‘é€ç­–ç•¥ï¼Œå°†301åˆ°400å’Œ401åˆ°500å‘é€å‡ºå»ï¼Œæ­¤æ—¶å‘é€çª—å£å·²æ»¡ï¼Œä¸èƒ½ç»§ç»­å‘é€ï¼\n\nè¿‡äº†ä¸€ä¼šï¼ŒAå‘é€è¿˜æ²¡æœ‰æ”¶åˆ°å¯¹201åˆ°300è¿™ä¸ªæŠ¥æ–‡çš„ç¡®è®¤ï¼Œé‡ä¼ è®¡æ—¶å™¨è¶…æ—¶ï¼Œè§¦å‘å¯¹201å’Œ300çš„è¶…æ—¶é‡ä¼ ã€‚ç”±äºå‘é€çª—å£ä¾æ—§æ˜¯æ»¡çš„ï¼Œæ‰€ä»¥Aåªèƒ½è¿›è¡Œé‡ä¼ ï¼Œä¸èƒ½å‘é€æ–°çš„æ•°æ®ã€‚\nBæ”¶åˆ°é‡ä¼ çš„æŠ¥æ–‡åï¼Œå¯¹501ä¹‹å‰çš„æŠ¥æ–‡è¿›è¡Œç´¯è®¡ç¡®è®¤ï¼Œå¹¶æ›´æ–°Bè‡ªå·±çš„æ¥å—çª—å£å¤§å°ä¸º100å­—èŠ‚ï¼Œå¯¹Aä¸»æœºå†æ¬¡è¿›è¡Œæµæ§ã€‚\n\næ­¤æ—¶Aå°±èƒ½æ›´æ–°è‡ªå·±çš„æ»‘åŠ¨çª—å£åˆ°501å­—èŠ‚ä¹‹åï¼ŒåŒæ—¶å°†å‘é€çª—å£ç¼©çŸ­åˆ°100å­—èŠ‚ã€‚Aåªèƒ½å‘é€501åˆ°600çš„æ•°æ®ï¼Œå°±éœ€è¦ç­‰å¾…Bçš„ç¡®è®¤ã€‚\nå‡è®¾Bæ”¶åˆ°501åˆ°600åï¼Œåˆå¯¹Aè¿›è¡Œäº†ç¬¬ä¸‰æ¬¡æµé‡æ§åˆ¶ï¼Œå°†rwndè®¾ç½®ä¸º0ã€‚æ­¤æ—¶Aå¯ä»¥å°†æ»‘åŠ¨çª—å£ç§»åŠ¨åˆ°601çš„ä½ç½®ï¼Œ601ä¹‹å‰çš„æ•°æ®å¯ä»¥è¢«åˆ é™¤ã€‚ä½†ç”±äºBçš„æ¥æ”¶çª—å£ä¸º0ï¼ŒAéœ€è¦æ›´æ–°è‡ªå·±çš„å‘é€çª—å£ä¸º0ï¼Œæ­¤æ—¶Aä¸èƒ½å‘é€ä»»ä½•æ•°æ®ã€‚\n\n6.3 æŒç»­è®¡æ—¶å™¨ä¸Šé¢ä¾‹å­æœ€åï¼ŒAçš„å‘é€çª—å£è¢«è®¾ç½®ä¸ºäº†0ã€‚æ­¤æ—¶å°±éœ€è¦ä¸€ä¸ªæŒç»­è®¡æ—¶å™¨çš„ä»‹å…¥ã€‚\nå‡è®¾Bè¿‡äº†ä¸€æ®µæ—¶é—´å†æ¬¡å‘é€äº†ä¸€ä¸ªçª—å£æ›´æ–°æŠ¥æ–‡ï¼Œå°†rwndè®¾ç½®ä¸º300ï¼Œä½†æ˜¯è¯¥æŠ¥æ–‡ä¸¢åŒ…äº†ã€‚è¿™æ—¶å€™Aå’ŒBå°±ä¼šè¿›å…¥ä¸€ä¸ªå¾ˆå°¬å°´çš„å±€é¢ï¼Œå³Båœ¨ç­‰å¾…Aå‘é€æ•°æ®ï¼ŒAåœ¨ç­‰å¾…Bæ›´æ–°rwndï¼ŒåŒæ–¹è°éƒ½æ²¡æœ‰åŠæ³•ç»§ç»­å‘é€æ•°æ®ã€‚å³å‡ºç°æ­»é”ã€‚\n\næŒç»­è®¡æ•°å™¨ä¼šåœ¨ä¸€ç«¯çš„å‘é€çª—å£è¢«ç½®ä¸º0çš„æ—¶å€™ä»‹å…¥ï¼šAè¿‡äº†ä¸€æ®µæ—¶é—´åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ”¶åˆ°çª—å£æ›´æ–°æŠ¥æ–‡ï¼Œåˆ™ä¼šå‘é€ä¸€ä¸ªé›¶çª—å£æ¢æµ‹æŠ¥æ–‡ï¼ˆæºå¸¦1å­—èŠ‚æ•°æ®ï¼‰ã€‚Bæ”¶åˆ°è¿™ä¸ªé›¶çª—å£æ¢æµ‹æŠ¥æ–‡åï¼Œéœ€è¦å‘é€ä¸€ä¸ªå“åº”ï¼Œå¹¶æºå¸¦æ–°çš„rwndå€¼ã€‚\nè¿™ä¸ªæ­¥éª¤ä¼šè¢«ä¸€ç›´é‡å¤ï¼Œç›´åˆ°Aæ”¶åˆ°ä¸€ä¸ªrwndä¸ä¸º0çš„æŠ¥æ–‡åï¼Œå°†è‡ªå·±çš„å‘é€çª—å£å¤§å°æ›´æ–°ï¼Œå¼€å§‹ç»§ç»­å‘é€æ•°æ®ã€‚\n\nå¦‚æœè¿™ä¸ªé›¶çª—å£æ¢æµ‹æŠ¥æ–‡ä¹Ÿä¸¢å¤±äº†ä¼šå’‹æ ·ï¼Ÿä¸ç”¨æ‹…å¿ƒï¼Œæ¥æ”¶æ–¹éœ€è¦å¯¹é›¶çª—å£æ¢æµ‹æŠ¥æ–‡è¿›è¡ŒACKï¼Œå‘é€æ–¹ä¸€ç›´æ²¡æœ‰æ”¶åˆ°ACKï¼Œä¼šè§¦å‘è¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚\n6.4 å‘é€çª—å£ä¾‹é¢˜\n7.æ‹¥å¡æ§åˆ¶å‰é¢æåˆ°çš„tcpå¤„ç†æªæ–½ï¼Œéƒ½æ˜¯ä¸ºäº†ä¿è¯é€šä¿¡åŒæ–¹çš„ä¸»æœºä¸ä¼šå‡ºä»€ä¹ˆé”™è¯¯ï¼Œå¯¼è‡´æ•°æ®çš„ä¸¢å¤±ã€‚\nä½†æ˜¯ä¸€ç›´ä¹ˆæœ‰æåˆ°ä¸€ç‚¹ï¼šç½‘ç»œå‡ºé”™äº†å’‹åŠï¼Ÿ\n\nä½ å’Œå¯¹æ–¹æ‰“ç”µè¯ï¼Œç»“æœç”µçº¿éƒ½æ–­äº†ï¼Œé‚£è¿˜å’‹ç”µè¯å‘¢ï¼Ÿ\n\nä¸ºäº†é¿å…é€šä¿¡ç»™ç½‘ç»œé€ æˆå¤ªå¤§çš„è´Ÿæ‹…ï¼Œtcpé™¤äº†è€ƒè™‘å¯¹æ–¹çš„æ¥å—èƒ½åŠ›ä»¥å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘ç½‘ç»œçš„æ‰¿è½½èƒ½åŠ›ã€‚\n7.1 å¦‚ä½•ç¡®è®¤ç½‘ç»œå‡ºé—®é¢˜ï¼Ÿå¦‚æœåŒæ–¹é€šä¿¡çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸¢åŒ…ï¼Œæˆ‘ä»¬çœŸçš„èƒ½ç¡®è®¤ç½‘ç»œå‡ºç°é—®é¢˜äº†å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚\n\nä½ å’Œæœ‹å‹ä¹‹é—´æ‰“ç”µè¯ï¼Œçªç„¶å¯¹æ–¹çš„å£°éŸ³å¡äº†ä¸€ä¸‹ï¼Œä½ å°±èƒ½ä¸‹ç»“è®ºï¼Œæ˜¯çš„ç”µè¯çº¿æ–­äº†å—ï¼Ÿ\n\nå®é™…ä¸Šï¼Œåªæœ‰ä½ å®Œå…¨å¬ä¸åˆ°å¯¹æ–¹å£°éŸ³äº†ï¼Œåˆç¡®è®¤åŒæ–¹çš„æ‰‹æœºéƒ½æ²¡æœ‰é—®é¢˜ï¼Œæ‰èƒ½è®¤ä¸ºæ˜¯é€šä¿¡å‡ºäº†é—®é¢˜ã€‚\n\nç½‘ç»œä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªæœ‰å‡ºç°å¤§é¢ç§¯ä¸¢åŒ…ï¼Œæ‰èƒ½è®¤ä¸ºæ˜¯ç½‘ç»œå‡ºäº†é—®é¢˜ã€‚å½“ç½‘ç»œä¸­çš„æŸä¸€èµ„æºçš„è¦æ±‚è¶…è¿‡äº†è¯¥èµ„æºèƒ½æä¾›çš„éƒ¨åˆ†ï¼Œç½‘ç»œæ€§èƒ½å°±ä¼šå˜åï¼Œè¿™ç§æƒ…å†µå°±å«åšæ‹¥å¡ã€‚\næˆ‘ä»¬çŸ¥é“ï¼ŒtcpåŸºäºå­—èŠ‚æµï¼Œä¸€æ¬¡æ€§å¯ä»¥å‘é€å¤§é‡çš„ä¿¡æ¯ã€‚è¦æ˜¯ä¸€ä¸ªè¿›ç¨‹çš„tcpè¿æ¥ä¸€å»ºç«‹ï¼Œå°±å¼€å§‹å¾€ç½‘ç»œé‡Œé¢å¡ä¸€å¤§å †çš„ä¿¡æ¯ï¼ŒæŠŠç½‘ç»œç»™æ•´å µå¡äº†ï¼Œé‚£å¥½å—ï¼Ÿ\nä¸€ä¸ªè¿›ç¨‹è¿™ä¹ˆå¹²ï¼Œé‚£å¤šå‡ ä¸ªè¿›ç¨‹åŠ å…¥ï¼Œç½‘ç»œç›´æ¥é›ªä¸ŠåŠ éœœã€‚å¡æ­»äº†ï¼Œè°éƒ½åˆ«æƒ³ç”¨ï¼å› æ­¤ï¼Œå¦‚æœå‡ºç°äº†æ‹¥å¡è¿˜ä¸å¯¹è¿æ¥è¿›è¡Œæ§åˆ¶ï¼Œæ•´ä¸ªç½‘ç»œçš„ååé‡ä¼šéšç€è¾“å…¥è½½è·çš„æ‰©å¤§è€Œä¸æ–­ä¸‹é™ã€‚\n\n7.1.1 TCPæä¾›çš„æ‹¥å¡æ§åˆ¶ç­–ç•¥ä¸ºäº†è§£å†³ç½‘ç»œæ‹¥å¡é—®é¢˜ï¼ŒTCPæä¾›äº†å››ä¸ªæ­¥éª¤ï¼šæ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤ã€‚\nä¸‹é¢å°†ä¾æ¬¡ä»‹ç»è¿™å››ä¸ªæ­¥éª¤çš„åŸç†ï¼Œå¹¶åœ¨å¦‚ä¸‹å‡å®šæ¡ä»¶ä¸‹è¿›è¡Œ\n\næ•°æ®å•æ–¹å‘ä¼ é€ï¼Œå¦å¤–ä¸€æ–¹åªå‘é€ç¡®è®¤\næ¥æ”¶æ–¹æ€»æ˜¯æœ‰è¶³å¤Ÿå¤§çš„ç¼“å­˜ç©ºé—´ï¼Œå‘é€æ–¹çš„çª—å£å¤§å°åªç”±ç½‘ç»œæ‹¥å¡ç¨‹åº¦æ¥å†³å®š\nä»¥æœ€å¤§æŠ¥æ–‡æ®µMSSçš„ä¸ªæ•°ä¸ºè®¨è®ºé—®é¢˜çš„å•ä½ï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚\n\nä¸ºäº†å®ç°è¿™äº›æœºåˆ¶ï¼Œå‘é€æ–¹éœ€è¦ç»´æŠ¤ä¸€ä¸ªcwndæ‹¥å¡çª—å£å­—æ®µï¼Œç”¨äºçº¦æŸè‡ªå·±çš„å‘é€ã€‚è¯¥å€¼å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¼šåŠ¨æ€å˜åŒ–ã€‚\n\næ‹¥å¡çª—å£ç»´æŠ¤åŸåˆ™ï¼šåªè¦ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±ä¼šå¢å¤§ã€‚ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å‡å°‘\nåˆ¤æ–­å‡ºç°ç½‘ç»œæ‹¥å¡çš„ä¾æ®ï¼šæ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°åº”å½“åˆ°è¾¾çš„ç¡®è®¤æŠ¥æ–‡\n\nå‘é€æ–¹ä¼šå°†æ‹¥å¡çª—å£cwndä½œä¸ºå‘é€çª—å£swndï¼Œå³swnd&#x3D;cwndã€‚\n\n7.2 æ…¢å¯åŠ¨å’Œæ‹¥å¡é¿å…TCPæ·»åŠ äº†æ…¢å¯åŠ¨æœºåˆ¶ã€‚è¯´ç™½äº†å°±æ˜¯ï¼šåˆšå¼€å§‹å‘é€çš„å°‘ï¼Œé€æ¸å¢å¤šï¼\nä¸ºäº†å®ç°æ…¢å¯åŠ¨ï¼ŒTCPè¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ssthreshçŠ¶æ€å˜é‡ï¼š\n\nå½“cwnd &lt; ssthreshæ—¶ï¼Œé‡‡ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼›\nå½“cwnd &gt; ssthreshæ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼Œè€Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•ï¼›\nå½“cwnd &#x3D; ssthreshæ—¶ï¼Œæ—¢å¯ä»¥ä½¿ç”¨æ…¢å¼€å§‹ï¼Œåˆå¯ä»¥ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ã€‚\n\n\næ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š\n\næ‹¥å¡çª—å£ä»ä¸€ä¸ªæ®µçš„å¤§å°å¼€å§‹ï¼ˆçº¦1KBï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºä»1å¼€å§‹\næ‹¥å¡çª—å£æœ‰ä¸€ä¸ªé˜ˆå€¼ssthreshï¼Œé»˜è®¤ä¸ºå¯¹æ–¹çš„çª—å£å¤§å°ï¼Œè¿™åœ¨3æ¬¡æŒ¥æ‰‹çš„æ—¶å€™å·²ç»ç¡®å®šäº†ï¼›\næ”¶åˆ°ä¸€æ¬¡ACKï¼Œä¸”æ‹¥å¡çª—å£&lt;é˜ˆå€¼ssthreshï¼Œç›´æ¥å°†ç°æœ‰æ‹¥å¡çª—å£å¤§å°åŠ å€ã€æŒ‡æ•°å¢é•¿ã€‘\nä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œä¸€ä¸ªACKï¼ˆæ³¨æ„æ˜¯ä¸€ä¸ªACKï¼Œå¹¶éä¸€ä¸ªACKæŠ¥æ–‡ï¼‰å°±åŠ 1ï¼›\næ¯”å¦‚ç¬¬ä¸€æ¬¡å‘é€äº†1000ä¸ªå­—èŠ‚çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆæ”¶åˆ°å¯¹æ–¹çš„ACKä¸º1001åï¼Œç›´æ¥å°†æ‹¥å¡çª—å£å¤§å°åŠ å€ï¼Œæ­¤æ—¶ä¸º2000ï¼Œä¸‹ä¸€æ¬¡å‘é€å°±å‘2000å­—èŠ‚çš„æ¶ˆæ¯ï¼›\næ‹¥å¡çª—å£åŠ å€çš„æ—¶å€™ä¸èƒ½å¤§äºssthreshï¼Œå¦‚æœæœ¬æ¬¡åŠ å€ä¼šå¤§äºssthreshï¼Œåˆ™åªèƒ½å¢åŠ åˆ°ssthreshå¹¶ä½¿ç”¨æ‹¥å¡é¿å…ï¼›\n\n\næ”¶åˆ°ACKï¼Œæ‹¥å¡çª—å£&gt;=é˜ˆå€¼ssthreshï¼Œå¼€å§‹ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ï¼Œçª—å£å€¼+1ã€çº¿æ€§å¢é•¿ã€‘\n\nå¦‚æœå‡ºç°äº†å‘é€è¶…æ—¶ï¼ˆé‡ä¼ è®¡æ—¶å™¨è¶…æ—¶ï¼‰ï¼Œå‘é€æ–¹å¯èƒ½ä¼šè®¤ä¸ºç½‘ç»œæ‹¥å¡ï¼Œå¼€å§‹è¿›è¡Œæ§åˆ¶ï¼š\n\né˜ˆå€¼ssthreshè®¾ç½®ä¸ºæ‹¥å¡çª—å£/2ï¼›\næ‹¥å¡çª—å£cwndç½®ä¸º1ï¼ˆä»å¤´å¼€å§‹ï¼Œé¿å…å¤§é¢ç§¯çš„é‡ä¼ ï¼‰ï¼›\næ‹¥å¡çª—å£cwndå§‹ç»ˆå°äºæ¥æ”¶ç«¯çš„æ¥æ”¶çª—å£ï¼›\næ‹¥å¡çª—å£é‡æ–°å¼€å§‹æ…¢å¼€å§‹ï¼Œç›´åˆ°æ‹¥å¡çª—å£&gt;=é˜ˆå€¼ssthreshï¼Œå¼€å§‹ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³•ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ã€‚\n\nå®é™…ä¼ è¾“çš„æ•°æ®å¤§å° = min(æ‹¥å¡çª—å£,å¯¹æ–¹æ¥æ”¶çª—å£å¤§å°)Swnd = Min[Rwnd, Cwnd]\n\nè¿™ä¾¿æ˜¯æ…¢å¯åŠ¨å’Œæ‹¥å¡æ§åˆ¶çš„æœºåˆ¶ï¼Œä¸Šé¢è´´çš„å›¾èƒ½å½¢è±¡çš„å±•ç¤ºæ•°æ®æ…¢æ…¢å¢é•¿åˆ°æŒ‡æ•°çº§å¢é•¿çš„è¿‡ç¨‹ã€‚\n\n7.3 å¿«é‡ä¼ ï¼ˆ3ACKï¼‰TCPå¿«é‡ä¼ ï¼ˆFast Retransmitï¼‰æ˜¯TCPåè®®ä¸­çš„ä¸€ç§æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œç”¨äºåŠ å¿«æ•°æ®åŒ…çš„é‡ä¼ ï¼Œä»¥å‡å°‘æ•°æ®ä¼ è¾“çš„å»¶è¿Ÿå’Œæé«˜ç½‘ç»œæ€§èƒ½ã€‚\nåœ¨TCPåè®®ä¸­ï¼Œå½“å‘é€æ–¹å‘é€æ•°æ®åŒ…åˆ°æ¥æ”¶æ–¹åï¼Œä¼šå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…æ¥æ”¶æ–¹å‘é€ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰å›æ¥ã€‚å¦‚æœå‘é€æ–¹åœ¨å®šæ—¶å™¨è¶…æ—¶å‰æ”¶åˆ°äº†ç›¸åº”çš„ACKï¼Œè¯´æ˜æ•°æ®åŒ…å·²ç»æˆåŠŸæ¥æ”¶ï¼Œå‘é€æ–¹ä¼šå°†å®šæ—¶å™¨åœæ­¢ï¼Œå¹¶ç»§ç»­å‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ã€‚\n\nè¿™ä¸ªé»˜è®¤çš„å®šæ—¶å™¨ç­–ç•¥ï¼Œæ˜¯ç”¨äºTCPçš„è¶…æ—¶é‡ä¼ çš„ã€‚\n\nç„¶è€Œï¼Œå¦‚æœå‘é€æ–¹åœ¨å®šæ—¶å™¨è¶…æ—¶å‰æ²¡æœ‰æ”¶åˆ°ACKï¼Œé€šå¸¸ä¼šè®¤ä¸ºæ•°æ®åŒ…ä¸¢å¤±äº†ï¼Œå› æ­¤ä¼šé‡æ–°å‘é€è¯¥æ•°æ®åŒ…ã€‚ä½†æœ‰æ—¶å€™ï¼Œæ¥æ”¶æ–¹å®é™…ä¸Šå·²ç»æ”¶åˆ°äº†æ•°æ®åŒ…ï¼Œåªæ˜¯ACKå› ä¸ºæŸç§åŸå› æ²¡æœ‰åŠæ—¶å‘é€å›æ¥ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºç½‘ç»œå»¶è¿Ÿã€æ‹¥å¡ç­‰é€ æˆçš„ã€‚\nè€ŒTCPå¿«é‡ä¼ çš„æ€æƒ³æ˜¯ï¼Œå½“å‘é€æ–¹æ”¶åˆ°è¿ç»­çš„ç›¸åŒçš„ACKæ—¶ï¼Œä¸ç­‰å¾…å®šæ—¶å™¨è¶…æ—¶ï¼Œè€Œæ˜¯ç«‹å³é‡ä¼ å¯¹åº”çš„æ•°æ®åŒ…ã€‚\n\nè¦æ±‚æ¥æ”¶æ–¹ä¸è¦ç­‰è‡ªå·±å‘é€æ•°æ®çš„æ—¶å€™æ‰è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œè€Œæ˜¯ç«‹é©¬å‘é€ç¡®è®¤\nå³ä¾¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µï¼Œä¹Ÿè¦ç«‹å³å‘å‡ºå¯¹å·²æ”¶åˆ°çš„æŠ¥æ–‡æ®µçš„é‡å¤ç¡®è®¤ã€‚æ¯”å¦‚æ”¶åˆ°äº†1ã€2ã€3ã€6ã€5ï¼Œæ”¶åˆ°åç»­çš„æŠ¥æ–‡æ—¶å¿…é¡»å‘é€å¯¹3çš„é‡å¤ç¡®è®¤ï¼ˆå³ACK&#x3D;4ï¼ŒæœŸæœ›æ”¶åˆ°4å·æŠ¥æ–‡ï¼‰\n\nè¿™æ˜¯å› ä¸ºè¿ç»­æ”¶åˆ°ç›¸åŒçš„ACKï¼Œè¡¨æ˜æ¥æ”¶æ–¹å·²ç»æ”¶åˆ°äº†ä¸€ç³»åˆ—çš„æ•°æ®åŒ…ï¼Œå¹¶ä¸”æ­£åœ¨ç­‰å¾…æ¥æ”¶ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ã€‚é€šè¿‡ç«‹å³é‡ä¼ ï¼Œå¯ä»¥é¿å…ç­‰å¾…å®šæ—¶å™¨è¶…æ—¶çš„å»¶è¿Ÿï¼Œä»è€Œæ›´å¿«åœ°æ¢å¤æ•°æ®ä¼ è¾“ã€‚\nå…·ä½“æ¥è¯´ï¼ŒTCPå¿«é‡ä¼ çš„æ­¥éª¤å¦‚ä¸‹ï¼š\n\nå‘é€æ–¹å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¹¶å¯åŠ¨å®šæ—¶å™¨ã€‚\næ¥æ”¶æ–¹æ”¶åˆ°æ•°æ®åŒ…åï¼Œå‘é€å¯¹åº”çš„ACKå›å»ã€‚\nå¦‚æœå‘é€æ–¹æ”¶åˆ°ä¸‰ä¸ªè¿ç»­çš„ç›¸åŒACKï¼ˆå³æ”¶åˆ°ä¸‰ä¸ªå¯¹åŒä¸€ä¸ªæ•°æ®åŒ…çš„ç¡®è®¤åº”ç­”ï¼‰ï¼Œå°±ç«‹å³é‡ä¼ è¯¥æ•°æ®åŒ…ï¼Œè€Œä¸ç­‰å¾…å®šæ—¶å™¨è¶…æ—¶ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿«é‡ä¼ åªé€‚ç”¨äºå¯é ä¼ è¾“çš„TCPè¿æ¥ï¼Œè€Œä¸é€‚ç”¨äºæ— è¿æ¥çš„UDPåè®®ã€‚TCPå¿«é‡ä¼ æ˜¯TCPåè®®ä¸­çš„ä¸€ç§ä¼˜åŒ–æªæ–½ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ”¹å–„ç½‘ç»œæ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„ä¼ è¾“å»¶è¿Ÿï¼Œæé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚\nå› ä¸ºæ”¶åˆ°ä¸‰ä¸ªè¿ç»­ç›¸åŒACKæ‰ä¼šè§¦å‘ç«‹å³é‡ä¼ ï¼Œè¿™é‡Œçš„é—®é¢˜åˆå«3ACKé—®é¢˜ã€‚\nä½¿ç”¨å¿«é‡ä¼ ç­–ç•¥ï¼Œå¯ä»¥é¿å…æŸäº›æŠ¥æ–‡å‡ºç°è¶…æ—¶é‡ä¼ ï¼Œä»è€Œå¯¼è‡´å‘é€æ–¹é”™è¯¯é‡ç½®cwndå’Œssthreshï¼Œè®©ç½‘ç»œçš„ååç‡å¢åŠ ã€‚\n\n3ACKä¹‹åï¼Œä¸€èˆ¬çš„åšæ³•ä¸‹éœ€è¦å°†cwndå’Œssthreshéƒ½è®¾ç½®ä¸ºå½“å‰cwndçš„ä¸€åŠã€‚\n7.4 å¿«æ¢å¤å¿«æ¢å¤ç®—æ³•ä¹Ÿæ˜¯åŸºäº3ACKé—®é¢˜çš„ï¼Œå½“å‘é€æ–¹æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ACKï¼Œè¿™ä»£è¡¨æ¥æ”¶æ–¹å…¶å®æ”¶åˆ°äº†åç»­çš„ä¸‰ä¸ªæŠ¥æ–‡ï¼Œåªä¸è¿‡ä¸­é—´æœ‰ä¸€ä¸ªä¸¢åŒ…äº†è€Œå·²ã€‚å› æ­¤ï¼Œç½‘ç»œä¸­éœ€è¦å‘é€çš„æŠ¥æ–‡å…¶å®æ˜¯å°‘äº†ä¸‰ä¸ªï¼Œå¯ä»¥å°†æ‹¥å¡çª—å£å¢å¤§ï¼ˆssthresh+3ï¼‰\n\n7.5 æ€»ç»“å’Œä¹ é¢˜\n\n8.å»¶è¿Ÿåº”ç­”8.1 é—®é¢˜\nå¦‚ä½•åœ¨ä¿è¯ä¸æ‹¥å¡ç½‘ç»œçš„å‰æä¸‹ï¼Œä¼ è¾“æ›´å¤šæ•°æ®ï¼Ÿ\n\nè¦çŸ¥é“ï¼Œç½‘ç»œç¯å¢ƒå¤æ‚å¤šå˜ï¼Œä¸€æ¬¡æ€§å‘é€æ›´å¤šæ•°æ®ï¼Œæ˜¯ä¼˜äºå¤šæ¬¡å‘é€å°‘é‡æ•°æ®çš„\nè®°ä½ï¼šçª—å£è¶Šå¤§ï¼Œç½‘ç»œååé‡è¶Šå¤§ï¼Œä¼ è¾“æ•ˆç‡å°±è¶Šé«˜ï¼\nè¿™æ—¶å€™ï¼Œå¦‚ä½•æé«˜ç½‘ç»œä¼ è¾“æ•ˆç‡çš„é—®é¢˜ï¼Œå°±è¢«è½¬æ¢æˆäº†ï¼šä¸Šå±‚å¦‚ä½•å°½å¿«å–èµ°ç¼“å†²åŒºä¸­çš„æ•°æ®çš„é—®é¢˜ã€‚\n8.2 æ¦‚å¿µæ‰€è°“å»¶è¿Ÿåº”ç­”ï¼Œå³æ”¶åˆ°æ¶ˆæ¯åï¼Œç­‰ä¸€ä¼šå†ç»™å¯¹æ–¹åº”ç­”ï¼›\næ­¤æ—¶ç­‰å¾…çš„æ˜¯åº”ç”¨å±‚å–èµ°æ¥æ”¶ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚è¿™æ ·åœ¨å›åº”ACKçš„æ—¶å€™ï¼Œç¼“å†²åŒºçš„å®¹é‡æ›´å¯Œè£•ï¼ŒACKä¸­æºå¸¦çš„çª—å£å¤§å°ä¹Ÿå°±æ›´å¤§ï¼Œä¸‹æ¬¡å¯¹æ–¹å°±èƒ½å‘é€æ›´å¤šæ•°æ®ï¼Œæé«˜äº†tcpé€šä¿¡çš„æ•ˆç‡ï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçª—å£å¤§å°çš„å¢åŠ ï¼Œæ˜¯ä¸ç½‘ç»œæ‹¥å¡æ— å…³çš„ã€‚äºŒè€…æ˜¯tcpåœ¨ä¼ è¾“ä¸­éƒ½è¦è€ƒè™‘çš„ä¸¤ä¸ªç‹¬ç«‹çš„é—®é¢˜ã€‚\n\næˆ‘ä»¬åªè¦å¤šç­‰ä¸€ç­‰ï¼Œå°±èƒ½ç»™å‡ºæ—¶é—´è®©åº”ç”¨å±‚å–èµ°ä¸€äº›æ•°æ®ï¼Œå†ç»™å¯¹æ–¹ACKï¼Œå°±èƒ½è®©è‡ªå·±çš„æ»‘åŠ¨çª—å£å¤§å°æ›´å¤§ï¼\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ —å­ï¼š\n\nå‡è®¾æ¥æ”¶ç«¯ç¼“å†²åŒºä¸º1MBï¼Œä¸€æ¬¡æ”¶åˆ°äº†500KBçš„æ•°æ®ï¼›å¦‚æœç«‹åˆ»åº”ç­”ï¼Œæ­¤æ—¶è¿”å›çš„çª—å£å¤§å°å°±æ˜¯500KBï¼›\nä½†å®é™…ä¸Šï¼Œæ¥æ”¶ç«¯å¤„ç†çš„å¾ˆå¿«ï¼Œåœ¨30msåï¼Œåº”ç”¨å±‚å°±å–èµ°äº†æ”¶åˆ°çš„è¿™500KBçš„æ•°æ®\nè¿™æ—¶å€™ï¼Œæ¥æ”¶ç«¯åœ¨ç­‰å¾…å‘é€ç«¯ç»™è‡ªå·±å‘æ¥çš„500KBæ•°æ®çš„æ—¶å€™ï¼Œç¼“å†²åŒºå°±å·²ç»æ¢å¤æˆ1MBäº†\nä½†å‘é€ç«¯å¹¶ä¸èƒ½çŸ¥æ™“è¿™ä»¶äº‹ï¼Œå®ƒä¾æ—§æ˜¯æŒ‰500KBç»™æ¥æ”¶ç«¯å‘é€çš„ä¿¡æ¯ã€‚è¿™æ—¶å€™ï¼Œæ¥æ”¶ç«¯çš„ç¼“å†²åŒºå°±å‡ºç°äº†é—²ç½®\nå¦‚æœæˆ‘ä»¬è®©æ¥å—ç«¯æ™šä¸€ç‚¹ï¼ˆæ¯”å¦‚æ™š200msï¼‰å†ç»™å‘é€ç«¯è¿›è¡Œåº”ç­”ï¼Œæ­¤æ—¶åº”ç”¨å±‚å°±å·²ç»å–èµ°ç¼“å†²åŒºä¸­çš„æ•°æ®äº†ï¼Œç¼“å†²åŒºå¤§å°æ¢å¤ä¸º1MBï¼Œæ¥æ”¶ç«¯å‘é€çš„åº”ç­”ä¸­æ»‘åŠ¨çª—å£çš„å¤§å°ä¹Ÿå¢åŠ ä¸º1MBï¼Œå‘é€ç«¯å¯ä»¥ä¸€æ¬¡å‘é€æ›´å¤šæ•°æ®ï¼Œç¼“å†²åŒºåˆ©ç”¨ç‡æé«˜ï¼\n\næ³¨æ„ï¼Œæ¥æ”¶ç«¯ç¼“å†²åŒºæé«˜ï¼Œèƒ½è®©å‘é€ç«¯ä¸€æ¬¡å‘é€æ•°æ®é‡çš„ä¸Šé™æé«˜ã€‚å®é™…å‘é€å¤šå°‘æ•°æ®ï¼Œè¿˜æ˜¯ç”±åŒæ–¹é€šä¿¡çš„å†…å®¹å†³å®šçš„ã€‚\n8.3 ç­–ç•¥å»¶è¿Ÿåº”ç­”çš„æ—¶é—´éœ€è¦æ³¨æ„ï¼Œä¸èƒ½å¤ªé•¿ï¼ˆå¦åˆ™å‘é€ç«¯ä¼šå› ä¸ºè¶…æ—¶æ²¡æœ‰æ”¶åˆ°ACKè€Œè§¦å‘é‡ä¼ ï¼‰ï¼›ä¹Ÿä¸èƒ½å¤ªçŸ­ï¼Œå¦åˆ™åº”ç”¨å±‚è¿˜æ²¡æ¥å¾—åŠå–èµ°æ•°æ®\nä¸€èˆ¬å»¶è¿Ÿåº”ç­”æœ‰å¦‚ä¸‹ä¸¤ä¸ªç­–ç•¥\n\néš”Nä¸ªåŒ…åº”ç­”ä¸€æ¬¡\néš”ä¸€å®šæ—¶é—´åº”ç­”ä¸€æ¬¡ï¼ˆè¦åœ¨å»¶è¿Ÿçš„åŒæ—¶ï¼Œé¿å…å¯¹æ–¹è¿›è¡Œè¶…æ—¶é‡ä¼ ï¼‰\n\nå»¶è¿Ÿåº”ç­”çš„ç­–ç•¥æ ¹æ®ä¸åŒå¹³å°è€Œä¸åŒï¼Œä¸€èˆ¬Nå–2ï¼Œé—´éš”æ—¶é—´å–200msï¼›\n9.æå¸¦åº”ç­”åœ¨tcpæŠ¥æ–‡çš„ACKåº”ç­”çš„æ—¶å€™ï¼Œå¦‚æœé‡‡ç”¨ä¸€é—®ä¸€ç­”çš„æ–¹å¼ï¼Œä¼šå¯¼è‡´åŒæ–¹é€šä¿¡æ•ˆç‡è¾ƒä½\nA -&gt; B åƒäº†å—B -&gt; A åƒäº†B -&gt; A ä½ å‘¢ï¼ŸA -&gt; B æˆ‘è¿˜æ²¡æœ‰\n\nå¦‚æœé‡‡ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ï¼Œå°±èŠ‚çœäº†ä¸€æ¬¡æ”¶å‘çš„æ—¶é—´ï¼Œæé«˜äº†é€šä¿¡æ•ˆç‡\nA -&gt; B åƒäº†å—B -&gt; A åƒäº†,ä½ å‘¢ï¼ŸA -&gt; B æˆ‘è¿˜æ²¡æœ‰\n\nTCPçš„æå¸¦åº”ç­”å°±æ˜¯å¦‚æ­¤ï¼Œåœ¨å›ç­”å¯¹æ–¹çš„æ¶ˆæ¯(ACK)çš„åŒæ—¶ï¼Œæºå¸¦ä¸Šè‡ªå·±è¦å‘é€ç»™å¯¹æ–¹çš„ä¿¡æ¯ã€‚\nè¦çŸ¥é“ï¼Œæ‰€è°“çš„ACKæŠ¥æ–‡ï¼Œåªæ˜¯éœ€è¦å°†æŠ¥å¤´ä¸­çš„ACKæ ‡è®°ä½ç½®ä¸º1å³å¯ï¼Œå¹¶ä¸å½±å“è¿™ä¸ªæŠ¥æ–‡å…¶ä»–éƒ¨åˆ†çš„åŠŸèƒ½ï¼\n\n10.é€‰æ‹©ç¡®è®¤å‰é¢è®²è¿°æ‹¥å¡æ§åˆ¶ä»¥åŠTCPå¯é ä¼ è¾“çš„æ—¶å€™ï¼Œéƒ½æåˆ°TCPæ¥æ”¶æ–¹åªèƒ½å¯¹æ”¶åˆ°çš„æŒ‰åºæŠ¥æ–‡æ•°æ®ä¸­çš„æœ€é«˜åºå·ç»™å‡ºç¡®è®¤ï¼Œå¦‚æœè¿˜æœ‰å¤šä½™çš„æœªæŒ‰åºæŠµè¾¾çš„æŠ¥æ–‡ï¼Œåˆ™æ— æ³•å®ç°ç¡®è®¤ï¼Œå¹¶ä¸”ä¼šåœ¨è¶…æ—¶é‡ä¼ çš„æ—¶å€™ä¸€å¹¶é‡ä¼ \n\næ¥å—æ–¹æ”¶åˆ°äº†0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ7ï¼Œ6ï¼›\næ¥æ”¶æ–¹åªèƒ½ç¡®è®¤0åˆ°4ï¼Œå³ACK&#x3D;5ï¼›\nå‘é€æ–¹æ”¶åˆ°è¯¥ACKï¼Œä¼šè®¤ä¸º6å’Œ7ä¹Ÿä¸¢äº†ï¼Œä¼šä»5å¼€å§‹é‡æ–°å‘é€5ï¼Œ6ï¼Œ7ï¼›\nä½†æ˜¯å®é™…ä¸Šæ¥æ”¶æ–¹å·²ç»æ”¶åˆ°äº†6å’Œ7ï¼Œå‘é€æ–¹ç›¸å½“äºå¤šé‡ä¼ äº†ä¸€æ¬¡6å’Œ7ï¼›\n\næœªäº†é¿å…è¿™ç§æƒ…å†µï¼ŒTCPå¯ä»¥ä½¿ç”¨é€‰æ‹©ç¡®è®¤ï¼Œæ¥è®©å‘é€æ–¹åªé‡ä¼ ç¼ºå°‘çš„æŠ¥æ–‡ï¼Œè€Œä¸å‡ºç°å¤šä½™çš„é‡ä¼ é—®é¢˜ã€‚\n\nå› ä¸ºé»˜è®¤çš„TCPæŠ¥å¤´ä¸­å¹¶æ²¡æœ‰æä¾›é€‰æ‹©ç¡®è®¤å­—æ®µç›¸å…³çš„å–å€¼ï¼Œæ‰€ä»¥RCF2018è§„å®šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨é€‰æ‹©ç¡®è®¤åŠŸèƒ½ï¼Œè¦åœ¨TCPçš„æ‰©å±•é€‰é¡¹ä¸­å®ç°ã€‚\n\nä½†æ˜¯ï¼ŒSACKç›¸å…³æ–‡æ¡£å¹¶æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºå‘é€æ–¹åº”è¯¥å¦‚ä½•å“åº”SACKï¼Œå› æ­¤å¤§éƒ¨åˆ†TCPçš„å®ç°è¿˜æ˜¯é‡‡ç”¨äº†é‡ä¼ æ‰€æœ‰æœªè¢«ç¡®è®¤çš„æ•°æ®å—ã€‚\n11.é¢å‘å­—èŠ‚æµè°ƒç”¨writeæ—¶ï¼Œæ•°æ®ä¼šå…ˆå†™å…¥å‘é€ç¼“å†²åŒºä¸­ï¼Œå¹¶ä¸æ˜¯ç«‹é©¬å‘é€ç»™å¯¹æ–¹\n\nå¦‚æœä¸€æ¬¡æ€§å‘é€çš„å­—èŠ‚æ•°å¤ªé•¿ï¼Œä¼šè¢«æ‹†åˆ†æˆå¤šä¸ªTCPçš„æ•°æ®åŒ…å‘å‡º\nå¦‚æœå‘é€çš„å­—èŠ‚æ•°å¤ªçŸ­ï¼Œå¯èƒ½ä¼šåœ¨ç¼“å†²åŒºä¸­ç­‰å¾…ï¼Œåˆ°ä¸€å®šæ•°æ®é‡åï¼Œå†å‘å‡º\n\nè¿™ä¸¤ä¸ªæ“ä½œéƒ½æ˜¯TCPè‡ªä¸»å¸®æˆ‘ä»¬å®Œæˆçš„\n\næ¥æ”¶æ•°æ®æ—¶ï¼Œæ•°æ®ä»ç½‘å¡ï¼ˆæ•°æ®ä¸€å®šæ˜¯å…ˆè¢«ç½‘å¡æ”¶åˆ°çš„ï¼‰ï¼Œè¢«é©±åŠ¨ç¨‹åºè¯»å–åï¼Œæµå…¥æ“ä½œç³»ç»Ÿçš„æ¥æ”¶ç¼“å†²åŒº\nåº”ç”¨å±‚è°ƒç”¨ read ä»æ¥æ”¶ç¼“å†²åŒºä¸­æ‹¿åˆ°æ•°æ®\n\nå› ä¸ºåŒæ—¶æ‹¥æœ‰æ¥æ”¶å’Œå‘é€ç¼“å†²åŒºï¼ˆå…¨åŒå·¥ï¼‰ï¼Œæ‰€ä»¥TCPç¨‹åºçš„è¯»å†™ä¸éœ€è¦å®Œå…¨åŒæ­¥\n\nå†™100ä¸ªå­—èŠ‚ï¼Œå¯ä»¥è°ƒç”¨ write å†™å…¥100ä¸ªå­—èŠ‚ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨100æ¬¡ write å†™å…¥1ä¸ªå­—èŠ‚\nè¯»100ä¸ªå­—èŠ‚ï¼Œä¹Ÿå¯ä»¥å¤šæ¬¡è¯»å–ï¼Œæˆ–ä¸€æ¬¡æ€§è¯»å–å®Œæ¯•\näºŒè€…éƒ½ä¸éœ€è¦è€ƒè™‘å¯¹æ–¹çš„å†™å…¥æ˜¯å¦‚ä½•å†™å…¥çš„ï¼\n\nå› ä¸ºæ•°æ®åœ¨ç¼“å†²åŒºä¸­éƒ½æ˜¯æ²¡æœ‰ä¸¥æ ¼åˆ†ç•Œçš„å­—èŠ‚æ•°æ®ï¼ŒTCPä¸å…³å¿ƒè¿™äº›æ•°æ®çš„ç»„æˆï¼Œæ‰€ä»¥TCPæ˜¯é¢å‘å­—èŠ‚æµçš„ã€‚æˆ‘ä»¬åªéœ€è¦è¯»å–ä¹‹åï¼Œä¾ç…§åº”ç”¨å±‚çš„åè®®è¿›è¡Œæ•°æ®çš„å¤„ç†å³å¯ã€‚\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨TCPæ—¶ï¼Œåº”ç”¨å±‚çš„åè®®éœ€è¦è§„å®šä¸€ä¸ªåè®®ä¸­æ•°æ®çš„è¾¹ç•Œï¼ˆæ¯”å¦‚æŠ¥æ–‡ä¸­æ•°æ®å­—èŠ‚çš„é•¿åº¦ï¼Œæˆ–è€…ç”¨ç‰¹æ®Šå­—ç¬¦æ¥åšè¾¹ç•Œï¼Œå‚è€ƒHTTPåè®®ï¼‰\n12.ç²˜åŒ…é—®é¢˜å‰é¢æåˆ°äº†ï¼Œtcpåœ¨è¯»å†™æ•°æ®çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ä¸¥æ ¼çš„è¯»å–å­—èŠ‚çš„è¦æ±‚ï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„é—®é¢˜ï¼ˆCä»£è¡¨å‘é€ç«¯ï¼ŒSä»£è¡¨æ¥æ”¶ç«¯ï¼‰\nå‡è®¾åº”ç”¨å±‚å®šä¹‰çš„åè®®ä¸€ä¸ªæŠ¥æ–‡æ˜¯100KBå¤§å°ï¼›C -&gt; 100KB SC -&gt; 100KB SS ä¸€æ¬¡æ€§è¯»å–äº†150KBçš„æ•°æ®ï¼›æ­¤æ—¶ï¼Œå®ƒè¯»å–äº†1.5ä¸ªåº”ç”¨å±‚çš„æŠ¥æ–‡ï¼Œå¹¶ä¸å®Œæ•´ï¼\n\nè¿™ç§æƒ…å†µï¼Œè¢«ç§°ä¸ºç²˜åŒ…é—®é¢˜ï¼›è§£å†³ç²˜åŒ…é—®é¢˜æœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯è¦æ˜ç¡®æŠ¥æ–‡å’ŒæŠ¥æ–‡ä¹‹é—´çš„è¾¹ç•Œï¼Œå…¶é€šè¿‡åº”ç”¨å±‚çš„åè®®æ¥æ˜ç¡®ï¼Œå¿…é¡»è¦åœ¨åº”ç”¨å±‚æ¥å¤„ç†ï¼›\n\nå®šé•¿æŠ¥æ–‡ï¼Œè¦æ±‚åŒæ–¹éƒ½å¿…é¡»è¯»å†™ç‰¹å®šé•¿åº¦çš„æŠ¥æ–‡ï¼Œå¤šçš„æ‹†åŒ…ï¼Œå°‘çš„è¡¥ç©º\nå˜é•¿æŠ¥æ–‡ï¼Œå¯ä»¥é‡‡ç”¨åœ¨æŠ¥æ–‡å¼€å¤´å†™æ˜æœ¬æ¡æŠ¥æ–‡é•¿åº¦çš„æ–¹å¼ï¼Œå‘ŠçŸ¥å¯¹æ–¹åº”è¯»å–å¤šå°‘å­—èŠ‚\nå˜é•¿æŠ¥æ–‡ï¼Œè¿˜å¯ä»¥é‡‡ç”¨æ•°æ®åˆ†éš”ç¬¦çš„æ–¹å¼ä½œä¸ºè¾¹ç•Œï¼ˆéœ€è¦ä¿è¯æ­£æ–‡ä¸­ä¸èƒ½å‡ºç°åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚httpä¸­çš„\\r\\nï¼‰\n\nå¯¹äºUDPè€Œè¨€ï¼Œå¹¶ä¸å­˜åœ¨ç²˜åŒ…é—®é¢˜ã€‚å› ä¸ºUDPé‡‡ç”¨çš„æ˜¯å®šé•¿æŠ¥æ–‡ï¼ˆé¢å‘æ•°æ®æŠ¥ï¼‰ï¼Œåº”ç”¨å±‚åªä¼šè¯»å–åˆ°ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ã€‚\nå¦‚æœUDPçš„ä¸€ä¸ªæŠ¥æ–‡ä¸å®Œæ•´ï¼Œä»£è¡¨æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸¢å¤±ã€‚\n13.UDPå¦‚ä½•å®ç°å¯é ä¼ è¾“ï¼Ÿæœ‰çš„æ—¶å€™ï¼Œä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ€è·¯å°±æ˜¯ï¼šå€Ÿé‰´ï¼\ntcpå°±æ˜¯å¯é çš„ä¼ è¾“æœºåˆ¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨tcpé‡Œé¢é€‰æ‹©ä¸€éƒ¨åˆ†tcpåè®®çš„ç‰¹æ€§ï¼ŒåŠ åˆ°udpä¸­ï¼Œå°±èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°udpçš„å¯é ä¼ è¾“\n\næŠ¥æ–‡ä¸­æ·»åŠ åºå·ï¼Œä¿è¯æŒ‰åºåˆ°è¾¾\nå¼•å…¥ç¡®è®¤åº”ç­”ï¼Œç¡®è®¤å¯¹æ–¹æ”¶åˆ°äº†ä¿¡æ¯\nå¼•å…¥æŒ‰åºåˆ°è¾¾ï¼Œä¿è¯æ•°æ®åŒ…å‘é€çš„é¡ºåºæ­£ç¡®\nå¼•å…¥è¶…æ—¶é‡ä¼ ï¼Œå¦‚æœä¸€æ®µæ—¶é—´å¯¹æ–¹æ²¡æœ‰åº”ç­”ï¼Œåˆ™é‡å‘\nâ€¦\n\nè¿™äº›æ“ä½œå°±éœ€è¦ç¨‹åºçŒ¿åœ¨åº”ç”¨å±‚å»å®ç°äº†ã€‚\nThe endUDP&#x2F;TCPåè®®çš„åŸºæœ¬çŸ¥è¯†å¦‚ä¸Šï¼Œåç»­è¿˜ä¼šç»§ç»­è¡¥å……\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["Linux","nginx","tcp","udp"]},{"title":"ã€å›¾åºŠã€‘åšå®¢è¡¨æƒ…åŒ…","url":"/posts/4215614474/","content":"è¿™é‡Œæ˜¯åšå®¢ä¸­å¯ä»¥ç”¨åˆ°çš„è¡¨æƒ…åŒ…åˆ—è¡¨ï¼Œä¸€å¹¶ä¸Šä¼ ï¼Œé¿å…å¤šæ¬¡ä¸Šä¼ å ç”¨é˜¿é‡Œäº‘ç©ºé—´;\nå¤§å®¶è§‰å¾—ä¸é”™çš„å¯ä»¥ä¿å­˜ä¸‹æ¥ğŸ˜ä½†æ˜¯ä¸è¦æ¶æ„ä½¿ç”¨ï¼\n\n\nè¡¨æƒ…åŒ…\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["å›¾åºŠ"]},{"title":"ã€å»ºç«™ã€‘hexoæ­å»ºåšå®¢+å»ºç«™ç›¸å…³æ•™ç¨‹","url":"/posts/1888648770/","content":"å…³äºHEXOå»ºç«™ç›¸å…³åšå®¢æ±‡æ€»\n\n\n1.hexoéƒ¨ç½²å’Œä¸»é¢˜è‡ªå®šä¹‰ã€æ•™ç¨‹ã€‘hexoæ­å»ºåšå®¢+keepä¸»é¢˜ç¾åŒ–\n2.é…ç½®å›¾åºŠä»¥ä¸‹ä¸ºtypora+picgoé…ç½®å›¾åºŠçš„æ•™ç¨‹\nã€Picgoã€‘æ­£ç¡®é‡å‘½åæ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸Šä¼ \n2.1 é˜¿é‡Œäº‘ossã€æ•™ç¨‹ã€‘Typora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠ\n2.2 åˆæ‹äº‘uosç›¸æ¯”äºé˜¿é‡Œäº‘ossçš„bucketåªæœ‰é˜²ç›—é“¾ï¼Œåˆæ‹äº‘çš„uosè¿˜æœ‰ipé»‘ç™½åå•ï¼Œccé˜²æŠ¤ï¼Œå•ipè®¿é—®é™åˆ¶ç­‰ç­‰åŠŸèƒ½ã€‚å¯¹äºåšå®¢å›¾åºŠé˜²ç›—åˆ·è€Œè¨€ï¼Œå¾ˆæœ‰ç”¨ã€‚\nä½†åˆæ‹äº‘uoséœ€è¦åŸŸåå·²å¤‡æ¡ˆæ‰èƒ½è‡ªå®šä¹‰åŸŸåï¼Œå¦åˆ™åªèƒ½ä½¿ç”¨å®˜æ–¹æä¾›çš„æµ‹è¯•åŸŸåã€‚å¦‚æœä½ çš„åŸŸåå·²å¤‡æ¡ˆï¼Œä¸ªäººæ›´æ¨èä½¿ç”¨åˆæ‹äº‘uosä½œä¸ºåšå®¢å›¾åºŠã€‚\nã€æ•™ç¨‹ã€‘Typora+PicGo+åˆæ‹äº‘USSæ­å»ºåšå®¢å›¾åºŠ\n2.3 è‡ªå»ºå›¾åºŠlskyè‡ªå»ºå›¾åºŠçš„ä¼˜åŠ¿åœ¨äºï¼Œå›¾ç‰‡éƒ½åœ¨ä½ æœåŠ¡å™¨çš„æœ¬åœ°ï¼Œå¯ä»¥ç›´æ¥taræ‰“åŒ…è¿›è¡Œå¤‡ä»½ï¼Œæˆ–è€…æ‰‹åŠ¨ä»æœåŠ¡å™¨ä¸‹è½½åˆ°ç”µè„‘ä½œä¸ºå¤‡ä»½ã€‚\nä¸ªäººä¸å¤ªå–œæ¬¢ossçš„ä¸€ç‚¹ï¼Œå°±æ˜¯å¤§å¤šæ•°ossæœåŠ¡å•†éƒ½æ²¡æœ‰æä¾›æ‰¹é‡ä¸‹è½½osså†…éƒ¨æ–‡ä»¶çš„é€‰é¡¹ã€‚ä¼°è®¡æ˜¯è€ƒè™‘åˆ°å­˜å‚¨æœåŠ¡å™¨çš„è´Ÿè½½é—®é¢˜ï¼Œæ‰€ä»¥æ²¡æœ‰æä¾›è¿™ä¸ªåŠŸèƒ½ã€‚æ¯•ç«Ÿæ‰¹é‡ä¸‹è½½å¤§é‡æ–‡ä»¶ï¼Œæ˜¯å¾ˆè€—èµ„æºçš„ã€‚\nè™½ç„¶å¯ä»¥ç”¨pythonä»£ç æ¥å®ç°æ‰¹é‡ä¸‹è½½ï¼Œä½†æœåŠ¡å•†èƒ½ç›´æ¥æä¾›æ‰¹é‡ä¸‹è½½çš„åŠŸèƒ½ï¼Œè¿˜æ˜¯æ›´æ–¹é¢å˜›ï¼\nå…°ç©ºå›¾åºŠæ˜¯è‡ªå»ºå›¾åºŠä¸­æ¯”è¾ƒæ–¹ä¾¿çš„ä¸€ä¸ªï¼Œä¸”æ”¯æŒpicgoä¸Šä¼ \nã€Dockerã€‘é…ç½®lsky proå…°ç©ºå›¾åºŠ\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€åšå®¢ã€‘æŠ˜è…¾è®°å½•","url":"/posts/1486215141/","content":"æœ€è¿‘å‡ å¤©ï¼ŒæŠ˜è…¾äº†ä¸€ä¸‹haloå’Œtypechoï¼Œç»“æœéƒ½ä¸å°½å¦‚äººæ„ï¼Œæ€»æ„Ÿè§‰æœ‰å“ªé‡Œä¸èˆ’æœã€‚å…œå…œè½¬è½¬ï¼Œæœ€ç»ˆè¿˜æ˜¯å›åˆ°äº†ç°æœ‰çš„hexoè§£å†³æ–¹æ¡ˆä¸Šæ¥ã€‚ä¸ºäº†é¿å…è‡ªå·±è¢«æœåŠ¡å™¨â€œç»‘æ¶â€ï¼ŒåˆæŠŠlskyçš„éƒ¨ç½²ç»™ä¸‹äº†ï¼Œå›¾åºŠå…¨éƒ¨è¿ç§»åˆ°äº†å¯¹è±¡å­˜å‚¨ä¸Šã€‚\n\n\n1.ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†haloå’Œtypechoï¼Ÿæœ¬æ¥ï¼Œæƒ³æ›´æ¢åˆ°åŠ¨æ€åšå®¢ï¼Œå°±æ˜¯ä¸ºäº†é¿å…è‡ªå·±å†å»éƒ¨ç½²ä¸€ä¸ªå›¾åºŠã€‚é‡‡ç”¨ä»¥å¤§åŒ…å°çš„æƒ³æ³•ï¼Œé¿å…è‡ªå·±æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤ªå¤šâ€œæˆ‘è‡ªå·±è§‰å¾—æœ‰ç”¨çš„â€dockerå®¹å™¨ï¼Œç™½ç™½å¢åŠ è‡ªå·±çš„ç»´æŠ¤æˆæœ¬ã€‚\nå¯çœŸæ­£äº†è§£äº†è¿™ä¸¤ä¸ªæ¡†æ¶åï¼Œæ‰çŸ¥é“å®ƒä»¬è·ç¦»æˆ‘å¿ƒä¸­çš„å®Œç¾è¿˜æœ‰ä¸€å®šå·®è·ã€‚\n1.1 æœåŠ¡å™¨é¦–å…ˆï¼Œæœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯å› ä¸ºåŠ¨æ€åšå®¢æ¡†æ¶éƒ½å¾—éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ã€‚\nå½“ä¸‹æˆ‘æ´»åŠ›æ—ºç››ï¼Œä¹Ÿæœ‰ç‚¹é—²é’±æ¥ç»´æŠ¤è‡ªå·±çš„çˆ±å¥½ã€‚ä½†æ ¹æ®å…¥å‘ä»¥æ¥æµè§ˆä¸ªäººåšå®¢ç¤¾ç¾¤å¾—åˆ°çš„ç»éªŒï¼Œå†åŠ ä¸Šå¯¹è‡ªå·±çš„äº†è§£ï¼Œæˆ‘ä¼°è®¡åˆ°æŸä¸ªæ—¶é—´æ®µï¼Œæˆ‘åŠ å…¥æ”¾å¼ƒå¤§å†›ï¼Œè®©è‡ªå·±çš„åšå®¢é™·å…¥ä¸ç»´æŠ¤çš„é»‘æ´ã€‚\nè¿™æ—¶å€™ï¼Œå…è´¹çš„è§£å†³æ–¹æ¡ˆå°±å¾ˆæœ‰å¿…è¦äº†ã€‚\nè¿™ä¹Ÿæ˜¯hexoè¿™ç±»é™æ€åšå®¢æ¡†æ¶çš„æœ€å¤§ä¼˜åŠ¿ä¹‹ä¸€ï¼Œå…‰æ˜¯å¯å…è´¹éƒ¨ç½²çš„å¹³å°ï¼Œæˆ‘ä¸ªäººçŸ¥é“çš„å°±æœ‰5ä¸ªä»¥ä¸Šï¼Œè¿™å…¶ä¸­è¿˜åŒ…å«äº†ä¸å¤ªå¯èƒ½ä¼šåœæ­¢å…è´¹çš„github pagesã€‚è¿™ä¹ˆå¤šå¹³å°ï¼Œè¶³å¤Ÿä½ å°†hexoéƒ¨ç½²å¤šä¸ªå¤‡ä»½ï¼Œå“ªæ€•æœ€ç»ˆä¸ç»´æŠ¤åšå®¢äº†ï¼Œæ—§çš„åšæ–‡ä¹Ÿä¸è‡³äºå¤±è”ã€‚\n1.2 ç¼–è¾‘å™¨typechoå’Œhalo1çš„ç¼–è¾‘å™¨è¿˜ç®—å¯ä»¥ï¼Œä½†halo2å°±è®©äººå¾ˆæ˜¯æ— è¯­ï¼Œå®ƒç«Ÿç„¶åªæœ‰ä¸€ä¸ªå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè€Œä¸”è¿˜ä¸æ”¯æŒå¯¼å…¥MDæ–‡ä»¶ï¼Œå¤åˆ¶è¿›å»çš„MarkDownå†…å®¹ä¹Ÿæ— æ³•æ­£å¸¸è¯†åˆ«ï¼\nè¿™ç»™æˆ‘æƒŠä½äº†ï¼Œä½œä¸ºä¸ªäººåšå®¢çš„æ¡†æ¶ï¼Œéš¾é“ä¸åº”è¯¥ç¬¬ä¸€æ—¶é—´è€ƒè™‘ MD ç¼–è¾‘å™¨è€Œä¸æ˜¯å¯Œæ–‡æœ¬å—ï¼Ÿéš¾é“å¤§ä¼™è‡ªå·±éƒ¨ç½²åšå®¢æ¡†æ¶ï¼Œæœ‰ä¸€ç‚¹ä¸å°±æ˜¯ä¸ºäº†é¿å…è¢«æŸä¸ªå•ä¸€å¹³å°æ— æ³•è½¬æ¢çš„æ ¼å¼ç»‘å®šå—ï¼Ÿ\nè™½ç„¶ halo2è·¯çº¿å›¾ä¸­æ˜ç¡®è¡¨æ˜äº†ä¼šåŠ ä¸Š md ç¼–è¾‘å™¨ï¼Œä½†ç°åœ¨æ²¡æœ‰å°±æ˜¯æ²¡æœ‰â€¦â€¦æˆ‘å‡ ç™¾ç¯‡æ–‡ç« ï¼Œæ€»ä¸èƒ½ä¸€ä¸ªä¸ªé‡æ–°æ•²ä¸€éå§?\nè¿™é‡Œå°±è¦è¡¨æ‰¬ halo1äº†ï¼Œå…¶è‡ªå¸¦äº†ä¸€ä¸ªå¯ä»¥å¯¼å…¥ hexo çš„ md æ–‡ä»¶å¹¶è‡ªåŠ¨è¯†åˆ« md æ–‡ä»¶å¤´éƒ¨çš„ frontmatter é‡Œé¢ä¿¡æ¯çš„å·¥å…·ï¼Œè¿˜ç®—æ˜¯ç»™è¿ç§»æä¾›äº†ä¸€ç‚¹æ–¹ä¾¿ã€‚\nç¼–è¾‘å™¨çš„é—®é¢˜æš‚ä¸”ä¸è°ˆï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€ä¸ªå¯ä»¥å…‹æœçš„å›°éš¾ï¼Œä¸‹é¢æ¥è¯´è¯´æ›´æ–°é—®é¢˜ï¼›\n1.3 æ›´æ–°æ–‡ç« é—®é¢˜ä½¿ç”¨ hexo çš„æ—¶å€™ï¼Œæˆ‘å¯ä»¥å°†è‡ªå·±æœ¬åœ°çš„æ›´æ–° push åˆ° github ä¸Šï¼Œç”± vercel/netlify/github-action è‡ªåŠ¨éƒ¨ç½²ä¸º hexo åšå®¢ã€‚\ngit ä¸Šä¼ ä¸€æ¬¡ï¼Œå°±èƒ½å¤Ÿæ›´æ–°å¤šç¯‡æœ¬åœ°æœ‰æ›´æ”¹çš„æ–‡ç« ã€‚\nè€Œä½¿ç”¨åŠ¨æ€åšå®¢ï¼ŒåŒ…æ‹¬ CSDNï¼Œå¦‚æœå¯¹æ—§çš„åšæ–‡æœ‰ä¿®æ”¹ï¼Œå°±å¿…é¡»è¦å»åšå®¢åå°çš„ç¼–è¾‘å™¨ä¿®æ”¹â€¦â€¦è€Œæˆ‘ä¸ªäººå¯¹ä»»ä½•åšå®¢ï¼Œå‡†ç¡®æ¥è¯´æ˜¯ä»»ä½•å¹³å°çš„ åœ¨çº¿ç¼–è¾‘å™¨ éƒ½ä¸æŠ¥ä¿¡ä»»ã€‚ä¸€æ¬¡ç½‘ç»œæ³¢åŠ¨ï¼Œå°±å¯èƒ½è®©ä½ å‡ å°æ—¶çš„å¿ƒè¡€æ¸…ç©ºã€‚é™¤éå…¶èƒ½æä¾›ç±»ä¼¼ é‡‘å±±æ–‡æ¡£ çš„è‡ªåŠ¨ä¿å­˜å¤šä»½å†å²ç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œä¸ç„¶çœ‹ä¸Šå»äººç•œæ— å®³çš„ è‡ªåŠ¨ä¿å­˜è‰ç¨¿ åŠŸèƒ½ï¼Œä¹Ÿç…§æ ·ä¼šæ¬ºéª—ä½ ã€‚ğŸ˜­ è¿™ç‚¹å°±ä¸æ·±å…¥å±•å¼€äº†ï¼Œä½“éªŒè¿‡çš„äººè‡ªç„¶æ‡‚æˆ‘åœ¨è¯´ä»€ä¹ˆã€‚\nè‡ªé‚£ä»¥åï¼Œæˆ‘å°±æŠŠè‡ªå·±çš„æ‰€æœ‰åšå®¢ä»åœ¨çº¿ç¼–è¾‘è¿ç§»åˆ°äº†æœ¬åœ°mdï¼Œå¹¶é…ç½®äº†è‡ªå·±çš„å›¾åºŠï¼ˆåˆšå¼€å§‹ç”¨çš„é˜¿é‡ŒOSSï¼‰ã€‚\nHEXO èƒ½ç›´æ¥å’Œæœ¬åœ° MD å¯¹æ¥ï¼Œæˆ‘æƒ³ä¿®æ”¹ä»€ä¹ˆï¼Œåªéœ€è¦ä¿®æ”¹æœ¬åœ°ï¼Œpush åˆ°äº‘ç«¯ã€‚å¾ˆå¤šäººå–œæ¬¢ Obsidian çš„åŸå› ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ¬åœ°ç›´æ¥ä¿å­˜çš„å°±æ˜¯ markdown çš„æ–‡æ¡£ï¼Œæƒ³ç”¨ä»€ä¹ˆæ‰“å¼€å°±ç”¨ä»€ä¹ˆæ‰“å¼€ï¼Œä¸ä¼šè¢«å•ä¸€è½¯ä»¶æ†ç»‘ã€‚\nè€Œä½¿ç”¨åŠ¨æ€åšå®¢ï¼Œå°±ä¼šå‡ºç°æˆ‘å¾ˆä¸å–œæ¬¢çš„ å¤šç«¯åŒæ­¥ é—®é¢˜ï¼ˆæŒ‡æœ¬åœ°ç¼–å†™å¥½çš„ md æ–‡ä»¶å¾—æƒ³å„ç§åŠæ³•åœ¨ä¸åŒè®¾å¤‡ä¸­åŒæ­¥ï¼‰ã€‚\nè€Œ halo å’Œ typecho ç¼–è¾‘å™¨çš„ä¸çªå‡ºï¼Œä¼šè®©è¿™ä¸ªé—®é¢˜æ›´ä¸¥é‡ã€‚å…¶è®©æˆ‘è¿˜æ˜¯æƒ³ç”¨æœ¬åœ°ç¼–è¾‘å™¨å»å†™æ–‡ç« å†ä¸Šä¼ ï¼Œè€Œè¿™åˆå¾—è®©æˆ‘å»éƒ¨ç½²å›¾åºŠ\n\nä¸åœ¨åšå®¢æ¡†æ¶çš„ç¼–è¾‘å™¨é‡Œé¢å†™ï¼Œå›¾ç‰‡è¿˜æ˜¯ä¸èƒ½ä¸Šä¼ åˆ°éƒ¨ç½²åšå®¢ç³»ç»Ÿçš„æœåŠ¡å™¨æœ¬åœ°ï¼Œä¸ç”¨å›¾åºŠå°±æ²¡åŠæ³•è®¿é—®äº†ï¼Œæˆ‘ä¹ŸæŸ¥è¿‡haloçš„picgoæ’ä»¶ï¼Œä¼¼ä¹æ—©å°±åœæ­¢æ›´æ–°äº†\n\né‚£è¿™æ ·ä¸‹æ¥ï¼Œæ„Ÿè§‰å’Œç”¨ CSDN æ²¡å•¥åŒºåˆ«äº†â€¦â€¦ é‚£æˆ‘è¿˜éƒ¨ç½²ä¸ªäººåšå®¢å¹²å˜›ï¼Ÿ\nä¸Šé¢è¯´çš„æ„Ÿè§‰ä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œåˆ—ä¸ªè¡¨å§ã€‚\nåŠ¨æ€åšå®¢æ›´æ–°æµç¨‹ç†æƒ³æµç¨‹å¦‚ä¸‹ï¼š\n\nåœ¨åŠ¨æ€åšå®¢åå°å†™åšå®¢ï¼Œå†™å®Œå³æ›´æ–°\nå›¾ç‰‡ä¸Šä¼ åˆ°åšå®¢æœåŠ¡å™¨åå°\nå‡ºç°éœ€è¦ä¿®æ”¹çš„ï¼Œä¹Ÿæ˜¯ç›´æ¥åœ¨åå°ä¿®æ”¹\nä¸éœ€è¦åœ¨æœ¬åœ°é¢å¤–ç»´æŠ¤ md æ–‡ä»¶å’Œå…¶ä»–å›¾åºŠ\n\nå®é™…ç”±äºåŠ¨æ€åšå®¢åå°ç¼–è¾‘å™¨ä½“éªŒå®åœ¨æ˜¯å¤§ä¸å¦‚æœ¬åœ°ï¼Œå¯¼è‡´æˆ‘è¿˜æ˜¯æƒ³ç”¨æœ¬åœ°ç¼–è¾‘å™¨å†™æ–‡ï¼Œè¿™å°±å¯¼è‡´æµç¨‹å˜æˆäº†ä¸‹é¢è¿™æ ·\n\nåœ¨æœ¬åœ°typoraç¼–è¾‘\nå›¾ç‰‡é€šè¿‡picgoç­‰å·¥å…·ä¸Šä¼ åˆ°å›¾åºŠï¼ˆç„¶é¹…å¹¶ä¸èƒ½ä¸Šä¼ åˆ°åšå®¢åå°ï¼‰\nå†™å®Œåï¼Œæ‰“å¼€åšå®¢åå°ï¼Œå¤åˆ¶ç²˜è´´æ›´æ–°\n\nçœ‹ä¸Šå»å¹¶æ²¡æœ‰ç‰¹åˆ«éº»çƒ¦ï¼Œä½†è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé™„åŠ çš„é—®é¢˜ï¼š\n\nç”±äºå›¾ç‰‡ä¸èƒ½ç›´æ¥ä¸Šä¼ åˆ°åšå®¢åå°ï¼Œä½ éœ€è¦é¢å¤–é…ç½®ä¸€ä¸ªå›¾åºŠ\nè‡ªå»ºå›¾åºŠï¼ŸæœåŠ¡å™¨å†…å­˜ -300mb èµ·æ­¥ï¼›æœ¬æ¥1h1g å°±èƒ½è·‘åšå®¢åå°ï¼Œè¿™ä¸‹è¢«è¿«å‡çº§2g ç”šè‡³ 4gï¼Œé’±åŒ…ç©ºç©º\nä½¿ç”¨ OSS å¯¹è±¡å­˜å‚¨ï¼Ÿå¾—æé˜²æ¶æ„åˆ·æµã€‚\n\nå›¾åºŠå¹¶ä¸æ˜¯æˆ‘è®¨åŒçš„é—®é¢˜ï¼Œæˆ‘è®¨åŒçš„å®é™…ä¸Šæ˜¯ä¸‹é¢è¿™ç§æƒ…å†µï¼š\n\nå‡è®¾æˆ‘æœ‰ä¸€ç¯‡æ–‡ç« Aï¼Œè¯¥æ–‡ç« å¼•ç”¨äº†æ–‡ç« B\nç”±äºå‘ç° A æœ‰è¯¯ï¼Œæˆ‘æ¥ä¿®æ”¹ Aï¼ˆåœ¨æœ¬åœ°ä¿®æ”¹ï¼‰\nä¿®æ”¹Açš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¼•ç”¨çš„Bè¿‡æ—¶äº†æˆ–è€…ä¹Ÿæœ‰é—®é¢˜ï¼Œé¡ºä¾¿ä¿®æ”¹äº†B\næ­¤æ—¶æˆ‘éœ€è¦æ›´æ–°åˆ°åšå®¢\nä¸Šåšå®¢åå°ï¼Œæˆ‘éœ€è¦ æœç´¢Aå’ŒBï¼Œç„¶åå¤åˆ¶ç²˜è´´æœ¬åœ°çš„æ–‡æ¡£æ¥æ›´æ–°\n\næ•´ä¸ªæ­¥éª¤ä¸€ä¸‹å°±å¤šèµ·æ¥äº†ï¼Œéº»çƒ¦çš„è¦æ­»ï¼\næœ€ç»ˆå¯èƒ½æˆ‘å°±ä¼šå› ä¸ºéº»çƒ¦ä¸æƒ³å»æ›´æ–°æŸäº›æ”¹åŠ¨ä¸å¤§çš„æ–‡ç« ï¼Œå¯¼è‡´æˆ‘çš„åšå®¢ä¸Šçš„æ–‡ç« è½åäºæœ¬åœ°ï¼Œå¤šæ¥å‡ æ¬¡å°±ä¸çŸ¥é“é‚£äº›æ–‡ç« è½åäº†ï¼Œç›´æ¥è¿›å…¥æ‡’äººæ­»å¾ªç¯ã€‚\nHEXOåšå®¢æ›´æ–°ç„¶è€Œï¼Œå¦‚æœç”¨HEXOï¼Œæ­¤æ—¶å°±åªéœ€è¦æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤ï¼Œå°±èƒ½ç«‹é©¬æ›´æ–°åšå®¢\nhexo clhexo g --d\n\nè¿™å…¶ä¸­ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶ï¼Œhexo cléƒ½å¯ä»¥ä¸ç”¨æ‰§è¡Œï¼›\nåœ¨åŒæ—¶æœ¬åœ°ä¿®æ”¹äº†å¤šç¯‡åšå®¢çš„æƒ…å†µä¸‹ï¼Œæ˜¾ç„¶æ˜¯HEXOæ›´æ–¹ä¾¿ä¸€é”®æ›´æ–°åšå®¢ï¼›\nç›®å‰æˆ‘çš„åšå®¢ md æ–‡ä»¶éƒ½æ˜¯å­˜åœ¨ obsidian çš„åº“ä¸­çš„ã€‚æ¯æ¬¡ä½¿ç”¨ ob æˆ–è€… typora ç¼–å†™å®Œæ¯•åï¼Œæˆ‘ä¼šç”¨ freefilesync è½¯ä»¶ç›´æ¥å°† ob ä¸­åšå®¢æ–‡ä»¶å¤¹ï¼ˆob ä¸­è¿˜æœ‰éåšå®¢çš„å…¶ä»–ç¬”è®°ï¼‰åŒæ­¥åˆ° hexo æœ¬åœ°åº“çš„ source/_post æ–‡ä»¶å¤¹ä¸­å»ï¼Œå†æ‰§è¡Œä¸€ä¸‹ git pushï¼Œå°±èƒ½ç”¨ netlify æˆ–è€… vercel è‡ªåŠ¨åŒ–éƒ¨ç½² hexoã€‚\nå…¨ç¨‹æœ€éº»çƒ¦çš„äº‹æƒ…å°±æ˜¯ git pushï¼Œä½†è¿˜æ˜¯æ¯”ä¸Šæ–‡ä¸­è‡ªæœ¬åœ°æ›´æ–°åŠ¨æ€åšå®¢çš„æ–¹å¼æ–¹ä¾¿äº†è®¸å¤šï¼\nå¦‚æœä½ ä¸æƒ³å†™æäº¤ä¿¡æ¯ï¼Œè¿˜å¯ä»¥ç”¨ python æˆ–è€…å…¶ä»–è¯­è¨€å†™ä¸ªè‡ªåŠ¨æ‰§è¡Œ git ä¸‰æ¿æ–§çš„ exe è„šæœ¬æ”¾åˆ° HEXO çš„ git ä»“åº“è·¯å¾„ä¸‹ï¼Œéœ€è¦æ›´æ–°çš„æ—¶å€™ç‚¹å‡»ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚è¿™æ ·ä¸‹æ¥æ›´åŠ æ–¹ä¾¿ã€‚\nThe endå‰©ä¸‹çš„ä¸‹æ¬¡æœ‰æ—¶é—´å†å†™å§â€¦â€¦\næœ¬æ–‡è®°å½•çš„ä»…ä¸ºæœ¬äººçš„è§‚ç‚¹ï¼Œä¸åŒäººä½¿ç”¨ä¹ æƒ¯ä¸åŒï¼Œå¹¶æ²¡æœ‰æŠ¨å‡»åŠ¨æ€åšå®¢çš„æ„æ€ï¼Œè¯·ä¸è¦è¯¯è§£ï¼æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºä½ çš„å»ºè®®ï¼Œå‹å–„äº¤æµï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€Linuxã€‘é«˜çº§IOå’Œå¤šè·¯è½¬æ¥ | select/poll/epoll","url":"/posts/3390191280/","content":"å¤šè·¯è½¬æ¥å’Œé«˜çº§IO\n\n\nå’³å’³ï¼Œå†™çš„æ—¶å€™å‡ºäº†ç‚¹é—®é¢˜ï¼Œæ ‡ç‚¹ç¬¦å·å…¨ä¹±äº†ï¼ˆæ‰¹é‡æ›¿æ¢äº†å‡ æ¬¡ï¼‰ï¼Œå¹²è„†å°±æŠŠå…¨æ–‡çš„é€—å·å’Œå¥å·éƒ½æ”¹æˆè‹±æ–‡çš„äº†ï¼ˆä¸ç„¶ä»£ç å—é‡Œé¢çš„ä»£ç éƒ½æ˜¯ä¸­æ–‡æ ‡ç‚¹å°±è·‘ä¸åŠ¨äº†ï¼‰\n\nIOå¤šè·¯å¤ç”¨å’Œæœ¬æ–‡æåˆ°çš„å¤šè·¯è½¬æ¥æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼\n\n1.é«˜çº§IO1.1 äº”ç§IOæ¨¡å‹ç”¨é’“é±¼ä½¬çš„æ —å­, æ¥çœ‹çœ‹äº”ç§ä¸åŒçš„IOæ¨¡å‹å§\n\nA, æ‹¿ç€é±¼ç«¿å»é’“é±¼, ä¸€ç›´ç›¯ç€é±¼æ¼‚, é±¼æ¼‚æœ‰åŠ¨é™å°±æ”¶é’©\nB, æ‹¿ç€é±¼ç«¿å»é’“é±¼, æ—¶ä¸æ—¶çœ‹çœ‹é±¼æ¼‚, æœ‰åŠ¨é™å°±æ”¶è´­\nC, æ‹¿ç€é±¼ç«¿å»é’“é±¼, åœ¨é±¼æ¼‚ä¸Šå¼„ä¸ªé“ƒé“›, ç„¶åå¹²å…¶ä»–çš„äº‹æƒ…, å¬åˆ°é“ƒé“›çš„å£°éŸ³å°±æ”¶é’©\nD, æ‹¿äº†ä¸€å¤§å †é±¼ç«¿è¿‡æ¥, éƒ½æ‘†å¼„å¥½, åªè¦æœ‰ä¸€ä¸ªé±¼æ¼‚æœ‰åŠ¨é™, å°±æ”¶é’©\nEæ˜¯å¤§è€æ¿, ç›´æ¥å«äººå¸®å¿™é’“é±¼, é’“åˆ°ä¸€å®šæ•°é‡çš„ğŸŸåé€šçŸ¥è‡ªå·±, è‡ªå·±è¿‡æ¥å–ğŸŸï¼ˆæ²¡æœ‰å‚ä¸é’“é±¼è¿‡ç¨‹ï¼‰\n\nè¿™äº”ç§é’“é±¼æ–¹å¼, å°±å¯¹åº”äº†äº”ç§IOæ¨¡å‹\n\nA, é˜»å¡ç­‰å¾…, ç­‰å¾…åˆ°æ•°æ®å°±ç«‹å³è¯»å–\nB, è½®è¯¢æ£€æµ‹, æ£€æµ‹åˆ°æ•°æ®çš„æ—¶å€™è¯»å–\nC, åˆ©ç”¨é“ƒé“›æ¥ä½œä¸ºé€šçŸ¥æ–¹å¼, å¬åˆ°äº†ä¿¡å·ä¹‹å, å°±å»è¯»å–æ•°æ®ï¼ˆä¿¡å·é©±åŠ¨ï¼‰\nD, ä¸€æ¬¡æ€§æ£€æµ‹å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆå¤šè·¯è½¬æ¥ï¼‰\nE, æ²¡æœ‰è‡ªå·±å‚ä¸é’“é±¼è¿‡ç¨‹, æœ‰åˆ«äººå¸®å¿™ç›‘æ§æ–‡ä»¶æè¿°ç¬¦, è‡ªå·±åªå…³å¿ƒæ‹¿èµ°æ•°æ®ï¼ˆå¼‚æ­¥IOï¼‰\n\nåœ¨è¿™äº”ç§IOæ¨¡å¼ä¸­, Dçš„æ•ˆç‡æ˜¯æœ€é«˜çš„ã€‚å› ä¸ºå®ƒä¸€æ¬¡æ€§ç›‘æ§äº†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦, è¿™äº›æ–‡ä»¶æè¿°ç¬¦çš„IOåœ¨ä¸€å®šç¨‹åº¦ä¸Šé‡åˆäº†, æ›´å®¹æ˜“ç­‰åˆ°æ•°æ®ã€‚\nè¦çŸ¥é“, Dæ˜¯è¿‡æ¥é’“é±¼çš„, ä»–åªè¦èƒ½é’“åˆ°é±¼å°±å¤Ÿäº†, å¹¶ä¸ç”¨å…³å¿ƒåˆ°åº•æ˜¯å“ªä¸ªé±¼é’©é’“ä¸Šæ¥çš„é±¼ã€‚åŒç†, æˆ‘ä»¬çš„IOæœåŠ¡å™¨ä¹Ÿå¹¶ä¸éœ€è¦å…³å¿ƒåˆ°åº•æ˜¯å“ªä¸ªæ–‡ä»¶æè¿°ç¬¦åœ¨ç»™è‡ªå·±ä¼ é€’ä¿¡æ¯, æˆ‘ä»¬åªè¦æ¯æ—¶æ¯åˆ»éƒ½åœ¨å¤„ç†ä¿¡æ¯ï¼ˆéƒ½èƒ½é’“åˆ°é±¼ï¼‰æ‰æ˜¯æœ€é«˜æ•ˆç‡çš„ä½“ç°ã€‚\næ¢å¥è¯è¯´, åœ¨é’“é±¼ï¼ˆå¤„ç†IOï¼‰çš„æ—¶å€™, ç­‰çš„æ—¶é—´æ¯”ä¾‹è¶Šä½, æ•ˆç‡è¶Šé«˜ï¼\n1.2 é˜»å¡å’Œéé˜»å¡è¿™ä¸¤ä¸ªæ¦‚å¿µæˆ‘ä»¬åœ¨å…ˆå‰å¯¹IOçš„å­¦ä¹ ä¸­å·²ç»è§è¿‡äº†\n\né˜»å¡ï¼šè¿›ç¨‹ä¼šåœ¨å‡½æ•°è°ƒç”¨ä¸­å¡ä½, åœ¨æ²¡æœ‰æˆåŠŸè°ƒç”¨ä¹‹å‰ä¸ä¼šç»§ç»­å‘åè¿è¡Œ\néé˜»å¡ï¼šä¸ç®¡èƒ½å¦è·å–åˆ°æ•°æ®, å‡½æ•°éƒ½æ˜¯ç›´æ¥è¿”å›ç»“æœ;\n\n1.3 å¼‚æ­¥ä¸åŒæ­¥é€šä¿¡\nå¼‚æ­¥é€šä¿¡ï¼šåœ¨è°ƒç”¨å‘å‡ºå, è¿™ä¸ªè°ƒç”¨ç›´æ¥è¿”å›, å¹¶æ²¡æœ‰æºå¸¦ç»“æœ;ç±»ä¼¼std::async/future, åœ¨è°ƒç”¨å‘å‡ºå, è¢«è°ƒç”¨ç€é€šè¿‡çŠ¶æ€æˆ–é€šçŸ¥æ¥å‘ŠçŸ¥è°ƒç”¨è€…, äº¦æˆ–è€…æ˜¯ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†è¿™ä¸ªå¼‚æ­¥è°ƒç”¨\nåŒæ­¥é€šä¿¡ï¼šåœ¨å‘å‡ºè°ƒç”¨å, æ²¡æœ‰å¾—åˆ°ç»“æœå‰, è¯¥è°ƒç”¨ä¸è¿”å›;ä¸€æ—¦è¿”å›å°±è¡¨æ˜è¯¥è°ƒç”¨æˆåŠŸè·å–åˆ°äº†è¿”å›å€¼ï¼ˆè°ƒç”¨è€…ä¸»åŠ¨ç­‰å¾…è°ƒç”¨ç»“æœï¼‰\n\nè¿™é‡Œçš„åŒæ­¥å’Œçº¿ç¨‹&#x2F;è¿›ç¨‹åŒæ­¥å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼š\n\nçº¿ç¨‹å’Œè¿›ç¨‹çš„åŒæ­¥æŒ‡çš„æ˜¯çº¿ç¨‹å’Œè¿›ç¨‹ä¹‹é—´æœ‰ç›¸äº’åˆ¶çº¦çš„å…³ç³», éœ€è¦åœ¨æŸäº›æƒ…å†µä¸­åè°ƒä»–ä»¬çš„å·¥ä½œæ¬¡åºè€Œè¿›è¡Œç­‰å¾…\n\n\näº†è§£å®ŒIOæ¨¡å‹å’Œä¸Šæ–¹çš„çŸ¥è¯†å, ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹ç¬¬ä¸€ä¸ªæ¥å£å§ï¼\n2.fcntlè¿™ä¸ªæ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨, å¯ä»¥ç»™æ–‡ä»¶æè¿°ç¬¦è¿›è¡Œä¸åŒçš„ç­–ç•¥è®¾ç½®ã€‚\nå½“æˆ‘ä»¬åœ¨linuxä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™, é»˜è®¤åˆ›å»ºçš„éƒ½æ˜¯é˜»å¡çš„æ–‡ä»¶æè¿°ç¬¦ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨fcntlæ¥å°†æ–‡ä»¶æè¿°ç¬¦è®¾ç½®æˆéé˜»å¡çš„ã€‚\n2.1 æ¥å£è¯¥å‡½æ•°çš„åŸå‹å¦‚ä¸‹\n#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;int fcntl(int fd, int cmd, ... /* arg */ );\n\nå…¶ä¸­cmdæ˜¯æˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„ç­–ç•¥, ä¸‹é¢æ˜¯å¸¸è§çš„å‡ ç§é€‰é¡¹\n\nå¤åˆ¶ä¸€ä¸ªç°æœ‰çš„æè¿°ç¬¦ï¼ˆcmd&#x3D;F_DUPFDï¼‰\nè·å¾—&#x2F;è®¾ç½®æ–‡ä»¶æè¿°ç¬¦æ ‡è®°(cmd&#x3D;F_GETFDæˆ–F_SETFD)\nè·å¾—&#x2F;è®¾ç½®æ–‡ä»¶çŠ¶æ€æ ‡è®°(cmd&#x3D;F_GETFLæˆ–F_SETFL)\nè·å¾—&#x2F;è®¾ç½®å¼‚æ­¥I&#x2F;Oæ‰€æœ‰æƒ(cmd&#x3D;F_GETOWNæˆ–F_SETOWN)\nè·å¾—&#x2F;è®¾ç½®è®°å½•é”(cmd&#x3D;F_GETLK, F_SETLKæˆ–F_SETLKW)\n\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ä¸ªåŠŸèƒ½, æ¥è·å–å’Œè®¾ç½®æ–‡ä»¶çš„çŠ¶æ€æ ‡è®°, å°±å¯ä»¥å°†æ–‡ä»¶æè¿°ç¬¦è®¾ç½®ä¸ºéé˜»å¡ï¼ˆè¿™é‡Œè¦æ³¨æ„, ä¸æ˜¯ç”¨ç¬¬äºŒç§ï¼‰\n2.2 è®¾ç½®éé˜»å¡æˆ‘ä»¬éœ€è¦å…ˆå°†æ–‡ä»¶æè¿°ç¬¦åŸæœ¬çš„å±æ€§ç»™å–å‡ºæ¥, ç„¶åå†åŠ ä¸Šéé˜»å¡çš„çŠ¶æ€, ä½¿ç”¨fcntlè®¾ç½®å±æ€§ã€‚\nvoid SetNoBlock(int fd)&#123;    int fl = fcntl(fd, F_GETFL);  // å…ˆè·å–æ–‡ä»¶å·²æœ‰çŠ¶æ€    if (fl &lt; 0) &#123;       perror(&quot;fcntl error&quot;);       return;    &#125;    // åœ¨å·²æœ‰çŠ¶æ€çš„åŸºç¡€ä¸Š, è®¾ç½®O_NONBLOCKéé˜»å¡    fcntl(fd, F_SETFL, fl | O_NONBLOCK);&#125;\n\n2.3 stdinæµ‹è¯•ç„¶å, æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªä¼šå‡ºç°é˜»å¡çš„æ–‡ä»¶æè¿°ç¬¦æ¥ä½œä¸ºæµ‹è¯•ã€‚ä½†æ˜¯, å¦‚æœæ˜¯ç›´æ¥æ‰“å¼€ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶, å¹¶ä¸ä¼šå‡ºç°é˜»å¡æ€ï¼ˆå› ä¸ºæ–‡ä»¶æµä¼šè¢«ä¸€æ¬¡æ€§è¯»å–å‡ºæ¥ï¼‰\nä¸è¿‡, åœ¨æˆ‘ä»¬æœ€å¸¸ç”¨çš„3ä¸ªé»˜è®¤æ–‡ä»¶æè¿°ç¬¦ä¸­, å°±æœ‰ä¸€ä¸ªæ˜¯èƒ½å¤Ÿå®ç°è¿›ç¨‹é˜»å¡çš„, å®ƒå°±æ˜¯stdin, å› ä¸ºåœ¨æ§åˆ¶å°é‡Œé¢ç­‰å¾…ç”¨æˆ·è¾“å…¥çš„æ—¶å€™, è¿›ç¨‹å°±æ˜¯å¤„äºé˜»å¡çŠ¶æ€çš„ï¼\n$ ./testè¯·è¾“å…¥ï¼š\n\næ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å°è¯•å°†stdinè®¾ç½®ä¸ºéé˜»å¡, æ¥è§‚å¯Ÿä¸€ä¸‹ç»“æœ\nint main()&#123;    SetNoBlock(stdin-&gt;_fileno);    char buf[1024];    while(true)    &#123;        ssize_t read_size = read(stdin-&gt;_fileno, buf, sizeof(buf) - 1);        if(read_size &lt; 0)        &#123;            perror(&quot;read err&quot;);            sleep(2);            continue;        &#125;        printf(&quot;input:%s\\n&quot;, buf);        buf[0] = &#x27;\\0&#x27;;    &#125;    return 0;&#125;\n\nç¼–è¯‘è¿è¡Œ, å½“æ²¡æœ‰è¯»å–åˆ°è¾“å…¥å†…å®¹çš„æ—¶å€™, å¹¶ä¸ä¼šåœ¨stdinä¸­é˜»å¡, è€Œæ˜¯ä¼šé€šè¿‡perroræ‰“å°å‡ºèµ„æºæš‚æ—¶ä¸å¯ç”¨çš„è­¦å‘Šä¿¡æ¯ã€‚\n$ ./testread err: Resource temporarily unavailableasdlfjklafinput:asdlfjklafread err: Resource temporarily unavailableadslfkjaldfjklasjfainput:adslfkjaldfjklasjfaaread err: Resource temporarily unavailableewqrqreqqrwerinput:ewqrqreqqrwerasjfaaread err: Resource temporarily unavailableqweioruqoruioqewurinput:qweioruqoruioqewuraread err: Resource temporarily unavailableweqioruqoieuotqitqwertqinput:weqioruqoieuotqitqwertqï¿½ï¿½ï¿½ï¿½aread err: Resource temporarily unavailable^C\n\n3.å¤šè·¯è½¬æ¥ä¹‹selectæ¥ä¸‹æ¥å°±è¦è¿›å…¥æˆ‘ä»¬çš„æ­£é¢˜äº†, å…³äºå¤šè·¯è½¬æ¥çš„çŸ¥è¯†ã€‚\nåœ¨ä¹‹å‰çš„æ—¶å€™, æˆ‘ä»¬å¦‚æœæƒ³åœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œé¢ç»´æŠ¤å¤šä¸ªtcpé“¾æ¥, å°±éœ€è¦ç”¨åˆ°å­çº¿ç¨‹æˆ–è€…å­è¿›ç¨‹æ¥å•ç‹¬ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·æä¾›æœåŠ¡ã€‚ä½†ä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¼€çš„çº¿ç¨‹æ˜¯æœ‰æ•°é‡é™åˆ¶çš„, åœ¨32ä½ç³»ç»Ÿä¸­, è¿™ä¸ªæ•°å­—å¤§æ¦‚æ˜¯2000ã€‚\nå¯¹äºä¸€ä¸ªé«˜å¹¶å‘çš„æœåŠ¡å™¨æ¥è¯´, è¿™ç‚¹çº¿ç¨‹æ•°æ˜¯å®Œå…¨ä¸å¤Ÿç”¨çš„ï¼å¦‚æœä½ çš„ç½‘ç«™ä¸€æ¬¡æ€§æœ‰2000ä¸ªäººè®¿é—®, ä½ çš„æœåŠ¡å™¨å°±ä¼šå› ä¸ºå¼€ä¸å‡ºæ›´å¤šçš„çº¿ç¨‹è€Œæ— æ³•ä¸ºæ›´å¤šçš„ç”¨æˆ·æä¾›æœåŠ¡ï¼\næ‰€ä»¥, å¤šè·¯è½¬æ¥å°±å‡ºç°äº†, ä»–èƒ½å¸®æˆ‘ä»¬å®ç°å•ä¸ªè¿›ç¨‹ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦, åŒæ—¶ä¸ºå¤šä¸ªsocketé“¾æ¥æä¾›æœåŠ¡çš„æ“ä½œï¼\n\næ™®é€šçš„æœ¬åœ°æ–‡ä»¶æè¿°ç¬¦ä¹Ÿæ˜¯å¯ä»¥æ‰˜ç®¡ç»™å¤šè·¯è½¬æ¥çš„ï¼\n\n3.1 è®¤è¯†selectselectçš„å‡½æ•°åŸå‹å’Œæˆ‘ä»¬ä¹‹å‰æ¥è§¦è¿‡çš„linuxç³»ç»Ÿè°ƒç”¨æ¥å£éƒ½ä¸å¤§ç›¸ä¼¼, å®ƒçš„æ‰€æœ‰å‚æ•°éƒ½æ˜¯è¾“å…¥è¾“å‡ºå‹å‚æ•°, è€Œä¸”è¿˜ç”¨åˆ°äº†ä¸€ä¸ªæˆ‘ä»¬å¹³æ—¶è¾ƒå°‘æ¥è§¦çš„æ•°æ®ç»“æ„â€”â€”ä½å›¾\n/* According to POSIX.1-2001, POSIX.1-2008 */#include &lt;sys/select.h&gt;int select(int nfds, fd_set *readfds, fd_set *writefds,           fd_set *exceptfds, struct timeval *timeout);\n\nå…ˆæ¥ä¾æ¬¡è¯´æ˜ä¸€ä¸‹æ¯ä¸€ä¸ªå‚æ•°çš„ä½œç”¨å§\n\nnfdsï¼šéœ€è¦selectå¸®æˆ‘ä»¬ç›‘è§†çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦+1\nreadfds/writefds/exceptfds, éœ€è¦selectå¸®æˆ‘ä»¬æ£€æµ‹çš„è¯»&#x2F;å†™&#x2F;å¼‚å¸¸æ–‡ä»¶æè¿°ç¬¦ï¼ˆé€šè¿‡ä½å›¾æ¥è®¾å®šï¼‰\ntimeoutï¼šé˜»å¡ç›‘æ§çš„æ—¶é•¿, ç”¨æ¥è®¾ç½®selectå•æ¬¡é˜»å¡ç­‰å¾…çš„æ—¶é—´\n\n3.1.1 timevalé¦–å…ˆæ¥çœ‹çœ‹timeoutçš„è¿™ä¸ªå‚æ•°çš„struct timevalç»“æ„ä½“æ¡†æ¶, å†…éƒ¨åŒ…å«ä¸¤ä¸ªæˆå‘˜å˜é‡, ä¸€ä¸ªè¡¨ç¤ºç§’æ•°, ä¸€ä¸ªè¡¨ç¤ºå¾®ç§’æ•°ã€‚æœ€ç»ˆselectç­‰å¾…çš„æ—¶é—´æ˜¯è¿™ä¸¤ä¸ªå‚æ•°çš„å’Œ\nstruct timeval &#123;    long    tv_sec;         /* seconds */    long    tv_usec;        /* microseconds */&#125;;\n\n\nå¦‚æœè®¾ç½®æˆ0, åˆ™ä»…æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦çš„çŠ¶æ€, ä¸ç®¡ä»€ä¹ˆæƒ…å†µéƒ½ä¼šç«‹å³è¿”å›ï¼ˆå®Œå…¨éé˜»å¡ï¼‰\nå¦‚æœè®¾ç½®æˆæŒ‡å®šçš„æ—¶é—´, åˆ™ä¼šé˜»å¡ç­‰å¾…è¿™ç«¯æ—¶é—´, å¦‚æœæœ‰æ–‡ä»¶äº‹ä»¶åˆ™è¿”å›;å¦‚æœæ²¡æœ‰ç­‰åˆ°æ–‡ä»¶æ—¶é—´, é‚£ä¹ˆæ—¶é—´åˆ°äº†å°±ä¼šè¿”å›\nå¦‚æœå°†timeoutå‚æ•°è®¾ç½®æˆnullptr, åˆ™ä¼šé˜»å¡ç­‰å¾…\n\nè¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªè¾“å…¥è¾“å‡ºå‹å‚æ•°, è¿”å›å€¼ä¸ºå‰©ä½™çš„ç§’æ•°ï¼ˆå¦‚æœç­‰å¾…æˆåŠŸçš„è¯ï¼‰\n3.1.2 fd_setå‡½æ•°ä¸­æœ‰3ä¸ªå‚æ•°éƒ½æ˜¯ç”¨åˆ°äº†è¿™ä¸ªfd_setç»“æ„, å®ƒæ˜¯ä¸€ä¸ªä½å›¾ç»“æ„, åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªè¾“å…¥è¾“å‡ºå‚æ•°\n\nè¾“å…¥ï¼šç”¨æˆ·å‘Šè¯‰æ“ä½œç³»ç»Ÿ, éœ€è¦å¸®æˆ‘ç›‘æ§é‚£å‡ ä¸ªæ–‡ä»¶æè¿°ç¬¦, åœ¨éœ€è¦ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦ä¸Šç½®1\nè¾“å‡ºï¼šç³»ç»Ÿå‘Šè¯‰ç”¨æˆ·, é‚£äº›æ–‡ä»¶æè¿°ç¬¦çš„ç›¸å…³äº‹ä»¶å°±ç»ªäº†\n\nè™½ç„¶è¿™æ˜¯ä¸€ä¸ªä½å›¾ç»“æ„, ä½†å…¶å¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»è®¾ç½®, æ“ä½œç³»ç»Ÿé¡ºä¾¿å¸®æˆ‘ä»¬å°è£…äº†ç›¸å…³çš„è®¾ç½®â€œå‡½æ•°â€, åªéœ€è¦ä¼ å…¥fdå’Œè¯¥ç»“æ„ä½“å³å¯\nvoid FD_CLR(int fd, fd_set *set);  // æ¸…ç©ºä½å›¾ä¸­å¯¹è¯¥æ–‡ä»¶æè¿°ç¬¦çš„è®¾ç½®int  FD_ISSET(int fd, fd_set *set);// åˆ¤æ–­æ˜¯å¦è¢«è®¾ç½®äº†void FD_SET(int fd, fd_set *set);  // è®¾ç½®å¯¹åº”ä½ç½®çš„æ–‡ä»¶æè¿°ç¬¦void FD_ZERO(fd_set *set);         // æ¸…ç©ºæ•´ä¸ªä½å›¾\n\nä½ å¯èƒ½å›è§‰å¾—å¥‡æ€ª, ä¸ºä»€ä¹ˆè¿™äº›â€œå‡½æ•°â€æ˜¯å¤§å†™çš„å‘¢ï¼ŸLinuxä¸­å¤§å†™çš„åº”è¯¥æ˜¯å®æ‰å¯¹å§ï¼Ÿ\nç­”å¯¹äº†ï¼è¿™é‡Œçš„è®¾ç½®å‡½æ•°å…¶å®éƒ½æ˜¯å®å®šä¹‰ï¼\n/* Access macros for `fd_set&#x27;.  */#define\tFD_SET(fd, fdsetp)\t__FD_SET (fd, fdsetp)#define\tFD_CLR(fd, fdsetp)\t__FD_CLR (fd, fdsetp)#define\tFD_ISSET(fd, fdsetp)\t__FD_ISSET (fd, fdsetp)#define\tFD_ZERO(fdsetp)\t\t__FD_ZERO (fdsetp)\n\næ—¢ç„¶æ˜¯ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„ä½å›¾, é‚£ä¹ˆå®ƒçš„é•¿åº¦å°±ä¼šæ”¶åˆ°æ“ä½œç³»ç»Ÿåº•å±‚çš„ä¸€å®šé™åˆ¶, ä»¥ä¸‹ä¸ºæºä»£ç ä¸­fd_setç»“æ„ä½“çš„å®šä¹‰\n// è·¯å¾„ usr/include/sys/select.h/* The fd_set member is required to be an array of longs.  */typedef long int __fd_mask;/* Some versions of &lt;linux/posix_types.h&gt; define this macros.  */#undef\t__NFDBITS/* It&#x27;s easier to assume 8-bit bytes than to get CHAR_BIT.  */#define __NFDBITS\t(8 * (int) sizeof (__fd_mask))#define\t__FD_ELT(d)\t((d) / __NFDBITS)#define\t__FD_MASK(d)\t((__fd_mask) (1UL &lt;&lt; ((d) % __NFDBITS)))/* fd_set for select and pselect.  */typedef struct  &#123;    /* XPG4.2 requires this member name.  Otherwise avoid the name       from the global namespace.  */#ifdef __USE_XOPEN    __fd_mask fds_bits[__FD_SETSIZE / __NFDBITS];# define __FDS_BITS(set) ((set)-&gt;fds_bits)#else    __fd_mask __fds_bits[__FD_SETSIZE / __NFDBITS];# define __FDS_BITS(set) ((set)-&gt;__fds_bits)#endif  &#125; fd_set;\n\nåœ¨å¦å¤–ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­, å¯ä»¥æ‰¾åˆ°__FD_SETSIZEè¿™ä¸ªå®çš„å®šä¹‰, æ˜¯1024;ä¹Ÿå°±æ˜¯è¯´, fd_setè¿™ä¸ªä½å›¾æœ€å¤§çš„é•¿åº¦åªæœ‰1024ä¸ªæ¯”ç‰¹ä½, æˆ‘ä»¬ä¹Ÿåªèƒ½ç›‘çœ‹è¿™ä¹ˆå¤šæ–‡ä»¶æè¿°ç¬¦ï¼\n// è·¯å¾„ usr/include/bits/typesizes.h/* Number of descriptors that can fit in an `fd_set&#x27;.  */#define __FD_SETSIZE\t\t1024\n\nè¿™ä¹Ÿæ˜¯selectçš„ç¼ºç‚¹ä¹‹ä¸€, åŒæ—¶ç›‘çœ‹çš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ï¼\n3.1.3 nfdsè¿™ä¸ªå‚æ•°æ˜¯selectéœ€è¦å¸®æˆ‘ä»¬ç›‘çœ‹çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦+1, è¿™æ˜¯å› ä¸ºselectåœ¨ç›‘çœ‹çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨å¾ªç¯æ¥è¿›è¡Œæ£€æµ‹, è¿™ä¸ªæœ€å¤§æ–‡ä»¶æè¿°ç¬¦+1ç›¸å½“äºæ˜¯ä¸€ä¸ªå¾ªç¯çš„è¾¹ç•Œæ¡ä»¶;\nä½ åªéœ€æ ¹æ®å½“å‰å·²æœ‰çš„æ–‡ä»¶æè¿°ç¬¦å·, è®¡ç®—å‡ºæœ€å¤§æ–‡ä»¶æè¿°ç¬¦, å†åŠ ä¸€ä¼ ç»™è¿™ä¸ªå‡½æ•°å³å¯ã€‚\n3.1.4 è¿”å›å€¼manæ‰‹å†Œä¸­å¯¹è¿”å›å€¼çš„æè¿°å¦‚ä¸‹\n\næˆåŠŸçš„æ—¶å€™, è¿”å›äº‹ä»¶å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡\nå¤±è´¥çš„æ—¶å€™è¿”å›-1, å¹¶è®¾ç½®errno\nå¦‚æœå·²ç»timeoutäº†è¿˜æ²¡æœ‰äº‹ä»¶å°±ç»ª, è¿”å›0\n\nRETURN VALUE       On success, select() and pselect() return the number of file descriptors contained in the three returned descriptor  sets  (that  is,  the total  number  of  bits that are set in readfds, writefds, exceptfds) which may be zero if the timeout expires before anything interesting happens.  On error, -1 is returned, and errno is set to indicate the error; the file descriptor sets are unmodified, and  timeout becomes undefined.\n\n3.2 å®ä¾‹å‡½æ•°åŸå‹çœ‹å®Œäº†, å¾—ä»å®ä¾‹å‡ºå‘æ¥è¯•è¯•äº†\n3.2.1 socketè¿™é‡Œå…ˆå¯¹socketåšäº†ä¸€ä¸ªç®€å•çš„å°è£…, åŒ…æ‹¬åˆå§‹åŒ–, ç»‘å®šç›¸å…³çš„æ¥å£, åªéœ€è¦åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶é‡Œé¢è°ƒç”¨è¿™ä¸ªå¤´æ–‡ä»¶å³å¯ !\n//Sock.hpp#pragma once#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;string&gt;#include &lt;vector&gt;#include &lt;cstdio&gt;#include &lt;cstring&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/socket.h&gt;#include &lt;sys/stat.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;netinet/in.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;pthread.h&gt;#include &lt;cerrno&gt;#include &lt;cassert&gt;class Sock&#123;public:    static const int gbacklog = 20;    static int SocketInit()    &#123;        int listenSock = socket(PF_INET, SOCK_STREAM, 0);        if (listenSock &lt; 0)        &#123;            exit(1);        &#125;        // è®¾ç½®ç«¯å£å¤ç”¨, é¿å…timewaité˜»å¡ç«¯å£        int opt = 1;        setsockopt(listenSock, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, &amp;opt, sizeof(opt));        return listenSock;    &#125;    static void Bind(int socket, uint16_t port)    &#123;        struct sockaddr_in local; // ç”¨æˆ·æ ˆ        memset(&amp;local, 0, sizeof local);        local.sin_family = PF_INET;        local.sin_port = htons(port);        local.sin_addr.s_addr = INADDR_ANY;        // 2.2 æœ¬åœ°socketä¿¡æ¯, å†™å…¥sock_å¯¹åº”çš„å†…æ ¸åŒºåŸŸ        if (bind(socket, (const struct sockaddr *)&amp;local, sizeof(local)) &lt; 0)        &#123;            exit(2);        &#125;    &#125;    static void Listen(int socket)    &#123;        if (listen(socket, gbacklog) &lt; 0)        &#123;            exit(3);        &#125;    &#125;    static int Accept(int socket, std::string *clientip, uint16_t *clientport)    &#123;        struct sockaddr_in peer;        socklen_t len = sizeof(peer);        int serviceSock = accept(socket, (struct sockaddr *)&amp;peer, &amp;len);        if (serviceSock &lt; 0)        &#123;            // è·å–é“¾æ¥å¤±è´¥            return -1;        &#125;        if(clientport) *clientport = ntohs(peer.sin_port);        if(clientip) *clientip = inet_ntoa(peer.sin_addr);        return serviceSock;    &#125;&#125;;\n\nå¦å¤–é‡ç‚¹è¯´æ˜ä¸€ä¸‹è¿™ä¸¤è¡Œ, åœ¨ä¹‹å‰å­¦ä¹ tcpæœåŠ¡å™¨çš„æ—¶å€™å°±æåˆ°è¿‡, è¿™é‡Œçš„SO_REUSEADDRæ˜¯è®©ç«¯å£å¯ä»¥è¢«å¤ç”¨, ä¸ä¼šå› ä¸ºå­˜åœ¨TIME_WAITçš„é“¾æ¥è€Œæ— æ³•ç»‘å®šç«¯å£ã€‚é€‚ç”¨äºæœåŠ¡å™¨å¿«é€Ÿé‡å¯çš„æƒ…å†µã€‚\n// è®¾ç½®ç«¯å£å¤ç”¨, é¿å…timewaité˜»å¡ç«¯å£int opt = 1;setsockopt(listenSock, SOL_SOCKET, SO_REUSEADDR | SO_REUSEPORT, &amp;opt, sizeof(opt));\n\n3.2.2 åˆå§‹åŒ–è¿˜æ˜¯è€ä¸€å¥—, é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è·å–åˆ°ç«¯å£å·, åˆ›å»ºsocket_fdå¹¶ç»‘å®šç«¯å£å’Œå¼€å§‹listen\nint main(int argc, char *argv[])&#123;    if (argc != 2) &#123;        cmd_usage(argv[0]);        exit(1);    &#125;    // åˆå§‹åŒ–socket, è·å–socket fdå¹¶ç»‘å®šç«¯å£    int listensock = Sock::SocketInit();    Sock::Bind(listensock, atoi(argv[1]));    Sock::Listen(listensock); // å¼€å§‹ç›‘å¬&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯, åœ¨selectä¸­çš„æ–‡ä»¶æè¿°ç¬¦éƒ½åªå‰©ä½å›¾äº†, æ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦æœ‰ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶æè¿°ç¬¦æ•°ç»„æ¥ååŠ©æˆ‘ä»¬ç®¡ç†æ­£åœ¨ç»´æŠ¤çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\nè¿™é‡Œä¸ºäº†æ–¹ä¾¿, æˆ‘è®¾ç«‹äº†ä¸€ä¸ªå…¨å±€çš„æ•°ç»„å˜é‡, é•¿åº¦ä¸ºsizeof(fd_set) * 8, æ˜¯fd_setè¿™ä¸ªä½å›¾ç»“æ„ä½“èƒ½å¤Ÿæ”¯æŒçš„æœ€å¤§socketæ•°é‡\nint fdsArray[sizeof(fd_set) * 8] = &#123;0&#125;; // ä¿å­˜å†å²ä¸Šæ‰€æœ‰çš„åˆæ³•fdint fdsArraySz = sizeof(fdsArray) / sizeof(fdsArray[0]);#define DFL_FD -1 // æ•°ç»„ä¸­é»˜è®¤å€¼\n\nåœ¨mainå‡½æ•°ä¸­, æˆ‘ä»¬éœ€è¦é€šè¿‡éå†æ¥å°†è¿™ä¸ªæ•°ç»„è®¾ç½®ä¸ºé»˜è®¤çš„æ–‡ä»¶æè¿°ç¬¦-1æ¥è¡¨æ˜å½“å‰ä½ç½®æ²¡æœ‰è¢«ä½¿ç”¨, å¹¶å°†0ä¸‹æ ‡å¤„è®¾ç½®ä¸ºlistensock;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯vector, åˆ™å¯ä»¥ç›´æ¥ç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–;\n// å°†æ•°ç»„é‡Œé¢çš„æ–‡ä»¶æè¿°ç¬¦éƒ½åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼, å¹¶å°†ç¬¬ä¸€ä¸ªä¸‹æ ‡è®¾ç½®ä¸ºlistensocketfor (int i = 0; i &lt; fdsArraySz; i++)&#123;    fdsArray[i] = DFL_FD;&#125;fdsArray[0] = listensock;\n\n3.2.3 ç›‘å¬åˆå§‹åŒ–å®Œæ¯•æ•°ç»„å, å°±å¯ä»¥å¼€å§‹å¾ªç¯è°ƒç”¨selectæ¥è¿›è¡Œç›‘å¬äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯, å› ä¸ºselectçš„fd_setæ˜¯ä¸€ä¸ªä½å›¾, è€Œä¸”æ˜¯è¾“å…¥è¾“å‡ºå‚æ•°ã€‚æ¯æ¬¡çš„selectè°ƒç”¨ä¹‹å, è¿™äº›ä½å›¾å°±ä¼šè¢«æ“ä½œç³»ç»Ÿä¿®æ”¹ä¸ºå·²ç»å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆå³å‚æ•°æœ¬èº«ä¼šè¢«ä¿®æ”¹ï¼‰æ‰€ä»¥æˆ‘ä»¬ä¸‹ä¸€æ¬¡è°ƒç”¨ä¹‹å‰, éœ€è¦é‡æ–°è®¾ç½®ä½å›¾å‚æ•°ï¼\n// å¼€å§‹ç›‘å¬fd_set readfds;while(true)&#123;    int maxFd = DFL_FD;    FD_ZERO(&amp;readfds); // æ¸…ç©ºä½å›¾    struct timeval timeout = &#123;5, 0&#125;; // è®¾ç½®è¶…æ—¶æ—¶é—´ä¸º5ç§’    // éå†å…¨å±€æ•°ç»„, å°†æœ‰æ•ˆçš„fdéƒ½æ·»åŠ è¿›å», å¹¶æ›´æ–°maxfd    for (int i = 0; i &lt; fdsArraySz; i++)    &#123;        // 1. è¿‡æ»¤ä¸åˆæ³•çš„fd        if (fdsArray[i] == DFL_FD) continue;        // 2. æ·»åŠ æ‰€æœ‰çš„åˆæ³•çš„fdåˆ°readfdsä¸­, æ–¹ä¾¿selectç»Ÿä¸€è¿›è¡Œå°±ç»ªç›‘å¬        FD_SET(fdsArray[i], &amp;readfds);        if (maxFd &lt; fdsArray[i]) &#123;            maxFd = fdsArray[i]; // 3. æ›´æ–°å‡ºfdæœ€å¤§å€¼        &#125;    &#125;    // è°ƒç”¨selectå¼€å§‹ç›‘å¬    int sret = select(maxFd+1, &amp;readfds, nullptr, nullptr, &amp;timeout);    switch (sret)    &#123;    case 0: // ç­‰å¾…è¶…æ—¶        cout &lt;&lt; &quot;time out ... : &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; endl;        break;    case -1:// ç­‰å¾…å¤±è´¥        cerr &lt;&lt; errno &lt;&lt; &quot; : &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;        break;    default:        // ç­‰å¾…æˆåŠŸ        cout &lt;&lt; &quot;wait success: &quot; &lt;&lt; sret &lt;&lt; endl;        break;    &#125;&#125;\n\nåŸºæœ¬æ¡†æ¶æ­èµ·æ¥äº†, æˆ‘ä»¬è¿™æ—¶å€™å°±åªéœ€è¦å®ç°ç­‰å¾…æˆåŠŸåå–å‡ºé“¾æ¥å’ŒIOä¿¡æ¯çš„æ“ä½œäº†;\nå…ˆæ¥æµ‹è¯•ä¸€ä¸‹å½“å‰çš„æ‰‹è„šæ¶å§\n3.2.4 æ‰‹è„šæ¶æµ‹è¯•ç¼–è¯‘å¯åŠ¨, ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ¥ç»‘å®šç«¯å£, åœ¨æ²¡æœ‰æ”¶åˆ°æ•°æ®ä¹‹å‰, è¿›ç¨‹ä¼šåœ¨selectä¸­é˜»å¡ç­‰å¾…5ç§’, éšåå› ä¸ºè¶…æ—¶è·³å‡ºé˜»å¡æ€, è¿”å›0å¹¶æ‰“å°å½“å‰æ—¶é—´æˆ³\n$ g++ main.cpp -o test$ ./test 10000time out ... : 1692955522time out ... : 1692955527time out ... : 1692955532time out ... : 1692955537time out ... : 1692955542\n\nä½¿ç”¨telnetå‘½ä»¤æ¥é“¾æ¥å½“å‰æœåŠ¡, selectæ£€æµ‹åˆ°listensockæ–‡ä»¶æè¿°ç¬¦å°±ç»ª, ä¼šç«‹åˆ»è¿”å›ï¼ˆå¯¹äºlistensockæ¥è¯´, æ¥äº†æ–°é“¾æ¥å°±æ˜¯è¯»IOå°±ç»ªï¼‰ä½†å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å†™å–èµ°æ–°socketçš„ä»£ç , æ‰€ä»¥è¿™é‡Œä¼šä¸€ç›´æ‰“å°äº‹ä»¶å°±ç»ª;\nè¿”å›å€¼ä¸º1, ä»£è¡¨æœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶å°±ç»ªã€‚\n\n3.2.5 å¤„ç†æ–°è¿æ¥åœ¨selectäº‹ä»¶å°±ç»ªå, ä½¿ç”¨å¦‚ä¸‹å‡½æ•°æ¥å¤„ç†æ–°çš„é“¾æ¥\nstatic void HandlerEvent(int listensock, fd_set &amp;readfds);\n\nè¿™é‡Œé¢å¤–å†™äº†ä¸€ä¸ªæ‰“å°æ•°ç»„ä¸­å…ƒç´ çš„å‡½æ•°, æ–¹ä¾¿æˆ‘ä»¬è§‚å¯Ÿç»“æœã€‚\n/// @brief æ‰“å°æ•°ç»„ä¸­çš„æ–‡ä»¶æè¿°ç¬¦static void ShowArray(int arr[], int num)&#123;    cout &lt;&lt; &quot;å½“å‰åˆæ³•sock list: &quot;;    for (int i = 0; i &lt; num; i++)    &#123;        if (arr[i] == DFL_FD )            continue;        else            cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; endl;&#125;\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦éå†æ•´ä¸ªé“¾æ¥æ•°ç»„, å¹¶åˆ¤æ–­å½“å‰ä½ç½®æ˜¯å¦æ˜¯æœ‰æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦ã€‚æ— æ•ˆç›´æ¥è·³è¿‡ã€‚\nfor (int i = 0; i &lt; fdsArraySz; i++)&#123;    if (fdsArray[i] == DFL_FD)        continue;    // å¤„ç†æ–°è¿æ¥å’Œå·²æœ‰é“¾æ¥&#125;\n\néå†çš„æ—¶å€™, æˆ‘ä»¬éœ€è¦å¯¹listensockåšå•ç‹¬çš„å¤„ç†, æ¯•ç«Ÿè·å–æ–°è¿æ¥å’Œç»´æŠ¤å·²æœ‰é“¾æ¥çš„æµç¨‹æ˜¯å®Œå…¨ä¸åŒçš„ã€‚ä¸‹é¢è¯´è¯´æµç¨‹\n\nåˆ¤æ–­æ˜¯å¦æœ‰åœ¨selectä¸­ç›‘å¬è¯¥æ–‡ä»¶æè¿°ç¬¦\næœ‰ç›‘å¬, ç»§ç»­å¾€åæ‰§è¡Œ, å¼€å§‹è¿›è¡Œacceptè·å–æ–°çš„é“¾æ¥\nè·å–å¤±è´¥, ç›´æ¥è·³å‡ºè¯¥å‡½æ•°, ç»“æŸè¯¥è½®å¤„ç†\nè·å–æˆåŠŸ, ä¸èƒ½ç›´æ¥read&#x2F;write, è€Œæ˜¯åº”è¯¥é€šè¿‡æ•°ç»„äº¤ä»˜ç»™selectå¸®æˆ‘ä»¬ç›‘å¬äº‹ä»¶\nä¸‹ä¸€è½®å¾ªç¯ä¸­, selectä¾¿ä¼šå¸®æˆ‘ä»¬ç›‘å¬è¯¥æ–°é“¾æ¥çš„äº‹ä»¶æ˜¯å¦å°±ç»ª\n\nå› ä¸ºèµ°åˆ°è¿™é‡Œçš„æ—¶å€™, æˆ‘ä»¬çš„listensocketé‡Œé¢æ˜¯ä¸€å®šæœ‰æ–°è¿æ¥çš„, æ‰€ä»¥å¯¹acceptçš„è°ƒç”¨æ˜¯ä¸ä¼šé˜»å¡çº¿ç¨‹çš„ï¼\nif (i == 0 &amp;&amp; fdsArray[i] == listensock)&#123;    // åˆ¤æ–­listensocketæœ‰æ²¡æœ‰äº‹ä»¶ç›‘å¬    if (!FD_ISSET(listensock, &amp;readfds))&#123;        cerr &lt;&lt; &quot;listensocket not set in readfds&quot; &lt;&lt; endl;        continue;    &#125;    // å…·æœ‰äº†ä¸€ä¸ªæ–°é“¾æ¥    cout &lt;&lt; &quot;get new connection&quot; &lt;&lt; endl;    string clientip;    uint16_t clientport = 0;    int sock = Sock::Accept(listensock, &amp;clientip, &amp;clientport); // ä¸ä¼šé˜»å¡    if (sock &lt; 0)        return; // å‡ºé”™äº†, ç›´æ¥è¿”å›    // æˆåŠŸè·å–æ–°è¿æ¥    cout &lt;&lt; &quot;new conn:&quot; &lt;&lt; clientip &lt;&lt; &quot;:&quot; &lt;&lt; clientport &lt;&lt; &quot; | sock: &quot; &lt;&lt; sock &lt;&lt; endl;    // è¿™é‡Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹è¿™ä¸ªsocketè¿›è¡Œç‹¬å†™, å› ä¸ºæ–°é“¾æ¥æ¥äº†å¹¶ä¸ä»£è¡¨æ–°æ•°æ®ä¸€å¹¶è¿‡æ¥äº†    // æ‰€ä»¥éœ€è¦å°†æ–°çš„æ–‡ä»¶æè¿°ç¬¦åˆ©ç”¨å…¨å±€æ•°ç»„, äº¤ä»˜ç»™select    // select å¸®æˆ‘ä»¬ç›‘çœ‹socketä¸Šçš„è¯»äº‹ä»¶æ˜¯å¦å°±ç»ª    int i = 0;    for (i = 0; i &lt; fdsArraySz; i++)    &#123;        if (fdsArray[i] == DFL_FD)            break;    &#125;    // è¾¾åˆ°ä¸Šé™äº†    if (i == fdsArraySz)    &#123;        cerr &lt;&lt; &quot;reach the maximum number of connections&quot; &lt;&lt; endl;        close(sock);    &#125;    else // æ²¡æœ‰è¾¾åˆ°    &#123;        fdsArray[i] = sock; // æ–°çš„é“¾æ¥, æ’å…¥åˆ°æ•°ç»„ä¸­, ä¸‹æ¬¡éå†å°±ä¼šæ·»åŠ åˆ°selectç›‘çœ‹ä¸­        ShowArray(fdsArray, fdsArraySz);    &#125;&#125;\n\n3.2.6 å¤„ç†å·²æœ‰é“¾æ¥è¿™é‡Œæš‚æ—¶åªåšäº†å¯¹è¯»çš„æ“ä½œ, å½“è¯»äº‹ä»¶å°±ç»ªçš„æ—¶å€™, æˆ‘ä»¬é€šè¿‡readè¯»å–å·²æœ‰çš„æ•°æ®ã€‚è¿™é‡Œå› ä¸ºsocketä¸­è‚¯å®šæ˜¯æœ‰æ•°æ®çš„, æ‰€ä»¥ä¹Ÿä¸ä¼šå‡ºç°é˜»å¡çš„æƒ…å†µã€‚\n// end if (i == 0 &amp;&amp; fdsArray[i] == listensock)else&#123;    // å¤„ç†æ™®é€šsockçš„IOäº‹ä»¶    if (FD_ISSET(fdsArray[i], &amp;readfds))    &#123;        // readã€recvè¯»å–å³å¯        char buffer[1024];        ssize_t s = recv(fdsArray[i], buffer, sizeof(buffer), 0); // ä¸ä¼šé˜»å¡        if (s &gt; 0)        &#123;            buffer[s] = 0;            cout &lt;&lt; &quot;client[&quot; &lt;&lt; fdsArray[i] &lt;&lt; &quot;]# &quot; &lt;&lt; buffer &lt;&lt; endl;        &#125;        else if (s == 0) // å¯¹ç«¯å…³é—­        &#123;            cout &lt;&lt; &quot;client[&quot; &lt;&lt; fdsArray[i] &lt;&lt; &quot;] quit, server close &quot; &lt;&lt; fdsArray[i] &lt;&lt; endl;            close(fdsArray[i]);            fdsArray[i] = DFL_FD; // å»é™¤å¯¹è¯¥æ–‡ä»¶æè¿°ç¬¦çš„selectäº‹ä»¶ç›‘å¬            ShowArray(fdsArray, fdsArraySz);        &#125;        else // å¼‚å¸¸äº†        &#123;            cout &lt;&lt; &quot;client[&quot; &lt;&lt; fdsArray[i] &lt;&lt; &quot;] error, server close &quot; &lt;&lt; fdsArray[i] &lt;&lt; endl;            close(fdsArray[i]);            fdsArray[i] = DFL_FD; // å»é™¤å¯¹è¯¥æ–‡ä»¶æè¿°ç¬¦çš„selectäº‹ä»¶ç›‘å¬            ShowArray(fdsArray, fdsArraySz);        &#125;    &#125;&#125;\n\nè¿™é‡Œæˆ‘å•æ¬¡è¯»å–çš„æ—¶å€™, æœ€å¤šåªèƒ½è¯»å‡º1024å­—èŠ‚çš„æ•°æ®;å¦‚æœæƒ³ä¸€æ¬¡æ€§è¯»å–å®Œæ¯•, åˆ™éœ€è¦ä½¿ç”¨å¾ªç¯+è®¾ç½®éé˜»å¡æ¥è¿›è¡Œè¯»å–ã€‚åç»­åœ¨epollçš„ä»£ç ç¤ºä¾‹ä¸­ä¼šå±•ç¤ºè¿™ç§å†™æ³•ã€‚\n3.2.7 å®æµ‹åˆ°è¿™é‡Œ, æˆ‘ä»¬è¿™å¥—ä»£ç å°±åŸºæœ¬å®Œæˆäº†, å¯ä»¥æ¥æµ‹è¯•ä¸€ä¸‹èƒ½å¦å®ç°å•çº¿ç¨‹ç›‘å¬å¤šä¸ªé“¾æ¥;\nåœ¨æœ¬åœ°ä½¿ç”¨telnet+å¤šä¸ªç»ˆç«¯è¿›è¡Œæµ‹è¯•, å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸå®ç°äº†åŒæ—¶ç›‘å¬ä¸¤ä¸ªé“¾æ¥, å¹¶æ¥å—è¿™ä¸¤ä¸ªé“¾æ¥ç»™è‡ªå·±å‘é€çš„ä¿¡æ¯çš„åŠŸèƒ½ã€‚å½“telneté€€å‡ºçš„æ—¶å€™, ä¹Ÿèƒ½æˆåŠŸå›æ”¶æ–‡ä»¶æè¿°ç¬¦ã€‚\n\nselectçš„å°å®ç°æš‚æ—¶å…ˆçœ‹åˆ°è¿™é‡Œ, å¦‚æœæƒ³ç”¨selectå®ç°åŒæ—¶è¯»+å†™, å…¶å®æ˜¯å¾ˆå¤æ‚çš„ã€‚éœ€è¦ä¸€å¥—å®Œæ•´çš„é€»è¾‘ã€‚è¿™å°±ç•™ç€åˆ°æœ€åepollçš„æ—¶å€™å†ç»Ÿä¸€å±•ç°å§ï¼\n3.3 socketå°±ç»ªæ¡ä»¶socketä¸åŒäº‹ä»¶çš„å°±ç»ªæœ‰å„è‡ªçš„æ¡ä»¶\n3.3.1 è¯»å°±ç»ª\nsocketå†…æ ¸ä¸­, æ¥æ”¶ç¼“å†²åŒºä¸­çš„å­—èŠ‚æ•°, å¤§äºç­‰äºä½æ°´ä½æ ‡è®°SO_RCVLOWAT, æ­¤æ—¶å¯ä»¥æ— é˜»å¡çš„è¯»è¯¥æ–‡ä»¶æè¿°ç¬¦, å¹¶ä¸”è¿”å›å€¼å¤§äº0;\nsocketåœ¨TCPé€šä¿¡ä¸­, å¯¹ç«¯å…³é—­è¿æ¥, æ­¤æ—¶å¯¹è¯¥socketè¯», åˆ™è¿”å›0;\nç›‘å¬çš„socketä¸Šæœ‰æ–°çš„è¿æ¥è¯·æ±‚;\nsocketä¸Šæœ‰æœªå¤„ç†çš„é”™è¯¯;\n\n3.3.2 å†™å°±ç»ª\nsocketå†…æ ¸ä¸­,  å‘é€ç¼“å†²åŒºä¸­çš„å¯ç”¨å­—èŠ‚æ•°(å‘é€ç¼“å†²åŒºçš„ç©ºé—²ä½ç½®å¤§å°),  å¤§äºç­‰äºä½æ°´ä½æ ‡è®° SO_SNDLOWAT,  æ­¤æ—¶å¯ä»¥æ— é˜»å¡çš„å†™,  å¹¶ä¸”è¿”å›å€¼å¤§äº0;\nsocketçš„å†™æ“ä½œè¢«å…³é—­(closeæˆ–è€…shutdown). å¯¹ä¸€ä¸ªå†™æ“ä½œè¢«å…³é—­çš„socketè¿›è¡Œå†™æ“ä½œ,  ä¼šè§¦å‘ SIGPIPE ä¿¡å·;\nsocketä½¿ç”¨éé˜»å¡connectè¿æ¥æˆåŠŸæˆ–å¤±è´¥ä¹‹å;\nsocketä¸Šæœ‰æœªè¯»å–çš„é”™è¯¯;\n\n3.3.3 å¼‚å¸¸å°±ç»ªsocketä¸Šæ”¶åˆ°å¸¦å¤–æ•°æ®ï¼ˆTCPæŠ¥å¤´ä¸­çš„URGå’Œç´§æ€¥æŒ‡é’ˆï¼‰\n3.4 selectçš„ç‰¹ç‚¹\nå¯ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦æœ‰ä¸Šé™, å–å†³äºfd_setä½å›¾ç»“æ„ä½“çš„é…ç½®\nåœ¨ç›‘æ§æ–‡ä»¶æè¿°ç¬¦çš„æ—¶å€™, éœ€è¦ç”¨æˆ·é¢å¤–çš„æ•°ç»„æ¥ç»´æŠ¤æ–‡ä»¶æè¿°ç¬¦\næ¯æ¬¡å¾ªç¯éƒ½å¾—éå†æ•´ä¸ªæ•°ç»„, æ•ˆç‡è¾ƒä½ï¼ˆå¯ä»¥ä¼˜åŒ–ä¸ºä¿è¯æœ‰æ•ˆæ–‡ä»¶æè¿°ç¬¦éƒ½åœ¨æ•°ç»„çš„å‰æ–¹ï¼‰\n\nä¸€ä¸‹æ˜¯å®ƒåœ¨æ•ˆç‡ä¸Šçš„ä¸€äº›ç¼ºç‚¹\n\næ¯æ¬¡è°ƒç”¨selectéƒ½å¾—æ‰‹åŠ¨è®¾ç½®ä¸€è¾¹fdé›†å’Œï¼ˆå› ä¸ºfd_setä¹Ÿæ˜¯è¾“å‡ºå‹å‚æ•°, åœ¨å†…æ ¸ä¸­ä¼šè¢«ä¿®æ”¹ï¼‰\næ¯æ¬¡è°ƒç”¨select, éƒ½éœ€è¦æŠŠæ‰€æœ‰fdä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€, å°é™†åœ°\næ¯æ¬¡è°ƒç”¨, å†…æ ¸éƒ½é¡»éå†ä¼ é€’è¿›æ¥çš„ä½å›¾, æ•ˆç‡ä½\nç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦æœ‰ä¸Šé™, æ•°é‡å°\n\n4.å¤šè·¯è½¬æ¥ä¹‹poll4.1 å‡½æ•°åŸå‹æ¥ä¸‹æ¥æˆ‘ä»¬è¦äº†è§£çš„æ˜¯å¦å¤–ä¸€ä¸ªå¤šè·¯è½¬æ¥æ–¹æ¡ˆ, poll\n#include &lt;poll.h&gt;int poll(struct pollfd *fds,  nfds_t nfds,  int timeout);\n\n4.1.1 å‚æ•°è¿™é‡Œçš„å‚æ•°å°±å’Œselectå®Œå…¨ä¸åŒäº†, å‡ºç°äº†å¦å¤–ä¸€ä¸ªç»“æ„ä½“\nstruct pollfd &#123;    int   fd;         /* file descriptor */    short events;     /* requested events */    short revents;    /* returned events */&#125;;\n\nè¿™ä¸€ä¸ªç»“æ„ä½“åˆ†åˆ«åŒ…å«äº†ä¸‰ä¸ªæˆå‘˜\n\næ–‡ä»¶æè¿°ç¬¦fd;\nç”¨æˆ·å‘Šè¯‰å†…æ ¸éœ€è¦ç›‘çœ‹çš„äº‹ä»¶events;\nå†…æ ¸è¿”å›çš„å°±ç»ªäº‹ä»¶revents;\n\nä½†æ˜¯ä»è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¸Šçœ‹æ¥, è²Œä¼¼å®ƒæ˜¯ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„è¾“å…¥è¾“å‡ºå‹å‚æ•°, éš¾é“è¯´pollåªèƒ½ç›‘çœ‹ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å—ï¼ŸğŸ§\néä¹Ÿ, æˆ‘ä»¬å°†å‡½æ•°åŸå‹æ”¹ä¸€ä¸‹å°±èƒ½çœ‹æ˜ç™½äº†, å®é™…ä¸Š, ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªç»“æ„ä½“æ•°ç»„, ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯¥ç»“æ„ä½“æ•°ç»„çš„é•¿åº¦ï¼\nint poll(struct pollfd fds[],  nfds_t nfds,  int timeout);\n\nç¬¬ä¸‰ä¸ªå‚æ•°å’Œselectä¸­çš„timeoutçš„åŠŸèƒ½ç›¸åŒ, å¦‚æœåˆ°è¾¾ä¸€å®šæ—¶é—´è¿˜æ²¡æœ‰è·å–åˆ°å‚æ•°, åˆ™ç›´æ¥è¿”å›;å¦‚æœè®¾ç½®ä¸º-1åˆ™é˜»å¡ç­‰å¾…, è®¾ç½®ä¸º0ä¸ºå®Œå…¨éé˜»å¡ã€‚\nè¿™é‡Œçš„timeoutå¹¶éè¾“å…¥è¾“å‡ºå‹å·å‚æ•°, å…¶åªæ˜¯ä¸€ä¸ªè¾“å…¥å‚æ•°, å•ä½ä¸ºæ¯«ç§’ï¼ˆè®°ä½, ä¸æ˜¯ç§’, æ˜¯æ¯«ç§’ï¼‰\n4.1.2 è¿”å›å€¼\nå°äº0, å‡ºé”™\nç­‰äº0, ç­‰å¾…è¶…æ—¶\nå¤§äº0, æ–‡ä»¶æè¿°ç¬¦å·²ç»å°±ç»ªçš„æ•°é‡\n\n4.1.3 äº‹ä»¶è¿™é‡Œéœ€è¦äº†è§£ä¸€ä¸‹pollåŒ…å«çš„äº‹ä»¶ç±»å‹äº†, æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæƒ…å†µæ¥é€‰æ‹©æƒ³è¦çš„äº‹ä»¶, å¹¶è®¾ç½®åˆ°ç»“æ„ä½“çš„eventä¸­;å¯¹äºselect&#x2F;poll&#x2F;epollæ¥è¯´, è¿™äº›socketçš„å°±ç»ªæ¡ä»¶éƒ½æ˜¯ç›¸åŒçš„ã€‚è¯¦è§ 3.3 socketå°±ç»ªæ¡ä»¶;\n\n4.2 pollä¼˜ç¼ºç‚¹4.2.1 ä¼˜ç‚¹åœ¨pollä¸­, ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç»“æ„ä½“æ•°ç»„æ¥è¡¨ç¤ºéœ€è¦ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦, ä»¥åŠäº‹ä»¶å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦\n\nå› ä¸ºç»“æ„ä½“ä¸­ç”¨æˆ·éœ€è¦ç›‘å¬çš„eventå’Œå†…æ ¸è¿”å›çš„å°±ç»ªeventå¹¶ä¸åœ¨ä¸€ä¸ªå˜é‡ä¸Š, æ‰€ä»¥åªéœ€è¦è®¾ç½®ä¸€æ¬¡å³å¯ï¼ˆå¦‚æœéœ€æ±‚æ²¡æœ‰å˜åŠ¨çš„è¯ï¼‰, æ— éœ€åƒselectæ¯æ¬¡éƒ½å¾—é‡æ–°éå†æ¥è®¾ç½®ä½å›¾\npollæ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶\npollæ— éœ€ç”¨æˆ·é¢å¤–ç»´æŠ¤ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶æè¿°ç¬¦æ•°ç»„, ç›´æ¥æ²¿ç”¨è¯¥ç»“æ„ä½“æ•°ç»„å³å¯\n\n4.2.2 ç¼ºç‚¹\nå’Œselectä¸€æ ·, pollä¹Ÿéœ€è¦è½®è¯¢æ£€æµ‹å°±ç»ªçš„fdå’Œç›¸å…³äº‹ä»¶\næ¯æ¬¡è°ƒç”¨polléœ€è¦æŠŠpollfdç»“æ„ä½“ä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€\nè™½ç„¶pollæ²¡æœ‰æœ€å¤§æ–‡ä»¶æè¿°ç¬¦é™åˆ¶, ä½†æ˜¯ç›‘çœ‹çš„å¤šäº†åæ€§èƒ½ä¼šçº¿æ€§ä¸‹é™\n\n4.3 çœ‹çœ‹ç¤ºä¾‹ä»£ç pollçš„ä»£ç éƒ¨åˆ†çš„ä¸»æœºç»“æ„å’ŒselectåŸºæœ¬ç›¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥è¯´ä¸€ä¸‹ä¸åŒçš„åœ°æ–¹\n#define NUM 1024#define DFL_FD -1struct pollfd fdsArray[NUM];\n\né¦–å…ˆæ˜¯å…¨å±€çš„æ•°ç»„ï¼Œè¿™æ—¶å€™ä¸éœ€è¦è‡ªå·±ç»´æŠ¤ä¸€ä¸ªintæ–‡ä»¶æè¿°ç¬¦æ•°ç»„äº†ï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸ªç»“æ„ä½“ä½œä¸ºå…¨å±€æ•°ç»„å°±OKäº†ï¼›åœ¨mainå‡½æ•°é‡Œé¢è¿˜æ˜¯è€æ ·å­ï¼Œæˆ‘ä»¬å¾—æŠŠæ•´ä¸ªæ•°ç»„çš„fdéƒ½è®¾ç½®æˆé»˜è®¤çš„fdä½œä¸ºæ ‡è¯†\nfor (int i = 0; i &lt; NUM; i++)&#123;    fdsArray[i].fd = DFL_FD;    fdsArray[i].events = 0;    fdsArray[i].revents = 0;&#125;fdsArray[0].fd = listensock;fdsArray[0].events = POLLIN;\n\nåœ¨mainå‡½æ•°çš„ä¸»å¾ªç¯ä¸­ï¼Œä¹Ÿæ˜¯ç”¨pollæ¥ä¾æ¬¡ç›‘å¬äº‹ä»¶ï¼Œå¹¶åˆ¤æ–­pollå‡½æ•°çš„è¿”å›å€¼\nint timeout = 5;while (true)&#123;    int n = poll(fdsArray, NUM, timeout);    switch (n)    &#123;        case 0:            cout &lt;&lt; &quot;time out ... : &quot; &lt;&lt; (unsigned long)time(nullptr) &lt;&lt; endl;            break;        case -1:            cerr &lt;&lt; errno &lt;&lt; &quot; : &quot; &lt;&lt; strerror(errno) &lt;&lt; endl;            break;        default:            HandlerEvent(listensock);            break;    &#125;&#125;\n\nåœ¨HandlerEventå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­ç»“æ„ä½“å†…éƒ¨çš„reventæ¥å¾—çŸ¥æ˜¯å¦æœ‰äº‹ä»¶å°±ç»ª\nif (fdsArray[i].revents &amp; POLLIN)&#123;&#125; // è¯»äº‹ä»¶æ˜¯å¦å°±ç»ª\n\nå¯¹äºlistensocketæ¥è¯´ï¼Œå°±ç»ªäº†å°±æ‰§è¡Œacceptï¼›å¹¶å°†æ–°çš„æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°æ•°ç»„ä¸­\nint j = 0;for (j = 0; j &lt; NUM; j++)&#123;    if (fdsArray[j].fd == DFL_FD)        break;&#125;// é€šè¿‡forå¾ªç¯æ‰¾åˆ°å½“å‰ä½ç½®æ˜¯é»˜è®¤çš„ç»“æ„ä½“ä¸‹æ ‡if (j == NUM) // å¦‚æœè¾¾åˆ°ä¸Šé™æ‰break&#123;    cerr &lt;&lt; &quot;æˆ‘çš„æœåŠ¡å™¨å·²ç»åˆ°äº†æœ€å¤§çš„ä¸Šé™äº†ï¼Œæ— æ³•åœ¨æ‰¿è½½æ›´å¤šåŒæ—¶ä¿æŒçš„è¿æ¥äº†&quot; &lt;&lt; endl;    close(sock);&#125;else&#123;    fdsArray[j].fd = sock; // å°†sockæ·»åŠ åˆ°æ•°ç»„ä¸­    fdsArray[j].events = POLLIN;    fdsArray[j].revents = 0;    ShowArray(fdsArray, NUM);&#125;\n\nå¯¹äºå…¶ä»–é“¾æ¥æ¥è¯´ï¼Œå°±ç»ªäº†å°±å¼€å§‹readã€‚å¦‚æœreadå¼‚å¸¸æˆ–è€…å¯¹ç«¯å…³é—­ï¼Œé‚£å°±å°†å¯¹åº”ä½ç½®çš„ç»“æ„ä½“å…¨éƒ¨åˆå§‹åŒ–ï¼ˆæ¸…ç©ºï¼‰ï¼Œç›¸å½“äºå°†è¿™ä¸ªé“¾æ¥ä»ç›‘å¬ä¸­å»æ‰ï¼\nfdsArray[i].fd = DFL_FD;fdsArray[i].events = 0;fdsArray[i].revents = 0;\n\nå…¶ä½™çš„æ“ä½œå’Œselectå®Œå…¨ä¸€è‡´ï¼Œåœ¨è¿™é‡Œå°±ä¸å±•ç¤ºä»£ç äº†ï¼\n5.epollmanæ‰‹å†Œä¸­æåˆ°, epollæ˜¯ä¸ºäº†å¤„ç†å¤§é‡socketæ–‡ä»¶æè¿°ç¬¦å¥æŸ„è€Œè¿›è¡Œäº†ä¸€å®šæ”¹è¿›çš„poll;\n5.1 æ¥å£epollå°±ä¸æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°æ¥å£äº†, è€Œæ˜¯æœ‰3ä¸ªç›¸å…³çš„å‡½æ•°ï¼Œä½¿ç”¨è¿‡ç¨‹å°±æ˜¯ä¸‰éƒ¨æ›²ï¼š\n\nepoll_create åˆ›å»ºepollæ–‡ä»¶å¥æŸ„\nepoll_ctl å°†éœ€è¦ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦è¿›è¡Œæ³¨å†Œ\nepoll_wait ç­‰å¾…æ–‡ä»¶æè¿°ç¬¦å°±ç»ª\n\n5.1.1 epoll_create#include &lt;sys/epoll.h&gt;int epoll_create(int size);int epoll_create1(int flags);\n\nepollåœ¨ä½¿ç”¨çš„æ—¶å€™, æˆ‘ä»¬éœ€è¦ç”¨createå‡½æ•°åˆ›å»ºä¸€ä¸ªepollçš„å¥æŸ„ï¼ˆæœ¬è´¨ä¸Šä¹Ÿæ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼‰, æ¥ç®¡ç†å½“å‰è¿›ç¨‹éœ€è¦æ“ä½œç³»ç»Ÿå¸®æˆ‘ä»¬ç›‘çœ‹çš„æ–‡ä»¶æè¿°ç¬¦\n\nè‡ªä»linux 2.6.8 å, è¿™é‡Œçš„sizeå‚æ•°æ˜¯è¢«å¿½ç•¥çš„\nepollçš„å¥æŸ„åœ¨ä½¿ç”¨å®Œæ¯•åä¹Ÿéœ€è¦ç”¨close()å‡½æ•°å…³é—­\né”™è¯¯çš„æ—¶å€™è¿”å›-1å¹¶è®¾ç½®errno, æ­£ç¡®çš„æ—¶å€™è¿”å›æ–‡ä»¶æè¿°ç¬¦\n\n5.1.2 epoll_ctlè¯¥å‡½æ•°æ˜¯å¯¹epollä¸­éœ€è¦ç›‘çœ‹çš„æ–‡ä»¶æè¿°ç¬¦è¿›è¡Œè®¾ç½®\n#include &lt;sys/epoll.h&gt;int epoll_ctl(int epfd,  int op,  int fd,  struct epoll_event *event);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯epoll_createçš„è¿”å›å€¼\nç¬¬äºŒä¸ªå‚æ•°æ˜¯åŠ¨ä½œ, åŒ…å«ä¸‰ä¸ªä¸åŒçš„é€‰é¡¹\nEPOLL_CTL_ADDï¼šå°†æ–°çš„æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°epfdä¸­\nEPOLL_CTL_MODï¼šä¿®æ”¹å·²æœ‰æ–‡ä»¶æè¿°ç¬¦çš„ç›‘å¬äº‹ä»¶\nEPOLL_CTL_DELï¼šåˆ é™¤å·²æœ‰æ–‡ä»¶æè¿°ç¬¦\n\n\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ–‡ä»¶æè¿°ç¬¦\nç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªepoll_eventç»“æ„ä½“\n\nè¿™ä¸ªç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹\ntypedef union epoll_data &#123;    void        *ptr;    int          fd;    uint32_t     u32;    uint64_t     u64;&#125; epoll_data_t;struct epoll_event &#123;    uint32_t     events;      /* Epoll events */    epoll_data_t data;        /* User data variable */&#125;;\n\näº‹ä»¶äº‹ä»¶eventså¯ä»¥æ˜¯ä¸‹é¢çš„è¿™äº›é€‰é¡¹\n\n\n\näº‹ä»¶\nè¯´æ˜\n\n\n\nEPOLLIN\nè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯» (åŒ…æ‹¬å¯¹ç«¯SOCKETæ­£å¸¸å…³é—­);\n\n\nEPOLLOUT\nè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å¯ä»¥å†™;\n\n\nEPOLLPRI\nè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦æœ‰ç´§æ€¥çš„æ•°æ®å¯è¯» (è¿™é‡Œåº”è¯¥è¡¨ç¤ºæœ‰å¸¦å¤–æ•°æ®åˆ°æ¥);\n\n\nEPOLLERR\nè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿé”™è¯¯;\n\n\nEPOLLHUP\nè¡¨ç¤ºå¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦è¢«æŒ‚æ–­;\n\n\nEPOLLET\nå°†EPOLLè®¾ä¸ºè¾¹ç¼˜è§¦å‘ (Edge Triggered)æ¨¡å¼,  è¿™æ˜¯ç›¸å¯¹äºæ°´å¹³è§¦å‘(Level Triggered) æ¥è¯´çš„ï¼›\n\n\nEPOLLONESHOT\nåªç›‘å¬ä¸€æ¬¡äº‹ä»¶,  å½“ç›‘å¬å®Œè¿™æ¬¡äº‹ä»¶ä¹‹å,  å¦‚æœè¿˜éœ€è¦ç»§ç»­ç›‘å¬è¿™ä¸ªsocketçš„è¯,  éœ€è¦æ‰‹åŠ¨å†æ¬¡æŠŠè¿™ä¸ªsocketåŠ å…¥åˆ°EPOLLé˜Ÿåˆ—é‡Œï¼›\n\n\n5.1.3 epoll_wait#include &lt;sys/epoll.h&gt;int epoll_wait(int epfd,  struct epoll_event *events,               int maxevents,  int timeout);int epoll_pwait(int epfd,  struct epoll_event *events,                int maxevents,  int timeout,                const sigset_t *sigmask);\n\næ”¹å‡½æ•°çš„ä½œç”¨æ˜¯æ”¶é›†åœ¨epollç›‘æ§çš„äº‹ä»¶ä¸­ï¼Œå·²ç»å°±ç»ªçš„äº‹ä»¶\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯epollçš„æ–‡ä»¶æè¿°ç¬¦å¥æŸ„\nå‚æ•°eventsæ˜¯epoll_eventsç»“æ„ä½“æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚epollä¼šå°†å°±ç»ªçš„äº‹ä»¶èµ‹å€¼åˆ°eventsæ•°ç»„é‡Œé¢ï¼›\nmaxevents å‘Šè¯‰å†…æ ¸è¿™ä¸ªeventsçš„å¤§å°ï¼Œå…¶ä¸å¯ä»¥è¶…è¿‡epoll_createçš„sizeï¼›\nå‚æ•°timeoutæ˜¯è¶…æ—¶æ—¶é—´ï¼Œä¹Ÿæ˜¯æ¯«ç§’ï¼ˆ0éé˜»å¡ï¼Œ-1æ°¸ä¹…é˜»å¡ï¼‰\nè¿”å›å€¼ï¼šæˆåŠŸè¿”å›IOäº‹ä»¶å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦æ•°ç›®ï¼Œ0ä»£è¡¨è¶…æ—¶ï¼Œè´Ÿæ•°ä»£è¡¨å¤±è´¥\n\n5.2 å·¥ä½œåŸç†5.2.1 ä»æºç çœ‹æµç¨‹æˆ‘ä»¬çŸ¥é“ï¼Œselecté€šè¿‡ä½å›¾æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿéœ€è¦ç®¡ç†çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œpollé€šè¿‡ç»“æ„ä½“æ•°ç»„æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿéœ€è¦ç®¡ç†çš„æ–‡ä»¶æè¿°ç¬¦ã€‚\nä½†epollé‡Œé¢ï¼Œå´å˜æˆäº†ä¸€ä¸ªepfdæ–‡ä»¶å¥æŸ„ï¼Œæˆ‘ä»¬åªæ˜¯ç»™è¿™ä¸ªç‰¹å®šçš„å¥æŸ„äº¤ä»˜æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™è¯´æ˜åº•å±‚è‚¯å®šéœ€è¦å…¶ä»–çš„æ•°æ®ç»“æ„ï¼Œæ¥ç®¡ç†æŸä¸ªè¿›ç¨‹çš„æŸä¸ªepfdäº¤ä»˜ç»™æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä»¥åŠéœ€è¦ç›‘çœ‹çš„äº‹ä»¶ï¼\nåœ¨Linux 2.6.32.16æºç fs/eventpoll.cä¸­ï¼Œå¯ä»¥æ‰¾åˆ°å¦‚ä¸‹è¿™ä¸ªç»“æ„ä½“\n// linuxæºç æ–‡ä»¶è·¯å¾„ï¼šfs/eventpoll.c/* * This structure is stored inside the &quot;private_data&quot; member of the file * structure and rapresent the main data sructure for the eventpoll * interface. */struct eventpoll &#123;\t/* Protect the this structure access */\tspinlock_t lock;\t/*\t * This mutex is used to ensure that files are not removed\t * while epoll is using them. This is held during the event\t * collection loop, the file cleanup path, the epoll file exit\t * code and the ctl operations.\t */\tstruct mutex mtx;\t/* Wait queue used by sys_epoll_wait() */\twait_queue_head_t wq;\t/* Wait queue used by file-&gt;poll() */\twait_queue_head_t poll_wait;\t/* List of ready file descriptors */\tstruct list_head rdllist;\t/* RB tree root used to store monitored fd structs */\tstruct rb_root rbr;\t/*\t * This is a single linked list that chains all the &quot;struct epitem&quot; that\t * happened while transfering ready events to userspace w/out\t * holding -&gt;lock.\t */\tstruct epitem *ovflist;\t/* The user that created the eventpoll descriptor */\tstruct user_struct *user;&#125;;\n\nåœ¨è¿™é‡Œé¢ï¼Œæˆ‘ä»¬æ—¢å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„mutexé”ï¼Œåˆå¯ä»¥çœ‹åˆ°ä¸€ä¸ªwait_queueç­‰å¾…é˜Ÿåˆ—ï¼Œä¸€ä¸ªåŒé“¾è¡¨ï¼Œå’Œä¸€ä¸ªrb_rootçº¢é»‘æ ‘èŠ‚ç‚¹ã€‚\nstruct list_head &#123;\tstruct list_head *next, *prev;&#125;; // å†…æ ¸ä¸­çš„åŒé“¾è¡¨\n\næŠ½è±¡å‡ºæ¥ä¹‹åï¼Œå…¶å¤§æ¦‚çš„ç»“æ„å›¾å¦‚ä¸‹\n\nå½“æŸä¸€ä¸ªè¿›ç¨‹è°ƒç”¨epoll_createåˆ›å»ºepollçš„æ–‡ä»¶æè¿°ç¬¦å¥æŸ„çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå¸®æˆ‘ä»¬åœ¨åº•å±‚åˆ›å»ºä¸€ä¸ªstruct eventpollç»“æ„ä½“ï¼Œå†…éƒ¨åŒ…å«äº†å°±ç»ªé˜Ÿåˆ—å’Œä¸€ä¸ªçº¢é»‘æ ‘ï¼ˆä¸»è¦å…³æ³¨è¿™ä¸¤ä¸ªæˆå‘˜ï¼‰\n\nè°ƒç”¨epoll_ctlçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå°†æˆ‘ä»¬é…ç½®çš„æ–‡ä»¶æè¿°ç¬¦å’Œå¯¹äºçš„äº‹ä»¶æ·»åŠ åˆ°çº¢é»‘æ ‘èŠ‚ç‚¹ä¸­ï¼›\né‡å¤æ·»åŠ çš„äº‹ä»¶ä¹Ÿå¯ä»¥é€šè¿‡çº¢é»‘æ ‘çš„é”®å€¼å”¯ä¸€æ€§æ£€æŸ¥å‡ºæ¥ï¼ˆé¿å…å†—ä½™ï¼‰\næ‰€æœ‰æ·»åŠ åˆ°epollä¸­çš„äº‹ä»¶éƒ½ä¼šä¸è®¾å¤‡çš„ç½‘å¡é©±åŠ¨ç¨‹åºå»ºç«‹å›è°ƒæ¶ˆæ¯ï¼Œå½“æŸä¸ªæ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„é“¾æ¥æœ‰ä¿¡æ¯ä¼ æ¥çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå‘ŠçŸ¥epoll\nç½‘å¡æ”¶åˆ°æ¶ˆæ¯\né©±åŠ¨ç¨‹åºå¤„ç†ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„å›è°ƒæœºåˆ¶\nepollé€šè¿‡å›è°ƒæ¶ˆæ¯æ”¶åˆ°äº‹ä»¶å°±ç»ªï¼Œå°†å…¶é“¾å…¥rdlliståŒé“¾è¡¨ä¸­\nä¸Šå±‚åªéœ€è¦è°ƒå›epoll_waitä»è¯¥åŒé“¾è¡¨ä¸­è·å–å°±ç»ªäº‹ä»¶\n\n\nè¯¥å›è°ƒåŠæ³•åœ¨åº•å±‚ä¸ºep_poll_callbackï¼Œå®ƒä¼šå°†å°±ç»ªçš„äº‹ä»¶æ’å…¥åˆ°rdlliståŒé“¾è¡¨ä¸­\nepollä¸­æ¯ä¸€ä¸ªäº‹ä»¶éƒ½ä¼šå»ºç«‹ä¸€ä¸ªå¯¹åº”çš„epitemç»“æ„ä½“\nå½“è°ƒç”¨epoll_waitæœ‰äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œåªéœ€è¦æ£€æŸ¥eventpollå¯¹è±¡çš„rdlliståŒé“¾è¡¨ä¸­æ˜¯å¦æœ‰epitemå…ƒç´ å³å¯ï¼Œæœ‰åˆ™å–å‡ºï¼›\nå¦‚æœrdllistä¸ä¸ºç©ºï¼Œåˆ™å°†å‘ç”Ÿçš„äº‹ä»¶å¤åˆ¶åˆ°ç”¨æˆ·æ€ï¼Œå¹¶å°†äº‹ä»¶æ•°é‡è¿”å›ç»™ç”¨æˆ·ï¼›å¯¹æ¯”éœ€è¦éå†çš„select/pollï¼Œè¿™ä¸ªè·å–å°±ç»ªäº‹ä»¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)çš„ï¼ˆç›´æ¥åˆ¤æ–­å¹¶å–å‡ºå°±å¯ä»¥äº†ï¼‰\n\nè¿™ä¸€å¤§åœˆæ“ä½œéƒ½æ˜¯æ“ä½œç³»ç»Ÿè‡ªè¡Œå®Œæˆçš„ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ï¼\nå…³äºepitemç»“æ„ä½“ï¼Œå¯ä»¥ç…ä¸€çœ¼ä¸‹é¢çš„æ³¨é‡Šï¼Œä»–ä¹Ÿæ˜¯åœ¨æºç çš„fs/eventpoll.cæ–‡ä»¶ä¸­\nstruct epitem &#123;\t/* RB tree node used to link this structure to the eventpoll RB tree */\tstruct rb_node rbn; // è¿™ä¸ªäº‹ä»¶å¯¹åº”çš„çº¢é»‘æ ‘èŠ‚ç‚¹\t/* List header used to link this structure to the eventpoll ready list */\tstruct list_head rdllink; // è¿™ä¸ªäº‹ä»¶å¯¹åº”çš„åŒé“¾è¡¨èŠ‚ç‚¹\t/*\t * Works together &quot;struct eventpoll&quot;-&gt;ovflist in keeping the\t * single linked chain of items.\t */\tstruct epitem *next;\t/* The file descriptor information this item refers to */\tstruct epoll_filefd ffd; // äº‹ä»¶å¥æŸ„ä¿¡æ¯\t/* Number of active wait queue attached to poll operations */\tint nwait;\t/* List containing poll wait queues */\tstruct list_head pwqlist;\t/* The &quot;container&quot; of this item */\tstruct eventpoll *ep; // æŒ‡å‘å…¶æ‰€å±çš„epolleventå¯¹è±¡\t/* List header used to link this item to the &quot;struct file&quot; items list */\tstruct list_head fllink;\t/* The structure that describe the interested events and the source fd */\tstruct epoll_event event; // è¯¥fdå…³æ³¨çš„äº‹ä»¶&#125;;\n\n5.2.2 PSHæ ‡è®°ä½åœ¨å­¦ä¹ TCPçš„æ—¶å€™ï¼Œæˆ‘ä»¬äº†è§£è¿‡PSHè¿™ä¸ªæ ‡è®°ä½ï¼Œå®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰å¯¹ç«¯çš„åº”ç”¨å±‚ï¼Œå°½å¿«å–èµ°ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚\nå¯¹äºepollè€Œè¨€ï¼Œè¿™ä¸ªPSHçš„ä½œç”¨å°±æ˜¯è®©epollåœ¨rdllisté‡Œé¢æ–°å»ºä¸€ä¸ªå°±ç»ªèŠ‚ç‚¹ï¼Œè¿™æ ·ä¸Šå±‚å°±èƒ½çŸ¥é“è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶å°±ç»ªäº†ï¼ˆè‡³äºè¯»ä¸è¯»å–ä¾æ—§æ˜¯ä¸Šå±‚çš„é—®é¢˜ï¼‰\n\nä½ å¯èƒ½ä¼šé—®ï¼Œæ—¢ç„¶å¯¹æ–¹éƒ½å‘æ¶ˆæ¯æ¥å‚¬ä½ å–æ•°æ®äº†ï¼Œé‚£ä¸åº”è¯¥ä½ çš„æ•°æ®å¹¶æ²¡æœ‰è¢«å–èµ°å—ï¼Ÿè¿™æ—¶å€™è¯¥æ–‡ä»¶æè¿°ç¬¦çš„å°±ç»ªèŠ‚ç‚¹ä¸åº”è¯¥å·²ç»å­˜åœ¨äº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªå°±ç»ªäº‹ä»¶çš„èŠ‚ç‚¹æ¥é€šçŸ¥ç”¨æˆ·å‘¢ï¼Ÿ\n\nè¿™å°±æ¶‰åŠåˆ°epollçš„ä¸¤ç§å·¥ä½œç­–ç•¥LT&#x2F;ETäº†ï¼Œåæ–‡ä¼šè®²è§£ï¼›\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œepollå¹¶æ²¡æœ‰å¯¹URGè¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œè€Œæ˜¯è§†ä¹‹ä¸ºæ­£å¸¸çš„å¯è¯»äº‹ä»¶è¿å…¥å°±ç»ªé˜Ÿåˆ—ï¼Œä½†æ˜¯äº‹ä»¶ç±»å‹æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥ç”¨EPOLLPRIæ¥å…³æ³¨ç´§æ€¥äº‹ä»¶\nï¼ˆå­˜ç–‘ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°ç›¸å…³èµ„æ–™ï¼Œæš‚ä¸”è¿™ä¹ˆè®¤ä¸ºï¼‰\n\n5.2.3 epollä¼˜ç‚¹ä¸€ä¸‹æ˜¯epollç›¸æ¯”pollå’Œselectçš„ä¼˜ç‚¹\n\næ¥å£ä½¿ç”¨æ–¹ä¾¿ï¼Œè™½ç„¶æ‹†åˆ†äº†3ä¸ªå‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå‡½æ•°çš„åŠŸèƒ½éå¸¸æ˜ç¡®ï¼›ä¸éœ€è¦æ¯æ¬¡ä½¿ç”¨éƒ½é‡æ–°è®¾ç½®æ–‡ä»¶æè¿°ç¬¦ï¼Œä¹Ÿå®ç°äº†è¾“å…¥å’Œè¾“å‡ºå‚æ•°çš„åˆ†ç¦»\næ•°æ®æ‹·è´è½»é‡ï¼šåœ¨éœ€è¦çš„æ—¶å€™è°ƒç”¨epoll_ctlæ¥å¤„ç†æ–‡ä»¶æè¿°ç¬¦å’Œäº‹ä»¶ï¼Œå¹¶ä¸ä¼šæ¯æ¬¡è°ƒç”¨éƒ½å¾—å¤§æ‰¹é‡åœ¨ç”¨æˆ·å’Œå†…æ ¸æ€ä¹‹é—´æ‹·è´æ•°æ®ï¼ˆpollå’Œselectéƒ½éœ€è¦ï¼‰\näº‹ä»¶å›è°ƒæœºåˆ¶ï¼šä½¿ç”¨äº‹ä»¶å›è°ƒæ¥æ›¿ä»£éå†ï¼Œå›è°ƒå‡½æ•°å°†å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ç»“æ„åŠ å…¥åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ï¼›epoll_waitç›´æ¥ä½¿ç”¨å°±ç»ªé˜Ÿåˆ—ï¼Œå°±èƒ½çŸ¥é“é‚£äº›æ–‡ä»¶æè¿°ç¬¦å°±ç»ªï¼›å³ä¾¿æ–‡ä»¶æè¿°ç¬¦è¾ƒå¤šçš„æ—¶å€™ï¼Œä¹Ÿèƒ½å¿«é€ŸçŸ¥é“å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆçœå»äº†éå†çš„æ—¶é—´æ¶ˆè€—ï¼‰\næ— ä¸Šé™ï¼šæ–‡ä»¶æè¿°ç¬¦æ²¡æœ‰æ•°é‡é™åˆ¶\nçº¿ç¨‹å®‰å…¨ï¼šåœ¨eventpollç»“æ„ä½“é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªmutexé”ï¼Œåœ¨linuxåº•å±‚å·²ç»å¸®æˆ‘ç»´æŠ¤äº†epollç›¸å…³æ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§ï¼\n\nåœ¨æœ‰äº›åšå®¢é‡Œé¢è¯´epollä½¿ç”¨äº†å†…å­˜æ˜ å°„æœºåˆ¶ï¼Œè¿™ç§è¯´æ³•æ˜¯é”™è¯¯çš„ï¼å› ä¸ºepoll_eventç»“æ„ä½“æ˜¯åœ¨ç”¨æˆ·æ€åˆ›å»ºçš„ï¼Œæˆ‘ä»¬åŠ¿å¿…è¿˜æ˜¯éœ€è¦è¿›è¡Œä¸€å®šçš„ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„æ‹·è´ã€‚\n\nå†…å­˜æ˜ å°„æœºåˆ¶ï¼šlinuxå†…æ ¸ç›´æ¥å°†å°±ç»ªé˜Ÿåˆ—é€šè¿‡mmapçš„æ–¹å¼æ˜ å°„åˆ°ç”¨æˆ·æ€ï¼Œé¿å…æ‹·è´æ¶ˆè€—ï¼ˆä½ å¯ä»¥ç†è§£ä¸ºç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´çš„å…±äº«å†…å­˜ï¼‰\n\n5.3 å·¥ä½œæ¨¡å¼åœ¨epollçš„å·¥ä½œæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ï¼Œè¿™å°±å¥½æ¯”ç‰©ç†å®éªŒä¸­ç¤ºæ³¢å™¨çš„ä¸¤ç§è§¦å‘æ¨¡å¼ï¼›\nå‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªtcpé€šä¿¡çš„æ —å­ï¼š\n\nå¯¹æ–¹ç»™æˆ‘å‘é€äº†2kbæ•°æ®\næˆ‘é€šè¿‡epoll_waitæˆåŠŸè·å–åˆ°è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„è¯»äº‹ä»¶å°±ç»ª\næˆ‘å–å‡ºæ–‡ä»¶æè¿°ç¬¦ï¼Œé€šè¿‡recvè¯»å–äº†1kbçš„æ•°æ®\nä½†ç¼“å†²åŒºé‡Œé¢è¿˜æœ‰1kbâ€¦â€¦\n\n5.3.1 æ°´å¹³è§¦å‘ LTæ‰€è°“æ°´å¹³è§¦å‘ï¼Œå°±æ˜¯åªè¦fdçš„ç¼“å­˜åŒºé‡Œé¢æœ‰æ•°æ®ï¼Œé‚£ä¹ˆepollå°±ä¼šä¸€ç›´è®¤ä¸ºè¿™ä¸ªfdçš„è¯»äº‹ä»¶æ˜¯å°±ç»ªçš„ï¼Œå¹¶ä¸€ç›´é€šçŸ¥ç”¨æˆ·ï¼›\n\nä¸Šé¢çš„æ —å­ä¸­ï¼Œå› ä¸ºç”¨æˆ·åªæ‹¿èµ°äº†1kbæ•°æ®ï¼Œç¼“å†²åŒºé‡Œé¢è¿˜æœ‰1kbï¼Œåœ¨ç¬¬äºŒæ¬¡è°ƒç”¨epoll_waitçš„æ—¶å€™ï¼Œepollè¿˜æ˜¯ä¼šæŠ¥å‘Šè¯¥æ–‡ä»¶æè¿°ç¬¦çš„è¯»äº‹ä»¶å°±ç»ªï¼Œè®©ç”¨æˆ·å–èµ°å‰©ä¸‹çš„æ•°æ®\nåªæœ‰æ‰€æœ‰çš„æ•°æ®éƒ½è¢«å¤„ç†å®Œæ¯•ï¼Œepollæ‰ä¸ä¼šç»§ç»­é€šçŸ¥\nLTæ”¯æŒé˜»å¡å’Œéé˜»å¡è¯»å†™\n\nå› ä¸ºLTæ¨¡å¼åªè¦ç¼“å†²åŒºä¸­è¿˜æœ‰å‰©ä½™æ•°æ®ï¼Œepollå°±ä¼šä¸€ç›´é€šçŸ¥æˆ‘ä»¬ï¼Œè¿™å°±å…è®¸ä¸Šå±‚ä¸éœ€è¦ä¸€æ¬¡æ€§å–èµ°æ‰€æœ‰æ•°æ®ï¼Œæˆ–è€…è¯´ä¸ç«‹åˆ»å¤„ç†å½“å‰ç¼“å†²åŒºçš„æ•°æ®ã€‚\nå› æ­¤ï¼Œåœ¨LTæ¨¡å¼ä¸­ï¼Œåªè¦æ˜¯äº‹ä»¶å°±ç»ªï¼Œé‚£ä¹ˆç¼“å†²åŒºé‡Œé¢ä¸€å®šä¼šæœ‰æ•°æ®ã€‚æ‰€ä»¥å®ƒæ˜¯å³æ”¯æŒé˜»å¡ï¼Œä¹Ÿæ”¯æŒéé˜»å¡çš„æ–‡ä»¶è¯»å†™çš„ï¼\n\nselect&#x2F;polléƒ½æ˜¯é»˜è®¤çš„LTæ¨¡å¼ï¼Œä¸”ä¸å¯ä»¥åˆ‡æ¢æ¨¡å¼ï¼›epollé»˜è®¤æ˜¯LTï¼Œä½†å¯ä»¥åˆ‡æ¢åˆ°ET\n\n5.3.2 è¾¹ç¼˜è§¦å‘ ETè¾¹ç¼˜è§¦å‘çš„å«ä¹‰ï¼Œæ˜¯åªæœ‰æŸä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ•°æ®å˜åŠ¨çš„æ—¶å€™ï¼Œæ‰ä¼šé€šçŸ¥ç”¨æˆ·ï¼›ååº”åˆ°è¯»äº‹ä»¶ä¸Šï¼Œåªæœ‰ç¼“å†²åŒºæ•°æ®å¢å¤šäº†ï¼Œæ‰ä¼šé€šçŸ¥ç”¨æˆ·ï¼›\n\nåœ¨ä¸Šé¢çš„tcpé€šä¿¡æ —å­ä¸­ï¼Œepollä¼šåœ¨æ•°æ®åˆ°æ¥çš„æ—¶å€™é€šçŸ¥ç”¨æˆ·ï¼›ä½†å³ä¾¿ç”¨æˆ·æ²¡æœ‰ä¸€æ¬¡æ€§è¯»å–å®Œæ¯•æ‰€æœ‰æ•°æ®ï¼Œepollå¹¶ä¸ä¼šç»§ç»­é€šçŸ¥äº†ï¼ˆé™¤éæœ‰PSHä¿¡æ¯åˆ°æ¥ï¼‰\nåœ¨ETæ¨¡å¼ä¸‹ï¼Œæ–‡ä»¶æè¿°ç¬¦çš„äº‹ä»¶å°±ç»ªåï¼Œåªæœ‰ä¸€æ¬¡å¤„ç†æœºä¼šã€‚ç¬¬äºŒæ¬¡ä½ å°±æ— æ³•å¾—çŸ¥è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸Šæ˜¯å¦è¿˜æœ‰æ²¡æœ‰è¯»å®Œçš„æ•°æ®äº†\nå› ä¸ºETæ¨¡å¼ä¸‹epoll_waitè¿”å›çš„æ¬¡æ•°æ›´å°‘ï¼Œæ‰€ä»¥ETçš„æ€§èƒ½è¿œé«˜äºLTï¼ˆnginxé»˜è®¤é‡‡ç”¨ETæ¨¡å¼çš„epollï¼‰\nå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€æ¬¡æœºä¼šï¼Œæ‰€ä»¥æ”¶åˆ°äº‹ä»¶åå¿…é¡»ç«‹å³å¤„ç†\nåªæ”¯æŒéé˜»å¡\n\n5.3.3 LTå’ŒETçš„åŒºåˆ«å› ä¸ºETæ¨¡å¼ä¸‹ï¼Œepollåªä¼šæç¤ºä½ ä¸€æ¬¡äº‹ä»¶å°±ç»ªï¼Œæ‰€ä»¥å°±å€’é€¼ç¨‹åºçŒ¿åœ¨æ”¶åˆ°è¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œä¸€æ¬¡æ€§å¤„ç†å®Œæ•°æ®ï¼›\nå½“ç„¶ï¼ŒLTæ¨¡å¼ä¸‹ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼ˆå¦‚æœæ¯æ¬¡éƒ½èƒ½ä¸€æ¬¡æ€§å–èµ°æ•°æ®ï¼Œé‚£ä¹ˆLTå’ŒETçš„æ€§èƒ½å·®è·å°±ä¸å¤§äº†ï¼‰ã€‚ä½†ETæ¨¡å¼å°±ç›¸å½“äºå‘Šè¯‰æ‰€æœ‰ä½¿ç”¨è€…ï¼Œå¿…é¡»è¿™ä¹ˆåšï¼Œå‡å°‘äº†å®¹é”™ç‡ï¼›\nä½†ETçš„ä»£ç å¤æ‚åº¦ä¼šå¢åŠ ï¼›\n5.3.4 ETå’Œéé˜»å¡ä¸ºä»€ä¹ˆETå¿…é¡»è¦å°†æ–‡ä»¶æè¿°ç¬¦è®¾ç½®æˆéé˜»å¡å‘¢ï¼Ÿ\nå‡è®¾ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼Œå®¢æˆ·ç«¯Cç»™æœåŠ¡ç«¯Så‘é€10kbæ•°æ®ï¼Œåœ¨æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯å¯¹è¿™ä¸ªæ•°æ®çš„å“åº”ä¹‹å‰ï¼Œä¸ä¼šç»§ç»­å‘é€æ•°æ®ï¼›\n\nä½†æœåŠ¡å™¨ä¸€æ¬¡æ€§åªè¯»å–äº†1KBï¼Œå‰©ä¸‹äº†9KBæ•°æ®åœ¨ç¼“å†²åŒºä¸­ï¼›å› ä¸ºæ•°æ®æ²¡æœ‰è¯»å®Œï¼Œæ‰€ä»¥ä¸ä¼šç»™å®¢æˆ·ç«¯å‘é€å“åº”ã€‚\n\nå› ä¸ºepollè®¾ç½®äº†ETæ¨¡å¼ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè®¤ä¸ºæ­¤æ—¶çš„æ–‡ä»¶æè¿°ç¬¦è¯»å°±ç»ªï¼›epoll_waitä¸ä¼šé’ˆå¯¹è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦è¿”å›ï¼Œå‰©ä¸‹çš„9KBæ•°æ®ä¼šä¸€ç›´ç•™åœ¨ç¼“å†²åŒºä¸­ï¼›\n\næ³¨æ„ï¼ŒæœåŠ¡ç«¯çš„ä»£ç é€»è¾‘æ˜¯æ”¶åˆ°å°±ç»ªäº‹ä»¶å°±è¯»å–ä¸€æ¬¡ï¼›å¹¶ä¸å­˜åœ¨å†æ¬¡è¯»å–çš„å¯èƒ½\n\né—®é¢˜å°±æ¥äº†ï¼\n\næœåŠ¡ç«¯å¿…é¡»è¦æ”¶åˆ°å°±ç»ªäº‹ä»¶æ‰ä¼šæŠŠå‰©ä¸‹çš„9kbæ•°æ®ç»™è¯»å–å®Œæ¯•\næœåŠ¡ç«¯æƒ³è¦æ”¶åˆ°å°±ç»ªäº‹ä»¶ï¼Œå°±å¿…é¡»æ”¶åˆ°å®¢æˆ·ç«¯Cå‘æ¥çš„æ–°æ•°æ®\nä½†å®¢æˆ·ç«¯Cè®¤ä¸ºæœåŠ¡å™¨æ²¡æœ‰ç»™è‡ªå·±å‘é€å“åº”ï¼Œä¸ä¼šç»§ç»­å‘é€æ•°æ®\n\nè¿™å°±ç›¸å½“äºä¸€ä¸ªæ­»å¾ªç¯äº†ï¼\n\nå› æ­¤ï¼ŒæœåŠ¡ç«¯ä¸ºäº†ä¿è¯ä¸€æ¬¡æ€§èƒ½å°†æ•°æ®å…¨éƒ¨å–å‡ºï¼Œå¿…é¡»è¦é‡‡ç”¨å¾ªç¯è¯»å–+éé˜»å¡çš„æ–¹å¼æ¥å°†ç¼“å†²åŒºè¯»å®Œï¼\nå¦‚æœé‡‡ç”¨é˜»å¡å¼ï¼Œé‚£ä¹ˆåœ¨è½®è¯¢è¯»å–çš„æ—¶å€™ï¼Œå°±æœ‰å¯èƒ½å› ä¸ºç¼“å†²åŒºå·²ç»ç©ºäº†è€Œé˜»å¡ï¼å› ä¸ºæˆ‘ä»¬è¿™ä¸ªæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„æ¨¡å‹ï¼Œè¿™æ ·ä¼šç›´æ¥å¯¼è‡´æ•´ä¸ªæœåŠ¡å™¨å®•æœºäº†ã€‚\nè€ŒLTåˆ™ä¸ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œå› ä¸ºåªè¦ç¼“å†²åŒºä¸­æœ‰æ•°æ®å°±ä¼šé€šçŸ¥ä½ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡è¯»å–å®šé•¿ï¼Œå†å°†è¯»åˆ°çš„æ•°æ®æ‹¼æ¥èµ·æ¥ã€‚\n5.3.5 epollçš„ä½¿ç”¨åœºæ™¯epollçš„é«˜æ€§èƒ½æ˜¯æœ‰ä¸€å®šç‰¹æ®Šåœºæ™¯çš„ï¼Œå¦‚æœåœºæ™¯ä¸é€‚åˆï¼Œepollçš„æ€§èƒ½å¯èƒ½è¡¨ç°ä¸ä½³ï¼›\n\nå¯¹äºå¤šé“¾æ¥ä¸”é“¾æ¥ä¸­æœ‰ä¸€éƒ¨åˆ†æ´»è·ƒçš„æ—¶å€™ï¼Œé€‚åˆä½¿ç”¨epoll\n\næ¯”å¦‚å„ç§äº’è”ç½‘APPçš„å…¥å£æœåŠ¡å™¨ï¼Œå°±å¾ˆé€‚åˆä½¿ç”¨epollæ¥å¤„ç†ä¸Šä¸‡å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼›\nå¦‚æœæ˜¯ç³»ç»Ÿå†…éƒ¨å¤„ç†æœåŠ¡å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œé“¾æ¥æ•°è¾ƒå°‘çš„æƒ…å†µï¼Œè¿™ç§æ—¶å€™ä½¿ç”¨epollå¹¶ä¸æ–¹ä¾¿ã€‚å¾—æ ¹æ®å…·ä½“éœ€è¦é€‰æ‹©æ›´åŠ é€‚åˆçš„IOæ¨¡å‹ã€‚\n5.4 æƒŠç¾¤æ•ˆåº”\nå‚è€ƒ https://zhuanlan.zhihu.com/p/359774959\n\n5.4.1 æ¦‚å¿µåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯èƒ½ä¼šé‡åˆ°epollçš„æƒŠç¾¤æ•ˆåº”ï¼›\n\né‚£ä¹ˆä»€ä¹ˆæ˜¯æƒŠç¾¤æ•ˆåº”å‘¢ã€‚å…¶äº§ç”Ÿçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\næƒŠç¾¤æ•ˆåº”çš„å…·ä½“æƒ…å†µæ˜¯ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹åœ¨ epoll ä¸Šç­‰å¾…æŸä¸ªäº‹ä»¶ï¼ˆå¦‚å¥—æ¥å­—å¯è¯»äº‹ä»¶ï¼‰ï¼Œå½“è¯¥äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹æˆ–è¿›ç¨‹éƒ½ä¼šè¢«å”¤é†’ã€‚ç„¶è€Œï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹å¯ä»¥æˆåŠŸåœ°å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œè€Œå…¶ä»–çš„çº¿ç¨‹æˆ–è¿›ç¨‹ä¼šè¿›è¡Œä¸å¿…è¦çš„ç«äº‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¢å¤–çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€é”ç«äº‰ç­‰é—®é¢˜ï¼Œä»è€Œé™ä½ç³»ç»Ÿæ€§èƒ½ã€‚\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå…·ä½“åœºæ™¯çš„è¯´æ˜\n\nåœ¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹ç¯å¢ƒä¸‹ï¼Œæœ‰äº›äººä¸ºäº†æé«˜ç¨‹åºçš„ç¨³å®šæ€§ï¼Œå¾€å¾€ä¼šè®©å¤šä¸ªçº¿ç¨‹æˆ–è€…å¤šä¸ªè¿›ç¨‹åŒæ—¶åœ¨epoll_waitç›‘å¬çš„socketæè¿°ç¬¦ã€‚å½“ä¸€ä¸ªæ–°çš„é“¾æ¥è¯·æ±‚è¿›æ¥æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸çŸ¥é“é€‰æ´¾é‚£ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹å¤„ç†æ­¤äº‹ä»¶ï¼Œåˆ™å¹²è„†å°†å…¶ä¸­å‡ ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹ç»™å”¤é†’ï¼Œè€Œå®é™…ä¸Šåªæœ‰å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹èƒ½å¤ŸæˆåŠŸå¤„ç†acceptäº‹ä»¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½å°†å¤±è´¥ï¼Œä¸”errnoé”™è¯¯ç ä¸ºEAGAINã€‚è¿™ç§ç°è±¡ç§°ä¸ºæƒŠç¾¤æ•ˆåº”ã€‚\nç»“æœæ˜¯è‚¯å®šçš„ï¼ŒæƒŠç¾¤æ•ˆåº”è‚¯å®šä¼šå¸¦æ¥èµ„æºçš„æ¶ˆè€—å’Œæ€§èƒ½çš„å½±å“ï¼Œå› ä¸ºä½ æ— ç«¯åœ°å¤šå”¤é†’äº†å‡ ä¸ªçº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹&#x2F;è¿›ç¨‹å´æ²¡æœ‰æ´»å¹²ã€‚\n5.4.2 å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è§£å†³åŠæ³•\nä¸“é—¨çš„çº¿ç¨‹è´Ÿè´£ç­‰å¾…ï¼šåœ¨å¤šçº¿ç¨‹åœºæ™¯ä¸‹ï¼Œä¸å»ºè®®è®©å¤šä¸ªçº¿ç¨‹è¿›è¡Œepoll_waitï¼Œè€Œç”¨å•ä¸ªçº¿ç¨‹è¿›è¡Œwaitï¼Œå¹¶ç”±è¯¥çº¿ç¨‹è°ƒç”¨acceptå»ºç«‹æ–°é“¾æ¥ï¼Œå¹¶å°†å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦äº¤ä»˜ç»™å…¶ä»–çº¿ç¨‹ï¼Œæ¥å¤„ç†åç»­çš„è¯»å†™æ“ä½œã€‚\nä½¿ç”¨çº¿ç¨‹æ± ï¼šä¸ä¸ºæ¯ä¸ªé“¾æ¥éƒ½åˆ›ç«‹ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹ï¼Œè€Œæ˜¯æ ¹æ®è¯»å†™äº‹ä»¶ï¼Œå°†å…¶äº¤ä»˜ç»™çº¿ç¨‹æ± ä¸­å·²æœ‰çº¿ç¨‹æ¥å¤„ç†ï¼›\nä½¿ç”¨ETæ¨¡å¼ï¼šè¯¥æ¨¡å¼ä¸‹è¯»å†™å°±ç»ªçš„æ—¶å€™åªä¼šé€šçŸ¥ä¸€æ¬¡ï¼Œå†åŠ ä¸Šepollæœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥åªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‹¿åˆ°è¿™ä¸ªå°±ç»ªäº‹ä»¶ï¼Œä»è€Œé¿å…æƒŠç¾¤ç°è±¡ï¼›\näº’æ–¥é”ï¼šåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œç­‰å¾…å’Œäº‹ä»¶å¤„ç†ï¼›\n\n5.4.3 å¤šè¿›ç¨‹ä¸‹è§£å†³åŠæ³•ç›®å‰å¾ˆå¤šå¼€æºè½¯ä»¶ï¼Œå¦‚lighttpdå’Œnginxç­‰éƒ½é‡‡ç”¨master/workersçš„æ¨¡å¼æé«˜è½¯ä»¶çš„ååèƒ½åŠ›åŠå¹¶å‘èƒ½åŠ›ï¼Œåœ¨nginxä¸­ç”šè‡³è¿˜é‡‡ç”¨äº†è´Ÿè½½å‡è¡¡çš„æŠ€æœ¯ï¼Œåœ¨æŸä¸ªå­è¿›ç¨‹çš„å¤„ç†èƒ½åŠ›è¾¾åˆ°ä¸€å®šè´Ÿè½½ä¹‹åï¼Œç”±å…¶ä»–è´Ÿè½½è¾ƒè½»çš„å­è¿›ç¨‹è´Ÿè´£Â·çš„è°ƒç”¨ï¼Œé‚£ä¹ˆnginxå’ŒLighttpdæ˜¯å¦‚ä½•é¿å…epoll_waitçš„æƒŠç¾¤æ•ˆç”¨çš„å‘¢ï¼Ÿ\n\nlighttpdçš„è§£å†³æ€è·¯æ˜¯æ— è§†æƒŠç¾¤æ•ˆåº”\n\nä»ç„¶é‡‡ç”¨master/workersæ¨¡å¼ï¼Œæ¯ä¸ªå­è¿›ç¨‹ä»ç„¶è‡ªå·±åœ¨ç›‘å¬çš„socketä¸Šè°ƒç”¨epoll_waitï¼Œå½“æœ‰æ–°çš„é“¾æ¥è¯·æ±‚å‘ç”Ÿæ—¶ï¼Œæ“ä½œç³»ç»Ÿä»ç„¶åªæ˜¯å”¤é†’å…¶ä¸­éƒ¨åˆ†çš„å­è¿›ç¨‹æ¥å¤„ç†è¯¥äº‹ä»¶ï¼Œä»ç„¶åªæœ‰ä¸€ä¸ªå­è¿›ç¨‹èƒ½å¤ŸæˆåŠŸå¤„ç†æ­¤äº‹ä»¶ï¼Œé‚£ä¹ˆå…¶ä»–è¢«æƒŠé†’çš„å­è¿›ç¨‹æ•è·EAGAINé”™è¯¯ï¼Œå¹¶æ— è§†ã€‚\n\nnginxçš„è§£å†³æ€è·¯æ˜¯äº’æ–¥é”\n\nåœ¨åŒä¸€æ—¶åˆ»ï¼Œæ°¸è¿œéƒ½åªæœ‰ä¸€ä¸ªå­è¿›ç¨‹åœ¨ç›‘å¬çš„socketä¸Šepoll_waitï¼Œå…¶åšæ³•æ˜¯ï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€çš„pthread_mutex_tï¼Œåœ¨å­è¿›ç¨‹è¿›è¡Œepoll_waitå‰ï¼Œåˆ™å…ˆè·å–é”ã€‚å½“epoll_waitè¿”å›ä¹‹åï¼Œnginxä¼šè°ƒç”¨acceptæŠŠè¿æ¥å–å‡ºæ¥ï¼Œç„¶åé‡Šæ”¾æ–‡ä»¶é”ï¼Œè®©åˆ«çš„è¿›ç¨‹å»ç›‘å¬ã€‚\nè¿™æ˜¯ä¸€ç§æŠ˜è¡·çš„åŠæ³•ï¼Œå¹¶æ²¡æœ‰å¾ˆå®Œç¾ï¼Œé¦–å…ˆè¿›ç¨‹é—´äº‰æŠ¢é”ä¼šæœ‰æ€§èƒ½å¼€è€—ï¼ˆå³ä½¿æ˜¯éé˜»å¡çš„é”ï¼‰ï¼Œä¸­é—´å¯èƒ½ä¼šæœ‰å°æ®µæ—¶é—´æ²¡æœ‰è¿›ç¨‹å»è·å–é”ï¼Œæ¯”å¦‚Aè¿›ç¨‹æ‹¿åˆ°é”ï¼Œå…¶ä»–è¿›ç¨‹å°†ä¼šè¿‡ä¸€å°æ®µæ—¶é—´å°è¯•å†å»è·å–é”ï¼Œè€Œè¿™å°æ®µæ—¶é—´é‡Œé¢å¦‚æœè¯·æ±‚é‡å¾ˆå¤§ï¼ŒAä»…æ¥å—ä¸€å°éƒ¨åˆ†è¯·æ±‚å°±è®©å‡ºé”ï¼Œåˆ™ä¸­é—´è¿‡ç¨‹ä¼šæœ‰ä¸€äº›è¿æ¥äº‹ä»¶è¢«hangä½ï¼›\n5.4.4 å†…æ ¸è§£å†³äº†æƒŠç¾¤æ•ˆåº”äº†å—æƒŠç¾¤çš„æ ¹æœ¬åŸå› åœ¨äºepollçš„é»˜è®¤è¡Œä¸ºæ˜¯å¯¹äºå¤šè¿›ç¨‹ç›‘å¬åŒä¸€æ–‡ä»¶ä¸ä¼šè®¾ç½®äº’æ–¥ï¼Œè¿›è€Œå°†æ‰€æœ‰è¿›ç¨‹å”¤é†’ï¼Œåç»­çš„å†…æ ¸ç‰ˆæœ¬ä¸»è¦æä¾›äº†ä¸¤ç§è§£å†³æ–¹æ¡ˆ\n\næ—¢ç„¶é»˜è®¤ä¸ä¼šè®¾ç½®äº’æ–¥ï¼Œé‚£å°±åŠ ä¸€ä¸ªäº’æ–¥åŠŸèƒ½å¥½äº†ï¼Œlinux 4.5å†…æ ¸ä¹‹åç»™epollæ·»åŠ äº†ä¸€ä¸ªEPOLLEXCLUSIVEçš„æ ‡å¿—ä½ï¼Œå¦‚æœè®¾ç½®äº†è¿™ä¸ªæ ‡å¿—ä½ï¼Œé‚£epollå°†è¿›ç¨‹æŒ‚åˆ°ç­‰å¾…é˜Ÿåˆ—æ—¶å°†ä¼šè®¾ç½®ä¸€ä¸‹äº’æ–¥æ ‡å¿—ä½ï¼Œè¿™æ—¶å®ç°è·Ÿå†…æ ¸åŸç”Ÿacceptä¸€æ ·çš„ç‰¹æ€§ï¼Œåªä¼šå”¤é†’é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªè¿›ç¨‹\nç¬¬äºŒç§æ–¹æ³•ï¼šlinux 3.9å†…æ ¸ä¹‹åç»™socketæä¾›SO_REUSEPORTæ ‡å¿—ï¼Œè¿™ç§æ–¹å¼è§£å†³å¾—æ›´å½»åº•ï¼Œä»–å…è®¸ä¸åŒè¿›ç¨‹çš„socketç»‘å®šåˆ°åŒä¸€ä¸ªç«¯å£ï¼Œå–ä»£ä»¥å¾€éœ€è¦å­è¿›ç¨‹å…±äº«socketç›‘å¬çš„æ–¹å¼ï¼Œè¿™æ—¶å€™ï¼Œæ¯ä¸ªè¿›ç¨‹çš„ç›‘å¬socketå°†æŒ‡å‘open_file_tablesä¸‹çš„ä¸åŒèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒè¿›ç¨‹æ˜¯åœ¨è‡ªå·±çš„è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸‹è¢«æŒ‚èµ·çš„ï¼Œä¸å­˜åœ¨å…±äº«fdçš„é—®é¢˜ï¼Œä¹Ÿå°±ä¸å­˜åœ¨è¢«åŒæ—¶å”¤é†’çš„å¯èƒ½ã€‚è€Œå†…æ ¸åˆ™åœ¨é©±åŠ¨ä¸­å°†è®¾ç½®äº†SO_REUSEPORTå¹¶ä¸”ç»‘å®šåŒä¸€ç«¯å£çš„è¿™äº›socketåˆ†åˆ°åŒä¸€ä¸ªgroupä¸­ï¼Œå½“æœ‰tcpè¿æ¥äº‹ä»¶åˆ°è¾¾çš„æ—¶å€™ï¼Œå†…æ ¸å°†ä¼šå¯¹æºIP+æºç«¯å£å–hashç„¶åæŒ‡å®šè¿™ä¸ªgroupä¸­å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹æ¥æ¥å—è¿æ¥ï¼Œç›¸å½“äºåœ¨å†…æ ¸çº§åˆ«ä¸­å®ç°äº†ä¸€ä¸ªè´Ÿè½½å‡è¡¡\n\nåŸºäºä»¥ä¸Šä¸¤ç§æ–¹æ³•ï¼Œå…¶å®epollç”Ÿæ€åœ¨ç›®å‰æ¥è¯´ä¸å­˜åœ¨æ‰€è°“çš„æƒŠç¾¤æ•ˆåº”äº†ã€‚è€Œæ–°ç‰ˆæœ¬çš„nginxä¹Ÿé‡‡ç”¨äº† SO_REUSEPORTæ¥è§£å†³æ­¤é—®é¢˜ã€‚\né™¤éä½ æº¢ç”¨epollï¼Œæ¯”å¦‚å¤šè¿›ç¨‹ä¹‹é—´å…±äº«äº†åŒä¸€ä¸ªepfdï¼ˆçˆ¶è¿›ç¨‹åˆ›å»ºepollç”±å¤šä¸ªå­è¿›ç¨‹æ¥è°ƒç”¨ï¼‰ï¼Œé‚£å°±ä¸èƒ½æ€ªepolläº†ï¼Œå› ä¸ºè¿™æ—¶å€™å¤šä¸ªè¿›ç¨‹éƒ½è¢«æŒ‚åˆ°è¿™ä¸ªepollä¸‹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå·²ç»ä¸æ˜¯ä»…ä»…æ˜¯æƒŠç¾¤æ•ˆåº”çš„é—®é¢˜äº†ï¼›æ¯”å¦‚è¯´ï¼ŒAè¿›ç¨‹åœ¨epollæŒ‚äº†socket1çš„è¿æ¥äº‹ä»¶ï¼ŒBè¿›ç¨‹è°ƒç”¨äº†epoll_waitï¼Œç”±äºå±äºåŒä¸€ä¸ªepfdï¼Œå½“socket1äº§ç”Ÿäº‹ä»¶çš„æ—¶å€™ï¼Œè¿›ç¨‹Bä¹Ÿä¼šè¢«å”¤é†’ï¼Œè€Œæ›´ä¸¥é‡çš„äº‹æƒ…åœ¨äºï¼Œåœ¨Bè¿›ç¨‹çš„ç©ºé—´ä¸‹å¹¶ä¸å­˜åœ¨socket1è¿™ä¸ªfdï¼Œä»è€ŒæŠŠé—®é¢˜æå¾—å¾ˆå¤æ‚ã€‚\næ€»ç»“ï¼šåƒä¸‡ä¸è¦åœ¨å¤šçº¿ç¨‹&#x2F;å¤šè¿›ç¨‹ä¹‹é—´å…±äº«epfdï¼\n6.Reactoræ¨¡å‹æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬æ¥ç”¨epollç¼–å†™ä¸€ä¸ªåŸºäºReactoræ¨¡å¼çš„æœåŠ¡å™¨å§ï¼\n6.1 ä»€ä¹ˆæ˜¯Reactorï¼Ÿ\nReactoræ¨¡å‹æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„ï¼Œé€šè¿‡ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¾“å…¥åŒæ—¶ä¼ é€’ç»™æœåŠ¡ç«¯è¿›è¡Œå¤„ç†\næœåŠ¡ç«¯è¯·æ±‚ç¨‹åºå¤„ç†ä¼ å…¥çš„å¤šä¸ªè¯·æ±‚ï¼Œå¹¶åˆ†å‘åˆ°ç›¸åº”çš„å¤„ç†çº¿ç¨‹\nåŸºäºIOå¤šè·¯è½¬æ¥ï¼ˆå¤šè·¯å¤ç”¨ï¼‰æ¨¡å‹ï¼šå¤šä¸ªé“¾æ¥é€šç”¨ä¸€ä¸ªé˜»å¡å¯¹è±¡ï¼Œå¼•ç”¨ç¨‹åºåªéœ€è¦åœ¨ä¸€ä¸ªé˜»å¡å¯¹è±¡ç­‰å¾…ï¼Œæ— éœ€é˜»å¡ç­‰å¾…æ‰€æœ‰é“¾æ¥ï¼›å½“æœ‰æ–°é“¾æ¥æˆ–è€…äº‹ä»¶å°±ç»ªçš„æ—¶å€™ï¼Œç”±æ“ä½œç³»ç»Ÿé€šçŸ¥åº”ç”¨ç¨‹åºï¼Œå¼€å§‹è¿›è¡Œä¸šåŠ¡å¤„ç†\nåŸºäºçº¿ç¨‹æ± å¤ç”¨çº¿ç¨‹èµ„æºï¼šä¸å¿…ç»™æ¯ä¸ªé“¾æ¥å•ç‹¬åˆ›å»ºçº¿ç¨‹ï¼Œè€Œæ˜¯å°†é“¾æ¥å®Œæˆåçš„ä¸šåŠ¡å¤„ç†äº¤ä»˜ç»™å·²æœ‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨ç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥å¤„ç†å¤šä¸ªé“¾æ¥çš„ä¸šåŠ¡ã€‚\n\nreactoræ¨¡å¼æœ‰ä¸‹é¢3ç§æ–¹å¼ï¼Œå‚è€ƒåšå®¢ @é¡½çŸ³ä¹å˜\n6.1.1 ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å‹ç¬¬ä¸€ç§æ˜¯å¤šçº¿ç¨‹æ¨¡å¼çš„ï¼Œæœ‰ä¸åŒçš„ä»å±reactoræ¥è¿›è¡Œäº‹ä»¶ç›‘æ§å’Œå¤„ç†\n\nReactorä¸»çº¿ç¨‹è´Ÿè´£ç›‘å¬äº‹ä»¶å¹¶è¿›è¡Œé“¾æ¥çš„accept\naccpetè·å–åˆ°é“¾æ¥åï¼Œåˆ†é…ç»™æŸä¸€ä¸ªä»Reactorè¿›è¡Œè¯»å†™äº‹ä»¶çš„ç›‘å¬\nä»Reactorè¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œå½“æœ‰æ–°äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼Œåˆ›å»ºHandlerè¿›è¡Œäº‹ä»¶å¤„ç†\nHeadleré€šè¿‡readè¯»å–æ•°æ®ï¼Œå¹¶å¤„ç†æ•°æ®ï¼ˆè¿™é‡Œè¿˜å¯ä»¥å°†è¯»å–æ•°æ®åçš„å“åº”æ“ä½œåˆ†å‘ç»™çº¿ç¨‹æ± è¿›è¡Œå¤„ç†ï¼Œçº¿ç¨‹æ± å¤„ç†å®Œæ¯•åè¿”å›ç»™Handlerï¼‰ï¼Œé€šè¿‡sendè¿”å›ç»™å®¢æˆ·ç«¯\nReactorä¸»çº¿ç¨‹å¯ä»¥å¯¹åº”å¤šä¸ªå­çº¿ç¨‹\n\n\n\n6.1.2 å•Reactorå¤šçº¿ç¨‹\nReactoré€šè¿‡å¤šè·¯è½¬æ¥ç›‘å¬å®¢æˆ·ç«¯äº‹ä»¶ï¼Œæ”¶åˆ°äº‹ä»¶åï¼Œè¿›è¡Œåˆ†å‘\nå¦‚æœæ˜¯å»ºç«‹é“¾æ¥çš„è¯·æ±‚ï¼Œåˆ™æ‰§è¡Œacceptï¼Œå»ºç«‹é“¾æ¥åï¼Œåˆ›å»ºä¸€ä¸ªHandlerå®Œæˆé“¾æ¥å»ºç«‹åçš„å„ä¸ªæ“ä½œ\nå¦‚æœä¸æ˜¯é“¾æ¥è¯·æ±‚ï¼ˆè¯»å†™å°±ç»ªï¼‰åˆ™ç”±Reactoråˆ†å‘è°ƒç”¨é“¾æ¥å¯¹åº”çš„è¯»å†™Handleræ¥è¿›è¡Œå¤„ç†\nHandleråªè´Ÿè´£å“åº”å…·ä½“çš„äº‹ä»¶ï¼Œè€Œä¸è¿›è¡Œå…·ä½“çš„ä¸šåŠ¡å¤„ç†\né€šè¿‡Handlerä¸­çš„readè¯»å–åˆ°æ•°æ®åï¼Œåˆ†å‘ç»™çº¿ç¨‹æ± å­ä¸­çš„çº¿ç¨‹å¤„ç†ï¼Œå¤„ç†å®Œæ¯•åè¿”å›Handlerï¼Œå†é€šè¿‡å†™æ–¹æ³•å‘é€ç»™å®¢æˆ·ç«¯\n\n\n6.1.3 å•Reactorå•çº¿ç¨‹ç¬¬ä¸‰ç§æ˜¯å•çº¿ç¨‹æ¨¡å¼ä¸‹çš„ï¼ˆåŠå¼‚æ­¥åŠåŒæ­¥æ¨¡å‹ï¼‰ï¼Œå½“æ”¶åˆ°æŸä¸ªå®¢æˆ·ç«¯çš„å°±ç»ªäº‹ä»¶ï¼Œå°±å»å¤„ç†è¿™ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚æ­¤æ—¶Handlerä¼šå®Œæˆreadåˆ°ä¸šåŠ¡å¤„ç†åˆ°sendçš„å…¨æµç¨‹ï¼›\næœ¬æ¬¡ä¸»è¦å†™çš„æ˜¯è¯¥æ¨¡å¼ä¸‹çš„æ“ä½œï¼Œå› ä¸ºå®ƒåŸºæœ¬æ˜¯ä¸²è¡Œè¿è¡Œçš„ï¼Œæ€è·¯æ¯”è¾ƒå®¹æ˜“ç†è§£ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ¨¡å¼æ”¯æŒçš„å®¢æˆ·ç«¯é‡ä¸åº”è¿‡å¤šï¼Œå¦åˆ™ä¼šæå¤§å½±å“æ€§èƒ½ã€‚\n\n\n6.1.4 æ€»ç»“ä¸‰ç§æ¨¡å¼ç”¨ç”Ÿæ´»æ¡ˆä¾‹æ¥ç†è§£\n\nå•Reactorå•çº¿ç¨‹ï¼Œå‰å°æ¥å¾…å‘˜å’ŒæœåŠ¡å‘˜æ˜¯åŒä¸€ä¸ªäººï¼Œå…¨ç¨‹ä¸ºé¡¾å®¢æœåŠ¡\n\nå•Reactorå¤šçº¿ç¨‹ï¼Œ1ä¸ªå‰å°æ¥å¾…å‘˜ï¼Œå¤šä¸ªæœåŠ¡å‘˜ï¼Œæ¥å¾…å‘˜åªè´Ÿè´£æ¥å¾…\n\nä¸»ä»Reactorå¤šçº¿ç¨‹ï¼Œå¤šä¸ªå‰å°æ¥å¾…å‘˜ï¼Œå¤šä¸ªæœåŠ¡å‘˜\n\n\nReactoræ¨¡å‹å…·æœ‰å¦‚ä¸‹ä¼˜ç‚¹\n\nå“åº”å¿«ï¼Œä¸å¿…ä¸ºå•ä¸ªåŒæ­¥äº‹ä»¶æ‰€é˜»å¡ï¼Œè™½ç„¶Reactoræœ¬èº«ä¾ç„¶æ˜¯åŒæ­¥çš„\n\nå¯ä»¥æœ€å¤§ç¨‹åº¦çš„é¿å…å¤æ‚çš„å¤šçº¿ç¨‹åŠåŒæ­¥é—®é¢˜ï¼Œå¹¶ä¸”é¿å…äº†å¤šçº¿ç¨‹&#x2F;è¿›ç¨‹çš„åˆ‡æ¢å¼€é”€\n\næ‰©å±•æ€§å¥½ï¼Œå¯ä»¥æ–¹ä¾¿çš„é€šè¿‡å¢åŠ Reactorå®ä¾‹ä¸ªæ•°æ¥å……åˆ†åˆ©ç”¨CPUèµ„æº\n\nå¤ç”¨æ€§å¥½ï¼ŒReactoræ¨¡å‹æœ¬èº«ä¸å…·ä½“äº‹ä»¶å¤„ç†é€»è¾‘æ— å…³ï¼Œå…·æœ‰å¾ˆé«˜çš„å¤ç”¨æ€§\n\n\n6.2 ä»£ç åˆ†æè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç å§ï¼æœ¬æ¬¡å°†æ‰€æœ‰å¤„ç†æ¨¡å—éƒ½ç»™æ‹†åˆ†å¼€æ¥ï¼Œä¸€ä¸€è¿›è¡Œè¯´æ˜\n6.2.1 Epoller.hppé¦–å…ˆæ˜¯å°†å¯¹epollçš„ä¸‰ä¸ªç³»ç»Ÿè°ƒç”¨å‡½æ•°è¿›è¡Œä¸€å®šçš„å°è£…ï¼Œç»Ÿä¸€è¿›è¡Œé”™è¯¯çš„åˆ¤æ–­å¤„ç†ã€‚æ–¹ä¾¿äº†å…¶ä»–æ¨¡å—çš„è°ƒç”¨ç”¨ï¼›\nè¿™éƒ¨åˆ†çš„ä»£ç éå¸¸ç®€å•ï¼Œå°±åªåœ¨æ³¨é‡Šé‡Œå†™ä¸€ä¸‹è§£æå§ï¼\n#pragma once#include &lt;iostream&gt;#include &lt;cerrno&gt;#include &lt;cstdlib&gt;#include &lt;unistd.h&gt;#include &lt;sys/epoll.h&gt;#include &quot;Log.hpp&quot;class Epoller&#123;public:    static const int gsize = 128;public:    static int CreateEpoller()    &#123;        int epfd = epoll_create(gsize); // åˆ›å»ºå¯¹åº”sizeçš„epfd        if (epfd &lt; 0) // é”™è¯¯åˆ¤æ–­        &#123;            logMessage(FATAL, &quot;epoll_create : %d : %s&quot;, errno, strerror(errno));            exit(3);        &#125;        return epfd; // æ­£ç¡®è¿”å›epfd    &#125;    static bool AddEvent(int epfd, int sock, uint32_t event)    &#123;        struct epoll_event ev;        ev.events = event; // è®¾ç½®event        ev.data.fd = sock;        // ç»™å¯¹åº”çš„socketæ·»åŠ åˆ°epollä¸­        int n = epoll_ctl(epfd, EPOLL_CTL_ADD, sock, &amp;ev);        return n == 0; // è¿”å›å€¼æ˜¯æ˜¯å¦è°ƒç”¨æˆåŠŸ    &#125;    static bool ModEvent(int epfd, int sock, uint32_t event)    &#123;        struct epoll_event ev;        ev.events = event;        ev.data.fd = sock;        // ä¿®æ”¹å·²æœ‰scoketçš„event        // è¯¥socketå¿…é¡»å…ˆç”¨ADDæ·»åŠ ï¼Œå¦åˆ™æ— æ³•ä¿®æ”¹ï¼Œä¼šè¿”å›ENOENTé”™è¯¯        int n = epoll_ctl(epfd, EPOLL_CTL_MOD, sock, &amp;ev);        return n == 0;    &#125;    static bool DelEvent(int epfd, int sock)    &#123;        // åˆ é™¤æŒ‡å®šsocket        int n = epoll_ctl(epfd, EPOLL_CTL_DEL, sock, nullptr);        return n == 0;    &#125;    static int LoopOnce(int epfd, struct epoll_event revs[], int num)    &#123;        // å•æ¬¡waitçš„è°ƒç”¨ï¼Œä»æ•°ç»„é‡Œé¢å–å›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦        int n = epoll_wait(epfd, revs, num, -1);        if(n == -1)        &#123;            logMessage(FATAL, &quot;epoll_wait : %d : %s&quot;, errno, strerror(errno));        &#125;        return n;    &#125;&#125;;\n\n6.2.2 Sock.hppåŒselectï¼Œè§ä¸Šæ–‡ 3.2.1 socket éƒ¨åˆ†ï¼›\n6.2.3 Log.hppä¸€ä¸ªå·¨ç®€å•çš„æ—¥å¿—ç±»\n#pragma once#include &lt;cstdio&gt;#include &lt;ctime&gt;#include &lt;cstdarg&gt;#include &lt;cassert&gt;#include &lt;cassert&gt;#include &lt;cstring&gt;#include &lt;cerrno&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#define DEBUG 0#define NOTICE 1#define WARNING 2#define FATAL 3const char *log_level[] = &#123;&quot;DEBUG&quot;, &quot;NOTICE&quot;, &quot;WARINING&quot;, &quot;FATAL&quot;&#125;;#define LOGFILE &quot;serverTcp.log&quot;class Log&#123;public:    Log():logFd(-1)    &#123;&#125;    void enable()    &#123;        umask(0);        logFd = open(LOGFILE, O_WRONLY | O_CREAT | O_APPEND, 0666);        assert(logFd != -1);        dup2(logFd, 1);        dup2(logFd, 2);    &#125;    ~Log()    &#123;        if(logFd != -1)        &#123;            fsync(logFd);            close(logFd);        &#125;    &#125;private:    int logFd;&#125;;// logMessage(DEBUG, &quot;%d&quot;, 10);void logMessage(int level, const char *format, ...)&#123;    assert(level &gt;= DEBUG);    assert(level &lt;= FATAL);    char *name = getenv(&quot;USER&quot;);    char logInfo[1024];    va_list ap;    va_start(ap, format);    vsnprintf(logInfo, sizeof(logInfo) - 1, format, ap);    va_end(ap); // ap = NULL    FILE *out = (level == FATAL) ? stderr : stdout;    fprintf(out, &quot;%s | %u | %s | %s\\n&quot;,            log_level[level],            (unsigned int)time(nullptr),            name == nullptr ? &quot;unknow&quot; : name,            logInfo);    fflush(out); // å°†Cè¯­è¨€ç¼“å†²åŒºä¸­çš„æ•°æ®åˆ·æ–°åˆ°OS    fsync(fileno(out));   // å°†OSä¸­çš„æ•°æ®å°½å¿«å†™å…¥ç¡¬ç›˜&#125;\n\n6.2.4 TcpServerè¿™æ˜¯æˆ‘ä»¬reactoræ¨¡å‹çš„é‡ç‚¹\n1.Connectionç±»è¿™é‡Œå…ˆå®šä¹‰äº†ä¸€ä¸ªConnectioné“¾æ¥ç±»ï¼Œæ¯”è¾ƒé‡è¦çš„æ˜¯ç±»é‡Œé¢æœ‰3ä¸ªå›è°ƒæ–¹æ³•çš„æŒ‡é’ˆã€‚åœ¨Reactorä¸­ï¼Œæˆ‘ä»¬ç”¨å›è°ƒæ–¹æ³•æ¥æ›¿ä»£äº†ä¸»æ‰§è¡Œæµç›´æ¥è°ƒç”¨å‡½æ•°çš„æ–¹å¼ã€‚çº¿ç¨‹åªéœ€è¦æ¥æ”¶åˆ°è¿™ä¸ªConnectionå¯¹è±¡ï¼Œå°±å¯ä»¥ç”¨å›è°ƒæ–¹æ³•æ¥å®ç°å¯¹é“¾æ¥çš„æ•°æ®å¤„ç†\nusing func_t = std::function&lt;int(Connection *)&gt;;using callback_t = std::function&lt;int(Connection *, std::string &amp;)&gt;;class Connection&#123;public:    // æ–‡ä»¶æè¿°ç¬¦    int sock_;    TcpServer *R_;// ä¸»æœåŠ¡å™¨çš„ç±»æŒ‡é’ˆ    // è‡ªå·±çš„æ¥å—å’Œå‘é€ç¼“å†²åŒº    std::string inbuffer_;    std::string outbuffer_;    // è¯»ã€å†™ã€å¼‚å¸¸çš„å›è°ƒå‡½æ•°    func_t recver_;    func_t sender_;    func_t excepter_;public:    Connection(int sock, TcpServer *r) : sock_(sock), R_(r)    &#123;&#125;    void SetRecver(func_t recver) &#123; recver_ = recver; &#125;    void SetSender(func_t sender) &#123; sender_ = sender; &#125;    void SetExcepter(func_t excepter) &#123; excepter_ = excepter; &#125;    ~Connection() &#123;&#125;&#125;;\n\n2.TcpServeræˆå‘˜å˜é‡å†æ¥çœ‹çœ‹tcpserverçš„æˆå‘˜å˜é‡æœ‰ä»€ä¹ˆ\nprivate:\t// æ¥æ”¶é˜Ÿåˆ—çš„é•¿åº¦    static const int revs_num = 64;    // 1. ç½‘ç»œsocket    int listensock_;    // 2. epollçš„fd    int epfd_;    // 3. å°†epollå’Œä¸Šå±‚ä»£ç è¿›è¡Œç»“åˆï¼Œå·²æœ‰é“¾æ¥    std::unordered_map&lt;int, Connection *&gt; connections_;    // 4. å°±ç»ªäº‹ä»¶åˆ—è¡¨    struct epoll_event *revs_;    // 5. è®¾ç½®å®Œæ•´æŠ¥æ–‡çš„å¤„ç†å›è°ƒæ–¹æ³•    callback_t cb_;\n\n3.æ„é€ éšåä¾¿æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–è¿™äº›æˆå‘˜å˜é‡ï¼Œå…ˆæ˜¯ä»Sock.hppä¸­è·å–åˆ°ç›‘å¬æ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åå†é€šè¿‡Epollerç±»è·å–åˆ°epfdå¥æŸ„ï¼Œæœ€åæ˜¯å°†listensocketæ”¾å…¥epollçš„ç›‘å¬ä¸­ï¼›\nè¿™é‡Œçš„std::bindçš„ä½œç”¨ï¼Œæ˜¯å°†å½“å‰TcpServerçš„thisæŒ‡é’ˆç»‘å®šåˆ°TcpServer::Accepterå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šï¼Œå¦åˆ™åœ¨ç±»å¤–æ²¡æœ‰åŠæ³•é€šè¿‡Connectionç±»çš„å›è°ƒæŒ‡é’ˆæ¥è°ƒç”¨è¿™ä¸ªç±»çš„æˆå‘˜å‡½æ•°\nTcpServer(callback_t cb, int port = 8080) : cb_(cb)&#123;    // å½“å‰ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦åŠå…¶äº‹ä»¶    revs_ = new struct epoll_event[revs_num];    // ç½‘ç»œåŠŸèƒ½    listensock_ = Sock::SocketInit();    Util::SetNonBlock(listensock_);    Sock::Bind(listensock_, port);    Sock::Listen(listensock_);    // å¤šè·¯è½¬æ¥    epfd_ = Epoller::CreateEpoller();    // æ·»åŠ listensockåŒ¹é…çš„connection    AddConnection(listensock_, EPOLLIN | EPOLLET,                  std::bind(&amp;TcpServer::Accepter, this, std::placeholders::_1), nullptr, nullptr);&#125;\n\n4.æ·»åŠ é“¾æ¥åœ¨AddConnectionå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¼šå°†socketç»™æ·»åŠ åˆ°epfdä¸­ï¼›å¦‚æœè¿™ä¸ªepfdæ˜¯ä½¿ç”¨äº†EPOLLETçš„ETæ¨¡å¼ï¼Œåˆ™è¿˜éœ€è¦è®¾ç½®éé˜»å¡ï¼›\nvoid AddConnection(int sockfd, uint32_t event, func_t recver, func_t sender, func_t excepter)&#123;    if (event &amp; EPOLLET)        Util::SetNonBlock(sockfd);    // æ·»åŠ sockfdåˆ°epoll    Epoller::AddEvent(epfd_, sockfd, event);    // å°†sockfdåŒ¹é…çš„Connectionä¹Ÿæ·»åŠ åˆ°å½“å‰çš„unordered_mapä¸­    Connection *conn = new Connection(sockfd, this);    conn-&gt;SetRecver(recver);    conn-&gt;SetSender(sender);    conn-&gt;SetExcepter(excepter);    connections_.insert(std::make_pair(sockfd, conn));    logMessage(DEBUG, &quot;æ·»åŠ æ–°é“¾æ¥åˆ°connectionsæˆåŠŸ: %d&quot;, sockfd);&#125;\n\nè®¾ç½®éé˜»å¡çš„ä»£ç å¾ˆç®€å•ï¼Œåœ¨å‰æ–‡å·²ç»æ¼”ç¤ºè¿‡äº†\nclass Util&#123;public:    static void SetNonBlock(int fd)    &#123;        int fl = fcntl(fd, F_GETFL);        fcntl(fd, F_SETFL, fl | O_NONBLOCK);    &#125;&#125;;\n\n5.ææ„åœ¨ææ„å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†listensocketå’Œepfdä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦å…³é—­ï¼Œå¹¶ææ„æ‰é“¾æ¥æ•°ç»„\n~TcpServer()&#123;    if (listensock_ != -1)        close(listensock_);    if (epfd_ != -1)        close(epfd_);    delete[] revs_;    // è¿˜éœ€è¦ææ„æ‰è¿æ¥æ± ä¸­å°šå­˜åœ¨çš„connectionå¯¹è±¡    for(auto&amp;c:connections_)&#123;        delete c.second;    &#125;&#125;\n\n6.è·å–æ–°è¿æ¥Acceptåœ¨è·å–æ–°è¿æ¥è¿™é‡Œï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä¸€ä¸ªæ­»å¾ªç¯æ¥è·å–ã€‚è¿™æ˜¯å› ä¸ºå¯¹äºlistensocketæ–‡ä»¶æè¿°ç¬¦è€Œè¨€ï¼Œåªè¦æ¥äº†ä¸€ä¸ªæ–°é“¾æ¥ï¼Œåœ¨ETæ¨¡å¼ä¸‹å°±ä¼šæç¤ºæˆ‘ä»¬ã€‚ä½†æœ‰å¯èƒ½ä¼šå‡ºç°æˆ‘ä»¬è¿˜æ²¡æœ‰æ¥å¾—åŠå–èµ°è¿™ä¸ªé“¾æ¥ï¼Œå°±åˆæ¥äº†ä¸€ä¸ªæ–°é“¾æ¥çš„æƒ…å†µï¼ˆå¯ä»¥ç®€åŒ–ç†è§£ä¸ºä¸€æ¬¡æ€§æ¥äº†ä¸¤ä¸ªé“¾æ¥ï¼‰\nè¿™æ—¶å€™å› ä¸ºETçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€æ¬¡æ€§å–èµ°æ‰€æœ‰é“¾æ¥ï¼›ä¸ºäº†é¿å…åœ¨Acceptçš„æ—¶å€™ï¼Œå› ä¸ºé“¾æ¥å·²ç»éƒ½è¢«å–èµ°äº†è€Œé˜»å¡ä½ï¼Œæˆ‘ä»¬éœ€è¦å°†listensocketè®¾ç½®ä¸ºéé˜»å¡ï¼›\n\nå…³äºæ–°é“¾æ¥ä¸ºä»€ä¹ˆåªå…³æ³¨è¯»äº‹ä»¶ï¼Œåœ¨æ³¨é‡Šä¸­æœ‰è¯´æ˜ï¼›\n\nå¯¹äºlistensocketæ¥è¯´ï¼Œè¿™ä¸ªAccepterå‡½æ•°å°±æ˜¯å®ƒçš„è¯»äº‹ä»¶å›è°ƒï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªConnection *connå¯¹è±¡ï¼Œå…¶æ˜¯ä¸ºäº†ä¸å…¶ä»–äº‹ä»¶å¤„ç†å‡½æ•°ç»Ÿä¸€ï¼ˆå› ä¸ºè¿™ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ä¸åœ¨Connectionç±»ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦è·å–ä¸€ä¸ªå¯¹è±¡æ‰èƒ½è®¿é—®åˆ°å®ƒçš„æˆå‘˜å˜é‡ï¼‰\nint Accepter(Connection *conn)&#123;    while (true)    &#123;        std::string clientip;        uint16_t clientport = 0;        int sockfd = Sock::Accept(conn-&gt;sock_, &amp;clientip, &amp;clientport);        if (sockfd &lt; 0)        &#123;            // æ¥æ”¶å‡½æ•°è¢«äº‹ä»¶æ‰“æ–­äº†            if (errno == EINTR)                continue;            // æœ¬æ¬¡æ•°æ®æ²¡æœ‰å‡†å¤‡å¥½ï¼Œå¯ä»¥ç†è§£ä¸ºæ¥æ”¶ç¼“å†²åŒºç©ºäº†            else if (errno == EAGAIN || errno == EWOULDBLOCK)                break;            else            &#123;                logMessage(WARNING, &quot;accept error&quot;);                return -1;            &#125;        &#125;        logMessage(DEBUG, &quot;get a new link: %d&quot;, sockfd);        // æ³¨æ„ï¼šé»˜è®¤æˆ‘ä»¬åªè®¾ç½®äº†è®©epollå¸®æˆ‘ä»¬å…³å¿ƒè¯»äº‹ä»¶ï¼Œæ²¡æœ‰å…³å¿ƒå†™äº‹ä»¶        // ä¸ºä»€ä¹ˆæ²¡æœ‰å…³æ³¨å†™äº‹ä»¶ï¼šå› ä¸ºæœ€å¼€å§‹çš„æ—¶å€™ï¼Œå†™ç©ºé—´ä¸€å®šæ˜¯å°±ç»ªçš„ï¼        // è¿è¡Œä¸­å¯èƒ½æ‰ä¼šå­˜åœ¨å†™æ¡ä»¶ä¸æ»¡è¶³ -- å†™ç©ºé—´è¢«å†™æ»¡äº†        AddConnection(sockfd, EPOLLIN | EPOLLET,                      std::bind(&amp;TcpServer::TcpRecver, this, std::placeholders::_1),                      std::bind(&amp;TcpServer::TcpSender, this, std::placeholders::_1),                      std::bind(&amp;TcpServer::TcpExcepter, this, std::placeholders::_1));    &#125;    return 0;&#125;\n\nEAGAIN or EWOULDBLOCK\tThe socket is marked nonblocking and the receive operation would block, or a receive timeout had been set and the timeout expired before data was received.  POSIX.1 allows either error to be returned for this case, and does not require these constants to have the same value, so  a  portable application should check for both possibilities.\n\n7.é“¾æ¥çš„äº‹ä»¶å¤„ç†å‡½æ•°å…¶ä»–é“¾æ¥çš„ä¸‰ä¸ªå¤„ç†å‡½æ•°åˆ†åˆ«æ˜¯TcpRever/TcpSender/TcpExcepter;\né¦–å…ˆï¼Œåœ¨å¤„ç†æŸä¸€ä¸ªé“¾æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¿è¯è¿™ä¸ªé“¾æ¥åœ¨å·²æœ‰çš„mapé‡Œé¢ï¼Œå¦åˆ™ä»£è¡¨è¿™ä¸ªé“¾æ¥å·²ç»è¢«å…³é—­æˆ–è€…å¼‚å¸¸é€€å‡ºäº†ï¼›åŒç†ï¼Œåœ¨å¼‚å¸¸å’Œå…³é—­é“¾æ¥çš„å¤„ç†æµç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†é“¾æ¥ä»mapä¸­åˆ é™¤\nbool IsExists(int sock)&#123;    auto iter = connections_.find(sock);    if (iter == connections_.end())        return false;    else        return true;&#125;\n\nè¯»å¯¹äºè¯»äº‹ä»¶è€Œè¨€æˆ‘ä»¬ä¹Ÿæ˜¯è¿›è¡Œå¾ªç¯è¯»å–ï¼Œè¯¥æ–‡ä»¶æè¿°ç¬¦ä¹Ÿéœ€è¦è¢«è®¾ç½®ä¸ºéé˜»å¡ã€‚è¯»å–çš„å†…å®¹æ‹¼æ¥åˆ°è¯¥Connectionå¯¹è±¡çš„è¾“å…¥ç¼“å†²åŒºstringä¸­ï¼›\nåœ¨è¯»å–å®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦åœ¨åè®®é‡Œé¢å®šä¹‰ä¸€ä¸ªæ ¹æ®åº”ç”¨å±‚åè®®å­—æ®µæ¥åˆ†ç¦»æŠ¥æ–‡çš„å‡½æ•°ï¼ˆé¿å…tcpçš„ç²˜åŒ…é—®é¢˜ï¼‰ï¼Œæœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªstringçš„æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„æˆå‘˜éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ï¼›\næœ€åï¼Œæˆ‘ä»¬ç›´æ¥ä¸€ä¸ªforå¾ªç¯ï¼Œé€šè¿‡è¯¥tcpserverå¯¹è±¡åœ¨åˆå§‹åŒ–æ—¶å€™è®¾ç½®çš„cb_å‡½æ•°å›è°ƒæŒ‡é’ˆï¼Œæ¥å¤„ç†æ¯ä¸€ä¸ªæŠ¥æ–‡ï¼ˆä¸ºæ¯ä¸€ä¸ªæŠ¥æ–‡æä¾›æœåŠ¡ï¼‰\nint TcpRecver(Connection *conn)&#123;    while (true)    &#123;        char buffer[1024];        ssize_t s = recv(conn-&gt;sock_, buffer, sizeof(buffer) - 1, 0);        if (s &gt; 0)        &#123;            buffer[s] = 0;            conn-&gt;inbuffer_ += buffer;        &#125;        else if (s == 0)        &#123;            logMessage(DEBUG, &quot;client quit&quot;);            conn-&gt;excepter_(conn);            break;        &#125;        else        &#123;            if (errno == EINTR) // æ¥æ”¶äº‹ä»¶è¢«æ‰“æ–­                continue;            // æ¥æ”¶ç¼“å†²åŒºç©ºäº†            else if (errno == EAGAIN || errno == EWOULDBLOCK)                break; // è·³å‡ºå¾ªç¯            else            &#123;                // å‡ºé”™äº†                logMessage(DEBUG, &quot;recv error: %d:%s&quot;, errno, strerror(errno));                conn-&gt;excepter_(conn);                break;            &#125;        &#125;    &#125;    // å°†æœ¬è½®å…¨éƒ¨è¯»å–å®Œæ¯•    std::vector&lt;std::string&gt; result;    PackageSplit(conn-&gt;inbuffer_, &amp;result);    for (auto &amp;message : result)    &#123;        cb_(conn, message);    &#125;    return 0;&#125;\n\nè¿™ä¸ªæ¡†æ¶çš„å¥½å¤„å°±åœ¨äºï¼Œä½ å¯ä»¥å•ç‹¬å®ç°ä¸åŒåè®®çš„æŠ¥æ–‡åˆ†ç¦»å‡½æ•°å’Œæ•°æ®æœåŠ¡å‡½æ•°ï¼Œè€Œä¸éœ€è¦é‡å†™TcpServerçš„å®ç°ï¼Œç›¸å½“äºè§£è€¦ï¼›\nå†™int TcpSender(Connection *conn)&#123;    while(true)    &#123;        ssize_t n = send(conn-&gt;sock_, conn-&gt;outbuffer_.c_str(), conn-&gt;outbuffer_.size(), 0);        if(n &gt; 0)        &#123;            // å»é™¤å·²ç»æˆåŠŸå‘é€çš„æ•°æ®            conn-&gt;outbuffer_.erase(0, n);        &#125;        else        &#123;            // å†™å…¥æ“ä½œè¢«æ‰“æ–­            if(errno == EINTR) continue;            // å†™å…¥ç¼“å†²åŒºæ»¡äº†ï¼Œæ²¡åŠæ³•ç»§ç»­å†™            else if(errno == EAGAIN || errno == EWOULDBLOCK) break;            else // å¼‚å¸¸            &#123;                conn-&gt;excepter_(conn);                logMessage(DEBUG, &quot;send error: %d:%s&quot;, errno, strerror(errno));                break;            &#125;        &#125;    &#125;    return 0;&#125;\n\næ³¨æ„ï¼Œè¿™é‡Œçš„å†™å…¥å¦‚æœé‡åˆ°(errno == EAGAIN || errno == EWOULDBLOCK) è¿™ä¸¤ç§æƒ…å†µï¼Œå¹¶ä¸èƒ½ç¡®ä¿è¾“å‡ºç¼“å†²åŒºä¸­çš„æ•°æ®å·²ç»è¢«å…¨éƒ¨å†™å…¥äº†ï¼›æœ‰å¯èƒ½æ˜¯å†™å…¥ç¼“å†²åŒºæ»¡äº†å¯¼è‡´æ— æ³•ç»§ç»­å†™å…¥ï¼›\nè¿™ç§iæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­outbufferæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™è¿˜æ˜¯éœ€è¦è®¾ç½®EPOLLOUTæ ‡è®°ä½ï¼Œå‘ŠçŸ¥epollç»§ç»­å¸®æˆ‘ä»¬å…³æ³¨å†™äº‹ä»¶ï¼ˆè¿™æ ·epollå°±ä¼šå‘ä¿¡æ¯å‘ŠçŸ¥Reactorï¼ŒReactorä¼šé‡æ–°è°ƒç”¨å†™å…¥å‡½æ•°ï¼Œç»§ç»­å†™å…¥ç¼“å†²åŒºçš„å‰©ä¸‹æ•°æ®ï¼‰è¿™ä¸ªæ“ä½œä¼šåœ¨ä¸»æ‰§è¡Œæµä¸­è¿›è¡Œç»Ÿä¸€åˆ¤æ–­\n// ä¸»æ‰§è¡Œæµconn-&gt;sender_(conn); // ä¸»æ‰§è¡Œæµè°ƒç”¨å‘é€å‡½æ•°// åˆ¤æ–­æœ¬æ¬¡æ˜¯å¦å‘å®Œæ¯•äº†ï¼Œæ²¡æœ‰å‘å®Œæ¯•è¿˜éœ€è¦ç»§ç»­å…³å¿ƒè¯»å†™if(conn-&gt;outbuffer_.empty()) conn-&gt;R_-&gt;EnableReadWrite(conn-&gt;sock_, true, false);else conn-&gt;R_-&gt;EnableReadWrite(conn-&gt;sock_, true, true);\n\n// æ‰“å¼€æˆ–è€…å…³é—­å¯¹äºç‰¹å®šsocketæ˜¯å¦è¦å…³å¿ƒè¯»æˆ–è€…å†™//- EnableReadWrite(sock, true, false); //åªå…³å¿ƒè¯»//- EnableReadWrite(sock, true, true);  //åŒæ—¶å…³å¿ƒè¯»å†™void EnableReadWrite(int sock, bool readable, bool writeable)&#123;    uint32_t event = 0;    event |= (readable ? EPOLLIN : 0);    event |= (writeable ? EPOLLOUT : 0);    Epoller::ModEvent(epfd_, sock, event);&#125;\n\nå¼‚å¸¸ä¸ºäº†ç»Ÿä¸€è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œåœ¨ä¸Šæ–‡ä¸­å½“æˆ‘ä»¬é‡åˆ°è¯»å†™å‡ºé”™çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›\nåœ¨è¿™ä¸ªå‡½æ•°ä½“å†…ï¼Œä¼šå°†é“¾æ¥ä»epollä¸­åˆ é™¤ã€å…³é—­é“¾æ¥ã€é‡Šæ”¾connectionå¯¹è±¡ã€å°†æ–‡ä»¶æè¿°ç¬¦ä»mapé‡Œé¢å‰”é™¤ï¼›\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€å®šè¦å…ˆå°†socketä»epollé‡Œé¢å‰”é™¤æ‰ï¼Œå†å…³é—­socketï¼\nint TcpExcepter(Connection *conn)&#123;    // 0. åˆ¤æ–­æœ‰æ•ˆæ€§    if(!IsExists(conn-&gt;sock_)) return -1;    // æ‰€æœ‰çš„æœåŠ¡å™¨å¼‚å¸¸ï¼Œéƒ½ä¼šè¢«å½’ç±»åˆ°è¿™é‡Œ    // 1. åˆ é™¤epollçš„ç›‘çœ‹    Epoller::DelEvent(epfd_, conn-&gt;sock_);    logMessage(DEBUG, &quot;remove epoll event!&quot;);    // 2. close    close(conn-&gt;sock_);    logMessage(DEBUG, &quot;close fd: %d&quot;, conn-&gt;sock_);    // 3. delete conn;    delete connections_[conn-&gt;sock_];    logMessage(DEBUG, &quot;delete connection object done&quot;);    // 4. erase conn;    connections_.erase(conn-&gt;sock_);    logMessage(DEBUG, &quot;erase connection from connections&quot;);    return 0;&#125;\n\n8.è¿è¡Œå¯¹äºTcpServerè€Œè¨€ï¼Œä¸€æ¬¡çš„è¿è¡Œå°±æ˜¯è°ƒç”¨ä¸€æ¬¡epoll_waitï¼Œå†æ ¹æ®äº‹ä»¶å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè°ƒç”¨ä¸åŒçš„äº‹ä»¶å¤„ç†å‡½æ•°\nvoid Dispatcher()&#123;    int n = Epoller::LoopOnce(epfd_, revs_, revs_num);    for (int i = 0; i &lt; n; i++)    &#123;        int sock = revs_[i].data.fd;        uint32_t revent = revs_[i].events;        // åˆ¤æ–­æ˜¯å¦å‡ºç°é”™è¯¯ï¼Œå¦‚æœå‡ºç°äº†é”™è¯¯ï¼Œé‚£å°±æŠŠEPOLLINå’ŒOUTéƒ½åŠ ä¸Š        // è¿™æ ·è¿™ä¸ªé“¾æ¥ä¼šè¿›å…¥ä¸‹é¢çš„å¤„ç†å‡½æ•°ï¼Œå¹¶åœ¨å¤„ç†å‡½æ•°ä¸­å‡ºç°å¼‚å¸¸        // å¤„ç†å‡½æ•°ä¸­å‡ºç°å¼‚å¸¸å›ç»Ÿä¸€è°ƒç”¨TcpExcpterå‡½æ•°        if(revent &amp; EPOLLHUP) revent |= (EPOLLIN|EPOLLOUT);        if(revent &amp; EPOLLERR) revent |= (EPOLLIN|EPOLLOUT);        if (revent &amp; EPOLLIN)        &#123;            if (IsExists(sock) &amp;&amp; connections_[sock]-&gt;recver_)                connections_[sock]-&gt;recver_(connections_[sock]);        &#125;        // å½“é“¾æ¥çš„å†™äº‹ä»¶è¢«æ¿€æ´»çš„æ—¶å€™ï¼Œåœ¨è¿™é‡Œå°±ä¼šè§¦å‘å†™äº‹ä»¶çš„å¤„ç†        // æ‰€ä»¥å¹¶ä¸éœ€è¦åœ¨recvé‡Œé¢ä¸»åŠ¨è°ƒç”¨å†™äº‹ä»¶å¤„ç†å‡½æ•°        // åªéœ€è¦å‘Šè¯‰epollè®©å®ƒå¸®æˆ‘ä»¬ç›‘æ§å†™äº‹ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨è¿™é‡Œè§¦å‘å†™æ“ä½œ        if (revent &amp; EPOLLOUT)        &#123;            if (IsExists(sock) &amp;&amp; connections_[sock]-&gt;sender_)                connections_[sock]-&gt;sender_(connections_[sock]);        &#125;    &#125;&#125;\n\næ•´ä¸ªæœåŠ¡å™¨è¿è¡Œèµ·æ¥ï¼Œå°±ä¸€ç›´è°ƒç”¨åˆ†å‘å‡½æ•°å°±OKå•¦~\nvoid Run()&#123;    while (true)    &#123;        Dispatcher();    &#125;&#125;\n\n6.2.5 ä¸»æ‰§è¡Œæµå¯¹äºä¸»æ‰§è¡Œæµè€Œè¨€ï¼Œè¦åšçš„å°±æ˜¯è·å–åˆ°å‘½ä»¤è¡Œå‚æ•°çš„ç«¯å£ï¼Œç„¶ååˆ›å»ºtcpserverå¯¹è±¡å¹¶ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°\n#include &quot;TcpServer.hpp&quot;#include &quot;Service.hpp&quot;#include &lt;memory&gt;using namespace std;static void usage(std::string process)&#123;    cerr &lt;&lt; &quot;\\nUsage: &quot; &lt;&lt; process &lt;&lt; &quot; port\\n&quot;         &lt;&lt; endl;&#125;int main(int argc, char *argv[])&#123;    if (argc != 2)    &#123;        usage(argv[0]);        exit(0);    &#125;    TcpServer svr(HandlerRequest, atoi(argv[1]));    svr.Run();    return 0;&#125;\n\näº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥åšä»»æ„å°è£…ï¼Œæ¥å®ç°ä½ è‡ªå·±æƒ³è¦çš„åŠŸèƒ½\nint HandlerRequest(Connection *conn, std::string &amp;message)&#123;    // beginhandleré‡Œé¢æ˜¯å…·ä½“çš„è°ƒç”¨é€»è¾‘ï¼Œcalculatoræ˜¯æœ¬æ¬¡äº‹åŠ¡å¤„ç†å‡½æ•°    return BeginHandler(conn, message, calculator);&#125;\n\nè¿™é‡Œå°±æ˜¯æˆ‘ä»¬å•ä¸ªå®Œæ•´æŠ¥æ–‡çš„å¤„ç†å‡½æ•°ï¼Œåœ¨tcprecveræ–¹æ³•é‡Œé¢è¢«è°ƒç”¨äº†ï¼›\næ ¹æ®ä¸Šæ–‡æè¿°çš„è°ƒç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šï¼Œè¿™é‡Œä¼ å…¥æ¥çš„messageè‚¯å®šæ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨å±‚æŠ¥æ–‡ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªå±äºæˆ‘ä»¬è‡ªå·±çš„åè®®å’Œåè®®ä¸­çš„æ•°æ®å¤„ç†å‡½æ•°å°±OKäº†ï¼\nint BeginHandler(Connection *conn, std::string &amp;message, service_t service)&#123;    // messageä¸€å®šæ˜¯ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å¯¹å®ƒè¿›è¡Œäº†è§£ç     Request req;    // ååºåˆ—åŒ–ï¼Œè¿›è¡Œå¤„ç†çš„é—®é¢˜    if (!Parser(message, &amp;req))    &#123;        // å†™å›é”™è¯¯æ¶ˆæ¯        return -1;        // å¯ä»¥ç›´æ¥å…³é—­è¿æ¥        // conn-&gt;excepter_(conn);    &#125;    // ä¸šåŠ¡é€»è¾‘    Response resp = service(req);    std::cout &lt;&lt; req.x &lt;&lt; &quot; &quot; &lt;&lt; req.op &lt;&lt; &quot; &quot; &lt;&lt; req.y &lt;&lt; std::endl;    std::cout &lt;&lt; resp.code &lt;&lt; &quot; &quot; &lt;&lt; resp.result &lt;&lt; std::endl;    // åºåˆ—åŒ–    std::string sendstr;    Serialize(resp, &amp;sendstr);    // å¤„ç†å®Œæ¯•çš„ç»“æœï¼Œå‘é€å›ç»™client    conn-&gt;outbuffer_ += sendstr;    conn-&gt;sender_(conn);    if(conn-&gt;outbuffer_.empty()) conn-&gt;R_-&gt;EnableReadWrite(conn-&gt;sock_, true, false);    else conn-&gt;R_-&gt;EnableReadWrite(conn-&gt;sock_, true, true);    std::cout &lt;&lt; &quot;--- end ---&quot; &lt;&lt; std::endl;    return 0;&#125;\n\n6.2.6 åè®®å’Œæ•°æ®å¤„ç†ä¸‹é¢æä¾›ä¸€ä¸ªæœ€åŸºç¡€çš„è®¡ç®—å™¨åè®®ï¼Œè¿™ä¸ªåè®®çš„å¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨telnetå°±æ¨¡æ‹Ÿå‡ºè¯·æ±‚ï¼Œæ— éœ€å†™ä¸€ä¸ªtcpå®¢æˆ·ç«¯ã€‚\nx æ“ä½œç¬¦ y#\n\nè¿™ä¸ªåè®®ä¸­ï¼Œæ¯ä¸ªæœ‰æ•ˆæ•°æ®ä¸­éƒ½ä¼šå¸¦ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¹¶ä»¥#ä½œä¸ºå•ä¸ªæŠ¥æ–‡çš„ç»“å°¾ï¼›\nå“åº”å’Œè¯·æ±‚çš„ç»“æ„ä½“æ ¼å¼ä¹Ÿéå¸¸ç®€å•ï¼Œå“åº”é‡Œé¢æ˜¯çŠ¶æ€ç å’Œè®¡ç®—ç»“æœï¼›æˆ‘ä»¬åœ¨åè®®ä¸­æ·»åŠ åºåˆ—åŒ–å’Œååºåˆ—åŒ–å‡½æ•°å°±å¯ä»¥å°†å“åº”å’Œè¯·æ±‚ç»“æ„ä½“è½¬æˆå­—ç¬¦ä¸²\nstruct Request&#123;    int x;    int y;    char op;&#125;;struct Response&#123;    int code;    int result;&#125;;\n\nå®Œæ•´ä»£ç \n#pragma once#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;cstring&gt;#include &lt;string&gt;#include &lt;cstdio&gt;#define SEP &#x27;#&#x27;#define SEP_LEN sizeof(SEP)#define CRLF &quot;\\r\\n&quot;#define CRLF_LEN strlen(CRLF)#define SPACE &quot; &quot;#define SPACE_LEN strlen(SPACE)// åˆ†ç¦»ç‹¬ç«‹æŠ¥æ–‡void PackageSplit(std::string &amp;inbuffer, std::vector&lt;std::string&gt; *result)&#123;    while (true)    &#123;        std::size_t pos = inbuffer.find(SEP);        if (pos == std::string::npos)            break;        result-&gt;push_back(inbuffer.substr(0, pos));        inbuffer.erase(0, pos + SEP_LEN);    &#125;&#125;struct Request&#123;    int x;    int y;    char op;&#125;;struct Response&#123;    int code;    int result;&#125;;bool Parser(std::string &amp;in, Request *req)&#123;    // 1 + 1, 2 * 4, 5 * 9, 6 *1    std::size_t spaceOne = in.find(SPACE);    if (std::string::npos == spaceOne)        return false;    std::size_t spaceTwo = in.rfind(SPACE);    if (std::string::npos == spaceTwo)        return false;    std::string dataOne = in.substr(0, spaceOne);    std::string dataTwo = in.substr(spaceTwo + SPACE_LEN);    std::string oper = in.substr(spaceOne + SPACE_LEN, spaceTwo - (spaceOne + SPACE_LEN));    if (oper.size() != 1)        return false;    // è½¬æˆå†…éƒ¨æˆå‘˜    req-&gt;x = atoi(dataOne.c_str());    req-&gt;y = atoi(dataTwo.c_str());    req-&gt;op = oper[0];    return true;&#125;void Serialize(const Response &amp;resp, std::string *out)&#123;    std::string ec = std::to_string(resp.code);    std::string res = std::to_string(resp.result);    *out = ec;    *out += SPACE;    *out += res;    *out += CRLF;&#125;\n\nåœ¨service.hppé‡Œé¢åˆ™æ˜¯æ•°æ®å¤„ç†çš„è®¡ç®—å‡½æ•°ï¼Œé€šè¿‡æˆ‘ä»¬ä¼ å…¥çš„è¯·æ±‚ï¼Œè®¡ç®—å‡ºç»“æ„å¹¶æ„é€ å“åº”è¿”å›ç»™ç”¨æˆ·\n#pragma once#include &quot;Protocol.hpp&quot;#include &lt;functional&gt;using service_t = std::function&lt;Response (const Request &amp;req)&gt;;static Response calculator(const Request &amp;req)&#123;    Response resp = &#123;0, 0&#125;;    switch (req.op)    &#123;    case &#x27;+&#x27;:        resp.result = req.x + req.y;        break;    case &#x27;-&#x27;:        resp.result = req.x - req.y;        break;    case &#x27;*&#x27;:        resp.result = req.x * req.y;        break;    case &#x27;/&#x27;:    &#123; // x_ / y_        if (req.y == 0)            resp.code = -1; // -1. é™¤0        else            resp.result = req.x / req.y;    &#125;    break;    case &#x27;%&#x27;:    &#123; // x_ / y_        if (req.y == 0)            resp.code = -2; // -2. æ¨¡0        else            resp.result = req.x % req.y;    &#125;    break;    default:        resp.code = -3; // -3: éæ³•æ“ä½œç¬¦        break;    &#125;    return resp;&#125;\n\n6.2.7 æµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æœåŠ¡å¯åŠ¨äº†ä¹‹åï¼ŒæˆåŠŸæ¥æ”¶äº†ä¸€ä¸ªé“¾æ¥ï¼Œå¹¶è®¡ç®—å‡ºäº†æˆ‘ä»¬å‘é€çš„ç»“æœ\n\nå¤šä¸ªé“¾æ¥ä¹Ÿä¸åœ¨è¯ä¸‹ï¼\n\nThe endå¤šè·¯è½¬æ¥è¿™éƒ¨åˆ†æ˜¯linuxæœåŠ¡å™¨æœ€é‡è¦çš„ä¸€éƒ¨åˆ†çŸ¥è¯†ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æœåŠ¡å™¨éƒ½æŠ›å¼ƒäº†æœ€ä¼ ç»Ÿçš„ä¸€ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ªé“¾æ¥è¿™æ ·çš„æ–¹å¼ï¼Œè€Œé‡‡ç”¨äº†å¤šè·¯è½¬æ¥æ¥å®ç°å¯¹å¤§é‡è¿›ç¨‹çš„ç»´æŠ¤ï¼›\næœ¬æ–‡æ˜¯å­¦ä¹ é˜¶æ®µçš„äº§ç‰©ï¼Œæœ‰é”™è¯¯åœ¨æ‰€éš¾å…ï¼Œè¯·å¤§ä½¬ä»¬æŒ‡æ•™ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","nginx"]},{"title":"ã€Hexoã€‘hexo-butterflyä¸»é¢˜æ·»åŠ è£…å¤‡å±•ç¤ºé¡µé¢","url":"/posts/2383339565/","content":"åœ¨ç¿»å¼€å¾€çš„æ—¶å€™çœ‹åˆ°äº†ä¸€ä½è€å“¥çš„åšå®¢é‡Œé¢æ­£å¥½æœ‰è¿™ä¸ªæ•™ç¨‹ï¼Œæ•´äº†ä¸€ä¸‹å‘ç°æ•ˆæœè¿˜ä¸é”™ï¼\n\nHexoçš„Butterflyé­”æ”¹æ•™ç¨‹ï¼šæˆ‘çš„è£…å¤‡ï¼Œåˆ†äº«ä½ åœ¨ç”¨çš„è®¾å¤‡ | å¼ æ´ªHeo\nHexoåšå®¢æ·»åŠ è‡ªå®šä¹‰csså’Œjsæ–‡ä»¶ | Leonus\n\næ³¨ï¼šæ–‡ä¸­çš„ä»£ç éƒ¨åˆ†å‡å¼•ç”¨è‡ªåŸåšå®¢\næ·»åŠ æ–‡ä»¶åˆ°hexo-butterflyä¸»é¢˜ä¸­å‰ç½®æ¡ä»¶é¦–å…ˆï¼Œé­”æ”¹hexoä¸»é¢˜æœ€å¥½æ˜¯ç”¨gitæ–¹å¼å®‰è£…çš„ä¸»é¢˜ï¼Œå³ä¸»é¢˜çš„æ–‡ä»¶æ˜¯åœ¨ä½ çš„hexoç›®å½•çš„themesæ–‡ä»¶å¤¹ä¸‹ï¼Œè€Œä¸æ˜¯ç”¨npmå®‰è£…çš„ä¸»é¢˜ï¼ˆé‚£æ ·å®‰è£…çš„ä¸»é¢˜æ˜¯åœ¨node_modulesä¸‹ï¼Œæ¢è®¾å¤‡æˆ–è€…æ›´æ–°ä¸»é¢˜çš„æ—¶å€™ä¿®æ”¹ä¼šè¢«è¦†ç›–ï¼‰\næ·»åŠ ç›¸å…³æ–‡ä»¶æ·»åŠ pugæ–‡ä»¶åœ¨themes/butterfly/layout/includes/page/equipment.pugä¸­å†™å…¥å¦‚ä¸‹å†…å®¹\n#equipment  if site.data.equipment    each i in site.data.equipment      .equipment-item        h2.equipment-item-title= i.class_name        .equipment-item-description= i.description        .equipment-item-content          each item, index in i.equipment_list            .equipment-item-content-item              .equipment-item-content-item-cover                img.equipment-item-content-item-image(data-lazy-src=url_for(item.image) onerror=`this.onerror=null;this.src=&#x27;` + url_for(theme.error_img.flink) + `&#x27;` alt=item.name)              .equipment-item-content-item-info                .equipment-item-content-item-name= item.name                .equipment-item-content-item-specification= item.specification                .equipment-item-content-item-description= item.description                .equipment-item-content-item-toolbar                  if item.link.includes(&#x27;https://&#x27;) || item.link.includes(&#x27;http://&#x27;)                    a.equipment-item-content-item-link(href= item.link, target=&#x27;_blank&#x27;) è¯¦æƒ…                  else                    a.equipment-item-content-item-link(href= item.link, target=&#x27;_blank&#x27;) æŸ¥çœ‹æ–‡ç« \n\n\næ·»åŠ pugæ³¨å†Œåœ¨themes\\butterfly\\layout\\page.pugä¸­æ·»åŠ å¦‚ä¸‹ä¿®æ”¹\nwhen &#x27;equipment&#x27;  include includes/page/equipment.pug\n\næˆ‘çš„butterflyä¸»é¢˜æ˜¯æœªé­”æ”¹è¿‡çš„4.9.0ç‰ˆæœ¬ï¼Œæ·»åŠ åçš„page.pugæ–‡ä»¶å¦‚ä¸‹\nextends includes/layout.pugblock content  #page    if top_img === false      h1.page-title= page.title    case page.type      when &#x27;tags&#x27;        include includes/page/tags.pug      when &#x27;link&#x27;        include includes/page/flink.pug      when &#x27;categories&#x27;        include includes/page/categories.pug      when &#x27;equipment&#x27;        include includes/page/equipment.pug      default        include includes/page/default-page.pug    if page.comments !== false &amp;&amp; theme.comments &amp;&amp; theme.comments.use      - var commentsJsLoad = true      !=partial(&#x27;includes/third-party/comments/index&#x27;, &#123;&#125;, &#123;cache: true&#125;)\n\n\næ·»åŠ cssæ–‡ä»¶å’Œå¼•ç”¨åœ¨sourceä¸­åˆ›å»ºä¸€ä¸ªequipmentæ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿å®šä½æ–°æ·»åŠ æ–‡ä»¶ã€‚åœ¨equipmentæ–‡ä»¶å¤¹ä¸­æ·»åŠ equipment.cssæ–‡ä»¶ã€‚\nè¯¥æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ä¸ºsource/equipment/equipment.cssï¼Œå†…å®¹å¦‚ä¸‹\n/* æˆ‘çš„è£…å¤‡ */.equipment-item-content &#123;    display: flex;    flex-direction: row;    flex-wrap: wrap;    margin: 0 -8px;  &#125;  .equipment-item-content-item &#123;    width: calc(25% - 12px);    border-radius: 12px;    border: var(--style-border-always);    overflow: hidden;    margin: 8px 6px;    background: var(--heo-card-bg);    box-shadow: var(--heo-shadow-border);    min-height: 400px;    position: relative;  &#125;  @media screen and (max-width: 1200px) &#123;    .equipment-item-content-item &#123;      width: calc(50% - 12px);    &#125;  &#125;  @media screen and (max-width: 768px) &#123;    .equipment-item-content-item &#123;      width: 100%;    &#125;  &#125;  .equipment-item-content-item-info &#123;    padding: 8px 16px 16px 16px;    margin-top: 12px;  &#125;  .equipment-item-content-item-name &#123;    font-size: 18px;    font-weight: bold;    line-height: 1;    margin-bottom: 8px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;    width: fit-content;  &#125;  .equipment-item-content-item-specification &#123;    font-size: 12px;    color: var(--heo-secondtext);    line-height: 1;    margin-bottom: 12px;    white-space: nowrap;    overflow: hidden;    text-overflow: ellipsis;  &#125;  .equipment-item-content-item-description &#123;    line-height: 20px;    color: var(--heo-secondtext);    height: 60px;    display: -webkit-box;    overflow: hidden;    -webkit-line-clamp: 3;    -webkit-box-orient: vertical;    font-size: 14px;  &#125;  a.equipment-item-content-item-link &#123;    font-size: 12px;    background: var(--heo-gray-op);    padding: 4px 8px;    border-radius: 8px;    cursor: pointer;  &#125;  a.equipment-item-content-item-link:hover &#123;    background: var(--heo-main);    color: var(--heo-white);  &#125;  h2.equipment-item-title &#123;    line-height: 1;  &#125;  .equipment-item-description &#123;    line-height: 1;    margin: 4px 0 8px 0;    color: var(--heo-secondtext);  &#125;  .equipment-item-content-item-cover &#123;    width: 100%;    height: 200px;    background: var(--heo-secondbg);    display: flex;    justify-content: center;  &#125;  img.equipment-item-content-item-image &#123;    object-fit: cover;    height: 100%;  &#125;  div#equipment &#123;    margin-top: 26px;  &#125;  .equipment-item-content-item-toolbar &#123;    display: flex;    justify-content: space-between;    position: absolute;    bottom: 12px;    left: 0;    width: 100%;    padding: 0 16px;  &#125;  a.bber-reply &#123;    cursor: pointer;  &#125;\n\nåœ¨butterflyçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ cssçš„å¼•ç”¨ï¼Œè¿™é‡Œæˆ‘æ·»åŠ åˆ°äº†headéƒ¨åˆ†ä¸­\ninject:  head:    # è£…å¤‡é¡µé¢çš„css    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/equipment/equipment.css?1&quot;&gt;\n\n\næ·»åŠ indexæ–‡ä»¶åœ¨source/equipmentä¸­æ·»åŠ index.mdæ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹\n---title: æˆ‘çš„è£…å¤‡date: 2020-07-22 00:45:12aside: falsetype: equipment---\n\nè¿™é‡Œçš„æ ‡é¢˜å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹ã€‚\næ·»åŠ dataæ–‡ä»¶ï¼ˆé…ç½®ï¼‰éšåå°±æ˜¯dataæ–‡ä»¶çš„æ·»åŠ äº†ï¼Œè¿™éƒ¨åˆ†å’Œlinké‡Œé¢çš„å‹é“¾é…ç½®å¾ˆç±»ä¼¼ã€‚\nåœ¨source/dataæ–‡ä»¶å¤¹ä¸‹æ·»åŠ equipment.ymlæ–‡ä»¶ï¼Œå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š\n- class_name: ç”Ÿäº§åŠ›  description: æå‡è‡ªå·±ç”Ÿäº§æ•ˆç‡çš„ç¡¬ä»¶è®¾å¤‡  equipment_list:    - name: ç¿»æ–° MacBookPro      specification: M1Pro 32G / 1TB      description: å±å¹•æ˜¾ç¤ºæ•ˆæœå¥½ã€è‰²å½©å‡†ç¡®ã€å¯¹æ¯”åº¦å¼ºã€æ€§èƒ½å¼ºåŠ²ã€ç»­èˆªä¼˜ç§€ã€‚å¯ä»¥ç”¨æ¥å¼€å‘å’Œè®¾è®¡ã€‚      image: https://p.zhheo.com/YnW8cc2150681686120255749.png!cover      link: https://blog.zhheo.com/p/daebc472.html    - name: iPhone 13 Pro      specification: ç™½è‰² / 256G      description: ç¬¬ä¸€ä»£æ”¯æŒpromotionçš„iPhoneï¼ŒA15æ€§èƒ½ä¼˜ç§€ã€‚      image: https://p.zhheo.com/TofzQM2219061686120261484.png!cover      link: https://www.apple.com/by/iphone-13-pro/    - name: ç±³ç‰©å¤šæ¨¡é”®ç›˜85      specification: æ— çº¿è“ç‰™      description: ä¸€æ¬¾å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ªè®¾å¤‡çš„é”®ç›˜ï¼Œé€‚é…windowså’Œmacï¼ŒæŒ‰é”®ä¸­é—´ç©ºéš™åˆé€‚ï¼Œåœ†å½¢æŒ‰é”®æ¯”è¾ƒå¥½çœ‹ã€‚      image: https://p.zhheo.com/1OXX4d2179068168614817390.png!cover      link: https://item.jd.com/100012980718.html- class_name: å‡ºè¡Œ  description: ç”¨æ¥å‡ºè¡Œçš„å®ç‰©åŠè®¾å¤‡  equipment_list:    - name: èˆªå®‡ä¹‹æ˜ŸåŒè‚©åŒ…      specification: æ ‡å‡†ç‰ˆ      description: é€ å‹ç‚«é…·ï¼ŒåŒ…çš„å®¹é‡éå¸¸å¤§ï¼Œè¿˜æœ‰é­”æœ¯è´´ä½ç½®ï¼Œæˆ‘è´´ä¸Šäº†é¸¡å“¥çš„å¤´åƒã€‚      image: https://p.zhheo.com/20jaBU2179061686121157367.png!cover      link: https://detail.meizu.com/item/pasasjb.html    - name: é­…æ—é‡å¡‘æ–œæŒåŒ…      specification: æ ‡å‡†ç‰ˆ      description: ä¸€æ¬¾è½»ä¾¿å°å·§çš„æ–œæŒåŒ…ï¼Œè™½ç„¶ä½“ç§¯æ¯”è¾ƒå°ï¼Œèƒ½æ”¾çš„ä¸œè¥¿å°‘ï¼Œä½†æ˜¯éå¸¸å¥½çœ‹ã€‚      image: https://p.zhheo.com/wCvvZ82359068686121235468.png!cover      link: https://detail.meizu.com/item/pandaerxkb.html    - name: ç´ ä¹W12 ç£å¸å……ç”µå®      specification: å¸ƒæœ—ç†Š      description: å°ºå¯¸éå¸¸çš„å°ï¼Œåœ¨å¸13proçš„æ—¶å€™æ²¡æœ‰ä»»ä½•å¤šä½™å‡ºæ¥çš„éƒ¨åˆ†ã€‚æ”¯æŒlightingå……ç”µã€‚      image: https://p.zhheo.com/76rbNh2049068686121144539.png!cover      link: https://item.jd.com/100045568421.html\n\næ³¨æ„ï¼Œè¿™é‡Œé¢çš„å›¾ç‰‡é“¾æ¥éƒ½æ˜¯æºåšä¸»heoçš„åšå®¢é“¾æ¥ï¼Œå®ƒä»¬éƒ½æœ‰é˜²ç›—é“¾ï¼Œæ‰€ä»¥åœ¨ä½ çš„æœ¬åœ°æµ‹è¯•ä¸­åº”è¯¥æ˜¯æ— æ³•è®¿é—®è¿™äº›å›¾ç‰‡çš„ï¼Œè¿™éƒ½æ˜¯æ­£å¸¸æƒ…å†µã€‚ä½ åº”è¯¥æ ¹æ®è‡ªå·±çš„éœ€è¦å°†å…¶æ›¿æ¢æˆä½ è‡ªå·±çš„å›¾ç‰‡ã€‚\næ•ˆæœæ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè™½ç„¶æ²¡æœ‰åŸåšä¸»ä½¿ç”¨çš„ä¸»é¢˜ä¸­é‚£ä¹ˆç‚«é…·ï¼Œä½†ä½œä¸ºä¸€ä¸ªå±•ç¤ºé¡µé¢è‚¯å®šæ˜¯å¤Ÿç”¨å•¦ï¼\n\nè¿™é‡Œæˆ‘å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ•´ä¸ªæ¡†æ¡†æ²¡æœ‰æè¾¹ï¼Œè¾¹ç•Œæ„Ÿå¾ˆå·®ï¼Œç”šè‡³è¯´çœ‹ä¸åˆ°å“ªé‡Œæ˜¯è¾¹ç•Œã€‚ä¸ºäº†æ›´å¥½çš„è¾¨è®¤æ¯ä¸€ä¸ªæ¡†æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹åŸåšä¸»çš„cssæ–‡ä»¶\n.equipment-item-content-item&#123;\tborder: 2px solid #585858;&#125;\n\nå°†åŸæœ¬çš„cssæ–‡ä»¶ä¸­å¦‚ä¸Šéƒ¨åˆ†é‡Œé¢çš„borderä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œé¢œè‰²æ ¹æ®ä½ çš„å–œå¥½è°ƒæ•´ã€‚æœ‰äº†æè¾¹ä¹‹åï¼Œçœ‹èµ·æ¥ä¼šèˆ’æœä¸€äº›ï¼\n\næ”¹æˆæˆ‘è‡ªå·±çš„å›¾ç‰‡åçš„æœ€ç»ˆæ•ˆæœ\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo","åšå®¢"]},{"title":"ã€ç½‘ç»œã€‘IPç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚","url":"/posts/3482559497/","content":"IPåè®®è¯¦è§£\n\n\n1.æ¦‚å¿µ1.1 å››å±‚æ¨¡å‹\nåº”ç”¨å±‚ï¼šè§£å†³å¦‚ä½•ä¼ è¾“æ•°æ®ï¼ˆä¾ç…§ä»€ä¹ˆæ ¼å¼&#x2F;åè®®å¤„ç†æ•°æ®ï¼‰çš„é—®é¢˜\nä¼ è¾“å±‚ï¼šè§£å†³å¯é æ€§é—®é¢˜\nç½‘ç»œå±‚ï¼šæ•°æ®å¾€å“ªé‡Œä¼ ï¼Œæ€ä¹ˆæ‰¾åˆ°ç›®æ ‡ä¸»æœº\næ•°æ®é“¾è·¯å±‚ï¼ˆç‰©ç†å±‚ï¼‰ï¼šæ•°æ®åœ¨ç‰©ç†ç¡¬ä»¶å±‚é¢ä¸Šä¼ è¾“\n\nç½‘ç»œå±‚çš„IPåè®®ï¼Œå°±æ˜¯è®©ç½‘ç»œï¼Œæ‹¥æœ‰å°†æ•°æ®ä»Aä¸»æœºå‘é€åˆ°Bä¸»æœºçš„èƒ½åŠ›ã€‚\n\næ³¨æ„ï¼šæ‹¥æœ‰æ­¤èƒ½åŠ›ï¼Œå¹¶ä¸ä»£è¡¨æ¯æ¬¡éƒ½èƒ½æˆåŠŸé€è¾¾ï¼ï¼ˆå³å¯é æ€§é100%ï¼‰\n\nè€Œå¤±è´¥çš„æ—¶å€™ï¼Œå°±éœ€è¦ä¼ è¾“å±‚æ¥è·å–å‘ç”Ÿé”™è¯¯çš„åŸå› ï¼Œå¹¶è¿›è¡Œé”™è¯¯é‡ä¼ æˆ–è€…è¶…æ—¶é‡ä¼ ç­‰æ“ä½œã€‚\næ‰€ä»¥ï¼Œåœ¨ä»ç½‘ç»œå±‚è·å–åˆ°ä¿¡æ¯æˆåŠŸé€è¾¾åˆ°å¯¹æ–¹çš„åé¦ˆä¹‹å‰ï¼Œä¼ è¾“å±‚éœ€è¦æš‚æ—¶ä¿ç•™å·²ç»å‘é€çš„æ•°æ®ã€‚å¦‚æœç½‘ç»œå±‚å‘é€å¤±è´¥äº†ï¼Œä¼ è¾“å±‚éœ€è¦è¿›è¡Œé‡å‘æ“ä½œï¼Œä»¥ä¿è¯å¯é æ€§ã€‚\n\n1.2 ä¸»æœºã€è·¯ç”±å™¨ã€èŠ‚ç‚¹\nä¸»æœºï¼šæ‹¥æœ‰IPåœ°å€ï¼Œä½†ä¸è¿›è¡Œè·¯ç”±æ§åˆ¶çš„è®¾å¤‡\nè·¯ç”±å™¨ï¼šæ‹¥æœ‰IPåœ°å€ï¼Œå¹¶è¿›è¡Œè·¯ç”±æ§åˆ¶çš„è®¾å¤‡\nèŠ‚ç‚¹ï¼šä¸»æœºå’Œè·¯ç”±å™¨çš„ç»Ÿç§°\n\n2.IPæŠ¥æ–‡2.1 æŠ¥æ–‡ç»“æ„IPåè®®çš„æŠ¥æ–‡ä¸TCPçš„æŠ¥æ–‡æœ‰ä¸€å®šç¨‹åº¦ä¸Šçš„ç›¸ä¼¼\nä¸‹å›¾ä¸ºIPV4ä¸­æŠ¥æ–‡çš„æ ¼å¼ï¼ˆIPV6çš„æŠ¥æ–‡å’Œä¸‹å›¾æ˜¯ä¸åŒçš„ï¼‰\n\nå¯¹å›¾ä¸­é¦–éƒ¨å­—æ®µçš„è§£æå¦‚ä¸‹ï¼š\n\nå››ä½ç‰ˆæœ¬å·ï¼šæŒ‡å®šIPåè®®çš„ç‰ˆæœ¬ï¼ŒIPV4æ¥è¯´å°±æ˜¯4ï¼›\nå››ä½é¦–éƒ¨é•¿åº¦ï¼šIPæŠ¥å¤´çš„é•¿åº¦ï¼Œå’ŒTCPçš„å®šä¹‰ä¸€æ ·ï¼Œæ ‡å‡†é•¿åº¦éœ€è¦ç”¨å››ä½é¦–éƒ¨é•¿åº¦ * 4å­—èŠ‚ï¼Œå³æœ€å¤§æŠ¥å¤´é•¿åº¦ä¸º15*4=60å­—èŠ‚ï¼›\nå…«ä½æœåŠ¡ç±»å‹ï¼ˆåŒºåˆ†æœåŠ¡ï¼‰ï¼šåŒ…å«3ä½ä¼˜å…ˆæƒå­—æ®µï¼ˆå·²ç»å¼ƒç”¨ï¼‰ã€4ä½TOSå­—æ®µå’Œ1ä½ä¿ç•™å­—æ®µï¼ˆå¿…é¡»ç½®ä¸º0ï¼‰\nå››ä½TOSåˆ†åˆ«è¡¨ç¤ºï¼šæœ€å¤§ååé‡ã€æœ€é«˜å¯é æ€§ã€æœ€å°æˆæœ¬ã€æœ€å°å»¶æ—¶ã€‚åªèƒ½å››é€‰ä¸€ï¼Œéœ€è¦æ ¹æ®å…·ä½“ä¼ è¾“å±‚çš„åè®®è¦æ±‚è¿›è¡Œé€‰æ‹©ï¼›\nåªæœ‰åŒºåˆ†æœåŠ¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå­—æ®µæ‰ä¼šå¯ç”¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¸ä½¿ç”¨è¿™ä¸ªå­—æ®µï¼›\n\n\nåå…­ä½æ€»é•¿åº¦ï¼šåŒ…æ‹¬æŠ¥å¤´çš„æ•´ä¸ªæŠ¥æ–‡çš„é•¿åº¦ï¼Œå‡å»å››ä½é¦–éƒ¨é•¿åº¦ä»£è¡¨çš„IPçš„æŠ¥å¤´é•¿åº¦ï¼Œå°±èƒ½å¾—å‡ºæŠ¥æ–‡ä¸­æ•°æ®å­—æ®µçš„é•¿åº¦ï¼Œæœ€å¤§å€¼ä¸º65535ã€‚\nåå…­ä½é¦–éƒ¨æ ¡éªŒå’Œï¼šä½¿ç”¨å› ç‰¹ç½‘æ£€éªŒå’Œæ¥æ£€æµ‹æ•°æ®æ˜¯å¦æŸåï¼ˆæ¯”CRCç®€å•ï¼‰ï¼›\nå…«ä½åè®®ï¼šä¸Šå±‚åè®®ç±»å‹ï¼ˆæ¯”å¦‚TCPã€UDPç­‰ï¼‰è§£å†³å¦‚ä½•å‘ä¸Šå±‚äº¤ä»˜çš„é—®é¢˜ï¼›\nå…«ä½ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ï¼šç”¨äºæ§åˆ¶IPæŠ¥æ–‡èƒ½åœ¨ç½‘ç»œå±‚ä¼ è¾“çš„æ—¶é—´ï¼ˆç”Ÿå‘½å‘¨æœŸçš„é™åˆ¶ï¼‰\næ¯”å¦‚æœ‰äº›æŠ¥æ–‡ç”±äºè·¯ç”±æ—¶å‡ºç°äº†é”™è¯¯ï¼Œé™·å…¥äº†è·¯ç”±çš„æ­»å¾ªç¯ï¼›äº¦æˆ–è€…æ˜¯è·¯ç”±ç¨‹åºå‡ºç°äº†BUGï¼Œå¯¼è‡´æ²¡åŠæ³•è¢«æ­£å¸¸è½¬å‘åˆ°æ­£ç¡®çš„ä¸»æœºä¸Šï¼›è¿˜æœ‰è·¯ç”±è¶…æ—¶çš„é—®é¢˜ã€‚æ­¤æ—¶è¿™ä¸ªå‡ºé”™çš„æŠ¥æ–‡å°±ä¼šåœ¨è·¯ç”±é‡Œé¢é•¿æ—¶é—´æ¸¸ç¦»è€Œæ²¡åŠæ³•æŠµè¾¾ç›®çš„åœ°ï¼ˆå¥½æ¯”å†…å­˜æ³„éœ²ï¼‰ã€‚\nè§„å®šäº†TTLä¹‹åï¼Œå¯ä»¥åœ¨IPæŠ¥å¤´ä¸­ä¸­è®°å½•æŠ¥æ–‡çš„ç”Ÿå‘½å‘¨æœŸæ—¶é—´ï¼Œå½“æŠ¥æ–‡è½¬å‘çš„è€—æ—¶å·²ç»å¤§äºè¿™ä¸ªTTLä¹‹åï¼Œå°±å°†è¿™ä¸ªæŠ¥æ–‡ä¸¢å¼ƒã€‚æœ€å¤§ç”Ÿå­˜å‘¨æœŸä¸º255ç§’ï¼›\næœ€åˆæ˜¯ä»¥IPæ•°æ®æŠ¥ä¸­è¯¥å­—æ®µçš„å€¼å‡å»æŠ¥æ–‡åœ¨å½“å‰ä¸»æœºè€—è´¹çš„æ—¶é—´ï¼Œè‹¥ç»“æœä¸ä¸º0åˆ™è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒï¼›\nç°åœ¨ä»¥è·³æ•°ä¸ºå•ä½ï¼Œè·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥çš„æ—¶å€™ï¼Œå°†è¯¥å­—æ®µå€¼å‡ä¸€ï¼Œå¦‚æœå‡ä¸€åä¸ä¸º0åˆ™è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒ\n\n\nä¸‰åäºŒä½æºåœ°å€å’Œä¸‰åäºŒä½ç›®æ ‡åœ°å€ï¼šè¡¨ç¤ºå‘é€ç«¯IPå’Œæ¥æ”¶ç«¯IP\né€‰é¡¹å­—æ®µï¼šä¸å®šé•¿ï¼Œæœ€å¤š40å­—èŠ‚ï¼ˆè¿™æ˜¯å› ä¸ºé¦–éƒ¨é»˜è®¤æ˜¯20å­—èŠ‚ï¼Œå†åŠ ä¸Šé¦–éƒ¨é•¿åº¦æœ€å¤šåªèƒ½è¡¨ç¤º60ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥é€‰é¡¹å­—æ®µå°±æ˜¯ 60-20=40å­—èŠ‚ï¼‰\næ­¤å¤„çœç•¥äº†æ ‡è¯†ã€æ ‡å¿—ã€ç‰‡åç§»å­—æ®µï¼Œä¼šåœ¨åæ–‡çš„åˆ†ç‰‡ä¸­è¯´æ˜â€¦â€¦\n\nIPåè®®çš„æŠ¥æ–‡ä¸­æ²¡æœ‰ç«¯å£å·ï¼Œå› ä¸ºç«¯å£å·æ˜¯ä¼ è¾“å±‚åº”è¯¥è§£å†³çš„äº‹æƒ…ï¼ˆUDPå’ŒTCPçš„æŠ¥å¤´ä¸­æ‰æœ‰ç«¯å£å·çš„å­—æ®µï¼‰IPå±‚åªå…³æ³¨å¦‚ä½•å°†æŠ¥æ–‡å‘é€ç»™ç›®æ ‡ä¸»æœºã€‚ä¹Ÿå°±æ˜¯ä¸¤ä¸ªä¸»æœºä¹‹é—´å¦‚ä½•æ­£å¸¸é€šä¿¡çš„é—®é¢˜ã€‚\n2.2 åˆ†ç‰‡2.2.1 è®¤è¯†MTUMTUç›¸å½“äºç½‘ç»œå±‚å‘å¿«é€’æ—¶å¯¹åŒ…è£¹å°ºå¯¸çš„é™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯ä¸åŒçš„æ•°æ®é“¾è·¯å±‚å¯¹åº”çš„ç‰©ç†å±‚äº§ç”Ÿçš„é™åˆ¶ã€‚\n\nä»¥å¤ªç½‘å¸§ä¸­çš„æ•°æ®é•¿åº¦è§„å®šæœ€å°46å­—èŠ‚ï¼Œæœ€å¤§1500å­—èŠ‚ï¼›\nARPæ•°æ®åŒ…çš„é•¿åº¦ä¸å¤Ÿ46å­—èŠ‚ã€‚è¦åœ¨åé¢è¡¥å¡«å……ä½ï¼›\næœ€å¤§å€¼1500ç§°ä¸ºä»¥å¤ªç½‘çš„æœ€å¤§ä¼ è¾“å•å…ƒ(MTU)ï¼Œä¸åŒçš„ç½‘ç»œç±»å‹æœ‰ä¸åŒçš„MTUï¼›\nå¦‚æœä¸€ä¸ªæ•°æ®åŒ…ä»ä»¥å¤ªç½‘è·¯ç”±åˆ°æ‹¨å·é“¾è·¯ä¸Šï¼Œæ•°æ®åŒ…é•¿åº¦å¤§äºæ‹¨å·é“¾è·¯çš„MTUäº†ï¼Œåˆ™éœ€è¦å¯¹æ•°æ®åŒ…è¿›è¡Œåˆ†ç‰‡(fragmentation)ï¼›\nä¸åŒçš„æ•°æ®é“¾è·¯å±‚æ ‡å‡†çš„MTUæ˜¯ä¸åŒçš„ï¼›\nMTUæŒ‡ä¸Šå±‚èƒ½äº¤ä»˜çš„æ•°æ®çš„æœ€å¤§å¤§å°ï¼Œå…¶ä¸åŒ…æ‹¬ä»¥å¤ªç½‘æœ¬èº«çš„æŠ¥å¤´ã€‚\n\næ‰€ä»¥ï¼Œæ•°æ®é“¾è·¯å±‚ä¸æ”¯æŒè¿‡å¤§çš„æ•°æ®ï¼Œè¿™å°±éœ€è¦åœ¨ç½‘ç»œå±‚å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ã€‚\nè€Œç½‘ç»œå±‚IPåè®®ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ†ç‰‡ï¼Œå¹¶åœ¨æ¥æ”¶ç«¯ç»„è£…ã€‚è¿™ä¸ªè¡Œä¸ºå¯¹ä¼ è¾“å±‚æ¥è¯´æ˜¯ä¸éœ€è¦å…³æ³¨çš„ï¼Œåœ¨å››å±‚æ¨¡å‹ä¸­ï¼Œæ¯ä¸€å±‚ä¹‹é—´çš„åŠŸèƒ½éœ€è¦è¿›è¡Œè§£è€¦ã€‚\nåˆ†ç‰‡ä¹‹åï¼Œåªè¦æœ‰ä¸€ä¸ªåˆ†ç‰‡æŠ¥æ–‡ä¸¢å¤±ï¼Œè¿™ä¸ªæŠ¥æ–‡çš„æ•´ä½“å°±ä¼šè®¤ä¸ºä¸¢å¤±äº†ï¼ˆå› ä¸ºæ²¡æœ‰åŠæ³•æ‹¼å‡ºå®Œæ•´çš„æŠ¥æ–‡æ•°æ®ï¼‰\nä½†è¿™æ ·å°±å¼•å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šåˆ†ç‰‡ä¼šæé«˜ä¸¢åŒ…çš„æ¦‚ç‡ï¼Œå½±å“ä¼ è¾“é€Ÿç‡ï¼ˆå‘ä¸€æ¬¡å¿«é€’å’Œå‘ä¸‰æ¬¡å¿«é€’ï¼Œæ˜æ˜¾ä¸‰æ¬¡å¿«é€’ä¸¢ä¸œè¥¿çš„å¯èƒ½æ€§æ›´é«˜ï¼‰\nå¯¹äºå…·æœ‰å¯é æ€§æœºåˆ¶çš„TCPè€Œè¨€ï¼Œä¸¢åŒ…é—®é¢˜ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¼ è¾“å±‚è¿›è¡Œé‡ä¼ ã€‚ä½†UDPæ²¡æœ‰å¯é æ€§ï¼Œæ­¤æ—¶å‡ºç°åˆ†ç‰‡åä¸¢åŒ…äº†å°±æ²¡åŠæ³•æ‰¾å›äº†ã€‚\næ‰€ä»¥ï¼Œç½‘ç»œå±‚è¿›è¡Œåˆ†ç‰‡å¹¶ä¸æ˜¯ä¸»æµï¼ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ä¼ è¾“å±‚å°±è¿›è¡Œåˆ†ç‰‡æ‰æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\n2.2.2 å¦‚ä½•åˆ†ç‰‡åœ¨IPæŠ¥å¤´ä¸­ï¼Œå¦‚ä¸‹æ ‡è¯†ã€æ ‡å¿—ã€ç‰‡åç§»å­—æ®µå°±æ˜¯ç”¨äºåˆ†ç‰‡å’Œç»„è£…æ“ä½œçš„\n\n\nåå…­ä½æ ‡è¯† (id): å”¯ä¸€çš„æ ‡è¯†ä¸»æœºå‘é€çš„æŠ¥æ–‡ã€‚å¦‚æœIPæŠ¥æ–‡åœ¨æ•°æ®é“¾è·¯å±‚è¢«åˆ†ç‰‡äº†ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªç‰‡é‡Œé¢çš„è¿™ä¸ªidéƒ½æ˜¯ç›¸åŒçš„\nä¸‰ä½æ ‡å¿—å­—æ®µ: \nç¬¬ä¸€ä½ä¿ç•™ (ä¿ç•™çš„æ„æ€æ˜¯ç°åœ¨ä¸ç”¨ï¼Œ ä½†æ˜¯è¿˜æ²¡æƒ³å¥½è¯´ä¸å®šä»¥åè¦ç”¨åˆ°)ã€‚ \nç¬¬äºŒä½DFä¸º1è¡¨ç¤ºâ€œç¦æ­¢åˆ†ç‰‡â€ï¼Œ è¿™æ—¶å€™å¦‚æœæŠ¥æ–‡é•¿åº¦è¶…è¿‡MTUï¼Œ IPæ¨¡å—å°±ä¼šä¸¢å¼ƒæŠ¥æ–‡ã€‚ \nç¬¬ä¸‰ä½MFè¡¨ç¤ºâ€æ›´å¤šåˆ†ç‰‡â€ï¼Œ å¦‚æœåˆ†ç‰‡äº†çš„è¯ï¼Œ æœ€åä¸€ä¸ªåˆ†ç‰‡ç½®ä¸º0ï¼Œ å…¶ä»–åˆ†ç‰‡æŠ¥æ–‡éƒ½æ˜¯1ï¼›0å°±ç±»ä¼¼äºä¸€ä¸ªåˆ†ç‰‡æŠ¥æ–‡æ®µçš„ç»“æŸæ ‡è®°ï¼›\n\n\nåä¸‰ä½åˆ†ç‰‡åç§» (framegament offset): æ˜¯åˆ†ç‰‡ç›¸å¯¹äºåŸå§‹IPæŠ¥æ–‡çš„æ•°æ®è½½è·å¼€å§‹å¤„çš„åç§»ã€‚ å…¶å®å°±æ˜¯åœ¨è¡¨ç¤ºå½“å‰åˆ†ç‰‡åœ¨åŸå®Œæ•´æ•°æ®è½½è·ä¸­å¤„åœ¨å“ªä¸ªä½ç½®ã€‚å®é™…åç§»çš„å­—èŠ‚æ•°æ˜¯è¿™ä¸ªå€¼ * 8 å¾—åˆ°çš„ã€‚å› æ­¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªæŠ¥æ–‡ä¹‹å¤–ï¼Œå…¶ä»–æŠ¥æ–‡çš„é•¿åº¦å¿…é¡»æ˜¯8çš„æ•´æ•°å€ (å¦åˆ™æŠ¥æ–‡å°±ä¸è¿ç»­äº†)\n\nè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼ä¸€å®šè¦è®°ä½ï¼šé™¤äº†æœ€åä¸€ä¸ªæŠ¥æ–‡ä¹‹å¤–ï¼Œ å…¶ä»–æŠ¥æ–‡çš„æ•°æ®è½½è·é•¿åº¦å¿…é¡»æ˜¯8çš„æ•´æ•°å€ã€‚\n\nå¦‚æœæ•°æ®è½½è·ä¸è¶³8çš„æ•´æ•°å€ï¼Œéœ€è¦è¿›è¡Œå‘ä¸‹å–æ•´ï¼æ¯”å¦‚æŸä¸ªåˆ†ç‰‡çš„æ•°æ®è½½è·éƒ¨åˆ†æ˜¯1476å­—èŠ‚ï¼Œå¹¶é8çš„æ•´æ•°å€ï¼Œé‚£å°±åº”è¯¥é€‰æ‹©1476/8=184.5å‘ä¸‹å–æ•´ï¼Œå³é‡‡ç”¨8*184=1472ä¸ºè¯¥æŠ¥æ–‡çš„æ•°æ®è½½è·é•¿åº¦ã€‚\n\næ ¹æ®è¿™ä¸‰ä¸ªåˆ†ç‰‡ç›¸å…³å­—æ®µï¼Œæˆ‘ä»¬åªè¦å°†ä¸‰ä½æ ‡å¿—å­—æ®µä¸­çš„æ›´å¤šåˆ†ç‰‡MFç½®ä¸º1ï¼Œå°±ä»£è¡¨å½“å‰æŠ¥æ–‡å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ï¼Œè€Œæ˜¯å·²ç»è¢«åˆ†ç‰‡åçš„æŠ¥æ–‡ã€‚\n\næ›´å¤šåˆ†ç‰‡ä¸º0ï¼Œä¸”åˆ†ç‰‡åç§»ä¸º0ï¼Œä»£è¡¨å½“å‰æŠ¥æ–‡æ²¡æœ‰è¿›è¡Œåˆ†ç‰‡ï¼› ä¹Ÿå¯ä»¥åˆ¤æ–­DFç¦æ­¢åˆ†ç‰‡ä½ï¼Œç¡®è®¤æ˜¯å¦ç¦æ­¢åˆ†ç‰‡ï¼›\næ›´å¤šåˆ†ç‰‡ä¸º1ï¼Œä¸”åˆ†ç‰‡åç§»ä¸º0ï¼Œä»£è¡¨å½“å‰æ˜¯åˆ†ç‰‡åæŠ¥æ–‡ä¸­çš„ç¬¬ä¸€ä¸ªï¼›\næ›´å¤šåˆ†ç‰‡ä¸º0ï¼Œä¸”åˆ†ç‰‡åç§»ä¸ä¸º0ï¼Œä»£è¡¨å½“å‰æ˜¯åˆ†ç‰‡æŠ¥æ–‡ä¸­çš„æœ€åä¸€ä¸ªï¼›\n\nå¦‚æœå½“å‰æŠ¥æ–‡æ˜¯åˆ†ç‰‡åçš„ï¼Œé‚£å°±éœ€è¦æ ¹æ®åå…­ä½æ ‡è¯†æ¥ç¡®å®šå½“å‰åˆ†ç‰‡å±äºå“ªä¸€ä¸ªâ€œç»„â€ï¼Œå†å°†å½“å‰æŠ¥æ–‡å’Œåç»­æ”¶åˆ°çš„IDç›¸åŒçš„æŠ¥æ–‡é›†åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡åä¸‰ä½ç‰‡åç§»æ¥è¿›è¡Œæ’åºï¼Œç»„è£…æˆå®Œæ•´æ•°æ®ï¼\næ¯”å¦‚ï¼Œç¬¬ä¸€ä¸ªæŠ¥æ–‡çš„èµ·å§‹åç§»é‡æ˜¯0ï¼Œç¬¬äºŒä¸ªæ˜¯1000ï¼Œç¬¬ä¸‰ä¸ªæ˜¯2000ï¼Œè¿™æ—¶å€™å°±æ ¹æ®ç‰‡åç§»æ’åºè¿›è¡Œæ‹¼æ¥å°±å¯ä»¥äº†ã€‚ï¼ˆè¿™åªæ˜¯ä¸ªæ —å­ï¼‰\n\nå¦‚æœå¯¹ç¬¬äºŒä¸ªåˆ†ç‰‡è¿˜éœ€è¦è¿›ä¸€æ­¥åˆ†ç‰‡ï¼Œæ•ˆæœå¦‚ä¸‹\n\nåˆ†ç‰‡ç»ƒä¹ é¢˜ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†ç‰‡çš„ä¾‹é¢˜ï¼ŒåŒ…å«äº†åç§»é‡çš„é€‰æ‹©é—®é¢˜ï¼›\nå¯ä»¥çœ‹åˆ°ï¼Œä¸€å¼€å§‹æˆ‘ä»¬é€‰æ‹©å°†åŸæœ‰çš„æ•°æ®è½½è·æ‹†æˆ780+700çš„ä¸¤éƒ¨åˆ†ï¼Œä½†é€šè¿‡è®¡ç®—å¾—å‡ºï¼Œ780/8=97.5ï¼Œå¹¶é8çš„æ•´æ•°å€ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªIPæŠ¥æ–‡ä¸­é¦–éƒ¨çš„åç§»é‡å­—æ®µå°±ä¸ç¬¦åˆè¦æ±‚äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¿è¯ç¬¬ä¸€ä¸ªæŠ¥æ–‡ä¸­çš„æ•°æ®è½½è·çš„é•¿åº¦æ˜¯8çš„æ•´æ•°å€ã€‚\n\næ­¤æ—¶è¦é‡‡ç”¨å‘ä¸‹å–æ•´çš„ç­–ç•¥ï¼Œå³780/8=97.5ï¼Œåˆ™æˆ‘ä»¬é‡‡ç”¨97*8=776ä¸ºç¬¬ä¸€ä¸ªIPæŠ¥æ–‡çš„æ•°æ®è½½è·é•¿åº¦ï¼Œç¬¬äºŒä¸ªæŠ¥æ–‡çš„æ•°æ®è½½è·é•¿åº¦ä¸º1480-776 = 704ï¼Œå› ä¸ºç¬¬äºŒä¸ªæŠ¥æ–‡æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®è½½è·éƒ¨åˆ†é•¿åº¦æ²¡æœ‰8çš„å€æ•°çš„è¦æ±‚ã€‚\n\n2.2.3 å¦‚ä½•ä¿è¯æ”¶å®Œäº†ä¸€æ•´ä¸ªåˆ†ç‰‡ç»„ï¼Ÿæ ¹æ®åå…­ä½æ ‡è¯†ï¼ŒæŒ‰ç…§ç‰‡åç§»è¿›è¡Œæ’åºï¼Œæ’åºåå‘ç°ç¼ºå¤±äº†éƒ¨åˆ†çš„æŠ¥æ–‡ï¼Œé‚£å°±ä»£è¡¨æ²¡æœ‰è¢«æ”¶å®Œã€‚å› ä¸ºæ¯ä¸€ä¸ªæŠ¥æ–‡çš„åç§»é‡+è¯¥æŠ¥æ–‡é•¿åº¦ï¼Œå°±æ˜¯ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„åç§»é‡ï¼åªè¦æ•°æ®å¯¹ä¸ä¸Šï¼Œé‚£å°±ä»£è¡¨ä¸¢ä¸œè¥¿äº†ã€‚\nè€Œå¼€å¤´å’Œç»“å°¾çš„æŠ¥æ–‡ï¼Œå°±èƒ½é€šè¿‡ä¸Šé¢æåˆ°çš„æ ¹æ®æ›´å¤šåˆ†ç‰‡æ ‡è®°ä½+åˆ†ç‰‡åç§»æ¥ç¡®å®šæœ‰æ²¡æœ‰ä¸¢ã€‚\n2.2.4 å¦‚ä½•å‡å°‘åˆ†ç‰‡è™½ç„¶è¯´IPç½‘ç»œå±‚ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ†ç‰‡ï¼Œä½†æ˜¯å¦åˆ†ç‰‡æ˜¯å¯ä»¥é€šè¿‡ä¼ è¾“å±‚æ¥è¿›è¡Œæ§åˆ¶çš„\nåªè¦ä¼ è¾“å±‚ä¸€æ¬¡äº¤ä»˜çš„æ•°æ®æ²¡æœ‰è¶…è¿‡éœ€è¦åˆ†ç‰‡çš„é˜ˆå€¼ï¼Œé‚£ç½‘ç»œå±‚åœ¨ä¼ è¾“çš„æ—¶å€™å°±ä¸ä¼šè¿›è¡Œåˆ†ç‰‡äº†ï¼\nå‡å°‘åˆ†ç‰‡çš„æ–¹å¼ï¼Œé‚£å°±æ˜¯åœ¨ä¼ è¾“å±‚å°±è¿›è¡Œä¸€å®šçš„åˆ†ç‰‡ï¼Œè¿™æ ·èƒ½æ›´å¥½å°†ä¸¢åˆ†ç‰‡æŠ¥æ–‡è¿™ä»¶äº‹åœ¨ä¼ è¾“å±‚è¿›è¡Œå¤„ç†ã€‚è€Œä¸æ˜¯åœ¨ç½‘ç»œå±‚ä¸¢åŒ…åï¼Œæ²¡åŠæ³•åœ¨ä¼ è¾“å±‚å¤±è´¥å¹¶å¤„ç†ã€‚\nå¦‚æœæ˜¯TCPåè®®ï¼Œåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™ï¼Œå°±ä¼šåå•†åŒæ–¹å•æ¬¡ä¼ è¾“æ•°æ®çš„å¤§å°ï¼ˆçª—å£å¤§å°ï¼‰ã€‚ä»è€Œé¿å…ç½‘ç»œå±‚å¯¹æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œä»¥è§„é¿æ•°æ®é“¾è·¯å±‚çš„MTUé™åˆ¶ã€‚åŒæ—¶ä¹Ÿç»´æŠ¤äº†æ»‘åŠ¨çª—å£ï¼Œå¦‚æœç½‘ç»œå±‚çš„ä¼ è¾“å‡ºç°äº†ä¸¢åŒ…ï¼Œç”±ä¼ è¾“å±‚æ¥è¿›è¡Œé‡ä¼ æ“ä½œï¼Œä»¥å®ç°å¯é ä¼ è¾“ã€‚\n\né™åˆ¶æˆå¤šå°‘å¥½å‘¢ï¼Ÿ\n\nä¸€èˆ¬å»ºè®®å°†è¯¥å¤§å°è®¾ç½®ä¸ºæ¯”ç½‘ç»œä¸­çš„æœ€å°MTUå€¼å°ä¸€äº›ï¼Œä»¥é˜²æ­¢å‡ºç°åˆ†ç‰‡\n2.2.5 åˆ†ç‰‡çš„é™åˆ¶åœ¨ä¸Šæ–‡ä¸­æåˆ°ï¼ŒMTUçš„é™åˆ¶æ˜¯æœ€å¤§1500å­—èŠ‚ï¼Œè¿™ä¸ªæ•°æ®é•¿åº¦æ˜¯åŒ…å«IPåè®®çš„æŠ¥å¤´çš„ï¼ˆæ•°æ®æ˜¯ä»IPç½‘ç»œå±‚å‘ä¸‹äº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚çš„ï¼‰\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç½‘ç»œå±‚çš„3000å­—èŠ‚çš„æ•°æ®ï¼Œæ­¤æ—¶ç½‘ç»œå±‚è¦è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶ä¸æ˜¯ç®€å•çš„3000/1500=2å°±èƒ½æå®šäº†çš„ã€‚è€Œæ˜¯è¦è®¡ç®—ä¸ŠIPæŠ¥å¤´çš„é•¿åº¦ï¼ˆ20å­—èŠ‚ï¼‰\næ¯ä¸€ä¸ªåˆ†ç‰‡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„IPæŠ¥æ–‡ï¼Œéƒ½ä¼šæœ‰è‡ªå·±ç‹¬ç«‹çš„IPæŠ¥å¤´ï¼å¦åˆ™ç¼ºå°‘æŠ¥å¤´ï¼Œåœ¨æ¥æ”¶ç«¯æ²¡æœ‰åŠæ³•è¿›è¡Œæ•°æ®ç»„è£…æ“ä½œã€‚\n20+148020+148020+20\n\nä¸€å…±éœ€è¦åˆ†3ç‰‡ï¼Œæ‰èƒ½å°†è¿™ç½‘ç»œå±‚çš„3000å­—èŠ‚çš„æ•°æ®æˆåŠŸä¼ è¾“ï¼\nä½†æ˜¯è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼Œæ˜æ˜1480+1480+20 = 2980ï¼Œå¹¶ä¸æ˜¯3000å­—èŠ‚å•Šï¼Ÿ\næ³¨æ„ï¼ä¸Šé¢æåˆ°çš„æ˜¯ç½‘ç»œå±‚çš„3000å­—èŠ‚æ•°æ®ã€‚å®é™…ä¸Šï¼Œä¼ è¾“å±‚åªå‘ä¸‹äº¤ä»˜äº†2980å­—èŠ‚ï¼ŒåŠ ä¸ŠIPæŠ¥å¤´20å­—èŠ‚æ‰æ˜¯ç½‘ç»œå±‚çš„3000å­—èŠ‚æ•°æ®ã€‚å› ä¸ºè¦è¿›è¡Œåˆ†ç‰‡ï¼ŒåŸæœ¬è¿™3000å­—èŠ‚çš„ç»Ÿä¸€æŠ¥å¤´è‚¯å®šæ˜¯è¦ä¸¢å¼ƒçš„ï¼Œæˆ‘ä»¬éœ€è¦æ“ä½œçš„æ˜¯ä¼ è¾“å±‚å‘ä¸‹äº¤ä»˜çš„2980å­—èŠ‚æ•°æ®ï¼Œå°†å…¶æ­£ç¡®åˆ†ç‰‡å¹¶æ·»åŠ ä¸Šæ¯ä¸€ä¸ªåˆ†ç‰‡çš„æŠ¥å¤´ï¼Œå†äº¤ç»™æ•°æ®é“¾è·¯å±‚ã€‚\n2.3 TTLä¸Šæ–‡æåˆ°TTLæ˜¯ç”¨æ¥æ§åˆ¶æŠ¥æ–‡çš„ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå…¶ä¸ºäº†é¿å…æŠ¥æ–‡åœ¨è·¯ç”±ä¸­å‡ºç°æ­»å¾ªç¯ï¼Œåˆç§°è·¯ç”±ç¯è·¯ã€‚\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæŠ¥æ–‡è·¯ç”±åˆ°äº†è·¯ç”±å™¨Dï¼ŒåŸæœ¬ä»–åº”è¯¥è¢«æ­£å¸¸äº¤ä»˜ç»™ä¸»æœºCï¼Œä½†è·¯ç”±å™¨Då‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œå°†è¿™ä¸ªæŠ¥æ–‡äº¤ä»˜ç»™äº†è·¯ç”±å™¨Iï¼Œè·¯ç”±å™¨Iç»™Jï¼ŒJç»™Hï¼ŒHç»™Cï¼Œè·¯ç”±å™¨Cåˆç»™Dï¼Œè·¯ç”±å™¨Dè¿˜æ˜¯æœ‰bugï¼Œåˆè½¬å‘ç»™äº†è·¯ç”±å™¨Iã€‚è¿™æ—¶å€™ï¼Œå°±å‡ºç°äº†ä¸€ä¸ªæŠ¥æ–‡è·¯ç”±çš„æ­»å¾ªç¯ã€‚\nå¦‚æœæ²¡æœ‰TTLæ¥æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼ŒæŠ¥æ–‡å°±ä¼šä¸€ç›´åœ¨è¿™ä¸ªæ­»å¾ªç¯ä¸­è·‘ï¼Œç™½ç™½æµªè´¹è·¯ç”±å™¨çš„æ€§èƒ½ï¼\n\nè§„å®šäº†TTLä¹‹åï¼Œå½“æŠ¥æ–‡çš„ç”Ÿå‘½å‘¨æœŸå·²ç»åˆ°äº†ï¼Œä½†å´è¿˜æ²¡æœ‰å‘é€åˆ°ç›®çš„åœ°ï¼Œé‚£å°±éœ€è¦å°†è¿™ä¸ªæŠ¥æ–‡ä¸¢å¼ƒäº†ã€‚å³è¶…äº†TTLçš„æ—¶é—´å°±è®¤ä¸ºæŠ¥æ–‡æ— æ•ˆï¼›\n\næœ€åˆæ˜¯ä»¥IPæ•°æ®æŠ¥ä¸­è¯¥å­—æ®µçš„å€¼å‡å»æŠ¥æ–‡åœ¨å½“å‰ä¸»æœºè€—è´¹çš„æ—¶é—´ï¼Œè‹¥ç»“æœä¸ä¸º0åˆ™è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒï¼›\nç°åœ¨ä»¥è·³æ•°ä¸ºå•ä½ï¼Œè·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥çš„æ—¶å€™ï¼Œå°†è¯¥å­—æ®µå€¼å‡ä¸€ï¼Œå¦‚æœå‡ä¸€åä¸ä¸º0åˆ™è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒ\n\n\n2.4 åè®®å­—æ®µåè®®å­—æ®µå 8æ¯”ç‰¹ï¼Œæ ‡è¯†IPV4æŠ¥æ–‡æºå¸¦çš„æ˜¯ä»€ä¹ˆåè®®æ•°æ®å•å…ƒã€‚\nICMP 1IGMP 2TCP  6UDP  17IPv6 41OSPF 89\n\n\nä¸ºä»€ä¹ˆåè®®å­—æ®µé‡Œé¢ä¼šæœ‰IPv6ï¼Ÿå› ä¸ºIPv4åˆ°IPv6è¿‡æ¸¡çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯ç”¨IPv4æŠ¥æ–‡æ¥æºå¸¦IPv6æ•°æ®ã€‚å¦å¤–ä¸€ä¸ªè¿‡æ¸¡æ–¹æ¡ˆæ˜¯åŒåè®®æ ˆï¼ˆå³åœ¨æœºå™¨ä¸ŠåŒæ—¶å®ç°IPv6å’ŒIPv4çš„åè®®æ ˆï¼‰\n2.5 é¦–éƒ¨æ£€éªŒå’Œé¦–éƒ¨æ£€éªŒå’Œé‡‡ç”¨çš„æ˜¯å› ç‰¹ç½‘æ£€éªŒå’Œï¼Œå¹¶éCRCæ£€éªŒã€‚\nIPæ•°æ®æŠ¥æ¯ç»è¿‡ä¸€æ¬¡è·¯ç”±å™¨ï¼Œå°±éœ€è¦é‡æ–°è®¡ç®—é¦–éƒ¨æ£€éªŒå’Œï¼Œå› ä¸ºæŸäº›å­—æ®µï¼ˆç”Ÿå­˜æ—¶é—´ã€æ ‡å¿—ã€ç‰‡åç§»ï¼‰å¯èƒ½ä¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿå˜åŒ–ã€‚\nç”±äºIPå±‚æœ¬èº«å¹¶ä¸æä¾›å¯é ä¼ è¾“æœåŠ¡ï¼Œè€Œè®¡ç®—æ£€éªŒå’Œæ˜¯ä¸€ä¸ªè€—æ—¶çš„æ“ä½œï¼Œæ‰€ä»¥åœ¨IPv6ä¸­è·¯ç”±å™¨ä¸å†è®¡ç®—é¦–éƒ¨æ ¡éªŒå’Œï¼Œä»¥æ›´å¿«çš„è½¬å‘IPæŠ¥æ–‡ã€‚\n2.6 ä¾‹é¢˜ï¼šä»ä»¥å¤ªç½‘å¸§å­—èŠ‚æµä¸­è¯»å–ç›®æ ‡IPåœ°å€è€ƒç ”é¢˜ç›®ä¸­ä¼šç»™ä½ ä¸€å †å­—èŠ‚æµï¼Œè®©ä½ ä»¥å¤ªç½‘å¸§çš„ä»å­—èŠ‚é‡Œé¢æå–å‡ºIPåœ°å€ã€‚è¿™éœ€è¦æˆ‘ä»¬å¯¹ä»¥å¤ªç½‘å¸§æ ¼å¼å’ŒIPæŠ¥æ–‡éƒ½æ·±åˆ»çš„äº†è§£ã€‚\n\nä»¥å¤ªç½‘å¸§åœ¨IPæŠ¥å¤´ä¹‹å‰æ·»åŠ äº†æºMACã€ç›®æ ‡MACåœ°å€ã€ç±»å‹å­—æ®µï¼Œä¸€å…±14å­—èŠ‚\nIPæŠ¥å¤´ä¸­ï¼Œåœ¨ç›®çš„IPåœ°å€ä¹‹å‰è¿˜æœ‰16ä¸ªå­—èŠ‚çš„å†…å®¹\n\nå› æ­¤ï¼Œæˆ‘ä»¬å°†å­—èŠ‚æµä¸­å‰30å­—èŠ‚å»æ‰ï¼Œåœ¨è¯»å–32ä½ï¼ˆ4å­—èŠ‚ï¼‰å³å¯å¾—åˆ°ç›®æ ‡ä¸»æœºçš„IPåœ°å€ã€‚\n\né™¤äº†è¯»å–ç›®çš„IPåœ°å€ï¼Œé¢˜ç›®è¿˜éœ€è¦æˆ‘ä»¬è¯»å–é»˜è®¤ç½‘å…³çš„MACåœ°å€ã€‚è€Œä¸»æœºçš„é»˜è®¤ç½‘å…³ä¸€èˆ¬éƒ½æ˜¯è·¯ç”±å™¨ï¼Œè¯¥é¢˜è½¬ä¸ºè¯»å–ä»¥å¤ªç½‘å¸§æ ¼å¼ä¸­çš„ç›®çš„MACåœ°å€ã€‚\n\nç¬¬å››é¢˜ï¼Œè¯¥æŠ¥æ–‡ä¸­IPåˆ†ç»„ç»è¿‡è·¯ç”±å™¨Rè½¬å‘çš„æ—¶å€™ï¼Œåº”è¯¥éœ€è¦ä¿®æ”¹æºIPåœ°å€ã€ç”Ÿå­˜æ—¶é—´ã€é¦–éƒ¨æ ¡éªŒå’Œå­—æ®µã€‚\n\nå¦‚æœæ˜¯åœ¨ä¸åŒçš„å­ç½‘ä¸­è¿›è¡Œè½¬å‘ï¼ŒæºIPåœ°å€ä¸éœ€è¦ä¿®æ”¹ã€‚å¦‚æœæ˜¯é€šè¿‡è·¯ç”±å™¨çš„WANå£è½¬å‘åˆ°ä¸Šå±‚å±€åŸŸç½‘ï¼Œåˆ™éœ€è¦ä¿®æ”¹æºIPåœ°å€ã€‚\n\nå¦‚æœè·¯ç”±å™¨æ‰€è¿çš„ä¸¤ä¸ªå±€åŸŸç½‘ä¸­MTUä¸åŒï¼Œå¯èƒ½éœ€è¦å¯¹IPé‡æ–°è¿›è¡Œåˆ†ç‰‡ã€‚\n3.ç½‘æ®µåˆ’åˆ†3.1 IPå¦‚ä½•æ‰¾åˆ°å¯¹æ–¹ä¸»æœºï¼ŸIPå¦‚ä½•æ‰¾åˆ°å¯¹æ–¹ä¸»æœºå‘¢ï¼Ÿ\n\nIP &#x3D; ç›®çš„ç½‘ç»œ + ç›®çš„ä¸»æœº\nç”±æ­¤è¿˜è¡ç”Ÿå‡ºç½‘æ®µåˆ’åˆ†\n\nä»¥IPV4çš„ipä¸ºä¾‹ï¼Œå…¶æ ¼å¼ä¸º1.1.1.1ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸‹é¢çš„åˆ’åˆ†\n1.1.1  .1ç½‘æ®µ   .ä¸»æœº\n\nè¿™å°±å¥½æ¯”ä½ çš„å­¦å·ï¼Œå‰Xä½é‡Œé¢æ˜¯å­¦é™¢çš„ä»£ç ï¼Œæœ€åæ‰æ˜¯ç­çº§+ç­çº§å†…ç¼–å·ã€‚å…ˆæ‰¾åˆ°ä½ æ‰€åœ¨å­¦é™¢ï¼Œå†æ‰¾åˆ°ç­çº§ï¼Œæœ€åå†æ‰¾åˆ°ä½ ã€‚\nåé¦ˆåˆ°IPé‡Œé¢ï¼Œå°±æ˜¯å…ˆæ‰¾åˆ°ç½‘æ®µï¼Œå†æ‰¾åˆ°ä¸»æœºã€‚\n3.1.1 å‘é€æ•°æ®çš„æœ¬è´¨IPå°±æ˜¯å…ˆæ‰¾åˆ°ç›®çš„çš„ç½‘æ®µï¼Œå†æ‰¾è¿™ä¸ªç½‘æ®µä¸­çš„ç›®çš„ä¸»æœºã€‚ï¼ˆå…ˆæ ¹æ®ç›®çš„ç½‘æ®µè¿›è¡Œè·¯ç”±ï¼Œæ‰¾åˆ°ç›®çš„ç½‘ç»œï¼Œå†é€šè¿‡ä¸»æœºå·æ‰¾åˆ°ç›®çš„ä¸»æœºï¼‰\nè€ŒæŸ¥æ‰¾ç›®çš„ä¸»æœºçš„è¿‡ç¨‹ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªæ’é™¤çš„è¿‡ç¨‹ã€‚\nå…ˆé€šè¿‡ç½‘æ®µæ’é™¤ä¸€ä¸ªå¤§ç±»ï¼Œå†é€šè¿‡ä¸»æœºå·æ¥æ’é™¤è¯¥ç½‘æ®µä¸­çš„å•ä¸ªä¸»æœºã€‚è¿™æ ·å°±èƒ½é¿å…æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªéå†åœ¨å…¨ç½‘ä¸­æŸ¥æ‰¾ä¸»æœºï¼Œæé«˜äº†æŸ¥æ‰¾çš„æ•ˆç‡\n\nå­ç½‘åˆ’åˆ†çš„ç›®çš„ï¼šå°±æ˜¯æé«˜æŸ¥æ‰¾ç›®æ ‡ä¸»æœºçš„æ•ˆç‡\n\nè¿™ä¹Ÿæ˜¯å­¦æ ¡é‡Œé¢ç”¨å­¦å·çš„åŸå› ï¼Œé™¤äº†ä¸ºäº†ç»™æ¯ä¸ªå­¦ç”Ÿæä¾›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œè¿˜èƒ½é€šè¿‡å­¦å·æ¥æé«˜æŸ¥æ‰¾åˆ°æŸä¸€ä¸ªå­¦ç”Ÿçš„æ•ˆç‡ã€‚\nåœ¨å…¨çƒäº’è”ç½‘ä¸Šï¼ŒåŒæ ·æ˜¯é€šè¿‡IPåœ°å€çš„ç½‘æ®µæ¥åˆ’åˆ†å›½å®¶ï¼Œå†åˆ’åˆ†åˆ°æ¯ä¸ªå›½å®¶å†…éƒ¨çš„ä¸åŒåŒºã€‚è¿™æ—¶å€™å°±ä¼šæœ‰ä¸€å®šIPåœ°å€èµ„æºçš„ç«äº‰ã€‚æ¯”å¦‚ç±³å›½äº’è”ç½‘å‘å±•æ—©ï¼Œä¸‹å›¾ä¸­è°·æ­Œçš„æœåŠ¡å™¨IPå°±è€æ•´é½äº†ğŸ˜‚ï¼ˆä¸è¿‡è¿™äº›æœåŠ¡å™¨éƒ½åœ¨åŒä¸€ä¸ªåœ°åŸŸï¼ŒIPå¾ˆæ¥è¿‘æ˜¯åˆç†çš„ï¼‰\n\n3.1.2 ç½‘ç»œå·å’Œä¸»æœºå·\nç½‘ç»œå·ï¼šä¿è¯ç›¸äº’è¿æ¥çš„ä¸¤ä¸ªç½‘æ®µå…·æœ‰ä¸åŒçš„æ ‡è¯†\nä¸»æœºå·ï¼šåœ¨åŒä¸€ç½‘æ®µä¸­ï¼Œä¸»æœºä¹‹é—´å…·æœ‰ç›¸åŒçš„ç½‘ç»œå·ï¼Œä½†æ˜¯ä¸»æœºå·ä¸åŒä»¥è¿›è¡ŒåŒºåˆ†\n\nå…·ä½“æ¡†æ¶å¯ä»¥æŸ¥çœ‹ä¸‹å›¾ï¼Œ192.168.128å°±æ˜¯è¿™ä¸ªå±€åŸŸç½‘çš„ç½‘æ®µ ï¼Œè€Œæœ€åçš„10å’Œ11æ˜¯ä¸åŒä¸»æœºçš„ä¸¤ä¸ªä¸»æœºæ ‡è¯†ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç½‘æ®µä¸­çš„1å·ä¸»æœºå°±æ˜¯è¿™ä¸ªç½‘æ®µä¸­çš„è·¯ç”±å™¨ã€‚\n\næˆ‘ä»¬å®¶é‡Œçš„è·¯ç”±å™¨é™¤äº†è¿›è¡Œè·¯ç”±è½¬å‘ï¼Œè¿˜æœ‰å­ç½‘åˆ’åˆ†çš„åŠŸèƒ½ã€‚\n\nå¦‚æœå‡ºç°äº†ä¸€ä¸ªå¼€å¤´å¹¶é192.168.128çš„IPï¼Œä¸»æœºå°±èƒ½çŸ¥é“è¿™ä¸æ˜¯å½“å‰å±€åŸŸç½‘çš„IPï¼Œäºæ˜¯å°±ä¼šå°†æŠ¥æ–‡ç›´æ¥è½¬å‘ç»™192.168.128.1ï¼Œè®©è·¯ç”±å™¨å»æ‰¾è¿™ä¸ªIPçš„ç›®æ ‡ä¸»æœºï¼ˆè¿›è¡Œè·¨å±€åŸŸç½‘çš„ä¸‹ä¸€å±‚è½¬å‘ï¼‰\n\nå°±å¥½æ¯”æˆ‘ä»¬çš„å­¦å·æ˜¯å­¦æ ¡çš„æ•™åŠ¡ç³»ç»Ÿæ´¾å‘ç»™æ¯ä¸€ä½åŒå­¦çš„ï¼ŒIPä¸­çš„ç½‘æ®µä¹Ÿè¢«â€œæŸäººâ€åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ ¹æ®åœ°åŒºè¿›è¡Œäº†åˆ’åˆ†ã€‚\n3.2 IPåœ°å€ç±»åˆ«åˆ’åˆ†3.2.1 ABCDEé€šè¿‡Aåˆ°Eç±»ä¸åŒçš„åˆ’åˆ†ï¼Œä¼šè¡ç”Ÿå‡ºä¸åŒèŒƒå›´çš„IPå·ï¼Œç„¶åå†åˆ†é…ç»™ä¸åŒçš„å›½å®¶æˆ–åœ°åŒº\nAç±» 0.0.0.0åˆ°127.255.255.255 Bç±» 128.0.0.0åˆ°191.255.255.255 Cç±» 192.0.0.0åˆ°223.255.255.255 Dç±» 224.0.0.0åˆ°239.255.255.255 Eç±» 240.0.0.0åˆ°247.255.255.255\n\n\nä¾ç…§ä¸Šé¢çš„åˆ’åˆ†ï¼Œå¦‚æœæˆ‘æ˜¯ä¸€ä¸ªå¤§å‹ä¼ä¸šï¼Œç”³è¯·äº†ä¸€ä¸ªBç±»çš„IPåœ°å€ã€‚æ­¤æ—¶å°±èƒ½æ”¯æŒæˆ‘çš„å±€åŸŸç½‘å†…2^16å°ä¸»æœºçš„ipåˆ†é…ã€‚ä½†å®é™…ä¸Šæˆ‘é¡¶å¤šä¼šæœ‰2wä¸ªä¸»æœºï¼Œæ­¤æ—¶å°±å‡ºç°äº†IPåœ°å€çš„æµªè´¹ï¼\n3.2.2 CIDRå’Œå­ç½‘æ©ç ä¸ºäº†é¿å…ä¸Šæ–‡ä¸­å‡ºç°çš„IPæµªè´¹é—®é¢˜ï¼ŒCIDRï¼ˆClassless Interdomain Routingï¼‰å°±å‡ºç°äº†\n\nå¼•å…¥ä¸€ä¸ªé¢å¤–çš„å­ç½‘æ©ç (subnet mask)æ¥åŒºåˆ†ç½‘ç»œå·å’Œä¸»æœºå·ï¼›\nå­ç½‘æ©ç ä¹Ÿæ˜¯ä¸€ä¸ª32ä½çš„æ­£æ•´æ•°. é€šå¸¸ç”¨ä¸€ä¸² 0 æ¥ç»“å°¾ï¼Œä¸€ä¸² 1 å¼€å¤´ï¼›\nå°†IPåœ°å€å’Œå­ç½‘æ©ç è¿›è¡Œ æŒ‰ä½ä¸ æ“ä½œ, å¾—åˆ°çš„ç»“æœå°±æ˜¯ç½‘ç»œå·ï¼›\nç½‘ç»œå·å’Œä¸»æœºå·çš„åˆ’åˆ†ä¸è¿™ä¸ªIPåœ°å€æ˜¯Aç±»ã€Bç±»è¿˜æ˜¯Cç±»æ— å…³\n\nå¦‚æœæˆ‘ä»¬éœ€è¦æ›´å¤šä¸»æœºï¼Œå°±å¯ä»¥å°†å­ç½‘æ©ç ä¸­æœ€åä¸€ä¸ª1ç½®0ï¼Œå°±èƒ½é€‚é…æ›´å¤šå±€åŸŸç½‘ä¸»æœºã€‚\næ‰€ä»¥ï¼Œç°åœ¨å·²ç»ä¸ç”¨ABCDEçš„ç±»åˆ«åˆ’åˆ†æ–¹å¼äº†ï¼Œéƒ½é‡‡ç”¨äº†å­ç½‘æ©ç æ–¹å¼ã€‚\n\næ ¹æ®ä¸Šå›¾å¯è§ï¼ŒIPåœ°å€ä¸å­ç½‘æ©ç åšä¸è¿ç®—å¯ä»¥å¾—åˆ°ç½‘ç»œå·ï¼Œä¸»æœºå·çš„äºŒè¿›åˆ¶ä½ä»å…¨0åˆ°å…¨1å°±æ˜¯å­ç½‘çš„åœ°å€èŒƒå›´ï¼› \nIPåœ°å€å’Œå­ç½‘æ©ç è¿˜æœ‰ä¸€ç§æ›´ç®€æ´çš„è¡¨ç¤ºæ–¹æ³•ï¼šä¾‹å¦‚140.252.20.68/24,è¡¨ç¤ºIPåœ°å€ä¸º140.252.20.68, å­ç½‘æ©ç çš„é«˜24ä½æ˜¯1ï¼Œä¹Ÿå°±æ˜¯å­ç½‘æ©ç 255.255.255.0\n3.3 åŸºç¡€è®¾æ–½æœ‰äº†ç½‘æ®µåˆ’åˆ†ï¼Œç»™ä¸åŒå›½å®¶å’Œåœ°åŒºåˆ’åˆ†äº†IPä¹‹åï¼Œå°±éœ€è¦æœ‰äººæ¥å»ºè®¾ç½‘ç»œçš„åŸºç¡€è®¾æ–½\nåœ¨æˆ‘ä»¬å›½å®¶ï¼ŒæåŸºç¡€è®¾æ–½å°±æ˜¯ä¸‰å¤§è¿è¥å•†ï¼ˆç§»åŠ¨ ç”µä¿¡ è”é€šï¼‰\næ¯”å¦‚å‡ å¹´å‰åšçš„â€œå…‰çº¤å…¥æˆ·â€å°±æ˜¯åŸºç¡€è®¾æ–½å»ºè®¾çš„ä¸€éƒ¨åˆ†ã€‚\nåŸºç¡€è®¾æ–½æ­å»ºå¥½äº†åï¼Œå†é€šè¿‡å­ç½‘æ©ç å’Œå·²ç»è·å–åˆ°çš„IPçš„ç½‘æ®µæ¥åˆ’åˆ†ä¸åŒçœä»½ã€ä¸åŒå¸‚åŒºï¼›æœ€ç»ˆå†è½åˆ°æ¯ä¸ªå…¥ç½‘ç”¨æˆ·çš„å¤´ä¸Šã€‚\n3.4 ç¼“è§£IPåœ°å€ä¸å¤Ÿç”¨çš„åŠæ³•æœ‰äººè‚¯å®šä¼šé—®äº†ï¼Œç°åœ¨å…¬ç½‘IPV4çš„èµ„æºé‚£ä¹ˆåŒ®ä¹ï¼Œå¤§éƒ¨åˆ†å®¶å®½éƒ½æ˜¯æ²¡æœ‰å…¬ç½‘ipçš„ï¼Œé‚£æˆ‘ä»¬å¹³æ—¶çš„ä¸Šç½‘æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\næ¢å¥è¯è¯´ï¼Œå¦‚ä½•ç¼“è§£IPåœ°å€çš„åŒ®ä¹ï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨åŠ¨æ€IPåˆ†é…æŠ€æœ¯ï¼Œåªç»™ç›´æ¥æ¥å…¥å…¬ç½‘çš„è®¾å¤‡åˆ†é…IPåœ°å€ï¼Œæ¯ä¸€ä¸ªè®¾å¤‡æ¥å…¥ç½‘ç»œæ—¶ï¼Œå…¶è·å–åˆ°çš„IPåœ°å€ä¸ä¸€å®šå’Œä¸Šæ¬¡ç›¸åŒã€‚\nNATæŠ€æœ¯ï¼ˆé‡ç‚¹ï¼‰\nIPV6ï¼ˆä½†æ˜¯ç°åœ¨æ™®åŠç‡æœ‰å¾…æé«˜ï¼‰\n\nIPV6ä½¿ç”¨16å­—èŠ‚ï¼ˆ128ä½ï¼‰æ¥æ ‡è¯†ä¸€ä¸ªIPåœ°å€ï¼Œç›®å‰çœ‹æ¥ï¼Œ2^128 ä½èƒ½ç»™â€œåœ°çƒä¸Šæ¯ä¸€ç²’æ²™å­â€éƒ½åˆ†é…ä¸€ä¸ªIPåœ°å€äº†ã€‚è™½ç„¶è¿Ÿæ—©ä¹Ÿä¼šæœ‰ä¸å¤Ÿç”¨çš„é‚£ä¸€å¤©ï¼Œä½†è‡³å°‘æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å›½å®¶å°±åœ¨å¤§åŠ›æ¨å¹¿IPV6\né€šè¿‡å‰æ–‡çš„æŠ¥æ–‡ç»“æ„å›¾å¯çŸ¥ï¼ŒIPV4çš„IPåœ°å€åªæœ‰4å­—èŠ‚ï¼ˆ32ä½ï¼‰\n\n4.ç§æœ‰IP4.1 ç‰¹æ®Šçš„IPåœ°å€ä½†æ˜¯ï¼Œç›´æ¥é‡‡ç”¨CIDRçš„æ–¹å¼ä½œä¸ºå±€åŸŸç½‘æ§åˆ¶çš„æ–¹å¼ï¼Œå°±å®¹æ˜“å‡ºç°æ··ä¹±ã€‚è€Œä¸”å³ä¾¿æ˜¯é‡‡ç”¨äº†å­ç½‘æ©ç çš„æ–¹å¼ï¼Œä¾æ—§å¯èƒ½å‡ºç°IPä¸å¤Ÿç”¨çš„æƒ…å†µï¼ˆä¸€ä½ç½‘æ°‘å¾ˆå¯èƒ½æœ‰å¤šä¸ªè®¾å¤‡ï¼Œ å†åŠ ä¸Šå„ç±»æ™ºèƒ½ç»ˆç«¯ï¼Œç°åœ¨éœ€è¦ä¸Šç½‘çš„è®¾å¤‡åªä¼šè¶Šæ¥è¶Šå¤šï¼‰\néœ€è¦æ³¨æ„çš„æ˜¯CIDRåªèƒ½æé«˜IPåœ°å€çš„åˆ©ç”¨ç‡ï¼Œå¹¶ä¸èƒ½æé«˜IPåœ°å€çš„ä¸Šé™ã€‚\næ‰€ä»¥ï¼Œå°±è¡ç”Ÿå‡ºäº†éƒ¨åˆ†ç‰¹æ®Šçš„IPåœ°å€ã€‚è¿™äº›IPåœ°å€è¢«è§„å®šåªèƒ½ç”¨äºå±€åŸŸç½‘ï¼Œç”±æ­¤æ¥å‡å°‘å¯¹å…¬ç½‘IPçš„åœ°å€æ¶ˆè€—ã€‚\n\nå°†IPåœ°å€ä¸­çš„ä¸»æœºåœ°å€å…¨è®¾ä¸º0ï¼Œå°±æ˜¯è¯¥åœ°å€çš„ç½‘ç»œå·ï¼Œä»£è¡¨å½“å‰å±€åŸŸç½‘\nå°†IPåœ°å€ä¸­çš„ä¸»æœºåœ°å€å…¨è®¾ä¸º1ï¼Œå°±æ˜¯å¹¿æ’­åœ°å€ï¼Œç”¨äºç»™åŒä¸€ä¸ªé“¾è·¯ä¸­ç›¸äº’è¿æ¥çš„æ‰€æœ‰ä¸»æœºå‘é€æ•°æ®åŒ…ã€‚\n127.*çš„IPåœ°å€ç”¨äºæœ¬æœºå›ç¯ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨127.0.0.1æ¥è¿›è¡Œæœ¬åœ°æœåŠ¡çš„è®¿é—®å’Œæµ‹è¯•ï¼Œè¯¥IPåœ°å€æ˜¯IPv4å›ç¯åœ°å€çš„æ ‡å‡†è§„å®šï¼ŒIPv6çš„å›ç¯åœ°å€ä¸º::1ã€‚\n\næˆ‘ä»¬åœ¨è®¡ç®—ä¸€ä¸ªå±€åŸŸç½‘ä¸­æœ‰å¤šå°‘è®¾å¤‡çš„æ—¶å€™ï¼Œéœ€è¦å‡æ‰ä¸Šæ–‡æåˆ°çš„ç½‘ç»œå·å’Œå¹¿æ’­åœ°å€ã€‚\n\nä»¥ä¸‹æ˜¯ç‰¹æ®Šçš„åªèƒ½ç”¨äºå±€åŸŸç½‘çš„ç§æœ‰IPåœ°å€ï¼ŒåŒ…å«åœ¨è¿™ä¸ªèŒƒå›´ä¸­çš„ï¼Œ éƒ½ç§°ä¸ºç§æœ‰IPï¼Œ å…¶ä½™çš„åˆ™ç§°ä¸ºå…¨å±€IP (æˆ–å…¬ç½‘IP)\n\n10.*, å‰8ä½æ˜¯ç½‘ç»œå·ï¼Œå…±16,777,216ä¸ªåœ°å€ \n172.16.åˆ°172.31.ï¼Œå‰12ä½æ˜¯ç½‘ç»œå·ï¼Œå…±1,048,576ä¸ªåœ°å€ \n192.168.*ï¼Œå‰16ä½æ˜¯ç½‘ç»œå·ï¼Œå…±65,536ä¸ªåœ°å€\n\nè¿™é‡Œè¦è®°ä½2çš„16æ¬¡æ–¹ä¸º65536ï¼Œåœ¨ç½‘ç»œçš„çŸ¥è¯†ç‚¹é‡Œé¢ç»å¸¸ä¼šæ¥è§¦åˆ°è¿™ä¸ªæ•°å­—ã€‚\n4.2 loopbackç¯å›ä¸Šæ–‡æåˆ°äº†127.*æ˜¯ç”¨äºæœ¬åœ°ç¯å›çš„ã€‚ä¸‹å›¾æ˜¯ç¯å›é©±åŠ¨ç¨‹åºé’ˆå¯¹IPåœ°å€çš„åˆ¤æ–­\n\nåœ¨äº‘æœåŠ¡å™¨ä¸Šæ‰§è¡Œifconfigï¼Œä¹Ÿèƒ½çœ‹åˆ°æœ¬åœ°ç¯å›çš„é…ç½®é¡¹ï¼›è¿™é‡Œæˆ‘ä»¬èƒ½å‘ç°ï¼Œæœ¬åœ°ç¯å›çš„MTUæ˜¯è¿œé«˜äºç½‘ç»œçš„1500ã€‚æ¯•ç«Ÿæ˜¯è‡ªå·±å’Œè‡ªå·±é€šä¿¡ï¼ŒåŸºæœ¬ä¸ä¼šå‡ºç°ä¸¢åŒ…ï¼Œä¼ è¾“é€Ÿåº¦ä¹Ÿæ˜¯é£å¿«ï¼Œä¹Ÿå°±ä¸ç”¨æ‹…å¿ƒæ•°æ®åŒ…å¤ªå¤§çš„é—®é¢˜\nåŒæ—¶ä¹Ÿèƒ½å‘ç°ï¼Œæˆ‘ä»¬çš„äº‘æœåŠ¡å™¨è¢«åˆ†é…åˆ°çš„ipåœ°å€å¹¶ä¸æ˜¯äº‘æœåŠ¡å™¨çš„å…¬ç½‘ipï¼Œè¿™ä¹Ÿå°±è¡¨æ˜äº†æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨å¹¶æ²¡æœ‰è¢«ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œè€Œæ˜¯é€šè¿‡äº†äº‘æœåŠ¡å™¨å‚å®¶çš„å…¥ç½‘æœåŠ¡å™¨ï¼ˆæˆ–è€…ä¹Ÿå«è·¯ç”±å™¨ï¼‰æ¥è¿›è¡Œå…¬ç½‘ipçš„æ˜ å°„å’Œæ•°æ®åŒ…çš„è½¬å‘æ“ä½œã€‚\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500        inet 10.0.12.2  netmask 255.255.252.0  broadcast 10.0.15.255        inet6 fe80::5054:ff:fec9:274f  prefixlen 64  scopeid 0x20&lt;link&gt;        ether 52:54:00:c9:27:4f  txqueuelen 1000  (Ethernet)        RX packets 277674393  bytes 80031748700 (74.5 GiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 302405663  bytes 162670581730 (151.4 GiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536        inet 127.0.0.1  netmask 255.0.0.0        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;        loop  txqueuelen 1000  (Local Loopback)        RX packets 111135687  bytes 27644436547 (25.7 GiB)        RX errors 0  dropped 0  overruns 0  frame 0        TX packets 111135687  bytes 27644436547 (25.7 GiB)        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n4.2.1 ç¯å›ä¸Šå›¾ä¸­çš„ç¯å›é©±åŠ¨ç¨‹åºä¼šç›´æ¥å’ŒIPåè®®çš„æ¥æ”¶ç«¯ï¼ˆå³IPè¾“å…¥å‡½æ•°ï¼‰ç›¸è¿ï¼Œå½“æ£€æµ‹åˆ° 127.0.0.1 çš„IPè®¿é—®è¯·æ±‚çš„æ—¶å€™ï¼Œä¼šç›´æ¥æŠŠè¿™ä¸ªæŠ¥æ–‡è½¬å‘ç»™IPè¾“å…¥å‡½æ•°ï¼Œè€Œä¸å°†å…¶æ’å…¥åˆ°ä»¥å¤ªç½‘ä¸­ã€‚\nå°±ç›¸å½“äºä½ çŸ¥é“ 127.0.0.1 è¿™ä¸ªIPåœ°å€ä»£è¡¨çš„å°±æ˜¯ä½ è‡ªå·±ï¼Œä½ æƒ³è®¿é—®è‡ªå·±ç”µè„‘ä¸Š8080ç«¯å£çš„ç¨‹åºï¼Œå³ä¾¿ä¹ˆæœ‰æ¥å…¥äº’è”ç½‘çš„çŠ¶å†µä¸‹ä¹Ÿæ˜¯èƒ½æ­£å¸¸è®¿é—®çš„ï¼\nLoopbackç¯å›æ¥å£å¯¹äºæµ‹è¯•å’Œè¯Šæ–­æœ¬åœ°ä¸»æœºä¸Šçš„ç½‘ç»œæœåŠ¡å’Œåº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æ¨¡æ‹Ÿç½‘ç»œé€šä¿¡è€Œä¸æ¶‰åŠå®é™…çš„ç½‘ç»œä¼ è¾“ã€‚\n4.2.2 ARPARPæ˜¯ä¸€ä¸ªåœ¨å±€åŸŸç½‘æ•°æ®é“¾è·¯å±‚é€šè¿‡IPè·å–åˆ°å±€åŸŸç½‘ä¸»æœºMACåœ°å€çš„åè®®ï¼Œå…·ä½“è¯·å‚è€ƒåæ–‡ä¸­çš„è§£æ\n\n4.3 è®¿é—®å¹¿åŸŸç½‘çš„æ­¥éª¤4.3.1 è¯´æ˜ä¸‹å›¾ä¸­èƒ½çœ‹åˆ°æˆ‘ä»¬å®¶ç”¨ä¸»æœºæ˜¯æ€ä¹ˆæ¥è¿›è¡Œå¹¿åŸŸç½‘çš„è®¿é—®çš„åŸºæœ¬æµç¨‹ï¼›\næˆ‘ä»¬å®¶é‡Œçš„è·¯ç”±å™¨é™¤äº†è¿›è¡Œè·¯ç”±è½¬å‘ï¼Œè¿˜æœ‰å­ç½‘åˆ’åˆ†çš„åŠŸèƒ½ã€‚å¯ä»¥çœ‹åˆ°å·¦ä¸‹è§’è™½ç„¶æ˜¯ä¸¤ä¸ªä¸åŒçš„å®¶åº­ï¼Œä½†å…¶å¯ä»¥åˆ†é…å‡ºå®Œå…¨ä¸€æ ·çš„å±€åŸŸç½‘çš„å­ç½‘ip 192.168.1.1ï¼Œå’Œä¸åŒçš„WANå£IPï¼ˆWANå£å°±æ˜¯è·¯ç”±å™¨è¿æ¥äº’è”ç½‘çš„å£ï¼‰\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„è®¾å¤‡æ˜¯ç›´æ¥å’Œå½“å‰è·¯ç”±å™¨ç›¸è¿çš„ï¼Œè®¿é—®çš„æ—¶å€™ä¹Ÿåªèƒ½é€šè¿‡å½“å‰è·¯ç”±å™¨æ¥è¿›è¡Œå±€åŸŸç½‘IPçš„è½¬å‘ã€‚ä¸å¯èƒ½ä¼šå‡ºç°æˆ‘è®¿é—®ä¸€ä¸ªå±€åŸŸç½‘IPï¼Œå´è·‘åˆ°äº†åˆ«äººå®¶é‡Œçš„è®¾å¤‡ä¸Šçš„æƒ…å†µã€‚å› ä¸ºè¿™ä¸ªå±€åŸŸç½‘IPè®¿é—®çš„æŠ¥æ–‡å¹¶ä¸ä¼šè¢«è½¬å‘åˆ°ä¸Šå±‚è·¯ç”±å™¨ä¸Šï¼Œä¹Ÿå°±ä¸å¯èƒ½å‡­ç©ºé£åˆ°å…¶ä»–å±€åŸŸç½‘ä¸­\n\nå›¾ä¸­çš„ 122.77.241.3 å°±æ˜¯ä¸€ä¸ªå…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œå½“æˆ‘ä»¬éœ€è¦è®¿é—®è¿™ä¸ªä¸»æœºçš„æ—¶å€™ï¼Œå±€åŸŸç½‘çš„å®¶ç”¨è·¯ç”±å™¨åœ¨æ£€æµ‹åˆ°è¿™ä¸ªç›®çš„IPçš„æ—¶å€™ï¼Œå‘ç°å…¶å¹¶ä¸æ˜¯å±€åŸŸç½‘çš„IPåœ°å€ï¼Œäºæ˜¯å°±ä¼šå°†è¿™ä¸ªæŠ¥æ–‡ç»™è½¬å‘ç»™ä¸Šå±‚çš„è¿è¥å•†è·¯ç”±å™¨ã€‚\nè¿è¥å•†è·¯ç”±å™¨æ˜¯ç›´æ¥æ¥å…¥äº†å…¬ç½‘IPçš„ï¼Œå…¶å°±èƒ½é€šè¿‡ç½‘æ®µåˆ’åˆ†+ä¸»æœºç¼–å·æ¥æŸ¥æ‰¾ç›®æ ‡ä¸»æœºï¼Œå°†æŠ¥æ–‡è½¬å‘ç»™ 122.77.241.3  æœåŠ¡å™¨ï¼Œå†å°†æœåŠ¡å™¨è¿”å›çš„ä¿¡æ¯è½¬å‘ç»™ä½ çš„å®¶ç”¨è·¯ç”±å™¨ï¼Œå†è½¬å‘åˆ°ä½ çš„ä¸»æœºä¸Šã€‚\nè¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œæƒ³ç»•è¿‡è¿è¥å•†ç›´æ¥è·å¾—å…¬ç½‘IPæ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºä»ç‰©ç†å±‚é¢ä¸Šï¼Œæˆ‘ä»¬çš„å®¶ç”¨è·¯ç”±å™¨å°±ä¸æ˜¯æ¥åœ¨å…¬ç½‘IPä¸Šçš„ï¼å³ä¾¿æ˜¯å¯ä»¥ç”³è¯·åˆ°çš„å®¶ç”¨å…¬ç½‘IPï¼Œä¹Ÿå’Œäº‘æœåŠ¡å™¨çš„å…¥ç½‘æœåŠ¡å™¨ä¸€æ ·ï¼Œæ˜¯è¿è¥å•†çš„è·¯ç”±å™¨åˆ†é…ç»™ä½ çš„ã€‚\n\nä½ ä¼šå‘ç°ï¼Œå®¶ç”¨ç”³è¯·çš„å…¬ç½‘ipï¼Œå¾ˆå¤šç«¯å£éƒ½æ˜¯è¢«å±è”½çš„ï¼ˆæ¯”å¦‚ 80/443/8080ï¼‰è¿™äº›ç«¯å£çš„å±è”½æ“ä½œï¼Œä»¥åŠæµ·å¤–ç½‘ç«™çš„ã€Œå¢™ã€ä¹Ÿæ˜¯è¿è¥å•†çš„è·¯ç”±å™¨è¿›è¡Œæ£€æµ‹å’Œå±è”½çš„ï¼\n\n4.3.2 å†…ç½‘è®¿é—®å…¬ç½‘çš„æµç¨‹å‡è®¾æˆ‘ä»¬çš„æ¨¡å‹å¦‚ä¸‹\nå¹¿åŸŸç½‘  â†“è¿è¥å•†è·¯ç”±å™¨C ï¼ˆå…¬ç½‘IPæ˜¯122.77.241.4ï¼‰  â†“å®¶ç”¨è·¯ç”±å™¨B ï¼ˆè¿è¥å•†è·¯ç”±å™¨åˆ†é…ç§æœ‰IP 10.1.1.2ï¼‰  â†“å®¶ç”¨ä¸»æœºA ï¼ˆå®¶ç”¨è·¯ç”±å™¨åˆ†é…ç§æœ‰IP 192.168.1.201ï¼‰\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå®¶ç”¨ä¸»æœºAï¼Œè®¿é—®å…¬ç½‘IPçš„ä¸»æœº 122.77.241.10 çš„å…·ä½“æ­¥éª¤ï¼›\næœ¬åœ°ä¸»æœºAå‘é€IPæŠ¥æ–‡ç»™å®¶åº­è·¯ç”±å™¨Bâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”| æºIPï¼š192.168.1.201   || ç›®çš„IPï¼š122.77.241.10 |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è·¯ç”±å™¨Bæ”¶åˆ°æŠ¥æ–‡åï¼Œæ£€æµ‹ç›®çš„IPï¼Œå‘ç°å¹¶ä¸ä¼¼å±€åŸŸç½‘çš„IPäºæ˜¯äº¤ä»˜ç»™ä¸Šå±‚çš„è¿è¥å•†è·¯ç”±å™¨Cï¼›æŠ¥æ–‡çš„æºIPè¢«ä¿®æ”¹ä¸ºå®¶ç”¨è·¯ç”±å™¨Bçš„wanå£IPâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”| æºIPï¼š10.1.1.2        || ç›®çš„IPï¼š122.77.241.10 |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”è¿è¥å•†è·¯ç”±å™¨Cæ”¶åˆ°æŠ¥æ–‡åï¼Œå‘ç°å…¶ä¹Ÿä¸æ˜¯è‡ªå·±æ‰€åœ¨å†…ç½‘ 10.1.1.* çš„å±€åŸŸç½‘IPäºæ˜¯å¼€å§‹æ‰§è¡Œå¹¿åŸŸç½‘IPå¯»å€æ“ä½œï¼Œæ‰¾åˆ°ç›®æ ‡å…¬ç½‘IPçš„ä¸»æœºï¼Œå†å°†æŠ¥æ–‡å‘é€ç»™è¯¥ä¸»æœºï¼›æ­¤æ—¶å‘é€çš„æŠ¥æ–‡åˆè¢«æ”¹æˆäº†â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”| æºIPï¼š122.77.241.4    || ç›®çš„IPï¼š122.77.241.10 |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\n4.3.3 NATæŠ€æœ¯è¿™ç§ä¸æ–­æ›¿æ¢æºIPæ¥è¿›è¡Œè·¯ç”±è½¬å‘çš„è¿‡ç¨‹ï¼Œå°±æ˜¯NATæŠ€æœ¯ï¼\nä¹Ÿæ­£æ˜¯NATæŠ€æœ¯çš„å­˜åœ¨ï¼Œè®©æˆ‘ä»¬èƒ½é€šè¿‡å¤šçº§å±€åŸŸç½‘æ¥è®©æ›´å¤šçš„è®¾å¤‡ä¸Šç½‘ï¼Œå¤§å¤§ç¼“è§£äº†å…¬ç½‘IPçš„ä¸è¶³ã€‚\nä¹Ÿæ­£æ˜¯å› ä¸ºIPV4åœ°å€ä¸è¶³çš„é—®é¢˜è¢«å¤§å¤§ç¼“è§£ï¼Œæ¨å¹¿IPV6å°±æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£ä¹ˆé¡ºåˆ©äº†ã€‚æ¯•ç«ŸIPV6çš„IPæ ¼å¼å’ŒV4å®Œå…¨ä¸åŒï¼Œéœ€è¦æ¯ä¸ªå±‚çº§çš„è·¯ç”±å™¨éƒ½è¿›è¡ŒåŠŸèƒ½å‡çº§ï¼Œè¿™å¯æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥ç¨‹ï¼\n\n4.3.4 NATæ€ä¹ˆå›æ¥ï¼ŸNAPTå½“ç›®æ ‡ä¸»æœºæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡åï¼Œä»–çš„åé¦ˆæŠ¥æ–‡å¦‚ä¸‹\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”| æºIPï¼š122.77.241.10   || ç›®çš„IPï¼š122.77.241.4  |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\nåŒæ ·æ˜¯å…ˆåˆ°è¾¾è¿è¥å•†è·¯ç”±å™¨ï¼Œè¿è¥å•†è·¯ç”±å™¨éœ€è¦ç¼“å­˜æ¯ä¸€ä¸ªè½¬å‘åˆ°å…¬ç½‘çš„æŠ¥æ–‡çš„æ¥æºä¿¡æ¯ï¼›ä¸ºæ­¤è·¯ç”±å™¨ä¼šç»´æŠ¤ä¸€ä¸ªè½¬æ¢è¡¨ï¼Œè®°å½•ç€å±€åŸŸç½‘ä¸»æœºçš„ç§æœ‰IPåœ°å€:ç«¯å£å·ä¸å¯¹åº”çš„å…¬ç½‘IPåœ°å€:NATç«¯å£å·çš„æ˜ å°„å…³ç³»ã€‚\næ¯”å¦‚æ­¤æ¬¡TCPé“¾æ¥ä¸­ï¼Œæˆ‘å°†è·¯ç”±å™¨å…¬ç½‘IPçš„122.77.241.4:30000æ˜ å°„ç»™äº†å±€åŸŸç½‘10.1.1.2:40000ï¼›å½“ä»å…¬ç½‘æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”æŠ¥æ–‡åï¼Œä»è½¬æ¢è¡¨é‡Œé¢å°±èƒ½å¤ŸæŸ¥åˆ°è¿™ä¸ªæ˜ å°„ï¼ˆä¸€æ¬¡é€šä¿¡ä¸­è¿™ä¸ªNATæ˜ å°„æ˜¯ä¸ä¼šå˜çš„ï¼‰ä»è€Œç¡®å®šè¯¥æŠ¥æ–‡çš„å±€åŸŸç½‘æµå‘ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNATæŠ€æœ¯åœ¨ç«¯å£æ˜ å°„çš„æ—¶å€™ä¸ä¸€å®šä¼šæ˜ å°„åˆ°å’Œå†…ç½‘ä¸»æœºç›¸åŒçš„ç«¯å£ï¼Œæ­¤æ—¶ä¸ä»…éœ€è¦ä¿®æ”¹IPæŠ¥æ–‡ä¸­çš„æ¥æºIPï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥ä¿®æ”¹ä¼ è¾“å±‚ï¼ˆæ¯”å¦‚TCPå’ŒUDPï¼‰ä¸­çš„æºç«¯å£å·\n\nç¡®å®šå±€åŸŸç½‘IPåï¼Œå°±ä¿®æ”¹å½“å‰æŠ¥æ–‡çš„ç›®çš„IPï¼Œç»§ç»­å¾€å±€åŸŸç½‘è½¬å‘ï¼›åé¢çš„å­è·¯ç”±å™¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸å†èµ˜è¿°ã€‚\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”| æºIPï¼š122.77.241.10   || ç›®çš„IPï¼š10.1.1.2      |â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\nè¿™ç§IP:ç«¯å£çš„å…³è”å…³ç³»è¡¨ï¼Œå°±æ˜¯ç”±æ”¯æŒNATæŠ€æœ¯çš„è·¯ç”±å™¨æ¥ç»´æŠ¤çš„ï¼Œè¿™ä¸ªè½¬æ¢è¡¨è¢«ç§°ä¸ºNAPTï¼›å½“è¿™æ¬¡é“¾æ¥ç»“æŸåï¼Œè¿™å¯¹æ˜ å°„å…³ç³»å°±ä¼šä»è½¬æ¢è¡¨ä¸­è¢«åˆ é™¤ã€‚\n\n4.3.5 NATå’Œä»£ç†æœåŠ¡å™¨ä»£ç†æœåŠ¡å™¨çœ‹ä¸Šå»å’ŒNATè®¾å¤‡æœ‰ä¸€å®šç±»ä¼¼ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»£ç†æœåŠ¡å™¨å°†è¯·æ±‚è½¬å‘ç»™çœŸæ­£éœ€è¦è¯·æ±‚çš„æœåŠ¡å™¨ï¼›æœåŠ¡å™¨è¿”å›ç»“æœåï¼Œä»£ç†æœåŠ¡å™¨æŠŠç»“æœä¼ å›å®¢æˆ·ç«¯ã€‚\n4.3.5.1 NATå’Œä»£ç†æœåŠ¡å™¨çš„åŒºåˆ«ï¼Ÿ\nä»åº”ç”¨æ¥è¯´ï¼ŒNATæ˜¯å±äºç½‘ç»œåŸºç¡€è®¾ç½®ï¼Œè§£å†³çš„æ˜¯å…¬ç½‘IPä¸è¶³çš„é—®é¢˜ï¼›ä»£ç†æœåŠ¡å™¨æ›´è´´è¿‘å…·ä½“åº”ç”¨ï¼Œæ¯”å¦‚é€šè¿‡ä»£ç†æœåŠ¡å™¨è¿›è¡Œâ€œç¿»å¢™â€å’Œæ¸¸æˆåŠ é€Ÿï¼›\nä»åº•å±‚æ¥è®²ï¼ŒNATåœ¨ç½‘ç»œå±‚å·¥ä½œï¼Œå¯¹IPåœ°å€è¿›è¡Œæ›¿æ¢ï¼›ä»£ç†æœåŠ¡å™¨æ˜¯åœ¨åº”ç”¨å±‚å·¥ä½œï¼›\nä»ä½¿ç”¨èŒƒå›´æ¥è®²ï¼ŒNATä¸€èˆ¬éƒ¨ç½²åœ¨å±€åŸŸç½‘å‡ºå£ï¼Œä»£ç†æœåŠ¡å™¨æ—¢å¯ä»¥åœ¨å±€åŸŸç½‘åˆå¯ä»¥åœ¨å¹¿åŸŸç½‘éƒ¨ç½²\nä»éƒ¨ç½²ä½ç½®æ¥çœ‹ï¼ŒNATé›†æˆåœ¨è·¯ç”±å™¨æˆ–è€…é˜²ç«å¢™çš„ç¡¬ä»¶ä¸Šï¼›ä»£ç†æœåŠ¡å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåº”ç”¨å±‚è½¯ä»¶ï¼Œéƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Š\n\nä»£ç†æœåŠ¡å™¨åº”ç”¨ç›¸å¯¹æ¥è¯´ä¹Ÿæ¯”è¾ƒå¹¿\n\nç¿»å¢™ï¼šå¹¿åŸŸç½‘ä»£ç†\nè´Ÿè½½å‡è¡¡ï¼šå±€åŸŸç½‘ä»£ç†\n\n4.3.5.2 åå‘ä»£ç†ä»£ç†æœåŠ¡å™¨åˆ†ä¸ºæ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼Œè¿™é‡Œæ¥è¯´è¯´åå‘ä»£ç†ï¼Œåå‘ä»£ç†å¤„äºç›®æ ‡æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ï¼Œå®¢æˆ·ç«¯é€šè¿‡åå‘ä»£ç†è®¿é—®ç›®æ ‡æœåŠ¡å™¨ï¼Œè€Œä¸ä¼šç›´æ¥è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨\n\né€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªäº‘æœåŠ¡å™¨ä¸»æœºé›†ç¾¤çš„å…¥ç½‘æœåŠ¡å™¨\nä¸¾ä¾‹ï¼Œä¸€ä¸ªç½‘ç«™æ‹¥æœ‰10å°æä¾›æœåŠ¡çš„æœåŠ¡å™¨å’Œä¸€å°åå‘ä»£ç†æœåŠ¡å™¨\nåŸŸåè§£æåˆ°åå‘ä»£ç†æœåŠ¡å™¨\nåå‘ä»£ç†æœåŠ¡å™¨é€šè¿‡æœåŠ¡å™¨ç›‘æ§ç¨‹åºï¼Œè·å–åˆ°10å°æœåŠ¡å™¨ä¸­è´Ÿè½½æœ€ä½çš„é‚£ä¸ªï¼Œå¹¶å°†æŠ¥æ–‡è½¬å‘ç»™å®ƒ\nåå‘ä»£ç†æœåŠ¡å™¨è¿˜ä¼šè¯†åˆ«10å°æœåŠ¡å™¨ä¸­æ˜¯å¦æœ‰å®•æœºçš„æœåŠ¡å™¨ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šå‘Šè­¦ç»™ç»´æŠ¤äººå‘˜ï¼Œå¹¶ä¸å†ç»™è¿™ä¸ªå®•æœºçš„æœåŠ¡å™¨è½¬å‘æŠ¥æ–‡\nåå‘ä»£ç†æœåŠ¡å™¨è¿˜å¯ä»¥è®¾ç½®é»‘ç™½åå•ï¼Œå½“é‡åˆ°DDOSæ”»å‡»çš„æ—¶å€™ï¼Œå°†æ¥æºIPæ”¾å…¥é»‘åå•è¿›è¡Œå±è”½ï¼Œé¿å…è¿‡å¤šçš„è®¿é—®è®©æ‰€æœ‰æœåŠ¡å™¨éƒ½å®•æœºå½±å“ä¸šåŠ¡ï¼›å°†æœ¬å…¬å¸çš„å…¶ä»–æœåŠ¡å™¨æ”¾å…¥ç™½åå•ï¼ˆä¸€èˆ¬ç™½åå•éƒ½å¾ˆçŸ­ï¼‰\n\nåå‘ä»£ç†çš„ä½œç”¨\n\né€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨å®ç°äº†è´Ÿè½½å‡è¡¡\nä¾¿äºç»Ÿä¸€ç®¡ç†æœåŠ¡å™¨é›†ç¾¤ï¼Œæä¾›ç»Ÿä¸€å…¥ç½‘æœåŠ¡å™¨\né¿å…äº†ç›´æ¥å°†æä¾›æœåŠ¡çš„ä¸»æœºIPæš´éœ²åœ¨å…¬ç½‘ä¸Šè€Œè¢«ç›´æ¥æ”»å‡»çš„é—®é¢˜ï¼Œæé«˜äº†å®‰å…¨æ€§ã€‚\nåå‘ä»£ç†è¿˜èƒ½å¯¹ç½‘é¡µå†…å®¹è¿›è¡Œä¸€å®šçš„ç¼“å­˜ï¼Œä»è€Œå‡è½»åç«¯æœåŠ¡å™¨çš„è´Ÿæ‹…ï¼ˆæ¯”å¦‚ç¼“å­˜ç½‘é¡µå‰ç«¯çš„é™æ€èµ„æºï¼Œå½“ç”¨æˆ·è®¿é—®çš„æ—¶å€™ï¼Œç”±ä»£ç†æœåŠ¡å™¨ç›´æ¥è¿”å›èµ„æºï¼Œè€Œä¸éœ€è¦å»è¯·æ±‚å®é™…æä¾›æœåŠ¡çš„æœåŠ¡å™¨ï¼‰\n\næ€»ä¹‹å¥½å¤„å¤šå¤šï¼\n4.3.5.3 æ­£å‘ä»£ç†æ­£å‘ä»£ç†æ˜¯ä½äºå®¢æˆ·ç«¯å’Œç›®æ ‡æœåŠ¡å™¨ä¹‹é—´çš„ä¸­é—´æœåŠ¡å™¨ã€‚å®¢æˆ·ç«¯é€šè¿‡æ­£å‘ä»£ç†æ¥è®¿é—®äº’è”ç½‘ä¸Šçš„èµ„æºï¼Œè€Œä¸æ˜¯ç›´æ¥è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚æ­£å‘ä»£ç†çš„ä½œç”¨ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nè®¿é—®æ§åˆ¶å’Œè¿‡æ»¤ï¼š æ­£å‘ä»£ç†å¯ä»¥ç”¨äºé™åˆ¶ç”¨æˆ·è®¿é—®ç‰¹å®šç½‘ç«™æˆ–èµ„æºï¼Œä»¥å®æ–½è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚å®ƒå¯ä»¥è¿‡æ»¤ä¸è‰¯å†…å®¹ï¼Œæä¾›æ›´å¥½çš„å®‰å…¨æ€§å’Œéšç§ä¿æŠ¤ã€‚\néšè—å®¢æˆ·ç«¯èº«ä»½ï¼š æ­£å‘ä»£ç†å¯ä»¥éšè—å®¢æˆ·ç«¯çš„çœŸå® IP åœ°å€ï¼Œä»è€Œä¿æŠ¤ç”¨æˆ·çš„éšç§å’ŒåŒ¿åæ€§ã€‚ç›®æ ‡æœåŠ¡å™¨åªèƒ½çœ‹åˆ°ä»£ç†æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œè€Œæ— æ³•è·å–åˆ°çœŸæ­£çš„å®¢æˆ·ç«¯ä¿¡æ¯ã€‚\nç¼“å­˜å’ŒåŠ é€Ÿï¼š æ­£å‘ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜å¸¸ç”¨çš„å†…å®¹ï¼Œä»è€Œå‡å°‘å¯¹ç›®æ ‡æœåŠ¡å™¨çš„è¯·æ±‚ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚\nçªç ´é˜²ç«å¢™é™åˆ¶ï¼š åœ¨ä¸€äº›ç½‘ç»œç¯å¢ƒä¸­ï¼Œè®¿é—®ç‰¹å®šç½‘ç«™å¯èƒ½å—åˆ°é™åˆ¶æˆ–å°é”ã€‚ä½¿ç”¨æ­£å‘ä»£ç†å¯ä»¥ç»•è¿‡è¿™äº›é™åˆ¶ï¼Œè®¿é—®è¢«å°é”çš„èµ„æºã€‚\n\n4.4 ISPæ£€æµ‹å®½å¸¦è´¦æˆ·\nä¸‹æ–‡ä¸­çš„éƒ¨åˆ†å†…å®¹æ¥è‡ªchatgptï¼Œæˆ‘å¯¹é‡Œé¢çš„å†…å®¹è¿›è¡Œäº†è¡¥å……å’Œä¿®æ”¹\n\nè¿è¥å•†çš„è·¯ç”±å™¨è¿˜ä¼šæ£€æµ‹æˆ‘ä»¬çš„è´¦æˆ·æ˜¯å¦è¿˜æœ‰ä½™é¢ã€‚æˆ‘ä»¬çš„å®¶ç”¨è·¯ç”±å™¨ä¸€èˆ¬æ˜¯é€šè¿‡å…‰çŒ«ç™»å½•äº†è‡ªå·±çš„å®½å¸¦è´¦æˆ·ï¼›ä¹Ÿå¯ä»¥å°†å…‰çŒ«è®¾ç½®æˆæ¡¥æ¥æ¨¡å¼ï¼Œå°†æ¥å…¥å…‰çŒ«çš„è·¯ç”±å™¨è®¾ç½®ä¸ºå®½å¸¦å¸å·ï¼ˆPPPoEï¼‰ä¸Šç½‘æ–¹å¼ï¼Œç™»å½•è¿è¥å•†æä¾›çš„å®½å¸¦è´¦æˆ·å’Œå¯†ç ï¼Œæ¥æ¥å…¥ç½‘ç»œã€‚\nISPçš„è·¯ç”±å™¨æ£€æµ‹ä½ çš„å®½å¸¦è´¦æˆ·é€šå¸¸æ˜¯é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥å®Œæˆçš„ï¼š\n\nè®¾å¤‡è¿æ¥ä¸è¯†åˆ«ï¼š å½“ä½ çš„è®¡ç®—æœºæˆ–å…¶ä»–ç½‘ç»œè®¾å¤‡è¿æ¥åˆ°ISPæä¾›çš„è·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨ä¼šåˆ†é…ä¸€ä¸ªç§æœ‰IPåœ°å€ç»™ä½ çš„è®¾å¤‡ã€‚è¿™ä¸ªIPåœ°å€æ˜¯ç”±è·¯ç”±å™¨åŠ¨æ€åˆ†é…çš„ï¼Œå¹¶ä¸”é€šå¸¸å¤„äºç‰¹å®šçš„ç§æœ‰IPåœ°å€èŒƒå›´ï¼Œæ¯”å¦‚10.11.1.0/16æˆ–10.11.1.0/24ç­‰ã€‚æ­¤æ—¶ï¼Œä½ çš„è®¾å¤‡ä¸è·¯ç”±å™¨å»ºç«‹äº†ä¸€ä¸ªå¤§å±€åŸŸç½‘å†…çš„è¿æ¥ã€‚ï¼ˆè¿è¥å•†å¹¶ä¸ä¼šç›´æ¥ç»™ä½ åˆ†é…192.168.*è¿™æ ·çš„ç§æœ‰IPï¼Œå› ä¸ºè¿™ä¸ªIPä¸€èˆ¬æ˜¯ç”¨äºæœ€åº•å±‚å±€åŸŸç½‘çš„ï¼Œç»™ä½ åˆ†é…äº†ï¼Œé‚£å®¶åº­å±€åŸŸç½‘çš„å°±æ²¡IPç”¨äº†ï¼‰\nè®¤è¯è¿‡ç¨‹ï¼š åœ¨ä½ å°è¯•è®¿é—®äº’è”ç½‘æ—¶ï¼ŒISPçš„è·¯ç”±å™¨ä¼šå¼•å¯¼ä½ çš„è®¾å¤‡è¿›è¡Œè®¤è¯è¿‡ç¨‹ã€‚è¿™é€šå¸¸æ¶‰åŠå‘ISPæœåŠ¡å™¨å‘é€ä½ çš„å®½å¸¦è´¦æˆ·çš„ç™»å½•å‡­æ®ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ·åå’Œå¯†ç ï¼‰ã€‚\nè´¦æˆ·éªŒè¯ï¼š ISPçš„æœåŠ¡å™¨ä¼šéªŒè¯ä½ æä¾›çš„ç™»å½•å‡­æ®æ˜¯å¦ä¸å…¶è®°å½•ä¸­çš„è´¦æˆ·åŒ¹é…ã€‚å¦‚æœéªŒè¯æˆåŠŸï¼Œè¯´æ˜ä½ çš„å®½å¸¦è´¦æˆ·æ˜¯æœ‰æ•ˆçš„ï¼Œè·¯ç”±å™¨ä¼šä¸ºä½ çš„è®¾å¤‡åˆ†é…ä¸€ä¸ªå…¬å…±IPåœ°å€ï¼Œè¿™ä¸ªIPåœ°å€æ˜¯å¯ä¾›äº’è”ç½‘è®¿é—®çš„ã€‚\nIPåœ°å€åˆ†é…ï¼š ä¸€æ—¦è®¤è¯æˆåŠŸï¼ŒISPçš„è·¯ç”±å™¨ä¼šä¸ºä½ çš„è®¾å¤‡åˆ†é…ä¸€ä¸ªå…¬å…±IPåœ°å€ã€‚è¿™ä¸ªIPåœ°å€æ˜¯åœ¨äº’è”ç½‘ä¸Šå”¯ä¸€æ ‡è¯†ä½ çš„è®¾å¤‡çš„åœ°å€ï¼Œä½¿ä½ çš„è®¾å¤‡å¯ä»¥ä¸å…¶ä»–äº’è”ç½‘è®¾å¤‡è¿›è¡Œé€šä¿¡ã€‚\næ•°æ®ä¼ è¾“ï¼š ä¸€æ—¦æœ‰äº†å…¬å…±IPåœ°å€ï¼Œä½ çš„è®¾å¤‡å°±å¯ä»¥ä¸äº’è”ç½‘ä¸Šçš„å…¶ä»–è®¾å¤‡è¿›è¡Œé€šä¿¡ï¼Œå‘é€å’Œæ¥æ”¶æ•°æ®ã€‚\n\nè¿™æ ·ï¼Œé€šè¿‡è®¤è¯å’ŒIPåœ°å€åˆ†é…çš„è¿‡ç¨‹ï¼ŒISPçš„è·¯ç”±å™¨å¯ä»¥æ£€æµ‹å¹¶è¯†åˆ«ä½ çš„å®½å¸¦è´¦æˆ·ï¼Œä»è€Œè®©ä½ çš„è®¾å¤‡èƒ½å¤Ÿè®¿é—®äº’è”ç½‘ã€‚\näººè¯å°±æ˜¯ï¼Œç™»å½•äº†å®½å¸¦è´¦æˆ·ä»¥åï¼Œå½“æˆ‘ä»¬è·¯ç”±å™¨å‘é€çš„æŠ¥æ–‡äº¤ä»˜åˆ°è¿è¥å•†è·¯ç”±å™¨çš„æ—¶å€™ï¼Œè¯¥è·¯ç”±å™¨å°±ä¼šæ£€æµ‹ä½ è¿™ä¸ªå®½å¸¦è´¦æˆ·çš„ä½™é¢ã€‚å¦‚æœæ²¡æœ‰ä½™é¢äº†ï¼Œå°±ä¼šç›´æ¥ä¸¢å¼ƒæ‰ä½ çš„IPæŠ¥æ–‡ã€‚æˆ‘ä»¬çœ‹åˆ°çš„ç»“æœå°±æ˜¯æ— æ³•ä¸Šç½‘ï¼\n\nè¿™ä¸ªæ“ä½œå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œçš„ï¼Œåªè¦ä½ çš„è·¯ç”±å™¨èƒ½ç¨³å®šçš„æ¥å…¥åˆ°è¿è¥å•†çš„è·¯ç”±å™¨ä¸Šï¼Œé‚£å°±ä¸ä¼šæ¯æ¬¡éƒ½è¿›è¡Œå®½å¸¦è´¦æˆ·çš„éªŒè¯ï¼Œå¦åˆ™ä¼šå¢åŠ ç½‘ç»œçš„è´Ÿæ‹…ã€‚\nå…·ä½“çš„éªŒè¯æµç¨‹éƒ½æ˜¯è¿è¥å•†è·¯ç”±å™¨å’Œä½ çš„æœ¬åœ°å…‰çŒ«è‡ªåŠ¨å®Œæˆçš„ã€‚\n\nè€Œæ‰‹æœºæ²¡æœ‰è¯è´¹ä½™é¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¾æ—§èƒ½æ‹¨é€šè¯¸å¦‚120ã€119ç­‰ç´§æ€¥å·ç ï¼Œè¿™ä¹Ÿæ˜¯è¿è¥å•†çš„æœåŠ¡å¯¹è¿™äº›ç‰¹æ®Šçš„ç”µè¯å·ç åšäº†ç±»ä¼¼äºå…è´¹ç™½åå•çš„æ“ä½œï¼ˆæ‰‹æœºå·ç å¯ä»¥ç±»æ¯”å…¬ç½‘IPæ¥ç†è§£ï¼‰\n5.åŸŸå5.1 DNSæœåŠ¡å™¨ä¸Šæ–‡è®²è¿°çš„éƒ½æ˜¯å…³äºIPåè®®çš„äº‹æƒ…ã€‚ä½†å®é™…ä¸Šæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šç›´æ¥ä½¿ç”¨IPåœ°å€+ç«¯å£å·çš„æ–¹å¼æ¥è®¿é—®æŸä¸€ä¸ªæœåŠ¡ï¼Œè€Œæ˜¯ä½¿ç”¨åŸŸåæ¥è®¿é—®ã€‚æ¯”å¦‚\nwww.baidu.comwww.google.com\n\næ‰€è°“åŸŸåï¼Œå°±æ˜¯è¿™äº›è‹±æ–‡å­—ç¬¦ä¸²å’ŒIPçš„æ˜ å°„ã€‚\næ¯”å¦‚baidu.comå°±æ˜¯ä¸€ä¸ªåŸŸåï¼Œè€Œwww.baidu.comæ˜¯è¯¥åŸŸåä¸‹çš„ä¸‰çº§åŸŸåï¼ˆå‡ çº§åŸŸåå¯ä»¥çœ‹æœ‰å‡ ä¸ªç‚¹ï¼‰\nå®é™…è®¿é—®çš„æ—¶å€™ï¼Œæ˜¯ç™¾åº¦åœ¨åŸŸåæ³¨å†Œå•†å“ªé‡Œï¼Œå°†www.baidu.comæŒ‡å‘äº†è‡ªå·±çš„æœåŠ¡å™¨çš„åœ°å€(å‡è®¾æŒ‡å‘çš„æ˜¯1.1.1.1) æˆ‘ä»¬è®¿é—®ç™¾åº¦ï¼Œå®é™…ä¸Šè®¿é—®çš„å°±æ˜¯ IPåœ°å€ 1.1.1.1ï¼›\n\nDNSæ˜¯åº”ç”¨å±‚åè®®ï¼Œåº•å±‚ä½¿ç”¨çš„æ˜¯UDP\nç³»ç»Ÿä¼šç¼“å­˜ä¸€éƒ¨åˆ†DNSçš„ç»“æœ\n\nåœ¨ä¸»æœºæœ¬åœ°ï¼Œæœ‰ä¸€ä¸ªhostsæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨äºè®¾ç½®ä¸»æœºåˆ°åŸŸåçš„æ˜ å°„ï¼Œåœ¨linuxé‡Œé¢å°±æ˜¯/etc/hostsè¿™ä¸ªæ–‡ä»¶ã€‚ åœ¨è®¿é—®åŸŸåçš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆæ£€æŸ¥è‡ªå·±æœ¬æœºå™¨çš„hostsï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰ï¼Œå°±è¯·æ±‚DNSæœåŠ¡å™¨æ¥è·å–è§£æç»“æœã€‚\n5.2 åŸŸåè®¿é—®ä¸»æœºæµç¨‹å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªåŸŸåçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»è¯·æ±‚ç‰¹æ®Šçš„DNSæœåŠ¡å™¨\n8.8.8.8 è°·æ­Œå…¬å¸çš„DNSæœåŠ¡å™¨119.29.29.29 è…¾è®¯æä¾›çš„å…¬å…±DNS\n\nå…ˆè¯·æ±‚è¿™äº›DNSæœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å†…ä¼šé’ˆå¯¹åŸŸåæŸ¥è¯¢å¯¹åº”çš„DNSè§£æï¼Œæœ€åå†è®¿é—®è¯¥è§£æå¯¹åº”çš„IPåœ°å€\nè€Œä½¿ç”¨åŸŸåçš„æ—¶å€™ï¼Œé»˜è®¤è®¿é—®çš„æ˜¯è¯¥ä¸»æœºçš„ 80(HTTP)/443(HTTPS) ç«¯å£ ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒIPä¸€æ ·ï¼Œåœ¨åŸŸåä¹‹åç”¨:ç«¯å£ æ¥æŒ‡å®šç‰¹å®šç«¯å£å·è¿›è¡Œè®¿é—®ï¼Œå³åŸŸå:ç«¯å£ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„ä¸»æœºéƒ½å¯ä»¥é€šè¿‡è‡ªåŠ¨é…ç½®DNSä»ä¸Šå±‚è·¯ç”±å™¨ä¸­è·å–åˆ°DNSæœåŠ¡å™¨çš„åœ°å€ï¼ˆæ¯”å¦‚è¿è¥å•†ä¼šåœ¨è·¯ç”±å™¨åŸºç«™ä¸­å†…ç½®DNSæœåŠ¡å™¨ï¼‰\n5.2.1 DNSåŠ«æŒæ‰€è°“DNSæ±¡æŸ“å’ŒDNSåŠ«æŒï¼Œå°±æ˜¯å› ä¸ºæˆ‘ä»¬è®¿é—®çš„DNSæœåŠ¡å™¨çš„æ—¶å€™ï¼Œè·å–åˆ°çš„ç»“æœå’Œé¢„æœŸä¸åŒï¼Œä»è€Œå¯¼è‡´æ— æ³•è®¿é—®ç›®æ ‡ç½‘ç«™ï¼Œæˆ–è€…è®¿é—®äº†å‡çš„ç›®æ ‡ç½‘ç«™\nwww.baidu.com æ˜æ˜åº”è¯¥æŒ‡å‘ 1.1.1.1ä½†è¢«åè›‹åŠ«æŒäº†DNSè§£æï¼Œå˜æˆäº†æŒ‡å‘ 1.1.1.3\n\nåè›‹å¯ä»¥åœ¨ 1.1.1.3 æœåŠ¡å™¨ä¸Šï¼Œæ­å»ºä¸€ä¸ªå’Œç™¾åº¦ã€Œçœ‹èµ·æ¥ã€ä¸€æ¨¡ä¸€æ ·çš„é¡µé¢ï¼Œå¹¶å°†ä½ çš„æŠ¥æ–‡ç»™è½¬å‘åˆ°ç™¾åº¦æœåŠ¡å™¨ä¸Šã€‚æ­¤æ—¶ä»–å°±é€šè¿‡ä¸­é—´è½¬å‘ï¼Œè·å–åˆ°äº†ä½ æŠ¥æ–‡ä¸­çš„ç”¨æˆ·ä¿¡æ¯ã€å¯†ç ç­‰ç­‰å‚æ•°ï¼›\nè¿™æ—¶å€™å› ä¸ºè¿™ä¸ªå‡çš„æœåŠ¡å™¨æ˜¯ç›´æ¥ç»™ä½ æä¾›æœåŠ¡äº†ï¼Œä½¿ç”¨çš„HTTPSè¯ä¹¦ä¹Ÿæ˜¯è¿™ä¸ªå‡æœåŠ¡å™¨çš„è¯ä¹¦ï¼Œå¯¹æ–¹å¯ä»¥ç›´æ¥é€šè¿‡è‡ªå·±çš„è¯ä¹¦è§£å¯†è·å–åˆ°ä½ çš„ä¿¡æ¯ï¼Œå†è½¬å‘ç»™ç™¾åº¦ã€‚\n5.2.2 DNSå’Œè´Ÿè½½å‡è¡¡å¯¹äºå¤§å…¬å¸è€Œè¨€ï¼ŒDNSè§£æè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ä½œç”¨ï¼Œå°±æ˜¯é€šè¿‡ä¸åŒåŒºåŸŸçš„è®¾ç½®æ¥å®ç°è´Ÿè½½çš„å‡è¡¡ã€‚\nå‡è®¾ç™¾åº¦åœ¨æ¯ä¸€ä¸ªçœä»½éƒ½è®¾ç«‹äº†ä¸€ä¸ªè‡ªå·±çš„æœºæˆ¿ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥é€šè¿‡DNSæœåŠ¡å™¨ï¼Œå½“ä¸åŒçœä»½çš„ç”¨æˆ·è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¿”å›ä»–å½“å‰æ‰€å¤„çœä»½çš„æœºæˆ¿åœ°å€ã€‚è¿™æ—¶å€™å°±å®ç°äº†æ¯ä¸ªæœºæˆ¿çš„è´Ÿè½½å‡è¡¡ã€‚\nåœ¨ç°å®ä¸­ï¼Œå°±æ˜¯å°†ä½ çš„è¯·æ±‚è½¬æ¥åˆ°ç¦»ä½ æœ€è¿‘çš„æ‹¥æœ‰æœºæˆ¿çš„çœä»½ï¼Œè¿™æ ·æ—¢èƒ½ä¿è¯æ‰€æœ‰æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ï¼Œåˆèƒ½ä¿è¯ä½ çš„è®¿é—®èƒ½è¾ƒå¿«åœ°è·å–åˆ°å“åº”ï¼ˆå¹¿ä¸œè®¿é—®å¹¿å·çš„æœåŠ¡å™¨ï¼Œè‚¯å®šæ¯”è®¿é—®åŒ—äº¬æœåŠ¡å™¨çš„å»¶è¿Ÿä½ä¸€äº›ï¼‰\n5.3 DNSåˆ†å±‚DNSæœåŠ¡å™¨ä¸ä¼šå­˜æ”¾æ‰€æœ‰å·²çŸ¥åŸŸåçš„IPè§£æï¼Œå› ä¸ºäº’è”ç½‘ä¸Šå­˜åœ¨å¤§é‡çš„åŸŸåï¼Œæ•°é‡åºå¤§ä¸”ä¸æ–­å¢é•¿ï¼Œå•ä¸€DNSæœåŠ¡å™¨æ— æ³•å­˜å‚¨å’Œå¤„ç†æ‰€æœ‰åŸŸåçš„IPæ˜ å°„ã€‚\nå®é™…ä¸Šï¼ŒDNSæœåŠ¡å™¨é€šè¿‡åˆ†å±‚çš„æ¶æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨æ ¹DNSæœåŠ¡å™¨å±‚çº§ï¼Œæœ‰ä¸€ç»„å…¨çƒæ€§çš„é¡¶çº§DNSæœåŠ¡å™¨ï¼Œå®ƒä»¬å­˜å‚¨é¡¶çº§åŸŸåï¼ˆä¾‹å¦‚.comã€.orgã€.netç­‰ï¼‰çš„IPåœ°å€ã€‚ç„¶åï¼Œåœ¨æ¯ä¸ªé¡¶çº§åŸŸåä¸‹ï¼Œæœ‰å…¶ä»–DNSæœåŠ¡å™¨ï¼Œè´Ÿè´£ç®¡ç†è¯¥é¡¶çº§åŸŸåä¸‹çš„å­åŸŸåï¼ˆä¾‹å¦‚ï¼Œgoogle.comã€facebook.comç­‰ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹ç»§ç»­å‘ä¸‹ï¼Œå½¢æˆäº†ä¸€ä¸ªå±‚çº§ç»“æ„ã€‚\nå½“ä½ çš„è®¾å¤‡éœ€è¦è§£ææŸä¸ªåŸŸåæ—¶ï¼Œå®ƒé¦–å…ˆä¼šå‘æœ¬åœ°DNSæœåŠ¡å™¨ï¼ˆé€šå¸¸ç”±ä½ çš„ISPï¼Œå³äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼Œäººè¯å°±æ˜¯å›½å†…çš„ä¸‰å¤§è¿è¥å•†æä¾›ï¼‰å‘èµ·è¯·æ±‚ã€‚å¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨çŸ¥é“æ‰€éœ€åŸŸåçš„IPåœ°å€ï¼Œå®ƒä¼šç›´æ¥è¿”å›è¯¥IPåœ°å€ç»™ä½ çš„è®¾å¤‡ã€‚ä½†å¦‚æœæœ¬åœ°DNSæœåŠ¡å™¨ä¸çŸ¥é“è¯¥åŸŸåçš„IPåœ°å€ï¼Œå®ƒä¼šå‘æ ¹DNSæœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚\næ ¹DNSæœåŠ¡å™¨å°†æŒ‡å¯¼æœ¬åœ°DNSæœåŠ¡å™¨è½¬å‘ç›¸åº”çš„é¡¶çº§DNSæœåŠ¡å™¨ã€‚ç„¶åï¼Œé¡¶çº§DNSæœåŠ¡å™¨å¯èƒ½ä¼šè¿›ä¸€æ­¥å°†è¯·æ±‚è½¬å‘ç»™è´Ÿè´£è¯¥ç‰¹å®šåŸŸåçš„æˆæƒDNSæœåŠ¡å™¨ã€‚æœ€ç»ˆï¼Œè¿™ä¸ªæˆæƒDNSæœåŠ¡å™¨å°†è¿”å›æ‰€éœ€åŸŸåçš„IPåœ°å€ç»™æœ¬åœ°DNSæœåŠ¡å™¨ï¼Œæœ¬åœ°DNSæœåŠ¡å™¨å†å°†å…¶è¿”å›ç»™ä½ çš„è®¾å¤‡ã€‚\nè¿™ä¸ªå±‚çº§ç»“æ„å…è®¸DNSç³»ç»Ÿæ›´é«˜æ•ˆåœ°å¤„ç†å¤§é‡çš„åŸŸåè§£æè¯·æ±‚ï¼Œå¹¶ç¡®ä¿åŠæ—¶æ›´æ–°å’Œç®¡ç†åŸŸåä¸IPåœ°å€çš„æ˜ å°„ã€‚æ‰€ä»¥ï¼Œå•ä¸ªDNSæœåŠ¡å™¨å¹¶ä¸ä¼šå­˜æ”¾æ‰€æœ‰å·²çŸ¥åŸŸåçš„IPè§£æï¼Œè€Œæ˜¯é€šè¿‡å±‚çº§ç»“æ„æ¥åˆ†æ•£å’Œç®¡ç†è¿™äº›ä¿¡æ¯ã€‚\n\n5.4 digå·¥å…·åˆ†æDNSè§£æè¿‡ç¨‹yum install bind-utils\n\nå®‰è£…äº†ä¹‹åå°±å¯ä»¥ä½¿ç”¨digå‘½ä»¤æ¥æŸ¥çœ‹åŸŸåè§£æè¿‡ç¨‹äº†\ndig åŸŸå\n\n6.è·¯ç”±è·¯ç”±çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸‹å›¾è¿™æ ·ä¸€è·³ä¸€è·³(Hop by Hop) â€œé—®è·¯â€ çš„è¿‡ç¨‹\næ‰€è°“ â€œä¸€è·³â€ å°±æ˜¯æ•°æ®é“¾è·¯å±‚ä¸­çš„ä¸€ä¸ªåŒºé—´ã€‚å…·ä½“åœ¨ä»¥å¤ªç½‘ä¸­ï¼ŒæŒ‡ä»æºMACåœ°å€åˆ°ç›®çš„MACåœ°å€ä¹‹é—´çš„å¸§ä¼ è¾“åŒºé—´ã€‚\n\n6.1 é—®è·¯æ —å­ï¼ˆå¸®åŠ©ç†è§£ï¼‰æ‹¿æ—¥å¸¸ç”Ÿæ´»ä¸­é—®è·¯æ¥ä¸¾ä¾‹å­ï¼ˆè¯·å±è”½ç°åœ¨æœ‰å¯¼èˆªè¿™ä»¶äº‹ï¼‰ä¸€èˆ¬é—®è·¯ï¼Œä¼šå¾—åˆ°ä¸‰ç§ç»“æœï¼š\n\næˆ‘ä¸çŸ¥é“\næˆ‘çŸ¥é“XXXçŸ¥é“\næˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯ç»™ä½ ä¹±æŒ‡ï¼ˆåœ¨è·¯ç”±å¯»å€çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªæƒ…å†µæ˜¯ä¸å­˜åœ¨çš„ï¼‰\n\næ¯”å¦‚å¼ ä¸‰è¦å»å—äº¬å¤§å­¦çš„ä»™æ—æ ¡åŒºï¼Œä»–é£æœºè½åœ°å—äº¬åï¼Œä¸çŸ¥é“æ€ä¹ˆèµ°ï¼›ä»–æ‰¾äº†ä¸ªæœºåœºçš„ä¿å®‰ï¼Œé—®ä»–â€œæˆ‘æ˜¯ä»xxçœæ–°æ¥çš„å¤§å­¦ç”Ÿï¼Œåº”è¯¥æ€ä¹ˆå»å—äº¬å¤§å­¦ï¼Ÿâ€ ä¿å®‰è®©ä»–å…ˆåxxè·¯å…¬äº¤è½¦å»ä»™æ—å¤§å­¦åŸï¼Œåˆ°å“ªé‡Œå†å»é—®å…¶ä»–äººã€‚\nå¼ ä¸‰åˆ°äº†ä»™æ—å¤§å­¦åŸåï¼Œåˆæ‰¾åˆ°äº†è·¯è¾¹çš„ç¯å«å·¥ï¼Œåˆé—®â€œæˆ‘ä»æœºåœºè¿‡æ¥ï¼Œåº”è¯¥æ€ä¹ˆå»å—äº¬å¤§å­¦ã€‚â€ ç¯å«å·¥ç»™ä»–æŒ‡äº†æ¡æ˜è·¯ï¼Œé‚£é‡Œå°±æ˜¯å—äº¬å¤§å­¦çš„æ•™å­¦æ¥¼ï¼Œå…¥å£å°±åœ¨è¿™é™„è¿‘ã€‚è¿™æ—¶å€™å¼ ä¸‰è·å–äº†ä¸¤ä¸ªäººï¼ˆè·¯ç”±å™¨ï¼‰çš„å¸®åŠ©ï¼ŒæˆåŠŸé€’è¾¾äº†å—äº¬å¤§å­¦çš„ä»™æ—æ ¡åŒºï¼ˆç›®æ ‡ä¸»æœºï¼‰ã€‚\nå¯ä»¥çœ‹åˆ°ï¼Œé—®è·¯å’Œä¸Šé¢å›¾ç¤ºä¸­IPæŠ¥æ–‡çš„è·¯ç”±æ˜¯å¾ˆç›¸ä¼¼çš„ï¼Œéƒ½æ˜¯ä¸€ä¸ªè·¯ç”±ä¸€ä¸ªè·¯ç”±çš„â€œé—®è·¯â€ï¼Œæœ€ç»ˆæ‰¾åˆ°ç›®æ ‡ä¸»æœºã€‚\n\n6.2 è·¯ç”±è¡¨æŠ¥æ–‡åœ¨å„ä¸ªè·¯ç”±å™¨ä¹‹é—´è·¯ç”±ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å½“ä¸€ä¸ªè·¯ç”±å™¨é‡åˆ°ä¸€ä¸ªIPæŠ¥æ–‡\n\nä»–é¦–å…ˆæ£€æµ‹è¿™æ˜¯ä¸æ˜¯è‡ªå·±åˆ†é…çš„å±€åŸŸç½‘ä¸­çš„IPï¼Œæ˜¯åˆ™å¯ä»¥ç›´æ¥è½¬å‘åˆ°ç›®æ ‡ä¸»æœºï¼›\nä¸æ˜¯åˆ™æŸ¥çœ‹è‡ªå·±çš„è·¯ç”±è¡¨ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯å¦ä¿å­˜äº†è¿™ä¸ªIPåº”è¯¥å¾€å“ªé‡Œèµ°ï¼›\nå¦‚æœå®ƒè‡ªå·±ä¸çŸ¥é“ï¼Œåˆ™å¯ä»¥å’Œå…¶ä»–ä¸è‡ªå·±ç›¸è¿çš„è·¯ç”±å™¨é€šä¿¡ï¼ˆä¿¡æ¯åŒæ­¥ï¼‰ï¼Œé—®ä»–ä»¬è¿™ä¸ªIPåº”è¯¥ç»™è°ï¼ˆå°±å¥½æ¯”ä½ åœ¨å…¬å¸é‡Œé¢é—®æŸä¸€ä¸ªå·¥ä½œåº”è¯¥äº¤ç»™è°å»åšï¼‰\nå¦‚æœå‘¨è¾¹çš„è·¯ç”±ï¼ˆæ—è¾¹çš„è·¯äººï¼‰éƒ½ä¸çŸ¥é“è¯¥å¾€å“ªé‡Œå»ï¼Œåˆ™è·¯ç”±å™¨ä¼šå°†å…¶äº¤ä»˜ç»™è‡ªå·±çš„é»˜è®¤è·¯ç”±ï¼ŒæŠ¥æ–‡ç»§ç»­è½¬å‘ï¼Œå»ä¸‹ä¸€ä¸ªäººé‚£é‡Œé—®è·¯äº†ã€‚\n\nè¿™æ ·çš„è·³è·ƒéƒ½ä¼šæœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼šç›¸é‚»çš„ä¸¤ä¸ªä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨ï¼‰ä¸€å®šæ˜¯åœ¨ç‰©ç†ä¸Šç›¸è¿ï¼Œå¤„äºåŒä¸€å±€åŸŸç½‘ä¹‹ä¸­ã€‚æ¯æ¬¡çš„è·³è·ƒï¼Œæœ¬è´¨ä¸Šæ˜¯ä»ä¸€ä¸ªå­ç½‘è·³åˆ°å¦å¤–ä¸€ä¸ªå­ç½‘ï¼›å¹¿åŸŸç½‘å¯ä»¥è®¤ä¸ºæ˜¯æœ€å¤§çš„â€œå­ç½‘â€\n\n6.3 routeå‘½ä»¤\nåœ¨windowsç”µè„‘ä¸Šå¯ä»¥ä½¿ç”¨  route print å‘½ä»¤æ‰“å°è·¯ç”±è¡¨ï¼Œæœ¬æ–‡ä¸å…³æ³¨windowså¹³å°ã€‚\n\nåœ¨linuxå¹³å°é‡Œé¢ï¼Œå¯ä»¥é€šè¿‡routeå‘½ä»¤æŸ¥çœ‹å½“å‰ä¸»æœºçš„è·¯ç”±è¡¨ï¼Œåœ¨Centos8ä¸»æœºä¸Šï¼Œå‘½ä»¤æ˜¾ç¤ºå¦‚ä¸‹ã€‚\nå¯ä»¥çœ‹åˆ°ï¼Œè·¯ç”±è¡¨çš„åå­—å«åš å†…æ ¸IPè·¯ç”±è¡¨ï¼Œè¿™ä¹Ÿæ˜¯linuxç³»ç»Ÿä¸­çš„ä¸€ä¸ªå†…æ ¸æ•°æ®ç»“æ„ã€‚å†…éƒ¨ç»´æŠ¤äº†è·¯ç”±è¡¨çš„ç›®çš„åœ°ã€Gatewayç½‘å…³ã€Genmaskæ©ç ã€Flagsæ ‡å¿—ä½ã€Metricã€Refã€Useã€Ifaceæ¥å£\nKernel IP routing tableDestination     Gateway         Genmask         Flags Metric Ref    Use Ifacedefault         _gateway        0.0.0.0         UG    100    0        0 eth0172.16.0.0      0.0.0.0         255.255.0.0     U     100    0        0 eth0172.17.0.0      0.0.0.0         255.255.0.0     U     0      0        0 docker0172.18.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-96d69eeef1ac172.19.0.0      0.0.0.0         255.255.0.0     U     0      0        0 br-fa4aff4c583e\n\n\nFlagsä¸­ï¼ŒUä»£è¡¨å½“å‰è·¯ç”±è¡¨çš„æ¡ç›®æ˜¯æœ‰æ•ˆçš„ï¼ŒGä»£è¡¨å…¶æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ã€‚\nGatewayä¸­ï¼Œ_gatewayä»¥åŠ0.0.0.0ä»£è¡¨çš„éƒ½æ˜¯é»˜è®¤ç½‘å…³\nIfaceä¸­ï¼Œåªæœ‰eth0æ˜¯ä¸€ä¸ªçœŸæ­£çš„ç‰©ç†ç½‘ç»œæ¥å£ï¼Œè€Œdocker0/br-*éƒ½æ˜¯dockerå®¹å™¨è™šæ‹Ÿå‡ºæ¥çš„æ¡¥æ¥ç½‘ç»œæ¥å£\n\nå‡è®¾æˆ‘æˆ‘ä»¬æœ‰ä¸€ä¸ªç›®çš„IPæ˜¯ 172.16.0.2ï¼Œè·å–åˆ°è¿™ä¸ªIPåï¼Œç³»ç»Ÿå°±ä¼šå°†å…¶å’Œè·¯ç”±è¡¨ä¸­çš„å­ç½‘æ©ç ä¾æ¬¡è¿›è¡ŒæŒ‰ä½ä¸ï¼›\nåœ¨linuxç¯å¢ƒä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç æ¥è¿›è¡Œè¿™ä¸¤ä¸ªIPçš„æŒ‰ä½ä¸æ“ä½œã€‚å…¶ä¸­inet_addr å’Œ inet_ntoaæ˜¯linuxä¸‹çš„ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨æ¥å£ã€‚ç”¨äºIPå­—ç¬¦ä¸²åˆ°æ— ç¬¦å·æ•´æ•°ä¹‹é—´çš„è½¬æ¢ï¼Œå…·ä½“çš„ä»‹ç»å¯ä»¥é˜…è¯»æˆ‘çš„ UDPåšå®¢\n#include &lt;iostream&gt;#include &lt;arpa/inet.h&gt;int main() &#123;    // å°†ç‚¹åˆ†åè¿›åˆ¶çš„IPåœ°å€å’Œå­ç½‘æ©ç è½¬æ¢ä¸ºæ— ç¬¦å·æ•´æ•°    unsigned int ipAddress = inet_addr(&quot;172.16.0.2&quot;);    unsigned int subnetMask = inet_addr(&quot;255.255.0.0&quot;);    // è¿›è¡ŒæŒ‰ä½ä¸æ“ä½œå¾—åˆ°ç½‘ç»œåœ°å€    unsigned int networkAddress = ipAddress &amp; subnetMask;    // å°†ç½‘ç»œåœ°å€è½¬æ¢å›ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ³•å¹¶è¾“å‡ºç»“æœ    struct in_addr addr;    addr.s_addr = networkAddress;    std::cout &lt;&lt; &quot;IPåœ°å€: &quot; &lt;&lt; &quot;172.16.0.2&quot; &lt;&lt; std::endl;    std::cout &lt;&lt; &quot;å­ç½‘æ©ç : &quot; &lt;&lt; &quot;255.255.0.0&quot; &lt;&lt; std::endl;    std::cout &lt;&lt; &quot;ç½‘ç»œåœ°å€: &quot; &lt;&lt; inet_ntoa(addr) &lt;&lt; std::endl;    return 0;&#125;// élinuxç¯å¢ƒå¯ä»¥ä½¿ç”¨ä¸‹æ–¹çš„ä»£ç è¿›è¡Œå¤„ç†void ip_and_gmask_test() &#123;    unsigned int ipAddress = 172 &lt;&lt; 24 | 16 &lt;&lt; 16 | 0 &lt;&lt; 8 | 2; // å°† IP åœ°å€è½¬æ¢ä¸º 32 ä½æ— ç¬¦å·æ•´æ•°    unsigned int subnetMask = 255 &lt;&lt; 24 | 255 &lt;&lt; 16 | 0 &lt;&lt; 8 | 0; // å°†å­ç½‘æ©ç è½¬æ¢ä¸º 32 ä½æ— ç¬¦å·æ•´æ•°    unsigned int networkAddress = ipAddress &amp; subnetMask; // æŒ‰ä½ä¸    std::cout &lt;&lt; &quot;IPåœ°å€:  172.16.0.2&quot; &lt;&lt; std::endl;    std::cout &lt;&lt; &quot;å­ç½‘æ©ç : 255.255.0.0&quot; &lt;&lt; std::endl;    std::cout &lt;&lt; &quot;ç½‘ç»œåœ°å€: &quot; &lt;&lt; (networkAddress &gt;&gt; 24) &lt;&lt; &quot;.&quot; &lt;&lt; ((networkAddress &gt;&gt; 16) &amp; 255) &lt;&lt; &quot;.&quot; &lt;&lt; ((networkAddress &gt;&gt; 8) &amp; 255) &lt;&lt; &quot;.&quot; &lt;&lt; (networkAddress &amp; 255) &lt;&lt; std::endl;&#125;\n\näºŒè€…è¾“å‡ºç»“æœéƒ½æ˜¯172.16.0.0\nå¾—åˆ°è¾“å‡ºç»“æœåï¼Œå†å’Œè·¯ç”±è¡¨ä¸­è¯¥é¡¹çš„Destinationè¿›è¡Œå¯¹æ¯”ï¼ŒäºŒè€…ç›¸ç­‰ï¼Œä»£è¡¨å½“å‰IPå°±æ˜¯éœ€è¦é€šè¿‡è¯¥é¡¹è¿›è¡Œè·¯ç”±ï¼Œé‚£å°±å°†è¿™ä¸ªæŠ¥æ–‡é€šè¿‡Ifaceæ¥å£eth0å‘é€å‡ºå»å°±OKäº†\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface172.16.0.0      0.0.0.0         255.255.0.0     U     100    0        0 eth0\n\nå¦‚æœæŒ‰ä½ä¸çš„ç»“æœä¸DestinationåŒ¹é…ä¸ä¸Šï¼Œé‚£å°±ç»§ç»­å¾€ä¸‹ä¸€ä¸ªæ¡ç›®çš„å­ç½‘æ©ç è¿›è¡ŒæŒ‰ä½ä¸ã€‚å¦‚æœæ•´ä¸ªè¡¨éƒ½æŒ‰ä½ä¸å®Œæ¯•äº†ï¼Œè¿˜æ²¡æ‰¾åˆ°è¯¥å»çš„åœ°æ–¹ï¼Œé‚£å°±å°†å…¶é€šè¿‡defaulté»˜è®¤è·¯ç”±å‘é€å‡ºå»ã€‚\n7.æ•°æ®é“¾è·¯å±‚å‰é¢è°ˆäº†ä¸€å¤§å †å°†æ•°æ®ä»ä¸€ä¸ªä¸»æœºåˆ°è·¯ç”±å™¨å†è·¨è¶Šå¤šä¸ªè·¯ç”±å™¨é€’è¾¾ç›®æ ‡ä¸»æœºçš„æµç¨‹ã€‚\nè¦æƒ³å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ•°æ®é“¾è·¯å±‚çš„å¸®åŠ©ï¼Œå³å®ç°åŒä¸€å±€åŸŸç½‘å†…ä¸¤å°ä¸»æœºåœ¨ç‰©ç†å±‚é¢ä¸Šçš„ç›¸äº’é€šä¿¡ã€‚\n\nIPç½‘ç»œå±‚ï¼šæä¾›è·¨ç½‘ç»œæ‰¾åˆ°æ­£ç¡®è·¯ç”±è·¯å¾„ï¼Œå¹¶ä¼ è¾“æ•°æ®çš„èƒ½åŠ›\næ•°æ®é“¾è·¯å±‚ï¼šæä¾›å°†æ•°æ®åœ¨åŒä¸€ç½‘ç»œä¸­ä¼ è¾“çš„èƒ½åŠ›\nç‰©ç†å±‚ï¼šå®é™…ä¸Šçš„æ•°æ®åœ¨ç‰©ç†ï¼ˆç½‘çº¿ï¼‰ä¸Šä¼ è¾“\n\næ•°æ®é“¾è·¯å±‚ä¹Ÿæœ‰ä¸åŒçš„ä¼ è¾“æ–¹å¼ï¼Œæœ¬æ–‡ä¸»è¦å…³æ³¨å½“å‰ä¸»æµçš„ä»¥å¤ªç½‘ï¼›\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥å¤ªç½‘ä¸æ˜¯ä¸€ç§å…·ä½“çš„ç½‘ç»œï¼Œè€Œæ˜¯ä¸€ç§æŠ€æœ¯æ ‡å‡†ã€‚å®ƒå³åŒ…å«äº†æ•°æ®é“¾è·¯å±‚çš„å†…å®¹ï¼Œä¹ŸåŒ…å«äº†ä¸€äº›ç‰©ç†å±‚çš„è§„å®šï¼Œæ¯”å¦‚æ‹“æ‰‘ç»“æ„å’Œè®¿é—®æ§åˆ¶æ–¹å¼ï¼Œä¼ è¾“é€Ÿç‡ç­‰ã€‚\n\næ³¨æ„ï¼šæœ¬æ–‡ä¸­å…³äºæ•°æ®é“¾è·¯å±‚çš„çŸ¥è¯†å¹¶ä¸å®Œæ•´ï¼Œå› ä¸ºå½“æ—¶çš„å­¦ä¹ ç›®æ ‡æ˜¯æœ€å¸¸ç”¨ã€é¢è¯•æœ€å¸¸è€ƒçš„ç½‘ç»œçŸ¥è¯†ï¼Œå¹¶æ²¡æœ‰å®Œæ•´å­¦ä¹ è®¡ç®—æœºç½‘ç»œã€‚\n2023-12-17ï¼šåç»­è®¡ç®—æœºç½‘ç»œçš„å®Œæ•´æ€»ç»“ä¼šæ ¹æ®Bç«™è§†é¢‘çš„å­¦ä¹ å•ç‹¬å¼€ä¸€ä¸ªåšå®¢ã€‚\n\n7.1 è®¤è¯†å±€åŸŸç½‘çš„åŸºæœ¬æƒ…å†µ7.1.1 å±€åŸŸç½‘è®¤è¯†ä¸è¿‡åœ¨è®¤è¯†ä»¥å¤ªç½‘ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“å±€åŸŸç½‘é€šä¿¡çš„ä¸€ä¸ªåŸºæœ¬æƒ…å†µï¼›å‡è®¾ä¸‹å›¾ä¸­å°±æ˜¯ä¸€ä¸ªå±€åŸŸç½‘ï¼Œå…¶ä¸­åŒ…å«äº†ä¸åŒçš„ä¸»æœº\n\né¦–å…ˆï¼Œå¦‚æœæƒ³è¦ä¸¤å°ä¸»æœºèƒ½å¤Ÿé€šä¿¡ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆå°†å…¶é“¾æ¥åˆ°åŒä¸€æ ¹ç½‘çº¿ä¸Šï¼ˆåœ¨è¿™é‡Œæš‚ä¸”ä¸ç®¡WIFIï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯è¿åœ¨äº†è¿™æ ¹ç½‘çº¿ä¸Šï¼‰ï¼›è¿™å°±å¥½æ¯”è¿›ç¨‹é—´é€šä¿¡çš„æ—¶å€™ï¼Œä½ éœ€è¦å…ˆèƒ½çœ‹åˆ°åŒä¸€ä»½èµ„æºï¼Œæ‰èƒ½å®ç°å¯¹è¿™ä»½èµ„æºçš„å…±äº«è®¿é—®ã€‚\nè™½ç„¶æˆ‘ä»¬è®¤ä¸ºåœ¨å±€åŸŸç½‘é‡Œé¢é€šä¿¡çš„æ—¶å€™ï¼Œæ˜¯ä¸¤å°ä¸»æœºç›´æ¥äº¤æµï¼Œä½†å®é™…ä¸Šä½ å¯ä»¥æŠŠå±€åŸŸç½‘å½“ä½œä¸€ä¸ªæ•™å¸ˆï¼Œå½“å¼ ä¸‰å’Œæå››æ²Ÿé€šçš„æ—¶å€™ï¼Œå…¶å®ä¼šæœ‰å¾ˆå¤šå…¶ä»–çš„åƒç“œç¾¤ä¼—éƒ½èƒ½æ¥æ”¶åˆ°ä½ å‘é€çš„è¿™ä¸ªä¿¡æ¯ã€‚\nåé¦ˆåˆ°ä»¥å¤ªç½‘æŠ¥æ–‡ä¸Šï¼Œå› ä¸ºæ¯ä¸ªä¸»æœºéƒ½æ˜¯çŸ¥é“è‡ªå·±çš„åœ°å€çš„ï¼Œæ‰€ä»¥åªè¦æ£€æµ‹åˆ°ä»¥å¤ªç½‘æŠ¥å¤´ä¸­çš„ç›®çš„åœ°å€ä¸æ˜¯è‡ªå·±çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¸¢å¼ƒæ‰è¿™ä¸ªæŠ¥æ–‡ã€‚å› ä¸ºç›®æ ‡å¹¶ä¸åœ¨å’Œä½ è¯´è¯ã€‚è¿™å°±å¥½æ¯”åœ¨æ•™å®¤é‡Œé¢ï¼Œä½ éš”å£æœ‰ä¿©äººåœ¨èŠå¤©ï¼Œä»–ä»¬å¹¶æ²¡æœ‰å’Œä½ äº¤è°ˆï¼Œæ‰€ä»¥ä½ å¯ä»¥ä¸ç”¨ç®¡ä»–ä»¬èŠäº†ä»€ä¹ˆã€‚\n\nè¿™ä¹Ÿåé¦ˆå‡ºäº†ä¸ºä»€ä¹ˆæŸäº›å…¬å…±WIFIä¼šä¸å®‰å…¨ï¼Œå› ä¸ºåªè¦æ¥å…¥äº†è¿™ä¸ªWIFIï¼Œä½ å°±æœ‰åŠæ³•æ£€æµ‹åˆ°å…¶ä»–ç”¨æˆ·é€šè¿‡è¿™ä¸ªå±€åŸŸç½‘å‘é€äº†ä»€ä¹ˆä¿¡æ¯ï¼\n\nå› ä¸ºå±€åŸŸç½‘å†…çš„ä¸»æœºæ˜¯é€šè¿‡ç›®çš„åœ°å€åˆ¤æ–­æœ‰æ²¡æœ‰äººå’Œè‡ªå·±èŠå¤©çš„ï¼Œæ‰€ä»¥å³ä¾¿æˆ‘ä»¬çš„ç”µè„‘å¼€æœºåä»€ä¹ˆäº‹æƒ…éƒ½æ²¡æœ‰å¹²ï¼Œåœ¨æ“ä½œç³»ç»Ÿåº•å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼‰å…¶å®ä¸€ç›´éƒ½åœ¨ä»å±€åŸŸç½‘ä¸­æ‹¿åˆ°æ–°çš„æ•°æ®é“¾è·¯å±‚æŠ¥æ–‡ï¼Œå¹¶æ£€æµ‹æ˜¯å¦æ˜¯å‘ç»™è‡ªå·±çš„æŠ¥æ–‡ï¼š\n\næ˜¯ï¼Œå‘ä¸Šäº¤ä»˜\nå¦ï¼Œä¸¢æ‰\n\n7.1.2 ç¢°æ’åŸŸç”±äºæ•°æ®é“¾è·¯å±‚å‘ä¸‹æ˜¯ç›´æ¥äº¤ä»˜ç»™ç‰©ç†å±‚çš„ï¼Œåœ¨ç‰©ç†å±‚ï¼ˆç½‘çº¿ï¼‰ä¸­å…‰ç”µä¿¡å·ä¼ è¾“æ˜¯ä¸èƒ½åŒæ—¶ä¼ è¾“å¤šä¸ªæ•°æ®çš„ï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬åŒä¸€ä¸ªå±€åŸŸç½‘çš„å¤šå°ä¸»æœºä¸èƒ½åŒæ—¶å¾€å±€åŸŸç½‘ä¸­å‘æ•°æ®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸»æœºå¼•å…¥äº†ä¼‘çœ æœºåˆ¶ï¼Œé€šè¿‡ä¸åŒæ—¶é—´çš„é”™å¼€ä¼‘çœ ï¼Œæ¥é¿å…ä¸¤å°ä¸»æœºåŒæ—¶å¾€å±€åŸŸç½‘ä¸­å‘æ•°æ®çš„æƒ…å†µã€‚\n\nç†æƒ³æƒ…å†µï¼šåŒä¸€æ—¶é—´åªæœ‰ä¸€å°ä¸»æœºåœ¨å±€åŸŸç½‘ä¸­å‘é€æ•°æ®\nç¢°æ’é—®é¢˜ï¼šå¦‚æœå‡ºç°äº†åŒæ—¶å‘é€ï¼Œæ•°æ®å‡ºç°å†²çªï¼Œå°±éœ€è¦å‰”é™¤æ‰è¿™éƒ¨åˆ†æ•°æ®\n\né€šè¿‡ç¢°æ’åŸŸè§£å†³æ•°æ®å†²çªé—®é¢˜ï¼Œå°½é‡è¾¾åˆ°ç†æƒ³æƒ…å†µï¼›\næ¯”å¦‚æˆ‘ä»¬çš„äº¤æ¢æœºå°±æœ‰åˆ’åˆ†ç¢°æ’åŸŸçš„åŠŸèƒ½ã€‚æ¥åˆ°äº¤æ¢æœºä¸Šçš„è®¾å¤‡ï¼Œé™¤äº†é€šè¿‡äº¤æ¢æœºè¿›è¡Œè·¯ç”±è½¬å‘ï¼Œå¦‚æœåœ¨äº¤æ¢æœºçš„è¿™éƒ¨åˆ†è®¾å¤‡ä¸­å‡ºç°äº†æ•°æ®ç¢°æ’ï¼Œé‚£ä¹ˆäº¤æ¢æœºå°±èƒ½æŠŠç¢°æ’æ§åˆ¶åœ¨å½“å‰è¿™ä¸ªå°çš„ç¢°æ’åŸŸå†…ï¼Œè€Œä¸ä¼šå‘æ›´å¤§çš„å±€åŸŸç½‘ä¸­ä¼ æ’­ã€‚\n\nå¦‚æœä¸€ä¸ªå±€åŸŸç½‘é‡Œé¢åªæœ‰ä¸€ä¸ªäº¤æ¢æœºï¼ˆè·¯ç”±å™¨ï¼‰é‚£ä¹ˆè¿™æ•´ä¸ªå±€åŸŸç½‘å…±äº«ç¢°æ’åŸŸ\n\næ‰€ä»¥å¤§å…¬å¸å†…ä¸ºäº†é¿å…å±€åŸŸç½‘å› ä¸ºç¢°æ’é—®é¢˜è€Œå¯¼è‡´çš„ç½‘ç»œå¡é¡¿ï¼Œä¸€èˆ¬éƒ½ä¼šå°†å‡ å°ç”µè„‘æ¥å…¥ä¸€ä¸ªå°çš„äº¤æ¢æœºä¸­æ¥åˆ’åˆ†ç¢°æ’åŸŸã€‚\nå¦‚ä¸Šæ˜¯ç‰©ç†å±‚é¢çš„äº‹æƒ…ï¼Œè½¯ä»¶å±‚é¢ä¸Šï¼Œä¸€ä¸ªMACå¸§ä¸è¦å¤ªå¤§ï¼Œå¦åˆ™ä¼šå¤§å¤§å¢åŠ ç¢°æ’çš„æ¦‚ç‡ã€‚æ‰€ä»¥MACå¸§å¿…é¡»è¦å¯¹ä¸Šå±‚äº¤ä»˜çš„æ•°æ®å¤§å°æä¸€ä¸ªè¦æ±‚ï¼Œä¸èƒ½äº¤ä»˜å¤ªå¤§çš„æ•°æ®ï¼Œè¿™å°±æ˜¯MTUçš„ç”±æ¥ï¼ˆä¸€èˆ¬éƒ½æ˜¯1500å­—èŠ‚ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯1500ï¼Œé‚£å°±æ˜¯å­¦æœ¯å±‚é¢çš„äº‹æƒ…äº†ï¼‰\n7.1.3 é“¾è·¯å’Œæ•°æ®é“¾è·¯é“¾è·¯æ˜¯ä¸€æ¡ç‰©ç†çš„é“¾è·¯ï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•äº¤æ¢èŠ‚ç‚¹ï¼›\næ•°æ®é“¾è·¯æ˜¯åŸºäºé“¾è·¯ä¸Šçš„ï¼Œéœ€è¦æœ‰åè®®æ¥å®ç°æ•°æ®çš„ä¼ è¾“ï¼›å°†è¿™äº›åè®®å’Œç¡¬ä»¶åŠ å…¥åˆ°é“¾è·¯ä¸Šï¼Œå°±è¡Œç¨‹äº†æ•°æ®é“¾è·¯ï¼›\n7.2 ä»¥å¤ªç½‘å¸§æ ¼å¼ï¼ˆMACå¸§ï¼‰\n7.2.1 MACå¸§æ ¼å¼è¿™éƒ¨åˆ†çš„çŸ¥è¯†å¯ä»¥å°ç»“å¦‚ä¸‹\n\nä»¥å¤ªç½‘MACå¸§æ ¼å¼åˆ†ä¸ºä¸‹é¢ä¸¤ç§ï¼Œè¿™ä¸¤ç§æ ¼å¼ä»…ç±»å‹å­—æ®µæœ‰åŒºåˆ«\n\nDIX Ethernet V2ï¼ˆæµè¡Œï¼Œåæ–‡æ¶‰åŠåˆ°çš„æ˜¯è¿™ä¸ªï¼‰\nIEEE 802.3\n\nå…¶ä¸­ä»¥å¤ªç½‘V2çš„MACå¸§æ ¼å¼å¦‚ä¸‹\n\n\nç›®çš„åœ°å€ï¼ˆ6Bï¼‰ï¼š48ä½çš„MACåœ°å€ï¼ŒMACæ˜¯æ¯ä¸ªä¸»æœºåœ¨å±€åŸŸç½‘å†…å”¯ä¸€çš„èº«ä»½æ ‡è¯†\næºåœ°å€ï¼ˆ6Bï¼‰ï¼š48ä½çš„MACåœ°å€ï¼ŒåŒä¸Š\nç±»å‹ï¼ˆ2Bï¼‰ï¼šä¸Šå±‚ï¼ˆç½‘ç»œå±‚ï¼‰ä½¿ç”¨çš„åè®®ï¼Œå¸§åè®®ç±»å‹æœ‰ä¸‰ç§å€¼ï¼Œåˆ†åˆ«å¯¹åº”IPã€ARPã€RARPï¼Œæ‰€ä»¥åªéœ€è¦2ä¸ªå­—èŠ‚\nTCP&#x2F;IPv4ï¼š0x0800\nARPè¯·æ±‚æˆ–å“åº”ï¼š0x0806\nRARPï¼š0x8035\nNovellç½‘ç»œå±‚IPXåè®®ï¼š0x8137ï¼ˆè¿™ä¸ªäº†è§£å³å¯ï¼‰\n\n\næ•°æ®è½½è·ï¼š46B-1500Bï¼Œæ»¡è¶³æœ€å°å¸§é•¿64Bå’Œæœ€å¤§å¸§é•¿1518Bçš„è¦æ±‚\nFCSï¼ˆ4Bï¼‰ï¼šä½¿ç”¨CRC-32æ ¡éªŒè®¡ç®—å‡ºæ¥æ˜¯å¸§æ£€éªŒåºåˆ—ï¼ˆè®¡ç®—åŒ…æ‹¬äº†é™¤FCSå­—æ®µçš„å…¨éƒ¨å†…å®¹ï¼‰\n\nè¿™ä¾¿å°±æ˜¯ä»¥å¤ªç½‘å›ºå®šæ·»åŠ çš„æŠ¥å¤´ï¼Œåœ¨è¿›è¡Œè§£åŒ…çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å–èµ°æ•°æ®æœ€å‰é¢çš„14ä¸ªå­—èŠ‚ï¼ˆ6+6+2ï¼‰ï¼Œå†ä¸¢å¼ƒæœ«å°¾çš„4ä¸ªFCSçš„å­—èŠ‚ï¼Œå°±èƒ½å–åˆ°ä¸Šå±‚ï¼ˆç½‘ç»œå±‚ï¼‰çš„åŸå§‹æ•°æ®ã€‚\n7.2.2 MACå¸§ä¸­çš„MTU\n ç½‘ç»œåè®®-æœ€å¤§ä¼ è¾“å•å…ƒ MTU\n\nè¯·æ³¨æ„ï¼Œæ•°æ®é“¾è·¯å±‚çš„MTUæ˜¯1500ï¼Œå…¶å®æ˜¯IPå¯ä»¥äº¤ä»˜çš„ï¼ˆåŒ…æ‹¬IPæŠ¥å¤´ï¼‰çš„é•¿åº¦æ˜¯1500ï¼Œè¿™ä¸ª1500æ˜¯ä¸åŒ…å«ä»¥å¤ªç½‘å¸§çš„æŠ¥å¤´çš„ï¼\nä»¥å¤ªç½‘å¸§çš„æŠ¥å¤´æ˜¯18å­—èŠ‚ï¼ˆåŒ…æ‹¬MACå¤´éƒ¨å’ŒFCSï¼‰ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å®é™…ä¸Šèƒ½ä¼ è¾“çš„æ•°æ®å¤§å°æ˜¯  [64 -18, 1518 - 18] = [46, 1500]ï¼›\nè¿™ä¸ªé™åˆ¶æ˜¯ä¸ºäº†æ»¡è¶³æ•°æ®é“¾è·¯å±‚ä¸­æœ€å¤§å¸§/æœ€å°å¸§çš„è¦æ±‚ï¼Œå…¶ä¸­å¦‚æœæœ‰æ•ˆè½½è·ä¸æ»¡è¶³46å­—èŠ‚ï¼Œåˆ™ä¼šè‡ªåŠ¨è¡¥0ï¼›å¤šä½™çš„éƒ¨åˆ†éœ€è¦åœ¨ç½‘ç»œå±‚è¿›è¡Œåˆ†ç‰‡ã€‚\n7.2.3 ç‰©ç†å±‚8å­—èŠ‚å‰å¯¼ç åœ¨ä»¥å¤ªç½‘V2çš„ç‰©ç†å±‚ï¼Œè¿˜ä¼šç»™MACå¸§å‰åŠ ä¸Š8ä¸ªå­—èŠ‚çš„å‰å¯¼ç ï¼›\n\nå‰7å­—èŠ‚ä¸ºå‰åŒæ­¥ç \nå1å­—èŠ‚ä¸ºå¸§å¼€å§‹å®šç•Œç¬¦ï¼ˆä»¥å¤ªç½‘å¸§ä¸­æ²¡æœ‰å¸§å®šç•Œç¬¦ï¼‰\n\n7.2.4 ä¸å¯é ä¼ è¾“ä»¥å¤ªç½‘v2çš„æ•°æ®é“¾è·¯å±‚ä¸æä¾›å¯é ä¼ è¾“æœºåˆ¶ï¼Œé‡åˆ°é”™è¯¯ä¼šç›´æ¥ä¸¢å¼ƒã€‚\n\nMACå¸§é•¿åº¦ä¸æ˜¯æ•´æ•°å­—èŠ‚\nMACå¸§çš„FCSå­—æ®µæ£€éªŒå‡ºé”™\nMACå¸§é•¿åº¦ä¸åœ¨[64,1518]èŒƒå›´å†…\n\n7.2.5 FCSå­—æ®µMACå¸§ä¸­çš„FCSå­—æ®µä¸º4å­—èŠ‚ï¼ˆ32æ¯”ç‰¹ï¼‰ï¼Œé‡‡ç”¨æ˜¯CRCæ ¡éªŒç æ˜¯CRC-32ï¼›\n\n7.3 è®¤è¯†MACåœ°å€MACåœ°å€å°±å¥½æ¯”ç½‘ç»œå±‚é‡Œé¢çš„IPåœ°å€ï¼Œæ˜¯ç”¨æ¥æ ‡è¯†æ•°æ®é“¾è·¯å±‚ä¸­çš„ä¸»æœºçš„ã€‚\n\nMACåœ°å€ç”¨æ¥è¯†åˆ«æ•°æ®é“¾è·¯å±‚ä¸­ç›¸è¿çš„èŠ‚ç‚¹ï¼›\nMACåœ°å€é•¿åº¦ä¸º48ä½ï¼ˆ6ä¸ªå­—èŠ‚ï¼‰ä¸€èˆ¬ç”¨åå…­è¿›åˆ¶åŠ ä¸Šå†’å·çš„æ–¹å¼æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚08:00:27:03:fb:19\nMACåœ°å€åœ¨ç½‘å¡å‡ºåœºçš„æ—¶å€™å°±ç¡®å®šäº†ï¼Œä¸èƒ½è¢«ä¿®æ”¹ã€‚è™šæ‹Ÿæœºä¸­çš„MACåœ°å€å¹¶ä¸æ˜¯çœŸå®çš„MACåœ°å€ï¼Œå¯èƒ½ä¼šå’Œå·²æœ‰çš„å†²çªï¼ˆä½†è™šæ‹Ÿæœºä¼šæ£€æµ‹å†²çªå¹¶åŠæ—¶ä¿®æ”¹ï¼Œä¸ç„¶è™šæ‹Ÿæœºå°±ä¸Šä¸äº†ç½‘äº†ï¼‰ä¹Ÿæœ‰å¾ˆå°‘éƒ¨åˆ†ç½‘å¡æ”¯æŒç”¨æˆ·é…ç½®MACåœ°å€\n\nMACåœ°å€åˆç§°ä¸ºç‰©ç†åœ°å€ï¼Œå½“ä½ çœ‹åˆ°ç‰©ç†åœ°å€è¿™ä¸ªæ¦‚å¿µæ—¶ï¼Œéœ€è¦çŸ¥é“å®ƒæŒ‡çš„æ˜¯æ•°æ®é“¾è·¯å±‚é‡Œé¢çš„MACåœ°å€ï¼Œå¹¶ä¸æ˜¯ç‰©ç†å±‚é‡Œé¢çš„æ¦‚å¿µï¼\n7.3.1 MACåœ°å€å’ŒIPåè®®çš„åŒºåˆ«MACåœ°å€å’ŒIPåœ°å€çš„åŒºåˆ«å¦‚ä¸‹ï¼š\n\nIPåœ°å€æè¿°çš„æ˜¯è·¯é€”æ€»ä½“çš„èµ·ç‚¹å’Œç»ˆç‚¹\nMACåœ°å€æè¿°çš„æ˜¯è·¯é€”ä¸Šæ¯ä¸€ä¸ªå°è·¯ç”±åŒºé—´çš„èµ·ç‚¹å’Œç»ˆç‚¹\n\nå› ä¸ºæˆ‘ä»¬çš„ä¸»æœºä¸å¯èƒ½çŸ¥é“ä¸€ä¸ªå¾ˆè¿œçš„å†…ç½‘ä¸»æœºçš„MACåœ°å€ï¼Œæ‰€ä»¥å°±éœ€è¦MACåœ°å€åœ¨å°è·¯ç”±åŒºé—´æ¥æ ‡è¯†èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œå¹¶å®ç°æ­£ç¡®çš„æ•°æ®ä¼ è¾“ã€‚\n7.3.2 MACåœ°å€çš„å”¯ä¸€æ€§è¿™é‡Œéœ€è¦çŸ¥é“ä¸€ä¸ªå°çŸ¥è¯†ï¼Œè™½ç„¶MACåœ°å€åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è®¤ä¸ºæ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œä½†å®é™…ä¸Šåªéœ€è¦ä¿è¯åŒä¸€ä¸ªå±€åŸŸç½‘å†…çš„MACåœ°å€æ˜¯å”¯ä¸€çš„ï¼Œå°±OKäº†\n7.4 MTUå¯¹ä¸Šå±‚çš„å½±å“7.4.1 MTUå¯¹IPçš„å½±å“åœ¨å‰æ–‡æåˆ°è¿‡ï¼Œä¸ºäº†é¿å…å…‰ç”µä¿¡å·åœ¨ç‰©ç†å±‚ä¼ è¾“çš„æ—¶å€™å‡ºç°å†²çªï¼Œéœ€è¦é™åˆ¶ç½‘ç»œå±‚ç»™æ•°æ®é“¾è·¯å±‚ä¼ è¾“çš„å•æ¬¡çš„æ•°æ®å¤§å°ï¼ŒMTUçš„å…·ä½“è¯´æ˜å¯ä»¥å‚è€ƒæœ¬æ–‡ 2.2.1 è®¤è¯†MTUï¼›\nå› ä¸ºMTUçš„å­˜åœ¨ï¼Œç½‘ç»œå±‚IPåè®®ä¸­éœ€è¦å¯¹è¾ƒå¤§çš„æ•°æ®åŒ…è¿›è¡Œåˆ†åŒ…ï¼ˆIPåˆ†ç‰‡å’Œç»„è£…é—®é¢˜åœ¨ä¸Šæ–‡ä¹Ÿè°ˆè¿‡äº†ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ï¼‰\nä½†å› ä¸ºIPåè®®å±‚åˆ†ç‰‡å’Œç»„è£…å¯¹äºä¼ è¾“å±‚æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå¦‚æœIPåˆ†ç‰‡åå‡ºç°ä¸¢åŒ…å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œé‚£ä¹ˆä¼ è¾“å±‚å°±å¿…é¡»å¾—é‡ä¼ ã€‚æ‰€ä»¥ä¼ è¾“å±‚ä¸ºäº†é¿å…è¿™ç§ä¸å—è‡ªå·±æ§åˆ¶çš„äº‹æƒ…ï¼Œæœ€ç»ˆåˆ†ç‰‡çš„æ“ä½œåº”è¯¥æ˜¯ç”±ä¼ è¾“å±‚æ¥è¿›è¡Œå¤„ç†æ‰æ˜¯æœ€å¥½çš„ï¼›\n7.4.2 MTUå¯¹UDPçš„å½±å“UDPæœ€å¤§å¯ä»¥ä¼ è¾“æ•°æ®æ˜¯ 2^16å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯64KBï¼Œè€Œ1500å­—èŠ‚æ˜¯1.5KBï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦UDPæºå¸¦çš„æ•°æ®è¶…è¿‡ 1472 (1500 - 20 IPé¦–éƒ¨ - 8 UDPé¦–éƒ¨)ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨ç½‘ç»œå±‚è¢«åˆ†ä¸ºå¤šä¸ªIPæ•°æ®æŠ¥ã€‚\nä¸€æ—¦è¿™ä¸ªæ•°æ®æŠ¥ä¸­æœ‰ä¸€ä¸ªIPæŠ¥æ–‡ä¸¢å¤±äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªUDPæŠ¥æ–‡å°±ä¼šä¸¢å¤±ã€‚å†åŠ ä¸ŠUDPå¹¶æ²¡æœ‰è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼ˆä¸è¿‡å¯ä»¥æ ¹æ®å…·ä½“çš„åè®®æ¥å®šåˆ¶åº”ç­”å’Œé‡ä¼ æœºåˆ¶æ¥ä¿è¯æ•°æ®å¯é æ€§ï¼‰ï¼ŒUDPçš„æŠ¥æ–‡åœ¨IPå±‚ä¸­è¢«åˆ†ç‰‡åä¸¢åŒ…çš„æ¦‚ç‡è¿œå¤§äºTCP\n7.4.3 MTUå¯¹TCPçš„å½±å“\nTCPçš„ä¸€ä¸ªæ•°æ®æŠ¥ä¹Ÿä¸èƒ½æ— é™å¤§ï¼Œè¿˜æ˜¯å—åˆ¶äºMTU\nTCPçš„å•ä¸ªæ•°æ®æŠ¥çš„æœ€å¤§æ¶ˆæ¯é•¿åº¦ï¼Œç§°ä¸ºMSS(Max Segment Size); \nTCPåœ¨å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ä¸­ï¼Œé€šä¿¡åŒæ–¹ä¼šè¿›è¡ŒMSSåå•†ã€‚æœ€ç†æƒ³çš„æƒ…å†µï¼Œ MSSçš„å€¼æ­£å¥½æ˜¯åœ¨IPä¸ä¼šè¢«åˆ†ç‰‡å¤„ç†çš„æœ€å¤§é•¿åº¦(è¿™ä¸ªé•¿åº¦ä»ç„¶æ˜¯å—åˆ¶äºæ•°æ®é“¾è·¯å±‚çš„ MTU)ã€‚\nåŒæ–¹åœ¨å‘é€SYNçš„æ—¶å€™ä¼šåœ¨TCPå¤´éƒ¨å†™å…¥è‡ªå·±èƒ½æ”¯æŒçš„MSSå€¼ã€‚ç„¶ååŒæ–¹å¾—çŸ¥å¯¹æ–¹çš„MSSå€¼ä¹‹åï¼Œé€‰æ‹©è¾ƒå°çš„ä½œä¸ºæœ€ç»ˆMSSï¼Œè¿›è¡Œæ•°æ®ä¼ è¾“ï¼›\nMSSçš„å€¼åœ¨TCPé¦–éƒ¨çš„40å­—èŠ‚å˜é•¿é€‰é¡¹ä¸­ (kind=2)ï¼›\n\n\n7.4.4 MSSé™¤äº†MTUï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ¦‚å¿µæ˜¯MSSï¼Œæ—¢åº”ç”¨å±‚ä¸­æœ‰æ•ˆæ•°æ®éƒ¨åˆ†çš„é•¿åº¦\n\nMACå¸§ä¸­æœ‰æ•ˆæ•°æ®é•¿åº¦æ˜¯[46,1500]ï¼›\n\n\n\n\n7.5 ARPåè®®ARPåè®®å±äºæ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯MACå¸§åè®®çš„â€œä¸Šå±‚â€\n\n7.5.1 è¯´æ˜å› ä¸ºåœ¨å±€åŸŸç½‘å†…çš„ä¼ è¾“æ—¶ï¼Œæˆ‘ä»¬æ˜¯ç”¨MACåœ°å€æ¥ä½œä¸ºä¸åŒä¸»æœºçš„æ ‡è¯†ç¬¦çš„ï¼Œæ‰€ä»¥å°±å¿…é¡»å­˜åœ¨ä¸€ä¸ªIPåœ°å€åˆ°MACåœ°å€çš„è½¬æ¢ã€‚\nARPåè®®ä¹Ÿæ˜¯åŒ…å«åœ¨ä»¥å¤ªç½‘å¸§æ ¼å¼è¿™ä¸ªæ•´ä½“æ¦‚å¿µä¸­çš„ï¼Œå…¶ä¸­å±äºARPè‡ªå·±çš„æ­£æ–‡åªæœ‰28ä¸ªå­—èŠ‚ï¼›å› ä¸ºMTUé™åˆ¶æœ€å°çš„æ•°æ®é•¿åº¦æ˜¯46å­—èŠ‚ï¼Œæ‰€ä»¥åœ¨å‘é€ARPæŠ¥æ–‡çš„æ—¶å€™ï¼Œéœ€è¦ç»™è¿™ä¸ª28å­—èŠ‚åé¢å¡«è¡¥ç©ºä½ã€‚\n\nå…ˆæ¥çœ‹çœ‹ARPè¯·æ±‚&#x2F;åº”ç­”ä¸­çš„å„ä¸ªå­—æ®µçš„å«ä¹‰å§\n\nç¡¬ä»¶ç±»å‹ï¼šæ ‡å®šåº•å±‚ä½¿ç”¨çš„æ˜¯ä»¥å¤ªç½‘è¿˜æ˜¯å…¶ä»–å¸§æ ¼å¼ï¼Œ1ä¸ºä»¥å¤ªç½‘\nåè®®ç±»å‹ï¼šæŒ‡è¦è½¬æ¢çš„åœ°å€ç±»å‹ï¼Œ0X0800ä¸ºIPåœ°å€\nç¡¬ä»¶åœ°å€é•¿åº¦ï¼šå¯¹äºä»¥å¤ªç½‘æ¥è¯´ä¸º6å­—èŠ‚ï¼ˆè¿™é‡Œå¡«çš„æ˜¯æ•°å­—6ï¼Œæ‰€ä»¥åªéœ€è¦å ç”¨1ä¸ªå­—èŠ‚ï¼‰ï¼›\nåè®®åœ°å€é•¿åº¦ï¼šå¯¹äºIPåœ°å€æ¥è¯´ä¸º4å­—èŠ‚ï¼ˆåŒä¸Šï¼‰ï¼›\nopå­—æ®µä¸º1è¡¨ç¤ºARPè¯·æ±‚ï¼Œ2è¡¨ç¤ºARPåº”ç­”\n\nå½“æˆ‘ä»¬çš„ä¸»æœºå¼€å§‹å‘é€æŠ¥æ–‡ä¹‹å‰ï¼Œæˆ‘ä»¬çš„ä¸»æœºæ˜¯ä¸çŸ¥é“æŸä¸€ä¸ªIPå¯¹äºçš„ç›®æ ‡ä¸»æœºçš„MACåœ°å€çš„ã€‚æ‰€ä»¥å°±éœ€è¦ç”¨ARPåè®®å‘å±€åŸŸç½‘å†…å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶å¾—åˆ°ç›®æ ‡ä¸»æœºçš„ARPå“åº”ï¼Œå“åº”ä¸­å°±åŒ…å«äº†è¯¥ä¸»æœºçš„MACåœ°å€\n7.5.2 ARPè¯·æ±‚&#x2F;å“åº”çš„æµç¨‹ä¸»æœºAéœ€è¦ç»™ä¸»æœºBå‘é€æ•°æ®ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸»æœºBçš„MACåœ°å€ï¼Œå®ƒå°±éœ€è¦å‘èµ·ä¸€ä¸ªARPè¯·æ±‚ï¼š\n\nä»¥å¤ªç½‘ç›®çš„åœ°å€å¡«ä¸ºå…¨Fï¼Œä»£è¡¨å¹¿æ’­ï¼›æºåœ°å€å¡«è‡ªå·±çš„MACåœ°å€\nå¸§ç±»å‹å¡«0806ä»£è¡¨ARPåè®®ï¼›\nARPä¸­çš„OPå¡«ä¸º1ï¼Œä»£è¡¨æ˜¯ARPè¯·æ±‚ï¼›\nå‘é€ç«¯ä»¥å¤ªç½‘åœ°å€å’ŒIPåœ°å€å¡«ä¸ºä¸»æœºAè‡ªå·±çš„MACåœ°å€å’Œè‡ªå·±çš„IPåœ°å€ï¼›\nç›®çš„ä»¥å¤ªç½‘åœ°å€å¡«ä¸ºå…¨Fï¼ŒIPåœ°å€å¡«ä¸ºç›®çš„çš„IPåœ°å€ï¼ˆæ³¨æ„æˆ‘ä»¬æ˜¯çŸ¥é“å¯¹æ–¹IPåœ°å€çš„ï¼‰ï¼›\nå‘ä¸‹äº¤ä»˜ç»™ä»¥å¤ªç½‘çš„MACå¸§ï¼Œç„¶åé€å…¥å±€åŸŸç½‘ï¼›\n\nè¿™ä¸ªARPè¯·æ±‚çš„æŠ¥æ–‡å°±å¼€å§‹åœ¨å±€åŸŸç½‘å†…è¿›è¡Œå¹¿æ’­\n\næ”¶åˆ°è¿™ä¸ªARPè¯·æ±‚çš„ä¸»æœºåœ¨MACå¸§æ”¶åˆ°ï¼Œå¹¶å‘ä¸Šäº¤ä»˜ç»™è‡ªå·±çš„ARPå±‚ï¼›\nARPå±‚å…ˆé€šè¿‡OPä¸º1åˆ¤æ–­æ˜¯ARPçš„è¯·æ±‚ï¼›\nå–å‡ºè¯·æ±‚ä¸­çš„ç›®çš„IPåœ°å€ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæœ¬æœºIPåœ°å€ï¼Œä¸æ˜¯åˆ™ä¸¢å¼ƒï¼›\næ˜¯æœ¬æœºçš„IPåœ°å€ï¼Œä»£è¡¨è¿™ä¸ªæŠ¥æ–‡æ˜¯å‘ç»™è‡ªå·±çš„ARPè¯·æ±‚ï¼Œéœ€è¦æ„é€ ARPå“åº”ï¼›\n\näºæ˜¯ä¸»æœºBå°±æ”¶åˆ°äº†è¿™ä¸ªARPè¯·æ±‚ï¼Œå¹¶å¼€å§‹æ„é€ ARPå“åº”\n\nä»¥å¤ªç½‘ç›®çš„åœ°å€å¡«ä¸ºARPè¯·æ±‚ä¸­çš„å‘é€ç«¯MACåœ°å€ï¼ŒæºMACåœ°å€å¡«è‡ªå·±çš„\nå¸§ç±»å‹å¡«0806ä»£è¡¨ARPåè®®\nARPä¸­çš„OPå¡«2ï¼Œä»£è¡¨ARPå“åº”\nå‘é€ç«¯ä»¥å¤ªç½‘åœ°å€å’ŒIPåœ°å€å¡«ä¸ºä¸»æœºBè‡ªå·±çš„MACåœ°å€å’Œè‡ªå·±çš„IPåœ°å€\nç›®çš„ä»¥å¤ªç½‘åœ°å€å¡«ä¸ºAçš„MACåœ°å€ï¼ˆåœ¨ARPè¯·æ±‚ä¸­å¾—çŸ¥çš„ï¼‰IPåœ°å€å¡«ä¸ºç›®çš„ä¸»æœºAçš„IPåœ°å€\nå‘ä¸‹äº¤ä»˜ç»™ä»¥å¤ªç½‘çš„MACå¸§ï¼Œç„¶åé€å…¥å±€åŸŸç½‘\n\næ­¤æ—¶è¿™ä¸ªARPçš„å“åº”å°±å¼€å§‹åœ¨å±€åŸŸç½‘ä¸­ä¼ è¾“ï¼Œå› ä¸ºæ­¤æ—¶ä»¥å¤ªç½‘çš„ç›®çš„åœ°å€ä¸å†æ˜¯å…¨Fï¼Œæ‰€ä»¥å„ä¸ªæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡çš„ä¸»æœºï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡MACåœ°å€æ¥åˆ¤æ–­æ˜¯å¦æ˜¯å‘ç»™è‡ªå·±çš„MACå¸§ã€‚å¦‚æœä¸æ˜¯å°±ç›´æ¥ä¸¢å¼ƒï¼Œä¸äº¤ä»˜ç»™ä¸Šå±‚ï¼›\nä¸»æœºAåˆ¤æ–­ç›®çš„MACå¸§æ˜¯è‡ªå·±çš„ï¼Œäº¤ä»˜ç»™ä¸Šå±‚çš„ARPåè®®\n\nåˆ¤æ–­ARPä¸­çš„OPä¸º2ï¼Œä»£è¡¨æ˜¯ARPå“åº”\nå› ä¸ºå‰é¢å·²ç»åˆ¤æ–­è¿‡ç›®çš„MACåœ°å€æ˜¯è‡ªå·±çš„äº†ï¼Œæ‰€ä»¥è¿™æ—¶å€™ä¸éœ€è¦åˆ¤æ–­ARPä¸­çš„ç›®çš„MACå’Œç›®çš„ä¸»æœºIPäº†\nç›´æ¥å–å‡ºå‘é€ç«¯ä¸»æœºMACå’Œä¸»æœºIPï¼Œå°±èƒ½å¾—åˆ°ä¸»æœºBçš„IPå’ŒMACåœ°å€çš„æ˜ å°„å…³ç³»\n\nè¿™æ—¶å€™ä¸»æœºAå°±å¾—åˆ°äº†ä¸»æœºBçš„MACåœ°å€ï¼Œå¯ä»¥æ­£å¸¸è¿›è¡Œæ•°æ®çš„å‘é€äº†ï¼\n7.5.3 ARPç¼“å­˜ä¸æ›´æ–°\nä»»ä½•ä¸€å°ä¸»æœºå‘å‡ºçš„ä¸€å®šæ˜¯ARPçš„è¯·æ±‚ï¼›\næ¥æ”¶åˆ°çš„ARPå¯èƒ½æ˜¯å¯¹æ–¹å‘å¾€å‘é€çš„ARPè¯·æ±‚ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘å‘é€çš„ARPè¯·æ±‚çš„å“åº”ï¼›\n\nä½†å¦‚æœæ¯å°ä¸»æœºéƒ½ä¸çŸ¥é“IPå’ŒMACçš„æ˜ å°„å…³ç³»ï¼Œå²‚ä¸æ˜¯æ¯æ¬¡å‘é€æ•°æ®ä¹‹å‰ï¼Œéƒ½éœ€è¦æ¥ä¸ªARPè¯·æ±‚å’Œå“åº”æ¥è·å–å¯¹æ–¹MACåœ°å€ï¼Ÿè¿™æ ·æ•´ä¸ªå±€åŸŸç½‘å†…å°±å¾—è¢«ARPè¯·æ±‚å’Œå“åº”ç»™å¡æ»¡äº†ã€‚\næ‰€ä»¥ï¼Œå½“æˆ‘ä»¬å‘é€äº†ä¸€ä¸ªARPè¯·æ±‚åï¼Œåº”è¯¥éœ€è¦å°†ARPå“åº”ç»™æš‚æ—¶ç¼“å­˜åˆ°æœ¬æœºä¸Šï¼Œé¿å…ä¸‹æ¬¡å‘é€çš„æ—¶å€™ä¸çŸ¥é“å¯¹æ–¹çš„MACåœ°å€ã€‚æ“ä½œç³»ç»Ÿä¸­å°±æœ‰ä¸€å¼ ARPç¼“å­˜è¡¨ï¼Œä¿å­˜äº†å±€åŸŸç½‘å†…éƒ¨åˆ†ä¸»æœºçš„IPå’ŒMACåœ°å€çš„æ˜ å°„å…³ç³»ã€‚\n\nå¦‚æœä¸€ä¸ªä¸»æœºæƒ³è·å–åˆ°å±€åŸŸç½‘å†…æ‰€æœ‰çš„MACåœ°å€ï¼Œå°±å¯ä»¥å†™ä¸ªå¾ªç¯ï¼ŒæŠŠå±€åŸŸç½‘å†…çš„æ‰€æœ‰IPéƒ½å‘é€ä¸€æ¬¡ARPè¯·æ±‚ï¼Œå†å°†æ”¶é›†åˆ°çš„ARPå“åº”ç»™ç¼“å­˜èµ·æ¥ï¼ˆå› ä¸ºå±€åŸŸç½‘å†…çš„ä¸»æœºç½‘ç»œå·éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¸»æœºå·éƒ½æ˜¯æ˜¯ä»1åˆ°254ï¼Œå¹¶ä¸å¤šï¼Œå†™ä¸ªå¾ªç¯å°±è¡Œäº†ï¼‰\n\nä½†è¿™é‡Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæŸå°ä¸»æœºBç¦»å¼€äº†ä½ è¿™ä¸ªå±€åŸŸç½‘ï¼Œä¸»æœºCæ¥å…¥åï¼Œè·¯ç”±å™¨ç»™ä¸»æœºCåˆ†é…äº†åŸæœ¬æ˜¯ç»™ä¸»æœºBç”¨çš„IPï¼Œè¿™æ—¶å€™ä¸»æœºAé‡Œé¢çš„ARPç¼“å­˜è¡¨æ²¡æœ‰æ›´æ–°ï¼Œè¿˜æ˜¯å¡«äº†ä¸»æœºBçš„MACåœ°å€ï¼ˆä½†ä¸»æœºBå…¶å®å·²ç»ä¸åœ¨å±€åŸŸç½‘é‡Œé¢äº†ï¼‰ï¼Œè¿™æ—¶å€™è¿™ä¸ªæŠ¥æ–‡å²‚ä¸æ˜¯æ‰¾ä¸åˆ°ç›®æ ‡ä¸»æœºäº†ï¼Ÿ\næ‰€ä»¥ARPä¸ä»…ä»…éœ€è¦ç¼“å­˜ï¼Œè¿˜éœ€è¦ä¿æœ‰ä¸€å®šçš„æ›´æ–°æœºåˆ¶ï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæ—¶å‘ç¼“å­˜è¡¨ä¸­å·²æœ‰IPçš„ä¸»æœºå‘é€ä¸€æ¡ARPè¯·æ±‚ï¼Œå¹¶å¾—åˆ°å¯¹æ–¹çš„ARPå“åº”ã€‚è¿™æ—¶å€™å°±å¯ä»¥æ¯”å¯¹è¿”å›çš„MACåœ°å€æ˜¯å¦æœ‰å˜åŠ¨ï¼Œæœ‰å˜åŠ¨åˆ™æ›´æ–°ã€‚\nå¦‚æœä¸€ä¸ªARPè¯·æ±‚é•¿æ—¶é—´æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œåˆ™å¯ä»¥è®¤ä¸ºè¯¥IPåœ°å€ç›®å‰æ²¡æœ‰å¯¹åº”çš„ä¸»æœºï¼Œå°†å…¶ä»ç¼“å­˜è¡¨ä¸­åˆ é™¤ã€‚\n7.5.4 ä¸­é—´äººæ”»å‡»ä¸Šæ–‡è®²è¿°äº†ARPçš„è¯·æ±‚å’Œå“åº”çš„æ ¼å¼ï¼Œå‡è®¾å‡ºç°äº†ä¸‹é¢çš„è¿™ä¸ªæƒ…å†µï¼š\n\nä¸»æœºAæƒ³è·å–ä¸»æœºBçš„MACï¼Œå‘é€ARPè¯·æ±‚å¹¶è·å–åˆ°äº†å“åº”\nä¸»æœºDæŠŠè‡ªå·±çš„IPä¼ªè£…æˆä¸»æœºBçš„IPï¼Œåˆç»™ä¸»æœºAå‘é€äº†ARPå“åº”\næ­¤æ—¶ä¸»æœºAæ›´æ–°äº†ARPç¼“å­˜è¡¨ï¼Œå°†ä¸»æœºBçš„IP Bæ˜ å°„ç»™äº†MAC D\nä¸»æœºDç”¨åŒæ ·çš„åŠæ³•ï¼Œå°†ä¸»æœºBçš„ARPç¼“å­˜è¡¨ä¸­çš„IP Aæ˜ å°„ç»™äº†MAC D\næ­¤æ—¶ä¸»æœºAç»™Bå‘é€æ¶ˆæ¯ï¼Œå¡«çš„æ˜¯MAC Dï¼›Bç»™Aå‘æ¶ˆæ¯ï¼Œå¡«çš„ä¹Ÿæ˜¯MAC Dï¼›\nä¸»æœºDåœ¨æ”¶åˆ°Aå’ŒBåŒæ–¹é€šä¿¡çš„æŠ¥æ–‡åï¼Œå…ˆäº¤ä»˜ç»™è‡ªå·±çš„ä¸Šå±‚ï¼Œå†è½¬å‘ç»™å¯¹æ–¹ï¼›\nAå’ŒBçš„åŒæ–¹é€šä¿¡å°±å‡ºç°äº†ä¸€ä¸ªä¸­é—´äººDï¼Œæ­¤æ—¶å¦‚æœä½ çš„ä¿¡æ¯ä¸æ˜¯åŠ å¯†çš„ï¼Œé‚£å°±å¯ä»¥è¢«ä¸»æœºDæ‰€çªƒå–ï¼\n\nè¿™ä¹Ÿæ˜¯ä¸ºå•¥å‡ºç°äº†httpsæ¥é¿å…ä¸­é—´äººæ”»å‡»ï¼\n7.5.5  RARPRARPï¼ˆReverse Address Resolution Protocolï¼Œé€†åœ°å€è§£æåè®®ï¼‰æ˜¯ä¸€ç§ç½‘ç»œåè®®ï¼Œç”¨äºåœ¨å±€åŸŸç½‘ï¼ˆLANï¼‰ä¸­é€šè¿‡å·²çŸ¥çš„ç‰©ç†åœ°å€æŸ¥æ‰¾ç›¸åº”çš„IPåœ°å€ã€‚\nä¸å‰é¢è®²è¿°çš„ARPï¼ˆAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼‰ä¸åŒï¼ŒARPç”¨äºé€šè¿‡å·²çŸ¥çš„IPåœ°å€æŸ¥æ‰¾ç›¸åº”çš„ç‰©ç†åœ°å€ï¼Œé€šå¸¸ç”¨äºå°†ç½‘ç»œå±‚ï¼ˆIPï¼‰åœ°å€æ˜ å°„åˆ°é“¾è·¯å±‚ï¼ˆMACï¼‰åœ°å€ã€‚RARPåˆ™æ‰§è¡Œç›¸åçš„æ“ä½œï¼Œå®ƒå…è®¸ä¸»æœºåœ¨å¯åŠ¨æ—¶ä½¿ç”¨å…¶ç‰©ç†åœ°å€æ¥è¯·æ±‚åˆ†é…ç»™å®ƒçš„IPåœ°å€ã€‚\nRARPåè®®åœ¨è¿‡å»çš„è®¡ç®—æœºç½‘ç»œä¸­ç”¨äºåœ¨æ²¡æœ‰äººå·¥é…ç½®çš„æƒ…å†µä¸‹ä¸ºè®¡ç®—æœºåˆ†é…IPåœ°å€ã€‚å½“è®¡ç®—æœºå¯åŠ¨æ—¶ï¼Œå®ƒä¼šå‘ç½‘ç»œå‘é€ä¸€ä¸ªRARPè¯·æ±‚åŒ…ï¼Œå…¶ä¸­åŒ…å«å®ƒçš„ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰ï¼Œä»¥è¯·æ±‚åˆ†é…ä¸€ä¸ªIPåœ°å€ã€‚ç½‘ç»œä¸­çš„RARPæœåŠ¡å™¨ä¼šæ¥æ”¶è¿™ä¸ªè¯·æ±‚å¹¶å›å¤åŒ…å«IPåœ°å€çš„RARPå“åº”åŒ…ã€‚\nç„¶è€Œï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼ŒRARPçš„ä½¿ç”¨é€æ¸å‡å°‘ï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒçš„å±€é™æ€§ï¼Œä¾‹å¦‚ä¸å¤ªé€‚ç”¨äºå¤§å‹ç½‘ç»œï¼Œä»¥åŠéœ€è¦ç‰¹å®šçš„æœåŠ¡å™¨æ¥ç®¡ç†åœ°å€åˆ†é…ã€‚ç°ä»£çš„ç½‘ç»œé€šå¸¸ä½¿ç”¨DHCPï¼ˆDynamic Host Configuration Protocolï¼ŒåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå®ƒæ›´çµæ´»ä¸”æ˜“äºç®¡ç†ï¼Œå¯ä»¥è‡ªåŠ¨åˆ†é…IPåœ°å€ä»¥åŠå…¶ä»–ç½‘ç»œé…ç½®å‚æ•°ç»™ä¸»æœºã€‚\n7.6 è™šæ‹Ÿå±€åŸŸç½‘VLAN7.6.1 é—®é¢˜è¯´æ˜æˆ‘ä»¬å¸¸ç”¨çš„ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚+ç‰©ç†å±‚ï¼Œä½¿ç”¨ä»¥å¤ªç½‘äº¤æ¢æœºäº’è¿èµ·æ¥çš„äº¤æ¢å¼ä»¥å¤ªç½‘ï¼Œå…¶æ‰€æœ‰ç«™ç‚¹éƒ½å±äºåŒä¸€ä¸ªå¹¿æ’­åŸŸã€‚\nä½†æ˜¯å·¨å¤§çš„å¹¿æ’­åŸŸä¼šé€ æˆä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚éš¾ä»¥ç®¡ç†å’Œç»´æŠ¤ã€æ½œåœ¨å®‰å…¨é—®é¢˜ï¼ˆä¸€ä¸ªè®¾å¤‡å¯ä»¥æ”»å‡»æ•´ä¸ªå·¨å¤§çš„å¹¿æ’­åŸŸä¸­çš„æ‰€æœ‰è®¾å¤‡ï¼‰ã€å¹¿æ’­é£æš´ã€‚\n\nå½“å±€åŸŸç½‘å†…çš„Aè¦ç»™Bå‘é€ä¸€ä¸ªMACå¸§çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦ç”¨ARPåè®®è·å–ç›®æ ‡è®¾å¤‡çš„MACåœ°å€ã€‚æ­¤æ—¶è¿™ä¸ªARPè¯·æ±‚å°±ä¼šè¢«å±€åŸŸç½‘å†…çš„æ‰€æœ‰è®¾å¤‡éƒ½æ”¶åˆ°ï¼Œæ¯ä¸ªè®¾å¤‡æ”¶åˆ°ARPè¯·æ±‚éœ€è¦åˆ¤æ–­å®ƒæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„ï¼Œè¿™å°±é€ æˆäº†æ— æ•ˆçš„CPUèµ„æºæµªè´¹\n\n\nå¦‚æœå±€åŸŸç½‘å†…ä¸ä¼šé¢‘ç¹å‡ºç°å¹¿æ’­ä¿¡æ¯ï¼Œè¿™ä¸ªé—®é¢˜è¿˜ä¸æ˜¯å¾ˆä¸¥é‡ã€‚ä½†æ˜¯å½“å‰ä½¿ç”¨çš„å¾ˆå¤šåè®®éƒ½ä¼šå‘å‡ºå¹¿æ’­ï¼Œç½‘ç»œä¸­ä¼šé¢‘ç¹å‡ºç°å¹¿æ’­ä¿¡æ¯ï¼Œè¿™å°±å¾ˆéš¾å—äº†ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†è™šæ‹Ÿå±€åŸŸç½‘VLANæŠ€æœ¯ï¼Œæ¥å°†ä¸€ä¸ªå¤§çš„å¹¿æ’­åŸŸåˆ’åˆ†ä¸ºå„ä¸ªå°çš„å¹¿æ’­åŸŸã€‚\né™¤äº†ä½¿ç”¨è™šæ‹Ÿå±€åŸŸç½‘ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è·¯ç”±å™¨æ¥éš”ç¦»å¹¿æ’­åŸŸã€‚ä½†æ˜¯è·¯ç”±å™¨æˆæœ¬è¾ƒé«˜ï¼Œè™šæ‹Ÿå±€åŸŸç½‘åªéœ€è¦åœ¨æ”¯æŒçš„äº¤æ¢æœºä¸­è¿›è¡Œè®¾ç½®å³å¯ï¼Œæˆæœ¬è¾ƒä½ã€‚\n7.6.2 è™šæ‹Ÿå±€åŸŸç½‘VLANè™šæ‹Ÿæœºå±€åŸŸç½‘ Virtul Local Area Network æ˜¯ä¸€ç§å°†å±€åŸŸç½‘å†…è®¾å¤‡åŒ–ä¸ºä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè®©è¿™äº›é€»è¾‘ç»„æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘ä¸Šçš„å±€åŸŸç½‘ã€‚\nå¦‚ä¸‹å›¾ï¼Œä½¿ç”¨VLAN1å’ŒVLAN2å¯¹è®¾å¤‡è¿›è¡Œéš”ç¦»åï¼Œåªæœ‰åŒä¸€ä¸ªVLANé‡Œé¢çš„è®¾å¤‡æ‰èƒ½ç›¸äº’é€šä¿¡ï¼Œä¸åŒVLANç›´æ¥ä¸ä¼šæ”¶åˆ°ç›¸äº’çš„å¹¿æ’­åŸŸã€‚\n\n7.6.3 VLANå®ç°æœºåˆ¶VLANæ ‡è®°å­—æ®µäº¤æ¢æœºåœ¨æ”¶åˆ°ä¸€ä¸ªå¸¸è§„çš„MACå¸§åï¼Œä¼šåœ¨å…¶æºMACåœ°å€å­—æ®µå’Œç±»å‹å­—æ®µä¹‹é—´æ’å…¥ä¸€ä¸ª4å­—èŠ‚çš„VLANæ ‡è®°å­—æ®µï¼Œå°†MACå¸§è½¬ä¸ºäº†IEEE 802.1Qå¸§ã€‚è¿™ä¸ªVLANæ ‡è®°å­—æ®µèƒ½å‘Šè¯‰æˆ‘ä»¬å½“å‰è¿™ä¸ªMACå¸§å±äºå“ªä¸€ä¸ªVLANï¼Œä»è€Œå®ç°VLANéš”ç¦»ã€‚\nVLANæ ‡è®°ä¸­çš„æœ€å12æ¯”ç‰¹ä¸ºVLANæ ‡è¯†ç¬¦VIDï¼Œå®ƒå”¯ä¸€çš„æ ‡è¯†äº†ä»¥å¤ªç½‘å¸§å±äºå“ªä¸€ä¸ªVLANã€‚\n\nå–å€¼èŒƒå›´æ˜¯0åˆ°4095ï¼ˆ0åˆ°2çš„12æ¬¡æ–¹-1ï¼‰\nä½†æ˜¯0å’Œ4095éƒ½ä¸ä½¿ç”¨ï¼Œå®é™…å¯ç”¨ä¸º1åˆ°4094\n\næ³¨æ„ï¼Œè¿™ä¸ªæ“ä½œæ˜¯ç”±äº¤æ¢æœºæ¥å®ç°çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¸»æœºå®ç°çš„ã€‚\n\näº¤æ¢æœºç«¯å£ç±»å‹äº¤æ¢æœºçš„ç«¯å£ç±»å‹æœ‰ä¸‹é¢ä¸‰ç§\n\nAccess\nTrunk\nHybrid\n\nåœ¨ä¸åŒå“ç‰Œçš„äº¤æ¢æœºä¸Šï¼Œæ¯ä¸€ä¸ªç«¯å£éƒ½ä¼šæœ‰ä¸€ä¸ªç¼ºçœçš„VLAN ID\n\næ€ç§‘äº¤æ¢æœºä¸Šç§°ä¸ºNative VLANï¼Œå³æœ¬å¾VLAN\nåä¸ºäº¤æ¢æœºä¸Šç§°ä¸ºPort VLAN IDï¼Œå³ç«¯å£VLAN IDï¼Œç®€è®°ä¸ºPVID\n\nAccessåœ¨Accessç«¯å£ä¸­ï¼Œä¸€èˆ¬åªç”¨äºè¿æ¥ç”¨æˆ·è®¡ç®—æœºï¼Œä¸”å®ƒåªæ”¯æŒâ€œæœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§ï¼Œæ”¶åˆ°å¸§åå†ç»™å®ƒæ‰“æ ‡ç­¾ï¼Œç¡®è®¤è¦è½¬å‘ç›®æ ‡ä¹Ÿæ˜¯Accessç«¯å£çš„ä¸»æœºæ—¶ï¼Œåˆ™å»æ ‡ç­¾è½¬å‘ã€‚\n\nAccessç«¯å£åªèƒ½å±äºä¸€ä¸ªVLANï¼ˆä¸€ä¸ªç«¯å£ä¸èƒ½åŒæ—¶å±äºä¸¤ä¸ªVLANï¼‰\nAccessç«¯å£çš„PVIDå€¼å’Œç«¯å£æ‰€å±çš„VLAN IDç›¸åŒ\n\n\nå½“æˆ‘ä»¬åˆ’åˆ†å‡ºä¸¤ä¸ªVLANï¼Œå¹¶å°†ä¸åŒçš„Accessç«¯å£æ·»åŠ åˆ°å¯¹åº”VLANä¸­åï¼Œå‘é€å¸§æ—¶ï¼Œäº¤æ¢æœºä¼šæ·»åŠ VLANæ ‡è®°å­—æ®µï¼Œå†åˆ¤æ–­å®ƒå±äºå“ªä¸€ä¸ªVLANï¼Œæ¯”å¦‚å³ä¾§Cä¸»æœºå‘é€å¹¿æ’­å¸§åï¼Œäº¤æ¢æœºåŠ ä¸ŠVLANå­—æ®µåï¼Œå‘ç°å®ƒæ˜¯å±äºVLAN3çš„ï¼Œäºæ˜¯åªä¼šåœ¨VLAN3ä¸­å¯¹è¿™ä¸ªå¸§è¿›è¡Œå¹¿æ’­è½¬å‘ï¼Œä¸ä¼šå½±å“VLAN2é‡Œé¢çš„è®¾å¤‡ã€‚\n\nTrunkTrunkç«¯å£ä¸€èˆ¬ç”¨äºä¸¤ä¸ªäº¤æ¢æœºçš„è¿æ¥ï¼ˆä¸€ä¸ªäº¤æ¢æœºæ¥å£ä¸å¤Ÿç”¨äº†ï¼‰ï¼Œå®ƒå¯ä»¥å±äºå¤šä¸ªVLANï¼Œå¹¶ä¾›ç”¨æˆ·è®¾ç½®VLAN IDçš„å€¼ï¼›\n\nä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†Trunkç«¯å£çš„PVIDè®¾ç½®ä¸º1ï¼Œå‡è®¾Aå‘é€å¸§ï¼Œå› ä¸ºä»Accessç«¯å£æ¥å—ï¼Œäº¤æ¢æœº1ä¼šå¯¹å…¶åŠ ä¸ŠVLAN IDå­—æ®µã€‚å¹¶æ£€æµ‹å½“å‰äº¤æ¢æœºä¸­æœ‰å“ªäº›ç«¯å£çš„PVIDæ˜¯1\nå› ä¸º2å·Accessç«¯å£å’Œ5å·Trunkç«¯å£çš„PVIDéƒ½ä¸º1ï¼Œäº¤æ¢æœº1å°†è¯¥å¸§å»ç«¯å£è½¬å‘ç»™ä¸»æœºBå’ŒTrunkç«¯å£\näº¤æ¢æœº2ä»5å·Trunkç«¯å£æ”¶åˆ°è¯¥å¸§ï¼Œå› ä¸ºå®ƒå†…éƒ¨æ²¡æœ‰æ‰“æ ‡ç­¾ï¼Œæ‰€ä»¥å®ƒçŸ¥é“è¯¥å¸§çš„PVIDå’ŒTrunkç«¯å£çš„PVIDç›¸åŒï¼Œå°†å…¶æ‰“ä¸ŠVLAN1çš„IDï¼Œå¹¶æ£€æµ‹äº¤æ¢æœºå™¨2ä¸­é‚£äº›ç«¯å£çš„PVIDä¸º1ï¼Œå°†å…¶å»æ ‡ç­¾è½¬å‘ç»™ä¸»æœºEå’ŒF\n\n\nå¦‚æœæ˜¯Cä¸»æœºå‘é€å¹¿æ’­å¸§ï¼Œæ­¤æ—¶è¯¥å¸§çš„PVIDå’Œ5å·Trunkç«¯å£çš„PVIDä¸ç¬¦åˆï¼Œäº¤æ¢æœº1ä¼šå°†è¯¥å¸§ä¸å»æ ‡ç­¾ä»Trunkç«¯å£è½¬å‘å‡ºå»ï¼ˆå³ä¸ç®¡Trunkç«¯å£çš„PVIDæ˜¯å¤šå°‘ï¼Œäº¤æ¢æœºéƒ½éœ€è¦å°†æŠ¥æ–‡å‘ç»™ä»–ï¼Œåªä¸è¿‡å‘é€çš„å†…å®¹æ˜¯å¦æœ‰æ ‡ç­¾çš„åŒºåˆ«ï¼‰\näº¤æ¢æœº2æ”¶åˆ°è¿™ä¸ªå¸¦VLAN2æ ‡ç­¾çš„å¸§åï¼Œå°±ä¼šç›´æ¥æ£€æµ‹é‚£äº›ç«¯å£çš„PVIDä¸º2ï¼Œå°†å…¶å»æ ‡ç­¾è½¬å‘ç»™å¯¹åº”ä¸»æœºã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç»ƒä¹ é¢˜\n\nç­”æ¡ˆå¦‚ä¸‹ï¼Œéœ€è¦æ³¨æ„ä¸¤ä¸ªäº¤æ¢æœºäº’è”æ—¶ï¼ŒTrunkç«¯å£çš„PVIDå¿…é¡»è¦è®¾ç½®ä¸ºç›¸åŒçš„å€¼ï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯è½¬å‘çš„æƒ…å†µã€‚\n\nHybridï¼ˆåä¸ºäº¤æ¢æœºç§æœ‰ï¼‰Hybridç«¯å£å¯ä»¥å•ç‹¬è®¾ç½®éœ€è¦å¯¹é‚£äº›PVIDè¿›è¡Œå»æ ‡ç­¾æ“ä½œï¼Œå½“æ”¶åˆ°å¸§çš„PVIDä¸åœ¨å»æ ‡ç­¾è®¾ç½®ä¸­æ—¶ï¼Œä¼šç›´æ¥å‘é€ç»™ä¸»æœºï¼Œæ­¤æ—¶ä¸»æœºæ”¶åˆ°ä¸€ä¸ªä¸æ”¯æŒçš„IEEE 802.1Qå¸§ï¼Œä¼šå°†å…¶ä¸¢å¼ƒï¼\nè€Œå¦‚æœä¸€ä¸ªå¸§çš„PVIDåœ¨å»æ ‡ç­¾çš„è®¾ç½®ä¸­ï¼Œåˆ™å»æ ‡ç­¾åå†å‘é€ç»™ä¸»æœºã€‚æ­¤æ—¶ä¸»æœºå°±èƒ½æ”¶åˆ°ä¸€ä¸ªæ­£å¸¸çš„MACå¸§ï¼Œä»è€Œè¿›è¡Œå¤„ç†ã€‚\né€šè¿‡ç»™ä¸åŒç«¯å£è®¾ç½®å»æ ‡ç­¾VIDå€¼ï¼Œå…¶å®å°±æ˜¯å˜ç›¸çš„è®¾ç½®äº†è¯¥ç«¯å£èƒ½å±äºé‚£äº›VLANï¼Œä»è€Œå—åˆ°ä¸åŒVLANé‡Œé¢çš„å¸§ï¼Œè®¾ç½®æ¯”å›ºå®šçš„å•ä¸ªVLANæ›´åŠ çµæ´»ï¼\n\næ€»ç»“æ•°æ®é“¾è·¯å±‚\næ•°æ®é“¾è·¯å±‚çš„ä½œç”¨ï¼šä¸¤ä¸ªè®¾å¤‡(åŒä¸€ç§æ•°æ®é“¾è·¯èŠ‚ç‚¹)ä¹‹é—´è¿›è¡Œä¼ é€’æ•°æ®ï¼›\nä»¥å¤ªç½‘æ˜¯ä¸€ç§æŠ€æœ¯æ ‡å‡†ï¼›æ—¢åŒ…å«äº†æ•°æ®é“¾è·¯å±‚çš„å†…å®¹ï¼Œ ä¹ŸåŒ…å«äº†ä¸€äº›ç‰©ç†å±‚çš„å†…å®¹ã€‚ ä¾‹å¦‚: è§„å®šäº†ç½‘ç»œæ‹“æ‰‘ç»“æ„, è®¿é—®æ§åˆ¶æ–¹å¼, ä¼ è¾“é€Ÿç‡ç­‰ï¼›\nä»¥å¤ªç½‘å¸§æ ¼å¼\nç†è§£macåœ°å€\nç†è§£arpåè®®\nç†è§£MTU\n\nç½‘ç»œå±‚\nç½‘ç»œå±‚çš„ä½œç”¨: åœ¨å¤æ‚çš„ç½‘ç»œç¯å¢ƒä¸­ç¡®å®šä¸€ä¸ªåˆé€‚çš„è·¯å¾„. \nç†è§£IPåœ°å€, ç†è§£IPåœ°å€å’ŒMACåœ°å€çš„åŒºåˆ«\nç†è§£IPåè®®æ ¼å¼\näº†è§£ç½‘æ®µåˆ’åˆ†æ–¹æ³•\nç†è§£å¦‚ä½•è§£å†³IPæ•°ç›®ä¸è¶³çš„é—®é¢˜, æŒæ¡ç½‘æ®µåˆ’åˆ†çš„ä¸¤ç§æ–¹æ¡ˆ\nç†è§£ç§æœ‰IPå’Œå…¬ç½‘IP\nç†è§£ç½‘ç»œå±‚çš„IPåœ°å€è·¯ç”±è¿‡ç¨‹\nç†è§£ä¸€ä¸ªæ•°æ®åŒ…å¦‚ä½•è·¨è¶Šç½‘æ®µåˆ°è¾¾æœ€ç»ˆç›®çš„åœ°\nç†è§£IPæ•°æ®åŒ…åˆ†åŒ…çš„åŸå› \näº†è§£NATè®¾å¤‡çš„å·¥ä½œåŸç†\n\nä¼ è¾“å±‚\nä¼ è¾“å±‚çš„ä½œç”¨: è´Ÿè´£æ•°æ®èƒ½å¤Ÿä»å‘é€ç«¯ä¼ è¾“æ¥æ”¶ç«¯\nç†è§£ç«¯å£å·çš„æ¦‚å¿µ\nè®¤è¯†UDPåè®®, äº†è§£UDPåè®®çš„ç‰¹ç‚¹ã€‚\nè®¤è¯†TCPåè®®ï¼Œç†è§£TCPåè®®çš„å¯é æ€§\nç†è§£TCPåè®®çš„çŠ¶æ€è½¬åŒ–\næŒæ¡TCPçš„è¿æ¥ç®¡ç†ï¼Œç¡®è®¤åº”ç­”, è¶…æ—¶é‡ä¼ , æ»‘åŠ¨çª—å£, æµé‡æ§åˆ¶, æ‹¥å¡æ§åˆ¶, å»¶è¿Ÿåº”ç­”, æå¸¦åº”ç­”ç‰¹æ€§\nç†è§£TCPé¢å‘å­—èŠ‚æµ, ç†è§£ç²˜åŒ…é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ\nèƒ½å¤ŸåŸºäºUDPå®ç°å¯é ä¼ è¾“\nç†è§£MTUå¯¹UDP&#x2F;TCPçš„å½±å“\n\nåº”ç”¨å±‚\nåº”ç”¨å±‚çš„ä½œç”¨: æ»¡è¶³æˆ‘ä»¬æ—¥å¸¸éœ€æ±‚çš„ç½‘ç»œç¨‹åº, éƒ½æ˜¯åœ¨åº”ç”¨å±‚\nèƒ½å¤Ÿæ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œè®¾è®¡åº”ç”¨å±‚åè®®\näº†è§£HTTPåè®®\nç†è§£DNSçš„åŸç†å’Œå·¥ä½œæµç¨‹\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["Linux"]},{"title":"ã€æ–¹æ³•åˆ†äº«ã€‘å‡†å¤§å­¦ç”Ÿå¦‚ä½•è‡ªå­¦Cè¯­è¨€","url":"/posts/4266945915/","content":"ã€æ–¹æ³•åˆ†äº«ã€‘å‡†å¤§å­¦ç”Ÿå¦‚ä½•è‡ªå­¦Cè¯­è¨€\n\n\n[TOC]\nå‡†å¤§å­¦ç”Ÿå¦‚ä½•è‡ªå­¦Cè¯­è¨€è™½è¯´ç°åœ¨å·²ç»æ¥è¿‘æˆ‘ä»¬æœ€é•¿çš„ä¸”æ— å¿§æ— è™‘çš„æš‘å‡çš„å°¾å£°\nä½†æˆ‘ä¼°æ‘¸ç€å¾ˆå¤šå°ä¼™ä¼´è¿˜æ˜¯å’Œæˆ‘ä¸€æ ·æ•´å¤©æ‘¸é±¼ï¼Œä¸çŸ¥ä¸è§‰å°±æµªè´¹äº†ä¸€å¤©\nï¼ˆå…¶å®åªæœ‰æˆ‘åœ¨æ‘¸é±¼å¯¹å—ï¼Œæµä¸‹äº†ä¸äº‰æ°”çš„æ³ªæ°´ï¼‰\nä¸æ‰¯è¿™äº›æ²¡ç”¨çš„ï¼Œè¿›å…¥ä»Šå¤©çš„æ­£é¢˜\næœ¬ç¯‡åšå®¢å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•è‡ªå­¦Cè¯­è¨€çš„ï¼Œä»¥åŠå¦‚ä½•åšå­¦ä¹ ç¬”è®°\nå­¦ä¹ æ–¹æ³•å„ä¸ç›¸åŒï¼Œè¯·ä»¥è‡ªèº«æƒ…å†µä¸ºå‡†\nä¸€ã€æ‰¾å¯»ä¸€ä¸ªä¼˜è´¨æ•™å­¦è§†é¢‘å¥½çš„æ•™å­¦èµ„æºæ°¸è¿œæ˜¯æˆ‘ä»¬å­¦ä¹ çš„ç¬¬ä¸€æ­¥!\nåœ¨è¿™é‡Œæˆ‘å»ºè®®ä»¥è§†é¢‘ä¸ºä¸»ï¼Œä¹¦æœ¬ä¸ºè¾…åŠ©\nCè¯­è¨€çš„ä¹¦ç±ç¹å¤šè€Œæ‚ï¼Œæœ‰å¾ˆå¤šçƒ­é”€ä¹¦ç±å¹¶éå‡ºè‡ªåé—¨å¤§å®¶ï¼Œæœ‰çº°æ¼åœ¨æ‰€éš¾å…ã€‚ä½œä¸ºåˆå­¦è€…çš„æˆ‘ä»¬è‚¯å®šçœ‹ä¸å‡ºè¿™äº›çº°æ¼ï¼Œä½†å®ƒå¯èƒ½ä¼šæŠŠæˆ‘ä»¬çš„å­¦ä¹ å¼•å…¥æ­»èƒ¡åŒã€‚\nè§†é¢‘åŒæ ·ä¹Ÿä¼šæœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½•æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä¼˜è´¨æ•™å­¦è§†é¢‘\nåœ¨çœ‹è§†é¢‘çš„åŸºç¡€ä¸Šï¼Œå¤ä»¥ä¹¦æœ¬ç»ƒä¹ ä¸ºè¾…åŠ©ï¼Œæ–¹ä¸ºå­¦ä¹ å¦™è®¡ï¼ˆä¸ªäººè§‚ç‚¹ï¼‰\nåœ¨è¿™é‡Œå¼ºçƒˆæ¨èbç«™æ¯”ç‰¹é¹å“¥çš„Cè¯­è¨€æ•™å­¦è§†é¢‘ è¿æ¥\n\nè®²çš„éå¸¸éå¸¸éå¸¸è¯¦ç»†ï¼Œæ¯”æˆ‘ä¹‹å‰åœ¨æŸå ‚åœ¨çº¿æ‰¾åˆ°çš„ä¸çŸ¥åè§†é¢‘å¥½å¤ªå¤šäº†ï¼ˆé‚£ä¸ªè§†é¢‘é‡Œè€å¸ˆå°±å¯¹ç€ä½ å¿µpptï¼Œæ¯ç‡¥ä¹å‘³æ— å¹²è´§ï¼‰\nè¿™é‡Œæ¨èå¤§å®¶ç›´æ¥å»çœ‹æœ€æ–°ç‰ˆæœ¬çš„è§†é¢‘ï¼Œç”»è´¨æ›´å¥½ã€‚å†…å®¹æ–°æ—§åŸºæœ¬æ˜¯ä¸€æ ·çš„\næ‰¾å®Œè§†é¢‘ä¹‹åè¯·ç«‹é©¬å¼€åŠ¨ï¼Œæ”¶è¿›æ”¶è—å¤¹åªä¼šè®©ä½ å¼€å­¦äº†è¿›åº¦è¿˜æ˜¯0%\nä¸è¿‡æƒ³å¿…æ¥csdnçœ‹åšå®¢çš„ä½ å·²ç»ä¸æ˜¯å°èœé¸¡äº†ï¼ˆdogeï¼‰\näºŒã€ä½¿ç”¨ä¼˜è´¨ç¼–è¯‘å™¨æ‹’ç»devc++å­¦ä¹ Cè¯­è¨€\nå½“ç„¶ï¼Œå®ƒè‚¯å®šèƒ½ç”¨ï¼Œæˆ‘ä¹Ÿæ¨èä½ åœ¨ç”µè„‘é‡Œé¢ä¸‹ä¸€ä¸ªdevc++\nä½†æ˜¯å®ƒä¸é€‚åˆæ—¥ç”¨å­¦ä¹ ï¼ï¼\nç†ç”±éå¸¸ç®€å•ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹VS2019å’Œdevc++åœ¨åŒä¸€ä¸ªä»£ç ä¸‹çš„ç•Œé¢\n\nè¯·é—®é‚£è¾¹æ›´å®¹æ˜“è®©ä½ çœ¼èŠ±ç¼­ä¹±ï¼Ÿè§†è§‰ç–²åŠ³ï¼Ÿ\n(ä½ è¦è¯´vsé¢œè‰²å¤ªå¤šçœ¼èŠ±ç¼­ä¹±ï¼Œé‚£æˆ‘æ— åŠ›åé©³)\n\nvs2019åŒæ ·å¯ä»¥æ”¹æˆç™½è‰²èƒŒæ™¯ï¼Œä½†æ·±è‰²å¯¹æ¯”åº¦æ›´é«˜æ¨èæ·±è‰²\n\nåŒæ ·çš„ï¼Œå½“æˆ‘ä»¬è¾“å…¥åº“å‡½æ•°çš„æ—¶å€™ï¼Œvså¯ä»¥å¸®ä½ è¡¥å……å‰©ä¸‹å‡½æ•°\nè€Œdevc++å°±éœ€è¦çœ‹ä½ èƒŒå•è¯çš„åŠŸåŠ›äº†\n\nè€Œä¸”åœ¨é‡åˆ°ä»£ç é”™è¯¯çš„æ—¶å€™ï¼Œvs2019èƒ½æ›´å‡†ç¡®åœ°æŠ¥å‡ºé”™è¯¯çš„åœ°æ–¹ï¼Œ\næœ‰äº›ä¸­è‹±æ–‡åŠè§’é”™è¯¯çš„ç¬¦å·ï¼Œå¦‚åˆ†å·ã€é€—å·ã€‚vs2019éƒ½ä¼šç”¨ä¸€ä¸ªå°æ³¢æµªçº¿æ ‡å‡ºï¼Œè€Œdevc++è«å¾—æç¤º\nï¼ˆè®²é“ç†åˆå­¦çš„æˆ‘æœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯æ‰“é”™ä¸­è‹±æ–‡åŠè§’+æ‰“é”™å‡½æ•°åâ€¦â€¦ï¼‰\n\nå‰é¢æåˆ°å»ºè®®åœ¨ç”µè„‘é‡Œé¢ä¸‹ä¸ªdevc++ï¼Œå› ä¸ºvs2019ä¸èƒ½ç›´æ¥è¿è¡Œ.cæ–‡ä»¶ï¼Œå¿…é¡»è¦æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ªâ€œé¡¹ç›®â€é‡Œé¢æ‰è¡Œ\nå¯¹äºå•ä¸ªæ–‡ä»¶çš„è¿è¡Œæ¥è¯´devc++æ›´æ–¹ä¾¿ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ªç®€æ˜“çš„.cppå’Œ.cçš„è¿è¡Œå™¨\nVS2019å¯ä»¥ç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½ç¤¾åŒºç‰ˆæœ¬ï¼Œè¯·ä¸è¦ä¸‹è½½VS codeï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´å®ƒçš„åˆå§‹åŒ–è®¾ç½®éå¸¸éº»çƒ¦ï¼\nå®˜ç½‘é“¾æ¥&#x3D;&gt;visualstudio.microsoft.com\n(ç”±äºå¾®è½¯çš„åœŸè±†æœåŠ¡å™¨ï¼Œæˆ‘æ‰“ä¸å¼€å®˜ç½‘ï¼Œè‡ªç„¶æˆªä¸åˆ°å›¾â€¦â€¦å¤ªæ£’äº†å¾®è½¯)\n\nåšå®¢å†™åˆ°ä¸€åŠå›å»ç…äº†ä¸€çœ¼ï¼Œç»ˆäºæ‰“å¼€äº†\næˆ‘ä»¬éœ€è¦ä¸‹è½½çš„æ˜¯2019çš„ç¤¾åŒºç‰ˆæœ¬\n\nå…¶æ¬¡æˆ‘ä»¬è¿˜éœ€è¦æ”¶è—å‡ ä¸ªç”¨äºå­¦ä¹ æ—¶æŸ¥æ‰¾èµ„æ–™çš„ç½‘ç«™\nå®ƒä»¬ä¸»è¦æ˜¯ç”¨äºæŸ¥æ‰¾å‡½æ•°å®šä¹‰çš„ï¼Œå…·ä½“æ–¹æ³•æˆ‘åœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²æœ‰è¿‡åˆ†äº« [é“¾æ¥]ç½‘ç«™æ¨èï¼š\ncplusplus.com - The C++ Resources Network \ncppreference.com\nä¸‰ã€å®‰æ’ä¸€ä¸ªç”µå­ç¬”è®°åˆå­¦cè¯­è¨€æ—¶çš„çŸ¥è¯†ç¹å¤šè€Œæ‚ï¼Œä¸è®°ç¬”è®°çš„è¯å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½æ˜¯å·¦è€³è¿›å³è€³å‡ºï¼ˆè‡³å°‘æˆ‘æ˜¯è¿™æ ·ï¼‰\nçº¸è´¨ç¬”è®°æœ¬åœ¨è¿™ç§éœ€è¦å¤§é‡ä»£ç ç»ƒä¹ çš„å­¦ä¹ ä¸­æ•ˆç‡å¤ªä½\nè¿™æ—¶å€™å°±å¾—è¯·å‡ºæˆ‘ä»¬çš„ç”µå­ç¬”è®°æœ¬äº†\nåœ¨è¿™é‡Œç»™å¤§å®¶æ¨èä¸ªäººè®¤ä¸ºæœ€å¥½ç”¨çš„OneNote\n\nå¦‚æœä½ æ˜¯ç¬”è®°æœ¬ç”¨æˆ·ï¼Œæœ‰å‡ºå‚èµ é€çš„OneNote2016\\2019ï¼Œç›´æ¥ç”¨å³å¯\nå°å¼æœºç”¨æˆ·OneNoteå¤šåŠæ˜¯è£…ç³»ç»Ÿå°±è‡ªå¸¦äº†çš„ã€‚æ²¡æœ‰çš„è¯å¯ä»¥å»å¾®è½¯å•†åº—ä¸‹ä¸€ä¸ªOneNote for WIN10ï¼Œæˆ–å¾®è½¯å®˜ç½‘ä¸‹è½½OneNote2019\n\n\nä¼˜ç‚¹ï¼šIOS\\å®‰å“\\WIN\\MACå…¨å¹³å°åŒæ­¥ï¼Œå…è´¹ï¼\nç¼ºç‚¹ï¼šå¾®è½¯åœŸè±†æœåŠ¡å™¨ï¼Œæœ‰æ—¶å€™è·¨å¹³å°åŒæ­¥ææ…¢ã€‚\n\nåŒæ—¶å»ºè®®å¤§å®¶ä¸‹è½½ä¸€ä¸ªsnipasteï¼Œä½œä¸ºæˆªå›¾è½¯ä»¶è¾…åŠ©æˆ‘ä»¬çš„ç”µå­ç¬”è®°\n\nOneNoteè‡ªå¸¦çš„æˆªå›¾ä¼šè‡ªåŠ¨ç»™ä½ æ·»åŠ ä¸€ä¸ªæˆªå›¾æ—¶é—´ï¼Œæœ‰ç‚¹å½±å“ç•Œé¢è§‚æ„Ÿ\n\n\næ–°å»ºä¸€ä¸ªç¬”è®°æœ¬ï¼Œå‘½åä¸ºcè¯­è¨€\n\n\nOneNoteä¸»è¦çš„ç•Œé¢å°±æ˜¯è¿™ç§ä¸‰æ®µå¼çš„ç¬”è®°å¤¹ã€‚å¤§å®¶å¯ä»¥å‚ç…§æˆ‘çš„åˆ†ç±»ï¼ŒæŠŠå¤§ç±»çŸ¥è¯†ç‚¹æ”¾åœ¨ç¬¬ä¸€ä¸ªåˆ†åŒºï¼Œå°ç±»æ”¾åœ¨ç¬¬äºŒä¸ª\nè¿™æ ·æˆ‘ä»¬åæœŸå¤ä¹ orå›çœ‹é—å¿˜çŸ¥è¯†ç‚¹ä¹Ÿä¼šæ›´åŠ æ–¹ä¾¿\nè¿™é‡Œå»ºè®®å¤§å®¶ç»™æ¯ä¸ªå°ç±»çŸ¥è¯†ç‚¹éƒ½åšä¸Šæ•°å­—åºå·ï¼Œä¸”ä¸è¦é‡å¤\nè¿™æ ·å°±å¯ä»¥åœ¨å·²æœ‰çš„ç¬”è®°å†…è¡¨æ˜è¿™ä¸ªçŸ¥è¯†ç‚¹å’Œå¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„è”ç³»\n\nOneNoteçš„æ’å…¥é“¾æ¥åŠŸèƒ½åŒæ ·å¯ä»¥æ’å…¥ç¬”è®°æœ¬å†…é¡µçš„è¿æ¥\nå¦‚å›¾ï¼Œæˆ‘ä»¬å³å‡»16EOFï¼Œç‚¹å‡»â€å¤åˆ¶æŒ‡å‘é¡µé¢çš„é“¾æ¥â€œ\n\nç„¶ååœ¨æˆ‘ä»¬æƒ³æ’å…¥è¿™ä¸ªé“¾æ¥çš„ä½ç½®æ’å…¥\n\n\néšåç‚¹å‡»å®ƒï¼Œå°±èƒ½ç›´æ¥è·³è½¬åˆ°æŒ‡å®šçš„ç¬”è®°æœ¬é¡µé¢\nåœ¨å¤ä¹ å’ŒçŸ¥è¯†ç‚¹è”åŠ¨çš„æ—¶å€™éå¸¸æ–¹ä¾¿å®ç”¨\nOneNoteè¿˜æœ‰å…¶ä»–éå¸¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œæ¨èå¤§å®¶çœ‹è¿™ä¸ªè§†é¢‘å­¦ä¹ OneNoteçš„ç”¨æ³•ï¼Œåšå®¢é‡Œå°±ä¸å†å±•å¼€äº†\nå²·|ä½ ä¸å¾—ä¸çŸ¥é“çš„OneNoteåŠŸèƒ½|ç”µå­ç¬”è®°èƒ½æœ‰å¤šå¼ºï¼bilibili\néœ€ä¸éœ€è¦ä¸€ä¸ªipadæ¥è¾…åŠ©å­¦ä¹ ï¼Ÿæåˆ°ç”µå­ç¬”è®°ï¼Œå¾ˆå¤šäººéƒ½ä¼šæƒ³åˆ°ç”¨å¹³æ¿æ¥åšç¬”è®°\nè¿™é‡Œæˆ‘çš„å»ºè®®æ˜¯\n-æœ‰ipadæˆ–å…¶ä»–å¹³æ¿çš„ç”¨æˆ·å¯ä»¥è´­å…¥å¹³æ›¿ç¬”å°è¯•\n\nä¸è¦ç›´æ¥ä¹°é«˜è´µçš„åŸè£…ç¬”ï¼Œå¯¹äºåšç¬”è®°æ¥è¯´æ— æµäºäº‹ï¼Œç‰¹åˆ«æ˜¯ipad\nå‘ç°ä¸åˆé€‚çš„æ—¶å€™ä½ æƒ³äºŒæ‰‹å‡ºoråƒç°å°±æ˜¯æµªè´¹é’±äº†ï¼Œå¹³æ›¿ç¬”90ä¸€æ”¯ä¸æƒ³ç”¨äº†ä¹Ÿå¯ä»¥ç•™ç€\næœ€å¥½åœ¨è´­å…¥ä¸ƒå¤©å†…ä½¿ç”¨å¹¶åˆ¤æ–­è¿™ç§æ–¹å¼é€‚ä¸é€‚åˆä½ ï¼Œè¿™æ ·ä¸é€‚åˆè¿˜èƒ½æ— ç†ç”±é€€äº†\n\n\nipadç”¨æˆ·æ¨èç›Šbæ€çš„5ä»£é’æ˜¥ç‰ˆå¹³æ›¿ç¬”ï¼Œ98ä¸€æ”¯ï¼ŒçœŸçš„ä¸æ˜¯å¹¿å‘Šï¼Œæˆ‘ä¸ªäººè§‰å¾—è¿˜è¡Œé¡ºä¾¿æä¸€å¥è€Œå·²ï¼\n\n-å¦‚æœä½ æ²¡æœ‰å¹³æ¿ï¼Œè¯·ä¸è¦ç»™è‡ªå·±åˆ›é€ éœ€æ±‚ç„¶åå–œåŠ ä¸€ï¼Œå› ä¸ºå¹³æ¿è”ç½‘æ¿€æ´»åå°±ä¸ç»™é€€è´§çš„ï¼\nåœ¨æˆ‘ä¸¤å‘¨çš„winç”µè„‘+å¹³æ¿åšç¬”è®°çš„å­¦ä¹ ä¸­ï¼Œæœ‰å¦‚ä¸‹é—®é¢˜éœ€è¦æ³¨æ„\n\nOneNoteåŒæ­¥éœ€è¦ä¸€å®šæ—¶é—´ï¼Œåœ¨ç”µè„‘æˆªå›¾åipadç«¯OneNoteåŒæ­¥è‡³å°‘20ç§’ã€‚æœåŠ¡å™¨æŠ½é£çš„è¯å°±ç¥è‡ªå·±å¥½è¿äº†\nåœ¨ipadåšç¬”è®°å¯èƒ½ä¼šè®©ä½ æ¼æ‰è€å¸ˆæ‰€è®²çŸ¥è¯†ç‚¹ï¼Œå› ä¸ºæ³¨æ„åŠ›ä¸åœ¨ç”µè„‘å±å¹•ä¸Šï¼Œå¯¼è‡´å›é€€è§†é¢‘\nè¯·ä¸è¦åœ¨ipadæ‰“å¼€ä½ çš„qqï¼Œä¸ç„¶å¯èƒ½åšç€åšç€å°±å»èŠå¤©äº†â€¦â€¦\n\nå½“æˆ‘å°è¯•ä¸¢æ‰å¹³æ¿ç›´æ¥ç”¨ç”µè„‘åšç¬”è®°çš„æ—¶å€™ï¼Œå‘ç°æ•ˆç‡ç›´çº¿ä¸Šå‡ï¼\næ‰€ä»¥è¯´ç”¨å¹³æ¿åšç¬”è®°ä¹Ÿæ˜¯æˆ‘è‡ªå·±ç»™è‡ªå·±åˆ›é€ çš„éœ€æ±‚ï¼ˆç¬‘å“­.jpgï¼‰\nå››ã€é™¤å·¥å…·ä»¥å¤–çš„å­¦ä¹ æ–¹æ³•ä¸Šè¿°ä¸‰ç‚¹éƒ½æ˜¯å›´ç»•å­¦ä¹ å·¥å…·æ¥å±•å¼€çš„ï¼Œç°åœ¨è¯´è¯´å…¶ä»–çš„ä¸€äº›ä¸ªäººç»éªŒ\n1.ä¸“å¿ƒè‡´å¿—ï¼Œä¸è¦è®©å…¶ä»–ä¸œè¥¿åˆ†å¿ƒç°åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬çš„èº«å¿ƒæ˜¯å¾ˆæ”¾æ¾çš„ï¼Œè‡ªå­¦cè¯­è¨€å…¶å®æ˜¯åœ¨ç»™æš‘å‡ç”Ÿæ´»çš„æœ«å°¾åŠ æ–™\nè¿™ç§æ”¾æ¾ä¼šè®©ä½ æˆ‘è§‰å¾—Cè¯­è¨€çš„å­¦ä¹ å¹¶ä¸æ˜¯ä»€ä¹ˆå¿…é¡»è¦åšçš„ã€éåšä¸å¯çš„äº‹æƒ…\næ‰€ä»¥æ‰‹æœºå°±ä¼šæˆä¸ºä½ å­¦ä¹ è·¯ä¸Šæœ€å¤§çš„é˜»ç¢â€¦â€¦ï¼ˆä»¥ä¸‹å‡ä¸ºæœ¬äººæƒ…å†µï¼Œè¯·å‹¿å¯¹å·å…¥åº§ï¼‰\n\næ¶ˆæ¯æ¥äº†çœ‹ä¸€çœ¼\n\nè¿™éƒ¨åˆ†å¥½åƒæˆ‘ä¼šï¼Œåˆ·ä¼šæ‰‹æœº\n\n\nè™½ç„¶æˆ‘çŸ¥é“è¿™ä¸‡ä¸‡ä¸å¯ï¼Œå¯å°±æ˜¯æ§åˆ¶ä¸ä½è‡ªå·±è¿™åŒæ‰‹\n\nå¥½å§ï¼Œæ—¢ç„¶æ‰“ä¸è¿‡ï¼Œé‚£æˆ‘ä»¬å°±è·‘å•Šï¼\næ‰‹æœºå…³é—­WiFiï¼Œæ”¾åœ¨ä½ ä¸èƒ½ç›´æ¥å¤Ÿåˆ°çš„åœ°æ–¹\nåŒæ ·çš„ï¼Œç”µè„‘ä¹Ÿä¸è¦ç™»å½•qqï¼Œwxï¼Œä¿æŒæ— çº¿ç”µé™é»˜ï¼Œä¸“å¿ƒçœ‹è§†é¢‘å­¦ä¹ \n\næˆ‘è§‰å¾—å’±ä»¬è¿™ä¸ªå¹´çºªåº”è¯¥æ²¡æœ‰éå›ä¸å¯çš„æ¶ˆæ¯ï¼Œçˆ¶æ¯æ‰¾è‡ªå·±å¤šåŠç›´æ¥æ‰“ç”µè¯\n\n2.å¤šç»ƒä¹ ï¼Œå¤šç»ƒä¹ ï¼Œå¤šç»ƒä¹ å­¦Cè¯­è¨€å’Œå­¦æ•°å­¦ä¸€æ ·ï¼Œä¸€å®šè¦å¤šåˆ·é¢˜ï¼ˆå†™ä»£ç ï¼‰\nåœ¨çœ‹è§†é¢‘çš„åŒæ—¶ï¼Œè·Ÿç€æ•™å­¦å†…å®¹è‡ªå·±å°è¯•ç€å†™å†™é‚£äº›ä»£ç \nåˆ«è§‰å¾—è§†é¢‘é‡Œéƒ½æ‰“äº†æ²¡å¿…è¦è‡ªå·±å†æ‰“ä¸€é\nå®é™…ä¸Šç…§ç€æ‰“éƒ½ä¼šæœ‰ä¸€å †é”™è¯¯â€¦â€¦\nä¹°äº†ä¹¦æœ¬çš„å°ä¼™ä¼´å¯ä»¥ç…§ç€ä¹¦æœ¬ä¸Šçš„ç¤ºä¾‹ä»£ç ç»ƒä¹ \nåœ¨ç»ƒä¹ çš„é€”ä¸­æ›´å®¹æ˜“å‘ç°è‡ªå·±çš„é—®é¢˜ï¼Œä»è€Œè·å–æ›´å¤šçŸ¥è¯†\n3.å¤ä¹ ï¼å‰é¢æåˆ°äº†åšç¬”è®°ä¹‹äº‹ï¼Œç¬”è®°æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ—¥åçš„å¤ä¹ ã€‚\nè¿™é‡Œå»ºè®®å¹³æ—¶å¤šå»çœ‹çœ‹è®°å½•ä¸‹æ¥çš„æ“ä½œç¬¦ã€å­—ç¬¦ç±»å‹ã€è½¬ä¹‰å­—ç¬¦ç­‰ç­‰æå…¶å®¹æ˜“é—å¿˜åˆç»å¸¸ç”¨çš„ä¸Šçš„çŸ¥è¯†ç‚¹\nä¸ç„¶æœ‰æ—¶å€™å°±çœŸçš„åªèƒ½çœ‹ç€ä»£ç è’™è”½\né‡åˆ°æ–°çš„å°çŸ¥è¯†ç‚¹çš„æ—¶å€™ä¹Ÿè¦åŠæ—¶å¯¹ç¬”è®°è¿›è¡Œè¡¥å……\n\nç»“è¯­ä»¥ä¸Šå°±æ˜¯æœ¬cè¯­è¨€åˆå­¦è€…+å‡†å¤§ä¸€åŒå¤§å®¶çš„å­¦ä¹ æ–¹æ³•çš„åˆ†äº«\nè¿™æ–¹æ³•å¯èƒ½ä¸é€‚åˆä½ ï¼Œæœ‰äº›æœ‹å‹å¯èƒ½æ›´åçˆ±çº¸ç¬”ç¬”è®°ï¼Œè¿™éƒ½æ˜¯OKçš„\nå­¦ä¹ æ–¹æ³•å„æœ‰å¼‚åŒï¼Œä½†æˆ‘ä»¬éƒ½æœ‰ä¸€ä¸ªä¸ºé€šå‘æœªæ¥å¤§é“è€ŒåŠªåŠ›çš„å¿ƒ\nè¿™å°±å¤Ÿäº†~\næ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œï¼Œç‚¹èµ+å…³æ³¨å†èµ°å‘—ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€æ•™ç¨‹ã€‘hexoæ­å»ºåšå®¢+keepä¸»é¢˜ç¾åŒ–","url":"/posts/138502038/","content":"æ„Ÿè°¢ä½ æ¥åˆ°æœ¬å°ç«™ï¼Œå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®ºğŸ˜˜ï¼\n\n\næŠ˜è…¾äº†ä¸€æ•´å¤©ï¼Œç®—æ˜¯æŠŠåŸºæœ¬çš„åšå®¢ç¯å¢ƒç»™æ­å»ºå¥½äº†ï¼Œé¡µé¢æ•ˆæœè¿˜æ˜¯æŒºä¸é”™çš„ï¼åç»­å¯¹å¯’èˆæœ‰ä»€ä¹ˆæ–°æ“ä½œä¼šå¯¹æœ¬æ–‡è¿›è¡Œæ›´æ–°ï¼Œå¯ä»¥å¤šå¤šå…³æ³¨ä¸€ä¸‹å“¦\n\n\næœ¬åšå®¢ä¿®æ”¹è¿‡çš„ keep ä¸»é¢˜æ–‡ä»¶å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ğŸ‘‰ musnows&#x2F;hexo-theme-keep\næœ¬åšå®¢ä¿®æ”¹åçš„ keep ä¸»é¢˜é¢„è§ˆç«™ç‚¹ä¸º keep-hexo.musnow.top\n\n1.åŸºæœ¬é…ç½®æˆ‘æœ€å¼€å§‹ä½¿ç”¨çš„å¹³å°æ˜¯HEXO+Giteeï¼Œå‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰åŸºäºGitee+Hexoæ­å»ºä¸ªäººåšå®¢\nç°åœ¨æˆ‘ä¸å»ºè®®ä½ ä½¿ç”¨ gitee pagesï¼Œå…·ä½“è¯·çœ‹æœ¬æ–‡ 4.1ï¼›\nå¯ä»¥æ ¹æ®æœ¬æ–‡å‘å¯¼é…ç½® github pagesï¼Œæœ‰é—®é¢˜å¯ä»¥è¯„è®ºæå‡ºå“¦â•°(*Â°â–½Â°*)â•¯\næ“ä½œä¹‹å‰ï¼Œéœ€è¦ä¸‹è½½ä¸¤ä¸ªè½¯ä»¶ï¼›å…ˆä¸‹è½½å®‰è£…å¥½node.jsåå†è¿›è¡Œgitæ“ä½œ\nnode.jså®˜ç½‘ https://nodejs.org/zh-cn/gitå®˜ç½‘     https://git-scm.com/\n\n1.1 å®‰è£…hexo\nå¦‚æœæ˜¯Centosäº‘æœåŠ¡å™¨ï¼Œå®‰è£…hexoå¯ä»¥å‚è€ƒhttps://www.myfreax.com/how-to-install-node-js-on-centos-8/\n\nå®‰è£…å¥½è¿™ä¸¤ä¸ªå·¥å…·åï¼Œæˆ‘ä»¬å…ˆæ‰“å¼€git bashï¼ˆä¸€èˆ¬å³é”®èœå•é‡Œé¢å°±ä¼šæœ‰ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¯¥è½¯ä»¶è¯·å…¨å±€æœç´¢ï¼‰å¦‚æœä½ å®‰è£…çš„æ—¶å€™æœ‰é€‰æ‹©æ·»åŠ åˆ°å‘½ä»¤è¡Œ ADD TO PATHï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥ç›´æ¥ç”¨windowsçš„cmdæ¥æ“ä½œgitçš„ã€‚è¿™é‡Œé¿å…ä½ å®‰è£…çš„æ—¶å€™æ²¡æœ‰é€‰æ‹©æ­¤é¡¹ï¼Œå‡ç”¨git bashæ¥æ¼”ç¤º\n\nã€Gitã€‘åœ¨Windows CMDä¸­å’ŒVScodeä¸­é…ç½®å·²ç»å®‰è£…å¥½çš„git\n\næ‰“å¼€ä¹‹åçš„ç•Œé¢åº”è¯¥æ˜¯è¿™æ ·çš„\n\næˆ‘ä»¬cdè¿›å…¥ä½ æƒ³è¦åˆ›å»ºhexoæœ¬åœ°æ–‡ä»¶çš„è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘æƒ³åœ¨Dç›˜é‡Œé¢åˆ›å»ºæˆ‘çš„hexoåšå®¢ï¼Œé‚£ä¹ˆå°±cdè¿›å…¥ä½ æƒ³è¦çš„è·¯å¾„ï¼›å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•å¡«å†™è·¯å¾„ï¼Œå¯ä»¥å³é”®é¡¶æ å°†è·¯å¾„å¤åˆ¶ä¸ºæ–‡æœ¬\n\nç„¶ååœ¨git bashä¸­ï¼Œä½¿ç”¨ shift+insert(ins) è¿›è¡Œç²˜è´´\ncd D:\\example\n\nè¿™æ ·æˆ‘ä»¬å°±æˆåŠŸè¿›å…¥æˆ‘ä»¬æƒ³è¦çš„æ–‡ä»¶å¤¹äº†\n\nè¾“å…¥ node -v å‘½ä»¤ï¼Œæµ‹è¯• node.js æ˜¯å¦å®‰è£…æˆåŠŸä¸”å¯ç”¨ï¼›å¦‚æœå‡ºç°ç‰ˆæœ¬å·ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼ˆè¯·ç¡®è®¤node.jsçš„ç‰ˆæœ¬å¤§äºv16ï¼‰\n$ node -vv16.13.1\n\néšååœ¨è¿™é‡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\nnpm -g install npm #å®‰è£…npmåŒ…ç®¡ç†å™¨# å¦‚æœå®‰è£…npmå¤±è´¥ï¼Œåˆ™ä½¿ç”¨é•œåƒæºå®‰è£…æ·˜å®çš„cnpmnpm -g install cnpm --registry=https://registry.npm.taobao.org# å¦‚æœå®‰è£…äº†cnpmï¼Œæ³¨æ„åç»­æ‰€æœ‰npmå‘½ä»¤è¦ç”¨cnpmä»£æ›¿\n\nå®‰è£…æˆåŠŸåï¼Œå®‰è£…hexo\nnpm install -g hexo-cli\n\næµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…\nmoth@LAPTOP-R9S2524B MINGW32 /d/example$ hexo versionhexo-cli: 4.3.0os: win32 10.0.22000node: 16.13.1v8: 9.4.146.24-node.14uv: 1.42.0zlib: 1.2.11brotli: 1.0.9ares: 1.18.1modules: 93nghttp2: 1.45.1napi: 8llhttp: 6.0.4openssl: 1.1.1l+quiccldr: 39.0icu: 69.1tz: 2021aunicode: 13.0ngtcp2: 0.1.0-DEVnghttp3: 0.1.0-DEV\n\nå‡ºç°ä¸Šé¢çš„å­—æ ·ï¼Œå°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼›å› ä¸ºæˆ‘æ˜¯2022å¹´4æœˆæ“ä½œçš„ï¼Œè¿™é‡Œå®‰è£…çš„ç‰ˆæœ¬æœ‰ç‚¹è€ï¼Œä¸è¿‡ä¸å½±å“ä½¿ç”¨ï¼Œé‚£å°±ä¸å‡çº§äº†ğŸ˜¶â€ğŸŒ«ï¸\n\næ¸©é¦¨æç¤ºï¼šè¿™äº›éƒ½æ˜¯ä¾èµ–é¡¹ï¼Œå¦‚æœä¸å½±å“ä½ çš„ä½¿ç”¨ï¼Œé‚£å°±ä¸è¦å‡çº§ï¼\nä¸è¦å‡çº§ï¼ä¸è¦å‡çº§ï¼ï¼ä¸è¦å‡çº§ï¼ï¼ï¼\n\n1.1.1 æŠ¥é”™æœ¬ç³»ç»Ÿä¸æ”¯æŒè¿è¡Œè„šæœ¬åœ¨å¦å¤–ä¸€å°ç”µè„‘ä¸Šéƒ¨ç½²hexoçš„æ—¶å€™ï¼Œå®‰è£…å®Œæ¯•hexoï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™\nhexo : æ— æ³•åŠ è½½æ–‡ä»¶ C:\\Users\\moth\\AppData\\Roaming\\npm\\hexo.ps1ï¼Œå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šç¦æ­¢è¿è¡Œè„šæœ¬ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… https:/go.microsoft.com/fwlink/?LinkID=135170 ä¸­çš„ about_Execution_Policiesã€‚\n\n\nè§£å†³åŠæ³•ï¼Œæ˜¯è¿›å…¥windows11çš„è®¾ç½®é¡µé¢ï¼Œåœ¨éšç§-å¼€å‘è€…è®¾ç½®-ç»ˆç«¯ä¸­ï¼Œå…è®¸æœ¬åœ°powershellè„šæœ¬åœ¨æœªç­¾åçš„æƒ…å†µä¸‹è¿è¡Œ\n\nå‹¾ä¸Šé€‰é¡¹åï¼Œç‚¹å‡»åº”ç”¨ã€‚ä¹‹åè¿è¡Œhexoå°±æ²¡æœ‰æŠ¥é”™äº†\n\n1.1.2 åˆå§‹åŒ–åšå®¢æ–‡ä»¶å¤¹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šåœ¨å½“å‰æ–‡ä»¶å¤¹åˆ›å»ºä¸€ä¸ªblogæ–‡ä»¶å¤¹ï¼Œhexoä¼šåœ¨é‡Œé¢å…‹éš†åŸºç¡€hexoéœ€è¦ç”¨çš„æ–‡ä»¶\n$ hexo init blogINFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.gitfatal: unable to access &#x27;https://github.com/hexojs/hexo-starter.git/&#x27;: OpenSSL SSL_read: Connection was reset, errno 10054WARN  git clone failed. Copying data insteadINFO  Install dependenciesINFO  Start blogging with Hexo!\n\nä½¿ç”¨cdå‘½ä»¤è¿›å…¥blogæ–‡ä»¶å¤¹\ncd blog\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…ä¸€ä¸‹ä¾èµ–é¡¹\nnpm install\n\n\néšåè¾“å…¥ä¸‹é¢ä¸‰ä¸ªå‘½ä»¤\nhexo cl #hexo cleançš„ç¼©å†™hexo g #ç”Ÿæˆæ–‡ä»¶hexo s #å¼€å¯æœ¬åœ°é¢„è§ˆ\n\nè¾“å‡ºçš„ç»“æœå¦‚ä¸‹\nmoth@LAPTOP MINGW32 /d/example/blog$ hexo clINFO  Validating configmoth@LAPTOP MINGW32 /d/example/blog$ hexo gINFO  Validating configINFO  Start processingINFO  Files loaded in 94 msINFO  Generated: archives/index.htmlINFO  Generated: archives/2023/index.htmlINFO  Generated: archives/2023/01/index.htmlINFO  Generated: index.htmlINFO  Generated: fancybox/blank.gifINFO  Generated: fancybox/helpers/fancybox_buttons.pngINFO  Generated: fancybox/fancybox_loading@2x.gifINFO  Generated: css/fonts/fontawesome-webfont.ttfINFO  Generated: fancybox/fancybox_loading.gifINFO  Generated: js/script.jsINFO  Generated: fancybox/fancybox_overlay.pngINFO  Generated: fancybox/fancybox_sprite@2x.pngINFO  Generated: fancybox/fancybox_sprite.pngINFO  Generated: css/fonts/FontAwesome.otfINFO  Generated: fancybox/jquery.fancybox.cssINFO  Generated: fancybox/helpers/jquery.fancybox-buttons.cssINFO  Generated: css/images/banner.jpgINFO  Generated: css/style.cssINFO  Generated: fancybox/helpers/jquery.fancybox-buttons.jsINFO  Generated: fancybox/jquery.fancybox.jsINFO  Generated: fancybox/helpers/jquery.fancybox-media.jsINFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.cssINFO  Generated: fancybox/jquery.fancybox.pack.jsINFO  Generated: fancybox/helpers/jquery.fancybox-thumbs.jsINFO  Generated: 2023/01/10/hello-world/index.htmlINFO  Generated: css/fonts/fontawesome-webfont.svgINFO  Generated: css/fonts/fontawesome-webfont.woffINFO  Generated: css/fonts/fontawesome-webfont.eotINFO  28 files generated in 232 msmoth@LAPTOP MINGW32 /d/example/blog$ hexo sINFO  Validating configINFO  Start processingINFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.\n\næµè§ˆå™¨æ‰“å¼€ http://localhost:4000ï¼Œçœ‹åˆ°ä¸‹é¢çš„é¢„è§ˆï¼Œé‚£å°±OKäº†ï¼\n\n1.2 éƒ¨ç½²åˆ°github pagesåœ¨Githubåˆ›å»ºä¸€ä¸ªæ–°ä»“åº“ï¼Œåå­—ä¸º ç”¨æˆ·å.github.io\næ‰¾åˆ°blogç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ª_config.yml æ–‡ä»¶ï¼Œè¿™æ˜¯hexoçš„é…ç½®æ–‡ä»¶ã€‚åœ¨é‡Œé¢æ‰¾åˆ°ä¸‹é¢çš„å­—æ®µï¼Œå¡«å…¥ä½ çš„githubä»“åº“åœ°å€\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: https://github.com/musnows/musnows.github.io.git  branch: master\n\nå¦‚æœä½ æƒ³åŒæ—¶éƒ¨ç½²åˆ° gitee&#x2F;githubï¼Œå¯ä»¥è¿™æ ·å†™\ndeploy:  type: git  repo:\t  github: https://github.com/musnows/musnows.github.io.git\t  gitee: git@gitee.com:musnow/musnow.git  branch: master\n\néšåï¼Œæˆ‘ä»¬æ‰§è¡Œhexo d éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“\nhexo d #éƒ¨ç½²hexo g --d #ç”Ÿæˆæ–‡ä»¶çš„åŒæ—¶éƒ¨ç½²ï¼Œæ¨èä½¿ç”¨è¿™ä¸ª\n\nå¦‚æœå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼Œé‚£æ˜¯å¾ˆæ­£å¸¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®‰è£…éƒ¨ç½²çš„ä¾èµ–é¡¹\nERROR Deployer not found: git\n\nå®‰è£… hexo-deployer-git\nnpm install hexo-deployer-git --save\n\nå†æ¬¡æ‰§è¡Œhexo g --dï¼Œè¾“å…¥ä½ çš„githubè´¦æˆ·ï¼ˆé‚®ç®±ï¼‰å’Œå¯†ç ï¼Œè¿›è¡Œéƒ¨ç½²ã€‚\nå¯ä»¥çœ‹åˆ°githubä»“åº“å¤šäº†ä¸€ä¸ªmasteråˆ†æ”¯ï¼Œå…¶å†…éƒ¨å°±æ˜¯æˆ‘ä»¬çš„è¿œç«¯æ–‡ä»¶ã€‚\nè¿›å…¥ä»“åº“çš„è®¾ç½®ï¼Œæ‰¾åˆ°github pagesçš„è®¾ç½®ï¼Œé€‰æ‹©masteråˆ†æ”¯éƒ¨ç½²ï¼ŒæŒ‰ä¸‹å›¾é…ç½®\n\nç­‰å¾…éƒ¨ç½²æˆåŠŸåï¼Œå°±å¯ä»¥æ‰“å¼€ https://ä½ çš„åå­—.github.io å°±å¯ä»¥è®¿é—®äº†ï¼\nåšå®Œä¸Šé¢çš„æ­¥éª¤ï¼Œæ­¤æ—¶å°±å¯ä»¥æ¥å®‰è£…ä¸€ä¸ªä¸»é¢˜äº†ã€‚æ¯•ç«Ÿé»˜è®¤çš„landscapeä¸»é¢˜è¿˜æ˜¯ä¸å¤Ÿå¥½ç”¨çš„ğŸ˜˜\n\nsshå…å¯†éƒ¨ç½²æ“ä½œï¼Œå‚è€ƒç¬¬4ç‚¹\n\n1.2 keepä¸»é¢˜Hexoä¸‹keepä¸»é¢˜åˆå§‹åŒ–æ“ä½œæ˜¯æ ¹æ®å¼€å‘è€…å¤§å“¥çš„å¸®åŠ©æ–‡æ¡£è¿›è¡Œçš„\næœ¬æ–‡æ˜¯å¯¹ç›¸å…³è¸©å‘æ“ä½œçš„ä¸€ç‚¹è¯´æ˜ï¼Œå»ºè®®ä½ å…ˆç²—ç•¥æµè§ˆå®Œæœ¬æ–‡ï¼Œçœ‹çœ‹æœ‰å•¥å‘ğŸ•³ï¼ˆæŒºå¤šçš„ï¼‰å†è¿›è¡Œkeepä¸»é¢˜çš„é…ç½®\n\nKeepå¿«é€Ÿå¼€å§‹\n\nå¦‚æœä½ æƒ³ä½¿ç”¨å…¶ä»–hexoä¸»é¢˜ï¼Œå»ºè®®é€‰æ‹©æœ‰ä¸­æ–‡å¸®åŠ©æ–‡æ¡£çš„HEXOä¸»é¢˜ï¼Œä¸ç„¶å°±å¾—å•ƒè‹±è¯­äº†ã€‚\nåé¢æœ¬ç«™æ ·å¼å¯èƒ½ä¼šåšå…¶ä»–çš„æ›´æ”¹ï¼Œå¾…æˆ‘ææ¸…æ¥šè¿›é˜¶æ“ä½œå†è¯´ã€‚æ¯•ç«Ÿå’±å¯¹CSSå’ŒHTMLä»£ç æ˜¯å®Œå…¨ä¸æ‡‚ï¼ˆè¿™æ˜¯å‰ç«¯çš„å†…å®¹ï¼Œç›®å‰æ²¡æœ‰è‡ªå­¦è®¡åˆ’ï¼‰\n\nå‰äººæ ½æ ‘åäººä¹˜å‡‰ï¼Œåœ¨keepå¼€å‘è€…åšå®¢çš„å‹é“¾ä¸­æ‰¾åˆ°äº†é­”æ”¹äº†ä¸»é¢˜çš„è€å“¥ï¼Œç›´æ¥å­¦ä¹ èµ·æ¥ğŸ˜ï¼hexoä¸»é¢˜é­”æ”¹æ±‡æ€»å’Œæ€»ç»“\næ›´å¤šé­”æ”¹keepä¸»é¢˜çš„å†…å®¹è¯¦è§æœ¬æ–‡ ç¬¬8ç‚¹\n\nå½“å‰ä½ çœ‹åˆ°çš„ä¸»é¡µå·²ç»æ˜¯ä¿®æ”¹keepä¸»é¢˜è¿‡åçš„å•¦ï¼æ„Ÿè§‰å¦‚ä½•ï¼Ÿkeepä¸»é¢˜é­”æ”¹åçš„é¢„è§ˆç«™ç‚¹\n1.3 keepä¸»é¢˜å®‰è£…ç›®å½•åœ¨å“ªï¼Ÿå¦‚æœä½ æ ¹æ®keepçš„å®˜æ–¹æ–‡æ¡£ç”¨npmå®‰è£…ï¼Œä½ å¯èƒ½å‘ç°åœ¨themesé‡Œé¢æ²¡æœ‰keepä¸»é¢˜çš„æ–‡ä»¶å¤¹ï¼Œé‚£å®ƒåˆ°å“ªå„¿å»äº†å‘¢ï¼Ÿ\n\næ‰¾ä¸€æ‰¾å°±èƒ½å‘ç°ï¼Œå…¶å®åœ¨è¿™é‡Œ blog\\node_modules\\hexo-theme-keepã€‚è¿™æ˜¯å› ä¸ºæˆ‘çš„ä¸»é¢˜æ˜¯ç”¨npmå®‰è£…çš„ï¼Œnode_modulesæ˜¯åœ¨å½“å‰ç›®å½•å®‰è£…çš„åŒ…çš„ä½ç½®ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™ç§æƒ…å†µ\n\néœ€è¦æ³¨æ„ï¼Œåç»­ä¿®æ”¹_config.ymlçš„æ—¶å€™ï¼Œæœ‰çš„æ—¶å€™éœ€è¦ä¿®æ”¹çš„æ˜¯ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ï¼Œæœ‰äº›æ˜¯HEXOå®˜æ–¹çš„é…ç½®æ–‡ä»¶ï¼Œä¸è¦æŠŠäºŒè€…å¼„æ··äº†ï¼\nå»ºè®®åœ¨hexoæ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª_config.keep.ymlï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶åªéœ€è¦ä¿®æ”¹è¿™é‡Œçš„_config.keep.ymlå³å¯ï¼Œæ–¹ä¾¿ä»¥åè¿›è¡Œå¹³æ»‘å‡çº§;\né‡ç‚¹ï¼šå¦‚æœä½ æƒ³é­”æ”¹ä¸»é¢˜ï¼Œè¯·ä¸è¦ç”¨npmæ–¹å¼å®‰è£…ä¸»é¢˜ï¼Œå¦åˆ™ä¿®æ”¹åçš„å†…å®¹åœ¨npmæ“ä½œçš„æ—¶å€™ä¼šè¢«ç›´æ¥è¦†ç›–ï¼åº”è¯¥é‡‡ç”¨gitæ–¹å¼å®‰è£…ä¸»é¢˜ï¼Œå°†ä¸»é¢˜æ–‡ä»¶å¤¹æ”¾å…¥hexoç›®å½•çš„themesæ–‡ä»¶å¤¹ä¸‹ã€‚\n1.4 ä¸»é¢˜é¡µé¢è®¾ç½®æˆä¸­æ–‡keepä¸»é¢˜é»˜è®¤çš„é¡µé¢æ˜¯è‹±æ–‡çš„æŒ‰é’®ï¼Œéœ€è¦åœ¨HEXOé…ç½®æ–‡ä»¶_config.ymlä¸­ä¿®æ”¹è¯­è¨€ä¸ºzh-CNç„¶åé¡µé¢å°±å˜æˆä¸­æ–‡å•¦ï¼\n\n2.å¦‚ä½•æ·»åŠ åšå®¢æ–‡ç« HEXOé‡‡ç”¨çš„æ˜¯markdownè¯­æ³•ï¼Œåªéœ€è¦åœ¨æœ¬åœ°çš„source/_postsæ–‡ä»¶å¤¹æ·»åŠ mdæºæ–‡ä»¶ï¼Œå°±èƒ½åœ¨ä¸ªäººåšå®¢ä¸­æ˜¾ç¤º\nä»¥keepæ¨¡æ¿ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨mdæºæ–‡ä»¶çš„æ­£æ–‡ä¹‹å‰æ·»åŠ å¦‚ä¸‹è¯­å¥ï¼Œæ¥è®¾ç½®åšå®¢çš„æ ‡é¢˜ã€ä¸Šä¼ æ—¶é—´ã€tagã€åˆ†ç±»ï¼Œä»¥åŠæ˜¯å¦ç½®é¡¶\n\nå¦‚æœè¦è®¾ç½®å¤šä¸ªtagï¼Œæ ·å¼ä¸º[Hexo,typora,åšå®¢]\nå¤šä¸ªåˆ†ç±»categoriesåŒç†\næ›´æ¨èç”¨åˆ—è¡¨æ–¹å¼æ¥æ·»åŠ å¤šä¸ªtagæˆ–è€…åˆ†ç±»ï¼Œé¿å…å’Œå­åˆ†ç±»æ··æ·†\n\n---title: ä½¿ç”¨hexo+giteeæ­å»ºä¸ªäººåšå®¢date: 2022-04-23 13:30:14tags:     - Hexocategories:     - å·®ç”Ÿæ–‡å…·å¤š    - [ä¸»åˆ†ç±»,å­åˆ†ç±»,å­å­åˆ†ç±»] # éƒ¨åˆ†ä¸»é¢˜æ”¯æŒåµŒå¥—åˆ†ç±»sticky: 999---\n\nä¸åŒhexoä¸»é¢˜çš„front-matterå¯èƒ½ä¸åŒï¼Œè¯·æ ¹æ®ä¸»é¢˜æ–‡æ¡£æ¥è¿›è¡Œé…ç½®ã€‚\n2.1 é¦–é¡µç½®é¡¶ä¸¾ä¸ªä¾‹å­ï¼Œæœ¬æ–‡çš„stickyæˆ‘è®¾ç½®æˆäº†999ï¼Œä½ çœ‹åˆ°çš„å°±æ˜¯æœ¬æ–‡åœ¨æˆ‘çš„é¦–é¡µç½®é¡¶äº†ã€‚å¦‚æœä¸è®¾ç½®stickyï¼Œé¦–é¡µé»˜è®¤æ˜¯ä»¥æ—¶é—´é™åºæ’åˆ—æ–‡ç« ï¼ˆåå‘å¸ƒçš„åœ¨å‰å¤´ï¼‰\n\n\n2.2 æ­å»ºå›¾åºŠï¼ˆå¿…åšï¼‰æœ¬æ“ä½œå¿…åšï¼ä¸ºäº†ä¿è¯ä½ ä¸Šä¼ çš„mdæ–‡ä»¶ä¸­çš„å›¾ç‰‡èƒ½åœ¨ä¸ªäººåšå®¢ä¸Šæ­£å¸¸æ˜¾ç¤ºï¼Œè¯·å…ˆé…ç½®ä½ çš„ä¸ªäººå›¾åºŠğŸ‘‰å›¾åºŠæ­å»ºæ•™ç¨‹\nå¦‚æœä½ å¼€å¯äº†é˜¿é‡Œäº‘OSSçš„bucketé˜²ç›—é“¾ï¼Œè¿˜éœ€è¦å°†ä½ çš„ç«™ç‚¹åŠ å…¥ç™½åå•ï¼\n2.3 å¦‚ä½•å¯¼å‡ºCSDNçš„åšå®¢å¦‚æœä½ ä¹‹å‰çš„åšå®¢æ˜¯åœ¨CSDNä¸Šå†™çš„ï¼Œå¯ä»¥åœ¨markdownç¼–è¾‘å™¨çš„æ–‡ç« ç®¡ç†é¢æ¿ä¸­å¯¼å‡ºä¸ºmdæ–‡ä»¶\n\nä¸ºäº†é¿å…å›¾ç‰‡åç»­æ— æ³•è®¿é—®ï¼Œå»ºè®®ä¸Šä¼ ä¸€ä¸‹csdnçš„å›¾ç‰‡åˆ°è‡ªå·±çš„å›¾åºŠï¼ˆå¯ä»¥é€šè¿‡obsidiançš„æ’ä»¶å¿«æ·ä¸Šä¼ å…¨æ–‡å›¾ç‰‡ï¼‰\n\n3.å›¾ç‰‡æ— æ³•æ˜¾ç¤ºé—®é¢˜3.1 è§£å†³ï¼šè®¾ç½®ç©ºreferreræˆ‘ä»¬çš„åšå®¢ç½‘ç«™å‘å…¶ä»–ç«™ç‚¹è®¿é—®å›¾ç‰‡çš„æ—¶å€™ï¼Œä¼šå‘é€ä¸€ä¸ª referrer ã€‚æœ‰äº›ç«™ç‚¹æ˜¯ä¼šblockæ‰ä½ çš„åšå®¢è®¿é—®çš„ï¼Œæ¯”å¦‚CSDNçš„å›¾ç‰‡é“¾æ¥ã€‚\nè¿™éƒ¨åˆ†æ˜¯æˆ‘åœ¨è®¾ç½®å‹é“¾çš„æ—¶å€™å‘ç°çš„ï¼Œæœ‰äº›æœ‹å‹ç»™æˆ‘çš„å¤´åƒé“¾æ¥æ˜¯CSDNçš„å›¾ç‰‡é“¾æ¥ï¼Œä½†æ˜¯è®¾ç½®å®Œæ¯•åå¤´åƒå›¾ç‰‡ä¸æ˜¾ç¤ºã€‚\nåŒ…æ‹¬ä½ çš„å›¾åºŠå›¾ç‰‡ä¸æ˜¾ç¤ºï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸º referrer é—®é¢˜ï¼›æ¯”å¦‚æˆ‘å°±å‘ç°æˆ‘çš„é˜¿é‡Œäº‘OSSå›¾ç‰‡ï¼Œåœ¨æœ¬åœ° HEXO S çš„æ—¶å€™ï¼Œåšå®¢ä¸­çš„å›¾ç‰‡æ— æ³•åŠ è½½\n\nè§£å†³åŠæ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰Hexoåšå®¢ä¸æ˜¾ç¤ºå›¾åºŠå›¾ç‰‡çš„è§£å†³æ–¹æ³•\n\nå…·ä½“æ“ä½œæ˜¯æ‰“å¼€HEXOä¸»é¢˜ä¸­åŒ…å«å…¨å±€ç½‘é¡µheadä¿¡æ¯çš„æ–‡ä»¶ï¼ˆä¸åŒä¸»é¢˜å¯èƒ½ä¸ä¸€æ ·ï¼Œéœ€è¦ä½ æ‰¾åˆ°ä¸»é¢˜çš„å®‰è£…è·¯å¾„ï¼‰keepä¸»é¢˜æ˜¯hexo-theme-keep\\layout\\_partial\\head.ejs\n\næ‰“å¼€ååœ¨é‡Œé¢æ·»åŠ è¿™ä¸ªè¯­å¥ï¼Œè®¾ç½®referrerä¸ºç©º\n&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot;&gt;\n\n\nè®¾ç½®å®Œæ¯•åï¼Œåº”è¯¥å°±å¯ä»¥æ­£å¸¸è®¿é—®å›¾åºŠå›¾ç‰‡å’ŒCSDNçš„å›¾ç‰‡å¤–é“¾äº†\n3.2 å…³äºosså®‰å…¨(CDN)è®¾ç½®ç©ºreferreréœ€è¦åœ¨ossçš„é˜²ç›—é“¾è®¾ç½®ä¸­å¼€å¯ å…è®¸ç©ºreferrerï¼Œè¿™èƒ½è®©ç”¨æˆ·ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®ä½ çš„å›¾ç‰‡èµ„æºï¼ŒæŸç§æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼\nä½†æ˜¯å…³é—­å…è®¸ç©ºreferrerçš„åŠŸèƒ½ï¼Œæ— æ³•è®©typoraæ˜¾ç¤ºå‡ºå›¾ç‰‡ã€‚è¿™æ˜¯å› ä¸ºmarkdownè½¯ä»¶åœ¨è¯·æ±‚çš„æ—¶å€™ä¸ä¼šå¸¦ä¸Šreferrerçš„ï¼Œæœ¬è´¨ä¸Šå’Œç›´æ¥ç”¨æµè§ˆå™¨è¯·æ±‚æ˜¯ä¸€æ ·çš„ã€‚\næ‰€ä»¥ï¼Œä¸ºäº†é¿å…è¢«äººâ€œä¸€æ™šä¸ŠæŠ“èµ°ä¸€å¥—æˆ¿â€çš„ossæµé‡ç›—ç”¨é—®é¢˜ï¼Œå»ºè®®ä¸ºä½ çš„é˜¿é‡Œäº‘ossæ·»åŠ ä¸Šcdnï¼ˆæˆ–è€…ä½¿ç”¨åˆæ‹äº‘ossä½œä¸ºå›¾åºŠï¼Œåˆæ‹äº‘çš„ossè‡ªå¸¦è®¿é—®æ§åˆ¶ï¼‰\n\nä»¥åˆæ‹äº‘cdnä¸ºä¾‹ï¼Œåœ¨cdnè®¾ç½®é‡Œé¢ï¼Œå¯ä»¥é…ç½®è®¿é—®æ§åˆ¶\n\nè¿™é‡Œæœ‰å¦‚ä¸‹ä¸€äº›é…ç½®é¡¹ï¼Œæ³¨é‡Šé‡Œé¢è¯´æ˜äº†å®ƒä»¬å¯¹åº”çš„ä½œç”¨\nIPé»‘ç™½åå• # ç™½åå•ï¼šå…è®¸çš„ip,é»‘åå•ï¼šä¸å…è®¸çš„ip# å¦‚æœå‘ç°æŸä¸€ä¸ªipçš„è¯·æ±‚æ¬¡æ•°è¿‡å¤šï¼Œæœ‰æ¶æ„è¯·æ±‚å«Œç–‘ï¼Œå¯ä»¥æš‚æ—¶å°†è¿™ä¸ªipè®¾ç½®ä¸ºé»‘åå•CORS è·¨åŸŸå…±äº« # å‚è€ƒhttp://ruanyifeng.com/blog/2016/04/cors.htmlåœ°åŒºè®¿é—®é™åˆ¶ # ç¦æ­¢æˆ–å…è®¸ç‰¹å®šåœ°åŒºçš„é™åˆ¶Referer é˜²ç›—é“¾ # é‡ç‚¹ï¼Œå»ºè®®å¼€å¯ç™½åå•ï¼Œåªå°†è‡ªå·±çš„åŸŸåæ·»åŠ åˆ°ç™½åå•ä¸­ï¼ˆå»ºè®®å¼€å¯ï¼‰User-Agent é˜²ç›—é“¾ # é™åˆ¶åªæœ‰æŸç§ç±»å‹çš„å®¢æˆ·ç«¯ã€æµè§ˆå™¨å¯ä»¥è®¿é—®èµ„æºToken é˜²ç›—é“¾ # æœ‰äº›éº»çƒ¦ï¼Œè¯·è‡ªè¡Œäº†è§£ã€‚å¯¹äºé™æ€åšå®¢è€Œè¨€ï¼Œå¹¶ä¸æ–¹ä¾¿å›æºé‰´æƒ # å¦‚æœæºç«™æœåŠ¡å™¨æœ‰é‰´æƒæ“ä½œï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®IP è®¿é—®é™åˆ¶ # å¯¹å•ä¸ªipçš„è¯·æ±‚é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼ˆå»ºè®®å¼€å¯ï¼‰CC é˜²æŠ¤ # é˜²æŠ¤ccæ”»å‡»WAF ä¿æŠ¤ # Web Application Firewall\n\nå¯¹äºhexoé™æ€åšå®¢è€Œè¨€ï¼Œå»ºè®®é…ç½®Refererçš„é˜²ç›—é“¾ï¼Œå’ŒIPçš„è®¿é—®é™åˆ¶ã€‚åŒä¸€ä¸ªipå¦‚æœè®¿é—®é€Ÿç‡è¿‡é«˜ï¼Œç›´æ¥ç¦æ­¢å…¶è®¿é—®ã€‚\nå¦‚æœä½ çš„hexoç«™ç‚¹æ˜¯éƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œcdnè¿˜æœ‰ä¸€ä¸ªéå¸¸æ£’çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯éšè—ä½ æœåŠ¡å™¨çš„çœŸå®ipï¼Œé¿å…è¢«æ‰“\n4.sshå…å¯†éƒ¨ç½²hexo cl    # æ¸…é™¤å·²æœ‰æ ¼å¼hexo g --d # åº”ç”¨æ›´æ”¹ï¼Œå¹¶pushåˆ°gitä»“åº“\n\ngitæœ¬åœ°ç”¨å‘½ä»¤è¡Œæ“ä½œçš„æ—¶å€™ï¼Œå¯èƒ½æ¯ä¸€æ¬¡hexo g --dæ“ä½œéƒ½ä¼šè®©ä½ è¾“å…¥ä¸€æ¬¡è´¦æˆ·å’Œå¯†ç ï¼Œæˆ‘ä»¬åªéœ€è¦ç”Ÿæˆä¸€ä¸ªSSHå…¬é’¥ç»™gitä»“åº“ï¼Œå°±èƒ½è·³è¿‡è¿™ä¸ªæ“ä½œ\n\nå…·ä½“ç”Ÿæˆæ“ä½œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªåšå®¢ğŸ‘‰å¦‚ä½•ä½¿ç”¨sshå¯†é’¥é…ç½®git\n\nåœ¨è®¾ç½®å¥½åï¼Œè®°å¾—æŠŠhexoçš„_config.ymlæ–‡ä»¶ä¸­gitä»“åº“çš„httpsé“¾æ¥æ›´æ¢ä¸ºsshé“¾æ¥ï¼\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: git@github.com:musnow/musnows.github.io.git  branch: master\n\n\n\n4.1 å…³äºgiteeå’Œgithubçš„ä¼˜åŠ£å’³å’³ï¼Œgiteeçš„ä¸€äº›exæ“ä½œè®©æˆ‘ä¸å¾—ä¸æ¢åˆ°äº†githubï¼è€Œä¸”è¯´å¥å®è¯ï¼Œè™½ç„¶giteeæœåŠ¡å™¨åœ¨å›½å†…ï¼Œå…¶gitee pagesçš„è®¿é—®é€Ÿåº¦çœŸä¸è§å¾—æ¯”githubå¿«å¤šå°‘\n\ngithubæ— å®¡æŸ¥ï¼ˆå…‰æ˜¯è¿™ä¸€ç‚¹å·²ç»èµ¢äº†ğŸ˜‚ï¼‰giteeè¯´æˆ‘å†™çš„æŠ€æœ¯åšå®¢æœ‰é—®é¢˜ï¼Œä¸ç»™æˆ‘éƒ¨ç½²ã€‚åˆä¸å‘Šè¯‰ç”¨æˆ·é—®é¢˜åœ¨å“ªï¼Œåªèƒ½æ˜¯ä¸€è„¸æ‡µé€¼ğŸ˜¥\ngithubåœ¨hexo g --déƒ¨ç½²äº†ä¹‹åèƒ½è‡ªåŠ¨æ›´æ–°ï¼›giteeè¿˜éœ€è¦ä½ è‡ªå·±ç‚¹ä¸€ä¸‹æ›´æ–°æŒ‰é’®ï¼Œå¾ˆçƒ¦\ngithubå¯ä»¥å…è´¹ç»‘å®šä½ è‡ªå·±çš„åŸŸåï¼›giteeåªæœ‰ä¼ä¸šç‰ˆæ‰è¡Œ\n\nhexoä»giteeåˆ‡æ¢åˆ°githubéå¸¸æ–¹ä¾¿ï¼Œåœ¨githubä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·å.github.ioçš„ä»“åº“ï¼Œå°†ä½ çš„hexoä¸­_config.ymlçš„è¿œç«¯ä»“åº“è·¯å¾„ä¸€æ”¹ï¼Œéƒ¨ç½²äº†ä¹‹åï¼Œç›´æ¥å°±èƒ½æ­£å¸¸è®¿é—®ï¼è¿™ä¸€ç‚¹çš„å…·ä½“æ“ä½œï¼Œå‰æ–‡1.2å°±å·²ç»ä»‹ç»è¿‡äº†ã€‚\n# Deployment## Docs: https://hexo.io/docs/one-command-deploymentdeploy:  type: git  repo: git@github.com:musnows/musnows.github.io.git  branch: master\n\nä¸ç®¡ç”¨ä»€ä¹ˆåšå®¢å¹³å°ï¼Œå¹³å°åªæ˜¯ä¸€ä¸ªè½½ä½“ï¼Œåˆ†äº«æŠ€æœ¯æ‰æ˜¯é‡è¦çš„ï¼\n4.2 netlifynetlifyçš„éƒ¨ç½²éå¸¸å®¹æ˜“ï¼Œå…¶è®¿é—®é€Ÿåº¦æ¯” github pages å¿«å¤šäº†ï¼å®æµ‹netlifyçš„å»¶è¿Ÿåªæœ‰80msï¼Œè€Œ github pages æ˜¯200ms\n\néƒ¨ç½²å‚è€ƒğŸ¦‹Hexo+Github+Netlifyéƒ¨ç½²ä¸ªäººåšå®¢\n\næœ€æœ€æœ€æ£’çš„ä¸€ç‚¹æ˜¯ï¼Œnetlifyçš„éƒ¨ç½²é€Ÿåº¦å¾ˆå¿«ï¼Œå‡ ä¹æ˜¯ä½  hexo d åˆšåˆšä¸Šä¼ åˆ°ä»“åº“ï¼Œæ²¡è¿‡å‡ ç§’ä»–å°±éƒ¨ç½²æˆåŠŸäº†ï¼\n\nä½ å¯ä»¥ä¸»è¦ä½¿ç”¨netlifyï¼Œå°† github.io ä½œä¸ºé•œåƒç«™ï¼›ä¸è¿‡è¿™æ ·çš„è¯ï¼Œè¯„è®ºç³»ç»Ÿå¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œè¦æ³¨æ„è®¾ç½®ä¸»ç«™çš„urlï¼Œåˆ«æŠŠè¯„è®ºç³»ç»Ÿå¼„boomäº†ï¼\n\næ“ä½œå¾ˆç®€å•ï¼Œgithubç™»é™†åï¼Œé€‰æ‹©ä½ çš„githubä»“åº“\n\nå†é€‰æ‹©å¯¹åº”çš„åˆ†æ”¯ï¼Œç‚¹å‡»åº•éƒ¨çš„deploy siteï¼Œå°±å¤§åŠŸå‘Šæˆäº†ï¼\n\nç­‰å¾…è¿™é‡Œå‡ºç°publishedçš„å­—æ ·ï¼Œå°±å¯ä»¥è®¿é—®ä½ çš„ç«™ç‚¹äº†ã€‚åŸŸååœ¨domain settingsé‡Œé¢è®¾ç½®å°±OK\n\n4.3 vercelvercelåŒç†ï¼Œä¹Ÿæ˜¯é€‰æ‹©musnows.github.ioï¼Œæ³¨æ„æ¨¡æ¿ä¸èƒ½é€‰æ‹©hexoï¼Œå¦åˆ™ä¼šéƒ¨ç½²å¤±è´¥ã€‚\næ¨¡æ¿é€‰æ‹©otherï¼Œè¿‡ä¸€ä¼šå°±èƒ½éƒ¨ç½²æˆåŠŸï¼›è¿™æ ·å°±ç›¸å½“äºä¸€ä¸ªç«™ç‚¹æœ‰3ä¸ªå¤‡ä»½äº†ï¼Œå®Œç¾ï¼\n\n4.4 è¿›é˜¶ï¼šnetlifyå’Œvercelå®Œå…¨è‡ªåŠ¨éƒ¨ç½²hexoä¸Šæ–‡çš„netlifyå’Œvercelçš„ä»‹ç»éƒ½æ˜¯è®©å®ƒä»¬ç›´æ¥ä½¿ç”¨äº†github.ioçš„é™æ€æ–‡ä»¶ä»“åº“ï¼Œå¹¶æ²¡æœ‰æŠŠè¿™ä¸¤ä¸ªå¹³å°çš„çœŸæ­£åŠŸèƒ½å‘æŒ¥å‡ºæ¥ã€‚\nnetlifyå’Œvercelå¯ä»¥è®¾ç½®hexoæºé…ç½®ä»“åº“ï¼Œè®¾ç½®äº†ä¹‹åï¼Œåªè¦ä»“åº“æœ‰pushï¼Œå®ƒä»¬å°±ä¼šè‡ªåŠ¨æ‰§è¡Œ hexo g åŠŸèƒ½ï¼Œå°†æ›´æ–°åº”ç”¨åˆ°ç«™ç‚¹é‡Œé¢ã€‚ä¸å†éœ€è¦æœ¬åœ°çš„hexoæ‰‹åŠ¨æ“ä½œäº†ã€‚\né…ç½®æˆåŠŸäº†ä¹‹åï¼Œå³ä¾¿æ˜¯åœ¨æ²¡æœ‰nodejsç¯å¢ƒä¸‹çš„ç”µè„‘ä¸­ï¼Œä½ ä¹Ÿåªéœ€è¦ä¿®æ”¹hexoåšå®¢source/_postsé‡Œé¢çš„mdæ–‡ä»¶ï¼Œpushåˆ°ä»“åº“é‡Œå°±èƒ½æ›´æ–°ä½ çš„åšå®¢ï¼\nã€æ•™ç¨‹ã€‘netlifyæˆ–vercelå®Œå…¨è‡ªåŠ¨éƒ¨ç½²hexo | æ…•é›ªçš„å¯’èˆ\n5.å…³äºhexoæ–‡å†…tocé—®é¢˜keepæ¨¡æ¿å·²ç»è‡ªå¸¦äº†è¾¹æ tocï¼Œå¯ä»¥åœ¨å³ä¸Šè§’æ‰“å¼€\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡hexo-tocæ’ä»¶å®ç°ç±»ä¼¼CSDNå’Œtyporaçš„æ–‡ç« å†…tocï¼ˆè¿™ä¸ªåŠŸèƒ½å¾ˆå¤šmarkdownç¼–è¾‘å™¨éƒ½ä¸æ”¯æŒï¼Œæ¯”å¦‚obsidianï¼‰\n\n\næ–‡å†…tocæ’ä»¶å®‰è£…å‚è€ƒäº†è¿™ç¯‡çŸ¥ä¹æ–‡ç« ğŸ‘‰ä¼ é€é—¨\n\nåœ¨git bashé‡Œé¢è¾“å…¥ä»¥ä¸‹å‘½ä»¤\nnpm install hexo-toc --save\n\næ’ä»¶å®‰è£…å®Œæ¯•åï¼Œå°±å¯ä»¥åœ¨mdæ–‡ä»¶çš„å¤´éƒ¨æ’å…¥&lt;!-- toc --&gt; æ¥ç”Ÿæˆç›®å½•ï¼ˆåœ¨typoraå’Œcsdnä¸­æ˜¯[TOC]æ ¼å¼ï¼‰\nä½†æ˜¯è¿™ä¸ªæ’ä»¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ— æ³•å’Œkeepä¸»é¢˜çš„è¾¹æ tocåŒæ—¶ä½¿ç”¨ã€‚å³ä½¿ç”¨äº†è¯¥æ’ä»¶åï¼Œè¾¹æ tocæ— æ³•è·³è½¬ï¼Œå°±åªèƒ½äºŒé€‰ä¸€äº†ã€‚\næ— å¥ˆåªèƒ½å¸è½½è¿™ä¸ªæ’ä»¶äº†ï¼Œä¸ªäººæ„Ÿè§‰è¿˜æ˜¯è¾¹æ tocé‡è¦ä¸€ç‚¹\nnpm remove hexo-toc --save\n\n6.è‡ªå®šä¹‰é¦–é¡µæ–‡ç« é¢„è§ˆå†…å®¹hexoæœ¬èº«æ”¯æŒè‡ªå®šä¹‰æ–‡ç« é¢„è§ˆï¼ˆç®€ä»‹ï¼‰ï¼Œåœ¨mdæ–‡ä»¶ä¸­æ·»åŠ &lt;!-- more --&gt;å°±å¯ä»¥è‡ªå®šä¹‰æ–‡ç« é¢„è§ˆæ˜¾ç¤ºçš„å†…å®¹\næ•ˆæœå¦‚ä¸‹ğŸ‘‡ å»ºè®®ä¸è¦åœ¨éœ€è¦é¢„è§ˆçš„å†…å®¹ä¸­è®¾ç½®æ ‡é¢˜ï¼Œä¸ç„¶çœ‹èµ·æ¥ä¼šéå¸¸æ€ªå¼‚\n\néƒ¨åˆ†hexoä¸»é¢˜ä¸æ”¯æŒè¯¥æ–¹å¼è®¾ç½®é¢„è§ˆå†…å®¹ï¼Œè¯·å‚è€ƒä¸»é¢˜è®¾ç½®æ–‡æ¡£ã€‚\n7.è¯„è®ºç³»ç»Ÿ7.1 Valineè¯„è®ºç³»ç»Ÿåå°å¦‚ä½•æŸ¥çœ‹è¯„è®ºåœ¨é…ç½®å¥½Valineè¯„è®ºç³»ç»Ÿåï¼Œå¯ä»¥åœ¨leancloudåå°ç®¡ç†ä¸­çœ‹åˆ°è¯„è®ºçš„htmlæºç ã€‚\nä½†é»˜è®¤çš„æ’åºçš„é—®é¢˜æ˜¯ï¼Œçœ‹ä¸åˆ°ç”¨æˆ·æ˜¯åœ¨é‚£ä¸€ç¯‡æ–‡ç« ä¸‹é¢è¯„è®ºçš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´å†…å®¹æ’åºï¼ˆå³ä¸Šè§’é‚£ä¸ªå¸¦æ©™è‰²åœ†ç‚¹çš„æŒ‰é’®ï¼‰ï¼ŒæŠŠurlå¾€å‰ç§»åŠ¨ï¼Œè¿™æ ·å°±èƒ½æ›´æ–¹ä¾¿åœ°çœ‹åˆ°æ˜¯è°è¯„è®ºäº†è‡ªå·±çš„åšå®¢ï¼Œä»¥åŠè¯„è®ºæ–‡ç« çš„ä½ç½®\n\n7.1.1 leancloudé‚®ç®±æé†’ä½ å¯ä»¥åˆ©ç”¨valineæ’ä»¶adminæ¥å®ç°é‚®ç®±æé†’\n\nGithubé¡¹ç›®åœ°å€ï¼šDesertsP&#x2F;Valine-Admin\n\nä½†æ˜¯è¿™ä¸ªæ’ä»¶éœ€è¦ä½ æœ‰ä¸€ä¸ªå¤‡æ¡ˆè¿‡çš„åŸŸåï¼ï¼ï¼ï¼\nç„¶åæˆ‘å°±åœ¨22-04-27è¿™å¤©å‘ç°ï¼Œå…¶å®æˆ‘è®¾ç½®çš„é‚®ç®±æé†’å·²ç»ç”Ÿæ•ˆäº†ï¼ğŸ˜‚çœŸæ˜¯ä¸€æ³¢ä¸‰æŠ˜ï¼ˆç„¶ååˆæŒ‚äº†ï¼Œå‚çœ‹ 7.2 ğŸ˜¥ï¼‰\nå¤§å®¶æ ¹æ®è¿™ç¯‡åšå®¢çš„æ•™ç¨‹è¿›è¡Œé‚®ä»¶æé†’çš„é…ç½®å°±OKäº†ï¼valineè¯„è®ºç³»ç»Ÿä½¿ç”¨\n\n7.1.2 å…³äºäº‘å¼•æ“500æŠ¥é”™æœ¬éƒ¨åˆ†æ›´æ–°äº2023-01-05ï¼Œä»Šå¤©æ›´æ–°äº†åšå®¢çš„urlåœ°å€ï¼Œç„¶åå°±å‘ç°leancloudçš„é‚®ç®±æé†’æŒ‚æ‰äº†ï¼Œçœ‹åå°ä¼šæœ‰ä¸€ä¸ªè¿™æ ·çš„æŠ¥é”™\n[2023-01-06T03:20:03.518063400Z][instance:web1] LeanEngine: /self_wake: 500: Error: undefined is not a valid uri or options object.[2023-01-06T03:20:03.518111500Z][instance:web1]     at request (/home/leanengine/app/node_modules/request/index.js:44:11)[2023-01-06T03:20:03.518117400Z][instance:web1]     at /home/leanengine/app/cloud.js:54:5[2023-01-06T03:20:03.518121000Z][instance:web1]     at /home/leanengine/app/node_modules/leanengine/lib/leanengine.js:202:14[2023-01-06T03:20:03.518124500Z][instance:web1]     at processTicksAndRejections (internal/process/task_queues.js:97:5)\n\næœ€ç»ˆæˆ‘ç™¾åº¦åˆ°äº†è¿™ä¸ªissueï¼Œé‡Œé¢æåˆ°çš„å’Œæˆ‘çš„æƒ…å†µä¸€æ¨¡ä¸€æ ·ï¼šé‚®ä»¶æé†’æŠ¥é”™ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆError: undefined is not a valid uri or options object. #138\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯äº‘å¼•æ“éœ€è¦ç»‘å®šåŸŸå\nè€Œæˆ‘æœ€å¼€å§‹é€‰æ‹©çš„leadcouldæ˜¯åœ¨å›½å†…ï¼ŒåŸŸåå¿…é¡»è¦ipcå¤‡æ¡ˆæ‰èƒ½æ­£å¸¸ç»‘å®šï¼›å¦‚æœéœ€è¦ç”¨ç‹¬ç«‹IPï¼Œé‚£è¿˜å¾—é¢å¤–æé’±ï¼Œ50ä¸€ä¸ªæœˆå®åœ¨æ˜¯è´Ÿæ‹…ä¸èµ·ğŸ˜¥\n\nè‡³äºä¹‹å‰ä¸ºå•¥é‚®ç®±æé†’èƒ½ç”¨å‘¢ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼›æˆ‘çŒœæ˜¯leancloudæœ€è¿‘æ›´æ–°äº†ç­–ç•¥ï¼Œå°±éœ€è¦å¼ºåˆ¶ç»‘å®šæ‰èƒ½ç”¨äº†â€¦â€¦\n\nè§£å†³æ–¹æ³•ï¼Œä½¿ç”¨å›½é™…ç‰ˆleancloudï¼\n7.2 ä½¿ç”¨ Walineè¯„è®ºç³»ç»Ÿè¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒWalineçš„å¸®åŠ©æ–‡æ¡£ï¼Œæœ¬ç«™çš„è¯„è®ºç³»ç»Ÿä¹Ÿäº 2023-01-06 ä» valine æ›´æ¢ä¸ºäº† walineï¼Œkeepç‰ˆæœ¬3.4.5-&gt;3.5.2\n\nWaline.js.org\nkeepä½¿ç”¨waline\n\né…ç½®å¥½äº† vercel çš„è‡ªå®šä¹‰çš„åŸŸåä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªæ–¹å¼æ¥å¿«æ·ç®¡ç†\nè¯„è®ºç³»ç»Ÿï¼šexample.yourdomain.comè¯„è®ºç®¡ç†ï¼šexample.yourdomain.com/ui\n\nä¸‹å›¾ä¸ºæ›´æ–°å‰çš„valineè¯„è®ºç•Œé¢\n\nä»¥ä¸‹ä¸ºæ›´æ–°åçš„waline ç•Œé¢ï¼Œå…¶æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼å¯æƒœwalineè€ƒè™‘åˆ°é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œå›¾ç‰‡é»˜è®¤åªæ”¯æŒ128kbï¼›\nå¯¹äºæˆ‘æ¥è¯´ï¼Œwalineæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯é‚®ç®±æé†’åŠŸèƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç”¨vecelçš„ç¯å¢ƒå˜é‡æå®šï¼Œæ•ˆæœä¹Ÿå¾ˆä¸é”™ï¼åŒæ—¶ï¼Œwalineæœ‰ä¸€ä¸ªåç«¯åœ°å€ï¼Œèƒ½éšè—æ‰leancloudçš„keyï¼Œé¿å…åˆ«äººåˆ·ä½ çš„leancloudç”¨é‡ï¼\n\n7.2.1 è‡ªå®šä¹‰walineé‚®ç®±æé†’æ¨¡æ¿\nå‚è€ƒğŸ‘‰waline é‚®ä»¶é€šçŸ¥æ¨¡æ¿æ ·å¼ä¸€è§ˆ\n\nä¸ºäº†é¿å…æºç«™æ— æ³•è®¿é—®ï¼Œè¿™é‡Œè´´å‡ºå½“å‰æˆ‘ä½¿ç”¨çš„é‚®ä»¶é€šçŸ¥æ¨¡æ¿;\næ³¨æ„ï¼Œæˆ‘æ˜¯ç”¨verceléƒ¨ç½²çš„ï¼Œæ‰€ä»¥åªéœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡å°±è¡Œäº†ã€‚å¦‚æœä½ æ˜¯å…¶ä»–éƒ¨ç½²æ–¹å¼ï¼Œè¯·å‚è€ƒä¸Šé¢åšå®¢ä¸­çš„è¯¦ç»†æ•™ç¨‹!\nMAIL_SUBJECT\n&#123;&#123;parent.nick | safe&#125;&#125;ï¼Œæ‚¨åœ¨ã€&#123;&#123;site.name | safe&#125;&#125;ã€ä¸Šçš„è¯„è®ºæ”¶åˆ°äº†æ¥è‡ª  &#123;&#123;self.nick | safe&#125;&#125; çš„å›å¤\n\nMAIL_SUBJECT_ADMIN\nã€&#123;&#123;site.name | safe&#125;&#125;ã€ ä¸Šæœ‰æ–°è¯„è®ºäº†\n\nMAIL_TEMPLATE\n&lt;div style=&quot;border-radius: 10px 10px 10px 10px;font-size:14px;color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,å¾®è½¯é›…é»‘,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffffff repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);&quot;&gt;&lt;div style=&quot;width:100%;background:#49BDAD;color:#ffffff;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));background-image: -webkit-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;&quot;&gt;&lt;p style=&quot;font-size:15px;word-break:break-all;padding: 23px 32px;margin:0;background-color: hsla(0,0%,100%,.4);border-radius: 10px 10px 0 0;&quot;&gt;æ‚¨åœ¨&lt;a style=&quot;text-decoration:none;color: #ffffff;&quot; href=&quot;&#123;&#123;site.url&#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ä¸Šçš„ç•™è¨€æœ‰æ–°å›å¤å•¦ï¼&lt;/p&gt;&lt;/div&gt;&lt;div style=&quot;margin:40px auto;width:90%&quot;&gt;&lt;p&gt;Hi, &#123;&#123;parent.nick&#125;&#125;ï¼Œæ‚¨æ›¾åœ¨æ–‡ç« ä¸Šå‘è¡¨è¯„è®ºï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;&gt;&#123;&#123;parent.comment | safe&#125;&#125;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&#123;&#123;self.nick&#125;&#125;&lt;/strong&gt; ç»™æ‚¨çš„å›å¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:14px;color:#555555;&quot;&gt;&#123;&#123;self.comment | safe&#125;&#125;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥ç‚¹å‡»&lt;a style=&quot;text-decoration:none; color:#12addb&quot; href=&quot;&#123;&#123;site.postUrl&#125;&#125;&quot; target=&quot;_blank&quot;&gt;æŸ¥çœ‹å›å¤çš„å®Œæ•´å…§å®¹&lt;/a&gt;ï¼Œæ¬¢è¿å†æ¬¡å…‰ä¸´&lt;a style=&quot;text-decoration:none; color:#12addb&quot; href=&quot;&#123;&#123;site.url&#125;&#125;&quot; target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ã€‚&lt;hr /&gt;&lt;p style=&quot;font-size:12px;color:#b7adad&quot;&gt;æœ¬é‚®ä»¶ä¸ºç³»ç»Ÿè‡ªåŠ¨å‘é€ï¼Œè¯·å‹¿ç›´æ¥å›å¤é‚®ä»¶å“¦ï¼Œå¯åˆ°åšæ–‡å†…å®¹å›å¤ã€‚&lt;/p&gt;&lt;/p&gt;&lt;style type=&quot;text/css&quot;&gt;a:link&#123;text-decoration:none&#125;a:visited&#123;text-decoration:none&#125;a:hover&#123;text-decoration:none&#125;a:active&#123;text-decoration:none&#125;&lt;/style&gt;&lt;/div&gt;&lt;/div&gt;\n\nMAIL_TEMPLATE_ADMIN\n&lt;div style=&quot;background-image: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/bg.jpg);;padding:20px 0px 20px;margin:0px;background-color:#ded8ca;width:100%;&quot;&gt;&lt;div style=&quot;background: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/leisi-714x62.png) repeat-y scroll top;&quot;&gt;&lt;div style=&quot;border-radius: 10px 10px 10px 10px;font-size:14px;color: #555555;width: 666px;font-family:&#x27;Century Gothic&#x27;,&#x27;Trebuchet MS&#x27;,&#x27;Hiragino Sans GB&#x27;,å¾®è½¯é›…é»‘,&#x27;Microsoft Yahei&#x27;,Tahoma,Helvetica,Arial,&#x27;SimSun&#x27;,sans-serif;margin:50px auto;border:1px solid #eee;max-width:100%;background: #ffe8dd61;box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);margin:auto&quot;&gt;&lt;img class=&quot;headerimg no-lightbox entered loaded&quot;src=&quot;https://npm.elemecdn.com/sarakale-assets@v1/bg/bg3.jpg&quot;style=&quot;width:100%;overflow:hidden;pointer-events:none&quot;data-ll-status=&quot;loaded&quot;&gt;&lt;div style=&quot;width:100%;color:#9d2850;border-radius: 10px 10px 0 0;background-image: -moz-linear-gradient(0deg, rgb(67, 198, 184), rgb(255, 209, 244));height: 66px;background: url(https://npm.elemecdn.com/sarakale-assets@v1/Article/email/line034_666x66.png) left top no-repeat;&quot;&gt;&lt;p style=&quot;font-size:16px;font-weight: bold;text-align:center;word-break:break-all;padding: 23px 32px;margin:0;border-radius: 10px 10px 0 0;&quot;&gt;æ‚¨åœ¨&lt;a style=&quot;text-decoration:none;color: #9d2850;&quot;href=&quot;&#123;&#123;site.url&#125;&#125;&quot;target=&quot;_blank&quot;&gt;&#123;&#123;site.name&#125;&#125;&lt;/a&gt;ä¸Šçš„æ–‡ç« æœ‰äº†æ–°çš„è¯„è®º&lt;/p&gt;&lt;/div&gt;&lt;div style=&quot;margin:40px auto;width:90%;&quot;&gt;&lt;p&gt;&lt;strong&gt;&#123;&#123;self.nick&#125;&#125;&lt;/strong&gt;å›å¤è¯´ï¼š&lt;/p&gt;&lt;div style=&quot;background: #fafafa repeating-linear-gradient(-45deg,#fff,#fff 1.125rem,transparent 1.125rem,transparent 2.25rem);box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);margin:20px 0px;padding:15px;border-radius:5px;font-size:15px;color:#555555;&quot;&gt;&#123;&#123;self.comment|safe&#125;&#125;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥ç‚¹å‡»&lt;a style=&quot;text-decoration:none; color:#cf5c83&quot;href=&quot;&#123;&#123;site.postUrl&#125;&#125;&quot;target=&quot;_blank&quot;&gt;æŸ¥çœ‹å›å¤çš„å®Œæ•´å…§å®¹&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;\n\n7.2.2 163é‚®ç®±è‡ªå®šä¹‰å‘ä»¶äººåå­—è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå®˜æ–¹ç»™å‡ºäº†ä¸¤ä¸ªè‡ªå®šä¹‰é‚®ç®±å‘ä»¶äººå’Œå‘ä»¶é‚®ç®±çš„ç¯å¢ƒå˜é‡ï¼Œå…¶å¯¹äºç½‘æ˜“çš„163å’Œ126é‚®ç®±æ¥è¯´ï¼Œä½ å¿…é¡»è¦è®¾ç½®æˆä½ çš„ç™»å½•é‚®ç®±æ‰å¯ä»¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ²¡åŠæ³•å‘é€é‚®ç®±\nSENDER_EMAIL ç”¨æ¥è‡ªå®šä¹‰å‘ä»¶é‚®ç®±ï¼Œä½†æ˜¯ç½‘æ˜“é‚®ç®±ä¸æ”¯æŒSENDER_NAME  è‡ªå®šä¹‰å‘ä»¶äºº\n\nè€Œä¸”è¿˜æœ‰ä¸€ç‚¹ï¼Œå°±æ˜¯è¿™ä¸¤ä¸ªç¯å¢ƒå˜é‡éœ€è¦éƒ½åŠ ä¸Šï¼Œé‚®ç®±è‡ªå®šä¹‰å‘ä»¶äººæ‰èƒ½ç”Ÿæ•ˆï¼›\nå¦‚æœä½ åªè®¾ç½®äº† SENDER_NAME ç¯å¢ƒå˜é‡ï¼Œè€Œæ²¡æœ‰è®¾ç½® SENDER_EMAILï¼Œé‚£ä¹ˆå‘ä»¶äººæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œæ­¤æ—¶å‘ä»¶äººä¼šæ˜¯ä½ çš„é‚®ç®±ï¼Œå¾ˆéš¾çœ‹ï¼›\n\n7.2.3 å¼ºåˆ¶ç”¨æˆ·å¡«å†™æ˜µç§°å’Œé‚®ç®±åœ¨walineçš„ç»„ä»¶é‡Œé¢ï¼Œå¯ä»¥é…ç½®ç”¨æˆ·å¿…é¡»å¡«å†™çš„ä¿¡æ¯ã€‚æ¯”å¦‚ä¸ºäº†è®©æˆ‘å¯¹ç”¨æˆ·çš„å›å¤èƒ½é€šè¿‡é‚®ç®±æé†’åˆ°å¯¹æ–¹ï¼Œæˆ‘éœ€è¦å¼€å¯å¼ºåˆ¶ç”¨æˆ·å¡«å†™é‚®ç®±çš„åŠŸèƒ½\n\nhttps://waline.js.org/reference/client/props.html#requiredmeta\n\nå¦‚æœä½ ç”¨çš„hexoä¸»é¢˜æœ‰å¯¹è¿™ä¸€é¡¹è¿›è¡Œå®šåˆ¶åŒ–ï¼Œé‚£å°±å¯ä»¥ç›´æ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶é‡Œé¢åŠ ä¸Šï¼ˆå…·ä½“è¯·å‚è€ƒä½ æ‰€ç”¨hexoä¸»é¢˜çš„æ–‡æ¡£ï¼‰\nkeepä¸»é¢˜å¹¶æ²¡æœ‰å¯¹æ­¤é¡¹è¿›è¡Œé…ç½®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶æ˜¯æ²¡æœ‰ç”¨çš„ã€‚éœ€è¦æˆ‘ä»¬ä¿®æ”¹æºç \nthemes/keep/layout/_partial/comment/waline.ejs\n\næ‰¾åˆ°ä¸‹é¢çš„éƒ¨åˆ†ï¼ˆç¬¬37è¡Œå·¦å³ï¼‰\nWaline.init(&#123;    el: &#x27;#waline-comment&#x27;,    serverURL: &#x27;&lt;%= waline_env_server_url %&gt;&#x27;,    lang: &#x27;&lt;%= config.language %&gt;&#x27; || &#x27;zh-CN&#x27;,    comment: &#x27;.post-comments-count&#x27;,    reaction: &#x27;&lt;%= waline_reaction %&gt;&#x27; === &#x27;true&#x27; &#125;)\n\nåœ¨æœ€ååŠ ä¸Š\nrequiredMeta: [&#x27;nick&#x27;,&#x27;mail&#x27;]\n\næ·»åŠ ä¹‹åçš„å®Œæ•´ä»£ç å¦‚ä¸‹\nWaline.init(&#123;    el: &#x27;#waline-comment&#x27;,    serverURL: &#x27;&lt;%= waline_env_server_url %&gt;&#x27;,    lang: &#x27;&lt;%= config.language %&gt;&#x27; || &#x27;zh-CN&#x27;,    comment: &#x27;.post-comments-count&#x27;,    reaction: &#x27;&lt;%= waline_reaction %&gt;&#x27; === &#x27;true&#x27;,    requiredMeta: [&#x27;nick&#x27;,&#x27;mail&#x27;]&#125;)\n\næ­¤æ—¶ï¼Œç”¨æˆ·æƒ³è¯„è®ºçš„æ—¶å€™ï¼Œå°±å¿…é¡»å¡«å†™æ˜µç§°å’Œé‚®ç®±äº†\n\n8.éƒ¨åˆ†keepä¸»é¢˜é­”æ”¹è®°å½•ç›®å‰æœ¬åšå®¢å·²ç»ä¿®æ”¹ä¸ºbutterflyä¸»é¢˜ã€‚ä¸ºäº†ä¿è¯ä»¥ä¸‹æ•™ç¨‹çš„å¯ç”¨æ€§ï¼Œæˆ‘éƒ¨ç½²äº†ä¸€ä¸ªä¸å†æ›´æ–°çš„keepä¸»é¢˜åšå®¢ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹è¯¥ç«™ç‚¹ï¼Œå‚è€ƒkeepä¸»é¢˜é­”æ”¹åçš„æ•ˆæœ\nhttps://keep-hexo.musnow.top\n\nçªå‡ºçš„å°±æ˜¯ä¸€ä¸ªå¯æŒç»­æ€§å‘å±•ğŸ‘»\n8.0 å¼€å§‹é™¤äº†æœ¬æ–‡ç¬¬ä¸€ç‚¹é‡Œé¢æåˆ°çš„é­”æ”¹keepå‚è€ƒæ•™ç¨‹ï¼Œæˆ‘è¿˜ä¿®æ”¹äº†å…¶ä»–ä¸€äº›å†…å®¹ï¼Œå¹¶å¯¹keep v3.5.2æ›´æ–°äº†çš„é…ç½®æ–‡ä»¶è¿›è¡Œè¯´æ˜ï¼›ä»¥ä¸‹æ˜¯å„ä¸ªæ¡†çš„æ ‡å·\n\n\nä»¥ä¸‹æ˜¯ä¸åŒæ¡†å¯¹åº”çš„é…ç½®æ–‡ä»¶è·¯å¾„å’Œå¯¹åº”çš„ç±»ï¼Œå¸®åŠ©ä½ æ‰¾åˆ°ä»–ä»¬çš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼›æ›´è¯¦ç»†çš„ä»‹ç»å‚è€ƒ hexo-keepé¦–é¡µæ ·å¼è‡ªå®šä¹‰\n1  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\header.styl   .header-wrapper &#123;&#125;2  Hexo\\themes\\keep\\source\\css\\layout\\page.styl   .page-container &#123;&#125;3  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\first-screen.styl   .description &#123;&#125;4  Hexo\\themes\\keep\\source\\css\\layout\\_partial\\first-screen.styl   .s-icon-list &#123;&#125;5  Hexo\\themes\\keep\\source\\css\\layout\\page.styl   .page-main-content &#123;&#125;6  Hexo\\themes\\keep\\source\\css\\layout\\home-content.styl   .home-content-container &#123;&#125;7  Hexo\\themes\\keep\\source\\css\\layout\\home-content.styl   .home-article-item &#123;&#125;\n\nç‰ˆæœ¬åŸºäºKEEP V3.5.2ï¼ŒåŸºæœ¬å…¼å®¹V3.6.1ï¼Œå¦‚æœä½ å‘ç°é…ç½®æ–‡ä»¶ä½ç½®æœ‰å˜åŠ¨ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€å‘ŠçŸ¥ã€‚\nå¤‡æ³¨ï¼škeepä¸æ”¯æŒæ·±å±‚æ¬¡çš„è‡ªå®šä¹‰é¡µé¢ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½æ˜¯é’ˆå¯¹ npm åŒ…è¿›è¡Œçš„ï¼Œä¼šåœ¨ä½ æ›´æ–°keepçš„æ—¶å€™ä¸¢å¤±ï¼æ‰€ä»¥æƒ³æŠ˜è…¾ï¼Œå»ºè®®åšå¥½ä¸å†æ›´æ–°keepçš„å‡†å¤‡å“¦ï¼ˆé™¤éä½ æ„¿æ„æ¯æ¬¡éƒ½æ”¹ä¸€éï¼‰ğŸ¤£\n\nblog&#x2F;node_modules&#x2F;hexo-theme-keep\n\nå¦‚æœè§‰å¾—æœ¬ç«™ä¿®æ”¹è¿‡åçš„æ ·å¼å¾ˆä¸é”™ï¼Œé‚£å¯ä»¥å»æˆ‘çš„Githubä»“åº“ï¼Œç›´æ¥æŠŠkeepçš„æ¨¡ç»„ä¸‹è½½åæ”¾åˆ°ä½ çš„æœ¬åœ°å°±å¯ä»¥äº†ï¼›è¿™æ ·å°±åªéœ€è¦ä¿®æ”¹ keep/source/css/layout/page.stylé‡Œé¢çš„ä¸¤ä¸ªèƒŒæ™¯å›¾urlå°±å¯ä»¥äº†ï¼\n\n8.1 é›ªèŠ±é£˜é£˜æˆ‘çš„ä¸»é¡µæœ‰é£˜åŠ¨çš„é›ªèŠ±ï¼Œæƒ³çŸ¥é“æ€ä¹ˆå¼„çš„ï¼Ÿé‚£å°±å¾€ä¸‹çœ‹å§ï¼\n\né›ªèŠ±ä»£ç æ¥è‡ªåšå®¢ğŸ‘‰hexo+nextæ·»åŠ é›ªèŠ±é£˜è½èƒŒæ™¯æ•ˆæœ\n\nåœ¨Hexo-themes-keep\\source\\jsä¸‹æ–°å»ºæ–‡ä»¶snow.js\n/*æ ·å¼äºŒ*//* æ§åˆ¶ä¸‹é›ª */function snowFall(snow) &#123;    /* å¯é…ç½®å±æ€§ */    snow = snow || &#123;&#125;;    this.maxFlake = snow.maxFlake || 200; /* æœ€å¤šç‰‡æ•° */    this.flakeSize = snow.flakeSize || 10; /* é›ªèŠ±å½¢çŠ¶ */    this.fallSpeed = snow.fallSpeed || 1; /* å è½é€Ÿåº¦ */&#125;/* å…¼å®¹å†™æ³• */requestAnimationFrame = window.requestAnimationFrame ||    window.mozRequestAnimationFrame ||    window.webkitRequestAnimationFrame ||    window.msRequestAnimationFrame ||    window.oRequestAnimationFrame ||    function (callback) &#123;        setTimeout(callback, 1000 / 60);    &#125;;cancelAnimationFrame = window.cancelAnimationFrame ||    window.mozCancelAnimationFrame ||    window.webkitCancelAnimationFrame ||    window.msCancelAnimationFrame ||    window.oCancelAnimationFrame;/* å¼€å§‹ä¸‹é›ª */snowFall.prototype.start = function () &#123;    /* åˆ›å»ºç”»å¸ƒ */    snowCanvas.apply(this);    /* åˆ›å»ºé›ªèŠ±å½¢çŠ¶ */    createFlakes.apply(this);    /* ç”»é›ª */    drawSnow.apply(this)&#125;/* åˆ›å»ºç”»å¸ƒ */function snowCanvas() &#123;    /* æ·»åŠ Domç»“ç‚¹ */    var snowcanvas = document.createElement(&quot;canvas&quot;);    snowcanvas.id = &quot;snowfall&quot;;    snowcanvas.width = window.innerWidth;    snowcanvas.height = document.body.clientHeight;    snowcanvas.setAttribute(&quot;style&quot;, &quot;position:absolute; top: 0; left: 0; z-index: 1; pointer-events: none;&quot;);    document.getElementsByTagName(&quot;body&quot;)[0].appendChild(snowcanvas);    this.canvas = snowcanvas;    this.ctx = snowcanvas.getContext(&quot;2d&quot;);    /* çª—å£å¤§å°æ”¹å˜çš„å¤„ç† */    window.onresize = function () &#123;        snowcanvas.width = window.innerWidth;        /* snowcanvas.height = window.innerHeight */    &#125;&#125;/* é›ªè¿åŠ¨å¯¹è±¡ */function flakeMove(canvasWidth, canvasHeight, flakeSize, fallSpeed) &#123;    this.x = Math.floor(Math.random() * canvasWidth); /* xåæ ‡ */    this.y = Math.floor(Math.random() * canvasHeight); /* yåæ ‡ */    this.size = Math.random() * flakeSize + 2; /* å½¢çŠ¶ */    this.maxSize = flakeSize; /* æœ€å¤§å½¢çŠ¶ */    this.speed = Math.random() * 1 + fallSpeed; /* å è½é€Ÿåº¦ */    this.fallSpeed = fallSpeed; /* å è½é€Ÿåº¦ */    this.velY = this.speed; /* Yæ–¹å‘é€Ÿåº¦ */    this.velX = 0; /* Xæ–¹å‘é€Ÿåº¦ */    this.stepSize = Math.random() / 30; /* æ­¥é•¿ */    this.step = 0 /* æ­¥æ•° */&#125;flakeMove.prototype.update = function () &#123;    var x = this.x,        y = this.y;    /* å·¦å³æ‘†åŠ¨(ä½™å¼¦) */    this.velX *= 0.98;    if (this.velY &lt;= this.speed) &#123;        this.velY = this.speed    &#125;    this.velX += Math.cos(this.step += .05) * this.stepSize;    this.y += this.velY;    this.x += this.velX;    /* é£å‡ºè¾¹ç•Œçš„å¤„ç† */    if (this.x &gt;= canvas.width || this.x &lt;= 0 || this.y &gt;= canvas.height || this.y &lt;= 0) &#123;        this.reset(canvas.width, canvas.height)    &#125;&#125;;/* é£å‡ºè¾¹ç•Œ-æ”¾ç½®æœ€é¡¶ç«¯ç»§ç»­å è½ */flakeMove.prototype.reset = function (width, height) &#123;    this.x = Math.floor(Math.random() * width);    this.y = 0;    this.size = Math.random() * this.maxSize + 2;    this.speed = Math.random() * 1 + this.fallSpeed;    this.velY = this.speed;    this.velX = 0;&#125;;// æ¸²æŸ“é›ªèŠ±-éšæœºå½¢çŠ¶ï¼ˆæ­¤å¤„å¯ä¿®æ”¹é›ªèŠ±é¢œè‰²ï¼ï¼ï¼ï¼‰flakeMove.prototype.render = function (ctx) &#123;    var snowFlake = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.size);    snowFlake.addColorStop(0, &quot;rgba(255, 255, 255, 0.9)&quot;); /* æ­¤å¤„æ˜¯é›ªèŠ±é¢œè‰²ï¼Œé»˜è®¤æ˜¯ç™½è‰² */    snowFlake.addColorStop(.5, &quot;rgba(255, 255, 255, 0.5)&quot;); /* è‹¥è¦æ”¹ä¸ºå…¶ä»–é¢œè‰²ï¼Œè¯·è‡ªè¡ŒæŸ¥ */    snowFlake.addColorStop(1, &quot;rgba(255, 255, 255, 0)&quot;); /* æ‰¾16è¿›åˆ¶çš„RGB é¢œè‰²ä»£ç ã€‚ */    ctx.save();    ctx.fillStyle = snowFlake;    ctx.beginPath();    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);    ctx.fill();    ctx.restore();&#125;;/* åˆ›å»ºé›ªèŠ±-å®šä¹‰å½¢çŠ¶ */function createFlakes() &#123;    var maxFlake = this.maxFlake,        flakes = this.flakes = [],        canvas = this.canvas;    for (var i = 0; i &lt; maxFlake; i++) &#123;        flakes.push(new flakeMove(canvas.width, canvas.height, this.flakeSize, this.fallSpeed))    &#125;&#125;/* ç”»é›ª */function drawSnow() &#123;    var maxFlake = this.maxFlake,        flakes = this.flakes;    ctx = this.ctx, canvas = this.canvas, that = this;    /* æ¸…ç©ºé›ªèŠ± */    ctx.clearRect(0, 0, canvas.width, canvas.height);    for (var e = 0; e &lt; maxFlake; e++) &#123;        flakes[e].update();        flakes[e].render(ctx);    &#125;    /*  ä¸€å¸§ä¸€å¸§çš„ç”» */    this.loop = requestAnimationFrame(function () &#123;        drawSnow.apply(that);    &#125;);&#125;/* è°ƒç”¨åŠæ§åˆ¶æ–¹æ³• */var snow = new snowFall(&#123;    maxFlake: 60&#125;);snow.start();\n\næ·»åŠ å®Œæˆåï¼Œåœ¨ hexo-theme-keep\\layout\\layout.ejs ä¸­æ·»åŠ å¦‚ä¸‹å¼•ç”¨\n&lt;script type = &quot;text/javascript&quot; src=&quot;/js/snow.js&quot;&gt;&lt;/script&gt;\n\næ·»åŠ å®Œæˆåçš„ layout.ejs æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;&lt;%= config.language %&gt;&quot;&gt;&lt;%- partial(&#x27;_partial/head&#x27;) %&gt;&lt;body&gt;&lt;%- body %&gt;&lt;%- partial(&#x27;_partial/scripts&#x27;) %&gt;&lt;script type = &quot;text/javascript&quot; src=&quot;/js/snow.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;\n\né‡æ–°éƒ¨ç½²ï¼Œå°±OKå•¦ï¼\n8.2 é¦–é¡µæè¿°å­—ä½“çš„èƒŒæ™¯æ¡†å’Œé€æ˜åº¦è¿™é‡Œå¯¹åº”çš„æ˜¯3å·æ¡†çš„æ–‡å­—\nä¿®æ”¹hexo-theme-keep\\source\\css\\layout\\_partial\\first-screen.stylä¸­ä»¥ä¸‹éƒ¨åˆ†ï¼Œæœ‰æ³¨é‡Šçš„åœ°æ–¹å°±æ˜¯æˆ‘ä¿®æ”¹äº†çš„åœ°æ–¹\n.description &#123;  /*color $first-screen-font-color*/  color: rgb(255 250 250) /*å­—ä½“é¢œè‰²*/  font-weight bold  font-size $first-screen-font-size  line-height 1.8  text-align center  background: rgba(50,50,50,0.3); /*å­—ä½“èƒŒæ™¯é¢œè‰²å’Œé€æ˜çš„*/  padding: 3px 15px; /*å­—ä½“èƒŒæ™¯æ¡†çš„å¤§å°*/  border-radius: 5px; /*åœ†è§’*/  .desc-item &#123;    /*color $first-screen-font-color*/    color: rgb(255 250 250) /*å­—ä½“é¢œè‰²*/  &#125;  +keep-tablet() &#123;    font-size $first-screen-font-size * 0.9  &#125;&#125;\n\nä¿®æ”¹äº†ä¹‹åï¼Œé¦–é¡µå±…ä¸­çš„ä»‹ç»æ–‡å­—å°±ä¼šå˜æˆå½“å‰çš„æ¨¡æ ·ï¼ˆä¹‹å‰çš„æ ·å¼æ²¡æœ‰èƒŒæ™¯æ¡†ï¼Œåœ¨è‡ªå®šä¹‰èƒŒæ™¯åå¾ˆå®¹æ˜“å°±çœ‹ä¸æ¸…ï¼‰\n\nåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹4å·æ¡†ï¼Œç»™å®ƒä¹Ÿæ·»åŠ ä¸€ä¸ªèƒ½å¤Ÿè®©å®ƒçœ‹å¾—æ¸…çš„èƒŒæ™¯æ¡†ï¼ˆå›¾æ ‡é¢œè‰²æ²¡æœ‰åŠæ³•ä¿®æ”¹ï¼Œåªèƒ½ä¿®æ”¹èƒŒæ™¯æ¡†é¢œè‰²ï¼‰\n\n4å·æ¡†æ‰€åœ¨é…ç½®æ–‡ä»¶å’Œ3å·æ¡†ç›¸åŒï¼Œæ‰¾åˆ°.s-icon-listå­—æ®µï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹\n.s-icon-list &#123;  background: rgba(220 220 220,0.3); /*å­—ä½“èƒŒæ™¯é¢œè‰²å’Œé€æ˜çš„*/  padding:4px 11px 4px 11px; /*å­—ä½“èƒŒæ™¯æ¡†çš„å¤§å°*/  border-radius: 5px; /*åœ†è§’*/  ...&#125;\n\n8.3 é¡¶éƒ¨å­—ä½“åŠ ç²—\nhexoé¡¶éƒ¨åº•éƒ¨é€æ˜åº¦æ¸å˜\n\nå‚è€ƒè¿™ç¯‡åšå®¢çš„ 1-2, ä¿®æ”¹ keep\\source\\css\\layout\\_partial\\header.styl\næ‰¾åˆ°ä»¥ä¸‹ä»£ç \n.menu-item &#123;\tfloat: left;\tposition: relative;\tmargin-left: 30px;\tfont-size: 1rem;\tcursor: pointer;\tcolor: var(--default-text-color);\t......\n\nåŠ ä¸€æ¡font-weight: boldï¼Œä¿®æ”¹ç»“æœï¼š\n.menu-item &#123;\tfloat: left;\tposition: relative;\tmargin-left: 30px;\tfont-size: 1rem;\tfont-weight: bold;\tcursor: pointer;\tcolor: var(--default-text-color);\t......\n\né¡¶æ å’Œåº•æ é€æ˜åº¦æ¸å˜ä¿®æ”¹å‚è€ƒ 8.5ï¼Œæˆ‘æ›´æ–°è¿‡åçš„æ–¹æ³•å¯ä»¥è®©é¡¶æ å’Œåº•æ çš„é€æ˜åº¦æ¸å˜éšç€æ˜æš—æ¨¡å¼å˜åŒ–\n8.4 æ–‡ç« ä¾§è¾¹æ tocæ›´æ–°äº†ä¹‹åçš„ä¾§è¾¹æ å˜åˆ°äº†é¡µé¢çš„å³è¾¹ï¼Œä¸”é»˜è®¤ä¸‹æ˜¯æ²¡æœ‰èƒŒæ™¯çš„ï¼ˆå› ä¸ºé»˜è®¤åœ¨æ–‡ç« é¡µé¢ä¹Ÿæ˜¯çº¯ç™½çš„ï¼Œæ²¡æœ‰èƒŒæ™¯ä¹Ÿèƒ½çœ‹å¾—æ¸…ï¼‰\nä½†æ˜¯å½“ä¸‹æˆ‘å·²ç»è®¾ç½®äº†å…¨å±€èƒŒæ™¯ï¼Œæ‰€ä»¥å°±éœ€è¦ä¿®æ”¹ä¸€ä¸‹ï¼\nkeepæ›´æ–°3.5.2ä¹‹åçš„ä¾§è¾¹æ é…ç½®æ–‡ä»¶å˜äº†,ç°åœ¨æ˜¯åœ¨keep/source/css/layout/_partial/ä¸­çš„toc.styl\n.post-toc-wrap &#123;  position relative  box-sizing border-box  width 100%  height 100%  overflow-y auto  font-size 0.92rem  font-weight: bold /*å­—ä½“åŠ ç²—*/  border-radius: 5px; /*åœ†è§’*/  ...&#125;\n\næ·»åŠ æˆ‘æ³¨é‡Šäº†çš„è¿™å‡ é¡¹å°±OKäº†ï¼Œå¦‚æœä½ æƒ³è¦æ—§ç‰ˆæ ·å¼ï¼ˆå›ºå®šåœ¨å·¦ä¾§ï¼‰å¯ä»¥å°è¯•å°†positionä¿®æ”¹ä¸ºfixed\n8.5 æ˜æš—æ¨¡å¼é€‚é…ä¿®æ”¹å®ŒèƒŒæ™¯é¢œè‰²å’ŒèƒŒæ™¯å›¾ä¹‹åï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼šå¦‚æœæœ‰ç”¨æˆ·çš„ç”µè„‘æ˜¯æš—è‰²æ¨¡å¼ï¼Œè¿›å…¥åšå®¢çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°å­—å®Œå…¨çœ‹ä¸æ¸…ï¼Œæ•´ä¸ªç•Œé¢éƒ½å¾ˆéš¾çœ‹\n\nè§£å†³åŠæ³•é‚£å°±æ˜¯éœ€è¦è®©æˆ‘ä»¬çš„èƒŒæ™¯é¢œè‰²èƒ½æ ¹æ®æ˜æš—è‡ªåŠ¨åˆ‡æ¢ï¼\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨ hexo-theme-keep\\source\\css\\ ä¸­æ·»åŠ ä¸€ä¸ª my æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å†…éƒ¨æ·»åŠ ä¸€ä¸ª user-style.styl\n// å…¨å±€èƒŒæ™¯çš„çš„é¢œè‰²åˆ‡æ¢.dark-mode&#123;    --content-background-color:#37383fe6;&#125;.light-mode&#123;    --content-background-color:#ffffffe6;&#125;// tocæ å¤§å°.post-toc-wrap .post-toc .nav&#123;  padding:21px&#125;// ä½¿tocèƒ½å¤Ÿæ›´å…·æ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢é¢œè‰².light-mode .post-toc-wrap &#123;    background-color: #ffffffe6;&#125;.dark-mode .post-toc-wrap &#123;    background-color: #37383fe6;&#125;// é¡¶éƒ¨èƒŒæ™¯é€æ˜åº¦æ¸å˜ï¼Œæ˜æš—å˜åŒ–.light-mode .header-wrapper &#123;    background: linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0.4));&#125;.dark-mode .header-wrapper &#123;    background: linear-gradient(to bottom, rgba(30, 30, 30, 1), rgba(30, 30, 30, 0.4));&#125;// åº•éƒ¨èƒŒæ™¯é€æ˜åº¦æ¸å˜ï¼Œæ˜æš—å˜åŒ–.light-mode .page-main-content-bottom &#123;  background: linear-gradient(to top, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.4))/*é€æ˜åº¦è®¾ç½®*/&#125;.dark-mode .page-main-content-bottom &#123;  background: linear-gradient(to top, rgba(30, 30, 30, 0.9), rgba(30, 30, 30, 0.4));&#125;\n\nå†™å®Œåï¼Œåœ¨ css/style.styl ä¸­å¼•ç”¨è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†\n@import &quot;my/user-style.styl&quot;\n\nåˆšå¼€å§‹æˆ‘ç”¨çš„åŠæ³•å¤ªè ¢äº†ï¼Œæµªè´¹äº†å¥½å¤šæ—¶é—´ï¼Œè€Œä¸”ç»å¸¸å¤±æ•ˆã€‚åæ¥è¯·æ•™äº†ä¸€ä½ä¼šå‰ç«¯çš„æœ‹å‹ï¼Œä»–ä¸€ä¸‹å°±å¸®æˆ‘æå®šäº†ï¼Œå‘œå‘œå‘œå‘œğŸ˜«\næŒ‰ç…§ä¸Šé¢ä¿®æ”¹äº†é¡¶æ å’Œåº•æ æ ·å¼åï¼Œè¯·ä¸è¦å¼€å¯keepé…ç½®æ–‡ä»¶ä¸­çš„header_transparentï¼Œå¦åˆ™ä¸¤ä¸ªæ•ˆæœå åŠ ï¼Œä¸»é¡µé¡¶æ ä¼šå˜å¾—æœ‰äº›éš¾çœ‹\n# Set transparent background for header.header_transparent: false  # Option values: true | false\n\n8.6 é¡µè„šè‡ªå®šä¹‰8.6.1 æ·»åŠ ç«™ç‚¹è¿è¡Œæ—¶é—´2023-01-09 æ·»åŠ äº†ç«™ç‚¹è¿è¡Œæ—¶é—´ï¼Œåˆ é™¤äº†hexoä¸»é¢˜çš„æç¤ºã€‚\nè¦æƒ³æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ï¼Œkeepä¸»é¢˜ä¿®æ”¹ keep/layout/_partial/footer.ejsï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç \n&lt;% if (f_upyun) &#123; %&gt;    &lt;div class=&quot;ypyun-info info-item&quot;&gt;        &lt;a target=&quot;_blank&quot; rel=&quot;nofollow&quot; href=&quot;&lt;%= f_upyun %&gt;&quot;&gt;        &lt;%- __(&#x27;footer_upyun&#x27;, &#x27;&lt;img src=&quot;/images/upyun.png&quot; height=&quot;20&quot;&gt;&#x27;) %&gt;        &lt;/a&gt;    &lt;/div&gt;&lt;% &#125; %&gt;\n\nåœ¨ä¸‹æ–¹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œæ¥è‡ªğŸ‘‰hexo+yiliaæ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´\næºç«™çš„ä»£ç æœ‰ç‚¹é—®é¢˜ï¼Œè¯¦è§è¯¥é¡µé¢è¯„è®ºï¼ˆæœ‰äººæŒ‡å‡ºï¼Œä½†ä½œè€…æ²¡æœ‰æ›´æ–°æ­£æ–‡ï¼‰\n&lt;!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ --&gt;        &lt;% if (theme.running_time &amp;&amp; theme.running_time.enable &amp;&amp; theme.running_time.create_time) &#123; %&gt;            &lt;div class=&quot;timerun-info info-item&quot;&gt;                &lt;span id=&quot;timeDate&quot;&gt;è½½å…¥å¤©æ•°...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;è½½å…¥æ—¶åˆ†ç§’...&lt;/span&gt;                &lt;script&gt;                var now = new Date();                function createtime() &#123;                    //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´                    var create_time = &#x27;&lt;%- theme.running_time.create_time %&gt;&#x27;;                    var grt = new Date(create_time);                    now.setTime(now.getTime() + 250);                    days = (now - grt) / 1000 / 60 / 60 / 24;                    dnum = Math.floor(days);                    hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);                    hnum = Math.floor(hours);                    if (String(hnum).length == 1) &#123;                        hnum = &quot;0&quot; + hnum;                    &#125;                    minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);                    mnum = Math.floor(minutes);                    if (String(mnum).length == 1) &#123;                        mnum = &quot;0&quot; + mnum;                    &#125;                    seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);                    snum = Math.round(seconds);                    if (String(snum).length == 1) &#123;                        snum = &quot;0&quot; + snum;                    &#125;                    document.getElementById(&quot;timeDate&quot;).innerHTML = &quot;æœ¬ç«™å·²å®‰å…¨è¿è¡Œ &quot; + dnum + &quot; å¤© &quot;;                    document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; å°æ—¶ &quot; + mnum + &quot; åˆ† &quot; + snum + &quot; ç§’&quot;;                &#125;                setInterval(&quot;createtime()&quot;, 250);                &lt;/script&gt;            &lt;/div&gt;        &lt;% &#125; %&gt;        &lt;!-- æ·»åŠ ç½‘ç«™è¿è¡Œæ—¶é—´ --&gt;\n\nè¿™é‡Œä¿®æ”¹å®Œæ¯•åï¼Œè¿˜éœ€è¦åœ¨keepçš„é…ç½®æ–‡ä»¶é‡Œé¢æ·»åŠ ä¸‹é¢è¿™ä¸€é¡¹ï¼›å¦‚æœåç»­ä¸æƒ³è¦äº†ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºfalseç¦ç”¨è¿™ä¸€æ \n# ç½‘ç«™è¿è¡Œæ—¶é—´ï¼Œæ ¼å¼å½¢å¦‚ï¼šâ€œæœ¬ç«™å·²å®‰å…¨è¿è¡Œ 101 å¤© 12 å°æ—¶ 13 åˆ† 41 ç§’â€# Runing Timerunning_time:Â  enable: trueÂ  create_time: &#x27;01/01/2021 00:00:00&#x27; #æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´\n\nå¦‚æœä½ æƒ³åˆ é™¤hexoçš„æç¤ºï¼Œé‚£å°±æ³¨é‡Šæ‰ footer.ejs çš„è¿™äº›ä»£ç \n&lt;!--æ³¨é‡Šæ‰è¿™é‡Œçš„ä»£ç ï¼Œå°±å¯ä»¥å–æ¶ˆåº•éƒ¨çš„hexoæ ‡è¯†--&gt;&lt;!-- &lt;div class=&quot;theme-info info-item&quot;&gt;    &lt;%- __(&#x27;powered_by&#x27;, &#x27;&lt;a target=&quot;_blank&quot; href=&quot;https://hexo.io&quot;&gt;Hexo&lt;/a&gt;&#x27;) %&gt;&amp;nbsp;|&amp;nbsp;&lt;%- __(&#x27;theme&#x27;) %&gt;&amp;nbsp;&lt;a class=&quot;theme-version&quot; target=&quot;_blank&quot; href=&quot;https://github.com/XPoet/hexo-theme-keep&quot;&gt;Keep v3.5.2&lt;/a&gt;&lt;/div&gt; --&gt;\n\n8.6.2 ä¿®æ”¹é¡µè„šå†…å®¹åˆ°åº•éƒ¨çš„è·ç¦»å¦‚å›¾ï¼Œè¿™ä¸ªé¡µè„šåˆ°åº•éƒ¨çš„è·ç¦»å®åœ¨æœ‰ç‚¹å®½ï¼Œå¼„å¾—èƒŒæ™¯å›¾éƒ½è¢«æŒ¡ä½äº†å¥½å¤§ä¸€éƒ¨åˆ†ï¼›å¯¹äºå¼ºè¿«ç—‡æ¥è¯´ï¼Œè¿™è°å—å¾—äº†ï¼Œæ”¹äº†ï¼\n\næ‰¾åˆ° hexo-theme-keep\\source\\css\\layout\\_partial ä¿®æ”¹ footer.styl çš„ padding-bottom\n.info-container &#123;  padding-bottom 1rem  text-align center&#125;\n\né»˜è®¤æ˜¯ 1remï¼Œè¿™é‡Œæˆ‘ç›´æ¥æ”¹æˆ 0 çœ‹çœ‹æ˜¯ä¸æ˜¯ä¿®æ”¹å¯¹åœ°æ–¹äº†ï¼›hexo s ä¸€çœ‹ï¼Œç›´æ¥é åº•äº†ï¼Œè¯´æ˜æˆ‘ä»¬æ”¹å¯¹åœ°æ–¹äº†ï¼\n\néšåæˆ‘å°±ä¿®æ”¹æˆäº† 0.3remï¼Œè¿˜æ˜¯éœ€è¦ç•™ä¸€ç‚¹è¾¹è·çš„\n8.6.3 ä¿®æ”¹é¡µè„šå­—ä½“é¢œè‰²\né…ç½®äº†èƒŒæ™¯å›¾ä¹‹åï¼Œé¡µè„šçš„å­—ä½“é¢œè‰²ä¸é‚£ä¹ˆå®¹æ˜“çœ‹æ¸…æ¥šï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåŠï¼Ÿæ”¹ä»–ä¸«çš„ï¼\nåœ¨æµè§ˆå™¨æŒ‰F12è¿›å…¥å¼€å‘è€…æ¨¡å¼ï¼Œç”¨æˆªå›¾è½¯ä»¶ï¼ˆqqæˆªå›¾æˆ–è€…sanipasteï¼‰é€‰å–åˆ°è¿™ä¸ªæ¡†ä¸Šï¼Œå°±èƒ½çœ‹åˆ°é¢œè‰²çš„è‰²å€¼\n\nå¤åˆ¶è¯¥è‰²å€¼ï¼Œåœ¨F12æ‰€æ‰“å¼€çš„å¼€å‘è€…é¢æ¿ä¸­çš„é¡µé¢ä¸€æ ï¼Œç²˜è´´æœç´¢ï¼Œå¯ä»¥çœ‹åˆ° --text-color-4 æ­£å¥½å°±å¯¹åº”äº†è¿™ä¸ªé¢œè‰²\n\næ”¹æˆé»‘å¤œæ¨¡å¼ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶é¢œè‰²ä¾æ—§å¯¹åº”çš„æ˜¯ --text-color-4 é‚£ä¹ˆå°±å®é”¤äº†è¯¥å˜é‡å³ä¸ºé¡µè„šå­—ä½“é¢œè‰²çš„å˜é‡\n\nç›´æ¥åœ¨ 8.5 ä¸­é…ç½®å¥½çš„ user-style.styl é‡Œé¢æ·»åŠ ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªé¢œè‰²ï¼›æˆ‘ä»¬çš„éœ€æ±‚æ˜¯è®©é»‘å¤œæ¨¡å¼çš„å­—ä½“æ›´äº®ï¼Œç™½å¤©æ¨¡å¼çš„å­—ä½“æ›´é»‘\n.dark-mode&#123;    --content-background-color:#37383fe6;    --text-color-4:\t#F5F5F5; //é»‘å¤œæ¨¡å¼åº•éƒ¨å­—ä½“é¢œè‰²&#125;.light-mode&#123;    --content-background-color:#ffffffe6;    --text-color-4: #242424; //ç™½å¤©æ¨¡å¼åº•éƒ¨å­—ä½“é¢œè‰²&#125;//...\n\nå¤§åŠŸå‘Šæˆï¼\n\n8.6.4 é¡µè„šæ·»åŠ shields.ioçš„å›¾æ ‡ä¸ºäº†æ›´å¥½çš„å±•ç¤ºä¸€éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µè„šåŠ ä¸Šä¸€äº›å›¾æ ‡ï¼Œå¹¶è®©è¿™äº›å›¾æ ‡å¯ä»¥ç‚¹å‡»è·³è½¬åˆ°æŒ‡å®šé¡µé¢ï¼\n\nhttps://shields.io/\n\nä¿®æ”¹ hexo-theme-keep\\source\\css\\layout\\_partial\\footer.ejsï¼Œåœ¨ä¸­é—´éƒ¨åˆ†æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆç›´æ¥è·Ÿåœ¨ 8.6.1 é…ç½®çš„ç«™ç‚¹è¿è¡Œæ—¶é—´ä¹‹åï¼‰\nå¦‚æœä½ ä¸çŸ¥é“å…·ä½“çš„ä½ç½®ï¼Œè¿˜è¯·ç§»æ­¥æˆ‘çš„Githubä»“åº“æŸ¥çœ‹æ›´æ”¹åçš„æ–‡ä»¶\n&lt;div class=&quot;shields-info info-item&quot;&gt;\t&lt;a href=&quot;link for click&quot; &gt;        &lt;img src=&quot;img url&quot; height=&quot;20px&quot;&gt;     &lt;/a&gt;&lt;/div&gt;\n\nè¿™é‡Œçš„hrefåè·Ÿéšçš„æ˜¯ç‚¹å‡»å›¾æ ‡ä¼šè·³è½¬çš„ç½‘é¡µï¼Œimg srcåé¢è·Ÿéšçš„æ˜¯å›¾ç‰‡çš„urlï¼›\n\næ¯”å¦‚æˆ‘è¿™æ ·é…ç½®äº†ä¹‹åï¼Œé¡µè„šå°±ä¼šå‡ºç°ä¸€ä¸ªè¿™æ ·çš„å›¾æ ‡ï¼Œç”¨äºæ ‡è¯†æˆ‘çš„hexoä¸»é¢˜ç‰ˆæœ¬\n\nç‚¹å‡»è¿™ä¸ªå›¾æ ‡ï¼Œä¼šè·³è½¬åˆ°keep ä¸»é¢˜çš„Githubä»“åº“ï¼›\n\nä¸ºäº†æ–¹ä¾¿é…ç½®ï¼Œå†™æˆä¸‹é¢çš„å¾ªç¯+ifåˆ¤æ–­çš„å½¢å¼ï¼›å¹¶ä¸”å°†å›¾æ ‡çš„æå®šé”å®šä¸º20pxï¼Œé¿å…ä¸åŒå›¾æ ‡å¤§å°å¯¼è‡´ä¸ç»Ÿä¸€ï¼Œå¾ˆéš¾çœ‹\n&lt;!-- æ·»åŠ åº•éƒ¨çš„shields ioå›¾ç‰‡ --&gt;      &lt;% if (theme.shields &amp;&amp; theme.shields.enable) &#123; %&gt;          &lt;div class=&quot;shields-info info-item&quot;&gt;              &lt;% for (var i in theme.shields.data)&#123; %&gt;                  &lt;% if (theme.shields.data[i].img) &#123; %&gt;                      &lt;a href=&quot;&lt;%= theme.shields.data[i].link%&gt;&quot; &gt;                          &lt;img src=&quot;&lt;%= theme.shields.data[i].img%&gt;&quot; height=&quot;20px&quot;&gt;                      &lt;/a&gt;                  &lt;% &#125; %&gt;              &lt;% &#125; %&gt;          &lt;/div&gt;      &lt;% &#125; %&gt;\n\nè¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ–°çš„å›¾æ ‡å’Œurlï¼Œä¸éœ€è¦æ¥è¿™é‡Œä¿®æ”¹æºç äº†ï¼ğŸ˜\nè½¬åˆ°æˆ‘ä»¬keep.ymlé…ç½®æ–‡ä»¶ï¼Œåœ¨æœ€åº•éƒ¨æ·»åŠ å¦‚ä¸‹ä»£ç \n# Add shields.io in footershields:  enable: true # Option values: true | false  data:    hexo:      link: https://github.com/XPoet/hexo-theme-keep      img: https://img.shields.io/badge/hexo-keep%20v3.5.2-brightgreen\n\nè¿™æ ·å°±èƒ½åœ¨åº•éƒ¨æ·»åŠ ä¸€ä¸ªä¸Šé¢æåˆ°è¿‡çš„hexoä¸»é¢˜å›¾æ ‡\nè¦æƒ³è¿½åŠ ï¼Œé‚£å°±ç»§ç»­åœ¨åé¢ä»¥ç›¸åŒæ ¼å¼å¡«å†™\n# Add shields.io in footershields:  enable: true # Option values: true | false  data:    hexo:      link: https://github.com/XPoet/hexo-theme-keep      img: https://img.shields.io/badge/hexo-keep%20v3.5.2-brightgreen    travelling:      link: https://www.travellings.cn/go.html      img: https://img.musnow.top/i/2023/05/647563ddab0fb.gif\n\nä»£ç ä¼šè‡ªåŠ¨åˆ¤æ–­imgæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœimgä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ·»åŠ è¯¥æ¨¡å—ï¼›linké¡¹å¯ä»¥ä¸ºç©ºï¼Œæ­¤æ—¶ç‚¹å‡»å›¾æ ‡ä¸ä¼šè·³è½¬åˆ°å…¶ä»–é¡µé¢ã€‚\næ•ˆæœè¿˜æ˜¯ä¸é”™å“’ï¼æ‚¨å¯ä»¥åœ¨æœ¬é¡µé¡µè„šæŸ¥çœ‹ğŸ˜¶â€ğŸŒ«ï¸\n8.7 ç‚¹å‡»å¤´åƒè·³è½¬å…³äºé¡µé¢è¿™ä¸ªæ“ä½œå°±æ˜¯æŠŠæ²¡æœ‰å¤šå°‘äººçœ‹çš„å…³äºé¡µé¢ç»™è—èµ·æ¥ï¼Œè¿™æ ·å°±ä¸éœ€è¦å ç”¨é¡¶æ çš„ä¸€ä¸ªmenuäº†\nä¿®æ”¹æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨keepä¸»é¢˜ä¸­ï¼Œé»˜è®¤ç‚¹å‡»å¤´åƒçš„æ“ä½œæ˜¯è·³è½¬åˆ°å½“å‰é¡µé¢ï¼ˆå¯ä»¥ç†è§£ä¸ºå•¥éƒ½ä¸åšï¼‰\næˆ‘ä»¬åªéœ€è¦æŠŠé“¾æ¥æ”¹æˆè·³è½¬åˆ°å…³äºé¡µé¢å°±è¡Œäº†ï¼\nthemes/keep/layout/_partial/header.ejs\n\nä¿®æ”¹ä»¥ä¸‹å­—æ®µ\n&lt;% if (s_logo || bi_logo_img) &#123; %&gt;    &lt;a class=&quot;logo-image&quot; href=&quot;/&quot;&gt;        &lt;%- image_tag(s_logo || bi_logo_img) %&gt;    &lt;/a&gt;&lt;% &#125; %&gt;\n\nä¿®æ”¹ä¹‹å\n&lt;% if (s_logo || bi_logo_img) &#123; %&gt;    &lt;a class=&quot;logo-image&quot; href=&quot;/about/&quot;&gt;        &lt;%- image_tag(s_logo || bi_logo_img) %&gt;    &lt;/a&gt;&lt;% &#125; %&gt;\n\nå¦‚æœä½ æƒ³è®©ç‚¹å‡»ç½‘ç«™æ ‡é¢˜ä¹Ÿè·³è½¬åˆ°å…³äºé¡µé¢ï¼Œé‚£å°±æŠŠä¸‹é¢çš„logo-titleä¹Ÿç»™æ”¹æ‰\n&lt;a class=&quot;logo-title&quot; href=&quot;/about/&quot;&gt;   &lt;%= bi_title || config_title || &#x27;Keep Theme&#x27; %&gt;&lt;/a&gt;\n\néšåè¿›å…¥keepçš„configæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰memuä¸­çš„abouté¡µé¢ï¼Œè¿™å¹¶ä¸ä»£è¡¨abouté¡µé¢ä¼šè¢«åˆ é™¤ï¼Œåªæ˜¯ä¸æ˜¾ç¤ºåœ¨menuä¸Š\nmenu:  Home: /  Archives: /archives  Categories: /categories  Tags: /tags  ç•™è¨€: /qa  Links: /links  #About: /about\n\næå®šï¼\næœªå®Œå¾…ç»­â€¦æœŸå¾…åç»­çš„æ›´æ–°ï¼Œäº¦æˆ–è€…æ˜¯æˆ‘èƒ½ä»æŠ˜è…¾ä¸­èµ°å‡ºæ¥ï¼Œåˆ«å†çæäº†â€¦â€¦\nä»Šå¤©çš„å‡çº§éƒ¨ç½²å°±èŠ±äº†å‡ ä¹ä¸€æ•´å¤©çš„æ—¶é—´ğŸ˜¥\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€åšå®¢ã€‘hexoé…ç½®sitemapå’Œç™¾åº¦|å¿…åº”|è°·æ­Œæ”¶å½•","url":"/posts/3595872826/","content":"æœ€è¿‘æ²¡äº‹æ‰¾äº‹ï¼Œåˆçœ‹äº†ä¼šå…³äºåšå®¢ä¸»é¢˜çš„ä¸œè¥¿ï¼Œä¹‹å‰çš„sitemapä¸€ç›´æ²¡æœ‰å¼„ä¸Šå»ï¼Œç°åœ¨æœ‰æ—¶é—´å°±å¼„ä¸€ä¸‹ã€‚\n1.hexoå®‰è£…sitemapæ’ä»¶åœ¨ä½ çš„hexoè·¯å¾„ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£…sitemapç”Ÿæˆæ’ä»¶\nnpm install hexo-generator-baidu-sitemap --savenpm install hexo-generator-sitemap --save\n\nå®æµ‹åœ¨windows11çš„node v16.20.2å’Œnpm  9.8.1ä¸‹å¯ä»¥æ­£å¸¸å®‰è£…ï¼Œä½†æ˜¯å®‰è£…baidu-sitemapæ’ä»¶çš„æ—¶å€™å¯èƒ½ä¼šæœ‰è­¦å‘Šï¼ˆä¸å½±å“ä½¿ç”¨ï¼‰\nå®‰è£…å®Œæ¯•æ’ä»¶åï¼Œåœ¨ä½ çš„hexoé…ç½®æ–‡ä»¶_config.ymlä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼ŒæŒ‡å®šç«™ç‚¹åœ°å›¾çš„æ–‡ä»¶åå­—å³å¯ã€‚\n# ç™¾åº¦å’Œè°·æ­Œçš„sitemap# npm install hexo-generator-baidu-sitemap --save# npm install hexo-generator-sitemap --savebaidusitemap:    path: baidusitemap.xmlsitemap:    path: sitemap.xml\n\nè¯·æ³¨æ„ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯hexoçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶éä¸»é¢˜é…ç½®æ–‡ä»¶ï¼\n2.å¦‚ä½•ä¿®æ”¹hexoä¸»é¢˜ç”Ÿæˆçš„index.htmlæ–‡ä»¶ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç«™ç‚¹å¹³å°éƒ½ä¼šè®©ä½ åœ¨index.htmlçš„&lt;head&gt;é‡Œé¢åŠ ä¸€ä¸ªhtmlè¯­å¥ï¼Œæ¥éªŒè¯ç«™ç‚¹çš„æ‰€æœ‰æƒã€‚æ¯”å›¾ç™¾åº¦çš„éªŒè¯htmlè¯­å¥å¦‚ä¸‹\n&lt;meta name=&quot;baidu-site-verification&quot; content=&quot;éªŒè¯ç &quot; /&gt;\n\néƒ¨åˆ†hexoä¸»é¢˜å¯èƒ½æä¾›äº†è‡ªå®šä¹‰&lt;head&gt;çš„é€‰é¡¹ï¼ˆæ¯”å¦‚butterflyä¸»é¢˜å°±æœ‰ï¼‰\nå¦‚æœä½ ä½¿ç”¨çš„ä¸»é¢˜æ²¡æœ‰æä¾›è‡ªå®šä¹‰&lt;head&gt;ï¼Œå¯ä»¥å°è¯•åœ¨ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹æœç´¢indexæˆ–è€…headå…³é”®å­—ï¼Œæ¥æ‰¾åˆ°å½“å‰ä¸»é¢˜ä½¿ç”¨çš„index.htmlç”Ÿæˆæºæ–‡ä»¶\n\nè¯¥æ–¹æ³•ä»…é€‚ç”¨äºå°†ä¸»é¢˜æ–‡ä»¶ç›´æ¥ä¸‹è½½åˆ°themesæ–‡ä»¶å¤¹ä¸‹çš„æƒ…å†µï¼Œå› ä¸ºå¦‚æœä½ ç”¨çš„æ˜¯npmå®‰è£…çš„ä¸»é¢˜ï¼Œé‚£ä¹ˆä¿®æ”¹çš„ä¸»é¢˜æ–‡ä»¶æ˜¯ä¸ä¼šå¯¹å…¶ä»–åœ°æ–¹çš„éƒ¨ç½²ç”Ÿæ•ˆçš„ï¼Œä¸‹ä¸€æ¬¡æ›´æ–°ä¸»é¢˜è¿˜ä¼šè¦†ç›–æ‰ã€‚\n\næ¯”å¦‚ä¸‹å›¾æ˜¯keepä¸»é¢˜v3.6.1ç‰ˆæœ¬ä¸­çš„head.ejsï¼Œä½ åªéœ€è¦æŠŠæä¾›çš„metaæ ‡ç­¾åŠ åˆ°è¿™é‡Œé¢ï¼Œä¸‹ä¸€æ¬¡éƒ¨ç½²çš„æ—¶å€™çš„index.htmlä¸­å°±ä¼šå¸¦ä¸Šè¿™ä¸ªæ ‡å¤´äº†ã€‚\nthemes\\keep\\layout\\_partial\\head.ejs\n\n\n3.ç«™é•¿å¹³å°æ·»åŠ sitemapç™¾åº¦ç™¾åº¦èµ„æºæœç´¢å¹³å° https://ziyuan.baidu.com/site/index#/\nç™¾åº¦å®åœ¨æ˜¯æ— è¯­ï¼Œä¹‹å‰å®‰è£…äº†hexo-baidu-url-submitæ’ä»¶ï¼Œä¸»åŠ¨è°ƒç”¨ç™¾åº¦apiç»™ä»–æ¨é€urlï¼Œç»“æœå¼„äº†å·²ç»å¿«ä¸€å¹´äº†ï¼Œè¿˜æ²¡æœ‰æ”¶å½•æˆ‘çš„ç«™ç‚¹ã€‚\n\nå®è¯è¯´ï¼Œç™¾åº¦ä¸æ”¶å½•ç«™ç‚¹ï¼Œç½‘ç«™çœ‹çš„äººå°±å¾ˆå°‘ã€‚ç™¾åº¦æˆ‘è‡ªå·±åšå®¢çš„å…³é”®è¯ï¼Œç»“æœæ˜¯ä¸€å †è¢«ç™¾åº¦æ”¶å½•çš„çˆ¬è™«ç«™ç‚¹ç”¨æˆ‘çš„æ–‡ç« èµšæµé‡ã€‚å”‰â€¦â€¦\n\nåœ¨èµ„æºæœç´¢å¹³å°çš„ç«™ç‚¹ç®¡ç†ä¸­æ·»åŠ ä½ çš„ç«™ç‚¹ï¼Œç”¨ç¬¬äºŒç‚¹æåˆ°çš„æ–¹å¼è¿›è¡ŒéªŒè¯\n\næ·»åŠ å®Œæ¯•åï¼Œåœ¨æ™®é€šæ”¶å½•ä¸­å¯ä»¥æ‰¾åˆ°sitemapæäº¤çš„åŒºåŸŸã€‚ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘è¿™é‡Œçš„æäº¤é…é¢æ˜¯0ï¼Œæœç´¢äº†ä¸€ä¸‹ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚\n\nç™¾åº¦èµ„æºå¹³å°æäº¤sitemapæ˜¯å–æ¶ˆäº†è¿˜æ˜¯æˆ‘è¢«é™åˆ¶äº†ï¼Ÿ\næœ‰äººè¯´æ˜¯ç«™ç‚¹è´¨é‡å¤ªä½è¢«ç™¾åº¦å±è”½äº†ï¼Œä½†æ˜¯è¿™ä¸ªæƒ…å†µä¹Ÿæ˜¯å¾ˆå¤šäººéƒ½é‡åˆ°è¿‡çš„ã€‚ä¼°è®¡æ˜¯ç™¾åº¦ç­–ç•¥æ›´æ–°ä»€ä¹ˆçš„ï¼Œä¸å…è®¸ä½ æ·»åŠ äº†å§ï¼\nå¦‚æœä½ å·²ç»æ·»åŠ äº†sitemapï¼Œè¯·ä¸è¦å°†å…¶åˆ é™¤ï¼Œå…å¾—åˆ°æ—¶å€™åˆæ²¡æœ‰åŠæ³•æ·»åŠ äº†ã€‚\nbingbingçš„ç«™é•¿å¹³å°ç›´æ¥æœå°±è¡Œï¼šhttps://www.bing.com/webmasters/about?setlang=zh-cn\n\nå›½å†…è£¸è¿å¯èƒ½ä¸ç¨³å®šï¼Œéœ€è¦ç”¨ç‚¹æ–¹æ³•ã€‚\nä¸è¿‡bingå³ä¾¿ä¸æäº¤sitemapä¹Ÿå’”å’”æ”¶å½•äº†æˆ‘çš„åšå®¢ï¼Œä¸»æ‰“ä¸€ä¸ªä¸»åŠ¨+æ¥è€…ä¸æ‹’ã€‚\n\nè¿›å»ä¹‹åï¼Œç”¨å¾®è½¯è´¦æˆ·ç™»å½•ï¼Œç„¶åç‚¹å‡»æ–°å¢ç«™ç‚¹ï¼Œè¾“å…¥ä½ åšå®¢çš„åŸŸå\n\nbingä¼šè®©ä½ éªŒè¯ç«™ç‚¹æ‰€æœ‰æƒï¼Œæ ¹æ®ä¸‹é¢ä¸‰ç§æ–¹å¼çš„æŒ‡å¼•ï¼Œé€‰æ‹©ä¸€ç§å°±è¡Œäº†ã€‚å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•ä¿®æ”¹hexoçš„æºæ–‡ä»¶ï¼Œä½¿ç”¨CNAMEéªŒè¯æ–¹å¼æ˜¯æœ€ç®€å•çš„ï¼ˆåªè¦ä½ æœ‰åŸŸåæœ‰æƒå°±è¡Œäº†ï¼‰ã€‚\n\nä¸è¿‡ä¼°è®¡æœ‰å¾ˆå¤šè€å“¥éƒ½æ˜¯ç™½å«–çš„github pagesæˆ–è€…netlify&#x2F;vercelçš„äºŒçº§åŸŸåï¼Œåœ¨æ²¡æœ‰åŸŸåæ‰€æœ‰æƒçš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç”¨å‰ä¸¤ç§æ–¹å¼æ¥éªŒè¯ã€‚\n\nXMLæ–‡ä»¶æ–¹å¼ï¼šå°†bingæä¾›çš„XMLæ–‡ä»¶ä¸‹è½½ï¼Œç„¶åæ”¾åˆ°ä½ hexoæºç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹ï¼Œå°±å¯ä»¥äº†ã€‚\nHTML MATEæ ‡è®°éªŒè¯ï¼šéƒ¨åˆ†hexoä¸»é¢˜å¯èƒ½æä¾›äº†è‡ªå®šä¹‰headerçš„é€‰é¡¹ï¼ˆæ¯”å¦‚butterflyä¸»é¢˜å°±æœ‰ï¼‰å…¶ä»–ä¸»é¢˜å¯ä»¥å‚è€ƒä¸Šæ–‡ç¬¬äºŒç‚¹æ“ä½œ\n\nåŸŸåéªŒè¯å®Œæ¯•åï¼Œåœ¨å·¦ä¾§å¯ä»¥æäº¤ç½‘ç«™åœ°å›¾ï¼ˆå³sidemapï¼‰\nç›´æ¥ç‚¹å‡»æŒ‰é’®æäº¤ä½ çš„ç«™ç‚¹åœ°å›¾çš„urlå°±å¯ä»¥äº†ã€‚bingä¼šè‡ªåŠ¨è¿›è¡Œå¤„ç†ï¼Œå¦‚ä¸‹å›¾æˆ‘çš„ç¬¬ä¸€ä¸ªsitemapå·²ç»æˆåŠŸå¤„ç†å‡ºæ¥äº†383ä¸ªé“¾æ¥ï¼Œéå¸¸å®Œç¾ã€‚\n\nè°·æ­Œå®è¯è¯´ï¼Œä¸€ä¸ªçº¯ä¸­æ–‡ä¸”é¢å‘å›½å†…è¯»è€…çš„ç«™ç‚¹ï¼Œåœ¨è°·æ­Œä¸Šé¢æ”¶å½•äº†ä¼°è®¡ä¹Ÿæ²¡å¤šå¤§ç”¨å¤„ï¼Œä½†æ˜¯å¯ä»¥æ²¡ç”¨ï¼Œä½†ä¸èƒ½æ²¡æœ‰ã€‚ä¹Ÿç»™ä»–å¼„ä¸€ä¸‹å§ã€‚\nhttps://search.google.com/search-console/welcome\né¦–å…ˆæ˜¯è¾“å…¥ç«™ç‚¹ç½‘å€ï¼Œå› ä¸ºæˆ‘ä¸éœ€è¦éªŒè¯æ‰€æœ‰ç«™ç‚¹ï¼ŒåªæŠŠåšå®¢æ”¶å½•äº†å°±è¡Œï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰çš„æ˜¯ç½‘å€å‰ç¼€ã€‚è¾“å…¥ç«™ç‚¹çš„æ—¶å€™éœ€è¦æŠŠhttpä¹Ÿå¸¦ä¸Š\n\nè°·æ­Œçš„éªŒè¯æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œçš„æ“ä½œå’Œbingæ˜¯ä¸€æ ·çš„ï¼ŒæŠŠå®ƒå‘ç»™ä½ çš„æ–‡ä»¶ç›´æ¥æ”¾åˆ°hexoçš„sourceè·¯å¾„ä¸‹å°±å¯ä»¥äº†ï¼Œæˆ–è€…é‡‡ç”¨htmlæ ‡ç­¾çš„æ–¹å¼éªŒè¯ã€‚\n\néªŒè¯æˆåŠŸåï¼Œé€‰æ‹©å‰å¾€èµ„æºç•Œé¢ï¼Œå³å‰å¾€å½“å‰ç«™ç‚¹çš„æ§åˆ¶å°ã€‚\nå¦‚æœä½ ä¸å°å¿ƒç‚¹äº†å®Œæˆï¼Œç«™ç‚¹èµ„æºç•Œé¢åœ¨ç«™é•¿å·¥å…·çš„å·¦ä¾§è¾¹æ é‡Œé¢ï¼Œåœ¨é‡Œé¢å¯ä»¥æ‰¾åˆ°ä½ å·²ç»æ·»åŠ äº†çš„ç«™ç‚¹ã€‚\n\nåœ¨å·¦ä¾§é€‰æ‹©ç«™ç‚¹åœ°å›¾ï¼Œç‚¹å‡»æ·»åŠ å³å¯\n\n\næå®šï¼æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºæå‡ºï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€æ•™ç¨‹ã€‘netlifyæˆ–vercelå®Œå…¨è‡ªåŠ¨éƒ¨ç½²hexo","url":"/posts/3433631517/","content":"æ•™ä½ ç”¨netlifyæˆ–vercelå®Œå…¨è‡ªåŠ¨éƒ¨ç½²hexo\n\n\n1.å®Œå…¨è‡ªåŠ¨ï¼Ÿåœ¨ ã€æ•™ç¨‹ã€‘hexoæ­å»ºåšå®¢+keepä¸»é¢˜ç¾åŒ– é‡Œé¢ï¼Œå°±æåˆ°è¿‡ä½¿ç”¨netlifyæˆ–è€…vercelæ¥éƒ¨ç½²hexoã€‚ä½†æ˜¯é‚£ä¸ªæ˜¯éƒ¨ç½²çš„é™æ€é¡µé¢\n\néƒ¨ç½²é™æ€é¡µé¢ä»“åº“ï¼Œç±»ä¼¼github pagesï¼Œéœ€è¦ä¸»åŠ¨hexo dæ‰ä¼šæœ‰æ›´æ–°\nç›´æ¥å¸®ä½ ä»hexoé…ç½®æ–‡ä»¶éƒ¨ç½²ï¼Œåªéœ€è¦git pushæ›´æ–°æºæ–‡ä»¶ä»“åº“\n\nä¹‹å‰çš„åšå®¢ä¸­ï¼Œæåˆ°çš„æ˜¯ç¬¬ä¸€ç§æ–¹å¼ã€‚æœ¬æ–‡ä¸­æ˜¯ç¬¬äºŒç§æ–¹å¼çš„æ•™ç¨‹ã€‚ç›´æ¥ä»é…ç½®æ–‡ä»¶éƒ¨ç½²ï¼Œæœ‰ä»¥ä¸‹å‡ å¤§å¥½å¤„\n\nä»»ä½•åœ°æ–¹ï¼Œåªè¦æœ‰ç½‘ï¼Œä½ éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹githubä»“åº“ä¸­çš„source/_posté‡Œé¢çš„mdæ–‡ä»¶ï¼Œå®ç°æ›´æ–°åšå®¢\nå¦‚æœä½ æ›´æ¢äº†ç”µè„‘ï¼Œæ— é¡»å†ä¸ºäº†hexoé…ç½®node.jsç­‰ç¯å¢ƒã€‚è¿™å¯¹äºä¸å†™å‰ç«¯çš„æˆ‘æ¥è¯´å¾ˆæ£’\n\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹ï¼\n2.githubä»“åº“è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œå…ˆéœ€è¦å‡†å¤‡ä¸€ä¸ªå­˜æ”¾hexoé…ç½®æ–‡ä»¶çš„ä»“åº“ã€‚æœ¬åœ°çš„å¦‚ä¸‹æ–‡ä»¶å¤¹ï¼Œå°±æ˜¯hexoçš„é…ç½®æ–‡ä»¶\n\nå‡†å¤‡é…ç½®ä»“åº“ï¼Œéœ€è¦ä¿è¯node_moduleså’Œpublicæ–‡ä»¶å¤¹ä¸è¦ä¸Šä¼ åˆ°ä»“åº“ä¸­ï¼Œå¦åˆ™åç»­éƒ¨ç½²ä¼šå¤±è´¥ã€‚è¿™æ˜¯æˆ‘çš„gitignoreæ–‡ä»¶ï¼Œä»…ä¾›å‚è€ƒ\n*.deploy_git/db.json*public/.git/node_modules/\n\næœ€ç»ˆä»“åº“çš„æ–‡ä»¶å±‚çº§å¦‚ä¸‹ï¼Œä¸ºäº†é˜²æ­¢æ–‡ç« è¢«è¿‡å®¹æ˜“çš„ç›—èµ°ï¼ˆå› ä¸ºä»“åº“é‡Œé¢æœ‰mdæ–‡ä»¶ï¼Œç›—æ–‡ç« å¤ªå®¹æ˜“äº†ã€‚è™½ç„¶htmlä¹Ÿèƒ½è¢«çˆ¬èµ°ï¼‰ï¼Œæˆ‘å°†å…¶è®¾ç½®ä¸ºç§æœ‰ä»“åº“äº†\n\næœ‰äº†è¿™ä¸ªä»“åº“ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œåç»­æ“ä½œäº†\n3.netlifyå…ˆæ–°å¢ä¸€ä¸ªsiteï¼Œé€‰æ‹©ä»existing projectä¸­import\n\nè¿™éœ€è¦ä½ çš„netlifyè´¦æˆ·æœ‰githubçš„æˆæƒã€‚æˆ‘æ˜¯ç›´æ¥ç”¨githubç™»å½•çš„ï¼Œæ‰€ä»¥å·²ç»æœ‰æˆæƒäº†\n\né€‰æ‹©hexoé…ç½®æ–‡ä»¶çš„ä»“åº“\n\nbuildå‘½ä»¤ä¿®æ”¹ä¸ºnpm run buildï¼Œå…¶ä½™ä¸åŠ¨\n\nåˆ°è¿™é‡Œå°±å¯ä»¥deployäº†ï¼å°±è¿™ä¹ˆç®€å•ï¼è¿‡ä¸€ä¼šæˆåŠŸäº†ä¹‹åï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºä½ çš„ç«™ç‚¹é“¾æ¥äº†ï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œnelifyé»˜è®¤æä¾›çš„äºŒçº§åŸŸåï¼Œå›½å†…ææœ‰å¯èƒ½æ— æ³•è®¿é—®\n\nä¸ç”¨æ‹…å¿ƒï¼Œä½ åªéœ€è¦åœ¨domain settingsé‡Œé¢æ·»åŠ ä½ è‡ªå·±çš„åŸŸåï¼Œè®¿é—®é€Ÿåº¦å°±èƒ½èµ·é£äº†\n4.vercelå’Œnetlifyçš„æ“ä½œå¾ˆåƒï¼Œé€‰æ‹©gitä»“åº“\n\næ¨¡æ¿é€‰æ‹©hexoï¼Œå…¶ä»–è®¾ç½®éƒ½æ²¡å¿…è¦åŠ¨ã€‚å…¶ä¸­buildéœ€è¦è¿›è¡Œçš„å‘½ä»¤æ“ä½œï¼Œå·²ç»åœ¨æˆ‘ä»¬é€‰æ‹©hexoç›®æ ‡çš„æ—¶å€™å°±é€‰æ‹©ä¸Šäº†\n\nvercelä¼šå¼€å§‹éƒ¨ç½²\n\nå¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯éƒ¨ç½²æˆåŠŸäº†ï¼ˆå¦åˆ™è¯·æ£€æŸ¥ä½ çš„ä»“åº“é‡Œé¢hexoé…ç½®æ–‡ä»¶æ˜¯ä¸æ˜¯å°‘äº†æˆ–è€…å¤šäº†ä»€ä¹ˆï¼‰\n\nå®Œç¾ï¼Œä¹Ÿéƒ¨ç½²å¥½äº†ï¼\n\nvercelæä¾›çš„å­åŸŸåä¹Ÿæœ‰æ— æ³•è®¿é—®çš„é—®é¢˜ï¼ŒåŒæ ·çš„ï¼Œç»‘å®šäº†è‡ªå·±çš„åŸŸåå°±èƒ½åœ¨å›½å†…è®¿é—®äº†ã€‚\n\nå¯¹äºæˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå¹³å°éƒ½å¾ˆä¸é”™ï¼Œä½†æ˜¯vercelæœ‰ä¸ªå¾ˆå¤§çš„â€œç¼ºç‚¹â€ï¼Œå°±æ˜¯å¹²äº†ä»€ä¹ˆéƒ½è¦ç»™ä½ é‚®ç®±å‘ä¸ªä¿¡æ¯ï¼Œè¿˜æ‰¾ä¸åˆ°åœ°æ–¹å…³é—­ã€‚å¯¹äºæˆ‘è¿™ç§å¼ºè¿«ç—‡æ¥è¯´å¾ˆä¸å‹å¥½ï¼ï¼ï¼\n\n5.é‡åˆ°çš„é—®é¢˜æ–‡ç« æ›´æ–°æ—¶é—´ä¸å‡†ç¡®ï¼Ÿæˆ‘éƒ¨ç½²ä¹‹åï¼Œé‡åˆ°äº†vercelå’Œnetlifyè‡ªåŠ¨éƒ¨ç½²æ—¶ä¼šå°†æ‰€æœ‰æ–‡ç« çš„æ›´æ–°æ—¶é—´ç»™é‡ç½®ä¸ºæœ€æ–°commitçš„æ—¶é—´çš„é—®é¢˜ã€‚è¯´äººè¯å°±æ˜¯æ‰€æœ‰åšå®¢çš„æ›´æ–°æ—¶é—´éƒ½å˜æˆäº†ä½ æœ€åä¸€æ¬¡æäº¤gitçš„æ—¶é—´\n\nè¿™æ˜¯å› ä¸ºå…¶å®netlifyå’Œvercelçš„è‡ªåŠ¨éƒ¨ç½²ï¼Œéƒ½æ˜¯ä¸»åŠ¨å»git cloneä½ çš„ä»“åº“çš„ï¼Œæ­¤æ—¶å®ƒåˆ›å»ºçš„æ–‡ä»¶å¤¹è‚¯å®šæ˜¯å…¨æ–°çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ‰€æœ‰æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´éƒ½æ˜¯åˆšåˆšcloneçš„æ—¶é—´ï¼Œé»˜è®¤æƒ…å†µä¸‹hexoç”¨çš„å°±æ˜¯æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ¥åšæ›´æ–°æ—¶é—´ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚\n\nè¿™æ ·è‚¯å®šä¸æ˜¯å¾ˆå¥½ï¼Œè¿èƒŒäº†æ›´æ–°æ—¶é—´çš„æœ¬æ„ï¼Œç”¨å¦‚ä¸‹åšå®¢é‡Œé¢çš„åŠæ³•å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼›\nhttps://blog.im0o.top/posts/c6d9de72.html\næˆ‘é‡‡ç”¨çš„æ˜¯åœ¨æ‰€æœ‰mdæ–‡ä»¶çš„front-matteré‡Œé¢æ·»åŠ updatedå­—æ®µçš„æ–¹å¼ï¼ˆè¿™æ˜¯hexoæ”¯æŒçš„æ›´æ–°æ—¶é—´å­—æ®µï¼Œæ ¼å¼å’Œdateå­—æ®µå®Œå…¨ç›¸åŒï¼‰\ndate: 2023-12-08 20:32:14updated: 2023-12-08 21:32:14\n\næˆ‘ä½¿ç”¨äº†åšå®¢ä¸­æåˆ°çš„powershellè„šæœ¬çš„æ–¹å¼æ¥æ‰¹é‡ä¿®æ”¹mdæ–‡ä»¶ï¼Œå®ƒä¼šæ ¹æ®git logä¸­çš„commitè®°å½•æ¥è·å–å½“å‰mdæ–‡ä»¶æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼Œå¹¶å†™å…¥front-matterçš„updatedå­—æ®µä¸­ã€‚\nå°†å¦‚ä¸‹å†…å®¹å†™å…¥ä¸€ä¸ªupdate.ps1æ–‡ä»¶ï¼Œç„¶åç›´æ¥ç”¨windowsçš„powershellä¸­./update.ps1æ‰§è¡Œå®ƒå°±å¯ä»¥äº†\n$fileEncoding = &quot;UTF8&quot;;Function Convert-FromUnixDate ($UnixDate) &#123;    [timezone]::CurrentTimeZone.ToLocalTime(([datetime]&#x27;1/1/1970&#x27;).AddSeconds($UnixDate))&#125;$fileNum = 0;Get-ChildItem -Path &quot;./source/_posts&quot; -recurse *.md | ForEach-Object -Process&#123;    $fileNum = $fileNum + 1;    if ($_ -is [System.IO.FileInfo]) &#123;        $filePath = $_.FullName;        Write-Host(&#x27;&#123;0&#125;. &#123;1&#125;&#x27; -f $fileNum, $filePath);        $lineNum = 0; # yaml æ ¼å¼å æ®è¡Œæ•°        $yamlStartEndNum = 0;        $existUpdated = $false;        $updatedNum = 0;        $newstreamreader = New-Object System.IO.StreamReader($filePath);        while (($readeachline = $newstreamreader.ReadLine()) -ne $null) &#123;            $lineNum = $lineNum + 1;            $temp = $readeachline -replace &quot; &quot;,&quot;&quot; -replace &quot;\\n&quot;,&quot;&quot;            if ($temp -match &quot;---&quot;) &#123;                $yamlStartEndNum = $yamlStartEndNum + 1;            &#125;            if ($readeachline.Contains(&quot;updated:&quot;)) &#123;                $existUpdated = $true;                $updatedNum = $lineNum;            &#125;            if ($yamlStartEndNum -ge 2) &#123;                # yaml end                break;            &#125;        &#125;        $newstreamreader.Dispose();        $filedata = Get-Content -Path $filePath -Encoding $fileEncoding;        $oldYamlStr = $filedata | Select-Object -First $lineNum        # git log format: https://www.cnblogs.com/ckAng/p/11205055.html https://git-scm.com/docs/git-log        # æ­¤æ–‡ä»¶ æœ€åä¸€æ¬¡ commit çš„ Unixæ—¶é—´æˆ³        $dateUpdated = git log -1 --format=&#x27;%ct&#x27; $filepath        $dateUpdated = Convert-FromUnixDate $dateUpdated        $dateUpdated = $dateUpdated.ToString(&quot;yyyy-MM-dd HH:mm:ss&quot;);        $newUpdated = &quot;updated: &quot; + $dateUpdated;        #Write-Host(&quot;newUpdated: &quot; + $newUpdated)        $newYamlStr = &quot;&quot;        # æ³¨æ„: yamlStr æ˜¯ä¸€ä¸ªæ•°ç»„, æ¯ä¸€ä¸ªå…ƒç´ ä¸ºä¸€è¡Œå­—ç¬¦ä¸²        $tempOldYamlStr = $oldYamlStr;        if ($existUpdated) &#123;            #Write-Host($yamlStr[$updatedNum-1])            $oldUpdated = $oldYamlStr[$updatedNum-1];            $tempOldYamlStr[$updatedNum-1] = $oldYamlStr[$updatedNum-1] -replace $oldUpdated,$newUpdated        &#125;else &#123;            # ä¿®æ”¹ yaml ç»“æŸè¡Œ            # TODO: å¥½åƒå–åˆ°çš„è¿™ä¸€è¡Œä¸åŒ…æ‹¬ æœ€åçš„æ¢è¡Œç¬¦, å¯¼è‡´åŠ ä¸€ä¸ª æ¢è¡Œ åè€Œå¤šäº†, ä¸è¿‡ä¸ºäº†ä¿é™©, è¿˜æ˜¯åŠ ä¸Šä¸€ä¸ªæ¢è¡Œ            $tempOldYamlStr[$lineNum-1] = $newUpdated + $([System.Environment]::NewLine) + &quot;---&quot; + $([System.Environment]::NewLine)        &#125;        $newYamlStr = $tempOldYamlStr        Write-Output $newYamlStr        $newFiledata = $newYamlStr + $filedata[$lineNum..$filedata.count]        $newFiledata | Set-Content -Path $filePath -Encoding $fileEncoding    &#125;&#125;#Write-Host(&quot;æ›´æ–° updated å®Œæˆ&quot;);\n\nä½¿ç”¨è¯¥è„šæœ¬è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜é‡åˆ°äº†ä¸€ä¸ªæ–‡ä»¶ç¼–ç å¯¼è‡´çš„é—®é¢˜ï¼Œè®°å½•åœ¨äº†å¦‚ä¸‹issueä¸­ https://github.com/Qexo/Qexo/issues/395\nä¸»è¦é—®é¢˜å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…¶å®å°±æ˜¯mdæ–‡ä»¶ç¼–ç ä¸ä¸€è‡´ï¼Œå¯¼è‡´å‡ºç°äº†ä¸€äº›å¥‡æ€ªçš„çº¢ç‚¹ã€‚ç”¨pythonæ¥æ‰¹é‡ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶ç¼–ç æ ¼å¼å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nThe endæœ‰é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡º~\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€Hexoã€‘åœ¨ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼","url":"/posts/3894841472/","content":"è¯´æ˜å’Œæ’ä»¶å®‰è£…å¦‚é¢˜ï¼Œä¸­è‹±æ–‡æ·»åŠ ç©ºæ ¼æ˜¯æ¯”è¾ƒè§„èŒƒçš„å†™æ³•ï¼Œ ä½†æ˜¯æˆ‘ä¸ªäººå®åœ¨æ˜¯æ‡’ï¼Œæ¯æ¬¡éƒ½è¦è¿™ä¹ˆå¼„å¤ªç´¯äº†ã€‚æƒ³æ‰¾æ‰¾hexoæœ‰æ²¡æœ‰å¯¹åº”çš„æ’ä»¶ï¼Œè¿˜æ˜¯æœ‰çš„\nnpm install hexo-filter-auto-spacing --save\n\nå®‰è£…äº†ä¹‹åï¼Œåœ¨hexoçš„_config.ymlé‡Œé¢æ·»åŠ é…ç½®é¡¹\n# hexo ä¸­è‹±æ–‡ä¹‹é—´è‡ªåŠ¨åŠ ç©ºæ ¼# npm install hexo-filter-auto-spacing --saveauto_spacing:  enable: true\n\néšåhexo så°±èƒ½çœ‹åˆ°æ’ä»¶å¯ç”¨åçš„ç»“æœäº†\n\nè¯·æ³¨æ„ï¼Œè¯¥æ’ä»¶ä»“åº“ https://github.com/hexojs/hexo-filter-auto-spacing å·²ç»è¢«è®¾ç½®ä¸ºå…¬å…±å½’æ¡£ï¼Œä¸”æœ€åä¸€æ¬¡ä»£ç æäº¤æ˜¯2022å¹´6æœˆã€‚\n2023å¹´12æœˆ10æ—¥å®æµ‹è¯¥æ’ä»¶ä¾æ—§æœ‰ç”¨ï¼Œä½†ä¸ä¿è¯hexoæ›´æ–°åä¾æ—§æœ‰æ•ˆã€‚æ…•é›ªä½¿ç”¨çš„hexoå’Œä¸»é¢˜ç‰ˆæœ¬å¦‚ä¸‹ã€‚\nhexo 6.2.0hexo-butterfly 4.9.0\n\næš‚æ—¶æ²¡æœ‰æœåˆ°å…¶ä»–ä»åœ¨æ›´æ–°çš„æ’ä»¶ã€‚\nbuffterflyä¸»é¢˜è‡ªå¸¦é…ç½®æ„Ÿè°¢è¯„è®ºåŒºè€å“¥çš„æé†’ï¼Œbuffterflyä¸»é¢˜å…¶å®è‡ªå¸¦äº†è¿™ä¸ªé…ç½®é¡¹ https://butterfly.js.org/posts/ceeb73f/#Pangu\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¸è½½ä¸Šæ–¹æåˆ°çš„æ’ä»¶ã€‚\nnpm uninstall hexo-filter-auto-spacing --save\n\nåœ¨hexo-butterflyä¸»é¢˜ä¸­pangué…ç½®é¡¹å°±æ˜¯ä¸­è‹±æ–‡ä¹‹é—´æ·»åŠ ç©ºæ ¼çš„é…ç½®ã€‚\nå…¶ä¸­siteæ˜¯å¯¹å…¨ç«™ç”Ÿæ•ˆï¼Œpostæ˜¯åªå¯¹æ–‡ç« ç”Ÿæ•ˆï¼ˆå¯¹å…¶ä»–é¡µé¢ä¸ç”Ÿæ•ˆï¼‰\n# https://github.com/vinta/pangu.js# Insert a space between Chinese character and English character (ä¸­è‹±æ–‡ä¹‹é–“æ·»åŠ ç©ºæ ¼)pangu:  enable: false  field: site # site/post\n\nå°†enableæ”¹æˆtrueå³å¯å¯ç”¨ï¼Œæ•ˆæœä¹Ÿå¾ˆå¥½ï¼Œä¸ä»…ä¸­è‹±æ–‡ä¹‹é—´ä¼šæ·»åŠ ç©ºæ ¼ï¼Œæ•°å­—å’Œä¸­æ–‡ä¹‹é—´ä¹Ÿæ·»åŠ äº†ç©ºæ ¼ã€‚å®Œç¾å•¦ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€Hexoã€‘hexo-butterflyä¸»é¢˜æ·»åŠ éä¸»ç«™æç¤º","url":"/posts/3865345902/","content":"è¯´æ˜å› ä¸ºhexoå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨å¤šä¸ªå¹³å°ä¸Šå…è´¹éƒ¨ç½²ï¼Œä¸ºäº†è®©è‡ªå·±çš„åšå®¢èƒ½uptimeæ›´ä¹…ä¸€æ®µæ—¶é—´ï¼Œå¾ˆå¤šè€å“¥éƒ½å’Œæˆ‘ä¸€æ ·ï¼ŒæŠŠè‡ªå·±çš„hexoåšå®¢åœ¨å¥½å¤šä¸ªå¹³å°ä¸Šéƒ½éƒ¨ç½²äº†ä¸€ä»½ã€‚\nä½†æ˜¯æˆ‘ä¸€ç›´æƒ³è¦ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯åœ¨åˆ«äººè®¿é—®çš„ä¸æ˜¯ä¸»ç«™ç‚¹çš„æ—¶å€™ï¼Œæç¤ºä»–ä»¬ï¼Œå¹¶è®©ä»–ä»¬å¸®ä½ æŸ¥æŸ¥ä¸»ç«™æ˜¯ä¸æ˜¯downäº†ã€‚è¿™ä¸ªåŠŸèƒ½å³æœ¬æ–‡æ ‡é¢˜æ‰€è¿°çš„â€œéä¸»ç«™æé†’â€\njsè„šæœ¬å®ç°å…¶å®å®ç°èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œä¸€ä¸ªjsè„šæœ¬å°±å¯ä»¥å®ç°\ndocument.addEventListener(&quot;DOMContentLoaded&quot;, function () &#123;    // ç›´æ¥å®šä¹‰å…è®¸çš„åŸŸå    const allowedDomain = &quot;blog.musnow.top&quot;;  // æ›¿æ¢ä¸ºä½ çš„ä¸»ç«™åŸŸå    // è·å–å½“å‰é¡µé¢çš„åŸŸå    const currentDomain = window.location.hostname;    // æ£€æŸ¥åŸŸåæ˜¯å¦åŒ¹é…    if (currentDomain !== allowedDomain) &#123;        // åˆ›å»ºæ¨ªå¹…æé†’        const banner = document.createElement(&quot;div&quot;);        banner.id = &quot;domainMismatchBanner&quot;;        // åŠ¨æ€ç”Ÿæˆé“¾æ¥        const link = document.createElement(&quot;a&quot;);        link.href = &quot;https://&quot; + allowedDomain; // æŒ‡å‘ä¸»ç«™çš„é“¾æ¥        link.target = &quot;_blank&quot;;  // åœ¨æ–°çª—å£æˆ–æ ‡ç­¾é¡µä¸­æ‰“å¼€é“¾æ¥        link.style.color = &quot;#b8dbff&quot;;        link.style.textDecoration = &quot;underline&quot;;        link.innerText = &quot;ä¸»ç«™&quot;;        // å°†é“¾æ¥æ·»åŠ åˆ°æ¨ªå¹…å†…å®¹ä¸­        banner.appendChild(document.createTextNode(&quot;æ‚¨å½“å‰è®¿é—®çš„æ˜¯é•œåƒç«™ï¼Œå¦‚æœ&quot;));        banner.appendChild(link);        banner.appendChild(document.createTextNode(&quot;æ— æ³•è®¿é—®ï¼Œè¯·è”ç³»ç«™é•¿ï¼Œæ„Ÿè°¢ï¼&quot;));        // å°†æ¨ªå¹…åº”ç”¨CSSæ ·å¼        banner.style.backgroundColor = &quot;#fb7070&quot;;        banner.style.color = &quot;#fff&quot;;        banner.style.textAlign = &quot;center&quot;;        banner.style.padding = &quot;3px&quot;;        banner.style.position = &quot;fixed&quot;;        banner.style.bottom = &quot;0&quot;;  // å°†topæ”¹ä¸ºbottom        banner.style.left = &quot;0&quot;;        banner.style.width = &quot;100%&quot;;        banner.style.zIndex = &quot;1000&quot;;        // å°†æ¨ªå¹…æ·»åŠ åˆ°body        document.body.appendChild(banner);    &#125;&#125;);\n\næŠŠè¿™ä¸ªè„šæœ¬å¤åˆ¶ï¼Œåœ¨hexoé…ç½®ç›®å½•çš„sourceæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªjsæ–‡ä»¶å¤¹ï¼Œå°†è¯¥è„šæœ¬å‘½åä¸ºdomain_check.jså¹¶æ”¾å…¥æ–‡ä»¶å¤¹ã€‚\néšåä½¿ç”¨hexo-butterflyè‡ªå¸¦çš„headå’Œbottomæ³¨å…¥åŠŸèƒ½æ¥å¼•ç”¨è¿™ä¸ªè„šæœ¬ï¼Œå»ºè®®åœ¨bottomé‡Œé¢å¼•ç”¨ã€‚\n# Inject# Insert the code to head (before &#x27;&lt;/head&gt;&#x27; tag) and the bottom (before &#x27;&lt;/body&gt;&#x27; tag)# æ’å…¥ä»£ç åˆ°å¤´éƒ¨ &lt;/head&gt; ä¹‹å‰ å’Œ åº•éƒ¨ &lt;/body&gt; ä¹‹å‰inject:  head:\t# - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;  bottom:    - &lt;script src=&quot;/js/domain_check.js&quot;&gt;&lt;/script&gt; # æ£€æŸ¥åŸŸåæ˜¯å¦æ­£ç¡®    # - &lt;script src=&quot;xxxx&quot;&gt;&lt;/script&gt;\n\næ•ˆæœæ•ˆæœå¦‚ä¸‹ï¼Œå½“è®¿é—®ä¸»ç«™çš„æ—¶å€™ï¼Œä¸ä¼šæœ‰æç¤ºã€‚å½“è®¿é—®blog1è¿™ä¸ªé•œåƒç«™çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰åº•éƒ¨æ¨ªå¹…æç¤ºã€‚\n\n\næ‰‹æœºä¸Šçš„æ•ˆæœä¹Ÿä¸å·®ï¼Œå¯¹äºä¸€ä¸ªæç¤ºæ¥è¯´è¶³å¤Ÿäº†ã€‚\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo"]},{"title":"ã€Hexoã€‘ä½¿ç”¨cloudflare pagesè‡ªåŠ¨åŒ–éƒ¨ç½²hexo","url":"/posts/1673796161/","content":"æœ¬æ–‡å°†æ•™æ‚¨ä½¿ç”¨cloudflare pagesæ¥ç™½å«–éƒ¨ç½²hexoåšå®¢ã€‚\n1.æ³¨å†Œcloudflareè¿™éƒ¨åˆ†å°±çœç•¥äº†ï¼Œç”¨é‚®ç®±æ³¨å†Œå°±å¯ä»¥äº†\ncloudflare pagesçš„å…è´¹ç‰ˆæœ¬åŠŸèƒ½å¦‚ä¸‹ï¼š\n\nå¹¶å‘æ„å»ºæ•°ï¼š1ï¼ˆå¦‚æœæœ‰å¤šä¸ªpagesï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½è¿›è¡Œå…¶ä¸­ä¸€ä¸ªçš„æ„å»ºï¼‰\næ¯æœˆæ„å»ºæ•°ï¼š500ï¼ˆæ¯ä¸ªæœˆåªèƒ½å¸®ä½ æ„å»º500æ¬¡ï¼‰\nè‡ªå®šä¹‰åŸŸåï¼š100ä¸ª\nä¸€ä¸ªpagesæœ€å¤š20,000ä¸ªæ–‡ä»¶\næœ€å¤§å•ä¸ªæ–‡ä»¶é™åˆ¶ï¼š25MB\næ¯æ—¥é™åˆ¶å‡½æ•°è¯·æ±‚æ•°ï¼š100,000æ¬¡ï¼ˆè¶…å‡ºåä¼šå¤±è´¥ï¼‰\né™æ€æ–‡ä»¶è¯·æ±‚æ¬¡æ•°ï¼šæ— é™\n\nè¿™äº›é™åˆ¶å¯¹äºä¸€ä¸ªè¿‡æ°”ï¼ˆå‹æ ¹æ²¡äººçœ‹ï¼‰çš„ä¸ªäººåšå®¢æ¥è¯´ç»°ç»°æœ‰ä½™äº†ï¼Œè€Œä¸”cloudflareçš„é˜²æŠ¤èƒ½åŠ›åœ¨å“ªé‡Œï¼Œè¢«ç›—åˆ·è®¿é—®é‡çš„å‡ ç‡å¹¶ä¸å¤§ã€‚è€Œä¸”é™æ€æ–‡ä»¶çš„è®¿é—®æ¬¡æ•°æ˜¯æ²¡æœ‰åšä»»ä½•é™åˆ¶çš„ã€‚\n\n2.é…ç½®cloudflare pages\nå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šDeploy a Hexo site Â· Cloudflare Pages docsè¯·æ³¨æ„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­çš„éƒ¨ç½²å‘½ä»¤æœ‰é”™è¯¯ï¼\n\nåœ¨ä½ çš„è´¦æˆ·ä¸»é¡µï¼Œç‚¹å‡»å·¦ä¾§çš„workers &amp; pagesï¼Œéšåç‚¹å‡»é¡µé¢ä¸Šçš„Pages\n\néšåç‚¹å‡»connect to gitï¼Œç»‘å®šä½ çš„GitHubæˆ–è€…Gitlabè´¦æˆ·ã€‚æˆ‘é€‰æ‹©ç»‘å®šGitHubï¼Œè¿™é‡Œçš„ç»‘å®šæ“ä½œå°±ç‚¹å‡ ä¸‹çš„äº‹æƒ…ï¼ˆæˆ‘å¿˜è®°æˆªå›¾äº†ï¼‰\n\nç»‘å®šäº†è´¦æˆ·åå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä½ çš„ä»“åº“ã€‚æˆ‘çš„hexoåœ¨githubä¸Šæœ‰ä¸¤ä¸ªä»“åº“ï¼Œä¸€ä¸ªæ˜¯hexoæºé…ç½®çš„ä»“åº“ï¼ŒåŒ…æ‹¬mdæºæ–‡ä»¶å’Œä¸»é¢˜ç­‰é…ç½®é¡¹ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯github.ioé™æ€æ–‡ä»¶çš„ä»“åº“ï¼Œæ˜¯ä»æœ¬åœ°ä½¿ç”¨hexo då‘½ä»¤æ¨é€åˆ°githubä¸Šçš„ã€‚è¿™é‡Œè¦é€‰æ‹©çš„åº”è¯¥æ˜¯hexoåŸé…ç½®ä»“åº“ï¼Œè¿™æ ·ä½ çš„mdæ–‡ä»¶æœ‰å˜åŠ¨å°±ä¼šè§¦å‘æ›´æ–°ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨æ‰§è¡Œhexo dï¼›\n\né€‰æ‹©äº†ä¹‹åï¼Œä¼šå¼¹å‡ºæ¥è®©ä½ é€‰æ‹©åˆ†æ”¯ã€éƒ¨ç½²å‘½ä»¤ã€å‘å¸ƒé¡µé¢\n\nåˆ†æ”¯ï¼šæ ¹æ®ä½ è‡ªå·±çš„æƒ…å†µé€‰æ‹©\nFramework persetï¼šè¿™é‡Œé¢æ²¡æœ‰hexoï¼Œä¿ç•™ä¸ºNoneå³å¯\néƒ¨ç½²å‘½ä»¤ï¼šnpm run build\nå‘å¸ƒé¡µé¢ï¼špublic\n\né…ç½®å¦‚ä¸‹å›¾æ‰€ç¤º\n\nè¯·æ³¨æ„ï¼Œåœ¨cfçš„å®˜æ–¹æ–‡æ¡£é‡Œé¢ï¼Œæåˆ°éƒ¨ç½²å‘½ä»¤ä½¿ç”¨hexo generateï¼Œè¿™æ˜¯é”™è¯¯çš„ï¼å› ä¸ºè¯¥å‘½ä»¤ä¼šæŠ¥é”™æ‰¾ä¸åˆ°hexoï¼Œæ— æ³•æ­£å¸¸éƒ¨ç½²ï¼å¦‚ä¸‹ä¾¿æ˜¯æˆ‘ä¾ç…§å®˜æ–¹æ–‡æ¡£ä½¿ç”¨äº†hexo generateå‘½ä»¤ä¹‹åçš„é”™è¯¯è¾“å‡ºï¼ŒæŠ¥é”™äº†hexo: not foundã€‚\n11:50:19.363\tSome issues need review, and may require choosing11:50:19.363\ta different dependency.11:50:19.363\t11:50:19.363\tRun `npm audit` for details.11:50:19.383\tExecuting user command: hexo generate11:50:19.391\t/bin/sh: 1: hexo: not found11:50:19.393\tFailed: Error while executing user command. Exited with error code: 12711:50:19.400\tFailed: build command exited with code: 111:50:20.318\tFailed: error occurred while running build command\n\nä½¿ç”¨npm run buildå°±èƒ½æ­£å¸¸éƒ¨ç½²ï¼Œç¨ç­‰å‡ åˆ†é’Ÿä½ å°±èƒ½è·å¾—ä¸€ä¸ªé“¾æ¥ï¼Œåšå®¢å°±éƒ¨ç½²æˆåŠŸäº†ã€‚\n\nç‚¹å‡»Custom domainsæ¥é…ç½®ä½ çš„è‡ªå®šä¹‰åŸŸåï¼Œå› ä¸ºæˆ‘çš„ä¸»åŸŸåå¹¶æ²¡æœ‰åœ¨cloudflareä¸Šä½¿ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå¾—é€‰æ‹©å³ä¾§çš„my dns provideræ¥é…ç½®CNAMEè§£æã€‚\n\nå»ä½ çš„åŸŸåæ§åˆ¶å°æ·»åŠ å¯¹åº”CNAMEå³å¯ï¼Œæ·»åŠ CNAMEè§£æåï¼Œç‚¹å‡»ä¸‹æ–¹çš„check DNS recordséªŒè¯æ˜¯å¦é…ç½®æˆåŠŸã€‚\n\næˆåŠŸäº†ä¹‹åä½ å°±å¯ä»¥ç”¨è‡ªå®šä¹‰åŸŸåæ¥è®¿é—®è¿™ä¸ªcloudflare pagesäº†ï¼Œè€Œä¸”sslè¯ä¹¦ä¹Ÿä¼šè‡ªåŠ¨éƒ¨ç½²ï¼Œä¸éœ€è¦æˆ‘ä»¬åšä»»ä½•é¢å¤–æ“ä½œã€‚\nThe endcfçš„è¿™ä¸ªé…ç½®è¿˜æ˜¯æŒºç®€å•çš„ï¼Œä¸è¿‡æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯å›½å†…cfçš„è®¿é—®é€Ÿåº¦å¾ˆæ‰æ€¥ï¼Œç”šè‡³æœ‰å¯èƒ½æ‰“ä¸å¼€ã€‚ä¸è¿‡hexoé™æ€åšå®¢çš„ä¼˜åŠ¿åœ¨äºæˆ‘ä»¬å¯ä»¥å¼„ä¸€å¤§å †é•œåƒç«™ï¼Œè¿™æ ·ä¸»ç«™æŒ‚äº†ä¹Ÿä¸æ‹…å¿ƒğŸ˜œã€‚\nå¦‚æœä½ æ˜¯æœ¬ç«™çš„è®¿é—®è€…ï¼Œæœ¬ç«™çš„ç«™ç‚¹åˆ†å¸ƒå¦‚ä¸‹ï¼Œåªéœ€è¦åœ¨åŸŸåçš„blogåé¢åŠ ä¸ªæ•°å­—å³å¯ï¼Œè¿˜æ˜¯å¾ˆå¥½è®°ä½çš„ã€‚å¦‚æœå“ªå¤©ä½ å‘ç°ä¸»ç«™æ‰“ä¸å¼€äº†ï¼Œå¯ä»¥è¯•è¯•å…¶ä»–é•œåƒç«™ï¼Œæ€»æœ‰ä¸€ä¸ªèƒ½æ‰“å¼€çš„ã€‚\nblog.msunow.top   ä¸»ç«™ï¼ˆåˆæ‹äº‘CDNï¼‰blog1.musnow.top  netlifyéƒ¨ç½²ï¼ˆä¸»ç«™å›æºç«™ï¼‰blog2.musnow.top  verceléƒ¨ç½²blog3.musnow.top  cloudflare pageséƒ¨ç½²musnows.github.io","categories":["å·®ç”Ÿæ–‡å…·å¤š","åšå®¢å»ºç«™"],"tags":["Hexo","cloudflare"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°ç»„åæ˜¯ä»€ä¹ˆï¼Ÿ","url":"/posts/4234112012/","content":"æ•°ç»„åæ˜¯ä»€ä¹ˆï¼Ÿ@[TOC]\nåœ¨æˆ‘ä»¬æ•²ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸è¦é‡åˆ°ä½¿ç”¨æ•°ç»„çš„åœ°æ–¹\næåˆ°ä½¿ç”¨æ•°ç»„ï¼Œå°±ç¦»ä¸å¼€æ•°ç»„å\nint arr[10] = &#123; 0 &#125;;//arrå°±æ˜¯æ•°ç»„å\n\nåŒæ—¶æˆ‘ä»¬ä¹Ÿç»å¸¸è¦ç”¨åˆ°ä½¿ç”¨sizeofè®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•°çš„æƒ…å†µ\nint sz = sizeof(arr) / sizeof(arr[0]);\n\næ‰€ä»¥äº†è§£æ•°ç»„åçš„æ¦‚å¿µå¯¹äºæˆ‘ä»¬çš„cè¯­è¨€å­¦ä¹ ååˆ†é‡è¦\næ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€å¦‚é¢˜ï¼Œè¿™ä¸ªæ¦‚å¿µåœ¨æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™å°¤ä¸ºé‡è¦\næœ€ç»å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯åœ¨è‡ªå®šä¹‰å‡½æ•°å†…éƒ¨æ±‚ä¸»å‡½æ•°ä¸­arræ•°ç»„çš„å…ƒç´ ä¸ªæ•°\nvoid sp1(int arr[])&#123;\tint sz = sizeof(arr) / sizeof(arr[0]);//æ”¾åœ¨æ­¤å¤„szè®¡ç®—ä¸º1ï¼Œerr    for (i = 0; i &lt; sz; i++)&#125;\n\nè¿™æ—¶ä»ä¸»å‡½æ•°ä¼ è¿‡æ¥çš„arråªæœ‰é¦–å…ƒç´ çš„åœ°å€ï¼Œä½¿ç”¨sizeofè®¡ç®—å¾—åˆ°çš„szåªæœ‰1\nå¯¹åç»­è¦è¿›è¡Œçš„æ“ä½œå¦‚forå¾ªç¯ä¸­çš„ i&lt;szæ¥è¯´æ˜¯æ— æ•ˆçš„\nè¿™æ˜¯å› ä¸ºint arrä¼ åˆ°è‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ˜¯å½¢å‚\nè€Œå½¢å‚arræ˜¯æ— æ³•è®¡ç®—å†…éƒ¨å…ƒç´ å¤§å°çš„\nï¼ˆå…·ä½“çš„ä»£ç ç¤ºä¾‹å°†åœ¨ä¸‹ç¯‡åšå®¢çš„å†’æ³¡æ’åºä¸­å±•ç¤ºï¼‰\nä»£ç ç¤ºä¾‹1 szæˆ‘ä»¬å¯ä»¥ç”¨ç®€å•çš„ä»£ç æ¥äº†è§£ä¸åŒarrçš„ä¹¦å†™æ–¹å¼å¾—åˆ°çš„ç»“æœ\n#include &lt;stdio.h&gt;int main()&#123;    int arr[10] = &#123; 0 &#125;;\tint sz = sizeof(arr);//æ•°ç»„åè¡¨ç¤ºæ•´ä¸ªæ•°ç»„\tprintf(&quot;%d\\n&quot;, sz);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ç»“æœæ˜¯40ï¼Œè¿™è¡¨æ˜æ•°ç»„ä¸­10ä¸ªå…ƒç´ æ‰€å ç”¨çš„å­—èŠ‚æ˜¯40\nåœ¨è¿™ä¸ªä»£ç é‡Œé¢ï¼Œarrè¡¨ç¤ºçš„æ˜¯æ•´ä¸ªæ•°ç»„ï¼Œsizeofæ±‚çš„è‡ªç„¶ä¹Ÿæ˜¯æ•´ä¸ªæ•°ç»„æ‰€å å­—èŠ‚çš„é•¿åº¦\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸²ä»£ç å¾—åˆ°æ•°ç»„å†…çš„å…ƒç´ ä¸ªæ•°ï¼Œç»“æœä¸º10\n#include &lt;stdio.h&gt;int main()&#123;    int arr[10] = &#123; 0 &#125;;    int sz = sizeof(arr) / sizeof(arr[0]);\tprintf(&quot;%d\\n&quot;, sz);\treturn 0;&#125;\n\n\nä»£ç ç¤ºä¾‹2ä¸‹é¢è¿™ä¸²ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‰ç§ä¸åŒçš„æ–¹å¼é”®å…¥arr\n#include &lt;stdio.h&gt;int main()&#123;\tint arr[10] = &#123; 0 &#125;;\tprintf(&quot;%p\\n&quot;, &amp;arr);//1\tprintf(&quot;%p\\n&quot;, arr);//2\tprintf(&quot;%p\\n&quot;, &amp;arr[0]);//3\treturn 0;&#125;\n\n\næˆ‘ä»¬ä¼šå‘ç°ä¸‰æ¬¡æ‰“å°çš„ç»“æœæ˜¯ä¸€æ ·çš„\n\n&amp;arrå–å‡ºçš„æ˜¯æ•´ä¸ªæ•°ç»„çš„åœ°å€\narrä½œä¸ºæ•°ç»„åâ€“&gt;æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n&amp;arr[0]å–å‡ºçš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\nä½†å®é™…ä¸Šä¸‰è€…çš„æœ¬è´¨æ˜¯å®Œå…¨ä¸åŒçš„\nå¯ä»¥ç”¨+1çš„æ–¹å¼æ¥æ‰¾å‡ºå®ƒä»¬çš„ä¸åŒä¹‹å¤„\nint main()&#123;\tint arr[10] = &#123; 0 &#125;;\tprintf(&quot;%p\\n&quot;, &amp;arr);//1  &amp;arrå–å‡ºçš„æ˜¯æ•°ç»„çš„åœ°å€\tprintf(&quot;%p\\n&quot;, &amp;arr+1);\tprintf(&quot;%p\\n&quot;, arr);//2\tprintf(&quot;%p\\n&quot;, arr+1);\treturn 0;&#125;\n\n\nå¯ä»¥çœ‹åˆ°&amp;arr+1ä¹‹åçš„ç»“æœå’Œarr+1çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„\n\n\n\n&amp;arr+1ä¸&amp;arrä¹‹é—´ç›¸å·®40\narr+1ä¸arrä¹‹é—´ç›¸å·®4\n\nè¿™æ˜¯å› ä¸º&amp;arrä»£è¡¨çš„æ•´ä¸ªæ•°ç»„çš„åœ°å€ï¼ŒåŠ 1å³è·³è¿‡äº†æ•´ä¸ªæ•°ç»„\nè€Œarråªä»£è¡¨é¦–å…ƒç´ åœ°å€ï¼ŒåŠ 1è¡¨ç¤ºç¬¬äºŒä½çš„åœ°å€\næ€»ç»“cè¯­è¨€ä¸­æœ‰å¾ˆå¤šè¿™æ ·çš„å°çŸ¥è¯†ç‚¹ï¼Œéœ€è¦æˆ‘ä»¬è®°å½•å¹¶åŠ ä»¥äº†è§£\nåªæœ‰ç†è§£äº†ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨åç»­çš„å­¦ä¹ ã€ä»£ç åˆ›ä½œä¸­å†™å‡ºæ›´å¥½çš„ä»£ç \nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œæ±‚æ±‚äº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å†’æ³¡æ’åº","url":"/posts/1953150880/","content":"å†’æ³¡æ’åº@[TOC]\næ— å†…é¬¼ï¼Œç›´å…¥ä¸»é¢˜ï¼\nå†’æ³¡æ’åºçš„æ€æƒ³æ ¸å¿ƒæ˜¯ï¼šæ¯”è¾ƒä¸¤ä¸¤ç›¸é‚»çš„å…ƒç´ ï¼Œå¹¶ä¸”å¯èƒ½çš„è¯éœ€è¦äº¤æ¢\nè¯´äººè¯å°±æ˜¯\næŠŠåŸæœ¬æ˜¯9ï¼Œ8ï¼Œ7ï¼Œ6ï¼Œ5ï¼Œ4ï¼Œ3ï¼Œ2ï¼Œ1ï¼Œ0çš„æ•°ç»„\nå˜æˆ0 ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6ï¼Œ7ï¼Œ8ï¼Œ9\nä¹Ÿå¯ä»¥æŠŠæ— åºçš„æ•°ç»„æ’åˆ—ä¸ºæœ‰åºï¼ˆä»å°åˆ°å¤§orä»å¤§åˆ°å°ï¼‰\nåŸºæœ¬çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š\n\nåŒæ—¶æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºï¼Œ0Â·9è¿™åä¸ªæ•°å­—ï¼Œé‡æ–°æ’åˆ—å®Œéœ€è¦å¾ªç¯9æ¬¡\nä¹Ÿå°±æ˜¯Nä¸ªæ•°å­—éœ€è¦N-1è¶Ÿçš„æ’åˆ—\nä»£ç å®ç°è¯´å®Œäº†åŸç†ï¼Œè¿˜æ˜¯éœ€è¦æ•²ä»£ç æ¥å®ç°\nâ€œè€é“ä»¬int main return 0èµ°ä¸€æ³¢ï¼â€\n#include&lt;stdio.h&gt;int main()&#123;\tint arr[] = &#123; 9,8,7,6,5,4,3,2,1,0 &#125;ï¼›//æ’åºä¸ºå‡åº - å†’æ³¡æ’åº    int sz = sizeof(arr) / sizeof(arr[0]);\tbubble_sort(arr, sz);//å†’æ³¡æ’åºçš„è‡ªå®šä¹‰å‡½æ•°\treturn 0;&#125;\n\n\nä¸€ç»´æ•°ç»„[]ä¸­çš„å…ƒç´ ä¸ªæ•°å¯ä»¥çœç•¥\n\nSZçš„ä½ç½®é—®é¢˜è¿™é‡Œå¿…é¡»è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯\nsizeofå¿…é¡»åœ¨ä¸»å‡½æ•°ä¸­è®¡ç®—å…ƒç´ ä¸ªæ•°\nå› ä¸ºå¦‚æœåœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—çš„è¯\nvoid bubble_sort(int arr[])&#123;\tint sz = sizeof(arr) / sizeof(arr[0]);//æ”¾åœ¨æ­¤å¤„szè®¡ç®—ä¸º1ï¼Œerr    for (i = 0; i &lt; sz; i++)&#125;\n\nSZè®¡ç®—å‡ºæ¥çš„ç»“æœæ˜¯1\n\narræ•°ç»„åï¼Œä¼ é€çš„æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\narrä½œä¸ºå½¢å‚ï¼Œæ— æ³•è®¡ç®—å†…éƒ¨å…ƒç´ ä¸ªæ•°\nå¯¹åç»­è¦è¿›è¡Œçš„æ“ä½œå¦‚forå¾ªç¯ä¸­çš„ i&lt;szæ¥è¯´è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—çš„szæ˜¯æ— æ•ˆçš„\n\næ›´å…·ä½“çš„åŸå› åœ¨ä¸Šä¸€ç¯‡åšå®¢ã€Šä»€ä¹ˆæ˜¯æ•°ç»„åï¼Ÿã€‹ä¸­æœ‰ä»‹ç»\næ’é™¤æ­¤é—®é¢˜åï¼Œszè®¡ç®—å‡ºçš„å…ƒç´ ä¸ªæ•°å°±æ˜¯æˆ‘ä»¬çš„N\nè¿™é‡Œä»¥iä¸ºè¶Ÿæ•°ï¼Œi&lt;szæŒ‡è¶Ÿæ•°éœ€å°äºå…ƒç´ ä¸ªæ•°\nvoid bubble_sort(int arr[], int sz)//å½¢å‚arræœ¬è´¨æ˜¯æŒ‡é’ˆ&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;        //\t&#125;&#125;\n\næ¥ç€ä¹¦å†™ç¬¬äºŒç¯çš„forå¾ªç¯ï¼Œå³æ¯ä¸€è¶Ÿå†’æ³¡æ’åºçš„æ“ä½œ\n       //ä¸€è¶Ÿå†’æ³¡æ’åºint j = 0;for (j = 0; j &lt; sz - 1 - i; j++)&#123;\tif (arr[j] &gt; arr[j + 1] )\t&#123;              //\t&#125;&#125;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯jä¸szçš„å¤§å°å…³ç³»\næŒ‰ç…§å‰é¢çš„æµç¨‹å›¾ï¼Œæ¯è¿è¡Œä¸€è¶Ÿå†’æ³¡åºåˆ—ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ•°å­—è¢«ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€åé¢\nNä¸ªå…ƒç´ éœ€è¦è¿›è¡ŒN-1æ¬¡å†’æ³¡æ’åºï¼ŒåŒæ—¶ç»è¿‡ä¸€è¶Ÿåï¼Œæ–°çš„æœ€åä¸€ä¸ªå…ƒç´ æ— éœ€é‡æ–°æ¯”å¯¹æ’åº\næ‰€ä»¥ j&lt;sz-1-i \næ¯”è¾ƒ&amp;äº¤æ¢å› ä¸ºint arrä¼ å…¥çš„æ˜¯æŒ‡é’ˆå˜é‡ï¼Œå¦‚æœæƒ³è¦è‡ªå®šä¹‰å‡½æ•°å½±å“å‡½æ•°å¤–çš„å†…å®¹ï¼Œä¹Ÿå¿…é¡»ä½¿ç”¨æŒ‡é’ˆå˜é‡\n          //äº¤æ¢int tmp = arr[j];arr[j] = arr[j + 1];arr[j + 1] = tmp;\n\nå®é™…è¿›è¡Œä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„æ¯”è¾ƒå’Œäº¤æ¢çš„æ˜¯ä¸Šè¿°ä»£ç \ntmpè¿™ä¸ªç©ºç›’å­ä¹Ÿæ˜¯æˆ‘ä»¬çš„è€æœ‹å‹äº†\næ€»ç»“èµ·æ¥å®Œæ•´çš„è‡ªå®šä¹‰å‡½æ•°å¦‚ä¸‹\nvoid bubble_sort(int arr[], int sz)//å› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­è®¡ç®—szï¼Œè¿™é‡Œéœ€è¦åŠ ä¸Šint sz&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\t//ä¸€è¶Ÿå†’æ³¡æ’åº\t\tint j = 0;\t\tfor (j = 0; j &lt; sz - 1 - i; j++)\t\t&#123;\t\t\tif (arr[j] &gt; arr[j + 1] )\t\t\t&#123;\t\t\t\t//äº¤æ¢\t\t\t\tint tmp = arr[j];\t\t\t\tarr[j] = arr[j + 1];\t\t\t\tarr[j + 1] = tmp;\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\næ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç”¨F10çš„ç›‘è§†å™¨æŸ¥çœ‹ä»£ç è¿è¡Œæƒ…å†µ\n\narræ•°ç»„åˆå§‹åŒ–å®Œæˆï¼Œszè®¡ç®—å¾—å‡ºä¸º10\nç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œarræ•°ç»„ä¸­çš„å†…å®¹æˆåŠŸè¢«æ’åˆ—\n\nå†’æ³¡æ’åºå®Œæˆï¼\nç»“è¯­å†’æ³¡æ’åºæ˜¯å¯¹å¾ªç¯è¯­å¥ã€è‡ªå®šä¹‰å‡½æ•°ã€ä¸‹æ ‡ä»¥åŠæ•°ç»„çš„ç»¼åˆè¿ç”¨\näº†è§£å®ƒçš„åŸç†æœ‰åŠ©äºæˆ‘ä»¬å†™å‡ºæ›´ä¸ºå¤æ‚çš„æ’åˆ—ç»„åˆä»£ç \nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢äº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç®—æ³•","æ’åº"]},{"title":"ã€Cè¯­è¨€ã€‘sizeofæ“ä½œç¬¦","url":"/posts/4048071056/","content":"@[toc]\nsizeofæ“ä½œç¬¦ä¸Šç¯‡åšå®¢æåˆ°äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹  ã€é“¾æ¥ã€‘\n\nsizeofæ“ä½œç¬¦æ‹¬å·å†…çš„è¡¨è¾¾å¼æ˜¯ä¸ä¼šçœŸæ­£è®¡ç®—çš„\n\nè¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹sizeofçš„åŸºæœ¬ç”¨æ³•\nåŸºæœ¬ç”¨æ³•#include&lt;stdio.h&gt;int main()&#123;\tint a=10;\tprintf(&quot;%d\\n&quot;,sizeof(a));\tprintf(&quot;%d\\n&quot;,sizeof(int));\t\tprintf(&quot;%d\\n&quot;,sizeof a);\treturn 0; &#125; \n\næ‰“å°ç»“æœä¸º3ä¸ª4\nä½†å½“æˆ‘ä»¬ä»¥è¿™ç§æ–¹å¼ä¹¦å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™\nprintf(&quot;%d\\n&quot;,sizeof int);\n\n\n\nåœ¨ä½¿ç”¨sizeofçš„æ—¶å€™ï¼Œå˜é‡açš„æ‹¬å·å¯ä»¥çœç•¥\n\nä½†ç›´æ¥è®¡ç®—intçš„æ—¶å€™ï¼Œæ‹¬å·ä¸èƒ½çœç•¥\n\n\n\n è¿™è¯´æ˜sizeofæ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè€Œä¸æ˜¯å‡½æ•°\n\nint arr[10]=&#123;0&#125;;printf(&quot;%d\\n&quot;,sizeof  (arr));printf(&quot;%d\\n&quot;,sizeof  (int[10]));\n\nè¿™ä¸¤å¥ä»£ç æ‰“å°çš„éƒ½æ˜¯40ï¼Œå…¶ä¸­int[10]æ˜¯arræ•°ç»„çš„ç±»å‹\n\n å†·çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨9[arr]æ¥è®¿é—®æ•°ç»„å…ƒç´ \n ä½†è¿™ä¹ˆåšä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯é‡‡å–arr[9]çš„å½¢å¼æ›´å¥½\n\nint arr[10]=&#123;0&#125;;arr[9]=1;printf(&quot;%d\\n&quot;,9[arr]);\n\n\n\nsizeofå’Œå‡½æ•°ä¼ å‚å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n#include&lt;stdio.h&gt;void test1(int arr[])&#123;\tprintf(&quot;%d\\n&quot;,sizeof(arr));//4&#125;void test2(char ch[])&#123;\tprintf(&quot;%d\\n&quot;,sizeof(ch));//4&#125;int main()&#123;\tint arr[10]=&#123;0&#125;;\tchar ch[10]=&#123;0&#125;;\tprintf(&quot;%d\\n&quot;,sizeof(arr));//40\tprintf(&quot;%d\\n&quot;,sizeof(ch));//10\ttest1 (arr);\ttest2 (ch);\t\t\treturn 0; &#125; \n\n32ä½å¹³å°ï¼Œæ‰“å°ç»“æœå¦‚ä¸‹\n\n\nVSç¼–è¯‘å™¨ä¸‹\nx86â€“32ä½â€“int 4\nx64â€“64ä½â€“int 8\n\nä¸ºä»€ä¹ˆåœ¨mainå‡½æ•°é‡Œé¢æ‰“å°çš„æ˜¯40å’Œ10\nåˆ°äº†å‡½æ•°é‡Œé¢å°±åªæœ‰4äº†å‘¢ï¼Ÿ\næ•°ç»„ä¼ å‚æ•°ç»„åœ¨ä¼ å‚çš„æ—¶å€™ï¼Œä¼ è¿‡å»çš„åªæ˜¯é¦–å…ƒç´ çš„åœ°å€\n\næ•°ç»„åä»£ç æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\né—®ï¼šä¸ºä»€ä¹ˆå­—ç¬¦å˜é‡åªå ä¸€ä¸ªå­—èŠ‚ï¼Œä½†è¿™é‡Œæ‰“å°çš„æ˜¯4å‘¢ï¼Ÿ\nç­”ï¼šè¿™é‡Œä¼ å…¥çš„æ˜¯charæ•°ç»„çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå˜é‡éƒ½æ˜¯4ä¸ªå­—èŠ‚\n\nsiezofå’Œè¡¨è¾¾å¼ç°åœ¨å°±åˆ°æˆ‘ä»¬çš„é‡ç‚¹äº†\nä¸ºä»€ä¹ˆsizeofæ‹¬å·é‡Œçš„è¡¨è¾¾å¼æ²¡æœ‰çœŸæ­£åœ°è¿ç®—ï¼Ÿ\nshort s=5;int a=10;printf(&quot;%d\\n&quot;,siezof(s=a+2));printf(&quot;%d\\n&quot;,s);\n\n\nè¿™é‡Œå°±ç‰µæ‰¯åˆ°Cè¯­è¨€ç¨‹åºè¿è¡Œçš„å‡ ä¸ªæ­¥éª¤äº†\n\nç¼–è¯‘â€“test.c\né“¾æ¥\nè¿è¡Œâ€“test.exe\n\nç®€å•åœ°è¯´ï¼Œåªæœ‰åœ¨é“¾æ¥ä¹‹åè¿è¡Œçš„ä»£ç ï¼Œæ‰ä¼šçœŸæ­£ç»™aèµ‹å€¼\nè€Œsizeofæ‹¬å·ä¸­çš„è¯­å¥ï¼Œæ˜¯åœ¨ç¼–è¯‘ä¸­è¿è¡Œçš„\nç¨‹åºä¼šå…ˆè®¡ç®—è¿™ä¸ªè¡¨è¾¾å¼ï¼Œæ¨æ–­å‡ºå®ƒçš„é•¿åº¦ï¼Œå†è¿”å›ç»™printfæ‰“å°\næ‰€ä»¥ï¼Œsizeofæ‹¬å·å†…çš„è¡¨è¾¾å¼ä¸ä¼šçœŸçš„ç»™Sèµ‹å€¼\nä½ æ˜ç™½äº†å—ï¼Ÿ\n\nsizeofå’Œstrlençš„åŒºåˆ«å†æ±‚å­—ç¬¦ä¸²çš„é•¿åº¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨sizeofï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨strlen\nè¿™ä¸¤ä¸ªçš„ä¸»è¦åŒºåˆ«å¦‚ä¸‹\n\nsizeofä¼šè®¡ç®—æ•´ä¸ªæ•°ç»„å†…å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²æš—è—çš„â€™\\0â€™\nstrlenè®¡ç®—é•¿åº¦çš„æ—¶å€™ï¼Œé‡åˆ°â€™\\0â€™ååœæ­¢\n\nåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„sizeofåœ¨è®¡ç®—é•¿åº¦çš„æ—¶å€™æ˜¯ä¼šæ¯”strlenå¤šç®—ä¸€ä¸ªçš„\næ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©sizeofæˆ–è€…strlen\n\nç»“è¯­è¿™ç¯‡åšå®¢è¿Ÿåˆ°å¤ªä¹…äº†ï¼Œæœ€è¿‘å®åœ¨æ˜¯æœ‰ç‚¹å¿™\nå¦‚æœæœ‰é”™è¯¯ï¼Œè¿˜è¯·å„ä½dalaoæŒ‡å‡ºï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\né«˜æ•°å¤ªéš¾äº†å•Šå•Šå•Šå•Šå•Šï¼ï¼ˆå“­å”§å”§ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•äº§ç”Ÿæ•°ç»„æœ€å¤§å€¼","url":"/posts/3186646925/","content":"äº§ç”Ÿæ•°ç»„æœ€å¤§å€¼@[TOC]\nä»Šæ—¥é£å’Œæ—¥ä¸½ï¼Œæ˜¯ä¸ªå†™ï¼ˆæ°´ ï¼‰åšå®¢çš„ç»ä½³æ—¶æœº\nå’Œå¤§å®¶åˆ†äº«ä¸€ä¸²Cè¯­è¨€ä¸­äº§ç”Ÿæ•°ç»„ä¸­çš„å…ƒç´ çš„æœ€å¤§å€¼çš„ä»£ç \nå®ç°æ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°forå¾ªç¯å’Œifè¯­å¥\n#include &lt;stdio.h&gt;int main()&#123;\tint arr[] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;//æ•°ç»„åˆå§‹åŒ–\tint max = 0;//è®¾ç½®ä¸€ä¸ªæœ€å¤§å€¼\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);//è®¡ç®—æ•°ç»„å…ƒç´ ä¸ªæ•°\tfor (i = 0; i &lt; sz; i++)    &#123;\t\tif (arr[i] &gt; max)\t\t&#123;\t\t\tmax = arr[i];\t\t&#125;\t&#125;\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nå½“æˆ‘ä»¬è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯10\n\nçœ‹æ ·å­æˆ‘ä»¬æˆåŠŸè¾“å‡ºäº†æ•°ç»„çš„æœ€å¤§å€¼ï¼Œè¿™ä¸²ä»£ç å·²ç»å®Œæˆäº†ï¼Œå¯¹ä¸å¯¹ï¼Ÿ\nä½†å®é™…ä¸Šè¿™ä¸²ä»£ç æ˜¯æœ‰é—®é¢˜çš„\nå…ˆåˆ«å¾€ä¸‹æ»‘ï¼Œæƒ³æƒ³å®ƒçš„é—®é¢˜å‡ºåœ¨é‚£é‡Œäº†å‘¢ï¼Ÿ\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\næ­£è´Ÿæ€§å½“æˆ‘ä»¬æŠŠæ•°ç»„é‡Œé¢çš„æ•°å­—å…¨éƒ¨æ”¹æˆè´Ÿæ•°çš„æ—¶å€™\nä½ ä¼šå‘ç°è¾“å‡ºçš„ç»“æœç­‰äº0ï¼Œå¹¶ä¸æ˜¯æ•°ç»„å†…çš„æœ€å¤§å€¼-1\n\nå‡ºç°è¿™ä¸ªæƒ…å†µçš„åŸç†ååˆ†ç®€å•ï¼Œæˆ‘ä»¬è®¾å®šçš„int max &#x3D; 0ï¼Œè€Œ0&gt;-1ï¼Œè¾“å‡ºçš„ç»“æœä¹Ÿè‡ªç„¶æ˜¯0äº†\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ä¹Ÿéå¸¸ç®€å•\nå¦‚æœæˆ‘ä»¬æ•°ç»„å†…çš„æ•°å…¨éƒ¨å°äº0ï¼Œé‚£æˆ‘ä»¬å°±è®¾å®šMAX&#x3D;æ•°ç»„å†…çš„æŸä¸ªæ•°å­—ï¼Œç„¶åå†è¿›è¡Œæ¯”è¾ƒï¼Œè¾“å‡ºæœ€å¤§å€¼ä¸å°±è¡Œäº†ï¼Ÿ\nint main()&#123;\tint arr[] = &#123; -1,-2,-3,-4,-5,-6,-7,-8,-9,-10 &#125;;\tint max = arr[0];//arr[0]å¯¹åº”æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ•°çš„ä¸‹æ ‡\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; max)\t\t&#123;\t\t\tmax = arr[i];\t\t&#125;\t&#125;\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\n\né¿å…ä¸åŒæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸åŒï¼Œmaxåº”è¯¥è®¾ç½®ä¸ºarr[0]è€Œä¸æ˜¯arr[3]æˆ–è€…arr[5]\n\nè¿™æ—¶å€™å†æ¬¡è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœå·²ç»æ­£ç¡®çš„æ˜¾ç¤ºä¸º-1äº†\n\nè¿›é˜¶ç©æ³•ä»¥è‡ªå®šä¹‰å‡½æ•°çš„å½¢å¼å®ç°æ­¤åŠŸèƒ½ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜\né‚£å°±æ˜¯æˆ‘åšå®¢ä¹‹å‰å†™åˆ°è¿‡çš„ ã€Šä¼ å€è°ƒç”¨å’Œä¼ å€¼è°ƒç”¨ã€‹\nå…ˆæŠŠæˆ‘ä»¬çš„ä¸»å‡½æ•°æ”¹é€ ä¸€ç•ª\nint main()&#123;    int arr[] =&#123; -1,-2,-3,-4,-5,-6,-7,-8,-9,-10 &#125;;\tint max = arr[0];\tint sz = sizeof(arr) / sizeof(arr[0]);\tsp(arr, sz,&amp;max);\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nå…¶ä¸­spå°±æ˜¯æˆ‘ä»¬è¦ç¼–å†™çš„è‡ªå®šä¹‰å‡½æ•°\n\nå› ä¸ºè‡ªå®šä¹‰å‡½æ•°ä¸­çš„æ­¥éª¤éœ€è¦æ”¹å˜æˆ‘ä»¬ä¸»å‡½æ•°ä¸­çš„maxï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨å–åœ°å€ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä¼ å€è°ƒç”¨\n\nsp(arr, sz,&amp;max);//&amp;maxæ˜¯ä¼ å€è°ƒç”¨\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬çš„è‡ªå®šä¹‰å‡½æ•°ä¹Ÿéœ€è¦ä½¿ç”¨int*æ¥æ¥æ”¶maxçš„åœ°å€\nvoid sp(int arr[], int sz,int* pm)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; *pm)\t\t&#123;\t\t\t*pm = arr[i];\t\t&#125;\t&#125;&#125;\n\nè¿è¡Œç»“æœæ­£ç¡®\n\nç»“è¯­åœ¨åˆ¶ä½œè‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¼ å€è°ƒç”¨å’Œä¼ å€¼è°ƒç”¨çš„åŒºåˆ«ã€‚å…·ä½“ä»‹ç»å‚è€ƒæˆ‘ä¹‹å‰çš„åšå®¢ [é“¾æ¥]\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œç‚¹ä¸ªèµå†èµ°å‘—ï¼\nï¼ˆæ²¡æœ‰å¸®åŠ©ä¹Ÿå¯ä»¥ç‚¹ç‚¹èµ~ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ","url":"/posts/134934297/","content":"å˜é‡çš„ä½œç”¨åŸŸå’Œç”Ÿå‘½å‘¨æœŸ[TOC]\n\n1.å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡å®šä¹‰åœ¨ä»£ç å—å¤–éƒ¨çš„æ˜¯å…¨å±€å˜é‡\nå®šä¹‰åœ¨ä»£ç å—å†…éƒ¨çš„æ˜¯å±€éƒ¨å˜é‡\nä»€ä¹ˆæ˜¯ä»£ç å—ï¼Ÿ\n//è¿™æ˜¯ä»£ç å¿«å¤–éƒ¨int main()&#123;//è¿™æ˜¯ä»£ç å—å†…éƒ¨&#125;\n\nå®é™…ä¸Šç”¨int mainæ¥æ¼”ç¤ºæ˜¯ä¸å¤ªå¯¹çš„,å®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬å®šä¹‰å˜é‡æ˜¯åœ¨int mainå†…éƒ¨å®šä¹‰çš„\nä¸‹é¢è¿™ä¸ªä¾‹å­æ›´åŠ æ¸…æ™°æ˜äº†\nint main()&#123;\tint i = 0;//è¿™æ˜¯ä»£ç å—å¤–éƒ¨-iå…¨å±€å˜é‡\tfor(i=0;i&lt;10;i++)\t&#123;//ä»£ç å—å¼€å§‹\t\tint j=0;//è¿™æ˜¯ä»£ç å—å†…éƒ¨-jå±€éƒ¨å˜é‡        for(j=0;j&lt;10;j++)\t&#125;//ä»£ç å—ç»“æŸ&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼š\nåŒä¸€ä¸ªå˜é‡aå¯ä»¥åœ¨å…¨å±€ï¼Œå±€éƒ¨å˜é‡ä¸­é—´åŒæ—¶ä½¿ç”¨ï¼Œå±€éƒ¨å˜é‡ä¼˜å…ˆ\n\nè¿™é‡Œæ˜¯æŒ‡åŒæ—¶å­˜åœ¨ï¼ŒåŒæ—¶ä½¿ç”¨ï¼Œä½†ä¸èƒ½åŒæ—¶å®šä¹‰\nåœ¨å±€éƒ¨çš„ä»£ç å—ä¸­é‡æ–°å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ˜¯é”™è¯¯çš„\n\nä¸‹é¢è¿™ç§å½¢å¼å°±æ˜¯ åŒæ—¶ä½¿ç”¨ä¸€ä¸ªå˜é‡\nint main()&#123;    int sz = 8;\tint i = 0;\tif(i&lt;sz)\t&#123;\t\ti=1;\t&#125;&#125;\n\n\nåœ¨æˆ‘ä»¬å®šä¹‰å˜é‡çš„æ—¶å€™ï¼Œå˜é‡çš„åå­—ä¸èƒ½ç›¸åŒ\n\nåŒæ—¶å˜é‡çš„åå­—ä¹Ÿä¸åº”å’Œåº“å‡½æ•°åç›¸åŒ\n\n\nç®€å•çš„è¯´å°±æ˜¯å˜é‡ä¸è¦é‡å¤ï¼Œä¹Ÿåˆ«å’Œåº“å‡½æ•°å†²çª\n2.å˜é‡çš„ä½œç”¨åŸŸå˜é‡çš„ä½œç”¨åŸŸ-&gt;å˜é‡çš„ç”Ÿæ•ˆåŒºåŸŸ\n\nå±€éƒ¨å˜é‡åªåœ¨å®ƒè‡ªå·±çš„ä»£ç å—ä¸­ç”Ÿæ•ˆ\nå…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªä»£ç \n\næ³¨ï¼šåœ¨VSä¸­å…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹\nä½œç”¨åŸŸçš„è§„å®šäº†å˜é‡ç”Ÿæ•ˆåŒºåŸŸ\nå¦‚æœä½ åœ¨å±€éƒ¨å˜é‡çš„ä»£ç å—å¤–éƒ¨ä½¿ç”¨è¿™ä¸ªå±€éƒ¨å˜é‡\nè¿™æ ·æ˜¯æ— æ•ˆçš„ï¼Œæ— æ³•ä½¿ç”¨\n2-1.å£°åå¤–éƒ¨å˜é‡çš„æ–¹æ³•åœ¨vsä¸­å…¨å±€å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªå·¥ç¨‹\nä½†æ˜¯å¦‚æœæºæ–‡ä»¶ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦æ‰“ä¸€ä¸²å£°æ˜æ¥åº”ç”¨å·¥ç¨‹æ–‡ä»¶ä¸­å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶çš„å…¨å±€å˜é‡\nextern int a\n\nä»¥ä¸‹æ˜¯å£°åå˜é‡å’Œå®šä¹‰å˜é‡çš„ä»£ç ç¤ºä¾‹\nã€€ã€€extern int a;//å£°æ˜å…¨å±€å˜é‡aã€€ã€€int a; //å®šä¹‰å…¨å±€å˜é‡aã€€ã€€extern int a =0 ;//å®šä¹‰å…¨å±€å˜é‡a å¹¶ç»™åˆå§‹å€¼ã€€ã€€int a =0;//å®šä¹‰å…¨å±€å˜é‡a,å¹¶ç»™åˆå§‹å€¼\n\n3.å˜é‡çš„ç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸè¿™ä¸ªæ¦‚å¿µå’Œä½œç”¨åŸŸååˆ†ç›¸ä¼¼\n\nå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä»è¿›å…¥â€{â€œå¼€å§‹ï¼Œç¦»å¼€â€}â€ç»“æŸ\nå…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ•´ä¸ªç¨‹åºï¼ˆVSé¡¹ç›®ï¼‰\n\n4. å±€éƒ¨å˜é‡&amp;è‡ªåŠ¨å˜é‡å±€éƒ¨å˜é‡åˆç§°è‡ªåŠ¨å˜é‡\nauto int a = 0;\n\nå®é™…ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯çœç•¥autoçš„\n\nä»¥ä¸Šå°±æ˜¯Cè¯­è¨€ä¸­æœ‰å…³å˜é‡çš„ä¸€äº›æ¦‚å¿µï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨","url":"/posts/2967424184/","content":"ä»Šå¤©å­¦ä¹ Cè¯­è¨€çš„æ—¶å€™ï¼Œæ¥è§¦åˆ°äº†ä¸¤ä¸ªå…¨æ–°çš„æ¦‚å¿µè¯ä¸å¤šè¯´ï¼Œå°±æ­¤å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹cè¯­è¨€ä¸­å‡½æ•°çš„ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ï¼Œå¸Œæœ›æœ‰æ‰€å¸®åŠ©æ¬¢è¿dalaoæ— æƒ…æŒ‡æ­£ï¼\n\n\nå¼•å­ : äº¤æ¢å‡½æ•°æˆ‘ä»¬å…ˆæ¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°\nç›®çš„æ˜¯äº¤æ¢aå’Œb\n#include&lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint b = 20;\tint tmp = 0;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);//æ˜¾ç¤ºaå’Œbæœ€åˆçš„å€¼\ttmp = a;\ta = b;\tb = tmp;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);//æŸ¥çœ‹äº¤æ¢ç»“æœ\treturn 0;&#125;\n\nè¿è¡Œçš„ç»“æœå¦‚å›¾\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ˜¯åœ¨ä¸»å‡½æ•°mainé‡Œé¢ç›´æ¥è¿›è¡Œçš„äº¤æ¢ç¨‹åºï¼Œè€Œæˆ‘ä»¬æƒ³è¦çš„å…¶å®æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„äº¤æ¢å‡½æ•°\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\tswap1(a, b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\nè‹¥æƒ³è¾¾æˆä»¥ä¸Šç›®çš„ï¼Œæˆ‘ä»¬è¦å…ˆæŠŠä¸Šè¿°ä»£ç ä¼˜åŒ–æˆä»¥ä¸‹å½¢å¼ã€‚å…¶ä¸­swap1å°±æ˜¯æˆ‘ä»¬å³å°†è¦å†™çš„è‡ªå®šä¹‰å‡½æ•°\nvoid swap1(int x, int y)&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;\n\n\nvoidè¡¨ç¤ºè‡ªå®šä¹‰å‡½æ•°æ— è¿”å›ç±»å‹\n\nè¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜å¯¹å§ï¼\nä½†æ˜¯ç»“æœå´å‘Šè¯‰æˆ‘ä»¬aå’Œbå¹¶æ²¡æœ‰è¢«äº¤æ¢\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ\næŸ¥é”™æ–¹æ³•è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªè€å¸ˆæ•™æˆçš„æŸ¥é”™æ–¹æ³•ã€‚è™½ç„¶æˆ‘ä¼°è®¡å¤§å®¶éƒ½çŸ¥é“ï¼ˆå°å£°bbï¼‰\né‚£å°±æ˜¯ç”¨vsç¼–è¯‘å™¨è‡ªå¸¦çš„ç›‘è§†å™¨äº†ï¼ˆå¿«æ·é”®f10ï¼Œæˆ‘ç”¨çš„æ˜¯æœ€æ–°çš„vs2019ï¼Œå®˜ç½‘å³å¯å…è´¹ä¸‹è½½ä½¿ç”¨ï¼‰\n\n\nå·¦è¾¹æœ‰ä¸ªå¾ˆQçš„é»„è‰²å°ç®­å¤´ï¼Œå‘Šè¯‰ä½ æ­£åœ¨ç›‘è§†é‚£ä¸€æ­¥\næ¯æŒ‰ä¸€æ¬¡f10ä»£ç å°±ä¼šå¾€ä¸‹èµ°ä¸€è¡Œ\nå½“é‡åˆ°swapæ­¤ç±»å‡½æ•°æ—¶ï¼ŒæŒ‰f11è¿›å…¥å‡½æ•°ï¼Œf10ä¼šç›´æ¥è·³è¿‡å‡½æ•°\n\n\nå¯ä»¥çœ‹åˆ°ä»£ç åœ¨ç¬¬25è¡Œçš„æ—¶å€™ï¼Œxå’Œyå·²ç»è·å¾—äº†aå’Œbçš„å€¼ï¼Œtmpæ­¤æ—¶ä¸º0\n\nä¸‹ä¸€è¡Œç»§ç»­ï¼Œtmpå˜æˆ10\n\nå†ä¸‹ä¸€è¡Œï¼Œxè·å¾—yçš„å€¼ï¼Œx&#x3D;20\n\nç„¶åyè·å¾—tmpé‡Œé¢ä¿å­˜çš„xçš„å€¼ï¼Œy&#x3D;10\n\nå¯å½“æˆ‘ä»¬ä¸‹ä¸€æ­¥è·³å‡ºå‡½æ•°ï¼Œå›åˆ°ä¸»å‡½æ•°çš„æ—¶å€™\nä¼šå‘ç°aå’Œbä»ç„¶æ˜¯10å’Œ20ï¼Œå¹¶æ²¡æœ‰å‘ç”Ÿäº¤æ¢\n\nèªæ˜çš„ä½ è‚¯å®šå·²ç»æƒ³åˆ°è¿™æ˜¯ä¸ºä»€ä¹ˆäº†\nå‡½æ•°ä¸­çš„xå’Œyä¸ä¸»å‡½æ•°çš„aå’Œbæ˜¯ç‹¬ç«‹çš„ï¼Œxå’Œyçš„å˜åŒ–æ— æ³•å½±å“aå’Œb\né‚£æ€ä¹ˆæ ·å‡½æ•°ä¸­çš„xå’Œyæ‰èƒ½å½±å“å‡½æ•°å¤–çš„aå’Œbï¼Œä»è€Œè¾¾åˆ°æˆ‘ä»¬äº¤æ¢çš„ç›®çš„å‘¢?\nè¿™é‡Œéœ€è¦æ¶‰åŠä¸€ä¸ªæ–°çš„å¤§å®¶éƒ½çŸ¥é“çš„æ¦‚å¿µ\n&amp; å–åœ°å€æ“ä½œç¬¦å…ˆç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è®©å¤§å®¶äº†è§£&amp;å–åœ°å€æ“ä½œç¬¦çš„ä½œç”¨\nåœ¨æˆ‘ä»¬çš„cè¯­è¨€ä¸­ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½å¯¹åº”äº†ä¸€ä¸ªå®ƒç‹¬è‡ªçš„åœ°å€\nè€Œ&amp;ç¬¦å·å°±æ˜¯å–å‡ºè¿™ä¸ªå­—ç¬¦çš„åœ°å€\nint main()&#123;\tint a = 10;\tint* pa = &amp;a;//paæŒ‡é’ˆå˜é‡\t*pa = 20;//è§£å¼•ç”¨æ“ä½œ\tprintf(&quot;%d\\n&quot;, *pa);\treturn 0;&#125;\n\nè¿™é‡Œé¢çš„*paè·å–äº†açš„åœ°å€ï¼Œåœ¨æ‰“å°çš„æ—¶å€™ä¼šé¡ºç€åœ°å€æ‰¾åˆ°aï¼Œæ˜¾ç¤ºaçš„ç»“æœ\nè®©æˆ‘ä»¬ç»§ç»­\næˆ‘ä»¬å°†ä¸Šè¿°äº¤æ¢å‡½æ•°ä»£ç çš„ä¸»å‡½æ•°æ”¹æˆå¦‚ä¸‹å½¢å¼\nint main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);    //swap1(a, b);\tswap2(&amp;a, &amp;b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\næ¯”è¾ƒswap1å’Œswap2ï¼Œä¼šå‘ç°swap2æ‹¬å·ä¸­çš„aå’Œbå‰é¢éƒ½å¤šäº†ä¸€ä¸ª**&amp;æ“ä½œç¬¦**\nè¿™ä¸ªæ“ä½œç¬¦ä¼šè®©swap2ä¸å†è¯»å–aå’Œbçš„æ•°å€¼ï¼Œå³10å’Œ20\nè€Œæ˜¯ä¼šè¯»å–aå’Œbåœ¨å†…å­˜ä¸­çš„åœ°å€\nç›¸å¯¹åº”çš„ï¼Œswap2å‡½æ•°ä¹Ÿè¦æ”¹æˆå¦‚ä¸‹å½¢å¼\nå…¶å®å½¢å¼å’Œswap1åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯xå’Œyè¢«æ›¿æ¢æˆäº†**pa ä¸ pb\nvoid swap2(int* pa, int* pb)&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;\n\n\nè¡¨æ˜ paå’Œpbéƒ½æ˜¯*æŒ‡é’ˆå˜é‡\npaå’Œpbä¿å­˜çš„æ˜¯aå’Œbçš„åœ°å€\n\nè¿™æ—¶å€™æˆ‘ä»¬å†è¿è¡Œä»£ç ï¼Œaå’Œbè¢«å¾ˆå¥½çš„è°ƒæ¢äº†\næˆ‘ä»¬çš„ç›®çš„ä¹Ÿè¾¾æˆäº†\n\nå®å‚å’Œå½¢å‚è¦æƒ³äº†è§£ä¸ºä»€ä¹ˆä¸¤ä¸ªå‡½æ•°ä¼šæœ‰è¿™æ ·çš„ä¸åŒ\næˆ‘ä»¬éœ€è¦å­¦ä¹ å®å‚ï¼ˆå®é™…å‚æ•°ï¼‰å’Œå½¢å‚ï¼ˆå½¢å¼å‚æ•°ï¼‰\n\nvoid swap1(int x, int y)&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;void swap2(int* pa, int* pb)&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;int main()&#123;\tint a = 10;\tint b = 20;\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\t//swap1(a, b);\tswap2(&amp;a, &amp;b);\tprintf(&quot;a=%d b=%d\\n&quot;, a, b);\treturn 0;&#125;\n\n\nåœ¨è¿™ä¸²ä»£ç ä¸­ï¼Œaå’Œbæ˜¯å®å‚\nxã€yã€*paã€ *pbéƒ½æ˜¯å½¢å‚\n\nå¯ä»¥å€Ÿç”¨å¦å¤–ä¸€ä¸ªä»£ç çš„ä¾‹å­è¿›ä¸€æ­¥ç»™å¤§å®¶äº†è§£å®å‚\nint get_max(int x, int y)&#123;\tif (x &gt; y)\t\treturn x;\telse\t\treturn y;&#125;int main()&#123;\tint a = 10;\tint b = 20;\tint max = get_max(a, b); \tprintf(&quot;max= %d\\n&quot;, max);    max = get_max(100,300);    max = get_max(100,300+1);//å®å‚å¯ä»¥æ˜¯è¡¨è¾¾å¼\tmax = get_max(100, get_max(3, 5));//ä¹Ÿå¯ä»¥æ˜¯å‡½æ•°\tprintf(&quot;max = %d\\n&quot;, max);\treturn 0;&#125;\n\nåœ¨è¿™ä¸²ä»£ç ä¸­ï¼ŒæŠ›å»ä¸Šé¢çš„aå’Œb\n max &#x3D; get_max(100,300);æ˜¯æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„åŸºæœ¬æ–¹å¼\n\nè¿™é‡Œé¢çš„100å’Œ300æ˜¯å®å‚\nåŒæ—¶**300+1å’Œget_max(3, 5)**ä¹Ÿæ˜¯å®å‚\nå¯¹åº”çš„å‡½æ•°ä¸­çš„xå’Œyå°±æ˜¯å½¢å‚\n\n\nå½“å®å‚ä¼ ç»™å½¢å‚çš„æ—¶å€™å½¢å‚å…¶å®æ˜¯å®å‚çš„ä¸€ä»½ä¸´æ—¶æ‹·è´å¯¹å½¢å‚çš„æ”¹å˜æ˜¯ä¸ä¼šæ”¹å˜å®å‚çš„\n\nè¿™æ ·è§£é‡Šå¤§å®¶åº”è¯¥å¯¹å®å‚å’Œå½¢å‚æœ‰ä¸€å®šçš„è®¤è¯†äº†\næ¥ä¸‹æ¥å°±æœ‰è¯·æˆ‘ä»¬çš„æ ‡é¢˜äººç‰©éš†é‡ç™»åœº\nä¼ å€¼è°ƒç”¨ï¼Œä¼ å€è°ƒç”¨è¿™ä¸¤ä¸ªè°ƒç”¨æ–¹å¼ååˆ†é‡è¦ï¼Œè€Œä¸”ä¸¤ä¸ªå­—ä»è¯»éŸ³åˆ°é•¿ç›¸ï¼ˆbushiï¼‰éƒ½ååˆ†ç›¸ä¼¼\næ‰€ä»¥å¤§å®¶ä¸€å®šè¦æ³¨æ„åŒºåˆ†ï¼\n\nç®€è€Œè¨€ä¹‹\n\nå½“æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°å†…éƒ¨æ“ä½œå‡½æ•°å¤–éƒ¨çš„å˜é‡çš„æ—¶å€™â†’ä¼ å€è°ƒç”¨\nå¦‚æœæˆ‘ä»¬åªéœ€è¦å¤–éƒ¨å˜é‡çš„å€¼ï¼Œä¸éœ€è¦æ”¹å˜å¤–éƒ¨å˜é‡â†’ä¼ å€¼è°ƒç”¨\n\nä»¥ä¸Šé¢çš„äº¤æ¢å‡½æ•°ä¸ºä¾‹å­\nvoid swap1(int x, int y)//ä¼ å€¼è°ƒç”¨&#123;\tint tmp = 0;\ttmp = x;\tx = y;\ty = tmp;&#125;void swap2(int* pa, int* pb)//ä¼ å€è°ƒç”¨&#123;\tint tmp = 0;\ttmp = *pa;\t*pa = *pb;\t*pb = tmp;&#125;\n\nå› ä¸ºswap1é‡Œé¢çš„xå’Œyæ˜¯ä¼ å€¼è°ƒç”¨ï¼Œxå’Œyåªè·å–äº†aå’Œbçš„å€¼ï¼Œè‡ªç„¶æ— æ³•å½±å“å‡½æ•°å¤–é¢çš„aå’Œb\nè€Œswap2ä¸­çš„*pa å’Œ *pbè·å–çš„æ˜¯aå’Œbçš„åœ°å€ï¼ˆå€â†’åœ°å€ï¼‰æ‰€ä»¥å¯ä»¥å½±å“å‡½æ•°å¤–çš„aå’Œbï¼Œå®ç°å®ƒä»¬çš„äº¤æ¢\n\næ³¨ï¼šxï¼Œyï¼Œ*pa ï¼Œ *pb éƒ½æ˜¯å±€éƒ¨å˜é‡ï¼Œå®ƒä»¬åœ¨å‡ºäº†å‡½æ•°å¤–ä¹‹åå°±æ— æ³•ä½¿ç”¨ï¼Œä¹Ÿå¤±å»äº†ä½¿ç”¨å®ƒä»¬çš„æ„ä¹‰\n\nç»“æŸè¯­æœ¬ç¯‡å°åšå®¢åˆ°è¿™é‡Œä¹Ÿç»“æŸå•¦ï¼Œæ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nå¦‚æœæ„Ÿè§‰çœ‹å®Œä¹‹åä»æœ‰ä¸æ˜ç™½çš„åœ°æ–¹\nå¯ä»¥å»è§‚çœ‹è¿™æœŸè§†é¢‘é‡Œé¢çš„è®²è§£ï¼Œswapå‡½æ•°çš„è®²è§£åœ¨1å°æ—¶17åˆ†ã€ç‚¹æˆ‘è·³è½¬ã€‘\næˆ‘ä¹Ÿæ˜¯åˆšå­¦Cè¯­è¨€çš„å°ç™½ï¼Œåšæ–‡æœ‰é”™åœ¨æ‰€éš¾å…ï¼Œè¯·å„ä½å¤§ä½¬æ— æƒ…æŒ‡æ­£\nè¿™ç¯‡åšæ–‡è™½ç„¶å­—ä¸å¤šï¼Œä½†ä¾æ—§èŠ±äº†æˆ‘2å°æ—¶çš„æ—¶é—´ï¼Œå¦‚æœè§‰å¾—ä¸é”™å°±ç‚¹ä¸ªèµå†èµ°å§ï¼\næ±‚æ±‚äº†ï¼Œè·ªè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç«¥å¹´ç»å…¸æ¸¸æˆ-ä¸‰å­—æ£‹","url":"/posts/2819542311/","content":"@toc\né—®é¢˜å¼•å…¥ - ä»€ä¹ˆæ˜¯ä¸‰å­æ£‹ï¼Ÿæƒ³å¿…å¤§å®¶å„¿æ—¶éƒ½ç©è¿‡ï¼š#å­—æ£‹\n\nå¦‚å›¾ï¼Œå³ä¸€ä¸ª3x3çš„æ ¼å­ï¼Œç©å®¶éœ€è¦åœ¨æ¨ªã€ç«–ã€æ–œä¸‰æ¡çº¿ä¸Šå¸ƒä¸‹è‡ªå·±çš„æ£‹å­\nå…ˆè¿æˆä¸€æ¡çº¿ä¸Š3ä¸ªæ£‹å­çš„ç©å®¶è·èƒœ\nå¦‚æœæ ¼å­å¡«æ»¡åè¿˜æœªæœ‰èƒœè€…ï¼Œå³ä¸ºå¹³å±€\nä»Šå¤©å°±è®©æˆ‘ä»¬ç”¨cè¯­è¨€ä»£ç æ¥å®Œæˆä¸€ä¸ªåŸºç¡€çš„ä¸‰å­æ£‹å°æ¸¸æˆ\n\næ¶‰åŠçŸ¥è¯†ç‚¹ï¼š\näºŒç»´æ•°ç»„ã€å¾ªç¯è¯­å¥ã€è‡ªå®šä¹‰å‡½æ•°ã€è‡ªå®šä¹‰å¤´æ–‡ä»¶\nå…³è”åšå®¢ï¼šæ‰«é›·æ¸¸æˆ\n\n\nè‡ªå®šä¹‰å¤´æ–‡ä»¶æœ¬æ¬¡ä¸‰å­æ£‹ä»£ç å®ç°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰å¤´æ–‡ä»¶\nä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°å‰ï¼Œéœ€è¦å…ˆå¯¹å‡½æ•°è¿›è¡Œå£°æ˜\nå¤´æ–‡ä»¶å°±æ˜¯ä¸€å †å£°æ˜çš„é›†åˆ\n\né—®ï¼šä¸ºä»€ä¹ˆä¸æŠŠå‡½æ•°å£°æ˜ç›´æ¥mainå‡½æ•°å‰é¢ï¼Ÿ\n\n\nç­”ï¼šå› ä¸ºè¿™æ ·æ›´æ–¹ä¾¿å›¢é˜Ÿè¿›è¡ŒåŒä¸€ä¸ªé¡¹ç›®çš„åˆ†å·¥åˆ¶ä½œ\n\nå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰å¤´æ–‡ä»¶ï¼Ÿ\nåœ¨vsç¼–è¯‘å™¨çš„â€œè§£å†³èµ„æºç®¡ç†å™¨â€é‡Œï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°å¤´æ–‡ä»¶çš„æ–‡ä»¶å¤¹\nå³é”®å®ƒï¼Œæ–°å»ºé¡¹\n\né€‰æ‹©å¤´æ–‡ä»¶è¿›è¡Œæ–°å»ºï¼Œåç¼€æ˜¯.h\n\nåˆ›å»ºå®Œåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶ä¸­å¼•ç”¨å¤´æ–‡ä»¶\n#include &quot;game.h&quot;\n\nå¦å¤–ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„ä¸¤ä¸ªæºæ–‡ä»¶ï¼ˆä¸‹é¢ä¼šæåˆ°ï¼‰éƒ½éœ€è¦ä½¿ç”¨cè¯­è¨€çš„åº“å‡½æ•°\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå®šä¹‰å¤´æ–‡ä»¶ä¸­å¼•ç”¨åº“å‡½æ•°çš„å¤´æ–‡ä»¶\n\nè¿™æ ·åªç”¨åœ¨å…¶ä»–æºæ–‡ä»¶ä¸­å¼•ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å¤´æ–‡ä»¶\nå°±æ— éœ€å†å¼•ç”¨Cè¯­è¨€çš„åº“å‡½æ•°å¤´æ–‡ä»¶äº†\n\né¡¹ç›®ä¸­ä¸åŒæºæ–‡ä»¶ä¹‹é—´çš„è¿æ¥åœ¨ä¸‰å­æ£‹ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸¤ä¸ªæºæ–‡ä»¶\n\nä¸€ä¸ªæºæ–‡ä»¶ä¸ºmainå‡½æ•°æ‰€åœ¨çš„æºæ–‡ä»¶\nå¦ä¸€ä¸ªæ˜¯è‡ªå®šä¹‰å‡½æ•°çš„å®šä¹‰éƒ¨åˆ†æ‰€åœ¨çš„å¤´æ–‡ä»¶\n\nåœ¨å®é™…é¡¹ç›®åˆä½œä¸­ï¼Œè¿™ç§æ–¹å¼å¯ä»¥å°†ä¸åŒçš„è‡ªå®šä¹‰å‡½æ•°ï¼ˆå®ç°ä¸åŒåŠŸèƒ½ï¼‰çš„å†…å®¹åˆ†å·¥ç»™æ¯ä¸ªäºº\nåŒæ ·æ˜¯ä¸ºäº†æ–¹ä¾¿å›¢é˜Ÿåˆä½œ\nåœ¨ä¸¤ä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼å’Œåœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­ç¼–å†™æ˜¯ä¸€æ ·çš„\nå¦‚åœ¨å¤´æ–‡ä»¶game.hä¸­å£°æ˜äº†åˆå§‹åŒ–æ£‹ç›˜çš„å‡½æ•°\n//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);\n\nåœ¨å®ç°è‡ªå®šä¹‰å‡½æ•°çš„game.cæ–‡ä»¶ä¸­åªéœ€è¦å¼•ç”¨å¤´æ–‡ä»¶game.h\nå°±èƒ½æ­£å¸¸ç¼–å†™è‡ªå®šä¹‰å‡½æ•°çš„å®ç°éƒ¨åˆ†\n#include &quot;game.h&quot;//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;   &#125;\n\n\nä»£ç å®ç°1.æ‰“å°èœå•&amp;åˆå§‹åŒ–æ£‹ç›˜æ¸¸æˆå˜›ï¼Œè‚¯å®šéœ€è¦ä¸€ä¸ªæœ€åŸºæœ¬çš„åˆå§‹èœå•äº†\nç©å®¶é€šè¿‡è¾“å…¥1æˆ–0æ¥é€‰æ‹©è¿›å…¥æ¸¸æˆè¿˜æ˜¯é€€å‡ºæ¸¸æˆ\nvoid menu()&#123;\tprintf(&quot;**********************\\n&quot;);\tprintf(&quot;********1.play********\\n&quot;);\tprintf(&quot;********0.exit********\\n&quot;);\tprintf(&quot;**********************\\n&quot;);&#125;\n\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å¼„ä¸€ä¸ªåˆå§‹åŒ–çš„å‡½æ•°\nä¸‰å­æ£‹ä¸€å…±æ˜¯3x3çš„æ ¼å­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å­˜æ”¾æ£‹ç›˜\nç„¶åè¦å…ˆæŠŠè¿™ä¸ªæ£‹ç›˜ä¸­çš„æ¯ä¸€ä¸ªæ£‹å­éƒ½åˆå§‹åŒ–ä¸ºç©ºæ ¼\ngame.h\n#define ROW 3//è¡Œ#define COL 3//åˆ—//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);\n\ntest.c\nchar ret = 0;//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„char board[ROW][COL] = &#123; 0 &#125;;//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼Intboard(board, ROW, COL);//è‡ªå®šä¹‰å‡½æ•°ä¼ å‚\n\ngame.c\n//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tboard[i][j] = &#x27; &#x27;;//å°†æ¯ä¸ªæ£‹ç›˜éƒ½åˆå§‹åŒ–ä¸ºç©ºæ ¼\t\t&#125;\t&#125;&#125;\n\n2.æ‰“å°æ£‹ç›˜ç©å®¶&#x2F;ç”µè„‘æ¯èµ°ä¸€æ­¥ï¼Œæ¸¸æˆéƒ½éœ€è¦æ‰“å°ä¸€æ¬¡æ£‹ç›˜ï¼Œå‘Šè¯‰ç©å®¶è‡ªå·±ä¸‹åœ¨äº†å“ªé‡Œï¼Œä»¥åŠå¯¹æ‰‹ï¼ˆç”µè„‘ï¼‰è½å­çš„ä½ç½®\nå’Œç®€å•æ‰“å°äºŒç»´æ•°ç»„ä¸åŒ\næˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªå…ƒç´ ä¹‹é—´æ‰“å°ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œè¾¾åˆ°ä»¥ä¸‹æ•ˆæœ\n//   |   |   //---|---|---//   |   |  //---|---|---//   |   |   \n\ngame.hå’Œtest.cæ–‡ä»¶ä¸­å†™æ³•åŒä¸Šï¼Œé‡ç‚¹æ¥çœ‹game.cæ–‡ä»¶ä¸­å‡½æ•°çš„å®ç°\n//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tprintf(&quot; %c &quot;, board[i][j]);//æ‰“å°æ•°ç»„å…ƒç´ \t\t\tif (j &lt; col - 1)\t\t\t\tprintf(&quot;|&quot;);//ç«–åˆ†å‰²çº¿\t\t&#125;//æ•ˆæœ  a | b | c  \t\tprintf(&quot;\\n&quot;);//æ¢è¡Œ\t\tif (i &lt; row - 1)\t\t&#123;\t\t\tfor (j = 0; j &lt; col; j++)\t\t\t&#123;\t\t\t\tprintf(&quot;---&quot;);//æ¨ªåˆ†å‰²çº¿\t\t\t\tif (j &lt; col - 1)\t\t\t\t\tprintf(&quot;|&quot;);//ç«–åˆ†å‰²çº¿\t\t\t&#125;//æ•ˆæœ---|---|---\t\t\tprintf(&quot;\\n&quot;);\t\t&#125;\t&#125;&#125;\n\nè¿™æ ·æˆ‘ä»¬å°±èƒ½è¾“å‡ºä¸€ä¸ªå¦‚å›¾æ‰€ç¤ºçš„æ£‹ç›˜\n\nä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œè¿™é‡Œå¤šäº†ä¸¤è¡Œæç¤º\nè¿™æ˜¯æˆ‘ä»¬test.cå‡½æ•°ä¸­çš„å†…å®¹\nä¸‰å­æ£‹æ¸¸æˆéœ€è¦ä»¥å‡½æ•°è¿”å›å€¼æ¥åˆ¤æ–­æ˜¯å¦èƒœåˆ©ï¼ˆå¹³å±€ï¼‰\nä¸è¿‡è¿™é‡Œçš„testå‡½æ•°ä¸»è¦ç”¨äºç©å®¶æœ€å¼€å§‹1å’Œ0çš„é€‰æ‹©ï¼ˆæ˜¯å¦å¼€å§‹æ¸¸æˆï¼‰\nvoid test()&#123;\tint input = 0;\tsrand((unsigned int)time(NULL));\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©!\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);&#125;int main()&#123;\ttest();\treturn 0;&#125;\n\nè¿™é‡Œçš„srandä»¥åŠtimeå‡½æ•°æ˜¯ç”¨æ¥ç”Ÿæˆéšæœºæ•°ï¼Œä½œä¸ºç”µè„‘è½å­åæ ‡çš„\nåœ¨çŒœæ•°å­—æ¸¸æˆçš„åšå®¢é‡Œä¹Ÿæœ‰æåˆ°è¿™ä¸¤ä¸ªå‡½æ•°  [é“¾æ¥]\nsrand((unsigned int)time(NULL));\n\n3.æ¸¸æˆåŸºæœ¬æµç¨‹æ‰“å°å®Œæ£‹ç›˜åï¼Œå¼€å§‹ç¼–å†™ç©å®¶è½å­ã€ç”µè„‘è½å­ä»¥åŠåˆ¤æ–­è°æœ€ç»ˆèƒœåˆ©çš„å‡½æ•°\nåœ¨æ—¥å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿæœ€å¥½ä½¿ç”¨è¿™ç§æ–¹å¼\n\nå…ˆæƒ³å¥½æ¸¸æˆçš„å…·ä½“æµç¨‹\nå†™å‡ºæµç¨‹éœ€è¦çš„å‡½æ•°åå’Œåˆ¤æ–­è¿‡ç¨‹\næœ€åè¡¥é½è‡ªå®šä¹‰å‡½æ•°çš„å®ç°\n\ntest.c\nvoid game()&#123;\tchar ret = 0;\t//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„\tchar board[ROW][COL] = &#123; 0 &#125;;\t//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼\tIntboard(board, ROW, COL);\t//æ‰“å°æ£‹ç›˜\tDisplay(board, ROW, COL);\twhile (1)\t&#123;\t\t//ç©å®¶èµ°\t\tPlayerMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t//ç”µè„‘èµ°\t\tBotMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç”µè„‘æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//åˆ¤æ–­çŠ¶æ€\tif (ret == &#x27;*&#x27;)\t&#123;\t\tprintf(&quot;ç©å®¶èµ¢äº†\\n&quot;);\t&#125;\telse if (ret == &#x27;#&#x27;)\t&#123;\t\tprintf(&quot;ç”µè„‘èµ¢äº†\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;å¹³å±€\\n&quot;);\t&#125;&#125;\n\nä»£ç ä¸­çš„Iswinå‡½æ•°ç”¨äºåˆ¤æ–­è°èƒœåˆ©\nå› ä¸ºæ¯èµ°ä¸€æ­¥çš„ç»“æœæœ‰4ç§æƒ…å†µ\n\nç©å®¶èµ¢\nç”µè„‘èµ¢\nå¹³å±€\nç»§ç»­\n\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¸å†ä½¿ç”¨æ•°å­—ï¼ˆä¹Ÿæ˜¯é¿å…å’ŒåŸæœ‰menué€‰æ‹©å¼„æ··ï¼‰\nä»¥å­—ç¬¦çš„å½¢å¼æ¥è¡¨è¾¾è¿™4ç§æƒ…å†µ\n//åœ¨æ¸¸æˆè¿›è¡Œçš„è¿‡ç¨‹ä¸­--Iswinåˆ¤æ–­//1.ç©å®¶èµ¢äº† -*//2.ç”µè„‘èµ¢äº† -#//3.å¹³å±€ -Q//4.ç»§ç»­ -C\n\n4.ç©å®¶èµ°æ£‹ç©å®¶èµ°æ£‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹\n\nç©å®¶åº”ä»¥[1,3]çš„æ•°å­—ä½œä¸ºè½å­åæ ‡ï¼Œè€Œä¸åº”ä»0å¼€å§‹ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰\nç©å®¶æ˜¯äººï¼Œå¯èƒ½è¾“é”™ã€‚åœ¨åæ ‡å‡ºé”™çš„æ—¶å€™åº”ç»™äºˆæç¤ºï¼Œå¹¶è®©ç©å®¶é‡æ–°è¾“å…¥\nè½å­å‰éœ€è¦åˆ¤æ–­è¯¥åæ ‡æ˜¯å¦å·²æœ‰å­ã€‚è‹¥æœ‰ï¼Œæç¤ºç©å®¶è¯¥å¤„å·²ä¸‹å­\n\n//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç©å®¶èµ°:&gt; \\n&quot;);\twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥ä¸‹æ£‹çš„åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\t//ä¸‹æ£‹ \t\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦è¢«å ç”¨\t\t\tif (board[x - 1][y - 1] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\tboard[x - 1][y - 1] = &#x27;*&#x27;;\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot;åæ ‡å·²è¢«å ç”¨ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t&#125;\t&#125;&#125;\n\nç»†å¿ƒçš„ä½ è‚¯å®šå‘ç°äº†ï¼Œè¿™é‡Œçš„ç©å®¶è½å­ä½¿ç”¨çš„æ˜¯*ï¼Œä¹Ÿæ­£æ˜¯ç©å®¶èƒœåˆ©æ—¶çš„è¿”å›å­—ç¬¦\nä¸‹é¢ç”µè„‘è½å­çš„æ—¶å€™ç”¨çš„å°±æ˜¯#\n\n5.ç”µè„‘è½å­ç”µè„‘è½å­æ¯”ç©å®¶è½å­ç›¸å¯¹è¾ƒç®€å•\næˆ‘ä»¬åªéœ€è¦è®©ç”Ÿæˆçš„ä¸¤ä¸ªéšæœºæ•°åœ¨1-3ä¹‹é—´å³å¯\nvoid BotMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç”µè„‘èµ°: \\n&quot;);//æç¤ºç©å®¶æ­¤å¤„æ˜¯ç”µè„‘è½å­\twhile (1)\t&#123;\t\tx = rand() % row;\t\ty = rand() % col;\t\tif (board[x][y] == &#x27; &#x27;)\t\t&#123;\t\t\tboard[x][y] = &#x27;#&#x27;;\t\t\tbreak;\t\t&#125;\t&#125;&#125;\n\n6.åˆ¤æ–­æ˜¯å¦èƒœåˆ©ä¸Šé¢æåˆ°ï¼Œæ¯èµ°ä¸€æ­¥ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç”¨Iswinå‡½æ•°åˆ¤æ–­æ˜¯å¦æœ‰äººèƒœåˆ©\nä¸‰å­æ£‹èƒœåˆ©æœ‰3ç§æ–¹å¼ï¼šè¡Œã€åˆ—ã€å¯¹è§’çº¿\nè¿™é‡Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«äºˆä»¥åˆ¤æ–­ï¼Œæ˜¯å¦å­˜åœ¨æŸä¸€ä¸ªè¡Œã€åˆ—ã€å¯¹è§’çº¿ä¸Šçš„å­å…¨ä¸ºç©å®¶æˆ–ç”µè„‘æ‰€ä¸‹\n//åˆ¤æ–­èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col)&#123;\t//åˆ¤æ–­è¡Œ\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tif (board[i][0] == board[i][1] &amp;&amp; board[i][1] == board[i][2] &amp;&amp; board[i][1] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[i][1];\t\t&#125;\t&#125;\t//åˆ¤æ–­åˆ—\tfor (i = 0; i &lt; col; i++)\t&#123;\t\tif (board[0][i] == board[1][i] &amp;&amp; board[1][i] == board[2][i] &amp;&amp; board[1][i] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[1][i];\t\t&#125;\t&#125;\t//åˆ¤æ–­å¯¹è§’çº¿\tif (board[0][0] == board[1][1] &amp;&amp; board[1][1] == board[2][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\tif (board[2][0] == board[1][1] &amp;&amp; board[1][1] == board[0][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\t//åˆ¤æ–­å¹³å±€\t//æ»¡äº†è¿”å›1ï¼Œä¸æ»¡è¿”å›2\tif (1 == IsFull(board, row, col))\t&#123;\t\treturn &#x27;Q&#x27;;\t&#125;\t//ç»§ç»­\treturn &#x27;C&#x27;;&#125;\n\nè¿™é‡Œåˆå‡ºç°äº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ŒIsFull\n\n7.åˆ¤æ–­æ˜¯å¦å¹³å±€å½“ä¸Šé¢çš„åˆ¤æ–­èƒœåˆ©çš„è¯­å¥èµ°å®Œåï¼Œè‹¥è¿˜æ²¡å‡ºç°è¿”å›çš„æƒ…å†µ\næˆ‘ä»¬å°±è¦åˆ¤æ–­æ˜¯å¦æ˜¯å¹³å±€ï¼Œå³åˆ¤æ–­æ£‹ç›˜çš„9ä¸ªæ£‹å­æ˜¯å¦éƒ½å·²è½ä¸‹\nint IsFull(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tif (board[i][j] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\treturn 0;\t\t\t&#125;\t\t&#125;\t&#125;\treturn 1;//æ£‹ç›˜æ»¡äº†&#125;\n\nå¦‚æœçš„åˆ¤æ–­èƒœåˆ©å’Œå¹³å±€çš„è¯­å¥éƒ½èµ°å®Œåï¼Œè¿˜æ²¡å‡ºç°è¿”å›çš„æƒ…å†µ\nå³è¯´æ˜æ¸¸æˆå¹¶æœªåœæ­¢ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æ¸¸æˆ\n\næ¸¸æˆæ•ˆæœåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¸‰å­æ£‹æ¸¸æˆå°±å®Œæˆäº†ï¼\nè·‘ä¸€ä¸‹çœ‹çœ‹æ•ˆæœå§ï¼\n\n\nå®Œæ•´ä»£ç è¿™é‡Œè´´å‡ºä¸‰å­æ£‹å‡½æ•°çš„å®Œæ•´ä»£ç ä¾›å¤§å®¶å‚è€ƒ\ngame.c#define _CRT_SECURE_NO_WARNINGS 1#include &quot;game.h&quot;//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tboard[i][j] = &#x27; &#x27;;\t\t&#125;\t&#125;&#125;//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tprintf(&quot; %c &quot;, board[i][j]);\t\t\tif (j &lt; col - 1)\t\t\t\tprintf(&quot;|&quot;);\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t\tif (i &lt; row - 1)\t\t&#123;\t\t\tfor (j = 0; j &lt; col; j++)\t\t\t&#123;\t\t\t\tprintf(&quot;---&quot;);\t\t\t\tif (j &lt; col - 1)\t\t\t\t\tprintf(&quot;|&quot;);\t\t\t&#125;\t\t\tprintf(&quot;\\n&quot;);\t\t&#125;\t&#125;&#125;//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç©å®¶èµ°:&gt; \\n&quot;);\twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥ä¸‹æ£‹çš„åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\t//ä¸‹æ£‹ \t\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦è¢«å ç”¨\t\t\tif (board[x - 1][y - 1] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\tboard[x - 1][y - 1] = &#x27;*&#x27;;\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot;åæ ‡å·²è¢«å ç”¨ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥\\n&quot;);\t\t&#125;\t&#125;&#125;void BotMove(char board[ROW][COL], int row, int col)&#123;\tint x = 0;\tint y = 0;\tprintf(&quot;ç”µè„‘èµ°: \\n&quot;);\twhile (1)\t&#123;\t\tx = rand() % row;\t\ty = rand() % col;\t\tif (board[x][y] == &#x27; &#x27;)\t\t&#123;\t\t\tboard[x][y] = &#x27;#&#x27;;\t\t\tbreak;\t\t&#125;\t&#125;&#125;int IsFull(char board[ROW][COL], int row, int col)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tfor (j = 0; j &lt; col; j++)\t\t&#123;\t\t\tif (board[i][j] == &#x27; &#x27;)\t\t\t&#123;\t\t\t\treturn 0;\t\t\t&#125;\t\t&#125;\t&#125;\treturn 1;//æ£‹ç›˜æ»¡äº†&#125;//åˆ¤æ–­èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col)&#123;\t//åˆ¤æ–­è¡Œ\tint i = 0;\tfor (i = 0; i &lt; row; i++)\t&#123;\t\tif (board[i][0] == board[i][1] &amp;&amp; board[i][1] == board[i][2] &amp;&amp; board[i][1] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[i][1];\t\t&#125;\t&#125;\t//åˆ¤æ–­åˆ—\tfor (i = 0; i &lt; col; i++)\t&#123;\t\tif (board[0][i] == board[1][i] &amp;&amp; board[1][i] == board[2][i] &amp;&amp; board[1][i] != &#x27; &#x27;)\t\t&#123;\t\t\treturn board[1][i];\t\t&#125;\t&#125;\t//åˆ¤æ–­å¯¹è§’çº¿\tif (board[0][0] == board[1][1] &amp;&amp; board[1][1] == board[2][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\tif (board[2][0] == board[1][1] &amp;&amp; board[1][1] == board[0][2] &amp;&amp; board[1][1] != &#x27; &#x27;)\t\treturn board[1][1];\t//åˆ¤æ–­å¹³å±€\t//æ»¡äº†è¿”å›1ï¼Œä¸æ»¡è¿”å›2\tif (1 == IsFull(board, row, col))\t&#123;\t\treturn &#x27;Q&#x27;;\t&#125;\t//ç»§ç»­\treturn &#x27;C&#x27;;&#125;\n\ntest.c#define _CRT_SECURE_NO_WARNINGS 1#include &quot;game.h&quot;void menu()&#123;\tprintf(&quot;**********************\\n&quot;);\tprintf(&quot;********1.play********\\n&quot;);\tprintf(&quot;********0.exit********\\n&quot;);\tprintf(&quot;**********************\\n&quot;);&#125;void game()&#123;\tchar ret = 0;\t//å­˜å‚¨æ•°æ®-äºŒç»´æ•°ç»„\tchar board[ROW][COL] = &#123; 0 &#125;;\t//åˆå§‹åŒ–æ£‹ç›˜ - åˆå§‹åŒ–ç©ºæ ¼\tIntboard(board, ROW, COL);\t//æ‰“å°æ£‹ç›˜\tDisplay(board, ROW, COL);\twhile (1)\t&#123;\t\t//ç©å®¶èµ°\t\tPlayerMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t//ç”µè„‘èµ°\t\tBotMove(board, ROW, COL);\t\tDisplay(board, ROW, COL);\t\t//åˆ¤æ–­ç”µè„‘æ˜¯å¦èƒœåˆ©\t\tret = Iswin(board, ROW, COL);\t\tif (ret != &#x27;C&#x27;)\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//åˆ¤æ–­çŠ¶æ€\tif (ret == &#x27;*&#x27;)\t&#123;\t\tprintf(&quot;ç©å®¶èµ¢äº†\\n&quot;);\t&#125;\telse if (ret == &#x27;#&#x27;)\t&#123;\t\tprintf(&quot;ç”µè„‘èµ¢äº†\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;å¹³å±€\\n&quot;);\t&#125;&#125;void test()&#123;\tint input = 0;\tsrand((unsigned int)time(NULL));\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯ï¼Œè¯·é‡æ–°é€‰æ‹©!\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);&#125;int main()&#123;\ttest();\treturn 0;&#125;\n\ngame.h#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define ROW 3#define COL 3//åˆå§‹åŒ–æ£‹ç›˜void Intboard(char board[ROW][COL], int row, int col);//æ‰“å°æ£‹ç›˜void Display(char board[ROW][COL], int row, int col);//ç©å®¶èµ°void PlayerMove(char board[ROW][COL], int row, int col);//ç”µè„‘èµ°void BotMove(char board[ROW][COL], int row, int col);//åˆ¤æ–­æ˜¯å¦èƒœåˆ©char Iswin(char board[ROW][COL], int row, int col);//åˆ¤æ–­æ˜¯å¦æœ‰ç©ºä½#pragma once\n\n\nç»“è¯­æœ¬ç¯‡ä¸‰å­æ£‹çš„åšå®¢åˆ°æ­¤ç»“æŸäº†\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nä¸‹ç¯‡åšå®¢ä¼šæ•™å¤§å®¶ï¼Œå¦‚ä½•æ‰“åŒ…æˆ‘ä»¬çš„ä»£ç ä¸ºdllæ–‡ä»¶ï¼ˆæ­¤æ–‡ä»¶æ— æ³•ç¼–è¯‘ï¼‰\nç‚¹ä¸ªèµå†èµ°å§ï¼Œçƒçƒäº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°ç»„ç»ƒä¹ é¢˜åˆ†äº«","url":"/posts/2092077457/","content":"å¥½ä¹…æ²¡è®°å½•ï¼ˆæ°µï¼‰åšå®¢äº†ï¼Œä»Šå¤©è®°å½•ä¸€ä¸‹æ˜¨å¤©å­¦ä¹ çš„æ•°ç»„ç»ƒä¹ é¢˜ä¸­çš„å†…å®¹\n\n\næ•°ç»„ç»ƒä¹ é¢˜[TOC]\n\næ˜¨å¤©å­¦ä¹ çš„ç»ƒä¹ é¢˜æŒºå¤šçš„ï¼Œä¸‹é¢åªè®°å½•äº†å‡ ä¸ªæˆ‘ä¸ªäººè®¤ä¸ºæ¯”è¾ƒé‡è¦å’Œå…¸å‹çš„å†…å®¹\nï¼ˆ1ï¼‰é”™è¯¯çš„å¼•ç”¨æ•°ç»„é¢˜ç›®ï¼š\nint arr[10]=&#123;0&#125;;\n\nä¸‹é¢é”™è¯¯çš„å¼•ç”¨æ–¹å¼æ˜¯ï¼š\n\nA. arr[0]&#x3D;1        B.arr[0]&#x3D;5*2          C.   arr[10]&#x3D;2               D.arr[1]&#x3D;arr[2]*arr[0]\n\narr[10]ä»£è¡¨æ•°ç»„ä¸­æœ‰10ä¸ªå…ƒç´ ï¼Œä½†æ˜¯arr[10]çš„å¼•ç”¨æ˜¯ä¸‹æ ‡ï¼ŒæŒ‡ç¬¬11ä¸ªå…ƒç´ \nè¿™è¶…å‡ºäº†æ•°ç»„10ä¸ªå…ƒç´ çš„èŒƒå›´\nç­”æ¡ˆæ˜¯ C\n\nï¼ˆ2ï¼‰æ•°ç»„ä¸­çš„é€—å·è¡¨è¾¾å¼è¯·é—®ä»¥ä¸‹ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ\n#include&lt;stdio.h&gt;int main()&#123;\tint arr[]=&#123;1,2,(3,4),5&#125;;    printf(&quot;%d\\n&quot;, sizeof(arr));    return 0;&#125;\n\né¦–å…ˆï¼Œarræ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•´å‹å…ƒç´ ï¼Œå ç”¨çš„å­—èŠ‚æ˜¯4ä¸ªbitä½\næ‰€ä»¥sizeofè®¡ç®—æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œå°†å®ƒä»¬æ‰€å ç©ºé—´ç›¸åŠ \n\nå…¶ä¸­é€—å·è¡¨è¾¾å¼(3,4)  â€”â€“&gt; åªäº§ç”Ÿä¸€ä¸ªç»“æœï¼Œ4\n\nä»¥é˜²ä¸‡ä¸€ï¼Œè¿™é‡Œæä¸€ä¸‹é€—å·è¡¨è¾¾å¼çš„æ¦‚å¿µ\né€—å·è¡¨è¾¾å¼é€—å·è¡¨è¾¾å¼ä¸­çš„å†…å®¹å¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼\n#include&lt;stdio.h&gt;int main()&#123;\tint a =3;    int b=5;    int c=0;    //é€—å·è¡¨è¾¾å¼    int d=(c=1,a=c+3,b=a-4,c+=b);    printf(&quot;%d\\n&quot;,d);    return 0;&#125;\n\nè¿™ä¸ªä»£ç çš„ç»“æœæ˜¯1\nè¿ç®—è¿‡ç¨‹å¦‚ä¸‹\n\nc&#x3D;1\na&#x3D;c+3&#x3D;1+3&#x3D;4\nb&#x3D;a-4&#x3D;4-4&#x3D;0\nc+&#x3D;b  â€”-&gt; c&#x3D;c+b&#x3D;1+0&#x3D;1\n\né€—å·è¡¨è¾¾å¼ä¼šä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®—é‡Œé¢çš„æ¯ä¸ªè¡¨è¾¾å¼\nè¾“å‡ºçš„ç»“æœæ˜¯é€—å·è¡¨è¾¾å¼ä¸­æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœ\næ‰€ä»¥ä¸Šé¢æ•°ç»„ä¸­(3,4)è¿™ä¸ªé€—å·è¡¨è¾¾å¼äº§ç”Ÿçš„ç»“æœæ˜¯4\nprintfè¾“å‡ºçš„ç»“æœæ˜¯16ï¼ˆ4ä¸ªå…ƒç´ ï¼‰\n\nï¼ˆ3ï¼‰æ•°ç»„ä¸­å­—ç¬¦ä¸²å’Œå­—ç¬¦å…ƒç´ çš„åŒºåˆ«int arr1[]=&#123;&quot;abcdef&quot;&#125;;int arr2[]=&#123;&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;,&#x27;f&#x27;&#125;;\n\n\næ•°ç»„arr1å’Œarr2ç­‰ä»·  Ã—\n\nä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦å…ƒç´ ï¼Œå®ƒä»¬çš„å«ä¹‰æ˜¯ä¸åŒçš„\n\næ•°ç»„arr1å’Œarr2çš„é•¿åº¦ç›¸åŒ   Ã—\n\nè¿™ä¸¤ä¸ªçš„é•¿åº¦å®é™…ä¸Šæ˜¯ä¸åŒçš„\nå› ä¸ºâ€œabcdefâ€è¿™ä¸ªå­—ç¬¦ä¸²çš„åé¢ï¼Œæ˜¯æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç»“æŸæ ‡å¿—\\0çš„\n\næ•°ç»„arr1çš„é•¿åº¦å¤§äºarr2çš„é•¿åº¦  âˆš\n\nï¼ˆè¿™é‡Œæˆ‘å¯èƒ½æœ‰é”™çš„åœ°æ–¹ï¼Œè¿˜è¯·dalaoæ— æƒ…æŒ‡æ­£ï¼‰\n\nï¼ˆ4ï¼‰è‡ªå®šä¹‰å‡½æ•°ä¸æ•°ç»„çš„ç®€å•ç»ƒä¹ é¢˜é¢˜ç›®å¦‚ä¸‹\n\nåˆ›å»ºä¸€ä¸ªæ•´å½¢æ•°ç»„ï¼Œå®ç°ä»¥ä¸‹æ“ä½œ\n1.å®ç°å‡½æ•°init()åˆå§‹åŒ–æ•°ç»„ä¸ºå…¨0\n2.å®ç°print()æ‰“å°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ \n3.å®ç°reverse()å‡½æ•°å®Œæˆæ•°ç»„å…ƒç´ çš„é€†ç½®\n\nå‰ä¸¤ä¸ªè‡ªå®šä¹‰å‡½æ•°çš„å®ç°å½¢å¼éå¸¸ç›¸ä¼¼\næˆ‘ä»¬åªéœ€è¦ç”¨ä¸€ä¸ªforå¾ªç¯ï¼Œåˆ©ç”¨iä¾æ¬¡è®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†å®ƒä»¬æ‰“å°å‡ºæ¥æˆ–è€…èµ‹å€¼ä¸º0å®ç°åˆå§‹åŒ–\nvoid print(int arr[], int sz)//æ‰“å°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ &#123;    int i = 0;    for (i = 0; i &lt; sz; i++)    &#123;        printf(&quot;%d &quot;, arr[i]);    &#125;    printf(&quot;\\n&quot;);&#125;void init(int arr[], int sz)//å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åˆå§‹åŒ–ä¸º0&#123;    int i = 0;    for (i = 0; i &lt; sz; i++)    &#123;        arr[i] = 0;    &#125;&#125;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯szï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°ï¼‰æˆ‘ä»¬å¿…é¡»åœ¨ä¸»å‡½æ•°mainä¸­è®¡ç®—ï¼Œä¸èƒ½åœ¨è‡ªå®šä¹‰å‡½æ•°ä¸­è®¡ç®—\nå› ä¸ºä¼ è¿‡æ¥çš„æ•°ç»„æ˜¯é¦–å…ƒç´ çš„åœ°å€ï¼Œè¿™æ—¶å€™ç”¨sizeofè®¡ç®—çš„æ•°ç»„å…ƒç´ é•¿åº¦æ˜¯ä¸å‡†ç¡®çš„\nä¸»å‡½æ•°mainå¦‚ä¸‹\nint main()&#123;    int arr[10] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;    int sz = sizeof (arr)/sizeof( arr[0]);    printf(&quot;%d\\n&quot;, sz);    print(arr, sz);    reverse(arr, sz);    print(arr, sz);    init(arr, sz);    print(arr, sz);    return 0;&#125;\n\nreverseå‡½æ•°çš„åŸºæœ¬ç†å¿µå’Œå¦å¤–ä¸¤ä¸ªå‡½æ•°å…¶å®æ˜¯ç›¸ä¼¼çš„\nè¿™é‡Œæˆ‘ä»¬ä¾æ—§ä¼šç”¨åˆ°â€œç©ºç›’å­â€tmpæ¥å®Œæˆæˆ‘ä»¬çš„äº¤æ¢\nåŒæ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¾ªç¯æ¥ç¡®è®¤ä»€ä¹ˆæ—¶å€™åœæ­¢äº¤æ¢\nå³å·¦å³ä¸¤ä¸ªæ•°ç»„å…ƒç´ çš„ä¸‹æ ‡ä¸€æ ·çš„æ—¶å€™ï¼ˆæˆ–è€…å€¼ä¸€æ ·ï¼‰å°±åœæ­¢äº¤æ¢\nvoid reverse(int arr[], int sz)//æ•°ç»„å…ƒç´ çš„é€†ç½®&#123;    int left = 0;    int right = sz - 1;    while(left &lt; right)    &#123;        int tmp = arr[left];        arr[left] = arr[right];        arr[right] = tmp;        left++;        right--;    &#125;&#125;\n\nå½“æˆ‘ä»¬è¿›è¡Œä¸¤ä¸ªæ•°ç»„ä¹‹é—´çš„å…ƒç´ è°ƒæ¢çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦ç”¨forå¾ªç¯+tmpç©ºç›’å­çš„æ–¹å¼ä¸€ä¸€äº¤æ¢æ¯ä¸ªæ•°ç»„å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ \n\nå‰æï¼Œä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ç›¸åŒ\n\nä¸‹é¢è¿™ç§ä»£ç æ˜¯é”™è¯¯çš„\nint tmp=arr1arr1=arr2arr2=tmp\n\nå®ç°å½¢å¼å’Œä¸Šé¢æ‰“å°å’Œåˆå§‹åŒ–çš„è‡ªå®šä¹‰å‡½æ•°çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼\n\nå¦‚æœæœ¬åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼è¿™æ˜¯å¯¹æˆ‘çš„æœ€å¤§é¼“åŠ±\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘å‰”é™¤æœ€å¤§æœ€å°å€¼åï¼Œè®¡ç®—æ•°ç»„å…ƒç´ çš„å¹³å‡å€¼","url":"/posts/3219014309/","content":"åŒ11ä¹Ÿä¸èƒ½é˜»æŒ¡æˆ‘å­¦ä¹ çš„å¿ƒï¼\n\n\n[TOC]\né—®é¢˜å¼•å…¥\né¢˜ç›®å†…å®¹ï¼š\nå®šä¹‰ä¸€ä¸ªå«10ä¸ªæ•´å‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„,ä»é”®ç›˜ä¸Šè¾“å…¥10ä¸ªå…ƒç´ å€¼,æ±‚å»æ‰æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹åçš„å…ƒç´ å¹³å‡å€¼.\nè¾“å…¥æ ¼å¼:\nç”¨å¾ªç¯æ§åˆ¶ä¾æ¬¡è¾“å…¥10ä¸ªå…ƒç´ å€¼ï¼Œscanfè¯­å¥ä¸­çš„æ ¼å¼æ§åˆ¶ä¸²ä¸º: â€œ%dâ€\nè¾“å‡ºæ ¼å¼ï¼š\nè¾“å‡ºå¹³å‡å€¼, printfä¸­çš„æ ¼å¼æ§åˆ¶ä¸²ä¸º â€œ%lf\\nâ€\n\nè¾“å…¥æ ·ä¾‹ï¼š\n2 3 4 5 6 2 4 6 4 3\n\nè¾“å‡ºæ ·ä¾‹ï¼š\n3.833333\n\n\nç†è§£1ä¸€èˆ¬äººçœ‹åˆ°è¿™ç§é¢˜ç›®ï¼Œä¸‹æ„è¯†ä¼šè®¤ä¸ºæ˜¯å»æ‰ä¸€ä¸ªæœ€å¤§å€¼ä¸€ä¸ªæœ€å°å€¼ï¼Œå†è®¡ç®—æ•°ç»„å…¶ä»–å…ƒç´ çš„æœ€å¤§å€¼\næ¯•ç«Ÿå¾ˆå¤šä½“è‚²èµ›äº‹éƒ½æ˜¯è¿™ä¹ˆè®¡ç®—é€‰æ‰‹çš„å¾—åˆ†çš„\nå®é™…ä¸Šè¿™é“é¢˜å¹¶ä¸æ˜¯è¿™ä¹ˆè¦æ±‚çš„ï¼Œè¿™ç‚¹æˆ‘ä»¬åé¢å†æ\nå…ˆæ¥çœ‹çœ‹å¦‚ä½•å»æ‰æ•°ç»„ä¸­çš„ä¸€ä¸ªæœ€å¤§å€¼ã€ä¸€ä¸ªæœ€å°å€¼å§ï¼\nå»é™¤ä¸€ä¸ªæœ€å¤§&#x2F;æœ€å°å€¼å…ˆç†æ¸…æ€è·¯\n\néœ€è¦æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\nåœ¨è®¡ç®—å¹³å‡å€¼çš„æ—¶å€™éœ€è¦å‰”é™¤è¿™ä¸¤ä¸ªå€¼\n\næƒ³æ¸…æ¥šè¿™ä¸¤ç‚¹åï¼Œæ–¹æ³•å°±å¾ˆæ˜ç¡®äº†\nä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œæœ‰å…³å¦‚ä½•æŸ¥æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„ [é“¾æ¥]\nè¿™é‡Œæˆ‘ä»¬å°±èƒ½ç”¨ä¸Šé‚£ä¸ªåšå®¢é‡Œé¢çš„æ–¹æ³•ï¼Œä¸è¿‡æ˜¯ä»¥è‡ªå®šä¹‰å‡½æ•°çš„æ–¹å¼å®ç°\nint sp1(int arr[], int sz, int* pm)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tif (arr[i] &gt; *pm)//æ‰¾å‡ºæœ€å¤§å€¼\t\t&#123;\t\t\t*pm = arr[i];\t\t&#125;\t&#125;\tfor (int k = 0; k &lt; sz; k++)\t&#123;\t\tif (arr[k] == *pm)//ç¡®è®¤æœ€å¤§å€¼çš„æ•°å€¼\t\t&#123;\t\t\treturn k;//è¿”å›è¯¥æœ€å¤§å€¼çš„ä¸‹æ ‡\t\t&#125;\t&#125;&#125;\n\næ‰¾å‡ºæœ€å°å€¼çš„ä»£ç åŒä¸Šï¼Œåªéœ€è¦å°†å…¶ä¸­çš„&gt;æ›´æ”¹ä¸º&lt;\nåœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç«‹ä¸¤ä¸ªå˜é‡æ¥æ¥æ”¶å¾—åˆ°çš„æœ€å¤§å€¼å’Œæœ€å°å€¼çš„ä¸‹æ ‡\nint main()&#123;\tint arr[10] = &#123; 0 &#125;;\tint a, b = 0;\tdouble ave,sum= 0;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tscanf(&quot;%d&quot;, &amp;arr[i]);\t&#125;\tint sz = sizeof(arr) / sizeof(arr[0]);\ta =sp1(arr, sz, &amp;max);\tb =sp2(arr, sz, &amp;min);\tfor (int k = 0; k &lt; 10; k++)\t&#123;\t\tif (k != a &amp;&amp; k != b)\t\t&#123;\t\t\tsum = sum + arr[k];\t\t&#125;\t&#125;\tave = sum / 8;\tprintf(&quot;%lf\\n&quot;, sum);\tprintf(&quot;%lf\\n&quot;, ave);\treturn 0;&#125;\n\nåœ¨æœ€åè®¡ç®—sumçš„æ—¶å€™ï¼Œåªéœ€è¦ç”¨ifè¯­å¥è®©Kä¸ç­‰äºæœ€å¤§å€¼å’Œæœ€å°å€¼çš„ä¸‹æ ‡ï¼Œå°±èƒ½å‰”é™¤è¿™ä¸¤ä¸ªå€¼\nåŒæ—¶ï¼Œæˆ‘ä»¬çš„å¹³å‡æ•°ä¹Ÿåªéœ€è¦é™¤ä»¥8å³å¯\nè¿è¡Œç»“æœé”®å…¥æ•°ç»„ä¸­å…ƒç´ 1-10ï¼Œç¨‹åºæˆåŠŸçš„è¾“å‡ºäº†å‰”é™¤1å’Œ10ä¹‹å8ä¸ªå…ƒç´ çš„å¹³å‡å€¼\n\nä½†å½“æˆ‘ä»¬æŠŠé¢˜ç›®ç¤ºä¾‹è¾“è¿›å»æ—¶ï¼Œå¾—å‡ºçš„ç­”æ¡ˆå´å’Œé¢˜ç›®è¦æ±‚ä¸åŒ\n\n\né¢˜ç›®å®é™…è¦æ±‚ä¸Šé¢æåˆ°ï¼Œè¿™é“é¢˜çš„è¦æ±‚å¹¶ä¸æ˜¯åªå‰”é™¤ä¸€ä¸ªæœ€å¤§å€¼å’Œæœ€å°å€¼\nè€Œæ˜¯å‰”é™¤æ‰€æœ‰çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\n2 3 4 5 6 2 4 6 4 3\n\nè§‚å¯Ÿè¾“å…¥æ ·ä¾‹å¯ä»¥å‘ç°ï¼Œè¿™10ä¸ªæ•°å­—çš„æœ€å¤§å€¼æ˜¯6ï¼Œæœ€å°å€¼æ˜¯2\nä½†æ˜¯ä¸ç®¡æ˜¯æœ€å°å€¼2å’Œæœ€å¤§å€¼6ï¼Œéƒ½ä¸æ­¢ä¸€ä¸ª\né¢˜ç›®è¦æ±‚çš„å°±æ˜¯è¦å°†è¿™é‡Œé¢çš„æ‰€æœ‰2å’Œ6å‰”é™¤æ‰ï¼Œå†è®¡ç®—å‰©ä½™æ•°æ®çš„å¹³å‡å€¼\nè§£é¢˜æ€è·¯1&amp;2å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä»¥å¾ªç¯çš„æ–¹å¼ç»§ç»­å¯»æ‰¾æœ€å¤§å€¼çš„ä¸‹æ ‡\n\nç¼ºç‚¹ï¼šæ­¤æ–¹æ³•å¯èƒ½ä¼šå‡ºç°å¤šåˆ çš„æƒ…å†µ\n\næˆ–\næ›´æ”¹ä»£ç ï¼Œåœ¨æ‰¾åˆ°æœ€å¤§å€¼ä¸‹æ ‡åï¼ŒæŸ¥æ‰¾æ•°ç»„ä¸­æœ‰å‡ ä¸ªå…ƒç´ åŒè¿™ä¸ªæœ€å¤§å€¼ç›¸åŒï¼Œå†è¿”å›ä»–ä»¬çš„ä¸‹æ ‡\n\næ­¤æ–¹æ³•éœ€è¦ç”¨æ•°ç»„æ¥å­˜æ”¾æ‰¾åˆ°çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œè¾ƒä¸ºéº»çƒ¦\n\n\nè§£é¢˜æ€è·¯3 -å†’æ³¡æ’åºå…ˆå¯¹æ•°ç»„è¿›è¡Œå†’æ³¡æ’åºï¼Œå†å‰”é™¤ä¸¤è¾¹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼\nè¿™é‡Œæˆ‘é€‰æ‹©çš„å°±æ˜¯è§£é¢˜æ€è·¯3\n\nå†’æ³¡æ’åºçš„æ–¹å¼å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„åšå®¢ [é“¾æ¥]\nè¿™é‡Œåªè´´å‡ºä¸»å‡½æ•°å†…éœ€è¦ç¼–å†™çš„å†…å®¹\nè®¡æ•°å™¨å› ä¸ºéœ€è¦å‰”é™¤å¤šä¸ªæœ€å¤§ï¼ˆå°ï¼‰å€¼\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡è¿›è¡Œè®¡æ•°\næ¯å½“æˆ‘ä»¬æ‰¾åˆ°å’Œå·²çŸ¥æœ€å¤§å€¼ç›¸åŒçš„æ•°å­—çš„æ—¶å€™ï¼Œcountéƒ½ä¼š++ï¼ˆåˆå€¼ä¸º1ï¼‰\nå½“å¾ªç¯èµ°åˆ°ç¬¬ä¸€ä¸ªå°äºæœ€å¤§å€¼çš„æ•°åï¼Œå¾ªç¯å°±ä¼šç»ˆæ­¢\nint count2 = 1;for (int k = 8; k &gt;0 ; k--)\t&#123;\t\tif (arr[k] == arr[9])\t\t&#123;\t\t\tarr[k] = 0;//ä»¤æœ€å¤§å€¼ä¸º0\t\t\tcount2 ++;\t\t&#125;\t\telse \t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\n\næŸ¥æ‰¾æœ€å°å€¼çš„ä»£ç åŒä¸Šï¼Œä½†æ˜¯forå¾ªç¯ä¸­çš„æ¡ä»¶éœ€è¦æ›´æ”¹\næ³¨æ„ï¼Œè¿™é‡Œçš„ä¸‹æ ‡kå¿…é¡»ä»8å¼€å§‹è€Œä¸æ˜¯ä»9\nå› ä¸ºç»è¿‡å†’æ³¡æ’åºåï¼Œarr[9]æœ¬èº«å°±æ˜¯æ•°ç»„ä¸­çš„æœ€å¤§å€¼\nè‹¥ä»å®ƒå¼€å§‹å¾ªç¯åˆ¤æ–­ï¼Œå°±ä¼šç›´æ¥æŠŠæœ€å¤§å€¼èµ‹å€¼ä¸º0\nç¨‹åºå°±å‡ºbugäº†\n\nä¸»å‡½æ•°ä»£ç int main()&#123;\tint arr[10] = &#123; 0 &#125;;\tint a, b = 0;\tdouble ave, sum = 0;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tscanf(&quot;%d&quot;, &amp;arr[i]);\t&#125;\tint sz = sizeof(arr) / sizeof(arr[0]);\t//å…ˆå¯¹æ•°ç»„è¿›è¡Œå†’æ³¡æ’åº\tbubble_sort(arr, sz);\t//æ­¤æ—¶ä¸‹æ ‡0å’Œ9å³ä¸ºæœ€å¤§æœ€å°å€¼\tint max = arr[0];\tint min = arr[9];\tint count1 = 1;\tint count2 = 1;\tfor (int j = 1; j &lt; 10; j++)\t&#123;\t\tif (arr[j] == arr[0])\t\t&#123;\t\t\tarr[j] = 0;//ä»¤æœ€å°å€¼ä¸º0\t\t\tcount1 ++;\t\t&#125;\t\telse\t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\tfor (int k = 8; k &gt;0 ; k--)\t&#123;\t\tif (arr[k] == arr[9])\t\t&#123;\t\t\tarr[k] = 0;//ä»¤æœ€å¤§å€¼ä¸º0\t\t\tcount2 ++;\t\t&#125;\t\telse \t\t&#123;\t\t\tbreak;\t\t&#125;\t&#125;\t//ä»¤å‰åä¸¤ä¸ªæœ€å¤§æœ€å°å€¼ä¸º0\tarr[0] = 0;\tarr[9] = 0;\tfor (int k = 0; k &lt; 10; k++)\t&#123;\t\t\tsum = sum + arr[k];\t&#125;\t//é™¤å»å·²çŸ¥çš„æ‰€æœ‰æœ€å¤§æœ€å°å€¼ï¼Œè®¡ç®—å¹³å‡æ•°\tave = sum / (10- count1- count2);\t//printf(&quot;%lf\\n&quot;, sum);\tprintf(&quot;%lf\\n&quot;, ave);\treturn 0;&#125;\n\nåœ¨æœ€åè®¡ç®—å¹³å‡æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å‰”é™¤count1å’Œcount2ï¼ˆ10å‡å»åå³ä¸ºå‰©ä½™å…ƒç´ çš„ä¸ªæ•°ï¼‰\nè¿™æ—¶å€™å¾—å‡ºçš„ç­”æ¡ˆå°±å’Œé¢˜ç›®æ‰€ç»™ç¤ºä¾‹ç›¸åŒäº†\n\nä½ å­¦åºŸäº†å˜›ï¼Ÿåæ­£æˆ‘æ˜¯åºŸäº† \n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘ç«¥å¹´ç»å…¸æ¸¸æˆ-æ‰«é›·","url":"/posts/2375006677/","content":"æƒ³å¿…å±å¹•å‰çš„ä½ ï¼Œè‚¯å®šç©è¿‡windows XPç³»ç»Ÿè‡ªå¸¦çš„é‚£ä¸ªæ¸¸æˆï¼Œæ‰«é›·\n\n\nå›æƒ³å½“å¹´ï¼Œæˆ‘æ ¹æœ¬æ²¡çœ‹æ‡‚è¿™ä¸ªæ¸¸æˆæ˜¯æ€ä¹ˆç©çš„\n\næ¯”èµ·æ‰«é›·ï¼Œä¸‰ç»´å¼¹çƒå¯¹æˆ‘æ›´æœ‰å¸å¼•åŠ›\nè·‘é¢˜äº†\næœ¬ç¯‡åšå®¢å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥è¯•è¯•ï¼Œå¦‚ä½•é€šè¿‡Cè¯­è¨€ä»£ç ï¼Œåˆ¶ä½œå‡ºä¸€ä¸ªâ€œæ‰«é›·æ¸¸æˆseâ€\n1.æ¸¸æˆç¨‹åºä¸»å‡½æ•°åœ¨ç¼–å†™è¿™ç±»æ¸¸æˆä»£ç æ—¶ï¼Œæˆ‘ä»¬è¦ç”¨åˆ°çš„ä¸»å‡½æ•°åŸºæœ¬æ˜¯ä¸€è‡´çš„\næ‰«é›·æ¸¸æˆçš„ä¸»å‡½æ•°å’ŒçŒœæ•°å­—æ¸¸æˆçš„ä¸»å‡½æ•°ç›¸å·®å¾ˆå°\nå°ç™½å¿…å­¦ï¼ç®€å•çš„Cè¯­è¨€åº”ç”¨&#x3D;&#x3D;ï¼çŒœæ•°å­—æ¸¸æˆ\nvoid menu()//ç®€æ˜“ç›®å½•&#123;\tprintf(&quot;***************************\\n&quot;);\tprintf(&quot;**** 1. play   0. exit*****\\n&quot;);\tprintf(&quot;***************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();//å®ç°æ¸¸æˆçš„å‡½æ•°\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;è¾“å…¥é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\n2.æ¸¸æˆå®ç°åŸç†æƒ³å†™å¥½ä¸€ä¸²ä»£ç ï¼Œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æ‰«é›·æ¸¸æˆéœ€è¦é€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥å®ç°\n\næˆ‘ä»¬éœ€è¦ä¸€ä¸ª9x9çš„æ£‹ç›˜ï¼Œç”¨äºç”Ÿæˆæˆ‘ä»¬çš„é›·ä»¥åŠç©å®¶çš„æ¸¸ç©\nåœ¨cè¯­è¨€ä¸­å½“ç„¶æ— æ³•ç›´æ¥äº§ç”Ÿè¿™æ ·çš„ç”»é¢\nä½†æˆ‘ä»¬å¯ä»¥åŒç¬¦å·*æˆ–è€…#æ¥ä»£æ›¿ç½‘æ ¼ï¼Œç”¨1å’Œ0æ¥è¡¨ç¤ºæœ‰æ— é›·\nå¦‚æœæˆ‘ä»¬åªç”Ÿæˆä¸€ä¸ªæ£‹ç›˜ï¼Œé‚£1å’Œ0ä¼šç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œè¾¾ä¸åˆ°éšè—çš„æ•ˆæœ\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨äºŒç»´æ•°ç»„ç”Ÿæˆä¸¤ä¸ªæ£‹ç›˜ï¼Œä¸€ä¸ªç”¨äºå­˜æ”¾é›·ï¼Œä¸€ä¸ªç”¨äºç©å®¶çš„æ¸¸ç©\nchar mine[ROWS][COLS];//é›·åŒºå¸ƒç½®char show[ROWS][COLS];//ç©å®¶çœ‹åˆ°çš„ç•Œé¢\n\næ‰«é›·æ¸¸æˆæˆ‘ä»¬ä½¿ç”¨å¤´æ–‡ä»¶+æºæ–‡ä»¶çš„å½¢å¼æ’°å†™ä»£ç \n\nè¿™æ ·å†™ä»£ç çš„ä¼˜ç‚¹åœ¨äºåç»­æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡æ›´æ”¹.hæ–‡ä»¶ä¸­çš„æ•°ç»„ï¼Œä»è€Œæ›´æ”¹æˆ‘ä»¬çš„æ ¼å­å¤§å°\nå¦‚: æ”¹æˆ12x12çš„æ¸¸ç©ç•Œé¢ï¼Œæ”¹å˜é›·åŒºå¸ƒé›·ä¸ªæ•°ç­‰ç­‰\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨game.hä¸­å®šä¹‰è¿™äº›ç¬¦å·\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define ROW 9#define COL 9#define ROWS ROW+2#define COLS COL+2\n\nåŒæ—¶æˆ‘ä»¬è¦åœ¨ä¸»å‡½æ•°çš„æœ€ä¸Šé¢å¼•ç”¨è¿™ä¸ªè‡ªå·±å†™çš„å¤´æ–‡ä»¶\nåªè¦æŠŠåº“å‡½æ•°å¤´æ–‡ä»¶æ”¾å…¥game.hæ–‡ä»¶ï¼Œåœ¨å…¶ä»–æºæ–‡ä»¶ä¸­åªéœ€å¼•ç”¨game.h\nä¸éœ€è¦å†æ¬¡å¼•ç”¨&lt;stdio.h&gt;ã€&lt;stdlib.h&gt;ä¹‹ç±»\n#include &#x27;game.h&#x27;\n\næ£‹ç›˜å¤§å°ä¸ºä»€ä¹ˆéœ€è¦11x11ï¼Ÿä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œåœ¨ç”Ÿæˆæ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä½¿ç”¨äº†ROWSï¼Œå…¶å€¼ä¸ºROW+2\næˆ‘ä»¬æœ€ç»ˆå±•ç¤ºçš„åªæ˜¯9x9çš„æ¸¸æˆç•Œé¢ï¼Œä½†ç”Ÿæˆçš„æ£‹ç›˜å…¶å®æ˜¯11x11çš„\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨mineæ•°ç»„ä¸­å®ç°æ‰«æé›·åŒºçš„æ“ä½œ\n\nç©è¿‡æ‰«é›·æ¸¸æˆçš„ä½ è‚¯å®šçŸ¥é“ï¼šåœ¨ä½ ç‚¹å‡»ä¸€ä¸ªæ ¼å­çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªæ ¼å­ä¸æ˜¯é›·\nå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ•°å­—ï¼Œå‘Šè¯‰ä½ å®ƒå‘¨å›´çš„8ä¸ªæ ¼å­ä¸­æœ‰å‡ é¢—é›·\n\nå¦‚å›¾æ‰€ç¤ºï¼š\n\nåœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°ç»Ÿè®¡å‘¨å›´8ä¸ªæ ¼å­ä¸­é›·â€™1â€™çš„ä¸ªæ•°\nä½†æ˜¯å¦‚æœä½ æ¥åˆ°è¾¹ç¼˜ï¼Œé‚£å°±å‡ºç°é—®é¢˜äº†\n\nå¦‚æœæˆ‘ä»¬æƒ³ç»Ÿè®¡è¾¹ç¼˜çš„æ ¼å­å‘¨è¾¹æœ‰å‡ é¢—é›·ï¼Œå°±ä¼šé‡åˆ°è¿™ç§æº¢å‡ºæ•°ç»„çš„æƒ…å†µ\næ­¤æ—¶ä»£ç ä¼šæŠ¥é”™\nä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŸæ¥9x9çš„åŸºç¡€ä¸Šåœ¨å‘¨å›´åŠ ä¸€åœˆç©ºç™½çš„æ ¼å­\nä¹Ÿå°±æ˜¯ä»£ç æ‰€ç¤ºçš„ROW(è¡Œ)COL(åˆ—)éƒ½è¦+2çš„æƒ…å†µ\n#define ROW 9#define COL 9#define ROWS ROW+2#define COLS COL+2\n\næ¸¸æˆè¿‡ç¨‹è¿™é‡Œç®€å•æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬çš„æ¸¸æˆè¿‡ç¨‹\n\nç©å®¶é€‰æ‹©å¼€å§‹æ¸¸æˆ\nç”Ÿæˆä¸¤ä¸ªæ£‹ç›˜ï¼Œä¸€ä¸ªæ”¾ç½®é›·\\æ‰«æé›·ï¼Œä¸€ä¸ªå‘ç©å®¶å±•ç¤ºæ¸¸æˆç•Œé¢\nç©å®¶è¾“å…¥åæ ‡ï¼Œé€‰æ‹©æ’é›·ä½ç½®\næœ‰é›·â€“&gt;ç©å®¶è¢«ç‚¸æ­»ï¼Œæ¸¸æˆç»“æŸï¼›æ— é›·â€“&gt;æ˜¾ç¤ºå‘¨è¾¹æœ‰å‡ é¢—é›·ï¼Œæ¸¸æˆç»§ç»­\næ‰€æœ‰é›·è¢«æ’å‡ºï¼Œæ¸¸æˆèƒœåˆ©\n\n\n3.æ¸¸æˆä»£ç å®ç°æ¥ä¸‹æ¥å°±è¿›å…¥æˆ‘ä»¬çš„æ¸¸æˆä»£ç éƒ¨åˆ†\n3-1.åˆå§‹åŒ–å’Œæ‰“å°//åˆå§‹åŒ–æ‰«é›·InitBoard(mine, ROWS, COLS, &#x27;0&#x27;);InitBoard(show, ROWS, COLS, &#x27;*&#x27;);//æ‰“å°æ‰«é›·DisplayBoard(mine, ROW, COL);DisplayBoard(show, ROW, COL);\n\næˆ‘ä»¬éœ€è¦åˆå§‹åŒ–ä¸¤ä¸ªæ£‹ç›˜ï¼Œå…¶ä¸­é›·åŒºåˆå§‹åŒ–ä¸º0ï¼ˆ0ä»£è¡¨æ— é›·ï¼‰ï¼Œå±•ç¤ºåŒºåˆå§‹åŒ–ä¸ºâ€™*â€™ï¼Œç”¨âœ³ä»£æ›¿ç•Œé¢\nåŒæ—¶æˆ‘ä»¬æ‰“å°è¿™ä¸¤ä¸ªæ£‹ç›˜ï¼ŒæŸ¥çœ‹åˆå§‹åŒ–æ•ˆæœ\nå› ä¸ºè¿™æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ï¼Œåœ¨å¦å¤–ä¸€ä¸ª.cæ–‡ä»¶ä¸­åŒ…å«å‡½æ•°çš„å®ç°\n\n//åˆå§‹åŒ–æ£‹ç›˜void InitBoard(char board[ROWS][COLS], int rows, int cols, char set);//æ‰“å°void DisplayBoard(char board[ROWS][COLS], int row, int col);\n\nåˆå§‹åŒ–å‡½æ•°å’Œæ‰“å°å‡½æ•°æ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨forè¯­å¥è¾¾æˆæˆ‘ä»¬çš„éœ€æ±‚\nvoid InitBoard(char board[ROWS][COLS], int rows, int cols, char set)&#123;\tint i = 0;\tint j = 0;\tfor (i = 0; i &lt; rows; i++)\t&#123;\t\tfor (j = 0; j &lt; cols; j++)\t\t&#123;\t\t\tboard[i][j] = set;\t\t&#125;\t&#125;&#125;void DisplayBoard(char board[ROWS][COLS], int row, int col)&#123;\tint i = 0;\tint j = 0;\tprintf(&quot;------æ‰«é›·æ¸¸æˆ------\\n&quot;);\t//æ‰“å°åˆ—å·\tfor (i = 0; i &lt;= col; i++)\t&#123;\t\tprintf(&quot;%d &quot;, i);\t&#125;\tprintf(&quot;\\n&quot;);\tfor (i = 1; i &lt;= row; i++)//åªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\t&#123;\t\tprintf(&quot;%d &quot;, i);//æ‰“å°è¡Œå·\t\tfor (j = 1; j &lt;= col; j++)//åªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\t\t&#123;\t\t\tprintf(&quot;%c &quot;, board[i][j]);\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;\tprintf(&quot;--------------------\\n&quot;);&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬çš„æœ€åæ‰“å°æ£‹ç›˜çš„æ—¶å€™æ˜¯ä»i&#x3D;1å¼€å§‹çš„ï¼Œè¿™æ ·å°±èƒ½é¿å¼€æ·»åŠ çš„ç©ºç™½è¾¹ç¼˜åŒºåŸŸï¼Œåªæ‰“å°ä¸­å¿ƒçš„99æ–¹æ ¼\nåŒæ—¶æˆ‘ä»¬æ·»åŠ äº†åˆ—å·å’Œè¡Œå·ï¼Œè¿™æ ·èƒ½è®©ç©å®¶æ¸…é™¤çš„çŸ¥é“è‡ªå·±åº”è¯¥è¾“å…¥ä»€ä¹ˆåæ ‡\n\n3-2.å¸ƒç½®é›·åŒº//å¸ƒç½®é›·SetMine(mine, ROW, COL);\n\nè¿™éƒ¨åˆ†ä»£ç æˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™å°±æœ‰ç‚¹åŠ›ä¸ä»å¿ƒäº†\nåŒæ ·çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå‡½æ•°\n//å¸ƒç½®åœ°é›·void SetMine(char mine[ROWS][COLS], int row, int col);\n\nåœ¨game.cä¸­å†™å…¥è‡ªå®šä¹‰å‡½æ•°çš„å®ç°\n//æ”¾ç½®é›·void SetMine(char  mine[ROWS][COLS], int row, int col)&#123;\tint count = EASY_COUNT;\twhile (count)\t&#123;\t\tint x = rand() % row + 1;\t\tint y = rand() % col + 1;\t\tif (mine[x][y] ==&#x27;0&#x27;)\t\t&#123;\t\t\tmine[x][y] = &#x27;1&#x27;;\t\t\tcount--;\t\t&#125;\t&#125;&#125;\n\nè¿™é‡Œé¢å‡ºç°äº†ä¸€ä¸ªå‰é¢æ²¡æœ‰æåˆ°çš„å˜é‡ï¼ŒEASY_COUNT\næœ¬æ¥è¿™ä¸ªä½ç½®åªæ˜¯ä¸ª10\nä½†å¦‚æœæˆ‘ä»¬æƒ³æ›´æ”¹å¸ƒé›·ä¸ªæ•°ï¼Œé‚£æ¯æ¬¡éƒ½éœ€è¦æ›´æ”¹è¿™é‡Œçš„10ï¼Œåé¢çš„ä»£ç ä¸­ä¹Ÿéœ€è¦æ›´æ”¹ï¼Œéå¸¸éº»çƒ¦\næ‰€ä»¥æˆ‘ä»¬æ”¹ä¸ºä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å˜é‡ï¼Œåœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå˜é‡çš„å€¼\n#define EASY_COUNT 10\n\nè¿™ä¸ªå€¼å°±ä»£è¡¨æˆ‘ä»¬å¸ƒç½®é›·çš„ä¸ªæ•°äº†\n3-3.ç©å®¶æ’æŸ¥é›·//åœ¨ä¸»å‡½æ•°ä¸­å¼•ç”¨è¿™ä¸ªå‡½æ•°\tFindMine(mine,show, ROW, COL);//éœ€è¦æŠŠmineæ•°ç»„ä¸­æ’æŸ¥çš„é›·æ”¾å…¥show//åœ¨game.hä¸­å®šä¹‰è¿™ä¸ªå‡½æ•°void FindMine(char mine[ROWS][COLS], char show[ROWS][COLS],int row, int col);\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦æŠŠmineæ•°ç»„ä¸­æ’æŸ¥å‡ºçš„é›·çš„ä¸ªæ•°æ”¾å…¥showæ•°ç»„ä¸­æ‰“å°å‡ºæ¥\næ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠä¸¤ä¸ªæ•°ç»„éƒ½ä¼ é€è¿‡å»\n\n1.è¾“å…¥æ’æŸ¥çš„åæ ‡2.æ£€æŸ¥åæ ‡å¤„æ˜¯ä¸æ˜¯é›·(1)æ˜¯é›· -boomï¼ç‚¸æ­» -æ¸¸æˆç»“æŸ(2)ä¸æ˜¯é›· -ç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·-å­˜å‚¨æ’é›·çš„ä¿¡æ¯åˆ°showæ•°ç»„ï¼Œæ¸¸æˆç»§ç»­\n\nvoid FindMine(char mine[ROWS][COLS], char show[ROWS][COLS], int row, int col)&#123;\tint x = 0;\tint y = 0;    \twhile (1)\t&#123;\t\tprintf(&quot;è¯·è¾“å…¥æ’é›·åæ ‡:&gt; &quot;);\t\tscanf(&quot;%d%d&quot;, &amp;x, &amp;y);\t\t//åˆ¤æ–­åæ ‡æ˜¯å¦æ­£ç¡®\t\tif (x &gt;= 1 &amp;&amp; x &lt;= row &amp;&amp; y &gt;= 1 &amp;&amp; y &lt;= col)\t\t&#123;\t\t\tif (mine[x][y] == &#x27;1&#x27;)\t\t\t&#123;\t\t\t\tprintf(&quot;å¾ˆé—æ†¾ï¼Œä½ è¢«ç‚¸æ­»äº†\\n&quot;);\t\t\t\tDisplayBoard(mine, ROW, COL);\t\t\t\tbreak;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\t//ä¸æ˜¯é›·çš„æƒ…å†µä¸‹ï¼Œç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·\t\t\t\tint count = get_mine_count(mine, x, y);\t\t\t\tshow[x][y] = count + &#x27;0&#x27;;\t\t\t&#125;\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;åæ ‡é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥ \\n&quot;);\t\t&#125;\t&#125;&#125;\n\næ³¨æ„ï¼Œè¿™é‡Œé¢æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªä»£ç æ¥åˆ¤æ–­åæ ‡åˆæ³•æ€§\næˆ‘ä»¬çš„æ£‹ç›˜æ˜¯9x9ï¼Œç©å®¶è¦æ˜¯è¾“å…¥ä¸€ä¸ª(99,99)çš„åæ ‡ï¼Œé‚£è‚¯å®šä¸åœ¨æ•°ç»„ä¸­çš„ï¼Œæ˜¯æ— æ•ˆçš„\næˆ‘ä»¬éœ€è¦æé†’ç©å®¶ä»–è¾“é”™äº†\nâ€˜0â€™çš„ä½œç”¨show[x][y] = count + &#x27;0&#x27;;\n\nä½ å¯èƒ½ä¼šå¯¹è¿™è¡Œä»£ç æ„Ÿåˆ°ç–‘æƒ‘\nä¸ºä»€ä¹ˆè¦åœ¨countåé¢+ä¸Šä¸€ä¸ªâ€˜0â€™ï¼Ÿ\nè¿™é‡Œå°±å’Œæˆ‘ä»¬asciiç è¡¨æœ‰å…³äº†\n\nå› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–æ•°ç»„å’Œå¸ƒç½®é›·çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™æ•°ç»„ä¼ å…¥çš„éƒ½æ˜¯1å’Œ0è¿™ä¸¤ä¸ªç¬¦å·ï¼Œå¹¶ä¸æ˜¯æ•°å­—ï¼\nä½†æ˜¯åœ¨showæ•°ç»„ä¸­æˆ‘ä»¬éœ€è¦ç»™ç©å®¶æ˜¾ç¤ºä¸€ä¸ªæ•°å­—çš„å­—ç¬¦\n\nè¿™é‡Œé¢æˆ‘ä»¬æä¾›çš„æ˜¯1çš„å­—ç¬¦ï¼Œå¹¶ä¸æ˜¯1å®ƒæœ¬èº«\nè€Œæˆ‘ä»¬åœ¨è®¡ç®—å‘¨è¾¹é›·çš„ä¸ªæ•°çš„æ—¶å€™ï¼Œä¼ å›æ¥çš„æ˜¯ä¸€ä¸ªå…·ä½“çš„æ•°å­—\nè§‚å¯Ÿè¡¨æ ¼ï¼Œä½ ä¼šå‘ç°æ•°å­—å’Œå¯¹åº”çš„å­—ç¬¦ä¸­é—´ï¼Œéƒ½å·®äº†48\nè€Œ48æ°å¥½æ˜¯å­—ç¬¦â€™0â€™å¯¹åº”çš„ASCIIç å€¼\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨countåŠ ä¸Šå­—ç¬¦â€™0â€™ï¼Œä»¥æ­¤åœ¨ç•Œé¢ä¸­å‘ç©å®¶å±•ç¤ºå‘¨è¾¹8æ ¼æœ‰å‡ é¢—é›·\n3-4. ç³»ç»Ÿæ‰«æé›·å¦‚ä½•æŠŠç©å®¶é€‰æ‹©çš„æ ¼å­å‘¨è¾¹çš„é›·æ‰«æå‡ºæ¥å‘¢ï¼Ÿ\nè®¾ç©å®¶çš„é€‰æ‹©çš„åæ ‡ä¸ºxå’Œy\n\n\n\nx-1,y-1\nx-1,y\nx-1,y+1\n\n\n\nx,y-1\nx,y\nx,y+1\n\n\nx+1,y-1\nx+1,y\nx+1,y+1\n\n\næˆ‘ä»¬åªéœ€è¦æŠŠè¿™äº›åæ ‡å…¨éƒ¨åœ¨äºŒç»´æ•°ç»„ä¸­é”®å…¥ï¼Œå°±èƒ½é€ä¸ªæ‰«æå‡ºé›·çš„ä¸ªæ•°\n//ç»Ÿè®¡é›·çš„ä¸ªæ•°static int get_mine_count(char mine[ROWS][COLS], int x, int y)&#123;\treturn mine[x - 1][y - 1] +\t\tmine[x - 1][y] +\t\tmine[x - 1][y + 1] +\t\tmine[x][y - 1] +\t\tmine[x][y + 1] +\t\tmine[x + 1][y - 1] +\t\tmine[x + 1][y] +\t\tmine[x + 1][y + 1] - 8 * &#x27;0&#x27;;&#125;\n\nè¿™é‡Œå› ä¸ºæˆ‘ä»¬æ‰«æå‡ºæ¥çš„ä¹Ÿæ˜¯â€˜1â€™çš„å­—ç¬¦ï¼Œç³»ç»Ÿä¸­æ˜¯å­—ç¬¦1çš„asciiç å€¼49\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å»8ä¸ªå­—ç¬¦â€˜0â€™ï¼Œè¿™æ ·å°±èƒ½å¾—åˆ°é›·çš„ä¸ªæ•°çš„æ•°å­—\nï¼ˆç„¶ååœ¨ä¹‹å‰çš„é‚£ä¸ªå‡½æ•°ä¸­æ¥å—ï¼Œcount+â€˜0â€™ï¼Œåœ¨showæ•°ç»„ä¸­æ˜¾ç¤ºï¼‰\n\nè¿™ä¸ªå‡½æ•°æ˜¯åœ¨ç©å®¶æ’æŸ¥é›·çš„å‡½æ•°ä¹‹å‰çš„\nå› ä¸ºåœ¨ä¸»å‡½æ•°ä¸­æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨game.hä¸­å®šä¹‰\næˆ‘ä»¬æƒ³è®©å®ƒåªåœ¨game.cä¸­ç”Ÿæ•ˆï¼Œæ‰€ä»¥ç”¨staticä¿®é¥°å®ƒ\n\n\nstaticçš„ä½œç”¨\n1.ä¿®é¥°å±€éƒ¨å˜é‡2.ä¿®é¥°å…¨å±€å˜é‡3.ä¿®é¥°å‡½æ•°\n\n\nä¸Šé¢çš„ä»£ç å…¶å®è¿˜å°‘äº†ä¸€ä¸ªä¸œè¥¿\næˆ‘ä»¬éœ€è¦åˆ¤æ–­ç©å®¶ä»€ä¹ˆæ—¶å€™èƒœåˆ©â€”â€”é›·åŒºçš„0ï¼ˆæ— é›·æ–¹å—ï¼‰å…¨éƒ¨è¢«ç©å®¶æ‰¾å‡ºï¼Œç©å®¶å°±èƒœåˆ©äº†\nint win = 0;while (win&lt; row * col - EASY_COUNT)\n\nè¿™é‡Œæˆ‘ä»¬éœ€è¦æ›´æ”¹çš„æ˜¯whlieå‡½æ•°\nå…¶ä¸­ row * col - EASY_COUNT  æŒ‡æ–¹æ ¼æ€»æ•°å‡å»é›·çš„ä¸ªæ•°ï¼Œå¾—åˆ°çš„æ˜¯æ— é›·æ–¹å—çš„ä¸ªæ•°\nç©å®¶æ¯æˆåŠŸæ’é™¤ä¸€ä¸ªæ— é›·æ–¹å—ï¼Œwinå°±ä¼šåŠ ä¸€ä¸ªæ•°å­—\nelse&#123;\t//ä¸æ˜¯é›·çš„æƒ…å†µä¸‹ï¼Œç»Ÿè®¡åæ ‡å‘¨å›´æœ‰å‡ ä¸ªé›·\tint count = get_mine_count(mine, x, y);\tshow[x][y] = count + &#x27;0&#x27;;\t//æ˜¾ç¤ºæ’æŸ¥å‡ºæ¥çš„ä¿¡æ¯\tDisplayBoard(show, ROW, COL);       win++;&#125;\n\nå½“winè¾¾åˆ°æ— é›·æ–¹å—ä¸ªæ•°çš„æ—¶å€™ï¼Œwhlieå¾ªç¯å°±ä¼šåœæ­¢\néšåæˆ‘ä»¬åˆ¤æ–­ç©å®¶æ˜¯å¦èƒœåˆ©ï¼Œå¦‚æœèƒœåˆ©ï¼Œå°±æ‰“å°æ£‹ç›˜ï¼Œè®©ç©å®¶çŸ¥é“é›·çš„ä½ç½®\nif (win == row * col - EASY_COUNT)&#123;\tprintf(&quot;æ­å–œä½ ï¼Œæ¸¸æˆèƒœåˆ©ï¼\\n&quot;);\tDisplayBoard(mine, ROW, COL);&#125;\n\nè¿™é‡Œå¿…é¡»è¦åˆ¤æ–­ï¼Œå› ä¸ºä½ å¤±è´¥äº†ä¹Ÿæ˜¯ä¼šè·³å‡ºå¾ªç¯çš„ï¼\nåˆ°æ­¤ï¼Œæˆ‘ä»¬çš„æ‰«é›·ä»£ç å°±æ˜¯å®Œæˆäº†\n4.æŸ¥çœ‹ç»“æœè¿™é‡Œæˆ‘ä½œå¼Šï¼Œå°†é›·çš„ä¸ªæ•°è®¾ç½®ä¸º80å¹¶æ‰“å°å‡ºå¸ƒç½®é›·ä¹‹åçš„æ£‹ç›˜\nè¾“å…¥æœ€åä¸€ä¸ªé›·çš„ä½ç½®ï¼Œç³»ç»Ÿæç¤ºæˆ‘ä»¬æ¸¸æˆèƒœåˆ©\n\nè¾“å…¥é›·çš„åæ ‡åï¼Œä¹Ÿä¼šæç¤ºä½ è¢«ç‚¸æ­»äº†\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç¡®è®¤ä»£ç æ˜¯ç¼–å†™æˆåŠŸäº†ï¼\nå®Œæ•´ä»£ç è·å– &#x3D;&#x3D;&gt;  [DAY018 æ‰«é›·]\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œå†™è¿™ä¸ªåšå®¢ç”¨äº†æˆ‘2ä¸ªå°æ—¶ï¼Œç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘äºŒçº§æŒ‡é’ˆ","url":"/posts/1209573309/","content":"äºŒçº§æŒ‡é’ˆä»€ä¹ˆæ˜¯äºŒçº§æŒ‡é’ˆï¼Ÿæˆ‘ä»¬é€šå¸¸ä½¿ç”¨çš„int*på°±æ˜¯ä¸€ä¸ªä¸€çº§æŒ‡é’ˆï¼Œè€ŒäºŒçº§æŒ‡é’ˆå­˜æ”¾çš„å˜é‡å°±æ˜¯ä¸€ä¸ªä¸€çº§æŒ‡é’ˆä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š\nint main()&#123;\tint a =10;    int*pa= &amp;a;                    //æœ‰ä¸¤ä¸ª*å· çš„åŸå›     int ** ppa= &amp;pa;//int*æ˜¯ä»£è¡¨å˜é‡paçš„ç±»å‹ï¼Œ*ppaè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡        return 0ï¼›&#125;\n\nè¿™é‡Œé¢paæ˜¯æŒ‡é’ˆå˜é‡ï¼Œä¸€çº§æŒ‡é’ˆ\nppaæ˜¯äºŒçº§æŒ‡é’ˆå˜é‡ï¼Œ&amp;paå–å‡ºpaåœ¨å†…å­˜ä¸­çš„èµ·å§‹åœ°å€\nå¦‚å›¾æ‰€ç¤º\nå°ç»“ç®€å•çš„è¯´ï¼ŒæŒ‡é’ˆå˜é‡ä¹Ÿæ˜¯å˜é‡ï¼Œå˜é‡å°±æœ‰å±äºå®ƒçš„åœ°å€ï¼Œè€ŒäºŒçº§æŒ‡é’ˆå°±æ˜¯ç”¨æ¥å­˜æ”¾æŒ‡é’ˆå˜é‡çš„åœ°å€çš„\nå¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘é‡æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼ŸæŒ‡é’ˆåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºé”™ï¼Ÿ","url":"/posts/2226629578/","content":"@toc\nä»€ä¹ˆæ˜¯é‡æŒ‡é’ˆï¼Ÿæ¦‚å¿µï¸°é‡æŒ‡é’ˆå°±æ˜¯æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®æ˜¯ä¸å¯çŸ¥çš„ï¼ˆå¦‚ï¼šéšæœºçš„ã€ä¸æ­£ç¡®çš„ã€æ²¡æœ‰æ˜ç¡®é™åˆ¶çš„)\nè¯´äººè¯å°±æ˜¯ï¼šé‡æŒ‡é’ˆæ˜¯é”™è¯¯çš„æŒ‡é’ˆå¼•ç”¨å½¢å¼ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ\n\næŒ‡é’ˆæœªåˆå§‹åŒ–\nè¶Šç•Œè®¿é—®\næŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾\n\næ‚¬å‚æŒ‡é’ˆï¼ˆdangling pointerï¼‰ï¼šæ˜¯æŒ‡åœ¨ç¨‹åºä¸­ä»ç„¶å­˜åœ¨ï¼Œä½†ä¸å†æŒ‡å‘æœ‰æ•ˆå†…å­˜åœ°å€çš„æŒ‡é’ˆã€‚å½“æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡è¢«é‡Šæ”¾æˆ–é”€æ¯åï¼ŒæŒ‡é’ˆä»ç„¶ä¿ç•™ç€å…ˆå‰æ‰€æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œè¿™æ—¶æŒ‡é’ˆå°±æˆä¸ºæ‚¬å‚æŒ‡é’ˆã€‚\n1.æŒ‡é’ˆæœªåˆå§‹åŒ–è¿™ä¸ªæ¦‚å¿µéå¸¸å®¹æ˜“ç†è§£ï¼ŒåŒå˜é‡ä¸€æ ·ï¼ŒæŒ‡é’ˆåŒæ ·éœ€è¦æˆ‘ä»¬çš„åˆå§‹åŒ–\n//åˆå§‹åŒ–æŒ‡é’ˆint a = 10;int*p = &amp;a;\n\næŒ‡é’ˆæœªåˆå§‹åŒ– é€šå¸¸æ˜¯ä»¥ä¸‹æƒ…å†µ\nint main()&#123;\tint*p;\t*p=20;&#125;\n\nè¿™é‡Œçš„æŒ‡é’ˆå¹¶æ²¡æœ‰æŒ‡å‘æŸä¸ªå†…å­˜åœ°å€ï¼Œå³ä¾¿æˆ‘ä»¬æ›´æ”¹å®ƒçš„å†…å®¹ä¹Ÿæ˜¯æ— æ•ˆçš„\n\næŒ‡é’ˆä¼šé»˜è®¤èµ‹äºˆä¸€ä¸ªéšæœºå€¼ï¼Œå±äºéæ³•è®¿é—®å†…å­˜\n\nå½“ç„¶ï¼Œç¼–è¯‘å™¨é‡åˆ°è¿™ç§æƒ…å†µä¼šç›´æ¥æŠ¥é”™\n\n2.è¶Šç•Œè®¿é—®è¶Šç•Œè®¿é—®çš„æƒ…å†µé€šå¸¸å‡ºç°åœ¨æ•°ç»„ä¸­\nint arr[10]=&#123;1,2,3,4,5&#125;;int* p=arr;\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„åä»£è¡¨æ˜¯é¦–å…ƒç´ çš„åœ°å€\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨ forå¾ªç¯å’ŒæŒ‡é’ˆ++ çš„æ–¹å¼ï¼Œä½¿æŒ‡é’ˆè®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ \nint main()&#123;\tint arr[5]=&#123;1,2,3,4,5&#125;;\tint* p = arr;    int i =0;    for(i=0;i&lt;=5;i++)    &#123;        *p=0;        p++;    &#125;&#125;\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ è®¿é—®éƒ½æ˜¯é€šè¿‡ä¸‹æ ‡çš„æ–¹å¼ã€‚5ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œä¸‹æ ‡æ˜¯ä»0-4\nè€Œåœ¨æ­¤ä»£ç ä¸­ï¼Œp++ç¬¬äº”æ¬¡çš„æ—¶å€™ï¼Œä¸‹æ ‡å·²ç»å˜æˆäº†5ï¼Œå¯¹åº”çš„æ˜¯ç¬¬å…­ä¸ªå…ƒç´ \nä½†æ•°ç»„ä¸­å¹¶æ²¡æœ‰ç¬¬å…­ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æŒ‡é’ˆè®¿é—®çš„å°±æ˜¯ä¸€ä¸ªç©ºçš„åœ°å€äº†\nåŒæ ·å±äºéæ³•è®¿é—®\nè¿™å°±æ˜¯è¶Šç•Œè®¿é—®çš„ä¸€ç§\n3.æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾æ¯å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šèµ‹äºˆè¿™ä¸ªå˜é‡ä¸€ä¸ªå†…å­˜çš„åœ°å€ç©ºé—´\nè¿™æ—¶å€™æˆ‘ä»¬æŠŠè¿™ä¸ªåœ°å€èµ‹äºˆç»™æŒ‡é’ˆpï¼ŒæŒ‡é’ˆä¾¿è®°å½•ä¸‹äº†è¿™ä¸ªåœ°å€\nç”¨å›¾æ¥ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ä»€ä¹ˆå«æŒ‡å‘çš„ç©ºé—´å·²é‡Šæ”¾\n\nä»£ç ç¤ºä¾‹å¦‚ä¸‹\nint* test()&#123;\tint a = 10;\treturn &amp;a;&#125;int main()&#123;\tint* p = test();\t*p = 20;\treturn 0;&#125;\n\n\n\nå¦‚ä½•é¿å…é‡æŒ‡é’ˆï¼Ÿ1.æŒ‡é’ˆåˆå§‹åŒ–åœ¨ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åƒåˆ›å»ºå˜é‡ä¸€æ ·åˆå§‹åŒ–æŒ‡é’ˆ\nå¦‚æœä¸çŸ¥é“æŠŠæŒ‡é’ˆåˆå§‹åŒ–ä¸ºä»€ä¹ˆï¼Œé‚£å°±èµ‹å€¼ä¸ºNULL(ä»£è¡¨0)\n\n 1 int main() 2 &#123; 3     //å½“å‰ä¸çŸ¥é“påˆå§‹åŒ–ä¸ºä»€ä¹ˆçš„æ—¶å€™ 4     //ç›´æ¥åˆå§‹åŒ–ä¸ºNULL(ç©ºæŒ‡é’ˆ--&gt;0) 5     int* p = NULL; 6     //æ˜ç¡®çŸ¥é“åˆå§‹åŒ–çš„å€¼ 7     int a = 10; 8     int* ptr = &amp;a; 9     10     return 0;11 &#125;\n\n2.å°å¿ƒæŒ‡é’ˆè¶Šç•Œåœ¨ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä¸èƒ½è®©æŒ‡é’ˆè¶Šç•Œ\nå¦‚é‡åˆ°æ•°ç»„çš„æƒ…å†µï¼Œä¸€å®šè¦æ³¨æ„ä¸‹æ ‡å’Œå…ƒç´ ä¸ªæ•°çš„åŒºåˆ«\n\næ³¨æ„ï¼šCè¯­è¨€æœ¬èº«æ˜¯ä¸ä¼šæ£€æŸ¥æ•°æ®çš„è¶Šç•Œè¡Œä¸ºçš„ï¼\n\n3.æŒ‡é’ˆæŒ‡å‘ç©ºé—´é‡Šæ”¾å°±ç½®ä¹‹ä¸ºNULLåœ¨æˆ‘ä»¬æŒ‡é’ˆä½¿ç”¨å®Œæ¯•ä¹‹åï¼Œä¸ºäº†é¿å…æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´è¢«ç³»ç»Ÿé‡Šæ”¾\næˆ‘ä»¬å¯ä»¥å°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©ºæŒ‡é’ˆ,NULL\n4.æŒ‡é’ˆä½¿ç”¨ä¹‹å‰æ£€æŸ¥æœ‰æ•ˆæ€§ä»€ä¹ˆæ˜¯æœ‰æ•ˆæ€§?\nNULLçš„ç©ºæŒ‡é’ˆå°±æ˜¯æ— æ•ˆçš„\nä¸ºäº†é¿å…æˆ‘ä»¬å¼•ç”¨è¿™ç§æ— æ•ˆçš„ç©ºæŒ‡é’ˆï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨æŒ‡é’ˆä¹‹å‰ç”¨ifè¯­å¥åˆ¤æ–­ä¸€ä¸‹å®ƒæ˜¯å¦ä¸ºç©º\nif(p!=NULL)\t*p=10;\n\nåˆ¤æ–­ä¸ºæœ‰æ•ˆæŒ‡é’ˆï¼Œæˆ‘ä»¬å†ä½¿ç”¨å®ƒ\nåšåˆ°ä»¥ä¸Š4ç‚¹ï¼Œå°±èƒ½åŸºæœ¬é¿å…æˆ‘ä»¬çš„ä»£ç å‡ºé”™ã€‚è¿™åªèƒ½é¿å…ï¼Œå¹¶ä¸èƒ½æœç»\nâ€œä½ æ°¸è¿œå«ä¸é†’ä¸€ä¸ªæƒ³å†™bugçš„äººâ€\n\nç»“è¯­ä»¥ä¸Šå°±æ˜¯é‡æŒ‡é’ˆçš„åŸºæœ¬è§£é‡Šï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©\nç‚¹ä¸ªèµå†èµ°å§ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€VSã€‘å¦‚ä½•è§£å†³VSç¼–è¯‘å™¨scanfæŠ¥é”™é—®é¢˜","url":"/posts/4009185516/","content":"[toc]\né—®é¢˜æ¥æºå½“æˆ‘ä»¬ä½¿ç”¨vsç¼–è¯‘å™¨ç¼–è¯‘cè¯­è¨€ä»£ç ï¼Œå¹¶éœ€è¦ç”¨åˆ°ä¸€äº›éå¸¸å¸¸ç”¨çš„åº“å‡½æ•°çš„æ—¶å€™ï¼ˆå¦‚scanfï¼‰\nvsç¼–è¯‘å™¨é€šå¸¸ä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯\n\n\næœ‰çš„æ—¶å€™å³ä¾¿æŠ¥é”™äº†ï¼Œç¨‹åºä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ\n\nä½†æœ‰çš„æ—¶å€™å°±ä¼šåŒå›¾ä¸­ä¸€æ ·ï¼Œç¨‹åºæ— æ³•è¿è¡Œ\n\n\nå‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯vsç¼–è¯‘å™¨è®¤ä¸ºè¿™äº›åº“å‡½æ•°æ˜¯â€œä¸å®‰å…¨çš„â€ï¼ˆæˆ‘å¯çœŸè°¢è°¢ä½ ï¼Œæ‹…duoå¿ƒguané‚£xianä¹ˆshiå¤šï¼Œå¾®è½¯ï¼‰\nè§£å†³æ–¹æ³•è§£å†³è¿™ä¸ªæŠ¥é”™é—®é¢˜çš„æ–¹æ³•æœ‰ä¸¤ç§\n1.ä½¿ç”¨_Sä¸‹æ ‡å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åº“å‡½æ•°åé¢åŠ ä¸€ä¸ª_sï¼Œè¿™æ—¶å€™vså°±ä¼šæŠŠå®ƒè®¤ä¸ºæ˜¯â€œå®‰å…¨çš„å‡½æ•°â€ï¼Œç¨‹åºå°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†\n\næ–¹æ³•ä¸€çš„è‡´å‘½ç¼ºç‚¹ä½†æ˜¯è¿™ä¹ˆåšæœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¼Šç«¯â€”â€”è¯¥ä»£ç åªèƒ½åœ¨vsç¼–è¯‘å™¨é‡Œè¿è¡Œ\nå¦‚å›¾ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿™ä¸€ä¸²å¸¦_Sçš„ä»£ç å¤åˆ¶åˆ°**devc++**è¿™æ¬¾ç¼–è¯‘å™¨é‡Œé¢\ndevc++ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œæ— æ³•è¿è¡Œè¿™ä¸²ä»£ç \nåŒæ ·çš„ï¼Œå¦‚æœä½ éœ€è¦åœ¨moocã€ç‰›å®¢ç½‘æˆ–è€…å…¶ä»–åˆ·é¢˜ç½‘ç«™ä¸Šå¡«å†™ä»£ç çš„æ—¶å€™\nç³»ç»Ÿä¹Ÿæ— æ³•è¿è¡Œè¿™ç§å¸¦äº†_sçš„cè¯­è¨€ä»£ç \nè¿™æ—¶å€™ä»£ç çš„â€œå¯ç§»æ¤æ€§â€ ï¼ˆå³é€šç”¨æ€§ï¼‰å°±å˜å·®äº†ï¼\n\nè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬çš„è§£å†³æ–¹æ³•2äº†\n2.ä½¿ç”¨é˜²æŠ¥é”™è¯­å¥åªéœ€è¦åœ¨è¿™ä¸ªæºæ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ è¿™æ ·ä¸€ä¸²ä»£ç \n#define _CRT_SECURE_NO_WARNINGS 1\n\nè¿™ä¸²ä»£ç çš„ä½œç”¨å°±æ˜¯å±è”½æ‰vsç¼–è¯‘å™¨å¯¹å‡½æ•°å±é™©æ€§çš„æ’æŸ¥æŠ¥é”™\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ä»£ç å°±èƒ½æ­£å¸¸è¿è¡Œäº†\n\nè¿™æ ·æ“ä½œï¼Œå³ä¾¿æ˜¯å°†è¿™ä¸€è¡Œé˜²æŠ¥é”™ä»£ç ç§»æ¤åˆ°å¦å¤–ä¸€ä¸ªç¼–è¯‘å™¨é‡Œï¼Œè¿™ä¸²ä»£ç ä»ç„¶èƒ½æ­£å¸¸è¿è¡Œè€Œä¸”æœ‰çš„æ—¶å€™å³ä¾¿åŠ ä¸Š_sï¼Œè¿˜æ˜¯ä¼šå‡ºç°ä¸€äº›å’Œscanfæ— å…³çš„å¥‡æ€ªæŠ¥é”™ä½¿ç”¨æ–¹æ³•äºŒå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶è¿˜æ˜¯ä½¿ç”¨æ–¹æ³•äºŒå•¦ï¼\n\næ–¹æ³•äºŒçš„ç¼ºç‚¹ï¼Ÿä½ å¯èƒ½ä¼šè¯´ï¼Œé‚£æˆ‘å²‚ä¸æ˜¯æ¯æ¬¡å†™ä»£ç ä¹‹å‰éƒ½éœ€è¦æ‰“ä¸Šè¿™ä¹ˆä¸€ä¸ªdefineè¯­å¥ï¼Œé‚£æ ·ä¹Ÿå¤ªéº»çƒ¦äº†å§ï¼\nå†è¯´äº†ï¼Œæˆ‘ä¹ŸèƒŒä¸ä¸‹æ¥å•Šï¼\nåˆ«æ€¥ï¼Œä¸‹é¢æˆ‘å°±ä¼šå‘Šè¯‰ä½ æ€ä¹ˆè®©vsç¼–è¯‘å™¨æ¯æ¬¡åˆ›å»ºæºæ–‡ä»¶çš„æ—¶å€™è‡ªåŠ¨å¸¦ä¸Šè¿™ä¹ˆä¸€ä¸²ä»£ç \nå¦‚ä½•åœ¨vsç¼–è¯‘å™¨é‡ŒåŠ ä¸Šé»˜è®¤è¯­å¥è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¦å¤–ä¸€æ¬¾åŒæ ·å¾ˆç»å…¸çš„è½¯ä»¶â€”â€”Notepad++  \nå¦‚æœä½ è¿˜æ²¡å®‰è£…è¿™æ¬¾è½¯ä»¶ï¼Œè¿™é‡Œæ˜¯ä¸‹è½½é“¾æ¥â€”â€”&gt; [ç‚¹æˆ‘]\n\nå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬ç‚¹å‡»å·¦ä¸Šè§’çš„ æ–‡ä»¶\n\næ‰“å¼€å¦‚ä¸‹è·¯å¾„é‡Œï¼Œç®­å¤´æ‰€æŒ‡çš„new++fileæ–‡ä»¶\n\nvsç¼–è¯‘å™¨é»˜è®¤å®‰è£…è·¯å¾„æ˜¯cç›˜\nå¦‚æœä½ çš„vsç¼–è¯‘å™¨ä¸åœ¨cç›˜ï¼Œå¯ä»¥é€šè¿‡å³é”®æ¡Œé¢vsç¼–è¯‘å™¨çš„å¿«æ·æ–¹å¼ï¼Œæ‰“å¼€æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰¾åˆ°ä½ vsç¼–è¯‘å™¨çš„å®‰è£…è·¯å¾„\n\n\næ‰“å¼€ä»¥åæ˜¯ç©ºç™½çš„\næˆ‘ä»¬åªéœ€è¦è®²è¿™è¡Œdefineè¯­å¥åŠ å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œctrl+sä¿å­˜\n\nç”±äºvsç¼–è¯‘å™¨å¤„äºcç›˜ï¼Œä¿®æ”¹è¿™ä¸ªæ–‡ä»¶éœ€è¦ç”³è¯·ç®¡ç†å‘˜æƒé™ï¼Œç‚¹å‡»åŒæ„å³å¯ï¼\n\n#define _CRT_SECURE_NO_WARNINGS 1#include &lt;stdio.h&gt;\n\n\nè¿™æ—¶å€™ä½ åˆ›å»ºçš„æ–°çš„æºæ–‡ä»¶ï¼Œå°±ä¼šé»˜è®¤å¸¦ä¸Šè¿™ä¸²ä»£ç å•¦ï¼\nç”±äº&lt;stdio.h&gt;è¿™ä¸ªå¤´æ–‡ä»¶å®åœ¨æ˜¯å¤ªå¸¸ç”¨äº†ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒä¹ŸåŠ å…¥äº†è¿™ä¸ªæ–‡ä»¶é‡Œã€‚\nå¦‚æœä½ æ„¿æ„ï¼Œä¹Ÿå¯ä»¥æŠŠint main()åŠ å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œæ–¹æ³•åŒä¸Š\n\nè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡åˆ›å»ºæ–°çš„æºæ–‡ä»¶çš„æ—¶å€™è‡ªå·±æ‰‹æ‰“å•¦ï¼\nä¸€åŠ³æ°¸é€¸ï¼\n\nç»“è¯­å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹ä¸ªèµï¼\nä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘ç®€å•çš„printfé€’å½’","url":"/posts/4128252829/","content":"ç®€å•çš„Printé€’å½’\nè¯´å¥é¢˜å¤–è¯ï¼Œå¾ˆå¤šæ—¶å€™å•è¯æˆ‘æ˜¯è®¤è¯†çš„ï¼Œä½†æ˜¯å¦‚æœå®ƒå…¨å¤§å†™äº†ï¼Œæˆ‘æ€»è¦ååº”è€ä¸€ä¼šæ‰èƒ½æƒ³å‡ºæ¥å®ƒçš„æ„æ€\næœ‰å’Œæˆ‘ä¸€æ ·çš„äººå—?\n\nä»Šå¤©çš„cè¯­è¨€è¯¾è®²åˆ°äº†ä¸€é“éå¸¸ç»å…¸çš„é€’å½’é¢˜ç›®\nä»£ç å¦‚ä¸‹ï¼š\n#include &lt;stdio.h&gt;void Print(int n)&#123;\tif (n &gt; 9)\t\tPrint(n / 10);\tprintf(&quot;%d &quot;, n % 10);&#125;int main()&#123;\tint num = 0;\tscanf(&quot;%d&quot;, &amp;num);\tPrint(num);\treturn 0;&#125;\n\nç»“æœå¦‚ä¸‹\n\nè¿è¡Œé¡ºåºè°ˆåˆ°é€’å½’çš„æ—¶å€™ï¼Œæœ€é‡è¦çš„å°±æ˜¯è¦å¼„æ˜ç™½å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆè¿è¡Œçš„\nè€å¸ˆä¸Šè¯¾è®²çš„æ–¹æ³•éå¸¸ç›´è§‚çš„è¡¨ç¤ºäº†å®ƒçš„è¿ç®—é¡ºåº\nè¿™é‡Œæˆ‘ç”¨ç²˜è´´ä»£ç å—çš„æ–¹å¼æ¥å±•ç¤º\nåˆšå¼€å§‹æ‰§è¡Œçš„æ˜¯scanfè¾“å…¥ï¼Œè¿™é‡Œä¸å†èµ˜è¿°\nvoid Print(int n)&#123;\tif (n &gt; 9)\t\tPrint(n / 10);\tprintf(&quot;%d &quot;, n % 10);&#125;\n\nè¿™ä¸€å—æ˜¯æˆ‘ä»¬é€’å½’çš„ä¸»ä½“\nvoid Print(int n)&#123;\tif (n &gt; 9)\t  Print(3578 / 10);    \t\tif (n &gt; 9)\t\t\tPrint(357 / 10);    \tprintf(&quot;%d &quot;, 357 % 10);//7    \t\t\tif (n &gt; 9)\t\t\t\tPrint(35 / 10);    \t\tprintf(&quot;%d &quot;, 35 % 10);//5    \t\t\t\tif (n &gt; 9)//è¿™æ—¶å€™å€¼ä¸º3ï¼Œå·²ç»ä¸æ»¡è¶³æ¡ä»¶\t\t\t\t\t\tPrint(3 / 10);//è¯¥è¯­å¥ä¸æ‰§è¡Œ    \t\t\tprintf(&quot;%d &quot;, 3 % 10);//3\tprintf(&quot;%d &quot;, 3578 % 10);//8&#125;\n\nçœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹ä¹±ï¼Œåœ¨è¿™åŸºç¡€ä¸ŠåŠ ä¸Šä¸€äº›ç®­å¤´å°±ä¼šæ¸…æ™°äº†\n\nèµ·åˆæˆ‘çš„æƒ³æ³•æ˜¯ï¼Œåœ¨è¿›è¡Œifåˆ¤æ–­ä¹‹åï¼Œä¼šå…ˆæ‰§è¡Œä¸‹é¢çš„printfï¼Œå³å…ˆæ‰“å°æœ€åä¸€ä½æ•°8ï¼Œå†å‘å‰æ‰“å°\n\nå®é™…ä¸Šï¼Œifè¯­å¥åçš„Printå‡½æ•°çš„åµŒå¥—è°ƒç”¨æ˜¯åœ¨ä¸‹ä¸€è¡Œprintfä¹‹å‰çš„ã€\nä¹Ÿå°±æ˜¯è¯´å®ƒéœ€è¦åƒå›¾ä¸­è¿™æ ·å®Œå…¨è°ƒç”¨å®Œï¼Œç›´åˆ°ifåˆ¤æ–­ä¸ºå‡åï¼Œæ‰ä¼šä»åå¾€å‰è¿è¡Œprintfè¯­å¥\nè¿™æ‰æœ‰äº†æœ€å¼€å§‹æˆ‘è´´çš„ç»“æœ\nç¨‹åºä¾æ¬¡æ‰“å°äº†æ¯ä¸€ä½çš„æ•°å­—\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¶è—æ”¯æŒä¸€ä¸‹ï¼ä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘printfå‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼Œæ¶‰åŠå‡½æ•°ä¼ å‚","url":"/posts/3888883052/","content":"é—®é¢˜äº§ç”Ÿå¶ç„¶åœ¨cè¯­è¨€å­¦ä¹ äº¤æµç¾¤çœ‹åˆ°äº†è¿™ä¹ˆä¸€ä¸²è®©äººè´¹è§£çš„ä»£ç \n\n#include &lt;stdio.h&gt;int main()&#123;\tint i = 0;\tint j = 0;\tscanf(&quot;%d&quot;, &amp;i);\tj = -i++;\tprintf(&quot;%d %d %d&quot;, i, j, i++);\treturn 0;&#125;\n\nè¿™é‡Œè®©æˆ‘ç–‘æƒ‘çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆæ‰“å°çš„ç¬¬ä¸€ä¸ªiæ˜¯6è€Œä¸æ˜¯5ï¼Ÿ\n\nprintfè¯­å¥çš„æ‰§è¡Œé¡ºåºè¿™é‡Œè¦æ¶‰åŠåˆ°ä¸€ä¸ªä¹‹å‰æˆ‘å¹¶ä¸æ¸…æ¥šçš„çŸ¥è¯†ç‚¹\nscanf(&quot;%d&quot;, &amp;i);j = -i++;printf(&quot;%d %d %d&quot;, i, j, i++);\n\næŒ‰ç…§ä»¥å¾€æˆ‘çš„ç†è§£ï¼Œä»£ç çš„è¿è¡Œé¡ºåºæ˜¯è¿™æ ·çš„\n\n1.ç”¨scanfå°†æ•°å­—èµ‹å€¼ç»™i\n2.å°†-ièµ‹å€¼ç»™jï¼Œç„¶åi++ ï¼ˆæ³¨ï¼šåç½®++æ˜¯å…ˆä½¿ç”¨å†++ï¼‰\n3.printfå‡½æ•°ä¾æ¬¡æ‰“å°5ï¼Œ-4ï¼Œ6\n\nå¯ä»£ç å›å®ƒå¹¶ä¸æƒ³è¿™ä¹ˆè·‘\nè¿™é‡Œè¦æ¶‰åŠåˆ°å‡½æ•°å†…æ•°æ®ä¼ å‚çš„é—®é¢˜\nå‡½æ•°å†…æ•°æ®ä¼ å‚å‡½æ•°çš„ä¼ å‚æ˜¯ä»å³å¾€å·¦å¼€å§‹ä¼ å‚çš„\næ‰€ä»¥è¿™ä¸²ä»£ç åœ¨è¿è¡Œåˆ°printfçš„æ—¶å€™ï¼Œä¼šå…ˆæ‰§è¡Œç¬¬äºŒä¸ªi++è¯­å¥ï¼Œæ­¤æ—¶i&#x3D;6\nç„¶åå†ä»å·¦å¾€å³ä¾æ¬¡æ‰“å°iï¼Œjï¼Œå’Œåç½®++ä¹‹å‰çš„i\n\nâ€œé¦–å…ˆ-i++ï¼Œæ˜¯æŠŠ-içš„å€¼-4ç»™äº†jï¼Œç„¶åi++å˜æˆäº†5ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å‡½æ•°çš„ä¼ å‚äº†ï¼Œä¸€èˆ¬æ˜¯ä»å³3å‘å·¦ä¼ å‚çš„â€\n\næ‰“å°æ˜¯ä»å·¦å¾€å³æ‰“å°ï¼Œä½†æ˜¯æ‹¬å·å†…éƒ¨ä»å³å¾€å·¦è®¡ç®—\n\næ€»ç»“è¿™é‡Œé€ç»™å¤§å®¶ä¸€å¼ å›¾ï¼Œæ€»ç»“è¿™ä¸ªé—®é¢˜çš„åŸç†\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å§ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•å°†è¾“å…¥çš„æ•°å­—é€†åºæ‰“å°","url":"/posts/2746269565/","content":"ï»¿è¿™ä¸ªé—®é¢˜æ˜¯æˆ‘åœ¨åšå­¦æ ¡çš„ä½œä¸šæ—¶å€™çœ‹åˆ°çš„ã€‚åªéšçº¦æœ‰å°è±¡è®²è¿‡ï¼Œä½†æ˜¯å¿˜è®°äº†æ€ä¹ˆæ“ä½œã€‚å¬åŒå­¦çš„ç‚¹é€šæ‰å›æƒ³èµ·æ¥ï¼Œç‰¹æ­¤å†™ä¸ªåšå®¢ç•™è®°\n\n\n[toc]\né€†åºæ‰“å°ç›®çš„ï¼šè¾“å…¥â€œ789â€ï¼Œæ‰“å°â€œ987â€\n\næ³¨ï¼šæœ¬åšå®¢çš„æ•°å­—é€†åºåªæ¶‰åŠ åè¿›åˆ¶\n\nä»£ç å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼š1.åˆ©ç”¨ifè¯­å¥è¿›è¡Œå¤§å°åˆ¤æ–­ï¼Œç›´åˆ°é€‰å‡ºä»å¤§åˆ°å°çš„æ•°å­—æ’åºè¿™ä¸ªæ–¹æ³•ååˆ†å¤æ‚ï¼Œç¨ä¸ç•™æ„å°±ä¼šå¼„é”™ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­ä¸æ¨èè¿™æ ·æ“ä½œè¿™é‡Œå°±ä¸èµ˜è¿°å…·ä½“ä»£ç äº†ã€‚(æ‰ä¸æ˜¯æ‡’ï¼Œå‹æ ¹æ²¡è¯•è¿‡ï¼‰2.ä½¿ç”¨%10çš„æ–¹æ³•ç›´æ¥æ‰“å°ä»£ç å¦‚ä¸‹ï¼š\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 0;\tscanf(&quot;%d&quot;, &amp;a);\tprintf(&quot;%d&quot;, a % 10);\tprintf(&quot;%d&quot;, a/10 % 10);\tprintf(&quot;%d&quot;, a/100 % 10);\treturn 0;&#125;\n\nä»£ç ç»“æœå¦‚ä¸‹\n\nè¿™ä¸ªä»£ç æˆåŠŸè¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„å¼Šç«¯å¦‚æœæˆ‘ä»¬éœ€è¦æ›´å¤šä½çš„æ•°å­—çš„é€†åºæ•°æ—¶ï¼Œè¿™ä¸ªä»£ç å°±ä¼šå˜å¾—å¾ˆé•¿ï¼Œè€Œä¸”æ¯æ¬¡éƒ½éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„printf\n\nä»£ç ä¼˜åŒ–1æƒ³è¦é€†åºæ¯”è¾ƒé•¿çš„æ•°å­—ï¼Œå°±éœ€è¦ç”¨åˆ°å¾ªç¯è¯­å¥ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯forå¾ªç¯ä¸»è¦éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œaæ¯%10ä¸€æ¬¡åå°±éœ€è¦é™¤ä»¥10å†%10ä¸€æ¬¡\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 0;\tint n = 0;\tint i = 0;\tprintf(&quot;è¯·è¾“å…¥éœ€è¦é€†åºçš„æ•°å­—ï¼š&quot;);\tscanf(&quot;%d&quot;, &amp;a);\tprintf(&quot;è¯·è¾“å…¥è¯¥æ•°å­—çš„ä½æ•°ï¼š&quot;);\tscanf(&quot;%d&quot;, &amp;n);\tfor (i = 0; i &lt; n; i++)\t&#123;\t\t\tprintf(&quot;%d&quot;, a % 10);\t\ta /= 10;\t\t\t&#125;\treturn 0;&#125;\n\nä»£ç è¿è¡Œç»“æœå¦‚ä¸‹\næˆ‘ä»¬çš„ç›®çš„æˆåŠŸè¾¾æˆï¼\n\nä»£ç ä¼˜åŒ–2ä¸Šé¢çš„ä»£ç è™½ç„¶å®Œæˆäº†æˆ‘ä»¬è®¾æƒ³çš„ç›®çš„ï¼Œä½†å®ƒè¿˜æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹\néœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥æ•°å­—çš„ä½æ•°\n\nè®¾æƒ³ä¸€ä¸‹ï¼Œç³»ç»Ÿéœ€è¦ä½ å¡«å†™ä½ çš„æ‰‹æœºå·ï¼Œä½ è¾“å…¥è‡ªå·±çš„æ‰‹æœºå·åï¼Œç³»ç»Ÿè¿˜è¦å†é—®é—®ä½ â€œä½ çš„æ‰‹æœºå·æœ‰å‡ ä½æ•°â€\nè¿™æ¢è°éƒ½è¡€å‹é£™å‡ï¼Œæ€’mä»£ç çŒ¿äº†å§ï¼\n\né‚£æ€æ ·è®©ä»£ç è‡ªåŠ¨é€†è½¬æˆ‘ä»¬éœ€è¦çš„æ•°å­—å‘¢ï¼Ÿ\n\næ³¨ï¼šè¿™ä¸²ä»£ç æ˜¯æˆ‘åœ¨bç«™çœ‹åˆ°çš„ï¼Œé¡¿æ—¶è”æƒ³åˆ°äº†è‡ªå·±çš„åšå®¢ï¼Œäºæ˜¯åˆè·‘è¿‡æ¥æ›´æ–°äº†! åŸè§†é¢‘é“¾æ¥\n\n\nå›¾é‡Œwhileåé¢çš„ä¸ç­‰äºç¬¦å·åº”è¯¥æ˜¯ä¸€ä¸ªvscodeçš„æ’ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ”¹æˆ!&#x3D;\n#include &lt;stdio.h&gt;int main()&#123;\tint num;\tprintf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼›&quot;);\tscanf(&quot;%d&quot;, &amp;num);\tint reverse = 0;\twhile (num != 0)\t&#123;\t\treverse = reverse * 10 + num % 10;\t\tnum /= 10;\t\t\t&#125;\t//è¾“å‡ºåè½¬åçš„æ•°å­—\tprintf(&quot;åè½¬åçš„æ•°å­—æ˜¯ï¼š%d\\n&quot;, reverse);\treturn 0;&#125;\n\n\nè¿™ä¸²ä»£ç å°±æ˜¯å®Œç¾çš„äº†å—ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬é”®å…¥1000ï¼Œç»“æœå°±ä¼šå‘ç”Ÿä¸€äº›ç»†å¾®çš„å˜åŒ–\n\nè¾“å‡ºçš„ç»“æœç«Ÿç„¶æ˜¯1ï¼Œä½†æˆ‘ä»¬éœ€è¦çš„åº”è¯¥æ˜¯0001\n\nä»£ç ä¼˜åŒ–3è¿™é‡Œæ¶‰åŠåˆ°äº†%dæ—¶å·¦è¡¥0çš„é—®é¢˜\nprintfæ‰“å°æ—¶%då·¦è¡¥0å‡è®¾ä¸‹é¢è¿™ä¸²ä»£ç æ˜¯éœ€è¦è¾“å‡º1000é€†åºåæ•°å­—0001çš„printfè¯­å¥\nå› ä¸º1000åªæœ‰4ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨%å’Œdä¹‹é—´åŠ ä¸Š04\nå³æ»¡4ä½ä¸è¡¥ï¼Œä¸æ»¡4ä½å·¦è¡¥0\nint n =1;pirntf(&quot;%04d&quot;,n);\n\nä½†åœ¨é€†åºæ•°å­—é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å°çš„æ•°å­—é•¿åº¦æ˜¯ä¸å¯æ§çš„\nè¿™é‡Œéœ€è¦ç”¨åˆ°å·¦è¡¥0çš„å¦å¤–ä¸€ç§ä»£ç \n\nç”¨å¦å¤–ä¸€ä¸ªå˜é‡æ¥è¡¨ç¤ºæ•°çš„ä½æ•°\n\nint n=1;int m=3;//ä»£è¡¨æ•°çš„ä½æ•°ï¼ŒåŒ%03dé‡Œé¢3çš„æ„ä¹‰ä¸€æ ·pirntf(&quot;%0*d&quot;,m,n);\n\nè¿™æ ·ä¸‹æ¥å°±ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åŸæœ‰çš„whileå¾ªç¯é‡Œé¢åŠ ä¸Šå¦å¤–ä¸€ä¸ªå˜é‡\næ¯æ¬¡é€†åºå¾ªç¯å®Œæˆåï¼Œè¿™ä¸ªå˜é‡éƒ½++ä¸€æ¬¡ï¼Œå°±èƒ½è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„\n#include &lt;stdio.h&gt;int main()&#123;\tint num;\tint j = 0;\tprintf(&quot;è¯·è¾“å…¥ä¸€ä¸ªæ•°ï¼›&quot;);\tscanf(&quot;%d&quot;, &amp;num);\tint reverse = 0;\twhile (num != 0)\t&#123;\t\treverse = reverse * 10 + num % 10;\t\tnum /= 10;\t\tj++;\t&#125;\t//è¾“å‡ºåè½¬åçš„æ•°å­—\tprintf(&quot;åè½¬åçš„æ•°å­—æ˜¯ï¼š%0*d\\n&quot;,j, reverse);\treturn 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼š\n\nè¿™ä¸‹æˆ‘ä»¬çš„ç›®çš„æ‰çœŸæ­£å®Œæˆäº†ï¼Œæ—¢å¯ä»¥ä¸ç”¨è‡ªå·±å¤šè¾“å…¥ä¸€éæ•°å­—çš„ä¸ªæ•°\nåˆèƒ½åœ¨è¾“å…¥10000è¿™ç±»æ•°å­—çš„æ—¶å€™ï¼Œé€†åºåè‡ªåŠ¨å·¦è¡¥0\n\nå¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘ç”¨é€’å½’å’Œéé€’å½’ï¼Œæ±‚ç¬¬nä¸ªæ–æ³¢é‚£å¥‘æ•°","url":"/posts/1174654848/","content":"[toc]\né—®é¢˜å¼•å…¥ - ä»€ä¹ˆæ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Ÿæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­ï¼Œç¬¬né¡¹ä¸ºn-1å’Œn-2é¡¹ä¹‹å’Œ\n\n1ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ8ï¼Œ13ï¼Œ21ï¼Œ34ï¼Œ55â€¦â€¦\n\nè¿™ä¸ªæ•°åˆ—éå¸¸ç»å…¸ï¼Œç»å¸¸ç”¨äºç¼–ç¨‹è¯­è¨€åˆå­¦è€…çš„ç»ƒä¹ \næ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”¨éé€’å½’å’Œé€’å½’ä¸¤ç§æ–¹å¼æ¥å®ç°è¿™ä¸ªæ•°åˆ—\nå¹¶äº†è§£ä¸¤ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼\n\n1.éé€’å½’æ–¹æ³•ï¼ˆè¿­ä»£ï¼‰ä»€ä¹ˆæ˜¯è¿­ä»£ï¼Ÿ\nè¿­ä»£å…¶å®å’Œå¾ªç¯çš„æ„ä¹‰å·®ä¸å¤šï¼ˆä¸ªäººç†è§£ï¼‰\n\næˆ‘ä»¬è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ—¶å€™ï¼Œéœ€è¦ä»ç¬¬ä¸€é¡¹å’Œç¬¬äºŒé¡¹1ã€1å¼€å§‹è®¡ç®—\næ²¡åä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰ä¸¤é¡¹æ•°å­—ä¹‹å’Œ\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å¾ªç¯ï¼Œä»ç¬¬ä¸€é¡¹å¼€å§‹ä¸æ–­ç›¸åŠ ï¼Œå†ä½¿å…¶ä¸­ä¸€ä¸ªåŠ æ•°ç­‰äºå¾—åˆ°çš„å’Œ\nä»¥æ­¤è¿­ä»£ï¼Œå°±èƒ½å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„ç¬¬nä¸ªæ•°å­—\n\nä»£ç å®ç°#include&lt;stdio.h&gt;//éé€’å½’int fo1(int a)&#123;\tint tmp = 0;\tint num1 = 1;\tint num2 =1;\tif (a &lt; 3) //å‰ä¸¤é¡¹éƒ½ä¸º1\t&#123;\t\treturn 1;\t&#125;\telse//ä»ç¬¬ä¸‰é¡¹å¼€å§‹è¿­ä»£\t&#123;\t\tfor (int i = 0; i &lt;= a - 3; i++)\t\t&#123;\t\t\ttmp = num1 + num2;\t\t\tnum1 = num2;\t\t\tnum2 = tmp;\t\t&#125;\t\treturn tmp;\t&#125;&#125;int main()&#123;\tint a,b = 0;\tscanf(&quot;%d&quot;, &amp;a);\tb=fo1(a);\tprintf(&quot;%d\\n&quot;, b);\treturn 0;&#125;\n\nç»“æœå¦‚å›¾ï¼š\n\nè¿­ä»£çš„ç¼ºç‚¹è¿™ç§æ–¹æ³•æœ‰ä¸ªç¼ºç‚¹ï¼Œå³æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œå®¹æ˜“æ ˆæº¢å‡º\nå¦‚æœæ ˆæº¢å‡ºæ²¡æœ‰å½±å“ï¼Œè¿­ä»£çš„æ–¹æ³•å°±éå¸¸é€‚åˆ\n\næ¯”å¦‚ï¼š\n\né¢˜ç›®è§„å®šäº†ä¸è€ƒè™‘æ ˆæº¢å‡º\n\né¢˜ç›®è®¾å®šäº†æ•°å­—èŒƒå›´\n\n\n\n\n2.é€’å½’ä½¿ç”¨é€’å½’çš„åŸºæœ¬æ–¹æ³•ï¼Œå’Œè¿­ä»£å…¶å®æ˜¯ä¸€æ ·çš„\næœ€å¤§çš„ä¸åŒæ˜¯ï¼šé€’å½’çš„æ ¸å¿ƒæ˜¯å‡½æ•°è‡ªå·±è°ƒç”¨è‡ªå·±\n\nä»£ç å®ç°#include&lt;stdio.h&gt;//é€’å½’int fo2(int a)&#123;\tif ((a == 1) || (a == 2))\t&#123;\t\treturn 1;\t&#125;\telse\t&#123;\t\treturn (fo2(a - 1) )+( fo2(a- 2));//n-1å’Œn-2é¡¹\t&#125;&#125;int main()&#123;\tint a,b = 0;\tscanf(&quot;%d&quot;, &amp;a);\tb=fo2(a);\tprintf(&quot;%d\\n&quot;, b);\treturn 0;&#125;\n\næœ€ç»ˆæ‰§è¡Œçš„æ•ˆæœæ˜¯ä¸€æ ·çš„\né€’å½’çš„ç¼ºç‚¹é€’å½’çš„å®ç°æ–¹å¼æ˜¯å‡½æ•°ä¸åœåœ°è‡ªå·±è°ƒç”¨è‡ªå·±\n\nå¦‚å›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬éœ€è¦ç¬¬50ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„æ•°æ—¶\nå‡½æ•°éœ€è¦ä»50å¼€å§‹ï¼Œ49ã€48ï¼Œå†48ã€47â€¦â€¦\nè¿™ä¹ˆä¸€ç›´é€’å½’åˆ°ç¬¬3ä¸ªæ–æ³¢é‚£å¥‘åˆ—æ•°ï¼Œæ‰èƒ½é€çº§è¿”å›æ¯é¡¹çš„æ•°å­—ï¼Œå¾—å‡ºæœ€ç»ˆç­”æ¡ˆ\nè¿™å°±å¤§å¤§å¢åŠ äº†ç¨‹åºè¿è¡Œçš„æ—¶é—´ï¼\n\nä½ å¯èƒ½ä¼šå‘ç°ç¨‹åºä¾æ—§å¾ˆå¿«è¿è¡Œå®Œäº†ï¼Œé‚£æ˜¯å› ä¸ºç°åœ¨ç”µè„‘cpuçš„è¿è¡Œé€Ÿåº¦å·²ç»éå¸¸å¿«äº†\nä½†åœ¨æœ‰è¿è¡Œæ—¶é—´è¦æ±‚çš„é¢˜ç›®ä¸­ï¼Œè¿™æ ·æµªè´¹æ—¶é—´æ˜¯ä¸‡ä¸‡ä¸å¯çš„\n\n\næ€»ç»“é€’å½’å’Œè¿­ä»£ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜åŠ£ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…·ä½“æƒ…å¢ƒä¸­é€‰æ‹©æ˜¯ä½¿ç”¨é€’å½’è¿˜æ˜¯è¿­ä»£\nè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—åªæ˜¯è¿™å…¶ä¸­çš„ä¸€éƒ¨åˆ†\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œé‚£å°±ç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„"]},{"title":"ã€Cè¯­è¨€ã€‘éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³","url":"/posts/3088418740/","content":"é—®é¢˜æ¥æºè¿™æ˜¯å­¦æ ¡çš„ä¸€ä¸ªä½œä¸šï¼ŒåŸé¢˜å¦‚ä¸‹\n\né¢˜ç›®å…ˆç»™å‡ºäº†å“¥å¾·å·´èµ«çŒœæƒ³çš„èƒŒæ™¯çŸ¥è¯†ï¼ˆæˆ‘è¿˜çœŸä¸çŸ¥é“ï¼‰\n2000ä»¥å†…çš„æ­£å¶æ•°éƒ½èƒ½åˆ†è§£æˆä¸¤ä¸ªè´¨æ•°ï¼ˆç´ æ•°ï¼‰ä¹‹å’Œ\né¢˜ç›®è¦æ±‚ä¸‹é¢æ¥æ¢³ç†ä¸€ä¸‹é¢˜ç›®çš„è¦æ±‚ï¼š\n\nè¾“å‡ºæ ·å¼ä¸ºa&#x3D;b+cï¼Œä½¿ç”¨%4d&#x3D;%4d+%4dè¾“å‡º\næ¯è¡Œè¾“å‡º4ä¸ªï¼Œæ¯è¡Œæœ€åä¸€ä¸ªè¾“å‡ºæ— ç©ºæ ¼\næ¯ä¸ªå¶æ•°åªéœ€è¦ä¸€ä¸ªç»“æœå³å¯ï¼ˆåç»­è¾ƒå¤§çš„å¶æ•°æœ‰å¾ˆå¤šç§è§£ï¼‰\n\nå¼„æ‡‚äº†é¢˜ç›®è¦æ±‚ï¼Œä¸‹é¢å°±æ¥ä¸€æ­¥ä¸€æ­¥å†™ä»£ç \n\nå¦‚ä½•åˆ¤æ–­ç´ æ•°ï¼Ÿåœ¨ä¸Šç¯‡åšå®¢é‡Œé¢æåˆ°äº†å¦‚ä½•åˆ¤æ–­ç´ æ•°&#x3D;&#x3D;&gt;ã€é“¾æ¥ã€‘ï¼Œè¿™é‡Œä¸å†èµ˜è¿° \næˆ‘ä»¬éœ€è¦æå®šçš„æ˜¯åˆ¤æ–­æ˜¯é‚£ä¸¤ä¸ªç´ æ•°bã€cç›¸åŠ ç­‰äºæˆ‘ä»¬éœ€è¦çš„é‚£ä¸ªæ•°a\nå› ä¸ºéœ€è¦å¤šæ¬¡åˆ¤æ–­ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\nint SuShu(int a)&#123;\tif (a == 2)\t&#123;\t\treturn 1;\t&#125;\tint j = 0;\tfor(j = 2; j &lt;=sqrt(a); j++)\t&#123;\t\tif (a % j == 0)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t&#125;\treturn 1;&#125;\n\nä¸ºä»€ä¹ˆæ˜¯return1å’Œ0å‘¢ï¼Ÿ\nå› ä¸ºåœ¨å†™è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œæˆ‘æœ¬æ¥æ˜¯æƒ³åˆ¤æ–­ä¹‹åè¿”å›ä¸€ä¸ªç´ æ•°ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ•ˆç‡å¤ªä½\nè€Œä¸”å†™åˆ°åé¢æˆ‘è‡ªå·±éƒ½ä¸ä¼šå†™äº†ï¼Œé‚æ”¾å¼ƒã€‚\n\nä¸»å‡½æ•°\næœ€ç»ˆå®ç°å½¢å¼ï¼šn&#x3D;a+(n-a)\n\nåœ¨è‡ªå®šä»¥å‡½æ•°é‡Œé¢è¿”å›çš„å€¼æ˜¯1å’Œ0\nä¸»å‡½æ•°é‡Œé¢å°±éœ€è¦å†…å®¹æ¥æ¥æ”¶\nif (SuShu(a) &amp;&amp; SuShu(n - a))//åˆ¤æ–­aå’Œn-aæ˜¯å¦éƒ½æ˜¯ç´ æ•°\n\nåŒæ—¶æˆ‘ä»¬éœ€è¦å®Œæˆæ‰“å°4è¡Œæ¢ä¸€è¡Œï¼Œä»¥åŠæ¯è¡Œæœ€åä¸€ä¸ªä¸èƒ½æœ‰ç©ºæ ¼çš„è¦æ±‚\nè¿™æ—¶å€™ç›´æ¥åœ¨printfè¯­å¥é‡Œé¢åŠ ç©ºæ ¼å·²ç»ä¸å¤Ÿäº†\néœ€è¦ç”¨åˆ°åˆ¤æ–­è¯­å¥ï¼Œåˆ¤æ–­å·²ç»æ‰“å°äº†å‡ ä¸ªç­‰å¼\nif (SuShu(a) &amp;&amp; SuShu(n - a))&#123;\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\tcount++;//æ¯æ‰“å°ä¸€æ¬¡å°±++ä¸€æ¬¡\tif (count % 4 == 0)\t&#123;  //æ‰“å°4æ¬¡åæ‰“å°ä¸€ä¸ªæ¢è¡Œç¬¦\tprintf(&quot;\\n&quot;);\t&#125;\telse\t&#123;  //ä¸å¤Ÿ4æ¬¡ï¼Œéœ€è¦æ‰“å°ç©ºæ ¼\tprintf(&quot; &quot;);\t&#125;&#125;\n\nç´ æ•°åˆ¤æ–­çš„éƒ¨åˆ†æˆ‘ä»¬å·²ç»å†™å®Œäº†\næ¥ä¸‹æ¥è¦å†™çš„æ˜¯ä¸€ä¸ªforå¾ªç¯ï¼Œè®©nä»4å¼€å§‹ä¸€ç›´+åˆ°2000\nå¦å¤–ï¼ŒåŒã€å¦‚ä½•åˆ¤æ–­ç´ æ•°ã€‘åšå®¢ä¸­çš„å¼€å¹³æ–¹æ³•ä¸€æ ·\nåœ¨éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³çš„æ—¶å€™ï¼Œè‹¥a&#x3D;b+cï¼Œbå’Œcä¸­è‚¯å®šæœ‰ä¸€ä¸ªæ•°å°äºæˆ–ç­‰äºa&#x2F;2\nåœ¨å†™açš„forå¾ªç¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è®©åˆ¤æ–­æ¡ä»¶a&lt;&#x3D;n&#x2F;2ï¼Œè€Œä¸æ˜¯a&lt;n\nfor (n = 4; n &lt;= 2000; n+=2)&#123;\tfor (int a = 2; a &lt;= n/2 ; a++)\t&#123;  //åœ¨ä¹‹å‰æˆ‘ä»¬å¹¶æ²¡æœ‰å®šä¹‰aï¼Œéœ€è¦åœ¨forå¾ªç¯é‡ŒåŠ ä¸Šint\t\tif (SuShu(a) &amp;&amp; SuShu(n - a))\t\t&#123;\t\t\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\t\t\tcount++;\t\t\tif (count % 4 == 0)\t\t\t&#123;\t\t\t\tprintf(&quot;\\n&quot;);\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\tprintf(&quot; &quot;);\t\t\t&#125;\t\t&#125;\t&#125;\t&#125;\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¸»å‡½æ•°ä¹Ÿå®Œæˆå•¦ï¼\nå®Œæ•´ä»£ç +æ•ˆæœæ¼”ç¤º#include &lt;stdio.h&gt;#include &lt;math.h&gt; int SuShu(int a)&#123;\tif (a == 2)\t&#123;\t\treturn 1;\t&#125;\tint j = 0;\tfor(j = 2; j &lt;=sqrt(a); j++)\t&#123;\t\tif (a % j == 0)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t&#125;\treturn 1;&#125;//éªŒè¯å“¥å¾·å·´èµ«çŒœæƒ³ï¼Œè¾“å‡º4åˆ°2000çš„å¶æ•°//æ¯ä¸ªå¶æ•°çš„ç»“æœåªè¾“å‡ºä¸€æ¬¡int main()&#123;\tint n = 0;\tint count = 0;\tfor (n = 4; n &lt;= 2000; n+=2)\t&#123;\t\tfor (int a = 2; a &lt;= n/2 ; a++)\t\t&#123;\t\t\tif (SuShu(a) &amp;&amp; SuShu(n - a))\t\t\t&#123;\t\t\t\tprintf(&quot;%4d=%4d+%4d&quot;, n, a, n - a);\t\t\t\tcount++;\t\t\t\tif (count % 4 == 0)\t\t\t\t&#123;\t\t\t\t\tprintf(&quot;\\n&quot;);\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\tprintf(&quot; &quot;);\t\t\t\t&#125;\t\t\t\tbreak; //åªæ‰“å°ä¸€ç§æƒ…å†µ\t\t\t&#125;\t\t&#125;\t\t\t&#125;\treturn 0;&#125;\n\nç»†å¿ƒçš„ä½ è‚¯å®šæ³¨æ„åˆ°ï¼Œåœ¨mainå‡½æ•°ä¸­åˆ¤æ–­ç´ æ•°çš„è¯­å¥é‡Œå¤šäº†ä¸€ä¸ªbreakï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nå¦‚æœæ²¡æœ‰breakï¼Œç»“æœå¦‚ä¸‹ï¼š\nä»£ç ä¼šå°†ç¬¦åˆæ¡ä»¶çš„ç´ æ•°ç›¸åŠ å…¨éƒ¨æ‰“å°å‡ºæ¥\nè¿™æ˜¾ç„¶ä¸ç¬¦åˆæ¯ä¸ªå¶æ•°çš„ç»“æœåªè¾“å‡ºä¸€æ¬¡çš„è¦æ±‚\n\nä½†åœ¨åŠ äº†breakè¿™ä¸ªæ–­ç‚¹ä¹‹å\nä»£ç çš„ç»“æœå°±å’Œé¢˜ç›®è¦æ±‚çš„ä¸€æ ·äº†\n\n\nå†™ä»£ç ä¸­çš„è¯¯è§£åœ¨æœ€ç»ˆæäº¤ä»£ç çš„æ—¶å€™ï¼Œæˆ‘çš„ä»£ç æ ¼å¼å‡ºé”™äº†\nåŸå› æ˜¯æˆ‘åœ¨printfè¯­å¥é‡Œé¢åŠ å¤šäº†ä¸¤ä¸ªç©ºæ ¼ï¼Œå¦‚ä¸‹ï¼š\nprintf(&quot;%4d= %4d+ %4d&quot;, n, a, n - a);\n\nä¸ºä»€ä¹ˆæˆ‘ä¼šæƒ³å½“ç„¶çš„å¤šåŠ ä¸¤ä¸ªç©ºæ ¼å‘¢ï¼Ÿ\nå› ä¸ºé¢˜ç›®æ‰€ç»™çš„è¾“å‡ºæ ·ä¾‹ï¼Œè®©æˆ‘è¯¯ä»¥ä¸º&#x3D;å’Œ+ä¹‹é—´éƒ½æœ‰ä¸¤ä¸ªç©ºæ ¼\n\nå®é™…ä¸Šè¿™é‡Œå¹¶æ²¡æœ‰ç©ºæ ¼ï¼Œå®ƒçš„â€œç©ºæ ¼â€æ˜¯printfä¸­çš„%4dé€ æˆçš„\nä»£ç ç»™è¿™é‡Œç•™äº†4ä¸ªæ•°å­—çš„ä½ç½®ï¼Œä½†æ˜¯å¤§å¤šéƒ½åªæœ‰ä¸€ä¸ªæ•°å­—å’Œä¸¤ä¸ªæ•°å­—\näºæ˜¯å®ƒä»¬å‰é¢å°±ä¼šæœ‰3æˆ–è€…2ä¸ªç•™ç»™æ•°å­—çš„ç©ºï¼Œè®©æˆ‘è¯¯ä»¥ä¸ºè¿™é‡Œæœ‰ç©ºæ ¼\nåŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡ï¼\n\næ€»ç»“é€šè¿‡è¿™é“é¢˜ï¼Œæˆ‘å¤ä¹ äº†å¾ªç¯å’Œè‡ªå®šä¹‰å‡½æ•°çš„å†™æ³•ï¼Œä¹Ÿè·å¾—äº†å“¥å¾·å·´èµ«çŒœæƒ³çš„æ–°çŸ¥è¯†\nå¤šåˆ·åˆ·é¢˜æ€»æ˜¯å¥½çš„\nå¸Œæœ›è¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘å¦‚ä½•åˆ¤æ–­ç´ æ•°","url":"/posts/2649139425/","content":"å¦‚ä½•åˆ¤æ–­ç´ æ•°\né¢˜ç›®è¦æ±‚ï¼šè¾“å‡º100-200çš„ç´ æ•°\n\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯ç´ æ•°ï¼ˆè´¨æ•°ï¼‰ï¼Œä»¥é˜²æœ‰äººå¿˜è®°ï¼ˆæ¯”å¦‚åˆšå­¦å¼€å§‹å­¦cçš„æˆ‘å°±å¿˜è®°äº†ï¼‰\nç´ æ•°ï¼ˆè´¨æ•°ï¼‰åªèƒ½è¢«1å’Œå®ƒè‡ªå·±æ•´é™¤\n\n\n7åªèƒ½è¢«1å’Œ7æ•´é™¤ï¼Œæ˜¯ç´ æ•°\n9èƒ½è¢«3æ•´é™¤ï¼Œä¸æ˜¯ç´ æ•°\n\n\næ–¹æ³•1â€”è¯•é™¤æ³•#include&lt;stdio.h&gt;int main()&#123;    int i=0;    int count=0;    for(i=100;i&lt;=200;i++)    &#123;        int j=0;        for(j=2;j&lt;i;j++)        &#123;             if(i%j==0)//iå¯ä»¥æ•´é™¤jï¼Œiä¸æ˜¯ç´ æ•°             &#123;                 break;             &#125;        &#125;        if(j==i)//iåªèƒ½æ•´é™¤å®ƒè‡ªå·±ï¼Œæ˜¯ç´ æ•°        &#123;            count++;            printf(&quot;%d &quot;,i);        &#125;    &#125;    printf(&quot;\\ncount=%d\\n&quot;,count);//è®¡ç®—100-200ä¹‹é—´æœ‰å‡ ä¸ªç´ æ•°    return 0;&#125;\n\n\nè¿™ä¸ªä»£ç æ¯”è¾ƒæ­»ï¼Œåªæ˜¯è¾“å‡ºäº†100åˆ°200ä¹‹é—´çš„ç´ æ•°ï¼Œå®Œæˆäº†é¢˜ç›®çš„è¦æ±‚\næˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ”¹é€ æˆè¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ç´ æ•°çš„å½¢å¼\n\nä»£ç æ”¹é€ 1-1\nç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—\nä»£ç åˆ¤æ–­æ˜¯å¦ä¸ºç´ æ•°\næ˜¯ï¼Œè¾“å‡ºâ€œæ˜¯ç´ æ•°â€ä»¥åŠç”¨æˆ·è¾“å…¥çš„å€¼\nä¸æ˜¯ï¼Œè¾“å‡ºâ€œä¸æ˜¯ç´ æ•°â€\n\n#include&lt;stdio.h&gt;int main()&#123;    int i=0;    int j=0;    scanf(&quot;%d&quot;,&amp;i);    for(j=2;j&lt;i;j++)    &#123;    \tif(i%j==0)        &#123;            printf(&quot;ä¸æ˜¯ç´ æ•°\\n&quot;);            break;    \t&#125;\t&#125;    if(j==i)    &#123;        printf(&quot;æ˜¯ç´ æ•°,i=%d\\n&quot;,i);    &#125;      &#125;\n\nç»“æœå¦‚ä¸‹ï¼š\n\n\n\nä¸Šé¢çš„è¿™ä¸²ä»£ç èƒ½å¾ˆå¥½åœ°å®Œæˆæˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†å®ƒè¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´\næ–¹æ³•2â€”å¼€å¹³æ–¹æ³•æ–¹æ³•1ä¸­çš„forå¾ªç¯ä¸ºj&lt;i\nå¦‚æœæ•°å­—å¾ˆå¤§çš„è¯ï¼Œè¦å¾ªç¯éå¸¸å¤šæ¬¡æ‰èƒ½å‡ºç°j&#x3D;&#x3D;içš„æƒ…å†µ\nè¿™å°±æ‹–æ…¢äº†æˆ‘ä»¬ç¨‹åºè¿è¡Œçš„é€Ÿåº¦\nè¿™é‡Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ¦‚å¿µ\n\nè‹¥i&#x3D;a*b\naå’Œbä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­— &lt;&#x3D; å¼€å¹³æ–¹i\n\n\nå¦‚16&#x3D;2x8&#x3D;4x4\nå…¶ä¸­2&lt;4\n\nè¿™æ ·å°±èƒ½å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š\nåœ¨æ ¹å·iä¹‹å‰ä¸€å®šæœ‰ä¸€ä¸ªæ•°å­—næ˜¯éç´ æ•°çš„é™¤æ•°\nå¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªæ•°å­—nï¼Œè¯´æ˜è¯¥æ•°å­—ä¸ºè´¨æ•°\n\nåˆ©ç”¨å¼€å¹³æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€è¦æŸ¥æ‰¾çš„æ•°å­—èŒƒå›´ç¼©å°å¾ˆå¤š\nä»¥ä¸‹æ˜¯ç”¨è¯¥æ–¹æ³•å®Œæˆå¼€å¤´é¢˜ç›®è¦æ±‚çš„ä»£ç ç¤ºä¾‹\n#include&lt;stdio.h&gt;int main()&#123;\tint i=0;\tfor(i=101;i&lt;=200;i+=2)\t&#123;\t\tint j=0;\t\tfor(j=2;j&lt;=sqrt(i);j++)\t\t&#123;\t\t\tif(i%j==0)\t\t\t&#123;\t\t\t\tbreak;             &#125;\t\t&#125;\t\tif(j&gt;sqrt(i))\t\t&#123;\t\t\tprintf(&quot;%d &quot;,i);\t\t&#125;\t&#125;\treturn 0;&#125;\n\n\nå°†è¿™ä¸ªä»£ç æ”¹é€ æˆ1-1é‚£ç§å½¢å¼ä¹Ÿä¸éš¾ï¼Œè‡ªå·±è¯•è¯•å§ï¼\nä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«çš„å¼Šç«¯è¯•é™¤æ³•è¯¥æ–¹æ³•ä¼šé”™è¿‡1\nå¼€å¹³æ–¹æ³•è¯¥æ–¹æ³•ä¼šé”™è¿‡2\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘æ•´å‹æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜å‚¨(è¯¦è§£)","url":"/posts/3848679385/","content":"[toc]\næ•°æ®ç±»å‹æˆ‘ä»¬çŸ¥é“ï¼ŒCè¯­è¨€ä¸­æœ‰å¾ˆå¤šä¸åŒçš„æ•°æ®ç±»å‹\nåœ¨cppreference.comç½‘ç«™ä¸Šå¯ä»¥æ‰¾åˆ°Cè¯­è¨€ä¸­çš„ä¸åŒç±»å‹ã€é“¾æ¥ã€‘\n\nå…ˆæ¥è®¤è¯†ä¸€ä¸ªä¸é‚£ä¹ˆå¸¸è§çš„ç±»å‹\nå¸ƒå°”ç±»å‹C99ä¸­å¼•å…¥äº†å¸ƒå°”ç±»å‹  _Boolå®è´¨ï¼šæŠŠ1å’Œ0å˜æˆtureå’Œfalse\n#include&lt;stdbool.h&gt;int main()&#123;\t_Bool flag = true;\tif(flag)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t&#125;\treturn 0;&#125;\n\nä»£ç çš„æ•ˆæœå¦‚ä¸‹ï¼š\n\nå› ä¸ºå¸ƒå°”ç±»å‹å’Œä»¥1-0æ¥åˆ¤æ–­æ­£è¯¯çš„ä½œç”¨æ˜¯ç›¸åŒçš„\næ‰€ä»¥è¿™ä¸ªç±»å‹æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šä½¿ç”¨\n\næ— ç¬¦å·æ•°æ®çš„æ‰“å°Unsignedæ— ç¬¦å·æ•°ç”¨%uæ‰“å°\n\n\nç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œè®¤ä¸ºæ˜¯æœ‰ç¬¦å·æ•°\nç”¨%uæ‰“å°æ— ç¬¦å·æ•°çš„æ—¶å€™ï¼Œè´Ÿæ•°ä¼šä¹±ç \n\n\næˆ‘ä»¬çŸ¥é“ï¼Œæ•´å‹æ•°æ®åœ¨å†…å­˜ä¸­å ç”¨4ä¸ªå­—èŠ‚ï¼ˆ32ä½ï¼‰ï¼Œdoubleç±»å‹æ˜¯8ä¸ªå­—èŠ‚\nä¸åŒæ•°æ®å ç”¨çš„å­—èŠ‚\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨è¿™äº›ä¸åŒçš„æ•°æ®ç±»å‹\nä½†æ˜¯ä½ çŸ¥é“ï¼Œæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯æ€ä¹ˆå­˜å‚¨çš„å—ï¼Ÿ\nè¿™ç¯‡åšå®¢å°†å¸¦ä½ è®¤è¯†æ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨\n\næ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å…ˆæ¥è®¤è¯†ä¸€ä¸‹æ•´å‹å®¶æ—éƒ½æœ‰è°å§ï¼\næ•´å‹å®¶æ—\n\nchar\nâ€‹\tunsigned char\nâ€‹\tsigned char\n\nshort\nâ€‹\tunsigned short [int]\nâ€‹\tsigned short [int]\n\nint\nâ€‹\tunsigned int\nâ€‹\tsigned int\n\nlong\nâ€‹\tunsigned long [int]\nâ€‹\tsigned long [int]\n\n\n\næˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€é¢‘ç¹çš„intå…¶å®æ˜¯signed int\n\ncharåˆ°åº•æ˜¯signed charè¿˜æ˜¯unsigned charï¼Œå–å†³äºç¼–è¯‘å™¨çš„å®ç°\nå¸¸è§çš„ç¼–è¯‘å™¨ä¸‹ï¼Œcharå°±æ˜¯signed char\n\nåœ¨çŸ¥é“æ•´å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ä¹‹å‰\næˆ‘ä»¬éœ€è¦å…ˆè®¤è¯†ä¸€ä¸‹ä¸‰ä¸ªå¥½æœ‹å‹â€œåŸ å è¡¥â€\nâ€œåŸåè¡¥â€ä¸‰å…„å¼Ÿæ­£æ•´æ•°ï¼šåŸåè¡¥ç ç›¸åŒ\nè´Ÿæ•´æ•°ï¼š\n\n\n\nåŸç \næŒ‰ç…§ä¸€ä¸ªæ•°çš„æ­£è´Ÿç›´æ¥å†™å‡ºæ¥çš„äºŒè¿›åˆ¶\n\n\n\nåç \nç¬¦å·ä½ä¸å˜ï¼Œå…¶ä»–ä½æŒ‰ä½å–å\n\n\nè¡¥ç \nåç çš„äºŒè¿›åˆ¶åºåˆ—+1ï¼Œå¾—åˆ°è¡¥ç \n\n\näºŒè¿›åˆ¶è¦æ€ä¹ˆå†™å‡ºæ¥å‘¢ï¼Ÿä¸‹é¢ä»¥15ä¸ºä¾‹ï¼ˆå‰é¢çœç•¥äº†24ä½ï¼‰\næ¯ä¸€ä¸ª1éƒ½æ˜¯2çš„æƒé‡\n\nè¿™å°±æ˜¯äºŒè¿›åˆ¶å’Œåè¿›åˆ¶è½¬æ¢çš„æ–¹å¼\nè€Œ15ä½œä¸ºæ­£æ•°ï¼ŒåŸåè¡¥ç éƒ½æ˜¯è¿™ä¸ªäºŒè¿›åˆ¶æ•°\n\n00000000 00000000 00000000 00001111\næ­£æ•°çš„åŸåè¡¥ç ç›¸åŒ\n\n\nä»€ä¹ˆæ˜¯ç¬¦å·ä½ï¼Ÿæ¯ä¸€ä¸ªæ•´å‹éƒ½æœ‰4ä¸ªå­—èŠ‚ï¼Œç”±32ä¸ªbitä½ç»„æˆ\nå…¶ä¸­åŸç çš„ç¬¬ä¸€ä½ï¼Œå°±æ˜¯è¯¥äºŒè¿›åˆ¶çš„ç¬¦å·ä½\næ­£æ•°ä¸º0ï¼Œè´Ÿæ•°ä¸º1\n\næœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œåé¢çš„æ˜¯æœ‰æ•ˆä½\n\nå†ä¸¾ä¸ª-15çš„ä¾‹å­\n\n\n\n10000000 00000000 00000000 00001111\nåŸç \n\n\n\n11111111 11111111 11111111 11110000\nåç \n\n\n11111111 11111111 11111111 11110001\nè¡¥ç \n\n\nä¸ºäº†è¿›ä¸€æ­¥äº†è§£æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ï¼Œæˆ‘ä»¬å°†15çš„&#x3D;&#x3D;è¡¥ç &#x3D;&#x3D;è½¬åŒ–ä¸ºåå…­è¿›åˆ¶\næ¯4ä¸ªäºŒè¿›åˆ¶æ¯”ç‰¹ä½å¯¹åº”ä¸€ä¸ªåå…­è¿›åˆ¶æ•°ï¼Œè½¬æ¢ç»“æœå¦‚ä¸‹\n\n\n\n00000000\n00000000\n00000000\n00001111\n\n\n\n00\n00\n00\n0F\n\n\n\nå¯å½“æˆ‘ä»¬åœ¨VSç¼–è¯‘å™¨-ç›‘è§†-å†…å­˜çª—å£é‡Œé¢æŸ¥çœ‹15æ•°æ®çš„æ—¶å€™\nå±•ç¤ºçš„æ˜¯ä»¥ä¸‹çš„16è¿›åˆ¶å½¢å¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œå†…å­˜ä¸­å­˜å‚¨çš„åå…­è¿›åˆ¶ï¼Œå’Œæˆ‘ä»¬è®¡ç®—å‡ºæ¥çš„æ˜¯&#x3D;&#x3D;åç€çš„&#x3D;&#x3D;\nè¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¤§å°ç«¯é—®é¢˜é«˜ä½ä½ä½æ¥è‡ªäºäººç±»ä»å·¦åˆ°å³çš„é˜…è¯»ä¹ æƒ¯ã€‚æ‰€ä»¥ä¸€ä¸²äºŒè¿›åˆ¶æ•°ï¼Œå·¦ä¾§ä¸ºé«˜ä½ï¼Œå³ä¾§ä¸ºä½ä½\nå¤§ç«¯å­—èŠ‚åºå­˜å‚¨ï¼š\nå½“ä¸€ä¸ªæ•°æ®çš„ä½å­—èŠ‚çš„æ•°æ®å­˜æ”¾åœ¨é«˜åœ°å€å¤„ï¼Œé«˜å­—èŠ‚åºçš„å†…å®¹æ”¾åœ¨äº†ä½åœ°å€å¤„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼å°±æ˜¯å¤§ç«¯å­—èŠ‚åºå­˜å‚¨\nå°ç«¯å­—èŠ‚åºå­˜å‚¨ï¼š\nå½“ä¸€ä¸ªæ•°æ®çš„ä½å­—èŠ‚æ•°æ®å­˜æ”¾åœ¨ä½åœ°å€å¤„ï¼Œé«˜å­—èŠ‚åºçš„å†…å®¹æ”¾åœ¨äº†é«˜åœ°å€å¤„ï¼Œè¿™ç§å­˜å‚¨æ–¹å¼å°±æ˜¯å°ç«¯å­—èŠ‚åºå­˜å‚¨\n\nç®€ç§°ï¼šå°åŒå¤§å¼‚\n\nè€Œæˆ‘ä»¬å›¾ä¸­VSå†…å­˜çª—å£æ˜¾ç¤ºçš„è¿™ç§â€œåç€æ”¾â€çš„æ–¹å¼ï¼Œæ˜¯å› ä¸ºï¼š\n\nVSç¼–è¯‘å™¨ä¸‹ï¼Œå†…å­˜çª—å£æ˜¾ç¤ºçš„æ˜¯å·¦ä½å³é«˜\näºŒè¿›åˆ¶ç æ˜¯é«˜00000000 00000000 00000000 00001111ä½\n\næ‰€ä»¥VSç¼–è¯‘å™¨æ˜¯å°ç«¯å­˜å‚¨çš„\n\nè€Œå¦‚æœæ˜¯ä»¥ä½00 00 00 0fé«˜çš„æ–¹å¼æ”¾å…¥å†…å­˜ï¼Œåˆ™æ˜¯å¤§ç«¯å­—èŠ‚åºå­˜å‚¨\n\nè´Ÿæ•°ç¤ºä¾‹\nint b=-10ï¼›\n\n\n\n\nåŸç 10000000\n00000000\n00000000\n00001010\n\n\n\nåç 11111111\n11111111\n11111111\n1110101\n\n\nè¡¥ç 11111111\n11111111\n11111111\n11110110\n\n\nf    f\nf    f\nf    f\nf    6\n\n\n\näº†è§£äº†å¤§å°ç«¯çš„æœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ¥å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°\nåˆ¤æ–­å½“å‰ç¼–è¯‘å™¨æ˜¯å¤§ç«¯è¿˜æ˜¯å°ç«¯\n#include &lt;stdio.h&gt;int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\tif(1==*p)\t\treturn 1;\telse\t\treturn 0;\t\t&#125;int main()&#123;\tint b=check_sys(); \tif(1==b)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);    \treturn 0; &#125; \n\nè¿™ä¸²ä»£ç çš„è‡ªå®šä¹‰å‡½æ•°éƒ¨åˆ†å¯ä»¥è¿›è¡Œä¼˜åŒ–\n\nå› ä¸º*p&#x3D;1æ—¶è¿”å›1\nå…¶ä»–æƒ…å†µè¿”å›0\næ‰€ä»¥å¯ä»¥é€‰æ‹©ç›´æ¥è¿”å›*p\n\n//ä»£ç ä¼˜åŒ–2 int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\treturn *p;\t&#125;\n\nè¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ(char*)&amp;aç›´æ¥è¿›è¡Œè§£å¼•ç”¨å¹¶è¿”å›ä»–çš„å€¼\nè¿™æ ·å°±èƒ½è·³è¿‡ä¸­é—´å˜é‡p\n//ä»£ç ä¼˜åŒ–3int check_sys()&#123;\tint a=1;\treturn *(char*)&amp;a;\t&#125;\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ï¼š\nä¸èƒ½ç›´æ¥å¯¹aè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè¿™ç§æ–¹å¼æ˜¯é”™çš„\nå¤§å°ç«¯æ˜¯æŠŠæ•°æ®æ”¾åœ¨å†…å­˜ä¹‹åæ‰æœ‰çš„ç°è±¡\n\nå¤§å°ç«¯è®²çš„æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„é¡ºåº\ncharç±»å‹åªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼Œæ²¡æœ‰å¤§å°ç«¯é—®é¢˜\n\n\nä¸ºä»€ä¹ˆæ•´å‹åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ˜¯è¡¥ç å‘¢ï¼Ÿ\nåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ•°å€¼ä¸€èˆ¬ç”¨è¡¥ç æ¥è¡¨ç¤ºå’Œå­˜å‚¨ï¼ŒåŸå› åœ¨äºï¼Œè¯•ç”¨è¡¥ç ï¼Œå¯ä»¥å°†ç¬¦å·ä½å’Œæ•°å€¼åŸŸç»Ÿä¸€å¤„ç†ï¼›\nåŒæ—¶ï¼ŒåŠ æ³•å’Œå‡æ³•ä¹Ÿå¯ä»¥ç»Ÿä¸€å¤„ç†(CPUåªæœ‰åŠ æ³•å™¨)\næ­¤å¤–ï¼Œè¡¥ç ä¸åç ç›¸äº’è½¬æ¢ï¼Œå…¶è¿ç®—è¿‡ç¨‹æ˜¯ç›¸åŒçš„ï¼Œä¸éœ€è¦é¢å¤–çš„ç¡¬ä»¶ç”µè·¯ã€‚\n\nè®¡ç®—æœºä¸­åªæœ‰åŠ æ³•å™¨ï¼Œå‡æ³•ç”¨åŠ æ³•æ¥æ¨¡æ‹Ÿ\n1-1â†’1+(-1)\nå¦‚æœç”¨åŸç çš„è®¡ç®—ï¼š\n\n\n\n00000000 00000000 0000000 00000001\n+\n\n\n\n10000000 00000000 0000000 00000001\n&#x3D;\n\n\n10000000 00000000 0000000 00000010\n-2 é”™è¯¯\n\n\nè¡¥ç ï¼š\n\n\n\n00000000 00000000 0000000 00000001\n1åŸ\n\n\n\n10000000 00000000 0000000 00000001\n-1åŸ\n\n\nå®ƒä»¬çš„è¡¥ç \n\n\n\n00000000 00000000 00000000 00000001   +\n1çš„è¡¥ç \n\n\n\n11111111 11111111 1111111 11111111   &#x3D;\n-1çš„è¡¥ç \n\n\n00000000 00000000 0000000 00000000\nç»“æœä¸º0\n\n\n å…¶ä¸­ç¬¬ä¸€ä¸ª1ä¸ºç¬¦å·ä½\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œæ•´å‹åœ¨å†…å­˜ä¸­å­˜å‚¨çš„åŸºæœ¬çŸ¥è¯†å°±å·²ç»è®²å®Œå•¦\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ä¸è¦åå•¬æ‰‹é‡Œçš„èµğŸ‘ï¼\nèƒ½ç•™ä¸‹ä¸ªè¯„è®ºå°±æ›´å¥½äº†\nè¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼ï¼ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘unsignedæ— ç¬¦å·ç±»å‹è¿ç”¨çš„ä¸¤ä¸ªå®ä¾‹","url":"/posts/26306730/","content":"@[toc]\nå‰æ’æé†’ğŸ˜‚æœ¬ç¯‡åšå®¢æ˜¯å¯¹ä¸‹ä¸€ç¯‡åšå®¢ã€Šcharç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜æ”¾ã€‹çš„æ‹“å±•\nå¹¶éå¯¹unsignedç±»å‹çš„è¯¦è§£ï¼\n\nç¤ºä¾‹1#include &lt;stdio.h&gt;int main()&#123;\tint i=-20;\tunsigned int j=10;\t\tprintf(&quot;%d\\n&quot;,i+j);\treturn 0; &#125; \n\nå½“æœ‰ç¬¦å·ç±»å‹å’Œæ— ç¬¦å·ç±»å‹ç›¸åŠ çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ\n10000000 00000000 00000000 00010100  -20çš„åŸç 11111111 11111111 11111111 11101011   åç 11111111 11111111 11111111 11101100   è¡¥ç \n\n00000000 00000000 00000000 00001010   10çš„è¡¥ç \n\n-20çš„è¡¥ç å’Œ10çš„è¡¥ç  ç›¸åŠ \n11111111 11111111 11111111 11110110 å¾—åˆ°çš„è¡¥ç 11111111 11111111 11111111 11110101 åç 10000000 00000000 00000000 00001010 åŸç  -10\n\nå¾—åˆ°çš„ç»“æœä¸º-10\n\nå½“æˆ‘ä»¬æŠŠjæ”¹ä¸º-10çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¾ç„¶èƒ½ç»™å‡ºæ­£ç¡®çš„ç­”æ¡ˆ-30\nè¿™æ˜¯å› ä¸ºåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å…ˆæŒ‰ç…§è¡¥ç çš„å½¢å¼è¿›è¡Œè¿ç®—ï¼Œæœ€å%dæ‰“å°ï¼Œæ ¼å¼åŒ–ä¸ºæœ‰ç¬¦å·æ•´æ•°\n\næ•°æ®çš„å­˜å‚¨å’Œç±»å‹æ— å…³ï¼Œåªæœ‰è¯»å–çš„æ—¶å€™æœ‰åŒºåˆ«\n\n\nç¤ºä¾‹2 ç¬¬äºŒä¸ªç¤ºä¾‹å¯ä»¥è®©æˆ‘ä»¬äº†è§£æ— ç¬¦å·æ•°åœ¨åº”ç”¨æ—¶å€™å­˜åœ¨çš„é™åˆ¶\n#include&lt;windows.h&gt;#include &lt;stdio.h&gt;int main()&#123;\tunsigned int i;\tfor(i=9;i&gt;=0;i--)\t&#123;\t\tprintf(&quot;%u\\n&quot;,i);\t\tSleep(1000);//æ›´å¥½çš„è§‚å¯Ÿæ•°æ®çš„æ‰“å°\t&#125;\treturn 0;&#125;\n\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯%uæ‰“å°æ— ç¬¦å·æ•°\nè€Œæ— ç¬¦å·æ•°iä¸­ä¸å¯èƒ½å‡ºç°è´Ÿæ•°ï¼Œä¹Ÿå°±æ²¡æœ‰å°äº0çš„æƒ…å†µï¼ˆiæ°¸è¿œå¤§äºç­‰äº0ï¼‰\nå½“i&#x3D;0åç»§ç»­â€“ï¼ŒäºŒè¿›åˆ¶è¡¥ç å˜æˆå¦‚ä¸‹å½¢å¼\n11111111 11111111 11111111 11111111\n\nå› ä¸ºæ˜¯æ— ç¬¦å·æ•°ï¼Œç›´æ¥å°†è¡¥ç è§†ä½œåŸç è¿›è¡Œè®¡ç®—\nå°±å¾—å‡ºäº†åœ¨çª—å£ä¸­æ‰“å°çš„éå¸¸å¤§çš„æ•°å­—\n\n\nå°ç»“æœ¬ç¯‡åšå®¢å±•ç¤ºäº†ä¸¤ç§æ— ç¬¦å·æ•°è°ƒç”¨çš„æƒ…å†µ\nä¸‹ç¯‡åšå®¢è®²è¿°charç±»å‹åœ¨æ•°æ®ä¸­çš„å­˜å‚¨çš„æ—¶å€™ä¼šç”¨åˆ°ï¼\n\næœ€è¿‘äº‹æƒ…çœŸçš„æŒºå¤šçš„ï¼Œè‹±è¯­4çº§ã€æœŸæœ«è€ƒè¯•\né«˜æ•°å’Œçº¿ä»£çœŸçš„å¤ªéš¾äº†ï¼Œä¸¤åº§å¤§å±±å‹ç€æˆ‘ğŸ˜¥\nå¸Œæœ›æœŸæœ«ä¸æŒ‚ç§‘\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œæ±‚ç‚¹èµå…³æ³¨ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€VSã€‘å¦‚ä½•ä¸‹è½½VS2019å¹¶åˆå§‹åŒ–C/C++ç¯å¢ƒ","url":"/posts/2731112594/","content":"1.ä¸‹è½½ï¼Œç™¾åº¦vs2019ï¼Œå»å®˜ç½‘ä¸‹è½½å³å¯ä¸€å®šè¦è®¤å‡†å®˜ç½‘ï¼Œå®˜ç½‘ï¼Œå®˜ç½‘ï¼\nä½œä¸ºåˆå­¦è€…çš„æˆ‘ä»¬ï¼Œä¸‹è½½ç¬¬ä¸€ä¸ªå…è´¹çš„communityç¤¾åŒºç‰ˆæœ¬å³å¯ï¼\n\n2.åŸºæœ¬é…ç½®ä¸‹è½½CPPå¼€å‘åŒ…é€‰æ‹©é€‚ç”¨C++çš„æ¡Œé¢å¼€å‘å°±å¯ä»¥äº†ï¼Œå³ä¾§å¼¹å‡ºçš„é€‰é¡¹ä¸éœ€è¦ä¿®æ”¹ã€‚\n\nè§†å›¾å¼€å‘è®¾ç½®é€‰æ‹©å¸¸è§„ï¼Œä¸»é¢˜å»ºè®®é€‰æ‹©é»‘è‰²\n\nåˆ›å»ºé¡¹ç›®åˆ›å»ºé¡¹ç›®é€‰æ‹©ç©ºé¡¹ç›®å³å¯ï¼Œéšåé”®å…¥ä½ çš„é¡¹ç›®åå­—ï¼Œé€‰æ‹©é¡¹ç›®çš„å­˜æ”¾è·¯å¾„ã€‚\nä¸ºäº†è®©ä½ å†™çš„é¡¹ç›®èƒ½æ›´å¥½çš„è¢«ç®¡ç†ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶å¤¹æ¥å­˜æ”¾ä½ çš„VSé¡¹ç›®ï¼Œä¸”è¯¥æ–‡ä»¶å¤¹ä¸è¦ç”¨ä¸­æ–‡å‘½åã€‚\n\n\né¡¹ç›®åå­—æ¨èä½¿ç”¨æ—¥æœŸ+é¡¹ç›®å†…å®¹çš„å…¨è‹±æ–‡åï¼Œè¿™æ ·èƒ½çœ‹åˆ°ä»£ç æ˜¯ä»€ä¹ˆæ—¶å€™å†™çš„ï¼Œä»¥åŠå†…å®¹æ˜¯ä»€ä¹ˆ\n\nåˆ›å»ºæ–°æºæ–‡ä»¶è¿›å…¥ç¼–è¾‘é¡µé¢åï¼Œåœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­å³é”®æºæ–‡ä»¶ï¼Œé€‰æ‹©æ–°å»ºæºæ–‡ä»¶ï¼Œå³å¯æ–°å¢ä¸€ä¸ªc&#x2F;cppçš„ä»£ç æºæ–‡ä»¶ã€‚\n\n\n\nåˆ°è¿™é‡Œï¼Œä½ çš„vs2019å°±é…ç½®å®Œæˆäº†ï¼å¯ä»¥æ„‰å¿«åœ°å†™ä»£ç äº†ï¼\n3.å®‰è£…æ’ä»¶æ¨èå®‰è£…ä¸‹é¢å‡ ä¸ªæ’ä»¶ï¼Œ åœ¨vsçš„æ‰©å±•-ç®¡ç†æ‰©å±•é‡Œé¢å®‰è£…\n\nCopyAsHtml å°†ä»£ç å†…å®¹ä»¥htmlæ ¼å¼ç²˜è´´ï¼Œè¿™æ ·ç²˜è´´åˆ°wordé‡Œé¢çš„ä»£ç æ˜¯æœ‰é«˜äº®çš„ï¼‰\nGitDiffMargin gitä¿®æ”¹å°†ä¼šæ˜¾ç¤ºåœ¨æ»šåŠ¨æ ä¸Šï¼Œvscodeå°±è‡ªå¸¦äº†è¿™ä¸ªåŠŸèƒ½ï¼Œvs2019è£…äº†è¿™ä¸ªæ’ä»¶åå°±ä¹Ÿæœ‰è¿™ä¸ªåŠŸèƒ½äº†\nForceAllUtf8(but java) with BOM è¯¥æ’ä»¶å¿…è£…ï¼å¦åˆ™ä½ çš„ä»£ç é‡Œé¢çš„ä¸­æ–‡åœ¨å…¶ä»–ç¼–è¯‘å™¨ã€å¹³å°é‡Œé¢å¯èƒ½ä¼šä¹±ç ï¼\n\nå¦‚æœä½ çš„æ‰©å±•å•†åº—ä¸€ç›´åŠ è½½ä¸å‡ºæ¥ï¼Œå¯ä»¥å»vsçš„å®˜ç½‘é‡Œé¢ä¸‹æ’ä»¶çš„.vsixæ–‡ä»¶ï¼Œç„¶åé€šè¿‡æœ¬åœ°æ–‡ä»¶å®‰è£…ã€‚\n4.æ§åˆ¶å°ä¹±ç VS2019å¦‚æœé‡åˆ°printf&#x2F;coutæ‰“å°çš„å†…å®¹åœ¨æ§åˆ¶å°è¾“å‡ºä¸­æ˜¯ä¹±ç ï¼Œå¯ä»¥å°è¯•ä¸‹é¢å‡ ç§è§£å†³æ–¹æ¡ˆ\n\nä¿®æ”¹æ–‡ä»¶ç¼–ç ä¸ºUTF-8å¸¦ç­¾åï¼›\næ³¨æ„printfçš„%dè¿™ç±»å ä½ç¬¦å’Œä¸­æ–‡ä¹‹é—´å¿…é¡»è¦æœ‰ç©ºæ ¼ï¼Œä¸­%dæ–‡æ˜¯ä¸æ­£ç¡®çš„ï¼Œä¸­ %d æ–‡æ˜¯æ­£ç¡®çš„ã€‚ä¸å¸¦ç©ºæ ¼ä¼šå½±å“VS2019å¯¹printfå‚æ•°çš„è§£æï¼Œå¾ˆç„å­¦ï¼›\nä¿®æ”¹windowsæ§åˆ¶å°çš„å­—ä½“ä¸ºé»‘ä½“ï¼Œé»˜è®¤çš„å­—ä½“ä¸åŒ…å«ä¸­æ–‡ï¼›\n\nwin11æ§åˆ¶å°ä¿®æ”¹ä¸­æ–‡çš„ä½ç½®å¦‚ä¸‹\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘æ•´å‹æå‡å’Œç®—æœ¯è½¬æ¢","url":"/posts/3918217186/","content":"[toc]\næ•´å‹æå‡è¦æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯æ•´å‹æå‡ï¼Œé‚£å°±è¦ä»è¡¨è¾¾å¼æ±‚å€¼è¯´èµ·\nè¡¨è¾¾å¼æ±‚å€¼\nè¡¨ è¾¾ å¼ æ±‚ å€¼ çš„ é¡º åº ä¸€ éƒ¨ åˆ† æ˜¯ ç”± æ“ ä½œ ç¬¦ çš„ ä¼˜ å…ˆ çº§ å’Œ ç»“ åˆ æ€§ å†³ å®š\nåŒ æ ·ï¼Œæœ‰ äº› è¡¨ è¾¾ å¼ çš„ æ“ ä½œ æ•° åœ¨ æ±‚ å€¼ çš„ è¿‡ ç¨‹ ä¸­ å¯ èƒ½ éœ€ è¦ è½¬ æ¢ ä¸º å…¶ ä»– ç±» å‹ \n\nä»€ä¹ˆæ˜¯è¡¨è¾¾å¼ï¼Ÿ ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­\nint main()&#123;\tint a=3;\tint b=5;\tint c = a + b * 7;\t//cçš„å¼å­å³ä¸ºè¡¨è¾¾å¼\treturn 0;&#125;\n\nè€ŒCçš„æ•´ä¸ªå¼å­å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼æ±‚å€¼\nåœ¨è¿™ä¹‹ä¸­ï¼Œå‚ä¸è®¡ç®—çš„ä¸¤ä¸ªå˜é‡ä»¥åŠç»“æœå˜é‡éƒ½æ˜¯intç±»å‹ï¼Œå¹¶ä¸éœ€è¦è¿›è¡Œæ•´å‹æå‡\nåœ¨æˆ‘ä»¬æ—¥å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ç»å¸¸ä¼šæœ‰éšå¼ç±»å‹è½¬æ¢\n\néšå¼ç±»å‹è½¬æ¢\nCçš„æ•´å‹ç®—æœ¯è¿ç®—æ€»æ˜¯è‡³å°‘ä»¥ç¼ºçœæ•´å‹ç±»å‹çš„ç²¾åº¦æ¥è¿›è¡Œçš„\nä¸ºäº†è·å¾—è¿™ä¸ªç²¾åº¦ï¼Œè¡¨è¾¾å¼ä¸­çš„å­—ç¬¦å’ŒçŸ­æ•´å‹æ“ä½œæ•°åœ¨ä½¿ç”¨ä¹‹å‰è¢«è½¬åŒ–ä¸ºæ™®é€šæ•´å‹ï¼Œè¿™ç§è½¬æ¢ç§°ä¸ºæ•´å‹æå‡\n\nfloat f =3.14int num =f;\n\nåœ¨ä¸Šé¢è¿™ä¸ªä»£ç ä¸­å°±æœ‰éšå¼ç±»å‹è½¬æ¢ï¼Œç”±floatå‹è½¬æ¢ä¸ºintå‹\nä½†æ˜¯ä¼šæœ‰ç²¾åº¦çš„ä¸¢å¤±\n\næ­¤æ—¶numä¸º3\n\n\næˆ‘ä»¬çŸ¥é“ï¼Œä¸åŒæ•°æ®ç±»å‹çš„æ•°æ®å¤§å°å¦‚ä¸‹\næ•°æ®ç±»å‹åŠå¤§å°\n\n\nchar\nå­—ç¬¦æ•°æ®ç±»å‹\n4byte\n\n\n\nshort\nçŸ­æ•´å‹\n2byte\n\n\nint\næ•´å‹\n4byte\n\n\nlong\né•¿æ•´å‹\n4(32), 8(64)\n\n\nlong long\né•¿é•¿æ•´å‹\n8byte\n\n\nfloat\nå•ç²¾åº¦æµ®ç‚¹å‹ï¼ˆå®å‹ï¼‰\n4byte\n\n\ndouble\nåŒç²¾åº¦æµ®ç‚¹å‹ï¼ˆå®å‹ï¼‰\n8byte\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œshortç±»å‹å’Œcharç±»å‹çš„å­—èŠ‚æ•°éƒ½æ˜¯å°äºintç±»å‹çš„\nå½“æˆ‘ä»¬å°†ä¸€ä¸ªintç±»å‹çš„æ•°æ®å­˜æ”¾åˆ°charä¸­æ—¶ï¼Œä¼šå‘ç”Ÿæˆªæ–­\næˆªæ–­&amp;æå‡\næŠŠå››ä¸ªå­—èŠ‚æ”¾åœ¨1ä¸ªå­—èŠ‚çš„å†…å®¹ä¸­ï¼Œæˆªæ–­ï¼Œåªä¿ç•™ä¸€ä¸ªå­—èŠ‚\næŠŠæ•°å­—5æ”¾å…¥charç±»å‹ä¸­ï¼Œ5çš„4ä¸ªå­—èŠ‚çš„å†…å®¹ä¼šè¢«æˆªæ–­\n\nç¤ºä¾‹\nchar a = 3;   //00000000000000000000000000000011 ä¸º3çš„äºŒè¿›åˆ¶   //00000011 -a\n\nåœ¨charç±»å‹aä¸­ï¼Œåªå­˜æ”¾äº†3çš„å8ä½(1ä¸ªå­—èŠ‚)çš„å†…å®¹\nè¿™å°±æ˜¯æˆªæ–­çš„è¡¨ç°å½¢å¼\n\nåœ¨charç±»å‹æ•°æ®çš„è¡¨è¾¾å¼æ±‚å€¼ä¸­ï¼Œå°±ä¼šå‘ç”Ÿæ•´å‹æå‡\nè§„åˆ™å¦‚ä¸‹ï¼š\n\næŠŠæœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡ï¼Œåœ¨aå’Œbçš„8ä½ç å‰åŠ 24ä¸ª0æˆ–1\n\nä»£ç ç¤ºä¾‹1#include &lt;stdio.h&gt;int main()&#123;    char a = 3;    //00000000000000000000000000000011 ä¸º3çš„äºŒè¿›åˆ¶    //00000011 -a    char b = 127;    //00000000000000000000000001111111 ä¸º127çš„äºŒè¿›åˆ¶    //01111111 -b    char c = a + b;    //æŠŠæœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡    //åœ¨aå’Œbçš„8ä½ç å‰åŠ 24ä¸ª0    //00000000000000000000000000000011    //00000000000000000000000001111111    //00000000000000000000000010000010    //10000010 ä¸ºchar c    //11111111111111111111111110000010  -è¡¥ç     //11111111111111111111111110000001  -åç     //10000000000000000000000001111110  -åŸç     // -126    //å‘ç°aå’Œbéƒ½æ˜¯charç±»å‹çš„ï¼Œéƒ½æ²¡æœ‰è¾¾åˆ°ä¸€ä¸ªintçš„å¤§å°    //è¿™é‡Œå°±ä¼šå‘ç”Ÿæ•´å‹æå‡    printf(&quot;%d\\n&quot;, c);//%dæ˜¯æœ‰ç¬¦å·æ•°ï¼Œæ‰“å°åŸç     return 0;&#125;\n\nç¼–è¯‘å™¨ä¸­ï¼Œè´Ÿæ•°æ˜¯ä»¥è¡¥ç çš„å½¢å¼å­˜æ”¾çš„\nä½†åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦å…ˆè½¬æ¢æˆåŸç å†è®¡ç®—å…¶æ•°å€¼\nä»£ç ç¤ºä¾‹2å†æ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„ç¤ºä¾‹\nint main()&#123;\tchar a = 0xb6;\tshort b = 0xb600;\tint c = 0xb6000000;\t\tif(a==0xb6)\t\tprintf(&quot;a&quot;);\tif(b==0xb600)\t\tprintf(&quot;b&quot;);\tif(c==0xb6000000)\t\tprintf(&quot;c&quot;);        return 0;&#125;\n\nçŒœçŒœæ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ\næ˜¯è¿™ä¸ªå—ï¼Ÿ\nabc\n\né”™ï¼\n\nè¿è¡Œåï¼Œæˆ‘ä»¬ä¼šå‘ç°ç¼–è¯‘å™¨åªæ‰“å°äº†cè¿™ä¸ªå­—ç¬¦\n\nå› ä¸ºifåªä¼šæ¯”è¾ƒæ•´å‹\nè€Œcharå’Œshortç±»å‹éƒ½ä¸è¶³4ä¸ªå­—èŠ‚ï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™éœ€è¦è¿›è¡Œæ•´å‹æå‡\næå‡ä¹‹åçš„ç»“æœä¸åŸæ•°æ®ä¸åŒ\n\nè€Œint cæœ¬èº«å°±æ˜¯æ•´å‹ï¼Œæ— é¡»è¿›è¡Œæ•´å‹æå‡\nint c = 0xb6000000;\n\næ‰€ä»¥ä»£ç åªæ‰“å°äº†å­—ç¬¦c\n\nä»£ç ç¤ºä¾‹3å†æ¥çœ‹ä¸‹é¢çš„è¿™ä¸ªä»£ç ï¼Œæ‰“å°çš„ç»“æœæ˜¯å‡ å‘¢ï¼Ÿ\n#include &lt;stdio.h&gt;int main() &#123;    int a = 3;   int b = 5;    short s = 5;   printf(&quot;%u\\n&quot;, sizeof(s = a + 3));        return 0;&#125;\n\nç»“æœä¸º2\nå› ä¸ºæœ€åçš„sæ˜¯çŸ­æ•´å‹ï¼Œæ¨æ–­å‡ºæ¥çš„é•¿åº¦ä¸º2\n\nä»£ç ç¤ºä¾‹4 -sizeofint main()&#123;\tchar c=1;\tprintf(&quot;%u\\n&quot;,sizeof(c));//1    printf(&quot;%u\\n&quot;,sizeof(+c));//4    printf(&quot;%u\\n&quot;,sizeof(-c));//4    printf(&quot;%u\\n&quot;,sizeof(!c));//4        return 0;&#125;\n\nå½“+cå’Œ-cå‚ä¸è®¡ç®—çš„æ—¶å€™ï¼Œå°±ä¼šè¿›è¡Œæ•´å‹æå‡\n\nè¿™é‡Œæ¶‰åŠåˆ°äº†å¦å¤–ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œsizeofæ‹¬å·ä¸­è¡¨è¾¾å¼çš„é—®é¢˜\nä¸‹ç¯‡åšå®¢ä¼šè¯¦ç»†ä»‹ç»!\n\n\nç®—æœ¯è½¬æ¢è¯´å®Œæ•´å‹æå‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å’Œéšå¼ç±»å‹è½¬æ¢å¾ˆåƒçš„ç®—æœ¯è½¬æ¢\n\nå¦‚æœæŸä¸ªæ“ä½œç¬¦çš„å„ä¸ªæ“ä½œæ•°å±äºä¸åŒçš„ç±»å‹ï¼Œé‚£ä¹ˆé™¤éå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ“ä½œæ•°çš„ç±»å‹ï¼Œå¦åˆ™æ“ä½œå°±æ— æ³•è¿›è¡Œã€‚\n\nä¸‹é¢çš„å±‚æ¬¡ä½“ç³»ç§°ä¸ºå¯»å¸¸ç®—æœ¯è½¬æ¢\n\n\n\nlong double\n\n\n\ndouble\n\n\nfloat\n\n\nunsigned long int\n\n\nlong int\n\n\nunsigned int\n\n\nint\n\n\nå…·ä½“æ˜¯æ€ä¹ˆè½¬æ¢çš„å‘¢?\nåœ¨è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼Œå¦‚æœæŸä¸ªæ“ä½œæ•°çš„ç±»å‹åœ¨ä¸Šè¡¨ä¸­æ’åè¾ƒä½ï¼Œé‚£ä¹ˆé¦–å…ˆè¦è½¬æ¢ä¸ºå¦å¤–ä¸€ä¸ªæ“ä½œæ•°çš„ç±»å‹åï¼Œå†æ‰§è¡Œè¿ç®—ã€‚\nç®€å•åœ°è¯´ï¼Œå°±æ˜¯ä»ä¸‹å¾€ä¸Šè½¬æ¢\n\næ³¨æ„ï¼šç®—æœ¯è½¬æ¢è¦åˆç†ï¼Œä¸ç„¶ä¼šæœ‰æ½œåœ¨çš„é—®é¢˜\n\n\nä»£ç ç¤ºä¾‹1ä¸‹é¢çš„æ˜¯ä¸€ä¸ªç®€å•ç®—æœ¯è½¬æ¢çš„ç¤ºä¾‹\nåœ¨intå‹å’Œfloatç±»å‹ä¸€èµ·è®¡ç®—çš„æ—¶å€™\nintç±»å‹ä¼šè½¬æ¢ä¸ºfloatç±»å‹è¿›è¡Œè®¡ç®—\n#include&lt;stdio.h&gt; int main()&#123;\tint a=3;\tfloat f =5.5;\tfloat ra =a+f;\t//ç®—æœ¯è½¬æ¢ï¼Œint--&gt;float \t\treturn 0;&#125;\n\n\nè¡¨è¾¾å¼å±æ€§è¿™é‡Œå¯ä»¥å¼•å‡ºå¦å¤–ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œè¡¨è¾¾å¼çš„å±æ€§\nè¡¨è¾¾å¼çš„ä¸¤ä¸ªå±æ€§ï¼š\n\nå€¼å±æ€§\nç±»å‹å±æ€§\n\nå¦‚ä»¥ä¸‹ä»£ç ä¸­\n\na+bçš„ç»“æœ30å°±æ˜¯è¿™ä¸ªè¡¨è¾¾å¼çš„æŒ‡å±æ€§\n\nç±»å‹å±æ€§æ˜¯int\n\n\nint main()&#123;\tint a =10;\tint b=20;\ta+b;//è¡¨è¾¾å¼2ä¸ªå±æ€§ï¼šå€¼å±æ€§ï¼Œç±»å‹å±æ€§\t//30 å€¼å±æ€§ \t//int ç±»å‹å±æ€§ \treturn 0;&#125;\n\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸäº†\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å§ï¼\nè¿™å¯¹æˆ‘éå¸¸é‡è¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼ˆè¯¦è§£ï¼‰","url":"/posts/3650400098/","content":"[TOC]\nå¼•è¨€\næœ¬æ–‡é¦–å‘äº â„ï¸æ…•é›ªçš„å¯’èˆ\n\nmarkdownè¯­æ³•å°çŸ¥è¯†ç‚¹å†™åœ¨å‰é¢ï¼Œmarkdownè¯­æ³•çš„å°çŸ¥è¯†ç‚¹\nå¦‚ä½•å®ç°æ–‡å­—å˜çº¢ä¸”åŠ ä¸Šäº†åº•è‰²ï¼Ÿå¦‚hello world\nmarkdownè¯­æ³•å¦‚ä¸‹å³å¯ï¼\n`hello world`\n\nä»¥åŠé¡µå†…è·³è½¬\n&lt;span id=\"jump\"&gt;è¿™ä¸€å¥è¯æ²¡å•¥ç”¨&lt;/span&gt;[å›åˆ°å¼€å¤´](#jump)\n\næ­£é¢˜ä¹‹å‰å­¦ä¹ å®Œäº†æ•´å½¢ã€å­—ç¬¦ç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥çœ‹çœ‹floatç±»å‹ï¼\n\næ•´æ•°ç±»å‹ğŸ‘‰ã€intã€‘\nå­—ç¬¦ç±»å‹ğŸ‘‰ã€charã€‘\n\nå¸¸è§çš„æµ®ç‚¹æ•°3.141591E10\n\næµ®ç‚¹æ•°å®¶æ—åŒ…æ‹¬floatã€doubleã€long double ç±»å‹ã€‚\nè€Œæµ®ç‚¹æ•°è¡¨ç¤ºçš„èŒƒå›´æ˜¯åœ¨å¤´æ–‡ä»¶&lt;float.h&gt;é‡Œé¢å®šä¹‰çš„ã€‚\néœ€è¦äº†è§£çš„æ˜¯\n\nå¦‚æœä½ æ‰“å‡º3.14ï¼Œç¼–è¯‘å™¨é»˜è®¤æ˜¯doubleç±»å‹çš„ã€‚è‹¥æƒ³è®©ä»–ä¸ºfloatç±»å‹ï¼Œåˆ™è¦åœ¨å‰é¢åŠ fï¼›\n1E10æ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œä»£è¡¨1.0Ã—10^10\n\nä»£ç å¼•ä¾‹å…ˆæ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸²ä»£ç \nint main(){\tint n = 9;\tfloat* pfloat = (float*)&amp;n;\tprintf(\"nçš„å€¼ä¸ºï¼š%d\\n\", n);\tprintf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\t*pfloat = 9.0;\tprintf(\"numçš„å€¼ä¸ºï¼š%d\\n\", n);\tprintf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\treturn 0;}\n\nè¿è¡Œçš„ç»“æœå¦‚ä¸‹\n\næŒ‡é’ˆpfloatä¿ç•™çš„æ˜¯å¼ºåˆ¶è½¬æ¢ä¸ºfloatç±»å‹çš„intå˜é‡n\n\nå‡†ç¡®æ¥è¯´ï¼Œæ˜¯å°†intæŒ‡é’ˆç±»å‹å¼ºåˆ¶è½¬æ¢ä¸ºäº†floatæŒ‡é’ˆç±»å‹\n\né‚£æ‰“å°çš„ç»“æœä¸åº”è¯¥æ˜¯9å—ï¼Ÿä¸ºä»€ä¹ˆæ˜¯0.000000å‘¢ï¼Ÿ\nå†æ¥çœ‹çœ‹åé¢çš„ä»£ç ï¼Œæˆ‘ä»¬è®©*pfloat=9.0ï¼Œç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œå´æ‰“å°å‡ºäº†ä¸€ä¸²ä¸çŸ¥é“æ€ä¹ˆæ¥çš„å¾ˆå¤§çš„æ•°å­—ã€‚è¿™åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nä¸€ä¸ªæ¶‰åŠåˆ°çš„å°çŸ¥è¯†ç‚¹\nä¸ç®¡æ˜¯doubleç±»å‹ï¼Œè¿˜æ˜¯floatç±»å‹ï¼Œé»˜è®¤å°æ•°ç‚¹åéƒ½æœ‰6ä½\næˆ‘ä»¬å¯ä»¥ç”¨%.fçš„æ–¹å¼æ¥æ§åˆ¶æ‰“å°ï¼Œå¦‚%.3få°±æ˜¯åªæ‰“å°åˆ°å°æ•°ç‚¹å3ä½\n\n\nç­”æ¡ˆåªæœ‰ä¸€ä¸ªï¼šæµ®ç‚¹å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼å’Œintç±»å‹å®Œå…¨ä¸åŒï¼\næµ®ç‚¹å‹å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜æ”¾ï¼Ÿæ ¹æ®å›½é™…æ ‡å‡†IEEEï¼ˆç”µæ°”å’Œç”µå­å·¥ç¨‹åä¼šï¼‰ 754ï¼Œä»»æ„ä¸€ä¸ªäºŒè¿›åˆ¶æµ®ç‚¹æ•°Vå¯ä»¥è¡¨ç¤ºæˆä¸‹é¢çš„å½¢å¼ï¼š\n\n\n(-1)^Sè¡¨ç¤ºç¬¦å·ä½ï¼Œå½“S=0ï¼ŒVä¸ºæ­£æ•°ï¼›å½“S=1ï¼ŒVä¸ºè´Ÿæ•°ã€‚\n\nMè¡¨ç¤ºæœ‰æ•ˆæ•°å­—ï¼Œå¤§äºç­‰äº1ï¼Œå°äº2ã€‚\n\n2^Eè¡¨ç¤ºæŒ‡æ•°ä½ã€‚\n\n\n\n\nåè¿›åˆ¶&amp;äºŒè¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•æˆ‘ä»¬åœ¨å°å­¦å°±å­¦åˆ°è¿‡ï¼Œ1.234Ã—10^2=123.4\nè€ŒäºŒè¿›åˆ¶ä¸­ï¼Œå…¶å®å°±æ˜¯æŠŠåº•æ•°çš„10å˜æˆäº†2ï¼Œ1.011*2^2=101.1\nè®°ä½ä»¥ä¸‹è¿™ä¸ªç»“è®ºå³å¯\n\näºŒè¿›åˆ¶ç Mä¹˜ä»¥2çš„næ¬¡æ–¹ï¼Œç›¸å½“äºå°†äºŒè¿›åˆ¶ç Mçš„å°æ•°ç‚¹å‘å³ç§»åŠ¨nä½\n\nS\\M\\Eå¦‚ä½•åˆ¤æ–­ï¼Ÿ\näºŒè¿›åˆ¶çš„å°æ•°éƒ¨åˆ†0.1è¡¨ç¤ºåè¿›åˆ¶çš„0.5ï¼Œå³2çš„-1æ¬¡æ–¹ã€‚æ ¹æ®å°æ•°ç‚¹å¼€å§‹å¾€å³æ•°çš„ä½æ•°ï¼Œä¾æ¬¡ä¸ºåè¿›åˆ¶2çš„-1ã€-2ã€-3â€¦æ¬¡æ–¹\n\næˆ‘ä»¬ä»¥5.5ä¸ºä¾‹ï¼Œå®ƒçš„äºŒè¿›åˆ¶æ˜¯101.1ï¼Œå¸¦å…¥ä¸Šæ–¹æåˆ°çš„å…¬å¼ï¼Œç›¸å½“äº \n\nå’Œä¸Šé¢çš„å…¬å¼æ¯”å¯¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å‡ºæ¥ S=0ï¼ŒM=1.011ï¼ŒE=2\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“floatç±»å‹å ç”¨4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè€Œdoubleç±»å‹åˆ™æ˜¯8ä¸ªå­—èŠ‚\næµ®ç‚¹ç±»å‹çš„å†…å­˜ç©ºé—´ç¤ºæ„å›¾\nfloatç±»å‹çš„S\\E\\Mè¢«åˆ†åŒºå­˜æ”¾åœ¨è¿™4ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ä¸­\nåŒç†ï¼Œdoubleç±»å‹çš„S\\E\\Mä¹Ÿæ˜¯åˆ†åŒºå­˜æ”¾ï¼Œå®ƒçš„æœ‰æ•ˆæ•°å­—é•¿äºfloatç±»å‹\nå¯¹äº64ä½çš„æµ®ç‚¹æ•°ï¼Œæœ€é«˜çš„1ä½æ˜¯ç¬¦å·ä½Sï¼Œæ¥ç€çš„11ä½æ˜¯æŒ‡æ•°Eï¼Œå‰©ä¸‹çš„52ä½ä¸ºæœ‰æ•ˆæ•°å­—M\n\nIEEE754å¯¹Mçš„ç‰¹æ®Šè§„å®šå› ä¸ºæ˜¯äºŒè¿›åˆ¶æ•°ï¼Œ1â‰¤M&lt;2ï¼Œè€ŒMå¯ä»¥å†™æˆ 1.xxxxxx çš„å½¢å¼ï¼Œå…¶ä¸­xxxxxxæ˜¯å°æ•°éƒ¨åˆ†\nIEEE 754è§„å®šï¼Œåœ¨è®¡ç®—æœºå†…éƒ¨ä¿å­˜Mæ—¶ï¼Œé»˜è®¤è¿™ä¸ªæ•°çš„ç¬¬ä¸€ä½æ€»æ˜¯1ï¼Œå› æ­¤å¯ä»¥è¢«èˆå»ï¼Œåªä¿å­˜åé¢çš„xxxxxxéƒ¨åˆ†\n\næ¯”å¦‚ä¿å­˜1.01çš„æ—¶å€™ï¼Œåªä¿å­˜å°æ•°ç‚¹åçš„01ï¼Œç­‰åˆ°è¯»å–çš„æ—¶å€™ï¼Œå†æŠŠç¬¬ä¸€ä½çš„1åŠ ä¸Šå»\nè¿™æ ·åšçš„ç›®çš„æ˜¯èŠ‚çœ1ä½æœ‰æ•ˆæ•°å­—ã€‚ä»¥32ä½æµ®ç‚¹æ•°ä¸ºä¾‹ï¼Œç•™ç»™Måªæœ‰23ä½ï¼Œå°†ç¬¬ä¸€ä½çš„1èˆå»ä»¥åï¼Œç­‰äºå¯ä»¥ä¿å­˜24ä½æœ‰æ•ˆæ•°å­—ã€‚\n\næˆ‘åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œå…³äºè¿™ä¸ª24ä½æœ‰æ•ˆæ•°å­—æ›¾äº§ç”Ÿäº†ç–‘æƒ‘ã€‚\nå®é™…ä¸Šå®ƒå¹¶ä¸éš¾ç†è§£ï¼š\nåœ¨å†…å­˜ä¸­ï¼Œ32ä½æµ®ç‚¹æ•°çš„Mæœ‰23ä½çš„ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬ä¿å­˜äº†å°æ•°ç‚¹å‰é¢çš„1ï¼Œå°±åªèƒ½ä¿å­˜å°æ•°ç‚¹å22ä½çš„å†…å®¹ã€‚\nä½†å¦‚æœæˆ‘ä»¬çœç•¥1ï¼Œåªä¿ç•™å°æ•°ç‚¹åçš„å†…å®¹ï¼Œé‚£ä¸å°±èƒ½ä¿å­˜åˆ°å°æ•°ç‚¹åç¬¬23ä½äº†å—ï¼Ÿå†åŠ ä¸ŠåŸæ¥å°æ•°ç‚¹å‰çš„1ï¼Œä¸å°±æ˜¯24ä½æœ‰æ•ˆæ•°å­—äº†ï¼\nIEEE754å¯¹æŒ‡æ•°Eçš„ç‰¹æ®Šè§„å®šEæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°(unsigned int)\n\nå¦‚æœEä¸º8ä½ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0-255\nå¦‚æœEä¸º11ä½ï¼Œå®ƒçš„å–å€¼èŒƒå›´æ˜¯0-2047\n\nå¯æ˜¯ç§‘å­¦è®¡æ•°æ³•é‡Œé¢çš„Eæ˜¯å¯ä»¥å‡ºç°è´Ÿæ•°çš„ã€‚\næ‰€ä»¥IEEE754è§„å®šï¼Œå­˜å…¥å†…å­˜æ—¶Eçš„çœŸå®å€¼å¿…é¡»å†åŠ ä¸Šä¸€ä¸ªä¸­é—´æ•°\n\n8ä½çš„Eï¼Œä¸­é—´æ•°æ˜¯127\n11ä½çš„Eï¼Œä¸­é—´æ•°æ˜¯1023\n\n\nä¾‹ï¼š2^10çš„Eæ˜¯10ï¼Œæ‰€ä»¥ä¿å­˜ä¸º32ä½æµ®ç‚¹æ•°çš„æ—¶å€™ï¼ŒEå¿…é¡»ä¿å­˜ä¸º10+127=137ï¼Œå³10001001ã€‚\nä¿å­˜ä¸º64ä½æµ®ç‚¹æ•°çš„æ—¶å€™ï¼ŒEä¿å­˜ä¸º10+1023=1033ï¼Œå³10000001001\n\nâ‘ å½“Eä¸ä¸ºå…¨0æˆ–å…¨1æ—¶æµ®ç‚¹æ•°é‡‡ç”¨ä¸‹é¢çš„è§„åˆ™æ¥è¿›è¡Œå­˜æ”¾ï¼š\n\nå†…å­˜ä¸­æŒ‡æ•°Eçš„è®¡ç®—å€¼å‡å»127(æˆ–1023)ï¼Œå¾—åˆ°Eçš„çœŸå®å€¼ï¼Œå†å°†æœ‰æ•ˆæ•°å­—Må‰é¢åŠ ä¸Šç¬¬ä¸€ä½çš„1\n\nä»¥32ä½æµ®ç‚¹æ•°ä¸¾ä¾‹ï¼š\n0.5çš„äºŒè¿›åˆ¶å½¢å¼ä¸º0.1ã€‚ç§‘å­¦è®¡æ•°æ³•ä¸­æ•´æ•°éƒ¨åˆ†å¿…é¡»ä¸º1ï¼Œå°æ•°ç‚¹åº”å³ç§»ä¸€ä½ã€‚\nåˆ™ä¸º1.0*2^(-1)ï¼ŒEçš„çœŸå®å€¼ä¸º-1ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­ä¸º-1+127=126(01111110)\nMå­˜æ”¾å°æ•°ç‚¹åçš„0ï¼Œè¡¥å…¨23ä½ï¼Œå…¨ä¸º0\nè¿™æ—¶å€™0.5çš„äºŒè¿›åˆ¶è¡¨ç°å½¢å¼å°±æ˜¯\n0 01111110 00000000000000000000000\n\nå¯¹åº”Sã€Eã€Mçš„éƒ¨åˆ†å¦‚ä¸‹è¡¨æ‰€ç¤º\n\n\n\nS\nE\nM\n\n\n\n0\n01111110\n00000000000000000000000\n\n\nâ‘¡å½“Eä¸ºå…¨0æ—¶\nè¿™æ—¶ï¼Œæµ®ç‚¹æ•°çš„æŒ‡æ•°Eç­‰äº1-127ï¼ˆæˆ–è€…1-1023ï¼‰å³ä¸ºçœŸå®å€¼\næœ‰æ•ˆæ•°å­—Mä¸å†åŠ ä¸Šç¬¬ä¸€ä½çš„1ï¼Œè€Œæ˜¯è¿˜åŸä¸º0.xxxxxxçš„å°æ•°\nè¿™æ ·åšæ˜¯ä¸ºäº†è¡¨ç¤ºÂ±0ï¼Œä»¥åŠæ¥è¿‘äº0çš„å¾ˆå°çš„æ•°å­—\n\nâ‘¢å½“Eä¸ºå…¨1æ—¶å½“Eä¸ºå…¨1æ—¶ï¼ŒåŸEä¸º128ï¼Œæ•°å­—éå¸¸å¤§ï¼Œç›¸å½“äºæ— ç©·å¤§\n\nè¿™æ—¶ï¼Œå¦‚æœæœ‰æ•ˆæ•°å­—Må…¨ä¸º0ï¼Œè¡¨ç¤ºÂ±æ— ç©·å¤§ï¼ˆæ­£è´Ÿå–å†³äºç¬¦å·ä½sï¼‰\n\nè§£é‡Šå¼€ç¯‡ä»£ç å›åˆ°å¼€å¤´\næ•´å½¢9çš„åŸç å¦‚ä¸‹\n00000000 00000000 00000000 00001001\n\nå½“æˆ‘ä»¬å°†å®ƒå¼ºåˆ¶å­˜æ”¾åˆ°floatç±»å‹çš„æŒ‡é’ˆä¸­æ—¶\n\n\n\nS\nE\nM\n\n\n\n0\n00000000\n0000000 00000000 00001001\n\n\nè§£ç å‡ºæ¥å°±æ˜¯$$(-1)^00.0000000 00000000 000010012^{-126}$$è¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ•°å­—ï¼Œè¿œå°äºfloatç±»å‹é»˜è®¤çš„å°æ•°ç‚¹åå…­ä½ï¼Œæ‰€ä»¥printfæ‰“å°çš„æ˜¯0.000000\nint n;float* pfloat = (float*)&amp;n;*pfloat = 9.0; // ä»¥æµ®ç‚¹æ•°å½¢å¼å­˜å…¥äº†æ•´å½¢nçš„åœ°å€ç©ºé—´printf(\"numçš„å€¼ä¸ºï¼š%d\\n\", n);printf(\"*pfloatçš„å€¼ä¸ºï¼š%f\\n\", *pfloat);\n\nè¿™é‡Œ9.0å°±æ˜¯ä»¥æµ®ç‚¹æ•°çš„å½¢å¼å­˜å…¥floatæŒ‡é’ˆçš„\n\n9.0  åè¿›åˆ¶\n1001.0 äºŒè¿›åˆ¶\n\nS=0, M=1.001, E=3äºŒè¿›åˆ¶ç 0100 0001 0001 0000 0000 0000 0000 0000\n\nå¼€å¯è°ƒè¯•ï¼Œåœ¨å†…å­˜æ¡†ä¸­æŸ¥çœ‹nçš„åœ°å€å¦‚ä¸‹\n\n\n\n\n41\n10\n00\n00\n\n\n\n0100 0001\n0001 0000\n0000 0000\n0000 0000\n\n\næ­£å¥½å¯¹åº”äº†æµ®ç‚¹æ•°9.0åœ¨å†…å­˜ä¸­å­˜æ”¾çš„äºŒè¿›åˆ¶ç \næœ€ånä»¥%dæ•´å½¢çš„æ–¹å¼æ‰“å°å‡ºæ¥ï¼Œå°±æ˜¯æˆ‘ä»¬çœ‹åˆ°çš„1091567616\nç»“è¯­è€ƒè¯•å‘¨å¿«è¦ç»“æŸå•¦ï¼å¯’å‡å°†å¼€å§‹æ–°çš„ä»£ç å­¦ä¹ \n\nç»ˆäºè¡¥ä¸Šäº†ä¹‹å‰æ¬ ä¸‹çš„åšå®¢äº†ï¼Œå½“ä½œæ˜¯ä¸€ç§å¤ä¹ å§ï¼Œçš„ç¡®æœ‰ä¸å°‘ä¸œè¥¿å·²ç»å¿˜è®°çš„å·®ä¸å¤šäº†ğŸ˜¥\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼Œç‚¹ä¸ªèµå†èµ°å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘charç±»å‹å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨ï¼Ÿ","url":"/posts/4229898968/","content":"@[toc]\nå¼•å­ä¸Šç¯‡åšå®¢å‘å¤§å®¶ä»‹ç»äº†intç±»å‹åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ã€é“¾æ¥ã€‘\næœ¬ç¯‡åšå®¢æˆ‘ä»¬ç»§ç»­å¾€åï¼Œçœ‹çœ‹æ•´å½¢å®¶æ—é‡Œçš„charç±»å‹æ˜¯å¦‚ä½•åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å§ï¼\n\ncharç±»å‹å­—ç¬¦ç±»å‹åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§å½¢å¼\n\nunsigned char æ— ç¬¦å·\n\nsigned char æœ‰ç¬¦å·\n\n\nç”¨ä¸€ä¸ªç®€å•çš„printfæ¥çœ‹çœ‹å®ƒä»¬åœ¨æ‰“å°ä¸Šçš„åŒºåˆ«\n#include&lt;stdio.h&gt;int main()&#123;\tchar a=-1;\tsigned char b=-1;\tunsigned char c=-1;    printf(&quot;a=%d b=%d c=%d\\n&quot;,a,b,c);    \treturn 0;&#125;\n\næ‰“å°ç»“æœä¸º\na=-1 b=-1 c=255\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸¤ä¸ªç»“è®º\n\n1.åœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œcharé»˜è®¤ä¸ºsigned char\n2.unsigned charçš„å¤„ç†æ–¹å¼å’Œsignedä¸åŒ\n\næ— ç¬¦å·æ•°çš„å¤„ç†å¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„è¿™ä¸€ç¯‡åšå®¢ğŸ‘‰ã€é“¾æ¥ã€‘\n\nå­˜æ”¾å’Œæå‡ä¾‹ä¸€ï¼š-1å…ˆå†™å‡º-1çš„åŸåè¡¥ç \n10000000 00000000 00000000 00000001  -1åŸç 11111111 11111111 11111111 11111110   åç 11111111 11111111 11111111 11111111   è¡¥ç \n\nåœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ—¶å€™ï¼Œaã€bã€cå­˜æ”¾çš„éƒ½æ˜¯è¡¥ç çš„æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œå³11111111\nè€Œå½“æˆ‘ä»¬ç”¨%dæ‰“å°çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿæ•´å‹æå‡\n\næ•´å‹æå‡çš„æ¦‚å¿µæˆ‘å†™è¿‡å¦å¤–ä¸€ç¯‡åšå®¢ğŸ‘‰ã€ç‚¹æˆ‘ã€‘\n\nè¿™é‡Œå°±æ˜¯æœ‰ç¬¦å·å’Œæ— ç¬¦å·å¤„ç†ä¸åŒçš„åœ°æ–¹äº†\nå› ä¸ºaã€béƒ½æ˜¯æœ‰ç¬¦å·çš„charï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šå°†æœ€é«˜ä½è§†ä¸ºç¬¦å·ä½è¿›è¡Œæå‡\næ‰€ä»¥aã€bè¿›è¡Œæ•´å‹æå‡åçš„ç»“æœå¦‚ä¸‹\n11111111 11111111 11111111 11111111//æå‡åaã€bçš„è¡¥ç \n\nè€Œcæ˜¯æ— ç¬¦å·charç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šåœ¨æœ€é«˜ä½è¡¥0\n00000000 00000000 00000000 11111111//æå‡åcçš„è¡¥ç \n\næ­¤æ—¶æœ€é«˜ä½ä¸º0ï¼Œç¼–è¯‘å™¨å°†å…¶è§†ä¸ºæ­£æ•°ï¼Œæ­¤æ—¶è¡¥ç å°±æ˜¯åŸç ï¼Œæ‰“å°255\n\nç¬¦å·ä½ 0ä¸ºæ­£ï¼Œ1ä¸ºè´Ÿ\næ­£æ•°çš„åŸç ã€åç ã€è¡¥ç ç›¸åŒ\n\nä¾‹äºŒï¼š-128#include &lt;stdio.h&gt;int main()&#123;\tchar a=-128;\tprintf(&quot;%u\\n&quot;,a);\treturn 0;&#125;\n\næ‰“å°çš„ç»“æœå¹¶ä¸æ˜¯-128\n4294967168\n\n-128çš„åŸåè¡¥ç \n10000000 00000000 00000000 10000000  -128åŸç 11111111 11111111 11111111 01111111   åç 11111111 11111111 11111111 10000000   è¡¥ç \n\naä¸­å­˜æ”¾çš„æ˜¯1000 0000\næœ€é«˜ä½è§†ä¸ºç¬¦å·ä½ï¼Œæ•´å‹æå‡å\n11111111 11111111 11111111 10000000//æ–°çš„è¡¥ç \n\nä½†å› ä¸ºè¿™é‡Œæ˜¯**%uæ‰“å°ï¼Œè§†ä½œæ— ç¬¦å·æ•°**\næ­¤æ—¶åŸåè¡¥ç ä¸€è‡´ï¼Œç›´æ¥è§†ä½œåŸç è¿›è¡Œè®¡ç®—\næ‰“å°ç»“æœå³ä¸º4294967168\n\nå¦‚æœæˆ‘ä»¬è®©aç­‰äº128ï¼Œç»“æœç›¸åŒ\n\ncharå˜é‡ä¸­å­˜æ”¾æ•°å€¼çš„èŒƒå›´å…ˆæ¥çœ‹çœ‹è¿™æ ·ä¸€ä¸²ä»£ç \n#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main()&#123;\tchar a[1000];\tint i;\tfor (i = 0; i &lt; 1000; i++)\t&#123;\t\ta[i] = -1 - i;\t&#125;\tprintf(&quot;%d&quot;, strlen(a));\treturn 0;&#125;\n\nä»£ç çš„ç»“æœå¦‚ä¸‹ï¼š255\n\nåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾å®šäº†a[1000]ï¼Œaæ•°ç»„é‡Œé¢ç†åº”æœ‰1000ä¸ªå…ƒç´ \né‚£strlenå‡½æ•°æ±‚å¾—çš„ç»“æœä¸ºä½•æ˜¯255ï¼Œè€Œä¸æ˜¯1000å‘¢ï¼Ÿ\n\nå®é™…charç±»å‹ä¸­çš„æ•°æ®èŒƒå›´åˆ†ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·ä¸¤ç§\n\nsigned char  1byte-8bitï¼Œå–å€¼èŒƒå›´-128~127\nunsigned char 1byte-8bitï¼Œå–å€¼èŒƒå›´0~255\n\nä»¥äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º\n\nå› ä¸ºæ— ç¬¦å·charç±»å‹ä¸­ï¼Œå…«ä½è¡¥ç è§†ä½œåŸç è¿›è¡Œè®¡ç®—\nè€Œæœ‰ç¬¦å·charç±»å‹ä¸­ï¼Œåœ¨è®¡ç®—çš„æ—¶ä¼šå°†é¦–ä½è§†ä¸ºç¬¦å·ä½\n11111111 //è¡¥ç 11111110 //åç ï¼Œè¡¥ç å‡110000001 //æºç ï¼Œè¯»å‡º-1\n\n10000001//è¡¥ç 10000000//åç 11111111//é¦–ä½ç¬¦å·ä½ä¸è¯»ï¼Œå…¶ä»–ä½è¯»å‡º-127\n\n10000000//è¡¥ç è¿™ä¸ªäºŒè¿›åˆ¶ä½ä¸èƒ½-1ï¼Œç›´æ¥è§†ä½œæºç è®¡ç®—ä¸èƒ½å¿˜è®°è¿™æ˜¯ä¸ªè´Ÿæ•°ï¼10000000//æºç è¯»å‡º128ï¼ŒåŠ ä¸Šè´Ÿå·ä¸º-128\n\nä¸‹é¢è¿™å¹…å›¾å¯ä»¥å½¢è±¡åœ°è¡¨ç¤ºå‡ºcharç±»å‹æ•°æ®èŒƒå›´\n\nchar a[1000];int i;for (i = 0; i &lt; 1000; i++)&#123;\ta[i] = -1 - i;&#125;printf(&quot;%d&quot;, strlen(a));\n\nä¸Šé¢é‚£ä¸²ä»£ç é‡Œé¢çš„forå¾ªç¯ï¼Œå®åˆ™æ˜¯ä¸€ç›´ç»™æ•°ç»„aä¸­ä»-1å¼€å§‹èµ‹å€¼åˆ°-128ï¼Œå†ä»127èµ‹å€¼åˆ°1ï¼Œ0â€¦â€¦å¦‚æ­¤å¾ªç¯èµ‹å€¼ï¼Œç›´åˆ°i&#x3D;1000è·³å‡ºå¾ªç¯ã€‚\nè€Œæˆ‘ä»¬çš„strlenå‡½æ•°åœ¨è®¡ç®—æ•°ç»„é•¿åº¦çš„æ—¶å€™ï¼Œé‡åˆ°ç¬¬ä¸€ä¸ª0å°±ä¼šåœæ­¢è®¡ç®—\nè¿™æ ·æˆ‘ä»¬å°±å¾—å‡ºäº†ç­”æ¡ˆä¸º255ï¼\nå¦‚ä½•æŸ¥è¯¢èŒƒå›´å®šä¹‰ï¼Ÿ\næˆ‘ä»¬å¯ä»¥é€šè¿‡å¤´æ–‡ä»¶&lt;limits.h&gt;æ¥æŸ¥æ‰¾èŒƒå›´å®šä¹‰\n\nåœ¨VS2019é‡Œé¢å³é”®è¯¥å¤´æ–‡ä»¶ï¼Œç‚¹å‡»â€œè½¬åˆ°æ–‡æ¡£â€\n\nè¿™é‡Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°å„ç§æ•°æ®ç±»å‹çš„æ•°æ®èŒƒå›´\n\næˆ‘ä»¬è¿˜å¯ä»¥çœ‹çœ‹å…¶ä»–çš„æ•°æ®ç±»å‹\nä»¥æœ‰ç¬¦å·shortä¸ºä¾‹ï¼Œå®ƒçš„èŒƒå›´æ˜¯-32678åˆ°32767\n\n\n\nç»“è¯­ä»¥ä¸€ä¸²ä»£ç ç¤ºä¾‹ç»“æŸæœ¬ç¯‡åšå®¢å§ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼\nç‚¹ä¸ªèµå‘—ï¼Œè¿™å¯¹æˆ‘ç°å¸¸é‡è¦ï¼ï¼ğŸ˜˜\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°æ®å­˜å‚¨"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬ä¸€ç«™ï¼Œå­—ç¬¦æŒ‡é’ˆ&typedefå…³é”®å­—","url":"/posts/3113579721/","content":"[TOC]\n\nç´§å¼ åˆºæ¿€çš„å¯’å‡å­¦ä¹ å¼€å§‹å•¦ï¼\n\nç®€å•å›é¡¾ä¸€ä¸‹æŒ‡é’ˆçš„æ¦‚å¿µ\n\nå†…å­˜ä¼šåˆ’åˆ†ä»¥å­—èŠ‚ä¸ºå•ä½çš„ç©ºé—´ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼ˆåœ°å€&#x2F;æŒ‡é’ˆï¼‰\n\næŒ‡é’ˆå˜é‡å¯ä»¥å­˜æ”¾è¿™ä¸ªåœ°å€&#x2F;æŒ‡é’ˆ\n\n\næ³¨ï¼šæˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„æŒ‡é’ˆï¼Œä¸€èˆ¬æ˜¯æŒ‡é’ˆå˜é‡\n\nä¸‹é¢è®©æˆ‘ä»¬åä¸ŠæŒ‡é’ˆè¿›é˜¶çš„ğŸšŒï¼Œæ¥åˆ°ç¬¬ä¸€ç«™ï¼å­—ç¬¦æŒ‡é’ˆ\n1å­—ç¬¦æŒ‡é’ˆ1.1ä»£ç ç¤ºä¾‹1int main()&#123;\tchar ch = &#x27;w&#x27;;\tchar* p= &amp;ch;\t\tchar* pa = &quot;abcdef&quot;;\treturn 0;&#125;\n\n\nå­—ç¬¦å˜é‡ché‡Œé¢å­˜æ”¾äº†å­—ç¬¦w\nå­—ç¬¦æŒ‡é’ˆpé‡Œé¢å­˜æ”¾äº†chçš„åœ°å€\n\næŒ‡é’ˆå˜é‡paé‡Œé¢å­˜æ”¾äº†abcdefå­—ç¬¦ä¸²çš„åœ°å€ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œåˆå§‹åŒ–ã€‚è€Œæ˜¯ç›´æ¥æŠŠå®ƒæ”¾è¿›äº†æŒ‡é’ˆå˜é‡paé‡Œé¢ã€‚\nå’Œå‰ä¸¤è¡Œçš„å­—ç¬¦wä¸åŒï¼Œabcdefæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„åªè¯»æ•°æ®åŒºï¼Œæ— æ³•ä¿®æ”¹ï¼Œå³ä¾¿é€šè¿‡æŒ‡é’ˆä¹Ÿæ— æ³•ä¿®æ”¹ã€‚\nä¸ºäº†é¿å…ç†è§£å‡ºé”™ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåŠ ä¸Šconstä¿®é¥°\nconst char* pa = &quot;abcdef&quot;;\n\n\n\nconstæ”¾åœ¨*çš„å·¦è¾¹\nè¡¨ç¤ºconstä¿®é¥°çš„æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½é€šè¿‡æŒ‡é’ˆæ¥æ”¹å˜\nä½†æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«æ˜¯å¯ä»¥æ”¹å˜çš„\n\nconstæ”¾åœ¨*çš„å³è¾¹\nè¡¨ç¤ºconstä¿®é¥°çš„æ˜¯æŒ‡é’ˆå˜é‡æœ¬èº«ï¼ŒæŒ‡é’ˆå˜é‡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nä½†æ˜¯*paæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹æ˜¯å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥ä¿®æ”¹çš„\n\n\n\n\n1.2ä»£ç ç¤ºä¾‹2int main()&#123;\tchar arr1[] = &quot;abcdef&quot;;\tchar arr2[] = &quot;abcdef&quot;;\tconst char* str1 = &quot;abcdef&quot;;\tconst char* str2 = &quot;abcdef&quot;;\tif (arr1 == arr2)\t\tprintf(&quot;arr1==arr2\\n&quot;);\telse\t\tprintf(&quot;arr1!=arr2\\n&quot;);\tif (str1 == str2)\t\tprintf(&quot;str1==str2\\n&quot;);\telse\t\tprintf(&quot;str1!=str2\\n&quot;);\treturn 0;&#125;\n\nå®ƒçš„ç»“æœå¦‚ä¸‹ï¼š\n\nåœ¨ä¾‹å­1é‡Œé¢æˆ‘ä»¬æåˆ°è¿‡ï¼Œstr1å’Œstr2è¿™ç§æƒ…å†µéƒ½æŒ‡å‘ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²\næ—¢ç„¶å­—ç¬¦ä¸²abcdefæ— æ³•è¢«æ”¹å˜ï¼Œç¼–è¯‘å™¨ä¹Ÿæ²¡æœ‰å¿…è¦åˆ›å»ºä¸¤ä¸ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´æ¥å­˜æ”¾ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²\næ‰€ä»¥str1å’Œstr2çš„åœ°å€æ˜¯å®Œå…¨ä¸€æ ·çš„\nè€Œarr1å’Œarr2æ˜¯å®Œå…¨ä¸åŒçš„æ•°ç»„ï¼Œå®ƒä»¬çš„é¦–å…ƒç´ åœ°å€ä¸ä¸€æ ·ï¼Œæ‰“å°çš„ç»“æœæ˜¯ä¸ç›¸ç­‰\n\n\nğŸšç¬¬ä¸€ç«™çš„è·ç¦»æ¯”è¾ƒçŸ­\nåœ¨ç«™å°ä¸Šï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ— äººè®¤é¢†çš„è¢‹å­ï¼Œé‡Œé¢è£…ç€ä¸€ä¸ªå…³é”®å­—\ntypedef\n\n2typedefå…³é”®å­—2.1å¦‚ä½•ä½¿ç”¨åœ¨MSDNä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾åˆ°typedefçš„å®šä¹‰\n\nç®€å•åœ°è¯´ï¼Œtypedefçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå·²æœ‰çš„ç±»å‹åæ¢ä¸€ä¸ªæ–°çš„åå­—\ntypedef int* pint;\n\nè¿™å¥ä»£ç çš„æ„æ€æ˜¯ï¼šå°†int*å‘½åä¸ºpint\n\npintåœ¨ä½¿ç”¨çš„æ—¶å€™å’Œint*å®Œå…¨ä¸€è‡´\næˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨int*\n\nåœ¨ç»“æ„ä½“é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨typedefæ¥ç¼©çŸ­åŸæœ‰ç»“æ„ä½“å®šä¹‰çš„è¯­å¥\nå¦‚ï¼šå°†struct Stuå‘½åä¸ºStu\ntypedef struct Stu&#123;\tint ID[10];\tchar name[10];\tint age;&#125;Stu;\n\n2.2typedefå’Œ#defineçš„åŒºåˆ«æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨#defineè¯­å¥ï¼Œè¿›è¡Œè¿™é¡¹æ“ä½œ\n#define PINT int*\n\nğŸ‘†å®šä¹‰è¯­å¥PINTä¸ºint*\n2.2.1æŒ‡é’ˆè¿ç»­å®šä¹‰å…ˆæ¥äº†è§£ä¸€ä¸‹å¦‚ä½•æ­£ç¡®è¿ç»­å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ\nint*pa,*pb;//æ­£ç¡®çš„è¿ç»­å®šä¹‰int*paï¼Œpb;//é”™è¯¯//paæ˜¯int*ç±»å‹ï¼Œè€Œpbæ˜¯intç±»å‹\n\nå› ä¸ºè¿™ä¸¤ä¸ªçš„æƒ…å†µéå¸¸å®¹æ˜“ææ··ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å»ºè®®è¿ç»­å®šä¹‰æŒ‡é’ˆ\ntypedef int* pint;#define PINT int*int main()&#123;    pint pa,pb;//å¯è¿ç»­å®šä¹‰æŒ‡é’ˆ    //pa--&gt;int*    //pb--&gt;int*    PINT pa,pb;//ç­‰åŒäºint*paï¼Œpb    //pa--&gt;int*    //pb--&gt;int&#125;\n\n\ntypedefä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å˜é‡ç±»å‹\n#defineåªæ˜¯åœ¨å¯¹åº”ä½ç½®è¿›è¡Œæ›¿æ¢\n\nå› ä¸ºtypedefäº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œpintä¸ºint*ï¼Œä½†ä¸int*ä¹Ÿæœ‰ä¸åŒ\nint pa,pb;//pa,pbéƒ½æ˜¯intç±»å‹pint pa,pb;//pa,pbéƒ½æ˜¯int*ç±»å‹\n\nè€Œæˆ‘ä»¬ç›´æ¥ç”¨int*è¿›è¡Œè¿ç»­å®šä¹‰æŒ‡é’ˆå˜é‡æ˜¯é”™è¯¯çš„\nint*paï¼Œpb;//é”™è¯¯//paæ˜¯int*ç±»å‹ï¼Œè€Œpbæ˜¯intç±»å‹\n\n\nä½ å­¦ä¼šäº†å—ï¼Ÿæˆ‘åæ­£æ˜¯å­¦åºŸäº†\nå˜Ÿå˜Ÿå˜Ÿï¼Œå»ä¸‹ä¸€ç«™ï¼ğŸšŒ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬ä¸‰ç«™ï¼Œæ•°ç»„æŒ‡é’ˆ","url":"/posts/2538395833/","content":"[TOC]\n\nä¸Šä¸€ç«™ğŸšæˆ‘ä»¬å­¦ä¹ äº†æŒ‡é’ˆæ•°ç»„\nä»Šå¤©æ¥åˆ°æˆ‘ä»¬çš„ç¬¬ä¸‰ç«™ğŸšŒ\nå¯’å‡ä¹Ÿä¸èƒ½è½ä¸‹å­¦ä¹ ï¼\n\nä»Šå¤©å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„markdownè¯­æ³•\næˆ‘æ˜¯çº¢è‰²\n&lt;font color=red&gt;æˆ‘æ˜¯çº¢è‰²&lt;/font&gt;\n\n\næ•°ç»„æŒ‡é’ˆæ•´å‹æŒ‡é’ˆï¼šæŒ‡å‘æ•´å‹çš„æŒ‡é’ˆ\nå­—ç¬¦æŒ‡é’ˆï¼šæŒ‡å‘å­—ç¬¦çš„æŒ‡é’ˆ\næ•°ç»„æŒ‡é’ˆï¼šæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ\n1åŸºæœ¬æ¦‚å¿µä¸‹é¢å“ªä¸ªæ˜¯æ•°ç»„æŒ‡é’ˆå‘¢ï¼Ÿ\n\næŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆçš„æ¦‚å¿µå¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸€å®šè¦åˆ†æ¸…æ¥šå“¦ï¼\n\nint *p1[10];int (*p2)[10];\n\n\np1æ˜¯æŒ‡é’ˆæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹æ˜¯int*\np2æ˜¯æ•°ç»„æŒ‡é’ˆï¼Œæ¯ä¸ªå…ƒç´ çš„ç±»å‹æ˜¯int(*)[10]\n\nint (*p2)[10];//p2å…ˆå’Œ*ç»“åˆï¼Œè¡¨ç¤ºp2æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡//æŒ‡å‘ä¸€ä¸ªå¤§å°ä¸º10ä¸ªæ•´å‹çš„æ•°ç»„//æ‰€ä»¥p2æ˜¯æ•°ç»„æŒ‡é’ˆ\n\næ³¨ï¼š[ ]çš„ä¼˜å…ˆçº§é«˜äº*ï¼Œæ‰€ä»¥å¿…é¡»åŠ ä¸Š()æ¥ä¿è¯p2å…ˆå’Œ*ç»“åˆ\n\n1.1ä»£ç ç¤ºä¾‹int* parr[6];int* (*pp)[6] = &amp;parr;\n\nppæ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œç±»å‹æ˜¯int*(*)[6],å­˜æ”¾çš„æ˜¯int*ç±»å‹çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„æœ‰6ä¸ªå…ƒç´ \n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»æ‰å˜é‡åï¼Œå‰©ä¸‹çš„å³ä¸ºå˜é‡ç±»å‹\nå¦‚ï¼šint* (*pp)[6]å»æ‰å˜é‡åppï¼Œå˜é‡ç±»å‹ä¸ºint*(*)[6]\n\nchar arr[5];char (*pa)[5] = &amp;arr;\n\npaä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œå˜é‡ç±»å‹ä¸ºchar(*)[5]ï¼ŒæŒ‡å‘charç±»å‹çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„å…ƒç´ ä¸ªæ•°ä¸º5\n1.2é”™è¯¯ç¤ºèŒƒä½ è‚¯å®šä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå˜é‡ç±»å‹ä¸ºint(*)[5]çš„æ•°ç»„æŒ‡é’ˆï¼Œèƒ½å¦æŒ‡å‘æ•°ç»„å…ƒç´ ä¸º3æˆ–è€…6çš„æ•°ç»„å‘¢ï¼Ÿ\n\nç¨‹åºèƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘ï¼Œä½†æ˜¯ä¼šæŠ¥å‡ºå¦‚ä¸‹è­¦å‘Š\nwarning C4048: â€œint (*)[5]â€å’Œâ€œint (*)[3]â€æ•°ç»„çš„ä¸‹æ ‡ä¸åŒ\n\nåœ¨æ­£å¸¸ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—ä¿è¯æ•°ç»„æŒ‡é’ˆå’ŒåŸæ•°ç»„çš„å…ƒç´ ä¸ªæ•°ä¸€è‡´ï¼\n2arrå’Œ&amp;arrçš„åŒºåˆ«åœ¨è¿›ä¸€æ­¥äº†è§£æ•°ç»„æŒ‡é’ˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£arrå’Œ&amp;arrçš„åŒºåˆ«\nå½“æˆ‘ä»¬ç”¨%pæ‰“å°arrå’Œ&amp;arræ—¶ï¼Œä¼šå‘ç°å®ƒä»¬çš„ç»“æœæ˜¯ç›¸åŒçš„\n\nä½†è¿™èƒ½è¯´æ˜arrå’Œ&amp;arrç­‰ä»·äº†å—ï¼Ÿ \nå¹¶ä¸èƒ½ï¼\nå†æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸²ä»£ç \n\n\narr+1è·³è¿‡4ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªå…ƒç´ intçš„å¤§å°\n&amp;arr+1è·³è¿‡40ä¸ªå­—èŠ‚ï¼Œæ•´ä¸ªæ•°ç»„çš„å¤§å°\n\nå…¶å®&amp;arrå’Œarrè™½ç„¶æŒ‡å‘çš„åœ°å€å€¼ç›¸åŒï¼Œä½†æ˜¯æ„ä¹‰ä¸åŒï¼\n\n&amp;arrè¡¨ç¤ºçš„æ˜¯æ•°ç»„çš„åœ°å€ï¼Œæ˜¯int(*)[10]ç±»å‹\narrè¡¨ç¤ºæ•°ç»„é¦–å…ƒç´ çš„åœ°å€ï¼Œæ˜¯int*ç±»å‹\n\næ•°ç»„çš„åœ°å€+1ï¼Œè·³è¿‡æ•´ä¸ªæ•°ç»„çš„å¤§å°\næ‰€ä»¥&amp;arr+1å’Œ&amp;arrçš„å·®å€¼ä¸º40\nå¯¹åº”çš„int(*p)[5]å’Œint* p1ä¹Ÿæœ‰ä¸åŒ\n\npæ¥æ”¶çš„æ˜¯&amp;arrï¼Œæ•´ä¸ªæ•°ç»„çš„åœ°å€\np1æ¥æ”¶arrï¼Œæ•°ç»„é¦–å…ƒç´ çš„åœ°å€\n\n\n3æ•°ç»„æŒ‡é’ˆçš„ä½¿ç”¨3.1æ‰“å°ä¸€ç»´æ•°ç»„ä¸‹é¢è¿™ä¸²ä»£ç æ˜¯ç”¨æ•´å‹æŒ‡é’ˆæ‰“å°æ•°ç»„å…ƒç´ çš„æƒ…å†µ\n\né™¤äº†æ•´å‹æŒ‡é’ˆå¤–ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•°ç»„æŒ‡é’ˆæ‰“å°å…ƒç´ \nint main()&#123;\tint arr[10] = &#123; 1,2,3,4,5,6,7,8,9,10 &#125;;\tint (*p)[10] = &amp;arr;\tint i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, *((*p) + i));        //*p--&gt;arr\t&#125;\tprintf(&quot;\\n&quot;);\treturn 0;&#125;\n\n*pç­‰ä»·äºarrï¼Œarr+iç­‰ä»·äº&amp;arr[i]ï¼Œå¯¹arr+iè§£å¼•ç”¨å°±æ˜¯arr[i]\n\nä½†æ˜¯è¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯æŠŠç®€å•é—®é¢˜å¤æ‚åŒ–äº†ï¼šæˆ‘ä»¬æœ¬æ¥å°±å¯ä»¥ç”¨int*æŒ‡é’ˆæ¥æ‰“å°æ•°ç»„å…ƒç´ ï¼Œä¸ºä½•è¦åˆ©ç”¨æ•°ç»„æŒ‡é’ˆæ¥å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿ\næ‰€ä»¥åœ¨ä¸€ç»´æ•°ç»„é‡Œé¢ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå†™\n\n3.2æ‰“å°äºŒç»´æ•°ç»„å‡è®¾æˆ‘ç°åœ¨éœ€è¦ä¸€ä¸ªprintå‡½æ•°æ¥æ‰“å°äºŒç»´æ•°ç»„\nåœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæƒ³åˆ°ç”¨è¿™å¼ æ–¹å¼ä¼ å…¥äºŒç»´æ•°ç»„\nvoid print(int a[3][5], int r, int c);\n\nå½“æˆ‘ä»¬æƒ³ç”¨æ•°ç»„æŒ‡é’ˆçš„æ—¶å€™ï¼Œæƒ…å†µå°±æœ‰äº›å˜åŒ–äº†\n\næ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ\näºŒç»´æ•°ç»„çš„æ•°ç»„åè¡¨ç¤ºç¬¬ä¸€è¡Œçš„åœ°å€\n\n//mainå‡½æ•°ä¸­print(arr,3,5);\n\nè¿™é‡Œprinfé‡Œé¢çš„arrå°±éœ€è¦ç”¨æ•°ç»„æŒ‡é’ˆæ¥æ¥æ”¶\nè¯¥äºŒç»´æ•°ç»„æ˜¯3è¡Œ5åˆ—ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰5ä¸ªå…ƒç´ ï¼Œæ˜¯ä¸€ä¸ªint[5]çš„æ•°ç»„\nå¯¹åº”çš„æ•°ç»„æŒ‡é’ˆä¸ºint(*)[5]ç±»å‹\nvoid print(int(*p)[5], int r, int c)\n\nè¿™é‡Œçš„pæŒ‡é’ˆæŒ‡å‘çš„æ˜¯äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œçš„åœ°å€\n\n*pï¼šå¯¹pç›´æ¥è§£å¼•ç”¨\nç›¸å½“äºæ‹¿é“äº†ç¬¬ä¸€è¡Œå…ƒç´ çš„åœ°å€ï¼ˆæŠŠç¬¬ä¸€è¡Œçœ‹ä½œæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„åœ°å€ï¼‰\nç›¸å½“äºæ˜¯äºŒç»´æ•°ç»„ç¬¬ä¸€è¡Œé¦–å…ƒç´ çš„åœ°å€\n\n\n\nå¯¹(p+i)è§£å¼•ç”¨ï¼Œå°±èƒ½æ‹¿åˆ°ç¬¬iè¡Œç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€\n*(p+i)+jç¬¬iè¡Œç¬¬jä¸ªå…ƒç´ çš„åœ°å€\n*(*(p+i)+j)ç¬¬iè¡Œç¬¬jä¸ªå…ƒç´ \n\n\nè¿™ä¸€éƒ¨åˆ†å’Œä¸Šç¯‡åšå®¢æŒ‡é’ˆæ•°ç»„çš„å†…å®¹ç›¸ä¼¼\n\næœ€ç»ˆçš„å‡½æ•°å®ç°å¦‚ä¸‹\nvoid print(int(*p)[5], int r, int c)&#123;\tint i = 0;\tfor (i = 0; i &lt; r; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; c; j++)\t\t&#123;\t\t\tprintf(&quot;%d &quot;, *(*(p + i) + j));\t\t\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;&#125;int main()&#123;\tint arr[3][5] = &#123; &#123;1,2,3,4,5&#125;,&#123;2,3,4,5,6&#125;,&#123;3,4,5,6,7&#125; &#125;;\tprint(arr,3,5);\treturn 0;&#125;\n\n\n3.3 å…³äºäºŒç»´æ•°ç»„ä¼ å‚void fun2(int **p)&#123;Â  Â  return;&#125;void test03()&#123;Â  Â  int a[4]=&#123;1,2,3,4&#125;;Â  Â  int b[3][4]=&#123;&#123;1,2,3,4&#125;,&#123;5,6,7,8&#125;,&#123;9,10,11,12&#125;&#125;;Â  Â  int *q[3]=&#123;b[0],b[1],b[2]&#125;;Â  Â  //fun2(a);Â  Â  //fun2(&amp;a);Â  Â  //fun2(b);Â  Â  fun2(q);&#125;\nåœ¨2022çš„æš‘å‡ä½œä¸šday02ä¸­æœ‰è¿™ä¹ˆä¸€é“é¢˜ç›®ï¼Œé—®çš„æ˜¯ä¸Šé¢4ç§è°ƒç”¨æ–¹å¼è°ä½åˆæ³•ã€‚ç»è¿‡æµ‹è¯•ï¼Œåªæœ‰æœ€åä¸€ä¸ªæ˜¯ä¸æŠ¥é”™çš„ã€‚\nè¿™é‡Œæ¶‰åŠåˆ°äº†ä¸€ä¸ªæˆ‘ä¹‹å‰ä»æ¥æ²¡æ³¨æ„è¿‡çš„ç‚¹ï¼šäºŒç»´æ•°ç»„ä¸èƒ½ç›´æ¥ç”¨äºŒçº§æŒ‡é’ˆæ¥å—ã€‚åœ¨ä¸Šé¢çš„2.2ä¸­å…¶å®æœ‰æåˆ°ï¼ŒäºŒç»´æ•°ç»„çš„æ¥å—éœ€è¦ç”¨å¯¹åº”çš„æ•°ç»„æŒ‡é’ˆæ¥æ¥å—ã€‚æ¯”å¦‚ int b[3][4]å¯¹åº”çš„æ•°ç»„æŒ‡é’ˆå°±æ˜¯int (*p)[4]ç±»å‹çš„ã€‚ä¸èƒ½ç›´æ¥ç®€å•ç²—æš´åœ°ç”¨äºŒçº§æŒ‡é’ˆint**æ¥æ¥æ”¶äºŒç»´æ•°ç»„\nvoid fun3(int (*p)[4])&#123;Â  Â  return;&#125;int main()&#123;\tint b[3][4]=&#123;&#123;1,2,3,4&#125;,&#123;5,6,7,8&#125;,&#123;9,10,11,12&#125;&#125;;\tfunc3(b);//è¿™æ ·æ‰æ˜¯æ­£ç¡®çš„&#125;\n\n4ç»ƒä¹ ï¼šåˆ¤æ–­è¿™ä¸€ç«™æœ€é‡è¦çš„å°±æ˜¯åŒºåˆ«æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ\n4.1 int arr[5]int arr[5];\n\narræ˜¯ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæœ‰5ä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯intç±»å‹çš„\n4.2 int*parr[10]int*parr1[10];\n\nparr1æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ‰10ä¸ªint*ç±»å‹çš„å…ƒç´ \næ‰€ä»¥parr1æ˜¯æŒ‡é’ˆæ•°ç»„\n\n4.3 int (*parr2)[10]int(*parr2)[10];\n\nparr2å’Œ*ç»“åˆï¼Œè¡¨ç¤ºparr2æ˜¯ä¸€ä¸ªæŒ‡é’ˆ\nå»æ‰parr2å³ä¸ºå®ƒçš„å˜é‡ç±»å‹int(*)[10]\næ‰€ä»¥parr2æ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆ\n\n4.4 int(*parr3[10])[5]int(*parr3[10])[5];\n\n[]çš„ä¼˜å…ˆçº§é«˜äº*\nparr3å…ˆå’Œ[]ç»“åˆï¼Œè¯´æ˜parr3æ˜¯ä¸€ä¸ªæ•°ç»„\nè¯¥æ•°ç»„æœ‰10ä¸ªå…ƒç´ ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œç±»å‹æ˜¯int(*)[5]\nè¯¥æ•°ç»„æŒ‡é’ˆæŒ‡å‘çš„æ•°ç»„æœ‰5ä¸ªintç±»å‹çš„å…ƒç´ \n\nç»“è¯­ç¬¬ä¸‰ç«™æ•°ç»„æŒ‡é’ˆåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nä¸‹ä¸€ç«™ğŸšŒæ˜¯ï¼šæ•°ç»„ä¼ å‚å’ŒæŒ‡é’ˆä¼ å‚\næ•¬è¯·æœŸå¾…å“¦~\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå†èµ°å§ğŸ˜˜\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬äºŒç«™ï¼ŒæŒ‡é’ˆæ•°ç»„","url":"/posts/2460304186/","content":"[TOC]\nå˜Ÿå˜Ÿå˜ŸğŸšŒï¼ŒæŒ‡é’ˆè¿›é˜¶çš„ç¬¬äºŒç«™æŒ‡é’ˆæ•°ç»„åˆ°äº†ï¼\nä¸Šè½¦ä¸Šè½¦ï¼\n\nå›é¡¾ä¸€ä¸‹ç¬¬ä¸€ç«™ğŸšçš„å†…å®¹ï¼šå­—ç¬¦æŒ‡é’ˆ\n\n\næŒ‡é’ˆæ•°ç»„æ•°ç»„æ˜¯ä¸€ç§ç±»å‹çš„æ•°çš„é›†åˆ\n\næ•´å‹æ•°ç»„çš„å…ƒç´ éƒ½æ˜¯intç±»å‹\næŒ‡é’ˆæ•°ç»„çš„å…ƒç´ éƒ½æ˜¯æŒ‡é’ˆå˜é‡\n\nint* arr1[10];//æ•´å‹æŒ‡é’ˆçš„æ•°ç»„char*arr2[10];//ä¸€çº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„char** arr3[5];//äºŒçº§å­—ç¬¦æŒ‡é’ˆçš„æ•°ç»„\n\nå‚è€ƒè¿™ä¸€ä»½ç¤ºæ„å›¾\n\nç¤ºä¾‹1:å®šä¹‰å¤šä¸ªå­—ç¬¦æŒ‡é’ˆåœ¨ä¸Šä¸€ç«™çš„å­—ç¬¦æŒ‡é’ˆé‡Œé¢ï¼Œæåˆ°äº†å¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆæ¥åˆ›å»ºä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²\nåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤šä¸ªæŒ‡é’ˆæ”¾åœ¨ä¸€å—ï¼Œå‡‘æˆæŒ‡é’ˆæ•°ç»„ï¼Œä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæŒ‡å‘å¸¸é‡å­—ç¬¦ä¸²çš„æŒ‡é’ˆ\n\nint main()&#123;\tchar* arr[] = &#123; &quot;abcdef&quot;, &quot;qwer&quot;, &quot;zhangsan&quot; &#125;;\tint i = 0;\tint sz = sizeof(arr) / sizeof(arr[0]);\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tprintf(&quot;%s\\n&quot;, arr[i]);\t&#125;\treturn 0;&#125;\n\nç¤ºä¾‹2:å­˜æ”¾æ•°ç»„åçš„æ•°ç»„åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šæ•°ç»„åä»£è¡¨æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\nå¯ä»¥è¯´ï¼Œæ•°ç»„åæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆ\næ—¢ç„¶æ˜¯æŒ‡é’ˆï¼Œå°±èƒ½æ”¾è¿›æŒ‡é’ˆæ•°ç»„é‡Œé¢\nint main()&#123;\tint arr1[] = &#123; 1,2,3,4,5 &#125;;\tint arr2[] = &#123; 2,3,4,5,6 &#125;;\tint arr3[] = &#123; 3,4,5,6,7 &#125;;\tint* arr[] = &#123;arr1, arr2, arr3&#125;;\t//arræ˜¯æŒ‡é’ˆæ•°ç»„\tint i = 0;\tfor (i = 0; i &lt; 3; i++)\t&#123;\t\tint j = 0;\t\tfor (j = 0; j &lt; 5; j++)\t\t&#123;\t\t\tprintf(&quot;%d &quot;, arr[i][j]);//*(*(arr+i)+j)\t\t&#125;\t\tprintf(&quot;\\n&quot;);\t&#125;\treturn 0;&#125;\n\nè¿™ä¸²ä»£ç ä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£çš„æ˜¯arr[i][j]å’Œ*(*(arr+i)+j)ä¹‹é—´çš„å…³ç³»\n\nä»¥ä¸‹å†…å®¹ï¼Œæˆ‘çš„ç†è§£å¯èƒ½æœ‰åå·®ã€‚è‹¥æœ‰é”™è¯¯ï¼Œè¿˜è¯·å¤§ä½¬ä»¬æ— æƒ…æŒ‡æ­£ï¼\n\n\narr[i][j]å’Œ*(*(arr+i)+j)\nå®ƒä»¬éƒ½æ˜¯è®¿é—®æ•°ç»„çš„å½¢å¼ï¼Œç”¨åˆ°äº†ä¸åŒçš„æ“ä½œç¬¦\nä½†è¡¨è¾¾çš„å«ä¹‰ç›¸åŒï¼šä¸‹æ ‡ä¸ºiã€jçš„å…ƒç´ \n\nåœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„å­˜å‚¨æ˜¯è¿ç»­çš„\nåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è¡Œçš„æ•°æ®æ˜¯è¿ç»­å­˜æ”¾åœ¨æ•°ç»„é‡Œé¢çš„\nint arr4[2][2]=&#123;&#123;1,2&#125;,&#123;3,4&#125;&#125;;\n\n\næ—¢ç„¶æ˜¯è¿ç»­çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æŒ‡é’ˆ++çš„å½¢å¼æ¥è®¿é—®äºŒç»´æ•°ç»„é‡Œé¢çš„æ‰€æœ‰å…ƒç´ \n\n\n*(arr+i)æŒ‡å‘ç¬¬iè¡Œå…ƒç´ \n*(arr+i)+jæŒ‡å‘ç¬¬iè¡Œä¸‹æ ‡ä¸ºjçš„å…ƒç´ çš„åœ°å€\n*(*(arr+i)+j)å†æ¬¡è§£å¼•ç”¨ï¼Œå¾—åˆ°jå…ƒç´ \n\n\næ•°ç»„åçš„æœ¬è´¨æ˜¯åœ°å€ï¼Œæ˜¯è¯¥æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œï¼Œæ•°ç»„åarrå°±æ˜¯ç¬¬ä¸€è¡Œçš„åœ°å€\næˆ‘ä»¬å¯ä»¥æŠŠäºŒç»´æ•°ç»„çš„æ¯ä¸€è¡Œç†è§£ä¸ºç‹¬ç«‹çš„ä¸€ä¸ªä¸€ç»´æ•°ç»„\nè¿™æ—¶å€™ï¼ŒäºŒç»´æ•°ç»„çš„å½¢å¼å’Œä¸Šè¿°ä»£ç ä¸­int* arr[]æ•°ç»„çš„å½¢å¼å°±ç›¸åŒäº†\nint arr1[] = &#123; 1,2,3,4,5 &#125;;int arr2[] = &#123; 2,3,4,5,6 &#125;;int arr3[] = &#123; 3,4,5,6,7 &#125;;//arr1 arr2 arr3æ˜¯äºŒç»´æ•°ç»„é‡Œé¢çš„æ¯ä¸€è¡Œint* arr[] = &#123;arr1, arr2, arr3&#125;;//arrç­‰ä»·äºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œä½†æœ‰ä¸åŒ\n\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äºŒç»´æ•°ç»„è®¿é—®çš„å½¢å¼æ¥è®¿é—®int* arr[]æ•°ç»„\n\nint* arr[]å’ŒäºŒç»´æ•°ç»„çš„ä¸åŒint*arræ•°ç»„é‡Œçš„å…ƒç´ arr1ï¼Œarr2ï¼Œarr3çš„åœ°å€æ˜¯è¿ç»­å­˜æ”¾çš„\n\nè¿™é‡Œè®¾è®¡åˆ°ä¸€ä¸ªæ–°æ¦‚å¿µï¼šæ•°ç»„æŒ‡é’ˆ\nå°†åœ¨ä¸‹ä¸€ç«™ğŸšŒè®²è§£ï¼\n\n\nä½†æ˜¯å®ƒä»¬å¯¹åº”çš„å„è‡ªçš„æ•°ç»„å†…æ•°æ®å¹¶ä¸è¿ç»­\nå¦‚ï¼šarr1å’Œarr2è¿™ä¸¤ä¸ªæ•°ç»„å„è‡ªå…ƒç´ çš„åœ°å€å¹¶ä¸è¿ç»­\n\n\nç¤ºä¾‹3ï¼šå­˜æ”¾äºŒçº§æŒ‡é’ˆçš„æ•°ç»„æ—¢ç„¶ä¸€çº§æŒ‡é’ˆå¯ä»¥æ”¾è¿›æ•°ç»„é‡Œï¼ŒäºŒçº§æŒ‡é’ˆä¹Ÿæ˜¯æŒ‡é’ˆï¼ŒåŒæ ·ä¹Ÿèƒ½å¡è¿›æ•°ç»„é‡Œ\nä¸‹é¢è¿™ä¸²ä»£ç é‡Œé¢çš„arr2å°±æ˜¯ä¸€ä¸ªå­˜æ”¾äºŒçº§æŒ‡é’ˆçš„æ•°ç»„\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint* p = &amp;a;\tint** pp = &amp;p;\tint** arr2[4] = &#123;pp&#125;;\treturn 0;&#125;\n\n\nç»“è¯­ğŸšç¬¬äºŒç«™çš„è·¯ç¨‹åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼\næ•¬è¯·æœŸå¾…ä¸‹ä¸€ç«™çš„æ•°ç»„æŒ‡é’ˆèˆªç¨‹å§ï¼\n\nå¦‚æœä½ å¯¹åšå®¢å†…å®¹æœ‰ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬å››ç«™ï¼Œæ•°ç»„/æŒ‡é’ˆçš„ä¼ å‚é—®é¢˜","url":"/posts/3023563339/","content":"[TOC]\næœ‹å‹ä»¬ï¼Œåˆ°ç«™å•¦ï¼\næŒ‡é’ˆè¿›é˜¶ç¬¬å››ç«™ğŸšï¼Œä¼ å‚é—®é¢˜\n\n0.å¼•ä¾‹è‡ªå®šä¹‰å‡½æ•°é‡Œå½¢å‚çš„ç±»å‹ï¼Œè¦å’Œå‡½æ•°è°ƒç”¨ä¸­ä¼ è¿‡å»çš„å®å‚ç±»å‹ç›¸å¯¹åº”\n\nåœ¨åˆé˜¶Cè¯­è¨€çš„å­¦ä¹ é‡Œé¢ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä¼ å‚åˆ†ä¸ºä¼ å€å’Œä¼ å€¼ä¸¤ç§ç±»å‹\nä¸€èµ·æ¥å¤ä¹ ä¸€ä¸‹å§ğŸ‘‰ã€é“¾æ¥ã€‘\n\ntestå‡½æ•°é‡Œçš„æ˜¯intç±»å‹ï¼Œæˆ‘ä»¬ä¼ è¿‡å»çš„å‚æ•°aä¹Ÿæ˜¯intç±»å‹\nvoid test(int n)&#123;&#125;int main()&#123;    int a=1    test(a);    return 0;&#125;\n\n\n\nå¥½äº†ï¼Œç°åœ¨ä½ å·²ç»çŸ¥é“äº†å‡½æ•°ä¼ å‚çš„åŸºæœ¬æ¦‚å¿µäº†ğŸ˜\né‚£ä¹ˆå°±æ¥åˆ†æä¸€ä¸‹æ•°ç»„ä¼ å‚ã€æŒ‡é’ˆä¼ å‚çš„ä»£ç å§ï¼\n1.ä¸€ç»´æ•°ç»„ä¼ å‚çœ‹çœ‹ä»¥ä¸‹å‡½æ•°çš„ä»£ç ç¤ºä¾‹\nä½ è§‰å¾—è°æ˜¯æ­£ç¡®çš„ï¼Œè°æ˜¯é”™è¯¯çš„å‘¢ï¼Ÿ\ninclude &lt;stdio.h&gt;void test(int arr[])&#123;&#125;void test(int arr[10])&#123;&#125;void test(int *arr)&#123;&#125;void test2(int *arr[20])&#123;&#125;void test2(int **arr)&#123;&#125;int main()&#123;\tint arr[10] = &#123;0&#125;;\tint *arr2[20] = &#123;0&#125;;\ttest(arr);\ttest2(arr2);    return 0;&#125;\n\n\nNO.1 å½¢å‚ä½¿ç”¨æ•°ç»„çš„å½¢å¼æ¥æ¥æ”¶ï¼Œæ­£ç¡®\n\nNO.2 åŒæ ·æ˜¯æ•°ç»„çš„å½¢å¼ï¼Œæ­£ç¡®\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ•°ç»„ä¼ å‚å¹¶ä¸ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ•°ç»„\næ‰€ä»¥å‡½æ•°[ ]é‡Œçš„æ•°å­—æ˜¯å¤šå°‘å¹¶ä¸å½±å“\n\nNO.3 æ•°ç»„åæ˜¯é¦–å…ƒç´ çš„åœ°å€ï¼Œç”¨æŒ‡é’ˆæ¥æ”¶ï¼Œæ­£ç¡®\n\nNO.4 arr2æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œ(int *arr[20])å’ŒåŸæ•°ç»„å¯¹åº”ï¼Œæ­£ç¡®\n\nNO.5 æ•°ç»„åæ˜¯é¦–å…ƒç´ åœ°å€ï¼Œarr2çš„é¦–å…ƒç´ æ˜¯ä¸€ä¸ªint*ç±»å‹\nå¯ä»¥ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶ï¼Œæ­£ç¡®ï¼\n\n\n\n2.äºŒç»´æ•°ç»„ä¼ å‚äº†è§£å®Œä¸€ç»´æ•°ç»„äº†ï¼Œé‚£å°±æ¥çœ‹çœ‹äºŒç»´æ•°ç»„\nä»¥ä¸‹çš„å‡½æ•°ä¼ å‚ï¼Œå“ªäº›æ˜¯å¯¹çš„ï¼Œå“ªäº›æ˜¯é”™çš„å‘¢ï¼Ÿ\nvoid test(int arr[3][5])//ä¸€ä¸€å¯¹åº”ï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int arr[][])//çœç•¥åˆ—ï¼Œé”™è¯¯ï¼&#123;&#125;void test(int arr[][5])//å¯ä»¥çœç•¥è¡Œï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int *arr)//äºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ&#123;&#125;//ç¬¬ä¸€è¡Œæ˜¯int(*)[5]ç±»å‹ï¼Œé”™è¯¯ï¼void test(int* arr[5])//æŒ‡é’ˆæ•°ç»„ï¼Œé”™è¯¯ï¼&#123;&#125;void test(int (*arr)[5])//æ•°ç»„æŒ‡é’ˆï¼Œæ­£ç¡®ï¼&#123;&#125;void test(int **arr)//arrä¸æ˜¯ä¸€çº§æŒ‡é’ˆçš„åœ°å€ï¼Œé”™è¯¯ï¼&#123;&#125;int main()&#123;\tint arr[3][5] = &#123;0&#125;;    test(arr);    return 0;&#125;\n\næ ¹æ®äºŒç»´æ•°ç»„ä¼ å‚çš„ä»£ç ï¼Œå¤ä¹ ä»¥ä¸‹çŸ¥è¯†ç‚¹\n\näºŒç»´æ•°ç»„çš„é¦–å…ƒç´ æ˜¯ç¬¬ä¸€è¡Œ\näºŒç»´æ•°ç»„åœ¨å®šä¹‰çš„æ—¶å€™å¯ä»¥çœç•¥è¡Œï¼Œä¸èƒ½çœç•¥åˆ—\n\nç¬¬ä¸€è¡Œçš„ç±»å‹æ˜¯int[5]ï¼Œåº”è¯¥æ”¾è¿›æ•°ç»„æŒ‡é’ˆé‡Œï¼\n\n3.ä¸€çº§æŒ‡é’ˆä¼ å‚#include &lt;stdio.h&gt;void print(int *p, int sz)//ç”¨int*æ¥æ¥å—&#123; int i = 0; for(i=0; i&lt;sz; i++) &#123; printf(&quot;%d\\n&quot;, *(p+i)); &#125;&#125;int main()&#123; int arr[10] = &#123;1,2,3,4,5,6,7,8,9&#125;; int *p = arr; int sz = sizeof(arr)/sizeof(arr[0]);  print(p, sz);//ä¸€çº§æŒ‡é’ˆpï¼Œä¼ ç»™å‡½æ•° return 0;&#125;\n\n4.äºŒçº§æŒ‡é’ˆä¼ å‚\nä»€ä¹ˆæ˜¯äºŒçº§æŒ‡é’ˆï¼ŸğŸ‘‰ç‚¹æˆ‘\n\nä»¥ä¸‹æ˜¯äºŒçº§æŒ‡é’ˆä¼ å‚çš„åŸºæœ¬å½¢å¼\nppæ˜¯int**ç±»å‹ï¼Œè€Œ&amp;pæ˜¯æŒ‡é’ˆå˜é‡çš„åœ°å€ï¼Œè¦ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶\n#include &lt;stdio.h&gt;void test(int** ptr)&#123; \tprintf(&quot;num = %d\\n&quot;, **ptr); &#125;int main()&#123; \tint n = 10; \tint*p = &amp;n; \tint **pp = &amp;p;\ttest(pp);\ttest(&amp;p);\treturn 0;&#125;\n\nå†æ¥çœ‹å¦‚ä¸‹ä»£ç \n&amp;pã€ppã€arrè¿™ä¸‰ä¸ªå‚æ•°çš„ç±»å‹éƒ½æ˜¯äºŒçº§æŒ‡é’ˆ\ntestå‡½æ•°é‡Œé¢è¦ç”¨char**æ¥æ¥æ”¶\nvoid test(char** p)&#123;&#125;int main()&#123;\tchar ch = &#x27;w&#x27;;\tchar* p = &amp;ch;\tchar** pp = &amp;p;\tchar* arr[5];\ttest(&amp;p);\ttest(pp);\ttest(arr);\t\treturn 0;&#125;\n\narræ˜¯æŒ‡é’ˆæ•°ç»„çš„æ•°ç»„åï¼Œæ•°ç»„åæ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€\næ•°ç»„çš„é¦–å…ƒç´ æ˜¯char*ç±»å‹ï¼Œæ‰€ä»¥è¦ç”¨äºŒçº§æŒ‡é’ˆæ¥æ¥æ”¶\n\n5.å¦‚ä½•åˆ¤æ–­å‚æ•°ç±»å‹å¦‚æœæˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œä¸ç¼ºå®šåº”è¯¥ç”¨ä»€ä¹ˆç±»å‹æ¥æ¥æ”¶çš„æ—¶å€™\nå¯ä»¥å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼ŒVSç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œç±»å‹ä¸ä¸€è‡´â€\n\n\nç»“è¯­ä¼ å‚é—®é¢˜å¹¶ä¸ç®—éå¸¸éš¾ï¼Œä½†æˆ‘ä»¬ä»è¦ç†Ÿç»ƒæŒæ¡\nè¿™æ ·æ‰èƒ½é¿å…åœ¨å†™è‡ªå®šä¹‰å‡½æ•°çš„æ—¶å€™å‡ºç°å‚æ•°ç±»å‹ä¸åŒçš„bugï¼\n\nç«™ç¨³äº†ï¼Œé©¬ä¸Šé©¶å¾€ä¸‹ä¸€ç«™ğŸšŒï¼šå‡½æ•°æŒ‡é’ˆ\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","æ•°ç»„","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘è½¬ä¹‰å­—ç¬¦","url":"/posts/3193284021/","content":"å‰æ’æé†’ï¼Œè¿™ä¸ç®—æ˜¯è½¬ä¹‰å­—ç¬¦çš„æ•™å­¦ç®—æ˜¯ä¸ªæˆ‘ä¸ªäººå­¦ä¹ çš„è®°å½•\n\n\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n#include &lt;stdio.h&gt;int main()&#123;\tprintf(&quot;c:\\test\\32\\test.m&quot;);\treturn 0;&#125;\n\né—®ï¼šprintfä¸­çš„c:\\test\\32\\test.måŒ…å«å‡ ä¸ªå­—ç¬¦ï¼Ÿ\n\nå¤§å®¶å¯ä»¥å…ˆæ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬ç›´æ¥æ•°çš„è¯ï¼Œä¼šå¾—å‡ºè¿™é‡Œé¢åŒ…æ‹¬äº†17ä¸ªå­—ç¬¦å¦‚æœçœŸçš„æœ‰é‚£ä¹ˆç®€å•ä¹Ÿä¸éœ€è¦è¿™ç¯‡åšå®¢äº†å¯¹å§\nè¿™é‡Œå°±è¦å¼•å…¥è½¬ä¹‰å­—ç¬¦çš„æ¦‚å¿µäº†å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦æœ‰ä»¥ä¸‹å‡ ä¸ª\næ¯”è¾ƒå¸¸è§„çš„æˆ‘ä»¬å¯ä»¥çœ‹è¡¨æ ¼ä¸­çš„å®šä¹‰\néœ€è¦æ³¨æ„çš„æ˜¯â€\\?â€è¿™ä¸ªæ˜¯ç”¨äºè¿ç»­é—®å·çš„æƒ…å†µï¼Ÿï¼Ÿ+ï¼ˆæŸä¸ªç¬¦å·ï¼‰  ç§°ä¸ºä¸‰å­—æ¯è¯å¦‚ï¼šï¼Ÿï¼Ÿï¼‰ æ˜¾ç¤ºå‡ºæ¥æ˜¯ ]\\ï¼Ÿå°±è®©ï¼Ÿä¸è¢«è¯†åˆ«ä¸ºä¸‰å­—æ¯è¯ï¼Œè€Œæ˜¾ç¤ºé—®å·è¿™ä¸ªå­—ç¬¦åŒæ—¶\\\\ä¹Ÿæ˜¯è®©â€œ\\â€è¿™ä¸ªå­—ç¬¦èƒ½ä»¥æœ¬èº«å½¢å¼å‡ºç°è€Œä¸æ˜¯è¢«è¯†åˆ«æˆè½¬ä¹‰å­—ç¬¦åŒæ—¶æˆ‘ä»¬è¦çŸ¥é“çš„æ˜¯\nâ€œ\\0â€è¿™ä¸ªè½¬ä¹‰å­—ç¬¦æ˜¯å­—ç¬¦ä¸²çš„ç»“æŸï¼Œåœ¨æˆ‘ä»¬è¾“å…¥å­—ç¬¦ä¸²çš„æ—¶å€™åé¢ä¼šé»˜è®¤è·Ÿç€ä¸€ä¸ªéšè—çš„â€œ\\0â€  ï¼ˆå¦‚å›¾ï¼‰\næˆ‘ä»¬ä½¿ç”¨strlenè®¡ç®—å­—ç¬¦ä¸²abcçš„é•¿åº¦çš„æ—¶å€™éœ€è¦åœ¨åé¢-1åŒæ—¶â€œ\\0â€ä¹Ÿä¼šæœ‰è‡ªå·±å¯¹åº”çš„ä¸‹æ ‡3\n\n\nè¯´å›æˆ‘ä»¬çš„c:\\test\\32\\test.mé€šè¿‡æŸ¥è¡¨ï¼Œæˆ‘ä»¬èƒ½è½»æ˜“åœ°å‘ç°è¿™é‡Œé¢å‡ºç°äº†ä¸¤ä¸ª\\tè½¬ä¹‰å­—ç¬¦æ¯ä¸ªè½¬ä¹‰å­—ç¬¦åœ¨æ•°å­—ç¬¦é•¿åº¦çš„æ—¶å€™æ˜¯è®°ä½œä¸€ä¸ªçš„é™¤äº†è¿™ä¸¤ä¸ª\\t,è¿™é‡Œè¿˜è—æœ‰å¦å¤–ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦\\32\\32è¿™ä¸ªè½¬ä¹‰å­—ç¬¦æ­£æ˜¯å›¾è¡¨ä¸­çš„\\dddæ ¼å¼çš„è½¬ä¹‰å­—ç¬¦ä»£è¡¨32æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶æ•°å­—\nè€Œ\\32åœ¨æ­£å¸¸ä»£ç ä¸­ æ˜¯æŒ‡\n32ä½œä¸ºå…«è¿›åˆ¶æ•°å­—å¯¹åº”çš„åè¿›åˆ¶æ•°å­—ï¼Œåœ¨ASCIIè¡¨ä¸Šå¯¹åº”çš„å­—ç¬¦ã€‚å¦‚ï¼šå…«è¿›åˆ¶32æ˜¯åè¿›åˆ¶çš„26ï¼›é‚£ä¹ˆ\\32å°±ä»£è¡¨åè¿›åˆ¶æ•°26åœ¨ASCIIç è¡¨ä¸Šå¯¹åº”çš„ç¬¦å·ï¼ŒæŸ¥è¡¨å¯çŸ¥26æ˜¯æ›¿ä»£ç¬¦å·\n\n\nå½“ç„¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬çš„\\32åªæ˜¯ä¸€ä¸ªæˆ‘ä»¬æƒ³è¦æ‰“å°å‡ºæ¥çš„å­—ç¬¦ï¼Œå¹¶æ²¡æœ‰å®é™…ä½œç”¨\næ‰€ä»¥ç­”æ¡ˆå°±å¾ˆæ˜æœ—äº†ã€‚\nint main()&#123;\tprintf(&quot;c:\\test\\32\\test.m&quot;);\treturn 0;&#125;\nåœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œ(â€œc:\\test\\32\\test.mâ€œ)ä¸€å…±åŒ…å«çš„å­—ç¬¦æ•°é‡æ˜¯13\n\næœ¬ç¯‡ä¸èµ°å¿ƒåšå®¢åˆ°è¿™é‡Œä¹Ÿç»“æŸäº†\n\nä»‹ç»äº†éƒ¨åˆ†è½¬ä¹‰å­—ç¬¦çš„ä½œç”¨\næ˜ç¡®åœ¨è®¡ç®—å­—ç¬¦æ•°é‡çš„æ—¶å€™è½¬ä¹‰å­—ç¬¦åº”è§†ä¸ºåŒä¸€ä¸ªå­—ç¬¦è®¡æ•°\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åè¿˜æ˜¯æ±‚dalaoæ— æƒ…æŒ‡æ­£å•Šï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç¬¬äº”ç«™ï¼Œå‡½æ•°æŒ‡é’ˆ","url":"/posts/2864366636/","content":"[TOC]\n\næŒ‡é’ˆè¿›é˜¶ç¬¬äº”ç«™ğŸšï¼šå‡½æ•°æŒ‡é’ˆ\nç‚¹è¿›æˆ‘çš„ä¸»é¡µï¼Œå¯ä»¥å›é¡¾å‰å››ç«™çš„å†…å®¹å“¦~\n\n1å‡½æ•°æŒ‡é’ˆå‡½æ•°ä¹Ÿæœ‰è‡ªå·±çš„åœ°å€ï¼Œå‡½æ•°å&#x2F;&amp;å‡½æ•°å å°±æ˜¯å‡½æ•°çš„åœ°å€\n \n1.1åŸºæœ¬å½¢å¼åœ¨æ•°ç»„æŒ‡é’ˆçš„å­¦ä¹ ä¸­æˆ‘ä»¬äº†è§£åˆ°\nint arr[5];int (*pa)[5] = &amp;arr;//paæ˜¯æ•°ç»„æŒ‡é’ˆ\n\n\næŒ‡é’ˆå˜é‡paçš„ç±»å‹æ˜¯int(*)[5]\n\né‚£ä¹ˆå‡½æ•°æŒ‡é’ˆçš„å½¢å¼æ˜¯æ€æ ·çš„å‘¢ï¼Ÿ\nvoid test(char* str)&#123;&#125;int main()&#123;\tvoid (*pt)(char*) = test;    //ptæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\treturn 0;&#125;\n\n\nptçš„ç±»å‹æ˜¯void (*)(char*)\n\nä¸‹é¢å“ªä¸ªä»£ç æœ‰èƒ½åŠ›å­˜æ”¾å‡½æ•°çš„åœ°å€å‘¢ï¼Ÿ\nvoid (*pfun1)();void *pfun2();\n\nç­”ï¼špfun1å¯ä»¥å­˜æ”¾\n\n\npfun1å…ˆå’Œ*ç»“åˆï¼Œè¯´æ˜pfun1æ˜¯æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŒ‡å‘çš„å‡½æ•°æ—  å‚æ•°ï¼Œè¿”å›å€¼ç±»å‹ä¸ºvoid\n\npfun2å…ˆå’Œ()ç»“åˆï¼Œåˆ¤æ–­ä¸ºä¸€ä¸ªè¿”å›å€¼ä¸ºint*ç±»å‹çš„å‡½æ•°\n\n\n\né‚£ä¹ˆï¼Œå¦‚ä½•ä¹¦å†™ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå‘¢ï¼Ÿ\nint Add(int x, int y)&#123;\treturn x + y;&#125;\n\nä»¥Addå‡½æ•°ä¸ºä¾‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªintç±»å‹çš„å½¢å‚ï¼Œè¿”å›ç±»å‹æ˜¯int\næ‰€å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆå°±æ˜¯int(*)(int,int)ç±»å‹\nint (*pf)(int, int) = Add;\n\nä¾æ®ä»¥ä¸‹å‡ æ­¥å°±èƒ½æ­£ç¡®å†™å‡ºå‡½æ•°æŒ‡é’ˆ\n\nç¡®å®šå‡½æ•°çš„è¿”å›ç±»å‹\n\nç¡®å®šå‡½æ•°çš„å‚æ•°ç±»å‹å’Œä¸ªæ•°\n\næŠŠå‡½æ•°å‚æ•°ç±»å‹é‡Œçš„å˜é‡åå»æ‰ï¼Œæ”¾å…¥æ‹¬å·é‡Œ\n(int x,int y)å»æ‰xã€yï¼Œå³(int,int)\n\nåœ¨å‰é¢åŠ ä¸Šå‡½æ•°çš„è¿”å›ç±»å‹\n\næœ€ååŠ ä¸Š(*)ï¼Œä»¥åŠå‡½æ•°æŒ‡é’ˆå˜é‡å\n\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ(*pf)çš„æ‹¬å·ä¸èƒ½çœç•¥ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nå»æ‰æ‹¬å·ä¹‹åå°±ç›¸å½“äºå‡½æ•°å£°æ˜ï¼Œæ— æ³•èµ‹å€¼\n\n\n1.2ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆå\nå°±å¯ä»¥é€šè¿‡æŒ‡é’ˆæ¥è®¿é—®åŸå‡½æ•°\nè¿™æ—¶å€™(*pf)å…¶å®å°±ç›¸å½“äºmy_test\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨ä¸Šé¢æåˆ°è¿‡çš„Addå‡½æ•°\nint Add(int x, int y)&#123;\treturn x + y;&#125;int main()&#123;\tint (* pf)(int, int) = Add;\tint sum = (*pf)(2,3);\tint sum1 = pf(2, 3);\tint sum2 = Add(2, 3);\tprintf(&quot;%d\\n&quot;, sum);\tprintf(&quot;%d\\n&quot;, sum1);\tprintf(&quot;%d\\n&quot;, sum2);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œsumå’Œsum1ä¸¤ç§å½¢å¼éƒ½æ­£ç¡®è°ƒç”¨äº†è¯¥å‡½æ•°\n\nå› ä¸ºæˆ‘ä»¬å·²ç»æŠŠAddçš„åœ°å€è½¬ç»™äº†pfæŒ‡é’ˆï¼Œå‡½æ•°åAddå’ŒæŒ‡é’ˆpfå®é™…ä¸Šæ˜¯ç­‰ä»·çš„\næ‰€ä»¥åœ¨ä½¿ç”¨å‡½æ•°æŒ‡é’ˆçš„æ—¶å€™ï¼Œå¯ä»¥ä¸å¸¦*ä½¿ç”¨ã€‚ä½†æ˜¯å¸¦*çš„æ—¶å€™ä¸€å®šè¦åŠ æ‹¬å·ï¼\n1.3ä¸¤ä¸ªå¥‡è‘©çš„ä»£ç å¥‡è‘©ä»£ç 1(*(void (*)())0)();\n\n\nè¿™é‡Œçš„0ä»…ä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™å¹¶ä¸èƒ½è®¿é—®0çš„åœ°å€\n\nçœ‹åˆ°è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æ‡µï¼Ÿ\nåˆ«æ€¥ï¼Œè®©æˆ‘ä»¬æ¥æ…¢æ…¢åˆ†æä¸€æ³¢ï¼\n\nå¥‡è‘©ä»£ç 2void (*signal(int , void(*)(int)))(int);\n\n\nè¯´äººè¯å°±æ˜¯ï¼Œsignalå‡½æ•°å†…ä¼ å…¥äº†ä¸€ä¸ªvoid(*)(int)çš„å‡½æ•°æŒ‡é’ˆï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªvoid(*)(int)çš„å‡½æ•°æŒ‡é’ˆï¼\nvoid fun(int num)&#123;\tprintf(&quot;fun--&gt;%d\\n&quot;, num);&#125;void ( *signal( int, void(*)(int) ) )(int);int main()&#123;\tvoid(*pf)(int);//å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\tpf = signal(100, fun);    //ä¸ºsignalå‡½æ•°ä¼ å‚ï¼Œå¹¶ç”¨pfæŒ‡é’ˆæ¥æ”¶\treturn 0;&#125;\n\nâ€œè¿™ä¸ªä»£ç 2æ˜¯çœŸçš„å¥‡è‘©ï¼Œå°±æ²¡æœ‰ä»€ä¹ˆåŠæ³•æŠŠä»–å˜æˆäººè¯å—ï¼Ÿ(ç®€åŒ–ä¸€ä¸‹)â€\nå½“ç„¶æœ‰ï¼é‚£å°±æ˜¯ç”¨typedefå‡½æ•°æ¥ç»™void(*)(int)æŒ‡é’ˆèµ·ä¸€ä¸ªæ–°åå­—ï¼\ntypedef void(*pf_t)(int);//æŠŠvoid(*)(int)å‘½åä¸ºpf_t\n\nvoid(*p)(int);//pæ˜¯å‡½æ•°æŒ‡é’ˆå˜é‡çš„åå­—typedef void(*pf_t)(int);//pf_tæ˜¯ä¸€ä¸ªæ–°çš„ç±»å‹å\n\nè¿™æ ·æˆ‘ä»¬çš„ä»£ç å°±èƒ½å¾—åˆ°ç®€åŒ–\nvoid ( *signal( int, void(*)(int) ) )(int);//æºä»£ç //ç®€åŒ–åpf_t siganal(int,pf_t);\n\nè¿™æ ·æ˜¯ä¸æ˜¯å°±æ›´å®¹æ˜“åˆ†è¾¨äº†ï¼Ÿ\n\n2å‡½æ•°æŒ‡é’ˆæ•°ç»„2.1åŸºæœ¬å½¢å¼æ—¢ç„¶å‡½æ•°æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨æŒ‡é’ˆæ•°ç»„æ¥å­˜æ”¾å®ƒ\n\nå‰æï¼šè¿™äº›å‡½æ•°çš„å‚æ•°ç±»å‹ã€è¿”å›ç±»å‹ä¸€è‡´\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;//å‡½æ•°æŒ‡é’ˆæ•°ç»„int (*pfArr[4])(int, int) = &#123;Add, Sub, Mul, Div&#125;;\n\nç›¸æ¯”äºåˆ†å¼€å†™å¤šæ¬¡å‡½æ•°è°ƒç”¨\n//å¤šæ¬¡å‡½æ•°è°ƒç”¨int (*pf1)(int,int) = Add;int (*pf2)(int, int) = Sub;int (*pf3)(int, int) = Mul;int (*pf4)(int, int) = Div;\n\nå‡½æ•°æŒ‡é’ˆæ•°ç»„å¯ä»¥è®©æˆ‘ä»¬ä»¥ä½¿ç”¨æ•°ç»„çš„å½¢å¼æ¥è®¿é—®æ¯ä¸ªå‡½æ•°\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;int main()&#123;\tint (*pfArr[4])(int, int) = &#123;Add, Sub, Mul, Div&#125;;//å‡½æ•°æŒ‡é’ˆæ•°ç»„\tint i = 0;\tfor (i = 0; i &lt; 4; i++)\t&#123;\t\t//int ret = (*pfArr[i])(8, 4);\t\tint ret = pfArr[i](8, 4);\t\tprintf(&quot;%d\\n&quot;, ret);\t&#125;\treturn 0;&#125;\n\nè¿™æ ·ä¹Ÿç®€åŒ–äº†æˆ‘ä»¬çš„ä»£ç \n2.2è®¡ç®—å™¨å®ç°2.2.1switchè¯­å¥\nç›®çš„ï¼šå®ç°ä¸€ä¸ªè®¡ç®—å™¨\nèœå•ï¼šç”¨æ•°å­—æ¥é€‰æ‹©è¿ç®—ç±»å‹\næ–¹æ³•ï¼šä»¥switch&#x2F;caseè¯­å¥æ¥å®ç°å‡½æ•°è°ƒç”¨\nç»“æŸï¼šç”¨do&#x2F;whileå®ç°å¤šç»„è¾“å…¥ï¼Œä»¥åŠç»“æŸç¨‹åº\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int Sub(int x, int y)&#123;\treturn x - y;&#125;int Mul(int x, int y)&#123;\treturn x * y;&#125;int Div(int x, int y)&#123;\treturn x / y;&#125;void menu()&#123;\tprintf(&quot;**********************************\\n&quot;);\tprintf(&quot;*****  1. add     2. sub     *****\\n&quot;);\tprintf(&quot;*****  3. mul     4. div     *****\\n&quot;);\tprintf(&quot;*****  0. exit               *****\\n&quot;);\tprintf(&quot;**********************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Add(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 2:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Sub(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 3:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Mul(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 4:\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = Div(x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\nè¿™ç§æ–¹å¼éœ€è¦å†™éå¸¸å¤šçš„é‡å¤ä»£ç ï¼Œè€Œä¸”ä»£ç é•¿åº¦å¾ˆé•¿ğŸ˜µ\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡½æ•°æŒ‡é’ˆå¯¹å®ƒè¿›è¡Œä¼˜åŒ–\n\n2.2.2å‡½æ•°æŒ‡é’ˆå½¢å¼int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tint (*pfArr[5])(int, int) = &#123;0, Add, Sub, Mul, Div&#125;;    //pfArræ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ï¼Œä¹Ÿå«è½¬ç§»è¡¨\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tif (input == 0)\t\t&#123;\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\t&#125;\t\telse if (input &gt;= 1 &amp;&amp; input &lt;= 4)\t\t&#123;\t\t\tprintf(&quot;è¾“å…¥2ä¸ªæ“ä½œæ•°:&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;x, &amp;y);\t\t\tret = pfArr[input](x, y);\t\t\tprintf(&quot;ret = %d\\n&quot;, ret);\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\nè¿™æ ·å°±é¿å…äº†æˆ‘ä»¬åœ¨æ¯ä¸ªcaseè¯­å¥é‡Œéƒ½å†™ä¸Šè¾“å…¥æç¤ºã€scanfå’Œä¸åŒçš„å‡½æ•°è°ƒç”¨æ‰€å¯¼è‡´çš„ä»£ç å†—ä½™äº†\nè¿è¡Œè¯•è¯•å§ï¼\n\n2.3æŒ‡å‘å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆå‡½æ•°æŒ‡é’ˆæ•°ç»„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å¯ä»¥ç”¨æ•°ç»„æŒ‡é’ˆæ¥å­˜æ”¾åœ°å€\n\næŒ‡å‘å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆï¼šæ˜¯ä¸€ä¸ªæŒ‡é’ˆ\nè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\n\nint Add(int x, int y)&#123;\treturn x + y;&#125;int main()&#123;\tint (*pa)(int, int) = Add;//å‡½æ•°æŒ‡é’ˆ\tint (* pfA[4])(int, int);//å‡½æ•°æŒ‡é’ˆçš„æ•°ç»„\tint (* (*ppfA)[4])(int, int) = &amp;pfA;    //ppfA æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘äº†ä¸€ä¸ªå­˜æ”¾å‡½æ•°æŒ‡é’ˆçš„æ•°ç»„\treturn 0;&#125;\n\n\n3.ç›¸å…³ç»ƒä¹ é¢˜\nå®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘çš„å‡½æ•°æœ‰ä¸¤ä¸ªintå½¢å‚å¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿”å›çš„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæœ‰ä¸€ä¸ªintå½¢å‚ä¸”è¿”å›intçš„å‡½æ•°ï¼Ÿä¸‹é¢å“ªä¸ªæ˜¯æ­£ç¡®çš„ï¼Ÿ\n&gt;A. int (*(*F)(int, int))(int)&gt;B. int (*F)(int, int)&gt;C. int (*(*F)(int, int))&gt;D. *(*F)(int, int)(int)\n\nä¸€æ­¥æ­¥åˆ†æé¢˜ç›®çš„è¦æ±‚\n\nè¯¥å‡½æ•°æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•°æœ‰ä¸¤ä¸ªintç±»å‹ï¼Œå³(int,int)ï¼ŒABCDéƒ½æœ‰ï¼Œæ— æ³•æ’é™¤\n\nä»”ç»†çœ‹çœ‹ï¼ŒDçš„ç±»å‹æ²¡æœ‰å†™å…¨ï¼Œç›´æ¥æ’é™¤\n\nè¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªæœ‰ä¸€ä¸ªintå½¢å‚ä¸”è¿”å›intçš„å‡½æ•°\nBæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œè¿”å›ç±»å‹æ˜¯intï¼Œé”™è¯¯\nCçš„è¿”å›å€¼æ˜¯int*ç±»å‹ï¼Œé”™è¯¯\n\nAé€‰é¡¹å»æ‰å‡½æ•°æŒ‡é’ˆFåï¼Œå‰©ä¸‹int (*)(int)ï¼Œç¬¦åˆé¢˜æ„\n\n\n\nç»“è¯­å‡½æ•°æŒ‡é’ˆçš„çŸ¥è¯†ç‚¹æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°ğŸ§\nä½ å­¦åºŸäº†å—ï¼ŸğŸ˜‚\n\nä¸‹ä¸€ç«™ğŸšƒï¼šå›è°ƒå‡½æ•°\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘æŒ‡é’ˆè¿›é˜¶ç»ˆç‚¹ç«™ï¼Œå›è°ƒå‡½æ•°å’Œqsort","url":"/posts/175319279/","content":"[TOC]\n\nå˜Ÿå˜Ÿå˜Ÿï¼ŒæŒ‡é’ˆè¿›é˜¶çš„å…¬äº¤è½¦åˆ°ç»ˆç‚¹ç«™ğŸšå•¦ï¼\nè¿™ä¸€ç«™æˆ‘ä»¬å°†å­¦ä¹ å›è°ƒå‡½æ•°ã€qsortçš„ä½¿ç”¨ä»¥åŠæ¨¡æ‹Ÿå®ç°\n\n1.å›è°ƒå‡½æ•°\nå®šä¹‰ï¼š\nå›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™æ˜¯å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥ å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ– æ¡ä»¶è¿›è¡Œå“åº”ã€‚\n\nåœ¨ä¸Šç¯‡åšå®¢å‡½æ•°æŒ‡é’ˆæ•°ç»„é‡Œï¼Œæåˆ°äº†ä¸€ä¸ªè®¡ç®—å™¨çš„ä»£ç \nåœ¨è¿™é‡Œå°±èƒ½ç”¨åˆ°æˆ‘ä»¬çš„å›è°ƒå‡½æ•°ï¼Œé€šè¿‡ä¸€ä¸ªæ–°çš„calcå‡½æ•°æ¥è°ƒç”¨è®¡ç®—å‡½æ•°ï¼ŒåŒæ ·è¾¾åˆ°äº†é¿å…switch&#x2F;caseè¯­å¥é‡å¤çš„ç›®çš„\n\nä¸è¿‡ä»Šå¤©æˆ‘ä»¬çš„å­¦ä¹ é‡ç‚¹çš„å†…å®¹ä¸åœ¨è¿™é‡Œï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„å‡½æ•°ï¼šqsort\n\n2.qsortå‡½æ•°qsortå‡½æ•°åˆç§° å¿«é€Ÿæ’åºå‡½æ•°\n2.1void*æŒ‡é’ˆvoid* p = &amp;a;\n\n\nvoid* æ˜¯ä¸€ç§æ— ç±»å‹çš„æŒ‡é’ˆï¼Œæ— å…·ä½“ç±»å‹çš„æŒ‡é’ˆ\nvoid* çš„æŒ‡é’ˆå˜é‡å¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„åœ°å€\nvoid* çš„æŒ‡é’ˆä¸èƒ½ç›´æ¥è¿›è¡Œè§£å¼•ç”¨æ“ä½œ\nvoid* çš„æŒ‡é’ˆä¸èƒ½ç›´æ¥è¿›è¡ŒåŠ å‡æ•´æ•°\n\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹qsortå‡½æ•°çš„å®šä¹‰\n2.2qsortå‡½æ•°å®šä¹‰\nvoid qsort (void* base, size_t num, size_t size,            int (*compar)(const void*,const void*));\n\nè¿™äº›å‚æ•°åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\n\nvoid*base æ˜¯å¾…æ’åºæ•°æ®çš„èµ·å§‹åœ°å€\n\nsize_t num æ˜¯å¾…æ’åºæ•°æ®çš„ä¸ªæ•°\n\nsize_t size æ˜¯å¾…æ’åºæ•°æ®ä¸­æ¯ä¸ªæ•°æ®çš„å¤§å°\n\nsiez_tæ˜¯ä¸“ä¸ºsizeofå‡½æ•°çš„è¿”å›å€¼è®¾è®¡çš„\nå®ƒæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´å‹\n\n\n\n\n\nint (*compar)(const void*,const void*)æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ\nè¯¥å‡½æ•°çš„å‚æ•°ä¸º(const void*,const void*)ï¼Œè¿”å›å€¼ä¸ºint\n\nåœ¨qsortçš„åº”ç”¨ä¸­ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥ç¼–å†™è¿™æ ·ä¸€ä¸ªcomparå‡½æ•°ï¼Œæ¥åˆ¤æ–­å¾…æ’åºæ•°æ®è°å¤§è°å°\nqsortåº“å‡½æ•°å¯¹comparå‡½æ•°åšå‡ºäº†å¦‚ä¸‹è§„å®šï¼š\n\np1&gt;p2æ—¶ è¿”å›&gt;0çš„æ•°\np1&#x3D;p2æ—¶ è¿”å›0\np1&lt;p2æ—¶ è¿”å›&lt;0çš„æ•°\n\n\n\n\n\nä¸ºä»€ä¹ˆæ¯”è¾ƒå‡½æ•°ç”¨çš„void*ç±»å‹çš„æŒ‡é’ˆ?\n\nå› ä¸ºqsortå‡½æ•°å¹¶ä¸çŸ¥é“ä½ éœ€è¦æ’åºä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯ä½œä¸ºä½¿ç”¨è€…ï¼Œæˆ‘ä»¬çŸ¥é“å¾…æ’åºçš„æ•°æ®ç±»å‹ä»¥åŠå¦‚ä½•æ¯”è¾ƒå¾…æ’åºçš„æ•°æ®ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å°†void*æŒ‡é’ˆå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå˜ä¸ºæ‰€éœ€è¦çš„æŒ‡é’ˆï¼\n\n\n2.3åˆ©ç”¨qsortå‡½æ•°æ¥æ’åºint&#x2F;charé¦–å…ˆæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªå¾…æ’åºçš„æ•´å‹æ•°ç»„ï¼Œä¾ç…§qsortå‡½æ•°çš„å®šä¹‰ï¼Œå°†å‚æ•°å¡«å…¥è¯¥å‡½æ•°\nint main()&#123;\tint arr[10] = &#123; 3,4,7,9,0,1,2,5,8,6 &#125;;\tint sz = sizeof(arr) / sizeof(arr[0]);\tint* ptr = arr;//æ­¤å¤„å¯ä»¥ç›´æ¥ç”¨arræ¥ä»£æ›¿\tqsort(ptr, sz, sizeof(arr[0]), cmp_int);        return 0;&#125;\n\næ¥ç€ï¼Œæˆ‘ä»¬éœ€è¦æ¥ç¼–å†™è¿™ä¸ªcmp_intå‡½æ•°ï¼Œç”¨äºåˆ¤æ–­ä¸¤ä¸ªæ•´å‹çš„å¤§å°\nç„¶åæŠŠè¿™ä¸ªå‡½æ•°åå†™å…¥qsort\n//ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒæ•´å‹int cmp_int(const void* e1, const void* e2)&#123;\treturn *(int*)e1 - *(int*)e2;&#125;\n\nè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»æŒ‰ç…§å‡åºé‡æ–°æ’åºäº†ï¼\n\nå¦‚æœä½ æƒ³é™åºæ’åºï¼Œåªéœ€è¦å°†æ¯”è¾ƒå‡½æ•°å‚æ•°é‡Œçš„e1å’Œe2å¯¹è°ƒä½ç½®\n\n\nå†æ¥è¯•è¯•æ’åºcharå­—ç¬¦ç±»å‹å§ï¼\n//æ¯”è¾ƒå­—ç¬¦int cmp_char(const void* e1, const void* e2)&#123;\tchar a = *(char*)e1;\tchar b = *(char*)e2;\tif (a == b)\t\treturn 0;\telse if (a &gt; b)\t\treturn 1;\telse\t\treturn -1;&#125;int main()&#123;\tchar arr1[5] = &#123; &#x27;d&#x27;,&#x27;i&#x27;,&#x27;a&#x27;,&#x27;c&#x27;,&#x27;k&#x27;&#125;;\tint sz1 = sizeof(arr1) / sizeof(arr1[0]);\tint* pc = arr1;\tqsort(pc, sz1, sizeof(arr1[0]), cmp_char);\tfor(int i = 0; i &lt; sz1; i++)\t&#123;\t\tprintf(&quot;%c &quot;, arr1[i]);\t&#125;\tprintf(&quot;\\n&quot;);\treturn 0;&#125;\n\n\n2.4ç”¨qsortæ’åºç»“æ„ä½“å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå†…å®¹åˆ†åˆ«ä»£è¡¨å§“åã€å¹´é¾„ã€æˆç»©\nstruct Stu&#123;\tchar name[20];\tint age;\tfloat score;&#125;;\n\nè¯¥ç»“æ„ä½“æœ‰charã€intã€floatä¸‰ç§ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦æˆ‘ä»¬å†™ä¸‰ç§å¯¹åº”çš„æ’åºå‡½æ•°\n//æ’åºæˆç»©int cmp_stu_by_socre(const void* e1, const void* e2)&#123;\tif (((struct Stu*)e1)-&gt;score &gt; ((struct Stu*)e2)-&gt;score)\t&#123;\t\treturn 1;\t&#125;\telse if (((struct Stu*)e1)-&gt;score &lt; ((struct Stu*)e2)-&gt;score)\t&#123;\t\treturn -1;\t&#125;\telse\t&#123;\t\treturn 0;\t&#125;&#125;//æŒ‰å¹´é¾„æ’åºint cmp_stu_by_age(const void* e1, const void* e2)&#123;\treturn ((struct Stu*)e1)-&gt;age - ((struct Stu*)e2)-&gt;age;&#125;//æŒ‰åå­—æ’åºint cmp_stu_by_name(const void* e1, const void* e2)&#123;   //ç”¨strcmpå‡½æ•°æ¯”è¾ƒå­—ç¬¦ä¸²\treturn strcmp(((struct Stu*)e1)-&gt;name, ((struct Stu*)e2)-&gt;name);&#125;\n\nå†å†™ä¸€ä¸ªå‡½æ•°æ¥æ‰“å°ç»“æ„ä½“å˜é‡\nvoid print_stu(struct Stu arr[], int sz)&#123;\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\tprintf(&quot;%s %d %.2f\\n&quot;, arr[i].name, arr[i].age, arr[i].score);\t&#125;\tprintf(&quot;\\n&quot;);&#125;\n\næœ€ååœ¨ä¸»å‡½æ•°é‡Œå®šä¹‰ç»“æ„ä½“ç±»å‹å¹¶å†™å…¥qsortå‡½æ•°\nint main()&#123;\tstruct Stu arr[] = &#123; &#123;&quot;zhangsan&quot;,20,87.5f&#125;,&#123;&quot;lisi&quot;,22,99.0f&#125;,&#123;&quot;wangwu&quot;, 10, 68.5f&#125;,&#123;&quot;niuyeye&quot;,30,95.0f&#125; &#125;;\tint sz = sizeof(arr) / sizeof(arr[0]);\tqsort(arr, sz, sizeof(arr[0]), cmp_stu_by_name);\tprint_stu(arr,sz);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æ•°æ®å·²ç»æŒ‰ç…§å§“åæ’åºäº†ï¼\n\n\n3.æ¨¡æ‹Ÿå®ç°qsortå‡½æ•°é‚£ä¹ˆï¼Œqsortå‡½æ•°çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nä¹‹å‰æˆ‘ä»¬å†™è¿‡ç”¨äºæ’åºæ•´å‹çš„å†’æ³¡æ’åº\nå…¶åŸç†æ˜¯æ¯”è¾ƒæ•°ç»„å†…çš„aå…ƒç´ ä»¥åŠaçš„ä¸‹ä¸€ä½å…ƒç´ ï¼Œå¦‚æœaå¤§äºa+1çš„å…ƒç´ ï¼Œåˆ™å°†å®ƒä»¬äº’æ¢ä½ç½®\nvoid bubble_sort(int arr[], int sz)//å½¢å‚arræœ¬è´¨æ˜¯æŒ‡é’ˆ&#123;\t//ç¡®å®šè¶Ÿæ•°\tint i = 0;\tfor (i = 0; i &lt; sz; i++)\t&#123;\t\t//ä¸€è¶Ÿå†’æ³¡æ’åº\t\tint j = 0;\t\tfor (j = 0; j &lt; sz - 1 - i; j++)\t\t&#123;\t\t\tif (arr[j] &gt; arr[j + 1] )\t\t\t&#123;\t\t\t\t//äº¤æ¢\t\t\t\tint tmp = arr[j];\t\t\t\tarr[j] = arr[j + 1];\t\t\t\tarr[j + 1] = tmp;\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\næœ‰æ²¡æœ‰åŠæ³•å°†å†’æ³¡æ’åºç»™æ”¹å†™æˆé€šç”¨çš„æ’åºå‡½æ•°å‘¢ï¼Ÿ\næ€è€ƒï¼š\n\nå†’æ³¡æ’åºçš„æ—¶å€™ï¼Œä½¿ç”¨æ˜¯intç±»å‹ï¼Œintç±»å‹æ˜¯4ä¸ªå­—èŠ‚ï¼Œæ— æ³•æ’åºæ¯”4ä¸ªå­—èŠ‚å°çš„æ•°æ®ç±»å‹\nç»“æ„ä½“ç±»å‹çš„å¤§å°ä¸ä¸€å®šæ˜¯4çš„æ•´æ•°å€ï¼Œä¹Ÿæ— æ³•ç”¨intæ¥æ’åº\ncharç±»å‹æ˜¯1ä¸ªå­—èŠ‚ï¼Œèƒ½å¦é€šè¿‡charç±»å‹æ¥æ›´æ”¹æ‰€æœ‰ç±»å‹ï¼Ÿ\n\nç­”æ¡ˆå½“ç„¶æ˜¯è‚¯å®šçš„ï¼\nåœ¨ä¹‹å‰çš„æŒ‡é’ˆå­¦ä¹ é‡Œï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œå°½ç®¡char*å’Œint*ç±»å‹çš„æŒ‡é’ˆéƒ½å 4ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯char*ç±»å‹åªèƒ½è®¿é—®1ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚\næˆ‘ä»¬å¯ä»¥åˆ©ç”¨char*æŒ‡é’ˆçš„è¿™ä¸ªç‰¹ç‚¹ï¼Œå¯¹æ•°æ®è¿›è¡Œä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„äº¤æ¢ï¼Œäº¤æ¢4æ¬¡ä¸å°±èƒ½äº¤æ¢å®Œä¸€ä¸ªintç±»å‹äº†å—ï¼ŸåŒç†ä¹Ÿèƒ½é€šè¿‡char*çš„å¤šæ¬¡è®¿é—®ï¼Œäº¤æ¢å…¶ä»–ç±»å‹çš„æ•°æ®ï¼\n\næ—¢ç„¶æ˜¯æ¨¡æ‹Ÿå®ç°qsortå‡½æ•°ï¼Œé‚£å‡½æ•°çš„å‚æ•°åº”è¯¥å’Œqsortç›¸åŒ\nç›´æ¥æŠŠqsortå‡½æ•°æ”¹æˆmy_qsortï¼Œå¼€æ•´ï¼\n\nåˆ©ç”¨å†’æ³¡æ’åºçš„åŸºæœ¬æ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä»¥ä¸‹çš„ä»£ç \n//æ¨¡æ‹Ÿå®ç°qsortvoid my_qsort(void* base, int sz,int width, int(*cmp)(const void* e1, const void* e2))&#123;\tfor (int i = 0; i &lt; sz - 1; i++)\t&#123;\t\tfor (int j = 0; j &lt; sz - i - 1; j++)\t\t&#123;\t\t\tif (cmp((char*)base + j * width , (char*)base + (j + 1) * width)&gt;0)\t\t\t&#123;\t\t\t\tmy_swap((char*)base + j * width, (char*)base + (j+1) * width ,width);\t\t\t&#125;\t\t&#125;\t&#125;&#125;\n\nä½ å¯èƒ½å¯¹ifé‡Œé¢çš„è¯­å¥æ„Ÿåˆ°å¾ˆæ‡µï¼Œåˆ«æ€¥ï¼Œçœ‹å›¾ï¼\n\ncmpå°±æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œåˆ©ç”¨å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨æ¯”è¾ƒå‡½æ•°\n\n\nå†æ¥å†™ä¸€ä¸ªswapå‡½æ•°ï¼Œå®ç°å­—èŠ‚çš„äº¤æ¢\n//ç”¨charç±»å‹çš„æŒ‡é’ˆæ¥ä¸€ä¸ªä¸€ä¸ªåœ°è®¿é—®void my_swap(char* e1, char* e2,int sz)&#123;        //szæ˜¯å¾…æ’åºæ•°æ®çš„å®½åº¦:width\tfor (int k = 0; k &lt; sz; k++)\t&#123;\t\tchar tmp = *e1;\t\t*e1 = *e2;\t\t*e2 = tmp;\t\te1++;\t\te2++;\t&#125;&#125;\n\næµ‹è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸæŒ‰ç…§æˆç»©æ¥æ’åºï¼\n\nç»“è¯­æŒ‡é’ˆè¿›é˜¶çš„è¡Œç¨‹åˆ°è¿™é‡Œå°±åœ†æ»¡ç»“æŸå•¦ï¼æ˜¯ä¸æ˜¯æ„Ÿè§‰æ”¶è·æ»¡æ»¡å‘¢ï¼Ÿ\n\nå­¦æœ‰ä½™åŠ›çš„æœ‹å‹ä»¬å¯ä»¥çœ‹çœ‹è¿™ä¸€ç±»æŒ‡é’ˆç¬”è¯•é¢˜ğŸ‘‰ç‚¹æˆ‘\n\nåˆ°ç«™ï¼Œä¸‹è½¦ï¼ğŸš\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°","æŒ‡é’ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘åŠ¨æ€å†…å­˜ç®¡ç†ï¼ˆè¯¦è§£malloc/calloc/reallocï¼‰","url":"/posts/1456051952/","content":"[TOC]\nç›´å…¥ä¸»é¢˜ï¼ŒåŠ¨æ€å†…å­˜ç®¡ç†ï¼ğŸ•µï¸â€â™‚ï¸\n1.ä¸ºä»€ä¹ˆä¼šæœ‰åŠ¨æ€å†…å­˜åˆ†é…ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼å¼€è¾Ÿå†…å­˜\nint a = 20;//åœ¨æ ˆç©ºé—´ä¸Šå¼€è¾Ÿå››ä¸ªå­—èŠ‚char arr[10] = &#123;0&#125;;//åœ¨æ ˆç©ºé—´ä¸Šå¼€è¾Ÿ10ä¸ªå­—èŠ‚çš„è¿ç»­ç©ºé—´\n\nä½†æ˜¯ä¸Šè¿°çš„å¼€è¾Ÿç©ºé—´çš„æ–¹å¼æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š \n\nç©ºé—´å¼€è¾Ÿå¤§å°æ˜¯å›ºå®šçš„ã€‚ \næ•°ç»„åœ¨ç”³æ˜çš„æ—¶å€™ï¼Œå¿…é¡»æŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œå®ƒæ‰€éœ€è¦çš„å†…å­˜åœ¨ç¼–è¯‘æ—¶åˆ†é…ã€‚\n\nä½†æ˜¯å¯¹äºç©ºé—´çš„éœ€æ±‚ï¼Œä¸ä»…ä»…æ˜¯ä¸Šè¿°çš„æƒ…å†µã€‚æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½æå‰çŸ¥é“éœ€è¦çš„ç©ºé—´å¤§å°ï¼Œè€Œéƒ¨åˆ†ç¼–è¯‘å™¨å¹¶ä¸æ”¯æŒå˜é•¿æ•°ç»„ã€‚è¿™æ—¶å€™ä»¥æ•°ç»„çš„æ–¹å¼å¼€è¾Ÿè¿ç»­ç©ºé—´çš„æ–¹æ³•å°±æœ‰ç‚¹ä¸é€‚ç”¨äº†ã€‚\nå…¶æ¬¡ï¼Œå…¨å±€å˜é‡&#x2F;å±€éƒ¨å˜é‡æ˜¯å­˜æ”¾åœ¨æ ˆåŒºé‡Œé¢çš„ã€‚å¦‚æœå­˜æ”¾çš„å˜é‡å¤ªå¤šï¼Œå°±ä¼šå‡ºç°æ ˆæº¢å‡ºçš„é”™è¯¯\n\nè¿™æ—¶å€™å°±è½®åˆ°åŠ¨æ€å†…å­˜ä¸Šåœºäº†ï¼\n\n2.åŠ¨æ€å†…å­˜å‡½æ•°2.1 malloc#include &lt;stdlib.h&gt;//mallocçš„å¤´æ–‡ä»¶void* malloc (size_t size);\n\nè¿™ä¸ªå‡½æ•°å‘å†…å­˜ç”³è¯·ä¸€å—è¿ç»­å¯ç”¨çš„ç©ºé—´ï¼Œå¹¶è¿”å›æŒ‡å‘è¿™å—ç©ºé—´çš„æŒ‡é’ˆã€‚\n\nå¦‚æœå¼€è¾ŸæˆåŠŸï¼Œåˆ™è¿”å›ä¸€ä¸ªæŒ‡å‘å¼€è¾Ÿå¥½ç©ºé—´çš„æŒ‡é’ˆã€‚ \nå¦‚æœå¼€è¾Ÿå¤±è´¥ï¼Œåˆ™è¿”å›ä¸€ä¸ªNULLæŒ‡é’ˆï¼Œå› æ­¤mallocçš„è¿”å›å€¼ä¸€å®šè¦åšæ£€æŸ¥ã€‚ \nè¿”å›å€¼çš„ç±»å‹æ˜¯ void* ï¼Œæ‰€ä»¥mallocå‡½æ•°å¹¶ä¸çŸ¥é“å¼€è¾Ÿç©ºé—´çš„ç±»å‹ï¼Œå…·ä½“åœ¨ä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨è€…è‡ªå·±æ¥å†³å®šã€‚ \nå¦‚æœå‚æ•° size ä¸º0ï¼Œmallocçš„è¡Œä¸ºæ˜¯æ ‡å‡†æ˜¯æœªå®šä¹‰çš„ï¼Œå–å†³äºç¼–è¯‘å™¨ã€‚\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)malloc(40);\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));        //è¿™ä¸ªå‡½æ•°åœ¨ä¹‹å‰ä»‹ç»è¿‡ï¼Œç”¨äºè½¬ä¹‰é”™è¯¯ä»£ç \t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//é‡Šæ”¾\tfree(p);\tp = NULL;\t\treturn 0;&#125;\n\n2.2 freeä¸Šè¿°ä»£ç é‡Œé¢å‡ºç°äº†å¦å¤–ä¸€ä¸ªé‡è¦çš„å‡½æ•°ï¼Œfree\nfreeå‡½æ•°ç”¨æ¥é‡Šæ”¾åŠ¨æ€å¼€è¾Ÿçš„å†…å­˜ï¼Œå¤´æ–‡ä»¶æ˜¯&lt;stdlib.h&gt;\n\nå¦‚æœå‚æ•°ptræŒ‡å‘çš„ç©ºé—´ä¸æ˜¯åŠ¨æ€å¼€è¾Ÿçš„ï¼Œé‚£freeå‡½æ•°çš„è¡Œä¸ºæ˜¯æœªå®šä¹‰çš„\nå¦‚æœå‚æ•°ptræ˜¯NULLæŒ‡é’ˆï¼Œåˆ™å‡½æ•°ä»€ä¹ˆäº‹éƒ½ä¸åšã€‚\n\nfreeå‡½æ•°ä¸èƒ½ç”¨æ¥é‡Šæ”¾æ ˆåŒºé‡Œé¢çš„ç©ºé—´ï¼Œæ ˆåŒºçš„ç©ºé—´ç”±ç¼–è¯‘å™¨è¿›è¡Œè‡ªåŠ¨åˆ›å»ºå’Œè‡ªåŠ¨é‡Šæ”¾\né‡ç‚¹ï¼\nè¢«freeä¹‹åçš„æŒ‡é’ˆpæŒ‡å‘çš„ç©ºé—´å·²ç»ä¸å±äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºäº†ã€‚æœ€å¥½åœ¨freeä¹‹åç«‹é©¬æŠŠæŒ‡é’ˆç½®ä¸ºNULLé¿å…è®¿é—®é‡æŒ‡é’ˆã€‚\nfree(p);p = NULL;\n\n\n2.3 callocvoid* calloc (size_t num, size_t size);\n\ncallocå‡½æ•°çš„åŠŸèƒ½å’ŒmallocåŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼š\n\ncallocå‡½æ•°çš„åŠŸèƒ½æ˜¯ä¸ºnumä¸ªå¤§å°ä¸ºsizeçš„å…ƒç´ å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå¹¶ä¸”æŠŠç©ºé—´çš„æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸º0ã€‚\nä¸mallocçš„åŒºåˆ«åªåœ¨äºcallocä¼šåœ¨è¿”å›åœ°å€ä¹‹å‰æŠŠç”³è¯·çš„ç©ºé—´çš„æ¯ä¸ªå­—èŠ‚åˆå§‹åŒ–ä¸ºå…¨0\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)calloc(10, sizeof(int));\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;             \tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//é‡Šæ”¾\tfree(p);\tp = NULL;\treturn 0;&#125;\n\næ·»åŠ æ–­ç‚¹å¹¶è°ƒè¯•ï¼Œå¯ä»¥çœ‹åˆ°callocå‡½æ•°æŠŠè¿™ä¸€å—å†…å­˜éƒ½åˆå§‹åŒ–ä¸º0äº†\n\nå¦‚æœè¿™å—ç©ºé—´éœ€è¦åˆå§‹åŒ–ï¼Œä½¿ç”¨callocå‡½æ•°æ¯”mallocæ›´å¥½\n\n\n\n2.4 realloc\nè¯¥å‡½æ•°ç”¨äºæ›´æ”¹å·²ç»åˆ›å»ºå¥½çš„åŠ¨æ€å†…å­˜ç©ºé—´ï¼ˆå¯æ”¹å¤§å¯æ”¹å°ï¼‰\n\nvoid* realloc (void* ptr, size_t size);\n\n\nptr æ˜¯è¦è°ƒæ•´çš„å†…å­˜åœ°å€ \nsize è°ƒæ•´ä¹‹åæ–°å¤§å°\nè¿”å›å€¼ä¸ºè°ƒæ•´ä¹‹åçš„å†…å­˜èµ·å§‹åœ°å€\nè¿™ä¸ªå‡½æ•°è°ƒæ•´åŸå†…å­˜ç©ºé—´å¤§å°çš„åŸºç¡€ä¸Šï¼Œè¿˜ä¼šå°†åŸæ¥å†…å­˜ä¸­çš„æ•°æ®ç§»åŠ¨åˆ°æ–°çš„ç©ºé—´\nå¦‚æœå¼€è¾Ÿå¤±è´¥ï¼Œè¿”å›ç©ºæŒ‡é’ˆNULL\n\nåœ¨è¿›è¡Œæ‰©å®¹æ“ä½œçš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸¤ç§æƒ…å†µï¼š\n\nåŸåŠ¨æ€å†…å­˜ç©ºé—´ä¹‹åæœ‰è¶³å¤Ÿç©ºé—´è¿›è¡Œæ‰©å®¹\nåŸåŠ¨æ€å†…å­˜ç©ºé—´ä¹‹åæ— è¶³å¤Ÿç©ºé—´\n\nå¦‚æœæ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼Œreallocå‡½æ•°ä¼šåœ¨è¿™ä¹‹åå¢æ·»ç©ºé—´ï¼Œåˆ†é…ç»™ptræŒ‡é’ˆã€‚åŸæ¥ç©ºé—´çš„æ•°æ®ä¸å‘ç”Ÿå˜åŒ–ã€‚\nå¦‚æœæ˜¯ç¬¬äºŒç§æƒ…å†µï¼Œreallocä¼šæ‰¾ä¸€å—æ–°çš„ç©ºé—´ï¼Œå¼€è¾Ÿå¥½åè¿”å›ç»™ptræŒ‡é’ˆï¼Œå¹¶æŠŠåŸç©ºé—´é‡Œçš„æ•°æ®ç§»åŠ¨åˆ°æ–°ç©ºé—´çš„å¯¹åº”ä½ç½®ã€‚\n\næƒ…å†µ2çš„æ—¶å€™ï¼Œå¼€è¾Ÿå®Œæ–°ç©ºé—´ä¹‹åï¼Œä¼šæŠŠåŸæ¥çš„ç©ºé—´ç»™freeæ‰(åªæœ‰å¼€è¾ŸæˆåŠŸæ‰ä¼šé‡Šæ”¾åŸæ¥çš„ç©ºé—´)\n\n\n#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int main()&#123;\t//å¼€è¾Ÿ10ä¸ªæ•´å‹çš„ç©ºé—´\t//int arr[10];\tint* p = (int*)calloc(10, sizeof(int));\tif (NULL == p)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//ä½¿ç”¨\tint  i = 0;\tfor (i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, p[i]);\t&#125;\t//éœ€è¦å¢å®¹ - 80\tint*ptr = (int*)realloc(p, 80);\tif (NULL != ptr)\t&#123;\t\tp = ptr;\t\tptr = NULL;\t&#125;\t//ç»§ç»­ä½¿ç”¨äº†\t\t//é‡Šæ”¾\tfree(p);\tp = NULL;\treturn 0;&#125;\n\nå‡ ç‚¹æ³¨æ„ï¼š\n\nrealloc(p, 80) 80æŒ‡çš„æ˜¯å¼€è¾Ÿä¹‹åæ–°çš„ç©ºé—´å¤§å°ä¸º80ï¼Œè€Œä¸æ˜¯å¢åŠ 80çš„ç©ºé—´\nreallocå‡½æ•°å¯èƒ½å¼€è¾Ÿå¤±è´¥ï¼Œè¿™æ—¶å€™å¦‚æœå°†å¼€è¾Ÿå¤±è´¥çš„è¿”å›å€¼NULLèµ‹å€¼ç»™äº†åŸæœ‰æŒ‡é’ˆpï¼Œå°±å¾ˆå±é™©ã€‚\né‡‡ç”¨ä¸­é—´æŒ‡é’ˆå˜é‡ptrï¼Œå…ˆåˆ¤æ–­reallocå‡½æ•°æ˜¯å¦å¼€è¾ŸæˆåŠŸï¼Œè‹¥æˆåŠŸï¼Œåˆ™èµ‹å€¼ç»™pæŒ‡é’ˆã€‚\nèµ‹å€¼ç»™pä¹‹åptræŒ‡é’ˆå°±æ²¡ç”¨äº†ï¼Œç½®ä¸ºç©ºæŒ‡é’ˆã€‚\n\n\næœ€åæˆ‘ä»¬ä¸éœ€è¦å¯¹ptrè¿›è¡Œfreeï¼Œå› ä¸ºptrçš„æŒ‡å‘å’Œpæ˜¯ä¸€æ ·çš„\nfree(p)çš„æ—¶å€™ï¼Œptræ‰€æŒ‡å‘çš„ç©ºé—´ä¹Ÿè¢«freeæ‰äº†\n\n\nreallocç¼©å°ç©ºé—´çš„æ—¶å€™ï¼Œä¼šæŠŠåŸæ¥ç©ºé—´åé¢çš„å†…å®¹éƒ½å‰”é™¤\n\n\n3.å¸¸è§é”™è¯¯3.1å¯¹NULLæŒ‡é’ˆçš„è§£å¼•ç”¨void test()&#123;  int *p = (int *)malloc(INT_MAX/4);  *p = 20;//å¦‚æœpçš„å€¼æ˜¯NULLï¼Œå°±ä¼šæœ‰é—®é¢˜  free(p);&#125;\n\nINT_MAXæ˜¯intç±»å‹çš„æœ€å¤§å€¼ï¼Œå¯ä»¥åœ¨å¤´æ–‡ä»¶limits.hé‡Œé¢æŸ¥è¯¢å¹¶ä½¿ç”¨\n3.2å¯¹åŠ¨æ€å†…å­˜ç©ºé—´çš„è¶Šç•Œè®¿é—®å’Œæ•°ç»„ä¸€æ ·ï¼ŒåŠ¨æ€å†…å­˜ç©ºé—´ä¹Ÿæ˜¯ä¸èƒ½è¶Šç•Œè®¿é—®çš„ï¼\nvoid test()&#123; int i = 0; int *p = (int *)malloc(10*sizeof(int)); if(NULL == p) &#123; exit(EXIT_FAILURE); &#125; for(i=0; i&lt;=10; i++)//åº”è¯¥æ˜¯i&lt;10 &#123; *(p+i) = i;//å½“iæ˜¯10çš„æ—¶å€™è¶Šç•Œè®¿é—® &#125; free(p);&#125;\n\n3.3å¯¹éåŠ¨æ€å†…å­˜ç©ºé—´è¿›è¡Œfreevoid test()&#123; int a = 10; int *p = &amp;a; free(p);//err&#125;\n\n3.4ä½¿ç”¨freeé‡Šæ”¾åŠ¨æ€å†…å­˜ç©ºé—´çš„ä¸€éƒ¨åˆ†void test()&#123; int *p = (int *)malloc(100); p++; free(p);//pä¸å†æŒ‡å‘åŠ¨æ€å†…å­˜çš„èµ·å§‹ä½ç½®&#125;\n\n\néœ€è¦ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥è®°ä½èµ·å§‹åœ°å€ï¼Œç”¨å¦å¤–ä¸€ä¸ªæŒ‡é’ˆæ¥è¿›è¡Œèµ‹å€¼ç­‰æ“ä½œ\n\n3.5å¯¹ä¸€ä¸ªç©ºé—´è¿›è¡Œé‡å¤é‡Šæ”¾void test()&#123; int *p = (int *)malloc(100); free(p); free(p);//é‡å¤é‡Šæ”¾&#125;\n\nåœ¨freeä¹‹åç«‹é©¬æŠŠpç½®ä¸ºç©ºæŒ‡é’ˆï¼Œå°±èƒ½é¿å…è¿™ä¸ªé—®é¢˜\n\nfreeå‡½æ•°æ¥æ”¶ç©ºæŒ‡é’ˆï¼Œä¸åšä»»ä½•æ“ä½œ\n\n3.6å†…å­˜æ³„æ¼å¦‚æœå¿˜è®°é‡Šæ”¾åŠ¨æ€å†…å­˜å¼€è¾Ÿçš„ç©ºé—´ï¼Œå°±ä¼šå¯¼è‡´å†…å­˜æ³„æ¼\nvoid test()&#123; \tint *p = (int*)malloc(100); \tif(NULL != p) \t&#123; \t\t*p = 20; \t&#125;    //æ²¡æœ‰é‡Šæ”¾pçš„ç©ºé—´&#125;int main()&#123; \ttest();\twhile(1);&#125;\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè°ä½¿ç”¨å°±è°é‡Šæ”¾ã€‚å‡½æ•°é‡Œä½¿ç”¨å°±åœ¨å‡½æ•°é‡Œé‡Šæ”¾ï¼Œé™¤ééœ€è¦ä¼ å›ä¸»å‡½æ•°è¿›è¡Œæ“ä½œã€‚\n\nå¦‚æœæ²¡æœ‰ä¼ å›ä¸»å‡½æ•°ï¼Œä¹Ÿæ²¡åœ¨å‡½æ•°é‡Œè¿›è¡Œé‡Šæ”¾ï¼Œè¯¥æŒ‡é’ˆå˜é‡å·²ç»è¢«é”€æ¯äº†ï¼Œæ— æ³•è¿›è¡Œé‡Šæ”¾æ“ä½œï¼\n\nå¦‚æœä¸»å‡½æ•°é‡Œç¨‹åºæ²¡æœ‰ç»“æŸï¼Œå°±é€ æˆäº†å†…å­˜æµªè´¹\n\n4.C&#x2F;C++ç¨‹åºä¸­å†…å­˜åŒºåŸŸåˆ’åˆ†\næ ˆåŒºï¼ˆstackï¼‰ï¼šåœ¨æ‰§è¡Œå‡½æ•°æ—¶ï¼Œå‡½æ•°å†…å±€éƒ¨å˜é‡çš„å­˜å‚¨å•å…ƒéƒ½å¯ä»¥åœ¨æ ˆä¸Šåˆ›å»ºï¼Œå‡½æ•°æ‰§è¡Œç»“æŸæ—¶è¿™äº›å­˜å‚¨å•å…ƒè‡ªåŠ¨è¢«é‡Šæ”¾ã€‚æ ˆå†…å­˜åˆ†é…è¿ç®—å†…ç½®äºå¤„ç†å™¨çš„æŒ‡ä»¤é›†ä¸­ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†æ˜¯åˆ†é…çš„å†…å­˜å®¹é‡æœ‰é™ã€‚ æ ˆåŒºä¸»è¦å­˜æ”¾è¿è¡Œå‡½æ•°è€Œåˆ†é…çš„å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ã€è¿”å›æ•°æ®ã€è¿”å›åœ°å€ç­‰ã€‚\n\nå †åŒºï¼ˆheapï¼‰ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ ã€‚åˆ†é…æ–¹å¼ç±»ä¼¼äºé“¾è¡¨ã€‚\n\næ•°æ®æ®µï¼ˆé™æ€åŒºï¼‰ï¼ˆstaticï¼‰å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€æ•°æ®ã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚\n\nä»£ç æ®µï¼šå­˜æ”¾å‡½æ•°ä½“ï¼ˆç±»æˆå‘˜å‡½æ•°å’Œå…¨å±€å‡½æ•°ï¼‰çš„äºŒè¿›åˆ¶ä»£ç ã€‚\n\n\n\næœ‰äº†è¿™å¹…å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´å¥½çš„ç†è§£åœ¨ã€Šåˆè¯†Cè¯­è¨€ã€‹ä¸­è®²çš„staticå…³é”®å­—ä¿®é¥°å±€éƒ¨å˜é‡çš„ä¾‹å­äº†ã€‚å®é™…ä¸Šæ™®é€šçš„å±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆåŒºåˆ†é…ç©ºé—´çš„ï¼Œæ ˆåŒºçš„ç‰¹ç‚¹æ˜¯åœ¨ä¸Šé¢åˆ›å»ºçš„å˜é‡å‡ºäº†ä½œç”¨åŸŸå°±é”€æ¯ã€‚ä½†æ˜¯è¢«staticä¿®é¥°çš„å˜é‡å­˜æ”¾åœ¨æ•°æ®æ®µï¼ˆé™æ€åŒºï¼‰ï¼Œæ•°æ®æ®µçš„ç‰¹ç‚¹æ˜¯åœ¨ä¸Šé¢åˆ›å»ºçš„å˜é‡ï¼Œç›´åˆ°ç¨‹åºç»“æŸæ‰é”€æ¯ï¼Œæ‰€ä»¥ç”Ÿå‘½å‘¨æœŸå˜é•¿\n\n\n\nç»“è¯­åŠ¨æ€å†…å­˜å…¶å®å°±æ˜¯æ•°ç»„çš„é«˜çº§å½¢å¼ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ç®¡ç†å¼€è¾Ÿçš„è¿ç»­çš„ç©ºé—´ã€‚\nä½ å­¦åºŸäº†å—ï¼ŸğŸ¤¤\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘è‡ªå®šä¹‰ç±»å‹ï¼ˆè¯¦è§£ï¼‰","url":"/posts/313651598/","content":"[TOC]\nåœ¨Cè¯­è¨€ä¸­ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„è‡ªå®šä¹‰ç±»å‹ï¼šç»“æ„ä½“ã€æšä¸¾ã€è”åˆ\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹è¿™äº›è‡ªå®šä¹‰ç±»å‹å§ï¼ğŸ˜¶\n1.ç»“æ„ä½“ç»“æ„ä½“æ˜¯ä¸€äº›å€¼çš„é›†åˆï¼Œç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜å¯ä»¥æ˜¯ä¸åŒç±»å‹çš„å˜é‡\n1.1ç»“æ„ä½“çš„å£°æ˜ä»¥ä¸ªäººä¿¡æ¯ä¸ºä¾‹ï¼Œæœ‰å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èº«é«˜ç­‰å‡ ä¸ªå…ƒç´ ã€‚å¯ä»¥å®šä¹‰ç»“æ„ä½“å¦‚ä¸‹\nstruct Stu&#123;\tchar name[20];\tchar sex[5];\tint age;\tint hight;&#125;s2, s3, s4;//s2,s3,s4å…¨å±€å˜é‡\n\n1.2ç‰¹æ®Šå£°æ˜åœ¨å£°æ˜ç»“æ„ä½“çš„æ—¶å€™ï¼Œå¯ä»¥ä¸å®Œå…¨å£°æ˜\nstruct&#123;\tchar c;\tint a;\tdouble d;&#125;sa;struct&#123;\tchar c;\tint a;\tdouble d;&#125;*ps;\n\nè¿™ä¸¤ä¸ªç»“æ„ä½“å°±æ˜¯ä¸¤ä¸ªåŒ¿åç»“æ„ä½“ç±»å‹ï¼Œçœç•¥äº†ç»“æ„ä½“æ ‡ç­¾ã€‚\n\nåŒ¿åç»“æ„ä½“ç±»å‹åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼Œåç»­æ— æ³•ä½¿ç”¨\n\nè¿™ä¸¤ä¸ªç»“æ„ä½“çš„å†…å®¹æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚\nåœ¨ç¬¬äºŒä¸ªç»“æ„ä½“é‡Œé¢ï¼Œå®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆ*psï¼Œè¯·é—®è¿™ä¸ªæŒ‡é’ˆèƒ½å­˜æ”¾&amp;saå—ï¼Ÿ\nint main()&#123;\t//ç¼–è¯‘å™¨è®¤ä¸ºç­‰å·ä¸¤è¾¹æ˜¯ä¸åŒçš„ç»“æ„ä½“ç±»å‹ï¼Œæ‰€ä»¥è¿™ç§å†™æ³•æ˜¯é”™è¯¯çš„\tps = &amp;sa;\treturn 0;&#125;\n\n1.3ç»“æ„ä½“çš„è‡ªå¼•ç”¨åœ¨å®šä¹‰ç»“æ„ä½“çš„æ—¶å€™ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªè¯¥ç»“æ„ä½“æœ¬èº«çš„æˆå‘˜\n//ä»£ç 1-é”™è¯¯struct Node&#123; int data; struct Node next;&#125;;//æ­£ç¡®çš„è‡ªå¼•ç”¨æ–¹å¼struct Node&#123; int data; struct Node* next;&#125;;\n\nåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨typedefå‡½æ•°æ¥ä¸ºç»“æ„ä½“é‡å‘½å\n\ntypedefå‡½æ•°ä¸èƒ½é‡å‘½ååŒ¿åç»“æ„ä½“\n\ntypedef struct&#123; int data;` Node* next;&#125;Node;//ä¸èƒ½é‡å‘½ååŒ¿åç»“æ„ä½“//æ­£ç¡®å†™æ³•typedef struct Node&#123; int data; struct Node* next;&#125;Node;\n\n\n1.4ç»“æ„ä½“å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–struct Point&#123; int x; int y;&#125;p1; //å£°æ˜ç±»å‹çš„åŒæ—¶å®šä¹‰å˜é‡p1struct Point p2; //å®šä¹‰ç»“æ„ä½“å˜é‡p2\n\n//åˆå§‹åŒ–ï¼šå®šä¹‰å˜é‡çš„åŒæ—¶èµ‹åˆå€¼ã€‚struct Point p3 = &#123;x, y&#125;;struct Stu        //ç±»å‹å£°æ˜&#123; char name[15];//åå­— int age;      //å¹´é¾„&#125;;struct Stu s = &#123;&quot;zhangsan&quot;, 20&#125;;//åˆå§‹åŒ–struct Node&#123; int data; struct Point p; struct Node* next; &#125;n1 = &#123;10, &#123;4,5&#125;, NULL&#125;; //ç»“æ„ä½“åµŒå¥—åˆå§‹åŒ–struct Node n2 = &#123;20, &#123;5, 6&#125;, NULL&#125;;//ç»“æ„ä½“åµŒå¥—åˆå§‹åŒ–\n\n\n1.5ç»“æ„ä½“å†…å­˜å¯¹é½ç»“æ„ä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼æ¯”è¾ƒç‰¹æ®Š\nstruct S1&#123;\tchar c1;//1\tint i;//4\tchar c2;//1&#125;;\n\nç»“æ„ä½“é‡Œé¢ä¸€å…±å­˜æ”¾äº†6ä¸ªå­—èŠ‚çš„å†…å®¹ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œå®ƒæ‰€å çš„ç©ºé—´åº”è¯¥ä¹Ÿæ˜¯6ä¸ªå­—èŠ‚ã€‚\nä½†å½“æˆ‘ä»¬ç”¨sizeofè®¡ç®—å®ƒçš„é•¿åº¦çš„æ—¶å€™ï¼Œå´å¾—åˆ°äº†12ä¸ªå­—èŠ‚ã€‚\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nç»“æ„ä½“åœ¨å†…å­˜ä¸­å­˜æ”¾çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯å†…å­˜è¯»å–æ•ˆç‡ï¼Œéœ€è¦è¿›è¡Œå†…å­˜å¯¹é½\n\n\nç¬¬ä¸€ä¸ªæˆå‘˜åœ¨ä¸ç»“æ„ä½“å˜é‡åç§»é‡ä¸º0çš„åœ°å€å¤„ã€‚ \n\nå…¶ä»–æˆå‘˜å˜é‡è¦å¯¹é½åˆ°æŸä¸ªæ•°å­—ï¼ˆå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€çš„åœ°å€å¤„\n\n\n å¯¹é½æ•° &#x3D; ç¼–è¯‘å™¨é»˜è®¤çš„ä¸€ä¸ªå¯¹é½æ•° ä¸ è¯¥æˆå‘˜å¤§å°çš„è¾ƒå°å€¼\n VSä¸­é»˜è®¤çš„å€¼ä¸º8 \n\nç»“æ„ä½“æ€»å¤§å°ä¸ºæœ€å¤§å¯¹é½æ•°ï¼ˆæ¯ä¸ªæˆå‘˜å˜é‡éƒ½æœ‰ä¸€ä¸ªå¯¹é½æ•°ï¼‰çš„æ•´æ•°å€ã€‚ \n\nå¦‚æœåµŒå¥—äº†ç»“æ„ä½“çš„æƒ…å†µï¼ŒåµŒå¥—çš„ç»“æ„ä½“å¯¹é½åˆ°è‡ªå·±çš„æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€å¤„ã€‚ç»“æ„ä½“çš„æ•´ä½“å¤§å°å°±æ˜¯æ‰€æœ‰æœ€å¤§å¯¹é½æ•°ï¼ˆå«åµŒå¥—ç»“æ„ä½“çš„å¯¹é½æ•°ï¼‰çš„æ•´æ•°å€ã€‚\n\n\n\n\noffsetofå‡½æ•°ï¼šæŸ¥çœ‹ç»“æ„ä½“æˆå‘˜å˜é‡ç›¸å¯¹äºé¦–åœ°å€çš„åç§»é‡\n\n\n\niå˜é‡æ˜¯intç±»å‹ï¼Œ4ä¸ªå­—èŠ‚ï¼Œé»˜è®¤å¯¹é½æ•°æ˜¯8ï¼Œå¯¹é½æ•°æ˜¯4ã€‚C2å˜é‡æ˜¯1ä¸ªå­—èŠ‚ï¼Œå¯¹é½æ•°å°±æ˜¯1ã€‚\n\næ‰€ä»¥int iå°±è¦ä»å†…å­˜çš„4çš„æ•´æ•°å€çš„ä½ç½®å¼€å§‹å­˜æ”¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬5ä¸ªå­—èŠ‚çš„ä½ç½®ã€‚c2åœ¨intåï¼Œåœ¨å¯¹é½æ•°1çš„æ•´æ•°å€çš„ä½ç½®è¿›è¡Œå­˜æ”¾ï¼Œä¹Ÿå°±æ˜¯ç¬¬9ä¸ªå­—èŠ‚çš„ä½ç½®ã€‚\n\nè€Œç»“æ„ä½“çš„æ€»å¤§å°åº”è¯¥æ˜¯æœ€å¤§å¯¹é½æ•°ï¼ˆè¿™é‡Œå°±æ˜¯4ï¼‰çš„æ•´æ•°å€ï¼Œ9å¹¶ä¸æ˜¯4çš„æ•´æ•°å€ï¼Œæ‰€ä»¥ç»“æ„ä½“çš„æ€»å¤§å°åº”ä¸º12ä¸ªå­—èŠ‚\n\n\n\nå¦‚å›¾ï¼Œç»“æ„ä½“çš„3ä¸ªæˆå‘˜åœ¨å†…å­˜ä¸­å­˜æ”¾å¹¶ä¸æ˜¯å®Œå…¨è¿ç»­çš„ã€‚char c1å’Œint iä¹‹é—´ç›¸éš”äº†3ä¸ªå­—èŠ‚ï¼Œchar c2åè¿˜ç©ºå‡ºäº†3ä¸ªå­—èŠ‚ã€‚\n\nç‰¹æ®Šæƒ…å†µï¼šæ•°ç»„\nstruct Stu &#123;\tint i;    //4  4,8 - 4    char c[5];\t//5  1,8 - 1&#125;;\n\næ•°ç»„åœ¨è®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œæ˜¯çœ‹å•ä¸ªå…ƒç´ çš„å¤§å°ï¼Œè€Œä¸æ˜¯çœ‹æ•´ä¸ªæ•°ç»„çš„å¤§å°ã€‚\n\nchar c[5]æ•°ç»„å 5ä¸ªå­—èŠ‚\nè®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œç”¨charç±»å‹çš„1ä¸ªå­—èŠ‚å’Œ8å¯¹æ¯”ï¼Œå¯¹é½æ•°æ˜¯1\n\n ï¼ˆè¯·å¿½ç•¥å›¾ä¸­charæ•°ç»„çš„ä¸‹æ ‡ï¼‰\n\n\né‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦å†…å­˜å¯¹é½å‘¢ï¼Ÿ\n\nå¹³å°åŸå› (ç§»æ¤åŸå› )ï¼š ä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶å¹³å°éƒ½èƒ½è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®çš„ï¼›æŸäº›ç¡¬ä»¶å¹³å°åªèƒ½åœ¨æŸäº›åœ°å€å¤„å–æŸäº›ç‰¹å®šç±»å‹çš„æ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºç¡¬ä»¶å¼‚å¸¸ã€‚\n\næ€§èƒ½åŸå› ï¼š æ•°æ®ç»“æ„(å°¤å…¶æ˜¯æ ˆ)åº”è¯¥å°½å¯èƒ½åœ°åœ¨è‡ªç„¶è¾¹ç•Œä¸Šå¯¹é½ã€‚ åŸå› åœ¨äºï¼Œä¸ºäº†è®¿é—®æœªå¯¹é½çš„å†…å­˜ï¼Œå¤„ç†å™¨éœ€è¦ä½œä¸¤æ¬¡å†…å­˜è®¿é—®ï¼›è€Œå¯¹é½çš„å†…å­˜è®¿é—®ä»…éœ€è¦ä¸€æ¬¡è®¿ é—®ã€‚\n\n\n\nåœ¨è®¾è®¡ç»“æ„ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå ç”¨ç©ºé—´å°çš„ç»“æ„ä½“æˆå‘˜å°½é‡æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥å‡å°ç»“æ„ä½“æ‰€å çš„ç©ºé—´\n\n\n1.6ä¿®æ”¹é»˜è®¤å¯¹é½æ•°æˆ‘ä»¬å¯ä»¥åˆ©ç”¨#pragmaé¢„å¤„ç†æŒ‡ä»¤æ¥æ›´æ”¹é»˜è®¤å¯¹é½æ•°\n#pragma pack(1)//è®¾ç½®é»˜è®¤å¯¹é½æ•°ä¸º1struct S2&#123; char c1; int i; char c2;&#125;;#pragma pack()//å–æ¶ˆè®¾ç½®çš„é»˜è®¤å¯¹é½æ•°ï¼Œè¿˜åŸä¸ºé»˜è®¤\n\n\n\n1.7ç»“æ„ä½“ä¼ å‚struct S&#123; int data[1000]; int num;&#125;;struct S s = &#123;&#123;1,2,3,4&#125;, 1000&#125;;//ç»“æ„ä½“ä¼ å‚void print1(struct S s)&#123; printf(&quot;%d\\n&quot;, s.num);&#125;//ç»“æ„ä½“åœ°å€ä¼ å‚void print2(struct S* ps)&#123; printf(&quot;%d\\n&quot;, ps-&gt;num);&#125;int main()&#123; print1(s);  //ä¼ ç»“æ„ä½“ print2(&amp;s); //ä¼ åœ°å€ return 0;&#125;\n\nåœ¨ç»“æ„ä½“ä¼ å‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ€å¥½ä¼ ç»“æ„ä½“çš„åœ°å€ã€‚\n\nå‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œå‚æ•°æ˜¯éœ€è¦å‹æ ˆï¼Œä¼šæœ‰æ—¶é—´å’Œç©ºé—´ä¸Šçš„ç³»ç»Ÿå¼€é”€ã€‚ å¦‚æœä¼ é€’ä¸€ä¸ªç»“æ„ä½“å¯¹è±¡çš„æ—¶å€™ï¼Œç»“æ„ä½“è¿‡å¤§ï¼Œå‚æ•°å‹æ ˆçš„çš„ç³»ç»Ÿå¼€é”€æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æ€§èƒ½çš„ä¸‹é™ã€‚\n\n\n\n2.ä½æ®µä½ç«¯æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»“æ„ä½“\n2.1ä»€ä¹ˆæ˜¯ä½æ®µ?\nä½æ®µçš„å£°æ˜å’Œç»“æ„æ˜¯ç±»ä¼¼çš„ï¼Œæœ‰ä¸¤ä¸ªä¸åŒï¼š\n1.ä½æ®µçš„æˆå‘˜å¿…é¡»æ˜¯ intã€unsigned int æˆ–signed int \n2.ä½æ®µçš„æˆå‘˜ååè¾¹æœ‰ä¸€ä¸ªå†’å·å’Œä¸€ä¸ªæ•°å­—ã€‚\n\nstruct A&#123; int _a:2; int _b:5; int _c:10; int _d:30;&#125;;\n\næˆå‘˜ååçš„æ•°å­—è¡¨ç¤ºï¼Œè¯¥æˆå‘˜éœ€è¦å‡ ä¸ªæ¯”ç‰¹çš„ç©ºé—´æ¥å­˜å‚¨\n\nåœ¨ç»“æ„ä½“å†…ï¼Œæœ€å°çš„æˆå‘˜charç±»å‹éƒ½éœ€è¦1ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚ä½†æœ‰äº›æ•°æ®å¹¶ä¸éœ€è¦1ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ä½æ®µæ¥å‡å°‘ç©ºé—´å ç”¨\n\nint _a:2;//2bit - 00 01 10 11 -å››ç§æƒ…å†µ\n\nä½ç«¯çš„å¤§å°å¦‚ä¸‹ï¼šå…ˆæ˜¯å¼€è¾Ÿ4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè¿›è¡Œaã€bã€cçš„è¿ç»­å­˜æ”¾ã€‚å­˜æ”¾å®Œæ¯•åè¿˜å‰©15ä¸ªbitçš„ç©ºé—´ï¼Œä¸å¤Ÿå­˜æ”¾dçš„30ä¸ªbitï¼Œæ‰€ä»¥å¼€è¾Ÿäº†ç¬¬äºŒä¸ª4ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾æˆå‘˜d\n\n\n2.2ä½æ®µåœ¨å†…å­˜ä¸­çš„å­˜å‚¨\nä½æ®µçš„æˆå‘˜å¯ä»¥æ˜¯ int unsigned int signed int æˆ–è€…æ˜¯ char ï¼ˆå±äºæ•´å½¢å®¶æ—ï¼‰ç±»å‹ \n\nä½æ®µçš„ç©ºé—´ä¸Šæ˜¯æŒ‰ç…§éœ€è¦ä»¥4ä¸ªå­—èŠ‚ï¼ˆ int ï¼‰æˆ–è€…1ä¸ªå­—èŠ‚ï¼ˆ char ï¼‰çš„æ–¹å¼æ¥å¼€è¾Ÿçš„\n\nä½æ®µæ¶‰åŠå¾ˆå¤šä¸ç¡®å®šå› ç´ ï¼Œä½æ®µæ˜¯ä¸è·¨å¹³å°çš„ï¼Œæ³¨é‡å¯ç§»æ¤çš„ç¨‹åºåº”è¯¥é¿å…ä½¿ç”¨ä½æ®µ\n\n\n\n//ä¸€ä¸ªä¾‹å­struct S&#123; char a:3; char b:4; char c:5; char d:4;&#125;;struct S s = &#123;0&#125;;s.a = 10;//1010-æˆªæ–­-010s.b = 12;//1100-å®Œæ•´ä¿å­˜-1100s.c = 3;//0011-å‰è¡¥0-00011s.d = 4;//0100-å®Œæ•´ä¿å­˜-0100\n\n\naå’Œbå ä¸€ä¸ªå­—èŠ‚\ncå ç‹¬ç«‹çš„ä¸€ä¸ªå­—èŠ‚\ndå ä¸€ä¸ªå­—èŠ‚\n\nå®ƒåœ¨å†…å­˜ä¸­çš„å­˜å‚¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n2.3ä½æ®µçš„è·¨å¹³å°é—®é¢˜åœ¨ä¸åŒç¼–è¯‘å™¨ä¸‹ï¼Œä½æ®µçš„å­˜å‚¨æ–¹å¼ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒ\n\n\nint ä½æ®µè¢«å½“æˆæœ‰ç¬¦å·æ•°è¿˜æ˜¯æ— ç¬¦å·æ•°æ˜¯ä¸ç¡®å®šçš„ã€‚\nä½æ®µä¸­æœ€å¤§ä½çš„æ•°ç›®ä¸èƒ½ç¡®å®šï¼ˆ16ä½æœºå™¨æœ€å¤§16ï¼Œ32ä½æœºå™¨æœ€å¤§32ï¼Œå†™æˆ27ï¼Œåœ¨16ä½æœºå™¨ä¼šå‡ºé—®é¢˜ï¼‰\nä½æ®µä¸­çš„æˆå‘˜åœ¨å†…å­˜ä¸­ä»å·¦å‘å³åˆ†é…ï¼Œè¿˜æ˜¯ä»å³å‘å·¦åˆ†é… æ ‡å‡†å°šæœªå®šä¹‰\nå½“ä¸€ä¸ªç»“æ„åŒ…å«ä¸¤ä¸ªä½æ®µï¼Œç¬¬äºŒä¸ªä½æ®µæˆå‘˜æ¯”è¾ƒå¤§ï¼Œæ— æ³•å®¹çº³äºç¬¬ä¸€ä¸ªä½æ®µå‰©ä½™çš„ä½æ—¶ï¼Œæ˜¯èˆå¼ƒå‰©ä½™çš„ä½è¿˜æ˜¯åˆ©ç”¨ï¼Œè¿™æ˜¯ä¸ç¡®å®šçš„\n\n\nè·Ÿç»“æ„ä½“ç›¸æ¯”ï¼Œä½æ®µå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œè¿˜èƒ½å¾ˆå¥½çš„èŠ‚çœç©ºé—´ï¼Œä½†æ˜¯æœ‰è·¨å¹³å°çš„é—®é¢˜å­˜åœ¨ã€‚\n2.4ä½æ®µçš„åº”ç”¨åœ¨äº’è”ç½‘ä¸­ï¼Œæ•°æ®åœ¨æœåŠ¡å™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’çš„æ—¶å€™ï¼Œä¼šå‚ç…§ä»¥ä¸‹çš„èŒƒå¼ã€‚\nå›¾é‡Œçš„4ä½(4bit)ç‰ˆæœ¬å·å’Œé¦–éƒ¨é•¿åº¦ï¼Œä»¥åŠ3ä½æ ‡å¿—ï¼Œéƒ½æ²¡æœ‰è¾¾åˆ°1ä¸ªå­—èŠ‚çš„å¤§å°ã€‚è¿™æ—¶å€™å¦‚æœç”¨ç»“æ„ä½“æ¥ä¿å­˜ï¼Œå°±ä¼šå­˜åœ¨è¾ƒå¤§çš„ç©ºé—´æµªè´¹ï¼Œä»è€ŒåŠ å¤§æœåŠ¡å™¨çš„å‹åŠ›ã€‚\nè¿™æ—¶å€™å°±é€‚åˆé‡‡ç”¨ä½æ®µæ¥å­˜å‚¨è¿™æ ·çš„å†…å®¹ï¼ŒèŠ‚çœç©ºé—´ã€‚\n\n\n3.æšä¸¾\næšä¸¾çš„æ„æ€æ˜¯ä¸€ä¸€åˆ—ä¸¾\n\nåœ¨ç”Ÿæ´»ä¸­æœ‰ä¸€äº›äº‹ç‰©çš„ç±»å‹æ˜¯å¯ä»¥ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥çš„ï¼ˆæœ‰é™çš„ï¼‰ã€‚\næ¯”å¦‚ï¼šäººçš„æ€§åˆ«ã€æ˜ŸæœŸã€12ä¸ªæœˆã€‚\nåœ¨Cè¯­è¨€ä¸­ï¼Œå°±å¯ä»¥ç”¨æšä¸¾ç±»å‹æ¥å®šä¹‰è¿™ç§æœ‰é™çš„å…ƒç´ \n3.1æšä¸¾ç±»å‹çš„å®šä¹‰enum Day//æ˜ŸæœŸ&#123; Mon, Tues, Wed, Thur, Fri, Sat, Sun&#125;;enum Sex//æ€§åˆ«&#123; MALE, FEMALE, SECRET&#125;ï¼›\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæšä¸¾ç±»å‹å’Œç»“æ„ä½“æ˜¯ä¸åŒçš„ã€‚\n\n&#123; &#125;ä¸­çš„å†…å®¹æ˜¯æšä¸¾ç±»å‹çš„å¯èƒ½å–å€¼ï¼Œä¹Ÿå«æšä¸¾å¸¸é‡ \n\næšä¸¾ç±»å‹ä»£è¡¨å…·ä½“çš„æ•°å€¼ã€‚é»˜è®¤æ˜¯ä»0å¼€å§‹ï¼Œä»¥1é€’å¢ã€‚\n\næšä¸¾ç±»å‹å¯ä»¥ç”¨æ¥æ›¿ä»£æ•°å€¼\n\n\næ¯”å¦‚åœ¨dayçš„æšä¸¾ç±»å‹é‡Œé¢ï¼Œæ¯ä¸€ä¸ªå…ƒç´ åˆ†åˆ«ä»£è¡¨ä¸€ä¸ªæ•°å­—ã€‚é»˜è®¤æ˜¯ä»0å¼€å§‹ï¼Œä»¥1é€’å¢ã€‚\nenum Day//æ˜ŸæœŸ&#123; Mon,//0 Tues,//1 Wed,//2 Thur,//3 Fri,//4 Sat,//5 Sun//6&#125;;\n\næˆ‘ä»¬åœ¨å®šä¹‰çš„æ—¶å€™ä¹Ÿå¯ä»¥èµ‹åˆå€¼\nenum Color//é¢œè‰²&#123; RED=1, GREEN=2, BLUE=4&#125;;\n\nå¦‚æœä½ åªå¯¹å…¶ä¸­ä¸€ä¸ªå¸¸é‡èµ‹å€¼äº†ï¼Œåé¢çš„å¸¸é‡ä¹Ÿæ˜¯ä»¥1é€’å¢çš„\nenum Day//æ˜ŸæœŸ&#123; Mon,//0 Tues,//1 Wed=5,//5 Thur,//6 Fri,//7 Sat,//8 Sun//9&#125;;\n\n3.2æšä¸¾çš„ä¼˜ç‚¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ #define å®šä¹‰å¸¸é‡ï¼Œä¸ºä»€ä¹ˆéè¦ä½¿ç”¨æšä¸¾ï¼Ÿ \næšä¸¾çš„ä¼˜ç‚¹ï¼š \n\nå¢åŠ ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ \nå’Œ#defineå®šä¹‰çš„æ ‡è¯†ç¬¦æ¯”è¾ƒæšä¸¾æœ‰ç±»å‹æ£€æŸ¥ï¼Œæ›´åŠ ä¸¥è°¨ã€‚ \né˜²æ­¢äº†å‘½åæ±¡æŸ“ï¼ˆç”¨äº†&#123; &#125;å°è£…ï¼‰ \nä¾¿äºè°ƒè¯•\nä½¿ç”¨æ–¹ä¾¿ï¼Œä¸€æ¬¡å¯ä»¥å®šä¹‰å¤šä¸ªå¸¸é‡\n\nå…¶ä¸­ç¬¬å››ç‚¹çš„å†…å®¹è§ä¸‹å›¾ï¼š\n\n\n3.3æšä¸¾çš„ä½¿ç”¨enum Color//é¢œè‰²&#123; RED=1, GREEN=2, BLUE=4&#125;;//åœ¨å®šä¹‰å®Œæšä¸¾å¸¸é‡ä¹‹åï¼Œæ— æ³•åœ¨å¤–éƒ¨è¿›è¡Œæ›´æ”¹ï¼RED=3,//errenum Color clr = GREEN;//åªèƒ½æ‹¿æšä¸¾å¸¸é‡ç»™æšä¸¾å˜é‡èµ‹å€¼ï¼Œæ‰ä¸ä¼šå‡ºç°ç±»å‹çš„å·®å¼‚ã€‚clr = 5; //err\n\n\nenum Coloré‡Œé¢çš„å†…å®¹æ˜¯æšä¸¾å¸¸é‡\nenum Color clræ˜¯ä¸€ä¸ªæšä¸¾å˜é‡\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ ç”¨æ•°å­—ç»™æšä¸¾å˜é‡èµ‹å€¼ï¼Œåœ¨.cæ–‡ä»¶ä¸‹ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åœ¨.cppæ–‡ä»¶ä¸‹ä¼šæŠ¥é”™\n\nCPPæ–‡ä»¶çš„è¯­æ³•æ£€æŸ¥æ›´ä¸¥æ ¼ï¼\n\n\n\né‚£ä¹ˆï¼Œå¦‚ä½•æ—¥å¸¸ä½¿ç”¨ä¸­åº”ç”¨æšä¸¾ç±»å‹å‘¢ï¼Ÿ\n\nåœ¨è®¡ç®—å™¨çš„ä»£ç ä¸­ğŸ‘‰ã€åšå®¢é“¾æ¥ã€‘\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨æšä¸¾å¸¸é‡æ¥æ›¿ä»£å¹²å·´å·´çš„case 0ã€case 1ç­‰ç­‰\n//è¿™åªæ˜¯ä¸ªç¤ºä¾‹//è¯¦ç»†ä»£ç è§ä¹‹å‰çš„åšå®¢enum Options&#123; \tEXIT,//0 \tADD,//1    SUB,//2    MUL,//3    DIV//4&#125;;void menu()&#123;\tprintf(&quot;**********************************\\n&quot;);\tprintf(&quot;*****  1. add     2. sub     *****\\n&quot;);\tprintf(&quot;*****  3. mul     4. div     *****\\n&quot;);\tprintf(&quot;*****  0. exit               *****\\n&quot;);\tprintf(&quot;**********************************\\n&quot;);&#125;int main()&#123;\tint input = 0;\tint x = 0;\tint y = 0;\tint ret = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase ADD:         //ç”¨æšä¸¾ç±»å‹ä»£æ›¿åŸæœ¬çš„æ•°å­—ï¼Œå¢å¼ºä»£ç å¯è¯»æ€§\t\t\tbreak;\t\tcase SUB:\t\t\tbreak;\t\tcase MUL:\t\t\tbreak;\t\tcase DIV:\t\t\tbreak;\t\tcase EXIT:\t\t\tprintf(&quot;é€€å‡ºè®¡ç®—å™¨\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\n\n\n4.è”åˆä½“4.1è”åˆç±»å‹çš„å®šä¹‰è”åˆä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„è‡ªå®šä¹‰ç±»å‹\nè¿™ç§ç±»å‹å®šä¹‰çš„å˜é‡ä¹ŸåŒ…å«ä¸€ç³»åˆ—çš„æˆå‘˜ï¼Œç‰¹å¾æ˜¯è¿™äº›æˆå‘˜å…¬ç”¨åŒä¸€å—ç©ºé—´ï¼ˆæ‰€ä»¥è”åˆä¹Ÿå«å…±ç”¨ä½“ï¼‰\n//è”åˆç±»å‹çš„å£°æ˜union Un&#123; char c; int i;&#125;;//è”åˆå˜é‡çš„å®šä¹‰union Un un;\n\nå½“æˆ‘ä»¬è®¡ç®—è¿™ä¸ªè”åˆä½“çš„å¤§å°çš„æ—¶å€™ï¼Œå‘ç°å®ƒåªæœ‰4ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸æ˜¯5ä¸ªå­—èŠ‚ã€‚\nè€Œä¸”char cå’Œint iå…ƒç´ çš„èµ·å§‹åœ°å€ç›¸åŒï¼Œè¿™è¯´æ˜å®ƒä»¬æ˜¯å…¬ç”¨è¿™4ä¸ªå­—èŠ‚çš„ç©ºé—´çš„ã€‚\n\n4.2è”åˆä½“çš„ç‰¹ç‚¹\nè”åˆçš„æˆå‘˜æ˜¯å…±ç”¨åŒä¸€å—å†…å­˜ç©ºé—´çš„ï¼Œè¿™æ ·ä¸€ä¸ªè”åˆå˜é‡çš„å¤§å°ï¼Œè‡³å°‘æ˜¯æœ€å¤§æˆå‘˜çš„å¤§å°\nï¼ˆå› ä¸ºè”åˆè‡³å°‘å¾—æœ‰èƒ½åŠ›ä¿å­˜æœ€å¤§çš„é‚£ä¸ªæˆå‘˜ï¼‰\n\nunion Un&#123; int i; char c;&#125;;union Un un;//ä¸‹é¢è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿun.i = 0x11223344;un.c = 0x55;printf(&quot;%x\\n&quot;, un.i);\n\n\n4.3ç”¨è”åˆä½“åˆ¤æ–­å¤§å°ç«¯\nåœ¨ä¹‹å‰æ•°æ®å­˜å‚¨çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°äº†ä»€ä¹ˆæ˜¯ç¼–è¯‘å™¨çš„å¤§å°ç«¯ï¼Œå¹¶å†™äº†ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å½“å‰ç¼–è¯‘å™¨çš„å¤§å°ç«¯ğŸ‘‰é“¾æ¥\n\n#include &lt;stdio.h&gt;int check_sys()&#123;\tint a=1;\tchar*p=(char*)&amp;a;\tif(1==*p)\t\treturn 1;\telse\t\treturn 0;\t\t&#125;int main()&#123;\tint b=check_sys(); \tif(1==b)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);    \treturn 0; &#125; \n\n\nå°†intç±»å‹åœ°å€å¼ºåˆ¶è½¬æ¢æˆchar*ç±»å‹\n\nå¦‚æœæ˜¯å°ç«¯ï¼Œç¬¬ä¸€ä¸ªåœ°å€æ˜¯01\nå¦‚æœæ˜¯å¤§ç«¯ï¼Œç¬¬ä¸€ä¸ªåœ°å€æ˜¯00\n\n\nä»Šå¤©æˆ‘ä»¬å°±åˆ©ç”¨è”åˆä½“çš„æˆå‘˜åœ¨å†…å­˜ä¸­å…±äº«åŒä¸€ç©ºé—´çš„ç‰¹ç‚¹ï¼Œæ¥æ”¹è¿›è¿™ä¸ªä»£ç ã€‚\nint cheak_sys()&#123;\tunion\t&#123;\t\tchar c;\t\tint i;\t&#125;u;\tu.i = 1;//å°†intç±»å‹æ”¹æˆ1\treturn u.c;//è¿”å›è¯¥ç±»å‹çš„ç¬¬ä¸€ä¸ªå­—èŠ‚&#125;int main()&#123;\tint ret = cheak_sys();\tif (1 == ret)\t\tprintf(&quot;å°ç«¯\\n&quot;);\telse\t\tprintf(&quot;å¤§ç«¯\\n&quot;);\t//å¦‚æœè¿”å›1ï¼Œè¡¨ç¤ºå°ç«¯\t//å¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºå¤§ç«¯\treturn 0;&#125;\n\n\nä½¿ç”¨è”åˆä½“ï¼Œå°±æ— éœ€è¿›è¡ŒæŒ‡é’ˆç±»å‹çš„å¼ºåˆ¶è½¬æ¢\nå¯¹char cç±»å‹çš„å®šä¹‰å¯ä»¥è¦†ç›–æ‰int içš„ç¬¬ä¸€ä¸ªå­—èŠ‚\n\n\n4.4è”åˆä½“åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å’Œç»“æ„ä½“ä¸€æ ·ï¼Œè”åˆä½“ä¹Ÿéœ€è¦è¿›è¡Œå†…å­˜å¯¹é½\n\nè”åˆçš„å¤§å°è‡³å°‘æ˜¯æœ€å¤§æˆå‘˜çš„å¤§å°\nå½“æœ€å¤§æˆå‘˜å¤§å°ä¸æ˜¯æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€çš„æ—¶å€™ï¼Œå°±è¦å¯¹é½åˆ°æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€\n\nunion Un1&#123;\tchar c[5];//5  1,8 - 1\tint i;    //4  4,8 - 4&#125;;union Un2&#123;\tshort c[7];//14  2,8-2\tint i;     //4   4,8-4&#125;;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè”åˆä½“åœ¨è®¡ç®—å¯¹é½æ•°çš„æ—¶å€™ï¼Œæ•°ç»„æ˜¯æŒ‰ä¸€ä¸ªå…ƒç´ çš„å¤§å°è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯ä»¥æ•´ä¸ªæ•°ç»„çš„å¤§å°è¿›è¡Œè®¡ç®—ï¼ï¼ˆè¿™ä¸€ç‚¹å’Œç»“æ„ä½“æ˜¯ä¸€æ ·çš„ï¼‰\n\nUn2ä¸­shortæ•°ç»„çš„å¯¹é½æ•°ï¼š\n\nshort c[7]ä¸€å…±14ä¸ªå­—èŠ‚\næ¯ä¸ªå…ƒç´ æ˜¯2ä¸ªå­—èŠ‚\né»˜è®¤å¯¹é½æ•°æ˜¯8\næ‰€ä»¥å®ƒçš„å¯¹é½æ•°æ˜¯2\n\n\n\nä»¥Un1ä¸ºä¾‹ï¼Œå®ƒåœ¨å†…å­˜é‡Œçš„å­˜å‚¨æ–¹å¼å¦‚å›¾ (è¯·å¿½ç•¥å›¾ä¸­charæ•°ç»„çš„ä¸‹æ ‡)\n\nchar c[5]å’Œint iç±»å‹å…±ç”¨å‰5ä¸ªå­—èŠ‚ï¼ˆå…¶ä¸­int iå 4ä¸ªå­—èŠ‚ï¼‰\nå› ä¸ºéœ€è¦å¯¹é½åˆ°æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€ï¼Œæ‰€ä»¥å¤§å°æ˜¯8\n\n\n\nç»“è¯­è‡ªå®šä¹‰ç±»å‹çš„å†…å®¹éå¸¸ä¸°å¯Œ\nä½ å­¦ä¼šäº†å—ï¼Ÿ\n\nç å­—ä¸æ˜“ï¼Œè‹¥æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå‘—ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","è‡ªå®šä¹‰ç±»å‹"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¸ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°å’Œå†…å­˜å‡½æ•°","url":"/posts/2065508655/","content":"[TOC]\nä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€äº›æ–°çš„å­—ç¬¦ä¸²å‡½æ•°å’Œå†…å­˜å‡½æ•°ï¼Œäº†è§£å®ƒä»¬èƒŒåè¿è¡Œçš„åŸç†ï¼Œå¹¶å®Œæˆéƒ¨åˆ†å‡½æ•°çš„è‡ªæˆ‘å®ç°ğŸ˜˜\n1.å­—ç¬¦ä¸²å‡½æ•°1.1 strlenè¿™ä¸ªå‡½æ•°æˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®¡ç®—å­—ç¬¦ä¸²çš„å¤§å°ï¼Œä»¥\\0ä½œä¸ºç»“å°¾\næ¨¡æ‹Ÿå®ç°å¦‚ä¸‹ï¼š\n//1.strlenæ¨¡æ‹Ÿå®ç°int my_strlen(char* p)&#123;\tassert(p);\tint count = 0;\twhile (*p)\t&#123;\t\tcount++;\t\tp++;\t&#125;\treturn count;&#125;int main()&#123;\tchar arr[] = &#123; &quot;abcdef&quot; &#125;;\tint sz = my_strlen(arr);\tprintf(&quot;sz=%d\\n&quot;, sz);\treturn 0;&#125;\n\nassertï¼šæ–­è¨€ï¼Œåº“å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºä¼šæŠ¥é”™\n\n1.2 strcpyè¯¥å‡½æ•°ç”¨äºæ‹·è´å­—ç¬¦ä¸²ï¼Œå°†arr2é‡Œçš„å†…å®¹æ‹·è´åˆ°arr1é‡Œ\nchar* strcpy(char * destination, const char * source );//æ—¥å¸¸ä½¿ç”¨strcpy(arr1,arr2);\n\nå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹\n\nCopies the C string pointed by source into the array pointed by destination, including the  terminating null character (and stopping at that point).\n\n\næºå­—ç¬¦ä¸²å¿…é¡»ä»¥ â€˜\\0â€™ ç»“æŸ\nä¼šå°†æºå­—ç¬¦ä¸²ä¸­çš„ â€˜\\0â€™ æ‹·è´åˆ°ç›®æ ‡ç©ºé—´ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥ç¡®ä¿èƒ½å­˜æ”¾æºå­—ç¬¦ä¸²ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»å¯ä¿®æ”¹\n\nå¦‚æœæºå­—ç¬¦ä¸²é‡Œæ²¡æœ‰\\0ï¼Œè¯¥å‡½æ•°å°±æ— æ³•æ­£ç¡®è¿›è¡Œæ‹·è´\n\nstrcpyæ‹·è´çš„æ—¶å€™æ˜¯å¤åˆ¶è€Œä¸æ˜¯å‰ªè´´ï¼Œæºç©ºé—´é‡Œçš„å†…å®¹ä¸ä¼šæ¶ˆå¤±\n\nä»¥ä¸‹æ¨¡æ‹Ÿå®ç°\néœ€è¦æ³¨æ„çš„å°±æ˜¯strcpyä¼šå°†æºå­—ç¬¦ä¸²çš„â€™\\0â€™ä¸€å¹¶æ‹·è´ï¼Œæ‰€ä»¥åœ¨ç¼–å†™åˆ¤æ–­æ¡ä»¶çš„æ—¶å€™å°±è¦è€ƒè™‘åˆ°è¿™ä¸ªæƒ…å†µ\n//2.strcpyæ¨¡æ‹Ÿå®ç°ï¼Œæ‹·è´char* my_strcpy(char* a2, const char* a1)&#123;\tchar* dest = a2;\tassert(a1 &amp;&amp; a2);\tdo\t&#123;\t\t*a2++ = *a1;\t&#125; while (*a1++);\treturn dest;&#125;int main()&#123;\tchar arr1[] = &#123; &quot;abcdef&quot; &#125;;\tchar arr2[15]=&quot;xxxxxxxxx&quot;;\tmy_strcpy(arr2, arr1);\tputs(arr2);\treturn 0;&#125;\n\n\n1.3 strcatstrcatå‡½æ•°ç”¨äºè¿½åŠ å­—ç¬¦ä¸²ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²æ¥åœ¨ä¸€èµ·\nå…¶å‡½æ•°è¿”å›å€¼ä¸ºdest\nchar * strcat ( char * destination, const char * source );//ä»¥ä¸‹æ˜¯ä½¿ç”¨char arr1[10] = &quot;hello&quot;;char arr2[] = &quot;bit&quot;;strcat(arr1,arr2);puts(arr1);//ç»“æœä¸º&quot;hellobit&quot;\n\n\næºå­—ç¬¦ä¸²å¿…é¡»ä»¥ â€˜\\0â€™ ç»“æŸã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»æœ‰è¶³å¤Ÿçš„å¤§ï¼Œèƒ½å®¹çº³ä¸‹æºå­—ç¬¦ä¸²çš„å†…å®¹ã€‚\nç›®æ ‡ç©ºé—´å¿…é¡»å¯ä¿®æ”¹ã€‚\n\næ³¨æ„ï¼Œä½¿ç”¨strcatå‡½æ•°çš„æ—¶å€™ä¸èƒ½è‡ªå·±è¿½åŠ è‡ªå·±ï¼Œç¨‹åºä¼šæ­»å¾ªç¯\n\nä»¥ä¸‹æ˜¯æ¨¡æ‹Ÿå®ç°\n\nå…ˆè®©destæ‰¾åˆ°ç›®çš„åœ°å­—ç¬¦ä¸²é‡Œçš„\\0\nç„¶åè¿›è¡Œè¿½åŠ ï¼Œæ³¨æ„æºå­—ç¬¦ä¸²é‡Œçš„\\0åŒæ ·ä¼šè¢«è¿½åŠ è¿‡å»\n\n//3,strcatå‡½æ•°char* my_strcat(char* dest, const char* sour)&#123;\tassert(dest &amp;&amp; sour);\tchar* ptr = dest;\twhile (*dest)\t&#123;\t\tdest++;\t&#125;\tdo\t&#123;\t\t*dest++ = *sour;\t&#125; while (*sour++);\treturn ptr;&#125;int main()&#123;\tchar arr1[10] = &quot;hello&quot;;\tchar arr2[] = &quot;bit&quot;;\tmy_strcat(arr1, arr2);\tputs(arr1);\treturn 0;&#125;\n\n\n1.4 strcmpstrcmpæˆ‘ä»¬ä¹Ÿæ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼Œç”¨äºæ¯”è¾ƒå­—ç¬¦ä¸²\nint strcmp ( const char * str1, const char * str2 );\n\nè¯¥å‡½æ•°åœ¨æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åœ°æ¯”è¾ƒçš„\n\n\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å¤§äº0çš„æ•°å­—\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ç­‰äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›0\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å°äº0çš„æ•°å­—\n\næ¨¡æ‹Ÿå®ç°\nåœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œå¦‚æœå­—ç¬¦ä¸²s1å¤§äºs2ï¼Œè¿”å›çš„æ˜¯1ã€‚è‹¥å°äºè¿”å›çš„æ˜¯-1ã€‚ä½†Cè¯­è¨€åªè¦æ±‚å¤§äºçš„æ—¶å€™è¿”å›å¤§äº0çš„æ•°å­—ï¼Œå°äºçš„æ—¶å€™è¿”å›å°äº0çš„æ•°å­—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨å­—ç¬¦ç›¸å‡å¾—å‡ºè¿”å›å€¼\n//4.strcmpå‡½æ•°int my_strcmp(const char* str1, const char* str2)&#123;\tassert(str1 &amp;&amp; str2);\twhile(*str1 == *str2)\t&#123;\t\tif (*str1 == &#x27;\\0&#x27;)\t\t&#123;\t\t\treturn 0;\t\t&#125;\t\tstr1++;\t\tstr2++;\t&#125;\treturn *str1 - *str2;&#125;int main()&#123;\tchar arr1[] = &#123; &quot;abcdef&quot; &#125;;\tchar arr2[] = &#123; &quot;abcd&quot; &#125;;\t\tprintf(&quot;%d\\n&quot;,my_strcmp(arr2, arr1));\treturn 0;&#125;\n\n\n1.5 strncpy&#x2F;cat&#x2F;cmpä»¥ä¸Š4ä¸ªåº“å‡½æ•°ï¼Œéƒ½å¯¹æ“ä½œæ•°æ²¡æœ‰è¦æ±‚ã€‚\nè€Œstrncpyã€strncatã€strncmpè¿™ä¸‰ä¸ªåº“å‡½æ•°ï¼Œå¯¹æ“ä½œæ•°æœ‰è¦æ±‚\n\nstrncmpï¼Œæœ€åä¸€ä¸ªå‚æ•°4ï¼Œä»£è¡¨åªå¯¹æ¯”å‰4ä¸ªå­—ç¬¦çš„å¤§å°\n\n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;\tchar arr1[] = &quot;abcwef&quot;;\tchar arr2[] = &quot;abcqqqqqq&quot;;\tint ret = strncmp(arr1, arr2, 4);\tprintf(&quot;%d\\n&quot;, ret);    return 0;&#125;\n\n\n\nstrncatï¼Œæœ€åä¸€ä¸ªå‚æ•°3ï¼Œä»£è¡¨åªè¿½åŠ å‰3ä¸ªå­—ç¬¦åˆ°ç›®çš„åœ°\nstrncpyï¼Œæœ€åä¸€ä¸ªå‚æ•°5ï¼Œä»£è¡¨åªæ‹·è´å‰5ä¸ªå­—ç¬¦åˆ°ç›®çš„åˆ°åº•\n\n\nè¿™ä¸‰ä¸ªå‡½æ•°çš„ç”¨æ³•éå¸¸ç®€å•ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼\n\n1.6 strstrconst char * strstr ( const char * str1, const char * str2 );      char * strstr (       char * str1, const char * str2 );\n\nè¿™ä¸ªå‡½æ•°å°±æ˜¯ç¬¬ä¸€æ¬¡è§äº†ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨å­—ç¬¦ä¸²s1é‡Œé¢æŸ¥æ‰¾æ˜¯å¦æœ‰å­—ç¬¦ä¸²s2\n\nå¦‚æœæœ‰ï¼Œè¿”å›å­—ç¬¦ä¸²s2åœ¨å­—ç¬¦ä¸²s1é‡Œçš„èµ·å§‹åœ°å€\nå¦‚æœæ²¡æœ‰ï¼Œè¿”å›NULL\n\n\næ¨¡æ‹Ÿå®ç°\nstrå‡½æ•°çš„æ¨¡æ‹Ÿå®ç°ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚\næœ€é‡è¦çš„å°±æ˜¯é‡åˆ°å¤šä¸ªå­—ç¬¦ç›¸åŒè€Œæœ€åä¸åŒçš„æƒ…å†µ\n\néœ€è¦ç”¨å¦å¤–ä¸€ä¸ªæŒ‡é’ˆCæ¥éå†å­—ç¬¦ä¸²ï¼Œæ‰¾å¯»Cå’Œptr2æ‰€æŒ‡å…ƒç´ ç›¸ç­‰çš„ç¬¬ä¸€ä¸ªå­—ç¬¦\nç„¶åç”¨ptr1æ¥å’Œptr2æ¯”è¾ƒï¼ŒCä¿æŒä¸å˜\nå¦‚æœåŒ¹é…æˆåŠŸï¼Œè¿”å›CæŒ‡é’ˆ\nå¦‚æœåŒ¹é…å¤±è´¥ï¼ŒC++åèµ‹å€¼ç»™ptr1ï¼Œç»§ç»­è¿›è¡ŒæŸ¥æ‰¾\n\n\n//5.strstr åˆ¤æ–­str1é‡Œé¢æœ‰æ²¡æœ‰str2//å¦‚æœæœ‰ï¼Œè¿”å›str1é‡Œstr2çš„èµ·å§‹åœ°å€//å¦‚æœstr1ä¸åŒ…å«str2ï¼Œè¿”å›nullchar* my_strstr(const char* str1, const char* str2)&#123;\tconst char* s1 = str1;\tconst char* s2 = str2;\tconst char* cur = str1;\tassert(str1 &amp;&amp; str2);\tif (*str2 == &#x27;\\0&#x27;)\t&#123;\t\treturn (char*)str1;\t&#125;\twhile (*cur)\t&#123;\t\ts1 = cur;\t\ts2 = str2;\t\twhile (*s1 &amp;&amp; *s2 &amp;&amp; *s1 == *s2)\t\t&#123;\t\t\ts1++;\t\t\ts2++;\t\t&#125;\t\tif (*s2 == &#x27;\\0&#x27;)\t\t\treturn (char*)cur;\t\tcur++;\t&#125;\treturn NULL;\t\t&#125;int main()&#123;\tchar arr1[15] = &#123; &quot;helloworld&quot; &#125;;\tchar arr2[] = &#123; &quot;owo&quot; &#125;;\tchar* p=strstr(arr1, arr2);\tif (p == NULL)\t&#123;\t\tprintf(&quot;æ‰¾ä¸åˆ°\\n&quot;);\t&#125;\telse\t&#123;\t\tprintf(&quot;%s\\n&quot;, p);\t&#125;\treturn 0;&#125;\n\n\n1.7 strtokè¯¥å‡½æ•°ç”¨äºæŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„åˆ†éš”ç¬¦\nchar * strtok ( char * str, const char * sep );\n\n\nsepå‚æ•°æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†ç”¨ä½œåˆ†éš”ç¬¦çš„å­—ç¬¦é›†åˆ(å¯ä»¥åŒ…å«å¤šä¸ªåˆ†éš”ç¬¦)\n\nç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå®ƒåŒ…å«äº†0ä¸ªæˆ–è€…å¤šä¸ªç”±sepå­—ç¬¦ä¸²ä¸­ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†éš”ç¬¦åˆ†å‰²çš„æ ‡è®°\n\nstrtokå‡½æ•°æ‰¾åˆ°strä¸­çš„ä¸‹ä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶ç”¨\\0ç»“å°¾ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å‘è¿™ä¸ªæ ‡è®°çš„æŒ‡é’ˆ\n\n\n\næ³¨ï¼šstrtokå‡½æ•°ä¼šæ”¹å˜è¢«æ“ä½œçš„å­—ç¬¦ä¸²ï¼ˆæŠŠåˆ†éš”ç¬¦æ”¹ä¸º\\0ï¼‰ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨strtokå‡½æ•°åˆ‡åˆ†çš„å­—ç¬¦ä¸²ä¸€èˆ¬éƒ½æ˜¯ä¸´æ—¶æ‹·è´çš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä¿®æ”¹\n\n\nstrtokå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸º NULLï¼Œå‡½æ•°å°†æ‰¾åˆ°strä¸­ç¬¬ä¸€ä¸ªæ ‡è®°ï¼Œstrtokå‡½æ•°å°†ä¿å­˜å®ƒåœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½®\nstrtokå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º NULLï¼Œå‡½æ•°å°†åœ¨åŒä¸€ä¸ªå­—ç¬¦ä¸²ä¸­è¢«ä¿å­˜çš„ä½ç½®å¼€å§‹ï¼ŒæŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ ‡è®°\nå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸å­˜åœ¨æ›´å¤šçš„æ ‡è®°ï¼Œåˆ™è¿”å› NULL æŒ‡é’ˆ\n\nå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼Œåœ¨åç»­è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å¾€strtokå‡½æ•°é‡Œä¼ å…¥bufï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¼ å…¥NULLï¼Œå› ä¸ºä¼ å…¥NULLçš„æ—¶å€™è¯¥å‡½æ•°ä¼šåœ¨ä¸Šä¸€æ¬¡æ“ä½œçš„å­—ç¬¦ä¸²é‡Œç»§ç»­æŸ¥æ‰¾åˆ†éš”ç¬¦\n\nè¿™æ ·å†™å¾ˆå¤šè¡Œå¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç”¨forå¾ªç¯çš„æ–¹å¼æ¥ç®€åŒ–ä»£ç \n\nforå¾ªç¯çš„ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè®©str&#x3D;strtokç¬¬ä¸€æ¬¡æŸ¥æ‰¾çš„è¿”å›å€¼\nå¦‚æœè¯¥è¿”å›å€¼ä¸ºç©ºï¼ˆæ²¡æ‰¾åˆ°æ›´å¤šçš„åˆ†éš”ç¬¦ï¼‰ï¼Œåœæ­¢å¾ªç¯\nå¦‚æœè¯¥è¿”å›å€¼ä¸ä¸ºç©ºï¼Œå°±è®©str=strtok(NULL, p)ï¼Œç»§ç»­æŸ¥æ‰¾å¹¶æ‰“å°ä¸‹ä¸€éƒ¨åˆ†\n\nint main()&#123;\tconst char* p = &quot;@.&quot;;\tchar arr[] = &quot;zpengwei@yeah.net&quot;;\tchar buf[50] = &#123; 0 &#125;;//&quot;zpengwei@yeah.net&quot;\tstrcpy(buf, arr);\tchar* str = NULL;\tfor (str = strtok(buf, p); str != NULL; str=strtok(NULL, p))\t&#123;\t\tprintf(&quot;%s\\n&quot;, str);\t&#125;    return 0;&#125;\n\n\n\n1.8 strerrorchar * strerror ( int errnum );\n\n\nCè¯­è¨€ä¸­è§„å®šäº†ä¸€éƒ¨åˆ†é”™è¯¯ç ï¼Œè¿™äº›é”™è¯¯ç æœ‰ä»–ä»¬å¯¹åº”çš„é”™è¯¯ä¿¡æ¯\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ¯”è¾ƒç‰¹æ®Šï¼šå°†é”™è¯¯ä»£ç ç¿»è¯‘æˆæç¤ºä¿¡æ¯\n\nerrnoæ˜¯Cè¯­è¨€æä¾›çš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ”¾åœ¨errno.hæ–‡ä»¶ä¸­\nå½“åº“å‡½æ•°ä½¿ç”¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šæŠŠerrnoè¿™ä¸ªå…¨å±€çš„é”™è¯¯å˜é‡è®¾ç½®ä¸ºæœ¬æ¬¡æ‰§è¡Œåº“å‡½æ•°äº§ç”Ÿçš„é”™è¯¯ç \nè¿™æ—¶å€™å¯ä»¥ç”¨strerrorå‡½æ•°å°†errnoé”™è¯¯ç ç¿»è¯‘æˆé”™è¯¯ä¿¡æ¯\n#include &lt;errno.h&gt;//éœ€è¦è°ƒç”¨errno.hå¤´æ–‡ä»¶printf(&quot;%s\\n&quot;, strerror(errno));\n\n\n1.9 strcasecmpè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¯”è¾ƒçš„æ—¶å€™å¿½ç•¥å¤§å°å†™ï¼Œæ³¨æ„å¤´æ–‡ä»¶æ˜¯strings.h\n#include &lt;strings.h&gt;int strcasecmp(const char *s1, const char *s2);int strncasecmp(const char *s1, const char *s2, size_t n);\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªstrncasecmpï¼Œä½œç”¨ç›¸åŒï¼Œä½†æ˜¯æ¯”è¾ƒçš„æ˜¯å‰nä¸ªå­—ç¬¦\nThe strncasecmp() function is similar, except it compares the only first n bytes of s1.\n\nå¯ä»¥é€šè¿‡ä»£ç æµ‹è¯•çœ‹å‡ºstrcmpå’Œstrcasecmpä¸¤ä¸ªå‡½æ•°çš„åŒºåˆ«\nvoid test_cmp()&#123;    char str1[] = &quot;abc&quot;;    char str2[] = &quot;ABC&quot;;    printf(&quot;strcmp:     %d\\n&quot;, strcmp(str1, str2));    printf(&quot;strcasecmp: %d\\n&quot;, strcasecmp(str1, str2));&#125;\n\nè¿è¡Œ\nstrcmp:     32strcasecmp: 0\n\nå› ä¸ºå°å†™è‹±æ–‡å­—æ¯çš„asciiç å¤§äºå¤§å†™è‹±æ–‡å­—æ¯ï¼Œæ‰€ä»¥strcmpçš„ç»“æœå¤§äº0ï¼Œè€Œstrcasecmpå¿½ç•¥äº†å¤§å°å†™ï¼Œè¿”å›0ä»£è¡¨äºŒè€…ç›¸åŒ\n\n2.å†…å­˜å‡½æ•°2.1 memcpyè¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¹Ÿæ˜¯æ‹·è´å†…å®¹ï¼Œå’Œstrcpyä¸åŒï¼Œmemcpyå¯ä»¥æ‹·è´ä»»æ„ç±»å‹\nvoid * memcpy ( void * destination, const void * source, size_t num );\n\n\nå‡½æ•°memcpyä»sourceçš„ä½ç½®å¼€å§‹å‘åå¤åˆ¶numä¸ªå­—èŠ‚çš„æ•°æ®åˆ°destinationçš„å†…å­˜ä½ç½®\nè¯¥å‡½æ•°åœ¨é‡åˆ° â€˜\\0â€™ çš„æ—¶å€™å¹¶ä¸ä¼šåœä¸‹æ¥\nå¦‚æœsourceå’Œdestinationæœ‰ä»»ä½•çš„é‡å ï¼Œå¤åˆ¶çš„ç»“æœéƒ½æ˜¯æœªå®šä¹‰çš„\n\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹\n\næ¨¡æ‹Ÿå®ç°\nåœ¨ä¹‹å‰çš„qsortå¿«é€Ÿæ’åºå‡½æ•°çš„æ¨¡æ‹Ÿå®ç°é‡Œé¢ï¼Œæˆ‘ä»¬æ¥è§¦åˆ°äº†void*æŒ‡é’ˆï¼Œä»¥åŠç”¨char*æŒ‡é’ˆæ¥è¿›è¡Œå•ä¸ªå­—èŠ‚è®¿é—®çš„æ¨¡æ‹Ÿæ–¹æ³•\nåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨void*æŒ‡é’ˆè¿›è¡Œæ•°æ®çš„æ‹·è´\n\nè¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹void*æŒ‡é’ˆè¿›è¡Œ++ï¼Œè€Œè¦å°†å…¶å¼ºåˆ¶ç±»å‹è½¬æ¢æˆchar*æŒ‡é’ˆå+1\n\n////1.memcpyæ¨¡æ‹Ÿå®ç°void* my_memcpy(void* dest, const void* sour, int num)&#123;\tassert(dest &amp;&amp; sour);\tvoid* ptr = dest;\twhile (num--)\t&#123;\t\t*(char*)dest = *(char*)sour;\t\tdest = (char*)dest + 1;\t\tsour = (char*)sour + 1;\t&#125;\treturn ptr;&#125;int main()&#123;\tint arr1[10] = &#123; 1,2,4,5,9,7,8 &#125;;\tint arr2[10] = &#123; 0 &#125;;\tmy_memcpy(arr2, arr1, 5 * sizeof(int));\tfor (int i = 0; i &lt; 5; i++)\t&#123;\t\tprintf(&quot;%d &quot;, arr2[i]);\t&#125;\treturn 0;&#125;\n\n\n2.2 memmovevoid * memmove ( void * destination, const void * source, size_t num );\n\nè¿™ä¸ªå‡½æ•°å’Œmemcpyçš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼Œåªæœ‰ä¸€ç‚¹ä¸åŒ\n\nmemmoveåœ¨æ‹·è´çš„æ—¶å€™ï¼Œæºåœ°å€å’Œç›®çš„åœ°å¯ä»¥é‡å \n\nå¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥å°†arr1æ•°ç»„çš„ä¸€éƒ¨åˆ†æ‹·è´å›è¯¥æ•°ç»„é‡Œé¢\n\nä½†å¦‚æœä½ æµ‹è¯•ä¸€ä¸‹ï¼Œå°±ä¼šå‘ç°vsç¼–è¯‘å™¨ä¸‹memcpyä¹Ÿæ˜¯èƒ½å¤Ÿæ‹·è´å†…å­˜é‡å çš„æ•°æ®çš„\n\nCè¯­è¨€å¹¶æ²¡æœ‰å¯¹memcpyå‡½æ•°åšå‡ºå¦‚ä¸‹è¦æ±‚ï¼Œéƒ¨åˆ†ç¼–è¯‘å™¨çš„memcpyå¯èƒ½å°±ä¸æ”¯æŒè¿™æ ·æ“ä½œ\nä¸ºäº†é¿å…å‡ºé”™ï¼Œæˆ‘ä»¬åœ¨æ‹·è´å†…å­˜é‡å æ•°æ®çš„æ—¶å€™æœ€å¥½ä½¿ç”¨memmoveå‡½æ•°\n\n\næ¨¡æ‹Ÿå®ç°\nåœ¨ç¼–å†™è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ‹·è´çš„é¡ºåº\nå¦‚æœé‡å éƒ¨åˆ†è¿˜æ˜¯ä»å‰å‘åæ‹·è´çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°åé¢çš„å†…å®¹è¢«å‰é¢æ‹·è´æ¥çš„æ•°æ®ç¯¡æ”¹ï¼Œç»“æœä¸ç¬¦åˆè¦æ±‚çš„æƒ…å†µ\n\nå®ç°æ€è·¯æ˜¯ï¼Œå¦‚æœèµ·å§‹åœ°å€å¤§åˆ™ä»åå¾€å‰å¤åˆ¶ï¼Œå¦‚æœèµ·å§‹åœ°å€å°åˆ™ä»å‰å¾€åå¤åˆ¶ï¼š\n\nå¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ°åœ¨æºåœ°å€çš„åé¢ï¼Œå°±åº”è¯¥ä»åå‘å‰æ‹·è´ï¼Œé¿å…æ•°æ®è¢«æ”¹å†™ï¼›\nå¦‚æœæˆ‘ä»¬çš„ç›®çš„åœ°åœ¨æºåœ°å€çš„å‰é¢ï¼Œå°±åº”è¯¥ä»å‰å‘åæ‹·è´ï¼›\n\nè¿™é‡Œçš„å‰&#x2F;åéƒ½æ˜¯æŒ‡æœ‰é‡å çš„æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰é‡å ï¼Œä»å‰å¾€å&#x2F;ä»åå¾€å‰éƒ½ä¸å½±å“\n\næœ€ç»ˆçš„å‡½æ•°æ¨¡æ‹Ÿå¦‚ä¸‹\nvoid* my_memmove(void* dest, const void* sour, int num)&#123;\tassert(dest &amp;&amp; sour); // ä¸¤ä¸ªåœ°å€éƒ½ä¸èƒ½æ˜¯null\tvoid* ptr = dest;\t// èµ·å§‹åœ°å€å¤§ï¼Œè¯´æ˜èµ·å§‹åœ°å€åœ¨ç›®çš„åœ°å€çš„åé¢\t// å³ç›®çš„åœ°å€åœ¨èµ·å§‹åœ°å€çš„å‰é¢ï¼Œå¿…é¡»ä»å‰å¾€åæ‹·è´ï¼Œé¿å…è¦†ç›–\tif (dest &lt; sour) \t&#123;\t\twhile (num--)\t\t&#123;\t\t\t*(char*)dest = *(char*)sour;\t\t\tdest = (char*)dest + 1;\t\t\tsour = (char*)sour + 1;\t\t&#125;\t&#125;\telse\t&#123;\t\twhile (num--) // ä»åå¾€å‰è¦†ç›–\t\t&#123;\t\t\t*((char*)dest+num) = *((char*)sour+num);\t\t&#125;\t&#125;\treturn ptr;&#125;int main()&#123;\tint arr1[10] = &#123; 1,2,4,5,9,7,8,3,0,6&#125;;\t//1 2 4 1 2 4 5 9 0 6\tmy_memmove(&amp;arr1[3], arr1, 5 * sizeof(int));\t\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tprintf(&quot;%d &quot;, arr1[i]);\t&#125;\treturn 0;&#125;\n\n\n2.3 memcmpint memcmp ( const void * ptr1,            const void * ptr2,  \t\t\tsize_t num );\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼šä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œæ¯”è¾ƒ\n\næ¨¡æ‹Ÿå®ç°\nint my_memcmp(const void* ptr1, const void* ptr2, int num)&#123;\tassert(ptr1 &amp;&amp; ptr2);\twhile (num--)\t&#123;\t\tif (*(char*)ptr1 == *(char*)ptr2)\t\t&#123;\t\t\tptr1 = (char*)ptr1 + 1;\t\t\tptr2 = (char*)ptr2 + 1;\t\t&#125;\t\telse\t\t&#123;\t\t\treturn *(char*)ptr1 - *(char*)ptr2;\t\t&#125;\t&#125;\treturn 0;&#125;int main()&#123;\tint arr1[5] = &#123; 1,3,5,6,8 &#125;;\tint arr2[5] = &#123; 2,4,7,9,0 &#125;;\tint arr3[5] = &#123; 1,3,4,7,9 &#125;;\tint ret1 = my_memcmp(arr1, arr3, 9);\tint ret2 = memcmp(arr1, arr3, 9);\tprintf(&quot;my_memcmp:%d\\n&quot;, ret1);\tprintf(&quot;memcmp:%d\\n&quot;, ret2);\treturn 0;&#125;\n\nè¿è¡Œç»“æœ\n\n\n2.4 memsetvoid * memset ( void * ptr, int value, size_t num );\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æŠŠå†…å­˜ä¸­ptræ‰€åœ¨ä½ç½®çš„numä¸ªå­—èŠ‚çš„å†…å®¹æ”¹ä¸ºvalue\n\nç¤ºä¾‹ä»£ç å¦‚ä¸‹å›¾æ‰€ç¤º\n\n2.5 bzeroè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªåœ°å€çš„å‰nä¸ªå­—èŠ‚è®¾ç½®ä¸º0ï¼Œå¯ä»¥ç†è§£ä¸ºmemsetçš„ç®€åŒ–ç‰ˆæœ¬ã€‚å…¶éœ€è¦ä½¿ç”¨çš„å¤´æ–‡ä»¶æ˜¯strings.hï¼ŒèŒƒå›´å¹¿äºstring.h\n#include &lt;strings.h&gt;void bzero(void *s, size_t n);\n\nä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•\n#include&lt;stdio.h&gt;#include&lt;string.h&gt;int main()&#123;    char str[]=&quot;1234567890&quot;;    int sz = strlen(str);    printf(&quot;%s\\n&quot;,str);    bzero(str,3);//å°†å‰ä¸‰ä¸ªå­—èŠ‚å†™ä¸º0    for(int i=0;i&lt;sz;i++)    &#123;        printf(&quot;%c&quot;,str[i]);    &#125;    printf(&quot;\\n&quot;);    return 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä»£ç è¿è¡Œåï¼Œå‰ä¸‰ä¸ªå­—ç¬¦æ²¡æœ‰è¢«æ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯å› ä¸º0åœ¨ASCIIç ä¸­æ˜¯\\0ï¼Œå¯¹äºå­—ç¬¦æ¥è¯´ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°\n\n\n3.å­—ç¬¦ä¸²æ‰“å°ä¸‹é¢çš„å‡½æ•°éƒ½æ˜¯å¯¹printfçš„å˜ç§ï¼Œç”¨æ³•å’Œprintfæ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æ‰“å°çš„ç›®æ ‡ä½ç½®ä¸åŒ\n3.1 sprintfint sprintf(char *str, const char *format, ...)\n\nå’Œprintfçš„ä½¿ç”¨ä¸€æ ·ï¼Œåªä¸è¿‡å¤šäº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†printfçš„å†…å®¹æ‰“å°åˆ°ä¸€ä¸ªå­—ç¬¦æ•°ç»„strä¸­\n3.2 snprintfint snprintf ( char * str, size_t size, const char * format, ... );\n\nå°†printfçš„ç›®æ ‡è®¾ç½®ä¸ºstrå­—ç¬¦æ•°ç»„ï¼Œå¹¶é™å®šsizeï¼Œè¶…è¿‡sizeçš„éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼ˆä¹Ÿå°±æ˜¯æœ€å¤šåªèƒ½æ‰“å°sizeå­—èŠ‚åˆ°stré‡Œé¢ï¼‰\n3.3 fprintfint fprintf(FILE *stream, const char *format, ...)\n\nè¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯å¤šäº†ä¸€ä¸ªFILEæ–‡ä»¶æŒ‡é’ˆï¼Œå°†printfçš„å†…å®¹è¾“å‡ºåˆ°æ–‡ä»¶æŒ‡é’ˆä¸­\nç»“è¯­ğŸ‘ä»Šå¤©çš„å†…å®¹æœ‰ç‚¹å°å¤šï¼Œè¿™äº›å‡½æ•°ä»¥åæˆ‘ä»¬å°±ä¼šç»å¸¸æ¥è§¦å•¦~\nç†Ÿèƒ½ç”Ÿå·§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼šé¢„å¤„ç†/ç¼–è¯‘/æ±‡ç¼–/é“¾æ¥","url":"/posts/4253775162/","content":"[TOC]\nå“ˆå–½å•Šï¼Œç›†å‹ä»¬ã€‚ä¸€èµ·æ¥çœ‹çœ‹Cè¯­è¨€ä¸­ç¼–è¯‘é¢„å¤„ç†çš„å†…å®¹å§ï¼ğŸ˜œ\n1.ç¨‹åºè¿è¡Œçš„å‡ ä¸ªé˜¶æ®µä¼—æ‰€ä¸å‘¨çŸ¥ï¼ŒCè¯­è¨€çš„ç¨‹åºè¿è¡Œåˆ†ä¸ºå‡ ä¸ªé˜¶æ®µã€‚\nå’±ä»¬å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå›¾ï¼Œç®€å•äº†è§£ä¸€äºŒğŸ‘‡\n\nç»†åˆ†å¼€æ¥ï¼Œç¼–è¯‘è¿˜åˆ†ä¸º3ä¸ªå°é˜¶æ®µï¼šé¢„ç¼–è¯‘ï¼ˆé¢„å¤„ç†ï¼‰ã€ç¼–è¯‘ã€æ±‡ç¼–\n\nè¿™ä¸‰ä¸ªé˜¶æ®µåˆåˆ†åˆ«åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿè¿™å°±éœ€è¦æˆ‘ä»¬ç”¨linuxä¸‹çš„gccç¼–è¯‘å™¨æ¥éªŒè¯äº†\n1.1é¢„ç¼–è¯‘ç°åœ¨æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªè¿™æ ·çš„ä»£ç ï¼Œåˆ†ä¸ºä¸¤ä¸ªæ–‡ä»¶\n// Add.cint Add(int x,int y)&#123;\treturn x+y;&#125;\n\n// test.c#include &lt;stdio.h&gt;extern int Add(int x,int y);#define M 100// è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•int main()&#123;\tint a=4;\tint b=10;\tprintf(&quot;a+b=%d\\n&quot;,Add(a,b));\tprintf(&quot;M+b=%d\\n&quot;,Add(M,b));\treturn 0;&#125;\n\n\n\nåœ¨è¿è¡Œçª—å£ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œè¿›è¡Œé¢„ç¼–è¯‘æ“ä½œï¼Œå¾—åˆ°test.iæ–‡ä»¶\ngcc -E test.c -o test.i\n\n\næ‰“å¼€è¯¥æ–‡ä»¶ï¼Œæ»‘å€’æœ€åº•éƒ¨ï¼ŒæŸ¥çœ‹å®ƒä¸æºä»£ç çš„ä¸åŒ\n\næˆªå–æ–‡ä»¶éƒ¨åˆ†å†…å®¹å¦‚ä¸‹\n# 3 &quot;test.c&quot; 2# 4 &quot;test.c&quot;extern int Add(int x,int y);int main()&#123; int a=4; int b=10; printf(&quot;a+b=%d\\n&quot;,Add(a,b)); printf(&quot;M+b=%d\\n&quot;,Add(100,b)); return 0;&#125;\n\nå¯ä»¥å‘ç°ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nå¤´æ–‡ä»¶æ¶ˆå¤±ï¼šå®é™…ä¸Šè¢«å±•å¼€äº†\næ³¨é‡Šè¢«åˆ é™¤\ndefineå®šä¹‰çš„ç¬¦å·è¢«æ›¿æ¢\n\nè¿™å°±æ˜¯é¢„ç¼–è¯‘é˜¶æ®µåšçš„3ä»¶äº‹ï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸€äº›æ–‡æœ¬æ“ä½œï¼Œå¹¶æ²¡æœ‰è¿è¡Œè¯¥ä»£ç \n1.2ç¼–è¯‘è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç”Ÿæˆtest.sæ–‡ä»¶\ngcc -S test.i -o test.s\n\n\næ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå‘ç°æˆ‘ä»¬å¥½åƒçœ‹ä¸å¤ªæ‡‚å®ƒé‡Œé¢å†™äº†äº›ä»€ä¹ˆ\n\nå®é™…ä¸Šï¼Œmovã€subéƒ½æ˜¯æ±‡ç¼–è¯­è¨€ï¼Œè¿™ä¸€æ­¥å°±æ˜¯æŠŠCè¯­è¨€ä»£ç è½¬å˜æˆäº†æ±‡ç¼–ä»£ç ã€‚ è¿›è¡Œäº†ä»¥ä¸‹å‡ æ­¥æ“ä½œï¼š\n\nè¯­æ³•åˆ†æ\nè¯æ³•åˆ†æ\nè¯­ä¹‰åˆ†æ\nç¬¦å·æ±‡æ€»\n\n\n\nè¿™ä¸€éƒ¨åˆ†å†…å®¹å¯ä»¥é˜…è¯»ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹è¿™æœ¬ä¹¦ï¼Œè®°å½•ä¸€ä¸‹\n\n1.3æ±‡ç¼–gcc -c test.s -o test.o\n\n\nè¿™ä¸ªæŒ‡ä»¤ä¼šç”Ÿæˆä¸€ä¸ªtest.oç›®æ ‡æ–‡ä»¶\n\nLinuxï¼šç›®æ ‡æ–‡ä»¶åç¼€ä¸º.o\nWindowsï¼šç›®æ ‡æ–‡ä»¶åç¼€ä¸º.obj\n\n\n.oç›®æ ‡æ–‡ä»¶å’Œå¯æ‰§è¡Œæˆå¥çš„æ–‡ä»¶æ ¼å¼elfï¼Œreadelfå·¥å…·å¯ä»¥è§£æelfæ ¼å¼çš„æ–‡ä»¶\n\nç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„ä¸œè¥¿éƒ½æ˜¯ä¹±ç \n\nå®é™…ä¸Šè¿™ä¸ªæ–‡ä»¶é‡Œé¢å­˜æ”¾çš„æ˜¯äºŒè¿›åˆ¶å†…å®¹ã€‚æ±‡ç¼–æ“ä½œå°±æ˜¯å°†æ±‡ç¼–ä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æŒ‡ä»¤ï¼›\nå…¶ä¸­æœ‰éå¸¸é‡è¦çš„ä¸€éƒ¨ï¼šå½¢æˆç¬¦å·è¡¨ã€‚\n1.4ç¬¦å·è¡¨å’Œé“¾æ¥è¿™ä¸ªä»£ç ä¸­å…¶å®åŒ…å«äº†ä¸¤ä¸ªæºæ–‡ä»¶ï¼štest.c ã€Add.c\n\né‡Œé¢å‡ºç°äº†ä¸¤ä¸ªç¬¦å·ï¼Œmainå’ŒAdd\nç¼–è¯‘å™¨ä¼šå…ˆå¯¹æ¯ä¸ªæºæ–‡ä»¶åˆ›ç«‹ä¸€ä¸ªç¬¦å·è¡¨ï¼Œä¸ºå®ƒä»¬æ·»åŠ ä¸€ä¸ªç±»ä¼¼åœ°å€çš„å‚æ•°ã€‚åœ¨é“¾æ¥é˜¶æ®µçš„æ—¶å€™ï¼Œç›¸åŒç¬¦å·çš„åœ°å€å‚æ•°ä¼šè¢«è®¾ç½®ä¸ºä¸€æ ·çš„\n\nè¿™é‡Œç¼–è¯‘ä¼šæŸ¥çœ‹Addå‡½æ•°çš„å®šä¹‰åœ¨å“ªé‡Œ\nå¦‚mainå‡½æ•°ä¸­åªæ˜¯externï¼Œå¹¶æ²¡æœ‰Addçš„å…·ä½“å®ç°ï¼Œæœ€åé“¾æ¥ä¹‹æ—¶ï¼ŒAddç¬¦å·çš„åœ°å€ä¼šè¢«è®¾ç½®ä¸ºAdd.cä¸­è¯¥ç¬¦å·çš„åœ°å€\n\nè¿™ä¸ªæ“ä½œåˆå«ï¼šç¬¦å·è¡¨çš„åˆå¹¶å’Œé‡å®šä½\né“¾æ¥é˜¶æ®µè¿˜ä¼šæ‰§è¡Œå¦å¤–ä¸€ä¸ªæ“ä½œï¼šåˆå¹¶æ®µè¡¨\ngcc test.o add.o -o test//ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºtest\n\n\nä½¿ç”¨./TESTæ“ä½œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºæˆåŠŸè¾“å‡ºäº†Addåçš„ç­”æ¡ˆ\n\n2.è¿è¡Œç¯å¢ƒç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼š\n\nç¨‹åºå…ˆè½½å…¥å†…å­˜ã€‚åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªæ“ä½œç”±ç³»ç»Ÿå®Œæˆï¼›åœ¨ç‹¬ç«‹ç¯å¢ƒä¸­ï¼Œç¨‹åºçš„è½½å…¥å¿…é¡»æ‰‹åŠ¨å®Œæˆï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡å¯æ‰§è¡Œä»£ç ç½®å…¥åªè¯»å†…å­˜æ¥å®Œæˆ\nç¨‹åºæ‰§è¡Œå¼€å§‹ã€‚è°ƒç”¨mainå‡½æ•°\nå¼€å§‹æ‰§è¡Œä»£ç ã€‚è¿™æ—¶å°†ä½¿ç”¨ä¸€ä¸ªè¿è¡Œæ—¶å †æ ˆï¼ˆstackï¼‰ï¼Œå­˜å‚¨å‡½æ•°çš„å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ã€‚ç¨‹åºåŒæ—¶ä½¿ç”¨é™æ€å†…å­˜ï¼Œå­˜å‚¨äºé™æ€å†…å­˜ä¸­çš„å˜é‡åœ¨ç¨‹åºçš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ä¿ç•™å®ƒä»¬çš„å€¼\nç»ˆæ­¢ç¨‹åºã€‚æ­£å¸¸ç»ˆæ­¢mainå‡½æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯æ„å¤–ç»ˆæ­¢\n\nç»“è¯­æœ¬ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†äº†è§£äº†ç¨‹åºè¿è¡Œçš„å‡ ä¸ªé˜¶æ®µã€‚è¿™é‡Œé¢è¿˜æœ‰å¾ˆå¤šæ›´æ·±å±‚æ¬¡çš„é—®é¢˜å¾…æˆ‘å»æ¢ç©¶ã€‚\n\nä¸‹ç¯‡åšå®¢ï¼šé¢„å¤„ç†è¯¦è§£\n\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘å¯å˜å‚æ•°åˆ—è¡¨","url":"/posts/2099966635/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹Cè¯­è¨€å­¦ä¹ è¿‡ç¨‹ä¸­å¾€å¾€è¢«å¿½ç•¥çš„å¯å˜å‚æ•°åˆ—è¡¨\n\n\næ‰€è°“å¯å˜å‚æ•°ï¼Œå°±æ˜¯ä¸€ä¸ªä¸é™å®šå‚æ•°æ•°é‡çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾€é‡Œé¢ä¼ å…¥ä»»æ„ä¸ªæ•°çš„å‚æ•°ï¼Œä»¥è¾¾æˆæŸäº›ç›®çš„ã€‚\nå…³è”ï¼šC++11å¯å˜æ¨¡æ¿å‚æ•°\n1.å‡½æ•°#include &lt;stdarg.h&gt;void va_start(va_list ap, last);type va_arg(va_list ap, type);void va_end(va_list ap);void va_copy(va_list dest, va_list src);\n\n1.1 va_startvoid va_start(va_list ap, last_arg);\n\n\nap: è¿™æ˜¯ä¸€ä¸ª va_list ç±»å‹çš„å¯¹è±¡ï¼Œå®ƒç”¨æ¥å­˜å‚¨é€šè¿‡ va_arg è·å–é¢å¤–å‚æ•°æ—¶æ‰€å¿…éœ€çš„ä¿¡æ¯\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯åˆå§‹åŒ– ap å˜é‡ï¼Œå®ƒä¸ va_arg å’Œ va_end å‡½æ•°ä¸€èµ·ä½¿ç”¨ã€‚\n\n\nlast_arg æ˜¯æœ€åä¸€ä¸ªä¼ é€’ç»™å‡½æ•°çš„å·²çŸ¥çš„å›ºå®šå‚æ•°ï¼Œå³çœç•¥å·ä¹‹å‰çš„å‚æ•°ã€‚\n\nè¦æƒ³è®¾ç½®ä¸€ä¸ªå¸¦å¯å˜å‚æ•°çš„å‡½æ•°ï¼Œå‡½æ•°å£°æ˜æ˜¯ä¸‹é¢è¿™æ ·çš„\nvoid test(int a,int b, ...);\n\nè¿™é‡Œå‡ºç°çš„çœç•¥å·å°±æ˜¯å¯å˜å‚æ•°çš„ç‰¹å¾ï¼Œè€Œå˜é‡bå°±æ˜¯va_startå‡½æ•°éœ€è¦çš„last_arg\n1.2 va_argtype va_arg(va_list ap, type);\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ¥æå–å¯å˜å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ã€‚æ³¨æ„ï¼Œæ¯æ¬¡æå–çš„å‚æ•°æ˜¯ç›´æ¥è¿”å›çš„ï¼Œå¹¶æ²¡æœ‰æ”¾åˆ°å˜é‡apä¸­ã€‚\næ¯æ¬¡å¯¹va_argçš„è°ƒç”¨éƒ½ä¼šä¿®æ”¹apï¼Œä»¥ä¾¿ä¸‹æ¬¡è°ƒç”¨æ—¶ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå‚æ•°ï¼›æ¨æ–­å‚æ•°çš„æ—¶å€™éœ€è¦æŒ‡å®štypeï¼Œå¦‚æœå½“å‰å‚æ•°ç±»å‹å’Œtypeä¸ç»Ÿä¸€ï¼Œå°±ä¼šå‘ç”Ÿä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼ˆmanæ‰‹å†Œé‡Œé¢è¯´çš„ï¼‰\nIf ap is passed to a function that uses va_arg(ap,type) then the value of ap is undefined after the return of that function.\n\nå¦‚æœapè¢«ä¼ é€’ç»™va_arg(ap,type)ï¼Œåˆ™åœ¨è¯¥å‡½æ•°è¿”å›åï¼Œapçš„å€¼æœªå®šä¹‰ã€‚\n1.3 va_endvoid va_end(va_list ap);\n\næ¯ä¸€ä¸ªva_startéƒ½éœ€è¦æœ‰ä¸€ä¸ªé…å¥—çš„va_endï¼Œå…¶ç”¨äºæ¸…ç©ºap\nå¯ä»¥æŠŠä»–ä¿©çš„å…³ç³»ç†è§£ä¸ºmalloc/freeï¼Œè®°å¾—åŠ ä¸Šå°±è¡Œ\n1.4 va_copyè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†å¯å˜å‚æ•°åˆ—è¡¨ä»ç¬¬äºŒä¸ªå‚æ•°srcæ‹·è´åˆ°ç¬¬ä¸€ä¸ªå‚æ•°dest\nvoid va_copyï¼ˆva_list destï¼Œva_list srcï¼‰;\n\nå…¶ä¹Ÿèƒ½å¤Ÿåˆå§‹åŒ–destã€‚è°ƒç”¨äº†va_copyåï¼Œæ— é¡»è°ƒç”¨va_startåˆå§‹åŒ–destï¼Œä½†va_endè¿˜æ˜¯éœ€è¦çš„ã€‚\n2.ç®€å•ç¤ºä¾‹2.1 æ‰“å°å¤šä¸ªå‚æ•°#include&lt;stdarg.h&gt;#include&lt;stdio.h&gt;int print(int num_args,...)&#123;    va_list ap;    va_start(ap,num_args);//åˆå§‹åŒ–å¯å˜å‚æ•°    for(int i=0;i&lt;num_args;i++)    &#123;        printf(&quot;%d &quot;,va_arg(ap,int));    &#125;    printf(&quot;\\n&quot;);    va_end(ap);//ç»“æŸå¯¹apçš„ä½¿ç”¨&#125;int main()&#123;    print(5,1,2,3,4,5,6,7,8,9);    return 0;&#125;\n\nè¿è¡Œè¯¥å‡½æ•°ï¼Œä¼šæ‰“å°å¦‚ä¸‹ç»“æœ\n$ ./test1 2 3 4 5 \n\nè¿™å°±è¡¨æ˜äº†ï¼Œ...çœç•¥å·ä¹‹å‰çš„å‚æ•°ï¼Œå’Œva_argè¿”å›å¯å˜å‚æ•°å…¶å®æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚\nint print(int num_args,...)&#123;    va_list ap;    va_start(ap,num_args);//åˆå§‹åŒ–å¯å˜å‚æ•°    for(int i=0;i&lt;8;i++)    &#123;        printf(&quot;%d &quot;,va_arg(ap,int));    &#125;    printf(&quot;\\n&quot;);    va_end(ap);//ç»“æŸå¯¹apçš„ä½¿ç”¨&#125;int main()&#123;    print(5,1,2,3,4,5,6,7,8,9,10);    return 0;&#125;\n\nå³ä¾¿åœ¨æœ€åéƒ½æ²¡æœ‰ä½¿ç”¨num_argsï¼Œä¹Ÿä¸ä¼šå½±å“ç»“æœçš„æ­£ç¡®æ€§ã€‚va_startéœ€è¦è¿™ä¸ªå‚æ•°ï¼Œå…¶å®æ˜¯ç”¨æ¥æ ‡è¯†å¯å˜å‚æ•°çš„èµ·ç‚¹ã€‚\n$ ./test1 2 3 4 5 6 7 8 \n\n2.2 å¤šå‚æ•°æ±‚å’Œ#include&lt;stdarg.h&gt;#include&lt;stdio.h&gt;// é‡‡ç”¨å¯å˜å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæ ‡è¯†å‚æ•°æ•°é‡int sum(int num_args, ...)&#123;   int val = 0;   va_list ap;   int i;   va_start(ap, num_args);   for(i = 0; i &lt; num_args; i++)   &#123;      val += va_arg(ap, int);   &#125;   va_end(ap);    return val;&#125;void test1()&#123;    printf(&quot;10ã€20 å’Œ 30 çš„å’Œ = %d\\n&quot;,  sum(3, 10, 20, 30) );    printf(&quot;4ã€20ã€25 å’Œ 30 çš„å’Œ = %d\\n&quot;,  sum(4, 4, 20, 25, 30) );&#125;\n\nè¿è¡Œå¦‚ä¸‹\n$ ./test10ã€20 å’Œ 30 çš„å’Œ = 604ã€20ã€25 å’Œ 30 çš„å’Œ = 79\n\n3.åˆ©ç”¨å¯å˜å‚æ•°å®ç°logç±»ç°åœ¨æœ‰äº†å¯å˜å‚æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥ç”¨è¿™ä¸ªå‚æ•°æ¥è¿›è¡Œæ—¥å¿—çš„æ‰“å°äº†\n#pragma once#include &lt;cstdio&gt;#include &lt;ctime&gt;#include &lt;cstdarg&gt;#include &lt;cassert&gt;#include &lt;cstring&gt;#include &lt;cerrno&gt;#include &lt;stdlib.h&gt;#define DEBUG 0#define NOTICE 1#define WARINING 2#define FATAL 3const char *log_level[]=&#123;&quot;DEBUG&quot;, &quot;NOTICE&quot;, &quot;WARINING&quot;, &quot;FATAL&quot;&#125;;// é‡‡ç”¨å¯å˜å‚æ•°åˆ—è¡¨void logging(int level, const char *format, ...)&#123;    assert(level &gt;= DEBUG || level &lt;= FATAL);    char *name = getenv(&quot;USER&quot;);// è·å–ç¯å¢ƒå˜é‡ä¸­çš„ç”¨æˆ·ï¼ˆæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ï¼‰    char logInfo[1024];    // è·å–å¯å˜å‚æ•°åˆ—è¡¨    va_list ap; // ap -&gt; char*    va_start(ap, format);    vsnprintf(logInfo, sizeof(logInfo)-1, format, ap);    va_end(ap); // ap = NULL    // æ ¹æ®æ—¥å¿—ç­‰çº§é€‰æ‹©æ‰“å°åˆ°stderr/stdout    FILE *out = (level == FATAL) ? stderr:stdout;    // æ ¼å¼åŒ–æ‰“å°åˆ°æ–‡ä»¶ä¸­    fprintf(out, &quot;%s | %u | %s | %s\\n&quot;, \\        log_level[level], \\        (unsigned int)time(nullptr),\\        name == nullptr ? &quot;unknow&quot;:name,\\        logInfo);&#125;\n\n3.1 vsnprintä½œç”¨ï¼šä½¿ç”¨vsnprintf()ç”¨äºå‘ä¸€ä¸ªå­—ç¬¦ä¸²ç¼“å†²åŒºæ‰“å°æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä¸”å¯ä»¥é™å®šæ‰“å°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ã€‚\næ­¤å‡½æ•°éœ€è¦C99æˆ–è€…C++11åŠä»¥ä¸Šç‰ˆæœ¬æ‰èƒ½æ”¯æŒã€‚\nint vsnprintf(char* sbuf, size_t n, const char* format, va_list arg);\n\n\nç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡ç¼“å†²åŒºï¼ˆå­—ç¬¦æ•°ç»„ï¼‰\nç¬¬äºŒä¸ªå‚æ•°ï¼Œé™å®šæœ€å¤šæ‰“å°åˆ°ç¼“å†²åŒºçš„å­—ç¬¦æ•°é‡ä¸ºn-1ä¸ªï¼ˆç•™ä½ç½®ç»™\\0ï¼‰\nç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ‰“å°çš„æ ¼å¼ï¼ˆå¦‚%d:%sï¼‰\nç¬¬å››ä¸ªå‚æ•°ï¼Œå¯å˜å‚æ•°argï¼Œéœ€è¦ç”¨va_startåˆå§‹åŒ–\n\nè¿”å›ï¼šæˆåŠŸæ‰“å°åˆ°sbufä¸­çš„å­—ç¬¦çš„ä¸ªæ•°ï¼Œä¸åŒ…æ‹¬æœ«å°¾è¿½åŠ çš„\\0ã€‚å¦‚æœæ ¼å¼åŒ–è§£æå¤±è´¥ï¼Œåˆ™è¿”å›è´Ÿæ•°ã€‚\nç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±èƒ½æŠŠæˆ‘ä»¬çš„æ¥æºå­—ç¬¦ä¸²ç»™è¾“å…¥åˆ°ç¼“å†²åŒºchar logInfo[1024];ä¸­\n3.2 fprintfä½¿ç”¨fprintfï¼Œå°†printfçš„è¾“å‡ºæ‰“å°åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼›ç”¨æ³•å’Œprintfæ˜¯ä¸€æ ·çš„\nint fprintf(FILE *stream, const char *format, ...);\n\nè¿™æ ·æ˜¯ä¸ºäº†åŒºåˆ†stderr/stdoutã€‚åŒæ—¶æ·»åŠ ä¸Šæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠå½“å‰çš„æ—¶é—´æˆ³\nfprintf(out, &quot;%s | %u | %s | %s\\n&quot;, \\    log_level[level], \\    (unsigned int)time(nullptr),\\    name == nullptr ? &quot;unknow&quot;:name,\\    logInfo);\n\n3.3 è¿è¡Œç»“æœint main()&#123;    logging(DEBUG, &quot;socket create success: %d&quot;, 114514);    logging(FATAL, &quot;socket:%s:%d&quot;, strerror(errno), 11234);    return 0;&#125;\n\n$ ./testDEBUG | 1675322313 | muxue | socket create success: 114514FATAL | 1675322313 | muxue | socket:Success:11234\n\nThe endå¯¹äºå¯å˜å‚æ•°çš„ç®€å•ä»‹ç»å°±åˆ°è¿™é‡Œï¼åŸºæœ¬çš„ä½¿ç”¨èƒ½çœ‹æ‡‚ä¹…OKå•¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘é¢„å¤„ç†æ“ä½œï¼ˆè¯¦è§£ï¼‰","url":"/posts/3942304404/","content":"[TOC]\nå‰è¨€ğŸ˜œä¸Šç¯‡åšå®¢ï¼Œæˆ‘ä»¬æåˆ°äº†Cè¯­è¨€ç¨‹åºè¿è¡Œçš„å‡ ä¸ªç¯èŠ‚ã€‚\næœ¬ç¯‡åšå®¢ä¸­æåˆ°çš„é¢„å¤„ç†æŒ‡ä»¤ï¼Œå°±æ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µè¿è¡Œçš„ä¸€äº›ä»£ç ã€‚\n\næœ¬ç¯‡åšå®¢ä½¿ç”¨çš„ç¼–è¯‘å™¨ğŸ°\n\nVS2019ï¼ˆwin10ï¼‰\næ ‘è“æ´¾ï¼ˆlinux-gccï¼‰\n\n\n\n1.é¢„å®šä¹‰ç¬¦å·__FILE__ //è¿›è¡Œç¼–è¯‘çš„æºæ–‡ä»¶__LINE__ //æ–‡ä»¶å½“å‰çš„è¡Œå·__DATE__ //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¥æœŸ__TIME__ //æ–‡ä»¶è¢«ç¼–è¯‘çš„æ—¶é—´__STDC__ //æµ‹è¯•ç¼–è¯‘å™¨æ˜¯å¦éµå¾ªANSI Cï¼Œéµå¾ªå€¼ä¸º1ï¼Œä¸éµå¾ªåˆ™è¯¥ç¬¦å·æœªå®šä¹‰\n\n\n2.#define2.1å®šä¹‰æ ‡è¯†ç¬¦#define name stuff\n\n#define MAX 1000#define reg register   //ä¸º registerè¿™ä¸ªå…³é”®å­—ï¼Œåˆ›å»ºä¸€ä¸ªç®€çŸ­çš„åå­—#define do_forever for(;;)  //ç”¨æ›´å½¢è±¡çš„ç¬¦å·æ¥æ›¿æ¢ä¸€ç§å®ç°#define CASE break;case    //åœ¨å†™caseè¯­å¥çš„æ—¶å€™è‡ªåŠ¨æŠŠ breakå†™ä¸Š//å¦‚æœå®šä¹‰çš„ stuffè¿‡é•¿ï¼Œå¯ä»¥åˆ†æˆå‡ è¡Œå†™ï¼Œé™¤äº†æœ€åä¸€è¡Œå¤–ï¼Œæ¯è¡Œçš„åé¢éƒ½åŠ ä¸€ä¸ªåæ–œæ (ç»­è¡Œç¬¦)ã€‚#define DEBUG_PRINT printf(&quot;file:%s\\tline:%d\\t \\                           date:%s\\ttime:%s\\n&quot; ,\\                        __FILE__,__LINE__ ,       \\                        __DATE__,__TIME__ )  \n\nåŠ åˆ†å·é—®é¢˜defineå®šä¹‰æ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œæœ€å¥½ä¸è¦åœ¨ç»“å°¾åŠ ä¸Š;\n#define MAX 1000;#define MAX 1000\n\n\n2.2å®šä¹‰å®\né™¤äº†å®šä¹‰æ ‡è¯†ç¬¦ä»¥å¤–ï¼Œdefineè¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªè¯­å¥ä¸ºæ ‡è¯†ç¬¦ï¼Œå…è®¸æŠŠå‚æ•°æ›¿æ¢åˆ°æ–‡æœ¬ä¸­ã€‚è¿™ç§æœºåˆ¶å«åšå®šä¹‰å®\n\nä¸‹é¢æ˜¯å®çš„ç”³æ˜æ–¹å¼ï¼š \n#define name(parament-list)  stuff \n\nå…¶ä¸­çš„parament-listæ˜¯ä¸€ä¸ªç”±é€—å·éš”å¼€çš„ç¬¦å·è¡¨ï¼Œå®ƒä»¬å¯èƒ½å‡ºç°åœ¨stuffä¸­\n\nå‚æ•°åˆ—è¡¨çš„å·¦æ‹¬å·å¿…é¡»ä¸nameç´§é‚»ã€‚ å¦‚æœä¸¤è€…ä¹‹é—´æœ‰ä»»ä½•ç©ºç™½å­˜åœ¨ï¼Œå‚æ•°åˆ—è¡¨å°±ä¼šè¢«è§£é‡Šä¸ºstuffçš„ä¸€éƒ¨åˆ†\n\n//å¦‚#define DOUBLE(x) x+x\n\nå®éœ€è¦æ³¨æ„çš„é—®é¢˜è¿™ä¸ªå®æœ‰ä¸€ä¸ªé—®é¢˜ğŸ‘‡\n#define DOUBLE(x) x+xint main()&#123;\tprintf(&quot;%d\\n&quot;, 10*DOUBLE(3));\treturn 0;&#125;\n\nè¿™ä¸ªå¼å­è¾“å‡ºçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯60å—ï¼Ÿ\nç­”æ¡ˆæ˜¯å¦å®šçš„ï¼š#defineå®åœ¨ä½¿ç”¨çš„æ—¶å€™æ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢\nè¿™ä¸ªè¯­å¥å°±ç›¸å½“äº10*3+3ï¼Œæ ¹æ®æ“ä½œç¬¦ä¼˜å…ˆçº§å¯çŸ¥ï¼Œç»“æœä¸º30+3&#x3D;33\n\næƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½è¿™ä¸ªåŸåˆ™ï¼š\n\nç»™å˜é‡åŠ ä¸Šæ‹¬å·ä»¥ç¡®ä¿ä¼˜å…ˆçº§\nç»™æ•´ä¸ªå®å†åŠ ä¸Šä¸€ä¸ªæ‹¬å·é˜²æ­¢å¤–éƒ¨æ•°æ®å½±å“\n\n#define DOUBLE(x) ((x)+(x))\n\nå†è¿è¡Œç¨‹åºï¼Œå‘ç°ç­”æ¡ˆå˜æˆäº†60\n\n\nç”¨äºå¯¹æ•°å€¼è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼çš„å®å®šä¹‰ï¼Œéƒ½åº”è¯¥ç”¨è¿™ç§æ–¹å¼åŠ ä¸Šæ‹¬å·ã€‚é¿å…åœ¨ä½¿ç”¨å®æ—¶ï¼Œå‚æ•°ä¸­çš„æ“ä½œç¬¦æˆ–é‚»è¿‘æ“ä½œç¬¦ä¹‹é—´äº§ç”Ÿä¸å¯é¢„æ–™çš„ç›¸äº’ä½œç”¨\n\n2.3defineæ›¿æ¢è§„åˆ™\n2.4ä½¿ç”¨#å’Œ##2.4.1#å°†å­—ç¬¦ä¸²æ’å…¥å­—ç¬¦ä¸²int main()&#123;\tint a = 3;\tint b = 5;\tprintf(&quot;the num of a is %d\\n&quot;, a);\tprintf(&quot;the num of b is %d\\n&quot;, b);\tprintf(&quot;\\n&quot;);        return 0;&#125;\n\n\nåœ¨è¿™ä¸ªä»£ç é‡Œé¢ï¼Œæ‰“å°çš„å‰ç½®å†…å®¹aå’Œbéœ€è¦æ ¹æ®æ‰“å°çš„å˜é‡è¿›è¡Œæ›´æ”¹\næœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œå¯ä»¥è®©ä»–è‡ªå·±è¿›è¡Œæ›´æ”¹ï¼Ÿ\n#define PRINT(X) printf(&quot;the num of &quot;#X&quot; is %d\\n&quot;, X)int main()&#123;\tint a = 3;\tint b = 5;\tprintf(&quot;the num of a is %d\\n&quot;, a);\tprintf(&quot;the num of b is %d\\n&quot;, b);\tprintf(&quot;\\n&quot;);\tPRINT(a);\tPRINT(b);\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œ#Xå¤„çš„å†…å®¹è¢«æ›¿æ¢æˆäº†æˆ‘ä»¬éœ€è¦æ‰“å°çš„å˜é‡\n\nå®é™…ä¸Šï¼Œè¿™é‡Œ#Xæ—è¾¹çš„åŒå¼•å·ï¼Œæ˜¯å°†æ•´ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†æˆäº†3ä»½è¿›è¡Œæ‰“å°\n\nâ€œthe num ofâ€\n#X\nâ€œis %d\\nâ€\n\nå­—ç¬¦ä¸²åœ¨æ‰“å°çš„æ—¶å€™å…·æœ‰è‡ªåŠ¨æ‹¼æ¥çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å°†ä¸€ä¸ªéœ€è¦æ›´æ”¹çš„å­—ç¬¦æ’å…¥åˆ°å­—ç¬¦ä¸²ä¸­\n2.4.2## å°†ä¸¤ä¸ªç¬¦å·åˆå¹¶\n##å¯ä»¥æŠŠä½äºå®ƒä¸¤è¾¹çš„ç¬¦å·åˆæˆä¸€ä¸ªç¬¦å·ã€‚ \nå®ƒå…è®¸å®å®šä¹‰ä»åˆ†ç¦»çš„æ–‡æœ¬ç‰‡æ®µåˆ›å»ºæ ‡è¯†ç¬¦ã€‚\n\nå¦‚å›¾ï¼Œè¿™ä¸ªå®å°†Classå’Œ10ä¸¤ä¸ªåˆ†ç¦»çš„ç¬¦å·åˆå¹¶æˆäº†Class10ï¼Œprintfè¯†åˆ«å‡ºæ¥å¹¶æ‰“å°çš„äº†Class10çš„å€¼\n\nå½“æˆ‘ä»¬åŒåå˜é‡æœ‰å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ç§å®æ¥ç»™ä¸åŒçš„å˜é‡å¢åŠ æ•°æ®ã€‚\n#define ADD_TO_SUM(num, value) sum##num += value;int sum1,sum2,sum3,sum4;ADD_TO_SUM(3, 10);//ç»™sum3å¢åŠ 10.\n\nè¿™æ ·çš„è¿æ¥å¿…é¡»äº§ç”Ÿä¸€ä¸ªåˆæ³•çš„æ ‡è¯†ç¬¦ï¼Œå¦åˆ™å…¶ç»“æœå°±æ˜¯æœªå®šä¹‰çš„ã€‚\n\n2.5å¸¦å‰¯ä½œç”¨çš„å®å‚æ•°å½“å®åœ¨å®šä¹‰ä¸­å‡ºç°è¶…è¿‡ä¸€æ¬¡æ—¶ï¼Œå¦‚æœå‚æ•°å¸¦æœ‰å‰¯ä½œç”¨ï¼Œä½¿ç”¨è¿™ä¸ªå®çš„æ—¶å€™å°±æœ‰å¯èƒ½å‡ºç°å±é™©ï¼Œå¯¼è‡´æ— æ³•é¢„æµ‹çš„ç»“æœ\n\nå‰¯ä½œç”¨æŒ‡è¡¨è¾¾å¼æ±‚å€¼æ—¶å‡ºç°çš„ä¸€äº›é™„å¸¦æ•ˆæœï¼Œå¦‚å‰ç½®++å’Œåç½®++\n\nx+1//ä¸å¸¦å‰¯ä½œç”¨x++//æœ‰å‰¯ä½œç”¨\n\nä»¥ä¸‹è¿™ä¸ªå®å¯ä»¥ä½“ç°ä¸Šé¢æè¿°çš„é—®é¢˜\n#define MAX(x,y) ((x)&gt;(y)?(x):(y))\n\nå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°å°è£…ï¼Œæˆ‘ä»¬çš„ç†è§£æ˜¯ï¼Œaå’ŒbåŸæ¥çš„å€¼3å’Œ5è¢«ä¼ å…¥MAXï¼Œç„¶åå†å„è‡ª++ä¸€æ¬¡\nä½†å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ï¼Œå¯ä»¥çœ‹åˆ°a++äº†ä¸€æ¬¡ï¼Œä½†æ˜¯b++äº†ä¸¤æ¬¡\n\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\nå®æ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢\n\n#define MAX(x,y) ((x)&gt;(y)?(x):(y))//ä¸Šè¿°å®è¢«æ›¿æ¢åçš„ç»“æœint m=((a++)&gt;(b++)?(a++):(b++))\n\nè¿™ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œæ‰§è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œaå’Œbå„++ä¸€æ¬¡ï¼Œä½†æ˜¯åœ¨æœ€åè¿”å›bçš„æ—¶å€™ï¼Œæœ«å°¾b++è¢«æ‰§è¡Œäº†ä¸€æ¬¡\nå¾—åˆ°çš„ç»“æœå°±æ˜¯a=4ï¼Œb=7\n2.6å®å’Œå‡½æ•°å¯¹æ¯”å®ç»å¸¸è¢«ç”¨ä½œæ‰§è¡Œç®€å•çš„è®¡ç®—ï¼ˆå¦‚ä¸Šé¢æåˆ°å¤šæ¬¡çš„MAXï¼‰\nè¿™æ—¶å€™å®å¯¹æ¯”å‡½æ•°æœ‰å‡ ä¸ªä¼˜ç‚¹\n\nå‡½æ•°çš„è°ƒç”¨éœ€è¦å‹æ ˆå‡ºæ ˆï¼Œæ¯”å®é™…æ‰§è¡Œè¿™ä¸ªå°å‹ä»£ç éœ€è¦çš„æ—¶é—´æ›´é•¿ã€‚å®æ¯”å‡½æ•°åœ¨ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦æ–¹é¢æ›´èƒœä¸€ç­¹\nå‡½æ•°çš„å‚æ•°å¿…é¡»å£°æ˜ä½ç‰¹å®šçš„ç±»å‹ï¼Œåªé€‚ç”¨äºç‰¹å®šç±»å‹çš„è¡¨è¾¾å¼ä¸Šã€‚åä¹‹ï¼Œå®å¯ä»¥ç”¨æ•´å‹ã€é•¿æ•´å‹ã€æµ®ç‚¹å‹ç­‰å¯ä»¥ç”¨&gt;æ¥æ¯”è¾ƒçš„ç±»å‹ã€‚å®çš„è°ƒç”¨ä¸ç±»å‹æ— å…³\n\né™¤äº†MAXè¿™ä¸ªç®€å•å®è¯­å¥å¤–ï¼Œå®çš„å‚æ•°è¿˜å¯ä»¥å‡ºç°æ•°æ®ç±»å‹\nå¦‚ä¸‹å›¾ä¸­æˆ‘ä»¬è°ƒç”¨çš„è¿™ä¸ªå®ï¼Œå°±å¯ä»¥åšåˆ°ç”¨ä¸€ç§æ›´ç®€å•çš„æ–¹å¼æ¥è°ƒç”¨mallocå‡½æ•°ã€‚æ­¤æ—¶çš„è°ƒç”¨åªéœ€è¦å†™å…¥å¾…å¼€è¾Ÿæ•°æ®ä¸ªæ•°å’Œæ•°æ®ç±»å‹ï¼Œä¸éœ€è¦å†å†™å¼ºåˆ¶ç±»å‹è½¬æ¢ç­‰è¯­å¥ï¼Œæ–¹ä¾¿ä½¿ç”¨\n\næœ‰å¾—å°±æœ‰å¤±ï¼Œå®å½“ç„¶ä¹Ÿæœ‰ç¼ºç‚¹ï¼š\n\næ¯æ¬¡ä½¿ç”¨å®ï¼Œæ‰§è¡Œçš„æ˜¯ç›´æ¥æ›¿æ¢ã€‚å¦‚æœæ­¤æ—¶å®æ¯”è¾ƒé•¿ï¼Œåˆ™ä¼šå¢åŠ ç¨‹åºçš„é•¿åº¦\nå®åœ¨é¢„å¤„ç†é˜¶æ®µæ‰§è¡Œäº†æ›¿æ¢ï¼Œæ— æ³•è¿›è¡Œè°ƒè¯•\nå®ä¸ç±»å‹æ— å…³ï¼Œä¸å¤Ÿä¸¥è°¨\nå®ä¼šå‡ºç°æ“ä½œç¬¦ä¼˜å…ˆçº§é—®é¢˜ï¼Œå®¹æ˜“å‡ºé”™\n\n2.7å‘½åçº¦å®šä¸€èˆ¬æ¥è®²å‡½æ•°çš„å®çš„ä½¿ç”¨è¯­æ³•å¾ˆç›¸ä¼¼ï¼Œæ‰€ä»¥è¯­è¨€æœ¬èº«æ²¡æ³•å¸®æˆ‘ä»¬åŒºåˆ†äºŒè€…ã€‚ \né‚£æˆ‘ä»¬å¹³æ—¶çš„ä¸€ä¸ªä¹ æƒ¯æ˜¯ï¼š \n\næŠŠå®åå…¨éƒ¨å¤§å†™ï¼šMAX\n\nå‡½æ•°åä¸è¦å…¨éƒ¨å¤§å†™ï¼šMax\n\n\n#define MAX(x, y) ((x)&gt;(y)?(x):(y))int Max(int x, int y)&#123;\treturn x &gt; y ? x : y;&#125;\n\n2.7 #undefè¿™æ¡æŒ‡ä»¤ç”¨äºç§»é™¤ä¸€ä¸ªå®å®šä¹‰\n#undef NAME\n\nå¦‚æœä¸ç§»é™¤ï¼Œå°±æ— æ³•é‡å¤å®šä¹‰åŒåå®\n\n\n3.å‘½ä»¤è¡Œå®šä¹‰ä¸€äº›Cè¯­è¨€çš„ç¼–è¯‘å™¨æä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰ä¸€ä¸ªç¬¦å·ï¼Œç”¨äºå¯åŠ¨ç¼–è¯‘è¿‡ç¨‹\nå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¨‹åºçš„ä¸åŒç‰ˆæœ¬æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æŒ‡ä»¤\n\nå¦‚ï¼šåœ¨ä¸åŒæƒ…å†µä¸‹éœ€è¦ä¸åŒé•¿åº¦çš„æ•°ç»„\n\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥ç¼–è¯‘è¿™éƒ¨åˆ†ä»£ç ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ŒSZæœªå®šä¹‰\n\nä½†å½“æˆ‘ä»¬å†™ä¸Šè¿™ä¹ˆä¸€è¡Œå‘½ä»¤\ngcc test.c -D SZ=10\n\nå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨æ²¡æœ‰æŠ¥é”™ï¼Œå†æ¬¡lsï¼Œå‘ç°å¤šäº†ä¸€ä¸ªa.outæ–‡ä»¶\n\næ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°SZè¢«å®šä¹‰æˆ10å¹¶æˆåŠŸæ‰“å°\n4.æ¡ä»¶ç¼–è¯‘åœ¨ç¼–è¯‘ä¸€ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æ¥æ§åˆ¶ä¸€ç»„è¯­å¥çš„ä½¿ç”¨ä¸å¦\n4.1if&#x2F;endif#define M 1int main()&#123;\tint i = 0;\tint n = 10;\tfor (i = 0; i &lt; 10; i++)\t&#123;#if M\t\tprintf(&quot;%d\\n&quot;, i);#endif\t\t//å…¶ä»–ä»£ç \t&#125;\treturn 0;&#125;\n\n#ifè¯­å¥åä¸ºçœŸå³æ‰§è¡Œï¼Œä¸ºå‡ä¸æ‰§è¡Œ\n\nè¯¥è¯­å¥ä¹‹ååªèƒ½è·Ÿéšå¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½è·Ÿéšå®šä¹‰çš„å˜é‡\n\n#define M 1#if M//æ­£ç¡®#if 3&gt;5#if M==1//æ­£ç¡®int a=1;#if a//err\n\n\nåœ¨linuxç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ç¼–è¯‘è¯­å¥æ‰§è¡Œé¢„å¤„ç†æ“ä½œï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„test.iæ–‡ä»¶ä¸­ï¼Œprintfä»£ç æ˜¯è¢«åŒ…å«è¿›å»çš„\n\nå¦‚æœæŠŠMæ›´æ”¹ä¸º0ï¼Œå†æ¬¡æ‰§è¡Œé¢„å¤„ç†æ“ä½œã€‚printfè¯­å¥å¹¶æ²¡æœ‰åŒ…å«åœ¨forå¾ªç¯ä¸­\n\n\nå¦‚æœè¿™é‡Œæ”¾å…¥å˜é‡nï¼Œä¸èµ·ä½œç”¨\n\n\nä½ å¯èƒ½æƒ³é—®ï¼Œå¦‚æœè¿™ä¸€è¡Œä»£ç æˆ‘ä¸éœ€è¦ï¼Œç›´æ¥æ³¨é‡Šæ‰ä¸å°±okäº†å—ï¼Ÿ\nå¹¶ä¸ç„¶ã€‚\næœ‰äº›æ—¶å€™æˆ‘ä»¬ä¸ºäº†éªŒè¯ä¹‹å‰å†™çš„ç¨‹åºæ˜¯å¦æ­£ç¡®ï¼Œä¼šç¼–å†™ä¸€äº›æµ‹è¯•ä»£ç ï¼Œç”¨äºdebugã€‚è¿™äº›ä»£ç åœ¨æµ‹è¯•å®Œæˆåå¯ä»¥åˆ é™¤ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸‹æ¬¡è¿˜éœ€è¦æµ‹è¯•åŒä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±æœ‰éœ€è¦é‡æ–°å†™ä¸€éï¼Œå¾ˆæ˜¯ä¸æ–¹ä¾¿ã€‚\næœ‰äº†æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¨‹åºçš„æœ€ä¸Šæ–¹#defineå®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œæ¥æ§åˆ¶æ˜¯å¦è¿›è¡Œæµ‹è¯•ã€‚\n\n4.2å¤šä¸ªåˆ†æ”¯çš„è°ƒèŠ‚ç¼–è¯‘#define M 150int main()&#123;#if M&lt;100\tprintf(&quot;less\\n&quot;);#elif M==100\tprintf(&quot;==\\n&quot;);#elif M&gt;100&amp;&amp;M&lt;200\tprintf(&quot;more\\n&quot;);#else\tprintf(&quot;hehe\\n&quot;);#endif\treturn 0;&#125;\n\nå’Œä¹‹å‰ä¸€æ ·ï¼Œä¸è¿è¡Œçš„ä»£ç ï¼ŒVS2019ä¼šæ˜¾ç¤ºä¸ºç°è‰²\n\n4.3åˆ¤æ–­ç¬¦å·æ˜¯å¦å·²è¢«å®šä¹‰#define M 0int main()&#123;#if defined(M)\tprintf(&quot;hehe\\n&quot;);#endif#ifdef M\tprintf(&quot;haha\\n&quot;);#endif//è¿™ä¸¤æ¡è¯­å¥ç­‰ä»·       return 0;&#125;\n\n\nå¦‚æœæƒ³æŠŠæ¡ä»¶æ”¹ä¸ºæœªå®šä¹‰çš„æ—¶å€™æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸¤ç§æ–¹å¼\n\n!ï¼šé€»è¾‘åæ“ä½œç¬¦\n\n\n4.4åµŒå¥—æŒ‡ä»¤å’Œå…¶ä»–è¯­å¥ä¸€æ ·ï¼Œæ¡ä»¶ç¼–è¯‘è¯­å¥ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨\n#define M 0#define N 1#if defined(M)     #ifdef OPTION1     \tM_option1();     #endif     #ifdef OPTION2     \tM_option2();     #endif#elif defined(N)     #ifdef OPTION2     \tN_option2();     #endif#endif\n\n\n5.æ–‡ä»¶åŒ…å«æˆ‘ä»¬çŸ¥é“ï¼Œ#includeæŒ‡ä»¤å¯ä»¥ä½¿å¦å¤–ä¸€ä¸ªæ–‡ä»¶è¢«ç¼–è¯‘ã€‚å®ƒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ›¿æ¢ï¼š\n\nç¼–è¯‘å™¨åœ¨é¢„å¤„ç†é˜¶æ®µåˆ é™¤è¿™æ¡æŒ‡ä»¤ï¼Œç”¨åŒ…å«æ–‡ä»¶çš„å†…å®¹æ›¿æ¢\nä¸€ä¸ªæºæ–‡ä»¶è¢«åŒ…å«10æ¬¡ï¼Œå°±ä¼šè¢«ç¼–è¯‘10æ¬¡\n\n5.1åŒ…å«æ–¹å¼#include &quot;test.h&quot;//æœ¬åœ°æ–‡ä»¶#include &lt;stdio.h&gt;//åº“æ–‡ä»¶\n\nä½ å¯èƒ½ä¼šæœ‰è¿™ä¸ªç–‘é—®ï¼Œè¿™ä¸¤ç§åŒ…å«æ–¹å¼ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nåŒå¼•å·æ–¹å¼\nç°åœ¨æºæ–‡ä»¶ï¼ˆé¡¹ç›®æ–‡ä»¶ï¼‰æ‰€åœ¨ç›®å½•ä¸‹æŸ¥æ‰¾ã€‚\nå¦‚æœè¯¥å¤´æ–‡ä»¶æœªæ‰¾åˆ°ï¼Œç¼–è¯‘å™¨å°±ä¼šåƒæŸ¥æ‰¾åº“å‡½æ•°å¤´æ–‡ä»¶ä¸€æ ·åœ¨æ ‡å‡†ä½ç½®æŸ¥æ‰¾å¤´æ–‡ä»¶ã€‚\nå¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯\n\nVS2019æ ‡å‡†ä½ç½®ï¼ˆå»VSçš„å®‰è£…ç›®å½•æ‰¾ï¼‰\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\include\n\nLinuxç¯å¢ƒæ ‡å‡†ä½ç½®\n/usr/include\n\n\nåº“æ–‡ä»¶æ–¹å¼\nåªåœ¨æ ‡å‡†è·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±æç¤ºç¼–è¯‘é”™è¯¯\n\næ—¢ç„¶åŒå¼•å·æ–¹å¼ä¹Ÿä¼šå»æ ‡å‡†è·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œé‚£æ˜¯ä¸æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç”¨åŒå¼•å·æ–¹å¼åŒ…å«åº“å‡½æ•°çš„å¤´æ–‡ä»¶ï¼Ÿ\nç­”æ¡ˆæ˜¯è‚¯å®šçš„\nä½†æ˜¯è¿™ä¹ˆåšï¼Œä¼šè®©æˆ‘ä»¬éš¾ä»¥åˆ†è¾¨å¤´æ–‡ä»¶åˆ°åº•æ˜¯åº“å‡½æ•°è¿˜æ˜¯è‡ªå®šä¹‰å¤´æ–‡ä»¶ã€‚ä¸¤æ¬¡æŸ¥æ‰¾ä¹Ÿä¼šå½±å“ç¨‹åºç¼–è¯‘æ•ˆç‡\n\n5.2åµŒå¥—æ–‡ä»¶åŒ…å«é—®é¢˜å‡å¦‚åœ¨é¡¹ç›®åˆä½œä¸­ï¼Œå‡ºç°äº†è¿™ç§æƒ…å†µ\n\n\ncomm.hå’Œ.cæ˜¯å…¬å…±æ–‡ä»¶\ntest1.hå’Œtest1.cä½¿ç”¨äº†å…¬å…±æ¨¡å—\ntest2.hå’Œtest2.cä¹Ÿä½¿ç”¨äº†å…¬å…±æ¨¡å—\ntest.hå’Œtest.cæœ€ç»ˆä½¿ç”¨äº†test1å’Œ2æ¨¡å—\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œå°±ç›¸å½“äºæœ‰ä¸¤ä»½comm.hçš„å†…å®¹è¢«æ‹·è´åˆ°æœ€ç»ˆçš„ç¨‹åºä¸­\nå‡å¦‚comm.hä¸­æœ‰defineæˆ–è€…å…¨å±€å˜é‡çš„å®šä¹‰ï¼Œè¿™å°±ç›¸å½“äºä¸€ä¸ªå®šä¹‰è¯­å¥å†™äº†ä¸¤éï¼Œå‡ºç°äº†é‡å¤å®šä¹‰\nå¦‚ä½•è§£å†³ï¼Ÿæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªå¤´æ–‡ä»¶çš„å¼€å¤´å†™\n#ifndef __TEST_H__#define __TEST_H__//å¤´æ–‡ä»¶çš„å†…å®¹#endif\n\nè¿™æ ·ï¼Œå¦‚æœ__TEST_H__ç¬¦å·å·²ç»è¢«å®šä¹‰è¿‡ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šäºŒæ¬¡å±•å¼€å¤´æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œä¹Ÿå°±é¿å…äº†è¿™ä¸ªé—®é¢˜\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯VSç¼–è¯‘å™¨ï¼Œåœ¨åˆ›å»º.hæ–‡ä»¶çš„æ—¶å€™ï¼ŒVSä¼šè‡ªå·±åŒ…å«ä¸€ä¸ªè¯­å¥\n#pragma once\n\nè¿™ä¸ªè¯­å¥ä¹Ÿæœ‰ç›¸åŒçš„ä½œç”¨\n\nwarning: #pragma once in main fileåœ¨æˆ‘å°è¯•åœ¨linuxç¯å¢ƒä¸‹ä½¿ç”¨#pragma onceè¯­å¥æ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸è¦ç¼–è¯‘å¤´æ–‡ä»¶\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å±•å¼€å¤´æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘\n\n\n\nç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼šå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œ#pragma onceæœ¬èº«æ˜¯æ²¡æœ‰å«ä¹‰çš„è¯­å¥ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚\n\nä¹Ÿæœ‰äººè¯´æ˜¯å› ä¸ºlinuxä¸æ”¯æŒè¿™ä¸ªè¯­å¥ï¼Œæˆ‘ä»¬æ¥è¯•è¯•\n\nå³ä¾§ä»£ç ä¸­åŒ…å«äº†ä¸¤ä¸ªtest.hçš„å¼•ç”¨ï¼Œåœ¨é¢„å¤„ç†ä¸­åªåŒ…å«äº†ä¸€æ¬¡\n\nå»æ‰å¤´æ–‡ä»¶ä¸­çš„#pragma onceï¼Œå†æ¬¡ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°é¢„å¤„ç†æ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤æ¬¡å¤´æ–‡ä»¶çš„å†…å®¹\n\nè¿™è¯´æ˜linux-gccç¼–è¯‘å™¨æ˜¯æ”¯æŒè¯¥è¯­å¥çš„ï¼Œå¹¶éç½‘ä¸Šè¯´çš„ä¸æ”¯æŒï¼\nè¿˜æœ‰æ›´å¤šâ€¦â€¦å…¶å®é¢„å¤„ç†æŒ‡ä»¤è¿˜è¿œä¸æ­¢æœ¬åšå®¢ä¸­åŒ…å«çš„è¿™äº›\n#error#pragma#line\n\nè¿™äº›é¢„å¤„ç†æŒ‡ä»¤è¿˜ç­‰å¾…æˆ‘çš„å­¦ä¹ ~è®°å½•åœ¨å°æœ¬æœ¬ä¸Šäº†\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°ç»„ç«Ÿç„¶è¿˜å¯ä»¥è¿™æ ·è°ƒç”¨ï¼Ÿæ…•é›ªå­¦è‰ºä¸ç²¾äº†ï¼","url":"/posts/842609448/","content":"æ•°ç»„ç«Ÿç„¶è¿˜å¯ä»¥è¿™æ ·è°ƒç”¨ï¼Ÿåªèƒ½è¯´æ…•é›ªå­¦è‰ºä¸ç²¾äº†ï¼\n\n\nä¸Šä»£ç ï¼èµ·å› æ˜¯ç¾¤é‡Œçš„ä¸€ä¸ªå›¾ï¼Œæœ¬æ¥ä»¥ä¸ºåªæ˜¯ä¸ªå¼€ç©ç¬‘çš„bugå›¾ï¼Œè°çŸ¥é“å…¶ä»–ç¾¤å‹è¯´äº†ï¼Œæˆ‘æ‰å‘ç°æ˜¯è‡ªå·±æ¯›éƒ½ä¸æ‡‚\n\nä»£ç å°±å¤§æ¦‚æ˜¯ä¸‹é¢è¿™æ ·ï¼Œè¯·é—®ä½ çš„ç¬¬ä¸€å°è±¡ï¼Œè¿™ä¸ªä»£ç æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯å‘¢ï¼Ÿ\n#include &lt;stdio.h&gt;int main()&#123;    int a[10] = &#123;1,3,4,5,6,7&#125;;    printf(&quot;%d &quot;,a[4]);    printf(&quot;%d\\n&quot;,4[a]);    return 0;&#125;\n\né—®é¢˜è‚¯å®šæ˜¯ç¬¬äºŒä¸ªprintfä¸­çš„4[a]ï¼Œç›´æ¥ä¸Šç¼–è¯‘è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°ä¸ä½†æ²¡æœ‰å‡ºé”™ï¼ŒäºŒè€…çš„æ‰“å°çš„æ•°æ®ä¹Ÿå®Œå…¨ç›¸åŒ\n[muxue:~/code/c/c_cpp]$ gcc test.cpp -o test[muxue:~/code/c/c_cpp]$ ./test6 6\n\nä¸ºå•¥ï¼Ÿå¦‚æœä½ å¯¹Cè¯­è¨€çš„æŒ‡é’ˆæœ‰è¿‡äº†è§£ï¼Œåº”è¯¥çŸ¥é“a[n]å®é™…ä¸Šåœ¨è®¿é—®çš„æ—¶å€™ï¼Œä¼šè¢«è½¬æˆ *(a+n)æ¥è®¿é—®å…·ä½“çš„åœ°å€\næ—¢ç„¶æ˜¯è¿™æ ·ï¼Œé‚£æˆ‘ä»¬æŠŠaå’Œnçš„é¡ºåºå€’è¿‡æ¥ï¼Œè®¿é—®çš„ä¸å°±æ˜¯ *(n+a)äº†å—ï¼Ÿ\nå­¦è¿‡åŠ æ³•äº¤æ¢å¾‹çš„éƒ½çŸ¥é“ï¼Œè¿™ä¸¤ä¸ªè®¿é—®çš„ç»“æœè‚¯å®šæ˜¯ç›¸åŒçš„\næ‰€ä»¥è¿™ä¸ªä»£ç æ˜¯æ²¡æœ‰è¯­æ³•é”™è¯¯çš„ï¼Œåªä¸è¿‡çœ‹ç€å¾ˆè®©äººè¿·æƒ‘è€Œå·²ã€‚\nä¸è¿‡ï¼Œè¦æ˜¯çœŸæœ‰äººåœ¨å®é™…é¡¹ç›®é‡Œé¢è¿™æ ·å†™ä»£ç ï¼Œé‚£å°±å¯ä»¥å»â€œé—®å€™â€ä¸€ä¸‹ä»–äº†ã€‚ä»£ç å¯è¯»æ€§æä½ã€‚\né¡ºå¸¦ä¸€æC++ä¸­çš„æ“ä½œç¬¦[]çš„é‡è½½æ˜¯ä¸æ”¯æŒä½ è¿™ä¹ˆç©çš„å“¦ï¼å› ä¸ºå’Œoperator[]å‡½æ•°çš„å‚æ•°çš„é¡ºåºä¸ä¸€æ ·äº†\n#include &lt;stdio.h&gt;#include &lt;vector&gt;using namespace std;int main()&#123;    vector&lt;int&gt; a = &#123;1,3,4,5,6,7&#125;;    printf(&quot;%d &quot;,a[4]);    printf(&quot;%d\\n&quot;,4[a]);//err    return 0;&#125;\n\nç¼–è¯‘æŠ¥é”™\n[muxue:~/code/c/c_cpp]$ g++ test.cpp -o testtest.cpp: In function â€˜int main()â€™:test.cpp:10:20: error: no match for â€˜operator[]â€™ (operand types are â€˜intâ€™ and â€˜std::vector&lt;int&gt;â€™)     printf(&quot;%d\\n&quot;,4[a]);                    ^\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘å‡½æ•°è°ƒç”¨çš„å‚æ•°å‹æ ˆï¼ˆè¯¦è§£ï¼‰","url":"/posts/3810457843/","content":"[TOC]\nå‰è¨€åœ¨æ—©æœŸçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°å½“å‡½æ•°ä¼ å€¼è°ƒç”¨å‚æ•°çš„æ—¶å€™ï¼Œç”¨çš„æ˜¯å½¢å‚ã€‚\nå½¢å‚æ˜¯å®å‚çš„ä¸€ä»½ä¸´æ—¶æ‹·è´ï¼Œå¯¹å½¢å‚çš„æ”¹å˜ä¸ä¼šå½±å“å®å‚é‡Œçš„å€¼ã€‚\n\nä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ğŸ‘‰ç‚¹æˆ‘\n\nä»Šå¤©è®©æˆ‘ä»¬ä»¥æ±‡ç¼–è¯­è¨€æ¥äº†è§£å‡½æ•°è°ƒç”¨çš„å‚æ•°å‹æ ˆè¿™ä¸€çŸ¥è¯†ç‚¹\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\nä¸åŒç¼–è¯‘å™¨çš„å®ç°å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œä»¥å®é™…ä¸ºå‡†\n\n\n1.ä»€ä¹ˆæ˜¯æ ˆåŒºï¼Ÿæ ˆï¼Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚\nåœ¨å­¦ä¹ Cè¯­è¨€çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬åªå…³æ³¨å†…å­˜ä¸­çš„3ä¸ªåŒºåŸŸï¼Œåˆ†åˆ«æ˜¯æ ˆåŒºã€å †åŒºå’Œé™æ€åŒºã€‚\nå…¶ä¸­å †åŒºä¸»è¦ç”¨äºåŠ¨æ€å†…å­˜ç®¡ç†ï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²ç»å’Œå¤§å®¶ä»‹ç»è¿‡ã€‚\n\nè¯¦è§£åŠ¨æ€å†…å­˜ç®¡ç†ğŸ‘‰ç‚¹æˆ‘\n\n\nè€Œæ ˆåŒºå°±æ˜¯ç¼–è¯‘å™¨ç»™å‡½æ•°è¿è¡Œåˆ†é…çš„ç©ºé—´äº†ã€‚\nå’Œå †åŒºç©ºé—´éœ€è¦æ‰‹åŠ¨åˆ†é…ä¸åŒï¼Œè¿™ä¸€éƒ¨åˆ†ç©ºé—´æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†çš„ï¼Œå‡½æ•°çš„æ ˆå¸§ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œè‡ªåŠ¨é”€æ¯ã€‚\n1.1æ ˆåŒºå°çŸ¥è¯†ç‚¹\næ ˆåŒºçš„ä½¿ç”¨æ˜¯ä»é«˜åœ°å€åˆ°ä½åœ°å€\næ ˆåŒºçš„ä½¿ç”¨éµå¾ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡º\næ ˆåŒºçš„æ”¾ç½®æ˜¯ä»é«˜åœ°å€å¾€ä½åœ°å€æ”¾ç½®ï¼špushå‹æ ˆ\nåˆ é™¤æ˜¯ä»ä½å¾€é«˜åˆ é™¤ï¼špopå‡ºæ ˆ\n\n\n2.çŸ¥è¯†ç‚¹//æœ¬æ¬¡ä½¿ç”¨çš„ä»£ç #include &lt;stdio.h&gt;int Add(int x, int y)&#123;\tint z = 0;\tz = x + y;\treturn z;&#125;int main() &#123;\tint a = 10;\tint b = 20;\tint c = Add(a, b);\tprintf(&quot;%d\\n&quot;, c);\t\treturn 0;&#125;\n\n2.1 å¯„å­˜å™¨å¸¸è§å¯„å­˜å™¨æœ‰eaxã€ebxã€ecxã€edxï¼Œå…¶ä¸­ebpå’Œespè¾ƒä¸ºç‰¹æ®Š\n\nebpã€espè¿™ä¸¤ä¸ªå¯„å­˜å™¨ä¸­å­˜æ”¾çš„æ˜¯åœ°å€ï¼Œè¿™ä¸¤ä¸ªåœ°å€æ˜¯ç”¨æ¥ç»´æŠ¤å‡½æ•°æ ˆå¸§çš„\n\n\neax&#x2F;ebx&#x2F;ecx&#x2F;edxï¼šé€šç”¨å¯„å­˜å™¨ï¼Œä¿ç•™ä¸´æ—¶æ•°æ®\nebpï¼šæ ˆä½æŒ‡é’ˆ\nespï¼šæ ˆé¡¶æŒ‡é’ˆ\neipï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œä¿å­˜å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€\n\n\n2.2 ä¸»å‡½æ•°è°ƒç”¨æ¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œéƒ½è¦åœ¨æ ˆåŒºåˆ›å»ºä¸€ä¸ªç©ºé—´\næˆ‘ä»¬çŸ¥é“mainå‡½æ•°æ˜¯ç¨‹åºçš„å…¥å£\nå®é™…ä¸Šï¼Œmainå‡½æ•°ä¹Ÿæ˜¯è¢«å…¶ä»–å‡½æ•°è°ƒç”¨çš„\n\nmainCRTStartupå‡½æ•°è°ƒç”¨__tmainCRTStartup\n__tmainCRTStartupå‡½æ•°è°ƒç”¨mainå‡½æ•°\n\nç¼–è¯‘å™¨ä¼šå…ˆåœ¨å†…å­˜é«˜åœ°å€å¤„å¼€è¾Ÿä¸€éƒ¨åˆ†ç©ºé—´ç»™mainCRTStartupå’Œ__tmainCRTStartupå‡½æ•°ï¼Œå®ƒä»¬è¿›è¡Œè°ƒç”¨mainå‡½æ•°çš„æ“ä½œã€‚\n\nåœ¨VS2019ä¸­ï¼ŒæŒ‰F10è¿›è¡Œè°ƒè¯•ï¼Œå‡ºç°é»„è‰²å°ç®­å¤´åï¼Œå³é”®-è½¬åˆ°åæ±‡ç¼–ï¼Œå³å¯æ‰“å¼€è°ƒè¯•ä¸­æ±‡ç¼–è¯­è¨€çš„æ˜¾ç¤ºç•Œé¢\n\n3. é€æ¡è§£é‡Š3.1 ä»mainå¼€å§‹å…ˆæ¥çœ‹ç¬¬ä¸€éƒ¨åˆ†ä»£ç ï¼Œé€æ¡è¯­å¥è¿›è¡Œè§£é‡Š\npush  ebp//åœ¨æ ˆé¡¶å¼€è¾Ÿå­˜æ”¾ebpè¿™ä¸€å¯„å­˜å™¨å¯¹åº”å€¼çš„ç©ºé—´mov  ebp,esp//å°†espçš„å€¼ä¼ å…¥ebpä¸­ï¼ˆå³å°†ebpæŒ‡é’ˆç§»åŠ¨åˆ°åŸæœ¬espæŒ‡å‘çš„ä½ç½®ï¼‰sub  esp,0E4h//å°†espçš„å†…å®¹å‡å»0E4hï¼ˆå°†espç§»åŠ¨åˆ°åŸesp-0E4hçš„ä½ç½®ï¼‰push ebx//åœ¨æ ˆé¡¶æ”¾å…¥ebxpush esi//åœ¨æ ˆé¡¶æ”¾å…¥esipush edi//åœ¨æ ˆé¡¶æ”¾å…¥edi\n\n\n\nleaï¼šload effecticve address åŠ è½½æœ‰æ•ˆåœ°å€\ndwordï¼šdouble word â€“ 4ä¸ªå­—èŠ‚\n\nlea  edi,[ebp-24h]//å°†ebp-24hçš„åœ°å€æ”¾å…¥edimov  ecx,9//å°†9æ”¾å…¥ecxï¼Œå¯¹åº”åè¿›åˆ¶36mov  eax,0CCCCCCCCh//å°†0CCCCCCCChæ”¾å…¥eaxrep stos  dword ptr es:[edi]//å°†ediå¾€ä¸‹ecxä¸ªåœ°å€çš„æ•°æ®å…¨éƒ¨åˆå§‹åŒ–ä¸º0CCCCCCCCh\n\næŒ‰F10å¾€ä¸‹è¿è¡Œï¼Œè¿‡repé‚£ä¸€æ­¥åï¼Œå¯ä»¥çœ‹åˆ°36ä¸ªå­—èŠ‚çš„æ•°æ®éƒ½è¢«åˆå§‹åŒ–ä¸º0CCCCCCCCh\n\n\nç»§ç»­å¾€ä¸‹è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨åˆå§‹åŒ–aã€bå˜é‡çš„è¿‡ç¨‹\n\n\n\nVS2019ä¸‹æ˜¯å°ç«¯å­˜å‚¨\n\n\n\n\tint c =Add(a,b);mov    eax,dword ptr [b]//æŠŠbçš„å†…å®¹æ”¾å…¥eaxpush   eax  //åœ¨æ ˆé¡¶æ”¾å…¥eaxmov    ecx,dword ptr [a]//æŠŠaçš„å†…å®¹æ”¾å…¥ecxpush   ecx  //åœ¨æ ˆé¡¶æ”¾å…¥ecxcall   _Add (01A10B4h) //åœ¨æ ˆé¡¶æ”¾å…¥è¯¥åœ°å€ï¼ˆcallæŒ‡ä»¤ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼‰ \n\næœ€åè¿™ä¸€æ­¥callå¾ˆå…³é”®ï¼Œåç»­ä¼šç”¨åˆ°\n\n3.2 è°ƒç”¨AddæŒ‰F11ï¼Œè¿›å…¥Addå‡½æ•°\n\n\npush    ebp//å°†ebpä¸Šç§»mov     ebp,esp//å°†espå†…å®¹æ”¾å…¥ebpï¼ˆç§»åŠ¨ebpï¼‰sub     esp,0CCh//esp+0CChï¼ˆä¸ºAddå¼€è¾Ÿç©ºé—´ï¼‰push    ebx//åœ¨æ ˆé¡¶æ”¾å…¥ebxpush    esi//åœ¨æ ˆé¡¶æ”¾å…¥esipush    edi//åœ¨æ ˆé¡¶æ”¾å…¥edi\n\nlea      edi,[ebp-0Ch]//ebp-0Chçš„ç©ºé—´  mov      ecx,3//3å­˜å…¥ecx  mov      eax,0CCCCCCCCh//å­˜å…¥eax  rep stos  dword ptr es:[edi]//espå¾€ä¸‹0chçš„ç©ºé—´åˆå§‹åŒ–mov      ecx,offset _6A27082D_test@c (024C003h)  call     @__CheckForDebuggerJustMyCode@4 (024131Bh)\n\n\n\nç»§ç»­å¾€ä¸‹ï¼Œå¯„å­˜å™¨åˆå§‹åŒ–äº†Zåœ°å€å¤„çš„æ•°æ® ä¸º0\n\nmov    eax,dword ptr [x]//å°†xçš„å€¼æ”¾å…¥eaxadd    eax,dword ptr [y]//å°†yçš„å€¼åŠ é“eaxä¸­ï¼Œå³x+y   mov    dword ptr [z],eax//å°†eaxçš„å€¼æ”¾å…¥å˜é‡z\n\n\n\treturn z;mov    eax,dword ptr [z]//å°†å½¢å‚zçš„å€¼æ”¾å…¥eax \n\n\npop     edi//å‡ºæ ˆï¼Œåˆ é™¤ä¸ºediåˆ›å»ºçš„æ ˆåŒºpop     esi//popæŒ‡ä»¤ä¼šå°†esiçš„å€¼æ”¾å…¥esiï¼ˆç­‰äºæ²¡å˜ï¼‰  pop     ebx//æ¯popä¸€æ¬¡ï¼Œespå°±å¾€é«˜ä½ç§»åŠ¨ä¸€æ¬¡      add     esp,0CCh//ä¸ºespåœ°å€+0CChï¼Œå³é€€å‡ºAddç¨‹åºçš„æ ˆåŒºç©ºé—´ cmp     ebp,esp//å°†espçš„å€¼ä¸ebpè¿›è¡Œæ¯”è¾ƒ\n\n\ncall        __RTC_CheckEsp (0241244h)  mov         esp,ebp//ebpçš„å€¼èµ‹ç»™espï¼Œæ­¤æ—¶espå’Œebpç›¸åŒ\n\n\npop         ebp//å¼¹å‡ºebp  \n\nè¿™é‡Œæ‰§è¡Œå¼¹å‡ºæŒ‡ä»¤æ—¶\n\nå°†ebpæ‰€æŒ‡å‘çš„mainå‡½æ•°çš„èµ·å§‹åœ°å€èµ‹å€¼ç»™äº†ebpæŒ‡é’ˆ\nespæŒ‡é’ˆå‘é«˜ä½ç§»åŠ¨ä¸€ä½\n\næœ€åçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œespå’Œebpé‡æ–°å¼€å§‹ç»´æŠ¤mainå‡½æ•°çš„æ ˆåŒºç©ºé—´\n\n3.3 å›åˆ°mainå‡½æ•°ret  \n\nå‰é¢æåˆ°call   _Add (01A10B4h)è¿™æ¡æŒ‡ä»¤éå¸¸é‡è¦ï¼Œå®é™…ä¸Šï¼Œåœ¨æ‰§è¡ŒretæŒ‡ä»¤æ—¶ï¼ŒespæŒ‡é’ˆå°±æŒ‡å‘äº†æ ˆé¡¶å­˜æ”¾çš„callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ŒåŒæ—¶ï¼Œè¿™ä¸ªåœ°å€ä¹Ÿè¢«popæ‰äº†\n\nå›åˆ°è°ƒè¯•ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°é»„è‰²å°ç®­å¤´çš„ç¡®æŒ‡å‘äº†callæŒ‡ä»¤çš„ä¸‹ä¸€æ¡\n\nè€Œè¿™ä¸€æ¡æŒ‡ä»¤çš„æ„æ€ï¼Œæ˜¯å¾€espé‡ŒåŠ 8ï¼Œå³å‘é«˜ä½ç§»åŠ¨8ä¸ªå­—èŠ‚ã€‚\nå®é™…ä¸Šè¿™æ¡æŒ‡ä»¤å°±æ˜¯åœ¨é”€æ¯æˆ‘ä»¬çš„å½¢å‚\n\nmov      dword ptr [c],eax//å°†eaxä¸­çš„å€¼æ”¾å…¥å˜é‡c  \n\næ­¤æ—¶eaxä¸­å­˜æ”¾çš„å°±æ˜¯Addå‡½æ•°çš„è¿”å›å€¼\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š\nè‡ªå®šä¹‰å‡½æ•°çš„è¿”å›å€¼æ˜¯é€šè¿‡å¯„å­˜å™¨è¿™ä¸€ä¸­é—´â€œå˜é‡â€ï¼Œè¿”å›ä¸»å‡½æ•°ä¸­çš„ã€‚\n\nå…ˆæŠŠè¿”å›å€¼æ”¾å…¥å¯„å­˜å™¨A\nä¸»å‡½æ•°ä»å¯„å­˜å™¨Aä¸­å–å‡ºè¿”å›å€¼ï¼Œæ”¾å…¥æ¥å—è¿”å›å€¼çš„å˜é‡\n\n\nç»§ç»­å¾€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°printf(&quot;%d\\n&quot;, c);è¯­å¥åï¼Œç¼–è¯‘å™¨åˆä¸€æ¬¡å°†å˜é‡cçš„å€¼æ”¾å›äº†eax\nå®é™…ä¸Šè¿™é‡Œæ˜¯printfå‡½æ•°çš„è¿è¡Œï¼š\n\nå…ˆæŠŠå¾…æ‰“å°å˜é‡æ”¾å…¥eax\nåœ¨æ ˆé¡¶å‹å…¥eax\noffset string &quot;%d\\n&quot;ï¼ˆçŒœæµ‹æ˜¯æ•°æ®ç±»å‹æ£€æŸ¥ï¼‰\n_printf ï¼šæ‰§è¡Œprintfå‡½æ•°\n\n\nadd  esp,8//ç»™esp+8ä¸ªå­—èŠ‚\n\næˆ‘å¯¹è¿™ä¸€éƒ¨åˆ†äº§ç”Ÿäº†ç–‘æƒ‘ï¼Œé‡æ–°è°ƒè¯•å‘ç°\n\npush eaxè¿™ä¸€æŒ‡ä»¤è®©espå¾€ä½åœ°å€å¤„èµ°äº†4ä¸ªå­—èŠ‚\noffset string &quot;%d\\n&quot;è¿™ä¸€æŒ‡ä»¤ä¹Ÿè®©espå¾€ä½èµ°äº†4ä¸ªå­—èŠ‚\n\n\næ‰§è¡Œå®Œè¿™ä¸€æŒ‡ä»¤åï¼Œespå›åˆ°äº†æ‰§è¡Œprintfä¹‹å‰çš„åœ°å€å¤„\n\n3.4 ç»“æŸç¨‹åº\treturn 0;xor    eax,eax//xoræŒ‡ä»¤æ˜¯å¼‚æˆ–--åœ¨è¿™é‡Œçš„ä½œç”¨ä¸æ¸…æ¥š&#125;pop    edi//å‡ºæ ˆ--espå¯¹åº”ç§»åŠ¨  pop    esi//  pop    ebx//  \n\n\nadd    esp,0E4h//esp+0E4hï¼ˆé€€å‡ºä¸ºmainå‡½æ•°å¼€è¾Ÿçš„ç©ºé—´ï¼‰ cmp    ebp,esp//æ¯”è¾ƒebpå’Œesp  \n\n\n\ncall   __RTC_CheckEsp (0241244h)  mov    esp,ebp//å°†ebpçš„å€¼å¤åˆ¶ç»™esp //æ­¤æ—¶espå’Œebpçš„å€¼ä¾æ—§ç›¸åŒ    \n\n\npop    ebp//ebpå‡ºæ ˆ--espå’Œebpåˆ†ç¦»ret//mainå‡½æ•°ç»“æŸ  \n\n\n\n4.æœ¬ç¯‡åšå®¢ä¸­çš„æ±‡ç¼–è¯­è¨€æ€»ç»“\nmovï¼šæ•°æ®è½¬ç§»æŒ‡ä»¤\n\npushï¼šæ•°æ®å…¥æ ˆï¼ŒåŒæ—¶espæ ˆé¡¶å¯„å­˜å™¨å¾€ä½ä½èµ°\n\npopï¼šæ•°æ®å¼¹å‡ºè‡³æŒ‡å®šä½ç½®ï¼ŒåŒæ—¶espæ ˆé¡¶å¯„å­˜å™¨å¾€é«˜ä½èµ°\n\nsubï¼šå‡æ³•\n\naddï¼šåŠ æ³•\n\ncallï¼šå‡½æ•°è°ƒç”¨ã€‚1.å‹å…¥è¿”å›åœ°å€ï¼›2.è½¬å…¥ç›®æ ‡å‡½æ•°\n\njumpï¼šé€šè¿‡ä¿®æ”¹eipï¼Œè½¬å…¥ç›®æ ‡å‡½æ•°ï¼Œè¿›è¡Œè°ƒç”¨\n\nretï¼šå›å¤è¿”å›åœ°å€ï¼Œå‹å…¥eipï¼Œç±»ä¼¼pop eipæŒ‡ä»¤\n\ncmpï¼ˆæ¯”è¾ƒï¼‰ï¼šæ‰§è¡Œä»ç›®çš„æ“ä½œæ•°ä¸­å‡å»æºæ“ä½œæ•°çš„éšå«å‡æ³•æ“ä½œï¼Œå¹¶ä¸”ä¸ä¿®æ”¹ä»»ä½•æ“ä½œæ•°\n\nxorï¼šåœ¨ä¸¤ä¸ªæ“ä½œæ•°çš„å¯¹åº”ä½ä¹‹é—´è¿›è¡Œï¼ˆæŒ‰ä½ï¼‰é€»è¾‘å¼‚æˆ–ï¼ˆXORï¼‰æ“ä½œï¼Œå¹¶å°†ç»“æœå­˜æ”¾åœ¨ç›®æ ‡æ“ä½œæ•°ä¸­\n\n\n\néƒ¨åˆ†æ±‡ç¼–æŒ‡ä»¤å‚è€ƒï¼šCè¯­è¨€ä¸­æ–‡ç½‘\n\n\n5.ç»“è¯­\nå®Œæˆè¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œå·²ç»æ˜¯å‘¨å…­çš„00:54ğŸŒ›\nä»å‘¨äº”çš„19:20å¼€å§‹ï¼Œä¸çŸ¥ä¸è§‰ä¸­å†™äº†è¿™ä¹ˆä¹…\n\nå‡½æ•°è°ƒç”¨å †æ ˆè¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†æœ‰äº›æ™¦æ¶©éš¾æ‡‚ï¼Œå†™ä¸‹è¿™ç¯‡åšå®¢ä¹Ÿç®—æ˜¯ç†æ¸…äº†ä¸€äº›æ€è·¯å§ã€‚\nåŠ æ²¹ï¼\né¡¶ä¸ä½äº†ï¼Œç¡è§‰å»äº†\n\nè¯´æ¥è®½åˆºï¼Œå‡ ä¸ªèˆå‹è¿˜åœ¨æ‰“æŸ3äº¿é¼ æ ‡çš„æªæˆ˜æ¢¦æƒ³â€¦â€¦\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","ç¼–è¯‘"]},{"title":"ã€Cè¯­è¨€ã€‘æ–‡ä»¶æ“ä½œï¼ˆè¯¦è§£ï¼‰","url":"/posts/1752111627/","content":"[TOC]\nå¥½ä¹…æ²¡æœ‰æ›´æ–°Cè¯­è¨€å­¦ä¹ çš„åšå®¢äº†ï¼Œä»Šå¤©å¸¦æ¥çš„æ˜¯æ–‡ä»¶éƒ¨åˆ†çš„çŸ¥è¯†ç‚¹ï¼ğŸ˜‹\n1.ä¸ºä»€ä¹ˆéœ€è¦æ–‡ä»¶ï¼Ÿä¹‹å‰å­¦ä¹ è¿‡é€šè®¯å½•çš„ä»£ç å®ç°ï¼Œå¯ä»¥ç»™é€šè®¯å½•ä¸­å¢åŠ ã€åˆ é™¤è”ç³»äººã€‚ä½†æ˜¯è¿™ä¸ªé€šè®¯å½•åœ¨ä½ exeæ–‡ä»¶å…³é—­çš„åŒæ—¶å°±è¢«é”€æ¯äº†ï¼Œå®ƒçš„å†…å®¹å¹¶ä¸èƒ½é¡ºå»¶åˆ°ä¸‹ä¸€æ¬¡æ‰“å¼€è¿™ä¸ªé€šè®¯å½•ï¼Œè¿™å¯¹æˆ‘ä»¬çš„ä½¿ç”¨äº§ç”Ÿäº†ä¸ä¾¿ã€‚\nè€Œæ–‡ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°æ•°æ®çš„æŒä¹…åŒ–ï¼šå°†æ•°æ®ä¿å­˜åœ¨ç£ç›˜æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡æ‰“å¼€é€šè®¯å½•çš„æ—¶å€™ï¼Œä¹‹å‰ä¿å­˜çš„è”ç³»äººä¸ä¼šæ¶ˆå¤±ã€‚\n\n\n2.ä»€ä¹ˆæ˜¯æ–‡ä»¶ï¼Ÿæ–‡ä»¶å°±æ˜¯å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„å¸¦ç‰¹å®šæ ¼å¼çš„æ•°æ®ã€‚\n2.1æ–‡ä»¶åˆ†ç±»åœ¨ç¨‹åºè®¾è®¡ä¸­ï¼Œä¸€èˆ¬è®¨è®ºä¸¤ç§æ–‡ä»¶ï¼šç¨‹åºæ–‡ä»¶ã€æ•°æ®æ–‡ä»¶\n\nç¨‹åºæ–‡ä»¶ï¼šä»£ç æºæ–‡ä»¶å¦‚.cï¼Œç›®æ ‡æ–‡ä»¶.obj/.oï¼Œå¯æ‰§è¡Œæ–‡ä»¶.exe\næ•°æ®æ–‡ä»¶ï¼šç¨‹åºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¯»å†™çš„æ•°æ®ï¼Œæ¯”å¦‚è¯»å–å†…å®¹çš„æ–‡ä»¶ï¼Œä»¥åŠæ•°æ®è¾“å‡ºçš„æ–‡ä»¶\n\nè¿™ç¯‡åšå®¢æˆ‘ä»¬äº†è§£çš„æ˜¯æ•°æ®æ–‡ä»¶\n2.2æ–‡ä»¶åæ–‡ä»¶ååŒ…å«3ä¸ªéƒ¨åˆ†ï¼šæ–‡ä»¶è·¯å¾„+æ–‡ä»¶åä¸»å¹²+æ–‡ä»¶åç¼€\nå¦‚ï¼šc:\\code\\test.txt\næ–‡ä»¶æ ‡è¯†å¸¸è¢«ç§°ä¸ºæ–‡ä»¶å\n3.æ–‡ä»¶çš„ä½¿ç”¨3.1æ–‡ä»¶æŒ‡é’ˆåœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œéå¸¸é‡è¦çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹å°±æ˜¯æ–‡ä»¶ç±»å‹æŒ‡é’ˆï¼Œç®€ç§°æ–‡ä»¶æŒ‡é’ˆ\næ¯ä¸ªæ–‡ä»¶åœ¨å¼€è¾Ÿçš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªå¯¹äºçš„æ–‡ä»¶ä¿¡æ¯åŒºï¼Œç”¨äºä¿å­˜æ–‡ä»¶çš„åå­—ã€çŠ¶æ€ã€å½“å‰çš„ä½ç½®ç­‰ç›¸å…³ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨äº†ä¸€ä¸ªç»“æ„ä½“ä¸­ï¼Œè¯¥ç»“æ„ä½“ç³»ç»Ÿå£°æ˜ä¸ºFILE\nä¸åŒçš„Cè¯­è¨€ç¼–è¯‘å™¨éƒ½æœ‰ä¸åŒçš„FILEç±»å‹ï¼Œä½†æ˜¯å¤§åŒå°å¼‚ã€‚\næ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæ ¹æ®æ–‡ä»¶çš„å†…å®¹ï¼Œè‡ªåŠ¨åˆ›å»ºFILEç»“æ„ä½“å˜é‡ï¼Œå¹¶å¡«å……å®ƒçš„ä¿¡æ¯ã€‚\n\næˆ‘ä»¬éœ€è¦ä½¿ç”¨æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡ä¸€ä¸ªFILEç±»å‹çš„æŒ‡é’ˆæ¥è®¿é—®è¿™ä¸ªç»“æ„ä½“å˜é‡\n\n3.2æ‰“å¼€å’Œå…³é—­æ–‡ä»¶æ–‡ä»¶åœ¨è¯»å†™ä¹‹å‰éœ€è¦æ‰“å¼€æ–‡ä»¶ï¼Œä½¿ç”¨ç»“æŸåéœ€è¦å…³é—­æ–‡ä»¶\n\nè¿™ä¸€ç‚¹å’ŒåŠ¨æ€å†…å­˜ç®¡ç†å¾ˆç›¸ä¼¼\n\nANSICè§„å®šç”¨fopenå‡½æ•°æ¥æ‰“å¼€æ–‡ä»¶ï¼Œfcloseæ¥å…³é—­æ–‡ä»¶ã€‚\næ‰“å¼€æ–‡ä»¶çš„åŒæ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªFILE*çš„æŒ‡é’ˆå˜é‡æŒ‡å‘è¯¥æ–‡ä»¶ã€‚\n\nå…³é—­æ–‡ä»¶åï¼Œæ–‡ä»¶æŒ‡é’ˆå°±å˜æˆäº†é‡æŒ‡é’ˆï¼Œéœ€è¦ç½®ä¸ºNULLé˜²æ­¢é”™è¯¯è°ƒç”¨\n\nfopenå‡½æ•°æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼Œä¼šè¿”å›ç©ºæŒ‡é’ˆ\n#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;int main()&#123;    //æ‰“å¼€æ–‡ä»¶\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;r&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));//ç”¨è¯¥å‡½æ•°æ‰“å°é”™è¯¯ä¿¡æ¯\t\treturn 0;\t&#125;\t//1.è¯»æ–‡ä»¶    \t//å…³é—­æ–‡ä»¶\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n#include &lt;stdio.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;int main()&#123;\t//æ‰“å¼€æ–‡ä»¶\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));//ç”¨è¯¥å‡½æ•°æ‰“å°é”™è¯¯ä¿¡æ¯\t\treturn 0;\t&#125;\t//2.å†™æ–‡ä»¶        //å…³é—­æ–‡ä»¶\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n\nstrerrorå‡½æ•°åœ¨è¿™ç¯‡åšå®¢é‡Œé¢æœ‰è®²è§£ğŸ‘‰ç‚¹æˆ‘\n\n3.2.1æ–‡ä»¶ä½¿ç”¨æ–¹å¼é€šè¿‡è¿™å¼ è¡¨æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ä¸€ä¸‹æ–‡ä»¶ä½¿ç”¨æ–¹å¼çš„ä¸åŒç±»å‹\n\næ³¨æ„ï¼šä½¿ç”¨å®ƒä»¬ç”¨çš„éƒ½æ˜¯åŒå¼•å·ï¼Œè€Œä¸æ˜¯å•å¼•å·ï¼\n\n\nç”¨wå†™å…¥çš„æ—¶å€™ï¼Œä¼šè¦†ç›–åŸæœ¬å·²æœ‰å†…å®¹ã€‚å¦‚æœéœ€è¦åœ¨å·²æœ‰å†…å®¹åé¢è¿½åŠ ï¼Œéœ€è¦ä½¿ç”¨a\n\n3.2.2æ ‡å‡†è¾“å…¥è¾“å‡ºæµ\nè¾“å‡ºï¼šå†…å­˜â†’æ–‡ä»¶\nè¾“å…¥ï¼šæ–‡ä»¶â†’å†…å­˜\n\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼šCè¯­è¨€ç¨‹åºï¼Œè¿è¡Œçš„æ—¶å€™ä¼šé»˜è®¤æ‰“å¼€3ä¸ªæµ\n\nstdinï¼šæ ‡å‡†è¾“å…¥æµ\nstdoutï¼šæ ‡å‡†è¾“å‡ºæµ\nstderrï¼šæ ‡å‡†é”™è¯¯æµ\n\nåœ¨æ‰§è¡Œè¾“å…¥è¾“å‡ºæ“ä½œçš„æ—¶å€™ï¼Œä¹‹å‰æˆ‘ä»¬æ˜¯ç›´æ¥å°†å†…å­˜ä¸­çš„æ•°æ®printfæ‰“å°åˆ°å±å¹•ä¸Š\nç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–‡ä»¶æŒ‡é’ˆï¼Œå°†æ•°æ®è¾“å…¥åˆ°æ ‡å‡†è¾“å‡ºæµï¼Œè¾¾åˆ°ç±»ä¼¼printfçš„æ•ˆæœ\n\n3.3æ–‡ä»¶è¾“å…¥è¾“å‡ºå‡½æ•°ä¸Šè¿°ä»£ç ä¸­ï¼Œç”¨åˆ°äº†fputcå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªå­—ç¬¦è¾“å…¥åˆ°æ–‡ä»¶ä¸­\nä¸‹è¡¨åˆ—å‡ºäº†ä¸€äº›æˆ‘ä»¬ä¼šç”¨åˆ°çš„æ–‡ä»¶å‡½æ•°\n\n3.3.1å­—ç¬¦è¾“å…¥è¾“å‡ºfputcå‡½æ•°ï¼šå‘æ–‡ä»¶ä¸­å†™å…¥å•ä¸ªå­—ç¬¦\n\nfgetcå‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–å•ä¸ªå­—ç¬¦\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠåˆšåˆšæ–‡ä»¶ä¸­å†™å…¥çš„å­—ç¬¦å…¨éƒ¨æ‰“å°å‡ºæ¥äº†\n\nå®ç°æ–‡ä»¶æ‹·è´å°†ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­\nint main()&#123;\t//å®ç°ä¸€ä¸ªä»£ç å°†data.txt æ‹·è´ä¸€ä»½ ç”Ÿæˆdata2.txt\tFILE* pr = fopen(&quot;data.txt&quot;, &quot;r&quot;);\tif (pr == NULL)\t&#123;\t\tprintf(&quot;open for reading: %s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tFILE* pw = fopen(&quot;data2.txt&quot;, &quot;w&quot;);\tif (pw == NULL)\t&#123;\t\tprintf(&quot;open for writting: %s\\n&quot;, strerror(errno));\t\tfclose(pr);\t\tpr = NULL;\t\treturn 0;\t&#125;\t//æ‹·è´æ–‡ä»¶\tint ch = 0;\twhile ((ch = fgetc(pr)) != EOF)\t&#123;\t\tfputc(ch, pw);\t&#125;\tfclose(pr);\tpr = NULL;\tfclose(pw);\tpw = NULL;\treturn 0;&#125;\n\n\n\n3.3.2æ–‡æœ¬è¡Œè¾“å…¥è¾“å‡ºfputså‡½æ•°ï¼šå°†å­—ç¬¦ä¸²å†™å…¥åˆ°æ–‡ä»¶ä¸­\n//å†™ä¸€è¡Œ#include &lt;stdio.h&gt;int main()&#123;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tfputs(&quot;hello world\\n&quot;, pf);\tfputs(&quot;hehe\\n&quot;, pf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è¡Œå­—ç¬¦ä¸²å·²ç»è¢«å†™å…¥åˆ°äº†é¡¹ç›®è·¯å¾„ä¸‹çš„data.txtæ–‡ä»¶ä¸­\n\nfgetså‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–è§„å®šé•¿åº¦çš„å­—ç¬¦ä¸²\nè¯¥å‡½æ•°åœ¨ä½¿ç”¨çš„æ—¶å€™å…·æœ‰ç¬¬3ä¸ªå‚æ•°ï¼Œç”¨äºé™åˆ¶è¯»å–å­—ç¬¦ä¸²çš„é•¿åº¦\n////è¯»æ–‡ä»¶-è¯»ä¸€è¡Œint main()&#123;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;r&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\tchar buf[1000] = &#123;0&#125;;\t//è¯»æ–‡ä»¶\tfgets(buf, 3, pf);\tprintf(&quot;%s\\n&quot;, buf);\tfgets(buf, 3, pf);\tprintf(&quot;%s\\n&quot;, buf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„æ˜¯3ï¼Œå´åªè¯»å–äº†2ä¸ªå­—ç¬¦å‡ºæ¥\n\nå°†buf[2]æ›´æ”¹ä¸º1ï¼Œè°ƒè¯•æŸ¥çœ‹\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰§è¡Œç¬¬ä¸€ä¸ªfgetså‡½æ•°åï¼ŒåŸæœ¬çš„1è¢«å†™å…¥æˆäº†\\0\n\nè¿™å°±è¯å®ï¼šfgetså‡½æ•°åœ¨è¯»å–å­—ç¬¦çš„æ—¶å€™ï¼Œä¼šä»¥\\0ä½œä¸ºç»“å°¾\nå¦‚æœæˆ‘ä»¬éœ€è¦è¯»å–3ä¸ªå­—ç¬¦ï¼Œå°±éœ€è¦å°†é™åˆ¶è®¾ç½®ä¸º4\n\n3.3.3æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºè¿™é‡Œçš„â€œæ ¼å¼åŒ–â€æŒ‡çš„æ˜¯ç»“æ„ä½“è¿™ç§å…·æœ‰ç‰¹å®šæ ¼å¼çš„æ•°æ®å†…å®¹\nfprintfå‡½æ•°ï¼šå°†æ ¼å¼åŒ–æ•°æ®å†™å…¥æ–‡ä»¶ä¸­\n#include&lt;stdio.h&gt;//â€¦â€¦struct Stu&#123;\tchar name[20];\tint age;\tdouble d;&#125;;int main()&#123;\tstruct Stu s = &#123; &quot;å¼ ä¸‰&quot;, 20, 95.5 &#125;;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;w&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//å†™æ ¼å¼åŒ–çš„æ•°æ®\tfprintf(pf, &quot;%s %d %lf&quot;, s.name, s.age, s.d);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\n\nfscanfå‡½æ•°ï¼šä»æ–‡ä»¶ä¸­è¯»å–æ ¼å¼åŒ–æ•°æ®ï¼Œå­˜æ”¾åˆ°å¯¹åº”ç»“æ„ä½“å˜é‡sä¸­\n\n\n3.3.4äºŒè¿›åˆ¶è¾“å…¥è¾“å‡º\nfreadã€fwriteå¯ä»¥æ“ä½œä»»æ„ç±»å‹çš„æ•°æ®\næ­£å¦‚å®ƒçš„åå­—ï¼ŒäºŒè¿›åˆ¶è¾“å…¥å‡½æ•°æ˜¯å°†å†…å®¹ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼è¾“å…¥åˆ°æ–‡ä»¶ä¸­\n\n\nä½¿ç”¨è¯¥å‡½æ•°çš„æ—¶å€™éœ€è¦ä½¿ç”¨**â€rbâ€,â€wbâ€**æ¥æ‰“å¼€æ–‡ä»¶\n\n\nfwrite(s, sizeof(struct Stu), 2, pf);//s æ¥æº//sizeof éœ€è¦å†™å…¥å…ƒç´ çš„å¤§å°//2 éœ€è¦å†™å…¥å…ƒç´ çš„ä¸ªæ•°//pf å†™å…¥çš„ç›®æ ‡æ–‡ä»¶æŒ‡é’ˆ\n\nä»¥ä¸‹æ˜¯å†™å…¥ç»“æ„ä½“å˜é‡çš„ä¾‹å­\nstruct Stu&#123;\tchar name[20];\tint age;\tdouble d;&#125;;//äºŒè¿›åˆ¶çš„å†™int main()&#123;\tstruct Stu s[2] = &#123; &#123;&quot;å¼ ä¸‰&quot;, 20, 95.5&#125; , &#123;&quot;lisi&quot;, 16, 66.5&#125;&#125;;\tFILE* pf = fopen(&quot;data.txt&quot;, &quot;wb&quot;);\tif (pf == NULL)\t&#123;\t\tprintf(&quot;%s\\n&quot;, strerror(errno));\t\treturn 0;\t&#125;\t//æŒ‰ç…§äºŒè¿›åˆ¶çš„æ–¹å¼å†™æ–‡ä»¶\tfwrite(s, sizeof(struct Stu), 2, pf);\tfclose(pf);\tpf = NULL;\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶å†™å…¥çš„æ•°æ®å·²ç»éƒ¨åˆ†æˆäº†ä¹±ç ã€‚è¿™æ—¶å€™å®ƒçš„å†…å®¹å·²ç»æ˜¯ç”¨äºŒè¿›åˆ¶å­˜æ”¾çš„äº†ï¼Œtxté˜…è¯»å™¨æ— æ³•æ­£ç¡®è¯»å‡ºè¿™äº›æ•°æ®\n\näºŒè¿›åˆ¶çš„è¯»å–å°±æ˜¯å¤ç°è¿™ä¸€æ­¥ï¼Œå°†æ–‡æœ¬ä¸­çš„äºŒè¿›åˆ¶æ•°æ®ä»¥ç‰¹å®šæ ¼å¼è¯»å–å‡ºæ¥ï¼Œå¹¶æ”¾å…¥å¯¹åº”å˜é‡\nfread(s, sizeof(struct Stu), 2, pf);//s å­˜æ”¾æ–‡ä»¶å†…å®¹çš„å˜é‡//sizeof éœ€è¦è¯»å–å…ƒç´ çš„å¤§å°//2 éœ€è¦è¯»å–å…ƒç´ çš„ä¸ªæ•°//pf è¯»å–çš„ç›®æ ‡æ–‡ä»¶æŒ‡é’ˆ\n\n\n3.3.5 sscanf&#x2F;sprintfå‡½æ•°è¿™ä¸¤ä¸ªå‡½æ•°æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯å°†æ–‡ä»¶é‡Œé¢çš„æ ¼å¼åŒ–æ•°æ®ï¼ˆå¦‚ç»“æ„ä½“ï¼‰ä»¥å­—ç¬¦ä¸²çš„å½¢å¼æ‹·è´åˆ°å­—ç¬¦æ•°ç»„é‡Œé¢\n\nè§ä¸‹å›¾\n\n\n\n3.4.å…¶ä»–æ–‡ä»¶å‡½æ•°3.4.1 fseek\nhttps://cplusplus.com/reference/cstdio/fseek/?kw=fseek\n\nè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯ï¼šå°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°ç›¸å¯¹äºæŸä¸ªä½ç½®çš„ç‰¹å®šåç§»é‡çš„ä½ç½®\n\nå¬èµ·æ¥æœ‰ç‚¹ç»•å£ï¼Œä¸¾ä¾‹è¯´æ˜å°±çŸ¥é“äº†\n\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²â€œabcdefâ€\næ¯æ¬¡ä½¿ç”¨ä¸€æ¬¡fgetcï¼Œæ–‡ä»¶æŒ‡é’ˆå°±ä¼šå¾€åè¿›ä¸€ä½ã€‚ä½¿ç”¨ä¸¤æ¬¡ï¼Œæ–‡ä»¶æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å­—ç¬¦c\nå¦‚æœæˆ‘ä»¬éœ€è¦æŒ‡å‘fï¼Œå°±è®©æŒ‡é’ˆ\n\nä»å¼€å§‹ä½ç½®å‘åè¿›5ä½\nä»å½“å‰ä½ç½®å‘åè¿›3ä½\nä»ç»“æŸä½ç½®å‘å‰è¿›1ä½\n\n\næˆ‘ä»¬å¯ä»¥ç”¨è¯¥å‡½æ•°ï¼Œå®šä½æ–‡ä»¶æŒ‡é’ˆï¼Œå°†å…¶æ›´æ”¹åˆ°æˆ‘ä»¬éœ€è¦çš„ä½ç½®ï¼Œè¿›è¡Œå­—ç¬¦æ›¿æ¢ç­‰æ“ä½œ\nint main()&#123;    FILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);    if (pf == NULL)    &#123;        printf(&quot;%s\\n&quot;, strerror(errno));        return 0;    &#125;    //å†™æ–‡ä»¶    int ch = 0;    for (ch = &#x27;a&#x27;; ch &lt;= &#x27;z&#x27;; ch++)    &#123;        fputc(ch, pf);    &#125;    //å®šä½æ–‡ä»¶æŒ‡é’ˆ        fseek(pf, -2, SEEK_END);    fputc(&#x27;#&#x27;, pf);//å°†å½“å‰å­—ç¬¦æ›¿æ¢æˆ#    fclose(pf);    pf = NULL;    return 0;&#125;\n\n\n3.4.2 ftellè¿”å›æ–‡ä»¶æŒ‡é’ˆå½“å‰çš„åç§»é‡ï¼ˆç›¸å¯¹äºæ–‡ä»¶å¼€å¤´ï¼‰\n\n3.4.3 rewind\nhttps://cplusplus.com/reference/cstdio/rewind/?kw=rewind\n\nè®©æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®å›åˆ°æ–‡ä»¶çš„èµ·å§‹ä½ç½®\nfseek(pf, 0, SEEK_SET);//rewindå‡½æ•°ä¸è¯¥fseekå‡½æ•°æ“ä½œç­‰ä»·//ä½†æ˜¯rewindæ›´æ–¹ä¾¿\n\nint main()&#123;    FILE* pf = fopen(&quot;test.txt&quot;, &quot;r&quot;);    if (pf == NULL)    &#123;        printf(&quot;%s\\n&quot;, strerror(errno));        return 0;    &#125;    //è¯»æ–‡ä»¶    int ch = fgetc(pf);    printf(&quot;%c\\n&quot;, ch);//a    ch = fgetc(pf);    printf(&quot;%c\\n&quot;, ch);//b        int ret = ftell(pf);    printf(&quot;%d\\n&quot;, ret);//2    rewind(pf);    //fseek(pf, 0, SEEK_SET);    ret = ftell(pf);    printf(&quot;%d\\n&quot;, ret);//0    fclose(pf);    pf = NULL;    return 0;&#125;\n\n4.æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶æˆ‘ä»¬ç°åœ¨å·²ç»çŸ¥é“äº†fread&#x2F;fwriteå‡½æ•°å¯ä»¥å®ç°äºŒè¿›åˆ¶çš„è¾“å…¥è¾“å‡ºï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆå…·ä½“å®ç°çš„å‘¢ï¼Ÿ\n\næ ¹æ®æ•°æ®çš„ç»„ç»‡å½¢å¼ï¼Œæ•°æ®æ–‡ä»¶è¢«ç§°ä¸ºæ–‡æœ¬æ–‡ä»¶æˆ–è€…äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ æ•°æ®åœ¨å†…å­˜ä¸­ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨ï¼Œå¦‚æœä¸åŠ è½¬æ¢çš„è¾“å‡ºåˆ°å¤–å­˜ï¼Œå°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\nå¦‚æœè¦æ±‚åœ¨å¤–å­˜ä¸Šä»¥ASCIIç çš„å½¢å¼å­˜å‚¨ï¼Œåˆ™éœ€è¦åœ¨å­˜å‚¨å‰è½¬æ¢ã€‚ä»¥ASCIIå­—ç¬¦çš„å½¢å¼å­˜å‚¨çš„æ–‡ä»¶å°±æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚\nåœ¨å†…å­˜ä¸­ï¼Œå­—ç¬¦ä¸€å¾‹ä»¥ASCIIå½¢å¼å­˜å‚¨ï¼Œæ•°å€¼å‹æ•°æ®æ—¢å¯ä»¥ç”¨ASCIIå½¢å¼å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ã€‚\nå¯¹äºæ•°å­—10000ï¼Œå¯ä»¥ç”¨ä¸‹é¢ä¸¤ç§æ–¹å¼å­˜å‚¨\n\n1 0 0 0 0 ä½œä¸º5ä¸ªå­—ç¬¦æ¥å­˜å‚¨â€“å ç”¨5ä¸ªå­—èŠ‚\nä»¥æ•°å­—æœ¬èº«çš„äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨â€“å ç”¨4ä¸ªå­—èŠ‚\n\nè¿™æ—¶å€™ä½¿ç”¨äºŒè¿›åˆ¶çš„æ–¹å¼ï¼Œå°±èƒ½èŠ‚çœç©ºé—´\n\nç”¨å¦‚ä¸‹ä»£ç ï¼Œå°†10000ä»¥äºŒè¿›åˆ¶æ–¹å¼å†™å…¥æ–‡ä»¶ä¸­\n\nåœ¨VSä¸­æˆ‘ä»¬å¯ä»¥ä»¥ç‰¹å®šæ‰“å¼€æ–¹å¼äºŒè¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€test.txtæ–‡æ¡£\n\nå¯ä»¥çœ‹åˆ°10000æ˜¯ä»¥äºŒè¿›åˆ¶ç çš„å½¢å¼å­˜æ”¾åœ¨æ–‡ä»¶ä¸­çš„\n\n\nè¿™é‡Œæ¶‰åŠåˆ°äº†å¤§å°ç«¯çš„é—®é¢˜ğŸ‘‰ç‚¹æˆ‘\n\n\n5.æ–‡ä»¶è¯»å–ç»“æŸçš„åˆ¤å®šåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ¤æ–­fgets/fgetcçš„è¿”å›å€¼æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¯»å–ç»“æŸã€‚ä½†è¿™ä¸¤ä¸ªå‡½æ•°åœ¨æ–‡ä»¶è¯»å–é”™è¯¯çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¿”å›å’Œæ–‡ä»¶è¯»å–ç»“æŸä¸€æ ·çš„ç»“æœï¼Œæ­¤æ—¶å°±éœ€è¦åˆ¤æ–­æ–‡ä»¶æ˜¯å› ä¸ºä»€ä¹ˆæƒ…å†µç»“æŸçš„äº†\næ­¤æ—¶å°±éœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°ï¼Œferrorå’Œfeof\n5.1 ferrorferrorå‡½æ•°ï¼šåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å‡ºç°äº†è¯»å–é”™è¯¯ã€‚\n// æ¥è‡ªhttps://cplusplus.com/reference/cstdio/ferror/int ferror ( FILE * stream );\n\n\nåœ¨å‡½æ•°æè¿°é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°ä¼šåˆ¤æ–­ä¼ å…¥çš„æ–‡ä»¶æµæœ€è¿‘çš„ä¸€æ¬¡æ–‡ä»¶è¯»å†™æ˜¯å¦å‡ºç°äº†é”™è¯¯ã€‚å…¶åˆ¤æ–­çš„æ˜¯æ–‡ä»¶æµä¸­çš„errror indicatoré”™è¯¯æè¿°ç¬¦ã€‚\n\nå¦‚æœæœ‰ï¼Œè¿”å›ä¸ºçœŸ (é0å€¼)\nå¦‚æœæ²¡æœ‰ï¼Œè¿”å›0\n\nåŒæ—¶åœ¨å‡½æ•°é‡Šä¹‰é‡Œé¢ï¼Œæåˆ°äº†é”™è¯¯ä¼šè¢«clearerr/rewind/freopenè¿™ä¸‰ä¸ªå‡½æ•°æ¸…é™¤\n5.2 feofæ­¤å‡½æ•°ç”¨äºåˆ¤æ–­æ–‡ä»¶æµæ˜¯å¦è¯»å–åˆ°äº†æ–‡ä»¶æœ«å°¾\n// https://cplusplus.com/reference/cstdio/feof/int feof ( FILE * stream );\n\n\n\nå¦‚æœé‡åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼Œè¿”å›é0å€¼ï¼ˆçœŸï¼‰\nå¦‚æœæ²¡æœ‰é‡åˆ°ï¼Œè¿”å›0\n\nåœ¨å‡½æ•°çš„æè¿°å¤„ï¼Œæåˆ°äº†æµçš„å†…éƒ¨æŒ‡é’ˆå¯èƒ½æŒ‡å‘çš„æ˜¯æ–‡ä»¶ç»“å°¾ã€‚ä½†åœ¨å°è¯•è¯»å–æ–‡ä»¶ç»“å°¾ä¹‹å‰ï¼Œä¸ä¸€å®šä¼šè®¾ç½®EOFæŒ‡ç¤ºç¬¦ã€‚è¿™å¥è¯ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œçœ‹ä¸‹å›¾\n\næŒ‡é’ˆåªæœ‰è¯»å–äº†æ–‡ä»¶æœ«å°¾ï¼Œæ‰èƒ½çŸ¥é“è‡ªå·±å·²ç»èµ°åˆ°äº†æ–‡ä»¶æœ«å°¾ï¼Œä»è€Œè®¾ç½®EOFæ ‡è¯†ç¬¦\n5.3 äºŒè€…ä½¿ç”¨åœºæ™¯feof/ferrorçš„å…ˆåé¡ºåºå¹¶æ²¡æœ‰ç‰¹å®šçš„è¦æ±‚ï¼Œå› ä¸ºå®ƒä»¬ä¸¤ä¸ªçš„åˆ¤æ–­åŠŸèƒ½æ˜¯ä¸åŒçš„\n\nferroråˆ¤æ–­çš„æ˜¯è¯»å–æ˜¯å¦å‡ºç°äº†é”™è¯¯\nfeofåˆ¤æ–­çš„æ˜¯è¯»å–æ˜¯å¦åˆ°äº†æ–‡ä»¶å°¾éƒ¨\n\nä¾ç…§è¯»å–é€€å‡ºçš„ä¸åŒæƒ…å†µï¼Œå¯ä»¥åˆ†ä¸ºä¸‹é¢å‡ ç§ç±»å‹\n\nè¯»å–æˆåŠŸï¼Œæ–‡ä»¶æŒ‡é’ˆèµ°åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œå±äºæ­£å¸¸é€€å‡ºï¼›feofèƒ½å¤Ÿåˆ¤æ–­å‡ºæ–‡ä»¶æŒ‡é’ˆæ˜¯å¦èµ°åˆ°äº†æ–‡ä»¶å°¾éƒ¨ã€‚\nè¯»å–å¤±è´¥ï¼Œå‡ºç°äº†ä¸€äº›é”™è¯¯ï¼Œæ­¤æ—¶åº”è¯¥ç”¨ferroræŸ¥çœ‹é”™è¯¯åŸå› \n\nç†è®ºä¸Šè€Œè¨€ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆç”¨feofåˆ¤æ–­ï¼šå› ä¸ºè¯»å–åˆ°æ–‡ä»¶å°¾é€€å‡ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼›\nåªæœ‰feofåˆ¤æ–­æ²¡æœ‰åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œè€Œè¯»å–å‡½æ•°åˆé€€å‡ºäº†ï¼Œæ‰éœ€è¦æˆ‘ä»¬ç”¨ferrorè¿›è¡Œé”™è¯¯çš„åˆ¤æ–­ã€‚\nif(feof(fp))    printf(&quot;EOF reach&quot;);else if(ferror(fp))    printf(&quot;error while readfile&quot;);\n\nå®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯äº’æ–¥çš„\n\næˆåŠŸè¯»å–åˆ°äº†æ–‡ä»¶å°¾éƒ¨ï¼Œé‚£è‚¯å®šæ˜¯æ²¡å‡ºé”™çš„\nå‡ºé”™äº†ï¼Œè‚¯å®šæ²¡èƒ½èµ°åˆ°æ–‡ä»¶å°¾éƒ¨å¹¶è®¾ç½®EOFæ ‡è¯†ç¬¦ï¼ˆæ³¨æ„ï¼Œæ–‡ä»¶æŒ‡é’ˆå¯èƒ½å·²ç»æŒ‡å‘äº†æ–‡ä»¶å°¾éƒ¨ï¼Œä½†å‡ºé”™äº†ï¼‰\n\næ‰€ä»¥ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„å…ˆåé¡ºåºå¹¶ä¸ä¼šç›¸äº’å½±å“ğŸ˜‚\n5.4 ä¸æ¨èåªç”¨feofåˆ¤æ–­è¯»å–æ˜¯å¦ç»“æŸä¸Šè¯¾æ—¶ï¼Œè€å¸ˆå‘Šè¯‰æˆ‘ä»¬ï¼Œå¹¶ä¸æ¨èåœ¨è¯»å–æ–‡ä»¶è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨feofå‡½æ•°çš„è¿”å›å€¼æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¯»å–ç»“æŸï¼Œå¦‚ä¸‹\nwhile(!feof(fp))//ç”¨feofçš„è¿”å›å€¼åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¯»å–ç»“æŸ&#123;    c = fgetc(fp);    printf(&quot;%c&quot;,c);&#125;\n\nfgetcå‡½æ•°æœ¬èº«çš„è¿”å›å€¼å°±æ‹¥æœ‰æ­¤åŠŸèƒ½ï¼Œæ›´æ¨èåœ¨fgetcçš„å¾ªç¯ç»“æŸåï¼Œç”¨feofå‡½æ•°åˆ¤æ–­æ˜¯è¯»å–å¤±è´¥ç»“æŸï¼Œè¿˜æ˜¯é‡åˆ°æ–‡ä»¶ç»“å°¾æ­£å¸¸ç»“æŸ\n//1. æ–‡ä»¶æ‰“å¼€æ“ä½œ//2. fgetc å½“è¯»å–å¤±è´¥çš„æ—¶å€™æˆ–è€…é‡åˆ°æ–‡ä»¶ç»“æŸçš„æ—¶å€™ï¼Œéƒ½ä¼šè¿”å›EOFwhile ((c = fgetc(fp)) != EOF) // æ ‡å‡†C I/Oè¯»å–æ–‡ä»¶å¾ªç¯&#123;    putchar(c);&#125;printf(&quot;\\n&quot;);//3. åˆ¤æ–­æ˜¯ä»€ä¹ˆåŸå› ç»“æŸçš„if (ferror(fp))    puts(&quot;I/O error when reading&quot;);else if (feof(fp))    puts(&quot;End of file reached successfully&quot;);\n\nä½†åœ¨æˆ‘æŸ¥é˜…èµ„æ–™çš„æ—¶å€™ï¼Œçœ‹åˆ°Cè¯­è¨€ä¸­æ–‡ç½‘ç«™ä¸Šä½¿ç”¨äº†feofæ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¯»å–ç»“æŸã€‚æˆ‘æ„Ÿè§‰Cè¯­è¨€ä¸­æ–‡ç½‘é‡Œé¢è¯´çš„å¹¶æ²¡æœ‰å•¥é—®é¢˜ï¼Œå•çœ‹feofçš„å‡½æ•°ä½œç”¨ï¼Œä¹Ÿç¡®å®èƒ½ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¯»å–å®Œæ¯•ã€‚\nåæ¥ç»è¿‡è¯¢é—®ï¼Œå¾—çŸ¥è€å¸ˆçš„æ„æ€æ˜¯ï¼šä¸èƒ½åªç”¨feofæ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ­£å¸¸è¯»å–ç»“æŸã€‚å¿…é¡»è¦å°†feofå’Œferrorç»“åˆèµ·æ¥ã€‚åŒ…æ‹¬ä¸Šé¢æä¾›çš„ç¤ºä¾‹ä»£ç ä¸­æ­¥éª¤3ä¹Ÿæ˜¯åŒæ—¶ä½¿ç”¨äº†ferrorå’Œfeofï¼\n\n5.5 æ–‡ä»¶è¯»å–åˆ¤é”™æµç¨‹5.5.1 æ–‡æœ¬æ–‡ä»¶æ–‡æœ¬æ–‡ä»¶è¯»å–æ˜¯å¦ç»“æŸï¼Œåˆ¤æ–­è¯»å–å‡½æ•°fgetc/fgetsçš„è¿”å›å€¼\n\nEOF  (fgetc)\nNULL (fgets)\n\né€€å‡ºè¯»å–æ–‡ä»¶çš„å¾ªç¯åï¼Œç”¨feofå’Œferroråˆ¤æ–­æ˜¯å¦å‡ºç°äº†é”™è¯¯\n\n5.5.2 äºŒè¿›åˆ¶æ–‡ä»¶äºŒè¿›åˆ¶æ–‡ä»¶çš„è¯»å–ç»“æŸï¼Œåˆ™éœ€è¦åˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»çš„ä¸ªæ•°ï¼š\n\nfreadçš„è¿”å›å€¼æ˜¯æˆåŠŸè¯»å–æ•°æ®çš„ä¸ªæ•°ï¼Œåˆ¤æ–­è¿”å›å€¼æ˜¯å¦å°äºå®é™…è¦è¯»å–çš„ä¸ªæ•°\nå¦‚æœä¸ç­‰äºï¼ˆå®é™…ä¸Šåªä¼šæ˜¯å°äºï¼‰ï¼Œæœ‰ä¸¤ç§æƒ…å†µ\nè¯»å–å¤±è´¥ï¼Œé‡åˆ°é”™è¯¯\nè¯»å–å®Œæ¯•æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­çš„å†…å®¹æ²¡æœ‰SIZEå¤§å°\n\n\næ­¤æ—¶çš„åœºæ™¯ï¼Œé€‚åˆå…ˆç”¨feofåˆ¤æ–­æ˜¯å¦å·²åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œå†ç”¨ferroråˆ¤æ–­æ˜¯å¦ä¸ºæ–‡ä»¶é”™è¯¯\nå¦‚æœfeofåˆ¤æ–­å·²ç»è¯»åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œè¯´æ˜æ˜¯æ–‡ä»¶ä¸­çš„å†…å®¹å°‘äºSIZEå¤§å°ï¼Œåº”è¯¥æç¤ºæ–‡ä»¶ä¸­çš„æ•°æ®ä¸è¶³SZIEå­—èŠ‚\nå¦‚æœfeofåˆ¤æ–­æœªèµ°åˆ°æ–‡ä»¶å°¾éƒ¨ï¼Œè¯´æ˜å‡ºç°äº†é”™è¯¯ï¼Œç”¨ferroråˆ¤æ–­ï¼Œå¹¶æç¤ºæ–‡ä»¶è¯»å–é‡åˆ°é”™è¯¯\n\n\n\nå†æ¬¡è¯´æ˜ï¼Œfeofå’Œferrorä½¿ç”¨çš„å…ˆåé¡ºåºæ²¡æœ‰æ˜ç¡®åŒºåˆ«å’Œç¡¬æ€§è¦æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®è‡ªå·±çš„åœºæ™¯ï¼Œç»™é”™è¯¯åˆ¤æ–­åŠ ä¸Šå¯¹åº”çš„æç¤ºä¿¡æ¯å³å¯ï¼\n\n6.æ–‡ä»¶ç¼“å†²åŒº\nANSIC æ ‡å‡†é‡‡ç”¨â€œç¼“å†²æ–‡ä»¶ç³»ç»Ÿâ€å¤„ç†æ•°æ®æ–‡ä»¶ã€‚\n\næ‰€è°“ç¼“å†²æ–‡ä»¶ç³»ç»Ÿæ˜¯æŒ‡ç³»ç»Ÿè‡ªåŠ¨åœ°åœ¨å†…å­˜ä¸­ä¸ºç¨‹åºä¸­æ¯ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„æ–‡ä»¶å¼€è¾Ÿä¸€å—â€œæ–‡ä»¶ç¼“å†²åŒºâ€ã€‚ä»å†…å­˜å‘ç£ç›˜è¾“å‡ºæ•°æ®ä¼šå…ˆé€åˆ°å†…å­˜ä¸­çš„ç¼“å†²åŒºï¼Œè£…æ»¡ç¼“å†²åŒºåæ‰ä¸€èµ·é€åˆ°ç£ç›˜ä¸Šã€‚\n\nè¿™å°±å’Œgitä¸€æ ·ï¼Œæ˜¯å…ˆå°†éœ€è¦pushçš„æ–‡ä»¶æ”¾å…¥ç¼“å­˜åŒºï¼Œç¡®è®¤æ–‡ä»¶æ— è¯¯åå†pushåˆ°è¿œç¨‹ä»“åº“ä¸­\n\nå¦‚æœä»ç£ç›˜å‘è®¡ç®—æœºè¯»å…¥æ•°æ®ï¼Œåˆ™ä»ç£ç›˜æ–‡ä»¶ä¸­è¯»å–æ•°æ®è¾“å…¥åˆ°å†…å­˜ç¼“ å†²åŒºï¼ˆå……æ»¡ç¼“å†²åŒºï¼‰ï¼Œç„¶åå†ä»ç¼“å†²åŒºé€ä¸ªåœ°å°†æ•°æ®é€åˆ°ç¨‹åºæ•°æ®åŒºï¼ˆç¨‹åºå˜é‡ç­‰ï¼‰ã€‚ç¼“å†²åŒºçš„å¤§å°æ˜¯Cç¼–è¯‘ç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰å†³å®šçš„ã€‚\n\nå› ä¸ºæœ‰ç¼“å†²åŒºçš„å­˜åœ¨ï¼ŒCè¯­è¨€åœ¨æ“ä½œæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åšåˆ·æ–°ç¼“å†²åŒºæˆ–è€…åœ¨æ–‡ä»¶æ“ä½œç»“æŸçš„æ—¶å€™å…³é—­æ–‡ ä»¶ã€‚ å¦‚æœä¸åšï¼Œå¯èƒ½å¯¼è‡´è¯»å†™æ–‡ä»¶çš„é—®é¢˜ã€‚\nä»£ç ç¤ºä¾‹1#include &lt;stdio.h&gt;#include &lt;windows.h&gt;int main()&#123;\tFILE* pf = fopen(&quot;test.txt&quot;, &quot;w&quot;);\tfputs(&quot;abcdef&quot;, pf);//å…ˆå°†ä»£ç æ”¾åœ¨è¾“å‡ºç¼“å†²åŒº\tprintf(&quot;ç¡çœ 10ç§’-å·²ç»å†™æ•°æ®äº†ï¼Œæ‰“å¼€test.txtæ–‡ä»¶ï¼Œå‘ç°æ–‡ä»¶æ²¡æœ‰å†…å®¹\\n&quot;);\tSleep(10000);\tprintf(&quot;åˆ·æ–°ç¼“å†²åŒº\\n&quot;);\tfflush(pf);//åˆ·æ–°ç¼“å†²åŒºæ—¶ï¼Œæ‰å°†è¾“å‡ºç¼“å†²åŒºçš„æ•°æ®å†™åˆ°æ–‡ä»¶ï¼ˆç£ç›˜ï¼‰\t\tprintf(&quot;å†ç¡çœ 10ç§’-æ­¤æ—¶ï¼Œå†æ¬¡æ‰“å¼€test.txtæ–‡ä»¶ï¼Œæ–‡ä»¶æœ‰å†…å®¹äº†\\n&quot;);\tSleep(10000);\tfclose(pf);\t//æ³¨ï¼šfcloseåœ¨å…³é—­æ–‡ä»¶çš„æ—¶å€™ï¼Œä¹Ÿä¼šåˆ·æ–°ç¼“å†²åŒº\tpf = NULL;\treturn 0;&#125;\n\nè¿è¡Œç¨‹åºï¼Œé€šè¿‡sleepå‡½æ•°æš‚åœç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°åˆšå¼€å§‹å­—ç¬¦ä¸²å¹¶æ²¡æœ‰å­˜å…¥æ–‡ä»¶ä¸­\n\nè€Œæ˜¯å…ˆå†™å…¥è¾“å…¥ç¼“å­˜åŒºï¼Œåˆ·æ–°ç¼“å­˜åŒºåï¼Œæ‰å†™å…¥txtæ–‡ä»¶\n\nä»£ç ç¤ºä¾‹2\n#include &lt;stdio.h&gt;#include &lt;windows.h&gt;int main()&#123;\twhile (1)\t&#123;\t\tprintf(&quot;hehe\\n&quot;);\t\t//åœ¨linuxç¯å¢ƒä¸­ï¼Œä¸å¸¦&#x27;\\n&#x27;çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰“å°ï¼ˆæ²¡æœ‰åˆ·æ–°ç¼“å­˜åŒºï¼‰\t\t//è€Œåœ¨VSç¯å¢ƒä¸­ï¼Œå¸¦ä¸å¸¦éƒ½ä¼šæ­£å¸¸æ‰“å°\t\tSleep(1000);//linuxç¯å¢ƒä¸­ï¼Œsleepå‡½æ•°çš„å‚æ•°ï¼Œå•ä½æ˜¯ç§’ï¼ˆVSæ˜¯æ¯«ç§’ï¼‰        //             linuxç¯å¢ƒä¸‹ï¼Œsleepå‡½æ•°éœ€è¦å°å†™ï¼ŒVSä¸‹æ˜¯Sleep\t&#125;\treturn 0;&#125;\n\n\nåœ¨Linuxç¯å¢ƒä¸‹ï¼ˆæ ‘è“æ´¾ï¼‰æµ‹è¯•è¿™ä¸ªä»£ç \nå¯ä»¥çœ‹åˆ°ï¼Œå»æ‰\\nåï¼Œä»£ç å¹¶ä¸ä¼šæ‰“å°hehe\n\nç¼–è¯‘çš„æ—¶å€™ï¼Œé‡åˆ°æŠ¥é”™ğŸ‘‡ï¼Œä½†æ˜¯ç¨‹åºä¾æ—§ç¼–è¯‘å‡ºæ¥äº†\nimplicit declaration of function â€˜sleepâ€™\n\nCSDNæŸ¥äº†æŸ¥ï¼Œå‘ç°æ˜¯éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶#include &lt;unistd.h&gt;\né‡æ–°ç¼–è¯‘ï¼Œæ²¡æœ‰æŠ¥é”™äº†ï¼ˆæ­¤å¤„heheå·²ç»åŠ äº†\\nï¼Œç¨‹åºæ­£å¸¸æ‰“å°ï¼‰\n\n\nç»“è¯­æ–‡ä»¶ç« èŠ‚çš„å†…å®¹éå¸¸ä¸°å¯Œï¼Œä½ å­¦è´¹äº†å—ï¼ğŸ˜\nå¤§å¤šæ•°å†…å®¹è¿˜æ˜¯éœ€è¦æˆ‘ä»¬å¤šå¤šæ“ä½œæ¥ç†Ÿæ‚‰å®ƒçš„çœŸæ­£ä½œç”¨\n\nå¦‚æœå†…å®¹æœ‰è¯¯ï¼Œè¿˜è¯·å¤§ä½¬æ— æƒ…æŒ‡æ­£ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["æ–‡ä»¶","Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€Cè¯­è¨€ã€‘clock_gettimeå‡½æ•°çš„ä½¿ç”¨","url":"/posts/107825263/","content":"å‡½æ•°çš„åŸºæœ¬ä¿¡æ¯å¦‚ä¸‹\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é…ç½®ä½ æƒ³è·å–ä»€ä¹ˆç±»å‹çš„æ—¶é—´\nç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ï¼Œä¼šå°†å½“å‰æ—¶é—´å­˜æ”¾åˆ°ä¸€ä¸ªç»“æ„ä½“é‡Œé¢ç»™ä½ è¿”å›ã€‚\nè¿”å›å€¼æ ‡è¯†æ˜¯å¦è·å–æˆåŠŸ\n\n//å¤´æ–‡ä»¶#include &lt;time.h&gt;//å‡½æ•°åŸå‹int clock_gettime( clockid_t clock_id,struct timespec * tp );// timespec ç»“æ„ä½“struct timespec &#123;     __time_t tv_sec; /* ç§’ */     __syscall_s long_t tv_nsec; /* çº³ç§’ */&#125;;\n\nç¬¬ä¸€ä¸ªå‚æ•°æœ‰ä¸‹é¢å‡ ç§é€‰é¡¹\nCLOCK_REALTIME: æ˜¯æŒ‡ç³»ç»Ÿæ—¶é—´ï¼Œéšç€ç³»ç»Ÿæ—¶é—´çš„æ”¹å˜è€Œæ”¹å˜ã€‚ç³»ç»Ÿæ—¶é’Ÿä¼šè¢«ç”¨æˆ·è€Œæ”¹å˜ã€‚å¹¶éä¸å˜çš„æ—¶é—´æˆ³ã€‚CLOCK_MONOTONIC: æŒ‡ä»ç³»ç»Ÿå¯åŠ¨æ—¶å¼€å§‹è®¡æ—¶ã€‚ä¸å—ç³»ç»Ÿè®¾ç½®å½±å“ï¼Œä¹Ÿä¸ä¼šè¢«ç”¨æˆ·æ”¹å˜ã€‚CLOCK_PROCESS_CPUTIME_ID: æŒ‡è¿™ä¸ªè¿›ç¨‹è¿è¡Œåˆ°å½“å‰ä»£ç æ—¶ï¼ŒCPUèŠ±è´¹çš„æ—¶é—´ã€‚CLOCK_THREAD_CPUTIME_ID: æŒ‡è¿™ä¸ªçº¿ç¨‹è¿è¡Œåˆ°å½“å‰ä»£ç æ—¶ï¼ŒCPUèŠ±è´¹çš„æ—¶é—´ã€‚\n\nä½¿ç”¨ä¾‹å­\n#include&lt;stdio.h&gt;#include&lt;time.h&gt;int main()&#123;    struct timespec now;    clock_gettime(CLOCK_MONOTONIC,&amp;now);    printf(&quot;Seconds = %ld \\t Nanoseconds = %ld\\n&quot;,, now.tv_sec, now.tv_nsec);    return 0;&#125;\n\nè¾“å‡ºç»“æœ\nSeconds = 29642          Nanoseconds = 751516090\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘æ’åºä¸‰ä¸ªè¾“å…¥çš„æ•°å­—","url":"/posts/3460916609/","content":"å¦‚ä½•å°†è¾“å…¥çš„3ä¸ªæ•°å­—æ’åºå¹¶æ‰“å°å‡ºæ¥@[TOC]\næ‰¿æ¥ä¸Šç¯‡åšå®¢ä¸­è¾“å‡ºæ•°ç»„å†…å…ƒç´ æœ€å¤§å€¼çš„å†…å®¹\næœ¬ç¯‡åšå®¢å‘å¤§å®¶åˆ†äº«å¦‚ä½•å°†æˆ‘ä»¬è¾“å…¥çš„ä¸‰ä¸ªæ•°å­—è¿›è¡Œå¤§å°æ’åºå¹¶æ‰“å°å‡ºæ¥\n1.scanfå‡½æ•°int main()&#123;\tint a = 0;\tint b = 0;\tint c = 0;\tscanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c);&#125;\n\næ—¢ç„¶éœ€è¦è¾“å…¥ï¼Œé‚£å°±è¦ç”¨åˆ°scanfå‡½æ•°æ¥æ¥å—æˆ‘ä»¬è¾“å…¥çš„æ•°å­—\n\nè¦ä½¿ç”¨æŒ‡é’ˆå˜é‡ï¼Œå› ä¸ºè¿™é‡Œçš„scanféœ€è¦æ”¹å˜æˆ‘ä»¬çš„aï¼Œbï¼Œc\nscanfçš„å¤´æ–‡ä»¶æ˜¯ &lt;stdio.h&gt;\n\n2.tmpç›’å­ç›¸ä¿¡å¤§å®¶åœ¨è‡ªå·±çš„å­¦ä¹ ä¸­å·²ç»æ¥è§¦è¿‡ä½¿ç”¨tmpæ¥è¿›è¡Œå¤§å°æ¯”è¾ƒçš„ä»£ç äº†\nä»€ä¹ˆï¼Ÿæ²¡æœ‰ï¼Ÿ\né‚£ä¹Ÿæ²¡å…³ç³»ï¼ŒåŸºæœ¬å®ç°çš„åŸç†æ˜“æ‡‚çš„å¾ˆï¼\nif (a &lt; b)\t&#123;\t\tint tmp = a;\t\ta = b;\t\tb = tmp;\t&#125;\n\n\næŠŠaçš„å€¼èµ‹ç»™tmp\nå› ä¸ºaå°äºbï¼Œæ‰€ä»¥æˆ‘ä»¬è®©aç­‰äºæ›´å¤§çš„å€¼\nå†ä½¿ç”¨tmpæŠŠåŸæ¥æ˜¯açš„å€¼èµ‹ç»™b\n\nè¿™æ ·å°±å†™å¥½äº†ä¸€ä¸ªå¤§å°æ¯”è¾ƒå’Œäº¤æ¢çš„è¯­å¥äº†\næˆ‘ä»¬åªéœ€è¦CTRL+Cç„¶å+V\nç¨å¾®æ”¹æ”¹é‡Œé¢çš„abc\nå°±èƒ½å†™å‡ºä¸‹é¢çš„å®Œæ•´ä»£ç \n#include&lt;stdio.h&gt;int main()&#123;\tint a = 0;\tint b = 0;\tint c = 0;\tscanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c);\tif (a &lt; b)\t&#123;\t\tint tmp = a;\t\ta = b;\t\tb = tmp;\t&#125;\tif (a &lt; c)\t&#123;\t\tint tmp = a;\t\ta = c;\t\tc = tmp;\t&#125;\tif (b &lt; c)\t&#123;\t\tint tmp = b;\t\tb = c;\t\tc = tmp;\t&#125;\tprintf(&quot;%d&gt;%d&gt;%d&quot;, a, b, c);\treturn 0;&#125;\n\nè¿è¡Œä¸€ä¸‹\n\nè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬è¾“å…¥æ•°å­—çš„æ—¶å€™éœ€è¦ç”¨ç©ºæ ¼éš”å¼€ä¸¤ä¸ªæ•°å­—\nå› ä¸ºè¿™ä¸²ä»£ç å®ç°çš„æ˜¯ä»å¤§åˆ°å°æ’åˆ—\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‰“å°çš„æ—¶å€™åœ¨æ¯ä¸ªæ•°å­—ä¹‹é—´åŠ ä¸ª&gt;å·\nè¿™é‡Œæ˜¾ç¤ºçš„å†…å®¹å’Œä¸‹é¢è¿™è¡Œä»£ç %dä¸­é—´çš„å†…å®¹æ˜¯ä¸€è‡´çš„\nprintf(&quot;%d&gt;%d&gt;%d&quot;, a, b, c);\n\næ¯”å¦‚æˆ‘æŠŠä¸­é—´çš„&gt;æ”¹æˆ#å·ï¼Œæ‰“å°å‡ºæ¥ä¹Ÿæ˜¯ä¸€è‡´çš„\n\næ³¨æ„çš„ç‚¹åœ¨ç¼–å†™è¿™ä¸ª3ä¸ªæ•°å­—æ¯”è¾ƒçš„ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å…ˆå°†aå’Œbã€cæ¯”è¾ƒï¼Œå†æ¯”è¾ƒbå’Œcä¸‹é¢çš„è¿™ä¸ªä»£ç æ˜¯ä¸€ä¸ªé”™è¯¯çš„ä»£ç \nif (a &lt; b)&#123;\tint tmp = a;\ta = b;\tb = tmp;&#125;if (b &lt; c)&#123;\tint tmp = b;\tb = c;\tc = tmp;&#125;if (a &lt; c)&#123;\tint tmp = a;\ta = c;\tc = tmp;\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆç¡®å®šaé‡Œé¢è£…çš„æ˜¯æœ€å¤§çš„é‚£ä¸ªæ•°å­—ï¼Œç„¶åæ‰èƒ½è®©bå’Œcæ¯”è¾ƒå†³å‡ºâ€œå­£å†›â€å¦‚æœè¿™æ ·è¯´ä½ è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ï¼Œå¯ä»¥å°è¯•å°†è¿™ä¸²ä»£ç è¾“å…¥vsç¼–è¯‘å™¨ï¼Œç”¨ctrl+f10è°ƒè¯•ï¼ŒæŸ¥çœ‹è¿è¡Œä¸€ä¸ªifè¯­å¥ä¹‹åaï¼Œbï¼Œcçš„èµ‹å€¼çš„å˜åŒ–\n\nç»“è¯­è¿™ä¸²ä»£ç å¦‚æœç»§ç»­å¤åˆ¶ç²˜è´´çš„è¯å¯ä»¥å®ç°ä¸æ­¢3ä¸ªæ•°å­—çš„å¤§å°æ’åˆ—å¹¶æ‰“å°\nä¸çŸ¥é“èƒ½ä¸èƒ½ç”¨è‡ªå®šä¹‰å‡½æ•°å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Ÿ\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘çŒœæ•°å­—æ¸¸æˆ | é¦–ç¯‡åšå®¢","url":"/posts/2820557606/","content":"è¿™æ˜¯ä¸€åˆå­¦cè¯­è¨€çš„æ–°äººçš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œå°è¯•ä½¿ç”¨Markdownçš„æ–¹å¼å†™å…¥\n\n\nè¿™æ˜¯ä¸€åˆå­¦cè¯­è¨€çš„æ–°äººçš„ç¬¬ä¸€ç¯‡åšå®¢å°è¯•ä½¿ç”¨Markdownçš„æ–¹å¼å†™å…¥(æœ¬æ¥ç”¨çš„51ctoï¼Œå‘ç°äººå¥½å°‘ï¼Œäºæ˜¯è·‘è¿‡æ¥äº†ï¼‰\nä»€ä¹ˆæ˜¯MarkdownMarkdownæ˜¯ç°åœ¨æ™®éä½¿ç”¨çš„ä¸€ç§æ–‡æ¡£ä¹¦å†™è¯­è¨€æ ¼å¼ï¼Œåªéœ€ç”¨ä¸€äº›éå¸¸ç®€å•æ˜“è®°çš„ç¬¦å·ï¼Œå¦‚#*/&gt;[]0\\ï¼Œå°±å¯ä»¥è½»æ¾å†™å‡ºä¸€ç¯‡å…·æœ‰è‰¯å¥½çš„æ’ç‰ˆå’Œå¯è¯»æ€§çš„æ–‡.æ¥ä¸‹æ¥è¿›å…¥æˆ‘ä»¬çš„æ­£é¢˜\nçŒœæ•°å­—æ¸¸æˆè¿™æ˜¯ä¸€éå¸¸ç»å…¸çš„ä»£ç åº”ç”¨åŸºæœ¬é€»è¾‘å¦‚ä¸‹ï¼š\n\n1ï¼è®¡ç®—æœºç”Ÿæˆä¸€ä¸ªéšæœºæ•°2ï¼ç©å®¶è¾“å…¥ä¸€ä¸ªçŒœæƒ³çš„æ•°å­—3ï¼è®¡ç®—æœºæç¤ºâ€œçŒœå¤§äº†â€æˆ–è€…â€œçŒœå°äº†â€å¹¶åœ¨ç©å®¶çŒœæµ‹æ­£ç¡®æ—¶æç¤ºâ€œæ­å–œä½ ï¼ŒçŒœå¯¹äº†â€\nå…ˆæ¥çœ‹çœ‹æ¸¸æˆæœ€ç»ˆæ˜¯ä»€ä¹ˆæ ·å­çš„å§\n\nç©å®¶è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªèœå•ä»¥åŠé€‰æ‹©\n\n\né”®å…¥1å³ä¸ºå¼€å§‹æ¸¸æˆ\n\nç³»ç»Ÿåœ¨ç©å®¶çŒœå°æˆ–è€…çŒœå¤§ä¹‹åéƒ½ä¼šæœ‰å¯¹åº”çš„æç¤ºï¼ŒçŒœå¯¹ä¹‹åç¨‹åºä¹Ÿä¼šå†æ¬¡è¿è¡Œï¼Œç©å®¶å¯ä»¥é€‰æ‹©é€€å‡ºæˆ–è€…å†æ¥ä¸€æ¬¡\né‚£ä¹ˆè¿™ä¸ªçŒœæ•°å­—æ¸¸æˆæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ\né¦–å…ˆæˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªç®€æ˜“çš„menu\nvoid menu()&#123;\tprintf(&quot;*****************************\\n&quot;);\tprintf(&quot;****  1.play   0.exit    ****\\n&quot;);\tprintf(&quot;*****************************\\n&quot;);&#125;\nå…‰æ˜¯è¿™ä¸ªmenuè¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªä»£ç ä¸²æ¥å®ç°åœ¨1.playå’Œ0.exitä¹‹é—´é€‰æ‹©çš„åŠŸèƒ½\nswitch caseè¯­å¥ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯switchè¯­å¥\nmenu();printf(&quot;è¯·é€‰æ‹©&gt;:&quot;);scanf(&quot;%d&quot;, &amp;input);switch (input)&#123;case 1:\tgame();//çŒœæ•°å­—æ¸¸æˆ\tbreak;case 0:\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\tbreak;default:\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\tbreak;&#125;\næ˜¯ä¸æ˜¯è§‰å¾—å°‘äº†ç‚¹ä»€ä¹ˆï¼Ÿåˆ«æ€¥ï¼\n\nç©å®¶è‚¯å®šæƒ³å¤šæ¬¡æ¸¸ç©è¿™ä¸ªçŒœæ•°å­—æ¸¸æˆï¼Œæ€»ä¸èƒ½æ˜¯ä¸€ä¸ªä¸€æ¬¡æ€§æ¸¸æˆå§\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™ä¸ªswitchåŠ ä¸Šå¾ªç¯è¯­å¥\nè¿™é‡Œæˆ‘ç”¨çš„æ˜¯do whlieå¾ªç¯\n\nint main()&#123;\tint input = 0;\tdo\t&#123;\t\tmenu();\t\tprintf(&quot;è¯·é€‰æ‹©&gt;:&quot;);\t\tscanf(&quot;%d&quot;, &amp;input);\t\tswitch (input)\t\t&#123;\t\tcase 1:\t\t\tgame();//çŒœæ•°å­—æ¸¸æˆ\t\t\tbreak;\t\tcase 0:\t\t\tprintf(&quot;é€€å‡ºæ¸¸æˆ\\n&quot;);\t\t\tbreak;\t\tdefault:\t\t\tprintf(&quot;é€‰æ‹©é”™è¯¯\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125; while (input);\treturn 0;&#125;\nå› ä¸ºæˆ‘ä»¬è¿™é‡Œç”¨åˆ°äº†scanfåº“å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶ #include &lt;stdio.h&gt;\næ³¨æ„è¿™é‡Œæˆ‘ä»¬çš„game()å‡½æ•°æ˜¯æ¥ä¸‹æ¥è¦ç¼–å†™çš„çŒœæ•°å­—æ¸¸æˆçš„ä¸»è¦å‡½æ•°\næˆ‘ä»¬å¯ä»¥å…ˆå±è”½æ‰game()æ¥æµ‹è¯•ç›®å‰ä»£ç æ˜¯å¦æ­£ç¡®\n\nå¦‚æœä½ èƒ½å¤ç°å’Œæˆ‘ä¸€æ ·çš„è¿è¡Œæ¡†ï¼Œè¯´æ˜ç›®å‰ç¼–è¯‘çš„é€‰æ‹©ç¨‹åºæ˜¯æ²¡é—®é¢˜çš„\næ¥ä¸‹æ¥ä¾¿æ˜¯é‡å¤´æˆå¦‚ä½•ç¼–å†™æˆ‘ä»¬çš„game()ç¨‹åºï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬è¦å…ˆå¼•å…¥ä¸€ä¸ªrandå‡½æ•°ï¼šrandæ˜¯ä¸€ä¸ªç”Ÿæˆéšæœºæ•°å­—çš„å‡½æ•° ç‚¹å‡»æŸ¥çœ‹randå‡½æ•°å®šä¹‰\n\nä»å®šä¹‰æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œrandèƒ½ç”Ÿæˆçš„æ˜¯0åˆ°RAND_MAXçš„æ•´æ•°\n\né€šè¿‡æŸ¥è¯¢ç™¾åº¦ç™¾ç§‘æˆ‘ä»¬å¯ä»¥çŸ¥é“RAND_MAXæœ€å°ä¸º7FFF\nä½¿ç”¨WIN10è‡ªå¸¦çš„è®¡ç®—å™¨ä¸­çš„ç¨‹åºå‘˜è®¡ç®—å™¨ï¼Œå¯ä»¥å¾—çŸ¥7FFF(16è¿›åˆ¶)å³ä¸º32767(åè¿›åˆ¶)æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç¼–è¯‘ä¸€ä¸ªç®€å•çš„ç¨‹åºæŸ¥çœ‹randä¼šç”Ÿæˆä»€ä¹ˆæ•°å­—\nvoid game()&#123;\tint ret = 0;\tint guess = 0;\tret = rand()%100+1; //ç”Ÿæˆ1-100çš„éšæœºæ•°\tprintf(&quot;%d\\n&quot;, ret);&#125;\nç¨‹åºå¾ˆå¥½çš„ç”Ÿæˆäº†1-100çš„æ•°å­—ï¼Œä½†æ˜¯çœŸçš„æœ‰è¿™ä¹ˆç®€å•å—ï¼Ÿå¦‚æœä½ å†æ¬¡è¿è¡Œç¨‹åºï¼Œå°±ä¼šå‘ç°ä¸¤æ¬¡è¿è¡Œæ¯æ¬¡ç”Ÿæˆçš„ç»“æœéƒ½ä¸€æ¨¡ä¸€æ ·ç©å®¶å³ä¾¿æ˜¯é‡æ–°è¿›è¡Œæ¸¸æˆï¼ŒçŒœçš„è¿˜æ˜¯ä¸Šä¸€æ¬¡çŒœçš„æ•°å­—ï¼Œé‚£æ€ä¹ˆè¡Œï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±è¦å¼•å…¥å’Œrandç›¸å…³çš„å¦å¤–ä¸€ä¸ªå°çŸ¥è¯†ç‚¹\nç”Ÿæˆéšæœºæ•°èµ·å§‹ç‚¹å¦‚æœä½ åœ¨ä¸Šé¢æåˆ°çš„randå®šä¹‰çš„ç½‘ç«™ç»§ç»­å¾€ä¸‹æ»‘ï¼Œä¾¿èƒ½çœ‹åˆ°srand\n\nè¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦ç”¨åˆ°çš„å‡½æ•°\nvoid game()&#123;\tint ret = 0;\tint guess = 0;\tret = rand()%100+1;//ç”Ÿæˆ1-100çš„éšæœºæ•°\tsrand(1);\tprintf(&quot;%d\\n&quot;, ret);&#125;\næˆ‘ä»¬å…ˆæ·»åŠ srand(1)æŸ¥çœ‹æ•ˆæœ\n\nè¿™æ—¶æ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°å­—å˜æˆç»Ÿä¸€çš„42\nå¦‚æœæˆ‘ä»¬æ”¹æˆsrand(2)çš„è¯\nä¼šå‘ç°é™¤äº†ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯42ä¹‹å¤–ï¼Œå…¶ä»–çš„æ•°å­—éƒ½æ˜¯46è¿™æ˜¯å› ä¸ºrandå‡½æ•°éœ€è¦å¦å¤–ä¸€ä¸ªéšæœºæ•°ä½œä¸ºå®ƒç”Ÿæˆéšæœºæ•°çš„èµ·ç‚¹å¦‚æœæˆ‘ä»¬æƒ³è¦randæ¯æ¬¡éƒ½èƒ½ç”Ÿæˆä¸ä¸€æ ·çš„éšæœºæ•°çš„è¯å°±å¿…é¡»ç”¨srand(è¿™é‡Œéœ€è¦ä¸€ä¸ªéšæœºæ•°)è¿™ä¸æ˜¯å¥—å¨ƒå—ï¼Ÿæˆ‘ä»¬éœ€è¦éšæœºæ•°æ¥ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç¨‹åºä¸ä¼šæ­»å¾ªç¯ï¼Ÿé‚£ä»€ä¹ˆæ ·çš„æ•°å­—æ˜¯ä¼šä¸€ç›´å˜åŒ–çš„å‘¢ï¼Ÿ\næ—¶é—´å‡½æ•°è¿™é‡Œåˆè¦å¼•å…¥å¦å¤–ä¸€ä¸ªtimeå‡½æ•°\nsrand((unsigned)time(NULL));\n\n\nåŒæ—¶æˆ‘ä»¬éœ€è¦äº†è§£æ—¶é—´æˆ³çš„å®šä¹‰\nå½“å‰è®¡ç®—æœºçš„æ—¶é—´ - è®¡ç®—æœºçš„èµ·å§‹æ—¶é—´(1970.01.01 00:00:00) = (xxxx) ç§’ \n\nè¿™ä¸ªæ•°å­—ä¾¿æ˜¯æˆ‘ä»¬æœ€æ˜“å¾—çš„éšæ—¶åœ¨å˜åŒ–çš„æ•°å­—ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨åˆšæ‰æŸ¥è¯¢randå®šä¹‰çš„ç½‘ç«™æ‰¾åˆ°timeçš„å®šä¹‰ [ç‚¹æˆ‘æŸ¥çœ‹]\n\næˆ‘ä»¬æŠŠåˆšæ‰æ˜¯srand(2)æ”¹æˆå¦‚ä¸‹æ ¼å¼ï¼Œå†æ¬¡è°ƒè¯•ä»£ç \n\ntimeå‡½æ•°éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶#include&lt;time.h&gt;\n\n\nè¿™ä¸€æ¬¡æˆ‘ä»¬ç»ˆäºç”Ÿæˆäº†å®Œå…¨éšæœºçš„1-100çš„æ•°å­—\n\nä½†æ˜¯æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªgameå‡½æ•°æ˜¯å¤„åœ¨mainå‡½æ•°å¾ªç¯è¯­å¥ä¸­çš„\n\nä¹Ÿå°±æ˜¯æ¯æ¬¡æ¸¸æˆçš„æ—¶å€™ï¼Œgameå‡½æ•°éƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„éšæœºæ•°\nç©å®¶çŒœæµ‹çš„å¹¶ä¸æ˜¯ä¸€ä¸ªå›ºå®šçš„æ•°å­—ï¼Œé‚£ä¹Ÿæ°¸è¿œçŒœä¸åˆ°ç­”æ¡ˆ\næ‰€ä»¥æˆ‘ä»¬åº”è¯¥æŠŠsrandæ·»åŠ åˆ°mainä¸»å‡½æ•°ä¸­ï¼Œè¿™æ ·æ¯ä¸€æ¬¡æ¸¸æˆåªä¼šç”Ÿæˆä¸€ä¸ªå›ºå®šçš„éšæœºæ•°ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„æ•ˆæœ!\n\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™ifã€else ifè¯­å¥æ¥å®ç°æ¸¸æˆçš„çŒœæµ‹ä»¥åŠæç¤º\nwhile (1)\t&#123;\t\tprintf(&quot;çŒœæ•°å­—:&gt;&quot;);\t\tscanf(&quot;%d&quot;, &amp;guess);\t\tif (guess&gt;ret)\t\t&#123;\t\t\tprintf(&quot;çŒœå¤§äº†\\n&quot;);\t\t&#125;\t\telse if (guess&lt;ret)\t\t&#123;\t\t\tprintf(&quot;çŒœå°äº†\\n&quot;);\t\t&#125;\t\telse\t\t&#123;\t\t\tprintf(&quot;æ­å–œä½ ï¼ŒçŒœå¯¹å•¦\\n&quot;);\t\t\tbreak;\t\t&#125;\t&#125;\nåŒæ—¶æˆ‘ä»¬è¦å±è”½æ‰åˆšæ‰æ”¾å…¥gameå‡½æ•°ä¸­çš„srandä»¥åŠä¼šå‘Šè¯‰ç©å®¶ç­”æ¡ˆçš„printf\n\nè¿™æ ·æˆ‘ä»¬çš„çŒœæ•°å­—æ¸¸æˆå°±å¤§åŠŸå‘Šæˆäº†ï¼æ¥è¯•ç©ä¸€ä¸‹å§ï¼\n\nå¯ä»¥çœ‹åˆ°æ¸¸æˆæ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„æ ·å­ï¼ç©å®¶ä¹Ÿå¯ä»¥é‡å¤æ¸¸æˆ\nè¿™ç¯‡å°åšå®¢åˆ°è¿™é‡Œä¹Ÿå°±ç»“æŸäº†ç¬¬ä¸€æ¬¡å°è¯•çš„æ—¶å€™ï¼Œæ‰‹è´±ä¸å°å¿ƒæŒ‰äº†F5ï¼Œå†™äº†ä¸€åŠçš„åšå®¢ç›´æ¥æ— äº†\nä¸ç®¡æ€æ ·ï¼Œæ„Ÿè°¢ä½ çœ‹åˆ°æœ€å\nè¿˜è¯·dalaoä»¬å¯¹æˆ‘çš„åšå®¢è¿›è¡ŒæŒ‡æ­£\nå¦‚æœèƒ½ç‚¹ä¸ªèµä»€ä¹ˆçš„å°±æœ€å¥½äº†\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘gotoè¯­å¥","url":"/posts/3474605456/","content":"è¿™æ˜¯åˆè¯†cè¯­è¨€çš„ç¬¬äº”ç¯‡æ–‡ç« äº†\nè™½ç„¶çœ‹çš„äººä¸å¤šï¼Œä½†æˆ‘ä¸ä¼šæ”¾å¼ƒå“’\næ¯•ç«Ÿè¿™ä¹Ÿæ˜¯ç»™æˆ‘è‡ªå·±çš„ä¸€ä¸ªå­¦ä¹ è®°å½•ï¼Œä¸æƒ³å†™æ—¥è®°å°±ç”¨è¿™ä¸ªä»£æ›¿äº†ï¼\n\n\ngotoè¯­å¥cè¯­è¨€ä¸­æä¾›äº†å¯ä»¥éšæ„ä½¿ç”¨çš„gotoè¯­å¥å’Œæ ‡è®°è·³è½¬çš„æ ‡å·\nç†è®ºä¸Šæ¥è¯´ï¼Œgotoè¯­å¥æ²¡ä»€ä¹ˆå¿…è¦ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç”¨whlieç­‰å¾ªç¯è¯­å¥æ¥æ›¿ä»£å®ƒ\n\ngotoæ˜¯ç±»å¾ªç¯è¯­å¥ï¼Œå…¶æœ¬èº«æ˜¯å…³é”®å­—\n\n\ngotoè¯­å¥åœ¨æŸäº›åœºæ™¯ä¸‹ç”¨çš„åˆ°ï¼Œå¦‚ç»ˆæ­¢ç¨‹åºåœ¨æŸäº›æ·±åº¦åµŒå¥—çš„ç»“æ„çš„å¤„ç†è¿‡ç¨‹ï¼Œä¾‹å¦‚ä¸€æ¬¡è·³å‡ºä¸¤æ¬¡æˆ–è€…å¤šå±‚çš„å¾ªç¯\nè¿™ç§æƒ…å†µä¸‹breakè¾¾ä¸åˆ°æˆ‘ä»¬çš„ç›®çš„ã€‚breakåªèƒ½ä»æœ€å†…å±‚å¾ªç¯é€€å‡ºåˆ°ä¸Šä¸€å±‚çš„å¾ªç¯\n\ngotoè¯­å¥çœŸæ­£é€‚åˆçš„åœºæ™¯å¦‚ä¸‹ï¼š\nfor(...) \tfor(...)\t&#123;\t\tfor(...)        &#123;        \tif(disaster)         \t\tgoto error;          &#125;    &#125;\t...error:     if(disaster)//å¤„ç†é”™è¯¯æƒ…å†µ\n\nç”¨ä¸‹é¢è¿™ä¸ªä¾‹å­æ¥ç»™å¤§å®¶ç®€å•åœ°æ¼”ç¤ºä¸€ä¸‹gotoçš„ä½œç”¨\n#include &lt;stdio.h&gt;int main()&#123;\tprintf(&quot;hello world\\n&quot;);\tgoto again;\tprintf(&quot;ä½ å¥½\\n&quot;);again:\tprintf(&quot;hehe\\n&quot;);\treturn 0;&#125;\n\nç»“æœå¦‚ä¸‹\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºè·³è¿‡äº†printf(â€œä½ å¥½\\nâ€);ï¼Œç›´æ¥åˆ°ä¸‹ä¸€æ­¥æ‰“å°hehe\nä»£ç çš„æ‰§è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š\n\nå…¶å®gotoçš„ä½œç”¨æ–¹å¼éå¸¸å®¹æ˜“ç†è§£ï¼Œå³ï¼šèµ°åˆ°again\nè¿™æ—¶å€™ç¨‹åºä¼šç›´æ¥è·³åˆ°againåé¢çš„ä»£ç ï¼Œä¸ç®¡è¿™ä¸ªagainæ˜¯åœ¨gotoçš„åé¢è¿˜æ˜¯å‰é¢\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œagainåœ¨å‰é¢å¿…é¡»åœ¨ç‰¹å®šçš„å¾ªç¯\\æ¡ä»¶ä»£ç ä¸­ä½¿ç”¨\nå¦‚æœä½ å°†ä¸Šè¿°çš„ä»£ç æ”¹æˆè¿™æ ·\nint main()&#123;again:    printf(&quot;hello world\\n&quot;);\tgoto again;\tprintf(&quot;ä½ å¥½\\n&quot;);\tprintf(&quot;hehe\\n&quot;);\treturn 0;&#125;\n\né‚£ä¹ˆä»£ç å°±ä¼šä¸€ç›´æ‰“å°hello worldï¼Œè¿›å…¥æ­»å¾ªç¯\né‚£gotoå°±ä¸æ˜¯æ²¡æœ‰å¿…è¦äº†ï¼Œæ˜¯æ¯«æ— æ„ä¹‰\n\næƒ³çŸ¥é“gotoåœ¨å‰é¢çš„æ—¶å€™è¦æ€ä¹ˆä¹¦å†™ä»£ç å—\nä¸”å¬ä¸‹å›åˆ†è§£\nï¼ˆå› ä¸ºè¿™ä¸ªä»£ç æ˜¯ä¸ªå…³æœºå°ç¨‹åºï¼Œæˆ‘æ„Ÿè§‰é‡æ–°å†™ä¸€ç¯‡åšå®¢ä¼šæ›´å¥½ï¼‰\nç‚¹ä¸ªèµå†èµ°å§ï¼Œæ±‚æ±‚äº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€"]},{"title":"ã€Cè¯­è¨€ã€‘å…³æœºç¨‹åº","url":"/posts/2689863829/","content":"ä¸çŸ¥ä¸è§‰å°±æ‘¸äº†å‡ å¤©é±¼ï¼ŒåŠæ—¶é†’æ‚Ÿï¼Œå¼€å§‹ç ä¹‹å‰åœ¨gotoè¯­å¥ä¸­æåˆ°çš„å…³æœºå°ç¨‹åº\n\n\n@[TOC]\nå…³æœºç¨‹åºåœ¨ä»‹ç»è¿™ä¸ªç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬è¦äº†è§£win10ç³»ç»Ÿçš„ä¸€äº›ç³»ç»ŸæŒ‡ä»¤\nwindowsç³»ç»ŸæŒ‡ä»¤ç”¨win+ræ‰“å¼€ç³»ç»Ÿçš„è¿è¡Œæ¡†ï¼ˆè¿™ä¸ªä»xpï¼Œwin7åˆ°win10éƒ½æœ‰ï¼‰\nåœ¨å¼¹å‡ºçš„è¿è¡Œæ¡†ä¸­è¾“å…¥shutdown -s -t 7200ï¼ˆåé¢è·Ÿç€çš„æ•°å­—æ˜¯æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ï¼‰\n\n\nç³»ç»Ÿå°†åœ¨å³ä¸‹è§’æç¤ºä½ å®šæ—¶å…³æœºçš„æ—¶é—´ï¼Œå±Šæ—¶è¿˜ä¼šåœ¨å®šæ—¶å…³æœºæ—¶é—´æå‰60sæé†’ä½ è¦å…³æœº\næƒ³è¦å–æ¶ˆå®šæ—¶å…³æœºï¼Œå¯ä»¥åœ¨è¿è¡Œä¸­è¾“å…¥shutdown -a\n\n\nå®šæ—¶å…³æœºå°±è¢«å–æ¶ˆäº†\näº†è§£äº†è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬å°±è¦çŸ¥æ‚‰Cè¯­è¨€ä¸­å¯ä»¥å¸®æˆ‘ä»¬åœ¨ç³»ç»Ÿçš„è¿è¡Œä¸­è¾“å…¥æŒ‡ä»¤çš„å‡½æ•°\nsystemå‡½æ•°é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨ä¹‹å‰å’Œå¤§å®¶åˆ†äº«è¿‡çš„ç½‘ç«™cplusplusä¸ŠæŸ¥è¯¢è¯¥å‡½æ•°çš„å®šä¹‰\n\nç®€å•åœ°è¯´ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯æ¥å¸®æˆ‘ä»¬executeæ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„ã€‚\nåŒæ—¶ï¼Œcpluscplusç½‘ç«™å‘Šè¯‰æˆ‘ä»¬ï¼šè¿™ä¸ªå‡½æ•°çš„å¤´æ–‡ä»¶æ˜¯stdlib.h\nå…ˆå†™ä¸€ä¸ªç®€å•çš„å…³æœºç¨‹åºæ¥å®æ“ä¸€ä¸‹systemå‡½æ•°\n#incldue &lt;stdlib.h&gt;int main()&#123;\tsystem(&quot;shutdown -s -t 60&quot;);//system() -æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„\treturn 0;&#125;\n\n\nå¾ªç¯æŒ‡ä»¤å’Œå…³æœºç¨‹åºæ¥ä¸‹æ¥è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªæœ‰ç‚¹æŸçš„æ–¹å¼å†™ä¸€ä¸ªå…³æœºç¨‹åº\nè¿è¡Œè¿™ä¸ªç¨‹åºåï¼Œåªæœ‰è¾“å…¥â€œæˆ‘æ˜¯ğŸ–â€æ‰èƒ½å–æ¶ˆå…³æœº\nint main()&#123;\tchar input[20] = &#123; 0 &#125;;\tsystem(&quot;shutdown -s -t 60&quot;);\twhile(1)\t&#123;\t\tprintf(&quot;è¯·æ³¨æ„ï¼Œä½ çš„ç”µè„‘å°†åœ¨1åˆ†é’Ÿå†…å…³æœºï¼Œå¦‚æœè¾“å…¥:æˆ‘æ˜¯çŒªï¼Œå°±å–æ¶ˆå…³æœº\\nè¯·è¾“å…¥&gt;:&quot;);\t\tscanf(&quot;%s&quot;, input);\t\tif (strcmp(input, &quot;æˆ‘æ˜¯çŒª&quot;) == 0)//å¤´æ–‡ä»¶#include &lt;string.h&gt;\t\t&#123;\t\t\tsystem(&quot;shutdown -a&quot;);\t\t\tbreak;\t\t&#125;\t&#125;\treturn 0;&#125;\n\nè¿™é‡Œæˆ‘ä»¬è¿˜ç”¨åˆ°äº†strcmpå‡½æ•°ï¼Œç”¨äºæ¯”è¾ƒä½ è¾“å…¥çš„å­—ç¬¦å’Œâ€œæˆ‘æ˜¯ğŸ–â€æ˜¯å¦ä¸€è‡´\n\nè¦æ³¨æ„â€œ&#x3D;&#x3D;â€ä¸èƒ½ç”¨äºæ¯”è¾ƒå­—ç¬¦\n\nè¿™é‡Œç”¨åˆ°çš„æ˜¯ååˆ†åŸºç¡€çš„while+ifçš„è¯­å¥ç»„åˆã€‚\nè¿è¡Œç»“æœå¦‚ä¸‹\n\n\nè¾“å…¥æˆ‘æ˜¯ğŸ–åæ³¨é”€ä¼šå–æ¶ˆï¼Œå¦‚æœè¾“å…¥é”™è¯¯ä¼šå†æ¬¡å¼¹å‡ºæç¤º\ngotoè¯­å¥å†™å…³æœºç¨‹åºå½“ç„¶ï¼Œå¦‚æœçœ‹è¿‡ä¸Šä¸€ç¯‡çš„ä½ è‚¯å®šçŸ¥é“è¿™ç¯‡åšå®¢çš„é‡ç‚¹æ˜¯goto\nä¸»è¦æ˜¯æ¼”ç¤ºä¸€ä¸‹againåœ¨gotoæ‰€åœ¨ä»£ç è¡Œä¹‹å‰çš„æƒ…å†µ\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;int main()&#123;\tchar input[20] = &#123; 0 &#125;;\tsystem(&quot;shutdown -s -t 60&quot;);//å¤´æ–‡ä»¶&lt;stdlib.h&gt;again:\tprintf(&quot;è¯·æ³¨æ„ï¼Œä½ çš„ç”µè„‘å°†åœ¨1åˆ†é’Ÿå†…å…³æœºï¼Œå¦‚æœè¾“å…¥:æˆ‘æ˜¯çŒªï¼Œå°±å–æ¶ˆå…³æœº\\nè¯·è¾“å…¥&gt;:&quot;);\tscanf(&quot;%s&quot;, input);\tif (strcmp(input, &quot;æˆ‘æ˜¯çŒª&quot;) == 0)//æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ -strcmp() å¤´æ–‡ä»¶&lt;string.h&gt;\t&#123;\t\tsystem(&quot;shutdown -a&quot;);\t&#125;\telse\t&#123;\t\tgoto again;\t&#125;\treturn 0;&#125;\n\nè¿è¡Œçš„ç»“æœå’Œä¸Šé¢çš„whlieè¯­å¥ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸æˆªå›¾äº†\nè¿™ä¸ªä»£ç å¯ä»¥ç”¨æ¥æ•´è›Šä½ çš„æŸå‹ï¼Œæˆ–è€…åœ¨æ˜¥èŠ‚çš„æ—¶å€™é˜»æ­¢ç†Šå­©å­â€œå€Ÿâ€ç”¨ä½ çš„å¥³æœ‹å‹ï¼ˆæŒ‡ç”µè„‘ï¼‰\nè¯¢é—®æ¡†é‡Œçš„é—®é¢˜å’Œå¯¹åº”çš„å›ç­”éƒ½å¯ä»¥éšæ„æ›´æ”¹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠæ—¶é—´æ”¹æˆ10ç§’è®©äººå‹æ ¹æ¥ä¸åŠååº”\nå¦‚æœä½ ç”¨çš„æ˜¯devc++ï¼Œæ¯æ¬¡è¿è¡Œä»£ç çš„æ—¶å€™éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªexeæ–‡ä»¶\n\næŠŠlogoæ”¹æ”¹ï¼Œå°±èƒ½å»ç³Šå¼„äººäº†\nï¼ˆè¯è¯´vs2019è¦æ€ä¹ˆç”Ÿæˆexeå•Šï¼Œå¾—å»ç ”ç©¶ä¸€ä¸‹ï¼‰\néƒ‘é‡è­¦å‘Šï¼\n\nå¨±ä¹ä¸€ä¸‹å³å¯\n\nè‹¥ä½¿ç”¨è¯¥ç¨‹åºå¯¼è‡´ç”µè„‘å…³æœºä¸”æœªä¿å­˜é‡è¦æ–‡ä»¶\n\n\næœ¬åšä¸»ä¸è´Ÿä»»ä½•è´£ä»»ï¼\nç‚¹ä¸ªèµå†èµ°å‘—ï¼Œè°¢è°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€ç®—æ³•ã€‘ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦","url":"/posts/3906762122/","content":"å‰è¨€ğŸ•µï¸â€â™‚ï¸åœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œå·²ç»æ¥è§¦è¿‡äº†ç½‘ä¸ŠOJé¢˜ç›®\nåœ¨ä¸€äº›é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦çš„è¦æ±‚\nä½ å¯èƒ½å’Œæˆ‘æœ‰ä¸€æ ·çš„ç–‘æƒ‘ï¼Œå¤æ‚åº¦ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘è¦æ€ä¹ˆè¯„åˆ¤æˆ‘è‡ªå·±å†™çš„ç®—æ³•çš„å¤æ‚åº¦ï¼Ÿ\nä»Šå¤©å°±è®©æˆ‘ä»¬æ¥è®¤è¯†è®¤è¯†~~\n\n\n\n1.ç®—æ³•æ•ˆç‡ğŸ§å’Œåšä»»ä½•äº‹æƒ…ä¸€æ ·ï¼Œæˆ‘ä»¬å†™çš„ç®—æ³•ï¼Œè‡ªç„¶ä¹Ÿæœ‰å®ƒçš„è¿è¡Œæ•ˆç‡ã€‚æ•ˆç‡è¶Šé«˜è¶Šå¥½\n1.1ä»€ä¹ˆæ˜¯ç®—æ³•ç®—æ³•å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºæˆ‘ä»¬ä¸ºäº†æ±‚è§£ä¸€ä¸ªé—®é¢˜ï¼Œæ‰€å†™çš„å‡½æ•°\nåœ¨åˆè¯†Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ è¿‡åˆ©ç”¨é€’å½’æ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç®—æ³•\nlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\nè¿™ä¸ªç®—æ³•åªæœ‰3è¡Œä»£ç ï¼Œçœ‹ä¸Šå»éå¸¸ç®€æ´â€”â€”ä½†æ˜¯ç®€æ´çš„ä»£ç ä¸ä¸€å®šæ•ˆç‡å°±é«˜ï¼\n1.2å¦‚ä½•è¡¡é‡ï¼Ÿç®—æ³•åœ¨ç¼–å†™æˆå¯æ‰§è¡Œç¨‹åºçš„æ—¶å€™ï¼Œmainå‡½æ•°ä½¿ç”¨è¿™ä¸ªç®—æ³•ï¼Œéœ€è¦è°ƒç”¨ä¸€å®šçš„ç©ºé—´ï¼Œæ¶ˆè€—ä¸€å®šçš„æ—¶é—´ã€‚ç®—æ³•çš„æ•ˆç‡å°±æ˜¯é€šè¿‡ç©ºé—´å’Œæ—¶é—´è¿™ä¸¤ä¸ªç»´åº¦æ¥è¯„åˆ¤çš„\n\næ—¶é—´å¤æ‚åº¦ï¼šè¡¡é‡ä¸€ä¸ªç®—æ³•çš„è¿è¡Œé€Ÿåº¦\nç©ºé—´å¤æ‚åº¦ï¼šè¡¡é‡ä¸€ä¸ªç®—æ³•è¿è¡Œéœ€è¦å¼€è¾Ÿçš„é¢å¤–ç©ºé—´\n\n\n2.æ—¶é—´å¤æ‚åº¦â°ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®šé‡æè¿°äº†è¯¥ç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚ç®—æ³•ä¸­åŸºæœ¬æ“ä½œçš„æ‰§è¡Œæ¬¡æ•°ï¼Œä¸ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªè¿‘ä¼¼å€¼ï¼Œå¹¶ä¸æ˜¯å®é™…è¿è¡Œçš„æ—¶é—´\nå®é™…ä¸Šä»£ç çš„è¿è¡Œæ—¶é—´ï¼Œå’Œæœºå™¨çš„å†…å­˜ã€cpuæ€§èƒ½å’Œå¹³å°éƒ½æœ‰å…³ç³»ï¼ŒåŒä¸€ä¸ªä»£ç åœ¨ä¸åŒçš„æœºå™¨ä¸Šè¿è¡Œæ—¶é—´éƒ½ä¸ä¸€æ ·ï¼Œå¦‚æœåªä»¥çº¯ç²¹çš„æ—¶é—´æ¥è€ƒæ ¸ï¼Œå¾ˆéš¾åˆ†æ\n\næ‰¾åˆ°æŸæ¡åŸºæœ¬è¯­å¥ä¸é—®é¢˜è§„æ¨¡Nä¹‹é—´çš„æ•°å­¦è¡¨è¾¾å¼ï¼Œå°±ç®—å‡ºäº†è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\nvoid test1(int N){\tint count =0;    for(int i=0;i&lt;N;i++)    {        for(int j=0;j&lt;N;j++)        {            count++;        }    }        for (int k = 0; k &lt; 2 * N ; ++ k)    {     \tcount++;    }        int M = 10;    while (M--)    {     \tcount++;    }        return;}\n\nè¯·é—®è¿™ä¸ªä»£ç ä¸­ï¼Œcountè¯­å¥æ‰§è¡Œäº†å‡ æ¬¡ï¼Ÿ\nå¯ä»¥æ€»ç»“å‡ºå¦‚ä¸‹è¡¨æ ¼\n\n\n\nN\nF(N)\n\n\n\n10\n130\n\n\n100\n10210\n\n\n1000\n1002010\n\n\nä½ å¯èƒ½ä¼šç®€å•åœ°è®¤ä¸ºï¼ŒF(N)çš„ç»“æœå°±æ˜¯æˆ‘ä»¬çš„æ—¶é—´å¤æ‚åº¦ã€‚å…¶å®å¹¶ä¸ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ä¸€ä¸ªç²¾ç¡®çš„è¿è¡Œæ¬¡æ•°ï¼Œåªéœ€è¦çŸ¥é“ç¨‹åºè¿è¡Œæ¬¡æ•°çš„é‡çº§å°±è¡Œäº†\nè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¤§Oæ¸è¿›è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦ï¼ˆç©ºé—´å¤æ‚åº¦åŒç†ï¼‰\n2.1å¤§Oçš„æ¸è¿›è¡¨ç¤ºæ³•å¤§Oç¬¦å·ï¼ˆBig O notationï¼‰ï¼šæ˜¯ç”¨äºæè¿°å‡½æ•°æ¸è¿›è¡Œä¸ºçš„æ•°å­¦ç¬¦å·\n\næ¨å¯¼å¤§Oé˜¶æ–¹æ³•ï¼š \n\nç”¨å¸¸æ•°1å–ä»£è¿è¡Œæ—¶é—´ä¸­çš„æ‰€æœ‰åŠ æ³•å¸¸æ•°ã€‚\nåœ¨ä¿®æ”¹åçš„è¿è¡Œæ¬¡æ•°å‡½æ•°ä¸­ï¼Œåªä¿ç•™æœ€é«˜é˜¶é¡¹ã€‚ \nå¦‚æœæœ€é«˜é˜¶é¡¹å­˜åœ¨ä¸”ä¸æ˜¯1ï¼Œåˆ™å»é™¤ä¸è¿™ä¸ªé¡¹ç›®ç›¸ä¹˜çš„å¸¸æ•°ã€‚å¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§Oé˜¶\n\n\nä½¿ç”¨è¿™ç§æ–¹æ³•åï¼Œtest1å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ä¸ºå¯¹äºtest1å‡½æ•°ï¼Œåœ¨è®¡ç®—çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœç•¥äº†æœ€åçš„+10ï¼Œä¿ç•™äº†æœ€é«˜é˜¶æ•°N2ï¼Œå³å¾—å‡ºäº†å®ƒçš„æ—¶é—´å¤æ‚åº¦\n\nå¦‚æœæœ€é«˜é˜¶æ•°å‰é¢æœ‰ç³»æ•°ï¼Œå¦‚2Nï¼Œç³»æ•°ä¹Ÿå°†è¢«çœç•¥\n\nå› ä¸ºå½“Nçš„æ•°å€¼å¾ˆå¤§çš„æ—¶å€™ï¼Œåé¢çš„é‚£äº›å€¼å¯¹æˆ‘ä»¬æ€»è¿è¡Œæ¬¡æ•°çš„å½±å“å·²ç»éå¸¸å°äº†ã€‚å¤§Oçš„æ¸è¿›è¡¨ç¤ºæ³•å»æ‰äº†é‚£äº›å¯¹ç»“æœå½±å“ä¸å¤§çš„é¡¹ï¼Œç®€æ´æ˜äº†çš„è¡¨ç¤ºå‡ºäº†æ‰§è¡Œæ¬¡æ•°\n2.1.1 O(logN)ä»¥ä»€ä¹ˆä¸ºä½\næ¥è‡ªã€Šä»£ç éšæƒ³å½•ã€‹2021å¹´12æœˆç¬¬1ç‰ˆ P13\n\nåœ¨è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹ä¸¤ä¸ªæ—¶é—´å¤æ‚åº¦å’Œå®é™…ä¸Šï¼Œä»¥2ä¸ºåº•çš„Oæ˜¯å¯ä»¥è½¬æˆä»¥10ä¸ºåº•çš„Oä¹Ÿå°±ç­‰åŒäºå¸¸æ•°æ€»ç»“å‡ºæ¥å°±æ˜¯è€Œåœ¨å¤§Oæ¸è¿›æ³•ä¸­å¸¸æ•°å¯ä»¥å¿½ç•¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºlogä¸­çš„åº•æ•°æ˜¯æ„ä¹‰ä¸å¤§çš„ï¼Œå¯ä»¥å¿½ç•¥ç›´æ¥è¯´logN\n2.2å¤šç§æƒ…å†µå–æœ€åä¸€äº›ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¼šæœ‰æœ€å¥½ã€æœ€åå’Œå¹³å‡çš„æƒ…å†µ\n\næœ€å¥½æƒ…å†µï¼šä»»æ„è¾“å…¥è§„æ¨¡çš„æœ€å°è¿è¡Œæ¬¡æ•°(ä¸‹ç•Œ)\nå¹³å‡æƒ…å†µï¼šæœŸæœ›çš„è¿è¡Œæ¬¡æ•°\næœ€åæƒ…å†µï¼šä»»æ„è¾“å…¥è§„æ¨¡çš„æœ€å¤§è¿è¡Œæ¬¡æ•°(ä¸Šç•Œ)\n\nä¸¾ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æ•°å€¼çš„ç®—æ³•æ—¶ï¼Œå®ƒå¯èƒ½ä¼šå‡ºç°è¿™å‡ ç§æƒ…å†µï¼š\n\næœ€å¥½æƒ…å†µï¼š1æ¬¡å°±æ‰¾åˆ°\nå¹³å‡æƒ…å†µï¼šN/2æ¬¡\næœ€åæƒ…å†µï¼šNæ¬¡\n\nåœ¨å®é™…ä¸­çš„ä¸€èˆ¬æƒ…å†µï¼Œæˆ‘ä»¬å…³æ³¨çš„æ˜¯ç®—æ³•çš„æœ€åè¿è¡Œæƒ…å†µï¼Œæ‰€ä»¥æ•°ç»„ä¸­æœç´¢æ•°æ®æ—¶é—´å¤æ‚åº¦ä¸ºO(N)\n2.3å¸¸è§æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—NO.1 åŒç‹¬ç«‹å¾ªç¯void Func1(int N){     int count = 0;     for (int k = 0; k &lt; 2 * N ; ++ k)     {     \t++count;     }     int M = 10;     while (M--)     {     \t++count;     } \tprintf(\"%d\\n\", count);}\n\nè¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªå¾ªç¯ï¼Œåˆ†åˆ«æ˜¯2Næ¬¡å’Œ10æ¬¡ã€‚å‰é¢æåˆ°äº†å¤§Oæ¸è¿›æ³•åªä¿ç•™æœ€é«˜é˜¶æ•°å¹¶çœç•¥ç³»æ•°ï¼Œæ‰€ä»¥å®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)\nNO.2 åŒç‹¬ç«‹å¾ªç¯void Func2(int N, int M){     int count = 0;     for (int k = 0; k &lt; M; ++ k)     {     \t++count;     }     for (int k = 0; k &lt; N ; ++ k)     {     \t++count;     }     printf(\"%d\\n\", count);}\n\nè¿™é‡Œå‡ºç°äº†æ¬¡æ•°ä¸ºNå’ŒMçš„ä¸¤å±‚å¾ªç¯\n\nå½“Må’ŒNå·®ä¸å¤šå¤§çš„æ—¶å€™ï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥ç†è§£ä¸ºO(M)æˆ–O(N)\nå½“Mè¿œè¿œå¤§äºNæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(M)\nä¸€èˆ¬æƒ…å†µå–O(M+N)\n\n\nNO.3 å¸¸æ•°é˜¶void Func3(int N){     int count = 0;     for (int k = 0; k &lt; 100; ++ k)     {     \t++count;     }     printf(\"%d\\n\", count);}\n\nè¿™é‡Œæˆ‘ä»¬å¾—çŸ¥äº†å…·ä½“çš„å¾ªç¯æ¬¡æ•°ä¸º100ï¼Œæ˜¯ä¸€å¸¸æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä»£è¡¨å¸¸æ•°é˜¶\n\nåªè¦å¾ªç¯æ¬¡æ•°å·²çŸ¥ï¼Œä¸ºä¸€å¸¸æ•°ä¸”å’Œæ‰€ä¼ å‚æ•°æ— å…³ï¼Œå…¶æ—¶é—´å¤æ‚åº¦å³ä¸ºO(1)\n\nNO.4 strchr//è®¡ç®—strchrçš„æ—¶é—´å¤æ‚åº¦const char * strchr ( const char * str, int character );\n\nçœ‹åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šä¸€æ„£ï¼Œstrchræ˜¯ä»€ä¹ˆï¼Ÿ\n\nåœ¨ä¹‹å‰çš„åšå®¢é‡Œï¼Œæˆ‘ä»‹ç»äº†å¾ˆå¤šå¸¸ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°ğŸ‘‰ç‚¹æˆ‘\nå¯è¿™é‡Œé¢æ²¡æœ‰strchrï¼Œä½†æœ‰strstr\n\nstrstrå‡½æ•°çš„ä½œç”¨ï¼šåœ¨å­—ç¬¦ä¸²1ä¸­å¯»æ‰¾æ˜¯å¦æœ‰å­—ç¬¦ä¸²2\nå…¶ä¸­ç¬¬äºŒä¸ªsträ»£è¡¨çš„æ˜¯stringå­—ç¬¦ä¸²ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥çŒœæƒ³ï¼Œchrä»£è¡¨çš„æ˜¯charå­—ç¬¦ï¼Œå…¶ä½œç”¨æ˜¯åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ\nå½“ç„¶ï¼Œå…‰æ˜¯çŒœæƒ³è‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ±‚è¯ä¸€ä¸‹\n\nå¦‚ä½•æŸ¥è¯¢åº“å‡½æ•°å®šä¹‰å¹¶å°è¯•ä½¿ç”¨å®ƒï¼ŸğŸ‘‰ç‚¹æˆ‘\n\næ‰“å¼€cplusplusç½‘ç«™ï¼Œæœç´¢strchrï¼Œå³å¯è½¬åˆ°å‡½æ•°å®šä¹‰\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯å®šä½å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°è¯¥å­—ç¬¦çš„ä½ç½®ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªpointeræŒ‡é’ˆ\nå’Œæˆ‘ä»¬çŒœæƒ³çš„ä¸€æ ·ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®çš„åœ°å€ã€‚\nè¿™æ ·ä¸€æ¥ï¼Œstrchrå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å°±å¾ˆæ¸…æ¥šäº†ï¼Œå°±æ˜¯éå†å­—ç¬¦ä¸²æ‰€éœ€è¦çš„æ¬¡æ•°ï¼ŒO(N)\nNO.5 å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){     assert(a);     for (size_t end = n; end &gt; 0; --end)     {         int exchange = 0;         for (size_t i = 1; i &lt; end; ++i)         {         \tif (a[i-1] &gt; a[i])         \t{                Swap(&amp;a[i-1], &amp;a[i]);                exchange = 1;         \t}    \t }     if (exchange == 0)    \t break;     }}\n\nå†’æ³¡æ’åºæ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„ä»£ç ï¼Œå…¶æ€è·¯å°±æ˜¯éå†æ•´ä¸ªæ•°ç»„ï¼Œå¦‚æœå¾…æ’åºæ•°å­—å¤§äºå®ƒçš„ä¸‹ä¸€ä½ï¼Œåˆ™äº¤æ¢è¿™ä¸¤ä¸ªæ•°å­—\n\nNä¸ªæ•°å­—çš„æ•°ç»„éœ€è¦N-1æ¬¡æ’åºæ‰èƒ½å®Œæˆ\næ¯ä¸€æ¬¡æ’åºéƒ½éœ€è¦éå†ä¸€æ¬¡æ•°ç»„\n\nè¿™æ ·ç®—æ¥ï¼Œå†’æ³¡æ’åºçš„å¾ªç¯æ¬¡æ•°å°±æ˜¯ä¸¤ä¸ªNç›¸ä¹˜ï¼Œå³ä¸ºO(N^2)\n\nèƒ½å¦é€šè¿‡å¾ªç¯å±‚çº§åˆ¤æ–­ï¼Ÿç»†å¿ƒçš„ä½ å¯èƒ½ä¼šå‘ç°ï¼Œä¸Šè¿°ä»£ç ä¸­å‡ºç°äº†ä¸¤å±‚å¾ªç¯ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥é€šè¿‡å¾ªç¯å±‚çº§æ¥åˆ¤æ–­æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ\nå¹¶ä¸èƒ½ï¼\nfor(int i=0;i&lt;n;i++){\tfor(int j=0;j&lt;3;j++)\t\tprintf(\"hehe\\n\");}\n\nå¦‚æœæ˜¯ä¸Šè¿°è¿™ç§ä¸¤æ¬¡å¾ªç¯çš„æƒ…å†µï¼Œä¼šæ‰“å°3næ¬¡å‘µå‘µï¼Œå…¶æ—¶é—´å¤æ‚åº¦æ˜¯O(N)è€Œä¸æ˜¯N^2\n\næˆ‘ä»¬è¦å‡†ç¡®åˆ†æç®—æ³•çš„æ€è·¯ï¼Œå¹¶ä¸èƒ½ç®€å•åœ°é€šè¿‡å¾ªç¯å±‚çº§æ¥åˆ¤æ–­æ—¶é—´å¤æ‚åº¦\n\nNO.6 äºŒåˆ†æŸ¥æ‰¾//a æ•°ç»„ï¼Œné•¿åº¦ï¼Œxéœ€è¦æŸ¥æ‰¾çš„æ•°int BinarySearch(int* a, int n, int x){     assert(a);     int begin = 0;     int end = n-1;     while (begin &lt;= end)     {         int mid = begin + ((end-begin)&gt;&gt;1);//ä½¿ç”¨ä½ç§»æ“ä½œç¬¦æ¥æ¨¡æ‹Ÿ/2ï¼Œé˜²æ­¢beginå’Œendç›¸åŠ åè¶…å‡ºintèŒƒå›´         if (a[mid] &lt; x)         \tbegin = mid+1;         else if (a[mid] &gt; x)         \tend = mid-1;         else         \treturn mid;//è¿”å›éœ€è¦æŸ¥æ‰¾çš„æ•°çš„ä¸‹æ ‡     }     return -1;}\n\näºŒåˆ†æŸ¥æ‰¾çš„æ€è·¯è¿™é‡Œä¸å†èµ˜è¿°\nå‡è®¾æˆ‘ä»¬æ‰¾äº†xæ¬¡ï¼Œæ¯ä¸€æ¬¡æŸ¥æ‰¾éƒ½ä¼šä½¿æŸ¥æ‰¾èŒƒå›´å‡åŠ\nN/2/2/2/2 â€¦â€¦\n\næœ€åæˆ‘ä»¬å¯ä»¥å¾—å‡º2æ¡å…¬å¼\n\n\næœ€å¥½æƒ…å†µï¼šO(1)\næœ€åæƒ…å†µï¼šO(logN)\n\n\né€šè¿‡æ—¶é—´å¤æ‚åº¦çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹å‡ºäºŒåˆ†æŸ¥æ‰¾çš„ä¼˜åŠ¿åœ¨é‚£é‡Œäº†\n\n\n\nN\nO(N)\nO(logN)\n\n\n\n1000\n1000\n10\n\n\n100w\n100w\n20\n\n\n10äº¿\n10äº¿\n30\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æ•°æ®å¾ˆå¤§çš„æ—¶å€™ï¼ŒO(logN)çš„ç®—æ³•æ‰§è¡Œæ¬¡æ•°æ¯”O(N)å°‘äº†ç‰¹åˆ«å¤š!!ï¼ˆæ¥è‡ªBT-7274çš„è‚¯å®šï¼‰\n\nNO.7 è®¡ç®—N!// è®¡ç®—é˜¶ä¹˜é€’å½’Facçš„æ—¶é—´å¤æ‚åº¦ï¼Ÿlong long Fac(size_t N){     if(0 == N)     \treturn 1;     return Fac(N-1)*N;}\n\nå¯¹äºè¿™ä¸ªé˜¶ä¹˜çš„é€’å½’å‡½æ•°è€Œè¨€ï¼Œæ¯æ¬¡å‡½æ•°è°ƒç”¨æ˜¯O(1)ï¼Œæ—¶é—´å¤æ‚åº¦ä¸»è¦çœ‹é€’å½’æ¬¡æ•°\nå¯¹äºæ•°å­—Nè€Œè¨€ï¼Œé€’å½’éœ€è¦Næ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N)\né€’å½’ç®—æ³•æ—¶é—´å¤æ‚åº¦è®¡ç®—é€’å½’ç®—æ³•æ—¶é—´å¤æ‚åº¦ = é€’å½’æ¬¡æ•° * æ¯æ¬¡é€’å½’ä¸­æ“ä½œæ¬¡æ•°\n\n\nå¦‚æœæ¯æ¬¡å‡½æ•°è°ƒç”¨æ˜¯O(1)ï¼Œçœ‹é€’å½’æ¬¡æ•°\næ¯æ¬¡å‡½æ•°è°ƒç”¨ä¸æ˜¯O(1)ï¼Œé‚£ä¹ˆå°±çœ‹ä»–é€’å½’è°ƒç”¨ä¸­æ¬¡æ•°çš„ç´¯åŠ \n\nNO.8 æ–æ³¢é‚£å¥‘æ•°åˆ—\nè®¡ç®—æ–æ³¢é‚£å¥‘æ•°å¯ä»¥ç”¨é€’å½’å’Œè¿­ä»£ä¸¤ç§ç®—æ³•ğŸ‘‰ç‚¹æˆ‘\n\n// è®¡ç®—æ–æ³¢é‚£å¥‘é€’å½’Fibçš„æ—¶é—´å¤æ‚åº¦ï¼Ÿlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\n\næ¯æ¬¡é€’å½’ï¼Œæ¬¡æ•°éƒ½ä¼šå¢åŠ ï¼Œæ€»çš„æ¥è¯´æ˜¯ä»¥2^xçš„é‡çº§å¢åŠ çš„ï¼ˆxä»£è¡¨è¡Œæ•°ï¼‰è¿™é‡Œä¸€å…±æœ‰x-1é¡¹ï¼Œç”¨ç­‰æ¯”æ•°åˆ—çš„æ±‚å’Œå…¬å¼å¾—å‡ºï¼Œç»“æœä¸º2x-1\næ‰€ä»¥æœ€åå¾—å‡ºçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2N)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é€’å½’è°ƒç”¨åˆ°åº•éƒ¨æ—¶ï¼Œæœ‰ä¸€äº›è°ƒç”¨ä¼šè¾ƒæ—©é€€å‡ºï¼Œè¿™éƒ¨åˆ†ä½äºé‡‘å­—å¡”çš„å³ä¸‹è§’\n\nç”±äºæ—¶é—´å¤æ‚åº¦åªæ˜¯ä¸€ä¸ªä¼°ç®—å€¼ï¼Œè¿™ä¸€éƒ¨åˆ†ç¼ºå¤±çš„è°ƒç”¨æ¬¡æ•°å¯¹æ€»è¿è¡Œæ¬¡æ•°çš„å½±å“ä¸å¤§ï¼Œæ•…å¿½ç•¥æ‰\n\nNO.9 é+1é€’å¢å¾ªç¯void fun(int n) {   int i=l;   while(i&lt;=n)      i=i*2;}\n\næ­¤å‡½æ•°æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œä½†æ˜¯å¾ªç¯æ²¡æœ‰è¢«æ‰§è¡Œnæ¬¡ï¼Œiæ¯æ¬¡éƒ½æ˜¯2å€è¿›è¡Œé€’å¢ï¼Œæ‰€ä»¥å¾ªç¯åªä¼šè¢«æ‰§è¡Œlog2næ¬¡\nNO.10 æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾å’Œä¸ºsumçš„ä¸¤ä¸ªæ•°ç»™å®šä¸€ä¸ªæ•´æ•°sumï¼Œä»æœ‰Nä¸ªæœ‰åºå…ƒç´ çš„æ•°ç»„ä¸­å¯»æ‰¾å…ƒç´ aï¼Œbï¼Œä½¿å¾—a+bçš„ç»“æœæœ€æ¥è¿‘sumï¼Œæœ€å¿«çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ï¼Ÿ\nA. O(n)//âˆšB. O(n^2)C. O(nlogn)D. O(logn)\n\næ•°ç»„å…ƒç´ æœ‰åºï¼Œæ‰€ä»¥a,bä¸¤ä¸ªæ•°å¯ä»¥åˆ†åˆ«ä»å¼€å§‹å’Œç»“å°¾å¤„å¼€å§‹æœï¼Œæ ¹æ®é¦–å°¾å…ƒç´ çš„å’Œæ˜¯å¦å¤§äºsum,å†³å®šæœç´¢çš„ç§»åŠ¨ï¼Œæ•´ä¸ªæ•°ç»„è¢«æœç´¢ä¸€éï¼Œå°±å¯ä»¥å¾—åˆ°ç»“æœï¼Œæ‰€ä»¥æœ€å¥½æ—¶é—´å¤æ‚åº¦ä¸ºn\nNO.11 åŒåµŒå¥—å¾ªç¯void test(int n){    for(int i=0;i&lt;n;i++)    {//å¾ªç¯1        for(int j=i;j&lt;n;j++)        {            //å¾ªç¯2        }    }}\n\nä»¥ä¸Šæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„å¾ªç¯ã€‚å…¶ä¸­å¾ªç¯2çš„æ‰§è¡Œæ¬¡æ•°æ˜¯ä¸€ä¸ªç­‰å·®æ•°åˆ—ï¼Œç¬¬ä¸€æ¬¡æ˜¯nï¼Œç¬¬äºŒæ¬¡æ˜¯n-1ï¼Œç¬¬ä¸‰æ¬¡æ˜¯n-2â€¦â€¦ä¸€ç›´åˆ°æœ€åä¸€æ¬¡ä¸º1ï¼›è¿™ä¸ªç­‰å·®æ•°åˆ—çš„æ±‚å’Œä¸ºn(n+1)/2ï¼Œå³n2/2+n/2ï¼Œå› ä¸ºæ—¶é—´å¤æ‚åº¦éœ€è¦å–å¤§ä¸”å¿½ç•¥ç³»æ•°ï¼Œæ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦ä¸ºn2\n\n3.ç©ºé—´å¤æ‚åº¦ğŸ 3.1æ¦‚å¿µç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨ç©ºé—´å¤§å°çš„åº¦é‡\n\nå’Œæ—¶é—´å¤æ‚åº¦ä¸æ˜¯çœŸçš„è®¡ç®—æ—¶é—´ä¸€æ ·ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸è¡¡é‡ç®—æ³•å…·ä½“å ç”¨çš„å†…å­˜å­—èŠ‚æ•°ã€‚\n\nç©ºé—´å¤æ‚åº¦è®¡ç®—çš„æ˜¯é¢å¤–å¼€è¾Ÿçš„å˜é‡çš„ä¸ªæ•°ï¼Œé€‚ç”¨å¤§Oæ¸è¿‘æ³•\næ³¨æ„ï¼šå‡½æ•°è¿è¡Œæ—¶æ‰€éœ€è¦çš„æ ˆç©ºé—´(å­˜å‚¨å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸€äº›å¯„å­˜å™¨ä¿¡æ¯ç­‰)åœ¨ç¼–è¯‘æœŸé—´å·²ç»ç¡®å®šå¥½äº†ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸»è¦é€šè¿‡å‡½æ•°åœ¨è¿è¡Œæ—¶å€™æ˜¾å¼ç”³è¯·çš„é¢å¤–ç©ºé—´æ¥ç¡®å®šã€‚\n3.2ç©ºé—´å¤æ‚åº¦è®¡ç®—NO.1 å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){     assert(a);     for (size_t end = n; end &gt; 0; --end)     {         int exchange = 0;         for (size_t i = 1; i &lt; end; ++i)         {         \tif (a[i-1] &gt; a[i])         \t{                Swap(&amp;a[i-1], &amp;a[i]);                exchange = 1;         \t}    \t }     if (exchange == 0)    \t break;     }}\n\næˆ‘ä»¬ä¼šå‘ç°ï¼Œå†’æ³¡æ’åºç®—æ³•å¹¶æ²¡æœ‰é¢å¤–å®šä¹‰éå¸¸å¤šçš„å˜é‡ï¼Œä¸€å…±åªæœ‰3ä¸ªï¼Œå±äºå¸¸æ•°é˜¶\nsize_t end = n;int exchange = 0;size_t i = 1;\n\nå…¶ç©ºé—´å¤æ‚åº¦ä¸ºO(1)\nè®¡ç®—æ—¶æ³¨æ„å…¶ä¸Nçš„å…³ç³»å½“æˆ‘ä»¬åœ¨ç®—æ³•ä¸­å¼€è¾Ÿç©ºé—´ï¼Œè®¡ç®—ç©ºé—´å¤æ‚åº¦çš„æ—¶å€™ï¼Œè¦æ³¨æ„å¼€è¾Ÿçš„è¿™ä¸ªç©ºé—´ä¸Næœ‰æ²¡æœ‰å…³ç³»\nint arr[N];//c99å˜é•¿æ•°ç»„ï¼Œå’Œä¼ è¿‡æ¥çš„å‚æ•°æœ‰å…³int* a=(int*)malloc(sizeof(int)*N);//å’Œä¼ è¿‡æ¥çš„å‚æ•°æœ‰å…³ï¼ŒO(N)int* a=(int*)malloc(sizeof(int)*3);//å’Œä¼ è¿‡æ¥çš„å‚æ•°æ— å…³ï¼ŒO(1)\n\nNO.2 æ–æ³¢é‚£å¥‘æ•°åˆ—// è®¡ç®—Fibonacciçš„ç©ºé—´å¤æ‚åº¦ï¼Ÿ// è¿”å›æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰né¡¹long long* Fibonacci(size_t n){     if(n==0)     return NULL;     long long * fibArray = (long long *)malloc((n+1) * sizeof(long long));     fibArray[0] = 0;     fibArray[1] = 1;     for (int i = 2; i &lt;= n ; ++i)     {     \tfibArray[i] = fibArray[i - 1] + fibArray [i - 2];     }     return fibArray;}\n\nå’Œä¸Šé¢çš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’ä»£ç ä¸åŒï¼Œè¿™é‡Œæˆ‘ä»¬æ–°åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥ä¿å­˜è®¡ç®—å‡ºæ¥çš„æ–æ³¢é‚£å¥‘æ•°\nä¸€å…±mallocäº†n+1ä¸ªé•¿æ•´å‹çš„ç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\n\nå‡½æ•°æ ˆå¸§ç©ºé—´é‡å¤ä½¿ç”¨é—®é¢˜å¦‚æœæ˜¯é€’å½’æ–¹æ³•çš„æ–æ³¢é‚£å¥‘ç®—æ³•ï¼Œå…¶ç©ºé—´å¤æ‚åº¦æ˜¯å¤šå°‘å‘¢ï¼Ÿ\nlong long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\nç­”æ¡ˆä¹Ÿæ˜¯O(N)\nå› ä¸ºå¯¹äºé€’å½’ç®—æ³•è€Œè¨€ï¼Œå…¶å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ç©ºé—´æ˜¯å¯ä»¥é‡å¤åˆ©ç”¨çš„ï¼\nå¦‚fib(8)çš„è°ƒç”¨ï¼Œå…¶å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ï¼Œæ˜¯å¯ä»¥åœ¨åç»­ç»§ç»­è°ƒç”¨fibå‡½æ•°æ—¶é‡å¤ä½¿ç”¨çš„\n\né€šè¿‡å‡½æ•°çš„å‚æ•°å‹æ ˆï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¥½åœ°ç†è§£è¿™æ˜¯ä¸ºå•¥ğŸ‘‰ç‚¹æˆ‘\n\n\nä¸Šå›¾ä¸­f1å’Œf2æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ‰§è¡Œäº†ç›¸åŒçš„åŠŸèƒ½ã€‚å…¶å‡½æ•°è°ƒç”¨çš„ç©ºé—´å®é™…ä¸Šæ˜¯ä¸€ä¸ªï¼Œf2åœ¨f1é”€æ¯åç»§æ‰¿äº†å®ƒçš„ç©ºé—´\n\nè¿™å°±å¥½æ¯”æ¯ä¸€æ¬¡æ–°çš„é€’å½’éƒ½ä¼šå¼€ä¸€å®¶æ–°çš„é¥­åº—ï¼Œä½†æ˜¯ä½ ä¸‹æ¬¡è¿˜æƒ³åƒä¸œåŒ—èœçš„æ—¶å€™ï¼Œå¯ä»¥å»ä¹‹å‰å¼€çš„ä¸œåŒ—èœé¦†ï¼Œå’±æ²¡å¿…è¦è®©åˆ«äººå†å¼€ä¸€å®¶é¦†å­ä¸æ˜¯å˜›ï¼Ÿ\n\nä¸è¿‡ç”±äºæ–æ³¢é‚£å¥‘æ•°çš„é€’å½’ç®—æ³•ä¼šé€’å½’éå¸¸å¤šæ¬¡ï¼Œåœ¨æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡º\n\né€’å½’å‡½æ•°ç©ºé—´å¤æ‚åº¦é’ˆå¯¹é€’å½’å‡½æ•°ï¼Œå¯ä»¥è®¤ä¸ºç©ºé—´å¤æ‚åº¦å¦‚ä¸‹\né€’å½’å±‚çº§ * æ¯æ¬¡é€’å½’çš„ç©ºé—´å¤æ‚åº¦\n\nå’Œæ—¶é—´å¤æ‚åº¦çš„è®¡ç®—æ˜¯å¾ˆç›¸ä¼¼çš„ã€‚\n\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç©ºé—´å¤æ‚åº¦ï¼Œå¦‚æœå…¥å‚æ˜¯5ï¼Œè°ƒç”¨ä¼šè°ƒç”¨5å±‚ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯ä¸€ä¸ªä¹˜æ³•æ“ä½œï¼Œç©ºé—´è´Ÿè½½åº¦æ˜¯O(1)ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç©ºé—´å¤æ‚åº¦æ˜¯O(5)ï¼Œä¹Ÿå°±æ˜¯O(N)\n// ç‰ˆæœ¬1long long Fib(size_t N){     if(N &lt; 3)     \treturn 1;     return Fib(N-1) + Fib(N-2);}\n\nè¿™ä¸ªå†™æ³•è‚¯å®šä¸æ˜¯æœ€ä¼˜çš„ï¼Œä»£ç éšæƒ³å½•ä¸­æä¾›äº†ä¸ªæ›´å¥½çš„è§£æ³•\n// ç‰ˆæœ¬2// è¿›å…¥è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå‰ä¸¤ä¸ªå‚æ•°éƒ½ç»™1ï¼ŒNæ­£å¸¸ç»™long long Fib(long long first,long long second,size_t N){     if(N &lt;= 0)         return 0;     if(N &lt; 3)     \treturn 1;     else if(N == 3)// ç›¸å½“äºå‡å°‘äº†ä¸¤æ¬¡é€’å½’     \treturn first+second;\t     return Fib(second,first+second,N-1);}\n\næ­¤æ—¶å‡å°‘äº†2æ¬¡é€’å½’ï¼Œè™½ç„¶å¹¶æ²¡æœ‰é™ä½ç©ºé—´å¤æ‚åº¦ï¼ˆè¿˜æ˜¯O(N))ï¼Œä½†æ—¶é—´è´Ÿè½½åº¦å¤§å¤§é™ä½ï¼\n\nç‰ˆæœ¬1æ—¶é—´å¤æ‚åº¦ä¸ºO(2n)\nç‰ˆæœ¬2æ—¶é—´å¤æ‚åº¦ä¸ºO(N)\n\nè¿è¡Œé€Ÿåº¦ä¹Ÿä¼šå¿«éå¸¸å¤šï¼\n\nNO.3 é˜¶ä¹˜long long Fac(size_t N){     if(N == 0)     \treturn 1;     return Fac(N-1)*N;}\n\nè™½ç„¶å‡½æ•°æœ¬èº«çš„ç©ºé—´ä¸è®¡å…¥æ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œè®¡ç®—çš„æ˜¯é€’å½’è°ƒç”¨æ—¶é¢å¤–å¼€è¾Ÿçš„å‡½æ•°æ ˆå¸§ç©ºé—´\nä¸€å…±è°ƒç”¨äº†N-1æ¬¡ï¼Œæ¯ä¸ªæ ˆå¸§ä½¿ç”¨äº†å¸¸æ•°ä¸ªç©ºé—´ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\n4.å¸¸è§å¤æ‚åº¦å¯¹æ¯”ğŸ‘\n\n\nç»“è¯­ğŸ˜˜æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¥½çš„äº†è§£è‡ªå·±æ‰€å†™ç®—æ³•çš„å¥½åï¼Œåœ¨æœªæ¥é¢è¯•çš„æ—¶å€™ï¼ŒHRè‚¯å®šä¹Ÿæ›´å–œæ¬¢æ•ˆç‡é«˜çš„ç®—æ³•\nè¦å¤šåˆ·é¢˜ï¼Œå¥½å¥½ç§¯ç´¯è‡ªå·±çš„èƒ½åŠ›ï¼Œæƒ³å¿…ä¹‹åå†™å‡ºå¥½ç®—æ³•ä¹Ÿæ˜¯æ°´åˆ°æ¸ æˆï¼ˆå§ï¼Ÿï¼‰\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµå†èµ°å‘—~\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","ç®—æ³•","æ•°æ®ç»“æ„","OJåˆ·é¢˜"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¦ä½ ç”¨å·æ‡’çš„æ–¹å¼åˆ·çˆ†äºŒå‰æ ‘OJé¢˜","url":"/posts/4165981723/","content":"[TOC]\nå‰è¨€ä¸Šç¯‡åšå®¢æˆ‘å¸¦å¤§å®¶é¢†ç•¥äº†ä¸€ç•ªé“¾å¼äºŒå‰æ ‘çš„æ“ä½œï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹äºŒå‰æ ‘çš„ç›¸å…³é¢˜ç›®ï¼Œä¸€èµ·æ¥å·©å›ºä¸€ä¸‹çŸ¥è¯†ç‚¹å§ï¼\n\n\nç‚¹æˆ‘å¤ä¹ ä¸Šä¸€ç¯‡åšå®¢çš„å†…å®¹ï¼ğŸ‘‰ä¼ é€é—¨\n\n1.ä¸€äº›é€‰æ‹©é¢˜1.1è®¾ä¸€æ£µäºŒå‰æ ‘ä¸­æœ‰3ä¸ªå¶å­ç»“ç‚¹ï¼Œæœ‰8ä¸ªåº¦ä¸º1çš„ç»“ç‚¹ï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸­æ€»çš„ç»“ç‚¹æ•°ä¸ºï¼ˆ ï¼‰ä¸ªA.11B.12C.13  âˆšD.14\n\n\nè®¾Niè¡¨ç¤ºåº¦ä¸ºiçš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œåˆ™èŠ‚ç‚¹æ€»æ•° N &#x3D; N0 + N1 + N2\nèŠ‚ç‚¹ä¸ªæ•°äºèŠ‚ç‚¹è¾¹çš„å…³ç³»ï¼š Nä¸ªèŠ‚ç‚¹çš„æ ‘æœ‰N-1ä¸ªè¾¹\nè¾¹ä¸åº¦çš„å…³ç³»ï¼šN - 1 &#x3D; N1 + 2 * N2\næ•…ï¼šN0 + N1 + N2 - 1 &#x3D; N1 + 2 * N2\nå› æ­¤ï¼Œå¾—ï¼šN0 &#x3D; N2 + 1\nå›åˆ°åŸé¢˜ï¼ŒN0 &#x3D; 3ï¼ŒN1 &#x3D; 8ï¼Œå¯å¾—N2 &#x3D; 2\nå› æ­¤ç­”æ¡ˆæ˜¯ 3 + 8 + 2 &#x3D; 13\n\n1.2æœ‰Nä¸ªå…ƒç´ çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦æ˜¯()ç­”æ¡ˆï¼šlogN+1\n\né«˜åº¦ä¸ºhçš„å®Œå…¨äºŒå‰æ ‘ï¼ŒèŠ‚ç‚¹ä¸ªæ•°åœ¨ï¼š 2^(h - 1) - 1 &lt; n &lt;= 2^h - 1\nå³log(n + 1) &lt;= h &lt; log(n + 1) + 1\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯nå·¦å³åŒºé—´çš„å¼€é—­é—®é¢˜\nå®Œå…¨äºŒå‰æ ‘æœ€å°‘çš„èŠ‚ç‚¹ä¸ªæ•°æ˜¯2^(h - 1)-1+1ä¸ªï¼Œæ‰€ä»¥æ˜¯n&gt;2^(h - 1) - 1\n\n1.3 ç”±å·²çŸ¥éå†åºåˆ—ç”»å‡ºåŸæœ¬æ ‘çš„ç»“æ„å·²çŸ¥æŸäºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—ä¸ºJGDHKBAELIMCFï¼Œååºéå†åºåˆ—ä¸ºJGKHDBLMIEFCAï¼Œåˆ™å…¶å‰åºéå†åºåˆ—ä¸ºï¼ˆ ï¼‰A.ABDGHJKCEFILMB.ABDGJHKCEILMF   âˆšC.ABDHKGJCEILMFD.ABDGJHKCEIMLF\n\nè¿™é“é¢˜æˆ‘åˆšå¼€å§‹çš„æ€è·¯æ˜¯é”™çš„ï¼Œå› ä¸ºæˆ‘æŠŠå®ƒå½“ä½œå®Œå…¨äºŒå‰æ ‘æ¥çœ‹å¾…ï¼Œä½†é¢˜ç›®å¹¶æ²¡æœ‰è¯´å®ƒæ˜¯å®Œå…¨äºŒå‰æ ‘\n\nä¸»è¦æ€è·¯ï¼šå¯ä»¥ä»åç»­éå†ç¡®å®šæ ¹èŠ‚ç‚¹ä¸ºAï¼Œä¸­åºéå†å¯ä»¥ç¡®å®šAçš„å·¦å³å­æ ‘ã€‚å†ç»§ç»­ä»ååºéå†ä¸­ç¡®å®šAå·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¾æ¬¡å¾€ä¸‹åˆ¤æ–­\n\næ‰€ä»¥æˆ‘ç”»äº†ä¸€ä¸ªåˆ†æå›¾ï¼Œå¦‚ä¸‹ğŸ‘‡\n\nå·²çŸ¥æŸäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—ä¸ºABDECï¼Œä¸­åºéå†åºåˆ—ä¸ºBDEACï¼Œåˆ™è¯¥äºŒå‰æ ‘ï¼ˆ ï¼‰A.æ˜¯æ»¡äºŒå‰æ ‘B.æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œä¸æ˜¯æ»¡äºŒå‰æ ‘C.ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘   âˆšD.æ˜¯æ‰€æœ‰çš„ç»“ç‚¹éƒ½æ²¡æœ‰å³å­æ ‘çš„äºŒå‰æ ‘\n\nè¿™é“é¢˜çš„æ€è·¯å’Œä¸Šä¸€é“é¢˜æ˜¯ä¸€æ ·çš„\n\nå·²çŸ¥æŸäºŒå‰æ ‘çš„å‰åºéå†åºåˆ—ä¸º5 7 4 9 6 2 1ï¼Œä¸­åºéå†åºåˆ—ä¸º4 7 5 6 9 1 2ï¼Œåˆ™å…¶ååºéå†åºåˆ—ä¸ºï¼ˆ ï¼‰A.4 2 5 7 6 9 1B.4 2 7 5 6 9 1C.4 7 6 1 2 9 5  âˆšD.4 7 2 9 5 6 1\n\næœ¬é¢˜ä¾æ—§å’Œä¸Šé¢ä¸¤é“é¢˜æ€è·¯ç›¸åŒï¼\n\n1.4 å•è¾¹æ ‘ä¸€æ£µéç©ºçš„äºŒå‰æ ‘çš„å…ˆåºéå†åºåˆ—ä¸ååºéå†åºåˆ—æ­£å¥½ç›¸åï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸€å®šæ»¡è¶³ï¼ˆ ï¼‰A.æ‰€æœ‰çš„ç»“ç‚¹å‡æ— å·¦å­©å­B.æ‰€æœ‰çš„ç»“ç‚¹å‡æ— å³å­©å­C.åªæœ‰ä¸€ä¸ªå¶å­ç»“ç‚¹D.è‡³å¤šåªæœ‰ä¸€ä¸ªç»“ç‚¹\n\nå¦‚æœå‰åºéå†å’Œååºéå†åºåˆ—æ­£å¥½ç›¸åï¼Œè¯´æ˜å®ƒæ˜¯ä¸€ä¸ªå•è¾¹æ ‘ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‰åºå’Œä¸­åºåºåˆ—æ‰€æ„æˆçš„æ ‘çš„ç»“æ„:\n12345ï¼ˆçºµå‘ï¼‰\n54321\nå¯¹äºå•è¾¹æ ‘ï¼Œåªæœ‰ä¸€ä¸ªå¶å­èŠ‚ç‚¹\n\n1.520.å¦‚æœä¸€é¢—äºŒå‰æ ‘çš„å‰åºéå†çš„ç»“æœæ˜¯ABCDï¼Œåˆ™æ»¡è¶³æ¡ä»¶çš„ä¸åŒçš„äºŒå‰æ ‘æœ‰ï¼ˆ ï¼‰ç§A.13B.14 âˆšC.15D.16\n\n\né¦–å…ˆè¿™æ£µäºŒå‰æ ‘çš„é«˜åº¦ä¸€å®šåœ¨3~4å±‚ä¹‹é—´:\nä¸‰å±‚ï¼š\nA(B(C,D),()), A((),B(C,D)), A(B(C,()),D), A(B((),C),D),\nA(B,C(D,())), A(B,C((),D))\nå››å±‚ï¼š\nå¦‚æœä¸ºå››å±‚ï¼Œå°±æ˜¯å•è¾¹æ ‘ï¼Œæ¯ä¸€å±‚åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé™¤è¿‡æ ¹èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹éƒ½æœ‰ä¸¤ç§é€‰æ‹©ï¼Œåœ¨ä¸Šå±‚èŠ‚ç‚¹çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œæ‰€ä»¥222å…±8ç§\næ€»å…±ä¸º14ç§ã€‚\n\n\n2.OJé¢˜åˆ·èµ·æ¥ï¼KY11 äºŒå‰æ ‘éå†\nç‰›å®¢ç½‘ KY11 äºŒå‰æ ‘éå† ğŸ‘‰ä¼ é€é—¨\n\n\nè¿™é“é¢˜è¦æ±‚æˆ‘ä»¬ç”¨å…ˆåºéå†çš„æ“ä½œä»ä¸€ä¸ªæ•°ç»„ä¸­è¯»å‡ºä¸€ä¸ªæ ‘ï¼Œå¹¶æ„å»ºå‡ºæ ‘çš„åŸºæœ¬ç»“æ„ï¼Œå†ç”¨ä¸­åºéå†çš„æ–¹å¼æ‰“å°å‡ºè¿™é¢—æ ‘\nä¹‹å‰æˆ‘ä»¬å­¦ä¹ äº†å‰åºéå†çš„æ“ä½œï¼Œè¿™é‡Œåªéœ€è¦æŠŠå‰åºéå†ä¸­çš„printfæ“ä½œæ”¹æˆæ„å»ºæ–°æ ‘å³å¯\n\nå› ä¸ºæ¶‰åŠé“içš„å¤šæ¬¡è°ƒç”¨ï¼Œæ‰€ä»¥å‡½æ•°ä¸­çš„iéœ€è¦å–åœ°å€ï¼Œå¿…é¡»ä¿è¯å¤šæ¬¡è°ƒç”¨çš„iä¼šåŒæ­¥++\næ„å»ºå®Œæ ‘çš„èŠ‚ç‚¹ï¼Œå¹¶èµ‹å€¼åï¼Œéœ€è¦é€’å½’æ„å»ºå·¦å³å­æ ‘ï¼Œæœ€åè¿”å›èŠ‚ç‚¹çš„åœ°å€\né¢˜ç›®ä¸­çš„#ä»£è¡¨NULLï¼Œç›´æ¥returnç©ºå³å¯\n\n#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;stdbool.h&gt;typedef char BTDataType;typedef struct BTreeNode&#123;\tBTDataType data;\tstruct BTreeNode* left;\tstruct BTreeNode* right;&#125;BTNode;// äºŒå‰æ ‘ä¸­åºéå† void BTreeInOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\treturn ;\t&#125;\t\tBTreeInOrder(root-&gt;left);    printf(&quot;%c &quot;, root-&gt;data);\tBTreeInOrder(root-&gt;right);&#125;BTNode* CreatTree(char *arr,int*i)&#123;    if (arr[*i] == &#x27;#&#x27;)&#123;        (*i)++;\t\treturn NULL;\t&#125;        BTNode* newnode=(BTNode*)malloc(sizeof(BTNode));        newnode-&gt;data=arr[(*i)++];//iå¿…é¡»å–åœ°å€    newnode-&gt;left=CreatTree(arr,i);//é€’å½’æ„å»ºå·¦å­æ ‘    newnode-&gt;right=CreatTree(arr,i);//é€’å½’æ„å»ºå³å­æ ‘        return newnode;&#125;int main()&#123;    char arr[100];    scanf(&quot;%s&quot;,arr);        int i=0;    BTNode* root=CreatTree(arr,&amp;i);    BTreeInOrder(root);    return 0;&#125;\n\n100 ç›¸åŒçš„æ ‘\nleetcodeï¼š100. ç›¸åŒçš„æ ‘\n\n\né¢˜ç›®è¦æ±‚å¾ˆç®€å•ï¼Œç»™å®šä¸¤é¢—æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¦æ±‚æˆ‘ä»¬åˆ¤æ–­è¿™ä¸¤æ£µæ ‘æ˜¯å¦ç›¸åŒ\n\nå¦‚æœä¸¤æ£µæ ‘éƒ½ä¸ºç©ºï¼Œæ ‘ç›¸åŒ\nå¦‚æœå…¶ä¸­ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªä¸ä¸ºç©ºï¼Œæ ‘ä¸åŒ\nå¦‚æœä¸¤ä¸ªéƒ½ä¸ä¸ºç©ºï¼Œä½†æ˜¯èŠ‚ç‚¹å€¼ä¸ç›¸åŒï¼Œæ ‘ä¸åŒ\nç„¶åå†é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå°†å®ƒä»¬çš„ç»“æœä¸&amp;&amp;åœ¨ä¸€èµ·ï¼Œå…¶ä¸­ä¸€ä¸ªä¸ºå‡ï¼Œè¿”å›å‡\n\nbool isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦ç›¸ç­‰    return isSameTree(p-&gt;left,q-&gt;left)        &amp;&amp; isSameTree(p-&gt;right,q-&gt;right);&#125;\n\n\nå­¦ä¼šè¿™é“é¢˜åï¼Œåé¢ä¸€äº›é¢˜ç›®å…¶å®åªéœ€è¦æŠŠå®ƒçš„ä»£ç æ”¹ä¸€æ”¹å°±èƒ½ç”¨äº†ğŸ˜‚\nä»€ä¹ˆï¼Ÿä½ ä¸ä¿¡ï¼Ÿé‚£å°±çœ‹çœ‹ä¸‹é¢è¿™é“é¢˜ï¼\n\n101 å¯¹ç§°äºŒå‰æ ‘\nleetcodeï¼š101. å¯¹ç§°äºŒå‰æ ‘\n\n\né¢˜ç›®è¦æ±‚å¾ˆç®€å•å“ˆï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯ä¸¤è¾¹å¯¹ç§°çš„æ ‘\nè¿™å’Œåˆ¤æ–­æ ‘ç›¸ç­‰æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¸å°±æ˜¯æŠŠå·¦å³å­æ ‘çš„åˆ¤æ–­æ”¹ä¸€ä¸‹å°±è¡Œäº†å˜›ï¼Ÿ\nç›´æ¥è°ƒç”¨ä¸Šä¸€é¢˜çš„ä»£ç ï¼æ³¨æ„æœ€åçš„returnå€¼ï¼Œæ˜¯pçš„å·¦å’Œqçš„å³è¿›è¡Œåˆ¤æ–­\nbool _isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦å¯¹ç§°ç›¸ç­‰    return _isSameTree(p-&gt;left,q-&gt;right)        &amp;&amp; _isSameTree(p-&gt;right,q-&gt;left);&#125;bool isSymmetric(struct TreeNode* root)&#123;    return _isSameTree(root-&gt;left,root-&gt;right);&#125;\n\n\nå“ˆå“ˆï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Œåˆ«æ€¥ï¼Œåé¢è¿˜æœ‰å¯ä»¥å·æ‡’çš„é¢˜ç›®ï¼\n\n572 å¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘\nleetcodeï¼š572. å¦ä¸€æ£µæ ‘çš„å­æ ‘\n\n\nè¿™é“é¢˜æˆ‘ä»¬è¦åˆ¤æ–­ä¸€é¢—æ ‘æ˜¯å¦ä¸ºå¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘ï¼Œå’Œåˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²å¾ˆç›¸ä¼¼\nå…¶å®åªéœ€è¦é€’å½’åˆ¤æ–­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦å’ŒsubRootç›¸åŒå°±å¯ä»¥äº†ï¼\nbool _isSameTree(struct TreeNode* p, struct TreeNode* q)&#123;    if(p==NULL&amp;&amp;q==NULL)//æ¯”è¾ƒæ˜¯å¦ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œéƒ½ä¸ºç©ºæ˜¯çœŸ        return true;        if(p==NULL||q==NULL)//å¦‚æœæœ‰ä¸€ä¸ªä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªéç©ºï¼Œå³ä¸ºå‡        return false;    if(p-&gt;val!=q-&gt;val)//éƒ½ä¸æ˜¯ç©ºï¼Œåˆ¤æ–­valçš„å€¼æ˜¯å¦ç›¸ç­‰        return false;        //é€’å½’åˆ¤æ–­å·¦å­æ ‘å’Œå³å­æ ‘æ˜¯å¦ç›¸ç­‰    return _isSameTree(p-&gt;left,q-&gt;left)        &amp;&amp; _isSameTree(p-&gt;right,q-&gt;right);&#125;bool isSubtree(struct TreeNode* root, struct TreeNode* subRoot)&#123;    // if(root==NULL&amp;&amp;subRoot==NULL)    //     return true;    // if(root!=NULL&amp;&amp;subRoot==NULL)    //     return true;    // è®©isSametreeå‡½æ•°æ¥æ¯”è¾ƒè¿™ä¿©ä¸ª    if(root==NULL)        return false;    if(_isSameTree(root,subRoot))        return true;    //åªè¦å·¦å³æœ‰ä¸€ä¸ªæ˜¯è¿”å›çœŸï¼Œé‚£å°±æ˜¯å­æ ‘    return isSubtree(root-&gt;left,subRoot)        || isSubtree(root-&gt;right,subRoot);&#125;\n\n\næ˜¯ä¸æ˜¯çˆ½èµ·æ¥äº†ï¼Ÿå†æ¥ä¸€é“ï¼\n\n\n226 ç¿»è½¬äºŒå‰æ ‘\nleetcodeï¼š226. ç¿»è½¬äºŒå‰æ ‘\n\n\nè¿™é“é¢˜çš„æ€è·¯å¦‚ä¸‹å“ˆï¼\n\nå¦‚æœæ˜¯ç©ºæ ‘ï¼Œä¸éœ€è¦ç¿»è½¬ï¼Œç›´æ¥return\nå¦‚æœéç©ºï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹çš„å·¦å³å­æ ‘äº¤æ¢ï¼ˆè¿™é‡Œä¸éœ€è¦æ‹…å¿ƒäº¤æ¢åæ‰¾ä¸åˆ°å­æ ‘çš„é—®é¢˜ï¼‰\nä¸éœ€è¦å•ç‹¬æç©ºçš„å­æ ‘ï¼Œä¸€å¹¶äº¤æ¢å°±å¯ä»¥\nå½“æ ¹èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™ï¼Œreturn\n\nå•ªçš„ä¸€ä¸‹å¾ˆå¿«å“ˆï¼Œä»£ç å°±å†™å‡ºæ¥äº†ï¼\nvoid _invertTree(struct TreeNode* root)&#123;    if(root==NULL)//è®¾ç½®é€€å‡ºæ¡ä»¶ï¼Œå¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºå°±è¿”å›        return;    //è®©å¦å¤–ä¸¤ä¸ªå€¼æ¥æ¥æ”¶åŸæœ¬çš„å·¦å³èŠ‚ç‚¹    struct TreeNode* left=root-&gt;left;    struct TreeNode* right=root-&gt;right;    //æ›´æ”¹å·¦å³èŠ‚ç‚¹    root-&gt;right=left;    root-&gt;left=right;    //é€’å½’å­æ ‘    _invertTree(root-&gt;left);    _invertTree(root-&gt;right);&#125;struct TreeNode* invertTree(struct TreeNode* root)&#123;    if(root==NULL)//åˆ¤æ–­ç©ºæ ‘        return NULL;    _invertTree(root);        return root;&#125;\n\n\n102 å±‚åºéå†ï¼ˆè¾ƒéš¾ğŸ˜¥ï¼‰\nleetcodeï¼š102. äºŒå‰æ ‘çš„å±‚åºéå†\n\n\nè¿™é“é¢˜ç›¸å¯¹æ¥è¯´å°±ä¹ˆæœ‰é‚£ä¹ˆå®¹æ˜“äº†ï¼Œä½ å¯èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå‹æ ¹æ²¡çœ‹æ˜ç™½é¢˜ç›®è¦æ±‚ä¸­çš„åä¸¤ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¹²å˜›çš„\n\n/** * Return an array of arrays of size *returnSize. * The sizes of the arrays are returned as *returnColumnSizes array. * Note: Both returned array and *columnSizes array must be malloced, assume caller calls free(). */int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes)&#123;&#125;\n\nçœ‹äº†ä¸€äº›é¢˜è§£ï¼Œè¿™æ‰ç®—ç†è§£äº†è¿™é“é¢˜çš„è¦æ±‚\n\n*returnSizeï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘çš„å±‚æ•°\n**returnColumnSizesï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿”å›å€¼è¦æ±‚æ˜¯int**ï¼šéœ€è¦è¿”å›ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ•°ç»„Aï¼Œæ•°ç»„Aä¿å­˜äº†äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\n\n\n0.é”™è¯¯æ€è·¯æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œç”¨å•ç‹¬çš„å‡½æ•°è®¡ç®—å‡ºæ ‘çš„èŠ‚ç‚¹ä¸ªæ•°å’Œå±‚çº§ï¼Œå†è¿›è¡Œä¸€æ¬¡å±‚åºéå†æ¥å¾—åˆ°æ ‘çš„å€¼ã€‚\nä½†å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸€æ€è·¯åœ¨æœ¬é¢˜æ˜¯æä¸é€šçš„ï¼ğŸ¤”\n1.æ•°ç»„é˜Ÿåˆ—åˆå§‹åŒ–åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘è®²è¿°äº†åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°å±‚åºéå†çš„æ€è·¯ã€‚è¿™é“OJé¢˜ç›®æˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚ä¸åŒçš„æ˜¯ï¼Œåœ¨æˆ‘è‡ªå·±å†™çš„é˜Ÿåˆ—å®ç°é‡Œï¼Œä½¿ç”¨çš„æ˜¯é“¾å¼é˜Ÿåˆ—ã€‚è€Œæœ¬é¢˜ä½¿ç”¨æ•°ç»„é˜Ÿåˆ—ä¼šå¥½ä¸€ç‚¹ï¼\n#define MAX 2000int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes) &#123;    if (root == NULL)        return;    struct TreeNode* Queue[MAX];//é˜Ÿåˆ—ï¼Œå­˜æ”¾èŠ‚ç‚¹çš„åœ°å€    int front = 0, tail = 0;//æŒ‡å‘é˜Ÿå¤´å’Œé˜Ÿå°¾\n\n2.åˆå§‹åŒ–æ•°ç»„è¿™éƒ¨åˆ†ä¼šæ¯•ç«Ÿç»•ï¼Œå…ˆä¸€æ­¥ä¸€æ­¥æ¥ç†è§£\n*returnSize = 0;//å°†äºŒå‰æ ‘å±‚çº§åˆå§‹åŒ–ä¸º0//å­˜æ”¾äºŒå‰æ ‘çš„æ¯ä¸€å±‚èŠ‚ç‚¹çš„å€¼int** ret = (int**)malloc(sizeof(int*) * MAX);//å¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°*returnColumnSizes = (int*)malloc(sizeof(int*) * (MAX / 2));\n\n\nretæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾çš„æ˜¯æ•°ç»„Aï¼Œæ•°ç»„Aé‡Œé¢æ˜¯æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ã€‚retä¹Ÿå°±æ˜¯é¢˜ç›®è¦æ±‚çš„è¿”å›å€¼\n*returnColumnSizeså¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°\n\nè¿™é‡Œå…¶å®returnColumnSizesæ²¡æœ‰å•¥äºŒçº§æŒ‡é’ˆçš„å¿…è¦ï¼Œä½†æ˜¯æ—¢ç„¶é¢˜ç›®ç»™äº†æ˜¯int**ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆ*è§£å¼•ç”¨å†mallocå¼€è¾Ÿæ•°ç»„\n3.é˜Ÿåˆ—æ“ä½œæ€è·¯\nå…ˆè®©æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ï¼Œtail++\nå¤–å±‚å¾ªç¯åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦éç©ºï¼Œå¦‚æœéç©ºå°±åœæ­¢æ“ä½œ\nå†…å±‚å¾ªç¯è¿›è¡Œæ¯ä¸€å±‚çš„å…¥é˜Ÿæ“ä½œï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼å’ŒèŠ‚ç‚¹ä¸ªæ•°\nåœ¨å†…å±‚å¾ªç¯ä¸­åˆ›å»ºretæ•°ç»„çš„å­æ•°ç»„ï¼Œå•ç‹¬å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\næœ€åå°†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°èµ‹å€¼ç»™*returnColumnSizesæ•°ç»„ï¼Œ*returnSize++ä¸€æ¬¡\n\n   struct TreeNode* head;   Queue[tail++] = root;//æ ¹èŠ‚ç‚¹å…¥é˜Ÿ   while (front != tail)   &#123;       int Csize = 0;//æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       int end = tail;       //endæ˜¯æ¯ä¸€å±‚æœ€æœ«ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚åœ¨åç»­çš„å…¥é˜Ÿåˆ—æ“ä½œä¸­tailä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦ä¿å­˜tailçš„å€¼       ret[*returnSize] = (int*)malloc(sizeof(int*) * (end - front));       //ä¸ºæ¯ä¸€å±‚å¼€è¾Ÿä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥å­˜æ”¾å€¼       while (front &lt; end)       &#123;           head = Queue[front++];           ret[*returnSize][Csize++] = head-&gt;val;           //æ•°ç»„èµ‹å€¼ï¼ŒåŒæ—¶æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°Csize++           if (head-&gt;left != NULL)               Queue[tail++] = head-&gt;left;           if (head-&gt;right != NULL)               Queue[tail++] = head-&gt;right;       &#125;       (*returnColumnSizes)[*returnSize] = Csize;//èµ‹å€¼æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       (*returnSize)++;//å±‚æ•°+1   &#125;return ret;\n\nå¤–å±‚å¾ªç¯ç»“æŸåï¼Œæ­¤æ—¶retæ•°ç»„å°±æ˜¯é¢˜ç›®è¦æ±‚çš„ç»“æœäº†ï¼Œè¿”å›retå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå½“æ ‘ä¸ºç©ºæ ‘æ—¶ï¼Œå±‚çº§åº”è¯¥æ˜¯0ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è¡Œèµ‹å€¼*returnSize = 0;ä¸ç„¶ä¼šæ‰§è¡Œå‡ºé”™\n\n\nè¿™é“é¢˜çš„æ€è·¯æ˜¯æˆ‘çœ‹è¿‡é¢˜è§£ä¹‹åæ‰ææ˜ç™½çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„åªæ˜¯ä¸€ä¸ªæ€è·¯çš„å¤ç°ğŸ˜­è¿˜æ˜¯å¤ªèœäº†ï¼\n\nç»“è¯­æœ¬ç¯‡åˆ·é¢˜ç¬”è®°åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¦‚æœå¯¹æ¶‰åŠåˆ°çš„é¢˜ç›®æœ‰ä»€ä¹ˆä¸æ‡‚çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n\nè¦æ˜¯çŸ¥é“ï¼ŒOJä¹Ÿèƒ½å·æ‡’ï¼Œå˜¿å˜¿å˜¿å˜¿â€¦â€¦ğŸ˜‚\n\nä¸è¿‡æœ€åä¸€é“é¢˜æ˜¯çœŸçš„éš¾ï¼Œæˆ‘è¿˜ä»¥ä¸ºå®ƒå’Œå‰ä¸­ååºéå†ä¸€æ ·ï¼Œåªæ˜¯è®©æˆ‘ä»¬éå†å‡ºæ•°ç»„çš„å€¼å‘¢ğŸ™ƒ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","OJåˆ·é¢˜","æ ‘"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°æ®ç»“æ„-é“¾å¼äºŒå‰æ ‘ï¼Œè¯¦è§£åˆ†æ²»é€’å½’å’Œå±‚åºéå†","url":"/posts/2357097133/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰å…³äºæ ‘çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æ¥è§¦äº†äºŒå‰æ ‘çš„çŸ¥è¯†ç‚¹ï¼Œä»¥åŠå †å’Œå †æ’åºçš„æ“ä½œã€‚\n\nä¸¤ä¸ªçŸ¥è¯†ç‚¹éƒ½æ˜¯è¶…é“¾æ¥ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ï¼Œå¤ä¹ ä¸€ä¸‹è¿™ä¸¤ä¸ªçŸ¥è¯†ç‚¹å“¦ï¼\n\n\næ¥ä¸‹æ¥æˆ‘ä»¬è¦æ›´è¿›ä¸€æ­¥ï¼Œå­¦ä¹ ä¸€ä¸‹é“¾å¼äºŒå‰æ ‘çš„æ“ä½œ\næœ¬ç¯‡åšå®¢å°†ä»¥çŸ¥è¯†ç‚¹è®²è§£+OJé¢˜ç›®éªŒè¯çš„æ–¹å¼æ¥å±•å¼€é“¾å¼äºŒå‰æ ‘çš„å†…å®¹\n\n1.é“¾å¼äºŒå‰æ ‘çš„åŸºæœ¬ç»“æ„åœ¨å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„åŸºæœ¬æ“ä½œå‰ï¼Œéœ€å…ˆè¦åˆ›å»ºä¸€æ£µäºŒå‰æ ‘ï¼Œç„¶åæ‰èƒ½å­¦ä¹ å…¶ç›¸å…³çš„åŸºæœ¬æ“ä½œã€‚\nä¹‹å‰æˆ‘ä»¬æåˆ°è¿‡ï¼Œæ ‘æœ€ä¼˜çš„è¡¨ç¤ºæ–¹æ³•æ˜¯çˆ¶æ¯å­©å­è¡¨ç¤ºæ³•ã€‚ä½†æ˜¯å¯¹äºäºŒå‰æ ‘è¿™ç§åº¦å›ºå®šçš„æ ‘æ¥è¯´ï¼Œå¯ä»¥ ç›´æ¥ä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•ï¼Œå®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å®ƒçš„å·¦å³å¶å­èŠ‚ç‚¹å³å¯\ntypedef int BTDataType;typedef struct BTreeNode&#123;\tBTDataType data;\tstruct BTreeNode* left;\tstruct BTreeNode* right;&#125;BTNode;\n\nè¿™é‡Œè¦è¯´æ˜çš„ä¸€ä»¶äº‹æ˜¯ï¼šæ™®é€šæ ‘çš„â€œå¢åˆ æŸ¥æ”¹â€æ“ä½œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæ ‘å¹¶ä¸æ˜¯ä¸€ä¸ªæœ€ä¼˜çš„å‚¨å­˜ç»“æ„ã€‚æ‰€ä»¥æˆ‘ä»¬å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„æ“ä½œæ—¶ï¼Œæ›´å¤šå­¦ä¹ çš„æ˜¯åˆ†æ²» é€’å½’æ€æƒ³\n\n2.åˆ†æ²»é€’å½’æ€æƒ³ä»€ä¹ˆæ˜¯åˆ†æ²»æ€æƒ³ï¼Ÿ\nä¸¾ä¸ªä¾‹å­ï¼Œå­¦æ ¡é‡Œé¢éœ€è¦è¿›è¡Œæ’æŸ¥ï¼Œæ‰¾å‡ºæœ¬æ ¡é‡Œé¢èº«é«˜æœ€é«˜çš„äººã€‚è¿™æ—¶å€™æ ¡é•¿å¯ä»¥å»æ‰¾å„ä¸ªå¹´çº§çš„çº§ç»„é•¿ï¼Œç„¶åçº§ç»„é•¿å»æ‰¾å„ä¸ªç­ä¸»ä»»ï¼Œç­ä¸»ä»»è®©ç­çº§é‡Œé¢çš„å°ç»„é•¿ç»Ÿè®¡ç»„å‘˜èº«é«˜æ•°æ®ã€‚\nè¿™æ—¶å€™çš„å°ç»„é•¿å·²ç»å¯ä»¥è¿”å›ä¸€ä¸ªèº«é«˜æœ€é«˜çš„å€¼ç»™ç­ä¸»ä»»äº†ï¼Œç„¶åå†å±‚å±‚ä¸ŠæŠ¥ï¼Œæ ¡é•¿åªéœ€è¦åœ¨æœ€åä¸ŠæŠ¥çš„4ä¸ªæ•°æ®ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é«˜çš„ï¼Œå³ä¸ºæœ¬æ ¡æœ€é«˜çš„åŒå­¦\n\nåˆ†æ²»ç­–ç•¥çš„æ€æƒ³å°±æ˜¯åˆ†è€Œæ²»ä¹‹ï¼Œå³å…ˆå°†ä¸€ä¸ªè§„æ¨¡è¾ƒå¤§çš„å¤§é—®é¢˜åˆ†è§£æˆè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„å°é—®é¢˜ï¼Œå†å¯¹è¿™äº›å°é—®é¢˜è¿›è¡Œè§£å†³ï¼Œå¾—åˆ°çš„è§£ï¼Œåœ¨å°†å…¶ç»„åˆèµ·æ¥å¾—åˆ°æœ€ç»ˆçš„è§£ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¾ƒå°çš„é—®é¢˜å°±æ˜¯å°ç»„é•¿ç»Ÿè®¡ç»„å‘˜èº«é«˜ï¼Œå¹¶ä¸ŠæŠ¥ã€‚è½¬æ¢æˆä»£ç è¯­è¨€å°±æ˜¯returnä¸€ä¸ªå€¼\n\næ›´è¯¦ç»†çš„è§£é‡Šå¯ä»¥å‚è€ƒè¿™ç¯‡å¤§ä½¬çš„åšå®¢ğŸ‘‡\näº”å¤§å¸¸è§ç®—æ³•ç­–ç•¥ä¹‹â€”â€”é€’å½’ä¸åˆ†æ²»ç­–ç•¥\n\næ—©å…ˆå­¦ä¹ çš„é€’å½’æ±‚æ–æ³¢é‚£å¥‘æ•°å°±è¿ç”¨äº†åˆ†æ²»çš„æ€æƒ³ğŸ‘‰ä¼ é€é—¨\nint fo2(int a)&#123;\tif ((a == 1) || (a == 2))\t\treturn 1;\telse\t\treturn (fo2(a - 1) )+( fo2(a- 2));//n-1å’Œn-2é¡¹&#125;\n\nå½“a&#x3D;1æˆ–è€…2çš„æ—¶å€™ï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯èŠ‚ç‚¹ï¼Œé€šè¿‡return 1å¼€å§‹ç»ˆæ­¢é€’å½’\n\n3.å‰&#x2F;ä¸­&#x2F;ååºéå†äº†è§£äº†ä¸Šé¢æ‰€è¯´çš„åˆ†æ²»é€’å½’æ€æƒ³åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†å­¦ä¹ é“¾å¼äºŒå‰æ ‘çš„ä¸‰ç§éå†æ–¹å¼\n\nå‰åºéå†ï¼šæ ¹èŠ‚ç‚¹-å·¦å­æ ‘-å³å­æ ‘\nä¸­åºéå†ï¼šå·¦å­æ ‘-æ ¹èŠ‚ç‚¹-å³å­æ ‘\nååºéå†ï¼šå·¦å­æ ‘-å³å­æ ‘-æ ¹èŠ‚ç‚¹\n\nä»å‰åºéå†å…¥æ‰‹ï¼Œæˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹åˆ†æ²»çš„æ€æƒ³ï¼šåˆ©ç”¨é€’å½’ï¼Œä»¥å‰åºéå†çš„é¡ºåºæ‰“å°å‡ºæ ‘ä¸­èŠ‚ç‚¹çš„å€¼\nå‡è®¾æˆ‘ä»¬ç°åœ¨åˆ›å»ºäº†ä¸€ä¸ªè¿™æ ·çš„ç®€å•äºŒå‰æ ‘ğŸ‘‡ä½ èƒ½æƒ³å‡ºæ¥å‰åºéå†çš„æ‰“å°é¡ºåºåº”è¯¥æ˜¯å’‹æ ·çš„å—ï¼Ÿ\n\nç­”æ¡ˆæ˜¯1 2 3 4 5 6\nçœ‹åˆ°è¿™é‡Œï¼Œä½ è‚¯å®šä¸€è„¸æ‡µé€¼ï¼šå•Šï¼Œå’‹å‡ºæ¥çš„ï¼Ÿ\n\nä¸ç€æ€¥ï¼Œæˆ‘ä»¬ç°ç»™æ‰“å°å‡ºæ¥çš„å†…å®¹åŠ ä¸Šå®ƒä»¬çš„æœ«ç«¯å­æ ‘NULLï¼Œæ‰€ä»¥å‰åºéå†çš„ç»“æœæ˜¯ï¼š\n1 2 3 NULL NULL NULL 4 5 NULL NULL 6 NULL NULL\n\nä¸å–å…³å­å•¦ï¼Œç›´æ¥ä¸‹æ‰‹åˆ†æè¿™ä¸ªéå†ç»“æœæ˜¯æ€ä¹ˆå‡ºæ¥çš„ï¼\nå‰é¢æåˆ°äº†ï¼Œå‰åºéå†çš„é¡ºåºæ˜¯ï¼šæ ¹èŠ‚ç‚¹-å·¦å­æ ‘-å³å­æ ‘\n\nä¸‹å›¾èƒ½è®©ä½ æ›´ç›´è§‚åœ°çœ‹å‡ºæ¥è¿™ä¸‰ç§éå†æ–¹å¼çš„ä¸åŒ\n\nå…¶ä¸­å‰åºéå†è½¬æ¢ä¸ºä»£ç è¯­è¨€å°±æ˜¯ä¸‹é¢è¿™æ ·\n// äºŒå‰æ ‘å‰åºéå† void BTreePrevOrder(BTNode* root)&#123;\tif (root == NULL)\t&#123;//ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼ŒæŠŠç©ºèŠ‚ç‚¹ä¹Ÿæ‰“å°å‡ºæ¥\t\tprintf(&quot;NULL &quot;);\t\treturn ;\t&#125;\tprintf(&quot;%d &quot;, root-&gt;data);\tBTreePrevOrder(root-&gt;left);\tBTreePrevOrder(root-&gt;right);&#125;\n\nåœ¨è¿™ä¹‹ä¸­ï¼Œé‡åˆ°æ ¹èŠ‚ç‚¹æ˜¯NULLçš„æƒ…å†µï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯æƒ…å†µï¼Œé€’å½’åœæ­¢\nè¿™æ ·è¯´æ¥ææ€•è¿˜æ˜¯ä¸æ¸…æ¥šï¼Œè¦å½»åº•å¼„æ¸…ï¼Œæˆ‘ä»¬å¿…é¡»è¦é€šè¿‡ç”»é€’å½’ç¤ºæ„å›¾æ¥è§£å†³\n\nå›¾ä¸­æŸä¸ªå•è¯æ‰“é”™äº†ï¼Œç”»åˆ°ä¸€åŠæ‰å‘ç°â€¦â€¦è¯·å¿½ç•¥å®ƒï¼ğŸ˜­\n\nå¦‚æœä½ èƒ½ç†è§£ä¸Šå›¾ä¸­å‰åºéå†çš„æ€è·¯ï¼Œé‚£ä¸­åºéå†å’Œååºéå†çš„æ“ä½œå°±éå¸¸ç®€å•äº†ï¼çŒœçŒœæ€ä¹ˆä¿®æ”¹å‰åºçš„ä»£ç å‘¢ï¼Ÿ\næ²¡é”™ï¼Œåªéœ€è¦æ›´æ”¹ä¸€ä¸‹printfçš„ä½ç½®å°±å¯ä»¥äº†ï¼\n// äºŒå‰æ ‘ä¸­åºéå†void BTreeInOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\tprintf(&quot;NULL &quot;);\t\treturn;\t&#125;\t\tBTreeInOrder(root-&gt;left);\tprintf(&quot;%d &quot;, root-&gt;data);\tBTreeInOrder(root-&gt;right);&#125;// äºŒå‰æ ‘ååºéå†void BTreePostOrder(BTNode* root)&#123;\tif (root == NULL)&#123;\t\tprintf(&quot;NULL &quot;);\t\treturn;\t&#125;\tBTreePostOrder(root-&gt;left);\tBTreePostOrder(root-&gt;right);\tprintf(&quot;%d &quot;, root-&gt;data);&#125;\n\næœ€åæ‰“å°å‡ºæ¥çš„ç»“æœåˆ†åˆ«æ˜¯è¿™æ ·çš„ï¼Œå’Œä¸Šé¢çš„ç¤ºæ„å›¾å®Œå…¨å¯¹åº”ï¼å›åˆ°ç¤ºæ„å›¾\n\n\n3.1é€šè¿‡é€’å½’éå†è®¡ç®—èŠ‚ç‚¹ä¸ªæ•°ä¸Šé¢çš„é€’å½’ï¼Œæˆ‘ä»¬æ‰“å°å‡ºäº†å„ä¸ªèŠ‚ç‚¹çš„å€¼\nåªéœ€è¦å¯¹å…¶ä¸­ä¸€ä¸ªé€’å½’çš„ä»£ç è¿›è¡Œå°ä¿®æ”¹ï¼Œå°†printfæ”¹æˆè®¡æ•°++ï¼Œå°±èƒ½æŠŠå®ƒä»éå†å˜æˆè®¡ç®—äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿™é‡Œæˆ‘é€‰æ‹©æŒ‡é’ˆå˜é‡çš„æ–¹å¼è®©ä¸»å‡½æ•°ä¸­èƒ½è·å–è®¡æ•°çš„ç»“æœ\n// äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°void BTreeSize(BTNode* root,int* pcount)&#123;\tif (root == NULL)\t\treturn ;\t\t(*pcount)++;//æŒ‡é’ˆå˜é‡ï¼Œmainå‡½æ•°ä¸­å¯è°ƒç”¨\tBTreeSize(root-&gt;left,pcount);\tBTreeSize(root-&gt;right,pcount);&#125;\n\n\nä½ å¯ä»¥ä½¿ç”¨å…¨å±€é™æ€å˜é‡æ¥è¿›è¡Œè®¡æ•°ï¼Œä½†æ˜¯é‚£æ ·çš„è®¡æ•°ä¼šåœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å åŠ ï¼Œéœ€è¦åœ¨è°ƒç”¨åç½®0ï¼Œéå¸¸ä¸æ–¹ä¾¿\n\n\nå½“ç„¶ï¼Œæˆ‘è´´å‡ºæ¥çš„è¿™ä¸ªæ–¹æ³•ä¹Ÿä¸æ˜¯æœ€ä¼˜çš„ï¼Œå› ä¸ºå®ƒéœ€è¦åˆ›å»ºä¸€ä¸ªé¢å¤–çš„å˜é‡countä½œä¸ºå‚æ•°è°ƒç”¨ï¼Œè€Œä¸èƒ½ç›´æ¥returnèŠ‚ç‚¹çš„æ•°é‡\n\næ‰€ä»¥å°±æœ‰äº†ä¸‹é¢è¿™ä¸ªä½¿ç”¨ä¸‰ç›®æ“ä½œç¬¦? :æ¥è¿›è¡Œåˆ†æ²»é€’å½’ï¼Œè®¡ç®—èŠ‚ç‚¹ä¸ªæ•°\n\nå…¶ä¸­æ ¹èŠ‚ç‚¹ä¸ºç©ºæ˜¯æœ«ç«¯æƒ…å†µï¼Œè¿”å›0\nå…¶ä»–æƒ…å†µè¿”å›å·¦å­æ ‘å’Œå³å­æ ‘çš„èŠ‚ç‚¹å¤§å°+1ï¼ˆè¯¥èŠ‚ç‚¹è‡ªå·±ï¼‰\n\n//è¿›é˜¶æ–¹æ³•int BTreeSize(BTNode* root) &#123;\treturn root == NULL ? 0 :\t\tBTreeSize(root-&gt;left)\t\t+ BTreeSize(root-&gt;right) + 1;&#125;\n\n3.2 ç”¨åç»­éå†çš„æ€æƒ³é”€æ¯æ ‘å½“æˆ‘ä»¬ä¸éœ€è¦ç”¨äºŒå‰æ ‘åï¼Œéœ€è¦å°†å…¶è°ƒç”¨çš„å†…å­˜é‡Šæ”¾\né—®é¢˜å°±æ¥äº†ï¼Œå¦‚æœä½ é‡Šæ”¾äº†æ ¹èŠ‚ç‚¹ï¼Œé‚£è¦å’‹æ‰¾åˆ°å®ƒçš„å·¦å³å­æ ‘å‘¢ï¼Ÿ\næ‰€ä»¥æˆ‘ä»¬åœ¨é‡Šæ”¾çš„æ—¶å€™ï¼Œè¦ç”¨ååºéå†çš„é¡ºåºæ¥è¿›è¡Œé‡Šæ”¾ï¼Œå³å…ˆé”€æ¯å·¦å³å­æ ‘ï¼Œå†å‘ä¸Šé”€æ¯ã€‚è¿™æ ·å°±èƒ½é¿å…æ‰¾ä¸åˆ°å­æ ‘çš„é—®é¢˜\n// äºŒå‰æ ‘é”€æ¯void BTreeDestory(BTNode** root)&#123;\tif (*root == NULL)\t\treturn;\t//é€šè¿‡åç»­éå†çš„æ€æƒ³æ¥æ‘§æ¯æ ‘\tBTreeDestory(&amp;(*root)-&gt;left);\tBTreeDestory(&amp;(*root)-&gt;right);\tfree(*root);\t*root = NULL;//ä½¿ç”¨äºŒçº§æŒ‡é’ˆå¯ä»¥ç›´æ¥åœ¨å‡½æ•°ä¸­ç½®ç©ºæ ¹èŠ‚ç‚¹çš„æŒ‡é’ˆ&#125;\n\n3.3å‰&#x2F;ä¸­&#x2F;ååºéå†OJé¢˜\nä¸‰é“Leetcode OJé¢˜\n\n144. äºŒå‰æ ‘çš„å‰åºéå†\n145. äºŒå‰æ ‘çš„ååºéå†\n94. äºŒå‰æ ‘çš„ä¸­åºéå†\n\n\nè¿™é‡Œåªå¯¹å‰åºéå†çš„é¢˜ç›®åšå‡ºè®²è§£ï¼Œå› ä¸ºåé¢ä¸¤ä¸ªçš„æ€è·¯å®Œå…¨ä¸€è‡´ï¼Œåªéœ€ç¨å¾®æ›´æ”¹ä»£ç \n\né¢˜ç›®ç»™å‡ºä¸€ä¸ªæ ‘ï¼Œéœ€è¦ä½ å°†å®ƒä»¥å‰åºéå†çš„é¡ºåºï¼Œå°†å„ä¸ªèŠ‚ç‚¹çš„å€¼ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­å¹¶è¿”å›å®ƒ\n\nè¿™é‡Œçš„è¾“å…¥ç”¨ä¾‹æ˜¯â€œä¼ªä»£ç â€ï¼Œ[1,null,2,3]ä»£è¡¨1çš„å·¦å­æ ‘æ˜¯NULLï¼Œå³å­æ ‘æ˜¯2ï¼›2çš„å·¦å­æ ‘æ˜¯3ï¼Œå³å­æ ‘æ˜¯NULL\n\næ—¢ç„¶éœ€è¦ç”¨æ•°ç»„æ¥å‚¨å­˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸ªäºŒå‰æ ‘ä¸€å…±æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æ‰èƒ½æ–¹ä¾¿æˆ‘ä»¬å¼€è¾Ÿæ•°ç»„\n\næ³¨æ„ï¼šè¿™ç§æ¥å£å‹é¢˜ç›®ï¼Œæ•°ç»„éƒ½å¿…é¡»æ˜¯åŠ¨æ€å†…å­˜å‡½æ•°mallocå¼€è¾Ÿçš„\n\n\nç„¶åæŠŠå‰åºéå†ä¸­çš„printfæ”¹æˆå°†å€¼æ”¾å…¥arræ•°ç»„ä¸­å³å¯ï¼\n// äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°void BTreeSize(struct TreeNode* root,int* pcount)&#123;\tif (root == NULL)\t\treturn ;\t\t(*pcount)++;\tBTreeSize(root-&gt;left,pcount);\tBTreeSize(root-&gt;right,pcount);&#125;// å‰åºéå†ä»£ç void BTreePrevOrder(struct TreeNode* root,int*arr,int* i)&#123;\tif (root == NULL)&#123;\t\treturn ;\t&#125;\t    arr[(*i)++]=root-&gt;val;    //å› ä¸ºåœ¨é€’å½’è°ƒç”¨ä¸­éœ€è¦å¤šæ¬¡è°ƒç”¨ä¸åŒçš„iï¼Œæ‰€ä»¥éœ€è¦å–åœ°å€\tBTreePrevOrder(root-&gt;left,arr,i);\tBTreePrevOrder(root-&gt;right,arr,i);&#125;int* preorderTraversal(struct TreeNode* root, int* returnSize)&#123;    int count=0;    BTreeSize(root,&amp;count);//è®¡ç®—æ ‘èŠ‚ç‚¹ä¸ªæ•°    int* arr=(int*)malloc(sizeof(int)*count);//å¼€è¾Ÿæ•°ç»„    int i=0;//ä¸‹æ ‡    BTreePrevOrder(root,arr,&amp;i);    *returnSize=count;    return arr;&#125;\n\n\n\n4.è®¡ç®—èŠ‚ç‚¹ä¸ªæ•°åœ¨3.1ä¸­å·²ç»è®²è¿°äº†è®¡ç®—äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°çš„æ–¹æ³•ï¼Œä¸‹é¢æ˜¯æ›´ç»†è‡´çš„èŠ‚ç‚¹ä¸ªæ•°è®¡ç®—\n4.1å¶å­èŠ‚ç‚¹ä¸ªæ•°ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨è¿™é¢—äºŒå‰æ ‘ä¸­ï¼Œåªæœ‰3ã€5å’Œ6æ˜¯å¶å­èŠ‚ç‚¹\n\næƒ³è¦åˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå…¶å®éå¸¸ç®€å•ï¼šåªè¦å®ƒçš„å·¦å³å­æ ‘éƒ½æ˜¯ç©ºï¼Œå°±æ˜¯å¶å­èŠ‚ç‚¹äº†ã€‚\n\nä»¥æ­¤ä½œä¸ºåˆ†æ²»çš„æœ«ç«¯æ¡ä»¶ï¼Œåªè¦æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œå°±è¿”å›1\nå¦‚æœå·²ç»éå†åˆ°ç©ºèŠ‚ç‚¹äº†ï¼Œè¿”å›0\nå…¶ä»–æƒ…å†µï¼Œè¿”å›å·¦å­æ ‘å’Œå³å­æ ‘çš„å¶å­èŠ‚ç‚¹ä¸ªæ•°ä¹‹å’Œ\n\n// äºŒå‰æ ‘å¶å­èŠ‚ç‚¹ä¸ªæ•°int BTreeLeafSize(BTNode* root)&#123;\tif (root == NULL)\t\treturn 0;\tif (root-&gt;left == NULL &amp;&amp; root-&gt;right == NULL)\t\treturn 1;\treturn BTreeLeafSize(root-&gt;left) + BTreeLeafSize(root-&gt;right);&#125;\n\n4.2äºŒå‰æ ‘ç¬¬kå±‚èŠ‚ç‚¹ä¸ªæ•°å‡è®¾æ ¹èŠ‚ç‚¹æ˜¯ç¬¬1å±‚ï¼Œè¦æƒ³çŸ¥é“ç¬¬kå±‚ä¸€å…±æœ‰å‡ ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦æ€ä¹ˆè®¾è®¡å‡½æ•°å‘¢ï¼Ÿ\n\nå…ˆæ¥è¿™ä¹ˆæƒ³ï¼š3æ‰€åœ¨å±‚æ•°å¯¹äºæ ¹æ¥è¯´æ˜¯ç¬¬ä¸‰å±‚ï¼Œä½†æ˜¯å¯¹äº2æ¥è¯´æ˜¯ç¬¬äºŒå±‚ï¼Œå¯¹äº3è‡ªå·±æ¥è¯´æ˜¯ç¬¬1å±‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è®©ç¬¬kå±‚å¾€ä¸‹-1æ¥è¿›è¡Œé€’å½’å‘¢ï¼Ÿ\n\n// äºŒå‰æ ‘ç¬¬kå±‚èŠ‚ç‚¹ä¸ªæ•°int BTreeLevelKSize(BTNode* root, int k)&#123;\tassert(k &gt;= 1);//ä¿è¯k&gt;=1\tif (root == NULL)\t\treturn 0;\tif (k == 1)\t\treturn 1;\treturn BTreeLevelKSize(root-&gt;left,k - 1)        + BTreeLevelKSize(root-&gt;right,k-1);&#125;\n\n\n\n4.3äºŒå‰æ ‘çš„æ·±åº¦åœ¨ä¹‹å‰æ ‘çš„æ¦‚å¿µå­¦ä¹ ä¸­ï¼Œè®²è§£è¿‡æ ‘çš„æ·±åº¦ï¼ˆå³æ ‘ä¸€å…±æœ‰å‡ å±‚ï¼‰\næ·±åº¦å’Œä¹‹å‰ä¸¾ä¾‹çš„æ ¡é•¿ç»Ÿè®¡èº«é«˜å¾ˆç›¸ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå·¦å³å­æ ‘ä¸­è¾ƒæ·±çš„é‚£ä¸€ä¸ªå¹¶è¿›è¡Œè¿”å›ã€‚æœ«ç«¯çš„æ¡ä»¶ï¼Œå°±æ˜¯èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™ï¼Œreturn 0ç»ˆæ­¢é€’å½’ \n// äºŒå‰æ ‘æ·±åº¦ï¼Œå³ä¸€å…±æœ‰å‡ å±‚int BTreeDepth(BTNode* root)&#123;\tif (root == NULL)\t\treturn 0;\tint left = BTreeDepth(root-&gt;left);\tint right = BTreeDepth(root-&gt;right);\treturn left &gt; right ? left + 1 : right + 1;&#125;\n\næ³¨æ„ï¼šè¿™é‡Œleft+1å’Œright+1æ˜¯ä¸ºäº†è®¡ç®—ä¸ŠèŠ‚ç‚¹è‡ªå·±\næ±‚äºŒå‰æ ‘æ·±åº¦OJé¢˜leetcodeä¸Šæœ‰ä¸€é“ojé¢˜å°±æ˜¯æ±‚äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼Œä»£ç å¤åˆ¶ä¸Šï¼Œæ”¹ä¸ªåï¼Œæå®šï¼\n\né¢˜ç›®é“¾æ¥ï¼š104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n\n\n\n5.æŸ¥æ‰¾æ ‘ä¸­å€¼ä¸ºxçš„èŠ‚ç‚¹åœ¨äºŒå‰æ ‘ä¸­æŸ¥æ‰¾ä¸€ä¸ªå€¼ï¼ŒåŸºæœ¬æ€æƒ³å°±æ˜¯æŠŠå®ƒéå†ä¸€éï¼Œåˆ¤æ–­æ ¹èŠ‚ç‚¹ä»¥åŠå·¦å³å­æ ‘ä¸­æ˜¯å¦æœ‰xå€¼çš„èŠ‚ç‚¹ã€‚\nå…·ä½“çš„è§£æï¼Œå†™é“ä¸‹é¢çš„ä»£ç æ³¨é‡Šé‡Œå•¦ï¼\n// äºŒå‰æ ‘æŸ¥æ‰¾å€¼ä¸ºxçš„èŠ‚ç‚¹BTNode* BTreeFind(BTNode* root, BTDataType x)&#123;\tif (root == NULL)\t\treturn NULL;//èŠ‚ç‚¹ä¸ºç©ºè¿”å›ç©º\tif (root-&gt;data == x)\t\treturn root;//èŠ‚ç‚¹è‡ªå·±å°±æ˜¯xï¼Œè¿”å›èŠ‚ç‚¹è‡ªå·±çš„åœ°å€\tBTNode* ret1 = BTreeFind(root-&gt;left, x);\tif (ret1 != NULL)//å¦‚æœå·¦è¾¹æ‰¾åˆ°äº†ï¼Œè¿”å›å·¦èŠ‚ç‚¹çš„åœ°å€\t\treturn ret1;\tBTNode* ret2 = BTreeFind(root-&gt;right, x);\tif (ret2 != NULL)//å¦‚æœå³è¾¹æ‰¾åˆ°äº†ï¼Œè¿”å›å³èŠ‚ç‚¹çš„åœ°å€\t\treturn ret2;\treturn NULL;//ä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°ï¼Œå®ƒè‡ªå·±ä¹Ÿä¸æ˜¯ï¼Œè¿”å›ç©º&#125;\n\n6.å±‚åºéå†å¦‚åŒå…¶åï¼Œå±‚åºéå†å°±æ˜¯ä¸€å±‚ä¸€å±‚åœ°éå†\n\næ¯”å¦‚ä¸Šé¢è¿™æ£µæ ‘ï¼Œå±‚åºéå†çš„ç»“æœå¦‚ä¸‹\n1 2 4 3 NULL 5 6\n\nè¦æƒ³å®ç°å±‚åºéå†ï¼Œæˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¹‹å‰å­¦ä¹ çš„æ ˆå’Œé˜Ÿåˆ—çŸ¥è¯†é‡Œçš„é˜Ÿåˆ—ğŸ‘‰ä¼ é€é—¨\nåœ¨VSé¡¹ç›®é‡Œé¢ï¼Œå¯¼å…¥é¢„å…ˆå†™å¥½çš„é˜Ÿåˆ—çš„å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶ï¼Œå†å¼•ç”¨å®ƒå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œå°±èƒ½ä½“ç°å‡ºä¹‹å‰é¢„å…ˆtypedefç±»å‹çš„ä½œç”¨äº†ï¼šåªéœ€è¦æ›´æ”¹æœ€å…ˆçš„æ•°æ®ç±»å‹ï¼Œå°±å¯ä»¥æå®šåé¢çš„ä¸€åˆ‡ï¼\n\nè€Œå¼•ç”¨å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ ˆçš„ä»£ç ä¸­ä½¿ç”¨äºŒå‰æ ‘çš„å®šä¹‰ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¼•ç”¨äºŒå‰æ ‘çš„å¤´æ–‡ä»¶ï¼Œå†å¼•ç”¨é˜Ÿåˆ—çš„å¤´æ–‡ä»¶\n\næå®šè¿™ä¸ªåï¼Œæˆ‘ä»¬å†æ¥è®²è¿°ä¸€ä¸‹å±‚åºéå†çš„æ€è·¯\n\nå…ˆæ’å…¥æ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨æ ¹èŠ‚ç‚¹å‡ºé˜Ÿåˆ—çš„åŒæ—¶ï¼Œæ’å…¥å®ƒçš„å·¦å³å­æ ‘çš„èŠ‚ç‚¹\nå½“é˜Ÿåˆ—ä¸­çš„å€¼éƒ½ä¸ºNULLæ—¶ï¼Œä»£è¡¨å±‚åºéå†å®Œæˆ\n\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å…¥é˜Ÿåˆ—çš„ä¸æ˜¯èŠ‚ç‚¹çš„å€¼ï¼Œå› ä¸ºé‚£æ ·æ— æ³•æ‰¾åˆ°èŠ‚ç‚¹çš„å·¦å³å­æ ‘ã€‚å…¥é˜Ÿåˆ—çš„æ˜¯èŠ‚ç‚¹çš„åœ°å€ï¼\n// å±‚åºéå†void BTreeLevelOrder(BTNode* root)&#123;\tQueue q;\tQueueInit(&amp;q);\tif (root != NULL)&#123;//æ ¹èŠ‚ç‚¹éç©ºï¼Œå¼€å§‹å…¥é˜Ÿåˆ—\t\tQueuePush(&amp;q, root);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tprintf(&quot;%d &quot;, head-&gt;data);\t\tif (head-&gt;left != NULL)\t\t&#123;\t\t\tQueuePush(&amp;q, head-&gt;left);\t\t&#125;\t\tif (head-&gt;right != NULL)\t\t&#123;\t\t\tQueuePush(&amp;q, head-&gt;right);\t\t&#125;\t\t//å±‚åºéå†ä¸éœ€è¦é€’å½’ï¼Œå¯ä»¥ç”¨å¾ªç¯è§£å†³é—®é¢˜\t&#125;\tprintf(&quot;\\n&quot;);\tQueueDestory(&amp;q);//é˜²æ­¢å†…å­˜æ³„æ¼\treturn;&#125;\n\néå†çš„ç»“æœå¦‚ä¸‹\n\n6.1åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘å­¦ä¹ äº†å±‚åºéå†åï¼Œå°±å¯ä»¥æ¥åˆ¤æ–­ä¸€ä¸ªäºŒå‰æ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘äº†ï¼\nå®Œå…¨äºŒå‰æ ‘ï¼šå‰k-1å±‚ä¸ºæ»¡äºŒå‰æ ‘ï¼Œæœ€åä¸€å±‚ä¸æ»¡ï¼Œä½†æ˜¯ä»å·¦åˆ°å³åˆ†å¸ƒ\n\nå…·ä½“çš„æ€è·¯æ˜¯\n\nå½“é˜Ÿåˆ—ä¸­çš„é˜Ÿå¤´ä¸ºNULLæ—¶å¼€å§‹éå†ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­éƒ½æ˜¯NULLï¼Œä»£è¡¨æ˜¯æ»¡äºŒå‰æ ‘\nå¦‚æœæœ‰éç©ºèŠ‚ç‚¹ï¼Œå°±ä¸æ˜¯æ»¡äºŒå‰æ ‘\n\n// åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘bool BTreeComplete(BTNode* root)&#123;\tQueue q;\tQueueInit(&amp;q);\tif (root != NULL) &#123;\t\tQueuePush(&amp;q, root);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tif (head == NULL)&#123;\t\t\tbreak;//é‡åˆ°é˜Ÿåˆ—ä¸­ç©ºèŠ‚ç‚¹ï¼Œé€€å‡ºå¾ªç¯\t\t&#125;\t\tQueuePush(&amp;q, head-&gt;left);\t\tQueuePush(&amp;q, head-&gt;right);\t&#125;\twhile (!QueueEmpty(&amp;q))\t&#123;\t\tBTNode* head = QueueFront(&amp;q);//å–é˜Ÿå¤´æ•°æ®\t\tQueuePop(&amp;q);//å‡ºé˜Ÿåˆ—\t\tif (head != NULL)\t\t&#123;\t\t\t//printf(&quot;ä¸æ˜¯å®Œå…¨äºŒå‰æ ‘\\n&quot;);\t\t\treturn false;\t\t&#125;\t&#125;\tQueueDestory(&amp;q);//é˜²æ­¢å†…å­˜æ³„æ¼\treturn true;&#125;\n\nç»“è¯­é“¾å¼äºŒå‰æ ‘çš„å†…å®¹åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¦‚æœåšå®¢é‡Œé¢æœ‰è®²çš„ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\nä¸‹ç¯‡åšå®¢å°†è®²è§£ä¸€äº›æœ‰å…³äºŒå‰æ ‘çš„OJé¢˜å’Œæ¦‚å¿µé€‰æ‹©é¢˜ï¼æˆ‘ä»¬ä¸è§ä¸æ•£å“¦~\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ‘","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘çŒœæ•°å­—æ¸¸æˆ","url":"/posts/2820557607/","content":"å‡½æ•°æ˜¯ä»€ä¹ˆ?æ•°å­¦ä¸­æˆ‘ä»¬å¸¸è§åˆ°å‡½æ•°çš„æ¦‚å¿µï¼Œä½†æ˜¯ä½ äº†è§£Cè¯­è¨€ä¸­çš„å‡½æ•°å—ï¼Ÿç»´åŸºç™¾ç§‘ä¸­å¯¹å‡½æ•°æ˜¯å¦‚ä¸‹å®šä¹‰çš„ã€‚\n\nå¯ä»¥è¯´å‡½æ•°functionæ˜¯è®¡ç®—æœºå˜æˆè¯­è¨€ä¸­éå¸¸é‡è¦çš„ä¸€ç¯ã€‚å¦‚æœæˆ‘ä»¬æƒ³å­¦å¥½cè¯­è¨€ï¼Œå°±å¿…é¡»å­¦ä¼šå¦‚ä½•ä½¿ç”¨åº“å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°ã€‚\nå›æº¯åœ¨æˆ‘çš„ã€çŒœæ•°å­—æ¸¸æˆã€‘åšå®¢ä¸­ï¼Œå·²ç»æœ‰è®²è¿°è¿‡å¦‚ä½•æŸ¥è¯¢åº“å‡½æ•°çš„å®šä¹‰ã€‚åœ¨ä¸Šä¸€ç¯‡ã€ä¼ å€¼è°ƒç”¨å’Œä¼ å€è°ƒç”¨ã€‘ä¸­ä¹Ÿæœ‰ä¸è‡ªå®šä¹‰å‡½æ•°ç›¸å…³çš„å†…å®¹ã€‚æœ¬ç¯‡åšå®¢å°†æ›´ç»†è‡´åœ°å‘åˆå­¦cçš„ä¼™ä¼´ä»¬åˆ†äº«å¦‚ä½•ä½¿ç”¨åº“å‡½æ•°ã€‚\nåº“å‡½æ•°åº“å‡½æ•°ï¼Œæ˜¯cè¯­è¨€åº“ä¸­å·²ç»åŒ…å«äº†çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°çš„ä½œç”¨ä¸ä¸€ï¼Œä½†ä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹â€”â€”æ‰€æœ‰äººéƒ½ç”¨çš„ä¸Šã€‚\n\nå½“ä½ å†™å‡ºä¸€ä¸²ä»£ç ï¼Œè‚¯å®šä¼šæƒ³çŸ¥é“å®ƒè¿è¡Œçš„ç»“æœï¼Œè¿™æ—¶å€™è¦ç”¨åˆ° printf æ¥æ‰“å°å¤§å®¶ç¬¬ä¸€ä¸ªå­¦ä¹ çš„hello worldä»£ç ä¸­å°±ç”¨åˆ°äº† printfåº“å‡½æ•°\nåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦é¢‘ç¹åœ°åšå­—ç¬¦ä¸²çš„æ‹·è´ strcpy\n\næ—¢ç„¶æ‰€æœ‰äººéƒ½ç”¨çš„ä¸Šï¼Œé‚£ä¸ºä»€ä¹ˆä¸è®©è¿™äº›å‡½æ•°å˜æˆç¼–ç¨‹è¯­è¨€ä¸­é¢„è®¾çš„åŠŸèƒ½ï¼Œè®©åæ¥è€…æ›´æ–¹ä¾¿çš„ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å‘¢ï¼Ÿè¿™æ ·æ•ˆç‡å€å¢ï¼Œå¯ç§»æ¤æ€§å’Œæ˜“ç”¨æ€§ä¹Ÿå¤§å¤§å¢å¼ºï¼Œä½•ä¹è€Œä¸ä¸ºã€‚åº“å‡½æ•°ç”±æ­¤è¯ç”Ÿ\nCè¯­è¨€å¸¸ç”¨çš„åº“å‡½æ•°\nIOå‡½æ•°\nå­—ç¬¦ä¸²æ“ä½œå‡½æ•°\nå­—ç¬¦æ“ä½œå‡½æ•°\nå†…å­˜æ“ä½œå‡½æ•°\næ—¶é—´&#x2F;æ—¥æœŸå‡½æ•°\næ•°å­¦å‡½æ•°\nå…¶ä»–åº“å‡½æ•°\nåœ¨ã€çŒœæ•°å­—æ¸¸æˆã€‘ä¸­ä½¿ç”¨åˆ°çš„timeå‡½æ•°æ˜¯æ—¶é—´å‡½æ•°çš„ä¸€ç§\n\n\n\næ¥ä¸‹æ¥æˆ‘ç”¨ä¸¤ä¸ªå‡½æ•°çš„å…·ä½“æ¡ˆä¾‹ï¼Œå’Œå¤§å®¶åˆ†äº«å¦‚ä½•æŸ¥æ‰¾åº“å‡½æ•°å®šä¹‰ä»¥åŠå¦‚ä½•å°è¯•ä½¿ç”¨åº“å‡½æ•°åˆ†åˆ«æ˜¯ strcpyå‡½æ•° å’Œ memsetå‡½æ•°\næŸ¥è¯¢åº“å‡½æ•°å®šä¹‰åœ¨è¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸¤ä¸ªè¶…æ£’çš„ç½‘ç«™ï¼\n\ncppreference ä¸­æ–‡\ncplusplus è‹±æ–‡\n\nå¦‚æœè¦æŸ¥è¯¢åº“å‡½æ•°å®šä¹‰ï¼Œcplusplusæ˜¯æˆ‘ä»¬çš„ä¸äºŒä¹‹é€‰ã€‚å®ƒè™½ç„¶åªæœ‰è‹±æ–‡ï¼Œä½†æ˜¯è¿™éš¾ä¸å€’æˆ‘ä»¬ä»£ç äººï¼Œå®åœ¨ä¸è¡Œå°±ç½‘é¡µç¿»è¯‘ä¸€ä¸‹å˜›ï¼\nå¤¹å¸¦ç§è´§æ—¶é—´å¦‚æœä½ ç”¨çš„æ˜¯chromeæˆ–è€…å¾®è½¯æœ€æ–°çš„edgeæµè§ˆå™¨ï¼Œå¯ä»¥å°è¯•å®‰è£…ä¾§è¾¹ç¿»è¯‘è¿™ä¸ªæ’ä»¶éå¸¸å¥½ç”¨ï¼Œå¼ºåŠ›æ¨èï¼\n\nmemsetå‡½æ•°æ‰“å¼€cplusplusï¼Œè¾“å…¥æˆ‘ä»¬éœ€è¦æŸ¥è¯¢çš„å‡½æ•°\n\nçœ‹ä¸æ‡‚ï¼Ÿæ²¡å…³ç³»ã€‚åªè¦äº†è§£ä¸‹é¢å‡ ä¸ªç®€å•çš„å•è¯ï¼Œæˆ‘ä»¬å°±èƒ½å°è¯•å»è¯»åº“å‡½æ•°çš„å®šä¹‰äº†\n\nfunction â†’å‡½æ•°\nParameters â†’å‚æ•°\nReturn Value â†’è¿”å›å€¼\nExample â†’ä¾‹å­\n\nåœ¨é¡µé¢çš„å·¦è¾¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡½æ•°çš„å¤´æ–‡ä»¶\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ˜¯c++è¯­è¨€é‡Œçš„å¤´æ–‡ä»¶ï¼Œè€Œå·¦è¾¹çš„&lt;string.h&gt;æ‰æ˜¯æˆ‘ä»¬cè¯­è¨€è¦ç”¨çš„å¤´æ–‡ä»¶\n\ncplusplusçœŸæ­£å¼ºå¤§çš„åœ°æ–¹ï¼Œåœ¨äºå®ƒå¯ä»¥è®©ä½ ç›´æ¥åœ¨ç½‘é¡µç«¯ç¼–è¾‘ç»™å‡ºçš„ä»£ç ä¾‹å­\n\nmemsetå…¶å®æ˜¯ç”±ä¸¤ä¸ªå•è¯ç»„æˆçš„ï¼Œmemeoryå†…å­˜ + setè®¾ç½®\n\nè¯»å‡½æ•°å®šä¹‰çš„æ–‡æ¡£çš„æ—¶å€™ï¼Œæœ€å¥½æ˜¯é€å­—è§£è¯»ï¼Œä¸è¦æ•´å¥ç¿»è¯‘ã€‚\n\næ³¨æ„æ¯ä¸ªå‡½æ•°ä¸‹é¢ç»¿è‰²çš„è¿™ä¸€è¡Œä»¥memsetä¸ºä¾‹ï¼Œvoid*è¡¨ç¤ºå®ƒæ˜¯æŒ‡é’ˆå˜é‡ï¼Œintè¡¨ç¤ºæ•´å‹ï¼Œsize_tè¡¨ç¤ºå¤§å°\n\nFill block of memory å¡«å……å†…å­˜å—\nSets the first num bytes è®¾ç½®å‰numä¸ªå­—èŠ‚\nSets the first num bytes of the block of memory è®¾ç½®å†…å­˜å—ä¸­çš„å‰numä¸ªå­—èŠ‚\npointed by ptr ç”±ptræŒ‡å¼•çš„\nto the specified value è®¾ç½®æˆç‰¹æ®Šçš„value\n\n\nè¿èµ·æ¥å°±æ˜¯ï¼š\n\næŠŠç”±ptræŒ‡å¼•çš„å†…å­˜å—çš„å‰numä¸ªå­—èŠ‚è®¾ç½®æˆç‰¹æ®Šçš„value\n\nè®©æˆ‘ä»¬ç»§ç»­è§£è¯»\n\n\nptr è¦è¢«å¡«å……çš„å†…å­˜å—çš„pointeræŒ‡ç¤ºå™¨\nvalue è¦è¢«è®¾å®šçš„ç‰¹æ®Šå€¼ï¼Œå®ƒæ˜¯intæ•´å‹\nnum æœ‰å¤šå°‘å­—èŠ‚çš„å†…å­˜è¦è¢«è®¾å®šæˆvalue\nsize_t æ— ç¬¦å·æ•´å‹\n\nè¯»åˆ°è¿™é‡Œï¼Œå…³äºmemsetçš„å®šä¹‰æˆ‘ä»¬å°±èƒ½å¤§æ¦‚äº†è§£äº†æ¥ä¸‹æ¥å°±è¦è¿›å…¥å®è·µäº†\n#include&lt;string.h&gt;//memsetå¤´æ–‡ä»¶#include &lt;stdio.h&gt;//printfå¤´æ–‡ä»¶int main()&#123;\tchar arr[] = &quot;hello world&quot;;\tmemset(arr, &#x27;*&#x27;, 5);\tprintf(&quot;%s\\n&quot;, arr);\treturn 0;&#125;\nåœ¨ä½¿ç”¨memsetçš„æ—¶å€™ï¼Œæˆ‘ä»¬éµå¾ªå®šä¹‰ä¸­çš„ ( void * ptr, int value, size_t num )æ–¹å¼\nmemset(arr, &#x27;*&#x27;, 5);\n\narræ˜¯æˆ‘ä»¬è¦æ›´æ”¹çš„å†…å®¹\nâ€˜*â€™ æŒ‡æˆ‘ä»¬æŠŠarrä¸­çš„å†…å®¹æœ€ç»ˆæ”¹æˆ  â€˜*â€˜\n5 è¡¨ç¤ºæˆ‘ä»¬æƒ³æ›´æ”¹5ä¸ªå­—ç¬¦çš„å†…å®¹\nç”¨ printf æ‰“å°æœ€ç»ˆæ›´æ”¹åçš„ç»“æœ\n\nè¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º\n\nå¯ä»¥çœ‹åˆ°ï¼Œhello worldä¸­çš„å‰äº”ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯helloè¢«æ”¹æˆäº†*****å’Œmemsetçš„å®šä¹‰çš„æè¿°å®Œå…¨ä¸€è‡´ï¼\næ€æ ·ï¼Œæ˜¯å¦æœ‰ç‚¹å°æ¿€åŠ¨ï¼Ÿï¼ˆåæ­£æˆ‘å½“æ—¶å­¦åˆ°è¿™é‡Œçš„æ—¶å€™æ˜¯æœ‰çš„ï¼‰è®©æˆ‘ä»¬ç»§ç»­ï¼\nstrcpyå‡½æ•°æ¯”èµ·memsetå‡½æ•°ï¼Œstrcpyå‡½æ•°çš„ä½¿ç”¨é¢‘ç‡æ›´é«˜æˆ‘ä»¬åŒæ ·åœ¨cplusplusä¸­æŸ¥è¯¢strcpyå‡½æ•°çš„å®šä¹‰\næˆ‘ä»¬ä¾æ—§ç”¨ä¸Šè¿°è¯´çš„é€æ­¥è§£è¯»æ³•æ¥æŸ¥é˜…strcpyçš„å®šä¹‰\n\nCopies the C string æ‹·è´å†…å®¹\npointed by source ç”±sourceæŒ‡ç¤ºçš„çš„å†…å®¹\ninto the array pointed by destination åˆ°ç›®æ ‡æ•°ç»„ä¸­\n\n\næ‹·è´ç”±sourceæŒ‡ç¤ºçš„å†…å®¹åˆ°ç›®æ ‡æ•°ç»„ä¸­\n\nç…§æ ·å®è·µä¸€ä¸‹\n#include &lt;string.h&gt;//strcpyå‡½æ•°å¤´æ–‡ä»¶#include &lt;stdio.h&gt;int main()&#123;\tchar arr1[] = &quot;bit&quot;;\tchar arr2[20] = &quot;##########&quot;;\tstrcpy(arr2, arr1);\tprintf(&quot;%s\\n&quot;, arr2);\treturn 0; &#125;\n(arr2, arr1)  å…¶ä¸­arr2æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼Œarr1æ˜¯æˆ‘ä»¬è¦æ‹·è´çš„å†…å®¹\nstrcpy(arr2, arr1);\n\nè¿è¡Œç»“æœå¦‚ä¸‹\n\nå½“ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œè‚¯å®šä¼šæœ‰å’Œæˆ‘ä¸€æ ·çš„ç–‘æƒ‘ï¼šä¸ºä»€ä¹ˆæ‹·è´åˆ°2ä¸­çš„å†…å®¹åªæœ‰bitä¸‰ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯åç»­çš„#######æ²¡æœ‰æ‰“å°å‡ºæ¥å‘¢ï¼Ÿè¿™é‡Œå°±æ¶‰åŠåˆ°è½¬ä¹‰å­—ç¬¦é‡Œé¢çš„å†…å®¹äº†\nå­—ç¬¦ç»“æŸæ ‡å¿—\\0æ˜¯å­—ç¬¦ä¸²çš„ç»“æŸæ ‡å¿—ï¼Œé»˜è®¤è·Ÿåœ¨æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦åé¢\n\nâ€œbitâ€ å­—ç¬¦å®é™…ä¸º â€bit\\0â€œ\n\næ‰“å°çš„æ—¶å€™é‡åˆ°â€\\0â€œä¼šè‡ªåŠ¨åœæ­¢\nchar arr1[] = &quot;bit&quot;;char arr2[20] = &quot;##########&quot;;              // bit\\0é‡åˆ°\\0è®¤ä¸ºå­—ç¬¦ä¸²ç»“æŸï¼Œæ‰€ä»¥ä¸æ‰“å°åé¢çš„#\nä¸strcpyé•¿å¾—å¾ˆåƒçš„è¿˜æœ‰å¦å¤–ä¸€ä¸ªåº“å‡½æ•°strlen    strcpy - string copy - å­—ç¬¦ä¸²æ‹·è´    strlen - string length - å­—ç¬¦ä¸²é•¿åº¦æœ‰å…³\nå¯¹äºstrcpyå‡½æ•° å’Œ memsetå‡½æ•° çš„ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸäº†\nç»“è¯­åˆ°è¿™é‡Œï¼Œå¯¹äºæŸ¥è¯¢åº“å‡½æ•°ä»¥åŠä½¿ç”¨åº“å‡½æ•°çš„æ–¹æ³•åº”è¯¥å·²ç»å¾ˆæ¸…æ™°äº†ï¼ˆè‡ªæˆ‘æ„Ÿè§‰ ï¼‰å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©cè¯­è¨€æ–°äººï¼Œæœ‰æ‰€çº°æ¼åœ¨æ‰€éš¾å…ï¼Œæ¬¢è¿å„è·¯dalaoæ— æƒ…æŒ‡æ­£ï¼\nçº¯æ‰‹æ‰“ï¼Œ4kå¤šå­—ï¼Œä»Šå¤©æ•ˆç‡æ¯”æ˜¨å¤©é«˜ï¼Œ2å°æ—¶å°±æå®šäº†ç‚¹ä¸ªèµå†èµ°å§ï¼Œè°¢è°¢å¤§å®¶ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Cè¯­è¨€"],"tags":["Cè¯­è¨€","å‡½æ•°"]},{"title":"ã€å›¾ã€‘æ‹“æ‰‘æ’åº | è½¬è½½","url":"/posts/1720780208/","content":"æœ¬æ–‡æ¬è¿è‡ªcsdn\n\n\næ‹“æ‰‘æ’åºä»€ä¹ˆæ˜¯æ‹“æ‰‘æ’åºï¼Ÿâ€ƒâ€ƒåœ¨å›¾è®ºä¸­ï¼Œæ‹“æ‰‘æ’åºæ˜¯ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾çš„æ‰€æœ‰é¡¶ç‚¹çš„çº¿æ€§åºåˆ—(è·å¾—æ‹“æ‰‘æœ‰åºåºåˆ—)ã€‚ä¸”è¯¥åºåˆ—å¿…é¡»æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ï¼š\n\næ¯ä¸ªé¡¶ç‚¹å‡ºç°ä¸”åªå‡ºç°ä¸€æ¬¡ã€‚\nè‹¥å­˜åœ¨ä¸€æ¡ä»é¡¶ç‚¹ A åˆ°é¡¶ç‚¹ B çš„è·¯å¾„ï¼Œé‚£ä¹ˆåœ¨åºåˆ—ä¸­é¡¶ç‚¹ A å‡ºç°åœ¨é¡¶ç‚¹ B çš„å‰é¢ã€‚\n\næœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰æ‰æœ‰æ‹“æ‰‘æ’åºï¼ŒéDAGå›¾æ²¡æœ‰æ‹“æ‰‘æ’åºä¸€è¯´ã€‚\n  \næ€ä¹ˆæ‹“æ‰‘æ’åºï¼Ÿæ‹“æ‰‘æ’åºæ­¥éª¤ï¼š\n\nåœ¨æœ‰å‘å›¾ä¸­é€‰ä¸€ä¸ªæ²¡æœ‰å‰é©±çš„é¡¶ç‚¹ä¸”è¾“å‡ºä¹‹ã€‚\nä»å›¾ä¸­åˆ é™¤è¯¥é¡¶ç‚¹å’Œæ‰€æœ‰ä»¥å®ƒä¸ºå°¾çš„å¼§ã€‚\n\nâ€ƒâ€ƒé‡å¤ä¸Šè¿°ä¸¤æ­¥ï¼Œç›´è‡³å…¨éƒ¨é¡¶ç‚¹å‡å·²è¾“å‡ºï¼Œæˆ–è€…å½“å‰å›¾ä¸­ä¸å­˜åœ¨æ— å‰é©±çš„é¡¶ç‚¹ä¸ºæ­¢ã€‚åä¸€ç§æƒ…å†µåˆ™è¯´æ˜æœ‰å‘å›¾ä¸­å­˜åœ¨ç¯ã€‚\n \nâ€ƒâ€ƒå›¾ä¸­ï¼ŒV1 å’Œ V6 æ²¡æœ‰å‰é©±ï¼Œåˆ™å¯ä»»é€‰ä¸€ä¸ªã€‚å‡è®¾å…ˆè¾“å‡º V6ï¼Œåœ¨åˆ é™¤ V6 åŠå¼§ &lt;V6, V4&gt;,&lt;V6, V5&gt; ä¹‹åï¼Œåªæœ‰é¡¶ç‚¹ V1 æ²¡æœ‰å‰é©±ï¼Œè¾“å‡º V1 ä¸”åˆ å» V1 åŠå¼§ &lt;V1, V2&gt;,&lt;V1, V3&gt; å’Œ &lt;V1, V4&gt;ï¼Œä¹‹å V3 å’Œ V4 éƒ½æ²¡æœ‰å‰é©±ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¯ä»ä¸­ä»»é€‰ä¸€ä¸ªç»§ç»­è¿›è¡Œã€‚æ•´ä¸ªæ‹“æ‰‘æ’åºçš„è¿‡ç¨‹å¦‚ä¸Šå›¾ã€‚\næ‹“æ‰‘æ’åºå®ç°â€ƒâ€ƒæˆ‘ä»¬é‡‡ç”¨é‚»æ¥è¡¨ä½œæœ‰å‘å›¾çš„å­˜å‚¨ç»“æ„ï¼Œä¸”åœ¨å¤´ç»“ç‚¹ä¸­å¢åŠ ä¸€ä¸ªå­˜æ”¾é¡¶ç‚¹å…¥åº¦çš„æ•°ç»„ã€‚å…¥åº¦ä¸ºé›¶çš„é¡¶ç‚¹å³ä¸ºæ²¡æœ‰å‰é©±çš„é¡¶ç‚¹ï¼Œåˆ é™¤é¡¶ç‚¹ä»¥åŠå®ƒä¸ºå°¾çš„å¼§çš„æ“ä½œï¼Œåˆ™å¯æ¢ä»¥å¼§å¤´é¡¶ç‚¹çš„å…¥åº¦å‡ 1 æ¥å®ç°ã€‚\nStatus TopologicalSort(ALGraph G)&#123;\t//æœ‰å‘å›¾Gé‡‡ç”¨é‚»æ¥è¡¨å­˜å‚¨ç»“æ„ \t//è‹¥Gæ— å›è·¯ï¼Œåˆ™è¾“å‡ºGçš„é¡¶ç‚¹çš„ä¸€ä¸ªæ‹“æ‰‘åºåˆ—å¹¶è¿”å›OKï¼Œå¦åˆ™ERROR \tFindInDegree(G, indegree);//å¯¹å„é¡¶ç‚¹æ±‚å…¥åº¦indegree[0..vernum-1] \tInitStack(S);\tfor(i=0;i&lt;G.vexnum;i++)//å»ºé›¶å…¥åº¦é¡¶ç‚¹æ ˆS \t\tif(!indegree[i])//å…¥åº¦ä¸º0è€…è¿›æ ˆ \t\t\tPush(S, i);\tcount = 0;//å¯¹è¾“å‡ºé¡¶ç‚¹è®¡æ•° \twhile(!StackEmpty(S))&#123;\t\tPop(S, i);\tprintf(i, G.vertices[i].data);\tcount++;//è¾“å‡ºiå·é¡¶ç‚¹å¹¶è®¡æ•° \t\tfor(p=G.vertices[i].firstarc; p; p=p-&gt;nextarc)&#123;\t\t\tk = p-&gt;adjvex;//å¯¹iå·é¡¶ç‚¹çš„æ¯ä¸ªé‚»æ¥ç‚¹çš„å…¥åº¦å‡1 \t\t\tif(!(--indegree[k]))//è‹¥å…¥åº¦å‡ä¸º0ï¼Œåˆ™å…¥æ ˆ \t\t\t\tPush(S, k);\t\t&#125;\t&#125;\tif(count&lt;G.vexnum)//è¯¥æœ‰å‘å›¾æœ‰å›è·¯ \t\treturn ERROR;\telse\t\treturn OK;&#125;\n\nå¯¹æœ‰ n ä¸ªé¡¶ç‚¹å’Œ e æ¡å¼§çš„æœ‰å‘å›¾è€Œè¨€ï¼Œå»ºç«‹æ±‚å„é¡¶ç‚¹çš„å…¥åº¦çš„æ—¶é—´å¤æ‚åº¦ O(e)ï¼›å»ºé›¶å…¥åº¦é¡¶ç‚¹æ ˆçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n)ï¼›åœ¨æ‹“æ‰‘æ’åºè¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å‘å›¾æ— ç¯ï¼Œåˆ™æ¯ä¸ªé¡¶ç‚¹è¿›ä¸€æ¬¡æ ˆï¼Œå‡ºä¸€æ¬¡æ ˆï¼Œå…¥åº¦å‡ 1 çš„æ“ä½œåœ¨ WHILE è¯­å¥ä¸­æ€»å…±æ‰§è¡Œ e æ¬¡ï¼Œæ‰€ä»¥ï¼Œæ€»çš„**æ—¶é—´å¤æ‚åº¦ä¸º O(n+e)**ã€‚  \nå½“æœ‰å‘å›¾ä¸­æ— ç¯æ—¶ï¼Œä¹Ÿå¯åˆ©ç”¨æ·±åº¦ä¼˜å…ˆéå†è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œå› ä¸ºå›¾ä¸­æ— ç¯ï¼Œåˆ™ç”±å›¾ä¸­æŸç‚¹å‡ºå‘è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢éå†æ—¶ï¼Œæœ€å…ˆé€€å‡º DFS å‡½æ•°çš„é¡¶ç‚¹å³å‡ºåº¦ä¸ºé›¶çš„é¡¶ç‚¹ï¼Œæ˜¯æ‹“æ‰‘æœ‰åºåºåˆ—ä¸­æœ€åä¸€ä¸ªé¡¶ç‚¹ã€‚ç”±æ­¤ï¼ŒæŒ‰é€€å‡º DFS å‡½æ•°çš„å…ˆåè®°å½•ä¸‹æ¥çš„é¡¶ç‚¹åºåˆ—(å¦‚åŒæ±‚å¼ºè¿é€šåˆ†é‡æ—¶ finished æ•°ç»„ä¸­çš„é¡¶ç‚¹åºåˆ—)å³ä¸ºé€†å‘çš„æ‹“æ‰‘æœ‰åºåºåˆ—ã€‚  \nå…³é”®è·¯å¾„ä»€ä¹ˆæ˜¯å…³é”®è·¯å¾„ï¼ŸAOEç½‘ï¼š åœ¨ä¸€ä¸ªè¡¨ç¤ºå·¥ç¨‹çš„å¸¦æƒæœ‰å‘å›¾ä¸­ï¼Œç”¨é¡¶ç‚¹è¡¨ç¤ºäº‹ä»¶ï¼ˆå¦‚V1ï¼‰ï¼Œç”¨æœ‰å‘è¾¹è¡¨ç¤ºæ´»åŠ¨ï¼ˆå¦‚&lt;V1,V2&gt; &#x3D; a1ï¼‰ï¼Œè¾¹ä¸Šçš„æƒå€¼è¡¨ç¤ºæ´»åŠ¨çš„æŒç»­æ—¶é—´ï¼Œç§°è¿™æ ·çš„æœ‰å‘å›¾ä¸ºè¾¹è¡¨ç¤ºçš„æ´»åŠ¨çš„ç½‘ã€‚æºç‚¹ï¼š åœ¨AOEç½‘ä¸­ï¼Œæ²¡æœ‰å…¥è¾¹çš„é¡¶ç‚¹ç§°ä¸ºæºç‚¹ï¼›å¦‚é¡¶ç‚¹V1ã€‚ç»ˆç‚¹ï¼š åœ¨AOEç½‘ä¸­ï¼Œæ²¡æœ‰å‡ºè¾¹çš„é¡¶ç‚¹ç§°ä¸ºç»ˆç‚¹ï¼›å¦‚é¡¶ç‚¹V9ã€‚AOEç½‘çš„æ€§è´¨ï¼š\n\nåªæœ‰åœ¨è¿›å…¥æŸé¡¶ç‚¹çš„æ´»åŠ¨éƒ½å·²ç»ç»“æŸï¼Œè¯¥é¡¶ç‚¹æ‰€ä»£è¡¨çš„äº‹ä»¶æ‰å‘ç”Ÿï¼›ä¾‹å¦‚ï¼ŒV5 äº‹ä»¶å‘ç”Ÿéœ€è¦ a4 å’Œ a5 ä¸¤ä¸ªæ´»åŠ¨éƒ½ç»“æŸã€‚\nåªæœ‰åœ¨æŸé¡¶ç‚¹æ‰€ä»£è¡¨çš„äº‹ä»¶å‘ç”Ÿåï¼Œä»è¯¥é¡¶ç‚¹å‡ºå‘çš„å„æ´»åŠ¨æ‰å¼€å§‹ï¼›ä¾‹å¦‚ï¼ŒV5 äº‹ä»¶ç»“æŸï¼Œæ´»åŠ¨ a7 å’Œ a8 æ´»åŠ¨æ‰èƒ½å¼€å§‹ã€‚\n\n\nâ€ƒâ€ƒåœ¨AOEç½‘ä¸­ï¼Œæ‰€æœ‰æ´»åŠ¨éƒ½å®Œæˆæ‰èƒ½åˆ°è¾¾ç»ˆç‚¹ï¼Œå› æ­¤å®Œæˆæ•´ä¸ªå·¥ç¨‹æ‰€å¿…é¡»èŠ±è´¹çš„æ—¶é—´ï¼ˆå³æœ€çŸ­å·¥æœŸï¼‰åº”è¯¥ä¸ºæºç‚¹åˆ°ç»ˆç‚¹çš„æœ€å¤§è·¯å¾„é•¿åº¦ã€‚å…·æœ‰æœ€å¤§è·¯å¾„é•¿åº¦çš„è·¯å¾„ç§°ä¸ºå…³é”®è·¯å¾„ã€‚å…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨ç§°ä¸ºå…³é”®æ´»åŠ¨ã€‚â€ƒâ€ƒå‡è®¾å¼€å§‹ç‚¹æ˜¯ V1ï¼Œä» V1 åˆ° Vi çš„æœ€é•¿è·¯å¾„é•¿åº¦å«åšäº‹ä»¶ Vi çš„æœ€æ—©å‘ç”Ÿäº‹ä»¶ã€‚è¿™ä¸ªæ—¶é—´å†³å®šäº†æ‰€æœ‰ä»¥ Vi ä¸ºå°¾çš„å¼§æ‰€è¡¨ç¤ºçš„æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´ã€‚æˆ‘ä»¬ç”¨ e(i) è¡¨ç¤ºæ´»åŠ¨ ai çš„æœ€æ—©å¼€å§‹æ—¶é—´ã€‚è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªæ´»åŠ¨çš„æœ€è¿Ÿå¼€å§‹æ—¶é—´ l(i)ï¼Œè¿™æ˜¯åœ¨ä¸æ¨è¿Ÿæ•´ä¸ªè¿‡ç¨‹å®Œæˆçš„å‰æä¸‹ï¼Œæ´»åŠ¨ ai æœ€è¿Ÿå¿…é¡»å¼€å§‹è¿›è¡Œçš„æ—¶é—´ã€‚ä¸¤è€…ä¹‹å·® l(i)-e(i) æ„å‘³ç€å®Œæˆæ´»åŠ¨ ai çš„æ—¶é—´ä½™é‡ã€‚æˆ‘ä»¬æŠŠ l(i)&#x3D;e(i) çš„æ´»åŠ¨å«åšå…³é”®æ´»åŠ¨ã€‚\nå‘å…³é”®è·¯å¾„è¦æ—¶é—´ï¼Œå‘éå…³é”®è·¯å¾„è¦èµ„æºã€‚\n\nä»å‰å¾€åï¼Œè®¡ç®—å·¥æœŸä¸æ¯é¡¹æ´»åŠ¨çš„æœ€æ—©å¼€å§‹æ—¶é—´ï¼›\nä»åå¾€å‰ï¼Œå€’æ¨æ¯é¡¹æ´»åŠ¨æœ€æ™šå¼€å§‹æ—¶é—´ã€‚\nå…³é”®è·¯å¾„ï¼šæœ€æ—©å¼€å§‹æ—¶é—´&#x3D;æœ€æ™šå¼€å§‹æ—¶é—´\n\næ€ä¹ˆæ±‚å…³é”®è·¯å¾„ï¼Ÿve(j)ï¼šæœ€æ—©å‘ç”Ÿæ—¶é—´vl(j)ï¼šæœ€è¿Ÿå‘ç”Ÿæ—¶é—´\n\nè¾“å…¥ e æ¡å¼§&lt;j, k&gt;ï¼Œå»ºç«‹ AOE-ç½‘çš„å­˜å‚¨ç»“æ„ï¼›\nä»æºç‚¹ v0 å‡ºå‘ï¼Œä»¤ ve[0]=0ï¼ŒæŒ‰æ‹“æ‰‘æœ‰åºæ±‚å…¶ä½™å„é¡¶ç‚¹çš„æœ€æ—©å‘ç°æ—¶é—´ ve[i] (1â‰¤iâ‰¤n-1)ã€‚å¦‚æœå¾—åˆ°çš„æ‹“æ‰‘æœ‰åºåºåˆ—ä¸­é¡¶ç‚¹ä¸ªæ•°å°äºç½‘ä¸­é¡¶ç‚¹æ•° nï¼Œåˆ™è¯´æ˜ç½‘ä¸­å­˜åœ¨ç¯ï¼Œä¸èƒ½æ±‚å…³é”®è·¯å¾„ï¼Œç®—æ³•ç»ˆæ­¢ï¼›å¦åˆ™æ‰§è¡Œæ­¥éª¤(3)ã€‚\nä»æ±‡ç‚¹ vn å‡ºå‘ï¼Œä»¤ vl[n-1]=ve[n-1]ï¼ŒæŒ‰é€†æ‹“æ‰‘æœ‰åºæ±‚å…¶ä½™å„é¡¶ç‚¹çš„æœ€è¿Ÿå‘ç”Ÿæ—¶é—´ vl[i] (n-2â‰¥iâ‰¥2)ï¼›\næ ¹æ®å„é¡¶ç‚¹çš„ ve å’Œ vl å€¼ï¼Œæ±‚æ¯æ¡å¼§ s çš„æœ€æ—©å¼€å§‹æ—¶é—´ e(s) å’Œæœ€è¿Ÿå¼€å§‹æ—¶é—´ l(s)ã€‚è‹¥æŸæ¡å¼§æ»¡è¶³æ¡ä»¶ e(s)&#x3D;l(s)ï¼Œåˆ™ä¸ºå…³é”®æ´»åŠ¨ã€‚\n\nâ€ƒâ€ƒæ ¹æ®ä¸Šè¿°ç®—æ³•ï¼Œè®¡ç®—å„é¡¶ç‚¹çš„ ve å€¼æ˜¯åœ¨æ‹“æ‰‘æ’åºçš„è¿‡ç¨‹ä¸­è¿›è¡Œçš„ï¼Œéœ€å¯¹æ‹“æ‰‘æ’åºçš„ç®—æ³•ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š\n\nåœ¨æ‹“æ‰‘æ’åºä¹‹å‰è®¾åˆå€¼ï¼Œä»¤ ve[i]=0 (0â‰¤iâ‰¤n-1)ï¼›\nåœ¨ç®—æ³•ä¸­å¢åŠ ä¸€ä¸ªè®¡ç®— vj çš„ç›´æ¥åç»§ vk çš„æœ€æ—©å‘ç”Ÿæ—¶é—´çš„æ“ä½œï¼šè‹¥ ve[j]+dut(&lt;j, k&gt;) &gt; ve[k]ï¼Œåˆ™ ve[k]=ve[j]+dut(&lt;j, k&gt;)ï¼›\nä¸ºäº†èƒ½æŒ‰é€†æ‹“æ‰‘æœ‰åºåºåˆ—çš„é¡ºåºè®¡ç®—å„é¡¶ç‚¹çš„ vl å€¼ï¼Œéœ€è®°ä¸‹åœ¨æ‹“æ‰‘æ’åºçš„è¿‡ç¨‹ä¸­æ±‚å¾—çš„æ‹“æ‰‘æœ‰åºåºåˆ—ï¼Œè¿™éœ€è¦åœ¨æ‹“æ‰‘æ’åºç®—æ³•ä¸­ï¼Œå¢è®¾ä¸€ä¸ªæ ˆä»¥è®°å½•æ‹“æ‰‘æœ‰åºåºåˆ—ï¼Œåˆ™åœ¨è®¡ç®—æ±‚å¾—å„é¡¶ç‚¹çš„ ve å€¼ä¹‹åï¼Œä»æ ˆé¡¶è‡³æ ˆåº•ä¾¿ä¸ºé€†æ‹“æ‰‘æœ‰åºåºåˆ—ã€‚\n\nå…³é”®è·¯å¾„å®ç°æ”¹å†™çš„æ‹“æ‰‘æ’åºä»£ç ï¼š\nStatus TopologicalOrder(ALGraph G, Stack &amp;T)&#123;\t//æœ‰å‘å›¾Gé‡‡ç”¨é‚»æ¥è¡¨å­˜å‚¨ç»“æ„ï¼Œæ±‚å„é¡¶ç‚¹äº‹ä»¶çš„æœ€æ—©å‘ç”Ÿæ—¶é—´ ve(å…¨å±€å˜é‡) \t//Tä¸ºæ‹“æ‰‘åºåˆ—é¡¶ç‚¹æ ˆï¼ŒSä¸ºé›¶å…¥åº¦é¡¶ç‚¹æ ˆ \t//è‹¥Gæ— å›è·¯ï¼Œåˆ™ç”¨æ ˆTè¿”å›Gçš„ä¸€ä¸ªæ‹“æ‰‘åºåˆ—ï¼Œä¸”å‡½æ•°å€¼ä¸ºOKï¼Œå¦åˆ™ERROR \tFindInDegree(G, indegree);//å¯¹å„é¡¶ç‚¹æ±‚å…¥åº¦indegree[0..vernum-1] \tInitStack(S);//å»ºé›¶å…¥åº¦é¡¶ç‚¹æ ˆS \tfor(i=0;i&lt;G.vexnum;i++)//å»ºé›¶å…¥åº¦é¡¶ç‚¹æ ˆS \t\tif(!indegree[i])//å…¥åº¦ä¸º0è€…è¿›æ ˆ \t\t\tPush(S, i);\tInitStack(T);\tcount = 0;\tve[0..G.vexnum-1] = 0;//åˆå§‹åŒ– \twhile(!StackEmpty(S))&#123;\t\tPop(S, j);\tPush(T, j);\tcount++;//jå·é¡¶ç‚¹å…¥Tæ ˆå¹¶è®¡æ•° \t\tfor(p=G.vertices[j].firstarc; p; p=p-&gt;nextarc)&#123;\t\t\tk = p-&gt;adjvex;//å¯¹jå·é¡¶ç‚¹çš„æ¯ä¸ªé‚»æ¥ç‚¹çš„å…¥åº¦å‡1 \t\t\tif(--indegree[k] == 0)//è‹¥å…¥åº¦å‡ä¸º0ï¼Œåˆ™å…¥æ ˆ \t\t\t\tPush(S, k);\t\t\tif(ve[j]+ *(p-&gt;info)&gt;ve[k])\t\t\t\tve[k] = ve[j] + *(p-&gt;info);\t\t&#125;\t&#125;\tif(count &lt; G.vexnum)//è¯¥æœ‰å‘å›¾æœ‰å›è·¯ \t\treturn ERROR;\telse\t\treturn OK;&#125; \n\nå…³é”®è·¯å¾„ç®—æ³•ï¼š\nStatus CriticalPath(ALGraph G)&#123;\t//Gä¸ºæœ‰å‘å›¾ï¼Œè¾“å‡ºGçš„å„é¡¹å…³é”®æ´»åŠ¨ \tif(!TopologicalOrder(G, T))\t\treturn ERROR;\tvl[0..G.vexnum-1] = ve[G.vexnum-1];//åˆå§‹åŒ–é¡¶ç‚¹äº‹ä»¶çš„æœ€è¿Ÿå‘ç”Ÿäº‹ä»¶ \twhile(!StackEmpty(T))&#123;//æŒ‰æ‹“æ‰‘é€†åºæ±‚å„é¡¶ç‚¹çš„vlå€¼ \t\tfor(Pop(T, j),p=G.vertices[j].firstarc; p; p=p-&gt;nextarc)&#123;\t\t\tk = p-&gt;adjvex;\tdut = *(p-&gt;info);\t\t\tif(vl[k]-dut &lt; vl[j])\t\t\t\tvl[j] = vl[k]-dut;\t\t&#125;\t&#125;\tfor(j=0;j&lt;G.vexnum;j++)&#123;//æ±‚eeï¼Œelå’Œå…³é”®æ´»åŠ¨ \t\tfor(p=G.vertices[j].firstarc; p; p=p-&gt;nextarc)&#123;\t\t\tk = p-&gt;adjvex;\tdut = *(p-&gt;info);\t\t\tee = ve[j];\tel = vl[k]-dut;\t\t\ttag = (ee==el)?&#x27;*&#x27;:&#x27;&#x27;;\t\t\tprintf(j, k, dut, ee, el, tag);//è¾“å‡ºå…³é”®æ´»åŠ¨ \t\t&#125;\t&#125;&#125; \n\n\nâ€ƒâ€ƒä¸Šé¢ä¸¤ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n+e)ï¼Œè®¡ç®—å¼§çš„æ´»åŠ¨æœ€æ—©å¼€å§‹æ—¶é—´å’Œæœ€è¿Ÿå¼€å§‹æ—¶é—´çš„æ—¶é—´å¤æ‚åº¦ä¸º O(e)ï¼Œæ‰€ä»¥æ€»çš„æ±‚å…³é”®è·¯å¾„çš„**æ—¶é—´å¤æ‚åº¦ä¸º O(n+e)**ã€‚  \næ±‚å…³é”®è·¯å¾„è¿‡ç¨‹ç¤ºä¾‹ \nä¸Šå›¾çš„å…³é”®æ´»åŠ¨ä¸º a1ï¼Œa4ï¼Œa7ï¼Œa8ï¼Œa10 å’Œ a11ã€‚å®ƒä»¬æ„æˆä¸¤æ¡å…³é”®è·¯å¾„ï¼š(V1ï¼ŒV2ï¼ŒV5ï¼ŒV7ï¼ŒV9) å’Œ (V1ï¼ŒV2ï¼ŒV5ï¼ŒV8ï¼ŒV9)ã€‚  \nå®è·µè¯æ˜ï¼šç”¨ AOE-ç½‘æ¥ä¼°ç®—æŸäº›å·¥ç¨‹å®Œæˆçš„æ—¶é—´æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚åªæœ‰åœ¨ä¸æ”¹å˜ç½‘çš„å…³é”®è·¯å¾„çš„æƒ…å†µä¸‹ï¼Œæé«˜å…³é”®æ´»åŠ¨çš„é€Ÿåº¦æ‰æœ‰æ•ˆã€‚è‹¥ç½‘ä¸­æœ‰å‡ æ¡å…³é”®è·¯å¾„ï¼Œé‚£ä¹ˆï¼Œå•æ˜¯æé«˜ä¸€æ¡å…³é”®è·¯å¾„ä¸Šçš„å…³é”®æ´»åŠ¨çš„é€Ÿåº¦ï¼Œè¿˜ä¸èƒ½å¯¼è‡´æ•´ä¸ªå·¥ç¨‹ç¼©çŸ­å·¥æœŸï¼Œè€Œå¿…é¡»æé«˜åŒæ—¶åœ¨å‡ æ¡å…³é”®è·¯å¾„ä¸Šçš„æ´»åŠ¨é€Ÿåº¦ã€‚\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œqw&amp;amp;jyã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_43448856/article/details/119959241\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["æ•°æ®ç»“æ„","Java","å›¾"]},{"title":"ã€Cè¯­è¨€ã€‘å…«å¤§æ’åºç®—æ³•ï¼ˆå¸¦å›¾è¯¦è§£ï¼‰","url":"/posts/3996153794/","content":"å‰è¨€å¦‚æœä½ æŠŠæœ¬ä¸“æ ä»å¤´çœ‹åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œæœ¬ç¯‡åšå®¢å·²ç»æ˜¯æ˜¯åˆé˜¶æ•°æ®ç»“æ„çš„æ”¶å°¾å•¦ğŸ˜ï¼è®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œé‚£äº›å¸¸è§çš„æ’åºç®—æ³•ï¼\n\næœ¬ç¯‡åšå®¢ä¸»è¦è®²è¿°å…«å¤§æ’åºğŸ•µï¸â€â™€ï¸ï¼Œæ¡¶æ’åº/åŸºæ•°æ’åºå¯èƒ½ä¼šåœ¨åæœŸè¡¥ä¸Šï¼æ¬¢è¿å¤§å®¶æ”¶è—æœ¬æ–‡ï¼\n\n\nåœ¨ä¹‹å‰çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡ezçš„å†’æ³¡æ’åºï¼Œå’Œé€šè¿‡å †å®ç°çš„å †æ’åºï¼Œæœ¬ç¯‡åšå®¢å°±ä¸å†è¯¦è§£è¿™ä¸¤ä¸ªäº†ï¼\n\næœ‰äº›æ’åºçš„æ€è·¯ä¸æ˜¯é‚£ä¹ˆå¥½æ‡‚ï¼Œæˆ‘çš„è®²è§£ä¹Ÿä¼šæœ‰ä¸åˆ°ä½çš„åœ°æ–¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºä½ çš„ç–‘æƒ‘æˆ–å»ºè®®ï¼ğŸŒ­\n\n[TOC]\n1.æ’å…¥æ’åº1.1ç›´æ¥æ’å…¥åŸºæœ¬æ€æƒ³ï¼šæŠŠå¾…æ’åºçš„æ•°ä¾ç…§å¤§å°æ’å…¥ä¸€ä¸ªå·²ç»æœ‰åºçš„åºåˆ—ä¸­ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ’å…¥å®Œæ¯•ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªæ–°çš„æœ‰åºåºåˆ—\n\nå®é™…ä¸Šæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­æ‰“æ–—åœ°ä¸»ï¼Œåœ¨ç ç‰Œçš„æ—¶å€™å°±è¿ç”¨äº†è¿™ç§æ€æƒ³ã€‚æŠŠç›¸åŒçš„æ•°æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ä¾ç…§ä»å°åˆ°å¤§æ’åˆ—\n\n\nä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼Œéƒ½â€œå·²ç»æœ‰åºâ€äº†ï¼Œé‚£è¿˜æ€ä¹ˆæ’åºï¼Ÿ\n\nè¿™éœ€è¦æˆ‘ä»¬ä¹‹å‰å­¦ä¹ é“¾å¼äºŒå‰æ ‘æ—¶æ¥è§¦åˆ°çš„åˆ†æ²»æ€æƒ³\nå½“æˆ‘ä»¬æ‰‹å¤´ä¸Šåªæœ‰ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œå°†å¤§çš„é‚£ä¸ªæ•°æ’å…¥åˆ°å°çš„æ•°åå¤´ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæœ‰åºçš„2æ•°åºåˆ—\nè¿™æ—¶å€™å†è®©ä¸‹ä¸€ä¸ªæ•°åŠ å…¥è¿›æ¥ï¼ŒæŠŠå®ƒæ’å…¥åˆ°ç›¸åº”ä½ç½®ï¼Œå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„3æ•°åºåˆ—\nä¾æ¬¡é€’è¿›ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºçš„Næ•°åºåˆ—\n\nå¦‚æœå­¦ä¹ è¿‡åˆ†æ²»æ€æƒ³çš„ä½ ï¼Œè‚¯å®šä¸€æ‹æ¡Œå­é“ï¼šâ€œæˆ‘çŸ¥é“äº†ï¼Œæ‰‹å¤´ä¸Šåªæœ‰ä¸¤ä¸ªæ•°çš„æ—¶å€™ï¼Œå°±æ˜¯åˆ†æ²»çš„æœ«ç«¯æ¡ä»¶ï¼â€\næ²¡é”™ï¼Œæˆ‘ä»¬å°±æ˜¯è¦åˆ©ç”¨è¿™ç§æ€æƒ³ï¼Œå®ç°ä»ä¸¤ä¸ªæ•°å¼€å§‹çš„æ’å…¥æ’åºï¼\n\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œéœ€è¦ä½ ä½¿ç”¨æ’å…¥æ’åºï¼Œå°†å®ƒå˜æˆå‡åºåºåˆ—ï¼š9 1 2 5 7 4 8 6 3 5ã€‚\n\næˆ‘ä»¬å°±ä»9å¼€å§‹ï¼Œå°†1æ’å…¥åˆ°9çš„å‰é¢ï¼Œ2æ’å…¥åˆ°1ã€9ä¹‹é—´ï¼Œâ€¦â€¦\n\nè¿™æ ·å°±èƒ½æœ€ç»ˆæ’åºå‡º1 2 3 4 5 5 6 7 8 9çš„ç»“æœã€‚\næœ€åä»¥ä»£ç çš„å½¢å¼æ“ä½œï¼Œå¦‚ä¸‹é¢æ‰€ç¤º\n// æ’å…¥æ’åºvoid InsertSort(int* a, int n){    //åœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ’å…¥æ–°çš„æ•°ï¼Œæ¯ä¸€è¶Ÿéƒ½è®©æœ€åçš„end+1çš„æ•°æ®å¤§äºend    for (int i = 0; i &lt; n - 1; i++)    {        int end = i;        int tmp = a[end+1];        while (end &gt;= 0)        {            if (tmp &lt; a[end])            {                a[end + 1] = a[end]; // å°†å½“å‰å’Œä¸‹ä¸€ä½äº¤æ¢                end-= 1; // å¾€å‰ç§»åŠ¨ï¼Œç»§ç»­æ¯”è¾ƒ            }            else            {                break;\t        }        }        a[end+1] = tmp;        // æœ€åendä¸ç¬¦åˆæ¡ä»¶å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œendå¯èƒ½ä¸º-1ï¼Œa[end]ä¼šè¶Šç•Œ        // breakå‡ºæ¥çš„æ—¶å€™ï¼Œè¯´æ˜æ²¡æœ‰æ¯”tempæ›´å°çš„æ•°äº†        // breakå‡ºæ¥æ—¶çš„endå·²ç»æ¯”tempå°ï¼Œæ‰€ä»¥è¦åœ¨end+1ä½ç½®å¤åŸï¼ˆåŸæœ¬è¿™ä¸ªä½ç½®çš„æ•°è‚¯å®šå·²ç»è¢«æ‹·è´åˆ°æ›´åé¢å»äº†ï¼‰    }}\n\nç”±æ­¤æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºç›´æ¥æ’å…¥æ’åºçš„ä¸€äº›ç‰¹æ€§\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N^2)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œæ˜¯åŸåœ°ç®—æ³•\nå…ƒç´ è¶Šæ¥è¿‘æœ‰åºçš„æ—¶å€™ï¼Œéœ€è¦äº¤æ¢çš„æ¬¡æ•°å°±è¶Šå°‘ï¼Œç®—æ³•çš„æ•ˆç‡è¶Šé«˜\n\n1.2å¸Œå°”æ’åºå¸Œå°”æ’åºæ˜¯å¯¹ç›´æ¥æ’å…¥çš„ä¼˜åŒ–ï¼Œåˆç§°â€œç¼©å°å¢é‡æ³•â€ã€‚ä¹‹å‰æˆ‘ä»¬æ˜¯è¿›æ•°ç»„ä¹‹åç›´æ¥å¼€Rï¼Œç°åœ¨å…ˆQä¸€ä¸‹å†Ré—ªï¼Œè¿™æ ·æ‰èƒ½æ‰“å‡ºæ›´ç§€çš„æ“ä½œã€‚ä¸è¿‡æˆ‘çš„ç›²åƒ§å¾ˆèœï¼ŒRé—ªå°±æ²¡æœ‰æˆåŠŸè¿‡ğŸ˜¥\n\nå–‚å–‚å–‚ï¼Œå¥½åƒè·‘é¢˜äº†ï¼\n\nåŸºæœ¬æ€æƒ³ï¼šå…ˆé€‰å®šä¸€ä¸ªæ•´æ•°gapï¼Œè®©åæŠŠå¾…æ’åºæ•°æ®ä»¥gapä¸ºé—´éš”è¿›è¡Œå•ç‹¬çš„æ’å…¥æ’åºï¼ˆé¢„æ’åºï¼‰ï¼Œè¿™æ ·è®©æ•°åˆ—åšåˆ°å±€éƒ¨æœ‰åºï¼Œæœ€ååœ¨è¿›è¡Œæ’å…¥æ’åºï¼Œè¾¾åˆ°ä¼˜åŒ–æ’å…¥æ’åºç®—æ³•æ•ˆç‡çš„ç›®çš„\næ¯”å¦‚æˆ‘ä»¬è®¾å®šgap=3ï¼Œè¿™æ ·åŸæœ¬çš„æ•°ç»„å°±è¢«åˆ†å‰²æˆäº†ä¸‹é¢çš„æ¨¡æ ·ï¼Œæ¥ç€æˆ‘ä»¬å…ˆå¯¹è¿™3ç»„æ•°æ®è¿›è¡Œå•ç‹¬çš„æ’å…¥æ’åºã€è¿™ä¸ªæ“ä½œè¢«ç§°ä¸º é¢„æ’åºã€‘\n\nä½ èƒ½å†™å‡ºå®ƒä»¬å•ç‹¬æ’å…¥æ’åºåçš„ç»“æœå—ï¼Ÿ\n\nè¿™æ—¶å€™æˆ‘ä»¬çš„åºåˆ—è™½ç„¶ä¸æ˜¯æœ‰åºçš„ï¼Œä½†æ˜¯åªçœ‹ä¸€ä¸ªå°å±€éƒ¨çš„æ—¶å€™ï¼Œå®ƒæ˜¯æœ‰åºçš„ã€‚è¿™æ ·èƒ½å‡å°‘æ’å…¥æ’åºæ“ä½œæ—¶å€™çš„æ¯”è¾ƒæ¬¡æ•°ï¼Œè‡ªç„¶æ•ˆç‡å°±å˜é«˜äº†ã€‚\næ‰§è¡Œå®Œé¢„æ’åºåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹ç°åœ¨çš„æ–°åºåˆ—è¿›è¡Œæ’å…¥æ’åºäº†ã€‚ä½†æ˜¯ç›´æ¥è¿™ä¹ˆè°ƒç”¨è¿˜ä¸å¤Ÿä¼˜åŒ–ã€‚\n\nå†ä»”ç»†çœ‹çœ‹ä¸Šé¢çš„æ€è·¯ï¼Œä½ ä¼šå‘ç°ï¼Œå…¶å®gap=1çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºä¸€æ¬¡æ’å…¥æ’åºäº†\n\nè€Œä¸”å½“æ•°æ®é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å®æ—¶æ”¹å˜æˆ‘ä»¬çš„gapã€‚\nå¾…æ’åºæ•°æ®æœ‰100ä¸ªï¼Œgap=3å°±å¤ªå°äº†ï¼Œä¼˜åŒ–äº†ä¸ªå¯‚å¯ã€‚\nå¾…æ’åºæ•°æ®æœ‰10ä¸ªï¼Œgap=20å°±æ˜¯æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šï¼ŒåŒæ ·ä¸è¡Œï¼\n\nè§£å†³è¿™ä¸ªæ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®å¾…æ’åºæ•°æ®çš„å¤§å°åŠ¨æ€è®¾ç½®gapå°±å¯ä»¥äº†ï¼Œæ¯”å¦‚gap=n/2\nè¿™æ—¶å€™å°±å¯ä»¥è¿›è¡Œè¿™ä¹ˆä¸€ä¸ªæ“ä½œï¼šæ¯æ¬¡é¢„æ’åºè¿‡åå°±æ”¹å˜ä¸€ä¸‹gapï¼Œç›´åˆ°æœ€ågap=1æ‰§è¡Œä¸€æ¬¡æ’å…¥æ’åºï¼Œæ•°åˆ—æœ‰åºã€‚\n\nè½å®åˆ°ä»£ç ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ’å…¥æ’åºä¸­æ‰€æœ‰å’Œ1æœ‰å…³çš„æ“ä½œéƒ½æ”¹æˆgapï¼Œå°±å®ç°äº†å¸Œå°”æ’åº\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯gapçš„èŒƒå›´ï¼Œå› ä¸ºæˆ‘è®¾ç½®çš„æ˜¯gapæ¯æ¬¡éƒ½/3ï¼Œæ‰€ä»¥åœ¨æœ€åå¯èƒ½ä¼šå‡ºç°gap=2/3=0çš„æƒ…å†µï¼Œè¿™æ—¶å€™å…¶å®æ’åºè¿˜æ²¡æœ‰ç»“æŸï¼Œä½†å·²ç»è·³å‡ºå¾ªç¯äº†ã€‚æˆ‘ä»¬éœ€è¦åœ¨æœ«å°¾+1ä¿è¯æœ€åä¸€æ¬¡æ’å…¥æ’åºçš„gap=1\n\n// å¸Œå°”æ’åºvoid ShellSort(int* a, int n){    //åªè¦æŠŠæ’å…¥æ’åºä¸­çš„1å…¨éƒ¨æ”¹æˆgrapï¼Œå°±èƒ½å½¢æˆä¸€æ¬¡é—´éš”ä¸º3çš„é¢„æ’åº    //å½“grap=1æ—¶ï¼Œæ•ˆæœåŒæ’å…¥æ’åºç›¸åŒ    int grap = n;    // å½“grap=1ï¼Œè¯´æ˜ä¸Šä¸€æŠŠå·²ç»æ˜¯ä¸€æ¬¡ç›´æ¥æ’å…¥æ’åºäº†    // æ­¤æ—¶æ•°æ®å·²ç»æœ‰åºï¼Œé€€å‡ºå¾ªç¯    while (grap &gt; 1)    {        grap=grap/3+1;//æ¯ä¸€æ¬¡éƒ½Ã·3,å†+1ï¼›é˜²æ­¢grap=2/3=0çš„æƒ…å†µ        for (int i = 0; i &lt; n - grap; i++)        {            int end = i;            int tmp = a[end + grap];            while (end &gt;= 0)            {                if (tmp &lt; a[end])                {                    a[end + grap] = a[end];                    end -= grap;                }                else                    break;            }            a[end + grap] = tmp;        }    }}\n\nå¸Œå°”æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸å¥½ç¡®å®šï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸ä¼šé€‰å–ä¸åŒçš„gapï¼Œå¯¼è‡´æ—¶é—´æ•ˆç‡ä¹Ÿä¸åŒã€‚ä¸è¿‡å¤§éƒ¨åˆ†èµ„æ–™ä¸­ç»™å‡ºçš„æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ğŸ‘‡åœ¨â€œèœé¸Ÿæ•™ç¨‹â€ç½‘ï¼Œæœ‰å¯¹å¸Œå°”æ’åºæ—¶é—´å¤æ‚åº¦çš„è§£æğŸ‘‰ä¼ é€é—¨\n\n2.é€‰æ‹©æ’åº2.1ç›´æ¥é€‰æ‹©åŸºæœ¬æ€è·¯ï¼šéå†ä¸€éæ•°ç»„ï¼Œä»ä¸­æ‰¾å‡ºæœ€å¤§æˆ–æœ€å°çš„é‚£ä¸€ä¸ªæ•°ï¼Œç„¶åå°†å…¶æ”¾åœ¨æ•°ç»„å‰ç«¯ã€‚ä¸‹ä¸€æ¬¡éå†çš„æ—¶å€™ï¼Œä¸å†éå†è¿™ä¸ªæ•°ã€‚\næ³¨æ„ï¼šå¾—åˆ°æœ€å¤§æœ€å°å€¼åï¼Œéœ€è¦å°†å…¶å’Œæ•°ç»„å¼€å¤´ï¼ˆæˆ–è€…ç»“å°¾ï¼‰çš„æ•°è¿›è¡Œäº¤æ¢ï¼Œè€Œä¸èƒ½ç›´æ¥è¦†ç›–ï¼Œä¸ç„¶ä¼šå‡ºç°æ•°æ®ä¸¢å¤±\nè¿™ä¸ªæ’åºçš„æ€è·¯éå¸¸å¥½ç†è§£ã€‚è¿›ä¸€æ­¥æ‹“å±•ï¼Œå¦‚æœæˆ‘ä¸€æ¬¡éå†é€‰å‡ºä¸¤ä¸ªæ•°ï¼Œå°†æœ€å¤§å€¼æ”¾åœ¨æ•°ç»„å°¾éƒ¨ï¼Œæœ€å°å€¼æ”¾åœ¨æ•°ç»„å¼€å¤´ï¼Œå°±å¯ä»¥å‡å°‘ä¸€åŠéå†çš„æ¬¡æ•°ã€‚\n// æ•°æ®äº¤æ¢void Swap(int* a, int* b){    int tmp = *a;    *a = *b;    *b = tmp;}// ç›´æ¥é€‰æ‹©æ’åºvoid SelectSort(int* a, int n){    int max ,min;    int left = 0, right = n - 1;    while (left &lt; right){        max = min = left;//å­˜æ”¾ä¸‹æ ‡ä¾¿äºåé¢çš„äº¤æ¢        for (int i = left; i &lt;= right; i++)        {            if (a[i] &gt;=a[max]){                max= i;            }            if (a[i] &lt;= a[min]){                min= i;            }        }        Swap(&amp;a[min], &amp;a[left]);        // å¦‚æœmaxå’Œleftç›¸ç­‰ï¼Œç¬¬ä¸€æ¬¡äº¤æ¢ä¼šè¢«æ›¿æ¢        // æ­¤æ—¶minä½ç½®æ˜¯åŸæœ¬çš„max        if (max == left) {            max = min; // é‡å®šå‘max        }        // æ‰€ä»¥éœ€è¦é‡å®šå‘maxçš„ä½ç½®ï¼Œå†äº¤æ¢max        Swap(&amp;a[max], &amp;a[right]);        left++;        right--;    }}\n\nä¸è¿‡ï¼Œè¿™ä¸ªç®—æ³•éœ€è¦å¤šæ¬¡éå†æ•°ç»„ï¼Œæ•ˆç‡è‡ªç„¶ä½çš„ç¦»è°±ï¼Œå ªæ¯”å†’æ³¡ï¼ˆç”šè‡³æ¯”å†’æ³¡è¿˜æ‹‰ï¼‰\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N^2^)\nç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\n\n2.2å †æ’åºå †æ’åºæ˜¯æŒ‡åˆ©ç”¨äºŒå‰æ ‘-å †è¿™ç§æ•°æ®ç»“æ„æ¥è¿›è¡Œé€‰æ‹©æ•°æ®çš„ä¸€ç§æ’åºç®—æ³•ï¼Œå®ƒæ˜¯é€‰æ‹©æ’åºçš„ä¸€ç§ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šå‡åºè¦å»ºå¤§å †ï¼Œæ’é™åºå»ºå°å †\nå †æ’åºå·²ç»åœ¨ä¹‹å‰çš„åšå®¢ä¸­è®²è§£è¿‡ï¼Œç‚¹å‡»ä¸‹æ–¹è¿æ¥å³å¯æŸ¥çœ‹ï¼ğŸ‘‡\n\nã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯å †ï¼Ÿå †æ’åºå’ŒTopKé—®é¢˜åˆæ˜¯å¦‚ä½•å®ç°çš„\n\nè¿™é‡Œç»™å‡ºå †æ’åºçš„æºç ï¼Œæˆ–è®¸èªæ˜çš„ä½ çœ‹æºç å°±èƒ½çœ‹æ‡‚å‘¢ï¼Ÿ\n//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(int* pa, int* pb) {    int tmp = *pa;    *pa = *pb;    *pb = tmp;}// æ‰“å°æ•°ç»„void PrintArray(int* a,int n,const char*info){    printf(\"[%s] \",info);    for(int i=0;i&lt;n;i++)    {        printf(\"%d \",a[i]);    }    printf(\"\\n\");}// å †æ’åºvoid AdjustDown(int* a, int n, int root){    assert(a);    int parent = root;    int child = parent * 2 + 1;//å·¦å­©å­    while (child &lt; n){        //æ‰¾å·¦å³å­©å­ä¸­å°(å¤§)çš„é‚£ä¸€ä¸ª        if (child + 1 &lt; n &amp;&amp; a[child] &lt; a[child + 1])        {//å¦‚æœå·¦å­©å­å¤§(å°)äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­            child++;        }        // è¿™ä¸ªä¹Ÿéœ€è¦æ ¹æ®ä¸Šæ–¹ a[child] &lt; a[child + 1] å¤§äºå°äºçš„ä¸åŒè¿›è¡Œä¿®æ”¹        // å¤§å †ï¼Œå°†å¤§çš„å¾€ä¸Šè°ƒ        // å°å †ï¼Œå°†å°çš„ç½‘ä¸Šè°ƒ        if (a[child] &gt; a[parent]){            Swap(&amp;a[child], &amp;a[parent]);            parent = child;            child = parent * 2 + 1;        }        else{            return;        }    }}// å‡åºç”¨å¤§å †// é™åºç”¨å°å †void HeapSort(int* a, int n){    // å‘ä¸‹è°ƒæ•´--å»ºå † O(N)    for (int i = (n - 1 - 1) / 2; i &gt;= 0; --i){        AdjustDown(a, n, i);//æ­¤æ—¶å»ºçš„æ˜¯ä¸€ä¸ªå°å †    }    PrintArray(a, n,\"å»ºå †å\");    size_t end = n - 1;    while (end &gt; 0){        Swap(&amp;a[0], &amp;a[end]);//å‰åäº¤æ¢ï¼Œæœ€å¤§çš„æ•°æ”¾åˆ°æœ«å°¾ï¼Œä¸è¿›è¡Œä¸‹ä¸€æ¬¡è°ƒæ•´        AdjustDown(a, end, 0);        end--;    }}\n\nä½¿ç”¨å¦‚ä¸‹çš„æ•°æ®è¿›è¡Œæµ‹è¯•\nint main(){    int arr[]={1,5,7,3,8,6};    int sz = sizeof(arr)/sizeof(arr[0]);    PrintArray(arr,sz,\"åˆå§‹å€¼\");    HeapSort(arr,sz);    PrintArray(arr,sz,\"å®Œæˆæ’åº\");    return 0;}\n\nå¯ä»¥å¾—åˆ°å‡åºåºåˆ—\n$ ./test[åˆå§‹å€¼] 1 5 7 3 8 6 [å»ºå †å] 8 5 7 3 1 6 [å®Œæˆæ’åº] 1 3 5 6 7 8 \n\n\n3.äº¤æ¢æ’åº3.1å’•å™œå’•å™œæ’åºè¯´é“å†’æ³¡æ’åºå•Šï¼Œé‚£å°±æ˜¯é™ªä¼´å’±ä»¬Cè¯­è¨€å­¦ä¹ å§‹ç»ˆçš„ä¸€ä¸ªè€æœ‹å‹äº†ã€‚\nåœ¨åˆè¯†Cè¯­è¨€çš„å­¦ä¹ ä¸­ï¼Œæˆ‘æ›¾å†™è¿‡ä¸€ç¯‡åšå®¢ï¼Œé‡Œé¢è®²è§£äº†ç”¨å†’æ³¡æ¥æ¨¡æ‹Ÿå®ç°åº“å‡½æ•°qsortğŸ‘‰ä¼ é€é—¨\n\nå®ƒçš„æ€è·¯å°±æ˜¯å¯¹ä¸¤ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œè¾ƒå¤§çš„æ•°å¾€å°¾éƒ¨ç§»åŠ¨ï¼Œè¾ƒå°çš„æ•°å­—å¾€å¤´éƒ¨ç§»åŠ¨\n\nåœ¨very very long time agoï¼Œæˆ‘ä¹Ÿå†™è¿‡å…³äºå†’æ³¡æ’åºçš„åšå®¢ğŸ‘‡\n\nåˆè¯†Cè¯­è¨€==ï¼å†’æ³¡æ’åº\n\n// å†’æ³¡æ’åºvoid BubbleSort(int* a, int n){    for (int i = 0; i &lt; n; i++)    {        int exchange = 0;        for(int j=0;j&lt;n-1-i;j++)        {            if (a[j] &gt; a[j + 1]){                exchange=1;                Swap(&amp;a[j], &amp;a[j + 1]);            }        }        if (exchange == 0){            break;           //å¦‚æœå•è¶Ÿæ’åºæ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œè¯´æ˜æ­¤æ—¶å·²ç»æœ‰åº        }    }}\n\n\nç©ºé—´å¤æ‚åº¦ï¼šO(N^2)\næ—¶é—´å¤æ‚åº¦ï¼šO(1)\n\n\n3.2å¿«é€Ÿæ’åºå¿«é€Ÿæ’åºæ˜¯Hoareäº1962å¹´æå‡ºçš„ä¸€ç§äºŒå‰æ ‘ç»“æ„çš„äº¤æ¢æ’åºç®—æ³•ã€‚\nåŸºæœ¬æ€æƒ³ï¼šä»»å–å¾…æ’åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†å€¼ï¼ŒæŒ‰ç…§è¯¥åŸºå‡†å€¼å°†å¾…æ’åºé›†åˆåˆ†å‰²æˆä¸¤ä¸ªå­åºåˆ—ï¼Œå·¦å­åºåˆ—ä¸­æ‰€æœ‰å…ƒç´ å‡å°äºåŸºå‡†å€¼ï¼Œå³ å­åºåˆ—ä¸­æ‰€æœ‰å…ƒç´ å‡å¤§äºåŸºå‡†å€¼ï¼Œç„¶åæœ€å·¦å³å­åºåˆ—é‡å¤è¯¥è¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ éƒ½æ’åˆ—åœ¨ç›¸åº”ä½ç½®ä¸Šä¸ºæ­¢ã€‚\n\n3.2.1 Hoareæ³•å‘æ˜å¿«æ’çš„å¤§ä½¬ç»™å‡ºäº†ä¸€ä¸ªæ–¹æ³•ï¼Œå‡è®¾0ä¸‹æ ‡å¤„ä¸ºåŸºå‡†å€¼keyã€‚ç”¨å·¦å³æŒ‡é’ˆæ¥éå†æ•°ç»„ï¼Œå³æŒ‡é’ˆæ‰¾åˆ°æ¯”keyå°çš„æ•°ååœä¸‹ï¼Œå·¦æŒ‡é’ˆæ‰¾æ‰¾åˆ°æ¯”keyå¤§çš„æ•°ååœä¸‹ï¼Œå®ƒä»¬ä¿©è¿›è¡Œäº¤æ¢ã€‚\næœ€åleftå’Œrightç›¸é‡çš„æ—¶å€™ï¼Œå·¦å³åºåˆ—å°±å·²ç»æ’å¥½äº†ï¼Œæ­¤æ—¶å°†keyä¸å®ƒä»¬ç›¸é‡çš„ä½ç½®è¿›è¡Œäº¤æ¢ã€‚æ–°çš„åºåˆ—keyçš„å·¦è¾¹å°äºkeyï¼Œå³è¾¹å¤§äºkeyï¼ˆæ­¤æ—¶ä¸ä¸€å®šæœ‰åºï¼‰\n\nç–‘é—®ï¼šæ—¢ç„¶æœ€åè¦å°†ç›¸é‡ä½ç½®å’Œkeyè¿›è¡Œäº¤æ¢ï¼Œé‚£è¦æ€ä¹ˆä¿è¯ç›¸é‡ä½ç½®å°äºkeyï¼Ÿ\nç­”ï¼šé€šè¿‡å³æŒ‡é’ˆå…ˆèµ°æ¥å®ç°ï¼\n\nå¯èƒ½è¯´å®Œæ€è·¯åï¼Œä½ è¿˜æ˜¯ä¸å¤ªäº†è§£è¿™å·¦å³æŒ‡é’ˆæ˜¯æ€ä¹ˆèµ°çš„ï¼Œåˆ«ç€æ€¥ï¼Œæ¥åº·åº·æˆ‘ç”»çš„åŠ¨å›¾ğŸ‘‡\n\nå› ä¸ºæ˜¯å³æŒ‡é’ˆå…ˆèµ°ï¼Œæ‰€ä»¥å³æŒ‡é’ˆåœä¸‹çš„ä½ç½®ï¼Œä¸€å®šæ˜¯å°äºkeyçš„ä½ç½®ã€‚æ­¤æ—¶åªä¼šæ˜¯Læ¥ç›¸é‡Rï¼Œä¸å¯èƒ½æ˜¯Rå¾€å·¦é‡åˆ°Lï¼ˆå› ä¸ºLåœä¸‹çš„ä½ç½®å¤§äºkeyï¼Œåœ¨è¿™ä¸ªä½ç½®çš„å³è¾¹ä¸å¯èƒ½æ²¡æœ‰ä¸€ä¸ªå°äºkeyçš„å€¼ï¼‰\næ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœLçš„ä½ç½®å³è¾¹åªæœ‰ä¸€ä¸ªæ¯”keyå°çš„å€¼ï¼Œé‚£Råœ¨ç¬¬ä¸€è¶Ÿå°±ä¼šæ¥åˆ°2çš„ä½ç½®ï¼Œç„¶åLå‘å³èµ°ä¸€æ­¥ä¸Rç›¸äº¤ï¼Œç›´æ¥äº¤æ¢\n\nä¸¤ç§æç«¯æƒ…å†µä¹Ÿä¼šæœ‰ä¸‹é¢çš„ä¸¤ç§æç«¯æƒ…å†µ\n\nkeyå³ä¾§æ²¡æœ‰æ¯”keyå°çš„å€¼ï¼Œé‚£ä¹ˆRä¼šç›´æ¥ä¸Lç›¸äº¤ï¼Œå†åŸåœ°äº¤æ¢key\nkeyå³ä¾§æ²¡æœ‰æ¯”keyå¤§çš„å€¼ï¼ŒRå…ˆç§»åŠ¨ï¼ˆåŸåœ°ä¸åŠ¨ï¼‰ï¼ŒLç›´æ¥ä¸Råœ¨æœ«å°¾ç›¸äº¤ï¼Œå‰åäº¤æ¢\n\nè¿™ä¸¤ç§æç«¯æƒ…å†µï¼Œå°±æ˜¯å¿«æ’çš„å¼±åŠ¿æ‰€åœ¨ï¼Œåœ¨åå¤´ä¼šè®²è¿°å¦‚ä½•ä¼˜åŒ–keyçš„é€‰åˆ™ï¼Œæ¥é¿å…è¿™ç§æç«¯æƒ…å†µ\n\nä¸‹é¢ç»™å‡ºhoareæ³•çš„ä»£ç ï¼Œä¸­é—´çš„ä»£ç æ˜¯ä¸€è¶Ÿhoareæ’åºçš„å®ç°ï¼Œè€Œåœ¨æœ«å°¾ï¼Œæˆ‘ä»¬é€’å½’æ’åºkeyçš„å‰åŠåŒºåŸŸå’ŒååŠåŒºåŸŸï¼Œä¸€ç›´é€’å½’åˆ°æœ€å°åŒºé—´ï¼šã€åŒºé—´åªæœ‰ä¸€ä¸ªå€¼ï¼Œæˆ–è€…åŒºé—´ä¸å­˜åœ¨ã€‘\nvoid QuickSort1(int* a, int begin, int end)//hoare{    if (begin &gt;= end){        return ;//åˆ†æ²»çš„æœ«ç«¯æ¡ä»¶åˆ¤æ–­    }    //ä¸€è¶Ÿæ’åº    int left = begin, right = end;    int keyi = begin;    while (left &lt; right)    {        while ((a[right] &gt; a[keyi])&amp;&amp;(right&gt;=begin))        {            right--;        }        while ((a[left] &lt;= a[keyi])&amp;&amp;(left&lt;right))        {            left++;        }        Swap(&amp;a[left], &amp;a[right]);    }    Swap(&amp;a[left],&amp;a[keyi]);    keyi = left;//å¿…é¡»ç§»åŠ¨keyiçš„ä½ç½®    //é€’å½’æ’åºå·¦å³åŒºé—´    QuickSort1(a, begin, keyi-1);    QuickSort1(a, keyi + 1, end);}\n\n3.2.2 æŒ–å‘æ³•æŒ–å‘æ³•çš„æ€è·¯æ¯”Hoareæ›´å¥½ç†è§£ï¼Œè¯¦æƒ…è§ğŸ‘‡åŠ¨å›¾\n\næˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªå˜é‡ä¿å­˜keyçš„å€¼ï¼ˆä¸æ˜¯ä¿å­˜ä¸‹æ ‡ï¼‰ï¼Œç„¶åRå…ˆèµ°æ‰¾æ¯”keyå°çš„ï¼Œä¸å‘ä½äº¤æ¢ï¼ŒLæ‰¾æ¯”keyå¤§çš„ï¼Œä¸å‘ä½äº¤æ¢ã€‚æœ€ç»ˆLRç›¸é‡çš„æ—¶å€™ï¼ŒæŠŠkeyæ”¾å›ç›¸é‡ä½ç½®ï¼Œå°±å®Œæˆäº†ä¸€è¶Ÿæ’åº\n\næ³¨æ„ï¼šå›¾ä¸­ä¸ºäº†ä¾¿äºç†è§£ï¼Œå°†å‘ä½ç”¨ç©ºç™½è¡¨ç¤ºã€‚å®é™…åœ¨å†…å­˜ä¸­æ“ä½œçš„æ—¶å€™ï¼Œå‘ä½å¯ä»¥ä¸€ç›´æ˜¯keyçš„å€¼ï¼Œä¸éœ€è¦çœŸçš„æŠŠå®ƒç§»èµ°æˆ–è€…åˆ é™¤\n\næ€æ ·ï¼Ÿæ˜¯ä¸æ˜¯æ¯”æ–¹æ³•1å¥½ç†è§£ä¸€äº›å‘¢ï¼Ÿ\nä¸‹é¢ç»™å‡ºæŒ–å‘æ³•çš„ä»£ç ç¤ºä¾‹\n//æŒ–å‘void QuickSort2(int* a, int begin, int end){    if (begin &gt;= end) {        return;    }    int left = begin, right = end;    int keyi = a[begin];//å…ˆå­˜æ”¾keyiçš„å€¼    int pit = begin;//pitä½œä¸ºå‘ä½    while (left &lt; right)    {        while ((a[right] &gt; keyi) &amp;&amp; (right &gt;= begin))        {            right--;        }        Swap(&amp;a[pit], &amp;a[right]);        pit = right;        while ((a[left] &lt;= keyi) &amp;&amp; (left &lt; right))        {            left++;        }        Swap(&amp;a[pit], &amp;a[left]);        pit = left;    }    QuickSort2(a, begin, pit - 1);    QuickSort2(a, pit + 1, end);}\n\n3.2.3 å‰åæŒ‡é’ˆæ³•è¿™éƒ¨åˆ†å°±ä¸ç”»åŠ¨å›¾äº†ï¼Œä¸çŸ¥ä¸‹é¢çš„è¿™ç§æ–¹å¼èƒ½ä¸èƒ½è®²è§£æ¸…æ¥šå‘¢ï¼Ÿ\n\n\nè¿™é‡Œéœ€è¦å¼„æ˜ç™½çš„æ˜¯curå’Œprevæ˜¯åˆ†åˆ«åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ç§»åŠ¨\n\ncuræ¯”keyå°çš„æ—¶å€™ï¼Œprevå¾€å++ä¸€ä½ï¼ŒäºŒè€…äº¤æ¢ï¼ˆåœ¨åˆšå¼€å§‹çš„æ—¶å€™æ˜¯åŸåœ°äº¤æ¢ï¼Œä½†åœ¨å›¾4ä¸­å°±ä¸æ˜¯åŸåœ°äº¤æ¢äº†ï¼‰\ncuræ¯”keyå¤§çš„æ—¶å€™ï¼Œprevä¸åŠ¨ï¼Œcurç»§ç»­å¾€å++ï¼Œç›´åˆ°æ‰¾åˆ°æ¯”keyå°çš„æ•°æˆ–è€…è¶Šç•Œååœæ­¢ï¼ˆå¦‚æœæ‰¾åˆ°æ¯”keyå°çš„ï¼Œå°±æ‰§è¡Œä¸Šä¸€æ­¥çš„äº¤æ¢ï¼‰\næœ€ç»ˆcurè¶Šç•Œäº†ï¼Œäº¤æ¢prevå’Œkeyçš„æ•°æ®ï¼Œä¸€è¶Ÿæ’åºå®Œæˆï¼›\néœ€è¦ç”¨é€’å½’æ¥æ’åºkeyiä¹‹å‰çš„å’Œkeyiä¹‹åçš„ï¼Œå®ƒä»¬å¹¶ä¸ä¸€å®šæœ‰åºã€‚\n\nä¸‹é¢ç»™å‡ºå‰åæŒ‡é’ˆæ³•çš„ä»£ç ç¤ºä¾‹\n// è¿™é‡Œçš„endæ˜¯é—­åŒºé—´ï¼Œéœ€è¦ä¼ å…¥æ•°ç»„size-1void QuickSort3(int* a, int begin, int end)//å‰åæŒ‡é’ˆ{    if (begin &gt;= end) {        return;    }    int keyi = begin;    int prev = begin, cur = begin + 1;    while (cur &lt;= end)     {        while ((a[cur] &lt; a[keyi]) &amp;&amp; (a[++prev] != a[cur]))        {            Swap(&amp;a[prev], &amp;a[cur]);        }        cur++;    }    Swap(&amp;a[prev], &amp;a[keyi]);    keyi = prev;    QuickSort3(a, begin, keyi - 1);    QuickSort3(a, keyi + 1, end);}\n\nä¼˜åŒ–æç«¯æƒ…å†µä¸Šé¢æåˆ°äº†å¿«é€Ÿæ’åºæœ‰ä¸¤ç§æç«¯æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ“ä½œæ¥ä¼˜åŒ–å®ƒï¼š\næ—¢ç„¶keyå–æ•°ç»„é¦–æˆ–å°¾éƒ¨éƒ½å¯èƒ½ä¼šé‡åˆ°å®ƒçš„åé¢æ²¡æœ‰æ¯”å®ƒå°ï¼ˆæˆ–å¤§ï¼‰çš„æ•°ï¼Œé‚£æˆ‘ä»¬å°±è®©keyå°½é‡ä½œä¸ºæ•°ç»„æœ‰åºååº”è¯¥å¤„äºä¸­éƒ¨çš„æ•°æ¥ä½œä¸ºkey\nè¿™æ—¶å€™ä¸èƒ½ç›´æ¥é€‰å–å¾…æ’åºæ•°ç»„ä¸­éƒ¨çš„æ•°ï¼Œå› ä¸ºå®ƒä¸ä¸€å®šæ˜¯æ•°å€¼æ­£å¥½çš„é‚£ä¸ª\næˆ‘ä»¬å¯ä»¥é€‰å–æ•°ç»„å¼€å¤´ã€æœ«å°¾ã€ä¸­é—´çš„3ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œå†é€‰æ‹©è¿™3ä¸ªæ•°é‡Œé¢å±…ä¸­çš„é‚£ä¸ªæ•°ä½œä¸ºæˆ‘ä»¬çš„keyï¼Œè¿™æ ·å°±èƒ½é¿å…æ— æ•ˆéå†ï¼\nint GetMid(int* a, int left, int right){    int mid = (left + right) / 2;    if (a[left] &lt; a[mid])    {        if (a[mid] &lt; a[right]){            return mid;        }        else if (a[left] &gt; a[right]){            return left;        }        else{            return right;        }    }    else // a[left] &gt; a[mid]    {        if (a[mid] &gt; a[right]){            return mid;        }        else if (a[left] &lt; a[right]){            return left;        }        else{            return right;        }    }    return -1;//å…¶å®è¿™ä¸ªæ²¡å•¥æ„ä¹‰}\n\nä½†æ˜¯å•çº¯åŠ ä¸Šè¿™ä¸ªä»£ç å¹¶ä¸å¯è¡Œï¼Œå› ä¸ºè¿™æ—¶å€™çš„keyä¸å†å¤„äºåºåˆ—å¼€å¤´äº†ï¼Œä¹Ÿå°±æ„å‘³è¿™æˆ‘ä»¬åå¤´çš„ä»£ç éƒ½éœ€è¦é‡æ–°å†™ä¸€éï¼\n\nè¿™ä¸å‘çˆ¹å—è¿™æ˜¯ï¼Ÿï¼\nä¸ºäº†ä¸æ²¡äº‹æ‰¾äº‹é‡å†™ä¸€éä»£ç ï¼Œè¿™é‡Œç›´æ¥æŠŠæ‰¾åˆ°çš„midå’Œbeginè¿›è¡Œäº¤æ¢å°±OKäº†ï¼\n\nä¿®æ”¹åçš„ä»£ç å¦‚ä¸‹\n// endæ˜¯é—­åŒºé—´void QuickSort(int*a, int begin,int end){    if(begin &gt;= end){        return ;    }    // ä¸‰ä¸ªæ•°å­—æ‰¾ä¸­é—´çš„å“ªä¸€ä¸ªä½œä¸ºkeyiï¼Œé¿å…curåŒ¹é…çš„æ—¶å€™ä¸€ç›´æ‰¾ä¸åˆ°æ¯”keyiå°çš„æ•°    int keyi = GetMidIndex(a,begin,end);    // å°†keyiå’Œbeginäº¤æ¢ï¼Œåç»­çš„ä»£ç å°±ä¸éœ€è¦ä¿®æ”¹    Swap(&amp;a[keyi],&amp;a[begin]);    keyi = begin;    int cur = begin+1;    int prev = begin;    while(cur &lt;= end)    {        while((a[cur] &lt; a[keyi]) &amp;&amp; (a[++prev] != a[cur])){            Swap(&amp;a[cur],&amp;a[prev]);        }        cur++;    }    Swap(&amp;a[keyi],&amp;a[prev]);    keyi = prev;    QuickSort(a,begin,keyi-1);    QuickSort(a,keyi+1,end);}\n\nåŒæ—¶ï¼Œä¸ºäº†é¿å…å¤šæ¬¡é€’å½’å¯¼è‡´æ ˆæº¢å‡ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªæ¡ä»¶ï¼Œåœ¨åºåˆ—é•¿åº¦å°äº10çš„æ—¶å€™è°ƒç”¨å…¶ä»–æ’åºï¼ˆæ¯”å¦‚æ’å…¥æ’åºï¼‰æ¥å®ç°åé¢çš„æ’åºæ“ä½œã€‚\n3.2.4å¿«æ’çš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦å¿«æ’çš„é€’å½’è°ƒç”¨éå¸¸ç±»ä¼¼é“¾å¼äºŒå‰æ ‘çš„å‰åºéå†ï¼Œå®ƒä¸€å…±ä¼šé€’å½’logNå±‚çº§ï¼Œæ¯ä¸€å±‚åŠ èµ·æ¥éƒ½æœ‰Nä¸ªæ•°ï¼Œè¿™æ ·å°±èƒ½ç®—å‡ºå®ƒçš„æ—¶é—´å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N*logN)\nç©ºé—´å¤æ‚åº¦ï¼šO(logN)ï¼Œè¿™ä¸ªæ˜¯é€’å½’å¼€è¾Ÿæ ˆå¸§çš„ç©ºé—´æ¶ˆè€—\n\n3.3å¿«æ’éé€’å½’å®ç°è¿™éƒ¨åˆ†çš„çŸ¥è¯†å°±æ¯”è¾ƒæ·±å¥¥äº†ï¼Œä½ å¯ä»¥å…ˆçœ‹çœ‹è¿™ç¯‡åšå®¢ï¼Œäº†è§£ä¸€ä¸‹å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆğŸ‘‰ä¼ é€é—¨\n\nä½†ä¸è¦æ‹…å¿ƒï¼Œå…¶å®å®ƒçš„æ€è·¯å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ï¼\n\né¦–å…ˆéœ€è¦å…ˆææ˜ç™½ï¼Œé€’å½’è°ƒç”¨çš„æœ¬è´¨æ˜¯åœ¨æ“ä½œä»€ä¹ˆï¼Ÿ\nåœ¨å¿«æ’ä¸­ï¼Œé€’å½’è°ƒç”¨çš„æœ¬è´¨æ˜¯è®©ç¨‹åºè‡ªå·±æ¥ç¼©å°æ’åºçš„èŒƒå›´ï¼Œå†é€æ­¥æ‰©å¤§\né‚£æˆ‘ä»¬å¯ä¸å¯ä»¥åˆ©ç”¨æ•°æ®ç»“æ„ä¸­çš„æ ˆï¼Œæ¥æ¨¡æ‹Ÿå®ç°ç¨‹åºè¿è¡Œä¸­çš„é€’å½’æ“ä½œå‘¢ï¼Ÿ\n\næ’åºå®Œä¸€è¶Ÿåï¼Œå°†ä¸‹ä¸€è¶Ÿçš„å·¦å³èŒƒå›´å…¥æ ˆ\nç¨‹åºå…ˆè°ƒç”¨å­˜æ”¾åœ¨æ ˆé¡¶çš„å³è¾¹èŒƒå›´è¿›è¡Œæ’åºï¼Œå¹¶æŠŠè¿™ä¸ªèŒƒå›´çš„å·¦å³å°åŒºé—´å†æ¬¡å…¥æ ˆ\næœ€åå³è¾¹çš„åŒºé—´å·²ç»ä¸å¯å†åˆ†ï¼Œå°±å¼€å§‹è¿”å›è°ƒç”¨å·¦è¾¹åŒºé—´\n\nè¿™ä¸ªæ“ä½œå°±çŠ¹å¦‚é“¾å¼äºŒå‰æ ‘çš„ååºéå†ï¼Œå…ˆé€’å½’è®¿é—®å³èŠ‚ç‚¹ï¼Œå†å¾€å›è¿”å›å·¦èŠ‚ç‚¹\næœ€åå¾—åˆ°çš„ç»“æœå°±æ˜¯ç±»ä¼¼é€’å½’è°ƒç”¨å®Œæ¯•åçš„ç»“æœ\n\n\nå¦‚æœä½ è¿˜æ²¡æœ‰å­¦ä¹ æ•°æ®ç»“æ„é‡Œé¢çš„æ ˆï¼Œç‚¹æˆ‘é€Ÿè§ˆï¼\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªéé€’å½’çš„å®ç°ï¼š\n// éé€’å½’void QuickSort4(int* a, int begin, int end){    Stack st;    StackInit(&amp;st);    StackPush(&amp;st, begin);    StackPush(&amp;st, end);    while (!StackEmpty(&amp;st))    {        int right = StackTop(&amp;st);        StackPop(&amp;st);        int left = StackTop(&amp;st);        StackPop(&amp;st);        int keyi = PartSort3(a, left, right);        // [left,keyi-1][keyi+1ï¼Œright]        if (left &lt; keyi-1)        {            StackPush(&amp;st, left);            StackPush(&amp;st, keyi-1);        }        if (keyi + 1 &lt; right)        {            StackPush(&amp;st, keyi+1);            StackPush(&amp;st, right);        }    }    StackDestory(&amp;st);}\n\næ³¨æ„ï¼šå› ä¸ºè¿™é‡Œéœ€è¦å¾—åˆ°ä¸€è¶Ÿé€’å½’è°ƒç”¨åè¿”å›çš„keyiï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠä¹‹å‰å†™çš„ä¸€è¶Ÿå¿«æ’å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå¹¶è®¾ç½®è¿”å›å€¼\n\næ¥è°ƒç”¨ä¸€ä¸‹è¯•è¯•ï¼ŒæˆåŠŸäº†ï¼\n\n\n4.å½’å¹¶æ’åºåŸºæœ¬æ€æƒ³ï¼šé‡‡ç”¨åˆ†æ²»é€’å½’ï¼Œå°†å·²æœ‰çš„å­åºåˆ—åˆå¹¶ï¼Œå¾—åˆ°ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚å³å…ˆä½¿æ¯ä¸ªå­åºåˆ—æœ‰åºï¼Œå†ä½¿å­åºåˆ—æ®µé—´æœ‰åº\n\nè‹¥å°†ä¸¤ä¸ªæœ‰åºè¡¨åˆå¹¶æˆä¸€ä¸ªæœ‰åºè¡¨ï¼Œç§°ä¸ºäºŒè·¯å½’å¹¶\n\nå®ç°çš„æ­¥éª¤å¦‚ä¸‹å›¾\n\n\nå…ˆå°†åŒºé—´é€šè¿‡é€’å½’åˆ†å‰²æˆåˆ†æ²»æœ«ç«¯ï¼ˆåªæœ‰ä¸€ä¸ªå€¼ï¼‰\nå†å¯¹ç›¸é‚»ä¸¤ä¸ªåŒºé—´è¿›è¡Œæ¯”è¾ƒï¼Œå¼€è¾Ÿä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä¾æ¬¡å°†ä¸¤ä¸ªåŒºé—´ä¸­å°çš„é‚£ä¸ªæŒ‰é¡ºåºæ‘†æ”¾åœ¨æ–°çš„æ•°ç»„ä¸­ï¼Œå†æ‹·è´å›åŸæ•°ç»„ï¼Œå°±å®ç°äº†å½’å¹¶\nå½“åŒºé—´ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œå¼€å§‹è¿”å›é€’å½’ï¼Œç›´åˆ°åºåˆ—æœ‰åº\n\n4.1æ‰“å°printfè°ƒè¯•å¤§æ³•è¿™é‡Œæœ€éœ€è¦æ³¨æ„çš„å°±æ˜¯åˆ†æ²»çš„åºåˆ—åŒºé—´é—®é¢˜ï¼Œå¦‚æœä»£ç ä¸å¯¹ï¼Œå°±å¾ˆå®¹æ˜“å½¢æˆè¶Šç•Œè®¿é—®ï¼\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡printfè°ƒè¯•å¤§æ³•æ¥å®ç°ï¼Œæ‰“å°å‡ºæ¯ä¸€å±‚é€’å½’æ—¶çš„åŒºé—´ï¼Œå°±èƒ½å‘ç°å¯èƒ½å­˜åœ¨çš„è¶Šç•Œè®¿é—®é—®é¢˜ã€‚è¿™ç§æ–¹æ³•è¿˜èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£åˆ†æ²»é€’å½’\nprintf(\"[%d,%d][%d,%d]\\n\", begin, mid, mid+1, end);\n\n\n\nå¦‚æœä½ åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œå‘ç°ä¸Šå›¾è¿™æ ·æ§åˆ¶å°çš„å…‰æ ‡é—ªåŠ¨äº†å¾ˆä¹…éƒ½æ²¡æœ‰æ‰“å°å‡ºæ•°æ®ï¼Œé‚£ä¹ˆå¤šåŠæ˜¯ç¨‹åºä¸­æœ‰æ­»å¾ªç¯å’Œbug\n\n\næ¯”å¦‚ç°åœ¨ï¼Œæˆ‘ä»¬åˆæ­¥æŸ¥çœ‹é€’å½’è°ƒç”¨ä¸­æ˜¯æ²¡æœ‰å‡ºç°è¶Šç•Œçš„ï¼Œä½†æ˜¯ç­”æ¡ˆé”™è¯¯ï¼Œè¿›ä¸€æ­¥è°ƒè¯•å‘ç°ï¼Œtmpæ•°ç»„ä¸­æœ‰åºæ•°å­—ï¼Œå¹¶æ²¡æœ‰è¢«æˆ‘ä»¬å®Œæ•´çš„æ‹·è´å›å»\nåŸæœ¬æ˜¯2 5æ‹·è´å›å»å˜æˆäº†2 2ï¼Œè¿™ä¸ªé—®é¢˜çš„æ ¹æºå¾ˆæ˜æ˜¾æ˜¯memcpyå‡½æ•°è°ƒç”¨æœ‰é—®é¢˜\n\nä¸€çœ‹ï¼Œå“­ç¬‘ä¸å¾—ï¼Œå†™äº†ä¿©sizeofï¼Œé­”æ€”äº†å±äºæ˜¯\n\nä¿®æ”¹ä¹‹åï¼Œæ²¡é—®é¢˜å•¦ï¼\n\n\n4.2é€’å½’æºç è¿™é‡Œç»™å‡ºæœ€ç»ˆçš„æºç ï¼Œä¸€äº›åœ°æ–¹å†™äº†æ³¨é‡Š\n//_ä»£è¡¨è¿™æ˜¯å­å‡½æ•°void _MergeSort(int* a,int* tmp, int begin, int end){    if (begin &gt;= end){        return;    }    int mid = (begin + end) / 2;    _MergeSort(a, tmp, begin, mid);    _MergeSort(a, tmp, mid+1 , end);    //printf(\"å½’å¹¶[%d,%d][%d,%d]\\n\", begin, mid, mid+1, end);    int begin1 = begin, end1 = mid ;    int begin2 = mid+1 , end2 = end;    int cur = begin;    while (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2)    {        //å–å°çš„æ”¾åˆ°æ–°æ•°ç»„ä¸­        if (a[begin1] &lt; a[begin2]) {            tmp[cur++] = a[begin1++];        }        else {            tmp[cur++] = a[begin2++];        }    }    //ç¬¬ä¸€ä¸ªå¾ªç¯ç»“æŸï¼Œå¹¶ä¸ä»£è¡¨å½’å¹¶å®Œæ¯•ï¼Œå¯èƒ½åªæœ‰ä¸€ä¸ªæ•°ç»„çš„æ•°æ®è·‘å®Œäº†    //æˆ‘ä»¬éœ€è¦å°†å¦å¤–ä¸€ä¸ªæ•°ç»„çš„æ•°æ®å…¨éƒ¨æ‹·è´åˆ°tmpä¸­ï¼ˆå› ä¸ºå‰©ä¸‹çš„çš„æ•°æ®å·²ç»æœ‰åºï¼‰    while (begin1 &lt;= end1) {        tmp[cur++] = a[begin1++];    }    while (begin2 &lt;= end2) {        tmp[cur++] = a[begin2++];    }    memcpy(a+begin,tmp + begin, ((end - begin +1)*sizeof(int)));}//å½’å¹¶æ’åºvoid MergeSort(int* a, int n){    int* tmp = (int*)malloc(n * sizeof(int));    if(tmp==NULL){        printf(\"malloc failed\\n\");        exit(0);    }    _MergeSort(a, tmp, 0, n-1);    free(tmp);    tmp = NULL;    return;}\n\n4.3éé€’å½’å®ç°å½’å¹¶æ’åºçš„éé€’å½’æ— æ³•ç”¨æ ˆæ¥å®ç°ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½æŠŠä¹‹å‰çš„å¤§åŒºé—´å…¨ç»™å‡ºæ ˆäº†ï¼Œå› ä¸ºè¿™äº›åŒºåŸŸè¿˜éœ€è¦åœ¨æœ€åé‡æ–°è¿›è¡Œå½’å¹¶ï¼\n\nåˆ©ç”¨å¾ªç¯æ¥æ§åˆ¶ä¸åŒçš„åŒºé—´ï¼Œç”±å°åˆ°å¤§ï¼Œç›´åˆ°gap=nè·³å‡ºå¾ªç¯\ngapæ˜¯å½’å¹¶æ•°æ®çš„ä¸ªæ•°ï¼Œgap=1ä»£è¡¨1ä¸ªæ•°å½’å¹¶ï¼Œgap=2ä»£è¡¨ä¸¤ä¸¤å½’å¹¶\n\n\næ ¹æ®ä¸Šé¢çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„èŒƒå›´å¾ªç¯\nint gap = 1;while (gap &lt; n){    // é—´è·ä¸ºgapæ˜¯ä¸€ç»„ï¼Œä¸¤ä¸¤å½’å¹¶    for (int i = 0; i &lt; n; i += 2 * gap)    {        int begin1 = i, end1 = i + gap - 1;        //i+gapæ˜¯ä¸ªæ•°ï¼Œå†-1æ˜¯ä¸‹æ ‡        int begin2 = i + gap, end2 = i + 2 * gap - 1;        //i+gapåˆ°i+2gapæ˜¯ä¸ªæ•°ï¼Œå†-1æ˜¯ä¸‹æ ‡        //æ‰“å°è°ƒè¯•å¤§æ³•        printf(\"å½’å¹¶[%d,%d][%d,%d] -- gap=%d\\n\", begin1, end1, begin2, end2, gap);    }    gap *= 2;}\n\nè·‘ä¸€éä¹‹å‰çš„æµ‹è¯•ç”¨ä¾‹ï¼Œå‘ç°èƒ½æå®šï¼è¿™ä¸å°±å®Œäº‹äº†å—ï¼Ÿ\n\nå¹¶æ²¡æœ‰ï¼è¿™é‡Œgapçš„æ“ä½œéƒ½æ˜¯*2ï¼Œè€Œä¸”æˆ‘ä»¬ç»™çš„æ•°ç»„æ˜¯å¶æ•°ä¸ªï¼Œæ­£å¥½å¯¹çš„ä¸Š\nå¦‚æœæˆ‘ä»¬å†åŠ ä¸€ä¸ªæ•°å‘¢ï¼Ÿç¨‹åºæ‰“å°å‡ºäº†æ¯ä¸€å±‚çš„é€’å½’åŒºé—´ï¼Œä½†æ˜¯æ²¡æœ‰æ‰“å°å‡ºæœ€ç»ˆçš„ç»“æœâ€”â€”å› ä¸ºè¿™é‡Œåœ¨æœ€åfreeçš„æ—¶å€™å‘ç°äº†æ•°ç»„è¶Šç•Œè®¿é—®\n\nå°çŸ¥è¯†ï¼Œæ•°ç»„è¶Šç•Œä¸€èˆ¬éƒ½æ˜¯åœ¨freeçš„æ—¶å€™æ£€æŸ¥åˆ°çš„\n\n\n\n\næ¥ä¸‹æ¥è¦åšçš„äº‹å°±æ˜¯æ§åˆ¶ä¸‹æ ‡åŒºé—´ï¼Œé¿å…å®ƒè¶Šç•Œ\nint begin1 = i, end1 = i + gap - 1;int begin2 = i + gap, end2 = i + 2 * gap - 1;\n\n\n\n\nbegin\nend\n\n\n\ni\ni+gap-1\n\n\ni+gap\ni+2*gap-1\n\n\nä»”ç»†åˆ†æè¿‡åï¼Œå‘ç°å½“gap=2,i=8çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°+gapä¹‹åè¶Šç•Œçš„æƒ…å†µ\n\nè€Œä¼šå‡ºç°è¶Šç•Œæƒ…å†µçš„ï¼Œä¸æ­¢æœ‰end2ï¼Œend1å’Œbegin2éƒ½å¯èƒ½ä¼šå‡ºç°\næˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠè¶Šç•Œçš„ä¸‹æ ‡ä¿®æ­£ä¸ºä¸è¶Šç•Œçš„ä¸‹æ ‡\n\nend1è¶Šç•Œï¼Œä¿®æ­£ä¸ºä¸è¶Šç•Œå³å¯\nbegin2å’Œend2éƒ½è¶Šç•Œï¼Œä¿®æ­£ä¸ºéæ³•åŒºé—´begin2&gt;end2\nbegin2ä¸è¶Šç•Œï¼Œend2è¶Šç•Œï¼Œä¿®æ­£end2å³å¯\n\nä¿®æ­£ä¸‹æ ‡åï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºå·²ç»æ­£å¸¸æ’åºå‡ºäº†åºåˆ—\nè™½ç„¶æ‰“å°å‡ºæ¥çš„èŒƒå›´è¿˜æ˜¯æœ‰è¶Šç•Œçš„ä¸‹æ ‡ï¼Œä½†æ˜¯è¿™ä¸ªæ˜¯begin&gt;endçš„éæ³•åŒºé—´ï¼Œä¸ç¬¦åˆç¨‹åºè¿è¡Œçš„æ¡ä»¶ï¼Œå°±ä¸ä¼šäº§ç”Ÿè¶Šç•Œ\n\n4.3.1 æ¡ä»¶æ–­ç‚¹è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéªšæ“ä½œï¼Œæ¯”å¦‚æˆ‘ä»¬å·²ç»çŸ¥é“äº†æ˜¯8-9çš„ä¸‹æ ‡è¶Šç•Œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼Œæ¥ç›´æ¥F5è·³åˆ°é‚£ä¸ªæƒ…å†µï¼Œè€Œä¸éœ€è¦ç–¯ç‹‚æŒ‰F10\n// æ¡ä»¶æ–­ç‚¹ï¼Œç”¨äºè°ƒè¯•if (begin1 == 8 &amp;&amp; end1 == 9 &amp;&amp; begin2 == 10 &amp;&amp; end2 == 11){    int x = 0;}\n\n4.3.2 éé€’å½’å®ç°ä»£ç è¿™æ ·æˆ‘ä»¬çš„éé€’å½’å®ç°ä¹Ÿæå®šå•¦ï¼\n//éé€’å½’void MergeSortNonR(int* a, int n){    int* tmp = (int*)malloc(sizeof(int) * n);    int gap = 1;    while (gap &lt; n)    {        // é—´è·ä¸ºgapæ˜¯ä¸€ç»„ï¼Œä¸¤ä¸¤å½’å¹¶        for (int i = 0; i &lt; n; i += 2 * gap)        {            int begin1 = i, end1 = i + gap - 1;//i+gapæ˜¯ä¸ªæ•°ï¼Œ-1æ˜¯ä¸‹æ ‡            int begin2 = i + gap, end2 = i + 2 * gap - 1;//i+gapåˆ°i+2gapæ˜¯ä¸ªæ•°ï¼Œ-1æ˜¯ä¸‹æ ‡            if (end1 &gt;= n) {                end1 = n - 1;            }            if(begin2&gt;=n){                begin2 = n;                end2 = n - 1;            }            if (begin2 &lt; n &amp;&amp; end2 &gt;= n) {                end2 = n - 1;            }            //printf(\"å½’å¹¶[%d,%d][%d,%d] -- gap=%d\\n\", begin1, end1, begin2, end2, gap);            int index = i;            while (begin1 &lt;= end1 &amp;&amp; begin2 &lt;= end2)            {                if (a[begin1] &lt; a[begin2])                    tmp[index++] = a[begin1++];                else                    tmp[index++] = a[begin2++];            }            while (begin1 &lt;= end1)                tmp[index++] = a[begin1++];            while (begin2 &lt;= end2)                tmp[index++] = a[begin2++];        }        memcpy(a, tmp, n * sizeof(int));        gap *= 2;    }    free(tmp);}\n\n4.4å½’å¹¶æ’åºçš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦\næ—¶é—´å¤æ‚åº¦ï¼šO(N*logN)\nç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œåˆ›å»ºæ•°ç»„çš„æ¶ˆè€—\n\n\n5.è®¡æ•°æ’åºè®¡æ•°æ’åºçš„åŸºæœ¬æ€è·¯ï¼šåˆ©ç”¨æ•°ç»„çš„ä¸‹æ ‡ä½œä¸ºæ˜ å°„ï¼Œéå†åˆ°xï¼Œåœ¨æ•°ç»„çš„xä¸‹æ ‡å¤„++ä¸€æ¬¡ã€‚æœ€åå†ä¾ç…§ä¸‹æ ‡é¡ºåºå°†ä¹‹å‰éå†åˆ°çš„æ•°å€’å‡ºæ¥ï¼Œå°±å½¢æˆäº†æ­£åºåºåˆ—ã€‚\næˆ‘åœ¨ç½‘ä¸Šæ‰¾æ¥äº†ä¸€ä¸ªå¾ˆæ£’çš„åŠ¨å›¾ï¼ˆè¿™ä¸ªå¥½åƒåœ¨å¾ˆå¤šåšå®¢é‡Œé¢éƒ½æœ‰ğŸ˜‚ï¼‰\n\n\nè¿™ä¸ªæ’åºçš„æ€è·¯å°±ä¸éš¾äº†ï¼Œä½†æœ‰ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹\n\nå‡è®¾æˆ‘ä»¬çš„åºåˆ—æ˜¯ä»300å¼€å§‹ï¼Œè€Œä¸æ˜¯ä»0å¼€å§‹ï¼Œé‚£ä¹ˆå¼€è¾Ÿä¸€ä¸ª301ä¸ªæ•°çš„æ•°ç»„æ˜¾ç„¶ä¼šæµªè´¹300ä¹‹å‰çš„ä¸‹æ ‡ï¼ˆå› ä¸ºå¹¶æ²¡æœ‰å€¼ï¼‰\nè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æ‰¾å‡ºæ•°ç»„çš„èŒƒå›´ï¼Œå¼€è¾Ÿä¸€ä¸ªå¯¹åº”èŒƒå›´é•¿åº¦çš„æ•°ç»„ï¼Œå†åˆ©ç”¨ç›¸å¯¹æ˜ å°„çš„æ–¹å¼ï¼Œæ¥è¿›è¡Œè®¡æ•°\n\næœ€åçš„ä»£ç å¦‚ä¸‹\nvoid CountSort(int* a, int n){    int min = a[0], max = a[0];    for (int i = 1; i &lt; n; ++i)    {        if (a[i] &lt; min)            min = a[i];        if (a[i] &gt; max)            max = a[i];    }    int range = max - min + 1;    int* count = (int*)malloc(sizeof(int) * range);    assert(count);    memset(count, 0, sizeof(int) * range);    // è®¡æ•°    for (int i = 0; i &lt; n; ++i)    {        count[a[i] - min]++;    }    // æ’åº    int j = 0;    for (int i = 0; i &lt; range; ++i)    {        while (count[i]--)        {            a[j++] = i + min;        }    }}\n\n5.1è®¡æ•°æ’åºçš„ç‰¹æ€§\næ—¶é—´å¤æ‚åº¦ï¼šO(range+N)\nç©ºé—´å¤æ‚åº¦ï¼šO(range)\n\nè®¡æ•°æ’åºé€‚ç”¨äºèŒƒå›´é›†ä¸­çš„æ•°ï¼Œä¸ç„¶ä¼šäº§ç”Ÿå¾ˆå¤§çš„ç©ºé—´æµªè´¹\nè®¡æ•°æ’åºå¯ä»¥æ’åºå¸¦è´Ÿæ•°çš„åºåˆ—ï¼ŒåŒæ ·æ˜¯é€šè¿‡æ˜ å°„çš„æ–¹å¼\nä½†æ˜¯è®¡æ•°æ’åºåªèƒ½æ’åºæ•´å‹æ•°æ®ï¼Œæµ®ç‚¹ç±»å‹æ˜¯æä¸å®šçš„\n\nçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å…«å¤§æ’åºå°±å·²ç»è®²è§£å®Œæ¯•å•¦ï¼\nä¸çŸ¥é“æˆ‘è®²è§£çš„å¤Ÿä¸å¤Ÿæ¸…æ¥šå‘¢ï¼Ÿ\n\nä¸‹é¢è¿˜æœ‰ä¸€ä¸ªå°ç‚¹ï¼Œå°±æ˜¯å…³äºæ’åºç®—æ³•çš„ç¨³å®šæ€§\n6.æ’åºç®—æ³•çš„ç¨³å®šæ€§ä¼°è®¡å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·ï¼Œéƒ½å¯¹è¿™ä¸ªâ€œç¨³å®šæ€§â€æœ‰é”™è¯¯çš„ç†è§£\næˆ‘æœ¬æ¥ä»¥ä¸ºï¼Œç¨³å®šæ€§ä»£è¡¨çš„æ˜¯æ’åºç®—æ³•çš„æ—¶é—´æ³¢åŠ¨å¤§ä¸å¤§\nå®é™…ä¸Šçš„ç¨³å®šæ€§ï¼Œæ˜¯ç®—æ³•å¯¹äºæŸä¸€ä¸ªæ•°çš„å¤„ç†å¥½ä¸å¥½ï¼›\næ¯”å¦‚ä¸‹å›¾ï¼Œå‡è®¾å¤§å®¶åœ¨è€ƒè¯•ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯äº¤å·çš„é¡ºåºï¼Œæˆ‘ä»¬å‘ç°ç‹èˆå’Œæå››çš„æˆç»©ç›¸åŒï¼Œä½†æ˜¯æå››å…ˆäº¤çš„å·ã€‚å¯¹äºè¯„åˆ¤æ¥è¯´ï¼Œå½“ç„¶æ˜¯å…ˆäº¤å·ä¸”åˆ†é«˜çš„åŒå­¦ç‰›é€¼ä¸€ç‚¹\næ‰€ä»¥ä¾ç…§åˆ†æ•°æ’åºçš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠæå››æ’åœ¨ç‹èˆä¹‹å‰ï¼ˆå³ç›¸åŒçš„æ•°æ®åœ¨æ’åºå‰åçš„ä½ç½®ä¸è¢«æ”¹å˜ï¼‰\n \nä½†æœ‰äº›ç®—æ³•åœ¨æ’åºçš„æ—¶å€™ï¼Œå°±åšä¸åˆ°è¿™ä¸€ç‚¹\nè¿™é‡Œå¯¹ç›´æ¥é€‰æ‹©æ’åºåšä¸€ä¸ªç®€å•çš„è§£é‡Š\n\nå› ä¸ºä¸¤ä¸ª3çš„ä½ç½®è°ƒæ¢ï¼Œå°±å¯¼è‡´æ’åºä¸å¤Ÿç¨³å®š\nå®é™…ä¸Šï¼Œæ‰€æœ‰éœ€è¦è¿›è¡Œé€‰æ‹©äº¤æ¢çš„æ’åºéƒ½ä¸å¤Ÿç¨³å®š\n\nä½†æ˜¯å†’æ³¡æ’åºåœ¨äº¤æ¢çš„æ—¶å€™æ˜¯ä¸¥æ ¼ä¿è¯å¤§çš„æ•°åœ¨åå¤´ï¼Œç›¸ç­‰çš„æ•°ä¸äº¤æ¢çš„æ€è·¯ï¼Œæ‰€ä»¥å†’æ³¡æ’åºæ˜¯ç¨³å®šçš„\n\n6.1 ç¨³å®šæ€§è¡¨æ ¼\n\n\næ’åºç®—æ³•\nç¨³å®šæ€§\næ’åºç®—æ³•\nç¨³å®šæ€§\n\n\n\nç›´æ¥æ’å…¥\nç¨³å®š\nå¸Œå°”\nä¸ç¨³å®š\n\n\nå†’æ³¡\nç¨³å®š\nç›´æ¥é€‰æ‹©\nä¸ç¨³å®š\n\n\nå½’å¹¶æ’åº\nç¨³å®š\nå †æ’åº\nä¸ç¨³å®š\n\n\n-\n-\nå¿«é€Ÿæ’åº\nä¸ç¨³å®š\n\n\n-\n-\nè®¡æ•°æ’åº\nä¸ç¨³å®š\n\n\n6.2 æ—¶é—´å¤æ‚åº¦è¡¨æ ¼\n7.åˆ©ç”¨clockå‡½æ•°æŸ¥çœ‹æ’åºè€—æ—¶æ’åºç®—æ³•å†™å®Œåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨clockå‡½æ•°æ¥æŸ¥çœ‹æ¯ä¸€ä¸ªæ’åºçš„è€—æ—¶\nå…ˆåˆ©ç”¨srandå’Œtimeå‡½æ•°æ¥åˆ›å»ºéšæœºæ•°æ•°ç»„ï¼Œåœ¨è°ƒç”¨æ¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æŸ¥çœ‹å®ƒä»¬æ’åºçš„è€—æ—¶\n\nç”±äºä»£ç è¿‡é•¿ï¼Œè¿™é‡Œåªç»™å‡ºæŸä¸€ä¸ªæ’åºçš„è®¡æ—¶ä»£ç ï¼Œå…¶ä»–å°±CVä¸€ä¸‹å°±OKäº†\nsrand(time(0));const int N = 10000;int* a1 = (int*)malloc(sizeof(int) * N);for (int i = 0; i &lt; N; ++i){    a1[i] = rand();//ç”Ÿæˆéšæœºæ•° æ•°ç»„}int begin1 = clock();//è¯»å–ç³»ç»Ÿæ—¶é’ŸInsertSort(a1, N);int end1 = clock();//å†è¯»å–ç³»ç»Ÿæ—¶é’Ÿ//äºŒè€…ç›¸å‡å¾—å‡ºè¯¥å‡½æ•°è¿è¡Œæ—¶é•¿printf(\"InsertSort:%d\\n\", end1 - begin1);free(a1);\n\nè¿è¡Œç»“æœï¼š\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œæ’åºçš„ç»å¤§æ•°çŸ¥è¯†ç‚¹å°±è®²è§£å®Œæ¯•å•¦ï¼\næœ¬ç¯‡åšå®¢ç”»äº†å¾ˆå¤šå›¾ï¼Œè¿˜æŒºä¸å®¹æ˜“çš„ï¼Œè¿˜è¯·å¤§å®¶ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼\n\nç‰¹åˆ«æ˜¯é‚£ä¸¤ä¸ªçœ‹èµ·æ¥å¾ˆç®€å•çš„åŠ¨å›¾ï¼Œå®é™…ä¸Šéº»çƒ¦çš„å¾ˆ\n\nçƒçƒäº†ï¼Œç‚¹ä¸ªèµå‘ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","ç®—æ³•","æ’åº","æ•°æ®ç»“æ„"]},{"title":"ã€ç®—æ³•ã€‘Cç¨‹åºçš„è¿è¡Œé€Ÿåº¦æµ‹è¯•","url":"/posts/263649714/","content":"Cè¯­è¨€ç¨‹åºçš„è¿è¡Œé€Ÿåº¦æµ‹è¯•\n\n\nä»£ç éšæƒ³å½•ä¸Šæåˆ°äº†ä¸€ç‚¹ï¼Œå³æˆ‘ä»¬åº”è¯¥å­¦ä¼šä¼°è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦è¾ƒé«˜çš„ç®—æ³•ï¼Œåœ¨æœºå™¨ä¸Šçš„è¿è¡Œé€Ÿåº¦ã€‚\n\nå¦‚æœé¢˜ç›®ç»™å‡ºçš„æ•°æ®é‡çº§åœ¨é«˜å¤æ‚åº¦çš„ç®—æ³•ä¸­ä¼šè¶…æ—¶ï¼Œé‚£å°±åº”è¯¥æ”¾å¼ƒä½¿ç”¨è¿™ä¸ªä»£ç ï¼Œè€Œæƒ³å…¶ä»–æ—¶é—´å¤æ‚åº¦æ›´ä¼˜çš„è§£æ³•ï¼›\nè¿™æ ·èƒ½é¿å…åœ¨åˆ·é¢˜çš„æ—¶å€™ï¼Œå›¾ç®€å•å†™äº†ä¸ªæš´åŠ›å†™æ³•å´å‘ç°è¶…æ—¶ä¸è¿‡çš„å°´å°¬ï¼ˆæ²¡é”™è¯´çš„å°±æ˜¯æˆ‘è‡ªå·±ï¼‰\n\nå¤§éƒ¨åˆ†OJé¢˜ç›®ï¼Œå¯¹C/C++ä»£ç çš„æ—¶é—´é™åˆ¶éƒ½æ˜¯1sã€‚æ‰€ä»¥æˆ‘ä»¬æµ‹è¯•çš„ç›®æ ‡ä¹Ÿå°†æ”¾åœ¨1sä¸Šã€‚\n\n1.ä»£ç \næ¥æºï¼šhttp://www.360doc.com/content/23/0119/15/2690044_1064211133.shtml\næˆ‘çš„Gitï¼šGitee\n\n1.1 å¾ªç¯é¦–å…ˆæ˜¯func.hï¼Œå†…éƒ¨åŒ…å«äº†ä¸‰ä¸ªå¾ªç¯å‡½æ•°ï¼Œæ—¶é—´å¤æ‚åº¦åˆ†åˆ«ä¸ºO(N) O(N^2) O(NlogN)\n//func.h#include &lt;stdio.h&gt;// O(N)void func1(long long n){    printf(\"å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š%lld\\n\",n);    long long k=0;    for(long long i=0;i&lt;n;i++)    {        k++;    }}// O(N^2)void func2(long long n){    printf(\"å¼€å§‹æ‰§è¡ŒO(N^2)çš„å‡½æ•°ï¼š%lld\\n\",n);    long long k=0;    for(long long i=0;i&lt;n;i++)    {        for(long long j=0;j&lt;n;j++)        {            k++;        }    }}// O(NlogN)void func3(long long n){    printf(\"å¼€å§‹æ‰§è¡ŒO(NlogN)çš„å‡½æ•°ï¼š%lld\\n\",n);    long long k=0;    for(long long i=0;i&lt;n;i++)    {        // jè¦ä»1å¼€å§‹        for(long long j=1;j&lt;n;j*=2)        {            k++;        }    }}\n\n1.2 è·å–æ¯«ç§’çº§æ—¶é—´æˆ³éšåæ˜¯ä¸»æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ—¶é—´çš„æµ‹è¯•ï¼Œæ‰€ä»¥å¾—æƒ³åŠæ³•è·å–åˆ°æ¯«ç§’çº§çš„æ—¶é—´æˆ³ã€‚\ntime.hä¸­çš„timeå‡½æ•°åªèƒ½å¤Ÿè¿”å›ç§’çº§æ—¶é—´æˆ³ï¼Œå¯¹äºä»£ç çš„æ—¶é—´æµ‹è¯•æ¥è¯´æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬éœ€è¦å€ŸåŠ©Windowså’ŒLinuxçš„ç³»ç»Ÿå‡½æ•°ï¼Œè·å–åˆ°æ¯«ç§’çº§æ—¶é—´æˆ³\n#define _CRT_SECURE_NO_WARNINGS 1#include &lt;stdint.h&gt;#include &lt;stdio.h&gt;// http://www.360doc.com/content/23/0119/15/2690044_1064211133.shtml// å®ç¼–è¯‘ï¼Œåˆ†åˆ«ä½¿ç”¨windowså’Œlinuxçš„ç³»ç»Ÿå‡½æ•° #ifdef _WIN32    #include&lt;time.h&gt;    #include&lt;windows.h&gt;#else    #include &lt;sys/time.h&gt;    #include &lt;unistd.h&gt;#endif// è·å–å½“å‰æ¯«ç§’çº§æ—¶é—´ï¼Œç»™ä¸€ä¸ªcharæŒ‡é’ˆï¼Œåˆ™æ‰“å°åˆ°å…¶ä¸­ï¼ˆå­—ç¬¦ä¸²ï¼‰// åä¸‰ä½ä¸ºæ¯«ç§’uint64_t GetCurrentTimerMS(char* szTimer){    uint64_t nTimer = 0;#ifdef _WIN32\tSYSTEMTIME currentTime;\tGetLocalTime(&amp;currentTime);\tstruct tm temptm = { currentTime.wSecond,\t\tcurrentTime.wMinute,\t\tcurrentTime.wHour,\t\tcurrentTime.wDay,\t\tcurrentTime.wMonth - 1,\t\tcurrentTime.wYear - 1900\t};\tnTimer =  mktime(&amp;temptm) * 1000 + currentTime.wMilliseconds;#else\tstruct timeval tv;\tgettimeofday(&amp;tv,NULL);\t// printf(\"second:%ld\\n\",tv.tv_sec);  //ç§’\tnTimer = tv.tv_sec*1000 + tv.tv_usec/1000;#endif    if(szTimer != NULL)        sprintf(szTimer, \"%llu\", nTimer);    return nTimer;}// æµ‹è¯•æ—¶é—´å‡½æ•°int test_def(){\tchar szTimer[64];\tuint64_t nTimer=-1;\tGetCurrentTimerMS(szTimer);\t//å¸¦å‚æ•°ï¼Œå­—ç¬¦ä¸²\tnTimer = GetCurrentTimerMS(NULL); //ä¸å¸¦å‚æ•°\tprintf(\"millisecond1:%s\\nmillisecond2:%llu\\n\",szTimer,nTimer );  //æ¯«ç§’\treturn 0;}\n\n1.3 è·å–æ—¶é—´æˆ³æµ‹è¯•å…ˆæ¥æ‰§è¡Œä¸€ä¸‹è¿™ä¸ªæµ‹è¯•å‡½æ•°test_defï¼Œç»“æœå¦‚ä¸‹\n$ gcc test.c -o test$ ./testmillisecond1:1681878963361millisecond2:1681878963361\n\næˆåŠŸæ‰“å°å‡ºäº†æ¯«ç§’çº§çš„æ—¶é—´æˆ³ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²ç±»å‹å’Œuint64_té•¿æ•´å‹\n#ifdef _WIN32    #include &lt;time.h&gt;    #include&lt;windows.h&gt;#else    #include &lt;sys/time.h&gt;    #include &lt;unistd.h&gt;#endif\n\nè¿™é‡Œè¿˜é‡‡ç”¨äº†å®å®šä¹‰ï¼Œè‡ªåŠ¨åˆ¤æ–­windowsè¿˜æ˜¯linuxï¼Œè°ƒç”¨å„è‡ªçš„ç³»ç»Ÿæ¥å£å‡½æ•°ã€‚\nå¦‚ä¸‹å›¾ï¼Œåœ¨Windowsä¸‹çš„Vs2019ä¹ŸæˆåŠŸæ‰§è¡Œè¿™ä¸ªå‡½æ•°\n\n2.å¼€å§‹æµ‹è¯•è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹linuxä¸‹çš„cpuå‹å·\n$ cat /proc/cpuinfo | grep 'model name' |uniqmodel name      : Intel(R) Celeron(R) N5105 @ 2.00GHz\n\n2.1 ç¤ºä¾‹å…ˆæµ‹è¯•O(N)ç®—æ³•åœ¨ä½•ç­‰æ•°é‡çº§æ—¶ä¼šè¶…è¿‡1s\n$ ./testè¯·é”®å…¥nï¼š500000000start_time: 1681880952986å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š500000000end_time:   1681880954073diff:       1087msstart_time: 1681880963999å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š450000000end_time:   1681880964993diff:       994msè¯·é”®å…¥nï¼š460000000start_time: 1681881111806å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š460000000end_time:   1681881112804diff:       998msè¯·é”®å…¥nï¼š470000000start_time: 1681881117572å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š470000000end_time:   1681881118604diff:       1032msè¯·é”®å…¥nï¼š400000000start_time: 1681880967163å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š400000000end_time:   1681880968043diff:       880msè¯·é”®å…¥nï¼š550000000start_time: 1681880970538å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š550000000end_time:   1681880971736diff:       1198ms\n\nå¦‚ä¸Šï¼Œæ˜¯æˆ‘çš„linuxæœåŠ¡å™¨çš„æµ‹è¯•ç»“æœã€‚\næ•°é‡çº§å¤§æ¦‚åœ¨460000000çš„æ—¶å€™ï¼Œå°±ä¼šè¾¾åˆ°998msï¼Œä¹Ÿå°±æ˜¯å°†è¿‘1s\næ‰€ä»¥ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°Ojçš„æµ‹è¯•ç”¨é‡è¶…è¿‡4500000000æ•°é‡çº§çš„æ—¶å€™ï¼Œå°±åº”è¯¥æ”¾å¼ƒO(N)ç®—æ³•ï¼\n\nè€Œåœ¨windowsä¸‹ï¼Œæˆ‘çš„R7 5800Hç¬”è®°æœ¬ï¼Œè¿è¡Œåˆ°700000000æ•°é‡çº§çš„æ—¶å€™ï¼Œæ‰éœ€è¦1s\nè¯·é”®å…¥nï¼š500000000start_time: 1681881322528å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š500000000end_time:   1681881323236diff:       708msè¯·é”®å…¥nï¼š1000000000start_time: 1681881327548å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š1000000000end_time:   1681881328965diff:       1417msè¯·é”®å…¥nï¼š600000000start_time: 1681881332928å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š600000000end_time:   1681881333792diff:       864msè¯·é”®å…¥nï¼š800000000start_time: 1681881337404å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š800000000end_time:   1681881338537diff:       1133msè¯·é”®å…¥nï¼š700000000start_time: 1681881341486å¼€å§‹æ‰§è¡ŒO(N)çš„å‡½æ•°ï¼š700000000end_time:   1681881342486diff:       1000ms\n\n2.2 ç»“æœæŒ‰å¦‚ä¸ŠåŠæ³•æµ‹è¯•ï¼Œæˆ‘åˆ†åˆ«æµ‹è¯•äº†ä¸‰ç§æ—¶é—´å¤æ‚åº¦åœ¨å¤šä¸ªå¹³å°ä¸Šçš„ç»“æœã€‚ç¨å¾®äº†è§£è¿™äº›æ•°å­—ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬åœ¨åˆ¤æ–­é¢˜ç›®é€‰ç”¨ç®—æ³•ä¸Šæä¾›å¸®åŠ©ã€‚\nè¡¨ä¸­E8æ˜¯ç§‘å­¦è®¡æ•°æ³•ï¼Œä»£è¡¨10çš„8æ¬¡æ–¹\n\n\n\nå¹³å°/CPU\næ—¶é—´å¤æ‚åº¦\næ•°é‡çº§\næ—¶é—´(æ¯«ç§’)\n\n\n\nwindows (amd R7-5800H)\nO(N)\n7E9\n1000\n\n\n\nO(N2)\n3E4\n1022\n\n\n\nO(NlogN)\n1.7E7\n996\n\n\nCentos8 (Intel N5105)\nO(N)\n4.5E8\n994\n\n\n\nO(N2)\n2E4\n920\n\n\n\nO(NlogN)\n1.8E7\n966\n\n\nCentos7.2 (Intel Xeon Platinum 8255C)\nO(N)\n5.8E8\n990\n\n\n\nO(N2)\n2.4E4\n976\n\n\n\nO(NlogN)\n2.1E7\n976\n\n\næ•°æ®æµ‹è¯•äº23.04.19\n\næœ¬æ¥è¿˜æƒ³æµ‹æµ‹ç‰›å®¢å’Œleetcodeçš„ï¼Œç»“æœå‘ç°å®ƒä»¬è¿è¡ŒO(N^2)é‡çº§çš„å‡½æ•°ï¼Œéƒ½E7äº†è¿˜æ˜¯å‡ mså°±æå®šäº†ï¼Œæ„Ÿè§‰æµ‹è¯•çš„ç»“æœä¸å‡†ï¼Œæ•…æ”¾å¼ƒğŸ˜‚\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","ç®—æ³•","OJåˆ·é¢˜"]},{"title":"ã€Cè¯­è¨€ã€‘é¡ºåºè¡¨ï¼ˆè¯¦è§£ï¼‰","url":"/posts/1519855244/","content":"[TOC]\nå‰è¨€é¡ºåºè¡¨æ˜¯æˆ‘ä»¬å­¦ä¹ æ•°æ®ç»“æ„ç¬¬ä¸€é˜¶æ®µçš„å¿…ç»ä¹‹è·¯\nä»€ä¹ˆæ˜¯é¡ºåºè¡¨ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥\næœ¬ç¯‡åšå®¢ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼š\n\nåŠ¨æ€å†…å­˜ç®¡ç†\nè‡ªå®šä¹‰ç±»å‹-ç»“æ„ä½“\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\n\n1.ä»€ä¹ˆæ˜¯é¡ºåºè¡¨ï¼Ÿ1.1çº¿æ€§è¡¨çº¿æ€§è¡¨æ˜¯æ•°æ®ç»“æ„çš„ä¸€ç§ï¼Œå®ƒæ˜¯nä¸ªå…·æœ‰ç›¸åŒç‰¹æ€§çš„æ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚ å¸¸è§çš„çº¿æ€§è¡¨ï¼šé¡ºåºè¡¨ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€å­—ç¬¦ä¸²â€¦â€¦\nçº¿æ€§è¡¨åœ¨é€»è¾‘ä¸Šæ˜¯çº¿æ€§ç»“æ„ï¼Œä¹Ÿå°±è¯´æ˜¯è¿ç»­çš„ä¸€æ¡ç›´çº¿ã€‚ä½†æ˜¯åœ¨ç‰©ç†ç»“æ„ä¸Šå¹¶ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œçº¿æ€§è¡¨åœ¨ç‰©ç†å†…å­˜ä¸Šå­˜å‚¨æ—¶ï¼Œé€šå¸¸ä»¥æ•°ç»„å’Œé“¾å¼ç»“æ„çš„å½¢å¼å­˜å‚¨ã€‚\næœ¬ç¯‡åšå®¢æ‰€è®²è¿°çš„é¡ºåºè¡¨ï¼Œå°±æ˜¯ä»¥æ•°ç»„ç»“æ„å­˜å‚¨çš„çº¿æ€§è¡¨\n\n\n2.ç¼–å†™ä½ çš„é¡ºåºè¡¨ï¼ä¸ºäº†ä¿è¯å†™å®Œä¹‹åä¸è¦è¿›å…¥è´¤è€…debugçŠ¶æ€ï¼Œå»ºè®®æ¯ç¼–å†™ä¸€ä¸ªæ¨¡å—ï¼Œå°±åœ¨test.cçš„mainå‡½æ•°ä¸­è¿›è¡Œæµ‹è¯•ï¼Œä¿è¯å½“å‰ç¼–å†™çš„æ¨¡å—æ­£ç¡®åå†è¿›è¡Œä¸‹ä¸€æ­¥ï¼\nä¸ç„¶é—®é¢˜å¤šäº†ï¼Œæ”¹èµ·æ¥å¾ˆå¤´ç–¼çš„ï¼\n\n2.0 èµ›å‰å‡†å¤‡å’Œæˆ‘ä»¬æ—¥å¸¸æ‰€ç”¨çš„æ•°ç»„ä¸åŒï¼Œé¡ºåºè¡¨çš„è¿™ä¸ªç»“æ„ï¼Œä¸»è¦çš„ç»„æˆéƒ¨åˆ†æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼ˆæœ¬ç¯‡åšå®¢ä¸­çš„çº¿æ€§è¡¨ä»¥intä¸ºä¾‹ï¼‰\nstruct SeqList&#123;\tint* a;\tint size;     // å­˜å‚¨æ•°æ®ä¸ªæ•°\tint capacity; // å­˜å‚¨ç©ºé—´å¤§å°&#125;;\n\nä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨typedefå¯¹ç¬¦å·è¿›è¡Œé‡å®šä¹‰\ntypedef int SLDataType;//å’Œæ™®é€šçš„æ•´å‹åŒºåˆ†å¼€ï¼Œä»¥æ­¤å‘½åçš„æ•°æ®å’Œé¡ºåºè¡¨ç›´æ¥ç›¸å…³//åŠ¨æ€é¡ºåºè¡¨typedef struct SeqList&#123;\tSLDataType* a;\tint size;     // å­˜å‚¨æ•°æ®ä¸ªæ•°\tint capacity; // å­˜å‚¨ç©ºé—´å¤§å°&#125;SeqList;//SeqListå¯ä»¥æ›¿ä»£struct SeqList\n\n2.1 åˆå§‹åŒ–æœ¬æ¬¡ç¼–å†™é¡ºåºè¡¨ä»£ç ï¼Œæˆ‘ä»¬é‡‡ç”¨â€œå¤šæ–‡ä»¶ç¼–ç¨‹â€æ–¹å¼ï¼Œå°†å‡½æ•°çš„å®ç°ï¼Œå‡½æ•°çš„å£°æ˜ä¸ä¸»å‡½æ•°åˆ†å¼€ï¼Œåˆ†åˆ«æ”¾å…¥ä¸¤ä¸ªæºæ–‡ä»¶å’Œä¸€ä¸ªå¤´æ–‡ä»¶\n\nå…ˆåœ¨mainå‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªé¡ºåºè¡¨çš„ç»“æ„ä½“ï¼Œç¼–å†™SQLinstå‡½æ•°è¿›è¡Œåˆå§‹åŒ–\nSeqList s;//åˆ›å»ºç»“æ„ä½“å˜é‡SQLinst(&amp;s);//åˆå§‹åŒ–\n\nåœ¨.hæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†™å…¥å‡½æ•°å£°æ˜å’Œåº“å‡½æ•°çš„å¼•ç”¨ã€‚\næ³¨æ„éœ€è¦åœ¨å¦å¤–ä¸¤ä¸ª.cæ–‡ä»¶ä¸­ä»¥&quot;Seqlist.h&quot;æ–¹å¼å¼•ç”¨è‡ªå®šä¹‰å¤´æ–‡ä»¶\n#include&quot;Seqlist.h&quot;\n\n\nåˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å…ˆç»™aç”¨callocå‡½æ•°å¼€è¾Ÿ3ä¸ªSLDataType(int)ç±»å‹çš„ç©ºé—´\n\nCAPAï¼šç”±defineå®šä¹‰çš„ç¬¦å·ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹åˆå§‹å®¹é‡\n\nvoid SQLinst(SeqList* sql)&#123;\tassert(sql);\tsql-&gt;a = (SLDataType*)calloc(CAPA,sizeof(SLDataType));\tsql-&gt;capacity = CAPA;\tsql-&gt;size = 0;\treturn;&#125;\n\n\n2.2 å®¹é‡æ£€æŸ¥æ—¢ç„¶æˆ‘ä»¬çš„å‡½æ•°æ˜¯ç”±callocå¼€è¾Ÿçš„åŠ¨æ€å†…å­˜ç©ºé—´ï¼Œå°±éœ€è¦åœ¨é¡ºåºè¡¨å†…ç©ºé—´ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œæ£€æŸ¥å®¹é‡ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\nvoid CheckCapacity(SeqList* sql)&#123;\tassert(sql);\tif (sql-&gt;size &lt; sql-&gt;capacity)\t\treturn;\telse\t&#123;\t\tsize_t newcapacity = 2 * (sql-&gt;capacity);\t\tSLDataType* tmp = (SLDataType*)realloc(sql-&gt;a,newcapacity*sizeof(SLDataType));\t\tif (tmp == NULL)\t\t&#123;\t\t\tprintf(&quot;realloc failed\\n&quot;);\t\t\texit(0);\t\t&#125;\t\telse\t\t&#123;\t\t\tsql-&gt;a = tmp;\t\t\tsql-&gt;capacity = newcapacity;\t\t&#125;\t&#125;\treturn;&#125;\n\nä½¿ç”¨reallocå‡½æ•°çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå®ƒå¯èƒ½æ‰©å®¹å¤±è´¥ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥è®©sql-&gt;aæ¥æ¥æ”¶reallocå‡½æ•°çš„è¿”å›å€¼ï¼ˆæ‰©å®¹å¤±è´¥è¿”å›NULLï¼Œç›¸å½“äºå‰åŠŸå°½å¼ƒï¼‰\nè€Œæ˜¯éœ€è¦ç”¨ä¸€ä¸ªä¸­é—´å˜é‡tmpæ¥æ¥æ”¶å¼€è¾Ÿåçš„åœ°å€ï¼Œç¡®è®¤reallocæˆåŠŸåå†èµ‹å€¼ç»™aã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦å°†sql-&gt;capacityæ›´æ”¹æˆæ–°çš„å®¹é‡\n\n2.3 æ‰“å°é¡ºåºè¡¨void SQLprint(SeqList* sql)&#123;\tassert(sql);\tfor (int i = 0; i &lt; (sql-&gt;size); i++)\t&#123;\t\tprintf(&quot;%d &quot;, sql-&gt;a[i]);\t&#125;\tprintf(&quot;\\n&quot;);\treturn;&#125;\n\n2.4 å°¾æ’å’Œå°¾åˆ å’Œå¹³æ—¶ä½¿ç”¨æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œçº¿æ€§è¡¨ä¸­æŠŠåœ¨è¡¨å°¾æ’å…¥æ•°æ®ç§°ä½œå°¾æ’ã€åˆ é™¤æ•°æ®å«åšå°¾åˆ ï¼Œå¯¹åº”çš„æ˜¯pushbackå’Œpopback\n\nå¦‚æœä½ çœ‹è¿‡ä¹‹å‰æˆ‘çš„é‚£ç¯‡å‡½æ•°è°ƒç”¨å‚æ•°å‹æ ˆçš„åšå®¢ï¼Œåº”è¯¥è¿˜è®°å¾—ï¼Œæ±‡ç¼–ä»£ç ä¸­å…¥æ ˆå’Œå‡ºæ ˆä¹Ÿæ˜¯pushå’Œpop\n\nvoid SQLpushback(SeqList* sql, size_t x);//å°¾æ’void SQLpopback(SeqList* sql);//å°¾åˆ \n\nå®ç°æ–¹å¼å¾ˆæ˜¯ç®€å•ï¼Œå’Œæˆ‘ä»¬æ—¥å¸¸åœ¨æ•°ç»„å°¾éƒ¨æ’å…¥å…ƒç´ ç›¸åŒ\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬æ’å…¥çš„æ•°æ®æ˜¯size_tï¼ˆunsigned int)ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªé¡ºåºè¡¨ä¸­å¹¶æ²¡æœ‰è´Ÿæ•°\nvoid SQLpushback(SeqList* sql, size_t x)&#123;\tassert(sql);\tCheckCapacity(sql);//ä½¿ç”¨æ—¶æ£€æŸ¥å®¹é‡\tsql-&gt;a[sql-&gt;size] = x;\tsql-&gt;size++;\treturn;&#125;void SQLpopback(SeqList* sql)&#123;\tassert(sql);    //sql-&gt;a[sql-&gt;size] = 0;    //è¿™é‡Œå¯ä»¥æŠŠæœ€åä¸€ä¸ªæ•°æ”¹ä¸º0ï¼Œä¹Ÿå¯ä»¥ä¸æ”¹\tsql-&gt;size--;\treturn;&#125;\n\n\n2.5 å¤´æ’å’Œå¤´åˆ å’Œå°¾éƒ¨ä¿®æ”¹æ•°æ®ä¸åŒï¼Œåœ¨å¤´éƒ¨ä¿®æ”¹æ•°æ®ï¼Œå¿…é¡»è¦æŠŠå·²æœ‰æ•°æ®æ•´ä½“å¾€åç§»åŠ¨\n\nvoid SQLpushfront(SeqList* sql, size_t x)&#123;\tassert(sql);\tCheckCapacity(sql);\tint i = sql-&gt;size;\twhile (i &gt;= 0)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i - 1];\t\ti--;\t&#125;\tsql-&gt;a[0] = x;//æ•´ä½“åç§» ä¹‹åä¿®æ”¹ç¬¬ä¸€ä¸ªæ•°\tsql-&gt;size++;\treturn;&#125;void SQLpopfront(SeqList* sql)&#123;\tassert(sql);\tint i = 0;\twhile (i &lt; (int)sql-&gt;size)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i + 1];\t\ti++;//ç›´æ¥æ•´ä½“å‰ç§»å³å¯\t&#125;\tsql-&gt;size--;\treturn;&#125;\n\n2.6 æ’å…¥å’Œåˆ é™¤é™¤äº†å¤´å°¾çš„æ“ä½œï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¼–å†™åœ¨é¡ºåºè¡¨ä¸­é—´çš„æ’å…¥å’Œåˆ é™¤æ“ä½œ\n\næ’å…¥ï¼šéœ€è¦å°†æ’å…¥ä½ç½®ä¹‹åçš„æ•°æ®æ•´ä½“åç§»\nåˆ é™¤ï¼šåˆ é™¤ä½ç½®ä¹‹åçš„æ•°æ®æ•´ä½“å‰ç§»\nposï¼šæ’å…¥ä½ç½®çš„ä¸‹æ ‡\n\nvoid SQLinsert(SeqList* sql, size_t pos, size_t x)&#123;\tassert(sql);\tif (pos &gt;= (int)sql-&gt;size)\t&#123;//æ¸©å’Œçš„åˆ¤æ–­ï¼Œassertå¤ªè¿‡æš´åŠ›ï¼Œåœ¨OJé‡Œå®¹æ˜“å‡ºé”™\t\tprintf(&quot;input err\\n&quot;);\t\treturn;\t&#125;\tCheckCapacity(sql);\tint i = sql-&gt;size;\twhile (i &gt; (int)pos)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i - 1];\t\ti--;\t&#125;\tsql-&gt;a[pos]=x;\tsql-&gt;size++;\treturn;&#125;void SQLerase(SeqList* sql, size_t pos)&#123;\tassert(sql);\tif (pos &gt;= (int)sql-&gt;size)\t&#123;//æ¸©å’Œçš„åˆ¤æ–­ï¼Œassertå¤ªè¿‡æš´åŠ›ï¼Œåœ¨OJé‡Œå®¹æ˜“å‡ºé”™\t\tprintf(&quot;input err\\n&quot;);\t\treturn;\t&#125;\tint i = pos;\twhile (i &lt; (int)sql-&gt;size-1)\t&#123;\t\tsql-&gt;a[i] = sql-&gt;a[i + 1];\t\ti++;\t&#125;\tsql-&gt;size--;\treturn;&#125;\n\n2.7 æŸ¥æ‰¾å’Œæ›´æ”¹å½“æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„æ—¶å€™ï¼Œå¿…é¡»ä»å¤´å¼€å§‹éå†æ•´ä¸ªæ•°ç»„ï¼Œæ¥æ‰¾åˆ°å¾…æŸ¥æ‰¾å…ƒç´ \nint SQLfind(SeqList* sql, size_t x)&#123;\tassert(sql);\tfor (int i = 0; i &lt; sql-&gt;size; i++)\t&#123;\t\tif (sql-&gt;a[i] == x)\t\t&#123;\t\t\treturn i;//è¿”å›ä¸‹æ ‡\t\t&#125;\t&#125;\tprintf(&quot;find err\\n&quot;);\treturn -1;&#125;\n\nè€Œä¿®æ”¹å‡½æ•°åˆ™æ˜¯åœ¨æŸ¥æ‰¾çš„åŸºç¡€ä¸Šï¼Œæ›´æ”¹æ‰ç›®æ ‡å…ƒç´ \nvoid SQLmodify(SeqList* sql, size_t pos, size_t x)&#123;\tassert(sql);\tsql-&gt;a[pos] = x;\t\treturn;&#125;\n\nå¦‚æœç”¨æˆ·ä¸çŸ¥é“è‡ªå·±æƒ³ä¿®æ”¹çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œå¯ä»¥é€šè¿‡findå‡½æ•°æŸ¥æ‰¾ï¼Œå†è°ƒç”¨ä¿®æ”¹å‡½æ•°\n\n3.èœå•ä¸€ä¸ªå°å»ºè®®æ˜¯ï¼Œä¸è¦åœ¨ä¸€å¼€å§‹ç¼–å†™å‡½æ•°çš„æ—¶å€™å°±å†™å‡ºèœå•ï¼\nå› ä¸ºè¿™æ ·éå¸¸ä¸æ–¹ä¾¿debugï¼Œä½ éœ€è¦æŒ‰èœå•ä¸Šçš„å‡½æ•°è°ƒç”¨å†è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ\n\nè¯è¯´æ˜¯ä¸æ˜¯åº”è¯¥åœ¨å‰é¢å°±å‘Šè¯‰å¤§å®¶ï¼ŸğŸ˜‚\n\n\nèœå•çš„ä½¿ç”¨éœ€è¦é…åˆswitch&#x2F;caseè¯­å¥æ¥æ‰§è¡Œï¼Œæ–¹ä¾¿ç”¨æˆ·è¾“å…¥æ“ä½œæ•°è¿›è¡Œå‡½æ•°è°ƒç”¨\nvoid menu()&#123;\tprintf(&quot;*****************************\\n&quot;);\tprintf(&quot;******1.å¤´æ’  2.å°¾æ’*********\\n&quot;);\tprintf(&quot;******3.å¤´åˆ   4.å°¾åˆ *********\\n&quot;);\tprintf(&quot;******5.æ’å…¥  6.åˆ é™¤*********\\n&quot;);\tprintf(&quot;******7.æŸ¥æ‰¾  8.æ›´æ”¹*********\\n&quot;);\tprintf(&quot;******9.æ‰“å°  0.exit*********\\n&quot;);\tprintf(&quot;*****************************\\n&quot;);&#125;\n\næˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªæ¨¡å—printfå¯¹åº”çš„æç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œé¡ºåºè¡¨\nint main()&#123;\tSeqList s;//åˆ›å»ºç»“æ„ä½“å˜é‡\tSQLinst(&amp;s);//åˆå§‹åŒ–#if\tM\ttest1(&amp;s);//æµ‹è¯•å‡½æ•°#endif\t\tmenu();\tprintf(&quot;è¯·è¾“å…¥å‘½ä»¤&gt;&quot;);\tint option;\tscanf(&quot;%d&quot;, &amp;option);\tdo&#123;\t\tswitch (option)\t\t&#123;\t\tcase 0:\t\t&#123;\t\t\tSQLdestory(&amp;s);\t\t\tprintf(&quot;destory SQL\\n&quot;);\t\t\texit(0);\t\t&#125;\t\tcase 1:\t\t&#123;\t\t\tint x;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦å¤´æ’çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;x);\t\t\tSQLpushfront(&amp;s, x);\t\t\tbreak;\t\t&#125;\t\tcase 2:\t\t&#123;\t\t\tint y;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦å°¾æ’çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;y);\t\t\tSQLpushback(&amp;s, y);\t\t\tbreak;\t\t&#125;\t\tcase 3:\t\t\tSQLpopfront(&amp;s);\t\t\tbreak;\t\tcase 4:\t\t\tSQLpopback(&amp;s);\t\t\tbreak;\t\tcase 5:\t\t&#123;\t\t\tint m, n;\t\t\tprintf(&quot;è¯·è¾“å…¥æ’å…¥ä½ç½®å’Œæ’å…¥æ•°&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;m, &amp;n);\t\t\tSQLinsert(&amp;s, m, n);\t\t\tbreak;\t\t&#125;\t\tcase 6:\t\t&#123;\t\t\tint d;\t\t\tprintf(&quot;è¯·è¾“å…¥å¾…åˆ é™¤æ•°çš„ä½ç½®&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;d);\t\t\tSQLerase(&amp;s, d);\t\t\tbreak;\t\t&#125;\t\tcase 7:\t\t&#123;\t\t\tint f;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦æŸ¥æ‰¾çš„æ•°&gt;&quot;);\t\t\tscanf(&quot;%d&quot;, &amp;f);\t\t\tprintf(&quot;è¯¥æ•°ä¸‹æ ‡ä¸º:%d\\n&quot;, SQLfind(&amp;s, f));\t\t\tbreak;\t\t&#125;\t\tcase 8:\t\t&#123;\t\t\tint h, i;\t\t\tprintf(&quot;è¯·è¾“å…¥éœ€è¦æ›´æ”¹çš„ä¸‹æ ‡å’Œæ–°çš„æ•°å­—\\n&quot;);\t\t\tprintf(&quot;å¦‚æœæ‚¨ä¸çŸ¥é“è¯¥æ•°çš„ä½ç½®ï¼Œå¯ä»¥è°ƒç”¨æŸ¥æ‰¾æ¨¡å—\\n&quot;);\t\t\tprintf(&quot;è¯·è¾“å…¥&gt;&quot;);\t\t\tscanf(&quot;%d %d&quot;, &amp;h, &amp;i);\t\t\tSQLmodify(&amp;s, h, i);\t\t\tbreak;\t\t&#125;\t\tcase 9:\t\t\tSQLprint(&amp;s);\t\t\tbreak;\t\t&#125;\t\tprintf(&quot;è¯·è¾“å…¥å‘½ä»¤&gt;&quot;);\t&#125; while (scanf(&quot;%d&quot;, &amp;option) != EOF);\treturn 0;&#125;\n\næœ€ç»ˆæ•ˆæœå¦‚å›¾\n\nä¸€äº›errå½“æˆ‘ä½¿ç”¨switch&#x2F;caseè¯­å¥ï¼Œåœ¨caseè¯­å¥ä¸­å®šä¹‰å±€éƒ¨å˜é‡çš„æ—¶å€™ï¼ŒVSæŠ¥é”™â€œå£°æ˜ä¸èƒ½åŒ…å«æ ‡ç­¾â€\n\nè¿™ä¸ªæŠ¥é”™å¹¶ä¸ä¼šé˜»æ­¢ç¨‹åºè¿è¡Œ\n\n\nè§£å†³åŠæ³•æ˜¯åœ¨caseè¯­å¥åå¸¦ä¸Šå¤§æ‹¬å·ï¼ŒæŠ¥é”™å°±æ¶ˆå¤±äº†\n\n\næ€»ç»“é¡ºåºè¡¨å†…å®¹ç®—æ˜¯å¯¹å‰é¢å­¦ä¹ çš„ä¸€äº›Cè¯­è¨€çŸ¥è¯†çš„è¿ç”¨ï¼Œæ•°æ®ç»“æ„çš„ä¸¥è°¨æ€§æ›´èƒœä¸€ç­¹ã€‚\næ¯”å¦‚åœ¨åˆ¤æ–­poså’Œsizeçš„å¤§å°çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™ç±»å‹ä¸ä¸€è‡´ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠæ— ç¬¦å·æ•´å‹çš„sizeå¼ºåˆ¶è½¬æ¢ä¸ºintç±»å‹ï¼Œå†å’Œposè¿›è¡Œæ¯”è¾ƒï¼\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘å§\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°ç»„","æ•°æ®ç»“æ„"]},{"title":"ã€ç®—æ³•ã€‘ä»xçš„næ¬¡æ–¹çœ‹é€’å½’æ—¶é—´å¤æ‚åº¦è®¡ç®—","url":"/posts/2475090872/","content":"ä»xçš„næ¬¡æ–¹çœ‹é€’å½’æ—¶é—´å¤æ‚åº¦è®¡ç®—\n\n\n1.å¾ªç¯è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯ç”¨å¾ªç¯\nint pow1(int x,int n){    int result = 1;    for(int i=0;i&lt;n;i++)    {        result*=x;    }    return result;}\n\nå¦‚ä¸Šç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œä½†è¿˜æ˜¯ä¸å¤Ÿç†æƒ³ã€‚è¿™æ—¶å°è¯•ä½¿ç”¨é€’å½’ç®—æ³•\n2.é€’å½’1int pow2(int x,int n){    if(n==0)// x^0 = 1        return 1;    return pow2(x,n-1)*x;}\n\nä½¿ç”¨å¦‚ä¸Šé€’å½’å‡½æ•°æ—¶é—´å¤æ‚åº¦è®¡ç®—åŠæ³•ï¼Œè¯¥å‡½æ•°é€’å½’è°ƒç”¨æ¬¡æ•°æ˜¯ä»nä¸€ç›´å‡åˆ°0ï¼Œå³næ¬¡ã€‚æ¯æ¬¡é€’å½’ä¸­ï¼Œéœ€è¦è¿›è¡Œä¸€æ¬¡ç›¸ä¹˜çš„è®¡ç®—ï¼Œå³O(1)\næœ€ç»ˆå¾—åˆ°çš„æ—¶é—´å¤æ‚åº¦ O(n*1) = O(n)ï¼Œè¿™å’Œæˆ‘ä»¬ç”¨å¾ªç¯å†™å‡ºæ¥çš„ä»£ç æ²¡ä¸¤æ ·\n3.é€’å½’2ï¼ŒäºŒå‰æ ‘int pow3(int x,int n){    if(n==0)// x^0 = 1        return 1;    if(n==1)// å‡å°‘ä¸€æ¬¡é€’å½’        return x;    if(n%2==1)// å¥‡æ•°        return pow3(x,n/2)*pow3(x,n/2)*x;    // å¶æ•°æ–¹    return pow3(x,n/2)*pow3(x,n/2);}\n\næœ€ç»ˆæ±‚æ¬¡æ–¹æ“ä½œè¢«æŠ½è±¡æˆäº†ä¸€ä¸ªäºŒå‰æ ‘\n\næ€»é€’å½’æ¬¡æ•°ï¼Œå³äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚æˆ‘ä»¬èƒ½ç®—å‡ºæ¥è¿™é¢—æ»¡äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ä¸º 2^4-1 = 15\næ‰€ä»¥ä¸€å…±é€’å½’äº†15æ¬¡ï¼Œæ¯æ¬¡çš„æ“ä½œè¿˜æ˜¯ä¸€ä¸ªç›¸ä¹˜ï¼ŒO(1)\næ‰€ä»¥æœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯\né€’å½’æ¬¡æ•° = æ»¡äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•° = 2^m -1m = äºŒå‰æ ‘å±‚æ•°ï¼ˆä»1å¼€å§‹ï¼‰= log(n)\n\nå¸¦å…¥å¯ä»¥è®¡ç®—å‡ºæ¥ï¼Œæœ€ç»ˆçš„äºŒå‰æ ‘æ€»èŠ‚ç‚¹æ•°æ˜¯n-1ä¸ªï¼Œæ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(N)ã€‚è¿™è¯´æ˜æˆ‘ä»¬çš„ç®—æ³•è¿˜ä¸å¤Ÿå¥½\n\näºŒå‰æ ‘ç›¸å…³çŸ¥è¯†ç‚¹ https://blog.musnow.top/posts/4161984418/\n\n4.é€’å½’3å¦‚æœè§‚å¯Ÿç¬¬ä¸‰ä¸ªå‡½æ•°å¯ä»¥å‘ç°ï¼Œä¸ç®¡æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°çš„å¥‡æ€ªï¼Œéƒ½è¿›è¡Œäº†2æ¬¡é€’å½’è°ƒç”¨ï¼Œä½†è¿™ä¸¤ä¸ªé€’å½’è°ƒç”¨éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„\npow3(x,n/2)*pow3(x,n/2);\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆé€’å½’è°ƒç”¨1æ¬¡ï¼Œå­˜ç»“æœå†è®¡ç®—ï¼\nint pow4(int x,int n){    if(n==0)// x^0 = 1        return 1;    if(n==1)// å‡å°‘ä¸€æ¬¡é€’å½’        return x;    int tmp = pow3(x,n/2);    if(n%2==1)// å¥‡æ•°        return tmp*tmp*x;    // å¶æ•°æ–¹    return tmp*tmp;}\n\næ­¤æ—¶å‡½æ•°ä¸­åªè°ƒç”¨äº†1æ¬¡é€’å½’ï¼Œæ¯æ¬¡é€’å½’ä¹‹åï¼Œæ•°æ®éƒ½é™¤2ï¼Œæ‰€ä»¥æ€»å…±æ˜¯log2(n)æ¬¡\næ¯æ¬¡é€’å½’ï¼Œè¿˜æ˜¯ä¸€ä¸ªä¹˜æ³•æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(1)æœ€ç»ˆå¾—åˆ°çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(logN)ï¼\nThe endè¿™æ‰æ˜¯æˆ‘ä»¬éœ€è¦çš„æ—¶é—´å¤æ‚åº¦è¾ƒä½çš„ç®—æ³•ï¼ŒåŒæ—¶ä¹Ÿå¤ä¹ äº†é€’å½’è°ƒç”¨çš„æ—¶é—´å¤æ‚åº¦è®¡ç®—åŠæ³•\né€’å½’æ—¶é—´å¤æ‚åº¦ = é€’å½’æ¬¡æ•° * æ¯æ¬¡æ“ä½œçš„è´Ÿè½½åº¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","ç®—æ³•","OJåˆ·é¢˜"]},{"title":"ã€Cè¯­è¨€ã€‘å•é“¾è¡¨å¤ªéš¾å­¦ä¸æ‡‚ï¼Ÿçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†","url":"/posts/2793401961/","content":"[TOC]\nå‰è¨€ğŸ˜€ä¹‹å‰çš„åšå®¢ä¸­æˆ‘ä»¬è®²è¿°äº†é¡ºåºè¡¨çš„æ•°æ®ç»“æ„ï¼Œé¡ºåºè¡¨å’Œä¹‹å‰Cè¯­è¨€å­¦ä¹ çš„æ•°ç»„è¿˜æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ã€‚\nä»Šå¤©è¦å­¦ä¹ çš„æ˜¯é“¾è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ï¼Œå’Œä¹‹å‰æˆ‘ä»¬å­¦çš„å†…å®¹éƒ½ä¸ç›¸åŒã€‚\n\nç¼–è¯‘å™¨ï¼šVS2019\n\n1.ä»€ä¹ˆæ˜¯é“¾è¡¨é“¾è¡¨ï¼Œå¦‚å…¶åæ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªå¸¦é“¾å­çš„è¡¨\nå’Œé¡ºåºè¡¨çš„æ‰©å®¹å¼€è¾Ÿç›¸æ¯”ï¼Œå®ƒå¯ä»¥åˆ©ç”¨å†…å­˜å †åŒºä¸­çš„ç©ºé—²ç©ºé—´ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªè¿ç»­çš„é•¿ç©ºé—´ã€‚ä»è€Œè¾¾åˆ°æé«˜ç©ºé—´åˆ©ç”¨æ•ˆç‡çš„ç›®çš„ã€‚\n\n\né“¾è¡¨ä¸­æ¯ä¸€ä¸ªå•ç‹¬å¼€è¾Ÿçš„â€œå…ƒç´ â€ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹\né“¾è¡¨æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆpheadï¼Œç”¨äºæŒ‡å‘é“¾è¡¨çš„é¦–èŠ‚ç‚¹\nå•é“¾è¡¨ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªnextæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\né“¾è¡¨çš„å°¾èŠ‚ç‚¹çš„nextæŒ‡å‘NULLç©ºæŒ‡é’ˆ\n\nè¿™æ ·æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨è¿‡nextæŒ‡é’ˆè®¿é—®é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸€ç›´åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextä¸ºç©ºåœæ­¢ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´å¹¶æ²¡æœ‰å®é™…æ„ä¹‰ä¸Šçš„ç®­å¤´ï¼Œç”»å‡ºç®­å¤´åªæ˜¯æ–¹ä¾¿æˆ‘ä»¬ç†è§£ã€‚å®é™…ä¸Šï¼Œåœ¨å†…å­˜ä¸­ï¼Œé“¾è¡¨çš„nextæŒ‡é’ˆå°±å……å½“äº†ç®­å¤´çš„è§’è‰²ã€‚\n\né“¾è¡¨çš„ç»“æ„åœ¨é€»è¾‘ä¸Šè¿ç»­ï¼Œä½†åœ¨ç‰©ç†ä¸Šä¸ä¸€å®šè¿ç»­\nå®é™…ä¸Šåœ¨å †åŒºå¼€è¾Ÿç©ºé—´ä¸­ï¼Œåˆ†é…çš„å†…å­˜å¯èƒ½è¿ç»­ï¼Œå¯èƒ½ä¸è¿ç»­\n\n1.1é“¾è¡¨çš„åˆ†ç±»1 å•å‘&#x2F;åŒå‘é“¾è¡¨\n2 å¸¦å¤´&#x2F;ä¸å¸¦å¤´è¿™é‡Œçš„å¤´ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªå¤´èŠ‚ç‚¹ã€‚è¯¥èŠ‚ç‚¹çš„nextæŒ‡å‘é“¾è¡¨å®é™…çš„è¡¨å¤´ï¼Œvalä¸­ä¸å­˜æ”¾æœ‰æ•ˆæ•°æ®\nå®é™…ä½¿ç”¨æ—¶ï¼Œå¸¦å¤´çš„head-&gt;nextç›¸å½“äºä¸å¸¦å¤´çš„pheadæŒ‡é’ˆ\n\n3 å¾ªç¯æˆ–è€…éå¾ªç¯\næœ¬ç¯‡åšå®¢è®²è§£çš„æ˜¯æ— å¤´å•å‘éå¾ªç¯é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨å°†åœ¨ä¹‹åçš„åšå®¢é‡Œé¢è®²è§£ï¼\n\n2.å¼€å§‹æ•²ä»£ç ï¼å®é™…ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šè¦è®°ä½ï¼šå†™å®Œä¸€ä¸ªæ¨¡å—å°±è¦æµ‹è¯•ä¸€æ¬¡ï¼Œä¸è¦å…¨å†™å®Œå†æµ‹è¯•ï¼ï¼ï¼\n2.1  é“¾è¡¨ç»“æ„å’Œé¡ºåºè¡¨ä¸€æ ·ï¼Œä½¿ç”¨å•é“¾è¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªâ€œæ¨¡æ¿â€ï¼Œå³å•é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹çš„ç»“æ„ä½“\ntypedef int SLTDataType;//å®šä¹‰æ–°ç¬¦å·ï¼Œä¸è¯¥ç¬¦å·ç›¸å…³çš„éƒ½æ˜¯é“¾è¡¨å†…å®¹typedef struct SListNode&#123;\tSLTDataType data; //val-å­˜æ”¾å†…å®¹\tstruct SListNode* next; //å­˜å‚¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€&#125;SListNode, SLN;\n\n2.2 å¼€è¾ŸèŠ‚ç‚¹å½“æˆ‘ä»¬ä½¿ç”¨å•é“¾è¡¨æ—¶ï¼Œéœ€è¦å…ˆå¼€è¾Ÿä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå¹¶ä½¿å®ƒçš„nextæŒ‡é’ˆæŒ‡å‘NULL\nSListNode* node1 = (SListNode*)malloc(sizeof(SListNode));node1-&gt;data = 1;node1-&gt;next = NULL;\n\nè¿™éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªå‡½æ•°æ¥å®ç°ï¼\nSListNode* BuySListNode(SLTDataType x)//xä»£è¡¨è¯¥èŠ‚ç‚¹valçš„å€¼&#123;\tSListNode* newnode = (SListNode*)malloc(sizeof(SListNode));\tif (newnode == NULL)\t&#123;\t\tprintf(&quot;malloc fail\\n&quot;);\t\texit(-1);\t&#125;\telse\t&#123;\t\tnewnode-&gt;data = x;\t\tnewnode-&gt;next = NULL;\t&#125;\treturn newnode;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆè®©å¦å¤–ä¸€ä¸ªæŒ‡é’ˆæ¥æ¥æ”¶è¿”å›çš„newnodeåœ°å€ï¼Œä¸å»ºè®®ç›´æ¥è®©ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæ¥æ¥æ”¶è¿”å›å€¼\n\nè¿™æ ·åšèƒ½æ–¹ä¾¿æˆ‘ä»¬åç»­debugï¼\n\n//å»ºè®®åšæ³•SListNode* newnode = BuySListNode(x);tail-&gt;next = newnode;//ä¸å»ºè®®tail-&gt;next=BuySListNode(x);\n\n2.3 å°¾æ’&#x2F;å¤´æ’å°¾æ’ï¼šå°†ä¸€ä¸ªæ–°èŠ‚ç‚¹è¿æ¥åˆ°å·²æœ‰é“¾è¡¨çš„å°¾éƒ¨\nå‡è®¾æˆ‘ä»¬ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªè¿™æ ·çš„é“¾è¡¨ï¼Œå½“æˆ‘ä»¬éœ€è¦å°¾æ’çš„æ—¶å€™ï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦å¼€è¾Ÿä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¹¶å°†ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„nextæŒ‡å‘è¿™ä¸ªæ–°å¼€è¾ŸèŠ‚ç‚¹çš„åœ°å€å³å¯ï¼ï¼ˆå°¾æ’çš„æ–°èŠ‚ç‚¹çš„next=NULLï¼‰\n\nvoid SListPushBack(SListNode** pphead, SLTDataType x)&#123;\tassert(pphead);\tSListNode* newnode = BuySListNode(x);\tif (*pphead == NULL)\t&#123;        //å¦‚æœåŸé“¾è¡¨ä¸ºç©ºï¼Œç›´æ¥è®©å¤´æŒ‡é’ˆ=æ–°å¼€è¾Ÿçš„èŠ‚ç‚¹åœ°å€\t\t*pphead = newnode;\t&#125;\telse//åŸé“¾è¡¨éç©º\t&#123; \t\tSListNode* tail = *pphead;\t\twhile (tail-&gt;next != NULL)\t\t&#123;   //éœ€è¦å…ˆæ‰¾å°¾\t\t\ttail = tail-&gt;next;\t\t&#125;\t\ttail-&gt;next = newnode;\t&#125;&#125;\n\nè€Œå¤´æ’å°±æ²¡æœ‰å°¾æ’é‚£ä¹ˆéº»çƒ¦äº†ï¼\næˆ‘ä»¬åªéœ€è¦å°†æ–°èŠ‚ç‚¹çš„nextæŒ‡å‘åŸé“¾è¡¨çš„å¤´éƒ¨ï¼Œå†å°†headå¤´æŒ‡é’ˆæ›´æ”¹ä¸ºæ–°èŠ‚ç‚¹çš„åœ°å€å³å¯\nvoid SListPushFront(SListNode** pphead, SLTDataType x)&#123;\tassert(pphead);\tSListNode* newnode = BuySListNode(x);\tnewnode-&gt;next = *pphead;\t*pphead = newnode;&#125;\n\nç»†å¿ƒçš„ä½ åº”è¯¥æ³¨æ„åˆ°äº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„éƒ½æ˜¯äºŒçº§æŒ‡é’ˆpphead\nå› ä¸ºå‡è®¾æˆ‘ä»¬ä½¿ç”¨ä¸€çº§æŒ‡é’ˆï¼Œç›´æ¥ä¼ å…¥å¤´æŒ‡é’ˆpheadæ—¶ï¼Œå½“æˆ‘ä»¬éœ€è¦æ›´æ”¹è¯¥æŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ—¶ï¼Œæ”¹åŠ¨åªä¼šåœ¨å‡½æ•°å†…éƒ¨ç”Ÿæ•ˆï¼Œmainå‡½æ•°ä¸­çš„pheadæŒ‡é’ˆå¹¶æ²¡æœ‰è¢«æ”¹å˜\n\nè¿™æ˜¯ä¸€ä¸ªç»å…¸çš„å‡½æ•°ä¼ å€å’Œä¼ å€¼é—®é¢˜\n\nå½“æˆ‘ä»¬éœ€è¦æ›´æ”¹pheadæœ¬èº«æ—¶ï¼Œéœ€è¦ä¼ å…¥äºŒçº§æŒ‡é’ˆ\n\n\n2.4 å°¾åˆ &#x2F;å¤´åˆ å°¾åˆ æ—¶ï¼Œéœ€è¦å…ˆè¿›è¡Œæ‰¾å°¾ã€‚å¹¶ä¸”éœ€è¦ä¿å­˜å°¾éƒ¨çš„å‰ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€\nwhile(tail-&gt;next!=NULL)//ä¼šæ‰¾åˆ°å°¾èŠ‚ç‚¹æœ¬èº«ï¼Œä¸ç¬¦åˆè¦æ±‚    //å°¾åˆ åº”è¯¥æ‰¾åˆ°å°¾èŠ‚ç‚¹çš„å‰ä¸€ä¸ªwhile (tail-&gt;next-&gt;next != NULL)\n\nåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æƒ³åˆ°ç‰¹æ®Šæƒ…å†µ\n\né“¾è¡¨ä¸ºç©ºï¼Œæ— éœ€å°¾åˆ \né“¾è¡¨åªæœ‰ä¸€ä¸ªï¼Œæ— éœ€æ‰¾å°¾\n\nå…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹\nvoid SListPopBack(SListNode** pphead)&#123;\tassert(pphead);\t\tif (*pphead==NULL)\t&#123;\t\treturn;\t&#125;\telse if((*pphead)-&gt;next==NULL)\t&#123;\t\tfree(*pphead);\t\t*pphead = NULL;\t&#125;\telse\t&#123;\t\t//æœ‰å¤šä¸ªå°¾å·´çš„æƒ…å†µ\t\tSListNode* tail = *pphead;//æ‰¾å°¾å·´\t\twhile (tail-&gt;next-&gt;next != NULL)\t\t&#123;\t\t\ttail = tail-&gt;next;\t\t&#125;\t\tfree(tail-&gt;next);\t\ttail-&gt;next = NULL;\t&#125;\t\treturn;&#125;\n\nå¤´åˆ çš„æƒ…å†µä¾æ—§ç®€å•ä¸€äº›\næˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜å¤´èŠ‚ç‚¹ï¼Œå†è®©å¤´æŒ‡é’ˆpheadæŒ‡å‘åŸæœ¬å¤´èŠ‚ç‚¹çš„nextï¼Œæœ€åfreeæ‰å¤´èŠ‚ç‚¹å³å¯\nvoid SListPopFront(SListNode** pphead)&#123;\tassert(pphead);\t\tif (*pphead == NULL)\t&#123;\t\treturn;\t&#125;\telse\t&#123;\t\tSListNode* oldhead = *pphead;\t\t*pphead = (*pphead)-&gt;next;\t\tfree(oldhead);\t\toldhead = NULL;\t&#125;\treturn;&#125;\n\n\n2.5 æŸ¥æ‰¾&#x2F;æ›´æ”¹æŸ¥æ‰¾å‡½æ•°éœ€è¦æˆ‘ä»¬åœ¨å•é“¾è¡¨ä¸­è¿›è¡Œéå†ï¼Œæ‰¾åˆ°ç”¨æˆ·è¾“å…¥çš„xå€¼ï¼Œå¹¶è¿”å›å®ƒæ‰€åœ¨èŠ‚ç‚¹çš„åœ°å€\n\næŸ¥æ‰¾å‡½æ•°å¹¶ä¸éœ€è¦æ›´æ”¹pheadæŒ‡é’ˆï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥ä¸€çº§æŒ‡é’ˆ\n\nSListNode* SListFind(SListNode* phead, SLTDataType x)&#123;\tassert(phead);\tSListNode* curt = phead;//æ‰¾xçš„ä½ç½®\twhile (curt-&gt;next != NULL)\t&#123;\t\tif (curt-&gt;data == x)\t\t&#123;\t\t\treturn curt;\t\t&#125;\t\telse\t\t&#123;\t\t\tcurt = curt-&gt;next;\t\t&#125;\t&#125;\t//æ‰¾ä¸åˆ°ï¼Œè¿”å›ç©º\treturn NULL;&#125;\n\nä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œå‡è®¾æˆ‘çš„é“¾è¡¨é‡Œé¢æœ‰å¤šä¸ªxå‘¢ï¼Ÿè¿™ä¸ªå‡½æ•°åªèƒ½è¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªxçš„åœ°å€\n\nå¾ˆé—æ†¾ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é™¤éç”¨æˆ·çŸ¥é“ä»–æƒ³æ‰¾çš„xçš„å‡†ç¡®åœ°å€ï¼Œä¸ç„¶æ˜¯å¾ˆéš¾æå®šçš„ã€‚\n\nå®é™…åº”ç”¨ä¸­ï¼Œé“¾è¡¨çš„ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾çš„å¹¶ä¸åªæœ‰ä¸€ä¸ªæ•´å‹xã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶ä»–å‚æ•°è¿›è¡Œå¤šé‡åˆ¤æ–­ã€‚\n\næ¯”å¦‚é€šè®¯å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åå­—+æ€§åˆ«æ¥ç²¾ç¡®æŸ¥æ‰¾ã€‚ä¹Ÿå¯å°†æ‰€æœ‰æ‰¾åˆ°çš„xéƒ½è¿”å›ç»™ç”¨æˆ·è¿›è¡Œé€‰æ‹©ï¼Œä½†é‚£å°±ä¸æ˜¯æœ¬ç¯‡åšå®¢ä¼šæ¶‰åŠåˆ°çš„å†…å®¹å•¦\n\n\næ›´æ”¹å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·è¾“å…¥å¾…æ›´æ”¹èŠ‚ç‚¹çš„åœ°å€ï¼Œå’Œæ–°çš„val\nå¦‚æœç”¨æˆ·ä¸çŸ¥é“éœ€è¦æ›´æ”¹èŠ‚ç‚¹çš„åœ°å€ï¼Œå¯ä»¥ç”¨æŸ¥æ‰¾å‡½æ•°æ¥æŸ¥æ‰¾ã€‚\nvoid SListmodify(SListNode* phead, SListNode* pos, SLTDataType x)&#123;\tassert(phead);\tpos-&gt;data = x;\treturn;&#125;\n\n\n2.6 åœ¨posä½ç½®å‰&#x2F;åæ’å…¥é™¤äº†åŸºæœ¬çš„å¤´å°¾å¢åŠ ï¼Œç”¨æˆ·å¯èƒ½è¿˜éœ€è¦åœ¨æŸä¸€ä¸ªç‰¹å®šèŠ‚ç‚¹å‰åè¿›è¡Œæ’å…¥ï¼Œæ–¹ä¾¿ç®¡ç†æ•°æ®ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦çµæ´»è½¬å˜äº†\n\né“¾è¡¨ä¸å­˜åœ¨é¡ºåºè¡¨ä¸­çš„æ•°æ®è¶Šç•Œ\nposä½ç½®å¯ç”±findå‡½æ•°æ‰¾åˆ°\n\nå‡è®¾ç”¨æˆ·éœ€è¦åœ¨posä½ç½®ä¹‹åæ’å…¥ï¼Œæˆ‘ä»¬éœ€è¦æš‚æ—¶æ–­å¼€é“¾è¡¨ï¼Œæ–°æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹åï¼Œé‡æ–°é“¾æ¥\nvoid SListInsertAfter(SListNode** pphead, SListNode* pos, SLTDataType x)&#123;\tassert(pphead);\tassert(pos);\tSListNode* newnode = BuySListNode(x);\tSListNode* next = pos-&gt;next;//åŸæœ¬posçš„ä¸‹ä¸€ä½\tpos-&gt;next = newnode;//æ–°æ’å…¥çš„posä¸‹ä¸€ä½\tnewnode-&gt;next = next;\treturn;&#125;\n\nå¦‚æœæ˜¯åœ¨posä¹‹å‰æ’å…¥ï¼Œéœ€è¦éå†æŸ¥æ‰¾posçš„å‰ä¸€ä½ï¼Œä½¿ç”¨ç›¸åŒæ–¹æ³•æ–­å¼€ã€æ’å…¥ã€é‡è¿\nvoid SListInsert(SListNode** pphead, SListNode* pos, SLTDataType x)&#123;\tassert(pphead);\tassert(pos);\t\tif (pos == *pphead)\t&#123;\t\tSListPushFront(pphead, x);\t&#125;\telse\t&#123;\t\tSListNode* tail = *pphead;//æ‰¾poså‰ä¸€ä¸ª\t\twhile (tail-&gt;next != NULL)\t\t&#123;//åªå†™äº†è¿™ä¸ªæƒ…å†µï¼Œæ²¡æœ‰è€ƒè™‘posæ˜¯ç¬¬ä¸€ä¸ªçš„æƒ…å†µ\t\t\tif (tail-&gt;next == pos)\t\t\t&#123;                 SListNode* newnode = BuySListNode(x);\t\t\t\ttail-&gt;next = newnode;\t\t\t\ttail-&gt;next-&gt;next = pos;\t\t\t\treturn;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\ttail = tail-&gt;next;\t\t\t&#125;\t\t&#125;\t&#125;\t\treturn;&#125;\n\nè¿™é‡Œæˆ‘ä»¬éƒ½ä¼ å…¥äº†äºŒçº§æŒ‡é’ˆï¼Œå› ä¸ºå½“poså°±æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹æ—¶ï¼Œåœ¨poså‰æ’å…¥å°±ç›¸å½“äºå¤´æ’ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ä¹‹å‰å†™å¥½çš„å¤´æ’å‡½æ•°ã€‚\nå½“poså°±æ˜¯é“¾è¡¨çš„å¤´èŠ‚ç‚¹æ—¶ï¼Œåœ¨å…¶åæ’å…¥ç›¸å½“äºå°¾æ’ã€‚\n\nè¯¥å‡½æ•°ä¸å­˜åœ¨é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µï¼Œå› ä¸ºå‡½æ•°éœ€è¦ä¼ å…¥posã€‚ç©ºé“¾è¡¨ä¸­æ²¡æœ‰èŠ‚ç‚¹ï¼Œposä¸ºç©ºï¼Œassertæ–­è¨€ä¼šæŠ¥é”™ã€‚\n\nè¿™é‡Œæˆ‘ç¼–å†™çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œæ‰€ä»¥éœ€è¦ç”¨æˆ·ä¸¥æ ¼éµå®ˆä½¿ç”¨è§„å®šï¼Œä¼ å…¥ä¸€ä¸ªåˆæ³•çš„pos\n\n2.7 åœ¨posä½ç½®åˆ é™¤æ•°æ®è¯´å®Œäº†æ’å…¥ï¼Œå†æ¥è¯´è¯´åˆ é™¤\nè¿™é‡Œæä¾›ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯åœ¨åˆ é™¤posä½ç½®çš„èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæ˜¯åˆ é™¤posä¸‹ä¸€ä½çš„èŠ‚ç‚¹\nè¿™ä¸€éƒ¨åˆ†å…¶å®å°±æ˜¯å¯¹ä¸Šä¸€æ­¥çš„é€†å‘ï¼Œå…·ä½“çš„å°±ä¸è¯¦ç»†è¯´å•¦ï¼ˆå·æ‡’ï¼‰\n\nå¤§å®¶å¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæé—®~~çœ‹åˆ°äº†å°±ä¼šå›å¤çš„ï¼\n\nvoid SListErase(SListNode** pphead, SListNode** pos)&#123;\tassert(pphead);\tassert(pos);\tif (*pos == *pphead)\t&#123;//å¦‚æœposæ˜¯å¤´èŠ‚ç‚¹ï¼Œç­‰åŒäºå¤´åˆ \t\tSListPopFront(pphead);\t&#125;\telse\t&#123;\t\tSListNode* tail = *pphead;//æ‰¾poså‰ä¸€ä¸ª\t\twhile (tail-&gt;next != NULL)\t\t&#123;\t\t\tif (tail-&gt;next == *pos)\t\t\t&#123;\t\t\t\ttail-&gt;next = (*pos)-&gt;next;\t\t\t\tfree(*pos);//åˆ é™¤åmainå‡½æ•°ä¼ è¿‡æ¥çš„posä½ç½®å·²è¢«free\t\t\t\t*pos = NULL;//*posç½®ç©ºï¼Œæ­¤æ—¶mainå‡½æ•°ä¸­çš„posä¹Ÿè¢«ç½®ç©º\t\t\t\tpos = NULL;\t\t\t\treturn;\t\t\t&#125;\t\t\telse\t\t\t&#123;\t\t\t\ttail = tail-&gt;next;\t\t\t&#125;\t\t&#125;\t&#125;\treturn;&#125;void SListEraseAfter(SListNode** pphead, SListNode* pos)&#123;\tassert(pphead);\tassert(pos);\tSListNode* next = pos-&gt;next-&gt;next;\tfree(pos-&gt;next);\tpos-&gt;next = next;\treturn;&#125;\n\n2.8 æ‰“å°é“¾è¡¨æ‰“å°çš„æ—¶å€™å¯ä»¥æ‰“å°å‡º-&gt;ç®­å¤´ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹é“¾è¡¨çš„ç»“æ„\nvoid SListPrint(SListNode* phead)&#123;\tSListNode* cur = phead;\twhile (cur != NULL)\t&#123;\t\tprintf(&quot;%d-&gt;&quot;, cur-&gt;data);\t\tcur = cur-&gt;next;\t&#125;\tprintf(&quot;NULL\\n&quot;);&#125;\n\n2.9 é”€æ¯é“¾è¡¨å¯¹äºé¡ºåºè¡¨æ¥è¯´ï¼Œé”€æ¯é“¾è¡¨åªéœ€è¦freeæ‰é¡ºåºè¡¨ä¸­æŒ‡å‘å †åŒºç©ºé—´çš„æŒ‡é’ˆ\nä½†å¯¹äºé“¾è¡¨æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥ä¸€æ­¥è¿›è¡Œé‡Šæ”¾æ“ä½œï¼Œå¹¶åœ¨é‡Šæ”¾å®Œæ¯•åå°†å¤´æŒ‡é’ˆç½®ç©º\n\nå¦‚æœè¯¥é“¾è¡¨æœ‰å¤´èŠ‚ç‚¹ï¼Œåˆ™è¿˜éœ€å°†å¤´èŠ‚ç‚¹ä¸€å¹¶ç½®ç©º\n\nvoid SListDestroy(SListNode** pphead)&#123;\tassert(pphead);\tSListNode* curt = *pphead;\twhile (curt)\t&#123;\t\tSListNode* next = curt-&gt;next;\t\tfree(curt);\t\tcurt = next;\t&#125;\t*pphead = NULL;\treturn ;&#125;\n\n\n3.æµ‹è¯•è¿™ä¸€æ¬¡ï¼Œæˆ‘ä¾æ—§ä½¿ç”¨äº†å¤šæ–‡ä»¶ç¼–ç¨‹çš„æ–¹æ³•æ¥æ•²å•é“¾è¡¨çš„ä»£ç \nè¿™æ ·çš„å¥½å¤„åœ¨äºï¼Œåˆ«äººåªéœ€è¦çœ‹ä½ çš„.hå¤´æ–‡ä»¶ï¼Œå°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½ è¿™ä¸ªé¡¹ç›®å¤§æ¦‚å®ç°äº†ä»€ä¹ˆæ ·çš„åŠŸèƒ½ï¼Œå°±å¥½æ¯”ä¸€ç¯‡æ–‡ç« çš„å¤§çº²ä¸€æ ·ã€‚å¯¹äºåç»­çš„é¡¹ç›®å®æˆ˜æ¥è¯´ï¼Œæ˜¯éå¸¸é‡è¦çš„ç¼–ç¨‹èƒ½åŠ›ç§¯ç´¯\n\næµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰å‡½æ•°çš„åŠŸèƒ½éƒ½èƒ½æ­£å¸¸å®ç°ï¼\n\n\nç»“è¯­ğŸ¤³å­¦ä¹ å®Œå•é“¾è¡¨åï¼Œæˆ‘å¼€å§‹æ¥è§¦äº†ä¸€äº›é“¾è¡¨çš„ojé¢˜ç›®ï¼Œä¸å¾—ä¸è¯´ï¼Œé“¾è¡¨è¿™éƒ¨åˆ†çš„é¢˜ç›®ï¼Œéš¾åº¦è¿˜æ˜¯æ¯”ä¹‹å‰Cè¯­è¨€çš„æ—¶å€™ç»ƒä¹ çš„é¢˜ç›®æ›´å¤§çš„ï¼æœ‰å¾ˆå¤šé¢˜ç›®éƒ½éœ€è¦æˆ‘ä»¬èä¼šè´¯é€šä¹‹å‰çš„çŸ¥è¯†ã€‚\næœ€é‡è¦çš„æ˜¯é€šè¯»ä»£ç å’Œè°ƒè¯•çš„èƒ½åŠ›ï¼Œè¿™æ ·æ‰èƒ½æ›´å¥½åœ°ç¼–å†™å‡ºç®—æ³•\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘å¸¦ä½ åˆ·çˆ†åé“é“¾è¡¨OJ","url":"/posts/3770717253/","content":"[TOC]\nå‰è¨€ï¼ŒCSDNçš„å°é—®é¢˜ğŸ˜¥æœ€è¿‘å†™åšå®¢çš„æ—¶å€™ï¼Œå‘ç°CSDNçš„markdownè¯­æ³•ä¸æ”¯æŒåŠ ç²—ä¸€å¥è¯æœ«å°¾çš„æ ‡ç‚¹ç¬¦å·\n**ä½ å¥½å‘€ï¼Œ****ä½ å¥½å‘€**ï¼Œ\n\nè¿™ä¸¤ç§æ–¹å¼åœ¨typoraä¸Šéƒ½ä¼šåŠ ç²—ï¼ˆåŒ…æ‹¬æœ«å°¾çš„æ ‡ç‚¹ï¼‰\nä½†æ˜¯åœ¨CSDNä¸Šï¼Œç¬¬ä¸€ç§æƒ…å†µä¼šæ˜¾ç¤ºå‡ºmarkdownæºç ï¼Œæ— æ³•åŠ ç²—\n\nä½ å¥½å‘€ï¼Œæˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹ä½ å¥½å‘€ï¼Œæˆ‘æ˜¯ä½ çš„å¥½æœ‹å‹\n\nè™½ç„¶è¿™ä¸æ˜¯ä»€ä¹ˆå¤§äº‹ï¼Œä½†æœ‰çš„æ—¶å€™å†™åšå®¢ï¼Œä¸€å¥æœ¬æ¥åº”è¯¥æ˜¯åŠ ç²—çš„è¯ï¼Œå¤šæ˜¾ç¤ºäº†å‡ ä¸ª**ï¼Œä¸å¤ªç¾è§‚ï¼Œè¿˜ä¼šç»™ä¸äº†è§£markdownçš„è¯»è€…å¸¦æ¥å›°æ‰°ï¼šâ€œä½œè€…åœ¨è¿™é‡Œæ‰“å‡ ä¸ª*å·æ˜¯å¹²å˜›ï¼Ÿâ€\n\nä¸Šä¸€ç¯‡åšå®¢ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å•å‘æ— å¤´éå¾ªç¯é“¾è¡¨ï¼Œæœ¬ç¯‡åšå®¢å°±è®©æˆ‘ä»¬å®è·µä¸€ä¸‹ï¼Œåˆ·åé“leetcodeçš„é“¾è¡¨OJé¢˜ç›®å§ğŸŒ­\nå¦‚æœä½ æŠŠæœ¬ç¯‡åšå®¢é‡Œçš„è¿™å‡ é“é¢˜éƒ½å¼„æ˜ç™½äº†ï¼Œé‚£è¯´æ˜ä½ å¯¹é“¾è¡¨çš„æŒæ¡å·²ç»éå¸¸æ£’äº†ï¼åŠ æ²¹ï¼\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥ä»Šå¤©çš„æ­£é¢˜ï¼\nç¬¬ä¸€é¢˜ï¼š206.åè½¬é“¾è¡¨\nleetcodeï¼š206. åè½¬é“¾è¡¨\n\né¢˜ç›®éœ€è¦æˆ‘ä»¬æŠŠ1-2-3-4-5çš„é“¾è¡¨åè½¬ä¸º5-4-3-2-1çš„é“¾è¡¨\n\næœ‰ä¸€ç§å–å·§çš„åŠæ³•ï¼Œæ˜¯å°†æ‰€æœ‰æ•°å–å‡ºæ¥æ”¾å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå†å€’ç€å°†æ•°ç»„é‡Œé¢çš„æ•°æ”¾å›å»\nè¿™ç§åŠæ³•å¯ä»¥é€šè¿‡OJï¼Œå› ä¸ºleetcodeå¹¶æ²¡æœ‰æ£€æŸ¥è¿”å›é“¾è¡¨çš„åœ°å€ã€‚ä½†å¹¶ä¸ç¬¦åˆé¢˜ç›®çš„çœŸæ­£è¦æ±‚\n\nstruct ListNode* reverseList(struct ListNode* head)&#123;    struct ListNode* newhead=NULL;    struct ListNode* cur=head;    while(cur)    &#123;        struct ListNode* next=cur-&gt;next;        cur-&gt;next=newhead;        newhead=cur;        cur=next;    &#125;    return newhead;&#125;\n\n\n\nç¬¬äºŒé¢˜ï¼š876.é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\nLeetCodeï¼š 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹\n\n\nè¿™é“é¢˜ç›®éœ€è¦æˆ‘ä»¬è¿”å›å•é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹\nå¦‚æœé“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¥‡æ•°ï¼Œè¿”å›ä¸­é—´èŠ‚ç‚¹ï¼›\nå¦‚æœé“¾è¡¨èŠ‚ç‚¹ä¸ªæ•°æ˜¯å¶æ•°ï¼Œè¿”å›ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚\n\nå¯¹äºæ•°ç»„å’Œé¡ºåºè¡¨æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ©ç”¨ä¸‹æ ‡ç›´æ¥è®¿é—®ä¸­é—´èŠ‚ç‚¹å³å¯\nå¯¹äºå•é“¾è¡¨æ¥è¯´ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å®ƒç©¶ç«Ÿæœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå³ä¾¿çŸ¥é“äº†ï¼Œä¹Ÿéœ€è¦é€šè¿‡éå†çš„æ–¹æ³•æ‰¾åˆ°è¿™ä¸ªä¸­é—´èŠ‚ç‚¹\n\n\nè¿™é“é¢˜æˆ‘æƒ³å‡ºäº†ä¸¤ç§è§£é¢˜æ–¹å¼\nè§£æ³•ä¸€ï¼šéå†é€šè¿‡éå†å¾—å‡ºè¯¥é“¾è¡¨çš„èŠ‚ç‚¹ä¸ªæ•°ï¼Œå†ä½¿ç”¨ä¸€ä¸ªæ–°çš„æŒ‡é’ˆï¼ŒæŸ¥æ‰¾ä¸­é—´èŠ‚ç‚¹\nstruct ListNode* middleNode(struct ListNode* head)&#123;    if(head==NULL)        return NULL;    int count=1;//è®¡ç®—é“¾è¡¨ä¸€å…±çš„èŠ‚ç‚¹æ•°    struct ListNode* tail=head;//æ‰¾å°¾    while(tail-&gt;next!=NULL)    &#123;        tail=tail-&gt;next;        count++;    &#125;    int half=(count/2);     //å¦‚æœæ˜¯3ç»“æœä¸º1ï¼Œå¦‚æœæ˜¯4ç»“æœä¸º2    //æ­£å¥½æ˜¯ä»headå¼€å§‹å¯»æ‰¾çš„æ¬¡æ•°    struct ListNode* mid =head;    while((mid-&gt;next!=NULL)&amp;&amp;(half--))    &#123;        mid=mid-&gt;next;    &#125;    return mid;&#125;\n\nå¯¹äºé“¾è¡¨ojé¢˜ç›®ï¼Œleetcodeä¼šæŠŠè¿™ä¸ªé“¾è¡¨çš„å½¢å¼ä»¥æ³¨é‡Šçš„æ–¹å¼æ ‡æ³¨åœ¨æœ€å‰é¢\n\nè§£æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆï¼ˆå¾ˆçˆ½ğŸ‘ï¼‰\nè¿™ç§æ–¹æ³•å®ç°èµ·æ¥ä¹Ÿå¾ˆæ˜¯ç®€æ´ï¼Œä¹Ÿå‡»è´¥äº†æ›´å¤šç”¨æˆ·ï¼\nstruct ListNode* middleNode(struct ListNode* head)&#123;    if(head==NULL)        return NULL;    struct ListNode*fast=head;    struct ListNode*slow=head;    while(fast&amp;&amp;fast-&gt;next)    &#123;        fast=fast-&gt;next-&gt;next;        slow=slow-&gt;next;    &#125;    return slow;&#125;\n\n\n\nç¬¬ä¸‰é¢˜ï¼šOR36 é“¾è¡¨çš„å›æ–‡ç»“æ„ğŸ‘¨â€ğŸ”§\nç‰›å®¢ç½‘ï¼šOR36 é“¾è¡¨çš„å›æ–‡ç»“æ„\n\n\nè¿™é“é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„æ–¹æ³•\n\nå…ˆæ‰¾åˆ°è¿™ä¸²é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼ˆå¯ä»¥ç”¨åˆ°876é‡Œçš„å‡½æ•°ï¼‰\n\nå†å°†è¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„é“¾è¡¨é€†ç½®ï¼ˆ206åè½¬é“¾è¡¨ï¼‰\n\n\n1-2-3-2-1//é€†ç½®å1-2-1-2-3\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€†ç½®å‡½æ•°å¹¶ä¸ä¼šæ”¹å˜ç¬¬ä¸€ä¸ª2çš„nextèŠ‚ç‚¹ï¼Œå®ƒä¾æ—§æ˜¯é“¾æ¥åœ¨3ä¸Šçš„\n//è¿›è¡Œéå†åˆ¤æ–­1-2-(3)1-2-3\n\nè¿™æ ·æˆ‘ä»¬å°±èƒ½åˆ¤æ–­å‡ºè¯¥é“¾è¡¨æ˜¯å¦ä¸ºå›æ–‡ç»“æ„äº†ï¼\n\nå¼€å§‹æ•²ä»£ç ï¼Œå‘ç°ç‰›å®¢ç½‘ä¸Šåªæœ‰C++çš„é€‰é¡¹ï¼Œæ²¡æœ‰Cè¯­è¨€\n\nå®é™…ä¸Šï¼ŒC++ç¼–è¯‘å™¨éƒ½æ˜¯æ”¯æŒCè¯­è¨€çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨é¢˜ç›®ç»™å‡ºçš„C++ç»“æ„ä¸‹è¿›è¡ŒCè¯­è¨€ä»£ç çš„ç¼–å†™\n\né¢˜ç›®è¦æ±‚çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªboolç±»å‹ã€‚å¦‚æœä½ ä¸äº†è§£å®ƒï¼Œå¸ƒå°”ç±»å‹æ˜¯C99å¼•å…¥çš„ï¼Œç®€å•çš„æ¥è¯´ï¼Œtureä»£è¡¨1ï¼Œfalseä»£è¡¨0\n\nåœ¨ä¹‹å‰çš„åšå®¢ä¸­æˆ‘å†™åˆ°è¿‡è¿™ä¸ªç±»å‹ğŸ‘‰ç‚¹æˆ‘\n\n\nclass PalindromeList &#123;public:    //é“¾è¡¨é€†ç½®    struct ListNode* reverseList(struct ListNode* head) &#123;        struct ListNode* newhead = NULL;        struct ListNode* cur = head;        while (cur)        &#123;            struct ListNode* next = cur-&gt;next;            cur-&gt;next = newhead;            newhead = cur;            cur = next;        &#125;        return newhead;    &#125;    //ä¸­é—´èŠ‚ç‚¹è¿”å›    //1 2 3 4  å¶æ•°ä¸ªï¼Œè¿”å›3    //1 2 3    å¥‡æ•°ä¸ªï¼Œè¿”å›2    struct ListNode* middleNode(struct ListNode* head) &#123;        if (head == NULL)            return NULL;        int count = 1;//è®¡ç®—é“¾è¡¨ä¸€å…±çš„èŠ‚ç‚¹æ•°        struct ListNode* tail = head;//æ‰¾å°¾        while (tail-&gt;next != NULL)        &#123;            tail = tail-&gt;next;            count++;        &#125;        int half = (count / 2);        //å¦‚æœæ˜¯3ç»“æœä¸º1ï¼Œå¦‚æœæ˜¯4ç»“æœä¸º2        //æ­£å¥½æ˜¯éœ€è¦ä»headå¼€å§‹å¯»æ‰¾çš„æ¬¡æ•°        struct ListNode* mid = head;        while ((mid-&gt;next != NULL) &amp;&amp; (half--))        &#123;            mid = mid-&gt;next;        &#125;        return mid;    &#125;    bool chkPalindrome(ListNode* A) &#123;        struct ListNode* mid = middleNode(A);        struct ListNode* ret = reverseList(mid);        //1 2 3 2 1 å›æ–‡é“¾è¡¨        //å…ˆé€†è½¬åé¢3ä¸ª        //1 2 1 2 3        //è¿™æ—¶å€™ç¬¬ä¸€ä¸ª2å­˜æ”¾çš„nextä¾æ—§æ˜¯ä¸‹ä¸€ä¸ª3çš„åœ°å€        //ä½¿ç”¨whileå¾ªç¯è¿›è¡Œåˆ¤æ–­ï¼Œéƒ½æ˜¯åˆ¤æ–­3æ¬¡æ˜¯å¦ç›¸ç­‰        //ç›¸ç­‰å°±æ˜¯å›æ–‡ï¼Œå¦åˆ™ä¸æ˜¯        while (A &amp;&amp; ret)        &#123;            if (A-&gt;val == ret-&gt;val)            &#123;                A = A-&gt;next;                ret = ret-&gt;next;            &#125;            else            &#123;                return false;            &#125;        &#125;        return true;    &#125;&#125;;\n\n\n\nç¬¬å››é¢˜ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬Kä¸ªèŠ‚ç‚¹\nç‰›å®¢ç½‘ï¼šé“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªç»“ç‚¹\n\n\nè¿™é“é¢˜æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆæ¥è§£å†³\nå€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ï¼Œå°±éœ€è¦å¿«æŒ‡é’ˆå…ˆèµ°kæ­¥\n\nè¿™é‡Œæˆ‘å°è¯•ç”¨PSåšäº†ä¸€ä¸ªåŠ¨å›¾ï¼Œç»™å¤§ä¼™ç…ç…\n\n\nè¿™é“é¢˜ä¹Ÿæ˜¯åªæœ‰C++é€‰é¡¹ã€‚å’Œä¸Šé“é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨C++ä¸‹ç¼–å†™Cè¯­è¨€ä»£ç å°±å¯ä»¥äº†\nclass Solution &#123;public:    ListNode* FindKthToTail(ListNode* pListHead, unsigned int k) &#123;        if (pListHead == NULL)            return NULL;                struct ListNode* fast = pListHead;        struct ListNode* slow = pListHead;        int i = k;        while (i--)        &#123;            if (fast == NULL)            &#123;                return NULL;            &#125;            fast = fast-&gt;next;        &#125;        while (fast)        &#123;            fast = fast-&gt;next;            slow = slow-&gt;next;        &#125;        return slow;    &#125;&#125;;\n\n\n\nç¬¬äº”é¢˜ï¼šCM11 é“¾è¡¨åˆ†å‰²\nç‰›å®¢ç½‘ï¼šCM11 é“¾è¡¨åˆ†å‰²\n\n\nè¿™é“é¢˜æˆ‘ä½¿ç”¨äº†å¸¦å¤´èŠ‚ç‚¹çš„åšæ³•ï¼Œhead-&gt;nextç­‰åŒäºä¸å¸¦å¤´é“¾è¡¨çš„headæŒ‡é’ˆ\nclass Partition &#123;public:    ListNode* partition(ListNode* pHead, int x) &#123;    if(pHead==NULL)        return NULL;            struct ListNode* newhead=(struct ListNode*)malloc(sizeof(struct ListNode));//æ–°é“¾è¡¨-æ¯”xå°çš„éƒ¨åˆ†    struct ListNode* Bigger=(struct ListNode*)malloc(sizeof(struct ListNode));//æ¯”xå¤§çš„éƒ¨åˆ†            //è¿™é‡Œéœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„æŒ‡é’ˆæ¥éå†é“¾è¡¨ï¼Œé˜²æ­¢æ‰¾ä¸åˆ°å¤´    struct ListNode* head=newhead;    struct ListNode* big=Bigger;        while(pHead)    &#123;//éå†é‡Œé¢æ¯”xå°çš„ï¼Œé“¾æ¥åœ¨newheadä¸Š        if(pHead-&gt;val  &lt;x)        &#123;            head-&gt;next=pHead;            pHead=pHead-&gt;next;            head=head-&gt;next;                    &#125;        else        &#123;//æ¯”xå¤§çš„é“¾æ¥åœ¨biggerä¸Š            big-&gt;next=pHead;            pHead=pHead-&gt;next;            big=big-&gt;next;        &#125;    &#125;    big-&gt;next=NULL;//bigçš„æœ«å°¾éœ€è¦ç½®ç©º    head-&gt;next=Bigger-&gt;next;//è®©headçš„æœ«å°¾é“¾æ¥biggerçš„å¤´éƒ¨            struct ListNode* list=newhead-&gt;next;    free(newhead);    free(Bigger);    return list;    &#125;&#125;;\n\n\nç¬¬å…­é¢˜ï¼š21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\nleetcodeï¼š21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\n\n\nè¿™é“é¢˜çš„è§£æå°±æ”¾æ³¨é‡Šå•¦\nstruct ListNode* mergeTwoLists(struct ListNode* list1, struct ListNode* list2)&#123;    if(list1==NULL)        return list2;    if(list2==NULL)        return list1;    struct ListNode* H1=list1;    struct ListNode* H2=list2;    struct ListNode* newList=NULL;    struct ListNode* tail=NULL;    if(H1-&gt;val&lt;H2-&gt;val)//é€‰å–æ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹    &#123;        newList=H1;        tail=H1;        H1=H1-&gt;next;    &#125;    else    &#123;        newList=H2;        tail=H2;        H2=H2-&gt;next;    &#125;    while(H1 &amp;&amp; H2)//å…¶ä¸­ä¸€ä¸ªèµ°å®Œäº†ï¼Œå°±é€€å‡ºå¾ªç¯    &#123;        if(H1-&gt;val&lt;H2-&gt;val)//æ‰¾å°çš„é‚£ä¸€ä¸ªé“¾æ¥åœ¨å°¾éƒ¨        &#123;            tail-&gt;next=H1;            tail=H1;//ç­‰åŒäºtail=tail-&gt;next            H1=H1-&gt;next;        &#125;        else        &#123;            tail-&gt;next=H2;            tail=H2;//ç­‰åŒäºtail=tail-&gt;next            H2=H2-&gt;next;        &#125;    &#125;//æœ€åç»“æŸäº†ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯è°èµ°å®Œäº†ï¼ŒæŠŠå¦å¤–ä¸€ä¸ªé“¾è¡¨å‰©ä¸‹çš„éƒ¨åˆ†é“¾æ¥åœ¨å°¾éƒ¨//é“¾è¡¨æœ¬èº«æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æœ€åæ— éœ€å†è¿›è¡Œæ’åºï¼Œç›´æ¥é“¾æ¥å³å¯    if(H1)        tail-&gt;next=H1;    if(H2)        tail-&gt;next=H2;        return newList;&#125;\n\n\n\nç¬¬ä¸ƒé¢˜ï¼š160.ç›¸äº¤é“¾è¡¨\nleetcodeï¼š160. ç›¸äº¤é“¾è¡¨\n\n\né¢˜ç›®éœ€è¦æˆ‘ä»¬è¿”å›ä¸¤ä¸ªç›¸äº¤é“¾è¡¨çš„äº¤ç‚¹c1ï¼Œå¦‚æœä¸ç›¸äº¤å°±è¿”å›NULLã€‚\næœ€åä¸€è¡Œè¿˜æåˆ°äº†ï¼Œè¿™é“é¢˜ä¸èƒ½ç ´ååŸå§‹é“¾è¡¨\n\næœ¬é¢˜æ€è·¯å¦‚ä¸‹ï¼š\n\nå…ˆç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«éå†Aã€Bé“¾è¡¨ï¼Œå¾—åˆ°ä¸¤ä¸ªé“¾è¡¨é•¿åº¦\néå†å®Œæ¯•æ—¶ï¼ŒæŒ‡é’ˆå¤„åœ¨æœ«å°¾C3ï¼Œå¦‚æœæœ«å°¾ä¸ç›¸ç­‰ï¼Œå°±è¯´æ˜è¯¥é“¾è¡¨ä¸ç›¸äº¤ï¼Œè¿”å›NULL\nå¦‚æœç›¸ç­‰ï¼Œè®¡ç®—å‡ºAã€Bé“¾è¡¨çš„é•¿åº¦å·®ï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆè¿›è¡Œæ“ä½œ\nå¿«æŒ‡é’ˆä»é•¿é“¾è¡¨å¼€å§‹èµ°ï¼Œå…ˆèµ°|A-B|é•¿åº¦ã€‚ç„¶åæ…¢æŒ‡é’ˆä¹Ÿå¼€å§‹ç§»åŠ¨ï¼Œç›´åˆ°å®ƒä»¬ç›¸äº¤\n\n\nstruct ListNode *getIntersectionNode(struct ListNode *headA, struct ListNode *headB) &#123;    if((headA==NULL)||(headB==NULL))        return NULL;    int countA=1;    int countB=1;    struct ListNode *HA=headA;    struct ListNode *HB=headB;    while(HA&amp;&amp;HA-&gt;next)    &#123;        countA++;        HA=HA-&gt;next;    &#125;    while(HB&amp;&amp;HB-&gt;next)    &#123;        countB++;        HB=HB-&gt;next;    &#125;    if(HB!=HA)//ç»“å°¾ä¸ç›¸ç­‰ï¼Œè¯´æ˜ä¸ç›¸äº¤        return NULL;    int num=abs(countA-countB);    struct ListNode* fast=NULL;    struct ListNode* slow=NULL;    if(countA&gt;countB)    &#123;        fast=headA;        slow=headB;    &#125;    else    &#123;        fast=headB;        slow=headA;    &#125;    while(num--)//fastå…ˆèµ°    &#123;        fast=fast-&gt;next;    &#125;    while(fast&amp;&amp;slow)    &#123;        if(fast==slow)            return fast;        fast=fast-&gt;next;        slow=slow-&gt;next;    &#125;    return NULL;&#125;\n\n\n\nç¬¬å…«é¢˜ï¼š141.ç¯å½¢é“¾è¡¨\nleetcodeï¼š141. ç¯å½¢é“¾è¡¨\n\n\næœ¬é¢˜åªéœ€è¦æˆ‘ä»¬åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼Œæˆ‘ä»¬åŒæ ·ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå¿«æŒ‡é’ˆçš„é€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆçš„ä¸¤å€ï¼Œè¿›ç¯ä»¥åï¼Œå¿«æŒ‡é’ˆèƒ½è¿½ä¸Šåæ¥çš„æ…¢æŒ‡é’ˆï¼Œå³è¯¥é“¾è¡¨å¸¦ç¯ã€‚\n\nå¦‚æœå¿«æŒ‡é’ˆé‡åˆ°äº†NULLï¼Œå³è¯¥é“¾è¡¨ä¸å¸¦ç¯\n\né¢˜ç›®éœ€è¦è¿”å›boolç±»å‹ï¼Œå‰é¢å·²ç»æåˆ°è¿‡äº†~\n\nbool hasCycle(struct ListNode *head) &#123;    if(head==NULL)        return false;        struct ListNode * slow=head;    struct ListNode * fast=head;    struct ListNode * meet=NULL;    while(fast &amp;&amp; fast-&gt;next)    &#123;        fast=fast-&gt;next-&gt;next;        slow=slow-&gt;next;        if(fast==slow)        &#123;            return true;        &#125;    &#125;    return false;    &#125;\n\n\nç‰¹æ®Šæƒ…å†µï¼šè¿½ä¸ä¸Š\nè¿™é‡Œæœ‰ä¸€ä¸ªé™„åŠ çš„æ€è€ƒé—®é¢˜ï¼šfastæŒ‡é’ˆæ¯”slowèµ°å¾—å¿«ï¼Œå®ƒä»¬å°±ä¸€å®šèƒ½è¿½ä¸Šå—ï¼Ÿ\n\n\nç¬¬ä¹é¢˜ï¼š142.ç¯å½¢é“¾è¡¨â…¡ï¼ˆè¾ƒéš¾ğŸ˜°ï¼‰\nleetcodeï¼š142. ç¯å½¢é“¾è¡¨ II\n\nè¿™é“é¢˜æ¯”ä¸Šä¸€é“å¤šäº†ä¸€ä¸ªè¦æ±‚ï¼Œéœ€è¦æˆ‘ä»¬è¿”å›é“¾è¡¨ç¯å½¢çš„å¼€å§‹èŠ‚ç‚¹\n\nç¤ºä¾‹1é‡Œçš„å¼€å§‹èŠ‚ç‚¹ä¸º2ï¼ˆä¸‹æ ‡ä¸º1ï¼‰\nç¤ºä¾‹2é‡Œçš„å¼€å§‹èŠ‚ç‚¹ä¸º1ï¼ˆä¸‹æ ‡ä¸º0ï¼‰\n\n\n\né¢˜ç›®åˆ†æè¿™æ—¶å€™ï¼Œå•çº¯ç”¨å¿«æ…¢æŒ‡é’ˆå·²ç»ä¸è¡Œäº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æƒ³åŠæ³•æ‰¾åˆ°ç¯çš„èµ·å§‹èŠ‚ç‚¹\n\næ ‡å‡ºé•¿åº¦ï¼Œç›´çº¿éƒ¨åˆ†ä¸ºLï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“meetç©¶ç«Ÿåœ¨ç¯çš„å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Œè®¾ç¯çš„èµ·ç‚¹båˆ°meetçš„é•¿åº¦ä¸ºXï¼ˆè¿™é‡Œè¦æ³¨æ„å…ˆåé¡ºåºï¼Œé¿å…ææ··ï¼Œè§ä¸‹å›¾ï¼‰\n\nå‡è®¾æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªheadä»é“¾è¡¨çš„å¼€å¤´aå¼€å§‹èµ°ï¼Œä¸€ä¸ªä»meetå¼€å§‹èµ°ï¼Œæœ€ç»ˆå®ƒä»¬ä¸€å®šä¼šåœ¨bç‚¹ç›¸äº¤ï¼\n\nä»meetä½ç½®å¼€å§‹èµ°çš„æŒ‡é’ˆmeetï¼Œåœ¨ç¯é‡Œèµ°N*C-Xçš„é•¿åº¦æ¥åˆ°bï¼ˆè¿™é‡Œçš„NæŒ‡çš„æ˜¯åœ¨ç¯ä¸­èµ°çš„åœˆæ•°ï¼Œæ˜¯ä¸ªæœªçŸ¥æ•°ï¼‰\nä»é“¾è¡¨å¼€å¤´aå¼€å§‹èµ°çš„æŒ‡é’ˆheadï¼Œèµ°Lé•¿åº¦æ¥åˆ°bï¼›\nmeetå’Œheadæ¯æ¬¡éƒ½èµ°ä¸€æ­¥ï¼ˆæ­¥é•¿ç›¸åŒï¼‰ï¼›\n\nåœ¨ä¸Šä¸€é“é“¾è¡¨æœ‰ç¯ç›¸äº¤çš„é¢˜ç›®ä¸­ï¼š\n\nfastæŒ‡é’ˆèµ°äº†L+N*C+Xçš„è·ç¦»ï¼›\nslowæŒ‡é’ˆèµ°äº†L+Xï¼›\næ…¢æŒ‡é’ˆæ˜¯ä¸å¯èƒ½åœ¨ç¯ä¸­èµ°è¶…è¿‡ä¸€åœˆçš„ï¼Œå› ä¸ºå¿«æ…¢æŒ‡é’ˆæ¯æ¬¡çš„æ­¥é•¿ä¸º1ï¼Œæ˜¯ä¸å¯èƒ½é”™è¿‡çš„ï¼›\nfastæŒ‡é’ˆèµ°çš„è·ç¦»æ˜¯slowçš„ä¸¤å€ï¼Œå³ L+N*C+X = 2(L+X)ï¼›\n\nè¿™æ—¶å€™å°±èƒ½æ ¹æ®ä¸Šæ–¹å…¬å¼å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šL = N*C - Xï¼›\nåˆ†è§£ä¸€ä¸‹è¿™ä¸ªè¡¨è¾¾å¼ï¼ŒL=(N-1)*C + (C-X)ï¼Œä½ ä¼šå‘ç°ï¼ŒC-Xä¸å°±æ˜¯meetåˆ°bç‚¹ï¼ˆç›¸é‡ç‚¹ï¼‰çš„è·ç¦»å—ï¼Ÿ\nä»¥Nä¸º1çš„æƒ…å†µå‡è®¾ï¼Œå³faståœ¨ç¯å†…åªèµ°äº†ä¸€åœˆå°±å’Œslowç›¸é‡äº†ï¼Œæ­¤æ—¶å…¬å¼åŒ–ç®€æˆL = C-Xï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒNä¸º1æ—¶ï¼Œä¸€ä¸ªæŒ‡é’ˆä»é“¾è¡¨å¼€å¤´å¼€å§‹èµ°ï¼Œä¸€ä¸ªæŒ‡é’ˆä»ç›¸é‡ä½ç½®å¼€å§‹èµ°ï¼Œå®ƒä»¬ç›¸äº¤çš„åœ°æ–¹å°±æ˜¯é“¾è¡¨çš„ç¯å…¥å£ã€‚\næ¨å¹¿åˆ°Nå¤§äº1çš„æƒ…å†µï¼Œå³meetæŒ‡é’ˆèµ°C-Xçš„é•¿åº¦æ¥åˆ°bç‚¹ï¼Œå†åœ¨ç¯å†…èµ°N-1åœˆå°±ä¼šä¸headç›¸é‡ï¼ä¸ç®¡Næ˜¯å¤šå°‘ï¼Œæœ€ç»ˆéƒ½ä¼šåœ¨ç¯çš„å…¥å£å¤„ç›¸é‡ã€‚\næ•²ä»£ç åˆ†æåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ•²ä»£ç äº†~\nstruct ListNode *detectCycle(struct ListNode *head) &#123;    if (head == NULL)        return NULL;    struct ListNode* slow = head;    struct ListNode* fast = head;    struct ListNode* meet = NULL;    while (fast &amp;&amp; fast-&gt;next)    &#123;        fast = fast-&gt;next-&gt;next;        slow = slow-&gt;next;        if (fast == slow)        &#123;            meet=fast;//å¯»æ‰¾ç›¸äº¤ç‚¹            break;        &#125;    &#125;    if((fast==NULL)|| (fast-&gt;next==NULL))        return NULL;//å¦‚æœfastæ˜¯é‡åˆ°ç©ºé€€å‡ºå¾ªç¯çš„ï¼Œè¯´æ˜ä¸å¸¦ç¯    while(1)    &#123;        if(head==meet)//ç›¸é‡ç‚¹å³ä¸ºç¯çš„èµ·ç‚¹             return meet;                meet=meet-&gt;next;        head=head-&gt;next;    &#125;    return NULL;&#125;\n\n\nç¬¬åé¢˜ï¼š138.å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨ï¼ˆå¾ˆéš¾ğŸ˜±ï¼‰\nLeetCodeï¼š138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨\n\nä¼—æ‰€å‘¨çŸ¥ï¼Œå½“leetcodeç»™ä¸€é“é¢˜æ ‡å‡ºâ€œä¸­ç­‰â€çš„æ—¶å€™ï¼Œæˆ‘è¿™ç§èœğŸ•å°±è¦å†™Nä¹…ï¼Œæ‰€ä»¥å¯¹äºæˆ‘æ¥è¯´ï¼Œç®€å•&#x3D;æœ‰éš¾åº¦ï¼Œä¸­ç­‰&#x3D;éå¸¸éš¾ã€‚\næœ¬é¢˜è¾ƒéš¾çš„åœ°æ–¹ä¸åœ¨äºå¤åˆ¶é“¾è¡¨ï¼Œè€Œåœ¨äºå¤„ç†æ–°é“¾è¡¨çš„randomæŒ‡é’ˆ\n\nè§£æ³•ä¸€ï¼šç”¨è®¡æ•°å™¨æ‰¾åˆ°å¯¹åº”ä½ç½®\nè¿™ä¸ªæ–¹æ³•çš„ç¼ºç‚¹æ˜¯ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä¸¤æ¬¡éå†ï¼Œç¬¬ä¸€æ¬¡è®¡æ•°ï¼Œç¬¬äºŒæ¬¡æ˜¯åœ¨æ–°çš„é“¾è¡¨ä¸­æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N^2^)\nä¸è¿‡æœ¬é¢˜å¹¶æ²¡æœ‰å¯¹æ—¶é—´å¤æ‚åº¦åšå‡ºè¦æ±‚ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è‚¯å®šä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼\n\né‡ç‚¹æ¥ç…ç…è¿™ä¸ªéå¸¸å¥³å°‘çš„è§£æ³•äºŒ\nè§£æ³•äºŒï¼šå…ˆå¤åˆ¶åæ–­å¼€(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§è¿™ä¸ªè§£æ³•çš„æ€è·¯æ˜¯ï¼Œå…ˆåœ¨åŸé“¾è¡¨çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åæ’å…¥ä¸€ä¸ªå’Œå®ƒç›¸åŒçš„æ–°èŠ‚ç‚¹\n\nå†åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆè¿›è¡Œrandomçš„æŸ¥æ‰¾\n\nç¬¬ä¸€ä¸ª7çš„randomæ˜¯ç©ºï¼Œæˆ‘ä»¬ç›´æ¥ç»™æ–°çš„7randomç½®ç©º\nç¬¬äºŒä¸ª13çš„randomæŒ‡å‘å‰ä¸€ä½7ï¼Œæ–°13çš„randomæŒ‡å‘åŸ13randomçš„ä¸‹ä¸€ä½ï¼Œå³æ–°å¼€è¾Ÿçš„7\nç¬¬ä¸‰ä¸ª11çš„randomæŒ‡å‘1ï¼Œæ–°11çš„randomæŒ‡å‘åŸé“¾è¡¨1çš„ä¸‹ä¸€ä½ï¼Œå³æ–°çš„1\n\nè¿™æ ·ä¸€ä¸€å¯¹åº”ï¼Œå°±èƒ½åœ¨æ–°å¼€è¾Ÿçš„é“¾è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„randomï¼\n\næœ€åï¼Œæˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯å°†æ–°å¼€è¾Ÿçš„èŠ‚ç‚¹ä»åŸé“¾è¡¨æ–­å¼€ï¼Œé‡æ–°é“¾æ¥æˆæ–°çš„é“¾è¡¨\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç›´æ¥ä¸€ä¸ªâ€œå¦™â€å°±è·‘å‡ºæ¥äº†ï¼Ÿ\n\n\næœ¬é¢˜å¹¶æ²¡æœ‰è¦æ±‚ä¸æ”¹å˜åŸé“¾è¡¨ï¼Œä½†æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯æŠŠåŸé“¾è¡¨è¿˜åŸæˆåˆå§‹çŠ¶æ€\n\nç›´æ¥ä¸Šæ‰‹æ•²ä»£ç ï¼Œå•ªå•ªå•ªï¼Œä¸€æäº¤ï¼Œæ‰§è¡Œå‡ºé”™ï¼\n\n\nä»”ç»†æ‰¾äº†æ‰¾ï¼Œå‘ç°æ˜¯ç¬¬ä¸‰ä¸ªæ¿å—æœ€åå¤„ç†æœ«å°¾çš„NULLæŒ‡é’ˆæ—¶ä¼šå‡ºç°é—®é¢˜\n\næœ€åçš„ä»£ç å¦‚ä¸‹ï¼\nstruct Node* copyRandomList(struct Node* head) &#123;\tif(head==NULL)        return NULL;    //1.å¤åˆ¶åŸé“¾è¡¨    struct Node*HAED=head;//è®°å½•å¤´èŠ‚ç‚¹    while(head)//å°†æ–°é“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹é“¾æ¥åœ¨åŸé“¾è¡¨ä¹‹å    &#123;        struct Node* newnode=(struct Node*)malloc(sizeof(struct Node));        newnode-&gt;val=head-&gt;val;        newnode-&gt;next=head-&gt;next;        head-&gt;next=newnode;        head=head-&gt;next-&gt;next;    &#125;    //2.é“¾æ¥æ–°é“¾è¡¨çš„random    struct Node* old=HAED;    while(old)    &#123;        struct Node* new=old-&gt;next;        if(old-&gt;random==NULL)            new-&gt;random=NULL;        else            new-&gt;random=old-&gt;random-&gt;next;        old=old-&gt;next-&gt;next;    &#125;    //3.å°†æ–°é“¾è¡¨è§£ä¸‹æ¥    struct Node* ret=HAED-&gt;next;//è®°å½•æœ€åçš„è¿”å›é“¾è¡¨    struct Node* oldlist=HAED;    while(oldlist)    &#123;        struct Node*copy=oldlist-&gt;next;        struct Node*next=copy-&gt;next;                oldlist-&gt;next=next;        if(copy-&gt;next==NULL)            copy-&gt;next=NULL;        else            copy-&gt;next=next-&gt;next;        oldlist=next;    &#125;     return ret;&#125;\n\nä¹Ÿå°±æ‰§è¡Œå‡ºé”™äº†åå‡ æ¬¡å°±æ‰¾åˆ°é”™è¯¯äº†â€¦â€¦é—®é¢˜ä¸å¤§ï¼ˆé˜¿å·´é˜¿å·´ï¼‰\n\nç¬¬åä¸€é¢˜ï¼šBM12é“¾è¡¨æ’åº\nBM12é“¾è¡¨æ’åº\n\nç»™å®šä¸€ä¸ªèŠ‚ç‚¹æ•°ä¸ºnçš„æ— åºå•é“¾è¡¨ï¼Œå¯¹å…¶æŒ‰å‡åºæ’åºã€‚\næ•°æ®èŒƒå›´ï¼š0&lt;nâ‰¤100000ï¼Œä¿è¯èŠ‚ç‚¹æƒå€¼åœ¨[-10^9,10^9]ä¹‹å†…ã€‚\nè¦æ±‚ï¼šç©ºé—´å¤æ‚åº¦ O(N)ï¼Œæ—¶é—´å¤æ‚åº¦ O(NlogN)\n\næ–¹æ³•1ï¼šå› ä¸ºå…è®¸O(N)çš„æ—¶é—´å¤æ‚åº¦ï¼Œç›´æ¥å°†å…¶å†™å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ’åºåé‡æ–°é“¾æ¥å°±å¯ä»¥äº†ã€‚std::sortçš„æ—¶é—´å¤æ‚åº¦æ­£å¥½æ˜¯ O(NlogN)ï¼Œä¹Ÿç¬¦åˆè¦æ±‚\næ–¹æ³•2ï¼šé‡‡ç”¨å½’å¹¶æ’åºï¼Œä¸æ–­å·¦å³åˆ‡åˆ†ï¼Œæœ€å°çš„åˆ†æ”¯æ˜¯åªæœ‰2ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ’æˆæœ‰åºåœ°è¿”å›ï¼›å†å°†ä¸¤ä¸ªé“¾è¡¨ç»™è¿èµ·æ¥\n\nå…·ä½“çš„çœ‹ä»£ç çš„æ³¨é‡Šå§ï¼\n/** * struct ListNode &#123; *  int val; *  struct ListNode *next; *  ListNode(int x) : val(x), next(nullptr) &#123;&#125; * &#125;; */#include &lt;unistd.h&gt;#include &lt;vector&gt;class Solution &#123;  public:    void PrintList(ListNode* head, const string&amp; pstr) &#123;        cout &lt;&lt; pstr &lt;&lt; &quot;  &quot;;        while (head != nullptr) &#123;            cout &lt;&lt; head-&gt;val &lt;&lt; &quot; &quot;;            head = head-&gt;next;        &#125;        cout &lt;&lt; endl;    &#125;    // æ— å·®åˆ«é€†ç½®    ListNode* reverseNode(ListNode* head) &#123;        if (head == nullptr || head-&gt;next == nullptr) &#123;            return head;        &#125;        ListNode* ans = reverseNode(head-&gt;next);        head-&gt;next-&gt;next = head;        head-&gt;next = nullptr;        return ans;    &#125;    // é€’å½’å‡½æ•°    ListNode* _sortInList(ListNode* head) &#123;        // å¦‚æœåªæœ‰ä¸€ä¸ªå€¼ï¼Œç›´æ¥è¿”å›        if (head == nullptr || head-&gt;next == nullptr) &#123;            return head;        &#125;        // å¦‚æœæ˜¯ä¸¤ä¸ªå€¼ï¼Œé‚£å°±è¿›è¡Œæ’åºåè¿”å›æ–°é“¾è¡¨çš„å¤´        if (head-&gt;next-&gt;next == nullptr) &#123;            ListNode* low = head, *big = head-&gt;next;            if (head-&gt;val &gt; head-&gt;next-&gt;val) &#123;                low = head-&gt;next;                big = head;            &#125;            low-&gt;next = big;            big-&gt;next = nullptr;            return low; // è¿”å›ä¸€ä¸ªå‡åºçš„é“¾è¡¨        &#125;        // å¦‚æœæ˜¯è¶…è¿‡ä¸¤ä¸ªé“¾è¡¨ï¼Œé‚£å°±è¿›è¡Œæ‰¾ä¸­ï¼Œå¹¶å°†å…¶æ‹†åˆ†ä¸ºä¸¤ä¸ªé“¾è¡¨ä¼ ç»™è‡ªå·±        ListNode* slow = head, *fast = head;        while (fast != nullptr &amp;&amp; fast-&gt;next != nullptr) &#123;            slow = slow-&gt;next;            fast = fast-&gt;next-&gt;next;        &#125;        // èµ°åˆ°è¿™é‡Œï¼Œslowå°±æ˜¯ä¸­é—´çš„å€¼ï¼Œå°†å…¶æ‹†åˆ†æ‰        ListNode* Lhead = head;        ListNode* Rhead = slow-&gt;next;        slow-&gt;next = nullptr;        // ä¼ é€’ç»™è‡ªå·±ï¼Œç»§ç»­åˆ†åŒ–        Lhead = _sortInList(Lhead);        Rhead = _sortInList(Rhead);        // PrintList(Lhead, &quot;L&quot;);        // PrintList(Rhead, &quot;R&quot;);        // æœ€ç»ˆè·å–åˆ°çš„ä¸¤ä¸ªé“¾è¡¨éƒ½æ˜¯æœ‰åºçš„ï¼Œå°†å…¶è¿èµ·æ¥        ListNode phead(0), *cur_next;        while (Lhead != nullptr &amp;&amp; Rhead != nullptr) &#123;            // æ‰¾å‡ºå°çš„ï¼Œå¤´æ’            if (Lhead-&gt;val &lt; Rhead-&gt;val) &#123;                cur_next = Lhead-&gt;next; // å…ˆè®°å½•ä¸‹ä¸‹ä¸€ä¸ªå€¼                // å¤´æ’                Lhead-&gt;next = phead.next;                phead.next = Lhead;                // ç§»åŠ¨åˆ°åŸæœ¬çš„ä¸‹ä¸€ä¸ªå€¼                Lhead = cur_next;            &#125; else &#123;                cur_next = Rhead-&gt;next;  // å…ˆè®°å½•ä¸‹ä¸‹ä¸€ä¸ªå€¼                Rhead-&gt;next = phead.next;// å¤´æ’                phead.next = Rhead;                Rhead = cur_next;// ç§»åŠ¨åˆ°åŸæœ¬çš„ä¸‹ä¸€ä¸ªå€¼            &#125;        &#125;        // å¦‚æœè¿˜æœ‰å‰©ä½™å€¼ï¼Œé‚£å°±å…¨éƒ¨å¤´æ’        ListNode* not_empty = Lhead != nullptr ? Lhead : Rhead;        while (not_empty != nullptr) &#123;            cur_next = not_empty-&gt;next;// å…ˆè®°å½•ä¸‹ä¸‹ä¸€ä¸ªå€¼            not_empty-&gt;next = phead.next;// å¤´æ’            phead.next = not_empty;            not_empty = cur_next;// ç§»åŠ¨åˆ°åŸæœ¬çš„ä¸‹ä¸€ä¸ªå€¼        &#125;        // å› ä¸ºæ˜¯æŠŠå°å€¼å¤´æ’ï¼Œæœ€ç»ˆå¾—åˆ°çš„æ˜¯é™åºåºåˆ—ï¼Œæ‰€ä»¥éœ€è¦é€†åº        return reverseNode(phead.next);    &#125;    class BigListnode&#123;    public:        bool operator()(ListNode*L,ListNode*R)&#123;            return L-&gt;val &gt; R-&gt;val;        &#125;    &#125;;    /**     * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯     *     *     * @param head ListNodeç±» the head node     * @return ListNodeç±»     */    ListNode* sortInList(ListNode* head) &#123;        if (head == nullptr || head-&gt;next == nullptr) &#123;            return head;        &#125;        // return _sortInList(head); // æ–¹æ³•1ï¼Œé€’å½’+å½’å¹¶        // æ–¹æ³•2ï¼Œç”¨vectoræ’åº        ListNode* cur = head;        vector&lt;ListNode*&gt; nodev;        while (cur != nullptr) &#123;            nodev.push_back(cur);            cur = cur -&gt;next;        &#125;        // æ’åºï¼Œå†™ä¸ªä»¿å‡½æ•°ï¼ˆæ’é™åºæ–¹ä¾¿å¤´æ’ï¼‰        sort(nodev.begin(),nodev.end(),BigListnode());        ListNode phead(0);        // éå†ä¸€éï¼Œé‡æ–°è¿èµ·æ¥        for(auto&amp;e:nodev)&#123;            // å¤´æ’            e-&gt;next = phead.next;            phead.next = e;        &#125;        return phead.next;    &#125;&#125;;\n\n\n\nç»“è¯­ğŸ’ªåˆ·å®Œè¿™äº›é¢˜ï¼Œæœ‰æ²¡æœ‰è§‰å¾—è‡ªå·±å¯¹é“¾è¡¨çš„ç†è§£ç›´æ¥æ›´ä¸Šä¸€å±‚æ¥¼ï¼Ÿ\n\nå¦‚æœå¤§å®¶å¯¹æŸé“é¢˜æœ‰é—®é¢˜ï¼Œæˆ–è€…æœ‰æˆ‘æ²¡æœ‰è¯´æ¸…æ¥šçš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºæ¥å“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","OJåˆ·é¢˜","é“¾è¡¨"]},{"title":"ã€C++ã€‘å›¾","url":"/posts/1235355339/","content":"æœ¬æ–‡åŒ…å«äº†å›¾çš„åŸºæœ¬æ¦‚å¿µ\n\n\n1.ç›¸å…³æ¦‚å¿µ1.1 æ— &#x2F;æœ‰å‘æ— å‘å›¾ï¼šæ¯ä¸€ä¸ªé¡¶ç‚¹ä¹‹é—´çš„è¿çº¿æ²¡æœ‰æ–¹å‘\næœ‰å‘å›¾ï¼šè¿çº¿æœ‰æ–¹å‘ï¼ˆç±»ä¼¼ç¦»æ•£æ•°å­¦çš„äºŒå…ƒå…³ç³» &lt;A,B&gt;ä»£è¡¨ä»Aåˆ°Bçš„è¾¹ï¼Œæœ‰æ–¹å‘ï¼‰\n&lt;A,B&gt;ä¸­Aä¸ºå§‹ç‚¹ï¼ŒBä¸ºç»ˆç‚¹\n\nåœ¨æ— å‘å›¾ä¸­ï¼Œ(V,U)å’Œ(U,V)æ˜¯åŒä¸€æ¡è¾¹\n1.2 é¡¶ç‚¹å’Œè¾¹å›¾ä¸­çš„èŠ‚ç‚¹å«åšé¡¶ç‚¹ã€‚\né¡¶ç‚¹ä¹‹é—´çš„çº¿æ¡å°±æ˜¯è¾¹ï¼Œè¡¨ç¤ºäº‹ç‰©ä¸äº‹ç‰©ä¹‹é—´çš„å…³ç³»ã€‚\n\n1.3 è‡ªå›è·¯&#x2F;å¤šé‡å›¾\n1.4 å®Œå…¨å›¾å›¾ä¸­æ¯ä¸€ä¸ªé¡¶ç‚¹éƒ½æœ‰è¿çº¿ï¼ˆæœ‰æœ€å¤šçš„è¾¹æ•°ï¼‰å°±å«åšå®Œå…¨å›¾\nè®¾é¡¶ç‚¹ä¸ºNä¸ª\n\næ— å‘å®Œå…¨å›¾ä¸­n(n-1)/2æ¡è¾¹\næœ‰å‘å®Œå…¨å›¾ä¸­n(n-1)æ¡è¾¹\n\n1.5 é‚»æ¥ä¸å…³è”æ— å‘å›¾ä¸­(u,v)æ˜¯ä¸€æ¡è¾¹\n\né¡¶ç‚¹uå’Œvé‚»æ¥\nè¾¹(u,v)ä¸é¡¶ç‚¹uå’Œvç›¸å…³è”\n\n1.6 å­å›¾\nå›¾ä¸­G3æ˜¯G1çš„å­å›¾ï¼ŒG4æ˜¯G2çš„å­å›¾\nç®€å•è¯´æ¥ï¼Œå°±æ˜¯å­å›¾æ˜¯åŸå›¾çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…æ‹¬é¡¶ç‚¹ã€è¾¹ï¼ˆæ³¨æ„æ–¹å‘ï¼‰éƒ½æ˜¯åŸå›¾ä¸­çš„ä¸€éƒ¨åˆ†\n1.6 è·¯å¾„è·¯å¾„æ˜¯é¡¶ç‚¹åºåˆ—\nè·¯å¾„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ç»è¿‡çš„è¾¹\n\nè·¯å¾„é•¿åº¦ï¼šè·¯å¾„ä¸Šè¾¹çš„æ•°ç›®\nç®€å•è·¯å¾„ï¼šé™¤èµ·ç‚¹ã€ç»ˆç‚¹å¯ä»¥ç›¸åŒå¤–ï¼Œè·¯å¾„ä¸­å…¶ä½™é¡¶ç‚¹ä¸ç›¸åŒ\nå›è·¯ï¼šèµ·ç‚¹å’Œé‡ç‚¹ç›¸åŒçš„ç®€å•è·¯å¾„\n\n1.7 è¿é€šå›¾ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´åªè¦æœ‰è·¯å¾„ï¼Œé‚£å°±æ˜¯è¿é€šçš„\n\nè¿é€šå›¾ï¼šæ— å‘å›¾ä¸­ä»»æ„ä¸¤ç‚¹ä¹‹é—´éƒ½æœ‰è·¯å¾„ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªè¿é€šå›¾\nè¿é€šåˆ†é‡ï¼šæ— å‘å›¾çš„æå¤§è¿é€šå­å›¾\n\n\næ³¨æ„ï¼Œè™½ç„¶è¿é€šåˆ†é‡è¢«ç§°ä¸ºâ€œæå¤§è¿é€šå­å›¾â€ï¼Œä½†å®ƒå¹¶ä¸æ˜¯èŠ‚ç‚¹æœ€å¤šçš„å“ªä¸€ä¸ªã€‚æ¯”å¦‚ä¸Šå›¾ä¸­çš„G2å’ŒG3éƒ½æ˜¯æå¤§è¿é€šå­å›¾ã€‚\n\n\nå¼ºè¿é€šå›¾ï¼šæœ‰å‘å›¾ä¸­ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´Uå’ŒVä¹‹é—´æœ‰Uåˆ°Vçš„è·¯å¾„ï¼Œé‚£å°±ä¸€å®šæœ‰ä»Våˆ°Uçš„è·¯å¾„\nå¼ºè¿é€šåˆ†é‡ï¼šæœ‰å‘å›¾çš„æå¤§è”é€šå­å›¾\n\n\nå¼ºè¿é€šå›¾G1çš„æå¤§å¼ºè¿é€šåˆ†é‡å°±æ˜¯å®ƒè‡ªå·±ï¼ˆåªæœ‰éå¼ºè¿é€šå›¾æ‰æœ‰å¤šä¸ªå¼ºè¿é€šåˆ†é‡ï¼‰\nä¸Šå›¾ä¸­G2å°±ä¸æ˜¯å¼ºè”é€šå›¾ï¼Œå› ä¸º4èŠ‚ç‚¹æ²¡æœ‰å…¥è¾¹ï¼ˆä¹Ÿå°±æ²¡æœ‰èŠ‚ç‚¹èƒ½åˆ°4ï¼‰\n\nç¬¬ä¸‰å›¾çš„ä¸ŠåŠéƒ¨åˆ†å¹¶éG1çš„å¼ºè¿é€šåˆ†é‡ï¼Œä½†æ˜¯æ˜¯G2çš„å¼ºåŠ›è¿é€šåˆ†é‡ã€‚\nåŒæ—¶ï¼Œå•ç‹¬çš„4é¡¶ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªå¼ºè¿é€šåˆ†é‡ï¼ˆå•ç‹¬é¡¶ç‚¹éƒ½æ˜¯ï¼‰\n\n1.7 é¡¶ç‚¹çš„åº¦åº¦ï¼šä¸è¯¥é¡¶ç‚¹ç›¸å…³è”çš„è¾¹çš„æ•°ç›®\n\nå…¥åº¦ï¼šå°„å…¥vçš„è¾¹çš„æ•°ç›®\nå‡ºåº¦ï¼šä»vå°„å‡ºå»çš„è¾¹çš„æ•°ç›®\n\n1.8 ç”Ÿæˆæ ‘ç”Ÿæˆæ ‘åŒ…å«å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä½†æ˜¯åªæœ‰è¶³å¤Ÿæ„æˆä¸€é¢—æ ‘çš„n-1æ¡è¾¹\n\nå› ä¸ºn-1æ¡è¾¹å†åŠ ä¸Šä¸€æ¡å°±ä¼šæ„æˆå›è·¯\nç”Ÿæˆæ ‘ä¸­ä¸åŒ…å«å›è·¯\n\n1.9 ç½‘ç»™å›¾ä¸­çš„æ¯æ¡è¾¹éƒ½æ·»åŠ ä¸Šæƒå€¼ï¼Œå¸¦æƒçš„å›¾ç§°ä¸ºç½‘\n2.è¡¨ç¤ºæ³•2.1 é‚»æ¥çŸ©é˜µç”¨äºŒç»´æ•°ç»„æ¥è¡¨ç¤ºæ¯ä¸ªé¡¶ç‚¹ä¹‹é—´çš„å…³ç³»ï¼ˆçŸ©é˜µï¼‰\n\nä¼˜ç¼ºç‚¹ä¼˜ç‚¹\n\nä¾¿äºåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®ä¸‹æ ‡åˆ¤æ–­ï¼ŒO(1)\nä¾¿äºè®¡ç®—å„ä¸ªé¡¶ç‚¹çš„åº¦\næ— å‘å›¾ï¼šç¬¬iè¡Œå…ƒç´ ä¹‹å’Œå°±æ˜¯é¡¶ç‚¹içš„åº¦ï¼ˆå‰ææ˜¯ç”¨1æ¥è¡¨ç¤ºï¼‰\næœ‰å‘å›¾ï¼šç¬¬iè¡Œå…ƒç´ ä¹‹å’Œä¸ºé¡¶ç‚¹içš„å‡ºåº¦ï¼›ç¬¬iåˆ—ä¸ºå…¥åº¦\n\n\n\nç¼ºç‚¹\n\nå¦‚æœèŠ‚ç‚¹å¤šï¼Œè¾¹å°‘ï¼Œå°±ä¼šå‡ºç°ç©ºé—´æµªè´¹\næ— æ³•æ–¹ä¾¿åœ°æ‰¾åˆ°ä¸€ä¸ªé¡¶ç‚¹å’Œé‚£ä¸€æ¡è¾¹ç›¸è¿ï¼ˆéœ€è¦éå†ï¼‰\nå¯¹äºæ— å‘å›¾ï¼Œä¹Ÿä¼šå‡ºç°ç©ºé—´æµªè´¹\n\n2.2 é‚»æ¥è¡¨é‚»æ¥è¡¨æœ‰äº›ç±»ä¼¼äºå“ˆå¸Œè¡¨çš„æ‹‰é“¾æ³•ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹åé¢è·Ÿç€ä¸€ä¸ªå•é“¾è¡¨ï¼Œç”¨äºå­˜å‚¨ä¸è¿™ä¸ªèŠ‚ç‚¹ç›¸è¿çš„èŠ‚ç‚¹ã€‚\nåœ¨G2çš„æœ‰å‘å›¾ä¸­ï¼Œä¸€èˆ¬å­˜å‚¨çš„æ˜¯å‡ºåº¦è¡¨ï¼Œå³ä»è¯¥èŠ‚ç‚¹å‡ºå‘çš„è¾¹ã€‚å¦‚æœè¾¹æœ‰æƒå€¼ï¼Œåˆ™è¿˜éœ€è¦å­˜å‚¨æƒå€¼\n\nä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š\n\nå¯ä»¥å¿«é€Ÿæ‰¾åˆ°ä¸€ä¸ªèŠ‚ç‚¹å’Œè°ç›¸è¿ï¼ˆå‡ºåº¦ï¼‰\n\nç¼ºç‚¹\n\nä¸ä¾¿äºåˆ¤æ–­ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹\nä¸ä¾¿äºè®¡ç®—æœ‰å‘å›¾å„ä¸ªé¡¶ç‚¹çš„åº¦ï¼ˆéœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ï¼‰\n\nå…³äºç¬¬äºŒä¸ªç¼ºç‚¹ï¼Œå¯ä»¥æ–°å¢ä¸€ä¸ªå…¥åº¦è¡¨ï¼ˆå³ä¸€ä¸ªå‡ºåº¦è¡¨&#x2F;ä¸€ä¸ªå…¥è¯»è¡¨ï¼‰æ¥è®¡ç®—ã€‚ä½†æ˜¯è¿™æ ·ä¼šå¢åŠ æ—¶ç©ºå¤æ‚åº¦ã€‚\n3.éå†3.1 æ·±åº¦ä¼˜å…ˆDFSæ·±åº¦ä¼˜å…ˆä»¥é€’å½’ä¸ºåŸºæœ¬æ€è·¯ï¼Œä»ä¸€ä¸ªç»“ç‚¹å¼€å§‹ï¼Œé€’å½’å‘åéå†è¿™ä¸ªèŠ‚ç‚¹çš„å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚\n\nä¸ºäº†é¿å…åŒä¸€ä¸ªèŠ‚ç‚¹éå†å¤šæ¬¡ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªboolæ•°ç»„æ¥æ ‡è¯†ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦éå†è¿‡ã€‚å¦‚æœéå†è¿‡ï¼Œåˆ™æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼è®¾å®šä¸ºtrueæ¥æ ‡è¯†\nç”±äºæ·±åº¦ä¼˜å…ˆçš„é€’å½’éƒ¨åˆ†åªèƒ½éå†è¿é€šå›¾ã€‚è‹¥å‡ºç°äº†ä¸Šå›¾ä¸­éè”é€šçš„æƒ…å†µï¼Œéœ€è¦æˆ‘ä»¬åœ¨å¤–å¾ªç¯ä¸­é‡æ–°éå†ä¸€ä¸‹boolæ ‡è¯†æ•°ç»„ï¼Œç¡®è®¤æ‰€æœ‰èŠ‚ç‚¹éƒ½éå†å®Œæˆã€‚\nå¦‚æœæ¼äº†èŠ‚ç‚¹ï¼ˆå°±æ˜¯æ²¡æœ‰å’Œå…¶ä»–èŠ‚ç‚¹è”é€šçš„ç‹¬ç«‹èŠ‚ç‚¹ï¼‰é‚£ä¹ˆå°±ä»¥æ­¤èŠ‚ç‚¹å¼€å¤´å†è¿›è¡Œä¸€æ¬¡æ·±åº¦éå†ã€‚\n\n3.2 å¹¿åº¦ä¼˜å…ˆBFS\nå¹¿åº¦ä¼˜å…ˆéå†ç±»ä¼¼äºŒå‰æ ‘çš„å±‚åºéå†ï¼Œä¾é å¾ªç¯+é˜Ÿåˆ—æ¥å®Œæˆéå†\n\nå…¥èµ·å§‹èŠ‚ç‚¹ï¼Œæ‰“å°èµ·å§‹èŠ‚ç‚¹çš„å€¼\nå‡ºé˜Ÿå¤´èŠ‚ç‚¹ï¼ˆç¬¬ä¸€æ¬¡çš„æ—¶å€™æ˜¯èµ·å§‹èŠ‚ç‚¹ï¼‰å¾€é˜Ÿåˆ—ä¸­å…¥è¯¥èŠ‚ç‚¹å•é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹\nä¾æ­¤ç±»æ¨ï¼Œå‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å…¥è¿™ä¸ªèŠ‚ç‚¹å•é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹\nåŒæ ·åœ°ç”¨ä¸€ä¸ªboolæ•°ç»„æ ‡è¯†èŠ‚ç‚¹æ˜¯å¦è¢«è®¿é—®ã€‚å¦‚æœè¢«è®¿é—®äº†åˆ™è·³è¿‡è¯¥èŠ‚ç‚¹\nä¹Ÿéœ€è¦åœ¨é˜Ÿåˆ—å¾ªç¯ç»“æŸåéå†ä¸€éboolæ•°ç»„ï¼Œç¡®è®¤æ‰€æœ‰èŠ‚ç‚¹éƒ½è®¿é—®å®Œæ¯•ã€‚\n\n\n3.3 åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦è¿é€šä½¿ç”¨ä»»ä½•éå†æ–¹å¼ï¼Œéå†å®Œæ¯•åæ£€æŸ¥boolæ•°ç»„\nè‹¥æœ‰èŠ‚ç‚¹æ²¡æœ‰è¢«è®¿é—®ï¼Œåˆ™è¯´æ˜æ˜¯éè¿é€šå›¾\n4.æ‹“æ‰‘æ’åº\nhttps://blog.musnow.top/posts/1720780208/\n\nç»™å®šä¸€ä¸ªå›¾ï¼Œæ¯æ¬¡éƒ½é€‰æ‹©ä¸€ä¸ªæ— å…¥åº¦ï¼ˆæ²¡æœ‰å…¥è¾¹ï¼‰çš„èŠ‚ç‚¹åŠ å…¥åºåˆ—ä¸­ï¼Œå¹¶åˆ é™¤è¯¥èŠ‚ç‚¹çš„å‡ºè¾¹\næœ€ç»ˆå¾—åˆ°çš„åºåˆ—å°±æ˜¯ä¸€ä¸ªæ‹“æ‰‘æ’åºä¹‹åçš„åºåˆ—\n\næ¯æ¬¡åˆ é™¤å‡ºè¾¹åï¼Œéƒ½å¯èƒ½å½¢æˆæ–°çš„æ— å…¥åº¦çš„èŠ‚ç‚¹\n\nå› æ­¤ï¼Œé’ˆå¯¹åŒä¸€æ£µæ ‘çš„æ‹“æ‰‘æ’åºåºåˆ—ï¼Œå¯èƒ½æœ‰å¤šç§ä¸åŒçš„æƒ…å†µ\n5.æœ€å°ç”Ÿæˆæ ‘ç®—æ³•ç”Ÿæˆæ ‘çš„æ¦‚å¿µå‚è€ƒ 1.8 ç”Ÿæˆæ ‘ï¼Œæœ€å°ç”Ÿæˆæ ‘å³è®©ç”Ÿæˆæ ‘ä¸­æ‰€æœ‰è¾¹çš„æƒå€¼åŠ èµ·æ¥æœ€å°\n5.1 æ™®é‡Œå§†Prim\nå¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬å…ˆæ ¹æ®è¿™ä¸ªæ ‘çš„ç»“æ„æ„é€ ä¸‰ä¸ªæ•°ç»„\n\nnearestä»£è¡¨å’Œè¿™ä¸ªèŠ‚ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼ˆé»˜è®¤ä¸º-1ï¼‰\nlowcostä»£è¡¨å’Œè¿™ä¸ªèŠ‚ç‚¹æœ€è¿‘èŠ‚ç‚¹çš„æƒå€¼ï¼ˆé»˜è®¤ä¸ºæ— ç©·å¤§ï¼‰\nmarkæ˜¯ä¸€ä¸ªboolæ•°ç»„ï¼Œæ ‡è¯†è¯¥èŠ‚ç‚¹æ˜¯å¦å·²ç»åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘\n\nå½“æˆ‘ä»¬æ¯ä»å›¾ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œå°±éœ€è¦æ›´æ–°è¿™ä¸‰ä¸ªè¡¨\nå¦‚å›¾ï¼Œå½“æˆ‘ä»¬å–èµ°0ä¹‹åï¼Œå°±éœ€è¦æ›´æ–°å’Œ0è¿é€šçš„ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­nearestä»£è¡¨åˆšåˆšåˆ é™¤æ‰çš„èŠ‚ç‚¹0ï¼Œlowcostä»£è¡¨å®ƒä»¬å’Œ0ç›¸è¿è¾¹çš„æƒå€¼ï¼›åŒæ—¶è¦æŠŠmarkä¸­0æ”¹ä¸ºtrueï¼Œè¡¨æ˜0å·²ç»åŠ å…¥ç”Ÿæˆæ ‘äº†\n\nç¬¬äºŒæ¬¡é€‰å–çš„æ—¶å€™ï¼Œéå†lowcostè¡¨ï¼Œæ‰¾åˆ°æƒå€¼æœ€å°çš„è¾¹ä¸º(0,2)æƒå€¼ä¸º1ã€‚æ­¤æ—¶å°±æŠŠ2åŠ å…¥è¿›å»ï¼Œå¹¶æ›´æ–°ä¸2ç›¸è¿çš„èŠ‚ç‚¹3ï¼ˆæ³¨ï¼Œå¿…é¡»è¦æƒå€¼æ›´å°æ‰éœ€è¦æ›´æ–°ï¼‰\n\nä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½åŠ å…¥äº†æœ€å°ç”Ÿæˆæ ‘ï¼ˆå·¦ä¸‹è§’çš„å›¾ï¼‰\n\nè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ï¼Œåªä¸èŠ‚ç‚¹çš„æ•°é‡Næœ‰å…³\n5.2 å…‹é²æ–¯å¡å°”Kruskal\næ„å»ºä¸€ä¸ªå’ŒåŸå›¾ä¸€æ ·çš„èŠ‚ç‚¹å›¾ï¼ˆæ— è¾¹ï¼‰åœ¨åŸå›¾ä¸­æŸ¥æ‰¾æƒå€¼æœ€å°çš„è¾¹ï¼Œåˆ¤æ–­å…¶èŠ‚ç‚¹æ˜¯å¦å·²ç»ç›¸åŒï¼Œå¦‚æœæ²¡æœ‰å½¢æˆç¯ï¼Œåˆ™åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘çš„å›¾ä¸­\n\nåˆ¤æ–­æ˜¯å¦æˆç¯å¯ä»¥é€šè¿‡å¹¶æŸ¥é›†è§£å†³\n\nå¦‚ä¸‹å›¾ï¼Œå…ˆéå†æ‰€æœ‰è¾¹ï¼Œå‘ç°(0,2)çš„æƒå€¼æœ€å°ï¼Œåˆ¤æ–­è¯¥è¾¹åŠ å…¥åå¹¶ä¸ä¼šä½¿ç”Ÿæˆæ ‘å½¢æˆç¯ï¼Œåˆ™åŠ å…¥è¯¥è¾¹\n\nä¸‹å›¾ä¸­(0,2)ä¹‹é—´çš„è¾¹1å·²ç»ç§»åŠ¨åˆ°äº†Tå›¾ä¸Š\nåŒæ—¶å°†0å’Œ2åŠ å…¥åˆ°åŒä¸€ä¸ªå¹¶æŸ¥é›†çš„åˆé›†å†…\n\n\nåŒç†ç»§ç»­æ‰¾æƒå€¼æœ€å°çš„è¾¹ï¼ŒåŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­ã€‚å¦‚ä¸‹ï¼Œå°†3è¾¹ç§»åŠ¨åˆ°å³å›¾ã€‚\n\næ­¤æ—¶æˆ‘ä»¬é‡åˆ°äº†3æ¡æƒå€¼æœ€å°çš„è¾¹ï¼Œæƒå€¼éƒ½ä¸º5ã€‚æ­¤æ—¶å¯ä»¥éšä¾¿åŠ å…¥ä¸€æ¡è¾¹å³å¯ï¼ˆä¸èƒ½ä½¿ç”Ÿæˆæ ‘æˆç¯ï¼‰\nå¦‚ä¸‹å›¾ä¸­(0,3)å’Œ(2,3)çš„è¾¹åŠ å…¥åä¼šä½¿å›¾æˆç¯ï¼Œä¸èƒ½é€‰æ‹©è¯¥è¾¹\n\nå¹¶æŸ¥é›†ä¸­0ã€2ã€3ã€5å·²ç»åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œæ­¤æ—¶åˆ¤æ–­(0,3)åœ¨ä¸€ä¸ªé›†åˆï¼Œè¯¥è¾¹ä¸èƒ½åŠ å…¥ï¼›(2,3)åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œè¯¥è¾¹ä¸èƒ½åŠ å…¥\n\n\nåº”è¯¥é€‰æ‹©(1,2)è¿™æ¡è¾¹ï¼Œå…¶ä¸ä¼šè®©æ ‘æˆç¯\n\næ­¤æ—¶æ‰€æœ‰è¾¹éƒ½å·²ç»è¿èµ·æ¥äº†ï¼Œæœ€å°ç”Ÿæˆæ ‘ç”ŸæˆæˆåŠŸ\nç®—æ³•åˆ†æ\n\nè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(E*logE)ï¼Œå…¶ä¸­Eä¸ºè¾¹çš„æ•°ç›®\n6.æœ€çŸ­è·¯å¾„å¸¦æƒæœ‰å‘å›¾ä¸­ï¼ŒæŠŠä¸€æ¡è·¯å¾„ï¼ˆä»…è€ƒè™‘ç®€å•è·¯å¾„ï¼‰ä¸Šæ‰€ç»è¾¹çš„æƒå€¼ä¹‹å’Œå®šä¹‰ä¸ºè¯¥è·¯å¾„çš„è·¯å¾„é•¿åº¦\nä»æºç‚¹åˆ°ç»ˆç‚¹å¯èƒ½ä¸æ­¢ä¸€æ¡è·¯å¾„ï¼ŒæŠŠè·¯å¾„é•¿åº¦æœ€çŸ­çš„é‚£æ¡è·¯å¾„ç§°ä¸ºæœ€çŸ­è·¯å¾„\n6.1 å•æºæœ€çŸ­è·¯å¾„æ€è·¯æœ‰äº›ç±»ä¼¼å¹¶æŸ¥é›†ï¼Œpathæ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸Šä¸€æ¡è·¯å¾„ï¼Œè‹¥ä¸‹æ ‡1å¤„å­˜æ”¾0ï¼Œåˆ™ä»£è¡¨æ˜¯ä»0èµ°åˆ°1ã€‚åŒæ—¶dæ•°ç»„ä¸­æ ‡è¯†ä»0èµ°åˆ°ä¸‹æ ‡1çš„é•¿åº¦ã€‚\n\næŠŠ1åŠ åˆ°såºåˆ—ä¹‹åï¼Œå‘ç°0åˆ°èŠ‚ç‚¹2çš„è·¯å¾„é•¿åº¦ç¼©çŸ­äº†ï¼Œä»åŸæœ¬çš„(0,2)çš„6å˜æˆäº†ç°åœ¨(0,1)+(1,2)çš„4+1=5ï¼Œé•¿åº¦ç¼©çŸ­ï¼Œå¯¹åº”dæ•°ç»„ä¸­ä¸‹æ ‡2å¤„ä¹Ÿéœ€è¦æ›´æ–°\nç»§ç»­ä¸‹å»ï¼Œç›´åˆ°Uæ•°ç»„ä¸­æ²¡æœ‰èŠ‚ç‚¹ï¼ŒSæ•°ç»„ä¸­èŠ‚ç‚¹æ»¡ï¼Œå³å¯è·å¾—ä¸€ä¸ªä»0å‡ºå‘åˆ°ä»»ä½•èŠ‚ç‚¹çš„å•æºæœ€çŸ­è·¯å¾„\n\n6.1.1 ç‹„å…‹æ–¯ç‰¹æ‹‰ç®—æ³•Dijkstraæ±‚è§£å•æºæœ€çŸ­è·¯å¾„é—®é¢˜çš„ç®—æ³•\nå‰æï¼šç»™å®šä¸€ä¸ªå¸¦æƒæœ‰å‘å›¾Gå’Œæºç‚¹vï¼Œé™å®šå„è¾¹ä¸Šçš„æƒå€¼å¤§äºç­‰äº0\nåŸºäºå®šç†ï¼šæœ€çŸ­è·¯å¾„ä¸Šçš„é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„å°±æ˜¯è¯¥è·¯å¾„\n\nç†è§£ï¼šç°æœ‰ä¸€æ¡våˆ°uçš„æœ€çŸ­è·¯å¾„v-&gt;â€¦â€¦-&gt;a-&gt;uï¼Œé‚£ä¹ˆvåˆ°açš„æœ€çŸ­è·¯å¾„å³ä¸ºv-&gt;â€¦â€¦-&gt;a\n\nç®—æ³•æ€è·¯æŠŠå›¾Gä¸­çš„é¡¶ç‚¹é›†åˆVåˆ†æˆä¸¤éƒ¨åˆ†ï¼š\nç¬¬ä¸€éƒ¨åˆ†ï¼Œä¸ºå·²æ±‚å‡ºæœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹é›†åˆï¼ˆç”¨Sè¡¨ç¤ºï¼Œåˆå§‹æ—¶Sä¸­åªæœ‰ä¸€ä¸ªæºç‚¹ï¼Œä»¥åæ¯æ±‚å¾—ä¸€æ¡æœ€çŸ­è·¯å¾„vï¼Œâ€¦â€¦ï¼Œuï¼Œå°±å°†uåŠ å…¥åˆ°é›†åˆSä¸­ï¼Œç›´åˆ°å…¨éƒ¨é¡¶ç‚¹éƒ½åŠ å…¥åˆ°Sä¸­ï¼Œç®—æ³•ç»“æŸï¼‰\nç¬¬äºŒéƒ¨åˆ†ï¼Œä¸ºå…¶ä½™æœªæ±‚å‡ºæœ€çŸ­è·¯å¾„çš„é¡¶ç‚¹é›†åˆï¼ˆç”¨Uè¡¨ç¤ºï¼‰\nè¿‡ç¨‹ï¼š\n\nåˆå§‹åŒ–ï¼šSåªåŒ…å«æºç‚¹å³S&#x3D;{v}ï¼Œvçš„æœ€çŸ­è·¯å¾„ä¸º0ã€‚UåŒ…å«é™¤vä»¥å¤–çš„å…¶ä»–é¡¶ç‚¹ï¼ŒUä¸­é¡¶ç‚¹iè·ç¦»ä¸ºè¾¹ä¸Šçš„æƒå€¼ï¼ˆè‹¥vä¸iç›´æ¥ç›¸è¿ï¼‰æˆ–âˆï¼ˆvä¸iä¸æ˜¯ç›´æ¥ç›¸è¿ï¼‰\n\n\n\nä»Uä¸­é€‰å–ä¸€ä¸ªè·ç¦»væœ€å°çš„é¡¶ç‚¹uï¼ŒæŠŠuåŠ å…¥Sä¸­ï¼ˆè¯¥é€‰å®šçš„è·ç¦»å°±æ˜¯våˆ°uçš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼‰\n\n\n\n\nä»¥uä¸ºæ–°è€ƒè™‘çš„ä¸­é—´ç‚¹ï¼Œä¿®æ”¹Uä¸­å„é¡¶ç‚¹içš„æœ€çŸ­è·¯å¾„é•¿åº¦\n\n\nè‹¥ä»æºç‚¹våˆ°é¡¶ç‚¹ içš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼ˆç»è¿‡é¡¶ç‚¹uï¼‰æ¯”åŸæ¥æœ€çŸ­è·¯å¾„é•¿åº¦ï¼ˆä¸ç»è¿‡é¡¶ç‚¹uï¼‰çŸ­ï¼Œåˆ™ä¿®æ”¹é¡¶ç‚¹ içš„æœ€çŸ­è·¯å¾„é•¿åº¦\n\n\n\né‡å¤2ã€3æ­¥ï¼Œç›´è‡³æ‰€æœ‰é¡¶ç‚¹éƒ½åŒ…å«åœ¨Sä¸­\n\nä»£ç è®¾è®¡ç€é‡è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š\n\nå¦‚ä½•å­˜æ”¾æœ€çŸ­è·¯å¾„é•¿åº¦ï¼Ÿ\n\nç”¨ä¸€ç»´æ•°ç»„d[i]å­˜å‚¨ã€‚æºç‚¹vé»˜è®¤ï¼Œd[i]è¡¨ç¤ºæºç‚¹åˆ°é¡¶ç‚¹içš„æœ€çŸ­è·¯å¾„é•¿åº¦\n\nå¦‚d[2]&#x3D;12è¡¨ç¤ºæºç‚¹åˆ°é¡¶ç‚¹2çš„æœ€çŸ­è·¯å¾„é•¿åº¦ä¸º12\n\n\nå¦‚ä½•å­˜æ”¾æœ€çŸ­è·¯å¾„ï¼Ÿ\n\nç”¨ä¸€ç»´æ•°ç»„path[]å­˜å‚¨ã€‚pathæ•°ç»„ä¸­æ‰€å­˜å‚¨çš„æ•°ç»„ä»£è¡¨å½“å‰é¡¶ç‚¹åœ¨æœ€çŸ­è·¯å¾„ä¸­çš„å‰é©±é¡¶ç‚¹\n\nå¦‚path[3]&#x3D;1ï¼Œè¡¨ç¤ºåœ¨æœ€çŸ­è·¯å¾„ä¸­ï¼Œé¡¶ç‚¹3çš„å‰é©±é¡¶ç‚¹æ˜¯é¡¶ç‚¹1\n\nç®—æ³•æ¼”ç¤º\nè¿™æ˜¯åˆå§‹åŒ–çŠ¶æ€\nå‘ç°æ•°ç»„dä¸­é¡¶ç‚¹1è·ç¦»æºç‚¹è·ç¦»æœ€è¿‘ï¼Œé‚£ä¹ˆå°±å°†é¡¶ç‚¹1åŠ å…¥åˆ°Sä¸­\n\nè¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°å‰©ä½™ç‚¹çš„æœ€çŸ­è·¯å¾„é•¿åº¦å’Œæœ€çŸ­è·¯å¾„\næ˜¾ç„¶ï¼Œé¡¶ç‚¹2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ6å¹¶ä¸ä¼šéƒ½åšæ›´æ–°ã€‚åªæœ‰ä¸é¡¶ç‚¹1ç›´æ¥ç›¸è¿çš„é¡¶ç‚¹æ‰æœ‰å¯èƒ½ä¼šå—å½±å“ã€‚åœ¨ä¸Šå›¾ä¸­ä¼šå—å½±å“çš„ä¸ºé¡¶ç‚¹2å’Œé¡¶ç‚¹4\n\nåŸæœ¬é¡¶ç‚¹2çš„æœ€çŸ­è·¯å¾„é•¿åº¦æ˜¯6ï¼Œæœ€çŸ­è·¯å¾„æ˜¯&lt;0,2&gt;ã€‚ç°åœ¨ç”±äºé¡¶ç‚¹1çš„å¼•å…¥ï¼Œæœ€çŸ­è·¯å¾„é•¿åº¦å˜ä¸º5ï¼Œæœ€çŸ­è·¯å¾„å˜ä¸º&lt;0,1&gt;,&lt;1,2&gt;\né¡¶ç‚¹4åŒç†ï¼\nè‡³æ­¤ï¼Œå°±å®Œæˆäº†ä¸€æ¬¡é¡¶ç‚¹çš„å¼•å…¥ã€‚ä¸‹é¢é‡å¤ä¸Šè¿°æ“ä½œè‡³æ‰€æœ‰é¡¶ç‚¹éƒ½åœ¨Sä¸­å³å¯\nä¸‹é¢æ˜¯å…¨è¿‡ç¨‹ï¼š\n\n\n\n&#x3D;&#x3D;æ€»ç»“ä¸€ä¸‹ï¼šåœ¨æ›´æ–°då’Œpathæ•°ç»„æ—¶ï¼Œåªæœ‰ä¸æœ¬æ¬¡å¼•å…¥Sä¸­çš„é¡¶ç‚¹iç›´æ¥ç›¸è¿çš„åé©±é¡¶ç‚¹æ‰æœ‰å¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œå…¶ä½™é¡¶ç‚¹æ˜¯ä¸å¯èƒ½å˜çš„&#x3D;&#x3D;\nç°åœ¨æˆ‘ä»¬åˆ©ç”¨då’Œpathæ•°ç»„æ¥æ±‚è§£æœ€çŸ­è·¯å¾„é•¿åº¦å’Œæœ€çŸ­è·¯å¾„ï¼š\n\næ±‚æºç‚¹0åˆ°ç»ˆç‚¹6çš„æœ€çŸ­è·¯å¾„é•¿åº¦\n\nå³ä¸ºd[6]çš„å€¼ï¼Œä¸º16\n\næ±‚0åˆ°6çš„æœ€çŸ­è·¯å¾„\n\n\nä»ç»ˆç‚¹å¾€æºç‚¹æ‰¾\næ—¶é—´å¤æ‚åº¦æ—¶é—´å¤æ‚åº¦ä¸º O(n2)\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["æ•°æ®ç»“æ„","å›¾","Cpp"]},{"title":"ã€Cè¯­è¨€ã€‘æ•°æ®ç»“æ„-æ ˆï¼ˆè¯¦è§£ï¼‰","url":"/posts/3359083806/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨è¿™ä¸¤ç§ç»“æ„\n\né¡ºåºè¡¨ï¼šåšå®¢é“¾æ¥1\nå•é“¾è¡¨ï¼šåšå®¢é“¾æ¥2\né“¾è¡¨OJï¼šåšå®¢é“¾æ¥3\n\né™¤äº†å•é“¾è¡¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç»“æ„ï¼Œæ˜¯åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨ã€‚è¿™ä¸ªé“¾è¡¨çš„å½¢å¼å¦‚ä¸‹\n\nå¤´èŠ‚ç‚¹çš„prevæŒ‡å‘å°¾éƒ¨èŠ‚ç‚¹\nå°¾èŠ‚ç‚¹çš„nextæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œæ„æˆå¾ªç¯\n\n\nåˆ«çœ‹å®ƒçš„å½¢å¼æœ‰äº›å¤æ‚ï¼Œå®é™…ä»£ç çš„å®ç°ï¼Œæ¯”å•é“¾è¡¨è¿˜ç®€å•ï¼\nå› ä¸ºhead-&gt;prevæŒ‡å‘äº†å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰¾å°¾ã€‚å°¾åˆ çš„æ—¶å€™ä¹Ÿä¸éœ€è¦éå†æ‰¾å°¾èŠ‚ç‚¹çš„å‰ä¸€ä½ï¼Œå› ä¸ºå°¾èŠ‚ç‚¹çš„prevå°±å­˜æ”¾äº†å‰ä¸€ä½çš„åœ°å€ã€‚\næ‰€ä»¥è¿™é‡Œå°±å·æ‡’ä¸å†™åšå®¢äº†ï¼åæ­£ä¹Ÿæ²¡å•¥äººçœ‹ğŸ˜­\n\nå¥½å§ï¼Œæœ€åæˆ‘è¿˜æ˜¯å†™äº†ä¸€ç¯‡æ°´æ–‡ğŸ‘‰ç‚¹æˆ‘\n\n\næœ¬ç¯‡åšå®¢è®²è¿°çš„æ˜¯å¦å¤–ä¸€ä¸ªç‰¹åˆ«çš„çº¿æ€§è¡¨ï¼Œæ ˆ\n1.ä»€ä¹ˆæ˜¯æ ˆæ•°æ®ç»“æ„é‡Œçš„æ ˆï¼Œå’Œå‡½æ•°æ ˆå¸§ä¸­çš„â€œæ ˆâ€æœ‰ä¸€å®šç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šå®ƒä»¬å®Œå…¨ä¸åŒ\næ ˆä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„çº¿æ€§è¡¨ï¼Œå®ƒåªå…è®¸åœ¨è¡¨çš„ä¸€å¤´æ·»åŠ ã€åˆ é™¤æ•°æ®ã€‚\næ‰€æœ‰çš„æ•°æ®éƒ½éµå¾ªå…ˆè¿›åå‡ºï¼Œåè¿›å…ˆå‡ºçš„åŸåˆ™\n\nå‹æ ˆï¼šæ ˆçš„æ’å…¥æ“ä½œå«åšè¿›æ ˆ&#x2F;å‹æ ˆ&#x2F;å…¥æ ˆï¼Œæ–°çš„æ•°æ®å­˜æ”¾åœ¨æ ˆé¡¶\nå‡ºæ ˆï¼šæ ˆçš„åˆ é™¤æ“ä½œï¼Œå…ˆåˆ é™¤æ ˆé¡¶çš„æ•°æ®\n\n\n2.æ ˆçš„å®ç°æ ˆå¯ä»¥ç”¨æ•°ç»„æˆ–è€…é“¾è¡¨æ¥å®ç°ï¼Œç›¸å¯¹è€Œè¨€ï¼Œæ•°ç»„çš„æ–¹æ³•æ›´ä¼˜\nå› ä¸ºæ•°ç»„åœ¨å°¾æ’æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰¾åˆ°å°¾ã€‚è€Œå•é“¾è¡¨éœ€è¦éå†æ‰¾å°¾ï¼Œè€—æ—¶è¾ƒé•¿ã€‚\n\næ˜¯ä¸æ˜¯æœ‰äº›ä¼¼æ›¾ç›¸è¯†å‘¢ï¼Ÿæ²¡é”™ï¼Œå®é™…ä¸Šæ ˆåŒºå°±æ˜¯ä¸€ä¸ªåªèƒ½å°¾æ’+å°¾åˆ çš„é¡ºåºè¡¨\n3.æ•²ä»£ç ï¼3.1å¤´æ–‡ä»¶å…ˆç”¨å¤´æ–‡ä»¶å†™å¥½å’±ä»¬çš„å¤§çº²ï¼Œç„¶ååœ¨æ¥ä¸€ä¸€å®ç°è¿™äº›ä»£ç \n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;assert.h&gt;#include &lt;stdbool.h&gt;// æ”¯æŒåŠ¨æ€å¢é•¿çš„æ ˆtypedef int STDataType;typedef struct Stack&#123;\tSTDataType* a;\tint top; // æ ˆé¡¶\tint capacity; // å®¹é‡&#125;Stack;// åˆå§‹åŒ–æ ˆvoid StackInit(Stack* ps);// é”€æ¯æ ˆvoid StackDestroy(Stack* ps);// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data);// å‡ºæ ˆvoid StackPop(Stack* ps);// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps);// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps);// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›falseï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›truebool StackEmpty(Stack* ps);//æ‰“å°void StackPrint(Stack* ps);\n\nå’Œé¡ºåºè¡¨ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°æ¥è·å–æ ˆé¡¶å…ƒç´ ï¼Œè¿™ä¸€ç‚¹åœ¨å¾ˆå¤šOJé¢˜ç›®ä¸­éƒ½éœ€è¦ç”¨åˆ°ã€‚\n3.2å‡½æ•°å®ç°å¦‚æœä½ çœ‹è¿‡äº†æˆ‘ä¹‹å‰é¡ºåºè¡¨çš„åšå®¢ï¼Œè¿™éƒ¨åˆ†å¯¹ä½ æ¥è¯´æƒ³å¿…ä¸éš¾ã€‚\n\nå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n#include&quot;Stack.h&quot;// åˆå§‹åŒ–void StackInit(Stack* ps)&#123;\tSTDataType* new = (STDataType*)malloc(4*sizeof(STDataType) );\tif (new == NULL)\t\texit(-1);\telse\t&#123;\t\tps-&gt;a = new;\t\tps-&gt;top = 0;\t\tps-&gt;capacity = 4;\t&#125;&#125;// é”€æ¯æ ˆvoid StackDestroy(Stack* ps)&#123;\tassert(ps);\tfree(ps-&gt;a);\tps-&gt;a = NULL;\tps-&gt;capacity = 0;\tps-&gt;top = 0;&#125;// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data)&#123;\tassert(ps);\tif (ps-&gt;top == ps-&gt;capacity)//å®¹é‡æ£€æŸ¥\t&#123;\t\tSTDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);\t\tif (new == NULL)\t\t&#123;\t\t\texit(-1);\t\t&#125;\t\telse\t\t&#123;\t\t\tps-&gt;a = new;\t\t\tps-&gt;capacity *= 2;\t\t&#125;\t&#125;\tps-&gt;a[ps-&gt;top] = data;\tps-&gt;top++;&#125;// å‡ºæ ˆvoid StackPop(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top &gt; 0)\t\t(ps-&gt;top)--;&#125;// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps)&#123;\tassert(ps);\tassert(ps-&gt;top &gt; 0);\treturn ps-&gt;a[ps-&gt;top - 1];&#125;// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps)&#123;\tassert(ps);\treturn ps-&gt;top;&#125;// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top == 0)\t\treturn true;\telse\t\treturn false;&#125;void StackPrint(Stack* ps)&#123;\tassert(ps);\tint n = ps-&gt;top;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tprintf(&quot;%d &quot;, ps-&gt;a[i]);\t&#125;\tprintf(&quot;\\n&quot;);&#125;\n\nå¤§å®¶åœ¨è‡ªå·±ç¼–å†™è¿™ç§å¸¦å¤šä¸ªæ¿å—çš„ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¸€ä¸ªæ¿å—å†™å®Œå°±æ£€æŸ¥ä¸€éï¼ä¸è¦å°†é—®é¢˜éƒ½ä¸¢ä¸€å—è§£å†³ï¼Œé‚£æ ·ä¼šéå¸¸éš¾å—çš„ï¼\n\nåœ¨å…¶ä»–ç‰ˆå—éƒ½ç¡®è®¤æ— è¯¯ä¹‹åï¼Œä¹Ÿè¦è¿‡æ¥ç…ä¸€çœ¼Destroyæ¿å—ï¼Œé¿å…å‡ºç°freeé”™è¯¯ç­‰æƒ…å†µã€‚\nè¿™ä¸ªæ¿å—æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹ï¼ˆVSå¿«æ·é”®F9ï¼‰å¹¶è°ƒè¯•çš„æ–¹æ³•æ¥æ£€æŸ¥è¯¥æ¿å—æ˜¯å¦æ­£ç¡®\n\n4.çŸ¥è¯†å·©å›ºï¼Œæ¥é“OJï¼leetcode 20 æœ‰æ•ˆçš„æ‹¬å·\nleetcodeï¼š20. æœ‰æ•ˆçš„æ‹¬å·\n\n\nè¿™é“é¢˜å°±æ˜¯ä¸€é“éå¸¸ä½¿ç”¨ç”¨æ ˆæ¥è§£å†³çš„OJé¢˜\né¢˜ç›®è¦æ±‚æˆ‘ä»¬åˆ¤æ–­ç»™å‡ºçš„å­—ç¬¦ä¸²ä¸­ï¼Œæ‹¬å·æ˜¯å¦ä¸€ä¸€å¯¹åº”\n&#123;[]&#125;//å¯¹åº”&#123;[(])&#125;//ä¸å¯¹åº”&#123;&#123;()&#125;//å°‘äº†ä¸€ä¸ªå³è¾¹æ‹¬å·ï¼Œä¸å¯¹åº”\n\nå…·ä½“è¦æ€ä¹ˆåšå‘¢ï¼Ÿæ€è·¯å¦‚ä¸‹ï¼š\n\nç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥éå†å­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å·¦æ‹¬å·&#123;([å…¶ä¸­ä¸€ä¸ªï¼Œå°±å…¥æ ˆ\nå¦‚æœæ˜¯å³è¾¹æ‹¬å·ï¼Œè¯´æ˜å·¦æ‹¬å·å·²ç»å…¥æ ˆå®Œæ¯•ï¼Œå¼€å§‹æ¯”å¯¹\næ ˆé¡¶çš„æ‹¬å·ä¸€å®šæ˜¯å’Œå½“å‰å³æ‹¬å·åŒ¹é…çš„ï¼Œå¦‚æœä¸æ˜¯åˆ™ä¸ºfalse\næ¯åˆ¤æ–­ä¸€æ¬¡ï¼Œå°±è®©æ ˆé¡¶çš„å·¦æ‹¬å·å‡ºæ ˆä¸€æ¬¡\n\næœ€åçš„å‡½æ•°å®ç°å¦‚ä¸‹\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒSTDataTypeç±»å‹éœ€è¦æ›´æ”¹ä¸ºcharç±»å‹ï¼Œæ­¤æ—¶å­˜æ”¾çš„æ˜¯æ‹¬å·å­—ç¬¦ï¼Œå¹¶ä¸æ˜¯æ•°å­—\n\ntypedef char STDataType;typedef struct Stack&#123;\tSTDataType* a;\tint top; // æ ˆé¡¶\tint capacity; // å®¹é‡&#125;Stack;// åˆå§‹åŒ–void StackInit(Stack* ps)&#123;\tSTDataType* new = (STDataType*)malloc(sizeof(STDataType) * 4);\tif (new == NULL)\t&#123;\t\texit(-1);\t&#125;\telse\t&#123;\t\tps-&gt;a = new;\t\tps-&gt;top = 0;\t\tps-&gt;capacity = 4;\t&#125;&#125;// é”€æ¯æ ˆvoid StackDestroy(Stack* ps)&#123;\tassert(ps);\tfree(ps-&gt;a);\tps-&gt;a = NULL;\tps-&gt;capacity = 0;\tps-&gt;top = 0;&#125;// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data)&#123;\tassert(ps);\tif (ps-&gt;top == ps-&gt;capacity)\t&#123;\t\tSTDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);\t\tif (new == NULL)\t\t&#123;\t\t\texit(-1);\t\t&#125;\t\telse\t\t&#123;\t\t\tps-&gt;a = new;\t\t\tps-&gt;capacity *= 2;\t\t&#125;\t&#125;\tps-&gt;a[ps-&gt;top] = data;\tps-&gt;top++;&#125;// å‡ºæ ˆvoid StackPop(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top &gt; 0)\t\t(ps-&gt;top)--;&#125;// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps)&#123;\tassert(ps);\tassert(ps-&gt;top &gt; 0);\treturn ps-&gt;a[ps-&gt;top - 1];&#125;// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps)&#123;\tassert(ps);\tif (ps-&gt;top == 0)\t\treturn true;\telse\t\treturn false;&#125;bool isValid(char * s)&#123;    Stack st;    StackInit(&amp;st);    while(*s)    &#123;        if(*s==&#x27;&#123;&#x27;||*s==&#x27;[&#x27;||*s==&#x27;(&#x27;)        &#123;            StackPush(&amp;st,*s);            s++;        &#125;        else        &#123;            if(StackEmpty(&amp;st))            &#123;                return false;            &#125;            char top=StackTop(&amp;st);//å–æ ˆé¡¶å…ƒç´             StackPop(&amp;st);//æŠŠæ ˆé¡¶åˆ é™¤            //å¦‚( &#123; è¿™ä¸¤ä¸ªï¼Œå–äº†æ ˆé¡¶&#123;ï¼Œå°±ç«‹é©¬popæ‰å®ƒ            if((*s==&#x27;&#125;&#x27;&amp;&amp;top==&#x27;&#123;&#x27;)            ||(*s==&#x27;)&#x27;&amp;&amp;top==&#x27;(&#x27;)            ||(*s==&#x27;]&#x27;&amp;&amp;top==&#x27;[&#x27;))            &#123;                s++;            &#125;            else            &#123;                StackDestroy(&amp;st);                return false;            &#125;        &#125;    &#125;    bool ret=StackEmpty(&amp;st);    //å¦‚æœä¸ºç©ºï¼Œè¯´æ˜åŒ¹é…å®Œæ¯•ï¼›éç©ºè¯´æ˜è¿˜æœ‰å‰©ä¸‹çš„å·¦æ‹¬å·    StackDestroy(&amp;st);        return ret;&#125;\n\nè¿™ä¸ªç®—æ³•çš„ç”¨æ—¶è¿˜æ˜¯éå¸¸çŸ­çš„ï¼\n\nç»“è¯­æ•°æ®ç»“æ„å­¦åˆ°è¿™é‡Œï¼Œå…¶å®åœ¨äº†è§£å®Œè¿™äº›ç»“æ„çš„çœŸæ­£æ€è·¯åï¼Œä»£ç çš„å®ç°åè€Œå¹¶ä¸æ˜¯é‚£ä¹ˆé‡è¦ã€‚\nåœ¨å­¦ä¹ è¿™éƒ¨åˆ†çŸ¥è¯†çš„æ—¶å€™ï¼Œä¸€å®šè¦å¤šç”»å›¾ï¼\nå¦‚æœä½ ä¸é€‚åº”ç”¨é¼ æ ‡ç”»å›¾ï¼Œå¯ä»¥ç›´æ¥ç”¨çº¸ç¬”ç”»ï¼Œä¸€äº›éå¸¸ç®€å•çš„è‰å›¾ï¼Œä¹Ÿèƒ½æå¤§å¸®åŠ©æˆ‘ä»¬ç†è§£å½“å‰çš„ä»£ç ï¼Œæ‰¾å‡ºé—®é¢˜ğŸ‘\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ˆ"]},{"title":"ã€Cè¯­è¨€ã€‘åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨","url":"/posts/1493158800/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨è¿™ä¸¤ç§ç»“æ„\n\né¡ºåºè¡¨ï¼šåšå®¢é“¾æ¥1\nå•é“¾è¡¨ï¼šåšå®¢é“¾æ¥2\né“¾è¡¨OJï¼šåšå®¢é“¾æ¥3\n\nä¹‹å‰æœ¬æ¥æ˜¯ä¸æƒ³å†™åŒé“¾è¡¨çš„åšå®¢çš„ï¼Œä½†æ˜¯çœ‹ç€è‡ªå·±çš„æ•°æ®ç»“æ„ä¸“æ å°‘äº†ä¸€partï¼Œæœ‰å¼ºè¿«ç—‡çš„æˆ‘æ„Ÿè§‰å¾ˆä¸çˆ½ï¼Œäºæ˜¯è¡¥ä¸Šäº†æœ¬ç¯‡å¤§æ°´æ–‡\n1.åŒé“¾è¡¨çš„ç»“æ„é™¤äº†å•é“¾è¡¨ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç»“æ„ï¼Œæ˜¯åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨ã€‚è¿™ä¸ªé“¾è¡¨çš„å½¢å¼å¦‚ä¸‹\n\nå¤´èŠ‚ç‚¹çš„prevæŒ‡å‘å°¾éƒ¨èŠ‚ç‚¹\nå°¾èŠ‚ç‚¹çš„nextæŒ‡å‘å¤´èŠ‚ç‚¹ï¼Œæ„æˆå¾ªç¯\n\n\nåˆ«çœ‹å®ƒçš„å½¢å¼æœ‰äº›å¤æ‚ï¼Œå®é™…ä»£ç çš„å®ç°ï¼Œæ¯”å•é“¾è¡¨è¿˜ç®€å•ï¼\nå› ä¸ºhead-&gt;prevæŒ‡å‘äº†å°¾èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰¾å°¾ã€‚å°¾åˆ çš„æ—¶å€™ä¹Ÿä¸éœ€è¦éå†æ‰¾å°¾èŠ‚ç‚¹çš„å‰ä¸€ä½ï¼Œå› ä¸ºå°¾èŠ‚ç‚¹çš„prevå°±å­˜æ”¾äº†å‰ä¸€ä½çš„åœ°å€ã€‚\n\n2.ä»£ç å®ç°ä¸‹é¢è´´å‡ºåŒé“¾è¡¨å®ç°çš„æºç ï¼Œå¦‚æœå¤§å®¶æœ‰é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡º\nåªè¦ä½ å­¦ä¼šäº†å•é“¾è¡¨çš„ç¼–å†™ï¼Œä¹Ÿçœ‹å®Œäº†æˆ‘çš„é“¾è¡¨OJé¢˜åšå®¢ï¼Œé‚£åŒé“¾è¡¨å¯¹äºä½ æ¥è¯´è‚¯å®šæ˜¯ä¿¡æ‰‹æ‹ˆæ¥çš„\n\n2.1å¤´æ–‡ä»¶DoubleList.hå¤´æ–‡ä»¶\nå¦‚æœä½ æƒ³å°è¯•è‡ªå·±ç¼–å†™åŒé“¾è¡¨çš„ä»£ç ï¼Œå¯ä»¥å…ˆæŠŠå¤´æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„æœ¬åœ°ç¼–è¯‘å™¨ï¼Œå°†è¿™äº›å‡½æ•°çš„å®ç°æå‡ºæ¥\n#pragma once#include&lt;stdio.h&gt;#include&lt;stdlib.h&gt;#include&lt;assert.h&gt;// å¸¦å¤´+åŒå‘+å¾ªç¯é“¾è¡¨å¢åˆ æŸ¥æ”¹å®ç°typedef int LTDataType;typedef struct ListNode&#123;\tLTDataType data;\tstruct ListNode* next;\tstruct ListNode* prev;&#125;ListNode;// åˆ›å»ºå¹¶è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ListNode* ListCreate();// åŒå‘é“¾è¡¨é”€æ¯void ListDestory(ListNode* pHead);// åŒå‘é“¾è¡¨æ‰“å°void ListPrint(ListNode* pHead);//å€’ç€æ‰“å°ï¼Œæ£€æŸ¥åŒé“¾è¡¨æ˜¯å¦å®Œæ•´void ListPrintReverse(ListNode* pHead);// åˆ›å»ºæ–°çš„èŠ‚ç‚¹ListNode* BuyNode(LTDataType x);// åŒå‘é“¾è¡¨å°¾æ’void ListPushBack(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨å°¾åˆ void ListPopBack(ListNode* pHead);// åŒå‘é“¾è¡¨å¤´æ’void ListPushFront(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨å¤´åˆ void ListPopFront(ListNode* pHead);// åŒå‘é“¾è¡¨æŸ¥æ‰¾ListNode* ListFind(ListNode* pHead, LTDataType x);// åŒå‘é“¾è¡¨åœ¨posçš„å‰é¢è¿›è¡Œæ’å…¥void ListInsert(ListNode* pos, LTDataType x);// åŒå‘é“¾è¡¨åˆ é™¤posä½ç½®çš„èŠ‚ç‚¹void ListErase(ListNode* pos);\n\n2.2æºæ–‡ä»¶DoubleList.cæºæ–‡ä»¶\nè¿˜æ˜¯å»ºè®®ä½ å†™å®Œä¹‹åå†æ¥å’Œæˆ‘çš„å‡½æ•°å¯¹æ¯”å¯¹æ¯”ã€‚\nä¸€å®šè¦è®°ä½ï¼šå†™å®Œä¸€ä¸ªæ¨¡å—ï¼Œæµ‹è¯•ä¸€ä¸ªæ¨¡å—ï¼Œä¸è¦ç­‰åˆ°æœ€åå†æµ‹è¯•ï¼\n#define _CRT_SECURE_NO_WARNINGS 1#include &quot;DoubleList.h&quot;ListNode* ListCreate()&#123;\tListNode* Createnode = (ListNode*)malloc(sizeof(ListNode));\tif (Createnode == NULL)\t\tprintf(&quot;CreateNode failed\\n&quot;);\telse\t&#123;\t\tCreatenode-&gt;next = Createnode;\t\tCreatenode-&gt;prev = Createnode;\t&#125;\treturn Createnode;&#125;void ListDestory(ListNode* pHead)&#123;\tassert(pHead);\twhile (pHead-&gt;prev!=pHead)\t&#123;\t\tListNode* tail = pHead-&gt;prev;\t\tListNode* tailprev = tail-&gt;prev;\t\tfree(tail);\t\tpHead-&gt;prev = tailprev;\t&#125;\tfree(pHead);&#125;void ListPrint(ListNode* pHead)&#123;\tassert(pHead);\t\tListNode* cur = pHead-&gt;next;\twhile (cur-&gt;next!=pHead)\t&#123;\t\tprintf(&quot;%d -&gt; &quot;,cur-&gt;data);\t\tcur = cur-&gt;next;\t&#125;\tprintf(&quot;%d&quot;, cur-&gt;data);//æ‰“å°æœ€åä¸€ä¸ªèŠ‚ç‚¹\tprintf(&quot;\\n&quot;);&#125;void ListPrintReverse(ListNode* pHead)&#123;\tassert(pHead);\tListNode* tail = pHead-&gt;prev;\twhile (tail-&gt;prev != pHead)\t&#123;\t\tprintf(&quot;%d -&gt; &quot;, tail-&gt;data);\t\ttail = tail-&gt;prev;\t&#125;\tprintf(&quot;%d&quot;, tail-&gt;data);\tprintf(&quot;\\n\\n&quot;);\t&#125;ListNode* BuyNode(LTDataType x)&#123;\tListNode* Buy = (ListNode*)malloc(sizeof(ListNode));\tif (Buy == NULL)\t\tprintf(&quot;BuyNode failed\\n&quot;);\telse\t&#123;\t\tBuy-&gt;data = x;\t\tBuy-&gt;next = NULL;\t\tBuy-&gt;prev = NULL;\t&#125;\treturn Buy;&#125;void ListPushBack(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* newnode = BuyNode(x);\tListNode* tail = pHead-&gt;prev;\ttail-&gt;next = newnode;\tnewnode-&gt;next = pHead;\tnewnode-&gt;prev = tail;\tpHead-&gt;prev = newnode;&#125;void ListPopBack(ListNode* pHead)&#123;\tassert(pHead);\tListNode* tail = pHead-&gt;prev;\tListNode* tailprev = tail-&gt;prev;\tfree(tail);\ttailprev-&gt;next = pHead;\tpHead-&gt;prev = tailprev;&#125;void ListPushFront(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* newnode= BuyNode(x);\tnewnode-&gt;prev = pHead;\tnewnode-&gt;next = pHead-&gt;next;\tpHead-&gt;next = newnode;\tnewnode-&gt;next-&gt;prev = newnode;&#125;void ListPopFront(ListNode* pHead)&#123;\tassert(pHead);\tListNode* front = pHead-&gt;next-&gt;next;\tListNode* Popnode = pHead-&gt;next;//å¾…çˆ†ç ´çš„å¤´èŠ‚ç‚¹\tpHead-&gt;next = front;\tfree(Popnode);\tfront-&gt;prev = pHead;&#125;ListNode* ListFind(ListNode* pHead, LTDataType x)&#123;\tassert(pHead);\tListNode* cur = pHead-&gt;next;\twhile (cur!=pHead)\t&#123;\t\tif (cur-&gt;data == x)\t\t\treturn cur;\t\telse\t\t\tcur = cur-&gt;next;\t&#125;\treturn NULL;&#125;void ListInsert(ListNode* pos, LTDataType x)&#123;\tassert(pos);\tListNode* newnode = BuyNode(x);\tListNode* Prev = pos-&gt;prev;\tPrev-&gt;next = newnode;\tnewnode-&gt;prev = Prev;\tnewnode-&gt;next = pos;\tpos-&gt;prev = newnode;&#125;void ListErase(ListNode* pos)&#123;\tassert(pos);\tListNode* Prev = pos-&gt;prev;\tListNode* Next = pos-&gt;next;\tPrev-&gt;next = pos-&gt;next;\tNext-&gt;prev = Prev;\tfree(pos);&#125;\n\næµ‹è¯•æ–‡ä»¶test.cè¿™é‡Œä¸å†ç»™å‡º\nç»“è¯­å¦‚æœä½ å¯¹ä¸Šé¢çš„ä»£ç æœ‰é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\nä¸€èµ·å‘å‰ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","é“¾è¡¨"]},{"title":"ã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯æ ‘ï¼ŒäºŒå‰æ ‘åˆæ˜¯å•¥ç©æ„","url":"/posts/4161984418/","content":"[TOC]\nå‰è¨€åœ¨ä¹‹å‰çš„æ•°æ®ç»“æ„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†é¡ºåºè¡¨ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—è¿™å‡ ç§ç»“æ„\nå®ƒä»¬éƒ½æ˜¯ç”¨é“¾è¡¨æˆ–è€…æ•°ç»„çš„æ–¹å¼æ¥å®ç°çš„ï¼Œä¸»è¦è€ƒå¯Ÿæˆ‘ä»¬å¯¹ç»“æ„ä½“çš„è¿ç”¨\n\nä»Šå¤©è®©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™å‰¯å›¾é‡Œé¢çš„æ ‘\n\nå•Šä¸å¥½æ„æ€ï¼Œå›¾æ‹¿é”™äº†ï¼ğŸ˜œ\næ˜¯ä¸‹é¢è¿™ä¸ªæ‰å¯¹\n\n\n1.ä»€ä¹ˆæ˜¯æ ‘ï¼Ÿ1.1 æ ‘çš„æ¦‚å¿µæ ‘æ˜¯ä¸€ç§éçº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ç”±nä¸ªæœ‰é™èŠ‚ç‚¹ç»„æˆçš„å…·æœ‰ä¸€å®šå±‚æ¬¡å…³ç³»çš„é›†åˆã€‚\næŠŠå®ƒå«åšæ ‘æ˜¯å› ä¸ºå®ƒçœ‹èµ·æ¥çš„ç¡®åƒä¸€ä¸ªæ ‘çš„æ ¹éƒ¨\nå½“ç„¶ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯æ ‘å¹²åœ¨ä¸Šï¼Œæ ‘å¶åœ¨ä¸‹çš„ç»“æ„\n\næœ‰ä¸€ä¸ªç‰¹æ®Šçš„èŠ‚ç‚¹ï¼Œè¢«ç§°ä¸ºæ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„å¼€å¤´\né™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œå…¶ä½™èŠ‚ç‚¹éƒ½æ˜¯,ä¸ªäº’ä¸ç›¸äº¤çš„é›†åˆã€‚æ¯ä¸€ä¸ªé›†åˆéƒ½æ˜¯ä¸€é¢—ä¸æ ‘çš„ç»“æ„ç±»ä¼¼çš„å­æ ‘\næ¯ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªå‰é©±ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¾ˆå¤šä¸ªåé©±\nå› æ­¤ï¼Œæ ‘æ˜¯é€’å½’å®šä¹‰çš„\n\n\næ ‘ä¸­çš„å­èŠ‚ç‚¹ä¸èƒ½æœ‰äº¤é›†\n\nä¸Šå›¾ä¸­çš„BèŠ‚ç‚¹ä¸èƒ½æœ‰Gè¿™ä¸ªå­©å­ï¼Œå› ä¸ºGå·²ç»æœ‰çˆ¶æ¯Cäº†\nåŒç†ï¼ŒGèŠ‚ç‚¹ä¹Ÿä¸èƒ½åŒæ—¶æ‹¥æœ‰ä¸¤å¯¹çˆ¶æ¯\nå­èŠ‚ç‚¹ä¹‹é—´ä¹Ÿä¸èƒ½ç›¸è¿ï¼Œå¦‚Eå’ŒFä¸èƒ½ç›¸è¿\n\n\n1.2 æ ‘çš„ç›¸å…³çŸ¥è¯†ç‚¹\nèŠ‚ç‚¹çš„åº¦ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„ä¸ªæ•°ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„åº¦ï¼› å¦‚ä¸‹å›¾ï¼šAçš„åº¦ä¸º6\n\nå¶èŠ‚ç‚¹æˆ–ç»ˆç«¯èŠ‚ç‚¹ï¼šåº¦ä¸º0çš„èŠ‚ç‚¹ç§°ä¸ºå¶èŠ‚ç‚¹ï¼› å›¾ä¸­Bã€Cã€Hã€Iâ€¦ç­‰èŠ‚ç‚¹ä¸ºå¶èŠ‚ç‚¹\néç»ˆç«¯èŠ‚ç‚¹æˆ–åˆ†æ”¯èŠ‚ç‚¹ï¼šåº¦ä¸ä¸º0çš„èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ä¸­Dã€Eã€Fã€Gâ€¦ç­‰èŠ‚ç‚¹ä¸ºåˆ†æ”¯èŠ‚ç‚¹\nç®€å•çš„è¯´ï¼Œå°±æ˜¯æœ‰å¨ƒçš„èŠ‚ç‚¹å°±æ˜¯åˆ†æ”¯èŠ‚ç‚¹\n\nåŒäº²èŠ‚ç‚¹æˆ–çˆ¶èŠ‚ç‚¹ï¼šè‹¥ä¸€ä¸ªèŠ‚ç‚¹å«æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¿™ä¸ªèŠ‚ç‚¹ç§°ä¸ºå…¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ï¼ŒDæ˜¯Hçš„çˆ¶èŠ‚ç‚¹\nå­©å­èŠ‚ç‚¹æˆ–å­èŠ‚ç‚¹ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„æ ¹èŠ‚ç‚¹ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼› å¦‚ä¸Šå›¾ï¼šHæ˜¯Dçš„å­©å­èŠ‚ç‚¹\n\nå…„å¼ŸèŠ‚ç‚¹ï¼šå…·æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹äº’ç§°ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼› å¦‚ä¸‹å›¾ï¼šPã€Qæ˜¯å…„å¼ŸèŠ‚ç‚¹\n\n\næ ‘çš„åº¦ï¼šä¸€æ£µæ ‘ä¸­ï¼Œæœ€å¤§çš„èŠ‚ç‚¹çš„åº¦ç§°ä¸ºæ ‘çš„åº¦ï¼› ç¤ºä¾‹ä¸­æ ‘çš„åº¦ä¸º6ï¼ˆå³Açš„åº¦ï¼‰\nèŠ‚ç‚¹çš„å±‚æ¬¡ï¼šä»æ ¹å¼€å§‹å®šä¹‰èµ·ï¼Œæ ¹ä¸ºç¬¬1å±‚ï¼Œæ ¹çš„å­èŠ‚ç‚¹ä¸ºç¬¬2å±‚ï¼Œä»¥æ­¤ç±»æ¨\næ ‘çš„é«˜åº¦æˆ–æ·±åº¦ï¼šæ ‘ä¸­èŠ‚ç‚¹çš„æœ€å¤§å±‚æ¬¡ï¼› ç¤ºä¾‹ä¸­æ ‘çš„é«˜åº¦ä¸º4\n\nå ‚å…„å¼ŸèŠ‚ç‚¹ï¼šåŒäº²åœ¨åŒä¸€å±‚çš„èŠ‚ç‚¹äº’ä¸ºå ‚å…„å¼Ÿï¼›å¦‚ä¸‹å›¾ï¼šHã€Iäº’ä¸ºå…„å¼ŸèŠ‚ç‚¹\n\n\nèŠ‚ç‚¹çš„ç¥–å…ˆï¼šä»æ ¹åˆ°è¯¥èŠ‚ç‚¹æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼›ç¤ºä¾‹ä¸­Aæ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„ç¥–å…ˆ\nå­å­™ï¼šä»¥æŸèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€èŠ‚ç‚¹éƒ½ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­å­™ã€‚ç¤ºä¾‹ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯Açš„å­å­™\n\næ£®æ—ï¼šç”±mï¼ˆm&gt;0ï¼‰æ£µäº’ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆç§°ä¸ºæ£®æ—\nå¤šä¸ªä¸ç›¸äº¤çš„æ ‘å°±æ˜¯æ£®æ—\n\n\n\n1.3 æ ‘çš„ä»£ç è¡¨ç¤ºè¡¨ç¤ºæ ‘çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§\n#define N 5 //æŒ‡å®šæ ‘çš„åº¦ä¸º5struct TreeNode{\tint data;\tstruct TreeNode* subs[N];//ç”¨æŒ‡é’ˆæ•°ç»„å­˜æ”¾å­©å­èŠ‚ç‚¹çš„æŒ‡é’ˆ};\n\nä½†è¿™ç§æ–¹æ³•ä¸å¤Ÿä¼˜ï¼Œç»™å¤§å®¶å±•ç¤ºä¸€ä¸ªç”¨çš„æœ€å¹¿æ³›çš„æ–¹æ³•â€”â€”å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•\ntypedef int DataType;struct Node{ struct Node* _firstChild1; // ç¬¬ä¸€ä¸ªå­©å­ç»“ç‚¹ struct Node* _pNextBrother; // æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå…„å¼Ÿç»“ç‚¹ DataType _data; // ç»“ç‚¹ä¸­çš„æ•°æ®åŸŸ};\n\né€šè¿‡è¿™ç§æ–¹æ³•ï¼Œçˆ¶äº²èŠ‚ç‚¹åªéœ€è¦ä¿å­˜å®ƒçš„ç¬¬ä¸€ä¸ªå¨ƒï¼Œå…¶ä»–å¨ƒå°±è®©å¤§å¨ƒçš„å…„å¼ŸèŠ‚ç‚¹æ¥æ‰¾\nä¹Ÿå°±æ˜¯å®¶é•¿åªç”¨ç®¡è€å¤§ï¼Œè€å¤§ç®¡è€äºŒï¼Œè€äºŒç®¡è€ä¸‰ï¼Œä¾æ¬¡å¾€ä¸‹â€¦â€¦\n\nå®é™…å†™ä»£ç çš„ç»“æ„å¤§æ¦‚æ˜¯ä¸‹å›¾è¿™æ ·\n\n2.äºŒå‰æ ‘åœ¨å®é™…ä¸­ï¼ŒäºŒå‰æ ‘æ˜¯ä½¿ç”¨è¾ƒå¤šçš„ä¸€ç§æ ‘çš„ç»“æ„\n2.1 æ¦‚å¿µäºŒå‰æ ‘æ˜¯åº¦ä¸º2çš„æ ‘ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ ‘\n\näºŒå‰æ ‘ä¸å­˜åœ¨åº¦å¤§äº2çš„èŠ‚ç‚¹\näºŒå‰æ ‘æ˜¯æœ‰åºæ ‘ï¼Œå®ƒçš„å¨ƒï¼ˆå­æ ‘ï¼‰æœ‰å·¦å³ä¹‹åˆ†ï¼Œæ¬¡åºä¸èƒ½é¢ å€’\n\n\næ‰€ä»¥ï¼ŒäºŒå‰æ ‘éƒ½æ˜¯ç”±ä¸‹é¢å„ç±»èŠ‚ç‚¹ç»„æˆçš„æ ‘\n\n2.2 ç‰¹æ®Šçš„äºŒå‰æ ‘æ»¡äºŒå‰æ ‘æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®Œå…¨äºŒå‰æ ‘\n\næ»¡äºŒå‰æ ‘ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„\nå®Œå…¨äºŒå‰æ ‘ï¼Œæœ€åä¸€å±‚å¿…é¡»ä»å·¦åˆ°å³è¿ç»­\n\næ»¡äºŒå‰æ ‘æ»¡äºŒå‰æ ‘ï¼šå¦‚æœæ¯ä¸€ä¸ªå±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œé‚£è¿™ä¸ªäºŒå‰æ ‘å°±æ˜¯æ»¡äºŒå‰æ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ»¡äºŒå‰æ ‘çš„å±‚æ•°ä¸ºkï¼Œä¸”èŠ‚ç‚¹æ€»æ•°æ˜¯2k-1\n\næ»¡äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—å…¬å¼\n\n\nå®Œå…¨äºŒå‰æ ‘å®Œå…¨äºŒå‰æ ‘ï¼šå®Œå…¨äºŒå‰æ ‘æ˜¯æ•ˆç‡å¾ˆé«˜çš„æ•°æ®ç»“æ„ã€‚å¯¹äºæ·±åº¦ä¸ºKï¼Œæœ‰nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå½“ä¸”ä»…å½“æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¸æ·±åº¦ä¸ºKçš„æ»¡äºŒå‰æ ‘ä¸­ç¼–å·ä»1è‡³nçš„èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”æ—¶ï¼Œç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚\nç®€å•è¯´æ¥ï¼Œå®Œå…¨äºŒå‰æ ‘çš„æœ€åä¸€å±‚ä¸ä¸€å®šæ»¡ï¼Œä½†å¿…é¡»è¦ä»å·¦åˆ°å³è¿ç»­\n\n\n2.3 äºŒå‰æ ‘çš„æ€§è´¨\nåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œåº¦ä¸º0\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™ä¸€æ£µéç©ºäºŒå‰æ ‘çš„ç¬¬iå±‚ä¸Šæœ€å¤šæœ‰2^(i-1)ä¸ªç»“ç‚¹\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œåˆ™æ·±åº¦ä¸ºhçš„äºŒå‰æ ‘çš„æœ€å¤§ç»“ç‚¹æ•°æ˜¯(2^h)-1\nå¯¹ä»»ä½•ä¸€æ£µäºŒå‰æ ‘, å¦‚æœåº¦ä¸º0å…¶å¶ç»“ç‚¹ä¸ªæ•°ä¸ºn0, åº¦ä¸º2çš„åˆ†æ”¯ç»“ç‚¹ä¸ªæ•°ä¸ºn2ï¼Œåˆ™æœ‰n0 = n2+1\nè‹¥è§„å®šæ ¹èŠ‚ç‚¹çš„å±‚æ•°ä¸º1ï¼Œå…·æœ‰nä¸ªç»“ç‚¹çš„æ»¡äºŒå‰æ ‘çš„æ·±åº¦ï¼Œh=log2(n+1) ã€‚ (psï¼š æ˜¯logä»¥2ä¸ºåº•ï¼Œn+1ä¸ºå¯¹æ•°)\nå¯¹äºå…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå¦‚æœæŒ‰ç…§ä»ä¸Šè‡³ä¸‹ä»å·¦è‡³å³çš„æ•°ç»„é¡ºåºå¯¹æ‰€æœ‰èŠ‚ç‚¹ä»0å¼€å§‹ç¼–å·ï¼Œåˆ™å¯¹äºåºå·ä¸ºiçš„ç»“ç‚¹æœ‰ï¼š\nè‹¥i&gt;0ï¼Œiä½ç½®èŠ‚ç‚¹çš„åŒäº²åºå·ï¼š(i-1)/2ï¼›i=0æ—¶ä¸ºæ ¹èŠ‚ç‚¹ç¼–å·ï¼Œæ— åŒäº²èŠ‚ç‚¹\nè‹¥2i+1&lt;nï¼Œå·¦å­©å­åºå·ï¼š2i+1ï¼Œ2i+1&gt;=nå¦åˆ™æ— å·¦å­©å­\nè‹¥2i+2&lt;nï¼Œå³å­©å­åºå·ï¼š2i+2ï¼Œ2i+2&gt;=nå¦åˆ™æ— å³å­©å­\n\n\n\n\n\n2.4 å‡ ä¸ªé€‰æ‹©é¢˜1. æŸäºŒå‰æ ‘å…±æœ‰ 399 ä¸ªç»“ç‚¹ï¼Œå…¶ä¸­æœ‰ 199 ä¸ªåº¦ä¸º 2 çš„ç»“ç‚¹ï¼Œåˆ™è¯¥äºŒå‰æ ‘ä¸­çš„å¶å­ç»“ç‚¹æ•°ä¸ºï¼ˆ ï¼‰A ä¸å­˜åœ¨è¿™æ ·çš„äºŒå‰æ ‘B 200  âˆšC 198D 199//å¶å­èŠ‚ç‚¹çš„æ•°é‡ æ€»æ¯”åº¦ä¸º2çš„èŠ‚ç‚¹å¤š1    2.åœ¨å…·æœ‰ 2n ä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œå¶å­ç»“ç‚¹ä¸ªæ•°ä¸ºï¼ˆ ï¼‰A n    âˆšB n+1C n-1D n/2//N0+N1+N2=2n//2N0+N1-1=2n//N1åªæœ‰0å’Œ1ä¸¤ç§å¯èƒ½ï¼Œå› ä¸ºnä¸ºæ•´æ•°ï¼Œ2nä¸ºå¶æ•°ï¼Œæ‰€ä»¥2N0=2nï¼ŒN0=n    3.ä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ä½ä¸º531ä¸ªï¼Œé‚£ä¹ˆè¿™æ£µæ ‘çš„é«˜åº¦ä¸ºï¼ˆ ï¼‰A 11B 10  âˆšC 8D 12//å‡è®¾é«˜åº¦æ˜¯h//å®Œå…¨äºŒå‰æ ‘èŠ‚ç‚¹æœ€å¤š2^h -1//             æœ€å°‘2^(h-1)-1 +1//å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå…¬å¼ï¼Œæ¨æ–­å‡ºh=104.ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ç¬¬å…­å±‚çš„å¶å­èŠ‚ç‚¹ä¸º9ï¼Œé‚£ä¹ˆè¿™æ£µæ ‘çš„èŠ‚ç‚¹æ•°æœ€å¤šä¸ºï¼ˆï¼‰A 108B 109 âˆšC 112D 119//1  //2  //4  //8  //16  //32  //64Â -Â 9*2//å› ä¸ºé¢˜ç›®ä¸­çš„æ˜¯ç¬¬å…­å±‚çš„å¶å­èŠ‚ç‚¹ï¼Œå®Œå…¨äºŒå‰æ ‘å¿…é¡»ä»å·¦åˆ°å³è¿ç»­ï¼Œæ‰€ä»¥è¯´æ˜ç¬¬å…­å±‚ä¸åª9ä¸ªèŠ‚ç‚¹ï¼ˆé‚£æ ·ç®—å‡ºæ¥çš„ç»“æœä¸å¯¹ï¼‰//æ‰€ä»¥æ˜¯ç¬¬å…­å±‚å·²ç»æ»¡äº†ï¼Œç¬¬ä¸ƒå±‚æ²¡æœ‰æ»¡//æŠŠç¬¬ä¸ƒå±‚å»æ‰9ä¸ªå¶å­èŠ‚ç‚¹çš„å­©å­å°±èƒ½ç®—å‡ºæœ€å¤šçš„èŠ‚ç‚¹æ•°\n\n3.äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„äºŒå‰æ ‘ä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä¸¤ç§ç»“æ„å­˜å‚¨ï¼Œä¸€ç§é¡ºåºç»“æ„ï¼Œä¸€ç§é“¾å¼ç»“æ„\n3.1 é¡ºåºå­˜å‚¨é¡ºåºç»“æ„å­˜å‚¨å°±æ˜¯ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\nä¸€èˆ¬ä½¿ç”¨æ•°ç»„åªé€‚åˆè¡¨ç¤ºå®Œå…¨äºŒå‰æ ‘ï¼Œå› ä¸ºä¸æ˜¯å®Œå…¨äºŒå‰æ ‘ä¼šæœ‰ç©ºé—´çš„æµªè´¹ã€‚\n\nç°å®ä½¿ç”¨ä¸­åªæœ‰å †æ‰ä¼šä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨\nä¸‹ä¸€ç¯‡åšå®¢ä¼šå¸¦å¤§å®¶è®¤è¯†å †è¿™ä¸ªç‰¹æ®Šçš„æ ‘å½¢ç»“æ„ï¼ˆå’Œå†…å­˜é‡Œé¢é‚£ä¸ªå †ğŸ˜‚æ²¡å•¥å…³ç³»å“ˆï¼‰\n\n\n\nçœ‹åˆ°è¿™å¼ å›¾ï¼Œä½ è‚¯å®šæƒ³é—®ï¼Œå¦‚æœç”¨æ•°ç»„ç»“æ„å­˜å‚¨ï¼Œé‚£è¿˜æ€ä¹ˆè¿˜åŸå‡ºä¸€é¢—æ ‘ğŸ„å‘¢ï¼Ÿ\nè¿™é‡Œæˆ‘ä»¬éœ€è¦ç†è§£ç‰©ç†å­˜å‚¨å’Œé€»è¾‘ç»“æ„çš„å…³ç³»\n\näºŒå‰æ ‘é¡ºåºå­˜å‚¨åœ¨ç‰©ç†ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨é€»è¾‘ä¸Šæ˜¯ä¸€é¢—äºŒå‰æ ‘\né‚£æ€ä¹ˆè®¡ç®—è¿™ç§æƒ…å†µä¸‹çš„çˆ¶äº²å’Œå¨ƒå‘¢ï¼Ÿ\nleftchild  = parent*2+1rightchild = parent*2+2parent     = (child-1)/2\n\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¿½ç„¶æ„Ÿè§‰\n\n3.2 é“¾å¼å­˜å‚¨è¿™å°±å°±æ²¡å•¥å¥½è¯´çš„å•¦ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„äºŒå‰é“¾å°±èƒ½æ„æˆäºŒå‰æ ‘\ntypedef int BTDataType;// äºŒå‰é“¾struct BinaryTreeNode{ \tstruct BinTreeNode* _pLeft; // æŒ‡å‘å½“å‰èŠ‚ç‚¹å·¦å­©å­ \tstruct BinTreeNode* _pRight; // æŒ‡å‘å½“å‰èŠ‚ç‚¹å³å­©å­ \tBTDataType _data; // å½“å‰èŠ‚ç‚¹çš„å€¼}\n\n\n4.æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘4.1 è¯´æ˜æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªæ²¡æœ‰è§„å¾‹çš„å¤šå‰æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘ã€‚\n\næˆ‘ä»¬ç”µè„‘ç£ç›˜çš„æ–‡ä»¶å¤¹å±‚çº§å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰è§„å¾‹çš„æ ‘\n\nä¸è¯´åºŸè¯ï¼Œç›´æ¥æ¥çœ‹æ —å­ï¼›ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªæ²¡æœ‰å•¥è§„å¾‹å¯è¨€çš„æ ‘ï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æƒ³åŠæ³•æŠŠå®ƒå˜æˆä¸€ä¸ªäºŒå‰æ ‘ï¼\n\nå½“ç„¶ï¼Œå¦‚æœä»¥å†™ä»£ç çš„æ€è€ƒè§’åº¦ï¼Œåœ¨ä¸è¦æ±‚é¡ºåºçš„å‰æä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥éå†è¿™æ£µæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå°†å…¶å­˜å…¥æ•°ç»„ï¼Œå†ç”¨äºŒå‰æ ‘çš„æ–¹å¼è¿æ¥èµ·æ¥ï¼ˆæˆ–è€…ç›´æ¥èŠ‚ç‚¹æ•°ç»„å½“ä½œé¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ï¼‰\nä½†æ˜¯ï¼Œä»¥åº”è¯•çš„è§’åº¦ï¼Œåªèƒ½ä¾ç…§ä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•ï¼Œå°†å…¶è½¬æˆäºŒå‰æ ‘\n4.2 æ­¥éª¤\nè¿çº¿ï¼šå°†æ ‘ä¸­å…·æœ‰å…„å¼Ÿå…³ç³»çš„ç»“ç‚¹ä»å·¦åˆ°å³ä¾æ¬¡è¿çº¿ï¼›\nå»çº¿ï¼šå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªç»“ç‚¹ï¼Œä»…ä¿ç•™ä¸å…¶æœ€å·¦(å³ç¬¬ä¸€ä¸ª)å­©å­çš„è¿çº¿ï¼Œå»æ‰è¯¥ç»“ç‚¹åˆ°å…¶ä½™å­© å­çš„æ‰€æœ‰è¿çº¿ï¼›\nä¿ç•™ï¼šå¦‚æœå½“å‰èŠ‚ç‚¹å·²ç»æ˜¯å…„å¼Ÿä¸­çš„æœ€å·¦èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ä¸Šå›¾ä¸­çš„Bå’ŒEï¼‰ï¼Œåˆ™ä¿ç•™å…¶ä¸çˆ¶èŠ‚ç‚¹çš„è¿çº¿\næ•´å½¢ï¼šè°ƒæ•´ä¸ºæ ‡å‡†å½¢çŠ¶çš„äºŒå‰æ ‘ï¼ˆæ ¹ç»“ç‚¹+å·¦å­æ ‘+å³å‰æ ‘ï¼‰\n\nä¾ç…§ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå¤„ç†å‡ºçš„äºŒå‰æ ‘æ˜¯ä¸‹é¢çš„æ¨¡æ ·\n\nè¿™é‡Œè¿˜æœ‰ç¬¬äºŒä¸ªæ —å­\n\næ€æ ·ï¼Œä½ å­¦è´¹äº†å—ï¼Ÿ\n5.äºŒå‰æ ‘è½¬æˆæ ‘æˆ–è€…æ£®æ—è½¬æ¢æ­¥éª¤æ˜¯æ ‘è½¬æ¢ä¸ºäºŒå‰æ ‘æ–¹æ³•çš„é€†è¿‡ç¨‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\næ•´å½¢ï¼šå°†äºŒå‰æ ‘ä¸­çš„æ‰€æœ‰ç»“ç‚¹çš„å·¦å­©å­è¿çº¿è°ƒæ•´ä¸ºå‚ç›´å½¢æ€ã€å³å­©å­è¿çº¿è°ƒæ•´ä¸ºæ°´å¹³å½¢æ€ï¼› \nè¿çº¿ï¼šå¯¹äºä»»ä¸€æ°´å¹³çº¿ä¸Šçš„ç»“ç‚¹ï¼Œå°†è¯¥æ°´å¹³çº¿ä¸Šçš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¸è¯¥æ°´å¹³çº¿ä¸Šçš„å…¶ä»–ç»“ç‚¹è¿› è¡Œè¿çº¿ï¼› \nå»çº¿ï¼šå»é™¤æ‰€æœ‰çš„æ°´å¹³è¿çº¿ï¼Œå³åˆ é™¤åŸäºŒå‰æ ‘ä¸­å„ç»“ç‚¹ä¸å…¶å³å­©å­çš„è¿çº¿ï¼› 4\næ•´å½¢ï¼šè°ƒæ•´æ­¥éª¤3ç»“æŸä¹‹åçš„æ ‘çš„å½¢çŠ¶ï¼Œä½¿å…¶ç¬¦åˆæ ‘çš„ä¸€èˆ¬ç‰¹å¾è¦æ±‚ï¼ˆçˆ¶å­ã€å…„å¼Ÿå…³ç³»æ¸…æ™°ï¼‰\n\n\nä»¥ä¸‹æ˜¯ä¿©ç¤ºä¾‹\n\n\nç»“è¯­å˜¿å˜¿å˜¿ï¼Œæœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nä¸‹ç¯‡åšå®¢å°†å¸¦æ¥å †çš„è¯¦è§£\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","æ ‘"]},{"title":"ã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯å †ï¼Ÿå †æ’åºå’ŒTopKé—®é¢˜åˆæ˜¯å¦‚ä½•å®ç°çš„","url":"/posts/3640362579/","content":"[TOC]\nå‰è¨€åœ¨ä¸Šä¸€ç¯‡æ•°æ®ç»“æ„åšå®¢ä¸­ï¼Œæˆ‘å¸¦å¤§å®¶ä¸€èµ·å­¦ä¹ äº†æ ‘ä»¥åŠäºŒå‰æ ‘è¿™ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ã€‚\n\nã€Cè¯­è¨€ã€‘ä»€ä¹ˆæ˜¯æ ‘ï¼ŒäºŒå‰æ ‘åˆæ˜¯å•¥ç©æ„\n\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¸¸è¢«äººæ´¥æ´¥ä¹é“çš„å †æ’åºä»¥åŠå †è¿™ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„å­˜åœ¨å§ï¼Ÿ\n\n1.å †çš„æ¦‚å¿µå †çš„æ¦‚å¿µæ˜¯åŸºäºå®Œå…¨äºŒå‰æ ‘çš„\n\nå½“k1ã€k2ã€k3â€¦â€¦knçš„æ•°æ®æŒ‰ç…§å®Œå…¨äºŒå‰æ ‘çš„æ–¹å¼å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œä¸”è¿™ä¸ªå®Œå…¨äºŒå‰æ ‘æ»¡è¶³æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶çˆ¶èŠ‚ç‚¹çš„å€¼æ—¶ï¼Œç§°è¯¥å®Œå…¨äºŒå‰æ ‘ä¸ºå †ã€‚\n\n\nå°†æ ¹èŠ‚ç‚¹æœ€å¤§çš„å †å«å¤§æ ¹å †\næ ¹èŠ‚ç‚¹æœ€å°çš„å †å«åšå°æ ¹å †\nå †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºï¼ˆæˆ–ä¸å°äºï¼‰å…¶çˆ¶èŠ‚ç‚¹çš„å€¼\n\nä¸Šç¯‡æ ‘çš„åšå®¢ä¸­å·²ç»ç»™å¤§å®¶è§£é‡Šè¿‡å¦‚ä½•ç”¨æ•°ç»„çš„æ–¹å¼å­˜æ”¾ä¸€é¢—å®Œå…¨äºŒå‰æ ‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°å•¦ï¼\nleftchild  = parent*2+1rightchild = parent*2+2parent     = (child-1)/2\n\næ¥ä¸‹æ¥è¿™é“é¢˜ç›®èƒ½è€ƒå¯Ÿä½ æ˜¯å¦äº†è§£äº†å †çš„æ¦‚å¿µï¼Œè‡ªæµ‹ä¸€ä¸‹å§ï¼\n2.ä¸‹åˆ—å…³é”®å­—åºåˆ—ä¸­ï¼Œåºåˆ—ï¼ˆ ï¼‰æ˜¯å †ã€‚A .{16ï¼Œ72ï¼Œ31ï¼Œ23ï¼Œ94ï¼Œ53}B .{94ï¼Œ23ï¼Œ31ï¼Œ72ï¼Œ16ï¼Œ53}C .{16ï¼Œ53ï¼Œ23ï¼Œ94ï¼Œ31ï¼Œ72}D .{16ï¼Œ23ï¼Œ53ï¼Œ31ï¼Œ94ï¼Œ72}   âˆš\n\nç®€å•è¯´æ¥ï¼Œä»¥0ä¸‹æ ‡æ ¹ä¸ºä¾‹ï¼Œä¸‹æ ‡1å’Œ2ä¸ºæ ¹çš„å·¦å³å­©å­ã€‚å¦‚æœä»–ä»¬éƒ½æ¯”æ ¹å°ï¼Œä»£è¡¨è¿™æ˜¯ä¸€ä¸ªå°æ ¹å †ï¼Œåä¹‹æ˜¯å¤§æ ¹å †ã€‚\næ¥ç€æˆ‘ä»¬å°±éœ€è¦åˆ¤æ–­ï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„å­©å­éƒ½æ»¡è¶³è¿™ä¸ªç‰¹æ€§ï¼Œå¦‚æœå‡ºç°æŸä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­å’Œè¯¥èŠ‚ç‚¹çš„çˆ¶äº²ä¹‹é—´çš„å…³ç³»ä¸æ»¡è¶³æ ¹èŠ‚ç‚¹å’Œå­©å­ä¹‹é—´çš„å…³ç³»ï¼ˆå¦‚æ ¹èŠ‚ç‚¹çš„å­©å­æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œé‚£ä¹ˆè¯¥æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å­©å­éƒ½åº”è¯¥æ¯”è¯¥èŠ‚ç‚¹å¤§ï¼‰é‚£ä¹ˆè¿™ä¸ªå°±ä¸æ˜¯ä¸€ä¸ªå †\n2.å †çš„å®ç°å…ˆæ¥å°è¯•ç›´æ¥å®ç°ä¸€ä¸ªå †ï¼Œå³å°†æ•°æ®ä»¥å †çš„ç»“æ„å­˜æ”¾åœ¨æ•°ç»„ä¸­\nè¿™é‡Œç»™å‡ºä¸€ä¸ªå †çš„å¤´æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªå †çš„åŸºæœ¬æ¡†æ¶\n//å®ç°ä¸€ä¸ªå°å †#include&lt;stdio.h&gt;#include&lt;assert.h&gt;#include&lt;stdlib.h&gt;#include&lt;stdbool.h&gt;typedef int HPDataType;typedef struct Heap{\tHPDataType* a;\tsize_t size;\tsize_t capacity;}HP;void HeapInit(HP* php);//åˆå§‹åŒ–-ä¸è¿›è¡Œæ‰©å®¹æ“ä½œvoid HeapDestroy(HP* php);//æ‘§æ¯void HeapPrint(HP* php);//æ‰“å°//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(HPDataType* pa, HPDataType* pb);//æ’å…¥åå‘ä¸Šè°ƒæ•´ï¼Œä¿è¯æ•°æ®æ˜¯(å¤§/å°)å †//childä¸ºå¾…æ“ä½œæ•°æ®çš„ä¸‹æ ‡void AdjustUp(HPDataType* a, size_t child);// æ’å…¥xä»¥åï¼Œä¿æŒä»–ä¾æ—§æ˜¯(å¤§/å°)å †void HeapPush(HP* php, HPDataType x);//åˆ é™¤åå‘ä¸‹è°ƒæ•´ï¼Œä¿è¯æ•°ç»„æœ«å°¾æ•°æ®ä½ç½®æ­£ç¡®//sizeå †çš„å¤§å°ï¼›rootå¾…è°ƒèŠ‚æ•°æ®çš„ä½ç½®ï¼Œ0ä»£è¡¨æ ¹éƒ¨ï¼ˆå †é¡¶ï¼‰void AdjustDown(HPDataType* a, size_t size, size_t root);// åˆ é™¤å †é¡¶çš„æ•°æ®ã€‚(æœ€å°/æœ€å¤§)ï¼›// äº¤æ¢å †é¡¶æ•°æ®å’Œæ•°ç»„æœ«å°¾æ•°æ®void HeapPop(HP* php);//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºbool HeapEmpty(HP* php);//è¿”å›å †çš„å¤§å°ï¼ˆèŠ‚ç‚¹ä¸ªæ•°ï¼‰size_t HeapSize(HP* php);//è¿”å›å †é¡¶ï¼Œè®¿é—®æ•°ç»„ä¸‹æ ‡0HPDataType HeapTop(HP* php);\n\n2.1å‘ä¸Šè°ƒæ•´ä½ ä¼šå‘ç°ï¼Œç›¸è¾ƒäºæ™®é€šæ•°æ®ç»“æ„çš„å¢åŠ ã€åˆ é™¤æ“ä½œï¼Œå †æœ‰ä¸€ä¸ªé¢å¤–çš„æ“ä½œï¼Œå°±æ˜¯è°ƒæ•´æ•°æ®çš„ä½ç½®ã€‚\n\næœ¬ç¯‡åšå®¢ä¸å†å¯¹å‰é¢çš„åŸºç¡€æ“ä½œè¿›è¡Œè®²è§£ï¼Œå¦‚æœæœ‰ä¸ä¼šçš„å¯ä»¥è¯„è®ºåŒºæå‡ºå“¦\n\næ¯”å¦‚ä¸‹é¢è¿™å¹…å›¾é‡Œçš„æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æ•°ç»„çš„æœ«å°¾æ’å…¥ä¸€ä¸ªæ•°æ®6ï¼Œå› ä¸ºå½“å‰çš„è¿™ä¸ªå †æ˜¯ä¸€ä¸ªå°å †ï¼Œå †é¡¶çš„æ•°æ®æ˜¯æœ€å°çš„æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å¯¹è¿™ä¸ªæ•°æ®è¿›è¡Œå¤„ç†\n\nä½†å½“æˆ‘ä»¬æ’å…¥ä¸€ä¸ª0ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†ã€‚æˆ‘ä»¬å¿…é¡»å°†è¿™ä¸ª0è°ƒæ•´åˆ°å †é¡¶çš„ä½ç½®ï¼Œæ‰èƒ½è®©æ’å…¥æ•°æ®åçš„æ•°ç»„ä¾æ—§æ˜¯ä¸€ä¸ªå°å †\n\nè½¬æ¢ä¸ºæ ‘çš„å½¢çŠ¶ï¼Œå³ä¸ºä¸‹å›¾\n\næˆ‘ä»¬éœ€è¦è®©åœ¨å¶èŠ‚ç‚¹çš„0å¾€ä¸Šçˆ¬ï¼Œæ¥åˆ°1çš„ä½ç½®\nå¦‚ä½•æ“ä½œå‘¢ï¼Ÿ\n\nå°†è¯¥èŠ‚ç‚¹ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å¤§äºè¯¥èŠ‚ç‚¹ï¼Œåˆ™äº¤æ¢ä¸¤ä¸ªèŠ‚ç‚¹çš„ä½ç½®ã€‚\né€šè¿‡å¾ªç¯çš„æ¥å®Œæˆä¸€ä¸ªå®Œæ•´çš„å‘ä¸Šè°ƒèŠ‚å·¥ä½œ\n\nåœ¨ä¸Šç¯‡åšå®¢ä¸­ï¼Œæˆ‘æåˆ°äº†ä¸‹å›¾æ‰€ç¤ºçš„è®¡ç®—å…¬å¼ã€‚ä½¿ç”¨è¿™ä¸ªå…¬å¼æ¥è¿›è¡Œçˆ¶èŠ‚ç‚¹å’Œå­©å­èŠ‚ç‚¹çš„æŸ¥æ‰¾å·¥ä½œï¼Œå†å•ç‹¬ç¼–å†™ä¸€ä¸ªSwapå‡½æ•°è¿›è¡Œäº¤æ¢\n\nä»£ç å®ç°å¦‚ä¸‹\n//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(HPDataType* pa, HPDataType* pb) {\tint tmp = *pa;\t*pa = *pb;\t*pb = tmp;}//å‘ä¸Šè°ƒæ•´ï¼Œä¿è¯æ•°æ®æ˜¯(å¤§/å°)å †//childä¸ºå¾…è°ƒæ•´æ•°æ®çš„ä¸‹æ ‡ä½ç½®void AdjustUp(HPDataType* a, size_t child){\tassert(a);//è¿™é‡Œä¾æ—§éœ€è¦æ–­è¨€ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½å•ç‹¬è°ƒç”¨è¿™ä¸ªå‡½æ•°\twhile (child &gt; 0)\t{\t\tint parent = (child - 1) / 2;\t\tif (a[child] &lt; a[parent])//å°å †ï¼Œå°çš„æ•°æ®å¾€ä¸Šè°ƒ\t\t{\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tchild = parent;\t\t}\t\telse\t\t{\t\t\treturn;\t\t}\t}}// æ’å…¥xä»¥åï¼Œä¿æŒä»–ä¾æ—§æ˜¯(å¤§/å°)å †// O(logN)void HeapPush(HP* php, HPDataType x){\tassert(php);\tif (php-&gt;size == php-&gt;capacity)\t{\t\t//å¦‚æœå®¹é‡ä¸º0ï¼Œæ–°å®¹é‡ä¸º4ï¼›ä¸ä¸º0ï¼Œæ–°å®¹é‡ä¸ºåŸæœ¬å®¹é‡çš„2å€\t\tint newcapa = php-&gt;capacity==0 ? 4: php-&gt;capacity*2;\t\tHPDataType* tmp = (HPDataType*)realloc(php-&gt;a, newcapa*sizeof(HPDataType));//reallocæ¥æ”¶ç©ºæŒ‡é’ˆï¼Œä½œç”¨ä¸mallocç›¸åŒ\t\tif (tmp == NULL)\t\t{\t\t\tprintf(\"realloc failed!\\n\");\t\t\texit(-1);\t\t}\t\tphp-&gt;a = tmp;\t\tphp-&gt;capacity = newcapa;\t}\tphp-&gt;a[php-&gt;size] = x;//åœ¨æ•°ç»„æœ«å°¾æ’å…¥æ–°æ•°æ®\tphp-&gt;size++;\tAdjustUp(php-&gt;a, php-&gt;size - 1);}\n\nä¸‹å›¾æ›´åŠ æ¸…æ™°åœ°å±•ç¤ºäº†å‘ä¸Šè°ƒæ•´å‡½æ•°çš„ä½œç”¨è¿‡ç¨‹\n\n2.2å‘ä¸‹è°ƒæ•´åŒç†ï¼Œå½“æˆ‘ä»¬popæ‰ä¸€ä¸ªå †é¡¶çš„æ•°æ®ä¹‹åï¼Œå°±éœ€è¦è¿›è¡Œä¸€å®šçš„è°ƒæ•´ï¼Œæ¥ç»´æŒå †çš„ç»“æ„\nè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œæ ˆé¡¶çš„æ•°æ®å¹¶ä¸èƒ½ç›´æ¥popæ‰ï¼Œå› ä¸ºä¼šç ´åæ‰å †çš„ç»“æ„ã€‚\næ¯”å¦‚ä¸‹é¢çš„è¿™ä¸ªå †ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åˆ é™¤æ‰å †é¡¶çš„å…ƒç´ 1ï¼Œé‚£è¯·é—®è°æ¥å½“æ–°çš„çˆ¸çˆ¸å‘¢ï¼Ÿ\n\nä¸ºäº†æ–¹ä¾¿è¿™é‡Œæ•°æ®çš„å¤„ç†ï¼Œæˆ‘ä»¬è¦å…ˆå°†å †é¡¶çš„å…ƒç´ å’Œæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œå†è¿›è¡Œpopæ“ä½œã€‚\n\n\nå› ä¸ºæˆ‘ä»¬çš„å †æ˜¯ç”¨é¡ºåºè¡¨å®ç°çš„ï¼Œæ‰€ä»¥äº¤æ¢åï¼Œåªéœ€è®©size--å³å¯è¾¾åˆ°popçš„æ•ˆæœ\n\né‚£ä¹ˆå¦‚ä½•è®©8å¾€ä¸‹æ‰å‘¢ï¼Ÿ\nåŒæ ·æ˜¯åˆ©ç”¨ä¸Šé¢æåˆ°è¿‡çš„å…³ç³»å…¬å¼ğŸ‘‰ç‚¹æˆ‘å›åˆ°ä¹‹å‰çš„å…¬å¼å›¾\næˆ‘ä»¬éœ€è¦å°†8å’Œå®ƒçš„å­©å­è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ8å¤§äºå®ƒçš„å­©å­ï¼Œåˆ™è¿›è¡Œäº¤æ¢ã€‚\nä»£ç å®ç°å¦‚ä¸‹ğŸ‘‡\n//åˆ é™¤åå‘ä¸‹è°ƒæ•´ï¼Œä¿è¯æ•°ç»„æœ«å°¾æ•°æ®ä½ç½®æ­£ç¡®void AdjustDown(HPDataType* a, size_t size, size_t root){\tassert(a);\tint parent = root;\tint child = parent * 2 + 1;//å·¦å­©å­\twhile (child &lt; size)\t{\t\t\t\t//æ‰¾å·¦å³å­©å­ä¸­å°çš„é‚£ä¸€ä¸ª\t\tif (child + 1 &lt; size &amp;&amp; a[child] &gt; a[child + 1])\t\t{//å¦‚æœå·¦å­©å­å¤§äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t\tchild++;\t\t}\t\tif (a[child] &lt; a[parent])\t\t{\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tparent = child;\t\t\tchild = parent * 2 + 1;\t\t}\t\telse\t\t{\t\t\treturn;\t\t}\t}}// åˆ é™¤å †é¡¶çš„æ•°æ®ã€‚(æœ€å°/æœ€å¤§)ï¼›// äº¤æ¢å †é¡¶æ•°æ®å’Œæ•°ç»„æœ«å°¾æ•°æ®void HeapPop(HP* php) {\tassert(php);\tassert(php-&gt;size &gt; 0);\tSwap(&amp;php-&gt;a[0], &amp;php-&gt;a[php-&gt;size - 1]);\tphp-&gt;size--;\tAdjustDown(php-&gt;a, php-&gt;size, 0);}\n\nè¿™ä¸¤ä¸ªå‡½æ•°ä»¥å¤–çš„å…¶ä»–å‡½æ•°å°±æ¯”è¾ƒç®€å•å•¦ï¼Œç›¸ä¿¡å­¦åˆ°è¿™é‡Œçš„ä½ è‚¯å®šèƒ½è‡ªå·±æ ¹æ®å¤´æ–‡ä»¶çš„å‡½æ•°å£°æ˜æ¥è§£å†³å®ƒä»¬ã€‚å›åˆ°å¤´æ–‡ä»¶\n\nå¦‚æœä½ æœ‰ç–‘æƒ‘ï¼Œå¯ä»¥å»çœ‹çœ‹ä¹‹å‰é¡ºåºè¡¨çš„å®ç°ï¼Œæˆ–è€…åœ¨è¯„è®ºåŒºæé—®å“¦\n\n\n2.3ä»£ç æµ‹è¯•è€æ ·å­ï¼Œä¸€å®šè¦å†™å®Œä¸€ä¸ªæ¨¡å—åï¼Œç«‹é©¬æµ‹è¯•ä¸€ä¸ªæ¨¡å—ï¼\n\n3.å †æ’åºä¸Šé¢æˆ‘ä»¬è‡ªå·±å®ç°äº†ä¸€ä¸ªå †çš„ä»£ç ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©è¿™ä¸ªå †çš„ä»£ç ï¼Œè¿›è¡Œæ’åºæ“ä½œã€‚ï¼ˆè§£æè§ä»£ç æ³¨é‡Šï¼‰\nvoid HeapSort(int* a, int size){\t// å°å †-å‡åº\tHP hp;\tHeapInit(&amp;hp);\tfor (int i = 0; i &lt; size; ++i)\t{\t\tHeapPush(&amp;hp, a[i]);//å¾€å †å†…æ”¾å…¥æ•°æ®\t}\tsize_t j = 0;\twhile (!HeapEmpty(&amp;hp))\t{\t\ta[j] = HeapTop(&amp;hp);//æ¯ä¸€æ¬¡éƒ½å †é¡¶æ•°æ®å‡ºæ¥æ”¾å…¥æ•°ç»„\t\tj++;\t\tHeapPop(&amp;hp);//åˆ é™¤å †é¡¶æ•°æ®ï¼Œé‡æ–°æ’åº\t}\tHeapDestroy(&amp;hp);}\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°ä»£ç æˆåŠŸæ’åº\n\n3.1ä¸ºä»€ä¹ˆè¦è¿›è¡Œå †æ’åºï¼Ÿçœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼šæ’åºçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†’æ³¡æ’åºï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨åº“å‡½æ•°qsortè¿›è¡Œæ’åºï¼Œä¸ºä»€ä¹ˆè¦é‡‡å–å †æ’åºè¿™ç§æ–¹å¼å‘¢ï¼Ÿè¿˜éœ€è¦å†™ä¸€ä¸ªå †çš„ä»£ç ï¼Œå¤šéº»çƒ¦å•Šï¼\n\nè¦æƒ³è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å†’æ³¡æ’åºç®—æ³•å’Œå †æ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦\n\n\nå†’æ³¡æ’åºï¼šéå†ä¸€éæ•°ç»„æ˜¯Nï¼Œè°ƒæ•´ä¸€æ¬¡æ•°æ®ä¹Ÿæ˜¯Nï¼Œæ—¶é—´å¤æ‚è¯»æ˜¯O(N^2^)\nå †æ’åºï¼šå»ºå †æ˜¯O(N*logN)ï¼Œå–å †é¡¶æ•°æ®æ˜¯O(N)ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(N*logN)\n\nå¦‚æœä½ ä¸äº†è§£ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨\n\nå¯¹äºæˆ‘ç¤ºä¾‹ä¸­è¿™ä¸ª10ä¸ªå…ƒç´ çš„æ•°ç»„æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªæ—¶é—´å¤æ‚åº¦çš„å·®è·å¯èƒ½ä¸æ˜¯å¾ˆå¤§ï¼Œä½†å¯¹äºæµ·é‡æ•°æ®æ¥è¯´ï¼Œå·®è·å°±èµ·é£å•¦ï¼\n\n\n\næ•°æ®ä¸ªæ•°\nO(N*logN)\nO(N^2^)\n\n\n\n1000\n1000Ã—10\n1000Ã—1000\n\n\n100w\n100wÃ—20\n100wÃ—100w\n\n\nè¿™ä¸ªæ•°æ®çš„å·®è·å¯å¤§çš„å¾ˆå‘¢ï¼ğŸ˜±\n\nä»ä¸Šé¢çš„è§£é‡Šï¼Œä½ åº”è¯¥èƒ½çœ‹å‡ºæ¥ï¼Œå †æ’åºæ˜¯æŒºä¼˜ç§€ï¼\nä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬å¹¶ä¸ä¼šå†™ä¸Šé¢çš„ä»£ç ï¼Œå› ä¸ºå®ƒéœ€è¦å¦å»ºä¸€ä¸ªå †æ¥å­˜æ”¾æ•°æ®ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\næœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œèƒ½å¤Ÿåœ¨åŸæœ¬çš„æ•°ç»„ä¸Šå»ºå †ï¼Œæ¥è¿›è¡Œæ’åºå‘¢ï¼Ÿ\n3.2åœ¨åŸæœ¬æ•°ç»„ä¸Šå»ºå †ç›´å…¥ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨åŸæœ¬çš„æ•°æ®ä¸Šï¼Œåˆ©ç”¨å †çš„å‘ä¸Š/ä¸‹è°ƒæ•´ç®—æ³•ï¼Œå»ºç«‹ä¸€ä¸ªå¤§å †æˆ–è€…å°å †æ¥è¿›è¡Œæ’åºã€‚\n3.2.1 å‘ä¸Šè°ƒæ•´-æ’å…¥æ•°æ®ä½¿ç”¨æ’å…¥æ•°æ®çš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ å½“ä½œæ–°çš„å…ƒç´ è¿›è¡Œpushæ“ä½œï¼Œå¹¶åˆ©ç”¨å‘ä¸Šè°ƒæ•´ç®—æ³•æ¥è°ƒæ•´å®ƒä»¬çš„ä½ç½®ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™æ ·å°±èƒ½å»ºæˆä¸€ä¸ªå †ã€‚\n\nä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¯¹äºå‡åºæ¥è¯´ä¸å¤Ÿä¼˜åŒ–ï¼Œåç»­ä¼šæåˆ°å…·ä½“åŸå› \n\n3.2.2 å‘ä¸‹è°ƒæ•´-åˆ é™¤æ•°æ®å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¿™æ ·çš„æ•°ç»„ï¼ˆå®ƒç°åœ¨è¿˜ä¸ç®—ä¸€ä¸ªå †ï¼‰\n\næˆ‘ä»¬å¯ä»¥ä»ç¬¬ä¸€ä¸ªä»åå¾€å‰æ•°çš„éå¶å­èŠ‚ç‚¹ï¼ˆå³8ï¼‰å¼€å§‹ï¼Œè¿›è¡Œå‘ä¸‹è°ƒæ•´ï¼Œå¦‚æœå®ƒçš„å­©å­æ¯”å®ƒå°ï¼Œåˆ™è¿›è¡Œäº¤æ¢ã€‚å¤„ç†å®Œ8åï¼Œè¿›ä¸€æ­¥å¤„ç†7ã€2ã€4â€¦â€¦\nè¿™é‡Œä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹çš„åŸå› å¾ˆç®€å•ï¼šå¶å­èŠ‚ç‚¹æ²¡æœ‰å­©å­ï¼Œæœ¬æ¥å°±å·²ç»æ»¡è¶³å †çš„å®šä¹‰äº†ã€‚\n// å¯¹äºæ•°ç»„æ¥è¯´ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹è§†ä½œå­èŠ‚ç‚¹int child = arraySize-1;// è®¡ç®—çˆ¶äº²èŠ‚ç‚¹çš„å…¬å¼int parent = (child-1)/2;// æ‰€ä»¥ä»åå¾€å‰æ•°ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„å…¬å¼å¦‚ä¸‹int noneParent = (arraySize -1 -1)/2;\n\n\n\næœ€ç»ˆæˆ‘ä»¬ä¼šå¾—åˆ°è¿™æ ·çš„ä¸€ä¸ªå°å †ï¼Œè§ä¸‹å›¾ã€‚\n\næ­¤æ—¶å†å°†ç¬¬ä¸€ä¸ªæ•°æ®å’Œæœ«å°¾æ•°æ®è¿›è¡Œäº¤æ¢ï¼Œä»å †ä¸­popæ‰å®ƒï¼Œè®©å®ƒæˆä¸ºæ•°ç»„å°¾éƒ¨çš„æ•°æ®ï¼ˆæ¯æ¬¡éƒ½æ˜¯æœ€å°çš„æ•°æ®ï¼‰ã€‚å†è¿›è¡Œå‘ä¸‹è°ƒæ•´æ“ä½œï¼Œä¾æ¬¡å¾ªç¯ï¼Œå³å¯å®Œæˆä¸€ä¸ªé™åºçš„æ’åˆ—\n3.2.3æ¯”è¾ƒæ—¶é—´å¤æ‚åº¦æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚\n\nå¦‚æœæ˜¯å‘ä¸Šè°ƒæ•´çš„è¯ï¼Œç¬¬äºŒå±‚çš„2ä¸ªèŠ‚ç‚¹è¦å‘ä¸Šè°ƒæ•´1æ¬¡ï¼Œç¬¬ä¸‰å±‚çš„4ä¸ªèŠ‚ç‚¹è¦å‘ä¸Šè°ƒæ•´2æ¬¡ï¼Œæœ€åç´¯ç§¯ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢è¿™ä¸ªå…¬å¼$$T(h)=2^11+2^22+2^33+â€¦â€¦+2^{h-1}(h-1)$$æ•°å­¦å¥½çš„ä½ ï¼Œä¼°è®¡ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªç­‰å·®Ã—ç­‰æ¯”å½¢å¼çš„æ•°åˆ—ï¼Œå¯ä»¥åˆ©ç”¨\n\né”™ä½ç›¸å‡æ³•ï¼Œé«˜è€ƒç¬¬17é¢˜ï¼Œå¦‚æœå‡ºä¸Šé¢è¿™ä¸ªå¼å­ï¼Œå±äºé€åˆ†é¢˜\nå¿«ä¸€å¹´è¿‡å»äº†ï¼Œç°åœ¨çš„æˆ‘çœ‹åˆ°è¿™ä¸ªå¼å­ï¼Œå±äºé€å‘½é¢˜\n\nå¥½å§å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆéš¾ğŸ˜‚\n\nå¦‚æœæ˜¯å‘ä¸‹è°ƒæ•´ç®—æ³•ï¼Œç¬¬ä¸€å±‚è¦å‘ä¸‹ç§»åŠ¨h-1å±‚ï¼Œç¬¬äºŒå±‚è¦å‘ä¸‹ç§»åŠ¨h-2å±‚ï¼Œç¬¬h-1å±‚éœ€è¦å¾€ä¸‹ç§»åŠ¨1å±‚ï¼Œæˆ‘ä»¬èƒ½å¾—åˆ°ä¸‹é¢çš„å…¬å¼æœ€åèƒ½å¾—å‡ºï¼Œéœ€è¦ç§»åŠ¨çš„æ€»æ­¥æ•°ä¸ºåœ¨Nå¾ˆå¤§çš„æ—¶å€™ï¼Œå‡å»çš„log(n+1)å¯ä»¥å¿½ç•¥ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N)\nç”±æ­¤å¯è§ï¼Œå‘ä¸‹è°ƒæ•´ç®—æ³•æ˜¯æ›´ä¼˜çš„ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ›´å°!\n3.3ä»£ç ç¤ºä¾‹å¼„æ˜ç™½æ€è·¯åï¼Œå†™ä»£ç å°±å¾ˆç®€å•å•¦ï¼\n//äº¤æ¢æ•°ç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®void Swap(int* pa, int* pb) {\tint tmp = *pa;\t*pa = *pb;\t*pb = tmp;}// æ‰“å°æ•°ç»„void PrintArray(int* a,int n,const char*info){\tprintf(\"[%s] \",info);\tfor(int i=0;i&lt;n;i++)\t{\t\tprintf(\"%d \",a[i]);\t}\tprintf(\"\\n\");}// å †æ’åºvoid AdjustDown(int* a, int n, int root){\tassert(a);\tint parent = root;\tint child = parent * 2 + 1;//å·¦å­©å­\twhile (child &lt; n){\t\t//æ‰¾å·¦å³å­©å­ä¸­å°(å¤§)çš„é‚£ä¸€ä¸ª\t\tif (child + 1 &lt; n &amp;&amp; a[child] &gt; a[child + 1])\t\t{\t\t\tchild++; //å¦‚æœå·¦å­©å­å¤§(å°)äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t}\t\t// è¿™ä¸ªä¹Ÿéœ€è¦æ ¹æ®ä¸Šæ–¹ a[child] &lt; a[child + 1] å¤§äºå°äºçš„ä¸åŒè¿›è¡Œä¿®æ”¹\t\t// å¤§å †ï¼Œå°†å¤§çš„å¾€ä¸Šè°ƒ\t\t// å°å †ï¼Œå°†å°çš„å¾€ä¸Šè°ƒ\t\tif (a[child] &lt; a[parent]){\t\t\tSwap(&amp;a[child], &amp;a[parent]);\t\t\tparent = child;\t\t\tchild = parent * 2 + 1;\t\t}\t\telse{\t\t\treturn;\t\t}\t}}// å‡åºç”¨å¤§å †// é™åºç”¨å°å †void HeapSort(int* a, int n) // nä¸ºæ•°ç»„å…ƒç´ ä¸ªæ•°{\t// å‘ä¸‹è°ƒæ•´--å»ºå † O(N)\t// ä»åå¾€å‰æ•°çš„ç¬¬ä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œå¾€å‰å¤„ç†\tfor (int i = (n - 1 - 1) / 2; i &gt;= 0; --i){\t\tAdjustDown(a, n, i); // æ­¤æ—¶å»ºçš„æ˜¯ä¸€ä¸ªå°å †\t\t// å †é¡¶å…ƒç´ å°çš„æ˜¯å°å †\t}\tPrintArray(a, n,\"å»ºå †å\");\tsize_t end = n - 1;\twhile (end &gt; 0){\t\t//å‰åäº¤æ¢ï¼Œæœ€å°çš„æ•°æ”¾åˆ°æœ«å°¾ï¼Œä¸å‚ä¸ä¸‹ä¸€æ¬¡è°ƒæ•´\t\tSwap(&amp;a[0], &amp;a[end]);\t\tAdjustDown(a, end, 0);\t\tend--;\t}}\n\næµ‹è¯•ä¸€ä¸‹ä»£ç ï¼Œå®Œç¾æ’åºå‡ºäº†é™åº\n\nå¦‚æœä½ éœ€è¦å‡åºçš„è¯ï¼Œåªéœ€å°†åŸæœ¬å®ç°çš„å°å †ä»£ç ä¸­çš„åˆ¤æ–­æ¡ä»¶æ”¹ä¸€ä¸‹å°±è¡Œäº†ã€‚æŒ‰ä¸‹å›¾ä¿®æ”¹ï¼Œå³å¯æ”¹ä¸ºå‡åºæ’åºï¼ˆå»ºçš„å¤§å †ï¼‰\n\n\n4.TopKé—®é¢˜4.1é—®é¢˜è¯´æ˜TOP-Ké—®é¢˜ï¼šå³æ±‚æ•°æ®ç»“åˆä¸­å‰Kä¸ªæœ€å¤§çš„å…ƒç´ æˆ–è€…æœ€å°çš„å…ƒç´ ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ•°æ®é‡éƒ½æ¯”è¾ƒå¤§ã€‚\næ¯”å¦‚ï¼šä¸“ä¸šå‰10åã€ä¸–ç•Œ500å¼ºã€å¯Œè±ªæ¦œã€æ¸¸æˆä¸­å‰100çš„æ´»è·ƒç©å®¶ç­‰\nå¯¹äºTop-Ké—®é¢˜ï¼Œèƒ½æƒ³åˆ°çš„æœ€ç®€å•ç›´æ¥çš„æ–¹å¼å°±æ˜¯æ’åºã€‚æœ‰ä¸¤ä¸ªæ€è·¯\n\nå †æ’åºï¼šæ—¶é—´å¤æ‚åº¦O(N*logN)ï¼Œç©ºé—´å¤æ‚åº¦O(1)\nåœ¨åŸæœ¬çš„æ•°ç»„ä¸Šå»ºç«‹Nä¸ªæ•°çš„å¤§å †ï¼ŒPop Kæ¬¡ï¼Œå°±èƒ½é€‰å‡ºæœ€å¤§çš„å‰Kä¸ªã€‚æ—¶é—´å¤æ‚åº¦O(N+K*logN)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\nä½†æ˜¯ï¼Œå¦‚æœæ•°æ®é‡éå¸¸å¤§ï¼Œä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•å°±ä¸å¤ªå¯å–äº†(å¯èƒ½æ•°æ®éƒ½ä¸èƒ½ä¸€ä¸‹å­å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè€Œæ˜¯å­˜æ”¾åœ¨ç¡¬ç›˜é‡Œé¢)\n\n4.2å¦‚ä½•æ±‚è§£ï¼Ÿ\nç”¨å‰Kä¸ªæ•°å»ºç«‹ä¸€ä¸ªKä¸ªæ•°çš„å°å †ï¼Œç„¶åå‰©ä¸‹çš„N-Kä¸ªæ•°ä¾æ¬¡éå†ï¼Œå¦‚æœæ¯”å †é¡¶çš„æ•°æ®å¤§ï¼Œå°±æ›¿æ¢å®ƒè¿›å †ï¼ˆè¿›å †åè¦è¿›è¡Œå‘ä¸‹è°ƒæ•´ï¼‰ï¼Œç›¸å½“äºæŠŠå°çš„æ•°æ®ç»™å‰”é™¤ï¼Œæœ€åå †é‡Œé¢çš„Kä¸ªæ•°æ®å°±æ˜¯æœ€å¤§çš„å‰Kä¸ª\n\nä»£ç ç¤ºä¾‹å¦‚ä¸‹\nvoid PrintTopK(int* a, int n, int k){\t// 1.å»ºå †--ç”¨aä¸­å‰kä¸ªå…ƒç´ å»ºå †\tint* kminHeap = (int*)malloc(sizeof(int) * k);\tassert(kminHeap);\tfor (int i = 0; i &lt; k; ++i)\t{\t\tkminHeap[i] = a[i];\t}\t//åˆ©ç”¨å°å †ä»£ç çš„å‘ä¸‹è°ƒæ•´ï¼Œå»ºä¸€ä¸ªå°å †\tfor (int j = (k - 1 - 1) / 2; j &gt;= 0; --j)\t{\t\tAdjustDown(kminHeap, k, j);\t}\t//å †é¡¶æ˜¯è¿™ä¸ªå †é‡Œé¢æœ€å°çš„æ•°æ®\t//2.å°†å‰©ä½™n-kä¸ªå…ƒç´ ä¾æ¬¡ä¸å †é¡¶å…ƒç´ åˆ¤æ–­ï¼Œå¦‚æœå¤§äºå †é¡¶ï¼Œåˆ™äº¤æ¢\tfor (int i = k; i &lt; n; ++i)\t{\t\tif (a[i] &gt; kminHeap[0])\t\t{\t\t\tkminHeap[0] = a[i];\t\t\tAdjustDown(kminHeap, k, 0);\t\t}\t}\tfor (int j = 0; j &lt; k; ++j)\t{\t\tprintf(\"%d \", kminHeap[j]);\t}\tprintf(\"\\n\");\tfree(kminHeap);}\n\n\næ—¶é—´å¤æ‚åº¦ï¼šO(K+logK*(N-K))\nç©ºé—´å¤æ‚åº¦ï¼šO(K)\n\nå½“Néå¸¸å¤§ï¼ŒKå¾ˆå°çš„æ—¶å€™ï¼Œè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åŸºæœ¬å°±æ˜¯O(N)\n\n4.3æµ‹è¯•ä»£ç é€šè¿‡timeå‡½æ•°å’Œsrandå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ª10000ä¸ªæ•°çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ èµ‹å€¼å°äº100wçš„éšæœºæ•°ï¼Œå†åœ¨éšæœºä½ç½®æ”¾å…¥10ä¸ªå¤§äº100wçš„æ•°å­—ã€‚\nå¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç å·§å¦™åˆ©ç”¨å †çš„çŸ¥è¯†ï¼Œå¸®æˆ‘ä»¬æ‰¾å‡ºäº†è¿™ä¸ª10000ä¸ªæ•°çš„æ•°ç»„ä¸­æœ€å¤§çš„å‰Kä¸ªæ•°å­—\n\n\nç»“è¯­å †å’Œå †æ’åºçš„çŸ¥è¯†åˆ°è¿™é‡Œå°±è®²è§£å®Œæ¯•å•¦ï¼å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€å“¦~\n\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","å †"]},{"title":"ã€C++ã€‘STLï¼šstring","url":"/posts/1606342371/","content":"è¿™æ˜¯æ¥è§¦STLçš„ç¬¬ä¸€ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä»¥stringä¸ºå§‹ï¼Œèµ°å…¥SLTçš„ä¸–ç•Œå§ï¼\n\n\n[TOC]\n1.ä½•ä¸ºSTLSTLæ˜¯C++æ ‡å‡†åº“çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºç»å¤§å¤šæ•°æ•°æ®ç»“æ„æä¾›è½®å­ï¼Œæ˜¯ä¸€ä¸ªåŒ…ç½—äº†æ•°æ®ç»“æ„å’Œç®—æ³•çš„è½¯ä»¶æ¡†æ¶ã€‚\nåœ¨ä¹‹å‰Cè¯­è¨€çš„æ•°æ®ç»“æ„ä¸“æ ä¸­ï¼Œé¡ºåºè¡¨ã€é“¾è¡¨ç­‰ç­‰éƒ½æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±é€ è½®å­æ¥å®ç°ã€‚ä½†åœ¨C++ä¸­ï¼Œæœ‰STLå°±å¥½æ¯”ç«™åœ¨äº†å·¨äººçš„è‚©è†€ä¸Šï¼Œå¯ä»¥èµ°çš„æ›´è¿œã€‚å½“æˆ‘ä»¬éœ€è¦ä½¿ç”¨è¿™äº›å†…å®¹æ—¶ï¼Œæ— éœ€è‡ªå·±é‡æ–°é€ è½®å­ï¼Œä»è€Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚\n1.1 STLç‰ˆæœ¬è¿™é‡Œæˆ‘ç›´æ¥è´´ä¸€ä¸ªCè¯­è¨€ä¸­æ–‡ç½‘çš„é“¾æ¥ğŸ‘‰ã€ç‚¹æˆ‘ã€‘\né‡Œé¢è¯¦ç»†ä»‹ç»äº†STLå‘å±•å†ç¨‹ä¸­å‡ºç°çš„å‡ ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­SGIå› ä¸ºè¢«Linuxçš„GCCæ‰€ä½¿ç”¨ï¼Œå¯ç§»æ¤æ€§é«˜ã€‚ä¹‹åçš„åšå®¢ä¸»è¦æ˜¯å­¦ä¹ SGI STLç‰ˆæœ¬ã€‚\n\n1.2 STLç»„æˆåŒæ ·æ˜¯Cè¯­è¨€ä¸­æ–‡ç½‘çš„èµ„æ–™ğŸ‘‰ã€é“¾æ¥ã€‘ï¼Œæˆ‘å°†å®ƒæ•´ç†ä¸ºäº†ä¸‹é¢è¿™ä¸ªæ€ç»´å¯¼å›¾\n\nåœ¨é¢è¯•ä¸­ï¼ŒSTLçš„å†…å®¹ä¹Ÿæ˜¯HRç»å¸¸è€ƒå¯Ÿçš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦è®¤çœŸå­¦ä¹ è¿™ä¸€éƒ¨åˆ†çš„çŸ¥è¯†ç‚¹ï¼\n1.3 STLçš„ä¸€äº›åæ§½å¦‚æœä½ å»Cplusplusç½‘ç«™ä¸Šçœ‹è¿‡STLåº“çš„æ¥å£ï¼Œä½ å°±ä¼šå‘ç°STLåº“çš„è®¾è®¡æœ‰äº›å¤æ‚ã€‚æœ‰å¾ˆå¤šåœ°æ–¹éƒ½è€ƒè™‘çš„è¿‡äºç»†è‡´ï¼Œå¯¼è‡´å‡½æ•°æ¥å£éå¸¸å¤šï¼Œæƒ³è¦å…¨è®°ä½è¿™äº›æ¥å£æ˜¯æœ‰äº›å›°éš¾çš„\n\nå½“ç„¶ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘è‡ªå·±å¤ªèœäº†çš„ç¼˜æ•…ã€‚æˆ–è®¸ä»¥åç”¨çš„å¤šäº†ï¼Œè¿™äº›å°±ç†æ‰€åº”å½“çš„è®°ä½äº†å§ã€‚\nåŒæ—¶ï¼Œå› ä¸ºSTLä½¿ç”¨äº†æ¨¡æ¿ï¼Œæ‰€ä»¥å½“ä½ å¤šæ¬¡ä½¿ç”¨STLæ—¶ï¼ˆæ¯”å¦‚vectorå®¹å™¨ï¼‰å°±å®¹æ˜“å‡ºç°ä»£ç å†—ä½™\n\nå¥½å•¦ï¼Œä¸bbè¿™äº›æ²¡ç”¨çš„äº†ï¼Œè¿˜æ˜¯ç›´æ¥è¿›å…¥æ­£é¢˜stringç±»å§ï¼\n\n\n2.String\nå‚è€ƒcplusplusçš„æ ‡å‡†æ–‡æ¡£ï¼šstring\n\nstringç±»æ˜¯è¡¨ç¤ºå­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²ç±»ï¼Œè¯¥ç±»çš„æ¥å£å’Œå¸¸è§„çš„å®¹å™¨åŸºæœ¬ç›¸åŒï¼Œå¹¶æ·»åŠ äº†ä¸€äº›ä¸“é—¨ç”¨äºæ“ä½œå­—ç¬¦ä¸²çš„å¸¸è§„æ“ä½œã€‚ä½¿ç”¨stringéœ€è¦åŒ…å«&lt;string&gt;å’Œusing namespace std;\n\nè¿™é‡Œä¸ºä»€ä¹ˆæ˜¯stringè€Œæ²¡æœ‰.hå‘¢ï¼Ÿ\nå…¶å®ç¼–è¯‘å™¨å¤„ç†å¤´æ–‡ä»¶å¹¶ä¸ä¼šå…³æ³¨å¤´æ–‡ä»¶çš„åç¼€ï¼Œä¸”Cè¯­è¨€ä¸­å·²ç»æœ‰ä¸€ä¸ªstring.häº†ï¼Œä¸ºäº†é¿å…å†²çªï¼Œæ‰€ä»¥ä½¿ç”¨äº†&lt;string&gt;ä½œä¸ºå¤´æ–‡ä»¶\n\nä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„stringç±»å‡½æ•°æ¥å£ï¼Œæ ‡é¢˜ä¸­çš„è‹±æ–‡å’Œcplusplusç½‘ç«™ä¸­çš„åˆ†ç±»å¯¹åº”\n2.1 ç¼–ç æ ¼å¼åœ¨Class instantiationsæ ç›®ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°stringæœ‰å¾ˆå¤šä¸åŒçš„ç±»ï¼Œè¿™äº›ç±»çš„ä¸»è¦åŒºåˆ«åœ¨äºç¼–ç æ–¹å¼çš„ä¸åŒã€‚æˆ‘ä»¬ä¸»è¦å­¦ä¹ çš„æ˜¯ç¬¬ä¸€ä¸ªçš„stringç±»\n\nä»€ä¹ˆæ˜¯ç¼–ç æ ¼å¼å‘¢ï¼Ÿåœ¨ç¼–ç¨‹å­¦ä¹ ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ä¾¿æ˜¯ASCiiç ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰utf-8ã€utf-16ç­‰ç­‰ã€‚\n\nASIIç è¡¨ä¸­ï¼Œè‹±æ–‡å•è¯ã€æ•°å­—ã€å„ç±»æ ‡ç‚¹ç¬¦å·éƒ½æœ‰å®ƒä»¬å¯¹åº”çš„å€¼ï¼Œè¿™æ ·æ‰èƒ½åœ¨åªæ”¯æŒ01äºŒè¿›åˆ¶çš„ç”µè„‘ä¸Šæ˜¾ç¤ºå‡ºå¯¹åº”çš„å†…å®¹ã€‚å½“è®¡ç®—æœºéœ€è¦æ˜¾ç¤ºè‹±æ–‡å•è¯çš„æ—¶å€™ï¼Œå°±ä¼šå»æŸ¥æ‰¾è¿™ä¸€ä¸ªè¡¨ã€‚æ‰€ä»¥ASCIIç è¡¨æ˜¯æ¼‚äº®å›½è®¾è®¡çš„ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œè‹±æ–‡ä¸­çš„åŸºç¡€åªæœ‰26ä¸ªå•è¯ï¼Œç®—ä¸Šå¤§å°å†™ä¹Ÿå°±52ä¸ªã€‚ä½†æ˜¯æˆ‘ä»¬ä¸­åæ–‡åŒ–åšå¤§ç²¾æ·±ï¼Œè®¡ç®—æœºéœ€è¦æ˜¾ç¤ºä¸­æ–‡çš„æ—¶å€™ï¼Œä¸€ä¸ªcharç±»å‹çš„ç©ºé—´å·²ç»ä¸å¤Ÿã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ•´å‡ºä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„ç¼–ç æ ¼å¼ï¼Œä»¥æ­¤è®©è®¡ç®—æœºæ”¯æŒæ˜¾ç¤ºä¸­æ–‡â€”â€”GBKå°±æ˜¯è¿™æ ·ä¸€ä¸ªç¼–ç æ ¼å¼\n\nGBKä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨ä¸€ä¸ªæ±‰å­—ï¼Œä¸€äº›ä¸å¸¸ç”¨çš„ç”Ÿåƒ»å­—å¯èƒ½éœ€è¦3-4ä¸ªå­—èŠ‚æ¥å­˜å‚¨ã€‚\nç”¨ä¸‹é¢è¿™ä¸ªç®€å•çš„å‡½æ•°æ¥æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸­æ–‡ä¸­è°éŸ³å­—çš„ç¼–ç æ˜¯ç›¸è¿‘çš„\n\nåœ¨ç½‘ç»œä¸Šï¼Œæˆ‘ä»¬æ‰“æŸäº›è¯æ±‡ä¼šè¢«æ›¿æ¢æˆ****ï¼Œå°±æ˜¯ç¨‹åºåœ¨åå°å®åˆ«äº†ä½ çš„ç¼–ç ã€‚åŒæ—¶å¦‚æœæƒ³è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼ŒæŠŠè°éŸ³å­—ä¹Ÿå±è”½æ‰çš„è¯ï¼Œå°±å¯ä»¥æŠŠè¿™ä¸ªè¯å‘¨å›´çš„ç¼–ç å…¨éƒ¨å±è”½äº†ã€‚\n\nåŒç†ï¼Œutf-16å’Œutf-32ä¸ºäº†æ”¯æŒåˆ«çš„å›½å®¶çš„è¯­è¨€ï¼Œå°±ä¼šç”¨æ›´é•¿çš„å­—èŠ‚æ¥å­˜å‚¨æ–‡å­—ã€‚è¿™é‡Œä¸è¿›è¡Œè¯¦è§£ã€‚\n\n\nstringç±»æœ‰éå¸¸å¤šçš„æ¥å£ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®Œå…¨æŒæ¡æ‰€æœ‰çš„å‡½æ•°æ¥å£ã€‚åªéœ€è¦å­¦ä¼šå¸¸ç”¨çš„æ¥å£ï¼Œåœ¨é‡åˆ°ä¸€äº›ä¸å¸¸ç”¨çš„ï¼Œåœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™å¯ä»¥å»æŸ¥æ‰¾cplusplusçš„æ–‡æ¡£ã€‚\n2.2 æ„é€ å‡½æ•°(constructor)\nä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„stringç±»çš„æ„é€ å‡½æ•°\n\n\n\næ„é€ å‡½æ•°\nåŠŸèƒ½\n\n\n\nstring()\nç©ºçš„stringå¯¹è±¡ï¼ˆç©ºçš„å­—ç¬¦ä¸²ï¼‰\n\n\nstring(size_t n,char c)\nstringç±»å¯¹è±¡ä¸­åŒ…å«nä¸ªå­—ç¬¦c\n\n\nstring(const char*s)\nåˆ©ç”¨å¸¸é‡å­—ç¬¦ä¸²æ¥æ„é€ å¯¹è±¡\n\n\nstring(const string&amp;s)\næ‹·è´æ„é€ \n\n\né™¤æ­¤ä¹‹å¤–ï¼Œåœ¨æ–‡æ¡£ä¸­æˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°æ›´å¤šæ„é€ å‡½æ•°\n\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨èµ‹å€¼æ“ä½œç¬¦è¿›è¡Œæ„é€ ã€‚ä¸‹é¢æ˜¯èµ‹å€¼é‡è½½çš„3ä¸ªç‰ˆæœ¬ï¼Œæƒ³å¿…éƒ½èƒ½çœ‹æ‡‚ï¼Œæ˜¯é€šè¿‡å¯¹è±¡ã€å¸¸é‡å­—ç¬¦ä¸²å’Œå­—ç¬¦è¿›è¡Œèµ‹å€¼æ“ä½œã€‚\n\nstringç±»ä¸­ä¹Ÿé‡è½½äº†æµæå–å’Œæµæ’å…¥æ“ä½œç¬¦ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œè¾“å…¥è¾“å‡ºæ“ä½œã€‚\n\n\næˆ‘ä»¬è¿˜å¯ä»¥é€‰å–ä¸€ä¸ªèŒƒå›´è¿›è¡Œæ„é€ ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ„é€ å‡½æ•°çš„ç¬¬ä¸‰ä¸ªä¼ å‚æœ‰ç¼ºçœå€¼npos\nstring (const string&amp; str, size_t pos, size_t len = npos);\n\næŸ¥æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œnopså…¶å®æ˜¯-1ï¼Œè€Œå®ƒçš„ç±»å‹æ˜¯æ— ç¬¦å·æ•´å‹ï¼Œ-1å°±ä»£è¡¨æ— ç¬¦å·æ•´å½¢çš„æœ€å¤§å€¼ã€‚å³ä»posä½ç½®å¼€å§‹ï¼Œå¾€åå–æœ€å¤§å€¼çš„é•¿åº¦ï¼ˆå®é™…ä¸Šå‹æ ¹æ²¡æœ‰é‚£ä¹ˆé•¿çš„å­—ç¬¦ä¸²ï¼‰\n\n2.3 ææ„å‡½æ•°(destructor)ææ„å‡½æ•°æœ‰ä¸ªå¥½å¤„ï¼Œå°±æ˜¯ç¼–è¯‘å™¨è‡ªå·±ä¼šè¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•äº†è§£å³å¯ã€‚\n\n2.4 éå†stringå¯¹è±¡æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„3ç§æ–¹å¼æ¥éå†ä¸€ä¸ªstringå¯¹è±¡\nvoid test3()&#123;\t//å°è¯•éå†ä¸€ä¸ªstring\tstring s1(&quot;hello world!&quot;);\t//1.é‡è½½[]\t//é€šè¿‡è°ƒç”¨æˆå‘˜å‡½æ•°sizeå¾—çŸ¥é•¿åº¦\tcout &lt;&lt; &quot;operator[] &quot; &lt;&lt; endl;\tfor (int i = 0; i &lt; s1.size(); i++)\t&#123;\t\tcout &lt;&lt; s1[i] &lt;&lt; &quot; &quot;;\t&#125;\tcout &lt;&lt; endl;\t//2.èŒƒå›´for\t//æœ¬è´¨ä¸Šè°ƒç”¨çš„æ˜¯è¿­ä»£å™¨\tcout &lt;&lt; &quot;auto &quot; &lt;&lt; endl;\tfor (auto c : s1)\t&#123;\t\tcout &lt;&lt; c &lt;&lt; &quot; &quot;;\t&#125;\tcout &lt;&lt; endl;\t//3.è¿­ä»£å™¨\t//åœ¨å¾ˆå¤šå®¹å™¨ä¸­æ˜¯é€šç”¨çš„\tstring::iterator it = s1.begin();//æŒ‡å‘å¼€å¤´\t//endæŒ‡å‘æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼ˆå³&#x27;\\0&#x27;)\tcout &lt;&lt; &quot;string::iterator &quot; &lt;&lt; endl;\twhile (it != s1.end())\t&#123;\t\tcout &lt;&lt; *it &lt;&lt; &quot; &quot;;\t\tit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ\t&#125;\tcout &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°è¿™ä¸‰ä¸ªæ–¹å¼éƒ½æˆåŠŸæ‰“å°å‡ºäº†s1å¯¹è±¡çš„å®Œæ•´å†…å®¹\n\nå…¶ä¸­èŒƒå›´forç¼–è¯‘å™¨åœ¨æ“ä½œçš„æ—¶å€™æ˜¯ç”¨è¿­ä»£å™¨æ¥å®ç°çš„ï¼Œè¿™ä¸€ç‚¹é€šè¿‡æŸ¥çœ‹æ±‡ç¼–å¯ä»¥çœ‹å‡ºæ¥\n\n2.5 operator[]å’Œatï¼ˆElement accessï¼‰ä¸Šé¢æˆ‘ä»¬ç”¨åˆ°äº†operator[]é‡è½½ï¼Œéœ€è¦äº†è§£çš„æ˜¯ï¼Œè¿™ä¸ªé‡è½½è¿”å›çš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥ç”¨è¿™ä¸ªæ–¹å¼æ¥è®¿é—®å€¼çš„å†…å®¹ä»¥å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥æ”¹å˜stringä¸­æŸä¸€ä¸ªä½ç½®çš„å€¼ã€‚\n\nconst string s1(&quot;hello&quot;);s1[0]=&#x27;x&#x27;//æ­¤æ—¶è°ƒç”¨çš„æ˜¯constç‰ˆæœ¬çš„é‡è½½ï¼Œä¸å¯ä¿®æ”¹\n\natå‡½æ•°çš„ä½¿ç”¨æ–¹å¼å’Œ[]é‡è½½ç±»ä¼¼\n\nåŒºåˆ«å°±æ˜¯ï¼Œå½“operator[]é‡åˆ°è¶Šç•Œæƒ…å†µçš„æ—¶å€™ï¼Œå¦‚æœç›¸ç­‰å’Œå°äºé•¿åº¦ï¼Œéƒ½ä¸ä¼šæŠ¥é”™ã€‚ä½†æ˜¯å½“ä¸‹æ ‡å¤§äºé•¿åº¦æ—¶ï¼Œä¼šå¼•å‘æœªå®šä¹‰è¡Œä¸º\n\nè€Œat()çš„å¤„ç†æ–¹å¼æ˜¯ï¼Œåªè¦é•¿åº¦ä¸å°äºstringçš„é•¿åº¦ï¼Œå°±æŠ›å‡ºå¼‚å¸¸\n\n2.6 æ­£å‘å’Œåå‘è¿­ä»£å™¨Iteratorsé™¤äº†åœ¨2.2.3ä¸­ä½¿ç”¨è¿‡çš„æ­£å‘è¿­ä»£å™¨ä»¥å¤–ï¼Œstringè¿˜æœ‰ä¸€ä¸ªåå‘è¿­ä»£å™¨rbegin\n//åå‘è¿­ä»£å™¨string::reverse_iterator rit = s1.rbegin();//æŒ‡å‘ç»“å°¾å­—ç¬¦ï¼ˆ&#x27;\\0&#x27;ä¹‹å‰ï¼‰//endæŒ‡å‘å¼€å¤´æ•°æ®çš„å‰ä¸€ä¸ªä½ç½®while (rit != s1.rend())&#123;\tcout &lt;&lt; *rit &lt;&lt; &quot; &quot;;\trit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ&#125;cout &lt;&lt; endl;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™ä¸ªè¿­ä»£å™¨æ˜¯åå‘çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™ï¼Œä¾æ—§ä¼šrit++è€Œä¸æ˜¯å‡\n\næ³¨æ„ï¼ŒåŸºæœ¬çš„è¿­ä»£å™¨æ˜¯å¯è¯»å¯å†™çš„ã€‚åœ¨stringé‡Œé¢è¿˜å®ç°äº†constçš„è¿­ä»£å™¨\nconst_iterator begin() const;const_reverse_iterator rbegin() const;\n\nå¦‚æœä½ è§‰å¾—è¿™æ ·å†™å¤ªéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“è®°ä¸ä½ã€‚å¯ä»¥è®©autoæ¥è‡ªåŠ¨è¿›è¡Œæ¨å¯¼\nconst string s1(&quot;hello&quot;);auto rit = s1.rbegin();\n\nC++11ä¸­ï¼Œä¸ºäº†å’ŒåŸºæœ¬çš„æ–¹å¼è¿›è¡ŒåŒºåˆ†ï¼Œæ–°å¢äº†ä»¥cä¸ºå‰ç¼€çš„4ä¸ªè¿­ä»£å™¨ã€‚å…¶ä½¿ç”¨å’Œconst_iteratoræ˜¯æ²¡æœ‰åŒºåˆ«çš„ã€‚\n\n\n2.7é•¿åº¦å’Œå®¹é‡æ“ä½œCapacity\n2.7.1 sizeå’Œlengthè¿™å…¶ä¸­sizeå’Œlengthçš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚åªæ˜¯æ—©æœŸstringè®¾è®¡çš„æ—¶å€™ä»¥lengthä½œä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­ä¸ºäº†å’Œå…¶ä»–æ¥å£æ¯”å¦‚Listè¿›è¡ŒåŒæ­¥ï¼Œåˆæ–°å¢äº†ä¸€ä¸ªsizeæ¥è¡¨ç¤ºå­—ç¬¦ä¸²é•¿åº¦ã€‚\n\n\n2.7.2 resizeå’Œreserve\næ³¨æ„åŒºåˆ†reserveå’Œreverse\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡reserveå¯¹å†…å­˜è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œå®¹é‡å˜å¤§æ˜¯å› ä¸ºéœ€è¦å†…å­˜å¯¹é½\n\nä½†åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“å­—ç¬¦ä¸²çš„å®¹é‡å¿«è¦å†™æ»¡çš„æ—¶å€™ï¼Œç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹ï¼Œå¤§æ¦‚æ˜¯1.5å€\n\n\nè€Œresizeçš„æ“ä½œæ˜¯ä¿®æ”¹stringç±»çš„é•¿åº¦sizeï¼Œå¹¶åŒæ—¶è¿›è¡Œæ‰©å®¹\nstring s1(&quot;hello&quot;);cout &lt;&lt; s1.capacity() &lt;&lt; endl;s1.resize(100);cout &lt;&lt; s1.capacity() &lt;&lt; endl;\n\né€šè¿‡è°ƒè¯•å¯ä»¥å‘ç°ï¼Œè¿™é‡Œä¼šæŠŠsizeä¿®æ”¹ä¸º100ï¼Œå¹¶å°†å¤šä½™å†…å®¹å…¨éƒ¨åˆå§‹åŒ–ä¸º0\n\næˆ‘ä»¬è¿˜å¯ä»¥ç»™resizeè¿›è¡Œä¼ å‚ï¼ŒæŒ‡å®šåˆå§‹åŒ–çš„å†…å®¹\n\n\nåŒæ—¶ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¸€èˆ¬éƒ½ä¸ä¼šå¯¹å®¹é‡è¿›è¡Œç¼©å®¹\n\nä½†æ˜¯resizeä¼šä¿®æ”¹sizeçš„å¤§å°ï¼Œå³æŠ›å¼ƒæ‰10ä»¥åçš„å†…å®¹ï¼Œä½†ä¿æŒå®¹é‡ä¸å˜\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨VS2019ä¸­ï¼ˆä¸åŒç¼–è¯‘å™¨å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼Œreserveå¦‚æœä¼ å‚å°äº15ï¼Œåˆ™ä¼šå¯¹å®¹é‡è¿›è¡Œç¼©å®¹åˆ°15ï¼ˆstringå¯¹è±¡é»˜è®¤ä¼šå¼€è¾Ÿ15ä¸ªå­—èŠ‚çš„capacityï¼‰\n\n\n2.8ä¿®æ”¹å†…å®¹ï¼ˆModifiersï¼‰stringå¯ä»¥é€šè¿‡å¾ˆå¤šæ–¹å¼æ¥å¢åŠ ã€åˆ é™¤å†…å®¹\n2.8.1 å°¾æ’\nå®ƒä»¬çš„åŸºæœ¬ä½¿ç”¨å¦‚ä¸‹ï¼Œå…¶ä¸­æœ€æ–¹ä¾¿çš„è‚¯å®šæ˜¯+=æ“ä½œäº†ï¼Œåˆæ¸…æ™°åˆç®€å•ï¼\n\n2.8.2 ä¸­é—´æ’å…¥stringå¹¶æ²¡æœ‰æä¾›ä¸€ä¸ªå¤´æ’çš„é€‰é¡¹ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªInsertï¼Œå¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥\n\ninsertå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ç›¸å¯¹è¾ƒé«˜ï¼Œå› ä¸ºåœ¨ä¸­é—´æˆ–è€…å¼€å¤´æ’å…¥å†…å®¹éœ€è¦æŒªåŠ¨æ•°æ®ã€‚ç©ºé—´ä¸å¤Ÿçš„æ—¶å€™è¿˜éœ€è¦æ‰§è¡Œæ‰©å®¹æ“ä½œï¼Œæ•ˆç‡è¾ƒä½ã€‚\n\n2.8.3 åˆ é™¤å¯ä»¥é€šè¿‡eraseå‡½æ•°åˆ é™¤æ•°æ®\n\n\n1ï¼šé»˜è®¤ä»0å¼€å§‹å®Œå…¨åˆ é™¤ï¼Œå¯ä»¥é€‰æ‹©ä»posä½ç½®å¼€å§‹åˆ é™¤lené•¿åº¦çš„æ•°æ®\n2ï¼šåˆ©ç”¨è¿­ä»£å™¨åˆ é™¤pä½ç½®çš„å†…å®¹\n3ï¼šåˆ é™¤ä¸€ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œä»firstå¼€å§‹lastç»“æŸ\n\nè¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œåœ¨è¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†\n2.8.4 æ›¿æ¢è¿™ä¸ªå‡½æ•°ä½¿ç”¨å¹¶ä¸é¢‘ç¹ï¼Œå…¶ä¿®æ”¹æ“ä½œä¸å¦‚ä½¿ç”¨æ‹·è´å¤åˆ¶ğŸ˜‚\n\næ¯”å¦‚å…¶ä¸­ç¬¬äºŒä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†strå¯¹è±¡ä¸­ï¼Œä»subposä½ç½®å¼€å§‹çš„sublené•¿åº¦å†…å®¹å¤åˆ¶åˆ°æœ¬å¯¹è±¡ä¸­ã€‚\n2.8.5 äº¤æ¢åœ¨stringç±»ä¸­æœ‰ä¸€ä¸ªäº¤æ¢å‡½æ•°ï¼ŒåŒæ—¶ï¼Œstdæ ‡å‡†åº“é‡Œé¢ä¹Ÿæœ‰ä¸€ä¸ªäº¤æ¢å‡½æ•°\ns1.swap(s2);//stringç±»swap(s1,s2);//stdæ ‡å‡†\n\n\n\nstringç±»é‡Œé¢çš„å‡½æ•°æ˜¯äº¤æ¢ç±»å¯¹è±¡çš„æŒ‡é’ˆ\nè€Œæ ‡å‡†åº“é‡Œé¢çš„swapå‡½æ•°éœ€è¦è¿›è¡Œæ·±æ‹·è´äº¤æ¢\n\næ‰€ä»¥stringç±»é‡Œé¢çš„swapå‡½æ•°åœ¨å¤„ç†å¯¹è±¡çš„æ—¶å€™ï¼Œæ¯”æ ‡å‡†åº“é‡Œé¢çš„swapæ•ˆç‡ä¼šé«˜ä¸€äº›\n2.9å­—ç¬¦ä¸²æ“ä½œï¼ˆString operationsï¼‰2.9.1 c_strè¿™ä¸ªæ¥å£çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œå…¶ä¸»è¦æ˜¯ä¸ºäº†å’ŒCè¯­è¨€çš„ä¸€äº›å‡½æ•°å¯¹åº”ï¼Œæ¯”å¦‚åˆ©ç”¨strcmpæ‹·è´ä¸€ä¸ªstringå¯¹è±¡åˆ°å†…ç½®å­—ç¬¦ä¸²char arr[]ä¸­ã€‚\n\n\n2.9.2 findè¿™é‡Œå¯ä»¥çœ‹åˆ°éå¸¸å¤šç§ç±»çš„æŸ¥æ‰¾å‡½æ•°ï¼ˆå·æ‡’ä¸å†™ç¤ºä¾‹äº†ï¼‰\n\n\nfindå‡½æ•°å¯ä»¥æŸ¥æ‰¾stringä¸­çš„æŸä¸€ä¸ªå­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›èµ·å§‹ä½ç½®çš„ä¸‹æ ‡\nè¯¥å‡½æ•°é»˜è®¤ä»å¤´å¼€å§‹æŸ¥æ‰¾ï¼Œä½ ä¹Ÿå¯ä»¥å•ç‹¬æŒ‡å®šä»posä½ç½®å¼€å§‹æŸ¥æ‰¾\n\n\n\nå’Œè¿­ä»£å™¨ä¸€æ ·ï¼Œrfindåˆ™æ˜¯ä»æœ«å°¾å¼€å§‹æ‰¾æŒ‡å®šå†…å®¹\n\næœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾çš„å†…å®¹å¹¶ä¸æ˜¯ä»å¤´å¼€å§‹çš„ï¼Œæ‰€ä»¥å°±éœ€è¦ä»å°¾éƒ¨å¼€å§‹æ‰¾ã€‚\n\nsubstræ˜¯ä»æŒ‡å®šposä½ç½®å¼€å§‹è·å–é•¿åº¦ä¸ºlençš„å­ä¸²\n\n\n\n2.10 å¾ˆå¤šæ“ä½œç¬¦é‡è½½stringé‡Œé¢æœ‰éå¸¸å¤šçš„æ“ä½œç¬¦é‡è½½ï¼Œæ”¯æŒå’Œå­—ç¬¦ä¸²ã€å­—ç¬¦ã€å¯¹è±¡è¿›è¡Œå¤§å°å¯¹æ¯”ã€‚è™½ç„¶çœ‹çš„æœ‰ç‚¹éº»äº†ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åªæ˜¯æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ã€‚åº•å±‚å®ç°äº†è§£ä¸€ä¸‹å°±å¯ä»¥äº†ï¼ˆæˆ‘è¿™æ˜¯ä¸æ˜¯åºŸè¯â€¦ï¼‰\n \nå…¶å®ä¸€éƒ¨åˆ†å†…å®¹éƒ½æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘å™¨çš„éšå¼ç±»å‹è½¬åŒ–æˆ–è€…ä¸´æ—¶æ„é€ ä¸€ä¸ªstringç±»æ¥å®ç°çš„ï¼Œä½†æ˜¯è®¾è®¡stringçš„å¤§ä½¬ä»¬æ˜¾ç„¶è§‰å¾—å¤šå³æ˜¯å¥½ï¼Œå“ˆå“ˆã€‚\n3.æ¨¡æ‹Ÿå®ç°è¦æƒ³åˆ‡åˆ‡å®å®å¼„æ˜ç™½STLçš„æºç ç»“æ„ï¼Œå…¶ä¸­ä¸€ä¸ªæœ€å¥½çš„åŠæ³•å°±æ˜¯å°è¯•æ¨¡æ‹Ÿå®ç°ä¸€ä¸ªå’Œstdåº“é‡Œé¢stringä½¿ç”¨æ–¹æ³•&#x2F;åŠŸèƒ½ç›¸åŒçš„è½®å­ã€‚\n\næˆ‘çš„stringæ¨¡æ‹Ÿå®ç°æºç å·²ç»æ‰˜ç®¡åˆ°giteeäº†ã€é“¾æ¥ã€‘\n\nå…¶å®stringå’Œvectorå°±æ˜¯ä¸€ä¸ªç®€å•çš„é¡ºåºè¡¨ï¼Œå…¶äºŒè€…çš„åº•å±‚å·®è·ä¸»è¦åœ¨stringåªèƒ½ä¿å­˜å­—ç¬¦ï¼ˆä¸²ï¼‰ï¼Œå½“ç„¶ï¼Œå†…éƒ¨çš„æ¥å£æœ‰ä¸€äº›ç»†å¾®çš„å·®è·ï¼Œè¿™ä¼šåœ¨vectorçš„åšå®¢é‡Œé¢è¿›è¡Œè®²è§£ã€‚\nå¤§éƒ¨åˆ†å‡½æ•°å¯ä»¥ç›´æ¥åœ¨giteeä¸Šé¢æŸ¥çœ‹ï¼Œæˆ‘å†™äº†è¿˜ç®—é è°±çš„æ³¨é‡Šï¼Œæœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨giteeæˆ–è€…æœ¬åšå®¢ä¸‹ç•™è¨€ã€‚\n\n3.1 åˆ©ç”¨æŒ‡é’ˆæ¨¡æ‹Ÿå®ç°è¿­ä»£å™¨ä»stringå¼€å§‹ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦äº†stlä¸­çš„è¿­ä»£å™¨è¿™ä¸€æ–°é²œç©æ„ã€‚\n//åå‘è¿­ä»£å™¨string::reverse_iterator rit = s1.rbegin();//æŒ‡å‘ç»“å°¾å­—ç¬¦ï¼ˆ&#x27;\\0&#x27;ä¹‹å‰ï¼‰//endæŒ‡å‘å¼€å¤´æ•°æ®çš„å‰ä¸€ä¸ªä½ç½®while (rit != s1.rend())&#123;\tcout &lt;&lt; *rit &lt;&lt; &quot; &quot;;\trit++;//ä½¿ç”¨æ–¹æ³•ç±»ä¼¼æŒ‡é’ˆ&#125;cout &lt;&lt; endl;\n\nçœ‹èµ·æ¥å¾ˆç‰›ï¼Œå®é™…ä¸Šå®ƒçš„æ“ä½œå’Œæˆ‘ä»¬è‡ªå·±å†™çš„æŒ‡é’ˆå¤§å·®ä¸å·®ã€‚æˆ‘ä»¬å¤§å¯ä»¥ç›´æ¥ä½¿ç”¨æŒ‡é’ˆæ¥æ¨¡æ‹Ÿå®ç°å‡ºä¸€ä¸ªç›¸åŒåŠŸèƒ½çš„è¿­ä»£å™¨ï¼\n//è¿­ä»£å™¨ç›¸å…³const_iterator begin() const&#123;    return _a;&#125;const_iterator end() const&#123;    return _a + _size;&#125;iterator begin()&#123;    return _a;&#125;iterator end()&#123;    return _a + _size;&#125;//ä»¥ä¸‹æ˜¯stringæ¨¡æ‹Ÿå®ç°ä¸­ç§æœ‰æˆå‘˜å˜é‡private:    char* _a;//å®é™…å­˜æ”¾æ•°æ®    size_t _size;//æœ‰æ•ˆé•¿åº¦    size_t _capa;//å®¹é‡å¤§å°    const static size_t npos;//å£°æ˜\n\nçœ‹å§ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ğŸŒƒè¿™ä¸ªè¿­ä»£å™¨çš„ä½¿ç”¨æ–¹æ³•å’Œé¡ºåºè¡¨ä¸­çš„æŒ‡é’ˆä¸€æ¨¡ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸æ¼”å¼å•¦ï¼æ„Ÿå…´è¶£çš„ä¼™ä¼´å¯ä»¥æŠŠæºç è€ƒä¸‹æ¥è‡ªå·±è¯•è¯•ã€‚\n\n3.2 æ·±æ‹·è´åœ¨ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢ä¸­ï¼Œæˆ‘å·²ç»ç®€å•å®ç°è¿‡ä¸€æ¬¡æ·±æ‹·è´ï¼ˆé“¾æ¥ï¼‰\nå¯¹äºstringæ¥è¯´ï¼Œæ·±æ‹·è´çš„æ“ä½œå’Œåšå®¢é‡Œé¢æ¼”ç¤ºçš„æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡ç»™äºˆæ–°çš„ç©ºé—´ï¼Œç„¶åç”¨strcpyæˆ–è€…memsetæ‹·è´å†…å®¹è¿‡å»ã€‚\n//æ‹·è´æ„é€ string(const string&amp; s)    :_size(s._size),\t_capa(s._capa)&#123;    _a = new char[_capa+1];    strcpy(_a, s._a);&#125;\n\né™¤äº†æ‹·è´æ„é€ ä»¥å¤–ï¼Œèµ‹å€¼é‡è½½åŒæ ·éœ€è¦æ·±æ‹·è´æ“ä½œï¼Œä½†æ˜¯å®ƒçš„æ“ä½œå’Œæ„é€ å‡½æ•°åˆæœ‰äº›ä¸åŒ\n\næ‹·è´æ„é€ æ—¶ï¼Œè¯¥å¯¹è±¡è¿˜ä¸å­˜åœ¨ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ„é€ å‡ºå†…å®¹\nèµ‹å€¼é‡è½½æ—¶ï¼Œè¯¥å¯¹è±¡å¯èƒ½å·²ç»æœ‰è‡ªå·±çš„æ•°æ®ï¼Œéœ€è¦å…ˆé‡Šæ”¾å·²æœ‰çš„æ‰èƒ½è·å–æ–°çš„\n\nè¿™å°±éœ€è¦æˆ‘ä»¬åœ¨èµ‹å€¼é‡è½½çš„æ—¶å€™ï¼Œå…ˆdeleteæ‰åŸæœ¬çš„å†…å®¹ï¼Œå†å»è¿›è¡Œèµ‹å€¼\n//æ·±æ‹·è´èµ‹å€¼é‡è½½string&amp; operator=(const string&amp; s) &#123;    //å’Œæ‹·è´æ„é€ ä¸åŒçš„æ˜¯ï¼Œèµ‹å€¼é‡è½½ä¹‹å‰ï¼Œthiså¯èƒ½å·²ç»æœ‰è‡ªå·±çš„å†…å®¹äº†    //æ‰€ä»¥åœ¨æ‰§è¡Œæ“ä½œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æŠŠthisè‡ªå·±çš„å†…å®¹å…ˆé‡Šæ”¾æ‰    if (this != &amp;s)//ä¸è¦è‡ªå·±æ‹·è´è‡ªå·±     &#123;        delete[] _a;//åˆ é™¤å·²æœ‰ç©ºé—´        _size = s._size;        _capa = s._capa;        //_a = new char[_capa + 1];//æœ‰ä¸€å®šé£é™©        char* tmp = new char[_capa + 1];        strcpy(tmp, s._a);        _a = tmp;    &#125;&#125;\n\nè¿™æ ·æˆ‘ä»¬çš„èµ‹å€¼é‡è½½ä¾¿ä¹Ÿå®ç°å®Œæ¯•äº†\n3.3 å…³äºinsertå‡½æ•°æ“ä½œå­—ç¬¦å’Œå­—ç¬¦ä¸²çš„åŒºé—´é—®é¢˜å½“æˆ‘ä»¬ä½¿ç”¨insertæ¥å¤„ç†å­—ç¬¦çš„æ—¶å€™ï¼Œéœ€è¦å°†æ’å…¥ä½ç½®ä¹‹åçš„æ•°æ®å¾€åæŒªåŠ¨ã€‚\nè€Œinsertå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåˆ™éœ€è¦æŒªåŠ¨è¯¥å­—ç¬¦ä¸²é•¿åº¦çš„æ•°æ®ã€‚\nè¿™æ—¶å€™å°±éå¸¸å®¹æ˜“å‡ºç°æŒªåŠ¨ä¸å®Œæ•´&#x2F;è¶Šç•Œç­‰ç­‰é—®é¢˜ï¼\nå…³äºinsertä»£ç å¯ä»¥çœ‹giteeä»£ç çš„190-237è¡Œï¼Œå¦‚æœä½ ä¸å¤ªèƒ½ç†è§£è¿™é‡Œçš„ç§»åŠ¨é—®é¢˜ï¼Œæœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯ç”»å›¾ï¼ç”»å›¾ä¼šè®©ä½ æ¸…æ¥šçš„è®¤è¯†åˆ°éœ€è¦ç§»åŠ¨å¤šé•¿ï¼ŒæŒ‡é’ˆåº”è¯¥æŒ‡å‘å“ªé‡Œè¿›è¡Œç§»åŠ¨ã€‚ç†æ¸…æ€è·¯åï¼Œå†™ä»£ç å°±ä¼šå®¹æ˜“å¾ˆå¤šã€‚\n3.4 å…³äºpush_backçš„è¾¹ç•Œæ§åˆ¶é—®é¢˜ä¹‹å‰æˆ‘å®ç°çš„ä»£ç ä¸­ï¼Œå°¾æ’çš„æ—¶å€™æ²¡æœ‰åŠ ä¸Š\\0è¿›è¡Œè¾¹ç•Œæ§åˆ¶\nè¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œå› ä¸ºæ¨¡æ‹Ÿå®ç°çš„åº•å±‚ç”¨çš„å°±æ˜¯Cè¯­è¨€çš„å­—ç¬¦ä¸²ã€‚åœ¨æ¯ä¸€æ¬¡å°¾æ’ä¹‹åï¼Œéƒ½éœ€è¦ç”¨\\0æ¥æ ‡è®°å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚å¦åœ¨æˆ‘ä»¬æ‹·è´æ„é€ å’Œreserveçš„æ—¶å€™ä½¿ç”¨strcpyå°±ä¼šå‡ºç°è¶Šç•Œé”™è¯¯ã€‚\n\nè¶Šç•Œé”™è¯¯ä¸€èˆ¬éƒ½æ˜¯åœ¨ææ„deleteçš„æ—¶å€™æ£€æŸ¥å‡ºæ¥çš„\n\nvoidÂ push_back(charÂ ch)&#123;\tifÂ (_sizeÂ +Â 1Â &gt;=Â _capa)\t&#123;\t\treserve(_capaÂ ==Â 0Â ?Â 4Â :Â _capaÂ *Â 2);\t\t//è¿™é‡Œçš„åˆ¤æ–­æ˜¯ä¸ºäº†è¾¨åˆ«æ˜¯å¦åœ¨ç©ºå¯¹è±¡å°¾æ’\t&#125; \t_a[_size]Â =Â ch;\t_size++;\t//å› ä¸ºreserveå’ŒåŸºç¡€çš„æ‹·è´æ„é€ ç”¨çš„éƒ½æ˜¯strcpy\t//æ‰€ä»¥å¿…é¡»è¦æœ‰\\0æ¥æ ‡è¯†ç»“å°¾ï¼\t_a[_size]Â =Â &#x27;\\0&#x27;;&#125;\n\n\nç»“è¯­å…³äºstringç±»çš„ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¦‚æœæœ‰ä»€ä¹ˆæ–°å¢å†…å®¹çš„è¯ï¼Œæˆ‘ä¼šå¯¹æœ¬ç¯‡åšå®¢è¿›è¡Œä¿®æ”¹\n\nå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€Cè¯­è¨€ã€‘ä¸‰é“ä¾‹é¢˜è®©ä½ å½»åº•å­¦ä¼šæ ˆå’Œé˜Ÿåˆ—","url":"/posts/909011629/","content":"[TOC]\nå‰è¨€æœ¬ç¯‡åšå®¢ï¼Œå°†å¸¦ç€å¤§å®¶åˆ·3é“éå¸¸ç»å…¸çš„OJé¢˜ã€‚å®ƒä»¬å¹¶ä¸ç®—ç‰¹åˆ«éš¾ï¼Œä½†å¯¹æˆ‘ä»¬ç†è§£æ•°æ®ç»“æ„ä¸­æ ˆå’Œé˜Ÿåˆ—çš„æ¦‚å¿µæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚\n\nå¦‚æœä½ è¿˜ä¸äº†è§£æ ˆï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ğŸ‘‰ç‚¹æˆ‘\né˜Ÿåˆ—çš„åšå®¢å°±ä¸å†™å•¦ï¼Œæœ¬ç¯‡åˆ·é¢˜çš„æ—¶å€™ä¼šæåˆ°é˜Ÿåˆ—çš„æ“ä½œ\n\nè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹å§ï¼\n\n1.ç”¨é˜Ÿåˆ—å®ç°æ ˆ\nleetcodeï¼š225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ\n\n\nè¿™é“é¢˜çš„è¦æ±‚å¾ˆç®€å•ï¼Œç”¨ä¸¤ä¸ªé˜Ÿåˆ—æ¥æ¨¡æ‹Ÿæ ˆçš„å®ç°ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œé˜Ÿåˆ—çš„æ“ä½œæ˜¯ä»åè¿›ï¼Œä»å‰å‡ºï¼Œè¿™å°±å’Œæˆ‘ä»¬åœ¨é¤å…æ’é˜Ÿä¸€æ ·ï¼Œå…ˆè¿›å…¥é¤å…æ’é˜Ÿçš„äººå…ˆå¾—åˆ°åº§ä½ã€‚\nè€Œæ ˆæ˜¯éµå¾ªä¸Šè¿›ä¸Šå‡ºçš„ï¼Œå³æ ˆåªèƒ½åœ¨æ ˆé¡¶æ’å…¥å…ƒç´ å’Œåˆ é™¤å…ƒç´ \nä¸¤ä¸ªé˜Ÿåˆ—è¦å¦‚ä½•ç»“åˆï¼Œæ‰èƒ½å®ç°æ ˆçš„è¦æ±‚å‘¢ï¼Ÿ\n1.1æ€è·¯é¦–å…ˆæˆ‘ä»¬è®²æ•°æ®pushåˆ°å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—ä¸­\n\nå¦‚æœè¦è®¿é—®æ­¤æ—¶çš„æ ˆé¡¶ï¼Œä½¿ç”¨é˜Ÿåˆ—ä¸­çš„tailå°¾æŒ‡é’ˆæ¥è®¿é—®ï¼Œå³é¢˜ç›®è¦æ±‚çš„TOPå‡½æ•°\nå½“æˆ‘ä»¬éœ€è¦popæ•°æ®çš„æ—¶å€™ï¼Œå°†é˜Ÿåˆ—ä¸­çš„N-1ä¸ªæ•°æ®å…¨éƒ¨ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œå†å°†æœ€åçš„æ ˆé¡¶æ•°æ®åˆ é™¤å¹¶è¿”å›\n\næœ€ç»ˆçš„ç›®çš„å°±æ˜¯ä¿è¯ä¸€ä¸ªé˜Ÿåˆ—ä¸ºç©ºï¼Œå¦å¤–ä¸€ä¸ªé˜Ÿåˆ—ä¿å­˜æ•°æ®\n\n\nè¿™æ ·å°±è¾¾æˆäº†æ ˆåªèƒ½åœ¨æ ˆé¡¶åˆ é™¤æ•°æ®çš„è¦æ±‚\næœ€åè¿˜æœ‰ä¸€ä¸ªå‡½æ•°æ˜¯boolean empty() å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\n\nå½“ä¸¤ä¸ªé˜Ÿåˆ—ä¸­éƒ½æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œè¿™ä¸ªæ¨¡æ‹Ÿçš„æ ˆå°±æ˜¯ç©ºçš„ï¼›\nåªè¦å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå°±ä»£è¡¨è¿™ä¸ªæ ˆæ˜¯æœ‰æ•°æ®çš„ã€‚\n\n1.2é˜Ÿåˆ—çš„ä»£ç ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œè¿™é“é¢˜ä¸­å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬åˆå§‹çš„é˜Ÿåˆ—ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦â€œé€ è½®å­â€ï¼Œå°†è‡ªå·±å†™çš„Cè¯­è¨€é˜Ÿåˆ—ä»£ç æ”¾åœ¨å‰å¤´\n\nè¿™ä¹Ÿæ˜¯Cè¯­è¨€åœ¨å†™ä¸€äº›OJé¢˜ç›®æ—¶ä¸æ–¹ä¾¿çš„åŸå› \n\n\nè¿™é‡Œæˆ‘è´´å‡ºä¸€ä¸ªé˜Ÿåˆ—çš„ä»£ç ï¼Œå¤§å®¶å¯ä»¥å¤åˆ¶åˆ°è‡ªå·±çš„ç¼–è¯‘å™¨ä¸Šæµ‹è¯•ä¸€ä¸‹ã€‚\nå¦‚æœæœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n\nå’Œæ ˆçš„ä»£ç å®ç°ä¸åŒï¼Œé˜Ÿåˆ—ä½¿ç”¨é“¾è¡¨çš„æ–¹å¼æ›´åŠ æ–¹ä¾¿ã€‚å…¶ç›¸å½“äºä¸€ä¸ªåªèƒ½å°¾æ’å’Œå¤´åˆ çš„å•é“¾è¡¨\nä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ‰¾å°¾è¿›è¡Œå°¾æ’ï¼Œè¿™é‡Œå®šä¹‰äº†å¦å¤–ä¸€ä¸ªç»“æ„ä½“ç±»å‹Queueï¼Œå…¶ä¸­tailæŒ‡é’ˆæŒ‡å‘é“¾è¡¨çš„å°¾éƒ¨ï¼Œæ–¹ä¾¿å°¾æ’ï¼ˆå¦åˆ™æ¯æ¬¡å°¾æ’éƒ½éœ€è¦éå†ï¼‰\n\ntypedef int QDataType;typedef struct QueueNode{\tQDataType data;\tstruct QueueNode* next;}QNode;typedef struct Queue{//è¿™ä¸ªç»“æ„ä½“é‡Œæœ‰ä¸¤ä¸ªæŒ‡é’ˆ\tQNode* head;//å¤´\tQNode* tail;//å°¾}Queue;//åˆå§‹åŒ–void QueueInit(Queue* pq){\tassert(pq);\tpq-&gt;head = NULL;\tpq-&gt;tail = NULL;}//æ‘§æ¯void QueueDestory(Queue* pq){\tassert(pq);\tQNode* findtail = pq-&gt;head;//æ‰¾å°¾æŒ¨ä¸ªæŒ¨ä¸ªfree\twhile (findtail)\t{\t\tQNode* next = findtail-&gt;next;\t\tfree(findtail);\t\tfindtail = next;\t}\tpq-&gt;head = NULL;\tpq-&gt;tail = NULL;}//æ’å…¥ï¼ˆå°¾æ’ï¼‰void QueuePush(Queue* pq, QDataType x){\tassert(pq);\tQNode* newnode = (QNode*)malloc(sizeof(QNode));\tif (newnode == NULL)\t{\t\tprintf(\"Push err\\n\");\t\texit(-1);\t}\tnewnode-&gt;data = x;\tnewnode-&gt;next = NULL;\tif (pq-&gt;tail == NULL)\t{\t\tassert(pq-&gt;head == NULL);\t\tpq-&gt;head = pq-&gt;tail = newnode;\t}\telse\t{\t\tpq-&gt;tail-&gt;next = newnode;\t\tpq-&gt;tail = newnode;\t}\treturn;}//åˆ é™¤ï¼ˆå¤´åˆ ï¼‰void QueuePop(Queue* pq){\tassert(pq);\tassert(pq-&gt;head &amp;&amp; pq-&gt;tail);//åˆ¤æ–­æ˜¯å¦ä¸ºç©º\tif (pq-&gt;head-&gt;next == NULL)\t{\t\tfree(pq-&gt;head);\t\tpq-&gt;head = NULL;\t\tpq-&gt;tail = NULL;\t}\telse\t{\t\tQNode* next = pq-&gt;head-&gt;next;\t\tfree(pq-&gt;head);\t\tpq-&gt;head = next;\t}}//åˆ¤æ–­æ˜¯å¦ä¸ºç©ºbool QueueEmpty(Queue* pq){\tassert(pq);\t//åœ¨Cä¸­boolç±»å‹å’Œintç±»å‹å¯ä»¥ç›´æ¥æ··ç”¨\treturn pq-&gt;head == NULL &amp;&amp; pq-&gt;tail == NULL;}//è¿”å›å®ƒçš„é•¿åº¦size_t QueueSize(Queue* pq){\tassert(pq);\tsize_t size = 0;\tQNode* findtail = pq-&gt;head;\twhile (findtail)\t{\t\tsize++;\t\tfindtail = findtail-&gt;next;\t}\treturn size;}//è¿”å›å¤´QDataType QueueFront(Queue* pq){\tassert(pq);\tassert(pq-&gt;head);\treturn pq-&gt;head-&gt;data;}//è¿”å›å°¾éƒ¨QDataType QueueBack(Queue* pq){\tassert(pq);\tassert(pq-&gt;tail);\treturn pq-&gt;tail-&gt;data;}\n\n1.3æœ¬é¢˜çš„ä»£ç å°†ä¸Šè¿°çš„é˜Ÿåˆ—ä»£ç æ‹·è´åœ¨é¢˜ç›®æ‰€ç»™æ¨¡æ¿ä¹‹å‰åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å†™è¿™é“é¢˜éœ€è¦çš„ä»£ç å®ç°äº†\n//åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—typedef struct {\tQueue q1;\tQueue q2;} MyStack;MyStack* myStackCreate() {\tMyStack* pst = (MyStack*)malloc(sizeof(MyStack));    //å› ä¸ºæ˜¯åœ¨å‡½æ•°ä¸­ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åŠ¨æ€å†…å­˜ç®¡ç†\tif (pst == NULL)//mallocå¯èƒ½å¤±è´¥\t\treturn NULL;\tQueueInit(&amp;pst-&gt;q1);//ç›´æ¥è°ƒç”¨é˜Ÿåˆ—çš„å‡½æ•°è¿›è¡Œåˆå§‹åŒ–\tQueueInit(&amp;pst-&gt;q2);\treturn pst;}void myStackPush(MyStack* obj, int x) {\tassert(obj);\t//åœ¨pushçš„æ—¶å€™ï¼Œéœ€è¦æ‰¾åˆ°ä¸ä¸ºç©ºçš„é˜Ÿåˆ—è¿›è¡Œpush\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\tQueuePush(&amp;obj-&gt;q1, x);\t}\telse\t{\t\tQueuePush(&amp;obj-&gt;q2, x);\t}}int myStackPop(MyStack* obj) {\tassert(obj);\t//é€šè¿‡åˆ¤æ–­æ‰¾åˆ°ä¸ºç©ºå’Œä¸ä¸ºç©ºçš„é˜Ÿåˆ—\tQueue* empty = &amp;obj-&gt;q1;\tQueue* unempty = &amp;obj-&gt;q2;\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\tempty = &amp;obj-&gt;q2;\t\tunempty = &amp;obj-&gt;q1;\t}\twhile (QueueSize(unempty) &gt; 1)\t{\t\tint top1 = QueueFront(unempty);\t\tQueuePush(empty, top1);\t\tQueuePop(unempty);\t}\t//å…ˆä¿å­˜topï¼Œå†è¿›è¡Œå‡ºé˜Ÿåˆ—æ“ä½œ\tint top = QueueFront(unempty);\tQueuePop(unempty);\treturn top;//è¿”å›æŠ¥é”™çš„top}int myStackTop(MyStack* obj) {\tassert(obj);\tif (!QueueEmpty(&amp;obj-&gt;q1))\t{\t\treturn QueueBack(&amp;obj-&gt;q1);\t}\telse\t{\t\treturn QueueBack(&amp;obj-&gt;q2);\t}}bool myStackEmpty(MyStack* obj) {\tassert(obj);\t//åªæœ‰ä¸¤ä¸ªé˜Ÿåˆ—éƒ½ä¸ºç©ºçš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿçš„æ ˆæ‰æ˜¯ç©º\treturn QueueEmpty(&amp;obj-&gt;q1) &amp;&amp; QueueEmpty(&amp;obj-&gt;q2);}void myStackFree(MyStack* obj) {\tassert(obj);\tQueueDestory(&amp;obj-&gt;q1);\tQueueDestory(&amp;obj-&gt;q2);\tfree(obj);//å› ä¸ºæ˜¯åŠ¨æ€å†…å­˜å¼€è¾Ÿçš„ï¼Œæ‰€ä»¥æœ€åé”€æ¯çš„æ—¶å€™è¿˜éœ€è¦é”€æ¯æ¨¡æ‹Ÿæ ˆçš„ç»“æ„ä½“\treturn;}\n\n16ä¸ªç”¨ä¾‹éƒ½å®Œç¾é€šè¿‡äº†ï¼\n\n1.4ä¼˜åŒ–è®¾è®¡ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—å°±èƒ½å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚\n\næ•°æ®å…¥é˜Ÿåˆ—ï¼›\néœ€è¦top/popçš„æ—¶å€™ï¼Œå°†é˜Ÿåˆ—å‰çš„æ•°æ®å…¨éƒ¨é‡æ–°ç§»åŠ¨åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œç•™ä¸‹æœ€åä¸€ä¸ªï¼Œå°±æ˜¯æ ˆé¡¶æ•°æ®ï¼›\ntopå‡½æ•°è°ƒç”¨å®Œæ¯•åéœ€è¦å°†å‰©ä¸‹çš„è¿™ä¸ªæ•°æ®ä¹Ÿç§»åŠ¨åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼›\npopå‡½æ•°è°ƒç”¨å®Œæ¯•åå°†size--;\n\nä»£ç å¦‚ä¸‹\nclass MyStack {    int size = 0;    queue&lt;int&gt; que;public:    MyStack() {    }        void push(int x) {        que.push(x);        size++;    }        int pop() {        // æŠŠå‰é¢çš„æ•°æ®å…¨éƒ¨ç§»åŠ¨åˆ°åé¢å»        int count = size;        while(count--&gt;1){            int temp = que.front();            que.pop();            que.push(temp);        }        // å‰©ä¸‹çš„æ˜¯éœ€è¦åˆ é™¤çš„        int ret = que.front();        que.pop();        size--;        return ret;    }        int top() {        // è¿™é‡Œä¸èƒ½å¤ç”¨å‡½æ•°äº†ï¼Œå› ä¸ºä½ç½®ç§»åŠ¨åå¿…é¡»è¦åˆ é™¤æ‰æ˜¯å¯¹çš„ï¼Œå¦åˆ™ä¼šä¹±        // æŠŠå‰é¢çš„æ•°æ®å…¨éƒ¨ç§»åŠ¨åˆ°åé¢å»        int count = size;        while(count--&gt;1){            int temp = que.front();            que.pop();            que.push(temp);        }        // å‰©ä¸‹çš„æ˜¯topå‡½æ•°        int ret = que.front();        que.push(ret);        que.pop(); // éœ€è¦æŠŠè¿™ä¸ªæ•°å­—ä¹Ÿç§»åŠ¨åˆ°åé¢å»        return ret;    }        bool empty() {        return size == 0;    }};/** * Your MyStack object will be instantiated and called as such: * MyStack* obj = new MyStack(); * obj-&gt;push(x); * int param_2 = obj-&gt;pop(); * int param_3 = obj-&gt;top(); * bool param_4 = obj-&gt;empty(); */\n\n2.ç”¨æ ˆå®ç°é˜Ÿåˆ—\nleetcode: 232. ç”¨æ ˆå®ç°é˜Ÿåˆ—\n\n\næœ‰äº†ä¸Šä¸€é“é¢˜ç›®çš„ç»éªŒï¼Œè¿™é“é¢˜çš„å®ç°å°±ä¸é‚£ä¹ˆå›°éš¾äº†ã€‚\n2.1æ€è·¯\næ ˆçš„ç‰¹ç‚¹æ˜¯åªèƒ½åœ¨æ ˆé¡¶åˆ é™¤å’Œæ’å…¥æ•°æ®\n\né˜Ÿåˆ—éœ€è¦åœ¨é˜Ÿå°¾æ’å…¥æ•°æ®ï¼Œåœ¨å¯¹å¤´åˆ é™¤æ•°æ®\n\n\nå‡è®¾ç°åœ¨æˆ‘ä»¬æœ‰ä¸‹é¢è¿™ä¸¤ä¸ªæ ˆï¼Œç¬¬ä¸€ä¸ªæ ˆé‡Œé¢å­˜æ”¾äº†1 2 3 4çš„æ•°æ®\néœ€è¦è¿›è¡Œé˜Ÿåˆ—çš„POPæ“ä½œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ é™¤çš„æ˜¯æœ€åº•éƒ¨çš„1\n\nå¯ä»¥å…ˆå°†æ ˆä¸­çš„æ‰€æœ‰æ•°æ®popå¹¶pushåˆ°å¦å¤–ä¸€ä¸ªç©ºæ ˆä¸­ï¼Œå†å°†æœ€åä¸€ä¸ªæ•°æ®å­˜æ”¾ååˆ é™¤ï¼Œè¿”å›å­˜æ”¾çš„å€¼ã€‚\n\nè¿™éƒ¨åˆ†æ“ä½œä¸ç¬¬ä¸€é¢˜ä¸­çš„æ“ä½œå¾ˆåƒï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šåœ¨æ–°çš„æ ˆé‡Œçš„æ•°æ®å’Œæˆ‘ä»¬åŸæœ¬æƒ³è¦çš„æ•°æ®æ˜¯ç›¸åçš„ï¼\n1 2 3 4 åˆ é™¤1ååŸæœ¬æ•°æ® 2 3 4å®é™…æ•°æ® 4 3 2\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯æŠŠè¿™ä¸€æ‰¹æ•°æ®å†å¤åˆ¶å›åŸæœ¬çš„æ ˆä¸­ï¼Œå®ƒçš„é¡ºåºå°±å¯¹äº†\n\nè€Œæˆ‘è‡ªå·±å†™çš„æ ˆæ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œé¢˜ç›®è¦æ±‚çš„peekå‡½æ•°å¯ä»¥ç›´æ¥é€šè¿‡è®¿é—®éç©ºæ ˆçš„0ä¸‹æ ‡å…ƒç´ å¾—åˆ°\nemptyå‡½æ•°åŒç†ï¼Œåªæœ‰ä¸¤ä¸ªæ ˆä¸­éƒ½ä¸ºç©ºæ—¶ï¼Œæ¨¡æ‹Ÿçš„é˜Ÿåˆ—æ‰æ˜¯ç©ºçš„\n\n2.2æ ˆçš„ä»£ç æ ˆçš„å®ç°åœ¨æœ¬æ–‡å¼€å¤´çš„åšå®¢é“¾æ¥ä¸­æœ‰è¯¦ç»†è§£é‡Šï¼Œè¿™é‡Œä¸å†å¤è¿°\n\nå›åˆ°å¼€å¤´\n\n// æ”¯æŒåŠ¨æ€å¢é•¿çš„æ ˆtypedef int STDataType;typedef struct Stack{    STDataType* a;    int top; // æ ˆé¡¶    int capacity; // å®¹é‡}Stack;// åˆå§‹åŒ–void StackInit(Stack* ps){    STDataType* new = (STDataType*)malloc(sizeof(STDataType) * 4);    if (new == NULL)    {        exit(-1);    }    else    {        ps-&gt;a = new;        ps-&gt;top = 0;        ps-&gt;capacity = 4;    }}// é”€æ¯æ ˆvoid StackDestroy(Stack* ps){    assert(ps);    free(ps-&gt;a);    ps-&gt;a = NULL;    ps-&gt;capacity = 0;    ps-&gt;top = 0;}// å…¥æ ˆvoid StackPush(Stack* ps, STDataType data){    assert(ps);    if (ps-&gt;top == ps-&gt;capacity)    {        STDataType* new = (STDataType*)realloc(ps-&gt;a, sizeof(STDataType) * (ps-&gt;capacity) * 2);        if (new == NULL)        {            exit(-1);        }        else        {            ps-&gt;a = new;            ps-&gt;capacity *= 2;        }    }    ps-&gt;a[ps-&gt;top] = data;    ps-&gt;top++;}// å‡ºæ ˆvoid StackPop(Stack* ps){    assert(ps);    if (ps-&gt;top &gt; 0)        (ps-&gt;top)--;}// è·å–æ ˆé¡¶å…ƒç´ STDataType StackTop(Stack* ps){    assert(ps);    assert(ps-&gt;top &gt; 0);    return ps-&gt;a[ps-&gt;top - 1];}// è·å–æ ˆä¸­æœ‰æ•ˆå…ƒç´ ä¸ªæ•°int StackSize(Stack* ps){    assert(ps);    return ps-&gt;top;}// æ£€æµ‹æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºè¿”å›trueï¼Œå¦‚æœä¸ä¸ºç©ºè¿”å›falsebool StackEmpty(Stack* ps){    assert(ps);    if (ps-&gt;top == 0)        return true;    else        return false;}void StackPrint(Stack* ps){    assert(ps);    int n = ps-&gt;top;    for (int i = 0; i &lt; n; i++)    {        printf(\"%d \", ps-&gt;a[i]);    }    printf(\"\\n\");}\n\n2.3æœ¬é¢˜çš„ä»£ç typedef struct {    Stack st1;    Stack st2;} MyQueue;MyQueue* myQueueCreate() {    MyQueue* qt = (MyQueue*)malloc(sizeof(MyQueue));    if (qt == NULL)        return NULL;    StackInit(&amp;qt-&gt;st1);    StackInit(&amp;qt-&gt;st2);    return qt;}void myQueuePush(MyQueue* obj, int x) {    assert(obj);    if (!StackEmpty(&amp;obj-&gt;st1))    {        StackPush(&amp;obj-&gt;st1, x);    }    else    {        StackPush(&amp;obj-&gt;st2, x);    }    return;}int myQueuePop(MyQueue* obj) {    assert(obj);    Stack* empty = &amp;obj-&gt;st1;    Stack* nonempty = &amp;obj-&gt;st2;    if (!StackEmpty(&amp;obj-&gt;st1))    {        Stack* empty = &amp;obj-&gt;st2;        Stack* nonempty = &amp;obj-&gt;st1;    }    while (StackSize(nonempty) &gt; 1)    {        int top1 = StackTop(nonempty);        StackPush(empty, top1);        StackPop(nonempty);    }    int top = StackTop(nonempty);    StackPop(nonempty);//åŸæœ¬ä¸ä¸ºç©ºçš„çš„æœ€åä¸€ä¸ªtopè¢«å–å‡º    //éœ€è¦å°†æ•°æ®å†å€’æ”¾ä¸€éï¼Œå¦åˆ™è®¿é—®æ˜¯åçš„    while (StackSize(empty) &gt; 0)    {        int top2 = StackTop(empty);        StackPush(nonempty, top2);        StackPop(empty);    }    return top;}int myQueuePeek(MyQueue* obj) {    assert(obj);    Stack* empty = &amp;obj-&gt;st1;    Stack* nonempty = &amp;obj-&gt;st2;    if (!StackEmpty(&amp;obj-&gt;st1))    {        Stack* empty = &amp;obj-&gt;st2;        Stack* nonempty = &amp;obj-&gt;st1;    }    //è¿™é‡Œçš„æ ˆæ˜¯ç”¨æ•°ç»„å®ç°çš„ï¼Œå¯ä»¥ç›´æ¥è®¿é—®é¦–ä½å…ƒç´     return nonempty-&gt;a[0];}bool myQueueEmpty(MyQueue* obj) {    assert(obj);    return StackEmpty(&amp;obj-&gt;st1) &amp;&amp; StackEmpty(&amp;obj-&gt;st2);}void myQueueFree(MyQueue* obj) {    assert(obj);    StackDestroy(&amp;obj-&gt;st1);    StackDestroy(&amp;obj-&gt;st2);    free(obj);    return;}\n\n\n2.4ä¼˜åŒ–è®¾è®¡ä¸Šé¢çš„è¿™ä¸ªæ–¹æ³•åœ¨peekå’Œpopçš„æ—¶å€™éƒ½éœ€è¦æŠŠæ•°æ®æ¬ä¸¤æ¬¡ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼›\nä½†ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹å¼ï¼Œä¸€ä¸ªåšå…¥æ ˆï¼Œä¸€ä¸ªåšå‡ºæ ˆï¼Œå°±å¯ä»¥å‡å°‘æ•°æ®åœ¨ä¸¤ä¸ªæ ˆé—´æ‹·è´çš„æ¬¡æ•°ã€‚\n\né˜Ÿåˆ—æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¾€å…¥æ ˆæ’å…¥ï¼›\né˜Ÿåˆ—åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼Œå°†å…¥æ ˆçš„æ‰€æœ‰æ•°æ®å¼¹å‡ºå¹¶æ’å…¥å‡ºæ ˆï¼Œæ­¤æ—¶å‡ºæ ˆé¡¶éƒ¨å°±æ˜¯éœ€è¦åˆ é™¤çš„æ•°æ®ï¼›\næ–°æ•°æ®æ’å…¥ï¼Œç»§ç»­å¾€å…¥æ ˆæ’å…¥ï¼Œé‡å¤ä¸Šè¿°ä¸¤ä¸ªæ­¥éª¤ã€‚\n\nå‡ºé˜Ÿåˆ—çš„æ—¶å€™éœ€è¦éµå¾ªå…ˆå…¥å…ˆå‡ºçš„é¡ºåºï¼Œå¦‚æœå‡ºæ ˆä¸­æœ‰æ•°æ®ï¼Œé‚£ä¹ˆå°±ç›´æ¥å–å°±æ˜¯éœ€è¦å‡ºé˜Ÿåˆ—çš„æ•°æ®äº†ã€‚å‡ºæ ˆä¸­æ²¡æœ‰æ•°æ®ï¼Œæ‰éœ€è¦å°†å…¥æ ˆä¸­çš„æ‰€æœ‰æ•°æ®éƒ½æ”¾å…¥å‡ºæ ˆã€‚\nä»£ç å¦‚ä¸‹\nclass MyQueue {    stack&lt;int&gt; stIn,stOut;    int size = 0;public:    MyQueue() {    }        void push(int x) {        stIn.push(x);        size++;    }        int pop() {        int ret = peek(); // å¤ç”¨å‡½æ•°        stOut.pop();        size--;        return ret;    }        int peek() {        if(stOut.empty()){            // stOutä¸ºç©ºï¼Œå°†stInçš„å…¨éƒ½ç§»åŠ¨è¿‡å»            int count = size;            while(count--)            {                stOut.push(stIn.top());                stIn.pop();            }           }        // æ­¤æ—¶stOuté¡¶éƒ¨å°±æ˜¯éœ€è¦å‡ºé˜Ÿåˆ—çš„æ•°æ®        int ret = stOut.top();        return ret;    }        bool empty() {        return size == 0;    }};/** * Your MyQueue object will be instantiated and called as such: * MyQueue* obj = new MyQueue(); * obj-&gt;push(x); * int param_2 = obj-&gt;pop(); * int param_3 = obj-&gt;peek(); * bool param_4 = obj-&gt;empty(); */\n\n\n3.è®¾è®¡å¾ªç¯é˜Ÿåˆ—\nleetcodeï¼š622. è®¾è®¡å¾ªç¯é˜Ÿåˆ—\n\n\nè¿™é“é¢˜æœ€ä¸»è¦çš„çªç ´å£ï¼Œå°±æ˜¯å¼„æ˜ç™½é¢˜ç›®æ‰€è¯´çš„å¾ªç¯é˜Ÿåˆ—çš„æ„æ€\nå®é™…ä¸Šä»–å°±æ˜¯ä¸€ä¸ªä¸‹å›¾æ‰€ç¤ºçš„é˜Ÿåˆ—ï¼Œå½“tailä½¿ç”¨å®Œå·²æœ‰ç©ºé—´åï¼Œå¯ä»¥è·³åˆ°å‰é¢ç»§ç»­ä½¿ç”¨ä¹‹å‰å¼€è¾Ÿå¥½çš„ç©ºé—´ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„æ‰©å®¹ç©ºé—´ã€‚\n\nä¸ºäº†æ–¹ä¾¿æ‰¾å¤´ä»¥åŠæ‰¾å°¾ï¼Œæœ¬ä½“å°†ä½¿ç”¨æ•°ç»„æ–¹å¼æ¥å®ç°å®ƒçš„ä»£ç \n\n3.1æ€è·¯ç¡®å®šæ˜¯æ•°ç»„å½¢å¼åï¼Œæˆ‘ä»¬å°±è¦æ¥æ€è€ƒä¸¤ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—ä¸ºç©ºï¼Ÿä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—æ˜¯æ»¡ï¼Ÿ\n3.1.1åˆ¤æ–­æ˜¯å¦ä¸ºç©ºè¿™ä¸ªçœ‹èµ·æ¥å¥½åƒéå¸¸ç®€å•ï¼Œåªè¦å¤´æŒ‡é’ˆå’Œå°¾æŒ‡é’ˆç›¸åŒï¼Œé˜Ÿåˆ—ä¸å°±æ˜¯ç©ºçš„äº†å˜›ï¼\n\nè¿™ä¸ªæƒ³æ³•å¯¹ï¼Œä½†æœ‰æœ‰ç‚¹ç‘•ç–µï¼Œå³æˆ‘ä»¬æ€ä¹ˆç•Œå®šç©ºå’Œéç©ºçš„ç•Œé™ï¼Ÿ\n3.1.2åˆ¤æ–­æ˜¯å¦ä¸ºæ»¡æ¯æ’å…¥ä¸€ä¸ªæ•°æ®ï¼ŒtailæŒ‡é’ˆå°±ä¼šå¾€å++ä¸€æ¬¡ï¼ŒæŒ‡å‘å·²æœ‰æ•°æ®çš„ä¸‹ä¸€ä½\n\nå½“ä¸‹ä¸€ä½ä¹Ÿè¢«è£…å¥½äº†æ•°æ®ä¹‹åï¼Œtailå°±ä¼šå›åˆ°å¼€å¤´ï¼Œæ¥åˆ°frontæŒ‡é’ˆçš„ä½ç½®ï¼\n\nè¿™ä¸ªæ—¶å€™ï¼Œtail=frontï¼Œä½†æ˜¯é˜Ÿåˆ—å®é™…ä¸Šå·²ç»æ»¡äº†ï¼\nè¿™å°±è®©æˆ‘ä»¬ä¸å¾—ä¸æ€è€ƒï¼Œå¦‚ä½•å°†è¿™ä¸¤ç§æƒ…å†µåŒºåˆ†å¼€æ¥ï¼Ÿ\n\nå•Šå“ˆå“ˆå“ˆå“ˆï¼Œç­”æ¡ˆæ¥å–½ï¼š\n\nå¦‚æœéœ€è¦çš„æ•°æ®ä¸ºKä¸ªï¼Œä¸ºé˜Ÿåˆ—çš„æ•°ç»„å¼€è¾ŸK+1ä¸ªç©ºé—´\n\nè¿™æ—¶å€™ï¼Œåªè¦tail+1=frontï¼Œå°±ä»£è¡¨é˜Ÿåˆ—å·²ç»æ»¡äº†ã€‚å¤šå‡ºæ¥çš„è¿™ä¸€ä¸ªç©ºé—´ä¸å­˜æ”¾æ•°æ®\n\næ³¨æ„ï¼šè¿™ä¸ªç©ºé—´ä¸ä¸€å®šæ˜¯æœ€æœ«å°¾çš„å“ªä¸€ä¸ªï¼Œå®ƒä¼šéšç€é˜Ÿåˆ—çš„æ’å…¥ã€åˆ é™¤æ“ä½œè€Œç§»åŠ¨\nå½“tailåœ¨å°¾éƒ¨ï¼Œtail=kï¼ˆæ³¨æ„tailæ˜¯ä¸‹æ ‡è€Œä¸æ˜¯æŒ‡é’ˆï¼‰ä¸”front=0æ—¶ï¼Œé˜Ÿåˆ—ä¸ºæ»¡\n\n\nè¿™æ ·å°±å¾ˆå®Œç¾çš„æŠŠç©ºå’Œæ»¡ä¸¤ç§æƒ…å†µç»™åŒºåˆ†å¼€æ¥äº†ï¼\n\n3.2æœ¬é¢˜ä»£ç å®ç°éœ€è¦æ³¨æ„é¢˜ç›®ç»™å‡ºçš„è¿”å›å€¼è¦æ±‚ï¼Œä¾ç…§é¢˜ç›®å‡½æ•°è¦æ±‚æ¥ç¼–å†™\ntypedef struct {    int* data;    int front;    int tail;    int k;} MyCircularQueue;bool myCircularQueueIsEmpty(MyCircularQueue* obj);bool myCircularQueueIsFull(MyCircularQueue* obj);//ä¸ºäº†è®©è¿™ä¸ªå‡½æ•°èƒ½åœ¨å®ƒä¹‹å‰ä½¿ç”¨MyCircularQueue* myCircularQueueCreate(int k) {    MyCircularQueue* qt = (MyCircularQueue*)malloc(sizeof(MyCircularQueue));    if (qt == NULL)        return NULL;    qt-&gt;data = (int*)malloc(sizeof(int) * (k + 1));    qt-&gt;k = k;        qt-&gt;front = 0;    qt-&gt;tail = 0;    return qt;}bool myCircularQueueEnQueue(MyCircularQueue* obj, int value) {    assert(obj);    if (myCircularQueueIsFull(obj))        return false;    obj-&gt;data[obj-&gt;tail] = value;    //obj-&gt;tail++;    //obj-&gt;tail %= obj-&gt;k+1;//ä¿è¯æ•°æ®åœ¨æ•°ç»„å†…éƒ¨    if (obj-&gt;tail == obj-&gt;k)    {        obj-&gt;tail = 0;    }    else    {        obj-&gt;tail ++ ;    }        return true;}bool myCircularQueueDeQueue(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return false;    if (obj-&gt;front == obj-&gt;k)    {//frontåœ¨é¢„å…ˆå¼€è¾Ÿçš„ç¬¬4ä¸ªä½ç½®ä¸Š        obj-&gt;front = 0;    }    else    {        obj-&gt;front++;    }    return true;}int myCircularQueueFront(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return -1;    return obj-&gt;data[obj-&gt;front];}int myCircularQueueRear(MyCircularQueue* obj) {    assert(obj);    if (myCircularQueueIsEmpty(obj))        return -1;    if (obj-&gt;tail == 0)    {        return obj-&gt;data[obj-&gt;k];    }    else    {        return obj-&gt;data[obj-&gt;tail - 1];    }    return -1;}bool myCircularQueueIsEmpty(MyCircularQueue* obj) {    return obj-&gt;tail == obj-&gt;front;}bool myCircularQueueIsFull(MyCircularQueue* obj) {    if ((obj-&gt;tail == obj-&gt;k) &amp;&amp; obj-&gt;front == 0)    {        return true;    }    else    {        return obj-&gt;tail + 1 == obj-&gt;front;    }}void myCircularQueueFree(MyCircularQueue* obj) {    assert(obj);    free(obj-&gt;data);    free(obj);    return;}\n\n\nç»“è¯­åˆ·å®Œè¿™3é“é¢˜ï¼Œæœ‰æ²¡æœ‰æ„Ÿè§‰æ•°æ®ç»“æ„çš„å¾ˆå¤šå†…å®¹éƒ½æ˜¯å…³ç³»ç´§å¯†çš„ï¼ŸğŸ¤©\nåªè¦æˆ‘ä»¬æŠŠé“¾è¡¨å’Œé¡ºåºè¡¨çš„å†…å®¹æå¾—é€å½»ï¼Œæ ˆå’Œé˜Ÿåˆ—è¿™éƒ¨åˆ†å°±æ²¡é‚£ä¹ˆéš¾äº†ï¼\nåŠ æ²¹ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["Cè¯­è¨€","æ•°æ®ç»“æ„","OJåˆ·é¢˜","æ ˆ","é˜Ÿåˆ—","å¾ªç¯é˜Ÿåˆ—"]},{"title":"ã€C++ã€‘å‡è§†C++çš„ç¬¬ä¸€çœ¼","url":"/posts/1070210667/","content":"ä»ä»Šå¤©å¼€å§‹ï¼Œæ­£å¼æ­¥å…¥C++å­¦ä¹ çš„å¤§é—¨å•¦ï¼\n\n\nC++çš„åšå®¢ä¸»è¦æ˜¯æˆ‘ä¸ªäººå­¦ä¹ çš„å­¦ä¹ ç¬”è®°ï¼Œåˆšå¼€å§‹ä¼šè®°ä¸€äº›æ¯”è¾ƒé›¶ç¢çš„å°çŸ¥è¯†ç‚¹ï¼Œå¯èƒ½æ²¡æœ‰ä¹‹å‰Cè¯­è¨€çš„åšå®¢é‚£ä¹ˆç³»ç»ŸåŒ–ğŸ˜‚\nç¬”è®°ä¸­å¯èƒ½æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n[TOC]\n1.C++ç®€ä»‹\nä½ å¯ä»¥é€šè¿‡èœé¸Ÿæ•™ç¨‹ç½‘æ¥å­¦ä¹ C++ğŸ‘‰ä¼ é€é—¨\n\nC++ æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ã€ç¼–è¯‘å¼çš„ã€é€šç”¨çš„ã€å¤§å°å†™æ•æ„Ÿçš„ã€ä¸è§„åˆ™çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒè¿‡ç¨‹åŒ–ç¼–ç¨‹ã€é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œæ³›å‹ç¼–ç¨‹ã€‚\nC++ è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸­çº§è¯­è¨€ï¼Œå®ƒç»¼åˆäº†é«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€çš„ç‰¹ç‚¹ã€‚\nC++ æ˜¯ç”± Bjarne Stroustrup äº 1979 å¹´åœ¨æ–°æ³½è¥¿å·ç¾åˆ©å±±è´å°”å®éªŒå®¤å¼€å§‹è®¾è®¡å¼€å‘çš„ã€‚C++ è¿›ä¸€æ­¥æ‰©å……å’Œå®Œå–„äº† C è¯­è¨€ï¼Œæœ€åˆå‘½åä¸ºå¸¦ç±»çš„Cï¼Œåæ¥åœ¨ 1983 å¹´æ›´åä¸º C++ã€‚\nC++ æ˜¯ C çš„ä¸€ä¸ªè¶…é›†ï¼Œäº‹å®ä¸Šï¼Œä»»ä½•åˆæ³•çš„ C ç¨‹åºéƒ½æ˜¯åˆæ³•çš„ C++ ç¨‹åºã€‚\n\n2.C++å…³é”®å­—Cè¯­è¨€æœ‰32ä¸ªå…³é”®å­—ï¼ŒC++åœ¨å®ƒä»¬çš„åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å®¹ï¼Œå…±æœ‰63ä¸ªå…³é”®å­—\n\n\n\nasm\nelse\nnew\nthis\nauto\nenum\n\n\n\noperator\nthrow\nbool\nexplicit\nprivate\ntrue\n\n\nbreak\nexport\nprotected\ntry\ncase\nextern\n\n\npublic\ntypedef\ncatch\nfalse\nregister\ntypeid\n\n\nchar\nfloat\nreinterpret_cast\ntypename\nclass\nfor\n\n\nreturn\nunion\nconst\nfriend\nshort\nunsigned\n\n\nconst_cast\ngoto\nsigned\nusing\ncontinue\nif\n\n\ndefault\ninline\nsizeof\nvirtual\nstatic\nvoid\n\n\ndo\nlong\nstruct\nwchar_t\ndelete\nint\n\n\nstatic_cast\nvolatile\ndouble\nmutable\nswitch\nwhile\n\n\ndynamic_cast\nnamespace\ntemplate\n\n\n\n\n\n\nå¦‚æœä½ æƒ³æŸ¥çœ‹å®ƒä»¬çš„å®Œæ•´ä»‹ç»ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹ğŸ‘‰ä¼ é€é—¨\n\nè¿™é‡Œåªåšä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ï¼Œåç»­ä¼šä¸€ä¸€å­¦ä¹ è¿™äº›å…³é”®å­—\n\n3.å®‰è£…ä½ çš„C++ç¯å¢ƒ\nå¦‚æœæ˜¯windowsç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨å¾®è½¯çš„VisualStudioï¼Œä¸è¦ç”¨devè¿™ç§è€å¼ç¼–è¯‘å™¨ï¼\nå¦‚æœæ˜¯macç³»ç»Ÿï¼Œå¯ä»¥ä½¿ç”¨Xcodeï¼ˆæˆ‘æ²¡æœ‰macä¸çŸ¥é“å…·ä½“æƒ…å†µï¼‰\nå¦‚æœæ˜¯linuxç³»ç»Ÿï¼Œéœ€è¦å®‰è£…G++ç¼–è¯‘å™¨\n\nåˆ©ç”¨æˆ‘çš„æ ‘è“æ´¾ï¼Œç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹linuxç¯å¢ƒå®‰è£…G++ç¼–è¯‘å™¨\nä¸‹é¢è¿™ä¸ªè¯­å¥æ˜¯æ˜¾ç¤ºg++ç¼–è¯‘å™¨çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ å¼¹å‡ºäº†å’Œæˆ‘ä¸€æ ·çš„é¡µé¢ï¼Œè¯´æ˜ä½ çš„linuxç³»ç»Ÿé‡Œé¢å·²ç»æœ‰è¿™ä¸ªç¼–è¯‘å™¨äº†\ng++ -v\n\n\nå¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªè¯­å¥æ¥æ•´ä¸€ä¸ªg++\nsudo apt-get install g++\n\nä½ ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªè¯­å¥æ¥éªŒè¯ä½ çš„G++æ˜¯å¦å·²ç»å®‰è£…\n\nä¸‹è½½å®Œæˆåï¼Œå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨ä½ çš„G++ç¼–è¯‘å™¨äº†\n\nå¦‚æœä½ çš„ä¸‹è½½å¾ˆæ…¢ï¼Œå¯èƒ½è¦è€ƒè™‘æ¢æºï¼ˆå³æ›´æ¢ä¸€ä¸ªè½¯ä»¶ä¸‹è½½æºï¼‰\næ ‘è“æ´¾å®éªŒå®¤è¯¦ç»†è®°å½•äº†å›½å†…æ¯”è¾ƒå¥½ç”¨çš„æºï¼Œä¹Ÿæœ‰æ¢æºæ•™ç¨‹ğŸ‘‰ä¼ é€é—¨\n\n\n4.C++çš„è¾“å…¥è¾“å‡º4.1coutå’Œcinæ ·ä¾‹è€è§„çŸ©ï¼Œå‘è¿™ä¸ªä¸–ç•Œé—®ä¸ªå¥½å§ï¼\n#include &lt;iostream&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;Hello, world!&quot; &lt;&lt; endl;    return 0;&#125;\n\n\nè¿™é‡Œå‡ºç°çš„endlæ˜¯â€œend of lineâ€çš„ç¼©å†™ï¼Œç»“æŸä¸€è¡Œï¼Œç›¸å½“äºCè¯­è¨€ä¸­çš„\\n\nå› ä¸ºC++çš„ç¼–è¯‘å™¨æ˜¯å®Œæˆå…¼å®¹Cè¯­è¨€çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨&quot;\\n&quot;æ¥æ›¿æ¢endl\n\n\ncoutæ˜¯æµæå–æ“ä½œç¬¦ï¼Œå¯¹åº”çš„ï¼Œä¹Ÿæœ‰æµæ’å…¥æ“ä½œç¬¦cinã€‚ä½ å¯ä»¥ç†è§£ä¸ºå®ƒä»¬å°±æ˜¯C++ä¸­çš„printfå’Œscanf\næ³¨æ„è¿™é‡Œçš„ç®­å¤´æ–¹å‘ï¼Œä¸è¦å¼„é”™äº†\n#include &lt;iostream&gt;using namespace std;int main()&#123;    cout &lt;&lt; &quot;Hello, world!&quot; &lt;&lt; endl;    int a;    cin &gt;&gt; a;    cout &lt;&lt; a &lt;&lt; endl;    return 0;&#125;\n\n\n4.2å¤´æ–‡ä»¶ä½¿ç”¨è¿™ä¸¤ä¸ªâ€œåº“å‡½æ•°â€æ—¶ï¼Œå¿…é¡»è¦è¦åŒ…å«iostreamå¤´æ–‡ä»¶ä»¥åŠstdæ ‡å‡†å‘½åç©ºé—´\nåœ¨cplusplus.comä¸Šæœç´¢ï¼Œå¯ä»¥çœ‹åˆ°iostreamæ˜¯æ ‡å‡†è¾“å…¥è¾“å‡ºæµçš„åº“\n\n4.3å’ŒCè¯­è¨€çš„ä¸åŒä½¿ç”¨C++æ¥è¾“å…¥è¾“å‡ºæ›´åŠ æ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å¢åŠ æ ¼å¼æ§åˆ¶ç¬¦ï¼ˆ%d %c %fè¿™ç§ï¼‰\nå› ä¸ºç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ¤æ–­å®ƒä»¬çš„ç±»å‹\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿ç»­çš„&gt;&gt;æ¥è¾“å…¥å¤šä¸ªæ•°æ®\n\n4.4æµ®ç‚¹æ•°é»˜è®¤ä¿ç•™5ä½å°æ•°é€šè¿‡ä¸¤ä¸ªç¨‹åºçš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°C++ä¸­é»˜è®¤ä¿ç•™å°æ•°æ˜¯5ä½ï¼Œè€ŒCè¯­è¨€ä¸­æ˜¯6ä½\n\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æƒ³æ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œè®©å®ƒè¾“å‡ºå°æ•°ç‚¹åä¸¤ä½å¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿ\nå¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨printfå’Œ%.2fä¸å°±å®Œäº‹äº†ï¼Ÿ\n\nC++ä¸­ä¹Ÿæœ‰è‡ªå·±çš„æ ¼å¼æ§åˆ¶æ–¹å¼ï¼Œä½†æ˜¯é‚£ä¸ªæ¯”printfæ›´å¤æ‚\n\n\nè€Œä¸”åœ¨C++ä¸­æ‰“å°ä½äº5ä½çš„æµ®ç‚¹æ•°ï¼Œå¹¶ä¸ä¼šåƒCè¯­è¨€ä¸€æ ·åè¡¥0\n\næ³¨æ„æ³¨æ„ï¼å¦‚æœåœ¨C++ç¨‹åºä¸­ä½¿ç”¨printfï¼Œå°±ä¸èƒ½åœ¨printfé‡Œé¢å†™endlå•¦ï¼\n\n5.å‘½åç©ºé—´åœ¨è¾“å…¥è¾“å‡ºå‡½æ•°ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªè¯­å¥\nusing namespace std;\n\nå‰é¢å·²ç»æåˆ°è¿‡ï¼Œstdæ˜¯â€æ ‡å‡†å‘½åç©ºé—´â€\né‚£ä»€ä¹ˆæ˜¯å‘½åç©ºé—´å‘¢ï¼Ÿ\n\n5.1ç®€å•ä»‹ç»åœ¨mainå‡½æ•°ä¸­ï¼Œå¦‚æœå‡ºç°äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\n\nå‡è®¾ä¸€ä¸ªç­çº§ä¸Šæœ‰ä¸¤ä¸ªåŒåçš„åŒå­¦ï¼Œä¸ºäº†åŒºåˆ†ä»–ä»¬ä¿©äººï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€äº›é™„åŠ çš„æ¡ä»¶æ¥ç§°å‘¼äºŒè€…ã€‚æ¯”å¦‚æ€§åˆ«ã€å®¶åº­ä½å€ã€ç”šè‡³æ˜¯æˆç»©\n\nC++ä¸­çš„å‘½åç©ºé—´å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªäº‹çš„\nåœ¨é¡¹ç›®åˆä½œçš„æ—¶å€™ï¼Œå‘½åç©ºé—´å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…ä¸¤ä¸ªäººå†™çš„ç¨‹åºä¸­å‡ºç°åŒæ ·åå­—çš„å˜é‡è€Œå¯¼è‡´å†²çªçš„æƒ…å†µ\n5.2è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ï¼ŒæŠŠint aæ”¾å…¥å…¶ä¸­\nnamespace muxue &#123;\tint a = 1;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ç¼–è¯‘ç¨‹åºå°±ä¸ä¼šæŠ¥é”™äº†\n\nä½†æ˜¯ç¨‹åºæ‰“å°çš„æ˜¯mainå‡½æ•°ä¸­çš„doubleç±»å‹aï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç”¨muxueä¸­çš„int aè¦æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ\nåªéœ€è¦åœ¨å˜é‡åä¹‹å‰ç”¨::æ¥æŒ‡å®šå‘½åç©ºé—´å°±å¯ä»¥äº†\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨using namespace muxue;æ¥ç›´æ¥å±•å¼€è¿™ä¸ªå‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ä¸œè¥¿\n\nä½†æ˜¯è¿™æ ·ä¸å¤ªå¥½ï¼åé¢ä¼šæåˆ°\n\nå¦‚æœä½ å®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåå­—çš„å‘½åç©ºé—´ï¼Œåœ¨ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåˆå¹¶ä»–ä»¬\n\n5.2.1åµŒå¥—å®šä¹‰å‘½åç©ºé—´å®šä¹‰å‘½åç©ºé—´å°±å’ŒCè¯­è¨€çš„ç»“æ„ä½“å¾ˆç±»ä¼¼ï¼Œæ˜¯å¯ä»¥åµŒå¥—å®šä¹‰å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´çš„\n//å‘½åç©ºé—´namespace muxue &#123;\tint a = 1;\t//åµŒå¥—å®šä¹‰å‘½åç©ºé—´\tnamespace happy &#123;\t\tint b = 2;\t&#125;&#125;int main() &#123;\tdouble a = 3.14;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; muxue::a &lt;&lt;endl;\tcout &lt;&lt; muxue::happy::b &lt;&lt; endl;\treturn 0;&#125;\n\n\nç›´æ¥å±•å¼€ä¸¤ä¸ªå‘½åç©ºé—´åï¼Œå°±ä¸éœ€è¦è¿™æ ·å†™è¾“å‡ºå‡½æ•°äº†\n\n\næˆ‘ä»¬è¿˜å¯ä»¥åœ¨å·²æœ‰å‘½åç©ºé—´ä¸­åµŒå¥—å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œé‡Œé¢åŒ…å«å¦å¤–ä¸€ä¸ªa\nnamespace muxue &#123;\tint a = 1;\t//åµŒå¥—å®šä¹‰å‘½åç©ºé—´\tnamespace happy &#123;\t\tint a = 2;\t&#125;&#125;\n\nè¿™æ—¶å€™å¦‚æœä½¿ç”¨using namespace muxue;ï¼Œåœ¨mainå‡½æ•°ä¸­ä¼šé»˜è®¤æ‰“å°å¤–å±‚å‘½åç©ºé—´ä¸­çš„a\n\nä½†å¦‚æœä½ æ¯”è¾ƒå–œæ¬¢ä½œæ­»ï¼ŒæŠŠå†…å±‚å‘½åç©ºé—´ä¹Ÿå±•å¼€äº†ï¼Œå°±ä¼šå‡ºç°å†²çª\nusing namespace muxue;using namespace muxue::happy;\n\n\n\né™¤äº†åµŒå¥—å®šä¹‰ä¸­è¿™ç§å†²çªçš„æƒ…å†µï¼Œæˆ‘ä»¬ç›´æ¥å±•å¼€å‘½åç©ºé—´æ—¶ï¼Œè¿˜ä¼šé‡åˆ°å…¶ä»–å†²çª\n5.3å…¨éƒ¨å±•å¼€å¯èƒ½é‡åˆ°çš„é—®é¢˜5.3.1å’Œåº“å‡½æ•°å†²çªæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæƒ…å†µï¼Œæˆ‘ä»¬åœ¨muxueé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªintç±»å‹å«åšrandï¼Œå¹¶åœ¨ä¹‹åç›´æ¥using namespaceå®Œæ•´å±•å¼€äº†è¿™ä¸ªå‘½åç©ºé—´\n#include &lt;iostream&gt;#include &lt;stdlib.h&gt;using namespace std;namespace muxue &#123;\tint a = 1;\tint rand = 0;&#125;using namespace muxue;int main()&#123;\ta += 1;\tcout &lt;&lt; a &lt;&lt; endl;\trand = 10;\tprintf(&quot;%d\\n&quot;, rand);\treturn 0;&#125;\n\nç„¶åä½ å°±ä¼šå‘ç°ï¼Œç¨‹åºboomäº†ï¼\n\nè¿™æ˜¯å› ä¸ºåœ¨&lt;stdlib.h&gt;å¤´æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªç”Ÿæˆéšæœºæ•°çš„randå‡½æ•°ï¼Œç°åœ¨ç¨‹åºä¸çŸ¥é“ä½ æ˜¯è¦ç”¨å‘½åç©ºé—´ä¸­çš„å˜é‡randï¼Œè¿˜æ˜¯æƒ³è°ƒç”¨è¿™ä¸ªåº“å‡½æ•°äº†ï¼\nmuxue::rand = 10;printf(&quot;%d\\n&quot;, muxue::rand);\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±è¦é€‰æ‹©å•ç‹¬è°ƒç”¨å‘½åç©ºé—´ä¸­çš„randå˜é‡ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨å˜é‡å\n\nåŒæ—¶ï¼Œé¡¶éƒ¨çš„using namesapceä¹Ÿéœ€è¦åšç›¸åº”ä¿®æ”¹\n//using namespace muxue;using muxue::a;\n\n5.3.2å’Œå…¶ä»–å‘½åç©ºé—´å†²çªnamespace muxue &#123;\tint a = 1;\tint rand = 0;&#125;namespace haha &#123;\tint a = 3;&#125;using namespace muxue;using namespace haha;\n\nå‡è®¾ä¸¤ä¸ªå‘½åç©ºé—´ä¸­éƒ½æœ‰aå˜é‡ï¼Œè¿™æ—¶å€™ç¨‹åºä¹Ÿä¸çŸ¥é“ä½ è¦è°ƒç”¨å“ªä¸€ä¸ªaäº†ï¼ŒåŒæ ·ä¼šæŠ¥é”™\n\n\nè¿™å°±å¥½æ¯”ç­çº§é‡Œæœ‰ä¿©ä¸ªå«æåçš„äººï¼Œæœ¬æ¥ä¸€ä¸ªæ˜¯ç”·çš„ï¼Œä¸€ä¸ªæ˜¯å¥³çš„ï¼Œå’±ä»¬å¯ä»¥ç”¨æ€§åˆ«åŒºåˆ†\nç›´æ¥å®Œæ•´å±•å¼€äº†å‘½åç©ºé—´ï¼Œå°±å¥½æ¯”è®©è¿™ä¸¤ä¸ªæåéƒ½å˜æˆç”·ç”Ÿ\nè¿™ä¸BBQäº†å—ï¼Ÿè¿˜æ€ä¹ˆç”¨æ€§åˆ«åˆ¤æ–­è°æ˜¯è°ï¼Ÿ\n\næ‰€ä»¥åœ¨å¾ˆå¤šæ—¶å€™ï¼Œå°½é‡ä½¿ç”¨::å•ç‹¬å±•å¼€æŸä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å±•å¼€æ•´ä¸ªå‘½åç©ºé—´\nè¿™ç§å†²çªçš„æƒ…å†µï¼Œè¢«ç§°ä¸ºå‘½åç©ºé—´æ±¡æŸ“\n\n5.4é¿å…å‘½åç©ºé—´æ±¡æŸ“åœ¨èœé¸Ÿæ•™ç¨‹ä¸Šï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¤§ä½¬åšäº†ä¸€ä¸ªè¿™æ ·çš„ç¬”è®°\n\næ˜¯çš„ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬è‡ªå®šä¹‰çš„å˜é‡ç±»å‹åä¼šå’Œstdæ ‡å‡†å‘½åç©ºé—´å†²çªï¼Œè¿™æ—¶å€™ç›´æ¥åœ¨æœ€å‰é¢using namespace std;å°±ä¼šå‡º5.3ä¸­æåˆ°çš„é—®é¢˜\nå¯coutå’Œcinè¿™ä¸¤ä¸ªå®¶ä¼™å¤©å¤©è¦ç”¨ï¼Œæ€»ä¸èƒ½æ¯ä¸€æ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½å†™ä¸€ä¸ªstd::å§ï¼Ÿé‚£æ ·ä¹Ÿå¤ªéº»çƒ¦äº†ï¼\nåˆ«æ€¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å•ç‹¬å±•å¼€è¿™å‡ ä¸ªå°å®¶ä¼™ï¼\nusing std::cin;using std::cout;using std::endl;\n\n\nå…¶ä»–ä¸€äº›é—®é¢˜åœ¨ä¹‹å‰5.2å’Œ5.3éƒ½å·²ç»æåˆ°è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†è¯´å•¦ï¼\nä¸ªäººç†è§£ï¼Œå³ä¾¿C++æœ‰å‘½åç©ºé—´è¿™ä¸ªå¥½ä¸œè¥¿ï¼Œåœ¨å®šä¹‰å˜é‡çš„æ—¶å€™æœ€å¥½è¿˜æ˜¯ä¿æŒä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä¸ç”¨å…³é”®å­—å’Œåº“å‡½æ•°åä½œä¸ºå˜é‡å\n5.5 ::æŒ‡å®šå…¨å±€ä½œç”¨åŸŸå½“æˆ‘ä»¬é»˜è®¤ä½¿ç”¨::è€Œä¸åœ¨å‰é¢æ·»åŠ å‘½åç©ºé—´çš„åå­—çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šæŒ‡å®šåˆ°å…¨å±€çš„å‘½åç©ºé—´ã€‚å³ä¾¿å‡½æ•°è¢«å¦å¤–ä¸€ä¸ªå‘½åç©ºé—´æ‰€åŒ…è£¹ï¼Œä¹Ÿæ˜¯ä¼šè°ƒç”¨å…¨å±€ä½œç”¨åŸŸä¸‹çš„å‡½æ•°\n//å…¨å±€voidÂ _print()&#123;Â Â Â Â coutÂ &lt;&lt;Â &quot;globalÂ print&quot;Â &lt;&lt;Â endl;&#125;//å‘½åç©ºé—´namespaceÂ muxue&#123;Â Â Â Â voidÂ _print()Â Â Â Â &#123;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â &quot;namespaceÂ muxueÂ print&quot;Â &lt;&lt;Â endl;Â Â Â Â &#125; Â Â Â Â voidÂ testNamespace()Â Â Â Â &#123;Â Â Â Â Â Â Â Â ::_print();//è°ƒç”¨å…¨å±€ä½œç”¨åŸŸçš„å‡½æ•°Â Â Â Â &#125;&#125;intÂ main()&#123;Â Â Â Â muxue::_print();//è°ƒç”¨å‘½åç©ºé—´å†…çš„printÂ Â Â Â muxue::testNamespace(); Â Â Â Â returnÂ 0;&#125;\n\næ‰“å°çš„ç»“æœå¦‚ä¸‹\n\n\n6.ç¼ºçœå‚æ•°ç¼ºçœå‚æ•°æ˜¯å‡½æ•°åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œç»™æŒ‡å®šçš„å‚æ•°ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šå®å‚ï¼Œå°±ä¼šä½¿ç”¨è¿™ä¸ªé»˜è®¤å€¼ã€‚æ¯”å¦‚ï¼š\n//ç¼ºçœå‚æ•°void Add(int a = 10,int b = 20) &#123;\tcout &lt;&lt; a + b &lt;&lt; endl;&#125;int main() &#123;\tint n = 1, m = 2;\tAdd(n, m);//æŒ‡å®šäº†å®å‚\tAdd();//æ²¡æœ‰æŒ‡å®š\treturn 0;&#125;\n\n\né™¤äº†è¿™ä¸¤ç§æ–¹å¼å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åªç»™è¯¥å‡½æ•°ä¼ ä¸€ä¸ªå®å‚\n\nä½†æ˜¯åƒä¸‹é¢è¿™æ ·ï¼Œæƒ³ç»™å‡½æ•°ä¸­çš„bä¼ ä¸€ä¸ªå‚æ•°æ˜¯ä¸å¯ä»¥çš„\n\n6.1å…¨ç¼ºçœå’ŒåŠç¼ºçœ\nåƒä¸Šé¢è¿™ç§ï¼Œå‡½æ•°ä¸­çš„æ‰€æœ‰å½¢å‚éƒ½è®¾å®šäº†ç¼ºçœå€¼çš„ï¼Œå«åšå…¨ç¼ºçœ\nå‡½æ•°ä¸­åªæœ‰ä¸€éƒ¨åˆ†è®¾ç½®äº†ç¼ºçœå€¼çš„ï¼Œå«åšåŠç¼ºçœ\n\næ³¨æ„ï¼šè®¾ç½®ç¼ºçœå‚æ•°çš„æ—¶å€™ï¼Œå¿…é¡»ä»å³å¾€å·¦è®¾ç½®ï¼Œä¸èƒ½å‡ºç°ä¸­é—´ç©ºä¸€ä¸ªçš„æƒ…å†µ\n\n6.1.1å…¨ç¼ºçœæ¯”å¦‚è¿™ä¹ˆä¸€ä¸ªæœ‰3ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬å…¨éƒ¨è®¾ç½®äº†ç¼ºçœå€¼ï¼Œå°±æ˜¯å…¨ç¼ºçœ\nvoid Print(int a = 10, int b = 20,int c=30) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;\tcout &lt;&lt; c &lt;&lt; endl;&#125;\n\næˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ 3ä¸ªå€¼ï¼Œè¿›è¡Œå¯¹åº”çš„æ‰“å°ï¼Œä¹Ÿå¯ä»¥åªä¼ ä¸¤ä¸ªã€ä¸€ä¸ªæˆ–è€…ä¸ä¼ å½¢å‚\n\nè¿™ç§ä¸­é—´é—´éš”ä¸€ä¸ªä¼ å‚æ˜¯ä¸å…è®¸çš„\n\n\n6.1.2åŠç¼ºçœåŠç¼ºçœæ˜¯ç¼ºçœäº†ä¸€éƒ¨åˆ†çš„å‡½æ•°\nvoid Print2(int a, int b = 20, int c = 30) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;\tcout &lt;&lt; c &lt;&lt; endl;&#125;\n\nåœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ä¸ä¼ å‚æ•°äº†\n\nè‡³å°‘è¦ä¼ ä¸€ä¸ªå‚æ•°ç»™æˆ‘ä»¬çš„a\n\nåŠç¼ºçœçš„å‡½æ•°å¯ä»¥æ˜¯å¦‚ä¸‹å½¢å¼\nvoid Print2(int a, int b = 20, int c = 30);void Print2(int a, int b, int c = 30);\n\nä½†ä¸èƒ½æ˜¯è¿™æ ·\nvoid Print2(int a=10, int b, int c = 30);\n\nå› ä¸ºè¿™ç§æƒ…å†µä¼šå‡ºç°æ­§ä¹‰ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“ä½ çš„å‚æ•°æ˜¯ç»™bè¿˜æ˜¯ç»™a\n\n6.2ç¼ºçœå‚æ•°çš„åº”ç”¨æ¯”å¦‚åœ¨åˆ›å»ºä¸€ä¸ªé¡ºåºè¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç¼ºçœå‚æ•°æ¥è®¾ç½®é»˜è®¤é•¿åº¦\nè¿™æ ·å°±é¿å…äº†å•ä¸€é»˜è®¤é•¿åº¦å¯¼è‡´çš„å¤šæ¬¡æ‰©å®¹ï¼ˆreallocæ‰©å®¹æ˜¯æœ‰æ€§èƒ½æµªè´¹çš„ï¼ï¼‰\n\n\næ¯”å¦‚æˆ‘çŸ¥é“æˆ‘è¿™æ¬¡éœ€è¦ä¸€ä¸ªå¾ˆé•¿çš„é¡ºåºè¡¨ï¼Œç›´æ¥æ”¹é»˜è®¤é•¿åº¦ä¸å¤ªåˆé€‚ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ä¼ ä¸€ä¸ªæ–°çš„é•¿åº¦å€¼æ›´åŠ æ–¹ä¾¿æˆ‘ä»¬çš„åŠ¨æ€ç®¡ç†ï¼\n\nç¼ºçœå‚æ•°æ˜¯åªæœ‰C++æ‰æ”¯æŒçš„å‡½æ•°å®šä¹‰æ–¹å¼ï¼Œè¿™ä¹Ÿæ˜¯C++æ¯”Cè¯­è¨€æ›´ä¼˜çš„ä½“ç°\n6.3å¤šæ–‡ä»¶ç¼–ç¨‹ä¸­çš„ç¼ºçœä½¿ç”¨å¤šæ–‡ä»¶ç¼–ç¨‹çš„æ—¶å€™ï¼Œç¼ºçœå€¼åªéœ€è¦åœ¨å¤´æ–‡ä»¶ä¸­ç»™å‡ºå³å¯\n\nä¸éœ€è¦åœ¨å‡½æ•°å®šä¹‰çš„æºæ–‡ä»¶ä¸­ç»™å‡ºï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nå‡è®¾å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰ä¸­è®¾å®šçš„ç¼ºçœå€¼ä¸åŒï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“è¦ç”¨å“ªä¸€ä¸ªç¼ºçœå€¼\n\n\nè°ƒç”¨å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°å‡½æ•°æ­£ç¡®åˆ†é…äº†ä¸åŒçš„åˆå§‹å€¼\n\n\n6.3.1é”™è¯¯æƒ…å†µä½†å¦‚æœæˆ‘ä»¬åœ¨å¤´æ–‡ä»¶ä¸­ä¸åŒ…å«ç¼ºçœï¼Œå‡½æ•°å°±ä¼šæŠ¥é”™ï¼Œä¸æ”¯æŒæˆ‘ä»¬åªä¼ 1ä¸ªå‚æ•°\nvoid InitArr(Qa* q, int n);\n\n\nåªè¦ä½ çš„å¤´æ–‡ä»¶ä¸­å£°æ˜æ²¡æœ‰ç¼ºçœï¼Œ åœ¨å‡½æ•°å®šä¹‰çš„æºæ–‡ä»¶ä¸­åŠ å…¥ç¼ºçœä¹Ÿæ˜¯æ²¡ç”¨çš„ï¼\n\nå› ä¸ºç¼–è¯‘å™¨å±•å¼€å¤´æ–‡ä»¶æ˜¯åœ¨mainå‡½æ•°ä¸­ä¹‹ä¸Šï¼Œåœ¨æŸ¥æ‰¾å‡½æ•°çš„æ—¶å€™ï¼Œåªä¼šå‘ä¸ŠæŸ¥æ‰¾å£°æ˜ã€‚æ‰€ä»¥å‡½æ•°çš„å£°æ˜æ˜¯ä»¥å¤´æ–‡ä»¶ä¸ºå‡†ï¼\n\n\n\nç»“è¯­ç¬¬ä¸€ç¯‡C++çš„ç¬”è®°å°±å†™è¿™ä¹ˆå¤šï¼ˆå…¶å®å·²ç»æœ‰å‡ åƒå­—äº†ï¼‰\nä¸‹ä¸€ç¯‡ç¬”è®°æ˜¯å‡½æ•°é‡è½½ï¼Œå¯ä»¥è®©ä½ æ„Ÿå—åˆ°C++çš„æ›´å¤šèŠ±æ ·ï¼\n\nä¸ä¼šæœ‰äººæŠŠåšå®¢çœ‹å®Œäº†è¿˜ä¸ç‚¹èµå§ï¼Ÿ\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘å¹¶æŸ¥é›†","url":"/posts/2359019899/","content":"å¹¶æŸ¥é›†è¿™ä¸ªæ•°æ®ç»“æ„æœ¬èº«å¹¶ä¸éš¾ï¼Œå…¶ä¸»è¦æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ï¼Œæ–¹ä¾¿æˆ‘ä»¬ç¼–å†™å›¾çš„ä»£ç ï¼Œå’Œä¸€äº›OJé¢˜\n\n\n[TOC]\n1.ä»€ä¹ˆæ˜¯å¹¶æŸ¥é›†ï¼Ÿå¹¶æŸ¥é›†æ˜¯å¤šä¸ªç‹¬ç«‹é›†åˆçš„åˆé›†ï¼Œç”¨äºè¡¨ç¤ºæ•°æ®ä¹‹é—´çš„å…³ç³»ã€‚\næ¯”è¾ƒç”ŸåŠ¨çš„ä¾‹å­ï¼Œå°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„æœ‹å‹åœˆï¼ˆä¸æ˜¯wxçš„é‚£ä¸ªå•Šï¼‰\n\nå¼ ä¸‰å’Œæå››æ˜¯å¥½æœ‹å‹ï¼Œé‚£ä¹ˆä»–ä»¬å°±æ„æˆäº†ä¸€ä¸ªé›†åˆA\nç‹èˆå’Œç‹é™†æ˜¯å¥½æœ‹å‹ï¼Œé‚£ä¹ˆä»–ä»¬ä¹Ÿæ„æˆäº†ä¸€ä¸ªé›†åˆB\næ­¤æ—¶ï¼Œç‹èˆçªç„¶è®¤è¯†äº†æå››ï¼Œè¿™æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠAå’ŒBåˆå¹¶æˆä¸€ä¸ªé›†åˆ\n\næ¨è€Œå¹¿ä¹‹ï¼Œä¸€ä¸ªå¹¶æŸ¥é›†ä¸­å¯ä»¥æœ‰å¤šä¸ªè¿™æ ·çš„é›†åˆï¼Œå¤šä¸ªæœ‹å‹åœˆã€‚\n\nå¹¶æŸ¥é›†ä¸­çš„æ¯ä¸€ä¸ªé›†åˆæ˜¯ç”¨å¤šå‰æ ‘æ¥è¡¨ç¤ºçš„\n\n2.æ€è·¯å¹¶æŸ¥é›†çš„æ€è·¯å¹¶ä¸éš¾ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„çš„å¤§å°ï¼ˆéœ€è¦åœ¨å¦å¤–çš„åœ°æ–¹ç®¡ç†ç¼–å·ï¼‰åˆ›å»ºä¸€ä¸ªå¹¶æŸ¥é›†\nä¸‹æ ‡å³ä¸ºæ•°æ®çš„ç¼–å·\n\nè®¾å®šå…ƒç´ çš„åˆå§‹å€¼éƒ½æ˜¯-1\nå¦‚æœä¸‹æ ‡1å’Œ3ä¸ºä¸€ä¸ªé›†å’Œï¼Œé‚£å°±æŠŠ3çš„å…ƒç´ ï¼ˆåˆå§‹å€¼-1ï¼‰åŠ åˆ°1å¤„ï¼Œå³1çš„å…ƒç´ ä¸º-2ï¼›å†æŠŠ3çš„å…ƒç´ è®¾ç½®ä¸º1çš„ä¸‹æ ‡ï¼Œå³3çš„å…ƒç´ ä¸º1\nä¾æ­¤ç±»æ¨ï¼Œæœ€ç»ˆåªè¦ä¸‹æ ‡æ‰€å¯¹åº”å…ƒç´ ä¸ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸‹æ ‡å°±æ˜¯ä¸€ä¸ªé›†å’Œçš„æˆå‘˜\nå¦‚æœä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªé›†åˆçš„æ ¹ï¼Œä¸”å…ƒç´ ä¸ºè¿™ä¸ªé›†å’Œä¸­æˆå‘˜çš„ä¸ªæ•°ï¼ˆç»å¯¹å€¼ï¼‰\n\nå¦‚å›¾æ‰€ç¤ºï¼Œä¸‹æ ‡678æ‰€å¯¹åº”å…ƒç´ ä¸º0ï¼Œä»£è¡¨å®ƒä»¬å±äºä»¥ä¸‹æ ‡0ä¸ºæ ¹çš„ä¸€ä¸ªé›†åˆã€‚è€Œä¸‹æ ‡0å¤„çš„å…ƒç´ ä¸º-4ï¼Œä»£è¡¨è¿™ä¸ªé›†åˆé‡Œé¢æœ‰4ä¸ªå…ƒç´ \n\n2.1 åˆå¹¶é›†åˆå¦‚æœæˆ‘ä»¬éœ€è¦åˆå¹¶ä¸€ä¸ªé›†åˆï¼Œä»¥ä¸Šå›¾ä¸­çš„0é›†åˆå’Œ1é›†åˆä¸ºä¾‹ã€‚æˆ‘ä»¬åªéœ€è¦å°†1é›†åˆçš„å…ƒç´ -3åŠ åˆ°0é›†åˆä¸Šï¼Œå†æŠŠ1é›†åˆçš„å…ƒç´ æ”¹æˆ0å³å¯\næ­¤æ—¶çš„æ ‘å°±ä¼šæ˜¯è¿™æ ·çš„ğŸ‘‡\n\n2.2 å‹ç¼©è·¯å¾„å½“èŠ‚ç‚¹å¾ˆå¤šï¼Œé›†åˆå¯èƒ½ä¼šå‡ºç°è·¯å¾„é•¿åº¦è¿‡å¤§çš„æƒ…å†µã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œè·¯å¾„çš„å‹ç¼©\nå…¶æ–¹æ³•å¾ˆç®€å•ã€‚éå†æ•´ä¸ªå¹¶æŸ¥é›†ï¼Œå°†åŒä¸€é›†åˆçš„å­èŠ‚ç‚¹æ”¹æˆç›¸åŒçš„çˆ¶äº²å³å¯\n\nè¿™æ ·åœ¨å‘ä¸Šæ‰¾é›†åˆçš„æ ¹æ—¶ï¼Œæ— é¡»è·³è½¬å¤šæ¬¡ï¼Œä¸€æ¬¡å°±èƒ½æ‰¾åˆ°ã€‚\nä½†ç”±äºå¹¶æŸ¥é›†çš„è®¿é—®æ˜¯ä¾é æ•°ç»„ä¸‹æ ‡å®ç°çš„éšæœºè®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œåªæœ‰æ•°æ®æ ·æœ¬é‡æå¤§çš„æ—¶å€™ï¼Œè¿™ä¹ˆåšæ‰èƒ½æœ‰æ•ˆæœ\n\n3.ä»£ç ç›¸æ¯”äºå…¶ä»–æ•°æ®ç»“æ„å¤æ‚çš„å®ç°ï¼Œå¹¶æŸ¥é›†çš„å®ç°å°±ç®€å•å¤šäº†ã€‚ä¸»è¦çš„å‡½æ•°åªæœ‰å‡ ä¸ªï¼Œå¯ä»¥é€šè¿‡å°è£…vectoræ¥å®ç°\nclass UnionFindSet {public:\tUnionFindSet(const int sz)\t\t:_set(sz,-1)//è°ƒç”¨vectoræ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–szä¸ª-1\t{}\tvoid Union(int x, int y)//è®¾ç½®xå’Œyä¸ºä¸€ä¸ªé›†åˆ\t{\t\tint r1 = FindRoot(x);\t\tint r2 = FindRoot(y);\t\tif (r1 != r2)//ä¸åœ¨ä¸€ä¸ªé›†å’Œä¸­\t\t{\t\t\t_set[r1] += _set[r2];\t\t\t_set[r2] = r1;\t\t}\t}\tint FindRoot(int n)//æ‰¾è¿™ä¸ªé›†åˆçš„æ ¹\t{\t\twhile (_set[n] &gt;= 0)\t\t{\t\t\tn = _set[n];\t\t}\t\treturn n;//è´Ÿæ•°çš„æ—¶å€™ä¸ºæ ¹\t}\tbool isUnion(int x,int y)//åˆ¤æ–­æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­\t{\t\treturn FindRoot(x) == FindRoot(y);\t}\tint UnionSZ()//è¿”å›æœ‰å‡ ä¸ªé›†åˆ\t{\t\tint count = 0;\t\tfor (int i = 0; i &lt; _set.size(); i++)\t\t{\t\t\tif (_set[i] &lt; 0)\t\t\t{\t\t\t\tcount++;\t\t\t}\t\t}\t\treturn count;\t}private:\tvector&lt;int&gt; _set;//ç”¨æ¥å­˜æ”¾å¯¹åº”å…³ç³»};\n\nè¿™é‡Œæ²¡æœ‰å†™å‹ç¼©è·¯å¾„çš„ä»£ç ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªéå†æå®šçš„äº‹ğŸ˜‚\n\néå†ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºåŒä¸€é›†åˆ\næ˜¯ï¼Œæ‰¾åˆ°è¿™ä¸ªé›†å’Œçš„æ ¹\nå°†å½“å‰éå†åˆ°çš„èŠ‚ç‚¹çˆ¶äº²æ”¹æˆè¯¥é›†å’Œçš„æ ¹\n\næ€è·¯è¿˜æ˜¯ä¸éš¾çš„\n4.OJé¢˜4.1 å‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡\nå‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡ \n\n\næœ‰äº†å¹¶æŸ¥é›†ï¼Œè¿™é“é¢˜å°±éå¸¸ç®€å•ã€‚æœ€é‡è¦çš„æ˜¯æ€è·¯ã€‚æˆ‘ä»¬æ— é¡»ç°åœºé€ ä¸€ä¸ªè½®å­ï¼Œåªéœ€è¦å†™å¥½æ‰¾æ ¹å‡½æ•°ï¼Œç”¨ä¸€ä¸ªæ•°ç»„å°±èƒ½å®ç°ä¸€ä¸ªç®€å•çš„å¹¶æŸ¥é›†\nclass Solution {public:    int FindRoot(const vector&lt;int&gt;&amp; v,int n)    {        int prev = n;//åˆå§‹ä¸‹æ ‡        while(v[prev]&gt;=0)//å®ƒçš„çˆ¶äº²ä¸‹æ ‡        {            prev=v[prev];//å¦‚æœä¸ä¸ºè´Ÿæ•°ï¼Œé‚£å°±è¿˜æ˜¯éœ€è¦å¾€å‰æ‰¾        }        return prev;    }    int findCircleNum(vector&lt;vector&lt;int&gt;&gt;&amp; isConnected)     {        vector&lt;int&gt; v(isConnected.size(),-1);        for(int i=0;i&lt;isConnected.size();i++)        {            for(int j=0;j&lt;isConnected[i].size();j++)            {                if(isConnected[i][j]==1)//ä¸º1ä»£è¡¨æ˜¯ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´                 {                    int root1 = FindRoot(v,i);                    int root2 = FindRoot(v,j);                    if(root1!=root2)                    {                        v[root1] += v[root2];                        v[root2] = root1;                    }                }            }        }        int count = 0;        for(int i=0;i&lt;v.size();i++)        {            if(v[i]&lt;0)            {                count++;            }        }        return count;    }};\n\n\n4.2 ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§\n990.ç­‰å¼æ–¹ç¨‹çš„å¯æ»¡è¶³æ€§\n\n\nè¿™é“é¢˜å’Œä¸Šé¢é‚£ä¸€é“å·®ä¸å¤šï¼Œåªä¸è¿‡æŠŠçœä»½æ¢æˆäº†å­—æ¯ä¹‹é—´çš„å…³ç³»\nclass Solution {public:    int FindRoot(const vector&lt;int&gt;&amp; v,int n)    {        int prev = n;//åˆå§‹ä¸‹æ ‡        while(v[prev]&gt;=0)//å®ƒçš„çˆ¶äº²ä¸‹æ ‡        {            prev=v[prev];//å¦‚æœä¸ä¸ºè´Ÿæ•°ï¼Œé‚£å°±è¿˜æ˜¯éœ€è¦å¾€å‰æ‰¾        }        return prev;    }    bool equationsPossible(vector&lt;string&gt;&amp; equations) {        vector&lt;int&gt; v(26,-1);//å› ä¸ºé¢˜ç›®ç»™çš„éƒ½æ˜¯å°å†™å­—æ¯ï¼Œç›´æ¥å»ºç«‹26ä¸ªå°å†™å­—æ¯çš„æ˜ å°„è¡¨        for(int i=0;i&lt;equations.size();i++)        {            int root1 = FindRoot(v,equations[i][0]-'a');//ç¬¬ä¸€ä¸ªå­—æ¯            int root2 = FindRoot(v,equations[i][3]-'a');//ç¬¬äºŒä¸ªå­—æ¯            if(equations[i][1]=='=')//ä»£è¡¨ç­‰äº            {                if(root1!=root2)                {//è®¾ç½®ä¸ºä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´                     v[root1] += v[root2];                    v[root2] = root1;                }            }            else//ä¸ç­‰äº            {                if(root1==root2)                {                    //å¦‚æœä¸ç­‰äºçš„åŒæ—¶ï¼Œæ ¹è¿˜ç›¸åŒ                    //è¯´æ˜æ˜¯åŒä¸€ä¸ªé›†åˆï¼Œä¸ç¬¦åˆé¢˜æ„                    return false;                }            }        }        //è¿˜éœ€è¦éå†ç¬¬äºŒéï¼Œé¿å…æ¼ç½‘ä¹‹é±¼        for(int i=0;i&lt;equations.size();i++)        {            int root1 = FindRoot(v,equations[i][0]-'a');//ç¬¬ä¸€ä¸ªå­—æ¯            int root2 = FindRoot(v,equations[i][3]-'a');//ç¬¬äºŒä¸ªå­—æ¯            if(equations[i][1]=='!')//ä¸ç­‰äº            {                if(root1==root2)                {                    //å¦‚æœä¸ç­‰äºçš„åŒæ—¶ï¼Œæ ¹è¿˜ç›¸åŒ                    //è¯´æ˜æ˜¯åŒä¸€ä¸ªé›†åˆï¼Œä¸ç¬¦åˆé¢˜æ„                    return false;                }            }        }        return true;    }};\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®ç»“æ„"],"tags":["æ•°æ®ç»“æ„","å›¾","Cpp"]},{"title":"ã€C++ã€‘æœç´¢äºŒå‰æ ‘/KVLæ ‘","url":"/posts/1396203902/","content":"æš‘å‡å·²ç»è¿‡å»ä¸€åŠäº†ï¼Œä½ çš„ä½œä¸šå†™çš„æ€ä¹ˆæ ·äº†ï¼Ÿ\nä¸å…«å…«è¿™äº›æ²¡å•¥ç”¨çš„äº†ï¼Œæœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹æœç´¢äºŒå‰æ ‘ä»¥åŠKVLæ ‘ï¼Œä¹Ÿä¸ºåç»­å­¦ä¹ mapå’Œsetæ‰“ä¸‹åŸºç¡€ã€‚\n\n\n\nåœ¨ä¹‹å‰ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡ç”¨Cè¯­è¨€å®ç°çš„äºŒå‰æ ‘åšå®¢ã€‚å¦‚æœä½ æƒ³äº†è§£äºŒå‰æ ‘çš„åŸºæœ¬å®šä¹‰ï¼Œå¯ä»¥çœ‹çœ‹ğŸ‘‰ ã€ä¼ é€é—¨ã€‘\n\n[TOC]\nå‰è¨€æ ‘æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­éå¸¸å¸¸è§çš„ç©æ„ï¼Œå…¶ç‰¹ç‚¹ä¾¿æ˜¯ä»ä¸‹è€Œä¸Šæœ‰éå¸¸å¤šçš„åˆ†å‰\n\n\næ•°æ®ç»“æ„ä¸­çš„æ ‘ä¾¿æ˜¯ä»¥è¯¥ç‰¹ç‚¹å‘½åçš„ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹ä¼šæœ‰å·¦å³ä¸¤ä¸ªåˆ†å‰æ¥é“¾æ¥å·¦å³å­æ ‘ï¼Œä»è€Œæ„æˆä¸€ç§æ•°æ®ç»“æ„ã€‚\n1.æœç´¢äºŒå‰æ ‘æ‰€è°“æœç´¢äºŒå‰æ ‘ï¼ˆäºŒå‰æŸ¥æ‰¾æ ‘ï¼‰ï¼Œä¾¿æ˜¯è‡´åŠ›äºæ–¹ä¾¿æœç´¢çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå…¶å…·æœ‰ä¸€ä¸‹ç‰¹ç‚¹ï¼š\n\næ¯”è¯¥èŠ‚ç‚¹å¤§çš„æ•°å­˜æ”¾åœ¨å³è¾¹\næ¯”è¯¥èŠ‚ç‚¹å°çš„æ•°å­˜æ”¾åœ¨å·¦è¾¹\n\nè¿™æ ·å½“æˆ‘ä»¬å»éå†ä¸€é¢—æœç´¢äºŒå‰æ ‘çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡å¤§å°æ¯”è¾ƒæ‰¾åˆ°å…¶å†…éƒ¨æ˜¯å¦åŒ…å«æˆ‘ä»¬éœ€è¦æœç´¢çš„èŠ‚ç‚¹ã€‚è¿™æ ·åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼Œæœç´¢çš„æ—¶é—´å¤æ‚åº¦èƒ½æ§åˆ¶åœ¨O(logN)ï¼Œè¿˜æ˜¯éå¸¸å¿«çš„ä¸€ä¸ªæœç´¢ç®—æ³•ï¼\nå› ä¸ºæœç´¢äºŒå‰æ ‘ä¸»è¦ç”¨äºæœç´¢è€Œä¸æ˜¯å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹çš„æœç´¢äºŒå‰æ ‘æ˜¯ä¸å…è®¸æ•°æ®å†—ä½™çš„ã€‚å³ç›¸åŒçš„å€¼åªä¼šå­˜å‚¨ä¸€æ¬¡\n\nåŒæ—¶ï¼Œæœç´¢äºŒå‰æ ‘å¯ä½œä¸ºæ’åºç®—æ³•çš„ä¸€ç§ã€‚å½“æˆ‘ä»¬ç”¨ä¸­åºéå†æœç´¢äºŒå‰æ ‘ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯æœ‰åºçš„\n\n\n1.1 åŸºæœ¬æ„å»ºæƒ³è¦æ„å»ºä¸€ä¸ªæœç´¢äºŒå‰æ ‘ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‘çš„èŠ‚ç‚¹çš„ç»“æ„\ntemplate&lt;class K&gt;struct BSTreeNode&#123;public:\tBSTreeNode* _left;\tBSTreeNode* _right;\tK _key;//å…ƒç´ \tBSTreeNode(K key)\t\t:_left(nullptr),\t\t_right(nullptr),\t\t_key(key)\t&#123;&#125;&#125;;\n\n\nä¸ºä½•ä¸ç›´æ¥æŠŠè¿™ä¸ªç»“æ„å®šä¹‰åœ¨äºŒå‰æ ‘çš„classé‡Œé¢ï¼Ÿ\nå› ä¸ºé‚£æ ·ä¼šäº§ç”Ÿæ•°æ®å†—ä½™è€Œä¸”éå¸¸ä¸æ–¹ä¾¿è°ƒç”¨æˆå‘˜å‡½æ•°\n\nåœ¨æœç´¢äºŒå‰æ ‘çš„åŠŸèƒ½å®ç°ç±»ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªæ ¹éƒ¨èŠ‚ç‚¹å³å¯\ntemplate&lt;class K&gt;class BSTree&#123;typedef BSTreeNode&lt;K&gt; Node;//æ–¹ä¾¿ä½¿ç”¨private:    //æˆå‘˜å˜é‡\tNode* _root=nullptr;&#125;\n\n\n1.2 æ’å…¥æœ‰äº†åŸºæœ¬ç»“æ„ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªæ’å…¥å‡½æ•°æ¥è¿›è¡Œæœ€åŸºæœ¬çš„æ“ä½œäº†\n\nå½“rootä¸ºç©ºçš„æ—¶å€™ï¼Œéœ€è¦ç»™æ ¹èŠ‚ç‚¹å¼€ä¸€ä¸ªç©ºé—´\nrootä¸ä¸ºç©ºï¼Œå®šä¹‰prevå’Œcurä¸¤ä¸ªæŒ‡é’ˆè¿›è¡Œéå†ï¼Œé€šè¿‡å¤§å°åˆ¤æ–­æ¥æ‰¾å¯»æ­£ç¡®çš„æ’å…¥ä½ç½®ï¼ˆå·¦è¾¹å°ï¼Œå³è¾¹å¤§ï¼‰\næ‰¾åˆ°æ­£ç¡®ä½ç½®åï¼Œæ„é€ æ–°èŠ‚ç‚¹å¹¶è¿›è¡Œæ’å…¥æ“ä½œ\n\nä½¿ç”¨boolä½œä¸ºè¿”å›å€¼æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ˜¯å¦æˆåŠŸæ’å…¥ã€‚å¦‚æœæˆåŠŸæ’å…¥äº†ä¸ºtrueï¼Œæ²¡æœ‰æˆåŠŸæ’å…¥ä»£è¡¨è¯¥æœç´¢äºŒå‰æ ‘å†…å·²ç»åŒ…å«äº†ç›¸åŒé”®å€¼çš„èŠ‚ç‚¹ã€‚\nbool Insert(K key)&#123;    if (_root == nullptr)    &#123;        _root = new Node(key);//æ ¹ä¸ºç©ºï¼Œç›´æ¥å¼€ç©ºé—´æ’å…¥        return true;    &#125;    Node* prev = nullptr;    Node* cur = _root;    while (cur)    &#123;        if (key &gt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_right;        &#125;        else if (key &lt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_left;        &#125;        else        &#123;            return false;//æœ‰ç›¸åŒå…ƒç´ ä¸æ‰§è¡Œæ’å…¥        &#125;    &#125;\t//åˆ›å»ºèŠ‚ç‚¹è¿›è¡Œæ’å…¥    cur = new Node(key);    //ä¿å­˜prevæŒ‡é’ˆå°±æ˜¯ä¸ºäº†æ“æ§å®ƒçš„çˆ¶äº²æ¥é“¾æ¥èŠ‚ç‚¹    if (key &gt; prev-&gt;_key) &#123;        prev-&gt;_right = cur;    &#125;    else&#123;        prev-&gt;_left = cur;    &#125;    return true;&#125;\n\né™¤äº†å¾ªç¯ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬\nbool InsertR(const K&amp; key)//å®é™…è°ƒç”¨çš„å‡½æ•°&#123;    return _InsertR(_root, key);&#125;\t//ä½¿ç”¨å¼•ç”¨ï¼Œè¿™æ—¶å€™çš„rootå°±æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„åˆ«å//ä¿®æ”¹rootçš„åŒæ—¶ä¹Ÿä¼šä¿®æ”¹ä¸Šä¸€ä¸ªå­æ ‘çš„å·¦å³èŠ‚ç‚¹//ä¹Ÿå¯ä»¥ç”¨äºŒçº§æŒ‡é’ˆæ¥å®Œæˆè¿™ä¸ªæ“ä½œï¼ŒåŸç†ç›¸åŒbool _InsertR(Node*&amp; root, const K&amp; key)&#123;    //ç©ºä»£è¡¨èµ°åˆ°å¶å­äº†ï¼Œæ‰§è¡Œæ’å…¥    if (root == nullptr) &#123;        Node* newNode = new Node(key);        root = newNode;        return true;    &#125;    if (key &gt; root-&gt;_key) &#123;        _InsertR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _InsertR(root-&gt;_left, key);    &#125;    else &#123;        return false;//ä¸æ’å…¥ç›¸åŒå€¼    &#125;&#125;\n\næ­¤ç±»äºŒå‰æ ‘çš„é€’å½’æ€è·¯æœ€å¥½ç”¨ç”»å›¾æ¥ç†æ¸…ã€‚éœ€è¦æ˜ç™½æ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯æ€ä¹ˆè¿”å›çš„\n\nå…³äºåˆ†æ”¯é€’å½’æ€æƒ³å¯ä»¥çœ‹çœ‹ã€é“¾æ¥ã€‘ï¼Œè¿™æœ‰åŠ©äºä½ ç†è§£æœ¬æ–‡ä¸­çš„é€’å½’å®ç°\n\nä¸Šé¢çš„é€’å½’é—®é¢˜ä¾¿æ˜¯å°†åŸæœ¬åˆ©ç”¨å¾ªç¯è¿›è¡Œå·¦å³å¯»æ‰¾çš„æ“ä½œåŒ–ä¸ºå¾€ä¸‹è°ƒç”¨ä¸‹ä¸€è¯¾å­æ ‘ã€‚ç®€å•æ¥æ¥è¯´å°±æ˜¯è€å¸ˆè¦ç­é•¿ã€ç­é•¿æ‰¾å°ç»„é•¿ã€å°ç»„é•¿æ‰¾ç»„å‘˜è¿™æ ·åˆ†é…å·¥ä½œã€‚\nåªæœ‰èµ°åˆ°æœ€åçš„ç»„å‘˜ï¼ˆç©ºèŠ‚ç‚¹ï¼‰æˆ‘ä»¬æ‰æ‰§è¡Œæ’å…¥æ“ä½œ\n1.3 ä¸­åºæ‰“å°æ’å…¥å®Œæˆäº†ï¼Œè¦æ€æ ·æ‰èƒ½çœ‹åˆ°èŠ‚ç‚¹ä¸­çš„å†…å®¹å‘¢ï¼Ÿæ¥ä¸ªä¸­åºéå†å§ï¼\næˆ‘ä»¬éœ€è¦é‡å†™ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå› ä¸ºåœ¨ç±»å¤–é¢æ— æ³•è®¿é—®åˆ°ç§æœ‰æˆå‘˜rootï¼Œæ— æ³•ç›´æ¥ç»™è¯¥å‡½æ•°ä¼ å‚ã€‚å¦‚æœæƒ³ç»´æŒç±»çš„å°è£…æ€§ï¼Œä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°å®šä¹‰ä¸ºprivateæˆå‘˜\n    void InOrder()//ä¸­åºéå†    &#123;        _InOrder(_root);    &#125;//private:    void _InOrder(Node* root)    &#123; //é€’å½’æ‰“å°        if (root == nullptr)            return ;        _InOrder(root-&gt;_left);        cout &lt;&lt; root-&gt;_key &lt;&lt; &quot; &quot;;        _InOrder(root-&gt;_right);    &#125;\n\nå…³äºå‰ä¸­ååºéå†çš„å†…å®¹åœ¨ä¹‹å‰Cè¯­è¨€çš„åšå®¢ä¸­æœ‰è¿‡è®²è§£ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°\n\n\n1.4 æŸ¥æ‰¾æ—¢ç„¶æ˜¯æœç´¢äºŒå‰æ ‘ï¼Œé‚£ä¾¿å¿…é¡»è¦æœ‰æŸ¥æ‰¾å‡½æ•°ã€‚\nå…¶å®åœ¨æ’å…¥æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä¾¿å·²ç»æŠŠæŸ¥æ‰¾å‡½æ•°çš„æ€è·¯å†™å‡ºæ¥äº†ï¼ˆå³åˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤èŠ‚ç‚¹ï¼‰\n//æœç´¢äºŒå‰æ ‘ä¸€èˆ¬ä¸ç›´æ¥æ“ä½œèŠ‚ç‚¹ï¼Œä¸éœ€è¦è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆ//Node* Find(const K&amp; key)bool Find(const K&amp; key)&#123;\tNode* cur = _root;\twhile (cur)\t&#123;\t\tif (key &gt; cur-&gt;_key)\t\t&#123;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (key &lt; cur-&gt;_key)\t\t&#123;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse\t\t&#123;\t\t\treturn true;\t\t&#125;\t&#125;\treturn false;&#125;\n\nåŒæ ·ï¼Œä¹Ÿå¯ä»¥å†™ä¸€ä¸ªé€’å½’ç‰ˆæœ¬ã€‚å½“èŠ‚ç‚¹çš„å€¼ç›¸ç­‰æ—¶è¿”å›trueï¼Œå¦‚æœèµ°åˆ°ç©ºäº†ä»£è¡¨è¿™æ£µæ ‘é‡Œé¢æ²¡æœ‰è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿”å›false\nbool FindR(const K&amp; key)//å®é™…è°ƒç”¨çš„å‡½æ•°&#123;    return _FindR(_root, key);&#125;//é€’å½’å®ç°bool _FindR(Node* root, const K&amp; key)&#123;    if (root == nullptr) &#123;        return false;    &#125;    if (key &gt; root-&gt;_key) &#123;        _FindR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _FindR(root-&gt;_left, key);    &#125;    else &#123;        return true;    &#125;&#125;\n\n1.5 åˆ é™¤(è¾ƒéš¾)åœ¨æœç´¢äºŒå‰æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹å¹¶æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¿è¯åˆ é™¤èŠ‚ç‚¹åï¼Œæ ‘è¿˜æ»¡è¶³æœç´¢äºŒå‰æ ‘çš„ç‰¹å¾ã€‚å¦‚æœåˆ é™¤äº†ä¹‹åç ´åæ ‘çš„ç»“æ„è¿˜ä¸ç®¡ä»–ï¼Œé‚£å°±æ˜¯erräº†ã€‚\nä»¥ä¸‹é¢çš„è¿™æ£µæ ‘ä¸ºä¾‹ï¼Œå®ƒæ»¡è¶³æœç´¢äºŒå‰æ ‘çš„åŸºæœ¬ç‰¹å¾\n\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åˆ é™¤èŠ‚ç‚¹4ï¼Œè¿™å¾ˆå®¹æ˜“ï¼Œåªéœ€è¦è®©3çš„å³å­æ ‘ä¸ºç©ºï¼Œå†deleteæ‰4çš„èŠ‚ç‚¹å³å¯ã€‚\nä½†å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤6ï¼Œäº‹æƒ…å°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚æˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ¥æ›¿è¡¥å®ƒçš„ä½ç½®\n\né‚£ä¹ˆï¼Œè°å¯ä»¥èƒœä»»è¿™ä¸ªæ–°çš„ä½ç½®å‘¢ï¼Ÿ\nç­”ï¼šå·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹orå³å­æ ‘çš„æœ€å°èŠ‚ç‚¹\n\nåœ¨åˆ é™¤6çš„æƒ…å†µä¸‹ï¼Œå·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹ä¸º4ï¼Œå³å­æ ‘çš„æœ€å°èŠ‚ç‚¹ä¸º7ã€‚ä½ ä¼šå‘ç°ï¼Œå°†å®ƒä»¬æ¢ä¸Šè¿™ä¸ªä½ç½®ï¼Œçš„ç¡®æ»¡è¶³æœç´¢äºŒå‰æ ‘çš„ç‰¹æ€§\n\né‚£ä¹ˆï¼Œæ€ä¹ˆå¯ä»¥æŠŠè¿™ä¸¤ä¸ªèŠ‚ç‚¹ç»™æ›¿æ¢ä¸Šæ¥å‘¢ï¼Ÿ\nè¿™ä¸€å¥—æ“ä½œå…¶å®æŒºéº»çƒ¦çš„\n\nå…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œä¼šæœ‰ä¸‹é¢3ç§æƒ…å†µï¼š\nè¯¥èŠ‚ç‚¹åªæœ‰å·¦å¨ƒ\nè¯¥èŠ‚ç‚¹åªæœ‰å³å¨ƒ\nè¯¥èŠ‚ç‚¹å·¦å³éƒ½æœ‰\n\n\nå¦‚æœæ˜¯å‰ä¸¤ç§æƒ…å†µï¼ˆåŒ…æ‹¬æ²¡æœ‰å­©å­çš„æƒ…å†µï¼‰ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œè®©å®ƒçš„çˆ¶äº²æŒ‡å‘å®ƒçš„å­©å­å°±è¡Œäº†ï¼ˆæ‰˜ç®¡ï¼‰\nåªæœ‰å·¦å¨ƒï¼Œçˆ¶èŠ‚ç‚¹æ‰˜ç®¡å·¦å¨ƒ\nåªæœ‰å³å¨ƒï¼Œçˆ¶èŠ‚ç‚¹æ‰˜ç®¡å³å¨ƒ\n\n\nå·¦å³éƒ½æœ‰å­©å­ï¼Œéœ€è¦æ‰¾åˆ°å·¦å­æ ‘æœ€å¤§èŠ‚ç‚¹&#x2F;å³å­æ ‘æœ€å°èŠ‚ç‚¹ï¼Œè¿›è¡Œäº¤æ¢\n\nåªæ˜¯äº¤æ¢è¿˜è¿œè¿œä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦é“¾æ¥è¿™ä¸ªæœ€å¤§&#x2F;æœ€å°èŠ‚ç‚¹çš„å­©å­ï¼ˆæ¯”å¦‚ä¸Šå›¾ä¸­7çš„æƒ…å†µï¼‰å†åˆ é™¤æ‰è¢«äº¤æ¢è¿‡å»çš„æŒ‡å®šèŠ‚ç‚¹\n\n//åˆ é™¤å»æ‰¾å·¦å­æ ‘çš„æœ€å¤§èŠ‚ç‚¹ï¼Œæˆ–è€…å³å­æ ‘çš„æœ€å°èŠ‚ç‚¹//ä¸éœ€è¦åˆ é™¤çš„æ ‘è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢ä¹‹ååˆ é™¤å¶å­èŠ‚ç‚¹bool Erase(const K&amp; key)&#123;    Node* prev = nullptr;    Node* cur = _root;    while (cur)    &#123;        if (key &gt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_right;        &#125;        else if (key &lt; cur-&gt;_key)        &#123;            prev = cur;            cur = cur-&gt;_left;        &#125;        else        &#123;            if (cur-&gt;_left == nullptr)//åªæœ‰å³å¨ƒ            &#123;                if (cur == _root)                &#123;                    _root = _root-&gt;_right;                &#125;                else                &#123;                    if (prev-&gt;_left == cur)                    &#123;                        prev-&gt;_left = cur-&gt;_right;                    &#125;                    else &#123;                        prev-&gt;_right = cur-&gt;_right;                    &#125;                &#125;                delete cur;            &#125;            else if (cur-&gt;_right == nullptr)//åªæœ‰å·¦å¨ƒ            &#123;                if (cur == _root)                &#123;                    _root = _root-&gt;_left;                &#125;                else                &#123;                    if (prev-&gt;_left == cur)                    &#123;                        prev-&gt;_left = cur-&gt;_left;                    &#125;                    else &#123;                        prev-&gt;_right = cur-&gt;_left;                    &#125;                &#125;                delete cur;            &#125;            else //å·¦å³éƒ½æœ‰å­©å­            &#123;                //å°†curå’Œå³å­æ ‘çš„æœ€å°å€¼èŠ‚ç‚¹è¿›è¡Œäº¤æ¢                Node* minPrev = cur;                Node* minRight = cur-&gt;_right;                while (minRight-&gt;_left)                &#123;                    minPrev = minRight;                    minRight = minRight-&gt;_left;                &#125;                swap(minRight-&gt;_key, cur-&gt;_key);                if (minPrev-&gt;_left == minRight)                &#123;                    minPrev-&gt;_left = minRight-&gt;_left;                &#125;                else &#123;                    minPrev-&gt;_right = minRight-&gt;_left;                &#125;                delete minRight;            &#125;            return true;        &#125;    &#125;    return false;&#125;\n\næ‰§è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œåˆ é™¤ä¹‹åçš„æ ‘ä¾æ—§æ˜¯ä¸€ä¸ªæœç´¢äºŒå‰æ ‘ï¼Œä¸­åºéå†ç»“æœå‘ˆæœ‰åº\n\né€’å½’åˆ é™¤å†™å®Œäº†å¾ªç¯ç‰ˆæœ¬ï¼Œå†æ¥ä¸ªé€’å½’å§ï¼\nbool _EraseR(Node*&amp; root, const K&amp; key)&#123;    //æ ¹ç›´æ¥ä¸ºç©ºï¼Œè¿”å›false    if (root == nullptr) &#123;        return false;    &#125;    if (key &gt; root-&gt;_key) &#123;        _EraseR(root-&gt;_right, key);    &#125;    else if (key &lt; root-&gt;_key) &#123;        _EraseR(root-&gt;_left, key);    &#125;    else     &#123;        Node* del = root;//ä¿å­˜å˜é‡ç”¨äºåˆ é™¤        if (root-&gt;_left == nullptr)//åªæœ‰å³å¨ƒ        &#123;            /*if (root == _root) &#123;\t\t\t\t\t_root = _root-&gt;_left;\t\t\t\t&#125;*/            //è¿™æ—¶å€™rootæ˜¯æ“ä½œèŠ‚ç‚¹çš„åˆ«åï¼Œä¸éœ€è¦å•ç‹¬å¯¹æ ¹èŠ‚ç‚¹è¿›è¡Œå¤„ç†            root = root-&gt;_right;        &#125;        else if (root-&gt;_right == nullptr)        &#123;            root = root-&gt;_left;        &#125;        else //å·¦å³éƒ½æœ‰å­©å­        &#123;            //å°†curå’Œå³å­æ ‘çš„æœ€å°å€¼èŠ‚ç‚¹è¿›è¡Œäº¤æ¢            Node* minRight = root-&gt;_right;            //while (minRight) //err            while (minRight-&gt;_left) //åˆ¤æ–­çš„æ˜¯leftï¼Œä¸ç„¶ä¼šèµ°åˆ°ç©ºç„¶åäº¤æ¢            &#123;                minRight = minRight-&gt;_left;            &#125;            swap(minRight-&gt;_key, root-&gt;_key);            return _EraseR(root-&gt;_right, key);        &#125;        delete del;        return true;    &#125;&#125;\n\nåœ¨æœ€åä¸€ä¸ªæƒ…å†µä¸­ï¼Œæˆ‘ä»¬å·§å¦™åœ°å°†é—®é¢˜åŒ–ä¸ºäº†åœ¨æŒ‡å®šèŠ‚ç‚¹çš„å³å­å†æ¬¡æ‰§è¡Œä¸€æ¬¡åˆ é™¤æ“ä½œ\n\nä¸ºä»€ä¹ˆåœ¨é€’å½’çš„æ“ä½œä¸­æˆ‘ä»¬ä¸éœ€è¦å•ç‹¬å¤„ç†minPrevå‘¢ï¼Ÿ\næ³¨æ„çœ‹å‡½æ•°çš„æ¥å£ã€‚åˆ é™¤çš„é€’å½’æ“ä½œéœ€è¦æ‰ç”¨ä¸€ä¸ªå¾ˆå·§å¦™çš„åšæ³•ï¼Œä½¿ç”¨äº†å¼•ç”¨å‚æ•°ï¼Œå……åˆ†åˆ©ç”¨äº†å‡½æ•°ä¼ å€¼æ—¶ä¼ å¼•ç”¨çš„ç‰¹ç‚¹ï¼ˆåˆ«åï¼‰\nbool _EraseR(Node*&amp; root, const K&amp; key)\n\nè¿™æ—¶å€™çš„èŠ‚ç‚¹rootä¸ä»…æ˜¯å½“å‰é€’å½’åˆ°çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹çš„åˆ«åã€‚å¯¹è¯¥èŠ‚ç‚¹çš„æ“ä½œä¼šç›´æ¥æ”¹å˜ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ï¼Œå°±çœå»äº†æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œçš„æ­¥éª¤ï¼\n\nå¯¹rootçš„ä¿®æ”¹ä¼šç›´æ¥åŒæ­¥é“ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å­©å­ä¸Š\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è¶…çº§èµï¼\n\n2.KVLæ ‘2.1 æ¦‚å¿µKVæŒ‡ä»£çš„æ˜¯ä¸¤ä¸ªæ¨¡æ¿å‚æ•°keyå’Œvalueã€‚å…¶å®ç°å’Œä¸Šé¢çš„æœç´¢äºŒå‰æ ‘å®Œå…¨ç›¸åŒï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹æ¨¡æ¿å‚æ•°ï¼Œä»¥åŠæ‰€æœ‰æ“ä½œkeyçš„ä½ç½®éƒ½éœ€è¦æ·»åŠ ç¬¬äºŒä¸ªå‚æ•°valueã€‚\n\næºç å®ç°è§æˆ‘çš„ä»£ç ä»“åº“ é“¾æ¥\n\nè¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªkeyæ·»åŠ ç¬¬äºŒä¸ªç»‘å®šçš„å‚æ•°äº†ã€‚ä¸€èˆ¬æŠŠè¿™ç§ç»‘å®šå…³ç³»ç§°ä¸º&lt;Key,Value&gt;é”®å€¼å¯¹\nKVLæ ‘çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š\n\næ’åºä¾æ®keyæ¥æ’åºï¼Œè€Œä¸æ˜¯value\nkeyä¸å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯valueå¯ä»¥ä¿®æ”¹\nåœ¨ä¿å­˜é”®å€¼å…³ç³»çš„åŒæ—¶ï¼Œå»é‡+æ’åº\n\né€šè¿‡è¿™ä¸¤ä¸ªå‚æ•°çš„ç»‘å®šå…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼å­—å…¸ã€æ°´æœå‡ºç°æ¬¡æ•°ç­‰ç­‰é—®é¢˜çš„æŸ¥æ‰¾æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ•°ç»„æ˜ å°„ï¼Œä½†è¿™ç§æ–¹æ³•æ›´åŠ ä¾¿æ·\n\n2.2 ç¤ºä¾‹æ’å…¥4ä¸ªæ°´æœå’Œå…¶æ•°é‡ï¼Œä¸­åºéå†æ‰“å°åï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®æ˜¯ä»¥keyä¸ºæ’åºæ ‡å‡†çš„ã€‚\nè¿™é‡Œè¯´æ˜çš„æ˜¯ï¼Œstringä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒå¤§å°çš„ï¼Œæ‰€ä»¥åŒæ ·é€‚ç”¨äºæœç´¢äºŒå‰æ ‘\n\né€šè¿‡è¿™ç§ç±»ä¼¼çš„ç»‘å®šå…³ç³»ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æ·»åŠ æ›´å¤šå‚æ•°è¿›å…¥æœç´¢äºŒå‰æ ‘ã€‚å¯ä»¥å®Œæˆç±»ä¼¼å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ/è½¦ç‰Œç®¡ç†ç³»ç»Ÿä¸­å­¦å·è½¦ç‰Œå·å’Œç”¨æˆ·çš„ç»‘å®šå…³ç³»\n2.3 å…è®¸æ•°æ®å†—ä½™æˆ‘ä»¬å¯ä»¥ç®€å•ä¿®æ”¹ä¸€ä¸‹æ’å…¥å‡½æ•°ï¼Œæ¥è¾¾åˆ°å…è®¸æ•°æ®å†—ä½™çš„ç›®çš„ã€‚å³æ’å…¥ç›¸åŒkeyçš„æ—¶å€™ï¼Œåˆ¤æ–­valueï¼Œå¦‚æœvalueä¹Ÿæ˜¯ç›¸åŒåˆ™ä¸æ’å…¥ï¼Œä¸åŒåˆ™æ’å…¥ã€‚è¿™æ ·å¯ä»¥è®©kvlæ ‘ä¸­åŒä¸€ä¸ªkeyæœ‰å¤šç§å¯¹åº”å…³ç³»ï¼Œåœ¨å­—å…¸å¤šä¹‰è¯çš„æ—¶å€™æœ‰ä¸€å®šä½œç”¨\n//æ’å…¥ï¼Œé€šè¿‡ä¼ å¼•ç”¨é¿å…æ‹·è´bool _InsertR(Node*&amp; root, const K&amp; key, const V&amp; value)&#123;    if (root == nullptr)    &#123;        root = new Node(key, value);        return true;    &#125;    if (root-&gt;_key &lt; key)        return _InsertR(root-&gt;_right, key, value);    else if (root-&gt;_key &gt; key)        return _InsertR(root-&gt;_left, key, value);    else&#123;        if (root-&gt;_value == value)            return false;        else&#123;            //å°†ç›¸åŒæ•°æ®æ’å…¥åœ¨å³è¾¹            return _InsertR(root-&gt;_right, key, value);        &#125;    &#125;&#125;\n\næ’å…¥äº†ä¹‹åï¼Œæˆ‘ä»¬åˆ é™¤ä¹Ÿéœ€è¦åˆ é™¤ä¸¤æ¬¡ã€‚\n\nè¿™æ—¶å€™æˆ‘ä»¬EraseRè¿”å›å€¼ä¸ºboolçš„ä»·å€¼å°±ä½“ç°å‡ºæ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå¾ªç¯æ¥åˆ é™¤æ‰å¤šä¸ªå†—ä½™é”®å€¼\n\n\nç»“è¯­è¿™ä¸¤é¢—æ ‘çš„è®²è§£åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå­¦ä¹ å®ƒä»¬æ˜¯ä¸ºäº†åç»­å­¦ä¹ map/setæ‰“åŸºç¡€å“¦ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","æ ‘","Cpp"]},{"title":"ã€C++ã€‘STLï¼šstack/queue/priority_queue/deque","url":"/posts/3750929351/","content":"æ¥å–½ï¼ŒSTLçš„æ ˆå’Œé˜Ÿåˆ—ï¼\n\n\n[TOC]\n1.Stackæ ˆæ˜¯ä¸€ä¸ªéµå¾ªLIFOè§„åˆ™çš„å®¹å™¨ï¼Œå³åè¿›å…ˆå‡ºï¼ˆlast in first outï¼‰ã€‚åæ”¾å…¥å®¹å™¨å†…çš„æ•°æ®ä¼šå…ˆå‡ºæ¥ã€‚\n\nå¦‚æœä½ ä¸å¤ªç†è§£æ ˆçš„æ€§è´¨ï¼Œå¯ä»¥å…ˆçœ‹çœ‹æˆ‘å†™çš„Cè¯­è¨€æ ˆçš„åšå®¢ã€é“¾æ¥ã€‘\n\næ‰“å¼€Cplusplusä¸€çœ‹ï¼Œæ ˆçš„å‡½æ•°è‚‰çœ¼å¯è§çš„å°‘ã€‚è¿™å’Œæˆ‘ä»¬Cè¯­è¨€å®ç°çš„åŠŸèƒ½åŸºæœ¬æ˜¯ä¸€æ ·çš„ã€‚\n\nå®ƒç”šè‡³æ²¡æœ‰æ‹·è´æ„é€ ï¼\n\n1.1 å®¹å™¨é€‚é…å™¨ç­‰ä¼šï¼Œè¿™ä¸ªcontaineræ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ\nåˆ«æ€¥ï¼Œå…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ ˆçš„ç±»å®šä¹‰ğŸ‘‡\nstd::stacktemplate &lt;class T, class Container = deque&lt;T&gt; &gt; class stack;\n\nå’Œä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œå‡ºç°äº†containerï¼Œå’Œä¸€ä¸ªæˆ‘ä»¬å¥½åƒæ²¡æœ‰æ¥è§¦è¿‡çš„deque\næœç´¢åå¾—çŸ¥ï¼Œdequeä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ï¼Œè¢«ç§°ä¸ºåŒç«¯é˜Ÿåˆ—\n\n\né‚£ä¹ˆæ ˆä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªå®¹å™¨å‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæ ˆä¸æ˜¯ç›´æ¥å†™å‡ºæ¥çš„ä»£ç ï¼Œè€Œæ˜¯å€Ÿç”¨äº†dequeè¿™ä¸ªå®¹å™¨ï¼Œè¿›è¡Œå°è£…åçš„ç»“æœã€‚\næ„æ€å°±æ˜¯ï¼Œæ ˆå…¶å®æ˜¯è§£ç”¨äº†åˆ«äººçš„ä»£ç ï¼\næ¯”å¦‚dequeæœ‰å¤´æ’å¤´åˆ ï¼Œå°¾æ’å°¾åˆ ã€‚è€Œæˆ‘ä»¬çš„æ ˆåªéœ€è¦å°¾æ’å°¾åˆ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åŒ…è£…ä¸€ä¸‹dequeï¼Œåªæä¾›å°¾æ’å°¾åˆ çš„å‡½æ•°ï¼Œä¸å°±æˆäº†æ ˆäº†ï¼Ÿ\n\n1.2 æ¨¡æ‹Ÿå®ç°ç›´æ¥è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹å¹²å·´å·´ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç ï¼\ntemplate&lt;class T, class Container = deque&lt;T&gt;&gt;class stack &#123;public:\tsize_t size()const &#123;\t\treturn _con.size();\t&#125;\t\tconst T&amp; top() &#123;\t\treturn _con.back();\t&#125;\tvoid push(const T&amp; val) &#123;\t\t_con.push_back(val);\t&#125;\tvoid pop() &#123;\t\t_con.pop_back();\t&#125;\tbool empty() &#123;\t\treturn _con.empty();\t&#125;private:\tContainer _con;&#125;;\n\nä»¥ä¸Šä¾¿æ˜¯æ ˆçš„æ¨¡æ‹Ÿå®ç°ä»£ç ï¼\nWhatï¼Ÿè¿™å°±ç»“æŸäº†ï¼Ÿâ€”â€”ç”šè‡³å†™çš„æ¯”æˆ‘ä»¬Cè¯­è¨€ç‰ˆæœ¬çš„æ ˆæ›´å°‘ï¼\n\næœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªContainerçš„å¯¹è±¡ _conï¼Œå†å€ŸåŠ©è¿™ä¸ªå¯¹è±¡çš„å‡½æ•°è¿›è¡Œå°è£…ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªæ ˆï¼\nå› ä¸ºæ¨¡æ¿é‡Œé¢é»˜è®¤ä¼ å…¥çš„æ˜¯dequeï¼Œæ‰€ä»¥è¿™é‡Œç”¨çš„ä¾¿æ˜¯dequeçš„å‡½æ•°äº†ã€‚è¿™å°±å¥½æ¯”å‡½æ•°ä¼ å…¥äº†ä¸€ä¸ªç¼ºçœå€¼ã€‚ä½ å¯ä»¥å°†dequeæ¢æˆå…¶ä»–æœ‰å°¾æ’å°¾åˆ å‡½æ•°çš„å®¹å™¨ï¼Œæ¯”å¦‚vector\næµ‹è¯•ä¸€ä¸‹ï¼Œè«å¾—é—®é¢˜ï¼\n\n\n2.queueå’Œæ ˆä¸åŒï¼Œé˜Ÿåˆ—éµå¾ªFIFOï¼Œå³å…ˆè¿›å…ˆå‡ºï¼ˆfirst in first outï¼‰\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åŒ…è£…ä¸€ä¸‹å®¹å™¨ï¼Œå³å¯å®Œæˆæ¨¡æ‹Ÿå®ç°\nstd::queuetemplate &lt;class T, class Container = deque&lt;T&gt; &gt; class queue;\n\n2.1 æ¨¡æ‹Ÿå®ç°template&lt;class T, class Container = deque&lt;T&gt;&gt;class queue &#123;public:\tsize_t size()const&#123;\t\treturn _con.size();\t&#125;\tconst T&amp; front()&#123;\t\treturn _con.front();\t&#125;\tconst T&amp; back()&#123;\t\treturn _con.back();\t&#125;\tvoid push(const T&amp; val)&#123;\t\t_con.push_back(val);\t&#125;\tvoid pop()&#123;\t\t_con.pop_front();\t&#125;\tbool empty()&#123;\t\treturn _con.empty();\t&#125;private:\tContainer _con;&#125;;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé˜Ÿåˆ—å°±ä¸èƒ½ç”¨vectoræ¥å½“ä½œå®¹å™¨è¾£ï¼å› ä¸ºvectorå¤´æ’åˆ çš„æ•ˆç‡å¾ˆä½ï¼Œéœ€è¦æŒªåŠ¨æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨listæ¥å½“ä½œå®¹å™¨\n\nå½“ç„¶ï¼Œä½ å¯ä»¥æŠŠå¤´æ’å¤´åˆ æ”¹æˆinsertå’Œeraseï¼Œä½†æ˜¯é‚£æ ·æ²¡æœ‰æ„ä¹‰ï¼Œä¾æ—§æ‹–æ…¢äº†æ•ˆç‡\nå› ä¸ºæ ˆå’Œé˜Ÿåˆ—å‹æ ¹ä¸æ”¯æŒè¿­ä»£å™¨ï¼Œè‡ªç„¶ä¹Ÿæ²¡æœ‰è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ï¼\n2.2 å…³äºqueueçš„frontå­¦ä¹ linuxè¯¾ç¨‹çš„æ—¶å€™ï¼Œçªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœqueueé‡Œé¢æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥è®¿é—®frontä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼Ÿä¼šå‡ºç°å¼‚å¸¸å—ï¼Ÿ\n#include&lt;stdio.h&gt;#include&lt;iostream&gt;#include&lt;queue&gt;using namespace std;int main()&#123;Â  Â  printf(&quot;hello vscode!\\n&quot;);Â  Â  queue&lt;int&gt; q;//ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯æ•°æ®æ— æ•ˆÂ  Â  cout &lt;&lt; q.front() &lt;&lt; endl;Â  Â  return 0;&#125;\n\nåœ¨linuxä¸‹ç”¨g++ç¼–è¯‘è¿è¡Œï¼Œå‘ç°è·å–åˆ°çš„å€¼æ˜¯0\n[muxue@bt-7274:~/git/test]$ ./testhello vscode!0\n\nç®€å•æ¦‚æ‹¬ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°æ®ï¼Œæ­¤æ—¶è°ƒç”¨frontæ¥å£ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è·å–åˆ°çš„æ•°æ®æ˜¯æ— æ•ˆçš„ã€‚\nä¸ªäººçŒœæµ‹ï¼Œè¿™é‡Œèƒ½å¦è·å–åˆ°æ•°æ®ä¹Ÿå’Œç¼–è¯‘å™¨çš„ä¼˜åŒ–æœ‰å…³ã€‚æ¯”å¦‚ç›¸åŒçš„ä»£ç ï¼Œåœ¨vs2019ä¸‹ï¼Œä¼šç›´æ¥æŠ¥asserté”™è¯¯ï¼\n\næ‰€ä»¥ï¼Œä¸ºäº†ä»£ç çš„å…¼å®¹æ€§ï¼Œè¯·ä¸¥æ ¼æ£€æŸ¥è°ƒç”¨frontçš„æ—¶å€™é˜Ÿåˆ—é‡Œé¢æœ‰æ²¡æœ‰æ•°æ®ï¼Œstackçš„topåŒç†\n\näº†è§£å®Œç›¸å¯¹ç®€å•çš„æ ˆå’Œé˜Ÿåˆ—ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥çœ‹çœ‹ä¼˜å…ˆçº§é˜Ÿåˆ—\n3.priority_queue ä¼˜å…ˆçº§é˜Ÿåˆ—ä¼˜å…ˆçº§é˜Ÿåˆ—å’ŒqueueåŒå±äºå¤´æ–‡ä»¶&lt;queue&gt;\ntemplate &lt;class T, class Container = vector&lt;T&gt;,  class Compare = less&lt;typename Container::value_type&gt; &gt; class priority_queue;\n\n\né‚£ä¹ˆå®ƒå’Œæ™®é€šçš„é˜Ÿåˆ—æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ\n\nä¼˜å…ˆçº§é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå †ï¼Œä¸”é»˜è®¤æ˜¯å¤§å †\n\nå¦‚æœä½ ä¸çŸ¥é“å †æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰Cè¯­è¨€æ•°æ®ç»“æ„çš„åšå®¢ã€é“¾æ¥ã€‘\n\nç®€å•è¯´æ¥ï¼Œå †çš„å †é¡¶ï¼ˆè¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªæ•°æ®ï¼‰ä¸€ç›´ä¿æŒç€æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ã€‚æ¯ä¸€æ¬¡æ’å…¥ã€åˆ é™¤æ“ä½œï¼Œéƒ½éœ€è¦å‘ä¸Šã€å‘ä¸‹é‡æ–°è°ƒæ•´å®¹å™¨å†…å…ƒç´ çš„ä½ç½®\n3.1 make_heapè¿™é‡Œç®€å•è¯´ä¸€ä¸‹å¦å¤–ä¸€ä¸ªå‡½æ•°make_heapï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡è¿­ä»£å™¨åŒºé—´ï¼Œå°†åŒºé—´å†…çš„æ•°æ®è°ƒæ•´ä¸ºä¸€ä¸ªå †ã€‚\n\nåœ¨æ–‡æ¡£ä»‹ç»é‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€è¡Œæåˆ°äº†ä¼˜å…ˆçº§é˜Ÿåˆ—å°±æ˜¯è‡ªåŠ¨è°ƒç”¨make_heapå‡½æ•°æ¥ç»´æŠ¤è‡ªå·±å †çš„å±æ€§çš„\n\n3.2 å‡½æ•°æ¥å£ä¼˜å…ˆçº§é˜Ÿåˆ—æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå®ƒæä¾›çš„å‡½æ•°ä¹Ÿå¾ˆå°‘\nä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„topå †é¡¶æŒ‡çš„æ˜¯å®¹å™¨ä¸­é¦–ä¸ªå…ƒç´ ï¼Œpopä¹Ÿæ˜¯ç§»é™¤å †é¡¶å…ƒç´ \n\n3.3 ä»¿å‡½æ•°\næ³¨æ„è¿™é‡Œå‡ºç°äº†ç¬¬ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼ŒCompare\nè¿™æ˜¯ä¸€ä¸ªä»¿å‡½æ•°ï¼Œå…¶å°±æ˜¯ä¸€ä¸ªç±»ï¼Œä½†æ˜¯ä»¿ç…§äº†å‡½æ•°çš„è°ƒç”¨æ–¹å¼\næƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦é‡è½½()æ“ä½œç¬¦\n//ä»¿å‡½æ•°ï¼Œé‡è½½ï¼ˆï¼‰æ“ä½œç¬¦\ttemplate&lt;class T&gt;\tstruct less &#123;\t\tbool operator()(const T&amp; a, const T&amp; b)const\t\t&#123;\t\t\treturn a &lt; b;\t\t&#125;\t&#125;;\t//å¤§äºæ¯”è¾ƒ\ttemplate&lt;class T&gt;\tstruct greater&#123;\t\tbool operator()(const T&amp; a, const T&amp; b)const\t\t&#123;\t\t\treturn a &gt; b;\t\t&#125;\t&#125;;\n\næ¯”å¦‚è¿™é‡Œçš„lesså’Œgreaterå°±æ˜¯ä¸¤ä¸ªä»¿å‡½æ•°ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—éœ€è¦ç”¨å®ƒæ¥è¿›è¡Œæ¯”è¾ƒã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿåœ¨å¤§å †å’Œå°å †ç›´æ¥è¿›è¡Œåˆ‡æ¢ã€‚\nå®ƒä»¬çš„ä½¿ç”¨æ–¹å¼å’Œå‡½æ•°æ˜¯ä¸€æ ·çš„ï¼ä¸è¿‡åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå¯¹è±¡\nless func;func(1,2);\n\nåº“å‡½æ•°ä¸­çš„lesså’Œgreateréƒ½åœ¨&lt;functional&gt;è¿™ä¸ªå¤´æ–‡ä»¶ä¸­\n\n\nstdåº“ä¸­ä¼˜å…ˆçº§é˜Ÿåˆ—é»˜è®¤ä¼ çš„lesså°äºæ¯”è¾ƒï¼Œä¸ºå¤§å †ï¼\næˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨ä¼ å…¥greaterï¼Œå³å¯å˜æˆå°å †\n\n3.4 æ¨¡æ‹Ÿå®ç°åœ¨3.3ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°å‡ºäº†åº“å‡½æ•°ä¸­çš„lesså’Œgreaterè¿™ä¸¤ä¸ªä»¿å‡½æ•°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦åŒ…è£…ä¸€ä¸‹ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ¥å£ï¼Œå³å¯ä½¿ç”¨ï¼\ntemplate &lt;class T, class Container = vector&lt;T&gt;,class Compare = less&lt;T&gt; &gt;\tclass priority_queue\t&#123;\tpublic:\t\tsize_t size()const &#123;\t\t\treturn _con.size();\t\t&#125;\t\tconst T&amp; top() &#123;\t\t\treturn _con[0];\t\t&#125;\t\tbool empty() &#123;\t\t\treturn _con.empty();\t\t&#125;\t\t//å‘ä¸Šè°ƒæ•´\t\tvoid AdjustUp(size_t child)\t\t&#123;\t\t\tCompare comFunc;\t\t\twhile (child &gt; 0)\t\t\t&#123;\t\t\t\tsize_t parent = (child - 1) / 2;\t\t\t\tif (comFunc(_con[parent],_con[child]))//å°å †ï¼Œå°çš„æ•°æ®å¾€ä¸Šè°ƒ\t\t\t\t&#123;\t\t\t\t\tstd::swap(_con[parent], _con[child]);\t\t\t\t\tchild = parent;\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\treturn;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125;\t\t//å‘ä¸‹è°ƒæ•´\t\tvoid AdjustDown(size_t parent)\t\t&#123;\t\t\tCompare comFunc;\t\t\tsize_t child = parent * 2 + 1;//å·¦å­©å­\t\t\twhile (child &lt; _con.size())\t\t\t&#123;\t\t\t\t//æ‰¾å·¦å³å­©å­ä¸­å°çš„é‚£ä¸€ä¸ª\t\t\t\tif (child + 1 &lt; _con.size() &amp;&amp; comFunc(_con[child], _con[child + 1]))\t\t\t\t&#123;//å¦‚æœå·¦å­©å­å¤§äºå³å­©å­ï¼Œåˆ™é€‰æ‹©å³å­©å­\t\t\t\t\tchild++;\t\t\t\t&#125;\t\t\t\tif (comFunc(_con[parent],_con[child]))\t\t\t\t&#123;\t\t\t\t\tstd::swap(_con[parent], _con[child]);\t\t\t\t\tparent = child;\t\t\t\t\tchild = parent * 2 + 1;\t\t\t\t&#125;\t\t\t\telse\t\t\t\t&#123;\t\t\t\t\treturn;\t\t\t\t&#125;\t\t\t&#125;\t\t&#125;\t\t//å› ä¸ºæ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè°ƒæ•´\t\t//é»˜è®¤æƒ…å†µä¸‹ç¬¬ä¸€ä¸ªå…ƒç´ å§‹ç»ˆæ˜¯æœ€å¤§å…ƒç´ \t\tvoid push(const T&amp; val) \t\t&#123;\t\t\t_con.push_back(val);\t\t\tAdjustUp(_con.size() - 1);\t\t&#125;\t\tvoid pop() \t\t&#123;\t\t\tassert(!_con.empty());\t\t\tswap(_con[0], _con[_con.size() - 1]);\t\t\t_con.pop_back();\t\t\tAdjustDown(0);\t\t&#125;\t\t\tprivate:\t\tContainer _con;\t&#125;;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„ä¾¿æ˜¯adjustdown/upè¿™ä¸¤ä¸ªç”¨æ¥ç»´æŒå †å±æ€§çš„è°ƒæ•´å‡½æ•°ï¼Œä½ å¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„åšå®¢ï¼Œé‡Œé¢æœ‰å…³äºè¿™éƒ¨åˆ†çš„è¯¦ç»†è§£é‡Šï¼å›åˆ°ä¸Šé¢\nå…ˆæ¥æµ‹è¯•ä¸€ä¸‹é»˜è®¤å¤§å †çš„å±æ€§\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°å‡ºæ¥çš„æ•°æ®æ˜¯æŒ‰ä»å¤§åˆ°å°é¡ºåºå­˜æ”¾çš„ï¼\nå¦‚æœæˆ‘ä»¬æ˜¾ç¤ºä¼ å…¥greatreä»¿å‡½æ•°ï¼Œå°±ä¼šå˜æˆä»å°åˆ°å¤§\n\nåŒæ—¶ï¼Œå³ä¾¿æˆ‘ä»¬popäº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä¹Ÿä¸ä¼šå½±å“å †çš„å±æ€§\n\nä¼˜å…ˆçº§é˜Ÿåˆ—åœ¨ä¸€éƒ¨åˆ†åœ°æ–¹å¯ä»¥ç”¨äºå¸®æˆ‘ä»¬æ‰¾åˆ°ä¸€æ®µæ•°æ®ä¸­çš„topKå’Œç¬¬nä¸ªæœ€å¤§&#x2F;å°çš„æ•°æ®\næ¯”å¦‚ä¸‹é¢è¿™é“leetcode OJé¢˜ç›®215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ \n\næˆ‘ä»¬åªéœ€è¦popæ‰å‰é¢çš„K-1ä¸ªå…ƒç´ ï¼Œè¿™æ—¶å€™çš„å †é¡¶å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç¬¬Kä¸ªæœ€å¤§å€¼\n\n4.dequeå‰é¢å·²ç»æåˆ°äº†dequeè¿™ä¸ªå®¹å™¨ï¼Œå®ƒæ‹¥æœ‰çš„åº“å‡½æ•°å’Œvectorå¾ˆç›¸ä¼¼ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å…³æ³¨å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå®¹å™¨ï¼Œè€Œæ˜¯æ¥è°ˆè°ˆè¿™ä¸ªâ€œåŒç«¯é˜Ÿåˆ—â€ç›¸æ¯”äºvector/listæœ‰æ²¡æœ‰ä»€ä¹ˆä¼˜åŠ¿\nstd::dequetemplate &lt; class T, class Alloc = allocator&lt;T&gt; &gt; class deque;\n\n4.1å­˜å‚¨ç»“æ„dequeæœ€ç‰¹æ®Šçš„å°±æ˜¯å®ƒçš„å­˜å‚¨ç»“æ„äº†ã€‚å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªè¿ç»­çš„ç»“æ„ï¼Œä¹Ÿä¸åƒé“¾è¡¨ä¸€æ ·æ¯ä¸ªæ•°æ®éƒ½æœ‰è‡ªå·±çš„å•ç‹¬èŠ‚ç‚¹\nè¿™ä¸ªæ˜¯ç™¾åº¦ç™¾ç§‘ä¸Šæ‰¾åˆ°çš„ä¸€å¼ å›¾ç‰‡\n\n\nhttps://www.cnblogs.com/yifengs/p/15190416.html\n\nå…¶å®dequeæœ‰ç‚¹ç±»ä¼¼äºŒç»´æ•°ç»„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆæŒ‡å‘é˜Ÿåˆ—å¤´ï¼Œä¸€ä¸ªå°¾æŒ‡é’ˆæŒ‡å‘é˜Ÿåˆ—å°¾éƒ¨ã€‚ä¸»æ•°ç»„â€œä¸­æ§å™¨â€å­˜æ”¾çš„åˆ™æ˜¯è¿™äº›æ•°ç»„çš„æŒ‡é’ˆã€‚æ³¨ï¼šæ¯ä¸€ä¸ªæ•°ç»„çš„å®¹é‡å¤§å°éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å­˜æ”¾åœ¨ä¸­é—´çš„æ•°ç»„ä¸€å®šæ˜¯æ»¡çš„ï¼\n\nè¿™æ ·æˆ‘ä»¬å°±é¿å…äº†listèŠ‚ç‚¹åˆ†æ•£ï¼Œéœ€è¦å¤šæ¬¡å¼€ç©ºé—´ï¼Œæ— æ³•éšæœºè®¿é—®çš„ç¼ºé™·ï¼›åˆå¯ä»¥çµæ´»å¿«é€Ÿåœ°è¿›è¡Œå¤´æ’å¤´åˆ æ“ä½œï¼Œè€Œä¸éœ€è¦æŒªåŠ¨æ•°æ®ã€‚\nå½“ç„¶ï¼Œdequeçš„éšæœºè®¿é—®æ€§èƒ½è‚¯å®šä¸å¦‚æ•°æ®è¿ç»­å­˜å‚¨çš„vectorï¼Œå…¶æ›´é€‚åˆä¸‹é¢çš„åœºæ™¯ï¼š\n\néœ€è¦é«˜æ€§èƒ½çš„å¤´æ’å¤´åˆ ï¼Œå°¾æ’å°¾åˆ \nå¶å°”éœ€è¦è¿›è¡Œéšæœºè®¿é—®\n\nç»“è¯­å…³äºæ ˆå’Œé˜Ÿåˆ—çš„éƒ¨åˆ†åˆ°è¿™é‡Œå°±ç»“æŸè¾£ï¼\næˆ‘ä»¬è¿˜è®¤è¯†äº†åŒç«¯é˜Ÿåˆ—dequeï¼Œä»¥åŠè®©å…¶ä½œä¸ºå®¹å™¨çš„æ¨¡æ‹Ÿå®ç°æ“ä½œ\n\næœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºæå‡ºï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘STLï¼švector","url":"/posts/3664653329/","content":"STLçš„ç¬¬äºŒç«™ï¼Œä¾¿æ˜¯vectoräº†ã€‚\n\n\nå¯¹äºå­¦ä¹ STLï¼Œæœ‰ä¸€ä¸ªéå¸¸å¤§çš„å¥½å¤„ä¾¿æ˜¯ï¼Œå®ƒä»¬æœ‰å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç›¸é€šçš„ï¼è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„ä¸€å¤§å¥½å¤„ï¼šèƒŒåçš„å‡½æ•°å®ç°å¯èƒ½ä¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ–¹å¼ç›¸åŒã€‚\n1.ç®€å•äº†è§£vector\nhttps://m.cplusplus.com/reference/vector/vector/\n\nè€æ ·å­ï¼Œæ‰“å¼€æˆ‘ä»¬çš„cplusplusâ€”â€”ç„¶åæƒŠå¥‡çš„å‘ç°ï¼Œå®ƒæ¢UIäº†ï¼ç»ˆäºä¸å†æ˜¯é‚£ä¸ª2000å¹´åˆçš„æ¨¡æ ·äº†ï¼ˆè™½ç„¶è¿™å’Œæˆ‘ä»¬çš„ä½¿ç”¨æ²¡å•¥å…³ç³»ï¼‰\n\nä¸æ‘¸é±¼äº†ï¼Œæ¥çœ‹çœ‹vectorç©¶ç«Ÿæ˜¯ä½•æ–¹ç¥åœ£â€”â€”å…¶å®ä»–å°±æ˜¯ä¸€ä¸ªé¡ºåºè¡¨\nå’Œstringä¸åŒçš„æ˜¯ï¼Œvectoræœ‰æ¨¡æ¿å‚æ•°ï¼Œå¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å†…å®¹ã€‚intã€doubleã€charã€ç”šè‡³stringã€‚\nè¿™ä¸€ç‚¹åœ¨cplusplusç½‘ç«™ä¸Šçš„ç¬¬ä¸€è¡Œä¾¿å‘Šè¯‰äº†æˆ‘ä»¬\n\ntemplate &lt; class T, class Alloc = allocator&lt;T&gt; &gt; class vector; // generic template\n\nä½ è¿˜å¯ä»¥çœ‹åˆ°ï¼Œæ ‡é¢˜ä¸‹æ–¹ç»™äº†ä¸€ä¸ªè¿™æ ·çš„ç±»æ¨¡æ¿å®šä¹‰ï¼Œå…¶ä¸­Tä»£è¡¨çš„æ˜¯å­˜æ”¾æ•°æ®ç±»å‹ï¼Œallocator&lt;T&gt;ä¹Ÿæ˜¯STLåº“ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå‘å †ç”³è¯·ç©ºé—´ï¼ˆç±»ä¼¼ä¸€ä¸ªå†…å­˜æ± ï¼‰å¯ä»¥æé«˜è®¿é—®çš„æ•ˆç‡\nå‰æœŸçš„å­¦ä¹ æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“allocator&lt;T&gt;æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œåªè¦çŸ¥é“å®ƒæœ‰è¿™ä¸ªåŠŸèƒ½å°±okäº†ã€‚\n\n1.1å‡½æ•°æ¥å£å¾€ä¸‹æ»‘ï¼Œä½ ä¼šå‘ç°vectorçš„å‡½æ•°æ¥å£ï¼Œæˆ‘ä»¬å¾ˆå¤šéƒ½å·²ç»å­¦è¿‡äº†ï¼\n\nè¿™äº›å‡½æ•°çš„æ“ä½œå’Œstringç±»å‹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸å†è®²è§£äº†ï¼\n\nå¯¹æ¯”å‘ç°ï¼Œå…¶å®vectorå¤šå‡ºæ¥çš„å‡½æ•°å¹¶ä¸å¤šï¼Œè¿™ä¾¿æ˜¯å­¦ä¹ STLçš„å¥½å¤„ï¼\n\n2.ä½¿ç”¨vectorå› ä¸ºå¤§éƒ¨åˆ†å‡½æ•°çš„åŠŸèƒ½ã€æ“ä½œå’Œstringä¸€æ ·ï¼Œæœ‰é—®é¢˜å¯ä»¥å»çœ‹çœ‹æˆ‘ä¹‹å‰stringçš„åšå®¢\n2.1æ„é€ \nå¯¹äºvectorè€Œè¨€ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ„é€ å‡½æ•°æ˜¯ä¸‹é¢è¿™å‡ ä¸ª\n\nè¿™é‡Œè¯´è¯´æœ€åä¸€ä¸ªï¼Œåˆ©ç”¨è¿­ä»£å™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ƒçš„ä½¿ç”¨å¦‚ä¸‹\nstd::string s1(&quot;hello&quot;);vector&lt;char&gt; v2(s1.begin(),s1.end());for (auto ch : v2)&#123;\tcout &lt;&lt; ch &lt;&lt; &quot; &quot;;&#125;cout &lt;&lt; endl;\n\nå½“æˆ‘ä»¬å·²ç»æœ‰ä¸€ä¸ªå…¶ä»–çš„æ”¯æŒè¿­ä»£å™¨çš„å®¹å™¨ä¹‹åï¼Œä¾¿å¯ä»¥ä½¿ç”¨è¯¥å®¹å™¨çš„è¿­ä»£å™¨åˆå§‹åŒ–ä¸€ä¸ªvector\nè¿™é‡Œçš„åŒºé—´å¯ä»¥è‡ªè¡Œæ§åˆ¶ï¼Œå¯¹åº”çš„åˆå§‹åŒ–çš„å†…å®¹ä¹Ÿä¼šæœ‰æ‰€ä¸åŒ\n\n\n2.2è¿­ä»£å™¨vectorçš„è¿­ä»£å™¨å’ŒstringåŸºæœ¬ç›¸åŒï¼Œéƒ½æ‹¥æœ‰æ­£å‘å’Œåå‘ä¸¤ç§æ–¹å¼\n\n\n\nè¿­ä»£å™¨\nè¯´æ˜\n\n\n\nbegin+end\nè·å–ç¬¬ä¸€ä¸ªæ•°æ®ä½ç½®iterator&#x2F;const_iteratorï¼Œ è·å–æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®iterator&#x2F;const_iterator\n\n\nrbegin+rend\nè·å–æœ€åä¸€ä¸ªæ•°æ®ä½ç½®çš„reverse_iteratorï¼Œè·å–ç¬¬ä¸€ä¸ªæ•°æ®å‰ä¸€ä¸ªä½ç½®çš„ reverse_iterator\n\n\n\nvector&lt;int&gt;::iterator it = v.begin(); while (it != v.end()) &#123;     cout &lt;&lt; *it &lt;&lt; &quot; &quot;;     ++it; &#125;\n\nåˆ©ç”¨è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°vectorçš„å†…å®¹\n2.3è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜åœ¨vectorä¸­çš„ä¸€äº›æ“ä½œä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œå³è¿­ä»£å™¨æŒ‡å‘çš„å†…å®¹å«ä¹‰å˜äº†ã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼š\n\nå› ä¸ºeraseå¯¼è‡´çš„æ•°æ®æ“¦é™¤\næ‰©å®¹å¯¼è‡´çš„åŸæœ‰ç©ºé—´è¢«é‡Šæ”¾ï¼ˆæ­¤æ—¶è¿­ä»£å™¨ä¾æ—§æŒ‡å‘åŸæœ‰ç©ºé—´ï¼‰\næ‰€æœ‰ä¼šå¯¼è‡´æ‰©å®¹çš„æ“ä½œ\n\nè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å€ŸåŠ©å‡½æ•°çš„è¿”å›å€¼å¯¹itè¿›è¡Œé‡æ–°èµ‹å€¼ï¼Œæ¯”å¦‚ä¸‹å›¾æ˜¯eraseå’Œinsertçš„è¿”å›å‚æ•°\n\n\næˆ‘ä»¬åªéœ€è¦åœ¨ä½¿ç”¨è¿­ä»£å™¨éå†çš„æ—¶å€™ç”¨itæ¥æ¥å—è¿”å›å€¼ï¼ˆæ›´æ–°è¿­ä»£å™¨ï¼‰å°±å¯ä»¥è§„é¿è¿™ä¸ªé—®é¢˜\nvoid test02()&#123;    vector&lt;int&gt; v1;    v1.push_back(1);    v1.push_back(2);    v1.push_back(3);    v1.push_back(4);    v1.push_back(5);    v1.push_back(6);    v1.push_back(7);    vector&lt;int&gt;::iterator it = v1.begin();    while (it != v1.end())    &#123;        if (*it % 2 == 0)//åœ¨å¶æ•°ä¹‹å‰æ’å…¥å†…å®¹        &#123;            //ä¸è¿™æ ·å†™ä¼šå‡ºç°itçš„å«ä¹‰å˜åŒ–è€Œå¯¼è‡´çš„æ­»å¾ªç¯            //ç¨‹åºå†…å‡ºç°äº†æ‰©å®¹ï¼ŒitåŸå…ˆæŒ‡å‘çš„ç©ºé—´å·²ç»è¢«é‡Šæ”¾            it = v1.insert(it, 99);\t            it++;        &#125;        it++;    &#125;    for (auto ch : v1)    &#123;        cout &lt;&lt; ch &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; endl;&#125;\n\n\n\nåº“é‡Œé¢çš„å…¶ä»–å‡½æ•°å°±ä¸è¿›è¡Œè®²è§£å•¦ï¼Œæœ‰é—®é¢˜çš„å¯ä»¥å»çœ‹çœ‹ä¹‹å‰stringçš„åšå®¢ã€‚å½“ç„¶æœ€å¥½çš„å­¦ä¹ åŠæ³•å°±æ˜¯ä¾æ®cplusplusä¸Šé¢çš„å‡½æ•°å®šä¹‰ï¼Œå°è¯•è‡ªå·±å¼„æ˜ç™½è¿™äº›åº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ã€‚\n\n3.æ¨¡æ‹Ÿå®ç°\nä»£ç è¯¦è§æˆ‘çš„giteeä»“åº“ã€é“¾æ¥ã€‘STL-Vectorçš„æºç ä¹Ÿåœ¨é‡Œé¢ï¼\n\nå’Œstringç±»ä¸åŒçš„æ˜¯ï¼Œåœ¨vectoré‡Œé¢å¹¶ä¸æ˜¯ç”¨sizeå’Œcapacityè¿™ä¸¤ä¸ªæˆå‘˜å˜é‡æ¥ç¡®è®¤æœ‰æ•ˆé•¿åº¦å’Œå®¹é‡çš„ã€‚\né€šè¿‡æŸ¥çœ‹stlæºç å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä½¿ç”¨äº†3ä¸ªè¿­ä»£å™¨è¿›è¡Œæ ‡è¯†\n\nprivate:    iterator _start;//æŒ‡å‘å¼€å¤´ï¼ˆå­˜æ”¾æ•°æ®ï¼‰    iterator _finish;//æŒ‡å‘ç»“å°¾çš„ä¸‹ä¸€ä¸ª    iterator _endofstorage;//æŒ‡å‘ç©ºé—´å°¾éƒ¨\n\näº†è§£ç»“æ„åï¼Œä¾¿å¯ä»¥å…ˆæŠŠæ— å‚æ„é€ å’Œææ„å‡½æ•°å†™å‡ºæ¥å¾…ç”¨\n//æ— å‚æ„é€ å‡½æ•°vector()    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123; &#125;//ææ„~vector()&#123;    if (_start)    &#123;        delete[] _start;        _start = _finish = _endofstorage = nullptr;    &#125;&#125;\n\né‚£ä¹ˆè¦æ€ä¹ˆçŸ¥é“sizeå’Œcapacityçš„å¤§å°å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œé€šè¿‡æŒ‡é’ˆç›¸å‡å³å¯å¾—å‡ºç»“æœ\nsize_t size()const&#123;    return _finish - _start;&#125;size_t capacity()const&#123;    return _endofstorage - _start;&#125;\n\n3.0 è¿­ä»£å™¨åœ¨æ¨¡æ‹Ÿå®ç°ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±è¦ç”¨typdefå®šä¹‰ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œæ–¹ä¾¿åé¢çš„ä½¿ç”¨\ntypedef T* iterator;typedef const T* const_iterator;iterator begin()&#123;    return _start;&#125;iterator end() &#123;    return _finish;&#125;const_iterator begin()const &#123;    return _start;&#125;const_iterator end()const &#123;    return _finish;&#125;\n\n3.1 reserve&#x2F;resizeç°åœ¨æˆ‘ä»¬çš„vectorå†…å®¹è¿˜æ˜¯ç©ºç©ºçš„ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®ç°ä¸€ä¸‹push_backå‡½æ•°ï¼Œå¯ä»¥åŸºæœ¬æ“ä½œä¸€ä¸‹æˆ‘ä»¬çš„æ•°æ®ã€‚ä½†æ²¡æœ‰æ„é€ å‡½æ•°å»ç”³è¯·ç©ºé—´ï¼Œå“ªæ¥çš„ç›®æ ‡ç»™æˆ‘ä»¬æ“ä½œå‘¢ï¼Ÿ\n\nè¿™æ—¶å€™å°±éœ€è¦å…ˆå®ç°reserveæ¥æ‰©å®¹å’Œè·å–ç©ºé—´äº†ï¼\n\nåœ¨æ‰©å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è·å–åŸæœ‰æ•°æ®çš„é•¿åº¦ï¼Œå†newå°†ç©ºé—´æ•´å‡ºæ¥ï¼Œå¹¶ç»™_startã€‚æ“ä½œç»“æŸåï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹_finish å’Œ_endofstorageï¼Œå¦åˆ™è¿™ä¸¤ä¸ªè¿­ä»£å™¨æŒ‡å‘çš„è¿˜æ˜¯åŸæœ‰ç©ºé—´ï¼Œå‡ºç°äº†è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜\nvoid reserve(size_t n)//æ‰©å®¹&#123;    size_t sz = size();//è®¡ç®—åŸæœ‰çš„é•¿åº¦    if( n &gt; capacity())    &#123;        T* tmp = new T[n];        if (_start) //åªæœ‰_startä¸ä¸ºç©ºæ‰è¿›è¡Œæ‹·è´æ“ä½œ        &#123;            //memcpyæ˜¯æµ…æ‹·è´ï¼Œå½“é‡åˆ°vectorç±»å‹æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼ˆæ¯”å¦‚stringå’Œvector&lt;T&gt;è¿™ç§åŒ…å«å †åŒºå†…å­˜çš„ç±»å‹ï¼‰            //æµ…æ‹·è´ä¼šå¤±æ•ˆï¼Œstringçš„æˆå‘˜å˜é‡æ‹·è´è¿‡å»äº†ï¼Œä½†æ˜¯æˆå‘˜å˜é‡æŒ‡å‘çš„å †åŒºç©ºé—´è¢«é‡Šæ”¾ï¼Œå‡ºç°é‡æŒ‡é’ˆ            //memcpy(tmp, _start, size());            for (size_t i = 0; i &lt; size(); i++)            &#123;                tmp[i] = _start[i];//æ‰‹åŠ¨èµ‹å€¼ï¼Œå½“æˆå‘˜æ˜¯è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨=é‡è½½            &#125;            delete[] _start;//é‡Šæ”¾åŸæœ‰ç©ºé—´        &#125;        _start = tmp;    &#125;    //è¿™é‡Œå¿…é¡»è¦å…ˆè®¡ç®—szï¼Œå¦‚æœåœ¨è¿™é‡Œç›´æ¥è°ƒç”¨szçš„è¯ï¼šfinishå·²ç»æ˜¯é‡æŒ‡é’ˆäº†ï¼Œfinish-startä¼šå‡ºç°é—®é¢˜    _finish = _start + sz;    _endofstorage = _start + n;&#125;\n\nå…³äºä¸ºä½•æ‹·è´å†…å®¹çš„æ—¶å€™éœ€è¦ç”¨&#x3D;è€Œä¸èƒ½ç›´æ¥memcpyï¼Œåæ–‡ä¼šæåˆ°ã€‚\nresizeå’Œreserveå”¯ä¸€ä¸åŒçš„ä¸€ç‚¹ï¼Œå°±æ˜¯reserveä¼šä¿®æ”¹åŸæœ‰ç©ºé—´çš„æ•°æ®ï¼Œå…¶ä½™çš„å®ç°æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥è¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥å¤ç”¨reserveè¿›è¡Œæ‰©å®¹å³å¯\n//åœ¨C++ä¸­ï¼Œå†…ç½®ç±»å‹ä¹Ÿæœ‰ä¸€ä¸ªâ€œæ„é€ å‡½æ•°â€//è¿™æ˜¯ä¸ºäº†æ›´å¥½çš„æ”¯æŒæ¨¡æ¿æ“ä½œvoid resize(size_t n,T val = T())&#123;    if (n &gt; capacity())    &#123;        reserve(n);    &#125;    if (n &gt; size())    &#123;        //åˆå§‹åŒ–        while (_finish &lt; _start + n)        &#123;            *_finish = val;            ++_finish;        &#125;    &#125;    else    &#123;        _finish = _start + n;    &#125;&#125;\n\næ³¨æ„ï¼ŒT()çš„å«ä¹‰æ˜¯ç”¨æ¨¡æ¿å‚æ•°çš„æ„é€ å‡½æ•°ä½œä¸ºç¼ºçœå€¼ã€‚åœ¨C++ä¸­ï¼Œå†…ç½®ç±»å‹ä¹Ÿå¯ä»¥è¿›è¡Œè¿™ä¸ªæ“ä½œ\n\nå½“ä½ ä¸è¿›è¡Œä¼ å€¼çš„æ—¶å€™ï¼Œintç±»å‹é»˜è®¤æ˜¯0\n\n3.2æ’å…¥&#x2F;åˆ é™¤ç©ºé—´æ‹¿åˆ°äº†ï¼Œç°åœ¨å°±å¯ä»¥å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œæ’å…¥æ“ä½œäº†\nvoid push_back(const T&amp; x)&#123;    if (_finish == _endofstorage)     &#123;        size_t newcapa = capacity() == 0 ? 4 : capacity() * 2;        reserve(newcapa);    &#125;    *_finish = x;    _finish++;&#125;void pop_back()&#123;    if (_finish &gt; _start)     &#123;\t\t_finish--;\t&#125;&#125;\n\nç®€å•æµ‹è¯•ä¸€ä¸‹æ’å…¥å’Œåˆ é™¤åŠŸèƒ½ï¼Œæ²¡å•¥é—®é¢˜\n\næ›´å¥½çš„åŠæ³•ï¼Œå…¶å®æ˜¯å†™å¥½insertå’Œearseï¼Œç„¶åå°¾æ’å°¾åˆ çš„æ—¶å€™ç›´æ¥å¤ç”¨å³å¯\n//posä½ç½®æ’å…¥valiterator insert(iterator pos, const T x)&#123;    assert(pos &gt;= _start &amp;&amp; pos &lt;= _finish);    //assert(pos &gt;= _start &amp;&amp; pos &lt;= _endofstorage);    if (_finish == _endofstorage)    &#123;        size_t n = pos - _start;        size_t newcapa = capacity() == 0 ? 4 : capacity() * 2;        reserve(newcapa);        pos = _start + n;    &#125;    iterator end = _finish - 1;    while (end &gt;= pos)    &#123;        *(end + 1) = *end;        end--;    &#125;    *pos = x;    _finish++;    return pos;&#125;//åˆ é™¤æ•°æ®iterator erase(iterator pos)&#123;    assert(pos &gt;= _start &amp;&amp; pos &lt;= _finish);    iterator tmp = pos;    iterator end = _finish - 1;    while (tmp &lt; end)    &#123;        *tmp = *(tmp + 1);        tmp++;    &#125;    _finish--;    return pos;&#125;\n\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬åªéœ€è¦æ“ä½œä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æ‹…å¿ƒç§»åŠ¨å¤šä¸ªæ•°æ®å¯èƒ½å¯¼è‡´çš„é—®é¢˜ï¼Œäº‹æƒ…ä¹Ÿå˜å¾—ç®€å•å¤šäº†\nvoid push_back(const T&amp; x)&#123;    insert(end(),x);&#125;void pop_back()&#123;    erase(end()-1);&#125;\n\nå°¾æ’å°¾åˆ æ“ä½œç›´æ¥å¤ç”¨æºç å³å¯\n3.3é‡è½½[ ]æ“ä½œç¬¦å› ä¸ºvectoræœ¬èº«åªæ˜¯ä¸ªé¡ºåºè¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å®ƒçš„å¯¹è±¡é‡è½½ä¸€ä¸‹[]æ“ä½œç¬¦ï¼Œè¿™æ ·å°±èƒ½å’Œæ•°ç»„ä¸€æ ·å»è®¿é—®vectorçš„æ•°æ®\n//é‡è½½[]æ“ä½œç¬¦T&amp; operator[](size_t pos)&#123;    assert(pos &lt; size());    return _start[pos];&#125;const T&amp; operator[](size_t pos) const&#123;    assert(pos &lt; size());    return _start[pos];&#125;\n\n\nå…³äºæ„é€ å‡½æ•°ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹è¿­ä»£å™¨åŒºé—´çš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºåé¢çš„æ‹·è´æ„é€ æˆ‘ä»¬ä¼šç”¨ä¸Šå®ƒã€‚\n3.4è¿­ä»£å™¨åŒºé—´æ„é€ &#x2F;æ‹·è´&#x2F;èµ‹å€¼åº“é‡Œé¢å…³äºè¯¥æ„é€ å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹\ntemplate &lt;class InputIterator&gt;   vector (InputIterator first, InputIterator last,           const allocator_type&amp; alloc = allocator_type());\n\nå› ä¸ºè¿™æ—¶å€™æˆ‘çš„æ°´å¹³è¿˜å¾ˆåƒï¼Œå°±æš‚ä¸”ä¸ç®¡è¿™ä¸ª allocatoräº†\nè¯¥å‡½æ•°éœ€è¦æˆ‘ä»¬ä¼ å‚ä¸¤ä¸ªè¿­ä»£å™¨ï¼Œå› ä¸ºæˆ‘ä»¬åº•å±‚å°±æ˜¯ç”¨æŒ‡é’ˆå®ç°çš„ï¼Œæ‰€ä»¥ç›´æ¥è§£å¼•ç”¨ç„¶åå°†å†…å®¹å°¾æ’å³å¯ï¼ˆå¦‚æœæ²¡æœ‰ç©ºé—´ï¼Œå°¾æ’ä¼šè°ƒç”¨reserveæ¥è·å–ç©ºé—´&#x2F;æ‰©å®¹ï¼‰\ntemplate &lt;class InputIterator&gt;vector(InputIterator first, InputIterator last)    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    while (first != last)    &#123;        push_back(*first);        first++;    &#125;&#125;\n\næœ‰äº†è¿™ä¸ªæ„é€ å‡½æ•°åï¼Œæ‹·è´æ„é€ å°±å¾ˆå®¹æ˜“äº†ï¼\nvoid swap(vector&lt;T&gt;&amp; v)&#123;    std::swap(_start, v._start);    std::swap(_finish, v._finish);    std::swap(_endofstorage, v._endofstorage);&#125;//æ‹·è´æ„é€ vector(const vector&lt;T&gt;&amp; v)    :_start(nullptr),_finish(nullptr),_endofstorage(nullptr)&#123;    vector&lt;T&gt; tmp(v.begin(), v.end());    swap(tmp);&#125;\n\nåˆ©ç”¨è¿­ä»£å™¨åŒºé—´æ„é€ å‡ºæ¥ä¸€ä¸ªtmpå¯¹è±¡ï¼Œå†å°†è¯¥å¯¹è±¡å’Œæˆ‘ä»¬æœ¬èº«è¿›è¡Œäº¤æ¢å³å¯ï¼\n\nä½ å¯èƒ½ä¼šé—®ï¼šæ¬¸ä½ è¿™æ ·äº¤æ¢äº†ï¼ŒåŸæœ¬çš„å†…å®¹å²‚ä¸æ˜¯æ²¡äººç®¡äº†ï¼Œæœ‰å†…å­˜æ³„æ¼å•Šï¼\n\nå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨åº“å‡½æ•°é‡Œé¢çš„swapäº¤æ¢äº†äºŒè€…çš„æˆå‘˜å˜é‡ï¼Œåœ¨æ‹·è´æ„é€ å‡½æ•°å®Œæˆä¹‹åï¼Œtmpç”Ÿå‘½å‘¨æœŸç»“æŸï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°å¤„ç†æ‰æˆ‘ä»¬çš„æ•°æ®ï¼\nè¿™å°±æ˜¯è®©åˆ«äººå¸®ä½ å¹²æ´»ğŸ˜‚\nèµ‹å€¼é‡è½½å°±è·Ÿç®€å•äº†ï¼Œæˆ‘ä»¬è¿tmpå˜é‡éƒ½ä¸éœ€è¦å¼„ï¼Œç›´æ¥ä½¿ç”¨ä¼ å€¼ï¼ˆä¼šè‡ªåŠ¨è°ƒç”¨æ‹·è´æ„é€ ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼‰å°±å¯ä»¥å•¦ï¼\n//èµ‹å€¼é‡è½½ï¼ˆvæ²¡æœ‰å¼•ç”¨ï¼Œæ‹·è´æ„é€ ä¸€ä¸ªæ–°çš„ä¼ å‚è¿‡æ¥ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨å†æ„å»ºä¸€ä¸ªtmpï¼‰vector&lt;T&gt;&amp; operator=(vector&lt;T&gt; v)&#123;    swap(v);    return *this;&#125;\n\n3.5ç”¨nä¸ªvalueè¿›è¡Œæ„é€ åœ¨åº“ä¸­çš„vectorè¿˜æœ‰ä¸€ä¸ªè¿™æ ·çš„æ„é€ å‡½æ•°ï¼Œç”¨nä¸ªvalè¿›è¡Œåˆå§‹åŒ–\n\nå› ä¸ºæˆ‘ä»¬ä¹‹å‰å·²ç»å®ç°äº†ä¸€ä¸ªç›¸å…³åŠŸèƒ½çš„å‡½æ•°resizeï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨resizeå°±å¯ä»¥å®Œæˆè¿™ä¸ªæ“ä½œï¼\n//åˆ©ç”¨nä¸ªvalè¿›è¡Œæ„é€ vector(size_t n, const T&amp; val = T())    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    resize(n, val);&#125;\n\nåªå®ç°ä¸€ä¸ªvector(size_t n, const T&amp; val = T())çš„ç‰ˆæœ¬æ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†ä¸€ç§æƒ…å†µ\nvector&lt;char&gt; v1(10,&#x27;x&#x27;)//å¯ä»¥æˆåŠŸè°ƒç”¨vector&lt;int&gt;  v2(10,11) //ä¸èƒ½æˆåŠŸè°ƒç”¨ï¼ \n\n\nä¸ºå•¥ç¬¬äºŒç§æƒ…å†µä¸è¡Œå‘¢ï¼Ÿå†æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä¹‹å‰å®ç°è¿‡çš„è¿­ä»£å™¨åŒºé—´æ„é€ \ntemplate &lt;class InputIterator&gt;vector(InputIterator first, InputIterator last)\n\nä½ ä¼šå‘ç°ï¼Œå½“æˆ‘ä»¬ä¼ çš„ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯intç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥è°ƒç”¨è¿™ä¸ªæ¨¡æ¿å‡½æ•°ï¼å› ä¸ºfirstå’Œlastå°±æ˜¯ä¸¤ä¸ªç›¸åŒç±»å‹çš„å‚æ•°ï¼\né€šè¿‡è°ƒè¯•ä¹Ÿå¯ä»¥çœ‹åˆ°åœ¨è¿›è¡Œæ„é€ çš„æ—¶å€™ï¼Œè°ƒç”¨äº†è¿™ä¸ªè¿­ä»£å™¨åŒºé—´æ„é€ å‡½æ•°\n\nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å¯¹intç±»å‹å•ç‹¬å¤„ç†ä¸€ä¸‹ï¼Œä¿®æ”¹ä¸€ä¸‹ä¼ å‚å³å¯\n//å¦‚æœä¸å•ç‹¬é‡è½½ä¸€ä¸ªintç±»å‹ç‰ˆæœ¬ï¼Œå°±ä¼šè¢«è¯†åˆ«æˆä¸Šé¢çš„æ¨¡æ¿å‡½æ•°//intæ˜¯ä¸èƒ½å½“ä½œè¿­ä»£å™¨è¿›è¡Œè§£å¼•ç”¨çš„ï¼Œä¼šæŠ¥é”™vector(int n, const T&amp; val = T())    :_start(nullptr),\t_finish(nullptr),\t_endofstorage(nullptr)&#123;    resize(n,val);&#125;\n\n\nè¿™ä¸ªé—®é¢˜æ˜¯æ€ä¹ˆå‘ç°å¹¶è§£å†³çš„ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹stlæºç ï¼Œç…ç…åº“é‡Œé¢æ˜¯æ€ä¹ˆå®ç°çš„\n\nå¯ä»¥çœ‹åˆ°åº“é‡Œé¢ä¸ä½†é‡è½½äº†ä¸€ä¸ªintç±»å‹çš„ç‰ˆæœ¬ï¼Œè¿˜é‡è½½äº†longé•¿æ•´å‹çš„æƒ…å†µ\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ¨¡æ‹Ÿå®ç°å°±åŸºæœ¬å®Œæˆäº†ï¼\n\n3.6å…³äºè‡ªå®šä¹‰ç±»å‹çš„æ‹·è´é—®é¢˜ä¸ºä»€ä¹ˆåœ¨3.1çš„reserveå®ç°ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†èµ‹å€¼é‡è½½ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨memcpyï¼Ÿ\næ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªOJé¢˜ç›®æ¨è¾‰ä¸‰è§’çš„ä»£ç \n\nleetcode118æ¨è¾‰ä¸‰è§’ï¼šhttps://leetcode.cn/problems/pascals-triangle/submissions/\n\nclass Solution &#123;\tpublic:\t\tvector&lt;vector&lt;int&gt;&gt; generate(int numRows) &#123;\t\t\tvector&lt;vector&lt;int&gt;&gt; vv;\t\t\tvv.resize(numRows);\t\t\tfor (size_t i = 0; i &lt; vv.size(); ++i)\t\t\t&#123;\t\t\t\t// æ¨è¾‰ä¸‰è§’ï¼Œæ¯è¡Œä¸ªæ•°ä¾æ¬¡é€’å¢\t\t\t\tvv[i].resize(i + 1, 0);\t\t\t\t// ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªåˆå§‹åŒ–æˆ1\t\t\t\tvv[i][0] = 1;\t\t\t\tvv[i][vv[i].size() - 1] = 1;\t\t\t&#125;\t\t\tfor (size_t i = 0; i &lt; vv.size(); ++i)\t\t\t&#123;\t\t\t\tfor (size_t j = 0; j &lt; vv[i].size(); ++j)\t\t\t\t&#123;\t\t\t\t\tif (vv[i][j] == 0)\t\t\t\t\t&#123;\t\t\t\t\t\t// ä¸­é—´ä½ç½®ç­‰äºä¸Šä¸€è¡Œj-1 å’Œ jä¸ªç›¸åŠ \t\t\t\t\t\tvv[i][j] = vv[i - 1][j - 1] + vv[i - 1][j];\t\t\t\t\t&#125;\t\t\t\t&#125;\t\t\t&#125;\t\t\treturn vv;\t\t&#125;\t&#125;;\n\nåœ¨è¿™é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸¤å±‚vectorè¿›è¡ŒåµŒå¥—ä½¿ç”¨ï¼Œå¤–å±‚çš„vectorå­˜æ”¾çš„æ˜¯å†…å±‚vectorçš„å¯¹è±¡ã€‚\nå®ƒçš„ç»“æ„å¦‚ä¸‹å›¾\n\nè¿™æ—¶å€™å¦‚æœåªç”¨memcpyè¿›è¡Œæµ…æ‹·è´ï¼Œç›¸å½“äºæ–°çš„ç©ºé—´é‡Œé¢å­˜æ”¾çš„æ˜¯çš„ç¡®æ˜¯æ–°çš„vectorå¯¹è±¡ï¼Œä½†è¿™äº›vectorå¯¹è±¡å­˜æ”¾çš„å´æ˜¯åŸæœ‰æ•°æ®çš„æŒ‡é’ˆï¼Œè€ŒåŸæœ¬çš„æ•°æ®å·²ç»è¢«æˆ‘ä»¬deleteæ‰äº†ï¼Œå‡ºç°äº†é‡æŒ‡é’ˆé—®é¢˜ï¼\nååº”åˆ°ä»£ç ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨ Solutionå†…éƒ¨è¿›è¡Œä¸€æ¬¡æ‰“å°ï¼Œå†åœ¨å¤–éƒ¨è¿›è¡Œä¸€æ¬¡æ‰“å°ï¼Œç»“æœå°±ä¼šå®Œå…¨ä¸åŒ\nvoid test05()&#123;    vector&lt;vector&lt;int&gt;&gt; ret = Solution().generate(5);    cout &lt;&lt; &quot;å¤–éƒ¨æ‰“å°&quot; &lt;&lt; endl;    for (size_t i = 0; i &lt; ret.size(); ++i)    &#123;        for (size_t j = 0; j &lt; ret[i].size(); ++j)        &#123;            cout &lt;&lt; ret[i][j] &lt;&lt; &quot; &quot;;        &#125;        cout &lt;&lt; endl;    &#125;    cout &lt;&lt; endl;&#125;\n\n\nä½¿ç”¨èµ‹å€¼é‡è½½ï¼Œå°±å¯ä»¥è¿›è¡Œæ·±æ‹·è´ï¼Œæ¯ä¸€ä¸ªvectorå¯¹è±¡éƒ½èƒ½è·å¾—æ–°çš„å€¼ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼\n//reserveä»£ç çš„ä¸€éƒ¨åˆ†for (size_t i = 0; i &lt; size(); i++)&#123;    tmp[i] = _start[i];//æ‰‹åŠ¨èµ‹å€¼ï¼Œå½“æˆå‘˜æ˜¯è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨=é‡è½½&#125;\n\n\n3.7 emplace_back()å’Œpush_back()çš„åŒºåˆ«emplace_back() å’Œ push_back() çš„åŒºåˆ«ï¼Œå°±åœ¨äºåº•å±‚å®ç°çš„æœºåˆ¶ä¸åŒã€‚\n\npush_back() å‘å®¹å™¨å°¾éƒ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œé¦–å…ˆä¼šåˆ›å»ºè¿™ä¸ªå…ƒç´ ï¼Œç„¶åå†å°†è¿™ä¸ªå…ƒç´ æ‹·è´æˆ–è€…ç§»åŠ¨åˆ°å®¹å™¨ä¸­ï¼ˆå¦‚æœæ˜¯æ‹·è´çš„è¯ï¼Œäº‹åä¼šè‡ªè¡Œé”€æ¯å…ˆå‰åˆ›å»ºçš„è¿™ä¸ªå…ƒç´ ï¼‰ï¼›\nè€Œ emplace_back() åœ¨å®ç°æ—¶ï¼Œåˆ™æ˜¯ç›´æ¥åœ¨å®¹å™¨å°¾éƒ¨åˆ›å»ºè¿™ä¸ªå…ƒç´ ï¼Œçœå»äº†æ‹·è´æˆ–ç§»åŠ¨å…ƒç´ çš„è¿‡ç¨‹ã€‚\n\nemplace_backæ˜¯C++11æ·»åŠ çš„ï¼Œå®šä¹‰å¦‚ä¸‹\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nè€ŒC++11ä¸­ä¹Ÿç»™push_backæä¾›äº†ä¸€ä¸ªå³å€¼å¼•ç”¨æ–¹å¼çš„é‡è½½ï¼Œè¿™æ—¶å€™å³å€¼çš„æ“ä½œå°±ä¼šè°ƒç”¨ç§»åŠ¨æ„é€ äº†ï¼›\nvoid push_back (const value_type&amp; val);void push_back (value_type&amp;&amp; val); // C++11\n\npush_backéœ€è¦æ„é€ å¯¹è±¡åä¼ å…¥å¯¹è±¡ï¼Œemplace_backç›´æ¥ä¼ å…¥æ„é€ å‡½æ•°çš„å‚æ•°å°±è¡Œäº†ã€‚\næµ‹è¯•åœ¨è¿™ä¸ªè‡ªå®šä¹‰ç±»å‹ä¸­ï¼Œæˆ‘å®ç°äº†å…¨ç¼ºçœçš„é»˜è®¤æ„é€ ï¼Œä»¥åŠæ‹·è´æ„é€ å’Œç§»åŠ¨æ„é€ ï¼›\n#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;vector&gt;using namespace std;class inclass &#123;public:\tinclass(int a = -10,const string&amp; info = &quot;dft&quot;) :_a(a),_str(info) &#123;\t\tcout &lt;&lt; &quot;init inclass | &quot; &lt;&lt; info &lt;&lt; &quot; &quot; &lt;&lt; a &lt;&lt; endl;\t&#125;\tinclass(const inclass&amp; d):_a(d._a),_str(d._str) &#123;\t\tcout &lt;&lt; &quot;init inclass copy | &quot; &lt;&lt; _str &lt;&lt; &quot; &quot; &lt;&lt;  d._a &lt;&lt; endl;\t&#125;\tinclass(const inclass&amp;&amp; d) :_a(d._a), _str(std::move(d._str)) &#123;\t\tcout &lt;&lt; &quot;init inclass copy&amp;&amp; | &quot; &lt;&lt; _str &lt;&lt; &quot; &quot; &lt;&lt; d._a &lt;&lt; endl;\t&#125;\tint _a;\tstring _str;&#125;;int main()&#123;\tvector&lt;inclass&gt; v;\tv.reserve(15);\tcout &lt;&lt; &quot; -----  &quot; &lt;&lt; endl;\tinclass tmp_copy(-1, &quot;tmp_copy&quot;);\tinclass tmp_move(-2, &quot;tmp_move&quot;);\tcout &lt;&lt; &quot; -----  &quot; &lt;&lt; endl;\tv.push_back(tmp_copy);\tv.push_back(std::move(tmp_copy));\tv.push_back(inclass(3,&quot;push back&quot;));\tv.push_back(std::move(inclass(4, &quot;push back move&quot;)));\tv.push_back(&#123; 10,&quot;push back initializer list&quot; &#125;);\t// v.push_back(15,&quot;push back direct_init&quot; ); // ä¸æ”¯æŒ\tcout &lt;&lt; &quot; -----  &quot; &lt;&lt; endl;\tv.emplace_back(tmp_move);\tv.emplace_back(std::move(tmp_move));\tv.emplace_back(inclass(5,&quot;emplace back&quot;));\tv.emplace_back(std::move(inclass(6, &quot;emplace back move&quot;)));\t// v.emplace_back(&#123; 20,&quot;enplace back initializer list&quot; &#125;);// ä¸æ”¯æŒ\tv.emplace_back( 30,&quot;enplace back direct_init&quot; );\treturn 0;&#125;\n\næœ€ç»ˆè¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿™ä¹‹å‰ï¼Œæ‰€æœ‰çš„æ’å…¥æ“ä½œéƒ½ä¼šå…ˆæ„å»ºè¿™ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œå†è°ƒç”¨ç§»åŠ¨æ„é€ æ¥æ’å…¥åˆ°vectorä¸­ï¼Œå³ä¾¿é‡‡ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œä¹Ÿæ˜¯ä¼šå»æ„é€ ä¸´æ—¶å¯¹è±¡çš„ï¼›å› ä¸ºé›¶æ—¶å¯¹è±¡æ˜¯å°†äº¡å€¼ï¼Œæ‰€ä»¥è°ƒç”¨çš„éƒ½æ˜¯ç§»åŠ¨æ„é€ ã€‚\n -----init inclass | tmp_copy -1init inclass | tmp_move -2 -----init inclass copy | tmp_copy -1init inclass copy&amp;&amp; | tmp_copy -1init inclass | push back 3init inclass copy&amp;&amp; | push back 3init inclass | push back move 4init inclass copy&amp;&amp; | push back move 4init inclass | push back initializer list 10init inclass copy&amp;&amp; | push back initializer list 10 -----init inclass copy | tmp_move -2init inclass copy&amp;&amp; | tmp_move -2init inclass | emplace back 5init inclass copy&amp;&amp; | emplace back 5init inclass | emplace back move 6init inclass copy&amp;&amp; | emplace back move 6init inclass | enplace back direct_init 30\n\nè€Œemplace_backé‡‡ç”¨äº†å®Œç¾è½¬å‘ï¼Œæ”¯æŒç›´æ¥ä¼ å…¥å‚æ•°ä½œä¸ºè‡ªå®šä¹‰ç±»å‹çš„æ„é€ å‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°æœ€åä¸€ä¸ªæ’å…¥æ“ä½œä¸­åªæœ‰ä¸€æ¬¡æ„é€ ï¼Œè€Œæ²¡æœ‰ä»»ä½•æ‹·è´æ„é€ ï¼\nç»“è¯­åˆ°è¿™é‡Œï¼Œvectorçš„æ¨¡æ‹Ÿå®ç°å°±å®Œæˆå•¦ï¼é€šè¿‡æ¨¡æ‹Ÿå®ç°å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„ç†è§£vectorå®¹å™¨çš„ç»“æ„ï¼Œä¹Ÿæ–¹ä¾¿åç»­çš„ä½¿ç”¨ï¼\næœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘AVLæ ‘ï¼ˆå¹³è¡¡æœç´¢äºŒå‰æ ‘ï¼‰","url":"/posts/3807693015/","content":"åœ¨ä¸Šä¸€ç¯‡C++åšå®¢ä¸­ï¼Œè®²è¿°äº†å…³äºæœç´¢äºŒå‰æ ‘ä»¥åŠKVLæ ‘çš„å®ç°ã€‚ä¹Ÿæåˆ°äº†æœç´¢äºŒå‰æ ‘çš„æœ€åæƒ…å†µï¼šæ’å…¥çš„æ•°æ®å·²ç»æœ‰åºã€‚\nè€Œæœ¬ç¯‡åšå®¢æ¶‰åŠåˆ°çš„AVLæ ‘ï¼Œåˆç§°å¹³è¡¡æœç´¢äºŒå‰æ ‘ã€‚å°±æ˜¯ä¸ºäº†è§£å†³æœç´¢äºŒå‰æ ‘çš„æœ€åæƒ…å†µè€Œç”Ÿçš„ã€‚\n\n\n[TOC]\n1. ä»€ä¹ˆæ˜¯AVLæ ‘äºŒå‰æœç´¢æ ‘è™½ç„¶ç¼©çŸ­äº†æŸ¥æ‰¾çš„æ•ˆç‡ï¼Œä½†æ˜¯æ•°æ®æœ‰åºçš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°ä¸€è¾¹éå¸¸é•¿çš„æƒ…å†µï¼Œå¯¼è‡´åŸæœ¬çš„O(logN)æ—¶é—´å¤æ‚åº¦è¢«è¿«å˜æˆäº†O(N)\nå¹³è¡¡æ ‘ä¹Ÿæ˜¯æœç´¢äºŒå‰æ ‘ï¼Œå…¶å¼•å…¥äº†ä¸€ä¸ªå¹³è¡¡å› å­çš„æ¦‚å¿µï¼Œç”¨äºæ§åˆ¶æœç´¢äºŒå‰æ ‘çš„å¹³è¡¡ã€‚å®ƒä¼šä¿è¯å·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®ï¼ˆç»å¯¹å€¼ï¼‰ä¸è¶…è¿‡1ã€‚å½“æ–°æ’å…¥èŠ‚ç‚¹å¯¼è‡´é«˜åº¦ä¹‹å·®è¶…è¿‡1æ—¶ï¼Œä¾¿ä¼šè§¦å‘æ—‹è½¬ï¼Œä½¿å¾—æ ‘çš„é«˜åº¦é™ä½ã€‚\n\nç®€å•è¯´æ¥ï¼šAVLæ ‘èƒ½ä¿è¯ä¸¤è¾¹é«˜åº¦çš„ç›¸å¯¹å¹³è¡¡ï¼Œè¿™æ ·å°±ç¨³å®šäº†äºŒå‰æœç´¢æ ‘çš„æ•ˆç‡\n\n1.1 äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸€é¢—AVLæ ‘æˆ–ç©ºæ ‘ï¼Œå…¶æœ‰ä»¥ä¸‹æ€§è´¨\n\nå®ƒçš„å·¦å³å­æ ‘æ˜¯AVLæ ‘\nå·¦å³å­æ ‘çš„é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1\n\nè¿™é‡Œå¼•å…¥å¹³è¡¡å› å­æ¥æ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶äºŒå‰æ ‘çš„é«˜åº¦ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šæœ‰ä¸€ä¸ªå¹³è¡¡å› å­ï¼Œå®ƒçš„å€¼æ˜¯1/0/-1ã€‚å¦‚æœå¹³è¡¡å› å­çš„å€¼è¶…è¿‡äº†1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªèŠ‚ç‚¹çš„å­æ ‘å·²ç»ä¸å¹³è¡¡ï¼Œéœ€è¦è¿›è¡Œæ—‹è½¬ã€‚\n\nå®é™…ä¸Šï¼ŒAVLæ ‘ä¸ä¸€å®šéè¦ç”¨å¹³è¡¡å› å­ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è®¡ç®—æ ‘çš„é«˜åº¦çš„æ–¹å¼æ¥ç¡®è®¤å¹³è¡¡å› å­ï¼Œä½†æ˜¯è¿™æ ·éœ€è¦éå†å·¦å³å­æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜\n\n2. å®ç°ä¸€é¢—AVLæ ‘2.1 AVLæ ‘çš„èŠ‚ç‚¹åŸºæœ¬çš„æ¦‚å¿µç†è§£ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„ç»“æ„æ¥ã€‚å…³äºå„ä¸ªå€¼çš„å«ä¹‰ï¼Œå¯ä»¥å‚è€ƒä¸‹æ–¹çš„æ³¨é‡Š\n\nå¹³è¡¡æœç´¢äºŒå‰æ ‘æ˜¯ä¸€ä¸ªâ€œä¸‰å‰é“¾â€ã€‚è¿™ä»£è¡¨æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰å·¦å³å­©å­ï¼Œè¿˜æœ‰ä¸€ä¸ªprevæŒ‡é’ˆæŒ‡å‘å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚ä¸ºäº†æ ‡è¯†æ ‘æ˜¯å¦å¹³è¡¡ï¼Œå‡†ç¡®æ¥è¯´æ˜¯æŸä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ˜¯å¦å¹³è¡¡ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥ä¸€ä¸ªâ€œå¹³è¡¡å› å­â€æ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶å¹³è¡¡\n\nå·¦å³å­æ ‘é«˜åº¦ç›¸åŒ  0\nå·¦å­æ ‘é«˜äºå³å­æ ‘  -1\nå³å­æ ‘é«˜äºå·¦å­æ ‘  1\n\n\ntemplate&lt;class K,class V&gt;struct AVLTreeNode&#123;\tpair&lt;K, V&gt; _kv;//é”®å€¼å¯¹\tAVLTreeNode&lt;K, V&gt;* _left;//å·¦å­æ ‘\tAVLTreeNode&lt;K, V&gt;* _right;//å³å­æ ‘\tAVLTreeNode&lt;K, V&gt;* _parent;//çˆ¶èŠ‚ç‚¹\t// å³å­æ ‘-å·¦å­æ ‘çš„é«˜åº¦å·®\tint _bf;  // å¹³è¡¡å› å­\tAVLTreeNode(const pair&lt;K, V&gt;&amp; kv)\t\t:_kv(kv),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_bf(0)\t&#123;&#125;&#125;;\n\nå…³äºé”®å€¼å¯¹çš„å†…å®¹ï¼Œåœ¨ä¸Šç¯‡åšå®¢çš„KVLæ ‘ä¸­æœ‰æåˆ°è¿‡ ã€ä¼ é€é—¨ã€‘\n\n2.2 AVLæ ‘çš„æ’å…¥ï¼ˆé‡è¦ï¼‰å› ä¸ºAVLéœ€è¦æ§åˆ¶æ ‘çš„é«˜åº¦ï¼Œå…¶æ’å…¥çš„æ—¶å€™å°±æ²¡æœ‰KVLæ ‘é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚æˆ‘ä»¬æ¯æ¬¡æ’å…¥ä¹‹åï¼Œéƒ½éœ€è¦å‘ä¸Šæ›´æ–°å¹¶åˆ¤æ–­æ ‘çš„å¹³è¡¡å› å­æ˜¯å¦æ­£å¸¸\nå…ˆæ¥ç†æ¸…ä¸€ä¸‹æ€è·¯:\n\nå¦‚æœæ˜¯ç©ºæ ‘ï¼Œnewä¸€ä¸ªæ–°èŠ‚ç‚¹äº¤ç»™rootï¼Œæ— éœ€è¿›è¡Œåç»­æ“ä½œ\næ’å…¥æ–°èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ©ç”¨æœç´¢äºŒå‰æ ‘çš„è§„åˆ™ï¼ˆåœ¨è¿™é‡Œæˆ‘é‡‡ç”¨äº†å·¦å°å³å¤§çš„è§„åˆ™ï¼‰æ¥æ‰¾åˆ°æ–°èŠ‚ç‚¹åº”è¯¥æ’å…¥çš„ä½ç½®ï¼Œç›´æ¥è¿›è¡Œæ’å…¥\næ’å…¥ä¹‹åï¼Œéœ€è¦å‘ä¸Šæ›´æ–°å¹³è¡¡å› å­ï¼ˆåˆ©ç”¨çˆ¶èŠ‚ç‚¹parentï¼‰\nå¦‚æœè¯¥æ’å…¥èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹çš„å³è¾¹ï¼Œå¹³è¡¡å› å­+1\nå¦‚æœåœ¨è¯¥èŠ‚ç‚¹çš„å·¦è¾¹ï¼Œå¹³è¡¡å› å­-1ã€‚\n\n\næ›´æ–°äº†å¹³è¡¡å› å­ä¹‹åï¼Œéœ€è¦åŠæ—¶è¿›è¡Œåˆ¤æ–­ã€‚å¦‚æœå¹³è¡¡å› å­ç­‰äº0ï¼Œåˆ™ä¸éœ€è¦ç»§ç»­å¾€ä¸Šæ›´æ–°ã€‚å¦‚æœå¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äº1ï¼Œè¯´æ˜å½“å‰å°±éœ€è¦æ—‹è½¬äº†\n\næ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå†™å‡ºæ’å…¥çš„ä¸€ä¸ªåŸºæœ¬æ¡†æ¶\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;\t//åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘\tif (_root == nullptr)\t&#123;\t\t_root = new Node(kv);\t\treturn true;\t&#125;\t//kvæ ‘çš„æ“ä½œ\tNode* parent = nullptr;\tNode* cur = _root;\twhile (cur)\t&#123;           //åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®\t\tif (cur-&gt;_kv.first &lt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (cur-&gt;_kv.first &gt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse&#123;\t\t\treturn false;\t\t&#125;\t&#125;\t//æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹\tcur = new Node(kv);\tif (parent-&gt;_kv.first &lt; kv.first)\t&#123;\t\tparent-&gt;_right = cur;\t&#125;\telse\t&#123;\t\tparent-&gt;_left = cur;\t&#125;\tcur-&gt;_parent = parent;\t//æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°å¹³è¡¡å› å­\twhile (parent)\t&#123;\t\tif (cur == parent-&gt;_left) &#123;\t\t\tparent-&gt;_bf--;//å·¦-1\t\t&#125;\t\telse&#123;\t\t\tparent-&gt;_bf++;//å³+1\t\t&#125;\t\t//æ›´æ–°äº†ä¹‹åï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦ç»§ç»­æ›´æ–°ï¼Œè¿˜æ˜¯éœ€è¦æ—‹è½¬\t\tif (parent-&gt;_bf == 0) &#123;\t\t\tbreak;//ä¸º0ä»£è¡¨é«˜åº¦æ²¡æœ‰å˜åŒ–ï¼Œä¸éœ€è¦ç»§ç»­æ›´æ–°\t\t&#125;\t\telse if (parent-&gt;_bf == 1 || parent-&gt;_bf == -1)\t\t&#123;\t\t\tcur = cur-&gt;_parent;//å‘ä¸Šæ›´æ–°\t\t\tparent = parent-&gt;_parent;\t\t&#125;\t\telse if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)\t\t&#123;\t\t\t//æ—‹è½¬\t\t&#125;\t\telse\t\t&#123;\t\t\t//æ’å…¥ä¹‹å‰AVLå°±å­˜åœ¨ä¸å¹³è¡¡å­æ ‘\t\t\tassert(false);\t\t&#125;\t&#125;\treturn true;&#125;\n\nå…¶ä¸­æœ€å¤æ‚çš„éƒ¨åˆ†ï¼šæ—‹è½¬ï¼Œéœ€è¦æ‹¿å‡ºæ¥å•ç‹¬è®²è§£ä¸€ç•ª\n\nä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„äºŒå‰æ ‘è¿›è¡Œæ’å…¥ä¹‹åï¼Œå¹³è¡¡å› å­çš„å˜åŒ–ã€‚\n\nå› ä¸ºæœç´¢äºŒå‰æ ‘éœ€è¦ä¿è¯ä¸¤è¾¹çš„é«˜åº¦ä¹‹å·®ä¸å¤§äº1ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬çš„æ ‘è¿˜æ²¡æœ‰è¿èƒŒAVLæ ‘çš„è§„åˆ™ã€‚\nå¯å¦‚æœæˆ‘ä»¬ç»§ç»­å¾€å³å­æ ‘æ’å…¥èŠ‚ç‚¹å‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€é¢—å­æ ‘çš„æ ¹èŠ‚ç‚¹çš„å¹³è¡¡å› å­ä¸º2ï¼Œè¶…è¿‡äº†1ã€‚æ­¤æ—¶ä¸¤è¾¹å­æ ‘çš„é«˜åº¦å·®ä¸º2ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œæ—‹è½¬æ“ä½œ\n2.2.1 å·¦&#x2F;å³å•æ—‹ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æŠŠä¸Šå›¾çš„æ’å…¥æƒ…å†µç›´æ¥ç®€åŒ–ä¸ºä¸‹é¢çš„æ ·å­\n\nå½“æˆ‘ä»¬åœ¨è¿™æ£µæ ‘é«˜åº¦è¾ƒé«˜çš„é‚£ä¸€ä¾§çš„è¾¹ç¼˜æ’å…¥çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿›è¡Œå•æ—‹ã€‚\n\næ¯”å¦‚å³è¾¹é«˜ï¼Œå°±æ˜¯åœ¨æœ€å³è¾¹çš„å¶å­å¤„æ’å…¥\n\nå•æ—‹çš„æ€è·¯å¾ˆå¥½ç†è§£ï¼Œä¸‹é¢ä»¥å·¦å•æ—‹ä¸ºä¾‹ï¼ˆè“è‰²ä»£è¡¨æ–°å¢èŠ‚ç‚¹ï¼‰\n\nè¿™é‡Œæˆ‘ä»¬è®¾ç½®äº†3ä¸ªä¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ†åˆ«æ˜¯prevèµ·å§‹èŠ‚ç‚¹ï¼ˆå³å¹³è¡¡å› å­å¤§äº1çš„èŠ‚ç‚¹ï¼‰ä»¥åŠå®ƒçš„å³å­æ ‘subRã€å³å­æ ‘çš„å·¦å­æ ‘subRLï¼ˆå³å›¾ä¸­çš„bå­æ ‘ï¼‰\n\néœ€è¦åšçš„æ“ä½œï¼Œå°±æ˜¯æŠŠsubRLé“¾æ¥ç»™prevçš„å³ï¼Œå†å°†prevé“¾æ¥åˆ°subRçš„å·¦\nå› ä¸ºsubRLåœ¨prevçš„å³ä¾§ï¼Œå…¶çš„å€¼è‚¯å®šå¤§äºprevï¼Œæ‰€ä»¥è¿™æ ·é“¾æ¥æ˜¯ä¸ä¼šç ´åæœç´¢äºŒå‰æ ‘çš„ç»“æ„çš„ã€‚\n\næ—‹è½¬å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠprevå’ŒsubRçš„å¹³è¡¡å› å­éƒ½æ›´æ–°ä¸º0\n\nå³å•æ—‹çš„æ“ä½œå’Œå·¦å•æ—‹çš„æ€è·¯å®Œå…¨ç›¸åŒï¼Œåªä¸è¿‡æ–¹å‘ç›¸å\n\n\næ€è·¯æå®šäº†ï¼Œä¸‹é¢å°±æ¥å†™ä¸€ä¸ªä»£ç å§ï¼\nvoid RotateL(Node* parent)//å·¦å•æ—‹&#123;    Node* prev = parent;    Node* subR = parent-&gt;_right;    Node* subRL = subR-&gt;_left;    //ç”¨æ¥è®°å½•å½“å‰parentçš„çˆ¶äº²ï¼Œæœ€åçš„é“¾æ¥éœ€è¦    Node* ppNode = parent-&gt;_parent;    prev-&gt;_right = subRL;    if (subRL != nullptr)    &#123;//ä¸ä¸ºç©ºæ‰èƒ½è¿›è¡Œparentæ“ä½œ        subRL-&gt;_parent = prev;    &#125;    subR-&gt;_left = prev;    prev-&gt;_parent = subR;    if (prev == _root)    &#123;//å•ç‹¬æ“ä½œä¸ºæ ¹èŠ‚ç‚¹çš„æƒ…å†µ        //subR-&gt;_parent = nullptr;        _root = subR;        _root-&gt;_parent = nullptr;    &#125;    else    &#123;        if (prev == ppNode-&gt;_left) &#123;            ppNode-&gt;_left = subR;        &#125;        else &#123;            ppNode-&gt;_right = subR;        &#125;        subR-&gt;_parent = ppNode;    &#125;    //é»˜è®¤å…¨éƒ½æ”¹æˆ0    subR-&gt;_bf = parent-&gt;_bf = 0;&#125;\n\nå³å•æ—‹çš„ä»£ç å’Œè¿™ä¸ªç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†\n\nå®Œæ•´ä»£ç å¯ä»¥åˆ°æˆ‘çš„ä»£ç ä»“åº“é‡Œé¢çœ‹å“¦ï¼ã€Giteeã€‘\n\næ—‹è½¬çš„ä»£ç å†™å¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨è¿˜éœ€è¦äº†è§£çš„æ˜¯ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦è¿›è¡Œå•æ—‹ï¼Ÿ\nçœ‹å›¾å¯ä»¥å¾—çŸ¥ï¼Œå½“prevçš„å¹³è¡¡å› å­ä¸º-2ï¼ŒsubLçš„å¹³è¡¡å› å­ä¸º-1çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œä¸€æ¬¡å³å•æ—‹\n\nåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä¸€ä¸ªç»“è®ºï¼Œé‚£å°±æ˜¯å½“çˆ¶èŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼è¶…è¿‡1ï¼Œå…¶å·¦&#x2F;å³è¾¹èŠ‚ç‚¹çš„å¹³è¡¡å› å­ä¸º1ä¸”å’Œçˆ¶èŠ‚ç‚¹å¹³è¡¡å› å­çš„æ­£è´Ÿç›¸åŒæ—¶ï¼Œéœ€è¦å‘å¦å¤–ä¸€ä¸ªæ–¹å‘è¿›è¡Œå•æ—‹ã€‚\nå·¦å•æ—‹å°±æ˜¯çˆ¶èŠ‚ç‚¹ä¸º2ï¼Œå…¶å³å­æ ‘ä¸º1ï¼Œéœ€è¦å‘å¦å¤–ä¸€ä¸ªæ–¹å‘å·¦è¿›è¡Œå•æ—‹\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶å›¾é‡Œé¢ç”»å‡ºæ¥çš„prevæ˜¯æ ¹èŠ‚ç‚¹ï¼Œä½†å®é™…ä¸Šè¿›è¡Œå•æ—‹çš„æ—¶å€™ï¼Œprevå¯èƒ½æ˜¯å¦å¤–ä¸€æ£µæ ‘çš„å­æ ‘ã€‚åœ¨å•æ—‹çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»è¦ä¿å­˜prevçš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶é‡æ–°é“¾æ¥è‡³subR\n//æ’å…¥å‡½æ•°çš„æ—‹è½¬éƒ¨åˆ†else if (parent-&gt;_bf == 2 || parent-&gt;_bf == -2)&#123;    if (parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == 1)    &#123;        RotateL(parent);    &#125;    else if (parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == -1)    &#123;        RotateR(parent);    &#125;    else    &#123;        //â€¦â€¦    &#125;    break;&#125;\n\næˆ‘ä»¬ç”¨ä¸‹é¢çš„ä»£ç è¿›è¡Œæµ‹è¯•\nvoid TestAVLTree1()&#123;\tint a[] = &#123;9,8,7,6,5,4,3,2,1 &#125;;\tAVLTree&lt;int, int&gt; t;\tfor (auto e : a)\t&#123;\t\tt.Insert(make_pair(e, e));\t&#125;\tt.InOrder();\tcout &lt;&lt; endl;&#125;\n\nè¿›è¡Œä¸­åºæ‰“å°ï¼Œå¯ä»¥è·å–é“ä¸‹é¢çš„ç»“æœã€‚å¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»æœ‰åº\n\nåœ¨VS2019çš„è°ƒè¯•çª—å£ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å‚å®¶çš„è¿™æ£µæ ‘æ˜¯ç¬¦åˆå¹³è¡¡æœç´¢äºŒå‰æ ‘çš„æ€§è´¨çš„\n\n\n2.2.2 å·¦å³&#x2F;å³å·¦åŒæ—‹ä¸Šé¢çš„æƒ…å†µè¿˜ç®—å®¹æ˜“ï¼Œä¸€æ¬¡å•æ—‹å°±èƒ½è§£å†³ã€‚é‚£å¦‚æœæˆ‘ä»¬æ’å…¥ä¸æœ‰åºçš„æ•°æ®å‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ä¸­åºæ‰“å°çš„ç»“æœå·²ç»æœ‰åºï¼Œå¯å®ƒç¬¦åˆå¹³è¡¡äºŒå‰æ ‘çš„è§„åˆ™å—ï¼Ÿ\nå†æ’å…¥ä¸€ä¸ª25ï¼Œä¼šå‘ç°è§¦å‘äº†æ–­è¨€ï¼Œè¯´æ˜AVLæ ‘çš„è§„åˆ™è¢«ç ´åäº†\n\nå°±å¥½æ¯”ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ˜¯ä»¥15 6 7è¿™ç§éæœ‰åºæ–¹å¼æ’å…¥çš„ï¼Œå°±ä¼šå‡ºç°å•æ—‹å®Œå…¨å¤„ç†ä¸äº†çš„æƒ…å†µ\n\nå¦‚æœè¿›è¡Œå•æ—‹ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯«æ— å˜åŒ–ã€‚æ—‹è½¬äº†ä¹‹åçš„èŠ‚ç‚¹ä¾æ—§æ˜¯è¿åAVLæ ‘çš„è§„åˆ™\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œä¸¤æ¬¡å¾ªç¯äº†ï¼\n\næ¦‚å¿µç†è§£äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥æ¥å†™ä»£ç äº†ã€‚\nå› ä¸ºæœ¬è´¨ä¸Šå°±æ˜¯ä¸¤æ¬¡å•æ—‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¤ç”¨ä¹‹å‰å†™å¥½çš„å•æ—‹ä»£ç \nvoid RotateLR(Node* parent)//å·¦å³&#123;    RotateL(parent-&gt;_left);    RotateR(parent);&#125;\n\nä½†äº‹æƒ…è¿œæ²¡æœ‰è¿™ä¹ˆç®€å•ï¼\nåœ¨2.2.1å•æ—‹çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬æ—‹è½¬å®Œæ¯•åä¼šæŠŠprevå’ŒsubLçš„å¹³è¡¡å› å­éƒ½æ”¹æˆäº†0ã€‚åœ¨è¿™ç§åŒæ—‹çš„æƒ…å†µä¸‹ï¼Œå…¨æ”¹æˆ0æ˜¾ç„¶ä¸ç¬¦åˆè¦æ±‚ã€‚\nä¸‹é¢çš„æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æ—‹è½¬ä¹‹åï¼ŒæŠŠ10çš„å¹³è¡¡å› å­æ”¹æˆ-1ï¼Œ20å’Œ30çš„å¹³è¡¡å› å­æ”¹æˆ0\n\nåŒæ—‹çš„æƒ…å†µåˆ†ä¸ºä¸‹é¢3ç§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ç´«è‰²æ¡†ä¸­æ‰€æŒ‡çš„è¿™ä¸ªèŠ‚ç‚¹æ¥åˆ¤æ–­å±äºå“ªä¸€ç§æƒ…å†µï¼Œå†é’ˆå¯¹æ€§çš„å¤„ç†ï¼\n\nå¤„ç†ä¹‹åçš„ç»“æœå¦‚ä¸‹\n\nå…¶ä»£ç é€»è¾‘å¦‚ä¸‹\n//è¿™ç§åŒæ—‹è½¬çš„æƒ…å†µï¼ŒåŸºæœ¬å¦‚ä¸‹//   9// 7//   8//å¿…é¡»è¦åŒæ—‹è½¬æ‰èƒ½è§£å†³é—®é¢˜void RotateLR(Node* parent)//å·¦å³&#123;    Node* prev = parent;    Node* subL = parent-&gt;_left;    Node* subLR = subL-&gt;_right;    int bf = subLR-&gt;_bf;    RotateL(parent-&gt;_left);    RotateR(parent);    if (bf == 0)    &#123;        prev-&gt;_bf = 0;        subL-&gt;_bf = 0;        subLR-&gt;_bf = 0;    &#125;    else if (bf == 1)    &#123;        subL-&gt;_bf = -1;        prev-&gt;_bf = 0;        subLR-&gt;_bf = 0;    &#125;    else if (bf == -1)    &#123;        subL-&gt;_bf = 0;        prev-&gt;_bf = 1;        subLR-&gt;_bf = 0;    &#125;    else &#123;        assert(false);    &#125;&#125;void RotateRL(Node* parent)//å³å·¦&#123;    Node* prev = parent;    Node* subR = parent-&gt;_right;    Node* subRL = subR-&gt;_left;    int bf = subRL-&gt;_bf;    RotateR(parent-&gt;_right);    RotateL(parent);    if (bf == 0)    &#123;        prev-&gt;_bf = 0;        subR-&gt;_bf = 0;        subRL-&gt;_bf = 0;    &#125;    else if (bf == -1)    &#123;        subR-&gt;_bf = 1;        prev-&gt;_bf = 0;        subRL-&gt;_bf = 0;    &#125;    else if (bf == 1)    &#123;        subRL-&gt;_bf = 0;        subR-&gt;_bf = 0;        prev-&gt;_bf = -1;    &#125;    else &#123;        assert(false);    &#125;&#125;\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ’å…¥å‡½æ•°ç»™è¡¥å…¨äº†ï¼\n\nå®Œæ•´ä»£ç å¯ä»¥åˆ°æˆ‘çš„ä»£ç ä»“åº“é‡Œé¢çœ‹å“¦ï¼ã€Giteeã€‘\n\nè¿˜æ˜¯åˆšåˆšçš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒå·²ç»æ²¡æœ‰æŠ¥é”™äº†ï¼\n\n\n2.3 AVLæ ‘çš„æœç´¢æœ¬è´¨ä¸ŠAVLæ ‘è¿˜æ˜¯ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘ï¼Œæ‰€ä»¥æœç´¢è‚¯å®šæ˜¯å°‘ä¸äº†çš„ï¼\nå®ƒçš„æœç´¢å’ŒKVLæ ‘å®Œå…¨ä¸€è‡´ï¼Œåˆ©ç”¨keyæ¥è¿›è¡Œæœç´¢ï¼Œå®šä½valueã€‚\næ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¬è¿‡æ¥ç”¨ã€‚\n//å› ä¸ºkvlæ ‘æˆ‘ä»¬éœ€è¦ä¿®æ”¹valueï¼Œæ‰€ä»¥è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆNode* _FindR(Node* root, const K&amp; key)&#123;\tif (root == nullptr)\t\treturn nullptr;\tif (root-&gt;_kv.first &lt; key)\t&#123;\t\treturn _FindR(root-&gt;_right, key);\t&#125;\telse if (root-&gt;_kv.first &gt; key)\t&#123;\t\treturn _FindR(root-&gt;_left, key);\t&#125;\telse\t&#123;\t\treturn root;//è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆ\t&#125;&#125;\n\nä¸Šé¢çš„è¿™ä¸ªå‡½æ•°æˆ‘ä»¬å®šä¹‰ä¸ºç§æœ‰ï¼Œåœ¨å…¬æœ‰é‡Œé¢å®šä¹‰ä¸€ä¸ªä¸‹é¢çš„å‡½æ•°\n//æŸ¥æ‰¾æ˜¯é€šè¿‡keyæ¥è¿›è¡Œçš„Node* FindR(const K&amp; key)&#123;\treturn _FindR(_root, key);&#125;\n\næµ‹è¯•ä¸€ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°äº†å…¨0çš„åœ°å€å€¼ï¼Œå³nullptrï¼Œè¯´æ˜æ²¡æœ‰æ‰¾åˆ°34\n\n2.4 å¦‚ä½•åˆ¤æ–­æ˜¯å¦ç¬¦åˆAVLæ ‘çš„æ€§è´¨å¦‚æœæ¯ä¸€æ¬¡æˆ‘ä»¬éƒ½è¦ç”¨è°ƒè¯•å»çœ‹å½“å‰çš„ä»£ç æ˜¯å¦ç¬¦åˆäºŒå‰æ ‘çš„æ€§è´¨ï¼Œæœªå…æœ‰äº›å¤ªéº»çƒ¦äº†\nä¸‹é¢æˆ‘ä»¬æœ‰ä¸¤ç§åŠæ³•æ¥ç®€æ´åœ°åˆ¤æ–­ï¼\n2.4.1 å±‚åºéå†ï¼ˆOJé¢˜ï¼‰ä¸‹é¢çš„ä»£ç æ˜¯ä¸€é“OJé¢˜çš„ç­”æ¡ˆï¼Œå…¶è¦æ±‚æ˜¯è®©æˆ‘ä»¬æŠŠæ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹éƒ½æ’å…¥ä¸€ä¸ªvectorï¼Œæœ€åè¿”å›çš„æ˜¯ä¸€ä¸ªåµŒå¥—çš„vector&lt;vector&lt;int&gt;&gt;\n\næ¥è‡ª https://leetcode.cn/problems/binary-tree-level-order-traversal/\n\nå› ä¸ºæˆ‘ä»¬å½“å‰æµ‹è¯•çš„ç”¨ä¾‹éƒ½æ˜¯intç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œå°±æ²¡æœ‰ç”¨æ¨¡æ¿å‚æ•°ã€‚å®é™…ä¸Šæˆ‘ä»¬åº”è¯¥æ”¹æˆkeyçš„ç±»å‹\nvector&lt;vector&lt;int&gt;&gt; levelOrder() &#123;\tvector&lt;vector&lt;int&gt;&gt; vv;\tif (_root == nullptr)\t\treturn vv;\tqueue&lt;Node*&gt; q;\tint levelSize = 1;\tq.push(_root);\twhile (!q.empty())\t&#123;\t\t// levelSizeæ§åˆ¶ä¸€å±‚ä¸€å±‚å‡º\t\tvector&lt;int&gt; levelV;\t\twhile (levelSize--)\t\t&#123;\t\t\tNode* front = q.front();\t\t\tq.pop();\t\t\tlevelV.push_back(front-&gt;_kv.first);\t\t\tif (front-&gt;_left)\t\t\t\tq.push(front-&gt;_left);\t\t\tif (front-&gt;_right)\t\t\t\tq.push(front-&gt;_right);\t\t&#125;\t\tvv.push_back(levelV);\t\tfor (auto e : levelV)\t\t&#123;\t\t\tcout &lt;&lt; e &lt;&lt; &quot; &quot;;\t\t&#125;\t\tcout &lt;&lt; endl;\t\t// ä¸Šä¸€å±‚å‡ºå®Œï¼Œä¸‹ä¸€å±‚å°±éƒ½è¿›é˜Ÿåˆ—\t\tlevelSize = q.size();\t&#125;\treturn vv;&#125;\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€å±‚çš„ç»“æœï¼Œç¬¦åˆæˆ‘ä»¬AVLæ ‘çš„æ€§è´¨\n\n2.4.2 æ£€æŸ¥å¹³è¡¡å› å­è¿™é‡Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªé€’å½’å‡½æ•°ï¼Œé€šè¿‡è®¡ç®—å­æ ‘çš„é«˜åº¦ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ»¡è¶³AVLæ ‘çš„æ€§è´¨ã€‚\nåªè¦ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®å¤§äº1ï¼Œå°±è¯´æ˜ä¸æ˜¯AVLæ ‘\n//è®¡ç®—é«˜åº¦int _Height(Node* root)&#123;    if (root == nullptr)        return 0;    int lh = _Height(root-&gt;_left);    int rh = _Height(root-&gt;_right);    //å¦‚æœå·¦å­æ ‘é«˜äºå³å­æ ‘ï¼Œå°±è¿”å›å·¦å­æ ‘+1ï¼ˆæ ¹ï¼‰    return lh &gt; rh ? lh + 1 : rh + 1;&#125;//åˆ¤æ–­æ˜¯å¦ä¸ºå¹³è¡¡äºŒå‰æ ‘bool _IsBalanceTree(Node* root)&#123;    // ç©ºæ ‘ä¹Ÿæ˜¯AVLæ ‘    if (nullptr == root)        return true;    // è®¡ç®—pRootèŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼šå³pRootå·¦å³å­æ ‘çš„é«˜åº¦å·®    int leftHeight = _Height(root-&gt;_left);    int rightHeight = _Height(root-&gt;_right);    int diff = rightHeight - leftHeight;    // å¦‚æœè®¡ç®—å‡ºçš„å¹³è¡¡å› å­ä¸pRootçš„å¹³è¡¡å› å­ä¸ç›¸ç­‰ï¼Œæˆ–è€…    // pRootå¹³è¡¡å› å­çš„ç»å¯¹å€¼è¶…è¿‡1ï¼Œåˆ™ä¸€å®šä¸æ˜¯AVLæ ‘    if (abs(diff) &gt;= 2)    &#123;        cout &lt;&lt; root-&gt;_kv.first &lt;&lt; &quot;èŠ‚ç‚¹å¹³è¡¡å› å­å¼‚å¸¸&quot; &lt;&lt; endl;        return false;    &#125;    if (diff != root-&gt;_bf)    &#123;        cout &lt;&lt; root-&gt;_kv.first &lt;&lt; &quot;èŠ‚ç‚¹å¹³è¡¡å› å­ä¸ç¬¦åˆå®é™…&quot; &lt;&lt; endl;        return false;    &#125;    // pRootçš„å·¦å’Œå³å¦‚æœéƒ½æ˜¯AVLæ ‘ï¼Œåˆ™è¯¥æ ‘ä¸€å®šæ˜¯AVLæ ‘    return _IsBalanceTree(root-&gt;_left)        &amp;&amp; _IsBalanceTree(root-&gt;_right);&#125;\n\n\n\n2.5 åˆ©ç”¨éšæœºå€¼å’Œé¡ºåºå€¼è¿›è¡Œæµ‹è¯•ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«åˆ©ç”¨éšæœºå€¼å’Œé¡ºåºå€¼æµ‹è¯•AVLæ ‘çš„æ­£ç¡®æ€§\nvoid TestAVLTree2()&#123;\tconst size_t N = 1024*1024;\tvector&lt;int&gt; v;\tv.reserve(N);\tsrand(time(0));//ä½¿ç”¨éšæœºæ•°\tfor (size_t i = 0; i &lt; N; ++i)\t&#123;\t\tv.push_back(rand());\t\t//v.push_back(i);\t&#125;\tAVLTree&lt;int, int&gt; t;\tfor (auto e : v)\t&#123;\t\tt.Insert(make_pair(e, e));\t&#125;\tcout &lt;&lt; &quot;æ˜¯å¦å¹³è¡¡?&quot; &lt;&lt; t.IsBalanceTree() &lt;&lt; endl;\tcout &lt;&lt; &quot;é«˜åº¦:&quot; &lt;&lt; t.Height() &lt;&lt; endl;&#125;\n\nåˆ©ç”¨éšæœºæ•°æµ‹è¯•çš„ç»“æœå¦‚ä¸‹\n\né¡ºåºæ’å…¥çš„ç»“æœå¦‚ä¸‹\n\næ²¡æœ‰é—®é¢˜è¾£ï¼\n2.6 AVLæ ‘çš„åˆ é™¤AVLæ ‘çš„åˆ é™¤å’ŒKVLæ ‘æ˜¯åŸºæœ¬ç›¸åŒçš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ›´æ–°å¹³è¡¡å› å­ã€‚\n\nå¦‚æœåˆ é™¤çš„æ˜¯å·¦èŠ‚ç‚¹ï¼Œå¹³è¡¡å› å­+1\nå¦‚æœåˆ é™¤çš„æ˜¯å³èŠ‚ç‚¹ï¼Œå¹³è¡¡å› å­-1\n\nå½“æˆ‘ä»¬é‡åˆ°å¹³è¡¡å› å­é”™è¯¯ï¼ˆç»å¯¹å€¼å¤§äº1ï¼‰å°±éœ€è¦è¿›è¡Œæ—‹è½¬\n\nå› ä¸ºæœç´¢æ ‘ä¸­ä¸€èˆ¬ä¸ä¼šè¿›è¡Œåˆ é™¤ï¼Œæ•ˆç‡å¾ˆä½ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†™äº†ï¼ï¼ˆæ‡’ï¼‰\n\n2.7 äºŒå‰æ ‘æ€§èƒ½åœ¨ä¸€äº›æ—¶å€™ï¼Œæœç´¢äºŒå‰æ ‘çš„æ€§èƒ½å¹¶ä¸ä¼šå¾ˆé«˜\n\næ¯”å¦‚å½“æˆ‘ä»¬æ’å…¥çš„å…ƒç´ å·²ç»æœ‰åºï¼Œæˆ–è€…åŸºæœ¬æœ‰åºçš„æ—¶å€™ï¼ŒäºŒå‰æ ‘çš„æ€§èƒ½å°±å’Œæ™®é€šçš„å®¹å™¨å·®è·ä¸å¤§äº†\nAVLæ ‘æ›´é€‚åˆäºæ’å…¥çš„å…ƒç´ ä¸ä¼šè¢«æ”¹å˜çš„æƒ…å†µã€‚å¦‚æœæ’å…¥çš„å…ƒç´ éœ€è¦ç»å¸¸è¢«ä¿®æ”¹ï¼Œé‚£ä¹ˆä¹Ÿä¸å¤ªé€‚åˆã€‚ï¼ˆæ¯”å¦‚åˆ é™¤çš„æ—¶å€™ï¼ŒAVLæ ‘çš„å¹³è¡¡å› å­å¯èƒ½éœ€è¦ä¸€ç›´å‘ä¸Šåˆ°æ ¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸äºšäºäºŒæ¬¡æ’å…¥ï¼‰\n\nç»“è¯­é‚£ä¹ˆæœ¬ç¯‡å…³äºAVLæ ‘çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸæ‹‰ï¼\næœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","æ ‘","Cpp"]},{"title":"ã€C++ã€‘STLï¼šlist","url":"/posts/1456870854/","content":"é˜¿å·´é˜¿å·´ï¼Œlistçš„åšå®¢æ¥å–½ï¼\n\n\n[TOC]\n1.listæ˜¯å˜›ç©æ„ï¼Ÿä¹‹å‰çš„vectoræ˜¯ä¸€ä¸ªé¡ºåºè¡¨ã€‚æ€»æ‰€å‘¨çŸ¥ï¼Œå­¦å®Œé¡ºåºè¡¨è‚¯å®šä¸èƒ½ä¸å­¦é“¾è¡¨ï¼Œæ‰€ä»¥listå°±æ¥äº†ï¼\n\nlistæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œæ’å…¥åˆ é™¤çš„åºåˆ—å¼å®¹å™¨ï¼Œå¯ä»¥è¿›è¡Œå‰ååŒå‘è¿­ä»£\n\nè¯´äººè¯å°±æ˜¯ï¼šlistæ˜¯ä¸€ä¸ªåŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨\n\nè¿™ä¸å·§äº†å˜›ï¼ä¹‹å‰æˆ‘å†™è¿‡ç”¨Cè¯­è¨€å®ç°åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨çš„åšå®¢\nå…¶ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾\n\næ”¯æŒå¿«é€Ÿæ’å…¥åˆ é™¤O(1)\næ”¯æŒå‰ååŒå‘è¿­ä»£è®¿é—®\nä¸æ”¯æŒä»»æ„ä½ç½®çš„éšæœºè®¿é—®\n\nSTLä¸­çš„listä¹Ÿæ»¡è¶³ä¸Šé¢çš„è¿™äº›ä¼˜ç¼ºç‚¹\nè¯ä¸å¤šè¯´ï¼Œæ¥çœ‹çœ‹listçš„å‡½æ•°æ¥å£å§ï¼\n\nhttps://m.cplusplus.com/reference/list/list/\n\nå‡½æ•°æ¥å£å¤§éƒ¨åˆ†æ¥å£å’Œå‰é¢æ‰€å­¦çš„ä¸¤ä¸ªå®¹å™¨éƒ½æ˜¯ä¸€æ ·çš„å•¦ï¼Œè¿™é‡Œå°±ä¸è´´å®Œæ•´æˆªå›¾äº†ï¼ˆè§ä¸Šæ–¹é“¾æ¥ï¼‰\n\nè¿™é‡Œè¿˜å¤šäº†ä¸€ä¸ªemplace_frontï¼Œçœ‹å®Œå‡½æ•°è§£é‡Šåå¯çŸ¥å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¤´æ’\n\n2.ç®€å•äº†è§£ä½¿ç”¨2.1æ„é€ listæ”¯æŒçš„æ„é€ å‡½æ•°å¦‚ä¸‹\n\nè¿™äº›å‡½æ•°å’Œvectorå®Œå…¨ä¸€è‡´ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šä»‹ç»äº†\n\n2.2è¿­ä»£å™¨\n\n\nè¿­ä»£å™¨\nè¯´æ˜\n\n\n\nbegin+end\nè·å–ç¬¬ä¸€ä¸ªæ•°æ®ä½ç½®iterator&#x2F;const_iteratorï¼Œ è·å–æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®iterator&#x2F;const_iterator\n\n\nrbegin+rend\nè·å–æœ€åä¸€ä¸ªæ•°æ®ä½ç½®çš„reverse_iteratorï¼Œè·å–ç¬¬ä¸€ä¸ªæ•°æ®å‰ä¸€ä¸ªä½ç½®çš„ reverse_iterator\n\n\néƒ½æ˜¯è€æ ·å­ï¼Œæ²¡æœ‰å•¥å¥½è¯´çš„\n\né™¤äº†è¿­ä»£å™¨ä»¥å¤–ï¼Œä¸€èˆ¬çš„å®¹å™¨éƒ½ä¼šæä¾›frontå’Œbackä¸¤ä¸ªå‚æ•°æ¥è®¿é—®å¤´éƒ¨&#x2F;å°¾éƒ¨æ•°æ®ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸å¸¸ç”¨è¿™ä¸ªï¼Œè¿­ä»£å™¨ç”¨çš„æ›´å¤šä¸€äº›\n2.3é•¿åº¦æ“ä½œåº“å‡½æ•°ä¸­ç»™æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªå’Œlisté•¿åº¦ç›¸å…³çš„æ“ä½œï¼Œå› ä¸ºæ˜¯é“¾è¡¨ï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨æ‰©å®¹é—®é¢˜ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´\n\n\nempty åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯ç©ºè¿”å›true\nsize è®¡ç®—listä¸­æœ‰æ•ˆæ•°æ®é•¿åº¦\n\nå…³äºæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œlistå’Œvector/stringåŸºæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå­¦ä¼šä¸€ä¸ªåŸºæœ¬éƒ½ä¼šç”¨ï¼\n2.4è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜å’Œvectorä¸€æ ·ï¼Œlistä¹Ÿä¼šé‡åˆ°ä¸€å®šç¨‹åº¦çš„è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ã€‚\nå› ä¸ºlistæ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œå…¶åœ¨æ’å…¥æ“ä½œçš„æ—¶å€™æ˜¯åœ¨è¿­ä»£å™¨æ‰€æŒ‡èŠ‚ç‚¹å‰ä¸€ä¸ªä½ç½®è¿›è¡Œæ’å…¥ï¼Œä¸ä¼šå½±å“è¯¥èŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„ç»“æ„ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆã€‚\n\nåªæœ‰åœ¨åˆ é™¤çš„æ—¶å€™æ‰ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆ\n\nè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨è¿­ä»£å™¨åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼Œæ¥æ”¶è¿”å›å€¼æ›´æ–°ä¸€ä¸‹è¿­ä»£å™¨å³å¯ï¼\n\nåŸºæœ¬äº†è§£äº†å‡½æ•°æ¥å£åï¼Œè®©æˆ‘ä»¬æ¥è¯•è¯•æ¨¡æ‹Ÿå®ç°å§ï¼\n3.æ¨¡æ‹Ÿå®ç°\næ¨¡æ‹Ÿå®ç°å’ŒSTL-listæºç è§æˆ‘çš„Gitee\n\nä¸‹å›¾æ˜¯ä¹‹å‰Cè¯­è¨€ç‰ˆæœ¬é“¾è¡¨åšå®¢é‡Œï¼Œæˆ‘ç”»çš„åŒå‘å¸¦å¤´å¾ªç¯é“¾è¡¨çš„ç»“æ„å›¾\n\nlistçš„ç»“æ„å’Œè¿™ä¸ªå›¾ç‰‡æ˜¯ä¸€æ ·çš„ã€‚ä½†å› ä¸ºæˆ‘ä»¬ç°åœ¨æ‰€ä½¿ç”¨çš„æ˜¯C++ä¸­çš„ç±»å’Œå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ“ä½œéƒ½éœ€è¦å°Šå´‡stlåº“çš„å‘½åè§„åˆ™å’Œä½¿ç”¨æ–¹æ³•ï¼Œå…¶ç»“æ„çš„å®ç°ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚\næ¯”å¦‚åœ¨STLæºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œlistçš„ä¸»ç»“æ„ä¸­åªæœ‰ä¸€ä¸ªnodeï¼Œå³å¤´èŠ‚ç‚¹ã€‚\n\n3.1 èŠ‚ç‚¹ç»“æ„åœ¨listä¸­ï¼Œæˆ‘ä»¬ä¸ç›´æ¥åœ¨listä¸»ç±»ä¸­æ”¾å…¥å•ä¸ªèŠ‚ç‚¹çš„ç»“æ„ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ä½œä¸ºèŠ‚ç‚¹ã€‚\n\nå¤ä¹ ï¼šåœ¨structä¸­ï¼Œæˆå‘˜é»˜è®¤æ˜¯å…±æœ‰\n\ntemplate&lt;class T&gt;   struct list_node   &#123;       list_node&lt;T&gt;* _next;       list_node&lt;T&gt;* _prev;       T _data;       list_node(const T&amp; val = T())           :_next(nullptr),       \t_prev(nullptr),       \t_data(val)       &#123;&#125;   &#125;;\n\nè¿™æ ·åé¢çš„æ’å…¥åˆ é™¤æ“ä½œå°±å¯ä»¥ç›´æ¥newä¸€ä¸ªæ–°çš„nodeï¼Œå¹¶è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆ_dataçš„èµ‹å€¼ã€‚\nåœ¨listçš„ä¸»ç±»ä¸­ï¼Œæˆ‘ä»¬éµå¾ªåº“çš„æ–¹æ³•ï¼Œåªç”¨ä¸€ä¸ªå¤´èŠ‚ç‚¹çš„æŒ‡é’ˆä½œä¸ºæˆå‘˜\nprivate:\tNode* _head;//å¤´èŠ‚ç‚¹æŒ‡é’ˆ\n\n\n3.2 æ’å…¥åˆ é™¤å› ä¸ºä¹‹å‰å†™è¿‡Cè¯­è¨€çš„ä»£ç ï¼Œå…³äºæ’å…¥å’Œåˆ é™¤æ“ä½œç›¸å¯¹è¾ƒä¸ºç†Ÿç»ƒï¼Œä»£ç å¦‚ä¸‹ğŸ‘‡\n//åœ¨posä¹‹å‰æ’å…¥iterator insert(iterator pos, const T&amp; x)&#123;    Node* newnode = new Node(x);    Node* cur = pos._node;    newnode-&gt;_next = cur;    cur-&gt;_prev-&gt;_next = newnode;    newnode-&gt;_prev = cur-&gt;_prev;    cur-&gt;_prev = newnode;    return iterator(newnode);&#125;//åˆ é™¤posä½ç½®iterator erase(iterator pos)&#123;    assert(_head-&gt;_next != _head &amp;&amp; pos._node!=_head);    Node* next = pos._node-&gt;_next;    Node* prev = pos._node-&gt;_prev;    prev-&gt;_next = next;    next-&gt;_prev = prev;    delete pos._node;    return iterator(next);&#125;\n\nè€Œå¤´æ’&#x2F;å¤´åˆ &#x2F;å°¾æ’&#x2F;å°¾åˆ è¿™ç±»æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥å¤ç”¨insertå’Œearseå³å¯ï¼\n\n\n3.3 è¿­ä»£å™¨ï¼ˆé‡è¦ï¼‰åœ¨ä¸Šé¢çš„æ’å…¥å’Œåˆ é™¤ä»£ç ä¸­ï¼Œæˆ‘å·²ç»ä½¿ç”¨äº†è¿­ä»£å™¨ä½œä¸ºå‚æ•°å’Œè¿”å›å€¼ã€‚ç”±äºlistçš„ä¸»ç±»ä¸­å¹¶æ²¡æœ‰ç›´æ¥å­˜æ”¾3.1èŠ‚ç‚¹ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å•ç‹¬å®Œæˆä¸€ä¸ªè¿­ä»£å™¨çš„ç±»ï¼Œæ¥å®ç°è¿­ä»£å™¨çš„ç›¸å…³æ“ä½œ\n\nvector&#x2F;stringæ˜¯é¡ºåºè¡¨ï¼Œè¿­ä»£å™¨å¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆæ›¿ä»£ï¼Œåœ¨æœ¬ç±»ä¸­æ¨¡æ‹Ÿå®ç°\nlistæ˜¯é¡ºåºè¡¨ï¼Œè¿­ä»£å™¨çš„+å’Œ-æ“ä½œå…¶å®æ˜¯é€šè¿‡nextå’ŒprevæŒ‡é’ˆå¾€åå¾€å‰æ‰¾å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬çš„æ¨¡æ‹Ÿå®ç°\n\nåœ¨STLæºç ä¸­çš„listä¹Ÿæ˜¯å•ç‹¬é‡è½½äº†ä¸€ä¸ªè¿­ä»£å™¨ç±»\n\nå…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹\ntemplate&lt;class T, class Ref, class Ptr&gt;struct __list_iterator&#123;    typedef list_node&lt;T&gt; Node;//èŠ‚ç‚¹ç»“æ„    typedef __list_iterator&lt;T, Ref, Ptr&gt; self;//æœ¬ç±»    Node* _node;//å­˜æ”¾èŠ‚ç‚¹æŒ‡é’ˆ        __list_iterator(Node* node)\t\t:_node(node)\t&#123;&#125;&#125;\n\nè¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸ºä½•æœ‰3ä¸ªæ¨¡æ¿å‚æ•°ï¼šrefæŒ‡ä»£å¼•ç”¨ï¼ŒptræŒ‡ä»£æŒ‡é’ˆ\nå› ä¸ºåœ¨åç»­çš„æ“ä½œä¸­æˆ‘ä»¬éœ€è¦ä¼ å…¥Tçš„å¼•ç”¨T&amp;å’ŒæŒ‡é’ˆT*ï¼Œå¦‚æœä¹‹ä¼ å…¥ä¸€ä¸ªTï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®è®¤æ˜¯å¦ä¸ºconstç±»å‹ï¼Œä¹Ÿå°±æ— æ³•é˜»æ­¢ç”¨æˆ·ä½¿ç”¨è¿­ä»£å™¨ä¿®æ”¹å€¼ï¼Œæˆå‘˜çš„æ•°æ®å°±ä¸å¤Ÿå®‰å…¨ï¼Œä¸”constçš„æˆå‘˜å‡½æ•°æ— æ³•è°ƒç”¨è¿­ä»£å™¨ã€‚\né‡è½½3ä¸ªæ¨¡æ¿å‚æ•°åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ä¼ å…¥çš„æ¨¡æ¿å‚æ•°æ¥æ§åˆ¶æŒ‡é’ˆå’Œå¼•ç”¨æ˜¯å¦ä¸ºconstç±»å‹\ntypedef __list_iterator&lt;T, T&amp;, T*&gt; iterator;typedef __list_iterator&lt;T, const T&amp;, const T*&gt; const_iterator;\n\nåŸºæœ¬çš„ç»“æ„å¼„æ¸…æ¥šä¹‹åï¼Œä¸‹é¢ä¸€èµ·æ¥çœ‹çœ‹ï¼Œè¿­ä»£å™¨çš„++å’Œ--ï¼Œè§£å¼•ç”¨ä»¥åŠæŒ‡é’ˆ-&gt;åˆ†åˆ«å¯¹åº”äº†é“¾è¡¨çš„ä»€ä¹ˆæ“ä½œå‘¢ï¼Ÿ\n3.3.1 åŠ å‡å¥½å§ï¼Œå‰é¢å·²ç»æåˆ°è¿‡äº†ï¼Œæˆ‘ä»¬éœ€è¦ç”¨\tnext/prevæŒ‡é’ˆæ¥å®ŒæˆåŠ å‡æ“ä½œ\n//å‰ç½®++self&amp; operator++()&#123;    _node = _node-&gt;_next;    return *this;&#125;//åç½®++self operator++(int)&#123;    //selfæ˜¯æœ¬ç±»çš„åˆ«åï¼Œå› ä¸ºæ²¡æœ‰é‡è½½=æ“ä½œç¬¦    //æ‰€ä»¥ä¸èƒ½ä½¿ç”¨ç›¸ç­‰ï¼Œè¦ç”¨æ„é€ å‡½æ•°    //self tmp = _node;    self tmp(*this);    _node = _node-&gt;_next;    return tmp;&#125;//å‰ç½®--self&amp; operator--()&#123;    _node = _node-&gt;_prev;    return *this;&#125;//åç½®--self operator--(int)&#123;    self tmp(*this);    _node = _node-&gt;_prev;    return tmp;&#125;\n\næ³¨æ„å‰ç½®å’Œåç½®çš„åŒºåˆ«ï¼Œåç½®åŠ å‡éœ€è¦å…ˆç”¨ä¸€ä¸ªtmpå˜é‡å‚¨å­˜åŸæœ¬çš„è¿­ä»£å™¨ä½ç½®ï¼Œå†è®©è¿­ä»£å™¨æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\nè€Œå½“æˆ‘ä»¬è§£å¼•ç”¨è¿­ä»£å™¨çš„æ—¶å€™ï¼Œæƒ³è·å–çš„å…¶å®æ˜¯_dataçš„å€¼ï¼Œè€Œä¸æ˜¯èŠ‚ç‚¹çš„åœ°å€ï¼ˆè¿™é‡Œè¿­ä»£å™¨ä¾æ—§æ˜¯ç”¨æŒ‡é’ˆæ¨¡æ‹Ÿçš„ï¼‰\n3.3.2 è§£å¼•ç”¨å’ŒæŒ‡é’ˆæ“ä½œæ‰€ä»¥é‡è½½åçš„è§£å¼•ç”¨æ“ä½œå¦‚ä¸‹\nRef operator*()&#123;    return _node-&gt;_data;//è¿”å›å€¼çš„å¼•ç”¨&#125;Ptr operator-&gt;()&#123;    return &amp;(_node-&gt;_data);//è¿”å›åœ°å€&#125;\n\n3.3.3 åˆ¤æ–­ç›¸ç­‰&#x2F;ä¸ç›¸ç­‰æœ€ååˆ¤æ–­ç›¸ç­‰å’Œä¸ç›¸ç­‰å°±å¾ˆç®€å•äº†ï¼Œå› ä¸ºæœ¬èº«å°±æ˜¯æŒ‡é’ˆï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨åŸç”Ÿçš„!=è¿›è¡Œåˆ¤æ–­å³å¯\nbool operator!=(const self&amp; it)&#123;    return _node != it._node;&#125;bool operator==(const self&amp; it)&#123;    return _node == it._node;&#125;\n\nåˆ°è¿™é‡Œï¼Œä¸€ä¸ªå»ºè®®ç‰ˆæœ¬çš„æ­£å‘è¿­ä»£å™¨æˆ‘ä»¬å°±å®ç°å•¦ï¼\n\n3.3.4 begin&#x2F;endè¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨Listçš„æœ¬ç±»ä¸­è·å–è¿­ä»£å™¨çš„beginå’Œendï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è°ƒç”¨äº†è¿­ä»£å™¨çš„æ„é€ å‡½æ•°ï¼Œæ„é€ å‡ºæ¥ä¸€ä¸ªè¿­ä»£å™¨å¹¶è¿›è¡Œè¿”å›\nconst_iterator begin() const&#123;    //return _head-&gt;_next;//ä¸èƒ½ç›´æ¥è¿”å›æŒ‡é’ˆï¼ï¼    return const_iterator(_head-&gt;_next);&#125;const_iterator end() const&#123;    return const_iterator(_head);&#125;iterator begin()&#123;    return iterator(_head-&gt;_next);&#125;iterator end()&#123;    return iterator(_head);&#125;\n\nç°åœ¨å°±å¯ä»¥æ„‰å¿«çš„ç”¨è¿­ä»£å™¨è¿›è¡Œæ‰“å°æ“ä½œäº†ï¼\n\n\n3.4 æ„é€ å‡½æ•°æœ‰äº†è¿­ä»£å™¨ï¼Œç°åœ¨å°±å¯ä»¥å®Œæˆåº“å‡½æ•°é‡Œé¢çš„å‡ ä¸ªæ„é€ å‡½æ•°äº†ï¼ˆä¸»è¦æ˜¯è¿­ä»£å™¨åŒºé—´çš„é‚£ä¸ªå‡½æ•°ï¼‰\né»˜è®¤æ„é€ å‡½æ•°å¦‚ä¸‹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå†è®©å®ƒçš„å‰åéƒ½æŒ‡å‘è‡ªå·±ã€‚åœ¨Cè¯­è¨€çš„åˆå§‹åŒ–å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„\nlist()   \t:_head(nullptr)   &#123;       //_head = new Node;       _head = new Node();       _head-&gt;_next = _head;       _head-&gt;_prev = _head;   &#125;\n\nä½†å…¶ä»–çš„æ„é€ å‡½æ•°ç”±äº_headä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å•ç‹¬å®ç°ä¸€ä¸ªç©ºåˆå§‹åŒ–å‡½æ•°æ¥åˆ›å»ºå¤´èŠ‚ç‚¹\n//å½“ä½¿ç”¨å…¶ä»–æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œheadè¿˜ä¸å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æ„é€ ä¸€ä¸ªvoid empty_init()&#123;    _head = new Node();    _head-&gt;_next = _head;    _head-&gt;_prev = _head;&#125;\n\nå½“ç„¶ï¼Œä¸Šé¢é‚£ä¸ªç©ºçš„æ„é€ å‡½æ•°list()ä¹Ÿå¯ä»¥å¤ç”¨empty_init()ï¼Œè¿™æ ·ä»£ç æ›´æ•´æ´\nè¿­ä»£å™¨åŒºé—´æ„é€ å’Œvectoræ˜¯ä¸€æ ·çš„ï¼Œå…¶ä¸»è¦æ˜¯è§£å¼•ç”¨åç›´æ¥å°†å€¼è¿›è¡Œå¤´æ’ï¼ˆè¿™é‡Œå°±ç”¨ä¸Šäº†ä¹‹å‰è¿­ä»£å™¨é‡Œé‡è½½çš„è§£å¼•ç”¨æ“ä½œï¼‰\ntemplate &lt;class InputIterator&gt;list(InputIterator first, InputIterator last)&#123;    empty_init();    InputIterator cur = first;    while (cur != last)    &#123;        //push_back(cur._node-&gt;_data);        push_back(*cur);        cur++;    &#125;&#125;\n\nè€Œæ‹·è´æ„é€ å°±å¯ä»¥ç›´æ¥å¤ç”¨è¿­ä»£å™¨åŒºé—´æ„é€ ï¼Œèµ‹å€¼é‡è½½å°±ç›´æ¥swapå³å¯ã€‚è¿™éƒ¨åˆ†çš„å®ç°å’Œvectoræ˜¯ä¸€æ ·çš„ï¼Œæœ‰é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\nvoid swap(list&lt;T&gt;&amp; lt)&#123;    std::swap(_head, lt._head);&#125;list(const list&lt;T&gt;&amp; lt)&#123;    empty_init();    list tmp(lt.begin(), lt.end());    swap(tmp);&#125;list&lt;T&gt;&amp; operator=(list&lt;T&gt; lt)&#123;    //ä¼ å‚æ²¡æœ‰ä¼ å¼•ç”¨ï¼Œltå·²ç»æ˜¯æ‹·è´æ„é€ ä¹‹åçš„ç»“æœäº†    //å®Œå…¨æ²¡å¿…è¦å†ç”¨tmpæ‹·è´æ„é€ ä¸€æ¬¡    //list&lt;T&gt; tmp(lt);    //clear();//å› ä¸ºtmpå‡ºäº†ç”Ÿå‘½å‘¨æœŸåä¼šé”€æ¯ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨clear    swap(lt);    return *this;&#125;\n\n\n3.5 ææ„å‡½æ•°å› ä¸ºé“¾è¡¨éœ€è¦æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªå»åˆ é™¤æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ç©ºé—´ï¼Œè¿™é‡Œéœ€è¦å•ç‹¬å®ç°ä¸€ä¸ªclearå‡½æ•°ä¾›ææ„å‡½æ•°ä½¿ç”¨\nvoid clear()&#123;    //assert(_head-&gt;_next != _head);    iterator it = begin();    while (it != end())    &#123;        //éœ€è¦ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡å‚¨å­˜è¯¥èŠ‚ç‚¹çš„è¿­ä»£å™¨ï¼Œé¿å…è¿­ä»£å™¨å¤±æ•ˆ        iterator its = it;        it++;        delete its._node;    &#125;&#125;~list()&#123;    clear();    delete _head;&#125;\n\nä¸Šé¢è¿™ä¸ªå‡½æ•°å°±æœ‰äº›éº»çƒ¦ï¼Œæˆ‘ä»¬å…¶å®å¯ä»¥ç›´æ¥å¤ç”¨eraseè¿›è¡Œåˆ é™¤æ“ä½œ+æ›´æ–°è¿­ä»£å™¨ï¼\nvoid clear()&#123;    iterator it = begin();    while (it != end())    &#123;        it = erase(it);    &#125;&#125;\n\nåˆ°è¿™é‡Œï¼Œä¸€ä¸ªåŸºæœ¬çš„listå°±æ¨¡æ‹Ÿå®ç°å®Œæˆäº†ï¼\n3.6 æ“ä½œè‡ªå®šä¹‰ç±»å‹æˆ‘ä»¬åˆšåˆšå®ç°çš„listå’ŒSTLåº“ä¸­çš„ä¸€æ ·ï¼Œéƒ½å¯ä»¥å­˜æ”¾è‡ªå®šä¹‰ç±»å‹\nstruct TA&#123;\tTA(int a1 = 0, int a2 = 0)\t\t:_a1(a1),\t\t_a2(a2)\t&#123;&#125;\tint _a1;\tint _a2;&#125;;void test03()&#123;\tlist&lt;TA&gt; lt;\tlt.push_back(TA(1, 1));\tlt.push_back(TA(2, 2));\tlt.push_back(TA(3, 3));\tlt.push_back(TA(4, 4));\t//è¿™é‡Œå› ä¸ºTAç±»çš„æµæ’å…¥æ²¡æœ‰é‡è½½ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å†™\tlist&lt;TA&gt;::iterator it = lt.begin();\twhile (it != lt.end())\t&#123;\t\tcout &lt;&lt; it-&gt;_a1 &lt;&lt; &quot;-&quot; &lt;&lt; it-&gt;_a2 &lt;&lt; &quot; &quot;;\t\t++it;\t&#125;\tcout &lt;&lt; endl;&#125;\n\nä½†åœ¨æ‰“å°å’Œè®¿é—®è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é‡è½½çš„è§£å¼•ç”¨æ“ä½œç¬¦å°±ä¸èƒ½ç”¨äº†ï¼Œè¿™å°±æ˜¯ä¸ºå•¥è¦é‡è½½-&gt;æ“ä½œç¬¦ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡-&gt;è·å–åˆ°è¿­ä»£å™¨æ‰€æŒ‡çš„å¯¹è±¡çš„æˆå‘˜ï¼Œè¿™æ—¶å€™ç›´æ¥æ‰“å°æˆå‘˜å˜é‡å³å¯ï¼\n\nä½ å¯èƒ½è§‰å¾—ï¼Œè¿™ä¸å¯¹å•Šï¼ä¹‹å‰é‡è½½çš„è¿™ä¸ªæ“ä½œç¬¦ä¸æ˜¯è¿”å›çš„èŠ‚ç‚¹_dataçš„åœ°å€å—ï¼Ÿä¸ºå•¥å¯ä»¥ç›´æ¥è®¿é—®_dataçš„æˆå‘˜ï¼Ÿ\nPtr operator-&gt;()&#123;    return &amp;(_node-&gt;_data);//è¿”å›åœ°å€&#125;\n\nå®é™…ä¸Šï¼Œè¿™é‡Œåº”è¯¥æ˜¯it-&gt;-&gt;_a1ï¼Œä½†æ˜¯ç¼–è¯‘å™¨åœ¨å¤„ç†çš„æ—¶å€™ç›´æ¥å°†ä¸¤ä¸ªè®¿é—®ç®­å¤´ç®€åŒ–æˆäº†ä¸€ä¸ªï¼Œå³å¢åŠ äº†ä»£ç å¯è¯»æ€§ï¼Œä¹Ÿæ–¹ä¾¿ä½¿ç”¨äº†ï¼\n\n3.7 åå‘è¿­ä»£å™¨ï¼ˆé€‚é…é—®é¢˜ï¼‰å…³äºåå‘è¿­ä»£å™¨ï¼Œè¿™é‡Œç‰µæ‰¯åˆ°ä¸€ä¸ªæ›´æ·±çš„é€‚é…é—®é¢˜ã€‚æˆ‘ç”¨æˆ‘çš„ç¬¨è¯ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼Œæœ‰é—®é¢˜æˆ–è€…æœ‰å•¥é”™è¯¯çš„è¯æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼ğŸ˜‚\næˆ‘ä»¬çŸ¥é“ï¼Œåå‘è¿­ä»£å™¨æ˜¯ä»åå¾€å‰èµ°çš„ï¼Œå®ƒçš„åŠ å‡æ“ä½œå’Œæ­£å‘è¿­ä»£å™¨ç›¸åã€‚\né‚£ä¹ˆæ¯”èµ·å•ç‹¬å®ç°ä¸€ä¸ªåå‘è¿­ä»£å™¨çš„ç±»ï¼Œæˆ‘ä»¬å¯å¦åˆ©ç”¨æ­£å‘è¿­ä»£å™¨ï¼Œç›´æ¥é€‚é…å‡ºä¸€ä¸ªåå‘è¿­ä»£å™¨å‘¢ï¼Ÿæ¯•ç«Ÿçœ‹èµ·æ¥å®ƒä»¬åªæœ‰æ–¹å‘ä¸åŒï¼\n3.7.1 æ˜¾å¼è§„å®šæ¨¡æ¿å‚æ•°Refå’ŒPtrtemplate&lt;class Iterator, class Ref, class Ptr&gt;struct Reverse_iterator&#123;\tIterator _it;\ttypedef Reverse_iterator&lt;Iterator, Ref, Ptr&gt; Self;              Reverse_iterator(Iterator it)\t\t:_it(it)\t&#123;&#125;   &#125;;\n\nè¯´ä¸Šå°±ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå°†åå‘è¿­ä»£å™¨è®¾å®šä¸ºå’Œæ­£å‘ç›¸ä¼¼çš„ç»“æ„ï¼Œä¸è¿‡å®ƒçš„æ¨¡æ¿å‚æ•°å˜æˆäº†æ­£å‘è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯å‚æ•°ç±»å‹Tï¼Œè¿™åœ¨åç»­typdefçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\né™¤äº†ä¸‹é¢çš„è§£å¼•ç”¨æ“ä½œä¹‹å¤–ï¼Œå…¶ä»–åªéœ€è¦å§æ­£å‘è¿­ä»£å™¨åè¿‡æ¥ç”¨ï¼Œå°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼\nRef operator*()&#123;    Iterator tmp = _it;    return *(--tmp);//åå‘è¿­ä»£å™¨è§£å¼•ç”¨è®¿é—®çš„æ˜¯å‰ä¸€ä¸ªä½ç½®çš„æ•°æ®&#125;Ptr operator-&gt;()&#123;    return &amp;(operator*());&#125;\n\nè§£å¼•ç”¨è®¿é—®å‰ä¸€ä¸ªæ•°æ®çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬åˆ¤æ–­ç»“æŸæ˜¯ç”¨!=rend()ï¼Œè€Œrend()æŒ‡å‘çš„æ˜¯åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆæ•°æ®ï¼Œå¦‚æœç›´æ¥è§£å¼•ç”¨å½“å‰å†…å®¹ï¼Œæœ€åä¸€ä¸ªæ•°æ®å°±æ— æ³•è®¿é—®åˆ°ï¼Œå‡ºç°äº†ç¼ºæ¼\n\n//å‰ç½®++Self&amp; operator++()&#123;    --_it;    return *this;&#125;//å‰ç½®--Self&amp; operator--()&#123;    ++_it;    return *this;&#125;bool operator!=(const Self&amp; s)&#123;    return _it != s._it;&#125;\n\næ›´åŠ å®Œæ•´çš„æºç å¯ä»¥å»çœ‹æˆ‘çš„Giteeä»“åº“å“¦ï¼\n\nå®Œæˆäº†ä¸Šé¢çš„ä»£ç åï¼Œæˆ‘ä»¬éœ€è¦åœ¨listæœ¬ç±»é‡Œé¢è¿›è¡Œä¸€æ³¢æ“ä½œï¼Œè®©å®ƒèƒ½å¤Ÿæ”¯æŒåå‘è¿­ä»£å™¨\n//æ”¯æŒåå‘è¿­ä»£å™¨typedef Reverse_iterator&lt;iterator, T&amp;, T*&gt; reverse_iterator;typedef Reverse_iterator&lt;const_iterator, const T&amp;, const T*&gt; const_reverse_iterator;\n\næ³¨æ„ä¸Šé¢çš„æ¨¡æ¿å‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•°éœ€è¦ä¼ å…¥æ­£å‘è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯T\n//è°ƒç”¨åå‘è¿­ä»£å™¨çš„æ„é€ å‡½æ•°reverse_iterator rbegin()&#123;    return reverse_iterator(end());&#125;reverse_iterator rend()&#123;    return reverse_iterator(begin());&#125;const_reverse_iterator rbegin()const&#123;    return const_reverse_iterator(end());&#125;const_reverse_iterator rend()const&#123;    return const_reverse_iterator(begin());&#125;\n\nç”¨ä¸€ä¸ªæ‰“å°ä»£ç ä¾¿å¯ä»¥æµ‹è¯•å‡ºæˆ‘ä»¬çš„æ“ä½œæ˜¯å¦æ­£ç¡®ï¼\nå¯ä»¥çœ‹åˆ°ï¼Œå®Œç¾é€†å‘æ‰“å°å‡ºäº†å†…å®¹ï¼\n\nåˆ©ç”¨æ­£å‘è¿­ä»£å™¨è¿›è¡Œé€‚é…çš„æœ€å¤§å¥½å¤„ï¼Œé‚£å°±æ˜¯å…¶ä»–æ¨¡æ‹Ÿå®ç°çš„å®¹å™¨ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªåå‘è¿­ä»£å™¨ï¼Œåªè¦åœ¨æœ¬ç±»ä¸­åŠ å…¥ä¸Šé¢çš„typedefå’Œ4ä¸ªå‡½æ•°å³å¯ï¼\nå°±ä»¥ä¸Šç¯‡åšå®¢çš„vectorä¸ºä¾‹ï¼ŒåŠ ä¸Šä¸Šè¿°ä»£ç åï¼Œå¥¹ä¹Ÿèƒ½æ”¯æŒåå‘è¿­ä»£å™¨äº†ï¼ï¼ˆæºç ä¹Ÿä¸Šä¼ åˆ°ä»“åº“é‡Œé¢äº†ï¼‰\n\n3.7.2 è°ƒç”¨æ­£å‘è¿­ä»£å™¨ä¸­çš„ç±»å‹é™¤äº†åœ¨åå‘è¿­ä»£å™¨çš„æ¨¡æ¿å®šä¹‰ä¸­ç›´æ¥å®šä¹‰åå‘è¿­ä»£å™¨ä¸­Ref/Ptrè¿™ä¸¤ä¸ªå‚æ•°ç±»å‹ï¼Œè¿˜å¯ä»¥ä»æ­£å‘è¿­ä»£å™¨ä¸­å»å–å‡ºæ¥è¿™ä¸¤ä¸ªå‚æ•°çš„ç±»å‹ï¼›\né¦–å…ˆéœ€è¦åœ¨æ­£å‘è¿­ä»£å™¨__list_iteratorä¸­æ–°å¢å¦‚ä¸‹ä¸¤ä¸ªtypedef\n// ä¸ºäº†è®©åå‘è¿­ä»£å™¨èƒ½ç»Ÿä¸€è·å–åˆ°Refå’ŒPtrï¼Œæ ‡å‡†åº“ä¸­çš„è¿­ä»£å™¨éƒ½å®šä¹‰äº†è¿™ä¸¤ä¸ªtypedeftypedef Ptr pointer;typedef Ref reference; \n\nèƒ½çœ‹åˆ°stlçš„listè¿­ä»£å™¨æºç ä¸­åŒæ ·å­˜åœ¨è¿™ä¸¤ä¸ªtypedef\n\néšååœ¨åå‘è¿­ä»£å™¨ä¸­ï¼Œå¯ä»¥æŒ‰ä¸‹ä¸‹é¢çš„æ–¹å¼å†™æ¥å–å‡ºæ­£å‘è¿­ä»£å™¨ä¸­çš„ç±»å‹\ntemplate&lt;class Iterator, class Ref, class Ptr&gt;struct Reverse_iterator&#123;\tIterator _it;\ttypedef Reverse_iterator&lt;Iterator, Ref, Ptr&gt; Self;\tReverse_iterator(Iterator it)\t\t:_it(it)\t&#123;&#125;\t// ä»æ­£å‘è¿­ä»£å™¨é‡Œé¢å–è¿­ä»£å™¨ä¸­Refå’ŒPtrçš„ç±»å‹\tIterator::reference operator*()\t&#123;\t\tIterator tmp = _it;\t\treturn *(--tmp);//åå‘è¿­ä»£å™¨è§£å¼•ç”¨è®¿é—®çš„æ˜¯å‰ä¸€ä¸ªä½ç½®çš„æ•°æ®\t&#125;\tIterator::pointer operator-&gt;()\t&#123;\t\treturn &amp;(operator*());\t&#125;&#125;\n\nåœ¨listçš„ä¸»ä½“ä¸­ï¼Œè¿˜éœ€è¦å°†åå‘è¿­ä»£å™¨çš„å®šä¹‰ä¿®æ”¹ä¸ºå¦‚ä¸‹å½¢å¼\n//æ”¯æŒåå‘è¿­ä»£å™¨typedef Reverse_iterator&lt;iterator&gt; reverse_iterator;typedef Reverse_iterator&lt;const_iterator&gt; const_reverse_iterator;\n\næ­¤æ—¶ç›´æ¥æ‰§è¡Œg++è¿›è¡Œç¼–è¯‘ï¼Œä¼šæŠ¥é”™å¦‚ä¸‹å†…å®¹ï¼Œè¯´è®©æˆ‘ä»¬åœ¨ç±»å‹å‰é¢æ·»åŠ ä¸€ä¸ªtypenameï¼›\n\nè¿™æ˜¯æˆ‘ä»¬ç¬¬äºŒæ¬¡é‡åˆ°typenameå…³é”®å­—ï¼Œä¸Šä¸€æ¬¡é‡è§æ˜¯åœ¨æ¨¡æ¿ä¸­çš„æ¨¡æ¿å‚æ•°å£°æ˜ã€‚\nåœ¨è¿™é‡Œtypenameçš„ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨Iterator::referenceæ˜¯ä¸€ä¸ªç±»å‹ï¼Œéœ€è¦ç­‰æ­£å‘è¿­ä»£å™¨Iteratorçš„è¿™ä¸ªæ¨¡æ¿ç±»æˆåŠŸå®ä¾‹åŒ–äº†ä¹‹åï¼Œå†å»æŸ¥çœ‹è¿™ä¸ªå‚æ•°çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚å¦‚æœä¸åŠ ä¸Šè¿™ä¸ªå…³é”®å­—ï¼Œç¼–è¯‘å™¨ä¼šç«‹é©¬å»åº·è¿™ä¸ªå‚æ•°çš„ç±»å‹ï¼Œç»“æœå‘ç°è¿™ç©æ„æ˜¯ä¸ªæ¨¡æ¿å‚æ•°ï¼Œå‹æ ¹æ²¡åŠæ³•çŸ¥é“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œé‚£å°±åªèƒ½ç»™ä½ æŠ¥é”™äº†ã€‚ \ntypename Iterator::reference operator*()&#123;\tIterator tmp = _it;\treturn *(--tmp);//åå‘è¿­ä»£å™¨è§£å¼•ç”¨è®¿é—®çš„æ˜¯å‰ä¸€ä¸ªä½ç½®çš„æ•°æ®&#125;typename Iterator::pointer operator-&gt;()&#123;\treturn &amp;(operator*());&#125;\n\nåŠ ä¸Štypenameåé‡æ–°ç¼–è¯‘ï¼Œæ­¤æ—¶å°±æ²¡æœ‰å‡ºç°æŠ¥é”™äº†ã€‚\n\n//é€šè¿‡è¿­ä»£å™¨æ‰“å°é“¾è¡¨\tvoid print_list(list&lt;int&gt;&amp; s)\t&#123;\t\tlist&lt;int&gt;::iterator it = s.begin();\t\twhile (it != s.end())\t\t&#123;\t\t\t//*it = 10;//ä½¿ç”¨éconstè¿­ä»£å™¨çš„æ—¶å€™å¯ä»¥ä¿®æ”¹å€¼\t\t\tcout &lt;&lt; *it &lt;&lt; &quot; &quot;;\t\t\tit++;\t\t&#125;\t\tcout &lt;&lt; endl;\t&#125;\tvoid R_print_list(list&lt;int&gt;&amp; s)\t&#123;\t\tlist&lt;int&gt;::reverse_iterator it = s.rbegin();\t\twhile (it != s.rend())\t\t&#123;\t\t\tcout &lt;&lt; *it &lt;&lt; &quot; &quot;;\t\t\tit++;\t\t&#125;\t\tcout &lt;&lt; endl;\t&#125;\tvoid test01()\t&#123;\t\tlist&lt;int&gt; s1;\t\ts1.push_back(1);\t\ts1.push_back(2);\t\ts1.push_back(3);\t\ts1.push_back(4);\t\tprint_list(s1);\t\tR_print_list(s1);    &#125;\n\næ‰§è¡Œä¸€ä¸‹æµ‹è¯•ä»£ç ï¼Œèƒ½çœ‹åˆ°å…¶æˆåŠŸå®ç°äº†æ­£å‘è¿­ä»£å™¨å’Œåå‘è¿­ä»£å™¨çš„ä½¿ç”¨æ“ä½œã€‚\n$ ./test1 2 3 4 4 3 2 1 \n\næˆ‘ä»¬è¿˜å¯ä»¥åœ¨åå‘è¿­ä»£å™¨ä¸­å†è¿›è¡Œä¸€å±‚typedefï¼Œå°†æ­£å‘è¿­ä»£å™¨ä¸­çš„ç±»å‹æ”¹ä¸ªåå­—ã€‚åœ¨typedefä¸­åŒæ ·éœ€è¦åŠ ä¸Štypename\ntemplate&lt;class Iterator&gt;struct Reverse_iterator&#123;\tIterator _it;\t//typedef Reverse_iterator&lt;Iterator, Ref, Ptr&gt; Self;\ttypedef Reverse_iterator&lt;Iterator&gt; Self;\t// å†è¿›è¡Œä¸€å±‚typedefï¼ˆåŒæ ·éœ€è¦å¸¦ä¸Štypenameï¼‰\ttypedef typename Iterator::reference reference;\ttypedef typename Iterator::pointer pointer;\tReverse_iterator(Iterator it)\t\t:_it(it)\t&#123;&#125;\t// å¯ä»¥æŸ¥çœ‹ä¸‹é¢è¿™ä¸ªæˆªå›¾é‡Œé¢çš„è¯´æ˜\t// https://img.musnow.top/i/2023/12/65785f40a03b4.png\t// ä»æ­£å‘è¿­ä»£å™¨é‡Œé¢å–è¿­ä»£å™¨ä¸­Refå’ŒPtrçš„ç±»å‹\treference operator*()\t&#123;\t\tIterator tmp = _it;\t\treturn *(--tmp);//åå‘è¿­ä»£å™¨è§£å¼•ç”¨è®¿é—®çš„æ˜¯å‰ä¸€ä¸ªä½ç½®çš„æ•°æ®\t&#125;\tpointer operator-&gt;()\t&#123;\t\treturn &amp;(operator*());\t&#125;       // å…¶ä»–éƒ¨åˆ†å’Œ3.7.1æ˜¯ç›¸åŒçš„   &#125;\n\nç¼–è¯‘æˆåŠŸï¼Œæ— æŠ¥é”™\n\n\n3.7.1ä¸­çš„æ–¹å¼vectoråŒæ ·å¯ä»¥ä½¿ç”¨ï¼Œä½†vectoræ˜¯ä¸èƒ½ä½¿ç”¨3.7.2é‡Œé¢çš„è¿™ç§æ–¹å¼æ¥è¿›è¡Œåå‘è¿­ä»£å™¨çš„é€‚é…çš„ã€‚\nè¿™æ˜¯å› ä¸ºåœ¨è‡ªä¸»å®ç°vectorçš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŸç”Ÿçš„ç±»å‹æŒ‡é’ˆæ¥ä½œä¸ºè¿­ä»£å™¨ï¼›æ­¤æ—¶æˆ‘ä»¬æ˜¯æ²¡æœ‰åŠæ³•åœ¨æŒ‡é’ˆï¼ˆå†…ç½®ç±»å‹ï¼‰é‡Œé¢å®šä¹‰typedef Ptr pointerçš„ï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•è·å–åˆ°è¿™ä¸ªè¿­ä»£å™¨çš„æŒ‡é’ˆå’Œå¼•ç”¨çš„ç±»å‹ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰åŠæ³•ä½¿ç”¨typenameçš„æ–¹å¼è®©ç¼–è¯‘å™¨æ¥å¸®æˆ‘ä»¬æ¨æµ‹åå‘è¿­ä»£å™¨ä¸­Ptr/Refçš„ç±»å‹äº†ã€‚\ntemplate&lt;class T&gt;\tclass vector\t&#123;\tpublic:\t\ttypedef T* iterator;\t\ttypedef const T* const_iterator;\t\t//æ”¯æŒåå‘è¿­ä»£å™¨\t\ttypedef Reverse_iterator&lt;iterator, T&amp;, T*&gt; reverse_iterator;\t\ttypedef Reverse_iterator&lt;const_iterator, const T&amp;, const T*&gt; const_reverse_iterator;    \t//...    &#125;\n\nè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ‰ä¸‰ç§è§£å†³åŠæ³•\n\nå’Œlistçš„è‡ªä¸»å®ç°ä¸€æ ·ï¼Œä¸ä½¿ç”¨å†…ç½®ç±»å‹ï¼Œè€Œæ˜¯å†åˆ¶ä½œä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ä½œä¸ºvectorçš„è¿­ä»£å™¨\nè€ŒSTLä¸­ä½¿ç”¨äº†ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„è§£å†³åŠæ³•ï¼Œå³ç‰¹åŒ–å’Œèƒå–ï¼ˆè¿™ä¸¤ä¸ªæœ‰ç‚¹éš¾ç†è§£ï¼Œä¼šåœ¨æ¨¡æ¿çš„è¿›é˜¶åšå®¢ä¸­è¯´æ˜ï¼‰\nå‚è€ƒ3.7.1ï¼Œåœ¨åå‘è¿­ä»£å™¨çš„æ¨¡æ¿å‚æ•°å¡«å…¥Ref/Ptrè¿™ä¸¤ä¸ªæ¨¡æ¿å‚æ•°\n\n3.7.3 typenameä¸Šæ–‡ä¸­æåˆ°ï¼Œtypenameæ˜¯ç”¨äºå‘ŠçŸ¥ç¼–è¯‘å™¨è¯¥å‚æ•°åæ˜¯ä¸€ä¸ªç±»å‹ï¼Œéœ€è¦åœ¨æ¨¡æ¿å®ä¾‹åŒ–ä¹‹åå†å»æŸ¥çœ‹å…·ä½“çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç”¨ä¾‹æ¥å¤ç°è¿™ä¸ªåœºæ™¯\n#include&lt;iostream&gt;#include&lt;list&gt;#include&lt;string&gt;using namespace std;template&lt;class T&gt;void print_list(const list&lt;T&gt;&amp; lt)&#123;\tlist&lt;T&gt;::const_iterator cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;template&lt;class Container&gt;void print_container(const Container&amp; lt)&#123;\tContainer::const_iterator cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;void test_print_list()&#123;\tlist&lt;int&gt; lt1;\tlt1.push_back(1);\tlt1.push_back(2);\tlt1.push_back(3);\tlt1.push_back(4);\tprint_list(lt1);\tprint_container(lt1);\tlist&lt;string&gt; lt2;\tlt2.push_back(&quot;a&quot;);\tlt2.push_back(&quot;b&quot;);\tlt2.push_back(&quot;c&quot;);\tlt2.push_back(&quot;d&quot;);\tprint_list(lt2);\tprint_container(lt2);&#125;\n\nä¸Šé¢ä»£ç ä¸­çš„ä¸¤ä¸ªå‡½æ•°ï¼Œéƒ½å°è¯•ç›´æ¥è·å–äº†æ¨¡æ¿ç±»å‹ä¸­çš„const_iteratorè¿­ä»£å™¨ä½œä¸ºcitå‚æ•°çš„ç±»å‹ï¼Œç›´æ¥ç¼–è¯‘ä¼šå‡ºç°å¦‚ä¸‹çš„æŠ¥é”™\n$ g++ test.cpp -o test -std=c++11test.cpp: In function â€˜void print_list(const std::__cxx11::list&lt;T&gt;&amp;)â€™:test.cpp:11:2: error: need â€˜typenameâ€™ before â€˜std::__cxx11::list&lt;T&gt;::const_iteratorâ€™ because â€˜std::__cxx11::list&lt;T&gt;â€™ is a dependent scope  list&lt;T&gt;::const_iterator cit = lt.begin();  ^~~~~~~test.cpp:11:25: error: expected â€˜;â€™ before â€˜citâ€™  list&lt;T&gt;::const_iterator cit = lt.begin();                         ^~~~                         ;test.cpp:12:9: error: â€˜citâ€™ was not declared in this scope  while (cit != lt.end())         ^~~test.cpp: In function â€˜void print_container(const Container&amp;)â€™:test.cpp:23:2: error: need â€˜typenameâ€™ before â€˜Container::const_iteratorâ€™ because â€˜Containerâ€™ is a dependent scope  Container::const_iterator cit = lt.begin();  ^~~~~~~~~test.cpp:23:27: error: expected â€˜;â€™ before â€˜citâ€™  Container::const_iterator cit = lt.begin();                           ^~~~                           ;test.cpp:24:9: error: â€˜citâ€™ was not declared in this scope  while (cit != lt.end())         ^~~test.cpp: In instantiation of â€˜void print_list(const std::__cxx11::list&lt;T&gt;&amp;) [with T = int]â€™:test.cpp:40:16:   required from heretest.cpp:11:2: error: dependent-name â€˜std::__cxx11::list&lt;T&gt;::const_iteratorâ€™ is parsed as a non-type, but instantiation yields a type  list&lt;T&gt;::const_iterator cit = lt.begin();  ^~~~test.cpp:11:2: note: say â€˜typename std::__cxx11::list&lt;T&gt;::const_iteratorâ€™ if a type is meanttest.cpp: In instantiation of â€˜void print_container(const Container&amp;) [with Container = std::__cxx11::list&lt;int&gt;]â€™:test.cpp:41:21:   required from heretest.cpp:23:2: error: dependent-name â€˜Container::const_iteratorâ€™ is parsed as a non-type, but instantiation yields a type  Container::const_iterator cit = lt.begin();  ^~~~~~~~~test.cpp:23:2: note: say â€˜typename Container::const_iteratorâ€™ if a type is meanttest.cpp: In instantiation of â€˜void print_list(const std::__cxx11::list&lt;T&gt;&amp;) [with T = std::__cxx11::basic_string&lt;char&gt;]â€™:test.cpp:49:16:   required from heretest.cpp:11:2: error: dependent-name â€˜std::__cxx11::list&lt;T&gt;::const_iteratorâ€™ is parsed as a non-type, but instantiation yields a type  list&lt;T&gt;::const_iterator cit = lt.begin();  ^~~~test.cpp:11:2: note: say â€˜typename std::__cxx11::list&lt;T&gt;::const_iteratorâ€™ if a type is meanttest.cpp: In instantiation of â€˜void print_container(const Container&amp;) [with Container = std::__cxx11::list&lt;std::__cxx11::basic_string&lt;char&gt; &gt;]â€™:test.cpp:50:21:   required from heretest.cpp:23:2: error: dependent-name â€˜Container::const_iteratorâ€™ is parsed as a non-type, but instantiation yields a type  Container::const_iterator cit = lt.begin();  ^~~~~~~~~test.cpp:23:2: note: say â€˜typename Container::const_iteratorâ€™ if a type is meant\n\nå–å…¶ç²¾åï¼Œèƒ½çœ‹åˆ°æœ€ä¸»è¦çš„æŠ¥é”™æ˜¯ â€˜citâ€™ was not declared in this scopeï¼Œæ„æ€æ˜¯citè¿™ä¸ªå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸä¸­æ²¡æœ‰å£°æ˜ã€‚\nè¿™ä¸å°±å¾ˆå¥‡æ€ªäº†ï¼Œæ˜æ˜æˆ‘å·²ç»å£°æ˜äº†è¿™ä¸ªå‚æ•°äº†å‘€ï¼Œè¿˜ç»™ä»–èµ‹å€¼äº†ï¼\nåŸå› å‰é¢ä¾¿æåˆ°è¿‡äº†ï¼Œè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨æ²¡æœ‰åŠæ³•æ¨æµ‹å‡ºè¿™ä¸¤ä¸ªæ¨¡æ¿å‚æ•°åœ¨æœªå®ä¾‹åŒ–ä¹‹å‰çš„å˜é‡ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºè¿™ä¸ªæ¨¡æ¿ä¸­çš„ç±»å‹æ˜¯ä¸€ä¸ªè™šæ‹Ÿç±»å‹ï¼Œå¹¶éçœŸå®ç¡®å®šäº†çš„å‚æ•°ç±»å‹ã€‚æœ€ç»ˆå°±å¯¼è‡´citå‚æ•°çœ‹ä¼¼å®ä¾‹åŒ–äº†ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰ã€‚\n// cit å˜é‡åˆ°åº•æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿä¸çŸ¥é“ï¼Container::const_iterator cit = lt.begin();list&lt;T&gt;::const_iterator cit = lt.begin();\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯ç»™è¿™ä¸¤ä¸ªå˜é‡çš„å£°æ˜éƒ½åŠ ä¸Štypenameçš„å…³é”®å­—\ntemplate&lt;class T&gt;void print_list(const list&lt;T&gt;&amp; lt)&#123;\ttypename list&lt;T&gt;::const_iterator cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;template&lt;class Container&gt;void print_container(const Container&amp; lt)&#123;\ttypename Container::const_iterator cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;\n\næ­¤æ—¶ç¼–è¯‘å’Œè¿è¡Œéƒ½æˆåŠŸäº†ã€‚\n[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$ g++ test.cpp -o test -std=c++11[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$ ./test1 2 3 4 1 2 3 4 a b c d a b c d \n\nå½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬ç±»æ¨¡æ¿çš„å‚æ•°ç±»å‹çš„ç¡®å®šçš„ï¼Œé‚£å°±ä¸éœ€è¦æœ‰typenameå…³é”®å­—ï¼›æ¯”å¦‚ä¸‹æ–¹listå·²ç»ç¡®å®šæ˜¯intç±»å‹äº†ï¼Œé‚£ä¹ˆè¿­ä»£å™¨çš„ç±»å‹è‡ªç„¶ä¹Ÿæ˜¯å¯ä»¥è¢«ç¡®å®šä¸‹æ¥çš„ã€‚\nvoid print_list_int(const list&lt;int&gt;&amp; lt)&#123;\tlist&lt;int&gt;::const_iterator cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;\n\nç¼–è¯‘æ— æŠ¥é”™\n[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$ g++ test.cpp -o test -std=c++11[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$\n\nå½“ç„¶ï¼Œä½¿ç”¨autoå…³é”®å­—ä¹Ÿæ˜¯å¯ä»¥çš„çš„ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¹Ÿä¸éœ€è¦å¸¦ä¸Štypenameï¼›è¿™æ˜¯å› ä¸ºautoå·²ç»å‘Šè¯‰äº†ç¼–è¯‘å™¨è¿™é‡Œæ˜¯ä¸€ä¸ªå‚æ•°ç±»å‹ï¼Œåªéœ€è¦åœ¨lt.begin()è¿”å›çš„æ—¶å€™ï¼Œæ ¹æ®è¿”å›å€¼çš„å‚æ•°æ¥å–citå˜é‡çš„å‚æ•°ç±»å‹å°±å¯ä»¥äº†ã€‚\ntemplate&lt;class T&gt;void print_list_auto(const list&lt;T&gt;&amp; lt)&#123;\tauto cit = lt.begin();\twhile (cit != lt.end())\t&#123;\t\tcout &lt;&lt; (*cit) &lt;&lt; &quot; &quot;;\t\tcit++;\t&#125;\tcout &lt;&lt; endl;&#125;\n\næµ‹è¯•ä¸€ä¸‹\nvoid test_print_list()&#123;\tlist&lt;int&gt; lt1;\tlt1.push_back(1);\tlt1.push_back(2);\tlt1.push_back(3);\tlt1.push_back(4);\tprint_list(lt1);\tprint_list_int(lt1);\tprint_list_auto(lt1);\tprint_container(lt1);&#125;\n\nç»“æœ\n[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$ g++ test.cpp -o test -std=c++11[muxue:~/code/c/c_cpp/cpp/22-07-14 list/reverse_iterator]$ ./test1 2 3 4 1 2 3 4 1 2 3 4 1 2 3 4 \n\næˆ‘ä»¬è¦è®°ä½çš„æ˜¯ï¼šåªè¦ä»æœªå®ä¾‹åŒ–çš„ç±»æ¨¡æ¿ä¸­å–å‚æ•°ç±»å‹ï¼Œéƒ½éœ€è¦åŠ ä¸Štypenameå…³é”®å­—æ¥æŒ‡å®šï¼\nç»“è¯­æœ¬æ¬¡listçš„æ¨¡æ‹Ÿå®ç°ï¼Œæˆ‘ä»¬å°è¯•æ¨¡æ‹Ÿäº†ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„è¿­ä»£å™¨ç±»ï¼Œå¹¶å®ç°äº†åå‘è¿­ä»£å™¨\næœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æœ¬åšå®¢æœ‰é”™è¯¯ï¼Œéƒ½æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘çº¢é»‘æ ‘çš„æ€§è´¨å’Œå®ç°","url":"/posts/3503649261/","content":"ä¸Šç¯‡åšå®¢æˆ‘ä»¬äº†è§£äº†AVLæ ‘ï¼Œè¿™ç¯‡åšå®¢å°±è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªäºŒå‰æ ‘ï¼šçº¢é»‘æ ‘\n\nä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼šVS2019\n\n\n\n[TOC]\n\nåšå®¢é‡Œé¢å¼•ç”¨äº†ä¸€äº›ç™¾åº¦æœåˆ°çš„å›¾ç‰‡ï¼ˆè‡ªå·±æ‡’çš„ç”»äº†ï¼Œå‘œå‘œï¼‰\n1.æ¦‚å¿µAVLæ ‘æ˜¯ä¸€ä¸ªå‡ ä¹å®Œå…¨å¹³è¡¡çš„æœç´ äºŒå‰æ ‘ï¼Œå…¶å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸ä¼šè¶…è¿‡1ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„ï¼Œæ˜¯æ¯ä¸€æ¬¡æ’å…¥éƒ½æœ‰å¯èƒ½éœ€è¦æ—‹è½¬å¤šæ¬¡ï¼Œæ’å…¥çš„æ•ˆç‡è¾ƒä½ã€‚\nè€Œçº¢é»‘æ ‘åˆ™é€‰æ‹©äº†â€œç›¸å¯¹å¹³è¡¡â€ï¼Œå¹¶æ‹¥æœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š\n\nçº¢é»‘æ ‘å¯ä»¥ä¿è¯æœ€é•¿è·¯å¾„çš„å°äºæœ€çŸ­è·¯å¾„çš„2å€\n\næ¯”å¦‚æœ€çŸ­è·¯å¾„ä¸º30ï¼Œé‚£ä¹ˆæœ€é•¿è·¯å¾„å°±ä¸èƒ½è¶…è¿‡60\n\n\nå¯¹äºcpuæ¥è¯´ï¼ŒAVLæ ‘éå†20æ¬¡ï¼ˆç™¾ä¸‡çº§æ•°æ®ï¼‰å’Œçº¢é»‘æ ‘éå†40æ¬¡çš„æ—¶é—´å·®è·æå°ã€‚æ‰€ä»¥çº¢é»‘æ ‘å³ä¿æŒäº†ç›¸å¯¹å¹³è¡¡ï¼Œåˆå‡å°äº†AVLæ ‘å¤šæ¬¡æ—‹è½¬çš„æ¶ˆè€—ã€‚\n\n1.1 æ€§è´¨å…¶é€šè¿‡ä¸‹é¢çš„å‡ ç‚¹æ¥ç»´æŒè¿™ä¸€æ€§è´¨ï¼š\n\næ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²\næ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²\næ¯ä¸€ä¸ªçº¢èŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\nå¶å­èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰è§†ä½œé»‘è‰²\n\nä¸ºä»€ä¹ˆæ»¡è¶³äº†è¿™å‡ ä¸ªæƒ…å†µï¼Œå°±æ»¡è¶³äº†çº¢é»‘æ ‘çš„æœ€é•¿è·¯å¾„çš„å°äºæœ€çŸ­è·¯å¾„çš„2å€çš„æ€§è´¨å‘¢ï¼Ÿ\nçº¦æŸ4å’Œ5ï¼Œä¿è¯äº†çº¢é»‘æ ‘çš„å¤§è‡´å¹³è¡¡ï¼šæ ¹åˆ°å¶å­çš„æ‰€æœ‰è·¯å¾„ä¸­ï¼Œæœ€é•¿è·¯å¾„ä¸ä¼šè¶…è¿‡æœ€çŸ­è·¯å¾„çš„2å€ã€‚\nè¿™ä½¿å¾—çº¢é»‘æ ‘åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½æœ‰O(logN) çš„æŸ¥æ‰¾æ•ˆç‡\n\né»‘è‰²é«˜åº¦ä¸º3æ—¶ï¼Œæœ€çŸ­è·¯å¾„ï¼šé»‘è‰²â†’ é»‘è‰² â†’é»‘è‰²\næœ€é•¿è·¯å¾„ï¼šé»‘è‰²â†’çº¢è‰² â†’é»‘è‰² â†’çº¢è‰² â†’é»‘è‰²\næ­¤æ—¶æœ€çŸ­è·¯å¾„çš„é•¿åº¦ä¸º2ï¼ˆä¸ç®—Nilçš„å¶å­èŠ‚ç‚¹ï¼‰ï¼Œæœ€é•¿è·¯å¾„ä¸º4\n\nè¿™é‡Œå¯ä»¥å¾—å‡ºä¸€ä¸ªæ™®éè§„å¾‹ï¼Œçº¢é»‘æ ‘æœ€çŸ­è·¯å¾„å³ä¸ºå…¨é»‘è·¯å¾„ã€‚è€Œæœ€é•¿è·¯å¾„æ˜¯ä¸€é»‘ä¸€çº¢é—´éš”çš„æƒ…å†µ\n1.2 æ—¶é—´å¤æ‚åº¦å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰å’Œçº¢é»‘æ ‘éƒ½æ˜¯å¸¸ç”¨çš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚å®ƒä»¬çš„æŸ¥è¯¢æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½ä¸ºO(log n)ï¼Œå…¶ä¸­næ˜¯æ ‘ä¸­èŠ‚ç‚¹çš„æ•°é‡ã€‚\nåœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­ï¼Œä»»æ„èŠ‚ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1ï¼Œé€šè¿‡å±€éƒ¨æ—‹è½¬æ“ä½œå¯ä»¥ä¿æŒå¹³è¡¡ã€‚è¿™æ ·ï¼Œæ ‘çš„é«˜åº¦å§‹ç»ˆä¿æŒåœ¨O(log n)çš„æ°´å¹³ï¼Œä»è€Œä½¿å¾—æŸ¥è¯¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(log n)ã€‚\nçº¢é»‘æ ‘æ˜¯ä¸€ç§æ›´åŠ å¤æ‚çš„è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼Œå®ƒé€šè¿‡å¯¹èŠ‚ç‚¹è¿›è¡ŒæŸ“è‰²ï¼ˆçº¢è‰²æˆ–é»‘è‰²ï¼‰å’Œæ—‹è½¬æ“ä½œæ¥ä¿æŒå¹³è¡¡ã€‚çº¢é»‘æ ‘å…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š\næ ¹æ®ä¸Šæ–‡æåˆ°çš„çº¢é»‘æ ‘æ€§è´¨ï¼Œçº¢é»‘æ ‘çš„é«˜åº¦å§‹ç»ˆä¿æŒåœ¨O(log n)çš„æ°´å¹³ï¼Œå› æ­¤æŸ¥è¯¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºO(log n)ã€‚\nç»¼ä¸Šæ‰€è¿°ï¼Œå¹³è¡¡äºŒå‰æ ‘å’Œçº¢é»‘æ ‘çš„æŸ¥è¯¢å¹³å‡æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(log n)ã€‚æœ€å·®æƒ…å†µä¸­ï¼Œä¸¤ä¸ªæ•°çš„èŠ‚ç‚¹é«˜åº¦éƒ½ä¸ä¼šè¶…è¿‡ 2log(n+1)ï¼Œæ‰€ä»¥æœ€åçš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(log N)\n\n2.è®¾è®¡ä¸€é¢—çº¢é»‘æ ‘åœ¨è®¾è®¡çº¢é»‘æ ‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ç‰¢è®°ä¸Šé¢çš„5ç‚¹ã€‚å…¶ä¸­å‰4ç‚¹éå¸¸é‡è¦ä¸”ä¸å¯ä»¥è¢«ç ´åã€‚ä¸€æ—¦è¢«ç ´åï¼Œå°±å½±å“äº†çº¢é»‘æ ‘çš„åŸºæœ¬æ€§è´¨ã€‚\n2.1 è®¾è®¡èŠ‚ç‚¹å’ŒAVLæ ‘ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æŠŠèŠ‚ç‚¹å•ç‹¬æˆä¸€ä¸ªç±»ï¼Œæ¥å­˜æ”¾æˆ‘ä»¬éœ€è¦çš„pair\nè¿™é‡Œå°±è®¾è®¡åˆ°äº†é¢œè‰²çš„åˆå€¼åº”è¯¥ç»™ä»€ä¹ˆã€‚çº¢è‰²ï¼Œè¿˜æ˜¯é»‘è‰²ï¼Ÿ\næ¥çœ‹çœ‹æ€§è´¨3å’Œ4ï¼š\n\nçº¢è‰²çš„å·¦å³å­æ ‘å¿…é¡»æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\n\nç®€å•æ€è€ƒï¼Œå³å¯å‘ç°ï¼Œæ’å…¥çº¢èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ›´å¥½æ§åˆ¶ã€‚è€Œæ’å…¥é»‘èŠ‚ç‚¹ææœ‰å¯èƒ½ç ´åæ€§è´¨4ä¸”è¾ƒéš¾ä¿®å¤ã€‚\n//æšä¸¾ï¼Œå®šä¹‰é¢œè‰²enum Color&#123;\tRED,//0\tBLACK,//1&#125;;//èŠ‚ç‚¹ç±»template&lt;class K, class V&gt;struct RBTreeNode&#123;\tRBTreeNode&lt;K, V&gt;* _left;\tRBTreeNode&lt;K, V&gt;* _right;\tRBTreeNode&lt;K, V&gt;* _parent;\tpair&lt;K, V&gt; _kv;\t//AVLæ ‘çš„å¹³è¡¡å› å­ï¼Œåœ¨çº¢é»‘æ ‘ä¸­ä¸ºé¢œè‰²\tColor _col;\t//æ’å…¥èŠ‚ç‚¹çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ºçº¢è‰²\t//å› ä¸ºè¿™ä¸ªæ»¡è¶³æ€§è´¨3ä¸”ä¸ä¼šç ´åæ€§è´¨4\tRBTreeNode(const pair&lt;K, V&gt;&amp; kv)\t\t:_kv(kv),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_col(RED)\t&#123;&#125;&#125;;\n\n2.2 æ’å…¥çš„å‡ ç§æƒ…å†µèŠ‚ç‚¹è®¾è®¡å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ’å…¥çš„é€»è¾‘æå®šï¼Œé‚£ä¹ˆçº¢é»‘æ ‘ä¹Ÿå°±å®Œæˆäº†ï¼\nå‰åŠéƒ¨åˆ†çš„ä»£ç å’ŒAVLæ ‘å®Œå…¨ç›¸åŒï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç»™æ ¹èŠ‚ç‚¹ä¸€ä¸ªé»‘è‰²ï¼ˆé»˜è®¤æ˜¯çº¢è‰²ï¼‰ä»¥ç»´æŒæ€§è´¨2\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;\t//åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘\tif (_root == nullptr)\t&#123;\t\t_root = new Node(kv);\t\t_root-&gt;_col = BLACK;//è¿™é‡Œå¿…é¡»è¦æ‰‹åŠ¨ç»™é»‘è‰²\t\treturn true;\t&#125;\t//kvæ ‘çš„æ“ä½œ\tNode* parent = nullptr;\tNode* cur = _root;\twhile (cur)\t&#123;\t\t//åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®\t\tif (cur-&gt;_kv.first &lt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_right;\t\t&#125;\t\telse if (cur-&gt;_kv.first &gt; kv.first)\t\t&#123;\t\t\tparent = cur;\t\t\tcur = cur-&gt;_left;\t\t&#125;\t\telse &#123;\t\t\treturn false;\t\t&#125;\t&#125;\t//æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹\tcur = new Node(kv);\tif (parent-&gt;_kv.first &lt; kv.first)\t&#123;\t\tparent-&gt;_right = cur;\t&#125;\telse\t&#123;\t\tparent-&gt;_left = cur;\t&#125;\tcur-&gt;_parent = parent;       //è°ƒæ•´       //â€¦â€¦  &#125;\n\n2.2.1 æƒ…å†µ1ï¼šæ— éœ€æ—‹è½¬åœ¨ä¸‹é¢çš„è¿™ç§æƒ…å†µä¸­ï¼Œæˆ‘ä»¬åœ¨pçš„å·¦è¾¹æ’å…¥äº†ä¸€ä¸ªcuræ–°èŠ‚ç‚¹ã€‚æ­¤æ—¶è¿åäº†æ€§è´¨3ï¼Œçº¢èŠ‚ç‚¹çš„å­©å­å¿…é¡»è¦æ˜¯é»‘èŠ‚ç‚¹ã€‚\nè¿™ç§æƒ…å†µå¿…é¡»æ»¡è¶³på’Œuéƒ½æ˜¯çº¢èŠ‚ç‚¹\n\néšåæˆ‘ä»¬å°±éœ€è¦å¼€å§‹å‘ä¸Šè¿›è¡Œæ›´æ–°ï¼Œæ“ä½œå¦‚ä¸‹ï¼š\n\næŠŠpå’Œuéƒ½æ”¹æˆé»‘èŠ‚ç‚¹\næŠŠgæ”¹æˆçº¢èŠ‚ç‚¹\n\nä¿®æ”¹ä¹‹åçš„ç»“æœå¦‚ä¸‹ï¼Œå³ä¸å½±å“æ€§è´¨3ï¼›ä¹Ÿä¿è¯äº†é»‘èŠ‚ç‚¹çš„ä¸ªæ•°ä¸å˜ï¼Œç»´æŒäº†æ€§è´¨4\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„gä¸ä¸€å®šæ˜¯æ ¹èŠ‚ç‚¹ã€‚æ‰€ä»¥åœ¨æ“ä½œå®Œè¿™ä¸€è¯¾å­æ ‘ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­å‘ä¸Šè¿›è¡Œæ“ä½œï¼Œé¿å…gçš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²çš„æƒ…å†µã€‚\n\nä»£ç å®ç°å¦‚ä¸‹ï¼ˆä»¥çˆ¶èŠ‚ç‚¹ä¸ºgçš„å·¦å­æ ‘ä¸ºä¾‹ï¼‰\n//æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°é¢œè‰²,åªæœ‰å‡ºç°è¿ç»­çº¢è‰²ä¹‹åæ‰éœ€è¦æ›´æ–°while (parent &amp;&amp; parent-&gt;_col==RED)&#123;    //pæ˜¯gçš„å·¦    if (parent == grandpa-&gt;_left)    &#123;        Node* uncle = grandpa-&gt;_right;        //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰        if (uncle &amp;&amp; uncle-&gt;_col == RED)        &#123;            uncle-&gt;_col = BLACK;            parent-&gt;_col = BLACK;            grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢            //ç»§ç»­å‘ä¸Šè°ƒæ•´            //cur = cur-&gt;_parent;            //parent = parent-&gt;_parent;            cur = grandpa;            parent = cur-&gt;_parent;        &#125;    &#125;    else&#123;        //....    &#125;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§è°ƒæ•´ä¼šæŠŠgæ”¹æˆçº¢èŠ‚ç‚¹ã€‚å¦‚æœGæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ”¹æˆçº¢è‰²ä¹‹åå°±ä¸ç¬¦åˆæ€§è´¨äº†ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨æ“ä½œå®Œæˆä¹‹åï¼Œç»Ÿä¸€æŠŠæ ¹èŠ‚ç‚¹æ”¹æˆé»‘è‰²\n//ä¸ç®¡æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæœ€åéƒ½æŠŠæ ¹æ”¹æˆé»‘ï¼Œç¬¦åˆæ¡ä»¶2_root-&gt;_col = BLACK;\n\n2.2.2 æƒ…å†µ2ï¼šéœ€è¦å•æ—‹å½“æˆ‘ä»¬æ’å…¥äº†ä¸€ä¸ªcurå‘ä¸Šæ›´æ–°çš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šé‡åˆ°ä¸‹å›¾ä¸­é—´çš„æƒ…å†µã€‚pæ˜¯çº¢èŠ‚ç‚¹ï¼Œè¿åäº†æ€§è´¨3ï¼Œè€Œuæ˜¯é»‘èŠ‚ç‚¹ï¼Œä¸èƒ½ç®€å•ç²—æš´çš„é€šè¿‡æŠŠpæ”¹æˆçº¢æ¥è§£å†³ã€‚\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦é’ˆå¯¹gè¿›è¡Œä¸€æ¬¡å•æ—‹ï¼ˆå›¾ä¸­æ˜¯å³å•æ—‹ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå‘uæ—‹è½¬ï¼‰ã€‚å› ä¸ºcurå’Œpå½¢æˆäº†åŒä¾§çš„è¿ç»­ä¸¤ä¸ªçº¢èŠ‚ç‚¹ã€‚å’ŒAVLæ ‘çš„å•æ—‹æƒ…å†µç›¸ä¼¼ï¼Œåªæœ‰è¿™ä¸¤èŠ‚ç‚¹åœ¨åŒä¾§ï¼Œæ‰å¯ä»¥æ‰§è¡Œå•æ—‹ã€‚\næ—‹è½¬å®Œæ¯•ä¹‹åï¼Œéœ€è¦æŠŠgæ›´æ–°ä¸ºçº¢èŠ‚ç‚¹ï¼Œpæ›´æ–°ä¸ºé»‘èŠ‚ç‚¹\n2.2.3 æƒ…å†µ3ï¼šéœ€è¦åŒæ—‹åœ¨æƒ…å†µ2ä¸­ï¼Œpå’Œcuréƒ½æ˜¯åœ¨å®ƒä»¬çˆ¶äº²çš„åŒä¸€ä¾§ã€‚è€Œæƒ…å†µ3å°±æ˜¯på’Œcuråœ¨çˆ¶äº²çš„ä¸åŒä¾§ã€‚\n\næ¯”å¦‚pæ˜¯gçš„å·¦å­æ ‘ï¼Œcuræ˜¯pçš„å³å­æ ‘\nåŒæ—¶æ»¡è¶³pæ˜¯çº¢ï¼Œuæ˜¯é»‘\n\nè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œä¸€æ¬¡ä¸‰æ—‹ï¼Œæ“ä½œå¦‚ä¸‹ï¼š\n\nä»¥pä½œä¸ºåŸºç‚¹ï¼Œå‘curçš„å¦å¤–ä¸€ä¸ªæ–¹å‘å•æ—‹ä¸€æ¬¡ï¼ˆä¸Šå›¾ä¸­å°±æ˜¯å·¦æ—‹ï¼‰\næ—‹è½¬äº†ä¹‹åï¼Œå°±ä¼šå˜æˆæƒ…å†µ2\nè¿™æ—¶å€™å†ä»¥gä¸ºåŸºç‚¹ï¼Œå‘uçš„æ–¹å‘æ—‹è½¬ä¸€æ¬¡ï¼ˆä¸Šå›¾ä¸­ä¸ºå³æ—‹ï¼‰\næ—‹è½¬å®Œæˆä¹‹åï¼ŒæŠŠgè®¾ç½®ä¸ºçº¢ï¼Œcurè®¾ç½®ä¸ºé»‘å³å¯\n\n\nä¸€ä¸‹æ˜¯å®Œæ•´çš„ä¸‰ç§æƒ…å†µä»£ç ï¼ˆpæ˜¯gçš„å·¦å­æ ‘çš„æƒ…å†µï¼‰\n//pæ˜¯gçš„å·¦if (parent == grandpa-&gt;_left)&#123;    Node* uncle = grandpa-&gt;_right;    //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰    if (uncle &amp;&amp; uncle-&gt;_col == RED)    &#123;        uncle-&gt;_col = BLACK;        parent-&gt;_col = BLACK;        grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢        //ç»§ç»­å‘ä¸Šè°ƒæ•´        //cur = cur-&gt;_parent;        //parent = parent-&gt;_parent;        cur = grandpa;        parent = cur-&gt;_parent;    &#125;    else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)    &#123;        //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰        if (cur == parent-&gt;_left)        &#123;            RotateR(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹            parent-&gt;_col = BLACK;            grandpa-&gt;_col = RED;        &#125;        else//cur == parent-&gt;_right        &#123;            //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹            //   g            // p            //   c            RotateL(parent);            RotateR(grandpa);            grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²            cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„        &#125;        break;    &#125;&#125;else&#123;    //....&#125;\n\nç”±äºç¯‡å¹…é™åˆ¶ï¼Œpæ˜¯gå³å­æ ‘çš„æƒ…å†µå°±ä¸è´´å‡ºæ¥äº†ï¼Œå®é™…ä¸Šå°±æ˜¯æŠŠä¸Šé¢çš„ä»£ç å…¨åè¿‡æ¥å°±è¡Œäº†\n\nå®Œæ•´ä»£ç è¯·æŸ¥çœ‹æˆ‘çš„giteeä»“åº“\n\n2.3 æŸ¥æ‰¾ï¼ˆå’ŒAVLæ ‘å®Œå…¨ç›¸åŒï¼‰//å› ä¸ºkvlæ ‘æˆ‘ä»¬éœ€è¦ä¿®æ”¹valueï¼Œæ‰€ä»¥è¿”å›èŠ‚ç‚¹çš„æŒ‡é’ˆNode* _FindR(Node* root, const K&amp; key)&#123;\tif (root == nullptr)\t\treturn nullptr;\tif (root-&gt;_kv.first &lt; key)\t&#123;\t\treturn _FindR(root-&gt;_right, key);\t&#125;\telse if (root-&gt;_kv.first &gt; key)\t&#123;\t\treturn _FindR(root-&gt;_left, key);\t&#125;\telse\t&#123;\t\treturn root;\t&#125;&#125;//æŸ¥æ‰¾æ˜¯é€šè¿‡keyæ¥è¿›è¡Œçš„Node* FindR(const K&amp; key)&#123;\treturn _FindR(_root, key);&#125;\n\n2.4 åˆ¤æ–­æ˜¯å¦æ˜¯çº¢é»‘æ ‘æœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œ1æ˜¯å¯ä»¥é€šè¿‡è®¡ç®—æœ€å¤§é«˜åº¦&#x2F;æœ€å°é«˜åº¦è¿›è¡Œé—´æ¥åˆ¤æ–­ï¼Œ2æ˜¯ä»¥çº¢é»‘æ ‘æ€§è´¨æ¥éªŒè¯æ˜¯å¦æ»¡è¶³æœ€ä¸Šé¢æåˆ°çš„5ç‚¹\n2.4.1 è®¡ç®—æœ€å°æœ€å¤§é«˜åº¦è¿™é‡Œå®ç°é€’å½’å³å¯ï¼Œæœ€å°é•¿åº¦å…¶å®å°±æ˜¯åœ¨æœ€åreturnçš„åˆ¤æ–­ä¸­ï¼ŒæŠŠå¤§äºå·æ”¹æˆå°äºå·ï¼Œè¿”å›å°çš„é‚£ä¸ªå­æ ‘çš„é«˜åº¦+1\nint maxHeight()&#123;\treturn _maxHeight(_root);&#125;int minHeight() &#123;\treturn _minHeight(_root);&#125;//æœ€å¤§é•¿åº¦int _maxHeight(Node* root)&#123;\tif (root == nullptr)\t\treturn 0;\tint lh = _maxHeight(root-&gt;_left);\tint rh = _maxHeight(root-&gt;_right);\treturn lh &gt; rh ? lh + 1 : rh + 1;&#125;//æœ€å°é•¿åº¦int _minHeight(Node* root)&#123;\tif (root == nullptr)\t\treturn 0;\tint lh = _minHeight(root-&gt;_left);\tint rh = _minHeight(root-&gt;_right);\treturn lh &lt; rh ? lh + 1 : rh + 1;&#125;\n\nåªè¦æœ€å¤§é•¿åº¦å°äºæœ€å°é•¿åº¦çš„2å€ï¼Œé‚£ä¹ˆåŸºæœ¬è§„åˆ™å°±æ˜¯æ²¡æœ‰ç ´åçš„\n\nä½†è¿™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ£€æŸ¥å®ƒæ˜¯å¦æ»¡è¶³çº¢é»‘æ ‘çš„å…¶ä½™æ€§è´¨\n2.4.2 é€’å½’æ£€æŸ¥æ€§è´¨è¿™é‡Œå†æ¬¡åˆ—å‡º5ç‚¹æ€§è´¨\n\næ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²\næ ¹èŠ‚ç‚¹ä¸€å®šæ˜¯é»‘è‰²\næ¯ä¸€ä¸ªçº¢èŠ‚ç‚¹çš„å·¦å³å­æ ‘éƒ½æ˜¯é»‘è‰²\næ¯ä¸€ä¸ªåˆ°å¶å­ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰çš„æ”¯è·¯ä¸Šé»‘èŠ‚ç‚¹æ•°é‡ç›¸åŒ\nå¶å­èŠ‚ç‚¹ï¼ˆç©ºèŠ‚ç‚¹NILï¼‰è§†ä½œé»‘è‰²\n\nç„¶åé€šè¿‡ä¸¤ä¸ªå‡½æ•°æ¥å®ç°ï¼Œå…¶ä¸­ä¸€ä¸ªå‡½æ•°éœ€è¦è¿›è¡Œé€’å½’\nbool IsRBTree()&#123;    //æ£€æŸ¥çº¢é»‘æ ‘å‡ æ¡è§„åˆ™    Node* pRoot = _root;    //ç©ºæ ‘ä¹Ÿæ˜¯çº¢é»‘æ ‘    if (nullptr == pRoot)        return true;    //æ£€æµ‹æ ¹èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³æƒ…å†µ2    if (BLACK != pRoot-&gt;_col)    &#123;        cout &lt;&lt; &quot;è¿å2ï¼šæ ¹èŠ‚ç‚¹å¿…é¡»ä¸ºé»‘è‰²&quot; &lt;&lt; endl;        return false;    &#125;    //è·å–ä»»æ„ä¸€æ¡è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œä½œä¸ºåŸºå‡†å€¼    size_t blackCount = 0;    Node* pCur = pRoot;    while (pCur)    &#123;        if (BLACK == pCur-&gt;_col)            blackCount++;        pCur = pCur-&gt;_left;    &#125;    //æ£€æµ‹æ˜¯å¦æ»¡è¶³çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œkç”¨æ¥è®°å½•è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°    size_t k = 0;    return _IsValidRBTree(pRoot, k, blackCount);&#125;\t//æ£€æµ‹æ˜¯å¦ä¸ºRBæ ‘bool _IsValidRBTree(Node* pRoot, size_t k, const size_t blackCount)&#123;    //èµ°åˆ°nullä¹‹åï¼Œåˆ¤æ–­kå’Œblackæ˜¯å¦ç›¸ç­‰    if (nullptr == pRoot)    &#123;        if (k != blackCount)        &#123;            cout &lt;&lt; &quot;è¿å4ï¼šæ¯æ¡è·¯å¾„ä¸­é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°å¿…é¡»ç›¸åŒ&quot; &lt;&lt; endl;            return false;        &#125;        return true;    &#125;    //ç»Ÿè®¡é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°    if (BLACK == pRoot-&gt;_col)        k++;    //æ£€æµ‹å½“å‰èŠ‚ç‚¹ä¸å…¶åŒäº²æ˜¯å¦éƒ½ä¸ºçº¢è‰²    if (RED == pRoot-&gt;_col &amp;&amp; pRoot-&gt;_parent &amp;&amp; pRoot-&gt;_parent-&gt;_col == RED)    &#123;        cout &lt;&lt; &quot;è¿å3ï¼šå­˜åœ¨è¿åœ¨ä¸€èµ·çš„çº¢è‰²èŠ‚ç‚¹&quot; &lt;&lt; endl;        return false;    &#125;    return _IsValidRBTree(pRoot-&gt;_left, k, blackCount) &amp;&amp;        _IsValidRBTree(pRoot-&gt;_right, k, blackCount);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ç®¡æ˜¯éšæœºæ•°è¿˜æ˜¯é¡ºåºæ’å…¥ï¼Œéƒ½é€šè¿‡äº†æ£€æŸ¥\n\n3.çº¢é»‘æ ‘çš„è¿ç”¨çº¢é»‘æ ‘åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰ä½¿ç”¨ï¼Œåœ¨C++ä¸­ï¼Œæœ€ä¸ºç»å…¸çš„ä¾¿æ˜¯mapå’Œsetè¿™ä¸¤ä¸ªå®¹å™¨ï¼Œå®ƒä»¬ä¾¿ä½¿ç”¨äº†çº¢é»‘æ ‘ä½œä¸ºåº•å±‚é€»è¾‘\n\nhttps://gitee.com/musnow/learn_cpp_code/blob/master/STL-Sourcecode/stl_tree.h\n\nåœ¨stlæºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°è¿™ä¸ªtree.hï¼Œé‡Œé¢ä¾¿æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘çš„å®ç°ã€‚è€Œmapå’Œsetå°±æ˜¯è°ƒç”¨äº†çº¢é»‘æ ‘ï¼Œåªåšäº†ä¸€ä¸ªç®€å•çš„å°è£…\nç»“è¯­åœ¨ä¸‹ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä¼šè®°å½•mapå’Œsetçš„åŸºæœ¬ä½¿ç”¨ï¼Œä»¥åŠé€šè¿‡çº¢é»‘æ ‘æ¨¡æ‹Ÿå®ç°mapå’Œset\næ„Ÿè°¢å¤§å®¶æ”¯æŒï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","æ ‘","Cpp"]},{"title":"ã€C++ã€‘STL map_set","url":"/posts/97886566/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹STLåº“é‡Œé¢çš„map&#x2F;setçš„ä½¿ç”¨ï¼Œå¹¶å°è¯•ç”¨è‡ªå·±å†™çš„çº¢é»‘æ ‘å°è£…ä¸€ä¸ªç±»ä¼¼çš„map/setå‡ºæ¥\n\n\n\næ‰€ç”¨ç¼–è¯‘å™¨ï¼šVS2019\n\n[TOC]\n1 setsetå°±æ˜¯äºŒå‰æœç´¢æ ‘ä¸­åªæœ‰å•ä¸ªkeyçš„æ ‘ï¼Œå®ƒæœ‰ä¸‹é¢çš„å‡½æ•°å¯ä¾›ä½¿ç”¨\n1.1 æ„é€ å‡½æ•°ã€è¿­ä»£å™¨æ„é€ å‡½æ•°ã€è¿­ä»£å™¨ä»€ä¹ˆçš„éƒ½å¾ˆç®€å•ï¼Œåœ¨è¿™é‡Œå°±æåˆ°äº†ï¼Œå’Œå…¶ä»–STLåŸºæœ¬ä¸€è‡´\n\n\n1.2 èŠ‚ç‚¹è®¡æ•° sizesetè‡ªå¸¦èŠ‚ç‚¹è®¡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¹‹é—´è·å–äºŒå‰æ ‘ä¸­èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œæˆ–åˆ¤æ–­setæ˜¯å¦ä¸ºç©º\n\n1.3 æ’å…¥åˆ é™¤æ’å…¥åˆ é™¤ç­‰å‡½æ•°åœ¨è¿™é‡Œä¸è¿‡å¤šè§£é‡Šï¼Œä½¿ç”¨æ–¹æ³•å’Œstringã€vectorå®Œå…¨ä¸€è‡´ã€‚å¦‚æœå¤§å®¶çš„stlæ˜¯ä»stringä¸€è·¯å­¦ä¹ è¿‡æ¥ï¼Œé‚£ä¹ˆå¯¹äºè¿™äº›å‡½æ•°çš„ä½¿ç”¨è‚¯å®šæ²¡æœ‰é—®é¢˜ï¼\n\næ’å…¥å¯ä»¥æ’å…¥å•ä¸ªå…ƒç´ ï¼Œå…¶è¿”å›ä¸€ä¸ªé”®å€¼å¯¹åŒ…å«è¿™ä¸ªå…ƒç´ çš„è¿­ä»£å™¨+ä¸€ä¸ªboolæ ‡è¯†æ˜¯å¦æ’å…¥æˆåŠŸã€‚ä½ è¿˜å¯ä»¥ç”¨ç›¸åŒç±»å‹setçš„è¿­ä»£å™¨åŒºé—´è¿›è¡Œæ’å…¥æ“ä½œ\n\nset&lt;int&gt;t1;//å®šä¹‰ set å¯¹è±¡ t1for (int i = 0; i &lt;= 3; ++i) &#123; // æ’å…¥ 1 2 3 4 5 6\tt1.insert(i);&#125;\n\nåˆ é™¤å¯ä»¥åˆ é™¤ï¼š\n\næŒ‡å®šè¿­ä»£å™¨ä½ç½®\næŒ‡å®šå…ƒç´ \nè¿­ä»£å™¨åŒºé—´\n\n\nä¸è¿‡å¯¹äºäºŒå‰æœç´¢æ ‘è€Œè¨€ï¼Œåˆ é™¤ä¸€ç›´éƒ½ä¸æ˜¯é«˜é¢‘æ“ä½œ+æ•ˆç‡è¾ƒä½ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨å®ç°äºŒå‰æœç´¢æ ‘çš„æ—¶å€™ï¼Œæˆ‘æ²¡æœ‰å»å®ç°åˆ é™¤æ“ä½œã€‚\n\nå…¶å®ä¸»è¦æ˜¯åˆ é™¤æ“ä½œæ¯”è¾ƒéš¾ç†è§£ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹³è¡¡äºŒå‰æ ‘ä¸­\n\n1.4 æŸ¥æ‰¾findä½œä¸ºæœç´¢äºŒå‰æ ‘ï¼ŒæŸ¥æ‰¾æ‰æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒæŒ‡å‘å…ƒç´ çš„ä½ç½®ã€‚\n\nå¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›endè¿­ä»£å™¨\n\næ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼ŒåŠ ä¸Šå¯¹äºend()è¿­ä»£å™¨çš„åˆ¤æ–­ï¼Œåªè¦ä¸ç­‰äºendè¯´æ˜æ‰¾åˆ°äº†è¯¥å…ƒç´ ï¼Œè¿›è¡Œè®¿é—®\nset&lt;int&gt; v1;v1.insert(1);v1.insert(3);v1.insert(6);set&lt;int&gt;::iterator it = v1.find(3);if (it != v1.end())&#123;\tcout &lt;&lt; &quot;æ‰¾åˆ°äº† &quot;&lt;&lt; *it &lt;&lt; endl;&#125;\n\nå› ä¸ºsetæ˜¯åªæœ‰keyçš„æœç´ äºŒå‰æ ‘ï¼Œåœ¨è·å–åˆ°è¿­ä»£å™¨ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨*itè¿›è¡Œè§£å¼•ç”¨å³å¯å¾—åˆ°èŠ‚ç‚¹çš„å€¼\n\nè€Œå½“æˆ‘ä»¬æŸ¥æ‰¾å†…éƒ¨ä¸å­˜åœ¨çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥å¾—çŸ¥æ²¡æœ‰æ‰¾åˆ°\n\n\n1.5 countè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æŸ¥æ‰¾äºŒå‰æ ‘ä¸­valueå€¼çš„ä¸ªæ•°ã€‚ä½†ç”±äºé»˜è®¤çš„setä¸æ”¯æŒé”®å€¼å†—ä½™ï¼Œæ’å…¥ç›¸åŒçš„é”®å€¼ä¼šè¢«å¿½ç•¥æ‰ã€‚æ‰€ä»¥è¿™ä¸ªcountåœ¨è¿™é‡Œåªæœ‰0å’Œ1ä¸¤ä¸ªè¿”å›å€¼ï¼Œä¹Ÿåªèƒ½ç”¨æ¥åˆ¤æ–­è¯¥å€¼æ˜¯å¦å­˜åœ¨ã€‚\n\nä½†æ˜¯å› ä¸ºcountéœ€è¦éå†æ‰€æœ‰å…ƒç´ ï¼Œæ‰€ä»¥åœ¨setä¸­ï¼Œå®ƒçš„æ•ˆç‡æ¯”findæ˜¯æ›´å·®çš„ã€‚\nmultisetæ”¯æŒé”®å€¼å†—ä½™è¿™ä¸ªå‡½æ•°çœŸæ­£èµ·ä½œç”¨çš„åœ°æ–¹æ˜¯åœ¨multisetï¼Œäººå¦‚å…¶åï¼Œè¿™æ˜¯ä¸€ä¸ªæ”¯æŒé”®å€¼å†—ä½™çš„setï¼Œæˆå‘˜å‡½æ•°å®Œå…¨ç›¸åŒã€‚ç¬¬ä¸€ä¸ªæ¨¡æ¿å˜é‡æ˜¯setçš„å‚æ•°ç±»å‹ï¼Œç¬¬äºŒä¸ªæ˜¯æ¯”è¾ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸€ä¸ªç©ºé—´é…ç½®å™¨\ntemplate &lt; class T,                        // multiset::key_type/value_type           class Compare = less&lt;T&gt;,        // multiset::key_compare/value_compare           class Alloc = allocator&lt;T&gt; &gt;    // multiset::allocator_type           &gt; class multiset;\n\n\n\n1.6 lower&#x2F;upper_bound\niterator lower_bound (const value_type&amp; val);   // è¿”å›æŒ‡å‘ç­‰äºæˆ–å¤§äºæŒ‡å®šé”®å€¼å…ƒç´ çš„è¿­ä»£å™¨iterator upper_bound (const value_type&amp; val);   // è¿”å›æŒ‡å‘å¤§äºæŒ‡å®šé”®å€¼å…ƒç´ çš„è¿­ä»£å™¨\n\nè¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªå’Œæˆ‘ä»¬æŒ‡å®šçš„å…ƒç´ ç›¸åŒ&#x2F;æˆ–è€…æ¯”æŒ‡å®šå…ƒç´ æ›´å¤§ï¼ˆç¬¬ä¸€ä¸ªæ›´å¤§çš„é”®å€¼ï¼‰çš„è¿­ä»£å™¨\n\n\nå¦‚æœæ›´å¤§çš„é”®å€¼æˆ–è€…å®ƒæœ¬èº«ä¸å­˜åœ¨ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªendè¿­ä»£å™¨ï¼Œè¿™ä¸€ç‚¹å’Œfindä¸€æ ·\n\n\n setåŸºæœ¬ç”¨å¾—åˆ°çš„è¿­ä»£å™¨è¿™é‡Œéƒ½æäº†ä¸€å˜´ï¼Œæ¥ä¸‹æ¥åº·åº·map\n2 mapmapåŒæ ·æœ‰ä¸€ä¸ªæ”¯æŒé”®å€¼å†—ä½™çš„multimapï¼Œåé¢å°±ä¸è¯´è¾£\n\nå‰é¢å…³äºæ„é€ å‡½æ•°éƒ½æš‚ä¸”ä¸æï¼Œç›´æ¥æ¥çœ‹mapå’Œsetæœ€ä¸ä¸€æ ·çš„åœ°æ–¹ï¼Œæ’å…¥\n2.1 æ’å…¥mapæ˜¯ä¸€ä¸ªkvläºŒå‰æœç´¢æ ‘ï¼Œå…¶æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ã€‚è¿™å°±è¦æ±‚æˆ‘ä»¬æ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦å…ˆmake_pairå»ºç«‹ä¸€ä¸ªé”®å€¼å…³ç³»ï¼Œå†æ’å…¥è¿›mapä¸­ã€‚\n\nä¹Ÿå› ä¸ºè¿­ä»£å™¨è·å–åˆ°çš„æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œæ‰€ä»¥è®¿é—®çš„æ—¶å€™éœ€è¦æŒ‡å®šé”®å€¼å¯¹çš„firstå’Œsecondã€‚mapæ˜¯ç”¨firstè¿›è¡Œæ’åºçš„ï¼Œæ‰€ä»¥firstæ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œä½†æ˜¯secondå¯ä»¥\n2.2 ä¸‹æ ‡è®¿é—®&#x2F;atmapç›¸æ¯”äºsetï¼Œæœ€ç‰¹æ®Šçš„ä¸€ç‚¹å°±æ˜¯å®ƒå¯ä»¥ç”¨ä¸‹æ ‡ç›´æ¥è¿›è¡Œè®¿é—®\nmap[key]=value;\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼éå¸¸æ–¹ä¾¿çš„ä¿®æ”¹value\n\nå’Œé‡è½½äº†ä¸‹æ ‡çš„vectorä¸€æ ·ï¼Œmapä¹Ÿæœ‰ä¸€ä¸ªatå‡½æ•°ï¼ˆC++11æ–°å¢ï¼‰åœ¨ä¹‹å‰vectorçš„å‡½æ•°ä¸­ï¼Œæˆ‘æ²¡æœ‰æåˆ°è¿™ä¸¤ä¸ªçš„åŒºåˆ«ã€‚åœ¨è¿™é‡Œè¯´ä¸€ä¸‹\n\noperator[]å’Œatçš„ä¸»è¦åŒºåˆ«åœ¨äºoperator[]ä¸åšè¾¹ç•Œæ£€æŸ¥ï¼Œè€Œatä¼šåšè¾¹ç•Œæ£€æŸ¥ã€‚\n\nç”±äºoperator[]ä¸åšè¾¹ç•Œæ£€æŸ¥ï¼Œ é‚£æ€•è¶Šç•Œäº†ä¹Ÿä¼šè¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œå½“ç„¶è¿™ä¸ªå¼•ç”¨æ˜¯é”™è¯¯çš„å¼•ç”¨ï¼Œå¦‚ä½•ä¸å°å¿ƒè°ƒç”¨äº†è¿™ä¸ªå¼•ç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œä¼šç›´æ¥å¯¼è‡´åº”ç”¨é€€å‡ºã€‚\nè€Œç”±äºatä¼šåšè¾¹ç•Œæ£€æŸ¥ï¼Œå¦‚æœè¶Šç•Œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œåº”ç”¨å¯ä»¥try/catchè¿™ä¸ªå¼‚å¸¸ï¼Œè¿›è¡Œå¼‚å¸¸ç®¡ç†ï¼Œè€Œåº”ç”¨è¿˜èƒ½ç»§ç»­è¿è¡Œã€‚\n\natçš„ä½¿ç”¨å’Œä¸‹æ ‡ä¸å¤ªä¸€æ ·ï¼Œå’Œæˆå‘˜å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸€è‡´ã€‚æˆ‘ä»¬å¯ä»¥æ¥è¯•ä¸€è¯•\n\n\nåœ¨è¿™é‡Œå¦‚æœæˆ‘ä»¬ä¸‹æ ‡è®¿é—®ç¬¬11ä¸ªå…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚å› ä¸ºä¸‹æ ‡è®¿é—®ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„keyï¼Œè€Œvalueä¼šè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚intç±»å‹ä¹Ÿæ˜¯æœ‰é»˜è®¤æ„é€ çš„ï¼Œè¿”å›ä¸€ä¸ª0\n\nä½†å¦‚æœæˆ‘ä»¬ä¸ç”¨ä¸‹æ ‡ï¼Œç›´æ¥ç”¨atè®¿é—®ç¬¬11ä¸ªå…ƒç´ ï¼Œå°±ä¼šæŠ¥debugé”™è¯¯ï¼Œè¿™ä¾¿æ˜¯å®ƒä»¬ä¿©çš„åŒºåˆ«æ‰€åœ¨\n\nmapå’Œsetæœ‰åŒºåˆ«çš„åœ°æ–¹ä¸»è¦å°±æ˜¯ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶ä½™éƒ½æ˜¯å®Œå…¨ç›¸åŒ\n2.3 ä¸‹æ ‡è®¿é—®è‡ªå®šä¹‰ç±»å‹å¿…é¡»è¦æœ‰é»˜è®¤æ„é€ å‡½æ•°å¦‚é¢˜ï¼Œå¦‚æœä½ æƒ³åœ¨mapé‡Œé¢æ’å…¥ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ï¼Œä½¿ç”¨emplaceå’Œinsertçš„æ—¶å€™ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨[]é‡è½½å°±ä¼šæœ‰ç¼–è¯‘é”™è¯¯ã€‚\nclass mytestint&#123;public:    mytestint(uint16_t id, uint16_t pr) : _id(id), _pr(pr) &#123;&#125;    uint16_t get_id() const    &#123;        return _id;    &#125;private:    uint16_t _id;    uint16_t _pr;&#125;;\n\nè¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ï¼Œå†…éƒ¨åªå®ç°äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œæ²¡æœ‰æ— å‚æ„é€ ã€‚\næ­¤æ—¶è°ƒç”¨ä¸‹æ ‡é‡è½½ï¼Œå°±ä¼šå‡ºç°é—®é¢˜\nmap&lt;uint16_t, mytestint&gt; _test_map;void test_emplace(uint16_t id, uint16_t pr, const std::string &amp;info)&#123;    mytestint temp = &#123;id, pr&#125;;    auto t = _test_map.emplace(id, temp); // good    auto s = _test_map.insert(&#123;pr, temp&#125;);// good    _test_map[id] = temp; // error    auto h = _test_map[pr]; // error&#125;\n\nç¼–è¯‘è¿™ä¸ªä»£ç ï¼Œä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼ˆå¦‚æœå»æ‰æœ€åä¸¤ä¸ªä¸‹æ ‡çš„è®¿é—®ï¼Œåªç”¨insertå’Œemplaceæ˜¯ä¸ä¼šæœ‰æŠ¥é”™çš„ï¼‰\n/usr/include/c++/11/tuple:1820:9: error: no matching function for call to â€˜mytestint::mytestint()â€™ 1820 |         second(std::forward&lt;_Args2&gt;(std::get&lt;_Indexes2&gt;(__tuple2))...)      |         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~In file included from test.cpp:1:src/main.hpp:51:5: note: candidate: â€˜mytestint::mytestint(uint16_t, uint16_t)â€™   51 |     mytestint(uint16_t id, uint16_t pr) : _id(id), _pr(pr) &#123;&#125;      |     ^~~~~~~~~src/main.hpp:51:5: note:   candidate expects 2 arguments, 0 providedsrc/main.hpp:47:7: note: candidate: â€˜constexpr mytestint::mytestint(const mytestint&amp;)â€™   47 | class mytestint      |       ^~~~~~~~~src/main.hpp:47:7: note:   candidate expects 1 argument, 0 providedsrc/main.hpp:47:7: note: candidate: â€˜constexpr mytestint::mytestint(mytestint&amp;&amp;)â€™src/main.hpp:47:7: note:   candidate expects 1 argument, 0 providedmake: *** [makefile:2: test] Error 1\n\nå¦‚æœç»™mytestintç±»æ·»åŠ ä¸€ä¸ªé»˜è®¤æ„é€ ï¼Œåˆ™ä¸ä¼šæœ‰ç¼–è¯‘é”™è¯¯\nmytestint() = default;\n\n3.æ¨¡æ‹Ÿå®ç°è¿™é‡Œä¸»è¦ä»¥KVé”®å€¼å¯¹çš„mapä¸ºä¾‹ï¼Œsetåªéœ€è¦ä¿®æ”¹keyofValueå’Œå®ƒè‡ªå·±çš„æ¨¡æ¿å‚æ•°å³å¯\n3.1 åº·åº·STLæºç åˆ©ç”¨çº¢é»‘æ ‘å®ç°mapå’Œsetä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬è‡ªå·±å†™çš„çº¢é»‘æ ‘åªæœ‰ä¸€ä¸ªKVé”®å€¼å¯¹ï¼Œé‚£ä¹ˆè¦æ€ä¹ˆåˆ¤æ–­å°è£…çš„æ˜¯mapè¿˜æ˜¯åªæœ‰keyçš„setå‘¢ï¼Ÿ\n\nå…ˆæ¥çœ‹çœ‹STLåº“çš„æºç å§ï¼ã€é“¾æ¥ã€‘\n\nåœ¨map.hçš„ç¬¬68è¡Œå¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šåº“å‡½æ•°é‡Œé¢çš„mapå’Œsetéƒ½åªæ˜¯å°è£…äº†çº¢é»‘æ ‘\n\nå†å»æ‰¾çº¢é»‘æ ‘çš„å¤´æ–‡ä»¶ï¼Œå°±èƒ½çœ‹åˆ°å…¶ä¸æˆ‘ä»¬å®ç°çš„ä¸åŒã€‚è¿™é‡Œé¢çš„çº¢é»‘æ ‘æ€»å…±æœ‰5ä¸ªæ¨¡æ¿å‚æ•°ï¼Œé™¤å»æœ€åä¸€ä¸ªç”¨æ¥ç”³è¯·å†…å­˜ç©ºé—´çš„allocï¼Œå…¶ä½™4ä¸ªéƒ½æœ‰å…¶ä¸åŒçš„ç”¨å¤„\n\nè€Œå…¶ä¸­çš„valueæ˜¯ç”¨æ¥æ„é€ çº¢é»‘æ ‘èŠ‚ç‚¹çš„å‚æ•°\n\nçœ‹èµ·æ¥å¥½åƒå·®ä¸å¤šå¯¹å§ï¼Ÿå¯å†å›å¤´çœ‹çœ‹mapï¼Œå…¶ä¼ å…¥çš„valueæ˜¯ä¸€ä¸ªpairï¼\n\nå®é™…ä¸Šï¼Œåº“ä¸­çš„çº¢é»‘æ ‘ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„kvlï¼Œå…¶kå¹¶ä¸æ˜¯çœŸæ­£ç”¨äºæ¯”è¾ƒçš„kï¼Œè€Œæ˜¯ä¾é ç¬¬ä¸‰ä¸ªæ¨¡æ¿å‚æ•°keyofvalueï¼Œä»¥åŠæˆ‘ä»¬ä¼ å…¥çš„æ¯”è¾ƒå‡½æ•°comporeæ¥è¿›è¡Œæ¯”è¾ƒçš„\n\nè¯´äººè¯å°±æ˜¯ï¼šRBtreeä¸ä¼šåˆ¤æ–­ä½ æ˜¯mapè¿˜æ˜¯setï¼Œè€Œæ˜¯åœ¨mapå’Œsetçš„å°è£…ç«¯ï¼Œæ ¹æ®æ•°æ®çš„ä¸åŒç±»å‹ï¼Œä¼ å…¥å¯¹åº”çš„æ¯”è¾ƒå‡½æ•°ï¼Œä»¥åŠé”®å€¼ã€‚\n\næ¯”å¦‚setçš„keyofvalueå°±æ˜¯å®ƒè‡ªå·±çš„key\nè€Œmapçš„keyofvalueæ˜¯pair.first\n\nå› ä¸ºåº“å‡½æ•°é‡Œé¢pairçš„æ¯”è¾ƒï¼Œæ˜¯ä¼šæ¯”è¾ƒfirstä¹‹åï¼Œå†æ¯”è¾ƒsecondçš„ã€‚\n\nè¿™å’Œæˆ‘ä»¬æœç´¢äºŒå‰æ ‘çš„éœ€æ±‚ä¸å¤ªç¬¦åˆï¼Œæ‰€ä»¥STLåº“é‡Œé¢å°±éœ€è¦å†™ä¸€ä¸ªæ¯”è¾ƒå¤§å°çš„ä»¿å‡½æ•°ï¼Œåªé’ˆå¯¹pairçš„firstè¿›è¡Œä¸¥æ ¼æ¯”è¾ƒï¼Œä»¥ä¿è¯ç¨³å®šæ€§\n\n3.2 æ¨¡æ‹Ÿå®ç°çš„åŸºç¡€æ¡†æ¶å¦‚æœæˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿå®ç°ï¼Œåˆ™å¯ä»¥ä¾æ®ä¸‹é¢çš„æ¨¡æ¿è¿›è¡Œæ“ä½œ\n// æ¨¡æ¿å‚æ•°Vå†³å®šçº¢é»‘æ ‘å­˜ä»€ä¹ˆæ•°æ®// set: RBTree&lt;K, K&gt;// map: RBTree&lt;K, pair&lt;K, V&gt;&gt;// KeyOfV: å–å‡ºVå¯¹è±¡ä¸­keyçš„ä»¿å‡½æ•°template&lt;class K, class V, class KeyOfV&gt;\n\nè€ŒèŠ‚ç‚¹ç±»ä¹Ÿéœ€è¦è¿›è¡Œå¯¹åº”çš„ä¿®æ”¹ï¼Œä¸å†é»˜è®¤åˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹ã€‚è€Œæ˜¯ç›´æ¥ç”¨Væ¥åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„ç±»å‹ï¼Œè¿™å°±å’Œæœ€åŸºç¡€çš„æœç´¢äºŒå‰æ ‘ç›¸åŒã€‚\ntemplate&lt;class V&gt;struct RBTreeNode&#123;\tRBTreeNode&lt;V&gt;* _left;\tRBTreeNode&lt;V&gt;* _right;\tRBTreeNode&lt;V&gt;* _parent;\tV _data;\t//AVLæ ‘çš„å¹³è¡¡å› å­ï¼Œåœ¨çº¢é»‘æ ‘ä¸­ä¸ºé¢œè‰²\tColor _col;\t//æ’å…¥èŠ‚ç‚¹çš„æ—¶å€™ï¼Œé»˜è®¤ä¸ºçº¢è‰²\t//å› ä¸ºè¿™ä¸ªæ»¡è¶³æ€§è´¨3ä¸”ä¸ä¼šç ´åæ€§è´¨4\tRBTreeNode(const V&amp; data)\t\t:_data(data),\t\t_left(nullptr),\t\t_right(nullptr),\t\t_parent(nullptr),\t\t_col(RED)\t&#123;&#125;&#125;;\n\n3.3 ä¿®æ”¹æ’å…¥çš„ä»£ç å› ä¸ºæ–°å¢äº†æ¨¡æ¿å‚æ•°ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é€šè¿‡kv firstè¿›è¡Œé”®å€¼çš„æ¯”è¾ƒäº†ã€‚æˆ‘ä»¬éœ€è¦é‡Œåˆ©ç”¨æ¨¡æ¿å‚æ•°ä¸­çš„KeyOfVä»¿å‡½æ•°æ¥è¿›è¡Œæ¯”è¾ƒçš„æ“ä½œã€‚\nåœ¨è¿™é‡Œï¼Œå…ˆç»™å‡ºmapå’Œsetä¸¤ç§KeyOfVä»¿å‡½æ•°çš„å®ç°\nstruct MapKeyOfV&#123;    const K&amp; operator()(const pair&lt;K, V&gt;&amp; kv)    &#123;        return kv.first;//mapæ˜¯é”®å€¼å¯¹ï¼Œéœ€è¦æä¾›kvçš„firstè¿›è¡Œæ¯”è¾ƒ    &#125;&#125;;struct SetKeyOfV&#123;    const K&amp; operator()(const K&amp; key)    &#123;        return key;//setåªæœ‰ä¸€ä¸ªé”®å€¼    &#125;&#125;;\n\næœ‰äº†è¿™ä¸ªä»¿å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†åŸæœ‰çš„æ¯”è¾ƒæ›¿æ¢æˆä»¿å‡½æ•°åœ¨è¿›è¡Œæ¯”è¾ƒå³å¯ï¼\npair&lt;iterator,bool&gt; Insert(const V&amp; data)&#123;    //åˆ¤æ–­rootä¸ºç©ºï¼Œå³ç©ºæ ‘    if (_root == nullptr)    &#123;        _root = new Node(data);        _root-&gt;_col = BLACK;//è¿™é‡Œå¿…é¡»è¦æ‰‹åŠ¨ç»™é»‘è‰²        return make_pair(iterator(_root),true);    &#125;    //kvæ ‘çš„æ“ä½œ    Node* parent = nullptr;    Node* cur = _root;    while (cur)    &#123;        //åˆ©ç”¨keyæ¥åˆ¤æ–­ï¼Œå¯»æ‰¾å¾…æ’å…¥çš„ä½ç½®        if (kov(cur-&gt;_data)&lt; kov(data))        &#123;            parent = cur;            cur = cur-&gt;_right;        &#125;        else if (kov(cur-&gt;_data) &gt; kov(data))        &#123;            parent = cur;            cur = cur-&gt;_left;        &#125;        else &#123;            return make_pair(iterator(cur), false);//æ„é€ ä¸€ä¸ªè¿­ä»£å™¨è¿”å›        &#125;    &#125;    //æ‰¾åˆ°ä½ç½®åæ’å…¥èŠ‚ç‚¹    cur = new Node(data);    Node* newnode = cur;    if (kov(parent-&gt;_data) &lt; kov(data))    &#123;        parent-&gt;_right = cur;    &#125;    else    &#123;        parent-&gt;_left = cur;    &#125;    cur-&gt;_parent = parent;    //æ’å…¥ä¹‹åéœ€è¦å‘ä¸Šæ›´æ–°é¢œè‰²,åªæœ‰å‡ºç°è¿ç»­çº¢è‰²ä¹‹åæ‰éœ€è¦æ›´æ–°    while (parent &amp;&amp; parent-&gt;_col==RED)    &#123;        Node* grandpa = parent-&gt;_parent;//ç¥–çˆ¶        assert(grandpa);//ç¥–çˆ¶ä¸ºç©ºä¸éœ€è¦è¿›è¡Œæ“ä½œ        //pæ˜¯gçš„å·¦        if (parent == grandpa-&gt;_left)        &#123;            Node* uncle = grandpa-&gt;_right;            //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰            if (uncle &amp;&amp; uncle-&gt;_col == RED)            &#123;                uncle-&gt;_col = BLACK;                parent-&gt;_col = BLACK;                grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢                //ç»§ç»­å‘ä¸Šè°ƒæ•´                //cur = cur-&gt;_parent;                //parent = parent-&gt;_parent;                cur = grandpa;                parent = cur-&gt;_parent;            &#125;            else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)            &#123;                //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰                if (cur == parent-&gt;_left)                &#123;                    RotateR(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹                    parent-&gt;_col = BLACK;                    grandpa-&gt;_col = RED;                &#125;                else//cur == parent-&gt;_right                &#123;                    //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹                    //   g                    // p                    //   c                    RotateL(parent);                    RotateR(grandpa);                    grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²                    cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„                &#125;                break;            &#125;        &#125;        else &#123;            Node* uncle = grandpa-&gt;_left;            //æƒ…å†µ1ï¼šæ’å…¥åpæ˜¯çº¢ï¼Œuå­˜åœ¨ä¸”æ˜¯çº¢ï¼ˆä¸éœ€è¦æ—‹è½¬ï¼‰            if (uncle &amp;&amp; uncle-&gt;_col == RED)            &#123;                uncle-&gt;_col = BLACK;                parent-&gt;_col = BLACK;                grandpa-&gt;_col = RED;//ç¥–çˆ¶å˜æˆçº¢                //ç»§ç»­å‘ä¸Šè°ƒæ•´                cur = grandpa;                parent = cur-&gt;_parent;            &#125;            else//(uncle &amp;&amp; uncle-&gt;_col == BLACK)            &#123;                //æƒ…å†µ2ï¼šæ’å…¥åpä¸ºçº¢ï¼Œuå­˜åœ¨ä¸”ä¸ºé»‘ï¼ˆéœ€è¦å•æ—‹ï¼‰                if (cur == parent-&gt;_right)                &#123;                    RotateL(grandpa);//å› ä¸ºpåœ¨gçš„å·¦è¾¹ï¼Œæ‰€ä»¥å³æ—‹                    parent-&gt;_col = BLACK;                    grandpa-&gt;_col = RED;                &#125;                else//cur == parent-&gt;_left                &#123;                    //æƒ…å†µ3ï¼šä¸æ˜¯åœ¨åŒä¸€ä¾§ï¼ŒåŒæ—‹                    //   g                    //\t\tp                    //   c                    RotateR(parent);                    RotateL(grandpa);                    grandpa-&gt;_col = RED;//ç¥–çˆ¶æ”¹æˆçº¢è‰²                    cur-&gt;_col = BLACK;//è‡ªå·±æˆä¸ºäº†è¿™é‡Œçš„æ ¹ï¼Œéœ€è¦æ”¹æˆé»‘çš„                &#125;                break;            &#125;        &#125;    &#125;    //ä¸ç®¡æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæœ€åéƒ½æŠŠæ ¹æ”¹æˆé»‘ï¼Œç¬¦åˆæ¡ä»¶2    _root-&gt;_col = BLACK;    return make_pair(iterator(newnode), true);&#125;\n\nè¿™é‡Œè¯´æ˜ä¸€ä¸‹ä¸ºä½•è¦æŠŠè¿”å›å€¼æ›¿æ¢æˆé”®å€¼å¯¹ã€‚å› ä¸ºåœ¨å®é™…æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è·å–é“æ–°æ’å…¥å…ƒç´ çš„è¿­ä»£å™¨ï¼ˆè¿­ä»£å™¨çš„æ¨¡æ‹Ÿå®ç°ä¼šåœ¨åé¢æåŠï¼‰ï¼Œä»¥æ–¹ä¾¿åœ¨æ’å…¥åè¿›è¡Œä¿®æ”¹valueçš„æ“ä½œã€‚\n\næ¯”å¦‚æˆ‘ä»¬é»˜è®¤æ’å…¥çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåœ¨è¿›è¡Œä¸€äº›åˆ¤æ–­ä¹‹åï¼Œå†é‡æ–°ç»™è¿™ä¸ªé”®å€¼çš„valueè¿›è¡Œä¿®æ”¹ï¼ˆä»…é™äºmapçš„æƒ…å†µï¼‰\n\nå¦‚æœä¸è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé‚£ä¹ˆæƒ³ä¿®æ”¹è¿™ä¸ªé”®å€¼ï¼Œå°±åªèƒ½é€šè¿‡findå‡½æ•°æŸ¥æ‰¾åå†è¿›è¡Œä¿®æ”¹ï¼Œç›¸å¯¹æœ‰äº›éº»çƒ¦ã€‚\n3.4 è¿­ä»£å™¨âœ¨è¿™ä¸€éƒ¨åˆ†æ˜¯æ¯”è¾ƒéš¾ç†è§£çš„è¿­ä»£å™¨æ“ä½œï¼Œä¸»è¦å°±æ˜¯åœ¨ä¸€ä¸ªäºŒå‰æ ‘ä¸­åº”è¯¥å¦‚ä½•è¿›è¡Œè¿­ä»£å™¨çš„++/--æ“ä½œã€‚\n3.4.1 åŠ å‡æ“ä½œå¦‚æœä½ çœ‹è¿‡æˆ‘ä¹‹å‰çš„stlåšå®¢ï¼Œé‚£ä¹ˆä½ åº”è¯¥è¿˜è®°å¾—ï¼Œæˆ‘ä»¬çš„æ¨¡æ‹Ÿå®ç°è¿­ä»£å™¨å…¶å®å°±æ˜¯ç”¨æŒ‡é’ˆæ¥è¿›è¡Œçš„ã€‚è¿­ä»£å™¨çš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå’ŒæŒ‡é’ˆç›¸å·®æ— å‡ ã€‚\nåœ¨æ­¤å¤„æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ä¸­åºéå†æ¥è¿›è¡Œè¿­ä»£å™¨çš„æ“ä½œã€‚ä¸­åºéå†çš„åŸºæœ¬æƒ…å†µå°±æ˜¯å·¦æ ¹å³ï¼Œåªä¸è¿‡æˆ‘ä»¬è¿™é‡Œä¸å†èƒ½ä½¿ç”¨é€’å½’è¿›è¡Œæ“ä½œäº†ï¼Œè€Œéœ€è¦ä½¿ç”¨è¿­ä»£çš„æ–¹æ³•ã€‚\n\nä¸Šå›¾ä¸­curéå†åˆ°äº†å³å­æ ‘ï¼Œå…¶å·¦å³å­æ ‘éƒ½ä¸ºç©ºã€‚è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦è¿”å›åˆ°çš„æ˜¯æ ¹èŠ‚ç‚¹ï¼Œå‡†ç¡®æ¥è¯´æ˜¯ç¥–çˆ¶èŠ‚ç‚¹â€”â€”å—ï¼Ÿè¦æ˜¯curçš„çˆ¶äº²prevä¸æ˜¯gèŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œæˆ‘ä»¬å°±ä¸èƒ½ç›´æ¥è¿”å›gè¿›è¡Œæ‰“å°ï¼è€Œéœ€è¦è¿”å›gçš„å·¦å­æ ‘ã€‚\næ€»ç»“å‡ºæ¥çš„è§„å¾‹å¦‚ä¸‹ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ++æ“ä½œçš„æ—¶å€™ï¼š\n\nå¦‚æœå³èŠ‚ç‚¹ä¸ºç©ºï¼Œå½“å‰èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³ä¾§ï¼Œå°±éœ€è¦ç»§ç»­å¾€ä¸Šæ‰¾ï¼ˆæˆ‘ä»¬éœ€è¦æ‰¾åˆ°çˆ¶äº²å·¦ä¾§çš„é‚£ä¸ªèŠ‚ç‚¹ï¼‰\nå¦‚æœå³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ã€‚\n\nåœ¨ä¸Šå›¾ä¸­ï¼Œprevå°±æ˜¯gçš„å·¦å­æ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ‰¾åˆ°prevå°±è¡Œäº†ã€‚ç„¶åå› ä¸ºæˆ‘ä»¬çš„prevçš„å³å­æ ‘å·²ç»éå†è¿‡ï¼Œæ‰€ä»¥è¿™æ—¶å€™å°±éœ€è¦å¾€ä¸Šã€‚å› ä¸ºgæ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥å°±éœ€è¦è¿”å›gçš„å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­çš„ä½ç½®\n\nè€Œå½“æˆ‘ä»¬åšåˆ°æœ€å³ä¾§çš„èŠ‚ç‚¹æ—¶ï¼Œå†æ¬¡++çš„æ—¶å€™å…¶å®å·²ç»éå†å®Œäº†ã€‚è¿™æ—¶å€™å³å­æ ‘ä¸ºç©ºï¼Œå¼€å§‹å¾€ä¸Šæ‰¾çˆ¶äº²æ˜¯ç¥–çˆ¶å·¦çš„å“ªä¸€ä¸ªã€‚è¿™æ—¶å€™ä¼šä¸€ç›´æ‰¾åˆ°æ ¹ï¼Œè€Œæ ¹çš„çˆ¶äº²ä¸ºç©ºï¼Œåœæ­¢éå†\n\nè½¬æ¢ä¸ºä»£ç å¦‚ä¸‹\nSelf&amp; operator++()&#123;\tif (_node-&gt;_right == nullptr)\t&#123;\t\tNode* cur = _node;\t\tNode* parent = cur-&gt;_parent;\t\t//åªè¦å½“å‰èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³ä¾§ï¼Œå°±éœ€è¦ç»§ç»­å¾€ä¸Šæ‰¾\t\t//æˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ˜¯çˆ¶äº²å·¦ä¾§çš„é‚£ä¸ªèŠ‚ç‚¹ã€‚\t\twhile (parent &amp;&amp; parent-&gt;_right == cur)\t\t&#123;\t\t\tcur = cur-&gt;_parent;\t\t\tparent = parent-&gt;_parent;\t\t&#125;\t\t//å¦‚æœä¸ç¬¦åˆwhileçš„æ¡ä»¶ï¼Œå°±è¯´æ˜\t\t//1 çˆ¶äº²ä¸ºç©ºï¼ˆæ ¹)\t\t//2 å¦‚æœcuræ˜¯çˆ¶äº²çš„å·¦ï¼Œé‚£å°±ç›´æ¥å°†nodeè®¾ç½®ä¸ºçˆ¶äº²\t\t_node = parent;\t&#125;\telse\t&#123;\t\t//å³å­æ ‘ä¸ä¸ºç©ºï¼Œæ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹\t\tNode* subLeft = _node-&gt;_right;\t\twhile (subLeft-&gt;_left)\t\t&#123;\t\t\tsubLeft = subLeft-&gt;_left;\t\t&#125;\t\t//æœ€å·¦èŠ‚ç‚¹\t\t_node = subLeft;\t&#125;\treturn *this;&#125;\n\n\nè¿›è¡Œ--æ“ä½œçš„æ—¶å€™åˆ™æ˜¯å®Œå…¨ç›¸åçš„æƒ…å†µã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°çˆ¶äº²æ˜¯ç¥–çˆ¶èŠ‚ç‚¹å³è¾¹çš„é‚£ä¸€ä¸ªã€‚å¦‚æœçˆ¶äº²æ˜¯ç¥–çˆ¶çš„å·¦ï¼Œé‚£å°±ç»§ç»­å¾€ä¸Šæ‰¾ã€‚\n\nSelf&amp; operator--()&#123;    if (_node-&gt;_left == nullptr)    &#123;        Node* cur = _node;        Node* parent = cur-&gt;_parent;        //ä¾æ®ä¸­åºçš„é¡ºåºï¼Œ--å°±æ˜¯å’Œ++åè¿‡æ¥ã€‚éœ€è¦æ‰¾èŠ‚ç‚¹æ˜¯çˆ¶äº²çš„å³è¾¹çš„å“ªä¸€ä¸ª        //å¦‚æœæ˜¯çˆ¶äº²çš„å·¦å°±ç»§ç»­å¾€ä¸Šæ‰¾        while (parent &amp;&amp; cur == parent-&gt;_left)        &#123;            cur = cur-&gt;_parent;            parent = parent-&gt;_parent;        &#125;        //æŒ‡å‘å½“å‰çš„çˆ¶äº²        _node = parent;    &#125;    else    &#123;        // å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹        Node* subRight = _node-&gt;_left;        while (subRight-&gt;_right)        &#123;            subRight = subRight-&gt;_right;        &#125;        _node = subRight;    &#125;    return *this;&#125;\n\n3.4.2 å¥—ä¸Šå®Œæ•´è¿­ä»£å™¨æ¨¡æ¿å®Œæˆäº†è¿­ä»£å™¨çš„åŠ å‡æ“ä½œåï¼Œæˆ‘ä»¬åªéœ€è¦å¥—ä¸Šä¹‹å‰æ¨¡æ‹Ÿå®ç°çš„ç±»ä¼¼æ¨¡æ¿ï¼Œå†æ·»åŠ å‚æ•°åˆ°çº¢é»‘æ ‘çš„ç±»ä¸­ã€‚å³å¯é…å¥—å¥½ä¸€ä¸ªè¿­ä»£å™¨ï¼\ntemplate&lt;class V, class Ref, class Ptr&gt;struct __RBTreeIterator&#123;\ttypedef RBTreeNode&lt;V&gt; Node;\ttypedef __RBTreeIterator&lt;V, Ref, Ptr&gt; Self;\tNode* _node;//å½“å‰æŒ‡å‘çš„èŠ‚ç‚¹\t__RBTreeIterator(Node* node)\t\t:_node(node)\t&#123;&#125;\tRef operator*()\t&#123;\t\treturn _node-&gt;_data;\t&#125;\tPtr operator-&gt;()\t&#123;\t\treturn &amp;_node-&gt;_data;\t&#125;\t//çœç•¥++å’Œ--çš„ä»£ç \tbool operator!=(const Self&amp; s) const\t&#123;\t\treturn _node != s._node;\t&#125;\tbool operator==(const Self&amp; s) const\t&#123;\t\treturn _node == s-&gt;_node;\t&#125;&#125;;\n\n\nå®Œæ•´ä»£ç è¯·å‚è€ƒæˆ‘çš„Giteeä»“åº“\n\n3.4.3 æ·»åŠ å‚æ•°åˆ°çº¢é»‘æ ‘ç±»ä¸­æˆ‘ä»¬éœ€è¦æŠŠè¿­ä»£å™¨å†™å…¥çº¢é»‘æ ‘çš„ç±»ï¼Œå¹¶é™„ä¸Šæ™®é€šè¿­ä»£å™¨å’Œconstçš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæä¾›beginå’Œendå‡½æ•°å³å¯ã€‚\n//è¿­ä»£å™¨å°è£…ï¼Œconstå’Œæ™®é€šç‰ˆæœ¬typedef __RBTreeIterator&lt;V, V&amp;, V*&gt; iterator;typedef __RBTreeIterator&lt;V, const V&amp;, const V*&gt; const_iterator;iterator Begin()&#123;\tNode* subLeft = _root;\twhile (subLeft &amp;&amp; subLeft-&gt;_left)\t&#123;\t\tsubLeft = subLeft-&gt;_left;\t&#125;\treturn iterator(subLeft);&#125;iterator End()&#123;\treturn iterator(nullptr);&#125;const_iterator Begin() const&#123;\tNode* subLeft = _root;\twhile (subLeft &amp;&amp; subLeft-&gt;_left)\t&#123;\t\tsubLeft = subLeft-&gt;_left;\t&#125;\treturn const_iterator(subLeft);&#125;const_iterator End() const&#123;\treturn const_iterator(nullptr);&#125;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿­ä»£å™¨å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼\n\nè¿™é‡Œçš„æµ‹è¯•ç¯èŠ‚æœ€å¥½æŠŠè‡ªå·±å†™çš„mapå¥—è¿›ä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œä¸ç„¶å°±ä¼šç”¨åˆ°stlåº“é‡Œé¢çš„map\n\nè¿­ä»£å™¨å†™å¥½ä¹‹åï¼ŒèŒƒå›´forä¹Ÿæ˜¯å¯ä»¥ç”¨çš„\n\n3.5 é‡è½½ä¸‹æ ‡mapéå¸¸ç‰¹æ®Šçš„ä¸€ç‚¹å°±æ˜¯ï¼Œå¯ä»¥ç›´æ¥ç”¨map[key]=valueæ¥ä¿®æ”¹valueçš„å†…å®¹ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™å½“ç„¶ä¸èƒ½è½ä¸‹è¿™ä¸ªäº†ï¼\nå…¶å®æ“ä½œèµ·æ¥éå¸¸ç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦ç›´æ¥è°ƒç”¨æ’å…¥ï¼Œå¦‚æœé”®å€¼å­˜åœ¨ä¹Ÿä¼šè¿”å›å½“å‰é”®å€¼çš„è¿­ä»£å™¨ã€‚é”®å€¼ä¸å­˜åœ¨å°±èƒ½ç›´æ¥æ’å…¥ï¼Œè¿”å›æ–°æ’å…¥å…ƒç´ çš„è¿­ä»£å™¨ã€‚è¿™ä¹Ÿæ˜¯ä¹‹å‰ä¸ºå•¥insertå‡½æ•°æ²¡æœ‰ç›´æ¥ç”¨boolåšæ’å…¥çš„è¿”å›å€¼çš„åŸå› \n//é‡è½½ä¸‹æ ‡V&amp; operator[](const K&amp; key)&#123;    pair&lt;iterator, bool&gt; ret = insert(make_pair(key, V()));    return ret.first-&gt;second;//è¿”å›çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¿®æ”¹&#125;\n\nå› ä¸ºæˆ‘ä»¬è¿”å›çš„æ˜¯Vçš„å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨=è¿›è¡Œä¿®æ”¹ï¼\næµ‹è¯•ä¸€ä¸‹ï¼Œå’©æœ‰é—®é¢˜ OJBKğŸ‘\n\nsetçš„æ¨¡æ‹Ÿå®ç°æ›´ä¸ºç®€å•ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥è¾£ï¼å¤§å®¶å¯ä»¥å»æˆ‘çš„giteeçœ‹æºç ï¼Œæœ‰å•¥é—®é¢˜å¯ä»¥è¯„è®ºæå‡ºï¼\n\n4.æ›´å¤šæ“ä½œ4.1 ç”¨setå¾—å‡ºä¸¤ç»„æ•°æ®çš„é‡åˆå¤„å‡è®¾æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ç°éœ€è¦æ‰¾åˆ°è¿™ä¸¤ä¸ªæ–‡ä»¶çš„é‡åˆå¤„\n\nè®¾ç½®ä¸¤ä¸ªsetï¼Œåˆ†åˆ«æ’å…¥ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹\nåŒæ—¶éå†ä¸¤ä¸ªsetï¼ˆä»å°åˆ°å¤§ï¼‰\nå¦‚æœä¸¤ä¸ªsetçš„keyç›¸åŒï¼Œåˆ™å–å‡ºè¿™ä¸ªç›¸åŒå€¼ï¼Œä¸¤ä¸ªsetä¸€èµ·++\nå¦‚æœä¸ç›¸åŒï¼Œåˆ™++é‚£ä¸ªå°çš„key\n\n\nå…¶ä¸­ä¸€ä¸ªsetç»“æŸéå†ï¼Œå³ä»£è¡¨é‡åˆå¤„æŸ¥æ‰¾å®Œæ¯•ï¼\n\nç»“è¯­æœ€è¿‘æ„Ÿè§‰è‡ªå·±çœŸçš„å¾ˆå¿™ï¼Œä½†åˆä¸çŸ¥åœ¨å¿™ä»€ä¹ˆã€‚äº‹æƒ…ä¸€ä¸ªæ¥ç€ä¸€ä¸ªï¼Œè™½ç„¶å­¦æ ¡çš„è¯¾ä¸ç®—å¤šï¼Œä½†äº‹æƒ…çœŸçš„æ²¡å°‘å¤šå°‘ã€‚\næœ‰äº›äº‹æƒ…è‡ªå·±åˆæœ‰æ‹–å»¶ç—‡ï¼Œå†åŠ ä¸Šä½œæ¯ä¸è§„å¾‹ï¼ˆæŒ‡ä¸‹åˆä¸€ç¡ç¡3hï¼‰ï¼Œæµªè´¹äº†å¥½å¤šæ—¶é—´â€¦â€¦\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","æ ‘","Cpp"]},{"title":"ã€C++ã€‘ç»§æ‰¿å¤šæ€è¯¦è§£","url":"/posts/3933786088/","content":"åœ¨ä¹‹å‰çš„CPPå¤§ä½œä¸šä¸­ï¼Œä¸ºäº†åº”ä»˜æœŸæœ«ï¼ˆæ˜¯è¿™æ ·çš„ï¼‰å…³äºç»§æ‰¿å’Œå¤šæ€éƒ¨åˆ†çš„å†…å®¹åªæ˜¯è‰è‰è¿‡äº†ä¸€éï¼Œå¹¶æ²¡æœ‰æ·±æŒ–èƒŒåçš„å®ç°åŸç†ï¼Œä»¥åŠä½¿ç”¨çš„æ—¶å€™ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚\næœ¬ç¯‡åšå®¢æ˜¯å¯¹ç±»å’Œå¯¹è±¡ç»§æ‰¿å¤šæ€éƒ¨åˆ†çš„æ·±åŒ–ï¼\n\n\n[TOC]\n0.ä»€ä¹ˆæ˜¯å°è£…é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€\n\né¢å‘å¯¹è±¡è¿˜æœ‰ åå°„ï¼ˆC++ä¸­æ²¡æœ‰ï¼‰ã€æŠ½è±¡ ç­‰ç‰¹æ€§\n\nå°è£…ï¼š\n\nä¸æƒ³è®©ç”¨æˆ·åœ¨ç±»å¤–è®¿é—®çš„æˆå‘˜è®¾è®¡æˆç§æœ‰ï¼Œå…è®¸è®¿é—®çš„è®¾è®¡æˆå…¬æœ‰ã€‚ç›¸æ¯”Cè¯­è¨€æ²¡æœ‰ç±»å’Œè®¿é—®ç®¡ç†ç›¸æ¯”ï¼Œå°è£…èƒ½æé«˜è®¾è®¡çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚\nCè¯­è¨€ä¸­ï¼Œå¦‚æœè®¾è®¡çš„ä¸å¥½ï¼Œä¸è§„èŒƒç¼–å†™çš„ä»£ç å®¹æ˜“å‡ºç°é”™è¯¯è®¿é—®structç»“æ„ä½“ä¸­çš„æˆå‘˜ã€‚\nåŒæ—¶ï¼ŒC++ä¸­çš„è¿­ä»£å™¨è®¾è®¡ï¼Œä¹Ÿèƒ½ç»™ä¸€æ‰¹å®¹å™¨æä¾›åŸºæœ¬ç›¸åŒçš„è®¿é—®æ¥å£ï¼Œè®©ç”¨æˆ·èƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ï¼Œåœ¨ä¸æš´éœ²å®¹å™¨åº•å±‚ç»“æ„çš„å‰æä¸‹è®¿é—®å®¹å™¨ä¸­çš„å€¼ã€‚\næš´éœ²åº•å±‚ç»“æ„ä¼šæé«˜å®¹å™¨çš„ä½¿ç”¨æˆæœ¬ï¼Œä»£ç ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œä¸åŒæ•°æ®ç»“æ„ä¹Ÿä¸ä¸€æ ·ã€‚\nstack/queue/prioritiy_queueçš„é€‚é…å™¨å½¢å¼ï¼Œèƒ½å¼„å‡ºæ¥æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸€ç§å°è£…\n\n1.ç»§æ‰¿æ´¾ç”Ÿå…³ç³»ç»§æ‰¿æ˜¯æé«˜ä»£ç å¤ç”¨æ€§çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¿æŒåŸºç±»åŸæœ‰å±æ€§çš„åŸºç¡€ä¸Šï¼Œå¯¹å…¶è¿›è¡Œä¸€å®šçš„æ‰©å¼ ï¼Œå¢åŠ ä¸åŒçš„åŠŸèƒ½ä»¥åº”å¯¹å®é™…æƒ…å†µã€‚\næ¯”å¦‚å¯¹äºä¸€ä¸ªäººæ¥è¯´ï¼Œå…¶éƒ½ä¼šæœ‰æ€§åˆ«ã€å¹´é¾„ã€èº«åˆ†è¯å·ç­‰ç­‰ä¿¡æ¯ã€‚ä½†ä¸åŒèŒä¸šå°±è¿˜ä¼šåŒ…å«ä¸åŒèŒä¸šçš„ç‰¹æ®Šä¿¡æ¯ã€‚è¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡ç»§æ‰¿ï¼Œåœ¨åŸºç¡€ä¸€ä¸ªå…¬æ°‘çš„åŸºæœ¬ä¿¡æ¯çš„åŒæ—¶ï¼Œå†å»å¤„ç†æ¯ä¸€ä¸ªèŒä¸šçš„ç‹¬ç«‹ä¿¡æ¯ã€‚è¿™ä¹Ÿå®ç°äº†ç±»åœ¨ä¸€å®šç¨‹åº¦ä¸Šçš„å¤ç”¨ï¼Œå‡å°‘äº†ä»£ç å¤æ‚æ€§ã€‚\nä¸å…¶ç›¸ä¼¼çš„å¢åŠ ä»£ç å¤ç”¨æ€§çš„è¯­æ³•ï¼Œè¿˜æœ‰æ¨¡æ¿\n1.1 åŸºæœ¬ç”¨æ³•ç»§æ‰¿å’Œæ´¾ç”Ÿæ˜¯çˆ¶ä¸å­çš„å…³ç³»ï¼Œå…¶ä¸­å­ç±»æ‹¥æœ‰çˆ¶ç±»æˆå‘˜çš„åŒæ—¶ï¼Œè¿˜ä¼šæ‹¥æœ‰è‡ªå·±çš„æˆå‘˜\n\nç»§æ‰¿æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ï¼Œç”¨äºå¤šä¸ªç±»æœ‰å…¬å…±éƒ¨åˆ†çš„æ—¶å€™\nçˆ¶ç±»ï¼šåŸºç±»\nå­ç±»ï¼šæ´¾ç”Ÿç±»\n\n//ä¸¾ä¾‹ï¼šç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class ART &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬ &quot; &lt;&lt; &quot; ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt;endl;\t&#125;\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\nåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼ŒARTå’ŒLINKç±»ä¸­éƒ½æœ‰ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œè¿™æ—¶å€™å°±å‡ºç°äº†ä»£ç çš„é‡å¤ã€‚ç»§æ‰¿çš„å‡ºç°å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„\n//ä¸‹é¢ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å†™ï¼ŒWEBç±»æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class WEB &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;&#125;;//ARTã€LINKæ˜¯ä¸¤ä¸ªå­ç±»ï¼Œç»§æ‰¿äº†WEBçš„å…¬å…±éƒ¨åˆ†//è¿™æ ·å°±å‡å°‘äº†ä»£ç é‡class ART : public WEB&#123;public:\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK : public WEB &#123;public:\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\næµ‹è¯•å¯ä»¥å‘ç°ï¼ŒARTå’ŒLINKä½œä¸ºæ´¾ç”Ÿç±»ï¼Œåœ¨ç»§æ‰¿äº†åŸºç±»WEBçš„æˆå‘˜çš„åŸºç¡€ä¸Šï¼Œè¿˜æ‹¥æœ‰äº†å®ƒä»¬ç‹¬ç‰¹çš„å•ç‹¬æˆå‘˜\n\nåŒä¸€ä¸ªç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªåŸºç±»\nclass C : public A,public B&#123;//.....&#125;;\n\n1.2 æƒé™é—®é¢˜ç»§æ‰¿æœ‰3ä¸­ç±»å‹ï¼špublicã€privateã€protectedã€‚è¿™é‡Œä¼šæ˜¾ç¤ºå‡ºç±»ä¸­protectedæƒé™å’Œprivateæƒé™çš„åŒºåˆ«\nclass A&#123;public:\tint a;protected:\tint b;private:\tint c;&#125;;\n\nå½“æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸Šé¢ä¸‰ç§æ–¹å¼å¯¹ç±»Aè¿›è¡Œç»§æ‰¿çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„\n\nç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œæ´¾ç”Ÿç±»ä¸­ç»§æ‰¿çš„åŸºç±»æˆå‘˜å°±å˜æˆä»€ä¹ˆç±»å‹\nä¸ç®¡ç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œéƒ½æ— æ³•è®¿é—®åŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜\nå¯ä»¥ä½¿ç”¨ Min(æˆå‘˜åœ¨åŸºç±»ä¸­çš„è®¿é—®é™å®šç¬¦,ç»§æ‰¿æ–¹å¼) æ¥è®¡ç®—æŸä¸€ä¸ªæˆå‘˜åœ¨å­ç±»ä¸­çš„è®¿é—®é™å®šç¬¦æ˜¯ä»€ä¹ˆã€‚\n\n\nå…³äºæƒé™é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£ä¸‹é¢å‡ ç‚¹ï¼š\n\nåŸºç±»çš„ç§æœ‰æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä¸å¯è§ï¼Œä½†å®é™…ä¸Šå®ƒä¹Ÿè¢«ç»§æ‰¿è¿‡å»äº†ã€‚ä½†æ˜¯ç¼–è¯‘å™¨å’Œè¯­æ³•çš„é™åˆ¶è®©æˆ‘ä»¬æ— æ³•è®¿é—®ã€‚\nä¿æŠ¤é™å®šç¬¦ç”±æ­¤å‡ºç°ï¼Œå¦‚æœåœ¨åŸºç±»ä¸­çš„æˆå‘˜ä¸æƒ³è¢«å¤–ç•Œç›´æ¥è®¿é—®ï¼Œä½†åˆéœ€è¦å­ç±»ä¸­è®¿é—®ï¼Œåˆ™å¯ä»¥å®šä¹‰ä¸ºä¿æŠ¤\nclassé»˜è®¤ç»§æ‰¿æ–¹å¼ä¸ºç§æœ‰ï¼Œstructé»˜è®¤ç»§æ‰¿æ–¹å¼ä¸ºä¿æŠ¤\nå®é™…ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨publicç»§æ‰¿ï¼Œä¿æŠ¤&#x2F;ç§æœ‰æ–¹å¼ä¸åˆ©äºç»´æŠ¤å’Œæ‹“å±•\n\n1.3 åŒåé—®é¢˜ï¼ˆä½œç”¨åŸŸï¼‰åœ¨ç»§æ‰¿ä½“ç³»ä¸­ï¼ŒåŸºç±»å’Œå­ç±»éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä½œç”¨åŸŸ\nå½“åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å‡ºç°åŒåæˆå‘˜å‡½æ•°æˆ–è€…åŒåæˆå‘˜å˜é‡æ—¶ï¼Œä¼šå‡ºç°å†²çªã€‚è¿™æ—¶å€™ç¼–è¯‘å™¨ä¼šåšä¸€å®šçš„å¤„ç†ï¼šç›´æ¥è®¿é—®å˜é‡åå’Œå‡½æ•°åçš„æ—¶å€™ï¼Œä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜ï¼Œè€Œå±è”½æ‰åŸºç±»çš„ã€‚\nè¿™ç§æƒ…å†µè¢«ç§°ä¹‹ä¸ºéšè—ï¼š\n\nå‡½æ•°åç›¸åŒæ„æˆéšè—ï¼ˆå¹¶éé‡è½½ï¼‰\næˆå‘˜å˜é‡åç›¸åŒæ„æˆéšè—\n\nå®é™…æ“ä½œä¸­ï¼Œå¼ºçƒˆä¸å»ºè®®å†™åŒåçš„æˆå‘˜ï¼Œä¸ç®¡æ˜¯æˆå‘˜å‡½æ•°è¿˜æ˜¯æˆå‘˜å˜é‡\n//ç»§æ‰¿åŒåæˆå‘˜çš„å¤„ç†//\tæ™®é€šçš„åŒåæˆå‘˜class DAD1 &#123;public:\tDAD1()\t&#123;\t\t_a = 100;\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DAD func&quot; &lt;&lt; endl;\t&#125;\tvoid func(int i)\t&#123;\t\tcout &lt;&lt; &quot;DAD func int: &quot; &lt;&lt; i &lt;&lt; endl;\t&#125;\tint _a;//åŸºç±»ä¸­çš„è¯¥å˜é‡&#125;;class SON1 : public DAD1&#123;public:\tSON1()\t&#123;\t\t_a = 20;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt;&quot;SON: &quot; &lt;&lt; _a &lt;&lt; endl;//ä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»çš„_a\t\tcout &lt;&lt;&quot;DAD: &quot; &lt;&lt; DAD1::_a &lt;&lt; endl;//è®¿é—®åŸºç±»çš„_a\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;SON func&quot; &lt;&lt; endl;\t&#125;\tint _a;//æ´¾ç”Ÿç±»çš„åŒåå˜é‡&#125;;\n\nä¸‹æ–¹çš„è°ƒç”¨æµ‹è¯•èƒ½çœ‹å‡ºç»“æœï¼›\n\nclass A&#123;public:    void func()    &#123;        cout &lt;&lt; &quot;A::func&quot; &lt;&lt; endl;    &#125;&#125;;class B : public A&#123;public:    void func(int a)    &#123;        cout &lt;&lt; &quot;B::func &quot; &lt;&lt; a &lt;&lt; endl;    &#125;&#125;;\n\nåœ¨è¿™ä¸ªæ —å­é‡Œé¢ï¼ŒA::func  B::funcä¸¤ä¸ªå‡½æ•°ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ\nç­”æ¡ˆï¼šäºŒè€…æ˜¯éšè—çš„å…³ç³»ï¼Œå¹¶éå‡½æ•°é‡è½½ï¼å‡½æ•°é‡è½½è¦æ±‚ä¸¤ä¸ªå‡½æ•°æ˜¯å¤„äºåŒä¸€ä¸ªä½œç”¨åŸŸï¼Œæ‰æ„æˆé‡è½½ï¼\nè¿™ç‚¹é€šè¿‡ç¼–è¯‘æµ‹è¯•ä¹Ÿèƒ½çœ‹å‡ºæ¥\nint main()&#123;    B bt;    bt.func();    bt.func(1);    return 0;&#125;\n\nå½“æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸Šå‡½æ•°è¿›è¡Œç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™æ‰¾ä¸åˆ° B::func()ï¼Œå› ä¸ºBçš„ä½œç”¨åŸŸä¸­åªæœ‰func(int a)è¿™ä¸ªéœ€è¦ä¼ é€’å‚æ•°çš„å‡½æ•°ã€‚å¦‚æœA::func  B::funcçš„å…³ç³»æ˜¯å‡½æ•°é‡è½½çš„è¯ï¼Œé‚£è¿™é‡Œåº”è¯¥å¯ä»¥ç›´æ¥è°ƒç”¨æ‰å¯¹ã€‚\ntest.cpp: In function â€˜int main()â€™:test.cpp:24:13: error: no matching function for call to â€˜B::func()â€™     bt.func();             ^test.cpp:15:10: note: candidate: â€˜void B::func(int)â€™     void func(int a)          ^~~~test.cpp:15:10: note:   candidate expects 1 argument, 0 provided\n\nåªæœ‰æŒ‡å®šçˆ¶ç±»ä½œç”¨åŸŸæ‰èƒ½è°ƒç”¨åˆ°A::func\nB bt;bt.A::func();\n\n1.4 é™æ€æˆå‘˜åœ¨ç»§æ‰¿ä½“ç³»ä¸­ï¼ŒåŸºç±»çš„é™æ€æˆå‘˜æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªã€‚å³æ‰€æœ‰çš„å­ç±»å’Œä»–ä»¬çš„å¯¹è±¡ï¼Œéƒ½æ˜¯åªæœ‰é‚£ä¸€ä¸ªé™æ€æˆå‘˜çš„ã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªç‰¹æ€§æ¥å¯¹ç»§æ‰¿æ´¾ç”Ÿä¸­å‡ºç°çš„å¯¹è±¡è¿›è¡Œè®¡æ•°ã€‚\nclass Person&#123;public :\tPerson () &#123;++ _count ;&#125;protected :\tstring _name ; // å§“åpublic :\tstatic int _count; // ç»Ÿè®¡äººçš„ä¸ªæ•°ã€‚&#125;;int Person :: _count = 0;\n\nå¦‚æœå‡ºç°äº†ä¸é™æ€æˆå‘˜åŒåï¼Œè®¿é—®æ–¹æ³•å°±æœ‰æ‰€å˜åŒ–\n//è®¿é—®åŒåçš„é™æ€æˆå‘˜class DAD2&#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1 &quot; &lt;&lt; endl;\t&#125;\tstatic void Test1(int n)\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1(int)  &quot; &lt;&lt; n &lt;&lt; endl;\t&#125;&#125;;int DAD2::D_a = 100;class SON2 : public DAD2 &#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;SON2 Test1 &quot; &lt;&lt; endl;\t&#125;&#125;;int SON2::D_a = 200;\n\n\n1.5 å‹å…ƒå‹å…ƒå…³ç³»ä¸ä¼šè¢«ç»§æ‰¿ï¼ŒåŸºç±»çš„å‹å…ƒå‡½æ•°æ— æ³•è®¿é—®æ´¾ç”Ÿç±»çš„ç§æœ‰/ä¿æŠ¤æˆå‘˜\n\n1.6 é»˜è®¤æˆå‘˜å‡½æ•°æˆ‘ä»¬çŸ¥é“ï¼ŒC++ç±»å’Œå¯¹è±¡ä¸­æœ‰6ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\nåœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œè¿™äº›é»˜è®¤æˆå‘˜å‡½æ•°æœ‰æ–°çš„ä½¿ç”¨æ–¹æ³•\n\næ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–çˆ¶ç±»çš„ä¸€éƒ¨åˆ†æˆå‘˜ã€‚å¦‚æœä½ æ²¡æœ‰å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå…ˆè°ƒç”¨åŸºç±»ï¼Œåœ¨è°ƒç”¨å­ç±»ï¼‰\næ´¾ç”Ÿç±»çš„æ‹·è´æ„é€ åŒä¸Šï¼Œå¿…é¡»æ˜¾å¼è°ƒç”¨åŸºç±»æ‹·è´æ„é€ å‡½æ•°ï¼ˆå°†å­ç±»å¯¹è±¡ä¼ è¿‡å»ï¼Œç›¸å½“äºå°†å­ç±»å¯¹è±¡ä¸­çš„çˆ¶ç±»éƒ¨åˆ†ä¼ å…¥çˆ¶ç±»æ‹·è´æ„é€ å‡½æ•°ã€‚è¿™éƒ¨åˆ†æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°çš„åˆ‡ç‰‡æ“ä½œï¼‰\næ´¾ç”Ÿç±»çš„èµ‹å€¼é‡è½½ä¹Ÿéœ€è¦è°ƒç”¨åŸºç±»èµ‹å€¼é‡è½½å®Œæˆæ“ä½œ\næ´¾ç”Ÿç±»çš„ææ„å‡½æ•°ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨åŸºç±»ï¼Œå…ˆææ„æ´¾ç”Ÿç±»ï¼Œå†ææ„åŸºç±»æˆå‘˜ï¼ˆç¬¦åˆæ ˆåè¿›å…ˆå‡ºåŸåˆ™ï¼‰\nåœ¨åŸºç±»ææ„å‡½æ•°ä¸æ˜¯è™šææ„çš„æ—¶å€™ï¼Œå­ç±»ææ„å’Œçˆ¶ç±»ææ„æ„æˆéšè—å…³ç³»ï¼›\nå› ä¸ºå¤šæ€çš„éœ€è¦ï¼Œææ„å‡½æ•°ä¼šè¢«ç»Ÿä¸€å‘½åä¸ºdestructor()ï¼Œæ„é€ å‡½æ•°å¹¶ä¸ä¼šå‡ºç°é‡å‘½åã€‚\n\nåœ¨ä¸‹æ–¹æ —å­ä¸­ï¼Œå½“æˆ‘ä»¬å†™Bç±»çš„æ·±æ‹·è´çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šç±»ä½œç”¨åŸŸçš„æ–¹å¼æ¥è°ƒç”¨Açˆ¶ç±»çš„operator=é‡è½½ï¼ˆè¿™é‡Œå¿…é¡»è¦æŒ‡å®šç±»çš„ä½œç”¨åŸŸï¼Œå¦åˆ™è°ƒç”¨çš„è¿˜æ˜¯Bç±»è‡ªå·±çš„operator=é‡è½½ï¼Œç›¸å½“äºæ— æ•ˆçš„é€’å½’è°ƒç”¨ï¼Œæœ€ç»ˆä¼šå› ä¸ºæ­»å¾ªç¯å¯¼è‡´æ ˆæº¢å‡ºï¼‰\nå› ä¸ºæˆ‘ä»¬æ˜¯å°†å­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œæ‰€ä»¥éƒ½æ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬è¿›è¡Œçš„åˆ‡ç‰‡æ“ä½œã€‚\nclass A&#123;public:    A(int a)        : _numa(a)    &#123;    &#125;    A(const A &amp;a)    &#123;        _numa = a._numa;    &#125;    A &amp;operator=(const A &amp;a)    &#123;        if (this != &amp;a)        &#123;            _numa = a._numa;        &#125;        return *this;    &#125;    void func()    &#123;        cout &lt;&lt; &quot;A::func&quot; &lt;&lt; endl;    &#125;    ~A()    &#123;        cout &lt;&lt; &quot;~A()&quot; &lt;&lt; endl;        _numa = 0;    &#125;private:    int _numa;&#125;;class B : public A&#123;public:    B(int a = 1, int b = 1)        : A(a), _numb(b)    &#123;    &#125;    B(const B &amp;b)        : A(b)    &#123;        _numb = b._numb;    &#125;    B &amp;operator=(const B &amp;b)    &#123;        if (this != &amp;b)        &#123;            A::operator=(b); // æŒ‡å®šä½œç”¨åŸŸè°ƒç”¨Aç±»çš„èµ‹å€¼é‡è½½            _numb = b._numb;        &#125;        return *this;    &#125;    void func(int a)    &#123;        cout &lt;&lt; &quot;B::func &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    ~B()    &#123;        cout &lt;&lt; &quot;~B()&quot; &lt;&lt; endl;        //A::~A();//æ˜¾ç¤ºè°ƒç”¨ä¼šæŠ¥é”™        _numb = 0;    &#125;private:    int _numb;&#125;;\n\nè€Œåœ¨ææ„å‡½æ•°ä¸­ï¼Œå­ç±»çš„ææ„è°ƒç”¨å®Œæ¯•åï¼Œä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„ææ„ï¼Œä»¥ä¿è¯å…ˆææ„å­ç±»ï¼Œåœ¨ææ„çˆ¶ç±»ã€‚\næ‰€ä»¥å¹¶ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼è°ƒç”¨ï¼›æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»ææ„çš„æ—¶å€™ä¼šæŠ¥é”™\ntest.cpp: In destructor â€˜B::~B()â€™:test.cpp:74:15: error: no matching function for call to â€˜B::~B()â€™         A::~A();//æ˜¾ç¤ºè°ƒç”¨ä¼šæŠ¥é”™               ^test.cpp:32:5: note: candidate: â€˜A::~A()â€™     ~A()     ^test.cpp:32:5: note:   candidate expects 1 argument, 0 provided\n\n\n\n\næ„é€ å’Œææ„é¡ºåºå­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå½“åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œä¹Ÿä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°\n\nç»§æ‰¿ä¸­å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°\nå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°\n\nææ„é¡ºåºä¸æ„é€ ç›¸å\næ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°å¦‚ä½•æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å‘¢ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä»£ç ç¤ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Person&#123;public:    Person(string name, string sex, int age)    &#123;        _name = name;        _sex = sex;        _age = age;    &#125;protected:    string _name;    string _sex;    int _age;&#125;;class Student : public Person&#123;public:    // åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°    Student(string name,string sex,int age,int no)        :Person(name,sex,age),        _No(no)    &#123;&#125;    int _No;//å­¦å·&#125;;int  main()&#123;    Student sobj(&quot;æå&quot;,&quot;ç”·&quot;,18,1000);&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯è§å­ç±»æ­£å¸¸è°ƒç”¨äº†åŸºç±»æ„é€ å‡½æ•°å¹¶è¿›è¡Œäº†åˆå§‹åŒ–\n\nè¿™é‡Œä¹Ÿæ¶‰åŠåˆ°ä¹‹å‰å­¦è¿‡çš„ä¸€ä¸ªå°çŸ¥è¯†ï¼šåœ¨CPPä¸­ï¼Œç±»ä¸­æˆå‘˜çš„åˆå§‹åŒ–é¡ºåºæ˜¯ä¾ç…§å£°æ˜çš„é¡ºåºæ¥åˆå§‹åŒ–çš„ï¼è€ŒåŸºç±»ä¸­çš„æˆå‘˜å£°æ˜æ—©äºå­ç±»æˆå‘˜ï¼Œè‡ªç„¶ä¹Ÿæ˜¯å…ˆåˆå§‹åŒ–åŸºç±»çš„ã€‚\n1.7 åŸºç±»å’Œæ´¾ç”Ÿç±»èµ‹å€¼é—®é¢˜æ´¾ç”Ÿç±»æˆå‘˜å¯ä»¥èµ‹å€¼ç»™åŸºç±»çš„ å¯¹è±¡&#x2F;æŒ‡é’ˆ&#x2F;å¼•ç”¨ã€‚ä¸€èˆ¬æˆ‘ä»¬æŠŠè¿™ç§æƒ…å†µç§°ä¸ºåˆ‡ç‰‡ï¼Œå½¢è±¡åœ°è¡¨ç¤ºæŠŠæ´¾ç”Ÿç±»ä¸­çˆ¶ç±»é‚£éƒ¨åˆ†åˆ‡æ¥èµ‹å€¼è¿‡å»ã€‚\nä½†æ˜¯ï¼åè¿‡æ¥æ˜¯ä¸è¡Œçš„å“¦ï¼Œä½ ä¸èƒ½æŠŠåŸºç±»å¯¹è±¡èµ‹å€¼ç»™æ´¾ç”Ÿç±»å¯¹è±¡ã€‚\n\nåŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨å¯ä»¥ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ç»™æ´¾ç”Ÿç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ã€‚ä½†æ˜¯è¿™æ ·ä¸å¤Ÿå®‰å…¨ï¼Œé™¤éåŸºç±»çš„æŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¯¹åº”çš„æ´¾ç”Ÿç±»ã€‚\nå¦‚æœåŸºç±»æ˜¯å¤šæ€ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨RTTIï¼ˆè¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼‰çš„dynamic_castæ¥è¿›è¡Œå®‰å…¨å¤„ç†\n\n#include &lt;iostream&gt;using namespace std;class Person&#123;protected :    string _name;    string _sex;    int _age;&#125;;class Student : public Person&#123;public :    int _No ;//å­¦å·&#125;;int  main()&#123;    Student sobj ;    // 1.å­ç±»å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡/æŒ‡é’ˆ/å¼•ç”¨    Person pobj = sobj ;    Person* p1 = &amp;sobj;    Person&amp; p2 = sobj;    // 2.åŸºç±»å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™æ´¾ç”Ÿç±»å¯¹è±¡    //sobj = pobj;//err    // 3.åŸºç±»çš„æŒ‡é’ˆå¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢èµ‹å€¼ç»™æ´¾ç”Ÿç±»çš„æŒ‡é’ˆ    p1 = &amp;sobj;//å­ç±»å¯¹è±¡ç»™åŸºç±»æŒ‡é’ˆ    Student* ps1 = (Student*)p1; //åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»ï¼Œæ­£å¸¸è½¬æ¢    ps1-&gt;_No = 15;    cout&lt;&lt;ps1-&gt;_No &lt;&lt;endl;    p1 = &amp;pobj;//åŸºç±»å¯¹è±¡ç»™åŸºç±»æŒ‡é’ˆ    Student* ps2 = (Student*)p1; //è½¬æ¢è™½ç„¶å¯ä»¥ï¼Œä½†æ˜¯ä¼šå­˜åœ¨è¶Šç•Œè®¿é—®    ps2-&gt;_No = 10;    cout&lt;&lt;ps2-&gt;_No &lt;&lt;endl;    return 0;&#125;\n\n\nå…³äºæœ€åæåˆ°çš„è¶Šç•Œè®¿é—®é—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒæŒ‡é’ˆå˜é‡çš„å¤§å°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå…¶æŒ‡é’ˆç±»å‹çš„åŒºåˆ«ä¸»è¦åœ¨è®¿é—®èƒ½åŠ›çš„ä¸åŒã€‚æ¯”å¦‚char*æŒ‡é’ˆè§£å¼•ç”¨åªèƒ½è®¿é—®1ä¸ªå­—èŠ‚ï¼Œint*æŒ‡é’ˆè§£å¼•ç”¨å¯ä»¥è®¿é—®4ä¸ªå­—èŠ‚ï¼Œä»¥æ­¤ç±»æ¨ï¼ŒStudent*æŒ‡é’ˆè§£å¼•ç”¨å¯ä»¥è®¿é—®sizeof(Student)ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚\nè€Œå­ç±»å¯¹è±¡çš„å¤§å°éƒ½æ˜¯å¤§äºç­‰äºåŸºç±»å¯¹è±¡çš„å¤§å°çš„ã€‚è¿™å°±å¯¼è‡´å­ç±»æŒ‡é’ˆè®¿é—®åŸºç±»å¯¹è±¡å†…å®¹æ—¶ï¼Œä¸€æ¬¡è§£å¼•ç”¨è®¿é—®çš„ç©ºé—´è¶…é•¿ï¼Œé€ æˆäº†è¶Šç•Œè®¿é—®\n\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬åˆ‡ç‰‡è®²å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œå³æ–°çš„çˆ¶ç±»å¯¹è±¡ä¸­çš„å†…å®¹åªä¼šåŒ…å«çˆ¶ç±»çš„æˆå‘˜ã€‚å­ç±»å¤šå‡ºå»çš„é‚£ä¸€éƒ¨åˆ†æˆå‘˜ä¼šè¢«å‰”é™¤ã€‚\nè¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥åœ¨VSçš„è°ƒè¯•ä¸­è¯å®\n\nå› ä¸ºåŸºç±»çš„æˆå‘˜å˜é‡è¢«è®¾ç½®æˆäº†ä¿æŠ¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨å¤–éƒ¨è¿›è¡Œä¿®æ”¹ã€‚éœ€è¦æ˜¾å¼è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–åŸºç±»çš„æˆå‘˜ã€‚\n1.8 è™šç»§æ‰¿ï¼ˆè±å½¢ç»§æ‰¿é—®é¢˜ï¼‰æœ‰çš„æ—¶å€™ï¼Œç»§æ‰¿ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼šä¸€ä¸ªå­ç±»ç»§æ‰¿äº†ä¸¤ä¸ªåŸºç±»ï¼Œè€Œè¿™ä¸¤ä¸ªåŸºç±»åˆåŒæ—¶æ˜¯ä¸€ä¸ªåŸºç±»çš„æ´¾ç”Ÿç±»\n\nè¿™æ—¶å€™ï¼ŒDé‡Œé¢å°±ä¼šæœ‰ä¸¤ä»½Açš„å†…å®¹ï¼Œç›¸å½“äºä¸¤ä»½å…¬å…±éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œå› ä¸ºä¼šé€ æˆç©ºé—´æµªè´¹ã€‚è€Œä¸”ç›´æ¥è®¿é—®çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œå¯¹å˜é‡Xçš„è®¿é—®ä¸æ˜ç¡®â€\n\næ¯”å¦‚ï¼šintelå’Œamdè”åˆæ¨å‡ºçš„NUCå°ç”µè„‘ä¸­ï¼Œæœ‰ä¸€æ¬¾CPUæ˜¯ä»–ä»¬åˆä½œå¼€å‘çš„\nå¦‚ä½•è§£å†³åŒæ—¶ç»§æ‰¿AMDå’ŒINTELçš„é—®é¢˜ï¼Ÿ\n\nè¿™æ—¶å€™ä¼šå‡ºç°ä¸¤ä¸ªåŒåå˜é‡ï¼Œä¸€ä¸ªæ˜¯AMDé‡Œé¢æœ‰çš„ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯INTELé‡Œé¢æœ‰çš„å› ä¸ºä»–ä»¬æ˜¯ä»CPUé‡Œé¢ç»§æ‰¿æ¥çš„ã€‚\nè™½ç„¶æˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥åˆ†åˆ«ä¿®æ”¹å’Œè®¿é—®ã€‚ä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªå…¬å…±éƒ¨åˆ†å°±å‡ºç°äº†æµªè´¹ï¼ˆæ¯”å¦‚æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œå¤šç»™ä½ ä¸€ä»½æ²¡æœ‰å•¥æ„ä¹‰ï¼‰\n\n\nå’Œå‰é¢è¯´é“çš„åŒåé—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥è®¿é—®ç‰¹å®šçš„å˜é‡ï¼Œä½†æ˜¯è¿™æ ·æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è§£å†³ç©ºé—´æµªè´¹çš„é—®é¢˜ã€‚\n//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®cout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;cout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\n\nè¿™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨è™šç»§æ‰¿æ¥æ“ä½œï¼šç»™Bå’ŒCå¯¹Açš„ç»§æ‰¿åŠ ä¸Švirturalå…³é”®å­—ï¼ˆå¯¹å…¬å…±åŸºç±»çš„ç»§æ‰¿æ·»åŠ ä¸Šè™šç»§æ‰¿å…³é”®å­—ï¼‰\nclass CPU &#123;public:\tCPU()\t\t:_Structure(&quot;x86&quot;)\t&#123; &#125;\tchar _Structure[100];&#125;;class INTEL : virtual public CPU &#123;public:\tINTEL()\t\t:i_Brand(&quot;intel&quot;)\t&#123;&#125;\tchar i_Brand[10];&#125;;class AMD : virtual public CPU &#123;public:\tAMD()\t\t:a_Brand(&quot;amd&quot;)\t&#123;&#125;\tchar a_Brand[10];&#125;;//åŒæ—¶ç»§æ‰¿AMDå’ŒINTEL//ç›¸å½“äºæœ‰ä¸¤ä¸ª_Structureå˜é‡//å®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå°±å¤Ÿäº†class NUC :public AMD, public INTEL &#123;&#125;;void test1()&#123;\tNUC n1;\t//å¯¹â€œ_Structureâ€çš„è®¿é—®ä¸æ˜ç¡®\t//cout &lt;&lt; n1._Structure &lt;&lt; endl;//err\t//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰\t//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®\tcout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;\tcout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\t//è§£å†³æ–¹æ³•2ï¼Œåœ¨AMDå’ŒINTELå¯¹CPUçš„ç»§æ‰¿ä¸ŠåŠ virtual\tcout &lt;&lt; &quot;n1è®¿é—®ï¼š&quot; &lt;&lt; n1._Structure &lt;&lt; endl;\t//ç°åœ¨å°±æ²¡æœ‰æŠ¥é”™äº†\t//å› ä¸ºè¿™æ—¶å€™AMDå’ŒINTELä¸­çš„_Structureéƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ªåœ°å€\tcout &lt;&lt; &quot;&amp;intel: &quot; &lt;&lt; &amp;(n1.INTEL::_Structure) &lt;&lt; endl;\tcout &lt;&lt; &quot;&amp;amd:   &quot; &lt;&lt; &amp;(n1.AMD::_Structure) &lt;&lt; endl;\t//ä¿®æ”¹INTELä¸­çš„_Structureï¼Œä¹Ÿä¼šè¿ä»£ä¿®æ”¹AMDä¸­çš„_Structure&#125;\n\nè¿™æ—¶å€™ç›´æ¥è®¿é—®å˜é‡å°±ä¸ä¼šæŠ¥é”™äº†ã€‚å› ä¸ºè¿™æ—¶å€™ï¼ŒBå’ŒCä¸­çš„è¯¥å˜é‡æŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹æ“ä½œä¼šåŒæ­¥ã€‚\n\nç»§æ‰¿æ¨¡å‹æ™®é€šè±å½¢ç»§æ‰¿ä¸‹å›¾ä¸­çš„ç»§æ‰¿æ¨¡å‹æ˜¯ä¸€ä¸ªç®€å•çš„è±å½¢ç»§æ‰¿ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°dä¸­å…³äºä¸¤ä¸ªå…¬å…±A._açš„ä½ç½®æ˜¯ä¸ç›¸åŒçš„ï¼›\n\nåœ¨cpuç»§æ‰¿æ¨¡å‹ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œamdå’Œintelç»§æ‰¿çš„cpuç±»ä¸­X86å­—ç¬¦ä¸²çš„åœ°å€æ˜¯ä¸ç›¸åŒçš„\n\nè¿™é‡Œå› ä¸ºå†…å­˜å¯¹é½çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ— æ³•çœ‹æ¸…æ¥šå®ƒçš„å…¨è²Œã€‚\nä½†é€šè¿‡è¿™é‡Œçš„ç»§æ‰¿æ¨¡å‹ï¼Œå¯ä»¥çœ‹å‡ºæ¥åœ¨è±å½¢ç»§æ‰¿é—®é¢˜ä¸­ï¼Œä¸ä½¿ç”¨è™šç»§æ‰¿ä¼šé€ æˆä¸¤ä¸ªCPUå¯¹è±¡çš„å¤šæ¬¡ç»§æ‰¿ï¼Œå¯¼è‡´è®¿é—®ä¸æ˜ç¡®çš„ç‰¹æ€§ã€‚\nè™šç»§æ‰¿æ¨¡å‹é‚£æ¢æˆè™šç»§æ‰¿ä¹‹åçš„æ¨¡å‹æ˜¯ä»€ä¹ˆæ ·å­çš„å‘¢ï¼Ÿ\nå…ˆç”¨dæœ¬èº«è®¿é—®d._aï¼Œå¯ä»¥çœ‹åˆ°çº¢è‰²ç®­å¤´æ‰€æŒ‡åŒºåŸŸçš„å†…å­˜è¢«åˆå§‹åŒ–ä¸º0\n\nå†æŒ‡å®šä½œç”¨åŸŸB::è¿›è¡Œè®¿é—®ï¼Œä¼šå‘ç°å…¶ä¿®æ”¹çš„ä¾æ—§æ˜¯è¿™ä¸ªåœ°å€çš„æ•°æ®ï¼\n\nç”¨ä½œç”¨åŸŸC::æ¥è®¿é—®çš„ç»“æœä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¾æ—§ä¿®æ”¹çš„æ˜¯ç›¸åŒå†…å­˜ä½ç½®çš„æ•°æ®\n\nç”±æ­¤å¯è§ï¼Œè±å½¢ç»§æ‰¿äº†ä¹‹åï¼Œ_aå˜é‡çš„åœ°å€å°±è¢«ç¡®å®šä¸ºä¸€ä¸ªåœ°å€äº†ã€‚æ‰€æœ‰ä½œç”¨åŸŸä¸­çš„_aæŒ‡å‘çš„éƒ½æ˜¯è¿™ä¸ªå…¬å…±åœ°å€ï¼Œä¿®æ”¹çš„éƒ½æ˜¯è¿™ä¸ªå…¬å…±åœ°å€çš„å€¼ï¼Œä¹Ÿå°±ä¸ä¼šå‡ºç°äºŒä¹‰æ€§é—®é¢˜ï¼\næœ€ç»ˆè¿è¡Œå®Œæ¯•ï¼Œå†…å­˜çª—å£å¦‚å›¾ï¼ŒAè¢«ä¸¢åˆ°äº†æœ€åé¢\n\nå†è¯´å›ä¸Šæ–¹æåˆ°çš„cpuç»§æ‰¿æ¨¡å‹ï¼Œè¿›å…¥è°ƒè¯•çª—å£ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œåˆ†åˆ«åˆ†ä¸ºäº†3ä¸ªæ¨¡å—ï¼Œä¿å­˜äº†ä¸åŒåŸºç±»çš„æˆå‘˜ã€‚è€Œå®ƒä»¬ä¹‹ä¸­çš„_Stuctureæˆå‘˜åªæœ‰ä¸€ä¸ªï¼ˆæŒ‡å‘&quot;x86&quot;å­—ç¬¦ä¸²çš„åœ°å€æ˜¯ç›¸åŒçš„ï¼‰ï¼Œæ‰€ä»¥å°±ä¸ä¼šå‡ºç°å¼‚ä¹‰ï¼›\n\næ­¤æ—¶æˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸ç®¡æ˜¯ä¸Šæ–¹ABCDçš„ç»§æ‰¿æ¨¡å‹ï¼Œè¿˜æ˜¯è¿™é‡Œçš„CPUç»§æ‰¿æ¨¡å‹ï¼Œå†…å­˜éƒ½å‡ºç°äº†ä¸€å®šçš„ç©ºç½®ï¼›é‚£è¿™é‡Œç©ºç€çš„ç©ºé—´æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿä¹Ÿæ˜¯å†…å­˜å¯¹é½å—ï¼Ÿéä¹Ÿï¼\nè™šåŸºè¡¨\né€šè¿‡åœ¨è™šåŸºè¡¨ä¸­å­˜æ”¾è™šåŸºç±»çš„åç§»é‡ï¼Œå¯ä»¥è§£å†³è±å½¢ç»§æ‰¿äº§ç”Ÿçš„äºŒä¹‰æ€§é—®é¢˜ã€‚\n\nä¸‹å›¾èƒ½å¸®ä½ äº†è§£è¿™ä¸ªè™šç»§æ‰¿æ¨¡å‹ä¸­ï¼Œå†…å­˜çš„åŒºå—æ˜¯æ€ä¹ˆåˆ’åˆ†çš„ï¼›å¯ä»¥çœ‹åˆ°Bå’ŒCè¿™ä¸¤ä¸ªçˆ¶ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªè™šåŸºè¡¨çš„æŒ‡é’ˆï¼ŒæŒ‡å‘è™šåŸºè¡¨çš„åœ°å€ã€‚åœ°å€ä¸­å­˜æ”¾çš„æ˜¯Bå’ŒCå¯¹è±¡è·ŸAå¯¹è±¡åœ°å€çš„åç§»é‡ã€‚\n\nBå’ŒCä¸¤ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šåŸºè¡¨åœ°å€ï¼Œè€Œä¸æ˜¯å…±ç”¨ä¸€ä¸ªï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åˆ‡ç‰‡æ—¶å€™çš„æŸ¥è¯¢ã€‚\n\nè¿™æ ·ï¼Œè™šåŸºè¡¨å°±å¸®æˆ‘ä»¬é¿å…äº†åœ¨è®¿é—®è±å½¢ç»§æ‰¿æ¨¡å‹æ—¶å‡ºç°å¼‚ä¹‰çš„é—®é¢˜ã€‚ä¸è¿‡ï¼Œå› ä¸ºå¤šäº†ä¸€å±‚é—´æ¥çš„åç§»é‡æŸ¥è¯¢ï¼Œè®¿é—®å…¬å…±åŸºç±»çš„æˆå‘˜çš„æ•ˆç‡ä¼šæœ‰æ‰€é™ä½ã€‚\n\ncpuçš„ç»§æ‰¿æ¨¡å‹ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåœ¨amdå’Œintelè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å­˜å‚¨ä½ç½®ä¸Šæ–¹ï¼Œå­˜æ”¾çš„å°±æ˜¯ä¸€ä¸ªè™šåŸºè¡¨çš„åœ°å€ã€‚è€Œè™šåŸºè¡¨çš„è¿™ä¸ªåœ°å€ä¹‹åç´§è·Ÿç€çš„å°±æ˜¯ä¸€ä¸ªå½“å‰å¯¹è±¡è·ŸåŸºç±»å¯¹è±¡çš„åç§»é‡çš„æ•°æ®ï¼›\nåŒæ—¶ä¹Ÿèƒ½æ€»ç»“å‡ºä¸€ä¸ªè§„å¾‹ï¼Œè™šåŸºè¡¨çš„åœ°å€ä¸­çš„æ•°æ®ä»¥å…¨0å¼€å¤´ï¼Œç¬¬äºŒä¸ªï¼ˆå‡†ç¡®æ¥è¯´åº”è¯¥æ˜¯åç§»4ä¸ªå­—èŠ‚ï¼‰çš„åœ°å€æ‰æ˜¯åŸºç±»åç§»é‡çš„æ•°æ®\n\nè¿™æ ·åšå°±æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå³ä¾¿æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„åŸºç±»æŒ‡é’ˆï¼ˆæ¯”å¦‚amdæˆ–è€…intelï¼‰æ¥æŒ‡å‘nucçš„å­ç±»å¯¹è±¡ï¼›\nNUC n1;AMD* amd = &amp;n1;INTEL* itl = &amp;n1;\n\nè¿™é‡Œçš„èµ‹å€¼éœ€è¦å¯¹NUCå¯¹è±¡è¿›è¡Œåˆ‡ç‰‡ï¼Œè¦è·å–åˆ°AMD/INTELè¿™ä¸¤ä¸ªçˆ¶ç±»çš„æˆå‘˜çš„åŒæ—¶ï¼Œè¿˜éœ€è¦è·å–åˆ°å…¬å…±åŸºç±»CPUæˆå‘˜çš„ä½ç½®ï¼›\næ­¤æ—¶å› ä¸ºå­˜åœ¨è™šåŸºè¡¨ï¼Œå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡å„è‡ªè™šåŸºè¡¨é‡Œé¢å­˜æ”¾çš„åç§»é‡ï¼Œæ¥è®¡ç®—å…¬å…±åŸºç±»CPUæˆå‘˜çš„ä½ç½®ï¼Œä»è€Œè·å–åˆ°äº†CPUç±»çš„æˆå‘˜ã€‚\nå¦å¤–ï¼Œå½“AMDå’ŒINTELé‡‡ç”¨è™šç»§æ‰¿æ¥ç»§æ‰¿CPUçš„æ—¶å€™ï¼Œä»–ä»¬ç±»å†…å°±å·²ç»ä¼šæœ‰è™šåŸºè¡¨äº†ã€‚è·Ÿä»–ä»¬è‡ªå·±æ˜¯å¦å­˜åœ¨å­ç±»æ— å…³ï¼è¿™æ ·æ˜¯ä¸ºäº†ä¿è¯è®¿é—®æ—¶å€™çš„ç»Ÿä¸€æ€§ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç \nNUC n;AMD a;AMD* amd1 = &amp;n;AMD* amd2 = &amp;a;\n\nå¯¹äºç¼–è¯‘å™¨è€Œè¨€ï¼Œå…¶å¹¶ä¸çŸ¥é“AMD*æŒ‡é’ˆåˆ°åº•æŒ‡å‘çš„æ˜¯æœ¬ç±»è¿˜æ˜¯å­ç±»ï¼Œè€ŒAMDå¯¹è±¡æœ¬èº«ä¹Ÿæœ‰è™šåŸºè¡¨ï¼Œå°±èƒ½ä¿è¯ä¸ç®¡æ˜¯æœ¬ç±»è¿˜æ˜¯å­ç±»ï¼Œéƒ½èƒ½é€šè¿‡åŒæ ·çš„æ–¹å¼ï¼ˆé€šè¿‡è™šåŸºè¡¨æŸ¥è¯¢åç§»é‡ï¼‰æ¥æ‰¾åˆ°è™šç»§æ‰¿çš„çˆ¶ç±»CPUçš„åœ°å€ï¼Œä»è€Œè®¿é—®åˆ°çˆ¶ç±»å¯¹è±¡æˆå‘˜ã€‚\n\nä½¿ç”¨è™šåŸºè¡¨è¿˜å¯ä»¥è®©å¼€å‘è€…çµæ´»æ§åˆ¶ç¼–è¯‘å™¨å¯¹å†…å­˜åŒºå—åˆ’åˆ†çš„ä¼˜åŒ–ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¸¤ä¸ªæ —å­ä¸­ï¼Œåœ¨VS2019é‡Œé¢ï¼Œå…¬å…±åŸºç±»ä¸€èˆ¬éƒ½æ˜¯å¤„äºæœ€ä¸‹æ–¹çš„ã€‚\nä½†å¦‚æœæˆ‘æƒ³è®¾è®¡å…¬å…±åŸºç±»æ”¾åœ¨æœ€ä¸Šæ–¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è™šåŸºè¡¨ä¸­çš„åç§»é‡æ¥å®ç°ã€‚\nè€Œå¦‚æœcppå¼ºåˆ¶è§„å®šå…¬å…±åŸºç±»å¿…é¡»è¦åœ¨æ™®é€šåŸºç±»çš„ä¸‹æ–¹ï¼Œè€Œä¸ä½¿ç”¨è™šåŸºè¡¨æ¥å­˜æ”¾åŸºç±»åç§»é‡ï¼Œé‚£å°±é™åˆ¶äº†ç¼–è¯‘å™¨çš„å¼€å‘ï¼Œä¹Ÿä¸æ–¹ä¾¿å®é™…çš„æŸ¥æ‰¾\n\nC++STDä¸­çš„IOæµå°±ä½¿ç”¨äº†è±å½¢ç»§æ‰¿æ¥è¿›è¡Œè®¾è®¡ã€‚\nä½†å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œç”±äºè±å½¢ç»§æ‰¿å®åœ¨è¿‡äºå¤æ‚ï¼Œä¸€èˆ¬ä¸å»ºè®®ä½ è¿™ä¹ˆâ€œä½œæ­»â€ï¼›\n1.9 ç»§æ‰¿å’Œç»„åˆ\nç»§æ‰¿ï¼šä¸Šè¿°æ‰€è¯´ã€‚æ¯ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªåŸºç±»å¯¹è±¡is-a\nç»„åˆï¼šåœ¨ä¸€ä¸ªç±»é‡Œé¢åŒ…å«å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡æˆå‘˜ã€‚æ¯ä¸€ä¸ªBå¯¹è±¡ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ªA has-aï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨è‡ªå·±çš„ç±»ä¸­ä½¿ç”¨std::stringï¼Œæ­¤æ—¶æˆ‘ä»¬è‡ªå·±çš„ç±»å’Œstd::stringçš„å…³ç³»å°±æ˜¯ç»„åˆ\n\nç»„åˆæ˜¯é»‘ç›’å¤ç”¨ï¼Œç»§æ‰¿æ˜¯ç™¾ç›’å¤ç”¨ï¼ˆå­ç±»èƒ½çŸ¥é“çˆ¶ç±»çš„ç»†èŠ‚ï¼Œç§°ä¸ºç™½ç›’ï¼‰\nå®é™…æƒ…å†µä¸­ï¼Œå»ºè®®ä¼˜å…ˆé€‰æ‹©ç»„åˆï¼Œè€Œä¸æ˜¯ç»§æ‰¿ã€‚\n\nç»§æ‰¿å¢åŠ äº†ä»£ç çš„å¤ç”¨æ€§ï¼Œä½†æ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šç ´åäº†åŸºç±»çš„å°è£…æ€§ã€‚æ´¾ç”Ÿç±»å’ŒåŸºç±»çš„å…³è”å¾ˆå¼ºï¼Œè€¦åˆåº¦é«˜ã€‚\nå¯¹è±¡ç»„åˆæ˜¯å¦å¤–ä¸€ç§å¤ç”¨çš„é€‰æ‹©ï¼Œè¿™æ—¶å€™ï¼Œå¯¹è±¡Açš„å†…éƒ¨ç»“æ„æ˜¯ä¸å¾—è€ŒçŸ¥çš„ã€‚è¿™æ ·å°±å‡å°äº†å¯¹è±¡ä¹‹é—´çš„å…³è”æ€§ï¼Œè€¦åˆåº¦ä½ï¼Œä¿æŠ¤äº†å°è£…ï¼Œæ›´æ–¹ä¾¿ä»£ç çš„ç»´æŠ¤\n\nä¸è¿‡ï¼Œç»§æ‰¿è¿˜æœ‰å¦å¤–ä¸€ç§ç”¨é€”ï¼Œé‚£å°±æ˜¯å¤šæ€ã€‚æˆ‘ä»¬ä¸‹è¾¹ä¼šè®²è§£çš„ï¼\nåœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œè¿½æ±‚é«˜å†…èšï¼Œä½è€¦åˆï¼Œä¸åŒæ¨¡å—ä¹‹é—´çš„å…³è”åº¦åº”è¯¥ç«Ÿå¯èƒ½çš„ä½ã€‚åœ¨è®¾è®¡ç±»é—´å…³ç³»ï¼Œå’Œä¸åŒåŠŸèƒ½æ¨¡å—çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘å…·ä½“åœºæ™¯æ¥è¿›è¡Œç»§æ‰¿å’Œç»„åˆçš„é€‰ç”¨ã€‚\næ¯”å¦‚Aç»§æ‰¿Bï¼Œæ­¤æ—¶ä¸¤ä¸ªç±»å°±è¢«å¼ºå…³è”åœ¨ä¸€èµ·äº†ï¼Œè€¦åˆåº¦ç›¸å¯¹è¾ƒé«˜ã€‚å¯¹çˆ¶ç±»Açš„ä»»ä½•ä¿®æ”¹iï¼Œéƒ½ä¼šå½±å“è¾¾åˆ°Bï¼Œç”šè‡³å¯¼è‡´Bæ— æ³•æ­£å¸¸è¿è¡Œã€‚\næ€»ç»“å¤šç»§æ‰¿æ‰€å¯¼è‡´çš„è±å½¢ç»§æ‰¿é—®é¢˜ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šè®©C++çš„è¯­æ³•å˜å¾—å¤æ‚äº†ã€‚æ¯”å¦‚javaæ˜¯æ²¡æœ‰å¤šç»§æ‰¿çš„ã€‚åœ¨å®é™…ä½¿ç”¨æƒ…å†µä¸­ï¼Œä¸å»ºè®®ä½¿ç”¨å¤šç»§æ‰¿ã€‚\n\n2.å¤šæ€\né™æ€å¤šæ€ï¼šå‡½æ•°é‡è½½\nåŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°ç»„æˆçš„å¤šæ€\n\nå¤šæ€é€šä¿—åœ°è®²å°±æ˜¯å¤šç§å½¢æ€ï¼Œå½“ä¸åŒçš„å¯¹è±¡å»å®Œæˆç›¸åŒçš„äº‹æƒ…çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿä¸åŒçš„çŠ¶æ€ã€‚\næ¯”å¦‚ä¹°ç¥¨è¿™ä¸ªè¡Œä¸ºï¼Œä¼šè¡ç”Ÿå‡ºå…¨ç¥¨ã€å„¿ç«¥ç¥¨ã€å­¦ç”Ÿç¥¨ç­‰ç­‰ç±»å‹ã€‚ä¸åŒèº«ä»½çš„äººè¿‡æ¥ä¹°ç¥¨ï¼Œåº”è¯¥è°ƒç”¨ä¸åŒçš„å¤„ç†æµç¨‹ã€‚ä½¿ç”¨å¤šæ€ï¼Œå°±èƒ½å°†è¿™äº›ä¸åŒæµç¨‹çš„ç›¸åŒç±»å‹å‡½æ•°ï¼ˆéƒ½æ˜¯åœ¨ä¹°ç¥¨ï¼‰ç»™æ‹Ÿåˆæˆä¸åŒå­ç±»å¯¹è±¡ä¸­çš„åŒåå‡½æ•°ï¼›\n\næ³¨æ„ï¼Œå¤šæ€åªæ˜¯å®ç°è¿™ä¸ªåœºæ™¯çš„æ–¹å¼ä¹‹ä¸€ï¼›ä½ å½“ç„¶å¯ä»¥å°è£…æ¯«æ— ç›¸å¹²çš„ç±»ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨å‡½æ•°é‡è½½ï¼Œå¤šä¸ªå‡½æ•°ï¼Œåˆ¤æ–­è¯­å¥æ¥è§£å†³æ­¤ç±»é—®é¢˜ã€‚\n\n2.1 è™šå‡½æ•°2.1.1 åŸºæœ¬ä½¿ç”¨ä»¥åŠåŠ¨æ€å¤šæ€è™šå‡½æ•°ï¼Œå¹¶ä¸ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯è™šæ— çš„ã€‚è€Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åœ¨ä¸€å®šæƒ…å†µä¸‹ä¼šè¢«æ›¿æ¢ï¼ˆå°±å¥½æ¯”ç»§æ‰¿ä¸­çš„è™šç»§æ‰¿é—®é¢˜ï¼‰ã€‚è¦å®ç°åŠ¨æ€å¤šæ€ï¼Œå°±éœ€è¦å€ŸåŠ©è™šå‡½æ•°æ¥å®ç°ã€‚\n\nè¿™é‡Œé¡ºä¾¿æä¸€å˜´å‡½æ•°çš„ä¸‰ç§å…³ç³»ï¼šé‡è½½ã€éšè—ï¼ˆç»§æ‰¿ä¸­åŒåé—®é¢˜ï¼‰ã€è¦†ç›–ï¼ˆå¤šæ€ä¸­è™šå‡½æ•°è¢«å­ç±»è¦†ç›–ï¼‰\n\nè™šå‡½æ•°éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶\n\nå‡½æ•°åã€å‚æ•°ã€è¿”å›å€¼éƒ½ç›¸åŒ\nçˆ¶ç±»ä¸­è¯¥å‡½æ•°ä½¿ç”¨äº†virtualå…³é”®å­—æ¥ä¿®é¥°æ­¤å‡½æ•°\n\nè€Œè°ƒç”¨çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¯çˆ¶ç±»æŒ‡é’ˆ/å¼•ç”¨æŒ‡å‘å­ç±»çš„å¯¹è±¡çš„æ—¶å€™ï¼Œæ‰ä¼šè°ƒç”¨å­ç±»é‡å†™åçš„è™šå‡½æ•°ï¼ˆå¦‚æœæ²¡æœ‰é‡å†™è¯¥å‡½æ•°ï¼Œåˆ™è°ƒç”¨çš„ä¾æ—§æ˜¯çˆ¶ç±»çš„å‡½æ•°ï¼‰\n\nä»¥ä¸‹é¢è¿™ä¸ªåŠ¨ç‰©è¯´è¯çš„ä»£ç ä¸ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Animal &#123;public:\t//void Talk()\tvirtual void Talk()//è™šå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;Animal is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class CAT : public Animal&#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;CAT is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class DOG : public Animal &#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DOG is talking&quot; &lt;&lt; endl;\t&#125;&#125;;//åŸºç±»ä¸­ä¸ä½¿ç”¨è™šå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°çš„å†…å®¹å·²ç¡®å®š//ä¸ç®¡ä¼ å‚ä»€ä¹ˆç±»ï¼Œéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°//åŠ ä¸Šè™šå‡½æ•°virtualåï¼Œä¼šè°ƒç”¨CATå’ŒDOGçš„Talkå‡½æ•°void MakeTalk(Animal&amp; it) &#123;\tit.Talk();//è°ƒç”¨å¯¹åº”çš„Talkå‡½æ•°&#125;\n\nå½“åŸºç±»Animalä¸­çš„Talkå‡½æ•°æ²¡æœ‰ç”¨virtualä¿®é¥°æ—¶ï¼Œä¸ç®¡ç»™è¿™ä¸ªå‡½æ•°ä¼ å‚ä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°\n\nå½“æˆ‘ä»¬ç”¨è™šå‡½æ•°è¿›è¡Œä¿®é¥°åï¼Œå°±ä¼šè°ƒç”¨æ´¾ç”Ÿç±»CATå’ŒDOGçš„Talkå‡½æ•°ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ¨æ€å¤šæ€ã€‚\n\nå¯¹äºè™šå‡½æ•°ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n\nå½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šè§¦å‘åŠ¨æ€å¤šæ€ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŒåå‡½æ•°ä¼šè¦†å†™åŸºç±»ä¸­çš„è™šå‡½æ•°\nä¸èƒ½å®šä¹‰é™æ€è™šå‡½æ•°â€”â€”å› ä¸ºé™æ€å‡½æ•°æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œè€Œä¸æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡\nä¸èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°â€”â€”æ€»ä¸èƒ½ç”¨æ´¾ç”Ÿç±»çš„æ„é€ æ¥è¦†å†™åŸºç±»çš„æ„é€ å§ï¼Ÿè¿™ä¸ç¬¦åˆç»§æ‰¿ä¸­å¯¹æ„é€ å‡½æ•°çš„è¦æ±‚\nææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°\n\n2.1.2 è™šææ„å‡½æ•°æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ææ„ä¸€ä¸ªå­ç±»å¯¹è±¡æ—¶ï¼Œå¾€å¾€ä¼šç»™åŸºç±»çš„ææ„å‡½æ•°åŠ ä¸Švirtualä¿®é¥°ï¼Œè¿™æ ·åªè¦ä¼ æ´¾ç”Ÿç±»çš„å¯¹è±¡ç»™åŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»å¯¹åº”çš„ææ„å‡½æ•°ï¼Œå®Œæˆä¸åŒçš„ææ„æ“ä½œã€‚\nè€Œä¸æ˜¯éƒ½å‘†å‘†çš„è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°â€”â€”é‚£æ ·å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼ï¼Œå› ä¸ºå­ç±»éƒ¨åˆ†çš„æˆå‘˜å¹¶æ²¡æœ‰è¢«ææ„ï¼\nè¿™ä¹Ÿæ˜¯ä¸ºä½•ï¼Œç±»ä¸­ææ„å‡½æ•°ä¼šè¢«ç»Ÿä¸€é‡å‘½åä¸ºdestructor()ï¼Œä¾¿æ˜¯ä¸ºäº†è®©çˆ¶ç±»å’Œå­ç±»çš„ææ„å‡½æ•°åœ¨è®¾ç½®äº†virtualå…³é”®å­—åï¼Œå‡½æ•°åŒåï¼Œå¯ä»¥æ„æˆå¤šæ€ï¼\næ‰€ä»¥ï¼Œå¦‚æœä¸€ä¸ªç±»æ˜¯åŸºç±»ï¼Œæœ€å¥½å°†ææ„è®¾ç½®æˆè™šææ„ã€‚\næµ‹è¯•#include &lt;iostream&gt;using namespace std;class Queue&#123;public:    Queue()        : _a(new int[10])    &#123;    &#125;    ~Queue()    &#123;        cout &lt;&lt; &quot;~Queue&quot; &lt;&lt; endl;        delete[] _a;    &#125;private:    int *_a;&#125;;class MyStack : public Queue&#123;public:    MyStack(int capa)        : _a1(new int[capa])    &#123;    &#125;    ~MyStack()    &#123;        cout &lt;&lt; &quot;~MyStack&quot; &lt;&lt; endl;        delete[] _a1;    &#125;private:    int *_a1;&#125;;int main()&#123;    Queue *q1 = new Queue();    delete q1; // è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°    Queue *q2 = new MyStack(4); // çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»    delete q2;                  // å¦‚æœåŠ äº†è™šææ„ï¼Œå°±ä¼šè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°    return 0;&#125;\n\nå…¶ä¸­æˆ‘ä»¬å°†å­ç±»MyStackçš„æŒ‡é’ˆèµ‹å€¼ç»™äº†çˆ¶ç±»ã€‚è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä¼šå‘ç°çˆ¶ç±»çš„ææ„å‡½æ•°è¢«æ­£å¸¸è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œä½†å­ç±»çš„ææ„å‡½æ•°å¹¶æ²¡æœ‰è¢«è°ƒç”¨ã€‚\nè¿™å°±å¯¼è‡´å­ç±»å¯¹è±¡ä¸­çš„int *_a1;æŒ‡é’ˆç”³è¯·çš„å†…å­˜æ²¡æœ‰è¢«æ­£å¸¸é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„éœ²ï¼›\nvirtual ~Queue()&#123;    cout &lt;&lt; &quot;~Queue&quot; &lt;&lt; endl;    delete[] _a;&#125;\n\nå½“æˆ‘ä»¬ç»™çˆ¶ç±»çš„ææ„æ·»åŠ ä¸Švirtualå…³é”®å­—åï¼Œå†æ¬¡è¿è¡Œè¿™ä¸ªä»£ç \n~Queue~MyStack~Queue\n\næ­¤æ—¶çˆ¶ç±»å’Œå­ç±»çš„ææ„éƒ½è¢«æˆåŠŸè°ƒç”¨äº†ï¼\nä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿææ„é¡ºåºï¼Œç»™ä¸¤ä¸ªç±»éƒ½æ–°å¢äº†ä¸€ä¸ªæˆå‘˜å˜é‡ä½œä¸ºæ ‡è®°ä½ï¼Œåœ¨ææ„çš„æ—¶å€™æ‰“å°ã€‚\nclass Queue&#123;public:    Queue(int no)        : _a(new int[10]), _no(no)    &#123;    &#125;    virtual ~Queue()    &#123;        cout &lt;&lt; &quot;~Queue &quot; &lt;&lt; _no &lt;&lt; endl;        delete[] _a;    &#125;private:    int _no;    int *_a;&#125;;class MyStack : public Queue&#123;public:    MyStack(int capa, int no)        : _a1(new int[capa]), Queue(no), _nos(no)    &#123;    &#125;    ~MyStack()    &#123;        cout &lt;&lt; &quot;~MyStack &quot; &lt;&lt; _nos &lt;&lt; endl;        delete[] _a1;    &#125;private:    int *_a1;    int _nos;&#125;;int main()&#123;    Queue *q1 = new Queue(1);    delete q1; // è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°    Queue *q2 = new MyStack(4, 2); // çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»    delete q2;                     // å¦‚æœåŠ äº†è™šææ„ï¼Œå°±ä¼šè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆq2è¢«deleteé‡Šæ”¾çš„æ—¶å€™ï¼Œå…ˆè°ƒç”¨äº†å­ç±»çš„ææ„å‡½æ•°ï¼Œåè°ƒç”¨äº†çˆ¶ç±»çš„ææ„å‡½æ•°ã€‚\n~Queue 1~MyStack 2~Queue 2\n\nè¿™æ ·å°±ä¸ä¼šå‡ºç°å†…å­˜æ³„éœ²äº†ï¼\n2.1.3 å­ç±»ä¸é‡å†™åœ¨è¿™ä¸ªç»§æ‰¿æ¨¡å‹ä¸­ï¼Œå­ç±»Stuå¹¶æ²¡æœ‰é‡å†™çˆ¶ç±»å‡½æ•°ï¼Œè¿è¡Œçš„æ—¶å€™ï¼Œè°ƒç”¨çš„éƒ½æ˜¯çˆ¶ç±»çš„æˆå‘˜å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªæ™®é€šçš„ç»§æ‰¿è°ƒç”¨ã€‚\nclass Person&#123;public:    virtual A *f()    &#123;        cout &lt;&lt; &quot;virtual A* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;&#125;;class Stu : public Person&#123;public:    int _a;&#125;;int main()&#123;    Stu s;    Person p;    Person* ptr = &amp;p;    ptr-&gt;f();    ptr = &amp;s;    ptr-&gt;f();    return 0;&#125;\n\nè¾“å‡ºç»“æœ\nvirtual A* f()virtual A* f()\n\n2.1.4 åå˜è™šå‡½æ•°é‡å†™çš„æ—¶å€™ï¼Œå¯¹è¿”å›å€¼è¿˜ä¼šæœ‰ä¸€ä¸ªä¾‹å¤–çš„è¦æ±‚ï¼šåå˜ï¼›\nå‰é¢æåˆ°ï¼Œè™šå‡½æ•°æ„æˆé‡å†™ï¼Œå¿…é¡»è¦ä¿è¯è¿”å›å€¼ç›¸åŒã€‚ä½†åå˜çš„å­˜åœ¨å°±æ–°å¢äº†ä¸€ä¸ªè§„å®šï¼Œæˆ‘ä»¬çš„è¿”å›å€¼å¹¶ä¸ä¸€å®šè¦ä¸¥æ ¼ç›¸åŒã€‚\nçˆ¶ç±»ç”²ä¸­å‡½æ•°è¿”å›å€¼æ˜¯æŸä¸ªçˆ¶ç±»ä¹™çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨æ—¶ï¼Œå­ç±»ä¸™è™šå‡½æ•°é‡å†™çš„æ—¶å€™ï¼Œè¿”å›å€¼å¯ä»¥æ˜¯å­ç±»ä¸&#x2F;çˆ¶ç±»ä¹™çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼ˆå¯¹åº”çˆ¶å­å…³ç³»å³å¯ï¼Œåœ¨è¿™é‡Œï¼Œç”²ä¸™/ä¹™ä¸æ˜¯ä¸¤å¯¹çˆ¶å­ï¼‰\n// Bç±»ç»§æ‰¿äº†Aç±»class Person&#123;public:    virtual A *f()    &#123;        cout &lt;&lt; &quot;virtual A* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;&#125;;class Stu : public Person&#123;public:    virtual B *f()    &#123;        cout &lt;&lt; &quot;virtual B* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;&#125;;int main()&#123;    Stu s;    Person p;    Person* ptr = &amp;p;    ptr-&gt;f();    ptr = &amp;s;    ptr-&gt;f();    return 0;&#125;\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼ŒStuå­ç±»å¯¹çˆ¶ç±»è™šå‡½æ•°çš„é‡å†™ï¼Œè¿”å›å€¼å°±æ˜¯å­ç±»çš„æŒ‡é’ˆï¼›ç¼–è¯‘é€šè¿‡å¹¶è¿è¡Œï¼Œç»“æœå¦‚ä¸‹ã€‚å¯è§çš„ç¡®æ„æˆäº†å¤šæ€ã€‚\n$ g++ test.cpp -o test$ ./testvirtual A* f()virtual B* f()\n\nå¦‚æœå¸¦ä¸Šå¼•ç”¨ï¼Œæ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„\nclass Person&#123;public:    virtual A *f()    &#123;        cout &lt;&lt; &quot;virtual A* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;    virtual A &amp;func_a(A &amp;a, B &amp;b)    &#123;        cout &lt;&lt; &quot;virtual A &amp;func_a(A &amp;a, B &amp;b)&quot; &lt;&lt; endl;        return a;    &#125;&#125;;class Stu : public Person&#123;public:    virtual B *f()    &#123;        cout &lt;&lt; &quot;virtual B* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;    virtual B &amp;func_a(A &amp;a, B &amp;b)    &#123;        cout &lt;&lt; &quot;virtual B &amp;func_a(A &amp;a, B &amp;b)&quot; &lt;&lt; endl;        return b;    &#125;&#125;;int main()&#123;    Stu s;    Person p;    B test_b;    Person *ptr = &amp;p;    ptr-&gt;f();    ptr-&gt;func_a(test_b,test_b);    ptr = &amp;s;    ptr-&gt;f();    ptr-&gt;func_a(test_b,test_b);    return 0;&#125;\n\nè¿™é‡Œæˆ‘ç»™func_aè®¾è®¡äº†ä¸¤ä¸ªå‚æ•°ï¼Œä¿è¯ä¸¤ä¸ªå‡½æ•°å‚æ•°ç›¸åŒï¼›éœ€è¦æ³¨æ„å­ç±»çš„å¼•ç”¨æ²¡åŠæ³•èµ‹å€¼çˆ¶ç±»çš„å¯¹è±¡ã€‚åªæœ‰çˆ¶ç±»çš„å¼•ç”¨æ‰èƒ½èµ‹å€¼å­ç±»å¯¹è±¡ã€‚ï¼ˆæƒé™åªèƒ½ç¼©å°ä¸èƒ½æ‰©å¤§ï¼‰\nvirtual A* f()virtual A &amp;func_a(A &amp;a, B &amp;b)virtual B* f()virtual B &amp;func_a(A &amp;a, B &amp;b)~B()~A()\n\nä¸‹é¢çš„è¿™ç§æƒ…å†µå°±æ˜¯ä¸å…è®¸çš„ï¼ä¸¤ä¸ªå‡½æ•°çš„å‚æ•°ä¸åŒï¼Œè™½ç„¶æ»¡è¶³åå˜çš„æ¡ä»¶ï¼Œä½†ä¸æ»¡è¶³è™šå‡½æ•°é‡å†™çš„è§„å®šï¼›å¯ä»¥çœ‹åˆ°è¿è¡Œåï¼Œä¸¤æ¬¡è°ƒç”¨éƒ½æ˜¯çˆ¶ç±»çš„func_aå‡½æ•°ï¼›\n\n2.1.5 é‡å†™ä¸å¸¦virtualå­ç±»é‡å†™è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä¸å¸¦virtualå…³é”®å­—ã€‚å³ä¾¿ä¸å¸¦ï¼Œä¾æ—§ä¿æœ‰è™šå‡½æ•°ç‰¹æ€§ï¼Œå¯ä»¥è¢«äºŒæ¬¡é‡å†™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ—¶å€™ï¼Œå…ˆç»§æ‰¿äº†è™šå‡½æ•°çš„å£°æ˜ï¼ˆç›¸å½“äºä»çˆ¶ç±»ä¸­ç»§æ‰¿äº†virtualå…³é”®å­—ï¼‰\n\nè®°ä½è¿™ç‚¹ï¼Œåé¢è¦è€ƒ\n\nè™½ç„¶è¿™ä¸ªå…³é”®å­—å¯ä»¥è¢«çœç•¥ï¼Œä½†ä¸å»ºè®®ä½ çœç•¥å®ƒã€‚è¿™ä¸ªå…³é”®å­—èƒ½å‘Šè¯‰å…¶ä»–å¼€å‘è€…ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªé‡å†™äº†çˆ¶ç±»çš„è™šå‡½æ•°ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå³å°†è¢«é‡å†™çš„è™šå‡½æ•°ï¼‰ã€‚ç›¸å½“äºä¸€ä¸ªæç¤ºã€‚\nclass Person&#123;public:    virtual A *f()    &#123;        cout &lt;&lt; &quot;virtual A* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;    virtual A &amp;func_a(A &amp;a, B &amp;b)    &#123;        cout &lt;&lt; &quot;virtual A &amp;func_a(A &amp;a, B &amp;b)&quot; &lt;&lt; endl;        return a;    &#125;&#125;;class Stu : public Person&#123;public:    B *f()//å¯ä»¥çœç•¥virtualå…³é”®å­—    &#123;        cout &lt;&lt; &quot;virtual B* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;    virtual B &amp;func_a(A &amp;a, B &amp;b)    &#123;        cout &lt;&lt; &quot;virtual B &amp;func_a(A &amp;a, B &amp;b)&quot; &lt;&lt; endl;        return b;    &#125;&#125;;class XiaoMing : public Stu&#123;public:    B* f()    &#123;        cout &lt;&lt; &quot;XiaoMing virtual B* f()&quot; &lt;&lt; endl;        return nullptr;    &#125;&#125;;int main()&#123;    Stu s;    Person p;    XiaoMing xiao;    B test_b;    Person *ptr = &amp;p;    ptr-&gt;f();    ptr-&gt;func_a(test_b, test_b);    ptr = &amp;s;    ptr-&gt;f();    ptr-&gt;func_a(test_b, test_b);    ptr = &amp;xiao;    ptr-&gt;f();    return 0;&#125;\n\nè¾“å…¥ç»“æœå¦‚ä¸‹\nvirtual A* f()virtual A &amp;func_a(A &amp;a, B &amp;b)virtual B* f()virtual B &amp;func_a(A &amp;a, B &amp;b)XiaoMing virtual B* f()~B()~A()\n\næˆªå›¾è¯´æ˜\n\nå‘äººçš„é—®é¢˜è¿™ä¸ªçŸ¥è¯†ç‚¹å°±å¯ä»¥å¼•ä¼¸å‡ºä¸€ä¸ªæ¯”è¾ƒå‘äººçš„é—®é¢˜äº†\nclass Dad&#123;public:    virtual void func(int a = 3)    &#123;        cout &lt;&lt; &quot;Dad -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    virtual void test()    &#123;        func();    &#125;&#125;;class Son:public Dad&#123;public:    virtual void func(int a = 1)    &#123;        cout &lt;&lt; &quot;Son -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;&#125;;int main()&#123;    Son* s = new Son();    s-&gt;test();    return 0;&#125;\n\nè¯·é—®å¦‚ä¸Šä»£ç çš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿå®ƒè°ƒç”¨çš„åˆ°åº•æ˜¯è°çš„funcå‡½æ•°å‘¢ï¼Ÿæ‰“å°çš„açš„å€¼åˆæ˜¯å¤šå°‘å‘¢ï¼Ÿ\nA   Dad -&gt; 3B   Dad -&gt; 1C   Son -&gt; 1D   Son -&gt; 3E   ç¼–è¯‘ä¸é€šè¿‡F   ä»¥ä¸Šéƒ½ä¸æ­£ç¡®\n\nç­”æ¡ˆæ­æ™“ï¼Œé€‰æ‹©çš„æ˜¯Dï¼Œè¾“å‡ºç»“æœæ˜¯Son -&gt; 3\n$ ./testSon -&gt; 3\n\nåˆšå¼€å§‹é‡åˆ°è¿™é“é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€è„¸è’™è”½ã€‚ç›´åˆ°çœ‹äº†é¢˜è§£æ‰çŸ¥é“è¿™é‡Œå¤šå‘äººã€‚\n\nå…¶ä¸­Eå’ŒFè‚¯å®šæ˜¯ä¸èƒ½é€‰çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¿™ä¸¤ä¸ªé€‰é¡¹éƒ½æ˜¯è¿‡æ¥è¿·æƒ‘ä½ çš„ã€‚\næ¯”å¦‚æœ‰äººå¯èƒ½ä¼šè§‰å¾—newäº†ä¹‹åæ²¡æœ‰deleteï¼Œæœ‰è¯­æ³•é”™è¯¯ï¼ä½†å®é™…ä¸Šä½ ä¸deleteç¼–è¯‘å™¨æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œè¦ä¸ç„¶ä¹Ÿä¸ä¼šå­˜åœ¨å› ä¸ºå¿˜è®°deleteè€Œå‡ºç°çš„å†…å­˜æ³„éœ²é—®é¢˜äº†ã€‚\n\nå›åˆ° 2.1.5å°ç‚¹ çš„å¼€å¤´ï¼Œ æåˆ°äº†å­ç±»ç»§æ‰¿çˆ¶ç±»å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå…ˆç»§æ‰¿çˆ¶ç±»å‡½æ•°çš„å£°æ˜ï¼›\nå¯¹äºæ™®é€šå‡½æ•°è€Œè¨€ï¼Œå£°æ˜æ— ä¼¤å¤§é›…ã€‚ä½†è¿™é‡Œï¼Œå­ç±»å’Œçˆ¶ç±»å‡½æ•°å£°æ˜ä¸­å‚æ•°açš„ç¼ºçœå€¼ä¸ç›¸åŒï¼\næœ€ç»ˆæˆ‘ä»¬é€šè¿‡å­ç±»å¯¹è±¡è°ƒç”¨test()å‡½æ•°çš„æ—¶å€™ï¼Œæ˜¯å°†å­ç±»å¯¹è±¡çš„æŒ‡é’ˆäº¤ç»™äº†çˆ¶ç±»å¯¹è±¡çš„æŒ‡é’ˆã€‚ä¸è¦å¿˜è®°äº†ï¼Œç±»ä¸­æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ªéšè—çš„thisæŒ‡é’ˆä¼ å‚ï¼\nå®é™…ä¸Šï¼Œtestå‡½æ•°çš„å£°æ˜åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªã€‚æˆ‘ä»¬ç”¨å­ç±»å¯¹è±¡æ‰ç”¨çš„æ—¶å€™ï¼Œä¼ å…¥çš„thisæŒ‡é’ˆæ˜¯å­ç±»å¯¹è±¡çš„æŒ‡é’ˆï¼Œè‡ªç„¶å°±å‡ºç°äº†å°†å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»æŒ‡é’ˆçš„æƒ…å†µã€‚\nvirtual void test(Dad* this) &#123;    this-&gt;func();&#125;\n\næ­¤æ—¶å°±æ»¡è¶³äº†è™šå‡½æ•°çš„ä¸¤ä¸ªæ¡ä»¶ï¼šçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼›å­ç±»é‡å†™äº†çˆ¶ç±»çš„è™šå‡½æ•°ã€‚\nè¿™æ—¶å€™è°ƒç”¨çš„func()å‡½æ•°ï¼Œè‡ªç„¶æ˜¯å­ç±»ä¸­è¢«é‡å†™äº†çš„func()å‡½æ•°ï¼Œä½†ç”±äºç»§æ‰¿äº†çˆ¶ç±»çš„å‡½æ•°å£°æ˜ï¼Œaçš„ç¼ºçœå€¼è¢«ä¿®æ”¹æˆäº†çˆ¶ç±»ä¸­func()å‡½æ•°çš„3ï¼Œæœ€ç»ˆå°±æ‰“å°å‡ºäº† Son -&gt; 3 çš„ç»“æœï¼›\nä¸ºäº†éªŒè¯è¿™ä¸ªç»“è®ºï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå­ç±»ä¸­funcå‡½æ•°çš„ç¼ºçœå€¼åˆ é™¤\nclass Dad&#123;public:    virtual void func(int a = 3)    &#123;        cout &lt;&lt; &quot;Dad -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    virtual void test()    &#123;        func();    &#125;&#125;;class Son:public Dad&#123;public:    virtual void func(int a)    &#123;        cout &lt;&lt; &quot;Son -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;&#125;;int main()&#123;    Son* s = new Son();    s-&gt;test();    return 0;&#125;\n\nç†è®ºä¸Šæ¥è¯´ï¼Œå­ç±»å‡½æ•°é‡å†™äº†çˆ¶ç±»çš„funcï¼Œæ­¤æ—¶è¿™ä¸ªå‡½æ•°æ²¡æœ‰ç¼ºçœå€¼ï¼Œè°ƒç”¨ä¸€ä¸ªæ²¡æœ‰ä¼ å‚çš„func()å‡½æ•°åº”è¯¥æ˜¯ä¼šæŠ¥é”™çš„ã€‚\nä½†ç”±äºå…¶ç»§æ‰¿äº†çˆ¶ç±»ä¸­çš„å‡½æ•°å£°æ˜ï¼Œå¹¶æ²¡æœ‰æŠ¥é”™ï¼Œç¼–è¯‘é€šè¿‡äº†ï¼Œè¾“å‡ºçš„ç»“æœä¸å˜\n$ g++ test.cpp -o test$ ./testSon -&gt; 3\n\n\næ‰€ä»¥å•Šï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œè™šå‡½æ•°è¯·ä¸è¦è®¾è®¡ç¼ºçœå€¼ï¼\n\nè¿˜æ˜¯ä¸Šé¢é‚£é“é¢˜ï¼Œå¦‚æœæ˜¯ç›´æ¥è°ƒç”¨funcï¼Œåº”è¯¥è¾“å‡ºä»€ä¹ˆï¼Ÿ\nclass Dad&#123;public:    virtual void func(int a = 3)    &#123;        cout &lt;&lt; &quot;Dad -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    virtual void test()    &#123;        func();    &#125;&#125;;class Son:public Dad&#123;public:    virtual void func(int a = 1)    &#123;        cout &lt;&lt; &quot;Son -&gt; &quot; &lt;&lt; a &lt;&lt; endl;    &#125;&#125;;int main()&#123;    Son* s = new Son();    s-&gt;func();    return 0;&#125;\n\nè¿™æ—¶å€™å°±å’Œä»€ä¹ˆç»§æ‰¿çˆ¶ç±»å‡½æ•°å£°æ˜æ²¡æœ‰å…³ç³»äº†ï¼Œç›´æ¥è°ƒç”¨çš„å°±æ˜¯å­ç±»è‡ªå·±é‡å†™äº†çš„å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°è°ƒç”¨\n$ ./testSon -&gt; 1\n\nå¤šæ€å¿…é¡»è¦çˆ¶ç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨æŒ‡å‘å­ç±»çš„æ—¶å€™æ‰èƒ½è§¦å‘ï¼\nint main()&#123;    Son* s = new Son();    s-&gt;func();//æ™®é€šè°ƒç”¨    // è¿™ä¸ªæ‰æ˜¯å¤šæ€è°ƒç”¨    Dad* dd = s;    dd-&gt;func();    return 0;&#125;\n\n$ ./testSon -&gt; 1Son -&gt; 3\n\n2.2 C++11 overrideå’ŒfinalC++11ä¸­æ–°å¢äº†overrideå’Œfinalè¿™ä¸¤ä¸ªå…³é”®å­—\n2.2.1 finalfinalç”¨äºç±»å†…æˆå‘˜å‡½æ•°ä¹‹åï¼Œä½œç”¨æ˜¯è®©è¿™ä¸ªè™šå‡½æ•°æ— æ³•è¢«é‡å†™\nvirtual void Func1() final&#123;&#125;\n\n\nè¿™ä¸ªå…³é”®å­—çš„ç¬¬äºŒä¸ªåšç”¨ï¼Œä¿®é¥°ç±»ï¼Œè¢«ä¿®é¥°åçš„ç±»æ— æ³•è¢«ç»§æ‰¿\n// C++11ç›´æ¥ç”¨å…³é”®å­—finalä¿®é¥°ï¼ŒBç±»å°±ä¸èƒ½è¢«ç»§æ‰¿äº†class B final&#123;\t//...&#125;;\n\n\n2.2.2 overrideè¯¥å…³é”®å­—ç”¨äºå­ç±»ä¸­ï¼Œä¹Ÿæ˜¯ä¸¢åœ¨å‡½æ•°åï¼Œç”¨äºéªŒè¯æ˜¯å¦å®Œæˆé‡å†™\nclass A&#123;public:    virtual void test1()&#123;&#125;&#125;;class B :public A&#123;public:    void test1() &#123;&#125;    void test2() override &#123;&#125;&#125;;\n\næ¯”å¦‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒåŸºç±»ä¸­å¹¶æ²¡æœ‰test2å­˜åœ¨ï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨test2ååŠ ä¸Šäº†overrideï¼Œç¼–è¯‘å™¨å°±ä¼šè¿›è¡Œæ£€æŸ¥å¹¶æŠ¥é”™ã€‚å› ä¸ºtest2å¹¶ä¸æ˜¯ä¸€ä¸ªå¯¹åŸºç±»ä¸­å‡½æ•°çš„é‡å†™\n\nå°†overrideæ·»åŠ åˆ°test1å‡½æ•°ä¹‹åï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚\nclass A&#123;public:    virtual void test1()&#123;&#125;&#125;;class B :public A&#123;public:    void test1() override  &#123;&#125;    void test2()  &#123;&#125;&#125;;\n\nä½†å¦‚æœå°†åŸºç±»Açš„test1çš„è™šå‡½æ•°virtualå±æ€§å»æ‰ï¼Œåˆ™åˆä¼šæŠ¥é”™ï¼›\n\nå¦‚æœåŸºç±»å’Œå­ç±»ä¸¤ä¸ªåŒåå‡½æ•°çš„å‚æ•°ä¸ç›¸åŒï¼Œä¸æ„æˆé‡å†™ï¼Œä¹Ÿä¼šæŠ¥é”™\n\nè¿™ä¸ªå…³é”®å­—å°±å¯ä»¥ç”¨äºåœ¨å¤šæ€ç±»è®¾è®¡ä¸­ï¼Œæ¯”å¦‚æ‰€æœ‰å­ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªbuyçš„å‡½æ•°é‡å†™ï¼Œé‚£å°±å¯ä»¥åœ¨buyå‡½æ•°åæ·»åŠ ä¸€ä¸ªoverrideï¼Œæ¥æ£€æŸ¥æˆ‘çš„é‡å†™æ˜¯å¦å®Œæˆï¼Œå‚æ•°æ˜¯å¦ä¸åŸºç±»ä¸­è¯¥å‡½æ•°çš„å‚æ•°ç›¸åŒï¼Œä»¥åŠå‡½æ•°åæ˜¯å¦æ­£ç¡®ã€‚\n2.3 é‡è½½ã€è¦†ç›–ï¼ˆé‡å†™ï¼‰ã€éšè—ï¼ˆé‡å®šä¹‰ï¼‰çš„å¯¹æ¯”å¸¸è€ƒï¼Œè¦ç†è§£å¹¶è®°å¿†\n\n3.æŠ½è±¡ç±»åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å°±æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡\n3.1 çº¯è™šå‡½æ•°åœ¨è™šå‡½æ•°çš„åŸºç¡€ä¸Šï¼ŒC++å®šä¹‰äº†çº¯è™šå‡½æ•°ï¼šæœ‰äº›æ—¶å€™ï¼Œåœ¨åŸºç±»é‡Œé¢å®šä¹‰æŸä¸€ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œå…·ä½“çš„å®ç°è®©æ´¾ç”Ÿç±»å»åŒåè¦†å†™ã€‚\nçº¯è™šå‡½æ•°çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹\n//virtual å‡½æ•°è¿”å›ç±»å‹ å‡½æ•°å()=0;virtual void Print()=0;\n\næ´¾ç”Ÿç±»ä¸­ï¼Œå¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™è¯¥ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nclass A &#123;public:\t//virtual void Print();//è™šå‡½æ•°\tvirtual void Print() = 0;//çº¯è™šå‡½æ•°&#125;;class B :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;B print &quot; &lt;&lt; endl;\t&#125;&#125;;class C :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;C print &quot; &lt;&lt; endl;\t&#125;&#125;;\n\nå½“æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»ä¸­è¦†å†™äº†è¯¥å‡½æ•°åï¼Œå³å¯å®ä¾‹åŒ–å¯¹è±¡å¹¶è°ƒç”¨è¯¥å‡½æ•°\n\nå’Œè™šå‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ¥æ”¶æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå³å¯è°ƒç”¨å¯¹åº”çš„å‡½æ•°\n\nçº¯è™šå‡½æ•°å†…éƒ¨æ˜¯å¯ä»¥å†™å‡½æ•°å®ç°çš„ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚å› ä¸ºçº¯è™šå‡½æ•°å¿…é¡»è¦è¢«å­ç±»é‡å†™ï¼Œè¿™ä¸ªçº¯è™šå‡½æ•°æœ¬èº«æ˜¯ä¸èƒ½è¢«è°ƒç”¨çš„ã€‚\n3.2 æŠ½è±¡ç±»åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å°±æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š\n\næŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\næŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œä¸ç„¶æ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nå¦‚æœåœ¨åŸºç±»ä¸­å®šä¹‰çš„çº¯è™šå‡½æ•°æ˜¯constä¿®é¥°çš„ï¼Œåˆ™æ´¾ç”Ÿç±»ä¸­å¯¹åº”çš„å‡½æ•°ä¹Ÿéœ€è¦ç”¨constä¿®é¥°\n\n\nå¦‚æœæˆ‘ä»¬åœ¨å­ç±»é‡Œé¢ä¿®æ”¹äº†å‡½æ•°çš„å‚æ•°ï¼Œé‚£å°±ä¸æ„æˆé‡å†™ï¼›æ­¤æ—¶å­ç±»Bä¹Ÿæ˜¯æŠ½è±¡ç±»ï¼Œæ— æ³•è¢«å®ä¾‹åŒ–å¯¹è±¡äº†\nclass A &#123;public:\t//virtual void Print();//è™šå‡½æ•°\tvirtual void Print() = 0;//çº¯è™šå‡½æ•°&#125;;class B :public A &#123;public:\tvoid Print(int a) &#123; // æ–°å¢äº†ä¸€ä¸ªå‚æ•°\t\tcout &lt;&lt; &quot;B print &quot; &lt;&lt; endl;\t&#125;&#125;;\n\n4.å®ç°ç»§æ‰¿å’Œæ¥å£ç»§æ‰¿æ™®é€šå‡½æ•°çš„è¿›ç¨‹æ˜¯ä¸€ç§å®ç°ç»§æ‰¿ï¼Œæ´¾ç”Ÿç±»ç»§æ‰¿äº†åŸºç±»çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚æ­¤æ—¶ç»§æ‰¿çš„å°±æ˜¯å‡½æ•°çš„å®ç°ï¼›\nå¤šæ€ä¸­çš„è™šå‡½æ•°æ˜¯ä¸€ç§æ¥å£ç»§æ‰¿ï¼Œå­ç±»ç»§æ‰¿çš„æ˜¯çˆ¶ç±»ä¸­è™šå‡½æ•°çš„æ¥å£ï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨å­ç±»ä¸­è¿›è¡Œé‡å†™ï¼Œä»¥è¾¾æˆå¤šæ€çš„ç›®çš„ã€‚æ­¤æ—¶ç»§æ‰¿çš„æ˜¯å‡½æ•°çš„æ¥å£ã€‚\næ‰€ä»¥ï¼Œå¦‚æœä¸æ˜¯ä¸ºäº†å¤šæ€ï¼Œé‚£å°±ä¸è¦æŠŠçˆ¶ç±»çš„å‡½æ•°å®šä¹‰æˆè™šå‡½æ•°ã€‚\n4.1 åŠ¨æ€ç»‘å®šå’Œé™æ€ç»‘å®š\né™æ€ç»‘å®šåˆç§°å‰æœŸç»‘å®šï¼ˆæ—©ç»‘å®šï¼‰ï¼Œåœ¨ç¨‹åºç¼–è¯‘æœŸé—´ç¡®å®šäº†ç¨‹åºçš„è¡Œä¸ºï¼Œä¹Ÿæˆä¸ºé™æ€å¤šæ€ï¼ˆå‡½æ•°é‡è½½ï¼‰\nåŠ¨æ€ç»‘å®šåˆç§°ä¸ºåæœŸç»‘å®šï¼ˆæ™šç»‘å®šï¼‰ï¼Œæ˜¯åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œæ ¹æ®å…·ä½“æ‹¿åˆ°çš„ç±»å‹æ¥å†³å®šç¨‹åºçš„è¡Œä¸ºï¼Œè°ƒç”¨å…·ä½“çš„å‡½æ•°ï¼Œåˆç§°ä¸ºåŠ¨æ€å¤šæ€ã€‚\n\n4.2 çˆ¶ç±»çš„æ„é€ å’Œææ„ä¸­è™šå‡½æ•°ä¸ç”Ÿæ•ˆè¯·è®°ä½ï¼Œåœ¨çˆ¶ç±»çš„æ„é€ å’Œææ„ä¸­ï¼Œå¦‚æœå‡ºç°è™šå‡½æ•°ï¼Œåˆ™åªä¼šè°ƒç”¨çˆ¶ç±»è‡ªå·±çš„å‡½æ•°å®ç°ï¼Œå­ç±»é’ˆå¯¹è¯¥è™šå‡½æ•°çš„é‡å†™ä¸ä¼šç”Ÿæ•ˆï¼\nå…·ä½“è¯·å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡å…³äºä¸€é“CPPé€‰æ‹©é¢˜ç›®çš„åšå®¢ã€ç‚¹æˆ‘ã€‘\n5.åŒ…å«è™šå‡½æ•°çš„ç±»çš„å¤§å°è¯·é—®ä¸‹é¢çš„ä»£ç ä¸­ï¼Œbå’Œdå¯¹è±¡çš„å¤§å°åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nclass Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func2()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func2()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _b = 1;&#125;;class Derive : public Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func1()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _d = 2;&#125;;int main()&#123;\tBase b;\tDerive d;\tcout &lt;&lt; &quot;b: &quot; &lt;&lt; sizeof(b) &lt;&lt; endl;\tcout &lt;&lt; &quot;d: &quot; &lt;&lt; sizeof(d) &lt;&lt; endl;\treturn 0;&#125;\n\nç»“æœå¦‚ä¸‹ï¼Œbçš„å¤§å°æ˜¯8ï¼Œdçš„å¤§å°æ˜¯12\n\nå½“æˆ‘ä»¬ä½¿ç”¨äº†virtualå…³é”®å­—ä¿®é¥°å‡½æ•°ä¹‹åï¼Œç±»ä¸­å°±ä¼šå‡ºç°ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œç®€ç§°è™šè¡¨ï¼ˆéœ€è¦å’Œè™šåŸºè¡¨åŒºåˆ†å¼€æ¥ï¼‰\n\n\nåæ–‡å°†è§£é‡Šè™šå‡½æ•°è¡¨çš„ä½œç”¨ï¼Œåªæœ‰è™šå‡½æ•°æ‰ä¼šå­˜åœ¨äºè™šè¡¨ä¸­\n\nè¿™ä¸ªè™šå‡½æ•°è¡¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆ_vfptrï¼ŒæŒ‡é’ˆçš„å¤§å°æ˜¯4/8å­—èŠ‚ï¼Œbç±»çš„å¤§å°ç”±è™šå‡½æ•°è¡¨æŒ‡é’ˆå’Œintç»„æˆï¼Œdç±»çš„å¤§å°ç”±è™šå‡½æ•°è¡¨æŒ‡é’ˆå’Œä¸¤ä¸ªintç»„æˆã€‚\n\nåœ¨32ä½ä¸‹ï¼Œè¿™ä¸¤ä¸ªç±»çš„å¤§å°åˆ†åˆ«æ˜¯8å’Œ12ï¼›\nåœ¨64ä½ä¸‹ï¼Œè¿™ä¸¤ä¸ªç±»çš„å¤§å°åˆ†åˆ«æ˜¯16å’Œ24ï¼ˆé™¤äº†æŒ‡é’ˆæ˜¯8å­—èŠ‚å¤–ï¼Œè¿˜éœ€è¦å†…å­˜å¯¹é½ï¼‰ï¼›\n\nå½“æˆ‘ä»¬æŠŠBaseç±»ä¸­çš„å‡½æ•°ä¿®æ”¹å›æ™®é€šå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°ç±»çš„å¤§å°åˆå˜æˆåªåŒ…å«ä¸€ä¸ªintçš„4å­—èŠ‚äº†ã€‚è€ŒDervieç±»ç”±äºä¾æ—§æœ‰virtualçš„å­˜åœ¨ï¼Œæ‰€ä»¥å¤§å°ä¸å˜ã€‚\n\n6.è™šå‡½æ•°è¡¨ï¼ˆè™šè¡¨ï¼‰ä»¥è¿™ä¸ªç±»ä¸ºç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è™šè¡¨çš„æ ·å­\nclass Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func2()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func2()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _b = 1;&#125;;class Derive : public Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func1()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _d = 2;&#125;;\n\nåœ¨å†…å­˜çª—å£ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå¯¹è±¡çš„åŸºæœ¬æ¨¡å—ã€‚å­ç±»å¯¹è±¡ä¸­ä¹Ÿå­˜åœ¨ä¸€ä¸ªè™šè¡¨ï¼Œè€Œä¸”å¯ä»¥å‘ç°ï¼Œçˆ¶å­ç±»çš„è™šè¡¨ä¸­ï¼Œåªæœ‰func1çš„å‡½æ•°åœ°å€æ˜¯ä¸åŒçš„ã€‚\n\nè¿™é‡Œçš„_vfptræ˜¯virtual func pointerçš„ç¼©å†™ï¼Œä¸­æ–‡åæ˜¯è™šå‡½æ•°è¡¨æŒ‡é’ˆï¼Œå¯ä»¥ç®€ç§°ä¸ºè™šè¡¨æŒ‡é’ˆ\n\nä¸€å®šè¦åŒºåˆ†è™šå‡½æ•°è¡¨ï¼ˆå¤šæ€ï¼‰å’Œè™šåŸºè¡¨ï¼ˆè±å½¢ç»§æ‰¿ï¼‰ï¼\n\n6.1 è™šå‡½æ•°é‡å†™å’Œè¦†ç›–çš„æ¦‚å¿µåŒºåˆ«è¿™é‡Œå°±éœ€è¦æåŠé‡å†™å’Œè¦†ç›–è¿™ä¸¤ä¸ªæ¦‚å¿µçš„åŒºåˆ«äº†\n\nè™šå‡½æ•°é‡å†™ï¼šè¯­æ³•å±‚çš„æ¦‚å¿µï¼ŒæŒ‡å­ç±»ä¸­é‡å†™çˆ¶ç±»ä¸­è™šå‡½æ•°çš„å‡½æ•°å®ç°\nè™šå‡½æ•°è¦†ç›–ï¼šåŸç†å±‚çš„æ¦‚å¿µï¼Œå­ç±»å¯¹è±¡çš„åºè¡¨ä¸­ï¼Œå­ç±»æ‹·è´äº†çˆ¶ç±»çš„è™šè¡¨ï¼Œé‡å†™åçš„å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆè¦†ç›–äº†åŸºç±»å¯¹åº”è™šå‡½æ•°çš„æŒ‡é’ˆ\n\nå¤šæ€çš„å®ç°ï¼Œå°±ä¾èµ–äºå­ç±»è™šè¡¨ä¸­å¯¹å‡½æ•°æŒ‡é’ˆçš„è¦†ç›–ï¼Œè¿è¡Œæ—¶ï¼Œå»æŒ‡å®šå¯¹è±¡çš„è™šè¡¨ä¸­ï¼Œè°ƒç”¨å¯¹åº”çš„å‡½æ•°æŒ‡é’ˆã€‚è¿™æ˜¯ä¸€ç§è¿è¡Œæ—¶å†³è®®è°ƒç”¨æ–¹æ³•çš„æ“ä½œï¼›\nåœ¨VSçš„è°ƒè¯•çª—å£ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„çˆ¶ç±»Baseå¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡çš„å®ç°åŸç†ã€‚æ­¤æ—¶çˆ¶ç±»çš„æŒ‡é’ˆæ˜¯å®Œå…¨æ²¡æœ‰åŠæ³•çŸ¥é“è‡ªå·±æŒ‡å‘çš„æ˜¯çˆ¶ç±»å¯¹è±¡ï¼Œè¿˜æ˜¯æŸä¸ªå­ç±»å¯¹è±¡ï¼›\nè™šå‡½æ•°è¡¨çš„å­˜åœ¨ï¼Œå¸®æˆ‘ä»¬å®ç°äº†é€šè¿‡ç›¸åŒçš„å‡½æ•°è°ƒç”¨æ–¹æ³•ï¼Œå®é™…å´è§¦å‘äº†ä¸åŒå‡½æ•°çš„æµç¨‹çš„æ“ä½œã€‚\n6.1.1 è¿è¡Œæ—¶å†³è®®å’Œç¼–è¯‘æ—¶å†³è®®\nå¤šæ€è°ƒç”¨ï¼Œè¿è¡Œæ—¶å†³è®®ï¼šè¿è¡Œåˆ°è¿™é‡Œæ—¶ç¡®å®šè°ƒç”¨å‡½æ•°çš„åœ°å€\næ™®é€šè°ƒç”¨ï¼Œç¼–è¯‘æ—¶å†³è®®ï¼šåœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šè°ƒç”¨çš„å‡½æ•°çš„åœ°å€\nå› ä¸ºå­˜åœ¨ä¸€å±‚é€šè¿‡è™šå‡½æ•°è¡¨çš„è·³è½¬ï¼Œæ‰€ä»¥å¤šæ€è°ƒç”¨ä¼šæ¯”æ™®é€šè°ƒç”¨çš„é€Ÿåº¦æ…¢ä¸€äº›ã€‚\n\nä¾æ—§æ˜¯ä¸Šæ–¹çš„ä¸¤ä¸ªç±»ï¼Œåœ¨åŸºç±»å’Œå­ç±»ä¸­åŒæ—¶å­˜åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°Func3()ï¼Œæ­¤æ—¶é€šè¿‡çˆ¶ç±»æŒ‡é’ˆå»è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°äºŒè€…è°ƒç”¨çš„éƒ½æ˜¯çˆ¶ç±»çš„Func3ã€‚\n\nè¿™æ­£æ˜¯å› ä¸ºéè™šå‡½æ•°æ˜¯æ²¡æœ‰è¿›å…¥è™šå‡½æ•°è¡¨ï¼Œæ­¤æ—¶å¯¹Func3çš„è°ƒç”¨å°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼›æ­¤æ—¶Func3å‡½æ•°çš„åœ°å€åœ¨ç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±å·²ç»è¢«ç¡®å®šä¸ºäº†åŸºç±»ä¸­çš„å‡½æ•°åœ°å€ã€‚\nè€ŒFunc1å› ä¸ºæ˜¯è™šå‡½æ•°ï¼Œå­˜åœ¨äºè™šå‡½æ•°è¡¨ä¸­ï¼Œæ‰€ä»¥æ˜¯é€šè¿‡è¿è¡Œæ—¶æŸ¥è¯¢è¿™ä¸ªè™šå‡½æ•°è¡¨ï¼Œæ¥æ‰¾åˆ°çˆ¶å­ç±»ä¸åŒçš„å‡½æ•°åœ°å€ï¼Œæœ€ç»ˆå®ç°å¤šæ€è°ƒç”¨ã€‚\n6.1.2 çœ‹çœ‹æ±‡ç¼–ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºFunc1çš„è°ƒç”¨ï¼Œæœ€ç»ˆæ˜¯ä»è™šå‡½æ•°è¡¨ä¸­æå–å‡ºæ¥çš„åœ°å€ï¼Œcall eaxå¯„å­˜å™¨ä¸­çš„åœ°å€ï¼Œè¿™ä¾¿ä½“ç°äº†è¿è¡Œæ—¶å†³è®®ï¼›\nè€Œå¯¹Func3çš„è°ƒç”¨ï¼Œæ˜¯ç¼–è¯‘æ—¶å†³è®®ï¼Œç›´æ¥å·²ç»ç¡®å®šäº†çš„åŸºç±»ä¸­è¯¥å‡½æ•°çš„åœ°å€ï¼Œç›´æ¥call 09511CChè¿™ä¸ªå‡½æ•°åœ°å€æ¥è°ƒç”¨å‡½æ•°äº†ã€‚\n\nå¯¹äºæŒ‡å‘åŸºç±»å¯¹è±¡çš„è°ƒç”¨ä¹Ÿæ˜¯è¿™æ ·\n\nè¿™é‡Œå°±èƒ½å¾ˆç›´è§‚çš„çœ‹åˆ°ï¼Œå¤šæ€ä¸­è™šå‡½æ•°è¡¨ï¼Œè®©çˆ¶ç±»æŒ‡é’ˆä¸ç®¡æ˜¯æŒ‡å‘å­ç±»å¯¹è±¡ã€è¿˜æ˜¯æŒ‡å‘çˆ¶ç±»å¯¹è±¡ï¼Œéƒ½èƒ½é€šè¿‡ç›¸åŒçš„æ±‡ç¼–æŒ‡ä»¤æ¥è°ƒç”¨æ­£ç¡®çš„å‡½æ•°ã€‚\n6.2 å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»ä¸ºä½•æ— æ³•å®ç°å¤šæ€ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç»§æ‰¿äº†ä¹‹åï¼Œå¦‚æœæŠŠå­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»ï¼Œåˆ™ä¼šäº§ç”Ÿåˆ‡ç‰‡ã€‚æ­¤æ—¶æ— æ³•æ„æˆå¤šæ€ã€‚\nè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\nå› ä¸ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œå°±å·²ç»ç¡®å®šäº†è¿™äº›å‡½æ•°çš„åœ°å€ã€‚\n\nç¼–è¯‘å™¨æ£€æŸ¥æ˜¯å¦ç¬¦åˆå¤šæ€çš„è¯­æ³•\nä¸ç¬¦åˆå¤šæ€çš„è¯­æ³•ï¼Œåˆ™ç›´æ¥ç¡®å®šå¯¹ç±»å‡½æ•°è°ƒç”¨çš„æˆå‘˜å‡½æ•°åœ°å€\nç¬¦åˆå¤šæ€çš„è¯­æ³•ï¼Œé‚£å°±ç¼–è¯‘å‡ºè¿è¡Œæ—¶å†³è®®çš„æ±‡ç¼–è¯­å¥\n\næ­¤æ—¶åœ°å€å°±å·²ç»ç¡®å®šäº†ï¼Œæ ¹æœ¬ä¸å­˜åœ¨ä»è™šå‡½æ•°è¡¨ä¸­æ‰¾å‡½æ•°åœ°å€çš„æ­¥éª¤ï¼Œè‡ªç„¶å°±ä¸èƒ½å®ç°å¤šæ€è°ƒç”¨äº†ã€‚\n\nè¿™æ—¶å€™å¯èƒ½æœ‰äº›äººå°±ä¼šæœ‰ä¸ªä¸æˆç†Ÿçš„æƒ³æ³•ï¼šå¦‚æœå°†å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡ï¼Œåˆ‡ç‰‡çš„æ—¶å€™æŠŠå­ç±»å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆä¹Ÿå¤åˆ¶åˆ°çˆ¶ç±»ä¸­ï¼Œé‚£ä¸å°±èƒ½å®ç°å¤šæ€äº†å—ï¼Ÿ\nä¸è¡Œï¼\nDerive dd;Base bb = dd; // å­ç±»å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»Base* ptr1 = &amp;bb; // çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘çˆ¶ç±»å¯¹è±¡Base* ptr2 = &amp;dd; // çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡// å¼•ç”¨æœ¬è´¨ä¹Ÿæ˜¯æŒ‡é’ˆï¼Œè¿™é‡Œå°±ä¸å†™äº†\n\nä»¥ä¸Šé¢çš„ä»£ç ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬æŠŠä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»çš„æŒ‡é’ˆæ—¶ï¼Œç¨‹åºè¿è¡Œçš„æ—¶å€™å¹¶ä¸çŸ¥é“ï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„åˆ°åº•æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»å¯¹è±¡ã€‚\nå‡è®¾æˆ‘ä»¬åœ¨åˆ‡ç‰‡çš„æ—¶å€™ï¼Œå°†å­ç±»å¯¹è±¡ddçš„è™šè¡¨æŒ‡é’ˆä¹Ÿæ‹·è´å¤åˆ¶ç»™çˆ¶ç±»äº†ï¼Œé‚£å°±ä¼šå‡ºç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šptr1åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨çš„ä¹Ÿæ˜¯å­ç±»çš„å‡½æ•°ï¼\nè¿™ä¸å°±ä¹±å¥—äº†å—ï¼Ÿï¼\nç†è®ºä¸Šbbæ˜¯ä¸€ä¸ªçˆ¶ç±»å¯¹è±¡ï¼Œèµ‹å€¼ç»™Base*æŒ‡é’ˆåï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°çš„é¢„æœŸæ˜¯è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ã€‚ä½†ç”±äºbbå¯¹è±¡æ˜¯ä»å­ç±»å¯¹è±¡åˆ‡ç‰‡è€Œæ¥çš„ï¼Œæ‹·è´äº†å­ç±»çš„è™šè¡¨æŒ‡é’ˆï¼Œæ­¤æ—¶æ‰¾åˆ°çš„ä¹Ÿæ˜¯å­ç±»çš„å‡½æ•°åœ°å€ï¼Œä¸ç¬¦åˆé¢„æœŸåœ°è°ƒç”¨äº†å­ç±»é‡å†™åçš„è™šå‡½æ•°ï¼\næ‰€ä»¥ï¼ä¸ºäº†é¿å…è¿™ç§ä¸ç¬¦åˆè¯­æ³•é¢„æœŸçš„é—®é¢˜ï¼Œåœ¨åˆ‡ç‰‡çš„æ—¶å€™ï¼Œåªä¼šå°†å­ç±»å¯¹è±¡ä¸­çš„æˆå‘˜å˜é‡æ‹·è´ç»™çˆ¶ç±»ï¼Œå¹¶ä¸ä¼šæ‹·è´è™šè¡¨æŒ‡é’ˆï¼åˆ‡ç‰‡ç”Ÿæˆçš„çˆ¶ç±»å¯¹è±¡ï¼Œè™šè¡¨æŒ‡é’ˆä¾æ—§æ˜¯çˆ¶ç±»è‡ªå·±çš„è™šè¡¨æŒ‡é’ˆï¼\nä¸‹å›¾ä¸­å¯è§ï¼Œb3æ˜¯åˆ‡ç‰‡è€Œæ¥çš„çˆ¶ç±»å¯¹è±¡ï¼Œå…¶è™šè¡¨æŒ‡é’ˆä»¥åŠè™šè¡¨ä¸­çš„å‡½æ•°åœ°å€å’ŒBase b1å®Œå…¨ç›¸åŒã€‚ä¸€ä¸ªç±»çš„è™šè¡¨å…¶å®åªæœ‰ä¸€å¼ ã€‚\n\næ‰€ä»¥ï¼Œå¯¹è±¡å¹¶ä¸èƒ½å®ç°å¤šæ€ã€‚å³ä¾¿ç†è®ºä¸Šå¯è¡Œï¼Œä½†ä¾æ—§ä¸èƒ½è¿™ä¹ˆåšï¼\n6.3 å­ç±»ä¸­æ–°å¢è™šå‡½æ•°ï¼Œä½†ç›‘è§†çª—ä¸æ˜¾ç¤º6.3.1 å®åœ°æ¢ç´¢class Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func2()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func2()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _b = 1;&#125;;class Derive : public Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func1()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func3()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func4()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func4()&quot; &lt;&lt; endl;\t&#125;private:\tint _d = 2;&#125;;\n\nå½“æˆ‘ä»¬åœ¨å­ç±»ä¸­æ–°å¢äº†ä¸€ä¸ªè™šå‡½æ•°Func4ä¹‹åï¼Œå†æ¬¡æ‰“å¼€ç›‘è§†ï¼Œä¼šå‘ç°å­ç±»çš„è™šè¡¨ä¸­ä¾æ—§åªæœ‰ä¸¤ä¸ªå‡½æ•°æŒ‡é’ˆã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿéš¾é“è¯´å­ç±»æ²¡æœ‰è¢«å¦å¤–ä¸€ä¸ªç±»ç»§æ‰¿ï¼Œå®ƒçš„è™šå‡½æ•°å°±ä¸ä¼šè¿›è¿™é‡Œçš„è™šè¡¨å—ï¼Ÿ\n\né€šè¿‡å†…å­˜çª—å£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„å‡ºç°äº†ä¸¤ä¸ªç›‘è§†çª—å£ä¸­å·²æœ‰çš„å‡½æ•°åœ°å€ï¼Œä½†åé¢è¿˜æœ‰ä¸€ä¸ªå’Œå‰é¢ä¸¤ä¸ªå¾ˆæ¥è¿‘ï¼Œä½†åœ¨ç›‘è§†çª—å£ä¸­æ²¡æœ‰å‡ºç°çš„åœ°å€ã€‚è€Œåœ¨è¿™ä¸ªåœ°å€ä¹‹åæ˜¯ä¸€è¡Œå…¨0ï¼ˆå³nullptrï¼‰\n\nä»¥nullptråšç»“å°¾ä½œä¸ºforå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè™šå‡½æ•°è¡¨ä¸­å‡½æ•°çš„åœ°å€éƒ½æ‰“å°å‡ºæ¥\n//é‡å®šä¹‰å‡½æ•°æŒ‡é’ˆï¼Œéœ€è¦å°†æ–°çš„åå­—æ”¾åœ¨æ‹¬å·ä¸­é—´typedef void(*V_FUNC)();void PrintVfptrTable(V_FUNC* arr)&#123;\tfor (int i = 0; arr[i] != nullptr; i++)\t&#123;\t\tprintf(&quot;[%d] %p\\n&quot;, i, arr[i]);\t&#125;&#125;int main()&#123;\tBase b1;\tDerive d;    // å› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œåœ¨VSä¸­ï¼Œè™šå‡½æ•°è¡¨çš„æŒ‡é’ˆå°±æ˜¯å¯¹è±¡çš„å‰4ä¸ªå­—èŠ‚\t// è¿™é‡Œæ˜¯å…ˆå°†å¯¹è±¡çš„æŒ‡é’ˆå¼ºè½¬ä¸ºint*ï¼Œå–å‡ºå‰4ä¸ªå­—èŠ‚çš„åœ°å€\t// å†å°†è¿™ä¸ªåœ°å€è§£å¼•ç”¨ï¼Œç›¸å½“äºå°†åœ°å€è½¬æˆintæ•°å­—\t// æœ€åå†å°†è¿™ä¸ªæ•°å­—é‡æ–°å¼ºè½¬ä¸ºV_FUNC*å‡½æ•°æŒ‡é’ˆæ•°ç»„çš„æŒ‡é’ˆï¼Œä¼ ç»™æˆ‘ä»¬çš„æ‰“å°å‡½æ•°\tPrintVfptrTable((V_FUNC*)(*((int*)&amp;d)));&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œ å¯ä»¥çœ‹åˆ°æˆåŠŸæ‰“å°å‡ºäº†3ä¸ªå‡½æ•°çš„åœ°å€ï¼Œå’Œå†…å­˜çª—å£ä¸­çœ‹åˆ°çš„æ•°æ®ä¸€è‡´\n\ntypedef void(*V_FUNC)();void PrintVfptrTable(V_FUNC* arr)&#123;\tfor (int i = 0; arr[i] != nullptr; i++)\t&#123;\t\tprintf(&quot;[%d] %p -&gt; &quot;, i, arr[i]);\t\tV_FUNC f = arr[i];\t\tf();\t&#125;&#125;\n\næ—¢ç„¶æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œæœ€ç»ˆæˆ‘ä»¬æ˜¯å¯ä»¥é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨å‡½æ•°çš„ã€‚æ·»åŠ äº†å‡½æ•°è°ƒç”¨éƒ¨åˆ†çš„ä»£ç åï¼Œå†è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æœ€åä¸€ä¸ªå‡½æ•°çš„ç¡®æ˜¯å­ç±»ä¸­æ–°å¢çš„è™šå‡½æ•°Func4\n\næ‰€ä»¥ï¼ŒVSçš„ç›‘è§†çª—å£ä¸­ä¸æ˜¾ç¤ºFunc4æ˜¯å› ä¸ºVSè®¤ä¸ºè¿™ä¸ªå‡½æ•°æ²¡æœ‰è¢«å­ç±»é‡å†™ï¼Œæ— å…³ç—›ç—’ï¼Œäºæ˜¯åœ¨ç›‘è§†çª—å£ä¸­éšè—äº†ã€‚\nå®é™…ä¸Šï¼Œåªè¦æ˜¯è™šå‡½æ•°ï¼Œé‚£å°±æ˜¯ä¼šè¿›å…¥åˆ°è¿™ä¸ªç±»ä¸­çš„è™šå‡½æ•°è¡¨é‡Œé¢çš„ï¼\nè®°ä½ï¼Œåªè¦æ˜¯è™šå‡½æ•°å°±ä¸€å®šä¼šè¿›è™šè¡¨ï¼\n6.3.2 ä¸ºä»€ä¹ˆä¸æ–°å¢ä¸€ä¸ªå­ç±»çš„è™šè¡¨ï¼Ÿè¿™é‡Œæˆ‘è¿˜æ€è€ƒè¿‡å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶è¿™ä¸ªæ˜¯å­ç±»è‡ªå·±çš„è™šå‡½æ•°ï¼Œé‚£ä¸ºä»€ä¹ˆæ²¡æœ‰å¤šå¼€ä¸€ä¸ªè™šè¡¨æ¥å­˜æ”¾è¿™ä¸ªå‡½æ•°çš„æŒ‡é’ˆï¼Œè€Œæ˜¯ç›´æ¥æ”¾å…¥åˆ°äº†ç»§æ‰¿è‡ªåŸºç±»çš„è™šå‡½æ•°è¡¨ä¸­å‘¢ï¼Ÿ\nä¸‹å›¾æ˜¯Deriveåœ¨VS2019çš„å†…å­˜åˆ†å¸ƒæ¨¡å‹â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|  _vfptr  | Base|  int _b  | Base|  int _d  | Deriveâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å‡è®¾è¦æ–°å¢ä¸€ä¸ªæŒ‡é’ˆï¼Œé‚£æŒ‰VSçš„è§„åˆ™ï¼Œä¹Ÿæ˜¯åº”è¯¥æ”¾åœ¨å¯¹è±¡çš„æœ€å‰é¢ï¼›æ­¤æ—¶æ¨¡å‹å°±å˜æˆäº†ä¸‹é¢è¿™æ ·â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”|  _vfptr  | Derive|  _vfptr  | Base|  int _b  | Base|  int _d  | Deriveâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æ–°å¢äº†ä¸€ä¸ªæŒ‡é’ˆçš„å†…å­˜å ç”¨ä¸è¯´ï¼Œè¿˜æŠŠåŸæœ¬æ³¾æ¸­åˆ†æ˜çš„å†…å­˜æ¨¡å‹ï¼Œå˜æˆäº†ä¸¤é¢åŒ…å¤¹èŠå£«ï¼›æ€ä¹ˆè¯´éƒ½æ˜¯è¿½åŠ åœ¨Baseçš„è™šè¡¨ä¹‹åæ›´åŠ é è°±ï¼Œå› ä¸ºåŸæœ¬ç»§æ‰¿è‡ªBaseçš„è™šè¡¨å°±æ˜¯å­ç±»å¯¹è±¡çš„å‰4ä¸ªå­—èŠ‚ï¼\n\nè¯´æ˜å‚è€ƒä»£ç å—ä¸­çš„æ³¨é‡Šã€‚\n6.4 è™šè¡¨çš„å­˜å‚¨ä½ç½®è™šè¡¨æ˜¯å­˜åœ¨å“ªé‡Œçš„ï¼Ÿå…ˆè¯´ç­”æ¡ˆï¼šè™šè¡¨æ˜¯å­˜åœ¨å¸¸é‡åŒºé‡Œé¢çš„\nä¸‹å›¾ä¸­çš„b1å’Œb3æ˜¯ä¸¤ä¸ªä¸åŒçš„Baseå¯¹è±¡ï¼Œä½†æˆ‘ä»¬ä¼šå‘ç°å®ƒä»¬çš„è™šè¡¨åœ°å€åŒ…æ‹¬å‡½æ•°æŒ‡é’ˆçš„åœ°å€éƒ½å®Œå…¨ç›¸åŒã€‚æ¯•ç«Ÿè¿™æ˜¯ä¸¤ä¸ªå®Œå…¨ç›¸åŒçš„ç±»ï¼Œè™šè¡¨é‡Œé¢çš„å†…å®¹ç¡®å®æ˜¯ç›¸åŒçš„ã€‚\nè¿™å°±å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œç›¸åŒçš„ç±»ï¼Œå…¶è™šè¡¨åœ¨å†…å­˜é‡Œé¢åªæœ‰ä¸€å¼ ã€‚åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°†è¿™ä¸ªç±»çš„è™šè¡¨æ‰¾åˆ°ï¼Œå¹¶æ’å…¥åˆ°ç±»ä¸­ã€‚\n\né‚£ä¹ˆè™šè¡¨æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„é‚£ä¸ªåŒºåŸŸé‡Œé¢çš„å‘¢ï¼Ÿ\né¦–å…ˆæ’é™¤æ ˆå’Œå †ï¼Œæ ˆæ˜¯éšæ—¶ç”¨éšæ—¶å¼€è¾Ÿçš„ï¼Œè€Œå †éœ€è¦åŠ¨æ€å†…å­˜ç®¡ç†ï¼Œå¯¹äºè¿™ç§ç¼–è¯‘å™¨è‡ªå·±å®Œæˆçš„æ“ä½œï¼Œä¹Ÿä¸åº”è¯¥æ˜¯è¿™æ ·ã€‚\nè€Œé™æ€åŒº/æ•°æ®æ®µæ”¾çš„æ˜¯å…¨å±€æ•°æ®æˆ–è€…é™æ€å˜é‡ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œå¸¸é‡åŒº/ä»£ç æ®µæ›´é è°±ã€‚\næœ‰äº†çŒœæƒ³ä¹‹åï¼Œå°±è¦æ¥éªŒè¯äº†ã€‚\næˆ‘ä»¬å°†å¸¸ç”¨çš„å­˜åœ¨ä¸åŒä½ç½®çš„æ•°æ®ç±»å‹éƒ½å¼„å‡ºæ¥ï¼Œåˆ†åˆ«æ‰“å°å®ƒä»¬çš„åœ°å€\nint c = 2;int main()&#123;\tBase b1;\tint a = 0;\tstatic int b = 1;\tconst char* str = &quot;hello world&quot;;\tint* p = new int[10];\tprintf(&quot;æ ˆï¼š%p\\n&quot;, &amp;a);\tprintf(&quot;é™æ€åŒº/æ•°æ®æ®µï¼š%p\\n&quot;, &amp;b);\tprintf(&quot;é™æ€åŒº/æ•°æ®æ®µï¼š%p\\n&quot;, &amp;c);\tprintf(&quot;å¸¸é‡åŒº/ä»£ç æ®µï¼š%p\\n&quot;, str);\tprintf(&quot;å †ï¼š%p\\n&quot;, p);\tprintf(&quot;è™šè¡¨ï¼š%p\\n&quot;, (*((int*)&amp;b1)));\tprintf(&quot;å‡½æ•°åœ°å€ï¼š%p\\n&quot;, &amp;Derive::Func3);\tprintf(&quot;å‡½æ•°åœ°å€ï¼š%p\\n&quot;, &amp;Derive::Func2);\tprintf(&quot;å‡½æ•°åœ°å€ï¼š%p\\n&quot;, &amp;Derive::Func1);\treturn 0;&#125;\n\nè¾“å‡ºç»“æœå¦‚ä¸‹\n\nè¿™æ—¶å€™å¯ä»¥å‘ç°ï¼Œè™šè¡¨çš„åœ°å€å’Œå¸¸é‡åŒº&#x2F;ä»£ç æ®µçš„åœ°å€å¼€å¤´ç›¸ä¼¼ï¼Œéƒ½æ˜¯00DF9Bï¼Œè¯´æ˜å®ƒæ›´åŠ é è¿‘ä»£ç æ®µçš„åŒºåŸŸã€‚\nè€Œè™šè¡¨çš„åœ°å€00DF9B34æ˜¯å°äºå¸¸é‡åŒº&#x2F;ä»£ç æ®µçš„00DF9B6Cçš„ï¼Œè¿™å°±è¡¨æ˜äº†åœ¨å†…å­˜ä¸­ï¼Œè™šè¡¨çš„åœ°å€æ¯”è¿™ä¸ªå¸¸é‡åŒºå‚æ•°çš„åœ°å€æ›´ä½ã€‚è€Œåœ¨å†…å­˜ä¸­ï¼Œä¸åŒåŒºåŸŸçš„åˆ†å¸ƒå¦‚ä¸‹ï¼Œå¸¸é‡åŒºå°±æ˜¯åœ¨æœ€ä½å¤„çš„ã€‚\næ ˆå †é™æ€åŒº/æ•°æ®æ®µå¸¸é‡åŒº/ä»£ç æ®µ\n\nå®é”¤äº†ï¼Œè™šè¡¨å°±æ˜¯å­˜åœ¨å¸¸é‡åŒºé‡Œé¢çš„ï¼ç±»çš„è™šå‡½æ•°è¡¨æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç»ç”Ÿæˆäº†çš„\n6.5 å¤šç»§æ‰¿ä¸­çš„è™šè¡¨å…ˆè¯´ç»“è®ºï¼Œå¦‚æœå‡ºç°äº†å¤šç»§æ‰¿ï¼Œé‚£ä¹ˆå­ç±»ä¸­ä¼šæ ¹æ®ç»§æ‰¿çš„çˆ¶ç±»åˆ†åˆ«äº§ç”Ÿç‹¬ç«‹çš„è™šè¡¨ï¼ˆå¦‚æœä¸æ˜¯ç‹¬ç«‹çš„ï¼Œé‚£å°±æ²¡æœ‰åŠæ³•å®ç°æŸä¸ªçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»æ—¶ï¼Œå¯¹å­ç±»çš„åˆ‡ç‰‡ï¼‰\nä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å¤šç»§æ‰¿\nclass Base&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func2()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func2()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Base::Func3()&quot; &lt;&lt; endl;\t&#125;private:\tint _b1 = 1;&#125;;class Base2&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Base2::Func1()&quot; &lt;&lt; endl;\t&#125;private:\tint _b2 = 1;&#125;;class Derive : public Base,public Base2&#123;public:\tvirtual void Func1()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func1()&quot; &lt;&lt; endl;\t&#125;\tvoid Func3()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func3()&quot; &lt;&lt; endl;\t&#125;\tvirtual void Func4()\t&#123;\t\tcout &lt;&lt; &quot;Derive::Func4()&quot; &lt;&lt; endl;\t&#125;private:\tint _d = 2;&#125;;\n\né€šè¿‡ç›‘è§†çª—å£ï¼Œèƒ½çœ‹åˆ°è¿™ä¸ªå¯¹è±¡çš„æ¨¡å‹å¤§æ¦‚æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤º\n\nå…¶ä¸­èƒ½çœ‹åˆ°å­ç±»ç‹¬æœ‰çš„è™šå‡½æ•°Func4æ˜¯å­˜åœ¨ç¬¬ä¸€å¼ è™šè¡¨é‡Œé¢çš„ï¼ˆVSç›‘è§†çª—å£ä¾æ—§æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼‰\n\nè¿™é‡Œè¿˜ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šBaseå’ŒBase2è¿™ä¸¤ä¸ªåŸºç±»ä¸­éƒ½æœ‰è™šå‡½æ•°Func1ï¼Œé‚£ä¸ºä»€ä¹ˆå­ç±»ä¸­è¿™ä¸¤ä¸ªç±»çš„è™šè¡¨ä¸­ï¼Œè¿™ä¸¤ä¸ªè¢«å­ç±»é‡å†™çš„Func1å‡½æ•°çš„åœ°å€ä¸ç›¸åŒå‘¢ï¼Ÿ\né€šè¿‡ä¹‹å‰å†™çš„æ‰“å°å‡½æ•°æ¥æ‰“å°ç¬¬äºŒç« è™šè¡¨é‡Œé¢çš„å‡½æ•°\ntypedef void(*V_FUNC)();void PrintVfptrTable(V_FUNC* arr)&#123;\tfor (int i = 0; arr[i] != nullptr; i++)\t&#123;\t\tprintf(&quot;[%d] %p -&gt; &quot;, i, arr[i]);\t\tV_FUNC f = arr[i];\t\tf();\t&#125;&#125;\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯¹dè¿™ä¸ªå­ç±»çš„æŒ‡é’ˆ+1çš„æ—¶å€™ï¼Œä¼šç›´æ¥è·³è¿‡sizeof(Derive)ä¸ªç©ºé—´çš„å¤§å°ã€‚ä¸ºäº†èƒ½ç²¾å‡†åœ°é€šè¿‡+sizeof(Base)æ‰¾åˆ°Base2åŸºç±»çš„è™šè¡¨ï¼Œå°±éœ€è¦å°†å­ç±»çš„æŒ‡é’ˆå¼ºè½¬ä¸ºchar*ï¼Œè¿™æ ·æ¯æ¬¡+1å°±æ˜¯ç§»åŠ¨ä¸€ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚\nPrintVfptrTable((V_FUNC*)(*((int*)((char*)&amp;d+sizeof(Base)))));\n\nè¿è¡Œå¯ä»¥çœ‹åˆ°ï¼Œå³ä¾¿å†…å­˜ä¸åŒï¼Œä½†å®é™…ä¸Šè°ƒç”¨çš„ä¾æ—§æ˜¯å­ç±»çš„Func1å‡½æ•°ï¼›ä¹Ÿèƒ½çœ‹åˆ°å­ç±»å•ç‹¬æ–°å¢çš„è™šå‡½æ•°åªä¼šæ”¾åœ¨ç¬¬ä¸€ä¸ªè™šè¡¨ä¸­ã€‚\n\n6.5.1 Func1åœ°å€ä¸åŒï¼Ÿåœ¨ä¸Šé¢VSæ‰“å°çš„è™šè¡¨ä¸­ï¼Œä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šBaseå’ŒBase1çˆ¶ç±»ä¸­çš„ä¸¤ä¸ªFunc1å‡½æ•°çš„åœ°å€ä¸ç›¸åŒï¼Œä½†æœ€ç»ˆæˆ‘ä»¬çœ‹åˆ°çš„è¿è¡Œç»“æœåˆéƒ½æ˜¯å­ç±»é‡å†™åçš„Func1\næŠŠç›¸åŒçš„ä»£ç æŒªåˆ°liunxç¯å¢ƒä¸‹ï¼Œç¼–è¯‘è¿è¡Œï¼Œå‘ç°å‡ºç°äº†æ®µé”™è¯¯\n$ ./test[0] 0x400b74 -&gt; Derive::Func1()[1] 0x400b48 -&gt; Base::Func2()[2] 0x400ba6 -&gt; Derive::Func4()Segmentation fault (core dumped)\n\n\né¡ºå¸¦ä¸€æï¼Œåœ¨linuxä¸‹ç›´æ¥ç¼–è¯‘æœ¬åšå®¢ä¸­çš„ä»£ç ä¼šå‡ºç°å¦‚ä¸‹è­¦å‘Šï¼Œå› ä¸ºæˆ‘ä»¬å¯¹æŒ‡é’ˆè¿›è¡Œäº†å¤šæ¬¡å¼ºè½¬ï¼Œä¸ç”¨ç®¡ä»–\n&gt;g++ test.cpp -o test -std=c++11&gt;test.cpp: In function â€˜int main()â€™:&gt;test.cpp:92:44: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]    PrintVfptrTable((V_FUNC *)(*((int *)&amp;d)),3);                                           ^&gt;test.cpp:93:69: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast]    PrintVfptrTable((V_FUNC *)(*((int *)((char *)&amp;d + sizeof(Base)))),1);                                                                    ^\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ‰“å°è™šå‡½æ•°è¡¨ä¸­ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯å½“å‰å‡½æ•°æŒ‡é’ˆä¸ºç©ºï¼Œè¿™æ˜¯VSä¸‹å¯¹è™šå‡½æ•°è¡¨çš„ç»“æŸè§„å®šï¼ˆä»¥nullptrç»“å°¾ï¼‰ï¼Œå¹¶ä¸æ˜¯linuxä¸‹çš„æ“ä½œï¼Œä¹Ÿä¸æ˜¯C++å¯¹è™šè¡¨çš„ç»Ÿä¸€è§„å®šã€‚\næ‰€ä»¥ï¼Œä¸ºäº†èƒ½æ­£å¸¸æ‰“å°å‡ºè™šå‡½æ•°è¡¨ï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰“å°å‡½æ•°çš„åˆ¤æ–­æ¡ä»¶æ”¹æˆå›ºå®šå€¼ï¼›å› ä¸ºæˆ‘ä»¬å·²ç»çŸ¥é“äº†è™šå‡½æ•°è¡¨ä¸­å‡½æ•°çš„ä¸ªæ•°äº†ã€‚\n// é‡å®šä¹‰å‡½æ•°æŒ‡é’ˆï¼Œéœ€è¦å°†æ–°çš„åå­—æ”¾åœ¨æ‹¬å·ä¸­é—´typedef void (*V_FUNC)();void PrintVfptrTable(V_FUNC *arr, size_t size)&#123;    printf(&quot;_vfptr: %p\\n&quot;,arr);    for (int i = 0; i &lt; size; i++)    &#123;        printf(&quot;[%d] %p -&gt; &quot;, i, arr[i]);        V_FUNC f = arr[i];        f();    &#125;&#125;// å¦‚ä¸‹æ˜¯ä¿®æ”¹åçš„è°ƒç”¨PrintVfptrTable((V_FUNC *)(*((int *)&amp;d)),3);PrintVfptrTable((V_FUNC *)(*((int *)((char *)&amp;d + sizeof(Base)))),1);\n\nå†æ¬¡ç¼–è¯‘è¿è¡Œï¼Œä¹Ÿå‡ºç°äº†ç›¸åŒçš„ç»“æœï¼Œä¸¤ä¸ªåŸºç±»è™šå‡½æ•°è¡¨ä¸­çš„Func1åœ°å€ä¸ç›¸åŒ\n$ ./test_vfptr: 0x400d10[0] 0x400b86 -&gt; Derive::Func1()[1] 0x400b5a -&gt; Base::Func2()[2] 0x400bb8 -&gt; Derive::Func4()_vfptr: 0x400d38[0] 0x400bb1 -&gt; Derive::Func1()\n\nå†æ–°å¢ä¸€ä¸ªç›´æ¥å¯¹Derive::Func1å‡½æ•°æœ¬èº«åœ°å€çš„æ‰“å°\nPrintVfptrTable((V_FUNC *)(*((int *)&amp;d)),3);PrintVfptrTable((V_FUNC *)(*((int *)((char *)&amp;d + sizeof(Base)))),1);printf(&quot;\\n&quot;);printf(&quot;Derive::Func1 %p\\n&quot;,(void*)&amp;Derive::Func1);\n\nè¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°æœ¬èº«çš„åœ°å€å’Œç¬¬ä¸€å¼ è™šè¡¨é‡Œé¢çš„Derive::Func1()åœ°å€æ˜¯å»åˆçš„ï¼Œä½†æ˜¯å’Œç¬¬äºŒç« è™šè¡¨çš„åœ°å€ä¸ç›¸ç¬¦åˆ\n_vfptr: 0x400cd0[0] 0x400b60 -&gt; Derive::Func1()[1] 0x400b34 -&gt; Base::Func2()[2] 0x400b92 -&gt; Derive::Func4()_vfptr: 0x400cf8[0] 0x400b8b -&gt; Derive::Func1()Derive::Func1 0x400b60\n\nè€Œåœ¨windowsçš„vs2019ä¸­ï¼Œæ‰“å°çš„åœ°å€å°±æ›´å¥‡æ€ªäº†ï¼Œå…¶å’Œä¸¤ä¸ªè™šè¡¨ä¸­çš„åœ°å€éƒ½å¯¹ä¸ä¸Šï¼\n_vfptr: 002D9B84[0] 002D141F -&gt; Derive::Func1()[1] 002D1393 -&gt; Base::Func2()[2] 002D106E -&gt; Derive::Func4()_vfptr: 002D9B98[0] 002D10B9 -&gt; Derive::Func1()Derive::Func1 002D1122\n\n\nè¿™é‡Œæˆ‘è¿˜å‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼Œç›¸åŒçš„ä»£ç åœ¨windowsä¸‹å’Œlinuxä¸‹çš„æ•ˆæœä¸åŒ\n// ä¸‹é¢çš„ä»£ç åœ¨windowsä¸‹å¯ä»¥æ­£å¸¸æ‰“å°å‡½æ•°åœ°å€ï¼Œlinuxä¸‹æ‰“å°å‡ºæ¥çš„æ˜¯0x1printf(&quot;Derive::Func1 %p\\n&quot;,(&amp;Derive::Func1));// ä¸‹é¢çš„å‡½æ•°åœ¨linuxä¸‹å¯ä»¥æ­£å¸¸æ‰“å°å‡½æ•°åœ°å€ï¼Œåœ¨windowsä¸‹æŠ¥é”™â€œå¼ºåˆ¶ç±»å‹è½¬æ¢å¤±æ•ˆâ€printf(&quot;Derive::Func1 %p\\n&quot;,(void*)&amp;Derive::Func1);\n\næœ‰äººçŸ¥é“è¿™æ˜¯ä¸ºå•¥å—ï¼ŸğŸ˜‚\n\nä½ å¯ä»¥ç†è§£è¿™æ˜¯åœ¨ä¸åŒå¹³å°ä¸‹ï¼Œå¯¹è™šè¡¨ä¸­å‡½æ•°æŒ‡é’ˆçš„ä¸€ä¸ªå¤„ç†ï¼Œå…¶æœ€ç»ˆè¿˜æ˜¯ä¼šè°ƒç”¨åˆ°æ­£ç¡®çš„å‡½æ•°çš„ã€‚\nåœ¨windowsä¸‹æŸ¥çœ‹åæ±‡ç¼–ï¼Œèƒ½çœ‹åˆ°å…¶æœ€ç»ˆæ˜¯è°ƒç”¨äº†ebp-14hçš„ä¸€ä¸ªåœ°å€ï¼Œåœ¨å†…å­˜çª—å£ä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªåœ°å€æ­£æ˜¯è™šè¡¨ä¸­å­˜æ”¾çš„Func1å‡½æ•°åœ°å€\n\nä½¿ç”¨è°ƒè¯•åœ¨åæ±‡ç¼–çª—å£ä¸­é€æ¡è¿è¡Œï¼Œèƒ½è¿›åˆ°è¿™ä¸ªcall [ebp-14h]è¯­å¥ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åœ¨002910B9è¿™ä¸ªåœ°å€ä¸Šå­˜æ”¾çš„å°±æ˜¯å­å‡½æ•°ä¸­çš„Func1å‡½æ•°åœ°å€ï¼Œè¿™é‡Œçš„æ±‡ç¼–æŒ‡ä»¤jmpç›¸å½“äºè·³è½¬åˆ°è¿™ä¸ªå‡½æ•°åœ°å€ä¸Š\n\nå†è¿›ä¸€æ­¥è§‚å¯Ÿä¼šå‘ç°ï¼Œè¿™é‡Œæ˜¾ç¤ºçš„åœ°å€å’Œæ‰“å°å‡ºæ¥çš„func1å‡½æ•°çš„åœ°å€è¿˜æ˜¯ä¸ç›¸åŒ\n\nå†è·³è½¬ï¼Œè¿˜æ˜¯ä¸åŒ\n\nå†æ¬¡è·³è½¬ï¼Œä¾æ—§æ˜¯ä¸åŒ\n\nå†ä¸€æ¬¡è·³è½¬ï¼Œå°±è·‘åˆ°äº†å­ç±»ä¸­Func1å‡½æ•°çš„æ‰§è¡Œæµé‡Œé¢äº†ã€‚æ­¤æ—¶å°±å¼€å§‹æ‰§è¡Œè¿™ä¸ªå‡½æ•°äº†ï¼\n\næ‰€ä»¥ï¼Œè¿™åªæ˜¯ç¼–è¯‘å™¨åœ¨æŸäº›å±‚é¢ä¸Šçš„å¤„ç†è€Œå·²ã€‚åŒ…æ‹¬ç¬¬ä¸€ä¸ªåŸºç±»çš„è™šè¡¨ï¼Œä¹Ÿæ˜¯è¿™æ ·çš„å‡½æ•°åœ°å€è·³è½¬ã€‚åœ¨linuxä¸‹å’Œwindowsçš„ä¸åŒç¼–è¯‘å™¨ä¸‹è§‚å¯Ÿåˆ°çš„æƒ…å†µéƒ½ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬æ²¡å¿…è¦è¿‡å¤šçº ç»“äºè¿™é‡Œï¼Œåªè¦çŸ¥é“æœ‰è¿™ç±»ç¼–è¯‘å™¨å¤„ç†çš„å­˜åœ¨å°±å¯ä»¥äº†ã€‚\n\næœ€ç»ˆä¸¤ä¸ªåŸºç±»å¯¹func1çš„å‡½æ•°è°ƒç”¨çš„æ±‡ç¼–æµç¨‹å¦‚ä¸‹å›¾\n\nè¿™å…¶ä¸­ï¼Œæˆ‘ä»¬è¦å‘ç°Base2å¯¹Func1çš„è°ƒç”¨ï¼Œä¸»è¦æ˜¯å¤šäº†ä¸‹é¢è¿™ä¸¤å¥éå¸¸ä¸åŒçš„æ±‡ç¼–\n008426B0 83 E9 08             sub         ecx,8008426B3 E9 67 ED FF FF       jmp         Derive::Func1 (084141Fh)\n\nåŸæœ¬èµ°åˆ°è¿™ä¸€æ­¥ï¼Œecxå¯„å­˜å™¨çš„å€¼æ˜¯ 0x00849b98ã€‚è¿™ä¸€æ­¥æ‰§è¡Œå®Œæ¯•åï¼Œecxçš„å€¼æ˜¯0x00849b90ï¼Œå¯ä»¥çœ‹åˆ°æ›´æ–°åçš„å€¼æ¯”åŸæœ¬çš„å€¼å°‘äº†8å­—èŠ‚ï¼›æ­£å¥½æ˜¯Baseç±»çš„å¤§å°ï¼\nè¿™æ˜¯å› ä¸ºåœ¨å½“å‰å¯¹è±¡æ¨¡å‹ä¸­ï¼Œä¸¤ä¸ªçˆ¶ç±»å¯¹è±¡éœ€è¦è°ƒç”¨çš„Func1éƒ½æ˜¯å­ç±»çš„Func1ï¼Œæ­¤æ—¶ä½¿ç”¨çš„thisæŒ‡é’ˆåº”è¯¥æ˜¯å­ç±»Deriveçš„thisæŒ‡é’ˆï¼Œå¤„äºå­ç±»å¯¹è±¡åœ°å€çš„èµ·å§‹ä½ç½®ã€‚å¯¹äºBase* ptr1æ¥è¯´ï¼Œå…¶æŒ‡å‘çš„åœ°å€æœ¬èº«å°±æ˜¯å­ç±»çš„èµ·å§‹åœ°å€ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œä¿®æ­£ã€‚\nä½†Base2* ptr2æŒ‡å‘çš„ä½ç½®å¹¶ä¸æ˜¯å­ç±»çš„èµ·å§‹åœ°å€ï¼Œæ­¤æ—¶å°±éœ€è¦-8å›åˆ°èµ·å§‹ä½ç½®ï¼Œç”¨ä¿®æ­£åçš„thisæŒ‡é’ˆæ¥è°ƒç”¨å­ç±»çš„Func1å‡½æ•°ï¼›\n\nè¿™ä¹Ÿå°±èƒ½è§£é‡Šä¸ºä»€ä¹ˆä¸¤ä¸ªè™šè¡¨ä¸­å­˜æ”¾çš„å‡½æ•°æŒ‡é’ˆåœ°å€ä¸ç›¸åŒï¼Œå› ä¸ºè°ƒç”¨çš„æµç¨‹ä¸ä¸€æ ·ï¼ŒBase2çš„æŒ‡é’ˆåœ¨è°ƒç”¨çš„æ—¶å€™éœ€è¦å¯¹ecxå¯„å­˜å™¨ä¸­çš„thisæŒ‡é’ˆè¿›è¡Œä¿®æ­£ã€‚\n6.5.2 æŒ‡é’ˆåˆ‡ç‰‡åœ°å€ä¸åŒå½“æˆ‘ä»¬ç”¨ä¸åŒçš„çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå­ç±»å¯¹è±¡çš„æ—¶å€™ï¼Œç”±äºä¼šå‘ç”Ÿä¸åŒä½ç½®çš„åˆ‡ç‰‡ï¼Œæœ€ç»ˆçš„åœ°å€å¹¶ä¸ç›¸åŒã€‚è¿™ç‚¹æˆ‘ä»¬é€šè¿‡å¯¹è±¡æ¨¡å‹ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œä¸åŒçš„çˆ¶ç±»éƒ½éœ€è¦æŒ‡å‘è‡ªå·±çš„é‚£éƒ¨åˆ†ï¼Œæ‰€ä»¥åˆ‡ç‰‡åçš„åœ°å€ä¸åŒã€‚\nDerive d;Base* ptr1 =  &amp;d;Base2* ptr2= &amp;d;Derive* ptr3 = &amp;d;printf(&quot;Base: %p\\nBase2: %p\\nDerive: %p\\n&quot;, ptr1, ptr2, ptr3);\n\n\n6.6 è±å½¢è™šæ‹Ÿç»§æ‰¿ä¸­çš„è™šå‡½æ•°è¡¨class A&#123;public:\tvirtual void func()\t&#123;\t\tcout &lt;&lt; &quot;A:func&quot; &lt;&lt; endl;\t&#125;\tint _a;&#125;;class B : public A&#123;public:\tint _b;&#125;;class C : public A&#123;public:\tint _c;&#125;;class D : public B, public C&#123;public:\tint _d;&#125;;\n\nä½¿ç”¨ä¸Šå›¾ä»£ç è¿›è¡Œè™šæ‹Ÿç»§æ‰¿çš„æ—¶å€™ï¼Œå†…å­˜æ¨¡å‹å¦‚å›¾ï¼Œåœ¨Bç±»å’ŒCç±»ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªç»§æ‰¿è‡ªAç±»çš„è™šè¡¨ï¼›å› ä¸ºè¿™é‡Œæ²¡æœ‰è¿›è¡Œå‡½æ•°é‡å†™ï¼Œæ‰€ä»¥åœ°å€æ˜¯ä¸€æ ·çš„ã€‚\n\nå½“æˆ‘ä»¬åœ¨Bå’ŒCç±»ä¸­é‡å†™æ­¤å‡½æ•°ï¼Œå¯¹è±¡æ¨¡å‹å¦‚ä¸‹ï¼ŒBç±»å’ŒCç±»ä¸­è™šè¡¨çš„å‡½æ•°æŒ‡é’ˆä¸åŒ\n\nä½†å¦‚æœæˆ‘ä»¬æŠŠBå’ŒCå¯¹Açš„ç»§æ‰¿éƒ½æ”¹æˆè™šç»§æ‰¿ï¼Œæ­¤æ—¶å°±ä¼šæŠ¥é”™äº†ï¼\n\nåœ¨å‰é¢çš„è™šç»§æ‰¿è®²è§£ä¸­ï¼Œæåˆ°äº†åœ¨VSä¸‹ï¼Œæ˜¯å°†å…¬å…±åŸºç±»æ”¾åœ¨å­ç±»çš„æœ€åé¢çš„ï¼Œæ­¤æ—¶æ¨¡å‹çš„é¡ºåºå¤§æ¦‚å¦‚ä¸‹\nBCDA\n\nç”±äºBå’ŒCéƒ½ä½¿ç”¨äº†è™šç»§æ‰¿ï¼Œè§£å†³äº†æ•°æ®äºŒä¹‰æ€§é—®é¢˜ï¼Œä½†æ²¡æœ‰è§£å†³Aä¸­çš„è™šè¡¨åˆ°åº•æ˜¯å­˜Bé‡å†™åçš„funcï¼Œè¿˜æ˜¯å­˜Cé‡å†™åçš„funcçš„é—®é¢˜ï¼›\nè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åœ¨Dé‡Œé¢é‡å†™funcï¼Œè¿™æ—¶å€™å°±èƒ½ç¡®å®šæœ€ç»ˆä½¿ç”¨çš„æ˜¯Dé‡Œé¢å¯¹funcçš„é‡å†™ï¼Œä¹Ÿå°±ä¸ä¼šæœ‰åˆ°åº•æ˜¯é€‰Bè¿˜æ˜¯é€‰Cçš„åˆ†æ­§é—®é¢˜äº†ã€‚\n\n6.7 è™šå‡½æ•°å’Œinline6.7.1 çŠ¶æ€è§‚å¯Ÿæˆ‘ä»¬å…ˆå°è¯•ç»™ä¸€ä¸ªè™šå‡½æ•°åŠ ä¸Šinlineå†…è”å…³é”®å­—\nclass A&#123;public:\tvirtual inline void f1()\t&#123;\t\tcout &lt;&lt; &quot;f1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void f2();&#125;;// å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å°±ä¸æ˜¯å†…è”å‡½æ•°äº†void A::f2()&#123;\tcout &lt;&lt; &quot;f2()&quot; &lt;&lt; endl;&#125;int main()&#123;\tA aa;\taa.f1();\taa.f2();\treturn 0;&#125;\n\nä¿®æ”¹VS2019é¡¹ç›®çš„å±æ€§\n\n\nè½¬åˆ°åæ±‡ç¼–ï¼Œå¯ä»¥çœ‹åˆ°f1å‡½æ•°è¢«å±•å¼€ï¼Œf2å‡½æ•°ä¾æ—§æ˜¯callåœ°å€çš„è°ƒç”¨\n\nclass A&#123;public:\tvirtual inline void f1()\t&#123;\t\tcout &lt;&lt; &quot;f1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void f2()\t&#123;\t\tcout &lt;&lt; &quot;f2()&quot; &lt;&lt; endl;\t&#125;&#125;;\n\nå¦‚æœä¸å°†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ä¸¤ä¸ªå‡½æ•°éƒ½è¢«ç¼–è¯‘å™¨è®¤ä½œæ˜¯å†…è”è€Œå±•å¼€äº†ã€‚\n\næ­¤æ—¶æ–°å¢ä¸€ä¸ªç»§æ‰¿ï¼Œå†æ¥çœ‹çœ‹åæ±‡ç¼–\nclass A&#123;public:\tvirtual inline void f1()\t&#123;\t\tcout &lt;&lt; &quot;f1()&quot; &lt;&lt; endl;\t&#125;\tvirtual void f2();&#125;;// å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å°±ä¸æ˜¯å†…è”å‡½æ•°äº†void A::f2()&#123;\tcout &lt;&lt; &quot;f2()&quot; &lt;&lt; endl;&#125;class B:public A&#123;public:\tvirtual void f1()\t&#123;\t\tcout &lt;&lt; &quot;B f1()&quot; &lt;&lt; endl;\t&#125;&#125;;int main()&#123;\tA aa;\taa.f1();\taa.f2();\treturn 0;&#125;\n\næ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œä¼¼ä¹f1å‡½æ•°ä¾æ—§æ˜¯æœ‰å†…è”çš„å±æ€§\n\nè¿™è¯´æ˜è™šå‡½æ•°æ˜¯å¯ä»¥ç”¨virtualå…³é”®å­—æ¥ä¿®é¥°çš„ã€‚\nä½†å¦‚æœç”¨å¤šæ€è°ƒç”¨å‘¢ï¼Ÿ\nA* aa = new B();aa-&gt;f1();aa-&gt;f2();\n\næ­¤æ—¶å°±èƒ½å‘ç°ï¼ŒåŸæœ¬çš„å¤šæ€å±•å¼€ï¼Œå°±å˜å›äº†callå‡½æ•°åœ°å€çš„è°ƒç”¨\n\nè¿™æ˜¯å› ä¸ºå†…è”å‡½æ•°æ˜¯æ²¡æœ‰åœ°å€çš„ï¼è€Œå¤šæ€åŸºäºè™šåŸºè¡¨å®ç°ï¼Œè™šåŸºè¡¨ä¸­å¿…é¡»è¦å­˜æ”¾å‡½æ•°çš„åœ°å€ï¼\n6.7.2 ç»“è®ºç»“è®ºå°±æ˜¯ï¼Œåœ¨å¤šæ€ä¸­ï¼Œå¯¹è™šå‡½æ•°çš„inlineä¿®é¥°ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šè¢«ç¼–è¯‘å™¨å¿½ç•¥ï¼ˆä¸ä¼šæœ‰å†…è”çš„å±æ€§ï¼‰ï¼Œä¾æ—§æ˜¯ä¸ªæ™®é€šçš„å‡½æ•°\n7.é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°é™æ€æˆå‘˜å‡½æ•°å±äºæ•´ä¸ªç±»ï¼Œæ— æ³•è¢«æŒ‡å®šå¯¹è±¡é‡å†™ã€‚\nè€Œä¸”é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œå¯ä»¥ç›´æ¥ç”¨ç±»åæ¥è°ƒç”¨ï¼Œä½†è¿™ä¹Ÿå†³å®šäº†å…¶æ— æ³•è®¿é—®åˆ°è™šè¡¨ï¼Œè‡ªç„¶ä¹Ÿæ— æ³•å®ç°å¤šæ€ã€‚\næ‰€ä»¥é™æ€æˆå‘˜å‡½æ•°æ˜¯ä¸èƒ½åšè™šå‡½æ•°çš„ï¼Œåœ¨VSä¸­è¿™æ ·å†™ä¼šç›´æ¥æŠ¥é”™\n\n8.æ„é€ å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°é€šè¿‡è°ƒè¯•å¯ä»¥å‘ç°ï¼Œè™šå‡½æ•°è¡¨ä¸­çš„æŒ‡é’ˆåŸæœ¬æ˜¯éšæœºå€¼ï¼Œæ˜¯åœ¨æ„é€ å‡½æ•°ä¸­è¢«åˆå§‹åŒ–ä¸ºæ­£ç¡®çš„å‡½æ•°åœ°å€çš„\n\n\næ—¢ç„¶æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼Œé‚£ä¹ˆè™šå‡½æ•°è¡¨å°±ä¸èƒ½å…ˆäºæ„é€ å‡½æ•°è¢«åˆå§‹åŒ–å‡ºæ¥ï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•é€šè¿‡è™šè¡¨æ¥å®ç°å¤šæ€ã€‚\næ‰€ä»¥æ„é€ å‡½æ•°æ˜¯ä¸èƒ½ä¸ºè™šå‡½æ•°çš„ï¼\n9.è±å½¢ç»§æ‰¿æ„é€ é¡ºåºå¦‚ä¸‹è™šè±å½¢ç»§æ‰¿ä¸­ï¼Œè°ƒç”¨æ„é€ å‡½æ•°çš„é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ\nclass A &#123;public:\tA(const char* s) &#123; cout &lt;&lt; s &lt;&lt; endl; &#125;\t~A() &#123;&#125;&#125;;class B :virtual public A&#123;public:\tB(const char* s1, const  char* s2) :A(s1) &#123; cout &lt;&lt; s2 &lt;&lt; endl; &#125;&#125;;class C :virtual public A&#123;public:\tC(const char* s1, const  char* s2) :A(s1) &#123; cout &lt;&lt; s2 &lt;&lt; endl; &#125;&#125;;class D :public B, public C&#123;public:\tD(const char* s1, const char* s2, const  char* s3, const  char* s4) :B(s1, s2), C(s1, s3), A(s1)\t&#123;\t\tcout &lt;&lt; s4 &lt;&lt; endl;\t&#125;&#125;;int main()&#123;\tD* p = new D(&quot;class A&quot;, &quot;class B&quot;, &quot;class C&quot;, &quot;class D&quot;);\tdelete p;\treturn 0;&#125;\n\næˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œç±»çš„å¯¹è±¡åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œåˆå§‹åŒ–çš„é¡ºåºå°±æ˜¯ç±»å£°æ˜çš„é¡ºåº\nä¾ç…§ä»£ç ä¸­çš„é¡ºåºæµç¨‹è¯»ä¸‹æ¥ï¼Œå°±æ˜¯æ„é€ å‡½æ•°è¢«åˆå§‹åŒ–çš„é¡ºåºï¼›\nè€Œä¸”Açš„æ„é€ å‡½æ•°ä¹Ÿæ˜¯ç”±æœ€ç»ˆå­ç±»Dç›´æ¥å‘èµ·çš„ï¼Œè€Œä¸æ˜¯Bæˆ–è€…Cå‘èµ·çš„ã€‚\n\nä¸‹é¢è¿™é“é¢˜ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰å…³äºæ„é€ é¡ºåºå’Œå¤šæ€è°ƒç”¨çš„é—®é¢˜\n\nåœ¨linuxä¸‹æµ‹è¯•ï¼Œæœ€ç»ˆæ‰“å°çš„æ˜¯\nbarfoob_bar\n\nè°ƒç”¨é¡ºåºä¸º\n\nçˆ¶ç±»Açš„æ„é€ å‡½æ•°è°ƒç”¨çˆ¶ç±»è‡ªå·±çš„barå‡½æ•°ï¼Œå› ä¸ºè¿™æ—¶å€™è™šè¡¨è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å¤šæ€ï¼Œæ‰“å°bar\nçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»ï¼Œè°ƒç”¨fooå‡½æ•°ï¼Œç”±äºfooå‡½æ•°ä¸æ˜¯è™šå‡½æ•°ï¼Œä¸åœ¨è™šè¡¨å†…ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯çˆ¶ç±»çš„fooå‡½æ•°ï¼Œæ‰“å°foo\nçˆ¶ç±»æŒ‡é’ˆè°ƒç”¨barå‡½æ•°ï¼Œæ­¤å‡½æ•°ä¸ºå¤šæ€è°ƒç”¨ï¼Œè°ƒç”¨çš„æ˜¯å­ç±»çš„barå‡½æ•°ï¼Œæ‰“å°b_bar\n\næ‰€ä»¥æœ€ç»ˆçš„è¾“å‡ºç»“æœæ˜¯barfoob_bar\nThe endå†…å®¹ä¸°å¯Œçš„ç»§æ‰¿å’Œå¤šæ€çš„åšå®¢ç»ˆäºè¡¥å……å®Œæ¯•äº†ï¼\nå¦‚æœæœ‰é—®é¢˜è¿˜è¯·æå‡ºï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘å“ˆå¸ŒHashï¼ˆæœªå®Œæˆï¼‰","url":"/posts/593601584/","content":"å­¦ä¹ å®Œäº†çº¢é»‘æ ‘ä»¥åŠmap&#x2F;setï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥åº·åº·å¦å¤–ä¸€ç§ç”¨äºæŸ¥æ‰¾æ•°æ®çš„æ–°æ–¹å¼ï¼Œé‚£ä¾¿æ˜¯å“ˆå¸Œè¡¨\n\n\n1.æ¦‚å¿µå“ˆå¸Œæ˜¯ä¸€ç§ç”¨ä¸‹æ ‡æ˜ å°„æ¥æŸ¥æ‰¾æ•°æ®çš„æ–¹å¼ã€‚åœ¨STLåº“ä¸­ï¼Œæœ‰mapå’Œsetçš„unordered(å³ä¸ºstlåº“é‡Œé¢çš„å“ˆå¸Œ)ç‰ˆæœ¬\næˆ‘ä»¬å¯ä»¥æ¥å¯¹æ¯”ä¸€ä¸‹å®ƒå’Œçº¢é»‘æ ‘ï¼ˆmap/setçš„æ ‡å‡†ç‰ˆæœ¬ï¼‰çš„æŸ¥æ‰¾æ—¶é—´å·®è·ï¼ˆæ˜¯é€šè¿‡forå¾ªç¯æŸ¥æ‰¾æ‰€æœ‰æ’å…¥æ•°æ®æ¥å®ç°çš„è®¡æ—¶ï¼‰\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŸ¥æ‰¾æ–¹é¢ï¼Œunorderedç‰ˆæœ¬æŸ¥æ‰¾çš„é€Ÿåº¦æ¯”æ­£å¸¸çš„mapå’Œsetå¿«äº†ä¸€å€æœ‰ä½™ã€‚ä¹‹å‰æˆ‘å·²ç»è§‰å¾—æœç´¢äºŒå‰æ ‘çš„æŸ¥æ‰¾å·²ç»éå¸¸å¿«äº†ï¼Œå®é™…ä¸Šå“ˆå¸Œæ‰æ˜¯çœŸæ­£çš„å¿«ä¸­ä¹‹å¿«ï¼\nè¿™ä¸¤ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š\n\nå¹³è¡¡äºŒå‰æœç´¢æ ‘ O(logN)\nå“ˆå¸Œç®—æ³• O(1)\n\nå› ä¸ºå“ˆå¸Œæ˜¯ç›´æ¥ä»å¯¹åº”çš„ä¸‹æ ‡æ˜ å°„ä½ç½®æ‰¾åˆ°æ•°æ®çš„ï¼Œè¿™å°±å’Œæˆ‘ä»¬è¿›è¡Œéšæœºè®¿é—®é¡ºåºè¡¨é‡Œé¢çš„æ•°æ®ä¸€æ ·ï¼Œéƒ½æ˜¯O(1)çš„ç›´æ¥è®¿é—®\n1.1 ä¸‹æ ‡æ˜ å°„é‚£ä¹ˆï¼Œè¦æ€ä¹ˆå¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä¸‹æ ‡æ˜ å°„å‘¢ï¼Ÿ\n\nå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„\næˆ‘ä»¬éœ€è¦å­˜æ”¾ä¸€ç»„intç±»å‹çš„æ•°æ®ï¼Œ0-9ä»¥å†…çš„æ•°å­—å¯ä»¥ç›´æ¥é€šè¿‡ä¸‹æ ‡æ˜ å°„æ”¾å…¥å¯¹åº”ä½ç½®ã€‚è€Œå¤§äº9çš„æ•°æ®åˆ™éœ€è¦è¿›è¡Œå–æ¨¡æ“ä½œï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¸‹æ ‡ã€‚æ¯”å¦‚12%10=2ï¼Œåˆ™æ”¾å…¥ä¸‹æ ‡ä¸º2çš„ä½ç½®\n\né‚£ï¼Œå¦‚æœä¸€ä¸ªä¸‹æ ‡ä½ç½®æœ¬æ¥å°±æœ‰æ•°æ®äº†æ€ä¹ˆåŠ?æˆ‘ä»¬æœ‰ä¸¤ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n1.2 é—­æ•£åˆ—ï¼ˆå¼€æ”¾å®šå€æ³•ï¼‰å½“ä¸€ä¸ªä¸‹æ ‡çš„ä½ç½®å·²ç»æœ‰æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœå“ˆå¸Œè¡¨è¿˜æ²¡æœ‰æ»¡ï¼Œæˆ‘ä»¬å¯ä»¥å¾€è¿™ä¸ªæ˜ å°„ä½ç½®çš„åæ–¹æ’å…¥è¿™ä¸ªæ•°æ®\n\nçº¿æ€§æ¢æµ‹ï¼šä¾æ¬¡å»æ‰¾ç©ºä½ç½®ï¼Œæ‰¾åˆ°åç›´æ¥æ’å…¥\näºŒæ¬¡æ¢æµ‹ï¼šè·³è·ƒåœ°æ‰¾ç©ºä½ç½®ï¼Œä¸ä¼šå‡ºç°å¤ªå¤šçš„æ‹¥å µ\n\nä½ å¯èƒ½ä¼šé—®ï¼Œä¸å¯¹å•Šã€‚ä½ æŠŠåˆ«äººçš„ä½ç½®å äº†ï¼Œåˆ°æ—¶å€™è¢«äººè¦ç”¨è¿™ä¸ªä½ç½®ï¼Œè¯¥æ€ä¹ˆå»æ“ä½œå•Šï¼Ÿ\næ²¡é”™ï¼Œè¿™ä¸ªå°±æ˜¯é—­æ•£åˆ—çš„ä¸€å¤§ç¼ºç‚¹ï¼šä¼šå ç”¨åŸæœ¬å±äºå…¶ä»–äººçš„ç©ºé—´ã€‚\n1.3 å¼€æ•£åˆ—ï¼ˆæ‹‰é“¾æ³•ï¼‰è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ‹‰é“¾æ³•ã€‚äºå…¶åœ¨æ¯ä¸€ä¸ªä¸‹æ ‡æ˜ å°„çš„ä½ç½®æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬ä¸å¦‚æ•´ä¸€ä¸ªé“¾è¡¨ã€‚åœ¨åŸæœ‰çš„å“ˆå¸Œè¡¨ä¸­å­˜æ”¾é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚å½“æœ‰ç›¸åŒæ˜ å°„å€¼çš„æ•°æ®æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œé“¾è¡¨çš„å¤´æ’ï¼Œä½¿å…¶æŒ‚è½½åˆ°ç›¸åŒä½ç½®çš„é“¾è¡¨ä¸Šã€‚\n\nè¿™ä¸ªé“¾è¡¨ä¹Ÿè¢«ç§°ä¸ºæ¡¶\n\nè€Œæ²¡æœ‰æ•°æ®çš„æ˜ å°„ä½ç½®ï¼Œå…¨éƒ½ä¸ºnullptrç©ºæŒ‡é’ˆ\n\nåœ¨è¿™ä¸ªåº”ç”¨åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨å•é“¾è¡¨å³å¯ä»¥å®Œæˆæ¡¶çš„æ“ä½œã€‚è‹¥ä½¿ç”¨listæˆ–è€…è‡ªå·±å†™çš„åŒé“¾è¡¨ï¼Œåˆ™ä¼šå‡ºç°ä¸å¿…è¦çš„ç©ºé—´æµªè´¹ã€‚\nä½ å¯èƒ½ä¼šé—®ï¼Œé‚£å¦‚æœä¸€ä¸ªæ˜ å°„å€¼æŒ‚è½½äº†ç‰¹åˆ«å¤šçš„èŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾çš„æ•ˆç‡ä¼šä¸ä¼šä»O(1)å˜æˆO(N)ï¼ˆå³éœ€è¦éå†ä¸€ä¸ªé“¾è¡¨ï¼‰çš„æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ\nè¿™å°±å¿…é¡»è¦æåˆ°å“ˆå¸Œè¡¨çš„æ‰©å®¹é—®é¢˜äº†\n1.4 ä»€ä¹ˆæ—¶å€™éœ€è¦æ‰©å®¹ï¼Ÿåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªè´Ÿè½½å› å­ï¼Œç”¨äºæ ‡è®°å“ˆå¸Œè¡¨çš„æ•°æ®ä¸ªæ•°\nè´Ÿè½½å› å­=å·²æœ‰å…ƒç´ ä¸ªæ•°/æ€»é•¿åº¦\n\nå½“è´Ÿè½½å› å­å¤§äºä¸€å®šæ•°é‡çº§çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å“ˆå¸Œè¡¨å¿«è¦æ»¡çš„æ—¶å€™ï¼Œæ’å…¥æ•°æ®é‡åˆ°å†²çªçš„å¯èƒ½æ€§å°±éå¸¸å¤§ã€‚å³ä¾¿æˆ‘ä»¬ç”¨æ‹‰é“¾æ³•æŒ‚è½½äº†æ¡¶ï¼Œå¦‚æœå†²çªå¾ˆå¤šçš„è¯ï¼Œå°±å®¹æ˜“å‡ºç°ä¸Šé¢è¯´çš„æ•ˆç‡ä½ä¸‹é—®é¢˜ã€‚\nè€Œå¦‚æœæˆ‘ä»¬çš„è´Ÿè½½å› å­ä¸å¤§çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ–°æ’å…¥çš„èŠ‚ç‚¹éƒ½èƒ½æ‰¾åˆ°å®ƒè‡ªå·±ç‹¬ç«‹çš„æ²¡æœ‰å†²çªçš„æ˜ å°„ä½ç½®ï¼Œè¿™æ ·å°±å¤§å¤§å¢åŠ äº†è®¿é—®æ•ˆç‡\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå“ˆå¸Œè¡¨çš„æ˜ å°„å…³ç³»å’Œè¡¨çš„é•¿åº¦ç›¸å…³\næ‰€ä»¥å½“æˆ‘ä»¬æ‰©å®¹ä¹‹åï¼Œéœ€è¦æŠŠå½“å‰è¡¨å†…çš„æ‰€æœ‰å…ƒç´ æ‹¿å‡ºæ¥ï¼Œæ ¹æ®é”®å€¼é‡æ–°è¿›è¡Œä¸‹æ ‡æ˜ å°„ï¼Œæ’å…¥è¿›æ–°è¡¨ã€‚\n\nå¯¹äºå¼€æ”¾å®šå€æ³•ï¼Œè´Ÿè½½å› å­åº”è¯¥é™åˆ¶åœ¨0.8ä»¥ä¸‹ã€‚javaçš„ç³»ç»Ÿåº“ä¸­å°±ä»¥0.75ä½œä¸ºäº†è´Ÿè½½å› å­çš„é™åˆ¶å€¼ï¼Œè¶…è¿‡æ­¤å€¼å°†è¿›è¡Œæ‰©å®¹æ“ä½œ\n\n1.5 æ€ä¹ˆæ˜ å°„ï¼Ÿå…³äºæ˜ å°„çš„å³ä¾¿ç†å¿µã€å†²çªã€æ‰©å®¹é—®é¢˜æˆ‘ä»¬éƒ½å·²ç»æåˆ°äº†ã€‚ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯æ€ä¹ˆæ˜ å°„ï¼Ÿ\nå¦‚æœæˆ‘ä»¬æ’å…¥çš„æ•°æ®æ˜¯intæˆ–è€…charã€doubleè¿™ç§å¯ä»¥å¼ºè½¬ä¸ºintçš„ç±»å‹ä½œä¸ºkeyï¼Œé‚£è¿˜ç®—å¥½æ“ä½œï¼Œç›´æ¥ç”¨intè¿›è¡Œä¸‹æ ‡æ˜ å°„å³å¯ã€‚\n\né‚£å‡å¦‚æˆ‘ä»¬ç”¨string/è‡ªå®šä¹‰ç±»å‹æ¥ä½œä¸ºkeyå‘¢ï¼Ÿ\n\nè¿™ç§ç±»å‹ä¸èƒ½ç›´æ¥å¼ºåˆ¶è½¬ä¸ºintï¼Œè™½ç„¶stringæˆ‘ä»¬å¯ä»¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ASCIIç ä½œä¸ºæ˜ å°„å€¼ã€‚ä½†æ˜¯é‚£ä¹ˆåšçš„å†²çªä¼šéå¸¸å¤šï¼ŒABC/ADFC/ASDè¿™äº›å­—ç¬¦ä¸²éƒ½æ˜¯ä»¥Aå¼€å¤´ï¼Œéš¾é“æˆ‘ä»¬å°±è¦æŠŠå®ƒæ”¾åœ¨ç›¸åŒä½ç½®ä¸‹é¢å—ï¼Ÿé‚£æ ·æ•ˆç‡ä¹Ÿå¤ªä½äº†ï¼\n\nå¯ä¸å¯ä»¥æŠŠå­—ç¬¦ä¸²æ¯ä¸€ä¸ªå­—ç¬¦çš„ASCIIåŠ èµ·æ¥å‘¢ï¼Ÿ\n\nè¿™æ ·èƒ½è§£å†³ä¸€å®šç¨‹åº¦ä¸Šçš„å†²çªï¼Œä½†æ˜¯ABC/ACBè¿™ç§å­—ç¬¦ä¸²æ’åˆ—ä¸åŒï¼Œä½†æ˜¯å­—ç¬¦æ˜¯ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå°±ä¼šå¾—å‡ºç›¸åŒçš„ç»“æœé€ æˆå†²çªã€‚\n\nè¿™æ—¶å€™å°±æœ‰ä¸€ä¸ªä¸çŸ¥åçš„ç¨‹åºçŒ¿[Dennis M. Ritchie](https://baike.baidu.com/item/Dennis M. Ritchie&#x2F;1971171?fromModule&#x3D;lemma_inlink)æƒ³å‡ºæ¥äº†ä¸€ä¸ªè¶…çº§ç‰›é€¼çš„åŠæ³•ï¼šæŠŠæ¯ä¸€ä¸ªcharçš„ASCIIéƒ½ä¹˜ä¸Šä¸€ä¸ªæ•°ï¼Œå†è¿›è¡Œç›¸åŠ \nsize_t operator()(const string&amp; key)&#123;    size_t hash = 1;    for (auto s : key)    &#123;//æ¯ä¸€æ¬¡éƒ½*13ï¼Œé¿å…å†²çª        hash = hash * 13 + s;    &#125;    return hash;&#125;\n\nå› ä¸ºå­—ç¬¦ä¸²çš„æ’åˆ—é¡ºåºä¸ç›¸åŒï¼Œæ‰€ä»¥æ¯ä¸€æ¬¡è·å¾—çš„hashå€¼è‚¯å®šæ˜¯ä¸åŒçš„ï¼Œå†ä¹˜ä¸Šä¸€ä¸ªæ•°ä¹‹åï¼Œå°±å®Œç¾çš„é¿å…äº†å¤§éƒ¨åˆ†çš„å†²çªé—®é¢˜ã€‚\nè¿™ä¸ªæ–¹æ³•å¯ä»¥æ²¿ç”¨åˆ°æ‰€æœ‰è‡ªå®šä¹‰ç±»å‹ï¼æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰å†™çš„æ—¥æœŸç±»ï¼Œå°±å¯ä»¥æŠŠå¹´åŠ å…¥hashä¹‹åï¼Œä¹˜ä¸€ä¸ªæ•°å†åŠ æœˆï¼Œå†ä¹˜ä¸€ä¸ªæ•°å†åŠ å¤©\nè¿™ä¹ˆç‰›é€¼çš„æ–¹æ³•ï¼Œæ€ä¹ˆå¯èƒ½æ˜¯ä¸çŸ¥åç¨‹åºå‘˜æƒ³å‡ºæ¥çš„ï¼Ÿå’³å’³ï¼Œå®é™…ä¸Šï¼ŒDennis M. Ritchieè¿˜æœ‰å¦å¤–ä¸€ä¸ªåå­—â€œCè¯­è¨€ä¹‹çˆ¶â€\n\nè†œæ‹œå¤§ä½¬ï¼Œå¤§ä½¬ç‰›é€¼ï¼ğŸ˜\n\nåœ¨æœ¬ç¯‡åšå®¢ä¸­å°±ä¸å»è®²è§£STLåº“ä¸­unordered_map/setçš„ä½¿ç”¨åŠæ³•äº†ï¼Œå› ä¸ºå®ƒä»¬çš„ä½¿ç”¨å’ŒåŸºç¡€çš„map/setç›¸å·®æ— å‡ ã€‚æˆ‘ä»¬ç›´æ¥å¼€å§‹æ¨¡æ‹Ÿå®ç°\n2.å“ˆå¸Œè¡¨1-å¼€æ”¾å®šå€æ³•2.1 æ’å…¥æ’å…¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åšçš„ä¾¿æ˜¯éµå¾ªå“ˆå¸Œè¡¨çš„æ˜ å°„æ–¹æ³•ï¼Œå¯¹keyè¿›è¡Œæ˜ å°„ï¼Œå†å°†pairæ’å…¥è¿›å°è£…å¥½çš„vectorä¸­\næ’å…¥çš„æ€è·¯å¦‚ä¸‹ï¼š\n\né¦–å…ˆåˆ¤æ–­å“ˆå¸Œè¡¨ä¸­æ˜¯å¦æœ‰ç›¸åŒé”®å€¼keyçš„æ•°æ®ï¼ˆæ­¤æ—¶æˆ‘ä»¬å†™çš„æ˜¯ä¸æ”¯æŒé”®å€¼å†—ä½™çš„å“ˆå¸Œè¡¨ï¼Œå¦‚æœå‡ºç°ç›¸åŒé”®å€¼çš„æ•°æ®ï¼Œåˆ™ä¸å†è¿›è¡ŒäºŒæ¬¡æ’å…¥return falseï¼ˆè¿™é‡Œå¤ç”¨äº†æŸ¥æ‰¾å‡½æ•°ï¼‰\nè‹¥æ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œåˆ™åˆ¤æ–­è´Ÿè½½å› å­çš„å æ¯”ã€‚è¿™é‡Œæˆ‘è®¾ç½®çš„è´Ÿè½½å› å­æ˜¯0.7ï¼Œè¶…è¿‡è¿™ä¸ªæ¯”ä¾‹çš„æ—¶å€™ï¼Œå°†ä¼šæ‰§è¡Œæ‰©å®¹æ“ä½œã€‚æ³¨æ„ï¼šæ‰©å®¹ä¹‹åæ˜ å°„çš„ä½ç½®ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹å·²æœ‰çš„æ•°æ®è¿›è¡Œé‡æ–°æ’å…¥ã€‚\næ‰©å®¹ï¼ˆæˆ–ä¸éœ€è¦æ‰©å®¹ï¼‰ç»“æŸåï¼Œæˆ‘ä»¬åˆ©ç”¨é¢„å…ˆå†™å¥½çš„ä»¿å‡½æ•°è·å–é“keyçš„hashå€¼ï¼Œæ‰¾åˆ°å¯¹åº”ä¸‹æ ‡ä½ç½®ã€‚è¿™é‡Œé‡‡ç”¨çº¿æ€§æ¢æµ‹çš„æ–¹æ³•ï¼Œå¦‚æœå½“å‰çš„ä¸‹æ ‡ä½ç½®å·²ç»æœ‰æ•°æ®äº†ï¼Œåˆ™å¾€åæŸ¥æ‰¾çŠ¶æ€å€¼ä¸ºEMPTY/DELETEçš„ä½ç½®ï¼Œå¹¶å°†æˆ‘ä»¬çš„æ•°æ®æ’å…¥åˆ°è¿™ä¸ªä½ç½®ä¸Šã€‚\næ’å…¥æˆåŠŸåï¼Œå°†çŠ¶æ€ä¿®æ”¹ä¸ºEXITSï¼Œreturn trueæ’å…¥ç»“æŸ\n\nbool Insert(const pair&lt;K, V&gt;&amp; kv)&#123;    if (Find(kv.first))//æ‰¾åˆ°äº†ç›¸åŒçš„é”®å€¼ï¼Œç›´æ¥é€€å‡ºï¼ˆè¯´æ˜å·²ç»æ’å…¥è¿‡äº†ï¼‰    &#123;        return false;    &#125;    // è´Ÿè½½å› å­åˆ°0.7åŠä»¥ä¸Šï¼Œå°±æ‰©å®¹ï¼ˆé¿å…å†²çªï¼‰    if (_tables.size() == 0 || _n * 10 / _tables.size() &gt;= 7)    &#123;        size_t newSize = _tables.size() == 0 ? 10 : _tables.size() * 2;        // æ‰©å®¹ä»¥åï¼Œéœ€è¦é‡æ–°æ˜ å°„        HashTable&lt;K, V, HashFunc&gt; newHT;        newHT._tables.resize(newSize);// æ‰©å®¹vector        // éå†æ—§è¡¨ï¼Œæ’å…¥newHT        for (auto&amp; e : _tables)        &#123;            if (e._state == EXITS)            &#123;                newHT.Insert(e._kv);            &#125;        &#125;        newHT._tables.swap(_tables);        //åˆ©ç”¨vectorçš„äº¤æ¢ï¼Œè¿™æ˜¯ä¸€ç§ç°ä»£å†™æ³•çš„æ·±æ‹·è´    &#125;    HashFunc hf;// ä»¿å‡½æ•°çš„å®ä¾‹åŒ–    size_t starti = hf(kv.first);    starti %= _tables.size();    size_t hashi = starti;    size_t i = 1;    // çº¿æ€§æ¢æµ‹/äºŒæ¬¡æ¢æµ‹    // çº¿æ€§æ¢æµ‹ä»£è¡¨æ˜¯è‡ªæ˜ å°„å€¼å¼€å§‹å¾€åä¾æ¬¡æ‰¾ä¸ºç©ºçš„ä½ç½®    // äºŒæ¬¡æ¢æµ‹æŒ‡è·³ç€æ‰¾ä¸ºç©ºçš„ä½ç½®    while (_tables[hashi]._state == EXITS)    &#123;        hashi = starti + i;        ++i;//ä¾æ¬¡æŸ¥æ‰¾ï¼Œä¸ºçº¿æ€§æ¢æµ‹        hashi %= _tables.size();    &#125;    _tables[hashi]._kv = kv;//æ’å…¥æ•°æ®    _tables[hashi]._state = EXITS;//ä¿®æ”¹çŠ¶æ€ç     _n++;//é•¿åº¦+1    return true;&#125;\n\n2.2 æŸ¥æ‰¾å’Œä¹‹å‰æ¨¡æ‹Ÿå®ç°çš„mapä¸€æ ·ï¼ŒæŸ¥æ‰¾å‡½æ•°æˆ‘ä»¬éœ€è¦è¿”å›ä¸€ä¸ªdataï¼Œä»¥ä¾¿ç”¨æˆ·ä¿®æ”¹value\nå› ä¸ºè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¼€æ”¾å®šå€æ³•ï¼Œæ²¡æœ‰è®¾ç½®æ¡¶ã€‚æ‰€ä»¥æŸ¥æ‰¾çš„æ“ä½œå’Œé¡ºåºè¡¨çš„æŸ¥æ‰¾æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚\n\nå½“æ˜ å°„å€¼çš„ä½ç½®å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„keyï¼Œç›´æ¥è¿”å›å½“å‰çš„ä½ç½®\nå½“å½“å‰æ˜ å°„å€¼çš„æ•°æ®ä¸æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„keyï¼Œè¯´æ˜è¿™ä¸ªåœ°æ–¹å‡ºç°äº†å†²çªã€‚è¿™æ—¶å€™æˆ‘ä»¬ç°éœ€è¦å¾€åæŸ¥æ‰¾ï¼ˆçº¿æ€§æ¢æµ‹ï¼Œä¾æ¬¡æŸ¥æ‰¾ï¼‰æŸ¥æ‰¾çš„æ—¶å€™éœ€è¦åˆ¤æ–­çŠ¶æ€ç \nå¦‚æœçŠ¶æ€ç ä¸ºEMPTYï¼Œåˆ™ä»£è¡¨åé¢æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¿”å›nullpträ»£æŒ‡æ‰¾ä¸åˆ°\nå¦‚æœçŠ¶æ€ç ä¸ºEXITSæˆ–è€…DELETEï¼Œè¯´æ˜åé¢è¿˜æœ‰å¯èƒ½æ‰¾åˆ°è¿™ä¸ªæ•°æ®æ‰¾åˆ°æ•°æ®åè¿”å›è¯¥æ•°æ®çš„å¼•ç”¨\n\n\nå¦‚æœéå†å®Œæ•´ä¸ªåˆ—è¡¨ï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°è¯¥æ•°æ®ï¼ŒåŒæ ·è¿”å›nullptr\n\nè¿™é‡Œå•ç‹¬è¯´æ˜DELETEï¼šåœ¨insertå’Œfindæ“ä½œä¹‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½æ‰§è¡Œäº†åˆ é™¤ï¼Œè¿™æ—¶å€™å°±æœ‰å¯èƒ½å¯¼è‡´åŸæœ¬çš„æ˜ å°„å€¼ä½ç½®å’Œçº¿æ€§æ¢æµ‹åçš„ä½ç½®ä¹‹ä¸­å‡ºç°äº†çŠ¶æ€ç ä¸ºDELETEçš„ä½ç½®ã€‚é‡åˆ°DELETEå¹¶ä¸ä»£è¡¨åé¢æ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æŸ¥æ‰¾ã€‚è¿™ç‚¹å’Œinsertçš„åˆ¤æ–­ä¸åŒã€‚\n\nä»£ç å®ç°å¦‚ä¸‹\n//æŸ¥æ‰¾Data* Find(const K&amp; key)&#123;    //ç©ºè¡¨    if (_tables.size() == 0)    &#123;        return nullptr;    &#125;    HashFunc hf;//ä»¿å‡½æ•°çš„å®ä¾‹    size_t starti = hf(key);//åˆ©ç”¨hashä»¿å‡½æ•°ç®—å‡ºèµ·å§‹å€¼    starti %= _tables.size();//è¿›è¡Œè†œå¤§å°ï¼Œè·å–é“æ˜ å°„å€¼    size_t hashi = starti;    size_t i = 1;    while (_tables[hashi]._state != EMPTY)    &#123;        if (_tables[hashi]._state != DELETE &amp;&amp; _tables[hashi]._kv.first == key)        &#123;            return &amp;_tables[hashi];        &#125;        hashi = starti + i;        ++i;//çº¿æ€§æ¢æµ‹        hashi %= _tables.size();    &#125;    return nullptr;&#125;\n\n2.3 åˆ é™¤åˆ é™¤æ“ä½œæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åˆ©ç”¨findæ‰¾åˆ°é”®å€¼åï¼Œç›´æ¥æŠŠè¿™ä¸ªä½ç½®çš„çŠ¶æ€ç æ”¹æˆDELETEå³å¯ï¼Œå¹¶ä¸éœ€è¦æ‰§è¡Œé‡Šæ”¾ç©ºé—´çš„æ“ä½œã€‚\nå¦‚æœæ²¡æœ‰è¿™ä¸ªé”®å€¼ï¼Œåˆ™è¿”å›false\n//åˆ é™¤ï¼Œæ‰¾åˆ°æ˜ å°„ä½ç½®ä¹‹åï¼Œç›´æ¥ä¿®æ”¹çŠ¶æ€ç ï¼Œè€Œä¸æ˜¯çœŸçš„åˆ é™¤è¿™ä¸ªå†…å®¹bool Erase(const K&amp; key)&#123;    Data* ret = Find(key);    if (ret)    &#123;        ret-&gt;_state = DELETE;        _n--;        return true;    &#125;    else    &#123;        return false;    &#125;&#125;\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","Cpp","å“ˆå¸Œ"]},{"title":"ã€C++ã€‘æ™ºèƒ½æŒ‡é’ˆ","url":"/posts/1282431418/","content":"ç»ˆäºæ¥å¡«å‘äº†ğŸ˜‚\n2022-10-19 -&gt; 2023-04-01\n\n1.æƒ…æ™¯å¯¹äºC&#x2F;C++è€Œè¨€ï¼Œå†…å­˜æ³„æ¼æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ã€‚æ¯æ¬¡è¿›è¡Œnewæ“ä½œä¹‹åï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹å…¶è¿›è¡Œå¯¹åº”çš„deleteï¼Œå·²é¿å…å†…å­˜æ³„æ¼ã€‚\nå¯ä»£ç ä¸€é•¿ï¼Œé€»è¾‘å¤æ‚èµ·æ¥äº†ï¼Œæƒ³å¤„ç†å°±æ²¡æœ‰é‚£ä¹ˆå®¹æ˜“äº†ã€‚\n1.1 ä»£ç å¤ªé•¿ï¼Œçœ‹ä¸åˆ°å¤´int main()&#123;\tint* arr1 = new int[10];\tint* arr2 = new int[10];\t//ä¸­é—´æœ‰è¶…çº§å¤šè¡Œä»£ç     delete arr1[];    delete arr2[];&#125;\n\næˆ‘ä»¬æ—¥å¸¸çš„å­¦ä¹ ï¼Œå¯èƒ½å†™çš„ä»£ç å¹¶ä¸æ˜¯å¾ˆå¤šã€‚ä½†å¦‚æœæ˜¯ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼Œnewå’Œdeleteä¹‹ä¸­å¯èƒ½éš”äº†æˆåƒä¸Šä¸‡è¡Œä»£ç ï¼Œé‚£æ—¶å€™è¿˜æƒ³å»æ‰¾è¿™ä¸ªå˜é‡çš„ä½ç½®ï¼Œå¯å°±ä¸é‚£ä¹ˆå¥½æ‰¾äº†ã€‚æå…¶å®¹æ˜“å‡ºç°å¿˜è®°deleteçš„æƒ…å†µ\n1.2 å¼‚å¸¸å®‰å…¨int func(int a,int b)&#123;    if(b==0)    &#123;        throw invalid_argument(&quot;é™¤0é”™è¯¯&quot;);    &#125;    return a/b;&#125;void test()&#123;    int* arr1 = new int[10];\tint* arr2 = new int[10];\tfunc(1,0);//æŠ›å¼‚å¸¸    delete[] arr1;    delete[] arr2;&#125;int main()&#123;\ttry&#123;         test();    &#125;   \tcatch(...)&#123;        cout &lt;&lt;&quot;å‡ºç°å¼‚å¸¸&quot;&lt;&lt;endl;    &#125;    return 0;&#125;\n\nå¦‚ä¸Šé¢çš„ä»£ç ï¼Œåœ¨testå‡½æ•°ä¸­ï¼Œè°ƒç”¨äº†å¦å¤–ä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°æŠ›å‡ºäº†å¼‚å¸¸ï¼Œåç»­çš„deleteæ“ä½œä¸ä¼šè¢«æ‰§è¡Œï¼Œå‡ºç°å†…å­˜æ³„æ¼ã€‚\nå¦‚æœæ“ä½œçš„å †åŒºå˜é‡è¾ƒå°‘ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nint func(int a,int b)&#123;    if(b==0)    &#123;        throw invalid_argument(&quot;é™¤0é”™è¯¯&quot;);    &#125;    return a/b;&#125;void test()&#123;    int* arr1 = new int[10];\tint* arr2 = new int[10];\ttry&#123;        func(1,0);//æŠ›å¼‚å¸¸    &#125;    catch(...)&#123;//æ¥ç®¡å¼‚å¸¸    \t// é”€æ¯        delete[] arr1;    \tdelete[] arr2;        throw;// åŸæ ·æŠ›å‡º    &#125;    delete[] arr1;    delete[] arr2;&#125;int main()&#123;\ttry&#123;         test();    &#125;   \tcatch(...)&#123;        cout &lt;&lt;&quot;å‡ºç°å¼‚å¸¸&quot;&lt;&lt;endl;    &#125;    return 0;&#125;\n\nä½†æ˜¯ï¼Œè¿™æ ·å¹¶ä¸èƒ½å®Œå…¨è§£å†³é—®é¢˜ï¼Œå› ä¸ºnewå‡½æ•°æœ¬èº«ä¹Ÿæœ‰å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼\nvoid test()&#123;    int* arr1 = new int[10];\tint* arr2 = new int[10];//è¿™é‡ŒæŠ›å¼‚å¸¸äº†    // æ­¤æ—¶æ— æ³•è¢«æ¥ç®¡ï¼    // arr1æ²¡æœ‰è¢«ææ„ï¼Œå‡ºç°å†…å­˜æ³„æ¼    \ttry&#123;        func(1,0);//æŠ›å¼‚å¸¸    &#125;    catch(...)&#123;//æ¥ç®¡å¼‚å¸¸    \t// é”€æ¯        delete[] arr1;    \tdelete[] arr2;        throw;// åŸæ ·æŠ›å‡º    &#125;    delete[] arr1;    delete[] arr2;&#125;\n\næŠŠnewä¹Ÿä¸¢åˆ°tryé‡Œé¢ï¼Ÿä¾æ—§ä¸è¡Œï¼ˆè¯¦è§æ³¨é‡Šï¼‰\nvoid test()&#123;    try&#123;        int* arr1 = new int[10];        int* arr2 = new int[10];//è¿™é‡ŒæŠ›å¼‚å¸¸äº†        int* arr3 = new int[10];\t        func(1,0);//æŠ›å¼‚å¸¸    &#125;    catch(...)&#123;    \t// ä½ ä¸çŸ¥é“å“ªä¸€ä¸ªå‡ºäº†å¼‚å¸¸ï¼        // å‡è®¾arr2å‡ºå¼‚å¸¸ï¼Œarr2å’Œarr3éƒ½æ²¡æœ‰ç”³è¯·ç©ºé—´æˆåŠŸ        // æ€ä¹ˆè¿›è¡Œé”€æ¯ï¼Ÿ        delete[] arr1;    \tdelete[] arr2;        delete[] arr3;        throw;// åŸæ ·æŠ›å‡º    &#125;    delete[] arr1;    delete[] arr2;    delete[] arr3;&#125;\n\nè€Œä¸”ï¼Œå¦‚æœéœ€è¦æ“ä½œçš„newå˜é‡å¾ˆå¤šï¼Œé‚£ä¹ˆåœ¨catché‡Œé¢å°±éœ€è¦åŠ ä¸Šå¤šä¸ªdeleteï¼Œä»£ç å°±æ˜¾å¾—è¿‡äºé‡å¤äº†ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒC++å¼•å…¥äº†æ™ºèƒ½æŒ‡é’ˆ\n2.æ™ºèƒ½æŒ‡é’ˆ2.1 RAIIRAII - Resource Acquisition is Initialization\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRAIIæ˜¯ä¸€ç§æ€æƒ³ï¼Œå¹¶ä¸èƒ½ç”¨å®ƒæ¥æŒ‡ä»£æ™ºèƒ½æŒ‡é’ˆ\nRAII != æ™ºèƒ½æŒ‡é’ˆ\n\nå®ƒæ˜¯ä¸€ç§åˆ©ç”¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ¥æ§åˆ¶ç¨‹åºèµ„æºï¼ˆå†…å­˜ã€æ–‡ä»¶å¥æŸ„ã€ç½‘ç»œé“¾æ¥ã€äº’æ–¥é‡ç­‰ï¼‰çš„æŠ€æœ¯\n\nåªè¦æ˜¯ä¸¤æ­¥æ“ä½œçš„ï¼Œéœ€è¦ç”³è¯·+é‡Šæ”¾çš„èµ„æºï¼Œéƒ½å¯ä»¥ä½¿ç”¨RAIIçš„æ€æƒ³æ¥è¿›è¡Œå¤„ç†ã€‚æ¯”å¦‚è‡ªå·±å°è£…ä¸€ä¸ªè‡ªåŠ¨å¤„ç†pthread_mutexé”çš„initå’Œdestoryçš„ç±»\n\nè¯´äººè¯å°±æ˜¯ï¼Œåœ¨å¯¹è±¡æ„é€ çš„æ—¶å€™è·å–èµ„æºï¼Œææ„çš„æ—¶å€™é‡Šæ”¾èµ„æºã€‚\n\nåœ¨å¯¹è±¡ç”Ÿå‘½å‘¨æœŸåˆ°äº†ä¹‹åï¼Œä¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨é‡Šæ”¾èµ„æºorå¿˜è®°é‡Šæ”¾çš„ç¹ç\nèµ„æºåœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…å§‹ç»ˆæœ‰æ•ˆ\n\nåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨æ™ºèƒ½æŒ‡é’ˆæ¥ç®¡ç†å †åŒºç©ºé—´\n3.demo3.1 åŸºç¡€ç¤ºä¾‹åœ¨è®¤è¯†ä¸åŒç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆä¹‹å‰ï¼Œå…ˆæ¥çœ‹ä¸ªæœ€ç®€å•çš„demo\n#pragma oncenamespace mu &#123;\tusing std::cout;\tusing std::endl;\ttemplate&lt;class T&gt;\tclass SmartPtr\t&#123;\tpublic:\t\tSmartPtr(T* ptr)\t\t\t:_ptr(ptr)\t\t&#123;\t\t\tcout &lt;&lt; &quot;init &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;\t\t&#125;\t\t~SmartPtr()\t\t&#123;\t\t\tcout &lt;&lt; &quot;des  &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;\t\t\tdelete[] _ptr;\t\t&#125;\tprivate:\t\tT* _ptr;\t&#125;;&#125;\n\nä¸Šé¢å®ç°çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„æ™ºèƒ½æŒ‡é’ˆã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†å †åŒºä¸Šçš„æ•°ç»„ã€‚\n#define _CRT_SECURE_NO_WARNINGS 1//#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &quot;demo.hpp&quot;using namespace std;void test1()&#123;\tmu::SmartPtr&lt;int&gt; p1(new int[10]);\tmu::SmartPtr&lt;char&gt; p4(new char[10]);\tmu::SmartPtr&lt;double&gt; p3(new double[10]);\tcout &lt;&lt; &quot;test&quot; &lt;&lt; endl;&#125;int main()&#123;\ttest1();\treturn 0;&#125;\n\nè¿è¡Œåï¼Œè¾“å‡ºçš„ç»“æœå¦‚ä¸‹\ninit 006697A8init 006724D0init 00668860testdes  00668860des  006724D0des  006697A8\n\nå…¶å®ç°äº†åœ¨æ„é€ ä¸­æ‰˜ç®¡ï¼Œåœ¨ææ„ä¸­é”€æ¯èµ„æºçš„æ“ä½œã€‚\n\nå³ä¾¿æŠ›å‡ºå¼‚å¸¸ï¼Œä¾æ—§èƒ½æ­£å¸¸ææ„\n#include &lt;iostream&gt;#include &quot;demo.hpp&quot;using namespace std;int func(int a, int b)&#123;\tif (b == 0)\t&#123;\t\tthrow invalid_argument(&quot;é™¤0é”™è¯¯&quot;);\t&#125;\treturn a / b;&#125;void test1()&#123;\tmu::SmartPtr&lt;int&gt; p1(new int[10]);\tmu::SmartPtr&lt;char&gt; p2(new char[10]);\tmu::SmartPtr&lt;double&gt; p3(new double[10]);\tcout &lt;&lt; &quot;test1&quot; &lt;&lt; endl;\ttry &#123;\t\tfunc(3, 0);\t&#125;\tcatch(...)&#123;\t\tthrow;\t&#125;\t\tcout &lt;&lt; &quot;test2&quot; &lt;&lt; endl;&#125;int main()&#123;\ttry &#123;\t\ttest1();\t&#125;\tcatch (...)\t&#123;\t\tcout &lt;&lt; &quot;mian  å‡ºç°å¼‚å¸¸&quot; &lt;&lt; endl;\t&#125;\treturn 0;&#125;\n\næ³¨æ„ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸åˆä¸è¿›è¡Œcatchï¼Œç¨‹åºä¼šè¢«abortç»ˆæ­¢ï¼Œæ— æ³•è§‚æµ‹åˆ°ç°è±¡ã€‚\nä»¥ä¸‹æ˜¯è¿è¡Œçš„ç»“æœï¼Œå¯ä»¥çœ‹åˆ°å¼‚å¸¸å‡ºç°åï¼Œèµ°åˆ°äº†test1å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸæœ«å°¾ï¼Œé‡Šæ”¾äº†3ä¸ªæŒ‡é’ˆï¼Œæ‰è¢«mainä¸­çš„catchæ•è·\ninit 012B8F00init 012C3010init 012B8860test1des  012B8860des  012C3010des  012B8F00mian  å‡ºç°å¼‚å¸¸\n\n3.2 è¿ç®—ç¬¦é‡è½½å½“ç„¶ï¼Œè¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆè¿˜æ˜¯å´å°‘å¾ˆå¤šä¸œè¥¿çš„\n\nå†™æ­»äº†delete[]ï¼Œæˆ‘åªæƒ³è®©å¥¹ç®¡ç†å•ä¸ªå˜é‡æ€ä¹ˆåŠï¼Ÿ\nå¦‚ä½•è·å–æŒ‡é’ˆå†…çš„èµ„æºï¼Ÿ\n\nç¬¬ä¸€ä¸ªé—®é¢˜æˆ‘ä»¬æš‚ä¸”ä¸æï¼ˆåç»­è®²è§£åº“ä¸­æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™ä¼šè¯´æ˜ï¼‰ç¬¬äºŒä¸ªé—®é¢˜çš„ç­”æ¡ˆä¾¿æ˜¯ï¼šé‡è½½*å’Œ-&gt;æ“ä½œç¬¦\nT&amp; operator*()&#123;    return *_ptr;&#125;T* operator-&gt;()&#123;    return _ptr;&#125;T&amp; operator[](const T&amp; n)&#123;    return _ptr[n];&#125;\n\né‡è½½äº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ“ä½œç±»å†…çš„æŒ‡é’ˆæˆå‘˜äº†\nvoid test1()&#123;\tmu::SmartPtr&lt;int&gt; p1(new int[10]);\tmu::SmartPtr&lt;char&gt; p2(new char[10]);\tmu::SmartPtr&lt;double&gt; p3(new double[10]);\tcout &lt;&lt; &quot;test&quot; &lt;&lt; endl;\tp2[0] = &#x27;a&#x27;;\tp2[1] = &#x27;b&#x27;;\tp2[2] = &#x27;\\0&#x27;;\tcout &lt;&lt; p2[0] &lt;&lt;&quot; &quot;&lt;&lt; p2[1] &lt;&lt; endl;\tcout &lt;&lt; *p2 + 1 &lt;&lt; endl;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\ninit 01661C30init 01671748init 016689B8testa b98des  016689B8des  01671748des  01661C30\n\n3.3 æ‹·è´å¯¹äºæ™ºèƒ½æŒ‡é’ˆè€Œè¨€ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜æ˜¯é’ˆå¯¹æ‹·è´çš„ã€‚åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æŒ‡é’ˆè¿›è¡Œæ‹·è´ï¼Œè¿™æ—¶å€™å°±ä¼šå‡ºç°å¼‚å¸¸\nvoid test3()&#123;\tmu::SmartPtr&lt;int&gt; p1(new int[10]);\tmu::SmartPtr&lt;int&gt; p2(p1);&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\ninit 00BBFB20des  00BBFB20des  00BBFB20\n\nç¼–è¯‘å™¨æŠ¥é”™äº†\n\nåŸå› å°±æ˜¯ï¼Œé»˜è®¤çš„æ‹·è´æ„é€ ä½¿ç”¨çš„æ˜¯æµ…æ‹·è´ï¼Œå†ææ„çš„æ—¶å€™ï¼Œä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆå¯¹åŒä¸€ä¸ªåœ°å€ææ„ï¼Œç›¸å½“äºææ„äº†ä¸¤æ¬¡ï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼\næ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬çœ‹çœ‹cppåº“ä¸­æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å§ï¼\n4.auto_pträ¸ºäº†é¿å…æ‹·è´çš„æ—¶å€™ï¼Œå¯¼è‡´å¤šæ¬¡ææ„ï¼ŒC++98åº“å‡½æ•°ä¸­æä¾›äº†auto_ptrã€‚åœ¨æ‹·è´çš„æ—¶å€™ï¼Œauto_ptré‡‡ç”¨çš„æ˜¯ç®¡ç†æƒè½¬ç§»çš„æ€è·¯\nauto_ptr&lt;int&gt;  sp1(new int);//æ— æ³•ç»§ç»­ä½¿ç”¨auto_ptr&lt;int&gt;  sp2 = sp1;//sp2æ¥ç®¡äº†sp1\n\nå½“æˆ‘ä»¬è¿™æ ·æ“ä½œäº†ä¹‹åï¼Œsp1å¯¹è±¡å°†ä¸èƒ½å†è¢«ä½¿ç”¨ï¼Œå…¶å†…ç½®æŒ‡é’ˆä¼šè¢«ç½®ä¸ºnullptrï¼Œä½¿ç”¨ç›¸å½“äºè§£å¼•ç”¨ç©ºæŒ‡é’ˆï¼\nå› ä¸ºè¿™ä¸ªæ“ä½œå®åœ¨å¤ªå‘äººäº†ï¼Œå¦‚æœåœ¨æŸäº›å‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œè¿›è¡Œå€¼æ‹·è´äº†ï¼Œå°±ä¼šå¯¼è‡´åŸæœ‰çš„æŒ‡é’ˆå¤±æ•ˆï¼Œä»è€Œå¼•å‘ç¨‹åºé”™è¯¯ã€‚\næ‰€ä»¥ï¼Œåœ¨C++11ä¹‹åï¼Œåº”é¿å…ä½¿ç”¨auto_ptrï¼ˆä¸€äº›å…¬å¸ä¼šæ˜ä»¤ç¦æ­¢ä½¿ç”¨ï¼‰\n5.unique_ptr\nåœ¨booståº“ä¸­ï¼Œæœ‰ä¸€ä¸ªscpoed_ptrï¼Œå…¶å°±æ˜¯unique_ptrçš„å‰èº«\n\nuniqueçš„åšæ³•æ›´ç»ï¼Œæ—¢ç„¶æ‹·è´ä¼šå‡ºç°é—®é¢˜ï¼Œé‚£æˆ‘ç›´æ¥ä¸å…è®¸ä½ æ‹·è´ä¸å°±è¡Œäº†ï¼Ÿ\nç›´æ¥å°†æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½ç»™deleteäº†ï¼Œå³ç¦æ­¢å¯¹æ–¹ä½¿ç”¨æ‹·è´ã€‚\nunique_ptr(const unique_ptr&lt;T&gt;&amp; n) = delete;unique_ptr&lt;T&gt;&amp; operator=(const unique_ptr&lt;T&gt;&amp; n) = delete;\n\nå¦‚æœæ˜¯C++11ä¹‹å‰ï¼Œå¯ä»¥é‡‡ç”¨åªå£°æ˜ä¸å®ç°çš„æ–¹å¼æ¥ç¦ç”¨æ‹·è´æ„é€ ã€‚ä¸ºäº†é¿å…ä½¿ç”¨è€…è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶é…ç½®ä¸ºç§æœ‰ã€‚\nprivate://åªå£°æ˜ä¸å®ç°  unique_ptr(const unique_ptr&lt;T&gt;&amp; n);  unique_ptr&lt;T&gt;&amp; operator=(const unique_ptr&lt;T&gt;&amp; n);\n\nè™½ç„¶unique_pträ»æºå¤´è§£å†³äº†æ‹·è´çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼šåŠŸèƒ½ä¸å…¨ã€‚\nå¦‚æœæˆ‘çœŸçš„éœ€è¦æ‹·è´å‘¢ï¼Ÿä½ è¿™ä¸ªå²‚ä¸æ˜¯ç”¨ä¸äº†å‘€ã€‚\n6.shared_ptrshareå³åˆ†äº«ï¼Œè¿™ä¸ªæ™ºèƒ½æŒ‡é’ˆæ˜¯æ”¯æŒæ‹·è´çš„ã€‚é‚£å®ƒåº”è¯¥å¦‚ä½•è§£å†³åŒä¸€ç‰‡ç©ºé—´è¢«é‡Šæ”¾å¤šæ¬¡çš„é—®é¢˜å‘¢ï¼Ÿ\n6.1 å¼•ç”¨è®¡æ•°ä¸ºäº†ä¿è¯èµ„æºåªä¼šè¢«é‡Šæ”¾ä¸€æ¬¡ï¼Œå…¶é‡‡ç”¨äº†å¼•ç”¨è®¡æ•°çš„æ–¹å¼æ¥å®ç°ã€‚\n\nåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°ä¸º1\næ¯æ¬¡æ‹·è´ï¼Œå¼•ç”¨è®¡æ•°éƒ½+1ï¼ˆåŒ…æ‹¬æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½ï¼‰\nææ„çš„æ—¶å€™ï¼Œå¼•ç”¨è®¡æ•°ä¸ä¸º1ï¼Œå°†è®¡æ•°å™¨-1\nåªæœ‰å¼•ç”¨è®¡æ•°ä¸º1ï¼Œæ‰åœ¨ææ„çš„æ—¶å€™é‡Šæ”¾èµ„æº\n\nè¿™æ ·å°±è§£å†³äº†è¢«ææ„å¤šæ¬¡çš„é—®é¢˜ï¼\n6.2 å¦‚ä½•å®ç°ï¼Ÿ\nç›´æ¥ä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡ï¼Ÿ\n\nä¸è¡Œï¼Œä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹ä¸å½±å“ç¬¬äºŒä¸ªå¯¹è±¡çš„æˆå‘˜ï¼Œä¾æ—§ä¼šå‡ºç°ææ„å¤šæ¬¡çš„é—®é¢˜ã€‚\n\nä½¿ç”¨staticæˆå‘˜ï¼Ÿ\n\nstaticæˆå‘˜å±äºæ•´ä¸ªç±»ï¼Œè¿™æ ·å¼„ç›¸å½“äºç»™è¿™ä¸ªç±»åŠ äº†ä¸ªå·²æœ‰å¯¹è±¡æ•°é‡çš„è®¡æ•°å™¨ï¼Œå—è¾•åŒ—è¾™ã€‚\nT* _ptr;int* _pcount;//è®¡æ•°å™¨\n\næˆ‘ä»¬åªéœ€è¦åœ¨å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªintç±»å‹çš„æŒ‡é’ˆï¼Œåœ¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œç»™è¿™ä¸ªæŒ‡é’ˆåˆ›å»ºå †åŒºçš„intç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º1\nè¿™æ ·æ¯æ¬¡æ‹·è´ã€èµ‹å€¼çš„æ—¶å€™ï¼Œéƒ½ç»™è¿™ä¸ªpcountæŒ‡å‘çš„intç»™+1\n(*_pcount)++\n\næ¯æ¬¡ææ„çš„æ—¶å€™éƒ½-1ï¼Œåªæœ‰ä¸º0çš„æ—¶å€™ï¼Œæ‰è¿›è¡Œèµ„æºé‡Šæ”¾ã€‚åŒæ—¶é‡Šæ”¾æŒ‡é’ˆæ‰˜ç®¡çš„èµ„æºï¼Œå’Œpcount\n(*_pcount)--;//å…ˆå°†è‡ªå·±çš„-1if((*_pcount==0))//å¦‚æœä¸º0ï¼Œåˆ™ä»£è¡¨è‡ªå·±æ˜¯æœ€åä¸€ä¸ª&#123;//é‡Šæ”¾è‡ªå·±çš„èµ„æº    delete _ptr;    delete _pcount;&#125;\n\n6.3 èµ‹å€¼èµ‹å€¼æœ‰ä¸¤ç§æƒ…å†µ\nshared_ptr&lt;int&gt; sp1(new int(1));shared_ptr&lt;int&gt; sp2; sp2 = sp1;//æƒ…å†µ1shared_ptr&lt;int&gt; sp3(new int(3));sp1 = sp3;//æƒ…å†µ2shared_ptr&lt;int&gt; sp4 = sp1;//å®é™…ä¸Šè°ƒç”¨çš„æ˜¯æ‹·è´æ„é€  \n\nç¬¬ä¸€ç§ æ˜¯å¯¹è±¡æ²¡æœ‰åˆå§‹åŒ–ï¼Œè°ƒç”¨äº†é»˜è®¤æ— å‚æ„é€ å‡½æ•°ï¼Œå…¶å†…éƒ¨æ‰˜ç®¡çš„æŒ‡é’ˆæ˜¯nullptrï¼Œsp2=sp1ï¼Œç›¸å½“äºæ˜¯åˆå§‹åŒ–sp2å¯¹è±¡ã€‚\nç¬¬äºŒç§ æ˜¯å¯¹è±¡å·²ç»åˆå§‹åŒ–äº†ï¼Œä½†æ˜¯æˆ‘æƒ³è®©ä»–ç®¡ç†å¦å¤–ä¸€ä»½èµ„æºã€‚\n\né’ˆå¯¹æƒ…å†µ1ï¼Œæ“ä½œå’Œæ‹·è´æ„é€ ç›¸åŒï¼Œæˆ‘ä»¬åªéœ€è¦èµ‹å€¼ç»™sp2åï¼Œå°†å¼•ç”¨è®¡æ•°åŠ +1å³å¯\né’ˆå¯¹æƒ…å†µ2ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ¤æ–­sp1çš„æƒ…å†µäº†ã€‚å¦‚æœsp1çš„å¼•ç”¨è®¡æ•°ä¸º1ï¼Œåˆ™éœ€è¦å…ˆé”€æ¯sp1æ‰˜ç®¡çš„ç©ºé—´ï¼Œå†è¿›è¡Œèµ‹å€¼ã€‚å¹¶å°†sp3çš„å¼•ç”¨è®¡æ•°èµ‹å€¼ç»™sp1ï¼Œå¹¶å°†sp3çš„å¼•ç”¨è®¡æ•°+1\n\nè½åˆ°ä»£ç ä¸Šï¼Œåº”è¯¥å¦‚ä¸‹\nshared_ptr&lt;T&gt;&amp; operator=(const shared_ptr&lt;T&gt;&amp; p)&#123;    if(p._ptr == _ptr)//æŒ‡å‘çš„ç©ºé—´ç›¸åŒ    &#123;        return *this;//å•¥éƒ½ä¸åš    &#125;    (*_pcount)--;//å…ˆå°†è‡ªå·±çš„-1    if((*_pcount==0))//å¦‚æœä¸º0ï¼Œåˆ™ä»£è¡¨è‡ªå·±æ˜¯æœ€åä¸€ä¸ª    &#123;//é‡Šæ”¾è‡ªå·±çš„èµ„æº        delete _ptr;        delete _pcount;    &#125;    //èµ‹å€¼å¯¹æ–¹çš„èµ„æº    _ptr = p._ptr;    _pcount = p._pcount;    (*_pcount)++;//å¼•ç”¨è®¡æ•°+1        return *this;&#125;\n\n6.4 ç®€å•å®ç°åº“ä¸­çš„å®ç°æ›´ä¸ºå¤æ‚ï¼Œå…¶è¿˜é‡è½½äº†&lt;&lt;æ“ä½œç¬¦ï¼Œå®ç°äº†æ›´å¤šæˆå‘˜å‡½æ•°\ntemplate&lt;class T&gt;   class shared_ptr   &#123;       public:           shared_ptr(T* ptr = nullptr)               :_ptr(ptr),           _pcount(new int(1))           &#123;               cout &lt;&lt; &quot;[init] &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;           &#125;           //æ‹·è´æ„é€            shared_ptr(const shared_ptr&lt;T&gt;&amp; p)           &#123;               cout &lt;&lt; &quot;[copy] &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;               _ptr = p._ptr;               _pcount = p._pcount;               (*_pcount)++;//å¼•ç”¨è®¡æ•°+1           &#125;           //èµ‹å€¼é‡è½½           shared_ptr&lt;T&gt;&amp; operator=(const shared_ptr&lt;T&gt;&amp; p)           &#123;               cout &lt;&lt; &quot;[operator=] &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;               if (p._ptr == _ptr)//æŒ‡å‘çš„ç©ºé—´ç›¸åŒ               &#123;                   return *this;//å•¥éƒ½ä¸åš               &#125;               //é‡Šæ”¾è‡ªå·±çš„èµ„æºï¼ˆåˆ¤æ–­ï¼‰               _Release();               //èµ‹å€¼å¯¹æ–¹çš„èµ„æº               _ptr = p._ptr;               _pcount = p._pcount;               (*_pcount)++;//å¼•ç”¨è®¡æ•°+1               return *this;           &#125;           T&amp; operator*()           &#123;               return *_ptr;           &#125;           T* operator-&gt;()           &#123;               return _ptr;           &#125;           T&amp; operator[](const T&amp; n)           &#123;               return _ptr[n];           &#125;       \tT* get()           &#123;               return _ptr;           &#125;           ~shared_ptr()           &#123;               _Release();           &#125;       private:           void _Release()           &#123;               (*_pcount)--;               cout &lt;&lt; &quot;[des] pcount:&quot; &lt;&lt; (*_pcount) &lt;&lt; &quot; ptr:&quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;               if ((*_pcount) == 0)               &#123;                   cout &lt;&lt; &quot;[des] delete &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl; // å¦‚æœé‡Šæ”¾äº†èµ„æºï¼Œä¼šæ‰“å°è¿™ä¸ª                   if(_ptr)//_pträ¸ä¸ºç©ºçš„æ—¶å€™æ‰é‡Šæ”¾å®ƒ                       delete _ptr;                   //æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½éœ€è¦åˆ é™¤è®¡æ•°å™¨ï¼Œå¦åˆ™ä¼šæœ‰å†…å­˜æ³„æ¼                   delete _pcount;               &#125;           &#125;       T* _ptr;       int* _pcount;//å¼•ç”¨è®¡æ•°   &#125;;\n\n6.5 æµ‹è¯•ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•\nvoid test4()&#123;\tmu::shared_ptr&lt;int&gt; p1(new int(10));\tmu::shared_ptr&lt;int&gt; p2(p1);\tmu::shared_ptr&lt;int&gt; p3 = p1;//å®é™…ä¸Šè°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ \tcout &lt;&lt; &quot;p1 &quot; &lt;&lt; (*p1) &lt;&lt; endl;\tcout &lt;&lt; &quot;p2 &quot; &lt;&lt; (*p2) &lt;&lt; endl;\tcout &lt;&lt; &quot;p3 &quot; &lt;&lt; (*p3) &lt;&lt; endl;\tmu::shared_ptr&lt;int&gt; p4;\tp4 = p1;\tcout &lt;&lt; &quot;p4 &quot; &lt;&lt; (*p4) &lt;&lt; endl;\tmu::shared_ptr&lt;int&gt; p5(new int(20));\tp1 = p5;\tcout &lt;&lt; &quot;p1 &quot; &lt;&lt; (*p1) &lt;&lt; endl;\tcout &lt;&lt; &quot;p5 &quot; &lt;&lt; (*p5) &lt;&lt; endl;&#125;\n\nè¿è¡Œçš„ç»“æœå¦‚ä¸‹\n[init] 00BE0B10[copy] 00000000[copy] 00000000p1 10p2 10p3 10[init] 00000000[operator=] 00000000[des] pcount:0 ptr:00000000[des] delete 00000000p4 10[init] 00BD8B30[operator=] 00BE0B10[des] pcount:3 ptr:00BE0B10p1 20p5 20[des] pcount:1 ptr:00BD8B30[des] pcount:2 ptr:00BE0B10[des] pcount:1 ptr:00BE0B10[des] pcount:0 ptr:00BE0B10[des] delete 00BE0B10[des] pcount:0 ptr:00BD8B30[des] delete 00BD8B30\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡ææ„ï¼Œå®é™…ä¸Šéƒ½ä¼šå…ˆå¯¹å¼•ç”¨è®¡æ•°è¿›è¡Œ-1çš„æ“ä½œï¼Œåªæœ‰å¼•ç”¨è®¡æ•°ä¸º0çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šçœŸçš„ææ„æ‰å¯¹åº”çš„å€¼ã€‚\nèµ‹å€¼çš„æ—¶å€™ï¼Œä¹Ÿæ²¡æœ‰å‡ºç°å†…å­˜æ³„æ¼çš„é—®é¢˜ï¼\nvoid test5()&#123;\tmu::shared_ptr&lt;int&gt; p1(new int(10));\tmu::shared_ptr&lt;int&gt; p2(new int(20));\tcout &lt;&lt; &quot;p1 &quot; &lt;&lt; (*p1) &lt;&lt; endl;\tcout &lt;&lt; &quot;p2 &quot; &lt;&lt; (*p2) &lt;&lt; endl;\tp1 = p2;\tcout &lt;&lt; &quot;p1 &quot; &lt;&lt; (*p1) &lt;&lt; endl;\tcout &lt;&lt; &quot;p2 &quot; &lt;&lt; (*p2) &lt;&lt; endl;&#125;\n\np2åœ¨èµ‹å€¼ç»™p1ä¹‹å‰ï¼Œå…ˆææ„äº†p1ç»´æŠ¤çš„å˜å…ƒï¼Œæ‰è¿›è¡Œäº†èµ‹å€¼æ“ä½œ\n[init] 014DF1B8[init] 014D89A8p1 10p2 20[operator=] 014DF1B8[des] pcount:0 ptr:014DF1B8[des] delete 014DF1B8p1 20p2 20[des] pcount:1 ptr:014D89A8[des] pcount:0 ptr:014D89A8[des] delete 014D89A8\n\n6.6 çº¿ç¨‹å®‰å…¨é—®é¢˜åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å¤šçº¿ç¨‹å¯¹è¯¥æŒ‡é’ˆè¿›è¡Œæ‹·è´çš„é—®é¢˜ã€‚ä¸ºäº†é¿å…å¼•ç”¨è®¡æ•°pcountåœ¨å¤šçº¿ç¨‹æ‹·è´çš„æ—¶å€™å‡ºç°äºŒä¹‰æ€§é—®é¢˜ï¼Œéœ€è¦å¯¹å¼•ç”¨è®¡æ•°çš„æ“ä½œè¿›è¡ŒåŠ é”\nè¯¦è§ https://blog.musnow.top/posts/1249427441/ çš„ 12.shared_ptr\n6.7 å¾ªç¯å¼•ç”¨é—®é¢˜shared_ptrçš„å¼•ç”¨è®¡æ•°å¯èƒ½ä¼šå‡ºç°å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå®ƒéœ€è¦ç”¨weak_ptræ¥è§£å†³ã€‚åæ–‡ä¼šæåˆ°\n7.weak_ptr7.1 ç®€ä»‹è¿™ä¸ªæŒ‡é’ˆæ˜¯ä¸“é—¨ç”¨æ¥è¾…åŠ©è§£å†³shared_ptrå¾ªç¯å¼•ç”¨é—®é¢˜çš„ï¼Œå¯ä»¥è®¤ä¸ºå®ƒæ˜¯shared_ptrçš„å°å¼Ÿã€‚\n//default (1)\tconstexpr weak_ptr() noexcept;//copy (2)\tweak_ptr (const weak_ptr&amp; x) noexcept;template &lt;class U&gt; weak_ptr (const weak_ptr&lt;U&gt;&amp; x) noexcept;//from shared_ptr (3)\ttemplate &lt;class U&gt; weak_ptr (const shared_ptr&lt;U&gt;&amp; x) noexcept;//copy (1)\tweak_ptr&amp; operator= (const weak_ptr&amp; x) noexcept;template &lt;class U&gt; weak_ptr&amp; operator= (const weak_ptr&lt;U&gt;&amp; x) noexcept;//from shared_ptr (2)\ttemplate &lt;class U&gt; weak_ptr&amp; operator= (const shared_ptr&lt;U&gt;&amp; x) noexcept;\n\nç›¸æ¯”äºå…¶ä»–æ™ºèƒ½æŒ‡é’ˆçš„æ„é€ å‡½æ•°ï¼Œweak_ptråªèƒ½è¿›è¡Œæ‹·è´ï¼Œæˆ–ä»ä¸€ä¸ªshared_ptræ¥æ„é€ ã€‚\nå®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ï¼šåªæ‰˜ç®¡èµ„æºï¼Œä¸å¤„ç†å¼•ç”¨è®¡æ•°ï¼Œææ„æ—¶ä¹Ÿä¸è¿›è¡Œèµ„æºé‡Šæ”¾ã€‚å¯ä»¥è®¤ä¸ºï¼Œå®ƒåªæ˜¯å¯¹æŒ‡é’ˆè¿›è¡Œäº†ç®€å•çš„å°è£…ã€‚\nè¿™ä¸ªç‰¹æ€§ä¹Ÿå†³å®šäº†ï¼Œweak_pträ¸èƒ½ä½¿ç”¨åŸç”ŸæŒ‡é’ˆæ¥æ„é€ ï¼\n7.2 ä»€ä¹ˆæ˜¯å¾ªç¯å¼•ç”¨struct ListNode&#123;\tListNode* _prev;\tListNode* _next;\tT _val;\tListNode(const T&amp; val=T())\t\t:_prev(nullptr),\t\t_next(nullptr),\t\t_val(val)\t&#123;\t\tcout &lt;&lt; &quot;[ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;\t~ListNode()\t&#123;\t\tcout &lt;&lt; &quot;[~ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;&#125;;void test6()&#123;\tmu::shared_ptr&lt;ListNode&lt;int&gt;&gt; p1(new ListNode&lt;int&gt;(10));\tmu::shared_ptr&lt;ListNode&lt;int&gt;&gt; p2(new ListNode&lt;int&gt;(20));\t&#125;\n\nä¸Šé¢è¿™ä¸ªä»£ç æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„åŒé“¾è¡¨ï¼Œåœ¨æ²¡æœ‰ç»™é“¾è¡¨å†…èŠ‚ç‚¹èµ‹å€¼ä¹‹å‰ï¼Œå®ƒæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆèƒ½æˆåŠŸè°ƒç”¨å¯¹è±¡çš„ææ„ï¼Œå¹¶é”€æ¯ç©ºé—´\n[ListNode()] 00DE10E0[init] 00DE10E0[ListNode()] 00DE14D0[init] 00DE14D0[des] pcount:0 ptr:00DE14D0[des] delete 00DE14D0[~ListNode()] 00DE14D0[des] pcount:0 ptr:00DE10E0[des] delete 00DE10E0[~ListNode()] 00DE10E0\n\n\nä½†å¦‚æœæƒ³è¦å°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹é“¾æ¥èµ·æ¥ï¼Œé‚£å°±å‡ºbugäº†\né¦–å…ˆï¼Œè‡ªç„¶æ˜¯æˆ‘ä»¬æ²¡åŠæ³•å°†ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆèµ‹å€¼ç»™æ™®é€šçš„æŒ‡é’ˆï¼Œå› ä¸ºç±»å‹ä¸åŒã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½ç›´æ¥å¯¹å®ƒä»¬è¿›è¡Œå¼ºè½¬\n\nè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯å°†listnodeä¸­çš„æŒ‡é’ˆæˆå‘˜ä¹Ÿæ”¹æˆæ™ºèƒ½æŒ‡é’ˆ\n// é“¾è¡¨èŠ‚ç‚¹template&lt;class T&gt;struct ListNode&#123;\tmu::shared_ptr&lt;ListNode&lt;T&gt;&gt; _prev;\tmu::shared_ptr&lt;ListNode&lt;T&gt;&gt; _next;\tT _val;\tListNode(const T&amp; val=T())\t\t:_prev(nullptr),\t\t_next(nullptr),\t\t_val(val)\t&#123;\t\tcout &lt;&lt; &quot;[ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;\t~ListNode()\t&#123;\t\tcout &lt;&lt; &quot;[~ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;&#125;;void test6()&#123;\tmu::shared_ptr&lt;ListNode&lt;int&gt;&gt; p1(new ListNode&lt;int&gt;(10));\tmu::shared_ptr&lt;ListNode&lt;int&gt;&gt; p2(new ListNode&lt;int&gt;(20));\tp1-&gt;_next = p2;\tp2-&gt;_prev = p1;&#125;\n\nå†æ¬¡è¿è¡Œï¼Œè¯¶ï¼Œå‡ºé—®é¢˜äº†ï¼\n[init] 00000000[init] 00000000[ListNode()] 00FFF1B8[init] 00FFF1B8[init] 00000000[init] 00000000[ListNode()] 00FF8D78[init] 00FF8D78[operator=] 00000000[des] pcount:0 ptr:00000000[operator=] 00000000[des] pcount:0 ptr:00000000[des] pcount:1 ptr:00FF8D78[des] pcount:1 ptr:00FFF1B8\n\nå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶shared_ptrçš„ææ„å‡½æ•°è¢«è°ƒç”¨äº†ï¼Œä½†ç›´åˆ°æœ€åï¼Œéƒ½æ²¡æœ‰æ‰“å°å‡º[des] deleteï¼Œä¹Ÿæ²¡æœ‰è¿›å…¥ListNodeçš„ææ„å‡½æ•°ï¼Œå³å‡ºç°äº†å†…å­˜æ³„æ¼ï¼\nvoid _Release()&#123;    (*_pcount)--;    cout &lt;&lt; &quot;[des] pcount:&quot; &lt;&lt; (*_pcount) &lt;&lt; &quot; ptr:&quot; &lt;&lt; (void*)_ptr &lt;&lt; endl;    if ((*_pcount) == 0)    &#123;        cout &lt;&lt; &quot;[des] delete &quot; &lt;&lt; (void*)_ptr &lt;&lt; endl; // å¦‚æœé‡Šæ”¾äº†èµ„æºï¼Œä¼šæ‰“å°è¿™ä¸ª        if(_ptr)//_pträ¸ä¸ºç©ºçš„æ—¶å€™æ‰é‡Šæ”¾å®ƒ            delete _ptr;        //æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½éœ€è¦åˆ é™¤è®¡æ•°å™¨ï¼Œå¦åˆ™ä¼šæœ‰å†…å­˜æ³„æ¼        delete _pcount;    &#125;&#125;\n\nç”»ä¸ªå›¾ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯ä¸ºç”š\n\np1ç®¡ç†èµ„æºAï¼Œp2ç®¡ç†èµ„æºBï¼›äºŒè€…å¼•ç”¨è®¡æ•°éƒ½ä¸º1\np1-&gt;next&#x3D;p2ï¼Œp1-&gt;nextä¹Ÿå¼€å§‹ç®¡ç†èµ„æºBï¼Œå¼•ç”¨è®¡æ•°ä¸º2\np2-&gt;prev&#x3D;p1ï¼Œp2-&gt;prevä¹Ÿå¼€å§‹ç®¡ç†èµ„æºAï¼Œå¼•ç”¨è®¡æ•°ä¸º2\nå‡ºä½œç”¨åŸŸï¼Œå…ˆææ„p2ï¼ŒBå¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶èµ„æºBæ˜¯åªç”±p1-&gt;nextç®¡ç†çš„\nåææ„p1ï¼ŒAå¼•ç”¨è®¡æ•°-1ï¼Œæ­¤æ—¶èµ„æºAæ˜¯åªç”±p2-&gt;prevç®¡ç†\nä½†æ˜¯p1-&gt;nextå¿…é¡»è¦å®Œå…¨ææ„èµ„æºAæ‰ä¼šè¢«é‡Šæ”¾ï¼›åŒç†ï¼Œp2-&gt;prevä¹Ÿéœ€è¦å®Œå…¨ææ„èµ„æºBæ‰ä¼šé‡Šæ”¾\n\nè¿™æ—¶å€™å°±é™·å…¥äº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå› ä¸ºèµ„æºAå’Œèµ„æºBå®é™…ä¸Šå·²ç»æ²¡æœ‰å¤–äººåœ¨ä½¿ç”¨äº†ï¼Œå®ƒä»¬ä¹Ÿæ— æ³•è¢«å½»åº•é‡Šæ”¾æ‰ï¼Œå†…å­˜æ³„æ¼äº†ï¼\n\n7.3 è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜è®²åˆ°è¿™é‡Œï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±å¾ˆæ˜äº†äº†ã€‚å› ä¸ºweak_ptræ˜¯ä¸è¿›è¡Œå¼•ç”¨è®¡æ•°çš„æ“ä½œçš„ï¼Œå…¶åªå¯¹èµ„æºè¿›è¡Œæ‰˜ç®¡ã€‚æˆ‘ä»¬åªéœ€è¦å°†listnodeä¹‹ä¸­çš„æŒ‡é’ˆä»shared_ptræ”¹ä¸ºweak_ptrå³å¯\ntemplate&lt;class T&gt;struct ListNode&#123;\t/*mu::shared_ptr&lt;ListNode&lt;T&gt;&gt; _prev;\tmu::shared_ptr&lt;ListNode&lt;T&gt;&gt; _next;*/\tstd::weak_ptr&lt;ListNode&lt;T&gt;&gt; _next;\tstd::weak_ptr&lt;ListNode&lt;T&gt;&gt; _prev;\tT _val;\tListNode(const T&amp; val=T())\t\t:_val(val)\t&#123;\t\tcout &lt;&lt; &quot;[ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;\t~ListNode()\t&#123;\t\tcout &lt;&lt; &quot;[~ListNode()] &quot; &lt;&lt; (void*)this &lt;&lt; endl;\t&#125;&#125;;void test6()&#123;\tstd::shared_ptr&lt;ListNode&lt;int&gt;&gt; p1(new ListNode&lt;int&gt;(10));\tstd::shared_ptr&lt;ListNode&lt;int&gt;&gt; p2(new ListNode&lt;int&gt;(20));\tp1-&gt;_next = p2;\tp2-&gt;_prev = p1;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ—¶å€™å°±èƒ½æˆåŠŸé‡Šæ”¾èŠ‚ç‚¹äº†ï¼\n[ListNode()] 0117F348[ListNode()] 01171950[~ListNode()] 01171950[~ListNode()] 0117F348\n\n7.4 ç®€å•å®ç°åº“é‡Œé¢çš„å®ç°æ¯”æˆ‘ä»¬è¿™ä¸ªå¤æ‚å¾ˆå¤šï¼Œå®ç°åªæ˜¯ä¸ºäº†ç†è§£è®¾è®¡æ€è·¯\ntemplate&lt;class T&gt;class weak_ptr&#123;public:\tweak_ptr()\t\t:_ptr(nullptr)\t&#123;&#125;\t//æ„é€ \tweak_ptr(const shared_ptr&lt;T&gt;&amp; p)\t\t:_ptr(p.get())\t&#123;\t\t_ptr;\t&#125;\t//æ‹·è´æ„é€ \tweak_ptr(const weak_ptr&lt;T&gt;&amp; p)\t\t:_ptr(p._ptr)\t&#123;&#125;\t//èµ‹å€¼é‡è½½\tweak_ptr&lt;T&gt;&amp; operator=(shared_ptr&lt;T&gt;&amp; p)\t&#123;\t\t_ptr = p.get();\t\treturn *this;\t&#125;\tweak_ptr&lt;T&gt;&amp; operator=(const weak_ptr&lt;T&gt;&amp; p)\t&#123;\t\t_ptr = p._ptr;\t\treturn *this;\t&#125;\tT&amp; operator*()\t&#123;\t\treturn *_ptr;\t&#125;\tT* operator-&gt;()\t&#123;\t\treturn _ptr;\t&#125;\tT&amp; operator[](const T&amp; n)\t&#123;\t\treturn _ptr[n];\t&#125;private:\tT* _ptr;&#125;;\n\nè‡ªå·±ä¹Ÿå®ç°ä¸€ä¸ªç®€å•çš„weak_ptrï¼Œè¿˜æ˜¯ç”¨ç›¸åŒçš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸè¿›è¡Œäº†ææ„\n[ ListNode()] 00C903C8[init] 00C903C8[ ListNode()] 00C90128[init] 00C90128[des] pcount:0 ptr:00C90128[des] delete 00C90128[~ListNode()] 00C90128[des] pcount:0 ptr:00C903C8[des] delete 00C903C8[~ListNode()] 00C903C8\n\n7.5 æˆå‘˜å‡½æ•°å¯¹åº“ä¸­å®ç°çš„weak_ptrçš„æˆå‘˜å‡½æ•°åšä¸€å®šè§£é‡Š\nvoid swap (weak_ptr&amp; x) noexcept; // äº¤æ¢ä¸¤ä¸ªweak_ptræ‰˜ç®¡çš„æŒ‡é’ˆvoid reset() noexcept;// é‡ç½® (ç›¸å½“äºæ¢å¤æˆé»˜è®¤æ„é€ çš„å¯¹è±¡)long int use_count() const noexcept; // è¿”å›weak_ptrç®¡ç†çš„ç©ºé—´çš„å¼•ç”¨è®¡æ•°ï¼ˆæœ¬èº«ä¸è®¡å…¥ï¼‰bool expired() const noexcept; // åˆ¤æ–­weak_ptræ˜¯å¦å·²ç»è¿‡æœŸï¼ˆå³ç”¨äºæ„é€ è¿™ä¸ªweak_ptrçš„shared_ptræ˜¯å¦å·²ç»é‡Šæ”¾èµ„æºï¼‰// å› ä¸ºweak_pträ¸å‚ä¸èµ„æºçš„ç®¡ç†ï¼Œåªè¿›è¡Œæ‰˜ç®¡ã€‚æ‰€ä»¥å¦‚æœshared_ptrå·²ç»å°†ç©ºé—´é‡Šæ”¾ï¼Œé‚£ä¹ˆweak_ptræŒ‡å‘çš„ç©ºé—´å°±å·²ç»è¿‡æœŸäº†ï¼Œä¸èƒ½ç»§ç»­ä½¿ç”¨shared_ptr&lt;element_type&gt; lock() const noexcept;// å¦‚æœweak_ptræ²¡æœ‰è¿‡æœŸ/ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›å…¶æ‰˜ç®¡çš„shared_ptrå¯¹è±¡// ç­‰æ•ˆäºè¿”å› expired() ? shared_ptr&lt;T&gt;() : shared_ptr&lt;T&gt;(*this) // è¯¥å‡½æ•°å…·æœ‰åŸå­æ€§// https://legacy.cplusplus.com/reference/memory/weak_ptr/lock/// è¯´å®è¯ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨çœ‹çš„ä¸æ˜¯å¾ˆæ‡‚ã€‚ä¸‹é¢è¿™ä¸ªå‡½æ•°å°±æ›´çœ‹ä¸æ‡‚äº†template &lt;class U&gt; bool owner_before (const weak_ptr&lt;U&gt;&amp; x) const;template &lt;class U&gt; bool owner_before (const shared_ptr&lt;U&gt;&amp; x) const;//https://blog.csdn.net/weixin_45590473/article/details/113040456\n\n8.å®šåˆ¶åˆ é™¤å™¨å¯¹äºæˆ‘ä»¬è‡ªå·±å†™çš„shared_ptrï¼Œæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œææ„çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯å†™æ­»çš„deleteï¼›\nå¦‚æœç”¨æˆ·ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°ç»„new int[10]ï¼Œæ­¤æ—¶deleteå°±ä¸å¯¹åº”ï¼ˆéœ€è¦ç”¨delete[])ï¼Œä¼šå‡ºç°é—®é¢˜ï¼ˆä½†ä¸ä¸€å®šä¼šæŠ¥é”™ï¼‰\nè¿˜æœ‰äº›æƒ…å†µï¼Œæˆ‘ä»¬æƒ³ç»™æ™ºèƒ½æŒ‡é’ˆä¼ å…¥ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆï¼Œæ­¤æ—¶å°±ä¸èƒ½ç”¨deleteæ¥è¿›è¡Œèµ„æºé‡Šæ”¾äº†ã€‚ä¸ºäº†é¿å…è¿™äº›æƒ…å†µï¼Œæ™ºèƒ½æŒ‡é’ˆå¼•å…¥äº†å®šåˆ¶åˆ é™¤å™¨\n8.1 unique_ptrå’Œshared_ptrçš„ä¸åŒç”¨æ³•//non-specialized\ttemplate &lt;class T, class D = default_delete&lt;T&gt;&gt; class unique_ptr;//array specialization\ttemplate &lt;class T, class D&gt; class unique_ptr&lt;T[],D&gt;;\n\næ¯”å¦‚åº“ä¸­unique_ptrçš„æ¨¡æ¿å‚æ•°ä¸­ï¼Œå°±æœ‰ä¸€ä¸ªæ¨¡æ¿å‚æ•°Dç”¨äºæ¥æ”¶ç”¨æˆ·ä¼ å…¥çš„åˆ é™¤å™¨ã€‚è€Œshared_ptråˆ™æ˜¯é‡‡ç”¨åœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥åˆ é™¤å™¨å¯¹è±¡çš„æ–¹å¼æ¥å®ç°å®šåˆ¶åˆ é™¤\n//with deleter (4)\ttemplate &lt;class U, class D&gt; shared_ptr (U* p, D del);template &lt;class D&gt; shared_ptr (nullptr_t p, D del);\n\nåº“ä¸­é»˜è®¤çš„åˆ é™¤å™¨å¦‚ä¸‹\n//non-specialized\ttemplate &lt;class T&gt; class default_delete;//array specialization\ttemplate &lt;class T&gt; class default_delete&lt;T[]&gt;;\n\nå†…éƒ¨é‡‡ç”¨äº†é‡è½½æ“ä½œç¬¦()çš„åŠæ³•ï¼Œæ¥å®ç°ä»¿å‡½æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨çš„æ˜¯deleteï¼Œå¦‚æœæŒ‡å®šäº†æ˜¯æ•°ç»„ç±»å‹ï¼Œåˆ™ä¼šä½¿ç”¨delete[]\n\nå¦‚æœæˆ‘ä»¬è¦å¤„ç†çš„æ˜¯æ–‡ä»¶æŒ‡é’ˆæˆ–è€…mallocçš„å€¼ï¼Œå°±åªéœ€è¦è‡ªå·±ä¼ å…¥ä¸€ä¸ªä»¿å‡½æ•°ï¼ˆå®šåˆ¶åˆ é™¤å™¨ï¼‰å³å¯\n8.2 ä½¿ç”¨è¿™é‡Œæˆ‘å®šåˆ¶äº†ä¸€ä¸ªfreeçš„åˆ é™¤å™¨ï¼Œå’Œæ–‡ä»¶æŒ‡é’ˆfcloseçš„åˆ é™¤å™¨\ntemplate&lt;class T&gt;struct Free&#123;\tvoid operator()(T* ptr)\t&#123;\t\tcout &lt;&lt; &quot;[free]  &quot; &lt;&lt; ptr &lt;&lt; endl;\t\tfree(ptr);\t&#125;&#125;;struct Fclose&#123;\tvoid operator()(FILE* ptr)\t&#123;\t\tcout &lt;&lt; &quot;[fclose] &quot; &lt;&lt; ptr &lt;&lt; endl;\t\tfclose(ptr);\t&#125;&#125;;\n\nç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•\nunique_ptr&lt;int, default_delete&lt;int[]&gt;&gt; up1(new int[10]);unique_ptr&lt;ListNode&lt;int&gt;, default_delete&lt;ListNode&lt;int&gt;[]&gt;&gt; up2(new ListNode&lt;int&gt;[2]);unique_ptr&lt;FILE, Fclose&gt; up3((FILE*)fopen(&quot;test.cpp&quot;, &quot;r&quot;));unique_ptr&lt;ListNode&lt;int&gt;, Free&lt;ListNode&lt;int&gt;&gt;&gt; up4((ListNode&lt;int&gt;*)malloc(sizeof(ListNode&lt;int&gt;)));\n\nå¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸè¿›è¡Œäº†ListNodeæ•°ç»„çš„é”€æ¯ï¼Œä»¥åŠmallocã€æ–‡ä»¶æŒ‡é’ˆçš„freeã€å…³é—­æ“ä½œ\n[ ListNode()] 011D5B7C[ ListNode()] 011D5B88[free]  011E1070[fclose] 011D89A8[~ListNode()] 011D5B88[~ListNode()] 011D5B7C\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmallocåˆ›å»ºçš„ListNode&lt;int&gt;ç©ºé—´å¹¶ä¸ä¼šè°ƒç”¨ListNodeçš„æ„é€ å‡½æ•°ï¼Œfreeä¹Ÿä¸ä¼šè°ƒç”¨ææ„å‡½æ•°\n\nå› ä¸ºshared_ptréœ€è¦é‡‡ç”¨ç±»å¯¹è±¡çš„æ–¹å¼åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œä¼ å‚ã€‚è¿™æ–¹é¢çš„åº•å±‚å®ç°æœ‰äº›å¤æ‚ã€‚éšä¹‹è€Œæ¥çš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªlambdaè¡¨è¾¾å¼æ¥ä½œä¸ºåˆ é™¤å™¨ï¼Œé¿å…äº†ä»£ç å†—é•¿ä¹‹åï¼Œæ‰¾ä¸åˆ°æƒ³è¦çš„åˆ é™¤å™¨çš„å®šä¹‰çš„é—®é¢˜ã€‚\n// shared_ptréœ€è¦é‡‡ç”¨ä¼ å…¥å¯¹è±¡çš„æ–¹å¼default_delete&lt;ListNode&lt;int&gt;[]&gt; d1;shared_ptr&lt;ListNode&lt;int&gt;&gt; sp1(new ListNode&lt;int&gt;[3], d1);cout &lt;&lt; &quot;###########################&quot; &lt;&lt; endl;shared_ptr&lt;ListNode&lt;int&gt;&gt; sp2(new ListNode&lt;int&gt;[3], [](ListNode&lt;int&gt;* ptr)&#123;delete[] ptr; &#125;);\n\nè¿è¡Œç»“æœå¦‚ä¸‹\n[ ListNode()] 0127F1BC[ ListNode()] 0127F1C8[ ListNode()] 0127F1D4###########################[ ListNode()] 01278D4C[ ListNode()] 01278D58[ ListNode()] 01278D64[~ListNode()] 01278D64[~ListNode()] 01278D58[~ListNode()] 01278D4C[~ListNode()] 0127F1D4[~ListNode()] 0127F1C8[~ListNode()] 0127F1BC\n\n9.æ€»ç»“\n\n\næ™ºèƒ½æŒ‡é’ˆ\næ‹·è´ç‰¹ç‚¹\nå®šåˆ¶åˆ é™¤å™¨\n\n\n\nauto_ptr(C++98)\nç®¡ç†æƒè½¬ç§»ã€‚å¤åˆ¶åï¼ŒåŸæœ‰å¯¹è±¡å¤±æ•ˆ\n-\n\n\nunique_ptr(scpoed_ptr)\nç¦æ­¢æ‹·è´\nä½¿ç”¨æ¨¡æ¿å‚æ•°æ¥ä¼ å…¥å®šåˆ¶åˆ é™¤å™¨\n\n\nshared_ptr\næ”¯æŒæ‹·è´ï¼Œé‡‡ç”¨å¼•ç”¨è®¡æ•°ï¼Œä½†æ˜¯ä¼šæœ‰å¾ªç¯å¼•ç”¨é—®é¢˜\nåœ¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥åˆ é™¤å™¨å¯¹è±¡\n\n\nweak_ptr\næ”¯æŒæ‹·è´ï¼Œåªç”¨äºæ‰˜ç®¡æŒ‡é’ˆï¼Œä¸å‚ä¸æŒ‡é’ˆç©ºé—´çš„é‡Šæ”¾ï¼Œä¸è®¡å…¥å¼•ç”¨è®¡æ•°ã€‚ç”¨äºè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜\n-\n\n\nThe endæ™ºèƒ½æŒ‡é’ˆçš„åŸºæœ¬ç”¨æ³•åˆ°è¿™é‡Œå°±overäº†ï¼Œäº†è§£æ™ºèƒ½æŒ‡é’ˆçš„åŒæ—¶ï¼Œéœ€è¦ç†ŸçŸ¥RAIIæ€æƒ³ã€‚åœ¨ä¸å°‘ç±»çš„è®¾è®¡ä¸­ï¼Œéƒ½ä¼šç”¨åˆ°è¿™ä¸ªæ€æƒ³ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘å‡½æ•°é‡è½½çš„å½¢å¼åŠå…¶èƒŒååŸç†","url":"/posts/909882653/","content":"å¸¸è¨€é“ï¼šä¸­å›½æœ‰ä¿©çƒï¼Œè°éƒ½èµ¢ä¸äº†ï¼è¿™å¥è¯åœ¨ä¸åŒçš„è¯­å¢ƒä¸‹æœ‰ä¸åŒçš„æ„æ€\nC++ä¸­ï¼Œå‡½æ•°æ”¯æŒåœ¨åŒä¸€ä½œç”¨åŸŸä¸‹å£°æ˜å‡ ä¸ªåŠŸèƒ½ç±»ä¼¼çš„åŒåå‡½æ•°ï¼Œä½†éœ€è¦éµå®ˆä»¥ä¸‹è§„å®šâ€¦â€¦\n\n\n\nå½¢å‚ä¸ªæ•°ä¸åŒ\nå½¢å‚ç±»å‹ä¸åŒ\nå½¢å‚ç±»å‹çš„é¡ºåºä¸åŒ\nåªä¿®æ”¹å‡½æ•°è¿”å›å€¼ä¸æ„æˆé‡è½½\n\nç¼–è¯‘å™¨ä¼šåœ¨è°ƒç”¨è¿™äº›åŒåå‡½æ•°çš„æ—¶å€™ï¼Œæ ¹æ®å…·ä½“æƒ…å†µæ¥é€‰æ‹©ä¸åŒçš„å‡½æ•°\n\n[TOC]\n1.å‡½æ•°é‡è½½çš„æ ·å¼\nä¸Šé¢æåˆ°äº†å‡½æ•°é‡è½½çš„3ä¸ªè§„å®šï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ç”¨å…·ä½“ç¤ºä¾‹è®¤è¯†ä¸€ä¸‹å®ƒä»¬\n\nå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªA+Bçš„ä»£ç ï¼Œå¦‚æœæ¯æ¬¡éƒ½éœ€è¦æ ¹æ®ä¸åŒæ•°æ®ç±»å‹æ¥å†™ä¸åŒçš„å‡½æ•°å»å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæœªå…æœ‰ç‚¹å¤ªè¿‡ç¹æ‚ã€‚\nåœ¨C++ä¸­ï¼Œåªéœ€è¦ä¿®æ”¹å‡½æ•°çš„å‚æ•°ï¼Œå³æ„æˆäº†å‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªå·±é€‰æ‹©å¯¹åº”çš„å‡½æ•°è¿›è¡Œç›¸åŠ æ“ä½œ\n1.1å½¢å‚ç±»å‹ä¸åŒ//å‡½æ•°é‡è½½int Add(int a, int rb)&#123;\treturn a + b;&#125;long Add(long a, long b)&#123;\treturn a + b;&#125;double Add(double a, double b)&#123;\treturn a + b;&#125;int main()&#123;\tcout &lt;&lt; Add(10, 20) &lt;&lt;endl;     cout &lt;&lt; Add(10L, 20L) &lt;&lt; endl;\tcout &lt;&lt; Add(10.0, 20.0) &lt;&lt; endl;\treturn 0;&#125;\n\n\n1.2å½¢å‚ä¸ªæ•°ä¸åŒint Add(int a, int b) &#123;\treturn a + b;&#125;//ä¸ªæ•°ä¸åŒint Add(int a, int b, int c) &#123;\treturn a + b + c;&#125;\n\n\n1.3å½¢å‚ç±»å‹é¡ºåºä¸åŒè¿™é‡Œçš„é¡ºåºå¹¶ä¸æ˜¯aå’Œbçš„é¡ºåºå“ˆï¼åªæŠŠaå’Œbæ¢ä¸€ä¸ªä½ç½®æ˜¯ä¸æ„æˆå‡½æ•°é‡è½½çš„\nè¿™é‡ŒæŒ‡çš„æ˜¯å…ˆä¼ intå†ä¼ doubleï¼Œå’Œå…ˆä¼ doubleå†ä¼ intçš„ä¸¤ç§å‡½æ•°\n//å½¢å‚ç±»å‹çš„é¡ºåºä¸åŒvoid Add(int  a, double b) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;&#125;void Add(double  a,int b) &#123;\tcout &lt;&lt; a &lt;&lt; endl;\tcout &lt;&lt; b &lt;&lt; endl;&#125;\n\n\n\n1.4è¿”å›å€¼ä¸åŒéé‡è½½åªä¿®æ”¹å‡½æ•°çš„è¿”å›å€¼ç±»å‹æ˜¯ä¸æ„æˆå‡½æ•°é‡è½½çš„\n\n\n2.C++å®ç°å‡½æ•°é‡è½½çš„åŸç†\nåœ¨çœ‹åç»­å†…å®¹ä¹‹å‰ï¼Œå»ºè®®å…ˆå¤ä¹ ä¸€ä¸‹ç¨‹åºè¿è¡Œçš„4ä¸ªé˜¶æ®µï¼Œä»¥ä¾¿ç†è§£åé¢çš„æ“ä½œğŸ‘‰ä¼ é€é—¨\n\nè¿™é‡Œä½¿ç”¨æˆ‘çš„æ ‘è“æ´¾åœ¨Linuxç³»ç»Ÿä¸‹ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹å‡½æ•°é‡è½½èƒŒåçš„æ ·å¼\né¦–å…ˆæˆ‘åˆ›å»ºäº†3ä¸ªæ–‡ä»¶ï¼Œtest.c Add.h Add.cppï¼Œæ–‡ä»¶çš„å†…å®¹ä¸€å¹¶ç»™å‡º\n//Add.h#include&lt;iostream&gt;using namespace std;int Add(int a,int b);double Add(double a,double b);//Add.c#include &quot;Add.h&quot;int Add(int a,int b)&#123;\treturn a+b;&#125;double Add(double a,double b)&#123;\treturn a+b;&#125;//test.cpp#include &quot;Add.h&quot;int main()&#123;\tcout&lt;&lt;Add(1,2)&lt;&lt;endl;\tcout&lt;&lt;Add(1.5,2.5)&lt;&lt;endl;\treturn 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨gccè¿™ä¸ªCè¯­è¨€ç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åºçš„æ—¶å€™ï¼Œå‡ºç°äº†å¾ˆå¤šæŠ¥é”™ï¼Œå› ä¸ºCè¯­è¨€æ˜¯ä¸æ”¯æŒå‡½æ•°é‡è½½çš„\n\n2.1ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ä½¿ç”¨g++ç¼–è¯‘å™¨æ¥ç¼–è¯‘è¿™ä¸ªä»£ç \ng++ test.cpp add.cpp -o Tcpp\n\næ‰§è¡Œ./Tcppè¿è¡Œè¯¥å‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ­£å¸¸è¾“å‡ºäº†ç›¸åŠ åçš„ç»“æœ\n\n\n2.2æŸ¥çœ‹æ±‡ç¼–æ¥ä¸‹æ¥æˆ‘ä»¬è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹å¯æ‰§è¡Œæ–‡ä»¶Tcppçš„æ±‡ç¼–ä»£ç \nobjdump -S Tcpp\n\nåœ¨è¿™é‡Œé¢å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬ä¸¤ä¸ªAddå‡½æ•°çš„ä½ç½®ï¼Œå¯è§å®ƒä»¬çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸”ä¸€ä¸ªå‡½æ•°åä¸º_Z3Addiiï¼Œå¦å¤–ä¸€ä¸ªæ˜¯_Z3Adddd\n\n2.2.1æ±‡ç¼–å‡½æ•°åçš„å«ä¹‰è¿™ä¸¤ä¸ªæ±‡ç¼–ä»£ç ä¸­çš„å‡½æ•°åï¼Œå…¶å®åŒ…å«äº†å‡½æ•°åã€å‡½æ•°å‚æ•°è¿™ä¸¤ä¸ªä¿¡æ¯\n\næ‹†åˆ†äº†å…¶ä¸­ä¸€ä¸ªï¼Œé‚£ä¹ˆå¦å¤–ä¸€ä¸ª_Z3Addddçš„æ„æ€å°±å¾ˆæ˜ç¡®äº†ï¼Œæœ«å°¾çš„ä¸¤ä¸ªdä»£è¡¨å‡½æ•°å‚æ•°æ˜¯(double,double)\n\næˆ‘ä»¬å¯ä»¥åˆ›å»ºå¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŸ¥çœ‹å®ƒçš„æ±‡ç¼–ä»£ç ï¼Œè¿›ä¸€æ­¥ç¡®è®¤å‘½åè§„åˆ™ï¼ˆå…¶å®è¿™ä¸ªå‘½åè§„åˆ™æ˜¯åæ¨å¾—å‡ºçš„ï¼‰\n#include&lt;iostream&gt;using namespace std;void f(int a,int b)&#123;\tcout &lt;&lt;a&lt;&lt;endl;\tcout &lt;&lt;b&lt;&lt;endl;&#125;int main()&#123;\tf(3,4);\treturn 0;&#125;\n\nç¼–è¯‘ç¨‹åºåï¼Œæ‰§è¡Œobjdump -Sï¼Œå¯ä»¥çœ‹åˆ°få‡½æ•°è¢«å‘½åä¸º_Z1fiiï¼Œä»£è¡¨å‡½æ•°åé•¿åº¦ä¸º1ï¼ŒåŸæœ¬å‡½æ•°åfï¼Œå’Œå‡½æ•°å‚æ•°(int ,int)\n\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†æ±‡ç¼–ä¸­è¿™ä¸ªå‡½æ•°åçš„å‘½åè§„åˆ™ï¼Œé‚£å®ƒå’ŒC++æ”¯æŒå‡½æ•°é‡è½½æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ\n\nåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€çœ‹çœ‹cè¯­è¨€ç¨‹åºï¼Œæ±‡ç¼–ä»£ç ä¸­å‡½æ•°åˆæ˜¯æ€ä¹ˆå‘½åçš„\n2.2.2æŸ¥çœ‹Cè¯­è¨€æ±‡ç¼–è¿™é‡Œæˆ‘æŠŠä¹‹å‰çš„å‡½æ•°ä¿®æ”¹æˆäº†Cè¯­è¨€çš„æ ·å¼ï¼Œgccç¼–è¯‘åå†æ¥çœ‹çœ‹å®ƒçš„æ±‡ç¼–\nvoid f(int a,int b)&#123;\tprintf(&quot;%d %d\\n&quot;,a,b);&#125;\n\n\nç„¶åä½ å°±ä¼šå‘ç°ï¼ŒCè¯­è¨€æ±‡ç¼–ä»£ç ä¸­çš„å‡½æ•°åï¼Œå°±æ˜¯å‡½æ•°åŸæœ¬çš„åå­—fï¼Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¸œè¥¿ï¼\n\n2.3å¾—å‡ºç»“è®ºçœ‹åˆ°è¿™é‡Œï¼Œä½ èƒ½çŒœå‡ºæ¥ä¸ºä»€ä¹ˆC++æ”¯æŒå‡½æ•°æ±‡ç¼–ï¼Œè€ŒCè¯­è¨€ä¸æ”¯æŒäº†å—ï¼Ÿ\n\næ²¡é”™ï¼é‚£æ˜¯å› ä¸ºC++çš„æ±‡ç¼–ä»£ç ä¸­ï¼Œå‡½æ•°åè¿˜ä¿å­˜äº†å‡½æ•°çš„å½¢å‚ç±»å‹ï¼Œè€ŒCè¯­è¨€ä¸­å¹¶æ²¡æœ‰ä¿å­˜ï¼Œè‡ªç„¶æ— æ³•åŒºåˆ†ä¸¤ä¸ªå‡½æ•°\n\nè¿™ä¸ªæ±‡ç¼–å‡½æ•°åçš„å‘½åæ–¹å¼ä¹Ÿèƒ½è§£é‡ŠC++å‡½æ•°é‡è½½çš„3ç§æ ·å¼\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªfunå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºå®ƒçš„æ±‡ç¼–å‡½æ•°å\n\n\n\nç±»å‹\nå½¢å¼ä¸€\nå½¢å¼äºŒ\n\n\n\nå½¢å‚ä¸ªæ•°ä¸åŒ\n_Z3funii(int,int)\n_Z3funiii(int,int,int)\n\n\nå½¢å‚ç±»å‹ä¸åŒ\n_Z3funii(int,int)\n_Z3fundd(double,double)\n\n\nå½¢å‚ç±»å‹é¡ºåºä¸åŒ\n_Z3funid(int,double)\n_Z3fundi(double,int)\n\n\nåŒæ—¶ä¹Ÿèƒ½è§£é‡Šä¸ºä½•åªä¿®æ”¹å‡½æ•°è¿”å›å€¼ç±»å‹æ˜¯ä¸æ„æˆé‡è½½çš„ï¼Œå› ä¸ºæ±‡ç¼–ä»£ç ä¸­æ²¡æœ‰ä¿å­˜å‡½æ•°çš„è¿”å›å€¼\n\næ­£å› ä¸ºC++åœ¨æ±‡ç¼–å¤„ç†ä¸­èƒ½å¤Ÿä»¥è¿™ç§å‘½åæ–¹å¼æ¥åŒºåˆ†åŒåçš„ä¸åŒå‡½æ•°ï¼Œå¹¶ç»™å®ƒä»¬èµ‹äºˆä¸åŒçš„åœ°å€ï¼Œç¼–è¯‘å™¨åœ¨é“¾æ¥ç¬¦å·è¡¨çš„æ—¶å€™ï¼Œæ‰èƒ½é€šè¿‡å‡½æ•°ä¼ å‚çš„ä¸åŒæ‰¾åˆ°å®ƒéœ€è¦è°ƒç”¨çš„å¯¹åº”å‡½æ•°çš„åœ°å€\n\nåœ¨mainå‡½æ•°çš„æ±‡ç¼–ä¸­ï¼Œä¹Ÿèƒ½æ‰¾åˆ°å¯¹åº”å‡½æ•°çš„è°ƒç”¨æ“ä½œ\n\n\n3.è¯­æ³•externâ€Câ€å› ä¸ºC++æ±‡ç¼–å¤„ç†ä¸­å¯¹å‡½æ•°åçš„ä¿®é¥°å’ŒCè¯­è¨€ä¸åŒï¼Œæ‰€ä»¥C++ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªè¯­æ³•ï¼Œä¸“é—¨ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒæŸæŸæŸå‡½æ•°è¦ç”¨Cè¯­è¨€çš„è§„åˆ™æ¥ä¿®é¥°\n #include &lt;iostream&gt;using namespace std;extern &quot;C&quot; int fun(int a,int b);int main()&#123;    int sum=fun(1,2);    return 0;&#125;int fun(int a,int b)&#123;     return a+b;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼ä¿®é¥°çš„funå‡½æ•°ï¼Œåœ¨æ±‡ç¼–ä¸­å°±åªæœ‰å‡½æ•°åï¼Œè€Œä¸æ˜¯C++å½¢å¼åŸæœ¬çš„_Z3funii\n\nè¿™æ ·Cè¯­è¨€çš„ä»£ç å°±å¯ä»¥é“¾æ¥è¿™ç§æ–¹å¼å†™çš„C++é™æ€åº“ï¼ˆå‰ææ˜¯è¿™ä¸ªé™æ€åº“ä¸­æ²¡æœ‰å‡½æ•°é‡è½½å’ŒC++çš„è¯­æ³•ï¼‰\n\nç„¶åæˆ‘å°±æƒ³é—®ï¼šè¿™å’ŒCçš„é™æ€åº“æœ‰å•¥åŒºåˆ«â€¦â€¦\n\nå½“ç„¶æœ‰äº†ï¼ä¸€ä¸ªåº“é‡Œé¢æœ‰å¾ˆå¤šå¾ˆå¤šä»£ç ï¼Œæ€»æœ‰äº›å‡½æ•°æ¥å£æ˜¯Cè¯­è¨€ä¹Ÿèƒ½æ”¯æŒçš„å˜›ï¼Œè¿™äº›æ¥å£å°±ç”¨Cè¯­è¨€çš„æ–¹å¼æ¥ä¿®é¥°ï¼Œè¿™æ ·Cè¯­è¨€ä¹Ÿèƒ½è°ƒç”¨äº†ï¼Œä¸ä¸€ä¸¾ä¸¤å¾—ï¼Ÿ\n3.1C++è°ƒç”¨Cè¯­è¨€é™æ€åº“é™¤äº†æ›´æ”¹ä¿®é¥°æ–¹å¼å¤–ï¼Œextern&quot;C&quot;è¿˜ç”¨äºè®©C++ç¨‹åºæ¥è°ƒç”¨Cè¯­è¨€å†™çš„åº“\n\næ¯”å¦‚æ ‘è“æ´¾è¦ç”¨åˆ°çš„wiringPiåº“ï¼Œå®ƒæ˜¯ç”¨Cè¯­è¨€å®ç°çš„ï¼Œåœ¨ç¼–ç¨‹ä¸ºé™æ€åº“åï¼Œé‡Œé¢æ±‡ç¼–å¯¹å‡½æ•°çš„ä¿®é¥°å°±å›ºå®šäº†ï¼Œå¹¶æ²¡æœ‰C++ä¸‹çš„_Z1...å’Œå‚æ•°ç±»å‹ä¿®é¥°ã€‚\n\nè¿™æ—¶å€™å¦‚æœç”¨C++ç›´æ¥æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ŒC++ç¨‹åºæ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„å‡½æ•°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œextern&quot;C&quot;çš„ä½œç”¨å°±æ˜¯è®©ç¼–è¯‘å™¨ä»¥Cè¯­è¨€çš„æ–¹å¼å»å¯»æ‰¾å¯¹åº”å‡½æ•°\næ¯”å¦‚ä¸‹å›¾çš„ä»£ç ï¼Œè°ƒç”¨äº†wiringPiåº“é‡Œé¢çš„åˆå§‹åŒ–å‡½æ•°ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªå‡½æ•°\n\næˆ‘ä»¬ç”¨G++ç¼–è¯‘å™¨ç¼–è¯‘è¿™ä¸ªä»£ç ï¼Œå°±ä¼šå‘ç°ï¼Œæ¬¸tnndæ€ä¹ˆæ²¡æœ‰æŠ¥é”™å•Šï¼Ÿ\n\n\nå…¶å®å§ï¼Œåº“å‡½æ•°çš„å¼€å‘è€…æ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ã€‚åœ¨å¹³æ—¥ç¼–ç¨‹ä¸­ï¼Œä¹Ÿæœ‰åŠæ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”é‚£å°±æ˜¯ç”¨æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ï¼\n3.2ç”¨æ¡ä»¶ç¼–è¯‘è§£å†³é—®é¢˜å‰æƒ…æè¦ï¼šåœ¨C++çš„ç¼–è¯‘ç¯å¢ƒä¸­æœ‰ä¸€ä¸ªé¢„å®šä¹‰ç¬¦å·__cplusplus\ncout&lt;&lt; __cplusplus &lt;&lt;endl;\n\nåœ¨linuxç¯å¢ƒä¸‹ï¼Œç¼–è¯‘å™¨æ‰“å°å‡ºäº†ä»¥ä¸‹æ•°å­—\n\nè€Œåœ¨windowsçš„VS2019ç¼–è¯‘å™¨ä¸‹æ‰“å°äº†ä¸‹é¢çš„æ•°å­—\n\nå’±å…ˆä¸ç®¡è¿™ä¸ªæ•°å­—æ˜¯å•¥æ„æ€ï¼ˆçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ—¥æœŸï¼‰ï¼Œè‡³å°‘åœ¨Cè¯­è¨€ä¸­æ˜¯æ²¡æœ‰è¿™ä¸ªé¢„å®šä¹‰ç¬¦å·çš„\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªé¢„å®šä¹‰ç¬¦å·ï¼Œå‡è®¾æ˜¯C++ç¯å¢ƒï¼Œå°±æ”¾å‡ºextern&quot;C&quot;æ¥å£°æ˜å‡½æ•°ï¼Œå¦‚æœæ˜¯Cè¯­è¨€ç¯å¢ƒï¼Œå°±ä¸ç”¨extern&quot;C&quot;\næ–¹æ³•ä¸€ï¼šæ‰¹é‡extern\n#ifdef __cplusplusextern &quot;C&quot; &#123;#endif    void Add(int a,int b);    int fun(int a,int b);    //è¿™é‡Œå¯ä»¥æ”¾å¤šä¸ªå‡½æ•°çš„å£°æ˜    //â€¦â€¦    #ifdef __cplusplus&#125;#endif\n\næ–¹æ³•äºŒï¼šdefineä¸€ä¸ªç¬¦å·ä¸ºextern&quot;C&quot;ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªå®šä¹‰å‰é¢å•ç‹¬åŠ \n#ifdef __cplusplus\t#define EXTERN extern &quot;C&quot; #else\t#define EXTERN#endifEXTERN void Add(int a,int b);EXTERN int fun(int a,int b);EXTERN int func(int a,int b);//â€¦â€¦\n\nè¿™æ ·ä¸ç®¡æ˜¯Cè¯­è¨€ï¼Œè¿˜æ˜¯C++çš„ç¨‹åºï¼Œéƒ½èƒ½æ­£å¸¸å»ºç«‹ç¬¦å·è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°\n\nGithubï¼šwiringPiåº“æºç ä»“åº“\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤§ä½¬å½“åˆç¼–å†™wiringPiåº“çš„æ—¶å€™å°±ç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨æˆ‘çš„æ ‘è“æ´¾ä¸Šï¼ŒG++ç¼–è¯‘å™¨ä¹Ÿèƒ½ç›´æ¥è¯†åˆ«å‡ºwiringPiåº“çš„åŸå› \n\n\nåœ¨æ‰¾è¿™éƒ¨åˆ†èµ„æ–™çš„æ—¶å€™ï¼Œè¿˜å‘ç°äº†ä¸€ä¸ªå°æ•…äº‹ï¼šwiringPiåº“ç°åœ¨å·²ç»ä¸å®˜æ–¹å¼€æºäº†ã€‚å› ä¸ºæœ‰å¾ˆå¤šåˆå­¦è€…æ‹¿ä»£ç å»çƒ¦åŸä½œè€…ï¼ˆäºæ˜¯ä½œè€…åœ¨å®˜ç½‘ä¸Šå†™äº†â€œè¿™ä¸æ˜¯ç»™åˆå­¦è€…ç©çš„â€å‘Šç¤ºï¼‰è¿˜æœ‰å¾ˆå¤šäººå€’å–ä»–å†™çš„åº“ï¼Œæ‰€ä»¥ä»–å°±åœ¨æœ€åä¸€æ¬¡å…¬å¼€åï¼Œåœæ­¢äº†å®˜æ–¹å¼€æº\n\n3.3Cè¯­è¨€è°ƒç”¨C++çš„åº“åŒç†ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šç”¨Cè¯­è¨€æ¥è°ƒç”¨C++çš„åº“\nä½†æ˜¯ï¼å°±å¦‚æˆ‘ä¸Šå¤´è¯´çš„ï¼Œè¿™ä¸ªåº“é‡Œé¢ï¼Œå¯ä»¥ä¾›Cè¯­è¨€è°ƒç”¨çš„å‡½æ•°ä¸èƒ½æœ‰C++çš„è¯­æ³•å’Œå‡½æ•°é‡è½½\n\nGithubï¼šTcMallocä»£ç ä»“åº“\n\næ¯”è¾ƒå¥½çš„ä¸€ä¸ªä¾‹å­æ˜¯è°·æ­Œçš„tcmallocåº“ï¼šæ­¤å­˜å‚¨åº“åŒ…å«TCMallocçš„C++ä»£ç ã€‚ TCMallocæ˜¯è°·æ­Œå¯¹Cçš„mallocï¼ˆï¼‰å’ŒC++è¿ç®—ç¬¦çš„å®šåˆ¶å®ç°ï¼Œç”¨äºåœ¨æˆ‘ä»¬çš„Cå’ŒC++ä»£ç ä¸­åˆ†é…å†…å­˜ã€‚TCMallocæ˜¯ä¸€ä¸ªå¿«é€Ÿçš„å¤šçº¿ç¨‹mallocå®ç°ã€‚\n\næ•´ä¸ªåº“çš„å‡½æ•°å…¥å£æ˜¯åœ¨tcmalloc.ccä¸­å®šä¹‰çš„ï¼Œæ‰“å¼€å®ƒå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯ç”¨C++å®ç°çš„ï¼Œä½†æ˜¯å°‘éƒ¨åˆ†å‡½æ•°æ¥å£å› ä¸ºæ²¡æœ‰C++çš„è¯­æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨äº†extern &quot;C&quot;è®©Cè¯­è¨€ä¹Ÿæ”¯æŒå®ƒ\n\nä½†æ˜¯æˆ‘è¿˜å‘ç°ï¼Œæœ‰äº›å¸¦æœ‰C++çš„å‡½æ•°æ¥å£ï¼Œä¹Ÿç”¨äº†extern &quot;C&quot;ï¼Œé‚£æ˜¯ä¸æ˜¯æˆ‘ä»¬ä¸Šé¢çš„ç»“è®ºé”™äº†å‘¢ï¼Ÿ\n\nå®è·µå‡ºçœŸçŸ¥ï¼\n4è‡ªå·±æ•´ä¸€ä¸ªé™æ€åº“4.1C++è°ƒç”¨Cè¯­è¨€é™æ€åº“é¦–å…ˆåˆ›å»ºä¸€ä¸ªVSçš„ç©ºé¡¹ç›®ï¼ŒæŠŠæˆ‘ä¹‹å‰å†™çš„Cè¯­è¨€å•é“¾è¡¨ä»£ç æ”¾è¿›å»\n\nå³é”®è¿™é‡Œçš„é¡¹ç›®åç§°-å±æ€§ï¼Œç„¶ååœ¨é…ç½®å±æ€§-å¸¸è§„-é…ç½®ç±»å‹ä¸­ï¼ŒæŠŠé¡¹ç›®æ”¹æˆé™æ€åº“\n\nä¿®æ”¹å®Œæ¯•åï¼Œç¼–è¯‘ç¨‹åºï¼Œä½ ä¼šå‘ç°debugç›®å½•ä¸‹å¤šäº†é™æ€åº“æ–‡ä»¶.lib\n\nç„¶ååœ¨æˆ‘ä»¬å½“å‰çš„C++é¡¹ç›®ä¸­ï¼Œä¿®æ”¹é¡¹ç›®å±æ€§-é“¾æ¥å™¨-å¸¸è§„-é™„åŠ åº“ç›®å½•å’Œé¡¹ç›®å±æ€§-é“¾æ¥å™¨-è¾“å…¥-é™„åŠ ä¾èµ–é¡¹\n\n\næœ€åä»¥#include &quot;../Slist/Slinklist.h&quot;çš„å½¢å¼å¼•ç”¨é™æ€åº“\nä½ ä¼šå‘ç°ç›´æ¥å¼•ç”¨æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºè¿™ä¸ªå•é“¾è¡¨çš„åº“æ˜¯ç”¨Cè¯­è¨€å†™çš„ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨extern &quot;C&quot;æ¥å¼•ç”¨\n\nä½¿ç”¨äº†ä¹‹åï¼Œç¨‹åºæ­£å¸¸è°ƒç”¨äº†Cè¯­è¨€çš„åº“ï¼Œå¹¶æ‰“å°å‡ºäº†ç»“æœï¼\n\n4.2Cè¯­è¨€è°ƒç”¨C++é™æ€åº“æ¥ç€ï¼Œæˆ‘ä»¬å†å†™ä¸€ä¸ªç®€å•çš„C++ç¨‹åºï¼Œç”¨ä¸Šé¢åŒæ ·çš„æ–¹æ³•ç¼–è¯‘æˆé™æ€åº“ï¼Œå¹¶åœ¨Cè¯­è¨€çš„é¡¹ç›®ä¸­è°ƒç”¨å®ƒ\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ²¡æœ‰ä»»ä½•C++è¯­æ³•çš„C++é™æ€åº“è¢«æ­£å¸¸è°ƒç”¨å¹¶æ‰“å°å‡ºäº†ç»“æœ\n\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨extern &quot;C&quot;ï¼ŒCè¯­è¨€é¡¹ç›®å°±æ— æ³•æ­£å¸¸ä½¿ç”¨è¯¥é™æ€åº“\n\nè€Œå½“æˆ‘ä»¬åœ¨C++çš„é™æ€åº“ä¸­åŒ…å«C++çš„å¤´æ–‡ä»¶åï¼ŒCè¯­è¨€é¡¹ç›®ä¸­ä¹ŸæŠ¥é”™äº†ï¼\n#include &lt;iostream&gt;using namespace std;\n\nå…‰æ˜¯é“¾æ¥åº“å‡½æ•°å¤´æ–‡ä»¶å’Œå‘½åç©ºé—´å°±æŠ¥é”™äº†ï¼Œé‚£ä¸èƒ½ä½¿ç”¨å¸¦C++è¯­æ³•çš„å‡½æ•°ä¹Ÿæ˜¯æ¿ä¸Šé’‰é’‰çš„äº‹æƒ…äº†ï¼\n\nè€Œåœ¨å…·æœ‰extern &quot;C&quot;å±æ€§çš„è·¯å¾„ä¸­ï¼Œä¹Ÿä¸èƒ½åŒ…å«å‡½æ•°é‡è½½ï¼ŒVSä¼šæŠ¥é”™\n\nåœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œåœ¨Cè¯­è¨€é¡¹ç›®ä¸­ä¹Ÿæ˜¯æ— æ³•é€šè¿‡ç¼–è¯‘çš„\nnamespace muxue &#123;\tint a = 0;&#125;using namespace muxue;\n\n\nç°åœ¨å¯ä»¥ç¡®è®¤æˆ‘ä»¬çš„ç»“è®ºï¼Œåªæœ‰ä¸åŒ…å«ä»»ä½•C++çš„è¯­æ³•å’Œå‡½æ•°é‡è½½çš„C++é™æ€åº“ï¼Œæ‰èƒ½æ­£å¸¸è¢«Cè¯­è¨€é¡¹ç›®è°ƒç”¨ï¼\nå‹˜è¯¯ï¼Œä¸Šè¿°ç»“è®ºé”™è¯¯\n22-05-06ï¼Œåœ¨åŒå­¦çš„æç¤ºä¸‹ï¼Œå‘ç°äº†è¿™ä¸ªé”™è¯¯\n\nä¹‹å‰Cè°ƒç”¨C++çš„æ–¹å¼æœ‰é—®é¢˜ï¼Œå› ä¸ºæˆ‘æ˜¯ç›´æ¥æŠŠC++çš„è¯­æ³•æ”¾åˆ°äº†å¤´æ–‡ä»¶ä¸­ï¼Œåœ¨å±•å¼€çš„æ—¶å€™Cç¨‹åºç¼–è¯‘ä¼šæŠ¥é”™\nä½†å¦‚æœæŠŠC++çš„è¯­æ³•æ”¾å…¥cppæ–‡ä»¶ï¼Œå¤´æ–‡ä»¶ä¸­ä¸åŒ…å«çš„è¯ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ï¼\n\nå¯ä»¥çœ‹åˆ°åœ¨æœ€åçš„æµ‹è¯•é¡¹ç›®ä¸­ï¼ŒCè¯­è¨€ç¨‹åºæˆåŠŸè°ƒç”¨äº†c++çš„è¯­æ³•å¹¶æ­£ç¡®è¾“å‡ºäº†å†…å®¹\n\nè¿™ä¹Ÿèƒ½è§£é‡Šæˆ‘å…³äºè°·æ­ŒTCmallocåº“çš„ç–‘æƒ‘äº†ï¼Œçœ‹æ¥Cå’ŒC++çœŸçš„æ˜¯äº’é€šæœ‰æ— å•Šï¼\n\nç»“è¯­æœ¬ç¯‡ç¬”è®°è¯¦ç»†è§£é‡Šäº†C++ä¸­å‡½æ•°é‡è½½çš„ç±»å‹ï¼Œä»¥åŠèƒŒåçš„å®ç°åŸç†ã€‚\nè¿™ä¸ªåšå®¢èŠ±äº†æˆ‘æ•´æ•´4å°æ—¶çš„æ—¶é—´ï¼Œæ„Ÿè§‰å¾ˆå……å®ï¼\n\næ‰€ä»¥æ±‚ä¸ªèµä¸è¿‡åˆ†å§ï¼è°¢è°¢å¤§å®¶ï¼\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp"]},{"title":"ã€C++ã€‘æ–‡ä»¶IOæµ","url":"/posts/520771444/","content":"ä¸€èµ·æ¥åº·åº·C++ä¸­çš„æ–‡ä»¶IOæ“ä½œå§\n\n\n[TOC]\n1.operator boolä¹‹å‰å†™OJçš„æ—¶å€™ï¼Œå°±å·²ç»ç”¨è¿‡ä¸Šé¢è¿™ç§æ–¹å¼æ¥è·å–å¤šç»„æµ‹è¯•ç”¨ä¾‹\nstring s;while(cin&gt;&gt;s)&#123;\tcout &lt;&lt; s &lt;&lt; endl;&#125;\n\nä¸è¿‡ä¹‹å‰ä¸€ç›´æ²¡æœ‰å»äº†è§£è¿™é‡Œçš„åº•å±‚åŸç†æ˜¯ä»€ä¹ˆï¼Œå€Ÿæ­¤æœºä¼šä¸€å¹¶è¯´æ˜\nioæµå¯ä»¥è¿›è¡Œwhileåˆ¤æ–­çš„ä¾æ®ï¼Œæ˜¯å› ä¸ºåº“çš„æºç ä¸­é‡è½½äº†operator bool\n\næ²¡é”™ï¼Œoperatorä¸ä»…å¯ä»¥é‡è½½ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒè¿˜å¯ä»¥é‡è½½ä¸€ä¸ªç±»å‹ï¼å³å°†è¿™ä¸ªç±»è½¬æ¢ä¸ºboolç±»å‹ï¼Œreturn ä¸€ä¸ªboolç±»å‹çš„å€¼ç”¨äºwhileçš„åˆ¤æ–­\nåŒç†ï¼Œé‡è½½int/doubleè¿™äº›ç±»å‹éƒ½æ˜¯å¯è¡Œçš„ï¼\n\nå¦å¤–ï¼Œè¦æƒ³åœæ­¢ä¸Šé¢çš„å¤šç»„è¾“å…¥ï¼Œåœ¨VSä¸‹å¯ä»¥ç”¨ctrl+zçš„æ–¹å¼è§£å†³ï¼Œè€Œä¸è¦ç”¨ctrl+cç›´æ¥æ€æ‰è¿›ç¨‹\n\n\n2.C++æ–‡ä»¶IOæµ\nC++çš„æ–‡ä»¶ioç±»è®¾è®¡çš„è¾ƒä¸ºå¤æ‚ï¼Œå…¶ä¸­è¿˜å‡ºç°äº†è±å½¢ç»§æ‰¿ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„iostream\nä¸Šé¢æåˆ°çš„operator boolå°±æ˜¯åŸºç±»IOSå®ç°çš„ï¼Œå­ç±»éƒ½æ²¡æœ‰å»é‡å†™\n\ncoutä¸ºæ ‡å‡†è¾“å‡ºï¼Œå°†æ•°æ®ä»å†…å­˜æµä¸­è¾“å…¥åˆ°æ˜¾ç¤ºå™¨ä¸Š\ncinä¸ºæ ‡å‡†è¾“å…¥ï¼Œé€šè¿‡é”®ç›˜è¾“å…¥æ•°æ®åˆ°ç¨‹åºä¸­\ncerrç”¨äºæ ‡å‡†é”™è¯¯çš„è¾“å‡º\nclogè¿›è¡Œæ—¥å¿—è¾“å‡º\n\nå…¶ä¸­éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œç©ºæ ¼å’Œå›è½¦ä¼šè¢«å½“ä½œæ•°æ®ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²ä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå›è½¦å’Œç©ºæ ¼ä¹Ÿä¸èƒ½é€šè¿‡cinè¯»å…¥\nå¦‚æœéœ€è¦è¯»å…¥å¸¦ç©ºæ ¼çš„å®Œæ•´ä¸€è¡Œï¼Œå¯ä»¥ä½¿ç”¨getlineå‡½æ•°\n\nä¸ºä»€ä¹ˆcinå’Œcoutå¯ä»¥è¾“å…¥è¾“å‡ºæ‰€æœ‰ç±»å‹ï¼Ÿ\n\nå› ä¸ºåº“é‡Œé¢å·²ç»å°†æ‰€æœ‰ç±»å‹é€šè¿‡æ“ä½œç¬¦é‡è½½&lt;&lt; å’Œ&gt;&gt;å®ç°äº†ï¼Œè¾¾åˆ°äº†è‡ªåŠ¨ç±»å‹è¯†åˆ«çš„æ•ˆæœ\n3.æ–‡ä»¶æ“ä½œC++æ ‡å‡†åº“ä¸­æä¾›çš„æ‰“å¼€æ–¹å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒæƒ…å†µä¼ å…¥ä¸åŒçš„å€¼ï¼Œæˆ–è€…ä¸€æ¬¡æ€§ç”¨æŒ‰ä½æˆ–|ä¼ å…¥å¤šä¸ªæ‰“å¼€æ–¹æ³•\n\nåŒæ—¶å› ä¸ºC++ç±»å’Œå¯¹è±¡ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸éœ€è¦æ‰‹åŠ¨closeæ–‡ä»¶\n3.0 å…³äºæŒ‰ä½ä¸çš„è¯´æ˜è¿™é‡Œä¸ºä½•å¯ä»¥ç”¨æŒ‰ä½ä¸ä¼ å…¥å¤šä¸ªæ–¹æ³•ï¼Ÿ\nå‡è®¾è¿™äº›æ–¹æ³•å°±æ˜¯ç®€å•çš„æ•°å­—2/4/8ï¼ˆå¿…é¡»æ˜¯2çš„å€æ•°ï¼‰æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‰ä½ä¸äº†ä¹‹åï¼Œåœ¨æŒ‰ä½æˆ–ï¼Œåˆ¤æ–­æŸä¸€ä¸ªæ•°å­—æ˜¯å¦åœ¨å…¶ä¸­\n\nå¦‚æœæˆ–äº†ä¹‹åçš„æ•°å­—ç­‰äºå®ƒæœ¬èº«ï¼Œè¯´æ˜æ•°æ®åœ¨å…¶ä¸­ï¼\n\nä¸ºä»€ä¹ˆéœ€è¦æ˜¯2çš„å€æ•°å‘¢ï¼Ÿ\n\n\n\nè¿™ç§æ–¹æ³•åœ¨linuxä¸­å¸¸è§ï¼Œæ¯”å¦‚linuxç³»ç»Ÿçš„æ–‡ä»¶æ¥å£\n\n3.1 ifstream\nè¿™ä¸ªå¯¹è±¡æ˜¯ç”¨äºè¯»å–æ–‡ä»¶çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼ å…¥çš„æ‰“å¼€æ–¹æ³•ä¸ºin\nvoid test1()&#123;\tifstream ifs(&quot;test.txt&quot;);\twhile (ifs)\t&#123;\t\tchar ch = ifs.get();\t\tcout &lt;&lt; ch;\t&#125;&#125;\n\n\nå› ä¸ºé‡è½½äº†boolï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥ç”¨whileæ¥åˆ¤æ–­ç»“æŸï¼ŒæˆåŠŸè¾“å‡ºäº†æ–‡ä»¶ä¸­çš„å†…å®¹\nifstream ifs(&quot;test.txt&quot;);char ch;while (ifs &gt;&gt; ch)&#123;\tcout &lt;&lt; ch;&#125;\n\nç¬¬äºŒç§è¯»å–æ–¹æ³•é‡‡ç”¨äº†æµæ’å…¥&gt;&gt;ä¸Šé¢æåˆ°è¿‡ï¼Œæµæå–å’Œæ’å…¥çš„æ—¶å€™ï¼Œä¼šæŠŠç©ºæ ¼å’Œæ¢è¡Œå½“ä½œæ•°æ®çš„åˆ†éš”ç¬¦ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸èƒ½æ‰“å°å‡ºç©ºæ ¼å’Œæ¢è¡Œ\n\n3.2 ofstream\nå†™æ–‡ä»¶çš„æ–¹å¼åŒä¸Šï¼Œç”¨outæ–¹æ³•æ‰“å¼€æ–‡ä»¶å°±å¯ä»¥äº†ï¼ˆé»˜è®¤ä¼ çš„å°±æ˜¯outï¼‰\nofstream ifs2(&quot;test1.txt&quot;,ios::out);char str[] = &quot;i love u\\n&quot;;ifs2.write(str,sizeof(str));\n\n\nä¸è¿‡è¿™ä¸ªå’ŒCè¯­è¨€çš„wæ–¹æ³•ä¸€æ ·ï¼Œå†™å…¥çš„æ—¶å€™ä¼šè¦†ç›–æ–‡ä»¶ä¸­å·²æœ‰çš„å†…å®¹ã€‚å¦‚æœæƒ³è¿›è¡Œè¿½åŠ ï¼Œåˆ™éœ€è¦åœ¨åé¢åŠ ä¸Šappï¼›å¦‚æœæ˜¯æ‰§è¡ŒäºŒè¿›åˆ¶è¯»å†™ï¼Œåˆ™éœ€è¦ä¸ä¸Šios::binary\nofstream ifs2(&quot;test1.txt&quot;,ios::out|ios::app);char str[] = &quot;i love u&quot;;ifs2.write(str,sizeof(str));\n\n\nè¿è¡ŒæˆåŠŸåä¼šåœ¨æ–‡ä»¶å°¾éƒ¨è¿½åŠ å†…å®¹\næ³¨æ„ï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²ä¸èƒ½ç”¨stringè¿›è¡Œå¤„ç†ï¼Œå› ä¸ºstringå†…éƒ¨åªå­˜äº†ä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²ç©ºé—´çš„æŒ‡é’ˆï¼Œå†™å…¥stringç›¸å½“äºæŠŠæŒ‡é’ˆå†™å…¥è¿›æ–‡ä»¶ä¸­ï¼Œæ˜¯ä¹ˆæœ‰ç”¨çš„ï¼\n\næµæ’å…¥æ–‡æœ¬ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç”¨&lt;&lt;è¿›è¡Œæå–çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨stringäº†\nvoid test2()&#123;\tifstream ifs(&quot;test.txt&quot;);\tofstream ofs(&quot;test1.txt&quot;);\tchar ch;\tch = ifs.get();\twhile (~ch)\t&#123;\t\tofs &lt;&lt; ch;\t\tcout &lt;&lt; ch;\t\tch = ifs.get();\t&#125;\tstring s(&quot;i love you&quot;);\tofs &lt;&lt; s;&#125;\n\nç¨‹åºè¿è¡Œåï¼Œä¼šæŠŠtest.txtä¸­çš„å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ŒåŒæ—¶å†™å…¥åˆ°test1.txt\næœ€åè¿˜ä¼šå†™å…¥ä¸€ä¸ªstringçš„å†…å®¹\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒç”¨&lt;&lt;çš„æ—¶å€™ï¼Œå°±å’Œcin&lt;&lt;sä¸€æ ·ï¼Œè°ƒç”¨çš„æ˜¯stringé‡è½½çš„æµæå–æ“ä½œç¬¦\nåº•å±‚å®ç°çš„æ—¶å€™ä¼šå°†å…¶è½¬ä¸ºCè¯­è¨€çš„å­—ç¬¦ä¸²ï¼Œä»è€Œå†™å…¥åˆ°äº†æ–‡ä»¶ä¸­\n\næ‰€ä»¥å½“æˆ‘ä»¬éœ€è¦å†™å…¥ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥é‡è½½æµæå–æ“ä½œç¬¦ï¼Œä¸ä»…å¯ä»¥æ›´æ–¹ä¾¿çš„æ‰“å°ï¼Œè¿˜å¯ä»¥å†™å…¥åˆ°æ–‡ä»¶ä¸­\n\n\n3.3 ostringstream&#x2F;istringstreamè¿™ä¸ªç±»å¯ä»¥å°†ä¸åŒçš„ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²\nè¿™ç§æ“ä½œè¢«ç§°ä¸ºåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œåœ¨å¤„ç†è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™éå¸¸å¥½ç”¨\nstruct Date&#123;public:\tfriend ostream&amp; operator &lt;&lt; (ostream&amp; out, const Date&amp; d);\tfriend istream&amp; operator &gt;&gt; (istream&amp; in, Date&amp; d);\tDate(int y=0, int m=0, int d=0)\t&#123;\t\t_year = y;\t\t_month = m;\t\t_day = d;\t&#125;private:\tint _year;\tint _month;\tint _day;&#125;;istream&amp; operator &gt;&gt; (istream&amp; in, Date&amp; d)&#123;\tin &gt;&gt; d._year &gt;&gt; d._month &gt;&gt; d._day;\treturn in;&#125;ostream&amp; operator &lt;&lt; (ostream&amp; out, const Date&amp; d)&#123;\tout &lt;&lt; d._year &lt;&lt; &quot; &quot; &lt;&lt; d._month &lt;&lt; &quot; &quot; &lt;&lt; d._day;\treturn out;&#125;void test4()&#123;\tint i = 123;\tdouble d = 44.55;\tostringstream oss;//åºåˆ—åŒ–\toss &lt;&lt; i;\tstring stri = oss.str();\toss.str(&quot;&quot;);//æ¸…ç©ºoss\toss &lt;&lt; d;\tstring strd = oss.str();\tcout &lt;&lt; strd&lt;&lt; endl;\toss.str(&quot;&quot;);//æ¸…ç©ºoss\tDate d1(2022, 10, 11);\toss &lt;&lt; d1;\tstring strdt = oss.str();\tcout &lt;&lt; strdt &lt;&lt; endl;\tistringstream iss(strdt);//ååºåˆ—\tDate d2;\tiss &gt;&gt; d2;\tcout &lt;&lt; d2 &lt;&lt; endl;&#125;\n\n\n3.4 stringstreamè¿™ä¸ªå¯¹è±¡å¯ä»¥ç”¨äºå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å°†å…¶ä»–ç±»å‹è½¬ä¸ºstr\nstringstream sstream;// å°†å¤šä¸ªå­—ç¬¦ä¸²æ”¾å…¥ sstream ä¸­sstream &lt;&lt; &quot;first&quot; &lt;&lt; &quot; &quot; &lt;&lt; &quot;string,&quot;;sstream &lt;&lt; &quot; second string&quot;;cout &lt;&lt; &quot;strResult is: &quot; &lt;&lt; sstream.str() &lt;&lt; endl;// æ¸…ç©º sstreamsstream.str(&quot;&quot;);sstream &lt;&lt; &quot;third string&quot;;cout &lt;&lt; endl;cout &lt;&lt; &quot;After clear, strResult is: &quot; &lt;&lt; sstream.str() &lt;&lt; endl;\n\n\n3.5ä½¿ç”¨stringstreamçš„æ³¨æ„äº‹é¡¹\nstringstreamå®ç°è½¬æ¢ï¼Œå®é™…ä¸Šæ˜¯ç»´æŠ¤äº†ä¸€ä¸ªstringå¯¹è±¡å®ç°çš„\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨str(&quot;&quot;)æ¸…ç©ºé‡Œé¢çš„stringå¯¹è±¡ï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²\n\nå¤šæ¬¡æ•°æ®ç±»å‹è½¬æ¢çš„æ—¶å€™ï¼Œéœ€è¦ç”¨clear()æ¥æ¸…ç©ºï¼Œæ‰èƒ½æ­£ç¡®è½¬æ¢ã€‚ä¸è¿‡clear()ä¸ä¼šæ¸…ç©ºåº•å±‚çš„stringå¯¹è±¡\n\nå› ä¸ºä½¿ç”¨çš„æ˜¯stringå¯¹è±¡ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦æ ¼å¼åŒ–æ§åˆ¶ï¼Œå¯ä»¥è‡ªåŠ¨æ¨å¯¼ç±»å‹\n\n\nstringstreamsåœ¨è½¬æ¢ç»“å°¾æ—¶(å³æœ€åä¸€ä¸ªè½¬æ¢å),ä¼šå°†å…¶å†…éƒ¨çŠ¶æ€è®¾ç½®ä¸ºbadbitå› æ­¤ä¸‹ä¸€æ¬¡è½¬æ¢æ˜¯å¿…é¡»è°ƒç”¨clear()å°†çŠ¶æ€é‡ç½®ä¸ºgoodbitæ‰å¯ä»¥ç»§ç»­è½¬æ¢\n\nè¿™é‡Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨stringstreamæ“ä½œåï¼Œæˆ‘ä»¬æ²¡æœ‰è¿›è¡Œclearï¼Œä¼šå‘ç°åç»­çš„doubleç±»å‹è½¬æ¢å¤±è´¥äº†\n\næ‰§è¡Œäº†clearä¹‹åï¼Œè½¬æ¢æˆåŠŸï¼\nç»“è¯­å…³äºC++IOæµæ“ä½œçš„åŸºæœ¬è®¤è¯†åˆ°è¿™é‡Œå°±overäº†ã€‚\nå› ä¸ºåœ¨å®é™…ä¸­ç”¨çš„å¹¶ä¸ç®—å¤šï¼Œæ‰€ä»¥è¿™éƒ¨åˆ†çš„å†…å®¹å¤§å¤šæ•°æ˜¯äº†è§£ä¸€äºŒï¼ŒçŸ¥é“å¦‚ä½•ä½¿ç”¨ï¼Œä»¥åŠ3.0ä¸­æåˆ°çš„æŒ‰ä½ä¸æ“ä½œæ˜¯æ€ä¹ˆå®ç°çš„å°±OKäº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ–‡ä»¶","Cpp"]},{"title":"ã€C++ã€‘ç‰¹æ®Šç±»è®¾è®¡ | å•ä¾‹æ¨¡å¼","url":"/posts/3618449948/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥åº·åº·ä¸€äº›ç‰¹æ®Šç±»çš„å®ç°æ–¹å¼ï¼\n\n\n1.ä¸æ”¯æŒæ‹·è´çš„ç±»åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæ¯”å¦‚æ™ºèƒ½æŒ‡é’ˆã€å¤šçº¿ç¨‹æ“ä½œã€IOæµç­‰æ˜¯ä¸æ”¯æŒæ‹·è´çš„ã€‚å› ä¸ºå®ƒä»¬çš„æ‹·è´ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ï¼Œç§‰ç€è§£å†³ä¸äº†é—®é¢˜ï¼Œå°±è§£å†³æå‡ºé—®é¢˜çš„äººçš„æ€è·¯ï¼Œç¦æ­¢äº†è¿™äº›ç±»çš„æ‹·è´\nC++98ä¸­ï¼Œå¯ä»¥å°†æ‹·è´æ„é€ å’Œ=é‡è½½åªå£°æ˜ä¸å®šä¹‰ï¼Œå¹¶å°†å…¶è®¿é—®æƒé™è®¾ç½®ä¸ºç§æœ‰\n\nè®¾ç½®ä¸ºç§æœ‰å¯ä»¥é˜²æ­¢å…¶ä»–äººåœ¨ç±»å¤–å®šä¹‰\n\nC++11ä¸­ï¼Œæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å…³é”®å­—deleteæ¥ç¦æ­¢å®ç°æ‹·è´æ„é€ å’Œ =é‡è½½\n// ç¦æ­¢æ‹·è´çš„ç±»class BanCopy&#123;public:\t//æ„é€ \tBanCopy()\t&#123;\t\t_a = _b = 0;\t&#125;\t\t//C++11\tBanCopy(const BanCopy&amp; c) = delete;\tBanCopy&amp; operator=(const BanCopy&amp; c) = delete;private:\t//C++98çš„åŠæ³•ï¼Œå£°æ˜ä¸ºç§æœ‰ä¸”ä¸å®šä¹‰\t//BanCopy(const BanCopy&amp; c);\t//BanCopy&amp; operator=(const BanCopy&amp; c);\t\tint _a;\tint _b;&#125;;\n\n\n2.åªèƒ½åœ¨å †ä¸Šåˆ›å»ºçš„ç±»æ“ä½œæ–¹æ³•å’Œä¸Šé¢çš„æ€è·¯ç±»ä¼¼ï¼Œåªéœ€è¦æŠŠæ„é€ å‡½æ•°ç§æœ‰åŒ–å°±å¯ä»¥äº†\n\nåŒæ—¶è¿˜éœ€è¦å–æ¶ˆæ‹·è´æ„é€ ï¼Œå¦åˆ™å¯ä»¥ç”¨æ‹·è´æ„é€ åœ¨æ ˆä¸Šå¼€ä¸€ä¸ªæ–°çš„å¯¹è±¡\nèµ‹å€¼é‡è½½ä¸ä¸€å®šéœ€è¦å–æ¶ˆï¼Œå› ä¸ºèµ‹å€¼é‡è½½æ— æ³•åˆ›å»ºæ–°å¯¹è±¡\n\n// åªèƒ½åœ¨å †ä¸Šå¼€è¾Ÿclass HeapOnly &#123;public:\tstatic HeapOnly* CreatObj(int a,int b)\t&#123;\t\treturn new HeapOnly(a, b);\t&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\tHeapOnly()\t\t:_a(0),\t\t_b(0)\t&#123;&#125;\tHeapOnly(int a,int b)\t\t:_a(a),\t\t_b(b)\t&#123;&#125;\t// åŒæ—¶æ‹·è´æ„é€ ä¹Ÿéœ€è¦ç§æœ‰ï¼Œç¦æ­¢æ‹·è´åˆ›å»ºå¯¹è±¡\tHeapOnly(const HeapOnly&amp; h) = delete;\t// èµ‹å€¼ä¸ä¸€å®šéœ€è¦deleteï¼Œå› ä¸ºèµ‹å€¼ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡\t// HeapOnly&amp; operator=(const HeapOnly&amp; h) = delete;\tint _a;\tint _b;&#125;;\n\nè¿™æ ·å†™äº†ä¹‹åï¼Œæƒ³åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è°ƒç”¨staticå‡½æ•°æ¥æ“ä½œ\n\nè€Œä¸”å› ä¸ºæˆ‘ä»¬å¹¶æ²¡æœ‰ç§æœ‰åŒ–ææ„å‡½æ•°ï¼Œæ‰€ä»¥ææ„æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„ï¼\n2.1 å¦ç±»æ“ä½œè¿˜å¯ä»¥ä½¿ç”¨staticå‡½æ•°æä¾›ä¸€ä¸ªæ¥å£æ¥ä¸“é—¨å¤„ç†ææ„ï¼Œå†æŠŠææ„å‡½æ•°è®¾è®¡æˆç§æœ‰ï¼Œæ„é€ å‡½æ•°å…¬æœ‰ï¼›\n// åªèƒ½åœ¨å †ä¸Šå¼€è¾Ÿclass HeapOnly &#123;public:\tstatic HeapOnly* CreatObj(int a,int b)\t&#123;\t\treturn new HeapOnly(a, b);\t&#125;\tstatic void DelObj(HeapOnly* ptr)\t&#123;\t\tdelete ptr;\t&#125;\t// å› ä¸ºææ„ç§æœ‰äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠŠæ„é€ å…¬æœ‰\tHeapOnly()\t\t:_a(0),\t\t_b(0)\t&#123;&#125;\tHeapOnly(int a, int b)\t\t:_a(a),\t\t_b(b)\t&#123;&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\t// ....\t// åŒæ—¶æ‹·è´æ„é€ ä¹Ÿéœ€è¦ç§æœ‰ï¼Œç¦æ­¢æ‹·è´åˆ›å»ºå¯¹è±¡\tHeapOnly(const HeapOnly&amp; h) = delete;\t// èµ‹å€¼ä¸ä¸€å®šéœ€è¦deleteï¼Œå› ä¸ºèµ‹å€¼ä¸èƒ½åˆ›å»ºæ–°å¯¹è±¡\t// HeapOnly&amp; operator=(const HeapOnly&amp; h) = delete;\t~HeapOnly()\t&#123;\t\t_a = _b = 0;\t&#125;\tint _a;\tint _b;&#125;;\n\nè¿™æ ·è®¾è®¡äº†ä¹‹åï¼Œç›´æ¥åœ¨æ ˆä¸Š&#x2F;å…¨å±€åŒºå¼€è¾Ÿç©ºé—´ä¼šæŠ¥é”™ï¼Œä½†æ˜¯newä¸å—å½±å“ã€‚\nåœ¨æ ˆä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç¼–è¯‘æ­¤ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºææ„å‡½æ•°æ— æ³•è¢«æ­£å¸¸è®¿é—®ï¼Œæ‰€ä»¥æ— æ³•ç¼–è¯‘æˆåŠŸï¼›\n$ g++ test.cpp -o testtest.cpp: In function â€˜int main()â€™:test.cpp:133:14: error: â€˜HeapOnly::~HeapOnly()â€™ is private within this context     HeapOnly h3;              ^~test.cpp:122:2: note: declared private here  ~HeapOnly()  ^\n\nå› ä¸ºææ„ç§æœ‰äº†ï¼Œæ‰€ä»¥deleteä¸èƒ½æ­£ç¡®è°ƒç”¨ææ„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨staticå‡½æ•°æŒ‡å®šæŒ‡é’ˆè¿›è¡Œææ„\n\né™¤äº†staticå‡½æ•°çš„è¿™ç§åŠæ³•ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ³•å­å¯ä»¥ä¸ä¼ å…¥å¯¹è±¡çš„æŒ‡é’ˆï¼›\n//åˆ é™¤è‡ªå·±void DelObj()&#123;    delete this;&#125;\t\n\nç›´æ¥ç”¨å¯¹è±¡è°ƒç”¨æ­¤æˆå‘˜å‡½æ•°å³å¯\nHeapOnly* h6 = new HeapOnly();h6-&gt;DelObj();\n\nåªä¸è¿‡è¿™æ ·æ“ä½œå¯èƒ½æœ‰äº›ä¸å¤ªå¥½ç†è§£ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®šå–½ï¼\n3.åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºçš„ç±»ç›¸åŒçš„æ€è·¯ï¼Œè®¾è®¡ä¸€ä¸ªstaticçš„åˆ›å»ºå¯¹è±¡å‡½æ•°ï¼Œæ¥åˆ›å»ºä¸€ä¸ªæ ˆä¸Šçš„å¯¹è±¡return\n// åªèƒ½åœ¨æ ˆä¸Šå¼€è¾Ÿclass StackOnly&#123;public:\tstatic StackOnly CreatObj()\t&#123;\t\treturn StackOnly();//åˆ›å»ºåŒ¿åå¯¹è±¡è¿”å›ï¼Œç¼–è¯‘å™¨ç›´æ¥ä¼˜åŒ–ä¸ºä¸€ä¸ªæ„é€ \t\t//è¿™ä¹ˆå†™çš„è¯ï¼Œå°±ä¸èƒ½ç¦æ­¢æ‹·è´æ„é€ \t\t//StackOnly st;\t\t//return st;\t&#125;\t// ä¸èƒ½ç¦ç”¨æ‹·è´æ„é€ ï¼Œå› ä¸ºreturnçš„æ—¶å€™å¯èƒ½ä¼šè°ƒç”¨ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–æ˜¯å–å†³äºå¹³å°çš„ï¼‰private:\tStackOnly()\t&#123;\t\t_a = _b = 0;\t&#125;\tint _a;\tint _b;&#125;;\n\nè¿™é‡Œæˆ‘ä»¬å¿…é¡»è¦æœ‰æ‹·è´æ„é€ ï¼Œå› ä¸ºreturnçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¦‚æœä¸ä¼˜åŒ–ï¼Œé‚£å°±æ˜¯æ„é€ +æ‹·è´ï¼Œä¼˜åŒ–äº†ä¹‹åæ‰èƒ½å˜æˆç›´æ¥æ„é€ \nè¿™æ˜¯å–å†³äºå¹³å°çš„ï¼Œå¦‚æœç¦ç”¨äº†æ‹·è´ï¼Œä¸‡ä¸€æœ‰äº›å¹³å°ç¼–è¯‘å™¨æ²¡æœ‰åšè¿™ç§ä¼˜åŒ–ï¼Œä½ çš„ä»£ç å°±è·‘ä¸åŠ¨äº†\n\nå¦å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ä¾¿æ˜¯ç¦ç”¨æ‰operator new()ï¼Œä»¥æ­¤ç¦æ­¢äº†åœ¨å †ä¸Šåˆ›å»ºç©ºé—´ã€‚å¦‚æœç”¨è¿™ç§åŠæ³•ï¼Œæ„é€ å‡½æ•°å°±ä¸éœ€è¦è®¾è®¡ä¸ºç§æœ‰äº†\n\nä½†æ˜¯è¿™ä¸¤ä¸ªåŠæ³•éƒ½æœ‰ä¸ªç¼ºé™·ï¼Œé‚£å°±æ˜¯ç”¨æˆ·å¯ä»¥ç”¨æ‹·è´æ„é€ åœ¨é™æ€åŒºä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¿™åªèƒ½ç®—ä¸ªå°ç‘•ç–µï¼Œå¯ä»¥ä¸ç”¨ç®¡å®ƒ\n\n4.å•ä¾‹æ¨¡å¼å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼çš„å…¶ä¸­ä¸€ç§\n\nè®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ä¸”è¾ƒä¸ºæµè¡Œçš„ä»£ç è®¾è®¡ç»éªŒæ€»ç»“ã€‚\nè®¾è®¡æ¨¡å¼æœ‰éå¸¸å¤šï¼Œæ„Ÿå…´è¶£çš„è€å“¥å¯ä»¥å»æœä¸“é—¨çš„åšå®¢äº†è§£ä¸€ä¸‹\n\nå•ä¾‹æ¨¡å¼ï¼šä¸€ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚è¯¥æ¨¡å¼å¯ä»¥ä¿è¯åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼ŒæŸä¸€ä¸ªç±»åªä¼šæœ‰ä¸€ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡\n\nä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯æ˜¯ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å°±å¯ä»¥è®¾è®¡æˆå•ä¾‹æ¨¡å¼ï¼Œä¿è¯æ‰€æœ‰äººè®¿é—®åˆ°çš„é…ç½®ä¿¡æ¯å®Œå…¨ç›¸åŒï¼Œä¿®æ”¹çš„æ—¶å€™ä¹Ÿèƒ½åŒæ­¥ç»™æ‰€æœ‰äººã€‚\n\n4.1 é¥¿æ±‰é¥¿æ±‰æ¨¡å¼é‡‡ç”¨staticæˆå‘˜æ¥å®ç°å•ä¾‹ï¼Œæ€è·¯å’Œä¸Šé¢ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè®©æ„é€ å‡½æ•°ç§æœ‰è€Œæ— æ³•åˆ›å»ºå…¶ä»–å¯¹è±¡\n\né‚£æˆ‘ä»¬çš„staticå¯¹è±¡è¦æ€ä¹ˆåˆ›å»ºå‘¢ï¼Ÿ\n\nå…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„ä»£ç \n// å•ä¾‹æ¨¡å¼ï¼ˆé¥¿æ±‰ï¼‰// é¥¿æ±‰æ¨¡å¼é‡‡ç”¨staticå¯¹è±¡ï¼Œæ˜¯åœ¨mainå‡½æ•°ä¹‹å‰åˆ›å»ºçš„// ä¼šå½±å“ç¨‹åºå¯åŠ¨çš„é€Ÿåº¦class Singleton&#123;public:\tstatic Singleton* GetInstance()\t&#123;\t\treturn _sgp;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt; &quot;----- System Info -----&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     CPU &quot; &lt;&lt; _cpu &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     GPU &quot; &lt;&lt; _gpu &lt;&lt; endl;\t\tcout &lt;&lt; &quot;     MEM &quot; &lt;&lt; _mem &lt;&lt; endl;\t\tcout &lt;&lt; &quot;-----     End     -----&quot; &lt;&lt; endl;\t&#125;private:\tSingleton()\t\t:_cpu(&quot;i9-12900ks&quot;),\t\t_gpu(&quot;RTX 4090&quot;),\t\t_mem(&quot;128GB&quot;)\t&#123;&#125;    Singleton(const Singleton&amp; s) = delete;    Singleton&amp; operator==(const Singleton&amp; s) = delete;\tstring _cpu;\tstring _mem;\tstring _gpu;\t//static Singleton _sg;//å£°æ˜\tstatic Singleton* _sgp;//å£°æ˜&#125;;//Singleton Singleton::_sg;//å®šä¹‰Singleton* Singleton::_sgp = new Singleton();//å®šä¹‰//å› ä¸ºè¿™é‡Œçš„sgå’Œsgpéƒ½æ˜¯å±äºç±»é‡Œé¢çš„æˆå‘˜ï¼Œä¸å—è®¿é—®é™å®šç¬¦çš„é™åˆ¶ï¼Œæ‰å¯ä»¥æ­£å¸¸è°ƒç”¨æ„é€ å‡½æ•°\n\nå› ä¸º_sg/_sgpè¿™ä¸¤ä¸ªæˆå‘˜éƒ½åœ¨ç±»å†…éƒ¨å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬å±äºæ•´ä¸ªç±»åŸŸï¼Œå¯ä»¥æˆåŠŸè®¿é—®åˆ°å†…éƒ¨çš„æ„é€ å‡½æ•°ã€‚\nè€Œåœ¨å…¶ä»–åœ°æ–¹çš„å¯¹è±¡ç”±äºæ²¡æœ‰åŠæ³•è®¿é—®åˆ°æ„é€ å‡½æ•°ï¼Œè€Œæ— æ³•åˆ›å»º\n\nç”±äºé¥¿æ±‰æ¨¡å¼æ˜¯staticå¯¹è±¡ï¼Œå…¶åˆå§‹åŒ–æ˜¯åœ¨mainå‡½æ•°ä¹‹å‰è¿›è¡Œçš„ã€‚å¦‚æœé‡‡ç”¨é¥¿æ±‰æ¨¡å¼çš„å•ä¾‹è¿‡å¤šï¼Œç¨‹åºè¿Ÿè¿Ÿæ²¡æœ‰è¿è¡Œåˆ°mainå¤„ï¼Œä¼šå¯¼è‡´ä¸€ä¸ªç¨‹åºå¯åŠ¨å¾ˆæ…¢\n4.2 æ‡’æ±‰ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡\n// æ‡’æ±‰// ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡class InfoMgr&#123;public:\tstatic InfoMgr* GetInstance()\t&#123;\t\tif (_sp == nullptr)\t\t&#123;\t\t\t_sp = new InfoMgr;\t\t&#125;\t\treturn _sp;\t&#125;\tvoid SetAddress(const string&amp; s)\t&#123;\t\t_address = s;\t&#125;\tstring&amp; GetAddress()\t&#123;\t\treturn _address;\t&#125;private:\tInfoMgr()\t\t:_address(&quot;bilibili&quot;),\t\t_secretKey(1234)\t&#123;&#125;\tInfoMgr(const InfoMgr&amp;) = delete;\tInfoMgr&amp; operator==(const InfoMgr&amp;) = delete;\tstring _address;\tint _secretKey;\tstatic InfoMgr* _sp; // å£°æ˜&#125;;InfoMgr* InfoMgr::_sp = nullptr; // å®šä¹‰\n\nè¿™é‡Œæˆ‘ä»¬å°†å†…éƒ¨çš„_spå®šä¹‰ä¸ºäº†nullptrï¼Œå¦‚æœè°ç¬¬ä¸€ä¸ªè°ƒç”¨ï¼Œåšä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæ˜¯nullptrå°±åˆ›å»ºå®ä¾‹\n\nç”±äºæ‡’æ±‰å¯èƒ½ä¼šå‡ºç°å¤šä¸ªçº¿ç¨‹åŒæ—¶ç¬¬ä¸€æ¬¡è®¿é—®è¿™ä¸ªå•ä¾‹ï¼Œå°±ä¼šå¯¼è‡´åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¸­éƒ½åœ¨åˆå§‹åŒ–è¿™ä¸ªå•ä¾‹ï¼Œè€ŒæŸä¸€æ¬¡åˆå§‹åŒ–ä¼šå¤±è´¥ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬å¯¹å•ä¾‹è¿›è¡ŒåŠ é”æ“ä½œ\n\nå¤šçº¿ç¨‹åŠ é”é—®é¢˜ï¼Œå‚è€ƒlinuxä¸‹çš„æ“ä½œï¼šC++çº¿ç¨‹æ“ä½œï¼›C++çš„æ“ä½œä»¥è¿™ä¸ªæ€è·¯ï¼Œä¿®æ”¹ä¸ºä½¿ç”¨C++çš„threadåº“å³å¯\n\n4.3 äºŒè€…ä¼˜ç¼ºç‚¹é¥¿æ±‰çš„ä¼˜ç‚¹\n\nç®€å•æ˜“ç”¨\nå› ä¸ºæ˜¯åœ¨mainå‡½æ•°å‰åˆå§‹åŒ–ï¼Œå¤„äºå•çº¿ç¨‹çŠ¶æ€ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜\n\nç¼ºç‚¹ï¼š\n\nä½†æ˜¯åˆå§‹åŒ–é¡ºåºä¸ç¡®å®šï¼Œå¦‚æœæœ‰å…¶ä»–ç±»çš„ä¾èµ–å…³ç³»ï¼Œå¯èƒ½ä¼šå‡ºç°ä¾èµ–é¡¹Båœ¨å½“å‰å•ä¾‹Aååˆå§‹åŒ–ï¼Œå¯¼è‡´Aæ— æ³•å®Œæˆåˆå§‹åŒ–è€Œç¨‹åºboom\né¥¿æ±‰å•ä¾‹æ˜¯åœ¨mainå‡½æ•°ä¹‹å‰åˆ›å»ºçš„ï¼Œæ‹–æ…¢ç¨‹åºå¯åŠ¨é€Ÿåº¦\n\n\næ‡’æ±‰çš„ä¼˜ç‚¹\n\nç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–å˜é‡ï¼Œæé«˜ç¨‹åºå¯åŠ¨é€Ÿåº¦\nå¯ä»¥æ§åˆ¶åˆå§‹åŒ–é¡ºåºï¼ŒæŒ‰é¡ºåºæ¥åˆå§‹åŒ–ï¼Œé¿å…ä¾èµ–å…³ç³»é—®é¢˜\n\nç¼ºç‚¹ï¼š\n\nç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼ŒåŠ è½½ä¼šæ…¢ä¸€äº›\n\nåŸºäºè¿™ä¸¤ä¸ªçš„ä¼˜ç¼ºç‚¹ï¼Œè®©æˆ‘æƒ³å‡ºæ¥ä¸€ä¸ªä¸ç®—åŠæ³•çš„åŠæ³•\nå¦‚æœæƒ³æ§åˆ¶é¥¿æ±‰çš„åˆå§‹åŒ–é¡ºåºï¼Œå¯ä»¥åœ¨mainä¸€å¯åŠ¨çš„æ—¶å€™ï¼Œå°±è°ƒç”¨ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°æ¥åˆå§‹åŒ–è¿™äº›å•ä¾‹ã€‚è¿™æ ·ä¾æ—§ä¼šæ‹–æ…¢è¿›ç¨‹å¯åŠ¨çš„é¡ºåºï¼Œä½†è§£å†³äº†åˆå§‹åŒ–é¡ºåºçš„é—®é¢˜ï¼\n\nå®é™…ä¸Šï¼Œä¸€ä¸ªå•ä¾‹ç©¶ç«Ÿè¦ä¸è¦åœ¨mainä¹‹å‰å°±åˆå§‹åŒ–éœ€è¦çœ‹å…·ä½“æƒ…å†µçš„ï¼\n\n4.4 å•ä¾‹é‡Šæ”¾èµ„æºä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå•ä¾‹çš„ç±»æ˜¯ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾çš„ï¼Œå› ä¸ºæ•´ä¸ªè¿›ç¨‹éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªå•ä¾‹\nä½†å¦‚æœæˆ‘ä»¬çš„å•ä¾‹å’Œä¸€ä¸ªæ–‡ä»¶æŒ‚é’©ï¼Œè¿›ç¨‹ç»“æŸçš„æ—¶å€™ï¼Œéœ€è¦å°†å•ä¾‹é‡Œé¢çš„ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶é‡Œé¢ï¼Œè¦æ€ä¹ˆæ“ä½œï¼Ÿ\nå¯ä»¥å†™ä¸€ä¸ªåƒåœ¾å›æ”¶ç±»ï¼Œåœ¨æœ€åè°ƒç”¨ææ„æ¥å›æ”¶èµ„æº\n// æ‡’æ±‰ -- ä¸€å¼€å§‹ä¸åˆ›å»ºå¯¹è±¡ï¼Œç¬¬ä¸€è°ƒç”¨GetInstanceå†åˆ›å»ºå¯¹è±¡class InfoMgr&#123;public:\tstatic InfoMgr* GetInstance()\t&#123;\t\t// è¿˜éœ€è¦åŠ é”ï¼Œç•™ç€åé¢å¡«å‘\t\tif (_spInst == nullptr)\t\t&#123;\t\t\t_spInst = new InfoMgr;\t\t&#125;\t\treturn _spInst;\t&#125;\tvoid SetAddress(const string&amp; s)\t&#123;\t\t_address = s;\t&#125;\tstring&amp; GetAddress()\t&#123;\t\treturn _address;\t&#125;\t// å®ç°ä¸€ä¸ªå†…åµŒåƒåœ¾å›æ”¶ç±»    \tclass CGarbo &#123;\tpublic:\t\t~CGarbo() &#123;\t\t\tif (_spInst)\t\t\t\tdelete _spInst;\t\t&#125;\t&#125;;\t// å®šä¹‰ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œç¨‹åºç»“æŸæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨å®ƒçš„ææ„å‡½æ•°ä»è€Œé‡Šæ”¾å•ä¾‹å¯¹è±¡\tstatic CGarbo Garbo;//å£°æ˜private:\tInfoMgr()\t\t:_address(&quot;bilibili&quot;),\t\t_secretKey(1234)\t&#123;&#125;\t~InfoMgr()\t&#123;\t\t// å‡è®¾ææ„æ—¶éœ€è¦ä¿¡æ¯å†™åˆ°æ–‡ä»¶æŒä¹…åŒ–\t&#125;\tInfoMgr(const InfoMgr&amp;) = delete;\tstring _address;\tint _secretKey;\tstatic InfoMgr* _spInst; // å£°æ˜&#125;;InfoMgr* InfoMgr::_spInst = nullptr; // å®šä¹‰InfoMgr::CGarbo Garbo;//å®šä¹‰\n\n4.5 staticå•ä¾‹æœ‰äººä¼šé‡‡ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°æ‡’æ±‰çš„å•ä¾‹ï¼Œå…¶é‡‡ç”¨staticå¯¹è±¡ï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°å•ä¾‹ï¼\n\nå…¨å±€staticå˜é‡ä¼šåœ¨mainä¹‹å‰åˆå§‹åŒ–\nå±€éƒ¨staticå˜é‡ä¼šåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™åˆå§‹åŒ–\n\nclass Singleton&#123;public:\tstatic Singleton* GetInstance()\t&#123;\t\t// å±€éƒ¨çš„é™æ€å¯¹è±¡ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–\t\tstatic Singleton _s;\t\treturn &amp;_s;\t&#125;private:\t// æ„é€ å‡½æ•°ç§æœ‰\tSingleton()&#123;&#125;;\t// æ‹·è´æ„é€ /èµ‹å€¼é‡è½½å–æ¶ˆ\tSingleton(Singleton const&amp;) = delete;\tSingleton&amp; operator=(Singleton const&amp;) = delete;&#125;;\n\nä½†æ˜¯ï¼è¿™ä¸ªæ“ä½œå¹¶ä¸é€šç”¨ï¼Œå…¶å–å†³äºç¼–è¯‘å™¨å’Œå¹³å°çš„å®ç°ã€‚ç‰¹åˆ«æ˜¯åœ¨C++11ä¹‹å‰ï¼›\nC++11ä¹‹åï¼Œä¿è¯äº†å±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–æ—¶çš„çº¿ç¨‹å®‰å…¨ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥é‡‡ç”¨è¿™ç§åŠæ³•æ¥å®ç°å•ä¾‹ã€‚\n\nC++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\n\nä½†æ˜¯ï¼ä¸€å®šè¦ç¡®è®¤ä½ çš„ä»£ç åªåœ¨C++11çš„ç¯å¢ƒä¸‹è¿è¡Œï¼ï¼\n4.6 çº¿ç¨‹å®‰å…¨åœ¨åˆ›å»ºå•ä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œå…·ä½“è¯·å‚è€ƒlinuxåšå®¢ä¸­çº¿ç¨‹æ± å•ä¾‹ç±»å¯¹çº¿ç¨‹å®‰å…¨çš„å¤„ç†ã€‚ç‰¹åˆ«æ˜¯å…¶ä¸­è¿›è¡Œäº†ä¸¤æ¬¡nullptrçš„åˆ¤æ–­çš„åŸå› \n5.ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»C++98ä¸­ï¼Œåªéœ€è¦å°†æ„é€ å‡½æ•°ç§æœ‰ï¼Œæ´¾ç”Ÿç±»æ— æ³•è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ— æ³•ç»§æ‰¿\n// c++98,æ„é€ ç§æœ‰class A &#123;public:\t// é¢å¤–æä¾›ä¸€ä¸ªè·å–å¯¹è±¡çš„æ–¹å¼\tstatic A GetInstance()\t&#123;\t\treturn A();\t&#125;private:\tA()\t&#123;\t\t_a = 0;\t&#125;\tint _a;&#125;;\n\nè€ŒC++11ä¸­æä¾›äº†ä¸€ä¸ªå…³é”®å­—finalï¼Œç”¨è¿™ä¸ªå…³é”®å­—ä¿®é¥°ç±»ï¼Œå°±æ— æ³•è¢«ç»§æ‰¿\n//C++11ç›´æ¥ç”¨å…³é”®å­—finalclass B final&#123;\t//...&#125;;\n\nç»“è¯­å‡ ä¸ªç‰¹æ®Šç±»åˆ°è¿™é‡Œå°±è®²è§£ç»“æŸè¾£ï¼Œå…¶ä¸­æ‡’æ±‰å¤šçº¿ç¨‹åŠ é”è¿˜ç•™äº†ä¸€ä¸ªå‘ï¼Œå¾…åç»­æˆ‘ä¼šå›æ¥æ›´æ–°è¡¥ä¸Šçš„ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€å!\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘å¼‚å¸¸å¤„ç†","url":"/posts/569709037/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹C++ä¸­å¯¹äºå¼‚å¸¸çš„å¤„ç†æœºåˆ¶\n\n\n[TOC]\n1.æ¦‚å¿µ1.1 Cè¯­è¨€å¯¹äºå¼‚å¸¸çš„å¤„ç†åœ¨ä¹‹å‰æˆ‘ä»¬é‡åˆ°ä¸€äº›bugçš„æ—¶å€™ï¼Œé€šå¸¸ä¼šç”¨ifåˆ¤æ–­æˆ–è€…assertæ–­è¨€ç­‰é—®é¢˜è¿›è¡Œå¤„ç†ã€‚ä½†è¿™ç§æ–¹å¼å¤ªè¿‡æš´åŠ›ï¼Œä¼šç›´æ¥ä¸­æ–­ç¨‹åºçš„è¿è¡Œ\nå¦å¤–ä¸€ç§åŠæ³•æ˜¯è¿”å›é”™è¯¯ç ï¼ŒCè¯­è¨€çš„æŠ¥é”™å¤§å¤šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ä¸è¿‡è¿™éœ€è¦ç¨‹åºçš„ç”¨æˆ·è‡ªå·±å»æŸ¥å¯¹åº”çš„é”™è¯¯ç è¡¨æ ¼ï¼Œè¾ƒä¸ºéº»çƒ¦\n\n1.2 C++å¼‚å¸¸æ‰€è°“å¼‚å¸¸ï¼Œä¾¿æ˜¯ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„bugæˆ–è€…é—®é¢˜ã€‚ç¨‹åºå¯ä»¥æœ‰é€‰æ‹©åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå‘ŠçŸ¥ç”¨æˆ·ç¨‹åºè¿è¡Œå‡ºç°äº†é—®é¢˜ã€‚\nC++æ ‡å‡†åº“ä¸­ä¾¿ä½¿ç”¨äº†ä¸€ä¸ªexceptionç±»æ¥è¿›è¡Œå¼‚å¸¸çš„å¤„ç†ï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºä¸­é‡åˆ°çš„ä¸€äº›æŠ¥é”™ï¼Œå…¶å®å°±æ˜¯æ ‡å‡†åº“é‡Œé¢æŠ›å‡ºäº†å¯¹åº”çš„å¼‚å¸¸\n\nå…¶æ“ä½œä¸»è¦å€ŸåŠ©ä¸‹é¢ä¸‰ä¸ªå…³é”®å­—\n\nthrow åœ¨å‡ºç°é—®é¢˜çš„åœ°æ–¹æŠ›å‡ºå¼‚å¸¸\ntry ç›‘æ§åç»­ä»£ç ä¸­å‡ºç°çš„å¼‚å¸¸ï¼Œåç»­éœ€è¦ä»¥catchä½œä¸ºç»“å°¾\ncatch ç”¨äºæ•è·å¼‚å¸¸ï¼ŒåŒä¸€ä¸ªtryå¯ä»¥ç”¨å¤šä¸ªä¸åŒç±»å‹çš„catchè¿›è¡Œæ•è·\n\nthrowå…³é”®å­—å¯ä»¥æŠ›å‡ºä»»æ„ç±»å‹çš„å¼‚å¸¸\n2.åŸºæœ¬æ“ä½œä¸‹é¢ç”¨é™¤æ³•å‡½æ•°ï¼Œä»¥é™¤0çš„æƒ…å†µæ¥åšä¸€ä¸ªæœ€ç®€å•çš„æ¼”å¼\nint Div()&#123;\tint a, b;\tcin &gt;&gt; a &gt;&gt; b;\tif (b == 0)\t\tthrow &quot;div 0 err!&quot;;\treturn a / b;&#125;int main()&#123;\ttry &#123;\t\tcout &lt;&lt; Div() &lt;&lt; endl;\t&#125;\tcatch(const char* s)&#123;\t\tcout &lt;&lt; s &lt;&lt; endl;\t&#125;\treturn 0;&#125;\n\n\n2.1 éœ€è¦æ³¨æ„çš„ç‚¹è¿™é‡Œæœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\ncatchç±»å‹å¯¹åº”å½“æˆ‘ä»¬è¿›è¡ŒæŠ›å¼‚å¸¸çš„æ—¶å€™ï¼Œä¸€å®šéœ€è¦æœ‰å¯¹åº”ç±»å‹çš„catchï¼Œå¦åˆ™ä¼šæŠ¥é”™\næ¯”å¦‚æˆ‘ä»¬throwçš„æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œå¦‚æœç”¨stringæ¥catchï¼Œå°±ä¼šå› ä¸ºç±»å‹ä¸åŒ¹é…è€Œå‡ºç°æŠ¥é”™\n\næ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨æŸä¸€ä¸ªä¼šæŠ›å¼‚å¸¸çš„å‡½æ•°çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„å…¶æŠ›å‡ºå¼‚å¸¸çš„ç±»å‹\n\nåˆ©ç”¨â€¦è¿›è¡Œå…¨æ•è·å‡è®¾æˆ‘ä»¬ä¸çŸ¥é“è¿™é‡Œé¢ä¼šæŠ›å‡ºä»€ä¹ˆç±»å‹çš„é”™è¯¯å‘¢ï¼Ÿæ€»ä¸èƒ½æŠŠæ‰€æœ‰ç±»å‹éƒ½catchä¸€ä¸‹å§ï¼Ÿ\nå½“ç„¶ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°è¿›è¡Œå…¨æ•è·\n\nè¿™å°±å¯ä»¥ç”¨äºå½“æˆ‘ä»¬ä¸çŸ¥é“æŠ¥é”™ç±»å‹çš„æ—¶å€™ã€‚ä¸è¿‡ä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œåœ¨è¿™ä¹‹å‰å…ˆcatchå·²çŸ¥çš„é”™è¯¯ç±»å‹ï¼Œæœ€åå†åŠ ä¸Šä¸€ä¸ªå…¨æ•æˆ–ï¼Œä½œä¸ºæœªçŸ¥é”™è¯¯çš„æ ‡è¯†\nä¸è¿‡catch(...)æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£ä¾¿æ˜¯æˆ‘ä»¬ä¸èƒ½çŸ¥é“å¼‚å¸¸çš„ç±»å‹\n\nåŸºç±»æ•è·æ´¾ç”Ÿç±»çš„å¼‚å¸¸å½“æˆ‘ä»¬å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œå¦‚æœthrowäº†ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œå¯ä»¥ç”¨åŸºç±»çš„å¼•ç”¨æ¥æ¥æ”¶ï¼\nclass A &#123;\tint a;&#125;;class B : public A &#123;\tint b;public:\tB()\t\t:b(1)\t&#123;&#125;&#125;;void testab()&#123;\tB bt;\tthrow bt;&#125;int main()&#123;\ttry &#123;\t\ttestab();\t&#125;\tcatch (A&amp; e) &#123;\t\tcout &lt;&lt; &quot;err class A&quot; &lt;&lt; endl;\t&#125;\tcatch (...) &#123;\t\tcout &lt;&lt; &quot;err&quot; &lt;&lt; endl;\t&#125;\treturn 0;&#125;\n\n\nè¿™ä¸ªåœ¨è¿›è¡Œç»§æ‰¿å¤šæ€çš„é”™è¯¯ç¼–å†™çš„æ—¶å€™å°±å¾ˆæœ‰ç”¨å•¦\n2.2 å¼‚å¸¸å’Œæ ˆå¸§æŠ›å‡ºå¼‚å¸¸åï¼Œä¼šè¢«ç¦»è¿™ä¸ªå¼‚å¸¸æœ€è¿‘çš„catchæ•è·ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•catchåˆ™ä¼šæŠ¥é”™\n\næ¯”å¦‚æˆ‘ä»¬å•ç‹¬å†™ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä½“å†…æœ‰try/catchçš„è¯ï¼Œé‚£ä¹ˆä¼šç›´æ¥å’Œè¿™ä¸ªæœ€è¿‘çš„åŒ¹é…ï¼Œå¹¶ä¸ä¼šå’Œmainå‡½æ•°é‡Œé¢çš„åŒ¹é…\n\nè€Œå¦‚æœè¯¥å‡½æ•°é‡Œé¢æ²¡æœ‰è¿›è¡Œæ­¤æ“ä½œï¼Œåˆ™ä¼šç›´æ¥åˆ°mainçš„å¯¹åº”catchå¤„\n\næ³¨æ„ï¼è¿™é‡Œæ˜¯ç›´æ¥è·³è½¬åˆ°å¯¹åº”catchè¯­å¥ï¼Œå¹¶ä¸ä¼šå‡ºç°å…ˆè·³åˆ°testCatchå‡½æ•°åœ¨è·³å›mainçš„æƒ…å†µï¼\n2.3 é‡æ–°æŠ›å‡ºå¼‚å¸¸å‡è®¾æˆ‘ä»¬é‡åˆ°äº†è¿™ç§æƒ…å†µ\nvoid testab()&#123;\tB bt;\tthrow bt;&#125;void testD()&#123;\tint* arr = new int[10];\ttestab();\tdelete[] arr;&#125;\n\nåœ¨testab()å‡½æ•°ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå¯¼è‡´testD()å‡½æ•°æå‰ç»ˆæ­¢ï¼\n\nå¯æˆ‘ä»¬newçš„ä¸œè¥¿è¿˜æ²¡é‡Šæ”¾å‘¢ï¼\nè¿™å°±å‡ºç°äº†å†…å­˜æ³„æ¼ï¼\n\næ³¨æ„ï¼šå†…å­˜æ³„æ¼æ˜¯ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥çš„é—®é¢˜ï¼Œå³ä¾¿æˆ‘ä»¬æ¯ä¸€æ¬¡newçš„ç©ºé—´å¾ˆå°ï¼Œä½†æ˜¯ç§¯å°æˆå¤šå°±æ˜¯å¤§é—®é¢˜ï¼\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦æå‰è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚æœå‡ºç°é—®é¢˜ï¼Œå…ˆé‡Šæ”¾æˆ‘ä»¬newçš„èµ„æºä¹‹åï¼Œå†å°†å¼‚å¸¸é‡æ–°æŠ›å‡ºã€‚å¯ä»¥ç†è§£ä¸ºæ˜¯æå‰æ‹¦æˆªå¼‚å¸¸\n\n3.å¼‚å¸¸éœ€è¦æ³¨æ„çš„ä¸€äº›é—®é¢˜3.1 å¼‚å¸¸å®‰å…¨å½“æˆ‘ä»¬æ“ä½œå¼‚å¸¸çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸€äº›ç›¸å…³çš„é—®é¢˜\n\nä¸Šé¢2.3ä¸­æåˆ°çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œåœ¨newå’Œdeleteä¹‹é—´æŠ›å‡ºå¼‚å¸¸è€Œæ²¡æœ‰ä¸­é€”å¤„ç†ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼\nä¸è¦åœ¨æ„é€ æˆ–ææ„å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡ä¸å®Œå…¨åˆå§‹åŒ–ï¼ˆå¯¹è±¡ä¸å®Œæ•´ï¼‰æˆ–ä¸å®Œå…¨ææ„ï¼ˆå†…å­˜æ³„æ¼ï¼‰\nå¤šçº¿ç¨‹æ“ä½œä¸­åœ¨lockä¸unlockä¹‹é—´æŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´æ­»é”\n\nå½“ç„¶æ˜¯æœ‰è§£å†³æ–¹æ¡ˆçš„ï¼ŒC++ä½¿ç”¨RAIIæ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿™ä¸ªå¾…æˆ‘ä¸‹ä¸€ç¯‡æ™ºèƒ½æŒ‡é’ˆçš„åšå®¢æ¥è®²è§£ï¼\n3.2 å¼‚å¸¸è§„èŒƒå› ä¸ºå¼‚å¸¸éƒ½æ˜¯æ‰‹åŠ¨å†™ä»£ç è¿›è¡Œå¤„ç†çš„ï¼Œé‚£ä¹ˆå°±æå…¶éœ€è¦äº›ä»£ç çš„è€å“¥æ‹¥æœ‰å¾ˆå¥½çš„ç¼–ç¨‹è§„èŒƒã€‚\n\nåœ¨å‡½æ•°ååŠ ä¸Šthrow(ç±»å‹Aï¼Œç±»å‹B)å¯ä»¥åˆ—å‡ºè¿™ä¸ªå‡½æ•°èƒ½æŠ›å‡ºçš„æ‰€æœ‰å¼‚å¸¸ç±»å‹\n\nvoid test() throw(string,vector&lt;int&gt;);\n\n\nå¦‚æœåªè·Ÿä¸€ä¸ªç±»å‹ï¼Œä»£è¡¨è¯¥å‡½æ•°åªä¼šæŠ›å‡ºä¸€ç§ç±»å‹çš„å¼‚å¸¸\n\nvoid* operator new(size_t size) throw (std::bad_alloc);\n\n\nå¦‚æœè·Ÿçš„æ˜¯throw()ä»£è¡¨è¿™ä¸ªå‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸\n\nvoid* test2(size_t sz, void* p) throw();\n\nåœ¨C++11ä¸­è¿˜æ–°å¢äº†ä¸€ä¸ªå…³é”®å­—noexceptæ¥æ ‡è¯†ä¸ä¼šæŠ›å‡ºå¼‚å¸¸\nvoid* test2(size_t sz, void* p) noexcept;\n\nä½†æ˜¯è¿™äº›éƒ½ä¾èµ–äºç”¨æˆ·çš„ç¼–ç¨‹ä¹ æƒ¯ï¼ŒC++å¹¶æ²¡æœ‰å¼ºåˆ¶ç”¨æˆ·ä¸€å®šè¦åœ¨å‡½æ•°å°¾éƒ¨å†™ä¸Šå¼‚å¸¸æŠ›å‡ºçš„ç±»å‹ã€‚è€Œä¸”ä¹Ÿä¸ä¼šå¯¹å†™å¥½çš„å¼‚å¸¸ç±»å‹å’Œå®é™…æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹è¿›è¡Œæ£€æŸ¥ã€‚\nå‡è®¾åœ¨é¡¹ç›®åˆä½œä¸­ï¼Œæ¥äº†ä¸€ä¸ªâ€œå®ä¹ ç”Ÿâ€\n\nå†™äº†ä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°ï¼Œå´æ²¡æœ‰æ ‡è¯†è¯¥å‡½æ•°ä¼šæŠ›å¼‚å¸¸ï¼Œé‚£ä¸‹é¢è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹æ²¡æœ‰è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œé‚£ä¸å°±è›‹ç³•äº†ï¼Œç¨‹åºæå‰ä¸­æ­¢ï¼\næˆ–è€…è¯´æ˜¯æŠ›å‡ºå¼‚å¸¸çš„ç±»å‹å†™é”™äº†ï¼Œæ²¡æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†è¯­å¥ï¼Œåªèƒ½è¢«catch(...)æ•è·\næˆ–è€…æ˜¯æ˜æ˜ä¸æŠ›å‡ºå¼‚å¸¸éè¦å†™è‡ªå·±æŠ›å‡ºï¼Œç™½å†™äº†å¼‚å¸¸å¤„ç†\n\nä»¥ä¸Šä¸‰ç§æƒ…å†µéƒ½æ˜¯æˆ‘ä»¬ä¸æœŸæœ›é‡åˆ°çš„ï¼Œæ‰€ä»¥åœ¨å†™ç›¸å…³å‡½æ•°çš„æ—¶å€™ï¼Œæœ€å¥½æ˜ç¡®æ ‡è¯†ç›¸å…³å¼‚å¸¸æŠ›å‡ºçš„ç±»å‹ï¼\n\næœ‰äº›äººå¯èƒ½ä¼šå¯¹noexceptå…³é”®å­—æœ‰è¯¯è§£ï¼Œè®¤ä¸ºå†™äº†è¿™ä¸ªå…³é”®å­—å‡½æ•°å°±æ— æ³•æŠ›å‡ºå¼‚å¸¸äº†ã€‚å…¶å®å¹¶ä¸ç„¶ï¼Œè¿™é‡Œçš„throwå’Œnoexceptå…³é”®å­—çš„æ ‡å®šä½ å¯ä»¥ç†è§£ä¸ºæ˜¯å‡½æ•°çš„ä¸€ä¸ªç‰¹æ®Šçš„æ³¨é‡Šï¼Œå¹¶æ²¡æœ‰å®é™…ä½œç”¨ã€‚åé¢è·Ÿç€noexceptçš„å‡½æ•°ä¾ç„¶å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼\n\n#include &lt;iostream&gt;#include &lt;stdexcept&gt;void test_exp() noexcept&#123;    throw std::runtime_error(&quot;err&quot;);&#125;int main()&#123;    try    &#123;        test_exp();        std::cout &lt;&lt; &quot;no throw\\n&quot;;    &#125; catch (...)    &#123;        std::cout &lt;&lt; &quot;throw\\n&quot;;    &#125;    std::cout &lt;&lt; &quot;end\\n&quot;;    return 0;&#125;\n\nä¸Šé¢è¿™ä¸ªä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¾æ—§æŠ›å‡ºäº†å¼‚å¸¸ã€‚ä½†æ˜¯å› ä¸ºnoexceptå’ŒæŠ›å‡ºå¼‚å¸¸çš„æ“ä½œåœ¨å˜æˆè§„èŒƒä¸­å†²çªäº†ï¼Œg++åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè¿›è¡Œwarningè­¦å‘Šï¼Œå¹¶ä¸”ä¼šåœ¨è¯¥å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ç›´æ¥ç»ˆæ­¢ç¨‹åºï¼ˆå› ä¸ºä½ å†™å‡ºäº†ä¸€ä¸ªä¸ç¬¦åˆç¼–ç¨‹è§„èŒƒçš„ä»£ç ï¼‰\n&gt; g++ test.cpp -o test &amp;&amp; ./testtest.cpp: In function â€˜void test_exp()â€™:test.cpp:6:5: warning: â€˜throwâ€™ will always call â€˜terminateâ€™ [-Wterminate]    6 |     throw std::runtime_error(&quot;err&quot;);      |     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~terminate called after throwing an instance of &#x27;std::runtime_error&#x27;  what():  err[1]    260443 IOT instruction  ./test\n\nå½“ä½ æŠŠtest_expå‡½æ•°çš„noexceptå…³é”®å­—å£°æ˜åˆ é™¤åï¼Œè¿™ä¸ªç¨‹åºæ‰èƒ½æŒ‰ç…§é¢„æœŸæ­£å¸¸æŠ›å‡ºå¼‚å¸¸å¹¶è¢«catchæ•è·\n&gt; g++ test.cpp -o test &amp;&amp; ./testthrowend\n3.3 è‡ªå®šä¹‰å¼‚å¸¸ç±»å‹è¦æ˜¯åœ¨åä½œä¸­ï¼Œä¸åŒç”¨æˆ·æŠ›å‡ºäº†å¤ªå¤šä¸åŒç±»å‹çš„å¼‚å¸¸ï¼Œé‚£è¿˜æ€ä¹ˆè°ƒç”¨å‡½æ•°ï¼Ÿ\nå‰é¢æåˆ°äº†ï¼Œå­ç±»æŠ›å‡ºçš„å¼‚å¸¸å¯ä»¥ç”¨åŸºç±»æ¥å—ã€‚æ‰€ä»¥åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯ä¼šå®šä¹‰ä¸€ä¸ªç»§æ‰¿çš„è§„èŒƒå¼‚å¸¸ä½“ç³»ï¼Œç”¨äºå¤„ç†ä¸åŒçš„å¼‚å¸¸ã€‚\nè¿™æ ·æˆ‘ä»¬å°±åªéœ€è¦æ•è·ä¸€ä¸ªåŸºç±»å¯¹è±¡ï¼Œå°±èƒ½æ•è·åˆ°æ‰€æœ‰æ´¾ç”Ÿç±»çš„å¼‚å¸¸å¯¹è±¡ã€‚\nå…³äºåŸºç±»æ•è·å­ç±»å¼‚å¸¸çš„æ–¹æ³•åœ¨2.1ä¸­å·²ç»æåŠï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºï¼›\n3.4 C++æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸åœ¨C++æ ‡å‡†åº“ä¸­ï¼Œå¼‚å¸¸æ˜¯å›´ç»•ä¸‹å›¾ç»„ç»‡çš„\n\ncplusplusï¼šhttps://legacy.cplusplus.com/reference/exception/exception/?kw=exception\n\n\næ ‡å‡†å¼‚å¸¸ç±»çš„æˆå‘˜ï¼š\n\nåœ¨ä¸Šè¿°ç»§æ‰¿ä½“ç³»ä¸­ï¼Œæ¯ä¸ªç±»éƒ½æœ‰æä¾›äº†æ„é€ å‡½æ•°ã€å¤åˆ¶æ„é€ å‡½æ•°ã€å’Œèµ‹å€¼æ“ä½œç¬¦é‡è½½ã€‚\nlogic_errorç±»åŠå…¶å­ç±»ã€runtime_errorç±»åŠå…¶å­ç±»ï¼Œå®ƒä»¬çš„æ„é€ å‡½æ•°æ˜¯æ¥å—ä¸€ä¸ªstringç±»å‹çš„å½¢å‚ï¼Œç”¨äºå¼‚å¸¸ä¿¡æ¯çš„æè¿°\næ‰€æœ‰çš„å¼‚å¸¸ç±»éƒ½æœ‰ä¸€ä¸ªwhat()æ–¹æ³•ï¼Œè¿”å›const char* ç±»å‹æè¿°å¼‚å¸¸ä¿¡æ¯\n\næ ‡å‡†å¼‚å¸¸ç±»çš„å…·ä½“æè¿°ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nexception\næ‰€æœ‰æ ‡å‡†å¼‚å¸¸ç±»çš„çˆ¶ç±»\n\n\nbad_alloc\nå½“operator new and operator new[]ï¼Œè¯·æ±‚åˆ†é…å†…å­˜å¤±è´¥æ—¶\n\n\nbad_exception\nè¿™æ˜¯ä¸ªç‰¹æ®Šçš„å¼‚å¸¸ã€‚å¦‚æœå‡½æ•°çš„å¼‚å¸¸æŠ›å‡ºåˆ—è¡¨é‡Œå£°æ˜äº†bad_exceptionå¼‚å¸¸ï¼Œè€Œå‡½æ•°å†…éƒ¨æŠ›å‡ºäº†å¼‚å¸¸æŠ›å‡ºåˆ—è¡¨ä¸­æ²¡æœ‰çš„å¼‚å¸¸ï¼Œä¸è®ºä»€ä¹ˆç±»å‹ï¼Œéƒ½ä¼šè¢«æ›¿æ¢ä¸ºbad_exceptionç±»å‹\n\n\nbad_typeid\nä½¿ç”¨typeidæ“ä½œç¬¦ï¼Œæ“ä½œä¸€ä¸ªNULLæŒ‡é’ˆï¼Œè€Œè¯¥æŒ‡é’ˆæ˜¯å¸¦æœ‰è™šå‡½æ•°çš„ç±»ï¼Œè¿™æ—¶æŠ›å‡ºbad_typeidå¼‚å¸¸\n\n\nbad_cast\nä½¿ç”¨dynamic_castè½¬æ¢å¼•ç”¨å¤±è´¥çš„æ—¶å€™\n\n\nios_base::failure\nioæ“ä½œè¿‡ç¨‹å‡ºç°é”™è¯¯\n\n\nlogic_error\né€»è¾‘é”™è¯¯ï¼Œå¯ä»¥åœ¨è¿è¡Œå‰æ£€æµ‹çš„é”™è¯¯\n\n\nruntime_error\nè¿è¡Œæ—¶é”™è¯¯ï¼Œä»…åœ¨è¿è¡Œæ—¶æ‰å¯ä»¥æ£€æµ‹çš„é”™è¯¯\n\n\nlogic_errorçš„å­ç±»ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nlength_error\nè¯•å›¾ç”Ÿæˆä¸€ä¸ªè¶…å‡ºè¯¥ç±»å‹æœ€å¤§é•¿åº¦çš„å¯¹è±¡æ—¶ï¼Œä¾‹å¦‚å¾ˆé•¿çš„string\n\n\ndomain_error\nå‚æ•°çš„å€¼åŸŸé”™è¯¯ï¼Œä¸»è¦ç”¨åœ¨æ•°å­¦å‡½æ•°ä¸­ã€‚ä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ªè´Ÿå€¼è°ƒç”¨åªèƒ½æ“ä½œéè´Ÿæ•°çš„å‡½æ•°\n\n\nout_of_range\nè¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œvetorçš„atæŠ›å‡ºäº†æ­¤å¼‚å¸¸\n\n\ninvalid_argument\nå‚æ•°ä¸åˆé€‚ã€‚åœ¨æ ‡å‡†åº“ä¸­ï¼Œå½“åˆ©ç”¨stringå¯¹è±¡æ„é€ bitsetæ—¶ï¼Œè€Œstringä¸­çš„å­—ç¬¦ä¸æ˜¯â€™0â€™æˆ–â€™1â€™çš„æ—¶å€™ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸\n\n\nfuture_error(C++11)\nThis class defines the type of objects thrown as exceptions to report invalid operations on future objects or other elements of the library that may access a futureâ€˜s shared state.\n\n\nruntime_errorçš„å­ç±»ï¼š\n\n\n\nå¼‚å¸¸åç§°\næè¿°\n\n\n\nrange_error\nè®¡ç®—ç»“æœè¶…å‡ºäº†æœ‰æ„ä¹‰çš„å€¼åŸŸèŒƒå›´\n\n\noverflow_error\nç®—æœ¯è®¡ç®—ä¸Šæº¢\n\n\nunderflow_error\nç®—æœ¯è®¡ç®—ä¸‹æº¢\n\n\nsystem_error(C++11)\nè¿è¡Œæ—¶ä»æ“ä½œç³»ç»Ÿæˆ–å…¶ä»–å…·æœ‰å…³è”error_codeçš„ä½çº§åº”ç”¨ç¨‹åºæ¥å£å¼•å‘çš„å¼‚å¸¸\n\n\nä»¥ä¸Šéƒ¨åˆ†C++æ ‡å‡†åº“å¼‚å¸¸è§£é‡Šæ¥è‡ªhttps://blog.csdn.net/linxi8693/article/details/90318166\n\n4.å¼‚å¸¸ä¼˜ç¼ºç‚¹ä¼˜ç‚¹\n\nå¼‚å¸¸å¯¹è±¡å®šä¹‰å®Œå¤‡ä¹‹åï¼Œç›¸æ¯”äºé”™è¯¯ç çš„æ–¹å¼ï¼Œèƒ½è®©ç”¨æˆ·æ›´åŠ æ¸…æ¥šçš„äº†è§£åˆ°è‡ªå·±é‡åˆ°äº†ä»€ä¹ˆç±»å‹çš„é—®é¢˜ï¼Œæ›´å¥½å®šä½ç¨‹åºçš„bug\nå‡½æ•°é”™è¯¯ç è‹¥é‡åˆ°ï¼Œéœ€è¦å±‚å±‚å‘å¤–è¿”å›ï¼›è€Œå¼‚å¸¸åˆ™é€šè¿‡catchå¯ä»¥ç›´æ¥è·³åˆ°å¯¹åº”å¼‚å¸¸å¤„ç†ä½ç½®ï¼Œé¿å…å¤šé‡åˆ¤æ–­å’Œè¿”å›ï¼›\nç¬¬ä¸‰æ–¹åº“åŒ…å«å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨ç±»ä¼¼äºboost/gtestç­‰ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ä¹Ÿéœ€è¦ä½¿ç”¨å¯¹åº”çš„å¼‚å¸¸å¤„ç†\nå¯¹äºT&amp; operator[]è¿™ç§æ“ä½œç¬¦é‡è½½ï¼Œæˆ‘ä»¬æ²¡åŠæ³•å¾ˆå¥½åœ°ä½¿ç”¨è¿”å›å€¼æ¥æ ‡è¯†é”™è¯¯ï¼ˆå› ä¸ºä¸åŒç±»å‹çš„è¿”å›å€¼ä¸ä¸€æ ·ï¼Œæ²¡åŠæ³•ç»Ÿä¸€å¤„ç†ï¼‰è¿™æ—¶å€™å°±å¯ä»¥ç”¨å¼‚å¸¸æ¥æŠ›å‡ºè¶Šç•Œé—®é¢˜\n\nç¼ºç‚¹\n\nå¼‚å¸¸å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºåˆ°å¤„ä¹±è·³ï¼ˆå› ä¸ºä¼šè·³åˆ°æœ€è¿‘çš„catchä½ç½®ï¼‰ç»™è§‚å¯Ÿé”™è¯¯æƒ…å†µå¢æ·»äº†ä¸€äº›éš¾åº¦ï¼Œä»£ç å¯è¯»æ€§å˜å·®ï¼›\nå¼‚å¸¸æœ‰ä¸€å®šæ€§èƒ½å¼€é”€ï¼ˆå¯å¿½ç•¥ï¼‰ï¼›\nå¼‚å¸¸å®¹æ˜“å¯¼è‡´èµ„æºæ³„æ¼ç­‰ç­‰é—®é¢˜ï¼ˆå†…å­˜æ³„æ¼ï¼‰ï¼›\nå¼‚å¸¸ä¾èµ–äºç”¨æˆ·ç¼–ç¨‹è§„èŒƒï¼Œå¦åˆ™å‡½æ•°è°ƒç”¨å®¹æ˜“å‡ºç°å¼‚å¸¸æ²¡æœ‰å¾—åˆ°å¤„ç†çš„é—®é¢˜ï¼›\n\n\nç»“è¯­æ€»ä½“è€Œè¨€ï¼Œå¼‚å¸¸å¤„ç†åˆ©å¤§äºå¼Šã€‚å¾ˆå¤šè¯­è¨€éƒ½æ˜¯ç”¨å¼‚å¸¸æ¥å¤„ç†é”™è¯¯çš„ï¼Œæ¯”å¦‚pythonã€‚åªè¦ç»´æŒä¸€ä¸ªè‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œåœ¨å‡½æ•°åå£°æ˜ä¼šæŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ï¼Œé’ˆå¯¹æ€§è¿›è¡Œå¤„ç†ï¼Œè¿˜æ˜¯å¾ˆé¦™çš„ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11","å¼‚å¸¸"]},{"title":"ã€C++ã€‘ç©ºé—´é…ç½®å™¨","url":"/posts/281674790/","content":"ç©ºé—´é…ç½®å™¨ï¼Œå¬èµ·æ¥é«˜å¤§ä¸Šï¼Œé‚£å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ\n\n\n1.ä»€ä¹ˆæ˜¯ç©ºé—´é…ç½®å™¨ï¼Ÿç©ºé—´é…ç½®å™¨æ˜¯STLæºç ä¸­å®ç°çš„ä¸€ä¸ªå°ç¶ï¼Œç”¨æ¥åº”å¯¹STLå®¹å™¨é¢‘ç¹ç”³è¯·å°å—å†…å­˜ç©ºé—´çš„é—®é¢˜ã€‚ä»–ç®—æ˜¯ä¸€ä¸ªå°å‹çš„å†…å­˜æ± ï¼Œä»¥æå‡STLå®¹å™¨åœ¨ç©ºé—´ç”³è¯·æ–¹é¢çš„æ•ˆç‡ \n\n2.äº†è§£ç©ºé—´é…ç½®å™¨STLä»¥128ä¸ªå­—èŠ‚ä¸ºåˆ†ç•Œçº¿ï¼Œå°†ç©ºé—´é…ç½®å™¨åˆ†ä¸ºäº†ä¸€çº§å’ŒäºŒçº§\n2.1 ä¸€çº§ä¸€çº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œallocate/deallocateå‡½æ•°å®é™…ä¸Šå°±æ˜¯å¯¹malloc/freeåšäº†ä¸€ä¸ªç®€å•çš„å°è£…\nstatic void * allocate(size_t n)&#123;    void *result = malloc(n);    if (0 == result) result = oom_malloc(n);    return result;&#125;static void deallocate(void *p, size_t /* n */)&#123;    free(p);&#125;//è¿™ä¸ªå‡½æ•°æ˜¯mallocå¤±è´¥çš„æ—¶å€™æ‰ä¼šè°ƒç”¨çš„template &lt;int inst&gt;void * __malloc_alloc_template&lt;inst&gt;::oom_malloc(size_t n)&#123;    void (* my_malloc_handler)();    void *result;    for (;;) &#123;        my_malloc_handler = __malloc_alloc_oom_handler;        if (0 == my_malloc_handler) &#123; __THROW_BAD_ALLOC; &#125;//æŠ›å¼‚å¸¸        (*my_malloc_handler)();        result = malloc(n);        if (result) return(result);    &#125;&#125;\n\nå½“mallocå¤±è´¥çš„æ—¶å€™ï¼Œä¸€çº§ç©ºé—´é…ç½®å™¨ä¼šæŠ›å¼‚å¸¸\n2.2 äºŒçº§åœ¨äºŒçº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œä¼šå…ˆåˆ¤æ–­å¸¦ç”³è¯·ç©ºé—´å¤§å°æ˜¯å¦å¤§äº128ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œåˆ™ä¼šå»è°ƒç”¨ä¸€çº§ç©ºé—´é…ç½®å™¨\n# ifndef __SUNPRO_CCenum &#123;__ALIGN = 8&#125;;enum &#123;__MAX_BYTES = 128&#125;;enum &#123;__NFREELISTS = __MAX_BYTES/__ALIGN&#125;;# endif  /* n must be &gt; 0      */static void * allocate(size_t n)&#123;    obj * __VOLATILE * my_free_list;    obj * __RESTRICT result;    if (n &gt; (size_t) __MAX_BYTES) &#123;        return(malloc_alloc::allocate(n));    &#125;    my_free_list = free_list + FREELIST_INDEX(n);    // Acquire the lock here with a constructor call.    // This ensures that it is released in exit or during stack    // unwinding.    #       ifndef _NOTHREADS    /*REFERENCED*/    lock lock_instance;    #       endif    result = *my_free_list;    if (result == 0) &#123;        void *r = refill(ROUND_UP(n));        return r;    &#125;    *my_free_list = result -&gt; free_list_link;    return (result);&#125;;/* p may not be 0 */static void deallocate(void *p, size_t n)&#123;    obj *q = (obj *)p;    obj * __VOLATILE * my_free_list;    if (n &gt; (size_t) __MAX_BYTES) &#123;        malloc_alloc::deallocate(p, n);        return;    &#125;    my_free_list = free_list + FREELIST_INDEX(n);    // acquire lock    #       ifndef _NOTHREADS    /*REFERENCED*/    lock lock_instance;    #       endif /* _NOTHREADS */    q -&gt; free_list_link = *my_free_list;    *my_free_list = q;    // lock is released here&#125;\n\näºŒçº§ç©ºé—´é…ç½®å™¨ä¸­ï¼Œä¸»è¦çš„å‡ ä¸ªæˆå‘˜å˜é‡å¦‚ä¸‹\nstatic obj * __VOLATILE free_list[__NFREELISTS]; //å“ˆå¸Œæ¡¶// Chunk allocation state.static char *start_free;static char *end_free;static size_t heap_size;\n\nè¿™é‡Œæ˜¯ä¸€ä¸ªå†…å­˜æ± + ä¸€ä¸ªå“ˆå¸Œæ¡¶,å†…å­˜æ± çš„é•¿åº¦ä¸ºheap_size\n\nå“ˆå¸Œæ¡¶ä»¥8å­—èŠ‚å¯¹é½ï¼Œåˆ†ä¸ºäº†16ä¸ªæ¡¶ã€‚æœ€å¼€å§‹çš„æ—¶å€™ï¼Œfree_listå“ˆå¸Œæ¡¶æ˜¯ç©ºçš„\n\nå½“æˆ‘ä»¬éœ€è¦å°äº128ä¸ªå­—èŠ‚ç©ºé—´çš„æ—¶å€™ï¼ˆä»¥16å­—èŠ‚ä¸ºä¾‹ï¼‰ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šç›´æ¥å»ä¸Šé¢çš„å†…å­˜æ± å½“ä¸­ç”³è¯·20ä¸ª16å­—èŠ‚çš„ç©ºé—´ï¼Œé“¾æ¥åˆ°16å­—èŠ‚å¯¹åº”çš„å“ˆå¸Œæ¡¶çš„ä½ç½®ï¼ˆ1å·æ¡¶ï¼‰\nåœ¨ä¸‹é¢çš„refillå‡½æ•°ä¸­å¯ä»¥çœ‹åˆ°è¿™ä¸€ç‚¹\ntemplate &lt;bool threads, int inst&gt;void* __default_alloc_template&lt;threads, inst&gt;::refill(size_t n)&#123;    int nobjs = 20;//ä¸€æ¬¡æ€§ç”³è¯·20ä¸ª    char * chunk = chunk_alloc(n, nobjs);    obj * __VOLATILE * my_free_list;    obj * result;    obj * current_obj, * next_obj;    int i;    if (1 == nobjs) return(chunk);    my_free_list = free_list + FREELIST_INDEX(n);    /* Build free list in chunk */      result = (obj *)chunk;      *my_free_list = next_obj = (obj *)(chunk + n);      for (i = 1; ; i++) &#123;        current_obj = next_obj;        next_obj = (obj *)((char *)next_obj + n);        if (nobjs - 1 == i) &#123;            current_obj -&gt; free_list_link = 0;            break;        &#125; else &#123;            current_obj -&gt; free_list_link = next_obj;        &#125;      &#125;    return(result);&#125;\n\n8å­—èŠ‚å¯¹é½çš„å¦™å¤„å‡è®¾æˆ‘ä»¬çš„listå•ä¸ªèŠ‚ç‚¹éœ€è¦12ä¸ªå­—èŠ‚ï¼Œsetå•ä¸ªå­—èŠ‚éœ€è¦16ä¸ªå­—èŠ‚\nå½“listéœ€è¦ç©ºé—´çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¹Ÿä¼šå»ç”³è¯·16ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œè€Œä¸ä¼šå»ç”³è¯·12ä¸ªå­—èŠ‚ã€‚è¿™æ—¶å€™ï¼Œå½“listå°†ç”¨å®Œçš„ç©ºé—´è¿˜å›æ¥ä¹‹åï¼Œå°±èƒ½æ‹¿è¿‡å»ç»™setç”¨äº†ï¼\nå…³äºå“ˆå¸Œæ¡¶çš„ç‰¹æ®Šå¤„ç†å½“æˆ‘ä»¬ç”¨å®Œäº†ç”³è¯·çš„ç©ºé—´ï¼Œå‡†å¤‡â€œé‡Šæ”¾â€çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šå°†é‡Šæ”¾å›æ¥çš„ç©ºé—´æ’å…¥è¿›å“ˆå¸Œæ¡¶ï¼ˆå¤´æ’ï¼‰\nè¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šå¤„ç†ï¼Œå½“ç”¨å®Œçš„ç©ºé—´ï¼Œæˆ–è€…è¯´æ˜¯åˆšç”³è¯·çš„ç©ºé—´æ’å…¥è¿›å“ˆå¸Œæ¡¶çš„æ—¶å€™ï¼ŒäºŒåŠç©ºé—´é…ç½®å™¨ä¼šå°†å…¶å¼ºè½¬ä¸ºä¸€ä¸ªobjç±»å‹ï¼Œè¿™ä¸ªç±»å‹çš„å‰4/8ä¸ªå­—èŠ‚ä¼šç”¨æ¥å­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç©ºé—´ï¼Œä»¥æ­¤æ„æˆé“¾è¡¨\nunion obj &#123;    union obj * free_list_link;    char client_data[1];    /* The client sees this.        */&#125;;\n\n\nå½“æˆ‘ä»¬å†æ¬¡éœ€è¦è¿™éƒ¨åˆ†å¤§å°çš„ç©ºé—´çš„æ—¶å€™ï¼Œåªéœ€è¦å°†å“ˆå¸Œæ¡¶å¤´æŒ‡é’ˆçš„æŒ‡å‘ç›´æ¥ä¿®æ”¹ï¼Œå°±èƒ½é“¾æ¥ä¸Šä¸‹ä¸€ä¸ªç©ºé—´ï¼Œå¹¶å°†ä¹‹å‰å¤´æŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´æ‹¿å»ç”¨\nç”¨çš„æ—¶å€™ä¹Ÿä¸ç”¨ç®¡ä¹‹å‰åœ¨æ­¤å¤„å­˜æ”¾çš„æŒ‡é’ˆï¼Œæ¯•ç«Ÿä¸‹ä¸€æ¬¡æ”¾å›æ¥çš„æ—¶å€™ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨ä¼šæ¥å¤„ç†å®ƒçš„\n\nå†…å­˜æ± ç©ºé—´ä¸å¤Ÿç”¨äº†å’‹åŠï¼Ÿä¹‹å‰æåˆ°äº†ï¼ŒäºŒçº§ç©ºé—´é…ç½®å™¨é‡Œé¢æœ‰ä¸€ä¸ªå°å†…å­˜æ± ã€‚è¦æ˜¯è¿™ä¸ªå†…å­˜æ± ç”¨å®Œäº†ï¼Œè¦å’‹æ•´å‘¢ï¼Ÿ\näºŒçº§ç©ºé—´é…ç½®å™¨æƒ³å‡ºæ¥äº†ä¸€ç§å¾ˆéªšçš„åšæ³•ï¼š\n\nå‡è®¾å½“å‰æˆ‘ä»¬éœ€è¦24å­—èŠ‚çš„ç©ºé—´\nå¯¹åº”çš„æ¡¶ä¸‹é¢æ²¡æœ‰ç©ºé—´ç»™æˆ‘ä»¬ç”¨\nå†…å­˜æ± ä¹Ÿç”¨å…‰äº†\nä½†æ˜¯48å­—èŠ‚çš„æ¡¶ä¸‹é¢è¿˜æœ‰ç©ºé—´å¯ä»¥ç”¨\nç›´æ¥æŠŠè¿™ä¸ªç©ºé—´æ‹¿è¿‡æ¥ï¼Œæ‹†æˆä¸¤ä¸ª24é“¾æ¥åˆ°24çš„æ¡¶ä¸‹é¢ï¼\n\nè¿™æ ·ä¾¿æœ‰æ•ˆæé«˜äº†ç©ºé—´åˆ©ç”¨ç‡ï¼Œä¹Ÿé¿å…äº†reallocé€ æˆçš„æ—¶é—´æ¶ˆè€—ã€‚\nå½“ç„¶ï¼Œè¦æ˜¯æ¡¶é‡Œé¢ä¹Ÿæ²¡æœ‰å¤šä½™ç©ºé—´äº†ï¼Œé‚£å°±åªèƒ½è€è€å®å®å»æ‰©å®¹äº†\n\nåªèƒ½å¤§çš„æ‹†å°çš„ï¼Œå°çš„ç©ºé—´ä¸è¿ç»­æ— æ³•ç»„æˆå¤§çš„\n\n//äºŒçº§ç©ºé—´é…ç½®å™¨é‡Œé¢çš„reallocateå°è£…template &lt;bool threads, int inst&gt;void*__default_alloc_template&lt;threads, inst&gt;::reallocate(void *p,                                                    size_t old_sz,                                                    size_t new_sz)&#123;    void * result;    size_t copy_sz;    if (old_sz &gt; (size_t) __MAX_BYTES &amp;&amp; new_sz &gt; (size_t) __MAX_BYTES) &#123;        return(realloc(p, new_sz));    &#125;    if (ROUND_UP(old_sz) == ROUND_UP(new_sz)) return(p);    result = allocate(new_sz);    copy_sz = new_sz &gt; old_sz? old_sz : new_sz;    memcpy(result, p, copy_sz);    deallocate(p, old_sz);    return(result);&#125;\n\n\n2.3 å…³äºå•ä¾‹çš„è¯´æ˜åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢ï¼Œç©ºé—´é…ç½®å™¨åªä¼šæœ‰ä¸€ä¸ª\nä½†STLåº“ä¸­çš„ç©ºé—´é…ç½®å™¨å¹¶æ²¡æœ‰æŠŠè‡ªå·±è®¾è®¡æˆå•ä¾‹ç±»ï¼Œè€Œæ˜¯ç”¨äº†ä¸€ä¸ªé—´æ¥çš„åšæ³•\nstatic obj * __VOLATILE free_list[__NFREELISTS]; //å“ˆå¸Œæ¡¶// Chunk allocation state.static char *start_free;static char *end_free;static size_t heap_size;\n\né‚£å°±æ˜¯æ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯staticé™æ€çš„\næˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç±»å’Œå¯¹è±¡ä¸­ï¼Œé™æ€æˆå‘˜å˜é‡æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯ä¸€ç§å•ä¾‹æ¨¡å¼ï¼\n\n2.4 ç©ºé—´é…ç½®å™¨çš„ä¼˜ç‚¹\nç©ºé—´é…ç½®å™¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œç”³è¯·ç©ºé—´çš„æ•ˆç‡å¾ˆé«˜\nç©ºé—´é…ç½®å™¨èƒ½è§£å†³é¢‘ç¹ç”³è¯·ç©ºé—´å¯¼è‡´çš„å†…å­˜ç¢ç‰‡é—®é¢˜\n\nå½“æˆ‘ä»¬ä½¿ç”¨STLå®¹å™¨é¢‘ç¹ç”³è¯·å°å—ç©ºé—´ï¼ˆæ¯”å¦‚listï¼‰å°±å®¹æ˜“å¯¼è‡´å †åŒºä¸­æœ‰éå¸¸å¤šçš„å°å—ç©ºé—´è¢«ä½¿ç”¨ï¼Œè€Œæ— æ³•ç”³è¯·ä¸€ä¸ªå¤§çš„ç©ºé—´\nç©ºé—´é…ç½®å™¨æå‰ç”³è¯·äº†ä¸€ä¸ªå¤§å—ç©ºé—´å†ç§ä¸‹ç®¡ç†ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜\nå†…å­˜å¤–ç¢ç‰‡&#x2F;å†…ç¢ç‰‡\nå¤–ç¢ç‰‡ï¼šå¤šæ¬¡ç”³è¯·å°å—ç©ºé—´é€ æˆã€‚æœ‰è¶³å¤Ÿå†…å­˜ï¼Œä½†æ˜¯ä¸è¿ç»­ï¼Œæ— æ³•ç”³è¯·å¤§å—å†…å­˜\nå†…ç¢ç‰‡ï¼šliståªéœ€è¦12ä¸ªå­—èŠ‚ï¼Œè€Œç©ºé—´é…ç½®å™¨å› ä¸ºå†…å­˜å¯¹é½è€Œç»™äº†å®ƒ16ä¸ªå­—èŠ‚ï¼Œæµªè´¹äº†4ä¸ªå­—èŠ‚é€ æˆçš„å†…å­˜ç¢ç‰‡\n\n3.å®¹å™¨å’Œç©ºé—´é…ç½®å™¨ä¹‹å‰å­¦ä¹ stlå®¹å™¨çš„æ—¶å€™ï¼Œå°±åœ¨å®šä¹‰ä¸­çœ‹åˆ°è¿‡è¿™é‡Œçš„allocé»˜è®¤æ¨¡æ¿å‚æ•°\n\nè¿™é‡Œé»˜è®¤ä¼ çš„ä¾¿æ˜¯stlåº“ä¸­çš„äºŒçº§ç©ºé—´é…ç½®å™¨\n\nåªè¦ä½ è‡ªå·±å†™çš„ç©ºé—´é…ç½®å™¨ç¬¦åˆstlçš„æ¥å£éœ€æ±‚ï¼Œä½ ä¾¿å¯ä»¥å°†è‡ªå·±çš„ç©ºé—´é…ç½®å™¨ä¼ å…¥æ­¤å¤„è®©å®¹å™¨ä½¿ç”¨ï¼\n\ntypedef __default_alloc_template&lt;__NODE_ALLOCATOR_THREADS, 0&gt; alloc;typedef __default_alloc_template&lt;false, 0&gt; single_client_alloc;\n\nåœ¨listä¸­ï¼Œallocåˆè¢«å°è£…äº†ä¸€å±‚ï¼Œç”¨æ¥å¤„ç†èŠ‚ç‚¹ç”³è¯·çš„é—®é¢˜\ntemplate &lt;class T, class Alloc = alloc&gt;class list &#123;protected:  typedef void* void_pointer;  typedef __list_node&lt;T&gt; list_node;  typedef simple_alloc&lt;list_node, Alloc&gt; list_node_allocator;\n\ntemplate&lt;class T, class Alloc&gt;class simple_alloc &#123;public:    static T *allocate(size_t n)                &#123; return 0 == n? 0 : (T*) Alloc::allocate(n * sizeof (T)); &#125;    static T *allocate(void)                &#123; return (T*) Alloc::allocate(sizeof (T)); &#125;    static void deallocate(T *p, size_t n)                &#123; if (0 != n) Alloc::deallocate(p, n * sizeof (T)); &#125;    static void deallocate(T *p)                &#123; Alloc::deallocate(p, sizeof (T)); &#125;&#125;;\n\néšåï¼Œå½“åˆ›å»ºèŠ‚ç‚¹ã€é”€æ¯èŠ‚ç‚¹çš„æ—¶å€™ï¼Œlistå°±ä¼šè°ƒç”¨å°è£…å¥½çš„simple_allocæ¥å¤„ç†ç©ºé—´\nlink_type get_node() &#123; return list_node_allocator::allocate(); &#125;void put_node(link_type p) &#123; list_node_allocator::deallocate(p); &#125; link_type create_node(const T&amp; x) &#123;    link_type p = get_node();    __STL_TRY &#123;      construct(&amp;p-&gt;data, x);//è°ƒç”¨èŠ‚ç‚¹çš„æ„é€ å‡½æ•°    &#125;    __STL_UNWIND(put_node(p));    return p;  &#125;  void destroy_node(link_type p) &#123;    destroy(&amp;p-&gt;data);//è°ƒç”¨èŠ‚ç‚¹çš„ææ„å‡½æ•°    put_node(p);  &#125;\n\n\nconstructé€šè¿‡å®šä½newæ˜¾å¼è°ƒç”¨èŠ‚ç‚¹çš„æ„é€ å‡½æ•°\ndestroyé€šè¿‡æŒ‡é’ˆæ¥è°ƒç”¨ææ„å‡½æ•°\n\ntemplate &lt;class T&gt;inline void destroy(T* pointer) &#123;    pointer-&gt;~T();&#125;template &lt;class T1, class T2&gt;inline void construct(T1* p, const T2&amp; value) &#123;  new (p) T1(value);&#125;\n\nåœ¨stl_tree.hä¸­å¯ä»¥çœ‹åˆ°åº“é‡Œé¢çš„çº¢é»‘æ ‘ä¹Ÿå¯¹ç©ºé—´é…ç½®å™¨è¿›è¡Œäº†ç±»ä¼¼çš„å°è£…\ntemplate &lt;class Key, class Value, class KeyOfValue, class Compare,          class Alloc = alloc&gt;class rb_tree &#123;protected:  typedef void* void_pointer;  typedef __rb_tree_node_base* base_ptr;  typedef __rb_tree_node&lt;Value&gt; rb_tree_node;  typedef simple_alloc&lt;rb_tree_node, Alloc&gt; rb_tree_node_allocator;  typedef __rb_tree_color_type color_type;\n\nç»“è¯­å…³äºç©ºé—´é…ç½®å™¨çš„å†…å®¹äº†è§£è¿™äº›å°±å·®ä¸å¤šå•¦ï¼\nå…¶å®å°±æ˜¯é€šè¿‡åº“é‡Œé¢çš„è¿™ä¸ªè®¾è®¡æ¥äº†è§£ä¸€ä¸ªæé«˜å°ç©ºé—´å†…å­˜ç”³è¯·æ•ˆç‡çš„æ–¹æ³•ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆ666çš„\n\næœ‰å•¥é—®é¢˜å¯ä»¥åœ¨è¯„è®ºæå‡ºå“¦\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘ç±»å‹è½¬æ¢æ–¹æ³•","url":"/posts/3134809219/","content":"æœ¬ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥è§è¯†ä¸€ä¸‹C++ä¸­æ–°å¢çš„ç±»å‹è½¬æ¢æ–¹æ³•\n\n\n[TOC]\n1.Cè¯­è¨€ä¸­ç±»å‹è½¬æ¢åœ¨Cè¯­è¨€ä¸­ï¼Œç±»å‹è½¬æ¢æœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\néšå¼ç±»å‹è½¬æ¢\næ˜¾ç¤ºå¼ºåˆ¶ç±»å‹è½¬æ¢int a=(int)&#39;c&#39;\n\nè¿™ä¸¤ç§æ–¹å¼æƒ³å¿…å„ä½éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†éšå¼ç±»å‹è½¬æ¢åœ¨ä¸€äº›åœºæ™¯é‡Œé¢ä¼šå‡ºç°é—®é¢˜\nvoid insert(size_t pos,char c)&#123;\tint end=10;\twhile(end&gt;=pos)\t&#123;\t\tend--;\t&#125;\t//...&#125;\n\nä¸Šé¢çš„ä»£ç ä¸­ï¼Œendæ˜¯intç±»å‹ï¼Œå½“è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œendä¼š-1ç›´åˆ°å°äºpos\nå¦‚æœpos=0ï¼Œé—®é¢˜å°±æ¥äº†ï¼\néšå¼ç±»å‹è½¬æ¢ä¼šè®©endåœ¨æ¯”è¾ƒçš„æ—¶å€™è¢«è½¬æ¢ä¸ºsize_tæ— ç¬¦å·æ•´å‹ï¼Œè€Œåœ¨æ— ç¬¦å·æ•´å‹ä¸­ï¼Œ-1æ˜¯ä¸€ä¸ªéå¸¸å¤§çš„æ­£æ•°ï¼Œä»è€Œå¯¼è‡´è¿™ä¸ªå‡½æ•°è¿›å…¥æ­»å¾ªç¯ï¼\n\n\néšå¼ç±»å‹è½¬æ¢å¯èƒ½ä¼šä¸¢å¤±æ•°æ®çš„ç²¾åº¦\næ˜¾ç¤ºç±»å‹è½¬æ¢çš„å†™æ³•éƒ½ä¸€æ ·ï¼Œå¯¼è‡´ä¸èƒ½å¾ˆå¥½çš„åŒºåˆ†æƒ…å†µ\n\nC++å§”å‘˜ä¼šä¹Ÿæ˜¯è®¤è¯†åˆ°äº†è¿™é‡Œçš„é—®é¢˜ï¼Œå½“äº§ç”Ÿéšå¼ç±»å‹è½¬æ¢çš„æ—¶å€™ï¼Œéš¾ä»¥è·Ÿè¸ªé”™è¯¯çš„æ¥æºï¼Œäºæ˜¯å¼€å‘äº†ä¸‹é¢çš„æ–°çš„ç±»å‹è½¬æ¢æ–¹å¼\n\nä¸è¿‡ï¼Œå› ä¸ºC++å…¼å®¹Cè¯­è¨€ï¼Œæ‰€ä»¥Cä¸­çš„è½¬æ¢æ–¹å¼ä¾æ—§æ”¯æŒ\n\n\n2.C++ä¸­çš„å¼ºåˆ¶ç±»å‹è½¬æ¢C++ä¸­æ–°å¢äº†ä¸‹é¢å››ç§æ˜æ˜çš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ“ä½œç¬¦\nstatic_castã€reinterpret_castã€const_castã€dynamic_cast\n\n2.1 static_castè¿™ä¸ªå…³é”®å­—æ˜¯ç”¨äºç›¸è¿‘ç±»å‹ä¹‹é—´çš„è½¬æ¢çš„ï¼Œæ¯”å¦‚doubleå’Œintï¼Œcharå’Œintä¹‹é—´\ndouble d = 11.4;int a1 = static_cast&lt;int&gt;(d);//ç›¸è¿‘ç±»å‹çš„è½¬æ¢char ch = &#x27;a&#x27;;int a2 = static_cast&lt;int&gt;(ch);cout &lt;&lt; a1 &lt;&lt; endl;cout &lt;&lt; a2 &lt;&lt; endl;\n\n\né™¤äº†ä»¥ä¸Šçš„ç±»å‹è½¬æ¢ï¼Œå…¶è¿˜æ”¯æŒå°†å†…ç½®ç±»å‹è½¬è‡ªå®šä¹‰ç±»å‹\nstruct mytest&#123;public:    // explicit mytest(int a = -1)    mytest(int a = -1)    &#123;        _a = a;        cout &lt;&lt; &quot;mytest() &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    mytest(const mytest &amp;st)    &#123;        _a = st._a;        cout &lt;&lt; &quot;mytest(copy) &quot; &lt;&lt; st._a &lt;&lt; endl;    &#125;    mytest &amp;operator=(const mytest &amp;st)    &#123;        _a = st._a;        cout &lt;&lt; &quot;mytest operator= &quot; &lt;&lt; st._a &lt;&lt; endl;        return *this;    &#125;private:    int _a;&#125;;\n\nä½¿ç”¨å¦‚ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œå½“mytestçš„æ„é€ å‡½æ•°æ²¡æœ‰åŠ explicitå…³é”®å­—çš„æ—¶å€™ï¼Œä¸‹æ–¹çš„ä¸¤ç§æ„é€ æ–¹å¼éƒ½å¯ä»¥æˆåŠŸè°ƒç”¨ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰\nint main()&#123;    mytest t1 = static_cast&lt;mytest&gt;(3);    mytest t2 = 5;    return 0;&#125;\n\n$ ./testmytest() 3mytest() 5\n\nåŠ äº†explicitä¹‹åï¼Œt2å°±æ²¡æœ‰åŠæ³•æˆåŠŸæ„é€ äº†ï¼Œå› ä¸ºéšå¼ç±»å‹è½¬æ¢è¢«ç¦ç”¨äº†\n$ g++ test.cpp -o testtest.cpp: In function â€˜int main()â€™:test.cpp:120:17: error: conversion from â€˜intâ€™ to non-scalar type â€˜mytestâ€™ requested     mytest t2 = 5;                 ^\n\nä½†static_caståœ¨åŠ äº†explicitä¹‹åï¼Œä¾æ—§å¯ä»¥å¸®æˆ‘ä»¬è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ï¼›\n$ ./testmytest() 3\n\n2.2 reinterpret_castè¿™ä¸ªå…³é”®å­—ç”¨äºä¸ç›¸è¿‘ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œæ¯”å¦‚æŒ‡é’ˆè½¬æˆint\nint* p = &amp;a1;//int x = static_cast&lt;int&gt;(p);//æŠ¥é”™ï¼šç±»å‹è½¬æ¢æ— æ•ˆint x = reinterpret_cast&lt;int&gt;(p);//éç›¸è¿‘ç±»å‹ä¸­çš„è½¬æ¢cout &lt;&lt; x &lt;&lt; endl;\n\næ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼ˆæ¯æ¬¡è¿è¡Œéƒ½ä¸ä¸€æ ·ï¼‰\n2029408\n\n2.3 const_castå¦‚åŒå…¶åï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨æ˜¯å–æ¶ˆä¸€ä¸ªå˜é‡çš„constå±æ€§\nconst int c1 = 3;//è¿™é‡Œå®šä¹‰çš„å˜é‡æ˜¯åœ¨æ ˆä¸Šçš„ï¼Œå¯ä»¥é—´æ¥ä¿®æ”¹int* ptr1 = const_cast&lt;int*&gt;(&amp;c1);//å–æ¶ˆconstæƒé™*ptr1 = 4;cout &lt;&lt; c1 &lt;&lt; endl;//ä¿®æ”¹äº†åœ°å€ä¹‹åæ²¡æœ‰å˜åŒ–cout &lt;&lt; *ptr1 &lt;&lt; endl;\n\n\næ¬¸ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬å–åœ°å€ä¹‹åï¼Œä¿®æ”¹ä¸º4äº†ï¼Œå˜é‡c1æœ¬èº«ä¸ä¼šå˜åŒ–å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨åšäº†ä¸€äº›ä¼˜åŒ–ï¼ŒæŠŠc1æ”¾åˆ°äº†æŸä¸ªåœ°æ–¹ï¼Œå–çš„æ—¶å€™å¹¶æ²¡æœ‰ç›´æ¥å»å†…å­˜é‡Œé¢å–\nvolatileå…³é”®å­—è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨volatileå…³é”®å­—ä¿®é¥°å˜é‡ï¼Œè¦æ±‚æ¯ä¸€æ¬¡éƒ½å¿…é¡»è¦å»å†…å­˜ä¸­å–\n//volatileå…³é”®å­—ï¼Œæ¯æ¬¡è®¿é—®céƒ½å»å†…å­˜ä¸­å–ï¼Œå±è”½ç¼–è¯‘å™¨ä¼˜åŒ–volatile const int c2 = 3;int* ptr2 = const_cast&lt;int*&gt;(&amp;c2);//å–æ¶ˆconstæƒé™*ptr2 = 4;cout &lt;&lt; &quot;volatitle:  &quot;;cout &lt;&lt; c2 &lt;&lt; endl;cout &lt;&lt; *ptr2 &lt;&lt; endl;\n\n\n2.4 dynamic_castè¯¥å…³é”®å­—æ˜¯ç”¨äºç»§æ‰¿ä¸­ï¼Œå°†ä¸€ä¸ªçˆ¶ç±»çš„æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºå­ç±»å¯¹è±¡çš„æŒ‡é’ˆ/å¼•ç”¨\nä¹‹å‰å­¦ä¹ ç»§æ‰¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬äº†è§£è¿‡\n\nå‘ä¸Šè½¬å‹ï¼šçˆ¶ç±»çš„æŒ‡é’ˆã€å¼•ç”¨å¯ä»¥ç›´æ¥æŒ‡å‘å­ç±»å¯¹è±¡çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼ˆè¿™æ˜¯ä¸€ä¸ªèµ‹å€¼å…¼å®¹çš„è§„åˆ™ï¼Œä¸éœ€è¦è¿›è¡Œè½¬æ¢ï¼‰\nå‘ä¸‹è½¬å‹ï¼šåè¿‡æ¥ä¹‹åï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼å—ï¼Ÿä¸å¤Ÿå®‰å…¨\n\ndynamic_castçš„ä½œç”¨å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸æ˜¯ä»–çš„å­ç±»\n\nå¦‚æœæ˜¯ï¼Œèƒ½å¤ŸæˆåŠŸè½¬æ¢\nä¸èƒ½åˆ™è¿”å›0\n\nè¿™ä¸ªå…³é”®å­—æœ€å¤§çš„ä½œç”¨ï¼Œä¾¿æ˜¯å¯ä»¥å¸®æˆ‘ä»¬åˆ¤æ–­è¿™ä¸ªçˆ¶ç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨æŒ‡å‘çš„æ˜¯å¦ä¸ºä¸€ä¸ªå­ç±»å¯¹è±¡\nclass A&#123;public:\tvirtual void f() &#123;&#125;&#125;;class B : public A&#123;&#125;;void fun(A* pa)&#123;\t// dynamic_castä¼šå…ˆæ£€æŸ¥æ˜¯å¦èƒ½è½¬æ¢æˆåŠŸï¼Œèƒ½æˆåŠŸåˆ™è½¬æ¢ï¼Œä¸èƒ½åˆ™è¿”å›0\tB* pb1 = static_cast&lt;B*&gt;(pa);\tB* pb2 = dynamic_cast&lt;B*&gt;(pa);\tcout &lt;&lt; &quot;pb1:&quot; &lt;&lt; pb1 &lt;&lt; endl;\tif (pb2)\t&#123;\t\tcout &lt;&lt; &quot;è½¬æ¢æˆåŠŸï¼pb2:&quot; &lt;&lt; pb2 &lt;&lt; endl;\t&#125;\telse\t&#123;\t\tcout &lt;&lt; &quot;è½¬æ¢å¤±è´¥ï¼pb2:&quot; &lt;&lt; pb2 &lt;&lt; endl;\t&#125;\t&#125;void test2()&#123;\tA a;\tB b;\tfun(&amp;a);\tfun(&amp;b);&#125;\n\n\nè¿™é‡Œæœ‰ä¸ªè¦æ±‚ï¼Œé‚£ä¾¿æ˜¯çˆ¶ç±»ä¸­å¿…é¡»è¦æœ‰è™šå‡½æ•°ï¼ˆå¤šæ€ï¼‰ï¼Œå¦åˆ™æ— æ³•æˆåŠŸè½¬æ¢\n\n3.C++å¼ºåˆ¶ç±»å‹è½¬æ¢çš„ä½œç”¨C++å¸Œæœ›æˆ‘ä»¬è§„èŒƒå¼ºåˆ¶ç±»å‹è½¬æ¢çš„æƒ…æ™¯ï¼Œé’ˆå¯¹æ€§çš„è°ƒç”¨ä¸åŒçš„å…³é”®å­—\nä½†æ˜¯ç”±äºå®ƒæ²¡æœ‰å¼ºåˆ¶ï¼Œåœ¨å®é™…æƒ…å†µä¸­ç”¨çš„åè€Œä¸å¤š\nä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šå…³é—­&#x2F;æŒ‚èµ·æ­£å¸¸çš„ç±»å‹æ£€æŸ¥ï¼Œåœ¨å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬è¦ä»”ç»†æ£€æŸ¥æ˜¯å¦è¿˜æœ‰åˆ«çš„æ–¹æ³•æ¥è¾¾åˆ°ç›®çš„ã€‚æœ€å¥½æ˜¯é¿å…ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢!\n4.RTTIä¹‹å‰å­¦ä¹ æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å­¦è¿‡ä¸€ç§æ€è·¯å«RAII\nè¿™é‡Œçš„RTTIå…¨ç§°ä¸ºRun-time Type identificationï¼Œå³è¿è¡Œæ—¶ç±»å‹è¯†åˆ«\nC++é€šè¿‡ä¸‹é¢å‡ ç§æ–¹å¼æ¥æ”¯æŒRTTIï¼š\n\ntypeid\ndecltype\ndyanmic_cast\n\nè¿™ä¸ªæ¦‚å¿µåªéœ€è¦äº†è§£å³å¯ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘usingçš„ä¸‰ç§ç”¨æ³• | è½¬è½½","url":"/posts/834577958/","content":"C++ usingçš„ä¸‰ç§ç”¨æ³•ï¼Œè¿™ä¸ªä¹‹å‰è¿˜æ²¡æœ‰æ¥è§¦è¿‡\n\n\nç¤ºä¾‹#include &lt;iostream&gt;using namespace std;class ClassOne &#123;public:\tint w;protected:\tint a;&#125;;class ClassTwo&#123;public:\tusing ModuleType = ClassOne;&#125;;template &lt;typename ClassType&gt;class ClassThree : private ClassType&#123;public:\tusing typename ClassType::ModuleType;\tModuleType m;\tClassThree() = default;\tvirtual ~ClassThree() = default;&#125;;void main()&#123;\tClassThree&lt;ClassTwo&gt;::ModuleType a;&#125;\n\n\nåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œä¸€å…±æœ‰ä¸‰å¤„ä½¿ç”¨äº†usingï¼Œåˆ†åˆ«æ˜¯ç¬¬3,16,22è¡Œï¼Œå®ƒä»¬çš„ä½œç”¨ä¸ºï¼š\n\nå¼•å…¥å‘½åç©ºé—´\næŒ‡å®šåˆ«å\nåœ¨å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜\n\nå¼•å…¥å‘½åç©ºé—´æŒ‡å®šå‘½åç©ºé—´æ˜¯C++ using namespaceä¸­æœ€å¸¸è¢«ç”¨åˆ°çš„åœ°æ–¹ï¼Œåœ¨ç¬¬3è¡Œä¸­çš„ï¼š\nusing namespace std;\n\n\næŒ‡å®šåˆ«åusingçš„å¦ä¸€ä¸ªä½œç”¨æ˜¯æŒ‡å®šåˆ«åï¼Œä¸€èˆ¬éƒ½æ˜¯using a = b;è¿™æ ·çš„å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚åœ¨13è¡Œä¸­ï¼š\nusing ModuleType = ClassOne;\n\n\nModuleType æ˜¯ClassOneçš„ä¸€ä¸ªåˆ«åã€‚usingè¿™ä¸ªä½œç”¨ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œæ¯”å¦‚åœ¨vector.hä¸­å°±æœ‰ï¼š\ntemplate&lt;class _Ty,class _Alloc = allocator&lt;_Ty&gt;&gt;class vector: public _Vector_alloc&lt;_Vec_base_types&lt;_Ty, _Alloc&gt;&gt;&#123;public:\tusing value_type = _Ty;\tusing allocator_type = _Alloc;&#125;\n\nå³value_type æ˜¯_Tyçš„ä¸€ä¸ªåˆ«åï¼Œvalue_type a; å’Œ_Ty a;æ˜¯åŒæ ·çš„æ•ˆæœã€‚\n\nå¯ä»¥ç†è§£ä¸ºC++ä¸­çš„typedef\n\nåœ¨å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜usingçš„ç¬¬ä¸‰ä¸ªä½œç”¨æ˜¯å­ç±»ä¸­å¼•ç”¨åŸºç±»çš„æˆå‘˜ï¼Œä¸€èˆ¬éƒ½æ˜¯using CBase::a;è¿™æ ·çš„å½¢å¼å‡ºç°ï¼Œæ¯”å¦‚åœ¨22è¡Œä¸­ï¼š\nusing typename ClassType::ModuleType;\n\nå®ƒå’Œä¸€èˆ¬å½¢å¼æœ‰äº›åŒºåˆ«ï¼Œå°±æ˜¯å®ƒåŠ äº†ä¸ªtypename ä¿®é¥°ï¼Œè¿™æ˜¯å› ä¸ºç±»ClassThreeæœ¬èº«æ˜¯ä¸ªæ¨¡æ¿ç±»ï¼Œå®ƒçš„åŸºç±»ClassTypeæ˜¯ä¸ªæ¨¡æ¿ï¼Œè¿™ä¸ªtypename å’Œusingå…¶å®æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚å¦‚æœClassTypeä¸æ˜¯æ¨¡æ¿çš„è¯ï¼Œè¿™è¡Œä»£ç å°±å¯ä»¥å†™æˆï¼š\nusing ClassType::ModuleType;\n\nå‰©ä¸‹çš„å°±æ˜¯usingçš„ä½œç”¨ï¼Œå®ƒå¼•ç”¨äº†åŸºç±»ä¸­çš„æˆå‘˜ModuleTypeï¼Œ ModuleTypeåˆæ˜¯ç±»ClassOneçš„åˆ«åï¼Œæ‰€ä»¥åé¢ModuleType m;ç›¸å½“äºå®šä¹‰å¯¹è±¡mï¼Œå¯¹äºå­ç±»æˆå‘˜mæ¥è¯´ï¼Œè¿™æ ·çš„æ•ˆæœå’Œä¸‹é¢æ˜¯ç›¸åŒçš„ï¼š\ntypename ClassType::ModuleType m;\n\nä¸åŒä¹‹å¤„åœ¨äºusingè¿˜ä¿®æ”¹äº†åŸºç±»æˆå‘˜çš„è®¿é—®æƒé™ï¼Œå­ç±»ClassThree ç§æœ‰ç»§æ‰¿ClassTypeï¼Œæ‰€ä»¥ClassTypeä¸­å…±æœ‰æˆå‘˜ModuleType åœ¨å­ç±»ClassThree æ˜¯ç§æœ‰çš„ï¼Œå®ƒä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ã€‚ä½†æ˜¯ä½¿ç”¨usingåï¼Œåœ¨main()å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨ã€‚\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª [CC 4.0 BY-SA] ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚æœ¬æ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/chaipp0607/article/details/100128842\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘C++11çš„é‚£äº›æ–°ç‰¹æ€§","url":"/posts/2016080368/","content":"æœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹C++11çš„é‚£äº›æ–°ç‰¹æ€§ï¼\n\n\n\næ‰€ä½¿ç”¨çš„ç¼–è¯‘å™¨ï¼šVS2019\næœ¬ç¯‡åšå®¢æ‰€æœ‰çš„æµ‹è¯•æºç éƒ½å¯ä»¥åœ¨æˆ‘çš„GITEEä»“åº“æ‰¾åˆ° \n\n[TOC]\n1.å‰è¨€C++11æ˜¯C++çš„æ ‡å‡†å§”å‘˜ä¼šåœ¨2011å¹´æ›´æ–°çš„C++æ–°ç‰¹æ€§ã€‚è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡çº§åŒ…ã€‚å’ŒJAVA\\PYTHONè¿™ç§æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„è¯­è¨€ç›¸æ¯”ï¼ŒC++æ›´æ–°çš„å°±æ²¡æœ‰é‚£ä¹ˆé¡ºé£é¡ºæ°´äº†ï¼Œè€Œä¸”æ¯ä¸€æ¬¡æ›´æ–°è™½ç„¶ä¿®å¤äº†ä¸€äº›é—®é¢˜ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ›´å¤šçš„â€œæ²¡å¤ªå¤§å¿…è¦â€çš„æ›´æ–°\n\næ¯”å¦‚æ²¡å•¥ç”¨çš„arrayå®¹å™¨ï¼Œå’Œint arr[10]è¿™ç§å†…ç½®æ–¹å¼çš„åŒºåˆ«ä¸»è¦åœ¨äºè¶Šç•Œæ£€æŸ¥\n\nä¸è¿‡å’±ä»¬è¿™ç§å°èœé¸¡ï¼Œåªæœ‰å­¦ä¹ çš„æƒåŠ›ï¼Œå“ªæœ‰å•¥èµ„æ ¼è¯„å®šC++æ ‡å‡†å‘¢ï¼Ÿæˆ‘å¬å¤§ä½¬è¯´ï¼Œç°åœ¨æœ€å…³æ³¨çš„C++æ›´æ–°ä¾¿æ˜¯ç½‘ç»œåº“çš„ä¸Šçº¿äº†ï¼Œä¸è¿‡é‚£ä¸ªè²Œä¼¼å¾—ç­‰åˆ°C++23å»äº†\nè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ¥åº·åº·ä¸€äº›C++11çš„æ–°åŠŸèƒ½å§ï¼\n\n2.åˆ—è¡¨&#123;&#125;åˆå§‹åŒ–C++11æ›´æ–°äº†åˆå§‹åŒ–æ–¹å¼ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç”¨èŠ±æ‹¬å·çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–\nstruct TestA&#123;\tint _a;\tint _b;&#125;;void TestInit()&#123;\tint arr1[] = &#123; 1,2,3,4,5 &#125;;\tTestA t1 = &#123; 1,2 &#125;;&#125;\n\nä¹‹å‰æˆ‘ä»¬å·²ç»ä¹ æƒ¯äºç”¨è¿™å¼ æ–¹å¼æ¥åˆå§‹åŒ–æ•°ç»„æˆ–è€…ç»“æ„ä½“ï¼Œè¿™åœ¨C++98ä¸­å·²ç»æ”¯æŒ\nè€ŒC++11åˆ™åœ¨è¿™ç§ç©æ³•ä¹‹ä¸Šï¼Œåˆå¢æ·»äº†ä¸€éƒ¨åˆ†æ–°æ“ä½œï¼Œé‚£å°±æ˜¯ç›´æ¥ç”¨èŠ±æ‹¬å·åˆå§‹åŒ–ï¼Œä½ ç”šè‡³å¯ä»¥æŠŠ=ç»™çœç•¥äº†\nint arr2[]&#123; 1,2,3,4,5 &#125;;int arr3[5]&#123; 0 &#125;;TestA t2&#123; 1,2 &#125;;\n\nä¸è¿‡ä¸Šé¢è¿™ç§å†™æ³•æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œè¿˜å¢åŠ äº†ä»£ç ç†è§£çš„éš¾åº¦ï¼Œä¸å¦‚ç›´æ¥ç”¨åŸæœ¬çš„å†™æ³•ã€‚\næ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯åœ¨newåˆå§‹åŒ–å¤šä¸ªæ•°æ®çš„æ—¶å€™ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚\n2.1 newåˆå§‹åŒ–å¤šä¸ªæ•°æ®åœ¨åŠ¨æ€å†…å­˜ç®¡ç†é‚£ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ äº†newçš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œä¹Ÿæåˆ°äº†()/[]è¿™ä¸¤ä¸ªæ‹¬å·çš„åŒºåˆ«\nint *p1 = new int(3);//å¼€è¾Ÿä¸€ä¸ªintçš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º3èµ‹å€¼ç»™p1int *p2 = new int[3];//å¼€è¾Ÿ3ä¸ªintçš„ç©ºé—´ï¼Œä¸è¿›è¡Œåˆå§‹åŒ–\n\nåœ¨C++11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨èŠ±æ‹¬å·ï¼Œå¯¹newå¼€æ‹¼å‡ºæ¥çš„æ•°ç»„è¿›è¡Œæ‰¹é‡åˆå§‹åŒ–ã€‚æ‰“å°çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°p2ä¸­çš„æ•°æ®éƒ½æ˜¯æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼ˆvsä¹ŸæŠ¥äº†è­¦å‘Šï¼‰è€Œp3ä¸­çš„æ•°æ®éƒ½å®Œæˆäº†åˆå§‹åŒ–\n\nå¯¹äºç»“æ„ä½“æ•°æ®è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨èŠ±æ‹¬å·ç›´æ¥è°ƒç”¨å…¶æ„é€ å‡½æ•°\n\nå…¶ä¸­t5æ˜¯å‘ç”Ÿäº†éšå¼ç±»å‹è½¬æ¢+è°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œçš„åˆå§‹åŒ–\nTestA t5 = &#123; 1, 3 &#125;;//å¯¹ç±»æ¥è¯´ï¼Œä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢+è°ƒç”¨æ„é€ å‡½æ•°\n\né€šè¿‡è°ƒè¯•+æ‰“æ–­ç‚¹å¯ä»¥çœ‹åˆ°å…¶è°ƒç”¨äº†æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–\n\nåŒæ ·çš„ï¼Œè°ƒç”¨newçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šä¸ªèŠ±æ‹¬å·çš„æ–¹å¼è¿›è¡Œæ‰¹é‡åˆå§‹åŒ–ã€‚è¿™åœ¨newä¸€ä¸ªå¯¹è±¡æ•°ç»„çš„æ—¶å€™éå¸¸æ–¹ä¾¿\n\n2.2 initializer_list2.2.1 STLå®¹å™¨åˆå§‹åŒ–ä¸å…‰æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ç±»ã€å†…ç½®ç±»å‹å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œstlåº“é‡Œé¢çš„å®¹å™¨ä¹Ÿå¯ä»¥ä½¿ç”¨ç›¸åŒæ–¹å¼è¿›è¡Œåˆå§‹åŒ–\nvector&lt;int&gt; v1 = &#123; 1,2,3,4 &#125;;vector&lt;int&gt; v2&#123; 1,2,3,4 &#125;;//ä¸å»ºè®®è¿™ä¹ˆå†™\n\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ç±»ä¼¼çš„æ–¹å¼åˆå§‹åŒ–vectorå†…éƒ¨çš„å¯¹è±¡\n\nä½œä¸ºå®¹å™¨çš„ä¸€ä»½å­ï¼Œmapä¹Ÿæœ‰ä¸€ä¸ªåˆ©ç”¨ilè¿›è¡Œåˆå§‹åŒ–çš„æ„é€ å‡½æ•°\n\nä½¿ç”¨æ–¹å¼å’Œä¹‹å‰æåˆ°çš„æ²¡å•¥åŒºåˆ«ï¼Œè¿™é‡Œå°±ä¸å¤šè®²å•¦\nmap&lt;int, int&gt; m1 = &#123; &#123;10, 20&#125;,&#123; 30,40&#125;,&#123;50,60&#125; &#125;;for (auto e : m1) &#123;\tcout &lt;&lt; e.first &lt;&lt; &quot;-&quot; &lt;&lt; e.second &lt;&lt; &quot; &quot;;&#125;cout &lt;&lt; endl;\n\n\nä½ å¯èƒ½ä¼šå¥½å¥‡ï¼Œè¿™ç§åˆå§‹åŒ–çš„åº•å±‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿé‚£ä¹ˆå°±è¦æåˆ°c++11æ–°å¢çš„ä¸€ä¸ªå®¹å™¨äº†\n2.2.2  initializer_list å®¹å™¨å¦‚æœä½ æŠŠvectorç­‰å®¹å™¨çš„ç‰ˆæœ¬è®¾å®šä¸ºC++11ï¼Œçœ‹æ–‡æ¡£çš„æ—¶å€™ä¾¿ä¼šå‘ç°C++11æ–°å¢äº†ä¸€ä¸ªç”¨initializer_listè¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œ\n\n\nå†æ¥çœ‹çœ‹initializer_listï¼Œè¿™ä¸å°±æ˜¯æˆ‘ä»¬åˆšåˆšç”¨çš„èŠ±æ‹¬å·å˜›ï¼Ÿ\n\nè¿™ä¸ªå®¹å™¨çš„æˆå‘˜å‡½æ•°å¾ˆå°‘ï¼Œåªæœ‰ä¸¤ä¸ªè¿­ä»£å™¨ä»¥åŠsize()\n\nå®ƒæœ€é‡è¦çš„ç‰¹æ€§ï¼Œä¾¿æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨autoè‡ªåŠ¨æ¨åˆ°å‚æ•°ç±»å‹çš„æ—¶å€™ï¼Œ&#123;1,2,3,4&#125;è¿™ç§ç±»å‹ä¼šè¢«æ¨åˆ°æˆinitializer_list\nauto il = &#123; 10, 20, 30 &#125;;cout &lt;&lt; typeid(il).name() &lt;&lt; endl;//initializer_list \n\nå› ä¸ºä»–æœ‰è¿­ä»£å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨èŒƒå›´forè¿›è¡Œæ‰“å°æ“ä½œ\n\nä¸ªäººç†è§£ï¼Œå½“å…¶ä»–å®¹å™¨ä½¿ç”¨initializer_listè¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œæœ¬è´¨ä¸Šè°ƒç”¨çš„æ¥å£å’Œåˆ©ç”¨è¿­ä»£å™¨è¿›è¡Œåˆå§‹åŒ–æ˜¯ä¸€æ ·çš„\n2.3.1 æ’å…¥iléƒ¨åˆ†å®¹å™¨çš„insertå‡½æ•°ä¹Ÿæ·»åŠ äº†ä½¿ç”¨ilè¿›è¡Œæ’å…¥è¿ç»­æ•°æ®çš„æ“ä½œ\n\nset&lt;int&gt; s2 = &#123; 1,2,3,4 &#125;;s2.insert(&#123; 5,6,7,8 &#125;);\n\n\nåœ¨vectorä¸­ä½¿ç”¨ilæ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šposä½ç½®è¿™ä¸ªå’Œvectorçš„å…¶ä»–å‡ ä¸ªæ’å…¥å‡½æ•°æ˜¯ä¸€æ ·çš„\n\n2.4 æ¨¡æ‹Ÿå®ç°ilæ„é€ å‡½æ•°é‚£ä¹ˆï¼Œå¦‚ä½•è®©æˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿå®ç°çš„vectorä¹Ÿèƒ½æ”¯æŒè¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿã€æ¨¡æ‹Ÿå®ç°vectoræºç ã€‘\nå’ŒSTLåº“é‡Œé¢çš„ä»£ç ä¸€æ ·ï¼Œæ·»åŠ ä¸Šinitializer_listçš„æ„é€ å‡½æ•°å³å¯\nå› ä¸ºilå®¹å™¨å·²ç»æœ‰äº†å®ƒè‡ªå·±çš„è¿­ä»£å™¨ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤ç”¨è¿­ä»£å™¨æ„é€ çš„æ“ä½œï¼Œç›´æ¥è¿›è¡Œéå†ç„¶åpush_backå³å¯ï¼\n//initializer_listæ„é€ vector(const initializer_list&lt;T&gt;&amp; il)    :_start(nullptr),    _finish(nullptr),    _endofstorage(nullptr)&#123;    for (auto e : il) &#123;        push_back(e);    &#125;&#125;\n\n\nè¯•è¯•è‡ªå®šä¹‰ç±»å‹ï¼Œä¹Ÿå¯ä»¥å¾ˆå¥½çš„æ”¯æŒï¼\n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¼˜åŒ–çš„åœ°æ–¹ï¼Œé‚£ä¾¿æ˜¯å¼€å§‹æ„é€ çš„æ—¶å€™ï¼Œç›´æ¥ç»™vectorå¼€å¯¹åº”il size()çš„ç©ºé—´å¤§å°ï¼Œé¿å…åç»­push_backçš„æ—¶å€™éœ€è¦å¤šæ¬¡æ‰©å®¹\n//initializer_listæ„é€ vector(const initializer_list&lt;T&gt;&amp; il)    :_start(nullptr),_finish(nullptr),_endofstorage(nullptr)&#123;    reserve(il.size());//æ‰©å®¹    for (auto e : il) &#123;        push_back(e);    &#125;&#125;\n\né€šè¿‡è°ƒè¯•èƒ½å‘ç°è¾¾æˆäº†æˆ‘ä»¬çš„éœ€æ±‚ï¼ˆå› ä¸ºè°ƒè¯•æ­¥éª¤å¤ªå¤šï¼Œæˆªå›¾ä¸æ–¹ä¾¿ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚æ„Ÿå…´è¶£çš„è€å“¥å¯ä»¥å»æˆ‘çš„giteeä»“åº“ä¸‹æºç è‡ªå·±è¯•è¯•ï¼‰\n3.å˜é‡å£°æ˜C++11æä¾›äº†å¤šç§ç®€åŒ–çš„å£°æ˜/å®šä¹‰æ–¹å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„auto\n3.1 auto\nC++98ä¸­autoæ˜¯ä¸€ä¸ªå­˜å‚¨ç±»å‹çš„è¯´æ˜ç¬¦ï¼Œè¡¨æ˜å˜é‡æ˜¯å±€éƒ¨è‡ªåŠ¨å­˜å‚¨ç±»å‹ï¼Œä½†æ˜¯å±€éƒ¨åŸŸä¸­å®šä¹‰å±€ éƒ¨çš„å˜é‡é»˜è®¤å°±æ˜¯è‡ªåŠ¨å­˜å‚¨ç±»å‹ï¼Œæ‰€ä»¥autoå°±æ²¡ä»€ä¹ˆä»·å€¼äº†ã€‚\n\nC++11ç»™autoä¸Šäº†å®ç°è‡ªåŠ¨ç±»å‹æ¨æ–­çš„å…¨æ–°åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªå˜é‡çš„æ—¶å€™ç›´æ¥ç”¨autoè¿›è¡Œç±»å‹æ¨å¯¼\nauto num = 1;//intauto p = &amp;num;//int*\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæƒ³ç”¨autoæ¨åˆ°ï¼Œåˆ™å¿…é¡»åˆå§‹åŒ–ã€‚åªç»™ä¸€ä¸ªauto iæ˜¯ä¸è¡Œçš„ï¼\nautoè¿˜å¯ä»¥ç”¨äºèŒƒå›´forç­‰å…¶ä»–æ“ä½œï¼Œè¿™äº›éƒ½åœ¨ä¹‹å‰è®²è§£è¿™ä¸ªå…³é”®å­—çš„åšå®¢ä¸­æœ‰æåˆ°ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼\n\n3.2 decltypeå…³é”®å­—decltypeå¯ä»¥æŠŠå˜é‡å£°æ˜æˆæˆ‘ä»¬æƒ³è¦çš„ç›®æ ‡ç±»å‹ï¼›å¯ä»¥ç†è§£ä¸ºå’Œtypedefçš„ä½œç”¨æœ‰ä¸€å®šçš„ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯å¯ä»¥è‡ªåŠ¨æ¨å¯¼çš„ï¼\nint a = 10, b = 20;int sum = a * b;cout &lt;&lt; &quot;type(sum) &quot; &lt;&lt; typeid(sum).name() &lt;&lt; endl;decltype(a * b) num; // æŠŠa*bçš„ç±»å‹å£°æ˜ä¸ºnumdecltype(&amp;sum) ptr;  // æŠŠ&amp;sumçš„ç±»å‹å£°æ˜ä¸ºptrcout &lt;&lt; &quot;type(a*b)  &quot; &lt;&lt; typeid(num).name() &lt;&lt; endl;cout &lt;&lt; &quot;type(&amp;sum) &quot; &lt;&lt; typeid(ptr).name() &lt;&lt; endl;\n\n\næ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆç¥å¥‡ï¼Ÿå¾ˆæ–¹ä¾¿ï¼Ÿ\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨decltypeå…³é”®å­—æ¥æŒ‡å®šå‡½æ•°æŒ‡é’ˆçš„æ—¶å€™ï¼Œå‡½æ•°åå’Œå‡½æ•°å‚æ•°ä¹‹é—´éœ€è¦åŠ ä¸Š&amp;ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®æ¨å¯¼ç±»å‹\ndecltype(add) &amp;(int, int) // æ­£ç¡®decltype(add) (int, int) // é”™è¯¯    \n\n\né‚£è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦å¤–ä¸€ä¸ªè¯­è¨€å£°æ˜å˜é‡çš„æ–¹å¼å§ï¼ğŸ˜‚ å‹æ ¹ä¸éœ€è¦å˜é‡ç±»å‹æï¼ˆå› ä¸ºpythonæ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼‰\n# Pythona=10sum = a*20print(type(a))print(type(sum))\n\n\nè¦æ˜¯C++ä¹Ÿæœ‰è¿™ä¹ˆæ–¹ä¾¿å°±å¥½äº†ğŸ˜­\n3.3 typeidè¿™ä¸ªå…³é”®å­—ä¸Šé¢å·²ç»ç”¨è¿‡å¥½å‡ æ¬¡äº†ï¼Œå°±æ˜¯ç”¨æ¥æ‰“å°å˜é‡çš„ç±»å‹çš„\nint a = 10;cout &lt;&lt; &quot;type(a) &quot; &lt;&lt; typeid(a).name() &lt;&lt; endl;\n\n\n4.å·¦&#x2F;å³å€¼å¼•ç”¨åœ¨ä¹‹å‰æˆ‘ä»¬å­¦ä¹ äº†å¼•ç”¨çš„åŸºæœ¬æ“ä½œï¼Œä½†é‚£ä¸ªæ˜¯å·¦å€¼å¼•ç”¨ã€‚å½“æ—¶æˆ‘ä»¬å°šæœªå¼•å…¥å·¦æŒ‡å¼•ç”¨å’Œå³å€¼å¼•ç”¨çš„åŒºåˆ«ã€‚æœ¬ç¯‡åšå®¢é‡Œé¢å°†ä¼šè¯¦ç»†è®²è§£~\n4.1 å·¦å€¼&#x2F;å³å€¼åŒºåˆ«è¦è§£ç­”è¿™ä¸¤ç§å¼•ç”¨çš„åŒºåˆ«ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦ç›´åˆ°å·¦å€¼/å³å€¼åˆ†åˆ«ä»£æŒ‡ä»€ä¹ˆ\nå·¦å€¼ï¼š\n\nå¯ä»¥å­˜åœ¨äº=å·¦è¾¹æˆ–å³è¾¹\nå¯ä»¥å–åœ°å€\nå¯ä»¥å¯¹å®ƒèµ‹å€¼ï¼ˆconsté™¤å¤–ï¼‰\n\nå³å€¼ï¼š\n\nå³å€¼æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ•°æ®çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ï¼šå‡½æ•°è¿”å›å€¼[ä¸èƒ½æ˜¯å·¦å€¼å¼•ç”¨è¿”å›çš„]ã€è¡¨è¾¾å¼è¿”å›å€¼A+Bã€å­—é¢å¸¸é‡10\nå³æŒ‡åªèƒ½å‡ºç°åœ¨=çš„å³è¾¹ï¼Œä¸èƒ½å‡ºç°åœ¨å·¦è¾¹ï¼ˆä¿ºå¯æ²¡è§è¿‡A+B=Cçš„ä»£ç è¯­æ³•ï¼‰\nå³æŒ‡ä¸èƒ½å–åœ°å€\n\nå·¦å€¼å’Œå³å€¼æœ€å¤§çš„åŒºåˆ«ä¾¿æ˜¯ï¼šå·¦å€¼å¯ä»¥å–åœ°å€ï¼Œå³å€¼ä¸èƒ½å–åœ°å€\n4.1.1 å°†äº¡å€¼ï¼ˆæ¦‚å¿µï¼‰å³å€¼è¿˜åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n//çº¯å³å€¼10;a+b;Add(a,b);//å°†äº¡å€¼string s1(&quot;1111&quot;);//&quot;1111&quot;æ˜¯å°†äº¡å€¼string s2 = to_string(1234);//to_stringçš„returnå¯¹è±¡æ˜¯ä¸€ä¸ªå°†äº¡å€¼string s3 = s1+&quot;hello&quot; //ç›¸åŠ é‡è½½çš„returnå¯¹è±¡æ˜¯ä¸€ä¸ªå°†äº¡å€¼move(s1);//è¢«moveä¹‹åçš„s1ä¹Ÿæ˜¯å°†äº¡å€¼\n\nåœ¨å³å€¼å¼•ç”¨çš„ä»‹ç»ä¸­å°†ç”¨ä¸Šå°†äº¡å€¼çš„æ¦‚å¿µ\n4.2 å·¦å€¼å¼•ç”¨å·¦å€¼å¼•ç”¨å°±æ˜¯å¯¹å·¦å€¼çš„å¼•ç”¨ã€‚æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„å°±æ˜¯è¿™ä¸€ç±»å‹\n// aã€bã€cã€*aéƒ½æ˜¯å·¦å€¼// å¯¹è±¡å†…éƒ¨çš„*thisä¹Ÿæ˜¯å·¦å€¼int* a = new int(0);int b = 1;const int c = 2;// ä»¥ä¸‹æ˜¯å¯¹ä¸Šé¢å·¦å€¼çš„ å·¦å€¼å¼•ç”¨int*&amp; rp = a;int&amp; rb = b;const int&amp; rc = c;int&amp; p = *a;// å¼•ç”¨ç›¸å½“äºåˆ«åï¼Œä¿®æ”¹å¼•ç”¨åçš„å†…å®¹ç›¸ç­‰äºä¿®æ”¹åŸæœ¬çš„å‚æ•°\n\nä¹‹å‰ä¹Ÿæåˆ°äº†ï¼Œå…¶ä½œç”¨ä¸»è¦æ˜¯åœ¨é’ˆå¯¹å‡ºäº†ä½œç”¨åŸŸä¸ä¼šé”€æ¯çš„å˜é‡è¿›è¡Œå¼•ç”¨è¿”å›ï¼Œä»¥èŠ‚çœæ‹·è´çš„ä»£ä»·ã€‚äº¦æˆ–è€…æ˜¯å¼•ç”¨ä¼ å‚ï¼Œå‡å°‘å½¢å‚æ‹·è´ä»£ä»·\n\n4.3 å³å€¼å¼•ç”¨æ¥çœ‹çœ‹å‡ ä¸ªæ¯”è¾ƒå¸¸è§çš„å³å€¼å§ï¼Œå…¶ä¸­Addæ˜¯ä¸€ä¸ªç®€å•çš„ç›¸åŠ å‡½æ•°\ndouble x = 1.1, y = 2.2;// å¸¸è§çš„å³å€¼10;x + y;Add(x, y);// ä»¥ä¸‹éƒ½æ˜¯å¯¹å³å€¼çš„å³å€¼å¼•ç”¨int&amp;&amp; rr1 = 10;double&amp;&amp; rr2 = x + y;double&amp;&amp; rr3 = Add(x, y);//å³å€¼ä¸èƒ½å‡ºç°åœ¨=çš„å·¦è¾¹//10 = 1;//x + y = 1;//fmin(x, y) = 1;\n\nè™½ç„¶æˆ‘ä»¬ä¸èƒ½ç›´æ¥å¯¹å³å€¼è¿›è¡Œå–åœ°å€/èµ‹å€¼æ“ä½œï¼Œä½†æ˜¯åœ¨å³å€¼å¼•ç”¨è¿‡åï¼Œä¾¿å¯ä»¥å¯¹å¼•ç”¨å€¼è¿›è¡Œå–åœ°å€/èµ‹å€¼æ“ä½œ\n\nè¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨çš„æ—¶å€™ï¼Œä¼šæŠŠå½“å‰å¼•ç”¨çš„æ•°æ®æ”¾å…¥ä¸€ä¸ªä½ç½®å­˜èµ·æ¥ã€‚\nå­˜æ”¾ä½ç½®ï¼šæ™®é€šå˜é‡åœ¨æ ˆï¼Œå…¨å±€å˜é‡&#x2F;é™æ€å˜é‡åœ¨é™æ€åŒºï¼ˆæ²¡æœ‰éªŒè¯è¿‡ï¼Œå¯èƒ½ä¸å¯¹ï¼‰\n\nint&amp;&amp; rr1 = 10;cout &lt;&lt; rr1  &lt;&lt; endl;rr1 = 3;cout &lt;&lt; rr1 &lt;&lt; endl;int* p = &amp;rr1;*p = 2;cout &lt;&lt; rr1 &lt;&lt; endl;\n\n\nå¦‚æœä½ ä¸å–œæ¬¢å³å€¼å¼•ç”¨è¢«ä¿®æ”¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨constè¿›è¡Œä¿®é¥°\n\n4.4 ä¸¤ä¸ªå¼•ç”¨çš„åŒºåˆ«ç”¨ä¸€ä¸ªè¡¨æ ¼æ¥æ€»ç»“äºŒè€…çš„åŒºåˆ«\n\n\n\nå·¦å€¼å¼•ç”¨\nå³å€¼å¼•ç”¨\n\n\n\nåªèƒ½å¼•ç”¨å·¦å€¼\nåªèƒ½å¼•ç”¨å³æŒ‡\n\n\nconstå¯ä»¥å¼•ç”¨å·¦å€¼&#x2F;å³å€¼\nå¯ä»¥å¼•ç”¨moveåçš„å·¦å€¼\n\n\n4.4.1 movemoveå¯ä»¥æŠŠå·¦å€¼æ¢æˆå³å€¼ï¼Œä½†ä¸èƒ½æŠŠå³å€¼è½¬å·¦å€¼\n\nè°¨æ…ä½¿ç”¨moveï¼Œå¦‚æœå½“å‰å¯¹è±¡åœ¨åç»­è¿˜éœ€è¦ä½¿ç”¨ï¼Œåˆ™ä¸èƒ½moveå°†å…¶æ”¹ä¸ºå³å€¼ï¼Œå¦åˆ™å¯èƒ½èµ„æºè¢«æ å¤ºå¯¼è‡´è¯¥å¯¹è±¡å¤±æ•ˆï¼\n\n\n4.5 å³å€¼å¼•ç”¨ä½¿ç”¨åœºæ™¯å³å€¼å¼•ç”¨å¯ä»¥æé«˜ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼ç­‰æ·±æ‹·è´åœºæ™¯çš„æ•ˆç‡\nä»€ä¹ˆåœºæ™¯å¯ä»¥ä½¿ç”¨å·¦å€¼å¼•ç”¨æé«˜æ•ˆç‡?\n\næ“ä½œç¬¦é‡è½½ï¼šå‰ç½®++\næ“ä½œç¬¦é‡è½½ï¼š+=\nå‡ºäº†ä½œç”¨åŸŸåä¸ä¼šé”€æ¯çš„å˜é‡ï¼Œå¦‚è¾“å‡ºå‹å‚æ•°ï¼ˆå³ä¼ å…¥å‡½æ•°è¿›è¡Œå¤„ç†çš„å‚æ•°ï¼‰\n\nè€Œæœ‰ä¸€äº›åœºæ™¯æ˜¯å·¦å€¼å¼•ç”¨æ— æ³•å¤„ç†çš„ï¼š\n\næ“ä½œç¬¦é‡è½½ï¼šåç½®++ï¼ˆéœ€è¦è¿”å›ä¸€ä¸ªå…¨æ–°å˜é‡ï¼‰\næ“ä½œç¬¦é‡è½½ï¼š+ï¼ˆéœ€è¦è¿”å›ä¸€ä¸ªå…¨æ–°å˜é‡ï¼‰\næ¨¡æ‹Ÿå®ç°stringä¸­çš„to_stringå‡½æ•°\n\nè¿™äº›åœºæ™¯å¤§å¤šæœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œé‚£å°±æ˜¯ä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„å˜é‡ï¼ˆå¯¹è±¡ï¼‰å…¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸå‡ºäº†å‡½æ•°ä½œç”¨åŸŸä¾¿ä¼šé”€æ¯ï¼ˆå°†äº¡å€¼ï¼‰\nå¦‚æœä½¿ç”¨å·¦å€¼å¼•ç”¨è¿”å›ï¼Œå°±ä¼šå‡ºç°è®¿é—®å·²ç»é”€æ¯äº†çš„å¯¹è±¡çš„é”™è¯¯ã€‚\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªvector&lt;vector&lt;int&gt;&gt;ï¼Œè‹¥å†…éƒ¨çš„vectorå¾ˆå¤§çš„æ—¶å€™ï¼Œæ‹·è´æ„é€ çš„ä»£ä»·æ˜¯å¾ˆå¤§çš„ï¼\n\n4.5.1 è¾“å‡ºå‹å‚æ•°å¦‚æœåœ¨C++98çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªèƒ½ç”¨è¾“å‡ºå‹å‚æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nvector&lt;vector&lt;int&gt;&gt;&amp; test(vector&lt;vector&lt;int&gt;&gt;&amp;v1,int val)&#123;    //â€¦â€¦    //v1å°±æ˜¯ä¸€ä¸ªè¾“å‡ºå‹å‚æ•°ã€‚æ”¾å…¥è¯¥å‡½æ•°è¿›è¡Œæ“ä½œååŸè·¯è¿”å›    return v1;&#125;\n\n4.5.2 å³å€¼å¼•ç”¨ ç§»åŠ¨æ„é€ åœ¨C++11ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³å€¼å¼•ç”¨çš„æ‹·è´æ„é€ æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nä¸‹æ–¹å°±æ˜¯ä¸€ä¸ªå…·ä½“ç¤ºä¾‹\nmuxue::string to_string(int val)&#123;    bool flag = true;    if (val &lt; 0)&#123;        flag = false;        val = 0 - val;    &#125;    muxue::string str;    while (val &gt; 0)&#123;        int x = val % 10;        val /= 10;        str += (&#x27;0&#x27; + x);    &#125;    if (flag == false)&#123;       str += &#x27;-&#x27;;    &#125;    std::reverse(str.begin(), str.end());    return str;&#125;\n\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³ä½¿ç”¨è¿™ä¸ªto_stringå‡½æ•°ï¼Œå°±éœ€è¦è¿›è¡Œæ·±æ‹·è´è¿›è¡Œä¼ å€¼è¿”å›ã€‚è¿™æ˜¯æ— å¯é¿å…çš„ä»£ä»·\nå¦‚æœä½¿ç”¨å·¦å€¼å¼•ç”¨è¿”å›ï¼Œè¿™é‡Œå°±ä¼šæœ‰bugã€‚å› ä¸ºå‡ºäº†å‡½æ•°ä½œç”¨åŸŸåï¼Œä¸´æ—¶å¯¹è±¡strä¼šè¢«é”€æ¯ã€‚è€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å·¦å€¼å¼•ç”¨å–åˆ«åï¼Œåœ¨è¿›è¡Œèµ‹å€¼çš„æ—¶å€™ï¼Œä¾¿ä¼šå‡ºç°åˆ©ç”¨strçš„åˆ«åè¿›è¡Œæ‹·è´æ„é€ ï¼Œè€Œstræ˜¯ä¸€ä¸ªå·²ç»é”€æ¯çš„å¯¹è±¡çš„é—®é¢˜\n\nè€Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å³å€¼å¼•ç”¨è¿”å›ï¼Œåˆ™ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ã€‚å‰ææ˜¯æˆ‘ä»¬è‡ªå·±å®ç°äº†å³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°å’Œèµ‹å€¼é‡è½½\n\nä¸€èˆ¬æˆ‘ä»¬æŠŠå³å€¼å¼•ç”¨çš„æ„é€ å‡½æ•°&#x2F;èµ‹å€¼é‡è½½ç§°ä½œç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\n\nä¸ºä»€ä¹ˆå«ç§»åŠ¨å‘¢ï¼Ÿå› ä¸ºå³å€¼å¼•ç”¨æ˜¯ä¼šç›´æ¥æ‹¿å–å¯¹è±¡çš„èµ„æº\nSTL_stringæˆ‘ä»¬å¯ä»¥å…ˆç”¨åº“é‡Œé¢çš„stringè§‚å¯Ÿä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨moveä¹‹åçš„å³å€¼è¿›è¡Œæ„é€ çš„æ—¶å€™ï¼Œä¼šç›´æ¥æ‹¿æ‰å¯¹è±¡çš„èµ„æºï¼\nstring s1 = &quot;1234134&quot;;string s2(s1);string s3(move(s1));\n\n\n\nè€Œåœ¨ä½¿ç”¨å³å€¼è¿›è¡Œè¿”å›çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œä¸€æ³¢ä¼˜åŒ–ï¼Œç›´æ¥ä½¿ç”¨ç§»åŠ¨æ„é€ æ‹¿å–èµ„æºï¼Œé¿å…å¤šæ¬¡æ‹·è´æ„é€ é€ æˆçš„ç©ºé—´å’Œæ—¶é—´æŸå¤±\nåœ¨å¤„ç†è¿™ç§é—®é¢˜çš„æ—¶å€™ï¼Œå°±æ¯”è¾“å‡ºå‹å‚æ•°å¥½å¤ªå¤šäº†ã€‚\n\nMY_stringä¸è¿‡åº“é‡Œé¢çš„stringæ¶‰åŠåˆ°äº†bufä¹‹ç±»çš„é«˜çº§æ“ä½œï¼Œä¹Ÿä¸é€‚åˆæˆ‘ä»¬è°ƒè¯•æŸ¥çœ‹è°ƒç”¨çš„å…·ä½“æƒ…å†µã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å†ä½¿ç”¨è‡ªå·±å†™çš„stringæ¥æ¼”ç¤ºä¸€ä¸‹\n\nè¿™é‡Œæˆ‘è¿˜å‘ç°äº†ä¹‹å‰æ¨¡æ‹Ÿå®ç°stringçš„ä¸€ä¸ªbugï¼Œåœ¨push_backæ“ä½œçš„æ—¶å€™ï¼Œæ²¡æœ‰ç»™æœ«å°¾åŠ ä¸Š\\0ï¼Œå¯¼è‡´ææ„çš„æ—¶å€™æŠ¥é”™äº†\n\næ¨¡æ‹Ÿå®ç°stringä»£ç è§æˆ‘çš„giteeä»“åº“ã€ä¼ é€é—¨ã€‘\n\n\nåœ¨æ¼”ç¤ºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦å®ç°è‡ªå·±çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\n//ç§»åŠ¨èµ‹å€¼string&amp; operator=(string&amp;&amp; s)&#123;    swap(s);    return *this;&#125;//ç§»åŠ¨æ‹·è´string(string&amp;&amp; s)    :_a(nullptr),    _size(0),    _capa(0)&#123;    swap(s);&#125;\n\nè¿™é‡Œæˆ‘ç›´æ¥å¤ç”¨äº†ä¹‹å‰å·²ç»å†™å¥½çš„ä¸€ä¸ªswapå‡½æ•°ï¼Œå®ç°äº†ä¸€ä¸ªâ€œç°ä»£å†™æ³•â€çš„æ„é€ ï¼Œç›´æ¥äº¤æ¢äº†äºŒè€…çš„èµ„æºã€‚é¿å…æ·±æ‹·è´å¸¦æ¥çš„å‰¯ä½œç”¨\n\næ¥ä¸‹æ¥ç”¨ä¸‹é¢çš„å‡ ä¸ªæ¥æµ‹è¯•ä¸€ä¸‹æ‹·è´æ„é€ çš„æ“ä½œ\nmuxue::string s1 = &quot;1234&quot;;muxue::string s2(s1);//æ‹·è´æ„é€ muxue::string s3 = muxue::to_string(5678);//ç§»åŠ¨æ„é€ muxue::string s4 = s1 + s3;//æ‹·è´æ„é€ +ç§»åŠ¨æ„é€ \n\né€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­æ·»åŠ æ‰“å°ï¼Œå¯ä»¥çœ‹å‡ºè¿™å‡ ä¸ªåˆ†åˆ«è°ƒç”¨äº†ä»€ä¹ˆæ„é€ å‡½æ•°\n\n\ns2è°ƒç”¨äº†æ·±æ‹·è´æ„é€ ï¼Œå› ä¸ºs1æ˜¯ä¸€ä¸ªå·¦å€¼\ns3è°ƒç”¨äº†ç§»åŠ¨æ„é€ ï¼Œå› ä¸ºto_stringå‡½æ•°ä¸­returnçš„æ˜¯ä¸€ä¸ªå°†äº¡å€¼\ns4å…ˆæ˜¯åœ¨è¿ç®—ç¬¦+é‡è½½ä¸­è°ƒç”¨æ·±æ‹·è´æ„å»ºäº†ä¸€ä¸ªstringçš„ä¸´æ—¶å¯¹è±¡ï¼Œåœ¨ä½¿ç”¨ç§»åŠ¨æ„é€ è¿›è¡Œreturn\n\nè¿ç®—ç¬¦+é‡è½½çš„ä»£ç å¦‚ä¸‹ï¼Œå’Œto_stringä¸€æ ·ï¼Œéƒ½æ˜¯returnäº†ä¸€ä¸ªå°†äº¡å€¼\n//ç›¸åŠ é‡è½½string operator+(const string&amp; s)&#123;    muxue::string tmp(*this);    tmp += s;    return tmp;&#125;\n\nå°†ä¸€ä¸ªå¯¹è±¡moveæˆä¸ºå³å€¼ä¹‹åï¼Œä¾¿å¯ä»¥ä½¿ç”¨ç§»åŠ¨èµ‹å€¼\n\nç§»åŠ¨æ„é€ ç›´æ¥ç§»åŠ¨èµ„æºè¿™æ—¶å€™å¦‚æœè°ƒç”¨æ‹·è´æ„é€ ï¼Œå°±å¾ˆæ˜¯æµªè´¹ï¼š\n\næœ¬æ¥tmpçš„èµ„æºå°±è¦é”€æ¯äº†ï¼Œä½ è¿˜å¾—å…ˆæŠŠä»–çš„èµ„æºå¤åˆ¶ä¸€ä»½ç»™è‡ªå·±ï¼Œå†é”€æ¯tmp\né‚£ä¸ºä½•ä¸æŠŠtmpçš„èµ„æºç›´æ¥æ‹¿ç»™è‡ªå·±å‘¢ï¼Ÿçœå»äº†å¤åˆ¶çš„æ¶ˆè€—ï¼\n\nè¿™ä¾¿æ˜¯ç§»åŠ¨æ„é€ çš„ä¼˜åŠ¿ä¹‹å¤„ï¼\nè°ƒè¯•ä½“ç°å‡ºæ¥çš„ï¼Œä¾¿æ˜¯æ·±æ‹·è´ä¸­ä¸¤ä¸ªå¯¹è±¡_açš„åœ°å€å®Œå…¨ä¸åŒ\n\nè€Œç§»åŠ¨æ„é€ æ˜¯ç›´æ¥æŠŠs1çš„_aèµ„æºæ‹¿äº†è¿‡æ¥ï¼\n\nå…¶æœ€æ˜æ˜¾çš„ç‰¹å¾ï¼Œä¾¿æ˜¯s3çš„_aåœ°å€å°±æ˜¯s1çš„ï¼\n\n\nSTLçš„æ›´æ–°å¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±æ¨¡æ‹Ÿå®ç°çš„ç§»åŠ¨æ„é€ åˆ é™¤ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„returnéƒ½ä¼šå»è°ƒç”¨æ·±æ‹·è´ï¼Œä»£ä»·å°±å¾ˆå¤§äº†ã€‚å¯¹è±¡å¾ˆå¤§çš„æ—¶å€™ï¼Œæ¥ä¸€æ¬¡æ·±æ‹·è´æœ‰å¯èƒ½å¯ä»¥æŠŠæ•´ä¸ªç³»ç»Ÿå¹²åºŸğŸ˜‚\n\næ‰€æœ‰STLçš„å®¹å™¨ï¼Œåœ¨C++11ä¹‹åï¼Œéƒ½æ”¯æŒäº†å³å€¼å¼•ç”¨çš„æ’å…¥ã€ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼\n\nC++11çš„swapä¹Ÿæä¾›äº†ä¸€ä¸ªç›´æ¥ä½¿ç”¨å³å€¼è¿›è¡Œèµ„æºæ›¿æ¢çš„ç‰ˆæœ¬ï¼Œæ•ˆç‡æ›´é«˜\n\n4.6 ç¼–è¯‘å™¨ä¼˜åŒ–åœ¨ä¹‹å‰æœ‰å…³æ„é€ å‡½æ•°çš„åšå®¢é‡Œé¢æœ‰æåˆ°è¿‡ï¼Œå½“æˆ‘ä»¬returnä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠŠä¸¤æ¬¡æ‹·è´æ„é€ ä¼˜åŒ–æˆä¸€æ¬¡\n\nå’Œæ‹·è´æ„é€ ä¸€æ ·ï¼Œæ‰§è¡Œç§»åŠ¨æ„é€ çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¹Ÿæœ‰ä¸€å®šçš„ä¼˜åŒ–\n\nä¸è¿‡è¿™ä¸ªä¼˜åŒ–å°±å–å†³äºç¼–è¯‘å™¨çš„å¤„ç†äº†ã€‚ä¸æ’é™¤æœ‰äº›ç¼–è¯‘å™¨æ²¡æœ‰åšæ­¤ç­‰å¤„ç†å“¦ï¼\n4.7 ä¼˜åŒ–æ’å…¥æ•ˆç‡æœ‰äº†å³å€¼å¼•ç”¨ï¼Œåªè¦æˆ‘ä»¬å®ç°ä¸€ä¸ªå³å€¼å¼•ç”¨æ–¹å¼çš„æ’å…¥ï¼Œä¹Ÿå¯ä»¥ä¼˜åŒ–æ’å…¥æ—¶çš„æ•ˆç‡\nmuxue::list&lt;muxue::string&gt; t;muxue::string s1(&quot;111&quot;);//è°ƒç”¨æ‹·è´æ„é€ ï¼Œå·¦å€¼t.push_back(s1);//è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œå³å€¼t.push_back(&quot;222&quot;);t.push_back(std::move(s1));\n\n5.å®Œç¾è½¬å‘(ä¸‡èƒ½å¼•ç”¨)c++11æä¾›äº†ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨ï¼Œæ—¢å¯ä»¥å¼•ç”¨å·¦å€¼ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨å³å€¼\nvoid Fun(int&amp; x) &#123;     cout &lt;&lt; &quot;å·¦å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(const int&amp; x) &#123;     cout &lt;&lt; &quot;const å·¦å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(int&amp;&amp; x) &#123;     cout &lt;&lt; &quot;å³å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;void Fun(const int&amp;&amp; x) &#123;     cout &lt;&lt; &quot;const å³å€¼å¼•ç”¨&quot; &lt;&lt; endl; &#125;template&lt;typename T&gt;void test(T&amp;&amp; t)&#123;//T&amp;&amp;å°±æ˜¯ä¸€ä¸ªä¸‡èƒ½å¼•ç”¨\tFun(t);&#125;\n\né€šè¿‡æµ‹è¯•æˆ‘ä»¬ä¼šå‘ç°ï¼Œä¸ç®¡æ˜¯ä¼ å…¥ä¸€ä¸ªå·¦å€¼è¿˜æ˜¯ä¼ å…¥ä¸€ä¸ªå³å€¼ï¼Œå…¶éƒ½ä¼šè°ƒç”¨å·¦å€¼å¼•ç”¨\n\nè¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨ä¹‹åï¼Œå½¢å‚tå°±æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œæ‰€ä»¥è°ƒç”¨äº†å·¦å€¼çš„å‡½æ•°\n\næˆ‘ä»¬ä¹Ÿä¸èƒ½ç²—æš´çš„ä½¿ç”¨moveæ¥è§£å†³è¿™é‡Œçš„é—®é¢˜ï¼Œå› ä¸ºæœ‰æ—¶å€™ä¸€äº›å·¦å€¼å¯¹è±¡åœ¨åç»­è¿˜æ˜¯éœ€è¦ä½¿ç”¨çš„ï¼Œmoveä¹‹åå˜æˆå³å€¼ï¼Œèµ„æºè¢«æ‹¿èµ°äº†å’‹åŠï¼\n&gt;template&lt;typename T&gt;&gt;void PerfectForward(T&amp;&amp; t)&gt;&#123;   Fun(std::move(t));&gt;&#125;\n\n\n\nè€Œå®Œç¾è½¬å‘çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†å°†å³å€¼ä¿æŒå…¶å³å€¼å±æ€§ï¼Œä¾æ—§è°ƒç”¨å³å€¼å¯¹åº”çš„å‡½æ•°ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼Œä½¿ç”¨forwardå‡½æ•°è¿›è¡Œå®Œç¾è½¬å‘\ntemplate&lt;typename T&gt;void PerfectForward(T&amp;&amp; t)&#123;    Fun(std::forward&lt;T&gt;(t));&#125;\n\nè¿™æ—¶å€™ç¬¬äºŒç§æƒ…å†µå°±æ­£ç¡®æ‰ç”¨äº†å¯¹åº”çš„å³å€¼å¼•ç”¨å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰æ”¹å˜å·¦å€¼çš„å±æ€§\n\nå†æŠŠå‡½æ•°æ”¹æˆæˆ‘ä»¬è‡ªå·±å†™çš„stringï¼Œä¹Ÿèƒ½çœ‹å‡ºå®Œç¾è½¬å‘çš„ä½œç”¨\ntemplate&lt;typename T&gt;void PerfectForward(T&amp;&amp; t)&#123;\tmuxue::string s = std::forward&lt;T&gt;(t);&#125;\n\n\n\n5.1 ä½¿ç”¨åœºæ™¯æœ‰äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸€ä¸ªå‡½æ•°ä¼ å…¥ä¸åŒç±»å‹çš„å‚æ•°ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ä¸‡èƒ½å¼•ç”¨+å®Œç¾è½¬å‘æ¥è¿›è¡Œä¸åŒçš„å¤„ç†\næ¯”è¾ƒå…¸å‹çš„ä¾¿æ˜¯å¾ˆå¤šSTLå®¹å™¨éƒ½æä¾›äº†ä¸€ä¸ªæ–°çš„å°¾æ’å‡½æ•°emplace_back\n\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nè¿™é‡Œä¾¿ä½¿ç”¨äº†ä¸‡èƒ½å¼•ç”¨ï¼Œä»¥åŠå¯å˜æ¨¡æ¿å‚æ•°ï¼ˆåé¢ä¼šå†™é“ï¼‰\nåˆ©ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„stringè¿›è¡Œæ‰“å°ï¼Œå³å¯çœ‹å‡ºäºŒè€…çš„åŒºåˆ«\n\n\nemplace_backç›´æ¥è°ƒç”¨äº†æ„é€ å‡½æ•°\npush_back æ„é€ +ç§»åŠ¨æ„é€ \n\nå› ä¸ºç§»åŠ¨æ„é€ çš„æ•ˆç‡æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æ–¹å¼çš„å·®è·å¹¶ä¸ç®—å¾ˆå¤§ã€‚ä¸è¿‡å·®è·è‚¯å®šæ˜¯æœ‰çš„ï¼Œå¦‚æœä¸ºäº†å…¼å®¹æ€§ï¼Œä½¿ç”¨push_backè‚¯å®šæ›´å¥½ï¼Œå› ä¸ºemplaceæ˜¯C++11æ–°å¢çš„æ“ä½œ\n\n5.2 å°†å¯å˜æ¨¡æ¿å‚æ•°è½¬ä¸ºCè¯­è¨€çš„å¯å˜å‚æ•°åˆ—è¡¨\nhttps://segmentfault.com/q/1010000043736187\n\nåœ¨æˆ‘å°è¯•å®ç°ä¸€ä¸ªç®€å•çš„æ—¥å¿—ç±»çš„æ—¶å€™ï¼Œé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚æœ€ç»ˆæˆåŠŸè§£å†³\næˆ‘æƒ³é€šè¿‡debug,info,warningè¿™äº›å‡½æ•°æ¥æ‰“å°å¯¹åº”ç­‰çº§çš„æ—¥å¿—ï¼Œå®ƒä»¬æœ€ç»ˆè°ƒç”¨çš„éƒ½æ˜¯_loggingå‡½æ•°ï¼Œå¹¶åœ¨_loggingå‡½æ•°ä¸­ç»Ÿä¸€è¿›è¡Œvsnprintfï¼Œæˆ‘è¦æ€ä¹ˆæ‰èƒ½æŠŠå¯å˜å‚æ•°åˆ—è¡¨ä¼ è¿‡å»ï¼Ÿè¿˜æ˜¯è¯´ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œï¼Ÿ\npublic:void debug(const char *def_name, const char *format, ...)void info(const char *def_name, const char *format, ...)private:void _logging(int level, const char *def_name,  const char *format, ...)\n\n\nå¦‚æœä¸è¿™ä¹ˆåšï¼Œå°±å¾—æŠŠä½¿ç”¨vsnprintfçš„å‡ è¡Œä»£ç é‡å¤å†™åˆ°æ¯ä¸€ä¸ªç‹¬ç«‹å‡½æ•°ä¸­ï¼Œæœ‰ç‚¹ä»£ç é‡å¤\nva_list ap;va_start(ap, format);vsnprintf((char *)_log_info.c_str(), _log_size - 1, format, ap);va_end(ap);\n\nç›®å‰ç™¾åº¦åˆ°å¦‚ä¸‹åŠæ³•ï¼Œæ— ä½œç”¨\nvoid warning(const char *def_name, const char *format, ...)&#123;    // è·å–å¯å˜å‚æ•°åˆ—è¡¨    va_list ap;    va_start(ap, format);    _logging(LOG_WARINING, def_name, format,ap);    va_end(ap);&#125;\nç›´æ¥è°ƒç”¨loggingå‡½æ•°çš„èƒ½æ­£å¸¸æ‰“å°ï¼Œè°ƒç”¨warningå‡½æ•°æ— æ³•æ­£å¸¸æ‰“å°ã€‚å¦‚ä¸‹ï¼Œç¬¬ä¸€è¡Œæ˜¯ç›´æ¥è°ƒç”¨warningçš„ï¼Œæ²¡æœ‰æ‰“å°å‡ºæ¶ˆæ¯å†…å®¹\n[23-04-27 19:59:35] WARN | 1682596775 | test | [23-04-27 19:59:35] WARN | 1682596775 | test | è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è€Œå·²\n\n\nå¤§ä½¬å›ç­”ä¸­ï¼Œæåˆ°äº†å¯ä»¥ç”¨å¯å˜æ¨¡æ¿å‚æ•°+å®Œç¾è½¬å‘ï¼Œç›´æ¥å°†å¯å˜å‚æ•°åˆ—è¡¨ä¼ è¿‡å»å°±è¡Œäº†\n// c++ ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ variadic templatesï¼Œé™¤éä½ è¦å’Œ c åº“å…¼å®¹template &lt;typename... Args&gt;void warning(const char *def_name, const char *format, Args &amp;&amp;...args) &#123;    _logging(LOG_WARINING, def_name, format, std::forward&lt;Args&gt;(args)...);&#125;\n\næ„Ÿè°¢å¤§ä½¬çš„å›ç­”ï¼Œåœ¨è¿™é‡Œè´´ä¸Šå®Œæ•´å¯ç”¨çš„ä»£ç ã€ä¹Ÿå¯ä»¥å»æˆ‘çš„githubçœ‹ã€‘\npublic:    template &lt;typename... Args&gt;    void error(const char *def_name, const char *format, Args &amp;&amp;...args) &#123;        _logging(LOG_ERROR, def_name, format, std::forward&lt;Args&gt;(args)...);    &#125;\t//å…¶ä»–çš„éƒ½æ˜¯å¯¹è¿™é¡¹çš„copyï¼Œåªä¿®æ”¹ä¼ å…¥çš„log levelprivate:\tvoid _logging(size_t level, const char *def_name, const char *format, ...)    &#123;        assert(level &gt;= LOG_DEBUG &amp;&amp; level &lt;= LOG_FATAL);        if (level &lt; _level)        &#123; // ä½äºå®šä¹‰çš„ç­‰çº§ï¼Œä¸æ‰“å°            return;        &#125;        va_list ap;        va_start(ap, format);        vsnprintf((char *)_log_info.c_str(), _log_size - 1, format, ap);        va_end(ap);        // æ ¹æ®æ—¥å¿—ç­‰çº§é€‰æ‹©æ‰“å°åˆ°stderr/stdout        // è¶…è¿‡äº†errorçš„æ—¥å¿—ï¼Œè¦ä½¿ç”¨stderræ‰“å°        FILE *out = (level &gt;= LOG_ERROR) ? stderr : stdout;        def_name = def_name == nullptr ? &quot;unknow&quot; : def_name; // åˆ¤æ–­defnameæ˜¯å¦ä¸ºç©º        // æ ¼å¼åŒ–æ‰“å°åˆ°æ–‡ä»¶æµä¸­        fprintf(out, &quot;%s | %s | %s\\n&quot;,                    log_level[level],                    def_name,                    _log_info.c_str());    &#125;\n\næµ‹è¯•\nvoid LogTest()&#123;    vod::Logger _log;    _log.info(&quot;test&quot;,&quot;%s&quot;,&quot;this in info&quot;);    _log.warning(&quot;test&quot;,&quot;%s %d&quot;,&quot;this is warning&quot;,333);    _log.error(&quot;test&quot;,&quot;%s&quot;,&quot;this is err&quot;);    _log.fatal(&quot;test&quot;,&quot;%s&quot;,&quot;this is fatal!!!&quot;);&#125;\n\nINFO | test | this in infoWARINING | test | this is warning 333ERROR | test | this is errFATAL | test | this is fatal!!!\n\n6.æ–°å¢çš„é»˜è®¤æˆå‘˜å‡½æ•°åœ¨åˆè¯†ç±»å’Œå¯¹è±¡çš„æ—¶å€™ï¼Œæˆ‘ä¾¿åœ¨åšå®¢ä¸­æåˆ°äº†C++çš„å‡ ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\næ„é€ å‡½æ•° \nææ„å‡½æ•° \næ‹·è´æ„é€ å‡½æ•° \næ‹·è´èµ‹å€¼é‡è½½ \nå–åœ°å€é‡è½½ \nconst å–åœ°å€é‡è½½\n\nåœ¨C++11ä¸­ä¹Ÿå¤šäº†ä¸¤ä¸ªæˆå‘˜å‡½æ•°ï¼Œé‚£ä¾¿æ˜¯å‰æ–‡æ‰€è®²è¿°çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼\nä½†æ˜¯æƒ³è®©ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆç§»åŠ¨æ„é€ å¯æ²¡é‚£ä¹ˆå®¹æ˜“ï¼šåªæœ‰ä½ æ²¡æœ‰è‡ªå·±å®ç°ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œä¸”æ²¡æœ‰å®ç°ææ„å‡½æ•° ã€æ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼é‡è½½ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œç¼–è¯‘å™¨æ‰ä¼šå¸®ä½ æ•´ä¸€ä¸ªç§»åŠ¨æ„é€ å‡ºæ¥\n\nç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„ç§»åŠ¨æ„é€ ï¼šå¯¹äºå†…ç½®ç±»å‹ä¼šæ‰§è¡Œé€æˆå‘˜æŒ‰å­—èŠ‚æ‹·è´ï¼›å¯¹è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼Œåˆ™éœ€è¦çœ‹è¿™ä¸ªæˆå‘˜æ˜¯å¦å®ç°ç§»åŠ¨æ„é€ ï¼Œ å¦‚æœå®ç°äº†å°±è°ƒç”¨ç§»åŠ¨æ„é€ ï¼Œæ²¡æœ‰å®ç°å°±è°ƒç”¨æ‹·è´æ„é€ ã€‚\n\nåŒæ ·çš„ï¼Œç§»åŠ¨èµ‹å€¼ä¹Ÿéœ€è¦æ»¡è¶³ä¸Šé¢çš„æ¡ä»¶ï¼Œç¼–è¯‘å™¨æ‰ä¼šå¸®ä½ ç”Ÿæˆã€‚\nclass TestB&#123;private:\tmuxue::string _s;\tint _a;public:\tTestB(const muxue::string&amp; s=&quot;&quot;, int a=0)\t\t:_s(s),\t\t_a(a)\t&#123;&#125;&#125;;void DefaultMoveCopy()&#123;\tTestB t1;\tcout &lt;&lt; endl;\tTestB t2 = t1;\tcout &lt;&lt; endl;\tTestB t3 = std::move(t1);\tcout &lt;&lt; endl;\tTestB t4;\tt4 = std::move(t2);\tcout &lt;&lt; endl;&#125;\n\né€šè¿‡æµ‹è¯•å¯ä»¥çœ‹å‡ºæ¥ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆäº†ç§»åŠ¨æ‹·è´å’Œç§»åŠ¨èµ‹å€¼é‡è½½ã€‚å¹¶è°ƒç”¨äº†è‡ªå®šä¹‰ç±»å‹çš„ç§»åŠ¨æ‹·è´/ç§»åŠ¨èµ‹å€¼\n\n6.1 å…³é”®å­—default\nè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨ä¹‹å‰å¥½åƒè®°å½•è¿‡? ä¸è®°å¾—äº†\n\ndefaultå…³é”®å­—çš„ä½œç”¨æ˜¯è®©ç¼–è¯‘å™¨å¼ºåˆ¶ç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„æˆå‘˜å‡½æ•°\nè¿˜æ˜¯ä¸Šé¢çš„TestBç±»çš„ä»£ç ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ ï¼Œç¼–è¯‘å™¨å°±ä¸å†ä¼šç”Ÿæˆé»˜è®¤çš„ç§»åŠ¨æ„é€ /ç§»åŠ¨èµ‹å€¼ï¼Œè€Œæ˜¯ä¼šå»è°ƒç”¨stringé‡Œé¢çš„æ‹·è´æ„é€ ã€æ‹·è´èµ‹å€¼\n\nè¿™æ—¶å€™æˆ‘ä»¬å¤ªæ‡’äº†ï¼Œä¸æƒ³è‡ªå·±å†™ç§»åŠ¨ç‰ˆæœ¬äº†ï¼Œäºæ˜¯å°±ç”¨defaultå¼ºåˆ¶è®©ç¼–è¯‘å™¨å¹²æ´»\n\nç°åœ¨å°±æ­£ç¡®è°ƒç”¨äº†å¯¹åº”çš„ç§»åŠ¨æ„é€ å’Œç§»åŠ¨èµ‹å€¼äº†ï¼\n\n7.å¯å˜æ¨¡æ¿å‚æ•°åœ¨5.1æåˆ°çš„emplace_backå‡½æ•°ä¸­ï¼Œä¾¿å‡ºç°äº†ä¸‹é¢è¿™ç§è¯­æ³•\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nè¿™å°±æ˜¯ä¸€ä¸ªå¯å˜çš„æ¨¡æ¿å‚æ•°ï¼Œå…è®¸ä¸€ä¸ªå‡½æ•°æœ‰å¤šä¸ªå‚æ•°ï¼Œä¸”ä¸è¦æ±‚æ˜¯ç›¸åŒç±»å‹\nä½¿ç”¨sizeofå³å¯æŸ¥çœ‹å‚æ•°çš„ä¸ªæ•°\n\n7.1 é€’å½’è§£å‚æ•°åŒ…è€Œå¦‚æœä½ æƒ³æŸ¥çœ‹å‚æ•°çš„ç±»å‹å¹¶ä½¿ç”¨å®ƒï¼Œåˆ™éœ€è¦è¿›è¡Œé€’å½’å–å‡ºå‚æ•°æ¥\ntemplate &lt;class T&gt;void ShowArgs(const T&amp; val)&#123;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;&#125;template &lt;class T,class... Args&gt;void ShowArgs(const T&amp;val,Args&amp;&amp;... args)&#123;\t//cout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;\tShowArgs(args...);&#125;void TestArgs()&#123;\tShowArgs(1, &#x27;x&#x27;, 2.3, muxue::string(&quot;123&quot;));&#125;\n\n\nå…¶ä¸­void ShowArgs(const T&amp; val)å‡½æ•°çš„ä½œç”¨ï¼Œæ˜¯å½“å‚æ•°åŒ…ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè°ƒç”¨å¯¹åº”çš„å•å‚å‡½æ•°ï¼Œè€Œä¸ä¼šæŠ¥é”™\nå¦å¤–ä¸€ç§åŠæ³•ä¾¿æ˜¯æä¾›ä¸€ä¸ªæ— å‚çš„åŒåå‡½æ•°ï¼Œç”¨ä½œå‚æ•°åŒ…é€’å½’çš„ç»“å°¾\n\né”™è¯¯è§£æ³•å¯èƒ½æœ‰äººæƒ³ä½¿ç”¨è¿™æ ·çš„æ–¹æ³•æ¥è§£åŒ…ï¼Œå½“å‚æ•°åŒ…é‡Œçš„å‡½æ•°åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œç»“æŸé€’å½’\n\nä½†æ˜¯è¿™æ ·æ˜¯ä¸è¡Œçš„ï¼\n\né€’å½’æ¨å‚æ•°åŒ…æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶é€»è¾‘\né€šè¿‡sizeofåˆ¤æ–­æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶é€»è¾‘\n\nåœ¨ç¼–è¯‘è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå·²ç»å¼€å§‹æ‰¾å¯¹åº”çš„å‡½æ•°è¿›è¡Œè°ƒç”¨äº†ã€‚å½“å‚æ•°åŒ…é‡Œé¢çš„å‚æ•°åªæœ‰1ä¸ªæˆ–è€…0ä¸ªçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ç¼–è¯‘çš„æ—¶å€™å‘ç°æ‰¾ä¸åˆ°å¯¹åº”å‡½æ•°ï¼Œå°±ç›´æ¥æŠ¥é”™äº†ã€‚\n7.2 æ•°ç»„è§£åŒ…é™¤äº†ä¸Šé¢çš„é€’å½’è§£åŒ…ï¼Œè¿™é‡Œè¿˜å¯ä»¥ä½¿ç”¨æ•°ç»„çš„æ–¹å¼ç›´æ¥æ¥è§£åŒ…\ntemplate &lt;class... Args&gt;void ShowArgs(Args&amp;&amp;... args)&#123;\tcout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\tint arr[] = &#123; args... &#125;;&#125;void TestArgs()&#123;\tShowArgs(1, 2, 3, 4);&#125;\n\nå¯ä»¥çœ‹åˆ°arræ•°ç»„é‡Œé¢è§£åŒ…å‡ºäº†ä¼ å…¥çš„å‚æ•°\n\nä½†æ˜¯è¿™ç§æ–¹æ³•ä¸é€šç”¨ï¼Œåªé€‚ç”¨äºæ‰€æœ‰å‚æ•°éƒ½æ˜¯ç›¸åŒç±»å‹çš„æƒ…å†µï¼Œå¦‚æœæ˜¯ä¸åŒç±»å‹åˆ™ä¼šæŠ¥é”™\n\né€šç”¨åŠæ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªé€—å·è¡¨è¾¾å¼ï¼Œæ¥è·å–ä¸€å…±æœ‰å¤šå°‘ä¸ªå‚æ•°ä»¥åŠè§£åŒ…\ntemplate &lt;class T&gt;void PrintArgs(const T&amp; val)&#123;\tcout &lt;&lt; val &lt;&lt; &quot;   type: &quot; &lt;&lt; typeid(val).name() &lt;&lt; endl;&#125;template &lt;class... Args&gt;void ShowArgs(Args&amp;&amp;... args)&#123;\tcout &lt;&lt; &quot;å‚æ•°ä¸ªæ•°&quot; &lt;&lt; sizeof...(args) &lt;&lt; endl;\t//int arr[] = &#123; args... &#125;;\tint arr[] = &#123; (PrintArgs(args),0)... &#125;;&#125;\n\nä¸€å…±æœ‰å¤šå°‘ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæ•°ç»„é‡Œé¢å°±ä¼šæœ‰å¤šå°‘ä¸ª0\n\n7.3 emplace_backstdå®¹å™¨çš„åº“å‡½æ•°ä¸­emplace_backçš„å‚æ•°åŒ…è¿˜ä½¿ç”¨äº†ä¸‡èƒ½å¼•ç”¨ï¼Œè¿™å°±è®©å®ƒçš„ä½¿ç”¨æ›´åŠ çµæ´»\ntemplate &lt;class... Args&gt;  void emplace_back (Args&amp;&amp;... args);\n\nå¯ä»¥ç›´æ¥ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä»–ä¼šè‡ªåŠ¨è§£åŒ…å‚æ•°ï¼Œåˆ›å»ºä¸€ä¸ªé”®å€¼å¯¹\nstd::list&lt;std::pair&lt;int, muxue::string&gt;&gt; t;t.emplace_back(10, &quot;sort&quot;);\n\nè€Œpush_backåˆ™ä¸æ”¯æŒè¿™ä¹ˆå¹²\n\n\n8.lambdaè¡¨è¾¾å¼åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨sortçš„æ—¶å€™ï¼Œå¦‚æœæ˜¯å†…ç½®ç±»å‹ï¼Œé»˜è®¤ä¼šè¿”å›ä¸€ä¸ªå‡åºåºåˆ—ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è¿”å›é™åºï¼Œåˆ™éœ€è¦æ”¹å˜æ¯”è¾ƒè§„åˆ™ï¼Œä¼ å…¥ä¸€ä¸ªä»¿å‡½æ•°æ¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ¯”è¾ƒå¯¹æ¯”\n#include &lt;algorithm&gt;//sort#include &lt;functional&gt;//greaterint main()&#123;\tint arr[]=&#123;1,3,2,5,4&#125;;    int sz=sizeof(arr)/sizeof(arr[0]);    //é»˜è®¤å‡åº\tstd::sort(arr,arr+sz);    //é™åºä¼ å…¥ä»¿å‡½æ•°greater    std::sort(arr,arr+sz,greater&lt;int&gt;());&#125;\n\nå› ä¸ºintæ˜¯å†…ç½®ç±»å‹ï¼Œåº“ä¸­è‡ªå¸¦çš„greater/lessä»¿å‡½æ•°å³å¯æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚è€Œå¦‚æœæˆ‘ä»¬æ’åºçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªå¯¹åº”çš„ä»¿å‡½æ•°\n//ä»·æ ¼é™åºstruct CompPriceGreater&#123;\tbool operator()(const Goods&amp; g1, const Goods&amp; g2)\t&#123;\t\treturn g1._price &gt; g2._price;\t&#125;&#125;;//ä»·æ ¼å‡åºstruct CompPriceLess &#123;\tbool operator()(const Goods&amp; g1, const Goods&amp; g2)\t&#123;\t\treturn g1._price &lt; g2._price;\t&#125;&#125;;\n\n\n8.1 æƒ…æ™¯æè¿°ä½†æ˜¯å¦‚æœéœ€è¦å¤„ç†çš„å¯¹è±¡æœ‰å¾ˆå¤šä¸åŒçš„æˆå‘˜å˜é‡çš„æ—¶å€™ï¼ˆæ¯”å¦‚äº¬ä¸œæ·˜å®ä¸Šå•†å“ä¸åŒçš„ç­›é€‰æ–¹å¼ï¼‰æˆ‘ä»¬å°±éœ€è¦å®ç°éå¸¸éå¸¸å¤šçš„ä»¿å‡½æ•°\nè¿™æ ·ä¸€æ¥ï¼Œç¨‹åºçš„ä»£ç è¡Œæ•°å°±ä¼šå˜å¤š\nåœ¨VSç¼–è¯‘å™¨ä¸‹ï¼Œè¿™ç§é—®é¢˜è¿˜ç®—å¥½è§£å†³ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè·³è½¬é“å‡½æ•°å®šä¹‰ã€‚ä½†å¦‚æœæˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½å¯ç”¨ï¼Œåœ¨å¤„ç†å¤§æ–‡æœ¬ä»£ç çš„æ—¶å€™ï¼Œæ€ä¹ˆå¾ˆå¿«çš„æ‰¾åˆ°å¯¹åº”çš„ä»¿å‡½æ•°å‘¢ï¼Ÿ\nç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®åˆä½œçš„æ—¶å€™ï¼Œä¸‡ä¸€æœ‰ä¸ªå®¶ä¼™ç¼–ç¨‹å‘½åè§„èŒƒå¾ˆå·®åŠ²ï¼Œæˆ‘ä»¬æ— æ³•ä»å‡½æ•°åæ¨æ–­å‡½æ•°åŠŸèƒ½ï¼Œå†åŠ ä¸Šä¸èƒ½ç›´æ¥è·³è½¬å®šä¹‰ï¼Œé‚£éº»çƒ¦äº‹å¯å¤šäº†ã€‚\n\n8.2 lambdaå‡ºåœºè¿™æ—¶å€™å°±å¯ä»¥è¯•è¯•ç”¨lambdaè¡¨è¾¾å¼æ‹‰ï¼Œä»¥ä¸‹æ˜¯lambdaè¡¨è¾¾å¼çš„ä¹¦å†™æ ¼å¼\n[capture-list](parameters)mutable -&gt; return-type&#123;statement&#125;\n\nè¯´æ˜ä¸€ä¸‹å„ä¸ªä½ç½®åˆ†åˆ«å†™çš„æ˜¯å•¥ç©æ„\n\n[capture-list]æ•æ‰åˆ—è¡¨ï¼Œç”¨äºç¼–è¯‘å™¨åˆ¤æ–­ä¸ºlambdaè¡¨è¾¾å¼ï¼ŒåŒæ—¶æ•æ‰è¯¥è¡¨è¾¾å¼æ‰€åœ¨åŸŸçš„å˜é‡ä»¥ä¾›å‡½æ•°ä½¿ç”¨\n(parameters)å‚æ•°ï¼Œå’Œå‡½æ•°çš„å‚æ•°ä¸€è‡´ã€‚å¦‚æœä¸éœ€è¦ä¼ å‚åˆ™å¯è¿å¸¦()ä¸€èµ·çœç•¥\nmutableé»˜è®¤æƒ…å†µä¸‹æ•æ‰åˆ—è¡¨æ•æ‰çš„å‚æ•°æ˜¯constä¿®é¥°çš„ï¼Œè¯¥å…³é”®å­—çš„ä½œç”¨æ˜¯å–æ¶ˆconstä½¿å…¶å¯ä¿®æ”¹\n-&gt; return-typeå‡½æ•°è¿”å›å€¼ç±»å‹\n&#123;statement&#125;å‡½æ•°ä½“ï¼Œå’Œæ™®é€šå‡½æ•°ä¸€æ ·ã€‚é™¤äº†å¯ä»¥ä½¿ç”¨ä¼ å…¥çš„å‚æ•°ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ•æ‰åˆ—è¡¨è·å–çš„å‚æ•°\n\n8.3 åŸºæœ¬ä½¿ç”¨å…ˆæ¥å†™ä¸€ä¸ªæœ€ç®€å•çš„lambdaè¡¨è¾¾å¼è¯•è¯•æ°´å§\nauto Add = [](int a, int b) &#123;return a + b; &#125;;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„ä½¿ç”¨æ–¹æ³•å’Œå‡½æ•°å®Œå…¨ä¸€è‡´ï¼Œä¹ŸæˆåŠŸæä¾›äº†ç»“æœ\nå› ä¸ºæˆ‘ä»¬è¿”å›å€¼çš„ç±»å‹æ˜¯æ˜ç¡®çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥çœç•¥ç±»å‹ï¼Œè®©ç¼–è¯‘å™¨è‡ªå·±æ¥æ¨æ–­ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ˜¾ç¤ºæŒ‡å®šç±»å‹ï¼Œè¿™æ ·å¯ä»¥æ›´ç²¾ç¡®çš„æ§åˆ¶\n\n\nlambdaè¡¨è¾¾å¼è¿˜æ”¯æŒå¤åˆ¶ç»™ç›¸åŒç±»å‹çš„å‡½æ•°æŒ‡é’ˆï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½ä¸è¦è¿™ä¹ˆç”¨ï¼\n//f2æ˜¯ä¸€ä¸ªlambdavoid(*PF)();PF = f2;PF();\n\n\n8.4 æ•æ‰åˆ—è¡¨å’Œmutableå­¦ä¼šäº†åŸºæœ¬ä½¿ç”¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹æ•æ‰åˆ—è¡¨æ˜¯æ€ä¹ˆç©çš„\nvoid TestLambda1()&#123;\tint a = 10, b = 20;\tauto func3 = [a,b](int x, int y)-&gt;int &#123;\t\treturn a+b;\t&#125;;\tcout&lt;&lt;func3(a, b)&lt;&lt;endl;&#125;\n\n\nè¿™é‡Œæˆ‘ä»¬æ•æ‰äº†å‡½æ•°ä½œç”¨åŸŸé‡Œé¢çš„å±€éƒ¨å˜é‡a/bï¼Œç›´æ¥åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨ä½¿ç”¨ğŸ‘\nå› ä¸ºä¸éœ€è¦ä¼ å…¥å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‚æ•°()å’Œè¿”å›å€¼ä¸€å¹¶çœç•¥æ‰\n\nmutableé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ•æ‰åˆ°çš„å‚æ•°æ˜¯å¸¦constçš„ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚\n\nè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨å‰é¢æåˆ°çš„mutableå…³é”®å­—æ¥ä¿®é¥°\n\næ³¨æ„ï¼šè¿™ä¸ªå…³é”®å­—ä½¿ç”¨çš„æ—¶å€™å¿…é¡»å¸¦ä¸Šå‡½æ•°å‚æ•°çš„()\n\nauto func5 = [a, b]()mutable &#123;    a++;    b++;    return a + b;&#125;;\n\n\n\n8.5 æ•è·çš„å‡ ç§æ–¹å¼æ³¨æ„ï¼Œå½“æˆ‘ä»¬åœ¨å¯¹è±¡é‡Œé¢ä»¥å€¼ä¼ é€’æ–¹å¼æ•è·å‚æ•°çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æ•è·thisæŒ‡é’ˆæ¥è°ƒç”¨ç±»å†…éƒ¨çš„å‡½æ•°\n[val]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å˜é‡val[=]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[&amp;val]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰å˜é‡val[&amp;]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[this]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å½“å‰çš„thisæŒ‡é’ˆ\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ¼”å¼çš„[a,b]è¿™æ ·æœ€ç›´æ¥çš„å€¼æ•è·\nè€Œæœ€åä¸€ä¸ªçš„thisæŒ‡é’ˆä¸»è¦ç”¨ç”¨äºç±»å†…éƒ¨ï¼›éœ€è¦æ³¨æ„ï¼ŒthisæŒ‡é’ˆæ˜¯ä¸èƒ½è¢«å¼•ç”¨æ•è·çš„ï¼å› ä¸ºå‡½æ•°é‡Œé¢çš„thisæŒ‡é’ˆæœ¬æ¥ä¹Ÿåªæ˜¯ä¸ªä¼ å€¼å‚æ•°è€Œå·²ï¼Œå¯¹äºè¿™ä¸ªæŒ‡é’ˆæœ¬èº«æ¥è¯´ï¼Œå¼•ç”¨æ•è·çš„æ„ä¹‰å…¶å®å¹¶ä¸æ˜¯å¾ˆå¤§ã€‚\nclang++ test.cpp -o test -std=c++17test.cpp:84:18: error: &#x27;this&#x27; cannot be captured by reference        return [&amp;this]                 ^1 error generated.\n\nåœ¨C++17ä¸­æ–°å¢äº†ä¸€ä¸ªå¯¹*thisçš„ä¼ å€¼æ•è·ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å»çœ‹C++17çš„åšå®¢ã€‚\n8.5.1 å…¨æ•è·&#x3D;å½“ä¸€ä¸ªä½œç”¨åŸŸé‡Œé¢çš„å˜é‡å¾ˆå¤šï¼Œè€Œæˆ‘ä»¬åˆä¸æƒ³ä¸€ä¸ªä¸€ä¸ªå†™çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨=æ•æ‰å…¨éƒ¨å˜é‡\nint a = 10, b = 20;int c = 1, d = 3, e = 5;auto func6 = [=] &#123;    return (a + b + c + d + e);&#125;;cout &lt;&lt; func6() &lt;&lt; endl;\n\n\n8.5.2 å¼•ç”¨å…¨æ•æˆ–é™¤äº†åŸºæœ¬çš„å…¨æ•æˆ–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ä¸€ä¸ª&amp;ä»¥å¼•ç”¨çš„æ–¹å¼æ•è·å…¨éƒ¨å‚æ•°ã€‚\n\nint a = 10, b = 20;int c = 1, d = 3, e = 5;auto func7 = [&amp;] &#123;    return (a + b + c + d + e);&#125;;cout &lt;&lt; func7() &lt;&lt; endl;\n\nå¼•ç”¨äº†è¿‡åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹å‚æ•°äº†\n\n8.5.3 å…¨æ•è·+å•ç‹¬æ“ä½œå¦‚æœåªæ˜¯ä»…ä»…çš„å…¨æ•æˆ–è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æƒ³å•ç‹¬ä¿®æ”¹æŸä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼è¿›è¡Œæ•è·æ“ä½œ\n\nauto func8 = [=,&amp;e] &#123;\te++;\treturn (a + b + c + d + e);&#125;;\n\n\nè¿™æ ·ä¸€æ¥å°±æ–¹ä¾¿å¤šäº†\n8.6 æœ€ç»ˆå‘ˆç°è¿™æ ·ï¼Œå½“æˆ‘ä»¬sortçš„æ—¶å€™ï¼Œå°±ä¸å†éœ€è¦ç”¨ä»¿å‡½æ•°äº†ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ç”¨lambdaè¡¨è¾¾å¼æ¥å®Œæˆç›¸åŒçš„æ“ä½œï¼Œå¤§å¤§å¢åŠ ä»£ç å¯è¯»æ€§ï¼\nè¿™æ˜¯å› ä¸ºæ’åºæ‰€ç”¨çš„æ–¹æ³•ç›´æ¥å°±åœ¨sortè¿™é‡Œç”¨lambdaçš„å½¢å¼ç»™å‡ºäº†ï¼Œçœ‹ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿä¸éœ€è¦å»æ‰¾å®šä¹‰ï¼Œæ›´ä¸ç”¨æ‹…å¿ƒå‡½æ•°å‘½åè§„åˆ™çš„é—®é¢˜äº†ã€‚\nvector&lt;Goods&gt; v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//ä»·æ ¼å‡åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._price &lt; g2._price; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//ä»·æ ¼é™åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._price &gt; g2._price; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;v1 = &#123; &#123;&quot;ç‰›å¥¶&quot;,20,100&#125;,&#123;&quot;æ¯å­&quot;,10,200&#125;,&#123;&quot;é¥¼å¹²&quot;,15,50&#125; &#125;;//åç§°å­—å…¸åºsort(v1.begin(), v1.end(), [](const Goods&amp; g1, const Goods&amp; g2) &#123;return g1._name &lt; g2._name; &#125;);for (auto&amp; e : v1) &#123;\tcout &lt;&lt; e._name &lt;&lt; &quot;_&quot; &lt;&lt; e._price &lt;&lt; &quot;  &quot;;&#125;cout &lt;&lt; endl;\n\n\n8.7 lambdaåº•å±‚ï¼šä»¿å‡½æ•°å®é™…ä¸Šï¼Œlambdaçš„åº•å±‚å°±æ˜¯æŠŠè‡ªå·±è½¬æˆäº†ä¸€ä¸ªä»¿å‡½æ•°ä¾›æˆ‘ä»¬è°ƒç”¨ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä½•sortå¯ä»¥ä»¥lambdaæ¥ä½œä¸ºæ’åºæ–¹æ³•çš„åŸå› â€”â€”åº•å±‚éƒ½æ˜¯ä»¿å‡½æ•°å˜›ï¼\n\n8.8 lambdaé€’å½’å¦‚æœéœ€è¦ç”¨lambdaå†™é€’å½’å‡½æ•°ï¼Œé‚£ä¹ˆlambdaå¿…é¡»ç”¨fuctionæ˜ç¡®æŒ‡å®šç±»å‹ï¼Œè€Œä¸èƒ½ç”¨autoï¼\næ¯”å¦‚ä¸‹æ–¹æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„æ–æ³¢é‚£å¥‘çš„é€’å½’\n// è¿™é‡Œå¿…é¡»è¦å¼•ç”¨æ•è·è‡ªèº«auto fib = [&amp;fib](int a) -&gt; int   &#123;       if ((a == 1) || (a == 2))       &#123;           return 1;       &#125;       else       &#123;           return (fib(a - 1)) + (fib(a - 2)); // n-1å’Œn-2é¡¹       &#125;   &#125;;\n\nè¿™ä¸ªæ—¶å€™ç¼–è¯‘å°±ä¼šå‡ºç°å¦‚ä¸‹çš„æŠ¥é”™ï¼Œå› ä¸ºautoæ˜¯è¦è¿™ä¸ªlambdaè¡¨è¾¾å¼çš„å®šä¹‰å®Œå…¨ç»“æŸäº†æ‰èƒ½è¿›è¡Œç±»å‹æ¨æ–­ï¼Œè€Œæˆ‘ä»¬åˆåœ¨lambdaçš„å‡½æ•°ä½“å†…ä½¿ç”¨äº†fibæœ¬èº«ï¼Œé‚£ä¹ˆå°±å‡ºç°äº†å£°æ˜å‰ä½¿ç”¨çš„é—®é¢˜ï¼\ntest.cpp: In function â€˜int main()â€™:test.cpp:75:18: error: use of â€˜fibâ€™ before deduction of â€˜autoâ€™     auto fib = [&amp;fib](int a) -&gt; int                  ^~~test.cpp: In lambda function:test.cpp:83:21: error: use of â€˜fibâ€™ before deduction of â€˜autoâ€™             return (fib(a - 1)) + (fib(a - 2)); // n-1å’Œn-2é¡¹                     ^~~test.cpp:83:36: error: use of â€˜fibâ€™ before deduction of â€˜autoâ€™             return (fib(a - 1)) + (fib(a - 2)); // n-1å’Œn-2é¡¹                                    ^~~\n\næ­£ç¡®çš„å†™æ³•å¦‚ä¸‹ï¼Œç”¨functionæ˜ç¡®æŒ‡æ˜è¿™ä¸ªlambdaè¡¨è¾¾å¼çš„ç±»å‹ï¼è€Œä¸”è¿˜éœ€è¦å¼•ç”¨æ•æ‰è‡ªèº«ï¼\n// è¿™é‡Œå¿…é¡»è¦å¼•ç”¨æ•è·è‡ªèº«ï¼Œ[&amp;fib]ï¼Œå¦åˆ™ä»–ä¸çŸ¥é“fibæ˜¯å•¥ç©æ„std::function&lt;int(int)&gt; fib = [&amp;fib](int a) -&gt; int   &#123;       if ((a == 1) || (a == 2))       &#123;           return 1;       &#125;       else       &#123;           return (fib(a - 1)) + (fib(a - 2)); // n-1å’Œn-2é¡¹       &#125;   &#125;;\n\nè¿™æ—¶å€™æ‰èƒ½é€šè¿‡ç¼–è¯‘ï¼\n9.åŒ…è£…å™¨functionfunctionåŒ…è£…å™¨ï¼Œä¹Ÿå«ä½œé€‚é…å™¨ã€‚C++ä¸­çš„functionæœ¬è´¨æ˜¯ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŒ…è£…å™¨ã€‚\né‚£ä¹ˆè¿™ä¸ªä¸œè¥¿æ˜¯ç”¨æ¥å¹²å•¥çš„å‘¢ï¼Ÿ\n\næŠŠæ‰€æœ‰çš„å¯è°ƒç”¨å¯¹è±¡å°è£…æˆç»Ÿä¸€çš„æ ¼å¼\n\nä»€ä¹ˆæ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Ÿ\n\nå‡½æ•°\nå‡½æ•°æŒ‡é’ˆ\nä»¿å‡½æ•°å¯¹è±¡\nlambdaè¡¨è¾¾å¼\n\n9.1 åŸºæœ¬ä½¿ç”¨æˆ‘ä»¬å¯ä»¥ç”¨functionæ¥åŒ…è£…è¿™äº›ä¸åŒçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œè¯´ç™½äº†å°±æ˜¯äº§ç”Ÿäº†å¦å¤–ä¸€ä¸ªç›¸åŒçš„å¯è°ƒç”¨å¯¹è±¡ã€‚ç±»ä¼¼äºâ€œå¼•ç”¨â€äº†è¿™ä¸ªå‡½æ•°\nclass AddClass&#123;public:\tstatic int Addi(int a, int b)&#123;\t\treturn a + b;\t&#125;\tdouble Addd(double a, double b)&#123;\t\treturn a + b;\t&#125;&#125;;int func(int a,int b)&#123;\treturn a + b;&#125;struct Functor&#123;\tint operator()(int a,int b)&#123;\t\treturn a+b;\t&#125;&#125;;void TestFunction1()&#123;\t// å‡½æ•°\tfunction&lt;int(int, int)&gt; func1 = func;\tcout &lt;&lt; func1(10, 20) &lt;&lt; endl;\t// ä»¿å‡½æ•°\tfunction&lt;int(int, int)&gt; func2 = Functor();\tcout &lt;&lt; func2(10, 20) &lt;&lt; endl;\t// ç±»ä¸­staticæˆå‘˜å‡½æ•°\tfunction&lt;int(int, int)&gt; func3 = AddClass::Addi;\tcout &lt;&lt; func3(100, 200) &lt;&lt; endl;\t// ç±»ä¸­éé™æ€æˆå‘˜å‡½æ•°\tfunction&lt;double(AddClass, double, double)&gt; func4 = &amp;AddClass::Addd;\tcout &lt;&lt; func4(AddClass(), 100.11, 200.11) &lt;&lt; endl;\t// lambdaè¡¨è¾¾å¼\tfunction&lt;int(int, int)&gt; func5 = [](int a, int b) &#123;return a + b; &#125;;\tcout &lt;&lt; func5(100, 200) &lt;&lt; endl;&#125;\n\n\nå¼•ç”¨ç±»ä¸­éstaticæˆå‘˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨é™æ€æˆå‘˜å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»è¦å¸¦ä¸Šä¸€ä¸ªthisæŒ‡é’ˆæ‰èƒ½å¾ˆå¥½çš„è®¿é—®ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç©¿å…¥ä¸€ä¸ªAddClass()çš„åŒ¿åå¯¹è±¡æ¥é€‚é…åŒ…è£…å™¨\nåŒæ—¶ï¼Œéé™æ€çš„æˆå‘˜å‡½æ•°è¿˜å¿…é¡»è¦è¿›è¡Œ&amp;å–åœ°å€æ“ä½œã€‚é™æ€çš„åˆ™å¯ä»¥ä¸åŠ \n\nä¸ºäº†ç»Ÿä¸€ï¼Œå¯ä»¥ç»™æˆå‘˜å‡½æ•°éƒ½åŠ ä¸Šå–åœ°å€ä»¥é˜²å¿˜è®°\n\n\n9.2 ç‰¹æ®Šåœºæ™¯çš„ä½œç”¨è¿™ä¸ªä¸œè¥¿å‘¢ï¼Œçœ‹èµ·æ¥å¥½åƒæ²¡å•¥ç”¨ï¼Œä½†æ˜¯åœ¨ä¸€äº›åœ°æ–¹å¯ä»¥å¸®å¤§å¿™\næ¯”å¦‚æ¨¡æ¿å‡½æ•°ï¼Œå‡è®¾æˆ‘ä»¬çŸ¥é“åœ¨å‡½æ•°Bé‡Œé¢éœ€è¦è°ƒç”¨ä¸€ä¸ªæ¨¡æ¿å‡½æ•°Aå¤šæ¬¡ï¼Œè€Œä¸”æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼ˆæˆ–è€…è¯´å°±åªæœ‰å·²çŸ¥çš„å‡ ä¸ªç‰¹å®šç±»å‹ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥å…ˆç”¨fuctionå¯¹è¿™ä¸ªæ¨¡æ¿å‡½æ•°è¿›è¡ŒæŒ‡å®šçš„å®ä¾‹åŒ–ï¼Œé¿å…æ¯ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œåå°éƒ½éœ€è¦å•ç‹¬å»å®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œå‡å°æ¨¡æ¿çš„æ€§èƒ½æŸè€—ï¼\n9.3 æ”¹é€ é€†æ³¢å…°è¡¨è¾¾å¼OJ\nleetcodeé€†æ³¢å…°è¡¨è¾¾å¼ï¼šhttps://leetcode.cn/problems/evaluate-reverse-polish-notation/\n\nä¹‹å‰å†™è¿™ä¸ªOJçš„æ—¶å€™ï¼Œæˆ‘ç”¨çš„æ˜¯æ ˆå’Œswitch/caseè¯­å¥\nclass Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                switch(ch[0])                &#123;                    case &#x27;+&#x27;:                        s.push(left+right);                        break;                    case &#x27;-&#x27;:                        s.push(left-right);                        break;                    case &#x27;*&#x27;:                        s.push(left*right);                        break;                    case &#x27;/&#x27;:                        s.push(left/right);                        break;                    default:                        break;                &#125;            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\nç°åœ¨æˆ‘ä»¬å°±ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦äº†ï¼Œå¯ä»¥ä½¿ç”¨åŒ…è£…å™¨æ¥æ”¹é€ è¿™ä¸ªOJé¢˜çš„ç­”æ¡ˆ\nclass Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        map&lt;string,function&lt;int(int,int)&gt;&gt; FuncMap = &#123;            &#123;&quot;+&quot;,[](int x,int y)&#123;return x+y;&#125;&#125;,            &#123;&quot;-&quot;,[](int x,int y)&#123;return x-y;&#125;&#125;,            &#123;&quot;*&quot;,[](int x,int y)&#123;return x*y;&#125;&#125;,            &#123;&quot;/&quot;,[](int x,int y)&#123;return x/y;&#125;&#125;        &#125;;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                int ret = FuncMap[ch](left,right);                s.push(ret);            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\nè¿™é‡Œæˆ‘ä»¬è¿˜ç”¨åˆ°äº†å‰é¢æåˆ°è¿‡çš„&#123;&#125;åˆå§‹åŒ–æ„é€ ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦ä»funcmapé‡Œé¢å–å‡ºå°è£…å™¨å°è£…çš„lambdaè¡¨è¾¾å¼è¿›è¡Œæ“ä½œå°±å¯ä»¥äº†ï¼\nä»£ç ä¸€ä¸‹å°±ç®€æ´äº†è®¸å¤šï¼Œä½†æ˜¯è¿™ä¹Ÿåªæœ‰å­¦ä¹ è¿‡C++11çš„äººæ‰çœ‹å¾—æ‡‚ï¼Œå±äºä¸€ä¸ªè¿›é˜¶ç”¨æ³•ã€‚è¿™ç§é”®å€¼å¯¹çš„æ–¹å¼ä¹Ÿæ›´æ–¹ä¾¿åç»­ä»£ç çš„æ‰©å±•ã€‚æƒ³æ·»åŠ å…¶ä»–çš„è¿ç®—ç¬¦ï¼Œå°±åªéœ€è¦ç»™mapé‡Œé¢æ–°å¢è¿ç®—ç¬¦å­—ç¬¦ä¸²å’Œå¯¹åº”çš„lambdaè¡¨è¾¾å¼å°±å¯ä»¥äº†ã€‚\nå¦‚æœç”¨switch/caseçš„è€åŠæ³•ï¼Œå°±è¿˜å¾—è‡ªå·±å†å†™ä¸€ä¸ªåˆ¤æ–­åˆ†æ”¯ï¼Œä¼šäº§ç”Ÿä¸€å®šçš„ä»£ç å†—ä½™å’Œé‡å¤ã€‚\n\næµ‹è¯•çš„æ—¶å€™å‘ç°å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œintæº¢å‡ºäº†ã€‚è¿™å¤§æ¦‚ç‡æ˜¯å› ä¸ºleetcodeä¿®æ”¹äº†æµ‹è¯•ç”¨ä¾‹ã€‚\n\næŠŠæ‰€æœ‰çš„intéƒ½æ”¹æˆlong longå³å¯ã€‚åæ­£é€»è¾‘æ€§ä»£ç æ²¡æœ‰bugå°±OKå•¦ã€‚\n\n\n10.bindç»‘å®šåœ¨ä¸Šé¢æˆ‘ä»¬ç”¨fuctionåŒ…è£…ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çš„æˆå‘˜å‡½æ•°æ—¶ï¼Œéœ€è¦åˆ©ç”¨åŒ¿åå¯¹è±¡ä¼ å…¥ä¸€ä¸ªthisæŒ‡é’ˆã€‚è¿™æ ·å°±å¾ˆä¸æ–¹ä¾¿äº†ï¼Œæ˜æ˜æ˜¯ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œéè¦ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚\nè¦æ˜¯æˆ‘ä»¬å†ç”¨9.3ä¸­mapçš„æ–¹å¼æ¥å°è£…ä¸€ä¸ªå¯è°ƒç”¨çš„è¡¨ï¼Œé‚£å¸¦thisæŒ‡é’ˆçš„å‡½æ•°å°±æ²¡åŠæ³•ä¸€èµ·åŒ…è£…äº†\nclass AddClass&#123;public:\tstatic int Addi(int a, int b)\t&#123;\t\treturn a + b;\t&#125;\tint Addii(int a, int b)\t&#123;\t\treturn a + b;\t&#125;&#125;;int func(int a,int b)&#123;\treturn a + b;&#125;struct Functor&#123;\tint operator()(int a,int b)\t&#123;\t\treturn a+b;\t&#125;&#125;;map&lt;string, function&lt;int(int, int)&gt;&gt; FuncMap = &#123;    &#123;&quot;å‡½æ•°&quot;,func&#125;,    &#123;&quot;ä»¿å‡½æ•°&quot;,Functor()&#125;,    &#123;&quot;é™æ€æˆå‘˜å‡½æ•°&quot;,AddClass::Addi&#125;,    &#123;&quot;éé™æ€æˆå‘˜å‡½æ•°&quot;,&amp;AddClass::Addii&#125;&#125;;\n\nå¦‚å›¾ï¼Œæœ€åaddclassä¸­çš„éé™æ€å‡½æ•°ï¼Œå°±æ²¡æœ‰åŠæ³•ä¸€åŒåŒ…è£…åˆ°mapä¸­\n\n\nè¿™é‡Œä¸èƒ½ä½¿ç”¨å¯å˜å‚æ•°åŒ…ï¼Œå› ä¸ºæ˜¯å®ä¾‹åŒ–æ“ä½œ\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨bindæ¥è¿›è¡Œå‚æ•°ç»‘å®š\n10.1 ä½¿ç”¨bindå¯ä»¥è°ƒæ•´å‚æ•°çš„é¡ºåºï¼Œç»‘å®šå›ºæœ‰å‚æ•°ï¼›æœ€åå½¢æˆä¸€ä¸ªæ–°çš„å¯è°ƒç”¨å¯¹è±¡ã€‚\nbindçš„ç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®šéœ€è¦ç»‘å®šçš„å‡½æ•°ï¼Œåé¢å°±æ˜¯ç»‘å®šçš„å‚æ•°ï¼Œå’Œéœ€è¦è‡ªå·±ä¼ å…¥çš„å‚æ•°\nfunction&lt;int(int, int)&gt; func7 = bind(&amp;AddClass::Addii,AddClass(), placeholders::_1, placeholders::_2);cout &lt;&lt; func7(100, 200) &lt;&lt; endl;\n\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±ä¸éœ€è¦ä¼ å…¥thisæŒ‡é’ˆï¼Œå› ä¸ºå½“æˆ‘ä»¬ç”¨bindç»‘å®šçš„æ—¶å€™ï¼Œå·²ç»é»˜è®¤ä¼ å…¥äº†ç¬¬ä¸€ä¸ªå‚æ•°äº†ï¼\n10.2 å ä½ç¬¦placeholdersplaceholdersæ˜¯ç”¨æ¥å ä½çš„ï¼Œä»£è¡¨è¿™é‡Œçš„å‚æ•°éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ä¼ å…¥ï¼Œè€Œ_1ä»£è¡¨ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ_2å°±æ˜¯ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨\nfunction&lt;int(int, int)&gt; func7 = bind(&amp;AddClass::Addii,AddClass(), placeholders::_1, placeholders::_2);\n\nå› ä¸ºæœ‰ä¸åŒçš„åç¼€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥è°ƒæ•´ç»‘å®šçš„å‚æ•°é¡ºåºï¼\n//Miniiçš„ä½œç”¨æ˜¯a-bfunction&lt;int(int, int)&gt; func8 = bind(&amp;AddClass::Minii, AddClass(), placeholders::_1, placeholders::_2);cout &lt;&lt; func8(100, 200) &lt;&lt; endl;function&lt;int(int, int)&gt; func9 = bind(&amp;AddClass::Minii, AddClass(), placeholders::_2, placeholders::_1);cout &lt;&lt; func9(100, 200) &lt;&lt; endl;\n\n\næˆ‘ä»¬è°ƒæ•´äº†é¡ºåºä¹‹åï¼Œä¹Ÿå¾—åˆ°äº†ä¸åŒçš„ç»“æœï¼\n10.3 å¼‚å¸¸ä»¥ä¸‹ä¸ºcplusplusç½‘ç«™ä¸Šå¯¹bindå‡½æ•°å¯èƒ½å‡ºç°å¼‚å¸¸çš„æè¿°\nException safety   Basic guarantee: if an exception is thrown, all objects involved are left in a valid state.   This function may only throw if the construction of any of its internal elements (of the decay types of Fn and Args...) throws.\n\nstd::bind åªæœ‰åœ¨ä¼ å…¥çš„å‡½æ•°çš„å‚æ•°æ„é€ æ—¶æŠ›å¼‚å¸¸ï¼Œä»–æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚æ¯”å¦‚åœ¨æ‹·è´æ„é€ ä¸­æŠ›å‡ºå¼‚å¸¸çš„ç±»ã€‚\n\næ³¨æ„ï¼Œå¦‚æœä¼ å…¥çš„å‡½æ•°å†…éƒ¨ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå’Œbindæ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œè¿™ç±»å¼‚å¸¸ä¼šåœ¨å‡½æ•°è¿è¡Œæ—¶æŠ›å‡ºï¼Œè€Œä¸æ˜¯bindçš„æ—¶å€™æŠ›å‡ºã€‚\nå¦å¤–ï¼Œå¦‚æœbindçš„ç›®æ ‡å‡½æ•°å‚æ•°å’Œä¼ å…¥çš„å‚æ•°æ•°é‡&#x2F;ç±»å‹ä¸ä¸€è‡´ï¼Œä¼šå¼•å‘ç¼–è¯‘æ—¶é”™è¯¯ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ã€‚\n\næ¯”å¦‚ä¸‹æ”¾çš„ç¤ºä¾‹ä»£ç ä¸­ï¼Œmyexpclassçš„æ‹·è´æ„é€ ä¼šæ£€æµ‹æˆå‘˜å˜é‡æ˜¯å¦ä¸ºè´Ÿæ•°ï¼Œå¦‚æœä¸ºè´Ÿæ•°ä¸å…è®¸æ‹·è´ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚åœ¨mainå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°è¯•å¼•å‘è¿™ä¸ªå¼‚å¸¸ï¼Œå°±èƒ½è§‚æµ‹åˆ°std::bindåœ¨å‡½æ•°ä¼ å‚è¿›è¡Œæ‹·è´æ„é€ æ—¶æŠ›å‡ºè¿™ä¸ªå¼‚å¸¸ã€‚ï¼ˆå› ä¸ºè¿™é‡Œçš„å‚æ•°æ²¡æœ‰ä½¿ç”¨å¼•ç”¨ï¼Œæ‰€ä»¥å‡½æ•°ä¼ å‚éœ€è¦æ‹·è´ï¼‰\n#include &lt;functional&gt;#include &lt;iostream&gt;#include &lt;stdexcept&gt;using namespace std;// bindæµ‹è¯•å‡½æ•°template &lt;typename Callable, typename... Args&gt;void MyExpTestFunc(Callable &amp;&amp;func, Args &amp;&amp;...args)&#123;    try    &#123;        auto function = std::bind(std::forward&lt;Callable&gt;(func), std::forward&lt;Args&gt;(args)...);    &#125; catch (...)    &#123;        std::cout &lt;&lt; &quot;throw exception&quot; &lt;&lt; std::endl;    &#125;&#125;class myexpclass&#123;public:    myexpclass(int32_t a= 10,int32_t b= 20)        :_a(a),_b(b)    &#123;&#125;    myexpclass(const myexpclass&amp; eee)    &#123;        if(eee._a &lt; 0 || eee._b &lt; 0)        &#123;            throw std::runtime_error(&quot;this class cannot be copy&quot;);        &#125;        _a = eee._a;        _b = eee._b;    &#125;private:    int32_t _a;    int32_t _b;&#125;;int main()&#123;    std::function&lt;void(myexpclass)&gt; testFuncInt = [](myexpclass num)    &#123;        std::cout &lt;&lt; &quot;test MyExpTestFuncAgent with params&quot; &lt;&lt; std::endl;    &#125;;    myexpclass test1(1,2);    myexpclass test2(-1,2);    MyExpTestFunc(testFuncInt, test1);    std::cout &lt;&lt; &quot;end test1&quot; &lt;&lt; std::endl;    MyExpTestFunc(testFuncInt, test2);    std::cout &lt;&lt; &quot;end test2&quot; &lt;&lt; std::endl;    std::cout &lt;&lt; &quot;exit&quot; &lt;&lt; std::endl;    return 0;&#125;\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œtest2å‚æ•°è¿›è¡Œbindçš„æ—¶å€™ç¡®æŠ›å‡ºäº†è¯¥å¼‚å¸¸ã€‚\n&gt; ./testend test1throw exceptionend test2exit\n\n11.static_assertstatic_assert æ˜¯ C++11 å¼•å…¥çš„ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ–­è¨€æ£€æŸ¥ã€‚å®ƒå…è®¸ä½ åœ¨ä»£ç ä¸­æ·»åŠ ä¸€äº›æ¡ä»¶ï¼Œå¦‚æœè¿™äº›æ¡ä»¶åœ¨ç¼–è¯‘æ—¶ä¸æ»¡è¶³ï¼Œç¼–è¯‘å°†ä¼šå¤±è´¥å¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚\nstatic_assert çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ç¼–è¯‘æ—¶éªŒè¯ä¸€äº›å¸¸é‡è¡¨è¾¾å¼çš„çœŸå‡æƒ…å†µï¼Œä»è€Œå¸®åŠ©å¼€å‘äººå‘˜æ•è·ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œä¾‹å¦‚å¸¸é‡å€¼æ˜¯å¦ç¬¦åˆé¢„æœŸã€æ¨¡æ¿å‚æ•°æ˜¯å¦æ»¡è¶³è¦æ±‚ç­‰ã€‚\nç¤ºä¾‹ï¼š\n#include &lt;iostream&gt;template &lt;typename T, int Size&gt;class Array &#123;    static_assert(Size &gt; 0, &quot;Array size must be greater than zero&quot;);    T data[Size];public:    // ...&#125;;int main() &#123;    Array&lt;int, 0&gt; emptyArray; // ç¼–è¯‘æ—¶å¤±è´¥ï¼Œå› ä¸ºSizeä¸æ»¡è¶³æ¡ä»¶    return 0;&#125;\n\nåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒArray ç±»ä½¿ç”¨ static_assert æ¥æ£€æŸ¥æ•°ç»„å¤§å°æ˜¯å¦å¤§äºé›¶ã€‚å¦‚æœåœ¨å®ä¾‹åŒ– Array ç±»æ—¶æ•°ç»„å¤§å°ä¸æ»¡è¶³è¦æ±‚ï¼Œç¼–è¯‘æ—¶å°†ä¼šå¤±è´¥ï¼Œå¹¶æ˜¾ç¤ºæŒ‡å®šçš„é”™è¯¯æ¶ˆæ¯ã€‚\n\nstatic_assertåœ¨ç¼–è¯‘æ—¶è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥\nassertåœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥\n\n12.constexprconstexpr æ˜¯ C++11 å¼•å…¥çš„å…³é”®å­—ï¼Œç”¨äºå£°æ˜åœ¨ç¼–è¯‘æ—¶å¯ä»¥æ±‚å€¼çš„å¸¸é‡è¡¨è¾¾å¼ã€‚å®ƒå¯ä»¥ç”¨äºå˜é‡ã€å‡½æ•°ã€æ„é€ å‡½æ•°ç­‰ä¸Šä¸‹æ–‡ï¼Œç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼Œä»è€Œå°†å…¶ä½œä¸ºå¸¸é‡ä½¿ç”¨ã€‚\nconstexpr çš„ä¸»è¦ä½œç”¨åŒ…æ‹¬ï¼š\n\nç¼–è¯‘æ—¶è®¡ç®—ï¼š ä½¿ç”¨ constexpr å£°æ˜çš„å˜é‡æˆ–å‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¡ç®—ï¼Œè€Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡ç®—ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç çš„æ€§èƒ½ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶è®¡ç®—çš„ç»“æœå¯ä»¥ç›´æ¥åµŒå…¥åˆ°ç”Ÿæˆçš„æœºå™¨ç ä¸­ã€‚\nå¸¸é‡è¡¨è¾¾å¼ï¼š é€šè¿‡ä½¿ç”¨ constexprï¼Œä½ å¯ä»¥å£°æ˜å¸¸é‡è¡¨è¾¾å¼ï¼Œè¿™äº›è¡¨è¾¾å¼å¯ä»¥ç”¨ä½œç¼–è¯‘æ—¶çš„å¸¸é‡å€¼ï¼Œä¾‹å¦‚æ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ç­‰ã€‚\næ¨¡æ¿å…ƒç¼–ç¨‹ï¼š constexpr å¯ä»¥ä¸æ¨¡æ¿ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºåœ¨ç¼–è¯‘æ—¶æ‰§è¡Œä¸€äº›å¤æ‚çš„æ“ä½œï¼Œä»è€Œå®ç°å…ƒç¼–ç¨‹æŠ€æœ¯ã€‚\n\nç¤ºä¾‹ï¼š\nconstexpr int factorial(int n) &#123;    return (n &lt;= 1) ? 1 : n * factorial(n - 1);&#125;int main() &#123;    constexpr int result = factorial(5); // ç¼–è¯‘æ—¶è®¡ç®—é˜¶ä¹˜    static_assert(result == 120, &quot;Factorial of 5 should be 120&quot;); // ç¼–è¯‘æ—¶æ–­è¨€    return 0;&#125;\n\nåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œfactorial å‡½æ•°è¢«å£°æ˜ä¸º constexprï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è®¡ç®—ã€‚æˆ‘ä»¬ä½¿ç”¨ constexpr å‡½æ•°è®¡ç®—äº†é˜¶ä¹˜ï¼Œå¹¶åœ¨ main å‡½æ•°ä¸­ä½¿ç”¨äº† static_assert è¿›è¡Œç¼–è¯‘æ—¶æ–­è¨€ï¼Œç¡®ä¿è®¡ç®—çš„ç»“æœæ˜¯æ­£ç¡®çš„ã€‚\nåœ¨å…·ä½“è¿è¡Œåˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œå°±ä¸å†éœ€è¦å®æ—¶è®¡ç®—ï¼Œè€Œæ˜¯ç›´æ¥æ²¿ç”¨äº†ç¼–è¯‘è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç»“æœï¼›æé«˜äº†ä»£ç è¿è¡Œæ•ˆç‡ï¼Œä½†å¢åŠ äº†ç¼–è¯‘æ—¶é—´ã€‚\næ€»ä¹‹ï¼Œconstexpr å…³é”®å­—å…è®¸åœ¨ç¼–è¯‘æ—¶æ±‚å€¼çš„å¸¸é‡è¡¨è¾¾å¼ï¼Œæœ‰åŠ©äºä¼˜åŒ–ä»£ç å¹¶æ”¯æŒä¸€äº›å…ƒç¼–ç¨‹æŠ€æœ¯ã€‚å®ƒåœ¨ C++ ä¸­ä¸ºç¼–è¯‘æ—¶è®¡ç®—æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚\n13.remove_extent#include &lt;type_traits&gt;template&lt; class T &gt;struct remove_extent;\n\nè‹¥ T æ˜¯æŸç±»å‹ X çš„æ•°ç»„ï¼Œåˆ™æä¾›ç­‰äº X çš„æˆå‘˜ typedef type ï¼Œå¦åˆ™ type ä¸º T ã€‚\næ³¨æ„è‹¥ T æ˜¯å¤šç»´æ•°ç»„ï¼Œåˆ™åªç§»é™¤ç¬¬ä¸€ç»´ã€‚æ·»åŠ  std::remove_extent çš„ç‰¹åŒ–çš„ç¨‹åºè¡Œä¸ºæœªå®šä¹‰ã€‚\n// C++14ä¸­å¤šäº†ä¸€ä¸ªè¾…åŠ©ç±»å‹æ¥ä½¿ç”¨è¯¥ç±»template&lt; class T &gt;using remove_extent_t = typename remove_extent&lt;T&gt;::type;\n\nè¯´äººè¯çš„ï¼Œè¿™ä¸ªä¸œè¥¿çš„ä½œç”¨æ˜¯è·å–åˆ°æ•°ç»„çš„æˆå‘˜çš„ç±»å‹ï¼›å¦‚æœä¼ å…¥å¤šç»´æ•°ç»„ï¼Œåˆ™åªä¼šæ¥è§¦ç¬¬ä¸€ç»´ï¼›ç¤ºä¾‹ï¼š\nvoid test_extend()&#123;    using ArrayType1 = int[5];    using ArrayType2 = int[5][10];    using ArrayType3 = int[5][10][10];    using ElementType1 = std::remove_extent&lt;ArrayType1&gt;::type;    using ElementType2 = std::remove_extent&lt;ArrayType2&gt;::type;    using ElementType3 = std::remove_extent&lt;ArrayType3&gt;::type;    std::cout &lt;&lt; typeid(ElementType1).name() &lt;&lt; std::endl;    std::cout &lt;&lt; typeid(ElementType2).name() &lt;&lt; std::endl;    std::cout &lt;&lt; typeid(ElementType3).name() &lt;&lt; std::endl;&#125;\n\nåœ¨linuxä¸‹æ‰“å°å¦‚ä¸‹ï¼Œè¿™é‡Œå°±èƒ½çœ‹å‡ºæ–‡æ¡£é‡Œé¢è¯´çš„å¯¹äºå¤šç»´æ•°ç»„åªç§»é™¤ç¬¬ä¸€ç»´çš„å«ä¹‰\n$ ./testiA10_iA10_A10_i\n\n14.[[nodiscard]]è¿™ä¸ªå…³é”®å­—çš„ä½œç”¨ï¼Œæ˜¯è®©ç¼–è¯‘å™¨è­¦å‘Šç”¨æˆ·ï¼Œä¸è¦å¿½ç•¥å‡½æ•°çš„è¿”å›å€¼\n[[nodiscard]] int calculateSum(int a, int b) &#123;    return a + b;&#125;int main() &#123;    calculateSum(2, 3);  // ç¼–è¯‘å™¨å¯èƒ½ä¼šå‘å‡ºè­¦å‘Šï¼Œæç¤ºæœªä½¿ç”¨è¿”å›å€¼    return 0;&#125;\n\nå³è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼å¿…é¡»è¢«æ¥å—ä¸”ä½¿ç”¨ï¼Œå¦åˆ™å°±ä¼šè¢«è­¦å‘Š\n$ g++ test.cpp -o test -std=c++11test.cpp: In function â€˜int main()â€™:test.cpp:8:17: warning: ignoring return value of â€˜int calculateSum(int, int)â€™, declared with attribute nodiscard [-Wunused-result]     calculateSum(2, 3);  // ç¼–è¯‘å™¨å¯èƒ½ä¼šå‘å‡ºè­¦å‘Šï¼Œæç¤ºæœªä½¿ç”¨è¿”å›å€¼     ~~~~~~~~~~~~^~~~~~test.cpp:3:19: note: declared here [[nodiscard]] int calculateSum(int a, int b) &#123;                   ^~~~~~~~~~~~\n\nåªè¦ä½ ç”¨ä¸€ä¸ªå˜é‡æ¥å—äº†è¿™ä¸ªè¿”å›å€¼ï¼Œå°±ä¸ä¼šæ”¶åˆ°è¿™ä¸ªè­¦å‘Šäº†\n[[nodiscard]] int calculateSum(int a, int b) &#123;    return a + b;&#125;int main() &#123;    int i = calculateSum(2, 3);  // æ¥å—äº†è¿”å›å€¼ï¼Œä¸ä¼šå‘å‡ºè­¦å‘Š    return 0;&#125;\n\nä½¿ç”¨å‡½æ•°è¿”å›å€¼ä½œä¸ºåˆ¤æ–­æ¡ä»¶ï¼Œä¹Ÿç®—æ˜¯ä½¿ç”¨äº†è¿™ä¸ªè¿”å›å€¼ï¼ŒåŒæ ·ä¸ä¼šå‘å‡ºè­¦å‘Š\n[[nodiscard]] int calculateSum(int a, int b) &#123;    return a + b;&#125;int main() &#123;    if(calculateSum(2, 3));  // æ¥å—äº†è¿”å›å€¼ï¼Œä¸ä¼šå‘å‡ºè­¦å‘Š    return 0;&#125;\n\n15.std::begin&#x2F;endè¿­ä»£å™¨è¿™é‡Œè¯´çš„è¿­ä»£å™¨å¹¶ä¸æ˜¯å®¹å™¨å†…éƒ¨çš„ï¼Œstdä¸ºäº†ä¸€è‡´æ€§ï¼Œåœ¨C++11å¼•å…¥äº†std::begin/std::endæ¥è¿›è¡Œå¯¹åŸç”Ÿæ•°ç»„çš„è¿­ä»£;\nè¿™ä¸¤ä¸ªå‡½æ•°é™¤äº†å¯ä»¥æ„é€ ä¸€ä¸ªåŸç”Ÿæ•°ç»„çš„è¿­ä»£å™¨ï¼Œè¿˜èƒ½è·å–åˆ°vectorå®¹å™¨çš„è¿­ä»£å™¨ï¼›\n#include &lt;iterator&gt;// container (1)template &lt;class Container&gt;  auto begin (Container&amp; cont) -&gt; decltype (cont.begin());template &lt;class Container&gt;  auto begin (const Container&amp; cont) -&gt; decltype (cont.begin());// array (2)\ttemplate &lt;class T, size_t N&gt;  T* begin (T(&amp;arr)[N]);\n\nå¦‚ä¸‹æ˜¯cplusplusç½‘ç«™ä¸Šçš„ç¤ºä¾‹ä»£ç ï¼Œçœ‹äº†å°±ä¼šå¥½å§ï¼›&lt;iterator&gt;å¤´æ–‡ä»¶ä¼šåœ¨&lt;vector&gt;å¤´æ–‡ä»¶ä¸­è¢«åŒ…å«ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦å†åŒ…å«ä¸€æ¬¡äº†ã€‚\n// std::begin / std::end example#include &lt;iostream&gt;     // std::cout#include &lt;vector&gt;       // std::vector, std::begin, std::endint main () &#123;  int foo[] = &#123;10,20,30,40,50&#125;;  std::vector&lt;int&gt; bar;  // iterate foo: inserting into bar  for (auto it = std::begin(foo); it!=std::end(foo); ++it)    bar.push_back(*it);  // iterate bar: print contents:  std::cout &lt;&lt; &quot;bar contains:&quot;;  for (auto it = std::begin(bar); it!=std::end(bar); ++it)    std::cout &lt;&lt; &#x27; &#x27; &lt;&lt; *it;  std::cout &lt;&lt; &#x27;\\n&#x27;;  return 0;&#125;\n\nè€Œç”¨typeidè·å–å˜é‡åå­—\nint main()&#123;\tvector&lt;int&gt; arrv;\tarrv.push_back(1);\tcout &lt;&lt; typeid(arrv.begin()).name() &lt;&lt; endl;\tcout &lt;&lt; typeid(std::begin(arrv)).name() &lt;&lt; endl;\tint arri[] = &#123; 1,2,3 &#125;;\tcout &lt;&lt; typeid(std::begin(arri)).name() &lt;&lt; endl;\treturn 0;&#125;\n\nå¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼Œå¯è§std::beginæœ¬è´¨ä¸Šåªæ˜¯å¯¹int*æŒ‡é’ˆçš„ä¸€ä¸ªå°è£…ã€‚è€Œå¦‚æœç”¨beginå‡½æ•°è·å–vectorçš„è¿­ä»£å™¨ï¼Œé‚£ä¹ˆå°±ä¼šå»å–åˆ°vectorä¹‹ä¸­å°è£…å¥½çš„è¿­ä»£å™¨ï¼Œå’Œç›´æ¥ä½¿ç”¨arrv.begin()çš„æ•ˆæœç›¸åŒ\nclass std::_Vector_iterator&lt;class std::_Vector_val&lt;struct std::_Simple_types&lt;int&gt; &gt; &gt;class std::_Vector_iterator&lt;class std::_Vector_val&lt;struct std::_Simple_types&lt;int&gt; &gt; &gt;int *\n\n16.std::any_ofç±»ä¼¼çš„å‡½æ•°è¿˜æœ‰ std::for_each\nå‡½æ•°å®šä¹‰#include &lt;algorithm&gt;bool any_of ( InputIterator start, InputIterator end, UnaryPredicate callback ) ;\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œæ ¹æ®ç»™å®šçš„è¿­ä»£å™¨åŒºé—´ï¼Œéå†æ‰§è¡Œcallbackå‡½æ•°ï¼›åªè¦callbackå‡½æ•°è¿”å›äº†ä¸€æ¬¡trueï¼Œæ•´ä¸ªå‡½æ•°å°±ä¼šé€€å‡ºå¹¶è¿”å›trueã€‚å¦åˆ™è¿”å›falseã€‚\nç›¸å½“äºåªæœ‰è¿­ä»£å™¨åŒºé—´ä¸­çš„æ‰€æœ‰å€¼éƒ½ä¸æ»¡è¶³å›è°ƒå‡½æ•°ä¸­çš„åˆ¤æ–­æ¡ä»¶çš„æ—¶å€™ï¼Œæ‰ä¼šè¿”å›falseï¼›\nä½¿ç”¨ç¤ºä¾‹ä¸Šç¤ºä¾‹\n#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;unordered_map&gt;using namespace std;int main()&#123;    // è®¾ç«‹ä¸€ä¸ªç›¸é™¤çš„map    unordered_multimap&lt;int,int&gt; divm;    divm.emplace(1,2);    divm.emplace(6,29);    divm.emplace(0,20);    divm.emplace(10,0); // error    divm.emplace(3,2);    divm.emplace(33,234);    // éå†åˆ¤æ–­è¿™ä¸ªmapé‡Œé¢æ˜¯å¦æ‰€æœ‰çš„å‚æ•°éƒ½æ»¡è¶³ç›¸é™¤çš„æ¡ä»¶ï¼ˆå³é™¤æ•°ä¸èƒ½ä¸º0ï¼‰    if(std::any_of(divm.begin(),divm.end(),[](const auto&amp; div_pair)-&gt;bool&#123;        return div_pair.second == 0;    &#125;))    &#123;        cout &lt;&lt; &quot;args error&quot; &lt;&lt; endl;    &#125;    else&#123;        cout &lt;&lt; &quot;all good to div&quot; &lt;&lt; endl;    &#125;    return 0;&#125;\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡any_ofå’Œlambdaè¡¨è¾¾å¼æ¥åˆ¤æ–­å³å°†è¦è¿›è¡Œæ‰¹é‡ç›¸é™¤æ“ä½œçš„mapä¸­æ˜¯å¦åŒ…å«ä¸æ»¡è¶³ç›¸é™¤æ¡ä»¶çš„å‚æ•°ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¹‹ä¸­æœ‰ä¸€å¯¹çš„é™¤æ•°æ˜¯0ï¼Œè¿™æ˜¯ä¸ç¬¦åˆé™¤æ³•çš„è§„åˆ™çš„ã€‚è€Œåˆ¤æ–­æ¡ä»¶å°±æ˜¯åˆ¤æ–­ç¬¬äºŒä¸ªé™¤æ•°æ˜¯å¦ä¸º0ï¼Œæ‰€ä»¥any_ofç†åº”æŠ¥é”™ï¼›\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œç¬¦åˆé¢„æœŸ\nargs error\n\nå¦‚æœå°†å‡ºé”™çš„å“ªä¸€è¡Œæ³¨é‡Šæ‰ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæŠ¥é”™\nall good to div\n\n17.std::atomic::compare_exchange_strong1.è¯´æ˜ä¹‹å‰åªæ¥è§¦è¿‡ std::atomic ï¼Œå®ƒæ˜¯C++å†…ç½®æä¾›çš„ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå¸®æˆ‘ä»¬å°è£…äº†è®¿é—®çš„åŸå­æ€§ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªä¼šåœ¨æ•°å­—å˜é‡ä¸Šä½¿ç”¨ std::atomic ï¼Œè¿™æ—¶å€™å¯¹æ•°æ®çš„ä¿®æ”¹æ“ä½œå°±ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åŠ é”è§£é”äº†ï¼Œstdåº•å±‚ä¼šè‡ªåŠ¨å°è£…é”çš„æ“ä½œã€‚\nåœ¨ std::atomic ä¸­è¿˜æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ compare_exchange_strong å’Œ compare_exchange_weak ï¼›\nè¿™ä¸¤ä¸ªå‡½æ•°çš„å…¥å‚å’ŒåŠŸèƒ½éƒ½ç›¸åŒï¼Œæˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯å‰ä¸¤ä¸ªå…¥å‚\n\nå’Œç¬¬ä¸€ä¸ªå…¥å‚exceptè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœåŸå­é‡å’Œè¯¥å‚æ•°ç›¸åŒï¼Œåˆ™å°†åŸå­é‡æ”¹æˆç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶è¿”å›true\nå¦‚æœåŸå­é‡å’Œç¬¬ä¸€ä¸ªå‚æ•°ä¸åŒï¼Œåˆ™å°†ç¬¬ä¸€ä¸ªå‚æ•°æ”¹ä¸ºå½“å‰åŸå­é‡çš„å€¼ï¼Œè¿”å›false\n\nç¬¬ä¸€ä¸ªå…¥å‚æ˜¯å¼•ç”¨ä¼ å‚ï¼Œæ˜¯ä¸€ä¸ªè¾“å…¥è¾“å‡ºå‚æ•°ã€‚åœ¨åŸå­é‡å’Œç¬¬ä¸€ä¸ªå‚æ•°ä¸åŒçš„æ—¶å€™ï¼Œè¿™ä¸ªå‚æ•°ä¼šè¢«ä¿®æ”¹ã€‚\nif(!x.compare_exchange_strong(0,10))&#123;  // è¿™ä¸¤ä¸ªå‚æ•°ä¹‹é—´å¯èƒ½ä¼šå‡ºç°ç¬¬äºŒä¸ªæ‰§è¡Œæµæ¥è®¿é—®å¹¶ä¿®æ”¹xï¼Œå¯¼è‡´çº¿ç¨‹ä¸å®‰å…¨ï¼Œç¼ºå¤±åŸå­æ€§    auto current_val = x; // x.load()&#125;\n\nä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µä¸­çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œcompare_exchangeå‡½æ•°ä¼šåœ¨åŸå­é‡å’Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œé€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°è¾“å‡ºå½“å‰çš„åŸå­é‡ã€‚è¿™æ ·å°±èƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚æ‰€ä»¥å¦‚æœä½ éœ€è¦è·å–åˆ°åŸå­é‡çš„å½“å‰å€¼ï¼Œè¯·ä¸è¦ç»™ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥å³å€¼ï¼Œä¼ å…¥å¯ä¿®æ”¹çš„å·¦å€¼ï¼›\n2.compare_exchange_strongçš„ä½¿ç”¨ç¤ºä¾‹State cur_state = State::Ready;if (engine.state_.compare_exchange_strong(cur_state,State::Closing)&#123;    // åˆ¤æ–­å½“å‰å¼•æ“çš„çŠ¶æ€ï¼Œå¦‚æœæ˜¯å°±ç»ªçŠ¶æ€ï¼Œå°±æŠŠä»–å…³é—­    engine.close();&#125;else&#123;    // å¦‚æœæ˜¯å…¶ä»–çŠ¶æ€ï¼Œå°±å°†é”™è¯¯è¾“å‡ºï¼Œå¹¶é€šè¿‡è¾“å…¥è¾“å‡ºå‚æ•°è·å–åˆ°å½“å‰å¼•æ“çš„çŠ¶æ€    cout &lt;&lt; &quot;[cannot close] cur_state: &quot; &lt;&lt; cur_state &lt;&lt; endl;&#125;\n\n3.weakå’Œstrongçš„åŒºåˆ« C++ ä¸­ std::atomic ç±»å‹çš„ compare_exchange åº”è¯¥é€‰æ‹©å“ªä¸ªç‰ˆæœ¬ï¼Ÿ - çŸ¥ä¹ (zhihu.com) \n C++11ï¼šåŸå­äº¤æ¢å‡½æ•°compare_exchange_weakå’Œcompare_exchange_strong-CSDNåšå®¢ \nweakç‰ˆæœ¬çš„CASå…è®¸å¶ç„¶å‡ºä¹æ„æ–™çš„è¿”å›ï¼ˆæ¯”å¦‚åœ¨å­—æ®µå€¼å’ŒæœŸå¾…å€¼ä¸€æ ·çš„æ—¶å€™å´è¿”å›äº†falseï¼‰ï¼Œä¸è¿‡åœ¨ä¸€äº›å¾ªç¯ç®—æ³•ä¸­ï¼Œè¿™æ˜¯å¯ä»¥æ¥å—çš„ã€‚é€šå¸¸å®ƒæ¯”èµ·strongæœ‰æ›´é«˜çš„æ€§èƒ½ã€‚\nè€Œstrongçš„è¿”å›å€¼èƒ½ä¿è¯å®ƒæ˜¯ç»å¯¹ç¬¦åˆé¢„æœŸçš„ã€‚\nç»“è¯­æœ¬ç¯‡è¶…é•¿çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸè¾£ï¼\nå…¶å®C++11è¿˜æœ‰å…¶ä»–çš„æ–°ç‰¹æ€§ï¼Œä½†æ˜¯é‚£äº›æˆ‘ä¼šå•å¼€ä¸€ç¯‡æ–‡ç« æ¥å†™~\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","Cpp","Cpp11"]},{"title":"ã€C++ã€‘C++11ä¸­Rå­—ç¬¦ä¸²çš„ä½œç”¨","url":"/posts/3258704981/","content":"åœ¨ C++11 ä¸­æ·»åŠ äº†å®šä¹‰åŸå§‹å­—ç¬¦ä¸²çš„å­—é¢é‡\n\n\n1.å®šä¹‰å’ŒåŸºæœ¬ä½¿ç”¨å®šä¹‰æ–¹å¼ä¸ºï¼š\nR&quot;xxx(åŸå§‹å­—ç¬¦ä¸²)xxx&quot;\n\nå…¶ä¸­ () ä¸¤è¾¹çš„å­—ç¬¦ä¸²å¯ä»¥çœç•¥ï¼ŒRåªä¼šå¤„ç†æ‹¬å·ä¸­çš„å­—ç¬¦ä¸²ã€‚\nåŸå§‹å­—é¢é‡ R å¯ä»¥ç›´æ¥è¡¨ç¤ºå­—ç¬¦ä¸²çš„å®é™…å«ä¹‰ï¼Œè€Œä¸éœ€è¦é¢å¤–å¯¹å­—ç¬¦ä¸²åšè½¬ä¹‰ç­‰æ“ä½œã€‚\nR&quot;(&quot;HELLO&quot;)&quot;ç­‰åŒäºR&quot;(\\&quot;HELLO\\&quot;)&quot;\n\nå¯ä»¥ç†è§£ä¸ºæ˜¯å¿½ç•¥æ‰€æœ‰è½¬ä¹‰å­—ç¬¦çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼\n#include &lt;iostream&gt;using namespace std;int main()&#123;\tconst char* s1 = R&quot;(Hello\\\\World)&quot;;\tcout &lt;&lt; s1 &lt;&lt; endl;\tconst char* s2 = &quot;Hello\\\\World&quot;;\tcout &lt;&lt; s2 &lt;&lt; endl;\treturn 0;&#125;\n\n\n2.å®é™…åœºæ™¯åœ¨è¿›è¡Œé¡¹ç›®å¼€å‘ï¼Œéœ€è¦ç”¨åˆ°Jsonå­—ç¬¦ä¸²æ—¶ï¼Œè¿™ä¸ªRå­—ç¬¦ä¸²å°±éå¸¸æœ‰ç”¨\nrsp.body = R&quot;(&#123;&quot;code&quot;:0, &quot;message&quot;:&quot;æ›´æ–°ç‚¹è¸©æˆåŠŸ&quot;&#125;)&quot;;\n\næˆ‘ä»¬åªéœ€è¦ä½¿ç”¨Rå­—ç¬¦ä¸²ï¼Œå°±èƒ½æ­£å¸¸ç¼–å†™jsonæ ¼å¼çš„å­—ç¬¦ä¸²\nå¦‚æœä¸ä½¿ç”¨Rå­—ç¬¦ä¸²ï¼Œå°±å¿…é¡»ç»™Jsonä¸­çš„æ¯ä¸€ä¸ª&quot;æ·»åŠ ç”¨äºè½¬ä¹‰çš„\\&quot;ï¼Œå¤§å¤§å¢åŠ äº†ä»£ç çš„ç¹çæ€§ï¼Œè€Œä¸”è¿˜å®¹æ˜“å‡ºç°æ¼åŠ è½¬ä¹‰è€Œå¯¼è‡´çš„bug\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘å¼•ç”¨å’Œå†…è”å‡½æ•°","url":"/posts/3945540971/","content":"é˜¿å·´é˜¿å·´ï¼Œæœ€è¿‘æ­å»ºå¥½äº†è…¾è®¯äº‘çš„Linuxç¯å¢ƒï¼Œæ‰€ä»¥æœ¬ç¯‡C++çš„åšå®¢å°±å°è¯•åœ¨Linuxç¯å¢ƒä¸‹æ¥æµ‹è¯•ä»£ç å§ï¼é˜¿å·´é˜¿å·´ï¼Œæœ€è¿‘æ­å»ºå¥½äº†è…¾è®¯äº‘çš„Linuxç¯å¢ƒï¼Œæ‰€ä»¥æœ¬ç¯‡C++çš„åšå®¢å°±å°è¯•åœ¨Linuxç¯å¢ƒä¸‹æ¥æµ‹è¯•ä»£ç å§ï¼\nä»Šå¤©å­¦ä¹ äº†C++çš„å¼•ç”¨å’Œå†…è”å‡½æ•°ï¼Œä¸€èµ·æ¥ç…ç…å®ƒä»¬éƒ½æ˜¯äº›å•¥â€¦â€¦\n\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\nå‰è¨€ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼ŒCè¯­è¨€ä¹‹ä¸­ï¼Œæœ‰ä¸€ä¸ªå«æŒ‡é’ˆçš„å®¶ä¼™ï¼Œå®ƒçš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹\nint main()&#123;\tint a=10;\tint*p=&amp;a;//pæ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘a        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡*på¯¹æŒ‡é’ˆè§£å¼•ç”¨è®¿é—®å˜é‡a\næ‰€ä»¥C++ä¹‹ä¸­ä¹Ÿæœ‰ä¸€ä¸ªç±»ä¼¼çš„ä¸œè¥¿ï¼Œå«åšå¼•ç”¨ï¼Œä¸è¿‡å®ƒå’ŒæŒ‡é’ˆå®Œå…¨ä¸åŒå“¦\n\n1.å¼•ç”¨1.1åŸºæœ¬å½¢å¼å¼•ç”¨çš„åŸºæœ¬æ–¹å¼å¦‚ä¸‹\nint a=10;int&amp; b=a;int&amp; c=a;//åŒä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªåˆ«å//å¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ª//ä½†æ˜¯å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\næ­¤æ—¶çš„bå’Œcéƒ½æ˜¯açš„åˆ«åï¼Œæ³¨æ„æ˜¯åˆ«åï¼æ‰“å°çš„æ—¶å€™ï¼Œä¸‰ä¸ªå˜é‡çš„ç»“æœéƒ½æ˜¯10ï¼›\n  \nå¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ªå˜é‡ï¼Œè€Œä¸”å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\nä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªå¼•ç”¨\næŒ‡é’ˆå¯ä»¥æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œå¼•ç”¨ä¸å¯ä»¥\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼Œä¸å¯ä»¥int&amp; b;\n\n\næ¯”å¦‚ä½ å«æåï¼Œæœ‰äººå«ä½ â€œå°æâ€ï¼Œè¿˜æœ‰äººå«ä½ â€œè‹±è¯­ä½œæ–‡äººâ€ï¼Œè¿™ä¸¤ä¸ªå¤–å·éƒ½æ˜¯ä½ çš„åˆ«åã€‚\n\næŒ‡é’ˆå¹¶ä¸æ˜¯åˆ«åï¼ŒæŒ‡é’ˆæ˜¯é€šè¿‡åœ°å€è®¿é—®æŸä¸ªå˜é‡ã€‚è€Œå¼•ç”¨æ˜¯ç»™aå˜é‡èµ·å¦å¤–çš„ä¸¤ä¸ªåå­—ï¼Œå®é™…ä¸Šbå’Œcéƒ½å¯ä»¥å½“ä½œaæ¥ä½¿ç”¨\n\nç¼–è¯‘è¿è¡Œä»£ç ï¼Œè®©ç¼–è¯‘å™¨æ‰“å°å‡ºè¿™ä¸‰è€…çš„åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±æ˜¯åŒä¸€ä¸ªå˜é‡çš„ä¸åŒåå­—ã€‚\n\n\næŒ‡é’ˆå˜é‡çš„åœ°å€å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘å¯¹è±¡çš„åœ°å€æ˜¯ä¸åŒçš„\n\nå¼•ç”¨çš„ç±»å‹å¿…é¡»å’Œå¼•ç”¨å®ä½“çš„ç±»å‹ç›¸åŒï¼Œä¸èƒ½ç”¨int&amp;å¼•ç”¨doubleç±»å‹\n\n\n1.2å¼•ç”¨çš„æƒé™é—®é¢˜â‘ constå¸¸é‡å¼•ç”¨å¯ä»¥å¼•ç”¨å¸¸é‡ï¼Œä½†æ˜¯å¿…é¡»åŠ constä¿®é¥°\n\nåŸºæœ¬çš„æ€è·¯å°±æ˜¯â€œæƒé™å¯ä»¥ç¼©å°ï¼Œä½†ä¸å¯ä»¥æ”¾å¤§â€ã€‚\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œaæ˜¯ä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„å˜é‡ï¼Œä½†æ˜¯const int&amp;d=a;ä¸­çš„dæ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œåªå¯è¯»å–açš„å†…å®¹ã€‚\neæ˜¯ä¸å¯ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥æ”¾å¤§æƒé™\n\nâ‘¡intå’Œdoubleç›¸äº’å¼•ç”¨åœ¨1.1ä¸­æœ‰æåˆ°ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥å¼•ç”¨doubleç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleï¼Œæ­¤æ—¶å¼•ç”¨å°±ä¸æ˜¯ç®€å•çš„ä¸€ä¸ªåˆ«åäº†\nå…ˆæ¥äº†è§£ä¸€ä¸‹æŠŠdoubleå¤åˆ¶ç»™intç±»å‹ï¼Œè¿™æ—¶å€™ä¼šäº§ç”Ÿâ€œéšå¼ç±»å‹è½¬æ¢â€ï¼Œhä¿å­˜çš„æ˜¯zçš„æ•´æ•°éƒ¨åˆ†\n\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾zçš„æ•´æ•°éƒ¨åˆ†ï¼Œç„¶åèµ‹å€¼ç»™h\n\nä¸´æ—¶å˜é‡å…·æœ‰â€œå¸¸æ€§â€ï¼Œå¯è¯»ä¸å¯æ”¹\n\nè€Œå½“æˆ‘ä»¬ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleæ—¶ï¼Œå®é™…ä¸Šå¼•ç”¨çš„æ˜¯ç¼–è¯‘å™¨äº§ç”Ÿçš„ä¸´æ—¶å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨const int&amp;æ¥å¼•ç”¨\nconst int&amp; i=z;//è¿™é‡Œçš„iæ˜¯ä¸´æ—¶å˜é‡çš„åˆ«å//åœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾dçš„æ•´æ•°éƒ¨åˆ†//içš„åœ°å€å’Œzä¸ç›¸åŒï¼Œä¸”ä¸´æ—¶å˜é‡ä¸ä¼šé”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå’ŒiåŒæ­¥//ç”Ÿæˆçš„è¿™ä¸ªä¸´æ—¶å˜é‡æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥içš„æœ¬è´¨æ˜¯å¼•ç”¨äº†ä¸€ä¸ªintç±»å‹cout &lt;&lt;&quot;i= &quot;&lt;&lt;i&lt;&lt;endl;cout &lt;&lt;&quot;&amp;i= &quot;&lt;&lt; &amp;i &lt;&lt;endl; cout &lt;&lt;&quot;&amp;z= &quot;&lt;&lt; &amp;z &lt;&lt;endl;//åœ¨c++ä¸­å‡½æ•°ä¸»è¦ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œåé¢ä¼šè¿›ä¸€æ­¥å­¦ä¹ \n\nä¸€ä¸ªéå¸¸ç›´è§‚çš„éªŒè¯æ–¹æ³•ï¼Œå°±æ˜¯æ‰“å°ä¸€ä¸‹ï¼Œç…ç…å®ƒä»¬çš„åœ°å€æ˜¯å¦ç›¸åŒã€‚å¯ä»¥çœ‹åˆ°ï¼Œiçš„å€¼å’Œhæ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„å°±æ˜¯é‚£ä¸ªå­˜æ”¾äº†æ•´æ•°éƒ¨åˆ†çš„ä¸´æ—¶å˜é‡ï¼Œè¿™ä¸ªä¸´æ—¶å˜é‡çš„åœ°å€å’Œzä¸åŒ\n\n1.3å¼•ç”¨çš„ä½¿ç”¨åœºæ™¯â‘ å‡½æ•°ä¼ å‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨å‡½æ•°ä¸­ä¿®æ”¹æŸä¸€ä¸ªmainä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå°±å¿…é¡»è¿›è¡Œä¼ å€è°ƒç”¨ã€‚è€Œåœ¨C++ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•ç”¨æ¥æ“ä½œ\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡å¼•ç”¨å®ç°äº†åœ¨å‡½æ•°ä¸­ä¿®æ”¹açš„å€¼\n\næ›´åŠ å……åˆ†çš„ä½“ç°ä¾¿æ˜¯Swapå‡½æ•°ï¼Œåœ¨Cè¯­è¨€ä¸­å¿…é¡»ä¸¤ä¸ªéƒ½ä¼ åœ°å€æ¥è°ƒç”¨\nåœ¨C++ä¸­ï¼Œé…åˆå‡½æ•°é‡è½½ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å†™å‡ºå¤šä¸ªäº¤æ¢å‡½æ•°\n\n\nç›´æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œäº¤æ¢æˆåŠŸï¼\n\n\nâ‘¡å‡½æ•°è¿”å›å€¼int&amp; Count()&#123;  int n=0;//ç°åœ¨æ²¡æœ‰åŠ staticï¼Œè¿”å›çš„å˜é‡nå¯èƒ½ä¼šè¦†ç›–  n++;  cout&lt;&lt;&quot;&amp;n:&quot;&lt;&lt;&amp;n&lt;&lt;endl;  return n;&#125;int main()&#123;  int&amp; ret = Count();  cout&lt;&lt; ret &lt;&lt;endl;  cout&lt;&lt;&quot;&amp;ret:&quot;&lt;&lt;&amp;ret&lt;&lt;endl;  cout&lt;&lt; ret &lt;&lt;endl;&#125;\n\nå½“æˆ‘ä»¬æŠŠnä½œä¸ºint&amp;ç±»å‹æ¥è¿”å›æ—¶ï¼Œretæ­¤æ—¶æ˜¯å¯¹nçš„å¼•ç”¨ã€‚ä½†æ˜¯å‡½æ•°ä¸­çš„å˜é‡nåœ¨å‡ºäº†å‡½æ•°åé”€æ¯äº†ï¼Œæ‰€ä»¥åœ¨mainå‡½æ•°ä¸­æ‰“å°retçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šæ‰“å°å‡ºéšæœºå€¼ï¼ˆè¿™ä¸ªè¦çœ‹ä»€ä¹ˆæ—¶å€™nçš„å†…å®¹ä¼šè¢«ç¼–è¯‘å™¨è¦†å†™ï¼‰\n\nè€Œå½“æˆ‘ä»¬å¸¦ä¸Šstaticåï¼Œå¤šæ¬¡æ‰“å°nçš„å€¼éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºæ­¤æ—¶nçš„ç©ºé—´å¹¶æ²¡æœ‰è¢«é”€æ¯\n\n\nå¦‚æœå‡½æ•°è¿”å›æ—¶ï¼Œå‡ºäº†å‡½æ•°ä½œç”¨åŸŸï¼Œå¦‚æœè¿”å›å¯¹è±¡è¿˜æœªè¿˜ç»™ç³»ç»Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¼•ç”¨è¿”å›\nå¦‚æœå·²ç»è¿˜ç»™ç³»ç»Ÿäº†ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ä¼ å€¼è¿”å›ï¼Œé¿å…å‡ºç°è®¿é—®éšæœºå€¼\n\n\nä¸‹é¢ç”¨ä¸€ä¸ªç®€å•çš„Addå‡½æ•°æ¥æ¼”ç¤ºä¸€ä¸‹ä¸Šé¢æåˆ°çš„ä¸¤ç§æƒ…å†µ\n\nå¦‚æœå»æ‰staticä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥è­¦å‘Šï¼Œè€Œä¸”æ‰“å°çš„å€¼ä¼šåœ¨ç¬¬äºŒæ¬¡coutè°ƒç”¨çš„æ—¶å€™è¢«è¦†å†™\n\nå½“Addå‡½æ•°çš„cå˜é‡åŠ äº†staticä¿®é¥°åï¼Œæ‰“å°çš„å€¼éƒ½æ˜¯ç¨³å®šçš„ï¼Œä¸ä¼šè¢«è¦†å†™ï¼ˆå› ä¸ºcçš„ç©ºé—´æ²¡æœ‰è¢«é”€æ¯ï¼‰\n\nâ‘¢ä¼˜åŒ–å‡½æ•°è°ƒç”¨æ—¶é—´åœ¨å‡½æ•°è¿”å›ä¼ å‚çš„æ—¶å€™ï¼Œå…¶å®æ˜¯å…ˆæŠŠè¿”å›å€¼å­˜æ”¾åˆ°å¯„å­˜å™¨ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ç»™mainå‡½æ•°çš„å˜é‡\n\nå½“è¿”å›å€¼å¾ˆå°ï¼ˆæŒ‡å ç”¨ç©ºé—´ï¼‰çš„æ—¶å€™ï¼Œä¼šç”¨å¯„å­˜å™¨å­˜æ”¾å®ƒçš„å€¼\nå½“è¿”å›å€¼å¾ˆå¤§çš„æ—¶å€™ï¼Œéƒ¨åˆ†ç¼–è¯‘å™¨ä¼šå…ˆåœ¨mainå‡½æ•°ä¸­é¢„å…ˆå¼€è¾Ÿæ ˆå¸§ç”¨æ¥å­˜æ”¾è¿”å›å€¼\n\n\nè€Œä½¿ç”¨å¼•ç”¨ä½œä¸ºè¿”å›å€¼çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç”¨å¯„å­˜å™¨æ¥æ¥æ”¶ä¸´æ—¶å˜é‡ï¼Œè¿™æ—¶å€™å°±ä¼˜åŒ–äº†å‡½æ•°è¿”å›çš„æ—¶é—´ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œç”¨å¼•ç”¨è¿”å›çš„æ—¶é—´æ¶ˆè€—å¾ˆå°ï¼\n\nå†æ¥è¯•è¯•æŠŠå¼•ç”¨ä½œä¸ºå‚æ•°ä¼ å‚çš„æ¶ˆè€—ï¼Œå’Œä¼ å€ã€ä¼ å€¼è¿›è¡Œå¯¹æ¯”ï¼Œä»£ç å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œç¨å¾®ä¿®æ”¹ä¸€ä¸‹æµ‹è¯•å‡½æ•°å°±è¡Œäº†\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¼ åœ°å€å’Œå¼•ç”¨ä½œä¸ºå‚æ•°çš„ä¼ å‚æ¶ˆè€—éƒ½æ˜¯å¾ˆå°çš„ã€‚å› ä¸ºä¼ å€¼çš„æ—¶å€™éœ€è¦æ‹·è´æ•°æ®ï¼\n\n\n1.4å¼•ç”¨å’ŒæŒ‡é’ˆçš„æ±‡ç¼–ä»£ç ç”¨ä¸‹é¢çš„ä»£ç æ¥æŸ¥çœ‹å¼•ç”¨å’ŒæŒ‡é’ˆçš„æ±‡ç¼–åŒºåˆ«\n#include &lt;stdio.h&gt;int main()&#123;\tint a = 10;\tint&amp; ra = a;\tra = 20;\tint* pa = &amp;a;\t*pa = 20;  \treturn 0;&#125;\n\nä½ å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‡é’ˆå’Œå¼•ç”¨çš„æ±‡ç¼–ä»£ç æ˜¯ç›¸åŒçš„ã€‚å› ä¸ºC++çš„å¼•ç”¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”¨æŒ‡é’ˆå®ç°çš„ï¼\n\nç”¨objdump -Sè¯­å¥ï¼ŒæŸ¥çœ‹Linuxç¯å¢ƒä¸‹çš„æ±‡ç¼–ğŸ‘‡\n\n1.5å¼•ç”¨å’ŒæŒ‡é’ˆçš„åŒºåˆ«\nå¼•ç”¨æ˜¯åˆ«åï¼›æŒ‡é’ˆæ˜¯æŒ‡å‘åœ°å€\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼›æŒ‡é’ˆæ— è¦æ±‚\nå¼•ç”¨çš„sizeofå¤§å°å’Œå¼•ç”¨å¯¹è±¡ç›¸åŒï¼›æŒ‡é’ˆæ— è®ºæŒ‡å‘çš„è°ï¼Œå¤§å°éƒ½æ˜¯4&#x2F;8\nå¼•ç”¨ä¸èƒ½ä¸ºNULLï¼›æŒ‡é’ˆå¯ä»¥ä¸ºNULL\nå¼•ç”¨++å³å¯¹è±¡æ•°å€¼+1ï¼›æŒ‡é’ˆ++æ˜¯æŒ‡å‘çš„åœ°å€å‘ååç§»\nå¼•ç”¨æ— å¤šçº§ï¼›æŒ‡é’ˆå­˜åœ¨äºŒçº§ã€ä¸‰çº§â€¦â€¦\nå¼•ç”¨æ¯”æŒ‡é’ˆä½¿ç”¨èµ·æ¥æ›´åŠ å®‰å…¨ï¼ˆä¸ä¼šå‡ºç°é‡æŒ‡é’ˆï¼‰\nå¼•ç”¨æ˜¯ç¼–è¯‘å™¨å¤„ç†çš„ï¼›æŒ‡é’ˆéœ€è¦æ‰‹åŠ¨è§£å¼•ç”¨\nâ€¦â€¦\n\n1.6 æ•°ç»„æŒ‡é’ˆå¼•ç”¨ç¬”è¯•çš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªçº é”™é¢˜ï¼Œæˆ‘æ„Ÿè§‰è¿™é‡Œæ˜¯é”™çš„ï¼Œä½†è¿˜æ˜¯æ²¡é€‰å‡ºæ¥ï¼›\nint arr[20];int (&amp;ref1)[20] = arr;// æ­£ç¡®çš„æ•°ç»„å¼•ç”¨int&amp; ref2[20] = arr;  // é”™è¯¯çš„å¼•ç”¨\n\n2.å†…è”å‡½æ•°2.1åŸºæœ¬å½¢å¼åœ¨å‡½æ•°åå‰ç”¨inlineä¿®é¥°çš„å‡½æ•°æ˜¯å†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨åœ¨å¤„ç†æ­¤ç±»å‡½æ•°çš„æ—¶å€™ï¼Œä¼šå°†å‡½æ•°åœ¨è°ƒç”¨å®ƒçš„åœ°æ–¹æ‰“å¼€ã€‚æ­¤æ—¶å†…è”å‡½æ•°å°±æ²¡æœ‰å‡½æ•°å‹æ ˆçš„å¼€é”€ï¼Œæé«˜äº†ç¨‹åºè¿è¡Œçš„æ•ˆç‡\n\nè¿™éƒ¨åˆ†å’ŒCè¯­è¨€å­¦ä¹ è¿‡çš„#defineç±»ä¼¼ï¼Œä½†defineæ˜¯ç›´æ¥æ›¿æ¢ï¼Œå†…è”å‡½æ•°ä¸æ˜¯\n\n#include &lt;stdio.h&gt;#include &lt;iostream&gt;using namespace std;#define ADD(a,b) ((a)+(b))inline int Add(int a,int b)&#123;  return a+b;&#125;int main ()&#123;  int sum=ADD(1+3,2+4);//4+6=10       printf(&quot;%d\\n&quot;, sum);   int ret = 0;  ret=Add(3,4);  return 0;&#125;\n\n2.2æŸ¥çœ‹é¢„å¤„ç†æ–‡ä»¶ä½¿ç”¨ä¸‹é¢çš„Linuxè¯­å¥å¯ä»¥æŠŠæºæ–‡ä»¶ç”Ÿæˆä¸ºé¢„å¤„ç†åçš„æ–‡ä»¶\n\nè¿™éƒ¨åˆ†å¯ä»¥çœ‹çœ‹æˆ‘ä¹‹å‰ç”¨æ ‘è“æ´¾æ“ä½œçš„åšå®¢å“¦ï¼ã€ä¼ é€é—¨ã€‘\n\ng++ -E test.cpp -o test.i\n\nå¯ä»¥çœ‹åˆ°defineè¢«æ›¿æ¢äº†ï¼Œä½†æ˜¯å†…è”å‡½æ•°å¹¶æ²¡æœ‰\n\n2.3æŸ¥çœ‹æ±‡ç¼–ä»£ç â‘ Linuxç¯å¢ƒè¿™æ—¶å€™æˆ‘ä»¬å…ˆç¼–è¯‘è¿™ä¸ªæ–‡ä»¶\ng++ test.cpp\n\nç„¶åä½¿ç”¨ä¸‹é¢çš„è¯­å¥æŸ¥çœ‹æ±‡ç¼–ä»£ç \nobjdump -S a.out\n\nç„¶åä½ å°±å‘ç°ï¼Œè¿™ä¸è¿˜æ˜¯æœ‰callå‡½æ•°è°ƒç”¨å˜›ï¼Ÿè¿™å“ªé‡Œæ²¡æœ‰è°ƒç”¨å‘¢ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™éœ€è¦è°ƒæ•´ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ“ä½œğŸ‘‰ã€å‚è€ƒåšå®¢ã€‘\ng++ -O2 test.cpp\n\nè¿™æ—¶å€™çš„æ±‡ç¼–ä»£ç å°±æ²¡æœ‰calläº†\n\nâ‘¡VS2019è¦æƒ³è°ƒæ•´VS2019çš„ä¼˜åŒ–ç­‰ä»·ï¼Œéœ€è¦åœ¨é¡¹ç›®å±æ€§ä¸­C/C++ -å¸¸è§„ä¸­ä¿®æ”¹è°ƒè¯•ä¿¡æ¯æ ¼å¼ä¸ºâ€œç¨‹åºæ•°æ®åº“â€\n\nç„¶ååœ¨ä¼˜åŒ–-å†…è”å‡½æ•°æ‰©å±•ä¿®æ”¹æˆåªé€‚ç”¨äºinline(/Ob1)\n\nç„¶åè°ƒè¯•ï¼Œå³é”®è½¬åˆ°åæ±‡ç¼–ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œno callğŸ•µï¸â€â™‚ï¸\n\n\n2.4å†…è”å‡½æ•°çš„ç‰¹æ€§defineæ²¡æœ‰ä¼ å‚æ£€æŸ¥ï¼Œä¸”ä¸èƒ½debug+å¯è¯»æ€§ä¸é«˜ï¼Œå†…è”å‡½æ•°è§£å†³äº†è¿™ä¸€ç¼ºç‚¹\n\nå†…è”å‡½æ•°æ˜¯ç”¨ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œçœå»å‡½æ•°è°ƒç”¨çš„å¼€é”€\nå‡½æ•°ä»£ç å¾ˆé•¿çš„æ—¶å€™ä¸é€‚åˆç”¨å†…è”å‡½æ•°ï¼ˆdefineåŒç†ï¼‰\nåœ¨ä»£ç è¡Œæ•°å¾ˆé•¿çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ¤æ–­æ˜¯å¦ä½¿ç”¨inlineã€‚å¦‚æœå‡½æ•°ä½“å†…æœ‰å¾ªç¯&#x2F;é€’å½’ç­‰ï¼Œç¼–è¯‘å™¨ä¼˜åŒ–çš„æ—¶å€™ä¼šå–æ¶ˆå†…è”\ninlineä¸å¯ä»¥å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼Œä¼šå¯¼è‡´é“¾æ¥é”™è¯¯\n\nå¯¹æœ€åä¸€ç‚¹å±•å¼€ä»‹ç»ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬æŠŠå†…è”å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸åŒçš„æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™æ‰¾ä¸åˆ°å‡½æ•°\n\nè¿™æ˜¯å› ä¸ºå†…è”å‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™å·²ç»å±•å¼€äº†ï¼Œå¯¹åº”çš„å‡½æ•°åœ°å€ä¹Ÿæ²¡äº†ï¼Œæ‰€ä»¥æ— æ³•æ­£å¸¸é“¾æ¥\n\nç»“è¯­å¼•ç”¨å’Œå†…è”å‡½æ•°çš„åšå®¢åˆ°è¿™å°±ç»“æŸå•¦ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå†èµ°å“¦ï¼\n\nç¬”è®°éš¾å…æœ‰é”™ï¼Œè¿˜è¯·å¤§ä½¬ä»¬æ— æƒ…æŒ‡å‡ºï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp"]},{"title":"ã€C++ã€‘æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–åˆ—è¡¨çš„æ€§èƒ½å·®è·","url":"/posts/2628258650/","content":"æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–åˆ—è¡¨çš„æ€§èƒ½å·®è·å¯¹æ¯”æµ‹è¯•\n\n\n1.è¯´æ˜åœ¨C++ç±»å’Œå¯¹è±¡ä¸­ï¼Œä½ å¯èƒ½å¬åˆ°è¿‡æ›´åŠ æ¨èç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥åˆå§‹åŒ–ç±»å†…æˆå‘˜ã€‚å¦‚æœç±»å†…æˆå‘˜æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™åªèƒ½åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨è‡ªå®šä¹‰ç±»å‹çš„æ„é€ å‡½æ•°ã€‚\nä½†åˆå§‹åŒ–åˆ—è¡¨å’Œåœ¨æ„é€ å‡½æ•°ä½“å†…ç›´æ¥èµ‹å€¼æœ‰æ— æ€§èƒ½å·®è·å‘¢ï¼Ÿä»Šå¤©å°±ç”¨ä¸€ä»½ç›¸å¯¹ç®€å•çš„ä»£ç æ¥æµ‹è¯•ä¸€ä¸‹\n2.æµ‹è¯•2.1 ä»£ç è¯´æ˜é¦–å…ˆæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ï¼Œå®ç°å¸¦ç¼ºçœå€¼çš„é»˜è®¤æ„é€ ï¼Œæ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½è¿™ä¸‰ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨å†…éƒ¨æ–°å¢æ‰“å°æ¥åŒºåˆ†ä¸åŒçš„å‡½æ•°\nstruct mytest &#123;public:    mytest(int a = -1)    &#123;        _a = a;        cout &lt;&lt; &quot;mytest() &quot; &lt;&lt; a &lt;&lt; endl;    &#125;    mytest(const mytest&amp; st) &#123;        _a = st._a;        cout &lt;&lt; &quot;mytest(copy) &quot; &lt;&lt; st._a &lt;&lt; endl;    &#125;    mytest&amp; operator=(const mytest&amp; st)    &#123;        _a = st._a;        cout &lt;&lt; &quot;mytest operator= &quot; &lt;&lt; st._a &lt;&lt; endl;        return *this;    &#125;private:    int _a;&#125;;\n\nå†åœ¨å¦å¤–ä¸€ä¸ªç±»ä¸­ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰ç±»å‹\nstruct myclass &#123;public:    myclass(const struct mytest&amp; st, int b)    &#123;        cout &lt;&lt; &quot;myclass() _b:&quot; &lt;&lt; _b &lt;&lt; endl;    &#125;    struct mytest _sa;    int _b;&#125;;\n\næ­¤æ—¶æ„é€ å‡½æ•°å°±æœ‰ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–è¿™ä¸ªè‡ªå®šä¹‰ç±»å‹\nmyclass(const struct mytest&amp; st, int b)       :_sa(st),       _b(b)   &#123;       cout &lt;&lt; &quot;myclass() _b:&quot; &lt;&lt; _b &lt;&lt; endl;   &#125;\n\nå¦å¤–ä¸€ç§æ˜¯åœ¨æ„é€ å‡½æ•°ä½“å†…é€šè¿‡èµ‹å€¼é‡è½½æ¥åˆå§‹åŒ–è¿™ä¸ªè‡ªå®šä¹‰ç±»å‹\nmyclass(const struct mytest&amp; st, int b)&#123;     _sa = st;     _b = b;    cout &lt;&lt; &quot;myclass() _b:&quot; &lt;&lt; _b &lt;&lt; endl;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„è‡ªå®šä¹‰ç±»å‹ä¼ å‚é‡‡ç”¨äº†å¼•ç”¨ä¼ å‚ï¼Œå¹¶ä¸ä¼šå› æ­¤äº§ç”Ÿé¢å¤–çš„æ‹·è´ï¼\nä¸»å‡½æ•°ä½“å¦‚ä¸‹ï¼Œä¸ºäº†åŒºåˆ†ç¬¬ä¸€ä¸ªmytestçš„æ„é€ å‡½æ•°ï¼Œæˆ‘åœ¨å…¶åæ–°å¢äº†ä¸€è¡Œè¾“å‡ºä½œä¸ºåˆ†å‰²\nint main()&#123;    mytest test_a(1);    cout &lt;&lt; &quot;------&quot; &lt;&lt; endl;    myclass test(test_a, 3);    return 0;&#125;\n\n2.2 æµ‹è¯•å…ˆæ¥çœ‹çœ‹ä½¿ç”¨èµ‹å€¼åˆå§‹åŒ–çš„æ–¹å¼ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æˆ‘ä»¬åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ä»€ä¹ˆéƒ½æ²¡æœ‰å†™ï¼Œä½†æ˜¯è¿™é‡Œä¾æ—§è°ƒç”¨äº†é»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆå› ä¸ºé»˜è®¤æ„é€ å‡½æ•°çš„ç¼ºçœå€¼ç»™çš„æ˜¯-1ï¼Œè¿™é‡Œèƒ½é€šè¿‡å‚æ•°åˆ¤æ–­å‡ºæ¥è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æ˜¾å¼è°ƒç”¨çš„æ„é€ ï¼‰\nè°ƒç”¨äº†é»˜è®¤æ„é€ åï¼Œåˆé€šè¿‡èµ‹å€¼é‡è½½æ¥åˆå§‹åŒ–äº†ä¸€é_saï¼Œç›¸å½“äºä¸¤æ¬¡åˆå§‹åŒ–\n\nä½†å¦‚æœè°ƒç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼Œåˆ™åªä¼šæœ‰ä¸€æ¬¡æ‹·è´æ„é€ ï¼Œé¿å…äº†é¢å¤–çš„é»˜è®¤æ„é€ è°ƒç”¨ï¼\n\nåœ¨linuxä¸‹ä¹Ÿæµ‹è¯•è¿‡äº†ï¼Œç»“æœå’ŒVS2019ç›¸åŒ\n3.ç»“è®ºç»“è®ºå°±å‡ºæ¥äº†ï¼šåˆå§‹åŒ–åˆ—è¡¨èƒ½èŠ‚çœä¸€æ¬¡é»˜è®¤æ„é€ çš„è°ƒç”¨ï¼Œä¼˜åŒ–æ€§èƒ½ï¼\n3.1 å®é™…åœºæ™¯åœ¨ä¸Šé¢çš„åœºæ™¯ä¸­ï¼Œæ€§èƒ½å·®è·å¯èƒ½å¹¶ä¸ä¼šç‰¹åˆ«å¤§ï¼Œä½†æ˜¯åœ¨ä¸‹é¢çš„åœºæ™¯ä¸­å¯èƒ½å°±ä¸ä¸€æ ·äº†\nstruct mytest &#123;public:    mytest(int sz = 1)    &#123;        _str = new char[sz];        _sz = sz;        cout &lt;&lt; &quot;mytest() &quot; &lt;&lt; sz &lt;&lt; endl;    &#125;    mytest(const mytest&amp; st) &#123;        delete _str;// éœ€è¦å…ˆé”€æ¯åŸè§†çš„æ•°æ®        _str = new char[st._sz]; // å†åˆ›å»ºä¸€ä¸ªæ–°çš„        _sz = st._sz;        //çœç•¥æ‹·è´æ•°æ®çš„ä»£ç         cout &lt;&lt; &quot;mytest(copy) &quot; &lt;&lt; st._sz &lt;&lt; endl;    &#125;    mytest&amp; operator=(const mytest&amp; st)    &#123;        delete _str;// éœ€è¦å…ˆé”€æ¯åŸè§†çš„æ•°æ®        _str = new char[st._sz]; // å†åˆ›å»ºä¸€ä¸ªæ–°çš„        //çœç•¥æ‹·è´æ•°æ®çš„ä»£ç         cout &lt;&lt; &quot;mytest&amp; operator= &quot; &lt;&lt; st._sz &lt;&lt; endl;        return *this;    &#125;private:    char* _str;    size_t _sz;&#125;;struct myclass &#123;public:    myclass(const struct mytest&amp; st, int b)        :_sa(st),        _b(b)    &#123;         //_sa = st;         //_b = b;        cout &lt;&lt; &quot;myclass() _b:&quot; &lt;&lt; _b &lt;&lt; endl;    &#125;    struct mytest _sa;    int _b;&#125;;\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œå› ä¸ºmytestè‡ªå®šä¹‰ç±»å‹çš„æ‹·è´æ„é€ æ¶‰åŠåˆ°äº†æ·±æ‹·è´ï¼Œæ­¤æ—¶å°±éœ€è¦å°†å·²æœ‰çš„ç©ºé—´ç»™é”€æ¯äº†ï¼Œå†newä¸€ç‰‡æ–°çš„ç©ºé—´å‡ºæ¥ï¼Œå†å°†æ•°æ®ç»™æ‹·è´è¿‡å»ã€‚\nç™½ç™½å¤šäº†ä¸€å±‚é»˜è®¤æ„é€ ä¸­çš„newç©ºé—´çš„+æ‹·è´æ„é€ ä¸­deleteåŸæœ‰ç©ºé—´çš„æ¶ˆè€—ï¼\nå¦‚æœç±»ä¸­éœ€è¦æ·±æ‹·è´çš„æˆå‘˜ä¸æ­¢ä¸€ä¸ªï¼Œé‚£æ€§èƒ½å·®è·å°±æ›´å¤§ï¼\næ‰€ä»¥åœ¨C++ä¸­ï¼Œä¸€å¾‹ä»¥åˆå§‹åŒ–åˆ—è¡¨ä¼˜å…ˆï¼\n\nè¿™é‡Œé¡ºå¸¦æä¸€å˜´åˆå§‹åŒ–åˆ—è¡¨çš„å°å‘ï¼Œä¹Ÿç®—æ˜¯å¤ä¹ ï¼›\nå½“ä½ ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥åˆå§‹åŒ–ç±»å†…æˆå‘˜çš„æ—¶å€™ï¼Œåˆå§‹åŒ–çš„é¡ºåºæ˜¯ç±»å†…æˆå‘˜å£°æ˜çš„é¡ºåºï¼Œè€Œä¸æ˜¯åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„é¡ºåºï¼è¿™ç‚¹éå¸¸é‡è¦ï¼Œå¦‚æœé¡ºåºä¸å¯¹ï¼Œå¯èƒ½ä¼šå‡ºç°ä½¿ç”¨æœªå®šä¹‰ï¼ˆè¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œæˆï¼‰çš„å‚æ•°çš„bugï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€C++ã€‘C++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ | è½¬è½½","url":"/posts/306129693/","content":"C++11ä¸­å±€éƒ¨staticå˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\n\n\nå‰è¨€å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨C++11æ ‡å‡†ä¸­ï¼Œè¦æ±‚å±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–å…·æœ‰çº¿ç¨‹å®‰å…¨æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹ç±»ï¼š\nclass Foo&#123;public:    static Foo *getInstance()    &#123;        static Foo s_instance;        return &amp;s_instance;    &#125;private:    Foo() &#123;&#125;&#125;;\n\nåœ¨C++æ ‡å‡†ä¸­ï¼Œæ˜¯è¿™æ ·æè¿°çš„ï¼ˆåœ¨æ ‡å‡†è‰æ¡ˆçš„6.7èŠ‚ä¸­ï¼‰ï¼š\n\nsuch a variable is initialized the first time control passes through its declaration; such a variable is considered initialized upon the completion of its initialization. If the initialization exits by throwing an exception, the initialization is not complete, so it will be tried again the next time control enters the declaration. If control enters the declaration concurrently while the variable is being initialized, the concurrent execution shall wait for completion of the initialization. If control re-enters the declaration recursively while the variable is being initialized, the behavior is undefined.\n\nåˆ†ææ ‡å‡†å…³äºå±€éƒ¨é™æ€å˜é‡åˆå§‹åŒ–ï¼Œæœ‰è¿™ä¹ˆå‡ ç‚¹è¦æ±‚ï¼š\n\nå˜é‡åœ¨ä»£ç ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å˜é‡å£°æ˜çš„åœ°æ–¹æ—¶åˆå§‹åŒ–ã€‚\nåˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸çš„è¯è§†ä¸ºæœªå®Œæˆåˆå§‹åŒ–ï¼Œæœªå®Œæˆåˆå§‹åŒ–çš„è¯ï¼Œéœ€è¦ä¸‹æ¬¡æœ‰ä»£ç æ‰§è¡Œåˆ°ç›¸åŒä½ç½®æ—¶å†æ¬¡åˆå§‹åŒ–ã€‚\nåœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œåˆ°éœ€è¦åˆå§‹åŒ–å˜é‡çš„åœ°æ–¹æ—¶ï¼Œå¦‚æœæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨åˆå§‹åŒ–è¯¥å˜é‡ï¼Œåˆ™é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°åˆå§‹åŒ–å®Œæˆä¸ºæ­¢ã€‚\nå¦‚æœåˆå§‹åŒ–è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å¯¹åˆå§‹åŒ–çš„é€’å½’è°ƒç”¨ï¼Œåˆ™è§†ä¸ºæœªå®šä¹‰è¡Œä¸ºã€‚\n\nå…³äºç¬¬4ç‚¹ï¼Œå¦‚æœä¸æ˜ç™½ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ä»£ç ï¼š\nclass Bar\n&#123;\npublic:\n    static Bar *getInstance()\n    &#123;\n        static Bar s_instance;\n        return &amp;s_instance;\n    &#125;\nprivate:\n    Bar()\n    &#123;\n        getInstance();\n    &#125;\n&#125;;\n\nGCCçš„å®ç°ä»¥GCC 7.3.0ç‰ˆæœ¬ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ¥åˆ†æGCCæ˜¯å¦‚ä½•å®ç°æ ‡å‡†çš„ã€‚\nFoo::getInstance()ä½¿ç”¨GCCç¼–è¯‘åï¼Œæˆ‘ä»¬ä½¿ç”¨gdbå°†æ–‡ç« å¼€å¤´çš„Foo::getInstance()åæ±‡ç¼–ï¼š\nDump of assembler code for function Foo::getInstance():\n   0x00005555555546ea &lt;+0&gt;:     push   %rbp\n   0x00005555555546eb &lt;+1&gt;:     mov    %rsp,%rbp\n=&gt; 0x00005555555546ee &lt;+4&gt;:     movzbl 0x20092b(%rip),%eax        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x00005555555546f5 &lt;+11&gt;:    test   %al,%al\n   0x00005555555546f7 &lt;+13&gt;:    sete   %al\n   0x00005555555546fa &lt;+16&gt;:    test   %al,%al\n   0x00005555555546fc &lt;+18&gt;:    je     0x55555555472b &lt;Foo::getInstance()+65&gt;\n   0x00005555555546fe &lt;+20&gt;:    lea    0x20091b(%rip),%rdi        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554705 &lt;+27&gt;:    callq  0x5555555545b0 &lt;__cxa_guard_acquire@plt&gt;\n   0x000055555555470a &lt;+32&gt;:    test   %eax,%eax\n   0x000055555555470c &lt;+34&gt;:    setne  %al\n   0x000055555555470f &lt;+37&gt;:    test   %al,%al\n   0x0000555555554711 &lt;+39&gt;:    je     0x55555555472b &lt;Foo::getInstance()+65&gt;\n   0x0000555555554713 &lt;+41&gt;:    lea    0x2008fe(%rip),%rdi        # 0x555555755018 &lt;_ZZN3Foo11getInstanceEvE10s_instance&gt;\n   0x000055555555471a &lt;+48&gt;:    callq  0x555555554734 &lt;Foo::Foo()&gt;\n   0x000055555555471f &lt;+53&gt;:    lea    0x2008fa(%rip),%rdi        # 0x555555755020 &lt;_ZGVZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554726 &lt;+60&gt;:    callq  0x5555555545a0 &lt;__cxa_guard_release@plt&gt;\n   0x000055555555472b &lt;+65&gt;:    lea    0x2008e6(%rip),%rax        # 0x555555755018 &lt;_ZZN3Foo11getInstanceEvE10s_instance&gt;\n   0x0000555555554732 &lt;+72&gt;:    pop    %rbp\n   0x0000555555554733 &lt;+73&gt;:    retq   \nEnd of assembler dump.\n\nåœ¨+4ã€+20ã€+53å‡ºç°çš„_ZGVZN3Foo11getInstanceEvE10s_instanceä½¿ç”¨c++filtåˆ†æä¸ºguard variable for Foo::getInstance()::s_instanceï¼Œè€Œ+41ã€+65ä½ç½®å‡ºç°çš„_ZZN3Foo11getInstanceEvE10s_instanceåˆ™ä¸ºFoo::getInstance()::s_instanceã€‚åè€…æ˜¯s_instanceè¿™ä¸ªå±€éƒ¨é™æ€å˜é‡ï¼Œå‰è€…ä»åå­—çœ‹å°±çŸ¥é“æ˜¯ä¸ªguardæ ‡å¿—å˜é‡ï¼Œç”¨æ¥æŒ‡ç¤ºå±€éƒ¨é™æ€å˜é‡çš„åˆå§‹åŒ–çŠ¶æ€ã€‚\n+4 ~ +18æµ‹è¯•guardå˜é‡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œå¦‚æœä¸º0ï¼Œä»£è¡¨s_instanceæœªåˆå§‹åŒ–ï¼Œè¿›å…¥+27ï¼›å¦åˆ™ä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œè¿›å…¥+65ã€‚\n+20 ï½ +27ä»¥guardå˜é‡åœ°å€ä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œ__cxa_guard_acquireå‡½æ•°ã€‚\n+32 ï½ +39æµ‹è¯•è¿”å›å€¼ï¼Œå¦‚æœä¸º0ï¼Œä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œè¿›å…¥+65ï¼›å¦åˆ™ä»£è¡¨s_instanceæœªåˆå§‹åŒ–ï¼Œè¿›å…¥+41ã€‚\n+41 ï½ +48åˆå§‹åŒ–s_instance\n+53 ï½ +60ä»¥guardå˜é‡åœ°å€ä½œä¸ºå‚æ•°ï¼Œæ‰§è¡Œ__cxa_guard_releaseå‡½æ•°ã€‚\n+65 ï½ +73è¿”å›s_instanceåœ°å€\n__cxa_guard_acquireæˆ‘ä»¬æ¥çœ‹çœ‹__cxa_guard_acquireè¿™ä¸ªå‡½æ•°å…·ä½“åšäº†ä»€ä¹ˆï¼Œè¯¥å‡½æ•°ä»£ç ä½äºgcc-7-7.3.0/gcc-7.3.0/libstdc++-v3/libsupc++/guard.ccã€‚ç”±äºè¿™ä¸ªå‡½æ•°é’ˆå¯¹ä¸åŒå¹³å°åšäº†ä¸åŒçš„å®ç°ï¼Œæœ‰äº›æˆ‘ä»¬ä¸éœ€è¦çš„ä»£ç ï¼Œä»¥æˆ‘æœºå™¨çš„è®¾ç½®ï¼Œæ”¯æŒçº¿ç¨‹å’Œfutexç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥åˆ é™¤äº†ä¸€äº›ä¸ç›¸å…³çš„ä»£ç ï¼š\nint __cxa_guard_acquire (__guard *g)&#123;    // If the target can reorder loads, we need to insert a read memory    // barrier so that accesses to the guarded variable happen after the    // guard test.    // 1    if (_GLIBCXX_GUARD_TEST_AND_ACQUIRE (g))        return 0;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    // 2    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        // 3        const int guard_bit = _GLIBCXX_GUARD_BIT;        const int pending_bit = _GLIBCXX_GUARD_PENDING_BIT;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        while (1)        &#123;            // 4            int expected(0);            if (__atomic_compare_exchange_n(gi, &amp;expected, pending_bit, false,                                            __ATOMIC_ACQ_REL,                                            __ATOMIC_ACQUIRE))            &#123;                // This thread should do the initialization.                return 1;            &#125;            // 5            if (expected == guard_bit)            &#123;                // Already initialized.                return 0;            &#125;            // 6            if (expected == pending_bit)            &#123;                // Use acquire here.                // 7                int newv = expected | waiting_bit;                // 8                if (!__atomic_compare_exchange_n(gi, &amp;expected, newv, false,                                                 __ATOMIC_ACQ_REL,                                                 __ATOMIC_ACQUIRE))                &#123;                    // 9                    if (expected == guard_bit)                    &#123;                        // Make a thread that failed to set the                        // waiting bit exit the function earlier,                        // if it detects that another thread has                        // successfully finished initialising.                        return 0;                    &#125;                    // 10                    if (expected == 0)                        continue;                &#125;                // 11                expected = newv;            &#125;            // 12            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAIT, expected, 0);        &#125;    &#125;    return acquire (g);&#125;\n\n\n\né¦–å…ˆæ£€æµ‹guardå˜é‡ï¼Œguardå˜é‡ç­‰äº1çš„è¯ï¼Œç›´æ¥è¿”å›0ï¼Œä»£è¡¨s_instanceå·²åˆå§‹åŒ–ï¼Œä¸éœ€è¦å†æ¬¡åˆå§‹åŒ–ã€‚\næ£€æµ‹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰å¤šçº¿ç¨‹çš„è¯ï¼Œä¹Ÿå°±æ²¡æœ‰å¿…è¦å»åšé¢å¤–å·¥ä½œæ¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚\nguard_bitè¡¨ç¤ºs_instanceå·²ç»åˆå§‹åŒ–æˆåŠŸï¼›pending_bitè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ï¼›waiting_bitè¡¨ç¤ºæœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨ç­‰å¾…s_instanceçš„åˆå§‹åŒ–ã€‚\nä½¿ç”¨ä¸€ä¸ªåŸå­æ“ä½œæ¥æ£€æµ‹guardå˜é‡æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸º0ï¼Œåˆ™ç”±å½“å‰çº¿ç¨‹åˆå§‹åŒ–s_instanceï¼ŒæŠŠpending_bitå†™å…¥guardå˜é‡ï¼Œè¿”å›1ã€‚å¦‚æœä¸ä¸º0ï¼Œåˆ™å°†guardå½“å‰å€¼å†™å…¥expectedã€‚\næ£€æµ‹expectedå€¼æ˜¯å¦ä¸ºguard_bitï¼Œå¦‚æœæ˜¯ï¼Œåˆ™s_instanceå·²åˆå§‹åŒ–å®Œæˆï¼Œä¸å†éœ€è¦åˆå§‹åŒ–ï¼Œè¿”å›0ã€‚\næ£€æµ‹expectedå€¼æ˜¯å¦ä¸ºpending_bitï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜s_instanceæ­£åœ¨åˆå§‹åŒ–ï¼Œä¸”æ²¡æœ‰å…¶ä»–çº¿ç¨‹ç­‰å¾…åˆå§‹åŒ–ã€‚\nå°†newvå˜é‡è®¾ç½®ä¸ºpending_bit | waiting_bitï¼Œè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚\nä½¿ç”¨ä¸€ä¸ªåŸå­æ“ä½œæ¥æ£€æµ‹guardå˜é‡æ˜¯å¦ä¸ºpending_bitï¼Œå¦‚æœä¸æ˜¯ï¼Œè¯´æ˜æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†guardå˜é‡ï¼Œéœ€è¦åšè¿›ä¸€æ­¥æ£€æµ‹ï¼›å¦‚æœæ˜¯ï¼Œè¯´æ˜æ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹guardå˜é‡ï¼Œåˆ™å°†pending_bit | waiting_bitå†™å…¥guardå˜é‡ã€‚\nå¦‚æœexpectedç­‰äºguard_bitï¼Œè¯´æ˜s_instanceè¢«åˆå§‹åŒ–æˆåŠŸï¼Œä¸éœ€è¦å†åˆå§‹åŒ–ï¼Œè¿”å›0ã€‚\nå¦‚æœexpectedç­‰äº0ï¼Œè¯´æ˜s_instanceåˆå§‹åŒ–å¤±è´¥ï¼Œå›åˆ°4é‡æ–°å¼€å§‹æ£€æµ‹ã€‚\nå¦‚æœåœ¨8ä¸­æ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¿®æ”¹è¿‡guardå˜é‡ï¼Œå°†expectedè®¾ç½®ä¸ºpending_bit | waiting_bitï¼Œè¡¨ç¤ºs_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹ï¼ˆä¹Ÿå°±æ˜¯å½“å‰çº¿ç¨‹ï¼‰æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚\nå¦‚æœåœ¨6å¤„æ²¡æœ‰è¿›å…¥ifåˆ†æ”¯ï¼Œè¯´æ˜expectedç­‰äºpending_bit | waiting_bitï¼Œå¦‚æœè¿›å…¥äº†ifåˆ†æ”¯ï¼Œç”±11å¯å¾—ï¼Œæ­¤æ—¶expectedä¹Ÿè¢«ä¿®æ”¹ä¸ºäº†pending_bit | waiting_bitã€‚æ€»ä¹‹ï¼Œæ­¤æ—¶s_instanceæ­£åœ¨åˆå§‹åŒ–ä¸”æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…åˆå§‹åŒ–ã€‚åˆ©ç”¨futexç³»ç»Ÿè°ƒç”¨ï¼Œå†æ¬¡æ£€æµ‹guardå˜é‡æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿäº†å˜åŒ–ï¼Œå›åˆ°4é‡æ–°å¼€å§‹æ£€æµ‹ï¼›å¦‚æœæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä»ç„¶ç­‰äºpending_bit | waiting_bitï¼Œåˆ™æŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚\n\næ€»ä¹‹ï¼Œ__cxa_guard_acquireè¦ä¹ˆè¿”å›0è¦ä¹ˆè¿”å›1ï¼Œç”¨æ¥æŒ‡ç¤ºs_instanceå·²åˆå§‹åŒ–æˆ–æœªåˆå§‹åŒ–ã€‚__cxa_guard_acquireå¯èƒ½ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œè¿™å‘ç”Ÿåœ¨s_instanceæ­£åœ¨åˆå§‹åŒ–çš„æ—¶å€™ã€‚\n__cxa_guard_releaseç”±äº__cxa_guard_acquireå¯èƒ½å¯¼è‡´å½“å‰çº¿ç¨‹æŒ‚èµ·ï¼Œå› æ­¤éœ€è¦åœ¨s_instanceåˆå§‹åŒ–å®Œæˆåä½¿ç”¨å°†__cxa_guard_releaseçº¿ç¨‹å”¤é†’ã€‚\nvoid __cxa_guard_release (__guard *g) throw ()&#123;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    // 1    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        const int guard_bit = _GLIBCXX_GUARD_BIT;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        // 2        int old = __atomic_exchange_n (gi, guard_bit, __ATOMIC_ACQ_REL);        // 3        if ((old &amp; waiting_bit) != 0)            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAKE, INT_MAX);        return;    &#125;    set_init_in_progress_flag(g, 0);    _GLIBCXX_GUARD_SET_AND_RELEASE (g);&#125;\n\n\n\næ£€æµ‹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒ\nä½¿ç”¨åŸå­æ“ä½œå°†guardå˜é‡ç½®ä¸ºguard_bitï¼ŒåŒæ—¶è·å–guardå˜é‡åŸå§‹å€¼ã€‚\nå¦‚æœguardå˜é‡åŸå§‹å€¼åŒ…å«waiting_bitï¼Œè¯´æ˜æœ‰çº¿ç¨‹æŒ‚èµ·ï¼ˆæˆ–å°†è¦è°ƒç”¨futexæ¬²ä½¿çº¿ç¨‹æŒ‚èµ·ï¼‰ï¼Œè°ƒç”¨futexå”¤é†’æŒ‚èµ·çš„è¿›ç¨‹ã€‚\n\n__cxa_guard_abortç”±äºs_instanceå¯èƒ½åˆå§‹åŒ–å¤±è´¥ï¼ˆæœ¬ä¾‹ä¸­å¹¶æœªä½“ç°ï¼‰ï¼Œå› æ­¤è¿˜æœ‰ä¸€ä¸ª__cxa_guard_abortå‡½æ•°ã€‚\nvoid __cxa_guard_abort (__guard *g) throw ()&#123;    // If __atomic_* and futex syscall are supported, don&#x27;t use any global    // mutex.    if (__gthread_active_p ())    &#123;        int *gi = (int *) (void *) g;        const int waiting_bit = _GLIBCXX_GUARD_WAITING_BIT;        int old = __atomic_exchange_n (gi, 0, __ATOMIC_ACQ_REL);        if ((old &amp; waiting_bit) != 0)            syscall (SYS_futex, gi, _GLIBCXX_FUTEX_WAKE, INT_MAX);        return;    &#125;    set_init_in_progress_flag(g, 0);&#125;\n\n\nä¸__cxa_guard_releaseåŸºæœ¬ä¸€è‡´ï¼Œä¸åŒçš„åœ°æ–¹åœ¨äºä¼šå°†guardå˜é‡ç½®0ã€‚\né€’å½’åˆå§‹åŒ–è°ƒç”¨ç”±äºåœ¨C++11æ ‡å‡†ä¸­ï¼Œåˆå§‹åŒ–å¦‚æœå‘ç”Ÿäº†é€’å½’æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼Œæ‰€ä»¥GCC 7.3.0é’ˆå¯¹æ˜¯å¦ä¸ºå¤šçº¿ç¨‹ç¯å¢ƒåšäº†ä¸åŒçš„å¤„ç†ã€‚å¦‚æœæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒï¼Œä¸è¿›è¡Œé¢å¤–å¤„ç†ï¼Œä¼šå‘ç”Ÿæ­»é”ï¼›å¦‚æœæ˜¯å•çº¿ç¨‹ç¯å¢ƒï¼Œåˆ™ä¼šæŠ›å¼‚å¸¸ã€‚\n// acquire() is a helper function used to acquire guard if thread support is// not compiled in or is compiled in but not enabled at run-time.static intacquire(__guard *g)&#123;    // Quit if the object is already initialized.    if (_GLIBCXX_GUARD_TEST(g))        return 0;    if (init_in_progress_flag(g))        throw_recursive_init_exception();    set_init_in_progress_flag(g, 1);    return 1;&#125;\n\n\næ€»ç»“çœ‹åˆ°äº†GCCå¦‚æ­¤å¤æ‚çš„å®ç°ï¼Œæˆ‘çš„ä¸ªäººæ„Ÿæƒ³æ˜¯è¿˜æ˜¯ä¸è¦è‡ªå·±é€ è½®å­æ¥ä¿è¯å•ä¾‹ç±»çš„çº¿ç¨‹å®‰å…¨äº†ï¼Œæƒ³è¦åšåˆ°å’ŒGCCä¸€æ ·çš„é«˜æ•ˆè¿˜æ˜¯æ¯”è¾ƒéš¾çš„ï¼Œåˆ©ç”¨C++11æ ‡å‡†çš„å¸¦æ¥çš„ä¾¿åˆ©å°±æŒºå¥½ã€‚\nåŸæ–‡ä½œè€…ï¼šimredåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/imred/article/details/89069750\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘thread|mutex|atomic|condition_variable","url":"/posts/1249427441/","content":"æœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹C++ä¸­çš„çº¿ç¨‹æ“ä½œ\n\n\n\næ‰€ç”¨ç¼–è¯‘å™¨ï¼švs2019\né˜…è¯»æœ¬æ–‡å‰ï¼Œå»ºè®®å…ˆäº†è§£çº¿ç¨‹çš„æ¦‚å¿µ ğŸ‘‰ çº¿ç¨‹æ¦‚å¿µ\n\n1.åŸºæœ¬ä»‹ç»åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œwindowsã€linuxã€macä¸Šï¼Œéƒ½ä¼šå¯¹å¤šçº¿ç¨‹æ“ä½œæä¾›è‡ªå·±çš„ç³»ç»Ÿè°ƒç”¨æ¥å£\nä¸ºä»€ä¹ˆC++éœ€è¦å°è£…ä¸€ä¸ªçº¿ç¨‹ï¼Ÿç›´æ¥ç”¨ç³»ç»Ÿçš„æ¥å£ä¸å¥½å—ï¼Ÿ\nåœ¨Linuxæ–‡ä»¶åšå®¢ä¸­ï¼Œå·²ç»è°ˆè¿‡äº†è¿™ä¸€ç‚¹ï¼šå¯¹äºC++ã€pythonã€javaè¿™äº›è·¨å¹³å°çš„è¯­è¨€æ¥è¯´ï¼Œå¦‚æœç›´æ¥ç”¨ç³»ç»Ÿçš„æ¥å£ï¼Œæ˜¯å¯ä»¥å®ç°å¯¹åº”æ“ä½œçš„ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ä¼šå¯¼è‡´ä»£ç åªèƒ½åœ¨æŸä¸€ä¸ªç‰¹å®šå¹³å°ï¼Œç”šè‡³æ˜¯æŸä¸€ä¸ªç‰ˆæœ¬çš„ç‰¹å®šæ“ä½œç³»ç»Ÿä¸Šæ‰èƒ½æ­£å¸¸è¿è¡Œï¼Œç›´æ¥ä¸è·¨å¹³å°çš„ç‰¹æ€§ç›¸è¿èƒŒã€‚\nè§£å†³çš„åŠæ³•å‘¢ï¼Œå°±æ˜¯å¯¹ç³»ç»Ÿçš„æ¥å£å¥—ä¸€ä¸ªè¯­è¨€çº§åˆ«çš„è½¯ä»¶å±‚ï¼Œå°è£…ç³»ç»Ÿçš„æ¥å£ã€‚å¹¶ç”¨æ¡ä»¶ç¼–è¯‘çš„æ–¹å¼æ¥è¯†åˆ«ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå·²è°ƒç”¨ä¸åŒæ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿæ¥å£ï¼Œä»¥å®ç°è·¨å¹³å°æ€§\n2.threadç±»\nhttps://legacy.cplusplus.com/reference/thread/thread/thread/\n\n2.1 æ„é€ &#x2F;èµ‹å€¼\n\nçº¿ç¨‹æ˜¯ä¸å…è®¸æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„ï¼Œä½†æ˜¯å…¶æ”¯æŒå³å€¼å¼•ç”¨çš„é‡è½½ï¼ˆä¸»è¦æ˜¯ä¸ºäº†åŒ¿åå¯¹è±¡æ„é€ ï¼‰ä¹Ÿæ”¯æŒç©ºæ„é€ \n\nå³å€¼ï¼šæ— æ³•è¿›è¡Œå–åœ°å€çš„å˜é‡\n\n2.2 get_idå¯¹äºçº¿ç¨‹è€Œè¨€ï¼Œæ¯”è¾ƒé‡è¦çš„å°±æ˜¯è¿™ä¸ªidå·äº†ï¼Œå…¶ç”¨äºæ ‡è¯†çº¿ç¨‹çš„å”¯ä¸€æ€§\n\n2.3 join&#x2F;detachåˆ›å»ºå¥½äº†ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œjoinç­‰å¾…æˆ–è€…detachåˆ†ç¦»\n\nå¦‚æœä¸»çº¿ç¨‹ä¸éœ€è¦è·å–å­è¿›ç¨‹æ‰§è¡Œçš„ç»“æœï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œdetach\nå¦‚æœéœ€è¦ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œjoin\n\nä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™ä¸¤ä¸ªåˆ†æ­§å‘¢ï¼Ÿæ˜¯å› ä¸ºjoinç­‰å¾…æ˜¯æœ‰ä¸€å®šæ¶ˆè€—çš„ã€‚å¦‚æœæˆ‘ä»¬ä¸å…³å¿ƒçº¿ç¨‹æ‰§è¡Œçš„è¿”å›å€¼ï¼Œåº”è¯¥é‡‡ç”¨detachå°½é‡å‡å°æ¶ˆè€—\n2.4 ä½¿ç”¨ç¤ºä¾‹ç›¸æ¯”äºLinuxç³»ç»Ÿæä¾›çš„pthreadæ¥å£ï¼ŒC++çš„ä½¿ç”¨æ–¹æ³•æ›´åŠ ç›´æ¥\n#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;void Add(int a, int b)&#123;\tcout &lt;&lt; a + b &lt;&lt; endl;;&#125;int main()&#123;\tthread t1(Add, 10, 20);\tthread t2(Add, 10, 30);\tt1.join();\tt2.join();\treturn 0;&#125;\n\n\n2.5 ç©ºæ„é€ å’Œç§»åŠ¨èµ‹å€¼å¦‚æœæˆ‘ä»¬åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªt1ï¼Œæ²¡æœ‰ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°æŒ‡å®šå…¶è¦è¿è¡Œçš„å‡½æ•°ï¼ˆå…¶å®æ˜¯è°ƒç”¨äº†ç©ºæ„é€ ï¼‰é‚£ä¹ˆè¦æ€ä¹ˆç»™è¿™ä¸ªçº¿ç¨‹æŒ‡å®šå‡½æ•°å‘¢ï¼Ÿ\nthread t3;//è°ƒç”¨äº†ç©ºæ„é€ \n\nåˆ«å¿˜äº†ï¼Œè™½ç„¶çº¿ç¨‹ä¸æ”¯æŒæ‹·è´æ„é€ ï¼Œä½†ä»–æœ‰ç§»åŠ¨èµ‹å€¼ï¼\nthread&amp; operator= (thread&amp;&amp; rhs) noexcept;\n\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯é‡‡ç”¨åŒ¿åå¯¹è±¡çš„æ–¹å¼ï¼Œèµ‹å€¼ç»™t3\nthread t3;t3 = thread(Add, 20, 30);t3.join();\n\n\n2.6 joinablebool joinable() const noexcept;\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯æ ‡è¯†ä¸€ä¸ªçº¿ç¨‹æ˜¯å¦è¿˜èƒ½è¿›è¡Œjoinï¼›ä¸‹é¢å‡ ç§æƒ…å†µï¼Œçº¿ç¨‹ä¸èƒ½è¢«join\n\nåªè°ƒç”¨äº†ç©ºæ„é€ ï¼ˆéƒ½æ²¡æœ‰æŒ‡å®šéœ€è¦è¿è¡Œçš„å‡½æ•°æ€ä¹ˆjoinç­‰å¾…ï¼Ÿï¼‰\nè¢«moveäº†ï¼ˆmoveä¼šå°†å¯¹è±¡å˜æˆå°†äº¡å€¼ï¼Œä¹Ÿå°±æ˜¯å³å€¼ï¼‰\nè¯¥å¯¹è±¡å·²ç»è°ƒç”¨è¿‡joinæˆ–è€…detach\n\nå¦‚æœæ˜¯åœ¨å¤šå±‚å‡½æ•°ä¸­è°ƒç”¨çš„çº¿ç¨‹ï¼Œé‚£å¯èƒ½joinä¹‹å‰å°±å¯ä»¥åˆ¤æ–­ä¸€ä¸‹å½“å‰å¯¹è±¡æ˜¯å¦è¿˜èƒ½join\n2.7 swap&#x2F;movevoid swap (thread&amp; x) noexcept;\n\nè¯¥æˆå‘˜å‡½æ•°çš„ä½œç”¨æ˜¯å°†å¦å¤–ä¸€ä¸ªçº¿ç¨‹åˆ‡æ¢ç»™å½“å‰çº¿ç¨‹\n\nå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªmoveç§»åŠ¨èµ‹å€¼\n\nè¢«ç§»åŠ¨åçš„çº¿ç¨‹t3ä¸å†joinableï¼Œä¸ä¼šè¿è¡Œï¼Œä¹Ÿä¸èƒ½è¢«joinæˆ–detach\n\nå¼ºè¡Œjoinä¼šæŠ¥é”™\n\n2.8 linuxä¸‹ç¼–è¯‘ç”±äºstdæ˜¯å¯¹ç³»ç»Ÿæ¥å£è¿›è¡Œçš„å°è£…\næ‰€ä»¥åœ¨linuxä¸‹ç¼–è¯‘å¸¦c++çº¿ç¨‹åº“çš„ä»£ç æ—¶ï¼Œéœ€è¦å¸¦ä¸Špthreadåº“çš„é€‰é¡¹\ng++ test.cpp -o test -std=c++11 -lpthread\n\n3.std::refè¿™é‡Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°refï¼Œè¦æƒ³çŸ¥é“å…¶ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯\n3.1 å¼•ç”¨ä¼ å‚#define _CRT_SECURE_NO_WARNINGS 1//#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;functional&gt;using namespace std;void Print(int n,int&amp; a)&#123;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; &quot; &lt;&lt;  a++ &lt;&lt; endl;\t&#125;&#125;int main()&#123;\tint count = 0;\tthread t1(Print,10, count);\tthread t2(Print,10, count);\tt1.join();\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; count &lt;&lt; endl;\treturn 0;&#125;\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘æƒ³è¾¾åˆ°çš„ç›®æ ‡æ˜¯è®©t1å’Œt2ä¸¤ä¸ªçº¿ç¨‹å¸®æˆ‘ä»¬å¯¹countè¿›è¡Œ++ï¼Œæœ€ç»ˆåœ¨mainé‡Œé¢æ‰“å°ç»“æœï¼›å¯ç¼–è¯‘ä¼šå‘ç°æŠ¥é”™ï¼Œä¸ç»™æˆ‘ä»¬è¿™æ ·å†™\n\nç›¸åŒçš„ä»£ç åœ¨linuxä¸‹ä¹Ÿå‡ºç°äº†ç¼–è¯‘é”™è¯¯ï¼Œæ‰€ç”¨g++ç‰ˆæœ¬å¦‚ä¸‹\ng++ (GCC) 11.2.1 20220127 (Red Hat 11.2.1-9)\n\n\nä¸ºäº†ç¡®è®¤å…·ä½“çš„æŠ¥é”™ä½ç½®ï¼Œæˆ‘ä»¬å…ˆæŠŠint&amp; açš„å¼•ç”¨å»æ‰ï¼Œå†çœ‹çœ‹æƒ…å†µ\n\nèƒ½çœ‹åˆ°ï¼Œåœ¨æ²¡æœ‰é‡‡ç”¨å¼•ç”¨ä¼ å‚çš„æƒ…å†µä¸‹ï¼Œå‡½æ•°ä¸­å¯¹countè¿›è¡Œçš„æ“ä½œå¹¶ä¸ä¼šåé¦ˆåˆ°mainä¸­ï¼Œå› ä¸ºé‡‡ç”¨çš„æ˜¯ä¼ å€¼ï¼Œä¼šè¿›è¡Œæ‹·è´ã€‚\n3.2 threadæ„é€ å‡½æ•°é‚£ä¸ºä»€ä¹ˆåŠ ä¸Šå¼•ç”¨ä¹‹åï¼Œä¼šæŠ¥é”™å‘¢ï¼Ÿè¿™å°±å’Œthreadçš„æ„é€ å‡½æ•°æœ‰å…³ç³»äº†\ntemplate &lt;class Fn, class... Args&gt;explicit thread (Fn&amp;&amp; fn, Args&amp;&amp;... args);\n\nå¦‚ä¸Šï¼Œå½“æˆ‘ä»¬æ„é€ ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡çš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯å¯å˜æ¨¡æ¿å‚æ•°ï¼›åœ¨æˆ‘çš„åšå®¢ä¸­å†™åˆ°è¿‡ï¼Œå¯å˜æ¨¡æ¿å‚æ•°éœ€è¦é‡‡ç”¨é€’å½’æ¥è¿›è¡Œå‚æ•°ç±»å‹çš„æ¨æµ‹ã€‚\nç”±äºåº•å±‚å®ç°çš„é—®é¢˜ï¼ˆä¹Ÿåªèƒ½æ˜¯è¿™ä¸ªåŸå› äº†ï¼‰åœ¨è¿›è¡Œæ„é€ çš„å®Œç¾è½¬å‘æ—¶ï¼Œæ‰€æœ‰çš„å‚æ•°éƒ½é‡‡ç”¨äº†æ‹·è´è€Œä¸æ˜¯å¼•ç”¨ä¼ å‚ã€‚\nè¿™ä¹Ÿå°±å¯¼è‡´æˆ‘ä»¬æ²¡æœ‰åŠæ³•å°†ä¸€ä¸ªå‚æ•°é€šè¿‡å¼•ç”¨ä¼ å…¥çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼\n\nç”¨æŒ‡é’ˆè‚¯å®šæ˜¯å¯ä»¥çš„ï¼Œå¯C++æå‡ºå¼•ç”¨è¿™ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯ä¸ºäº†é¿å…ä½¿ç”¨æŒ‡é’ˆ\n\n3.3 refå‡ºåœº\nhttps://legacy.cplusplus.com/reference/functional/ref/?kw=ref\n\näºæ˜¯ä¹ï¼Œstdåº“ä¸­å°±æ–°å¢äº†ä¸€ä¸ªåº“å‡½æ•°refï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜\n// refçš„ç”¨æ³•template &lt;class T&gt; reference_wrapper&lt;T&gt; ref (T&amp; elem) noexcept;template &lt;class T&gt; reference_wrapper&lt;T&gt; ref (reference_wrapper&lt;T&gt;&amp; x) noexcept;\ttemplate &lt;class T&gt; void ref (const T&amp;&amp;) = delete;\n\n\nConstructs an object of the appropriate reference_wrapper type to hold a reference to elem.\nIf the argument is itself a reference_wrapper (2), it creates a copy of x instead.\nThe function calls the proper reference_wrapper constructor.\n\nè¿™ä¸ªå‡½æ•°ä¼šæ„é€ ä¸€ä¸ªåˆé€‚çš„reference_wrapperå¯¹è±¡ï¼Œæ¥ç®¡ç†ä¸€ä¸ªå˜é‡çš„å¼•ç”¨ã€‚å¦‚æœå‚æ•°æœ¬èº«å°±æ˜¯reference_wrapperç±»å‹ï¼Œåˆ™ä¼šè°ƒç”¨reference_wrapperçš„æ‹·è´æ„é€ ã€‚\nè€Œrefå‡½æ•°ä¸èƒ½ä¼ é€’å³å€¼ï¼Œå…¶å³å€¼å¼•ç”¨çš„é‡è½½æ˜¯è¢«deleteçš„\n\n3.4 refä½¿ç”¨thread t1(Print,10, ref(count));thread t2(Print,10, ref(count));t1.join();t2.join();\n\nä½¿ç”¨äº†è¯¥åº“å‡½æ•°ä¹‹åï¼Œç¼–è¯‘ä¸å†æŠ¥é”™ï¼Œmainä¸­çš„å€¼ä¹ŸæˆåŠŸè¢«ä¿®æ”¹\n\né€šè¿‡refä¼ é€’çš„å‚æ•°ï¼Œä¹Ÿä¼šéµå®ˆå‡½æ•°æœ¬èº«çš„å˜é‡è§„åˆ™ã€‚å¦‚æœå‡½æ•°æœ¬èº«æ²¡æœ‰é‡‡ç”¨å¼•ç”¨ä¼ å‚ï¼Œåˆ™è¿˜æ˜¯è°ƒç”¨ä¼ å€¼å‚æ•°ï¼Œä¼šè¿›è¡Œæ‹·è´ï¼›\n\nä¸ºäº†é¿å…åç»­å‡ºç°è¿™ç§é—®é¢˜ï¼Œå¯ä»¥ç»™æ‰€æœ‰å¯¹çº¿ç¨‹çš„å·¦å€¼ä¼ å‚éƒ½å¸¦ä¸ŠrefğŸ˜æ¯”å¦‚ç»™ä¸¤ä¸ªçº¿ç¨‹å‡½æ•°ä¼ å…¥åŒä¸€æŠŠé”çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡‡ç”¨refè¿›è¡Œå¼•ç”¨ä¼ å‚\n4.æŒ‡ä»¤é‡æ’\nè°ˆè°ˆæŒ‡ä»¤é‡æ’ - çŸ¥ä¹\né¢è¯•å®˜: æœ‰äº†è§£è¿‡æŒ‡ä»¤é‡æ’å—ï¼Œä»€ä¹ˆæ˜¯happens-before\n\n4.1 ä»€ä¹ˆæ˜¯é‡æ’åºé¦–å…ˆï¼Œä»€ä¹ˆæ˜¯é‡æ’åºâ“è®¡ç®—æœºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼Œä¼šå¯¹ç¼–è¯‘å™¨å’Œç¼–è¯‘å™¨åšæŒ‡ä»¤é‡æ’ã€‚\nè¿™ä¹ˆåšä¸ºå•¥å¯ä»¥æé«˜æ€§èƒ½å‘¢â“\næˆ‘ä»¬çŸ¥é“è®¡ç®—æœºåœ¨æ‰§è¡Œçš„æ—¶å€™éƒ½æ˜¯ä¸€ä¸ªä¸ªæŒ‡ä»¤å»æ‰§è¡Œï¼Œä¸åŒçš„æŒ‡ä»¤å¯èƒ½æ“ä½œçš„ç¡¬ä»¶ä¸ä¸€æ ·ï¼Œåœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿä¸­æ–­ã€‚\næ‰“ä¸ªæ¯”æ–¹ï¼Œä¸¤ä¸ªæŒ‡ä»¤aå’Œbä»–ä»¬æ“ä½œçš„ä¸œè¥¿å„ä¸ç›¸åŒï¼Œå¦‚æœåŠ è½½açš„æ—¶å€™åœé¡¿äº†ï¼Œbå°±åŠ è½½ä¸åˆ°ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒä»¬äº’è¡¥å½±å“ï¼Œæˆ‘ä¹Ÿå¯ä»¥å…ˆåŠ è½½båœ¨åŠ è½½aï¼Œæ‰€ä»¥æŒ‡ä»¤é‡æ’æ˜¯å‡å°‘åœé¡¿çš„ä¸€ç§æ–¹æ³•ï¼Œè¿™æ ·å¤§å¤§æé«˜äº†æ•ˆç‡ã€‚\n4.1.1 æŒ‡ä»¤é‡æ’çš„æ–¹å¼æŒ‡ä»¤é‡æ’ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§\n\nç¼–è¯‘å™¨ä¼˜åŒ– é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåº\næŒ‡ä»¤å¹¶è¡Œé‡æ’ åˆ©ç”¨æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯å°†å¤šä¸ªæŒ‡ä»¤å¹¶è¡Œæ‰§è¡Œï¼Œå¦‚æœæŒ‡ä»¤ä¹‹å‰æ²¡æœ‰æ•°æ®ä¾èµ–ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåº\nå†…å­˜ç³»ç»Ÿé‡æ’ ç”±äºå¤„ç†ä½¿ç”¨ç¼“å­˜å’Œè¯»å†™ç¼“å†²åŒºï¼Œæ‰€ä»¥å®ƒä»¬æ˜¯ä¹±åºçš„\n\næŒ‡ä»¤é‡æ’å¯ä»¥ä¿è¯ä¸²è¡Œè¯­ä¹‰ä¸€è‡´ï¼Œä½†æ˜¯æ²¡æœ‰ä¹‰åŠ¡ä¿è¯å¤šçº¿ç¨‹é—´çš„è¯­ä¹‰ä¹Ÿä¸€è‡´**ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹ï¼ŒæŒ‡ä»¤é‡æ’åºå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜\n4.2 å®é™…åœºæ™¯ä»¥æ‡’æ±‰çš„å•ä¾‹æ¨¡å¼ä¸ºä¾‹\n// è·å–å•ä¾‹å¯¹è±¡static InfoMgr* GetInstance()&#123;    if (_sp == nullptr)//ç¬¬ä¸€æ¬¡æ£€æµ‹ä¿è¯å•ä¾‹    &#123;        unique_lock&lt;mutex&gt; lock(_mtx);        if (_sp == nullptr)//ç¬¬äºŒæ¬¡æ£€æµ‹ä¿è¯çº¿ç¨‹å®‰å…¨        &#123;            _sp = new InfoMgr;        &#125;    &#125;    return _sp;&#125;\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œnewä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰§è¡Œçš„é¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„\noperator newæ„é€ å¯¹è±¡èµ‹å€¼ç»™_sp\n\nä½†ç¼–è¯‘å™¨å¦‚æœè¿›è¡Œäº†æŒ‡ä»¤é‡æ’ï¼Œå¯èƒ½å°±ä¼šå˜æˆè¿™æ ·\noperator newèµ‹å€¼ç»™_spæ„é€ å¯¹è±¡\n\nå¦‚æœä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°ç¬¬äºŒæ­¥èµ‹å€¼ç»™_spçš„æ—¶å€™ï¼Œå› ä¸ºæ—¶é—´ç‰‡åˆ°äº†è¢«åˆ‡æ¢èµ°äº†ï¼›å…¶ä»–çº¿ç¨‹æ¥è·å–å•ä¾‹ï¼Œå°±ä¼šå¯¼è‡´_spå˜é‡æ˜¯ä¸€ä¸ªå·²ç»è¢«èµ‹å€¼äº†ï¼Œä½†æ˜¯å…¶æŒ‡å‘çš„æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„ç©ºå¯¹è±¡ï¼Œè¿™æ˜¯é”™è¯¯çš„ï¼\n4.3 å¯è¡Œçš„è§£å†³åŠæ³•ï¼šå†…å­˜æ …æ æ‰€è°“å†…å­˜æ …æ ï¼Œæ˜¯ç³»ç»Ÿæä¾›çš„çš„æ¥å£ï¼Œç”¨äºç¦æ­¢cpuå¯¹æŒ‡ä»¤çš„ä¼˜åŒ–ï¼›\n\nhttps://blog.csdn.net/qq_16498553/article/details/128030833\n\nä½†å†…å­˜æ ˆæ æ˜¯ç³»ç»Ÿæ¥å£ï¼Œæ²¡æœ‰è·¨å¹³å°æ€§ï¼›è¿™é‡Œåªåšäº†è§£ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªé—®é¢˜å³å¯ï¼\n\nåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒ4.2ä¸­æåˆ°çš„é—®é¢˜ï¼Œå› ä¸ºæŒ‡ä»¤ä¼˜åŒ–æ˜¯æœ‰ä¸¥æ ¼è§„åˆ™çš„ï¼Œä¸ä¼šå¯¹èµ‹å€¼å’Œæ„é€ è¿™ç±»æŒ‡ä»¤è¿›è¡Œèƒ¡ä¹±ä¼˜åŒ–ï¼ˆå› ä¸ºè¿™æ ·ä¼˜åŒ–å¹¶ä¸ä¼šæœ‰æ•ˆç‡æå‡å•Šï¼‰\nä½†è¿™ä¹Ÿéœ€è¦çœ‹å…·ä½“å¹³å°çš„åº•å±‚å®ç°äº†ï¼\n5.è·å–çº¿ç¨‹è¿”å›å€¼5.1 è¾“å‡ºå‹å‚æ•°åœ¨Cè¯­è¨€ä¸­ï¼Œæƒ³è·å–çº¿ç¨‹è¿”å›å€¼ï¼Œéœ€è¦ä½¿ç”¨è¾“å‡ºå‹å‚æ•°ï¼ˆC++å¯ä»¥ç”¨å¼•ç”¨ä¼ å€¼ï¼‰\nint Add(int a, int b,int&amp; out)&#123;\tout = a + b;\treturn out;&#125;void test2()&#123;\tint ret = 0;\tthread t2(Add, 10, 39, ref(ret));\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n5.2 lambdaåœ¨C++ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œæ¥åœ¨mainä¸­è·å–çº¿ç¨‹çš„è¿”å›å€¼\nint Add(int a, int b)&#123;\treturn a + b;&#125;void test2()&#123;\tint ret = 0;\tthread t1([&amp;ret]() &#123; ret = Add(10, 29); &#125;);\tt1.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n6.å‡½æ•°é‡è½½é—®é¢˜åœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å…·æœ‰é‡è½½ï¼Œçº¿ç¨‹æ˜¯ä¸æ”¯æŒçš„ï¼›\nå…·ä½“çš„åŸå› å˜›ï¼Œæˆ‘çŒœå’Œçº¿ç¨‹æ„é€ çš„å¯å˜æ¨¡æ¿å‚æ•°æœ‰å…³ç³»ã€‚\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œè§£å†³åŠæ³•ï¼Œæ˜¯ç»™ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæˆ–è€…fuctionalå¯¹è±¡ï¼Œæ‰‹åŠ¨æŒ‡å®šä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå‡½æ•°ã€‚\nå½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªè§£å†³åŠæ³•ï¼šçº¿ç¨‹è°ƒç”¨çš„å‡½æ•°ä¸è¦æœ‰é‡è½½ğŸ˜‚\nint Add(int a, int b,int&amp; out)&#123;\tout = a + b;\treturn out;&#125;int Add(int a, int b)&#123;\tint tmp = a + b;\tcout &lt;&lt; tmp &lt;&lt; endl;;\treturn tmp;&#125;void test2()&#123;\tint ret = 0;\t// ä½¿ç”¨å‡½æ•°æŒ‡é’ˆæŒ‡å®šå¯¹åº”çš„å‡½æ•°\tthread t2(static_cast&lt;int(*)(int a, int b, int&amp; out)&gt;(Add), 10, 39, ref(ret));\tt2.join();\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; ret &lt;&lt; endl;&#125;\n\n\n7.this_threadstdåº“ä¸­è¿˜ç”¨å‘½åç©ºé—´å¯¹çº¿ç¨‹çš„ä¸€äº›æ“ä½œè¿›è¡Œäº†å°è£…\n\n\nget_id è·å–çº¿ç¨‹idå·ï¼ˆå…¶å®çº¿ç¨‹ç±»é‡Œé¢å·²ç»æœ‰è¿™ä¸ªä¸œä¸œäº†ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿å‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ï¼Œåˆå¤šå¼€äº†ä¸€ä¸ªå‡½æ•°ï¼‰\nyield æ”¾å¼ƒè‡ªå·±çš„æ—¶é—´ç‰‡\nsleep_until ä¼‘çœ åˆ°ä¸€ä¸ªæ—¶é—´ç‚¹ï¼ˆæ¯”å¦‚ç¡åˆ°æ˜å¤©æ—©å…«ï¼‰\nsleep_for ä¼‘çœ ä¸€å®šæ—¶é—´ï¼ˆç¡2åˆ†é’Ÿï¼‰\n\nä¸‹é¢æ¥å¯¹åé¢ä¸‰ä¸ªå‡½æ•°åšä¸€ç‚¹è§£é‡Šï¼ˆç¬¬ä¸€ä¸ªå°±ä¸è§£é‡Šäº†å“ˆï¼‰\n7.1 yieldyieldçš„ä½œç”¨æ˜¯è®©å‡ºå½“å‰çº¿ç¨‹çš„æ—¶é—´ç‰‡ï¼›\næˆ‘ä»¬çŸ¥é“æ¯ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œæ—¶é—´ç‰‡åˆ°äº†ï¼Œå°±ä¼šè¿›è¡Œçº¿ç¨‹çš„åˆ‡æ¢ï¼›\nä»¥ä¸‹é¢çš„åœºæ™¯ä¸ºä¾‹\nvolatile bool ready = false;void count1m(int id) &#123;\t// å¦‚æœmainæ²¡æœ‰è®¾ç½®readyä¿¡å·ï¼Œçº¿ç¨‹ä¼šä¸€ç›´è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œä¸ä¼šè¿è¡Œ\twhile (!ready) \t&#123;            \t\tthis_thread::yield();\t&#125;\t// å¼€å§‹è¿è¡Œï¼Œ++æ•°æ®\tvolatile int i = 0;\tfor (i=0; i &lt; 10000000; i++) \t&#123; \t\t; // å¾ªç¯ä½“å•¥éƒ½ä¸å¹²\t&#125;\tcout &lt;&lt; id;&#125;void test4()&#123;\tthread threads[10];\tcout &lt;&lt; &quot;åˆ›å»º10ä¸ªçº¿ç¨‹ è®¡æ•°\\n&quot;;\tfor (int i = 0; i &lt; 10; ++i) \t&#123;\t\tthreads[i] = thread(count1m, i);\t&#125;\tcout &lt;&lt; &quot;åˆ›å»º10ä¸ªçº¿ç¨‹ å®Œæ¯•\\n&quot;;\tready = true;//è®¾ç½®çŠ¶æ€ï¼Œè®©çº¿ç¨‹å¼€å§‹è¿è¡Œ\tcout &lt;&lt; &quot;main set ture: &quot; &lt;&lt; ready &lt;&lt; &quot;\\n&quot;;\tfor (auto&amp; th : threads) \t&#123;\t\tth.join();\t&#125;\tcout &lt;&lt; &quot;\\nmain join æˆåŠŸ&quot; &lt;&lt; &quot;\\n&quot;;&#125;\n\næ‰§è¡Œç»“æœ\nåˆ›å»º10ä¸ªçº¿ç¨‹ è®¡æ•°åˆ›å»º10ä¸ªçº¿ç¨‹ å®Œæ¯•main set ture: 13746089215main join æˆåŠŸ\n\nåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹è¢«è®¾ç½®äº†taskåï¼Œéƒ½ä¼šå…ˆè¿›å…¥ä¸€ä¸ªwhileå¾ªç¯ï¼Œç­‰å¾…ä¸»çº¿ç¨‹è¿›è¡Œreadyçš„è®¾ç½®\nwhile (!ready) &#123;            \t;&#125;\n\næ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨whileå¾ªç¯ä¸­è¿›è¡Œyieldè®©çº¿ç¨‹è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ã€‚å¦åˆ™è¿™ä¸ªçº¿ç¨‹ä¼šä¸€ç›´ç–¯ç‹‚è®¿é—®readyï¼Œå¯¼è‡´cpuå ç”¨æé«˜ã€‚\n// å¦‚æœmainæ²¡æœ‰è®¾ç½®readyä¿¡å·ï¼Œçº¿ç¨‹ä¼šä¸€ç›´è®©å‡ºè‡ªå·±çš„æ—¶é—´ç‰‡ï¼Œä¸ä¼šè¿è¡Œwhile (!ready) &#123;            \tthis_thread::yield();&#125;\n\nåœ¨è¿™ç§è½®è¯¢æ£€æµ‹çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨yieldèƒ½é¿å…æŸä¸€ä¸ªçº¿ç¨‹é•¿æ—¶é—´å ç”¨æ‰§è¡Œæµï¼Œè§£å†³äº†å…¶ä»–çº¿ç¨‹çš„é¥¥é¥¿é—®é¢˜ã€‚\n7.2 sleep_untilç”¨cplusplusçš„ç¤ºä¾‹ä»£ç æ¥å­¦ä¹ ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œæ¶‰åŠåˆ°äº†å¤šä¸ªåº“å‡½æ•°ï¼Œè¯¦è§æ³¨é‡Š\n#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;chrono&gt;  //std::chrono#include &lt;iomanip&gt; //std::put_time#include &lt;ctime&gt;   //std::time_t, std::tm, std::localtime, std::mktimeusing namespace std;// ç›´æ¥æŠŠmainå½“ä½œä¸€ä¸ªçº¿ç¨‹void test5()&#123;\ttime_t tt = chrono::system_clock::to_time_t(chrono::system_clock::now()); // è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³\tstruct tm* ptm = localtime(&amp;tt); // è®¾ç½®ä¸€ä¸ªtmç»“æ„ä½“ï¼Œä»å½“å‰æ—¶é—´æˆ³åˆ›å»º\tcout &lt;&lt; &quot;Current time: &quot; &lt;&lt; put_time(ptm, &quot;%X&quot;) &lt;&lt; &#x27;\\n&#x27;; // æ‰“å°å½“å‰æ—¶é—´\tcout &lt;&lt; &quot;Waiting for the next minute to begin...\\n&quot;;\t(ptm-&gt;tm_min)++; // è®¾ç½®ptmçš„minä¸ºä¸‹ä¸€åˆ†é’Ÿ\tptm-&gt;tm_sec = 0; // ä¸‹ä¸€åˆ†é’Ÿçš„ç¬¬0s\tthis_thread::sleep_until(chrono::system_clock::from_time_t(mktime(ptm))); // ç­‰å¾…ä¸‹ä¸€åˆ†é’Ÿå¼€å§‹è¿è¡Œ\tcout &lt;&lt; put_time(ptm, &quot;%X&quot;) &lt;&lt; &quot; reached!\\n&quot;; // å†æ¬¡æ‰“å°å½“å‰æ—¶é—´&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¼šç­‰åˆ°ä¸‹ä¸€åˆ†é’Ÿçš„ç¬¬0sç»§ç»­æ‰§è¡Œ\nCurrent time: 15:13:40Waiting for the next minute to begin...15:14:00 reached!\n\n7.3 sleep_forè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å’Œwindowsã€linuxä¸‹éƒ½æœ‰çš„sleepå‡½æ•°ä¸€æ ·ï¼Œæ˜¯ç¡æŒ‡å®šçš„æ—¶é—´\néœ€è¦ç”¨stdä¸­çš„chronoæ¨¡å—æ¥æŒ‡å®šè¿è¡Œçš„æ—¶é—´ï¼Œæ”¯æŒä»å°æ—¶ä¸€ç›´åˆ°çº³ç§’\n\nç¤ºä¾‹å¦‚ä¸‹\nvoid test6()&#123;\ttime_t now;\ttime(&amp;now);//è·å–å½“å‰æ—¶é—´æˆ³\tcout &lt;&lt; now &lt;&lt; endl;\tthis_thread::sleep_for(chrono::seconds(30));//ç¡30s\ttime(&amp;now);//è·å–å½“å‰æ—¶é—´æˆ³\tcout &lt;&lt; now &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿›ç¨‹ç¡®å®ä¼‘çœ äº†30s\n\n8.mutexæœ‰äº†çº¿ç¨‹ï¼Œé‚£è‚¯å®šç¦»ä¸å¼€é”ï¼›å…³äºçº¿ç¨‹åŠ é”çš„é—®é¢˜ï¼Œè¯¦è§æˆ‘çš„linuxåšå®¢\nè¿™é‡Œåªå¯¹C++ä¸­é”çš„åªç”¨æ–¹æ³•åšä¸€å®šæ¼”ç¤º\n8.1 æ„é€ \né”çš„æ„é€ ç›¸å¯¹è¾ƒç®€å•ï¼Œåªæœ‰ä¸€ä¸ªæ— å‚çš„æ„é€ ï¼Œå…¶ä¸æ”¯æŒæ‹·è´æ„é€ ï¼ˆæ¯”å¦‚å‡½æ•°ä¼ å‚ä¸­ï¼Œä¸€ä¸ªé”è¢«æ‹·è´äº†ï¼Œå°±å¤±å»äº†æ„ä¹‰ï¼‰\n8.2 æˆå‘˜å‡½æ•°å…¶ä½™æˆå‘˜å°±æ˜¯ä¸€ä¸ªé”çš„åŸºæœ¬æ¥å£ï¼Œå¯¹åº”çš„ä¹Ÿæ˜¯pthread_mutexä¸­çš„å‡ ä¸ªæ¥å£\n\nlock åŠ é”ï¼Œä¸èƒ½ç”³è¯·é”åˆ™é˜»å¡ç­‰å¾…\ntry_lock æµ‹è¯•æ˜¯å¦èƒ½ç”³è¯·é”ï¼Œä¸èƒ½ç”³è¯·åˆ™return\nunlock è§£é”\n\n\n8.3 åœºæ™¯æ‰€è°“åŠ é”ï¼Œä¿æŠ¤çš„å°±æ˜¯ä¸´ç•Œèµ„æºï¼›æ¯”å¦‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œå…¨å±€å˜é‡count1å°±æ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æºï¼Œå…¶èƒ½å¤Ÿè¢«å¤šä¸ªæ‰§è¡Œæµè®¿é—®ã€‚\næ³¨æ„ï¼šå¦‚æœä½ å±•å¼€äº†stdå‘½åç©ºé—´ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªcountå‡½æ•°ï¼Œä¼šå’Œä½ è‡ªå·±å®šä¹‰çš„å…¨å±€countå˜é‡å†²çªã€‚åˆšå¼€å§‹æˆ‘å°±å®šä¹‰äº†countï¼Œå‘ç°æŠ¥é”™å˜é‡ä¸æ˜ç¡®ã€‚\n#define TOP 100volatile int count1 = 0;void func()&#123;\twhile(1)\t&#123;\t\tif (count1 == TOP)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1++ &lt;&lt; endl;\t\tthis_thread::sleep_for(chrono::milliseconds(10));\t&#125;\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1 &lt;&lt; endl;&#125;void test7()&#123;\tthread threading[10];\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tthreading[i] = thread(func);\t&#125;\tfor (int i = 0; i &lt; 10; i++)\t&#123;\t\tthreading[i].join();\t&#125;\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; count1 &lt;&lt; endl;\tthis_thread::sleep_for(chrono::seconds(2));&#125;\n\næµ‹è¯•çš„æ—¶å€™ï¼Œå°±èƒ½çœ‹åˆ°ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„å†²çªç»“æœã€‚31752çº¿ç¨‹å·²ç»++åˆ°100äº†ï¼Œç»“æœå®ƒåŠªåŠ›çš„ç»“æœè¢«å…¶ä»–ä¸¤ä¸ªçº¿ç¨‹ç›´æ¥å¤å†™ï¼›\nå½“ç„¶ï¼Œè¿™é‡Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ˜¾ç¤ºå™¨ä¹±åºæ‰“å°çš„ç»“æœã€‚è¦çŸ¥é“ï¼Œæ˜¾ç¤ºå™¨ä¹Ÿæ˜¯ä¸€ä¸ªä¸´ç•Œèµ„æº\n\nmutex mtx;void func()&#123;\twhile(1)\t&#123;\t\t\t\tif (count1 == TOP)\t\t&#123;\t\t\tbreak;\t\t&#125;\t\t// åŠ é”çš„ç²’åº¦è¦ä½\t\tmtx.lock();\t\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1++ &lt;&lt; endl;\t\tmtx.unlock();\t\tthis_thread::sleep_for(chrono::milliseconds(10));\t&#125;\tcout &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; count1 &lt;&lt; endl;&#125;\n\nç»™è®¿é—®countçš„å‡½æ•°æ·»åŠ ä¸Šé”ï¼Œå°±èƒ½é¿å…æ‰ä¸Šé¢å‡ºç°çš„é—®é¢˜\n\n9.CASåŸå­æ“ä½œåœ¨ç³»ç»Ÿä¸­ï¼Œæä¾›äº†ä¸€äº›æŒ‡ä»¤ï¼Œæ¥å®ç°åŸå­æ“ä½œï¼\n9.1 åŸç†Compare And Setï¼ˆæˆ–Compare And Swapï¼‰ï¼Œç®€ç§°CASã€‚å…¶æ˜¯è§£å†³å¤šçº¿ç¨‹å¹¶è¡Œæƒ…å†µä¸‹ä½¿ç”¨é”é€ æˆæ€§èƒ½æŸè€—çš„ä¸€ç§æœºåˆ¶ï¼Œé‡‡ç”¨è¿™ç§æ— é”çš„åŸå­æ“ä½œå¯ä»¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œé¿å…åŠ é”çš„ç¬¨é‡æ€§ã€‚\nCASæ“ä½œåŒ…å«ä¸‰ä¸ªæ“ä½œæ•°ï¼šå†…å­˜ä½ç½®ï¼ˆVï¼‰ã€é¢„æœŸåŸå€¼ï¼ˆAï¼‰ã€æ–°å€¼(B)\nå…·ä½“æ“ä½œæµç¨‹è¯·çœ‹ä¸‹å›¾ï¼š\n\nå¦‚æœä¸Šé¢çš„å›¾çœ‹ä¸æ‡‚ï¼Œè¿˜å¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªå›¾\n\næ–‡å­—æè¿°å¦‚ä¸‹ï¼š\n\nå¦‚æœå†…å­˜ä½ç½®çš„å€¼ï¼ˆVï¼‰ä¸é¢„æœŸåŸå€¼ï¼ˆAï¼‰ç›¸åŒï¼Œå¤„ç†å™¨ä¼šå°†è¯¥ä½ç½®çš„å€¼æ›´æ–°ä¸ºæ–°å€¼ï¼ˆBï¼‰ CAS æ“ä½œæˆåŠŸï¼\nå¦åˆ™ï¼Œå¤„ç†å™¨ä¸åšä»»ä½•æ›´æ”¹ï¼Œåªéœ€è¦å°†å½“å‰ä½ç½®çš„å€¼è¿›è¡Œè¿”å›å³å¯\n\nCASæ˜¯å®ç°è‡ªæ—‹é”çš„åŸºç¡€ï¼ŒCAS åˆ©ç”¨CPUæŒ‡ä»¤ä¿è¯äº†æ“ä½œçš„åŸå­æ€§ï¼Œä»¥è¾¾åˆ°é”çš„æ•ˆæœï¼Œå¾ªç¯è¿™ä¸ªæŒ‡ä»¤ï¼Œç›´åˆ°æˆåŠŸä¸ºæ­¢ã€‚\n9.2 é—®é¢˜CASä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå…¶åœ¨å¦‚ä¸‹åœºæ™¯ä¸‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜\n1.æœ‰çº¿ç¨‹aå’Œb2.æœ‰å…¨å±€å˜é‡ï¼Œåˆå§‹å€¼ä¸º13.çº¿ç¨‹aå…ˆæ¥è®¿é—®ï¼Œæ‹¿èµ°äº†åˆå§‹å€¼14.å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹bæ¥è®¿é—®ï¼Œæ‹¿èµ°åˆå§‹å€¼1ï¼Œæ›´æ–°ä¸º2ï¼Œåˆä¿®æ”¹å›15.å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œçº¿ç¨‹aç»§ç»­è®¿é—®ï¼Œæ­¤æ—¶å€¼ä¾æ—§æ˜¯1ï¼Œçº¿ç¨‹aä¼šè®¤ä¸ºæ²¡æœ‰é—®é¢˜ï¼Œå†™å…¥\n\nä½ å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸Šé¢çš„åœºæ™¯ä¸­ï¼Œæœ‰ä¸€ä¸ªçº¿ç¨‹æŠŠå…¨å±€å˜é‡ä¿®æ”¹äº†ä¹‹ååˆæ”¹äº†å›å»ï¼Œè¿™æ—¶å€™å°±æ²¡æœ‰åŠæ³•ä»å–å€¼åˆ¤æ–­å˜é‡æ˜¯å¦è¿˜æ˜¯â€œåŸæ¥çš„é‚£ä¸ªâ€äº†\n\né’ˆå¯¹è¿™ç§æƒ…å†µï¼Œjavaå¹¶å‘åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¸¦æœ‰æ ‡è®°çš„åŸå­å¼•ç”¨ç±»â€AtomicStampedReferenceâ€ï¼Œå®ƒå¯ä»¥é€šè¿‡æ§åˆ¶å˜é‡å€¼çš„ç‰ˆæœ¬æ¥ä¿è¯CASçš„æ­£ç¡®æ€§ã€‚\n\nC&#x2F;C++ä¸­æœ‰æ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘æ²¡ç™¾åº¦åˆ°ğŸ˜‚\n10.lock_guardäººå¦‚å…¶åï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªå®ˆæŠ¤é”ã€‚\ntemplate &lt;class Mutex&gt; class lock_guard;\n\nå…¶è¿ç”¨äº†RAIIçš„æ€è·¯ï¼Œèƒ½åœ¨æ„é€ çš„æ—¶å€™åŠ é”ï¼Œææ„çš„æ—¶å€™è§£é”ã€‚æˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±æ“ä½œäº†ã€‚\næ¯•ç«Ÿï¼Œä»£ç ä¸€é•¿èµ·æ¥ï¼Œä¸€ä¸ªé”æœ‰æ²¡æœ‰è¢«è§£å¼€ï¼Œæ˜¯çœŸçš„æä¸æ¸…æ¥šğŸ˜¥\nmutex mtx;void test7()&#123;\tint x = 0;\tint n = 0;\tint m = 1000000;\tcin &gt;&gt; n;\tvector&lt;thread&gt; threading(n);\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tthreading[i] = thread([&amp;]() &#123;\t\t\tfor (int i = 0; i &lt; m; i++)\t\t\t&#123;\t\t\t\tlock_guard&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”è§£é”\t\t\t\tx++;\t\t\t&#125;\t\t&#125;);\t&#125;\tfor (int i = 0; i &lt; n; i++)\t&#123;\t\tthreading[i].join();\t&#125;\tcout &lt;&lt; &quot;main: &quot; &lt;&lt; x &lt;&lt; endl;&#125;\n\n\nå¦‚æœforå¾ªç¯ä¸­éœ€è¦æ‰§è¡Œçš„ä»£ç å¾ˆå¤šï¼Œè€Œåªæœ‰xæ˜¯ä¸´ç•Œèµ„æºçš„è¯ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ§åˆ¶ä¸€ä¸‹ä½œç”¨åŸŸ&#123;&#125;\nfor (int i = 0; i &lt; m; i++)&#123;             //å…¶ä»–ä»£ç              &#123;                 lock_guard&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”è§£é”\t   x++;             &#125;             //å…¶ä»–ä»£ç &#125;\n\n11.unique_locktemplate &lt;class Mutex&gt; class unique_lock;\n\nå¦‚æœä½ å­¦ä¹ è¿‡æ™ºèƒ½æŒ‡é’ˆï¼Œé‚£è‚¯å®šå°±çŸ¥é“è¿™ä¸ªå‘½åçš„å«ä¹‰ï¼›\nunique_lockæ˜¯lock_graudçš„å¢å¼ºç‰ˆæœ¬ï¼Œå…¶åœ¨æ”¯æŒè‡ªåŠ¨åŠ é”è§£é”çš„å‰æä¸‹ï¼Œè¿˜æ”¯æŒæ‰‹åŠ¨åŠ é”è§£é”ï¼›\n11.1 ä½¿ç”¨ç¤ºä¾‹ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ä½¿ç”¨åœºæ™¯\nthreading[i] = thread([&amp;]() &#123;\tfor (int i = 0; i &lt; m; i++)\t&#123;\t\tunique_lock&lt;mutex&gt; t(mtx);//è‡ªåŠ¨åŠ é”\t\tx++;\t\tt.unlock(); //æ‰‹åŠ¨è§£é”\t\t// æ¨¡æ‹Ÿå…¶ä»–å·¥ä½œ\t\tthis_thread::sleep_for(chrono::milliseconds(100));\t\t// åˆéœ€è¦è®¿é—®ä¸´ç•Œèµ„æº\t\tt.lock();// æ‰‹åŠ¨è§£é”\t\tx++;\t&#125;// å‡ºä½œç”¨åŸŸï¼Œè‡ªåŠ¨è§£é”&#125;);\n\n11.2 try_locké™¤äº†æœ€åŸºç¡€çš„try_lockä¹‹å¤–ï¼Œè¿™ä¸ªç±»è¿˜æ”¯æŒforå’Œuntilï¼Œå’Œthis_threadä¸­çš„sleepæ˜¯ä¸€æ ·çš„å«ä¹‰\ntry_lockLock mutex if not locked (public member function )try_lock_forTry to lock mutex during time span (public member function )åŠ é”ä¸€ç›´åˆ°æŒ‡å®šæ—¶é—´è§£é”ï¼ˆåŠ é”åˆ°æ˜å¤©æ—©å…«ï¼‰try_lock_untilTry to lock mutex until time point (public member function )åŠ é”xxæ—¶é—´ï¼ˆåŠ é”100ç§’ï¼Œæ—¶é—´åˆ°äº†è‡ªåŠ¨è§£é”ï¼‰\n\næ—¶é—´åˆ°äº†ä¹‹åï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿›è¡Œè§£é”ã€‚å¦‚æœç”¨æˆ·åœ¨è¿™ä¹‹å‰å·²ç»æ‰‹åŠ¨è§£é”äº†ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸ä¼šåš\n11.3 releaseè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±å¾ˆç‹¬ç‰¹äº†ï¼Œå…¶å°†è‡ªå·±ç®¡ç†çš„é”é‡Šæ”¾æ‰ï¼Œä¸å†ç®¡ç†è¿™ä¸ªé”\nmutex_type* release() noexcept;\n\nè°ƒç”¨è¿™ä¸ªå‡½æ•°ä¼šè¿”å›æ‰˜ç®¡äº’æ–¥å¯¹è±¡çš„æŒ‡é’ˆï¼Œé‡Šæ”¾å…¶æ‰€æœ‰æƒã€‚è°ƒç”¨åï¼Œunique_lockå¯¹è±¡ä¸å†ç®¡ç†ä»»ä½•äº’æ–¥å¯¹è±¡ï¼ˆå³ï¼Œå®ƒå¤„äºä¸ifé»˜è®¤æ„é€ ç›¸åŒçš„çŠ¶æ€ï¼‰ã€‚\n æ³¨æ„ï¼Œæ­¤å‡½æ•°ä¸ä¼šé”å®šæˆ–è§£é”è¿”å›çš„äº’æ–¥å¯¹è±¡ã€‚\nè¯´äººè¯å°±æ˜¯ï¼Œä¸éœ€è¦ä½ RALLæ¥ç®¡ç†è¿™ä¸ªé”äº†ï¼Œäº¤ç»™ç”¨æˆ·è‡ªå·±ç®¡ç†ï¼\n12.shared_ptr\nshared_ptrçš„å®Œæ•´ä»£ç è¯·çœ‹æˆ‘çš„ Gitee\n\nåœ¨æ™ºèƒ½æŒ‡é’ˆä¸­ï¼Œshared_ptré‡‡ç”¨å¼•ç”¨è®¡æ•°æ¥åˆ¤æ–­æœ‰å¤šå°‘æ¬¡æ‹·è´ï¼ˆæ‹·è´æ„é€ ã€èµ‹å€¼é‡è½½ï¼‰ï¼Œåªæœ‰æ‹·è´è®¡æ•°å™¨ä¸º1çš„æ—¶å€™ï¼Œææ„æ‰éœ€è¦é‡Šæ”¾èµ„æºã€‚\nåœ¨shared_ptrå†…éƒ¨æœ‰ä¸€ä¸ªå˜é‡è¿›è¡Œè®¡æ•°ã€‚æ—¢ç„¶æœ‰ä¸€ä¸ªè®¡æ•°å˜é‡ï¼Œé‚£å°±éœ€è¦ä¿è¯å¤šçº¿ç¨‹æ‰§è¡Œæ—¶çš„åŸå­æ€§ï¼\n12.1 å¼•ç”¨è®¡æ•°åŠ é”void AddRef()//æ–°å¢å¼•ç”¨&#123;\t_pMutex-&gt;lock();\t++(*_pRefCount);\t_pMutex-&gt;unlock();&#125;\n\n12.2 é‡Šæ”¾void Release()&#123;\tbool flag = false;//åˆ¤æ–­é”æ˜¯å¦éœ€è¦è¢«é‡Šæ”¾\t_pMutex-&gt;lock();\tif (--(*_pRefCount) == 0 &amp;&amp; _ptr)\t&#123;               //è¿›å…¥äº†è¿™ä¸ªå‡½æ•°ï¼Œä»£è¡¨å¼•ç”¨è®¡æ•°ä¸º0\t\tdelete _ptr;\t\tdelete _pRefCount;\t\t//æ ‡è¯†éœ€è¦é‡Šæ”¾é”\t\tflag = true;\t&#125;\t_pMutex-&gt;unlock();//è§£é”\t//é‡Šæ”¾é”\tif (flag)&#123;\t\tdelete _pMutex;           &#125;&#125;\n\n12.3 æ³¨æ„äº‹é¡¹shared_ptrçš„åŠ é”åªé™äºè¿™ä¸ªç±»å¯¹è±¡æœ¬èº«çš„å®‰å…¨æ€§ï¼Œè¿™ä¸ªé”å¹¶ä¸æ˜¯ç”¨æ¥ä¿æŠ¤shared_ptræ‰€æŒ‡å‘çš„èµ„æºçš„ï¼\n13.atomicåœ¨å…¨å±€å˜é‡ä¸­ï¼Œè®¡æ•°å™¨æ˜¯å¾ˆå¸¸ç”¨çš„ç±»å‹ã€‚æ‰€ä»¥C++ä¸­è¿˜æä¾›äº†ä¸€ä¸ªå¯ä»¥è¿›è¡ŒåŸå­æ“ä½œçš„ç±»ï¼Œå¯¹è¿™ä¸ªå˜é‡è¿›è¡Œçš„æ“ä½œæ˜¯å…·æœ‰åŸå­æ€§çš„ï¼Œä¸éœ€è¦æˆ‘ä»¬è¿›è¡ŒåŠ é”è§£é”\ntemplate &lt;class T&gt; struct atomic;\n\n13.1 åŸºæœ¬ä½¿ç”¨atomic&lt;int&gt; val=0;void test8()&#123;\tcout &lt;&lt; val &lt;&lt; endl;\tval++;\tcout &lt;&lt; val &lt;&lt; endl;\tval = 20;\tcout &lt;&lt; val &lt;&lt; endl;\tval--;\tcout &lt;&lt; val &lt;&lt; endl;&#125;\n\nå¦‚æœæ˜¯intç±»å‹ï¼ŒåŸå­å˜é‡å’Œæ™®é€šçš„intå˜é‡çš„ä½¿ç”¨æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼\n\nå¯ä»¥çœ‹åˆ°ï¼Œé‡è½½äº†ä»¥åï¼ŒåŸå­å˜é‡æ”¯æŒ++  --ï¼Œä¹Ÿæ”¯æŒç›´æ¥èµ‹å€¼\n\nä¸è¿‡ï¼Œè¿™äº›æ–¹æ³•æ ‡æ˜äº†ï¼Œåªæœ‰æ•´å½¢å®¶æ—å’ŒæŒ‡é’ˆç±»å‹å¯ä»¥ä½¿ç”¨ï¼\n\næ³¨æ„ï¼Œå¦‚æœæƒ³å°†ä¸€ä¸ªatomicç±»å‹é€ç»™printfè¿›è¡Œæ‰“å°ï¼Œéœ€è¦è°ƒç”¨load()æ–¹æ³•æ¥è·å–åŸå§‹å€¼ï¼Œå¦åˆ™printfæ— æ³•ç›´æ¥æ‰“å°ï¼ç¼–è¯‘ä¼šæŠ¥é”™ã€‚\n13.2 operator &#x3D;åŸå­å˜é‡å¯ä»¥ç›´æ¥èµ‹å€¼ï¼Œæ˜¯å› ä¸ºå…¶é‡è½½äº† operator =\n//set value (1)T operator= (T val) noexcept;T operator= (T val) volatile noexcept;//copy [deleted] (2)atomic&amp; operator= (const atomic&amp;) = delete;atomic&amp; operator= (const atomic&amp;) volatile = delete;\n\n13.3 operator T&#x2F;loadoperator T çš„ä½œç”¨ï¼Œæ˜¯æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œè¿™æ ·åŸå­å˜é‡åœ¨è¿›è¡Œifæ¯”è¾ƒçš„æ—¶å€™ï¼Œä¼šè½¬æ¢æˆé‡è½½åçš„ç±»å‹\noperator T() const volatile noexcept;operator T() const noexcept;\n\nåœ¨vs2019é‡Œé¢è·³è½¬æºç ï¼Œèƒ½çœ‹åˆ°é‡è½½åçš„è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå…¶å®æ˜¯è°ƒç”¨äº†loadæ–¹æ³•\ntemplate &lt;class _Ty&gt;struct atomic : _Choose_atomic_base_t&lt;_Ty&gt;&#123;    //...\toperator _Ty() const volatile noexcept &#123;        static_assert(_Deprecate_non_lock_free_volatile&lt;_Ty&gt;, &quot;Never fails&quot;);        return this-&gt;load();    &#125;    operator _Ty() const noexcept &#123;        return this-&gt;load();    &#125;&#125;\n\n\næŸ¥çœ‹cplusplusçš„è§£é‡Šï¼Œloadæ–¹æ³•å°±æ˜¯è¿”å›äº†å…¶å†…éƒ¨æ‰€åŒ…å«çš„å€¼\nT load (memory_order sync = memory_order_seq_cst) const volatile noexcept;T load (memory_order sync = memory_order_seq_cst) const noexcept;\n\n\nè¿™é‡Œè¿˜ç‰¹æ„æ ‡æ³¨äº†ï¼Œloadæ–¹æ³•çš„ä½¿ç”¨æ˜¯åŸå­æ€§çš„\n13.4 exchangeT exchange (T val, memory_order sync = memory_order_seq_cst) volatile noexcept;T exchange (T val, memory_order sync = memory_order_seq_cst) noexcept;\n\nexchangeå‡½æ•°çš„ä½œç”¨æ˜¯ä¿®æ”¹åŸå­å˜é‡ç®¡ç†çš„å€¼ï¼Œå…¶è¿”å›å€¼æ˜¯ä¿®æ”¹ä¹‹å‰çš„å˜é‡\nReturn valueThe contained value before the call.T is atomic&#x27;s template parameter (the type of the contained value).\n\nä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹\natomic&lt;int&gt; val=0;void test8()&#123;\tcout &lt;&lt; val &lt;&lt; endl;\tint tmp = val.exchange(450);\tcout &lt;&lt; val &lt;&lt; endl;\tcout &lt;&lt; tmp &lt;&lt; endl;&#125;\n\nå¯ä»¥çœ‹åˆ°tmpæ¥æ”¶åˆ°çš„ç»“æœæ˜¯valçš„åˆå§‹å€¼0ï¼Œvalæœ¬èº«è¢«ä¿®æ”¹ä¸º450\n\n13.5 storevoid store (T val, memory_order sync = memory_order_seq_cst) volatile noexcept;void store (T val, memory_order sync = memory_order_seq_cst) noexcept;\n\nè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ¯”exchangeç®€å•ï¼Œå…¶åªä¿®æ”¹å­˜å‚¨çš„å˜é‡ï¼Œæ²¡æœ‰è¿”å›å€¼\n\nå…³äºåŸå­å˜é‡çš„ä»‹ç»å°±è¿™ä¹ˆå¤šï¼Œä¸‹é¢æ¥åº·åº·C++ä¸­çš„æ¡ä»¶å˜é‡\n14.condition_variable\næ¡ä»¶å˜é‡çš„æ¦‚å¿µï¼Œå‚è€ƒ linux çº¿ç¨‹åŒæ­¥\n\n14.1 æ„é€ å’Œwaitæ¡ä»¶å˜é‡ï¼Œæ˜¯ç”¨äºçº¿ç¨‹åŒæ­¥æ“ä½œçš„ä¸€ä¸ªæ¥å£ã€‚åœ¨C++ä¸­ï¼Œæ¡ä»¶å˜é‡åªæœ‰ä¸€ä¸ªç©ºæ„é€ \n//default (1)\tcondition_variable();//copy [deleted] (2)\tcondition_variable (const condition_variable&amp;) = delete;\n\nå½“æˆ‘ä»¬è¿›è¡Œwaitç­‰å¾…çš„æ—¶å€™ï¼Œéœ€è¦å¾€æ¡ä»¶å˜é‡å†…ä¼ å…¥ä¸€ä¸ªé”ï¼›è¿›å…¥waitå‡½æ•°ï¼Œå¼€å§‹ç­‰å¾…å‰ä¼šå…ˆè§£é”ï¼ˆè§£å¼€ä½ ä¼ å…¥çš„è¿™ä¸ªé”ï¼‰ï¼Œé€€å‡ºwaitå‡½æ•°å‰ä¼šåŠ é”ã€‚\n//unconditional (1)\tvoid wait (unique_lock&lt;mutex&gt;&amp; lck);//predicate (2)\ttemplate &lt;class Predicate&gt;  void wait (unique_lock&lt;mutex&gt;&amp; lck, Predicate pred);\n\nwaitå‡½æ•°é™¤äº†ä¼ å…¥é”ï¼Œè¿˜å¯ä»¥ä¼ å…¥ä¸€ä¸ªPredicate predå¯æ‰§è¡Œå‡½æ•°ä½“ï¼Œæ¥åˆ¤æ–­æ¡ä»¶å˜é‡æ˜¯å¦æ»¡è¶³ï¼›\nå¦‚æœæŒ‡å®šäº†predï¼Œåˆ™åªæœ‰å½“predè¿”å›falseæ—¶ï¼Œè¯¥å‡½æ•°æ‰ä¼šé˜»å¡ï¼›å¹¶ä¸”åªæœ‰å½“å®ƒå˜ä¸ºtrueæ—¶ï¼Œé€šçŸ¥æ‰èƒ½è§£é™¤é˜»å¡çº¿ç¨‹ï¼ˆè¿™å¯¹äºæ£€æŸ¥è™šå‡å”¤é†’ç‰¹åˆ«æœ‰ç”¨ï¼‰\n\nè™šå‡å”¤é†’ï¼ŒæŒ‡çš„æ˜¯ä¸€äº›ä»£ç é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹åœ¨æ¡ä»¶å°šæœªçœŸæ­£å°±ç»ªçš„æ—¶å€™å°±å”¤é†’äº†è¯¥çº¿ç¨‹\næ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªis_runçš„boolå€¼ï¼Œå¹¶åœ¨æ‰€æœ‰çº¿ç¨‹çš„æ¡ä»¶å˜é‡waitçš„åœ°æ–¹æ·»åŠ ä¸Šä¸€ä¸ªlambdaè¡¨è¾¾å¼æ¥è¿”å›è¿™ä¸ªis_runã€‚åœ¨æ‰§è¡Œçº¿ç¨‹æ± å¯¹è±¡ä¸­çš„Run() å‡½æ•°å¹¶å”¤é†’æ‰€æœ‰çº¿ç¨‹ä¹‹å‰ï¼Œå°†is_runè®¾ç½®ä¸ºtrueï¼ˆéœ€è¦åŠ é”ï¼‰ã€‚é‚£ä¹ˆå¦‚æœçº¿ç¨‹è¢«å”¤é†’ã€is_runåˆä¸ºå‡çš„æ—¶å€™ï¼Œå°±ä»£è¡¨å½“å‰çº¿ç¨‹æ± å¹¶æ²¡æœ‰çœŸçš„å¯åŠ¨ï¼Œæ˜¯ä¸€ä¸ªè™šå‡å”¤é†’ã€‚\næ·»åŠ ä¸Šåˆ¤æ–­æ¡ä»¶ï¼Œèƒ½åœ¨waitä¸­åˆ¤æ–­æ¡ä»¶æ˜¯å¦å·²ç»çœŸæ­£æ»¡è¶³ï¼Œä»è€Œé¿å…è™šå‡å”¤é†’\n\nwaitå†…éƒ¨å¯¹predçš„æ£€æµ‹æ˜¯ä¸‹é¢è¿™æ ·\nwhile (!pred()) wait(lck);\n\nåªæœ‰predè¿”å›çœŸçš„æ—¶å€™ï¼Œæ‰ä¼šè·³å‡ºwhileå¾ªç¯ï¼Œå”¤é†’çº¿ç¨‹ã€‚\né™¤äº†æ£€æµ‹è™šå‡å”¤é†’ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨è¯¥æ‰§è¡Œä½“ï¼Œå¯¹ä¸åŒçš„çº¿ç¨‹æŒ‡å®šä¸åŒçš„å”¤é†’æ¡ä»¶ï¼\n14.2 å…¶ä»–æ¥å£å…¶ä»–æ¥å£çš„ä½¿ç”¨ä¹Ÿå¾ˆç›´æ¥ï¼Œå…¶ä¸­wait_forå’Œuntilå‰é¢å·²ç»ä»‹ç»è¿‡äº†\n\nwaitï¼šåœ¨æ¡ä»¶å˜é‡ä¸­é˜»å¡ç­‰å¾…ï¼Œç­‰å¾…è¢«å”¤é†’\nnotify_oneï¼šå”¤é†’åœ¨è¯¥æ¡ä»¶å˜é‡ç­‰å¾…ä¸‹çš„ä¸€ä¸ªçº¿ç¨‹\nnotify_allï¼šå”¤é†’åœ¨è¯¥æ¡ä»¶å˜é‡ä¸‹ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹\n\n\n14.3 å®é™…ç”¨ä¾‹å½“ä¸‹æˆ‘ä»¬æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©t1å’Œt2çº¿ç¨‹å…±åŒç®¡ç†ä¸€ä¸ªå˜é‡iï¼Œå¯¹å…¶è¿›è¡Œ++ï¼Œå¹¶å®ç°t1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°çš„åŠŸèƒ½ï¼ˆäºŒè€…äº¤é”™æ‰“å°ï¼‰\nvoid test9()&#123;\t// ç›®æ ‡ï¼št1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°ï¼ŒäºŒè€…äº¤é”™æ‰“å°    bool ready = true;\tint i = 0;\tint n = 100;\tmutex mtx;\tcondition_variable cv;\t\t// t1æ‰“å°å¥‡æ•°\tthread t1([&amp;]()&#123;\t\twhile (i &lt; n)\t\t&#123;            unique_lock&lt;mutex&gt; lock(mtx);            cout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;            i++;\t\t&#125;\t&#125;);\t\t// t2æ‰“å°å¶æ•°\tthread t2([&amp;]() &#123;\t\twhile (i &lt; n)\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);\t\t\tcout &lt;&lt;&quot;t2 : &quot;&lt;&lt;this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t&#125;\t&#125;);\t\tthis_thread::sleep_for(chrono::seconds(3));\t\tcout &lt;&lt; &quot;t1:&quot; &lt;&lt; t1.get_id() &lt;&lt; endl;\tcout &lt;&lt; &quot;t2:&quot; &lt;&lt; t2.get_id() &lt;&lt; endl;\t\tt1.join();\tt2.join();\t&#125;\n\nå½“ä¸‹å·²ç»å®ç°å‡ºäº†äºŒè€…çš„åŸºæœ¬æ“ä½œï¼Œä½†ç›´æ¥è¿è¡Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œt1éƒ½å·²ç»æ‰“å°åˆ°99äº†ï¼Œt2æ‰å¼€å§‹æ‰§è¡Œï¼Œå®Œå…¨ä¸ç¬¦åˆäº¤é”™æ‰“å°çš„éœ€æ±‚\n\nthread t1([&amp;]()&#123;\twhile (i &lt; n)\t&#123;\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);\t\t\tcout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t&#125;\t\tthis_thread::sleep_for(chrono::microseconds(100));\t&#125;&#125;);\n\nå¦‚æœåœ¨t1çš„whileå¾ªç¯ä¸­åŠ ä¸Šä¸€ä¸ªä¼‘çœ ï¼Œt2çš„å‡½æ•°ä½“ä¿æŒä¸å˜ï¼Œåˆ™ä¼šå‘ç°æ˜¯t2ç›´æ¥åŠ åˆ°äº†99ï¼Œæ‰è®©å¯æ€œå·´å·´çš„t1è®¿é—®äº†ä¸´ç•Œèµ„æºï¼ˆé¥¥é¥¿é—®é¢˜ï¼‰\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¡ä»¶å˜é‡æ¥å®ç°çº¿ç¨‹ç›¸äº’å”¤é†’å’Œäº¤é”™æ‰“å°ï¼Œä»£ç å¦‚ä¸‹\n// æ¡ä»¶å˜é‡æµ‹è¯•void test9()&#123;\t// ç›®æ ‡ï¼št1æ‰“å°å¥‡æ•°ï¼Œt2æ‰“å°å¶æ•°ï¼ŒäºŒè€…äº¤é”™æ‰“å°\tbool ready = true;\tint i = 0;\tint n = 100;\tmutex mtx;\tcondition_variable cv;\t\t// t1æ‰“å°å¥‡æ•°\tthread t1([&amp;]()&#123;\t\twhile (i &lt; n)\t\t&#123;            unique_lock&lt;mutex&gt; lock(mtx);            //readyä¸ºå‡çš„æ—¶å€™ï¼Œå”¤é†’t1            cv.wait(lock, [&amp;ready]()&#123;return !ready; &#125;);            cout &lt;&lt; &quot;t1 : &quot; &lt;&lt; this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;            i++;            ready = true;            cv.notify_one();\t\t&#125;\t&#125;);\t\t// t2æ‰“å°å¶æ•°\tthread t2([&amp;]() &#123;\t\twhile (i &lt; n)\t\t&#123;\t\t\tunique_lock&lt;mutex&gt; lock(mtx);             //readyä¸ºçœŸçš„æ—¶å€™ï¼Œå”¤é†’t2\t\t\tcv.wait(lock, [&amp;ready]()&#123;return ready; &#125;);\t\t\t\tcout &lt;&lt;&quot;t2 : &quot;&lt;&lt;this_thread::get_id() &lt;&lt; &quot; : &quot; &lt;&lt; i &lt;&lt; endl;\t\t\ti++;\t\t\tready = false;\t\t\t\tcv.notify_one();\t\t&#125;\t&#125;);\t\tthis_thread::sleep_for(chrono::seconds(3));\t\tcout &lt;&lt; &quot;t1:&quot; &lt;&lt; t1.get_id() &lt;&lt; endl;\tcout &lt;&lt; &quot;t2:&quot; &lt;&lt; t2.get_id() &lt;&lt; endl;\t\tt1.join();\tt2.join();\t&#125;\n\nè¿è¡Œä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æˆåŠŸé€šè¿‡æ¡ä»¶å˜é‡ï¼Œä½¿è¿™ä¸¤ä¸ªçº¿ç¨‹äº¤é”™æ‰“å°å¥‡å¶æ•°ï¼\nt2 : 23208 : 0t1 : 24896 : 1t2 : 23208 : 2t1 : 24896 : 3t2 : 23208 : 4t1 : 24896 : 5t2 : 23208 : 6t1 : 24896 : 7t2 : 23208 : 8t1 : 24896 : 9t2 : 23208 : 10t1 : 24896 : 11//....t2 : 23208 : 90t1 : 24896 : 91t2 : 23208 : 92t1 : 24896 : 93t2 : 23208 : 94t1 : 24896 : 95t2 : 23208 : 96t1 : 24896 : 97t2 : 23208 : 98t1 : 24896 : 99t2 : 23208 : 100\n\nå³ä¾¿åœ¨t1ä¸­é¢å¤–åŠ ä¸Šä¼‘çœ ï¼Œä¹Ÿä¸ä¼šå½±å“è¾“å‡ºç»“æœçš„å‡†ç¡®æ€§ï¼\n\nè¿™ä¾¿æ˜¯æ¡ä»¶å˜é‡å¯¹äºçº¿ç¨‹åŒæ­¥æ§åˆ¶çš„ç”¨æ³•\nç»“è¯­åœ¨å­¦ä¹ è¿‡linuxçš„çº¿ç¨‹åŸºç¡€å’Œç³»ç»Ÿæ¥å£åï¼Œç†è§£C++è¿™é‡Œçš„å¤šçº¿ç¨‹æ“ä½œè¿˜ç®—è½»æ¾ï¼\nC++è¯­æ³•å­¦ä¹ çš„æœ€åä¸€å—æ‹¼å›¾ä¹Ÿè¢«è¡¥ä¸Šäº†ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘ç©ºå¯¹è±¡æŒ‡é’ˆä¹Ÿèƒ½è®¿é—®æˆå‘˜å‡½æ•°ï¼Ÿ","url":"/posts/3858168549/","content":"1.èµ·å› ä»Šå¤©å†™ä»£ç çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªbugï¼Œä¸€ä¸ªç±»ä¸­çš„setå‡½æ•°åœ¨è®¾ç½®ä¸€ä¸ªPODç±»å‹çš„æ—¶å€™å‡ºç°äº†å¼‚å¸¸ï¼Œç›´æ¥æ®µé”™è¯¯é€€å‡ºäº†ã€‚\n\nå°tipsï¼ŒPODç±»å‹æŒ‡çš„æ˜¯å†…ç½®ç±»å‹ã€‚æ¯”å¦‚INTã€DOUBLEè¿™ç±»ï¼›\n\næƒ³äº†å¥½ä¹…ï¼Œéƒ½æ²¡å‘ç°è¿™é‡Œçš„é—®é¢˜åˆ°åº•æ˜¯å› ä¸ºä»€ä¹ˆã€‚åæ¥æ‰çŸ¥é“ï¼ŒåŸæ¥ç©ºçš„å¯¹è±¡æŒ‡é’ˆï¼Œä¹Ÿèƒ½è¢«è§£å¼•ç”¨è®¿é—®åˆ°å‡½æ•°ï¼\n2.ç¤ºä¾‹ä¸‹é¢æ˜¯å…³äºè¿™ä¸ªæƒ…å†µçš„ç¤ºä¾‹ä»£ç \n#include &lt;iostream&gt;using namespace std;class mytest&#123;public:    mytest() = default;    mytest(int a):_a(0)&#123;&#125;    void set_int(int a)    &#123;        cout &lt;&lt; &quot;set int to &quot; &lt;&lt; a &lt;&lt; endl;        _a = a;    &#125;    void print(int a)    &#123;        cout &lt;&lt; &quot;just a print &quot; &lt;&lt; a &lt;&lt; endl;    &#125;private:    int _a = 0;&#125;;int main()&#123;    mytest* ptr = nullptr;    ptr-&gt;print(20);    ptr-&gt;set_int(10);    return 0;&#125;\n\nè¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä¼šå‡ºç°æ®µé”™è¯¯ã€‚ä½†ä½ ä¼šå‘ç°è¿™ä¸ªæ®µé”™è¯¯å¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬çš„ptr-&gt; é‡Œé¢å‡ºç°çš„ï¼Œè€Œæ˜¯æˆåŠŸè¿›å…¥äº†set_intå‡½æ•°ï¼Œæ‰§è¡Œäº†æ‰“å°ï¼Œæœ€ç»ˆå¯¹æˆå‘˜å˜é‡_aèµ‹å€¼çš„æ—¶å€™å‡ºç°çš„ï¼\nå¯¹è±¡æŒ‡é’ˆä¸ºç©ºï¼Œä»£è¡¨å‹æ ¹ä¸å­˜åœ¨ä¸€ä¸ªå®é™…çš„å¯¹è±¡ï¼Œä¹Ÿæ²¡åŠæ³•å¯¹ä¸å­˜åœ¨çš„æˆå‘˜å˜é‡æ“ä½œã€‚\n&gt; ./testjust a print 20set int to 10[1]    280362 segmentation fault  ./test\n\nå½“ä»£ç å¾ˆå¤šçš„æ—¶å€™ï¼Œå°±ä¼šå› ä¸ºå¿½ç•¥è¿™ä¸ªç‰¹æ€§ï¼ˆå…¶å®æˆ‘å½“æ—¶æ˜¯å‹æ ¹ä¸çŸ¥é“ï¼‰è€Œè¯¯ä»¥ä¸ºé”™è¯¯å‡ºç°åœ¨set_intå‡½æ•°ä¸­ã€‚\næ²¡æœ‰æƒ³åˆ°æ˜¯å¤–å±‚çš„å¯¹è±¡æŒ‡é’ˆä¸ºç©ºå¯¼è‡´çš„ã€‚\n3.ä¸ºä»€ä¹ˆï¼Ÿåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡å°±å·²ç»ç»‘å®šäº†å‡½æ•°åœ°å€ã€‚ä¸€ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ï¼Œä½¿ç”¨çš„å‡½æ•°åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚å½“ç¼–è¯‘ptr-&gt;set_int(10) çš„æ—¶å€™ï¼Œå‡½æ•°çš„åœ°å€å°±å·²ç»å’Œè¿™ä¸ªæŒ‡é’ˆç»‘å®šäº†ï¼Œè°ƒç”¨å®ƒç­‰ä»·äºç›´æ¥è°ƒç”¨ set_int å‡½æ•°ã€‚\nå¦‚æœè¿™ä¸ªå‡½æ•°ä¸­æ²¡æœ‰éœ€è¦ç”¨åˆ°æˆå‘˜å˜é‡çš„åœ°æ–¹ï¼Œä¹Ÿå°±ä¸éœ€è¦è§£å¼•ç”¨thisæŒ‡é’ˆï¼Œæ˜¯ä¸ä¼šå‡ºé”™çš„ã€‚æ¯”å¦‚ä¸Šæ–¹ä»£ç ä¸­çš„printå‡½æ•°ï¼Œå°±æ²¡æœ‰å‡ºç°å¼‚å¸¸ã€‚\nä½†å¦‚æœå‡½æ•°å†…è®¿é—®äº†å†…ç½®æˆå‘˜ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°è§£å¼•ç”¨ç©ºæŒ‡é’ˆå¯¼è‡´çš„æ®µé”™è¯¯ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","Cpp"]},{"title":"ã€C++ã€‘ä½¿ç”¨CPP+STMPå‘é€é‚®ä»¶","url":"/posts/4118547036/","content":"æœ¬æ–‡è½¬è½½äºCSDNï¼Œæ‰¾äº†å¥½ä¹…æ‰æ‰¾åˆ°çš„å¯ç”¨çš„é‚®ä»¶ä»£ç ï¼\nåŸæ–‡æ ‡é¢˜ï¼šc++å®ç°smtpå‘é€é‚®ä»¶ï¼Œæ”¯æŒsslçš„465ç«¯å£å‘é€ï¼Œæ”¯æŒé™„ä»¶ã€ä¸€æ¬¡å‘é€å¤šäººã€æŠ„é€ç­‰åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/weixin_44979075/article/details/131094396åŸæ–‡ä½œè€…ï¼šæ¨±èŠ±å›å¿†\n\nå‰è¨€c++å®ç°smtpå‘é€é‚®ä»¶ï¼Œæ”¯æŒsslçš„465ç«¯å£å‘é€ï¼Œæ”¯æŒé™„ä»¶ã€ä¸€æ¬¡å‘é€å¤šäººã€æŠ„é€ç­‰ã€‚  \nè¿™é‡Œåªä½¿ç”¨äº†opensslåº“ï¼ˆç”¨æ¥æ”¯æŒsslçš„465ç«¯å£ï¼‰ï¼Œå…¶ä»–éƒ¨åˆ†æ˜¯åŸç”Ÿc++,æ”¯æŒåœ¨win&#x2F;linuxè¿è¡Œã€‚  \nç½‘ä¸Šå¾ˆå¤šéƒ½æ˜¯åŸå§‹çš„æ”¯æŒ25ç«¯å£ï¼Œæ˜æ–‡å‘é€ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹sslæ€è·¯\nå®ç°æ€è·¯ä½¿ç”¨sockectç¼–ç¨‹å’Œsslï¼Œä½¿ç”¨SMTPåè®®ã€‚  \nä½¿ç”¨äº†c++çš„å¤šæ€è¯­è¨€ç‰¹æ€§ï¼ŒåŒ…æ‹¬é‡è½½å’Œè™šå‡½æ•°ã€‚  \næ–‡ä¸­ç»™å‡ºmail.h å’Œmail.cpp ä»¥åŠmain.cppéƒ¨åˆ†æµ‹è¯•ä»£ç Linuxå®‰è£…openssl\nsudo apt install libssl-dev\n\nwinä¸‹è‡ªè¡Œä¸‹è½½å®‰è£…\nSMTPåè®®ç®€ä»‹SMTPåè®®çš„å®šä¹‰1ã€SMTP æ˜¯ä¸€ç§TCPåè®®æ”¯æŒçš„æä¾›å¯é ä¸”æœ‰æ•ˆç”µå­é‚®ä»¶ä¼ è¾“çš„åº”ç”¨å±‚åè®®ï¼›2ã€SMTP æ˜¯å»ºç«‹åœ¨ TCPä¸Šçš„ä¸€ç§é‚®ä»¶æœåŠ¡ï¼Œä¸»è¦ç”¨äºä¼ è¾“ç³»ç»Ÿä¹‹é—´çš„é‚®ä»¶ä¿¡æ¯å¹¶æä¾›æ¥ä¿¡æœ‰å…³çš„é€šçŸ¥ï¼›3ã€SMTP ç‹¬ç«‹äºç‰¹å®šçš„ä¼ è¾“å­ç³»ç»Ÿï¼Œä¸”åªéœ€è¦å¯é æœ‰åºçš„æ•°æ®æµä¿¡é“æ”¯æŒï¼›4ã€SMTP é‡è¦ç‰¹æ€§ä¹‹ä¸€æ˜¯å…¶èƒ½è·¨è¶Šç½‘ç»œä¼ è¾“é‚®ä»¶ï¼Œå³â€œ SMTP é‚®ä»¶ä¸­ç»§â€ï¼›5ã€SMTPæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„åŸºäºæ–‡æœ¬çš„åè®®ã€‚\nSMTPåŸºæœ¬å‘½ä»¤SMTPåŸºæœ¬å‘½ä»¤åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªï¼šHELOï¹‘EHLOã€MAILï¹‘RCPTï¹‘DATAã€AUTH LOGINå’ŒQUIT1ã€HELOâ€“å‘ä»¶æ–¹é—®å€™æ”¶ä»¶æ–¹ï¼Œåé¢æ˜¯å‘ä»¶äººçš„æœåŠ¡å™¨åœ°å€æˆ–æ ‡è¯†ã€‚æ”¶ä»¶æ–¹å›ç­”OKæ—¶æ ‡è¯†è‡ªå·±çš„èº«ä»½ã€‚é—®å€™å’Œç¡®è®¤è¿‡ç¨‹è¡¨æ˜ä¸¤å°æœºå™¨å¯ä»¥è¿›è¡Œé€šä¿¡ï¼ŒåŒæ—¶çŠ¶æ€å‚é‡è¢«å¤ä½ï¼Œç¼“å†²åŒºè¢«æ¸…ç©ºã€‚EHLOâ€“ç”³æ˜èº«ä»½ï¼Œè¡¨ç¤ºè‡ªå·±èº«ä»½éœ€è¦éªŒè¯ï¼Œæ³¨æ„è¿™éƒ¨åˆ†éœ€è¦é€šè¿‡TelnetéªŒè¯ä¸€ä¸‹ï¼Œæ˜¯&#117;&#x73;&#x65;&#114;&#64;&#x65;&#120;&#x61;&#109;&#x70;&#x6c;&#101;&#46;&#99;&#111;&#109;è¿˜æ˜¯userï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚2ã€MAILâ€“è¿™ä¸ªå‘½ä»¤ç”¨æ¥å¼€å§‹ä¼ é€é‚®ä»¶ï¼Œå®ƒçš„åé¢è·Ÿéšå‘ä»¶æ–¹é‚®ä»¶åœ°å€ï¼ˆè¿”å›é‚®ä»¶åœ°å€ï¼‰ã€‚å®ƒä¹Ÿç”¨æ¥å½“é‚®ä»¶æ— æ³•é€è¾¾æ—¶ï¼Œå‘é€å¤±è´¥é€šçŸ¥ã€‚ä¸ºä¿è¯é‚®ä»¶çš„æˆåŠŸå‘é€ï¼Œå‘ä»¶æ–¹çš„åœ°å€åº”æ˜¯è¢«å¯¹æ–¹æˆ–ä¸­é—´è½¬å‘æ–¹åŒæ„æ¥å—çš„ã€‚è¿™ä¸ªå‘½ä»¤ä¼šæ¸…ç©ºæœ‰å…³çš„ç¼“å†²åŒºï¼Œä¸ºæ–°çš„é‚®ä»¶åšå‡†å¤‡ã€‚3ã€RCPT â€“è¿™ä¸ªå‘½ä»¤å‘Šè¯‰æ”¶ä»¶æ–¹æ”¶ä»¶äººçš„é‚®ç®±ã€‚å½“æœ‰å¤šä¸ªæ”¶ä»¶äººæ—¶ï¼Œéœ€è¦å¤šæ¬¡ä½¿ç”¨è¯¥å‘½ä»¤RCPT4ã€TOï¼Œæ¯æ¬¡åªèƒ½æŒ‡æ˜ä¸€ä¸ªäººã€‚å¦‚æœæ¥æ”¶æ–¹æœåŠ¡å™¨ä¸åŒæ„è½¬å‘è¿™ä¸ªåœ°å€çš„é‚®ä»¶ï¼Œå®ƒå¿…é¡»æŠ¥550é”™è¯¯ä»£ç é€šçŸ¥å‘ä»¶æ–¹ã€‚å¦‚æœæœåŠ¡å™¨åŒæ„è½¬å‘ï¼Œå®ƒè¦æ›´æ”¹é‚®ä»¶å‘é€è·¯å¾„ï¼ŒæŠŠæœ€å¼€å§‹çš„ç›®çš„åœ°ï¼ˆè¯¥æœåŠ¡å™¨ï¼‰æ¢æˆä¸‹ä¸€ä¸ªæœåŠ¡å™¨ã€‚5ã€DATAâ€“æ”¶ä»¶æ–¹æŠŠè¯¥å‘½ä»¤ä¹‹åçš„æ•°æ®ä½œä¸ºå‘é€çš„æ•°æ®ã€‚æ•°æ®è¢«åŠ å…¥æ•°æ®ç¼“å†²åŒºä¸­ï¼Œä»¥å•ç‹¬ä¸€è¡Œæ˜¯â€.â€çš„è¡Œç»“æŸæ•°æ®ã€‚ç»“æŸè¡Œå¯¹äºæ¥æ”¶æ–¹åŒæ—¶æ„å‘³ç«‹å³å¼€å§‹ç¼“å†²åŒºå†…çš„æ•°æ®ä¼ é€ï¼Œä¼ é€ç»“æŸåæ¸…ç©ºç¼“å†²åŒºã€‚å¦‚æœä¼ é€æ¥å—ï¼Œæ¥æ”¶æ–¹å›å¤OKã€‚6ã€QUITâ€“SMTPè¦æ±‚æ¥æ”¶æ”¾å¿…é¡»å›ç­”OKï¼Œç„¶åä¸­æ–­ä¼ è¾“ï¼›åœ¨æ”¶åˆ°è¿™ä¸ªå‘½ä»¤å¹¶å›ç­”OKå‰ï¼Œæ”¶ä»¶æ–¹ä¸å¾—ä¸­æ–­è¿æ¥ï¼Œå³ä½¿ä¼ è¾“å‡ºç°é”™è¯¯ã€‚å‘ä»¶æ–¹åœ¨å‘å‡ºè¿™ä¸ªå‘½ä»¤å¹¶æ”¶åˆ°OKç­”å¤å‰ï¼Œä¹Ÿä¸å¾—ä¸­æ–­è¿æ¥ã€‚7ã€AUTH LOGINâ€“ç™»å½•é‚®ç®±ï¼Œè¿™ä¸€éƒ¨åˆ†ä¸€èˆ¬è¦ç”¨base64åŠ å¯†ã€‚\nå¤´æ–‡ä»¶mail.h#pragma once#include &lt;string&gt;#include &lt;vector&gt;#include &lt;map&gt;#include &lt;openssl/ossl_typ.h&gt;#ifndef WIN32#include&lt;netdb.h&gt;#endifclass SmtpBase&#123;protected:    struct EmailInfo    &#123;        std::string smtpServer;      //the SMTP server        std::string serverPort;      //the SMTP server port        std::string charset;         //the email character set        std::string sender;          //the sender&#x27;s name        std::string senderEmail;     //the sender&#x27;s email        std::string password;        //the password of sender        std::string recipient;       //the recipient&#x27;s name        std::string recipientEmail;  //the recipient&#x27;s email        std::map&lt;std::string, std::string&gt; recvList; //æ”¶ä»¶äººåˆ—è¡¨&lt;email, name&gt;        std::string subject;         //the email message&#x27;s subject  é‚®ä»¶ä¸»é¢˜        std::string message;         //the email message body   é‚®ä»¶å†…å®¹        std::map&lt;std::string, std::string&gt; ccEmail;         //æŠ„é€åˆ—è¡¨        std::vector&lt;std::string&gt; attachment; //é™„ä»¶    &#125;;public:    virtual ~SmtpBase() &#123;&#125;    /**     * @brief ç®€å•å‘é€æ–‡æœ¬é‚®ä»¶     * @param   from å‘é€è€…çš„å¸å·     * @param   passs å‘é€è€…å¯†ç      * @param   to æ”¶ä»¶äºº     * @param   subject ä¸»é¢˜     * @param   strMessage  é‚®ä»¶å†…å®¹     */    virtual int SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::string&amp; to, const std::string&amp; subject, const std::string&amp; strMessage) = 0;    /**     * @brief å‘é€é‚®ä»¶ï¼ŒåŒ…æ‹¬é™„ä»¶ä»¥åŠæŠ„é€äººå’Œå¤šä¸ªæ”¶ä»¶äºº     * @param   from å‘é€è€…çš„å¸å·     * @param   passs å‘é€è€…å¯†ç      * @param   vecTo æ”¶ä»¶äººåˆ—è¡¨     * @param   subject ä¸»é¢˜     * @param   strMessage  é‚®ä»¶å†…å®¹     * @param   attachment  é™„ä»¶åˆ—è¡¨    é™„ä»¶å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œé»˜è®¤æ˜¯å¯æ‰§è¡Œç¨‹åºç›®å½•ä¸‹     * @param   ccList  æŠ„é€åˆ—è¡¨     */    virtual int SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::vector&lt;std::string&gt;&amp; vecTo,        const std::string&amp; subject, const std::string&amp; strMessage, const std::vector&lt;std::string&gt;&amp; attachment,const std::vector&lt;std::string&gt;&amp; ccList) = 0;    std::string GetLastError()    &#123;        return m_lastErrorMsg;    &#125;    virtual int Read(void* buf, int num) = 0;    virtual int Write(const void* buf, int num) = 0;    virtual int Connect() = 0;    virtual int DisConnect() = 0;protected:    std::string m_lastErrorMsg;&#125;;class SmtpEmail : public SmtpBase&#123;public:    SmtpEmail(const std::string&amp; emailHost, const std::string&amp; port);    ~SmtpEmail();    int SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::string&amp; to, const std::string&amp; subject, const std::string&amp; strMessage);    int SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::vector&lt;std::string&gt;&amp; vecTo,        const std::string&amp; subject, const std::string&amp; strMessage, const std::vector&lt;std::string&gt;&amp; attachment, const std::vector&lt;std::string&gt;&amp; ccList);protected:    int Read(void* buf, int num);    int Write(const void* buf, int num);    int Connect();    int DisConnect();    virtual std::string GetEmailBody(const EmailInfo &amp; info);private:    //int SMTPSSLComunicate(SSL *connection, const EmailInfo &amp;info);    int SMTPComunicate(const EmailInfo &amp;info);protected:    addrinfo* m_addrinfo;    int m_socketfd;    std::string m_host;    std::string m_port;    bool m_isConnected;&#125;;class SimpleSmtpEmail : public SmtpEmail&#123;public:    using SmtpEmail::SmtpEmail;    virtual std::string GetEmailBody(const EmailInfo &amp; info);&#125;;class SslSmtpEmail : public SmtpEmail&#123;public:    using SmtpEmail::SmtpEmail;    ~SslSmtpEmail();    int Connect();    int DisConnect();protected:    int Read(void* buf, int num);    int Write(const void* buf, int num);private:    SSL_CTX *m_ctx;    SSL *m_ssl;&#125;;class SimpleSslSmtpEmail : public SslSmtpEmail&#123;public:    using SslSmtpEmail::SslSmtpEmail;    virtual std::string GetEmailBody(const EmailInfo &amp; info);&#125;;\n\n\nå®ç°æ–‡ä»¶mail.cpp#ifdef WIN32#include &lt;WinSock2.h&gt;#endif#include &quot;mail.h&quot;#include &lt;fstream&gt;#include &lt;sstream&gt;#include &lt;iostream&gt;#include &lt;string.h&gt;#include &lt;openssl/err.h&gt;#include &lt;openssl/ssl.h&gt;#ifdef WIN32#include &lt;WinSock2.h&gt;#include &lt;WS2tcpip.h&gt;#pragma comment(lib, &quot;ws2_32.lib&quot;)#else #include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;sys/types.h&gt;          /* See NOTES */#include &lt;sys/socket.h&gt;#define INVALID_SOCKET -1#endiftemplate&lt;typename T&gt;std::string join(T&amp; vecData, const std::string&amp; delim)&#123;    if (vecData.size() &lt;= 0)    &#123;        return std::string();    &#125;    std::stringstream ss;    for (auto&amp; item : vecData)    &#123;        ss &lt;&lt; delim  &lt;&lt; item ;    &#125;    return ss.str().substr(delim.length());&#125;const char MimeTypes[][2][128] =&#123;    &#123; &quot;***&quot;,    &quot;application/octet-stream&quot; &#125;,    &#123; &quot;csv&quot;,    &quot;text/csv&quot; &#125;,    &#123; &quot;tsv&quot;,    &quot;text/tab-separated-values&quot; &#125;,    &#123; &quot;tab&quot;,    &quot;text/tab-separated-values&quot; &#125;,    &#123; &quot;html&quot;,    &quot;text/html&quot; &#125;,    &#123; &quot;htm&quot;,    &quot;text/html&quot; &#125;,    &#123; &quot;doc&quot;,    &quot;application/msword&quot; &#125;,    &#123; &quot;docx&quot;,    &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot; &#125;,    &#123; &quot;ods&quot;,    &quot;application/x-vnd.oasis.opendocument.spreadsheet&quot; &#125;,    &#123; &quot;odt&quot;,    &quot;application/vnd.oasis.opendocument.text&quot; &#125;,    &#123; &quot;rtf&quot;,    &quot;application/rtf&quot; &#125;,    &#123; &quot;sxw&quot;,    &quot;application/vnd.sun.xml.writer&quot; &#125;,    &#123; &quot;txt&quot;,    &quot;text/plain&quot; &#125;,    &#123; &quot;xls&quot;,    &quot;application/vnd.ms-excel&quot; &#125;,    &#123; &quot;xlsx&quot;,    &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot; &#125;,    &#123; &quot;pdf&quot;,    &quot;application/pdf&quot; &#125;,    &#123; &quot;ppt&quot;,    &quot;application/vnd.ms-powerpoint&quot; &#125;,    &#123; &quot;pps&quot;,    &quot;application/vnd.ms-powerpoint&quot; &#125;,    &#123; &quot;pptx&quot;,    &quot;application/vnd.openxmlformats-officedocument.presentationml.presentation&quot; &#125;,    &#123; &quot;wmf&quot;,    &quot;image/x-wmf&quot; &#125;,    &#123; &quot;atom&quot;,    &quot;application/atom+xml&quot; &#125;,    &#123; &quot;xml&quot;,    &quot;application/xml&quot; &#125;,    &#123; &quot;json&quot;,    &quot;application/json&quot; &#125;,    &#123; &quot;js&quot;,    &quot;application/javascript&quot; &#125;,    &#123; &quot;ogg&quot;,    &quot;application/ogg&quot; &#125;,    &#123; &quot;ps&quot;,    &quot;application/postscript&quot; &#125;,    &#123; &quot;woff&quot;,    &quot;application/x-woff&quot; &#125;,    &#123; &quot;xhtml&quot;,&quot;application/xhtml+xml&quot; &#125;,    &#123; &quot;xht&quot;,    &quot;application/xhtml+xml&quot; &#125;,    &#123; &quot;zip&quot;,    &quot;application/zip&quot; &#125;,    &#123; &quot;gz&quot;,    &quot;application/x-gzip&quot; &#125;,    &#123; &quot;rar&quot;,    &quot;application/rar&quot; &#125;,    &#123; &quot;rm&quot;,    &quot;application/vnd.rn-realmedia&quot; &#125;,    &#123; &quot;rmvb&quot;,    &quot;application/vnd.rn-realmedia-vbr&quot; &#125;,    &#123; &quot;swf&quot;,    &quot;application/x-shockwave-flash&quot; &#125;,    &#123; &quot;au&quot;,        &quot;audio/basic&quot; &#125;,    &#123; &quot;snd&quot;,    &quot;audio/basic&quot; &#125;,    &#123; &quot;mid&quot;,    &quot;audio/mid&quot; &#125;,    &#123; &quot;rmi&quot;,        &quot;audio/mid&quot; &#125;,    &#123; &quot;mp3&quot;,    &quot;audio/mpeg&quot; &#125;,    &#123; &quot;aif&quot;,    &quot;audio/x-aiff&quot; &#125;,    &#123; &quot;aifc&quot;,    &quot;audio/x-aiff&quot; &#125;,    &#123; &quot;aiff&quot;,    &quot;audio/x-aiff&quot; &#125;,    &#123; &quot;m3u&quot;,    &quot;audio/x-mpegurl&quot; &#125;,    &#123; &quot;ra&quot;,    &quot;audio/vnd.rn-realaudio&quot; &#125;,    &#123; &quot;ram&quot;,    &quot;audio/vnd.rn-realaudio&quot; &#125;,    &#123; &quot;wav&quot;,    &quot;audio/x-wave&quot; &#125;,    &#123; &quot;wma&quot;,    &quot;audio/x-ms-wma&quot; &#125;,    &#123; &quot;m4a&quot;,    &quot;audio/x-m4a&quot; &#125;,    &#123; &quot;bmp&quot;,    &quot;image/bmp&quot; &#125;,    &#123; &quot;gif&quot;,    &quot;image/gif&quot; &#125;,    &#123; &quot;jpe&quot;,    &quot;image/jpeg&quot; &#125;,    &#123; &quot;jpeg&quot;,    &quot;image/jpeg&quot; &#125;,    &#123; &quot;jpg&quot;,    &quot;image/jpeg&quot; &#125;,    &#123; &quot;jfif&quot;,    &quot;image/jpeg&quot; &#125;,    &#123; &quot;png&quot;,    &quot;image/png&quot; &#125;,    &#123; &quot;svg&quot;,    &quot;image/svg+xml&quot; &#125;,    &#123; &quot;tif&quot;,    &quot;image/tiff&quot; &#125;,    &#123; &quot;tiff&quot;,    &quot;image/tiff&quot; &#125;,    &#123; &quot;ico&quot;,    &quot;image/vnd.microsoft.icon&quot; &#125;,    &#123; &quot;css&quot;,    &quot;text/css&quot; &#125;,    &#123; &quot;bas&quot;,    &quot;text/plain&quot; &#125;,    &#123; &quot;c&quot;,        &quot;text/plain&quot; &#125;,    &#123; &quot;h&quot;,        &quot;text/plain&quot; &#125;,    &#123; &quot;rtx&quot;,    &quot;text/richtext&quot; &#125;,    &#123; &quot;mp2&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mpa&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mpe&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mpeg&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mpg&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mpv2&quot;,    &quot;video/mpeg&quot; &#125;,    &#123; &quot;mov&quot;,    &quot;video/quicktime&quot; &#125;,    &#123; &quot;qt&quot;,    &quot;video/quicktime&quot; &#125;,    &#123; &quot;lsf&quot;,    &quot;video/x-la-asf&quot; &#125;,    &#123; &quot;lsx&quot;,    &quot;video/x-la-asf&quot; &#125;,    &#123; &quot;asf&quot;,    &quot;video/x-ms-asf&quot; &#125;,    &#123; &quot;asr&quot;,    &quot;video/x-ms-asf&quot; &#125;,    &#123; &quot;asx&quot;,    &quot;video/x-ms-asf&quot; &#125;,    &#123; &quot;avi&quot;,    &quot;video/x-msvideo&quot; &#125;,    &#123; &quot;3gp&quot;,    &quot;video/3gpp&quot; &#125;,    &#123; &quot;3gpp&quot;,    &quot;video/3gpp&quot; &#125;,    &#123; &quot;3g2&quot;,    &quot;video/3gpp2&quot; &#125;,    &#123; &quot;movie&quot;,&quot;video/x-sgi-movie&quot; &#125;,    &#123; &quot;mp4&quot;,    &quot;video/mp4&quot; &#125;,    &#123; &quot;wmv&quot;,    &quot;video/x-ms-wmv&quot; &#125;,    &#123; &quot;webm&quot;,&quot;video/webm&quot; &#125;,    &#123; &quot;m4v&quot;,    &quot;video/x-m4v&quot; &#125;,    &#123; &quot;flv&quot;,    &quot;video/x-flv&quot; &#125;&#125;;std::string fileBasename(const std::string path) &#123;    std::string filename = path.substr(path.find_last_of(&quot;/\\\\&quot;) + 1);//è§£æå‡ºæ–‡ä»¶åå­—    return filename;&#125;std::string getFileContents(const char *filename)&#123;    std::ifstream in(filename, std::ios::in | std::ios::binary);    if (in)    &#123;        std::string contents;        in.seekg(0, std::ios::end);        contents.resize(in.tellg());        in.seekg(0, std::ios::beg);        in.read(&amp;contents[0], contents.size());        in.close();        return(contents);    &#125;    else &#123;        printf(&quot;æ–‡ä»¶è¯»å–å¤±è´¥:%s\\n&quot;,filename);        return &quot;&quot;;    &#125;&#125;//è·å–æ–‡ä»¶çš„åç¼€å å¦‚xxx.jpg è·å–çš„æ˜¯jpgstd::string GetFileExtension(const std::string&amp; FileName)&#123;    if (FileName.find_last_of(&quot;.&quot;) != std::string::npos)        //find_last_ofé€†å‘æŸ¥æ‰¾åœ¨åŸå­—ç¬¦ä¸²ä¸­æœ€åä¸€ä¸ªä¸æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ï¼‰ä¸­çš„æŸä¸ªå­—ç¬¦åŒ¹é…çš„å­—ç¬¦ï¼Œè¿”å›å®ƒçš„ä½ç½®ã€‚è‹¥æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿”å›nposã€‚        return FileName.substr(FileName.find_last_of(&quot;.&quot;) + 1);    return &quot;&quot;;&#125;const char* GetMimeTypeFromFileName(char* szFileExt)&#123;    for (unsigned int i = 0; i &lt; sizeof(MimeTypes) / sizeof(MimeTypes[0]); i++)    &#123;        if (strcmp(MimeTypes[i][0], szFileExt) == 0)        &#123;            return MimeTypes[i][1];        &#125;    &#125;    return MimeTypes[0][1];   //if does not match any,  &quot;application/octet-stream&quot; is returned&#125;char* base64Encode(char const* origSigned, unsigned origLength)&#123;    static const char base64Char[] = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;    unsigned char const* orig = (unsigned char const*)origSigned; // in case any input bytes have the MSB set    if (orig == NULL) return NULL;    unsigned const numOrig24BitValues = origLength / 3;    bool havePadding = origLength &gt; numOrig24BitValues * 3;    bool havePadding2 = origLength == numOrig24BitValues * 3 + 2;    unsigned const numResultBytes = 4 * (numOrig24BitValues + havePadding);    char* result = new char[numResultBytes + 3]; // allow for trailing &#x27;/0&#x27;    // Map each full group of 3 input bytes into 4 output base-64 characters:    unsigned i;    for (i = 0; i &lt; numOrig24BitValues; ++i)    &#123;        result[4 * i + 0] = base64Char[(orig[3 * i] &gt;&gt; 2) &amp; 0x3F];        result[4 * i + 1] = base64Char[(((orig[3 * i] &amp; 0x3) &lt;&lt; 4) | (orig[3 * i + 1] &gt;&gt; 4)) &amp; 0x3F];        result[4 * i + 2] = base64Char[((orig[3 * i + 1] &lt;&lt; 2) | (orig[3 * i + 2] &gt;&gt; 6)) &amp; 0x3F];        result[4 * i + 3] = base64Char[orig[3 * i + 2] &amp; 0x3F];    &#125;    // Now, take padding into account.  (Note: i == numOrig24BitValues)    if (havePadding)    &#123;        result[4 * i + 0] = base64Char[(orig[3 * i] &gt;&gt; 2) &amp; 0x3F];        if (havePadding2)        &#123;            result[4 * i + 1] = base64Char[(((orig[3 * i] &amp; 0x3) &lt;&lt; 4) | (orig[3 * i + 1] &gt;&gt; 4)) &amp; 0x3F];            result[4 * i + 2] = base64Char[(orig[3 * i + 1] &lt;&lt; 2) &amp; 0x3F];        &#125;        else        &#123;            result[4 * i + 1] = base64Char[((orig[3 * i] &amp; 0x3) &lt;&lt; 4) &amp; 0x3F];            result[4 * i + 2] = &#x27;=&#x27;;        &#125;        result[4 * i + 3] = &#x27;=&#x27;;    &#125;    result[numResultBytes] = &#x27;\\0&#x27;;    return result;&#125;int SmtpEmail::SMTPComunicate(const EmailInfo &amp;info)&#123;    if (Connect() != 0)    &#123;        return -1;    &#125;    char * buffer = new char[1000];    memset(buffer, 0, 1000);    Read(buffer, 999);    if (strncmp(buffer, &quot;220&quot;, 3) != 0) // not equal to 220    &#123;        m_lastErrorMsg = buffer;        return 220;    &#125;    //å‘æœåŠ¡å™¨å‘é€ehlo    std::string command = &quot;ehlo EmailService\\r\\n&quot;;    Write(command.c_str(), command.length());    memset(buffer, 0, 1000);    Read(buffer, 999);    if (strncmp(buffer, &quot;250&quot;, 3) != 0) // ehlo failed    &#123;        m_lastErrorMsg = buffer;        return 250;    &#125;    //è¿›è¡Œç™»å½•éªŒè¯    command = &quot;AUTH PLAIN &quot;;    std::string auth = &#x27;\\0&#x27; + info.senderEmail + &#x27;\\0&#x27; + info.password;    command += base64Encode(auth.data(), auth.size());    command += &quot;\\r\\n&quot;;    Write(command.c_str(), command.length());    memset(buffer, 0, 1000);    Read(buffer, 999);    if (strncmp(buffer, &quot;235&quot;, 3) != 0) // login failed    &#123;        m_lastErrorMsg = buffer;        return 250;    &#125;    //è®¾ç½®é‚®ä»¶å‘é€è€…çš„é‚®ç®±åœ°å€    command = &quot;mail FROM:&lt;&quot; + info.senderEmail + &quot;&gt;\\r\\n&quot;;    Write( command.c_str(), command.length());    memset(buffer, 0, 1000);    Read(buffer, 999);    if (strncmp(buffer, &quot;250&quot;, 3) != 0) // not ok    &#123;        m_lastErrorMsg = buffer;        return 250;    &#125;    //è®¾ç½®é‚®ä»¶æ¥æ”¶è€…çš„é‚®ç®±åœ°å€    command = &quot;RCPT TO:&lt;&quot; + info.recipientEmail + &quot;&gt;\\r\\n&quot;;    Write( command.c_str(), command.length());    memset(buffer, 0, 1000);    Read( buffer, 999);    if (strncmp(buffer, &quot;250&quot;, 3) != 0) // not ok    &#123;        m_lastErrorMsg = buffer;        return 250;    &#125;    //å‡†å¤‡å‘é€é‚®ä»¶    command = &quot;data\\r\\n&quot;;    Write( command.c_str(), command.length());    memset(buffer, 0, 1000);    Read( buffer, 999);    if (strncmp(buffer, &quot;354&quot;, 3) != 0) // not ready to receive message    &#123;        m_lastErrorMsg = buffer;        return 354;    &#125;    command = std::move(GetEmailBody(info));    Write( command.c_str(), command.length());    memset(buffer, 0, 1000);    Read(buffer, 999);    if (strncmp(buffer, &quot;250&quot;, 3) != 0) // not ok    &#123;        m_lastErrorMsg = buffer;        return 250;    &#125;    //ç»“æŸå‘é€è¿‡ç¨‹    delete buffer;    Write( &quot;quit\\r\\n&quot;, 6);    DisConnect();    return 0;&#125;std::string SmtpEmail::GetEmailBody(const EmailInfo &amp;info)&#123;    //è®¾å®šé‚®ä»¶çš„å‘é€è€…åç§°ã€æ¥æ”¶è€…åç§°ã€é‚®ä»¶ä¸»é¢˜ï¼Œé‚®ä»¶å†…å®¹ã€‚    std::ostringstream message;    message &lt;&lt; &quot;From: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.sender.c_str(), info.sender.length()) &lt;&lt; &quot;?= &lt;&quot; &lt;&lt; info.senderEmail &lt;&lt; &quot;&gt;\\r\\n&quot;;    std::vector&lt;std::string&gt; vecToList;    for (auto item : info.recvList)    &#123;        std::string to = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.second.c_str(), item.second.length()) + &quot;?= &lt;&quot; + item.first + &quot;&gt;&quot;;        vecToList.push_back(to);    &#125;    message &lt;&lt; &quot;To: &quot; &lt;&lt; join(vecToList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    message &lt;&lt; &quot;Subject: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.subject.c_str(), info.subject.length()) &lt;&lt; &quot;?=\\r\\n&quot;;    message &lt;&lt; &quot;MIME-Version: 1.0\\r\\n&quot;;    if (info.ccEmail.size() &gt; 0)    &#123;        std::vector&lt;std::string&gt; vecCcList;        for (auto item : info.ccEmail)        &#123;            std::string cc = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.first.c_str(), item.first.length()) + &quot;?= &lt;&quot; + item.second + &quot;&gt;&quot;;            vecCcList.push_back(cc);        &#125;        message &lt;&lt; &quot;Cc:&quot; &lt;&lt; join(vecCcList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    &#125;    message &lt;&lt; &quot;Content-Type:multipart/mixed; boundary=\\&quot;Separator_ztq_000\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: multipart/alternative; boundary=\\&quot;Separator_ztq_111\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; &quot;text/plain&quot; &lt;&lt; &quot;; charset=\\&quot;&quot; &lt;&lt; info.charset &lt;&lt; &quot;\\&quot;\\r\\n&quot;;    message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;    message &lt;&lt; &quot;\\r\\n&quot;;                  //æ­¤å¤„è¦åŠ ï¼Œä¸ç„¶é‚®ä»¶æ­£æ–‡æ— å†…å®¹    message &lt;&lt; base64Encode(info.message.c_str(), info.message.length());    message &lt;&lt; &quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111--\\r\\n&quot;;    //---------------------æ–‡ä»¶éƒ¨åˆ†å¤„ç†--------------------------------------    for (auto item : info.attachment)    &#123;        std::string filename = fileBasename(item);        std::string strContext = getFileContents(item.c_str());        if(strContext.empty())        &#123;            std::cerr &lt;&lt; &quot;è¯·æ£€æŸ¥ä¼ å…¥çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®,æ­¤è·¯å¾„æ–‡ä»¶æ·»åŠ åˆ°é™„ä»¶å¤±è´¥ï¼Œä¸å‘é€æ­¤æ–‡ä»¶:&quot; &lt;&lt; std::endl;            std::cerr &lt;&lt; item &lt;&lt; std::endl;        &#125;        else        &#123;            std::string fileContext = base64Encode(strContext.c_str(), strContext.length());            std::string extension = GetFileExtension(filename);            std::string mimetype = GetMimeTypeFromFileName((char*)extension.c_str());            message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;            message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; mimetype &lt;&lt; &quot;; name=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n&quot;;            message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;            message &lt;&lt; &quot;Content-Disposition: attachment; filename=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n\\r\\n&quot;;            message &lt;&lt; fileContext + &quot;\\r\\n\\r\\n&quot;;        //æŠŠè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ä»¥äºŒè¿›åˆ¶å½¢å¼å‘é€        &#125;    &#125;    //-----------------------------------------------------------    message &lt;&lt; &quot;\\r\\n.\\r\\n&quot;;    return message.str();&#125;SmtpEmail::SmtpEmail(const std::string&amp; emailHost, const std::string&amp; port) :m_host(emailHost), m_port(port)&#123;&#125;SmtpEmail::~SmtpEmail()&#123;&#125;int SmtpEmail::Read(void* buf, int num)&#123;    return recv(m_socketfd, (char*)buf, num, 0);&#125;int SmtpEmail::Write(const void* buf, int num)&#123;    return send(m_socketfd, (char*)buf, num, 0);&#125;int SmtpEmail::Connect()&#123;#ifdef WIN32    //start socket connection    WSADATA wsadata;    WSAStartup(MAKEWORD(2, 2), &amp;wsadata);#endif    m_socketfd = socket(AF_INET, SOCK_STREAM, 0);    if (m_socketfd == INVALID_SOCKET)    &#123;        m_lastErrorMsg = &quot;Error on creating socket fd.&quot;;        return -1;    &#125;    addrinfo inAddrInfo = &#123; 0 &#125;;    inAddrInfo.ai_family = AF_INET;    inAddrInfo.ai_socktype = SOCK_STREAM;    printf(&quot;host:%s port:%s \\n&quot;,m_host.c_str(), m_port.c_str());    if (getaddrinfo(m_host.c_str(), m_port.c_str(), &amp;inAddrInfo, &amp;m_addrinfo) != 0) // error occurs    &#123;        m_lastErrorMsg = &quot;Error on calling getadrrinfo().&quot;;        return -2;    &#125;    if (connect(m_socketfd, m_addrinfo-&gt;ai_addr, m_addrinfo-&gt;ai_addrlen))    &#123;        m_lastErrorMsg = &quot;Error on calling connect().&quot;;        return -3;    &#125;    return 0;&#125;int SmtpEmail::DisConnect()&#123;    freeaddrinfo(m_addrinfo);#ifdef WIN32    closesocket(m_socketfd);#else    close(m_socketfd);#endif    return 0;&#125;/*********************************************************************************/std::string SimpleSmtpEmail::GetEmailBody(const EmailInfo &amp;info)&#123;    //è®¾å®šé‚®ä»¶çš„å‘é€è€…åç§°ã€æ¥æ”¶è€…åç§°ã€é‚®ä»¶ä¸»é¢˜ï¼Œé‚®ä»¶å†…å®¹ã€‚    std::ostringstream message;    message &lt;&lt; &quot;From: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.sender.c_str(), info.sender.length()) &lt;&lt; &quot;?= &lt;&quot; &lt;&lt; info.senderEmail &lt;&lt; &quot;&gt;\\r\\n&quot;;    std::vector&lt;std::string&gt; vecToList;    for (auto item : info.recvList)    &#123;        std::string to = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.second.c_str(), item.second.length()) + &quot;?= &lt;&quot; + item.first + &quot;&gt;&quot;;        vecToList.push_back(to);    &#125;    message &lt;&lt; &quot;To: &quot; &lt;&lt; join(vecToList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    message &lt;&lt; &quot;Subject: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.subject.c_str(), info.subject.length()) &lt;&lt; &quot;?=\\r\\n&quot;;    message &lt;&lt; &quot;MIME-Version: 1.0\\r\\n&quot;;    if (info.ccEmail.size() &gt; 0)    &#123;        std::vector&lt;std::string&gt; vecCcList;        for (auto item : info.ccEmail)        &#123;            std::string cc = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.first.c_str(), item.first.length()) + &quot;?= &lt;&quot; + item.second + &quot;&gt;&quot;;            vecCcList.push_back(cc);        &#125;        message &lt;&lt; &quot;Cc:&quot; &lt;&lt; join(vecCcList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    &#125;    message &lt;&lt; &quot;Content-Type:multipart/mixed; boundary=\\&quot;Separator_ztq_000\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: multipart/alternative; boundary=\\&quot;Separator_ztq_111\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; &quot;text/plain&quot; &lt;&lt; &quot;; charset=\\&quot;&quot; &lt;&lt; info.charset &lt;&lt; &quot;\\&quot;\\r\\n&quot;;    message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;    message &lt;&lt; &quot;\\r\\n&quot;;                  //æ­¤å¤„è¦åŠ ï¼Œä¸ç„¶é‚®ä»¶æ­£æ–‡æ— å†…å®¹    message &lt;&lt; base64Encode(info.message.c_str(), info.message.length());    message &lt;&lt; &quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111--\\r\\n&quot;;    //---------------------æ–‡ä»¶éƒ¨åˆ†å¤„ç†--------------------------------------    for (auto item : info.attachment)    &#123;        std::string filename = fileBasename(item);        std::string strContext = getFileContents(item.c_str());        if(strContext.empty())        &#123;            std::cerr &lt;&lt; &quot;è¯·æ£€æŸ¥ä¼ å…¥çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®,æ­¤è·¯å¾„æ–‡ä»¶æ·»åŠ åˆ°é™„ä»¶å¤±è´¥ï¼Œä¸å‘é€æ­¤æ–‡ä»¶:&quot; &lt;&lt; std::endl;            std::cerr &lt;&lt; item &lt;&lt; std::endl;        &#125;        else        &#123;            std::string fileContext = base64Encode(strContext.c_str(), strContext.length());            std::string extension = GetFileExtension(filename);            std::string mimetype = GetMimeTypeFromFileName((char*)extension.c_str());            message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;            message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; mimetype &lt;&lt; &quot;; name=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n&quot;;            message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;            message &lt;&lt; &quot;Content-Disposition: attachment; filename=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n\\r\\n&quot;;            message &lt;&lt; fileContext + &quot;\\r\\n\\r\\n&quot;;        //æŠŠè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ä»¥äºŒè¿›åˆ¶å½¢å¼å‘é€        &#125;    &#125;    //-----------------------------------------------------------    message &lt;&lt; &quot;\\r\\n.\\r\\n&quot;;    return message.str();&#125;/***************************************************************************************************/SslSmtpEmail::~SslSmtpEmail()&#123;&#125;int SslSmtpEmail::Connect()&#123;    if (SmtpEmail::Connect() == 0)    &#123;        SSL_library_init();        OpenSSL_add_all_algorithms();        SSL_load_error_strings();        m_ctx = SSL_CTX_new(SSLv23_client_method());        m_ssl = SSL_new(m_ctx);        SSL_set_fd(m_ssl, m_socketfd);        SSL_connect(m_ssl);    &#125;    return 0;&#125;int SslSmtpEmail::DisConnect()&#123;    SSL_shutdown(m_ssl);    SSL_free(m_ssl);    SSL_CTX_free(m_ctx);    SmtpEmail::DisConnect();    return 0;&#125;int SmtpEmail::SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::string&amp; to, const std::string&amp; subject, const std::string&amp; strMessage)&#123;    EmailInfo info;    info.charset = &quot;UTF-8&quot;;    info.sender = from;    info.password = passs;    info.senderEmail = from;    info.recipientEmail = to;    info.recvList[to] = &quot;&quot;;    info.subject = subject;    info.message = strMessage;    return SMTPComunicate(info);&#125;int SmtpEmail::SendEmail(const std::string&amp; from, const std::string&amp; passs, const std::vector&lt;std::string&gt;&amp; vecTo,                         const std::string&amp; subject, const std::string&amp; strMessage, const std::vector&lt;std::string&gt;&amp; attachment, const std::vector&lt;std::string&gt;&amp; ccList)&#123;    std::vector&lt;std::string&gt; recvList;    recvList.insert(recvList.end(), vecTo.begin(), vecTo.end());    recvList.insert(recvList.end(), ccList.begin(), ccList.end());    for (auto&amp; item : recvList)    &#123;        EmailInfo info;        info.charset = &quot;UTF-8&quot;;        info.sender = from;        info.password = passs;        info.senderEmail = from;;        info.recipientEmail = item;        for (auto item : vecTo)        &#123;            info.recvList[item] = &quot;&quot;;        &#125;        info.subject = subject;        info.message = strMessage;        for (auto&amp; item : ccList)        &#123;            info.ccEmail[item] = item;        &#125;        info.attachment = attachment;        if (SMTPComunicate(info) != 0)        &#123;            return -1;        &#125;    &#125;    return 0;&#125;int SslSmtpEmail::Read(void * buf, int num)&#123;    int ret = SSL_read(m_ssl, buf, num);    return ret;&#125;int SslSmtpEmail::Write(const void * buf, int num)&#123;    return SSL_write(m_ssl, buf, num);&#125;std::string SimpleSslSmtpEmail::GetEmailBody(const EmailInfo &amp;info)&#123;    //è®¾å®šé‚®ä»¶çš„å‘é€è€…åç§°ã€æ¥æ”¶è€…åç§°ã€é‚®ä»¶ä¸»é¢˜ï¼Œé‚®ä»¶å†…å®¹ã€‚    std::ostringstream message;    message &lt;&lt; &quot;From: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.sender.c_str(), info.sender.length()) &lt;&lt; &quot;?= &lt;&quot; &lt;&lt; info.senderEmail &lt;&lt; &quot;&gt;\\r\\n&quot;;    std::vector&lt;std::string&gt; vecToList;    for (auto item : info.recvList)    &#123;        std::string to = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.second.c_str(), item.second.length()) + &quot;?= &lt;&quot; + item.first + &quot;&gt;&quot;;        vecToList.push_back(to);    &#125;    message &lt;&lt; &quot;To: &quot; &lt;&lt; join(vecToList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    message &lt;&lt; &quot;Subject: =?&quot; &lt;&lt; info.charset &lt;&lt; &quot;?b?&quot; &lt;&lt; base64Encode(info.subject.c_str(), info.subject.length()) &lt;&lt; &quot;?=\\r\\n&quot;;    message &lt;&lt; &quot;MIME-Version: 1.0\\r\\n&quot;;    if (info.ccEmail.size() &gt; 0)    &#123;        std::vector&lt;std::string&gt; vecCcList;        for (auto item : info.ccEmail)        &#123;            std::string cc = &quot;=?&quot; + info.charset + &quot;?b?&quot; + base64Encode(item.first.c_str(), item.first.length()) + &quot;?= &lt;&quot; + item.second + &quot;&gt;&quot;;            vecCcList.push_back(cc);        &#125;        message &lt;&lt; &quot;Cc:&quot; &lt;&lt; join(vecCcList, &quot;,&quot;) &lt;&lt; &quot;\\r\\n&quot;;    &#125;    message &lt;&lt; &quot;Content-Type:multipart/mixed; boundary=\\&quot;Separator_ztq_000\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: multipart/alternative; boundary=\\&quot;Separator_ztq_111\\&quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111\\r\\n&quot;;    message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; &quot;text/plain&quot; &lt;&lt; &quot;; charset=\\&quot;&quot; &lt;&lt; info.charset &lt;&lt; &quot;\\&quot;\\r\\n&quot;;    message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;    message &lt;&lt; &quot;\\r\\n&quot;;                  //æ­¤å¤„è¦åŠ ï¼Œä¸ç„¶é‚®ä»¶æ­£æ–‡æ— å†…å®¹    message &lt;&lt; base64Encode(info.message.c_str(), info.message.length());    message &lt;&lt; &quot;\\r\\n\\r\\n&quot;;    message &lt;&lt; &quot;--Separator_ztq_111--\\r\\n&quot;;    //---------------------æ–‡ä»¶éƒ¨åˆ†å¤„ç†--------------------------------------    for (auto item : info.attachment)    &#123;        std::string filename = fileBasename(item);        std::string strContext = getFileContents(item.c_str());        if(strContext.empty())        &#123;            std::cerr &lt;&lt; &quot;è¯·æ£€æŸ¥ä¼ å…¥çš„æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®,æ­¤è·¯å¾„æ–‡ä»¶æ·»åŠ åˆ°é™„ä»¶å¤±è´¥ï¼Œä¸å‘é€æ­¤æ–‡ä»¶:&quot; &lt;&lt; std::endl;            std::cerr &lt;&lt; item &lt;&lt; std::endl;        &#125;        else        &#123;            std::string fileContext = base64Encode(strContext.c_str(), strContext.length());            std::string extension = GetFileExtension(filename);            std::string mimetype = GetMimeTypeFromFileName((char*)extension.c_str());            message &lt;&lt; &quot;--Separator_ztq_000\\r\\n&quot;;            message &lt;&lt; &quot;Content-Type: &quot; &lt;&lt; mimetype &lt;&lt; &quot;; name=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n&quot;;            message &lt;&lt; &quot;Content-Transfer-Encoding: base64\\r\\n&quot;;            message &lt;&lt; &quot;Content-Disposition: attachment; filename=\\&quot;&quot; &lt;&lt; filename &lt;&lt; &quot;\\&quot;\\r\\n\\r\\n&quot;;            message &lt;&lt; fileContext + &quot;\\r\\n\\r\\n&quot;;        //æŠŠè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹ä»¥äºŒè¿›åˆ¶å½¢å¼å‘é€        &#125;    &#125;    //-----------------------------------------------------------    message &lt;&lt; &quot;\\r\\n.\\r\\n&quot;;    return message.str();&#125;\n\n\næµ‹è¯•ä»£ç  main.cppSendEmailå‡½æ•°é‡è½½ï¼Œæ”¯æŒåŸºæœ¬çš„ç®€å•å‘é€æ–‡æœ¬é‚®ä»¶ï¼Œå’Œæ”¯æŒé™„ä»¶ã€æŠ„é€ã€ä»¥åŠå‘ç»™å¤šäººçš„å‘é€æ–¹å¼ï¼Œäº²æµ‹èƒ½å¤Ÿå‘é€æˆåŠŸï¼Œé»˜è®¤å‘é€çš„ç¼–ç æ˜¯utf-8æ ¼å¼\n#include &lt;iostream&gt;#include &lt;stdio.h&gt;#include &quot;mail.h&quot;int main()&#123;    std::string from = &quot;xxxx@163.com&quot;;    std::string passs =&quot;xxxxx&quot;;//è¿™é‡Œæ›¿æ¢æˆè‡ªå·±çš„æˆæƒç     std::string to = &quot;xxx@126.com&quot;;    std::string subject = &quot;hello&quot;;    std::string strMessage = &quot;test&quot;;    std::vector&lt;std::string&gt; vecTo; //å‘é€åˆ—è¡¨    vecTo.push_back(&quot;xxx@126.com&quot;);    std::vector&lt;std::string&gt; ccList;    // ccList.push_back(&quot;xxx@xxx.com.cn&quot;);//æŠ„é€åˆ—è¡¨    std::vector&lt;std::string&gt; attachment;    attachment.push_back(&quot;mail.h&quot;);    attachment.push_back(&quot;/home/soft/Desktop/openwrt-sdk-imx6ul/1/mybuild.sh&quot;);    SmtpBase *base;    SimpleSmtpEmail m_mail(&quot;smtp.163.com&quot;,&quot;25&quot;);    base = &amp;m_mail;    //base-&gt;SendEmail(from, passs, to, subject, strMessage);//æ™®é€šçš„æ–‡æœ¬å‘é€ï¼Œæ˜æ–‡å‘é€    SimpleSslSmtpEmail m_ssl_mail(&quot;smtp.163.com&quot;,&quot;465&quot;);    base=&amp;m_ssl_mail;    //base-&gt;SendEmail(from, passs, to, subject, strMessage);    base-&gt;SendEmail(from, passs,vecTo,subject,strMessage,attachment,ccList);//åŠ å¯†çš„å‘é€ï¼Œæ”¯æŒæŠ„é€ã€é™„ä»¶ç­‰    return 0;&#125;\n\né‚®ç®±æ”¶ä»¶ç®±æŸ¥çœ‹é‚®ä»¶å¤´  \nå®é™…æ”¶åˆ°çš„é‚®ä»¶ \n\nå‚è€ƒé“¾æ¥C++åŸºäºSmtpåè®®å‘é€é‚®ä»¶SMTPåŸºæœ¬åŸç†ä¸C++å®ç°å‘å¤šäººå‘é€é‚®ä»¶\nåè®°å¦‚æœæ‚¨è§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·ç‚¹ä¸ªèµå§ï¼æœ‰é—®é¢˜è¯·ç•™è¨€è¯„è®ºï¼Œæ¬¢è¿æŒ‡å‡ºæ„è§ï¼Œè°¢è°¢ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++11ã€‘futureå’Œasyncç­‰","url":"/posts/2885143113/","content":"C++11çš„futureå’Œasyncç­‰å…³é”®å­—\n\n\n1.asyncå’Œfutureçš„æ¦‚å¿µstd::async å’Œ std::future æ˜¯ C++11 å¼•å…¥çš„æ ‡å‡†åº“åŠŸèƒ½ï¼Œç”¨äºå®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œä½¿å¾—åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­æ›´å®¹æ˜“å¤„ç†å¹¶è¡Œä»»åŠ¡ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©ä½ åœ¨ä¸åŒçº¿ç¨‹ä¸­æ‰§è¡Œå‡½æ•°ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ–¹ä¾¿åœ°è·å–å‡½æ•°çš„ç»“æœã€‚\nåœ¨ä¹‹å‰ä½¿ç”¨çº¿ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•å¾ˆå¥½çš„è·å–åˆ°çº¿ç¨‹æ‰€æ‰§è¡Œå‡½æ•°çš„è¿”å›å€¼ã€‚ç”šè‡³æ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ‰§è¡Œçš„éƒ½æ˜¯ä¸å…³å¿ƒè¿”å›å€¼çš„å‡½æ•°ã€‚å¦‚æœçœŸçš„æƒ³è¦è·å–çº¿ç¨‹å‡½æ•°çš„è¿”å›å€¼ï¼Œå¯ä»¥å°†ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºè¾“å‡ºå‹å‚æ•°æ”¾å…¥çº¿ç¨‹æ‰€æ‰§è¡Œçš„å‡½æ•°ä¸­ã€‚ä¸»æ‰§è¡Œæµæ‰§è¡Œt.join()ç­‰å¾…çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶è·å–åˆ°è¿™ä¸ªè¿”å›å€¼ã€‚\nä½†è¿™æ ·å¹¶ä¸æ˜¯éå¸¸æ–¹ä¾¿ã€‚äºæ˜¯C++11å°±å¼•å…¥äº†å¦‚ä¸Šä¸¤ä¸ªå…³é”®å­—æ¥å¸®åŠ©æˆ‘ä»¬è·å–åˆ°çº¿ç¨‹æ‰€æ‰§è¡Œå‡½æ•°çš„è¿”å›å€¼ã€‚é€‚ç”¨äºå¼‚æ­¥æ‰§è¡ŒæŸäº›è€—æ—¶çš„å‡½æ•°ï¼Œæé«˜ç¨‹åºè¿è¡Œçš„æ•ˆç‡ï¼š\n\nå¼‚æ­¥æ‰§è¡Œè€—æ—¶å‡½æ•°\nä¸»æ‰§è¡Œæµå¹²å…¶ä»–äº‹æƒ…\né€šè¿‡std::futureè·å–åˆ°è¿”å›å€¼\nç»§ç»­å‘åæ‰§è¡Œ\n\nåŸºæœ¬çš„å¹¶è¡Œæ¦‚å¿µåœ¨å¤šçº¿ç¨‹éƒ¨åˆ†éƒ½å·²ç»è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å¤šbbï¼Œç›´æ¥ä¸Šä»£ç å§ï¼\n2.ä½¿ç”¨2.1 std::launchåœ¨ä½¿ç”¨std::asyncä¹‹å‰ï¼Œè¿˜éœ€è¦è®¤è¯†ä¸€ä¸ªæšä¸¾ç±»å‹ launchï¼Œåœ¨ä½¿ç”¨std::asyncçš„å‡½æ•°ä¼ å‚çš„æ—¶å€™ä¼šç”¨åˆ°ï¼ˆè¿™é‡Œå…ˆè¯´ä¸€ä¸‹ï¼Œstd::asyncæ˜¯ç”¨æ¥å¸®æˆ‘ä»¬åˆ›å»ºçº¿ç¨‹çš„ï¼‰\nenum class launch; // std::launch\n\nåœ¨ cplusplusç½‘ç«™ä¸Šï¼Œæœ‰è¿™ä¸ªæšä¸¾ç±»å‹çš„é‡Šä¹‰ï¼Œè¿™é‡Œé¢åªæœ‰ä¿©å€¼\n\nè¯´ä¸€ä¸‹è¿™ä¿©å€¼çš„åŒºåˆ«\n\nlaunch::asyncï¼Œç«‹å³åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œç›®æ ‡å‡½æ•°\nlaunch::deferredï¼Œä¸ç«‹å³åˆ›å»ºçº¿ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…è°ƒç”¨std::futureçš„get()å‡½æ•°æ—¶æ‰è°ƒç”¨ï¼ˆè¿™ä¸ªgetå‡½æ•°æ˜¯ç”¨æ¥è·å–è¿”å›å€¼çš„ï¼‰\n\nå¥½äº†çŸ¥é“è¿™ä¸ªå°±å¤Ÿäº†å“ˆï¼\n2.2 std::result_ofè¿™é‡Œè¿˜å‡ºç°äº†å¦å¤–ä¸€ä¸ªå…³é”®å­—ï¼Œå°±é¡ºå¸¦ä¹Ÿè¯´è¯´æ˜¯å¹²å˜›çš„ï¼ˆå…¶å®æˆ‘è‡ªå·±ä¹Ÿä¸çŸ¥é“ï¼Œç°å­¦ç°å–ï¼‰\n#include &lt;type_traits&gt; // å¤´æ–‡ä»¶template &lt;class Fn&gt;struct result_of;template &lt;class Fn, class... ArgTypes&gt;struct result_of&lt;Fn(ArgTypes...)&gt;;\n\nä»¥ä¸‹æ˜¯ std::result_of çš„åŸºæœ¬ç”¨æ³•å’Œæ¦‚å¿µï¼š\n\nä½¿ç”¨ std::result_of è·å–å‡½æ•°è°ƒç”¨çš„è¿”å›ç±»å‹ï¼š ä½ å¯ä»¥é€šè¿‡å°†å‡½æ•°ç±»å‹å’Œå‚æ•°ç±»å‹ä¼ é€’ç»™ std::result_of æ¥æ¨å¯¼å‡½æ•°è°ƒç”¨çš„è¿”å›ç±»å‹ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ç¼–è¯‘æ—¶è·å–å‡½æ•°è°ƒç”¨çš„ç»“æœç±»å‹ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šå®ƒã€‚\nç”¨æ³•ç¤ºä¾‹ï¼š å‡è®¾æœ‰ä¸€ä¸ªå‡½æ•° int add(int a, int b)ï¼Œä½ å¯ä»¥ä½¿ç”¨ std::result_of æ¥è·å–è¯¥å‡½æ•°åœ¨ç»™å®šå‚æ•°ä¸‹çš„è¿”å›ç±»å‹ã€‚\n\n#include &lt;iostream&gt;#include &lt;type_traits&gt;int add(int a, int b)&#123;    return a + b;&#125;int main()&#123;    std::result_of&lt;decltype(add) &amp;(int, int)&gt;::type result = add(3, 5);    std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\n$ g++ test.cpp -o test -std=c++11$ ./testResult: 8\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨decltypeå…³é”®å­—æ¥æŒ‡å®šå‡½æ•°æŒ‡é’ˆçš„æ—¶å€™ï¼Œå‡½æ•°åå’Œå‡½æ•°å‚æ•°ä¹‹é—´éœ€è¦åŠ ä¸Š&amp;ï¼Œå¦åˆ™æ— æ³•æ­£ç¡®æ¨å¯¼ç±»å‹\ndecltype(add) &amp;(int, int) // æ­£ç¡®decltype(add) (int, int) // é”™è¯¯    \n\n2.3 asyncå…ˆæ¥çœ‹çœ‹asyncå‡½æ•°çš„æ ·æœ¬ï¼Œç¬¬ä¸€ä¸ªæƒ…å†µæ˜¯ä¸æ˜¾ç¤ºä¼ å…¥ std::launchï¼Œç¬¬äºŒä¸ªå‡½æ•°é‡è½½æ˜¯ä¼ å…¥äº†std::launchä½œä¸ºå¯åŠ¨ç­–ç•¥\n#include &lt;future&gt; // å¤´æ–‡ä»¶// unspecified policy (1)\ttemplate &lt;class Fn, class... Args&gt;  future&lt;typename result_of&lt;Fn(Args...)&gt;::type&gt;    async (Fn&amp;&amp; fn, Args&amp;&amp;... args);// specific policy (2)\ttemplate &lt;class Fn, class... Args&gt;  future&lt;typename result_of&lt;Fn(Args...)&gt;::type&gt;    async (launch policy, Fn&amp;&amp; fn, Args&amp;&amp;... args);\n\nåœ¨cplusplusç½‘ç«™ä¸Šï¼Œè¯´åˆ°äº†ç¬¬ä¸€ç§æƒ…å†µæ˜¯ç”±ç¼–è¯‘å™¨è‡ªä¸»å†³å®šåˆ°åº•æ˜¯é‡‡ç”¨ std::launch::async æˆ– std::launch::deferredï¼Œè¿™å°±éœ€è¦æ ¹æ®å¹³å°å’Œç¼–è¯‘å™¨å®ç°ä»¥åŠè°ƒç”¨é€»è¾‘çš„ä¸åŒæ¥å…·ä½“åˆ†æäº†ã€‚æ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ç¬¬ä¸€ä¸ªï¼Œè¿˜æ˜¯ç›´æ¥æŒ‡å®šlaunch policyï¼ˆç¿»è¯‘è¿‡æ¥æ˜¯å¯åŠ¨ç­–ç•¥ï¼‰çš„ä¼šå¥½ä¸€ç‚¹ã€‚\næ‰€ä»¥åªçœ‹ç¬¬äºŒä¸ªğŸ‘‡\ntemplate &lt;class Fn, class... Args&gt;  future&lt;typename result_of&lt;Fn(Args...)&gt;::type&gt;    async (launch policy, Fn&amp;&amp; fn, Args&amp;&amp;... args);\n\nè¿™é‡Œé‡‡ç”¨äº†å¯å˜æ¨¡æ¿å‚æ•°æ¥æ¥æ”¶å¤šä¸ªå‡½æ•°å‚æ•°ï¼Œç±»ä¼¼äºå¯å˜å‚æ•°åˆ—è¡¨ã€‚è¿™é‡Œè¿˜ä½¿ç”¨äº†typenameå…³é”®å­—æ¥å‘ŠçŸ¥ç¼–è¯‘å™¨result_of&lt;Fn(Args...)&gt;::typeæ˜¯ä¸€ä¸ªå‚æ•°ç±»å‹ï¼Œéœ€è¦åœ¨æ¨¡æ¿å®ä¾‹åŒ–äº†ä¹‹åå†å»è·å–ç¡®å®šçš„ç±»å‹ã€‚è€Œclass Fnæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æ¨¡æ¿å˜é‡ã€‚\n\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯std::launchï¼Œä¸Šæ–‡å·²ç»æåˆ°è¿‡ä¸¤ä¸ªä¸åŒé€‰é¡¹çš„åŒºåˆ«äº†\nç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç›´æ¥ä¸¢å‡½æ•°åå°±å¯ä»¥äº†\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¿™ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œä¹Ÿæ˜¯ç›´æ¥ä¸¢å‚æ•°å°±å¯ä»¥äº†\n\nå¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è°ƒç”¨ç¤ºä¾‹ï¼ˆå¹¶éå®Œæ•´ç¤ºä¾‹ï¼‰\n#include &lt;future&gt; // å¤´æ–‡ä»¶// å‡½æ•°int add(int a, int b) &#123;    return a + b;&#125;// è°ƒç”¨std::async(std::launch::async, add, 3, 5);\n\nè°ƒç”¨äº†è¿™ä¸ªå‡½æ•°åï¼ŒCPPä¼šå¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ ¹æ®ç¬¬ä¸€ä¸ªå¯åŠ¨å‚æ•°çš„ä¸åŒï¼Œå†³å®šå•¥æ—¶å€™åˆ›å»ºè¿™ä¸ªçº¿ç¨‹ã€‚æœ€ç»ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡futureè·å–åˆ°çº¿ç¨‹æ‰§è¡Œå‡½æ•°çš„è¿”å›å€¼ã€‚\n2.4 futureäººå¦‚å…¶åï¼Œè¿™ä¸ªç±»å‹æ˜¯ç”¨æ¥å£°æ˜ä¸€ä¸ªæœªæ¥çš„å˜é‡çš„ã€‚å› ä¸ºstd::asyncä¼šå¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå‡½æ•°ï¼Œæ­¤æ—¶è¯¥çº¿ç¨‹å‡½æ•°çš„è¿”å›å€¼æ˜¯æœªçŸ¥çš„ï¼Œè¿™ä¸ªæœªæ¥å˜é‡å°±æ˜¯æå‰çš„ä¸€ä¸ªå£°æ˜ï¼Œå½“çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å‡½æ•°å¹¶è¿”å›å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ‰çœŸæ­£è¢«åˆå§‹åŒ–ä¸ºæˆ‘ä»¬çœŸæ­£éœ€è¦çš„é‚£ä¸ªå€¼ã€‚\ntemplate &lt;class T&gt;  future;// specialization : T is a reference type (R&amp;)template &lt;class R&amp;&gt; future&lt;R&amp;&gt;;     // specialization : T is voidtemplate &lt;&gt;         future&lt;void&gt;;  \n\nå…¶æœ‰å¦‚ä¸‹å‡ ä¸ªæˆå‘˜å‡½æ•°\n\ngetï¼šè·å–å¯¹åº”asyncæ‰€æ‰§è¡Œå‡½æ•°çš„è¿”å›å€¼ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæ¯•åˆ™é˜»å¡ç­‰å¾…\nvalidï¼šboolï¼Œåˆ¤æ–­å½“å‰futureç±»å‹åˆ°åº•æœ‰æ²¡æœ‰å’Œä¸€ä¸ªasyncå‡½æ•°æ‰€å¯¹åº”\nshareï¼šå°†futureå¯¹è±¡è½¬æˆä¸€ä¸ªstd::shared_futureå¯¹è±¡\nwaitï¼šç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œä½†ä¸è·å–ç»“æœ\nwait_forï¼šç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œä½†æœ‰ç­‰å¾…çš„æ—¶é•¿ï¼ˆæ²¡ç­‰åˆ°å°±è¿”å›é”™è¯¯ï¼‰\nwait_untilï¼šç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆï¼Œç›´åˆ°ä¸€ä¸ªç¡®å®šçš„æ—¶é—´ï¼ˆæ²¡ç­‰åˆ°å°±è¿”å›é”™è¯¯ï¼‰\n\nåé¢ä¸‰ä¸ª wait å‡½æ•°å’Œ CPP çº¿ç¨‹ä¸­çš„ wait å‡½æ•°å¦‚å‡ºä¸€è¾™ã€‚\n2.5 share_futureshare_futureå°±å¥½æ¯”share_ptræ™ºèƒ½æŒ‡é’ˆï¼Œå…¶è®©futureå¯¹è±¡ä»å•ä¸€æ‰€æœ‰æƒå˜æˆäº†å¤šäººå¯ç”¨ã€‚æœ¬æ¥æ˜¯ä¸€ä¸ªåªèƒ½åä¸€äººçš„é¤æ¡Œï¼Œç°åœ¨å˜æˆäº†å¯ä»¥åå¾ˆå¤šäººçš„å¤§æ¡Œå­ã€‚\ntemplate &lt;class T&gt;  shared_future;template &lt;class R&amp;&gt; shared_future&lt;R&amp;&gt;;   // specialization : T is a reference type (R&amp;)template &lt;&gt;         shared_future&lt;void&gt;; // specialization : T is void\n\næˆå‘˜å‡½æ•°å’Œfutureå®Œå…¨ä¸€æ ·ï¼ˆåªä¸è¿‡ä¹ˆæœ‰share()å‡½æ•°ï¼‰è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼›\n\nfutureæ˜¯å•äººé¤æ¡Œï¼Œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œgetå‡½æ•°ï¼›å½“getè¢«æ‰§è¡Œåï¼Œè¿™ä¸ªfutureä¼šå¤±æ•ˆã€‚\nshare_futureæ˜¯å¤§æ¡Œå­ï¼Œæ‰€æœ‰äººä¸€èµ·ååœ¨è¿™ä¸ªæ¡Œå­ä¸Šç­‰æœåŠ¡å‘˜ä¸Šèœï¼Œäº’ä¸å¹²æ‰°ï¼›\n\nå½“ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼éœ€è¦åœ¨å¤šä¸ªçº¿ç¨‹ä¸­è¢«å…±äº«ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨shared_futureäº†ã€‚\n2.5 æµ‹è¯•2.5.1 æ­£å¸¸æµ‹è¯•å¦‚ä¸‹ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¹¶ä¸”é€šè¿‡æä¾›ä¸åŒçš„std::launchå¯åŠ¨ç­–ç•¥ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è§‚å¯Ÿåˆ°ä¸åŒçš„ç°è±¡\n#include &lt;iostream&gt;#include &lt;future&gt;#include &lt;type_traits&gt; // result_of#include &lt;sys/unistd.h&gt; //sleepint add(int a, int b)&#123;    std::cout &lt;&lt; &quot;Add  Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Sleeping before add...&quot; &lt;&lt; std::endl;    sleep(4);    return a + b;&#125;int main() &#123;    std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Start&quot; &lt;&lt; std::endl;    //std::future&lt;int&gt; futureResult = std::async(std::launch::deferred, add, 3, 5);  // deferredä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹    std::future&lt;int&gt; futureResult = std::async(std::launch::async, add, 3, 5); // åˆ›å»ºæ–°çº¿ç¨‹    sleep(3);     std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Waiting for result...&quot; &lt;&lt; std::endl;    int result = futureResult.get();  // ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœ    std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    sleep(3);        return 0;&#125;\n\nå¦‚æœä½¿ç”¨std::launch::asyncä½œä¸ºå¯åŠ¨ç­–ç•¥ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡Œaddå‡½æ•°çš„çº¿ç¨‹idå’Œä¸»çº¿ç¨‹çš„idæ˜¯ä¸åŒçš„ï¼Œé€šè¿‡linuxä¸‹çš„ps -aLå‘½ä»¤ä¹Ÿèƒ½è§‚å¯Ÿåˆ°å‡ºç°ä¸¤ä¸ªçº¿ç¨‹ã€‚å¯ä»¥ç”¨å¦‚ä¸‹è„šæœ¬æ¥å®æ—¶ç›‘æ§çº¿ç¨‹çŠ¶æ€ã€‚\nwhile :; do ps jax | head -1 &amp;&amp; ps -aL |  grep -v grep;sleep 1; echo &quot;########################&quot;; done\n\nstd::launch::asyncä¸‹ç¨‹åºæ‰§è¡Œçš„è¾“å‡ºç»“æœ\nMain Thread 139869475694400 | StartAdd  Thread 139869457655552 | Sleeping before add...Main Thread 139869475694400 | Waiting for result...Main Thread 139869475694400 | Result: 8\n\nå¦‚æœä½¿ç”¨std::launch::deferredä½œä¸ºå¯åŠ¨ç­–ç•¥ï¼Œåˆ™ä¼šå‘ç°è¿™ä¸¤ä¸ªçº¿ç¨‹çš„idæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œè¿™ä»£è¡¨å®é™…ä¸Šå…¶æ‰§è¡Œäº†å¹¶è¡Œçš„ç­–ç•¥ï¼Œç¨‹åºå°±æ˜¯åœ¨ä¸»æ‰§è¡Œæµä¸Šé¢è¿è¡Œçš„ï¼Œå¹¶æ²¡æœ‰æ–°å¼€ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œã€‚è¿™ä¹Ÿç¬¦åˆdeferredä½œä¸ºâ€œå»¶è¿Ÿè¿è¡Œâ€çš„ç‰¹æ€§ã€‚\nMain Thread 139789724776256 | StartMain Thread 139789724776256 | Waiting for result...Add  Thread 139789724776256 | Sleeping before add...Main Thread 139789724776256 | Result: 8\n\n2.5.2 å¤šçº¿ç¨‹getä¸€ä¸ªfutureåœ¨å¦‚ä¸‹ä»£ç ä¸­ï¼Œæˆ‘å†™äº†ä¸€ä¸ªvoid future_get_func(std::future&lt;int&gt;&amp; fu)çš„å‡½æ•°ï¼Œå°è¯•å¼€ä¸€ä¸ªçº¿ç¨‹æ¥getï¼Œç„¶åä¸»æ‰§è¡Œæµåˆgetä¸€æ¬¡ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚\n#include &lt;iostream&gt;#include &lt;future&gt;#include &lt;functional&gt;#include &lt;thread&gt;#include &lt;type_traits&gt; // result_of#include &lt;sys/unistd.h&gt; // sleepint add(int a, int b)&#123;    std::cout &lt;&lt; &quot;Add  Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Sleeping before add...&quot; &lt;&lt; std::endl;    sleep(4);    return a + b;&#125;void future_get_func_shared(std::shared_future&lt;int&gt;&amp; fu)&#123;    int result = fu.get();  // ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœ    std::cout &lt;&lt; &quot;Func Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    sleep(2);&#125;void future_get_func(std::future&lt;int&gt;&amp; fu)&#123;    int result = fu.get();  // ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœ    std::cout &lt;&lt; &quot;Func Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    sleep(2);&#125;int main() &#123;    std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Start&quot; &lt;&lt; std::endl;    //std::future&lt;int&gt; futureResult = std::async(std::launch::deferred, add, 3, 5); // ä¸ä¼šåˆ›å»ºæ–°çº¿ç¨‹    std::future&lt;int&gt; futureResult = std::async(std::launch::async, add, 3, 5); // åˆ›å»ºæ–°çº¿ç¨‹    sleep(3);     std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Waiting for result...&quot; &lt;&lt; std::endl;        // å°è¯•æµ‹è¯•å¤šçº¿ç¨‹getä¼šå‘ç”Ÿä»€ä¹ˆ        std::thread t1(future_get_func, std::ref(futureResult)); // å¼€ä¸ªçº¿ç¨‹æ¥get    t1.detach(); // ç›´æ¥åˆ†ç¦»çº¿ç¨‹    sleep(1);    int result = futureResult.get();  // ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆå¹¶è·å–ç»“æœ    std::cout &lt;&lt; &quot;Main Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    sleep(3);        return 0;&#125;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚ä¸‹åˆ›å»ºçº¿ç¨‹çš„ä¼ å‚å¿…é¡»è¦ç”¨std::refåŒ…è£¹ï¼Œæ¥å‘ŠçŸ¥çº¿ç¨‹è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚å› ä¸º std::thread è¦æ±‚å‚æ•°å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­è¢«è°ƒç”¨ï¼Œè€Œ std::future å¹¶ä¸èƒ½ç›´æ¥ä¼ é€’ç»™ std::threadï¼›\nstd::thread t1(future_get_func, std::ref(futureResult)); //æ­£ç¡®std::thread t1(future_get_func, futureResult); //é”™è¯¯\n\nç¼–è¯‘é€šè¿‡åæ‰§è¡Œï¼Œä¼šå‘ç°è·‘å‡ºæ¥äº†ä¸€ä¸ªstd::future_errorå¼‚å¸¸ï¼Œä»£è¡¨æˆ‘ä»¬åœ¨ä¸€ä¸ªæ— æ•ˆçš„futureä¸Šè°ƒç”¨äº†getå‡½æ•°ã€‚\nMain Thread 139869577889600 | StartAdd  Thread 139869559850752 | Sleeping before add...Main Thread 139869577889600 | Waiting for result...Func Thread 139869551458048 | Result: 8terminate called after throwing an instance of &#x27;std::future_error&#x27;  what():  std::future_error: No associated stateAborted\n\nè®°ä½äº†ï¼Œstd::futureåœ¨è°ƒç”¨äº†ä¸€æ¬¡getä¹‹åå°†ä¸å†ä¸å¯¹åº”çš„std::asyncå…³è”ï¼Œæ‰€ä»¥æ‰ä¼šéœ€è¦share_futureçš„å‡ºç°ï¼\næ”¹æˆshare_futureå†æ‰§è¡Œä¸Šé¢è¿™å¥—é€»è¾‘ï¼Œå°±ä¼šå‘ç°æˆåŠŸè·‘èµ·æ¥äº†ã€‚\nMain Thread 140369883957056 | StartAdd  Thread 140369865918208 | Sleeping before add...Main Thread 140369883957056 | Waiting for result...Func Thread 140369857525504 | Result: 8Main Thread 140369883957056 | Result: 8\n\n2.5.3 å¼‚å¸¸å¤„ç†int add(int a, int b)&#123;    std::cout &lt;&lt; &quot;Add  Thread &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; | Sleeping before add...&quot; &lt;&lt; std::endl;    sleep(4);    throw std::runtime_error(&quot;An error occurred&quot;);    return a + b;&#125;\n\nå¦‚æœasyncæ‰§è¡Œçš„å‡½æ•°ä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸å°†ä¼šè¢«ä¼ å›ä¸»æ‰§è¡Œæµï¼Œå¯ä»¥åœ¨ä¸»æ‰§è¡Œæµä¸­è¢«å¤„ç†ã€‚è€Œå¦‚æœç›´æ¥ä½¿ç”¨çº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå…¶å¼‚å¸¸ä¸ä¼šè¢«æ•æ‰ï¼Œè€Œæ˜¯ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹é€€å‡ºã€‚\nä¸‹å›¾ï¼Œä½¿ç”¨asyncè¿è¡Œï¼ŒæˆåŠŸæ‰“å°å‡ºå¼‚å¸¸ï¼ˆæ•è·æˆåŠŸï¼‰\n\nä¸‹å›¾ï¼Œä½¿ç”¨çº¿ç¨‹è¿è¡Œï¼Œè¿›ç¨‹é€€å‡º\n\n2.6 launch::deferredçš„çœŸæ­£æ„ä¹‰å¦‚æœstd::launch::deferredæ˜¯åŒæ­¥æ‰§è¡Œï¼Œè¿™æ ·å†™ä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨å‡½æ•°ï¼Œè€Œæ˜¯ä½¿ç”¨asyncï¼Ÿ\nNONONO éä¹Ÿéä¹Ÿï¼Œå’Œç›´æ¥è°ƒç”¨Addå‡½æ•°ç›¸æ¯”ï¼Œç”¨async+deferredç­–ç•¥è¿™æ ·çš„æ–¹å¼è°ƒç”¨Addå‡½æ•°è¿˜æ˜¯æœ‰äº›åŒºåˆ«çš„ï¼š\n\næ¨è¿Ÿæ‰§è¡Œï¼šç›´æ¥è°ƒç”¨Addå‡½æ•°æ˜¯ç«‹é©¬æ‰§è¡Œï¼Œä½†æ˜¯ç”¨asyncå¯ä»¥æ¨è¿Ÿåˆ°è°ƒç”¨getçš„æ—¶å€™æ‰æ‰§è¡Œ\nå»¶è¿Ÿè®¡ç®—ï¼šæœ‰çš„æ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯éœ€è¦ç«‹é©¬ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥å°±å¯ä»¥å»¶è¿Ÿä¸€ä¼šå†æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå…ˆæŠŠå‡½æ•°çš„è°ƒç”¨æèµ·æ¥ï¼Œåé¢åªéœ€è¦ä¸€ä¸ªgetå°±èƒ½è·å–åˆ°ç»“æœäº†ï¼ˆé¿å…ä¸¤ä¸ªéƒ¨ä½ä¹‹é—´çš„ä»£ç è¾ƒé•¿ï¼Œåç»­æ‰¾ä¸åˆ°æˆ‘ä»¬éœ€è¦çš„é‚£ä¸¤ä¸ªå˜é‡çš„åå­—äº†ï¼‰\né¿å…çº¿ç¨‹åˆ›å»ºï¼šå¹¶ä¸æ˜¯ä»€ä¹ˆæ—¶å€™å¤šçº¿ç¨‹éƒ½æ›´å¥½ï¼Œæœ‰äº›æ—¶å€™åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„æ¶ˆè€—è¿˜ä¸å¦‚ç›´æ¥æ‰§è¡Œå‡½æ•°æ¥çš„å¿«ï¼ˆæ¯”å¦‚å‡½æ•°å¹²çš„æ´»å¾ˆå°çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸€äº›O(1)çš„ç®—æ³•ï¼‰\n\næ‰€ä»¥ï¼Œè¿™ä¸ªå…³é”®å­—å¤šå°‘è¿˜æ˜¯æœ‰ç‚¹ä½œç”¨äº†ã€‚\n2.7 future_error&#x2F;errc&#x2F;statusé™¤äº†futureå’Œshare_futureï¼Œè¿˜æœ‰å¦‚ä¸‹å‡ ä¸ªç±»å‹\n\nstd::future_errorï¼š std::future_error æ˜¯ä¸€ä¸ªå¼‚å¸¸ç±»ï¼Œç”¨äºè¡¨ç¤ºä¸ std::future ç›¸å…³çš„é”™è¯¯ã€‚å½“åœ¨ä½¿ç”¨ std::future æ—¶å‡ºç°é”™è¯¯ï¼Œä¾‹å¦‚è·å–ç»“æœæ—¶å¼‚æ­¥ä»»åŠ¡æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå°±ä¼šæŠ›å‡º std::future_error å¼‚å¸¸ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†å¼‚å¸¸ç±»å‹ï¼Œé€šå¸¸é€šè¿‡æ•è·å¼‚å¸¸å¯¹è±¡æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é—®é¢˜ã€‚\nstd::future_errcï¼š std::future_errc æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œç”¨äºè¡¨ç¤º std::future_error ä¸­çš„ä¸åŒé”™è¯¯æƒ…å†µã€‚è¿™æ ·çš„æšä¸¾ç±»å‹æ˜¯ä¸ºäº†åœ¨å¤„ç†å¼‚å¸¸æ—¶æ›´åŠ æ˜ç¡®å’Œæ–¹ä¾¿ã€‚å®ƒåŒ…å«äº†ä¸€ç³»åˆ—å¯èƒ½çš„é”™è¯¯ï¼Œå¦‚ broken_promiseï¼ˆpromise è¢«ç ´åï¼Œå³ promise å¯¹è±¡çš„ set_value æˆ– set_exception è¢«å¤šæ¬¡è°ƒç”¨ï¼‰å’Œ future_already_retrievedï¼ˆfuture å¯¹è±¡å·²ç»è¢«è·å–è¿‡ä¸€æ¬¡ï¼‰ç­‰ã€‚\nstd::future_statusï¼š std::future_status æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œç”¨äºè¡¨ç¤º std::future çš„çŠ¶æ€ã€‚å®ƒæè¿°äº†ä¸€ä¸ª std::future å¯¹è±¡çš„å½“å‰æƒ…å†µï¼ŒæŒ‡ç¤ºå¼‚æ­¥ä»»åŠ¡æ˜¯å¦å·²å®Œæˆã€æ˜¯å¦æœ‰æ•ˆç­‰ã€‚std::future_status åŒ…å«ä¸‰ä¸ªå€¼ï¼šreadyï¼ˆå¼‚æ­¥ä»»åŠ¡å·²å®Œæˆï¼Œå¯ä»¥è·å–ç»“æœï¼‰ã€timeoutï¼ˆç­‰å¾…è¶…æ—¶ï¼Œå³å¼‚æ­¥ä»»åŠ¡è¿˜æœªå®Œæˆï¼‰ã€deferredï¼ˆå¼‚æ­¥ä»»åŠ¡å»¶è¿Ÿæ‰§è¡Œï¼‰ã€‚\n\nå…¶ä¸­ wait_for çš„è¿”å›å€¼æ˜¯ std::future_statusï¼ŒåŒ…å«ä¸‰ç§æƒ…å†µ\n\n\n\nvalue\ndescription\n\n\n\nfuture_status::ready\nThe shared state is ready: the producer has set a value or exception.\n\n\nfuture_status::timeout\nThe function waited for rel_time without the shared state becoming ready.\n\n\nfuture_status::deferred\nThe shared state contains a deferred function.\n\n\nç¬¬ä¸€ä¸ªæƒ…å†µæ˜¯futureçš„ç›®æ ‡å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥å»è·å–è¿”å›å€¼äº†ã€‚\nç¬¬äºŒä¸ªæƒ…å†µæ˜¯wait_forç­‰å¾…è¶…æ—¶äº†ã€‚\nç¬¬ä¸‰ä¸ªæƒ…å†µæ˜¯futureä¸­åŒ…å«çš„å‡½æ•°ä½¿ç”¨çš„ç­–ç•¥æ˜¯std::launch::deferredï¼Œæ­¤æ—¶wait_forå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡½æ•°åªæœ‰åœ¨future.get()çš„æ—¶å€™æ‰ä¼šè¢«æ‰§è¡Œï¼Œwait_forä¼šè¢«ç›´æ¥è¿”å›ã€‚\n3.ä¸ºä»€ä¹ˆC++ä¼šå‡ºç°futrueï¼Ÿä¸ºå•¥è¦å‡ºä¸€ä¸ªfutureï¼Ÿç›´æ¥ç”¨è€åŠæ³•ä¸ä¹Ÿå¯ä»¥è¿™ä¹ˆç©å—ï¼Ÿ\n\nè¿™éƒ¨åˆ†æ˜¯GPTçš„å›ç­”\n\nC++ æ ‡å‡†åº“å¼•å…¥ std::future å’Œç›¸å…³çš„å¼‚æ­¥ç¼–ç¨‹æœºåˆ¶ï¼Œæ˜¯ä¸ºäº†æ›´å¥½åœ°æ”¯æŒå¹¶å‘ç¼–ç¨‹å’Œå¤šçº¿ç¨‹ç¯å¢ƒã€‚è¿™äº›æœºåˆ¶çš„å‡ºç°æœ‰å‡ ä¸ªåŸå› å’ŒåŠ¨æœºï¼š\n\nå¹¶å‘æ€§å’Œæ€§èƒ½æå‡ï¼š åœ¨ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­ï¼Œå¤šæ ¸å¤„ç†å™¨å·²ç»æˆä¸ºå¸¸æ€ã€‚ä¸ºäº†å……åˆ†åˆ©ç”¨è¿™äº›å¤šæ ¸èµ„æºï¼Œç¼–å†™å¹¶å‘ä»£ç å˜å¾—é‡è¦ã€‚std::future æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°è·å–ä»»åŠ¡çš„ç»“æœï¼Œä»è€Œå…è®¸ç¨‹åºåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ€§èƒ½ã€‚\nä»»åŠ¡åˆ†ç¦»ï¼š åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªå­ä»»åŠ¡ï¼Œåœ¨ä¸åŒçš„çº¿ç¨‹ä¸­å¹¶è¡Œæ‰§è¡Œï¼Œç„¶ååˆå¹¶å­ä»»åŠ¡çš„ç»“æœã€‚std::future å…è®¸ä½ åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡å®Œæˆï¼Œä»è€Œæ”¯æŒè¿™ç§ä»»åŠ¡åˆ†ç¦»å’Œå¹¶è¡Œæ‰§è¡Œçš„æ¨¡å¼ï¼ˆå…¶å®æœ€ä¸»è¦çš„è¿˜æ˜¯è·å–çº¿ç¨‹æ‰€æ‰§è¡Œå‡½æ•°çš„è¿”å›å€¼ï¼‰ã€‚\né¿å…é˜»å¡ï¼š åœ¨ä¼ ç»Ÿçš„åŒæ­¥ç¼–ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªæ“ä½œéœ€è¦ç­‰å¾…ï¼Œä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ã€‚è€Œå¼‚æ­¥ç¼–ç¨‹æœºåˆ¶å…è®¸çº¿ç¨‹ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œè€Œä¸å¿…ç­‰å¾…ä¸€ä¸ªæ½œåœ¨çš„è€—æ—¶æ“ä½œå®Œæˆã€‚std::future å…è®¸ä½ åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å‘èµ·å¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨éœ€è¦çš„æ—¶å€™è·å–æ“ä½œçš„ç»“æœï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„é˜»å¡ã€‚\nå¼‚å¸¸å¤„ç†ï¼š åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œå¤„ç†å¼‚æ­¥ä»»åŠ¡çš„å¼‚å¸¸å¯èƒ½å˜å¾—å¤æ‚ï¼Œå› ä¸ºå¼‚æ­¥ä»»åŠ¡åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚std::future å¼•å…¥äº†å¼‚å¸¸ä¼ é€’æœºåˆ¶ï¼Œå…è®¸å¼‚æ­¥ä»»åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶å°†è¿™äº›å¼‚å¸¸ä¼ é€’åˆ°ç­‰å¾…ç»“æœçš„çº¿ç¨‹ä¸­ã€‚\n\næ€»ä¹‹ï¼ŒC++ çš„ std::future å’Œç›¸å…³çš„å¼‚æ­¥ç¼–ç¨‹æœºåˆ¶æä¾›äº†ä¸€ç§æ›´é«˜çº§åˆ«ã€æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥å¤„ç†å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹ã€‚è¿™äº›æœºåˆ¶ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿæ›´å®¹æ˜“åœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨çš„æ€§èƒ½ï¼Œå¹¶æ›´çµæ´»åœ°è®¾è®¡å¹¶å‘ä»£ç ï¼Œä»è€Œåœ¨é¢å¯¹å¹¶å‘å’Œå¼‚æ­¥ä»»åŠ¡æ—¶èƒ½å¤Ÿæ›´å¥½åœ°ç®¡ç†èµ„æºã€æé«˜æ•ˆç‡å’Œå¤„ç†å¼‚å¸¸ã€‚\n4.promise4.1 æ¦‚å¿µstd::promise æ˜¯ C++ æ ‡å‡†åº“ä¸­ç”¨äºåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­äº§ç”Ÿç»“æœï¼Œç„¶ååœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è·å–ç»“æœçš„å·¥å…·ã€‚å®ƒæä¾›äº†ä¸€äº›æˆå‘˜å‡½æ•°æ¥è®¾ç½®ç»“æœã€å¤„ç†å¼‚å¸¸ä»¥åŠè·å–å…³è”çš„ std::future å¯¹è±¡ç­‰ã€‚\ntemplate &lt;class T&gt;  promise;template &lt;class R&amp;&gt; promise&lt;R&amp;&gt;;     // specialization : T is a reference type (R&amp;)template &lt;&gt;         promise&lt;void&gt;;   // specialization : T is void\n\nä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ std::promise æˆå‘˜å‡½æ•°åŠå…¶ç”¨æ³•ï¼š\n\nset_valueï¼š ç”¨äºè®¾ç½®ç»“æœå€¼ã€‚å¦‚æœä½ å·²ç»é€šè¿‡ get_future() è·å–äº†ä¸€ä¸ª std::future å¯¹è±¡ï¼Œè°ƒç”¨ set_value å°†ä¼šä½¿ç­‰å¾…ç»“æœçš„çº¿ç¨‹è¢«å”¤é†’å¹¶è·å–ç»“æœã€‚\nstd::promise&lt;int&gt; promiseObj;std::future&lt;int&gt; futureResult = promiseObj.get_future();// åœ¨æŸä¸ªçº¿ç¨‹ä¸­è®¾ç½®ç»“æœå€¼promiseObj.set_value(42);\n\nset_exceptionï¼š ç”¨äºè®¾ç½®å¼‚å¸¸ï¼Œå°†åœ¨ç­‰å¾…ç»“æœçš„çº¿ç¨‹ä¸­æŠ›å‡ºã€‚è¿™å…è®¸ä½ åœ¨äº§ç”Ÿç»“æœçš„çº¿ç¨‹ä¸­å¤„ç†å¼‚å¸¸æƒ…å†µã€‚\ntry &#123;    // äº§ç”Ÿå¼‚å¸¸    throw std::runtime_error(&quot;An error occurred&quot;);&#125; catch (...) &#123;    // å°†å¼‚å¸¸è®¾ç½®åˆ° promise å¯¹è±¡ä¸­    promiseObj.set_exception(std::current_exception());&#125;\n\nget_futureï¼š è¿”å›ä¸ std::promise å…³è”çš„ std::future å¯¹è±¡ã€‚é€šè¿‡è¿™ä¸ª std::futureï¼Œä½ å¯ä»¥åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ç­‰å¾…å¹¶è·å–ç»“æœã€‚\nstd::promise&lt;int&gt; promiseObj;std::future&lt;int&gt; futureResult = promiseObj.get_future();\n\nswapï¼š äº¤æ¢ä¸¤ä¸ª std::promise å¯¹è±¡çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬å…³è”çš„ std::future å¯¹è±¡å’Œè®¾ç½®çš„ç»“æœã€‚\nstd::promise&lt;int&gt; promise1;std::promise&lt;int&gt; promise2;// äº¤æ¢ä¸¤ä¸ª promise å¯¹è±¡çš„çŠ¶æ€promise1.swap(promise2);\n\nvalidï¼š æ£€æŸ¥ std::promise å¯¹è±¡æ˜¯å¦æœ‰æ•ˆï¼Œå³æ˜¯å¦ä¸ä¸€ä¸ª std::future å¯¹è±¡å…³è”ã€‚\nstd::promise&lt;int&gt; promiseObj;if (promiseObj.valid()) &#123;    // promiseObj æœ‰æ•ˆ&#125; else &#123;    // promiseObj æ— æ•ˆ&#125;\n\nè¿˜æœ‰ä¸‹é¢è¿™ä¿©ä¸ªæˆå‘˜å‡½æ•°ï¼Œçœ‹åå­—ä¹Ÿèƒ½çŒœå‡ºæ¥å®ƒæ˜¯å¹²å˜›çš„ï¼Œå°±ä¸å¤šè¯´äº†\n\nset_value_at_thread_exit\nSet value at thread exit (public member function )\n\nset_exception_at_thread_exit\nSet exception at thread exit (public member function )\n\n\nè¿™äº›æˆå‘˜å‡½æ•°å…è®¸ä½ åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­äº§ç”Ÿç»“æœæˆ–å¼‚å¸¸ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­ç­‰å¾…å’Œå¤„ç†è¿™äº›ç»“æœæˆ–å¼‚å¸¸ã€‚å®ƒä»¬ä¸ºå¤šçº¿ç¨‹ç¼–ç¨‹æä¾›äº†ä¸€ç§å¯é çš„æ–¹å¼æ¥ä¼ é€’æ•°æ®å’Œæ§åˆ¶æµã€‚è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ std::promise æ—¶ï¼Œä½ éœ€è¦ä»”ç»†å¤„ç†å¼‚å¸¸å’Œçº¿ç¨‹åŒæ­¥ï¼Œä»¥ç¡®ä¿æ­£ç¡®çš„ç»“æœä¼ é€’ã€‚\n4.2 ç¤ºä¾‹ç„¶åä¸‹å¤´æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ä½¿ç”¨ç¤ºä¾‹ï¼›ä½ å¯ä»¥ç†è§£ä¸ºpromiseå°±æ˜¯ä¸€ä¸ªç”¨æ¥æ‰¿æ‹…çº¿ç¨‹æ‰€æ‰§è¡Œå‡½æ•°çš„å‚æ•°å’Œå¼‚å¸¸çš„ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡set_valueå¹¶åœ¨ä¸»æ‰§è¡Œæµä¸­ä½¿ç”¨future.getæ¥è·å–åˆ°è¿™ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å¼‚å¸¸ï¼Œå¹¶åœ¨ä¸»æ‰§è¡Œæµä¸­å¤„ç†è¿™ä¸ªå¼‚å¸¸ï¼›\nä¸è¿‡promiseå’Œfutureä¸€æ ·ï¼Œæ˜¯ä¸€æ¬¡æ€§çš„ï¼Œè®¾ç½®valueå’Œå¼‚å¸¸éƒ½åªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œè®¾ç½®å®Œæ¯•åå°±ä¸èƒ½å†è®¾ç½®äº†\n#include &lt;iostream&gt;#include &lt;future&gt;void worker(std::promise&lt;int&gt;&amp; p) &#123;    p.set_value(42); // è®¾ç½®å€¼&#125;int main() &#123;    std::promise&lt;int&gt; promiseObj;    std::future&lt;int&gt; futureResult = promiseObj.get_future();    std::thread t(worker, std::ref(promiseObj)); // é€šè¿‡çº¿ç¨‹æ‰§è¡Œ    t.join();    int result = futureResult.get(); // ä¸»çº¿ç¨‹ä¸­è·å–å€¼    std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    return 0;&#125;\n\n5.packaged_taskstd::packaged_task æ˜¯ C++ æ ‡å‡†åº“ä¸­çš„ä¸€ä¸ªç±»æ¨¡æ¿ï¼Œç”¨äºå°†ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡ï¼ˆå‡½æ•°ã€å‡½æ•°å¯¹è±¡æˆ–å¯è°ƒç”¨æˆå‘˜å‡½æ•°ï¼‰å°è£…æˆä¸€ä¸ªå¯ä»¥å¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ std::future è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚å®ƒåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­èµ·åˆ°äº†è¿æ¥å¼‚æ­¥ä»»åŠ¡å’Œçº¿ç¨‹é—´é€šä¿¡çš„æ¡¥æ¢ä½œç”¨ã€‚\nstd::packaged_task çš„ä¸»è¦ä½œç”¨æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š\n\nå°è£…ä»»åŠ¡ï¼š std::packaged_task å…è®¸ä½ å°†ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡å°è£…æˆä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡å¯ä»¥åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¼‚æ­¥æ‰§è¡Œã€‚ä½ å¯ä»¥å°†å‡½æ•°ã€å‡½æ•°å¯¹è±¡æˆ–å¯è°ƒç”¨æˆå‘˜å‡½æ•°å°è£…ä¸ºä¸€ä¸ª std::packaged_task å®ä¾‹ã€‚\nå¼‚æ­¥æ‰§è¡Œï¼š é€šè¿‡å°† std::packaged_task å®ä¾‹ä¼ é€’ç»™ä¸€ä¸ª std::thread æˆ–å…¶ä»–æ”¯æŒå¼‚æ­¥æ‰§è¡Œçš„æœºåˆ¶ï¼Œä½ å¯ä»¥åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œå°è£…çš„ä»»åŠ¡ï¼Œè€Œä¸éœ€è¦æ˜¾å¼åˆ›å»ºçº¿ç¨‹å‡½æ•°ã€‚\nè·å–è¿”å›å€¼ï¼š std::packaged_task å¯ä»¥ä¸ std::future ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è·å–å¼‚æ­¥ä»»åŠ¡çš„è¿”å›å€¼ã€‚ä½ å¯ä»¥é€šè¿‡ packaged_task çš„ get_future æ–¹æ³•è·å–ä¸€ä¸ªä¸ä»»åŠ¡å…³è”çš„ std::future å¯¹è±¡ï¼Œç„¶ååœ¨é€‚å½“çš„æ—¶å€™ä½¿ç”¨ std::future çš„ get æ–¹æ³•æ¥è·å–ä»»åŠ¡çš„è¿”å›å€¼ã€‚\nçº¿ç¨‹æ± ï¼š std::packaged_task ç»“åˆçº¿ç¨‹æ± çš„ä½¿ç”¨ï¼Œå¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ã€‚çº¿ç¨‹æ± å¯ä»¥é¢„å…ˆåˆ›å»ºä¸€ç»„çº¿ç¨‹ï¼Œç„¶åå°†å°è£…å¥½çš„ä»»åŠ¡åˆ†é…ç»™è¿™äº›çº¿ç¨‹æ‰§è¡Œï¼Œé¿å…äº†é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚\n\n5.1 ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ std::packaged_task æ¥å¼‚æ­¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°å¹¶è·å–å…¶è¿”å›å€¼\n#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;future&gt;int add(int a, int b) &#123;    return a + b;&#125;int main() &#123;    std::packaged_task&lt;int(int, int)&gt; task(add);    std::future&lt;int&gt; future = task.get_future();    std::thread worker(std::move(task), 3, 5);    worker.join(); // é€šè¿‡çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œè¿™ä¸ªtask    int result = future.get(); // ç­‰å¾…è¿”å›å€¼    std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    return 0;&#125;\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd::packaged_task å°è£…äº†ä¸€ä¸ªå‡½æ•° addï¼Œç„¶åé€šè¿‡ std::thread å¼‚æ­¥æ‰§è¡Œï¼Œæœ€åé€šè¿‡ std::future è·å–å¼‚æ­¥ä»»åŠ¡çš„è¿”å›å€¼ã€‚\n5.2 make_ready_at_thread_exitpackaged_taskçš„æˆå‘˜å‡½æ•°ä¸­ï¼Œä¸»è¦è¿˜æ˜¯è¿™ä¸ªéœ€è¦å•ç‹¬è¯´æ˜ï¼›å…ˆçœ‹å¦‚ä¸‹ä»£ç \n#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;future&gt;int main() &#123;    std::packaged_task&lt;int()&gt; task([]()&#123; return 42; &#125;);    std::future&lt;int&gt; future = task.get_future();    std::thread worker([&amp;task]() &#123;        // æ¨¡æ‹Ÿä¸€äº›å·¥ä½œ        std::this_thread::sleep_for(std::chrono::seconds(2));        // è®¾ç½®ä»»åŠ¡ç»“æœå€¼        task.make_ready_at_thread_exit();    &#125;);    worker.detach(); // åˆ†ç¦»çº¿ç¨‹ï¼Œä¸ç­‰å¾…å…¶ç»“æŸ    // ç­‰å¾…ä»»åŠ¡ç»“æœ    int result = future.get();    std::cout &lt;&lt; &quot;Result: &quot; &lt;&lt; result &lt;&lt; std::endl;    return 0;&#125;\n\næˆ‘ä»¬è®©packaged_taskæ‰§è¡Œçš„æ˜¯ä¸€ä¸ªreturn 42çš„å‡½æ•°ï¼Œè€Œçº¿ç¨‹é‡Œé¢è¿˜ä¼šè¿›è¡Œå…¶ä»–å¤„ç†ã€‚\nè€Œmake_ready_at_thread_exit()çš„ä½œç”¨ï¼Œå°±æ˜¯ç¡®è®¤å½“å‰çš„workerçº¿ç¨‹å·²ç»å¹²å®Œè‡ªå·±çš„æ´»äº†ï¼Œå¯ä»¥æ‰§è¡Œpackaged_taskå°è£…çš„å‡½æ•°äº†ï¼\nç›¸å½“äºæ˜¯ä¸€ä¸ªç¡®è®¤packaged_taskä¸­å°è£…çš„ä»»åŠ¡åˆ°åº•åœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œçš„ä¸€ä¸ªå‡½æ•°ã€‚è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šå¼€å§‹æ‰§è¡Œå…¶åŒ…è£…çš„å¼‚æ­¥å‡½æ•°ï¼Œå¹¶è¿”å›ç»“æœç»™future.get()çš„æ‰§è¡Œæµ\nThe endæ”¶å·¥\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp","Cpp11"]},{"title":"ã€C++ã€‘C++17çš„é‚£äº›æ–°ç‰¹æ€§","url":"/posts/3858168547/","content":"å­¦ä¹ C++17çš„æ–°ç‰¹æ€§\n1.æ„é€ å‡½æ•°æ¨¡æ¿æ¨å¯¼åœ¨ä¹‹å‰ï¼Œæˆ‘ä»¬å¦‚æœæƒ³ç”¨stlå®¹å™¨ï¼Œéƒ½éœ€è¦ç”¨&lt;&gt; æ¥æ‰‹åŠ¨æŒ‡å®šå‚æ•°ç±»å‹ã€‚ä½†åœ¨C++17ä¸­ï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™ä¹ˆåšäº†ã€‚\nint main()&#123;    std::vector v1 = &#123;1,2,3,4&#125;;    std::pair p1  = &#123;1,2.4234&#125;;    cout &lt;&lt; typeid(v1).name() &lt;&lt; endl;    cout &lt;&lt; typeid(p1).name() &lt;&lt; endl;    return 0;&#125;\n\nä½¿ç”¨C++11ç¼–è¯‘ï¼Œè¿™ä¸ªä»£ç ä¼šæŠ¥é”™ã€‚æŠ¥é”™çš„æ„æ€æ˜¯è®©æˆ‘ä»¬æŒ‡å®šå‚æ•°çš„æ¨¡æ¿ç±»å‹ã€‚\næ¯”å¦‚ std::pair p1  = &#123;1,2.4234&#125;; åœ¨C++11ä¸­åº”è¯¥å†™æˆ std::pair&lt;int,double&gt; p1  = &#123;1,2.4234&#125;;\ntest.cpp:16:10: error: use of class template &#x27;std::pair&#x27; requires template arguments    std::pair p1  = &#123;1,2.4234&#125;;         ^/usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_pair.h:211:12: note: template is declared here    struct pair           ^3 errors generated.make: *** [makefile:3: test] Error 1\n\nåœ¨C++17ä¸­ï¼Œè¿™æ ·çš„å†™æ³•å°±æ˜¯å¯ä»¥è¢«é€šè¿‡çš„äº†ï¼Œä¹Ÿèƒ½æ­£å¸¸æ¨æ–­å‡ºå‚æ•°çš„ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ªintçš„vectorï¼Œå’Œä¸€ä¸ªint+doubleçš„pairï¼›\n$ makeclang++ test.cpp -o test -std=c++17$ ./testSt6vectorIiSaIiEESt4pairIidE\n\n2.ç»“æ„åŒ–ç»‘å®šæˆ‘ä»¬å¯ä»¥ç”¨ auto[å˜é‡1,å˜é‡2]çš„æ–¹å¼æ¥æ¥å—ä¸€ä¸ªtupleæˆ–è€…pairçš„è¿”å›å€¼ï¼Œå°†å…¶ç»‘å®šåˆ°ä¸¤ä¸ªä¸åŒçš„å˜é‡ä¸Šã€‚\ntupleæ˜¯C++11æ–°å¢çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒå’Œpairçš„ç”¨æ³•ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å…ƒç»„æ”¯æŒæ— æ•°ä¸ªå‚æ•°ã€‚è€Œpairä»…æ”¯æŒä¸¤ä¸ªã€‚\nstd::tuple&lt;int, double&gt; func_tuple()&#123;    return std::tuple&lt;int,double&gt;(1, 2.2);&#125;std::pair&lt;int, double&gt; func_pair()&#123;    return &#123;1,2&#125;;&#125;int main()&#123;    auto [i, d] = func_tuple();     cout &lt;&lt; typeid(i).name() &lt;&lt; endl;    cout &lt;&lt; typeid(d).name() &lt;&lt; endl;    cout &lt;&lt; endl;    auto [x,y] = func_pair();    cout &lt;&lt; typeid(x).name() &lt;&lt; endl;    cout &lt;&lt; typeid(y).name() &lt;&lt; endl;    return 0;&#125;\n\nä½¿ç”¨C++11æ¥ç¼–è¯‘ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œä½†ç¼–è¯‘ä¾æ—§èƒ½æˆåŠŸã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„ç¼–è¯‘å™¨æ˜¯æ”¯æŒC++17çš„ï¼Œä½†åˆè¢«æŒ‡å®šäº†-std=c++11ï¼Œæ‰€ä»¥ç»™ç”¨æˆ·æŠ¥äº†ä¸ªè­¦å‘Šï¼Œä½†æ²¡æœ‰æŠ¥é”™ï¼ˆå› ä¸ºè¿™ä¸ªè¯­æ³•åœ¨C++17é‡Œé¢æ˜¯æ­£ç¡®çš„ï¼‰\nclang++ test.cpp -o test -std=c++11test.cpp:34:10: warning: decomposition declarations are a C++17 extension [-Wc++17-extensions]    auto [i, d] = func_tuple();          ^~~~~~test.cpp:40:10: warning: decomposition declarations are a C++17 extension [-Wc++17-extensions]    auto [x,y] = func_pair();         ^~~~~2 warnings generated.\n\nè¿è¡Œè¾“å‡ºç»“æœå¦‚ä¸‹\n$ ./testidid\n\næ³¨æ„ï¼šç»“æ„åŒ–ç»‘å®šä¸èƒ½åº”ç”¨äºconstexprï¼\nç»“æ„åŒ–ç»‘å®šä¸æ­¢å¯ä»¥ç»‘å®špairå’Œtupleï¼Œè¿˜å¯ä»¥ç»‘å®šæ•°ç»„å’Œç»“æ„ä½“ç­‰ã€‚\n// æ³¨æ„è¿™é‡Œçš„structçš„æˆå‘˜ä¸€å®šè¦æ˜¯publicçš„ï¼Œä¸ç„¶å¤–éƒ¨æ— æ³•è®¿é—®ï¼Œè¿˜æ€ä¹ˆç»‘å®šï¼Ÿstruct Point&#123;    int x;    int y;&#125;;// è¿”å›å€¼æ˜¯pointçš„å‡½æ•°Point func()&#123;    return &#123;1, 2&#125;;&#125;int main()&#123;    int array[3] = &#123;1, 2, 3&#125;;    auto [a, b, c] = array;    cout &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; &quot; &quot; &lt;&lt; c &lt;&lt; endl;    // ç›´æ¥æ¨å¯¼å‡ºä¸¤ä¸ªæˆå‘˜å˜é‡å¹¶èµ‹å€¼ç»™å˜é‡xå’Œy    const auto [x, y] = func();    return 0;&#125;\næˆåŠŸç¼–è¯‘å¹¶è¾“å‡ºç»“æœ\n$ makeclang++ test.cpp -o test -std=c++17$ ./test1 2 31 2\n\nè‡ªå®šä¹‰ç±»å‹ä¹Ÿèƒ½å®ç°ç»“æ„åŒ–ç»‘å®šï¼Œè¿™é‡Œä»ç½‘ä¸Šæ‰’äº†ä¸€ä¸ªä»£ç ä¸‹æ¥ï¼Œå°±ä¸è‡ªå·±åšæµ‹è¯•äº†\n// éœ€è¦å®ç°ç›¸å…³çš„tuple_sizeå’Œtuple_elementå’Œget&lt;N&gt;æ–¹æ³•ã€‚class Entry &#123;public:    void Init() &#123;        name_ = &quot;name&quot;;        age_ = 10;    &#125;    std::string GetName() const &#123; return name_; &#125;    int GetAge() const &#123; return age_; &#125;private:    std::string name_;    int age_;&#125;;template &lt;size_t I&gt;auto get(const Entry&amp; e) &#123;    if constexpr (I == 0) return e.GetName();    else if constexpr (I == 1) return e.GetAge();&#125;namespace std &#123;    template&lt;&gt; struct tuple_size&lt;Entry&gt; : integral_constant&lt;size_t, 2&gt; &#123;&#125;;    template&lt;&gt; struct tuple_element&lt;0, Entry&gt; &#123; using type = std::string; &#125;;    template&lt;&gt; struct tuple_element&lt;1, Entry&gt; &#123; using type = int; &#125;;&#125;int main() &#123;    Entry e;    e.Init();    auto [name, age] = e;    cout &lt;&lt; name &lt;&lt; &quot; &quot; &lt;&lt; age &lt;&lt; endl; // name 10    return 0;&#125;\n\n\n3.ifè¯­å¥æ–°å¢åˆå§‹æ¡ä»¶åœ¨ä¹‹å‰æˆ‘ä»¬éƒ½æ˜¯ç”¨ if(åˆ¤æ–­æ¡ä»¶) æ¥ä½¿ç”¨ifè¯­å¥çš„ï¼ŒC++17ä¸­ç»™ifæ–°å¢äº†ä¸€ä¸ªç±»ä¼¼forå¾ªç¯ä¸­ç¬¬ä¸€ä¸ªå‚æ•°çš„ç›¸åŒå‚æ•°\nif(åˆå§‹åŒ–æ¡ä»¶,åˆ¤æ–­æ¡ä»¶)\n\næ¯”å¦‚\nif(int i=20;i&lt;39)&#123;    cout &lt;&lt;&quot;i&lt;39!&quot;&lt;&lt;endl;&#125;\n\nè¿è¡Œæ•ˆæœå¦‚ä¸‹\n$ ./testi&lt;39!\n\n4.å†…è”å˜é‡åœ¨ä¹‹å‰æˆ‘ä»¬æƒ³åˆå§‹åŒ–ä¸€ä¸ªç±»ä¸­çš„staticå˜é‡ï¼Œéœ€è¦åœ¨ç±»ä¸­å®šä¹‰ï¼Œç±»å¤–åˆå§‹åŒ–ã€‚ä½†å¦‚æœæ˜¯constçš„staticå˜é‡ï¼Œå°±èƒ½ç›´æ¥åœ¨ç±»ä¸­é€šè¿‡ç¼ºçœå€¼çš„æ–¹å¼æ¥åˆå§‹åŒ–ã€‚\n// åœ¨å¤´æ–‡ä»¶é‡Œé¢è¿™æ ·æ˜¯èƒ½é€šè¿‡ç¼–è¯‘çš„ï¼Œä½†æ˜¯ä¸å»ºè®®åœ¨å¤´æ–‡ä»¶ä¸­åˆå§‹åŒ–staticå˜é‡ï¼Œä¼šäº§ç”ŸODRå†²çª:// Variable &#x27;value&#x27; defined in a header file; variable definitions in header files can lead to ODR violationsstruct A &#123;    static int value;      static const int value_c=10;  // constå¯ä»¥ç›´æ¥åˆå§‹åŒ–&#125;;int A::value = 10;\n\nåœ¨C++17ä¸­å†…è”å˜é‡å¼•å…¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥å®ç°åœ¨å¤´æ–‡ä»¶ä¸­åˆå§‹åŒ–staticéconstå˜é‡ï¼Œæˆ–è€…ç›´æ¥ç”¨ç¼ºçœå€¼æ¥åˆå§‹åŒ–äº†\nstruct A&#123;    static int value;    static const int value_c = 10;    // static int value = 10;&#125;;inline int A::value = 10;// ========= æˆ–è€… ========struct B&#123;    inline static int value = 10;    inline static const int value_c = 10;&#125;;\n\nç›¸æ¯”äºåŸæœ¬staticå˜é‡åˆå§‹åŒ–éœ€è¦æ”¾åˆ°å¦å¤–ä¸€ä¸ªcppæºæ–‡ä»¶ä¸­ï¼Œè¿™ç§ç›´æ¥åœ¨å¤´æ–‡ä»¶é‡Œé¢å£°æ˜+åˆå§‹åŒ–çš„æ–¹å¼èƒ½æ›´å¥½çš„ç¡®å®šå˜é‡çš„åˆå§‹å€¼ã€‚\n5.æŠ˜å è¡¨è¾¾å¼C++17å¼•å…¥äº†æŠ˜å è¡¨è¾¾å¼ä½¿å¯å˜å‚æ•°æ¨¡æ¿ç¼–ç¨‹æ›´æ–¹ä¾¿ï¼š\ntemplate &lt;typename ... Ts&gt;auto sum(Ts ... ts) &#123;    return (ts + ...);&#125;int a &#123;sum(1, 2, 3, 4, 5)&#125;; // 15std::string a&#123;&quot;hello &quot;&#125;;std::string b&#123;&quot;world&quot;&#125;;cout &lt;&lt; sum(a, b) &lt;&lt; endl; // hello world\n\nå®è¯è¯´ï¼Œå¯å˜æ¨¡æ¿å‚æ•°è¿™éƒ¨åˆ†å°±æ²¡æœ‰å¼„æ˜ç™½è¿‡ï¼Œå®é™…ä¸Šä¹Ÿæ²¡æœ‰ç”¨è¿‡ï¼Œç›´æ¥è·³è¿‡ï¼\n6.constexpr+lambdaè¡¨è¾¾å¼C++17å‰lambdaè¡¨è¾¾å¼åªèƒ½åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼ŒC++17å¼•å…¥äº†constexpr lambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨äºåœ¨ç¼–è¯‘æœŸè¿›è¡Œè®¡ç®—ã€‚\nint main() &#123; // c++17å¯ç¼–è¯‘    constexpr auto lamb = [] (int n) &#123; return n * n; &#125;;    static_assert(lamb(3) == 9, &quot;a&quot;);&#125;\n\nè§„åˆ™å’Œæ™®é€šçš„constexprå‡½æ•°ç›¸åŒï¼Œå‚è€ƒæˆ‘çš„C++11å’Œ14çš„æ–‡ç« ã€‚è¿™é‡Œåšç®€å•è¯´æ˜ï¼š\nconstexprä¿®é¥°çš„å‡½æ•°ä½“ä¸èƒ½åŒ…å«æ±‡ç¼–è¯­å¥ã€gotoè¯­å¥ã€labelã€tryå—ã€é™æ€å˜é‡ã€çº¿ç¨‹å±€éƒ¨å­˜å‚¨ã€æ²¡æœ‰åˆå§‹åŒ–çš„æ™®é€šå˜é‡ï¼Œä¸èƒ½åŠ¨æ€åˆ†é…å†…å­˜ï¼Œä¸èƒ½æœ‰new deleteç­‰ï¼Œä¸èƒ½è™šå‡½æ•°ã€‚\n7.åµŒå¥—å‘½åç©ºé—´åœ¨ä¹‹å‰å¦‚æœéœ€è¦åµŒå¥—å‘½åç©ºé—´ï¼Œéœ€è¦è¿™æ ·å†™\nnamespace A &#123;    namespace B &#123;        namespace C &#123;            void func();        &#125;    &#125;&#125;\nC++17ä¸­å¯ä»¥ç›´æ¥ç”¨ç±»ä¼¼è®¿é—®é™å®šç¬¦çš„æ–¹å¼ï¼Œå‰é¢åŠ ä¸€ä¸ªnamespaceæ¥æ ‡æ˜åµŒå¥—çš„å‘½åç©ºé—´ã€‚\n// c++17ï¼Œæ–¹ä¾¿äº†ï¼Œå¯è¯»æ€§ä¹Ÿæ›´å¥½namespace A::B::C &#123;    void func();&#125;\n\n8.__has_includeé¢„å¤„ç†è¡¨è¾¾å¼#if defined __has_include // åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ä¸ªè¡¨è¾¾å¼#if __has_include(&lt;charconv&gt;) // æ”¯æŒï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥å¤´æ–‡ä»¶#define has_charconv 1 // å¤´æ–‡ä»¶å­˜åœ¨ï¼Œå®šä¹‰ä¸€ä¸ªå®#include &lt;charconv&gt; // å¼•ç”¨è¿™ä¸ªå¤´æ–‡ä»¶#endif#endif\n\nå¦‚æœä¸€ä¸ªä»£ç ä¼šåœ¨å¤šä¸ªä¸åŒçš„å¹³å°ä¸‹è·‘ï¼Œè¿™ä¸ªåŠŸèƒ½å°±å¾ˆé‡è¦ã€‚æ¯”å¦‚æˆ‘ä¹‹å‰å†™é¡¹ç›®çš„æ—¶å€™éœ€è¦ä½¿ç”¨åˆ°jsoncppï¼Œåœ¨centoså’Œdeepinä¸‹ï¼Œå®‰è£…jsoncppçš„includeè·¯å¾„æ˜¯ä¸åŒçš„\n//centos#include &lt;json/json.h&gt;//deepin#include &lt;jsoncpp/json/json.h&gt;\n\nè¿™ç§åœºæ™¯ä¸‹å°±å¯ä»¥ä½¿ç”¨ä¸Šé¢æåˆ°çš„è¿™ä¸ªé¢„å¤„ç†è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œæ¥ç¡®è®¤ä½ çš„jsoncppè·¯å¾„åˆ°åº•åœ¨å“ªé‡Œã€‚æ³¨æ„ï¼Œè¿™åªèƒ½è§£å†³ä»yumå’Œaptå®‰è£…çš„jsoncppï¼Œå¦‚æœæ˜¯è‡ªå·±æ‰‹åŠ¨å®‰è£…çš„ï¼Œé‚£é¬¼çŸ¥é“ä½ å®‰è£…åˆ°å“ªé‡Œå»äº†ï¼ŸğŸ¤£\næ‰€ä»¥å¾ˆå¤šå¤§å‹é¡¹ç›®å¦‚æœéœ€è¦ä½¿ç”¨jsoncppè¿™ç§ç¬¬ä¸‰æ–¹ä¾èµ–é¡¹ç›®ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨git submoduleçš„æ–¹å¼ï¼Œç›´æ¥å°†ç¬¬ä¸‰æ–¹åº“ä¸‹è½½åˆ°å½“å‰é¡¹ç›®è·¯å¾„ä¸‹ï¼Œä»¥é¿å…ä¸åŒå¹³å°çš„ä¾èµ–é¡¹includeè·¯å¾„ä¸å¯¹è€Œå¯¼è‡´æ— æ³•ç¼–è¯‘ç¨‹åºçš„é—®é¢˜ã€‚\n9.thisæŒ‡é’ˆæ•è·ï¼ˆlambdaï¼‰åœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œé‡‡ç”¨[this]æ–¹å¼æ•è·çš„thisæŒ‡é’ˆæ˜¯å€¼ä¼ é€’æ•è·çš„ï¼Œä½†åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°è®¿é—®å·²ç»è¢«é‡Šæ”¾äº†çš„ç©ºé—´çš„è¡Œä¸ºï¼›æ¯”å¦‚å¦‚ä¸‹ä»£ç \n#include &lt;functional&gt;#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;struct Foo&#123;    std::unique_ptr&lt;int&gt; p;    std::function&lt;void()&gt; f()    &#123;        p.reset(new int(10));        return [&amp;]        &#123;            cout &lt;&lt; 5 &lt;&lt; endl;            cout &lt;&lt; *p &lt;&lt; endl; // å®é™…ä¸Šæ˜¯è¿™ä¸€æ­¥æŠ¥é”™çš„            // è¿™é‡Œå¯¹*pçš„è®¿é—®å¯ä»¥è§£æä¸º *(this-&gt;p)ï¼Œä½†å®é™…ä¸ŠthisæŒ‡é’ˆå·²ç»è¢«é”€æ¯äº†            // æ³¨æ„ï¼Œè¿™é‡Œé‡‡ç”¨äº†æ™ºèƒ½æŒ‡é’ˆï¼Œä¸å­˜åœ¨å†…å­˜æ³„æ¼ï¼ŒpæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´ä¹Ÿè¢«é”€æ¯äº†            // ä½†æˆ‘ä»¬çš„æŠ¥é”™å…¶å®æ˜¯å¯¹thisæŒ‡é’ˆè§£å¼•ç”¨çš„æ—¶å€™å°±æŠ›å‡ºäº†            cout &lt;&lt; 6 &lt;&lt; endl;        &#125;;    &#125;&#125;;int main()&#123;    auto foo = new Foo();    cout &lt;&lt; 1 &lt;&lt; endl;    auto f = foo-&gt;f();  // è·å–äº†ä¸€ä¸ªç±»å†…æˆå‘˜å‡½æ•°    cout &lt;&lt; 2 &lt;&lt; endl;    delete foo;  // é”€æ¯è¿™ä¸ªå¯¹è±¡    cout &lt;&lt; 3 &lt;&lt; endl;    // å°è¯•åœ¨é”€æ¯åç»§ç»­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡lambdaä¸­=æ•è·çš„thisæŒ‡é’ˆæ¥è®¿é—®å¯¹è±¡çš„    f();  // è¿™é‡Œç›´æ¥æŠ¥é”™äº† Segmentation fault (core dumped)    cout &lt;&lt; 4 &lt;&lt; endl;    return 0;&#125;\n\nè¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åœ¨*pçš„ä½ç½®æŠ¥é”™é€€å‡ºçš„ï¼›å…·ä½“çš„åŸå› å‚è€ƒä»£ç ä¸­çš„æ³¨é‡Šã€‚\n$ ./test1235Segmentation fault (core dumped)\n\néœ€è¦æ³¨æ„ï¼Œlambdaè¡¨è¾¾å¼ä¸­ï¼Œä½¿ç”¨&#x3D;å’Œ&amp;éƒ½ä¼šé»˜è®¤é‡‡ç”¨ä¼ å€¼æ•è·thisæŒ‡é’ˆï¼Œå› ä¸ºthisæŒ‡é’ˆæ˜¯å­˜åœ¨äºå‡½æ•°ä½œç”¨åŸŸä¸­çš„ä¸€ä¸ªéšè—å‚æ•°ï¼Œå¹¶ä¸æ˜¯ç‹¬ç«‹åœ¨æˆå‘˜å‡½æ•°å¤–çš„å˜é‡ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥è¢«æ•æ‰åˆ°çš„ï¼›å¦å¤–ï¼ŒthisæŒ‡é’ˆæ˜¯ä¸èƒ½è¢«ä¼ å¼•ç”¨æ•è·çš„ï¼Œ[&amp;this] çš„å†™æ³•æ˜¯ä¸å…è®¸çš„ï¼›\nclang++ test.cpp -o test -std=c++17test.cpp:84:18: error: &#x27;this&#x27; cannot be captured by reference        return [&amp;this]                 ^1 error generated.\n\nC++17ä¸­æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å†™æ³• [*this] é€šè¿‡ä¼ å€¼çš„æ–¹å¼æ•è·äº†å½“å‰å¯¹è±¡æœ¬èº«ï¼Œæ­¤æ—¶lambdaè¡¨è¾¾å¼ä¸­å­˜åœ¨çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´ï¼Œå³ä¾¿å½“å‰å¯¹è±¡è¢«é”€æ¯äº†ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥é€šè¿‡è¿™ä¸ªæ‹·è´è®¿é—®åˆ°ç›®æ ‡ï¼›\nä»£ç ä¿®æ”¹å¦‚ä¸‹ï¼š\n#include &lt;functional&gt;#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;struct Foo&#123;    std::shared_ptr&lt;int&gt; p; // ä¸èƒ½ç”¨unique_ptrï¼Œå› ä¸ºå®ƒçš„æ‹·è´æ„é€ å‡½æ•°æ˜¯è¢«deleteç¦æ­¢ä½¿ç”¨çš„    std::function&lt;void()&gt; f()    &#123;        p.reset(new int(10));        return [*this]        &#123;            cout &lt;&lt; 5 &lt;&lt; endl;            cout &lt;&lt; *p &lt;&lt; endl;            cout &lt;&lt; 6 &lt;&lt; endl;        &#125;;    &#125;&#125;;int main()&#123;    auto foo = new Foo();    cout &lt;&lt; 1 &lt;&lt; endl;    auto f = foo-&gt;f();  // è·å–äº†ä¸€ä¸ªç±»å†…æˆå‘˜å‡½æ•°    cout &lt;&lt; 2 &lt;&lt; endl;    delete foo;  // é”€æ¯è¿™ä¸ªå¯¹è±¡    cout &lt;&lt; 3 &lt;&lt; endl;    // å°è¯•åœ¨é”€æ¯åç»§ç»­ä½¿ç”¨è¿™ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡lambdaä¸­=æ•è·çš„thisæŒ‡é’ˆæ¥è®¿é—®å¯¹è±¡çš„    f();  // è¿™é‡Œç›´æ¥æŠ¥é”™äº† Segmentation fault (core dumped)    cout &lt;&lt; 4 &lt;&lt; endl;    return 0;&#125;\n\næ­¤æ—¶é‡æ–°ç¼–è¯‘ï¼Œå°±èƒ½æˆåŠŸè®¿é—®åˆ°æŒ‡é’ˆpæŒ‡å‘çš„å¯¹è±¡äº†ï¼Œå¹¶ä¸å—fooå¯¹è±¡å·²ç»è¢«deleteçš„å½±å“ï¼›\n$ ./test12351064\n\n\n10.å­—ç¬¦ä¸²è½¬æ¢\næ²¡çœ‹æ‡‚è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯å¹²å˜›çš„ï¼Œæ‰¾åˆ°çš„ä»£ç è¿ç¼–è¯‘éƒ½è¿‡ä¸å»ï¼Œè·³è¿‡å§\n\næ–°å¢from_charså‡½æ•°å’Œto_charså‡½æ•°\nhttps://zh.cppreference.com/w/cpp/utility/from_charshttps://blog.csdn.net/defaultbyzt/article/details/120151801\n\n11.std::variantC++17å¢åŠ std::variantå®ç°ç±»ä¼¼unionçš„åŠŸèƒ½ï¼Œä½†å´æ¯”unionæ›´é«˜çº§ï¼Œä¸¾ä¸ªä¾‹å­unioné‡Œé¢ä¸èƒ½æœ‰stringè¿™ç§ç±»å‹ï¼Œä½†std::variantå´å¯ä»¥ï¼Œè¿˜å¯ä»¥æ”¯æŒæ›´å¤šå¤æ‚ç±»å‹ï¼Œå¦‚mapç­‰ï¼Œçœ‹ä»£ç ï¼š\nint main() &#123; // c++17å¯ç¼–è¯‘    std::variant&lt;int, std::string&gt; var(&quot;hello&quot;);    cout &lt;&lt; var.index() &lt;&lt; endl;    var = 123;    cout &lt;&lt; var.index() &lt;&lt; endl;    try &#123;        var = &quot;world&quot;;        std::string str = std::get&lt;std::string&gt;(var); // é€šè¿‡ç±»å‹è·å–å€¼        var = 3;        int i = std::get&lt;0&gt;(var); // é€šè¿‡indexè·å–å¯¹åº”å€¼        cout &lt;&lt; str &lt;&lt; endl;        cout &lt;&lt; i &lt;&lt; endl;    &#125; catch(...) &#123;        // xxx;    &#125;    return 0;&#125;\n\n\næ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹variantçš„ç¬¬ä¸€ä¸ªç±»å‹ä¸€èˆ¬è¦æœ‰å¯¹åº”çš„æ„é€ å‡½æ•°ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥ï¼š\nstruct A &#123;    A(int i)&#123;&#125;  &#125;;int main() &#123;    std::variant&lt;A, int&gt; var; // ç¼–è¯‘å¤±è´¥&#125;\n\nå¦‚ä½•é¿å…è¿™ç§æƒ…å†µå‘¢ï¼Œå¯ä»¥ä½¿ç”¨std::monostateæ¥æ‰“ä¸ªæ¡©ï¼Œæ¨¡æ‹Ÿä¸€ä¸ªç©ºçŠ¶æ€ã€‚\nstd::variant&lt;std::monostate, A&gt; var; // å¯ä»¥ç¼–è¯‘æˆåŠŸ\n\n12.std::optionalhttps://en.cppreference.com/w/cpp/utility/optional\næœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³åœ¨å¼‚å¸¸çš„æ—¶å€™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸çš„å¯¹è±¡ï¼Œäº¦æˆ–è€…æ˜¯åœ¨å‡ºç°ä¸€äº›ä¸å¯é¢„æœŸçš„é”™è¯¯çš„æ—¶å€™ï¼Œè¿”å›ä¸€ä¸ªç©ºå€¼ã€‚è¦æ€ä¹ˆåŒºåˆ†ç©ºå€¼å’Œå¼‚å¸¸çš„å¯¹è±¡å‘¢ï¼Ÿ\nåœ¨pythonä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸“é—¨çš„Noneå¯¹è±¡å¯ä»¥æ¥å¤„ç†è¿™ä»¶äº‹ã€‚åœ¨MySQLä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰NULLæ¥æ ‡è¯†ç©ºï¼›ä½†åœ¨CPPä¸­ï¼Œæˆ‘ä»¬åªå‰©ä¸‹ä¸€ä¸ªnullptrï¼Œå…¶æœ¬è´¨æ˜¯ä¸ªæŒ‡é’ˆï¼Œä¸Pyä¸­çš„Noneå’ŒMySQLä¸­çš„NULLå®Œå…¨ä¸åŒï¼å¦‚æœæƒ³ç”¨æŒ‡é’ˆæ¥åŒºåˆ†ç©ºå’Œå¼‚å¸¸å¯¹è±¡ï¼Œé‚£å°±éœ€è¦ç”¨åˆ°åŠ¨æ€å†…å­˜ç®¡ç†ï¼Œäº¦æˆ–è€…æ˜¯ç”¨æ™ºèƒ½æŒ‡é’ˆæ¥é¿å…å†…å­˜æ³„æ¼ã€‚\nè¯´äººè¯å°±æ˜¯ï¼Œåœ¨CPPä¸­æ²¡æœ‰ä¸€ä¸ªç±»ä¼¼Noneçš„å«ä¹‰ä¸ºç©ºçš„å¯¹è±¡ï¼Œæ¥å‘Šè¯‰è°ƒç”¨è¿™ä¸ªç¨‹åºçš„äººï¼Œåˆ°åº•æ˜¯å‘ç”Ÿäº†é”™è¯¯ï¼Œç”Ÿæˆäº†ä¸€ä¸ªé”™è¯¯çš„å¯¹è±¡ï¼Œè¿˜æ˜¯è¯´å‹æ ¹ä»€ä¹ˆéƒ½æ²¡æœ‰å¼„å‡ºæ¥ã€‚\näºæ˜¯std::optionalå°±å‡ºç°äº†ï¼Œå…¶å¯ä»¥åŒ…å«ä¸€ä¸ªç±»å‹ï¼Œå¹¶æœ‰std::nulloptæ¥ä¸“é—¨æ ‡è¯†â€œç©ºâ€è¿™ä¸ªå«ä¹‰ã€‚\n#include &lt;optional&gt;std::optional&lt;int&gt; StoI(const std::string &amp;s) &#123;    try &#123;        return std::stoi(s);    &#125; catch(...) &#123;        return std::nullopt;    &#125;&#125;void func() &#123;    std::string s&#123;&quot;123&quot;&#125;;    std::optional&lt;int&gt; o = StoI(s);    if (o) &#123;        cout &lt;&lt; *o &lt;&lt; endl;    &#125; else &#123;        cout &lt;&lt; &quot;error&quot; &lt;&lt; endl;    &#125;&#125;\n\nè¿™é‡Œæˆ‘ä»¬è¿›è¡Œäº†ifçš„åˆ¤æ–­ï¼Œé¦–å…ˆåˆ¤æ–­å˜é‡oæœ¬èº«ï¼Œä¸ºçœŸä»£è¡¨çš„ç¡®è¿”å›äº†ä¸€ä¸ªintå€¼ï¼Œä¸ºå‡ä»£è¡¨è¿”å›çš„æ˜¯nulloptï¼›\néšåå†ä½¿ç”¨*oæ¥è®¿é—®åˆ°å†…éƒ¨æ‰˜ç®¡çš„æˆå‘˜ã€‚\néœ€è¦æ³¨æ„è¿™é‡Œæ˜¯ä¸¤å±‚çš„é€»è¾‘å…³ç³»ï¼Œåªæœ‰optionalå¯¹è±¡ä¸­æˆåŠŸæ‰˜ç®¡äº†ä¸€ä¸ªæŒ‡å®šçš„å‚æ•°ç±»å‹ï¼Œå…¶æœ¬èº«æ‰æ˜¯çœŸçš„ã€‚å¦‚æœæƒ³è®¿é—®å®ƒæ‰˜ç®¡çš„å¯¹è±¡ï¼Œåˆ™éœ€è¦ç”¨è§£å¼•ç”¨ã€‚\næ¯”å¦‚è¿™é‡Œï¼Œæˆ‘ä»¬çš„oå¯¹è±¡æ‰˜ç®¡çš„æ˜¯ä¸€ä¸ªboolç±»å‹çš„å‡ï¼Œä½†å‡å¹¶ä¸ä»£è¡¨ç©ºï¼Œoå¯¹è±¡æœ¬èº«çš„åˆ¤æ–­æ˜¯çœŸï¼Œå†…éƒ¨å¯¹*oçš„åˆ¤æ–­æ‰æ˜¯åˆ¤æ–­æ‰˜ç®¡çš„boolå€¼åˆ°åº•æ˜¯çœŸæ˜¯å‡ã€‚\n#include &lt;optional&gt;int main() &#123;    std::optional&lt;bool&gt; o = false;    cout &lt;&lt; typeid(o).name() &lt;&lt; endl;    if (o) // è¿™é‡Œåˆ¤æ–­çš„æ˜¯optionalå¯¹è±¡æ˜¯å¦æœ‰æ‰˜ç®¡ä¸€ä¸ªboolå€¼    &#123;        if(*o)&#123; // è¿™é‡Œåˆ¤æ–­çš„æ˜¯æ‰˜ç®¡çš„boolå€¼æœ¬èº«            cout &lt;&lt; &quot;true&quot; &lt;&lt; endl;        &#125;        else&#123;            cout &lt;&lt; &quot;false&quot; &lt;&lt; endl;        &#125;    &#125; else &#123; // è¿™é‡Œåˆ™ä»£è¡¨æ‰˜ç®¡çš„æ˜¯nullopt        cout &lt;&lt; &quot;error&quot; &lt;&lt; endl;    &#125;    return 0;&#125;\n\næœ€ç»ˆè¿è¡Œæ‰“å°çš„ç»“æœæ˜¯falseï¼›\n13.std::anyhttps://en.cppreference.com/w/cpp/utility/any\nè¿™ä¸ªç±»å‹å¯ä»¥æ‰˜ç®¡ä»»æ„ç±»å‹çš„å€¼ï¼Œä¸ä¹‹å¯¹åº”çš„è¿˜æœ‰ä¸€ä¸ªstd::any_castæ¥å°†å…¶æ‰˜ç®¡çš„å€¼è½¬æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚\n#include &lt;any&gt;int main() &#123; // c++17å¯ç¼–è¯‘    std::any a = 1;    cout &lt;&lt; a.type().name() &lt;&lt; &quot; &quot; &lt;&lt; std::any_cast&lt;int&gt;(a) &lt;&lt; endl;    a = 2.2f;    cout &lt;&lt; a.type().name() &lt;&lt; &quot; &quot; &lt;&lt; std::any_cast&lt;float&gt;(a) &lt;&lt; endl;    if (a.has_value()) &#123;        cout &lt;&lt; a.type().name();    &#125;    a.reset();    if (a.has_value()) &#123;        cout &lt;&lt; a.type().name();    &#125;    a = std::string(&quot;a&quot;);    cout &lt;&lt; a.type().name() &lt;&lt; &quot; &quot; &lt;&lt; std::any_cast&lt;std::string&gt;(a) &lt;&lt; endl;    return 0;&#125;\n\nè¾“å‡ºç»“æœå¦‚ä¸‹\ni 1f 2.2fNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE a\nè™½ç„¶anyçš„å‡ºç°è®©cppä¹Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å®ç°â€œå¼±ç±»å‹â€å˜é‡ï¼Œä½†åœ¨å…·ä½“çš„å¼€å‘ä¸­ï¼Œæ˜ç¡®å˜é‡çš„ç±»å‹ä¾æ—§æ¯”ä½¿ç”¨anyå¥½å¾—å¤šã€‚ç‰¹åˆ«æ˜¯åœ¨å˜é‡çš„ç±»å‹å¹¶ä¸å¯ä»¥è¢«ç›´æ¥è½¬æ¢çš„æƒ…å†µä¸‹ã€‚\n14.std::applyä½¿ç”¨std::applyå¯ä»¥å°†tupleå±•å¼€ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼Œè§ä»£ç ï¼š\n#include &lt;tuple&gt;int add(int first, int second) &#123; return first + second; &#125;auto add_lambda = [](auto first, auto second) &#123; return first + second; &#125;;int main() &#123;    std::cout &lt;&lt; std::apply(add, std::pair(1, 2)) &lt;&lt; &#x27;\\n&#x27;;    std::cout &lt;&lt; add(std::pair(1, 2)) &lt;&lt; &quot;\\n&quot;; // error    std::cout &lt;&lt; std::apply(add_lambda, std::tuple(2.0f, 3.0f)) &lt;&lt; &#x27;\\n&#x27;;&#125;\n\n\n15.std::make_from_tupleä½¿ç”¨make_from_tupleå¯ä»¥å°†tupleå±•å¼€ä½œä¸ºæ„é€ å‡½æ•°å‚æ•°\nstruct Foo &#123;    Foo(int first, float second, int third) &#123;        std::cout &lt;&lt; first &lt;&lt; &quot;, &quot; &lt;&lt; second &lt;&lt; &quot;, &quot; &lt;&lt; third &lt;&lt; &quot;\\n&quot;;    &#125;&#125;;int main() &#123;   auto tuple = std::make_tuple(42, 3.14f, 0);   std::make_from_tuple&lt;Foo&gt;(std::move(tuple));&#125;\n\n\n16.std::string_viewhttps://zhuanlan.zhihu.com/p/166359481\nhttps://en.cppreference.com/w/cpp/string/basic_string_view\nå¦‚æœæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªstringçš„åªè¯»ç±»å‹çš„è¯ï¼Œå¯ä»¥ç”¨string_viewæ¥æ‰˜ç®¡ã€‚å…¶å†…éƒ¨åªåŒ…å«ä¸€ä¸ªæŒ‡å‘ç›®æ ‡å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œä»¥åŠå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\nstring_viewå†…éƒ¨å°è£…äº†stringçš„æ‰€æœ‰åªè¯»æ¥å£ï¼Œæœ¬æ¥å°±æ˜¯ç»™ä½ è¯»çš„ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºå†…éƒ¨åªæœ‰ä¸€ä¸ªæŒ‡é’ˆï¼Œæ‰€ä»¥å½“string_viewæ‰˜ç®¡çš„stringè¢«é”€æ¯äº†ï¼Œä¸ä¹‹å…³è”çš„æ‰€æœ‰string_viewéƒ½ä¼šå¤±æ•ˆï¼åŒæ ·æ˜¯å› ä¸ºå†…éƒ¨åªæœ‰ä¸€ä¸ªæŒ‡é’ˆå’Œå­—ç¬¦ä¸²çš„é•¿åº¦ä¸¤ä¸ªå˜é‡ï¼Œæ‰€ä»¥åœ¨ä¼ å€¼æ‹·è´çš„æ—¶å€™ï¼Œstring_viewçš„æ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚\n\nè¿™å’Œconst string&amp; ç±»å‹çš„ä¼ å€¼åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä¼ å¼•ç”¨ä¸æ˜¯ä¹Ÿæ²¡æœ‰æ‹·è´æ¶ˆè€—å—ï¼Ÿ\n\nè¿™ä¸ªé—®é¢˜å¾ˆå¥½ï¼Œæˆ‘ä¸çŸ¥é“ï¼ç™¾åº¦ä¹Ÿæ²¡æœ‰ç™¾åº¦å‡ºæ¥â€¦â€¦\næˆ‘èƒ½æƒ³åˆ°çš„å°±æ˜¯ç”¨string_viewä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå¦‚æœå…¥å‚æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶ä¸éœ€è¦æ„é€ stringï¼Œè€Œä½¿ç”¨const string&amp; æ¥å—å¸¸é‡å­—ç¬¦ä¸²çš„æ—¶å€™ä¾æ—§éœ€è¦æ„é€ ä¸€ä¸ªstringå¯¹è±¡ã€‚è¿™éƒ¨åˆ†å°±ä¼šæœ‰ä¸€å®šçš„æ¶ˆè€—ã€‚\n17.as_constC++17ä½¿ç”¨as_constå¯ä»¥å°†å·¦å€¼è½¬æˆconstç±»å‹\nstd::string str = &quot;str&quot;;const std::string&amp; constStr = std::as_const(str);\n\n18.file_systemC++17æ­£å¼å°†file_systemçº³å…¥æ ‡å‡†ä¸­ï¼Œæä¾›äº†å…³äºæ–‡ä»¶çš„å¤§å¤šæ•°åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šåº”æœ‰å°½æœ‰ï¼Œè¿™é‡Œç®€å•ä¸¾å‡ ä¸ªä¾‹å­ï¼š\nnamespace fs = std::filesystem;fs::create_directory(dir_path); // åˆ›å»ºæ–‡ä»¶æˆ–è€…è·¯å¾„fs::copy_file(src, dst, fs::copy_options::skip_existing); // æ–‡ä»¶cpfs::exists(filename); // æ–‡ä»¶æ˜¯å¦å­˜åœ¨fs::current_path(err_code); // è·å–å½“å‰è·¯å¾„\n\n19.shared_mutexè¿™ç©æ„æ˜¯ä¸ªè¯»å†™é”ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯è¯»å†™é”ï¼š\n\nè¯»è€…å¯ä»¥æœ‰å¤šä¸ªï¼Œå†™è€…åªèƒ½æœ‰ä¸€ä¸ª\nå†™é”æ˜¯äº’æ–¥çš„ï¼Œå¦‚æœAæœ‰é”ï¼ŒBæƒ³æ‹¿é”å°±å¾—é˜»å¡ç­‰å¾…\nè¯»é”æ˜¯å…±äº«çš„ï¼ŒCæœ‰è¯»é”ï¼ŒDä¹Ÿæƒ³è¯»ï¼Œä¸¤ä¸ªäººå¯ä»¥ä¸€èµ·çœ‹\nè¯»å†™é”æ˜¯äº’æ–¥çš„ï¼Œæœ‰äººå†™çš„æ—¶å€™ä¸èƒ½è¯»ï¼Œæœ‰äººè¯»çš„æ—¶å€™ä¸èƒ½å†™\n\næ¢åˆ°ä¸“ä¸šæœ¯è¯­ä¸Šï¼Œå°±æ˜¯åˆ†ä¸ºç‹¬å é”ï¼ˆå†™é”ï¼‰å’Œå…±äº«é”ï¼ˆè¯»é”ï¼‰ï¼›\nåœ¨C++14ä¸­å…¶å®å·²ç»æœ‰äº†ä¸€ä¸ªshared_timed_mutexï¼ŒC++17ä¸­è¿™ä¸ªé”çš„æ“ä½œä¸å…¶åŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡å¤šäº†å‡ ä¸ªå’Œæ—¶é—´ç›¸å…³çš„æ¥å£\ntry_lock_for(...);try_lock_shared_for(...);try_lock_shared_until(...);try_lock_until(...);\n\nå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒ \nhttps://zh.cppreference.com/w/cpp/thread/shared_mutexhttps://zhuanlan.zhihu.com/p/610781321\n\nThe endå…³äºC++17å¸¸ç”¨çš„åŸºæœ¬å°±æ˜¯è¿™äº›äº†ï¼Œåç»­é‡åˆ°æ–°çš„å†æ›´æ–°æœ¬æ–‡ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","Cpp","Cpp17"]},{"title":"ã€C++ã€‘C++14çš„é‚£äº›æ–°ç‰¹æ€§","url":"/posts/1184922698/","content":"å­¦ä¹ C++14çš„é‚£äº›æ–°ç‰¹æ€§\n\n\n\nä¸ºäº†æ–¹ä¾¿æŒ‡å®šä½¿ç”¨C++14æ¥ç¼–è¯‘ä»£ç ï¼Œæœ¬æ–‡çš„æµ‹è¯•éƒ½æ˜¯åœ¨linuxä¸‹è¿›è¡Œçš„ï¼Œg++ç‰ˆæœ¬å¦‚ä¸‹\n$ g++ --versiong++ (GCC) 8.5.0 20210514 (Red Hat 8.5.0-4)\n\nå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä½¿ç”¨VSCæ¥é“¾æ¥linuxè¿›è¡Œä»£ç ç¼–å†™ï¼Œé‚£ä¸€å®šè¦è®°å¾—ä¿®æ”¹C++æ’ä»¶é‡Œé¢çš„CPPç‰ˆæœ¬ï¼Œå¦åˆ™é»˜è®¤ä»¥C++11æ¥è¿›è¡Œè¯­æ³•é«˜äº®çš„è¯ï¼Œä¼šæŠŠC++11ä¸æ”¯æŒçš„è¯­æ³•æ ‡çº¢ï¼Œå½±å“æˆ‘ä»¬å­¦ä¹ \n\n\næœ¬æ–‡å‚è€ƒ https://zhuanlan.zhihu.com/p/588826142 è¿›è¡Œå­¦ä¹ ;\nå®˜æ–¹æ–‡æ¡£ https://zh.cppreference.com/w/cpp/14\n\n1.lambdaæ–°ç‰¹æ€§C++14ç»™lambdaè¡¨è¾¾å¼æ·»åŠ äº†ä¸¤ä¸ªæ–°åŠŸèƒ½\n\nå‚æ•°æ¨æ–­ï¼ˆautoï¼‰\nå‚æ•°åˆå§‹åŒ–åæ•è·ï¼ˆå¯ä»¥åœ¨[]å¯¹æŸä¸ªæ–°å‚æ•°è¿›è¡Œèµ‹å€¼ï¼‰\n\nå…ˆæ¥å¤ä¹ ä¸€ä¸‹C++11ä¸­å­¦ä¹ çš„lambdaæ•è·çš„åŸºæœ¬æ–¹å¼\n[val]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å˜é‡val[=]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•è·æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[&amp;val]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰å˜é‡val[&amp;]ï¼šè¡¨ç¤ºå¼•ç”¨ä¼ é€’æ•æ‰æ‰€æœ‰çˆ¶ä½œç”¨åŸŸä¸­çš„å˜é‡(åŒ…æ‹¬this)[this]ï¼šè¡¨ç¤ºå€¼ä¼ é€’æ–¹å¼æ•æ‰å½“å‰çš„thisæŒ‡é’ˆ\n\nåœ¨C++14ä¸­ï¼Œæ–°å¢çš„æ˜¯ä¸‹é¢çš„è¿™ç§æƒ…å†µ\nint a = 30;// [] ä¸­èµ‹å€¼äº†ä¸€ä¸ªå‚æ•°// () ä¸­å¯ä»¥ä½¿ç”¨autoå…³é”®å­—æ¥æ¨æ–­å‚æ•°ç±»å‹auto func = [x = 3](auto y) &#123;return x + y; &#125;;cout &lt;&lt; func(a) &lt;&lt; endl;\n\nè¿è¡Œæµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸè¾“å‡ºäº†ç»“æœ\n$ makeg++ test.cpp -o test -std=c++14$ ./test33\n\nä¿®æ”¹ä¸€ä¸‹ç±»å‹ï¼Œä¹Ÿèƒ½æ­£å¸¸è°ƒç”¨\ndouble a = 30.2;auto func = [x = 3](auto y)&#123; return x + y; &#125;;cout &lt;&lt; func(a) &lt;&lt; endl;\n\n$ ./test33.2\n\nå¦‚æœæƒ³å°†èµ‹å€¼å‚æ•°å’ŒåŸæœ¬çš„æ•è·æ–¹å¼ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™éœ€è¦å°†èµ‹å€¼å‚æ•°æ”¾åœ¨[]çš„æœ€åé¢\nvoid test_lambda2()&#123;    int a = 10, b = 20;    int c = 1, d = 3, e = 5;    // èµ‹å€¼çš„å‚æ•°è¦æ”¾åœ¨[]çš„æœ€åé¢ï¼Œæ•è·æ–¹å¼æ”¾åœ¨å‰é¢    auto func6 = [=, f = 30, g = 40]    &#123;        return (a + b + c + d + e + f + g);    &#125;;    cout &lt;&lt; func6() &lt;&lt; endl;&#125;\n\n$ ./test109\n\nåˆå§‹åŒ–æ•è·çš„å¥½å¤„æ˜¯å¯ä»¥æ”¯æŒç§»åŠ¨æ•è·äº†ï¼›ä¸ç„¶åœ¨C++11ä¸­ï¼Œlambdaå°±åªèƒ½ä½¿ç”¨èµ‹å€¼æ•è·å’Œå¼•ç”¨æ•è·\nstd::unique_ptr&lt;Item&gt; item(new Item());// std::moveæ”¹ä¸ºå³å€¼è¿›è¡Œèµ‹å€¼åæ•è·auto func = [m = std::move(item)] &#123; /* do something */ &#125;;\n\nè¿™ä¸ªæ–°ç‰¹æ€§çš„æå‡ºï¼Œä¹Ÿè®©lambdaæˆåŠŸæœ‰äº†å’Œbindæ¯”æ‹¼çš„èƒ½åŠ›ã€‚åœ¨C++11ä¸­ï¼Œbindçš„ä¼˜åŠ¿å°±æ˜¯åœ¨äºç§»åŠ¨æ•è·çš„æ”¯æŒï¼›å¦‚ä»Šlambdaä¹Ÿæœ‰äº†è¿™ä»½èƒ½åŠ›äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°æ ¹æ®åœºæ™¯é€‰ç”¨lambdaæˆ–è€…bindï¼Œè€Œä¸æ˜¯åªèƒ½ä½¿ç”¨bindäº†ã€‚\n2.å˜é‡æ¨¡æ¿2.1 ç¤ºä¾‹çœ‹æ¸…æ¥šè¿™ä¸ªåå­—å•Šï¼æ˜¯å˜é‡æ¨¡æ¿ï¼Œå¯ä¸æ˜¯ä»€ä¹ˆå‡½æ•°æ¨¡æ¿å“ˆï¼\ntemplate&lt;class T&gt;T pi = T(3.1415926535897932385L); // variable template// æ•°å­—æœ€åçš„Lä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé•¿æµ®ç‚¹å‹void test_value_template()&#123;    cout &lt;&lt; pi&lt;double&gt; &lt;&lt; endl;    cout &lt;&lt; pi&lt;float&gt; &lt;&lt; endl;    cout &lt;&lt; pi&lt;int&gt; &lt;&lt; endl;&#125;\n\nå¦‚ä¸Šå°±æ˜¯ä¸€ä¸ªæœ€æœ€æœ€ç®€å•çš„å˜é‡æ¨¡æ¿ï¼Œæˆ‘ä»¬åœ¨ä¼ å…¥å¯¹åº”çš„ç±»å‹åï¼Œä»–å°±ä¼šè½¬æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹\n$ makeg++ test.cpp -o test -std=c++14$ ./test3.141593.141593\n\n2.2 ç±»ä¸­ä½¿ç”¨å½“ä½ éœ€è¦åœ¨ç±»ä¸­ä½¿ç”¨æ¨¡æ¿å˜é‡çš„æ—¶å€™ï¼Œè¿™ä¸ªå˜é‡å¿…é¡»å®šä¹‰ä¸ºstaticï¼›\nå› ä¸ºå®ƒæ˜¯æ¨¡æ¿ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ¥ç”¨æ¨¡æ¿æœ¬èº«å°±æœ‰çš„ç‰¹æ€§ï¼Œå°†è¿™ä¸ªæ¨¡æ¿é’ˆå¯¹æŸä¸€ä¸ªç±»å‹è¿›è¡Œç‰¹åŒ–\nstruct Limits&#123;    template&lt;typename T&gt;    static const T min; // å£°æ˜é™æ€æˆå‘˜æ¨¡æ¿&#125;; template&lt;typename T&gt;const T Limits::min = &#123; &#125;; // å®šä¹‰é™æ€æˆå‘˜æ¨¡æ¿ï¼Œå…¨éƒ¨ä½¿ç”¨é»˜è®¤å€¼// ä¸‹é¢ä¸‰ä¸ªæ˜¯æ¨¡æ¿å˜é‡çš„ç‰¹åŒ–template&lt;&gt;const float Limits::min&lt;float&gt; = 4.5;template&lt;&gt;const double Limits::min&lt;double&gt; = 5.5;template&lt;&gt;const std::string Limits::min&lt;std::string&gt; = &quot;hello&quot;;int main()&#123;    std::cout &lt;&lt; Limits::min&lt;int&gt; &lt;&lt; std::endl;    std::cout &lt;&lt; Limits::min&lt;float&gt; &lt;&lt; std::endl;    std::cout &lt;&lt; Limits::min&lt;double&gt; &lt;&lt; std::endl;    std::cout &lt;&lt; Limits::min&lt;std::string&gt; &lt;&lt; std::endl;    return 0;&#125;\n\n$ ./test04.55.5hello\n\n2.3 å’Œç±»å‹è½¬æ¢çš„åŒºåˆ«è¿™é‡Œæˆ‘åˆç›´æ¥å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œä½¿ç”¨static_castç›´æ¥è½¬æ¢å˜é‡ï¼Œçœ‹çœ‹ç»“æœä¼šä¸ä¼šæœ‰ä»€ä¹ˆåŒºåˆ«\n// æ•°å­—æœ€åçš„Lä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé•¿æµ®ç‚¹å‹template&lt;class T&gt;T pi = T(3.1415926535897932385L); // å˜é‡æ¨¡æ¿long double lpi = 3.1415926535897932385L; // ç›´æ¥å®šä¹‰é•¿æµ®ç‚¹å‹void test_value_template()&#123;    cout &lt;&lt; pi&lt;double&gt; &lt;&lt; endl;    cout &lt;&lt; pi&lt;float&gt; &lt;&lt; endl;    cout &lt;&lt; pi&lt;int&gt; &lt;&lt; endl;    cout &lt;&lt; &quot; ----- \\n&quot;;    cout &lt;&lt; static_cast&lt;double&gt;(lpi) &lt;&lt; endl;    cout &lt;&lt; static_cast&lt;float&gt;(lpi) &lt;&lt; endl;    cout &lt;&lt; static_cast&lt;int&gt;(lpi) &lt;&lt; endl;&#125;\n\nçœ‹ä¸Šå»äºŒè€…çš„ç»“æœå®Œå…¨ç›¸åŒï¼Œé‚£ä¹ˆæ—¢ç„¶å¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡ç±»å‹è½¬æ¢ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æ–°å¢ä¸€ä¸ªæ¨¡æ¿å˜é‡å‘¢ï¼Ÿ\n$ ./test3.141593.141593 ----- 3.141593.141593\n\n\nä»¥ä¸‹å†…å®¹æ¥è‡ªGPTï¼Œæˆ‘è§‰å¾—å®ƒè¯´çš„å¾ˆå¯¹\n\nå®šä¹‰ä¸€ä¸ªå˜é‡å¹¶ä½¿ç”¨æ•°æ®è½¬æ¢ï¼ˆç±»å‹è½¬æ¢ï¼‰æ˜¯ä¸€ç§å¸¸è§çš„ç¼–ç¨‹æ–¹å¼ï¼Œä½†ä¸å˜é‡æ¨¡æ¿æœ‰ä¸€äº›åŒºåˆ«ï¼š\n\né€šç”¨æ€§ï¼š å˜é‡æ¨¡æ¿å…è®¸ä½ é€šè¿‡æ¨¡æ¿å‚æ•°æ¥ç”Ÿæˆå¤šä¸ªä¸åŒç±»å‹çš„å˜é‡ï¼Œä»è€Œåœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚è¿™ä½¿å¾—ä»£ç æ›´å…·é€šç”¨æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå› ä¸ºä½ å¯ä»¥ä¸ºå¤šä¸ªç±»å‹ç”Ÿæˆç›¸åº”çš„å˜é‡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œç›´æ¥å®šä¹‰å˜é‡å¹¶ä½¿ç”¨æ•°æ®è½¬æ¢é€šå¸¸åªé€‚ç”¨äºç‰¹å®šçš„ä¸€ç§æ•°æ®ç±»å‹ã€‚\næ¨¡æ¿åŒ–ï¼š å˜é‡æ¨¡æ¿æ˜¯ä¸€ç§æ¨¡æ¿åŒ–çš„æ–¹å¼æ¥ç”Ÿæˆå˜é‡ï¼Œå®ƒéµå¾ª C++ çš„æ¨¡æ¿æœºåˆ¶ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨æ¨¡æ¿ç‰¹åŒ–ã€éƒ¨åˆ†ç‰¹åŒ–ç­‰æŠ€æœ¯æ¥å®šåˆ¶åŒ–ç”Ÿæˆçš„å˜é‡ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚è€Œä½¿ç”¨æ•°æ®è½¬æ¢æ—¶ï¼Œä½ å¿…é¡»æ˜¾å¼åœ°æ‰§è¡Œç±»å‹è½¬æ¢ï¼Œè¿™å¯èƒ½ä¼šåœ¨ä»£ç ä¸­å¼•å…¥ä¸å¿…è¦çš„é‡å¤ã€‚\nç¼–è¯‘æ—¶è®¡ç®—ï¼š å˜é‡æ¨¡æ¿é€šå¸¸ç”¨äºåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆå€¼ï¼Œå› æ­¤å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œç±»å‹æ£€æŸ¥å’Œè®¡ç®—ã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç çš„æ€§èƒ½å’Œå®‰å…¨æ€§ã€‚è€Œæ•°æ®è½¬æ¢å¯èƒ½åœ¨è¿è¡Œæ—¶è¿›è¡Œï¼Œå¯èƒ½ä¼šå¼•å…¥ä¸€äº›è¿è¡Œæ—¶å¼€é”€å’Œç±»å‹é”™è¯¯çš„é£é™©ã€‚\næŠ½è±¡æ€§ï¼š å˜é‡æ¨¡æ¿å¯ä»¥åœ¨æ›´é«˜çš„æŠ½è±¡å±‚æ¬¡ä¸Šæ“ä½œæ•°æ®ï¼Œä½¿ä»£ç æ›´å…·è¡¨è¾¾åŠ›å’Œå¯è¯»æ€§ã€‚å®ƒå…è®¸ä½ ä»¥æ›´è‡ªç„¶çš„æ–¹å¼æè¿°æŸä¸ªå€¼ä¸ç‰¹å®šç±»å‹ä¹‹é—´çš„å…³ç³»ï¼Œè€Œä¸å¿…æ˜¾å¼è¿›è¡Œç±»å‹è½¬æ¢ã€‚\n\næ€»ä¹‹ï¼Œå˜é‡æ¨¡æ¿æä¾›äº†ä¸€ç§æ›´çµæ´»ã€é€šç”¨å’Œæ¨¡æ¿åŒ–çš„æ–¹å¼æ¥ç”Ÿæˆå˜é‡ï¼Œé€‚ç”¨äºéœ€è¦åœ¨ä¸åŒç±»å‹ä¸Šå·¥ä½œçš„æƒ…å†µã€‚å½“ä½ éœ€è¦ä¸ºå¤šä¸ªç±»å‹ç”Ÿæˆç‰¹å®šçš„å˜é‡æˆ–å€¼æ—¶ï¼Œå˜é‡æ¨¡æ¿æ˜¯ä¸€ç§æ›´ä¼˜é›…å’Œå¼ºå¤§çš„é€‰æ‹©ã€‚\n3.constexpré™åˆ¶æ”¾å®½åœ¨C++11ä¸­è¢«å¼•å…¥çš„constexprï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ç¨‹åºçš„æœŸé—´ï¼Œå°±å°†ä¸€éƒ¨åˆ†å·¥ä½œå®Œæˆï¼Œä¸å¿…ç­‰åˆ°è¿è¡ŒæœŸé—´å†åšï¼›åœ¨C++11ä¸­ï¼Œconstexprçš„é™åˆ¶å¾ˆä¸¥æ ¼ï¼Œè¿™å¯¼è‡´å®ƒå¹¶ä¸å¥½ç”¨ï¼š\n\nconstexprä¿®é¥°å˜é‡ï¼Œè¦æ±‚å˜é‡å¿…é¡»å¯ä»¥åœ¨ç¼–è¯‘å™¨æ¨å¯¼å‡ºæ¥\nconstexprä¿®é¥°å‡½æ•°ï¼ˆè¿”å›å€¼ï¼‰ï¼Œå‡½æ•°å†…é™¤äº†å¯ä»¥åŒ…å«usingå’ŒtypedefæŒ‡ä»¤ä»¥åŠstatic_asssertæ–­è¨€å¤–ï¼Œåªèƒ½åŒ…å«ä¸€æ¡returnè¯­å¥\nconstexpråŒæ—¶å¯ä»¥ä¿®é¥°æ„é€ å‡½æ•°ï¼Œä½†ä¹Ÿä¼šè¦æ±‚ä½¿ç”¨è¿™ä¸ªæ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨ç¼–è¯‘å™¨å°±æŠŠç›¸å…³çš„å†…å®¹å…¨æ¨å¯¼å‡ºæ¥\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„C++11ä¸­çš„ç”¨ä¾‹ï¼Œç»™è¯¥å‡½æ•°è®¾ç½®äº†constexprå…³é”®å­—åï¼Œè¯¥å‡½æ•°å°±å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´è¢«è®¡ç®—å‡ºç»“æœï¼Œå†ç”¨static_assertåœ¨ç¼–è¯‘æœŸé—´æ–­è¨€ç»“æœæ˜¯å¦æ­£ç¡®ï¼›\nconstexpr int factorial(int n) &#123;    return (n &lt;= 1) ? 1 : n * factorial(n - 1);&#125;int test_constexpr1() &#123;    constexpr int result = factorial(5); // ç¼–è¯‘æ—¶è®¡ç®—é˜¶ä¹˜    static_assert(result == 120, &quot;Factorial of 5 should be 120&quot;); // ç¼–è¯‘æ—¶æ–­è¨€    cout &lt;&lt; result &lt;&lt; endl;    return 0;&#125;\n\nå¦‚æœåœ¨C++11ä¸­çš„constexprå‡½æ•°å†…åŒ…å«å…¶ä»–è¯­å¥ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œç¿»è¯‘è¿‡æ¥æ˜¯è¯¥å‡½æ•°å†…éƒ¨ä¸æ˜¯ä¸€ä¸ªreturnè¿”å›è¯­å¥\n$ g++ test.cpp -o test -std=c++11test.cpp: In function â€˜constexpr int FuncNew(int)â€™:test.cpp:96:1: error: body of â€˜constexprâ€™ function â€˜constexpr int FuncNew(int)â€™ not a return-statement &#125; ^\n\nc++14ä¸­ï¼Œå¯¹constexprçš„é™åˆ¶æ”¾å®½äº†ï¼Œå…è®¸ä½¿ç”¨å¾ªç¯ã€ifã€switchç­‰ç­‰è¯­å¥ï¼Œä½†æ˜¯ä¸»æ—¨è¿˜æ˜¯ä¸€æ ·çš„ï¼Œéœ€è¦åœ¨ç¼–è¯‘æœŸé—´å°±å¯ä»¥è®¡ç®—å‡ºå…¨éƒ¨å†…å®¹ï¼›é™åˆ¶æ”¾å®½ä¹‹åï¼Œè¿™ä¸ªå…³é”®å­—ä¾¿å¯ä»¥æ›´çµæ´»çš„ä½¿ç”¨äº†ã€‚\n// è®¡ç®—å‰né¡¹å’Œï¼ŒC++11constexpr int Func(int n)&#123;    return n &gt; 0 ? Func(n - 1) + n : 0;&#125;// è®¡ç®—å‰Né¡¹å’Œï¼ŒC++14constexpr int FuncNew(int n)&#123;    if (n &lt;= 0)    &#123;        return 0;    &#125;    int sum = 0;    for (int i = 0; i &lt; n; ++i)    &#123;        sum += i;    &#125;    return sum;&#125;\n\n4.äºŒè¿›åˆ¶å˜é‡å¯ä»¥ä½¿ç”¨0bæˆ–è€…0Bå¼€å¤´ç›´æ¥å®šä¹‰äºŒè¿›åˆ¶å˜é‡ã€‚\nint main()&#123;        int bit1 = 0b1001;    int bit2 = 0B1011;    std::cout &lt;&lt; bit1 &lt;&lt; &quot; &quot; &lt;&lt; bit2 &lt;&lt; std::endl;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\n$ g++ test.cpp -o test -std=c++14$ ./test9 11\n\næˆ‘åœ¨æµ‹è¯•ä¸­å‘ç°ï¼Œå½“æˆ‘ç”¨C++11ç¼–è¯‘æ­¤ä»£ç çš„æ—¶å€™ï¼Œä¼¼ä¹ä¹Ÿæ²¡æœ‰å¼•å‘ç¼–è¯‘é”™è¯¯ï¼Œéš¾é“è¯´0bæ˜¯åœ¨C++11é‡Œé¢å°±æ”¯æŒäº†å—ï¼Ÿ\n$ g++ test.cpp -o test -std=c++11$ ./test9 11\n\nGPTç»™å‡ºäº†0Bè¿™ç§äºŒè¿›åˆ¶å˜é‡æ˜¯åœ¨C++14ä¸­å¼•å…¥çš„ç¡®è®¤ï¼Œå¹¶æåˆ°äº†ä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸Šè¿°æƒ…å†µï¼›è™½ç„¶C++11çœ‹ä¸Šå»ç¼–è¯‘å’Œè¿è¡Œéƒ½æ²¡æœ‰é—®é¢˜ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å¾—éµå¾ªç‰ˆæœ¬ï¼Œé€‰ç”¨æ­£ç¡®çš„ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘ï¼Œæ‰èƒ½æ ¹æœ¬ä¸Šé¿å…é”™è¯¯\n\nC++æ ‡å‡†é€šå¸¸æ˜¯å‘åå…¼å®¹çš„ï¼Œè¿™æ„å‘³ç€è¾ƒæ–°ç‰ˆæœ¬çš„ç¼–è¯‘å™¨é€šå¸¸ä¼šç»§ç»­æ”¯æŒè¾ƒæ—§ç‰ˆæœ¬çš„æ ‡å‡†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ä½¿ç”¨æ”¯æŒC++11æ ‡å‡†çš„ç¼–è¯‘å™¨ï¼ˆå¦‚g++ï¼‰æ—¶ï¼Œä½¿ç”¨äº†C++14æˆ–æ›´é«˜ç‰ˆæœ¬çš„ç‰¹æ€§ï¼Œé€šå¸¸ä¸ä¼šå¼•å‘ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºè¿™äº›ç¼–è¯‘å™¨ä¼šå°½é‡å‘åå…¼å®¹ï¼Œä»¥ä¿æŒç°æœ‰ä»£ç çš„å¯ç¼–è¯‘æ€§ã€‚\nåœ¨ä½ æåˆ°çš„æƒ…å†µä¸‹ï¼Œå³ä½¿ä½ ä½¿ç”¨g++ç¼–è¯‘å™¨ä»¥C++11æ ‡å‡†ç¼–è¯‘ï¼Œå®ƒä»ç„¶å¯ä»¥ç†è§£å’Œæ¥å—C++14å¼•å…¥çš„äºŒè¿›åˆ¶å­—é¢é‡ç‰¹æ€§ã€‚è¿™æ˜¯ç¼–è¯‘å™¨å¼€å‘è€…çš„ä¸€ç§è®¾è®¡é€‰æ‹©ï¼Œä»¥ä¾¿ä½¿ä»£ç çš„è¿ç§»æ›´åŠ å¹³æ»‘ã€‚ä½†æ˜¯ï¼Œä¸ºäº†éµå¾ªæœ€ä½³å®è·µå’Œä¿æŒä»£ç çš„å¯è¯»æ€§ï¼Œå½“ä½ åœ¨ä½¿ç”¨ç‰¹å®šC++æ ‡å‡†çš„åŠŸèƒ½æ—¶ï¼Œæœ€å¥½å°†ç¼–è¯‘å™¨é€‰é¡¹è®¾ç½®ä¸ºè¯¥æ ‡å‡†çš„ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿ä»£ç çš„å¯ç§»æ¤æ€§ã€‚\n\n5.æ•°å­—åˆ†éš”ç¬¦åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä½¿ç”¨æ•°å­—çš„æ—¶å€™ï¼Œä¸ºäº†æ›´å¥½çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬ä¼šä»¥3ä¸ªæ•°ç»„æˆ–è€…4ä¸ªæ•°ç»„ä¸ºåˆ†å‰²ï¼Œæ‰“ä¸€ä¸ªç‚¹\n1,0000,0000 ä¸€äº¿100,000,000\n\nC++14ä¸­ï¼Œä¹Ÿæ”¯æŒäº†è¿™æ ·çš„æ‰“ç‚¹ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬æ›´å¥½çš„çœ‹å‡ºå¤§æ•°å­—çš„ä½æ•°\nvoid test_num_div()&#123;    long long big_num1 = 100000000;    long long big_num2 = 100&#x27;000&#x27;000;    long long big_num3 = 1&#x27;0000&#x27;0000;    cout &lt;&lt; big_num1 &lt;&lt; endl;    cout &lt;&lt; big_num2 &lt;&lt; endl;    cout &lt;&lt; big_num3 &lt;&lt; endl;&#125;\n\néœ€è¦æ³¨æ„ï¼Œè¿™æ ·çš„æ“ä½œä¸ä¼šå¯¹æ•°å­—æœ¬èº«æœ‰ä»»ä½•å½±å“\n$ ./test100000000100000000100000000\n\nåœ¨C++11ä¸­è¿™ç§è¯­æ³•æ˜¯ä¸æ”¯æŒçš„\n$ g++ test.cpp -o test -std=c++11test.cpp:116:29: warning: multi-character character constant [-Wmultichar]     long long big_num2 = 100&#x27;000&#x27;000;                             ^~~~~test.cpp:117:27: warning: multi-character character constant [-Wmultichar]     long long big_num3 = 1&#x27;0000&#x27;0000;                           ^~~~~~test.cpp: In function â€˜void test_num_div()â€™:test.cpp:116:29: error: expected â€˜,â€™ or â€˜;â€™ before &#x27;\\x303030&#x27;     long long big_num2 = 100&#x27;000&#x27;000;                             ^~~~~test.cpp:117:27: error: expected â€˜,â€™ or â€˜;â€™ before &#x27;\\x30303030&#x27;     long long big_num3 = 1&#x27;0000&#x27;0000;                           ^~~~~~\n\n6.è¿”å›å€¼autoæ¨å¯¼c++14æ–°å¢äº†å‡½æ•°è¿”å›å€¼çš„æ¨å¯¼ï¼Œå½“è¿”å›å€¼å£°æ˜ä¸ºautoæ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ä½ çš„returnè¯­å¥æ¨å¯¼å‡ºä½ çš„è¿”å›å€¼ç±»å‹ã€‚\ntemplate&lt;typename T&gt;auto Func(T x, T y)&#123;    return x + y;&#125;int main()&#123;    std::cout &lt;&lt; Func(3, 4) &lt;&lt; std::endl; // è¿”å›å€¼æ¨å¯¼ä¸ºint    std::cout &lt;&lt; Func(3.1, 4.2) &lt;&lt; std::endl; // è¿”å›å€¼æ¨å¯¼ä¸ºdouble    return 0;&#125;\n\n$ makeg++ test.cpp -o test -std=c++14$ ./test77.3\n\nè¿™ä¸ªæ¨å¯¼æ˜¯æœ‰é™åˆ¶æ¡ä»¶çš„\n1ã€å¦‚æœæœ‰å¤šä¸ªæ¨å¯¼è¯­å¥ï¼Œé‚£ä¹ˆå¤šä¸ªæ¨å¯¼çš„ç»“æœå¿…é¡»ä¸€è‡´\n// ç¼–è¯‘æŠ¥é”™ï¼Œç¬¬ä¸€ä¸ªreturnæ¨å¯¼ä¸ºintï¼Œç¬¬äºŒä¸ªreturnæ¨å¯¼ä¸ºdoubleï¼Œä¸¤æ¬¡æ¨å¯¼ç»“æœä¸ä¸€è‡´auto Func(int flag)&#123;    if (flag &lt; 0)    &#123;        return 1;    &#125;    else    &#123;        return 3.14;    &#125;&#125;\n\n2ã€å¦‚æœæ²¡æœ‰returnæˆ–è€…returnä¸ºvoidç±»å‹ï¼Œé‚£ä¹ˆautoä¼šè¢«æ¨å¯¼ä¸ºvoidã€‚\nauto f() &#123;&#125;              // returns voidauto g() &#123; return f(); &#125; // returns voidauto* x() &#123;&#125;             // error: cannot deduce auto* from void\n\n3ã€ä¸€æ—¦åœ¨å‡½æ•°ä¸­çœ‹åˆ°returnè¯­å¥ï¼Œä»è¯¥è¯­å¥æ¨å¯¼å‡ºçš„è¿”å›ç±»å‹å°±å¯ä»¥åœ¨å‡½æ•°çš„å…¶ä½™éƒ¨åˆ†ä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬åœ¨å…¶ä»–returnè¯­å¥ä¸­ã€‚\nauto Sum(int i)&#123;    if (i &lt;= 1)    &#123;        return i; // è¿”å›å€¼è¢«æ¨å¯¼ä¸ºint    &#125;    else    &#123;        return Sum(i - 1) + i; // sumçš„è¿”å›å€¼å·²ç»è¢«æ¨å¯¼å‡ºæ¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯æ²¡æœ‰é—®é¢˜çš„    &#125;&#125;\n\nä½†æ˜¯å¦‚æœè¿˜æ²¡è¢«æ¨å¯¼å‡ºæ¥ï¼Œé‚£å°±ä¸èƒ½ä½¿ç”¨ã€‚\nauto Sum(int i)&#123;    if (i &gt; 1)    &#123;        return Sum(i - 1) + i;    &#125;    else    &#123;        return i;    &#125;&#125;// ç¼–è¯‘æŠ¥é”™ï¼Œå› ä¸ºSumçš„è¿”å›å€¼è¿˜æ²¡æœ‰è¢«æ¨å¯¼å‡ºæ¥ï¼Œæ‰€ä»¥è¿˜ä¸èƒ½ä½¿ç”¨error: use of â€˜auto Sum(int)â€™ before deduction of â€˜autoâ€™\n\n4ã€ä¸èƒ½æ¨å¯¼åˆå§‹åŒ–åˆ—è¡¨ã€‚\nauto func () &#123; return &#123;1, 2, 3&#125;; &#125;// ç¼–è¯‘æŠ¥é”™error: returning initializer list\n\n5ã€è™šå‡½æ•°ä¸èƒ½ä½¿ç”¨è¿”å›å€¼æ¨å¯¼\nstruct Item&#123;    virtual auto Func();&#125;;// ç¼–è¯‘æŠ¥é”™error: virtual function cannot have deduced return type\n\n7.[[deprecated]]æ ‡è®°è¿™ä¸ªæ ‡è®°çš„ä½œç”¨æ˜¯å‘ŠçŸ¥å…¶ä»–äººï¼ŒæŸä¸ªå‡½æ•°è¢«å¼ƒç”¨äº†ï¼Œä¸å…è®¸ç»§ç»­è°ƒç”¨è¯¥å‡½æ•°ï¼›è¯¥å­—æ®µçš„å¥½å¤„åœ¨äºï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•å·²ç»åœ¨åç»­ä¸éœ€è¦ä½¿ç”¨äº†ï¼Œä½ å¯ä»¥å…ˆç»™ä»–åŠ ä¸Šè¿™ä¸ªå…³é”®å­—ï¼Œç„¶åå†è¿›è¡Œå…¶ä»–çš„ä»£ç æ£€æŸ¥ï¼Œç¡®è®¤æ— è¯¯åï¼Œå†å°†è¿™ä¸ªå‡½æ•°æ•´ä½“æ¸…é™¤ï¼›\nåˆ«äººä¹Ÿä¸éœ€è¦å»æ£€æŸ¥å‡½æ•°çš„å®ç°ï¼Œå› ä¸ºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ç¼–è¯‘å™¨å°±ä¼šå‘Šè¯‰ä½ è¿™ä¸ªå‡½æ•°è¢«å¼ƒç”¨ï¼›ä½†æ˜¯ç¼–è¯‘ä¾æ—§æ˜¯æˆåŠŸçš„ï¼\n[[deprecated]]int test_return_auto()&#123;    std::cout &lt;&lt; Func(3, 4) &lt;&lt; std::endl; // è¿”å›å€¼æ¨å¯¼ä¸ºint    std::cout &lt;&lt; Func(3.1, 4.2) &lt;&lt; std::endl; // è¿”å›å€¼æ¨å¯¼ä¸ºdouble    return 0;&#125;int main()&#123;    test_return_auto();    return 0;&#125;\n\nåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè­¦å‘Šä½ ï¼Œè¿™ä¸ªå‡½æ•°å·²ç»è¢«å¼ƒç”¨äº†ï¼›ä½†è¿™é‡Œåªæ˜¯è­¦å‘Šï¼Œç¼–è¯‘ä¾æ—§æˆåŠŸäº†ï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯éœ€è¦ç¨‹åºçŒ¿å»ç…ä¸€çœ¼å„ä¸ªè­¦å‘Šåˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ã€‚\n$ makeg++ test.cpp -o test -std=c++14test.cpp: In function â€˜int main()â€™:test.cpp:145:22: warning: â€˜int test_return_auto()â€™ is deprecated [-Wdeprecated-declarations]     test_return_auto();                      ^test.cpp:132:5: note: declared here int test_return_auto()     ^~~~~~~~~~~~~~~~test.cpp:145:22: warning: â€˜int test_return_auto()â€™ is deprecated [-Wdeprecated-declarations]     test_return_auto();                      ^test.cpp:132:5: note: declared here int test_return_auto()     ^~~~~~~~~~~~~~~~\n\n\nstdåº“çš„æ–°ç‰¹æ€§ä»¥ä¸‹æ˜¯STDåº“çš„æ–°å¢å†…å®¹ï¼\n8.std::make_uniqueè¿™ä¸ªä¸œè¥¿åœ¨cplusplusç½‘ç«™ä¸Šæ‰¾ä¸åˆ°é‡Šä¹‰ï¼Œæ‰€ä»¥å°±å»cppçš„å®˜ç½‘ä¸Šæ‰¾äº†\n\nhttps://zh.cppreference.com/w/cpp/memory/unique_ptr/make_unique\n\nè¯¥å‡½æ•°å®šä¹‰åœ¨&lt;memory&gt;å¤´æ–‡ä»¶ä¸­\ntemplate&lt; class T, class... Args &gt;unique_ptr&lt;T&gt; make_unique( Args&amp;&amp;... args );//(1)\t(C++14 èµ·) (ä»…å¯¹éæ•°ç»„ç±»å‹)template&lt; class T &gt;unique_ptr&lt;T&gt; make_unique( std::size_t size );//(2)\t(C++14 èµ·) (ä»…å¯¹æœªçŸ¥è¾¹ç•Œæ•°ç»„)template&lt; class T, class... Args &gt;/* unspecified */ make_unique( Args&amp;&amp;... args ) = delete;//(3)\t(C++14 èµ·) (ä»…å¯¹å·²çŸ¥è¾¹ç•Œæ•°ç»„)\n\nä½œç”¨æ˜¯æ„é€  T ç±»å‹å¯¹è±¡å¹¶å°†å…¶åŒ…è£…è¿› std::unique_ptrï¼›\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\nargs\nå°†è¦æ„é€ çš„ T å®ä¾‹æ‰€ç”¨çš„å‚æ•°åˆ—è¡¨ã€‚\n\n\nsize\nè¦æ„é€ çš„æ•°ç»„å¤§å°\n\n\n\næ„é€ éæ•°ç»„ç±»å‹ T å¯¹è±¡ã€‚ä¼ é€’å‚æ•° args ç»™ T çš„æ„é€ å‡½æ•°ã€‚æ­¤é‡è½½åªæœ‰åœ¨ T ä¸æ˜¯æ•°ç»„ç±»å‹æ—¶æ‰ä¼šå‚ä¸é‡è½½å†³è®®ã€‚å‡½æ•°ç­‰ä»·äºï¼š\n\nunique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...))\n\n\næ„é€ æ‹¥æœ‰åŠ¨æ€å¤§å°çš„æ•°ç»„ã€‚å€¼åˆå§‹åŒ–æ•°ç»„å…ƒç´ ã€‚æ­¤é‡è½½åªæœ‰åœ¨ T æ˜¯æœªçŸ¥è¾¹ç•Œæ•°ç»„æ—¶æ‰ä¼šå‚ä¸é‡è½½å†³è®®ã€‚å‡½æ•°ç­‰ä»·äºï¼š\n\nunique_ptr&lt;T&gt;(new std::remove_extent_t&lt;T&gt;[size]())\n\nä½¿ç”¨ç¤ºä¾‹\nclass test_class&#123;public:    test_class(int a=-1):_a(a)&#123;&#125;    int _a;&#125;;int main()&#123;    std::unique_ptr&lt;test_class&gt; pt = std::make_unique&lt;test_class&gt;(3);    cout &lt;&lt; pt-&gt;_a &lt;&lt; endl;    return 0;&#125;\n\n$ makeg++ test.cpp -o test -std=c++14$ ./test3\n\n9.std::shared_timed_mutexä¸std::shared_lockc++11å¼•å…¥äº†å¤šçº¿ç¨‹çº¿ç¨‹çš„ä¸€äº›åº“ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰è¯»å†™é”çš„ï¼Œå› æ­¤åœ¨c++14å¼•å…¥äº†è¯»å†™é”çš„ç›¸å…³å®ç°ï¼ˆå¤´æ–‡ä»¶shared_mutexï¼‰ï¼Œå…¶å®c++14è¯»å†™é”ä¹Ÿè¿˜ä¸å¤Ÿå®Œå–„ï¼Œç›´åˆ°c++17è¯»å†™é”è¿™å—æ‰ç®—æ˜¯å®Œå¤‡èµ·æ¥ã€‚\nstd::shared_timed_mutexæ˜¯å¸¦è¶…æ—¶çš„è¯»å†™é”å¯¹è±¡ï¼Œæ¥å£è¿˜ç®—æ¯”è¾ƒç®€æ´æ˜“æ‡‚ï¼Œå’Œä¹‹å‰æ¥è§¦è¿‡çš„å…¶ä»–é”åŸºæœ¬ä¸€è‡´ï¼›å†…éƒ¨æˆå‘˜ä¸­lock()æ˜¯å†™é”ï¼Œlock_shared()æ˜¯è¯»é”;\nhttps://zh.cppreference.com/w/cpp/thread/shared_timed_mutex\n\nstd::shared_lockæ˜¯åŠ é”çš„RAIIå®ç°ï¼Œå³æ„é€ æ—¶åŠ é”ï¼Œææ„æ—¶è§£é”ï¼›æˆ‘ä»¬ä½¿ç”¨shared_lock/unique_lockæ¥ä»shared_timed_mutexä¸­è·å–é”çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è·å–è¯»é”å’Œå†™é”ï¼›\nstd::shared_timed_mutex mutex;void readOperation() &#123;    // è¯»é”æ˜¯å¤šäººå¯ä»¥è·å–çš„ï¼Œæ‰€ä»¥è¦ç”¨shared_lock (è¯»é”)    std::shared_lock&lt;std::shared_timed_mutex&gt; lock(mutex);    std::cout &lt;&lt; &quot;Read operation: &quot; &lt;&lt; sharedResource &lt;&lt; std::endl;&#125;void writeOperation() &#123;    // å†™é”äº’æ–¥è·å–ï¼Œç”¨unique_lock (å†™é”)    std::unique_lock&lt;std::shared_timed_mutex&gt; lock(mutex);    sharedResource++;    std::cout &lt;&lt; &quot;Write operation: &quot; &lt;&lt; sharedResource &lt;&lt; std::endl;&#125;\n\n10.std::exchangec++14æ–°å¢äº†ä¸€ä¸ªæ¥å£std::exchangeï¼ˆå¤´æ–‡ä»¶utilityï¼‰ï¼Œå…¶å®è¿™ä¸ªä¹Ÿå¹¶ä¸ç®—æ˜¯æ–°å¢çš„ï¼Œå› ä¸ºè¿™ä¸ªæ¥å£å…¶å®åœ¨c++11çš„æ—¶å€™å°±æœ‰äº†ï¼Œåªä¸è¿‡åœ¨c++11ä¸­ä½œä¸ºä¸€ä¸ªå†…éƒ¨å‡½æ•°ï¼Œä¸æš´éœ²ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œåœ¨c++14ä¸­æ‰æŠŠå®ƒæš´éœ²å‡ºæ¥ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚\nint main()&#123;    std::string s1 = &quot;hello&quot;;    std::string s2 = &quot;world&quot;;    std::exchange(s1, s2);    std::cout &lt;&lt; s1 &lt;&lt; &quot; &quot; &lt;&lt; s2 &lt;&lt; std::endl;    return 0;&#125;// è¾“å‡ºç»“æœworld world\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œexchangeä¼šæŠŠç¬¬äºŒä¸ªå€¼èµ‹å€¼ç»™ç¬¬ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜ç¬¬äºŒä¸ªå€¼ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„å®ç°å§ã€‚\n/// Assign @p __new_val to @p __obj and return its previous value. template &lt;typename _Tp, typename _Up = _Tp&gt;  _GLIBCXX20_CONSTEXPR  inline _Tp    exchange(_Tp&amp; __obj, _Up&amp;&amp; __new_val)  noexcept(__and_&lt;is_nothrow_move_constructible&lt;_Tp&gt;,    is_nothrow_assignable&lt;_Tp&amp;, _Up&gt;&gt;::value)  &#123; return std::__exchange(__obj, std::forward&lt;_Up&gt;(__new_val)); &#125;  // C++11 version of std::exchange for internal use.template &lt;typename _Tp, typename _Up = _Tp&gt;  _GLIBCXX20_CONSTEXPR  inline _Tp  __exchange(_Tp&amp; __obj, _Up&amp;&amp; __new_val)  &#123;    _Tp __old_val = std::move(__obj);    __obj = std::forward&lt;_Up&gt;(__new_val);    return __old_val;  &#125;\n\né€šè¿‡æ³¨é‡Šæˆ‘ä»¬å¯ä»¥æ˜ç™½å«ä¹‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç¬¬äºŒä¸ªå€¼èµ‹å€¼ç»™ç¬¬ä¸€ä¸ªå€¼ï¼ŒåŒæ—¶è¿”å›ç¬¬ä¸€ä¸ªå€¼çš„æ—§å€¼ã€‚\né™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿™é‡Œè¯´æ˜ä¸€ä¸ªå…³é”®çš„ç‚¹ã€‚exchangeçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸‡èƒ½å¼•ç”¨ï¼Œæ‰€ä»¥è¯´ä»–æ˜¯æ—¢å¯ä»¥æ¥æ”¶å·¦å€¼ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å³å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥ä½¿ç”¨ã€‚\nint main()&#123;    std::string s1 = &quot;hello&quot;;    // ç¬¬äºŒä¸ªå€¼æ˜¯çº¯å³å€¼    std::exchange(s1, &quot;world&quot;);    std::cout &lt;&lt; s1 &lt;&lt; std::endl;    std::string s2 = &quot;hello world&quot;;    // ç¬¬äºŒä¸ªå€¼é€šè¿‡moveè¯­ä¹‰è½¬æˆå³å€¼    std::exchange(s1, std::move(s2));    std::cout &lt;&lt; s1 &lt;&lt; &quot; | &quot; &lt;&lt; s2 &lt;&lt; std::endl;    return 0;&#125;// è¾“å‡ºç»“æœï¼Œæ³¨æ„è¿™é‡Œs2ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå› ä¸ºs2çš„ä¸œè¥¿å·²ç»è¢«ç§»åŠ¨æ‹·è´ç»™s1äº†worldhello world | \n\n11.std::integer_sequenceç±»æ¨¡æ¿ std::integer_sequence è¡¨ç¤ºä¸€ä¸ªç¼–è¯‘æ—¶çš„æ•´æ•°åºåˆ—ã€‚åœ¨ç”¨ä½œå‡½æ•°æ¨¡æ¿çš„å®å‚æ—¶ï¼Œèƒ½æ¨å¯¼å‚æ•°åŒ… Ints å¹¶å°†å®ƒç”¨äºåŒ…å±•å¼€ã€‚\nhttps://zh.cppreference.com/w/cpp/utility/integer_sequence\nè¿™ä¸ªå®åœ¨æ˜¯å¤ªéš¾æ‡‚äº†ï¼Œæä¸æ˜ç™½æ˜¯å¹²å˜›çš„ï¼Œæ”¾å¼ƒäº†ğŸ˜¥\n12.std::quotedhttps://zh.cppreference.com/w/cpp/io/manip/quoted\nè¯¥å‡½æ•°æ¨¡æ¿ä½äº &lt;iomanip&gt; å¤´æ–‡ä»¶ä¸­ï¼Œç”¨äºåœ¨è¾“å…¥è¾“å‡ºæµä¸­å¤„ç†è¢«å¼•å·åŒ…å›´çš„å­—ç¬¦ä¸²ã€‚å®ƒé€šå¸¸ç”¨äºå¤„ç† CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ–‡ä»¶æˆ–å…¶ä»–æ ¼å¼ï¼Œå…¶ä¸­å­—æ®µè¢«å¼•å·æ‹¬èµ·æ¥ä»¥å¤„ç†åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚é€—å·ã€æ¢è¡Œç¬¦ç­‰ï¼‰çš„æƒ…å†µã€‚\nå¯¹äºcoutè€Œè¨€ï¼Œquotedä¼šå°†å­—ç¬¦ä¸²åŒ…å›´åœ¨åŒå¼•å·ä¸­è¾“å‡º\nint test_quorted() &#123;    std::string data = &quot;Hello, \\&quot;world\\&quot;\\n&quot;;        // è¾“å‡ºæµä¸­ä½¿ç”¨ std::quotedï¼Œä¼šå°†å­—ç¬¦ä¸²åœ¨&quot;å†…åŒ…å›´è¾“å‡º    std::cout &lt;&lt; std::quoted(data) &lt;&lt; std::endl;    return 0;&#125;\n\n$ ./test&quot;Hello, \\&quot;world\\&quot;&quot;\n\nä»¥ä¸‹æ˜¯å®˜æ–¹ç»™çš„ä¸€ä¸ªç¤ºä¾‹\n#include &lt;iostream&gt;#include &lt;iomanip&gt;#include &lt;sstream&gt; int main()&#123;    std::stringstream ss;    std::string in = &quot;String with spaces, and embedded \\&quot;quotes\\&quot; too&quot;;    std::string out;     auto show = [&amp;](const auto&amp; what) &#123;        &amp;what == &amp;in            ?   std::cout &lt;&lt; &quot;read in     [&quot; &lt;&lt; in &lt;&lt; &quot;]\\n&quot;                          &lt;&lt; &quot;stored as   [&quot; &lt;&lt; ss.str() &lt;&lt; &quot;]\\n&quot;            :   std::cout &lt;&lt; &quot;written out [&quot; &lt;&lt; out &lt;&lt; &quot;]\\n\\n&quot;;    &#125;;     ss &lt;&lt; std::quoted(in);    show(in);    ss &gt;&gt; std::quoted(out);    show(out);     ss.str(&quot;&quot;); // clear the stream buffer     in = &quot;String with spaces, and embedded $quotes$ too&quot;;    const char delim &#123;&#x27;$&#x27;&#125;;    const char escape &#123;&#x27;%&#x27;&#125;;     ss &lt;&lt; std::quoted(in, delim, escape);    show(in);    ss &gt;&gt; std::quoted(out, delim, escape);    show(out);&#125;\n\nè¾“å‡º\nread in     [String with spaces, and embedded &quot;quotes&quot; too]stored as   [&quot;String with spaces, and embedded \\&quot;quotes\\&quot; too&quot;]written out [String with spaces, and embedded &quot;quotes&quot; too] read in     [String with spaces, and embedded $quotes$ too]stored as   [$String with spaces, and embedded %$quotes%$ too$]written out [String with spaces, and embedded $quotes$ too]\n\nåœ¨ç»™å®šçš„ä»£ç ä¸­ï¼Œdelim å’Œ escape æ˜¯ç”¨äºæŒ‡å®šè‡ªå®šä¹‰çš„åˆ†éš”ç¬¦å’Œè½¬ä¹‰å­—ç¬¦çš„å‚æ•°ã€‚è¿™äº›å‚æ•°æ˜¯ç”¨äº std::quoted å‡½æ•°çš„é‡è½½å½¢å¼ï¼Œå…è®¸ä½ æŒ‡å®šä¸åŒäºé»˜è®¤å¼•å·çš„å­—ç¬¦æ¥åŒ…å›´å­—ç¬¦ä¸²ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªä¸åŒäºé»˜è®¤è½¬ä¹‰å­—ç¬¦çš„å­—ç¬¦æ¥è½¬ä¹‰å¼•å·å­—ç¬¦ã€‚ä»¥ä¸‹æ˜¯å…³äºè¿™ä¸¤ä¸ªå‚æ•°çš„è¯¦ç»†è§£é‡Šï¼š\n\ndelim: åˆ†éš”ç¬¦ åœ¨ç¬¬ä¸€ä¸ªç”¨æ³•ä¸­ï¼Œstd::quoted å‡½æ•°ä½¿ç”¨äº†ä¸‰ä¸ªå‚æ•°çš„é‡è½½å½¢å¼ï¼šstd::quoted(in, delim, escape)ã€‚delim å‚æ•°ç”¨äºæŒ‡å®šåŒ…å›´å­—ç¬¦ä¸²çš„åˆ†éš”ç¬¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œstd::quoted ä½¿ç”¨åŒå¼•å·ä½œä¸ºé»˜è®¤åˆ†éš”ç¬¦ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³è¦ä½¿ç”¨å…¶ä»–å­—ç¬¦æ¥åŒ…å›´å­—ç¬¦ä¸²ï¼Œä»¥é¿å…ä¸å­—ç¬¦ä¸²æœ¬èº«çš„å­—ç¬¦å†²çªã€‚åœ¨ä½ çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œåˆ†éš”ç¬¦ delim è¢«è®¾ç½®ä¸º $ï¼Œè¿™æ„å‘³ç€å­—ç¬¦ä¸²ä¼šè¢«åŒ…å›´åœ¨ $ å­—ç¬¦å†…ã€‚\nescape: è½¬ä¹‰å­—ç¬¦ escape å‚æ•°å…è®¸ä½ æŒ‡å®šä¸€ä¸ªå­—ç¬¦ï¼Œç”¨äºè½¬ä¹‰åˆ†éš”ç¬¦å­—ç¬¦æœ¬èº«ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œstd::quoted ä½¿ç”¨åŒå¼•å· &quot; ä½œä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œä»¥ç¡®ä¿åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥çš„å¼•å·ä¸ä¼šè¢«è§£é‡Šä¸ºç»“æŸå¼•å·ã€‚ä½†å¦‚æœä½ é€‰æ‹©äº†è‡ªå®šä¹‰çš„åˆ†éš”ç¬¦ï¼Œä½ å¯èƒ½è¿˜éœ€è¦æŒ‡å®šä¸€ä¸ªä¸åŒäºé»˜è®¤è½¬ä¹‰å­—ç¬¦çš„å­—ç¬¦æ¥è¿›è¡Œè½¬ä¹‰ã€‚åœ¨ä½ çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œè½¬ä¹‰å­—ç¬¦ escape è¢«è®¾ç½®ä¸º %ï¼Œè¿™æ„å‘³ç€åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœä½ æƒ³è¦è¡¨ç¤ºåˆ†éš”ç¬¦ $ æœ¬èº«ï¼Œä½ éœ€è¦ä½¿ç”¨ %$ã€‚\n\nè¿™éƒ¨åˆ†ä¹Ÿä¸æ˜¯å¾ˆå®¹æ˜“ææ˜ç™½å®ƒæ˜¯å¹²å˜›çš„ï¼Œå¦‚æœé¢è¯•å®˜é—®é“äº†å°±è¯´æˆ‘ä¸ä¼šå§ğŸ˜­\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["æ•°æ®ç»“æ„","Cpp","Cpp14"]},{"title":"ã€C++ã€‘std::chrono::durationçš„å«ä¹‰å’Œç”¨æ³•","url":"/posts/2910129003/","content":"1.è¯´æ˜std::choro::durationæ˜¯C++11å¼•å…¥çš„ä¸€ä¸ªç”¨äºè®¡ç®—æ—¶é—´æ»´ç­”å‘¨æœŸçš„ç±»ï¼Œä¸ä¹‹é…åˆä½¿ç”¨çš„æ˜¯std::ratioç±»ï¼Œè¯¥ç±»æ˜¯ä¸€ä¸ªåˆ†æ•°ç±»ï¼Œä¸ºç²¾ç¡®è¡¨ç¤ºåˆ†æ•°æä¾›äº†ä¸€ä¸ªæ–¹å¼ã€‚\n2.std::ratioæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œä½¿ç”¨æµ®ç‚¹ç±»å‹æ˜¯ä¼šæœ‰ç²¾åº¦ç¼ºå¤±çš„ã€‚æ‰€ä»¥std::ratioç±»ä¾¿æä¾›äº†åˆ†å­å’Œåˆ†æ¯ï¼Œ\ntemplate&lt;    std::intmax_t Num,    std::intmax_t Denom = 1&gt; class ratio;\n\nè¯¥ç±»çš„æ¨¡æ¿å®šä¹‰å¦‚ä¸‹ï¼ŒNumæ˜¯åˆ†å­ï¼ŒDenomæ˜¯åˆ†æ¯ã€‚ä¸ä¼ å…¥åˆ†æ¯çš„æ—¶å€™ï¼Œåˆ†æ¯é»˜è®¤ä¸º1ã€‚\nå‡è®¾æˆ‘ä»¬éœ€è¦è¡¨ç¤º1ç§’çš„åƒåˆ†ä¹‹ä¸€ï¼ˆå³ä¸€æ¯«ç§’ï¼‰å°±å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªratio\ntypedef ratio&lt;1,1000&gt; milli;\n\nä»£è¡¨1/1000è¿™ä¸ªåˆ†æ•°ï¼›\ncppä¸­è‡ªå¸¦çš„å‡ ä¸ªratioä¸ºäº†æ–¹ä¾¿æ ‡è¯†å•ä½ä¹‹é—´çš„å·®è·ï¼ˆå•ä½æ¢ç®—ï¼‰ï¼Œcppä¸­é¢„å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„ratio\ntypedef ratio&lt;1,       1000000000000000000&gt; atto;typedef ratio&lt;1,          1000000000000000&gt; femto;typedef ratio&lt;1,             1000000000000&gt; pico;typedef ratio&lt;1,                1000000000&gt; nano;typedef ratio&lt;1,                   1000000&gt; micro;typedef ratio&lt;1,                      1000&gt; milli;typedef ratio&lt;1,                       100&gt; centi;typedef ratio&lt;1,                        10&gt; deci;typedef ratio&lt;                       10, 1&gt; deca;typedef ratio&lt;                      100, 1&gt; hecto;typedef ratio&lt;                     1000, 1&gt; kilo;typedef ratio&lt;                  1000000, 1&gt; mega;typedef ratio&lt;               1000000000, 1&gt; giga;typedef ratio&lt;            1000000000000, 1&gt; tera;typedef ratio&lt;         1000000000000000, 1&gt; peta;typedef ratio&lt;      1000000000000000000, 1&gt; exa;\n\næˆ‘ä»¬å¯ä»¥ç”¨ç±»ä½œç”¨åŸŸç¬¦å·::æ¥è®¿é—®åˆ°è¿™äº›æ¯”ä¾‹çš„åˆ†å­å’Œåˆ†æ¯ã€‚\nstd::cout &lt;&lt; std::centi::num &lt;&lt; &quot;/&quot; &lt;&lt; std::centi::den &lt;&lt; std::endl;// è¿è¡Œç»“æœä¸º 1/100\n3.std::chrono::durationè¿™ä¸ªç±»æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªæ—¶é—´çš„å‘¨æœŸ&#x2F;é•¿åº¦çš„ï¼Œå…¶åŸºäº1sä¸ºåŸºæœ¬å•ä½ï¼Œç”¨ratioæ¥è¡¨ç¤ºå’Œ1sç›¸æ¯”çš„åç§»é‡ã€‚\nåœ¨cppreferenceä¸Šçš„ä»‹ç»å¦‚ä¸‹\n\nClass template std::chrono::duration represents a time interval.It consists of a count of ticks of type Rep and a tick period, where the tick period is a compile-time rational constant representing the number of seconds from one tick to the next.The only data stored in a duration is a tick count of type Rep. If Rep is floating point, then the duration can represent fractions of ticks. Period is included as part of the durationâ€™s type, and is only used when converting between different durations.\n\nè¯¥ç±»çš„å®šä¹‰å¦‚ä¸‹\ntemplate&lt;    class Rep,    class Period = std::ratio&lt;1&gt;&gt; class duration;\n\nå…¶ä¸­Repæ˜¯ä¸€ä¸ªå˜é‡ç±»å‹ï¼Œå¯ä»¥ä¼ å…¥intã€floatã€doubleç­‰ç±»å‹ï¼›\nPeriodæ˜¯ä¸€ä¸ªstd::ratioï¼Œå¯ä»¥ä¼ å…¥åŸºäºä¸€ç§’çš„æ¯”ä¾‹ï¼Œè¿™ä¸ªæ¯”ä¾‹å°±ä»£è¡¨äº†æ—¶é—´çš„å•ä½;\ncppä¸­è‡ªå¸¦çš„å‡ ä¸ªchronoä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œcppä¸­è‡ªå¸¦äº†å‡ ä¸ªç”¨äºè¡¨ç¤ºæ—¶é—´çš„chronoçš„å®šä¹‰\n    /// nanoseconds    using nanoseconds\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, nano&gt;;    /// microseconds    using microseconds\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, micro&gt;;    /// milliseconds    using milliseconds\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, milli&gt;;    /// seconds    using seconds\t= duration&lt;_GLIBCXX_CHRONO_INT64_T&gt;;    /// minutes    using minutes\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt; 60&gt;&gt;;    /// hours    using hours\t\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt;3600&gt;&gt;;#if __cplusplus &gt; 201703L    /// days    using days\t\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt;86400&gt;&gt;;    /// weeks    using weeks\t\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt;604800&gt;&gt;;    /// years    using years\t\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt;31556952&gt;&gt;;    /// months    using months\t= duration&lt;_GLIBCXX_CHRONO_INT64_T, ratio&lt;2629746&gt;&gt;;#endif // C++20\n\nä»£ç é‡Œé¢å‡ºç°çš„å®å®šä¹‰å…¶å®å°±æ˜¯int64_tçš„åˆ«åã€‚\n# define _GLIBCXX_CHRONO_INT64_T int64_t\n\nè¿™äº›å˜é‡ä¹‹å‰åœ¨å­¦ä¹ C++çº¿ç¨‹ä¼‘çœ çš„æ—¶å€™å°±å·²ç»é‡åˆ°è¿‡äº†ï¼Œä»ä¸­ä¹Ÿèƒ½çœ‹åˆ°std::ratioåœ¨chronoä¸­ä»£è¡¨çš„æ¯”ä¾‹å…³ç³»ï¼Œæ¯”å¦‚ä¸€å°æ—¶æ˜¯3600ç§’ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¼ å…¥æ¯”ä¾‹std::ratio&lt;3600,1&gt;ï¼Œä¸Šé¢çš„ä»£ç é‡Œé¢çœç•¥äº†1æ˜¯å› ä¸ºratioçš„åˆ†æ¯ç¼ºçœå€¼å°±æ˜¯1ã€‚\nä»£ç ç¤ºä¾‹1#include &lt;iostream&gt;#include &lt;chrono&gt; int main()&#123;    typedef std::chrono::duration&lt;int, std::ratio&lt;1, 100000000&gt;&gt; shakes;    typedef std::chrono::duration&lt;int, std::centi&gt; jiffies;    typedef std::chrono::duration&lt;float, std::ratio&lt;12096,10000&gt;&gt; microfortnights;    typedef std::chrono::duration&lt;float, std::ratio&lt;3155,1000&gt;&gt; nanocenturies;     std::chrono::seconds sec(1);    std::cout &lt;&lt; &quot;1 second is:\\n&quot;;     std::cout &lt;&lt; std::chrono::duration_cast&lt;shakes&gt;(sec).count()              &lt;&lt; &quot; shakes\\n&quot;;    std::cout &lt;&lt; std::chrono::duration_cast&lt;jiffies&gt;(sec).count()              &lt;&lt; &quot; jiffies\\n&quot;;    std::cout &lt;&lt; std::chrono::duration_cast&lt;microfortnights&gt;(sec).count()              &lt;&lt; &quot; microfortnights\\n&quot;;    std::cout &lt;&lt; std::chrono::duration_cast&lt;nanocenturies&gt;(sec).count()              &lt;&lt; &quot; nanocenturies\\n&quot;;    return  0;&#125;\n\nä¸Šé¢çš„ä»£ç ç¤ºä¾‹è¿è¡Œç»“æœå¦‚ä¸‹\n&gt; g++ test.cpp -o test -std=c++17 &amp;&amp; ./test1 second is:100000000 shakes100 jiffies0.82672 microfortnights0.316957 nanocenturies\n\næˆ‘ä»¬èƒ½çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªé‡Œé¢ä¼ å…¥çš„æ¯”ä¾‹æ˜¯1/100000000ï¼Œè¿™å°±ä»£è¡¨1ç§’åŒ…å«äº†100000000ä¸ªshakesï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¼‘çœ 1/100000000ç§’çš„æ“ä½œï¼Œå°±å¯ä»¥é€šè¿‡std::this_thread::sleep_forå’Œè¿™ä¸ªshakeså˜é‡æ¥è¿›è¡Œç²¾ç¡®çš„å®šæ—¶ä¼‘çœ ã€‚\nä»£ç ç¤ºä¾‹2è®©å½“å‰çº¿ç¨‹ä¼‘çœ 100æ¯«ç§’ï¼Œæœ‰å‡ ç§ä¸åŒçš„æ–¹å¼ï¼Œéƒ½æ˜¯ç­‰ä»·çš„ã€‚\n#include &lt;thread&gt; #include &lt;chrono&gt; #include &lt;iostream&gt;int main() &#123;     std::this_thread::sleep_for(std::chrono::milliseconds(100));     // or     std::this_thread::sleep_for(std::chrono::duration&lt;long long, std::milli&gt;(100));     // or       // typedef ratio&lt;1, 1000&gt; milli;     std::this_thread::sleep_for(std::chrono::duration&lt;long long, std::ratio&lt;1, 1000&gt; &gt;(100)); &#125; \n4.std::chrono::duration_castä¸ºäº†æ–¹ä¾¿åœ¨ä¸åŒçš„æ—¶é—´å•ä½ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼ŒCPPæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„castæ¥è¿›è¡Œå¤„ç†\nstd::chrono::duration_cast&lt;ç›®æ ‡ç±»å‹&gt;(æºç±»å‹å¯¹è±¡);\n\næ¯”å¦‚å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç å°†3ç§’è½¬æ¢ä¸ºæ¯«ç§’ï¼Œæ³¨æ„åœ†æ‹¬å·é‡Œé¢çš„ä¼ å‚æ˜¯æºç±»å‹çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½åªä¼ å…¥ç±»å‹ï¼ˆé‚£æ ·å°±ä¸æ˜¯å˜é‡ç±»å‹è½¬æ¢äº†ï¼‰\n#include &lt;chrono&gt;#include &lt;iostream&gt;int main()&#123;    std::chrono::milliseconds ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::minutes(3));    std::cout &lt;&lt; &quot;3 minutes equals to &quot; &lt;&lt; ms.count() &lt;&lt; &quot; milliseconds\\n&quot;;   &#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹\n&gt; g++ test.cpp -o test -std=c++17 &amp;&amp; ./test3 minutes equals to 180000 milliseconds\n\n\nThe endåŸºæœ¬è¦äº†è§£çš„å†…å®¹å°±è¿™äº›äº†ã€‚\nå‚è€ƒæ–‡æ¡£\n\nC++æ–°æ ‡å‡†ä¹‹std::chrono::duration - BCN - åšå®¢å›­\nstd::chrono::duration - cppreference.com\nstd::ratio - cppreference.com\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp","Cpp11"]},{"title":"ã€C++ã€‘æ—©ç»‘å®šã€ææ„ä¸å¤šæ€ | ä¸€é“å…³äºå¤šæ€çš„é€‰æ‹©é¢˜è®°å½•","url":"/posts/2254346194/","content":"ä»Šå¤©åœ¨å’Œç¾¤å‹èŠå¤©çš„æ—¶å€™çœ‹åˆ°äº†ä¸€é“å¾ˆå‘çš„é¢˜ç›®ï¼Œåˆ†äº«ç»™å¤§å®¶\n\n\n1.çœ‹é¢˜ï¼å…ˆæ¥çœ‹çœ‹é¢˜ç›®\nstruct Dad&#123;public:    Dad()&#123; echo();&#125;    ~Dad()&#123; echo();&#125;    virtual void echo() &#123;        cout &lt;&lt; &quot;DAD &quot;;    &#125;&#125;;struct Son:Dad&#123;public:    void echo() const override &#123;        cout &lt;&lt; &quot;SON &quot;;    &#125;&#125;;Son ss;\n\nè¯·é—®è¿™ä¸ªçš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ\nA  &quot;DAD DAD &quot;B  &quot;DAD SON &quot;C  &quot;SON DAD &quot;D  &quot;SON SON &quot;E  ç¼–è¯‘å‡ºé”™F  è¿è¡Œå‡ºé”™\n\n\nç­”æ¡ˆæ˜¯Eï¼Œç¼–è¯‘å‡ºé”™ï¼\n\n2.æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹2.1 çŸ¥è¯†ç‚¹å…ˆæ¥è¯´è¯´è¿™é“é¢˜ç›®é‡Œé¢æ¶‰åŠåˆ°äº†ä»€ä¹ˆçŸ¥è¯†ç‚¹\n\nå¤šæ€è°ƒç”¨ï¼›\nå¤šæ€é‡å†™å‡½æ•°éœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼›\nç±»å†…å‡½æ•°ååŠ constçš„ä½œç”¨ï¼›\nç±»å†…å‡½æ•°ååŠ overrideçš„ä½œç”¨ï¼›\nä»€ä¹ˆæ˜¯æ—©ç»‘å®šå’Œæ™šç»‘å®š\n\nä¸€ä¸ªä¸€ä¸ªå¤ä¹ å§ï¼\n\nå¤šæ€è°ƒç”¨æ˜¯çˆ¶ç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨æŒ‡å‘å­ç±»æ—¶ï¼Œè°ƒç”¨è™šå‡½æ•°ä¼šè°ƒç”¨å­ç±»é‡å†™åçš„ç‰ˆæœ¬\nå¤šæ€é‡å†™å‡½æ•°çš„æ¡ä»¶ï¼šå‡½æ•°å&#x2F;å‚æ•°&#x2F;è¿”å›å€¼éƒ½å¿…é¡»ç›¸åŒï¼ˆæ³¨æ„è¿˜æœ‰åå˜ï¼‰\nç±»å†…å‡½æ•°ååŠ constä¿®é¥°çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„thisæŒ‡é’ˆï¼Œè¢«ä¿®é¥°çš„å‡½æ•°ä¸­æ— æ³•ä¿®æ”¹ç±»å†…æˆå‘˜å˜é‡\nç±»å†…å‡½æ•°ååŠ overrideæ˜¯è®©ç¼–è¯‘å™¨æ¥ä¸¥æ ¼æ£€æŸ¥æ˜¯å¦æ„æˆé‡è½½\næ—©ç»‘å®šï¼šé™æ€ç»‘å®šï¼›æ™šç»‘å®šï¼šåŠ¨æ€ç»‘å®šï¼ˆå…·ä½“è¯·çœ‹CPPå¤šæ€çš„åšå®¢ï¼‰\n\n2.2 åˆ†æé¢˜ç›®æ³¨æ„çœ‹çˆ¶ç±»å’Œå­ç±»ä¸­è¿™ä¸¤ä¸ªecho()å‡½æ•°çš„åŒºåˆ«\nvirtual void echo()&#123;&#125;//çˆ¶ç±»void echo() const override &#123;&#125;//å­ç±»\n\né¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå­ç±»å‡½æ•°ä¸­virtualå…³é”®å­—æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä½†å³ä¾¿çœç•¥äº†ï¼Œè¿™ä¸ªå‡½æ•°ä¾æ—§æ˜¯ä¸ªè™šå‡½æ•°ã€‚\nè¿™é‡Œå­ç±»çš„å‡½æ•°ä¸­å¤šäº†constä¿®é¥°ï¼Œè€Œè¿™ä¸ªconstä¿®é¥°çš„å°±æ˜¯å‡½æ•°ä¸­éšå«çš„thisæŒ‡é’ˆï¼Œæ­¤æ—¶å­ç±»ä¸­echo()å‡½æ•°çš„å‚æ•°å°±å‘ç”Ÿäº†å˜åŒ–ï¼\nvirtual void echo(Son* this) &#123; &#125; // ä¸åŠ constvirtual void echo(const Son* this) &#123; &#125; // åŠ const\n\næ­£æ˜¯å› ä¸ºè¿™é‡Œçš„thisæŒ‡é’ˆå‡ºç°äº†constçš„ä¿®é¥°ï¼Œæ‰€ä»¥å­ç±»çš„echoå’Œçˆ¶ç±»echoçš„å‚æ•°ç±»å‹ä¸åŒï¼Œä¸æ„æˆè™šå‡½æ•°é‡å†™ï¼å†åŠ ä¸Šoverrideå…³é”®å­—çš„ä¸¥æ ¼æ£€æŸ¥ï¼Œä¼šç›´æ¥ç¼–è¯‘æŠ¥é”™ï¼\næ­£ç¡®çš„å†™æ³•æ˜¯åˆ é™¤å­ç±»echoä¸­çš„constæˆ–è€…ç»™çˆ¶ç±»echoå‡½æ•°åŠ ä¸Šconst\n3.å†æ¥çœ‹é¢˜å¥½äº†ï¼Œå‘äººçš„ç‚¹çœ‹å®Œäº†ï¼Œå†æ¥çœ‹ä¸ªã€Œå¸¸è§„ã€çš„ï¼Œå°±æ˜¯æŠŠä¸Šé¢çš„é¢˜å¹²æ”¹æˆèƒ½ç¼–è¯‘é€šè¿‡çš„ã€‚æ­¤æ—¶åˆåº”è¯¥é€‰è°å‘¢ï¼Ÿ\nstruct Dad&#123;public:    Dad()&#123; echo();&#125;    ~Dad()&#123; echo();&#125;    virtual void echo() const&#123;        cout &lt;&lt; &quot;DAD &quot;;    &#125;&#125;;struct Son:Dad&#123;public:    void echo() const override &#123;        cout &lt;&lt; &quot;SON &quot;;    &#125;&#125;;Son ss;\n\nA  &quot;DAD DAD &quot;B  &quot;DAD SON &quot;C  &quot;SON DAD &quot;D  &quot;SON SON &quot;\n\n\nç¼–è¯‘è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç»“æœæ˜¯DAD DADï¼Œåº”è¯¥é€‰A\n3.1 åˆ†æåœ¨ç»™ Son ç±»å®šä¹‰æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ—¶ï¼Œæ²¡æœ‰æŒ‡å®šè°ƒç”¨çˆ¶ç±»çš„å¯¹åº”æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»º Son å¯¹è±¡ ss æ—¶ï¼Œä¼šé»˜è®¤è°ƒç”¨ Dad ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ã€‚\nç”±äº Dad ç±»ä¸­çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°è°ƒç”¨äº†è™šå‡½æ•° echo()ï¼Œè€Œè¿™ä¸ªè™šå‡½æ•°åœ¨å­ç±» Son ä¸­è¢«é‡å†™ï¼Œæ‰€ä»¥ä¼šæ ¹æ®å¯¹è±¡ç±»å‹è°ƒç”¨ç›¸åº”çš„é‡å†™å‡½æ•°ã€‚ç„¶è€Œï¼Œåœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ï¼Œè™šå‡½æ•°æœºåˆ¶ä¸ä¼šæŒ‰ç…§é¢„æœŸå·¥ä½œã€‚\næ„é€ å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œä¼šå¿½ç•¥åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œåœ¨ Dad çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨ echo()ï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ Dad ç±»ä¸­çš„ echo() å‡½æ•°ï¼Œè€Œä¸æ˜¯ Son ç±»ä¸­çš„é‡å†™ç‰ˆæœ¬ã€‚\nåŒæ ·åœ°ï¼Œææ„å‡½æ•°ä¸­ä¹Ÿä¼šå¿½ç•¥åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼Œç›´æ¥è°ƒç”¨çˆ¶ç±»çš„å‡½æ•°ç‰ˆæœ¬ã€‚æ‰€ä»¥ï¼Œåœ¨ Dad çš„ææ„å‡½æ•°ä¸­è°ƒç”¨ echo()ï¼Œä¾ç„¶è°ƒç”¨çš„æ˜¯ Dad ç±»ä¸­çš„ echo() å‡½æ•°ã€‚\nå› æ­¤ï¼Œå½“åˆ›å»º Son å¯¹è±¡ ss å¹¶æ‰“å°è¾“å‡ºæ—¶ï¼Œä¼šå…ˆè°ƒç”¨ Dad ç±»çš„æ„é€ å‡½æ•°å¹¶æ‰“å° &quot;DAD &quot;ï¼Œç„¶åè°ƒç”¨ Dad ç±»çš„ææ„å‡½æ•°å¹¶å†æ¬¡æ‰“å° &quot;DAD &quot;ã€‚\n3.2 ç»“è®ºåœ¨çˆ¶ç±»çš„æ„é€ å’Œææ„ä¸­ï¼Œå¯¹è±¡çš„ç‰ˆæœ¬éƒ½è¢«ç¡®å®šä¸ºçˆ¶ç±»çš„ç‰ˆæœ¬ï¼Œä¼šé‡‡ç”¨æ—©ç»‘å®šæ¥è°ƒç”¨çˆ¶ç±»è‡ªå·±çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯å­ç±»çš„é‡å†™åçš„å‡½æ•°ï¼›\nç®€å•è®°å¿†ï¼šçˆ¶ç±»çš„æ„é€ å’Œææ„ä¸­å¦‚æœå‡ºç°è™šå‡½æ•°ï¼Œåªä¼šè°ƒç”¨çˆ¶ç±»è‡ªå·±çš„å‡½æ•°ï¼\n\nè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨éœ€è¦ä¿è¯æ­£ç¡®çš„æ„é€ å’Œææ„é¡ºåºï¼Œå¦‚æœçˆ¶ç±»ææ„é‡Œè°ƒç”¨å­ç±»çš„è™šå‡½æ•°ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„åœºæ™¯\nstruct Dad&#123;public:    Dad()&#123; echo();&#125;    ~Dad()&#123; echo();&#125;    virtual void echo() const&#123;        cout &lt;&lt; &quot;DAD &quot;;    &#125;&#125;;struct Son:Dad&#123;public:    Son() &#123;        _a = new int(3);    &#125;    ~Son() &#123;        delete _a;    &#125;    void echo() const override &#123;        cout &lt;&lt; &quot;SON &quot;;        delete _a;    &#125;private:    int _a;&#125;;Son ss;\n\nå¦‚æœçˆ¶ç±»ä¸­çš„ææ„echo()è°ƒç”¨å­ç±»é‡å†™çš„å‡½æ•°ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°å­ç±»å·²ç»è¢«é”€æ¯ï¼ˆå­ç±»çš„ææ„å‡½æ•°æ—©äºçˆ¶ç±»ææ„è°ƒç”¨ï¼‰çš„_aè¢«äºŒæ¬¡deleteï¼Œä¸¤æ¬¡deleteåŒä¸€ç‰‡ç©ºé—´æ˜¯ä¼šæŠ¥é”™çš„ï¼\næ‰€ä»¥ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œçˆ¶ç±»çš„ææ„ä¸­é‡‡ç”¨æ—©ç»‘å®šï¼Œå­ç±»é‡å†™çš„è™šå‡½æ•°ä¸ä¼šç”Ÿæ•ˆï¼\nè¿™ç§è¡Œä¸ºæ˜¯ä¸ºäº†ç¡®ä¿åœ¨å¯¹è±¡çš„æ„é€ å’Œææ„è¿‡ç¨‹ä¸­ï¼ŒæŒ‰ç…§æ­£ç¡®çš„é¡ºåºè°ƒç”¨å„ä¸ªç±»çš„æ„é€ å’Œææ„å‡½æ•°ï¼Œé¿å…åœ¨å¯¹è±¡å¤„äºæœªå®Œå…¨åˆå§‹åŒ–æˆ–å·²éƒ¨åˆ†é”€æ¯çŠ¶æ€æ—¶è°ƒç”¨å­ç±»çš„å‡½æ•°ã€‚\n\nåŒ…æ‹¬çˆ¶ç±»çš„æ„é€ ä¹Ÿå¯ä»¥è¿™ä¹ˆç†è§£ï¼Œå¦‚æœçˆ¶ç±»æ„é€ é‡Œé¢å¯ä»¥è°ƒç”¨å­ç±»çš„è™šå‡½æ•°ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤æ¬¡å¯¹ä¸€ä¸ªå­ç±»å¯¹è±¡è¿›è¡Œnewç©ºé—´ï¼Œä¼šäº§ç”Ÿå†…å­˜æ³„éœ²ï¼›\nä½†æ„é€ å‡½æ•°è¿˜å’Œè™šå‡½æ•°è¡¨çš„åˆå§‹åŒ–æœ‰å…³ç³»ï¼Œæ­¤æ—¶è™šå‡½æ•°è¡¨è¿˜æ²¡æœ‰å®Œå…¨åˆå§‹åŒ–ï¼Œå­ç±»å¯¹è±¡å°šæœªæ„é€ å®Œæˆï¼Œæ²¡æœ‰å¤šæ€è°ƒç”¨çš„æ¡ä»¶ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½è°ƒç”¨åˆ°å­ç±»é‡å†™åçš„è™šå‡½æ•°ã€‚\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp"]},{"title":"ã€C++ã€‘å°†æµ®ç‚¹æ•°æ¯ä¸€ä½æ‹†åˆ†å¹¶è¾“å‡º","url":"/posts/398857040/","content":"å°†æµ®ç‚¹æ•°æ¯ä¸€ä½æ‹†åˆ†å¹¶è¾“å‡º\n\n\n1.é—®é¢˜\næ¥æº https://ask.csdn.net/questions/7901417\n\né¢˜ç›®è¦æ±‚å¦‚ä¸‹ï¼Œå°†æµ®ç‚¹æ•°æ‹†åˆ†ï¼Œä¸å…è®¸ä½¿ç”¨å°†æµ®ç‚¹æ•°æ•´æ•°å€æ‰©å¤§çš„åŠæ³•ï¼ˆé‚£æ ·å¤ªç®€å•äº†ï¼‰\n\n2.åŠæ³•2.1 åº“å‡½æ•°modfCè¯­è¨€æœ‰ä¸€ä¸ªåº“å‡½æ•°modfï¼Œå¯ä»¥å°†æµ®ç‚¹æ•°çš„æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†æ‹†åˆ†å¼€æ¥ã€\n\nhttps://www.runoob.com/cprogramming/c-function-modf.html\n\ndouble modf(double x, double *integer)\n\nå…¶ä¸­å‚æ•°xæ˜¯åŸæœ‰æµ®ç‚¹æ•°ï¼Œå‚æ•°integeræ˜¯è¾“å‡ºå‹å‚æ•°ï¼Œä¼šå­˜æ”¾xçš„æ•´æ•°éƒ¨åˆ†ã€‚\nå‡½æ•°çš„è¿”å›å€¼æ˜¯xçš„å°æ•°éƒ¨åˆ†\n2.2 ä»£ç ç¬¬ä¸€ç‰ˆæœ¬ä»£ç å¦‚ä¸‹\n#include &lt;iostream&gt;#include &lt;cmath&gt;#include &lt;string.h&gt;#include &lt;string&gt;using namespace std;int main() &#123;    double num;    cin &gt;&gt; num;    double int_part;    double frac_part = modf(num, &amp;int_part);    string int_str = to_string((int)int_part);//è·å–åˆ°æ•´æ•°éƒ¨åˆ†å¹¶æ‰“å°    for (char c : int_str) &#123;        cout &lt;&lt; c &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; &quot;. &quot;;    int i = 0;    int n = 2;//å°æ•°ç‚¹ånä½    while (i &lt; n) &#123;        frac_part *= 10;        double int_part;        frac_part = modf(frac_part, &amp;int_part);        cout &lt;&lt; (int)int_part &lt;&lt; &quot; &quot;;        i++;    &#125;    cout&lt;&lt;endl;    return 0;&#125;\nè¿™æ ·å·²ç»åšåˆ°äº†å°†æ•´æ•°å’Œå°æ•°éƒ¨åˆ†ç»™åˆ†ç¦»æ‰“å°äº†\n2.3 ç²¾åº¦ç¼ºå¤±é—®é¢˜ä½†æ˜¯ï¼Œæµ‹è¯•å¯ä»¥çœ‹åˆ°ï¼Œå°æ•°çš„æœ€åä¸€ä½å‡ºç°äº†å¯èƒ½ä¼šå­˜åœ¨çš„ç²¾åº¦ç¼ºå¤±ï¼Œæ¯”å¦‚123.22çš„å°æ•°éƒ¨åˆ†å˜æˆäº†21ï¼Œè‚¯å®šæ˜¯ä¸å¯¹çš„ã€‚\n&gt; ./test923.979 2 3 . 9 7 &gt; ./test123.221 2 3 . 2 1                             &gt; ./test923.909 2 3 . 8 9 \n\n\n3.è§£å†³æ‰€ä»¥è¿˜éœ€è¦ç”¨å¦å¤–ä¸€ä¸ªåŠæ³•æ¥å¤„ç†\n#include &lt;iostream&gt;#include &lt;cmath&gt;#include &lt;string.h&gt;#include &lt;string&gt;using namespace std;//https://ask.csdn.net/questions/7901417int main() &#123;    double num;    cin &gt;&gt; num;    double int_part;    double frac_part = modf(num, &amp;int_part);    cout &lt;&lt; &quot;int_part: &quot;&lt;&lt; int_part &lt;&lt;&quot; | frac_part: &quot; &lt;&lt;frac_part &lt;&lt; endl;    char str[10];    sprintf(str, &quot;%.3f&quot;, frac_part); //å°†å°æ•°éƒ¨åˆ†æ‰“å°åˆ°å­—ç¬¦ä¸²ä¸­    cout &lt;&lt; &quot;str:  &quot; &lt;&lt; str &lt;&lt; endl;    // æ‰“å°æ•´æ•°éƒ¨åˆ†    string int_str = to_string((int)int_part);    for (char c : int_str) &#123;        cout &lt;&lt; c &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; &quot;. &quot;;    // æ‰“å°å°æ•°éƒ¨åˆ†    int n = 2;//å°æ•°ç‚¹ånä½    for(int i=0;i&lt;n;i++)     &#123;        // å› ä¸ºæ‰“å°åˆ°å­—ç¬¦ä¸²ä¸­çš„æ•°æ®åŒ…å«äº†æœ€å¼€å§‹çš„0.        // å‰ä¸¤ä¸ªå­—ç¬¦å°±æ˜¯0. åº”è¯¥ä»ç¬¬ä¸‰ä¸ªå­—ç¬¦å¼€å§‹æ‰“å°        cout &lt;&lt; str[2+i] &lt;&lt; &quot; &quot;;    &#125;    cout &lt;&lt; endl;    return 0;&#125;\nå¯ä»¥çœ‹åˆ°ï¼Œé—®é¢˜å·²è§£å†³ï¼Œç¬¦åˆé¢˜ç›®è¦æ±‚ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp"]},{"title":"ã€C++ã€‘ç±»å’Œå¯¹è±¡1ï¼šåˆè¯†ç±»+thisæŒ‡é’ˆ","url":"/posts/2582381960/","content":"ä¸çŸ¥ä½ åœ¨å­¦ä¹ Cè¯­è¨€å’ŒC++çš„é€‚åˆï¼Œæ›¾å¦å¬è¿‡è€å¸ˆè¿™ä¹ˆè®²è¿°è¿™ä¸¤ä¸ªè¯­è¨€ä¹‹é—´çš„åŒºåˆ«ï¼š\n\nCè¯­è¨€æ˜¯é¢å‘è¿‡ç¨‹çš„\nC++æ˜¯é¢å‘å¯¹è±¡çš„\n\n\n\næˆ‘ä¸€ç›´ä¸å¤ªç†è§£è¿™äºŒè€…ä¹‹é—´çš„åŒºåˆ«ï¼Œåœ¨æŸ¥é˜…äº†ä¸€äº›åšå®¢åï¼Œå‘ç°äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£é‡ŠğŸ‘‰ã€ä¼ é€é—¨ã€‘\n\nç”¨é¢å‘è¿‡ç¨‹çš„æ–¹æ³•å†™å‡ºæ¥çš„ç¨‹åºæ˜¯ä¸€ä»½è›‹ç‚’é¥­ï¼Œè€Œç”¨é¢å‘å¯¹è±¡å†™å‡ºæ¥çš„ç¨‹åºæ˜¯ä¸€ä»½ç›–æµ‡é¥­ã€‚æ‰€è°“ç›–æµ‡é¥­ï¼ŒåŒ—äº¬å«ç›–é¥­ï¼Œä¸œåŒ—å«çƒ©é¥­ï¼Œå¹¿ä¸œå«ç¢Ÿå¤´é¥­ï¼Œå°±æ˜¯åœ¨ä¸€ç¢—ç™½ç±³é¥­ä¸Šé¢æµ‡ä¸Šä¸€ä»½ç›–èœï¼Œä½ å–œæ¬¢ä»€ä¹ˆèœï¼Œä½ å°±æµ‡ä¸Šä»€ä¹ˆèœã€‚\n\næœ¬ç¯‡åšå®¢ï¼Œå°±è®©æˆ‘ä»¬ä»ç±»å’Œå¯¹è±¡å¼€å§‹ï¼Œæ¸æ¸äº†è§£ä»€ä¹ˆæ˜¯â€œé¢å‘å¯¹è±¡ç¼–ç¨‹â€\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\n1.ç±»çš„å¼•å…¥1.1ç»“æ„ä½“åœ¨Cè¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå®šä¹‰ç±»å‹ï¼šç»“æ„ä½“ã€‚åœ¨C++ä¸­å¯¹ç»“æ„ä½“çš„è¯­æ³•è¿›è¡Œäº†æ‰©å……ï¼Œç»“æ„ä½“å†…éƒ¨ä¸ä»…èƒ½å®šä¹‰å˜é‡ï¼Œè¿˜èƒ½å®šä¹‰å‡½æ•°\nstruct Student&#123;\tvoid Print()    &#123;\t\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;\t&#125;\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\n1.2classä¸ºäº†å’ŒCè¯­è¨€é‡Œé¢çš„ç»“æ„ä½“ä½œä¸ºåŒºåˆ†ï¼Œæˆ‘ä»¬ä¸å†ç”¨structæ¥æŒ‡ä»£è¿™ç§åŒ…å«å‡½æ•°çš„è‡ªå®šä¹‰ç±»å‹ï¼Œè€Œæ˜¯ä½¿ç”¨classä½œä¸ºå®ƒçš„åå­—ï¼Œç§°ä¹‹ä¸ºç±»\nclass className&#123; //ç±»ä½“ï¼šç”±æˆå‘˜å‡½æ•°å’Œæˆå‘˜å˜é‡ç»„æˆ&#125;; //ä¸€å®šè¦æ³¨æ„åé¢çš„åˆ†å·\n\nclassä¸ºå®šä¹‰ç±»çš„å…³é”®å­—ï¼ŒClassNameä¸ºç±»çš„åå­—ï¼Œ&#123; &#125;ä¸­ä¸ºç±»çš„ä¸»ä½“ï¼Œæ³¨æ„ç±»å®šä¹‰ç»“æŸæ—¶åé¢åˆ†å·ï¼ˆè¿™ä¸€ç‚¹å’Œç»“æ„ä½“ç›¸åŒï¼‰\nç±»ä¸­çš„å…ƒç´ ç§°ä¸ºç±»çš„æˆå‘˜ï¼š\n\nç±»ä¸­çš„æ•°æ®ç§°ä¸ºç±»çš„å±æ€§æˆ–è€…æˆå‘˜å˜é‡\nç±»ä¸­çš„å‡½æ•°ç§°ä¸ºç±»çš„æ–¹æ³•æˆ–è€…æˆå‘˜å‡½æ•°\n\n2.ç±»æˆå‘˜çš„å®šä¹‰ç±»å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œç±»çš„æ‰€æœ‰æˆå‘˜éƒ½åœ¨ç±»çš„ä½œç”¨åŸŸä¸­ã€‚åœ¨ç±»ä½“å¤–å®šä¹‰æˆå‘˜ï¼Œéœ€è¦ä½¿ç”¨ ::ä½œç”¨åŸŸè§£æç¬¦æŒ‡æ˜æˆå‘˜å±äºå“ªä¸ªç±»åŸŸã€‚\n2.1å‡½æ•°å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å’Œæ™®é€šçš„å‡½æ•°ä¸€æ ·ï¼Œç±»åŒæ ·æ”¯æŒå£°æ˜å’Œå®šä¹‰åˆ†ç¦»ã€‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰åˆ†ç¦»å‡½æ•°çš„å£°æ˜å’Œå®šä¹‰\n\næˆå‘˜å‡½æ•°åœ¨ç±»é‡Œé¢å®šä¹‰ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤å¤„ç†ä¸ºå†…è”å‡½æ•°\n\nclass Student&#123;\tvoid Print()    &#123;\t\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;\t&#125;\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\nå¦‚æœéœ€è¦åœ¨.hä¸­å†™å…¥ç±»çš„å®šä¹‰ï¼Œç±»å¤–é¢çš„.cppä¸­ç¼–å†™ç±»é‡Œé¢çš„å‡½æ•°ï¼Œå°±éœ€è¦ç”¨åˆ°ç±»ä¼¼äºå‘½åç©ºé—´çš„ä½¿ç”¨æ–¹æ³•::\nclass Student&#123;\tvoid Print();//å£°æ˜å‡½æ•°\t\tchar _name[20];    char _sex[8];    int _age;    char _phone[20];&#125;;\n\nåœ¨å¦å¤–çš„æºæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°\n#include &quot;Student.h&quot;void Student::Print()&#123;\tcout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;&#125;\n\nå½“æˆ‘ä»¬ç¼–å†™å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„æ–¹å¼æ¥ç¼–å†™æºç ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿ä»–äººå¿«é€ŸæŸ¥é˜…æˆ‘ä»¬çš„å¤´æ–‡ä»¶ï¼Œç†è§£ä»£ç çš„â€œå¤§çº²â€\n\nè¿™æ ·çœ‹èµ·æ¥å¥½åƒå’Œä»¥å‰çš„æ–¹å¼æ²¡å•¥åŒºåˆ«ã€‚ä½†å½“æˆ‘ä»¬å¼•å…¥è®¿é—®æƒé™çš„æ¦‚å¿µåï¼Œä¸€åˆ‡éƒ½å˜å•¦ï¼\n2.2è®¿é—®é™å®šç¬¦classçš„é»˜è®¤è®¿é—®æƒé™æ˜¯ç§æœ‰ï¼›structé»˜è®¤ä¸ºå…¬æœ‰\n\nä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯è®¿é—®æƒé™ï¼Ÿé‚£å°±ç»§ç»­å¾€ä¸‹çœ‹ğŸ‘‡\n\næˆ‘ä»¬å¯ä»¥ç”¨publicå’Œprivateè¿™ä¸¤ä¸ªè®¿é—®é™å®šç¬¦æ¥è¡¨æ˜æŸä¸€ä¸ªå…·ä½“ç±»å‹çš„å…±æœ‰è¿˜æ˜¯ç§æœ‰ã€‚å®ƒä»¬çš„æœ€å¤§åŒºåˆ«å°±æ˜¯åœ¨è¿™ä¸ªç±»çš„å¤–éƒ¨èƒ½ä¸èƒ½è®¿é—®\n\n\npublicæˆå‘˜å¯ä»¥åœ¨ç±»å¤–é¢ç›´æ¥ä½¿ç”¨\nprotectedå’Œprivateä¿®é¥°çš„æˆå‘˜åªèƒ½åœ¨ç±»é‡Œé¢è®¿é—®\nè®¿é—®æƒé™çš„ä½œç”¨åŸŸæ˜¯ä»è¯¥è®¿é—®é™å®šç¬¦å‡ºç°ï¼Œåˆ°ä¸‹ä¸€ä¸ªè®¿é—®é™å®šç¬¦å‡ºç°ä¸ºæ­¢\nè®¿é—®é™å®šç¬¦æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¤„ç†çš„ï¼Œå¹¶ä¸å½±å“æ•°æ®åœ¨å†…å­˜ä¸Šçš„å­˜æ”¾\n\nåœ¨å‰æœŸå­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºprotectedå’Œprivateæ˜¯ç›¸åŒä½œç”¨çš„\nclass Student&#123;public:    //å‡½æ•°åœ¨ç±»é‡Œé¢å®šä¹‰ï¼Œç¼–è¯‘å™¨é»˜è®¤ä¸ºå†…è”å‡½æ•°    void Print()    &#123;        cout&lt;&lt;_name&lt;&lt;&quot; &quot;&lt;&lt;_sex&lt;&lt;&quot; &quot;&lt;&lt;_age&lt;&lt;&quot; &quot;&lt;&lt;_phone&lt;&lt;endl;    &#125;    void Init(const char * name,const char*sex, int age,const char* phone)    &#123;        strcpy(_name,name);        strcpy(_sex,sex);        _age=age;        strcpy(_phone,phone);    &#125;    //å‡½æ•°åœ¨ç±»é‡Œé¢å£°æ˜    void Delet();private:    //è¿™ä¸ªæ˜¯å¯¹å˜é‡çš„å£°æ˜    //å˜é‡çš„å£°æ˜ï¼šæ²¡æœ‰å¼€è¾Ÿç©ºé—´    //å˜é‡çš„å®šä¹‰ï¼šå¼€è¾Ÿäº†ç©ºé—´æ¥å­˜æ”¾å†…å®¹    char _name[20];    char _sex[8];    int _age;    char _phone[20];    //åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™å®šä¹‰&#125;;\n\n\næ•°æ®å’Œæ–¹æ³•åˆ†è£…åˆ°ä¸€ä¸ªç±»é‡Œé¢\næƒ³ç»™ä½ è‡ªç”¨è®¿é—®çš„ï¼ˆå¦‚å‡½æ•°æ¥å£ï¼‰è®¾ç½®ä¸ºå…±æœ‰\nä¸æƒ³ç»™ä½ è®¿é—®çš„ï¼ˆå¦‚é€šè®¯å½•æ¯ä¸ªç”¨æˆ·çš„ä¿¡æ¯ç±»å‹ï¼‰è®¾ç½®ä¸ºç§æœ‰\n\nè¿™æ ·å¯ä»¥åšåˆ°ï¼Œå½“å‡½æ•°å®šä¹‰ä¿®æ”¹ä¹‹åï¼Œåªè¦ä¸ä¿®æ”¹å‡½æ•°å£°æ˜ï¼Œå°±ä¸éœ€è¦ä¿®æ”¹mainå‡½æ•°ä¸­å‡½æ•°çš„è°ƒç”¨ï¼è¿™å«åšï¼šé«˜å†…èšï¼Œä½è€¦åˆ\n2.3å°è£…ä¸ºä»€ä¹ˆä¼šæœ‰æƒé™çš„å‡ºç°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç»†æƒ³ä¸€ä¸‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š\n\nå‡è®¾æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªæ•°ç»„æ ˆçš„ä»£ç ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªtopç”¨æ¥æ ‡æ˜æ ˆé¡¶çš„å…ƒç´ ä½ç½®ã€‚ä¸€èˆ¬å¯ä»¥æŠŠtopå®šä¹‰ä¸º0æˆ–è€…1ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹æ³•çš„å‡½æ•°ä½¿ç”¨æ˜¯ä¸åŒçš„ï¼å¦‚æœæœ‰é‚£ä¸ªé“æ†¨æ†¨è·‘è¿‡æ¥ï¼Œéè¦æŠŠé‚£ä¸ªtopçš„å®šä¹‰ç»™æ”¹æ‰ï¼Œé‚£æ•´ä¸ªä»£ç å°±åºŸæ‰ä¸èƒ½ç”¨è¾£ï¼\nè®¾ç«‹ç§æœ‰å’Œå…¬æœ‰çš„åˆè¡·ï¼Œå°±æ˜¯ä¸ºäº†é¿å…è¿™ç§æƒ…å†µã€‚å¼€æ”¾ä¸€äº›å…±æœ‰å‡½æ•°ä¾›ç±»å¤–é¢è®¿é—®ï¼Œè¿™æ ·å¯¹æ•´ä¸ªä»£ç çš„è®¿é—®ä¼šå˜å¾—æ˜“äºç®¡ç†ã€‚å½“æˆ‘ä»¬è‡ªå·±ä¿®æ”¹ç±»é‡Œé¢çš„ä»£ç æ—¶ï¼Œåªéœ€è¦åšå¥½å¤„ç†ï¼Œå°±ä¸ä¼šå½±å“ç±»å¤–é¢çš„å‡½æ•°è°ƒç”¨ï¼ˆå¦åˆ™å°±æ˜¯ç›´æ¥æ¨ç¿»é‡å†™äº†ï¼‰\n\nè¿™ä¾¿æ˜¯æˆ‘ä»¬å¸¸å¸¸æåˆ°çš„å°è£…ï¼šå°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•è¿›è¡Œæœ‰æœºç»“åˆï¼Œéšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–å…¬å¼€æ¥å£æ¥å’Œå¯¹è±¡è¿›è¡Œäº¤äº’ã€‚\n3.ç±»çš„å®ä¾‹åŒ–ç”¨ç±»ç±»å‹åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œç§°ä¸ºç±»çš„å®ä¾‹åŒ–\n\nç±»åªæ˜¯ä¸€ä¸ªæ¨¡å‹ä¸€æ ·çš„ä¸œè¥¿ï¼Œé™å®šäº†ç±»æœ‰å“ªäº›æˆå‘˜ï¼Œå®šä¹‰å‡ºä¸€ä¸ªç±»å¹¶æ²¡æœ‰åˆ†é…å®é™…çš„å†…å­˜ç©ºé—´æ¥å­˜å‚¨å®ƒ\nä¸€ä¸ªç±»å¯ä»¥å®ä¾‹åŒ–å‡ºå¤šä¸ªå¯¹è±¡ï¼Œå®ä¾‹åŒ–å‡ºçš„å¯¹è±¡ å ç”¨å®é™…çš„ç‰©ç†ç©ºé—´ï¼Œå­˜å‚¨ç±»æˆå‘˜å˜é‡\n\nç±»å°±å¥½æ¯”ä¸€ä¸ªæ¯›å¯æˆ¿ï¼Œç°åœ¨æ¯›å¯æˆ¿å»ºå¥½äº†ï¼Œè¦æƒ³å®ƒå˜å¾—ç²¾è‡´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨mainä¸­è°ƒç”¨è¿™ä¸ªç±»ï¼Œä¸ç„¶æ¯›å¯æˆ¿å°±è¦å˜æˆçƒ‚å°¾æ¥¼äº†\nStudent p1;p1.Init(&quot;ç‰›çˆ·çˆ·&quot;,&quot;ç”·&quot;,58,&quot;13251341680&quot;);p1.Print(); \n\n4.è®¡ç®—ç±»çš„å¤§å°ä¸€èˆ¬æœ‰4ç§ç±»ï¼šåŒ…å«å‡½æ•°å’Œå˜é‡çš„ã€åªåŒ…å«å‡½æ•°çš„ã€åªåŒ…å«æˆå‘˜å˜é‡çš„ã€ç©ºç±»\n\nè®©æˆ‘ä»¬æ¥åº·åº·å¦‚ä½•è®¡ç®—è¿™äº›ç±»çš„å¤§å°ï¼Œè§£æè§æ³¨é‡Šå“¦ï¼\nå…¶å®åªéœ€è¦è®°ä½ï¼Œç©ºç±»å’Œåªæœ‰å‡½æ•°çš„ç±»ä¼šæœ‰1ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚è®¡ç®—ç±»çš„ç©ºé—´çš„æ—¶å€™ä¸ä¼šè®¡ç®—å‡½æ•°å¤§å°ï¼Œæˆå‘˜å˜é‡çš„å¤§å°è®¡ç®—éµå¾ªç»“æ„ä½“å†…å­˜å¯¹é½çš„è®¡ç®—æ–¹æ³•å°±è¡Œäº†ï¼\n#include&lt;iostream&gt;using namespace std;class A1&#123;public:    void func1()    &#123;        int ret=3;        return ;    &#125;&#125;;class A2&#123;&#125;;class A3&#123;public:    char _a;&#125;;\n\n\n#includeÂ &lt;iostream&gt;usingÂ namespaceÂ std; classÂ A&#123;&#125;; intÂ main(void)&#123;Â Â Â Â coutÂ &lt;&lt;Â sizeof(A)Â &lt;&lt;Â endl;//ç©ºç±»æ˜¯1Â Â Â Â returnÂ 0;&#125;\n\n\n\n5.thisæŒ‡é’ˆ5.1ç‰¹ç‚¹å½“ä½ ç”¨åŒæ ·çš„å›¾çº¸å»ºäº†å¾ˆå¤šä¸ªå±‹å­åï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡åº”è¯¥å¦‚ä½•åŒºåˆ†å®ƒä»¬å‘¢ï¼Ÿ\nC++åœ¨è®¾è®¡è¿™éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ªthisæŒ‡é’ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nC++ç¼–è¯‘å™¨ç»™æ¯ä¸ªâ€œéé™æ€çš„æˆå‘˜å‡½æ•°â€œå¢åŠ äº†ä¸€ä¸ªéšè—çš„æŒ‡é’ˆå‚ æ•°ï¼Œè®©è¯¥æŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡(å‡½æ•°è¿è¡Œæ—¶è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡)ï¼Œåœ¨å‡½æ•°ä½“ä¸­æ‰€æœ‰æˆå‘˜å˜é‡çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡è¯¥æŒ‡é’ˆå»è®¿é—®ã€‚åªä¸è¿‡æ‰€æœ‰çš„æ“ä½œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œå³ç”¨æˆ·ä¸éœ€è¦æ¥ä¼ é€’ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆã€‚\n\n\nthisæŒ‡é’ˆçš„ç±»å‹ï¼šç±»å* const \nåªèƒ½åœ¨â€œæˆå‘˜å‡½æ•°â€çš„å†…éƒ¨ä½¿ç”¨ \nthisæŒ‡é’ˆæœ¬è´¨ä¸Šå…¶å®æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„å½¢å‚ï¼Œæ˜¯å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œå°†å¯¹è±¡åœ°å€ä½œä¸ºå®å‚ä¼ é€’ç»™this å½¢å‚ã€‚æ‰€ä»¥å¯¹è±¡ä¸­ä¸å­˜å‚¨thisæŒ‡é’ˆã€‚ \nthisæŒ‡é’ˆæ˜¯æˆå‘˜å‡½æ•°ç¬¬ä¸€ä¸ªéšå«çš„æŒ‡é’ˆå½¢å‚ï¼Œä¸€èˆ¬æƒ…å†µç”±ç¼–è¯‘å™¨é€šè¿‡ecxå¯„å­˜å™¨è‡ªåŠ¨ä¼ é€’ï¼Œä¸éœ€è¦ç”¨æˆ·ä¼ é€’\n\n5.2æ˜¾å¼ä½¿ç”¨thiså°±ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸¾ä¾‹\nvoid Print()&#123;\tcout&lt;&lt;_name&lt;&lt;endl;\tcout&lt;&lt;_sex &lt;&lt;endl;&#125;\n\nå®é™…ä¸Šï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç†\nvoid Print(Student*const this)&#123;\tcout&lt;&lt;this-&gt;_name&lt;&lt;endl;\tcout&lt;&lt;this-&gt;_sex &lt;&lt;endl;&#125;\n\nå› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å®Œæ•´çš„åŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç±»\n\nè¿›ä¸€æ­¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£thisæŒ‡é’ˆ\nbool operator==(const Date&amp; d)&#123;       return _year == d._year           &amp;&amp; _month== d._month           &amp;&amp; _day == d._day;&#125;\n\nè¿™æ˜¯ä¸€ä¸ªæ—¥æœŸçš„æ¯”è¾ƒå‡½æ•°ï¼Œæ˜¯æ“ä½œç¬¦é‡è½½ï¼ˆåé¢ä¼šè®²åˆ°ï¼‰\nä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªDateç±»å‹çš„å¼•ç”¨ï¼Œè¿™æ˜¯åŒºåˆ«äºthisçš„å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡\nå¦‚æœæ²¡æœ‰thisï¼Œé‚£å°±å¾ˆéš¾åŒºåˆ†ä¸¤ä¸ªå˜é‡çš„_yearï¼Œäºæ˜¯ç¼–è¯‘å™¨ä¼šæŠŠå®ƒä¼˜åŒ–æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¸ä¼šå­˜åœ¨æ— æ³•åŒºåˆ†çš„é—®é¢˜äº†\nbool operator==(Date*const this,const Date&amp; d)&#123;       return this-&gt;_year == d._year           &amp;&amp; this-&gt;_month== d._month           &amp;&amp; this-&gt;_day == d._day;&#125;\n\n5.3ç©ºæŒ‡é’ˆé—®é¢˜int main()&#123;    int x=10;    //åœ¨ç¨‹åºä¸­ï¼Œè®¿é—®NULLä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è§£å¼•ç”¨Nullä¼šæŠ¥é”™    int*a=NULL;    int*b=&amp;x;    //a=x;//err    *b=20;    return 0;&#125;\n\n#include&lt;iostream&gt;using namespace std;class ta&#123;public:    void Print()    &#123;        cout&lt;&lt;&quot;print ta&quot;&lt;&lt;endl;        //cout&lt;&lt;_a&lt;&lt;endl;    &#125;private:    int _a;&#125;;int main()&#123;    ta* p=nullptr;    p-&gt;Print();   //å¯ä»¥å»è®¿é—®ç©ºæŒ‡é’ˆçš„å‡½æ•°   //å› ä¸ºå‡½æ•°åªæ˜¯å»è°ƒç”¨äº†ç±»é‡Œé¢çš„Printå‡½æ•°   //åŒæ—¶ä¼ äº†ä¸€ä¸ªpçš„thisæŒ‡é’ˆï¼ˆç©ºæŒ‡é’ˆä¼ å‚æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼‰   //ä½†æ˜¯å¦‚æœä½ å»è®¿é—®pé‡Œé¢_aå˜é‡ï¼Œå°±ä¼šæŠ¥è¿è¡Œé”™è¯¯    return 0;&#125;\n\n6.ç±»ä¸­æˆå‘˜å‡½æ•°çš„å¤„ç†é™¤äº†thisæŒ‡é’ˆä¹‹å¤–ï¼Œç¼–è¯‘å™¨åœ¨é“¾æ¥å‡½æ•°åçš„æ—¶å€™ï¼Œä¹Ÿåšäº†ç›¸åº”çš„å¤„ç†ã€‚åœ¨Linuxé‡Œé¢æŸ¥çœ‹ä¸‹é¢è¿™ä¸²ä»£ç çš„æ±‡ç¼–ä»£ç \n#include&lt;iostream&gt;class Test&#123;public:    void func1(const int* a1,int* k,const int*a2,char arr)    &#123;        *a1+*a2;        func2(a1,k,a2,arr);    &#125;    private:    void func2(const int* a1,int* k,const int*a2,char arr)    &#123;        *a1+*a2;    &#125;&#125;;int main()&#123;    Test t;    int arr1[10];    int arr2[20];    int a=10;    t.func1(arr1,&amp;a,arr2,&#x27;a&#x27;);        return 0;&#125;\n\nå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªç±»çš„æˆå‘˜å‡½æ•°çš„åœ°å€å’Œå‡½æ•°å\n\næ–¹æ³•å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢ğŸ‘‰ã€æœ«å½±é—¨ã€‘\n\n00000000004006da &lt;_ZN4Test5func1EPKiPiS1_c&gt;:000000000040071a &lt;_ZN4Test5func2EPKiPiS1_c&gt;:\n\nå¯ä»¥å‘ç°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„åœ°å€ä¸åŒï¼Œä½†å‡½æ•°åä¸­å¹¶æ²¡æœ‰åŒ…å«å®ƒçš„å…¬æœ‰ã€ç§æœ‰ä¿¡æ¯ã€‚è¿™ä¹Ÿèƒ½è¯æ˜2.2ä¸­å†™é“çš„â€œè®¿é—®é™å®šç¬¦æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¤„ç†çš„ï¼Œå¹¶ä¸å½±å“æ•°æ®åœ¨å†…å­˜ä¸Šçš„å­˜æ”¾â€\n\nä¸‹é¢æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆä¸åœ¨ç±»é‡Œé¢ï¼‰çš„å‡½æ•°å\n\nè§‚å¯Ÿç±»é‡Œé¢çš„å‡½æ•°åï¼Œå¯ä»¥çœ‹åˆ°æ¯”èµ·æ™®é€šå‡½æ•°ï¼Œå®ƒè¿˜åŒ…å«äº†ç±»åï¼Œæ¥æ ‡æ˜è‡ªå·±æ˜¯è¢«å°è£…åœ¨æŸä¸ªç±»é‡Œé¢çš„ã€‚åŒæ—¶å‰ç¼€ä¹Ÿä»_Zå˜ä¸ºäº†_ZH\n\n\nè¿™é‡ŒS1_çš„å«ä¹‰æ˜¯æˆ‘å¤šæ¬¡ä¼ ç›¸åŒç±»å‹å‚æ•°ï¼ŒæŸ¥çœ‹æ±‡ç¼–ä»£ç æµ‹è¯•å‡ºæ¥çš„\n\nå½“æˆ‘æŠŠç›¸åŒä¼ å‚çš„å‡½æ•°æ”¾åœ¨ç±»å¤–é¢ï¼Œé‡æ–°æŸ¥çœ‹æ±‡ç¼–ä»£ç \n\n000000000040064d &lt;_Z5func3PKiPiS0_c&gt;:\n\nå¯ä»¥çœ‹åˆ°å®ƒå‘ç”Ÿäº†ä¸€äº›å˜åŒ–ï¼Œæ¯”å¦‚å‰ç¼€å˜ä¸ºäº†_Zï¼Œå‡½æ•°ååé¢çš„Eä¸è§äº†ï¼ŒS1_å˜æˆäº†S0_\nè™½ç„¶æˆ‘ç°åœ¨è¿˜ä¸çŸ¥é“å‰ç¼€_Zå’Œ_ZHã€å‡½æ•°ååé¢é‚£ä¸ªEåˆ†åˆ«ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹çš„å‡ºï¼Œè¿™æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é“¾æ¥è¿‡ç¨‹ä¸­ä¸ºäº†åŒºåˆ†ç±»ä¸­å‡½æ•°å’Œç±»å¤–å‡½æ•°åšçš„ä¼˜åŒ–\n\nç»“è¯­æœ¬ç¯‡åšå®¢æ˜¯ç±»å’Œå¯¹è±¡çš„ç¬¬ä¸€ç¯‡ç¬”è®°ï¼Œä¸çŸ¥èƒ½å¦å¸®åˆ°ä½ å‘¢\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘autoå…³é”®å­—ã€èŒƒå›´forã€nullptrå…³é”®å­—","url":"/posts/1752517657/","content":"æœ¬ç¯‡åšå®¢ä¸€èµ·æ¥ç»§ç»­å­¦ä¹ C++çš„è¯­æ³•\n\n\n\n\n\nautoå…³é”®å­—\nnullptrå…³é”®å­—\n\n\n\nèŒƒå›´for\nlinuxå¦‚ä½•ä½¿ç”¨C++11è§„åˆ™\n\n\n[TOC]\n0.linuxè®¾ç½®c++11åœ¨linuxå¹³å°ä¸‹æƒ³ä½¿ç”¨C++11æ ‡å‡†æœ‰ä¸¤ä¸ªåŠæ³•\næ–¹æ³•1æ˜¯åœ¨.cppæ–‡ä»¶çš„æœ€å¼€å¤´åŠ å…¥ä¸‹é¢çš„è¿™ä¸ªè¯­å¥\n#pragma GCC diagnostic error &quot;-std=c++11&quot;\n\nä½†æ˜¯è¿™ä¸ªæ–¹æ³•å“ˆï¼Œæˆ‘å‘ç°åŠ äº†å®ƒä¹‹åä½¿ç”¨nullptrè¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œä½†æ˜¯autoå’Œtypeidéƒ½å¯ä»¥ä½¿ç”¨äº†\næ–¹æ³•2æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™åœ¨åŠ ä¸Š-std=c++11\ng++ -std=c++11 test.cpp -o test \n\nä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒå®Œç¾\n1.autoå…³é”®å­—\n\nåœ¨C++11ä¸­ï¼Œautoä½œä¸ºä¸€ä¸ªæ–°çš„ç±»å‹æŒ‡ç¤ºç¬¦æ¥æŒ‡ç¤ºç¼–è¯‘å™¨ï¼Œautoå£°æ˜çš„å˜é‡å¿…é¡»ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æœŸæ¨å¯¼è€Œå¾—\n\nç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªå…³é”®å­—çš„ä½œç”¨å°±æ˜¯è‡ªåŠ¨ç»™å˜é‡è®¾ç½®ä¸€ä¸ªæ•°æ®ç±»å‹\n1.1åŸºæœ¬ä½¿ç”¨#include&lt;iostream&gt;#include&lt;typeinfo&gt;using namespace std;int TestAuto()&#123;     return 10;&#125;int main()&#123;    int a = 10;    auto b = a;    auto c = &#x27;a&#x27;;    auto d = TestAuto();    auto e = &quot;abc&quot;;    char str[20]=&quot;hello auto!&quot;;    auto f =str;        cout &lt;&lt; typeid(b).name() &lt;&lt; endl;    cout &lt;&lt; typeid(c).name() &lt;&lt; endl;    cout &lt;&lt; typeid(d).name() &lt;&lt; endl;    cout &lt;&lt; typeid(e).name() &lt;&lt; endl;//PKC    cout &lt;&lt; typeid(f).name() &lt;&lt; endl;//Pc    //VSä¸‹ä¼šæ‰“å°å®Œæ•´çš„ç±»å‹ï¼Œè¿”å›çš„æ˜¯å­—ç¬¦ä¸²    //linuxä¸‹åªä¼šæ‰“å°ç¼©å†™ï¼Œå…¶ä¸­PKcä»£è¡¨pointer(p) to Const(k) Char(c)    //è€Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰“å°çš„å°±æ˜¯Pcï¼Œpointer to Char    return 0;&#125;\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†typeid().name()æ¥æ‰“å°å˜é‡çš„ç±»å‹ï¼Œä½¿ç”¨è¿™ä¸ªå‡½æ•°éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶&lt;typeinfo&gt;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æ­£ç¡®æ‰“å°å‡ºäº†æ¯ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ï¼Œautoè‡ªåŠ¨åˆ¤æ–­å¹¶ç»™è¿™äº›å˜é‡èµ‹äºˆäº†æ•°æ®ç±»å‹\n\nVSä¸‹typeid()å‡½æ•°ä¼šæ‰“å°å®Œæ•´æ•°æ®ç±»å‹\nLinuxä¸‹åªä¼šæ‰“å°ç¼©å†™\nå…¶ä¸­PKcä»£è¡¨pointer(p) to Const(k) Char(c)ï¼Œä¹Ÿå°±æ˜¯const char*\nPKä»£è¡¨constä¿®é¥°çš„æŒ‡é’ˆï¼›Pä»£è¡¨æŒ‡é’ˆï¼Œå¦‚Pcæ˜¯char*ã€Piæ˜¯int*\n\nauto e; //æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œä½¿ç”¨autoå®šä¹‰å˜é‡æ—¶å¿…é¡»å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–\n\nä½¿ç”¨autoå…³é”®å­—çš„æ—¶å€™ï¼Œå¿…é¡»è¦åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–å˜é‡ã€‚\nå…¶å®è¿™å¾ˆå¥½ç†è§£ï¼Œæœ¬æ¥autoå°±æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ ¹æ®åˆå§‹åŒ–å†…å®¹æ¥èµ‹äºˆæ•°æ®ç±»å‹çš„å…³é”®å­—ï¼Œå¦‚æœä½ ä¸ç»™æˆ‘åˆå§‹åŒ–å†…å®¹ï¼Œæˆ‘å“ªçŸ¥é“ä½ éœ€è¦èµ‹å€¼çš„ç±»å‹æ˜¯è°å‘¢ï¼Ÿ\n\nå› æ­¤autoå¹¶éæ˜¯ä¸€ç§â€œç±»å‹â€çš„å£°æ˜ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»å‹å£°æ˜æ—¶çš„â€œå ä½ç¬¦â€ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸä¼šå°†autoæ›¿æ¢ä¸ºå˜é‡å®é™…çš„ç±»å‹ã€‚\n\n1.2ä½¿ç”¨ç»†èŠ‚â‘ å’ŒæŒ‡é’ˆ&#x2F;å¼•ç”¨åŒæ—¶ä½¿ç”¨å¦‚å›¾ï¼Œautoåœ¨å¤„ç†æŒ‡é’ˆå˜é‡çš„æ—¶å€™ï¼Œå¸¦ä¸å¸¦*æ˜¯ä¸å—å½±å“çš„\n\nPiæ˜¯pointer to intï¼Œå³intçš„æŒ‡é’ˆ\n\n\nâ‘¡åœ¨åŒä¸€è¡Œå®šä¹‰å¤šä¸ªå˜é‡å¦‚æœä½¿ç”¨autoåœ¨åŒä¸€è¡Œå®šä¹‰å¤šä¸ªå˜é‡çš„æ—¶å€™ï¼Œå‰åå®šä¹‰çš„å˜é‡å¿…é¡»æ˜¯åŒä¸€ä¸ªç±»å‹çš„\nauto a=1,b=3;//å¯ä»¥auto a=1,b=2.4;//ä¸å¯ä»¥\n\n1.3autoä¸èƒ½ç”¨çš„åœ°æ–¹â‘ autoä¸èƒ½ä½œä¸ºæ•°ç»„çš„å£°æ˜æ¯”å¦‚ä¸‹é¢çš„è¿™ç§æƒ…å†µï¼Œæ˜¯ä¸è¡Œçš„\nauto arr[]=&#123;1,2,3,4&#125;;\n\n\nâ‘¡autoä¸èƒ½ç”¨æ¥ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼void test(auto a);auto test(int a);\n\nå‡½æ•°çš„è¿”å›å€¼å’Œä¼ å‚éƒ½ä¸èƒ½æ˜¯auto\nå› ä¸ºè¿™æ ·ä¼šç»™ä½¿ç”¨è€…å¸¦æ¥æå¤§çš„è¯¯å¯¼ï¼Œæˆ‘è¿ä½ çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆç±»å‹éƒ½ä¸çŸ¥é“ï¼Œæˆ‘ç”¨å•¥æ¥æ¥æ”¶ï¼Ÿï¼Ÿå†ç”¨ä¸€æ¬¡autoå—ï¼Ÿï¼ŸğŸ˜‚\n\n\nä¸ºäº†é¿å…ä¸C++98ä¸­çš„autoå‘ç”Ÿæ··æ·†ï¼ŒC++11åªä¿ç•™äº†autoä½œä¸ºç±»å‹æŒ‡ç¤ºç¬¦çš„ç”¨æ³•\n\nå…¶å®autoæœ€å¤§çš„ä½œç”¨è¿˜æ˜¯åœ¨C++11æä¾›çš„æ–°å¼å¾ªç¯ä¸­ä½¿ç”¨ğŸ‘‡\n2.èŒƒå›´forå¾ªç¯2.1 åŸºæœ¬ç”¨æ³•åœ¨ä¹‹å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³éå†ä¸€ä¸ªæ•°ç»„ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ä¸‹é¢çš„æ–¹å¼\nè¿™æ˜¯æœ€ç»å…¸çš„forå¾ªç¯è¯­å¥ï¼Œæƒ³å¿…ä½ è‚¯å®šä¸é™Œç”Ÿ\n\nä½†è¿™æ–¹æ³•å¤ªéº»çƒ¦äº†ï¼æ¯æ¬¡éƒ½è¦å¼„ä¸€ä¸ªsizeofæ¥è®¡ç®—é•¿åº¦ï¼Œè¿™ä¸çº¯çº¯åç‰¢å—\n\näºæ˜¯å“ˆï¼ŒC++11å°±åˆ©ç”¨autoå…³é”®å­—æä¾›äº†å¦å¤–ä¸€ä¸ªéå†æ•°ç»„çš„æ–¹æ³•\nfor(auto e : arr)       cout &lt;&lt; e &lt;&lt; &quot; &quot;; \n\næ²¡é”™ï¼å°±æ˜¯è¿™ä¹ˆç®€å•çš„å‚æ•°è®¾ç½®ï¼Œå°±èƒ½è®©autoè‡ªå·±æ‰“å°å‡ºæ•°ç»„å†…çš„å€¼ï¼\nè¿™ä¹Ÿå¤ªçœäº‹äº†ğŸ‘\n\nè¿™é‡Œæ³¨æ„å“ˆï¼Œå¦‚æœåœ¨foré‡Œé¢è®¾ç½®çš„eæ²¡æœ‰å¸¦&amp;å¼•ç”¨ï¼Œå…¶å¯¹æ•°æ®å†…å®¹çš„æ›´æ”¹æ˜¯ä¸ä¼šæ”¹å˜æºæ•°ç»„çš„ã€‚ä½ å¯ä»¥ç†è§£ä¸ºè¿™é‡Œæ˜¯ä¸´æ—¶ä¼ äº†å‚æ•°ç»™äº†eï¼Œç„¶åå†æ‰“å°eçš„å€¼\n\nå¦‚æœæƒ³ä¿®æ”¹æ•°ç»„çš„å†…å®¹ï¼Œç»™eå¸¦ä¸Šå¼•ç”¨å³å¯\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åˆ¤æ–­ä»€ä¹ˆæ—¶å€™æ•°ç»„æ‰“å°å®Œæ¯•ï¼Œæ‰€ä»¥ä½ æƒ³æ‰“å°ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„\n\næˆ‘æ˜¯ç”¨çš„è¿™ä¸ªvimé…ç½®å¥½åƒæ›´åŠ æ™ºèƒ½ï¼Œå› ä¸ºä»–æŠŠæ•°ç»„ä¸­ç©ºç€çš„éƒ¨åˆ†ä¹Ÿâ€œæ‰“å°å‡ºæ¥äº†â€ã€‚å®é™…ä¸Šç¼–è¯‘å™¨å¹¶ä¸ä¼šæ‰“å°ç©ºå‡ºæ¥çš„å€¼\n\nè¿™ç‚¹å¯ä»¥åœ¨forå¾ªç¯ç»“æŸåå†æ‰“å°EOFæ¥éªŒè¯\n\nä¸æ™®é€šå¾ªç¯ç±»ä¼¼ï¼Œå¯ä»¥ç”¨continueæ¥ç»“æŸèŒƒå›´forå¾ªç¯ï¼Œä¹Ÿå¯ä»¥ç”¨breakæ¥è·³å‡ºæ•´ä¸ªå¾ªç¯ã€‚\nå¦å¤–ï¼Œç›´æ¥ä½¿ç”¨å˜é‡ç±»å‹æ¥æ“ä½œèŒƒå›´forä¹Ÿæ˜¯å¯ä»¥çš„\n\n2.2 ä½¿ç”¨æ¡ä»¶ä½¿ç”¨èŒƒå›´forçš„æ—¶å€™ï¼Œå¿…é¡»ç»™å®šä¸€ä¸ªå‡†ç¡®çš„èŒƒå›´\n\nåœ¨éå†æ•°ç»„çš„æ—¶å€™ï¼Œè¿™ä¸ªèŒƒå›´å°±æ˜¯æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾\nå¯¹äºç±»è€Œè¨€ï¼Œåº”è¯¥æä¾›beginå’Œendçš„ æ–¹æ³•ï¼Œbeginå’Œendå°±æ˜¯forå¾ªç¯è¿­ä»£çš„èŒƒå›´\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¿…é¡»ç»™å®šä¸€ä¸ªæ•°ç»„åï¼Œè€Œä¸èƒ½ç»™å®šä¸€ä¸ªæŒ‡é’ˆ\nvoid TestFor4(int*ptr)&#123;\tfor(auto e : ptr)\t\tcout&lt;&lt;e&lt;&lt;&quot; &quot;;&#125;\n\næ¯”å¦‚è¿™ç§ä½¿ç”¨æ–¹æ³•å°±æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“è¿™ä¸ªæ•°ç»„åˆ°åº•ä»€ä¹ˆæ—¶å€™ç»“æŸ\n\nå³ä¾¿æŠŠä¼ å‚æ”¹æˆæ•°ç»„çš„å½¢å¼ä¹Ÿæ˜¯ä¸è¡Œçš„\n\nè‡³äºä¸ºä»€ä¹ˆèŒƒå›´foré‡Œé¢ç”¨çš„æ˜¯å†’å·å˜›ï¼Œå¥½é—®é¢˜ï¼Œæˆ‘ä¸çŸ¥é“\n\n2.3 èŒƒå›´forä¼šæ‹·è´æ•°æ®åŒæ—¶åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘è¿˜å‘ç°åŸæ¥STLåº“å®¹å™¨é‡Œé¢çš„è¿­ä»£å™¨éå†çš„æ—¶å€™ï¼Œæ˜¯ä¼šæŠŠè‡ªå®šä¹‰ç±»å‹æ‹·è´æ„é€ ä¸€ä»½çš„\n\nå®é™…ä¸Šï¼Œautoåœ¨è¿›è¡ŒèŒƒå›´forçš„æ—¶å€™ï¼Œæ˜¯ä¼šæ‹·è´ä¸€ä»½æ•°æ®ç»™eçš„ã€‚\nç”¨å¼•ç”¨é¿å…æ‹·è´çš„ä»£ä»·æƒ³è®©ä»–ä¸è¿›è¡Œè¿™ç§æ‹·è´ï¼Œå°±éœ€è¦ç»™auto&amp;åŠ ä¸Šå¼•ç”¨æ‰å¯ä»¥\n\nä¸‹ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼\n\n3.nullptrå…³é”®å­—nullptræ˜¯C++11å¼•å…¥çš„æ–°å…³é”®å­—\n3.1NULLåœ¨Cè¯­è¨€ä¸­ï¼ŒNULLä»£è¡¨ç©ºæŒ‡é’ˆ\nint*p1=NULL;\n\nNULLå®é™…æ˜¯ä¸€ä¸ªå®ï¼Œåœ¨cè¯­è¨€å¤´æ–‡ä»¶stddef.hä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼š\n#ifndef NULL#ifdef __cplusplus#define NULL 0#else#define NULL ((void *)0)#endif#endif\n\nå¯ä»¥çœ‹åˆ°ï¼ŒNULLå¯èƒ½è¢«å®šä¹‰ä¸ºå­—é¢å¸¸é‡0ï¼Œæˆ–è€…è¢«å®šä¹‰ä¸ºæ— ç±»å‹æŒ‡é’ˆ(void*)çš„å¸¸é‡\n3.2é—®é¢˜å¼•å‡ºé‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œå¦‚æœæˆ‘åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ äº†NULLï¼Œç¼–è¯‘å™¨ç©¶ç«Ÿä¼šæŠŠå®ƒè¯†åˆ«æˆintç±»å‹ï¼Œè¿˜æ˜¯è¯†åˆ«æˆæŒ‡é’ˆç±»å‹å‘¢ï¼Ÿ\n\næ¯”å¦‚åœ¨ä¸Šé¢çš„å‡½æ•°é‡è½½ä»£ç ä¸­ï¼Œç¼–è¯‘å™¨å°±ä¸çŸ¥é“è¦è°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°äº†ï¼Œé™¤éä½ ç»™NULLæ¥ä¸€ä¸ª(int*)å¼ºåˆ¶è½¬æ¢ä¸€ä¸‹\nç¼–è¯‘æ–‡ä»¶ä¼šçœ‹åˆ°å¦‚ä¸‹æŠ¥é”™\ntest.cpp|17 col 5 error| call to &#x27;f&#x27; is ambiguous\n\nå°ç å†œè‹±è¯­è¯¾å ‚å¼€è¯¾å•¦ï¼ä»Šå¤©å­¦ä¹ çš„æ˜¯ambiguous\n\n\næ‰€ä»¥è¯´ï¼C++æ€¥éœ€å¦å¤–ä¸€ä¸ªä¸œè¥¿çš„åŠ å…¥æ¥é¿å…NULLçš„è¿™ç§æ¨¡ç³Šä¼ å‚æƒ…å†µ\n3.3ä½¿ç”¨nullptrå…¶ä»–éœ€è¦ä»‹ç»çš„å°±æ— å•¦ï¼Œä½ åªè¦çŸ¥é“ï¼Œnullpträ¸å†æ˜¯ä¸€ä¸ªä»£è¡¨0çš„å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªä¸“é—¨çš„å…³é”®å­—ï¼Œä»£æŒ‡ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œå°±OKå•¦ï¼\n\n\næœ€åæ˜¯å‡ ç‚¹æ³¨æ„ï¼š\n\nåœ¨ä½¿ç”¨nullptrè¡¨ç¤ºæŒ‡é’ˆç©ºå€¼æ—¶ï¼Œä¸éœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯C++11çš„å…³é”®å­— \nåœ¨C++11ä¸­ï¼Œsizeof(nullptr)=sizeof((void*)0)\nä¸ºäº†æé«˜ä»£ç çš„ç¨³å®šæ€§ï¼Œåç»­å†™C++ä»£ç çš„æ—¶å€™ä¸€å¾‹ç”¨nullptrï¼Œä¸å†ä½¿ç”¨NULL\n\n\nç»“è¯­å¥½å•¦ï¼Œæœ¬ç¯‡C++çš„ç¬”è®°åˆ°è¿™é‡Œå°±ç»“æŸå–½\næœ‰ä»€ä¹ˆé—®é¢˜å¤§å®¶å¯ä»¥åœ¨è¯„è®ºæå‡ºå“ˆ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp"]},{"title":"ã€Dockerã€‘deepin/ubuntu/centoså®‰è£…docker","url":"/posts/2069190154/","content":"deepinè™šæ‹Ÿæœºå’ŒcentosæœåŠ¡å™¨å®‰è£…docker \n\n\n1.æ›´æ–°è½¯ä»¶åŒ…# deepin sudo apt-get -y update &amp;&amp; sudo apt-get -y upgrade# centossudo yum -y update &amp;&amp; yum -y upgrade\n\nå®‰è£…dockerä¹‹å‰ï¼Œå…ˆæ›´æ–°ä¸€ä¸‹è½¯ä»¶åŒ…ã€‚åœ¨deepinä¸­æ‰§è¡Œæ›´æ–°å‘½ä»¤çš„æ•ˆæœå¦‚ä¸‹ã€‚\nmothra@mothra-PC:~$ sudo apt-get update &amp;&amp; sudo apt-get upgradeè¯·è¾“å…¥å¯†ç :éªŒè¯æˆåŠŸå‘½ä¸­:1 https://community-packages.deepin.com/deepin apricot InReleaseå‘½ä¸­:2 https://community-packages.deepin.com/driver driver InReleaseå‘½ä¸­:3 https://pro-driver-packages.uniontech.com eagle InReleaseå‘½ä¸­:4 https://community-packages.deepin.com/printer eagle InReleaseå‘½ä¸­:5 https://home-store-img.uniontech.com/230506175326447/appstore deepin InReleaseæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆæ­£åœ¨è®¡ç®—æ›´æ–°... å®Œæˆå‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚\n\n2.å®‰è£…dockerå¦‚ä¸‹ç»™å‡ºçš„å®‰è£…å‘½ä»¤åœ¨ deepin v20.9 å’Œ centos8 ä¸Šæµ‹è¯•é€šè¿‡\n# deepinsudo apt-get install -y docker-ce docker-compose# centossudo yum install -y https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpmsudo yum install -y yum-utils device-mapper-persistent-data lvm2sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.reposudo yum install docker-ce docker-ce-cli containerd.io\n\nå¯åŠ¨dockeræœåŠ¡\nsystemctl start docker\n\nå®‰è£…ä¹‹åï¼Œç”¨å¦‚ä¸‹å‘½ä»¤çœ‹çœ‹ç‰ˆæœ¬ï¼Œçœ‹çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼›å‡ºç°ç‰ˆæœ¬å·å°±æ˜¯å®‰è£…å®Œæ¯•äº†ã€‚\n$ docker -vDocker version 19.03.8, build 1b4342cd4c\n\nå¦‚ä¸‹å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œdockerå‘½ä»¤èƒ½æ˜¾ç¤ºå‡ºç‰ˆæœ¬å·ï¼Œdocker-composeå‘½ä»¤ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚\n\nå¼€æœºè‡ªå¯åŠ¨dockeræœåŠ¡\nsystemctl enable docker  # å¼€æœºè‡ªå¯systemctl disable docker # å…³é—­å¼€æœºè‡ªå¯\n\n\n2.1 åœ¨Ubuntu22.04LTSä¸Šå®‰è£…dockerä¸Šé¢ç»™å‡ºçš„aptå®‰è£…å‘½ä»¤å®æµ‹åœ¨ deepin V20.9 ä¸‹å¯ç”¨ï¼Œä½†æ˜¯åœ¨Ubuntuä¸‹ä¸å¯ç”¨ã€‚\n\nå‚è€ƒè¯¥åšå®¢åœ¨ubuntuä¸­å®‰è£…ï¼šå®¹å™¨ä¸äº‘|å¦‚ä½•åœ¨ Ubuntu 22.04 LTS ä¸­å®‰è£… Docker å’Œ Docker Compose\n\n# å¼€å§‹å‰å…ˆæ›´æ–°è½¯ä»¶æºsudo apt -y update &amp;&amp; sudo apt -y upgradesudo apt full-upgrade# 1.å®‰è£…å¿…è¦çš„è¯ä¹¦å¹¶å…è®¸ apt åŒ…ç®¡ç†å™¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡ HTTPS ä½¿ç”¨å­˜å‚¨åº“sudo apt -y install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release# 2.è¿è¡Œä¸‹åˆ—å‘½ä»¤æ·»åŠ  Docker çš„å®˜æ–¹ GPG å¯†é’¥ï¼šcurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg# 3.æ·»åŠ å®˜æ–¹dockeråº“çš„è½¯ä»¶æºecho &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null# 4.å†æ¬¡æ›´æ–°è½¯ä»¶æºä»“åº“sudo apt -y update# 5.å®‰è£…dockersudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\n\nä¸Šè¿°å‘½ä»¤åœ¨WSL2çš„Ubuntu 22.04.03 ç³»ç»Ÿä¸­æµ‹è¯•é€šè¿‡ï¼ŒæˆåŠŸå®‰è£…dockerã€‚\nâ¯ docker -vDocker version 25.0.2, build 29cf629\n\nubuntuä¸Šdocker-composeçš„å®‰è£…å‚è€ƒæœ¬æ–‡2.3.2ä¸­çš„å‘½ä»¤ï¼Œå®æµ‹å¯ç”¨ã€‚\nâ¯ docker-compose -vDocker Compose version v2.23.0\n\n2.2 centos8å®‰è£…æŠ¥é”™æ‰¾ä¸åˆ°dockerè½¯ä»¶åŒ…\nå‚è€ƒ https://www.cnblogs.com/yizhangheka/p/16614941.html\n\nåœ¨centos8ä¸Šå®‰è£…dockerçš„æ—¶å€™ï¼Œå‘ç°æ‰¾ä¸åˆ°dockerçš„ç›¸å…³ä¿¡æ¯\n# sudo yum install docker-ce docker-ce-cli containerd.ioLast metadata expiration check: 0:12:10 ago on Wed 10 May 2023 10:37:43 PM CST.No match for argument: docker-ceNo match for argument: docker-ce-cliNo match for argument: containerd.ioError: Unable to find a match: docker-ce docker-ce-cli containerd.io\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰dockerçš„è½¯ä»¶æºã€‚ä¾ç…§å¦‚ä¸Šåšå®¢ä¸­çš„æ•™ç¨‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼ˆä¸Šæ–¹çš„å®‰è£…å‘½ä»¤ä¸­å·²åŒ…å«è¿™äº›å‘½ä»¤ï¼Œæ­¤å¤„å†™å‡ºæ¥æ˜¯å‘ŠçŸ¥æ·»åŠ è¿™äº›å‘½ä»¤çš„åŸå› ï¼‰\n# ä¸‹è½½è½¯ä»¶æºyum install https://download.docker.com/linux/fedora/30/x86_64/stable/Packages/containerd.io-1.2.6-3.3.fc30.x86_64.rpm# å®‰è£…ä¾èµ–åŒ…yum install -y yum-utils device-mapper-persistent-data lvm2# æ›´æ–°dockeræºyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo# å®‰è£…dockersudo yum install docker-ce docker-ce-cli containerd.io\n\nè¿™æ ·å°±èƒ½å®‰è£…æˆåŠŸäº†ï¼Œæ‰§è¡Œdocker versionå‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹å°±æ˜¯æˆåŠŸå®‰è£…dockeräº†ã€‚\n&gt; docker versionClient: Docker Engine - Community Version:           24.0.6 API version:       1.43 Go version:        go1.20.7 Git commit:        ed223bc Built:             Mon Sep  4 12:33:07 2023 OS/Arch:           linux/amd64 Context:           default\n\n2.3 å®‰è£…docker-compose2.3.1 ä½¿ç”¨pythonå®‰è£…ï¼ˆå¯èƒ½å¤±è´¥ï¼‰éœ€è¦ä¿è¯ç³»ç»Ÿå†…çš„pythonç¯å¢ƒå®Œå¥½\npip3 install -i https://mirrors.aliyun.com/pypi/simple docker-compose\n\nå®‰è£…å¥½äº†ä¹‹åæŸ¥çœ‹ç‰ˆæœ¬ï¼Œå¦‚ä¸‹ä¾¿æ˜¯å®‰è£…æˆåŠŸäº†\n$ docker-compose versiondocker-compose version 1.29.2, build unknowndocker-py version: &lt;module &#x27;docker.version&#x27; from &#x27;/usr/local/lib/python3.10/site-packages/docker/version.py&#x27;&gt;CPython version: 3.10.5OpenSSL version: OpenSSL 1.1.1q  5 Jul 2022\n\nå‚è€ƒ https://www.cnblogs.com/yizhangheka/p/16614941.html\nä½†åœ¨æˆ‘çš„CentOS8ä¸Šï¼Œä¸Šé¢çš„pythonå®‰è£…æ–¹å¼ä¼šå¤±æ•ˆï¼›æˆ‘ä½¿ç”¨çš„æ˜¯python3.10.6ï¼Œå®‰è£…ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼Œæ— æ³•æˆåŠŸå®‰è£…ï¼›\n  File &quot;&lt;string&gt;&quot;, line 201, in get_source_files  File &quot;/tmp/pip-build-env-v8dnn0u_/overlay/lib/python3.10/site-packages/setuptools/_distutils/cmd.py&quot;, line 107, in __getattr__    raise AttributeError(attr)AttributeError: cython_sources[end of output]\n\n2.3.2 ä»Githubå®‰è£…å¯æ‰§è¡Œæ–‡ä»¶\nå‚è€ƒåšå®¢ \n\nhttps://computingforgeeks.com/install-docker-and-docker-compose-on-rhel-8-centos-8/\nhttps://serverspace.io/support/help/how-to-install-docker-on-centos-8/\n\n\nç„¶ååˆæ‰¾äº†äº›åšå®¢ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œç›´æ¥ä¸‹è½½docker-composeçš„å¯æ‰§è¡Œæ–‡ä»¶å®‰è£…ã€‚\nsudo curl -L &quot;https://github.com/docker/compose/releases/download/v1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose# ä¿®æ”¹æƒé™sudo chmod +x /usr/local/bin/docker-compose\n\nå®‰è£…å®Œæ¯•åçš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œä¹Ÿæ˜¯OKçš„\n# docker-compose -v docker-compose version 1.29.2, build 5becea4c\n\nä½†æ˜¯è¿™ä¸ªå®‰è£…çš„ç‰ˆæœ¬å®åœ¨æ˜¯å¤ªè€äº†ï¼Œæœ€æ–°ç‰ˆæœ¬éƒ½å·²ç»åˆ°2.23.0äº†ã€‚åˆåœ¨æƒ³åŠæ³•æ‰¾æœ€æ–°ç‰ˆæœ¬çš„å®‰è£…æ•™ç¨‹ï¼›æˆ‘å°è¯•ä¿®æ”¹ä¸Šè¿°curlå‘½ä»¤ä¸­çš„ç‰ˆæœ¬å·ï¼Œä½†å¥½åƒæ²¡æœ‰ç”¨ã€‚\n\n\nå…¶å®è¿™é‡Œçš„é—®é¢˜åœ¨äºé“¾æ¥ä¸­ç‰ˆæœ¬å·ä¹‹å‰å°‘äº†ä¸€ä¸ªvï¼ŒåŠ ä¸Šå»ä¹‹åå°±å¯ä»¥äº†ã€‚ä¸‹é¢æ˜¯æˆ‘å½“æ—¶æ‰¾åˆ°æ­£ç¡®ä¸‹è½½é“¾æ¥çš„è¿‡ç¨‹ï¼Œæ€è·¯å¯ä¾›å‚è€ƒã€‚\n\nè¿˜æ˜¯å¾—ç”¨è€åŠæ³•ï¼Œå…ˆæ‰“å¼€githubçš„releaseé¡µé¢ï¼Œæ‰¾æ‰¾å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸‹è½½åœ°å€ï¼šgithub.com&#x2F;docker&#x2F;compose&#x2F;releases\nè¿™æ—¶å€™æˆ‘å‘ç°ä¸Šè¿°çš„curlå®‰è£…å‘½ä»¤å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸‹è½½ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨CentOS8ä¸Šï¼Œuname -sæ˜¯linuxï¼Œuname -mæ˜¯x86_64ï¼Œå‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼›\n&gt; uname -sLinux&gt; uname -mx86_64\n\næ‰€ä»¥å…¶å®æˆ‘ä»¬éœ€è¦ä¸‹è½½çš„æ˜¯docker-compose-linux-x86_64è¿™ä¸ªæ–‡ä»¶ï¼Œå¯¹åº”ä¸‹å›¾ä¸­çº¢è‰²ç®­å¤´æ‰€æŒ‡çš„ä½ç½®\n\nå³é”®è¯¥æ–‡ä»¶ï¼Œå³å¯å¤åˆ¶æ–‡ä»¶ä¸‹è½½åœ°å€\nhttps://github.com/docker/compose/releases/download/v2.23.0/docker-compose-linux-x86_64\n\næ‰¾åˆ°æœ€æ–°ç‰ˆæœ¬çš„æ–‡ä»¶urläº†ï¼Œå°†å…¶ç”¨ç›¸åŒçš„æ–¹å¼ä¸‹è½½ä¸‹æ¥ä¸å°±è¡Œäº†ï¼Ÿ\nsudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.23.0/docker-compose-linux-x86_64&quot; -o /usr/local/bin/docker-compose# ä¿®æ”¹æƒé™chmod +x /usr/local/bin/docker-compose\n\nå¦‚æœgithubä¸‹è½½å®åœ¨æ˜¯å¤ªæ…¢ï¼Œå¯ä»¥å°è¯•ç”¨githubçš„ä»£ç†åœ°å€ä¸‹è½½ï¼›æˆªè‡³20231028ï¼Œè¯¥ä»£ç†åœ°å€çš„ä¸‹è½½é€Ÿåº¦å¾ˆå¿«ï¼Œå®Œå…¨å¯ç”¨ã€‚\nsudo curl -L &quot;https://ghproxy.com/https://github.com/docker/compose/releases/download/v2.23.0/docker-compose-linux-x86_64&quot; -o /usr/local/bin/docker-compose\n\nå®‰è£…å®Œæˆï¼Œå½“å‰v2.23.0æœ€æ–°ç‰ˆæœ¬æå®šï¼\n&gt; docker-compose --versionDocker Compose version v2.23.0\n\nå®æµ‹è¯¥æ–¹å¼åœ¨Ubuntu22.04è™šæ‹Ÿæœºä¸Šä¹Ÿå¯ç”¨ã€‚\n3.ä¿®æ”¹dockeré•œåƒæºå›½å†…ä¸‹è½½dockerçš„imagesæœ‰æ—¶å€™å¾ˆæ…¢ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬ä¿®æ”¹é•œåƒæºã€‚å¯ä»¥æ‰“å¼€ä¸‹é¢è¿™ä¸ªç½‘ç«™\nhttps://www.daocloud.io/mirror#accelerator-doc\n\n\né¢ï¼Œå†™åšå®¢è¿™å¤©çš„æ—¶å€™ï¼Œä»–ä»¬çš„æœåŠ¡502äº†ã€‚æ‰“ä¸å¼€ç½‘ç«™ã€‚\n\nç”¨å¦‚ä¸‹åŠæ³•ä¿®æ”¹é•œåƒæº\nsudo vim /etc/docker/daemon.json\n\nè¿›å…¥è¯¥æ–‡ä»¶åï¼ŒæŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå¤åˆ¶å¦‚ä¸‹å†…å®¹ï¼Œç”¨shift+insç²˜è´´åˆ°æ–‡ä»¶å†…\n&#123; &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]&#125;\n\nç„¶å:wqé€€å‡ºï¼Œç”¨å¦‚ä¸‹å‘½ä»¤é‡å¯dockeræœåŠ¡ï¼Œé•œåƒå°±è®¾ç½®å¥½äº†\nsudo systemctl restart docker\n\nå›½å†…å¯ç”¨çš„dockeré•œåƒæœ‰ä¸‹é¢è¿™äº›ï¼Œæ›´å¤šé•œåƒå¯ä»¥ç™¾åº¦çœ‹çœ‹ã€‚å—äº¬å¤§å­¦å’Œä¸Šæµ·äº¤å¤§çš„é•œåƒæºç”¨çš„äººå°‘ï¼Œæ›´å¥½ç”¨ã€‚ä¹‹å‰æœ‰ä¸€æ®µæ—¶é—´dockerå›½å†…çš„é•œåƒéƒ½æŒ‚äº†ï¼ŒåŸºæœ¬æ²¡åŠæ³•pullï¼Œç°åœ¨åº”è¯¥æ˜¯è§£å†³äº†ã€‚\nç§‘å¤§é•œåƒï¼šhttps://docker.mirrors.ustc.edu.cn/ä¸ƒç‰›äº‘ï¼šhttps://reg-mirror.qiniu.comç½‘æ˜“ï¼šhttps://hub-mirror.c.163.com/å—äº¬å¤§å­¦: http://docker.nju.edu.cn ä¸Šæµ·äº¤å¤§: docker.mirrors.sjtug.sjtu.edu.cnæ‰“å¼€ä¸‹é¢çš„åœ°å€ç™»å½•ä½ çš„é˜¿é‡Œäº‘è´¦å·è·å–ä½ çš„ä¸“å±é•œåƒæº https://cr.console.aliyun.com/#/acceleratoré˜¿é‡Œäº‘ï¼šhttps://&lt;ä½ çš„ID&gt;.mirror.aliyuncs.com\n\n4.ä¸€äº›dockerå¸¸ç”¨å‘½ä»¤å› ä¸ºå½“å‰æˆ‘ä»¬ç”¨çš„æ˜¯deepinçš„ç”¨æˆ·ï¼Œè€Œä¸æ˜¯rootï¼Œæ‰€ä»¥æ‰§è¡Œdockerç›¸å…³å‘½ä»¤çš„æ—¶å€™éƒ½éœ€è¦å¸¦ä¸Šsudo\nsudo docker ps # æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨sudo docker ps -a # æŸ¥çœ‹å½“å‰æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬æœªè¿è¡Œçš„ï¼‰sudo docker stats # æŸ¥çœ‹dockerè¿è¡ŒçŠ¶æ€ï¼ˆèµ„æºå ç”¨ï¼‰sudo docker stats å®¹å™¨åå­— # æŸä¸€ä¸ªå®¹å™¨çš„è¿è¡ŒçŠ¶æ€sudo docker rm å®¹å™¨åå­—  # åˆ é™¤å®¹å™¨sudo docker rmi é•œåƒhash # åˆ é™¤é•œåƒ\n\ndocker-composeçš„æ“ä½œéœ€è¦æ ¹æ®docker-compose.ymlè¿›è¡Œï¼Œå…·ä½“çš„è¯·å‚è€ƒä¸åŒå®¹å™¨çš„ymlæ–‡ä»¶ç¼–å†™å’Œä½¿ç”¨ã€‚ä¸€èˆ¬ç”¨æˆ·é‡å¤§çš„å¼€æºdockeréƒ½ä¼šæœ‰docker-compose.ymlçš„ç¤ºä¾‹æ–‡ä»¶çš„ï¼\ndocker-compose å‡çº§å®¹å™¨é•œåƒå¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªéƒ¨ç½²memosæœåŠ¡çš„ç®€å•docker-compose.ymlæ–‡ä»¶ï¼Œä½¿ç”¨çš„é•œåƒç‰ˆæœ¬æ˜¯latestï¼›\nversion: &quot;3.0&quot;services:  memos:      image: neosmemo/memos:latest      container_name: memos      restart: unless-stopped      volumes:        - ./memos/:/var/opt/memos      ports:        - 14730:5230\n\nå‡è®¾ä½ éœ€è¦å‡çº§è¿™ä¸ªdockerçš„å®¹å™¨é•œåƒç‰ˆæœ¬ï¼Œåº”è¯¥é‡‡ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ“ä½œ\nsudo docker-compose stop # åœæ­¢å½“å‰å®¹å™¨è¿è¡Œsudo docker-compose pull # æ‹‰å–æœ€æ–°çš„latesté•œåƒsudo docker-compose up -d # é‡å¯å®¹å™¨ï¼Œæ­¤æ—¶å°±ä¼šä»¥æœ€æ–°é•œåƒè¿è¡Œã€‚\n\nå¦å¤–ä¸€ä¸ªåŠæ³•å°±æ˜¯å°†ymlæ–‡ä»¶ä¸­çš„latestæ”¹æˆæœ€æ–°dockeré•œåƒç‰ˆæœ¬çš„ç‰ˆæœ¬ç¼–å·ï¼Œå†æ‰§è¡Œdocker-compose up -dæ¥è¿è¡Œï¼Œæ­¤æ—¶ä¹Ÿä¼šè‡ªåŠ¨pullæŒ‡å®šç‰ˆæœ¬çš„é•œåƒå¹¶å¯åŠ¨dockerå®¹å™¨ã€‚\næ³¨æ„ï¼šå‡çº§å®¹å™¨é•œåƒä¹‹å‰ï¼Œè¯·å¤‡ä»½å½“å‰å®¹å™¨çš„é…ç½®ã€èµ„æºæ–‡ä»¶å¤¹ï¼Œé¿å…å‡çº§å¤±è´¥æ—¶æŸäº›æ–‡ä»¶è¢«æ–°é•œåƒä¿®æ”¹è€Œæ— æ³•å›é€€æ—§ç‰ˆæœ¬ï¼å¤‡ä»½äº†å®¹å™¨çš„é…ç½®æ–‡ä»¶å¤¹ï¼Œè‡³å°‘å‡çº§å¤±è´¥è¿˜èƒ½ä¿è¯æ—§ç‰ˆæœ¬å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚\nå¦å¤–ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯latestæ¥æ‹‰å–é•œåƒï¼Œé‚£ä¹ˆåœ¨å‡çº§ç‰ˆæœ¬ä¹‹å‰è¯·è®°å½•ä¸‹å‡çº§ä¹‹å‰ä½¿ç”¨çš„å®¹å™¨ç‰ˆæœ¬å·ï¼ˆélatestçš„æ•°å­—ç‰ˆæœ¬å·ï¼Œä¸€èˆ¬åœ¨å®¹å™¨å†…çš„æœåŠ¡&#x2F;å‰ç«¯é¡µé¢ä¸­éƒ½èƒ½çœ‹åˆ°å½“å‰çš„ç‰ˆæœ¬å·ï¼‰ï¼Œæ–¹ä¾¿åç»­å›é€€åˆ°èƒ½æ­£å¸¸ä½¿ç”¨çš„æ—§ç‰ˆæœ¬ã€‚\nThe endå…¶ä»–çš„dockeræ“ä½œï¼Œè¯·æ ¹æ®ç‰¹å®šå®¹å™¨è¿›è¡Œæ“ä½œï¼Œè¯¦æƒ…ç™¾åº¦å§ï¼\næœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Linux","deepin","Docker"]},{"title":"ã€C++ã€‘ç±»å’Œå¯¹è±¡2ï¼šé»˜è®¤æˆå‘˜å‡½æ•°+æ“ä½œç¬¦é‡è½½","url":"/posts/2894176175/","content":"æœ¬ç¯‡æ˜¯ç±»å’Œå¯¹è±¡çš„ç¬¬äºŒç«™ğŸšŒ\nä¸»è¦è®²è¿°ç±»çš„å‡ ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°ï¼Œä»¥åŠæ“ä½œç¬¦é‡è½½\næœ¬ç¯‡åšå®¢ä¼šæ¶‰åŠåˆ°å¾ˆå¤šä¹‹å‰C++ä¸“æ é‡Œé¢æåˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå»ºè®®è¿èµ·æ¥è§‚çœ‹ã€‚\n\n\n\næ„Ÿè°¢ä½ å…³æ³¨æ…•é›ªï¼Œæ¬¢è¿æ¥æˆ‘çš„å¯’èˆååâ„æ…•é›ªçš„å¯’èˆ\n\n\n[TOC]\né»˜è®¤æˆå‘˜å‡½æ•°å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå³ä¾¿ç±»é‡Œé¢å•¥éƒ½ä¸æ”¾ï¼Œéƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸‹é¢6ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°\n\nå®ƒä»¬éƒ½æœ‰å•¥åŠŸèƒ½å‘¢ï¼Ÿä¸”å¬æˆ‘ä¸€ä¸€é“æ¥\n1.æ„é€ å‡½æ•°ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œå½“æˆ‘ä»¬å†™Cè¯­è¨€çš„é¡ºåºè¡¨ã€é“¾è¡¨ç­‰ä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šå†™ä¸€ä¸ªInitå‡½æ•°æ¥åˆå§‹åŒ–å†…å®¹ã€‚\nvoid Init()&#123;\ta=(int*)malloc(sizeof(int)*4);\tsize=0;\tcapa=4;&#125;\n\nä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸å¤Ÿæ™ºèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚\näºæ˜¯C++å°±æ•´å‡ºæ¥äº†ä¸€ä¸ªæ„é€ å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n1.1ç‰¹æ€§æ„é€ å‡½æ•°ï¼šåå­—å’Œç±»åç›¸åŒï¼Œåˆ›å»ºç±»å¯¹è±¡çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œåˆå§‹åŒ–ç±»ä¸­æˆå‘˜å˜é‡ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚æ„é€ å‡½æ•°åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­åªè°ƒç”¨ä¸€æ¬¡\næ„é€ å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹æ€§ï¼š\n\nå‡½æ•°åå’Œç±»åç›¸åŒ\næ— è¿”å›å€¼\næ„é€ å‡½æ•°å¯ä»¥é‡è½½\nå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„æ„é€ å‡½æ•°\nå¦‚æœä½ è‡ªå·±ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°\n\n1.2åŸºæœ¬ä½¿ç”¨ä¸‹é¢ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¼”ç¤ºä¸€ä¸‹æ„é€ å‡½æ•°\nclass Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºå¯¹è±¡q1çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨è°ƒç”¨äº†ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åˆå§‹åŒ–äº†è¿™ä¸ªé˜Ÿåˆ—\n\n\né™¤äº†ä¸Šé¢è¿™ç§æœ€åŸºæœ¬çš„æ— å‚æ„é€ å‡½æ•°ä»¥å¤–ï¼Œä¸€èˆ¬å†™æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šå¸¦ä¸€ä¸ªæœ‰ç¼ºçœå€¼çš„å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°çµæ´»ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—\nQueue(int Capacity=4)&#123;    _a=(int*)malloc(sizeof(int)*Capacity);    _size=0;    _capa=Capacity;&#125;\n\nè°ƒç”¨è¿™ç§æ„é€ å‡½æ•°ä¹Ÿæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°æ®ç±»å‹çš„é•¿åº¦ï¼Œæ¥åˆ›å»ºä¸åŒå®¹é‡çš„é˜Ÿåˆ—ï¼Œé¿å…å¤šæ¬¡reallocé€ æˆçš„å†…å­˜ç¢ç‰‡\nQueue q1;//è°ƒç”¨æ— å‚çš„æ„é€ å‡½æ•°Queue q2(100);//è°ƒç”¨å¸¦å‚çš„æ„é€ å‡½æ•°\n\nå¤šç§æ„é€ å‡½æ•°æ˜¯å¯ä»¥åŒæ—¶å­˜åœ¨çš„ï¼Œä¸è¿‡ï¼å®ƒä»¬éœ€è¦æ»¡è¶³å‡½æ•°é‡è½½çš„åŸºæœ¬è¦æ±‚\nå½“ä½ è°ƒç”¨ä¸€ä¸ªæ— å‚çš„å‡½æ•°ï¼Œå’Œä¸€ä¸ªå…¨ç¼ºçœçš„å‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ‡µé€¼ï¼\nQueue();Queue(int Capacity=4);//è¿™ä¸¤ä¸ªå‡½æ•°ä¸æ„æˆé‡è½½ï¼Œä¼šæŠ¥é”™\n\næ­£ç¡®çš„é‡è½½åº”è¯¥æ˜¯ä¸‹é¢çš„æƒ…å†µ\nQueue();Queue(int Capacity);\n\nç¼–è¯‘å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¼šæ™ºèƒ½é€‰æ‹©è¿™ä¸¤ä¸ªæ„é€ å‡½æ•°å…¶ä¸­ä¹‹ä¸€è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯åŒä¸€ä¸ªå¯¹è±¡åªä¼šè°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°\n1.3ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ä¸Šé¢æåˆ°è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€‚\nä½†æµ‹è¯•è¿‡ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªé»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œå¥½åƒå•¥äº‹éƒ½æ²¡æœ‰å¹²â€”â€”æˆ–è€…è¯´ï¼Œå®ƒæŠŠ_a _b _c éƒ½åˆå§‹åŒ–æˆäº†éšæœºå€¼ï¼\n\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹çš„\n\nå†…ç½®ç±»å‹ï¼šintã€charã€floatã€doubleâ€¦â€¦\nå¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹ï¼ˆå…¶ä»–çš„ç±»ï¼‰\n\nåœ¨å¤„ç†çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¿½ç•¥å†…ç½®ç±»å‹ï¼›å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\nclass Date&#123;public:    //é»˜è®¤æ„é€ å‡½æ•°ï¼šä¸ä¼ å‚å°±èƒ½è°ƒç”¨çš„    //1.å…¨ç¼ºçœ 2.æ— å‚ 3.ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ    //å¯ä»¥æ˜¯åŠç¼ºçœçš„ï¼Œä½†æ˜¯ä¸å®ç”¨    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;        _A.Print();    &#125;private:    //ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°ï¼ˆå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™çš„è¯ï¼‰    //è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šåˆå§‹åŒ–å†…ç½®ç±»å‹çš„    //å†…ç½®ç±»å‹ï¼šint,char,doubleç­‰ç­‰    int _year;    int _month;    int _day;    //å¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹    //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„é»˜è®¤æ„é€ å‡½æ•°    Queue _A;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨è°ƒç”¨äº†è‡ªå·±çš„æ„é€ å‡½æ•°çš„åŒæ—¶ï¼Œè¿˜è°ƒç”¨äº†å¤–ç½®ç±»å‹Queueçš„æ„é€ å‡½æ•°ï¼Œæå®šäº†å®ƒçš„åˆå§‹åŒ–\n\nå¦‚æœæˆ‘ä»¬å»æ‰Dateçš„æ„é€ å‡½æ•°ï¼Œå°±èƒ½çœ‹åˆ°ä¸‹é¢çš„æƒ…å†µã€‚QueueæˆåŠŸåˆå§‹åŒ–ï¼Œä½†æ˜¯å†…ç½®ç±»å‹çš„å¹´æœˆæ—¥éƒ½æ˜¯éšæœºå€¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªC++ç±»éƒ½éœ€è¦è‡ªå·±å†™æ„é€ å‡½æ•°ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæƒ…å†µé™¤å¤–\n\nç±»é‡Œé¢çš„æˆå‘˜éƒ½æ˜¯è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼ˆä¸”æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼‰\nå¦‚æœè¿˜æœ‰å†…ç½®ç±»å‹æˆå‘˜ï¼Œå£°æ˜æ—¶ç»™äº†ç¼ºçœå€¼\n\næ³¨ï¼šåªæœ‰ç±»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æ‰å¯ä»¥ç»™ç¼ºçœå€¼\n//ä¸‹é¢çš„æƒ…å†µå°±ä¸éœ€è¦å†™class MyS&#123;    private:      Queue q1;//è‡ªå®šä¹‰ç±»å‹      Queue q2;      int a=1;//å†…ç½®ç±»å‹å£°æ˜çš„æ—¶å€™ç»™äº†ç¼ºçœå€¼&#125;;\n\n\n\n1.4åˆå§‹åŒ–åˆ—è¡¨é™¤äº†ä¸Šé¢çš„æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ä¸ºåˆå§‹åŒ–åˆ—è¡¨\nDate(int year=2022,int month=2,int day=30)    :_year(year),\t_month(month),\t_day(day)&#123;&#125;\n\n\næ¯ä¸ªæˆå‘˜å˜é‡åªèƒ½åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å‡ºç°ä¸€æ¬¡\nç±»ä¸­åŒ…å«ä»¥ä¸‹æˆå‘˜å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–\nå¼•ç”¨\nconstæˆå‘˜\nè‡ªå®šä¹‰ç±»å‹æˆå‘˜\n\n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ã€‚å› ä¸ºå¯¹äºè‡ªå®šä¹‰ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œåˆå§‹åŒ–åˆ—è¡¨çš„ä¼˜å…ˆçº§æ˜¯é«˜äº&#123; &#125;é‡Œé¢çš„å†…å®¹çš„ã€‚\nè¿™é‡Œè¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼\næˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºå°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºï¼Œè€Œå¹¶éåˆå§‹åŒ–åˆ—è¡¨è‡ªå·±çš„é¡ºåºï¼\n\næ€ä¹ˆç†è§£å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(month)\t&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå³ä¾¿æˆ‘ä»¬æŠŠ_dayæ”¾åœ¨äº†åˆå§‹åŒ–åˆ—è¡¨çš„é¦–ä½ï¼Œä½†ç”±äºå®ƒæ˜¯åœ¨æœ€åå£°æ˜çš„ã€‚æ‰€ä»¥æ„é€ å‡½æ•°èµ°åˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œä¼šä¾æ®å£°æ˜é¡ºåºï¼Œä¾æ¬¡åˆå§‹åŒ–å¹´ã€æœˆã€æ—¥ã€‚\n\nè¿™ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Ÿå†æ¥çœ‹çœ‹ä¸€ä¸ªé”™è¯¯ç¤ºä¾‹\n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(_day)&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå½“æˆ‘ä»¬ç”¨ä¸Šé¢è¿™ä¸ªåˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ¬æ„æ˜¯æƒ³åœ¨åˆå§‹åŒ–å®Œ_dayä»¥åï¼Œå°†_dayçš„å€¼èµ‹ç»™_monthã€‚ä½†ç”±äº_monthçš„å£°æ˜é¡ºåºåœ¨_dayä¹‹å‰ï¼Œæ‰€ä»¥_month(_day)ä¼šå…ˆæ‰§è¡Œï¼Œæ­¤æ—¶çš„_dayå°šä¸ºéšæœºå€¼ï¼Œè¿™å°±å¯¼è‡´æœˆä»½å˜æˆéšæœºå€¼äº†ï¼\n\nè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šè‚¯å®šä¸ä¼šç”¨å¤©æ•°åˆå§‹åŒ–æœˆæ•°ï¼ŒèŒƒå›´ä¸ä¸€æ ·\n\næœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯å£°æ˜é¡ºåºå’Œåˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºä¿æŒä¸€è‡´ï¼\n\n1.5 explicitå…³é”®å­—æ„é€ å‡½æ•°ä¸ä»…å¯ä»¥æ„é€ ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œå¯¹äºå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œè¿˜å…·æœ‰éšå¼ç±»å‹è½¬æ¢çš„ä½œç”¨ã€‚\nclass Date&#123;public:    //æ­£å¸¸çš„æ„é€ å‡½æ•°    //Date(int year)    //    :_year(year)    //    &#123;&#125;\t    explicit Date(int year)        :_year(year)        &#123;&#125;private:    int _year;    int _month:    int _day;&#125;ï¼›void TestDate()&#123;    Date d1(2018);    // ç”¨ä¸€ä¸ªæ•´å½¢å˜é‡ç»™æ—¥æœŸç±»å‹å¯¹è±¡èµ‹å€¼    // å®é™…ç¼–è¯‘å™¨èƒŒåä¼šç”¨2019æ„é€ ä¸€ä¸ªæ— åå¯¹è±¡ï¼Œæœ€åç”¨æ— åå¯¹è±¡ç»™d1å¯¹è±¡è¿›è¡Œèµ‹å€¼    d1 = 2019;&#125;\n\nå½“æˆ‘ä»¬è°ƒç”¨èµ‹å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šå…ˆç”¨2019æ„é€ å‡ºä¸€ä¸ªdateç±»å‹å¯¹è±¡ï¼Œå†è°ƒç”¨èµ‹å€¼é‡è½½ï¼ˆè¿™é‡Œè¿˜æ²¡æœ‰å†™ï¼‰èµ‹å€¼ç»™d1ã€‚è¿™å°±æ˜¯ä¸€ä¸ªéšå¼ç±»å‹è½¬æ¢\nå¦‚æœæˆ‘ä»¬ç”¨explicitä¿®é¥°äº†è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œæ­¤ç±»éšå¼ç±»å‹è½¬æ¢ï¼\n1.6è§„èŒƒå‘½åç±»çš„æˆå‘˜å˜é‡ä¸ºäº†æ›´å¥½çš„ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œä»¥åŠåŒºåˆ†ç±»å†…å¤–çš„å‡½æ•°ç±»å‹\nä¸€èˆ¬æˆ‘ä»¬å®šä¹‰ç±»ä¸­çš„æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œéƒ½ä¼šä½¿ç”¨ä¸€ä¸ªä¸‹åˆ’çº¿è¿›è¡Œæ ‡æ˜_YEAR\nåœ¨ä¸€äº›åœ°æ–¹ï¼Œä½ ä¼šçœ‹åˆ°å‡½æ•°åå‰é¢ä¹Ÿå¸¦äº†ä¸€ä¸ª_ï¼Œè¿™ä¸€èˆ¬è¡¨æ˜è¯¥å‡½æ•°æ˜¯å¦å¤–ä¸€ä¸ªå‡½æ•°çš„å­å‡½æ•°ï¼ŒåŒæ ·æ˜¯ç”¨äºåŒºåˆ†çš„ã€‚\n\nä¸åŒäººçš„ä»£ç é£æ ¼ä¸åŒï¼Œä½ å¯ä»¥é€‰æ‹©ä½ è‡ªå·±å–œæ¬¢çš„é£æ ¼ï¼Œä½†ä¸èƒ½å½±å“æˆ‘ä»¬ç¨‹åºçš„æ­£å¸¸ä½¿ç”¨\n\næ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼Œå°±ä¼šå½±å“ç±»çš„æ„é€ äº†\nclass Date&#123;public:    Date(int year=2022)    &#123;        year=year;    &#125;private:    int year;&#125;;\n\nè¯·é—®year=yearé‡Œé¢çš„è¿™ä¸ªyearï¼Œåˆ°åº•æ˜¯æˆå‘˜å˜é‡ï¼Œè¿˜æ˜¯æ„é€ å‡½æ•°çš„ä¼ å‚å‘¢ï¼Ÿç¼–è¯‘å™¨åˆåŒæ‡µé€¼äº†\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨åœ¨æ‰¾yearçš„æ—¶å€™ï¼Œä¼šå…ˆåœ¨å½“å‰&#123; &#125;ä¸­æ‰¾ï¼Œæ‰¾åˆ°äº†ä¼ å‚çš„yearï¼Œå°±ä¸ä¼šå»æ‰¾å…¶ä»–åœ°æ–¹çš„yearäº†ã€‚æ‰€ä»¥è¿™ä¸ªè¯­å¥å®é™…ä¸Šæ˜¯ä¼ å‚è¿‡æ¥çš„yearè‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚\n1.7åˆå§‹åŒ–åˆ—è¡¨&#x2F;å‡½æ•°ä½“&#x2F;ç¼ºçœå€¼åœ¨VS2019é‡Œé¢æµ‹è¯•äº†ä¸€ä¸‹è¿è¡Œé¡ºåº\n\nç¼ºçœå€¼&#x2F;åˆå§‹åŒ–åˆ—è¡¨ï¼ˆç¼ºçœå€¼ä¼šè¢«å¤„ç†æˆåˆå§‹åŒ–åˆ—è¡¨ï¼‰\nå‡½æ•°ä½“å†…\n\nåœ¨ä¸‹é¢çš„æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œæˆ‘ç”¨æ³¨é‡Šæ ‡å‡ºäº†åˆå§‹åŒ–çš„é¡ºåº\n#include &lt;iostream&gt;#include &lt;string&gt;using namespace std;class inclass &#123;public:\tinclass(int a = -10,const string&amp; info = &quot;dft&quot;) :_a(a) &#123;\t\tcout &lt;&lt; &quot;init class | &quot; &lt;&lt; info &lt;&lt; endl;\t&#125;\tinclass(const inclass&amp; d) &#123;\t\t_a = d._a;\t\tcout &lt;&lt; &quot;init class copy&quot; &lt;&lt; endl;\t&#125;\tint _a;&#125;;class myclass &#123;public:\tmyclass(int c)\t\t:_c(c),// 3    // 6 è¿™é‡Œç»™å˜é‡_fè°ƒç”¨äº†é»˜è®¤æ„é€ å‡½æ•°\t\t_g(5,&quot;_g&quot;)// 7\t&#123;\t\t\t_d = 2; // 8\t\t_f = inclass(6,&quot;_f&quot;);// 9 _få®é™…ä¸Šæ„é€ äº†ä¸¤æ¬¡\t\tcout &lt;&lt; &quot;init myclass&quot; &lt;&lt; endl;\t&#125;private:\tint _a = -1;// 1\tconst int _b = -3;// 2\tint _c;\tint _d;    int _dd = -5;// 4 \tinclass _e = inclass(4,&quot;_e&quot;); // 5 åˆå§‹åŒ–åˆ—è¡¨ä¸­ç›´æ¥æ„é€ \tinclass _f; \tinclass _g;&#125;;int main()&#123;\tmyclass b(50);\treturn 0;&#125;\n\nè¿è¡Œè¾“å‡ºå¦‚ä¸‹ï¼Œå…¶ä¸­ç¬¬äºŒè¡Œçš„dftæ˜¯ç¼–è¯‘å™¨åœ¨åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µç»™å˜é‡_fè°ƒç”¨çš„é»˜è®¤æ„é€ å‡½æ•°ï¼ˆå› ä¸ºinclassçš„æ„é€ å‡½æ•°å†™äº†å…¨ç¼ºçœï¼‰\ninit class | _einit class | dftinit class | _ginit class | _finit myclass\n\nè€Œä¸”è¿™é‡Œæˆ‘ä»¬èƒ½çœ‹å‡ºï¼Œå³ä¾¿é‡‡ç”¨ inclass _e = inclass(4,&quot;_e&quot;); è¿™ç§å½¢å¼ç»™è‡ªå®šä¹‰ç±»å‹èµ‹å€¼ï¼Œæœ€ç»ˆç¼–è¯‘å™¨ä¹Ÿä¼šä¼˜åŒ–æˆåœ¨åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ï¼›\n2.ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°ç›¸å¯¹åº”ï¼Œææ„å‡½æ•°æ˜¯å¯¹è±¡åœ¨å‡ºäº†ç”Ÿå‘½å‘¨æœŸåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨æ¥çˆ†ç ´å¯¹è±¡é‡Œçš„æˆå‘˜ï¼ˆå¦‚è¿›è¡Œfreeæ“ä½œï¼‰\nç”Ÿå‘½å‘¨æœŸæ˜¯ç¦»è¿™ä¸ªå¯¹è±¡æœ€è¿‘çš„&#123; &#125;æ‹¬å·\n2.1ç‰¹æ€§\nææ„å‡½æ•°åæ˜¯åœ¨ç±»åå‰åŠ ~\næ— å‚æ•°ï¼Œæ— è¿”å›å€¼\nä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°\nå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªææ„å‡½æ•°\n\nå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„ææ„å‡½æ•°ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹ï¼›ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„ææ„å‡½æ•°\n2.2åŸºæœ¬ä½¿ç”¨ææ„å‡½æ•°çš„å®šä¹‰å’Œæˆ‘ä»¬åœ¨å¤–éƒ¨å†™çš„Destroyå‡½æ•°ä¸€æ ·ï¼Œä¸»è¦æ‰§è¡Œfreeæ“ä½œ\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        free(_a);        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;//æµ‹è¯•è°ƒç”¨    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå‡è®¾æˆ‘ä»¬åœ¨mainå‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ èƒ½è¯´å‡ºq1å’Œq2è°å…ˆè¿›è¡Œææ„å‡½æ•°çš„è°ƒç”¨å—ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…ˆè°ƒç”¨çš„æ˜¯q2çš„ææ„å‡½æ•°\n\nå› ä¸ºåœ¨åº•å±‚æ“ä½œä¸­ï¼Œç¼–è¯‘å™¨ä¼šç»™mainå‡½æ•°å¼€è¾Ÿæ ˆå¸§\næ ˆéµä»åè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œq2æ˜¯ååˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨ææ„çš„æ—¶å€™ä¼šå…ˆææ„\n\n3.æ‹·è´æ„é€ 3.1ç‰¹æ€§å’Œä½¿ç”¨æ‹·è´æ„é€ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯å¦å¤–ä¸€ä¸ªDateç±»å‹ã€‚åœ¨ç”¨å·²æœ‰çš„ç±»ç±»å‹å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨\nå› ä¸ºæ‹·è´çš„æ—¶å€™æˆ‘ä»¬ä¸ä¼šä¿®æ”¹dçš„å†…å®¹ï¼Œæ‰€ä»¥ä¼ çš„æ˜¯const\nå¦å¤–ï¼Œæˆ‘ä»¬å¿…é¡»è¿›è¡Œä¼ å¼•ç”¨è°ƒç”¨ï¼\n\nè¿™é‡Œè¡¥å……è¯´æ˜ä¸€ä¸‹ï¼Œä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¼ å‚çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Dateçš„æ‹·è´æ„é€ \nvoid func(Date d);\n\nå¦‚æœä½ æ²¡æœ‰å†™æ‹·è´æ„é€ ï¼Œæˆ–è€…æ‹·è´æ„é€ é‡Œé¢ä¸æ˜¯ä¼ å¼•ç”¨ï¼Œç¼–è¯‘å™¨ä¼šå°±é€’å½’ä¸æ–­åˆ›å»ºæ–°çš„å¯¹è±¡è¿›è¡Œå€¼æ‹·è´æ„é€ ï¼Œç¨‹åºå°±æ­»å¾ªç¯è¾£\n//æ‹·è´æ„é€ ï¼Œå¦‚æœä¸å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª    //å¯¹å†…ç½®ç±»å‹è¿›è¡Œå€¼æ‹·è´(æµ…æ‹·è´)    Date(const Date&amp; d)    &#123;        _year=d._year;        _month=d._month;        _day=d._day;        //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„æ‹·è´æ„é€         Queue b(_A);    &#125;\n\nå’Œæ„é€ ã€ææ„ä¸åŒçš„æ˜¯ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ‹·è´æ„é€ ç»ˆäºæœ‰ç‚¹ç”¨äº†\n\nå®ƒä¼šå¯¹å†…ç½®ç±»å‹è¿›è¡ŒæŒ‰å†…å­˜å­˜å‚¨çš„å­—èŠ‚åºå®Œæˆæ‹·è´ï¼Œè¿™ç§ç§°ä¸ºå€¼æ‹·è´ï¼ˆåˆç§°æµ…æ‹·è´ï¼‰\nå¯¹å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\n\n\n3.2å¤–ç½®ç±»å‹æ‹·è´é—®é¢˜ä½†æ˜¯ï¼å¦‚æœä½ ä½¿ç”¨äº†å¤–ç½®ç±»å‹ï¼Œè¯¥ç±»å‹ä¸­åŒ…å«mallocçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°å°±ä¸èƒ½ç”¨è¾£ï¼\nå› ä¸ºè¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ ä¼šè¿›è¡Œå€¼æ‹·è´ï¼Œæ‹·è´å®Œäº†ä¹‹åï¼Œå°±ä¼šå‡ºç°q1å’Œq2æŒ‡å‘åŒä¸€ä¸ªç©ºé—´çš„æƒ…å†µã€‚ä¿®æ”¹q2ä¼šå½±å“q1ï¼Œfreeçš„æ—¶å€™å¤šæ¬¡é‡Šæ”¾åŒä¸€ä¸ªç©ºé—´ä¼šæŠ¥é”™ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„æ‹·è´æ„é€ çš„è¦æ±‚\n\næ³¨æ„æ³¨æ„ï¼Œmallocä¸è¡Œçš„åŸå› æ˜¯ï¼Œæ•°æ®æ˜¯å­˜åœ¨å †åŒºé‡Œé¢ï¼Œæ‹·è´çš„æ—¶å€™ï¼Œq2çš„_aå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè€Œä¸æ˜¯æ‹·è´äº†æ–°çš„æ•°æ®å†…å®¹ã€‚\n\nå¦‚æœä½ åœ¨ç±»é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªint arr[10]æ•°ç»„ï¼Œè¿™æ—¶å€™æ‹·è´æ„é€ å°±ç›¸å½“äºmemcpyï¼Œæ˜¯å¯ä»¥å®Œæˆæ‹·è´çš„å·¥ä½œçš„ã€‚\n\nå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ·±æ‹·è´\nè¿™é‡Œæˆ‘è¿˜æ²¡æœ‰å­¦åˆ°é‚£ä¸ªåœ°æ–¹ï¼Œåç»­å†™æ·±æµ…æ‹·è´çš„åšå®¢çš„æ—¶å€™ï¼Œå†æ¥å¡«ä¸Šè¿™ä¸ªå‘\n\né»‘é©¬16åˆ†é’Ÿè§†é¢‘é€Ÿæˆå®Œæ¯•ï¼Œå‰æ¥å¡«å‘\n\n3.3æ·±æ‹·è´3.3.1newå’Œdeleteè¿™é‡Œå…ˆç»™å¤§å®¶ä»Cè¯­è¨€è½¬åˆ°C++ï¼Œè®²è§£ä¸€ä¸‹newå’Œdeleteå…³é”®å­—ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”mallocå’Œfree\néå¸¸ç®€å•ï¼æ¯”mallocçš„ä½¿ç”¨ç®€å•å¤šäº†ï¼\nint main()&#123;    int*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´    int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10    int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´    //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼        delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´    delete p2;//åŒä¸Š        //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„    delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„        return 0;&#125;\n\næ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼\n\n3.3.2æ·±æ‹·è´å®ç°åœ¨ä¸Šé¢å†™é“è¿‡ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ï¼Œå®Œæˆå€¼æ‹·è´å·¥ä½œã€‚ä½†æ˜¯é˜Ÿåˆ—çš„ä»£ç é‡Œé¢åŒ…å«å †åŒºçš„ç©ºé—´ï¼Œéœ€è¦æˆ‘ä»¬æ­£ç¡®é‡Šæ”¾ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ å®Œæˆæ·±æ‹·è´ğŸ‘‡\n//æ‹·è´æ„é€ Queue(const Queue&amp; q)&#123;    _a=new int[q._capa];//æ³¨æ„è§£å¼•ç”¨    memcpy(_a, q._a, q._capa*sizeof(int));//æ‹·è´å†…å®¹    _size=q._size;    _capa=q._capa;&#125;\n\nç”¨ä¸‹é¢è¿™ä¸ªé˜Ÿåˆ—çš„ä»£ç æ¥æµ‹è¯•æ·±æ‹·è´\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        //_a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;        _a=new int[_capa];    &#125;    //æ‹·è´æ„é€     Queue(const Queue&amp; q)    &#123;        cout&lt;&lt;&quot;Queue Copy&quot;&lt;&lt;endl;        _a=new int[q._capa];        memcpy(_a, q._a, q._capa*sizeof(int));        _size=q._size;        _capa=q._capa;    &#125;    void Set()    &#123;        for (int i = 0; i &lt; _capa; i++)        &#123;            _a[i] = i + 1;        &#125;    &#125;    void Print()    &#123;        cout&lt;&lt;&quot;this:&quot;&lt;&lt;this&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;_a:&quot;&lt;&lt;_a&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;        for(int i=0;i &lt; _capa;i++)        &#123;            cout&lt;&lt;_a[i]&lt;&lt;&quot; &quot;;        &#125;        cout&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        //free(_a);        delete[] _a;        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;int main()&#123;     Queue q1;    q1.Set();    q1.Print();    cout&lt;&lt;endl;    Queue q2=q1;     q2.Print();    cout&lt;&lt;endl;    return 0;&#125;\n\n3.3.3æ·±æ‹·è´æ•ˆæœå…ˆæ³¨é‡Šæ‰Queueçš„æ‹·è´æ„é€ å‡½æ•°ææ„å‡½æ•°ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\nçœ‹ä¸€çœ‹ï¼Œå‘ç°åœ¨ä¸å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œq2å’Œq1çš„_aæŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€\n\nå–æ¶ˆææ„å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡é‡Šæ”¾åŒä¸€ç‰‡ç©ºé—´ï¼Œå‘ç”Ÿäº†æŠ¥é”™\n\nå¦‚æœæˆ‘ä»¬æŠŠå†™å¥½çš„æ·±æ‹·è´æ„é€ åŠ ä¸Šï¼Œå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\nå½“ä½ åŠ ä¸Šç»™_aé‡Œé¢åˆå§‹åŒ–ä¸€äº›æ•°æ®ï¼Œä»¥åŠæ‰“å°_aæ•°æ®çš„å‡½æ•°åï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…q2çš„_aæœ‰äº†è‡ªå·±å…¨æ–°çš„åœ°å€ï¼Œå…¶å†…éƒ¨çš„å€¼ä¹Ÿå’Œq1ä¸€æ ·äº†\n\nè¿™æ ·å†™å‡ºæ¥çš„æ‹·è´æ„é€ ï¼Œå³ä¾¿æŠŠé˜Ÿåˆ—ä¸­çš„int* _aä¿®æ”¹ä¸ºchar*æˆ–è€…å…¶ä»–ç±»å‹ï¼Œéƒ½èƒ½æ­£ç¡®å®Œæˆæ‹·è´å·¥ä½œ\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°ç‚¹å“ˆï¼Œå°±æ˜¯æ‰“å°char* _açš„åœ°å€çš„æ—¶å€™ï¼Œå’±éœ€è¦ç”¨printfè€Œä¸æ˜¯coutï¼Œå› ä¸ºcoutä¼šæŠŠ_aç›´æ¥å½“ä½œå­—ç¬¦ä¸²æ‰“å°äº†ï¼Œæ•ˆæœå°±å˜æˆäº†ä¸‹é¢è¿™æ ·\n\nç”¨printfæ¥æ§åˆ¶è¾“å‡ºæ ¼å¼ä¸º%xå³å¯\nprintf(&quot;_a:%x &quot;,_a);\n\n\n4.è¿ç®—ç¬¦é‡è½½4.1å®šä¹‰åœ¨è®²è§£èµ‹å€¼è¿ç®—ç¬¦é‡è½½ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥è®¤è¯†ä¸€ä¸‹å®Œæ•´çš„è¿ç®—ç¬¦é‡è½½\n\nC++ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§å¼•å…¥äº†è¿ç®—ç¬¦é‡è½½ï¼Œè¿ç®—ç¬¦é‡è½½æ˜¯å…·æœ‰ç‰¹æ®Šå‡½æ•°åçš„å‡½æ•°ï¼Œä¹Ÿå…·æœ‰å…¶è¿”å›å€¼ç±»å‹ï¼Œå‡½æ•°åå­—ä»¥åŠå‚æ•°åˆ—è¡¨ï¼Œå…¶è¿”å›å€¼ç±»å‹ä¸å‚æ•°åˆ—è¡¨ä¸æ™®é€šçš„å‡½æ•°ç±»ä¼¼ã€‚\n\nå‡½æ•°åä¸ºï¼šå…³é”®å­— operatorè¿ç®—ç¬¦ï¼Œå¦‚operator=\nå‡½æ•°åŸå‹ï¼šè¿”å›å€¼ç±»å‹ operatoræ“ä½œç¬¦(å‚æ•°åˆ—è¡¨)ï¼Œå¦‚Date operator=();\nä¸‹é¢æœ‰å‡ ç‚¹æ³¨æ„ï¼š\n\né‡è½½æ“ä½œç¬¦å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ“ä½œæ•°ï¼ˆå³æ“ä½œç¬¦é‡è½½å¯¹å†…ç½®ç±»å‹æ— æ•ˆï¼‰\nä¸èƒ½é€šè¿‡å…¶ä»–ç¬¦å·æ¥åˆ›å»ºæ–°çš„æ“ä½œç¬¦\nå¯¹äºç±»ç±»å‹çš„æ“ä½œç¬¦é‡è½½ï¼Œå½¢å‚æ¯”æ“ä½œæ•°å°‘ä¸€ä¸ªä¼ å‚ï¼ˆå› ä¸ºæœ‰ä¸€ä¸ªé»˜è®¤çš„å½¢å‚thisæŒ‡é’ˆï¼‰\nè¿™5ä¸ªæ“ä½œç¬¦æ˜¯ä¸èƒ½é‡è½½çš„ï¼š.*ã€::ã€sizeofã€? :ã€.\n\n4.2åŸºæœ¬ä½¿ç”¨ä»¥ä¸‹æ˜¯åœ¨å…¨å±€å®šä¹‰çš„æ“ä½œç¬¦é‡è½½ï¼Œç”¨äºåˆ¤æ–­æ—¥æœŸæ˜¯å¦ç›¸ç­‰\nbool operator==(const Date&amp; d1, const Date&amp; d2)&#123;    return d1._year == d2._year;    &amp;&amp; d1._month == d2._month    &amp;&amp; d1._day == d2._day;&#125;\n\nå½“æˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨d1==d2çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ“ä½œç¬¦é‡è½½\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±æ¥ä¼ å‚ä½¿ç”¨ï¼Œå¦‚if(operator==(d1,d2))\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œå’Œè°ƒç”¨ä¸€ä¸ªè€Œæ™®é€šå‡½æ•°æ²¡å•¥åŒºåˆ«ï¼Œå‹æ ¹ç®—ä¸ä¸Šæ“ä½œç¬¦é‡è½½ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯åœ¨ç±»é‡Œé¢å®šä¹‰æ“ä½œç¬¦é‡è½½çš„\n\nå½“æˆ‘ä»¬æŠŠå®ƒæ”¾å…¥ç±»Dateä¸­é—´ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸‹é¢è¿™æ ·\nbool operator==(const Date&amp; d2)&#123;    return _year == d2._year;    &amp;&amp; _month == d2._month    &amp;&amp; _day == d2._day;&#125;\n\nç¼–è¯‘å™¨åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä¼˜åŒ–æˆä¸‹é¢è¿™æ ·\nbool operator==(Date* this, const Date&amp; d2)//æ˜¾ç¤ºè°ƒç”¨ä¸º d1.operator==(d2);\nè€Œåœ¨mainé‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªé‡è½½åçš„æ“ä½œç¬¦å’ŒåŸæœ¬çš„ä½¿ç”¨æ–¹æ³•å®Œå…¨ç›¸åŒ\nDate d1(2022,6,1)Date d2(2022,5,1)d1==d2;//è‡ªåŠ¨è°ƒç”¨æ“ä½œç¬¦é‡è½½d1.operator==(d2);\n\nåç»­ä¼šä»¥æ—¥æœŸç±»ä¸ºæ ·æ¿ï¼Œå®ç°æ›´å¤šçš„æ“ä½œç¬¦é‡è½½\n\n4.3èµ‹å€¼è¿ç®—ç¬¦é‡è½½å› ä¸ºæ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸åŒçš„æˆå‘˜ï¼Œç¼–è¯‘å™¨ä¸å¯èƒ½æ™ºèƒ½çš„è¿›è¡Œèµ‹å€¼æ“ä½œã€‚è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªèµ‹å€¼è¿ç®—ç¬¦é‡è½½æ¥è¿›è¡Œèµ‹å€¼æ“ä½œäº†\nä»¥æ—¥æœŸç±»ä¸ºä¾‹ï¼Œèµ‹å€¼æ“ä½œå…¶å®å°±æ˜¯æŠŠå†…ç½®ç±»å‹æˆå‘˜ä¸€ä¸€èµ‹å€¼å³å¯\nDate&amp; operator=(const Date&amp; d)&#123;    if(this != &amp;d)//é¿å…è‡ªå·±ç»™è‡ªå·±èµ‹å€¼    &#123;        _year=d._year;        _month=d._month;        _day=d._day;    &#125;    return *this;&#125;\n\nç¼–å†™èµ‹å€¼é‡è½½ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å·±ç‚¹ï¼š\n\nè¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼ˆæ³¨æ„è¦å¼•ç”¨ä¼ å‚ï¼Œä¸ç„¶ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼‰\næ£€æµ‹æ˜¯å¦è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼ˆé¿å…æµªè´¹æ—¶é—´ï¼‰\nå› ä¸ºè¿”å›çš„æ˜¯*thisï¼Œå‡ºäº†å‡½æ•°åæ²¡æœ‰é”€æ¯ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¼ å¼•ç”¨è¿”å›\nä¸€ä¸ªç±»å¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªï¼Œå®Œæˆå¯¹è±¡æŒ‰å­—èŠ‚åºçš„å€¼æ‹·è´ï¼ˆæµ…æ‹·è´ï¼‰ã€‚\n\nå¦‚æœç±»ä¸­æœ‰è‡ªå®šä¹‰ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤è°ƒç”¨å®ƒçš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½ã€‚\n4.4æ·±æ‹·è´åŒæ ·çš„ï¼Œå¯¹äºä½¿ç”¨äº†åŠ¨æ€å†…å­˜ç®¡ç†çš„æˆå‘˜å˜é‡è€Œè¨€ï¼Œåœ¨è¿›è¡Œèµ‹å€¼é‡è½½çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦è€ƒè™‘ï¼šåŸæœ‰ç»´æŠ¤çš„ç©ºé—´æ˜¯å¦è¶³å¤Ÿä¿å­˜æ–°çš„æ•°æ®ï¼Ÿ\n\nå¦‚æœé•¿åº¦è¶³å¤Ÿï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ“¦é™¤åŸæœ‰æ•°æ®ï¼Œå¹¶å°†æ–°æ•°æ®æ‹·è´ä¸Šå»ã€‚\nå¦‚æœé•¿åº¦ä¸å¤Ÿï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°ç”³è¯·ä¸€ç‰‡æ–°ç©ºé—´ï¼Œå¹¶é‡Šæ”¾åŸæœ‰ç©ºé—´ã€‚\n\nä¸‹é¢æ˜¯ä¸€ä¸ªéœ€è¦æ·±æ‹·è´çš„åœºæ™¯çš„ä»£ç ç¤ºä¾‹ã€‚\nç¤ºä¾‹Queue &amp;operator=(const Queue &amp;q)&#123;    cout &lt;&lt; &quot;Queue&amp; operator=&quot; &lt;&lt; endl;    if(q._capa &gt; _capa)    &#123;        delete _a; // åˆ é™¤åŸæœ‰æ•°æ®        _a = new int[q._capa];//ç”³è¯·æ–°ç©ºé—´        _capa = q._capa;    &#125;    // æ‹·è´æ•°æ®    memcpy(_a, q._a, q._capa * sizeof(int));    _size = q._size;&#125;\n\nå°è¯•ç”¨ä¸‹é¢çš„ä»£ç è°ƒç”¨èµ‹å€¼é‡è½½\nQueue q3;q3.Set();q3.Print();q1 = q3; q1.Print();\n\nå¯ä»¥çœ‹åˆ°ï¼Œå› ä¸ºq1åŸæœ‰é•¿åº¦è¶³å¤Ÿå­˜æ”¾ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰ç”³è¯·æ–°çš„ç©ºé—´ï¼Œä¸”q1ä¸­çš„å†…å­˜åœ°å€å’Œq3ä¹Ÿä¸ä¸€æ ·ï¼Œç¬¦åˆæˆ‘ä»¬æ·±æ‹·è´çš„é¢„æœŸ\nthis:0x7fff1f9ba7f0 _a:0x561ca4ace300 size: 0 capa: 41 2 3 4 Queue&amp; operator=this:0x7fff1f9ba7d0 _a:0x561ca4ace2c0 size: 0 capa: 41 2 3 4 \n\nè‡ªæ‹·è´åˆ¤æ–­ä½†æ˜¯ï¼Œä¸Šé¢å®ç°çš„è¿™ä¸ªèµ‹å€¼é‡è½½æœ‰ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šæ²¡æœ‰è¿›è¡Œè‡ªæ‹·è´åˆ¤æ–­ï¼å‡è®¾æˆ‘ä»¬è®©q1=q1ï¼›\nå‡½æ•°ä¸€è¿›æ¥ï¼Œä¼šæŠŠq1çš„å†…å®¹æ‹·è´ç»™q1è‡ªå·±ï¼Œè¿™éƒ¨åˆ†å…¶å®å°±æœ‰ç‚¹æµªè´¹ï¼Œæ²¡æœ‰æ„ä¹‰ï¼è€Œå¦‚æœæœ‰äººä¸å°å¿ƒæŠŠè¿™é‡Œé¢çš„capaåˆ¤æ–­å†™é”™äº†ï¼Œå˜æˆ&gt;=çš„åˆ¤æ–­çš„è¯ï¼Œé‚£é—®é¢˜å°±æ›´å¤§äº†ï¼\n\nå› ä¸ºq1è‡ªå·±å’Œè‡ªå·±çš„capaè‚¯å®šæ˜¯ç›¸åŒçš„\næ‰€ä»¥ç¨‹åºä¼šè¿›å…¥ifçš„åˆ†æ”¯ï¼Œå°†åŸæœ‰ç©ºé—´åˆ é™¤ï¼Œç”³è¯·æ–°ç©ºé—´\nå†è¿›è¡Œæ‹·è´ã€‚\n\nå¯è¿™æ ·ä¸€æ“ä½œï¼Œq1åŸæœ¬çš„ç©ºé—´å°±è¢«é”€æ¯äº†ï¼ŒåŸæœ‰ä¿å­˜çš„æ•°æ®éƒ½è¢«é”™è¯¯æ¸…ç©ºäº†ï¼ï¼ï¼åç»­çš„memcpyä¹Ÿæ˜¯åœ¨æ‹·è´ä¸ªå¯‚å¯ã€‚ä¸ä»…æµªè´¹äº†æ—¶é—´ï¼Œè¿˜æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šã€‚\nç»“æœå°±æ˜¯ï¼šæˆ‘è°ƒç”¨äº†q1=q1çš„è‡ªèµ‹å€¼ï¼ŒæˆåŠŸçš„åœ¨ä¸ä¾µå…¥ä½ è¿™ä¸ªå¯¹è±¡çš„æƒ…å†µä¸‹æŠŠå¯¹è±¡é‡Œé¢çš„å†…å®¹æ¸…ç©ºäº†â€¦â€¦\nQueue &amp;operator=(const Queue &amp;q)   &#123;       cout &lt;&lt; &quot;Queue&amp; operator=&quot; &lt;&lt; endl;       if(q._capa &gt;= _capa) // error       &#123;           delete _a; // åˆ é™¤åŸæœ‰æ•°æ®           _a = new int[q._capa];//ç”³è¯·æ–°ç©ºé—´           _capa = q._capa;       &#125;       // æ‹·è´æ•°æ®       memcpy(_a, q._a, q._capa * sizeof(int));       _size = q._size;   &#125;\n\nç”¨ä¸Šé¢è¿™ä¸ªé”™è¯¯ä»£ç è¿›è¡Œè‡ªèµ‹å€¼çš„é”™è¯¯æƒ…å†µæµ‹è¯•ï¼Œä¼šå‘ç°q1ä¸­çš„å†…å®¹å·²ç»å˜æˆäº†æœªåˆå§‹åŒ–çš„éšæœºå€¼ã€‚\nQueue&amp; operator=this:0x7ffd92744130 _a:0x55e199ce92c0 size: 0 capa: 41578736873 5 0 0 \n\næ‰€ä»¥ï¼Œè¿™é‡Œä¸ä»…capaçš„åˆ¤æ–­æ¡ä»¶ä¸èƒ½å†™é”™ï¼Œè¿˜ä¸€å®šè¦åŠ ä¸Šè‡ªèµ‹å€¼åˆ¤æ–­ï¼\nQueue &amp;operator=(const Queue &amp;q)&#123;    cout &lt;&lt; &quot;Queue&amp; operator=&quot; &lt;&lt; endl;    if(this == &amp;q)//åˆ¤æ–­åœ°å€æ˜¯å¦ç›¸ç­‰    &#123;        return *this;    &#125;    if(q._capa &gt; _capa)    &#123;        delete _a; // åˆ é™¤åŸæœ‰æ•°æ®        _a = new int[q._capa];//ç”³è¯·æ–°ç©ºé—´        _capa = q._capa;    &#125;    // æ‹·è´æ•°æ®    memcpy(_a, q._a, q._capa * sizeof(int));    _size = q._size;    return  *this;&#125;\n\nå½“ç„¶ï¼Œè¿™ä¸ªç®€å•çš„demoå…¶å®ä¹Ÿæœ‰äº›ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¯”å¦‚å¦‚æœæˆ‘çš„ä¼ å…¥çš„å¯¹è±¡capaæ¯”å½“å‰å·²æœ‰capaå°å¾ˆå¤šå‘¢ï¼Ÿè™½ç„¶è¿™ç§æƒ…å†µä¹Ÿæ˜¯å½“å‰capaå¤§äºä¼ å…¥çš„capaï¼Œä¸éœ€è¦ç”³è¯·æ–°ç©ºé—´ï¼Œä½†ä¼šé€ æˆä¸¥é‡çš„ç©ºé—´æµªè´¹\n\nq1çš„capaæ˜¯10000\nq2çš„capaæ˜¯10\næ‰§è¡Œq1=q2ï¼Œä¸Šè¿°èµ‹å€¼é‡è½½ä»£ç ä¸ä¼šå¯¹q1çš„ç©ºé—´è¿›è¡Œæ“ä½œï¼Œè€Œæ˜¯ç›´æ¥æ‹·è´q2çš„å†…å®¹åˆ°q1å·²æœ‰ç©ºé—´ä¸­ã€‚\nå‡è®¾åœ¨è¿™ä¹‹åæœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´q1éƒ½æ²¡æœ‰è¢«æ’å…¥æ–°çš„å€¼\næ­¤æ—¶å°±å‡ºç°äº†ä¸¥é‡çš„ç©ºé—´æµªè´¹ï¼ˆq1ç”³è¯·äº†å¤§é‡ç©ºé—´å´æ²¡æœ‰ä½¿ç”¨ï¼‰\n\næ‰€ä»¥ï¼Œè¿™ä¸ªdemoåªæ˜¯ç”¨æ¥ç»™ä½ æ¼”ç¤ºä¸å†™è‡ªæ‹·è´ï¼ˆæˆ–è€…è¯´æ˜¯è‡ªèµ‹å€¼ï¼‰æ£€æµ‹å¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå®é™…åœºæ™¯å¯èƒ½æ›´åŠ å¤æ‚ã€‚\nè‡ªæ‹·è´åˆ¤æ–­ä¼šå½±å“æ€§èƒ½å—ï¼Ÿä¹‹å‰åœ¨Bç«™çœ‹åˆ°äº†ä¸€ä¸ªè§†é¢‘ï¼Œupçš„è§‚ç‚¹æ˜¯ä¸åº”è¯¥å†™è‡ªæ‹·è´åˆ¤æ–­ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ²¡æœ‰å¿…è¦çš„åˆ¤æ–­ï¼Œåº”è¯¥ä»ç¨‹åºæœ¬èº«ä¸è¿›è¡Œè‡ªæ‹·è´æ“ä½œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nå…¶ä¸­è¯„è®ºåŒºçš„è®¨è®ºä¸»è¦åœ¨äºï¼Œè‡ªæ‹·è´åˆ¤æ–­æ ¹æœ¬ä¸ä¼šæœ‰å¤šå¤§çš„æ€§èƒ½æŸè€—ï¼Œä½†ä¸å†™è‡ªæ‹·è´åˆ¤æ–­å¯èƒ½äº§ç”Ÿçš„é—®é¢˜æ›´å¤šã€‚\n\nè‡ªæ‹·è´ä¼šå½±å“æ€§èƒ½æ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬è¦å…³æ³¨çš„åº”è¯¥æ˜¯å®ƒæ˜¯å¦åˆ©å¤§äºå¼Šã€‚\n\nè€Œä¸”ï¼Œä½ ä¸èƒ½å¦„æƒ³äºæ•´ä¸ªé¡¹ç›®ï¼Œæ‰€æœ‰å‚ä¸çš„ç¨‹åºå‘˜éƒ½èƒ½åšåˆ°æŒ‰è§„èŒƒç¼–å†™ï¼Œä¸ä¼šä¸å°å¿ƒå†™å‡ºè‡ªæ‹·è´çš„é—®é¢˜ã€‚å¯¹äºä»£ç è§„èŒƒå’Œé™æ€ä»£ç æ£€æµ‹è€Œè¨€ï¼Œä¸å†™è‡ªæ‹·è´åˆ¤æ–­éƒ½æ˜¯ä¸€ä¸ªä¸å…è®¸çš„æƒ…å†µã€‚\nå› æ­¤ï¼ŒåŠ ä¸Šè‡ªæ‹·è´è‚¯å®šæ˜¯ä¸ªæ›´ä¼˜è§£ï¼Œå› ä¸ºåŠ ä¸Šæ˜¯â€œå‡†æ²¡é”™â€ï¼Œä½†ä¸åŠ ä¸Šå­—æ‹·è´å¯¼è‡´å‡ºç°å…¶ä»–çš„bugï¼Œææ€•å¤§ä¼™å°±è¦æ¥æ‰¾ä½ éº»çƒ¦äº†â€¦â€¦æ¯•ç«Ÿåœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒä½çº§çš„é”™è¯¯ã€‚\n\næˆ‘è¿˜çœ‹åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„è¯„è®ºï¼šä¸å…¶æœ‰æ—¶é—´æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œè¿˜ä¸å¦‚ç»™ä»–åŠ ä¸Šçœäº‹ã€‚ä¸åŠ¨è„‘å­çš„æ–¹æ³•æ‰æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚\n\n4.5æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„è°ƒç”¨é—®é¢˜å½“èµ‹å€¼æ“ä½œç¬¦å’Œæ‹·è´æ„é€ åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨èµ‹å€¼ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ å‘¢ï¼Ÿ\nDate&amp; operator=(const Date&amp; d)&#123;    cout&lt;&lt;&quot;èµ‹å€¼é‡è½½&quot;&lt;&lt;endl;    if(this != &amp;d)//é¿å…è‡ªå·±ç»™è‡ªå·±èµ‹å€¼    &#123;        _year=d._year;        _month=d._month;        _day=d._day;    &#125;    return *this;&#125;Date(const Date&amp; d)//æ‹·è´æ„é€ &#123;    cout&lt;&lt;&quot;æ‹·è´æ„é€ &quot;&lt;&lt;endl;    _year=d._year;    _month=d._month;    _day=d._day;&#125;\n\nåœ¨è¿™æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½ä¸¤ä¸ªå‡½æ•°ä¸­æ·»åŠ coutè¿›è¡Œæ‰“å°æç¤ºï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\nå¦‚æœå¯¹è±¡åœ¨ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œå°±ä¼šè°ƒç”¨èµ‹å€¼é‡è½½\nå¦‚æœæ˜¯ä¸€ä¸ªå…¨æ–°çš„å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå°±è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ \n\n\n5.constæˆå‘˜5.1ç”¨constä¿®é¥°ç±»çš„æˆå‘˜å‡½æ•°\nå°†constä¿®é¥°çš„ç±»æˆå‘˜å‡½æ•°ç§°ä¹‹ä¸ºconstæˆå‘˜å‡½æ•°ï¼Œconstä¿®é¥°ç±»æˆå‘˜å‡½æ•°ï¼Œå®é™…ä¿®é¥°çš„æ˜¯è¯¥æˆå‘˜å‡½æ•°éšå«çš„thisæŒ‡é’ˆï¼Œè¡¨æ˜åœ¨è¯¥æˆå‘˜å‡½æ•°ä¸­ä¸èƒ½å¯¹ç±»çš„ä»»ä½•æˆå‘˜è¿›è¡Œä¿®æ”¹ã€‚\n\nåŸºæœ¬çš„ä¿®é¥°æ–¹æ³•å¦‚ä¸‹ï¼Œåœ¨å‡½æ•°çš„æ‹¬å·ååŠ constå³å¯\nvoid Print()const&#123;\tcout&lt;&lt;_year&lt;&lt;endl;&#125;\n\nå®é™…ä¿®é¥°çš„æ˜¯è¯¥å‡½æ•°éšå«çš„thisæŒ‡é’ˆ\nthisæŒ‡é’ˆæœ¬èº«æ˜¯Date*constç±»å‹çš„ï¼Œä¿®é¥°åå˜ä¸ºconst Date* constç±»å‹\nvoid Print(const Date* const this)&#123;\tcout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;&#125;\n\nâ‘ å®ä¾‹-æƒé™é—®é¢˜è¿™ä¹ˆè¯´å¥½åƒæœ‰ç‚¹è¿·ç³Šï¼Œæˆ‘ä»¬ç”¨å®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦constä¿®é¥°æˆå‘˜å‡½æ•°\nclass Date&#123;public:    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;    &#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­è°ƒç”¨Printå‡½æ•°ï¼Œåœ¨mainä¸­æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„\nint main()&#123;\tDate d1(2022,5,10);    d1.Print();    return 0;&#125;\n\nä½†å½“ä½ ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œçš„æ—¶å€™ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†\nvoid TEST(const Date&amp; d)&#123;\td.Print();//d.Print(&amp;d) --&gt;const Date*&#125;int main()&#123;\tDate d1(2022,5,10);    d1.Print();//d1.Print(&amp;d1) --&gt;Date*    TEST(d1);        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬è¿›è¡Œäº†å¼•ç”¨è°ƒç”¨ï¼Œå› ä¸ºåœ¨TESTä¸­æˆ‘ä»¬ä¸ä¼šä¿®æ”¹d1çš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨constè¿›è¡Œäº†ä¿®é¥°\n\nè¿™æ—¶å€™TESTä¸­çš„d.Print()å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯const Date*æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nmainä¸­çš„d1.Print();å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯Date*æŒ‡é’ˆ\n\näºæ˜¯å°±ä¼šå‘ç”Ÿæƒé™å†²çªé—®é¢˜ğŸ‘‡\n\nè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°åé¢åŠ äº†constï¼Œå°±å¯ä»¥é¿å…æ­¤ç§æƒé™æ”¾å¤§é—®é¢˜ã€‚è¿™æ ·ä¸ç®¡æ˜¯mainå‡½æ•°è¿˜æ˜¯TESTå‡½æ•°ä¸­å¯¹Print()å‡½æ•°çš„è°ƒç”¨ï¼Œå°±éƒ½å¯ä»¥æ­£å¸¸æ‰“å°äº†ï¼\n\næ€»ç»“ä¸€ä¸‹ï¼š\n\nconstå¯¹è±¡ä¸å¯ä»¥è°ƒç”¨éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstå¯¹è±¡å¯ä»¥è°ƒç”¨constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\nconstæˆå‘˜å‡½æ•°å†…ä¸å¯ä»¥è°ƒç”¨å…¶ä»–éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstæˆå‘˜å‡½æ•°å¯ä»¥ç‹¬è°ƒç”¨å…¶ä»–constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\n\n\n\n\nâ‘¡ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ï¼Ÿä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\nthisæŒ‡é’ˆæœ¬èº«å°±æ˜¯ç±»å‹å* constç±»å‹çš„ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ã€‚åŠ ä¸Šconstä¹‹åï¼ŒthisæŒ‡å‘çš„å†…å®¹ï¼Œæ—¢ç±»é‡Œé¢çš„æˆå‘˜å˜é‡ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚\nçŸ¥é“äº†è¿™ä¸€ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥åˆç†çš„åˆ¤æ–­å‡ºï¼šåªè¦æ˜¯éœ€è¦ä¿®æ”¹ç±»ä¸­æˆå‘˜å˜é‡çš„å‡½æ•°ï¼Œå°±ä¸éœ€è¦åœ¨()åé¢åŠ constä¿®é¥°\nå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡ï¼Œå°±å¯ä»¥åŠ constè¿›è¡Œä¿®é¥°\næ³¨æ„ï¼šå¦‚æœä½ ç”¨äº†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„å†™æ³•ï¼Œé‚£ä¹ˆå£°æ˜å’Œå®šä¹‰çš„å‡½æ•°éƒ½éœ€è¦åŠ ä¸Šconstä¿®é¥°\n\nâ‘¢å‡ºé”™æé†’è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æé†’çš„æ˜¯ï¼Œå¦‚æœä½ å¯¹æŸä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†constä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°é‡Œé¢åŒ…å«çš„å…¶ä»–ç±»é‡Œé¢çš„å‡½æ•°ï¼Œéƒ½éœ€è¦è¿›è¡Œconstä¿®é¥°ã€‚ä¸ç„¶å°±ä¼šæŠ¥é”™\n\nå‡ºç°è¯¥æŠ¥é”™çš„æƒ…å†µå¦‚ä¸‹\n\nè¿™ä¸ªæƒ…å†µä¹Ÿæé†’æˆ‘ä»¬ï¼Œä¸èƒ½åœ¨constä¿®é¥°çš„å‡½æ•°ä¸­ï¼Œè°ƒç”¨éconstä¿®é¥°çš„æˆå‘˜å‡½æ•°\n\n5.2å–åœ°å€åŠå¯¹constå–åœ°å€é‡è½½æœ€åä¸¤ä¸ªé»˜è®¤æˆå‘˜å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚è¿™ä¸¤ä¸ªå‡½æ•°ä¸€èˆ¬éƒ½ä¸éœ€è¦é‡è½½ï¼Œæ¯•ç«Ÿè¿”å›çš„æœ¬èº«å°±æ˜¯ä¸€ä¸ªthisæŒ‡é’ˆï¼Œæ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„åœ°æ–¹\nclass Date&#123; public :     Date* operator&amp;()     &#123;         return this ;     &#125;         const Date* operator&amp;()const     &#123;     \treturn this ;     &#125;private :     int _year ;      int _month ;     int _day ;&#125;;\n\nåªæœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦è®©&amp;åªè·å–ç‰¹å®šå†…å®¹çš„æ—¶å€™ï¼Œæ‰éœ€è¦æ‰‹åŠ¨é‡è½½è¿™ä¸¤ä¸ªå‡½æ•°\n6.æ„é€ ï¼Œææ„é¡ºåºä¸‹é¢è¿™ä¸ªä»£ç æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç¤ºä¾‹ï¼ˆ22.12.31ï¼‰\n#includeÂ &lt;iostream&gt;#includeÂ &lt;string&gt;usingÂ namespaceÂ std; classÂ A&#123;public:Â Â Â Â A(intÂ count)Â Â Â Â &#123;Â Â Â Â Â Â Â Â cÂ =Â count;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â cÂ &lt;&lt;Â &quot;Â initÂ this::Â &quot;Â &lt;&lt;Â thisÂ &lt;&lt;Â endl;Â Â Â Â &#125; Â Â Â Â ~A()Â Â Â Â &#123;Â Â Â Â Â Â Â Â coutÂ &lt;&lt;Â cÂ &lt;&lt;Â &quot;Â desÂ this::Â &quot;Â &lt;&lt;Â thisÂ &lt;&lt;Â endl;Â Â Â Â &#125;private:Â Â Â Â intÂ c;&#125;; AÂ a1(1);//å…¨å±€ intÂ main()&#123;Â Â Â Â A*Â pÂ =Â newÂ A(2);//å †åŒºÂ Â Â Â AÂ a2(3);//æ ˆåŒºÂ Â Â Â staticÂ AÂ a3(4);//é™æ€åŒº Â Â Â Â coutÂ &lt;&lt;Â &quot;#####&quot;Â &lt;&lt;Â endl;Â Â Â Â deleteÂ p;//å †åŒºè¢«ä¸»åŠ¨é‡Šæ”¾ï¼Œè‚¯å®šæ˜¯ç¬¬ä¸€ä¸ªææ„çš„&#125;\n\næœ€ç»ˆæ‰“å°çš„ç»“æœå¦‚ä¸‹\n1 init this:: 00D4E4642 init this:: 0160F5583 init this:: 0133F9D84 init this:: 00D4E46C#####2 des this:: 0160F5583 des this:: 0133F9D84 des this:: 00D4E46C1 des this:: 00D4E464\n\næ€»ç»“ï¼š\n\næ„é€ é¡ºåºå’Œå†™ä»£ç çš„è¿è¡Œé¡ºåºä¸€è‡´\nææ„æ—¶å€™ï¼Œå †åŒºè‹¥æ‰‹åŠ¨deleteï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯æŒ‰deleteçš„é¡ºåºææ„çš„\nè‡ªåŠ¨ææ„çš„æ—¶å€™ï¼Œéµå¾ªæ ˆ-é™æ€-å…¨å±€çš„é¡ºåºææ„\n\n\næ—¥æœŸç±»çš„å®ç°ç±»å’Œå¯¹è±¡ç¬¬ä¸€ç«™ğŸšŒä¸­æåˆ°è¿‡ï¼Œåœ¨é¡¹ç›®åä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€åŠè¦ç”¨å®šä¹‰å’Œå£°æ˜åˆ†ç¦»çš„å½¢å¼æ¥äº›ä¸€ä¸ªé¡¹ç›®ã€‚\n\nä¸‹é¢å°±è®©æˆ‘ä»¬ç”¨æ—¥æœŸç±»æ¥æ¼”ç¤ºè¿™æ ·çš„æ“ä½œ\n\nåœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°ä¼šè¢«é»˜è®¤è®¾ç½®ä¸ºå†…è”ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯ï¼šçŸ­å°å‡½æ•°åœ¨.hä¸­å®šä¹‰ï¼Œé•¿å‡½æ•°åœ¨.hä¸­å£°æ˜ï¼Œåœ¨.cppä¸­å®šä¹‰\nè‡³äºæºç å’Œè§£æå˜›â€¦â€¦å¤§å®¶ç›´æ¥æ¥æˆ‘çš„giteeä»“åº“çœ‹å§ï¼ã€ä¼ é€é—¨ã€‘\næ³¨é‡Šå†™çš„å¾ˆè¯¦ç»†äº†â²æœ‰å•¥é—®é¢˜å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€å“¦\n\nç‰¹æ®Šï¼šå¯¹&lt;&lt;å’Œ&gt;&gt;çš„é‡è½½è¿™é‡Œçš„&lt;&lt;å’Œ&gt;&gt;ä¸»è¦æ˜¯åœ¨ä½¿ç”¨cinå’Œcoutçš„æ—¶å€™éœ€è¦ä½¿ç”¨\nâ‘ ç®€å•äº†è§£ioåœ¨cplusplusç½‘ç«™ä¸Šï¼Œä½ å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä¸€å‰¯å›¾ã€‚åœ¨ä½¿ç”¨cinå’Œcoutçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®åˆ†åˆ«è°ƒç”¨äº†ä¸åŒå¤´æ–‡ä»¶çš„å†…å®¹ã€‚\n\ncinï¼šistream\ncoutã€cerrã€clogï¼šostream\n\n\nå®é™…ä¸Šï¼Œæµæ˜¯ä¸€ä¸ªç±»å‹çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å®Œæˆäº†è¾“å…¥å’Œè¾“å‡ºçš„æ“ä½œ\n\næµæ“ä½œæ˜¯ç³»ç»ŸGUIæ”¯æŒçš„ï¼ˆäº†è§£ä¸€ä¸‹å°±è¡Œï¼Œæˆ‘ä¹Ÿä¸æ‡‚ï¼‰\n\nåœ¨coutçš„å®šä¹‰ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šcoutä¸ºäº†å®Œæˆè‡ªåŠ¨è¯†åˆ«ç±»å‹è¿›è¡Œè¾“å‡ºæ“ä½œçš„å·¥ä½œï¼Œå¯¹å„ç§ç±»å‹è¿›è¡Œäº†æ“ä½œç¬¦é‡è½½operator&lt;&lt;\n\næ˜¾ç„¶ï¼Œè¿™éƒ¨åˆ†é‡è½½ä¸­ä¸åŒ…å«è‡ªå®šä¹‰ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ¥ä»¿ç…§è¿™é‡Œçš„å‡½æ•°ï¼Œè¿›è¡Œé‡è½½æ“ä½œ\nè¿™é‡Œæ¶‰åŠåˆ°äº†å‹å…ƒå‡½æ•°ï¼Œåœ¨ç±»å’Œå¯¹è±¡çš„ä¸‹ä¸€ç¯‡åšå®¢ä¸­æˆ‘ä¼šå†™é“ã€‚ä¸è¿‡ç°åœ¨ä½ åªéœ€è¦çŸ¥é“ï¼Œå‹å…ƒå‡½æ•°æ˜¯æŸä¸€ä¸ªç±»çš„æœ‹å‹ï¼Œç›®çš„æ˜¯åœ¨ç±»å¤–è®¿é—®ç±»é‡Œé¢çš„æˆå‘˜å˜é‡\n\nå‹å…ƒå‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œå®ƒæ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„æ™®é€šå‡½æ•°ï¼Œä¸å±äºä»»ä½•ç±»ï¼Œä½†éœ€è¦åœ¨ç±»çš„å†…éƒ¨å£°æ˜ï¼Œå£°æ˜æ—¶éœ€è¦åŠ friendå…³é”®å­—ã€‚\n\nâ‘¡å®ç°æœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼Œå¤´æ–‡ä»¶ä¸­åœ¨æœ€å‰é¢è¿›è¡Œå£°æ˜\n\n//è¿™ä¸¤ä¸ªæ˜¯å‹å…ƒå‡½æ•°(å› ä¸ºéœ€è¦åœ¨ç±»å¤–é¢è®¿é—®ç±»é‡Œé¢çš„æˆå‘˜å˜é‡)//æ³¨æ„cinå’Œcoutçš„ä¸åŒå®ç°//å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®Œå…¨å±•å¼€std namepaceï¼Œæ‰€ä»¥å†™è¿™ä¸ªå‡½æ•°çš„æ—¶å€™éœ€è¦è‡ªå·±æŒ‡å®šstd:://è¿”å›å€¼ä¸ºostreamæ˜¯ä¸ºäº†ä¿è¯å¤šæ¬¡coutstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Date&amp; d)&#123;\tout &lt;&lt; d._year &lt;&lt; &quot;-&quot; &lt;&lt; d._month &lt;&lt; &quot;-&quot; &lt;&lt; d._day &lt;&lt; endl;\treturn out;&#125;//cinä½¿ç”¨çš„æ˜¯istreamstd::istream&amp; operator&gt;&gt;(std::istream&amp; in, Date&amp; d)&#123;\tint year,month,day;    in &gt;&gt; year &gt;&gt; month &gt;&gt; day;    //è¿™é‡Œåº”è¯¥æ·»åŠ ä¸€ä¸ªå¯¹æ—¥æœŸçš„æ­£ç¡®æ€§åˆ¤æ–­     if(year&gt;=0        &amp;&amp;(month&gt;=1&amp;&amp;month&lt;=12)        &amp;&amp;(day&gt;=1&amp;&amp;day&lt;=d.GetMonthDay(year,month)) )    &#123;//åˆ¤æ–­æ—¥æœŸæ­£ç¡®æ€§        d._year=year;        d._month=month;        d._day=day;    &#125;    else    &#123;        cout&lt;&lt;&quot;Date err!&quot;&lt;&lt;endl;        exit(0);//æ—¥æœŸé”™è¯¯ç›´æ¥ç»ˆæ­¢ç¨‹åº    &#125;\treturn in;&#125;\n\nç¨‹åºè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œå’Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨coutã€cinæ˜¯ä¸€æ ·çš„ï¼\n\nå½“ä½ å†™äº†ä¸€ä¸ªç¦»è°±æ—¥æœŸåï¼Œç¨‹åºä¹Ÿä¼šè¿›è¡Œæ­£ç¡®çš„æŠ¥é”™\n\nâ‘¢ç–‘æƒ‘è§£ç­”ä½ å¯èƒ½ä¼šæƒ³ï¼Œå¹²å˜›ç”¨å‹å…ƒå•Šï¼Œç›´æ¥åœ¨ç±»é‡Œé¢å®šä¹‰è¿™ä¸ªå‡½æ•°é‡è½½ä¸å°±å¯ä»¥äº†ï¼Ÿ\nä¹‹æ‰€ä»¥åœ¨å¤–å¤´å®šä¹‰è¯¥å‡½æ•°ï¼Œæ˜¯å› ä¸ºç±»é‡Œé¢å®šä¹‰çš„å‡½æ•°ï¼Œé»˜è®¤ä¼šå¸¦æœ‰ä¸€ä¸ªéšå«çš„thisæŒ‡é’ˆä¼ å‚ï¼Œä½œä¸ºæ“ä½œç¬¦çš„å·¦æ“ä½œæ•°ã€‚\nç„¶åä½ çš„å‡½æ•°ä½¿ç”¨å°±å¾—å˜æˆä¸‹é¢è¿™æ ·ğŸ˜±\nd1&lt;&lt;cout;\n\nè™½ç„¶ä¹Ÿèƒ½è·‘èµ·æ¥å¹¶å®Œæˆå·¥ä½œï¼Œä½†è¿™æ ·å†™ä¹Ÿå¤ªæ€ªäº†ï¼\nç»“è¯­æœ€åçš„æœ€åï¼Œä»Šå¤©æ˜¯5æœˆ20æ—¥ï¼Œç”¨ä¸‹å›¾ç»™å¤§å®¶é€ä¸Šç¥ç¦ğŸ˜‚\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp","ç±»å’Œå¯¹è±¡"]},{"title":"ã€C++ã€‘åŠ¨æ€å†…å­˜ç®¡ç†","url":"/posts/1688214907/","content":"åœ¨ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢é‡Œé¢ï¼Œå·²ç»è®°å½•è¿‡äº†C++ä¸­åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°newå’Œdeleteçš„åŸºæœ¬ä½¿ç”¨ã€‚æœ¬ç¯‡åšå®¢æ˜¯å¯¹C++åŠ¨æ€å†…å­˜ç®¡ç†çš„è¿›ä¸€æ­¥ç»†åŒ–\n\n\n[TOC]\n1.C&#x2F;C++å†…å­˜åˆ†åŒºè¿™æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œç›´æ¥çœ‹ä¸‹é¢è¿™ä¸ªå›¾å§ï¼\n\nè¿™é‡Œçš„æ•°æ®åŒºå…¶å®å°±æ˜¯é™æ€åŒºï¼Œè€Œä»£ç åŒºæ˜¯å¸¸é‡åŒºã€‚è¿™é‡Œçš„BBSåŒºå…ˆæš‚æ—¶passæ‰ã€‚\nè¦æƒ³è¾¨åˆ«ä¸Šé¢çš„å‡ ä¸ªå†…å­˜åˆ†åŒºï¼Œå¯ä»¥ç°æ¥çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œä½ èƒ½åˆ†çš„æ¸…æ¥šå®ƒä»¬éƒ½æ˜¯å­˜åœ¨å†…å­˜çš„å“ªä¸€ä¸ªåŒºåŸŸå—ï¼Ÿ\nint a = 1;//æ•°æ®åŒºstatic int b = 1;//æ•°æ®åŒºint main()&#123;     static int c = 1;//æ•°æ®åŒº     int d = 1;//æ ˆ     int arr1[10] = &#123;1, 2, 3, 4&#125;;//æ ˆ     char arr2[] = &quot;abcd&quot;;//æ ˆ     char* arr3 = &quot;abcd&quot;;//&quot;abcd&quot;å­˜åœ¨ä»£ç åŒº     int* ptr = (int*)malloc(sizeof (int)*4);//å †     free (ptr);    //å…¶ä¸­ï¼ŒptræŒ‡é’ˆæœ¬èº«æ˜¯å­˜åœ¨æ ˆåŒºçš„    //åŒç†ï¼Œarr3æŒ‡é’ˆæœ¬èº«å­˜åœ¨æ ˆåŒº    //ä½†æ˜¯arr3æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡æ˜¯å­˜åœ¨ä»£ç åŒºï¼ˆé™æ€åŒºï¼‰&#125;\n\n2.C++åŠ¨æ€å†…å­˜ç®¡ç†åœ¨Cè¯­è¨€ä¸­ï¼ŒåŸºæœ¬çš„åŠ¨æ€å†…å­˜ç®¡ç†é€šè¿‡mallocå’Œfreeå®ç°\nint* ptr = (int*)malloc(sizeof (int)*4);//å †free (ptr);\n\nåœ¨C++ä¸­ï¼Œå¯¹åº”äº§ç”Ÿäº†newå’Œdeleteï¼Œå®ƒä»¬æ¯”å‰è€…æ›´åŠ é«˜çº§ï¼Œå…·æœ‰æ›´å¤šç‰¹æ€§\n2.1åŸºæœ¬è®¤è¯†newå’Œdeleteä¸‹é¢æ˜¯åŸºæœ¬çš„ä½¿ç”¨æ–¹å¼ï¼Œæƒ³å¿…å¤§å®¶çœ‹äº†ä¹‹åï¼Œæ˜¯â€œæœ‰æ‰‹å°±è¡Œâ€ğŸ˜‚\nint*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´   int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10   int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´   //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼      delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´   delete p2;//åŒä¸Š      //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„   delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„\n\n2.2æ“ä½œç±»å¯¹è±¡newç›¸æ¯”äºmallocï¼Œæœ€å¤§çš„åŒºåˆ«åœ¨äºå¤„ç†è‡ªå®šä¹‰ç±»å‹çš„æ—¶å€™ã€‚ç±»å’Œå¯¹è±¡å°±æ˜¯C++ä¸­ä¸Cè¯­è¨€å®Œå…¨ä¸åŒçš„è‡ªå®šä¹‰ç±»å‹ã€‚\næˆ‘ä»¬çŸ¥é“ï¼Œå½“ä½ ä½¿ç”¨ç±»ååˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚é‚£å¦‚æœæˆ‘ä»¬ç”¨newæ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„å¯¹è±¡å‘¢ï¼Ÿ\nclass Stack&#123;private:    int* _a;&#125;int main()&#123;    Stack* p1=(Stack*)malloc(sizeof(Stack));    Stack* p2=new Stack;        return 0;&#125;\n\nè¿™æ—¶å€™çš„åŒºåˆ«å°±åœ¨äº\n\nnewåœ¨åˆ›å»ºçš„å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°\nmallocåœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°\n\nè¿™æ ·å°±èƒ½è§£é‡Šï¼Œä¸ºä»€ä¹ˆC++è¦å•ç‹¬å¼„å‡ºä¸€ä¸ªnewï¼Œè€Œä¸æ˜¯ç»§ç»­æ²¿ç”¨Cè¯­è¨€çš„mallocäº†ã€‚å› ä¸ºæˆ‘ä»¬åœ¨classä¸­å®šä¹‰æˆå‘˜å˜é‡çš„æ—¶å€™ï¼Œå¤§å¤šæ•°æ˜¯å®šä¹‰æˆç§æœ‰çš„ã€‚å¦‚æœå¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰è¿›è¡Œæ„é€ ï¼Œæˆ‘ä»¬å¾ˆéš¾ä»å¤–éƒ¨è®¿é—®ç±»å†…éƒ¨çš„ç§æœ‰æˆå‘˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚\næ‰€ä»¥newçš„å‡ºç°ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨å †ä¸Šå¼€è¾Ÿå¯¹è±¡ç©ºé—´çš„åŒæ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚\nä¸éš¾ç†è§£ï¼Œdeleteå’Œfreeçš„åŒºåˆ«ä¹Ÿæ˜¯å¦‚æ­¤ï¼š\n\nå½“ä½ è°ƒç”¨deleteçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè°ƒç”¨ç±»çš„ææ„å‡½æ•°\nä½¿ç”¨freeä¸ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œå¯èƒ½é€ æˆå†…å­˜æ³„æ¼\n\n\n2.3å¯¹è±¡æ•°ç»„// ç”³è¯·å•ä¸ªTestç±»å‹çš„å¯¹è±¡ Test* p1 = new Test; delete p1;  // ç”³è¯·10ä¸ªTestç±»å‹çš„å¯¹è±¡ Test* p2 = new Test[10]; delete[] p2;\n\nå’Œå†…ç½®ç±»å‹ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨newæ¥å®ç°å¼€è¾Ÿå¯¹è±¡æ•°ç»„\næ³¨æ„ï¼Œåœ¨deleteæ“ä½œçš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„åŒ¹é…é—®é¢˜ï¼Œä¸èƒ½ç›´æ¥ç”¨delete p2æ¥é‡Šæ”¾å¼€è¾Ÿçš„æ•°ç»„ç©ºé—´\n\n2.4ç»™æ„é€ å‡½æ•°ä¼ å‚å¦‚æœè¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ˜¯åŒ…å«å‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼åœ¨å¼€è¾Ÿç©ºé—´ï¼Œè°ƒç”¨æ„é€ å‡½æ•°æ—¶ä¼ å‚ï¼ˆæ³¨æ„æ‹¬å·åŒºåˆ«ï¼‰\nTest* p3 = new Test(10);//ç»™å¯¹è±¡Testçš„æ„é€ å‡½æ•°ä¼ å‚delete p3;\n\n\n3.operator new&#x2F;deleteå‡½æ•°çœ‹åˆ°è¿™ä¸ªåå­—ï¼Œä¼°è®¡ä½ å’Œæˆ‘ä¸€æ ·ï¼Œä¼šä¸‹æ„è¯†çš„è®¤ä¸ºè¿™ä¸ªæ˜¯c++ä¸­å¯¹newå’Œdeleteæ“ä½œç¬¦çš„é‡è½½ã€‚nopeï¼è¿™ä¸¤ä¸ªå®é™…ä¸Šæ˜¯C++ä¸­å®ç°newå’Œdeleteçš„ä¸€éƒ¨åˆ†å‡½æ•°\nä¸ºå•¥è¯´æ˜¯ä¸€éƒ¨åˆ†å‘¢ï¼Œè®©æˆ‘ä»¬æ¥åº·åº·å®ƒçš„æºç \noperator new (std::size_t sz) _GLIBCXX_THROW (std::bad_alloc)&#123;  void *p;  /* malloc (0) is unpredictable; avoid it.  */  if (sz == 0)    sz = 1;  while (__builtin_expect ((p = malloc (sz)) == 0, false))    &#123;      new_handler handler = std::get_new_handler ();      if (! handler)    _GLIBCXX_THROW_OR_ABORT(bad_alloc());      handler ();    &#125;  return p;&#125;\n\nä½ å›å¤ä¸‹ï¼Œè¿™ä¸ªå‡½æ•°æœ€ç»ˆä½¿ç”¨äº†mallocæ¥å¼€è¾Ÿç©ºé—´ï¼Œåªæ˜¯åœ¨è¿™ä¹‹ä¸Šï¼Œnewè¿˜å¼•å…¥äº†æŠ›å¼‚å¸¸æœºåˆ¶\n\nCè¯­è¨€ä¸­ï¼Œmallocé”™è¯¯ä¼šè¿”å›nullæŒ‡é’ˆ\nC++ä¸­ï¼Œnewé”™è¯¯ä¼šæ‰§è¡ŒæŠ›bad_allocå¼‚å¸¸æ“ä½œ\n\nä¸çŸ¥æŠ›å¼‚å¸¸æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥æš‚ä¸”ä¸ç”¨ç†è§£å®ƒã€‚åªéœ€è¦çŸ¥é“ï¼Œå½“newå¤±è´¥çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¼šç›´æ¥æŠ¥é”™ç»ˆæ­¢ç¨‹åºï¼Œè€Œä¸æ˜¯å’Œmallocä¸€æ ·ï¼Œå°†æŒ‡é’ˆå˜ç©ºæŒ‡é’ˆï¼Œä»è€Œå¯¼è‡´å¯èƒ½å‡ºç°çš„è§£å¼•ç”¨ç©ºæŒ‡é’ˆæ“ä½œã€‚\nå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬newä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‡½æ•°\noperator newå¯¹è±¡çš„æ„é€ å‡½æ•°\n\nåœ¨VSä¸­æ‰“å¼€è°ƒè¯•ï¼Œè½¬åˆ°åæ±‡ç¼–ï¼Œä½ ä¾¿å¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨callè¿™ä¸¤ä¸ªå‡½æ•°çš„æ“ä½œ\n\nå†æ¥çœ‹çœ‹operator deleteçš„ä»£ç \n\nhttps://cplusplus.com/reference/new/operator%20delete/\n\nvoid operator delete(void *pUserData)&#123;\t_CrtMemBlockHeader * pHead;\tRTCCALLBACK(_RTC_Free_hook, (pUserData, 0));\tif (pUserData == NULL)\t\treturn;\t_mlock(_HEAP_LOCK); /* block other threads */\t__TRY\t/* get a pointer to memory block header */\tpHead = pHdr(pUserData);\t/* verify block type */\t_ASSERTE(_BLOCK_TYPE_IS_VALID(pHead-&gt;nBlockUse));\t_free_dbg( pUserData, pHead-&gt;nBlockUse );\t__FINALLY\t_munlock(_HEAP_LOCK); /* release other threads */\t__END_TRY_FINALLY\treturn;&#125;\n\næˆ‘ä»¬å‘ç°ï¼Œdeleteæœ€ç»ˆä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨freeå®ç°çš„\n\nä½†æ˜¯è¿™é‡Œçš„åæ±‡ç¼–ï¼Œæˆ‘å°±æœ‰ç‚¹çœ‹ä¸æ‡‚äº†ã€‚çœ‹èµ·æ¥ä¹Ÿè°ƒç”¨äº†ä¸€ä¸ªStackå‡½æ•°ï¼Œå§‘ä¸”è®¤ä¸ºé‚£ä¸ªå°±æ˜¯Stackçš„ææ„å‡½æ•°å§\n\n3.1 newå’Œdeleteçš„å®ç°åŸç†çœ‹åˆ°è¿™é‡Œï¼Œè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹newå’Œdeleteçš„å®ç°åŸç†ã€‚\nnewçš„åŸç†ï¼š\n\nè°ƒç”¨opeartor newç”³è¯·ç©ºé—´ï¼Œé”™è¯¯æ—¶æŠ›å¼‚å¸¸\nå¦‚æœæ“ä½œçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™è°ƒç”¨æ„é€ å‡½æ•°\n\nnew int[N]åŸç†:\n\nè°ƒç”¨operator new[]ï¼ˆæ²¡é”™åº“é‡Œé¢è¿˜æœ‰ä¸€ä¸ªè¿™ä¸ªå‡½æ•°ï¼‰\nåœ¨operator new[]ä¸­å®é™…è°ƒç”¨Nä¸ªoperator newæ¥ç”³è¯·ç©ºé—´\nå¦‚æœæ“ä½œçš„æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œåˆ™è¿˜ä¼šåˆ†åˆ«è°ƒç”¨Næ¬¡æ„é€ å‡½æ•°\n\ndeleteçš„åŸç†ï¼š\n\nåœ¨åŸå§‹ç©ºé—´ä¸Šè°ƒç”¨ææ„å‡½æ•°ï¼Œæ¸…æ¥šå†…å®¹\nè°ƒç”¨operator deleteæ‰§è¡Œå¯¹è±¡ç©ºé—´çš„freeæ“ä½œ\n\ndelete int[N]çš„åŸç†ï¼š\n\nè°ƒç”¨Næ¬¡ææ„å‡½æ•°\nè°ƒç”¨operator delete[]ï¼Œå®é™…è°ƒç”¨Nä¸ªoperator deleteæ¥é‡Šæ”¾Nä¸ªå¯¹è±¡çš„ç©ºé—´\n\nç¼–è¯‘å™¨åœ¨åˆ†é…å†…å­˜æ—¶é€šå¸¸ä¼šåœ¨åˆ†é…çš„å†…å­˜å—å‰é¢å­˜å‚¨ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨é‡Šæ”¾å†…å­˜æ—¶æ­£ç¡®è®¡ç®—è¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ã€‚è¿™äº›é¢å¤–çš„ä¿¡æ¯å¯èƒ½åŒ…æ‹¬åˆ†é…çš„å†…å­˜å—å¤§å°ã€æŒ‡å‘ææ„å‡½æ•°çš„æŒ‡é’ˆç­‰ã€‚å› æ­¤ï¼Œå½“è°ƒç”¨deleteæ“ä½œç¬¦æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥ä»æ‰€åˆ†é…çš„å†…å­˜å—ä¸­æå–è¿™äº›ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥ç¡®å®šè¦é‡Šæ”¾çš„ç©ºé—´å¤§å°ã€‚\n3.2 deleteåŠ []å’Œä¸åŠ çš„åŒºåˆ«\n 1ã€delete é‡Šæ”¾newåˆ†é…çš„å•ä¸ªå¯¹è±¡æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜\n\nâ€‹     2ã€delete[] é‡Šæ”¾newåˆ†é…çš„å¯¹è±¡æ•°ç»„æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜\nâ€‹     3ã€deleteå¤„ç†å•ä¸ªç±»ç±»å‹ï¼Œå…ˆä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œé‡Šæ”¾å®ƒæ‰€å èµ„æºï¼Œç„¶åé‡Šæ”¾å®ƒæ‰€å å†…å­˜ç©ºé—´ã€‚\nâ€‹     4ã€deleteå¤„ç†æ•°ç»„ç±»ç±»å‹çš„æ—¶å€™ï¼Œä¼šå¯¹æ¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡éƒ½è°ƒç”¨å®ƒä»¬çš„ææ„å‡½æ•°ï¼Œç„¶åå†é‡Šæ”¾å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚æ‰€ä»¥å¯¹äºç±»ç±»å‹çš„æ•°ç»„å¦‚æœä¸è°ƒç”¨delete[],é‚£å°±åªè°ƒç”¨äº†ä¸‹æ ‡ä¸º0çš„å¯¹è±¡çš„ææ„å‡½æ•°ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé—®é¢˜ã€‚\nâ€‹     5ã€ä¸¤ä¸ªéƒ½ä¼šé‡Šæ”¾æ‰€å å†…å­˜ï¼Œå¯¹äºå†…ç½®ç±»å‹ä¸ç®¡æ˜¯æ•°ç»„è¿˜æ˜¯å•ä¸ªå¯¹è±¡ï¼Œéƒ½å¯ä»¥æ··ç”¨ï¼Œæ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºå¯¹äºå†…ç½®ç±»å‹ï¼Œå®ƒåªå¹²ä¸€ä»¶äº‹ï¼Œå°±æ˜¯é‡Šæ”¾å®ƒä»¬æ‰€å å†…å­˜\nâ€‹     6ã€å¦‚æœå¯¹äºå•ä¸ªç±»å¯¹è±¡ï¼Œdeleteå’Œdelete[]éƒ½å¯ä»¥ï¼Œå› ä¸ºdeleteæ˜¯çŸ¥é“å®ƒè¦é‡Šæ”¾å¤šå¤§ç©ºé—´çš„ï¼ŒåŠ ä¸åŠ []æ‹¬å·çš„åŒºåˆ«æ˜¯å¯¹ä¸å¯¹æ¯ä¸ªå¯¹è±¡è°ƒç”¨ææ„å‡½æ•°ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªçš„è¯ï¼Œå®ƒå°±è°ƒç”¨ä¸€æ¬¡ï¼Œæ‰€ä»¥æ²¡æœ‰å…³ç³»ã€‚\n4.å®šä½newå®šä½newè¡¨è¾¾å¼ä¼šåœ¨å·²åˆ†é…çš„åŸå§‹å†…å­˜ç©ºé—´ä¸­è°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡\n\nå•Šå˜ï¼Œnewä¸æ˜¯ä¼šè‡ªå·±è°ƒç”¨æ„é€ å‡½æ•°å—ï¼Ÿè¿™ä¸ªå®šä½newæœ‰æ˜¯æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ\n\næŸ¥é˜…äº†ä¸€äº›æˆ‘ç°åœ¨çœ‹ä¸æ‡‚çš„èµ„æ–™åï¼Œäº†è§£åˆ°ï¼Œå®šä½newçš„æ“ä½œå¤šåŠæ˜¯é…åˆè‡ªå·±å†™çš„å†…å­˜æ± æ¥è¿›è¡Œæ“ä½œã€‚åœ¨ä¹‹å‰åšå®¢ä¸­å‡ºç°çš„Tcmallocå°±æ˜¯è°·æ­Œå†™çš„ä¸€ä¸ªå†…å­˜æ± ï¼›\n4.1ä»€ä¹ˆæ˜¯å†…å­˜æ± ï¼Ÿå½“æˆ‘ä»¬ä½¿ç”¨newæˆ–è€…mallocæ—¶ï¼Œæ˜¯é€šè¿‡ç¼–è¯‘å™¨å‘æ“ä½œç³»ç»Ÿç”³è¯·ç©ºé—´\nè€Œå†…å­˜æ± å°±æ˜¯ä¸€ä¸ªæˆ‘ä»¬å†™çš„é¢„å…ˆç”³è¯·å†…å­˜ç©ºé—´çš„æ¨¡å—\nè¿™ä¸ªæ¨¡å—ä¼šåœ¨æ‰§è¡Œåï¼Œå…ˆé¢„å…ˆå‘æ“ä½œç³»ç»Ÿè¦ä¸€ä¸ªç›¸å¯¹è¾ƒå¤§çš„ç©ºé—´ã€‚æˆ‘ä»¬åç»­çš„æ“ä½œå°±æ˜¯åœ¨è¿™ä¸ªå·²ç»å¼€è¾Ÿå¥½çš„ç©ºé—´ä¸­å†æ¬¡ç”³è¯·ç©ºé—´æ¥å®ç°çš„\nå› ä¸ºè¿™æ ·å°±æ˜¯ä»è‡ªå·±çš„å£è¢‹é‡Œé¢æ‹¿ä¸œè¥¿ï¼Œæ²¡æœ‰ä¸­é—´å•†èµšå·®ä»·ï¼Œæ•ˆç‡å°±ä¼šæé«˜ä¸å°‘ã€‚\nä½†æ˜¯è¿™æ ·å°±æ²¡æœ‰äº†newæœ¬èº«è‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°çš„ä¼˜åŠ¿ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨æ„é€ å‡½æ•°\n4.2å®šä½newçš„ä½¿ç”¨å®šä½newçš„è‹±æ–‡å« placemaent newï¼Œè¦çŸ¥é“ï¼Œåˆ«çœ‹åˆ°è¿™ä¸ªè‹±æ–‡ä¸çŸ¥é“å®ƒå•¥æ„æ€ï¼›\nnew(place_address) typeæˆ–è€…new(place_address) type(initializer-list)\n\nä»¥ä¸‹é¢è¿™ä¸ªç±»ä¸ºä¾‹\nclass Stack &#123;public:    Stack(int num = 5)    &#123;        _a = new int[num];        _capa = num;        cout &lt;&lt; &quot;Stack(int)&quot; &lt;&lt; endl;    &#125;    ~Stack()    &#123;        delete[] _a;        _capa = 0;        cout &lt;&lt; &quot;~Stack()&quot; &lt;&lt; endl;    &#125;private:    int* _a;    int _capa;&#125;;\n\næˆ‘ä»¬å…ˆä½¿ç”¨mallocæ¥æ¨¡æ‹Ÿæ²¡æœ‰è°ƒç”¨æ„é€ å‡½æ•°çš„æƒ…å†µï¼Œå†ä½¿ç”¨å®šä½newæ¥è°ƒç”¨æ„é€ å‡½æ•°\nint main()&#123;    Stack* p= (Stack*)malloc(sizeof(Stack));\tnew(p) Stack; //å¦‚æœç±»çš„æ„é€ å‡½æ•°æœ‰å‚æ•°æ—¶ï¼Œæ­¤å¤„éœ€è¦ä¼ å‚&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æˆåŠŸè°ƒç”¨äº†æ„é€ å‡½æ•°\n\n\n5.æ›´å¤šçŸ¥è¯†ç‚¹5.1 mallocå’Œnewçš„åŒºåˆ«malloc&#x2F;freeå’Œnew&#x2F;deleteçš„å…±åŒç‚¹æ˜¯ï¼šéƒ½æ˜¯ä»å †ä¸Šç”³è¯·ç©ºé—´ï¼Œå¹¶ä¸”éœ€è¦ç”¨æˆ·æ‰‹åŠ¨é‡Šæ”¾ï¼›\nä¸åŒçš„åœ°æ–¹æ˜¯ï¼š \n\nmallocå’Œfreeæ˜¯å‡½æ•°ï¼Œnewå’Œdeleteæ˜¯æ“ä½œç¬¦\nmallocç”³è¯·çš„ç©ºé—´ä¸ä¼šåˆå§‹åŒ–ï¼Œnewå¯ä»¥åˆå§‹åŒ–ï¼ˆé€šè¿‡new int(10))\nmallocç”³è¯·ç©ºé—´æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è®¡ç®—ç©ºé—´å¤§å°å¹¶ä¼ é€’ï¼Œnewåªéœ€åœ¨å…¶åè·Ÿä¸Šç©ºé—´çš„ç±»å‹å³å¯ï¼ˆå…¶å®å°±æ˜¯çœç•¥äº†sizeofè¿™ä¸€æ­¥çš„æ“ä½œï¼‰\nmallocçš„è¿”å›å€¼ä¸ºvoid*, åœ¨ä½¿ç”¨æ—¶å¿…é¡»å¼ºè½¬ï¼Œnewä¸éœ€è¦ï¼Œå› ä¸ºnewåè·Ÿçš„æ˜¯ç©ºé—´çš„ç±»å‹\nmallocç”³è¯·ç©ºé—´å¤±è´¥æ—¶ï¼Œè¿”å›çš„æ˜¯NULLï¼Œå› æ­¤ä½¿ç”¨æ—¶å¿…é¡»åˆ¤ç©ºï¼Œnewä¸éœ€è¦ï¼Œä½†æ˜¯newéœ€è¦æ•è·å¼‚å¸¸\nç”³è¯·è‡ªå®šä¹‰ç±»å‹å¯¹è±¡æ—¶ï¼Œmalloc&#x2F;freeåªä¼šå¼€è¾Ÿç©ºé—´ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°ï¼Œè€Œnewåœ¨ç”³è¯·ç©ºé—´åä¼šè°ƒç”¨æ„é€ å‡½æ•°å®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–ï¼Œdeleteåœ¨é‡Šæ”¾ç©ºé—´å‰ä¼šè°ƒç”¨ææ„å‡½æ•°å®Œæˆç©ºé—´ä¸­å†…å­˜çš„æ¸…ç†\n\n5.2 å†…å­˜æ³„æ¼æˆ‘ä»¬çŸ¥é“ï¼Œå½“å †åŒºç”³è¯·çš„ç©ºé—´æ²¡æœ‰è¿›è¡Œé‡Šæ”¾çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ï¼Œé€ æˆå†…å­˜çš„æµªè´¹ï¼Œç”šè‡³å¯¼è‡´æ“ä½œç³»ç»Ÿboomï¼\n\n\nå †å†…å­˜æ³„æ¼\n\nå †å†…å­˜æŒ‡çš„æ˜¯ç¨‹åºæ‰§è¡Œä¸­ä¾æ®é¡»è¦åˆ†é…é€šè¿‡malloc / calloc / realloc / newç­‰ä»å †ä¸­åˆ†é…çš„ä¸€å—å†…å­˜ï¼Œ ç”¨å®Œåå¿…é¡»é€šè¿‡è°ƒç”¨ç›¸åº”çš„ freeæˆ–è€…delete åˆ æ‰ã€‚å‡è®¾ç¨‹åºçš„è®¾è®¡é”™è¯¯å¯¼è‡´è¿™éƒ¨åˆ†å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œé‚£ä¹ˆä»¥åè¿™éƒ¨åˆ†ç©ºé—´å°†æ— æ³•å†è¢«ä½¿ç”¨ï¼Œå°±ä¼šäº§ç”Ÿå †å†…å­˜æ³„æ¼\n\nç³»ç»Ÿèµ„æºå¯¼è‡´çš„æ³„æ¼\n\nç³»ç»Ÿèµ„æºæ³„æ¼ æŒ‡ç¨‹åºä½¿ç”¨ç³»ç»Ÿåˆ†é…çš„èµ„æºï¼Œæ¯”æ–¹å¥—æ¥å­—ã€æ–‡ä»¶æè¿°ç¬¦ã€ç®¡é“ç­‰æ²¡æœ‰ä½¿ç”¨å¯¹åº”çš„å‡½æ•°é‡Šæ”¾æ‰ï¼Œå¯¼è‡´ç³»ç»Ÿ èµ„æºçš„æµªè´¹ï¼Œä¸¥é‡å¯å¯¼è‡´ç³»ç»Ÿæ•ˆèƒ½å‡å°‘ï¼Œç³»ç»Ÿæ‰§è¡Œä¸ç¨³å®šã€‚\n\né™¤äº†å¿˜è®°freeæˆ–è€…deleteä¹‹å¤–ï¼Œå¦å¤–çš„ä¸€äº›æƒ…å†µå¯¼è‡´ç¨‹åºæå‰ç»ˆæ­¢ï¼Œä¹Ÿä¼šå‡ºç°å†…å­˜æ³„æ¼\nint main()&#123;    Stack* p1 = (Stack*)malloc(sizeof(Stack));    Stack* p2 = new Stack;            free(p1);    return 1;//åªæ˜¯åšä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šå“ªæœ‰äººè¿™ä¹ˆå†™ä»£ç å•Šï¼        delete p2;    return 0;&#125;\n\næ¯”å¦‚ä¸Šé¢è¿™ä¸ªå‡½æ•°ä¸­ï¼Œfreeä¹‹åæ‰§è¡Œäº†returnï¼Œè·³è¿‡äº†deleteçš„æ“ä½œï¼Œå³å¯¼è‡´p2çš„å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œå‡ºç°äº†å†…å­˜æ³„æ¼\nè§£å†³å†…å­˜æ³„æ¼æœ‰å¾ˆå¤šåŠæ³•ï¼Œå…¶ä¸­æœ€å¥½çš„åŠæ³•å°±æ˜¯ç»´æŒä¸€ä¸ªè‰¯å¥½çš„ä»£ç é£æ ¼ï¼Œé¿å…å‡ºç°å¿˜è®°é‡Šæ”¾å†…å­˜çš„æƒ…å†µï¼\n5.3 æ·±æ‹·è´è¿™ä¸ªéº»çƒ¦å¤§å®¶ç§»æ­¥ä¹‹å‰ç±»å’Œå¯¹è±¡çš„åšå®¢å•¦\n\nhttps://blog.csdn.net/muxuen/article/details/124881928?spm=1001.2014.3001.5501\n\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸäº†\næœŸæœ«è€ƒè¯•å…¶å®å·²ç»ç»“æŸ5å¤©äº†ï¼Œæˆ‘è¿˜åœ¨æ‘¸é±¼â€¦â€¦å‘œå‘œ\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€nginxã€‘é…ç½®è·¨åŸŸè¯·æ±‚é—®é¢˜ | è½¬è½½","url":"/posts/3435557393/","content":"ngnixé…ç½®è·¨åŸŸè¯·æ±‚é—®é¢˜\n\n\n1.é—®é¢˜ä»Šå¤©åœ¨å°è¯•å†™ä¸€ä¸ªhtmlä»£ç ï¼ˆæŠ„csdnçš„ï¼‰è¯·æ±‚æˆ‘è‡ªå·±çš„valorant apiçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜ã€‚\nCORSå¤´ç¼ºå°‘ &#x27;Access-Control-Allow-Origin&#x27;\n\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚çš„æ„æ€å°±æ˜¯ï¼Œå½“å‰æˆ‘çš„apiæœåŠ¡å™¨ä¸æ”¯æŒè·¨åŸŸè¯·æ±‚ã€‚\næ­¤æ—¶è¯·æ±‚å…¶å®å·²ç»å®Œæˆäº†ï¼ˆåç«¯æ—¥å¿—æ˜¾ç¤ºå·²ç»è¿”å›äº†ç»“æœï¼‰åœ¨è¿”å›åˆ°æµè§ˆå™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨æ£€æŸ¥äº†åç«¯çš„è®¾ç½®ï¼Œå‘ç°åç«¯ä¸å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œæ‰€ä»¥å±è”½äº†æˆ‘ä»¬çš„è®¿é—®\n2.è§£å†³éœ€è¦é…ç½®çš„æ˜¯nginxï¼Œåœ¨è½¬å‘è§„åˆ™é‡Œé¢æ·»åŠ ä¸‹é¢çš„å†…å®¹\nlocation / &#123;    add_header Access-Control-Allow-Origin *;    add_header Access-Control-Allow-Methods &#x27;GET, POST, OPTIONS&#x27;;    add_header Access-Control-Allow-Headers &#x27;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#x27;;    if ($request_method = &#x27;OPTIONS&#x27;) &#123;        return 204;    &#125;&#125;\n\nç°åœ¨å°±OKäº†ï¼Œè¯·æ±‚æˆåŠŸ\n\nè¯·å¿½ç•¥æˆ‘è¿™çƒ‚çš„å¾ˆçš„å‰ç«¯é¡µé¢ã€‚\n3.å‚è€ƒNginxé…ç½®è·¨åŸŸè¯·æ±‚ Access-Control-Allow-Origin *_nginx access-control-allow-origin å¤šåŸŸå-CSDNåšå®¢\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","nginx"]},{"title":"ã€Artalkã€‘åœ¨wiki jsç«™ç‚¹ä¸Šä½¿ç”¨Artalkè¯„è®ºç³»ç»Ÿ","url":"/posts/3908173775/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•åœ¨wiki jsç«™ç‚¹ä¸Šä½¿ç”¨artalkè¯„è®ºç³»ç»Ÿ\n\n\n[TOC]\n1.ä»‹ç»1.1 wiki js\nhttps://github.com/requarks/wiki/\n\nwiki jsæ˜¯ä¸€ä¸ªå¼€æºçš„wikiç«™ç‚¹ï¼Œå¯ä»¥åœ¨çº¿ç¼–è¾‘é¡µé¢ã€‚\né¡µé¢ä»¥markdownç¼–è¾‘ï¼ŒåŒæ—¶æ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼ï¼›å› ä¸ºå…¶ç”¨gitæ¥ç®¡ç†æäº¤å†å²ï¼Œä¸”åœ¨çº¿ç¼–è¾‘ä¸éœ€è¦ç”¨æˆ·çŸ¥é“å¦‚ä½•æ“ä½œgitï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šäººåä½œæ’°å†™æ–‡æ¡£\n\nå¦‚æœä½ åªæ˜¯æƒ³è¦ä¸€ä¸ªåšå®¢ç«™ç‚¹ï¼Œæ²¡æœ‰å¤šäººåä½œéœ€æ±‚ï¼Œé‚£ä¹ˆhexoä¼šæ›´åˆé€‚æ‚¨\n\nå…±äº«æ–‡æ¡£ï¼ˆå¦‚é‡‘å±±æ–‡æ¡£ï¼‰çš„æäº¤å†å²å¤§å¤šæ•°éƒ½ä¸å¤Ÿè¯¦ç»†ï¼Œè™½ç„¶æœ‰æ’å…¥/åˆ é™¤å†å²ï¼Œä½†æ˜¯å…¶æ²¡æœ‰æ ‡æ˜ä¸Šä¸‹æ–‡ï¼Œä½ éœ€è¦çŒœä»–æ˜¯åœ¨æ–‡æ¡£çš„å•¥åœ°æ–¹æ”¹äº†ä¸œè¥¿ï¼Œéå¸¸ä¸æ–¹ä¾¿ï¼\ngitæ˜¯ä¸€ä¸ªç‰ˆæœ¬ç®¡ç†è½¯ä»¶ï¼Œèƒ½æ¸…æ¥šåœ°çŸ¥é“xxç”¨æˆ·ä¿®æ”¹äº†xxæ–‡æ¡£çš„xxè¡Œï¼Œå¹¶èƒ½çœ‹åˆ°ä¿®æ”¹ä¹‹å‰å’Œä¿®æ”¹ä¹‹åçš„æäº¤å¯¹æ¯”ã€‚è¿™éƒ¨åˆ†å°±ä¸èµ˜è¿°äº†\nwiki jsè¿˜æœ‰å¾ˆæ£’çš„ä¸€ç‚¹å°±æ˜¯ï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªgitä»“åº“ä½œä¸ºæ–‡æ¡£çš„å¤‡ä»½ï¼Œå…¶ä¼šå®šæ—¶æŠŠæ•´ä¸ªç«™ç‚¹çš„æ‰€æœ‰é¡µé¢ï¼ˆåŒ…æ‹¬å›¾ç‰‡ï¼‰éƒ½ä¸Šä¼ åˆ°è¿™ä¸ªgitä»“åº“é‡Œé¢ã€‚å³ä¾¿ç«™ç‚¹å› ä¸ºæŸäº›åŸå› å‡ºé—®é¢˜äº†ï¼Œæˆ‘ä»¬è¿˜æœ‰gitä»“åº“çš„å¤‡ä»½ğŸ˜\n\nwiki jsçš„å®‰è£…å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œå»ºè®®ç”¨dockeréƒ¨ç½²ï¼Œæ–¹ä¾¿çš„å¾ˆï¼Œç›´æ¥å¯¹ç€æ•²å‘½ä»¤å°±è¡Œäº†ã€‚è¿›å…¥ç³»ç»Ÿåˆ›å»ºç®¡ç†å‘˜è´¦æˆ·åï¼Œå¯ä»¥åœ¨è®¾ç½®çš„localé‡Œé¢æ‰¾åˆ°è¯­è¨€é€‰æ‹©ï¼Œä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…å³å¯æ”¹æˆä¸­æ–‡é¡µé¢ï¼\n\n\nWik jsè‡ªå¸¦äº†è¯„è®ºç³»ç»Ÿï¼Œä¹Ÿæ”¯æŒmarkdownè¯„è®ºï¼Œä½†æ˜¯å®ƒè¿æœ€åŸºç¡€çš„å›å¤è¯„è®ºéƒ½ä¸æ”¯æŒï¼Œå®åœ¨æ˜¯æœ‰äº›æ‰æ€¥ï¼Œæ‰€ä»¥æ‰éœ€è¦é…ç½®ä¸€ä¸‹artalkæ¥ä½œä¸ºè¯„è®ºç³»ç»Ÿ\n1.2 artalk\nhttps://artalk.js.org/\n\nartalkåŒæ ·æ˜¯ä¸€ä¸ªå¼€æºçš„è¯„è®ºç³»ç»Ÿï¼Œä½œè€…å†™v1çš„æ—¶å€™è¿˜æ˜¯ä¸€åé«˜ä¸­ç”Ÿï¼ˆäººæ¯”äººæ°”æ­»äººï¼Œæˆ‘å¤ªèœäº†ï¼‰\nå’³å’³ï¼Œè¿™ä¸æ˜¯é‡ç‚¹ï¼\n\nartalkæ”¯æŒmarkdownå‘é€è¯„è®ºï¼Œæ”¯æŒå‘é€è¡¨æƒ…ï¼Œè¿˜æ”¯æŒä¸Šä¼ å›¾ç‰‡ï¼ä½œä¸ºwikijsçš„è¯„è®ºç³»ç»Ÿå†åˆé€‚ä¸è¿‡äº†~\nemmï¼Œå…¶å®è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŸå› ï¼Œé‚£å°±æ˜¯wiki jsç›®å‰æ”¯æŒçš„3ä¸ªç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œä¼¼ä¹åªæœ‰artalkæ˜¯å…è´¹çš„ğŸ˜¥\n\n2.å®‰è£…artalkåç«¯2.1 docker-composeå®‰è£…åŸºæœ¬å®‰è£…æ–¹å¼å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œä¸ªäººæ›´åŠ æ¨èç”¨docker composeéƒ¨ç½²\n\nhttps://artalk.js.org/guide/deploy.html#docker-compose-%E9%83%A8%E7%BD%B2\n\nåˆšå¼€å§‹æˆ‘æ‹‰å–é•œåƒçš„æ—¶å€™ï¼Œä¸€ç›´å‡ºç°505é”™è¯¯ï¼ˆæ·»åŠ äº†é•œåƒæºï¼‰åç»­åœ¨é•œåƒåé¢åŠ ä¸Šæœ€æ–°çš„ç‰ˆæœ¬å·æ‰æ­£å¸¸æ‹‰å–äº†é•œåƒ\nversion: &quot;3.5&quot;services:  artalk:    container_name: artalk-go    image: artalk/artalk-go:2.3.0    ports:      - 8080:23366    volumes:      - ./data:/data\n\nåˆ›å»ºå¥½docker-compose.yamlæ–‡æ¡£åï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œ\ndocker-compose up -d\n\næŸ¥çœ‹ä½ æœåŠ¡å™¨çš„8080ç«¯å£ï¼ˆè®°å¾—åœ¨äº‘æœåŠ¡å™¨é˜²ç«å¢™é‡Œé¢å¼€æ”¾ç«¯å£ï¼‰å¦‚æœèƒ½æ‰“å¼€ä¸‹é¢çš„åç«¯é¡µé¢ï¼Œé‚£å°±æ˜¯okäº†\n\n2.2 å¼€æ”¾ç®¡ç†å‘˜è´¦æˆ·é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜è´¦æˆ·æ˜¯å…³é—­çš„ï¼Œæˆ‘ä»¬éœ€è¦å…³é—­å®¹å™¨åï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å¼€æ”¾ä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·\ndocker-compose stop\n\ncdè¿›å…¥dataç›®å½•ï¼ˆè¿™é‡Œçš„dataç›®å½•æ˜¯ä½ åœ¨docker composeä¸­æ˜ å°„çš„æœ¬åœ°è·¯å¾„ï¼Œé»˜è®¤åº”è¯¥å°±åœ¨docker-compose.yamlæ‰€åœ¨è·¯å¾„ä¸‹ä¼šå‡ºç°ä¸€ä¸ªdataæ–‡ä»¶å¤¹ï¼‰\nå¯ä»¥çœ‹åˆ°ä¸€ä¸ªartalk-go.ymlæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„å°±æ˜¯è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾åˆ°ä¸‹é¢çš„å­—æ®µï¼Œå¯¹åº”ä¿®æ”¹åä¿å­˜\n\nå…³äºå¯†ç çš„éƒ¨åˆ†å‚è€ƒæ–‡æ¡£ https://artalk.js.org/guide/backend/multi-site.html#%E7%AE%A1%E7%90%86%E5%91%98%E9%85%8D%E7%BD%AE\n\n\ndocker-compose up -d\n\né‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç”¨åˆšåˆšè®¾ç½®å¥½çš„è´¦æˆ·ç™»å½•ï¼›åå°çš„ç®¡ç†é¡µé¢å¯ä»¥ä¿®æ”¹å¾ˆå¤šé…ç½®ï¼Œæˆ‘ä»¬ä¸éœ€è¦åŠ¨é…ç½®æ–‡ä»¶äº†ï¼\n2.3 é…ç½®sslwiki jså¿…é¡»è¦ç”¨sslå’Œhttpsæ‰èƒ½æ­£å¸¸ä½¿ç”¨artalkï¼Œæˆ‘å°è¯•äº†å…¬ç½‘IP:ç«¯å£çš„æ–¹å¼ï¼Œå®ƒè®¤ä¸å‡ºæ¥ğŸ˜¥\næ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨artalkçš„åå°é…ç½®ä¸€ä¸‹sslï¼ˆè®°å¾—ç‚¹ç•Œé¢å³ä¸‹è§’çš„åº”ç”¨ï¼‰\n\nå†æ¬¡ç”¨åŸŸåæ‰“å¼€é¡µé¢ï¼Œæ­¤æ—¶å°±æ²¡æœ‰æŠ¥é”™äº†\n\nå¤‡æ³¨ï¼šæˆ‘æ˜¯ç”¨frpç©¿é€åˆ°é¦™æ¸¯æ¥æ˜ å°„åŸŸåçš„ï¼Œæ‰€ä»¥sslè¿˜éœ€è¦åœ¨frpé‡Œé¢è®¾ç½®ä¸€ä¸‹ï¼Œè¯·æ ¹æ®æ‚¨è‡ªå·±çš„æƒ…å†µé…ç½®sslï¼\n2.4 å›¾ç‰‡ä¸Šä¼ å¦‚æœæƒ³è®©ç”¨æˆ·èƒ½ä¸Šä¼ å›¾ç‰‡ï¼Œè¿˜éœ€è¦åšä¸€äº›å°æ“ä½œï¼›é¦–å…ˆæ˜¯å¯ç”¨å›¾ç‰‡ä¸Šä¼ ï¼ˆè®°å¾—ç‚¹ç•Œé¢å³ä¸‹è§’çš„åº”ç”¨ï¼‰\n\nç„¶åéœ€è¦å»åå°åœ¨dataç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªartalk-imgæ–‡ä»¶å¤¹ï¼ˆæˆ‘åˆšå¼€å§‹æ²¡æœ‰åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œæ²¡æœ‰åŠæ³•æ­£ç¡®ä¸Šä¼ å›¾ç‰‡ï¼‰\nå›åˆ°wiki jsçš„ç•Œé¢æµ‹è¯•ä¸€ä¸‹ï¼Œå›¾ç‰‡ä¸Šä¼ æˆåŠŸ\n\n2.5 é‚®ç®±æé†’é¿å…æœ‰è€å“¥ä¹‹å‰æ²¡æœ‰ç”¨è¿‡stmpæœåŠ¡ï¼Œè¿™é‡Œä¹Ÿç®€å•è¯´ä¸€ä¸‹å§\nå¯ä»¥æ³¨å†Œä¸€ä¸ªç½‘æ˜“çš„163æˆ–è€…126é‚®ç®±ï¼Œæ‰¾åˆ°è®¾ç½®é‡Œé¢ä¼šæœ‰ä¸€ä¸ªstmp\n\nè¿›å…¥åï¼Œå…ˆæŠŠè¿™ä¸¤ä¸ªæœåŠ¡éƒ½å¼€å¯\n\nå†ç‚¹å‡»è¿™é‡Œæ–°å¢æˆæƒå¯†ç ï¼Œä¼šå¼¹å‡ºæ¥ä¸€ä¸ªäºŒç»´ç ç è®©ä½ ç”¨æ‰‹æœºç»™ä¸€ä¸ªå·ç å‘ä¸ªçŸ­ä¿¡ï¼Œç„¶åå°±ä¼šå‡ºç°ä¸€ä¸ªæˆæƒç ï¼Œè®°ä½è¿™ä¸ªæˆæƒç \n\nå›åˆ°artalkçš„åå°è¿›è¡Œå¦‚ä¸‹é…ç½®\n\nè¿™æ ·å°±OKäº†ï¼Œæ‰¾æœ‹å‹å‘æ¡è¯„è®ºå¹¶å›å¤ï¼Œæµ‹è¯•ä¸€ä¸‹é‚®ç®±æé†’èƒ½å¦æ­£å¸¸ä½¿ç”¨å§ï¼\n3.wiki jsä½¿ç”¨è¿™éƒ¨åˆ†å°±å¾ˆå‚»ç“œäº†ï¼Œç›´æ¥ç”¨èµ·æ¥å°±å¯ä»¥äº†\n3.1 artalkåˆ›å»ºç«™ç‚¹artalkè™½ç„¶ä¼šæœ‰ä¸€ä¸ªé»˜è®¤ç«™ç‚¹ï¼Œä½†æ˜¯é‚£ä¸ªwiki jsä¸ä¸€å®šèƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸ªç«™ç‚¹\n\néœ€è¦å¡«å†™ç«™ç‚¹åç§°å’Œurlï¼Œåç§°å»ºè®®ç”¨è‹±æ–‡ï¼Œé¿å…ç¼–ç é—®é¢˜\n\nç„¶åä¸ºäº†é¿å…é”™è¯¯ï¼Œè¿˜å¯ä»¥åœ¨è®¾ç½®é‡Œé¢æ·»åŠ ä¸€ä¸‹å¯ä¿¡åŸŸå\n\n3.2 wiki jsä½¿ç”¨è¿›å…¥wiki jsçš„ç®¡ç†é¡µï¼Œæ‰¾åˆ°è¯„è®ºï¼Œé€‰æ‹©artalk\n\nå¡«å…¥åŸŸåå’Œåœ¨artalké‡Œé¢é…ç½®çš„ç«™ç‚¹åå­—åï¼Œç‚¹å‡»åº”ç”¨\nå›åˆ°wikijsçš„é¡µé¢ï¼Œæ­¤æ—¶å°±å¯ä»¥çœ‹åˆ°artalkçš„ç•Œé¢å•¦ï¼\n\n3.3 bugæˆ‘ä½¿ç”¨çš„æ—¶å€™é‡åˆ°äº†è¯„è®ºæ¡†é£åˆ°é¡¶æ ä¸Šé¢çš„bugï¼Œå·²ç»åœ¨wikiçš„ä»“åº“ä¸­å‘è¯„è®ºäº†\n\nhttps://github.com/requarks/wiki/discussions/6015\nå¸Œæœ›èƒ½å°½å¿«ä¿®å¤è¿™ä¸ªbug~\næœªå®Œå¾…ç»­åç»­æœ‰å•¥é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨è¿™é‡Œè¡¥å……çš„~\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Docker","wikijs"]},{"title":"ã€C++ã€‘æ¨¡æ¿ï¼šäº†è§£æ³›å‹ç¼–ç¨‹","url":"/posts/2940029419/","content":"æœ¬ç¯‡æ˜¯C++æ¨¡æ¿å­¦ä¹ çš„ä¸€äº›ç¬”è®°\n\n\n[TOC]\n1.äº†è§£æ³›å‹ç¼–ç¨‹æ³›å‹ç¼–ç¨‹ï¼Œæ•…å¦‚å…¶åï¼Œæ˜¯ä¸€ä¸ªæ³›åŒ–çš„ç¼–ç¨‹æ–¹å¼ã€‚å…¶å®ç°åŸç†ä¸ºç¨‹åºå‘˜ç¼–å†™ä¸€ä¸ªå‡½æ•°&#x2F;ç±»çš„ä»£ç ç¤ºä¾‹ï¼Œè®©ç¼–è¯‘å™¨å»å¡«è¡¥å‡ºä¸åŒçš„å‡½æ•°å®ç°\nå°±å¥½æ¯”æ´»å­—å°åˆ·æœ¯ï¼Œå¯ä»¥çµæ´»è°ƒæ•´å°åˆ·çš„æ¿å—å’Œå†…å®¹ï¼Œæ¯”åªèƒ½å›ºå®šå°åˆ·æŸä¸€ä¸ªå†…å®¹çš„é›•ç‰ˆå°åˆ·æœ¯æ•ˆç‡æ›´é«˜ï¼Œä¹Ÿè®©å°åˆ·æœ¯ç”±æ­¤å¾—åˆ°äº†æ›´å¹¿æ³›çš„åº”ç”¨ã€‚\n\nåœ¨C++ä¸­ï¼Œå‡½æ•°é‡è½½å’Œæ¨¡æ¿çš„å‡ºç°ï¼Œè®©æ³›å‹ç¼–ç¨‹å¾—åˆ°äº†å®é™…çš„åº”ç”¨ã€‚å…¶ä¸­æ¨¡æ¿ï¼Œå°±æ˜¯ç±»ä¼¼æ´»å­—å°åˆ·æœ¯ä¸€æ ·çš„å­˜åœ¨ã€‚\næˆ‘ä»¬å†™ä¸€ä¸ªæ¨¡æ¿ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬æŒ‰ç…§æˆ‘ä»¬å†™çš„æ¨¡æ¿çš„æ–¹å¼ï¼Œå®ä¾‹åŒ–æˆä¸åŒçš„å‡½æ•°ã€‚ç›¸å½“äºæ›¿ä»£äº†ä¸€éƒ¨åˆ†æ“ä½œï¼ŒèŠ‚çœäº†ä»£ç é‡ã€‚\n2.å‡½æ•°æ¨¡æ¿å…«å…«äº†é‚£ä¹ˆå¤šæ²¡ç”¨çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å‡½æ•°æ¨¡æ¿çš„è¯­æ³•å®ç°å§\n2.1 ç®€å•ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„äº¤æ¢å‡½æ•°çš„ä¾‹å­ï¼Œé€šè¿‡æ ‡æ˜æ¨¡æ¿å‚æ•°Tï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨è¯†åˆ«å‡½æ•°ä¼ å‚ï¼Œæ¨æµ‹å¹¶å®ä¾‹åŒ–å‡ºä¸åŒçš„å‡½æ•°ï¼Œä¾›ç¨‹åºæ¥è°ƒç”¨ã€‚\ntemplate&lt;typename T&gt;void Swap(T&amp; left,T&amp; right)&#123;    T temp = left;    left = right;    right = temp;&#125;\n\nå…¶ä¸­ï¼Œtypenameæ˜¯å®šä¹‰æ¨¡æ¿çš„å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨classæ¥æ›¿ä»£ï¼Œä½†ä¸èƒ½ä½¿ç”¨struct\n\næ®æˆ‘æŸ¥è¯¢åˆ°çš„èµ„æ–™ï¼Œåœ¨æ¨¡æ¿çš„å®šä¹‰ä¸­ä½¿ç”¨typename/classæ˜¯æ²¡æœ‰åŒºåˆ«çš„\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æˆåŠŸè°ƒç”¨äº†Swapå‡½æ•°ï¼ŒæˆåŠŸäº¤æ¢äº†intç±»å‹å’Œdoubleç±»å‹ï¼›\n2.2 å¤šä¸ªæ¨¡æ¿å‚æ•°å¦‚æœæˆ‘ä»¬å°è¯•æŠŠintå’ŒdoubleåŒæ—¶ä¼ å‚ç»™è¿™ä¸ªå‡½æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\n\nç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œè¡¨ç¤ºæ¨¡æ¿å‚æ•°Tä¸æ˜ç¡®ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°æ¨¡æ¿é‡Œé¢å¯¹ä¸¤ä¸ªå‚æ•°çš„è¯´æ˜éƒ½æ˜¯Tï¼Œç¼–è¯‘å™¨å°±è®¤ä¸ºè¿™ä¸¤ä¸ªå‚æ•°å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œè€Œä¼ å…¥çš„intå’Œdoubleå¹¶ä¸ç›¸åŒï¼Œäºæ˜¯å°±æŠ¥é”™äº†ã€‚\nè¿™æ—¶å€™æˆ‘ä»¬æœ‰å‡ ç§è§£å†³æ–¹æ³•ï¼š\n\né¦–å…ˆæ˜¯å°†doubleå¼ºè½¬ä¸ºintï¼ˆåè¿‡æ¥äº¦å¯ï¼‰\n\n\nä½ ä¼šå‘ç°è¿˜æ˜¯ä¸è¡Œï¼Œé‚£æ˜¯å› ä¸ºå¼ºè½¬å¹¶ä¸æ”¯æŒç”¨doubleå¼•ç”¨intã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠå‡½æ•°ä¼ å‚ä¸­çš„å¼•ç”¨å»æ‰ï¼Œå³å¯æ­£å¸¸è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼ˆæš‚ä¸”ä¸æä¼ å¼•ç”¨å’Œä¼ å€¼çš„åŒºåˆ«ï¼‰\n\n\nä½¿ç”¨å¤šä¸ªæ¨¡æ¿å‚æ•°\n\nå’Œå‡½æ•°ä¼ å‚ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ªæ¨¡æ¿å‚æ•°\nåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä½¿ç”¨typeidå…³é”®å­—æ¥æ‰“å°æ¨¡æ¿å‚æ•°T1å’ŒT2çš„ç±»å‹ã€‚\n\nä½¿ç”¨typeidéœ€è¦åŒ…å«å¤´æ–‡ä»¶#include &lt;typeinfo&gt;\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šå‡½æ•°åœ¨è°ƒç”¨è¿™ä¸ªæ¨¡æ¿çš„æ—¶å€™ï¼Œå·²ç»å®ä¾‹åŒ–äº†è¿™ä¸ªå‡½æ•°ï¼ˆå³æ›¿æ¢æ¨¡æ¿å‚æ•°ä¸ºæ­£ç¡®å‚æ•°ç±»å‹ï¼‰è¿™æ—¶å€™åœ¨åå°å¤„ç†çš„æ—¶å€™ï¼Œå…¶å®Showå‡½æ•°å·²ç»å®ä¾‹åŒ–ä¸ºäº†ä¸‹é¢è¿™ä¸ªæ ·å­\nvoid Show(int left, double right)&#123;    cout &lt;&lt; typeid(left).name() &lt;&lt; endl;    cout &lt;&lt; typeid(right).name() &lt;&lt; endl;&#125;\n\n2.3 æ¨¡æ¿å®ä¾‹åŒ–ä¸Šé¢çš„æ–¹å¼ï¼Œæ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å®ä¾‹åŒ–æ¨¡æ¿å‚æ•°ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±æŒ‡å®šå®ä¾‹åŒ–ä¸ºä»€ä¹ˆç±»å‹\n\nåˆ©ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢\nä½¿ç”¨&lt;int&gt;ç›´æ¥æŒ‡å®šå®ä¾‹åŒ–ä¸ºintç±»å‹ï¼ˆæ˜¾å¼å®ä¾‹åŒ–ï¼‰\n\n\nä½¿ç”¨ç¬¬äºŒç§æ–¹å¼çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå¯¹å¦å¤–ä¸€ä¸ªä¸åŒ¹é…çš„å‚æ•°è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚å¦‚æœè½¬æ¢ä¸æˆåŠŸï¼Œæˆ–è€…è¯¥å‚æ•°ä¸æ”¯æŒè½¬æ¢ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚\nå¦å¤–æ³¨æ„çš„æ˜¯ï¼Œå‡½æ•°æ¨¡æ¿å‚æ•°TåŒæ ·å¯ä»¥ç”¨æ¥ä½œä¸ºè¿”å›å€¼ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡è¿”å›å€¼æ¥æ¨æ–­å‚æ•°Tçš„ç±»å‹ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å°±éœ€è¦ç›´æ¥&lt;int&gt;æŒ‡å®šæ¨¡æ¿å‚æ•°Tï¼Œè€Œä¸èƒ½å†™ä¸€ä¸ª int* ptr=test(10)ï¼Œè®©ç¼–è¯‘å™¨é€šè¿‡ â€œè¿”å›å€¼æ˜¯int*æ¥æ”¶çš„ï¼Œæ‰€ä»¥å‡½æ•°æ¨¡æ¿å‚æ•°Tæ˜¯intâ€æ¥æ¨æ–­ã€‚\ntemplate&lt;typename T&gt;T* test(int num)&#123;\treturn new T[num];&#125;int main()&#123;    int* p = test(10);//é”™è¯¯    int* p = test&lt;int&gt;(10);//æ­£ç¡®    return 0;&#125;\n\nå‡½æ•°æ¨¡æ¿æ”¯æŒç»™äºˆç±»å‹ç¼ºçœå€¼å½“ä¸€ä¸ªå‚æ•°ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå‡½æ•°æ¨¡æ¿çš„å‚æ•°æ˜¯æ”¯æŒç»™äºˆç¼ºçœå€¼çš„\n// ä¼ é€’ä¸€ä¸ªç±»å‹åšä¸ºç¼ºçœå€¼template&lt;typename T=char&gt;T* test(int num)&#123;\treturn new T[num];&#125;\n\næ¯”å¦‚è¿™æ ·ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰ç›´æ¥æŒ‡å®šçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šå°†Tä½œä¸ºcharç±»å‹ï¼Œè¿”å›ä¸€ä¸ªnumå¤§å°çš„charï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰çš„ç©ºé—´\næ³¨æ„ï¼šå½“æœ‰å¤šä¸ªæ¨¡æ¿å‚æ•°æ—¶ï¼Œç¼ºçœå€¼éœ€è¦ä»å³å¾€å·¦ç»™ï¼Œå¦åˆ™ä¼šå‡ºç°ç±»å‹åŒ¹é…ä¸ä¸Šè€Œæ— æ³•è°ƒç”¨çš„é—®é¢˜ï¼›è¿™ç‚¹å’Œå‡½æ•°å‚æ•°ç¼ºçœå€¼ç›¸åŒã€‚\nå‡½æ•°æ¨¡æ¿ä¸­å‡½æ•°çš„ä¼ å‚ä¹Ÿæ”¯æŒç¼ºçœå€¼template&lt;typename T1&gt;void Add(T1 left, T1 right=10)&#123;    cout &lt;&lt; &quot;Add temp &quot;&lt;&lt; typeid(left).name() &lt;&lt; &quot; &quot; &lt;&lt; typeid(right).name() &lt;&lt; endl;    cout &lt;&lt; left + right &lt;&lt; endl &lt;&lt; endl;&#125;int main()&#123;    int a=1;    Add(a);&#125;\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæ­£ç¡®è°ƒç”¨è¯¥å‡½æ•°æ¨¡æ¿\n\n2.4 æ¨¡æ¿å’Œæ™®é€šå‡½æ•°åŒæ—¶å­˜åœ¨ï¼ˆé‡è½½ï¼‰ä»¥Addå‡½æ•°ä¸ºä¾‹ï¼Œåœ¨å‡½æ•°æ¨¡æ¿å­˜åœ¨çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªintç±»å‹çš„addå‡½æ•°ã€‚è¿™éƒ½å½’åŠŸäºå‡½æ•°é‡è½½çš„å­˜åœ¨ã€‚\nåŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨&lt;int&gt;æ¥æŒ‡å®šå‡½æ•°æ¨¡æ¿é‡è½½ä¸ºå·²å­˜åœ¨çš„Addå‡½æ•°ã€‚å› ä¸ºæœ¬è´¨ä¸Šè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯ä¸åŒçš„ï¼Œå¹¶ä¸ä¼šå†²çªã€‚\n\nå‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»è°ƒç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°ã€‚å½“å‚æ•°å’Œå·²å­˜åœ¨çš„å‡½æ•°ä¸åŒ¹é…æ—¶ï¼Œæ‰ä¼šè°ƒç”¨å‡½æ•°æ¨¡æ¿ï¼›\nè€Œæœ‰&lt;int&gt;ç›´æ¥æŒ‡å®šäº†æ¨¡æ¿å‚æ•°ç±»å‹çš„å‡½æ•°è°ƒç”¨ï¼Œè‡ªç„¶ä¹Ÿæ˜¯ä¼šè°ƒç”¨å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–å‡ºæ¥çš„å‡½æ•°ã€‚\n2.5 å‡½æ•°æ¨¡æ¿ä¸æ”¯æŒå®šä¹‰å’Œå£°æ˜åˆ†ç¦»ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šåœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å‡½æ•°ï¼Œåœ¨å¦å¤–ä¸€ä¸ªæºæ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°ã€‚\nä½†æ˜¯æ¨¡æ¿æ˜¯ä¸æ”¯æŒè¿™ä¹ˆåšçš„ï¼ä¸¥è°¨æ¥è¯´ï¼Œæ˜¯ä¸æ”¯æŒåœ¨ä¸åŒæ–‡ä»¶ä¸­å£°æ˜å’Œå®šä¹‰åˆ†ç¦»ï¼ŒåŒä¸€ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥çš„ã€‚\nåˆ†äº†ä¸¤ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ é“¾æ¥é”™è¯¯ï¼Œæ¯”å¦‚å¦‚ä¸‹VS2019çš„æŠ¥é”™\nerror LNK2019:æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å·â€¦â€¦\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å‡½æ•°æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ã€‚åœ¨éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ï¼Œä¼šä½¿ç”¨.hppåç¼€ï¼Œæ¥è¡¨ç¤ºè¿™ä¸ªå¤´æ–‡ä»¶æ˜¯åŒ…å«äº†å‡½æ•°å®šä¹‰çš„ï¼ˆå³.h å’Œ .cppçš„é›†åˆä½“ï¼‰ã€‚\n\nc&#x2F;cpp ä¸­å¯¹å¤´æ–‡ä»¶çš„åŒ…å«å¹¶æ²¡æœ‰ç¡¬æ€§çš„åç¼€è¦æ±‚ï¼Œæˆ‘ä»¬è®¾ç½®ä¸º .h/.hpp åªæ˜¯ä¸€ä¸ªçº¦å®šã€‚\n\néœ€è¦æ³¨æ„ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç¡¬æ€§è¦æ±‚ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨.hï¼Œå¹¶å°†å£°æ˜å’Œå®šä¹‰æ”¾å…¥å…¶ä¸­ã€‚\n\næ¨¡æ¿ä¸ºä»€ä¹ˆä¸æ”¯æŒå®šä¹‰å’Œå£°æ˜åˆ†ç¦»ï¼Ÿ\n\nå› ä¸ºå•ç‹¬çš„.h/.hppå£°æ˜ä¼šåœ¨æºæ–‡ä»¶é¡¶éƒ¨è¢«ç¼–è¯‘å™¨å±•å¼€ï¼Œè€Œæ­¤æ—¶å‡½æ•°æ¨¡æ¿å°±ä¼šå¼€å§‹æ­£å¸¸æ¨æ¼”å‚æ•°ï¼Œå¹¶call å‡½æ•°åï¼›\nä½†ç¼–è¯‘å™¨å¹¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªå‡½æ•°åæ‰€å¯¹åº”å‡½æ•°çš„å…·ä½“å®ç°ï¼Œè€Œåœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆå®ç°åœ¨å¦å¤–ä¸€ä¸ªå‡½æ•°é‡Œé¢ï¼‰ï¼Œç¼–è¯‘å™¨åˆä¸çŸ¥é“ä½ è¿™ä¸ªå‡½æ•°æ¨¡æ¿çš„å£°æ˜éœ€è¦å®ä¾‹åŒ–æˆä»€ä¹ˆç±»å‹çš„å‡½æ•°ï¼Œé‚£ä¹Ÿæ²¡æœ‰åŠæ³•æˆåŠŸè¿›è¡Œå®ä¾‹åŒ–ã€‚\næœ€ç»ˆå°±å¯¼è‡´calläº†ä¸€ä¸ªæ²¡æœ‰åœ°å€çš„å‡½æ•°ï¼Œé“¾æ¥çš„æ—¶å€™è‚¯å®šå°±æ‰¾ä¸åˆ°å‡½æ•°çš„åœ°å€ï¼Œäº§ç”Ÿäº†ç¬¦å·è¡¨çš„é“¾æ¥é”™è¯¯ï¼›\n\næœ‰æ— è§£å†³åŠæ³•ï¼Ÿ\n\nå…¶å®æ˜¯æœ‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿å‡½æ•°å®šä¹‰çš„.cppä¸­å¯¹æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„å‡½æ•°è¿›è¡Œæ˜¾å¼å®ä¾‹åŒ–æŒ‡å®š.\n //å¤´æ–‡ä»¶//å£°æ˜template&lt;typename T1&gt;void Add(T1 left, T1 right);//æºæ–‡ä»¶//å®šä¹‰//templateä¸èƒ½è¢«çœç•¥ï¼æ¯æ¬¡éƒ½é¡»å†™ä¸Štemplate&lt;typename T1&gt;void Add(T1 left, T1 right)&#123;    cout &lt;&lt; left + right &lt;&lt; endl &lt;&lt; endl;&#125;//åœ¨æºæ–‡ä»¶ä¸­æ˜¾å¼å®ä¾‹åŒ–//è¿™å°±ç›¸å½“äºå‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸¤ä¸ªç¢—éœ€è¦è£…ä»€ä¹ˆèœ//ç¼–è¯‘å™¨æ‰èƒ½æ­£ç¡®å¸®æˆ‘ä»¬å®ä¾‹åŒ–è¿™ä¸ªå‡½æ•°ï¼Œå¹¶æˆåŠŸç¼–è¯‘é“¾æ¥templatevoid Add&lt;int&gt;(int left, int right);templatevoid Add&lt;double&gt;(double left, double right);\n\næ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ–éœ€è¦å¯¹æˆ‘ä»¬è¦ç”¨çš„æ‰€æœ‰ç±»å‹çš„å‡½æ•°æ¨¡æ¿è¿›è¡Œå®ä¾‹åŒ–ï¼Œæ¯”å¦‚ä½ éœ€è¦ç”¨doubleç±»å‹ï¼Œåªæ˜¾ç¤ºå®ä¾‹åŒ–äº†intç±»å‹æ˜¯ä¸è¡Œçš„ï¼Œä¾æ—§ä¼šæŠ¥é”™ã€‚\nè¿™å°±å¥½æ¯”ä½ åªå‘Šè¯‰å¨å­åš10ä¸ªäººçš„é¥­ï¼Œç»“æœæ¥äº†20ä¸ªäººã€‚é‚£å‰©ä¸‹çš„10ä¸ªäººè‚¯å®šæ˜¯åƒä¸ä¸Šé¥­çš„ã€‚å› ä¸ºä½ æ²¡æœ‰å‘Šè¯‰å¨å­ï¼ˆç¼–è¯‘å™¨ï¼‰åˆ°åº•è¦æ¥å¤šå°‘ä¸ªäººå¹²é¥­ã€‚\nè¿™æ ·æ„Ÿè§‰éå¸¸å¤šä½™â€¦â€¦å¯¹å§ï¼Ÿå†™å¤šäº†è¿˜å®¹æ˜“çœ¼èŠ±ã€‚æ‰€ä»¥è¿˜æ˜¯è€è€å®å®æŠŠå£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶é‡Œé¢å§ï¼\n3.ç±»æ¨¡æ¿ç±»æ¨¡æ¿çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼Œè¿™é‡Œä½œä¸ºä¸€ä¸ªå°åŒºåˆ†ï¼Œæˆ‘ç”¨classæ¥å½“ä½œæ¨¡æ¿å‚æ•°åã€‚å®é™…ä¸Štypenameä¹Ÿæ˜¯å¯ä»¥çš„\ntemplate&lt;class T1, class T2, ...&gt;class ç±»æ¨¡æ¿å&#123;// ç±»å†…æˆå‘˜å®šä¹‰&#125;;     \n\n3.1 ç®€å•ç¤ºä¾‹ä¸‹é¢ç”¨ä¸€ä¸ªéå¸¸ç®€å•çš„é¡ºåºè¡¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ç±»æ¨¡æ¿\ntemplate&lt;class T&gt;class List&#123;public:    List(int capacity = 10)        : _a(new T[capacity])        , _size(0)        , _capa(capacity)    &#123;&#125;     ~List();    T&amp; operator[](int pos)    &#123;        assert(pos &lt; _size);        return _a[pos];    &#125;private:    T* _a;    int _size;    int _capa;&#125;;//ç±»æ¨¡æ¿ä¸­å‡½æ•°æ”¾åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰æ—¶ï¼Œéœ€è¦åŠ æ¨¡æ¿å‚æ•°åˆ—è¡¨//è¿˜å¿…é¡»è¦æŒ‡å®šç±»çš„å£°æ˜ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸtemplate &lt;class T&gt;List&lt;T&gt;::~List()&#123;    delete[] _a;    _size = _capa = 0;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡æ˜¾å¼å®ä¾‹åŒ–ç±»æ¨¡æ¿çš„æ–¹å¼ï¼Œæˆ‘ä»¬æˆåŠŸè®©è¿™ä¸ªç±»æ¨¡æ¿å˜æˆäº†ä¸¤ä¸ªä¸åŒç±»å‹çš„é¡ºåºè¡¨\n\n3.2 æˆå‘˜å‡½æ•°å£°æ˜å’Œå®šä¹‰åˆ†ç¦»å…¶ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ææ„å‡½æ•°ï¼Œå£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„æ—¶å€™ï¼ˆåŒä¸€æ–‡ä»¶ï¼‰ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ä¹Ÿéœ€è¦åŠ ä¸Šæ¨¡æ¿å‚æ•°\n//ç±»æ¨¡æ¿ä¸­å‡½æ•°æ”¾åœ¨ç±»å¤–è¿›è¡Œå®šä¹‰æ—¶ï¼Œéœ€è¦åŠ æ¨¡æ¿å‚æ•°åˆ—è¡¨template &lt;class T&gt;List&lt;T&gt;::~List()&#123;    delete[] _a;    _size = _capa = 0;&#125;\n\nä¸ªäººè§‰å¾—è¿™æ ·ä¹Ÿéå¸¸éº»çƒ¦ï¼Œæ—¢ç„¶æ¨¡æ¿æœ€å¥½æ˜¯å£°æ˜å’Œå®šä¹‰æ”¾åœ¨åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£è¿˜ä¸å¦‚ç›´æ¥å°†ç±»çš„æˆå‘˜å‡½æ•°ç›´æ¥å®šä¹‰åˆ°ç±»å†…éƒ¨ã€‚å¤šçœäº‹ï¼\n\nå¦‚æœæ˜¯ç±»çš„å£°æ˜å’Œå®šä¹‰æ”¾åœ¨ä¸åŒæ–‡ä»¶ä¸­ï¼Œæ˜¾å¼å®ä¾‹åŒ–æ–¹å¼å¦‚ä¸‹\n\ntemplateclass List &lt;int&gt;;templateclass List &lt;double&gt;;\n\néœ€è¦ä»€ä¹ˆç±»å‹çš„ç±»ï¼Œå°±å¾—å®ä¾‹åŒ–è¿™ä¸ªç±»å‹ã€‚\n\nä»¥ä¸‹æ˜¯æ¨¡æ¿è¿›é˜¶çš„å†…å®¹ï¼Œæºç ä»“åº“  GITEE\n\n4.éç±»å‹æ¨¡æ¿å‚æ•°ä¸Šé¢æˆ‘ä»¬æ¥è§¦åˆ°çš„ï¼Œéƒ½æ˜¯ç±»å‹æ¨¡æ¿å‚æ•°ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æ¨¡æ¿å‚æ•°æ˜¯éç±»å‹æ¨¡æ¿å‚æ•°ã€‚\n\nç±»å‹æ¨¡æ¿å‚æ•°ï¼šç»™çš„æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªç±»å‹\néç±»å‹æ¨¡æ¿å‚æ•°ï¼šç»™çš„æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªå¸¸é‡\n\næ¯”å¦‚çœ‹çœ‹stlä¸­çš„arrayå®¹å™¨ï¼Œå®ƒçš„å£°æ˜æ˜¯ä¸‹é¢è¿™æ ·çš„\ntemplate &lt; class T, size_t N &gt; class array;\n\nå…¶ä¸­ç¬¬äºŒä¸ªå‚æ•° size_t Nå°±æ˜¯ä¸€ä¸ªéç±»å‹æ¨¡æ¿å‚æ•°\n4.1 ä»€ä¹ˆåœºæ™¯éœ€è¦éç±»å‹æ¨¡æ¿å‚æ•°ï¼Ÿç”¨ä¸€ä¸ªæ ˆæ¥ä½œä¸ºæ —å­ï¼Œä¸è€ƒè™‘åŠ¨æ€å†…å­˜ç®¡ç†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡defineä¸€ä¸ªæ ˆçš„ç©ºé—´å¤§å°ï¼Œæ¥å®ä¾‹åŒ–ä¸€ä¸ªintç±»å‹çš„æ ˆ\n#define STACK_SIZE 100// é™æ€æ ˆclass Stack1&#123;    int _st[STACK_SIZE];    int _top;&#125;;\n\nä¸ºäº†è®©è¿™ä¸ªæ ˆèƒ½è‡ªé€‚åº”çš„å®ä¾‹åŒ–å‡ºä¸åŒæˆå‘˜ç±»å‹çš„æ ˆï¼ŒC++æä¾›äº†ç±»å‹æ¨¡æ¿å‚æ•°\n#define STACK_SIZE 100// æ¨¡æ¿æ ˆtemplate &lt;class T&gt;class Stack2&#123;    T _st[STACK_SIZE];    int _top;&#125;;\n\nè¿™ä¸¤ä¸ªæ ˆå®ä¾‹åŒ–çš„æ–¹å¼æ˜¯ä¸‹é¢è¿™æ ·ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ ˆæ˜¯å·²ç»ç¡®å®šäº†æ˜¯intç±»å‹ï¼Œè€Œç¬¬äºŒä¸ªæ ˆå¯ä»¥è¢«å®ä¾‹åŒ–å‡ºä»»ä½•æˆ‘ä»¬æƒ³è¦çš„ç±»å‹ã€‚\nint main()&#123;    Stack1 st1;    Stack2&lt;int&gt; st2;    Stack2&lt;double&gt; st3;    return 0;&#125;\n\nä¸è¿‡ï¼Œå³ä¾¿å·²ç»æœ‰äº†æ¨¡æ¿å‚æ•°ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ²¡æœ‰åŠæ³•åšåˆ°ï¼Œè®©å…¶ä¸­ä¸€ä¸ªæ ˆæ˜¯100ä¸ªæˆå‘˜çš„ç©ºé—´ï¼Œå¦å¤–ä¸€ä¸ªæ ˆæ˜¯30çš„ç©ºé—´ï¼›è¿™æ˜¯å› ä¸ºç©ºé—´åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å·²ç»è¢«defineæ›¿æ¢äº†ï¼Œå¹¶å¼€è¾Ÿäº†å®šé•¿çš„ç©ºé—´ã€‚\nåŠ¨æ€å†…å­˜ç®¡ç†çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æ¥è§£å†³åˆ°åº•å®ä¾‹åŒ–å¤šå°‘ç©ºé—´çš„é—®é¢˜ã€‚ä½†ç°åœ¨å‡è®¾æˆ‘ä»¬éœ€è¦çš„å°±æ˜¯ä¸€ä¸ªå®šé•¿çš„æ ˆï¼Œé‚£ä¹ˆåŠ¨æ€å†…å­˜ç®¡ç†å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚\nè¿™æ—¶å€™ï¼Œéç±»å‹æ¨¡æ¿å‚æ•°å°±å‡ºåœºäº†ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡æ¿lä¼ é€’å‚æ•°ï¼Œæ¥ç¡®å®šæ ˆå†…ç©ºé—´çš„å¤§å°ï¼›\n// åŠ¨æ€æ ˆtemplate &lt;class T, size_t N&gt;class Stack3&#123;    T _st[N];    int _top;&#125;;\n\nè¿™å°±ç»™äº†æˆ‘ä»¬åœ¨ä½¿ç”¨æ¨¡æ¿å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ï¼Œå°†ä¸€äº›å‚æ•°åƒå‡½æ•°ä¼ å‚ä¸€æ ·æä¾›ç»™è¿™ä¸ªç±»ï¼Œä½œä¸ºå…¶å®ä¾‹åŒ–çš„åœ°åŸºçš„èƒ½åŠ›\nStack3&lt;int, 30&gt; st4;Stack3&lt;double, 100&gt; st5;\n\nç¼–è¯‘é€šè¿‡æ— æŠ¥é”™\ng++ test.cpp -o test -std=c++11\n\nå°†æˆå‘˜å˜é‡è®¾ç½®æˆå…¬æœ‰ï¼Œç”¨sizeofèƒ½è§‚å¯Ÿåˆ°è¿™ä¸¤ä¸ªæ•°ç»„çš„å¤§å°å’Œé¢„æœŸç›¸ç¬¦\ncout &lt;&lt; sizeof(st4._st) &lt;&lt; endl;cout &lt;&lt; sizeof(st5._st) &lt;&lt; endl;\n\nè¾“å‡ºç»“æœ\n120800\n\néç±»å‹æ¨¡æ¿å‚æ•°ä¸å¯è¢«ä¿®æ”¹template &lt;class T, size_t N&gt;class Stack3&#123;public:    void modify_n(int n = 10)    &#123;        N = n; // å°è¯•ä¿®æ”¹æ¨¡æ¿å‚æ•°    &#125;    T _st[N];    int _top;&#125;;\n\nå½“æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªä¿®æ”¹Nçš„å‡½æ•°ï¼Œå¹¶å°è¯•è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œç¼–è¯‘ä¼šæŠ¥é”™\ng++ test.cpp -o test -std=c++11test.cpp: In instantiation of â€˜void Stack3&lt;T, N&gt;::modify_n(int) [with T = int; long unsigned int N = 30]â€™:test.cpp:45:21:   required from heretest.cpp:28:11: error: lvalue required as left operand of assignment         N = n; // å°è¯•ä¿®æ”¹æ¨¡æ¿å‚æ•°         ~~^~~make: *** [makefile:2: test] Error 1\n\næŠ¥é”™çš„æ„æ€æ˜¯ = æ“ä½œç¬¦éœ€è¦ä¸€ä¸ªå¯è¢«ä¿®æ”¹çš„å·¦å€¼ã€‚è¿™ä¾¿å‘Šè¯‰æˆ‘ä»¬ï¼Œéç±»å‹æ¨¡æ¿å‚æ•°æ˜¯ä¸€ä¸ªconstå¸¸é‡ï¼Œæ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ã€‚\n4.2 STLçš„Arrayå›è¿‡å¤´æ¥çœ‹stlçš„arrayï¼Œæ­¤æ—¶å°±èƒ½ç†è§£è¿™ä¸ªéç±»å‹æ¨¡æ¿å‚æ•°çš„ä½œç”¨äº†ï¼›\nåœ¨å£°æ˜ä¸­ï¼Œç¬¬äºŒä¸ªæ¨¡æ¿å‚æ•°å·²ç»æŒ‡å®šäº†å‚æ•°ç±»å‹ä¸ºsize_tï¼Œæ­¤æ—¶éœ€è¦ç»™Nä¼ å…¥çš„å€¼å°±æ˜¯ä¸€ä¸ªç¡®å®šçš„æ— ç¬¦å·æ•´æ•°ï¼Œä½œä¸ºarrayå®¹å™¨çš„ç©ºé—´å¤§å°ï¼›\ntemplate &lt; class T, size_t N &gt; class array;\n\nå› ä¸ºarrayæ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„æ•°ç»„å®¹å™¨ï¼Œå¹¶ä¸åƒvectoré‚£æ ·å¯ä»¥å®ç°æ‰©å®¹æ“ä½œã€‚\nè€Œä¸”arrayå¼€è¾Ÿçš„ç©ºé—´åœ¨æ ˆä¸Šï¼Œvectoråœ¨å †ä¸Šï¼ˆå †çš„ç©ºé—´å¤§å°è¿œå¤§äºæ ˆï¼‰\nArrays are fixed-size sequence containers\n\né‚£ä¹ˆarrayè¿™ä¸ªå®¹å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\næˆ‘ä»¬ç¡®å®šçŸ¥é“éœ€è¦ä½¿ç”¨å¤šå°‘é•¿åº¦çš„åœºæ™¯\narrayå¯¹æ ‡çš„åº”è¯¥æ˜¯åŸç”Ÿæ•°ç»„ï¼Œå’Œvectorç›¸æ¯”ï¼Œå…¶ä¼˜åŠ¿åŸºæœ¬æ²¡æœ‰ã€‚\narrayç›¸æ¯”ç›´æ¥ä½¿ç”¨å®šé•¿æ•°ç»„ï¼Œå…¶å°è£…äº†è¿­ä»£å™¨ï¼Œèƒ½ä½¿ç”¨è¿­ä»£å™¨æ¥è¿›è¡Œå‚æ•°çš„è®¿é—®ã€‚èƒ½ä¿è¯arrayå’Œå…¶ä»–STLå®¹å™¨è®¿é—®çš„ä»£ç çš„ç»Ÿä¸€æ€§ã€‚\narrayå› ä¸ºæœ‰å°è£…operator[]ï¼Œæ‰€ä»¥æœ‰é¢„å…ˆå†™å¥½çš„è¶Šç•Œæ£€æŸ¥ï¼›è€Œç›´æ¥ä½¿ç”¨ a[100] åŸç”Ÿæ•°ç»„ï¼Œè¶Šç•Œæ£€æŸ¥æ˜¯ä¸ç¡®å®šçš„ã€‚\n\nä¸è¿‡ï¼Œè¿™ç±»å°è£…å’Œvectorç›¸æ¯”å°±å°½æ˜¾é¢“åŠ¿äº†ï¼Œæ‰€ä»¥åœ¨æ—¥å¸¸ç¼–ç ä¸­arrayä½¿ç”¨çš„é¢‘ç‡å¾ˆä½\n4.3 éç±»å‹æ¨¡æ¿å‚æ•°ç±»å‹é™åˆ¶// éç±»å‹æ¨¡æ¿å‚æ•°åªèƒ½ç”¨æ•´æ•°template &lt;class T, double N&gt;class Stack4&#123;public:    T _st[N];    int _top;&#125;;\n\nå¦‚æœä½ æƒ³ä½¿ç”¨é™¤äº†æ•´æ•°ä»¥å¤–çš„ç±»å‹ä½œä¸ºéç±»å‹æ¨¡æ¿å‚æ•°ï¼ŒåŒ…æ‹¬æµ®ç‚¹æ•°å’Œå­—ç¬¦ä¸²ï¼Œéƒ½æ˜¯ä¸å¯ä»¥çš„ï¼›\nä½†æ˜¯charç±»å‹éƒ½æ˜¯å¯ä»¥çš„ï¼ˆå­—ç¬¦åº•å±‚æ˜¯1ä¸ªå­—èŠ‚çš„æ•´æ•°ï¼‰\n\n\n5.æ¨¡æ¿çš„ç‰¹åŒ–åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œæ¨¡æ¿æä¾›çš„è¿™ä¸¤ä¸ªç‰¹æ€§å·²ç»å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå¾ˆå¤šå·¥ä½œã€‚ä½†åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å½¢ä¸‹ï¼Œæ¨¡æ¿çš„ç‰¹åŒ–å°±æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­çš„é‚£ä¹ˆç¾å¥½äº†ã€‚\n5.1 é—®é¢˜å¼•å‡ºtemplate &lt;class T&gt;bool Less(T left, T right)&#123;    return left &lt; right;&#125;int main()&#123;    double t1 = 33.23;    double t2 = 26.32;    cout &lt;&lt; Less(t1, t2) &lt;&lt; endl;    cout &lt;&lt; Less(3, 4) &lt;&lt; endl;    return 0;&#125;\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ¨¡æ¿å‚æ•°æ¥è¿›è¡Œä¸¤ä¸ªç›¸åŒç±»å‹ä¹‹é—´çš„æ¯”è¾ƒï¼Œè¾“å‡ºçš„ç»“æœä¸é¢„æœŸç›¸ç¬¦\n01\n\nå¼•å…¥æˆ‘ä»¬è‡ªå·±å†™çš„æ—¥æœŸç±»ï¼ˆç±»ä¸­å°è£…äº†å¯¹å¤§å°æ¯”è¾ƒçš„é‡è½½ï¼‰ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨çš„\n   Date d1(2023,3,1);   Date d2(2023,6,4);// è¾“å‡ºä¸º1   cout &lt;&lt; Less(d1,d2) &lt;&lt; endl;\n\nä½†å¦‚æœç”¨æŒ‡é’ˆå‘¢ï¼Ÿé—®é¢˜å°±å‡ºç°äº†ï¼\nint main()&#123;    Date d1(2023,3,2);    Date d2(2023,3,1);    // æ­£ç¡®åˆ¤æ–­ï¼Œè¾“å‡º0    cout &lt;&lt; Less(d1,d2) &lt;&lt; endl;    Date* pd1 = new Date(2023,3,2);    Date* pd2 = new Date(2023,3,1);    // é”™è¯¯åˆ¤æ–­ï¼Œè¾“å‡º1    cout &lt;&lt; Less(pd1,pd2) &lt;&lt; endl;    return 0;&#125;\n\nç¼–è¯‘è¿è¡Œåï¼Œå‘ç°æŒ‡é’ˆå¤„è¾“å‡ºçš„ç»“æœæ˜¯1ï¼Œå³ pd1&lt;pd2æˆç«‹ï¼\n$ ./test01\n\nè¿™æ˜¯å› ä¸ºï¼Œåœ¨å†…éƒ¨çš„æ¯”è¾ƒæ˜¯ç›´æ¥æ¯”è¾ƒçš„è¿™ä¸¤ä¸ªdate*çš„æŒ‡é’ˆï¼Œå…¶æ¯”è¾ƒçš„æ˜¯è¿™ä¸¤ä¸ªæŒ‡é’ˆçš„åœ°å€å¤§å°ï¼\nDate* pd2 = new Date(2023,3,1);Date* pd1 = new Date(2023,3,2);// Date* pd2 = new Date(2023,3,1);cout &lt;&lt; Less(pd1,pd2) &lt;&lt; endl;\n\nå¦‚æœè®©pd2è¿™ä¸ªæ›´å°çš„æ—¥æœŸåœ¨pd1ä¹‹å‰è¢«newï¼Œé‚£è¾“å‡ºçš„ç»“æœåˆå˜æˆ0äº†ï¼›æˆ‘ä»¬ä¹Ÿèƒ½ç¡®è®¤è¿™ä¸ªè¾“å‡ºçš„ç»“æœï¼Œå¹¶éé¢„æœŸçš„æ—¥æœŸæ¯”è¾ƒç»“æœ\n$ ./test0\n\n5.2 æ¨¡æ¿ç‰¹åŒ–5.3.1 å‡½æ•°æ¨¡æ¿ç‰¹åŒ–é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›ç‰¹æ®ŠåŒ–çš„å¤„ç†ï¼›\ntemplate &lt;class T&gt;bool Less(T left, T right)&#123;    return left &lt; right;&#125;// å¯¹Lesså‡½æ•°é’ˆå¯¹Date*çš„æŒ‡é’ˆè¿›è¡Œç‰¹æ®ŠåŒ–å¤„ç†template &lt;&gt;bool Less&lt;Date*&gt;(Date* left, Date* right)&#123;    return (*left) &lt; (*right); // ä½¿ç”¨ç±»å†…å¤§å°æ¯”è¾ƒçš„é‡è½½    // è¿™é‡Œå¯ä»¥åšä»»ä½•å¤„ç†ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸“é—¨å†™çš„å‡½æ•°&#125;\n\nå¤„ç†ä¹‹åçš„å‡½æ•°å†è¿›è¡Œæ¯”è¾ƒï¼Œè¾“å‡ºçš„ç»“æœå°±æ˜¯æ­£ç¡®çš„äº†\nDate* pd1 = new Date(2023,3,2);Date* pd2 = new Date(2023,3,1);cout &lt;&lt; Less(pd1,pd2) &lt;&lt; endl; // è¾“å‡ºä¸º0\n\nå¯ä»¥å°†è¿™æ ·çš„ç‰¹åŒ–å½“ä½œä¸€ç§ç‰¹æ®Šçš„å‡½æ•°é‡è½½ï¼›\n\né‚£ä¹ˆå‡½æ•°æ¨¡æ¿æ˜¯å¦æ”¯æŒåæ–‡ä¸­ç±»æ¨¡æ¿ä¸€æ ·çš„åŠç‰¹åŒ–å‘¢ï¼Ÿ\ntemplate &lt;class T&gt;bool Less&lt;T*&gt;(T *left, T *right)&#123;    cout &lt;&lt; &quot;T*&quot; &lt;&lt; endl;    return (*left) &lt; (*right);&#125;\n\nå¹¶ä¸æ”¯æŒï¼vscodeå°±ä¼šæŠ¥é”™å‘ŠçŸ¥æˆ‘ä»¬ï¼Œç¼–è¯‘ä¹Ÿæ— æ³•é€šè¿‡\n\ng++ test.cpp date/date.cpp -o test -std=c++11test.cpp:81:32: error: non-type partial specialization â€˜Less&lt;T*&gt;â€™ is not allowed bool Less&lt;T*&gt;(T *left, T *right)                                ^make: *** [makefile:2: test] Error 1\n\nè¦åƒå®ç°å¯¹æŒ‡é’ˆçš„æ“ä½œï¼Œåè€Œå¾—å•ç‹¬å†™ä¸€ä¸ªåƒä¸‹é¢ä¸€æ ·çš„æ¨¡æ¿ï¼›\néœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå¹¶ä¸æ˜¯æ¨¡æ¿ç‰¹åŒ–ï¼Œè€Œæ˜¯ä¸€ä¸ªå’ŒåŸæœ¬çš„æ¨¡æ¿å®Œå…¨ç‹¬ç«‹çš„å‡½æ•°æ¨¡æ¿ï¼ŒäºŒè€…æ„æˆå‡½æ•°é‡è½½å…³ç³»äº†ï¼ˆå°†åŸæœ¬çš„å‡½æ•°æ¨¡æ¿åˆ é™¤åï¼Œä¾æ—§å¯ä»¥ç¼–è¯‘é€šè¿‡å¹¶æ­£å¸¸è¿è¡Œï¼Œå°±å¯ä»¥è¯æ˜è¿™ä¸ªå‡½æ•°æ¨¡æ¿å’ŒåŸæœ‰å‡½æ•°æ¨¡æ¿æ— å…³ï¼‰\ntemplate &lt;class T&gt;bool Less(T *left, T *right)&#123;    cout &lt;&lt; &quot;T*&quot; &lt;&lt; endl;    return (*left) &lt; (*right);&#125;\n\næ­¤æ—¶dateå’Œintçš„æŒ‡é’ˆéƒ½ä¼šèµ°è¿™ä¸ªæ¨¡æ¿ï¼Œè€Œä¸ä¼šå…³æ³¨åŸæœ¬å¯¹Date*ç‰¹åŒ–åçš„æ¨¡æ¿\n#include &quot;date/date.h&quot;template &lt;class T&gt;bool Less(T left, T right)&#123;    return left &lt; right;&#125;// å¯¹Lesså‡½æ•°é’ˆå¯¹Date*çš„æŒ‡é’ˆè¿›è¡Œç‰¹æ®ŠåŒ–å¤„ç†template &lt;&gt;bool Less&lt;Date *&gt;(Date *left, Date *right)&#123;    cout &lt;&lt; &quot;date*&quot; &lt;&lt; endl;    return (*left) &lt; (*right); // ä½¿ç”¨ç±»å†…å¤§å°æ¯”è¾ƒçš„é‡è½½    // è¿™é‡Œå¯ä»¥åšä»»ä½•å¤„ç†ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸“é—¨å†™çš„å‡½æ•°&#125;template &lt;class T&gt;bool Less(T *left, T *right)&#123;    cout &lt;&lt; &quot;T*&quot; &lt;&lt; endl;    return (*left) &lt; (*right);&#125;void test_less()&#123;    Date *pd1 = new Date(2023, 3, 2);    Date *pd2 = new Date(2023, 3, 1);    cout &lt;&lt; Less(pd1, pd2) &lt;&lt; endl;    int* pi1 = new int(3);    int* pi2 = new int(1);    cout &lt;&lt; Less(pi1,pi2) &lt;&lt; endl;&#125;\n\nè¾“å‡ºç»“æœ\nT*0T*0\n\nåœ¨é‡åˆ°ç‰¹æ®Šæƒ…å†µçš„æ—¶å€™ï¼Œå‡½æ•°æ¨¡æ¿ç›´æ¥å®ç°ä¸€ä¸ªç‰¹å®šç±»å‹çš„ç‰¹åŒ–ï¼Œæˆ–è€…å®ç°ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å‡½æ•°æ¨¡æ¿å°±å¯ä»¥äº†ã€‚å‡½æ•°æ¨¡æ¿æ˜¯ä¸æ”¯æŒä½¿ç”¨T* å’Œ T&amp;çš„åç‰¹åŒ–çš„ã€‚\n\nè°ƒç”¨æ—¶å€™æŒ‡å®šæ¨¡æ¿å‚æ•°ç±»å‹çš„è¡Œä¸ºå«æ˜¾å¼å®ä¾‹åŒ–ï¼Œå¹¶éç‰¹åŒ–\n\n5.3.2 ç±»æ¨¡æ¿ç‰¹åŒ–template&lt;class T1, class T2&gt;class Data&#123;public:\tData() &#123; cout &lt;&lt; &quot;Data&lt;T1, T2&gt;&quot; &lt;&lt; endl; &#125;private:\tT1 _d1;\tT2 _d2;&#125;;\n\næ²¡æœ‰ç‰¹åŒ–ä¹‹å‰ï¼Œä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯è°ƒç”¨çš„æ¨¡æ¿æœ¬èº«\n$ ./testData&lt;T1, T2&gt;Data&lt;T1, T2&gt;\n\nå…¨ç‰¹åŒ–æ·»åŠ äº†ä¸€ä¸ªé’ˆå¯¹&lt;int, double&gt;ç‰¹åŒ–ä¹‹åï¼ˆè¿™ç§ç‰¹åŒ–è¢«ç§°ä¸ºå…¨ç‰¹åŒ–ï¼‰\ntemplate&lt;&gt;class Data&lt;int, double&gt;&#123;public:\tData() &#123; cout &lt;&lt; &quot;Data&lt;int, double&gt;&quot; &lt;&lt; endl; &#125;&#125;;\n\nè°ƒç”¨çš„å°±æ˜¯æˆ‘ä»¬ç‰¹åŒ–åçš„ç±»æ¨¡æ¿äº†\n$ ./testData&lt;T1, T2&gt;Data&lt;int, double&gt;\n\nåŠç‰¹åŒ–&#x2F;åç‰¹åŒ–åç‰¹åŒ–çš„ç¬¬ä¸€ç§å½¢å¼ï¼Œå°†æ¨¡æ¿å‚æ•°ä¸­çš„ä¸€éƒ¨åˆ†ç‰¹åŒ–ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ¿å‚æ•°çš„T2ä¿®æ”¹ä¸ºchar\n// 1ã€å°†æ¨¡æ¿å‚æ•°ç±»è¡¨ä¸­çš„ä¸€éƒ¨åˆ†å‚æ•°ç‰¹åŒ–ã€‚template &lt;class T1&gt;class Data&lt;T1, char&gt;&#123;public:    Data() &#123; cout &lt;&lt; &quot;Data&lt;T1, char&gt;&quot; &lt;&lt; endl; &#125;&#125;;\n\né‚£ä¹ˆä¿®æ”¹äº†ä¹‹åï¼Œåªè¦ç¬¬äºŒä¸ªå‚æ•°æ˜¯charçš„å®ä¾‹åŒ–ç±»ï¼Œéƒ½ä¼šèµ°åç‰¹åŒ–åçš„æ¨¡æ¿\nData&lt;int,char&gt; d3;Data&lt;char,char&gt; d4;\n\næµ‹è¯•ç»“æœï¼Œèµ°çš„éƒ½æ˜¯åç‰¹åŒ–åçš„ç‰ˆæœ¬\nData&lt;T1, char&gt;Data&lt;T1, char&gt;\n\né™¤äº†è¿™ç§åç‰¹åŒ–æŸä¸ªç‰¹å®šç±»å‹çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é’ˆå¯¹æŒ‡é’ˆå’Œå¼•ç”¨è¿›è¡Œåç‰¹åŒ–\n// 2ã€åç‰¹åŒ–å¹¶ä¸ä»…ä»…æ˜¯æŒ‡ç‰¹åŒ–éƒ¨åˆ†å‚æ•°ï¼Œè€Œæ˜¯é’ˆå¯¹æ¨¡æ¿å‚æ•°æ›´è¿›ä¸€æ­¥çš„æ¡ä»¶é™åˆ¶æ‰€è®¾è®¡å‡ºæ¥çš„ä¸€ä¸ªç‰¹åŒ–ç‰ˆæœ¬ã€‚template &lt;class T1, class T2&gt;class Data&lt;T1 *, T2 *&gt;&#123;public:    Data() &#123; cout &lt;&lt; &quot;Data&lt;T1*, T2*&gt;&quot; &lt;&lt; endl; &#125;&#125;;template &lt;class T1, class T2&gt;class Data&lt;T1 &amp;, T2 &amp;&gt;&#123;public:    Data() &#123; cout &lt;&lt; &quot;Data&lt;T1&amp;, T2&amp;&gt;&quot; &lt;&lt; endl; &#125;&#125;;\n\næµ‹è¯•ä»£ç \nData&lt;char*,char*&gt; d5;Data&lt;char*,double*&gt; d6;Data&lt;int*,char*&gt; d7;\n\nè¾“å‡ºå¦‚ä¸‹\nData&lt;T1*, T2*&gt;Data&lt;T1*, T2*&gt;Data&lt;T1*, T2*&gt;\n\nè€Œåªæœ‰ä¸€ä¸ªæŒ‡é’ˆçš„æƒ…å†µï¼Œä¼šåŒ¹é…åŸç”Ÿçš„\n// åªæœ‰ä¸€ä¸ªæŒ‡é’ˆï¼Œä¼šåŒ¹é…åŸç”Ÿçš„Data&lt;int*,int&gt; d8;\n\nè¾“å‡ºç»“æœ\nData&lt;T1, T2&gt;\n\n\nå¼•ç”¨çš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸¤ä¸ªå¼•ç”¨å°±ä¼šè°ƒç”¨æˆ‘ä»¬å¯¹å¼•ç”¨ç‰¹åŒ–äº†çš„ç±»æ¨¡æ¿\nData&lt;int&amp;,char&amp;&gt; d9;Data&lt;int&amp;,double&amp;&gt; d10;\n\nè¾“å‡º\nData&lt;T1&amp;, T2&amp;&gt;Data&lt;T1&amp;, T2&amp;&gt;\n\nä½†æ˜¯å¼•ç”¨å¦‚æœåªæœ‰ä¸€ä¸ªï¼ˆä¸ç®¡æ˜¯åœ¨å‰é¢è¿˜æ˜¯åé¢ï¼‰ï¼Œé‚£å°±ä¼šæŠ¥é”™äº†ï¼\nData&lt;char&amp;,double&gt; d11;\n\nè¿™æ˜¯å› ä¸ºå®ƒä¼šå»è°ƒç”¨æ²¡æœ‰ç‰¹åŒ–åçš„åŸºç¡€ç‰ˆæœ¬ï¼Œä½†åœ¨é»˜è®¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ¨¡æ¿å‚æ•°æ¥å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼Œè¿™æ—¶å€™å°±å‡ºé”™äº†ï¼ˆå› ä¸ºå¼•ç”¨å¿…é¡»è¦åœ¨å®šä¹‰çš„æ—¶å€™èµ‹å€¼ï¼ï¼‰\ng++ test.cpp date/date.cpp -o test -std=c++11test.cpp: In instantiation of â€˜Data&lt;T1, T2&gt;::Data() [with T1 = char&amp;; T2 = double]â€™:test.cpp:160:24:   required from heretest.cpp:104:5: error: uninitialized reference member in â€˜char&amp;â€™ [-fpermissive]     Data() &#123; cout &lt;&lt; &quot;Data&lt;T1, T2&gt;&quot; &lt;&lt; endl; &#125;     ^~~~test.cpp:107:8: note: â€˜char&amp; Data&lt;char&amp;, double&gt;::_d1â€™ should be initialized     T1 _d1;        ^~~make: *** [makefile:2: test] Error 1\n\nå¦‚æœå°†åŸºç¡€æ¨¡æ¿ä¸­çš„è¿™ä¸¤ä¸ªå˜é‡å®šä¹‰åˆ é™¤ï¼Œé‚£å°±ä¸ä¼šæŠ¥é”™äº†\ntemplate &lt;class T1, class T2&gt;class Data&#123;public:    Data() &#123; cout &lt;&lt; &quot;Data&lt;T1, T2&gt;&quot; &lt;&lt; endl; &#125;// private://     T1 _d1;//     T2 _d2;&#125;;\n\n\nè¿è¡Œï¼Œè¾“å‡ºçš„ç»“æœä¹Ÿæ˜¯é»˜è®¤çš„æ¨¡æ¿\nData&lt;T1, T2&gt;\n\nå°ç»“åç‰¹åŒ–çš„é€‚ç”¨èŒƒå›´ä¸€èˆ¬é«˜äºå…¨ç‰¹åŒ–ã€‚\nåç‰¹åŒ–å’Œå…¨ç‰¹åŒ–åŒæ—¶å­˜åœ¨æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨å…¨ç‰¹åŒ–ï¼\n5.3 ä½¿ç”¨åœºæ™¯å½“æˆ‘ä»¬ä½¿ç”¨CPPåº“å‡½æ•°sortçš„æ—¶å€™ï¼Œ éœ€è¦ä¼ å…¥ä¸€ä¸ªä»¿å‡½æ•°æ¥è¿›è¡Œæ’åºçš„æ“ä½œã€‚\ntemplate &lt;class T&gt;struct Less&#123;    bool operator()(const T &amp;x, const T &amp;y) const    &#123;        return x &lt; y;    &#125;&#125;;void test_less_sort()&#123;    Date d1(2023, 3, 2);    Date d2(2023, 4, 6);    Date d3(2023, 6, 3);    vector&lt;Date&gt; v;    v.push_back(d2);    v.push_back(d1);    v.push_back(d3);    sort(v.begin(), v.end(), Less&lt;Date&gt;());    for (auto e : v)    &#123;        cout &lt;&lt; e ;    &#125;    cout &lt;&lt; endl;&#125;\n\nåœ¨æ ˆä¸Šåˆ›å»ºçš„Dateæ˜¯å¯ä»¥ç›´æ¥è¿›è¡Œä»¿å‡½æ•°æ’åºï¼Œå¹¶è·å–åˆ°æ­£ç¡®ç»“æœ\n2023-3-22023-4-62023-6-3\n\nä½†å¦‚æœæ˜¯newå‡ºæ¥çš„Dateï¼Œå°±ä¼šå› ä¸ºæ˜¯æ¯”è¾ƒçš„æŒ‡é’ˆè€Œæ— æ³•æ­£å¸¸è¿›è¡Œæ’åº\nDate *pd1 = new Date(2023, 3, 2);    Date *pd2 = new Date(2023, 7, 1);    Date *pd3 = new Date(2023, 5, 1);    vector&lt;Date*&gt; vptr;    vptr.push_back(pd1);    vptr.push_back(pd2);    vptr.push_back(pd3);    sort(vptr.begin(), vptr.end(), Less&lt;Date*&gt;());    for (auto e : vptr)    &#123;        cout &lt;&lt; (*e) ;    &#125;    cout &lt;&lt; endl;\n\nè¾“å‡ºç»“æœæ— åº\n2023-7-12023-3-22023-5-1\n\nè¿™æ—¶å€™å°±éœ€è¦å¯¹Lessè¿™ä¸ªä»¿å‡½æ•°çš„ç±»è¿›è¡Œç‰¹åŒ–äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¨ç‰¹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åç‰¹åŒ–ï¼ŒäºŒè€…æ•ˆæœç›¸åŒï¼›è€Œé’ˆå¯¹æŒ‡é’ˆçš„åç‰¹åŒ–æ˜¾ç„¶é€‚ç”¨èŒƒå›´æ›´å¹¿\n// ä»¿å‡½æ•°ç±»ç‰¹åŒ–template &lt;class T&gt;struct Less&#123;    bool operator()(const T &amp;x, const T &amp;y) const    &#123;        return x &lt; y;    &#125;&#125;;//å…¨ç‰¹åŒ–template&lt;&gt;struct Less&lt;Date*&gt;&#123;\tbool operator()(Date* x, Date* y) const\t&#123;\t\treturn *x &lt; *y;\t&#125;&#125;;// åç‰¹åŒ–template &lt;class T&gt;struct Less&lt;T *&gt;&#123;    bool operator()(T *x, T *y) const    &#123;        return *x &lt; *y;    &#125;&#125;;\n\nå†æ¬¡æµ‹è¯•ï¼ŒæˆåŠŸæ‰“å°å‡ºæœ‰åºç»“æœ\n2023-3-22023-5-12023-7-1\n\n5.4 è¿­ä»£å™¨èƒå–5.4.1 iterator_traitsè¿™ä¸ªé—®é¢˜åœ¨STL-LISTçš„åšå®¢ä¸­å·²ç»æ¶‰åŠåˆ°äº†ä¸€éƒ¨åˆ†ï¼›ä½†é‚£æ—¶å€™è¿˜æ²¡è¿˜æœ‰äº†è§£æ¨¡æ¿ä¸­çš„ç‰¹åŒ–ï¼Œæ²¡æœ‰åŠæ³•è¯¦ç»†åœ°å»è§‚å¯Ÿåº•å±‚çš„å®ç°æœºåˆ¶ã€‚\nåœ¨STLæºç ä¸­çš„stl_iterator.hæ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ°åå‘è¿­ä»£å™¨ä¸­çš„å¦‚ä¸‹å®ç°ã€‚å…¶ä½¿ç”¨äº†iterator_traitsæ¨¡æ¿ç±»ï¼Œæ¥è·å–æ­£å‘è¿­ä»£å™¨ä¸­çš„æˆå‘˜ç±»å‹ï¼ˆæš‚æ—¶åªå…³æ³¨pointer/referenceï¼‰\ntemplate &lt;class Iterator&gt;class reverse_iterator &#123;protected:  Iterator current;public:  typedef typename iterator_traits&lt;Iterator&gt;::iterator_category          iterator_category;  typedef typename iterator_traits&lt;Iterator&gt;::value_type          value_type;  typedef typename iterator_traits&lt;Iterator&gt;::difference_type          difference_type;  typedef typename iterator_traits&lt;Iterator&gt;::pointer          pointer;  typedef typename iterator_traits&lt;Iterator&gt;::reference          reference;\n\nå†çœ‹çœ‹è¿™ä¸ªç±»çš„å®ç°ï¼Œèƒ½çœ‹åˆ°å¦‚ä¸‹çš„å†…å®¹ï¼Œå…¶é’ˆå¯¹æ­£å‘è¿­ä»£å™¨ï¼ŒåŒæ—¶åˆ»ç”»äº†å…³äºT*æŒ‡é’ˆå’Œconst T*å¼•ç”¨çš„ä¸¤ä¸ªåç‰¹åŒ–ç‰ˆæœ¬ã€‚\nå› ä¸ºåœ¨listä¸­ï¼Œæˆ‘ä»¬çš„æ­£å‘è¿­ä»£å™¨æ˜¯è‡ªä¸»å°è£…å®ç°çš„ã€‚ä½†æ˜¯åœ¨vectorä¸­ï¼Œæ­£å‘è¿­ä»£å™¨ç›´æ¥ç”¨çš„å°±æ˜¯æŒ‡é’ˆã€‚æä¾›äº†è¿™ä¸¤ä¸ªç‰¹åŒ–ç‰ˆæœ¬ï¼Œå°±èƒ½ä¿è¯å³ä¾¿æ˜¯ç”¨æŒ‡é’ˆè¿™ä¸€å†…ç½®ç±»å‹å®ç°çš„ç‰¹åŒ–ç‰ˆæœ¬ï¼Œèƒ½æˆåŠŸåœ°è·å–åˆ°ä¸€ä¸ªæ­£ç¡®çš„æ•°æ®ç±»å‹ï¼ˆåŒæ—¶ä¹Ÿä½¿ç”¨äº†typenameå‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯æ•°æ®ç±»å‹ï¼‰çš„typedef\ntemplate &lt;class Iterator&gt;struct iterator_traits &#123;  typedef typename Iterator::iterator_category iterator_category;  typedef typename Iterator::value_type        value_type;  typedef typename Iterator::difference_type   difference_type;  typedef typename Iterator::pointer           pointer;  typedef typename Iterator::reference         reference;&#125;;template &lt;class T&gt;struct iterator_traits&lt;T*&gt; &#123;  typedef random_access_iterator_tag iterator_category;  typedef T                          value_type;  typedef ptrdiff_t                  difference_type;  typedef T*                         pointer;  typedef T&amp;                         reference;&#125;;template &lt;class T&gt;struct iterator_traits&lt;const T*&gt; &#123;  typedef random_access_iterator_tag iterator_category;  typedef T                          value_type;  typedef ptrdiff_t                  difference_type;  typedef const T*                   pointer;  typedef const T&amp;                   reference;&#125;;\n\n5.4.2 distanceé™¤äº†åå‘è¿­ä»£å™¨è¿™é‡Œéœ€è¦ç”¨åˆ°ç‰¹åŒ–ï¼Œåœ¨STLæä¾›çš„distanceå‡½æ•°ä¸­ä¹Ÿä¼šç”¨åˆ°ï¼ˆç”¨äºè®¡ç®—ä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„è·ç¦»ï¼‰\ntemplate &lt;class InputIterator, class Distance&gt;inline void __distance(InputIterator first, InputIterator last, Distance&amp; n,                        input_iterator_tag) &#123;  while (first != last) &#123; ++first; ++n; &#125;&#125;template &lt;class RandomAccessIterator, class Distance&gt;inline void __distance(RandomAccessIterator first, RandomAccessIterator last,                        Distance&amp; n, random_access_iterator_tag) &#123;  n += last - first;&#125;template &lt;class InputIterator, class Distance&gt;inline void distance(InputIterator first, InputIterator last, Distance&amp; n) &#123;  __distance(first, last, n, iterator_category(first));&#125;\n\nå¦‚æœæ˜¯ä¸€ä¸ªå•é¡¹è¿­ä»£å™¨ï¼Œå…¶å°±éœ€è¦ç”¨è¿‡++æ¥è®¡ç®—å‡ºä¸¤ä¸ªè¿­ä»£å™¨ä¹‹é—´çš„é•¿åº¦ã€‚å¦‚æœæ˜¯ä¸€ä¸ªéšæœºè¿­ä»£å™¨ï¼Œé‚£å°±å¯ä»¥ç›´æ¥é€šè¿‡äºŒè€…ç›¸å‡è®¡ç®—å‡ºè·ç¦»ã€‚\nè¿™æ—¶å€™å°±éœ€è¦é€šè¿‡èƒå–æ¥è·å–è¿­ä»£å™¨çš„ç±»å‹ï¼ˆåœ¨è¿­ä»£å™¨ç±»æ„é€ çš„æ—¶å€™ï¼Œè¿­ä»£å™¨ç±»å‹å°±å·²ç»é€šè¿‡èƒå–ç¡®è®¤äº†ï¼‰ï¼Œå¹¶é€šè¿‡è¿™ä¸ªè¿­ä»£å™¨çš„ç±»å‹ï¼Œç¡®å®šä½¿ç”¨çš„ç®—æ³•ï¼›\n6.æ¨¡æ¿çš„æ˜¾ç¤ºå®ä¾‹åŒ–6.1 è¯´æ˜è¯·æ³¨æ„ï¼Œæ¨¡æ¿çš„æ˜¾ç¤ºå®ä¾‹åŒ–å’Œæ¨¡æ¿çš„ç‰¹åŒ–ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œéœ€è¦æ³¨æ„åŒºåˆ†å¼€æ¥ã€‚\næ‰€è°“æ¨¡æ¿æ˜¾ç¤ºå®ä¾‹åŒ–ï¼Œå°±æ˜¯è®©ç¼–è¯‘å™¨ç»™ä½ æŒ‡å®šçš„æ¨¡æ¿ç±»å‹ç”Ÿæˆå¯¹åº”çš„ä»£ç ï¼Œè¿™æ ·åœ¨åç»­çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸å†éœ€è¦å¤šæ¬¡ç”Ÿæˆã€‚\nåœ¨ä¸Šæ–‡ä¸­å…¶å®å·²ç»å‡ºç°è¿‡å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–çš„ç¤ºä¾‹ ğŸ‘‰ ç‚¹æˆ‘è·³è½¬åˆ°ä¸Šæ–‡. æˆ‘ä»¬åœ¨å‡½æ•°æ¨¡æ¿å®šä¹‰çš„æºæ–‡ä»¶ä¸­ï¼Œæ˜¾ç¤ºå®ä¾‹åŒ–æˆ‘ä»¬éœ€è¦çš„ç±»å‹çš„å‡½æ•°æ¨¡æ¿ï¼Œè¿™æ ·åç»­ç¼–è¯‘å™¨åœ¨ç”Ÿæˆå¯¹åº”å‡½æ•°çš„æ—¶å€™ï¼Œå°±å¯ä»¥æ­£å¸¸ä»æ¨¡æ¿ç”Ÿæˆå‡ºæˆ‘ä»¬éœ€è¦çš„å‡½æ•°ï¼Œè€Œé¿å…ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°ç›®æ ‡å‡½æ•°çš„é—®é¢˜ã€‚\n6.2 è¯­æ³•æ¨¡æ¿æ˜¾ç¤ºå®ä¾‹åŒ–çš„æ–¹å¼æ˜¯template+å‡½æ•°æ¨¡æ¿çš„åŸæœ¬å£°æ˜ã€‚\næ¯”å¦‚æ˜¾ç¤ºå®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œå°±éœ€è¦ç”¨templateå¸¦ä¸Šè¿™ä¸ªå‡½æ•°åŸæœ¬çš„å®šä¹‰å’Œå…·ä½“çš„æ¨¡æ¿å‚æ•°ç±»å‹ã€‚\ntemplate&lt;typename T1&gt;void Add(T1 left, T1 right)&#123;   cout &lt;&lt; left + right &lt;&lt; endl &lt;&lt; endl;&#125;//åœ¨æºæ–‡ä»¶ä¸­æ˜¾å¼å®ä¾‹åŒ–templatevoid Add&lt;int&gt;(int left, int right);\n\nå¦‚æœæ˜¯æ˜¾ç¤ºå®ä¾‹åŒ–ä¸€ä¸ªclassï¼Œé‚£ä¹ˆæ“ä½œå¦‚ä¸‹\ntemplate &lt;typename T&gt;class MyTemplateClass &#123;public:    void print()     &#123;        std::cout &lt;&lt; &quot;MyTemplateClass: &quot;  &lt;&lt; typeid(T).name() &lt;&lt; std::endl;    &#125;&#125;;// æ˜¾å¼å®ä¾‹åŒ– MyTemplateClass ç±»æ¨¡æ¿// ç”Ÿæˆä¸“é—¨é’ˆå¯¹ int ç±»å‹çš„å®ä¾‹åŒ–ä»£ç template class MyTemplateClass&lt;int&gt;;\n\n6.3 æ˜¾ç¤ºå®ä¾‹åŒ–çš„ä½œç”¨åŸŸè¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨æ˜¾ç¤ºå®ä¾‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å®ä¾‹åŒ–åçš„æ¨¡æ¿ç±»&#x2F;å‡½æ•°çš„å£°æ˜éƒ½åªä¼šå­˜åœ¨äºå½“å‰æºæ–‡ä»¶ä¸­ï¼Œå…¶ä»–æºæ–‡ä»¶ä¸­æ— æ³•è°ƒç”¨è¯¥å‡½æ•°ï¼\nä¸‹é¢ç»™å‡º4ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œä½œä¸ºæµ‹è¯•ã€‚æ–‡ä»¶åå‚è€ƒå¼€å¤´æ³¨é‡Šã€‚\n// head.h#include &lt;iostream&gt;using namespace std;// å¤´æ–‡ä»¶head.hä¸­ï¼Œæ¨¡æ¿å‡½æ•°å£°æ˜template &lt;typename T&gt;T Add(T a,T b);// å®šä¹‰æ™®é€šå‡½æ•°ï¼Œå°è¯•åœ¨a.cppä¸­å®ç°int test_add_a(int a,int b);// å®šä¹‰æ™®é€šå‡½æ•°ï¼Œå°è¯•åœ¨b.cppä¸­å®ç°int test_add_b(int a,int b);\n\nä¸Šä¸ºhead.hæ–‡ä»¶ï¼Œä¸‹ä¸ºa.cppæ–‡ä»¶ã€‚\n// a.cpp#include &quot;head.h&quot;// A.cppä¸­å®šä¹‰å‡½æ•°æ¨¡æ¿template &lt;typename T&gt;T Add(T a,T b)&#123;    return a+b;&#125;int test_add_a(int a,int b)&#123;    return a+b;&#125;\n\nä¸‹ä¸ºb.cppæ–‡ä»¶å’Œtest.cppæ–‡ä»¶.\n// b.cpp#include &quot;head.h&quot;int test_add_b(int a,int b)&#123;    return Add&lt;int&gt;(a,b);&#125;\n\nå°è¯•åœ¨mainå‡½æ•°ä¸­è°ƒç”¨åˆ†åˆ«åœ¨aå’Œbä¸­å®šä¹‰çš„ä¸¤ä¸ªç›¸åŠ å‡½æ•°.\n// test.cpp#include &quot;head.h&quot;int main()&#123;    cout &lt;&lt; &quot;a &quot; &lt;&lt; test_add_a(10,3) &lt;&lt; endl;    cout &lt;&lt; &quot;b &quot; &lt;&lt; test_add_b(10,30) &lt;&lt; endl;    return 0;&#125;\n\n\næ‰§è¡Œç¼–è¯‘åçš„æŠ¥é”™å¦‚ä¸‹ï¼Œåœ¨b.cppä¸­æ‰¾ä¸åˆ°å¯¹åº”çš„Add&lt;int&gt;å‡½æ•°å®ä¾‹åŒ–ä¹‹åçš„å‡½æ•°ä½“å®ç°ï¼Œæ— æ³•è°ƒç”¨è¯¥å‡½æ•°æ¨¡æ¿ï¼\nâ•°â”€ g++ test.cpp a.cpp b.cpp -o test/tmp/ccCFOnFc.o: In function `test_add_b(int, int)&#x27;:b.cpp:(.text+0x19): undefined reference to `int Add&lt;int&gt;(int, int)&#x27;collect2: error: ld returned 1 exit status\n\nè¿™æ˜¯å› ä¸ºå‡½æ•°æ¨¡æ¿çš„å®ç°åªå­˜åœ¨äºa.cppä¸­,æ‰€ä»¥åªæœ‰a.cppä¸­çš„å…¶ä»–å‡½æ•°èƒ½æ­£å¸¸è°ƒç”¨åˆ°è¿™ä¸ªå‡½æ•°æ¨¡æ¿.\næ‰€ä»¥,å¦‚æœæƒ³åœ¨b.cppä¸­ä¹Ÿèƒ½è°ƒç”¨åˆ°è¿™ä¸ªå‡½æ•°æ¨¡æ¿,è§£å†³åŠæ³•åªæœ‰åœ¨å…¶ä¸­ä¹Ÿå¸¦ä¸Šå‡½æ•°æ¨¡æ¿çš„å®šä¹‰!ä¸ç„¶æ˜¯ä¸è¡Œçš„! (åªåœ¨b.cppä¸­æ˜¾ç¤ºå®ä¾‹åŒ–æ˜¯æ— æ•ˆçš„,ç¼–è¯‘ä¼šæŠ¥é”™.)\n\nå°ç»“: ä¸ç®¡æ˜¯ä»€ä¹ˆæ—¶å€™,é‡åˆ°å‡½æ•°æ¨¡æ¿å’Œç±»æ¨¡æ¿,è¿˜æ˜¯è€è€å®å®å£°æ˜å®šä¹‰ä¸åˆ†ç¦»æœ€å¥½!\n\næ¨¡æ¿æ€»ç»“ä¼˜ç‚¹ï¼šæ¨¡æ¿å¤ç”¨äº†ä»£ç ï¼ŒèŠ‚çœäº†èµ„æºå’Œå¼€å‘æ•ˆç‡ï¼ŒC++çš„æ¨¡æ¿æ ‡å‡†åº“ä¹Ÿå› æ­¤äº§ç”Ÿã€‚å¢å¼ºäº†ä»£ç çš„çµæ´»æ€§ï¼›\nç¼ºç‚¹ï¼šæ¨¡æ¿ä¼šå¯¼è‡´ä»£ç è†¨èƒ€é—®é¢˜ï¼Œä¹Ÿä¼šå¢åŠ ç¼–è¯‘æ—¶é—´ï¼ˆæ¨¡æ¿åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å®ä¾‹åŒ–å‡ºå…·ä½“çš„å‡½æ•°å’Œç±»ï¼‰ã€‚è€Œä¸”å‡ºç°æ¨¡æ¿ç¼–è¯‘å¤±è´¥çš„é”™è¯¯æ—¶ï¼Œé”™è¯¯ä¿¡æ¯å‡Œä¹±ä¸æ–¹ä¾¿å®šä½é—®é¢˜ã€‚\nThe endå…³äºæ¨¡æ¿çš„åŸºæœ¬çŸ¥è¯†å’Œè¿›é˜¶å…³äºç‰¹åŒ–çš„çŸ¥è¯†å°±åŸºæœ¬ç»“æŸè¾£ï¼\nå…¶å®æ¨¡æ¿è¿˜æœ‰æ¨¡æ¿å…ƒç¼–ç¨‹è¿™ç§æ›´æ·±å±‚çš„ä¸œè¥¿ï¼Œä½†é‚£äº›ä½¿ç”¨çš„é¢‘ç‡å¹¶ä¸é«˜ï¼Œå…·ä½“åœ¨å·¥ä½œä¸­å¦‚æœç”¨åˆ°äº†ï¼Œå¯èƒ½å°±éœ€è¦æ›´æ·±å…¥çš„å­¦ä¹ äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Cpp"]},{"title":"ã€Dockerã€‘ç”¨å¼€æºumamiç›‘æ§ä½ çš„ç«™ç‚¹è®¿é—®é‡","url":"/posts/910878902/","content":"æ–°å¹´åˆ°ï¼Œç¥å¤§å®¶å…”å¹´å‰ç¥¥ï¼ğŸ‰\n\n\n1.ä»‹ç»umamiæ˜¯ä¸€ä¸ªå¼€æºçš„ç«™ç‚¹è®¿é—®é‡ç›‘çœ‹ç¨‹åºï¼Œå…¶æ”¯æŒdockeréƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚ç›¸æ¯”è¾ƒç™¾åº¦ç­‰æ”¶è´¹çš„ç½‘ç«™ä¿¡æ¯ç›‘çœ‹ï¼Œè¿™ç§æ–¹å¼å¯¹äºå°ç«™é•¿æ¥è¯´æ›´åŠ å®æƒ ä¸€äº›\n2.dockerå®‰è£…çš„å‘2.1 docker-composeä»¥ä¸‹æ˜¯å®˜æ–¹æä¾›çš„ymlæ–‡ä»¶ï¼Œæˆ‘åªæ˜¯å°†æ•°æ®åº“dockerçš„åå­—æ”¹æˆäº†umi-dbï¼Œå°†3000ç«¯å£æ˜ å°„ç»™äº†æœ¬æœºçš„3010ç«¯å£\nversion: &#x27;3&#x27;services:  umami:    image: ghcr.io/umami-software/umami:postgresql-latest    ports:      - &quot;3010:3000&quot;    environment:      DATABASE_URL: postgresql://umami:umami@umi-db:5432/umami      DATABASE_TYPE: postgresql      HASH_SALT: adsfadsfa23421313dfabadsf32rl    depends_on:      - umi-db    restart: always  umi-db:    image: postgres:12-alpine    environment:      POSTGRES_DB: umami      POSTGRES_USER: umami      POSTGRES_PASSWORD: umami    volumes:      - ./sql/schema.postgresql.sql:/docker-entrypoint-initdb.d/schema.postgresql.sql:ro      - umami-db-data:/var/lib/postgresql/data    restart: alwaysvolumes:  umami-db-data:\n\nå†™å¥½æ–‡ä»¶åï¼Œä½¿ç”¨docker-compose up -då‘½ä»¤ï¼Œè¿è¡Œé•œåƒã€‚è¿‡ä¸€ä¼šå†ä½¿ç”¨docker-compose psï¼Œåªè¦ä¸¤ä¸ªé•œåƒéƒ½æ˜¯æ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œé‚£å°±okäº†\n2.2 å‘è¿™é‡Œæœ‰ä¸€ä¸ªå°ğŸ•³ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¹¶ä¸éœ€è¦è®¾ç½®æ•°æ®åº“çš„ç«¯å£ã€‚åœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šï¼Œ5432ç«¯å£å·²ç»è¢«å¦å¤–ä¸€ä¸ªå®¹å™¨å é¢†äº†ï¼Œäºæ˜¯æˆ‘å°±ä½¿ç”¨äº†ä¸‹é¢çš„è¯­æ³•ï¼Œæƒ³æŠŠæ•°æ®åº“æ˜ å°„ç»™5433ç«¯å£\nå¤‡æ³¨ï¼šä¸‹é¢çš„è¿™ä¸ªæ˜¯é”™è¯¯å†™æ³•ï¼Œumamiå®¹å™¨ä¼šå› ä¸ºè¿ä¸ä¸Šæ•°æ®åº“è€Œä¸€ç›´é‡å¯ï¼\nversion: &#x27;3&#x27;services:  umami:    image: ghcr.io/umami-software/umami:postgresql-latest    ports:      - &quot;3010:3000&quot;    environment:      DATABASE_URL: postgresql://umami:umami@umi-db:5433/umami      DATABASE_TYPE: postgresql      HASH_SALT: adsfadsfa23421313dfabadsf32rl    depends_on:      - umi-db    restart: always  umi-db:    image: postgres:12-alpine    environment:      POSTGRES_DB: umami      POSTGRES_USER: umami      POSTGRES_PASSWORD: umami    ports: # è¿™é‡Œçš„ç«¯å£æ˜ å°„æ˜¯å¤šä½™çš„      - &quot;5433:5432&quot;    volumes:      - ./sql/schema.postgresql.sql:/docker-entrypoint-initdb.d/schema.postgresql.sql:ro      - umami-db-data:/var/lib/postgresql/data    restart: alwaysvolumes:  umami-db-data:\n\nå®é™…ä¸Šå¹¶ä¸éœ€è¦è¿™ä¹ˆæ“ä½œï¼Œå› ä¸ºé»˜è®¤çŠ¶æ€ä¸‹ï¼Œè¿™ä¸ªæ•°æ®åº“çš„ç«¯å£éƒ½æ²¡æœ‰æ˜ å°„åˆ°æœ¬æœºï¼Œå¹¶ä¸ä¼šå’Œå·²æœ‰çš„ç«¯å£å†²çªï¼\nDATABASE_URL: postgresql://umami:umami@umi-db:5432/umami\n\nè¿™é‡Œå…¶å®å·²ç»æŒ‡å®šäº†ï¼Œæ˜¯ä½¿ç”¨umi-dbå®¹å™¨å†…éƒ¨çš„5432ç«¯å£ï¼Œå¹¶ä¸æ˜¯ä½¿ç”¨äº‘æœåŠ¡å™¨çš„5332ç«¯å£ï¼ŒäºŒè€…æ˜¯ä¸ä¸€æ ·çš„ã€‚\nç›´æ¥ä½¿ç”¨å®˜æ–¹åŸæœ‰çš„docker-composeæ–‡ä»¶å°±æ²¡é—®é¢˜äº†ï¼\n3.è¿›å…¥ç®¡ç†é¡µé¢å®‰è£…å®Œæ¯•åï¼Œä½¿ç”¨äº‘æœåŠ¡å™¨ip:ç«¯å£çš„æ–¹å¼è®¿é—®ï¼Œè¿›å…¥åå°ã€‚\né»˜è®¤ç”¨æˆ·åæ˜¯adminï¼Œé»˜è®¤å¯†ç æ˜¯umamiï¼Œè¿›å…¥ä¹‹åè¯·ç«‹åˆ»ä¿®æ”¹å¯†ç ã€‚\n3.1 ä¿®æ”¹ä¸­æ–‡ç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œè¿›å…¥profileï¼Œè®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡ã€‚\n\n3.2 æ·»åŠ ç«™ç‚¹éšååœ¨ç½‘ç«™é€‰é¡¹æ æ·»åŠ ç½‘ç«™ï¼Œå¡«å…¥ä½ çš„ç«™ç‚¹urlå’Œåå­—\n\n3.3 æ·»åŠ åˆ°hexoåšå®¢ä¸Šä¿å­˜äº†ä¹‹åï¼Œç‚¹å‡»å³ä¾§çš„è¿™ä¸ªä»£ç å—å›¾æ ‡ï¼Œå¤åˆ¶é‡Œé¢çš„ä»£ç \n\nåˆ°æœ¬åœ°çš„hexoä¸»é¢˜æ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°headæ–‡ä»¶ï¼Œä¿®æ”¹&lt;head&gt;å¤„çš„ä»£ç ï¼ŒåŠ å…¥åˆšåˆšå¤åˆ¶çš„ä»£ç \nkeepä¸»é¢˜æ–‡ä»¶ä½ç½® themes\\keep\\layout\\_partial\\head.ejs\n\né‡æ–°éƒ¨ç½²åšå®¢å³å¯ï¼Œæ•°æ®è¿‡å‡ å°æ—¶å°±ä¼šç”Ÿæ•ˆ\n3.4 æ·»åŠ åˆ°wikijswiki jsçš„ç®¡ç†é¡µé¢ï¼Œç½‘ç«™åˆ†æä¸€æ å°±æœ‰umami\n\nå¡«å…¥ä½ éƒ¨ç½²umamiçš„æœåŠ¡å™¨urlå’Œç«™ç‚¹idå³å¯ï¼Œåœˆå‡ºæ¥çš„éƒ¨åˆ†å°±æ˜¯ç½‘ç«™idï¼Œå¹¶ä¸æ˜¯ä½ åœ¨umamié‡Œé¢è®¾ç½®çš„ç«™ç‚¹åå­—\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Hexo","Docker","wikijs"]},{"title":"ã€nginxã€‘Dockeré…ç½®nginxï¼Œå®ç°åŒæœåŠ¡å™¨ipå¤šç«™ç‚¹å¤šåŸŸå","url":"/posts/1994863894/","content":"Dockeré…ç½®ngnixï¼Œå®ç°åŒæœåŠ¡å™¨ipï¼Œå¤šåŸŸåæ˜ å°„å¤šç«™ç‚¹\n\n\n1.è¯´æ˜ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„åŸŸåæ˜ å°„åˆ°ipåï¼Œé»˜è®¤è®¿é—®çš„æ˜¯80ç«¯å£ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨åªéƒ¨ç½²äº†ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ ·ä¹Ÿæ˜¯å¤Ÿç”¨çš„ã€‚\nä½†æ˜¯å¾ˆå¤šé¡¹ç›®å¯¹æ€§èƒ½çš„å ç”¨å¹¶æ²¡æœ‰é‚£ä¹ˆå¤¸å¼ ï¼Œä¸€ä¸ªæœåŠ¡å™¨ä¸€ä¸ªç«™ç‚¹æœªå…æœ‰äº›æµªè´¹äº†ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥ç”¨åŸŸå:ç«¯å£æ¥è®¿é—®ï¼Œä½†æ˜¯è¿™æ ·å¯¹äºç”¨æˆ·æ¥è¯´å¹¶ä¸å‹å¥½ï¼Œå¯¹äºå¼ºè¿«ç—‡æ¥è¯´çœ‹ç€å¾ˆä¸èˆ’æœğŸ¤£\nè¿™æ—¶å€™ï¼Œå°±éœ€è¦é…ç½®åå‘ä»£ç†æ¥å®ç°ä¸åŒåŸŸååˆ°æœåŠ¡å™¨ä¸åŒç«¯å£çš„æ˜ å°„ã€‚\n1.1 åå‘ä»£ç†ä½ å¯ä»¥ç†è§£ä¸ºï¼Œåå‘ä»£ç†æ˜¯æœåŠ¡å™¨çš„ä¸€ä¸ªä¸­é—´å•†ï¼Œå…¶èƒ½å°†80ç«¯å£çš„ï¼Œä¸åŒåŸŸåæ¥æºçš„è¯·æ±‚ï¼Œå¯¼å‘åˆ°æœåŠ¡å™¨ä¸Šçš„ä¸åŒç«¯å£\nwww.example.com æŒ‡å‘ 8080ç«¯å£aaa.example.com æŒ‡å‘ 3000ç«¯å£è¿™ä¸¤ä¸ªåŸŸåéƒ½æ˜ å°„åˆ°æœåŠ¡å™¨å…¬ç½‘ip 114.514.8.8\n\nå½“ä½ è®¿é—®www.example.comæ—¶ï¼Œè¯·æ±‚çš„æ˜¯114.514.8.8:80ç«¯å£ï¼Œä¹Ÿå°±æ˜¯åå‘ä»£ç†çš„æœåŠ¡ã€‚æ­¤æ—¶åå‘ä»£ç†èƒ½çŸ¥é“ä½ çš„æ¥æºæ˜¯www.example.comï¼Œäºæ˜¯å°±æŠŠä½ å¸¦åˆ°äº†8080ç«¯å£çš„æœåŠ¡ä¸Šï¼›\nåŒç†ï¼Œè®¿é—®aaa.example.comæ—¶ï¼Œå°±ä¼šè¢«å¸¦åˆ°3000ç«¯å£ã€‚\n\nè¿™é‡Œç”¨nginxä½œæ¼”ç¤ºï¼Œnginxæ˜¯æœ€å¸¸ç”¨çš„åå‘ä»£ç†æœåŠ¡\n2.dockerå®‰è£…nginx\næœ¬æ–‡å‚è€ƒï¼šhttps://www.jianshu.com/p/6b317192480c\n\nç”¨å…¶ä»–æ–¹å¼è¿˜å¾—æ•´ä¸€å¤§å †ä¾èµ–é¡¹ï¼Œè¿™é‡Œç›´æ¥ç”¨dockerï¼Œæ–¹ä¾¿åˆå¿«æ·;\næœåŠ¡å™¨å®‰è£…dockerçš„æ–¹å¼ï¼Œæ ¹æ®ä½ çš„ç³»ç»Ÿï¼Œè‡ªè¡Œç™¾åº¦\ndocker pull nginx\n\n2.1 é…ç½®å¯åŠ¨ä¹‹å‰ï¼Œå…ˆåœ¨ä½ çš„å½“å‰è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆæˆ‘è¿™é‡Œæ˜¯rootç”¨æˆ·ï¼‰\nmkdir /root/docker/ngnix\n\néšåç”¨ä¸‹é¢çš„å‘½ä»¤å¯åŠ¨nginxå®¹å™¨\ndocker run \\--name=ngx \\-p 80:80 -p 443:443 \\-v /root/docker/nginx/conf.d:/etc/nginx/conf.d \\-v /root/docker/nginx/cert:/etc/nginx/cert \\-d nginx\n\nå¯¹ä¸€äº›å‚æ•°è¿›è¡Œè¯´æ˜\n\n-på‘½ä»¤æ˜ å°„ç«¯å£ï¼Œå°†80ç«¯å£æ˜ å°„ç»™æœåŠ¡å™¨çš„80ç«¯å£ï¼ˆå³ä¾§å®¹å™¨ç«¯å£ï¼Œå·¦ä¾§æœ¬åœ°ç«¯å£\n-vå‘½åæ˜ å°„ç›®å½•ï¼Œå°†æœ¬åœ°çš„/root/nginx/conf.dæ˜ å°„åˆ°dockeré‡Œé¢çš„/etc/nginx/conf.d è¿™æ˜¯nginxçš„é…ç½®æ–‡ä»¶è·¯å¾„\n--nameè®¾ç½®å®¹å™¨çš„åå­—ï¼Œå’Œé•œåƒåå­—æ— å…³\n\nå®‰è£…å®Œæˆåï¼Œæ‰“å¼€äº‘æœåŠ¡å™¨çš„ipï¼Œå°±èƒ½çœ‹åˆ°nginxçš„åˆå§‹é¡µé¢\n\n3.ç¼–è¾‘é…ç½®æ–‡ä»¶nginx.conf é…ç½®æ–‡ä»¶æˆ‘ä»¬ç›´æ¥ç”¨å®˜æ–¹é»˜è®¤çš„å°±è¡Œï¼Œè¿™é‡Œä¸»è¦å¯¹ç«™ç‚¹çš„é…ç½®æ–‡ä»¶åšè¯´æ˜ï¼›\n3.1 httpså¦‚æœä¸éœ€è¦httpsåŠ å¯†ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„é…ç½®æ–‡ä»¶æ¥æ“ä½œï¼Œå½“ä½¿ç”¨test.comè®¿é—®ä½ çš„äº‘æœåŠ¡å™¨ipæ—¶ï¼Œä¼šè¢«è½¬åˆ°4000ç«¯å£\nserver &#123;    listen 80;  # ç›‘å¬80ç«¯å£    server_name test.com;  # è‡ªå·±çš„åŸŸå    location / &#123;\t\t# è®¾ç½®ç¼“å†²åŒºå¤§å°\t\tproxy_buffer_size 64k;        proxy_buffers   32 32k;        proxy_busy_buffers_size 128k;        proxy_set_header HOST $host;        proxy_set_header X-Forwarded-Proto $scheme;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\t\t# éœ€è¦ä»£ç†çš„åœ°å€:ç«¯å£ï¼ˆå› ä¸ºæ˜¯dockeréƒ¨ç½²çš„ï¼Œéœ€è¦å¡«å…¬ç½‘ipï¼‰        proxy_pass http://IP:4000;    &#125;&#125;\n\n3.1.1 å…³äºproxy_passè¿™é‡Œå¿…é¡»è¦æ³¨æ„ä¸€ä¸‹proxy_pass\nå› ä¸ºæˆ‘ä»¬çš„nginxæ˜¯ç”¨dockeréƒ¨ç½²çš„ï¼Œæ­¤æ—¶ä½ å¡« 127.0.0.1æˆ–localhostï¼Œå®é™…ä¸Šè®¿é—®çš„éƒ½æ˜¯nginxè¿™ä¸ªdockerå†…éƒ¨çš„ç«¯å£ï¼Œæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œä¼šå¼¹å‡º502 gatewayæŠ¥é”™ï¼\næ­£ç¡®çš„åŠæ³•å°±æ˜¯å¡«äº‘æœåŠ¡å™¨çš„å…¬ç½‘ip+ç«¯å£\n3.2 httpsé…ç½®httpså¦‚ä¸‹ï¼Œè¿™æ ·é…ç½®ä¼šå°†80ç«¯å£çš„httpè®¿é—®å¼ºåˆ¶è½¬æˆhttps\nåŸŸåçš„è¯ä¹¦å¯ä»¥åœ¨åŸŸåæä¾›å•†é‡Œé¢ç”³è¯·ï¼Œè…¾è®¯äº‘æ”¯æŒç”³è¯·å•åŸŸå1å¹´çš„å…è´¹è¯ä¹¦ã€‚è¿˜å¯ä»¥å»joysslï¼Œç”³è¯·90å¤©çš„åŸŸåé€šé…ç¬¦è¯ä¹¦\nå› ä¸ºåœ¨å¯åŠ¨dockerå®¹å™¨çš„æ—¶å€™ï¼Œæˆ‘é…ç½®äº†è·¯å¾„æ˜ å°„ï¼Œè¯ä¹¦é…ç½®çš„cert/å¯¹åº”çš„å…¶å®æ˜¯ /root/docker/nginx/cert/ç›®å½•ï¼Œå°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ°è¯¥ç›®å½•ä¸‹å³å¯\nserver &#123;    listen 443 ssl;    server_name img.text.top;  # åŸŸå    # æ³¨æ„æ–‡ä»¶ä½ç½®ï¼Œæ˜¯ä»/etc/nginx/ä¸‹å¼€å§‹ç®—èµ·çš„    ssl_certificate cert/img.text.top.crt; # åŸŸåè¯ä¹¦æ–‡ä»¶crt    ssl_certificate_key cert/img.text.top.key; # åŸŸåè¯ä¹¦key    ssl_session_timeout 5m;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;    ssl_prefer_server_ciphers on;    client_max_body_size 1024m;    location / &#123;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $host;        proxy_set_header Upgrade-Insecure-Requests 1;        proxy_set_header X-Forwarded-Proto https;        # å› ä¸ºæ˜¯dockeréƒ¨ç½²çš„nginxï¼Œæ‰€ä»¥è¦å¡«äº‘æœåŠ¡å™¨å…¬ç½‘ip        proxy_pass http://äº‘æœåŠ¡å™¨å…¬ç½‘IP:ç«¯å£;    &#125;&#125;# å¼ºåˆ¶é‡å®šå‘server &#123;    listen 80; # ç›‘å¬80ç«¯å£    server_name img.text.top;  # åŸŸå    #æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps    return 301 https://$host$request_uri;&#125;\n\nä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯nginxçš„å®¹å™¨ï¼Œå³å¯æ­£å¸¸è®¿é—®\n\næ›´å¤šï¼šç”¨portainerç®¡ç†dockerportaineræ˜¯ä¸€ä¸ªå›¾å½¢åŒ–ç®¡ç†dockeré•œåƒå’Œå®¹å™¨çš„é¡¹ç›®ï¼Œè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼›ç¼ºç‚¹å°±æ˜¯åªæœ‰è‹±æ–‡ï¼Œæƒ³è¦ä¸­æ–‡å¯ä»¥é…ç½®ä¸­æ–‡åŒ…ï¼Œä½†æ˜¯ä¸­æ–‡åŒ…å·²ç»éå¸¸éå¸¸ä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œç´¢æ€§ç›´æ¥ç”¨è‹±æ–‡ç‰ˆ\ndocker run -d \\\t-p 14730:9000 \\\t-p 14729:8000 \\\t--name portainer \\\t--restart=always \\\t-v /var/run/docker.sock:/var/run/docker.sock \\\t-v /root/docker/portainer/data:/data \\\tportainer/portainer\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Linux","nginx","Docker"]},{"title":"ã€C++ã€‘Google Gtestæµ‹è¯•æ¡†æ¶çš„ä½¿ç”¨","url":"/posts/3098116292/","content":"gtestæ¨¡å—çš„å®‰è£…å‚è€ƒç«™å†…æ•™ç¨‹ ubuntuå®‰è£…google gtest\næœ¬æ–‡ä½¿ç”¨çš„gtestç‰ˆæœ¬ä¸º1.14.0ï¼›\n1.gtestæ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿgoogle gtestæ˜¯ä¸€ä¸ªc++çš„å•å…ƒæµ‹è¯•æ¨¡å—ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—è§„èŒƒåŒ–çš„å®ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œå‡½æ•°çš„å•å…ƒæµ‹è¯•ã€‚\n\nå•å…ƒæµ‹è¯•ä½ å¯ä»¥ç†è§£ä¸ºæµ‹è¯•æˆ‘ä»¬ç¼–å†™å¥½çš„æ¯ä¸ªå‡½æ•°æ¨¡å—ï¼Œç¡®ä¿è¿™äº›å‡½æ•°çš„åŠŸèƒ½ä¸ä¼šå½±å“å…¶ä»–å‡½æ•°ï¼Œå¹¶ä¿è¯å‡½æ•°èƒ½ä¾ç…§é¢„æœŸçš„åŠŸèƒ½è¿›è¡Œå·¥ä½œã€‚\n\nè¦çŸ¥é“ï¼Œç»å¤§éƒ¨åˆ†çš„è½¯ä»¶bugéƒ½æ˜¯åœ¨è®¾è®¡ã€åˆæ¬¡ä»£ç ç¼–å†™çš„è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ï¼Œæ¯”å¦‚ä½ å†™äº†ä¸€ä¸ªaddå‡½æ•°ï¼Œä½†æ˜¯é”™è¯¯çš„å°†è¿ç®—ç¬¦å†™æˆäº†-ï¼Œaddå°±å˜æˆsubå‡½æ•°äº†ï¼Œå¦‚æœè¿™ä¸ªaddå‡½æ•°åœ¨å…¶ä»–åŠŸèƒ½æ¨¡å—å®Œæˆä¹‹åæ‰å‘ç°è¢«å†™é”™ï¼Œå°±é—¹å¤§ç¬‘è¯äº†ã€‚\n\nå½“ç„¶ï¼Œä¸Šé¢è¿™ä¸ªaddçš„ä¾‹å­å¹¶ä¸åˆé€‚ï¼Œå› ä¸ºå®ƒå¤ªç®€å•äº†ã€‚ä½†å®é™…é¡¹ç›®ä¸­ï¼Œå°±æ˜¯ç”±å¤šä¸ªå¾ˆç®€å•çš„ä»£ç èšåˆè€Œæˆçš„ä¸€ä¸ªå¤§è½¯ä»¶æ¨¡å—ã€‚æ¯ä¸€ä¸ªçœ‹ä¸Šå»ç®€å•ã€ä¸å¯èƒ½å†™é”™çš„åœ°æ–¹ï¼Œéƒ½æœ‰å¯èƒ½éšè—çš„å‡ºé”™çš„å±é™©ã€‚\næ‰€ä»¥ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬åœ¨å®Œæˆæ¯ä¸ªåŠŸèƒ½å‡½æ•°çš„ç¼–å†™åï¼Œé€šè¿‡å•å…ƒæµ‹è¯•æ¥åˆ¤æ–­å‡½æ•°æ˜¯å¦æœ‰é—®é¢˜ã€‚\n2.gtestçš„ä»£ç åŸºæœ¬æ¡†æ¶ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¤šæ¨¡å—çš„è½¯ä»¶é¡¹ç›®éƒ½ä¼šç”¨cmakeæ¥å®ç°æ‰¹é‡åŒ–çš„ç¼–è¯‘å’Œå•å…ƒæµ‹è¯•çš„è¿è¡Œã€‚ä½†æœ¬æ–‡åªæ˜¯å¯¹gtestæ¨¡å—ä½¿ç”¨çš„æœ€åŸºæœ¬æ•™ç¨‹ï¼Œå†åŠ ä¸Šæˆ‘å¹¶æ²¡æœ‰å­¦ä¹ cmakeçš„ä½¿ç”¨ï¼Œæ‰€ä»¥æš‚æ—¶ä½¿ç”¨g++ç›´æ¥å¯¹å•æ¨¡å—è¿›è¡Œç¼–è¯‘å¹¶ä»‹ç»gtestçš„æµ‹è¯•å®ã€‚\n\nTesting Reference | GoogleTest\n\næ¯”è¾ƒå¸¸ç”¨çš„æ˜¯TESTå’ŒTEST_Fè¿™ä¸¤ä¸ªæµ‹è¯•å®ï¼Œæ›´å¤šæµ‹è¯•å®è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ä¸­çš„ä»‹ç»ã€‚\n2.1 TEST å•å…ƒæµ‹è¯•æ¨¡å—åœ¨gtestä¸­ï¼Œä¸€ä¸ªå•å…ƒæµ‹è¯•æ¨¡å—é•¿ä¸‹é¢è¿™æ ·\nTEST(TestSuiteName, TestName) &#123;  ... statements ...&#125;\n\nä½ å¯ä»¥ç†è§£ä¸ºï¼Œå·¦ä¾§æ˜¯è¢«æµ‹æ¨¡å—çš„åå­—ï¼Œå³ä¾§æ˜¯åœ¨è¿™ä¸ªè¢«æµ‹æ¨¡å—ä¸­çš„æŸä¸ªæµ‹è¯•çš„åå­—ï¼Œstatementsæ˜¯ä»»æ„è¢«æµ‹æ¨¡å—çš„ä»£ç ï¼›gtestæ¡†æ¶å»ºè®®ä½¿ç”¨å¤§é©¼å³°çš„å‘½åæ–¹å¼ï¼ŒTESTçš„å‘½åä¸­ä¸è¦å¸¦æœ‰_ä¸‹åˆ’çº¿ã€‚\n\næ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªæ¨¡å—Açš„å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆå·¦ä¾§å¯ä»¥å¡«å†™ä¸ºæ¨¡å—ATestï¼Œå³ä¾§å¡«å†™ä¸ºç±»ä¸­æŸä¸ªå‡½æ•°çš„æµ‹è¯•ã€‚è¿™ä¸¤ä¸ªåå­—å¯ä»¥éšä¾¿èµ·ï¼Œä½†æ˜¯åœ¨åŒä¸€ä¸ªTestSuiteNameä¸­ä¸èƒ½æœ‰ä¸¤ä¸ªç›¸åŒçš„TestNameï¼›\n\nä¸€ä¸ªå•å…ƒæµ‹è¯•æ¨¡å—çš„æˆåŠŸä¸å¤±è´¥å–å†³äºå†…éƒ¨å®šä¹‰çš„gtestæ–­è¨€å®ï¼Œå‚è€ƒåæ–‡çš„ä»‹ç»ã€‚\n2.2 TEST_F ç±»æµ‹è¯•æ¨¡å—ä¸Šè¿°çš„TESTæ–¹å¼æ˜¯ç”¨äºæµ‹è¯•æ™®é€šå‡½æ•°çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªTEST_Få¯ä»¥ç”¨äºå¯¹ç±»è¿›è¡Œæµ‹è¯•\nTEST_F(TestFixtureName, TestName) &#123;  ... statements ...&#125;\n\næ­¤æ—¶å·¦ä¾§çš„TestFixtureNameä¸å†æ˜¯éšä¾¿èµ·çš„äº†ï¼Œä½ å¿…é¡»å®šä¹‰ä¸€ä¸ªç»§æ‰¿äºtesting::Testçš„æµ‹è¯•ç±»ï¼Œè¯¥ç±»å¯ä»¥å®šä¹‰æˆå‘˜å˜é‡æˆ–å¯¹è¢«æµ‹ç›®æ ‡è¿›è¡Œåˆå§‹åŒ–ã€é”€æ¯æ“ä½œã€‚\nclass MyClassTest : public testing::Test &#123;protected:      void SetUp() // åˆå§‹åŒ–ï¼Œåœ¨æ¯ä¸ªTEST_Fä¸­éƒ½ä¼šè¢«è°ƒç”¨    &#123;&#125;    void TearDown() // é”€æ¯ï¼Œåœ¨æ¯ä¸ªTEST_Fç»“æŸæ—¶éƒ½ä¼šè°ƒç”¨    &#123;&#125;    \t// å¯ä»¥å®šä¹‰ä¸€äº›æˆå‘˜å˜é‡ï¼Œåœ¨TEST_Fä¸­èƒ½è®¿é—®    int _a;&#125;;\n\næœ€ç»ˆçš„æµ‹è¯•ä»£ç åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„\nclass MyClassTest : public testing::Test &#123;  ...&#125;;TEST_F(MyClassTest, HasPropertyA) &#123; ... &#125;TEST_F(MyClassTest, HasPropertyB) &#123; ... &#125;\n\n2.3 ç®€å•ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„gtestå•å…ƒæµ‹è¯•ç¼–å†™çš„ç¤ºä¾‹ï¼ŒåŒ…å«æµ‹è¯•å•å…ƒä½“å’Œmainå‡½æ•°ã€‚ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å¯ä»¥å†™Nä¸ªTESTæˆ–TEST_Fï¼Œå®ƒä»¬ä¼šæŒ‰é¡ºåºæ‰§è¡Œã€‚\n#include &lt;gtest/gtest.h&gt;// ä¸€ä¸ªå‡½æ•°æµ‹è¯•// å·¦ä¾§æ˜¯æµ‹è¯•æ¨¡å—çš„åå­—ï¼Œå³ä¾§æ˜¯è¯¥æ¨¡å—æµ‹è¯•çš„ç›®çš„TEST(ADDTEST, ADDTEST_TRUE)&#123;&#125;int main(int argc, char **argv)&#123;\t// ä¸»å‡½æ•°    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nä½¿ç”¨å¦‚ä¸‹g++å‘½ä»¤ç¼–è¯‘è¯¥ä»£ç ï¼Œæ³¨æ„gtestæ˜¯ä¸€ä¸ªåŠ¨æ€åº“ï¼Œéœ€è¦ä½¿ç”¨-lgtestè¿›è¡Œé“¾æ¥ã€‚\ng++ test.cpp -o test -lgtest\n\n\n3.gtestæä¾›çš„æ–­è¨€å®å®˜æ–¹æ–‡æ¡£ï¼šAssertions Reference | GoogleTest\ngtestä¸­æä¾›çš„å®åˆ†ä¸ºASSERTå’ŒEXPECTä¸¤ç§ï¼Œå…¶ä¸­ASSERTå®ä¼šåœ¨æ£€æŸ¥åˆ°é”™è¯¯çš„æ—¶å€™ç›´æ¥ç»ˆæ­¢å•å…ƒæµ‹è¯•ç”¨ä¾‹çš„è¿è¡Œï¼ˆæ³¨æ„æ˜¯å•ä¸ªå•å…ƒæµ‹è¯•ï¼‰ï¼Œè€ŒEXPECTä¸ä¼šã€‚\nTEST(EXP,EXP1)&#123;\tASSERT_EQ(1,1); // å¦‚æœè¿™ä¸ªå‡ºé”™äº†ï¼Œåç»­ä¸ä¼šæ‰§è¡Œ\t// è¿™é‡Œä¸ä¼šè¢«æ‰§è¡Œ\t&#125;TEST(EXP,EXP2)&#123;\tEXPECT_EQ(1,1); // å¦‚æœè¿™ä¸ªå‡ºé”™äº†ï¼Œè¿˜æ˜¯ä¼šç»§ç»­å¾€åæ‰§è¡Œè¿™ä¸ªæ¨¡å—çš„å…¶ä»–ä»£ç ã€‚\t// è¿™é‡Œçš„ä»£ç èƒ½è¢«æ‰§è¡Œ&#125;\n\nå•å…ƒæµ‹è¯•è¿è¡Œç»“æŸåï¼Œgtestä¼šç»™å‡ºæµ‹è¯•å¤±è´¥çš„æ¨¡å—æ±‡æ€»ã€‚\n3.1 ç›¸ç­‰&#x2F;å¤§å°åˆ¤æ–­\n\n\nASSERTå®\nEXPECTå®\nåŠŸèƒ½\nå‚æ•°ä¸ªæ•°\n\n\n\nASSERT_TRUE\nEXPECT_TRUE\nåˆ¤çœŸ\n1\n\n\nASSERT_FALSE\nEXPECT_FALSE\nåˆ¤å‡\n1\n\n\nASSERT_EQ\nEXPECT_EQ\nç›¸ç­‰\n2\n\n\nASSERT_NE\nEXPECT_NE\nä¸ç›¸ç­‰\n2\n\n\nASSERT_GT\nEXPECT_GT\nç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å¤§äºç¬¬äºŒä¸ªå‚æ•°\n2\n\n\nASSERT_LT\nEXPECT_LT\nå°äºï¼ˆåŸç†åŒä¸Šï¼‰\n2\n\n\nASSERT_GE\nEXPECT_GE\nå¤§äºç­‰äº\n2\n\n\nASSERT_LE\nEXPECT_LE\nå°äºç­‰äº\n2\n\n\nASSERT_FLOAT_EQ\nEXPECT_FLOAT_EQ\nå•ç²¾åº¦æµ®ç‚¹æ•°ç›¸ç­‰\n2\n\n\nASSERT_DOUBLE_EQ\nEXPECT_DOUBLE_EQ\nåŒç²¾åº¦æµ®ç‚¹æ•°ç›¸ç­‰\n2\n\n\nASSERT_NEAR\nEXPECT_NEAR\næµ®ç‚¹æ•°æ˜¯å¦æ¥è¿‘ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå…è®¸çš„è¯¯å·®å€¼ï¼‰\n3\n\n\nASSERT_STREQ\nEXPECT_STREQ\nCå­—ç¬¦ä¸²ç›¸ç­‰\n2\n\n\nASSERT_STRNE\nEXPECT_STRNE\nCå­—ç¬¦ä¸²ä¸ç›¸ç­‰\n2\n\n\nASSERT_STRCASEEQ\nEXPECT_STRCASEEQ\nCå­—ç¬¦ä¸²ç›¸ç­‰ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰\n2\n\n\nASSERT_STRCASENE\nEXPECT_STRCASENE\nCå­—ç¬¦ä¸²ä¸ç›¸ç­‰ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰\n2\n\n\nASSERT_PRED1\nEXPECT_PRED1\nè‡ªå®šä¹‰è°“è¯æµ‹è¯•ï¼ˆæœ‰1åˆ°5çº§ï¼Œå¯¹åº”ä¸åŒå‚æ•°ä¸ªæ•°çš„è‡ªå®šä¹‰å‡½æ•°ï¼‰\n2\n\n\nASSERT_THAT\nEXPECT_THAT\nåˆ¤æ–­å‡½æ•°è¿”å›å€¼æ˜¯å¦ç¬¦åˆç»™å®šçš„matcherï¼ˆgtestæä¾›çš„ï¼‰\n2\n\n\n3.2 å¼‚å¸¸ç›¸å…³é™¤äº†ä¸Šè¿°è¿™ç§åˆ¤æ–­å¤§å°å’Œç›¸ç­‰çš„å®ï¼Œè¿˜æœ‰å’Œå¼‚å¸¸ä»¥åŠç¨‹åºå´©æºƒç›¸å…³çš„å®\n\n\n\nASSERTå®\nEXPECTå®\nä½œç”¨\nå‚æ•°ä¸ªæ•°\n\n\n\nASSERT_THROW\nEXPECT_THROW\næœŸå¾…æŠ›å‡ºæŒ‡å®šå¼‚å¸¸ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¼‚å¸¸ç±»å‹\n2\n\n\nASSERT_ANY_THROW\nEXPECT_ANY_THROW\næœŸå¾…æŠ›å‡ºä»»ä½•å¼‚å¸¸\n1\n\n\nASSERT_NO_THROW\nEXPECT_NO_THROW\nä¸å¸Œæœ›æŠ›å‡ºä»»ä½•å¼‚å¸¸\n1\n\n\nASSERT_EXIT\nEXPECT_EXIT\næœŸæœ›ç¨‹åºä»¥æŒ‡å®šé”™è¯¯ç exitï¼Œä¸”æ ‡å‡†é”™è¯¯è¾“å‡ºç¬¦åˆç¬¬ä¸‰ä¸ªå‚æ•°çš„regexè¡¨è¾¾å¼\n3\n\n\nASSERT_DEATH\nEXPECT_DEATH\næœŸæœ›ç¨‹åºé”™è¯¯é€€å‡ºï¼ˆé€€å‡ºç é0ï¼‰ï¼Œä¸”æ ‡å‡†é”™è¯¯è¾“å‡ºç¬¦åˆç¬¬äºŒä¸ªå‚æ•°çš„regexè¡¨è¾¾å¼\n2\n\n\nASSERT_DEBUG_DEATH\nEXPECT_DEBUG_DEATH\nåŒä¸Šï¼Œä½†æ˜¯åœ¨è°ƒè¯•æ¨¡å¼ä¸‹æµ‹è¯•ï¼›éè°ƒè¯•æ¨¡å¼ä¸‹åªä¼šæ‰§è¡Œå‡½æ•°ï¼Œä¸åšåˆ¤æ–­ã€‚\n2\n\n\nASSERT_DEATH_IF_SUPPORTED\nEXPECT_DEATH_IF_SUPPORTED\nåŒDEATHï¼Œä½†æ˜¯åªæœ‰åœ¨æ”¯æŒçš„æ—¶å€™æ‰ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æœä¸æ”¯æŒåˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚\n2\n\n\n3.3 ç›´æ¥è¡¨æ˜æˆåŠŸå’Œå¤±è´¥è¿˜æœ‰ä¸¤ä¸ªå®æ˜¯ç›´æ¥è¡¨æ˜è¯¥å•å…ƒæµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œä»¥åŠæ˜¯å¦å¤±è´¥çš„ã€‚ä¸»åŠ¨è°ƒç”¨è¿™ä¸¤ä¸ªå®ä¼šæå‰ç»ˆæ­¢è¯¥å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚\nSUCCEED(); // æˆåŠŸFAIL();    // å¤±è´¥\n\n\n3.4 æ·»åŠ å¤±è´¥ä¿¡æ¯æœ‰çš„æ—¶å€™gtesté»˜è®¤æä¾›çš„ASSERTå®ä¸å¤Ÿæˆ‘ä»¬çš„ä½¿ç”¨ï¼Œä½ å¯ä»¥ç”¨è‡ªå®šä¹‰çš„åˆ¤æ–­ï¼Œå¹¶åœ¨ä¸ç¬¦åˆé¢„æœŸçš„æ—¶å€™å°†è¿™ä¸ªé”™è¯¯ä¿¡æ¯æ·»åŠ è¿›å»ï¼ŒGteståœ¨æœ€åæ±‡æ€»çš„æ—¶å€™ä¹Ÿä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚\n// Generates a nonfatal failure, which allows the current function to continue running.ADD_FAILURE();// Generates a nonfatal failure at the file and line number specified.ADD_FAILURE_AT(file_path,line_number);\n\nè¿™ä¸¤ä¸ªå®çš„æ•ˆæœå’ŒEXPECTç±»ä¼¼ï¼Œéƒ½å…è®¸ç»§ç»­å¾€åæ‰§è¡Œè¯¥å•å…ƒæµ‹è¯•ç”¨ä¾‹ã€‚\n4.ä½¿ç”¨ç¤ºä¾‹å¤§éƒ¨åˆ†çš„ä½¿ç”¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸‹é¢åªå¯¹å‡ ä¸ªæœ‰ä»£è¡¨æ€§çš„åšä½¿ç”¨ç¤ºä¾‹ï¼›ä¸ºäº†æ–¹ä¾¿ï¼Œåªå¯¹ASSERTåšç¤ºä¾‹ï¼Œå› ä¸ºå®ƒçš„æ•ˆæœå’ŒEXPECTå®Œå…¨ä¸€è‡´ï¼Œä¸Šæ–‡å·²ç»æåˆ°äº†äºŒè€…çš„åŒºåˆ«äº†ã€‚\n4.1 ASSERT_EXITASSERT_EXITæœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºå¾…æµ‹å‡½æ•°ã€é€€å‡ºç æˆ–é€€å‡ºä¿¡å·ã€é”™è¯¯ä¿¡æ¯regexï¼›å¾…æµ‹å‡½æ•°å¿…é¡»ä»¥æŒ‡å®šçš„é”™è¯¯ç æˆ–é”™è¯¯ä¿¡å·é€€å‡ºç¨‹åºï¼Œå¹¶åœ¨stderrä¸­æ‰“å°èƒ½è¢«è¿™ä¸ªregexåŒ¹é…çš„é”™è¯¯ä¿¡æ¯ã€‚\nASSERT_EXIT(statement,predicate,matcher);\n\nç¬¬äºŒä¸ªå‚æ•°çš„å¯é€‰é¡¹ï¼Œåˆ†åˆ«ä»£è¡¨é”™è¯¯é€€å‡ºç å’Œæ”¶åˆ°çš„é”™è¯¯ä¿¡å·\n// Returns true if the program exited normally with the given exit status code.::testing::ExitedWithCode(exit_code);// Returns true if the program was killed by the given signal.// Not available on Windows.::testing::KilledBySignal(signal_number);\n\nç¬¬ä¸‰ä¸ªå‚æ•°åœ¨å®˜ç½‘ä¸Šçš„æè¿°æ˜¯è¿™æ ·çš„\n\nThe parameter matcher is either a matcher for a const std::string&amp;, or a regular expression (see Regular Expression Syntax)â€”a bare string s (with no matcher) is treated as ContainsRegex(s), not Eq(s).\n\nå¦‚æœä¼ å…¥ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼Œåˆ™ä¼šåˆ¤æ–­stderrè¾“å‡ºçš„å†…å®¹æ˜¯å¦åŒ…å«è¯¥å­—ç¬¦ä¸²ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬çš„å‡½æ•°è°ƒç”¨äº†exit(1)ï¼Œä½¿ç”¨ASSERT_EXITæ¥åˆ¤æ–­å®ƒæ˜¯å¦ä»¥é¢„æœŸçš„é”™è¯¯ç 1é€€å‡ºç¨‹åºã€‚ç¬¬ä¸‰ä¸ªå‚æ•°.*æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œä»£è¡¨ä»»æ„é”™è¯¯ä¿¡æ¯çš„åŒ¹é…ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;void test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit\\n&quot;;    exit(1);    // int ret = 10/0;&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    // æœŸæœ›ä»¥é”™è¯¯ç 1é€€å‡º    ASSERT_EXIT(test_exit(),testing::ExitedWithCode(1),&quot;.*&quot;);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nç¼–è¯‘åçš„æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œæˆ‘ä»¬çš„å•å…ƒæµ‹è¯•æˆåŠŸäº†ï¼Œå› ä¸ºå‡½æ•°çš„ç¡®æ˜¯ä»¥é”™è¯¯ç 1é€€å‡ºçš„ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXIT[       OK ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\né‚£ä¹ˆå¦‚æœæ¢ä¸€ä¸ªé€€å‡ºæ–¹å¼å‘¢ï¼Ÿæ¯”å¦‚å› ä¸ºé™¤0é”™è¯¯é€€å‡º\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./testtest.cpp: In function &#x27;void test_exit()&#x27;:test.cpp:11:17: warning: division by zero [-Wdiv-by-zero]   11 |     int ret = 10/0;      |               ~~^~[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXITtest.cpp:17: FailureDeath test: test_exit()    Result: died but not with expected exit code:            Terminated by signal 8Actual msg:[  DEATH   ] test exit[  DEATH   ] [  FAILED  ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_EXIT 1 FAILED TEST\n\nè¿™ä¸ªæ—¶å€™å•å…ƒæµ‹è¯•å°±å¤±è´¥äº†ï¼Œå¹¶ä¼šæ‰“å°å‡ºå¤±è´¥è¡Œçš„ä½ç½®å’Œå¤±è´¥çš„åŸå› ã€‚è¿™é‡Œæåˆ°å¤±è´¥æ˜¯å› ä¸ºå—åˆ°äº†ä¿¡å·8ï¼Œä½†æˆ‘ä»¬é¢„æœŸæ˜¯é”™è¯¯ç 1ã€‚\nå°†é¢„æœŸä¿®æ”¹ä¸ºä¿¡å·8ï¼Œå°±èƒ½é€šè¿‡æµ‹è¯•\nvoid test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit\\n&quot;;    // exit(1);    int ret = 10/0;&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    // æœŸæœ›ä»¥æ”¶åˆ°ä¿¡å·8é€€å‡º    ASSERT_EXIT(test_exit(),testing::KilledBySignal(8),&quot;.*&quot;);&#125;\n\næ³¨æ„è¿™é‡Œçš„è­¦å‘Šæ˜¯g++ç¼–è¯‘å™¨æ£€æµ‹åˆ°é™¤0é”™è¯¯åæä¾›çš„ï¼Œå¹¶éæ˜¯è¿è¡Œæ—¶çš„é”™è¯¯ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./testtest.cpp: In function &#x27;void test_exit()&#x27;:test.cpp:11:17: warning: division by zero [-Wdiv-by-zero]   11 |     int ret = 10/0;      |               ~~^~[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXIT[       OK ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nå°†ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²ï¼Œgtestä¼šè¿›è¡Œstderrè¾“å‡ºæ˜¯å¦åŒ…å«è¯¥å­—ç¬¦ä¸²çš„æ£€æŸ¥ï¼›\nvoid test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit\\n&quot;;    int ret = 10/0;&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    // æœŸæœ›ä»¥æ”¶åˆ°ä¿¡å·é€€å‡º    ASSERT_EXIT(test_exit(),testing::KilledBySignal(8),&quot;happy&quot;);&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œå•å…ƒæµ‹è¯•å¤±è´¥çš„åŸå› æ˜¯â€œé”™è¯¯é€€å‡ºä½†æ˜¯æ²¡æœ‰æä¾›æœŸæœ›çš„errorè¾“å‡ºâ€ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./testtest.cpp: In function &#x27;void test_exit()&#x27;:test.cpp:10:17: warning: division by zero [-Wdiv-by-zero]   10 |     int ret = 10/0;      |               ~~^~[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXITtest.cpp:16: FailureDeath test: test_exit()    Result: died but not with expected error.  Expected: contains regular expression &quot;happy&quot;Actual msg:[  DEATH   ] test exit[  DEATH   ] [  FAILED  ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_EXIT 1 FAILED TEST\n\nå¦‚æœåœ¨é”™è¯¯è¾“å‡ºä¸­åŒ…å«happyå­—ç¬¦ä¸²ï¼Œåˆ™æ­£å¸¸é€šè¿‡æµ‹è¯•ã€‚\nvoid test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit happy\\n&quot;; // åŒ…å«happyå­—ç¬¦ä¸²    int ret = 10/0;&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    // æœŸæœ›ä»¥æ”¶åˆ°ä¿¡å·é€€å‡º    ASSERT_EXIT(test_exit(),testing::KilledBySignal(8),&quot;happy&quot;);&#125;\n\n[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXIT[       OK ] EXPTEST.EXPTEST_EXIT (1 ms)[----------] 1 test from EXPTEST (1 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (1 ms total)[  PASSED  ] 1 test.\n\næ³¨æ„ï¼šå‡½æ•°å†…çš„asserté”™è¯¯å¯¹åº”çš„æ˜¯ä¿¡å·6ï¼Œå¦‚æœéœ€è¦ç”¨ASSERT_EXITæ¥æ•æ‰asserté”™è¯¯ï¼Œåˆ™éœ€è¦ä½¿ç”¨testing::KilledBySignal(6)ï¼›\n4.2 ASSERT_DEATHASSERT_DEATHå’ŒASSERT_EXITå®çš„ä½œç”¨åŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡ASSERT_DEATHä¸éœ€è¦æˆ‘ä»¬ä¼ å…¥æœŸæœ›é€€å‡ºçš„é”™è¯¯ç æˆ–ä¿¡å·ã€‚æ­¤æ—¶ä»»æ„é0é”™è¯¯ç é€€å‡ºå’Œä»»æ„ä¿¡å·é€€å‡ºéƒ½ä¼šè¢«è§†ä¸ºASSERT_DEATHçš„æµ‹è¯•æˆåŠŸæƒ…å†µã€‚\nEXPECT_DEATH(statement,matcher);ASSERT_DEATH(statement,matcher);\n\nè¿™é‡Œçš„ç¬¬äºŒä¸ªå‚æ•°å’ŒASSERT_EXITçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸€è‡´ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªregexè¡¨è¾¾å¼ã€‚\nç¤ºä¾‹ä»£ç å’Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;void test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit\\n&quot;;    exit(1);&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    ASSERT_DEATH(test_exit(),&quot;.*&quot;);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXIT[       OK ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nASSERT_DEATHåªæœ‰åœ¨è¢«æµ‹å‡½æ•°æ²¡æœ‰é”™è¯¯é€€å‡ºï¼Œæˆ–è€…ä»¥exit(0)é€€å‡ºçš„æ—¶å€™ä¼šå‡ºé”™ã€‚å› ä¸º0å·åœ¨æ“ä½œç³»ç»Ÿä¸­æ˜¯è¿›ç¨‹é€€å‡ºçš„æ­£å¸¸æƒ…å†µï¼Œé0æ‰æ˜¯é”™è¯¯ä¿¡å·ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXITtest.cpp:15: FailureDeath test: test_exit()    Result: died but not with expected exit code:            Exited with exit status 0Actual msg:[  DEATH   ] test exit[  DEATH   ] [  FAILED  ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_EXIT 1 FAILED TEST\n\næ³¨æ„ï¼ŒæŠ›å‡ºå¼‚å¸¸å¹¶æ²¡æœ‰å½’ç»“åˆ°DEATHå’ŒEXITçš„åˆ¤å®šèŒƒå›´å†…ã€‚\nvoid test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit happy\\n&quot;;    // int ret = 10/0;    throw std::runtime_error(&quot;123&quot;);&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    ASSERT_DEATH(test_exit(),&quot;happy&quot;);&#125;\n\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXITtest.cpp:16: FailureDeath test: test_exit()    Result: threw an exception. Error msg:[  DEATH   ] test exit happy[  DEATH   ] [  DEATH   ] test.cpp:16:: Caught std::exception-derived exception escaping the death test statement. Exception message: 123[  DEATH   ] [  FAILED  ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_EXIT 1 FAILED TEST\n4.3 ASSERT_DEBUG_DEATHå¯¹äºASSERT_DEBUG_DEATHï¼Œå®˜æ–¹æ–‡æ¡£æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š\n\nIn debug mode, behaves the same as EXPECT_DEATH. When not in debug mode (i.e. NDEBUG is defined), just executes statement.\n\nè¿™é‡Œè¡¥å……ä¸€ä¸‹NDEBUGå®çš„ä½œç”¨ï¼Œåœ¨æ ‡å‡†åº“é‡Œé¢ï¼Œå®ƒä¼šæ§åˆ¶assertæ˜¯å¦èµ·æ•ˆæœã€‚å¦‚æœä¸€ä¸ªç¨‹åºdefineäº†NDEBUGå®ï¼ˆæ³¨æ„å¿…é¡»åœ¨å¼•ç”¨&lt;assert.h&gt;å¤´æ–‡ä»¶ä¹‹å‰å®šä¹‰ï¼‰ï¼Œé‚£ä¹ˆassertå°†ä»€ä¹ˆéƒ½ä¸åšã€‚\nå¯ä»¥çœ‹assert.hçš„æºä»£ç ï¼Œå½“å®šä¹‰äº†NDEBUGå®åï¼Œassertä¼šè°ƒç”¨__ASSERT_VOID_CAST (0)ï¼›åœ¨C++ä¸­è¿™ä¸ªcastæ˜¯ä¸€ä¸ªstatic_cast&lt;void&gt;ï¼Œåœ¨Cè¯­è¨€ä¸­æ˜¯ä¸€ä¸ª)void)çš„å¼ºè½¬ï¼Œåæ­£éƒ½æ˜¯å•¥éƒ½ä¸å¹²ã€‚\n#if defined __cplusplus &amp;&amp; __GNUC_PREREQ (2,95)# define __ASSERT_VOID_CAST static_cast&lt;void&gt;#else# define __ASSERT_VOID_CAST (void)#endif/* void assert (int expression);   If NDEBUG is defined, do nothing.   If not, and EXPRESSION is zero, print an error message and abort.  */#ifdef\tNDEBUG# define assert(expr)\t\t(__ASSERT_VOID_CAST (0))/* void assert_perror (int errnum);   If NDEBUG is defined, do nothing.  If not, and ERRNUM is not zero, print an   error message with the error text for ERRNUM and abort.   (This is a GNU extension.) */# ifdef\t__USE_GNU#  define assert_perror(errnum)\t(__ASSERT_VOID_CAST (0))# endif#else /* Not NDEBUG.  */\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•ç¤ºä¾‹ï¼Œå½“æˆ‘ä»¬æ²¡æœ‰å®šä¹‰NDEBUGçš„æ—¶å€™ï¼ŒASSERT_DEBUG_DEATHå’ŒASSERT_DEATHåšçš„æ˜¯ç›¸åŒçš„æ“ä½œã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;void test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit happy\\n&quot;;    exit(1);&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    ASSERT_DEBUG_DEATH(test_exit(),&quot;happy&quot;);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXIT[       OK ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nå¦‚æœåœ¨æ–‡ä»¶å¼€å¤´å®šä¹‰äº†NDEBUGï¼Œé‚£ä¹ˆASSERT_DEBUG_DEATHåˆ™åªä¼šè°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸ä¼šåšé”™è¯¯ä¿¡æ¯çš„åˆ¤æ–­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†å‡½æ•°ä¸­çš„exitåˆ é™¤ï¼Œgtestä¹Ÿæ²¡æœ‰æŠ¥å‘Šé”™è¯¯ã€‚\n#define NDEBUG 1 // ä¸€å®šè¦åœ¨å¼€å¤´å®šä¹‰#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;void test_exit()&#123;    std::cerr &lt;&lt; &quot;test exit happy\\n&quot;;    // exit(1); // æ²¡æœ‰é”™è¯¯é€€å‡º&#125;TEST(EXPTEST, EXPTEST_EXIT)&#123;    ASSERT_DEBUG_DEATH(test_exit(),&quot;happy&quot;);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¹¶æ²¡æœ‰é€€å‡ºï¼Œä½†æ˜¯ç”±äºå®šä¹‰äº†NDEBUGï¼ŒASSERT_DEBUG_DEATHå®æ²¡æœ‰æŠ¥å‘Šé”™è¯¯ã€‚ï¼ˆå»æ‰è¯¥å®ï¼Œåˆ™ä¼šå’ŒASSERT_DEATHä¸€æ ·æç¤ºå‡ºé”™ï¼‰\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EXITtest exit happy[       OK ] EXPTEST.EXPTEST_EXIT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\n4.4 ASSERT_THROWè°ƒç”¨å¯¹è±¡åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶åˆ¤æ–­å¼‚å¸¸ç±»å‹æ˜¯å¦ä¸ºæœŸå¾…ç±»å‹ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;void test_throw()&#123;    throw std::runtime_error(&quot;test&quot;);&#125;TEST(EXPTEST, EXPTEST_THROW)&#123;    ASSERT_THROW(test_throw(),std::runtime_error);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_THROW[       OK ] EXPTEST.EXPTEST_THROW (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nå½“æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸ä¸€è‡´çš„æ—¶å€™ä¼šå‡ºé”™\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_THROWtest.cpp:12: FailureExpected: test_throw() throws an exception of type std::runtime_error.  Actual: it throws std::length_error with description &quot;123&quot;.[  FAILED  ] EXPTEST.EXPTEST_THROW (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_THROW 1 FAILED TEST\n\nå¼‚å¸¸ç›¸å…³çš„è¿˜æœ‰ä¸¤ä¸ª\n\nASSERT_ANY_THROWä¸éœ€è¦ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåªå…³æ³¨ç›®æ ‡å‡½æ•°åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼›\nASSERT_NO_THROWä¹Ÿåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œç›®æ ‡å‡½æ•°ä¸åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼›\n\nå› ä¸ºå®ƒä»¬å¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ã€‚\n4.5 ASSERT_EQ&#x2F;NEç›¸ç­‰å’Œä¸ç›¸ç­‰çš„æ¯”è¾ƒã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;TEST(EXPTEST, EXPTEST_EQ)&#123;    int ret = 10;    ASSERT_EQ(ret,10);    ASSERT_NE(ret,29);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EQ[       OK ] EXPTEST.EXPTEST_EQ (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nASSERT_FLOAT_EQå’ŒASSERT_DOUBLE_EQæ˜¯åœ¨æ¯”è¾ƒçš„åŸºç¡€ä¸Šå…è®¸ä¸€å®šçš„æµ®ç‚¹æ•°ç²¾åº¦è¯¯å·®å€¼ã€‚å¦‚æœä½ éœ€è¦æ¯”è¾ƒä¸¤ä¸ªæµ®ç‚¹æ•°ï¼Œè¯·ä½¿ç”¨å¯¹åº”çš„æµ®ç‚¹æ•°ç±»å‹æ¯”è¾ƒå®ï¼Œè€Œä¸è¦ç›´æ¥ä½¿ç”¨ASSERT_EQï¼›\n4.6 ASSERT_GE&#x2F;LEæ³¨æ„ï¼Œå¤§å°å†™æ¯”è¾ƒéƒ½æ˜¯å·¦å’Œå³ç›´æ¥æŒ‰é¡ºåºæ¯”è¾ƒçš„ï¼Œæ¯”å¦‚GEæ˜¯åˆ¤æ–­å·¦è¾¹æ˜¯å¦å¤§äºå³è¾¹ï¼ˆä¸è¦æåé¡ºåºäº†ï¼‰\nTEST(EXPTEST, EXPTEST_GE)&#123;    int ret = 10;    ASSERT_GE(ret,5);    ASSERT_LE(ret,29);&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_EQ[       OK ] EXPTEST.EXPTEST_EQ (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\n4.7 ASSERT_NEARè¯¥å®æä¾›äº†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œåœ¨æµ®ç‚¹æ•°æ¯”è¾ƒæ—¶å…è®¸ä¸€å®šçš„è¯¯å·®å€¼ã€‚å®˜ç½‘æ–‡æ¡£è¯´æ˜æ˜¯ä¿è¯val1å’Œval2ä¸è¶…è¿‡abs_errorçš„è¯¯å·®è¾¹ç•Œã€‚\nEXPECT_NEAR(val1,val2,abs_error)ASSERT_NEAR(val1,val2,abs_error)// Verifies that the difference between val1 and val2 does not exceed the absolute error bound abs_error.\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;TEST(EXPTEST, EXPTEST_NEAR)&#123;    ASSERT_NEAR(3.14,3.15,0.01);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nå› ä¸ºä¸¤ä¸ªæ•°å­—çš„å·®è·çš„ç¡®åœ¨0.01çš„è¯¯å·®åŒºé—´ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡æµ‹è¯•ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_NEAR[       OK ] EXPTEST.EXPTEST_NEAR (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\nå¦‚æœå°†ç¬¬ä¸‰ä¸ªå‚æ•°çš„è¯¯å·®æ”¹ä¸º0.001ï¼Œåˆ™æ— æ³•é€šè¿‡æµ‹è¯•ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_NEARtest.cpp:8: FailureThe difference between 3.14 and 3.15 is 0.0099999999999997868, which exceeds 0.001, where3.14 evaluates to 3.1400000000000001,3.15 evaluates to 3.1499999999999999, and0.001 evaluates to 0.001.[  FAILED  ] EXPTEST.EXPTEST_NEAR (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_NEAR 1 FAILED TEST\n\n4.8 ASSERT_STREQ&#x2F;STRCASEEQå­—ç¬¦ä¸²ç›¸ç­‰æ¯”è¾ƒï¼Œä¸€ä¸ªä¸å¿½ç•¥å¤§å°å†™ï¼Œä¸€ä¸ªå¿½ç•¥å¤§å°å†™;\næ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå®çš„å…¥å‚éƒ½æ˜¯const char*ï¼Œä¸èƒ½ç›´æ¥ä¼ å…¥std::stringè¿›è¡Œæ¯”è¾ƒã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;TEST(EXPTEST, EXPTEST_STR)&#123;    std::string str1 = &quot;hello&quot;;    std::string str2 = &quot;hello&quot;;    std::string str3 = &quot;Hello&quot;;    ASSERT_STREQ(str1.c_str(),str2.c_str());    ASSERT_STRCASEEQ(str1.c_str(),str3.c_str());&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_STR[       OK ] EXPTEST.EXPTEST_STR (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\n\n4.9 ASSERT_TRUE&#x2F;FALSEboolå€¼çœŸå‡çš„åˆ¤æ–­ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;TEST(EXPTEST, EXPTEST_TRUE)&#123;    int a, b;    a = 1;    b = 2;    ASSERT_TRUE(a != b);    ASSERT_FALSE(a == b);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_TRUE[       OK ] EXPTEST.EXPTEST_TRUE (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\n\næ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå®åªæ¥å—boolå€¼æˆ–è€…intç±»å‹ï¼Œè¯¸å¦‚nullptrè¿™ç±»å€¼éƒ½æ˜¯ä¸èƒ½è¢«ç›´æ¥æ¥å—çš„ï¼ˆé™¤éä½ å¼ºè½¬ï¼‰ã€‚\n\nå¦‚æœä½ éœ€è¦åˆ¤æ–­ä¸€ä¸ªå‡½æ•°çš„ç»“æœæ˜¯å¦ä¸ºç©ºæŒ‡é’ˆnullptrï¼Œè¯·ä½¿ç”¨ASSERT_EQæ¥åˆ¤æ–­ï¼›\nå¦‚æœä½ çš„å‡½æ•°è¿”å›å€¼ç”¨äº†intä¸”ç”¨0æ¥æ ‡è¯†é”™è¯¯çš„æƒ…å†µï¼Œä¹Ÿå»ºè®®ç”¨ASSERT_EQæ¥æ›´å¯è¯»çš„åˆ¤æ–­ï¼Œè€Œä¸è¦ç”¨ASSERT_TRUE&#x2F;FALSEï¼›\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./testIn file included from /usr/local/include/gtest/gtest-printers.h:122,                 from /usr/local/include/gtest/gtest-matchers.h:49,                 from /usr/local/include/gtest/internal/gtest-death-test-internal.h:47,                 from /usr/local/include/gtest/gtest-death-test.h:43,                 from /usr/local/include/gtest/gtest.h:65,                 from test.cpp:1:test.cpp: In member function &#x27;virtual void EXPTEST_EXPTEST_TRUE_Test::TestBody()&#x27;:test.cpp:8:5: error: converting to &#x27;bool&#x27; from &#x27;std::nullptr_t&#x27; requires direct-initialization [-fpermissive]    8 |     ASSERT_FALSE(nullptr);      |     ^~~~~~~~~~~~\n\nè¿™é‡Œä¹Ÿèƒ½çœ‹å‡ºC++ä¸­nullptrå’ŒCè¯­è¨€ä¸­NULLçš„ä¸åŒï¼Œä½¿ç”¨ASSERT_FALSEæ¥åˆ¤æ–­NULLæ˜¯èƒ½é€šè¿‡ç¼–è¯‘çš„ï¼Œå› ä¸ºå®ƒæœ¬è´¨åªæ˜¯ä¸€ä¸ªdefineçš„æ•°å­—0ï¼Œå’Œboolå€¼çš„æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚\nASSERT_FALSE(NULL);\n\n\n4.10 ADD_FAILUREæ·»åŠ å¤±è´¥ä¿¡æ¯çš„æ•ˆæœç¤ºä¾‹\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;TEST(EXPTEST, EXPTEST_TRUE)&#123;    int a, b;    a = 1;    b = 2;    if (a!=b)    &#123;        ADD_FAILURE();    &#125;    // å‡è®¾æˆ‘çŸ¥é“è¢«æµ‹å‡½æ•°çš„ç›®æ ‡æ–‡ä»¶å’Œè¡Œå·    ADD_FAILURE_AT(&quot;add.hpp&quot;,20); &#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nå¦‚æœä½ çŸ¥é“å‡ºé”™çš„è¢«æµ‹å‡½æ•°çš„æ–‡ä»¶å’Œæ‰€åœ¨è¡Œæ•°ï¼Œä½¿ç”¨ADD_FAILURE_ATèƒ½æ›´å¥½çš„å¸®åŠ©å®šä½é—®é¢˜ã€‚å› ä¸ºADD_FAILUREåªä¼šæ˜¾ç¤ºå‡ºé”™å•å…ƒæµ‹è¯•çš„æ–‡ä»¶å’Œä½ç½®ã€‚\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_TRUEtest.cpp:13: FailureFailedadd.hpp:20: FailureFailed[  FAILED  ] EXPTEST.EXPTEST_TRUE (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_TRUE 1 FAILED TEST\n\n\nè¿™é‡Œä¹Ÿèƒ½çœ‹åˆ°ï¼ŒADD_FAILUREåï¼Œå•å…ƒæµ‹è¯•ä¼šåƒEXPECTå®ä¸€æ ·ç»§ç»­å¾€åè¿è¡Œã€‚\n4.11 ASSERT_THATå’ŒASSERT_THATç›¸å…³çš„matcheré€‰é¡¹åœ¨gtestä¸­æä¾›äº†ï¼Œæ³¨æ„éœ€è¦å¼•ç”¨gmockå¤´æ–‡ä»¶\n#include &lt;gmock/gmock.h&gt;using ::testing::AllOf;using ::testing::Gt;using ::testing::Lt;using ::testing::MatchesRegex;using ::testing::StartsWith;\n\næ›´å¤šmatcherå¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šMatchers\n\nè¿™é‡Œè¿˜æœ‰ä¸ªå°ç»†èŠ‚ï¼Œä½ ä¼šå‘ç°gtestå®˜ç½‘æ–‡æ¡£ä¸­çš„æ‰€æœ‰testingå‘½åç©ºé—´å‰é¢éƒ½å¸¦äº†ä¸€ä¸ª::ï¼Œè¿™æ ·ä¸ç®¡ä½ åœ¨ä»€ä¹ˆè‡ªå®šä¹‰çš„å‘½åç©ºé—´é‡Œé¢ç¼–å†™gtestçš„ä»£ç ï¼Œéƒ½å¯ä»¥é€šè¿‡::å…ˆå›åˆ°å…¨å±€å‘½åç©ºé—´ï¼Œå†è®¿é—®testingå‘½åç©ºé—´ã€‚å³ä¸ä¼šå’Œç”¨æˆ·è‡ªå®šä¹‰ç©ºé—´ä¸­çš„å†²çªã€‚\nå¦å¤–ï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨gtestæ¡†æ¶ï¼Œåº”è¯¥é¿å…è‡ªå·±çš„å‘½åç©ºé—´å’Œgtestçš„å‘½åç©ºé—´é‡åã€‚\n\nç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼Œæˆ‘ä»¬çš„å­—ç¬¦ä¸²çš„ç¡®æ˜¯ä»¥heå¼€å¤´çš„ï¼Œèƒ½é€šè¿‡æ£€æŸ¥ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;gmock/gmock.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;TEST(EXPTEST, EXPTEST_THAT)&#123;    std::string str = &quot;hello&quot;;    ASSERT_THAT(str.c_str(),testing::StartsWith(&quot;he&quot;));&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_THAT[       OK ] EXPTEST.EXPTEST_THAT (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\n\n4.12 ASSERT_PREDè°“è¯æµ‹è¯•å®ä¸€å…±æœ‰5ä¸ªï¼Œåˆ†åˆ«æ¥å—ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°å’Œè¯¥å‡½æ•°å¯¹åº”çš„å‚æ•°ï¼Œå¹¶åˆ¤æ–­è¿”å›å€¼æ˜¯å¦ä¸ºboolå€¼çš„trueã€‚æ•°å­—å°±ä»£è¡¨å‡½æ•°çš„å‚æ•°ä¸ªæ•°ï¼Œæœ€å¤šæ”¯æŒ5ä¸ªå‚æ•°çš„è‡ªå®šä¹‰å‡½æ•°ã€‚\nASSERT_PRED1(pred,val1)ASSERT_PRED2(pred,val1,val2)ASSERT_PRED3(pred,val1,val2,val3)ASSERT_PRED4(pred,val1,val2,val3,val4)ASSERT_PRED5(pred,val1,val2,val3,val4,val5)\n\næˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæµ‹è¯•å‡½æ•°ï¼Œå†æŠŠä¸¤ä¸ªå‚æ•°ä¼ å…¥è¯¥å‡½æ•°ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªç»“æœ\n#include &lt;gtest/gtest.h&gt;#include &lt;gmock/gmock.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;string&gt;bool is_eq(int a, int b)&#123;    return a == b;&#125;TEST(EXPTEST, EXPTEST_PRED)&#123;    ASSERT_PRED2(is_eq, 1, 2);    // ç­‰ä»·äº ASSERT_TRUE(is_eq(1,2));&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\n\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from EXPTEST[ RUN      ] EXPTEST.EXPTEST_PREDtest.cpp:14: Failureis_eq(1, 2) evaluates to false, where1 evaluates to 12 evaluates to 2[  FAILED  ] EXPTEST.EXPTEST_PRED (0 ms)[----------] 1 test from EXPTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 0 tests.[  FAILED  ] 1 test, listed below:[  FAILED  ] EXPTEST.EXPTEST_PRED 1 FAILED TEST\n\n5.TEST_Fä»‹ç»å®Œæ¯•æ–­è¨€å®äº†ï¼ŒTESTçš„ä½œç”¨æƒ³å¿…å¤§å®¶ä¹Ÿæ˜ç™½äº†ï¼Œä¸‹é¢å¯¹TEST_Fç»™å‡ºä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ã€‚\nåœ¨ä¸Šæ–‡ä»‹ç»TEST_Fä¸­æåˆ°è¿‡ç¼–å†™çš„åŸºæœ¬æ¡†æ¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤º\nclass MyClassTest : public testing::Test &#123;  ...&#125;;TEST_F(MyClassTest, HasPropertyA) &#123; ... &#125;TEST_F(MyClassTest, HasPropertyB) &#123; ... &#125;\n\nå‡è®¾æˆ‘ä»¬éœ€è¦å¯¹MyClassç±»è¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆMyClassTestç±»å°±æ˜¯å¯¹MyClassè¿›è¡Œåˆå§‹åŒ–å’Œé”€æ¯æ“ä½œçš„ï¼Œæ¯ä¸€ä¸ªTEST_Féƒ½æ˜¯å¯¹MyClassä¸­çš„æŸä¸ªæˆå‘˜å˜é‡è¿›è¡Œæµ‹è¯•ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹ç±»çš„å•å…ƒæµ‹è¯•çš„ç¤ºä¾‹ï¼Œç›®çš„æ˜¯ç¡®è®¤AddXå’ŒAddYçš„æƒ…å†µç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œèƒ½æ­£å¸¸ç»™æˆå‘˜å˜é‡æ·»åŠ å€¼ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;gmock/gmock.h&gt;#include &lt;iostream&gt;#include &lt;unistd.h&gt;#include &lt;memory&gt;#include &lt;string&gt;class MyClass&#123;public:    MyClass(int x = 0, int y = 0) : _x(x), _y(y) &#123;&#125;    void AddX(int val)    &#123;        _x += val;    &#125;    void AddY(int val)    &#123;        _y += val;    &#125;    int GetX() &#123; return _x; &#125;    int GetY() &#123; return _y; &#125;private:    int _x;    int _y;&#125;;class MyClassTest : public testing::Test&#123;protected:    void SetUp()    &#123;        std::cout &lt;&lt; &quot;set up for MyClass\\n&quot;;        _mc = std::make_shared&lt;MyClass&gt;();    &#125;    void TearDown()    &#123;        std::cout &lt;&lt; &quot;tear down for MyClass\\n&quot;;        _mc.reset();    &#125;    std::shared_ptr&lt;MyClass&gt; _mc;&#125;;TEST_F(MyClassTest, MyClassTestAddX)&#123;    _mc-&gt;AddX(10);    EXPECT_EQ(_mc-&gt;GetX(), 10);&#125;TEST_F(MyClassTest, MyClassTestAddY)&#123;    _mc-&gt;AddY(20);    EXPECT_EQ(_mc-&gt;GetY(), 20);&#125;int main(int argc, char **argv)&#123;    testing::InitGoogleTest(&amp;argc, argv);    return RUN_ALL_TESTS();&#125;\n\nåœ¨ä»£ç ä¸­ï¼ŒTEST_Fä½“å†…å¯ä»¥è®¿é—®MyClassTestçš„æˆå‘˜å˜é‡_mcï¼Œå¹¶è°ƒç”¨å®ƒçš„æˆå‘˜å‡½æ•°ã€‚è¿™æ ·å°±é¿å…äº†æˆ‘ä»¬åœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¸­å¯¹ä¸€äº›å…¬ç”¨çš„ç±»è¿›è¡Œå¤šæ¬¡åˆå§‹åŒ–ç¨‹åºç¼–å†™çš„æ“ä½œã€‚\nç¼–è¯‘è¿è¡Œè¿™ä¸ªä»£ç ï¼Œèƒ½çœ‹åˆ°SetUpå’ŒTearDownåœ¨æ¯æ¬¡TEST_Fä¹‹å‰å’Œä¹‹åéƒ½ä¼šè¢«æ‰§è¡Œï¼Œå¹¶éåªæ‰§è¡Œä¸€æ¬¡ï¼\nâ¯ g++ test.cpp -o test -lgtest &amp;&amp; ./test[==========] Running 2 tests from 1 test suite.[----------] Global test environment set-up.[----------] 2 tests from MyClassTest[ RUN      ] MyClassTest.MyClassTestAddXset up for MyClasstear down for MyClass[       OK ] MyClassTest.MyClassTestAddX (0 ms)[ RUN      ] MyClassTest.MyClassTestAddYset up for MyClasstear down for MyClass[       OK ] MyClassTest.MyClassTestAddY (0 ms)[----------] 2 tests from MyClassTest (0 ms total)[----------] Global test environment tear-down[==========] 2 tests from 1 test suite ran. (0 ms total)[  PASSED  ] 2 tests.\n\n\nå¦‚æœä½ éœ€è¦æµ‹è¯•ä¸€ä¸ªç±»çš„ç§æœ‰æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨g++çš„ç¼–è¯‘å‘½ä»¤-fno-access-controlç›´æ¥å–æ¶ˆè®¿é—®é™å®šç¬¦\ng++ test.cpp -o test -fno-access-control -lgtest\n\næ­¤æ—¶åœ¨ç±»å¤–å¯¹ç§æœ‰æˆå‘˜å’Œç§æœ‰å‡½æ•°çš„ç›´æ¥è®¿é—®ä¸ä¼šå‡ºç°ç¼–è¯‘æŠ¥é”™ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ åªå¯ä»¥åœ¨å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨è¯¥ç¼–è¯‘å‘½ä»¤ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸åº”è¯¥è¿™ä¹ˆåšï¼\nThe endå¯¹äºGtestçš„å®çš„ä»‹ç»åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚\ngoogle gtestæ¡†æ¶ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ªgmockæ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—çš„ä¸»è¦ä½œç”¨æ˜¯ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œé‡å†™è™šå‡½æ•°ï¼Œå¹¶å¯ä»¥åœ¨æµ‹è¯•å¤¹å…·ä¸­ç”¨EXPECT_CALLè‡ªå®šä¹‰é‡å†™åå‡½æ•°çš„è¿”å›å€¼å’Œè°ƒç”¨æ¬¡æ•°ã€‚åœ¨æˆ‘é‡åˆ°çš„å®é™…é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªgmockæ¨¡å—ç”¨åˆ°çš„æ¬¡æ•°å¾ˆå°‘ï¼Œå› ä¸ºå®ƒçš„é€‚ç”¨èŒƒå›´å®åœ¨æ˜¯å¤ªçª„äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp","å•å…ƒæµ‹è¯•"]},{"title":"ã€Dockerã€‘é…ç½®lsky proå…°ç©ºå›¾åºŠ","url":"/posts/370869610/","content":"Docker éƒ¨ç½² lsky pro å…°ç©ºå›¾åºŠçš„æ•™ç¨‹\n\n\n1.ä½¿ç”¨Dockeréƒ¨ç½²1.1 å‘½ä»¤è¡Œå‘½ä»¤æ¯”è¾ƒç®€å•ï¼Œç”¨ä¸‹é¢çš„å³å¯\ndocker run -d \\--name lsky \\-p 14728:80 \\-v /root/docker/lsky:/var/www/html \\halcyonazure/lsky-pro-docker:latest\n\n\n--name è®¾ç½®å®¹å™¨åå­—ä¸º lsky\n-p è®¾ç½®ç«¯å£éšå°„ï¼Œå®¹å™¨çš„80ç«¯å£æ˜ å°„ç»™æœ¬åœ°çš„14728ç«¯å£\n-v è®¾ç½®å­˜å‚¨æ˜ å°„ï¼Œæœ¬åœ°çš„/root/docker/lsky æ˜ å°„ç»™ /var/www/html\n\nå®Œæˆåï¼Œè¿›å…¥IP:14728 å³å¯æ‰“å¼€ä½ çš„å›¾åºŠé¡µé¢\n\næ­¤å‘½ä»¤åœ¨CentOS7.2äº‘æœåŠ¡å™¨ä¸Šæµ‹è¯•æœ‰æ•ˆï¼Œä½†åœ¨æˆ‘çš„nasä¸Šæµ‹è¯•æ— æ•ˆ\n\n2023.05.17æ›´æ–°ï¼Œå½“æ—¶å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬çš„å®¹å™¨ã€‚ç›®å‰æ–°ç‰ˆæœ¬çš„å®¹å™¨å·²ç»åˆ‡æ¢äº†å†…éƒ¨ç«¯å£ä¸º8089ï¼Œæ‰€ä»¥æ–°ç‰ˆæœ¬çš„å‘½ä»¤å¦‚ä¸‹\ndocker run -d \\\t--name lsky \\\t-p 14728:8089 \\\t-v /root/docker/lsky:/var/www/html \\\thalcyonazure/lsky-pro-docker:latest\n\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå½“åˆæˆ‘å†™ä¸‹äº†â€œåœ¨nasä¸Šæµ‹è¯•æ— æ•ˆâ€çš„è®°å½•ã€‚å®¹å™¨å†…éƒ¨ç«¯å£å¹¶ä¸æ˜¯80\n2.åˆå§‹åŒ–æ–°ç”¨æˆ·ç›´æ¥ç”¨sqliteå³å¯ï¼Œå¦‚æœå¯¹æ€§èƒ½æœ‰æ›´é«˜è¦æ±‚ï¼Œå»ºè®®ä½¿ç”¨mysqlã€‚\n\nå› ä¸ºæˆ‘å°±æ˜¯ç»™è‡ªå·±ä½œå›¾åºŠè€Œå·²ï¼Œå¯¹mysqlçš„è®¤çŸ¥è¿‘ä¹ä¸º0ï¼Œæ‰€ä»¥ç›´æ¥ç”¨sqliteæ–¹ä¾¿å¤šäº†ã€‚\n\nåç»­æ‰“å¼€ä¸»é¡µé¢å°±èƒ½ä¸Šä¼ æ–‡ä»¶äº†\n2.1 è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·æ€»å®¹é‡é¦–å…ˆå½“ç„¶æ˜¯è¿›å…¥ç”¨æˆ·ç»„è®¾ç½®ï¼ŒæŠŠè‡ªå·±è¿™ä¸ªç®¡ç†å‘˜ç”¨æˆ·çš„æ€»å®¹é‡æ”¹æˆ5gbï¼ˆé»˜è®¤500mbï¼‰\n\nåœ¨ç³»ç»Ÿè®¾ç½®é‡Œå¯ä»¥æ”¹ç”¨æˆ·çš„åˆå§‹å®¹é‡ï¼Œçœ‹ä½ çš„æƒ…å†µè¦ä¸è¦å¢åŠ \n\n2.2 æ–°å»ºè§’è‰²ç»„å…¶æ¬¡ï¼Œå¯ä»¥åœ¨è§’è‰²ç»„é‡Œé¢æ–°å¢ä¸€ä¸ªç®¡ç†å‘˜ç»„ï¼Œè®¾ç½®ä¸€ä¸‹å•å›¾å¤§å°é™åˆ¶ï¼ˆé»˜è®¤5mbï¼‰ä»¥åŠæ¯å¤©&#x2F;æ¯å‘¨&#x2F;æ¯æœˆçš„å›¾ç‰‡ä¸Šä¼ æ•°é‡é™åˆ¶ï¼›åŒæ—¶ï¼Œåœ¨è§’è‰²ç»„è¿™é‡Œè¿˜å¯ä»¥ä¿®æ”¹å‘½åæ ¼å¼\n\nä¸ªäººå»ºè®®å»æ‰è·¯å¾„å‘½åä¸­çš„æ—¥æœŸï¼Œè¿™æ ·èƒ½ä¸€å®šç¨‹åº¦ä¸Šçš„é¿å…åŒä¸€å›¾ç‰‡çš„äºŒæ¬¡å­˜å‚¨ã€‚\n\nå¦‚æœä½ ä¸Šä¼ äº†ä¸¤ä¸ªå®Œå…¨ä¸€æ ·çš„å›¾ç‰‡ï¼Œåœ¨æˆ‘çš„å›¾ç‰‡é‡Œé¢ä¼šæ˜¾ç¤ºä¸¤ä¸ªï¼Œä½†æ˜¯åªä¼šæœ‰ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶ã€‚\n\næ–‡ä»¶çš„å‘½åé™¤äº†éšæœºå­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥é€‰æ‹©md5ã€æ—¶é—´æˆ³å‘½å\n\n2.3 è®¾ç½®é˜¿é‡Œäº‘OSSä¸ºå­˜å‚¨è¿™éƒ¨åˆ†å¾ˆç®€å•ï¼Œç…§ç€æ ‡è¯†çš„å¡«å°±è¡Œäº†ã€‚ä¸ªäººè¿˜æ˜¯é€‰æ‹©äº†æœ¬åœ°å­˜å‚¨çš„æ–¹å¼ï¼ˆé˜¿é‡Œäº‘OSSæ‰¹é‡å¯¼å‡ºæ•°æ®å¾ˆéº»çƒ¦ï¼‰\n\nå¡«äº†ä¹‹åï¼Œä¸Šä¼ çš„å›¾ç‰‡ä¼šç›´æ¥è¿”å›é˜¿é‡Œäº‘OSSçš„é“¾æ¥\n2.4 æƒé™é—®é¢˜å¦‚æœä½ æœ‰ä¸€äº›æœ¬åœ°çš„å›¾ç‰‡ï¼Œæƒ³æ·»åŠ åˆ°lskyå›¾åºŠçš„æ ¹ç›®å½•æ–¹ä¾¿è®¿é—®çš„è¯ï¼Œå°±éœ€è¦é…ç½®ä¸€ä¸‹ç›®å½•çš„å›¾ç‰‡\nä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€å›¾ç‰‡çš„å‹ç¼©åŒ…ï¼Œæˆ‘æƒ³å°†å…¶æ”¾å…¥lskyçš„stroage/appçš„myæ–‡ä»¶å¤¹é‡Œé¢ï¼Œé‚£ä¹ˆåˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹çš„æ—¶å€™ï¼Œå°±éœ€è¦ä¿®æ”¹å®ƒçš„æƒé™\nchown 33:tape my # é…ç½®myæ–‡ä»¶å¤¹çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„# 33å’Œtapeæ˜¯dockeré…ç½®lskyçš„é»˜è®¤ç”¨æˆ·åå’Œç”¨æˆ·ç»„\n\nå¦åˆ™lskyå›¾åºŠæ²¡æœ‰åŠæ³•æ­£ç¡®è¯»å–æˆ–è€…å¾€è¿™ä¸ªç›®å½•å†™å…¥ï¼Œä»è€Œå¯¼è‡´ä¸Šä¼ é”™è¯¯\n3.httpsè®¿é—®3.1 ä¿®æ”¹ä»£ç å‚è€ƒ https://github.com/lsky-org/lsky-pro/issues/321\néœ€è¦æ·»åŠ ä»£ç ï¼Œdockerç”¨ä¸‹é¢çš„æ–¹å¼æ·»åŠ åé‡å¯å³å¯\ndocker exec -it å®¹å™¨åå­— sed -i &#x27;32 a \\\\\\Illuminate\\\\Support\\\\Facades\\\\URL::forceScheme(&#x27;&quot;&#x27;&quot;&#x27;https&#x27;&quot;&#x27;&quot;&#x27;);&#x27; /var/www/html/app/Providers/AppServiceProvider.php\n\nä¸ªäººæ„Ÿè§‰ï¼Œè¯¥issueå·²ç»æå‡ºäº†å°†è¿‘ä¸€å¹´ï¼Œlskyè¿˜æ˜¯ä¸æ”¯æŒåœ¨å‰ç«¯åå°æˆ–è€…é…ç½®æ–‡ä»¶ä¸­ç›´æ¥é…ç½®httpsï¼Œå®åœ¨æœ‰ç‚¹ä¸å¤ªåº”è¯¥ã€‚æˆ–è®¸ç»´æŠ¤è€…æ˜¯è®¤ä¸ºè¯¥ä¿®æ”¹ä»£ç çš„æ“ä½œå¹¶ä¸å›°éš¾ï¼Œå°±æ²¡æœ‰å†™å…¥é…ç½®æ–‡ä»¶ä¸­ã€‚\nä¸è¿‡è¿™åªæ˜¯é¸¡è›‹é‡ŒæŒ‘éª¨å¤´ï¼Œlskyæ•´ä½“è¿˜æ˜¯éå¸¸å¥½ç”¨çš„\n3.2 nginxé…ç½®å®‰è£…nginxï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„ nginxå®‰è£…åšå®¢\nserver &#123;    listen 443 ssl;    server_name img.text.top;  # åŸŸå    # æ³¨æ„æ–‡ä»¶ä½ç½®ï¼Œæ˜¯ä»/etc/nginx/ä¸‹å¼€å§‹ç®—èµ·çš„    ssl_certificate cert/img.text.top.crt; # åŸŸåè¯ä¹¦æ–‡ä»¶crt    ssl_certificate_key cert/img.text.top.key; # åŸŸåè¯ä¹¦key    ssl_session_timeout 5m;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;    ssl_prefer_server_ciphers on;    client_max_body_size 1024m;    location / &#123;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header Host $host;        proxy_set_header Upgrade-Insecure-Requests 1;        proxy_set_header X-Forwarded-Proto https;        # å› ä¸ºæ˜¯dockeréƒ¨ç½²çš„nginxï¼Œæ‰€ä»¥è¦å¡«äº‘æœåŠ¡å™¨å…¬ç½‘ip        proxy_pass http://äº‘æœåŠ¡å™¨å…¬ç½‘IP:ç«¯å£;    &#125;&#125;# å¼ºåˆ¶é‡å®šå‘server &#123;    listen 80; # ç›‘å¬80ç«¯å£    server_name img.text.top;  # åŸŸå    #æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps    return 301 https://$host$request_uri;&#125;\n\nå†™å…¥é…ç½®æ–‡ä»¶åï¼Œé‡å¯nginxå®¹å™¨ï¼Œå¹¶å°†åŸŸåçš„è§£æè®¾ç½®æˆä½ äº‘æœåŠ¡å™¨çš„å…¬ç½‘ipï¼Œå³å¯ä»¥ç”¨img.text.topæˆ–img1.text.topè®¿é—®ä½ çš„lskyå›¾åºŠ\n3.2.1 httpé‡å†™ä¸ºhttpsæ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œlskyçš„æ‰€æœ‰æ–‡ä»¶åŠ è½½éƒ½ä¼šèµ°httpï¼Œå³ä¾¿ä½ æ‰“å¼€äº†https://img.musnow.topï¼Œé‚£äº›csså’Œjsçš„èµ„æºè¿˜æ˜¯èµ°äº†http://img.musnow.topï¼Œè¿™ç§æ··åˆhttpå’Œhttpsçš„åŠ è½½å®¹æ˜“è¢«æµè§ˆå™¨æ‹¦æˆªï¼Œå¯¼è‡´lskyå›¾åºŠçš„ç•Œé¢æ˜¾ç¤ºçš„ä¹±ä¸ƒå…«ç³Ÿã€‚\n\n\næ‰€ä»¥nginxé…ç½®æ–‡ä»¶çš„locationä¸­ï¼Œä¸€å®šè¦åŠ ä¸Šå¦‚ä¸‹é…ç½®é¡¹ï¼Œç›¸å½“äºå°†httpé‡å†™ä¸ºhttps\nproxy_set_header Upgrade-Insecure-Requests 1;\n\nå¦‚æœä½ åƒæˆ‘ä¸€æ ·ä½¿ç”¨äº†1panelæ¥ç®¡ç†ç«™ç‚¹ï¼Œæ­¤æ—¶openrestyï¼ˆ1panelç”¨çš„å°±æ˜¯è¿™ä¸ªï¼‰çš„å®‰è£…è·¯å¾„å¦‚ä¸‹\n/opt/1panel/apps/openresty/openRestry/www/sites/\n\nåœ¨è¿™é‡Œé¢ä½ å¯ä»¥çœ‹åˆ°ä½ é…ç½®å¥½çš„ç«™ç‚¹ï¼ˆæ–‡ä»¶å¤¹åå­—éƒ½æ˜¯åŸŸåï¼‰\nè¿›å…¥ä½ æƒ³ä¿®æ”¹çš„åŸŸåç«™ç‚¹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å‡ ä¸ªæ–‡ä»¶å¤¹\nindex  log  proxy  ssl  waf\n\nè¿›å…¥proxyæ–‡ä»¶å¤¹ï¼Œé‡Œé¢ä¼šæœ‰ä¸€ä¸ªroot.confï¼Œå³ä¸ºæ ¹è·¯å¾„çš„é…ç½®æ–‡ä»¶ï¼Œä½ éœ€è¦ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ ä¸Šä¸Šè¿°æåˆ°çš„é…ç½®é¡¹ï¼Œå¦åˆ™lskyçš„ç•Œé¢ä¼šå˜ä¹±ã€‚\nä¿®æ”¹å¥½äº†ä»¥åï¼Œè¿›å…¥1panelçš„webé¡µé¢ï¼Œæ‰¾åˆ°ç«™ç‚¹çš„é…ç½®æ–‡ä»¶é€‰é¡¹æ¡†\n\nç‚¹å‡»æœ€ä¸‹æ–¹çš„ä¿å­˜å¹¶é‡è½½ï¼Œå³å¯ç”Ÿæ•ˆ\n\nåˆ·æ–°ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢åŠ è½½æ­£å¸¸äº†\n\n3.3 åˆæ‹äº‘cdnåœ¨æˆ‘çš„é…ç½®é¡¹ä¸­ï¼Œå¹¶æ²¡æœ‰æŠŠimg1å’Œimgéƒ½è§£æåˆ°äº‘æœåŠ¡å™¨ï¼Œè€Œæ˜¯å°†img1ä½œä¸ºcdnåŠ é€Ÿçš„åŸŸå\nè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯åˆæ‹äº‘CDNï¼Œæ³¨æ„ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦ç”³è¯·å¥½è¿™ä¸¤ä¸ªå­åŸŸåçš„httpsè¯ä¹¦ï¼Œå¯ä»¥æ˜¯å•åŸŸåè¯ä¹¦ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šé…ç¬¦è¯ä¹¦ã€‚å•åŸŸåè¯ä¹¦èƒ½åœ¨åˆæ‹äº‘CDNä¸­å…è´¹ç”³è¯·\n\næ¨èå¤§å®¶å»ç”³è¯·ä¸€ä¸ªåˆæ‹äº‘è”ç›Ÿï¼Œåªéœ€è¦åœ¨ç½‘ç«™é¡µè„šè´´ä¸€ä¸ªlogoï¼Œå°±èƒ½ç™½å«–ä¸€å¹´67å…ƒçš„ä»£é‡‘åˆ¸ã€‚æ–°äººç”¨æˆ·ä¹Ÿæœ‰ä¸€ä¸ªæœˆçš„61å…ƒä»£é‡‘åˆ¸\n\n\n3.3.1 åˆ›å»ºCDNæœåŠ¡è¿›å…¥æ§åˆ¶å°ï¼Œç‚¹å‡»åˆ›å»ºCDNæœåŠ¡ï¼ŒæŒ‰å¦‚ä¸‹æ ¼å¼å¡«å†™\n\nåˆ›å»ºå¥½äº†ä¹‹åï¼Œå¦‚æœè®¿é—®img1.text.topï¼Œé‚£ä¹ˆå°±æ˜¯ç»è¿‡äº†cdnçš„ï¼Œå¦‚æœè®¿é—®img.text.topå³ä¸ºæºç«™\næ­¤æ—¶ä½ å¯ä»¥ä¿®æ”¹lsky proå­˜å‚¨ç­–ç•¥ä¸­çš„å›¾ç‰‡è®¿é—®urlï¼Œè®©lskyç›´æ¥è¿”å›img1.text.topçš„è¿æ¥\n\n3.3.2 å›æºhoståˆ›å»ºå¥½äº†ä¹‹åï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥é…ç½®ã€‚åœ¨å›æºç®¡ç†ä¸­ï¼Œä¿®æ”¹å›æºhostä¸ºæºç«™åŸŸåã€‚å¦‚æœæ˜¯ğŸ‘†å›¾åˆ›å»ºçš„æ ·å¼ï¼Œé‚£ä¹ˆæºç«™åŸŸåå°±æ˜¯img.text.top\n\nè§£é‡Šä¸€ä¸‹è¿™é‡Œçš„å›æºhost\n\nç®€å•æ¥è¯´å°±æ˜¯æµè§ˆå™¨åœ¨è®¿é—®img1.text.topåŠ é€ŸåŸŸåçš„æ—¶å€™ï¼Œåˆæ‹äº‘æœåŠ¡å™¨ä¼šè®¿é—®img.text.topè¿›è¡Œå›æºæ“ä½œ\næ­¤æ—¶ä»–ä¼šå‘é€ä¸€ä¸ªhostï¼Œå¦‚æœè¿™é‡Œä¸è®¾ç½®ï¼Œé»˜è®¤çš„hostå°±æ˜¯è®¿é—®åŸŸåï¼Œå³img1.text.top\nä½†æ˜¯æˆ‘ä»¬çš„äº‘æœåŠ¡å™¨ä¸­nginxå¯èƒ½æ²¡æœ‰é…ç½®img1.text.topçš„åä»£è§„åˆ™ï¼Œæ­¤æ—¶å°±ä¼šè¢«éšæœºè·³åˆ°ä¸€ä¸ªé…ç½®äº†åä»£çš„ç«¯å£ä¸Šï¼Œæ— æ³•æ­£ç¡®è·³è½¬åˆ°img.text.topï¼ˆæ­¤æƒ…å†µæ˜¯é…ç½®äº†å¤šä¸ªnginxåä»£ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæœåŠ¡ï¼Œå¯èƒ½ä¸ä¼šå‡ºç°è·³è½¬é”™è¯¯ï¼‰\né…ç½®äº†hostä¸ºimg.text.topåï¼ŒCDNè¿›è¡Œå›æºçš„æ—¶å€™ï¼Œå°±ä¼šå‘Šè¯‰æœåŠ¡å™¨æˆ‘æ˜¯img.text.topï¼ŒæœåŠ¡å™¨çš„åä»£å°±èƒ½æ­£ç¡®è¯†åˆ«å¹¶è¿”å›æœåŠ¡\n\nè¿™ä¸ªå›æºhoståœ¨åŠ é€Ÿè¯¸å¦‚vercelã€netlifyã€GitHub Pagesç­‰å…·æœ‰åŸŸåè®¿é—®æ§åˆ¶çš„æœåŠ¡çš„æ—¶å€™å°¤ä¸ºé‡è¦ã€‚æ¯”å¦‚ä¸‹å›¾å°±æ˜¯å› ä¸ºæˆ‘æ²¡æœ‰é…ç½®hostï¼Œå¯¼è‡´CDNåŠ é€Ÿå‘é€çš„è¯·æ±‚åŸŸåå¹¶æ²¡æœ‰è¢«vercelæ”¶å½•ï¼Œä¹Ÿå°±ä¸çŸ¥é“è¦è½¬åˆ°é‚£ä¸ªæœåŠ¡ä¸Šï¼Œäºæ˜¯ä¾¿æ— æ³•è®¿é—®\n\n3.3.3 httpsè®¾ç½®ä½¿ç”¨cdnåŠ é€Ÿåï¼Œå³ä¾¿ä½ æºç«™æœ‰sslè¯ä¹¦ï¼ŒcdnåŠ é€Ÿåçš„åŸŸåä¹Ÿä¸ä¸€å®šèƒ½æ­£å¸¸è®¿é—®\n\næ­¤æ—¶å°±éœ€è¦åœ¨cdnçš„é…ç½®ä¸­æ·»åŠ httpsè¯ä¹¦\n\nè¿™é‡Œå¯ä»¥æ·»åŠ è‡ªæœ‰è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥åœ¨åˆæ‹äº‘CDNç”³è¯·å•åŸŸåè¯ä¹¦ã€‚åˆæ‹äº‘ç”³è¯·sslè¯ä¹¦çš„æ“ä½œè¿˜æ˜¯æŒºå¿«çš„ï¼Œå‡ åˆ†é’Ÿå°±å¥½äº†ï¼Œè¿™ç‚¹å€¼å¾—è¡¨æ‰¬\n\n3.3.4 ç¼“å­˜æ§åˆ¶è¿™é‡Œè¿˜éœ€è¦é…ç½®ä¸€ä¸‹ç¼“å­˜æ§åˆ¶ï¼Œå¦åˆ™é»˜è®¤ä¼šæ˜¯å…¨ç«™åŠ é€Ÿ\n\nå¯¹äºlskyæ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦åŠ é€Ÿçš„åªæ˜¯å›¾ç‰‡èµ„æºä½ ï¼Œå¹¶ä¸éœ€è¦åŠ é€Ÿç®¡ç†é¡µé¢\n\nå¦‚æœé…ç½®äº†ç¼“å­˜è§„åˆ™ä¹‹åï¼Œè¿›å…¥ç®¡ç†é¡µé¢å‡ºç°äº†é—®é¢˜ï¼Œé‚£å°±éœ€è¦é…ç½®ä¸€ä¸‹ä¸ç¼“å­˜è§„åˆ™ï¼ŒæŠŠç®¡ç†é¡µé¢ã€è®¾ç½®é¡µé¢ç»™åŠ å…¥è¿›å»\n\n3.3.5 æºç«™é™æ€èµ„æºè¿ç§»åœ¨å›æºè®¾ç½®é‡Œé¢æœ‰ä¸€æ¡æ˜¯é™æ€èµ„æºè¿ç§»ï¼Œè¿™ä¸ªè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼\n\nå› ä¸ºåˆæ‹äº‘çš„CDNå›æºåˆ°bucketæ˜¯ä¸ç”¨é’±çš„ï¼Œè¿™æ ·å°±ç›¸å½“äºåªéœ€è¦ä»˜å­˜å‚¨çš„è´¹ç”¨å°±è¡Œäº†ã€‚å› ä¸ºæˆ‘çš„ç«™ç‚¹è®¿é—®é‡å°ï¼Œå¯¹äºCDNå›æºè€Œäº§ç”Ÿçš„å­˜å‚¨è‚¯å®šå°‘çš„å¯æ€œï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒè´¹ç”¨é—®é¢˜\n\néœ€è¦æ“ä½œçš„å°±æ˜¯æ·»åŠ ä¸€ä¸ªäº‘å­˜å‚¨\n\né…ç½®ä¸€ä¸ªæ“ä½œå‘˜ï¼Œæä¾›å†™å…¥å’Œè¯»å–æƒé™ï¼Œå°±OKäº†ã€‚ä¸éœ€è¦ç»‘å®šåŸŸå\n\nåœ¨é™æ€èµ„æºè¿ç§»é‡Œé¢é€‰æ‹©è¿™ä¸ªäº‘å­˜å‚¨å³å¯\n4.picgoéƒ½ç”¨å›¾åºŠäº†ï¼Œè‚¯å®šä¸èƒ½å°‘äº†è€æœ‹å‹Picgo\nåœ¨æ’ä»¶å•†åº—å¯ä»¥æœåˆ°lankongæ’ä»¶ï¼Œå¼€æºåœ°å€ hellodk34&#x2F;picgo-plugin-lankong\n\né…ç½®æ’ä»¶å‚è€ƒREADMEï¼›æˆ‘è¿™é‡Œå‘ç°2.3.0 BATA8æ— æ³•æ­£å¸¸è¿è¡Œæ’ä»¶ï¼Œåªæœ‰2.3.1ç‰ˆæœ¬çš„picgoå¯ä»¥ç”¨\n\nå…¶ä¸­å…³äºpermissionéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè®¾ç½®çš„æ˜¯å…°ç©ºå›¾åºŠçš„æƒé™ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸Šä¼ çš„å›¾ç‰‡èƒ½ä¸èƒ½åœ¨å›¾åºŠç½‘ç«™ä¸Šç›´æ¥è¢«çœ‹åˆ°ã€‚å¹¶ä¸æ˜¯é˜¿é‡Œäº‘OSSé‚£ç§å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®çš„ç§æœ‰æƒé™ã€‚\næ³¨æ„å•Šæ³¨æ„å•Šï¼Œtokenéœ€è¦ä½ è‡ªå·±è°ƒç”¨curlæˆ–è€…ç”¨postman/apifoxè°ƒç”¨apiè·å–\nåˆ«åƒæˆ‘ä¸€æ ·å‚»ä¹ä¹çš„ï¼Œç”¨è¿™ä¸ªç¤ºä¾‹å€¼è¯•äº†å¥½ä¹…ğŸ˜¥\n\n5.nsfwjs é‰´hé™¤éä½ çš„å›¾åºŠä¸æ‰“ç®—å…¬å¼€ç»™ä»»ä½•äººç”¨ï¼Œå…³é—­äº†æ³¨å†Œ/æ¸¸å®¢ä¸Šä¼ çš„åŠŸèƒ½ï¼›é‚£ä¹ˆæˆ‘å»ºè®®ä½ è®¾ç½®ä¸€ä¸‹é‰´hæ“ä½œã€‚\nå…°ç©ºå›¾åºŠæ”¯æŒé˜¿é‡Œäº‘&#x2F;è…¾è®¯äº‘çš„å†…å®¹å®‰å…¨ï¼Œä½†æ˜¯è¿™ä¿©ç©æ„è¯´å®è¯ï¼Œå¯¹äºä¸€ä¸ªæ— äººé—®æ´¥çš„å°ç«™ç‚¹è€Œè¨€ï¼Œä»·æ ¼å¤ªææ€–äº†ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼Œnsfwçš„apiå¯ä»¥ç›´æ¥ç”¨dockeréƒ¨ç½²ï¼Œç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œæ•ˆæœè¿˜æ˜¯ä¸é”™çš„\nversion: &#x27;3&#x27;services:  nsfw-api:    image: penndu/nsfw-api:latest    restart: unless-stopped    hostname: nsfw-api    container_name: nsfw-api    ports:      - &quot;14727:3000&quot;\n\nåœ¨è§’è‰²ç»„è®¾ç½®é‡Œé¢ï¼Œå¯ä»¥è®¾ç½®å›¾ç‰‡å®¡æ ¸ã€‚é…ç½®å¥½dockerä¹‹åï¼Œurlæœ«å°¾éœ€è¦å¸¦ä¸€ä¸ª/classifyæ‰èƒ½æ­£å¸¸è°ƒç”¨ã€‚é»˜è®¤çš„é˜ˆå€¼æ˜¯60ï¼Œå®åœ¨å¤ªä½äº†ï¼Œä¿é™©èµ·è§ï¼Œè¶Šä½è¶Šå¥½ã€‚\nè¯·æ³¨æ„ï¼Œéƒ¨ç½²çš„nsfwçš„æœåŠ¡å¿…é¡»è¦èƒ½å¤Ÿå¤–ç½‘è®¿é—®ï¼Œå¡«æœºå™¨æœ¬åœ°IPæ˜¯ä¸è¡Œçš„\nè¿™é‡Œæˆ‘è®¾ç½®æˆäº†15ï¼Œèƒ½å±è”½æ‰å¾ˆå¤§ä¸€éƒ¨åˆ†çš„hå›¾\n\nä½†æ˜¯è¿åå…¶ä»–è§„å®šçš„å›¾ç‰‡å°±éœ€è¦ä½ äººå·¥å®¡æ ¸ï¼ˆæˆ–è€…å»ä¹°é˜¿é‡Œäº‘&#x2F;è…¾è®¯çš„å†…å®¹å®¡æ ¸ï¼‰äº†\nä¸ªäººå»ºè®®ï¼Œå…³é—­æ¸¸å®¢ä¸Šä¼ &#x2F;æ³¨å†ŒåŠŸèƒ½â€”â€”é™¤éä½ æ‰“ç®—å»ºç«‹ä¸€ä¸ªå®Œå…¨å…¬å¼€çš„å›¾åºŠç«™ç‚¹ï¼Œå¹¶å¯¹ä½ å›¾åºŠçš„å†…å®¹è´Ÿè´£ã€‚\n\né…ç½®å¥½äº†ä¹‹åï¼Œå¦‚æœæœ‰ç”¨æˆ·ä¸Šä¼ å¥‡æ€ªçš„å›¾ç‰‡ï¼Œä¼šç›´æ¥ç¦æ­¢ï¼Œä¸Šä¼ å¤±è´¥\n6.ä¿®æ”¹é¡µè„šä½¿ç”¨ vscode(remote-ssh) è¿›å…¥lskyçš„dockeræ˜ å°„åˆ°æœ¬åœ°çš„æ–‡ä»¶å¤¹ï¼ˆå¦‚æœä½ ä½¿ç”¨naséƒ¨ç½²ï¼Œåˆ™ç”¨vscodeæ‰“å¼€smbçš„æ–‡ä»¶å¤¹ï¼Œè¿›å…¥å€’lskyæ˜ å°„åˆ°ä½ nasæœ¬åœ°çš„æ–‡ä»¶å¤¹ï¼‰ï¼Œæœç´¢å¦‚ä¸‹\npresent Lsky Pro. All rights reserved.\n\næœ‰ä¸¤ä¸ªæ–‡ä»¶ä¸­éƒ½åŒ…å«äº†é¡µè„šä¿¡æ¯ï¼Œéƒ½ç»™ä»–ä¿®æ”¹äº†å°±è¡Œï¼›ä¿®æ”¹åé‡å¯å®¹å™¨å°±èƒ½ç”Ÿæ•ˆ\n\nå¦‚å›¾ï¼Œæˆ‘çš„å›¾åºŠçš„é¡µè„šå°±æ˜¯ä¿®æ”¹åçš„ä¿¡æ¯\n\nè¦æ˜¯lskyåå°é…ç½®é¡¹èƒ½ç›´æ¥åŠ ä¸Šè¿™ä¸ªé…ç½®é¡¹å°±å¥½äº†ï¼Œé»˜è®¤çš„é¡µè„šå†™çš„éƒ½è¿˜æ˜¯2018ï¼Œå¤ªæ—§äº†ã€‚\nMoreæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹æ–¹è¯„è®º\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["å›¾åºŠ","nginx","Docker"]},{"title":"ã€Vercelã€‘æ•™ä½ éƒ¨ç½²imsyy/homeä¸ªäººä¸»é¡µ","url":"/posts/951011662/","content":"æœ¬ç¯‡åšå®¢æ•™ä½ å¦‚ä½•éƒ¨ç½²ä¸€ä¸ªè‡ªå·±çš„ä¸ªäººä¸»é¡µ\né¡¹ç›®åœ°å€ï¼šhttps://github.com/imsyy/home\n\n\n1.forkä»“åº“+verceléƒ¨ç½²é¦–å…ˆæˆ‘ä»¬ç‚¹å‡»forkï¼Œå°†ä»“åº“å¤åˆ»åˆ°è‡ªå·±çš„è´¦æˆ·\n\néšåè¿›å…¥vercelï¼Œç‚¹å‡»dashboard-add new-project\n\né€‰æ‹©ä½ å¤åˆ»çš„ä»“åº“\n\nç„¶åä»€ä¹ˆéƒ½ä¸ç”¨æ”¹ï¼Œç›´æ¥deploy\n\nç­‰å¾…éƒ¨ç½²æˆåŠŸï¼Œç‚¹å‡»domainsï¼Œåœ¨è¿™é‡Œæ·»åŠ ä¸ªä½ è‡ªå·±çš„åŸŸå+è§£æã€‚å¦åˆ™vercelé»˜è®¤çš„åŸŸåæ— æ³•ç›´æ¥è®¿é—®\n\nåˆ°è¿™é‡Œå°±å·²ç»éƒ¨ç½²æˆåŠŸäº†ï¼Œå¯ä»¥ä¸ç”¨ç®¡verceläº†ï¼›\nå…‹éš†ä¸‹æˆ‘ä»¬forkçš„ä»“åº“ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼\n\nå¤‡æ³¨ï¼Œenvä¸­å·²æœ‰çš„é…ç½®åœ¨è¿™é‡Œä¸æ\n\n1.1 æœ¬åœ°é¢„è§ˆæœ¬åœ°é¢„è§ˆéœ€è¦æˆ‘ä»¬åœ¨æœ¬åœ°å®‰è£…å¥½node.jsç¯å¢ƒä»¥åŠnpmåŒ…ç®¡ç†å™¨ï¼Œéšåå®‰è£…yarn\nnpm install yarn\n\nå®‰è£…å®Œæˆåï¼Œè¿›å…¥é¡¹ç›®æ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œå…ˆæ‰§è¡Œyarn installå®‰è£…ä¾èµ–é¡¹ã€‚\nyarn install\n\n\nå¦‚æœä¸‹è½½ä¾èµ–çš„æ—¶å€™å¡åœ¨å…¶ä¸­æŸä¸€ä¸ªäº†ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥å°è¯•ç»™npm&#x2F;yarnçš„ä¸‹è½½å™¨é…ç½®é•œåƒæºã€å‚è€ƒåšå®¢ã€‘\n\nä¾èµ–é¡¹æå®šäº†ï¼Œç”¨devæŸ¥çœ‹é¢„è§ˆé¡µé¢\nyarn dev\n\næ³¨æ„ï¼Œç¬¬ä¸€æ¬¡æŸ¥çœ‹é¢„è§ˆé¡µé¢çš„æ—¶å€™ï¼ŒåŠ è½½ä¼šéå¸¸æ…¢ï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µ\nVITE v3.1.8  ready in 844 msâœ  Local:   http://127.0.0.1:3000/âœ  Network: use --host to expose\n\nåç»­çš„ä¿®æ”¹ï¼Œå¯ä»¥å…ˆåœ¨æœ¬åœ°é¢„è§ˆæˆåŠŸåï¼Œå†éƒ¨ç½²åˆ°vercel\n\n1.2 éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨å¦‚æœä½ æƒ³éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œåˆ™ä½¿ç”¨\nyarn build\n\nä¼šç”Ÿæˆä¸€ä¸ªdistæ–‡ä»¶å¤¹ï¼Œå¼„åˆ°äº‘æœåŠ¡å™¨ä¸Šå°±å¯ä»¥äº†ï¼ˆä¸ä¼šç”¨ï¼Œæ²¡è¯•è¿‡ï¼‰\n1.3 vercelè®¿é—®é—®é¢˜å¦‚æœæ ¹æ®ä¸Šé¢çš„æ­¥éª¤è®¾ç½®äº†è§£æåï¼Œè¿˜æ˜¯å‡ºç°è®¿é—®ç¼“æ…¢ç”šè‡³æ— æ³•è®¿é—®çš„é—®é¢˜ï¼Œå¯ä»¥å°†åŸŸåçš„Aæˆ–è€…cnameè§£ææ›´æ”¹ä¸ºä¸‹é¢çš„å›½å†…è®¿é—®è¾ƒå¿«çš„è§£æ\n76.223.126.88cname-china.vercel-dns.com\n\nä¸‹å›¾æ˜¯vercelå®˜æ–¹å¯¹äºæ­¤é—®é¢˜çš„è¯´æ˜ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹æŒ‡å‘vercelçš„dnsè®°å½•\n\n2.ç¤¾äº¤é“¾æ¥è¿™é‡Œå…‰æ˜¯ä¿®æ”¹.envæ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºä½œè€…æš‚æ—¶è¿˜æ²¡æœ‰å†™ç¤¾äº¤é“¾æ¥çš„åˆ¤æ–­ï¼Œå³ä¾¿ä½ æŠŠæ‰€æœ‰ç¤¾äº¤é“¾æ¥çš„ç¯å¢ƒå˜é‡éƒ½æ³¨é‡Šæ‰ï¼Œä»–è¿˜æ˜¯ä¼šæ˜¾ç¤ºå‡ºæ¥\nè¿™é‡Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œä¸ç®—éš¾ï¼Œä¸€æ­¥ä¸€æ­¥æ¥å°±è¡Œ\nsrc\\components\\SocialLinks\\index.vue\n\næ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œæœ€é¡¶éƒ¨æ˜¯&lt;/template&gt;åŒ…è£¹çš„ä¸€ä¸ªdiv\n&lt;template&gt;  &lt;!-- ç¤¾äº¤é“¾æ¥ --&gt;  &lt;div class=&quot;social&quot;&gt;  ....  &lt;/div&gt;&lt;/template&gt;\n\næˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„å°±æ˜¯è¿™é‡Œé¢çš„ä»£ç \n2.1 æ³¨é‡Šæ‰ä¸éœ€è¦çš„æ¯”å¦‚ä¸‹é¢è¿™ä¸€ä¸ª&lt;a &lt;/a&gt; åŒ…è£¹çš„å°±æ˜¯tgçš„ç¤¾äº¤é“¾æ¥ã€‚å¦‚æœä½ ä¸éœ€è¦ï¼Œé‚£å°±ç›´æ¥æŠŠå®ƒæ³¨é‡Šæ‰\n&lt;!-- &lt;a   id=&quot;telegram&quot;   :href=&quot;socialLinks.telegram&quot;   target=&quot;_blank&quot;   @mouseenter=&quot;changeTip&quot;   @mouseleave=&quot;leaveTip&quot;   &gt;    &lt;Icon size=&quot;24&quot;&gt;        &lt;Telegram /&gt;    &lt;/Icon&gt;&lt;/a&gt; --&gt;\n\n2.2 å¢åŠ æ²¡æœ‰çš„ç¤¾äº¤é“¾æ¥æ ¹æ®ä¸Šé¢è¿™ä¸ªæ¨¡æ¿çš„æ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å¢è‡ªå·±éœ€è¦çš„ç¤¾äº¤é“¾æ¥ï¼Œæ¯”å¦‚æˆ‘å°±æ–°å¢äº†ä¸€ä¸ªgiteeçš„é“¾æ¥ã€‚éœ€è¦ä¿®æ”¹çš„åªæœ‰idå’Œiconé‡Œé¢çš„å›¾æ ‡åå­—GitSquare\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;Icon size=&quot;24&quot;&gt;    &lt;GitSquare /&gt;  &lt;/Icon&gt;&lt;/a&gt;\n\nè¿™é‡Œçš„Iconå›¾æ ‡éƒ½æ˜¯ä»ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¯¼å…¥çš„ï¼Œæ–‡ä»¶è·¯å¾„ä¸º\nnode_modules\\@vicons\\fa\\es\\index.d.ts\n\nä½ å¯ä»¥åœ¨è¿™é‡Œé¢æœç´¢å·²æœ‰çš„å›¾æ ‡åå­—ï¼Œå¹¶å›åˆ°ç¤¾äº¤é“¾æ¥çš„ src\\components\\SocialLinks\\index.vue æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚å›¾æ‰€ç¤ºçš„ä»£ç ï¼Œæ–°å¢å›¾æ ‡ï¼ˆå¿…é¡»è¦åœ¨è¿™é‡Œæ–°å¢ï¼Œ å†å»htmlé‡Œé¢å¼•ç”¨ï¼‰\nimport &#123; Github, Qq, Telegram, Twitter,GitSquare &#125; from &quot;@vicons/fa&quot;;\n\n\næœ€åï¼Œåœ¨TipDataä¸­æ–°å¢ä¸€ä¸ªç‚¹å‡»ä¼šæ˜¾ç¤ºçš„æ–‡å­—ï¼Œè¿™é‡Œçš„idè¦å’Œä¸Šé¢å†™çš„ä¸€æ ·\nlet socialTipData = &#123;  github: &quot;å» Github çœ‹çœ‹&quot;,  gitee: &quot;å» Gitee çœ‹çœ‹&quot;,  qq: &quot;æœ‰ä»€ä¹ˆäº‹å—&quot;,  email: &quot;æ¥å° Email&quot;,  telegram: &quot;ä½ æ‡‚çš„ ~&quot;,  twitter: &quot;ä½ æ‡‚çš„ ~&quot;,&#125;;\n\nåœ¨ç¤¾äº¤é“¾æ¥çš„åœ°å€é‡Œé¢ï¼Œæ–°å¢giteeçš„åœ°å€ï¼Œå‚è€ƒå·²æœ‰çš„githubçš„åœ°å€çš„å†™æ³•\nconst socialLinks = reactive(&#123;  github: &quot;https://github.com/&quot; + import.meta.env.VITE_SOCIAL_GITHUB,  gitee: &quot;https://gitee.com/&quot; + import.meta.env.VITE_SOCIAL_GITEE,  ...\n\næœ€åï¼Œè¿˜éœ€è¦åœ¨é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶ä¸­ï¼Œæ–°å¢ä¸€ä¸ªcaseï¼Œç…§ç€å·²æœ‰çš„æŠ„å°±è¡Œ\ncase &quot;gitee&quot;:  socialTip.value = socialTipData.gitee;  return true;\n\næœ€åçš„æœ€åï¼Œå›åˆ°.envç¯å¢ƒå˜é‡ï¼Œæ–°å¢ä¸€ä¸ªVITE_SOCIAL_GITEEï¼Œå¡«å†™ä½ çš„giteeç”¨æˆ·å\nVITE_SOCIAL_GITEE = &quot;musnow&quot;\n\næå®šå•¦ï¼\n\n2.3 æ·»åŠ æ²¡æœ‰çš„iconå¦‚æœä¸€ä¸ªå›¾æ ‡åœ¨æœ¬åœ°è·¯å¾„æ²¡æœ‰ï¼Œå¯ä»¥è¯•ç€ç”¨ä¸‹é¢çš„åŠæ³•å¯¼å…¥ä¸€ä¸ªæœ¬åœ°å›¾ç‰‡ï¼Œæˆ–è€…æ˜¯å›¾ç‰‡url\næœ¬åœ°å›¾ç‰‡çš„å­˜å‚¨è·¯å¾„ä¸ºpublic/images/\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;img    src=&quot;/images/icon/gitee.png&quot; height=&quot;24&quot;  /&gt;&lt;/a&gt;\n\nä½†æ˜¯ä¸Šé¢è¿™æ ·å¼„ä¼šæœ‰è¾¹è·é—®é¢˜ï¼Œå¯ä»¥çœ‹åˆ°giteeå’Œqqä¹‹é—´çš„è¾¹è·æ¯”å³ä¾§æ›´çŸ­ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°è§£å†³åŠæ³•\n\nå—¨å—¨å—¨ï¼Œç»è¿‡åŠå°æ—¶çš„æŠ˜è…¾ï¼Œæˆ‘æ‰¾åˆ°è§£å†³åŠæ³•äº†ã€‚åœ¨æœ¬åœ°yarn devä¸­f12æ‰¾åˆ°å¦‚ä¸‹çš„ä»£ç ï¼Œè¿™é‡Œè¦åšçš„å°±æ˜¯çœ‹å…¶ä»–å›¾æ ‡çš„ä»£ç æ˜¯æ€ä¹ˆå†™çš„\n\nè¿™é‡Œèƒ½çœ‹åˆ°ï¼Œä»–ä»¬éƒ½ç”¨äº†ä¸€ä¸ªspançš„xicon classï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯ç»™è¿™ä¸ªimgä¹ŸåŠ ä¸Šä¸€ä¸ªxicon\n&lt;a  id=&quot;gitee&quot;  :href=&quot;socialLinks.gitee&quot;  target=&quot;_blank&quot;  @mouseenter=&quot;changeTip&quot;  @mouseleave=&quot;leaveTip&quot;&gt;  &lt;span class=&quot;xicon&quot; style=&quot;font-size: 24px;&quot;&gt;    &lt;img src=&quot;/images/icon/gitee.png&quot; height=&quot;24&quot;/&gt;  &lt;/span&gt;&lt;/a&gt;\n\nç°åœ¨å°±OKäº†ï¼\n\n2.4 æ·»åŠ envåˆ¤æ–­ï¼Œè‹¥ä¸ºç©ºä¸æ˜¾ç¤ºä½œè€…å†™çš„ç‰ˆæœ¬æ˜¯å†™æ­»çš„ï¼Œå³ä¾¿ä½ çš„envé‡Œé¢æ²¡æœ‰é‚£ä¸ªç¤¾äº¤é“¾æ¥ï¼Œä»–è¿˜æ˜¯ä¼šå±•ç¤ºåœ¨ä¸»é¡µä¸Šã€‚æˆ‘çš„éœ€æ±‚å°±æ˜¯å¦‚æœenvé‡Œé¢æ²¡æœ‰è¿™ä¸ªç¤¾äº¤é“¾æ¥/ä¸ºç©ºï¼Œé‚£å°±ä¸å±•ç¤ºè¿™ä¸ªç¤¾äº¤é“¾æ¥çš„å›¾æ ‡\n# ç¤¾äº¤é“¾æ¥VITE_SOCIAL_GITHUB = &quot;musnows&quot;VITE_SOCIAL_GITEE = &quot;musnow&quot;VITE_SOCIAL_QQ = &quot;&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;\n\næ¯”å¦‚æˆ‘ä¸ªäººçš„éœ€æ±‚å°±ä¸éœ€è¦åé¢çš„3ä¸ªï¼Œé‚£å°±æŠŠç¯å¢ƒå˜é‡è®¾ç½®ä¸ºç©ºï¼Œä¸”è‡ªåŠ¨ä¸å±•ç¤º\nè¿™æ—¶å€™è¦åšçš„å°±æ˜¯ä¿®æ”¹ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªåˆ¤æ–­è¯­å¥ï¼ˆæˆ‘æ²¡å­¦è¿‡å‰ç«¯ï¼Œç™¾åº¦åˆ°çš„ï¼‰\nå…ˆåœ¨ç¤¾äº¤é“¾æ¥çš„æ–‡ä»¶é‡Œé¢ï¼Œæ·»åŠ ä¸‹é¢è¿™ä¸ªå˜é‡å®šä¹‰ï¼ˆå¯ä»¥ç†è§£ä¸ºä»–å°±æ˜¯ä¸€ä¸ªç±»ï¼Œé€šè¿‡ç±»å.å˜é‡çš„æ–¹å¼è®¿é—®ï¼‰\nlet socialEnv = &#123;  github: import.meta.env.VITE_SOCIAL_GITHUB,  gitee: import.meta.env.VITE_SOCIAL_GITEE,  kook: import.meta.env.VITE_SOCIAL_KOOK,  qq: import.meta.env.VITE_SOCIAL_QQ,  email: import.meta.env.VITE_SOCIAL_EMAIL,  telegram: import.meta.env.VITE_SOCIAL_TELEGRAM,  twitter: import.meta.env.VITE_SOCIAL_TWITTER,  travellings: import.meta.env.VITE_SOCIAL_TRAVELLINGS,&#125;\n\néšåè¦åšçš„ï¼Œå°±æ˜¯åœ¨æœ€ä¸Šé¢çš„div class=&quot;link&quot;é‡Œé¢æ·»åŠ ä¸€ä¸ªåˆ¤æ–­è¯­å¥ï¼ˆéœ€è¦ç»™æ¯ä¸€é¡¹éƒ½æ·»åŠ ï¼Œæ³¨æ„åå­—åˆ«ææ··äº†ï¼‰\n&lt;span v-if=&quot;socialEnv.twitter&quot;&gt;  &lt;a    id=&quot;twitter&quot;    :href=&quot;socialLinks.twitter&quot;    target=&quot;_blank&quot;    @mouseenter=&quot;changeTip&quot;    @mouseleave=&quot;leaveTip&quot;  &gt;    &lt;Icon size=&quot;24&quot;&gt;      &lt;Twitter /&gt;    &lt;/Icon&gt;  &lt;/a&gt;&lt;/span&gt;\n\nè¿™æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨åˆ¤æ–­è¿™ä¸ªç¯å¢ƒå˜é‡æ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºé‚£å°±ä¸æ˜¾ç¤º\n\næµ‹è¯•ä¸€ä¸‹VITE_SOCIAL_GITHUB = &quot;musnows&quot;VITE_SOCIAL_GITEE = &quot;musnow&quot;VITE_SOCIAL_KOOK = &quot;https://kook.top/gpbTwZ&quot;VITE_SOCIAL_QQ = &quot;&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;VITE_SOCIAL_TWITTER = &quot;&quot;VITE_SOCIAL_TRAVELLINGS = &quot;https://www.travellings.cn/go.html&quot;\n\n\nVITE_SOCIAL_GITHUB = &quot;&quot;VITE_SOCIAL_GITEE = &quot;musnow&quot;VITE_SOCIAL_KOOK = &quot;https://kook.top/gpbTwZ&quot;VITE_SOCIAL_QQ = &quot;111&quot;VITE_SOCIAL_EMAIL = &quot;&quot;VITE_SOCIAL_TELEGRAM = &quot;&quot;VITE_SOCIAL_TWITTER = &quot;&quot;VITE_SOCIAL_TRAVELLINGS = &quot;https://www.travellings.cn/go.html&quot;\n\n\nå®Œç¾è¾¾æˆç›®æ ‡ï¼\nå˜é‡å¤ç”¨å¯ä»¥æŠŠåŸæœ¬çš„socialLinksæ”¹æˆä½¿ç”¨socialEnvï¼Œé¿å…ä¸¤ä¸ªéƒ½æ˜¯importï¼Œå¤ªé•¿äº†ä¸å¥½çœ‹\nlet socialEnv = &#123;  github: import.meta.env.VITE_SOCIAL_GITHUB,  gitee: import.meta.env.VITE_SOCIAL_GITEE,  kook: import.meta.env.VITE_SOCIAL_KOOK,  qq: import.meta.env.VITE_SOCIAL_QQ,  email: import.meta.env.VITE_SOCIAL_EMAIL,  telegram: import.meta.env.VITE_SOCIAL_TELEGRAM,  twitter: import.meta.env.VITE_SOCIAL_TWITTER,  travellings: import.meta.env.VITE_SOCIAL_TRAVELLINGS,&#125;// ç¤¾äº¤é“¾æ¥åœ°å€const socialLinks = reactive(&#123;  github: &quot;https://github.com/&quot; + socialEnv.github,  gitee: &quot;https://gitee.com/&quot; + socialEnv.gitee,  kook: socialEnv.kook,  qq: &quot;https://wpa.qq.com/msgrd?v=3&amp;uin=&quot; +    socialEnv.qq +    &quot;&amp;site=qq&amp;menu=yes&quot;,  email: &quot;mailto:&quot; + socialEnv.email,  telegram: &quot;https://t.me/&quot; + socialEnv.telegram,  twitter: &quot;https://twitter.com/&quot; + socialEnv.twitter,  travellings: socialEnv.travellings,&#125;);\n\n3.ç«™ç‚¹é¦–é¡µæ–‡å­—å­—ä½“\nhttps://github.com/imsyy/home/issues/49\n\nå¦‚æœä½ ä¿®æ”¹äº†ç«™ç‚¹é¦–é¡µçš„æ–‡å­—ï¼Œä¼šå‘ç°ä¸€éƒ¨åˆ†æ–‡å­—æ²¡åŠæ³•æ­£å¸¸æ˜¾ç¤º\n\næ ¹æ®ä½œè€…åœ¨issueé‡Œé¢æä¾›çš„é“¾æ¥ï¼Œä¸‹è½½äº†å®Œæ•´çš„å­—ä½“æ–‡ä»¶\nhttps://file.4everland.app/font/Other/Pacifico-Regular.ttfå¦‚æœä¸Šé¢çš„é“¾æ¥åäº†ï¼Œå¯ä»¥å»æˆ‘çš„ä»“åº“é‡Œé¢ä¸‹https://github.com/musnows/musnows/blob/main/Pacifico-Regular.ttf\n\nå°†å…¶ç²˜è´´åˆ°ä»¥ä¸‹è·¯å¾„ï¼Œè¦†ç›–åŸæœ¬çš„å­—ä½“æ–‡ä»¶\npublic/font\n\nç°åœ¨å°±Okäº†\n\n4.ç½‘ç«™logoé…ç½®4.1 æµè§ˆå™¨é¡¶éƒ¨å›¾æ ‡ä¿®æ”¹index.htmlä¸­çš„å¦‚ä¸‹å­—æ®µ\n&lt;link rel=&quot;stylesheet&quot; href=&quot;https://s1.hdslb.com/bfs/static/jinkela/long/font/regular.css&quot; /&gt;&lt;link rel=&quot;icon&quot; href=&quot;/images/icon/myPNG.jpg&quot;&gt;&lt;link rel=&quot;apple-touch-icon&quot; href=&quot;/images/icon/myPNG-r.jpg&quot;&gt;\n\nå°†ä½ è‡ªå·±çš„logoå›¾æ ‡æ”¾åˆ°public/imagesä¸‹å³å¯ã€‚è¿™é‡Œä¿®æ”¹çš„æ˜¯æµè§ˆå™¨é¡¶éƒ¨çš„å›¾æ ‡\n4.2 ä¸»é¡µå›¾æ ‡ä¸»é¡µå›¾æ ‡çš„è·¯å¾„å¦‚ä¸‹\nsrc/components/Message/index.vue\n\né‡Œé¢æœ‰æ³¨é‡Šï¼Œæ‰¾åˆ°å­—æ®µä¿®æ”¹å³å¯\n&lt;!-- Logo --&gt;&lt;div class=&quot;logo&quot;&gt;  &lt;img class=&quot;logo-img&quot; src=&quot;/images/icon/logo.png&quot; alt=&quot;logo&quot; /&gt;  &lt;div class=&quot;name&quot;&gt;    &lt;span class=&quot;bg&quot;&gt;&#123;&#123; siteUrl[0] &#125;&#125;&lt;/span&gt;    &lt;span class=&quot;sm&quot;&gt;.&#123;&#123; siteUrl[1] &#125;&#125;&lt;/span&gt;  &lt;/div&gt;&lt;/div&gt;\n\n5.ç½‘ç«™é“¾æ¥é…ç½®åœ¨ç¯å¢ƒå˜é‡.envä¸­å†™æ˜äº†é…ç½®ç½‘ç«™çš„ä½ç½®\n# ç½‘ç«™é“¾æ¥## è¯·åœ¨ src/components/Links/index.vue ä¸­è®¾ç½®\n\né¦–å…ˆæ˜¯è¿™é‡Œçš„å›¾æ ‡ï¼Œè¿˜æ˜¯åœ¨è€ä½ç½®node_modules\\@vicons\\fa\\es\\index.d.tsï¼Œæ‰¾ä½ éœ€è¦çš„å›¾æ ‡å¯¼å…¥\nimport &#123;  Link,  Blog,  CompactDisc,  Cloud,  Compass,  Book,  Flask,  GitSquare,  Image,  GitAlt&#125; from &quot;@vicons/fa&quot;;\n\néšåç½‘ç«™é“¾æ¥å°±ç…§ç€æŠ„ï¼Œèµ·ä¸€ä¸ªæ–°çš„å°±å¯ä»¥äº†\n&#123;  icon: Compass,  name: &quot;èµ·å§‹é¡µ&quot;,  link: &quot;https://nav.imsyy.top/&quot;,&#125;,\n\nå»ºè®®é“¾æ¥ä¸è¶…è¿‡6ä¸ªï¼Œä¸ç„¶å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·\n\n6.footeré…ç½®src\\components\\Footer\\index.vue\n\nåœ¨é¡µè„šé…ç½®ç½‘ç«™ç”¨æˆ·å’Œé“¾æ¥ï¼Œä¿®æ”¹å¦‚ä¸‹å­—æ®µ\n&lt;span  &gt;Copyright&amp;nbsp;&amp;copy;&amp;nbsp;&#123;&#123; fullYear &#125;&#125;  &lt;a href=&quot;é“¾æ¥&quot;&gt;åå­—&lt;/a&gt;&lt;/span&gt;\n\nå¦‚æœä½ çš„ç«™ç‚¹ç»è¿‡äº†å¤‡æ¡ˆï¼Œä¿®æ”¹å¦‚ä¸‹å­—æ®µ\n&lt;a href=&quot;https://beian.miit.gov.cn&quot; target=&quot;_blank&quot;  &gt;è±«ICPå¤‡2022018134å·-1&lt;/a&gt;\n\nå¦‚æœæ²¡æœ‰å¤‡æ¡ˆï¼Œå¯ä»¥æŠŠè¿™éƒ¨åˆ†æ³¨é‡Šæ‰\n7.éŸ³ä¹æ’­æ”¾å™¨é…ç½®è¿™éƒ¨åˆ†å¯èƒ½æœ‰è€å“¥ä¸å¤ªæ¸…æ¥šï¼Œæˆ‘é¡ºä¾¿è¯´ä¸€ä¸‹å§!\nåœ¨ç¯å¢ƒå˜é‡é‡Œé¢ï¼Œä¿®æ”¹æœ€åº•éƒ¨çš„æ’­æ”¾idå°±å¯ä»¥äº†\n# æ­Œæ›² API åœ°å€## å¤‡ç”¨ï¼šhttps://api.wuenci.com/meting/api/VITE_SONG_API = &quot;https://api-meting.imsyy.top&quot;# æ­Œæ›²æœåŠ¡å™¨ ( netease-ç½‘æ˜“äº‘, tencent-qqéŸ³ä¹ )VITE_SONG_SERVER = &quot;netease&quot;# æ’­æ”¾ç±»å‹ ( song-æ­Œæ›², playlist-æ’­æ”¾åˆ—è¡¨, album-ä¸“è¾‘, search-æœç´¢, artist-è‰ºæœ¯å®¶ )VITE_SONG_TYPE = &quot;playlist&quot;# æ’­æ”¾ IDVITE_SONG_ID = &quot;2893005411&quot;\n\nidåœ¨å“ªå„¿æ‰¾ï¼Ÿç™»é™†ä½ çš„ç½‘é¡µç‰ˆç½‘æ˜“äº‘&#x2F;QQéŸ³ä¹ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ­Œå•\n\næ­¤å¤„ç½‘é¡µé“¾æ¥é‡Œé¢çš„IDå°±æ˜¯æ’­æ”¾idï¼Œå¤åˆ¶è¿‡æ¥å°±OKäº†\nhttps://music.163.com/#/playlist?id=2024518101IDæ˜¯2024518101\n\n8.èƒŒæ™¯å›¾è®¾ç½®src/components/store/index.vue\n\nè¿™é‡Œæœ‰ä¸å°‘é…ç½®é¡¹ï¼Œå…¶ä¸­å…³äºå£çº¸ç§ç±»æœ‰3ä¸­\nstate: () =&gt; &#123;    return &#123;        innerWidth: null, // å½“å‰çª—å£å®½åº¦        coverType: &quot;0&quot;, // å£çº¸ç§ç±»        musicIsOk: false, // éŸ³ä¹æ˜¯å¦åŠ è½½å®Œæˆ        musicVolume: 0, // éŸ³ä¹éŸ³é‡;        musicOpenState: false, // éŸ³ä¹é¢æ¿å¼€å¯çŠ¶æ€        backgroundShow: false, // å£çº¸å±•ç¤ºçŠ¶æ€        boxOpenState: false, // ç›’å­å¼€å¯çŠ¶æ€        mobileOpenState: true, // ç§»åŠ¨ç«¯å¼€å¯çŠ¶æ€        mobileFuncState: false, // ç§»åŠ¨ç«¯åŠŸèƒ½åŒºå¼€å¯çŠ¶æ€        setOpenState: false, // è®¾ç½®é¡µé¢å¼€å¯çŠ¶æ€        playerState: false, // å½“å‰æ’­æ”¾çŠ¶æ€        playerTitle: null, // å½“å‰æ’­æ”¾æ­Œæ›²å        playerArtist: null, // å½“å‰æ’­æ”¾æ­Œæ‰‹å        playerLrc: &quot;æ­Œè¯åŠ è½½ä¸­&quot;, // å½“å‰æ’­æ”¾æ­Œè¯    &#125;&#125;,\n\nå¯ä»¥åœ¨backgoundé‡Œé¢æ‰¾åˆ°å£çº¸3ä¸ªç§ç±»çš„ä¸åŒï¼š0æ˜¯æœ¬åœ°å£çº¸ï¼Œéšæœº1åˆ°10ï¼ˆå¯ä»¥åœ¨æœ¬åœ°æ–°å¢ä½ å–œæ¬¢çš„å£çº¸ï¼Œå¹¶ä¿®æ”¹è¿™é‡Œçš„éšæœºæ•°èŒƒå›´ï¼‰\n0æ˜¯é»˜è®¤çš„å‡ å¼ æœ¬åœ°å£çº¸ï¼Œ1æ˜¯bingï¼Œ2æ˜¯éšæœºé£æ™¯ï¼Œ3æ˜¯éšæœºäºŒåˆºèˆğŸ‘»\n&lt;el-radio label=&quot;0&quot; size=&quot;large&quot; border&gt;é»˜è®¤å£çº¸&lt;/el-radio&gt;&lt;el-radio label=&quot;1&quot; size=&quot;large&quot; border&gt;æ¯æ—¥ä¸€å›¾&lt;/el-radio&gt;&lt;el-radio label=&quot;2&quot; size=&quot;large&quot; border&gt;éšæœºé£æ™¯&lt;/el-radio&gt;&lt;el-radio label=&quot;3&quot; size=&quot;large&quot; border&gt;éšæœºåŠ¨æ¼«&lt;/el-radio&gt;\n\nå’³å’³ï¼Œæ‰å‘ç°åŸæ¥èƒŒæ™¯å›¾å¯ä»¥åœ¨å‰ç«¯ç›´æ¥è®¾ç½®å‘€ï¼Ÿç‚¹å‡»å·¦ä¾§ç•™è¨€ï¼Œå†ç‚¹å‡»æ—¶é—´èƒ¶å›Šå³ä¾§çš„è®¾ç½®æŒ‰é’®ã€‚ä¸è¿‡ç›®å‰åªèƒ½è®¾ç½®è¿™ä¸€ä¸ªå†…å®¹ï¼Œè€Œä¸”è¿™ä¸ªè®¾ç½®éšç€ç½‘é¡µåˆ·æ–°ä¼šè¢«è¦†ç›–æ‰ï¼Œå»ºè®®åœ¨åç«¯è®¾ç½®å¥½é»˜è®¤çš„å£çº¸\n\n9.æ—¶é—´èƒ¶å›Šå¢åŠ ç«™ç‚¹è¿è¡Œæ—¶é—´ç‚¹å‡»å·¦ä¾§çš„ç½‘ç«™ä»‹ç»ï¼ˆå°±æ˜¯ç¤¾äº¤é“¾æ¥ä¸Šé¢é‚£ä¸ªé¢æ¿ï¼‰èƒ½æ‰“å¼€æ—¶é—´èƒ¶å›Šã€‚é»˜è®¤æ˜¾ç¤ºçš„ä¿¡æ¯æŒºä¸é”™çš„ï¼Œä½†æ˜¯è¿˜ç©ºäº†ä¸€å—ï¼Œè¿™ä¸å¾—æŠŠç«™ç‚¹è¿è¡Œæ—¶é—´ç»™åŠ ä¸Šï¼Ÿ\n\nå‚è€ƒ https://blog.csdn.net/jay_chou345/article/details/110201897\n\nå°†è¿™ä¸€ä¸²ä»£ç æ·»åŠ åˆ°src/components/TimeCapsuleçš„&lt;script setup&gt;å’Œ&lt;/script&gt;ä¹‹é—´\n// ç«™ç‚¹å­˜æ´»æ—¶é—´let runTime = &#123;  year: import.meta.env.VITE_SITE_YAER,  month: import.meta.env.VITE_SITE_MONTH,  day: import.meta.env.VITE_SITE_DAY,&#125;function secondToDate(second) &#123;  if (!second) &#123;      return 0;  &#125;  var time = new Array(0, 0, 0, 0, 0);  if (second &gt;= 365 * 24 * 3600) &#123;      time[0] = parseInt(second / (365 * 24 * 3600));      second %= 365 * 24 * 3600;  &#125;  if (second &gt;= 24 * 3600) &#123;      time[1] = parseInt(second / (24 * 3600));      second %= 24 * 3600;  &#125;  if (second &gt;= 3600) &#123;      time[2] = parseInt(second / 3600);      second %= 3600;  &#125;  if (second &gt;= 60) &#123;      time[3] = parseInt(second / 60);      second %= 60;  &#125;  if (second &gt; 0) &#123;      time[4] = second;  &#125;  return time;&#125;function setTime() &#123;  //monthè¦å°‘ä¸€ä¸ªæœˆï¼Œä¸ç„¶ä¼šå‡ºé—®é¢˜ã€‚å³monthçš„èŒƒå›´ä¸º 0-11  var create_time = Math.round(new Date(Date.UTC(runTime.year, runTime.month,runTime.day, 0, 0, 0)).getTime() / 1000);  var timestamp = Math.round((new Date().getTime() + 8 * 60 * 60 * 1000) / 1000);  var currentTime = secondToDate((  timestamp-create_time));  var currentTimeHtml = currentTime[0] + &#x27; å¹´ &#x27; + currentTime[1] + &#x27; å¤© &#x27;      + currentTime[2] + &#x27; æ—¶ &#x27; + currentTime[3] + &#x27; åˆ† &#x27; + currentTime[4]      + &#x27; ç§’&#x27;;  if(document.getElementById(&quot;htmer_time&quot;)!=null)      document.getElementById(&quot;htmer_time&quot;).innerHTML = &quot;æœ¬ç«™å·²ç»è‹Ÿæ´» &quot;+currentTimeHtml;&#125;// å³æ—¶åˆ·æ–°ç«™ç‚¹å­˜æ´»æ—¶é—´setInterval(setTime, 1000);\n\néšååœ¨é¡¶éƒ¨çš„æ¨¡æ¿æœ«å°¾çš„&lt;/div&gt;å‰æ·»åŠ å¦‚ä¸‹ä»£ç \n&lt;span class=&quot;text&quot;&gt;  &lt;p id=&quot;htmer_time&quot;&gt;&lt;/p&gt;&lt;/span&gt;\n\nç¯å¢ƒå˜é‡.envä¸­æ·»åŠ å¦‚ä¸‹å­—æ®µ\n# ç«™ç‚¹è¿è¡Œæ—¶é—´ï¼ˆæ˜¾ç¤ºåœ¨æ—¶é—´èƒ¶å›Šä¸­ï¼‰## æ³¨æ„ï¼šæœˆä»½çš„èŒƒå›´æ˜¯0-11ï¼Œå¦åˆ™ä¼šæœ‰bugVITE_SITE_YAER = 2023VITE_SITE_MONTH = 0VITE_SITE_DAY  = 1\n\nè¿™æ ·å°±OKå•¦ï¼\n\nå½“æˆ‘å¼€äº†ä¸€ä¸ªpull requeståï¼Œæºé¡¹ç›®ä½œè€…æä¾›äº†ä¸€ä¸ªæ›´ç®€å•çš„ä»£ç ç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬æ›´åŠ ç²¾ç®€ï¼Œä½†æ˜¯ä¸èƒ½æ˜¾ç¤ºç§’æ•°ï¼Œä¸è¿‡å®Œå…¨å¤Ÿç”¨äº†ï¼\n\nhttps://github.com/imsyy/home/pull/63\n\nç¯å¢ƒå˜é‡\nVITE_SITE_START = &quot;2020-10-24&quot;\n\nvueä¸­ä»£ç \n&lt;span class=&quot;text&quot;&gt;    &lt;p id=&quot;htmer_time&quot;&gt;&#123;&#123; startDateText &#125;&#125;&lt;/p&gt;&lt;/span&gt;\n\nlet startDate = ref(import.meta.env.VITE_SITE_START);let startDateText = ref(null);// å»ºç«™æ—¥æœŸç»Ÿè®¡å‡½æ•°const siteDateStatistics = (startDate) =&gt; &#123;    const currentDate = new Date();    const differenceInTime = currentDate.getTime() - startDate.getTime();    const differenceInDays = differenceInTime / (1000 * 3600 * 24);    const differenceInMonths = differenceInDays / 30;    const differenceInYears = differenceInMonths / 12;    if (differenceInYears &gt;= 1) &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.floor(differenceInYears)&#125; å¹´ $&#123;Math.floor(differenceInMonths % 12)&#125; æœˆ $&#123;Math.round(differenceInDays % 30)&#125; å¤©`;    &#125; else if (differenceInMonths &gt;= 1) &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.floor(differenceInMonths)&#125; æœˆ $&#123;Math.round(differenceInDays % 30)&#125; å¤©`;    &#125; else &#123;        return `æœ¬ç«™å·²ç»è‹Ÿæ´»äº† $&#123;Math.round(differenceInDays)&#125; å¤©`;    &#125;&#125;onMounted(() =&gt; &#123;    startDateText.value = siteDateStatistics(new Date(startDate.value));&#125;);\n\n\n\n10.å…³é—­æ–°æ˜¥ç¯ç¬¼æ˜¥èŠ‚å‡æœŸç»“æŸè¾£ï¼æˆ‘ä»¬é¦–é¡µçš„æ–°æ˜¥ç¯ç¬¼ä¹Ÿè¦å–ä¸‹æ¥äº†\næ‰¾åˆ°App.vue,æ³¨é‡Šæ‰é‡Œé¢çš„import\n// æ–°æ˜¥ç¯ç¬¼// import &quot;@/utils/lantern.js&quot;;\n\n\nMoreâ€¦æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºæé—®\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["git","Hexo","vercel"]},{"title":"ã€C++ã€‘å¿«é€Ÿå­¦ä¹ ç±»å’Œå¯¹è±¡ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†","url":"/posts/3040822590/","content":"æœ¬ç¯‡åšå®¢æ˜¯å­¦æ ¡å¤§ä¸€ä¸‹C++æœŸæœ«è€ƒå¯Ÿçš„è¦æ±‚ï¼ŒåŒ…å«äº†C++ä¸­ç±»å’Œå¯¹è±¡çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œé€‚åˆå­¦ä¹ ç±»å’Œå¯¹è±¡çš„ä½ è§‚çœ‹ã€‚æœ€åè¿˜æœ‰ä¸¤ä¸ªå°é¡¹ç›®ï¼Œç»¼åˆäº†ç»å¤§éƒ¨åˆ†ç±»å’Œå¯¹è±¡çš„çŸ¥è¯†ï¼Œå¾ˆé€‚åˆç»ƒæ‰‹+æ·±åŒ–å­¦ä¹ ã€‚\n\n\nä¸ºäº†é¿å…è¢«åŒæ ¡copyï¼Œæœ¬ç¯‡åšå®¢åªåœ¨æˆ‘çš„HEXOä¸ªäººåšå®¢ä¸Šå‘å¸ƒ\nç¬¬ä¸€ç«  ç»ªè®º1.1 é¢å‘å¯¹è±¡ç¨‹åºç‰¹ç‚¹ä¸ç›®æ ‡é¢å‘å¯¹è±¡æœ‰ä¸‹é¢å‡ ä¸ªç‰¹å¾ï¼š\n\nç±»ä¸å¯¹è±¡ï¼šæŠŠç°å®ä¸–ç•Œä¸­çš„æŸä¸€ç±»ä¸œè¥¿ï¼Œæå–å‡ºæ¥ï¼Œç”¨ä»£ç è¡¨ç¤ºï¼›\nå°è£…æ€§ï¼šæŠŠè¿‡ç¨‹å’Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªåŒ…è£¹é‡Œé¢ï¼Œå¯¹æ•°æ®çš„è®¿é—®åªèƒ½é€šè¿‡å…¬å¼€æƒé™çš„å‡½æ•°æ¥å£æ¥è¿›è¡Œæ“ä½œï¼›\nç»§æ‰¿æ€§ï¼šä¸€ç§è”ç»“ç±»çš„å±‚æ¬¡æ¨¡å‹ï¼Œç±»ä¼¼æ ‘çŠ¶ç»“æ„ï¼›\nå¤šæ€æ€§ï¼šå…è®¸ä¸åŒç±»çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºå“åº”ï¼Œç”¨ä¸åŒçš„æ–¹æ³•æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚\n\nå…¶ä¸­ å°è£…ã€ç»§æ‰¿ã€å¤šæ€ è¢«ç§°ä¸ºé¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§\né€šè¿‡è¿™äº›ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å¾—åˆ°ï¼Œå…¶å®é¢å‘å¯¹è±¡çš„ç¨‹åºä¹Ÿæ˜¯åœ¨Cè¯­è¨€çš„é¢å‘è¿‡ç¨‹çš„åŸºç¡€ä¸Šå¾—æ¥çš„ã€‚å…¶ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„æœåŠ¡æŸä¸€ä¸ªå…·ä½“çš„é—®é¢˜ï¼Œå¹¶é€šè¿‡è¿™ä¸ªé—®é¢˜è¡ç”Ÿå‡ºä¸åŒçš„è§£é¢˜æ–¹æ³•ï¼Œå¹¶ç”¨ä»£ç æ¥è¡¨ç¤ºè§£å†³ä¸€ä¸ªé—®é¢˜å¯¹è±¡çš„è¿‡ç¨‹ã€‚\n1.2 é¢å‘å¯¹è±¡ç¨‹åºçŸ¥è¯†æ¶æ„\n\nç¬¬äºŒç«  é¢å‘ç¨‹åºå¯¹è±¡å…³é”®æ”¯æ’‘æŠ€æœ¯2.1 ç±»å’Œå¯¹è±¡ç±»å’Œå¯¹è±¡ä¸å‘½åç©ºé—´ç±»ä¼¼ï¼Œéƒ½æ˜¯å­˜åœ¨ä¸€ç§å°è£…ã€‚ä¸åŒçš„æ˜¯ï¼Œç±»æ˜¯å¯¹Cè¯­è¨€structç»“æ„ä½“ç±»å‹çš„æ‹“ã€‚é™¤äº†å˜é‡ä»¥å¤–ï¼Œç±»é‡Œé¢è¿˜å¯ä»¥å®šä¹‰æˆå‘˜å‡½æ•°ï¼Œå¹¶è®¾ç½®å®ƒä»¬çš„æƒé™ï¼Œå®ç°äº†å¯¹ä¸€ä¸ªæ¥å£çš„å®Œæ•´å°è£…ã€‚\n2.1.1 æ„é€ å‡½æ•°ä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œå½“æˆ‘ä»¬å†™Cè¯­è¨€çš„é¡ºåºè¡¨ã€é“¾è¡¨ç­‰ä»£ç çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šå†™ä¸€ä¸ªInitå‡½æ•°æ¥åˆå§‹åŒ–å†…å®¹ã€‚\nvoid Init()&#123;\ta=(int*)malloc(sizeof(int)*4);\tsize=0;\tcapa=4;&#125;\n\nä½†æ˜¯è¿™æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯ä¸å¤Ÿæ™ºèƒ½ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚\näºæ˜¯C++å°±æ•´å‡ºæ¥äº†ä¸€ä¸ªæ„é€ å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜\nç‰¹æ€§\næ„é€ å‡½æ•°ï¼šåå­—å’Œç±»åç›¸åŒï¼Œåˆ›å»ºç±»å¯¹è±¡çš„æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œåˆå§‹åŒ–ç±»ä¸­æˆå‘˜å˜é‡ï¼Œä½¿å…¶æœ‰ä¸€ä¸ªåˆé€‚çš„åˆå§‹å€¼ã€‚æ„é€ å‡½æ•°åœ¨å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸­åªè°ƒç”¨ä¸€æ¬¡\næ„é€ å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹æ€§ï¼š\n\nå‡½æ•°åå’Œç±»åç›¸åŒ\næ— è¿”å›å€¼\næ„é€ å‡½æ•°å¯ä»¥é‡è½½\nå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è°ƒç”¨å¯¹åº”çš„æ„é€ å‡½æ•°\nå¦‚æœä½ è‡ªå·±ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°\n\n2.1.1.1åŸºæœ¬ä½¿ç”¨ä¸‹é¢ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥æ¼”ç¤ºä¸€ä¸‹æ„é€ å‡½æ•°\nclass Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨åˆ›å»ºå¯¹è±¡q1çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨è°ƒç”¨äº†ç±»ä¸­çš„æ„é€ å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åˆå§‹åŒ–äº†è¿™ä¸ªé˜Ÿåˆ—\n\n\né™¤äº†ä¸Šé¢è¿™ç§æœ€åŸºæœ¬çš„æ— å‚æ„é€ å‡½æ•°ä»¥å¤–ï¼Œä¸€èˆ¬å†™æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šå¸¦ä¸€ä¸ªæœ‰ç¼ºçœå€¼çš„å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°çµæ´»ä½¿ç”¨è¿™ä¸ªé˜Ÿåˆ—\nQueue(int Capacity=4)&#123;    _a=(int*)malloc(sizeof(int)*Capacity);    _size=0;    _capa=Capacity;&#125;\n\nè°ƒç”¨è¿™ç§æ„é€ å‡½æ•°ä¹Ÿæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°æ®ç±»å‹çš„é•¿åº¦ï¼Œæ¥åˆ›å»ºä¸åŒå®¹é‡çš„é˜Ÿåˆ—ï¼Œé¿å…å¤šæ¬¡reallocé€ æˆçš„å†…å­˜ç¢ç‰‡\nQueue q1;//è°ƒç”¨æ— å‚çš„æ„é€ å‡½æ•°Queue q2(100);//è°ƒç”¨å¸¦å‚çš„æ„é€ å‡½æ•°\n\nå¤šç§æ„é€ å‡½æ•°æ˜¯å¯ä»¥åŒæ—¶å­˜åœ¨çš„ï¼Œä¸è¿‡ï¼å®ƒä»¬éœ€è¦æ»¡è¶³å‡½æ•°é‡è½½çš„åŸºæœ¬è¦æ±‚\nå½“ä½ è°ƒç”¨ä¸€ä¸ªæ— å‚çš„å‡½æ•°ï¼Œå’Œä¸€ä¸ªå…¨ç¼ºçœçš„å‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ‡µé€¼ï¼\nQueue();Queue(int Capacity=4);//è¿™ä¸¤ä¸ªå‡½æ•°ä¸æ„æˆé‡è½½ï¼Œä¼šæŠ¥é”™\n\næ­£ç¡®çš„é‡è½½åº”è¯¥æ˜¯ä¸‹é¢çš„æƒ…å†µ\nQueue();Queue(int Capacity);\n\nç¼–è¯‘å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå°±ä¼šæ™ºèƒ½é€‰æ‹©è¿™ä¸¤ä¸ªæ„é€ å‡½æ•°å…¶ä¸­ä¹‹ä¸€è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯åŒä¸€ä¸ªå¯¹è±¡åªä¼šè°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚\né™¤äº†åœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆå§‹åŒ–å‚æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œæ“ä½œ\nQueue(int Capacity=4)\t:_a(new int[Capacity]),    _size(0),    _capa(Capacity)&#123; &#125;\n\n2.1.1.2ç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ä¸Šé¢æåˆ°è¿‡ï¼Œå¦‚æœæˆ‘ä»¬ä¸å†™æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€‚\nä½†æµ‹è¯•è¿‡ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªé»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œå¥½åƒå•¥äº‹éƒ½æ²¡æœ‰å¹²â€”â€”æˆ–è€…è¯´ï¼Œå®ƒæŠŠ_a _b _c éƒ½åˆå§‹åŒ–æˆäº†éšæœºå€¼ï¼\n\nå®é™…ä¸Šï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹çš„\n\nå†…ç½®ç±»å‹ï¼šintã€charã€floatã€doubleâ€¦â€¦\nå¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹ï¼ˆå…¶ä»–çš„ç±»ï¼‰\n\nåœ¨å¤„ç†çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å¿½ç•¥å†…ç½®ç±»å‹ï¼›å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\nclass Date&#123;public:    //é»˜è®¤æ„é€ å‡½æ•°ï¼šä¸ä¼ å‚å°±èƒ½è°ƒç”¨çš„    //1.å…¨ç¼ºçœ 2.æ— å‚ 3.ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ    //å¯ä»¥æ˜¯åŠç¼ºçœçš„ï¼Œä½†æ˜¯ä¸å®ç”¨    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;        _A.Print();    &#125;private:    //ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ„é€ å‡½æ•°ï¼ˆå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™çš„è¯ï¼‰    //è‡ªåŠ¨ç”Ÿæˆçš„æ„é€ å‡½æ•°æ˜¯ä¸ä¼šåˆå§‹åŒ–å†…ç½®ç±»å‹çš„    //å†…ç½®ç±»å‹ï¼šint,char,doubleç­‰ç­‰    int _year;    int _month;    int _day;    //å¤–ç½®ç±»å‹ï¼šè‡ªå®šä¹‰ç±»å‹    //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒè‡ªå·±çš„é»˜è®¤æ„é€ å‡½æ•°    Queue _A;&#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨è°ƒç”¨äº†è‡ªå·±çš„æ„é€ å‡½æ•°çš„åŒæ—¶ï¼Œè¿˜è°ƒç”¨äº†å¤–ç½®ç±»å‹Queueçš„æ„é€ å‡½æ•°ï¼Œæå®šäº†å®ƒçš„åˆå§‹åŒ–\n\nå¦‚æœæˆ‘ä»¬å»æ‰Dateçš„æ„é€ å‡½æ•°ï¼Œå°±èƒ½çœ‹åˆ°ä¸‹é¢çš„æƒ…å†µã€‚QueueæˆåŠŸåˆå§‹åŒ–ï¼Œä½†æ˜¯å†…ç½®ç±»å‹çš„å¹´æœˆæ—¥éƒ½æ˜¯éšæœºå€¼\n\nä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªC++ç±»éƒ½éœ€è¦è‡ªå·±å†™æ„é€ å‡½æ•°ï¼Œä¸‹é¢è¿™ä¸¤ä¸ªæƒ…å†µé™¤å¤–\n\nç±»é‡Œé¢çš„æˆå‘˜éƒ½æ˜¯è‡ªå®šä¹‰ç±»å‹æˆå‘˜ï¼ˆä¸”æœ‰è‡ªå·±çš„æ„é€ å‡½æ•°ï¼‰\nå¦‚æœè¿˜æœ‰å†…ç½®ç±»å‹æˆå‘˜ï¼Œå£°æ˜æ—¶ç»™äº†ç¼ºçœå€¼\n\næ³¨ï¼šåªæœ‰ç±»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æ‰å¯ä»¥ç»™ç¼ºçœå€¼\n//ä¸‹é¢çš„æƒ…å†µå°±ä¸éœ€è¦å†™class MyStack&#123;private:      Queue q1;//è‡ªå®šä¹‰ç±»å‹      Queue q2;      int a=1;//å†…ç½®ç±»å‹å£°æ˜çš„æ—¶å€™ç»™äº†ç¼ºçœå€¼&#125;;\n2.1.1.3åˆå§‹åŒ–åˆ—è¡¨é™¤äº†ä¸Šé¢çš„æ–¹å¼ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ä¸ºåˆå§‹åŒ–åˆ—è¡¨\nDate(int year=2022,int month=2,int day=30)    :_year(year),\t_month(month),\t_day(day)&#123;&#125;\n\n\næ¯ä¸ªæˆå‘˜å˜é‡åªèƒ½åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­å‡ºç°ä¸€æ¬¡\nç±»ä¸­åŒ…å«ä»¥ä¸‹æˆå‘˜å¿…é¡»åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è¿›è¡Œåˆå§‹åŒ–\nå¼•ç”¨\nconstæˆå‘˜\nè‡ªå®šä¹‰ç±»å‹æˆå‘˜\n\n\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–ã€‚å› ä¸ºå¯¹äºè‡ªå®šä¹‰ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œåˆå§‹åŒ–åˆ—è¡¨çš„ä¼˜å…ˆçº§æ˜¯é«˜äº&#123; &#125;é‡Œé¢çš„å†…å®¹çš„ã€‚\nè¿™é‡Œè¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼\næˆå‘˜å˜é‡åœ¨ç±»ä¸­å£°æ˜çš„é¡ºåºå°±æ˜¯åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºï¼Œè€Œå¹¶éåˆå§‹åŒ–åˆ—è¡¨è‡ªå·±çš„é¡ºåºï¼\n\næ€ä¹ˆç†è§£å‘¢ï¼Ÿçœ‹ä¸‹é¢è¿™ä¸ªä»£ç \n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(month)\t&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå³ä¾¿æˆ‘ä»¬æŠŠ_dayæ”¾åœ¨äº†åˆå§‹åŒ–åˆ—è¡¨çš„é¦–ä½ï¼Œä½†ç”±äºå®ƒæ˜¯åœ¨æœ€åå£°æ˜çš„ã€‚æ‰€ä»¥æ„é€ å‡½æ•°èµ°åˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œä¼šä¾æ®å£°æ˜é¡ºåºï¼Œä¾æ¬¡åˆå§‹åŒ–å¹´ã€æœˆã€æ—¥ã€‚\n\nè¿™ä¼šå¼•èµ·ä»€ä¹ˆé—®é¢˜ï¼Ÿå†æ¥çœ‹çœ‹ä¸€ä¸ªé”™è¯¯ç¤ºä¾‹\n\nclass Date&#123;public:Date(int year=2022,int month=2,int day=30)    :_day(day),    _year(year),\t_month(_day)&#123;&#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå½“æˆ‘ä»¬ç”¨ä¸Šé¢è¿™ä¸ªåˆå§‹åŒ–åˆ—è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ¬æ„æ˜¯æƒ³åœ¨åˆå§‹åŒ–å®Œ_dayä»¥åï¼Œå°†_dayçš„å€¼èµ‹ç»™_monthã€‚ä½†ç”±äº_monthçš„å£°æ˜é¡ºåºåœ¨_dayä¹‹å‰ï¼Œæ‰€ä»¥_month(_day)ä¼šå…ˆæ‰§è¡Œï¼Œæ­¤æ—¶çš„_dayå°šä¸ºéšæœºå€¼ï¼Œè¿™å°±å¯¼è‡´æœˆä»½å˜æˆéšæœºå€¼äº†ï¼\n\nè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®é™…ä¸Šè‚¯å®šä¸ä¼šç”¨å¤©æ•°åˆå§‹åŒ–æœˆæ•°ï¼ŒèŒƒå›´ä¸ä¸€æ ·\n\næœ€å¥½çš„åŠæ³•ï¼Œå°±æ˜¯å£°æ˜é¡ºåºå’Œåˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºä¿æŒä¸€è‡´ï¼\n2.1.1.4 explicitå…³é”®å­—æ„é€ å‡½æ•°ä¸ä»…å¯ä»¥æ„é€ ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œå¯¹äºå•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œè¿˜å…·æœ‰éšå¼ç±»å‹è½¬æ¢çš„ä½œç”¨ã€‚\nclass Date&#123;public:    //æ­£å¸¸çš„æ„é€ å‡½æ•°    //Date(int year)    //    :_year(year)    //    &#123;&#125;\t    explicit Date(int year)        :_year(year)        &#123;&#125;private:    int _year;    int _month:    int _day;&#125;ï¼›void TestDate()&#123;    Date d1(2018);    // ç”¨ä¸€ä¸ªæ•´å½¢å˜é‡ç»™æ—¥æœŸç±»å‹å¯¹è±¡èµ‹å€¼    // å®é™…ç¼–è¯‘å™¨èƒŒåä¼šç”¨2019æ„é€ ä¸€ä¸ªæ— åå¯¹è±¡ï¼Œæœ€åç”¨æ— åå¯¹è±¡ç»™d1å¯¹è±¡è¿›è¡Œèµ‹å€¼    d1 = 2019;&#125;\n\nå½“æˆ‘ä»¬è°ƒç”¨èµ‹å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šç¼–è¯‘å™¨ä¼šå…ˆç”¨2019æ„é€ å‡ºä¸€ä¸ªdateç±»å‹å¯¹è±¡ï¼Œå†è°ƒç”¨èµ‹å€¼é‡è½½ï¼ˆè¿™é‡Œè¿˜æ²¡æœ‰å†™ï¼‰èµ‹å€¼ç»™d1ã€‚è¿™å°±æ˜¯ä¸€ä¸ªéšå¼ç±»å‹è½¬æ¢\nå¦‚æœæˆ‘ä»¬ç”¨explicitä¿®é¥°äº†è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†ä¸ä¼šè¿›è¡Œæ­¤ç±»éšå¼ç±»å‹è½¬æ¢ï¼\n\n2.1.2 æ‹·è´æ„é€ å‡½æ•°2.1.2.1ç‰¹æ€§å’Œä½¿ç”¨æ‹·è´æ„é€ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå®ƒçš„å‚æ•°æ˜¯å¦å¤–ä¸€ä¸ªDateç±»å‹ã€‚åœ¨ç”¨å·²æœ‰çš„ç±»ç±»å‹å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡çš„æ—¶å€™ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨\nå› ä¸ºæ‹·è´çš„æ—¶å€™æˆ‘ä»¬ä¸ä¼šä¿®æ”¹dçš„å†…å®¹ï¼Œæ‰€ä»¥ä¼ çš„æ˜¯constã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¿…é¡»è¿›è¡Œä¼ å¼•ç”¨è°ƒç”¨ï¼\nå¦‚ä¸‹é¢çš„è¿™ä¸ªå‡½æ•°ï¼Œåœ¨ä¼ å‚çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Dateçš„æ‹·è´æ„é€ \nvoid func(Date d);\n\nå¦‚æœä½ æ²¡æœ‰å†™æ‹·è´æ„é€ ï¼Œæˆ–è€…æ‹·è´æ„é€ é‡Œé¢ä¸æ˜¯ä¼ å¼•ç”¨ï¼Œç¼–è¯‘å™¨ä¼šå°±é€’å½’ä¸æ–­åˆ›å»ºæ–°çš„å¯¹è±¡è¿›è¡Œå€¼æ‹·è´æ„é€ ï¼Œç¨‹åºå°±æ­»å¾ªç¯è¾£\n//æ‹·è´æ„é€ ï¼Œå¦‚æœä¸å†™çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤ç”Ÿæˆä¸€ä¸ª    //å¯¹å†…ç½®ç±»å‹è¿›è¡Œå€¼æ‹·è´(æµ…æ‹·è´)    Date(const Date&amp; d)    &#123;        _year=d._year;        _month=d._month;        _day=d._day;        //å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„æ‹·è´æ„é€         Queue b(_A);    &#125;\n\nå’Œæ„é€ ã€ææ„ä¸åŒçš„æ˜¯ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„æ‹·è´æ„é€ ç»ˆäºæœ‰ç‚¹ç”¨äº†\n\nå®ƒä¼šå¯¹å†…ç½®ç±»å‹è¿›è¡ŒæŒ‰å†…å­˜å­˜å‚¨çš„å­—èŠ‚åºå®Œæˆæ‹·è´ï¼Œè¿™ç§ç§°ä¸ºå€¼æ‹·è´ï¼ˆåˆç§°æµ…æ‹·è´ï¼‰\nå¯¹å¤–ç½®ç±»å‹ä¼šè°ƒç”¨å®ƒçš„æ„é€ å‡½æ•°\n\n2.1.2.2æ·±æ‹·è´å¤–ç½®ç±»å‹æ‹·è´é—®é¢˜\nä½†æ˜¯ï¼å¦‚æœä½ ä½¿ç”¨äº†å¤–ç½®ç±»å‹ï¼Œè¯¥ç±»å‹ä¸­åŒ…å«mallocçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ„é€ å‡½æ•°å°±ä¸èƒ½ç”¨è¾£ï¼\nå› ä¸ºè¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨é»˜è®¤ç”Ÿæˆçš„æ‹·è´æ„é€ ä¼šè¿›è¡Œå€¼æ‹·è´ï¼Œæ‹·è´å®Œäº†ä¹‹åï¼Œå°±ä¼šå‡ºç°q1å’Œq2æŒ‡å‘åŒä¸€ä¸ªç©ºé—´çš„æƒ…å†µã€‚ä¿®æ”¹q2ä¼šå½±å“q1ï¼Œfreeçš„æ—¶å€™å¤šæ¬¡é‡Šæ”¾åŒä¸€ä¸ªç©ºé—´ä¼šæŠ¥é”™ï¼Œä¸ç¬¦åˆæˆ‘ä»¬çš„æ‹·è´æ„é€ çš„è¦æ±‚\n\næ³¨æ„æ³¨æ„ï¼Œmallocä¸è¡Œçš„åŸå› æ˜¯ï¼Œæ•°æ®æ˜¯å­˜åœ¨å †åŒºé‡Œé¢ï¼Œæ‹·è´çš„æ—¶å€™ï¼Œq2çš„_aå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè€Œä¸æ˜¯æ‹·è´äº†æ–°çš„æ•°æ®å†…å®¹ã€‚\n\nå¦‚æœä½ åœ¨ç±»é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªint arr[10]æ•°ç»„ï¼Œè¿™æ—¶å€™æ‹·è´æ„é€ å°±ç›¸å½“äºmemcpyï¼Œæ˜¯å¯ä»¥å®Œæˆæ‹·è´çš„å·¥ä½œçš„\nä½†æ˜¯mallocå’Œnewåˆ›é€ çš„ç©ºé—´æ˜¯åœ¨å †åŒºä¸Šçš„ï¼Œæ— æ³•ç›´æ¥æ‹·è´\n\nå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ·±æ‹·è´\n\näº†è§£newå’Œdelete\nä»Cè¯­è¨€è½¬åˆ°C++ï¼Œå¤šäº†newå’Œdeleteå…³é”®å­—ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”mallocå’Œfree\nint main()&#123;    int*p1=new int;//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´    int*p2=new int(10);//å¼€è¾Ÿä¸€ä¸ªintç±»å‹çš„ç©ºé—´ï¼Œå¹¶åˆå§‹åŒ–ä¸º10    int*p3=new int[10];//å¼€è¾Ÿ10ä¸ªintç±»å‹çš„ç©ºé—´    //æ³¨æ„åä¸¤ä¸ªçš„æ‹¬å·åŒºåˆ«ï¼        delete p1;//é”€æ¯p1æŒ‡å‘çš„å•ä¸ªç©ºé—´    delete p2;//åŒä¸Š        //delete p3;//é”€æ¯p3æŒ‡å‘çš„ç¬¬ä¸€ä¸ªç©ºé—´ï¼Œä¸èƒ½ç”¨äºæ•°ç»„    delete[] p3;//é”€æ¯p3æŒ‡å‘çš„æ•°ç»„        return 0;&#125;\n\næ·±æ‹·è´å®ç°\nåœ¨ä¸Šé¢å†™é“è¿‡ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆæ‹·è´æ„é€ å‡½æ•°ï¼Œå®Œæˆå€¼æ‹·è´å·¥ä½œã€‚ä½†æ˜¯é˜Ÿåˆ—çš„ä»£ç é‡Œé¢åŒ…å«å †åŒºçš„ç©ºé—´ï¼Œéœ€è¦æˆ‘ä»¬æ­£ç¡®é‡Šæ”¾ã€‚è¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å†™ä¸€ä¸ªæ‹·è´æ„é€ å®Œæˆæ·±æ‹·è´\n//æ‹·è´æ„é€ Queue(const Queue&amp; q)&#123;    _a=new int[q._capa];//æ³¨æ„è§£å¼•ç”¨    memcpy(_a, q._a, q._capa*sizeof(int));//æ‹·è´å†…å®¹    _size=q._size;    _capa=q._capa;&#125;\n\nç”¨ä¸‹é¢è¿™ä¸ªé˜Ÿåˆ—çš„ä»£ç æ¥æµ‹è¯•æ·±æ‹·è´\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;#include&lt;string.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue Init&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        //_a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;        _a=new int[_capa];        for(int i=0;i &lt; _capa;i++)        &#123;            _a[i]=i+1;        &#125;    &#125;    //æ‹·è´æ„é€     Queue(const Queue&amp; q)    &#123;        cout&lt;&lt;&quot;Queue Copy&quot;&lt;&lt;endl;        _a=new int[q._capa];        memcpy(_a, q._a, q._capa*sizeof(int));        _size=q._size;        _capa=q._capa;    &#125;    void Print()    &#123;        cout&lt;&lt;&quot;this:&quot;&lt;&lt;this&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;_a:&quot;&lt;&lt;_a&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;        for(int i=0;i &lt; _capa;i++)        &#123;            cout&lt;&lt;_a[i]&lt;&lt;&quot; &quot;;        &#125;        cout&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        //free(_a);        delete[] _a;        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;    &#125;private:    int* _a;    int _size;    int _capa;&#125;;int main()&#123;     Queue q1;    q1.Print();    cout&lt;&lt;endl;    Queue q2=q1;     q2.Print();    cout&lt;&lt;endl;    return 0;&#125;\n\næ·±æ‹·è´æ•ˆæœ\nå…ˆæ³¨é‡Šæ‰Queueçš„æ‹·è´æ„é€ å‡½æ•°ææ„å‡½æ•°ï¼ˆä¸ç„¶ä¼šæŠ¥é”™ï¼‰\nçœ‹ä¸€çœ‹ï¼Œå‘ç°åœ¨ä¸å†™æ‹·è´æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œq2å’Œq1çš„_aæŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€\n\nå–æ¶ˆææ„å‡½æ•°çš„æ³¨é‡Šï¼Œå¯ä»¥çœ‹åˆ°ä¸¤æ¬¡é‡Šæ”¾åŒä¸€ç‰‡ç©ºé—´ï¼Œå‘ç”Ÿäº†æŠ¥é”™\n\nå¦‚æœæˆ‘ä»¬æŠŠå†™å¥½çš„æ·±æ‹·è´æ„é€ åŠ ä¸Šï¼Œå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\nå½“ä½ åŠ ä¸Šç»™_aé‡Œé¢åˆå§‹åŒ–ä¸€äº›æ•°æ®ï¼Œä»¥åŠæ‰“å°_aæ•°æ®çš„å‡½æ•°åï¼Œå°±å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…q2çš„_aæœ‰äº†è‡ªå·±å…¨æ–°çš„åœ°å€ï¼Œå…¶å†…éƒ¨çš„å€¼ä¹Ÿå’Œq1ä¸€æ ·äº†\n\nè¿™æ ·å†™å‡ºæ¥çš„æ‹·è´æ„é€ ï¼Œå³ä¾¿æŠŠé˜Ÿåˆ—ä¸­çš„int* _aä¿®æ”¹ä¸ºchar*æˆ–è€…å…¶ä»–ç±»å‹ï¼Œéƒ½èƒ½æ­£ç¡®å®Œæˆæ‹·è´å·¥ä½œ\n\n\n2.1.3 ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°ç›¸å¯¹åº”ï¼Œææ„å‡½æ•°æ˜¯å¯¹è±¡åœ¨å‡ºäº†ç”Ÿå‘½å‘¨æœŸåè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨æ¥çˆ†ç ´å¯¹è±¡é‡Œçš„æˆå‘˜ï¼ˆå¦‚è¿›è¡Œfreeæ“ä½œï¼‰\nç”Ÿå‘½å‘¨æœŸæ˜¯ç¦»è¿™ä¸ªå¯¹è±¡æœ€è¿‘çš„&#123; &#125;æ‹¬å·\nç‰¹æ€§\n\nææ„å‡½æ•°åæ˜¯åœ¨ç±»åå‰åŠ ~\næ— å‚æ•°ï¼Œæ— è¿”å›å€¼\nä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°\nå¦‚æœä½ æ²¡æœ‰è‡ªå·±å†™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªææ„å‡½æ•°\n\nå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œç¼–è¯‘å™¨è‡ªå·±ç”Ÿæˆçš„ææ„å‡½æ•°ä¸ä¼šå¤„ç†å†…ç½®ç±»å‹ï¼›ä¼šè°ƒç”¨å¤–ç½®ç±»å‹çš„ææ„å‡½æ•°\nåŸºæœ¬ä½¿ç”¨\nææ„å‡½æ•°çš„å®šä¹‰å’Œæˆ‘ä»¬åœ¨å¤–éƒ¨å†™çš„Destroyå‡½æ•°ä¸€æ ·ï¼Œä¸»è¦æ‰§è¡Œfreeï¼ˆdeleteï¼‰æ“ä½œ\n#include&lt;iostream&gt;#include&lt;stdlib.h&gt;using namespace std;class Queue&#123;public:    Queue()    &#123;        cout&lt;&lt;&quot;Queue&quot;&lt;&lt;endl;//æµ‹è¯•æ˜¯å¦è°ƒç”¨        _a=(int*)malloc(sizeof(int)*4);        _size=0;        _capa=4;    &#125;    void Print()    &#123;        cout&lt;&lt;this&lt;&lt;&quot;: &quot;;        cout&lt;&lt;&quot;size: &quot;&lt;&lt;_size&lt;&lt;&quot; &quot;;        cout&lt;&lt;&quot;capa: &quot;&lt;&lt;_capa&lt;&lt;endl;    &#125;    ~Queue()    &#123;        //ææ„å‡½æ•°        free(_a);        _a=nullptr;        _size=_capa=0;        cout&lt;&lt;&quot;distory:&quot;&lt;&lt;this&lt;&lt;endl;//æµ‹è¯•è°ƒç”¨    &#125;private:    int* _a;    int _size;    int _capa;&#125;;\n\nå‡è®¾æˆ‘ä»¬åœ¨mainå‡½æ•°é‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œä½ èƒ½è¯´å‡ºq1å’Œq2è°å…ˆè¿›è¡Œææ„å‡½æ•°çš„è°ƒç”¨å—ï¼Ÿ\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…ˆè°ƒç”¨çš„æ˜¯q2çš„ææ„å‡½æ•°\n\nå› ä¸ºåœ¨åº•å±‚æ“ä½œä¸­ï¼Œç¼–è¯‘å™¨ä¼šç»™mainå‡½æ•°å¼€è¾Ÿæ ˆå¸§\næ ˆéµä»åè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œq2æ˜¯ååˆ›å»ºçš„ï¼Œæ‰€ä»¥åœ¨ææ„çš„æ—¶å€™ä¼šå…ˆææ„\n\n2.2 é™æ€æˆå‘˜2.2.1 é™æ€æ•°æ®æˆå‘˜å’Œæ™®é€šçš„æˆå‘˜å˜é‡ä¸åŒï¼Œé™æ€æˆå‘˜å˜é‡ä¸å±äºæŸä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯å±äºæ•´ä¸€ä¸ªç±»\nclass A&#123;//å®šä¹‰ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡\tstatic int _a  &#125;;\n\nä¹Ÿå› ä¸ºè¿™ä¸ªç‰¹æ€§ï¼Œé™æ€æˆå‘˜å˜é‡æ˜¯ä¸ä¼šè¢«sizeofè®¡å…¥çš„\nä»€ä¹ˆæ—¶å€™ä¼šç”¨åˆ°é™æ€æˆå‘˜å˜é‡ï¼Ÿæ¯”å¦‚å½“æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªç±»ç©¶ç«Ÿå¼€è¾Ÿäº†å¤šå°‘ä¸ªå¯¹è±¡çš„æ—¶å€™ã€‚å¦‚æœä½¿ç”¨æ™®é€šæˆå‘˜å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡çš„ï¼Œæ— æ³•å®Œæˆæ­£ç¡®çš„countè®¡æ•°ã€‚ä½¿ç”¨é™æ€æˆå‘˜å˜é‡åï¼Œè¯¥å˜é‡çš„å€¼ä¸ä¼šå› ä¸ºå®šä¹‰å¤šä¸ªå¯¹è±¡è€Œè¢«é‡ç½®ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°é‡Œé¢ï¼Œä½¿ç”¨count++ï¼Œæ¥å®ç°å¯¹ç±»å¼€è¾Ÿå¯¹è±¡ä¸ªæ•°çš„ç»Ÿè®¡ã€‚\nclass STU&#123;public:    STU()    &#123;        count++;        //...    &#125;    STU(const STU&amp; d)    &#123;        count++;        //...    &#125;\t//å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡\tstatic int count;  &#125;;int STU::count=0;//å¿…é¡»è¦åœ¨ç±»å¤–å®šä¹‰\n\nè¿™æ—¶å€™ï¼Œæ¯æ¬¡å¯¹è±¡åˆ›å»ºéƒ½ä¼šè®©conunt+1ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼è®¿é—®æ¥å¾—åˆ°countçš„å€¼\n\né€šè¿‡æŒ‡å®šç±»åŸŸæ¥è®¿é—®ï¼ŒSTU::count\né€šè¿‡å¯¹è±¡æ¥è®¿é—®ï¼ŒSTU s1; s1.count;\n\nå¦‚æœæƒ³åœ¨ç±»å¤–ç›´æ¥è®¿é—®é™æ€æˆå‘˜å˜é‡ï¼Œå°±ä¸èƒ½ç”¨privateï¼Œå¿…é¡»æ˜¯å…¬æœ‰æƒé™\n\n2.2.2 é™æ€æˆå‘˜å‡½æ•°å¦‚æœæŠŠé™æ€æˆå‘˜å˜é‡å®šä¹‰ä¸ºå…¬æœ‰ï¼Œé‚£ä¹ˆå¤–éƒ¨çš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥é€šè¿‡ç±»åŸŸæˆ–è€…å¯¹è±¡æ¥è®¿é—®è¿™ä¸ªé™æ€æˆå‘˜å˜é‡ï¼Œè¿™æ—¶å€™å°±ä¸åˆ©äºæˆ‘ä»¬ç¨‹åºçš„å°è£…ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€ŸåŠ©é™æ€æˆå‘˜å‡½æ•°æ¥è®¿é—®ç§æœ‰çš„é™æ€æˆå‘˜å˜é‡\n#include &lt;iostream&gt;using namespace std;class STU&#123;public:    STU() &#123;        count++;    &#125;    STU(const STU&amp; d)&#123;        count++;    &#125;    static int GetCount() &#123;        return count;    &#125;private:    static int count;&#125;;int STU::count=0;int main()&#123;    STU s1;        cout&lt;&lt;&quot;é€šè¿‡å¯¹è±¡s1è®¿é—®    &quot;&lt;&lt;s1.GetCount()&lt;&lt;endl;    cout&lt;&lt;&quot;é€šè¿‡ç±»åŸŸSTU::è®¿é—® &quot;&lt;&lt;STU::GetCount()&lt;&lt;endl;        return 0;&#125;\n\né™æ€æˆå‘˜å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹\n\nç±»é™æ€æˆå‘˜å³å¯ç”¨ç±»å::é™æ€æˆå‘˜æˆ–è€…å¯¹è±¡.é™æ€æˆå‘˜æ¥è®¿é—®\né™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰éšè—çš„thisæŒ‡é’ˆï¼Œä¸èƒ½è®¿é—®ä»»ä½•éé™æ€æˆå‘˜\né™æ€æˆå‘˜å’Œç±»çš„æ™®é€šæˆå‘˜ä¸€æ ·ï¼Œä¹Ÿæœ‰publicã€protectedã€privateä¸‰ç§è®¿é—®çº§åˆ«\né™æ€æˆå‘˜å‡½æ•°å¯ä»¥å…·æœ‰è¿”å›å€¼\n\n\n2.3 å¸¸æˆå‘˜2.3.1 å¸¸æ•°æ®æˆå‘˜æœ‰ä¸€éƒ¨åˆ†æ•°æ®æˆå‘˜ï¼Œæ˜¯ä¸€ä¸ªå®šå€¼ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†æŸä¸€ä¸ªå­¦ç§‘çš„ç±»class MATH\nclass MATH&#123;  int piont=6.0;//æ•°å­¦çš„å­¦åˆ†  &#125;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä½œä¸ºä¸€ä¸ªå­¦ç§‘ï¼Œå®ƒçš„è€ƒè¯•å­¦åˆ†&#x2F;ç»©ç‚¹æ˜¯å›ºå®šçš„ã€‚è¿™æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦åœ¨åç»­ä¿®æ”¹è¿™ä¸ªå­¦åˆ†çš„å®šä¹‰ï¼Œå°±å¯ä»¥å°†å®ƒè®¾ç½®ä¸ºconstå±æ€§ï¼Œé¿å…è¢«å…¶ä»–æˆå‘˜è¯¯ä¿®æ”¹\nclass MATH&#123;  const int piont=6.0;//æ•°å­¦çš„å­¦åˆ†  &#125;;\n\nå’Œæ™®é€šæˆå‘˜å’Œé™æ€æˆå‘˜å˜é‡ä¸åŒçš„æ˜¯\n\nå¸¸æˆå‘˜å˜é‡å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™åˆå§‹åŒ–\nå¸¸æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»å¤–å®šä¹‰\nå¸¸æˆå‘˜å˜é‡åªèƒ½åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µè¿›è¡Œå®šä¹‰\n\nclass MATH&#123;public:    MATH()        :score(6.0)//åˆå§‹åŒ–åˆ—è¡¨å¤„å®šä¹‰    &#123;        cout&lt;&lt;score&lt;&lt;endl;//æ‰“å°æµ‹è¯•    &#125;private:    const double score=0;//å¿…é¡»åœ¨å£°æ˜çš„æ—¶å€™å®šä¹‰åˆå€¼&#125;;\n\n2.3.2 å¸¸æˆå‘˜å‡½æ•°constä¿®é¥°çš„ç±»æˆå‘˜å‡½æ•°ç§°ä¹‹ä¸ºconstæˆå‘˜å‡½æ•°ï¼Œå³å¸¸æˆå‘˜å‡½æ•°ã€‚constä¿®é¥°ç±»æˆå‘˜å‡½æ•°ï¼Œå®é™…ä¿®é¥°çš„æ˜¯è¯¥æˆå‘˜å‡½æ•°éšå«çš„thisæŒ‡é’ˆï¼Œè¡¨æ˜åœ¨è¯¥æˆå‘˜å‡½æ•°ä¸­ä¸èƒ½å¯¹ç±»çš„ä»»ä½•æˆå‘˜è¿›è¡Œä¿®æ”¹ã€‚\nåŸºæœ¬çš„ä¿®é¥°æ–¹æ³•å¦‚ä¸‹ï¼Œåœ¨å‡½æ•°çš„æ‹¬å·ååŠ constå³å¯\nvoid Print()const&#123;\tcout&lt;&lt;_year&lt;&lt;endl;&#125;\n\nå®é™…ä¿®é¥°çš„æ˜¯è¯¥å‡½æ•°éšå«çš„thisæŒ‡é’ˆ\nthisæŒ‡é’ˆæœ¬èº«æ˜¯Date*constç±»å‹çš„ï¼Œä¿®é¥°åå˜ä¸ºconst Date* constç±»å‹\nvoid Print(const Date* const this)&#123;\tcout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;&#125;\n\n2.3.2.1 å®ä¾‹-æƒé™é—®é¢˜è¿™ä¹ˆè¯´å¥½åƒæœ‰ç‚¹è¿·ç³Šï¼Œæˆ‘ä»¬ç”¨å®ä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦constä¿®é¥°æˆå‘˜å‡½æ•°\nclass Date&#123;public:    Date(int year=2022,int month=2,int day=30)    &#123;        _year=year;        _month=month;        _day=day;    &#125;    void Print()    &#123;        cout&lt;&lt;_year&lt;&lt;&quot;-&quot;&lt;&lt;_month&lt;&lt;&quot;-&quot;&lt;&lt;_day&lt;&lt;endl;    &#125;private:    int _year;    int _month;    int _day;&#125;;\n\nå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­è°ƒç”¨Printå‡½æ•°ï¼Œåœ¨mainä¸­æ˜¯å¯ä»¥æ­£å¸¸è°ƒç”¨çš„\nint main()&#123;\tDate d1(2022,5,10);    d1.Print();    return 0;&#125;\n\nä½†å½“ä½ ç”¨ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œçš„æ—¶å€™ï¼Œäº‹æƒ…å°±ä¸ä¸€æ ·äº†\nvoid TEST(const Date&amp; d)&#123;\td.Print();//d.Print(&amp;d) --&gt;const Date*&#125;int main()&#123;\tDate d1(2022,5,10);    d1.Print();//d1.Print(&amp;d1) --&gt;Date*    TEST(d1);        return 0;&#125;\n\nè¿™æ—¶å€™æˆ‘ä»¬è¿›è¡Œäº†å¼•ç”¨è°ƒç”¨ï¼Œå› ä¸ºåœ¨TESTä¸­æˆ‘ä»¬ä¸ä¼šä¿®æ”¹d1çš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨constè¿›è¡Œäº†ä¿®é¥°\n\nè¿™æ—¶å€™TESTä¸­çš„d.Print()å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯const Date*æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹\nmainä¸­çš„d1.Print();å‡½æ•°è°ƒç”¨ï¼Œä¼ å…¥çš„æ˜¯Date*æŒ‡é’ˆ\n\näºæ˜¯å°±ä¼šå‘ç”Ÿæƒé™å†²çªé—®é¢˜ï¼š\n\nè¿™æ—¶å€™å¦‚æœæˆ‘ä»¬åœ¨å‡½æ•°åé¢åŠ äº†constï¼Œå°±å¯ä»¥é¿å…æ­¤ç§æƒé™æ”¾å¤§é—®é¢˜ã€‚è¿™æ ·ä¸ç®¡æ˜¯mainå‡½æ•°è¿˜æ˜¯TESTå‡½æ•°ä¸­å¯¹Print()å‡½æ•°çš„è°ƒç”¨ï¼Œå°±éƒ½å¯ä»¥æ­£å¸¸æ‰“å°äº†ï¼\næ€»ç»“ä¸€ä¸‹ï¼š\n\nconstå¯¹è±¡ä¸å¯ä»¥è°ƒç”¨éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstå¯¹è±¡å¯ä»¥è°ƒç”¨constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\nconstæˆå‘˜å‡½æ•°å†…ä¸å¯ä»¥è°ƒç”¨å…¶ä»–éconstæˆå‘˜å‡½æ•°ï¼ˆæƒé™æ”¾å¤§ï¼‰\néconstæˆå‘˜å‡½æ•°å¯ä»¥ç‹¬è°ƒç”¨å…¶ä»–constæˆå‘˜å‡½æ•°ï¼ˆæƒé™ç¼©å°ï¼‰\n\n2.3.2.2 ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ï¼Ÿä¼—æ‰€å‘¨å‘¨çŸ¥ï¼Œconstä¿®é¥°æŒ‡é’ˆæœ‰ä¸‹é¢ä¸¤ç§å½¢å¼\n\nåœ¨*ä¹‹å‰ä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆåœ°å€é‡Œçš„å†…å®¹ä¸èƒ½æ”¹ï¼‰\nåœ¨*ä¹‹åä¿®é¥°ï¼Œä»£è¡¨è¯¥æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ï¼ˆæŒ‡å‘çš„åœ°å€ä¸èƒ½æ”¹ï¼‰\n\nthisæŒ‡é’ˆæœ¬èº«å°±æ˜¯ç±»å‹å* constç±»å‹çš„ï¼Œå®ƒæœ¬èº«ä¸èƒ½è¢«ä¿®æ”¹ã€‚åŠ ä¸Šconstä¹‹åï¼ŒthisæŒ‡å‘çš„å†…å®¹ï¼Œæ—¢ç±»é‡Œé¢çš„æˆå‘˜å˜é‡ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚\nçŸ¥é“äº†è¿™ä¸€ç‚¹åï¼Œæˆ‘ä»¬å¯ä»¥åˆç†çš„åˆ¤æ–­å‡ºï¼šåªè¦æ˜¯éœ€è¦ä¿®æ”¹ç±»ä¸­æˆå‘˜å˜é‡çš„å‡½æ•°ï¼Œå°±ä¸éœ€è¦åœ¨()åé¢åŠ constä¿®é¥°\nå¦‚æœä¸€ä¸ªå‡½æ•°ä¸­ä¸éœ€è¦ä¿®æ”¹æˆå‘˜å˜é‡ï¼Œå°±å¯ä»¥åŠ constè¿›è¡Œä¿®é¥°ï¼ˆæœ€å¥½åŠ ä¸Šï¼Œå‘ŠçŸ¥è°ƒç”¨è€…è¯¥å‡½æ•°ä¸­ä¸ä¼šä¿®æ”¹æˆå‘˜å˜é‡ï¼‰\næ³¨æ„ï¼šå¦‚æœä½ ä½¿ç”¨äº†å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„å†™æ³•æ¥å®ç°ä¸€ä¸ªconstæˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆå£°æ˜å’Œå®šä¹‰çš„æˆå‘˜å‡½æ•°éƒ½éœ€è¦åŠ ä¸Šconstä¿®é¥°\n2.3.2.3 å‡ºé”™æƒ…å†µè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æé†’çš„æ˜¯ï¼Œå¦‚æœä½ å¯¹æŸä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†constä¿®é¥°ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°é‡Œé¢åŒ…å«çš„å…¶ä»–ç±»é‡Œé¢çš„å‡½æ•°ï¼Œéƒ½éœ€è¦è¿›è¡Œconstä¿®é¥°ã€‚ä¸ç„¶å°±ä¼šæŠ¥é”™\n\nå‡ºç°è¯¥æŠ¥é”™çš„æƒ…å†µå¦‚ä¸‹\n\nè¿™ä¸ªæƒ…å†µä¹Ÿæé†’æˆ‘ä»¬ï¼Œä¸èƒ½åœ¨constä¿®é¥°çš„å‡½æ•°ä¸­ï¼Œè°ƒç”¨éconstä¿®é¥°çš„æˆå‘˜å‡½æ•°\n\n2.4 å¸¸å¯¹è±¡å’Œå¸¸å¼•ç”¨2.4.1 å¸¸å¯¹è±¡å¯ä»¥ç”¨constæ¥ä¿®é¥°ä¸€ä¸ªå¯¹è±¡ï¼Œç§°ä¸ºå¸¸å¯¹è±¡\nconst &lt;classname&gt; s1;&lt;classname&gt; const s1;\n\nåœ¨åˆå§‹åŒ–è®¾ç½®å®Œå¸¸å¯¹è±¡åï¼Œè¯¥å¯¹è±¡çš„å†…å®¹å°±ä¸èƒ½è¿›è¡Œä¿®æ”¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡æ¥è®¿é—®å†…éƒ¨è¢«constä¿®é¥°çš„å‡½æ•°ï¼Œä¸”åªèƒ½è°ƒç”¨ç±»çš„ const æˆå‘˜ï¼ˆåŒ…æ‹¬ const æˆå‘˜å˜é‡å’Œ const æˆå‘˜å‡½æ•°ï¼‰\n\nå¸¸å¯¹è±¡è°ƒç”¨éconstä¿®é¥°å‡½æ•°ä¼šæŠ¥é”™\nä¸èƒ½ä¿®æ”¹å¸¸å¯¹è±¡ä¸­æˆå‘˜å˜é‡çš„å€¼\n\nconst STU s1(&quot;å°æ˜&quot;, 15, 90.6);\n\nå¦‚æœä½ æƒ³åœ¨å®šä¹‰constå¯¹è±¡åä¾æ—§å¯ä»¥ä¿®æ”¹æŸä¸€ä¸ªæˆå‘˜å˜é‡çš„å€¼ï¼Œå¯ä»¥ç”¨mutableæ¥ä¿®é¥°è¯¥æˆå‘˜å˜é‡ï¼Œè¿™æ ·ä¾æ—§å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼\nclass STU&#123;    mutable char *m_name;//mutableä¿®é¥°çš„æˆå‘˜å˜é‡ï¼Œåœ¨constå¯¹è±¡ä¸­ä»ç„¶å¯ä»¥è¢«ä¿®æ”¹    int m_age;    float m_score;&#125;;\n\nå¦‚ä¸Šé¢çš„nameå˜é‡ï¼Œå³ä¾¿å®šä¹‰äº†constå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥å¯¹å®ƒè¿›è¡Œä¿®æ”¹\n\n\n2.4.2 å¸¸å¼•ç”¨2.4.2.1 å¼•ç”¨åŸºæœ¬å½¢å¼å¼•ç”¨çš„åŸºæœ¬æ–¹å¼å¦‚ä¸‹\nint a=10;int&amp; b=a;int&amp; c=a;//åŒä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªåˆ«å//å¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ª//ä½†æ˜¯å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\næ­¤æ—¶çš„bå’Œcéƒ½æ˜¯açš„åˆ«åï¼Œæ³¨æ„æ˜¯åˆ«åï¼\n  \nå¯ä»¥ç”¨ä¸¤ä¸ªä¸åŒçš„å˜é‡åå¼•ç”¨åŒä¸€ä¸ªå˜é‡ï¼Œè€Œä¸”å¼•ç”¨äº†ä¹‹åä¸å¯ä»¥æ›´æ”¹å¯¹è±¡\n\nä¸€ä¸ªå˜é‡å¯ä»¥æœ‰å¤šä¸ªå¼•ç”¨\næŒ‡é’ˆå¯ä»¥æ›´æ”¹æŒ‡å‘çš„å¯¹è±¡ï¼Œå¼•ç”¨ä¸å¯ä»¥\nå¼•ç”¨å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™å°±åˆå§‹åŒ–ï¼Œä¸å¯ä»¥int&amp; b;\n\n\næ¯”å¦‚ä½ å«æåï¼Œæœ‰äººå«ä½ â€œå°æâ€ï¼Œè¿˜æœ‰äººå«ä½ â€œè‹±è¯­ä½œæ–‡äººâ€ï¼Œè¿™ä¸¤ä¸ªå¤–å·éƒ½æ˜¯ä½ çš„åˆ«åã€‚æŒ‡é’ˆå¹¶ä¸æ˜¯åˆ«åï¼ŒæŒ‡é’ˆæ˜¯é€šè¿‡åœ°å€è®¿é—®æŸä¸ªå˜é‡ã€‚è€Œå¼•ç”¨æ˜¯ç»™aå˜é‡èµ·å¦å¤–çš„ä¸¤ä¸ªåå­—ï¼Œå®é™…ä¸Šbå’Œcéƒ½å¯ä»¥å½“ä½œaæ¥ä½¿ç”¨\nç¼–è¯‘è¿è¡Œä»£ç ï¼Œè®©ç¼–è¯‘å™¨æ‰“å°å‡ºè¿™ä¸‰è€…çš„åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬çš„åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±æ˜¯åŒä¸€ä¸ªå˜é‡çš„ä¸åŒåå­—ã€‚\n\næŒ‡é’ˆå˜é‡çš„åœ°å€å’ŒæŒ‡é’ˆå˜é‡æ‰€æŒ‡å‘å¯¹è±¡çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œå¼•ç”¨çš„ç±»å‹å¿…é¡»å’Œå¼•ç”¨å®ä½“çš„ç±»å‹ç›¸åŒï¼Œä¸èƒ½ç”¨int&amp;å¼•ç”¨doubleç±»å‹\n\n\n2.4.2.2 å¼•ç”¨çš„æƒé™é—®é¢˜constå¸¸é‡\nå¼•ç”¨å¯ä»¥å¼•ç”¨å¸¸é‡ï¼Œä½†æ˜¯å¿…é¡»åŠ constä¿®é¥°\n\nåŸºæœ¬çš„æ€è·¯å°±æ˜¯â€œæƒé™å¯ä»¥ç¼©å°ï¼Œä½†ä¸å¯ä»¥æ”¾å¤§â€ã€‚\n\nåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œaæ˜¯ä¸€ä¸ªå¯ä»¥ä¿®æ”¹çš„å˜é‡ï¼Œä½†æ˜¯const int&amp;d=a;ä¸­çš„dæ˜¯ä¸èƒ½ä¿®æ”¹ï¼Œåªå¯è¯»å–açš„å†…å®¹ã€‚\neæ˜¯ä¸å¯ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥æ”¾å¤§æƒé™\n\nintå’Œdoubleç›¸äº’å¼•ç”¨\nåœ¨1.1ä¸­æœ‰æåˆ°ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨int&amp;æ¥å¼•ç”¨doubleç±»å‹çš„å˜é‡ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleï¼Œæ­¤æ—¶å¼•ç”¨å°±ä¸æ˜¯ç®€å•çš„ä¸€ä¸ªåˆ«åäº†ã€‚\nå…ˆæ¥äº†è§£ä¸€ä¸‹æŠŠdoubleå¤åˆ¶ç»™intç±»å‹ï¼Œè¿™æ—¶å€™ä¼šäº§ç”Ÿâ€œéšå¼ç±»å‹è½¬æ¢â€ï¼Œhä¿å­˜çš„æ˜¯zçš„æ•´æ•°éƒ¨åˆ†\n\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾zçš„æ•´æ•°éƒ¨åˆ†ï¼Œç„¶åèµ‹å€¼ç»™h\n\nä¸´æ—¶å˜é‡å…·æœ‰â€œå¸¸æ€§â€ï¼Œå¯è¯»ä¸å¯æ”¹\n\nè€Œå½“æˆ‘ä»¬ç”¨const int&amp;ç±»å‹æ¥å¼•ç”¨doubleæ—¶ï¼Œå®é™…ä¸Šå¼•ç”¨çš„æ˜¯ç¼–è¯‘å™¨äº§ç”Ÿçš„ä¸´æ—¶å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨const int&amp;æ¥å¼•ç”¨\nconst int&amp; i=z;//è¿™é‡Œçš„iæ˜¯ä¸´æ—¶å˜é‡çš„åˆ«å//åœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶å˜é‡å­˜æ”¾dçš„æ•´æ•°éƒ¨åˆ†//içš„åœ°å€å’Œzä¸ç›¸åŒï¼Œä¸”ä¸´æ—¶å˜é‡ä¸ä¼šé”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå’ŒiåŒæ­¥//ç”Ÿæˆçš„è¿™ä¸ªä¸´æ—¶å˜é‡æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥içš„æœ¬è´¨æ˜¯å¼•ç”¨äº†ä¸€ä¸ªintç±»å‹cout &lt;&lt;&quot;i= &quot;&lt;&lt;i&lt;&lt;endl;cout &lt;&lt;&quot;&amp;i= &quot;&lt;&lt; &amp;i &lt;&lt;endl; cout &lt;&lt;&quot;&amp;z= &quot;&lt;&lt; &amp;z &lt;&lt;endl;//åœ¨c++ä¸­å‡½æ•°ä¸»è¦ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œåé¢ä¼šè¿›ä¸€æ­¥å­¦ä¹ \n\nä¸€ä¸ªéå¸¸ç›´è§‚çš„éªŒè¯æ–¹æ³•ï¼Œå°±æ˜¯æ‰“å°ä¸€ä¸‹ï¼Œç…ç…å®ƒä»¬çš„åœ°å€æ˜¯å¦ç›¸åŒã€‚å¯ä»¥çœ‹åˆ°ï¼Œiçš„å€¼å’Œhæ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„å°±æ˜¯é‚£ä¸ªå­˜æ”¾äº†æ•´æ•°éƒ¨åˆ†çš„ä¸´æ—¶å˜é‡ï¼Œè¿™ä¸ªä¸´æ—¶å˜é‡çš„åœ°å€å’Œzä¸åŒ\n\n2.5 thisæŒ‡é’ˆåŠå·¥ä½œåŸç†2.5.1 ç‰¹ç‚¹å½“ä½ ç”¨åŒæ ·çš„å›¾çº¸å»ºäº†å¾ˆå¤šä¸ªå±‹å­åï¼Œæœ‰æ²¡æœ‰æƒ³è¿‡åº”è¯¥å¦‚ä½•åŒºåˆ†å®ƒä»¬å‘¢ï¼Ÿ\nC++åœ¨è®¾è®¡è¿™éƒ¨åˆ†çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ªthisæŒ‡é’ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šC++ç¼–è¯‘å™¨ç»™æ¯ä¸ªâ€œéé™æ€çš„æˆå‘˜å‡½æ•°â€œå¢åŠ äº†ä¸€ä¸ªéšè—çš„æŒ‡é’ˆå‚ æ•°ï¼Œè®©è¯¥æŒ‡é’ˆæŒ‡å‘å½“å‰å¯¹è±¡(å‡½æ•°è¿è¡Œæ—¶è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡)ï¼Œåœ¨å‡½æ•°ä½“ä¸­æ‰€æœ‰æˆå‘˜å˜é‡çš„æ“ä½œï¼Œéƒ½æ˜¯é€šè¿‡è¯¥æŒ‡é’ˆå»è®¿é—®ã€‚åªä¸è¿‡æ‰€æœ‰çš„æ“ä½œå¯¹ç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œå³ç”¨æˆ·ä¸éœ€è¦æ¥ä¼ é€’ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆã€‚\n\nthisæŒ‡é’ˆçš„ç±»å‹ï¼šç±»å* const \nåªèƒ½åœ¨â€œæˆå‘˜å‡½æ•°â€çš„å†…éƒ¨ä½¿ç”¨ \nthisæŒ‡é’ˆæœ¬è´¨ä¸Šå…¶å®æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„å½¢å‚ï¼Œæ˜¯å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œå°†å¯¹è±¡åœ°å€ä½œä¸ºå®å‚ä¼ é€’ç»™this å½¢å‚ã€‚æ‰€ä»¥å¯¹è±¡ä¸­ä¸å­˜å‚¨thisæŒ‡é’ˆã€‚ \nthisæŒ‡é’ˆæ˜¯æˆå‘˜å‡½æ•°ç¬¬ä¸€ä¸ªéšå«çš„æŒ‡é’ˆå½¢å‚ï¼Œä¸€èˆ¬æƒ…å†µç”±ç¼–è¯‘å™¨é€šè¿‡ecxå¯„å­˜å™¨è‡ªåŠ¨ä¼ é€’ï¼Œä¸éœ€è¦ç”¨æˆ·ä¼ é€’\n\n2.5.2 æ˜¾å¼ä½¿ç”¨thiså°±ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸¾ä¾‹\nvoid Print()&#123;\tcout&lt;&lt;_name&lt;&lt;endl;\tcout&lt;&lt;_sex &lt;&lt;endl;&#125;\n\nå®é™…ä¸Šï¼Œåœ¨è°ƒç”¨å®ƒçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåšå¦‚ä¸‹å¤„ç†ã€‚å› ä¸ºåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½å®Œæ•´çš„åŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚\nvoid Print(Student*const this)&#123;\tcout&lt;&lt;this-&gt;_name&lt;&lt;endl;\tcout&lt;&lt;this-&gt;_sex &lt;&lt;endl;&#125;\n\nè¿›ä¸€æ­¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä»£ç ï¼Œå¯ä»¥å¸®åŠ©ä½ ç†è§£thisæŒ‡é’ˆ\nbool operator==(const Date&amp; d)&#123;       return _year == d._year           &amp;&amp; _month== d._month           &amp;&amp; _day == d._day;&#125;\n\nè¿™æ˜¯ä¸€ä¸ªæ—¥æœŸçš„æ¯”è¾ƒå‡½æ•°ï¼Œæ˜¯æ“ä½œç¬¦é‡è½½ï¼ˆåé¢ä¼šè®²åˆ°ï¼‰ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¼ å…¥äº†ä¸€ä¸ªDateç±»å‹çš„å¼•ç”¨ï¼Œè¿™æ˜¯åŒºåˆ«äºthisçš„å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚\nå¦‚æœæ²¡æœ‰thisï¼Œé‚£å°±å¾ˆéš¾åŒºåˆ†ä¸¤ä¸ªå˜é‡çš„_yearï¼Œäºæ˜¯ç¼–è¯‘å™¨ä¼šæŠŠå®ƒä¼˜åŒ–æˆä¸‹é¢è¿™æ ·ï¼Œå°±ä¸ä¼šå­˜åœ¨æ— æ³•åŒºåˆ†çš„é—®é¢˜äº†\nbool operator==(Date*const this,const Date&amp; d)&#123;       return this-&gt;_year == d._year           &amp;&amp; this-&gt;_month== d._month           &amp;&amp; this-&gt;_day == d._day;&#125;\n\n2.5.3 ç©ºæŒ‡é’ˆé—®é¢˜åœ¨ç¨‹åºä¸­ï¼Œè®¿é—®NULLä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è§£å¼•ç”¨Nullä¼šæŠ¥é”™\n#include&lt;iostream&gt;using namespace std;class ta&#123;public:    void Print()    &#123;        cout&lt;&lt;&quot;print ta&quot;&lt;&lt;endl;        //cout&lt;&lt;_a&lt;&lt;endl;//err    &#125;private:    int _a;&#125;;int main()&#123;    ta* p=nullptr;    p-&gt;Print();   //å¯ä»¥å»è®¿é—®ç©ºæŒ‡é’ˆçš„å‡½æ•°   //å› ä¸ºå‡½æ•°åªæ˜¯å»è°ƒç”¨äº†ç±»é‡Œé¢çš„Printå‡½æ•°   //åŒæ—¶ä¼ äº†ä¸€ä¸ªpçš„thisæŒ‡é’ˆï¼ˆç©ºæŒ‡é’ˆä¼ å‚æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼‰   //ä½†æ˜¯å¦‚æœä½ å»è®¿é—®pé‡Œé¢_aå˜é‡ï¼Œå°±ä¼šæŠ¥è¿è¡Œé”™è¯¯    return 0;&#125;\n\n2.6 ç±»é—´å…³ç³»2.6.1  å‹å…ƒå…³ç³»å‹å…ƒåˆ†ä¸ºå‹å…ƒå‡½æ•°å’Œå‹å…ƒç±»ã€‚å‹å…ƒæä¾›äº†ä¸€ç§çªç ´å°è£…çš„æ–¹å¼ï¼Œæœ‰æ—¶æä¾›äº†ä¾¿åˆ©ã€‚ä½†æ˜¯å‹å…ƒä¼šå¢åŠ è€¦åˆåº¦ï¼Œç ´åäº†å°è£…ï¼Œæ‰€ä»¥å‹å…ƒä¸å®œå¤šç”¨ã€‚\n2.6.1.1 å‹å…ƒå‡½æ•°å‹å…ƒå‡½æ•°ç›¸å½“äºè¿™ä¸ªç±»çš„å¥½æœ‹å‹ï¼Œå®ƒå¹¶ä¸æ˜¯ç±»çš„æˆå‘˜å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®è¿™ä¸ªç±»çš„ç§æœ‰æˆå‘˜ã€‚å‹å…ƒå‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œå®ƒæ˜¯å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„æ™®é€šå‡½æ•°ï¼Œä¸å±äºä»»ä½•ç±»ï¼Œä½†éœ€è¦åœ¨ç±»çš„å†…éƒ¨æ˜ï¼Œå£°æ˜æ—¶éœ€è¦åŠ friendå…³é”®å­—ã€‚\nclass DATE&#123; // å‹å…ƒå‡½æ•°friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Date&amp; d);                                      friend std::istream&amp; operator&gt;&gt;(std::istream&amp; in, Date&amp; d);&#125;;\n\nä»¥&lt;&lt;å’Œ&gt;&gt;æ“ä½œç¬¦é‡è½½ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ç±»é‡Œé¢å®šä¹‰çš„è¯ï¼Œä½¿ç”¨è¿™ä¸ªé‡è½½çš„æ–¹å¼å°±ä¼šå˜æˆä¸‹é¢è¿™æ ·\nDATE d1;d1&lt;&lt;cout;d1&gt;&gt;cin;\n\nå› ä¸ºå¯¹äºåŒç›®æ“ä½œç¬¦ï¼Œé‡è½½çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ˜¯å°†ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ“ä½œç¬¦çš„å·¦å€¼çš„ã€‚åœ¨ç±»é‡Œé¢å®šä¹‰æ—¶ï¼Œç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯éšå«çš„thisæŒ‡é’ˆã€‚å³å¿…é¡»ç”¨å¯¹è±¡åä½œä¸ºå·¦æ“ä½œæ•°æ¥è¿›è¡Œä½¿ç”¨ã€‚è¿™æ ·è™½ç„¶ä¹Ÿèƒ½å®Œæˆæ—¢å®šä»»åŠ¡ï¼Œä½†è¿™ä¸ªä½¿ç”¨æ–¹å¼æœªå…å¤ªè¿‡å¥‡è‘©äº†ã€‚\nå®šä¹‰ä¸ºå‹å…ƒåï¼Œæ²¡æœ‰éšå«çš„thisæŒ‡é’ˆï¼Œå°±å¯ä»¥ä½¿ç”¨cout&lt;&lt;d1è¿™ç§æ­£å¸¸çš„æ–¹å¼æ¥è°ƒç”¨è¿™ä¸ªæ“ä½œç¬¦é‡è½½äº†\n\nä¸€ä¸ªå‡½æ•°å¯ä»¥æ˜¯å¤šä¸ªç±»çš„å‹å…ƒå‡½æ•°\nå‹å…ƒå‡½æ•°ä¸èƒ½ç”¨constä¿®é¥°\nå‹å…ƒå‡½æ•°å¯ä»¥åœ¨ç±»å®šä¹‰çš„ä»»ä½•åœ°æ–¹å£°æ˜ï¼Œä¸å—ç±»è®¿é—®é™å®šç¬¦é™åˆ¶\nå‹å…ƒå‡½æ•°çš„è°ƒç”¨ä¸æ™®é€šå‡½æ•°çš„è°ƒç”¨å’ŒåŸç†ç›¸åŒ\n\n\n2.6.1.2 å‹å…ƒç±»å‹å…ƒç±»çš„æ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½å¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„å‹å…ƒå‡½æ•°ï¼Œéƒ½å¯ä»¥è®¿é—®å¦ä¸€ä¸ªç±»ä¸­çš„éå…¬æœ‰æˆå‘˜ã€‚ \n\nå‹å…ƒå…³ç³»æ˜¯å•å‘çš„ï¼Œä¸å…·æœ‰äº¤æ¢æ€§ï¼šæ¯”å¦‚æœ‰Aç±»å’ŒBç±»ï¼Œåœ¨Aç±»ä¸­å£°æ˜Bç±»ä¸ºå…¶å‹å…ƒç±»ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨Bç±»ä¸­ç›´æ¥è®¿é—®Aç±»çš„ç§æœ‰æˆå‘˜å˜é‡ï¼Œä½†æƒ³åœ¨Aç±»ä¸­è®¿é—®Bç±»ä¸­ç§æœ‰çš„æˆå‘˜å˜é‡åˆ™ä¸è¡Œã€‚ \nå‹å…ƒå…³ç³»ä¸èƒ½ä¼ é€’ï¼šå¦‚æœBæ˜¯Açš„å‹å…ƒï¼ŒCæ˜¯Bçš„å‹å…ƒï¼Œåˆ™ä¸èƒ½è¯´æ˜Cæ—¶Açš„å‹å…ƒã€‚\n\nclass B;//å‰ç½®å£°æ˜class A&#123;\t//å£°æ˜å‹å…ƒç±»\tfriend class B;    private:    int _n;&#125;;class B&#123;public:    //å¯ä»¥åœ¨ç±»é‡Œé¢é€šè¿‡å¯¹è±¡è®¿é—®Açš„éå…¬æœ‰æˆå‘˜\tvoid Print()    &#123;        cout&lt;&lt;_a1._n&lt;&lt;endl;    &#125;private:    A _a1;&#125;;\n\n2.6.2 æ•´ä½“éƒ¨åˆ†å…³ç³»2.6.2.1 å†…åµŒå¯¹è±¡å†…åµŒå¯¹è±¡ï¼šåœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡\nåœ¨ä¸€äº›åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¼šéœ€è¦åœ¨ä¸€ä¸ªç±»é‡Œé¢å®šä¹‰å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚å¦‚ä¸‹é¢è¿™é“OJé¢˜ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸¤ä¸ªé˜Ÿåˆ—çš„ç±»æ¥å®ç°è¿™é‡Œçš„MyStackã€‚\n\nclass Queue&#123;  //é˜Ÿåˆ—çš„å®ç° &#125;;class MyStack &#123;public:    MyStack() &#123;    &#125;   //.....private:\tQueue q1;     Queue q2;&#125;;\n\nå¯¹äºå†…éƒ¨å¯¹è±¡Queueï¼Œéœ€è¦æ³¨æ„çš„æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\n\nå†…éƒ¨å¯¹è±¡å±äºå¤–ç½®ç±»å‹ï¼Œåœ¨å¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šå»è°ƒç”¨Queueçš„æ„é€ å‡½æ•°\nä¸èƒ½åœ¨MyStackç±»ä¸­ç›´æ¥å¯¹Queueè¿›è¡Œåˆå§‹åŒ–\n\nå¦‚æœåœ¨Queueä¸­å®šä¹‰äº†æœ‰å‚çš„æ„é€ å‡½æ•°ï¼Œéœ€è¦åœ¨MyStackæ„é€ å‡½æ•°ä¸­çš„åˆå§‹åŒ–åˆ—è¡¨å¤„è¿›è¡Œåˆå§‹åŒ–æ“ä½œ\n2.6.2.2 ç»„åˆèšåˆé—®é¢˜å½“ä¸€ä¸ªç±»çš„å¯¹è±¡æ‹¥æœ‰å¦ä¸€ä¸ªç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç±»èšåˆï¼š\n\næ¯ç±»Açš„æ¯ä¸€ä¸ªå¯¹è±¡ä¸­éƒ½ä¼šåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªBç±»çš„å¯¹è±¡\nç±»ç»„åˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„èšåˆå½¢å¼ï¼Œå…¶ä¸­æ‹¥æœ‰è€…ç±»æ§åˆ¶è¢«æ‹¥æœ‰è€…ç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚\n\nä¾æ—§ä»¥ä¸Šé¢çš„MyStackä»£ç ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬åœ¨é‡Œé¢å®šä¹‰äº†Queueå¯¹è±¡q1å’Œq2åï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå’ŒMyStackç±»å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸåŒæ­¥ã€‚MyStackç±»ä¼šå…ˆæ„é€ ï¼Œç„¶åæ„é€ q1å’Œq2ï¼›q1å’Œq2åˆ†åˆ«ææ„åï¼Œæ‰ä¼šææ„MyStackçš„ç±»å¯¹è±¡ã€‚\n2.6.2.3 å†…éƒ¨ç±»å½“å®šä¹‰å†…éƒ¨ç±»æ—¶ï¼Œå†…éƒ¨ç±»é»˜è®¤ä¸ºå¤–éƒ¨ç±»çš„å‹å…ƒï¼Œå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„éå…¬æœ‰æˆå‘˜ã€‚ä½†æ˜¯å†…éƒ¨ç±»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œå¤–éƒ¨ç±»ä¸èƒ½è®¿é—®å†…éƒ¨ç±»çš„éç§æœ‰æˆå‘˜ï¼Œä¹Ÿä¸èƒ½é€šè¿‡å¤–éƒ¨ç±»çš„å¯¹è±¡æ¥è®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜ã€‚\nclass A&#123;public:    class B&#123;      void Prin(const A&amp; a1)      &#123;          cout&lt;&lt; a1._a &lt;&lt;endl;//å¯ä»¥ç›´æ¥é€šè¿‡å¯¹è±¡æ¥è®¿é—®ç§æœ‰æˆå‘˜          cout&lt;&lt; count&lt;&lt;endl;//å¤–éƒ¨çš„é™æ€æˆå‘˜å¯ä»¥ç›´æ¥è®¿é—®          cout&lt;&lt; _b &lt;&lt;endl;      &#125;      int _b;      &#125;;private:    int _a;    static int count;&#125;;int A::count=0;\n\n2.6.3 ç»§æ‰¿æ´¾ç”Ÿå…³ç³»2.6.3.1 åŸºæœ¬ç”¨æ³•ç»§æ‰¿å’Œæ´¾ç”Ÿæ˜¯çˆ¶ä¸å­çš„å…³ç³»ï¼Œå…¶ä¸­å­ç±»æ‹¥æœ‰çˆ¶ç±»æˆå‘˜çš„åŒæ—¶ï¼Œè¿˜ä¼šæ‹¥æœ‰è‡ªå·±çš„æˆå‘˜\n\nç»§æ‰¿æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ï¼Œç”¨äºå¤šä¸ªç±»æœ‰å…¬å…±éƒ¨åˆ†çš„æ—¶å€™\nçˆ¶ç±»ï¼šåŸºç±»\nå­ç±»ï¼šæ´¾ç”Ÿç±»\n\n//ä¸¾ä¾‹ï¼šç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class ART &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬ &quot; &lt;&lt; &quot; ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt;endl;\t&#125;\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\nåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼ŒARTå’ŒLINKç±»ä¸­éƒ½æœ‰ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†ï¼Œè¿™æ—¶å€™å°±å‡ºç°äº†ä»£ç çš„é‡å¤ã€‚ç»§æ‰¿çš„å‡ºç°å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜çš„\n//ä¸‹é¢ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥å†™ï¼ŒWEBç±»æ˜¯ç½‘ç«™çš„å…¬å…±éƒ¨åˆ†class WEB &#123;public:\tvoid header()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; &quot;å½’æ¡£&quot; &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;\tvoid footer()//æ‰€æœ‰ç½‘ç«™é¡µé¢éƒ½æœ‰è¿™ä¸ª\t&#123;\t\tcout &lt;&lt; &quot;å…³äºæˆ‘ä»¬&quot; &lt;&lt; endl;\t\tcout &lt;&lt; &quot;ç½‘ç«™è®¿é—®é‡&quot; &lt;&lt; endl;\t&#125;&#125;;//ARTã€LINKæ˜¯ä¸¤ä¸ªå­ç±»ï¼Œç»§æ‰¿äº†WEBçš„å…¬å…±éƒ¨åˆ†//è¿™æ ·å°±å‡å°‘äº†ä»£ç é‡class ART : public WEB&#123;public:\tvoid func()//æ–‡ç« é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;æ–‡ç« &quot; &lt;&lt; endl;\t&#125;&#125;;class LINK : public WEB &#123;public:\tvoid func()//å‹é“¾é¡µé¢\t&#123;\t\tcout &lt;&lt; &quot;å‹é“¾&quot; &lt;&lt; endl;\t&#125;&#125;;\n\næµ‹è¯•å¯ä»¥å‘ç°ï¼ŒARTå’ŒLINKä½œä¸ºæ´¾ç”Ÿç±»ï¼Œåœ¨ç»§æ‰¿äº†åŸºç±»WEBçš„æˆå‘˜çš„åŸºç¡€ä¸Šï¼Œè¿˜æ‹¥æœ‰äº†å®ƒä»¬ç‹¬ç‰¹çš„å•ç‹¬æˆå‘˜\n\nåŒä¸€ä¸ªç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªåŸºç±»\nclass C : public A,public B&#123;//.....&#125;;\n\n2.6.3.2 æƒé™é—®é¢˜ç»§æ‰¿æœ‰3ä¸­ç±»å‹ï¼špublicã€privateã€protectedã€‚è¿™é‡Œä¼šæ˜¾ç¤ºå‡ºç±»ä¸­protectedæƒé™å’Œprivateæƒé™çš„åŒºåˆ«\nclass A&#123;public:\tint a;protected:\tint b;private:\tint c;&#125;;\n\nå½“æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸Šé¢ä¸‰ç§æ–¹å¼å¯¹ç±»Aè¿›è¡Œç»§æ‰¿çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„\n\nç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œæ´¾ç”Ÿç±»ä¸­ç»§æ‰¿çš„æˆå‘˜å°±å˜æˆä»€ä¹ˆç±»å‹\nä¸ç®¡ç”¨ä»€ä¹ˆç»§æ‰¿æ–¹å¼ï¼Œéƒ½æ— æ³•è®¿é—®åŸºç±»ä¸­çš„ç§æœ‰æˆå‘˜\n\n\n2.6.3.3 åŒåé—®é¢˜å½“åŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­å‡ºç°åŒåæˆå‘˜å‡½æ•°æˆ–è€…åŒåæˆå‘˜å˜é‡æ—¶ï¼Œä¼šå‡ºç°å†²çªã€‚è¿™æ—¶å€™ç¼–è¯‘å™¨ä¼šåšä¸€å®šçš„å¤„ç†ï¼šç›´æ¥è®¿é—®å˜é‡åå’Œå‡½æ•°åçš„æ—¶å€™ï¼Œä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»è‡ªå·±çš„æˆå‘˜\n//ç»§æ‰¿åŒåæˆå‘˜çš„å¤„ç†//\tæ™®é€šçš„åŒåæˆå‘˜class DAD1 &#123;public:\tDAD1()\t&#123;\t\t_a = 100;\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DAD func&quot; &lt;&lt; endl;\t&#125;\tvoid func(int i)\t&#123;\t\tcout &lt;&lt; &quot;DAD func int: &quot; &lt;&lt; i &lt;&lt; endl;\t&#125;\tint _a;//åŸºç±»ä¸­çš„è¯¥å˜é‡&#125;;class SON1 : public DAD1&#123;public:\tSON1()\t&#123;\t\t_a = 20;\t&#125;\tvoid Print()\t&#123;\t\tcout &lt;&lt;&quot;SON: &quot; &lt;&lt; _a &lt;&lt; endl;//ä¼˜å…ˆè®¿é—®æ´¾ç”Ÿç±»çš„_a\t\tcout &lt;&lt;&quot;DAD: &quot; &lt;&lt; DAD1::_a &lt;&lt; endl;//è®¿é—®åŸºç±»çš„_a\t&#125;\tvoid func()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;SON func&quot; &lt;&lt; endl;\t&#125;\tint _a;//æ´¾ç”Ÿç±»çš„åŒåå˜é‡&#125;;\n\n\nå¦‚æœæ˜¯é™æ€æˆå‘˜ï¼Œè®¿é—®æ–¹æ³•å°±æœ‰æ‰€å˜åŒ–\n//è®¿é—®åŒåçš„é™æ€æˆå‘˜class DAD2&#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1 &quot; &lt;&lt; endl;\t&#125;\tstatic void Test1(int n)\t&#123;\t\tcout &lt;&lt; &quot;DAD2 Test1(int)  &quot; &lt;&lt; n &lt;&lt; endl;\t&#125;&#125;;int DAD2::D_a = 100;class SON2 : public DAD2 &#123;public:\tstatic int D_a;\tstatic void Test1()\t&#123;\t\tcout &lt;&lt; &quot;SON2 Test1 &quot; &lt;&lt; endl;\t&#125;&#125;;int SON2::D_a = 200;\n\n\n2.6.3.4 è™šç»§æ‰¿æœ‰çš„æ—¶å€™ï¼Œç»§æ‰¿ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼šä¸€ä¸ªå­ç±»ç»§æ‰¿äº†ä¸¤ä¸ªåŸºç±»ï¼Œè€Œè¿™ä¸¤ä¸ªåŸºç±»åˆåŒæ—¶æ˜¯ä¸€ä¸ªåŸºç±»çš„æ´¾ç”Ÿç±»\n\nè¿™æ—¶å€™ï¼ŒDé‡Œé¢å°±ä¼šæœ‰ä¸¤ä»½Açš„å†…å®¹ï¼Œç›¸å½“äºä¸¤ä»½å…¬å…±éƒ¨åˆ†ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œå› ä¸ºä¼šé€ æˆç©ºé—´æµªè´¹ã€‚è€Œä¸”ç›´æ¥è®¿é—®çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™â€œå¯¹å˜é‡Xçš„è®¿é—®ä¸æ˜ç¡®â€\n\nå’Œå‰é¢è¯´é“çš„åŒåé—®é¢˜ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä½œç”¨åŸŸæ¥è®¿é—®ç‰¹å®šçš„å˜é‡ï¼Œä½†æ˜¯è¿™æ ·æ˜¯æ²»æ ‡ä¸æ²»æœ¬çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è§£å†³ç©ºé—´æµªè´¹çš„é—®é¢˜ã€‚\n//è§£å†³æ–¹æ³•1ï¼ˆæ²»è¡¨ä¸æ²»æœ¬ï¼‰//ç”¨ç±»åŸŸæ¥ä¿®æ”¹å’Œè®¿é—®cout &lt;&lt; &quot;intel: &quot; &lt;&lt; n1.INTEL::_Structure &lt;&lt; endl;cout &lt;&lt; &quot;amd: &quot;   &lt;&lt; n1.AMD::_Structure &lt;&lt; endl;\n\nè¿™å°±éœ€è¦æˆ‘ä»¬ä½¿ç”¨è™šç»§æ‰¿æ¥æ“ä½œï¼šç»™Bå’ŒCå¯¹Açš„ç»§æ‰¿åŠ ä¸Švirturalå…³é”®å­—\nclass CPU &#123;public:\tCPU()\t\t:_Structure(&quot;x86&quot;)\t&#123; &#125;\tchar _Structure[100];&#125;;class INTEL : virtual public CPU &#123;public:\tINTEL()\t\t:i_Brand(&quot;intel&quot;)\t&#123;&#125;\tchar i_Brand[10];&#125;;class AMD : virtual public CPU &#123;public:\tAMD()\t\t:a_Brand(&quot;amd&quot;)\t&#123;&#125;\tchar a_Brand[10];&#125;;\n\nè¿™æ—¶å€™ç›´æ¥è®¿é—®å˜é‡å°±ä¸ä¼šæŠ¥é”™äº†ã€‚å› ä¸ºè¿™æ—¶å€™ï¼ŒBå’ŒCä¸­çš„è¯¥å˜é‡æŒ‡å‘äº†åŒä¸€ä¸ªåœ°å€ï¼Œä¿®æ”¹æ“ä½œä¼šåŒæ­¥ã€‚\n\n2.7 å¤šæ€æ€§\né™æ€å¤šæ€ï¼šè¿ç®—ç¬¦é‡è½½\nåŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°ç»„æˆçš„å¤šæ€\n\n2.7.1 è¿ç®—ç¬¦é‡è½½2.7.1.1å®šä¹‰åœ¨è®²è§£èµ‹å€¼è¿ç®—ç¬¦é‡è½½ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ¥è®¤è¯†ä¸€ä¸‹å®Œæ•´çš„è¿ç®—ç¬¦é‡è½½ï¼šC++ä¸ºäº†å¢å¼ºä»£ç çš„å¯è¯»æ€§å¼•å…¥äº†è¿ç®—ç¬¦é‡è½½ï¼Œè¿ç®—ç¬¦é‡è½½æ˜¯å…·æœ‰ç‰¹æ®Šå‡½æ•°åçš„å‡½æ•°ï¼Œä¹Ÿå…·æœ‰å…¶è¿”å›å€¼ç±»å‹ï¼Œå‡½æ•°åå­—ä»¥åŠå‚æ•°åˆ—è¡¨ï¼Œå…¶è¿”å›å€¼ç±»å‹ä¸å‚æ•°åˆ—è¡¨ä¸æ™®é€šçš„å‡½æ•°ç±»ä¼¼ã€‚\nå‡½æ•°åä¸ºï¼šå…³é”®å­— operatorè¿ç®—ç¬¦ï¼Œå¦‚operator=\nå‡½æ•°åŸå‹ï¼šè¿”å›å€¼ç±»å‹ operatoræ“ä½œç¬¦(å‚æ•°åˆ—è¡¨)ï¼Œå¦‚Date operator=();\nä¸‹é¢æœ‰å‡ ç‚¹æ³¨æ„ï¼š\n\né‡è½½æ“ä½œç¬¦å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„æ“ä½œæ•°ï¼ˆå³æ“ä½œç¬¦é‡è½½å¯¹å†…ç½®ç±»å‹æ— æ•ˆï¼‰\nä¸èƒ½é€šè¿‡å…¶ä»–ç¬¦å·æ¥åˆ›å»ºæ–°çš„æ“ä½œç¬¦\nå¯¹äºç±»ç±»å‹çš„æ“ä½œç¬¦é‡è½½ï¼Œå½¢å‚æ¯”æ“ä½œæ•°å°‘ä¸€ä¸ªä¼ å‚ï¼ˆå› ä¸ºæœ‰ä¸€ä¸ªé»˜è®¤çš„å½¢å‚thisæŒ‡é’ˆï¼‰\nè¿™5ä¸ªæ“ä½œç¬¦æ˜¯ä¸èƒ½é‡è½½çš„ï¼š.*ã€::ã€sizeofã€? :ã€.\n\n2.7.1.2åŸºæœ¬ä½¿ç”¨ä»¥ä¸‹æ˜¯åœ¨å…¨å±€å®šä¹‰çš„æ“ä½œç¬¦é‡è½½ï¼Œç”¨äºåˆ¤æ–­æ—¥æœŸæ˜¯å¦ç›¸ç­‰\nbool operator==(const Date&amp; d1, const Date&amp; d2)&#123;    return d1._year == d2._year;    &amp;&amp; d1._month == d2._month    &amp;&amp; d1._day == d2._day;&#125;\n\nå½“æˆ‘ä»¬åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨d1==d2çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ“ä½œç¬¦é‡è½½\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±æ¥ä¼ å‚ä½¿ç”¨ï¼Œå¦‚if(operator==(d1,d2))\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼Œå’Œè°ƒç”¨ä¸€ä¸ªè€Œæ™®é€šå‡½æ•°æ²¡å•¥åŒºåˆ«ï¼Œå‹æ ¹ç®—ä¸ä¸Šæ“ä½œç¬¦é‡è½½ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯åœ¨ç±»é‡Œé¢å®šä¹‰æ“ä½œç¬¦é‡è½½çš„\n\nå½“æˆ‘ä»¬æŠŠå®ƒæ”¾å…¥ç±»Dateä¸­é—´ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸‹é¢è¿™æ ·\nbool operator==(const Date&amp; d2)&#123;    return _year == d2._year;    &amp;&amp; _month == d2._month    &amp;&amp; _day == d2._day;&#125;\n\nç¼–è¯‘å™¨åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä¼˜åŒ–æˆä¸‹é¢è¿™æ ·\nbool operator==(Date* this, const Date&amp; d2)//æ˜¾ç¤ºè°ƒç”¨ä¸º d1.operator==(d2);\nè€Œåœ¨mainé‡Œé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªé‡è½½åçš„æ“ä½œç¬¦å’ŒåŸæœ¬çš„ä½¿ç”¨æ–¹æ³•å®Œå…¨ç›¸åŒ\nDate d1(2022,6,1)Date d2(2022,5,1)d1==d2;//è‡ªåŠ¨è°ƒç”¨æ“ä½œç¬¦é‡è½½d1.operator==(d2);\n\n\n2.7.1.3èµ‹å€¼è¿ç®—ç¬¦é‡è½½å› ä¸ºæ¯ä¸€ä¸ªç±»éƒ½æœ‰ä¸åŒçš„æˆå‘˜ï¼Œç¼–è¯‘å™¨ä¸å¯èƒ½æ™ºèƒ½çš„è¿›è¡Œèµ‹å€¼æ“ä½œã€‚è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä¸€ä¸ªèµ‹å€¼è¿ç®—ç¬¦é‡è½½æ¥è¿›è¡Œèµ‹å€¼æ“ä½œäº†\nä»¥æ—¥æœŸç±»ä¸ºä¾‹ï¼Œèµ‹å€¼æ“ä½œå…¶å®å°±æ˜¯æŠŠå†…ç½®ç±»å‹æˆå‘˜ä¸€ä¸€èµ‹å€¼å³å¯\nDate&amp; operator=(const Date&amp; d)&#123;    if(this != &amp;d)//é¿å…è‡ªå·±ç»™è‡ªå·±èµ‹å€¼    &#123;        _year=d._year;        _month=d._month;        _day=d._day;    &#125;    return *this;&#125;\n\nç¼–å†™èµ‹å€¼é‡è½½ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š\n\nè¿”å›å€¼å’Œå‚æ•°ç±»å‹ï¼ˆæ³¨æ„è¦å¼•ç”¨ä¼ å‚ï¼Œä¸ç„¶ä¼šè°ƒç”¨æ‹·è´æ„é€ ï¼‰\næ£€æµ‹æ˜¯å¦è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼ˆé¿å…æµªè´¹æ—¶é—´ï¼‰\nå› ä¸ºè¿”å›çš„æ˜¯*thisï¼Œå‡ºäº†å‡½æ•°åæ²¡æœ‰é”€æ¯ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä¼ å¼•ç”¨è¿”å›\nä¸€ä¸ªç±»å¦‚æœæ²¡æœ‰æ˜¾å¼å®šä¹‰èµ‹å€¼è¿ç®—ç¬¦é‡è½½ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªï¼Œå®Œæˆå¯¹è±¡æŒ‰å­—èŠ‚åºçš„å€¼æ‹·è´ã€‚\n\nå¦‚æœç±»ä¸­æœ‰è‡ªå®šä¹‰ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤è°ƒç”¨å®ƒçš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½\n2.7.1.4æ‹·è´æ„é€ å’Œèµ‹å€¼é‡è½½çš„è°ƒç”¨é—®é¢˜å½“èµ‹å€¼æ“ä½œç¬¦å’Œæ‹·è´æ„é€ åŒæ—¶å­˜åœ¨çš„æ—¶å€™ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨èµ‹å€¼ï¼Œä»€ä¹ˆæ—¶å€™ä¼šè°ƒç”¨æ‹·è´æ„é€ å‘¢ï¼Ÿ\n\nåœ¨è¿™ä¸¤ä¸ªå‡½æ•°ä¸­æ·»åŠ coutè¿›è¡Œæ‰“å°æç¤ºï¼Œå¯ä»¥çœ‹åˆ°ï¼š\n\nå¦‚æœå¯¹è±¡åœ¨ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œå°±ä¼šè°ƒç”¨èµ‹å€¼é‡è½½\nå¦‚æœæ˜¯ä¸€ä¸ªå…¨æ–°çš„å˜é‡åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ï¼Œå°±è°ƒç”¨çš„æ˜¯æ‹·è´æ„é€ \n\n\n2.7.2 è™šå‡½æ•°2.7.2.1 åŸºæœ¬ä½¿ç”¨ä»¥åŠåŠ¨æ€å¤šæ€è™šå‡½æ•°ï¼Œå¹¶ä¸ä»£è¡¨è¿™ä¸ªå‡½æ•°æ˜¯è™šæ— çš„ã€‚è€Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åœ¨ä¸€å®šæƒ…å†µä¸‹ä¼šè¢«æ›¿æ¢ï¼ˆå°±å¥½æ¯”ç»§æ‰¿ä¸­çš„è™šç»§æ‰¿é—®é¢˜ï¼‰ã€‚è¦å®ç°åŠ¨æ€å¤šæ€ï¼Œå°±éœ€è¦å€ŸåŠ©è™šå‡½æ•°æ¥å®ç°ã€‚ä»¥ä¸‹é¢è¿™ä¸ªåŠ¨ç‰©è¯´è¯çš„ä»£ç ä¸ºä¾‹\n#include &lt;iostream&gt;using namespace std;class Animal &#123;public:\t//void Talk()\tvirtual void Talk()//è™šå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;Animal is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class CAT : public Animal&#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;CAT is talking&quot; &lt;&lt; endl;\t&#125;&#125;;class DOG : public Animal &#123;public:\tvoid Talk()//åŒåå‡½æ•°\t&#123;\t\tcout &lt;&lt; &quot;DOG is talking&quot; &lt;&lt; endl;\t&#125;&#125;;//åŸºç±»ä¸­ä¸ä½¿ç”¨è™šå‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°çš„å†…å®¹å·²ç¡®å®š//ä¸ç®¡ä¼ å‚ä»€ä¹ˆç±»ï¼Œéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°//åŠ ä¸Šè™šå‡½æ•°virtualåï¼Œä¼šè°ƒç”¨CATå’ŒDOGçš„Talkå‡½æ•°void MakeTalk(Animal&amp; it) &#123;\tit.Talk();//è°ƒç”¨å¯¹åº”çš„Talkå‡½æ•°&#125;\n\nå½“åŸºç±»Animalä¸­çš„Talkå‡½æ•°æ²¡æœ‰ç”¨virtualä¿®é¥°æ—¶ï¼Œä¸ç®¡ç»™è¿™ä¸ªå‡½æ•°ä¼ å‚ä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨Animalè‡ªå·±çš„Talkå‡½æ•°\n\nå½“æˆ‘ä»¬ç”¨è™šå‡½æ•°è¿›è¡Œä¿®é¥°åï¼Œå°±ä¼šè°ƒç”¨æ´¾ç”Ÿç±»CATå’ŒDOGçš„Talkå‡½æ•°ï¼Œè¿™å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠ¨æ€å¤šæ€ã€‚\n\nå¯¹äºè™šå‡½æ•°ï¼Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š\n\nå½“åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘æ´¾ç”Ÿç±»çš„å¯¹è±¡æ—¶ï¼Œå°±ä¼šè§¦å‘åŠ¨æ€å¤šæ€ï¼Œæ´¾ç”Ÿç±»ä¸­çš„åŒåå‡½æ•°ä¼šè¦†å†™åŸºç±»ä¸­çš„è™šå‡½æ•°\nä¸èƒ½å®šä¹‰é™æ€è™šå‡½æ•°â€”â€”å› ä¸ºé™æ€å‡½æ•°æ˜¯å±äºæ•´ä¸ªç±»çš„ï¼Œè€Œä¸æ˜¯å±äºæŸä¸€ä¸ªå¯¹è±¡\nä¸èƒ½å®šä¹‰è™šæ„é€ å‡½æ•°â€”â€”æ€»ä¸èƒ½ç”¨æ´¾ç”Ÿç±»çš„æ„é€ æ¥è¦†å†™åŸºç±»çš„æ„é€ å§ï¼Ÿ\nææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°\n\n2.7.2.2 è™šææ„å‡½æ•°æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ææ„ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¾€å¾€ä¼šç»™åŸºç±»çš„ææ„å‡½æ•°åŠ ä¸Švirtualä¿®é¥°ï¼Œè¿™æ ·åªè¦ä¼ æ´¾ç”Ÿç±»çš„å¯¹è±¡ç»™åŸºç±»çš„æŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨æ´¾ç”Ÿç±»å¯¹åº”çš„ææ„å‡½æ•°ï¼Œå®Œæˆä¸åŒçš„ææ„æ“ä½œã€‚è€Œä¸æ˜¯éƒ½å‘†å‘†çš„è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°â€”â€”é‚£æ ·å°±ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼\n#include&lt;iostream&gt;using namespace std;class Queue &#123;public:\tQueue()\t\t:_a(new int[10])\t&#123;\t&#125;\tvirtual ~Queue() &#123;\t\tcout &lt;&lt; &quot;~Queue&quot; &lt;&lt; endl;\t\tdelete[] _a;\t&#125;private:\tint* _a;&#125;;class MyStack :public Queue &#123;public:\tMyStack(int capa)\t\t:_a1(new int[capa])\t&#123;&#125;\t~MyStack() &#123;\t\tcout &lt;&lt; &quot;~MyStack&quot; &lt;&lt; endl;\t\tdelete[] _a1;\t&#125;private:\tint* _a1;&#125;;int main()&#123;\tQueue* q1=new MyStack(4);//çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»\tdelete q1;//è°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œå†è°ƒç”¨çˆ¶ç±»ææ„\treturn 0;&#125;\n\nè¿è¡Œä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆåŠŸé€šè¿‡çˆ¶ç±»çš„æŒ‡é’ˆï¼Œè°ƒç”¨äº†å­ç±»çš„ææ„å‡½æ•°ã€‚å­ç±»çš„ææ„å‡½æ•°ä¸­æœ¬èº«å°±ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»ææ„å‡½æ•°ã€‚è¿™æ ·ä¸€æ¥ï¼Œå­ç±»å’Œçˆ¶ç±»éƒ½è¢«æˆåŠŸææ„ï¼Œä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼\n$ ./test~MyStack~Queue\n\nå¦‚æœå»æ‰çˆ¶ç±»ææ„å‡½æ•°çš„virtualå…³é”®å­—ï¼Œåˆ™åªææ„çˆ¶ç±»\n$ ./test~Queue\n\n\n2.7.3 çº¯è™šå‡½æ•°åœ¨è™šå‡½æ•°çš„åŸºç¡€ä¸Šï¼ŒC++å®šä¹‰äº†çº¯è™šå‡½æ•°ï¼šæœ‰äº›æ—¶å€™ï¼Œåœ¨åŸºç±»é‡Œé¢å®šä¹‰æŸä¸€ä¸ªå‡½æ•°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œå…·ä½“çš„å®ç°è®©æ´¾ç”Ÿç±»å»åŒåè¦†å†™ã€‚\nçº¯è™šå‡½æ•°çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹\n//virtual å‡½æ•°è¿”å›ç±»å‹ å‡½æ•°å()=0;virtual void Print()=0;\n\næ´¾ç”Ÿç±»ä¸­å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™è¯¥ç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nclass A &#123;public:\t//virtual void Print();//è™šå‡½æ•°\tvirtual void Print() = 0;//çº¯è™šå‡½æ•°&#125;;class B :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;B print &quot; &lt;&lt; endl;\t&#125;&#125;;class C :public A &#123;public:\tvoid Print() &#123;\t\tcout &lt;&lt; &quot;C print &quot; &lt;&lt; endl;\t&#125;&#125;;\n\nå½“æˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»ä¸­è¦†å†™äº†è¯¥å‡½æ•°åï¼Œå³å¯å®ä¾‹åŒ–å¯¹è±¡å¹¶è°ƒç”¨è¯¥å‡½æ•°\n\nå’Œè™šå‡½æ•°ä¸€æ ·ï¼Œä½¿ç”¨åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆæ¥æ¥æ”¶æ´¾ç”Ÿç±»çš„å¯¹è±¡ï¼Œå³å¯è°ƒç”¨å¯¹åº”çš„å‡½æ•°\n\n2.7.4 æŠ½è±¡ç±»åŒ…å«çº¯è™šå‡½æ•°çš„ç±»å°±æ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š\n\næŠ½è±¡ç±»æ— æ³•å®ä¾‹åŒ–å¯¹è±¡\næŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»å¿…é¡»é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•°ï¼Œä¸ç„¶æ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»\nå¦‚æœåœ¨åŸºç±»ä¸­å®šä¹‰çš„çº¯è™šå‡½æ•°æ˜¯constä¿®é¥°çš„ï¼Œåˆ™æ´¾ç”Ÿç±»ä¸­å¯¹åº”çš„å‡½æ•°ä¹Ÿéœ€è¦ç”¨constä¿®é¥°\n\n\nç¬¬ä¸‰ç«   é¢å‘å¯¹è±¡åº”ç”¨3.1 çŸ©é˜µç±»è®¾è®¡åŠåº”ç”¨\nçŸ©é˜µç±»è¦æ±‚ï¼šè®¾è®¡ä¸€ä¸ªçŸ©é˜µç±»ï¼Œè¦æ±‚èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·éœ€æ±‚æ„å»ºrowè¡Œã€columnåˆ—çš„çŸ©é˜µï¼Œå¹¶çµæ´»æ¥å—åé¦ˆçŸ©é˜µå…ƒç´ ä¿¡æ¯ï¼ˆå¦‚ï¼šæŸè¡Œã€æŸåˆ—ã€æŸè¡ŒæŸåˆ—å…ƒç´ ï¼‰ã€‚å®ç°çŸ©é˜µçš„ç›¸å…³è¿ç®—ï¼ŒåŒ…æ‹¬çŸ©é˜µåŠ ï¼ˆ+ï¼‰ã€çŸ©é˜µä¹˜ï¼ˆ*ï¼‰ã€çŸ©é˜µè¾“å‡ºï¼ˆ&lt;&lt;ï¼‰ã€çŸ©é˜µèµ‹å€¼ï¼ˆ&#x3D;ï¼‰ã€è·å–çŸ©é˜µæŒ‡å®šä½ç½®å…ƒç´ å€¼ï¼ˆ[]ï¼‰\n\nè®¾è®¡è¯¥ç¨‹åºçš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹ï¼š\n\né‡è½½çŸ©é˜µç±»å¿…é¡»ä½¿ç”¨äºŒç»´æ•°ç»„ï¼Œä¸èƒ½ç”¨ä¸€ç»´æ•°ç»„+å…¬å¼åˆ¤æ–­çš„æ–¹æ³•ï¼ˆå› ä¸ºè¿™æ ·æ— æ³•é‡è½½[]æ“ä½œç¬¦ï¼‰\né‡è½½çŸ©é˜µåŠ å‡å’Œç›¸ä¹˜çš„è¿ç®—ç¬¦æ—¶å€™éœ€è¦æ³¨æ„çŸ©é˜µè¿ç®—çš„è§„åˆ™ï¼ˆç¬¬ä¸€è¡Œxç¬¬ä¸€åˆ—&#x3D;ç¬¬ä¸€ä¸ªï¼‰\n\n\n\nå¯¹äº+å’Œ-çš„é‡è½½ä¸åº”è¯¥ä¿®æ”¹åŸæœ¬çš„çŸ©é˜µï¼Œåº”è¯¥åˆ›å»ºä¸´æ—¶å¯¹è±¡tmpåï¼Œä¿®æ”¹tmpçš„å€¼å¹¶è¿”å›\n\nint a1=1,a2=2;a1+a2;//è¿™æ ·ç›¸åŠ å¹¶ä¸ä¼šå½±å“a1å’Œa2çš„å€¼\n\nå¦‚æœéœ€è¦ä¿®æ”¹åŸæœ¬çš„çŸ©é˜µï¼Œåº”è¯¥é‡è½½çš„æ“ä½œç¬¦æ˜¯+&#x3D;å’Œ-&#x3D;\n\nå¯¹äºçŸ©é˜µè¾“å‡º&lt;&lt;çš„é‡è½½ï¼Œå¿…é¡»ä½¿ç”¨å‹å…ƒå‡½æ•°ï¼Œå¦åˆ™ä½¿ç”¨ä¼šå˜æˆå¯¹è±¡&lt;&lt;coutï¼Œä¸æ˜¯æ­£å¸¸ä½¿ç”¨çš„æ–¹æ³•\nå¯¹äºè·å–çŸ©é˜µæŒ‡å®šä½ç½®å…ƒç´ å€¼[]çš„é‡è½½ï¼Œåº”è¯¥è¿”å›int*ç±»å‹ã€‚åœ¨æœ€å¼€å§‹è®¾è®¡çš„æ—¶å€™æˆ‘é”™è¯¯å†™æˆäº†intç±»å‹ï¼Œæ— æ³•æ­£ç¡®åœ°è¿ç»­ä½¿ç”¨ä¸¤ä¸ª[]\n\n//é‡è½½[]æ“ä½œç¬¦int* operator[](int row)&#123;    return arr[row];&#125;//ä½¿ç”¨è¯¥æ“ä½œç¬¦a1[1][3];//ç¬¬ä¸€ä¸ª[]æ˜¯æ“ä½œç¬¦é‡è½½a1[1];//è¿”å›äº†ç¬¬äºŒè¡Œçš„æ•°ç»„å//ç¬¬äºŒä¸ª[]æ˜¯æ™®é€šçš„æ“ä½œç¬¦æœ¬èº«ï¼Œè®¿é—®è¿”å›çš„æ•°ç»„åæ‰¾åˆ°å¯¹åº”åˆ—çš„å€¼\n\nçŸ©é˜µç±»å®Œæ•´ä»£ç å®ç°è§é™„å½•ã€‚\n3.2 é“¶è¡Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿè®¾è®¡åŠåº”ç”¨\né“¶è¡Œè´¦å·ç®¡ç†ç³»ç»Ÿè¦æ±‚ï¼šç®¡ç†ä¸åŒç”¨æˆ·åœ¨é“¶è¡Œçš„é‡‘èèµ„äº§ï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šç§é“¶è¡Œè´¦æˆ·ï¼ˆå¦‚ï¼šå®šæœŸå‚¨è“„ã€æ´»æœŸå‚¨è“„ã€ä¿¡æ¯å¡ã€ç”µå­è´¦æˆ·ã€è´·æ¬¾è´¦æˆ·ç­‰ï¼‰ã€‚è´¦æˆ·åŒ…æ‹¬è´¦å·ã€ä½™é¢ã€åˆ©ç‡ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥è¿›è¡Œè´¦æˆ·ä¿¡æ¯æŸ¥è¯¢ã€å­˜æ¬¾ã€å–æ¬¾ã€ç»“ç®—åˆ©æ¯ç­‰æ“ä½œã€‚é“¶è¡Œéœ€ç»Ÿè®¡æ‰€æœ‰è´¦æˆ·çš„æ€»é‡‘é¢ã€éªŒè¯é“¶è¡Œç³»ç»Ÿæ”¶æ”¯å¹³è¡¡ï¼Œå¹¶èƒ½å¤ŸåŠæ—¶é¢„è­¦åé¦ˆã€‚è®¾è®¡AccountæŠ½è±¡ç±»ä½œä¸ºæ‰€æœ‰é“¶è¡Œè´¦æˆ·é¡¶å±‚ç¥–å…ˆï¼Œæ ¹æ®å®é™…åº”ç”¨éœ€æ±‚åˆç†è®¾ç½®æ´¾ç”Ÿå±‚æ¬¡åŠç›¸åº”å­ç±»ã€‚ç»“åˆé“¶è¡Œåˆ©æ¯ç»“ç®—ã€ç”¨æˆ·è´·æ¬¾ç”³è¯·ç­‰å®é™…åº”ç”¨éœ€æ±‚ï¼Œé€‚å½“æ·»åŠ è¾…åŠ©ç±»ååŒæ“ä½œã€‚åˆç†å®šä¹‰è™šåŸºç±»ã€è™šå‡½æ•°ã€çº¯è™šå‡½æ•°ã€æŠ½è±¡ç±»å®Œæˆé“¶è¡Œè´¦å·ç®¡ç†ç³»ç»Ÿçš„ç¨³å®šå¯é è¿è¡Œã€‚\n\n3.2.1 åŸºæœ¬æ€è·¯ä»¥ä¸‹æ˜¯æˆ‘è®¾è®¡è¯¥ç®¡ç†ç³»ç»Ÿçš„æ€è·¯ï¼š\n\nè®¾è®¡äº†Accountç±»çš„ä¸»æ¡†æ¶ï¼Œä½œä¸ºåç»­ç±»çš„åŸºç±»\né€šè¿‡å¤šæ€ï¼Œå®ç°äº†æ´»æœŸå‚¨è“„ã€å®šæœŸå‚¨è“„ç±»ã€ä¿¡ç”¨å¡ç±»ã€è´·æ¬¾è´¦æˆ·çš„åŠŸèƒ½\nå®ç°äº†ç®€æ˜“èœå•ï¼Œé€šè¿‡switch caseè¯­å¥å’Œdo whileè¯­å¥å®ç°å¤šæ¬¡è°ƒç”¨ä¸åŒå‡½æ•°æ¥å£çš„æ“ä½œ\nä¸æ—¥æœŸç±»ç»“åˆï¼Œå®æ—¶è®¡ç®—å¤©æ•°å·®è·å¹¶ç»“ç®—åˆ©æ¯\n\nåœ¨è®¾è®¡è¯¥èœå•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°äº†å¾ˆå¤šé—®é¢˜éœ€è¦æ³¨æ„ï¼Œè¿™äº›é—®é¢˜ä¹ŸåŠ æ·±äº†æˆ‘å¯¹ç¼–ç¨‹çŸ¥è¯†ç‚¹çš„ç†è§£ã€‚\nå®Œæ•´ä»£ç å®ç°è§é™„å½•ã€‚\n3.2.2 è®¾è®¡ç³»ç»Ÿæ—¶é‡åˆ°çš„é—®é¢˜åœ¨è®¾è®¡è´·æ¬¾è´¦æˆ·çš„æ—¶å€™ï¼Œå®¹æ˜“å‡ºç°doubleæµ®ç‚¹æ•°å­˜æ”¾ç²¾åº¦çš„é—®é¢˜ã€‚ç”¨æˆ·è´·æ¬¾é¢åº¦å’Œä½™é¢ç›´æ¥è‹¥ç›´æ¥åˆ¤æ–­ç›¸ç­‰ï¼Œå¾ˆéš¾å¾—åˆ°æ­£ç¡®ç»“æœï¼ˆå› ä¸ºæµ®ç‚¹æ•°åé¢ä¼šè·Ÿç€å¾ˆå¤šæ²¡æœ‰æ‰“å°å‡ºæ¥çš„å°æ•°ï¼‰\n\nè¿™å°±ä¼šå‡ºç°ï¼Œå³ä¾¿ä½ æ ¹æ®ç¨‹åºæ¥å£ä¸­â€œæŸ¥çœ‹å¾…è¿˜é‡‘é¢â€æ¥å¾—åˆ°è‡ªå·±çš„å¾…è¿˜é‡‘é¢ï¼Œå¹¶æ‰§è¡Œè¿˜æ¬¾æ“ä½œåï¼Œè¿˜æ˜¯ä¼šæœ‰ä¸€éƒ¨åˆ†å°æ•°ä½çš„æ•°æ®å¹¶æ²¡æœ‰å®Œæ•´è¿˜å®Œï¼Œè¿™ä¸€éƒ¨åˆ†çš„å¤„ç†æ˜¯éå¸¸å›°éš¾çš„ã€‚ä¸ºäº†é¿å…ç”¨æˆ·æ°¸è¿œéƒ½è¿˜ä¸å®Œè‡ªå·±çš„è´·æ¬¾ï¼Œæˆ‘è®¾ç½®äº†doubleçš„ä¿®çº¦è§„åˆ™ï¼Œå³å½“ç”¨æˆ·ä½™é¢å’Œè´·æ¬¾&#x2F;é€æ”¯é¢åº¦çš„å·®å€¼å°äº0.2æ—¶ï¼Œä¸å†å¤„ç†åç»­çš„å°æ•°ä½\nif (_Max - _money &lt; 0.2)//æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜&#123;    cout &lt;&lt; &quot;æ— éœ€è¿˜æ¬¾&quot; &lt;&lt; endl;    return -1;&#125;\n\nåŒæ—¶åœ¨ä½™é¢è®¡ç®—ä¸­è¿›è¡Œå–é›¶ä¿®çº¦ï¼Œä¿è¯â€œå‰©ä½™å¾…è¿˜â€æ‰“å°å€¼å’Œâ€œæŸ¥çœ‹å¾…è¿˜é‡‘é¢â€å‡½æ•°çš„æ‰“å°å€¼åŒæ­¥ã€‚ç”¨è¿™ç§æ–¹å¼é—´æ¥è§£å†³äº†ç²¾åº¦é—®é¢˜ã€‚\n//å¾…è¿˜é‡‘é¢ä¸ºé€æ”¯é¢åº¦+åˆ©æ¯double money = (_Max - _money) + Income(tmp);if (money &lt; 0.02) &#123;\tmoney = 0;//ä¿®çº¦æµ®ç‚¹æ•°ï¼Œè§£å†³ç²¾åº¦é—®é¢˜&#125;\n\nåœ¨è®¾è®¡é”€æˆ·æ¥å£æ—¶ï¼Œä¸ºäº†é¿å…ç”¨æˆ·åœ¨é”€æˆ·åä»ç„¶èƒ½æ“ä½œè¯¥è´¦æˆ·ï¼Œä¸èƒ½åªæ˜¯ç®€å•çš„ä½¿ç”¨breakè·³å‡ºå•å±‚å¾ªç¯ï¼Œè€Œæ˜¯éœ€è¦ç”¨returnç›´æ¥ç»ˆæ­¢è¯¥ç¨‹åºã€‚\ncase 8:&#123;    cout &lt;&lt; &quot;é”€æˆ·åï¼Œè´¦æˆ·å†…çš„ä¸€åˆ‡ä¿¡æ¯éƒ½ä¼šè¢«æ¸…ç©º&quot; &lt;&lt; endl;    cout &lt;&lt; &quot;è¯·é—®æ‚¨ç¡®è®¤é”€æˆ·å—ï¼ŸY/N&quot; &lt;&lt; endl;    char a;    cin &gt;&gt; a;    if (a == &#x27;Y&#x27;) &#123;        delete A;        A = nullptr;        cout &lt;&lt; &quot;é”€æˆ·å®Œæˆ&quot; &lt;&lt; endl;        return;//ç»ˆæ­¢ç¨‹åº    &#125;    break;&#125;\n\n3.2.3 ä¸€äº›ç¼ºé™·1.æ–‡ä»¶æ“ä½œ\nè¯¥é“¶è¡Œç®¡ç†ç±»è¿˜å¯ä»¥æ·»åŠ æ–‡ä»¶æ“ä½œï¼Œæ¥ä¿å­˜ç”¨æˆ·çš„ä¿¡æ¯ã€‚åŸå…ˆæƒ³æ³•æ˜¯åœ¨Accountç±»ä¸­å®šä¹‰staticå…¨å±€å˜é‡è¿›è¡Œcount++ï¼Œä»¥æ­¤å¾—å‡ºæ‰€æœ‰æ´¾ç”Ÿç±»æ„é€ å¯¹è±¡çš„æ€»å’Œã€‚å†åˆ©ç”¨forå¾ªç¯è¿›è¡Œè¯»å–æ–‡ä»¶æ“ä½œï¼Œè¿™æ ·å°±èƒ½åœ¨ä¸‹ä¸€æ¬¡æ‰“å¼€ç¨‹åºçš„æ—¶å€™ï¼Œé€šè¿‡ç”¨æˆ·çš„è´¦æˆ·æ¥å®šä½ç”¨æˆ·çš„æŸä¸€ä¸ªç‰¹å®šè´¦æˆ·å¯¹è±¡ï¼Œè¿›è¡Œåç»­çš„æ“ä½œã€‚\nä½†æ˜¯Accountç±»ä½œä¸ºæŠ½è±¡ç±»æ˜¯æ— æ³•å®ä¾‹åŒ–å¯¹è±¡çš„ï¼Œå¦‚æœç”¨å„ä¸ªæ´¾ç”Ÿç±»æ¥è¿›è¡Œæ–‡ä»¶ç®¡ç†æ“ä½œï¼Œè¯¥ç¨‹åºå°±ä¼šå˜å¾—å¾ˆè‡ƒè‚¿ã€‚ä¸”ç”±äºæœ¬äººèƒ½åŠ›é—®é¢˜ï¼Œæ²¡èƒ½è®¾è®¡å‡ºå¾ªç¯è¯»å–æ–‡ä»¶å†…å®¹ï¼Œå¹¶è¿›è¡Œå®šä½ä¸‹ä¸€ä¸ªå¯¹è±¡ä½ç½®çš„æ“ä½œï¼Œæ•…åœ¨æœ€ç»ˆçš„è®¾è®¡ä¸­æ²¡æœ‰å®ç°æ–‡ä»¶æ“ä½œã€‚\n2.æ—¶é—´é—®é¢˜\nä¸ºäº†ä»£ç æµ‹è¯•éœ€è¦ï¼Œæ¯ä¸€æ¬¡æ“ä½œéƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨è¾“å…¥æ—¥æœŸã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é¡¹å·¥ä½œåº”è¯¥ç”±é“¶è¡Œç”¨æˆ·ç»ˆç«¯è‡ªåŠ¨åŒ–æ‰¿æ‹…ã€‚å¯ä»¥è®¾è®¡è¯»å–é¢„å®šä¹‰å®__TIME__æ¥è·å–æ¯ä¸€æ¬¡æ“ä½œçš„æ—¶é—´ï¼Œä»è€Œå®ç°å’Œç°å®ä¸­çš„æ—¶é—´å¯¹ç…§ï¼Œå»é™¤æ¯ä¸€æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨è¾“å…¥ä»£ç çš„ç¹ç\nç¬¬å››ç«   é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡å­¦ä¹ æ€»ç»“å­¦ä¹ ä»£ç éœ€è¦æœ‰ä¸€ä¸ªæŒä¹‹ä»¥æ’çš„å¿ƒï¼Œå†å­¦ä¹ çŸ¥è¯†ç‚¹çš„åŸºç¡€ä¸Šè¦åŒæ—¶åšæŒå†™ä»£ç çš„ç»ƒä¹ ã€‚æˆ‘åœ¨Giteeç äº‘ä¸Šåˆ›å»ºäº†è‡ªå·±çš„å­¦ä¹ ä»“åº“ï¼ŒåšæŒæ¯å¤©æ‰˜ç®¡ä»£ç ï¼Œä½œä¸ºè‡ªå·±å­¦ä¹ ç¼–ç¨‹æ‰“å¡çš„ä¸€ä¸ªè®°å½•\n\nå’Œå…¶ä»–ç§‘ç›®ä¸åŒï¼ŒCPPçš„å­¦ä¹ æ˜¯ä¸èƒ½åªåœç•™åœ¨ä¹¦ç±å’Œçº¸ç¬”ä¸Šçš„ï¼Œåªæœ‰ä½ ä¸Šæ‰‹è‡ªå·±æ•²ä»£ç äº†ï¼Œæ‰èƒ½è®¤è¯†åˆ°ä¸€äº›å…‰æ˜¯å¬è®²å’Œçœ‹ä¹¦å­¦ä¹ ä¸åˆ°çš„çŸ¥è¯†ã€‚æ¯”å¦‚ä¸€äº›ç¨‹åºå‡ºç°bugä¹‹åçš„VSè°ƒè¯•æŠ€å·§ï¼Œéƒ½æ˜¯æˆ‘åœ¨ç»ƒä¹ ä¸­å­¦ä¼šçš„ã€‚\n\nåŒæ—¶è¿˜éœ€è¦å­¦ä¼šåˆ©ç”¨å·¥å…·ï¼Œå¦‚åœ¨cplusplusç½‘ç«™ä¸ŠæŸ¥æ‰¾å‡½æ•°çš„å®šä¹‰ï¼Œæ ¹æ®ç»™å‡ºçš„ä»£ç ç¤ºä¾‹å°è¯•è‡ªå·±ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶åšåˆ°èƒ½åœ¨åé¢çš„ç¨‹åºè®¾è®¡ä¸­æ´»å­¦æ´»ç”¨ã€‚\nä¸ªäººè®¤ä¸ºï¼Œä¸ç®¡å­¦ä¹ çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Œåªæœ‰ç»¼åˆä»¥ä¸Šå‡ ç‚¹ï¼Œæ‰èƒ½çœŸæ­£å­¦å¥½ç¼–ç¨‹ã€‚\né™„å½•\nçŸ©é˜µç±»å’Œé“¶è¡Œç®¡ç†ç³»ç»Ÿå®Œæ•´ä»£ç ğŸ‘‰ã€ä¼ é€é—¨ã€‘\néƒ¨åˆ†èµ„æ–™å‚è€ƒCè¯­è¨€ä¸­æ–‡ç½‘ğŸ‘‰http://c.biancheng.net/\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","C++"],"tags":["Linux","Cpp","ç±»å’Œå¯¹è±¡"]},{"title":"ã€Dockerã€‘é…ç½®CentOSå®¹å™¨æ—¶å‡ºç° Error Failed to download metadata for repo 'appstream' Cannot prepare internal mirrorlist | è½¬è½½","url":"/posts/1296728696/","content":"æœ¬ç«™ç»å¸¸æ¬è¿ä¸€äº›å…¶ä»–åšä¸»æ–‡ç« ï¼Œä¸»è¦æ˜¯ä¸ºäº†æŒä¹…åŒ–è®¿é—®ã€‚é¿å…æ—¥åä»–äººåˆ æ–‡oråŸæ–‡æ— æ³•è®¿é—®ï¼›æ‰€æœ‰æ¬è¿çš„æ–‡ç« éƒ½ä¼šå†™æ˜åŸæ–‡åœ°å€ï¼Œå¹¶ä¸”ä¸ä¼šå±•ç¤ºæœ¬ç«™çš„copyright_info\n\n\nä¸‹æ–‡æ‰€å‡ºç°çš„åœºæ™¯ï¼Œæ˜¯æˆ‘åœ¨linuxä¸Šä½¿ç”¨dockerå®‰è£…centoså®¹å™¨æ—¶å‡ºç°çš„ï¼\n\nâœ¨åœ¨å­¦ä¹ ä½¿ç”¨ docker æŠ€æœ¯è¿‡ç¨‹ä¸­ï¼ŒåŸºäº centos é•œåƒè‡ªå®šä¹‰æ–°çš„é•œåƒï¼Œå…¶ä¸­åŸºç¡€é•œåƒ centos éœ€è¦æå‰å®‰è£…å¥½ vim å’Œ net-toolsï¼Œç„¶è€Œåœ¨åˆšå¼€å§‹é€šè¿‡ yum -y install vim å®‰è£… vim æ—¶ï¼Œä¾¿å‡ºç°äº†é”™è¯¯æç¤ºä¿¡æ¯ï¼š\nError: Failed to download metadata for repo &#39;appstream&#39;: Cannot prepare internal mirrorlist: No URLs in mirrorlist\n\nâœ¨ä¸Šé¢çš„æŠ¥é”™ä¿¡æ¯æ„æ€æ˜¯ï¼Œä»ä»“åº“ â€˜appstreamâ€™ ä¸‹è½½å…ƒæ•°æ®å¤±è´¥ï¼šç”±äºé•œåƒåˆ—è¡¨ä¸­æ²¡æœ‰ URLï¼Œä¸èƒ½å‡†å¤‡å†…éƒ¨é•œåƒåˆ—è¡¨ã€‚\né—®é¢˜åˆ†æ\nâœ¨ç¬¬ä¸€ç§å¯èƒ½çš„æƒ…å†µä¾¿æ˜¯ç½‘ç»œè¿æ¥é—®é¢˜ã€‚æ£€æŸ¥æ˜¯å¦å¯ä»¥è¿æ¥å¤–éƒ¨ç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨ ping baidu.com æŸ¥çœ‹æ˜¯å¦æœ‰ä¸¢åŒ…æƒ…å†µã€‚å¦‚æœä¸¢åŒ…ï¼Œåˆ™è¿›ä¸€æ­¥æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼›å¦‚æœæ²¡æœ‰ä¸¢åŒ…ï¼Œç»§ç»­é˜…è¯»ä¸‹æ–‡.\nâœ¨é‚£ä¹ˆç¬¬äºŒç§æƒ…å†µï¼Œä¾¿æ˜¯ CentOS å·²ç»åœæ­¢ç»´æŠ¤çš„é—®é¢˜ã€‚2020 å¹´ 12 æœˆ 8 å·ï¼ŒCentOS å®˜æ–¹å®£å¸ƒäº†åœæ­¢ç»´æŠ¤ CentOS Linux çš„è®¡åˆ’ï¼Œå¹¶æ¨å‡ºäº† CentOS Stream é¡¹ç›®ï¼ŒCentOS Linux 8 ä½œä¸º RHEL 8 çš„å¤åˆ»ç‰ˆæœ¬ï¼Œç”Ÿå‘½å‘¨æœŸç¼©çŸ­ï¼Œäº 2021 å¹´ 12 æœˆ 31 æ—¥åœæ­¢æ›´æ–°å¹¶åœæ­¢ç»´æŠ¤ï¼ˆEOLï¼‰;\næ›´å¤šçš„ä¿¡æ¯å¯ä»¥æŸ¥çœ‹ CentOS å®˜æ–¹å…¬å‘Šã€‚å¦‚æœéœ€è¦æ›´æ–° CentOSï¼Œéœ€è¦å°†é•œåƒä» mirror.centos.org æ›´æ”¹ä¸º vault.centos.org\n\né‚£ä¹ˆé’ˆå¯¹ä¸Šé¢æåˆ°çš„ç¬¬äºŒç§æƒ…å†µï¼Œç»™å‡ºçš„è§£å†³æ–¹æ³•å¦‚ä¸‹ğŸ”” é¦–å…ˆï¼Œè¿›å…¥åˆ° yum çš„ repos ç›®å½•\ncd /etc/yum.repos.d/\n\nğŸ”” å…¶æ¬¡ï¼Œä¿®æ”¹ centos æ–‡ä»¶å†…å®¹\nsed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*\n\nğŸ”” ç„¶åï¼Œç”Ÿæˆç¼“å­˜æ›´æ–°ï¼ˆç¬¬ä¸€æ¬¡æ›´æ–°ï¼Œé€Ÿåº¦ç¨å¾®æœ‰ç‚¹æ…¢ï¼Œè€å¿ƒç­‰å¾…ä¸¤åˆ†é’Ÿå·¦å³ï¼‰\nyum clean allyum makecache\n\n ğŸ”” æœ€åï¼Œè¿è¡Œ yum update å¹¶é‡æ–°å®‰è£… vim\nyum update -yyum -y install vim\n\nğŸ‰è‡³æ­¤ï¼Œé’ˆå¯¹ç¬¬äºŒç§æƒ…å†µå‡ºç°çš„é—®é¢˜æˆåŠŸè§£å†³ï¼\nåŸæ–‡ä½œè€…ï¼šReadThroughLifeåŸæ–‡åœ°å€ï¼šhttps://blog.csdn.net/weixin_43252521/article/details/124409151\n\n\n2024 é—®é¢˜æ›´æ–°æ…•é›ªäº24.01.22é‡æ–°å®‰è£…centos8çš„æ—¶å€™ï¼Œå®æµ‹ä¸Šè¿°åŠæ³•é…ç½®åï¼Œyum makecacheæ— æ³•æ‰§è¡Œï¼Œä¾æ—§ä¼šå‡ºç°é”™è¯¯\n# yum clean all &amp;&amp; yum makecacheFailed to set locale, defaulting to C.UTF-80 files removedFailed to set locale, defaulting to C.UTF-8CentOS-8 - AppStream                                                                    0.0  B/s |   0  B     00:30Failed to download metadata for repo &#x27;AppStream&#x27;Error: Failed to download metadata for repo &#x27;AppStream&#x27;\n\nåˆæ‰¾äº†å‡ ä¸ªæ•™ç¨‹\n\nCentOS æ‰§è¡Œyumå‘½ä»¤æŠ¥é”™ã€é”™è¯¯ï¼šä¸ºä»“åº“ â€˜appstreamâ€˜ ä¸‹è½½å…ƒæ•°æ®å¤±è´¥: â€¦ã€‘_é”™è¯¯:ä¸ºä»“åº“ â€˜appstreamâ€™ ä¸‹è½½å…ƒæ•°æ®å¤±è´¥ : cannot prepare intern-CSDNåšå®¢\nå®Œç¾è§£å†³CentOS8 yumå®‰è£…AppStreamæŠ¥é”™ï¼Œæ›´æ–°yumåæ— æ³•makecacheçš„é—®é¢˜\n\nä½†æ˜¯ä¾æ—§æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ï¼ä¿®æ”¹é•œåƒæºåè¿˜æ˜¯å¾ˆå¤šè½¯ä»¶éƒ½æ— æ³•å®‰è£…ã€‚\nç¬¬äºŒå¤©èµ·åºŠåˆè¯•äº†è¯•ï¼Œokäº†ï¼Œä¼°è®¡æ˜¯ç½‘ç»œæ³¢åŠ¨æ²¡åŠæ³•è¿ä¸ŠæœåŠ¡å™¨ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Linux","CentOS","Docker","è™šæ‹Ÿæœº"]},{"title":"ã€Dockerã€‘é…ç½®wiki js","url":"/posts/1924263382/","content":"wikijsæ˜¯ä¸€ä¸ªåœ¨çº¿å¤šäººåä½œï¼ˆå¸¦gitç‰ˆæœ¬ç®¡ç†ï¼‰çš„wikiå¥—ä»¶\n\n\nç›¸æ¯”äºå…¶ä»–wikiçš„å±•ç¤ºåŠŸèƒ½ä¸ºä¸»ï¼Œwikijså°†æƒé™ç®¡ç†+å¤šäººåä½œä½œä¸ºäº†é¦–ä¸ªè¦ç´ ï¼Œå…¶æ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘å™¨&#x2F;mardownç¼–è¾‘å™¨&#x2F;htmlæºç ç¼–è¾‘\n1.Docker-cliéƒ¨ç½²\nåœ¨äº‘æœåŠ¡å™¨å®‰è£… https://docs.requarks.io/install/ubuntu\n\nå¯ä»¥è·Ÿç€å®˜æ–¹çš„æŒ‡ä»¤èµ°ï¼Œä¸‹é¢èŠ‚é€‰äº†æœ€ç»ˆ3ä¸ªåˆ›å»ºå®¹å™¨çš„å‘½ä»¤ã€‚\né…ç½®å¯†é’¥\nmkdir -p /etc/wiki# Generate DB secretopenssl rand -base64 32 &gt; /etc/wiki/.db-secret# Create internal docker networkdocker network create wikinet# Create data volume for PostgreSQLdocker volume create pgdata\n\né…ç½®æ•°æ®åº“\ndocker create \\\t--name=db \\\t-e POSTGRES_DB=wiki \\\t-e POSTGRES_USER=wiki \\\t-e POSTGRES_PASSWORD_FILE=/etc/wiki/.db-secret \\\t-v /etc/wiki/.db-secret:/etc/wiki/.db-secret:ro \\\t-v pgdata:/var/lib/postgresql/data \\\t--restart=unless-stopped \\\t-h db \\\t--network=wikinet \\\tpostgres:11\n\né…ç½®ä¸»å®¹å™¨\ndocker create --name=wiki \\\t-e DB_TYPE=postgres \\\t-e DB_HOST=db \\\t-e DB_PORT=5432 \\\t-e DB_PASS_FILE=/etc/wiki/.db-secret \\\t-v /etc/wiki/.db-secret:/etc/wiki/.db-secret:ro \\\t-e DB_USER=wiki \\\t-e DB_NAME=wiki \\\t-e UPGRADE_COMPANION=1 \\\t--restart=unless-stopped \\\t-h wiki \\\t--network=wikinet \\\t-p 3000:3000 -p 3443:3443 \\\tghcr.io/requarks/wiki:2\n\nå‡çº§ä¼´ä¾£\ndocker create \\\t--name=wiki-update-companion \\\t-v /var/run/docker.sock:/var/run/docker.sock:ro \\\t--restart=unless-stopped \\\t-h wiki-update-companion \\\t--network=wikinet \\\tghcr.io/requarks/wiki-update-companion:latest\n\né…ç½®é˜²ç«å¢™\nsudo ufw allow sshsudo ufw allow httpsudo ufw allow httpssudo ufw --force enable\n\nè¿è¡Œå®¹å™¨\ndocker start dbdocker start wikidocker start wiki-update-companion\n\nåˆ°è¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥ç”¨3000ç«¯å£è®¿é—®wikijsäº†\n2.docker-composeéƒ¨ç½²å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.requarks.io/install/docker\ndocker-composeæœ€å¥½çš„ä¸€ç‚¹å°±æ˜¯æ–¹ä¾¿ç®¡ç†ï¼Œä¸éœ€è¦å•ç‹¬ç®¡ç†ä¸Šé¢çš„3ä¸ªå®¹å™¨ï¼Œè€Œæ˜¯ç”¨ä¸€æ¡å‘½ä»¤å°±èƒ½åŒæ—¶å¯åœå®¹å™¨\nversion: &quot;3&quot;services:  db:    image: postgres:11-alpine    environment:      POSTGRES_DB: wiki      POSTGRES_PASSWORD: wikijsrocks      POSTGRES_USER: wikijs    logging:      driver: &quot;none&quot;    restart: unless-stopped    volumes:      - db-data:/var/lib/postgresql/data  wiki:    image: ghcr.io/requarks/wiki:2    depends_on:      - db    environment:      DB_TYPE: postgres      DB_HOST: db      DB_PORT: 5432      DB_USER: wikijs      DB_PASS: wikijsrocks      DB_NAME: wiki    restart: unless-stopped    ports:      - &quot;80:3000&quot;volumes:  db-data:\n\n3.é…ç½®è¯ä¹¦letâ€™s encrpyé…ç½®è¯ä¹¦éœ€è¦å¤šæŒ‡å®šä¸¤ä¸ªç¯å¢ƒå˜é‡ï¼Œåˆ†åˆ«æ˜¯ä½ çš„åŸŸåä»¥åŠç”¨äºç”³è¯·è¯ä¹¦çš„é‚®ç®±\n-e &quot;LETSENCRYPT_DOMAIN=wiki.example.com&quot; \\-e &quot;LETSENCRYPT_EMAIL=admin@example.com&quot; \\-p 443:3443\n\nå¦‚æœä¸è¿™ä¹ˆåšï¼Œåˆ™éœ€è¦åœ¨nginxåå‘ä»£ç†ä¸Šé…ç½®è¯ä¹¦\n4.è¶…çº§æ–¹ä¾¿çš„sqliteï¼ˆä¸ªäººæ¨èï¼‰ä¸Šé¢çš„ä¸¤ä¸ªåŠæ³•ï¼Œéƒ½éœ€è¦å¤šå»ºä¸€ä¸ªæ•°æ®åº“çš„å®¹å™¨ã€‚å¯¹äºäº‘æœåŠ¡å™¨æ¥è¯´ï¼Œå†…å­˜æ˜¯åŠå…¶å®è´µçš„èµ„æºã€‚\nå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œwikijsåªä½œä¸ºç®€å•çš„è®°å½•ç”¨é€”ï¼Œè€Œä¸æ˜¯ç”Ÿäº§ç”¨é€”ï¼ˆæ¯”å¦‚å…¬å¸å†…éƒ¨åä½œå†™æ–‡æ¡£ï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è½»ä¾¿å¿«æ·çš„sqliteæ¥ä½œä¸ºæ•°æ®åº“ï¼Œé¿å…å¤šå¼€ä¸€ä¸ªå®¹å™¨çš„çƒ¦æ¼ï¼\ndocker run -d \\\t-p 8080:3000 \\\t--name wiki \\\t--restart unless-stopped \\\t-e &quot;DB_TYPE=sqlite&quot; \\\trequarks/wiki\n\nä¸€æ¡å‘½ä»¤æå®šï¼Œä¸éœ€è¦å¼„ä»€ä¹ˆç¬¬äºŒä¸ªæ•°æ®åº“ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿ\n\nå‚è€ƒ https://b4d.sablun.org/blog/2021-02-07-instant-wikijs-with-docker/\n\næ³¨æ„ï¼šè¯·ç¡®è®¤æ‚¨ä¸æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨sqliteã€‚ç›¸æ¯”äºå…¶ä»–æ•°æ®åº“ï¼Œsqliteçš„ä¸»è¦ä¼˜åŠ¿æ˜¯æ–¹ä¾¿ï¼Œå…¶æ€§èƒ½æ˜¯ä¸å¦‚mysqlç­‰æ•°æ®åº“çš„ï¼\nå¯¹äºä¸ªäººè€Œè¨€ï¼Œsqliteä¹Ÿç»°ç»°æœ‰ä½™äº†ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒæ€§èƒ½é—®é¢˜ã€‚\n4.è¯„è®ºé»˜è®¤çš„è¯„è®ºè¿å›å¤éƒ½ä¸æ”¯æŒï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªç®¡ç†é¡µé¢å’Œé€šçŸ¥ï¼Œå¦‚æœè¦æŠŠwikiå±•ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±éå¸¸ä¸æ–¹ä¾¿ï¼\nå¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œå»ºè®®é…ç½®ä¸€ä¸‹artalkè¯„è®ºç³»ç»Ÿ åœ¨wikijsä¸Šä½¿ç”¨artalkè¯„è®ºç³»ç»Ÿ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["nginx","Docker","wikijs"]},{"title":"ã€Linuxã€‘æµè§ˆå™¨å†™ä»£ç ï¼éƒ¨ç½²code-serverè¿œç¨‹vscodeç½‘é¡µ","url":"/posts/2203891398/","content":"éƒ¨ç½²code-serverè¿œç¨‹vscodeç½‘é¡µï¼Œåœ¨æµè§ˆå™¨ä¸Šå†™ä»£ç ï¼\n\n\nå‚è€ƒæ–‡æ¡£ https://developer.aliyun.com/article/876967#slide-7\n1.ä»€ä¹ˆæ˜¯code-serverï¼Ÿæ³¨æ„ï¼Œè¿™ä¸æ˜¯åœ¨linuxç³»ç»Ÿä¸Šå®‰è£…vscodeè½¯ä»¶ï¼ˆå’Œwindowsä¸€æ ·çš„vscodeå®¢æˆ·ç«¯ï¼‰\n\nå¼€æºä»“åº“ https://github.com/coder/code-server\n\ncode-serveræ˜¯ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ï¼ˆéå¾®è½¯å®˜æ–¹ï¼‰å…¶ä½œç”¨æ˜¯åœ¨ä½ çš„linuxä¸»æœºï¼ˆäº‘æœåŠ¡å™¨ï¼‰ä¸Šéƒ¨ç½²ä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè®¿é—®çš„vscodeé¡µé¢ï¼Œç±»ä¼¼å®˜æ–¹çš„vscode.dev\n\nå¾®è½¯å®˜æ–¹æ¨å‡ºçš„vscodeç½‘é¡µç‰ˆ https://vscode.dev/\nå®ƒå¯ä»¥é€šè¿‡æµè§ˆå™¨çš„apiè®¿é—®ä½ ç”µè„‘ä¸Šçš„æœ¬åœ°æ–‡ä»¶ï¼Œæ­¤æ—¶æµè§ˆå™¨å°±æ˜¯ä¸€ä¸ªvscodeå®¢æˆ·ç«¯\n\n\ncode-serveråŒç†ï¼Œå…¶è®¿é—®çš„æ˜¯ä½ linuxæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œä½œç”¨ç±»ä¼¼äºvscodeæ’ä»¶remote sshï¼Œè®©æˆ‘ä»¬å¯ä»¥ç”¨æµè§ˆå™¨ï¼Œåœ¨ä»»ä½•ç”µè„‘ã€å¹³æ¿ä¸Šè¿›è¡Œè¿œç¨‹å¼€å‘ï¼Œæ— é¡»ä¸‹è½½vscodeå®¢æˆ·ç«¯æˆ–è€…sshè½¯ä»¶ï¼\n\n1.1 å®˜æ–¹çš„vscode-server?å¾®è½¯å®˜æ–¹ç¡®å®æœ‰ä¸€ä¸ªvscode-serverï¼Œåœ¨å®˜ç½‘å¯ä»¥ä¸‹è½½ã€‚æˆ‘æµ‹è¯•äº†ä¹‹åï¼Œå‘ç°å®ƒæ˜¯æ‰“äº†ä¸€ä¸ªéš§é“ï¼Œé€šè¿‡vscode.devçš„å­åŸŸåè®¿é—®ï¼Œä¼šè½¬å‘åˆ°ä½ çš„ä¸»æœºä¸Šã€‚\n\nåœ¨æˆ‘è¿™é‡Œçš„æµ‹è¯•ï¼Œå‘ç°å‹æ ¹è¿ä¸ä¸Šå¾®è½¯çš„æœåŠ¡å™¨ã€‚æƒ³æƒ³å…¶å®ä¹Ÿå¾ˆæ­£å¸¸ï¼Œå› ä¸ºvscode-serverçš„æ–‡æ¡£é¡µé¢è¿ä¸­æ–‡éƒ½æ²¡æœ‰ï¼Œå†åŠ ä¸Šå¾®è½¯çš„æœåŠ¡å™¨ï¼Œå›½å†…ç”¨ä¸äº†ä¹Ÿæ˜¯æ„æ–™ä¹‹ä¸­\n2.å®‰è£…2.1 ä¸‹è½½å®‰è£…åŒ…æˆªè‡³æœ¬æ–‡åˆ›ä½œæ—¶é—´23-03-09ï¼Œcode-serverçš„æœ€æ–°ç‰ˆæœ¬æ˜¯4.10.1ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤è·å–åˆ°linuxä¸‹çš„å®‰è£…åŒ…\nwget https://github.com/cdr/code-server/releases/download/v4.10.1/code-server-4.10.1-linux-amd64.tar.gz\n\nå¦‚æœä¸Šé¢è¿™ä¸ªå‘½ä»¤ä½ æ— æ³•è®¿é—®ï¼Œå¯ä»¥å»githubçš„releasesé‡Œé¢æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…\n\nhttps://github.com/coder/code-server/releases/\n\næˆ‘çš„ç³»ç»Ÿæ˜¯amd64ï¼Œå³x86æ¶æ„ã€‚åœ¨githubé‡Œé¢ä¹Ÿæ˜¯æ‰¾linux amd64çš„åŒ…è¿›è¡Œå®‰è£…\n$ uname -aLinux 1c2261732150 5.10.120 #0 SMP Fri Jan 6 08:05:47 2023 x86_64 x86_64 x86_64 GNU/Linux\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æ ‘è“æ´¾ç­‰è®¾å¤‡ï¼Œè¯·ç”¨uname -aç¡®è®¤ä½ çš„ç³»ç»Ÿæ¶æ„ï¼Œå¹¶ä¸‹è½½å¯¹åº”çš„åŒ…\n\ngithubçš„releaseä¸‹è½½æ…¢ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªç½‘ç«™åŠ é€Ÿï¼ˆç”¨è¿…é›·ä¸‹ï¼Œé€Ÿåº¦èµ·é£ï¼‰\nhttps://doget.nocsdn.com/#/\n\nä¸‹è½½å®Œæˆåï¼Œå°†å‹ç¼©åŒ…ç”¨xftpä¼ è¾“åˆ°æœåŠ¡å™¨ä¸Š\n2.2 è§£å‹ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è§£å‹åˆšåˆšä¸‹è½½å¥½çš„å‹ç¼©åŒ…\ntar -zxvf code-server-4.10.1-linux-amd64.tar.gz\n\nç»™è§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹æ”¹ä¸ªçŸ­åå­—vsc\nmv code-server-4.10.1-linux-amd64 vsc\n\ncdè¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹\ncd vsc\n\nls -lï¼ŒåŸºæœ¬æ–‡ä»¶å¦‚ä¸‹\ntotal 792drwxr-xr-x   8 muxue muxue   4096 Mar  4 12:26 .drwx------   6 muxue muxue   4096 Mar  9 22:42 ..drwxr-xr-x   2 muxue muxue   4096 Mar  4 12:26 bindrwxr-xr-x   3 muxue muxue   4096 Mar  4 12:26 lib-rw-r--r--   1 muxue muxue   1084 Mar  3 17:13 LICENSEdrwxr-xr-x 243 muxue muxue  12288 Mar  4 12:26 node_modules-rw-r--r--   1 muxue muxue 480100 Mar  4 12:26 npm-shrinkwrap.jsondrwxr-xr-x   5 muxue muxue   4096 Mar  3 17:13 out-rw-r--r--   1 muxue muxue   5235 Mar  4 12:24 package.json-rwxr-xr-x   1 muxue muxue   4877 Mar  3 17:13 postinstall.sh-rw-r--r--   1 muxue muxue   3056 Mar  3 17:13 README.mddrwxr-xr-x   3 muxue muxue   4096 Mar  3 17:14 src-rw-r--r--   1 muxue muxue 180977 Mar  3 17:13 ThirdPartyNotices.txtdrwxr-xr-x   2 muxue muxue   4096 Mar  3 17:14 typings-rw-r--r--   1 muxue muxue  76688 Mar  4 12:26 yarn.lock\n\nç›´æ¥è¿›å…¥binæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶å°±åœ¨é‡Œå¤´\n$ lscode-server\n\nè¿™ä¸ªcode-serverå°±æ˜¯æˆ‘ä»¬è¦çš„å¯æ‰§è¡Œæ–‡ä»¶\n2.3 å¯åŠ¨code-serverexport PASSWORD=&quot;é…ç½®ä¸€ä¸ªå¯†ç &quot;code-server --port 8888 --host 0.0.0.0 --auth password\n\nä¸Šé¢è¿™ä¸ªå‘½ä»¤ï¼Œå¯åŠ¨ä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªç«¯å£ä¸º8888çš„webæœåŠ¡ï¼Œæ­¤æ—¶ä½¿ç”¨ip:8888çš„æ–¹å¼ï¼Œåº”è¯¥å°±å¯ä»¥è®¿é—®åˆ°ä½ çš„code-serveræœåŠ¡äº†ï¼\n[2023-03-09T14:52:07.081Z] info  Wrote default config file to ~/.config/code-server/config.yaml[2023-03-09T14:52:07.516Z] info  code-server 4.10.0 ac1fba8bde0c3f29bf6bc27d3d7d75cb2390a7c2[2023-03-09T14:52:07.517Z] info  Using user-data-dir ~/.local/share/code-server[2023-03-09T14:52:07.532Z] info  Using config file ~/.config/code-server/config.yaml[2023-03-09T14:52:07.532Z] info  HTTP server listening on http://0.0.0.0:8888/[2023-03-09T14:52:07.532Z] info    - Authentication is enabled[2023-03-09T14:52:07.532Z] info      - Using password from $PASSWORD[2023-03-09T14:52:07.532Z] info    - Not serving HTTPS\n\nå‡ºç°ä¸‹é¢çš„é¡µé¢ï¼Œé‚£å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼è¾“å…¥ä½ åˆšåˆšè®¾ç½®çš„å¯†ç ï¼Œå°±å¯ä»¥åƒä½¿ç”¨vscodeä¸€æ ·ä½¿ç”¨code-serveräº†ï¼\n\n2.4 é…ç½®æ–‡ä»¶é¦–æ¬¡å¯åŠ¨äº†ä¹‹åï¼Œä¼šåœ¨ä½ çš„ç”¨æˆ·è·¯å¾„ä¸‹ç”Ÿæˆä¸€ä¸ª.config/code-serveræ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªconfig.yaml\n$ ls .config/code-serverconfig.yaml\n\næ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥åœ¨é‡Œé¢é…ç½®code-serverçš„å¯†ç ï¼Œä»¥åŠhttpsè®¿é—®ã€‚å…¶ä½™çš„é…ç½®é¡¹æˆ‘è¿˜æ²¡æœ‰å…³æ³¨è¿‡ï¼Œå¯ä»¥å»çœ‹çœ‹githubä¸Šçš„æ–‡æ¡£\nbind-addr: 127.0.0.1:8080auth: passwordpassword: 64f1881b805917a449d80874cert: false\n\né»˜è®¤çš„å¯†ç å·¨é•¿ï¼Œæ”¹æˆä½ è‡ªå·±çš„å³å¯ã€‚åœ¨è¿™é‡Œè¿˜å¯ä»¥ä¿®æ”¹é»˜è®¤ç»‘å®šçš„ipå’Œç«¯å£ï¼Œåç»­å¯åŠ¨code-serverï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šäº†ï¼Œç›´æ¥è¿è¡Œå³å¯\n./code-server\n\n2.5 tmuxåå°è¿è¡Œ\nnohupè¿è¡Œcode-serveræœ‰ä¸€ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥è¦ç”¨tmux\n\nå¦‚æœæ²¡æœ‰è¿™ä¸ªè½¯ä»¶ï¼Œå…ˆå®‰è£…\nsudo yum install tmux\n\nåˆ›å»ºä¸€ä¸ªæ–°ä¼šè¯ï¼Œä½ å¯ä»¥ç†è§£ä¸ºè¿™æ˜¯ä¸€ä¸ªè„±ç¦»äºbashçš„ç‹¬ç«‹shellé¡µé¢ï¼Œå³ä¾¿å½“å‰bashé€€å‡ºäº†ï¼Œcode-serverä¹Ÿä¸ä¼šé€€å‡º\ntmux new -s vscode_online\n\nå¼€å¯æ–°ä¼šè¯åï¼Œè¿›å…¥vscçš„binç›®å½•ï¼Œå¯åŠ¨code-serverï¼Œå‘½ä»¤æ˜¯ä¸å˜çš„\n./code-server\n\n\néšåç›´æ¥å…³æ‰å½“å‰bashï¼Œæ­¤æ—¶å°±å·²ç»å®ç°äº†code-serverçš„åå°è¿è¡Œ\n# æ¥å…¥ä¼šè¯tmux a -t vscode_online# ç»“æŸä¼šè¯tmux kill-session -t vscode_online\n\n\n\n3.ä¸€äº›é—®é¢˜3.1 nginxè½¬å‘é‡åˆ°1006é”™è¯¯æˆ‘åœ¨é‡‡ç”¨nginxè½¬å‘çš„æ—¶å€™ï¼Œé‡åˆ°äº†è¿™ä¸ªé—®é¢˜\n\nä¸ªäººçŒœæµ‹ï¼Œè¿™å¤§æ¦‚ç‡æ˜¯å› ä¸ºæˆ‘åœ¨config.yamlé‡Œé¢é…ç½®äº†code-serverçš„httpså¯¼è‡´çš„\ncert: false # å…³é—­https\n\nå°†certä¿®æ”¹å›falseï¼Œå†æ¬¡æµ‹è¯•ï¼Œå‘ç°è¿˜æ˜¯æœ‰è¿™ä¸ªé—®é¢˜ï¼\n\nå®é™…ä¸Šï¼Œå¦‚æœä½ è¿›è¡Œäº†nginxè½¬å‘ï¼Œå¹¶ä¸éœ€è¦é…ç½®code-serverçš„https\nä¿æŒé»˜è®¤çš„httpå³å¯\n\n\nåæ¥å‘ç°æ˜¯æˆ‘çš„nginxè½¬å‘è®¾ç½®æœ‰é—®é¢˜ï¼Œæ­£ç¡®çš„è½¬å‘é…ç½®å¦‚ä¸‹\nlocation / &#123;\tproxy_pass   http://127.0.0.1:8888;\tproxy_set_header Host $host;\tproxy_set_header Upgrade $http_upgrade;\tproxy_set_header Connection upgrade;\tproxy_set_header Accept-Encoding gzip;&#125;\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªnginxçš„httpsçš„å®Œæ•´é…ç½®æ–‡ä»¶ï¼\nserver &#123;    listen 443 ssl;    server_name  www.example.com;  # åŸŸå    # æ³¨æ„è¯ä¹¦æ–‡ä»¶ä½ç½®ï¼Œæ˜¯ä»/etc/nginx/ä¸‹å¼€å§‹ç®—èµ·çš„    ssl_certificate cert/example.com.crt;    ssl_certificate_key cert/example.com.key;    ssl_session_timeout 5m;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;    ssl_prefer_server_ciphers on;    client_max_body_size 1024m;    location / &#123;       \tproxy_set_header Host $host;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection upgrade;        proxy_set_header Accept-Encoding gzip;        # å½“ä¸‹æ˜¯ç›´æ¥ç”¨yumå®‰è£…çš„nginxï¼Œå¯ä»¥ç›´æ¥ç”¨æœ¬åœ°ipè®¿é—®        # å¦‚æœæ˜¯dockerå®‰è£…çš„nginxï¼Œéœ€è¦æ”¹ä¸ºå…¬ç½‘ip        proxy_pass http://127.0.0.1:8888;    &#125;&#125;# å¼ºåˆ¶é‡å®šå‘http -&gt; httpsserver &#123;    listen 80; # ç›‘å¬80ç«¯å£    server_name  www.example.com;  # åŸŸå    #æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttps    return 301 https://$host$request_uri;&#125;\n\n3.2 C&#x2F;C++æ’ä»¶ç”±äºcode-serveræ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹é¡¹ç›®ï¼Œæ‰€ä»¥ä¸€äº›å®˜æ–¹çš„æ’ä»¶ï¼ˆå¦‚pylanceï¼‰ç›´æ¥åœ¨code-serverçš„æ’ä»¶å•†åº—é‡Œé¢æœæ˜¯æ²¡æœ‰çš„\næˆ‘ä»¬éœ€è¦å»å¾®è½¯çš„vscodeå®˜ç½‘ä¸Šä¸‹è½½æ’ä»¶çš„VSIXæ–‡ä»¶ï¼Œä½¿ç”¨æœ¬åœ°æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œå®‰è£…\n\nhttps://marketplace.visualstudio.com/VSCode\n\n\nä¸è¿‡ï¼Œpylanceç”¨è¿™ä¸ªåŠæ³•ä¾æ—§æ— æ³•å®‰è£…ã€‚çœ‹æ¥æœ‰äº›æ’ä»¶åªæœ‰å®˜æ–¹çš„vscæ‰èƒ½å®‰è£…\n3.3 æœ¬åœ°æ–‡ä»¶å¦‚æœä½ ç”¨è¿‡vscodeçš„remote-sshæ’ä»¶è¿è¿‡ä½ è¿™ä¸ªæœåŠ¡å™¨ï¼Œç”¨æˆ·ç›®å½•ä¸‹é¢ä¼šæœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹\n.vsc.vscode-server\n\nè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯vscodeçš„æ’ä»¶remote-sshç”Ÿæˆçš„ï¼Œå’Œæœ¬æ–‡å®‰è£…çš„code-serveræ— å…³ï¼\n3.4 tmuxå¸¸ç”¨è¯­å¥tmux newã€€ã€€åˆ›å»ºé»˜è®¤åç§°çš„ä¼šè¯ï¼ˆåœ¨tmuxå‘½ä»¤æ¨¡å¼ä½¿ç”¨newå‘½ä»¤å¯å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œå…¶ä»–å‘½ä»¤åŒç†ï¼Œåæ–‡ä¸å†åˆ—å‡ºtmuxç»ˆç«¯å‘½ä»¤ï¼‰tmux new -s mysessionã€€ã€€åˆ›å»ºåä¸ºmysessionçš„ä¼šè¯tmux lsã€€ã€€æ˜¾ç¤ºä¼šè¯åˆ—è¡¨tmux aã€€ã€€è¿æ¥ä¸Šä¸€ä¸ªä¼šè¯tmux a -t mysessionã€€ã€€è¿æ¥æŒ‡å®šä¼šè¯mysessiontmux rename -t s1 s2ã€€ã€€é‡å‘½åä¼šè¯s1ä¸ºs2tmux kill-sessionã€€ã€€å…³é—­ä¸Šæ¬¡æ‰“å¼€çš„ä¼šè¯tmux kill-session -t s1ã€€å…³é—­ä¼šè¯s1tmux kill-session -a -t s1ã€€ã€€å…³é—­é™¤s1å¤–çš„æ‰€æœ‰ä¼šè¯tmux kill-serverã€€ã€€å…³é—­æ‰€æœ‰ä¼šè¯\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["Linux","vscode","CentOS","nginx"]},{"title":"ã€dockerã€‘é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„","url":"/posts/1996139841/","content":"dockerä¿®æ”¹å·²æœ‰å®¹å™¨çš„ç«¯å£æ˜ å°„\n\n\n\nå‚è€ƒ https://www.jb51.net/article/257510.htm\n\n1.éœ€æ±‚ä¹‹å‰æˆ‘åœ¨æˆ‘çš„ç»¿è”nasä¸Šéƒ¨ç½²äº†ä¸€ä¸ªcentoså®¹å™¨ï¼Œå½“æ—¶è„‘å­æŠ½äº†ï¼Œæ²¡æƒ³èµ·æ¥è¦å¤šæ˜ å°„å‡ ä¸ªç«¯å£ã€‚åªæ˜ å°„äº†å®¹å™¨çš„22ç«¯å£ï¼ˆsshï¼‰\nå¯¹äºåº”ç”¨å¼€å‘è€Œè¨€ï¼Œæ²¡æœ‰èƒ½å¤Ÿç›´æ¥è®¿é—®çš„ç«¯å£å¯å¤ªè›‹ç–¼äº†ã€‚åœ¨centosé‡Œé¢å¼€frpç©¿é€å‡ºæ¥è®¿é—®å§ï¼Œåˆå¤ªéº»çƒ¦ã€‚\nå¦‚æœåœ¨ç»¿è”çš„æ§åˆ¶å°é‡Œé¢ä¿®æ”¹ç«¯å£æ˜ å°„ï¼Œä¼šç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼ŒåŸæœ‰å®¹å™¨çš„ä¿¡æ¯ä¼šä¸¢å¤±ã€‚ç°åœ¨è¿™ä¸ªcentosç³»ç»Ÿå·²ç»ç”¨äº†ä¸€æ®µæ—¶é—´äº†ï¼Œå¼€å‘ç¯å¢ƒéƒ½é…ç½®å¥½äº†ã€‚åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨å°±æ˜¯å¾—é‡å¤´é…ç½®ï¼Œè™½ç„¶ä¸æ˜¯å•¥éš¾äº‹ï¼Œä½†æ˜¯å¤ªè€—æ—¶é—´äº†ï¼ï¼ï¼ğŸ˜¥\näºæ˜¯å°±æƒ³ç€ï¼Œèƒ½å¦é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œå®ç°ä¿®æ”¹å®¹å™¨çš„ç«¯å£æ˜ å°„ã€‚\n2.æ“ä½œ2.1 å¼€å¯sshå¹¶å…³é—­dockeræœåŠ¡ä¿®æ”¹ä¹‹å‰ï¼Œéœ€è¦å¼€å¯ç»¿è”nasçš„sshæœåŠ¡ã€‚ç»¿è”naså¦‚ä½•å¼€å¯sshå‚è€ƒ è§†é¢‘\nè¯´ç™½äº†å°±æ˜¯å¼€å¯è®¾å¤‡è®¾ç½®ä¸­çš„è¿œç¨‹è°ƒè¯•ï¼Œåœ¨è¿œç¨‹è°ƒè¯•ç å‰é¢åŠ ä¸Šå¦‚ä¸‹å­—ç¬¦ï¼Œå°±æ˜¯rootçš„å¯†ç ã€‚ç”¨nasçš„æœ¬åœ°ipè¿æ¥sshï¼Œç«¯å£ä¸º922ï¼ˆå¦‚æœè¿ä¸ä¸Šï¼Œä¿æŒè¿œç¨‹è°ƒè¯•å¼€å¯çŠ¶æ€ä¸‹ï¼Œé‡å¯naså³å¯ï¼‰\nL#W$%W1uGa\n\n\n2023å¹´11æœˆåçš„ç»¿è”nasï¼Œç›´æ¥å¼€å¯è¿œç¨‹è°ƒè¯•ï¼Œç»™å‡ºçš„è°ƒè¯•ç å°±æ˜¯sshçš„å¯†ç ã€‚\n\né“¾æ¥ä¸Šsshä¹‹åï¼Œå…ˆä½¿ç”¨docker psï¼ŒæŸ¥çœ‹éœ€è¦ä¿®æ”¹å®¹å™¨çš„container idã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„idå¹¶ä¸æ˜¯å®Œæ•´çš„å®¹å™¨idï¼Œå…ˆè®°å½•ä¸‹æ¥ã€‚\ncontainer id2b8f29d7b4b0\n\néšåè¿›å…¥ç»¿è”çš„å®¢æˆ·ç«¯ï¼Œå…³é—­dockeræœåŠ¡ï¼›å¦‚æœæ˜¯å…¶ä»–linuxç³»ç»Ÿï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤å…³é—­dockeræœåŠ¡\nsystemctl stop docker\n\nå‘½ä»¤è¡Œé‡Œé¢å†æ¬¡æ‰§è¡Œdocker psï¼Œç¡®è®¤dockeræœåŠ¡ç¡®å®å·²ç»å…³é—­\n$ docker psCannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?\n\nå¦‚æœæ˜¾ç¤ºå¦‚ä¸Šï¼Œåˆ™ä»£è¡¨dockerå¹¶æ²¡æœ‰åœ¨è¿è¡Œã€‚å³dockerè¢«æ­£å¸¸å…³é—­äº†ã€‚\n2.2 æ‰¾åˆ°dockerå®‰è£…è·¯å¾„æ¥ä¸‹æ¥è¦åšçš„ï¼Œå°±æ˜¯æŸ¥çœ‹dockerå®‰è£…çš„ä½ç½®ã€‚å¯¹äºç¾¤æ™–ã€å¨è”é€šã€ç»¿è”è¿™ç§nasè€Œè¨€ï¼Œå…¶ç³»ç»Ÿå†…å¯¹dockerå®‰è£…æŒ‚è½½çš„ä½ç½®æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚ç»¿è”çš„nasè‡ªå¸¦äº†16gbçš„é—ªå­˜ï¼ˆç³»ç»Ÿç›˜ï¼‰ï¼Œä½†dockerçš„å®‰è£…ä½ç½®å¹¶ä¸åœ¨è¿™16GBé‡Œé¢ï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬ç”¨æˆ·çš„ç¡¬ç›˜ä¸­ã€‚\nä¸€èˆ¬çš„Linuxç³»ç»Ÿï¼ˆä»¥æˆ‘çš„äº‘æœåŠ¡å™¨ä¸ºä¾‹ï¼‰ï¼Œdockerçš„å®‰è£…ä½ç½®åº”è¯¥æ˜¯å¦‚ä¸‹è·¯å¾„\n/var/lib/docker\n\nlsæŸ¥çœ‹å†…éƒ¨æ–‡ä»¶ï¼Œå¦‚ä¸‹\n# ls /var/lib/dockercontainers  image  network  overlay2  plugins  swarm  tmp  trust  volumes\n\nè€Œç»¿è”çš„ç³»ç»Ÿå¹¶æ²¡æœ‰è¿™ä¸ªè·¯å¾„\ncan&#x27;t open &#x27;/var/lib/docker&#x27;: No such file or directory\n\næŸ¥çœ‹/var/libï¼Œå¹¶æ²¡æœ‰å‘ç°dockeræ–‡ä»¶å¤¹\n# ls /var/lib/dbus   nginx  samba\n\næŸ¥çœ‹/varï¼Œå‘ç°äº†ä¸€ä¸ªdockerdï¼ŒçŒœæµ‹è¿™æ˜¯dockerç›¸å…³æ–‡ä»¶å­˜æ”¾çš„ä½ç½®\n# ls /varall_aria2.txt    dockerd          factory\n\né‡Œé¢åªæœ‰ä¸€ä¸ªjsonæ–‡ä»¶\n# ls /var/dockerddaemon.json\n\ncatå‘½ä»¤æŸ¥çœ‹ï¼Œæœä¸å…¶ç„¶ï¼Œæ˜¯dockerçš„å®‰è£…è·¯å¾„\n# cat /var/dockerd/daemon.json&#123;&quot;data-root&quot;:&quot;/mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6&quot;,&quot;log-level&quot;:&quot;warn&quot;,&quot;iptables&quot;:true,&quot;api-cors-header&quot;:&quot;*&quot;,&quot;host375&quot;],&quot;registry-mirrors&quot;:[&quot;https://registry.docker-cn.com&quot;]&#125;\n\nè¿™å°±æ˜¯dockerçš„å®‰è£…ä½ç½®äº†\n/mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6\n\nlsæŸ¥çœ‹ï¼Œæ–‡ä»¶ç»“æ„å’Œäº‘æœåŠ¡å™¨çš„dockerå®‰è£…ä½ç½®åŸºæœ¬ä¸€æ ·ï¼Œè¿™ä»£è¡¨æˆ‘ä»¬æ‰¾å¯¹äº†ï¼\n# ls /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6buildkit    containerd  containers  image       network     overlay2    plugins     runtimes    swarmtmp        trust       volumes\n\n2.3 æ‰¾åˆ°å¯¹åº”å®¹å™¨çš„é…ç½®æ–‡ä»¶è·¯å¾„dockerè·¯å¾„ä¸‹çš„containersæ–‡ä»¶å¤¹ï¼ŒåŒ…å«äº†ä¸åŒå®¹å™¨çš„é…ç½®æ–‡ä»¶å¤¹ã€‚lsæŸ¥çœ‹ï¼Œå‘ç°éƒ½æ˜¯ä¸€äº›çœ‹ä¸æ‡‚çš„å­—ç¬¦ä¸²ã€‚å®é™…ä¸Šï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²å°±æ˜¯å®¹å™¨çš„id\n# ls /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6/containers\n\n2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf  9113e1ec4740726feb9623a897f81b9066bc1b63811bfc0a65875d8a2c46c60347aa763o2da18686c6301047ef57f24fb611a2ebea2066f0dbk68205a40777e3\n\nå‰é¢æåˆ°ï¼Œdocker psæ˜¾ç¤ºçš„å®¹å™¨idå¹¶ä¸æ˜¯å®Œæ•´çš„ã€‚å› ä¸ºå®Œæ•´çš„å¾ˆé•¿å¾ˆé•¿ï¼Œä¸å¯èƒ½åœ¨pså‘½ä»¤é‡Œé¢å…¨æ˜¾ç¤ºå‡ºæ¥ã€‚\næˆ‘éœ€è¦ä¿®æ”¹çš„ç›®æ ‡å®¹å™¨ï¼Œç¼©çŸ­çš„idå¦‚ä¸‹ï¼Œå¯¹åº”çš„æ­£æ˜¯containersæ–‡ä»¶å¤¹é‡Œé¢çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚\n2b8f29d7b4b0\n\nç”¨lsçœ‹çœ‹è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢æœ‰å•¥ä¸œè¥¿\næ³¨æ„ï¼šæ­¤æ—¶å‘½ä»¤å·²ç»å¾ˆé•¿å¾ˆé•¿ã€‚é¿å…å‡ºé”™ï¼Œå»ºè®®å¼€ä¸ªè®°äº‹æœ¬ï¼Œåœ¨é‡Œé¢æŠŠå‘½ä»¤å†™å¥½ï¼Œå†å¤åˆ¶åˆ°ç»ˆç«¯ä¸­æ‰§è¡Œï¼\nls -l /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6/containers/2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf\n\nå¾—åˆ°çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯config.v2.jsonå’Œhostconfig.json\n-rw-r-----    1 root     root         87802 Mar 11 18:12 2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf-json.logdrwx------    2 root     root          4096 Feb 23 18:42 checkpoints-rw-------    1 root     root          3300 Mar 11 18:12 config.v2.json-rw-r--r--    1 root     root          1925 Mar 11 18:12 hostconfig.json-rw-r--r--    1 root     root            13 Mar 11 18:12 hostname-rw-r--r--    1 root     root           174 Mar 11 18:12 hostsdrwx--x---    2 root     root          4096 Feb 23 18:43 mounts-rw-r--r--    1 root     root            83 Mar 11 18:12 resolv.conf-rw-r--r--    1 root     root            71 Mar 11 18:12 resolv.conf.hash\n\n2.4 å¤‡ä»½åœ¨linuxçš„å‘½ä»¤è¡Œä¸­æ“ä½œï¼Œå¤‡ä»½æ˜¯å¿…ä¸å¯å°‘çš„ï¼ä½¿ç”¨cpå‘½ä»¤ï¼ŒæŠŠé…ç½®æ–‡ä»¶å¤åˆ¶ä¸€ä»½ï¼Œå¹¶åœ¨åå­—ä¸­æ·»åŠ ä¸Š.bakäºˆä»¥åŒºåˆ«\ncp æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶\n\nä»¥ä¸‹æ˜¯cpå‘½ä»¤å¤‡ä»½config.v2.jsonæ–‡ä»¶çš„å‘½ä»¤ç¤ºä¾‹ï¼Œå‘½ä»¤å¾ˆé•¿ï¼\ncp /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6/containers/2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf/config.v2.json /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6/containers/2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf/config.v2.bak.json\n\nå¤‡ä»½äº†æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„ä¸¤ä¸ªæ–‡ä»¶åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶äº†\n2.5 ä¿®æ”¹é…ç½®æ–‡ä»¶2.5.1  hostconfig.jsonä½¿ç”¨vimæ¥è¿›è¡Œç¼–è¾‘ï¼ˆç¼–è¾‘ä¹‹å‰ï¼Œå¯ä»¥ç”¨catå…ˆå¤åˆ¶å‡ºå†…å®¹ï¼Œæ”¾åˆ°vscç­‰ç¼–è¾‘å™¨ä¸­æ ¼å¼åŒ–ï¼Œæ–¹ä¾¿æ‰¾åˆ°å¯¹åº”çš„ä½ç½®ï¼Œæˆ–è€…ç›´æ¥åœ¨vscodeä¸­ä¿®æ”¹ï¼Œç„¶åè¦†ç›–å›å»ï¼Œéƒ½OKï¼‰\nvim /mnt/media_rw/2550c297-7334-455f-9fce-e0a00aad40c8/.ugreen_nas/6/containers/2b8f29d7b4b0ad624fb02048cb91c569e6e52409fe246e1c741bdd13ed7242cf/hostconfig.json\n\nå¦‚ä¸‹ä¾¿æ˜¯è¦ä¿®æ”¹çš„å­—æ®µï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢åªæœ‰å¯¹22ç«¯å£çš„æ˜ å°„\n&quot;PortBindings&quot;: &#123;        &quot;22/tcp&quot;: [            &#123;                &quot;HostIp&quot;: &quot;0.0.0.0&quot;,                &quot;HostPort&quot;: &quot;22222&quot;            &#125;,            &#123;                &quot;HostIp&quot;: &quot;::&quot;,                &quot;HostPort&quot;: &quot;22222&quot;            &#125;        ]    &#125;\n\næˆ‘ä»¬ç…§çŒ«ç”»è™ï¼Œç›´æ¥æ·»åŠ ä¸Šå¦å¤–ä¸¤ä¸ªç«¯å£çš„æ˜ å°„ã€‚\nåœ¨è‹±æ–‡è¾“å…¥æ³•ä¸‹ï¼ŒæŒ‰iè¿›å…¥vimçš„ç¼–è¾‘æ¨¡å¼ï¼Œé€šè¿‡é”®ç›˜ç§»åŠ¨å…‰æ ‡åˆ°æŒ‡å®šä½ç½®ï¼Œä¿®æ”¹æ–‡ä»¶\n&quot;PortBindings&quot;: &#123;        &quot;22/tcp&quot;: [            &#123;                &quot;HostIp&quot;: &quot;0.0.0.0&quot;,                &quot;HostPort&quot;: &quot;22222&quot;            &#125;,            &#123;                &quot;HostIp&quot;: &quot;::&quot;,                &quot;HostPort&quot;: &quot;22222&quot;            &#125;        ],        &quot;50000/tcp&quot;: [            &#123;                &quot;HostIp&quot;: &quot;0.0.0.0&quot;,                &quot;HostPort&quot;: &quot;50000&quot;            &#125;,            &#123;                &quot;HostIp&quot;: &quot;::&quot;,                &quot;HostPort&quot;: &quot;50000&quot;            &#125;        ],        &quot;50001/tcp&quot;: [            &#123;                &quot;HostIp&quot;: &quot;0.0.0.0&quot;,                &quot;HostPort&quot;: &quot;50001&quot;            &#125;,            &#123;                &quot;HostIp&quot;: &quot;::&quot;,                &quot;HostPort&quot;: &quot;50001&quot;            &#125;        ]    &#125;\n\nç¼–è¾‘å¥½äº†ä¹‹åï¼ŒæŒ‰escé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œ:wqä¿å­˜å¹¶é€€å‡º\n2.5.2 config.v2.jsonè¿™ä¸ªæ–‡ä»¶éœ€è¦ä¿®æ”¹çš„æ˜¯å¦‚ä¸‹å­—æ®µ\n&quot;ExposedPorts&quot;: &#123;    &quot;22/tcp&quot;: &#123;&#125;&#125;\n\næ·»åŠ ä¸Šåˆšåˆšåœ¨hostconfig.jsoné‡Œé¢æ–°å¢çš„ç«¯å£\n&quot;ExposedPorts&quot;: &#123;    &quot;22/tcp&quot;: &#123;&#125;,    &quot;50000/tcp&quot;:&#123;&#125;,    &quot;50001/tcp&quot;:&#123;&#125;&#125;\n\nåŒæ ·:wqä¿å­˜å¹¶é€€å‡º\n2.6 ç°åœ¨å°±å·²ç»ä¿®æ”¹å¥½å•¦ï¼ç›¸åŒçš„æ–‡ä»¶è·¯å¾„ä¸­è¿˜æœ‰ä¸€ä¸ªhostnameæ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹å®¹å™¨çš„hostnameï¼Œå°±æ˜¯sshç™»å½•dockerå®‰è£…çš„centosåï¼Œæ˜¾ç¤ºåœ¨ç”¨æˆ·å@å³è¾¹çš„é‚£ä¸ª\nç”¨æˆ·å@hostname\n\nç”¨dockerå®‰è£…çš„centosé•œåƒï¼Œæ˜¯ä¸èƒ½åœ¨centosç³»ç»Ÿä¸­ä¿®æ”¹å®¹å™¨hostnameçš„\n\nåœ¨dockerå®‰è£…çš„centosç³»ç»Ÿå†…ä¿®æ”¹å¯ä»¥ï¼Œä½†æ˜¯ä¸ä¼šçœŸæ­£ç”Ÿæ•ˆï¼›ä¸è¿‡è¿™ä¸ªä¸œè¥¿å¯¹ä½¿ç”¨ç³»ç»Ÿæ¯«æ— å½±å“ï¼Œæ‰€ä»¥ä¸ä¿®æ”¹ä¹Ÿæ²¡å…³ç³»\n\n3.é‡å¯dockerï¼ŒæŸ¥çœ‹æ˜¯å¦ä¿®æ”¹æˆåŠŸåœ¨ç»¿è”å®¢æˆ·ç«¯é‡Œé¢é‡å¯dockeræœåŠ¡ä¹‹åï¼Œä½¿ç”¨docker pså‘½ä»¤æŸ¥çœ‹ç«¯å£æ˜ å°„æ˜¯å¦ä¿®æ”¹æˆåŠŸï¼›å…¶ä»–linuxç³»ç»Ÿç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨dockerã€‚\nsystemctl start docker\n\nå¦‚æœå¤šå‡ºäº†åˆšåˆšæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶é‡Œé¢ä¿®æ”¹çš„50000å’Œ50001ç«¯å£ï¼Œå°±ä»£è¡¨ç«¯å£æ˜ å°„ä¿®æ”¹æˆåŠŸäº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Linux","CentOS","Docker","nas"]},{"title":"ã€Dockerã€‘é™åˆ¶å·²è¿è¡Œå®¹å™¨çš„Cpuå’Œå†…å­˜","url":"/posts/2589797340/","content":"dockeré™åˆ¶å·²è¿è¡Œå®¹å™¨çš„Cpuå’Œå†…å­˜\n\n\n1.é—®é¢˜æè¿°æœ€è¿‘äº‘æœåŠ¡å™¨çš„å†…å­˜ç»å¸¸ä¸å¤Ÿç”¨ï¼Œè€Œä¸”æ˜¯è«åå…¶å¦™çš„å¢å¤šï¼Œåœ¨è…¾è®¯äº‘çš„æ§åˆ¶å°é‡Œé¢çœ‹ï¼Œ4gb çš„å†…å­˜å ç”¨äº†3.2 gbï¼Œå°±å¡åˆ°è¿ ssh éƒ½è¿ä¸ä¸Šäº†\n\nPS: å·²æ¢è¿‡ç½‘ç»œå’Œè®¾å¤‡ï¼Œç¡®è®¤ä¸æ˜¯ç”¨æˆ·ç«¯ç½‘ç»œé—®é¢˜å¯¼è‡´æ— æ³•ssh\n\n\nå®åœ¨æ²¡è¾™äº†ï¼Œåªèƒ½æŠŠæˆ‘çš„å‡ ä¸ªä¸çƒ­é—¨çš„kook-botç§»æ¤åˆ°replitç™½å«–ï¼Œå†é™åˆ¶ä¸€ä¸‹lskyå›¾åºŠdockeré•œåƒçš„å†…å­˜ç”¨é‡\n\nå…¶å®ä¸»è¦æ˜¯nsfw-apiçš„å†…å­˜ç”¨é‡ï¼Œæˆ‘å‘ç°æœ‰äººæ•…æ„ç»™æˆ‘çš„å›¾åºŠä¸Šä¼ hå›¾ã€‚lskyåå°ç”±äºé‰´é»„ä¸é€šè¿‡ï¼Œä¸å…è®¸ä¸Šä¼ ï¼Œä¹Ÿçœ‹ä¸åˆ°æ˜¯è°å¹²çš„ã€‚éš”è¿™å‹åŠ›æµ‹è¯•å‘¢ï¼Ÿ\næˆ‘çš„å›¾åºŠåŸºæœ¬åªå¯¹è‡ªå·±çš„åšå®¢ä½¿ç”¨ã€‚å¼€æ”¾æ¸¸å®¢ä¸Šä¼ ï¼Œä¹Ÿåªæ˜¯æ–¹ä¾¿å¤§å®¶ä¸´æ—¶ä¸Šä¼ ä¸€äº›å›¾ç‰‡ï¼Œè¿˜è¯·å¤§å®¶æ‰‹ä¸‹ç•™æƒ…ï¼ï¼ï¼ğŸ˜¥\n\nè¿™ä¸ªæ“ä½œæˆ‘åšäº†å‡ æ¬¡ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªé«˜é¢‘æ“ä½œäº†ã€‚åœ¨æ­¤è®°å½•ä¸€ä¸‹å¦‚ä½•æ›´æ”¹ä¸€ä¸ªæ­£åœ¨è¿è¡Œä¸­å®¹å™¨çš„å†…å­˜é™åˆ¶\n2.ä¿®æ”¹å†…å­˜é™åˆ¶å…ˆä½¿ç”¨pså‘½ä»¤æŸ¥çœ‹å½“å‰å®¹å™¨å’Œå¯¹åº”çš„id\ndocker ps\n\nå¯ä»¥çœ‹åˆ°ï¼Œlskyå›¾åºŠå’Œnsfwçš„é•œåƒåˆ†åˆ«æ˜¯ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ª\n\nå†ç”¨statså‘½ä»¤æŸ¥çœ‹å½“å‰çš„çŠ¶æ€\ndocker stats\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå›¾åºŠçš„å†…å­˜æ²¡æœ‰è¿›è¡Œé™åˆ¶ï¼Œnsfw çš„å†…å­˜å·²ç»è¢«é™åˆ¶åˆ°äº†618mbï¼Œå½“å‰å·²ç”¨565mbï¼ŒåŸºæœ¬è¦æ»¡äº†.\né‡å¯ä¸€ä¸‹å®¹å™¨ï¼Œå‘ç°åˆå§‹åŒ–çš„æ—¶å€™åªéœ€è¦100mbå·¦å³çš„å†…å­˜ï¼Œåˆè®¡ç€ç°åœ¨å°±æœ‰äººåœ¨å¾€å›¾åºŠé‡Œé¢ä¸Šä¼ å›¾ç‰‡ï¼ŸğŸ¤£ğŸ¤£ğŸ¤£\n\nè¿™æ€ä¹ˆè¡Œï¼Œç›´æ¥ç»™å®ƒå†…å­˜é™åˆ¶å¹²åˆ°512mbï¼Œèƒ½çœä¸€ç‚¹å†…å­˜æ˜¯ä¸€ç‚¹ï¼Œä¸èƒ½å› ä¸ºå›¾åºŠå¯¼è‡´æˆ‘æœåŠ¡å™¨å¡æ­»ã€‚\nä¿®æ”¹é™åˆ¶ï¼Œè¦ä½¿ç”¨çš„æ˜¯container updateå‘½ä»¤\n\nå‚è€ƒæ–‡æ¡£\n\n\n\nåç§°,ç®€å†™\né»˜è®¤å€¼\næè¿°\n\n\n\nâ€“blkio-weight\n0\né˜»å¡IO(ç›¸å¯¹æƒé‡)ï¼Œä»‹äº10å’Œ1000ä¹‹é—´ï¼Œæˆ–0ç¦ç”¨(é»˜è®¤ä¸º0)\n\n\nâ€“cpu-period\n0\né™åˆ¶CPU CFS(å®Œå…¨å…¬å¹³çš„è°ƒåº¦ç¨‹åº)å‘¨æœŸ\n\n\nâ€“cpu-quota\n0\né™åˆ¶CPU CFS(å®Œå…¨å…¬å¹³çš„è°ƒåº¦ç¨‹åº)é…é¢\n\n\nâ€“cpu-rt-period\n0\né™åˆ¶CPUå®æ—¶å‘¨æœŸ(ä»¥å¾®ç§’ä¸ºå•ä½)\n\n\nâ€“cpu-rt-runtime\n0\nä»¥å¾®ç§’ä¸ºå•ä½é™åˆ¶CPUå®æ—¶è¿è¡Œæ—¶é—´\n\n\nâ€“cpu-shares, -c\n0\nCPUä»½é¢(ç›¸å¯¹æƒé‡)\n\n\nâ€“cpuset-cpus\n\nå…è®¸æ‰§è¡Œçš„CPU(0-3,0)\n\n\nâ€“cpuset-mems\n\nå…è®¸æ‰§è¡Œçš„å†…å­˜ç‡(0-3,0.1)\n\n\nâ€“kernel-memory\n\nå†…æ ¸å†…å­˜é™åˆ¶\n\n\nâ€“memory, -m\n\nå†…å­˜é™åˆ¶\n\n\nâ€“memory-reservation\n\nå†…å­˜è½¯é™åˆ¶\n\n\nâ€“memory-swap\n\näº¤æ¢é™åˆ¶ç­‰äºå†…å­˜åŠ äº¤æ¢ï¼š-1ä»¥å¯ç”¨æ— é™åˆ¶çš„äº¤æ¢\n\n\nâ€“restart\n\né‡æ–°å¯åŠ¨åœ¨å®¹å™¨é€€å‡ºæ—¶åº”ç”¨çš„ç­–ç•¥\n\n\næ¨¡æ¿å¦‚ä¸‹\n\n\n\n\n\ndocker container update å®¹å™¨å --memory=&quot;2g&quot;  --memory-swap=&quot;-1&quot;\n\nä¸Šé¢çš„å‘½ä»¤ä¼šé™åˆ¶å®¹å™¨çš„å†…å­˜ä¸º2gbï¼Œäº¤æ¢å†…å­˜è®¾ç½®ä¸º-1ï¼ˆä»¥å¯ç”¨æ— é™åˆ¶çš„äº¤æ¢ï¼‰\næ¯”å¦‚æˆ‘ç°åœ¨æƒ³ä¿®æ”¹nsfwå®¹å™¨çš„å†…å­˜é™åˆ¶ï¼Œåº”è¯¥å¦‚ä¸‹æ“ä½œ\ndocker container update nsfw-api --memory=&quot;0.5g&quot; \n\nç„¶åå‘ç°æŠ¥é”™äº†\nError response from daemon: Cannot update container 418fc2a79fa7ad2e637babe17424ee60e9027ef4a7fada3f279864e76bdaaa10: Memory limit should be smaller than already set memoryswap limit, update the memoryswap at the same time\n\nå¤§æ¦‚æ„æ€æ˜¯è®©æˆ‘ä»¬åŒæ—¶æ›´æ–°äº¤æ¢å†…å­˜\ndocker container update nsfw-api --memory=&quot;0.5g&quot;  --memory-swap=&quot;-1&quot;\n\nç°åœ¨å°± ok äº†ï¼Œæ‰§è¡ŒæˆåŠŸä¼šåœ¨å‘½ä»¤çš„ä¸‹ä¸€è¡Œæ˜¾ç¤ºé•œåƒçš„åå­—\nnsfw-api\n\nåœ¨statsçœ‹ä¸€ä¸‹ï¼Œå‘ç°å·²ç»ä¿®æ”¹æˆåŠŸäº†\ndocker stats\n\n\nä¿®æ”¹å…¶ä»–å®¹å™¨çš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œç›®çš„å·²ç»è¾¾åˆ°å•¦ï¼\n3.ä¿®æ”¹cpué™åˆ¶ä¸‹é¢çš„å‘½ä»¤æ„æ€æ˜¯é™åˆ¶å®¹å™¨åªèƒ½ä½¿ç”¨ä¸»æœºä¸Šä¸¤ä¸ªcpu\ndocker container update  å®¹å™¨å --cpus=2\n\næ‰€è°“ä¸¤ä¸ª CPUï¼Œå…¶å®å°±æ˜¯ä¸»æœºä¸Š CPU çš„ä¸¤ä¸ªçº¿ç¨‹ã€‚æ¯”å¦‚å¦‚æœä½ çš„äº‘æœåŠ¡å™¨æ˜¯ 2 æ ¸å¿ƒ 4 çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªé™åˆ¶å°±ä»£è¡¨è¯¥å®¹å™¨åªèƒ½ä½¿ç”¨ 2 ä¸ªçº¿ç¨‹ã€‚\n\nhttps://www.cnblogs.com/sparkdev/p/8052522.html\nhttps://zhuanlan.zhihu.com/p/388012843\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Docker"]},{"title":"ã€dockerã€‘ç¾¤æ™–naséƒ¨ç½²å¼€æºè®ºå›Flarum | è½¬è½½","url":"/posts/2506750545/","content":"ç¾¤æ™–naséƒ¨ç½²å¼€æºè®ºå›Flarumï¼Œæœ¬æ–‡ä¸ºè½¬è½½\n\n\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œæ¨æµ¦è€è‹ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/wbsu2004/article/details/127083835åŸæ–‡å‘å¸ƒæ—¶é—´ï¼š2022-09-28 10:07:30\n\n\nè¿™å›æ˜¯å±…å§”ä¼šé€šçŸ¥çš„\n\n\n\næœ¬æ–‡å®Œæˆäº 5 æœˆåº•\n\nä»€ä¹ˆæ˜¯ Flarum ï¼Ÿ\n\nFlarum æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç½‘ç«™è®¨è®ºå¹³å°ã€‚å®ƒå¿«é€Ÿä¸”æ˜“äºä½¿ç”¨ï¼Œå…·æœ‰è¿è¡ŒæˆåŠŸç¤¾åŒºæ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ã€‚å®ƒè¿˜å…·æœ‰æå¼ºçš„å¯æ‰©å±•æ€§ï¼Œå¯å®ç°ç»ˆæå®šåˆ¶ã€‚\n\nè®ºå›è™½ç„¶é€æ¸è¢«æ·˜æ±°äº†ï¼Œä½†è€è‹è§‰å¾—æ­ä¸€ä¸ªç”¨æ¥åšçŸ¥è¯†ç®¡ç†ï¼Œæˆ–è€…ç”¨æ¥å’Œå®¶äººåˆ†äº«ç…§ç‰‡ã€è§†é¢‘çš„å¿«ä¹æ—¶å…‰ï¼Œè¿˜æ˜¯æŒºä¸é”™çš„ã€‚\nå±€åŸŸç½‘ç”¨ç”¨å°±å¥½äº†ï¼Œä¸è¦æ˜ å°„åˆ°äº’è”ç½‘\nå®‰è£…å»ºæ•°æ®åº“ç½‘ä¸Šèƒ½æ‰¾åˆ°çš„éƒ½æ˜¯docker-compose çš„å®‰è£…æ–¹å¼ï¼Œé™¤äº† Flarum å¤–è¿˜éœ€è¦å®‰è£… MariaDBã€‚è€è‹ç”¨äº†ç¾¤æ™–è‡ªå¸¦çš„ MariaDB 10 æ•°æ®åº“ã€‚\n\nåœ¨ phpMyAdmin ä¸­åˆ›å»ºåä¸º flarum çš„ç©ºæ•°æ®åº“ã€‚\n\nå®‰è£…é•œåƒåœ¨ç¾¤æ™–ä¸Šä»¥ Docker æ–¹å¼å®‰è£…ã€‚\nåœ¨æ³¨å†Œè¡¨ä¸­æœç´¢ flarum ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ª mondedie/flarumï¼Œç‰ˆæœ¬é€‰ latest\n\nå­˜å‚¨å·åœ¨ docker æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ flarumï¼Œå¹¶åœ¨å…¶ä¸­å»º 4 ä¸ªå­æ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«æ˜¯ assetsã€extensionsã€logsã€nginx\n\n\n\nç«¯å£æœ¬åœ°ç«¯å£ä¸å†²çªå°±è¡Œï¼Œä¸ç¡®å®šçš„è¯å¯ä»¥ç”¨å‘½ä»¤æŸ¥ä¸€ä¸‹\n# æŸ¥çœ‹ç«¯å£å ç”¨\nnetstat -tunlp | grep ç«¯å£å·\n\næœ¬åœ°ç«¯å£8888ï¼Œå®¹å™¨ç«¯å£8888\né»˜è®¤å¹¶æ²¡æœ‰æ˜ å°„ç«¯å£\n\néœ€è¦ç‚¹ + å·æ·»åŠ \n\nç¯å¢ƒå…¶ä¸­éƒ¨åˆ†å±äºéœ€è¦ä¿®æ”¹çš„ï¼Œéƒ¨åˆ†å±äºéœ€è¦æ–°å¢çš„\n\n\næ›´å¤šçš„ç¯å¢ƒå˜é‡è¯·ç§»æ­¥ï¼šhttps://github.com/mondediefr/docker-flarum\n\n\nå¸¸è§„åç§°å‘½åä¸º flarumï¼Œè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿åé¢è¿›å…¥å®¹å™¨å†…åšè®¾ç½®ï¼Œä¸æ”¹ä¹Ÿå¯ä»¥ï¼Œæ”¹äº†å¯ä»¥å°‘è¾“å…¥å‡ ä¸ªå­—æ¯\n\n\næ…•é›ªçš„æç¤ºï¼šåœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°è¯¥é•œåƒè‹¥ä¿®æ”¹ç¯å¢ƒå˜é‡ä¸­çš„FORUM_URLï¼Œå¯èƒ½ä¼šå¯¼è‡´dockeræ— æ³•æ­£å¸¸å¯åŠ¨ï¼è¯·åœ¨é…ç½®å‰ç¡®è®¤æ‚¨çš„è¿œç«¯åœ°å€ï¼Œé…ç½®å¥½åæœ€å¥½ä¸è¦ä¿®æ”¹ï¼\n\nå‘½ä»¤è¡Œå®‰è£…å¦‚æœä½ ç†Ÿæ‚‰å‘½ä»¤è¡Œï¼Œå¯èƒ½ç”¨ docker cli æ›´å¿«æ·\n# æ–°å»ºæ–‡ä»¶å¤¹ flarum å’Œ å­ç›®å½•mkdir -p /volume2/docker/flarum/&#123;assets,extensions,logs,nginx&#125;# è¿›å…¥ flarum ç›®å½•cd /volume2/docker/flarum# è¿è¡Œå®¹å™¨docker run -d \\   --restart unless-stopped \\   --name flarum \\   -p 8888:8888 \\   -v $(pwd)/assets:/flarum/app/public/assets \\   -v $(pwd)/extensions:/flarum/app/extensions \\   -v $(pwd)/logs:/flarum/app/storage/logs \\   -v $(pwd)/nginx:/etc/nginx/flarum \\   -e DEBUG=false \\   -e FORUM_URL=http://192.168.0.197:8888 \\   -e DB_HOST=192.168.0.197 \\   -e DB_PORT=3307 \\   -e DB_NAME=flarum \\   -e DB_USER=flarum \\   -e DB_PASS=123456 \\   -e DB_PREF=flarum_ \\   -e FLARUM_ADMIN_USER=laosu \\   -e FLARUM_ADMIN_PASS=123456 \\   -e FLARUM_ADMIN_MAIL=wbsu2003@gmail.com \\   mondedie/flarum\n\n\næ…•é›ªçš„è¡¥å……:å¦‚æœä½ ä½¿ç”¨çš„ä¸æ˜¯ç¾¤æ™–è¿™ç§è‡ªå¸¦æ•°æ®åº“çš„nasï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨dockerç®€å•éƒ¨ç½²ä¸€ä¸ªmysqlä½œä¸ºflarumçš„æ•°æ®åº“ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼›\n\ndocker run -d -p 3306:3306 \\--name mysql --privileged=true \\-v /data/mysql/data:/var/lib/mysql \\-e MYSQL_ROOT_PASSWORD=123456 \\mysql:5.7\n\nåˆ›å»ºå®Œæ¯•åï¼Œè¿›å…¥å®¹å™¨è¿›è¡Œmysqlçš„ç”¨æˆ·åˆ›å»º\ndocker exec -it mysql /bin/sh\n\nç”¨æˆ·åˆ›å»ºç›¸å…³è¯­å¥å¯æŸ¥çœ‹æ…•é›ªçš„å¦å¤–ä¸€ç¯‡åšå®¢-&gt;ã€ç‚¹æˆ‘ã€‘\n\nä¹Ÿå¯ä»¥ç”¨ docker-compose å®‰è£…ï¼Œå°†ä¸‹é¢çš„å†…å®¹ä¿å­˜ä¸º docker-compose.yml æ–‡ä»¶\nversion: &quot;3&quot;services:  servas:    image: mondedie/flarum    container_name: flarum    restart: unless-stopped    ports:      - &quot;8888:8888&quot;    volumes:      - /volume2/docker/flarum/assets:/flarum/app/public/assets      - /volume2/docker/flarum/extensions:/flarum/app/extensions      - /volume2/docker/flarum/logs:/flarum/app/storage/logs      - /volume2/docker/flarum/nginx:/etc/nginx/flarum    environment:      - DEBUG=false      - FORUM_URL=http://192.168.0.197:8888      - DB_HOST=192.168.0.197      - DB_PORT=3307      - DB_NAME=flarum      - DB_USER=flarum      - DB_PASS=123456      - DB_PREF=flarum_      - FLARUM_ADMIN_USER=laosu      - FLARUM_ADMIN_PASS=123456      - FLARUM_ADMIN_MAIL=wbsu2003@gmail.com\n\n\nç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œåœ¨ portainer ä¸­æ‰§è¡Œä¹Ÿæ˜¯å¯ä»¥çš„\n# æ–°å»ºæ–‡ä»¶å¤¹ flarum å’Œ å­ç›®å½•mkdir -p /volume2/docker/flarum/&#123;assets,extensions,logs,nginx&#125;# è¿›å…¥ flarum ç›®å½•cd /volume2/docker/flarum# å°† docker-compose.yml æ”¾å…¥å½“å‰ç›®å½•# ä¸€é”®å¯åŠ¨docker-compose up -d\n\n\nè¿è¡Œç¬¬ä¸€æ¬¡éœ€è¦åˆå§‹åŒ–ï¼Œå½“åœ¨æ—¥å¿—ä¸­çœ‹åˆ° Forum is starting. å°±å¯ä»¥è®¿é—®äº†\n\nåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://ç¾¤æ™–IP:8888 å°±èƒ½çœ‹åˆ°ä¸»ç•Œé¢\n\nè®¾ç½®ç•Œé¢\n\nç®¡ç†å‘˜åå°\n\nä¸­æ–‡é»˜è®¤ Flarum åªæ”¯æŒè‹±æ–‡ï¼Œä½†æ˜¯æœ‰ä¸­æ–‡æ‰©å±•ï¼šhttps://discuss.flarum.org.cn/d/1211\nç»ˆç«¯æœºå¯ä»¥è¿›å…¥ç»ˆç«¯æœºä¸­å®‰è£…\næˆ–è€…å‘½ä»¤è¡Œå¡«å†™\ndocker exec -it flarum /bin/sh\n\n\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n# è¿›ç›®å½•cd /flarum/app# å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…composer require flarum-lang/chinese-simplified# æ¸…é™¤ç¼“å­˜php flarum cache:clear\n\n\n\nå‘½ä»¤è¡Œåœ¨ SSH å®¢æˆ·ç«¯çš„å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n# è¿›å…¥å®¹å™¨docker exec --user root -it flarum /bin/sh# è¿›ç›®å½•cd /flarum/app# å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…composer require flarum-lang/chinese-simplified# æ¸…é™¤ç¼“å­˜php flarum cache:clear\n\n\n\nå®‰è£…å®Œæˆåï¼Œåœ¨ç®¡ç†å‘˜åå°èƒ½çœ‹åˆ° Languages ä¸­å¤šäº† ç®€ä½“ä¸­æ–‡;\nè¿›å…¥ ç®€ä½“ä¸­æ–‡ï¼Œé»˜è®¤æ˜¯ Disable\n\næ”¹ä¸º Enabled\n\nåœ¨ Basic ä¸­ï¼Œè®¾ç½®ä¸ºç¼ºçœçš„è¯­è¨€\n\nä¿å­˜ååˆ·æ–°é¡µé¢\n\nä¸»ç•Œé¢åˆ·æ–°ä¸€ä¸‹\n\nå‘ä¸ªå¸–å­è¯•è¯•\n\næµè§ˆæ•ˆæœ\n\nå‚è€ƒæ–‡æ¡£\nflarum&#x2F;flarum: Simple forum software for building great communities.åœ°å€ï¼šhttps://github.com/flarum/flarum\n\n\nmondediefr&#x2F;docker-flarum: Docker image of Flarumåœ°å€ï¼šhttps://github.com/mondediefr/docker-flarum\n\n\nç®€ä½“ä¸­æ–‡è¯­è¨€åŒ… - Flarum ä¸­æ–‡ç¤¾åŒºåœ°å€ï¼šhttps://discuss.flarum.org.cn/d/1211\n\n\nFlarum ä¸­æ–‡ç¤¾åŒºåœ°å€ï¼šhttps://discuss.flarum.org.cn/\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["mysql","docker"]},{"title":"ã€Nasã€‘ç»¿è”å®‰è£…CentOS8å®¹å™¨","url":"/posts/336198679/","content":"ç»¿è”å®‰è£…CentOS8å®¹å™¨\n\n\n1.åˆ›å»ºå®¹å™¨å…ˆåœ¨å®¢æˆ·ç«¯å®‰è£…å®¹å™¨ï¼Œéšåç”¨xshellè¿›å…¥ç»¿è”çš„ssh\n\nç»¿è”å¦‚ä½•å¼€å¯sshå‚è€ƒè§†é¢‘ï¼›2023å¹´11æœˆåï¼Œæ–°ç‰ˆæœ¬çš„ç»¿è”ç›´æ¥æŠŠè¿œç¨‹è°ƒè¯•æ‰“å¼€ï¼Œç»™å‡ºçš„è°ƒè¯•å¯†é’¥å°±æ˜¯sshçš„å¯†ç ã€‚ç»¿è”çš„sshç«¯å£æ˜¯922\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä»¥ç‰¹æƒæ¨¡å¼åˆ›å»ºä¸€ä¸ªcentoså®¹å™¨ï¼Œå¹¶å°†å®¹å™¨å†…çš„22ç«¯å£æ˜ å°„ç»™ä¸»æœºçš„22222ç«¯å£ï¼›å¦‚æœä½ æ˜¯å¸Œæœ›åœ¨centoså®¹å™¨ä¸Šè¿›è¡Œç½‘ç»œç¼–ç¨‹å¼€å‘ï¼Œè¯·å¤šæ˜ å°„å‡ ä¸ªç«¯å£ï¼Œä»¥å…åˆ°æ—¶å€™æ²¡åŠæ³•è®¿é—®é¡¹ç›®çš„å°´å°¬æƒ…å†µï¼\ndocker run -d \\\t-p 22222:22 \\\t--name centos \\\t--privileged=true \\\tcentos:latest \\\t/usr/sbin/init\n\næå®šäº†ä¹‹åï¼Œè¿›ç»¿è”å®¢æˆ·ç«¯ï¼Œåœæ­¢å®¹å™¨è¿è¡Œï¼Œè®¾ç½®ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ç»™å®¹å™¨å†…éƒ¨ï¼Œæ–¹ä¾¿dockerå®¹å™¨å’Œnasèµ„æ–™äº’ä¼ ï¼ˆä¸è®¾ç½®ä¹Ÿä¸æ˜¯ä¸è¡Œï¼‰\n\næ³¨æ„ï¼Œåœ¨å®¢æˆ·ç«¯é…ç½®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠæ‰€æœ‰èƒ½ç»™çš„é€‰é¡¹ï¼ˆ-i -t é«˜çº§é€‰é¡¹ï¼‰å…¨éƒ½å‹¾ä¸Šï¼Œé¿å…dockerå®‰è£…çš„centosç¼ºå°‘æƒé™ï¼›\n\nå›åˆ°ç»¿è”çš„sshç»ˆç«¯ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨\ndocker exec -it centos /bin/bash\n\nä½ ä¹Ÿå¯ä»¥ç”¨å®¢æˆ·ç«¯é‡Œé¢çš„ç»ˆç«¯åŠŸèƒ½ï¼Œä½†æ˜¯é‚£ä¸ªå¤ªç®€é™‹äº†ï¼Œä¸å¤ªå¥½ç”¨ã€‚æ—¢ç„¶éƒ½å·²ç»èƒ½sshè¿ä¸Šç»¿è”äº†ï¼Œé‚£å®Œå…¨æ²¡å¿…è¦ç”¨å®¢æˆ·ç«¯;\nå½“ç„¶ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æ˜ å°„äº†22ç«¯å£åˆ°ç»¿è”çš„22222ç«¯å£ï¼Œæ‰€ä»¥ä½ ç›´æ¥ç”¨sshé“¾æ¥è¿™ä¸ª22222ç«¯å£å³å¯è¿›å…¥dockerå®‰è£…çš„centosã€‚\nssh root@ç»¿è”çš„IP -p 22222\n\n1.1 åˆ¤æ–­æ˜¯å¦æˆåŠŸä»¥ç‰¹æƒæ¨¡å¼å®‰è£…systemctl \n\næ‰§è¡Œæ­¤å‘½ä»¤ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å¦‚ä¸‹è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰ï¼Œä»£è¡¨æ²¡æœ‰æˆåŠŸä»¥ç‰¹æƒæ¨¡å¼å®‰è£…ã€‚systemctlåœ¨linuxä¸­å¾ˆå¸¸ç”¨ï¼Œä¸”å¼€å¯å®¹å™¨çš„sshä¹Ÿéœ€è¦ä½¿ç”¨æ­¤å‘½ä»¤ï¼\n\nå¦‚æœæ²¡èƒ½æˆåŠŸä½¿ç”¨è¿™ä¸ªsystemctlå‘½ä»¤ï¼Œè¯·åˆ é™¤å®¹å™¨åï¼Œé‡è¯•ä¸Šé¢çš„æ­¥éª¤\n2.æ›´æ–°è½¯ä»¶dockerå®‰è£…çš„Centoså¹¶æ²¡æœ‰è™šæ‹Ÿæœºå®‰è£…çš„é‚£ä¹ˆå®Œå…¨ï¼Œè¿˜éœ€è¦æˆ‘ä»¬è¿›è¡Œè½¯ä»¶æºçš„é…ç½®æ“ä½œ\nyum update -y &amp;&amp; yum upgrade -y\n\nç¬¬ä¸€æ¬¡æ‰§è¡Œæ­¤å‘½ä»¤çš„æ—¶å€™ï¼Œå¤§æ¦‚ç‡ä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ï¼ˆæˆ‘åœ¨ä¸¤ä¸ªä¸åŒå¹³å°çš„dockeré‡Œé¢å¯åŠ¨çš„centoséƒ½é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºdockerå®‰è£…çš„centosæ˜¯æœ€å°å®‰è£…ï¼Œæ‰€ä»¥ç¼ºå°‘äº†yumæºçš„é…ç½®é¡¹ï¼‰\nError: Failed to download metadata for repo &#x27;appstream&#x27;: Cannot prepare internal mirrorlist\n\nå‚è€ƒ Error: Failed to download metadata for repo â€˜appstreamâ€˜: Cannot prepare internal mirrorlist åšå®¢ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nå¦‚æœä¸Šé¢è¯¥åšå®¢é“¾æ¥æ— æ³•æ‰“å¼€ï¼Œå¯ä»¥æŸ¥çœ‹æœ¬ç«™è½¬è½½çš„åŸæ–‡\n\ncd /etc/yum.repos.d/sed -i &#x27;s/mirrorlist/#mirrorlist/g&#x27; /etc/yum.repos.d/CentOS-*sed -i &#x27;s|#baseurl=http://mirror.centos.org|baseurl=http://vault.centos.org|g&#x27; /etc/yum.repos.d/CentOS-*\n\néšåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚åˆ›å»ºç¼“å­˜\nyum makecache\n\næ‰§è¡Œmakecacheåï¼Œç³»ç»Ÿä¼šè·å–ä¸€äº›å†…å®¹ï¼Œç„¶åæˆ‘ä»¬é‡æ–°æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\nyum update -y &amp;&amp; yum upgrade -y\n\nä¼šè¿›è¡Œä¸€è¿ä¸²çš„æ›´æ–°ï¼Œç›´åˆ°å‡ºç°ä¸‹é¢çš„completeçª—å£ï¼Œä»£è¡¨æˆåŠŸï¼\n\n\n3.sshé“¾æ¥3.1 å®‰è£…passwdä¸€ä¸ªlinuxç³»ç»Ÿï¼Œä¸èƒ½sshé“¾æ¥å¯ä¸è¡Œï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°ä¸€ä¸‹å†…å®¹ï¼Œå®ç°sshé“¾æ¥\nyum install passwd\n\nå…ˆå®‰è£…passwdå‘½ä»¤ï¼Œè®¾ç½®rootçš„å¯†ç \npasswd\n\nä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥å¯†ç ï¼Œç›²æ•²å°±è¡Œ\n3.2 å®‰è£…vimå’Œopensshç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…vimå’Œopenssh\nyum install vim openssh-server openssh-clients -y\n\nå®‰è£…å®Œæ¯•åï¼Œä¿®æ”¹sshçš„é…ç½®æ–‡ä»¶ï¼ˆvimçš„ä½¿ç”¨è¯·ç™¾åº¦ï¼‰\nvim /etc/ssh/sshd_config\n\nå–æ¶ˆæ³¨é‡Šä¸‹é¢çš„å­—æ®µå³å¯å¼€å¯ssh\nPort 22ListenAddress 0.0.0.0ListenAddress ::PermitRootLogin yesPubkeyAuthentication yesAuthorizedKeysFile .ssh/authorized_keys\n\nä¿®æ”¹å¥½äº†ä¹‹åï¼Œé€€å‡ºç»ˆç«¯ï¼›\nç”¨ä¸‹é¢çš„å‘½ä»¤é‡å¯sshæœåŠ¡ï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨ssh\nsystemctl restart sshd.servicesystemctl enable sshd.service\n\nå¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤åº”è¯¥ä»€ä¹ˆéƒ½ä¸ä¼šè¾“å‡ºï¼\n3.3 å°è¯•sshé“¾æ¥å› ä¸ºæˆ‘ä»¬æŠŠdockerå®¹å™¨çš„22ç«¯å£æ˜ å°„ç»™äº†nasçš„22222ç«¯å£ï¼Œæ‰€ä»¥sshçš„æ—¶å€™éœ€è¦æŒ‡å®šå¯¹åº”ç«¯å£è¿›è¡Œè¿æ¥ã€‚\nssh root@ç»¿è”çš„IP -p 22222\n\nå¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œä¼šå¼¹å‡ºæ¥è®©ä½ éªŒè¯ç™»å½•ï¼Œåˆ°è¿™é‡Œå°±æ˜¯okäº†\n\n3.4 é…ç½®lså‘½ä»¤é¢œè‰²vim /etc/profile\n\nåœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹å­—æ®µ\nexport LS_OPTIONS=&#x27;--color=auto&#x27;alias ls=&#x27;ls $LS_OPTIONS&#x27;alias ll=&#x27;ls $LS_OPTIONS -lA&#x27;\n\néšåé‡å¯å®¹å™¨å³å¯\n3.5 é…ç½®yumé˜¿é‡Œæºå¤‡ä»½åŸæœ‰æº\ntar -zcvf CentOS-bk.tar.gz /etc/yum.repos.d/CentOS-*\n\nçœ‹çœ‹æœ¬åœ°çš„centosæ˜¯ä»€ä¹ˆç‰ˆæœ¬\ncat /etc/redhat-release\n\næˆ‘è¿™é‡Œçš„ç‰ˆæœ¬æ˜¯8.5\nCentOS Linux release 8.5.2111\n\næ›¿æ¢ä¸ºé˜¿é‡Œæº\ncurl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repocurl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-8.repo\n\né‡æ–°ç”Ÿæˆç¼“å­˜\nyum clean allyum makecache\n\n\nç°åœ¨é€Ÿåº¦å¿«å¤šäº†ï¼\nå¼€ç”¨ï¼åç»­çš„ä½¿ç”¨å°±ä¸å†å¤šè¯´æ‹‰ï¼æ—¢ç„¶ä½ æƒ³å®‰è£…centosï¼Œæƒ³å¿…å¯¹linuxçš„äº†è§£è‚¯å®šæ¯”æˆ‘å¤šğŸ˜‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["CentOS","nas"]},{"title":"ã€dockerã€‘å¦‚ä½•æœ¬åœ°æ„å»ºé•œåƒå¹¶å‘å¸ƒåˆ°dockerhub","url":"/posts/1414052231/","content":"åˆ¶ä½œé•œåƒï¼Œæœ€åä¸€ä¸ª.æŒ‡å®šçš„æ˜¯å½“å‰è·¯å¾„ï¼Œå¯ä»¥åˆ‡æ¢ä¸ºå…¶ä»–è·¯å¾„\nsudo docker build -t é•œåƒå:tag .\n\n\néœ€è¦å…ˆç™»å½•ä½ çš„dockerhubè´¦æˆ·\nsudo docker login\n\nè¾“å…¥docker hubçš„è´¦æˆ·å’Œå¯†ç ï¼ˆä¸éœ€è¦tokenï¼‰\nç„¶åç»™æœ¬åœ°çš„é•œåƒæ‰“ä¸ªtag\nsudo docker tag e2bdy:0.1.0 musnows/e2bdy:0.1.0sudo docker tag æœ¬åœ°é•œåƒå:ç‰ˆæœ¬ ç”¨æˆ·å/é•œåƒå:ç‰ˆæœ¬\n\nç„¶åå†æ‰§è¡Œpush\nsudo docker push musnows/e2bdy:0.1.0sudo docker push ç”¨æˆ·å/é•œåƒå:ç‰ˆæœ¬","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["docker"]},{"title":"ã€dockerã€‘ç»¿è”naséƒ¨ç½²mysql+wikijs","url":"/posts/3856317267/","content":"æœ¬æ–‡ä¸ºç»¿è”dockerä¸Šmysql+wikijsçš„é…ç½®æ•™ç¨‹ã€‚\n\n\nmysqlæ˜¯ä¼—å¤šæ•°æ®åº“ä¹‹ä¸€ï¼Œå¾ˆå¤šå…¶ä»–çš„dockerå®¹å™¨éƒ½éœ€è¦ç”¨åˆ°æ•°æ®åº“ã€‚æ¯”å¦‚å›¾åºŠã€wikijs\n\næ‰€ç”¨nasï¼šç»¿è”dh2600\n\n1.å®‰è£…mysql1.1 ä¸‹è½½é•œåƒåœ¨ç»¿è”çš„dockerå¥—ä»¶-æœ¬åœ°é•œåƒ-æ·»åŠ -å®˜æ–¹åº“ï¼Œæœç´¢mysql\n\né€‰æ‹©æœ€æ–°ç‰ˆæœ¬ï¼Œç‚¹å‡»ç¡®å®šï¼Œç­‰å¾…é•œåƒæ‹‰å–å®Œæ¯•\n\n1.2 åˆ›å»ºå®¹å™¨éšååœ¨æœ¬åœ°é•œåƒåˆ—è¡¨ä¸­é€‰æ‹©åˆšåˆšä¸‹è½½çš„mysqlé•œåƒï¼Œç‚¹å‡»+åˆ›å»ºå®¹å™¨ã€‚\næœªæåŠçš„é€‰é¡¹éƒ½æ— éœ€è®¾ç½®\n\nè‹¥éœ€è¦å¯¹å®¹å™¨è¿›è¡Œèµ„æºé™åˆ¶ï¼Œåˆ™è‡³å°‘ç»™1Gå†…å­˜\nç½‘ç»œé€‰æ‹©bridge\nå­˜å‚¨ç©ºé—´å»ºè®®æœ¬åœ°æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œæ˜ å°„ï¼Œè£…è½½è·¯å¾„ä¸º/val/lib/mysql\n\n\n\nç«¯å£æ˜ å°„ï¼Œå…¶ä¸­3306æ˜¯httpï¼Œ33060æ˜¯httpsï¼Œè¿™éƒ¨åˆ†æœ¬åœ°æ˜ å°„ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„ç«¯å£å³å¯\n\n\n\nç¯å¢ƒå˜é‡å¤„æ·»åŠ MYSQL_ROOT_PASSWORDï¼Œå€¼ä¸ºmysqlçš„åˆå§‹å¯†ç \n\n\nç‚¹å‡»ä¸‹ä¸€æ­¥-ç¡®å®šï¼Œå®¹å™¨åˆ›å»ºå®Œæ¯•ï¼\n\nå¦‚æœä½ çš„ç³»ç»Ÿæ”¯æŒsshï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»º\ndocker run \\\t--name mysql \\\t-d \\\t-p 3306:3306 \\\t--restart unless-stopped \\\t-v æœ¬åœ°è·¯å¾„:/var/lib/mysql \\\t-e MYSQL_ROOT_PASSWORD=123456 \\\t-e TZ=Asia/Shanghai \\\tmysql:8.0.30\n\nè¿™æ ·åˆ›å»ºå‡ºæ¥çš„mysqlï¼Œrootç”¨æˆ·å¯†ç æ˜¯123456\n1.3 ç¡®è®¤å®‰è£…æˆåŠŸå®¹å™¨å¼€å§‹è¿è¡Œåï¼Œç‚¹å‡»è¯¦ç»†-ç»ˆç«¯ï¼Œè¿æ¥/bin/bash\n\nè‹¥é…ç½®æ­£ç¡®ï¼Œåˆ™åº”è¯¥å‡ºç°ä¸‹é¢çš„ç”»é¢\n\nè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œè¿›å…¥mysqlæ§åˆ¶å°\nmysql -uroot -på¯†ç \nè¿™é‡Œçš„å¯†ç æ˜¯åˆšåˆšè½½ç¯å¢ƒå˜é‡ä¸­è®¾ç½®çš„å¯†ç ï¼Œæ¯”å¦‚ä¸Šé¢æ¼”ç¤ºçš„å¯†ç æ˜¯123456ï¼Œé‚£ä¹ˆå°±åº”è¯¥ç”¨ä¸‹é¢çš„è¯­å¥\nmysql -uroot -p123456\nå¦‚æœå‡ºç°ä¸‹é¢çš„å†…å®¹ï¼Œåˆ™ä»£è¡¨mysqlå®‰è£…æˆåŠŸï¼\n1.4 åˆ›å»ºæ•°æ®åº“ä½†æœ‰mysqlè¿˜ä¸å¤Ÿï¼Œå¦‚æœæƒ³ç»™å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºæ•°æ®åº“\nä»¥WIKI JSä¸ºä¾‹ï¼Œå…ˆè¾“å…¥ä»¥ä¸‹è¯­å¥è¿›å…¥æ•°æ®åº“\nmysql -uroot -på¯†ç \n\nè¾“å…¥ä»¥ä¸‹è¯­å¥ï¼Œåˆ›å»ºæ•°æ®åº“ã€‚å¯ä»¥å¤åˆ¶åæŒ‰shift+insç²˜è´´ï¼Œä¸è¦ç”¨ctrl+vç²˜è´´\nCREATE DATABASE æ•°æ®åº“å;\nåˆ›å»ºä¸€ä¸ªåä¸ºWIKIJSçš„æ•°æ®åº“\nCREATE DATABASE WIKIJS;\n\n1.5 åˆ›å»ºç”¨æˆ·è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼ŒæŸ¥çœ‹å½“å‰æ•°æ®åº“çš„ç”¨æˆ·\nselect user from mysql.user;\næ˜¾ç¤ºçš„ç»“æœå¦‚ä¸‹ï¼ˆä¸çŸ¥é“ä¸ºå•¥æˆ‘è¿™é‡Œæœ‰ä¸¤ä¸ªrootï¼Œä¸å½±å“ä½¿ç”¨ï¼‰\nmysql&gt; select user from mysql.user;+------------------+| user             |+------------------+| root             || mysql.infoschema || mysql.session    || mysql.sys        || root             |+------------------+6 rows in set (0.00 sec)mysql&gt; \n\nä¸ºæ–¹ä¾¿å®¹å™¨ç®¡ç†ï¼Œæˆ‘ä»¬ç»™WIKI JSåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ï¼Œåä¸ºWIKI\nCREATE USER &#x27;WIKI&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªWIKIç”¨æˆ·ï¼Œå¯†ç ä¸º123456\t\nåˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™è¿™ä¸ªç”¨æˆ·æˆæƒï¼Œè®©å…¶æœ‰èƒ½åŠ›å¤„ç†æ•°æ®åº“\nGRANT ALL ON WIKIJS.* TO &#x27;WIKI&#x27;@&#x27;%&#x27;;\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„æ„æ€ä¸ºï¼ŒæˆäºˆWIKIç”¨æˆ·åœ¨æ•°æ®åº“WIKIJSä¸­æ‰€æœ‰æƒé™ï¼ˆALL).\næ³¨æ„åŒºåˆ†ï¼ŒALL ON åé¢çš„æ˜¯æ•°æ®åå­—ï¼ŒTOåçš„æ˜¯ç”¨æˆ·åå­—\nè¿™æ ·ï¼ŒWIKIç”¨æˆ·å’ŒWIKIJSæ•°æ®åº“éƒ½åˆ›å»ºå®Œæ¯•äº†ï¼Œå¯ä»¥åœ¨ WIKI JS çš„ç¯å¢ƒå˜é‡ä¸­è¿›è¡Œé…ç½®äº†\n1.6 mysqlçš„å®é™…è¿ç”¨å¦‚æœä½ ä¸æ˜¯ç¨‹åºçŒ¿ï¼Œå•ç‹¬çš„mysqlå®¹å™¨å¯èƒ½æ²¡å•¥ç”¨ï¼Œåç»­å°†åˆ†äº«mysqlå®¹å™¨çš„ä¸¤ä¸ªä½¿ç”¨å®ä¾‹\n\nwiki js\nchevereto å›¾åºŠ\nlsky å›¾åºŠ\n\n1.7 dockerä½¿ç”¨mysqlå‘½ä»¤æ€»ç»“å¦‚æœä½ çœ‹äº†ä¸Šé¢é‚£ä¸€å †ï¼Œè¿˜æ˜¯ä¸æ‡‚ï¼Œé‚£å°±å¯ä»¥æŠŠä¸‹é¢çš„3ä¸ªè¯­å¥è®°ä½ï¼Œå¯¹æ‰€æœ‰è¦ç”¨åˆ°MySQLæ•°æ®åº“çš„dockerå®¹å™¨éƒ½é€‚ç”¨!\n-- å…ˆåœ¨nasçš„ç³»ç»Ÿä¸­è¿›å…¥MySQLå®¹å™¨çš„ç»ˆç«¯é‡Œé¢docker exec -it å®¹å™¨å /bin/sh-- åœ¨MySQLçš„å®¹å™¨ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤mysql -uroot -på¯†ç -- è¿›å…¥MySQLå‘½ä»¤è¡Œåï¼Œåˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·create database æ•°æ®åº“åå­—;-- æ•°æ®åº“åå­—è¦å’Œä¸Šé¢åˆ›å»ºçš„è¿™ä¸ªæ•°æ®åº“å¯¹åº”CREATE USER &#x27;ç”¨æˆ·å&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;ç”¨æˆ·çš„å¯†ç &#x27;;GRANT ALL ON æ•°æ®åº“åå­—.* TO &#x27;ç”¨æˆ·å&#x27;@&#x27;%&#x27;;\n\nå½“ç„¶ï¼Œå¦‚æœä½ çš„NASå†…å­˜å¤Ÿå¤šï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©æŠ„åˆ«äººçš„docker-composeæ–‡ä»¶ä¸€æ¬¡æ€§è”åŠ¨åˆ›å»ºå¤šä¸ªå®¹å™¨ï¼Œçªå‡ºä¸€ä¸ªå‚»ç“œå¼ï¼›\n2.WIKI JSä¸‹é¢å°†ç»§ç»­è®²è§£wiki jsdockerçš„å®‰è£…ï¼Œå…¶è‡³å°‘éœ€è¦1Gå†…å­˜ï¼ŒåŠ ä¸Šmysqlå®¹å™¨ï¼Œæ€»å…±è‡³å°‘éœ€è¦2Gå†…å­˜ã€‚è¯·ç¡®è®¤æ‚¨nasçš„å†…å­˜è¶³å¤Ÿï¼Œå†æ‰§è¡Œä»¥ä¸‹æ“ä½œ!\n2.1 æ˜¯ä»€ä¹ˆwikijså°±æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å‘ˆç°æ–¹å¼ã€‚è¯¥ç«™ç‚¹å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹\n\næ•°æ®å­˜æœ¬åœ°ï¼Œå®‰å…¨æ€§é«˜\nå¤šç”¨æˆ·åœ¨çº¿ç¼–è¾‘ï¼Œå¯è¿›è¡Œæƒé™ç®¡ç†\næœ‰å†å²ç‰ˆæœ¬ç®¡ç†ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ—§ç‰ˆæœ¬æƒ…å†µ\nè‹¥æœ‰éœ€è¦ï¼Œå¯ä»¥å°†æ–‡æ¡£è‡ªåŠ¨åŒæ­¥åˆ°äº‘å­˜å‚¨å¹³å°å¤‡ä»½ï¼Œå¦‚gitä»“åº“\nå¯å¯¼å‡ºæ•°æ®åˆ°æœ¬åœ°ï¼Œå‡ä¸ºmarkdownæ ¼å¼ã€‚è„±ç¦»wiki jsä¹Ÿå¯ä»¥ç”¨typoraç­‰æ”¯æŒmarkdownçš„è½¯ä»¶æ‰“å¼€\n\n2.2 æœ‰å•¥ç”¨ä½ å¯èƒ½è§‰å¾—ï¼Œè¿™ç©æ„å¯¹å®¶åº­ç”¨æˆ·æ¥è¯´æ²¡å•¥ç”¨å•Šï¼Ÿå®é™…ä¸Šï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªæå…¶ä¸é”™çš„å®¶åº­è®°äº‹æœ¬ï¼\næ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å­˜åœ¨ä½ æœ¬åœ°çš„nasä¸Šçš„ï¼Œåªè¦åœ¨å®¶å°±å¯ä»¥ç®€å•åœ°é€šè¿‡ip+ç«¯å£çš„æ–¹å¼è®¿é—®wikijsã€‚ç”µè„‘æ‰‹æœºéƒ½èƒ½ç›´æ¥åœ¨çº¿ç¼–è¾‘ï¼Œå…å»äº†å¤šç«¯åŒæ­¥çš„çƒ¦æ¼ã€‚\nå¦‚æœä½ æœ‰å…¬ç½‘ipï¼Œè¿˜å¯ä»¥åœ¨å¤–ç½‘ç›´æ¥è®¿é—®ï¼›æ²¡æœ‰å…¬ç½‘ipçš„ä¹Ÿå¯ä»¥ç”¨æ¨±èŠ±frpè¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå…è´¹10må¸¦å®½è¶³å¤Ÿwiki jsä½¿ç”¨äº†ï¼ˆæ¨±èŠ±frpçš„dockerå®‰è£…æ•™ç¨‹è§å®˜ç½‘å¸®åŠ©æ–‡æ¡£ï¼‰\nç›¸å½“äºä¸€ä¸ªäº‘åŒæ­¥çš„è®°äº‹æœ¬ï¼ï¼ˆåªä¸è¿‡å¯¹æ‰‹æœºç¼–è¾‘å¹¶ä¸æ˜¯å¾ˆå‹å¥½ï¼‰\n2.3 ä¸‹è½½wikijsé•œåƒè€åœ°æ–¹ï¼Œæ·»åŠ é•œåƒï¼Œé€‰æ‹© linuxserver/wikijs çš„latestç‰ˆæœ¬å³å¯\n\n2.4 å®‰è£…é…ç½®ç½‘ç»œæ¨¡å¼é€‰æ‹©bridge\nåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œæ˜ å°„ç»™wikijsçš„/configï¼Œè®°å¾—ä¿®æ”¹æƒé™ä¸ºè¯»å†™\n\nwikijsçš„ç«¯å£åªæœ‰ä¸€ä¸ªï¼Œè®¾ç½®ä¸€ä¸ªä¸å†²çªçš„å³å¯\n\nç¯å¢ƒå˜é‡éœ€è¦æˆ‘ä»¬é…ç½®å¾ˆå¤šï¼åˆ’é‡ç‚¹ï¼ï¼\n\nåœ¨é…ç½®ç¯å¢ƒå˜é‡å‰ï¼Œè¯·å…ˆå‚è€ƒ 01-mysql ä¸­çš„æ•™ç¨‹ï¼Œåœ¨mysqlä¸­åˆ›å»ºä¸€ä¸ªWIKIJSæ•°æ®åº“ï¼Œå’ŒWIKIç”¨æˆ·\n\n\n\n\nç¯å¢ƒå˜é‡\nå€¼\n\n\n\nDB_TYPE\nmysql\n\n\nDB_HOST\næ•°æ®åº“ä¸»æœºåæˆ–ipï¼Œç›´æ¥å¡«å†™nasçš„ipå³å¯\n\n\nDB_PROT\nmysqlå®¹å™¨çš„ç«¯å£\n\n\nDB_USER\næ•°æ®åº“ç”¨æˆ·å\n\n\nDB_PASS\næ•°æ®åº“ç”¨æˆ·çš„å¯†ç \n\n\nDB_NAME\næ•°æ®åº“åç§°\n\n\nå…¶ä¸­DB_TYPEä¸ºæ•°æ®åº“ç±»å‹ï¼Œæ”¯æŒ mysql, postgres, mariadb, mssql, sqliteï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯mysql\nä¸‹å›¾ä¸ºä¸€ä¸ªé…ç½®åçš„ç¤ºä¾‹\n\né…ç½®å®Œç¯å¢ƒå˜é‡åï¼Œå®¹å™¨å°±é…ç½®å®Œæˆäº†ï¼Œç‚¹å‡»ç¡®å®š\n3.ä½¿ç”¨wikijsåœ¨æµè§ˆå™¨é¡µé¢è¾“å…¥ä½ nasçš„ip+ç«¯å£ï¼Œå³å¯æ‰“å¼€wiki jsçš„ç½‘é¡µã€‚\næ˜¯è‹±è¯­çš„å’‹åŠï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿›å»ä¹‹åå°±å¯ä»¥æ”¹æˆä¸­æ–‡äº†ã€‚\n\nAdministrator Email ç®¡ç†å‘˜é‚®ç®±ï¼Œè¾“å…¥ä¸€ä¸ªä½ è‡ªå·±çš„é‚®ç®±å³å¯\nPasswd å¯†ç \nConfirm Passwd ç¡®è®¤å¯†ç \n\nurlè¿™é‡Œå¯ä»¥ä¸å¡«ï¼Œå¡«å®Œä¿¡æ¯åç›´æ¥ç‚¹å‡»ä¸‹é¢çš„INSTALLå³å¯\n\nåˆæ¬¡ä½¿ç”¨çš„æ—¶å€™éœ€è¦ä¸‹è½½ä¸€äº›ä¾èµ–é¡¹ï¼Œä¸‹è½½å®Œæˆåï¼Œå³å¯è¿›å…¥ç™»å½•é¡µé¢ã€‚è¾“å…¥ä½ åˆšåˆšè®¾ç½®çš„è´¦æˆ·é‚®ç®±ï¼Œç‚¹å‡»log inè¿›å…¥wikijsçš„ç®¡ç†åå°\n\nè¿›å…¥ä¹‹åä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªé€‰é¡¹ï¼ˆæ— æˆªå›¾ï¼‰ç›´æ¥ç‚¹å‡»å³è¾¹é‚£ä¸ªè¿›å…¥ç®¡ç†é¡µé¢ğŸ‘‡\n\nè¿›å…¥åé€‰æ‹©Localeï¼Œåœ¨å³ä¾§å¯ä»¥çœ‹åˆ°ä¸­æ–‡ï¼Œä¸‹è½½ä¹‹åï¼Œé€‰æ‹©ä¸­æ–‡å†ç‚¹å‡»å³ä¸Šè§’ç»¿è‰²çš„APPLYï¼Œé¡µé¢å°±å˜æˆä¸­æ–‡äº†\n\néšåå°±åˆ›å»ºä¸€ä¸ªé¡µé¢å§ï¼\nå­¦ä¹ markdownè¯­æ³•å¦‚æœä½ ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ä»»ä½•markdownè¯­æ³•ï¼Œåˆ™å¯ä»¥é€‰æ‹©å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\n\nä¸ªäººå»ºè®®å­¦ä¹ ä¸€ä¸‹åŸºæœ¬çš„markdownè¯­æ³•ï¼Œéå¸¸ç®€å•ï¼åœ¨å¾ˆå¤šå¹³å°ï¼ˆCSDNã€çŸ¥ä¹ã€åšå®¢å›­ï¼‰ä»¥åŠå¾ˆå¤šç¬”è®°è½¯ä»¶ï¼ˆä¸ºçŸ¥ã€æœ‰é“äº‘ã€flowusç­‰ï¼‰éƒ½æ˜¯æ”¯æŒmarkdownçš„ã€‚\n\nå­¦ä¹ mdè¯­æ³•å¯ä»¥æŸ¥çœ‹æ­¤ç½‘ç«™ ğŸ‘‰ markdown.com.cn\n\nOVER!ç°åœ¨ä½ å·²ç»å¯ä»¥å°†wiki jsä½œä¸ºå¤šäººåä½œæ–‡æ¡£ç¼–è¾‘ç«™ç‚¹ï¼Œæˆ–è€…æ˜¯ä½ çš„å®¶åº­è®°äº‹æœ¬äº†ï¼\néšæ—¶å¯çœ‹ï¼Œéšæ—¶å¯ç¼–è¾‘ï¼\nå‚è€ƒæ–‡ç« \nç¾¤æ™–å†…é€šè¿‡Dockerå®‰è£…MySQL5.7.34\nMySQL åˆ›å»ºç”¨æˆ·ï¼Œè®¾ç½®å¯†ç \nMySQL åˆ›å»ºæ•°æ®åº“\nè½»é‡ä½†åŠŸèƒ½å¼ºå¤§çš„Wiki.js\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["mysql","docker"]},{"title":"ã€dockerã€‘éƒ¨ç½²minioå¯¹è±¡å­˜å‚¨å¹¶ç”¨rcloneåŒæ­¥","url":"/posts/1950951389/","content":"dockeréƒ¨ç½²minioå¯¹è±¡å­˜å‚¨å¹¶ç”¨rcloneåŒæ­¥\n1.ä»€ä¹ˆæ˜¯minioï¼Ÿminioæ˜¯ä¸€ä¸ªå¼€æºçš„å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨ï¼Œå…¼å®¹S3åè®®ã€‚\nå®˜ç½‘ï¼šhttps://min.io/\nå®˜æ–¹åœ¨å¼€æºçš„åŸºç¡€ä¸Šä¹Ÿæä¾›äº‘ç«¯S3æœåŠ¡ï¼Œåˆ†ä¸ºä¸ªäººå’Œä¼ä¸šï¼Œæœ‰ä¸åŒçš„æ”¶è´¹æ ‡å‡†ã€‚\n\n1.1 è‡ªå»ºå¯¹è±¡å­˜å‚¨çš„å¥½å¤„ï¼Ÿå½“ç„¶ï¼Œæœ¬æ–‡å†™ä¸‹æ¥è‚¯å®šä¸æ˜¯è®©ä½ å»ä¹°å®ƒçš„å¯¹è±¡å­˜å‚¨æœåŠ¡çš„ï¼Œè€Œæ˜¯åœ¨æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨&#x2F;Nasä¸Šéƒ¨ç½²ä¸€ä¸ªminioçš„dockerï¼Œæ¥æ‹¥æœ‰ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„å¯¹è±¡å­˜å‚¨æœåŠ¡å™¨ï¼\nå¯¹è±¡å­˜å‚¨æœåŠ¡å™¨å¯ä»¥ç”¨æ¥åšå›¾åºŠã€é™æ€èµ„æºç¼“å­˜ï¼Œäº¦æˆ–è€…æ˜¯ç›´æ¥å½“ä½œä¸€ä¸ªç½‘ç›˜æ¥ä½¿ç”¨ã€‚\nè‡ªå»ºçš„å¯¹è±¡å­˜å‚¨çš„å¥½å¤„æ˜¯æ‰€æœ‰æºæ–‡ä»¶æˆ‘ä»¬éƒ½èƒ½äº²æ‰‹ç®¡ç†ï¼Œä¸”æ— éœ€ä¸ºä»˜è´¹çš„å¯¹è±¡å­˜å‚¨çš„å¥‡æ€ªçš„è®¡ä»·æ–‡æ¡£æ„Ÿåˆ°æ‰‹è¶³æ— æªï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒæœ‰äººæ¶æ„åˆ·æµæŠŠä½ ä¸€å¥—æˆ¿å­ç»™å¥—èµ°ã€‚\nç¼ºç‚¹å°±æ˜¯ï¼Œè‡ªå»ºçš„ç¨³å®šæ€§è‚¯å®šä¸å¦‚å·²æœ‰å‚å®¶æä¾›çš„æœåŠ¡ï¼Œä¸”è‡ªè´­çš„æœåŠ¡å™¨&#x2F;Nasä¸Šä¼ å¸¦å®½ä¸€èˆ¬éƒ½å¾ˆä½ï¼Œæ–‡ä»¶ä¸€å¤šï¼Œè®¿é—®é€Ÿåº¦å°±å¾ˆæ…¢äº†ã€‚\nå¯¹äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œè‡ªå»ºminioçš„å”¯ä¸€ä½œç”¨ï¼Œå°±æ˜¯å¤‡ä»½ä¸ƒç‰›äº‘&#x2F;é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨ä¸­çš„æ–‡ä»¶ã€‚è€ƒè™‘åˆ°2023ä¸‹åŠå¹´ï¼Œå„å¤§å‚æ¥è¿boomäº‘æœåŠ¡ï¼Œå›½å¤–çš„è°·æ­Œè¿˜å‡ºç°äº†äº‘ç›˜é‡Œé¢ç”¨æˆ·çš„æ•°æ®å›æ»šåˆ°å‡ æœˆå‰çš„æ¶æ€§é—®é¢˜ï¼Œè¿™å¯æ˜¯å¯èƒ½å¯¼è‡´ç”¨æˆ·æ•°æ®ä¸¢å¤±çš„å¤§é—®é¢˜å•Šï¼\n\nè°·æ­Œå…¬å¸ƒæ–¹æ¡ˆï¼Œä¿®å¤ Drive äº‘ç›˜æ–‡ä»¶ä¸¢å¤±é—®é¢˜\nè°·æ­Œæ‰¿è®¤äº‘ç«¯ç¡¬ç›˜Google Driveå­˜åœ¨BUGï¼Œ3æœˆå†…ç”¨æˆ·æ–‡ä»¶å¯èƒ½ä¸¢å¤±\n\næ‰€ä»¥ï¼Œå°†æ•°æ®åœ¨è‡ªå·±æœ¬åœ°ç•™ä¸€ä»½æ€»æ˜¯å®‰å¿ƒä¸€äº›ã€‚æ•°æ®å®‰å…¨é çš„æ˜¯å¤‡ä»½ï¼Œä¸æ˜¯äº‘æœåŠ¡å‚å®¶ç»™ä½ æä¾›çš„99.99999%å¯ç”¨æ€§çš„ä¸€é¢ä¹‹è¯ã€‚\nå¦‚æœä½ å¯¹æ•°æ®å¤‡ä»½è¿™ä¸ªè¯é¢˜æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢ï¼šè°ˆè°ˆå¦‚ä½•è¿›è¡Œæœ‰æ•ˆæ•°æ®å¤‡ä»½ï¼Œ3+2+1\n\næ¸©é¦¨æé†’ï¼šå¦‚æœä½ æƒ³åœ¨äº‘æœåŠ¡å™¨ä¸Šå®‰è£…minioæ¥å¤‡ä»½å·²æœ‰S3ä¸­çš„æ–‡ä»¶çš„è¯ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ä¸€ä¸ªå’Œå·²æœ‰S3ä¸åœ¨åŒä¸€ä¸ªåœ°åŸŸã€éåŒä¸€ä¸ªæœåŠ¡å•†çš„äº‘æœåŠ¡å™¨ï¼Œé¿å…æŸäº›æœåŠ¡å•†äº‘æœåŠ¡å™¨å’Œå¯¹è±¡å­˜å‚¨ä¸€èµ·boomçš„æƒ…å†µâ€¦â€¦\n\n2.dockerå®‰è£…minio2.1 å®‰è£…dockerdockerå®‰è£…çš„æ•™ç¨‹è¯¦è§æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢\nã€Dockerã€‘deepin&#x2F;centoså®‰è£…docker | æ…•é›ªçš„å¯’èˆ\n2.2 å®‰è£…minioè¿™é‡Œæ¨èä½¿ç”¨ç”±VMwareç»´æŠ¤çš„minio dockerç‰ˆæœ¬bitnami/minioï¼Œæ›´æ–°å¾ˆé¢‘ç¹ã€‚\nhub.docker.com&#x2F;r&#x2F;bitnami&#x2F;minio\nåˆ›å»ºå®¹å™¨çš„å‘½ä»¤å¦‚ä¸‹ï¼Œéå¸¸ç®€å•\ndocker run -it -d --name minio \\\t-p 9000:9000 \\\t-p 9001:9001 \\\t--restart=always \\\t-v /minio/data:/bitnami/minio/data \\\t-e MINIO_ROOT_USER=&quot;minio_root&quot; \\\t-e MINIO_ROOT_PASSWORD=&quot;minio_123456&quot; \\\t-e TZ=&#x27;Asia/Shanghai&#x27; \\\tbitnami/minio:latest\n\nè¯¥åˆ›å»ºå®¹å™¨æ“ä½œåŸºäºå¦‚ä¸‹hashçš„dockeré•œåƒï¼ˆæ›´æ–°äº2023-12-12ï¼‰ï¼Œåˆ›å»ºå®¹å™¨çš„å‘½ä»¤åç»­å¯èƒ½ä¼šæœ‰å˜åŠ¨ï¼Œè¯·å‚è€ƒdocker-hubä¸­çš„å®˜æ–¹æ–‡æ¡£\nbitnami/minio  latest    552af9bd3d6d   2 days ago     212MB\n\nå¯¹è¿™ä¸ªdockerå‘½ä»¤è¿›è¡Œè§£é‡Šï¼š\n\n-it -dï¼Œitæä¾›äº¤äº’èƒ½åŠ›ï¼Œdä»£è¡¨åå°è¿è¡Œ\n--restart=alwaysï¼Œå§‹ç»ˆé‡å¯dockerï¼ˆdockeræœåŠ¡é‡å¯åï¼Œé•œåƒä¼šè‡ªåŠ¨å¯åŠ¨ï¼‰\n-p 9000:9000ï¼Œå°†dockerå†…çš„9000ç«¯å£ï¼ˆå³ä¾§ï¼‰æ˜ å°„ç»™å®¿ä¸»æœºï¼ˆå·¦ä¾§ï¼‰çš„9000ç«¯å£ï¼Œç«¯å£9001çš„æ˜ å°„åŒç†ã€‚\nå®¹å™¨å†…9000ç«¯å£æ˜¯minioçš„apiç«¯å£ï¼ˆç”¨äºS3åè®®æ“ä½œï¼‰\nå®¹å™¨å†…9001ç«¯å£æ˜¯minioçš„webç®¡ç†ç•Œé¢ç«¯å£\næ ¹æ®ä½ çš„éœ€è¦ï¼Œä¿®æ”¹å†’å·å·¦ä¾§çš„å®¿ä¸»æœºç«¯å£å³å¯ã€‚\n\n\n-v /minio/data:/bitnami/minio/dataï¼Œå°†dockerå†…/bitnami/minio/dataè·¯å¾„æ˜ å°„ç»™ä¸»æœº/minio/dataè·¯å¾„ï¼Œä¸»æœºä¸Šçš„è·¯å¾„ï¼ˆå·¦ä¾§ï¼‰è¯·è‡ªè¡Œä¿®æ”¹ï¼›è¿™ä¸ªè·¯å¾„æ˜¯bucketå’Œminioé…ç½®æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ã€‚\nä¸¤ä¸ª-eè®¾ç½®çš„æ˜¯ç¯å¢ƒå˜é‡ï¼Œåˆ†åˆ«è®¾ç½®çš„æ˜¯minioç®¡ç†å‘˜çš„è´¦æˆ·å’Œç®¡ç†å‘˜çš„å¯†ç ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™é‡Œé…ç½®äº†ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç åï¼Œè¿›å…¥minioç®¡ç†ç³»ç»Ÿçš„å¯†ç æ— æ³•è¢«ä¿®æ”¹ã€‚å¦‚æœä½ çš„minioæœåŠ¡éœ€è¦æš´éœ²åœ¨å…¬ç½‘ä¸Šï¼Œè¯·ä¸€å®šè¦è®¾ç½®ä¸€ä¸ªé«˜å¼ºåº¦çš„å¯†ç ï¼\n-e TZ=&#39;Asia/Shanghai&#39; è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒºï¼ˆåç»­å®šæ—¶å¤‡ä»½éœ€è¦æœ‰æ­£ç¡®æ—¶åŒºï¼‰\næœ€åçš„bitnami/minio:latestä»£è¡¨æˆ‘ä»¬éœ€è¦åˆ›å»ºbitnami/minioè¿™ä¸ªdockeré•œåƒçš„latestç‰ˆæœ¬ï¼Œå¦‚æœæœ¬åœ°æ²¡æœ‰è¿™ä¸ªé•œåƒï¼Œåˆ™ä¼šè‡ªåŠ¨å»docker-hubæ‹‰å–ã€‚\nå¦‚æœä½ å¡åœ¨äº†pullé•œåƒçš„æ­¥éª¤ï¼Œè¯·è‡ªè¡Œç™¾åº¦å¦‚ä½•æ›¿æ¢dockerçš„é•œåƒæºã€‚\n\nå¦‚ä¸‹æ˜¯æˆ‘åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰è£…è¿‡minioçš„äº‘æœåŠ¡ä¸Šæµ‹è¯•çš„ç»“æœï¼ŒæˆåŠŸå®‰è£…å¹¶å¯åŠ¨minio\n[root:~/docker]# docker run -it -d --name minio \\&gt; -p 19000:9000 \\&gt; -p 19001:9001 \\&gt; --restart=always \\&gt; -v /root/docker/minio:/bitnami/minio/data \\&gt; -e MINIO_ROOT_USER=&quot;minio_root&quot; \\&gt; -e MINIO_ROOT_PASSWORD=&quot;minio_123456&quot; \\&gt; bitnami/minio:latestUnable to find image &#x27;bitnami/minio:latest&#x27; locallylatest: Pulling from bitnami/minioef5975039511: Pull complete Digest: sha256:3bb81d101dea57a5382a2d01eda6991e75ce69669d2d49c4646d82721b7c258eStatus: Downloaded newer image for bitnami/minio:latestafefbb9514de0f4a1c02b7f4212b1e05eee5ef342ed4ce27e03de10071914060\n\nå®¹å™¨æ­£å¸¸å¯åŠ¨ï¼Œå¤„äºRunningçŠ¶æ€ï¼ŒSTATUSæ­£å¸¸ï¼\nCONTAINER ID   IMAGE                                  COMMAND                  CREATED         STATUS         PORTS                                                                                      NAMESafefbb9514de   bitnami/minio:latest                   &quot;/opt/bitnami/scriptâ€¦&quot;   3 minutes ago   Up 3 minutes   0.0.0.0:19000-&gt;9000/tcp, :::19000-&gt;9000/tcp, 0.0.0.0:19001-&gt;9001/tcp, :::19001-&gt;9001/tcp   minio\n\nè¿™æ ·è¿˜ä¸å¤Ÿï¼Œè¯·åœ¨åç»­åˆ›å»ºäº†bucketå¹¶ä¸Šä¼ æµ‹è¯•æ–‡ä»¶åï¼ŒæŸ¥çœ‹å®¿ä¸»æœºä¸­æœ¬åœ°æ˜ å°„çš„è·¯å¾„ä¸­æ˜¯å¦æœ‰å¯¹åº”æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œé¿å…è·¯å¾„æ˜ å°„å¤±è´¥ï¼ï¼ˆå¦‚æœè·¯å¾„æ²¡æœ‰æˆåŠŸæ˜ å°„åˆ°æœ¬åœ°ï¼Œé‚£ä¹ˆä½ å½“å‰åˆ›å»ºçš„minioè¢«åˆ é™¤ä¹‹åï¼Œæ–‡ä»¶å°±å¾ˆéš¾æ‰¾å›æ¥äº†ï¼‰\n\né¡ºå¸¦ä¸€æï¼Œåœ¨æˆ‘è¿™è¾¹æµ‹è¯•å‘ç°ï¼Œå¦‚æœä½ é”™è¯¯ä½¿ç”¨æµè§ˆå™¨è®¿é—®äº†9000è¿™ä¸ªapiç«¯å£ï¼Œä¼šè¢«è‡ªåŠ¨é‡å®šå‘åˆ°9001 webç®¡ç†é¡µé¢ç«¯å£ï¼ˆå‰ææ˜¯æ˜ å°„çš„å®¿ä¸»æœºç«¯å£å’Œdockerå†…ç«¯å£ä¸€è‡´ï¼‰\n\n2.3 webç®¡ç†ä½¿ç”¨ http://IP:ç«¯å£ æ‰“å¼€minioçš„9001ç«¯å£å¯¹åº”çš„å®¿ä¸»æœºç«¯å£ï¼Œè®¿é—®minioçš„webç®¡ç†é¡µé¢ã€‚è¾“å…¥åˆšåˆšåˆ›å»ºå®¹å™¨æ—¶ï¼Œåœ¨ç¯å¢ƒå˜é‡é‡Œé¢é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œç™»å½•ï¼Œå³å¯è¿›å…¥æ§åˆ¶å°ã€‚\n\nminioçš„ç•Œé¢æ¯”è¾ƒç®€å•ï¼ŒåŸºæœ¬è¦åšçš„æ“ä½œåªæœ‰ä¸¤ä¸ªï¼Œåˆ›å»ºbucketå­˜å‚¨æ¡¶ï¼Œå’Œaccesskeyç”¨äºapiè°ƒç”¨ã€‚\n\næ›´é«˜é˜¶çš„é…ç½®é¡¹å’Œæ“ä½œæˆ‘æ²¡æœ‰å°è¯•è¿‡ï¼Œè¯·è‡ªè¡Œå‚è€ƒminioçš„æ–‡æ¡£æˆ–è€…å…¶ä»–æ•™ç¨‹ã€‚\n\n2.3.1 åˆ›å»ºbucketç¬¬ä¸€ä¸ªç•Œé¢å°±æ˜¯å¤§å¤§çš„Object Browserï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå­˜å‚¨æ¡¶\n\nç‚¹å‡»åˆ›å»ºbucketï¼Œä¼šè¿›å…¥å¦‚ä¸‹é…ç½®é¡¹ï¼Œé™¤äº†bucketçš„åå­—ï¼Œè¿˜æœ‰ä¸‰ä¸ªé€‰é¡¹\n\nVersioningï¼šç‰ˆæœ¬æ§åˆ¶ï¼Œå¼€å¯åï¼Œè¯¥bucketå°†å¤„äºå¤šç‰ˆæœ¬æ¨¡å¼ä¸‹ï¼Œæ–‡ä»¶ä¼šä¿ç•™ä¿®æ”¹çš„å†å²è®°å½•ã€‚\nObject Lockingï¼šé¿å…æ–‡ä»¶è¢«åˆ é™¤ï¼Œéœ€è¦æ”¯æŒä¿ç•™å’Œåˆæ³•ä¿ç•™ï¼ˆè¿™ä¸¤ä¸ªå•¥æ„æ€æˆ‘ä¸æ˜ç™½ï¼‰ï¼Œè¯¥é€‰é¡¹åªèƒ½åœ¨bucketåˆ›å»ºæ—¶æ‰“å¼€ã€‚\nQuotaï¼šé™åˆ¶å®¹å™¨ä¸­æ–‡ä»¶å¤§å°ï¼ˆæ€»å®¹é‡ï¼‰\n\nå¯¹äºæˆ‘çš„å¤‡ä»½éœ€æ±‚æ¥è¯´ï¼Œè¿™ä¸‰ä¸ªé¢å¤–é€‰é¡¹éƒ½ä¸éœ€è¦ï¼Œç›´æ¥åˆ›å»ºå°±è¡Œäº†\n\nåˆ›å»ºä¹‹åï¼Œåœ¨bucketé¡µé¢å¯ä»¥çœ‹åˆ°åˆšåˆšåˆ›å»ºçš„testå­˜å‚¨æ¡¶ï¼Œè¿™é‡Œä¼šç»Ÿè®¡å­˜å‚¨å®¹é‡å’Œæ–‡ä»¶æ•°é‡\n\n2.3.2 åˆ›å»ºaccessKeyaccessKeyæ˜¯ç”¨äºæ“ä½œapiçš„tokenå‡­è¯ã€‚åˆ›å»ºå®Œæ¯•åï¼Œä»–åªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼Œåç»­å°†ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚\n\nå¦‚æœä½ ä¸æƒ³åˆ›å»ºå¤ªå¤šä¸ªå¯†é’¥ï¼Œé‚£å°±æŠŠè¿™ä¸ªå¯†é’¥çš„æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œå…å¾—åˆ°æ—¶å€™ä¸çŸ¥é“æ˜¯ä»€ä¹ˆäº†ã€‚ç‚¹å‡»å³ä¸‹è§’çš„importæ–‡ä»¶å°±å¯ä»¥ä¸‹è½½ï¼Œä¼šä¸‹è½½ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«å¯†é’¥å’Œå…¶ä»–ä¸€äº›ç›¸å…³ä¿¡æ¯\n\nå› ä¸ºæˆ‘è¿™åªæ˜¯åšä¸ªæµ‹è¯•ï¼Œä¸€ä¼šå°±ä¼šæŠŠè¿™ä¸ªminioçš„dockeråˆ é™¤ï¼Œæ‰€ä»¥å±•ç¤ºå¯†é’¥æ— æ‰€è°“ã€‚å¦‚æœä½ æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œè¯·ä¸€å®šä¸è¦æš´éœ²ä½ çš„å¯†é’¥ç»™ä»»ä½•äººã€‚\n&#123;    &quot;url&quot;: &quot;http://å…¬ç½‘IP:19001/api/v1/service-account-credentials&quot;,    &quot;accessKey&quot;: &quot;aXpBxrUceV30Id6gOouG&quot;,    &quot;secretKey&quot;: &quot;dIWl9IFL05UtaI08PZfPXE66zPGu2zWrGFfSTaUm&quot;,    &quot;api&quot;: &quot;s3v4&quot;,    &quot;path&quot;: &quot;auto&quot;&#125;\n\n\nå¯†é’¥åˆ›å»ºå®Œæ¯•ï¼Œå°±èƒ½åœ¨åˆ—è¡¨çœ‹åˆ°å®ƒã€‚\n\n3.rcloneå¤‡ä»½rcloneæ˜¯ä¸€ä¸ªå…¨å¹³å°çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå…¶å¯ä»¥ç”¨äºå¤šç§äº‘ç«¯&#x2F;æœ¬åœ°å­˜å‚¨ä¹‹é—´çš„æ•°æ®æ‹·è´ã€åŒæ­¥ã€åŠ å¯†åŒæ­¥ç­‰åŠŸèƒ½ã€‚è¯¦è§rcloneå®˜ç½‘ï¼šrclone.org\nå› ä¸ºæˆ‘çš„ç›®æ ‡å°±æ˜¯æˆ‘çš„ä¸ƒç‰›äº‘bucketé‡Œé¢çš„å›¾åºŠæ–‡ä»¶å¤‡ä»½åˆ°æœ¬åœ°ï¼Œrcloneç»å¯¹æ˜¯ä¸äºŒä¹‹é€‰ã€‚\n3.1 è¿›å…¥dockerå®¹å™¨å†…ç»ˆç«¯ä½ å¯ä»¥é€‰æ‹©åœ¨å®¿ä¸»æœºä¸Šå®‰è£…rcloneï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç›´æ¥åœ¨minioçš„å®¹å™¨å†…å®‰è£…rcloneã€‚\nå‰æ’æé†’ï¼šéƒ¨åˆ†naså“ç‰Œçš„ç³»ç»Ÿï¼ˆæ¯”å¦‚ç¾¤æ™–ï¼‰å·²ç»æä¾›äº†æ‰§è¡Œå®šæ—¶è„šæœ¬çš„åŠŸèƒ½ï¼Œè¿™ç§æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å®šæ—¶ä»»åŠ¡æ¥æ‰§è¡Œrclone syncå³å¯ï¼Œå³ç›´æ¥åœ¨nasé‡Œé¢å®‰è£…rcloneå’Œä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œä¸è¦åœ¨minioçš„dockeré‡Œé¢å®‰è£…rcloneã€‚\nå¦‚ä½ é€‰æ‹©äº†åœ¨å®¿ä¸»æœºä¸Šå®‰è£…rcloneï¼Œåˆ™å¯ä»¥ç›´æ¥è·³è¿‡æœ¬3.1æ­¥éª¤ï¼Œé˜…è¯»3.2åŠåç»­æ­¥éª¤ã€‚\ndockerç‰¹æƒæ¨¡å¼æ³¨æ„ï¼Œå¦‚æœåœ¨minioçš„å®¹å™¨å†…å®‰è£…rcloneï¼Œé‚£ä¹ˆminioå®¹å™¨è¢«åˆ é™¤åï¼Œrcloneå’Œå®ƒçš„é…ç½®æ–‡ä»¶è‡ªç„¶ä¹Ÿä¸åœ¨äº†ã€‚\nä¸”å¦‚æœéœ€è¦ç”¨minioçš„å®¹å™¨è¿›è¡Œcrontabå®šæ—¶ä»»åŠ¡ï¼Œåˆ™å¿…é¡»ç”¨ç‰¹æƒæ¨¡å¼å®‰è£…minioçš„dockerï¼Œåœ¨minioçš„dockeråˆ›å»ºå‘½ä»¤é‡Œé¢åŠ å¦‚ä¸‹è¿™æ¡ï¼Œè®¾ç½®ç‰¹æƒæ¨¡å¼ï¼ˆä¸éœ€è¦å®šæ—¶ä»»åŠ¡å¯ä»¥ä¸è®¾ç½®ï¼‰ã€‚\n--privileged\n\nåœ¨ç»¿è”nasçš„dockerç®¡ç†ç•Œé¢ï¼Œåˆ›å»ºdockerçš„æ—¶å€™ç»™å®šæ‰€æœ‰æƒé™ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚ï¼ˆå› ä¸ºæˆ‘ä¸å¤ªäº†è§£è¿™é‡Œå…·ä½“æ¯ä¸ªæƒé™çš„ä½œç”¨ï¼Œå¹²è„†å…¨ç»™äº†ï¼‰\n\n\nsshè¿æ¥å®¿ä¸»è®¾å¤‡ä¸åŒnasæœºå‹è¿›å…¥sshçš„æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œè¯·å‚è€ƒä½ çš„nasæˆ–è®¾å¤‡å“ç‰Œæœç´¢å¯¹åº”ç±»å‹æ•™ç¨‹ã€‚\nè¿æ¥åˆ°å®¿ä¸»è®¾å¤‡çš„sshåï¼Œå‚è€ƒï¼šä»¥æŒ‡å®šç”¨æˆ·å¯åŠ¨å’Œè¿›å…¥dockerå®¹å™¨ - langyong - åšå®¢å›­ ä¸€æ–‡ï¼Œä½¿ç”¨å¦‚ä¸‹dockerå‘½ä»¤è¿›å…¥minioçš„å®¹å™¨ç»ˆç«¯ä¸­ã€‚\ndocker exec -it -u ç”¨æˆ·å å®¹å™¨å /bin/bash# ç¤ºä¾‹å¦‚ä¸‹docker exec -it -u root minio /bin/bash\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç»¿è”ã€æç©ºé—´è¿™ç±»ä¸å¤ªæ–¹ä¾¿è¿›å…¥sshçš„nasï¼Œå¯ä»¥åœ¨nasçš„dockerç®¡ç†é¡µé‡Œé¢æ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€‰æ‹©/bin/bashåç‚¹å‡»é“¾æ¥å³å¯è¿›å…¥å®¹å™¨å†…ç»ˆç«¯ã€‚\n\n3.2 ä¸‹è½½å®‰è£…rcloneè¿›å…¥ç»ˆç«¯åï¼Œé»˜è®¤æ‰€åœ¨è·¯å¾„æ˜¯dockerå®¹å™¨çš„å·¥ä½œè·¯å¾„/opt/bitnami/minio-clientã€‚\nä¸ºäº†é¿å…å½±å“å®¹å™¨è¿è¡Œï¼Œæˆ‘ä»¬ä¸è¦åœ¨å·¥ä½œè·¯å¾„é‡Œé¢åšæ“ä½œï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„rcloneæ–‡ä»¶å¤¹ï¼Œè¿›å…¥rootç”¨æˆ·çš„å®¶ç›®å½•è¿›è¡Œæ“ä½œã€‚\nå¦‚æœä½ æ˜¯åœ¨å®¿ä¸»æœºä¸Šæ“ä½œï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œä¸ºrcloneå•ç‹¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¥å­˜æ”¾å®ƒçš„è½¯ä»¶åŒ…ã€é…ç½®æ–‡ä»¶ã€æ‰§è¡Œæ—¥å¿—ã€‚\nmkdir /root/rclonecd /root/rclone\n\n\nå¦‚æœæ˜¯dockerå†…æ“ä½œï¼Œä½ å¯ä»¥åœ¨åˆ›å»ºminioå®¹å™¨çš„æ—¶å€™ï¼Œå°±æŠŠ/root/rcloneè·¯å¾„ç»™æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šï¼Œæ–¹ä¾¿åç»­æŸ¥çœ‹rcloneå¤‡ä»½çš„æ—¥å¿—ã€‚\n\nä¸‹è½½å®‰è£…rcloneçš„å‘½ä»¤å¦‚ä¸‹\n# ä¸‹è½½å¹¶è§£å‹curl -O https://downloads.rclone.org/rclone-current-linux-amd64.zipunzip rclone-current-linux-amd64.zip# ç§»åŠ¨å¯æ‰§è¡Œæ–‡ä»¶åˆ°ç³»ç»Ÿæ–‡ä»¶ç›®å½•ä¸­cd rclone-*-linux-amd64sudo cp rclone /usr/bin/sudo chown root:root /usr/bin/rclonesudo chmod 755 /usr/bin/rclone\n\nå¦‚æœæ˜¯åœ¨minioçš„dockerå†…å®‰è£…ï¼Œæ˜¯æ²¡æœ‰unzipå‘½ä»¤çš„ï¼Œéœ€è¦å®‰è£…ä¸€ä¸‹ã€‚minioçš„dockerå†…ä¹Ÿæ²¡æœ‰sudoï¼Œå°†ä¸Šè¿°rcloneå®‰è£…å‘½ä»¤ä¸­çš„sudoå»æ‰å°±å¯ä»¥äº†ã€‚\napt-get update &amp;&amp; apt-get install -y unzip\n\nå®Œæˆå®‰è£…å‘½ä»¤åï¼Œæ‰§è¡Œä¸€ä¸‹rcloneï¼Œå‡ºç°rcloneå‘½ä»¤çš„ä½¿ç”¨æç¤ºï¼Œé‚£å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼\nroot@878a0dd03ec4:/root/rclone/rclone-v1.65.0-linux-amd64# rcloneUsage:  rclone [flags]  rclone [command]  ...\n\n3.3 rcloneå¯¹è±¡å­˜å‚¨é…ç½®rcloneçš„å®˜ç½‘ä¸Šæœ‰ä¸åŒäº‘ç«¯å­˜å‚¨åè®®å’Œä¸åŒS3æœåŠ¡å•†çš„é…ç½®æ•™ç¨‹ï¼Œè·Ÿç€å®˜æ–¹çš„æ¥å°±å¯ä»¥äº†ã€‚\næ‰§è¡Œrclone configå‘½ä»¤ï¼Œå·¥å…·ä¼šè‡ªåŠ¨åœ¨/.config/rclone/rclone.confä¸‹åˆ›å»ºä¸€ä¸ªconfigæ–‡ä»¶ï¼Œä½ å¯ä»¥æ ¹æ®å®˜æ–¹çš„å‘å¯¼ï¼Œåœ¨æ­¤å¤„æ·»åŠ æ–°çš„remote;\nroot@878a0dd03ec4:/root/rclone/rclone-v1.65.0-linux-amd64# rclone config2023/12/14 04:38:44 NOTICE: Config file &quot;/.config/rclone/rclone.conf&quot; not found - using defaultsNo remotes found, make a new one?n) New remotes) Set configuration passwordq) Quit confign/s/q&gt; q\n\nä¸‹é¢ç»™å‡ºminioå’Œä¸ƒç‰›äº‘çš„é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹ä¸ºä½ çš„é…ç½®ï¼Œç„¶åå†™å…¥/.config/rclone/rclone.confå³å¯ã€‚\n\nrclone.org&#x2F;s3&#x2F;#minio\nrclone.org&#x2F;s3&#x2F;#qiniu\n\nå…¶ä¸­minioçš„regionåœ¨minioçš„æ§åˆ¶å°é‡Œé¢å¯ä»¥ä¿®æ”¹ï¼Œå¦‚æœä½ æ²¡æœ‰ä¿®æ”¹è¿‡ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯us-east-1ã€‚å› ä¸ºrcloneæ˜¯ç›´æ¥åœ¨minioçš„dockeré‡Œé¢æ‰§è¡Œçš„ï¼Œæ‰€ä»¥endpointåªéœ€è¦å†™æˆ127.0.0.1å’Œminioçš„apiç«¯å£9000å°±å¯ä»¥äº†ã€‚\nå¦‚æœä½ çš„minioåœ¨å…¬ç½‘æˆ–è€…å…¶ä»–è®¾å¤‡ä¸Šï¼Œè¯·ä¿®æ”¹å¯¹åº”çš„IPåœ°å€å’Œç«¯å£ã€‚\nä¸ƒç‰›äº‘çš„regionå’Œendpointåœ¨ä¸ƒç‰›äº‘bucketé¡µé¢æ‰¾åˆ°S3åŸŸåå°±å¯ä»¥çœ‹åˆ°ã€‚\n\n\nè¯·æ³¨æ„ï¼Œä¸ƒç‰›äº‘&#x2F;é˜¿é‡Œäº‘è¿™ç±»å­˜å‚¨æœåŠ¡å•†ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªbucketï¼Œä¸”ä»–ä»¬çš„åœ°åŸŸä¸ä¸€æ ·ï¼Œåˆ™éœ€è¦æ–°å¢å¯¹åº”åœ°åŸŸçš„é…ç½®é¡¹ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹[]é‡Œé¢çš„é…ç½®åè¿›è¡ŒåŒºåˆ†ã€‚\n\n[minio]type = s3provider = Minioenv_auth = falseaccess_key_id = æ§åˆ¶å°è·å–çš„key_idsecret_access_key = æ§åˆ¶å°è·å–çš„secret_keyregion = us-east-1endpoint = http://127.0.0.1:9000location_constraint =server_side_encryption =[qiniu]type = s3provider = Qiniuaccess_key_id = ä¸ƒç‰›äº‘æ§åˆ¶å°è·å–key_idsecret_access_key = ä¸ƒç‰›äº‘æ§åˆ¶å°è·å–secret_keyregion = cn-east-1endpoint = s3-cn-east-1.qiniucs.comlocation_constraint = cn-east-1acl = privatestorage_class = STANDARD\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£…nanoç¼–è¾‘å™¨ï¼Œç„¶åä½¿ç”¨nanoç¼–è¾‘å™¨æ‰“å¼€rcloneé…ç½®æ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚\napt-get update &amp;&amp; apt-get install -y nanonano /.config/rclone/rclone.conf\n\nlinuxä¸‹çš„ç²˜è´´å‘½ä»¤æ˜¯CTRL+SHIFT+Væˆ–CTRL+INSERTï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°ä¿®æ”¹äº†é…ç½®æ–‡ä»¶åï¼Œé€šè¿‡nanoç¼–è¾‘å™¨ï¼Œç›´æ¥ç²˜è´´åˆ°dockerå®¹å™¨å†…ã€‚ç¼–è¾‘å®Œæ¯•åï¼Œä½¿ç”¨CTRL+Xé€€å‡ºnanoçš„ç¼–è¾‘æ¨¡å¼ï¼Œå¹¶æŒ‰Yç¡®è®¤ä¿å­˜ï¼Œéšåç›´æ¥å›è½¦ï¼Œå³å®Œæˆç¼–è¾‘ã€‚\n\n\nè¿™ä¸ªé…ç½®æ–‡ä»¶å»ºè®®å¤‡ä»½ä¸€ä¸ªï¼Œå…å¾—æ¯æ¬¡éƒ½å¾—é‡æ–°å¼„ã€‚\n3.4 rcloneåŸºæœ¬å‘½ä»¤rclone copyæ‹·è´å‘½ä»¤å¦‚ä¸‹ï¼Œé…ç½®åç§°æ˜¯åœ¨configæ–‡ä»¶ä¸­[]é‡Œé¢çš„æ–‡å­—ï¼Œæ¡¶åå°±æ˜¯ä½ çš„S3æœåŠ¡é‡Œé¢çš„å¯¹è±¡å­˜å‚¨æ¡¶ï¼Œè¿˜å¯ä»¥åœ¨æ¡¶ååé¢ç”¨/æ¥è¿½åŠ æŒ‡å®šä¸Šä¼ çš„è·¯å¾„ã€‚\nrclone copy æœ¬åœ°æ–‡ä»¶è·¯å¾„ é…ç½®åç§°:æ¡¶årclone copy æœ¬åœ°æ–‡ä»¶è·¯å¾„ é…ç½®åç§°:æ¡¶å/æ¡¶å†…ç›®å½•\n\nè¿™é‡Œæˆ‘åœ¨dockerå†…åˆ›å»ºäº†ä¸€ä¸ªtest.txtæ–‡ä»¶ï¼Œå°è¯•å°†å…¶æ‹·è´åˆ°minioé‡Œé¢ã€‚\ntouch test.txtrclone copy ./test.txt minio:1panel-bak\n\nå‘½ä»¤æ²¡æœ‰é”™è¯¯è¾“å‡ºï¼Œå³æ‹·è´æˆåŠŸï¼\nroot@878a0dd03ec4:/root/rclone# touch test.txtroot@878a0dd03ec4:/root/rclone# rclone copy ./test.txt minio:1panel-bakroot@878a0dd03ec4:/root/rclone# \n\n\nå°è¯•åœ¨æ‹·è´çš„æ—¶å€™æŒ‡å®šè¿œç«¯ä»“åº“å†…çš„è·¯å¾„\nrclone copy ./test.txt minio:qiniu-muxue-sy/test\n\næˆåŠŸæŒ‡å®šï¼Œæ–‡ä»¶è¢«ä¸Šä¼ åˆ°äº†testæ–‡ä»¶å¤¹é‡Œé¢ã€‚\n\nrclone syncå¤‡ä»½å‘½ä»¤å¦‚ä¸‹ï¼Œå¯ä»¥åœ¨ä»»æ„ç›®çš„åœ°ï¼ˆæœ¬åœ°-è¿œç«¯ï¼Œè¿œç«¯-æœ¬åœ°ï¼Œè¿œç«¯-è¿œç«¯ï¼‰é‡Œé¢æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå·¦ä¾§æ˜¯æºè·¯å¾„ï¼Œå³ä¾§æ˜¯ç›®æ ‡ã€‚\nrclone sync æœ¬åœ°æºæ–‡ä»¶è·¯å¾„  ç›®çš„åœ°é…ç½®åç§°:æ¡¶å rclone sync æºé…ç½®åç§°:æ¡¶å ç›®çš„åœ°é…ç½®åç§°:æ¡¶årclone sync æºé…ç½®åç§°:æ¡¶å ç›®çš„åœ°çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„\n\nrclone syncæœ‰ä¸¤ä¸ªå¸¸ç”¨çš„é€‰é¡¹ï¼Œåˆšå¼€å§‹ä½¿ç”¨çš„æ—¶å€™ï¼Œå»ºè®®å¸¦ä¸Š --dry-run å‘½ä»¤æ¥ç¡®è®¤è‡ªå·±çš„é…ç½®æ²¡æœ‰é—®é¢˜\n\n-P æ˜¾ç¤ºè¯¦ç»†åŒæ­¥è¿›åº¦æ¡\n--dry-run ç”¨ä½œå‘½ä»¤æµ‹è¯•ï¼Œä¸ä¼šçœŸæ­£çš„æ‰§è¡ŒåŒæ­¥\n\næŒ‡å®š-På‘½ä»¤åçš„è¿›åº¦è¾“å‡ºå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°å®æ—¶ç½‘é€Ÿå’Œæ–‡ä»¶æ•°é‡&#x2F;å¤§å°ã€‚\n\nç›®å‰å‘ç°çš„é—®é¢˜æ˜¯minioæ˜¾ç¤ºçš„æ–‡ä»¶æ€»é‡å’Œæ•°æ®å­˜å‚¨é‡ä¼šæœ‰ä¸€å®šæ»åï¼Œåˆšå¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯rcloneæ²¡æœ‰è·‘å®Œå‘¢ï¼Œsyncå®Œæ¯•è¿‡äº†å‡ åˆ†é’Ÿminioé‡Œé¢æ‰åˆ·å‡ºæ­£ç¡®çš„æ–‡ä»¶æ•°é‡æ¥ã€‚\n3.5 cronå®šæ—¶åŒæ­¥å‰æ’æé†’ï¼šéƒ¨åˆ†naså“ç‰Œçš„ç³»ç»Ÿï¼ˆæ¯”å¦‚ç¾¤æ™–ï¼‰å·²ç»æä¾›äº†æ‰§è¡Œå®šæ—¶è„šæœ¬çš„åŠŸèƒ½ï¼Œè¿™ç§æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å®šæ—¶ä»»åŠ¡æ¥æ‰§è¡Œrclone syncå³å¯ï¼Œæ— åºå®‰è£…å…¶ä»–æœåŠ¡ã€‚å³ç›´æ¥åœ¨nasé‡Œé¢å®‰è£…rcloneå’Œä½¿ç”¨å®šæ—¶ä»»åŠ¡ï¼Œä¸è¦åœ¨minioçš„dockeré‡Œé¢å®‰è£…rcloneå’Œcronã€‚\n\nç¾¤æ™–å®˜ç½‘å…³äºå®šæ—¶ä»»åŠ¡çš„è¯´æ˜ï¼š https://kb.synology.cn/zh-cn/DSM/help/DSM/AdminCenter/system_taskscheduler?version=6\nç»¿è”nasçš„ç¯å¢ƒä¸­å·²æœ‰crontabï¼Œä½†æˆ‘æ²¡æœ‰è¯•è¿‡ä½¿ç”¨å®ƒã€‚è€ƒè™‘åˆ°ç»¿è”è¿™ä¸ªnasçš„ç³»ç»Ÿè¿˜æ˜¯ä¸€ç‚¹éƒ½ä¸ç¨³å®šï¼Œè¿˜æ˜¯åˆ«åŠ¨å®ƒçš„ç³»ç»Ÿé‡Œé¢çš„ä¸œè¥¿äº†ï¼Œä¸çŸ¥é“ç»¿è”å®˜æ–¹æœ‰æ²¡æœ‰å¯èƒ½æŠŠå®šæ—¶ä»»åŠ¡åŠ åˆ°æ§åˆ¶é¡µé‡Œé¢å»å§ï¼ˆæˆ‘ä¼°è®¡æ˜¯æ²¡æˆï¼Œè¿™ä¸ªç³»ç»Ÿçš„é™åˆ¶å¤ªå¤šäº†ï¼‰ã€‚\n\nå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç¾¤æ™–ã€å¨è”é€šç­‰æä¾›äº†æ‰§è¡Œå®šæ—¶ä»»åŠ¡çš„åŠŸèƒ½çš„nasï¼Œè¯·åœ¨naså†…é…ç½®å¥½rcloneåï¼Œè‡ªè¡Œç™¾åº¦æ‰§è¡Œå®šæ—¶ä»»åŠ¡ç›¸å…³æ•™ç¨‹ã€‚\nminio dockerå†…å®‰è£…cronæœåŠ¡ä¸‹é¢ä»‹ç»åœ¨minioçš„dockerå†…cronæœåŠ¡çš„å®‰è£…å’Œä½¿ç”¨ã€‚\nåœ¨minioçš„dockeré‡Œé¢ç›´æ¥å®‰è£…crontabæœåŠ¡å’Œnanoæ–‡æœ¬ç¼–è¾‘å™¨\napt-get updateapt-get install -y cron nano\n\nä½†è¿™è¿˜ä¸å¤Ÿï¼ŒcronæœåŠ¡çš„è¿è¡Œè¿˜ä¾èµ–äºå…¶ä»–ç»„ä»¶ï¼Œéœ€è¦ä¸€å¹¶å®‰è£…ã€‚\napt-get install -y rsyslog  postfixservice rsyslog start\n\nå®‰è£…postfixçš„æ—¶å€™ä¼šæç¤ºè®©ä½ é€‰æ‹©é…ç½®æ–‡ä»¶ï¼Œé”®å…¥1é€‰æ‹©æ— é…ç½®å°±å¤Ÿäº†ã€‚\n\npostfixè¿˜éœ€è¦é¢å¤–é…ç½®ï¼Œå¦åˆ™å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é”™è¯¯\nDec 16 01:07:01 878a0dd03ec4 postfix/sendmail[1859]: fatal: open /etc/postfix/main.cf: No such file or directoryDec 16 01:12:02 878a0dd03ec4 postfix/postdrop[1912]: warning: unable to look up public/pickup: No such file or directory\n\né…ç½®å‘½ä»¤å¦‚ä¸‹\ntouch /etc/postfix/main.cfmkfifo /var/spool/postfix/public/pickup\ncrontabé…ç½®å®šæ—¶ä»»åŠ¡æµ‹è¯•å®‰è£…å®Œæ¯•åï¼Œä½¿ç”¨crontab -eçœ‹çœ‹æ˜¯å¦èƒ½æ‰“å¼€crontabçš„é…ç½®ç¼–è¾‘é¡µé¢ï¼Œå¦‚æœå¯ä»¥æ‰“å¼€å¦‚ä¸‹é…ç½®ç•Œé¢ï¼Œåˆ™ä»£è¡¨cronå®‰è£…æˆåŠŸã€‚\n\nè¿™ä¸ªé…ç½®æ–‡ä»¶éœ€è¦å†™å…¥çš„æ ¼å¼å¦‚ä¸‹ï¼Œä¸€è¡Œå¯¹åº”ä¸€ä¸ªé…ç½®ã€‚\näº”ä½cronè¡¨è¾¾å¼ éœ€è¦æ‰§è¡Œçš„å‘½ä»¤\n\ncronè¡¨è¾¾å¼å¯ä»¥ç”¨åœ¨çº¿å·¥å…·crontabæ‰§è¡Œæ—¶é—´è®¡ç®— - åœ¨çº¿å·¥å…·\nå…ˆç”¨å¦‚ä¸‹çš„é…ç½®æ¥æ£€æµ‹cronæœåŠ¡æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œï¼Œä»¥åŠæ˜¯å¦èƒ½æˆåŠŸè¾“å‡ºæ—¥å¿—\n*/1 * * * * echo &quot;$(date) This is a test command&quot; &gt;&gt; /root/rclone/log.txt\n\nè¯¥é…ç½®çš„å«ä¹‰æ˜¯æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡echoå‘½ä»¤ï¼Œæ‰“å°å½“å‰æ—¶é—´å’Œå¯¹åº”å†…å®¹åˆ°/root/rclone/log.txtæ–‡ä»¶ä¸­ã€‚\nä¿®æ”¹äº†é…ç½®æ–‡ä»¶åï¼Œå¯åŠ¨cronæœåŠ¡ï¼Œæµ‹è¯•æˆ‘ä»¬çš„é…ç½®æ˜¯å¦æœ‰æ•ˆï¼ŒcronæœåŠ¡æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œã€‚\nservice cron start \n\nè¯¥å‘½ä»¤æ‰§è¡Œæ•ˆæœå¦‚ä¸‹\nroot@878a0dd03ec4:/root/rclone# service cron startStarting periodic command scheduler: cron.\n\nç­‰å¾…æ•°åˆ†é’Ÿï¼Œçœ‹çœ‹cronå‘½ä»¤æ˜¯å¦æˆåŠŸè¾“å‡ºå†…å®¹åˆ°æŒ‡å®šæ–‡ä»¶é‡Œé¢äº†ï¼Œæœ‰å†…å®¹åˆ™ä»£è¡¨é…ç½®å’Œè¿è¡ŒæˆåŠŸï¼é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨cronæ‰§è¡Œçš„echoå‘½ä»¤å†…çš„dateé‡‡ç”¨äº†UTCæ—¶é—´çš„è¾“å‡ºï¼Œä½†è¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„ä½¿ç”¨ï¼Œç»™å°æ—¶åŠ 8å°±èƒ½å¾—åˆ°ä¸œå…«åŒºçš„æ—¶é—´äº†ã€‚\nroot@878a0dd03ec4:/root/rclone# cat /root/rclone/log.txtSat Dec 16 01:18:01 UTC 2023 This is a test commandSat Dec 16 01:18:01 UTC 2023 This is a test commandSat Dec 16 01:19:01 UTC 2023 This is a test commandSat Dec 16 01:19:01 UTC 2023 This is a test command\n\nåœ¨syslogé‡Œé¢ä¹Ÿèƒ½çœ‹åˆ°cronçš„æœåŠ¡æ—¥å¿—ï¼Œè¯¥æœåŠ¡æ—¥å¿—ç»„ä»¶ä¾èµ–äºå…ˆå‰å®‰è£…çš„rsyslog\ncat /var/log/syslog\n\næ–‡ä»¶/var/log/syslogå†…éƒ¨cronæ‰§è¡Œæ—¥å¿—å¦‚ä¸‹\nDec 16 01:25:01 878a0dd03ec4 CRON[2059]: (root) CMD (echo &quot;$(date) This is a test command&quot; &gt;&gt; /root/rclone/log.txt)Dec 16 01:25:01 878a0dd03ec4 CRON[2058]: (root) CMD (echo &quot;$(date) This is a test command&quot; &gt;&gt; /root/rclone/log.txt)\n\n\nè¯·æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œminioçš„dockeræ˜¯æ²¡æœ‰æ—¶åŒºé…ç½®çš„ï¼Œè¯·ä¸€å®šè¦åœ¨åˆ›å»ºdockerå®¹å™¨çš„æ—¶å€™ï¼Œä½¿ç”¨TZç¯å¢ƒå˜é‡æ¥è®¾ç½®æ—¶åŒºï¼Œå¦åˆ™crontabä¸ä¼šæ‰§è¡Œï¼åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œcronè¡¨è¾¾å¼æœ‰ä¸€ä¸ªæŒ‡å®šæ—¶é—´ï¼Œæ¯”å¦‚æ¯å‘¨ä¸€æ‰§è¡Œã€å‡ ç‚¹æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰é…ç½®æ—¶åŒºï¼Œcronæ²¡æœ‰åŠæ³•æ˜ç¡®ä½ çš„cronè¡¨è¾¾å¼åˆ°åº•åº”è¯¥ä»€ä¹ˆæ—¶å€™è·‘ï¼Œå¹²è„†å°±ä¸è·‘äº†ï¼\n\nå¦‚æœä½ çš„dockerå·²ç»åˆ›å»ºï¼Œä¸æƒ³é‡æ–°åˆ›å»ºï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è®¾ç½®æ—¶åŒºï¼Œä¿®æ”¹åé‡å¯dockerå®¹å™¨å³å¯ã€‚\nnano /etc/environment# åœ¨æ–‡ä»¶æœ«å°¾å†™å…¥å¦‚ä¸‹å†…å®¹TZ=&#x27;Asia/Shanghai&#x27;\ncrontabé…ç½®å®šæ—¶rclone syncç¡®è®¤cronæœåŠ¡å¯ç”¨ï¼Œå°±å¯ä»¥æ¥é…ç½®rclone syncçš„è‡ªåŠ¨æ‰§è¡Œå‘½ä»¤äº†ã€‚\nå¯¹äºrcloneçš„syncå¤‡ä»½è€Œè¨€ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹å³å¯ï¼›\n0 3 * * 1,5 rclone sync qiniu-e1:muxue-sy  minio:qiniu-muxue-sy &gt;&gt; /root/rclone/rclone.log 2&gt;&amp;10 2 * * 1,5 rclone sync qiniu-e2:muxue-img  minio:qiniu-muxue-img &gt;&gt; /root/rclone/rclone.log 2&gt;&amp;1\n\nè§£æå¦‚ä¸‹\n\n0 3 * * 1,5 ä»£è¡¨æ¯å‘¨ä¸€å’Œå‘¨äº”çš„å‡Œæ™¨3ç‚¹æ‰§è¡Œä¸€æ¬¡\n0 2 * * 1,5 ä»£è¡¨æ¯å‘¨ä¸€å’Œå‘¨äº”çš„å‡Œæ™¨2ç‚¹æ‰§è¡Œä¸€æ¬¡\n&gt;&gt; /root/rclone/rclone.log 2&gt;&amp;1 ä»£è¡¨å°†rcloneå‘½ä»¤çš„è¾“å‡ºç»“æœå†™å…¥åˆ° /root/rclone/rclone.log æ–‡ä»¶ä¸­ã€‚\n\nå› ä¸ºæˆ‘å¯¹å¤‡ä»½çš„é¢‘æ¬¡è¦æ±‚ä¸é«˜ï¼Œä¸€å‘¨å¤‡ä»½ä¸¤æ¬¡å°±å¤Ÿäº†ã€‚\nå†™å…¥å®Œæ¯•åï¼ŒCTRL+Xå…³é—­nanoç¼–è¾‘æ¨¡å¼ï¼ŒæŒ‰Yå’Œå›è½¦å³å®Œæˆnanoç¼–è¾‘ã€‚ç¼–è¾‘å®Œæˆåä¼šæœ‰å¦‚ä¸‹è¾“å‡ºã€‚\nroot@878a0dd03ec4:/root/rclone# crontab -eno crontab for root - using an empty onecrontab: installing new crontab\n\nåç»­crontabæ‰§è¡Œçš„å‘½ä»¤ç»“æœéƒ½ä¼šè¾“å…¥åˆ°/root/rclone/rclone.logæ—¥å¿—æ–‡ä»¶ä¸­ã€‚rcloneå‘½ä»¤åªæœ‰åœ¨å‡ºç°ERRORçš„æ—¶å€™æ‰ä¼šè¾“å‡ºã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶é‡Œé¢ä»€ä¹ˆéƒ½ä¹ˆæœ‰ï¼Œå°±ä»£è¡¨è¿è¡Œæ²¡æœ‰å‡ºé”™ï¼\né…ç½®å¥½äº†ä¹‹åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é‡æ–°å¯åŠ¨cronæœåŠ¡\nservice cron restart\n\nç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹cronæœåŠ¡çŠ¶æ€\nroot@878a0dd03ec4:/root/rclone# service cron statuscron is running.\n\næ³¨æ„ï¼šä½¿ç”¨dockerå†…å®‰è£…çš„cronå¹¶æ²¡æœ‰å¼€æœºè‡ªå¯åŠŸèƒ½ï¼Œå¦‚æœä½ é‡å¯äº†dockeræ¨¡å—æˆ–é‡å¯äº†å®¿ä¸»æœºï¼Œéœ€è¦é‡æ–°è¿›å…¥minioçš„dockerå†…bashæ¥é‡å¯cronæœåŠ¡ã€‚\nä¼˜åŒ–cronæ—¥å¿—ä¸ºäº†è®©æ—¥å¿—æ›´åŠ åˆç†ï¼Œå¯ä»¥åœ¨æ‰§è¡Œrcloneå‘½ä»¤ä¹‹å‰ï¼Œæ‰“å°å½“å‰æ—¶é—´ï¼Œè¿™æ ·å¯ä»¥çŸ¥é“crontabåˆ°åº•æœ‰æ²¡æœ‰æ­£å¸¸æ‰§è¡Œå®šæ—¶ä»»åŠ¡ã€‚\næ‰“å°æ—¶é—´çš„åŸºæœ¬å‘½ä»¤å¦‚ä¸‹ï¼Œechoå‘½ä»¤ä¼šå°†å½“å‰æ—¶é—´å’Œç›¸å…³çš„è¯´æ˜ä¿¡æ¯å†™å…¥test.txtæ–‡ä»¶ä¸­\necho &quot;$(date) This is a test command&quot; &gt;&gt; test.txt\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œæ‰“å°äº†æ—¶é—´å’Œå¯¹åº”çš„æ—¥å¿—ä¿¡æ¯\nroot@878a0dd03ec4:/root/rclone# echo &quot;$(date) This is a test command&quot; &gt;&gt; test.txtroot@878a0dd03ec4:/root/rclone# cat test.txtSat Dec 16 09:36:06 CST 2023 This is a test command\n\n\n\nå†æ¬¡æé†’ï¼Œminioçš„dockerå†…å¿…é¡»æŒ‡å®šTZç¯å¢ƒå˜é‡ï¼Œå¦åˆ™crontabä¸ä¼šæ‰§è¡Œï¼ä¸”dateå‘½ä»¤æ—¶åŒºå’Œä¸œå…«åŒºä¸ç¬¦ã€‚\n\nechoæ‰“å°çš„æ—¶å€™ï¼Œå¯ä»¥ä¸´æ—¶æŒ‡å®šTZç¯å¢ƒå˜é‡æ¥æ‰“å°ä¸åŒæ—¶åŒºçš„dateï¼›\necho &quot;$(TZ=&#x27;Asia/Shanghai&#x27; date) è¿™æ˜¯ä¸œå…«åŒº&quot; &gt;&gt; test.txt\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå› ä¸ºæˆ‘çš„dockerå†…å·²ç»è®¾ç½®äº†TZç¯å¢ƒå˜é‡ä¸ºä¸œå…«åŒºï¼Œæ‰€ä»¥ä¸åŠ è¿™ä¸ªTZä¹Ÿæ˜¯æ‰“å°çš„ä¸œå…«åŒºçš„æ—¶é—´ã€‚\nroot@878a0dd03ec4:/root/rclone# echo &quot;$(TZ=&#x27;Asia/Shanghai&#x27; date) è¿™æ˜¯ä¸œå…«åŒº&quot; &gt;&gt; test.txtroot@878a0dd03ec4:/root/rclone# cat test.txtSat Dec 16 09:36:06 CST 2023 This is a test commandSat Dec 16 09:37:39 CST 2023 è¿™æ˜¯ä¸œå…«åŒº\n\nä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨cronå‘½ä»¤æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒä¾æ—§ä¼šæ‰“å°UTCæ—¶é—´ï¼Œå‰æ–‡å·²ç»æåˆ°è¿‡äº†ã€‚\nå°†åŸæœ¬çš„crontabå‘½ä»¤æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼ˆcrontab -eç¼–è¾‘é…ç½®æ–‡ä»¶ï¼‰ï¼Œä½¿ç”¨&amp;&amp;æ¥é“¾æ¥echoå’Œrcloneå‘½ä»¤ï¼Œè¿™æ ·åœ¨æ¯æ¬¡æ‰§è¡Œrcloneä¹‹å‰éƒ½ä¼šæœ‰ä¸€ä¸ªå½“å‰æ—¶é—´å’Œsyncçš„æ˜¯ä»€ä¹ˆå†…å®¹çš„çš„è¾“å‡ºï¼Œèƒ½è®©æˆ‘ä»¬çŸ¥é“crontabæ˜¯å¦æ­£å¸¸æ‰§è¡Œã€‚\n0 3 * * 1,5 echo &quot;$(TZ=&#x27;Asia/Shanghai&#x27; date) sync muxue-sy&quot; &gt;&gt; /root/rclone/rclone.log &amp;&amp; rclone sync qiniu-e1:muxue-sy  minio:qiniu-muxue-sy &gt;&gt; /root/rclone/rclone.log 2&gt;&amp;10 2 * * 1,5 echo &quot;$(TZ=&#x27;Asia/Shanghai&#x27; date) sync muxue-img&quot; &gt;&gt; /root/rclone/rclone.log &amp;&amp; rclone sync qiniu-e2:muxue-img  minio:qiniu-muxue-img &gt;&gt; /root/rclone/rclone.log 2&gt;&amp;1\n\nä½ å¯ä»¥ä¿®æ”¹cronè¡¨è¾¾å¼ä¸º*/1 * * * *ï¼Œè®©crontabè¡¨è¾¾å¼ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œç¡®è®¤ä¸€ä¸‹è¾“å‡ºæ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠrcloneå‘½ä»¤æ˜¯å¦æ­£å¸¸æ‰§è¡Œã€‚\n*/1 * * * * echo &quot;$(date) sync muxue-img&quot; &gt;&gt; /root/rclone/rclone.log &amp;&amp; rclone sync qiniu-e2:muxue-img  minio:qiniu-muxue-img &gt;&gt; /root/rclone/rclone.log 2&gt;&amp;1\n\næˆ‘çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œrclone syncæˆåŠŸè¢«cronæ‰§è¡Œï¼ˆè¿™ä¸ªERRORæ˜¯å› ä¸ºæˆ‘çš„bucketé‡Œé¢æœ‰ä¸ªæ— æ•ˆçš„æ–‡ä»¶ï¼Œæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥ä¸ä¼šæœ‰ERRORï¼‰\nSat Dec 16 01:45:01 UTC 2023 sync muxue-img2023/12/16 01:45:02 ERROR : : Entry doesn&#x27;t belong in directory &quot;&quot; (same as directory) - ignoring\n\næµ‹è¯•ç»“æŸåï¼Œè®°å¾—è¿˜åŸé…ç½®é¡¹ã€‚\næ¯æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéƒ½éœ€è¦é‡å¯cronæœåŠ¡ï¼\nroot@878a0dd03ec4:/root/rclone# service cron restartRestarting periodic command scheduler: cronStopping periodic command scheduler: cron.Starting periodic command scheduler: cron.\n\ncentos8å®‰è£…cronåœ¨centos8ä¸­å®‰è£…cronçš„å‘½ä»¤ä¸åŒ\nyum install -y vixie-cron crontabs\n\nå¯åŠ¨crontabçš„ç›¸å…³å‘½ä»¤å¦‚ä¸‹\nsystemctl start crond # å¯åŠ¨cronæœåŠ¡systemctl enable crond # è®¾ç½®å¼€æœºè‡ªå¯systemctl status crond # cronæœåŠ¡çŠ¶æ€systemctl restart crond # é‡å¯cron\n\ncroné…ç½®çš„å…¶ä½™æ“ä½œå’Œä¸Šæ–‡ç›¸åŒï¼Œéƒ½æ˜¯ç”¨crontab -eç¼–è¾‘é…ç½®æ–‡ä»¶ã€‚\nå› ä¸ºæˆ‘è¿™ä¸ªæ˜¯ä¸€ä¸ªäº‘æœåŠ¡å™¨çš„å®Œæ•´centosç³»ç»Ÿï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦å®‰è£…rsyslog postfix è¿™ä¸¤ä¸ªåŒ…ã€‚åœ¨dockeré‡Œé¢å®‰è£…çš„æ—¶å€™æ‰éœ€è¦ï¼›\nThe endæœ¬æ–‡çš„æ•™ç¨‹ç»“æŸï¼Œæœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºã€‚\nå› ä¸ºrcloneå¯ä»¥åœ¨windowsä¸»æœºä¸Šè¿è¡Œï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨rclone syncå‘½ä»¤æŠŠS3é‡Œé¢çš„æ–‡ä»¶ä¸‹è½½åˆ°ä¸»æœºä¸Šæ¥å¤‡ä»½ï¼Œè¿™æ ·å°±ä¸éœ€è¦ç”¨äº‘æœåŠ¡å™¨æˆ–è€…nasäº†ã€‚\næ•°æ®æ— ä»·ï¼Œå¤šä¸€ä»½å¤‡ä»½ï¼Œå¤šä¸€ä»½å®‰å¿ƒï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["docker"]},{"title":"ã€Artalkã€‘å¯ä¿¡åŸŸåæœªé…ç½®å¯¼è‡´çš„è·¨åŸŸè®¿é—®é—®é¢˜","url":"/posts/1277415323/","content":"ä»Šå¤©æŠ˜è…¾haloçš„æ—¶å€™ï¼Œå‘ç°artalkå‡ºç°è·¨åŸŸè®¿é—®æŠ¥é”™ï¼Œå†…å®¹å¦‚ä¸‹ã€‚\nAccess to fetch at &#x27;https://artk.musnow.top/api/stat&#x27; from origin &#x27;https://halo.musnow.top&#x27; has been blocked by CORS policy: The &#x27;Access-Control-Allow-Origin&#x27; header contains multiple values &#x27;, https://halo.musnow.top&#x27;, but only one is allowed. Have the server send the header with a valid value, or, if an opaque response serves your needs, set the request&#x27;s mode to &#x27;no-cors&#x27; to fetch the resource with CORS disabled.\n\nå°è¯•åœ¨nginxé‡Œé¢åŠ äº†ä¸€ä¸ªè·¨åŸŸè®¿é—®å¤´ï¼Œä¾æ—§æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜\nadd_header Access-Control-Allow-Origin &#x27;https://halo.musnow.top&#x27; always;\n\nåæ¥å’¨è¯¢å…¶ä»–è€å“¥æ‰çŸ¥é“ï¼Œè¿™æ˜¯artalkå†…éƒ¨å¯ä¿¡åŸŸåé…ç½®çš„é—®é¢˜ï¼Œä¸éœ€è¦ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ã€‚(è®°å¾—æŠŠä¸Šæ–¹çš„nginxé…ç½®åˆ æ‰)\næˆ‘åªæ·»åŠ äº†ç«™ç‚¹çš„å¯ä¿¡åŸŸåï¼Œartalkç³»ç»Ÿè®¾ç½®é‡Œé¢è¿˜æœ‰ä¸€ä¸ªå¯ä¿¡åŸŸåé…ç½®\n\nè®¾ç½®äº†ä¹‹åéœ€è¦é‡å¯artalkå®¹å™¨ï¼Œæ‰èƒ½è®©ä¿®æ”¹ç”Ÿæ•ˆ\ndocker restart artalk-go\n\nç°åœ¨å°±OKäº†\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["åšå®¢","Docker"]},{"title":"ã€Dockerã€‘giteaçš„sshå®¹å™¨ç›´é€š","url":"/posts/1063684344/","content":"1.è·Ÿç€æ–‡æ¡£èµ°giteaçš„å®‰è£…æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä½¿ç”¨å®˜æ–¹æ–‡æ¡£ä¸­çš„docker-composeæ–‡ä»¶å³å¯ã€‚å¦‚æœæƒ³å®ç°sshå®¹å™¨ç›´é€šï¼Œéœ€è¦å¯¹è¿™ä¸ªdocker-composeæ–‡ä»¶åšä¸€å®šä¿®æ”¹ã€‚\n\nå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…dockerï¼Œå‚è€ƒæœ¬ç«™æ•™ç¨‹ linuxå®‰è£…dockerï¼›\n\ngiteaçš„å®˜æ–¹æ–‡æ¡£ä¸Šæœ‰å…³äºdockerå®¹å™¨sshç›´é€šçš„æ•™ç¨‹ï¼Œä½†æ˜¯å†™çš„ä¸å¤Ÿæ¸…æ™°ï¼Œæœ‰äº›é—®é¢˜æˆ‘æ²¡æœ‰ææ‡‚ã€‚æœ¬æ–‡åŸºäºæˆ‘çš„æŠ˜è…¾è®°å½•å’Œdockerå®‰è£…çš„gitea 1.21.4æ–‡æ¡£\nä½¿ç”¨ Docker å®‰è£… | Gitea Documentation\n\né¦–å…ˆæ˜¯è·Ÿç€æ–‡ç« é‡Œé¢çš„æ­¥éª¤åšï¼Œå…ˆåˆ›å»ºä¸€ä¸ªgitå­ç”¨æˆ·ã€‚wslä¸­åˆ›å»ºå­ç”¨æˆ·çš„å‘½ä»¤å‚è€ƒæœ¬ç«™åšå®¢ï¼ˆä½¿ç”¨adduserå‘½ä»¤ï¼‰ï¼Œæ³¨æ„åˆ›å»ºçš„gitç”¨æˆ·çš„uidå’Œgidæ˜¯1001ï¼Œdocker-composeä¸­çš„ç¯å¢ƒå˜é‡éœ€è¦å¯¹åº”ä¿®æ”¹ã€‚\nenvironment:     - USER_UID=1001     - USER_GID=1001\n\nè¿˜éœ€è¦æ–°å¢ä¸€ä¸ªè·¯å¾„æ˜ å°„\n- /home/git/.ssh/:/data/git/.ssh\n\n\næ³¨æ„ï¼šä¸ºäº†é¿å…æ–‡ä»¶è¯»å†™æƒé™é—®é¢˜ï¼Œæˆ‘å»ºè®®åœ¨åˆ›å»ºgitå­ç”¨æˆ·åï¼Œåœ¨è¯¥å­ç”¨æˆ·ä¸­æ“ä½œdocker-composeå’Œæ–°å»ºgiteaçš„æ˜ å°„æ–‡ä»¶å¤¹ï¼Œè¿™æ ·èƒ½ä¿è¯1001ç”¨æˆ·å’Œgiteaå®¹å™¨ä¸€å®šèƒ½è®¿é—®åˆ°æ–‡ä»¶å¤¹ä¸”å…·æœ‰æƒé™ã€‚\n\nåœ¨gitç”¨æˆ·ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚å‡ºç°çš„æç¤ºæ¡†å…¨éƒ¨å›è½¦å³å¯ã€‚\nsudo -u git ssh-keygen -t rsa -b 4096 -C &quot;Gitea Host Key&quot;\n\néšåæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå³æŠŠ/home/git/.ssh/id_rsa.pubå†™å…¥/home/git/.ssh/authorized_keysæ–‡ä»¶ã€‚æ‰§è¡Œå®Œæ¯•åè¯·ä¸è¦å†æ‰‹åŠ¨ä¿®æ”¹authorized_keysæ–‡ä»¶ã€‚\necho &quot;$(cat /home/git/.ssh/id_rsa.pub)&quot; &gt;&gt; /home/git/.ssh/authorized_keys\n\nè¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªè„šæœ¬æ¥æ‰§è¡Œsshä¿¡æ¯è½¬å‘\nsudo vim /usr/local/bin/gitea\n\nå†™å…¥å¦‚ä¸‹å†…å®¹ï¼Œå¯ä»¥é€šè¿‡CTRL+SHIFT+Vç›´æ¥ç²˜è´´ã€‚è¿™é‡Œå‡è®¾ä½ å°†giteaå®¹å™¨çš„22ç«¯å£è½¬å‘åˆ°å®¿ä¸»æœºçš„2222ç«¯å£ï¼ˆå¦‚æœä½ çš„å®¿ä¸»æœºæ˜ å°„ç«¯å£ä¸åŒï¼Œå¯ä»¥ä¿®æ”¹è„šæœ¬ä¸­çš„ç«¯å£å·ï¼‰\nssh -p 2222 -o StrictHostKeyChecking=no git@127.0.0.1 &quot;SSH_ORIGINAL_COMMAND=\\&quot;$SSH_ORIGINAL_COMMAND\\&quot; $0 $@&quot;\n\nå› ä¸ºsshå®¹å™¨ç›´é€šéƒ½æ˜¯æœ¬æœºå¤„ç†çš„æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨docker-composeä¸­ç«¯å£æ˜ å°„çš„æ—¶å€™é™åˆ¶æ¥æºIPåœ°å€ä¸ºæœ¬åœ°å›ç¯åœ°å€ï¼Œè¿™æ ·å°±èƒ½ä¿è¯åªæœ‰å®¿ä¸»æœºä¸­èƒ½è®¿é—®2222ç«¯å£åˆ°giteaä¸­ï¼Œè€Œ2222ç«¯å£æ— æ³•ç›´æ¥è¢«å¤–ç•Œè®¿é—®ã€‚\nports:  # [...]  - &quot;127.0.0.1:2222:22&quot;\n\nsshç›´é€šæµç¨‹é…ç½®å®Œæ¯•sshç›´é€šåï¼Œgitæ“ä½œæµç¨‹å¦‚ä¸‹ï¼š\n\nç”¨æˆ·ä½¿ç”¨git@IPåœ°å€è®¿é—®ä¸»æœºï¼Œé»˜è®¤è®¿é—®22ç«¯å£ï¼›\nä¸»æœºéªŒè¯gitç”¨æˆ·ä¸‹.ssh/authorized_keysçš„commandå¼€å¤´çš„å…¬é’¥ä¸­ï¼Œå‘ç°ç”¨æˆ·å…¬é’¥ï¼›\nä¸»æœºæ‰§è¡ŒcommandæŒ‡å®šçš„è„šæœ¬ï¼Œå°†æ­¤æ¬¡è¯·æ±‚çš„ä¿¡æ¯è½¬å‘ç»™giteaå®¹å™¨çš„sshç«¯å£ï¼›\ngiteaå®¹å™¨æ‰§è¡Œsshè¯·æ±‚å¤„ç†ï¼›\n\nå¦‚æœä¸ä½¿ç”¨å®¹å™¨ç›´é€šï¼Œä½ å¯ä»¥é€‰æ‹©ç”¨httpsæ¥è¿›è¡Œgitæ“ä½œï¼Œæˆ–è€…åœ¨sshä½¿ç”¨æ—¶æ·»åŠ ç«¯å£å·ã€‚äºŒè€…éƒ½ä¼šæ¯”ç›´æ¥ä½¿ç”¨sshéº»çƒ¦ä¸€äº›ã€‚\n2.å®‰è£…sshæœåŠ¡å¦å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹wslä¸­æ˜¯æ²¡æœ‰sshæœåŠ¡çš„ï¼Œä½ ä¼šå‘ç°22ç«¯å£æ— äººä½¿ç”¨\n[root:~]# netstat -nltp | grep 22tcp        0      0 127.0.0.1:2222          0.0.0.0:*               LISTEN      2816/docker-proxy\n\néœ€è¦å®‰è£…ä¸€ä¸‹sshæœåŠ¡\nsudo apt install -y openssh-serversudo systemctl start sshd\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æœåŠ¡çŠ¶æ€ä»¥åŠæ˜¯å¦å¯ç”¨äº†å¼€æœºè‡ªå¯\n[root:~]# systemsystemctl status sshdâ— ssh.service - OpenBSD Secure Shell server     Loaded: loaded (/lib/systemd/system/ssh.service; enabled; vendor preset: enabled)     Active: active (running) since Wed 2024-02-07 14:59:06 CST; 9min ago       Docs: man:sshd(8)             man:sshd_config(5)   Main PID: 5202 (sshd)      Tasks: 1 (limit: 9527)     Memory: 1.7M     CGroup: /system.slice/ssh.service             â””â”€5202 &quot;sshd: /usr/sbin/sshd -D [listener] 0 of 10-100 startups&quot;Feb 07 14:59:06 wsl-ubuntu systemd[1]: Starting OpenBSD Secure Shell server...Feb 07 14:59:06 wsl-ubuntu sshd[5202]: Server listening on 0.0.0.0 port 22.Feb 07 14:59:06 wsl-ubuntu sshd[5202]: Server listening on :: port 22.Feb 07 14:59:06 wsl-ubuntu systemd[1]: Started OpenBSD Secure Shell server.[root:~]# sudo systemctl is-enabled sshdalias[root:~]# sudo systemctl is-enabled sshenabled\n\næ­¤æ—¶å†çœ‹çœ‹22ç«¯å£ï¼Œå°±æœ‰äººå¹²æ´»äº†ï¼ŒsshdæœåŠ¡å¯åŠ¨æˆåŠŸ\n[root:~]# netstat -nltp | grep 22tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      5202/sshd: /usr/sbitcp        0      0 127.0.0.1:2222          0.0.0.0:*               LISTEN      2816/docker-proxytcp6       0      0 :::22                   :::*                    LISTEN      5202/sshd: /usr/sbi\n\n3.webç•Œé¢æ·»åŠ ç”¨æˆ·sshå…¬é’¥éšåå°±æ˜¯å’Œgithubä¸€æ ·çš„æ“ä½œï¼Œ åœ¨giteaçš„webé¡µé¢æ·»åŠ ç”¨æˆ·çš„å…¬é’¥ã€‚\nã€Linuxã€‘å¦‚ä½•ä½¿ç”¨ ssh å¯†é’¥é…ç½® git\n\næ·»åŠ å®Œæ¯•åï¼Œæ£€æŸ¥ä¸€ä¸‹gitç”¨æˆ·é‡Œé¢çš„/home/git/.ssh/authorized_keysæ–‡ä»¶æ˜¯å¦æœ‰å˜åŠ¨ï¼Œæ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ ¼å¼ï¼Œä¼šæœ‰ä¸€ä¸ªcommand=å­˜æ”¾äº†ä½ åˆšåˆšåœ¨gitea webé¡µé¢æ·»åŠ çš„ç”¨æˆ·å…¬é’¥ã€‚\nssh-rsa &lt;Gitea Host Key&gt;# other keys from userscommand=&quot;/usr/local/bin/gitea --config=/data/gitea/conf/app.ini serv key-1&quot;,no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty &lt;user pubkey&gt;\n\næ–‡æ¡£ä¸­å…³äºè¿™ä¸€å—çš„æè¿°ä¸å¤Ÿæ¸…æ¥šï¼ˆæˆ‘æ„Ÿè§‰æ˜¯æœºç¿»çš„é—®é¢˜ï¼‰\n\nåŸæ–‡ï¼šé‡è¦æç¤ºï¼šæ¥è‡ª git ç”¨æˆ·çš„å…¬é’¥éœ€è¦â€œæŒ‰åŸæ ·â€æ·»åŠ ï¼Œè€Œé€šè¿‡ Gitea ç½‘ç»œç•Œé¢æ·»åŠ çš„æ‰€æœ‰å…¶ä»–å…¬é’¥å°†ä»¥ command=&quot;/app [...] ä½œä¸ºå‰ç¼€ã€‚\n\nå…¶å®è¿™ä¸ªè¯´æ˜çš„æ„æ€æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹çš„authorized_keysæ–‡ä»¶ä¸­åº”è¯¥åªæœ‰ä¸‹é¢çš„å†…å®¹ï¼ˆå³â€œæŒ‰åŸæ ·â€æ·»åŠ ï¼‰ï¼Œè€Œgitea webé¡µé¢æ·»åŠ çš„å…¶ä»–å…¬é’¥åº”è¯¥éƒ½æ˜¯ä»¥command=&quot; ä½œä¸ºå‰ç¼€ï¼Œè‡ªåŠ¨æ·»åŠ åˆ°authorized_keysæ–‡ä»¶ä¹‹åçš„ã€‚\nssh-rsa &lt;Gitea Host Key&gt;\n\nè¯´ç™½äº†å°±æ˜¯ï¼Œåœ¨æ‰§è¡Œå®Œæ¯•ä¸Šæ–‡æåˆ°çš„å°†id_rsa.pubæ–‡ä»¶çš„å†…å®¹å†™å…¥authorized_keysçš„æ“ä½œåï¼Œæˆ‘ä»¬å°±ä¸è¦æ‰‹åŠ¨ä¿®æ”¹authorized_keysè¿™ä¸ªæ–‡ä»¶äº†ï¼å¦‚æœå‡ºç°é—®é¢˜ï¼Œå†ä¾ç…§æ–‡æ¡£ä¸­çš„è¿™ä¸ªæç¤ºæ£€æŸ¥è¯¥æ–‡ä»¶ä¸­çš„å…¬é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ã€‚\nå®˜ç½‘æ–‡æ¡£ä¸­è¿˜æåˆ°äº†ä¸‹é¢å‡ ä¸ªæ³¨æ„äº‹é¡¹ï¼Œæˆ‘ä»¬å…¨éƒ½ä¸ç”¨ç®¡ï¼åªè¦ä½ æ²¡æœ‰ä¿®æ”¹è¿‡é…ç½®æ–‡ä»¶å’Œgiteaå®¹å™¨ä¸­çš„ç¯å¢ƒï¼Œè¿™äº›é…ç½®é¡¹éƒ½æ˜¯é»˜è®¤æƒ…å†µä¸‹å°±OKäº†çš„ã€‚\n\n4.éªŒè¯æ˜¯å¦ç›´é€šæˆåŠŸå°è¯•éªŒè¯sshæ˜¯å¦æˆåŠŸï¼Œè¿™é‡Œçš„ipæ˜¯wslçš„æœ¬æœºipï¼Œå¯ä»¥åœ¨wslä¸­é€šè¿‡ifconfigå‘½ä»¤æŸ¥çœ‹ã€‚\nssh -T git@172.26.39.91\n\nå¦‚æœå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼Œè¯´æ˜22ç«¯å£æ²¡æœ‰è¢«æˆåŠŸå¼€æ”¾ï¼Œè¯·æ£€æŸ¥:\n\nå®¿ä¸»æœºä¸­çš„22ç«¯å£æ˜¯å¦å·²ç»é…ç½®äº†sshdæœåŠ¡ï¼Œå¹¶æ­£å¸¸ç›‘å¬22ç«¯å£ï¼›\nåœ¨webé¡µé¢æ·»åŠ çš„ç”¨æˆ·å…¬é’¥æ˜¯å¦æ·»åŠ åˆ°äº†/home/git/.ssh/authorized_keysæ–‡ä»¶ä¸­ï¼›\n/usr/local/bin/giteaè„šæœ¬ä¸­çš„å‘½ä»¤æ— è¯¯ã€‚\n\nPS D:\\test-git&gt; git clone git@172.26.39.91:musnows/test-action.gitCloning into &#x27;test-action&#x27;...ssh: connect to host 172.26.39.91 port 22: Connection refusedfatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists.\n\nå¦‚æœçœ‹åˆ°äº†ä¸‹é¢çš„å†…å®¹ï¼Œå¯ä»¥è¯´æ˜æˆ‘ä»¬wslä¸­çš„çš„sshæœåŠ¡å·²ç»æˆåŠŸå¯åŠ¨äº†ï¼Œä½†æ˜¯æ²¡æœ‰æˆåŠŸé€šè¿‡è„šæœ¬éªŒè¯gitç”¨æˆ·ã€‚\nPS D:\\test-git&gt; ssh -T git@172.26.39.91The authenticity of host &#x27;172.26.39.91 (172.26.39.91)&#x27; can&#x27;t be established.ED25519 key fingerprint is SHA256:xRPtWVSIsHrqmP3VaBD+ZR24nE6SWmgjWUYENN0IfB8.This key is not known by any other namesAre you sure you want to continue connecting (yes/no/[fingerprint])? yesWarning: Permanently added &#x27;172.26.39.91&#x27; (ED25519) to the list of known hosts.bash: line 1: /usr/local/bin/gitea: Permission denied\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„gitç”¨æˆ·æ²¡æœ‰åŠæ³•æ‰§è¡Œ/usr/local/bin/giteaè„šæœ¬ï¼Œè¿˜è®°å¾—å—ï¼Œè¿™ä¸ªè„šæœ¬æ˜¯é€šè¿‡sudoåˆ›å»ºçš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä¸”åªæœ‰rootç”¨æˆ·æœ‰æƒé™è®¿é—®\n[root:~]# ll /usr/local/bin/gitea-rw-r--r-- 1 root root 109 Feb  7 14:47 /usr/local/bin/gitea\n\nè§£å†³åŠæ³•å¾ˆç®€å•ï¼Œå°†å…¶æƒé™æ”¹æˆ777å³å¯ã€‚\n[root:~]# chmod 777 /usr/local/bin/gitea[root:~]# ll /usr/local/bin/gitea-rwxrwxrwx 1 root root 109 Feb  7 14:47 /usr/local/bin/gitea*\n\næ­¤æ—¶å†æ¬¡æµ‹è¯•ï¼Œå‘ç°æˆåŠŸç›´é€šgiteaå®¹å™¨å†…sshï¼è¿™é‡Œä¼šæ˜¾ç¤ºä½ åœ¨webé¡µé¢ä¸­æ·»åŠ çš„sshå¯†é’¥çš„åå­—user from windowsã€‚\nPS D:\\test-git&gt; ssh -T git@172.26.39.91Warning: Permanently added &#x27;[127.0.0.1]:2222&#x27; (ED25519) to the list of known hosts.Hi there, musnows! You&#x27;ve successfully authenticated with the key named user from windows, but Gitea does not provide shell access.If this is unexpected, please log in with password and setup Gitea under another user.\n\nå†è¯•è¯•èƒ½ä¸èƒ½é€šè¿‡sshå…‹éš†ä»“åº“ï¼Œæå®šï¼\nPS D:\\test-git&gt; git clone git@172.26.39.91:musnows/test-action.gitCloning into &#x27;test-action&#x27;...remote: Enumerating objects: 80, done.remote: Counting objects: 100% (80/80), done.remote: Compressing objects: 100% (58/58), done.remote: Total 80 (delta 22), reused 0 (delta 0), pack-reused 0Receiving objects: 100% (80/80), 56.15 KiB | 9.36 MiB/s, done.Resolving deltas: 100% (22/22), done.\n\n\n5.docker-composeæ–‡ä»¶ä¸‹é¢ç»™å‡ºæœ¬æ–‡æ‰€ç”¨çš„giteaå®¹å™¨docker-composeæ–‡ä»¶ï¼Œåªåœ¨å®˜æ–¹æ–‡æ¡£æ‰€æä¾›çš„ç‰ˆæœ¬ä¸Šåšäº†å°‘é‡ä¿®æ”¹ã€‚\nversion: &quot;3&quot;networks:  gitea:    external: falseservices:  server:    image: gitea/gitea:1.21.4    container_name: gitea    environment:      - USER_UID=1001      - USER_GID=1001    restart: always    networks:      - gitea    volumes:      - /home/git/data:/data      - /home/git/.ssh/:/data/git/.ssh      - /etc/timezone:/etc/timezone:ro      - /etc/localtime:/etc/localtime:ro    ports:      - &quot;30000:3000&quot;      - &quot;127.0.0.1:2222:22&quot;\n\næ³¨æ„ï¼Œåœ¨åˆå§‹åŒ–giteaçš„æ—¶å€™ä¸è¦ä¿®æ”¹webç•Œé¢å’Œsshçš„ç›‘å¬ç«¯å£ï¼ˆå¯¹åº”çš„æ˜¯å®¹å™¨å†…çš„ç«¯å£ï¼‰ï¼Œå¦åˆ™ä¸Šæ–‡çš„sshç›´é€šå¯èƒ½ä¼šå¤±è´¥ï¼\nThe endå¦‚æœæœ‰ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµã€‚\nç›¸å…³å‚è€ƒï¼šå¦‚ä½•é€šè¿‡Dockeræ­å»ºGiteaå¹¶é…ç½®SSLå’ŒSSHç›´é€š - è«ä¹”å¤šåšå®¢\n","categories":["ç¼–ç¨‹å­¦ä¹ ","DockerçœŸå¥½ç©"],"tags":["Docker","è™šæ‹Ÿæœº","wsl","gitea"]},{"title":"ã€é¢ç»ã€‘230331æ¨¡æ‹Ÿé¢è¯•è®°å½•","url":"/posts/3461978244/","content":"å‚åŠ äº†ä¸€æ¬¡æ¨¡æ‹Ÿé¢è¯•ï¼Œæ˜¯å·²ç»å·¥ä½œçš„å­¦é•¿é¢è¯•æˆ‘çš„ã€‚\nè®°å½•ä¸€ä¸‹é—®äº†å“ªäº›é—®é¢˜ï¼Œæ‹¬å·ä¸­ä¸ºæˆ‘çš„å›ç­”ã€‚\nè¯´èµ·æ¥çœŸè¯¥æ‰“ï¼Œæˆ‘ç«Ÿç„¶æ²¡æœ‰å½•å± ğŸ˜¥ ä»¥ä¸‹åŸºäºæˆ‘è‡ªå·±çš„å›å¿†ï¼Œé¡ºåºå’Œå®é™…é—®çš„é¡ºåºå¹¶ä¸åŒ\n1.åšäº†ä»€ä¹ˆé¡¹ç›®ï¼Ÿå› ä¸ºæˆ‘è¿˜æ²¡æ¥å¾—åŠå†™cppçš„é¡¹ç›®ï¼Œäºæ˜¯å°±è¯´äº†è‡ªå·±çš„pythoné¡¹ç›®ï¼Œvalorantæ¸¸æˆå•†åº—æŸ¥è¯¢æœºå™¨äºº\ngithub.com&#x2F;Valorant-Shop-CN&#x2F;Kook-Valorant-Bot\n\né¡¹ç›®åŠŸèƒ½æè¿°ï¼ˆä¸»è¦è¿˜æ˜¯åŸºäºriotçš„apiè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œå¯¹äºæœºå™¨äººè€Œè¨€ï¼Œæ›´å¤šçš„å·¥ä½œæ˜¯åœ¨å±•ç¤ºæ•°æ®ä¸Šã€‚åˆšå¼€å§‹ä½¿ç”¨çš„æ˜¯çº¯æ–‡å­—çš„å•†åº—ç»“æœï¼Œåç»­æ”¹æˆäº†ç”¨pilåº“è¿›è¡Œç”»å›¾ï¼‰\næœ‰æ²¡æœ‰å‚è€ƒå…¶ä»–é¡¹ç›®ï¼ˆè¿™é‡Œæˆ‘è¯´äº†å’Œæˆ‘botåŠŸèƒ½ç›¸åŒçš„discordæœºå™¨äººï¼Œè¡¨ç¤ºè‡ªå·±å†™çš„æ²¡æœ‰ä»–çš„å¥½ï¼‰\næœ‰æ²¡æœ‰è¿›è¡Œå‹åŠ›æµ‹è¯•ï¼ˆæˆ‘æè¿°äº†æ—©å…«æ˜¯ç”¨æˆ·é«˜å³°æœŸï¼Œæ­¤æ—¶æœºå™¨äººå¯¹ç”¨æˆ·çš„å“åº”ä¼šæ…¢ä¸Š1-2sï¼‰\nä½ è§‰å¾—æœ‰ä»€ä¹ˆä¼˜åŒ–çš„ç©ºé—´ï¼ˆç±»å¯¹è±¡å°è£…é—®é¢˜ï¼Œå‘½åè§„åˆ™é—®é¢˜ï¼‰\nå¦‚æœæŠŠè¿™ä¸ªé¡¹ç›®ä»pythonæ”¹æˆcppï¼Œéœ€è¦åšä»€ä¹ˆ\n\nç°åœ¨æƒ³æ¥ï¼Œæˆ‘åº”è¯¥æåˆ°è‡ªå·±é‡‡ç”¨äº†ç¼“å­˜æœºåˆ¶ï¼Œä¼šé¿å…å¯¹é‡å¤çš„å•†åº—å›¾ç‰‡äºŒæ¬¡ç”»å›¾ã€‚æ•°æ®æ˜¯å­˜åœ¨leancloudä¸Šçš„ã€‚\n2.æ™ºèƒ½æŒ‡é’ˆ\nç§ç±»ï¼ˆæˆ‘å¿˜è®°äº†weak_ptrï¼‰\nç‰¹æ€§ï¼ˆä¸»è¦å›ç­”äº†RAIIï¼Œä»¥åŠä¸åŒç§ç±»æ™ºèƒ½æŒ‡é’ˆçš„ç‰¹ç‚¹ï¼‰\nå¼•ç”¨è®¡æ•°æ€ä¹ˆå®ç°çš„\n\nç”±äºæˆ‘å¿˜è®°äº†weak_ptrï¼Œæ‰€ä»¥ä¹Ÿå¿˜è®°äº†å¾ªç¯å¼•ç”¨é—®é¢˜â€¦â€¦\n3.å¤§æ–‡ä»¶æ•°æ®æŸ¥è¯¢é—®é¢˜\nå¦‚æœæœ‰ä¸€ä¸ª100gçš„æ–‡ä»¶ï¼Œæˆ‘éœ€è¦å°†æ–‡ä»¶ä¸­å†…å®¹å’Œå·²æœ‰æ•°æ®åº“ä¸­è¿›è¡Œå¯¹æ¯”ï¼Œæ€ä¹ˆåšï¼Ÿ\næˆ‘ç­”äº†é‡‡ç”¨å½’å¹¶è¿›è¡Œå¤–æ’åºï¼Œä½†æ˜¯æ²¡èƒ½è®²å‡ºå®é™…çš„å¤„ç†åŠæ³•ï¼ˆå› ä¸ºæˆ‘å‹æ ¹æ²¡å­¦ï¼‰\n\n4.çº¢é»‘æ ‘å’ŒAVL\nåŸç†ç‰¹æ€§\nçº¢é»‘æ ‘æ˜¯æ€ä¹ˆå®ç°çš„ï¼ˆè¿™é‡Œçº¢é»‘æ ‘æˆ‘åªè®°ä½äº†æœ€é•¿çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¹³å‡çš„å¿˜è®°äº†ğŸ˜¶â€ğŸŒ«ï¸ï¼‰\nå¹³å‡æ—¶é—´å¤æ‚åº¦\n\n5.æ’åºç®—æ³•\nè¯´è¯´ä½ çŸ¥é“çš„æ’åºç®—æ³•\næ—¶é—´å¤æ‚åº¦\nstdçš„sortæ˜¯ç”¨ä»€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆå°åŒºé—´é‡‡ç”¨æ’å…¥æ’åºï¼Œå¤§åŒºé—´é‡‡ç”¨å †æ’ï¼‰\n\n6.tcpä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹\nä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹æ˜¯å¹²å˜›çš„\nè®²è¿°è¿™ä¸¤ä¸ªè¿‡ç¨‹ä¸­çš„tcpé“¾æ¥çŠ¶æ€\nä¸ºä»€ä¹ˆä¸èƒ½æ˜¯2æ¬¡æ¡æ‰‹\n\nè¿™é‡Œå› ä¸ºæˆ‘åˆšåˆšæ‰å­¦ä¹ åˆ°ï¼Œæ‰€ä»¥å›ç­”çš„è¿˜ç®—å®Œæ•´\n7.è·³è¡¨æ²¡äº†è§£è¿‡ï¼ˆç”šè‡³æ²¡å¬è¿‡è¿™ä¸ªä¸œè¥¿ï¼‰ï¼Œç›´æ¥è·³è¿‡äº†ğŸ˜¥å­¦é•¿å»ºè®®æˆ‘å»å­¦ä¹ ä¸€ä¸‹\n8.å¤šæ€\né™æ€å¤šæ€ï¼ˆå‡½æ•°é‡è½½ï¼Œæ³¨æ„åªæ”¹è¿”å›å€¼ä¸æ„æˆé‡è½½ï¼‰\nåŠ¨æ€å¤šæ€ï¼ˆç»§æ‰¿å’Œè™šå‡½æ•°ï¼‰\nèƒ½ä¸èƒ½æœ‰è™šæ„é€ ï¼Ÿï¼ˆä¸èƒ½ï¼‰èƒ½ä¸èƒ½æœ‰è™šææ„ï¼Ÿï¼ˆå¯ï¼‰\nè™šææ„çš„ä½œç”¨ï¼ˆçˆ¶ç±»æŒ‡é’ˆé‡Šæ”¾å­ç±»å¯¹è±¡æ—¶ï¼Œè°ƒç”¨å­ç±»ææ„ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼‰\nè™šå‡½æ•°æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿï¼ˆè™šå‡½æ•°è¡¨ï¼Œè¿™éƒ¨åˆ†è®°ä¸å¤ªæ¸…äº†ï¼Œæˆ‘çç¼–çš„ğŸ¤£ï¼‰\nè™šå‡½æ•°è¡¨ä¸­çš„åœ°å€æˆ‘å¯ä»¥å¼ºåˆ¶ä¿®æ”¹å—ï¼Ÿï¼ˆä¸ä¼šï¼‰\n\n9.ç±»\nCè¯­è¨€structå’ŒC++ classçš„åŒºåˆ«ï¼ˆC++çš„å¯¹è±¡æœ‰æˆå‘˜å‡½æ•°ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚æˆ‘è¿˜å›ç­”äº†C++ä¸­structé»˜è®¤å…¬æœ‰ï¼Œclassé»˜è®¤ç§æœ‰ï¼‰\né»˜è®¤æˆå‘˜å‡½æ•°æœ‰å‡ ä¸ªï¼Œä½œç”¨\nå¦‚ä½•å®ç°ä¸€ä¸ªèƒ½å¤Ÿåœ¨ç±»å¤–è®¿é—®ç±»å†…æˆå‘˜çš„å‡½æ•°ï¼Ÿï¼ˆå‹å…ƒï¼‰\n\n10.æ¨¡æ¿\nç”¨æ¥å¹²å˜›ï¼ˆé¿å…å¤šæ¬¡é‡å¤å†™ä¸€ä¸ªç±»ï¼Œç®€æ´ä»£ç ï¼‰\ntemplateä¸­classå’Œtypenameæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ˆæˆ‘å›ç­”çš„æ˜¯æ²¡åŒºåˆ«ï¼‰\n\n11.è¿›ç¨‹æ§åˆ¶\næ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•æ§åˆ¶è¿›ç¨‹çš„ï¼ˆè¿›ç¨‹pcbç›¸å…³çŸ¥è¯†ï¼Œè¿›ç¨‹åœ°å€ç©ºé—´ï¼‰\nçˆ¶å­è¿›ç¨‹åŸºæœ¬æ“ä½œ\n\n12.åŸå­æ€§\nä»€ä¹ˆæ˜¯åŸå­æ€§\nä»€ä¹ˆæ˜¯é”ï¼Œé”æ€ä¹ˆä¿è¯åŸå­æ€§\né”å°±ç»ªäº†ä¹‹åï¼Œæ€ä¹ˆé€šçŸ¥ç­‰å¾…çš„çº¿ç¨‹ï¼ˆæˆ‘ä¸ç¡®å®šï¼Œå›ç­”çš„æ˜¯ç”¨æ¡ä»¶å˜é‡ï¼‰\n\næœ€åå†™äº†ä¸€é“OJ\nhttps://leetcode.cn/problems/longest-palindromic-substring/description/\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚\nå¦‚æœå­—ç¬¦ä¸²çš„ååºä¸åŸå§‹å­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ç§°ä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚\nè¾“å…¥ï¼šs = &quot;babad&quot;è¾“å‡ºï¼š&quot;bab&quot;è§£é‡Šï¼š&quot;aba&quot; åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚è¾“å…¥ï¼šs = &quot;cbbd&quot;è¾“å‡ºï¼š&quot;bb&quot;\n\næˆ‘ç”¨çš„æ˜¯æœ€ç®€å•çš„æš´åŠ›åŠæ³•ï¼Œåœ¨é¢è¯•ç¯èŠ‚ï¼Œè¿™ä¹ˆåšè‚¯å®šè¦æ‰£åˆ†çš„ï¼ˆ\nclass Solution &#123;public:    bool isReverse(const string&amp; s,int begin,int end)    &#123;        while(begin&lt;end)        &#123;            if(s[begin]!=s[end])            &#123;                return false;            &#125;            begin++;            end--;        &#125;        return true;    &#125;    string longestPalindrome(string s) &#123;        if(s.size()&lt;2)        &#123;            char a = s[0];            string tmp=&quot;&quot;;            tmp+=a;            return tmp;        &#125;        int i=0,j=0;        int max = 0;        int index[2];        for(i=0;i&lt;s.size()-1;i++)        &#123;            for(j=i+1;j&lt;s.size();j++)            &#123;                bool ret = isReverse(s,i,j);                if(ret &amp;&amp; (j-i)&gt;max)                &#123;                    max = j-i;                    index[0]=i;                    index[1]=j;                    cout&lt;&lt; &quot;i &quot; &lt;&lt; i &lt;&lt; &quot; j &quot; &lt;&lt; j &lt;&lt; endl;                &#125;            &#125;        &#125;        cout&lt;&lt; &quot;index &quot; &lt;&lt;  index[0] &lt;&lt; &quot; - &quot; &lt;&lt;  index[1] &lt;&lt; endl;        string tmp(s,index[0],max+1);        return tmp;    &#125;&#125;;\n\næ€»ç»“å’Œå»ºè®®ç”±äºæ¨¡æ‹Ÿé¢è¯•åªæœ‰1hï¼Œå†™å®Œojä¹‹åæ—¶é—´å°±åˆ°äº†ã€‚æˆ‘æ„Ÿè§‰æˆ‘ç­”çš„æŒºå·®çš„ï¼Œæœ‰å¥½å¤šéƒ½è®°ä¸ä½äº†ã€‚\næˆ‘å’¨è¯¢äº†å­¦é•¿è¦ä¸è¦è‡ªå·±å»äº†è§£ä»¥ä¸‹C++17å’ŒC++23çš„æ–°å¢å†…å®¹\nå­¦é•¿å»ºè®®çœ‹çœ‹ã€ŠSTLæºç å‰–æã€‹å’Œã€Šc++primerã€‹è¿™ä¸¤æœ¬ä¹¦ï¼Œç²¾è¿›ä¸€ä¸‹å·²æœ‰çŸ¥è¯†\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["é¢ç»"]},{"title":"ã€é¢ç»ã€‘230913ä¸Šæµ·é›¶å¿µç§‘æŠ€CPPå®ä¹ ç”Ÿ","url":"/posts/2719794733/","content":"230913ä¸Šæµ·é›¶å¿µç§‘æŠ€CPPå®ä¹ ç”Ÿé¢è¯•è®°å½•\n\n\nä¸Šæ¥å…ˆåšäº†ä¸ªè‡ªæˆ‘ä»‹ç»ï¼Œç„¶åé¢è¯•å®˜ä»‹ç»äº†ä»–ä»¬æ˜¯åšç³»ç»Ÿè¿›ç¨‹è°ƒåº¦çš„ï¼›\nCPPé¢˜ç›®é¡ºåºå¹¶éå®é™…é—®çš„é¡ºåº\n1.ç±»çš„å¤§å°ç±»çš„å¤§å°å’Œä»€ä¹ˆä¸œè¥¿æœ‰å…³ç³»ï¼Ÿ\næˆ‘ç­”äº†æˆå‘˜å˜é‡å’Œè™šå‡½æ•°è¡¨\n2.å¤šæ€æ€ä¹ˆå®ç°çš„é¡ºç€è™šå‡½æ•°è¡¨é—®çš„ï¼Œå°±è¯´äº†ä¸€ä¸‹åŠ¨æ€å¤šæ€çš„åŸºæœ¬å®ç°æ–¹å¼\n3.åªèƒ½åœ¨æ ˆä¸Šçš„ç±»ç¦æ­¢æ‹·è´æ„é€ å’Œèµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç§æœ‰åŒ–ï¼Œæä¾›å•ç‹¬å‡½æ•°åœ¨æ ˆä¸Šå¼€è¾Ÿç©ºé—´ï¼›\né¡ºä¾¿é—®äº†ä¸€ä¸‹åŠ¨æ€å†…å­˜ç®¡ç†çš„åŸºç¡€å½¢å¼\n4.æ™ºèƒ½æŒ‡é’ˆå“ªäº›ç±»å‹ï¼Ÿæœ‰å•¥åŒºåˆ«ï¼Ÿweak ptræ€ä¹ˆè§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜çš„ï¼Ÿ\nweak ptrçš„lockå‡½æ•°ç”¨è¿‡å—ï¼Ÿæœ‰æ²¡æœ‰åŠæ³•è·å–åˆ°shared ptrçš„å¼•ç”¨è®¡æ•°ï¼Ÿ\nunique_ptrå¯ä»¥è½¬æˆshare_ptrå—ï¼Ÿ\nå¦‚æœè¦ç”¨C++11çš„ç±»å‹è½¬æ¢ï¼Œè¦ä½¿ç”¨å“ªä¸€ä¸ªæ¥è¿›è¡Œunique_ptrå’Œshare_ptrçš„è½¬æ¢ï¼Ÿï¼ˆè¿™ä¸ªä¸ä¼šï¼Œåº”è¯¥æ˜¯static_castï¼‰\nå®šåˆ¶åˆ é™¤å™¨æ˜¯å¹²å˜›çš„ï¼Ÿ\næ™ºèƒ½æŒ‡é’ˆçº¿ç¨‹å®‰å…¨å—ï¼Ÿ\næ‹·è´æ„é€ share_pträ¼šä¸ä¼šæœ‰å†…å­˜æ³„æ¼ï¼Ÿ\n5.ç±»å‹è½¬æ¢C++11çš„ç±»å‹è½¬æ¢ï¼Œå‡ ä¸ªï¼ŒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\næŒ‡é’ˆä¹‹é—´è½¬æ¢è¦ç”¨ä»€ä¹ˆï¼Ÿï¼ˆä¸ä¼šï¼Œç­”çš„staticï¼‰\ndynamic_castçˆ¶å­è½¬æ¢çš„æ—¶å€™ï¼Œå‘ä¸Šè¿˜æ˜¯å‘ä¸‹æ˜¯å®‰å…¨çš„ï¼Ÿï¼ˆå­è½¬æˆçˆ¶æ˜¯å®‰å…¨çš„ï¼Œå³å‘ä¸Šå®‰å…¨ï¼‰\n6.å•ä¾‹å‡ ç§ç±»å‹ï¼Œæ€ä¹ˆå®ç°ï¼Ÿ\n7.æ¨¡æ¿æ¨¡æ¿çš„å£°æ˜å’Œå®šä¹‰ä¸ºå•¥ä¸èƒ½åˆ†ç¦»ï¼Ÿï¼ˆå¿˜è®°äº†ï¼‰\næ¨¡æ¿ç‰¹åŒ–æ˜¯ä»€ä¹ˆï¼Ÿå‡½æ•°æ¨¡æ¿æ”¯æŒåŠç‰¹åŒ–å—ï¼Ÿï¼ˆä¸æ”¯æŒï¼‰\n8.C++çº¿ç¨‹å’Œasyncæœ‰å•¥åŒºåˆ«ï¼Ÿthreadæ˜¯ç±»ï¼Œaysncæ˜¯å‡½æ•°\nasyncæœ‰ä¸¤ç§ç”¨æ³•ï¼Œä¸€ä¸ªæ˜¯ç«‹é©¬å¼‚æ­¥æ‰§è¡Œï¼Œä¼šå¼€ä¸€ä¸ªçº¿ç¨‹ï¼›ç¬¬äºŒä¸ªæ˜¯å»¶è¿ŸåŒæ­¥æ‰§è¡Œï¼Œåœ¨ä½¿ç”¨future.getçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œã€‚\nè¿™éƒ¨åˆ†æ˜¯åœ¨äº‘è´¦æˆ¿é¢è¯•çš„æ—¶å€™é—®é“çš„ï¼Œå¾—äºæˆ‘ä¸“é—¨å»å­¦äº†ï¼Œå¼€å¿ƒï¼\n9.C++14æ–°ç‰¹æ€§çŸ¥é“çš„å…¨è¯´äº†ï¼Œautoï¼Œlambdaæ–°ç‰¹æ€§ï¼Œconstexprï¼ˆå’Œc++11çš„åŒºåˆ«ï¼‰ï¼Œå˜é‡æ¨¡æ¿ï¼ŒäºŒè¿›åˆ¶å˜é‡ï¼Œç„¶åè¿˜è¯´äº†æœ€åå‡ ä¸ªstdçš„å‡½æ•°çœ‹ä¸æ˜ç™½ï¼›é¢è¯•å®˜äººå¾ˆå¥½ï¼Œä¸€ç›´è¯´æ²¡å…³ç³»ï¼›\nä¸“é—¨é—®äº†constexprå£°æ˜å˜é‡å’Œconstæœ‰å•¥åŒºåˆ«ï¼ˆä¸çŸ¥é“ï¼‰\n\nGPTçš„å›ç­”\n\næ—¶é—´ç‚¹ï¼šconstexpr æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šå€¼çš„ï¼Œè€Œ const æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šå€¼çš„ã€‚\nç¼–è¯‘æœŸè®¡ç®—ï¼šconstexpr å˜é‡å¯ä»¥ç”¨äºç¼–è¯‘æ—¶æœŸé—´çš„è®¡ç®—ï¼Œæ¯”å¦‚æ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ç­‰éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šå¤§å°çš„åœºæ™¯ã€‚è€Œ const å˜é‡åªæ˜¯è¡¨ç¤ºå®ƒçš„å€¼ä¸å¯ä»¥ä¿®æ”¹ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ä½¿ç”¨ const å˜é‡è¿›è¡Œç¼–è¯‘æœŸè®¡ç®—ã€‚\nåˆå§‹åŒ–ï¼šconstexpr å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”åªèƒ½ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–ï¼›const å˜é‡å¯ä»¥åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ç¨åèµ‹å€¼ï¼Œä½†èµ‹å€¼åå°±ä¸èƒ½å†ä¿®æ”¹ã€‚\nåœ°å€ï¼šconstexpr å˜é‡å¾€å¾€ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå¯èƒ½ä¸ä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘æœŸé—´è¢«æ¶ˆé™¤ã€‚const å˜é‡åœ¨è¿è¡Œæ—¶åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”æœ‰ç›¸åº”çš„å†…å­˜åœ°å€ã€‚\nä½†æ˜¯è¿™ä¸¤ä¸ªå…³é”®å­—å£°æ˜çš„å˜é‡éƒ½å…·æœ‰å¸¸é‡å±æ€§ï¼Œä¸å¯ä¿®æ”¹ï¼›\n\n\nå¯¹C++17æœ‰æ²¡æœ‰äº†è§£ï¼Ÿï¼ˆæ— ï¼‰\n10.stlç”¨è¿‡ä»€ä¹ˆï¼ŸæŠŠå¸¸ç”¨çš„stléƒ½è¯´äº†ä¸€é\nstlçº¿ç¨‹å®‰å…¨å—ï¼Ÿå½“ç„¶ä¸\n11.vectorå’ŒarrayåŒºåˆ«arrayæ˜¯å®šé•¿æ•°ç»„ï¼ŒvectoråŠ¨æ€å¼€è¾Ÿ\narrayå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨ï¼Œä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€\nè¿™é‡Œé¡ºä¾¿æåˆ°äº†[]çš„é‡è½½ï¼Œé¢è¯•å®˜é—®äº†vectoré‡Œé¢atå‡½æ•°å’Œ[]é‡è½½çš„åŒºåˆ«ï¼ˆatä¼šæŠ›å¼‚å¸¸ï¼Œ[]ä¸ä¼šï¼‰\n12.emplace_backå’Œpush_backåŒºåˆ«æˆ‘è¯´äº†emplace_backèƒ½èŠ‚çœä¸€æ¬¡æ‹·è´çš„æ¶ˆè€—ï¼›\né¢è¯•å®˜é—®è¦æ€ä¹ˆä½¿ç”¨æ‰èƒ½èŠ‚çœè¿™ä¸ªæ¶ˆè€—ï¼Ÿä½¿ç”¨æ–¹å¼ï¼ˆä¸ä¼šï¼‰\nemplace_backæ—¢ç„¶é«˜æ•ˆï¼Œä¸ºå•¥æ²¡æœ‰å–ä»£push_backï¼Ÿï¼ˆä¸ä¼šï¼Œè¿™é‡Œæˆ‘å°±è¯´äº†ä¸€ä¸‹è®¾è®¡è€ƒè™‘å…¼å®¹æ€§çš„é—®é¢˜ï¼‰\n13.åˆå§‹åŒ–åˆ—è¡¨ã€æ„é€ å‡½æ•°ä½“å†…åˆå§‹åŒ–ã€æˆå‘˜å˜é‡ç»™ç¼ºçœå€¼é‚£ä¸ªæ›´å¥½ï¼Ÿæœ‰å•¥åŒºåˆ«ï¼Ÿ\nå¼•ç”¨æ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨ç¼ºçœå€¼çš„ï¼Œåªæœ‰å¸¸é‡&#x2F;æ™®é€šå˜é‡å¯ä»¥ç”¨ç¼ºçœå€¼ï¼›\nåœ¨VS2019é‡Œé¢è°ƒè¯•æµ‹è¯•äº†ä¸€ä¸‹è¿è¡Œé¡ºåºï¼š\n\nç¼ºçœå€¼ï¼ˆä¼šä¼˜åŒ–æˆåˆå§‹åŒ–åˆ—è¡¨ï¼‰&#x2F;åˆå§‹åŒ–åˆ—è¡¨\nå‡½æ•°ä½“å†…\n\nå…·ä½“çš„æµ‹è¯•å‚è€ƒ CPPç±»å’Œå¯¹è±¡é»˜è®¤æˆå‘˜å‡½æ•°ï¼Œé‡Œé¢è¯¦ç»†æ³¨æ˜äº†æ„é€ é¡ºåºï¼›\n14.é»˜è®¤æ„é€ å‡½æ•°ä»€ä¹ˆæ—¶å€™å¯ä»¥ä¸è‡ªå·±å†™æ„é€ å‡½æ•°ï¼Ÿ\nè¿™é‡Œæ²¡æœ‰ç­”å…¨ï¼Œæ„Ÿè§‰è‡ªå·±å·²ç»è¢«ç»•æ™•äº†\n15.functionå’Œbindçš„ä½œç”¨å¦‚é¢˜\n16.final&#x2F;overide&#x2F;explicitä½œç”¨\nexplicitå¿˜è®°äº†ï¼Œé¢è¯•å®˜è¯´æ²¡å…³ç³»ï¼Œåæ­£ä¹Ÿä¸ç”¨ğŸ¤£\nLinux1.è¿›ç¨‹é€šä¿¡æœ‰å“ªäº›ï¼Œè¿™é‡Œä¸»è¦é—®äº†å…±äº«å†…å­˜å’Œç®¡é“çš„ä¼˜åŠ£ï¼Œä½¿ç”¨è°çš„èµ„æºæ¶ˆè€—æ›´ä¼˜ï¼ˆè¿™é‡Œé—®çš„æ˜¯èµ„æºæ¶ˆè€—ï¼Œä¸æ˜¯é€šä¿¡é€Ÿåº¦ï¼‰\n\næˆ‘ç­”çš„æ˜¯å› ä¸ºç®¡é“æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦ç»´æŠ¤æ–‡ä»¶å’Œè¿›ç¨‹ä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥æ¶ˆè€—ä¼šé«˜ä¸€ç‚¹ï¼›ç„¶åå…±äº«å†…å­˜æ˜¯ç›´æ¥åœ¨é¡µè¡¨ä¸Šæ“ä½œï¼Œæ²¡æœ‰é¢å¤–çš„æ¶ˆè€—ï¼›\nå’±ä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Œæ„Ÿè§‰ç­”æ¡ˆåº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ª\n\n\né—®æœ‰æ²¡æœ‰ç”¨è¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆçŸ¥é“è¿™ç©æ„ï¼Œæ²¡ç”¨è¿‡ï¼‰\n2.è¿›ç¨‹å’Œçº¿ç¨‹åŒºåˆ«è¯´äº†èµ„æºæ¶ˆè€—åŒºåˆ«ï¼ŒåŠŸèƒ½æ¯”è¾ƒéš”ç¦»çš„æ—¶å€™é€‚åˆç”¨è¿›ç¨‹ï¼Œè¿˜ä¸¾äº†ä¸ªepollçš„reactoræ¨¡å¼çš„ä¾‹å­ï¼ˆæˆ‘çç¼–çš„ï¼Œè¯´å®è¯ï¼Œä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ï¼‰\n3.å¼€å‘ç¯å¢ƒå‰æœŸç”¨vs2019ï¼ŒåæœŸç”¨vscode+remote sshï¼›\né¢è¯•å®˜é—®æˆ‘å¾ˆå¤šä¸ªæ–‡ä»¶æ€ä¹ˆè¿›è¡Œç¼–è¯‘å’Œç®¡ç†ï¼Œæˆ‘è¯´äº†makefileï¼›é—®æœ‰æ²¡æœ‰ç”¨è¿‡cmakeï¼ˆæ— ï¼‰\n4.ç¼–è¯‘é“¾æ¥è¿‡ç¨‹è¿™ä¸ªå…¶å®æ˜¯ç¬¬ä¸€ä¸ªé—®çš„é—®é¢˜ï¼Œå°±ç®€å•åœ°è¯´äº†ä¸€ä¸‹ï¼›\n5.åŠ¨é™æ€åº“æœ‰å•¥åŒºåˆ«ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ\nThe endæ²¡æœ‰é—®ç½‘ç»œï¼Œä¹Ÿæ²¡æœ‰å†™OJï¼Œä¹Ÿæ²¡æœ‰é—®é¡¹ç›®ï¼›\nè¿™æ¬¡çš„é¢è¯•å®˜å¾ˆè€å¿ƒï¼Œä¼šå¼•å¯¼ä½ å›ç­”é—®é¢˜ã€‚çˆ±äº†ï¼›\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["é¢ç»"]},{"title":"ã€é¢ç»ã€‘230915ä¸Šæµ·æˆç£ç½‘ç»œç§‘æŠ€C/LINUXå®ä¹ ç”Ÿ","url":"/posts/2553205100/","content":"10åˆ†é’Ÿå°±é¢å®Œäº†ï¼Œå ªç§°æ€¥é€Ÿï¼Œé¢è¯•å®˜è¯´æˆ‘ç­”çš„ä¸é”™ï¼›è€Œä¸”ä¸Šæ¥è‡ªæˆ‘ä»‹ç»å®Œæ¯•åå°±é—®é—®é¢˜ï¼Œä¸å¤šæ¯”æ¯”ğŸ¤£\n\n\nçŸ¥è¯†ç‚¹1.Linuxä¸‹çº¿ç¨‹äº’æ–¥æ€ä¹ˆå®ç°åŠ é”ï¼Œpthreadï¼Œç„¶åæˆ‘è¿˜æåˆ°äº†cppçš„åŸå­å˜é‡\nhttps://blog.musnow.top/posts/1309150756/\n2.CPPå¤šæ€æ€ä¹ˆå®ç°è™šå‡½æ•°è¡¨ï¼Œå·´æ‹‰å·´æ‹‰\nhttps://blog.musnow.top/posts/3933786088/\n3.CPPä¸ºå•¥è¦å¼•å…¥æ¨¡æ¿ä»£ç æ›´é«˜å¤ç”¨\nhttps://blog.musnow.top/posts/2940029419/\n4.NATæ€ä¹ˆå®ç°çš„ï¼Ÿè½¬åŒ–è¡¨ï¼ŒIPåœ°å€æ›¿æ¢ï¼Œå·´æ‹‰å·´æ‹‰å§è¯´ä¸€å¤§å †\nhttps://blog.musnow.top/posts/3482559497/\n5.è¿›ç¨‹é€šä¿¡è€é—®é¢˜äº†\n6.inet_ntoaå‡½æ•°çŸ¥é“å—ï¼Ÿè¿ç»­è°ƒç”¨ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ\nè¿™æ˜¯æœ€åä¸€ä¸ªé—®é¢˜ï¼Œé¢è¯•å®˜è¯´æˆ‘ç­”çš„æŒºå¥½çš„\n\næˆ‘å…ˆè¯´äº†è¿™ä¸ªå‡½æ•°æ˜¯ç”¨äº16ä½IPåœ°å€å’Œå­—ç¬¦ä¸²çš„è½¬æ¢çš„ï¼›\nç„¶åé¢è¯•å®˜è¿™é‡Œé—®äº†ä¸€ä¸ªä¸šåŠ¡ä¸Šçš„é—®é¢˜\nprintf(&quot;%s %s\\n&quot;,inet_ntoa(x),inet_ntoa(y));// xå’Œyæ˜¯ä¸¤ä¸ªipåœ°å€\n\nè¿™ä¸ªå‡½æ•°ä¼šä¸ä¼šæœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ï¼Ÿ\n\nè¯·æ³¨æ„ï¼Œè¿™é‡Œæ˜¯é¢è¯•æ—¶å€™çš„æè¿°ï¼Œé¢è¯•å®˜è‚¯å®šåªèƒ½ç»™ä½ æè¿°ä¸ªå¤§æ¦‚çš„ï¼Œå¹¶ä¸ä¼šç»†è‡´åˆ°å…·ä½“çš„ä¼ å‚åº”è¯¥ä¼ ä»€ä¹ˆç±»å‹çš„å˜é‡ï¼Œæ‰€ä»¥ä¼ å‚xå’Œyä¹Ÿåªæ˜¯ä¸ªä¼ªä»£ç ï¼Œæƒ³é—®çš„åœ°æ–¹ä¸åœ¨è¿™é‡Œï¼\n\nè¿™é‡Œæˆ‘è¯´äº†inet_ntoaæ˜¯é‡‡ç”¨staticå˜é‡æ¥è¿”å›ipå­—ç¬¦ä¸²çš„ï¼Œçº¿ç¨‹ä¸å®‰å…¨ï¼Œæœ‰å¯èƒ½ä¸¤ä¸ªè°ƒç”¨æœ€ç»ˆè¿”å›äº†ä¸€ä¸ªç›¸åŒçš„IPåœ°å€ï¼Œåˆæ˜è¯´äº†æˆ‘ä¸ç¡®å®šï¼›ï¼ˆè‚¯å®šæœ‰é—®é¢˜ï¼Œä¸ç„¶é—®ä½ å¹²å˜›ï¼Ÿï¼‰\n\né¢è¯•ç»“æŸäº†ï¼Œæ¥æµ‹è¯•ä¸€ä¸‹åˆ°åº•æ˜¯å•¥æƒ…å†µå§ï¼\n#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt;#include &lt;arpa/inet.h&gt;int main()&#123;    struct in_addr ip1;    struct in_addr ip2;    inet_aton(&quot;192.168.3.1&quot;,&amp;ip1);    inet_aton(&quot;10.161.33.42&quot;,&amp;ip2);        printf(&quot;%s %s\\n&quot;,inet_ntoa(ip1),inet_ntoa(ip2));    return 0;&#125;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼Œä¸¤ä¸ªIPåœ°å€è¿”å›äº†åŒä¸€ä¸ªï¼Œæˆ‘çŒœå¯¹äº†ï¼›\n$ ./test192.168.3.1 192.168.3.1\n\nä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ‰“å°ä¸€ä¸‹åœ°å€ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼Œä¸¤æ¬¡è°ƒç”¨è¿”å›äº†ç›¸åŒçš„åœ°å€ï¼Œè‡ªç„¶æ‰“å°å‡ºæ¥çš„ç»“æœç›¸åŒï¼›\nprintf(&quot;%x %x\\n&quot;,inet_ntoa(ip1),inet_ntoa(ip2));//68db1ef0 68db1ef0\n\nå¯¹äºè¿™ä¸ªå‡½æ•°è€Œè¨€ï¼Œå®ƒéœ€è¦ç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆå¿…é¡»ä¿è¯è¿™ä¸ªå­—ç¬¦ä¸²èƒ½åœ¨å‡½æ•°å¤–è¢«æ­£å¸¸è®¿é—®ï¼ˆä¸èƒ½è¢«é‡Šæ”¾ï¼‰ï¼Œå†åŠ ä¸Šè¿™æ˜¯ä¸€ä¸ªCè¯­è¨€æ¥å£ï¼Œé‚£ä¹ˆå°±åªæœ‰ä¸‰ç§æ–¹æ¡ˆäº†\n\nå‡½æ•°é‡Œé¢mallocï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨free\nstaticå˜é‡\nè®©ç”¨æˆ·ä¼ å…¥ä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€ï¼Œå°†æ•°æ®å†™å…¥ä½œä¸ºè¾“å‡ºå‹å‚æ•°\n\nç¬¬ä¸€ä¸ªæ–¹æ¡ˆè‚¯å®šæ˜¯ä¸å¯è¡Œçš„ï¼è¿™ç›¸å½“äºå®˜æ–¹æä¾›äº†ä¸€ä¸ªæå…¶å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼çš„æ¥å£ï¼è¿™ä¸å¾—è¢«å¼€å‘è€…å–·æ­»ï¼Ÿæ¯”å¦‚æœ¬é¢˜æåˆ°çš„åœºæ™¯é‡Œé¢å°±æ˜¯ä¸¤æ¬¡printfè€Œå·²ï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰ä¿å­˜è¿™ä¸ªè¿”å›å€¼ï¼Œæ›´åˆ«æfreeäº†ï¼Œè¿™é‡Œå°±ç›´æ¥ä¸¤æ¬¡å†…å­˜æ³„æ¼äº†ï¼\nprintf(&quot;%s %s\\n&quot;,inet_ntoa(ip1),inet_ntoa(ip2));// å¦‚æœç”¨mallocåçš„å­—ç¬¦ä¸²åœ°å€åšè¿”å›å€¼ï¼Œè¿™é‡Œå°±æ˜¯ä¸¤ä¸ªå†…å­˜æ³„æ¼\n\nç¬¬ä¸‰ä¸ªæ–¹æ¡ˆä¹Ÿä¸æ–¹ä¾¿ï¼Œç³»ç»Ÿä¾èµ–ç”¨æˆ·ä¼ å…¥ä¸€ä¸ªæ•°ç»„çš„å…¥å‚ï¼Œæˆ‘ä»¬çŸ¥é“ipv4çš„IPåœ°å€å­—ç¬¦ä¸²æœ€é•¿æ˜¯3*4+3=15ä½ï¼Œé‚£ä¹ˆå¦‚æœç”¨æˆ·åªä¼ å…¥ä¸€ä¸ªchar arr[12]å‘¢ï¼Ÿè¶Šç•Œè®¿é—®çš„é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿç›¸å½“äºç³»ç»Ÿä¹‹ä¸­ä¾æ—§ä¼šå‡ºç°å‚æ•°ä¸åŒ¹é…è€Œå¯èƒ½å¯¼è‡´çš„åœ°å€è®¿é—®é”™è¯¯ï¼\nè€Œè¿™ä¸ªå‡½æ•°æœ¬èº«çš„å·¥ä½œå¾ˆç®€å•ï¼Œå®Œå…¨æ²¡å¿…è¦å¼„é‚£ä¹ˆå¤æ‚ï¼›\næœ€ç»ˆlinuxç³»ç»Ÿé‡‡ç”¨äº†staticå˜é‡çš„æ–¹å¼ï¼Œæ¥è¿”å›è¿™ä¸ªIPåœ°å€çš„å­—ç¬¦ä¸²ï¼›manæ‰‹å†Œé‡Œé¢æ˜¯è¿™ä¹ˆè¯´çš„ï¼Œç›´æ¥çœ‹æœ€åä¸€å¥ï¼Œç¿»è¯‘è¿‡æ¥çš„æ„æ€æ˜¯åç»­çš„è°ƒç”¨ä¼šè¦†ç›–æ‰å‰é¢çš„å€¼ï¼›\n The inet_ntoa() function converts the Internet host address in,  given in network byte order, to a string in IPv4 dotted-decimal notation.   The string  is returned in a statically allocated buffer,which subsequent calls will overwrite.\n\næ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çœ‹åˆ°çš„ç»“æœå°±æ˜¯ä¸¤æ¬¡æ‰“å°å‡ºäº†ç›¸åŒçš„IPåœ°å€ï¼›\nè¿™é‡Œè¿˜æ¶‰åŠåˆ°ç¬¬äºŒä¸ªçŸ¥è¯†ç‚¹ï¼Œprintfçš„ä¼ å‚é¡ºåº;\nç®€å•è¯´æ¥å°±æ˜¯printfæ˜¯ä»å³å¾€å·¦æ‰§è¡Œçš„ï¼ˆå…¶å®æ‰€æœ‰å‡½æ•°çš„ä¼ å‚éƒ½æ˜¯è¿™æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç¼ºçœå€¼è¦ä»å³è¾¹å¾€å·¦ç»™ï¼‰\nprintf(&quot;%s %s\\n&quot;,inet_ntoa(ip1),inet_ntoa(ip2));\n\nè¿™é‡Œçš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹\n\nip2ç»“æ„ä½“ä¼ ç»™å‡½æ•°ï¼Œè½¬æˆipåœ°å€å­—ç¬¦ä¸²åå­˜åœ¨staticå˜é‡ä¸­\nip1ç»“æ„ä½“ä¼ ç»™å‡½æ•°ï¼Œè½¬æˆipåœ°å€å­—ç¬¦ä¸²åå­˜åœ¨äº†staticå˜é‡ä¸­ï¼Œè¦†ç›–äº†ip2çš„ç»“æœ\n\næœ€ç»ˆæ‰“å°å‡ºæ¥çš„ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯ip1çš„åœ°å€ï¼\nå¯¹äºinet_atonå‡½æ•°è€Œè¨€ï¼Œæ­£ç¡®çš„è°ƒç”¨åŠæ³•æ˜¯æ¯æ¬¡è°ƒç”¨åéƒ½å–èµ°è¿”å›çš„IPåœ°å€å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨std::stringæ¥æ”¶ï¼Œä¹Ÿå¯ä»¥ç”¨strcmpæ‹·è´åˆ°ä¸€ä¸ªè‡ªå·±å®šä¹‰çš„å­—ç¬¦ä¸²æ•°ç»„å˜é‡ä¸­ï¼›\nä½ å­¦ä¼šäº†å—ï¼Œéªšå¹´ï¼Ÿ\n\ninet_atonè¿™ä¸ªå‡½æ•°æœ€æ—©å‡ºç°äºæœ¬ç«™çš„æ­¤åšå®¢ï¼šã€Linuxã€‘æ¥å†™ä¸€ä¸ªudpçš„æœåŠ¡ç«¯+å®¢æˆ·ç«¯\n\né¡¹ç›®å› ä¸ºæ˜¯cppçš„å²—ä½ï¼Œæ‰€ä»¥æ²¡æœ‰é—®pythonçš„æœºå™¨äººé¡¹ç›®é—®é¢˜ï¼›\n1.è§†é¢‘ç‚¹æ’­ä¼ ä¸€åŠå…³é—­äº†æ€ä¹ˆè§£å†³ä¸¤æ¬¡é¢è¯•éƒ½é—®åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æåˆ°äº†å°†æ–°çš„æ–‡ä»¶å’Œæœ¬åœ°å·²æœ‰æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œè·³è¿‡å·²æœ‰æ•°æ®\n2.ä¼ ä¸€åŠå‰©ä¸‹çš„æ•°æ®åç«¯æ€ä¹ˆå¤„ç†ï¼Œä»€ä¹ˆæ—¶å€™åˆ é™¤ï¼Ÿæˆ‘æåˆ°äº†å‰åç«¯ç”¨md5éªŒè¯æ¥ç¡®è®¤è§†é¢‘æ–‡ä»¶æ— è¯¯ï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä¸€å°æ—¶ååˆ é™¤é”™è¯¯çš„æ•°æ®\n3.ç”¨æˆ·ä¿®æ”¹äº†è§†é¢‘åä¸Šä¼ æ€ä¹ˆå¤„ç†ï¼ŸåŒç¬¬ä¸€ä¸ªï¼Œè¿›è¡Œä¸€å®šçš„æ•°æ®æ ¡éªŒï¼Œç„¶åå†å¤å†™æ²¡æœ‰çš„æ•°æ®ï¼›\n\nç„¶è€Œè¿™äº›åŠŸèƒ½æˆ‘ä¸€ä¸ªéƒ½æ²¡æœ‰å®ç°ğŸ¤£\n\næ•ˆç‡é¢ç»è¿˜æ²¡å†™å®Œï¼Œç»“æœå·²ç»å‡ºå•¦ï¼Œè¿‡äº†åˆè¯•ï¼ä½†æ˜¯è¦çº¿ä¸‹å¤è¯•ï¼›\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["é¢ç»"]},{"title":"ã€é¢ç»ã€‘230816äº‘è´¦æˆ¿ä¸€é¢","url":"/posts/1199148787/","content":"230816äº‘è´¦æˆ¿ä¸€é¢\n\n\n1.ä»€ä¹ˆæ˜¯ç§»åŠ¨æ„é€ 2.å¾ªç¯é“¾è¡¨å¦‚ä½•å®ç°3.ç”¨äº†é‚£äº›stlå®¹å™¨4.æ ‘çš„ç±»å‹è¿™é‡Œé—®äº†æˆ‘mysqlç”¨çš„æ˜¯ä»€ä¹ˆï¼Œæˆ‘ç­”äº†çº¢é»‘æ ‘ã€‚ä½†å…¶å®æ˜¯B+æ ‘ï¼ˆæ²¡å­¦ï¼‰\n5.C++11æ–°ç‰¹æ€§6.C++11futureæ²¡å¬è¯´è¿‡ï¼Œå¾—å­¦\n7.linuxè¿›ç¨‹é€šä¿¡çš„æ–¹å¼ç®¡é“ å…±äº«å†…å­˜ä¿¡å·é‡socketæœ¬åœ°æ–‡ä»¶\n\nå…¨ç­”å‡ºæ¥äº†ï¼Œè¿˜é—®äº†è°æœ€å¿«ï¼ˆå…±äº«å†…å­˜æœ€å¿«ï¼‰\nç„¶ååˆé—®äº†è¿›ç¨‹ä¹‹é—´å¦‚ä½•åŒæ­¥ï¼ˆä¸ä¼šï¼‰\ntnndç°åœ¨æ‰æƒ³èµ·æ¥ã€‚è¿›ç¨‹åŒæ­¥ç›´æ¥ç”¨ä¿¡å·é‡å°±å¯ä»¥å•Šï¼ï¼ï¼ï¼ï¼æˆ‘æ€ä¹ˆä¿¡å·é‡ç­”å‡ºæ¥äº†ä¸çŸ¥åˆ°è¿™ç©æ„æ˜¯å¹²å˜›çš„å‘¢â€¦â€¦è¯´ç™½äº†è¿˜æ˜¯å­¦è‰ºä¸ç²¾\n8.gitçš„åŸºæœ¬å‘½ä»¤æˆ‘è¯´äº†ä¸‹é¢è¿™äº›\ngit add git pushgit commit git loggit reset git rebasegit merge\n\n9.ç‰ˆæœ¬å·ç®¡ç†æˆ‘ç­”æˆ‘ç”¨äº†3ä¸ªç‰ˆæœ¬å·\nå¤§ç‰ˆæœ¬.åŠŸèƒ½ç‰ˆæœ¬.bugä¿®å¤ç‰ˆæœ¬\n\nè°¢è°¢æƒ é¡¾æ³»è¯ï¼Œå¤ªå¤šä¸œè¥¿æ²¡ç­”ä¸Šæ¥ï¼Œå·²ç»å‘äº†æ„Ÿè°¢ä¿¡äº†\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["é¢ç»"]},{"title":"ã€MySQLã€‘å®‰è£…å’ŒåŸºç¡€ç¯å¢ƒé…ç½®","url":"/posts/577382991/","content":"åœ¨æœ¬åœ°å®‰è£…mysqlï¼Œä»¥mariadbä¸ºä¾‹ã€‚\næ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦åœ¨rootä¸‹é¢æ‰§è¡Œorä½¿ç”¨sudo\n\næœ¬æ–‡åŸºäºç³»ç»Ÿ CentOS 8\n\n1.å®‰è£…mariadbå¼€å‘åŒ…åœ¨ CentOS8 ä¸‹ç”¨å¦‚ä¸‹å‘½ä»¤\nyum -y updateyum install -y mariadbyum install -y mariadb-serveryum install -y mariadb-devel\n\nåœ¨ Ubuntu 22.04 ç³»ç»Ÿä¸Šç”¨å¦‚ä¸‹å‘½ä»¤\nsudo apt updatesudo apt install -y mariadb-server mariadb-client sudo apt install -y libmysqlclient-dev # MySQLçš„Cè¯­è¨€å¼€å‘åŒ…\n\n\næ³¨æ„ï¼Œåæ–‡æ²¡æœ‰å¼ºè°ƒå¤„çš„æ“ä½œå…¨éƒ½åŸºäº CentOS8ï¼Œä½†åœ¨ Ubuntu ä¸Šçš„é…ç½®æ“ä½œåº”ç±»ä¼¼ã€‚å¯ä¾›å‚è€ƒ\n\n2.ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç¼–ç ä¸ºäº†ä¿è¯å¯¹ä¸­æ–‡çš„æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å‡ ä¸ªé…ç½®æ–‡ä»¶ã€‚ä»–ä»¬éƒ½åœ¨å¦‚ä¸‹ç›®å½•ä¸­\n$ ls /etc/my.cnf.d/auth_gssapi.cnf  client.cnf  enable_encryption.preset  mariadb-server.cnf  mysql-clients.cnf\n\néœ€è¦ä¿®æ”¹çš„æ˜¯å¦‚ä¸‹3ä¸ªï¼Œä¿®æ”¹ä¹‹å‰ï¼Œå»ºè®®ä½¿ç”¨cpå‘½ä»¤è¿›è¡Œå¤‡ä»½ï¼Œé¿å…ä¿®æ”¹é”™äº†æ— æ³•å¤åŸã€‚\n/etc/my.cnf.d/client.cnf/etc/my.cnf.d/mysql-clients.cnf/etc/my.cnf.d/mariadb-server.cnf\n\næˆ‘çš„å·²ç»æ˜¯ä¿®æ”¹å¥½çš„äº†ï¼Œéœ€è¦ä¿®æ”¹çš„é…ç½®çœ‹ä¸­æ–‡æ³¨é‡Šå°±ok\n$ cat /etc/my.cnf.d/client.cnf## These two groups are read by the client library# Use it for options that affect all clients, but not the server#[client]# æ–°å¢ä¸‹è¾¹ä¸€è¡Œé…ç½®ï¼Œè®¾ç½®å®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†ä¸ºutf8default-character-set = utf8# This group is not read by mysql client library,# If you use the same .cnf file for MySQL and MariaDB,# use it for MariaDB-only client options[client-mariadb]\n\n$ cat /etc/my.cnf.d/mysql-clients.cnf## These groups are read by MariaDB command-line tools# Use it for options that affect only one utility#[mysql]# æ–°å¢å­—ç¬¦é…ç½®default-character-set = utf8[mysql_upgrade]\n\n$ cat /etc/my.cnf.d/mariadb-server.cnf## These groups are read by MariaDB server.# Use it for options that only the server (but not clients) should see## See the examples of server my.cnf files in /usr/share/mysql/## this is read by the standalone daemon and embedded servers[server]# this is only for the mysqld standalone daemon# Settings user and group are ignored when systemd is used.# If you need to run mysqld under a different user or group,# customize your systemd unit file for mysqld/mariadb according to the# instructions in http://fedoraproject.org/wiki/Systemd[mysqld]datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.socklog-error=/var/log/mariadb/mariadb.logpid-file=/run/mariadb/mariadb.pid# æ–°å¢ä»¥ä¸‹å­—ç¬¦é›†çš„é…ç½®collation-server = utf8_general_ciinit-connect = &#x27;SET NAMES utf8&#x27;character-set-server = utf8sql-mode = TRADITIONAL\n\n3.æµ‹è¯•3.1 å¯åŠ¨&#x2F;å…³é—­systemctl start mariadb\n\nçœ‹çœ‹çŠ¶æ€\nsystemctl status mariadb\n\næ˜¾ç¤ºå¦‚ä¸‹ï¼Œé‚£å°±æ˜¯æ­£å¸¸è¿è¡Œä¸­çš„\nâ— mariadb.service - MariaDB 10.3 database server   Loaded: loaded (/usr/lib/systemd/system/mariadb.service; disabled; vendor preset: disabled)   Active: active (running) since Tue 2023-04-04 14:10:00 CST; 2 days ago     Docs: man:mysqld(8)           https://mariadb.com/kb/en/library/systemd/  Process: 633453 ExecStartPost=/usr/libexec/mysql-check-upgrade (code=exited, status=0/SUCCESS)  Process: 633289 ExecStartPre=/usr/libexec/mysql-prepare-db-dir mariadb.service (code=exited, status=0/SUCCESS)  Process: 633265 ExecStartPre=/usr/libexec/mysql-check-socket (code=exited, status=0/SUCCESS) Main PID: 633422 (mysqld)   Status: &quot;Taking your SQL requests now...&quot;    Tasks: 31 (limit: 75691)   Memory: 67.4M   CGroup: /system.slice/mariadb.service           â””â”€633422 /usr/libexec/mysqld --basedir=/usr\n\n\nç”¨pså‘½ä»¤ä¹Ÿèƒ½çœ‹åˆ°ç›¸å…³çš„è¿›ç¨‹\n$ ps jax | grep mysql      1  633422  633422  633422 ?             -1 Ssl     27   4:10 /usr/libexec/mysqld --basedir=/usr 625302  634104  634104  625302 pts/48    634104 S+    1000   0:00 mysql -uroot 642521  642555  642554  642521 pts/51    642554 S+    1000   0:00 grep --color=auto mysql\n\nå¦‚æœæƒ³å…³é—­ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯\nsystemctl stop mariadb\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå¼€æœºè‡ªå¯çš„é…ç½®\nsystemctl enable mariadb\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹\n$ systemctl enable mariadbCreated symlink /etc/systemd/system/mysql.service â†’ /usr/lib/systemd/system/mariadb.service.Created symlink /etc/systemd/system/mysqld.service â†’ /usr/lib/systemd/system/mariadb.service.Created symlink /etc/systemd/system/multi-user.target.wants/mariadb.service â†’ /usr/lib/systemd/system/mariadb.service.\n\nå–æ¶ˆå¼€æœºè‡ªå¯ï¼Œå°†enableæ”¹æˆdisableå°±å¯ä»¥äº†\nsystemctl disable mariadb\n\n3.2 è¿›å…¥mysqlå‘½ä»¤è¡Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®rootç”¨æˆ·çš„å¯†ç ï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‡å®šå¯†ç å°±èƒ½è¿›å…¥æ•°æ®åº“\nmysql -uroot\n\nä¼šæ˜¾ç¤ºå‡ºå¦‚ä¸‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬mariadbçš„ç‰ˆæœ¬\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.Your MariaDB connection id is 11Server version: 10.3.28-MariaDB MariaDB ServerCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.Type &#x27;help;&#x27; or &#x27;\\h&#x27; for help. Type &#x27;\\c&#x27; to clear the current input statement.MariaDB [(none)]&gt;\n\n\n\n3.3 çœ‹çœ‹å­—ç¬¦ç¼–ç æ˜¯å¦ä¿®æ”¹æˆåŠŸè¾“å…¥å¦‚ä¸‹å‘½ä»¤ (è®°å¾—è¦è¾“å…¥æœ«å°¾çš„åˆ†å·)\nshow variables like &quot;%chara%&quot;;\n\nçœ‹çœ‹æ˜¯å¦éƒ½é…ç½®ä¸ºäº†utf-8ï¼Œå¦‚ä¸‹å›¾ï¼Œé™¤äº†filesystemæ˜¯äºŒè¿›åˆ¶ï¼Œå…¶ä»–éƒ½æ˜¯utf8ï¼Œé‚£å°±æ˜¯okçš„;\nç¼–ç é›†ä¿®æ”¹ä¹‹å‰çš„æ˜¯è¿™æ ·çš„ï¼Œæœ‰ä¸€éƒ¨åˆ†çš„ç¼–ç æ˜¯latin1ã€‚\n\nä¿®æ”¹åï¼Œé™¤äº†filesystemå¤–å…¶ä»–ç¼–ç é›†éƒ½æˆåŠŸä¿®æ”¹ä¸ºäº†utf8\n\nåˆ°è¿™é‡Œï¼Œå°±okèˆï¼\n3.4 ç«¯å£mysqlæœåŠ¡çš„é»˜è®¤ç«¯å£ä¸º3306ï¼Œ:::ä»£è¡¨å®ƒæ˜¯é‡‡ç”¨ipv6åè®®åœ¨æœ¬åœ°è¿›è¡Œè®¿é—®çš„ã€‚ä½†è¿™ä¸å½±å“æˆ‘ä»¬çš„ä½¿ç”¨ï¼›\n\nåœ¨Ubuntuç³»ç»Ÿä¸Šè¯¥å‘½ä»¤æ‰§è¡Œç»“æœå¦‚ä¸‹\nâ¯ netstat -nltp | grep 3306(Not all processes could be identified, non-owned process info will not be shown, you would have to be root to see it all.)tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -\n\nå¯èƒ½æœ‰äººä¼šå»ºè®®ä½ ä¿®æ”¹mysqlçš„é»˜è®¤ç«¯å£ï¼Œä»¥é¿å…è¢«æ”»å‡»ã€‚ä¸ªäººè®¤ä¸ºï¼šè¿™å®Œå…¨æ²¡æœ‰å¿…è¦ï¼ä¸€å°ä¸»æœºçš„å¯ç”¨ç«¯å£ä¹Ÿå°±65535ä¸ªï¼ŒçœŸè¦æ”»å‡»ä½ ï¼Œå†™ä¸ªè„šæœ¬éå†å®Œæ¯•ä½ ä¸»æœºä¸Šçš„æ‰€æœ‰ç«¯å£éƒ½ç”¨ä¸äº†1ç§’ç§çš„ï¼Œå¾ˆå®¹æ˜“å°±èƒ½è¯†åˆ«å‡ºå“ªä¸€ä¸ªç«¯å£çš„æœåŠ¡æ˜¯ä»€ä¹ˆï¼ˆä¸åŒæœåŠ¡åè®®éƒ½æœ‰ä¸åŒçš„æ¡æ‰‹æ‰‹æ®µï¼ŒæŒ¨ä¸ªå»è¯•å°±èƒ½çŸ¥é“ï¼‰ã€‚\nè€Œä¸”ï¼Œåœ¨ç»å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¸éœ€è¦æŠŠè‡ªå·±çš„mysqlæœåŠ¡ç«¯å£æš´éœ²åœ¨å…¬ç½‘ä¸Šè¿›è¡Œè¿œç¨‹è¿æ¥ã€‚\n4.å½»åº•å¸è½½æœ‰çš„æ—¶å€™ï¼Œä¸€ä¸ªç¯å¢ƒä¸­å·²æœ‰mysqlï¼Œä½†ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ç‰ˆæœ¬ã€‚å°±éœ€è¦å°†å…¶åˆ é™¤åé‡æ–°å®‰è£…æ–°çš„mysqlã€‚\nrpm -qa | grep mysqlrpm -qa | grep mariadb\n\nä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­å®‰è£…çš„mysqlï¼ˆmariadbï¼‰çš„åŒ…\n[root@1c2261732150:~]# rpm -qa | grep mysql[root@1c2261732150:~]# rpm -qa | grep mariadbmariadb-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-server-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-common-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-errmsg-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-connector-c-3.1.11-2.el8_3.x86_64mariadb-backup-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-server-utils-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-devel-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-connector-c-config-3.1.11-2.el8_3.noarchmariadb-gssapi-server-10.3.28-1.module_el8.3.0+757+d382997d.x86_64mariadb-connector-c-devel-3.1.11-2.el8_3.x86_64\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘çš„ç³»ç»Ÿä¸­å®‰è£…çš„æ˜¯mariadbï¼ˆè€Œä¸æ˜¯mysqlï¼‰\nè¿™æ—¶å€™å°±å¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ï¼Œå¿«é€Ÿè¿›è¡Œæ‰¹é‡å¸è½½\nrpm -qa | grep mariadb | xargs yum -y remove\n\nè¿™æ¡å‘½ä»¤ä¸­xargsçš„ä½œç”¨å°±æ˜¯æŠŠå‰é¢è¿™ä¸ªgrepå‘½ä»¤çš„ç»“æœï¼ŒæŒ‰è¡Œå–‚ç»™yumè¿›è¡Œåˆ é™¤ã€‚\nåˆ é™¤ä¹‹åï¼Œå†æ¬¡æ‰§è¡Œã€‚\nrpm -qa | grep mariadb\n\nå¦‚æœæ²¡æœ‰è½¯ä»¶ï¼Œé‚£å°±æ˜¯å¸è½½å®Œæ¯•äº†ï¼ğŸ‘ŒğŸ‘Œ\n[root@1c2261732150:~/package]# rpm -qa | grep mariadb[root@1c2261732150:~/package]#\n\næ³¨æ„ï¼Œå¸è½½mysqlå¹¶ä¸ä¼šè¿å¸¦åˆ é™¤æ•°æ®æ–‡ä»¶\n5.yumå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„MySQLï¼ˆæœªæˆåŠŸï¼‰ä»¥ä¸‹æ“ä½œåŸºäºCentOS8\n5.1 æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬$ cat /etc/system-releaseCentOS Linux release 8.5.2111\n\nå½“å‰æˆ‘ä½¿ç”¨çš„ç³»ç»Ÿä¸ºCentOS 8.5ï¼Œä½¿ç”¨yumå®‰è£…çš„mariadbçš„ç‰ˆæœ¬æ¯”è¾ƒé«˜\n# mysql --versionmysql  Ver 15.1 Distrib 10.3.28-MariaDB, for Linux (x86_64) using readline 5.1\n\nå‡è®¾æˆ‘éœ€è¦ä¸€ä¸ªè€ç‰ˆæœ¬çš„mysqlï¼Œå°±éœ€è¦å»å®‰è£…ç‰¹å®šçš„rpmç‰ˆæœ¬\n5.2 è·å–yumæºhttp://repo.mysql.com/\n\næ‰¾åˆ°el8åç¼€çš„åŒ…ï¼ŒelæŒ‡ä»£çš„å°±æ˜¯CentOS\nmysql80-community-release-el8-3.noarch.rpm\n\nå¦‚ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ªmysql 8.0ç‰ˆæœ¬çš„CentOS8çš„rpmæºã€‚\nåœ¨å¾ˆå¤šæ•™ç¨‹ä¸­ï¼Œä½¿ç”¨çš„éƒ½æ˜¯5.7ç‰ˆæœ¬çš„mysqlï¼Œå¯æƒœCentOS8å·²ç»ä¸æ”¯æŒè¿™ä¸ªæ—§ç‰ˆæœ¬äº†ï¼ˆæ‰¾ä¸åˆ°å¯¹åº”çš„mysql57çš„åŒ…ï¼‰\n5.3 å®‰è£…yumæºå¯ä»¥ä½¿ç”¨windowsä¸‹è½½äº†rpmæ–‡ä»¶åï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸­ã€‚æˆ–è€…ç”¨å¦‚ä¸‹å‘½ä»¤åœ¨linuxå†…éƒ¨ä¸‹è½½ã€‚\nå¦‚ä¸‹ç›®å½•æ˜¯æˆ‘ä»¬ç³»ç»Ÿæºçš„è·¯å¾„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå†…éƒ¨ä¸ä¼šå¸¦æœ‰å’Œmysqlç›¸å…³çš„æºã€‚\nls -al /etc/yum.repos.d/\n\ntotal 92drwxr-xr-x 1 root root 4096 Apr  6 19:14 .drwxr-xr-x 1 root root 4096 Apr  6 19:14 ..-rw-r--r-- 1 root root 2590 Feb 24 08:08 CentOS-Base.repo-rw-r--r-- 1 root root  966 Feb 24 08:00 CentOS-Linux-AppStream.repo-rw-r--r-- 1 root root  710 Feb 24 07:56 CentOS-Linux-BaseOS.repo-rw-r--r-- 1 root root 1136 Feb 24 07:56 CentOS-Linux-ContinuousRelease.repo-rw-r--r-- 1 root root  318 Feb 24 07:56 CentOS-Linux-Debuginfo.repo-rw-r--r-- 1 root root  738 Feb 24 07:56 CentOS-Linux-Devel.repo-rw-r--r-- 1 root root  710 Feb 24 07:56 CentOS-Linux-Extras.repo-rw-r--r-- 1 root root  725 Feb 24 07:56 CentOS-Linux-FastTrack.repo-rw-r--r-- 1 root root  746 Feb 24 07:56 CentOS-Linux-HighAvailability.repo-rw-r--r-- 1 root root  693 Feb 24 07:56 CentOS-Linux-Media.repo-rw-r--r-- 1 root root  712 Feb 24 07:56 CentOS-Linux-Plus.repo-rw-r--r-- 1 root root  730 Feb 24 07:56 CentOS-Linux-PowerTools.repo-rw-r--r-- 1 root root 1124 Feb 24 07:56 CentOS-Linux-Sources.repo-rw-r--r-- 1 root root    0 Feb 24 08:05 epel-8.repo-rw-r--r-- 1 root root 1698 Oct  4  2022 epel-modular.repo-rw-r--r-- 1 root root 1332 Oct  4  2022 epel.repo-rw-r--r-- 1 root root 1417 Jun  8  2021 epel.repo.rpmnew-rw-r--r-- 1 root root 2318 Feb 24 08:08 epel.repo.rpmsave-rw-r--r-- 1 root root 1797 Oct  4  2022 epel-testing-modular.repo-rw-r--r-- 1 root root 1431 Oct  4  2022 epel-testing.repo-rw-r--r-- 1 root root  164 Feb 27 12:21 vscode.repo\n\nå°†æ•°æ®ä¼ åˆ°äº‘æœåŠ¡å™¨åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œè¿›è¡Œæºå®‰è£…\nrpm -Uvh mysql80-community-release-el8-3.noarch.rpm\n\nè¾“å‡ºå¦‚ä¸‹\nwarning: mysql80-community-release-el8-3.noarch.rpm: Header V4 RSA/SHA256 Signature, key ID 3a79bd29: NOKEYVerifying...                          ################################# [100%]warning: Unable to get systemd shutdown inhibition lock: Unit systemd-logind.service is masked.Preparing...                          ################################# [100%]Updating / installing...   1:mysql80-community-release-el8-3  ################################# [100%]\n\nå®‰è£…å®Œæ¯•ï¼Œå†æ¬¡æŸ¥çœ‹yumæºè·¯å¾„ï¼Œå¯ä»¥çœ‹åˆ°æ¯”åŸæ¥å¤šäº†ä¸¤ä¸ªmysqlçš„åŒ…\n# ls -al /etc/yum.repos.d/total 100drwxr-xr-x 1 root root 4096 Apr  7 16:12 .drwxr-xr-x 1 root root 4096 Apr  6 19:14 ..-rw-r--r-- 1 root root 2590 Feb 24 08:08 CentOS-Base.repo-rw-r--r-- 1 root root  966 Feb 24 08:00 CentOS-Linux-AppStream.repo-rw-r--r-- 1 root root  710 Feb 24 07:56 CentOS-Linux-BaseOS.repo-rw-r--r-- 1 root root 1136 Feb 24 07:56 CentOS-Linux-ContinuousRelease.repo-rw-r--r-- 1 root root  318 Feb 24 07:56 CentOS-Linux-Debuginfo.repo-rw-r--r-- 1 root root  738 Feb 24 07:56 CentOS-Linux-Devel.repo-rw-r--r-- 1 root root  710 Feb 24 07:56 CentOS-Linux-Extras.repo-rw-r--r-- 1 root root  725 Feb 24 07:56 CentOS-Linux-FastTrack.repo-rw-r--r-- 1 root root  746 Feb 24 07:56 CentOS-Linux-HighAvailability.repo-rw-r--r-- 1 root root  693 Feb 24 07:56 CentOS-Linux-Media.repo-rw-r--r-- 1 root root  712 Feb 24 07:56 CentOS-Linux-Plus.repo-rw-r--r-- 1 root root  730 Feb 24 07:56 CentOS-Linux-PowerTools.repo-rw-r--r-- 1 root root 1124 Feb 24 07:56 CentOS-Linux-Sources.repo-rw-r--r-- 1 root root    0 Feb 24 08:05 epel-8.repo-rw-r--r-- 1 root root 1698 Oct  4  2022 epel-modular.repo-rw-r--r-- 1 root root 1332 Oct  4  2022 epel.repo-rw-r--r-- 1 root root 1417 Jun  8  2021 epel.repo.rpmnew-rw-r--r-- 1 root root 2318 Feb 24 08:08 epel.repo.rpmsave-rw-r--r-- 1 root root 1797 Oct  4  2022 epel-testing-modular.repo-rw-r--r-- 1 root root 1431 Oct  4  2022 epel-testing.repo-rw-r--r-- 1 root root 1265 Jan 10  2022 mysql-community.repo-rw-r--r-- 1 root root 1321 Jan 10  2022 mysql-community-source.repo-rw-r--r-- 1 root root  164 Feb 27 12:21 vscode.repo\n\nè¿™æ—¶å€™ï¼Œyumæºå°±å·²ç»å®‰è£…æˆåŠŸäº†\nyum list | grep mysql\n\næ‰§è¡Œåï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåˆ—åœ¨æœ€å‰é¢çš„å°±æ˜¯el8-3ï¼Œå³ä¸ºåˆšåˆšæˆ‘ä»¬æ·»åŠ çš„çš„yumæºä¸­çš„mysqlç‰ˆæœ¬\nRepository AppStream is listed more than once in the configurationRepository extras is listed more than once in the configurationmysql80-community-release.noarch                                  el8-3                                                  @Systemanope-mysql.x86_64                                                2.0.12-1.el8                                           epelansible-collection-community-mysql.noarch                         3.5.1-1.el8                                            epelapr-util-mysql.x86_64                                             1.6.1-6.el8                                            AppStream\n\n\n5.4 å¸è½½æ—§ç‰ˆæœ¬çš„å¦‚æœéœ€è¦å®‰è£…æ–°ç‰ˆæœ¬çš„ï¼Œé‚£å°±éœ€è¦ä¾ç…§ç¬¬å››æ­¥çš„æ“ä½œï¼Œå½»åº•å¸è½½æ—§ç‰ˆæœ¬çš„mysql\n5.5 å®‰è£…æŒ‡å®šç‰ˆæœ¬æ­¤æ—¶æˆ‘ä»¬æŒ‡å®šmysqlè¿›è¡Œå®‰è£…ï¼Œå°±è‚¯å®šèƒ½å®‰è£…åˆ°åˆšåˆšæ·»åŠ çš„mysql8.0ç‰ˆæœ¬\nyum install -y mysqlyum install -y mysql-serveryum install -y mysql-devel\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œç‰ˆæœ¬å°±æ˜¯8.0çš„ï¼Œä¸å†æ˜¯ä¹‹å‰å®‰è£…çš„Ver 15.1\n$ mysql --versionmysql  Ver 8.0.26 for Linux on x86_64 (Source distribution)\n\nå…±å®‰è£…äº†ä¸‹é¢çš„è¿™äº›åŒ…\n# rpm -qa | grep mysqlmysql-8.0.26-1.module_el8.4.0+915+de215114.x86_64mysql-errmsg-8.0.26-1.module_el8.4.0+915+de215114.x86_64mysql-server-8.0.26-1.module_el8.4.0+915+de215114.x86_64mysql-devel-8.0.26-1.module_el8.4.0+915+de215114.x86_64mysql-common-8.0.26-1.module_el8.4.0+915+de215114.x86_64mysql80-community-release-el8-4.noarchmysql-libs-8.0.26-1.module_el8.4.0+915+de215114.x86_64# rpm -qa | grep mariadbmariadb-connector-c-config-3.1.11-2.el8_3.noarch\n\n5.6 å¯åŠ¨æŠ¥é”™ï¼ˆæœªè§£å†³ï¼‰ä½†æ˜¯è¿™æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œå´é‡åˆ°äº†ä¸‹é¢çš„æŠ¥é”™\n# systemctl start mysqldJob for mysqld.service failed because the control process exited with error code.See &quot;systemctl status mysqld.service&quot; and &quot;journalctl -xe&quot; for details.\n\næŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ä¹Ÿçœ‹ä¸å‡ºä¸ªæ‰€ä»¥ç„¶ï¼Œçœ‹ä¸Šå»MySQL5.7ç‰ˆæœ¬åœ¨è‡ªåŠ¨å‡çº§ä¸ºMySQL8ï¼Ÿ\n# systemctl status mysqld.serviceâ— mysqld.service - MySQL 8.0 database server   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; disabled; vendor preset: disabled)   Active: failed (Result: exit-code) since Fri 2023-04-07 16:39:51 CST; 7s ago  Process: 648073 ExecStopPost=/usr/libexec/mysql-wait-stop (code=exited, status=0/SUCCESS)  Process: 648059 ExecStart=/usr/libexec/mysqld --basedir=/usr (code=exited, status=1/FAILURE)  Process: 648023 ExecStartPre=/usr/libexec/mysql-prepare-db-dir mysqld.service (code=exited, status=0/SUCCESS)  Process: 647999 ExecStartPre=/usr/libexec/mysql-check-socket (code=exited, status=0/SUCCESS) Main PID: 648059 (code=exited, status=1/FAILURE)   Status: &quot;Data Dictionary upgrade from MySQL 5.7 in progress&quot;Apr 07 16:39:50 1c2261732150 systemd[1]: Starting MySQL 8.0 database server...Apr 07 16:39:51 1c2261732150 systemd[1]: mysqld.service: Main process exited, code=exited, status=1/FAILUREApr 07 16:39:51 1c2261732150 systemd[1]: mysqld.service: Failed with result &#x27;exit-code&#x27;.Apr 07 16:39:51 1c2261732150 systemd[1]: Failed to start MySQL 8.0 database server.\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºmysqlçš„è·¯å¾„æƒé™ä¸è¶³\n\nhttps://blog.csdn.net/Shockang/article/details/118061120\nhttps://blog.csdn.net/weixin_44198965/article/details/104145043\n\nä½†æ˜¯æˆ‘ä¿®æ”¹äº†ä¹‹åè¿˜æ˜¯æ²¡æœ‰ç”¨ï¼Œç™¾åº¦äº†å¦å¤–å‡ ä¸ªæ“ä½œï¼Œéƒ½æ²¡æœ‰åŠæ³•æ­£å¸¸å¯åŠ¨mysqldï¼Œé‚£èƒ½å’‹åŠï¼Œæ”¾å¼ƒäº†ã€‚ç”¨å›æœ€å¼€å§‹å®‰è£…çš„mariadbäº†ğŸ˜¥\n6.dockerå®‰è£…ç‰¹å®šç‰ˆæœ¬MySQLè™½ç„¶ä¸Šé¢ç¬¬äº”ç‚¹çš„yumå®‰è£…æ–¹å¼æˆ‘åœ¨æœ¬åœ°æ²¡æœ‰æµ‹è¯•é€šè¿‡ï¼Œä½†æˆ‘ä»¬ç”¨dockerå®‰è£…ç‰¹å®šç‰ˆæœ¬MySQLæ˜¯å¯ä»¥çš„ã€‚\n6.1 å®‰è£…dockerå‚è€ƒæœ¬ç«™æ•™ç¨‹ï¼šã€Dockerã€‘deepin&#x2F;centoså®‰è£…docker | æ…•é›ªçš„å¯’èˆ\n6.2 dockerå®‰è£…MySQLå®¹å™¨ä¸‹é¢æ˜¯ä¸€ä¸ªdockerå®‰è£…MySQL5.7ç‰ˆæœ¬çš„å‘½ä»¤ï¼Œä½ åªéœ€è¦ä¿®æ”¹å†’å·å·¦è¾¹çš„å®¿ä¸»æœºæ–‡ä»¶è·¯å¾„å³å¯ã€‚\nsudo docker run -d \\    -p 13306:3306 \\    -v /home/wsl/docker/mysql5.7/log:/var/log/mysql \\    -v /home/wsl/docker/mysql5.7/data:/var/lib/mysql \\    -v /home/wsl/docker/mysql5.7/conf:/etc/mysql/conf.d \\    -e MYSQL_ROOT_PASSWORD=123456 \\    --name mysql57 \\    mysql:5.7\n\nå®‰è£…å®Œæ¯•è¯¥å®¹å™¨åï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤è¿›å…¥dockerå†…MySQLçš„å‘½ä»¤è¡Œ\nâ¯ sudo docker exec -it mysql57 mysql -uroot -p123456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \\g.Your MySQL connection id is 2Server version: 5.7.44 MySQL Community Server (GPL)Copyright (c) 2000, 2023, Oracle and/or its affiliates.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#x27;help;&#x27; or &#x27;\\h&#x27; for help. Type &#x27;\\c&#x27; to clear the current input statement.mysql&gt;\n\n6.3 ä¿®æ”¹å­—ç¬¦é›†å’Œç»ˆç«¯é…ç½®é—®é¢˜è¯´æ˜dockerå®‰è£…çš„MySQLé»˜è®¤å­—ç¬¦é›†éƒ½æ˜¯latin1ï¼Œè€Œä¸”å‘½ä»¤è¡Œä¸­æ–‡è¾“å…¥éƒ½ä¸å…è®¸ï¼æˆ‘ä»¬éœ€è¦å°†MySQLçš„å­—ç¬¦é›†ä¿®æ”¹ä¸ºutf8ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¿®æ”¹MySQLæ‰€åœ¨dockerç¯å¢ƒå†…ç»ˆç«¯çš„å­—ç¬¦é›†ï¼Œå¦åˆ™ä¸­æ–‡è¾“å…¥ä¸è¢«å…è®¸ã€‚\n-- æŸ¥çœ‹æ•°æ®åº“å­—ç¬¦é›†mysql&gt; show variables like &quot;%chara%&quot;;+--------------------------+----------------------------+| Variable_name            | Value                      |+--------------------------+----------------------------+| character_set_client     | latin1                     || character_set_connection | latin1                     || character_set_database   | latin1                     || character_set_filesystem | binary                     || character_set_results    | latin1                     || character_set_server     | latin1                     || character_set_system     | utf8                       || character_sets_dir       | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+8 rows in set (0.00 sec)\n\nä¸­æ–‡è¾“å…¥ä¸å…è®¸çš„æƒ…å†µå¦‚ä¸‹ï¼Œè¾“å…¥æ³•æ— æ³•è¾“å…¥ä¸­æ–‡ï¼Œå³ä¾¿å¤åˆ¶ç²˜è´´çš„ä¸­æ–‡ä¹Ÿä¼šæ¶ˆå¤±ä¸è§ï¼Œä¸­æ–‡å†…å®¹ä¼šæ¶ˆå¤±ã€‚\nmysql&gt; insert into stu values (4,&#x27;&#x27;);\n\n\nä¿®æ”¹MySQLé…ç½®å› ä¸ºæˆ‘ä»¬æ˜ å°„äº†é…ç½®æ–‡ä»¶ç›®å½•ï¼Œæ‰€ä»¥ä¿®æ”¹ä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚åœ¨/home/wsl/docker/mysql5.7/confä¸­åˆ›å»ºä¸€ä¸ªmy.cnfï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹\n[client]default_character_set=utf8[mysqld]character-set-server = utf8mb4collation-server = utf8mb4_unicode_ci\n\néšåé‡å¯MySQLå®¹å™¨ï¼Œåº”ç”¨é…ç½®æ–‡ä»¶çš„æ›´æ”¹\nsudo docker restart mysql57\n\né‡æ–°è¿›å…¥MySQLå‘½ä»¤è¡ŒæŸ¥çœ‹å­—ç¬¦é›†ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœä¸åŒäº†ï¼Œæ­¤æ—¶å­—ç¬¦é›†å·²è¢«æˆåŠŸä¿®æ”¹ã€‚\nmysql&gt; show variables like &quot;%chara%&quot;;+--------------------------+----------------------------+| Variable_name            | Value                      |+--------------------------+----------------------------+| character_set_client     | utf8                       || character_set_connection | utf8                       || character_set_database   | utf8mb4                    || character_set_filesystem | binary                     || character_set_results    | utf8                       || character_set_server     | utf8mb4                    || character_set_system     | utf8                       || character_sets_dir       | /usr/share/mysql/charsets/ |+--------------------------+----------------------------+8 rows in set (0.00 sec)\n\nä¿®æ”¹dockerå®¹å™¨ç»ˆç«¯å­—ç¬¦é›†\nå‚è€ƒï¼šDockerç‰ˆæœ¬Mysqlå®¹å™¨ä¸­ä¸æ”¯æŒè¾“å…¥ä¸­æ–‡è§£å†³æ–¹æ³• - YOLO_BLOG - åšå®¢å›­\n\néšåæ˜¯ä¿®æ”¹å®¹å™¨ç»ˆç«¯çš„å­—ç¬¦é›†ï¼Œè¿›å…¥dockerå®¹å™¨å†…çš„çš„bashç»ˆç«¯ã€‚\nsudo docker exec -it mysql57 /bin/bash\n\nä½¿ç”¨localeå‘½ä»¤æŸ¥çœ‹å½“å‰ç»ˆç«¯å†…çš„å­—ç¬¦é›†è®¾ç½®ï¼Œä¼šå‘ç°éƒ½æ˜¯POSIXå­—ç¬¦é›†ï¼Œè¿™ä¸ªå­—ç¬¦é›†å¾ˆè€ï¼Œä¸æ”¯æŒä¸­æ–‡é”®å…¥ã€‚\nbash-4.2# localeLANG=LC_CTYPE=&quot;POSIX&quot;LC_NUMERIC=&quot;POSIX&quot;LC_TIME=&quot;POSIX&quot;LC_COLLATE=&quot;POSIX&quot;LC_MONETARY=&quot;POSIX&quot;LC_MESSAGES=&quot;POSIX&quot;LC_PAPER=&quot;POSIX&quot;LC_NAME=&quot;POSIX&quot;LC_ADDRESS=&quot;POSIX&quot;LC_TELEPHONE=&quot;POSIX&quot;LC_MEASUREMENT=&quot;POSIX&quot;LC_IDENTIFICATION=&quot;POSIX&quot;LC_ALL=\n\nä½¿ç”¨locale -aæŸ¥çœ‹ç»ˆç«¯æ”¯æŒçš„æ‰€æœ‰å­—ç¬¦é›†ï¼Œä¼šå‘ç°æœ‰éå¸¸ä¹‹å¤šã€‚\nbash-4.2# locale -aCC.utf8POSIXen_AGen_AG.utf8en_AUen_AU.iso88591en_AU.utf8en_BWen_BW.iso88591en_BW.utf8en_CAen_CA.iso88591en_CA.utf8en_DKen_DK.iso88591en_DK.utf8en_GBen_GB.iso88591en_GB.iso885915en_GB.utf8en_HKen_HK.iso88591en_HK.utf8en_IEen_IE.iso88591en_IE.iso885915@euroen_IE.utf8en_IE@euroen_INen_IN.utf8en_NGen_NG.utf8en_NZen_NZ.iso88591en_NZ.utf8en_PHen_PH.iso88591en_PH.utf8en_SGen_SG.iso88591en_SG.utf8en_USen_US.iso88591en_US.iso885915en_US.utf8en_ZAen_ZA.iso88591en_ZA.utf8en_ZMen_ZM.utf8en_ZWen_ZW.iso88591en_ZW.utf8\n\næˆ‘ä»¬é€‰æ‹©C.utf8å­—ç¬¦é›†å³å¯æ”¯æŒä¸­æ–‡é”®å…¥ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹\necho &quot;export LANG=C.UTF-8&quot; &gt;&gt;/etc/profile &amp;&amp; source /etc/profile\n\nä¿®æ”¹åé‡æ–°æŸ¥çœ‹ç»ˆç«¯é…ç½®ï¼Œç¡®è®¤ä¿®æ”¹å­—ç¬¦é›†æˆåŠŸ\nbash-4.2# localeLANG=C.UTF-8LC_CTYPE=&quot;C.UTF-8&quot;LC_NUMERIC=&quot;C.UTF-8&quot;LC_TIME=&quot;C.UTF-8&quot;LC_COLLATE=&quot;C.UTF-8&quot;LC_MONETARY=&quot;C.UTF-8&quot;LC_MESSAGES=&quot;C.UTF-8&quot;LC_PAPER=&quot;C.UTF-8&quot;LC_NAME=&quot;C.UTF-8&quot;LC_ADDRESS=&quot;C.UTF-8&quot;LC_TELEPHONE=&quot;C.UTF-8&quot;LC_MEASUREMENT=&quot;C.UTF-8&quot;LC_IDENTIFICATION=&quot;C.UTF-8&quot;LC_ALL=\nä¿®æ”¹MySQLå†…å·²åˆ›å»ºæ•°æ®åº“çš„å­—ç¬¦é›†é‡æ–°è¿›å…¥MySQLç»ˆç«¯ï¼Œå‘ç°æ­¤æ—¶å·²ç»å¯ä»¥é”®å…¥ä¸­æ–‡äº†\nbash-4.2# mysql -uroot -p123456mysql: [Warning] Using a password on the command line interface can be insecure.Welcome to the MySQL monitor.  Commands end with ; or \\g.Your MySQL connection id is 6Server version: 5.7.44 MySQL Community Server (GPL)Copyright (c) 2000, 2023, Oracle and/or its affiliates.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#x27;help;&#x27; or &#x27;\\h&#x27; for help. Type &#x27;\\c&#x27; to clear the current input statement.mysql&gt; use test;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; insert into stu values (4,&#x27;å°æ˜&#x27;);ERROR 1366 (HY000): Incorrect string value: &#x27;\\xE5\\xB0\\x8F\\xE6\\x98\\x8E&#x27; for column &#x27;name&#x27; at row 1\n\nä½†æ˜¯è¿™é‡Œå¼¹äº†ä¸€ä¸ªERRORï¼Œè¯´æˆ‘ä»¬çš„stringå˜é‡ä¸æ­£ç¡®ï¼Œä¸æ”¯æŒæ’å…¥ã€‚\nè¿™æ˜¯å› ä¸ºè¿™ä¸ªtestæ•°æ®åº“å’Œstuè¡¨éƒ½æ˜¯åœ¨ä¿®æ”¹MySQLå­—ç¬¦é›†ä¹‹å‰åˆ›å»ºçš„ï¼Œå®ƒä»¬çš„å­—ç¬¦é›†è¿˜æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œä¾æ—§æ˜¯latin1å­—ç¬¦é›†ï¼\nmysql&gt; SHOW VARIABLES LIKE &#x27;character_set_database&#x27;;+------------------------+--------+| Variable_name          | Value  |+------------------------+--------+| character_set_database | latin1 |+------------------------+--------+1 row in set (0.00 sec)\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è®¾ç½®è¿™ä¸ªæ•°æ®åº“testå’Œè¡¨stuçš„å­—ç¬¦é›†ä¸ºuft8ï¼›\nALTER DATABASE æ•°æ®åº“åå­— CHARACTER SET utf8mb4;ALTER TABLE è¡¨åå­— CONVERT TO CHARACTER SET utf8mb4;\n\næ•ˆæœå¦‚ä¸‹\nmysql&gt; ALTER DATABASE test CHARACTER SET utf8mb4;Query OK, 1 row affected (0.00 sec)mysql&gt; ALTER TABLE stu CONVERT TO CHARACTER SET utf8mb4;Query OK, 3 rows affected (0.06 sec)Records: 3  Duplicates: 0  Warnings: 0\n\næ­¤æ—¶å°±èƒ½æ­£å¸¸æ’å…¥ä¸­æ–‡äº†\nmysql&gt; insert into stu values (4,&#x27;å°æ˜&#x27;);Query OK, 1 row affected (0.03 sec)mysql&gt; select * from stu;+------+--------+| id   | name   |+------+--------+|    1 | 1235   ||    2 | 125    ||    3 |        ||    4 | å°æ˜   |+------+--------+4 rows in set (0.00 sec)\nThe endæœ¬æ–‡è®²è¿°äº†å®‰è£…mariadbå’Œdockerå®‰è£…MySQLæ•°æ®åº“ä»¥åŠå­—ç¬¦é›†ä¿®æ”¹çš„æ–¹å¼ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€é¢è¯•ã€‘C++ä¸‰ä¸ªçº¿ç¨‹äº¤æ›¿æ‰“å°1åˆ°100","url":"/posts/235113945/","content":"æ˜¨å¤©é¢äº†ä¸ªå¤§å‚ï¼Œè‡ªå·±å¤ªå‚»é€¼äº†ï¼Œè¿™ä¹ˆç®€å•çš„ä¸€é“é¢˜ç›®æ²¡å†™å‡ºæ¥ã€‚å› ä¸ºæˆ‘ä¸å¤ªç†Ÿæ‚‰æ¡ä»¶å˜é‡ï¼Œæ‹–äº†å¾ˆé•¿æ—¶é—´ï¼Œé¢è¯•å®˜ä¼°è®¡æœ‰ç‚¹å¤±æœ›ï¼Œåç»­çš„å…«è‚¡ä¹Ÿæ²¡é—®ä»€ä¹ˆï¼Œæ„æ–™ä¹‹ä¸­çš„æŒ‚äº†ğŸ˜­ã€‚\nè¿˜æœ‰ä¸ªé¢˜ç›®æ˜¯LRUï¼Œè¿™ä¸ªå€’æ˜¯ä¸´æ—¶æŠ±ä½›è„šå¤ä¹ åˆ°äº†ï¼Œå†™å‡ºæ¥äº†ã€‚\n\né¢˜ç›®é—®é¢˜ï¼šçº¿ç¨‹1æ‰“å°1ï¼Œçº¿ç¨‹2æ‰“å°2ï¼Œçº¿ç¨‹3æ‰“å°3ï¼Œçº¿ç¨‹1æ‰“å°4ï¼Œçº¿ç¨‹2æ‰“å°5ï¼Œçº¿ç¨‹3æ‰“å°6â€¦â€¦ä¸€ç›´æ‰“å°åˆ°100ã€‚\nå…¶å®ä¸€ç‚¹éƒ½ä¸éš¾ï¼Œå°±æ˜¯æˆ‘è‡ªå·±å¹³æ—¶å‹æ ¹æ²¡åšè¿‡å¤šå°‘çº¿ç¨‹åŒæ­¥çš„ç»ƒä¹ ï¼Œå¯¹äºæ¡ä»¶å˜é‡ä¹‹ç±»çš„ç©æ„åŸºæœ¬åœç•™åœ¨ç†è®ºå’Œå­¦ä¹ æ—¶çš„ç®€å•demoå±‚é¢ï¼Œä¸€ä¸Šæˆ˜åœºåŠ ä¸Šç´§å¼ å°±æ¯›éƒ½ä¸ä¼šäº†ã€‚\næ€è·¯1-ç›´æ¥ç”¨çº¿ç¨‹åºå·åšåˆ¤æ–­æœ€ç®€å•çš„ä¸€ä¸ªæ€è·¯ï¼Œå› ä¸ºåªæœ‰ä¸‰ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰“å°çš„æ•°å­—æ˜¯æœ‰è§„å¾‹çš„\n\nçº¿ç¨‹ä¸€æ‰“å°çš„æ•°å­—%3éƒ½ç­‰äº1\nçº¿ç¨‹äºŒæ‰“å°çš„æ•°å­—%3éƒ½ç­‰äº2\nçº¿ç¨‹ä¸‰æ‰“å°çš„æ•°å­—%3éƒ½ç­‰äº0\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å†™ä¸€ä¸ªå‡½æ•°ï¼Œæä¾›ä¸€ä¸ªçº¿ç¨‹ç¼–å·ï¼Œé€šè¿‡è®¡ç®—åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯è‡ªå·±éœ€è¦æ‰“å°çš„æ•°å­—ï¼Œä¸æ˜¯å°±ç¡è§‰ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯æœ€ç®€å•çš„ï¼Œåªéœ€è¦ä¸€ä¸ªå…¨å±€å˜é‡åŠ ä¸€ä¸ªé”å°±èƒ½å®ç°ã€‚\nä¸¤ä¸ªatomicå˜é‡ï¼Œä¸€ä¸ªç”¨äºä¸»çº¿ç¨‹é€šçŸ¥æ‰€æœ‰çº¿ç¨‹å½“å‰å·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼Œå¦å¤–ä¸€ä¸ªç”¨äºçº¿ç¨‹é€šçŸ¥ä¸»çº¿ç¨‹å½“å‰å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚\n#include &lt;thread&gt;#include &lt;mutex&gt;#include &lt;atomic&gt;#include &lt;iostream&gt;// çº¿ç¨‹1æ‰“å°1ï¼Œçº¿ç¨‹2æ‰“å°2ï¼Œçº¿ç¨‹3æ‰“å°3ï¼Œçº¿ç¨‹1æ‰“å°4ï¼Œçº¿ç¨‹2æ‰“å°5.... æ‰“å°åˆ°100std::atomic&lt;bool&gt; isRun = false;std::atomic&lt;bool&gt; isFinished = false;std::mutex gMtx;int count = 1;void PrintCountFun(int no)&#123;    while(!isRun)    &#123;        std::this_thread::sleep_for(std::chrono::microseconds(10));    &#125;    while(!isFinished)    &#123;        gMtx.lock();        if(count &gt; 100)        &#123;            isFinished = true;            gMtx.unlock();            return;        &#125;        // 1å·2å·çº¿ç¨‹        if(no!=3 &amp;&amp; count % 3 == no)        &#123;            std::cout &lt;&lt; no &lt;&lt; &quot; - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - c: &quot; &lt;&lt; count &lt;&lt; std::endl;            count ++;            gMtx.unlock();            continue;        &#125;        // 3å·çº¿ç¨‹        if(no == 3 &amp;&amp; count % 3 == 0)        &#123;            std::cout &lt;&lt; no &lt;&lt; &quot; - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - c: &quot; &lt;&lt; count &lt;&lt; std::endl;            count ++;            gMtx.unlock();            continue;        &#125;        gMtx.unlock();        std::this_thread::sleep_for(std::chrono::microseconds(10));    &#125;&#125;int main()&#123;    std::thread t1(PrintCountFun,1);    std::thread t2(PrintCountFun,2);    std::thread t3(PrintCountFun,3);    t1.detach();    t2.detach();    t3.detach();    isRun = true;    while(!isFinished)    &#123;        std::this_thread::sleep_for(std::chrono::microseconds(100));    &#125;    std::cout &lt;&lt; &quot;finished\\n&quot;;    return 0;&#125;\n\n\næ–¹æ³•1ä»£ç è¿è¡Œç»“æœ\n\nåæ­£æ˜¯é€šè¿‡ç¼–å·åˆ¤æ–­çš„ï¼Œè‚¯å®šä¸ä¼šé”™ï¼Œåªä¸è¿‡è¿™æ ·æ•ˆç‡å…¶å®å¾ˆä½ã€‚\n1 - 140173660395072 - c: 12 - 140173652002368 - c: 23 - 140173643609664 - c: 31 - 140173660395072 - c: 42 - 140173652002368 - c: 53 - 140173643609664 - c: 61 - 140173660395072 - c: 72 - 140173652002368 - c: 83 - 140173643609664 - c: 91 - 140173660395072 - c: 102 - 140173652002368 - c: 113 - 140173643609664 - c: 121 - 140173660395072 - c: 132 - 140173652002368 - c: 143 - 140173643609664 - c: 151 - 140173660395072 - c: 162 - 140173652002368 - c: 173 - 140173643609664 - c: 181 - 140173660395072 - c: 192 - 140173652002368 - c: 203 - 140173643609664 - c: 211 - 140173660395072 - c: 222 - 140173652002368 - c: 233 - 140173643609664 - c: 241 - 140173660395072 - c: 252 - 140173652002368 - c: 263 - 140173643609664 - c: 271 - 140173660395072 - c: 282 - 140173652002368 - c: 293 - 140173643609664 - c: 301 - 140173660395072 - c: 312 - 140173652002368 - c: 323 - 140173643609664 - c: 331 - 140173660395072 - c: 342 - 140173652002368 - c: 353 - 140173643609664 - c: 361 - 140173660395072 - c: 372 - 140173652002368 - c: 383 - 140173643609664 - c: 391 - 140173660395072 - c: 402 - 140173652002368 - c: 413 - 140173643609664 - c: 421 - 140173660395072 - c: 432 - 140173652002368 - c: 443 - 140173643609664 - c: 451 - 140173660395072 - c: 462 - 140173652002368 - c: 473 - 140173643609664 - c: 481 - 140173660395072 - c: 492 - 140173652002368 - c: 503 - 140173643609664 - c: 511 - 140173660395072 - c: 522 - 140173652002368 - c: 533 - 140173643609664 - c: 541 - 140173660395072 - c: 552 - 140173652002368 - c: 563 - 140173643609664 - c: 571 - 140173660395072 - c: 582 - 140173652002368 - c: 593 - 140173643609664 - c: 601 - 140173660395072 - c: 612 - 140173652002368 - c: 623 - 140173643609664 - c: 631 - 140173660395072 - c: 642 - 140173652002368 - c: 653 - 140173643609664 - c: 661 - 140173660395072 - c: 672 - 140173652002368 - c: 683 - 140173643609664 - c: 691 - 140173660395072 - c: 702 - 140173652002368 - c: 713 - 140173643609664 - c: 721 - 140173660395072 - c: 732 - 140173652002368 - c: 743 - 140173643609664 - c: 751 - 140173660395072 - c: 762 - 140173652002368 - c: 773 - 140173643609664 - c: 781 - 140173660395072 - c: 792 - 140173652002368 - c: 803 - 140173643609664 - c: 811 - 140173660395072 - c: 822 - 140173652002368 - c: 833 - 140173643609664 - c: 841 - 140173660395072 - c: 852 - 140173652002368 - c: 863 - 140173643609664 - c: 871 - 140173660395072 - c: 882 - 140173652002368 - c: 893 - 140173643609664 - c: 901 - 140173660395072 - c: 912 - 140173652002368 - c: 923 - 140173643609664 - c: 931 - 140173660395072 - c: 942 - 140173652002368 - c: 953 - 140173643609664 - c: 961 - 140173660395072 - c: 972 - 140173652002368 - c: 983 - 140173643609664 - c: 991 - 140173660395072 - c: 100finished\n\n\n\n\næˆ‘åˆšå¼€å§‹çš„æ—¶å€™å°±æ˜¯æƒ³ç€ç”¨æ¡ä»¶å˜é‡ï¼Œæ¯”å¦‚ä¸‰ä¸ªæ¡ä»¶å˜é‡åˆ†åˆ«ç”¨äºé€šçŸ¥â€¦â€¦ä½†è¿™ä¸ªå®åœ¨æ˜¯å¤æ‚ä¸”æ²¡æœ‰å¿…è¦ï¼Œæ²¡åšè¿‡æ¡ä»¶å˜é‡ç»ƒä¹ ä¸€æ—¶åŠä¼šå®Œå…¨æ˜¯å†™ä¸å‡ºæ¥çš„ã€‚åæ¥å°±æ¢äº†è¿™ä¸ªæ€è·¯ï¼Œä½†æ—¶é—´å·²ç»æ¥ä¸åŠäº†ã€‚\nè¯´æ¥æƒ­æ„§ï¼Œæˆ‘å†™å®Œä¸Šé¢ä»£ç çš„åŸºæœ¬æ¡†æ¶åç¼–è¯‘é”™è¯¯ï¼Œæ˜¾ç¤ºatomic&lt;bool&gt;åˆå§‹åŒ–å¤±è´¥ï¼Œæˆ‘æ‰¾äº†å¥½ä¹…éƒ½æ²¡æœ‰å‘ç°æ˜¯è‡ªå·±æ²¡æœ‰å¼•ç”¨&lt;atomic&gt;è¿™ä¸ªå¤´æ–‡ä»¶å¯¼è‡´çš„ï¼Œä¸€ç›´åœ¨çœ‹è‡ªå·±çš„è¯­æ³•æ˜¯ä¸æ˜¯å†™é”™äº†â€¦â€¦\nè¿˜æ˜¯è‡ªå·±ç»ƒä¹ ä¸å¤Ÿï¼Œä¸ç„¶ä¹Ÿä¸ä¼šæ€€ç–‘è‡ªå·±è¯­æ³•æ˜¯å¦å†™é”™ğŸ˜£\næ€è·¯2-æ¡ä»¶å˜é‡ä¸Šè¿°çš„è¿™ä¸ªå•é”åŠ éå†çš„æ€è·¯å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„ç­”æ¡ˆï¼ˆä½†æ€»æ¯”æ²¡å†™å‡ºæ¥çš„å¥½ï¼‰ï¼Œå› ä¸ºå®ƒå®Œå…¨æ²¡æœ‰æ¶‰åŠåˆ°çº¿ç¨‹åŒæ­¥çš„æœºåˆ¶ï¼Œä¸‰ä¸ªçº¿ç¨‹å…¶å®æ¯«æ— å…³ç³»ï¼Œåªæ˜¯åœ¨é€šè¿‡é”ç«äº‰å’Œåˆ¤æ–­æ¥ç¡®å®šè‡ªå·±æ˜¯å¦éœ€è¦æ‰“å°ã€‚é¢è¯•å®˜æƒ³è¦çš„ç­”æ¡ˆè‚¯å®šå¾—åŒ…å«æ¡ä»¶å˜é‡ã€‚\nä¸‹é¢è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„æ€è·¯åŒæ ·æ˜¯é€šè¿‡çº¿ç¨‹ç¼–å·åˆ¤æ–­ï¼ˆåªä¸è¿‡æ‹†åˆ†æˆäº†ä¸‰ä¸ªä¸åŒçš„å‡½æ•°ï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰“å°å®Œæ¯•è‡ªå·±çš„ï¼Œå°±æŠŠå¦å¤–ä¸¤ä¸ªçº¿ç¨‹å”¤é†’ï¼Œç„¶åè¢«å”¤é†’çš„ä¸¤ä¸ªçº¿ç¨‹ä¼šé€šè¿‡é”ç«äº‰å…ˆåè¿›å…¥è‡ªå·±çš„å‡½æ•°æ‰“å°åŒºåŸŸï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯è‡ªå·±éœ€è¦æ‰“å°çš„éƒ¨åˆ†ï¼Œå¦‚æœä¸æ˜¯å°±ç»§ç»­åœ¨æ¡ä»¶å˜é‡é‡Œé¢ç­‰å¾…ã€‚\n#include &lt;mutex&gt;#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;condition_variable&gt;std::mutex gMtx;std::condition_variable cv;int count = 1;void func1()&#123;\tstd::unique_lock&lt;std::mutex&gt; lc(gMtx);\twhile(count &lt;= 100)\t&#123;\t\twhile (count % 3 == 0 &amp;&amp; count &lt;= 100)\t\t&#123;\t\t\tstd::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - c: &quot; &lt;&lt; count &lt;&lt; std::endl;\t\t\tcount++;\t\t\tcv.notify_all();\t\t&#125;\t\tcv.wait(lc);\t&#125;\tcv.notify_all();&#125;void func2()&#123;\tstd::unique_lock&lt;std::mutex&gt; lc(gMtx);\twhile (count &lt;= 100)\t&#123;\t\twhile (count % 3 == 1 &amp;&amp; count &lt;= 100)\t\t&#123;\t\t\tstd::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - c: &quot; &lt;&lt; count &lt;&lt; std::endl;\t\t\tcount++; \t\t\tcv.notify_all();\t\t&#125;\t\tcv.wait(lc);\t&#125;&#125;void func3()&#123;\tstd::unique_lock&lt;std::mutex&gt; lc(gMtx);\twhile (count &lt;= 100)\t&#123;\t\twhile (count % 3 == 2 &amp;&amp; count &lt;= 100)\t\t&#123;\t\t\tstd::cout &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - c: &quot; &lt;&lt; count &lt;&lt; std::endl;\t\t\tcount++; \t\t\tcv.notify_all();\t\t&#125;\t\tcv.wait(lc);\t&#125;&#125;int main()&#123;\tstd::thread s1(func1);\tstd::thread s2(func2);\tstd::thread s3(func3);\ts1.join();\ts2.join();\ts3.join();    std::cout &lt;&lt; &quot;finished\\n&quot;;\treturn 0;&#125;\n\n\n\næ–¹æ³•2ä»£ç è¿è¡Œç»“æœ\n\n140713900033600 - c: 1140713891640896 - c: 2140713908426304 - c: 3140713900033600 - c: 4140713891640896 - c: 5140713908426304 - c: 6140713900033600 - c: 7140713891640896 - c: 8140713908426304 - c: 9140713900033600 - c: 10140713891640896 - c: 11140713908426304 - c: 12140713900033600 - c: 13140713891640896 - c: 14140713908426304 - c: 15140713900033600 - c: 16140713891640896 - c: 17140713908426304 - c: 18140713900033600 - c: 19140713891640896 - c: 20140713908426304 - c: 21140713900033600 - c: 22140713891640896 - c: 23140713908426304 - c: 24140713900033600 - c: 25140713891640896 - c: 26140713908426304 - c: 27140713900033600 - c: 28140713891640896 - c: 29140713908426304 - c: 30140713900033600 - c: 31140713891640896 - c: 32140713908426304 - c: 33140713900033600 - c: 34140713891640896 - c: 35140713908426304 - c: 36140713900033600 - c: 37140713891640896 - c: 38140713908426304 - c: 39140713900033600 - c: 40140713891640896 - c: 41140713908426304 - c: 42140713900033600 - c: 43140713891640896 - c: 44140713908426304 - c: 45140713900033600 - c: 46140713891640896 - c: 47140713908426304 - c: 48140713900033600 - c: 49140713891640896 - c: 50140713908426304 - c: 51140713900033600 - c: 52140713891640896 - c: 53140713908426304 - c: 54140713900033600 - c: 55140713891640896 - c: 56140713908426304 - c: 57140713900033600 - c: 58140713891640896 - c: 59140713908426304 - c: 60140713900033600 - c: 61140713891640896 - c: 62140713908426304 - c: 63140713900033600 - c: 64140713891640896 - c: 65140713908426304 - c: 66140713900033600 - c: 67140713891640896 - c: 68140713908426304 - c: 69140713900033600 - c: 70140713891640896 - c: 71140713908426304 - c: 72140713900033600 - c: 73140713891640896 - c: 74140713908426304 - c: 75140713900033600 - c: 76140713891640896 - c: 77140713908426304 - c: 78140713900033600 - c: 79140713891640896 - c: 80140713908426304 - c: 81140713900033600 - c: 82140713891640896 - c: 83140713908426304 - c: 84140713900033600 - c: 85140713891640896 - c: 86140713908426304 - c: 87140713900033600 - c: 88140713891640896 - c: 89140713908426304 - c: 90140713900033600 - c: 91140713891640896 - c: 92140713908426304 - c: 93140713900033600 - c: 94140713891640896 - c: 95140713908426304 - c: 96140713900033600 - c: 97140713891640896 - c: 98140713908426304 - c: 99140713900033600 - c: 100finished\n\n\n\n\n\nThe endè‡ªå·±å¹³æ—¶ä¸å¤šç»ƒä¹ ï¼Œåªèƒ½å¤§æ„å¤±è†å·äº†â€¦â€¦\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["çº¿ç¨‹","Cpp"]},{"title":"ã€é¢ç»ã€‘C++é¢ç­‹è®°å½• (ä¸€) 231021","url":"/posts/721187015/","content":"è®°å½•éƒ¨åˆ†ä»ç‰›å®¢ç½‘ä¸Šçœ‹åˆ°çš„é¢ç­‹\n\n\n1.å£°æ˜ä¸€ä¸ªvectorï¼Œå½“vectorè¿‡å¤§æ—¶ä¼šæ ˆæº¢å‡ºå—ï¼Ÿç­”æ¡ˆæ˜¯ä¼šã€‚\né»˜è®¤ç”³è¯·çš„vectoræ˜¯æ”¾åœ¨æ ˆåŒºçš„ï¼Œæ ˆåŒºçš„å¤§å°&lt;&lt;å †åŒºçš„å¤§å°ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬åœ¨æ ˆåŒºä¸­å¼€è¾Ÿçš„vectorä¸­æ’å…¥å·¨é‡çš„æ•°æ®ï¼Œæ˜¯ä¼šå¯¼è‡´æ ˆæº¢å‡ºçš„ã€‚\nè§£å†³åŠæ³•æ˜¯å°†æ•°æ®å­˜æ”¾åˆ°å †åŒºä¸Šï¼ˆä½¿ç”¨newæ¥åˆ›å»ºvectorï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºï¼‰\n2.å¦‚ä½•å®ç°å¤šæ¬¡è¿è¡Œç¨‹åºä½†åªæœ‰ä¸€ä¸ªåå°è¿›ç¨‹ï¼Ÿä½¿ç”¨å‘½åäº’æ–¥é”ï¼Œç¨‹åºå¯åŠ¨å‰ç”³è¯·é”ã€‚\n\nå¦‚æœé”æ²¡æœ‰è¢«ç”³è¯·ï¼Œä»£è¡¨æ˜¯ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œ\nå¦‚æœé”å·²ç»è¢«å ç”¨ï¼Œä»£è¡¨å·²ç»æœ‰è¿›ç¨‹äº†ï¼Œç›´æ¥é€€å‡ºå½“å‰è¿›ç¨‹ï¼ˆè¿™é‡Œè¦ä½¿ç”¨try_locké¿å…é˜»å¡ç­‰å¾…ï¼‰\n\nåœ¨Linuxä¸‹å¯ä»¥ç”¨å‘½åä¿¡å·é‡æ¥å®ç°ç±»ä¼¼è¿›ç¨‹å…±äº«é”çš„æ“ä½œã€‚è¿™éƒ¨åˆ†å¯ä»¥å»å­¦ä¹ è¿›ç¨‹é€šä¿¡ä¸­ä¿¡å·é‡çš„éƒ¨åˆ†ã€‚\nå’¨è¯¢äº†å‘è¿™ç¯‡é¢ç­‹çš„å¤§ä½¬ï¼Œè¯´æ˜¯ç”¨æ–‡ä»¶ä¿å­˜ä¹‹å‰è¿›ç¨‹çš„PIDï¼Œè¯»å–å‡ºæ¥å°†ä¹‹å‰çš„è¿›ç¨‹killæ‰ã€‚\n3.äºŒåˆ†æ³•çš„å‰ææ˜¯ä»€ä¹ˆï¼Ÿ\næ•°æ®æœ‰åº\næ•°æ®ç»“æ„æ”¯æŒéšæœºè®¿é—®\n\n4.äº’æ–¥é”å’Œè‡ªæ—‹é”æœ‰ä»€ä¹ˆåŒºåˆ«\näº’æ–¥é”æ˜¯åœ¨å†…æ ¸æ€è¿›è¡Œé˜»å¡ç­‰å¾…\nè‡ªæ—‹é”æ˜¯åœ¨ç”¨æˆ·æ€ä¸æ–­å¾ªç¯æ²¦é™·æ£€æµ‹é”çš„çŠ¶æ€\n\nå¦‚æœä½¿ç”¨åœºæ™¯æ˜¯è¾ƒé•¿è¿è¡Œçš„å…±äº«èµ„æºï¼Œé‚£ä¹ˆå°±ä½¿ç”¨äº’æ–¥é”ã€‚é¿å…è‡ªæ—‹é”ä¸æ–­æ²¦é™·æ£€æµ‹æ¶ˆè€—å¤§é‡CPUèµ„æºã€‚\nå¦‚æœä½¿ç”¨åœºæ™¯çš„å…±äº«èµ„æºè®¿é—®é€Ÿåº¦å¿«ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è‡ªæ—‹é”ã€‚é¿å…äº’æ–¥é”é¢‘ç¹è¿›è¡Œç”¨æˆ·ã€å†…æ ¸æ€çš„è½¬æ¢è€Œé€ æˆæ¶ˆè€—ï¼ˆè¿™é‡ŒæŒ‡å…¶ä»–éœ€è¦è·å–é”çš„è¿›ç¨‹å¾—è¿›å…¥å†…æ ¸æ€é˜»å¡ç­‰å¾…ï¼‰\n5.TCPä¸‰æ¬¡æ¡æ‰‹é™¤äº†åºåˆ—å·è¿˜å‘äº†ä»€ä¹ˆå…¶ä»–ä¸œè¥¿ï¼Ÿ\nSYNå’ŒACKè¿™äº›è¡¨è®°ä½ï¼ˆå…·ä½“å¤ä¹ ä¸‰æ¬¡æ¡æ‰‹æ¯ä¸ªé˜¶æ®µçš„å‘é€ï¼‰\nåŒæ–¹æœåŠ¡è¿›ç¨‹çš„ç«¯å£å·\nèµ·å§‹åºåˆ—å·å’Œå¯¹å¯¹æ–¹å‘é€çš„SYNæŠ¥æ–‡çš„åº”ç­”åºåˆ—å·\nTCPæ ¡éªŒå’Œ\nTCPçª—å£å¤§å°\n\nåç»­å»ºç«‹è¿æ¥åï¼Œå°±ä¼šæ ¹æ®åŒæ–¹çš„çª—å£å¤§å°å’Œæ•°æ®çš„åºåˆ—å·å¼€å§‹ç›¸äº’é€šä¿¡ã€‚\n6.å­ç±»é‡å†™çˆ¶ç±»å‡½æ•°ï¼Œå­ç±»ä¸­è¯¥å‡½æ•°å£°æ˜ä¸ºprivateï¼Œèƒ½å¦é‡å†™æˆåŠŸï¼Ÿç”¨ä¸‹é¢è¿™ä¸ªæ¯›å¯æˆ¿æ¥è¿›è¡Œæµ‹è¯•ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å­ç±»çš„é‡å†™å‡½æ•°éƒ½å’Œçˆ¶ç±»æœ‰ç›¸åŒçš„ä½œç”¨åŸŸå£°æ˜ç¬¦ã€‚\nclass A&#123;public:\tvirtual void test()\t&#123;\t\tfoo1();\t\tfoo2();\t\tfoo3();\t&#125;\tvirtual void foo1()\t&#123;\t\tcout &lt;&lt; &quot;A::foo1&quot; &lt;&lt; endl;\t&#125;protected:\tvirtual void foo2()\t&#123;\t\tcout &lt;&lt; &quot;A::foo2&quot; &lt;&lt; endl;\t&#125;private:\tvirtual void foo3()\t&#123;\t\tcout &lt;&lt; &quot;A::foo3&quot; &lt;&lt; endl;\t&#125;&#125;;class B : public A&#123;public:\tvoid test()\t&#123;\t\tfoo1();\t\tfoo2();\t\tfoo3();\t&#125;\tvirtual void foo1() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo1&quot; &lt;&lt; endl;\t&#125;protected:\tvirtual void foo2() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo2&quot; &lt;&lt; endl;\t&#125;private:\tvirtual void foo3() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo3&quot; &lt;&lt; endl;\t&#125;&#125;;int main()&#123;\tB b;\tb.test();\tcout &lt;&lt; &quot;----&quot; &lt;&lt; endl;\tA *bb = &amp;b;\tbb-&gt;test();\treturn 0;&#125;\n\nç›´æ¥è¿è¡Œï¼Œç»“æœä¹Ÿç¬¦åˆé¢„æœŸï¼Œç›®å‰è°ƒç”¨çš„æ˜¯å­ç±»é‡å†™åçš„è™šå‡½æ•°ï¼Œæ‰€æœ‰å‡½æ•°éƒ½é‡å†™æˆåŠŸã€‚\nB::foo1B::foo2B::foo3----B::foo1B::foo2B::foo3\n\nclass B : public A&#123;public:\tvoid test()\t&#123;\t\tfoo1();\t\tfoo2();\t\tfoo3();\t&#125;\tvirtual void foo2() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo2&quot; &lt;&lt; endl;\t&#125;protected:\tvirtual void foo3() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo3&quot; &lt;&lt; endl;\t&#125;private:\tvirtual void foo1() override\t&#123;\t\tcout &lt;&lt; &quot;B::foo1&quot; &lt;&lt; endl;\t&#125;&#125;;// ç¼–è¯‘èƒ½é€šè¿‡ï¼Œè¿è¡Œè¾“å‡ºå’Œä¸Šæ–¹æ²¡åŒºåˆ«\n\næˆ‘å°è¯•äº†å„ç§ä¿®æ”¹ä½œç”¨åŸŸçš„æ–¹å¼ï¼ŒåŒ…æ‹¬å°†å­ç±»ä¸­foo3å‡½æ•°æ”¹æˆå…¬æœ‰ï¼Œfoo1å‡½æ•°æ”¹æˆç§æœ‰ï¼Œéƒ½èƒ½æ­£å¸¸å®Œæˆé‡å†™ã€‚è¿™é‡Œçš„ä½œç”¨åŸŸå£°æ˜ç¬¦åªæ˜¯ä¼šæ”¹å˜å­ç±»å¤–æ˜¯å¦èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå’Œèƒ½å¦å®Œæˆè™šå‡½æ•°é‡å†™æ— å…³ï¼\nè¯·æ³¨æ„ï¼Œå¦‚æœä½ å°†ç»§æ‰¿æ–¹å¼ç”±publicæ”¹æˆprivateï¼Œé‚£ä¹ˆå°±æ— æ³•åœ¨ç±»å¤–ä½¿ç”¨çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡äº†\nâ•°â”€ g++ test2.cpp -o testtest2.cpp: In function â€˜int main()â€™:test2.cpp:316:11: error: â€˜Aâ€™ is an inaccessible base of â€˜Bâ€™  A *bb = &amp;b;\n\nä½†è¿™ä¾æ—§ä¸å½±å“å­ç±»å‡½æ•°é‡å†™çˆ¶ç±»å‡½æ•°ï¼ˆæˆ‘çš„ä¾æ®æ˜¯overrideå…³é”®å­—æ²¡æœ‰æŠ¥é”™ï¼‰\n7.pthread_createèƒ½ä¼ å…¥ç±»æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆå—å¯ä»¥ï¼Œä½†æ˜¯å¿…é¡»æ˜¯é™æ€æˆå‘˜å‡½æ•°ã€‚\nå¦‚æœæ˜¯æ™®é€šæˆå‘˜å‡½æ•°ï¼Œé‚£å°±éœ€è¦ç”¨ä¸­é—´å‡½æ•°æ¥å¤„ç†ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ã€‚\n#include &lt;iostream&gt;#include &lt;functional&gt;#include &lt;pthread.h&gt;void* threadFunc(void* arg) &#123;    std::function&lt;void()&gt; func = *reinterpret_cast&lt;std::function&lt;void()&gt;*&gt;(arg);    func();    return nullptr;&#125;int main() &#123;    std::function&lt;void()&gt; myFunc = []() &#123;        std::cout &lt;&lt; &quot;Hello from thread!&quot; &lt;&lt; std::endl;    &#125;;    pthread_t thread;    pthread_create(&amp;thread, nullptr, &amp;threadFunc, reinterpret_cast&lt;void*&gt;(&amp;myFunc));    // ç­‰å¾…çº¿ç¨‹ç»“æŸ    pthread_join(thread, nullptr);    return 0;&#125;\n\næˆ‘ä»¬å¯ä»¥ç”¨std::functionåŒ…è£…ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œå¹¶ç”¨std::bindå°†å¯¹è±¡çš„thisæŒ‡é’ˆç»‘å®šåˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šã€‚å¤–å±‚å†å¥—ä¸Šä¸€ä¸ªç”¨äºæ‰§è¡Œè¯¥å‡½æ•°çš„voidå‡½æ•°ï¼Œå°±èƒ½ä¼ ç»™pthread_createã€‚\nstd::functionçš„å¯¹è±¡ä¸èƒ½ç›´æ¥ä¼ ç»™Cè¯­è¨€çš„å‡½æ•°æŒ‡é’ˆï¼Œå³ä¾¿å‚æ•°å¯¹åº”ã€‚ä¼šæŠ¥é”™ã€‚\n8.å‡½æ•°å†…staticå˜é‡çš„ä½œç”¨åœ¨å‡½æ•°å†…å®šä¹‰ä¸€ä¸ªstaticå˜é‡ï¼Œè¯¥å˜é‡åªä¼šåœ¨è¿›å…¥è¿™ä¸ªå‡½æ•°çš„æ—¶å€™åˆå§‹åŒ–ä¸€æ¬¡ã€‚\n// è®¡ç®—æŸä¸€æœˆçš„1å·æ˜¯ä¸€å¹´çš„ç¬¬å‡ å¤©(ä¸è€ƒè™‘é—°å¹´)int DayOfYear(int month)&#123;    static int day_array = &#123;0,31,59,90,120,151,181,212,243,273,304,334&#125;;    return day_array[month];&#125;\n\næ¯”å¦‚ä¸Šé¢çš„å‡½æ•°ï¼Œæˆ‘ä»¬å®šä¹‰çš„dayæ•°ç»„å°±åªä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥è¿™ä¸ªå‡½æ•°çš„æ—¶å€™åˆå§‹åŒ–ã€‚ä¹‹åè¿›å…¥è¿™ä¸ªå‡½æ•°å°†ä¸åœ¨åˆå§‹åŒ–ï¼Œå°±èŠ‚çœäº†åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„çš„æ¶ˆè€—ã€‚å‡ºäº†è¿™ä¸ªå‡½æ•°åï¼Œè¯¥æ•°ç»„å˜é‡ä¾æ—§å­˜åœ¨ã€‚\nè¯·æ³¨æ„ï¼Œè¿™ä¸ªstaticè¯­å¥å¹¶ä¸åªæ˜¯å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå®é™…ä¸Šè¿™ä¸€è¡Œè¯­å¥åœ¨è¯¥å‡½æ•°ä¸­éƒ½åªä¼šè¿›è¡Œä¸€æ¬¡\nbool checkFlag()&#123;\tstatic bool flag = false;    if(!flag)&#123;        // ..è¿›è¡Œå¯¹åº”ä¿®æ”¹    &#125;&#125;\n\næ¯”å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¦‚æœç”¨æ­£å¸¸æ€ç»´æ¥ç†è§£ï¼Œä½ ä¼šè§‰å¾—è¿™ä¸ªifè¯­å¥æ¯æ¬¡éƒ½ä¼šåˆ¤æ–­ä¸ºçœŸè€Œè¿›å…¥å…¶ä¸­ã€‚ä½†å®é™…ä¸Šflagçš„å®šä¹‰åªä¼šè¢«å®šä¹‰ä¸€æ¬¡ï¼Œåªè¦æˆ‘ä»¬åœ¨ifä¸­å°†å…¶æ”¹æˆäº†trueï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è¿›å…¥è¯¥å‡½æ•°çš„æ—¶å€™ï¼Œflagä¾æ—§ä¼šæ˜¯trueï¼Œstatic bool flag = false;è¯­å¥ä¼šè¢«ç›´æ¥è·³è¿‡ï¼Œå¹¶ä¸ä¼šå†æ¬¡æ‰§è¡Œèµ‹å€¼ï¼\næˆ‘ä¹‹å‰ç†è§£çš„å°±æ˜¯flagå˜é‡åªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œä½†staticåçš„èµ‹å€¼ä¾æ—§ä¼šæ‰§è¡Œã€‚è¿™ä¸ªç†è§£æ˜¯é”™è¯¯çš„ï¼\n9.ç§æœ‰staticæˆå‘˜å‡½æ•°çš„æ„ä¹‰ï¼Ÿè¿™ä¸ªé—®é¢˜æ¯”è¾ƒæœ‰æ„æ€ï¼Œæˆ‘ä»¬çŸ¥é“staticå‡½æ•°å±äºæ•´ä¸ªç±»ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åä½œç”¨åŸŸè°ƒç”¨ã€‚ä¸”staticå‡½æ•°ä¸­æ— æ³•è®¿é—®ä»»ä½•éstaticçš„æˆå‘˜å˜é‡ã€‚\nä½†æ˜¯ï¼Œå¦‚æœç»™ä½ ä¸ªstaticçš„ç§æœ‰æˆå‘˜å‡½æ•°ï¼Œå®ƒåˆæœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ\n\nç§æœ‰staticæˆå‘˜æ˜¯æ— æ³•é€šè¿‡ç±»åè°ƒç”¨çš„\nä»–ä¹Ÿæ²¡æœ‰åŠæ³•è®¿é—®ç±»ä¸­éstaticæˆå‘˜å˜é‡\n\nå¯ä»¥è¿™ä¹ˆç†è§£ï¼šæˆ‘æœ‰ä¸€ä¸ªæ–¹æ³•åªåœ¨è¿™ä¸ªç±»é‡Œé¢éœ€è¦ï¼Œè¿™ä¸ªæ–¹æ³•ä¸éœ€è¦ä½¿ç”¨æˆå‘˜å˜é‡ï¼Œå¯ä»¥é€šè¿‡ä¼ å‚å®ç°ï¼ˆæ¯”å¦‚è®¡ç®—ä»€ä¹ˆçš„ï¼‰\nä½†æ˜¯ï¼Œæˆ‘åˆä¸æƒ³å®ƒçš„å‘½åæ±¡æŸ“çˆ¶ä½œç”¨åŸŸã€‚\né‚£ä¹ˆï¼Œæˆ‘å°±å¯ä»¥æŠŠå®ƒå†™ä¸ºç±»çš„ç§æœ‰æˆå‘˜å‡½æ•°ï¼Œå¹¶åŠ ä¸Šstaticå‘Šè¯‰å…¶ä»–äººï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå•çº¯çš„æ–¹æ³•ç±»ï¼Œä¸éœ€è¦ä½¿ç”¨ç±»çš„æˆå‘˜å˜é‡ã€‚\nå½“ç„¶ï¼ŒåŠ ä¸Šstaticåªæ˜¯ä¸€ä¸ªç¼–ç¨‹ä¹ æƒ¯ç½¢äº†ï¼Œå®é™…ä¸Šè¿™ç§æƒ…å†µä¸å†™staticä¹Ÿæ— æ‰€è°“ã€‚\n","categories":["æ±‚èŒè·¯ä¸Šä¸€å»ä¸å¤è¿”"],"tags":["é¢ç»"]},{"title":"ã€MySQLã€‘å­—èŠ‚è·³åŠ¨MySQLè¿ç¯40é—®","url":"/posts/3873856211/","content":"å­—èŠ‚MySQLè¿ç¯40é—®ï¼Œç½‘å›¾\n\n\n\nè™½ç„¶æ„Ÿè§‰è¿™ç©æ„å’Œå­—èŠ‚è·³åŠ¨æ²¡å…³ç³»ï¼Œä½†æ˜¯ç®¡ä»–çš„ï¼Ÿç›´æ¥å¼€å§‹å›ç­”ï¼\n1.MySQLä¸­æœ‰å“ªå‡ ç§é”ï¼Ÿ\nä¼šçš„ä¸å…¨ï¼Œæ‰€ä»¥æŸ¥çš„GPT\n\nMySQLä¸­æœ‰å¤šç§ç±»å‹çš„é”ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š\n\nå…±äº«é”ï¼ˆShared Lockï¼‰ï¼šä¹Ÿç§°ä¸ºè¯»é”ï¼Œå¤šä¸ªä¼šè¯å¯ä»¥åŒæ—¶æŒæœ‰å…±äº«é”ï¼Œå¹¶ä¸”ä¸äº’æ–¥ã€‚å…±äº«é”é€‚ç”¨äºè¯»å–æ“ä½œï¼Œå¤šä¸ªä¼šè¯å¯ä»¥å¹¶å‘è¯»å–åŒä¸€ä»½æ•°æ®è€Œä¸ä¼šäº§ç”Ÿå†²çªã€‚\næ’ä»–é”ï¼ˆExclusive Lockï¼‰ï¼šä¹Ÿç§°ä¸ºå†™é”ï¼Œæ’ä»–é”ä¸å…¶ä»–ä»»ä½•é”éƒ½äº’æ–¥ï¼Œåªæœ‰ä¸€ä¸ªä¼šè¯å¯ä»¥æŒæœ‰æ’ä»–é”ã€‚æ’ä»–é”é€‚ç”¨äºå†™å…¥æˆ–ä¿®æ”¹æ“ä½œï¼Œç¡®ä¿åœ¨æŸä¸ªä¼šè¯æŒæœ‰æ’ä»–é”çš„æ—¶å€™ï¼Œå…¶ä»–ä¼šè¯æ— æ³•åŒæ—¶è¿›è¡Œå†™å…¥æ“ä½œã€‚\nè®°å½•é”ï¼ˆRecord Lockï¼‰ï¼šè®°å½•é”ï¼ˆè¡Œé”ï¼‰æ˜¯é’ˆå¯¹æŸæ¡è®°å½•çš„é”å®šï¼Œç”¨äºä¿æŠ¤ç‰¹å®šè®°å½•çš„å®Œæ•´æ€§ã€‚åœ¨ä½¿ç”¨InnoDBå­˜å‚¨å¼•æ“æ—¶ï¼Œè¯»å–æˆ–ä¿®æ”¹æŸæ¡è®°å½•æ—¶ä¼šè‡ªåŠ¨ç»™è¯¥è®°å½•åŠ ä¸Šè®°å½•é”ï¼Œå…¶ä»–ä¼šè¯åˆ™æ— æ³•å¯¹è¯¥è®°å½•è¿›è¡Œå¹¶å‘å†™å…¥æˆ–åˆ é™¤æ“ä½œã€‚\nGapé”ï¼šGapé”æ˜¯InnoDBå¼•æ“çš„ä¸€ç§é”æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢å¹»è¯»ã€‚å®ƒé”å®šäº†ä¸€ä¸ªèŒƒå›´ï¼Œä½†ä¸åŒ…å«å®é™…çš„è®°å½•ï¼Œç”¨äºé˜²æ­¢å…¶ä»–ä¼šè¯åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°è®°å½•ï¼Œä»¥é¿å…å¹»è¯»ç°è±¡çš„å‘ç”Ÿã€‚\nè¡¨é”ï¼ˆTable Lockï¼‰ï¼šè¡¨é”æ˜¯å¯¹æ•´ä¸ªè¡¨æ ¼è¿›è¡Œé”å®šï¼Œå¯ä»¥åœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ä½¿ç”¨ï¼Œä½†ä¼šé˜»å¡å…¶ä»–ä¼šè¯çš„è¯»å–å’Œå†™å…¥æ“ä½œã€‚åœ¨éœ€è¦å¹¶å‘è¯»å†™çš„æƒ…å†µä¸‹ï¼Œè¡¨é”çš„æ€§èƒ½è¾ƒä½ï¼Œå› æ­¤ä¸€èˆ¬ä¸æ¨èä½¿ç”¨ã€‚\n\né™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªNEXT-KEYé”ï¼š\nNEXT-KEY é”æ˜¯ InnoDB å­˜å‚¨å¼•æ“ä¸­çš„ä¸€ç§é”æœºåˆ¶ï¼Œç”¨äºè§£å†³å¹»è¯»é—®é¢˜ã€‚å®ƒæ˜¯é€šè¿‡å°† Gap é”å’Œ è®°å½•é” ç»„åˆè€Œæˆçš„ã€‚\nå…·ä½“æ¥è¯´ï¼Œå½“ä¸€ä¸ªäº‹åŠ¡åœ¨ InnoDB è¡¨ä¸­æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œå¦‚ä½¿ç”¨ &lt;ã€&lt;=ã€&gt;ã€&gt;= ç­‰æ“ä½œç¬¦ï¼ŒInnoDB å¼•æ“ä¼šä¸ºæŸ¥è¯¢æ¶‰åŠåˆ°çš„èŒƒå›´åŠ ä¸Š NEXT-KEY é”ã€‚è¿™ä¸ª NEXT-KEY é”åŒ…å«ä¸¤éƒ¨åˆ†ï¼š\n\nGap é”ï¼šé”å®šäº†æŸ¥è¯¢èŒƒå›´å†…çš„é—´éš™ï¼ˆGapï¼‰ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å‘è¯¥èŒƒå›´å†…æ’å…¥æ–°çš„è®°å½•ã€‚\nè®°å½•é”ï¼šé”å®šäº†æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„è®°å½•ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡å¯¹è¿™äº›è®°å½•è¿›è¡Œå¹¶å‘ä¿®æ”¹æˆ–åˆ é™¤ã€‚\n\né€šè¿‡ä½¿ç”¨ NEXT-KEY é”ï¼ŒInnoDB å¯ä»¥æœ‰æ•ˆåœ°é¿å…å¹»è¯»ç°è±¡çš„å‘ç”Ÿã€‚å®ƒä¿è¯äº†åœ¨ä¸€ä¸ªäº‹åŠ¡è¯»å–ä¸€ä¸ªèŒƒå›´çš„æ•°æ®æ—¶ï¼Œå…¶ä»–äº‹åŠ¡æ— æ³•å¹¶å‘åœ°åœ¨è¯¥èŒƒå›´å†…æ’å…¥æ–°çš„è®°å½•ï¼Œä»è€Œä¿è¯äº†è¯»å–çš„ä¸€è‡´æ€§ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNEXT-KEY é”åªåœ¨äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰æˆ–æ›´é«˜çº§åˆ«æ—¶ä½¿ç”¨ï¼ˆMySQLé»˜è®¤éš”ç¦»çº§åˆ«ä¸ºå¯é‡å¤è¯»ï¼‰ã€‚åœ¨è¾ƒé«˜çš„å¹¶å‘ç¯å¢ƒä¸‹ï¼Œä½¿ç”¨ NEXT-KEY é”å¯èƒ½ä¼šå¢åŠ é”å†²çªçš„æ¦‚ç‡ï¼Œå› æ­¤åœ¨è®¾è®¡æ•°æ®åº“å’ŒæŸ¥è¯¢æ—¶éœ€è¦è€ƒè™‘åˆ°é”çš„å¼€é”€å’Œäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚\n2.MySQLä¸­æœ‰å“ªäº›ä¸åŒçš„è¡¨æ ¼ï¼Ÿ\nè¿™ä¸ªä¹Ÿæ˜¯GPTå›ç­”çš„ï¼Œæ³¨æ„ï¼Œè¡¨æ ¼å’Œå­˜å‚¨å¼•æ“ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼\n\nåœ¨MySQLä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ä¸åŒçš„è¡¨æ ¼ç±»å‹ï¼š\n\nMyISAMï¼šMyISAMæ˜¯æ—§ç‰ˆæœ¬MySQLçš„é»˜è®¤è¡¨æ ¼ç±»å‹ã€‚å®ƒæä¾›äº†å¿«é€Ÿçš„è¯»å–é€Ÿåº¦ï¼Œé€‚ç”¨äºå¤§é‡çš„å¹¶å‘è¯»å–æ“ä½œã€‚ä¸è¿‡ï¼ŒMyISAMä¸æ”¯æŒäº‹åŠ¡å¤„ç†å’Œå´©æºƒæ¢å¤åŠŸèƒ½ã€‚\nInnoDBï¼šInnoDBæ˜¯ä¸€ç§æ”¯æŒäº‹åŠ¡å¤„ç†å’Œå´©æºƒæ¢å¤åŠŸèƒ½çš„è¡¨æ ¼ç±»å‹ã€‚å®ƒæä¾›äº†è¡Œçº§é”å®šå’Œå¤–é”®çº¦æŸç­‰é«˜çº§åŠŸèƒ½ï¼Œé€‚ç”¨äºéœ€è¦æ•°æ®å®Œæ•´æ€§å’Œå¹¶å‘å†™å…¥æ“ä½œçš„åœºæ™¯ã€‚InnoDBæ˜¯MySQL 5.5ç‰ˆæœ¬åçš„é»˜è®¤è¡¨æ ¼ç±»å‹ã€‚\nMemoryï¼šMemoryï¼ˆä¹Ÿç§°ä¸ºHeapï¼‰è¡¨æ ¼æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶è¡¨æ ¼ç±»å‹ã€‚å®ƒåœ¨è¯»å–å’Œå†™å…¥æ–¹é¢éå¸¸å¿«é€Ÿï¼Œä½†å®ƒçš„æ•°æ®æ˜¯ä¸´æ—¶çš„ï¼Œå½“æ•°æ®åº“æœåŠ¡å™¨é‡å¯æ—¶ï¼Œè¡¨æ ¼ä¸­çš„æ•°æ®å°†ä¼šä¸¢å¤±ã€‚\nArchiveï¼šArchiveè¡¨æ ¼æ˜¯ä¸€ç§é«˜åº¦å‹ç¼©çš„è¡¨æ ¼ç±»å‹ï¼Œé€‚ç”¨äºå­˜å‚¨å¤§é‡å†å²æ•°æ®å’Œå½’æ¡£æ•°æ®ã€‚å®ƒå¯¹äºè¯»å–æ“ä½œä¸å¤ªæœ‰æ•ˆï¼Œä½†åœ¨å¤§é‡å†™å…¥å’Œå­˜å‚¨ç©ºé—´æ–¹é¢å…·æœ‰ä¼˜åŠ¿ã€‚\nCSVï¼šCSVè¡¨æ ¼å…è®¸å°†æ•°æ®ä»¥CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ ¼å¼å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œæ”¯æŒå¯¼å…¥å’Œå¯¼å‡ºæ•°æ®ã€‚å®ƒä¸æ”¯æŒç´¢å¼•ï¼Œäº‹åŠ¡å¤„ç†å’Œå…¶ä»–é«˜çº§ç‰¹æ€§ã€‚\n\né™¤äº†ä»¥ä¸Šåˆ—ä¸¾çš„å‡ ç§å¸¸è§çš„è¡¨æ ¼ç±»å‹å¤–ï¼ŒMySQLè¿˜æ”¯æŒå…¶ä»–ä¸€äº›ç‰¹æ®Šç”¨é€”çš„è¡¨æ ¼ç±»å‹ï¼Œå¦‚Partitionedï¼ˆåˆ†åŒºè¡¨æ ¼ï¼‰å’ŒFederatedï¼ˆè”åˆè¡¨æ ¼ï¼‰ç­‰ã€‚\n\nè¡¨æ ¼å’Œå­˜å‚¨å¼•æ“æ˜¯åŒä¸€ä¸ªä¸œè¥¿å—ï¼Ÿå¹¶ä¸æ˜¯ï¼\n\nåœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œè¡¨æ ¼ï¼ˆTableï¼‰æ˜¯æŒ‡ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ•°æ®ç»“æ„ï¼Œç”¨æ¥ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ã€‚ä¸€å¼ è¡¨æ ¼ç”±è‹¥å¹²åˆ—ï¼ˆColumnï¼‰å’Œè‹¥å¹²è¡Œï¼ˆRowï¼‰ç»„æˆï¼Œæ¯åˆ—å®šä¹‰äº†ä¸€ç§æ•°æ®ç±»å‹å’Œä¸€ä¸ªå­—æ®µåï¼Œè¡¨æ ¼ä¸­çš„æ¯ä¸€è¡Œåˆ™ä»£è¡¨ä¸€ä¸ªå®ä½“æˆ–è®°å½•ï¼Œæ¯ä¸ªå•å…ƒæ ¼å­˜å‚¨ç€å¯¹åº”åˆ—çš„ä¸€ä¸ªæ•°å€¼æˆ–å­—ç¬¦ä¸²ã€‚\nå­˜å‚¨å¼•æ“ï¼ˆStorage Engineï¼‰åˆ™æ˜¯æŒ‡å®ç°äº†æ•°æ®åº“çš„è¡¨æ ¼å’Œç´¢å¼•ç­‰åŠŸèƒ½çš„åº•å±‚è½¯ä»¶æ¨¡å—ï¼Œå®ƒè´Ÿè´£å°†è¡¨æ ¼æ•°æ®å­˜å‚¨åˆ°ç£ç›˜ã€è·Ÿè¸ªå¹¶å¤„ç†äº‹åŠ¡ã€æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ç­‰ä»»åŠ¡ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“å…·æœ‰å„è‡ªçš„ç‰¹ç‚¹å’Œä¼˜ç¼ºç‚¹ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹é€‰æ‹©åˆé€‚çš„å­˜å‚¨å¼•æ“å¯ä»¥æé«˜æ•°æ®åº“çš„æ€§èƒ½å’Œå¯é æ€§ã€‚\n3.MyISAMå’ŒInnoDBçš„åŒºåˆ«ï¼ŸMyISAM\n\nä¸æ”¯æŒäº‹åŠ¡ï¼›\né‡‡ç”¨éèšç°‡ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•å’Œä¸»é”®ç´¢å¼•çš„å½¢å¼ç›¸åŒï¼›\nä¸€å¼ è¡¨åŒ…å«ä¸‰ä¸ªæœ¬åœ°æ–‡ä»¶ï¼›\n\nInnoDB\n\næ”¯æŒäº‹åŠ¡ï¼›\né‡‡ç”¨èšç°‡ç´¢å¼•ï¼Œæ™®é€šç´¢å¼•å­˜æ”¾çš„æ˜¯ä¸»é”®ç´¢å¼•ä¸­çš„keyå€¼ï¼Œéœ€è¦å›è¡¨æŸ¥è¯¢ï¼›å¯ä»¥ç”¨ç´¢å¼•è¦†ç›–æ¥ä¼˜åŒ–ï¼›\nä¸€å¼ è¡¨åŒ…å«ä¸¤ä¸ªæœ¬åœ°æ–‡ä»¶ï¼›\n\n4.InnoDBæ”¯æŒçš„å››ç§äº‹åŠ¡éš”ç¦»çº§åˆ«å’ŒåŒºåˆ«å››ç§éš”ç¦»çº§åˆ«ï¼šè¯»æœªæäº¤ï¼Œè¯»å·²æäº¤ï¼Œå¯é‡å¤è¯»ï¼Œä¸²è¡ŒåŒ–ï¼›\nè¿™éƒ¨åˆ†ç›´æ¥å»çœ‹æˆ‘çš„MySQLç´¢å¼•åšå®¢ï¼Œé‡Œé¢è¯¦ç»†ä»‹ç»äº†åŒºåˆ«ï¼Œè¿™é‡Œå°±ä¸é‡å†™ä¸€éäº†ï¼›\n5.CHARå’ŒVARCHARçš„åŒºåˆ«\ncharæ˜¯å®šé•¿å­—ç¬¦ä¸²ï¼Œæœ€é•¿255ï¼›varcharæ˜¯å˜é•¿å­—ç¬¦ä¸²ï¼Œæœ€é•¿65535ï¼›\nè¿™å°±æ„å‘³ç€varcharéœ€è¦æ›´å¤šç©ºé—´æ¥å­˜æ”¾å½“å‰å­—ç¬¦ä¸²é•¿åº¦ç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šæ ¹æ®å½“å‰å­—ç¬¦ä¸²é•¿åº¦åŠ¨æ€å¼€è¾Ÿç©ºé—´å¤§å°ï¼Œä¸ä¼šæœ‰é¢å¤–çš„å­˜å‚¨ç©ºé—´æµªè´¹ï¼›\nè€Œcharæ˜¯å®šæ­»çš„ç©ºé—´ï¼Œchar(8)é‡Œé¢å³ä¾¿åªæœ‰ä¸€ä¸ªå­—ç¬¦ä¹Ÿä¼šå ç”¨å…«ä¸ªçš„ç©ºé—´ï¼ˆä¼šç”¨ç©ºæ ¼è¿›è¡Œè¡¥é½ï¼‰ï¼›\nåœ¨å­—ç¬¦ä¸²é•¿åº¦ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚è®¡ç®—é•¿åº¦ç¡®å®šçš„MD5ï¼Œé‚£å°±å¯ä»¥ç”¨charå®šé•¿å­˜å‚¨ï¼›é•¿åº¦ä¸ç¡®å®šçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚äººåã€é‚®ç®±ç­‰ä¿¡æ¯ï¼Œå¯ä»¥é‡‡ç”¨varcharï¼›\n\né¡ºå¸¦è¯´ä¸€ä¸‹varcharå’Œtextçš„åŒºåˆ«ï¼›éœ€è¦è¿›è¡Œç´¢å¼•çš„é•¿æ–‡å¯ä»¥ç”¨TEXTè¿›è¡Œå­˜å‚¨ï¼ˆæ³¨æ„ï¼Œåªæœ‰MyISAMæ”¯æŒå…¨æ–‡ç´¢å¼•ï¼‰\n\nå­˜å‚¨ç©ºé—´ï¼šVARCHARåˆ—å­˜å‚¨çš„å†…å®¹é•¿åº¦æ˜¯å¯å˜çš„ï¼Œè€ŒTEXTåˆ—å¯ä»¥å­˜å‚¨å¤§é‡çš„å¯å˜é•¿åº¦çš„æ–‡æœ¬æ•°æ®ã€‚VARCHARåœ¨å­˜å‚¨æ—¶ä¼šæ ¹æ®å®é™…å­˜å‚¨çš„å†…å®¹é•¿åº¦è¿›è¡Œè°ƒæ•´ï¼Œè€ŒTEXTæ²¡æœ‰å›ºå®šçš„æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨éå¸¸é•¿çš„æ–‡æœ¬ã€‚ç”±äºTEXTå¯ä»¥å­˜å‚¨æ›´å¤§çš„æ•°æ®é‡ï¼Œå› æ­¤å®ƒé€šå¸¸å ç”¨æ›´å¤šçš„å­˜å‚¨ç©ºé—´ã€‚\næŸ¥è¯¢æ€§èƒ½ï¼šç”±äºVARCHARå…·æœ‰å›ºå®šçš„æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œæ•°æ®åº“å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–å’Œç®¡ç†å­˜å‚¨ç©ºé—´ï¼Œè¿™å¯èƒ½ä¼šåœ¨æŸäº›æƒ…å†µä¸‹æå‡æŸ¥è¯¢æ€§èƒ½ã€‚è€ŒTEXTç”±äºå…¶å¯å˜é•¿åº¦å’Œå¤§å®¹é‡ï¼Œå¯èƒ½ä¼šå¯¹æŸäº›æŸ¥è¯¢æ“ä½œç¨æœ‰å½±å“ã€‚\nç´¢å¼•å’Œæ’åºï¼šVARCHARå¯ä»¥è¢«ç´¢å¼•å’Œæ’åºï¼Œè¿™æ„å‘³ç€å¯ä»¥æ ¹æ®è¿™äº›åˆ—è¿›è¡Œå¿«é€Ÿæœç´¢å’Œæ’åºæ“ä½œã€‚è€ŒTEXTç±»å‹é€šå¸¸ä¸ç›´æ¥æ”¯æŒç´¢å¼•å’Œæ’åºï¼Œéœ€è¦é¢å¤–çš„é…ç½®å’Œå¤„ç†æ‰èƒ½å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚\n\nå¦‚ä¸‹user1è¡¨åšæµ‹è¯•ï¼Œä¼šå‘ç°æˆ‘ä»¬æ— æ³•ç»™TEXTç±»å‹ä¸Šæ™®é€šç´¢å¼•ã€‚ç»™å‡ºçš„æç¤ºæ˜¯ï¼ŒBLOG/TEXTç±»å‹ä¸èƒ½åœ¨æ²¡æœ‰æŒ‡å®šé•¿åº¦çš„æ—¶å€™ä¸Šç´¢å¼•ï¼›å› ä¸ºä½ çš„é•¿åº¦ä¸ç¡®å®šï¼Œå¦‚æœMySQLå°†ä¸€ä¸ªå‡ ä¸‡å­—çš„TEXTå­˜åˆ°å†…å­˜é‡Œé¢ä½œä¸ºç´¢å¼•èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ä¼šå ç”¨è¿‡å¤šçš„å†…å­˜ç©ºé—´ã€‚\nMariaDB [hello_mysql]&gt; desc user1;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   | PRI | NULL    |       || name  | varchar(200)     | NO   |     | NULL    |       || info  | text             | NO   |     | NULL    |       |+-------+------------------+------+-----+---------+-------+3 rows in set (0.001 sec)MariaDB [hello_mysql]&gt; alter table user1 add index(info);ERROR 1170 (42000): BLOB/TEXT column &#x27;info&#x27; used in key specification without a key length\n\nå³ä¾¿åœ¨åˆ›å»ºåˆ—çš„æ—¶å€™ç»™å®šäº†TEXTçš„é•¿åº¦ï¼Œä¾æ—§ä¸èƒ½åˆ›å»ºç´¢å¼•ã€‚\nMariaDB [hello_mysql]&gt; alter table user1 add info1 TEXT(20) NOT NULL;Query OK, 0 rows affected (0.002 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello_mysql]&gt; desc user1;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   | PRI | NULL    |       || name  | varchar(200)     | NO   |     | NULL    |       || info  | text             | NO   |     | NULL    |       || info1 | tinytext         | NO   |     | NULL    |       |+-------+------------------+------+-----+---------+-------+4 rows in set (0.001 sec)MariaDB [hello_mysql]&gt; alter table user1 add index(info1);ERROR 1170 (42000): BLOB/TEXT column &#x27;info1&#x27; used in key specification without a key length\n\næ­£ç¡®çš„å†™æ³•å¦‚ä¸‹ï¼Œéœ€è¦åœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™ï¼Œæ‹¬å·æŒ‡å®šç´¢å¼•çš„é•¿åº¦ï¼›æ¯”å¦‚index(info1(10))å«ä¹‰å°±æ˜¯ç»™info1åˆ—çš„å‰10ä¸ªå­—ç¬¦å»ºç«‹ç´¢å¼•ã€‚åªè¦TEXTé‡Œé¢å­˜æ”¾çš„æ–‡æœ¬å‰10ä¸ªå­—ç¬¦é‡å¤ç‡ä½ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•å°±æ˜¯æœ‰æ„ä¹‰çš„ï¼\nMariaDB [hello_mysql]&gt; alter table user1 add index(info1(10));Query OK, 0 rows affected (0.007 sec)Records: 0  Duplicates: 0  Warnings: 0\n\n6.ä¸»é”®å’Œå€™é€‰é”®(ç )æœ‰å•¥åŒºåˆ«ï¼Ÿå€™é€‰é”®æ˜¯ä¸€äº›å¯ä»¥é€‰ç”¨ï¼ˆå¤‡é€‰ï¼‰ä¸ºä¸»é”®æˆ–è€…å”¯ä¸€é”®çš„ç±»å‹ï¼›\næ¯”å¦‚ä¸€ä¸ªå­¦ç”Ÿè¡¨é‡Œé¢ï¼ŒåŒ…å«å­¦ç”Ÿä¸»é”®çš„INTè‡ªå¢IDï¼Œå­¦ç”Ÿå­¦å·ï¼Œå­¦ç”Ÿèº«ä»½è¯ï¼Œå­¦ç”Ÿå§“åï¼Œå­¦ç”Ÿæ€§åˆ«ç­‰ç­‰ä¿¡æ¯ï¼›åœ¨è¿™ä¸ªè¡¨é‡Œé¢ï¼Œé™¤äº†ä¸»é”®è¿™ä¸ªINTçš„IDï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå­¦ç”Ÿçš„å­¦å·å’Œå­¦ç”Ÿçš„èº«ä»½è¯ä½œä¸ºä¸»é”®æˆ–è€…å”¯ä¸€é”®ï¼Œå› ä¸ºä»–ä»¬éƒ½åŒ…å«å”¯ä¸€æ€§ï¼\nè¿™æ—¶å€™ï¼Œè¿™äº›å¯ä»¥ä½œä¸ºä¸»é”®çš„åˆ—ï¼Œå°±å«åšå€™é€‰é”®ï¼›\n\nå€™é€‰é”®ä¹Ÿéœ€è¦ä¿æŒå”¯ä¸€æ€§\nå€™é€‰é”®éœ€è¦éµå¾ªæœ€å°åŸåˆ™ï¼Œä¸èƒ½æ˜¯æŸä¸€ä¸ªèšåˆå”¯ä¸€æ ‡è¯†çš„å­é›†ï¼›ï¼ˆæ¯”å¦‚æˆ‘éœ€è¦ç”¨éƒ¨é—¨IDå’Œéƒ¨é—¨å†…å‘˜å·¥IDæ¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå‘˜å·¥ï¼Œæ­¤æ—¶éƒ¨é—¨IDå°±ä¸èƒ½ä½œä¸ºè¿™ä¸ªå‘˜å·¥è¡¨çš„å€™é€‰é”®ï¼Œå› ä¸ºåœ¨æ•´ä¸ªè¡¨ä¸­éƒ¨é—¨IDä¼šé‡å¤ï¼‰\n\nåœ¨ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚ç‡ã€‹è¿™é—¨è¯¾é‡Œé¢ï¼Œä¼šæŠŠé”®ç§°ä½œä¸ºç ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚\n\nåˆ°åº•æ˜¯è°æŠŠkeyç¿»è¯‘æˆç çš„ï¼ŸçœŸæ— è¯­ğŸ˜’\n\n7.myisamchkæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼ˆåœ¨bashä¸‹ä½¿ç”¨ï¼Œä¸æ˜¯åœ¨MySQLå‘½ä»¤è¡Œä½¿ç”¨ï¼‰\n\nMyisamchkæ˜¯MyISAMè¡¨ç»´æŠ¤çš„ä¸€ä¸ªéå¸¸å®ç”¨çš„å·¥å…·ã€‚å¯ä»¥ä½¿ç”¨myisamchkå®ç”¨ç¨‹åºæ¥è·å¾—æœ‰å…³æ•°æ®åº“è¡¨çš„ä¿¡æ¯æˆ–æ£€æŸ¥ã€ä¿®å¤ã€ä¼˜åŒ–ä»–ä»¬ã€‚myisamchké€‚ç”¨MyISAMè¡¨(å¯¹åº”.MYIå’Œ.MYDæ–‡ä»¶çš„è¡¨)ã€‚\n\nè¿™ä¸ªå‘½ä»¤äº†è§£å³å¯ï¼Œä¸‹é¢æ˜¯ä¸¤ç¯‡ä½¿ç”¨åšå®¢ã€‚æœ‰éœ€è¦å†å»æ·±å…¥å­¦ä¹ ç”¨æ³•\nhttp://www.4u4v.net/myisamchk-gadgets-manual.html\nhttps://www.cnblogs.com/analyzer/articles/1381538.html\n8.å¦‚æœè¡¨ä¸­æœ‰ä¸€åˆ—å®šä¹‰ä¸ºTIMESTAMPä¼šå‘ç”Ÿä»€ä¹ˆTIMESTAMPåº•å±‚ä¸€èˆ¬æ˜¯4ä¸ªå­—èŠ‚ï¼Œåœ¨MySQLé‡Œé¢è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ç³»ç»Ÿæ—¶åŒºï¼Œè½¬æˆå¯è¯»æ—¶é—´è¿›è¡Œè¾“å‡ºã€‚åŒ…æ‹¬ä½¿ç”¨cpp develåŒ…è·å–åˆ°çš„ä¹Ÿæ˜¯å¯è¯»æ—¶é—´ï¼›\nå› ä¸ºåªæœ‰4ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥TIMESTAMPæœ€å¤šèƒ½è¡¨ç¤º 1970-01-01 00:00:01åˆ°2038-01-19 03:14:07ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ª2038å¹´é—®é¢˜ï¼Œéœ€è¦æ”¹æˆ8å­—èŠ‚å­˜å‚¨æ‰èƒ½å­˜æ”¾æ›´é•¿çš„æ—¶é—´ã€‚\nå¦å¤–ï¼Œå¦‚æœä½ æƒ³æ›´åŠ ç²¾ç¡®çš„æ ‡è¯†æ—¶é—´ï¼Œè€Œä¸ä¾èµ–äºMySQLå¯¹æ—¶é—´æˆ³çš„è‡ªåŠ¨è½¬æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨BIGINTæˆ–è€…DECIMALç±»å‹æ¥å­˜æ”¾æ—¶é—´æˆ³æ•°å­—ï¼Œå†åœ¨åº”ç”¨å±‚è¿›è¡Œæ—¶é—´æˆ³å’Œå¯è¯»æ—¶é—´ä¹‹é—´çš„è½¬æ¢ã€‚\n9.æ€ä¹ˆçœ‹åˆ°è¡¨æ ¼å®šä¹‰çš„æ‰€æœ‰ç´¢å¼•ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥\nshow index from è¡¨å;show keys from è¡¨å;\n\n10.LIKEå£°æ˜ä¸­çš„%æ˜¯ä»€ä¹ˆæ„æ€ä»£è¡¨é€šé…ç¬¦ï¼ŒåŒ¹é…æ‰€æœ‰å­—ç¬¦ä¸²ã€‚ä¸‹é¢ä¸¾å‡ ä¸ªä¾‹å­\næŸ¥è¯¢ &#x27;å¼ %&#x27;    å¼ ä¸½ä¸½    å¼ æ‰£æ‰£    å¼ ä¸‰    å¼ é˜¿æ–¯é¡¿æŸ¥è¯¢ &#x27;%å¼ %&#x27;\té‡Œå¼ é‡Œ    åå¤§å¼ æ’’æ‰“å‘æŸ¥è¯¢ &#x27;%å¼ &#x27;\txxå¼ \txxxxxå¼ \n\néœ€è¦æ³¨æ„ï¼Œåªæœ‰å…³é”®å­—%çš„ä½¿ç”¨æ–¹å¼æ‰èƒ½ç”¨ä¸Šç´¢å¼•ï¼Œå¦å¤–ä¸¤ç§åŒ¹é…æ–¹å¼æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼\n11.åˆ—å¯¹æ¯”è¿ç®—ç¬¦æ˜¯ä»€ä¹ˆç­‰äº =ä¸ç­‰äº &lt;&gt; !=å¤§äºå’Œå¤§äºç­‰äº  &gt; &gt;=å°äºå’Œå°äºç­‰äº  &lt; &lt;=åŒºé—´ BETWEEN .. AND ...æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ INæ¨¡ç³ŠåŒ¹é… LIKENULLæ¯”è¾ƒ IS NULL, IS NOT NULL\n\n12.BLOBå’ŒTEXTæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸGPTè¯´çš„ï¼š\n\nå­˜å‚¨å®¹é‡ï¼šBLOBå¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œè€ŒTEXTåªèƒ½å­˜å‚¨çº¯æ–‡æœ¬æ•°æ®ã€‚\nå­—ç¬¦é›†æ’åºè§„åˆ™ï¼šBLOBæ²¡æœ‰å­—ç¬¦é›†æ’åºè§„åˆ™ï¼Œè€ŒTEXTæœ‰ï¼Œé»˜è®¤ä¸ºå­—ç¬¦é›†çš„æ’åºè§„åˆ™ã€‚\næ•°æ®æ’åºå’Œæ¯”è¾ƒï¼šBLOBä¼šæŒ‰äºŒè¿›åˆ¶æ–¹å¼è¿›è¡Œæ’åºå’Œæ¯”è¾ƒï¼Œè€ŒTEXTä¼šæŒ‰å­—ç¬¦æ’åºè§„åˆ™è¿›è¡Œæ’åºå’Œæ¯”è¾ƒã€‚\nå­˜å‚¨æ–¹å¼ï¼šBLOBæ•°æ®ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œæ²¡æœ‰å­—ç¬¦é›†è½¬æ¢ï¼›è€ŒTEXTæ•°æ®ä¼šæ ¹æ®å­—ç¬¦é›†è¿›è¡Œè½¬æ¢å’Œå­˜å‚¨ã€‚\nç´¢å¼•ï¼šåœ¨MySQLä¸­ï¼ŒBLOBå’ŒTEXTåˆ—å¯ä»¥æœ‰ç´¢å¼•ï¼Œä½†æœ‰ä¸€äº›é™åˆ¶ã€‚BLOBåˆ—æˆ–å‰ç¼€ç´¢å¼•çš„æœ€å¤§é•¿åº¦æ˜¯768å­—èŠ‚ï¼Œå¯¹äºUTF-8å­—ç¬¦é›†æ˜¯255ä¸ªå­—ç¬¦ã€‚è€ŒTEXTåˆ—æˆ–å‰ç¼€ç´¢å¼•çš„æœ€å¤§é•¿åº¦æ˜¯3072å­—èŠ‚ï¼Œåœ¨UTF-8å­—ç¬¦é›†ä¸­æ˜¯1024ä¸ªå­—ç¬¦ã€‚\né»˜è®¤å€¼ï¼šBLOBå’ŒTEXTåˆ—ä¸èƒ½å…·æœ‰é»˜è®¤å€¼ã€‚\n\næ€»çš„æ¥è¯´ï¼ŒBLOBé€‚åˆå­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒã€éŸ³é¢‘æˆ–è§†é¢‘æ–‡ä»¶ç­‰ã€‚è€ŒTEXTé€‚åˆå­˜å‚¨çº¯æ–‡æœ¬æ•°æ®ï¼Œå¦‚é•¿æ–‡æœ¬ã€æ–‡ç« å†…å®¹ç­‰ã€‚æ ¹æ®å…·ä½“çš„éœ€æ±‚ï¼Œä½ å¯ä»¥é€‰æ‹©é€‚å½“çš„æ•°æ®ç±»å‹æ¥å­˜å‚¨ç›¸åº”çš„æ•°æ®ã€‚\n\nå®é™…ä¸Šï¼ŒæŠŠå›¾ç‰‡ã€éŸ³é¢‘è¿™äº›é™æ€èµ„æºå­˜å…¥æ•°æ®åº“æ˜¯ä¸åˆç†çš„â€¦â€¦\n\n13.MySQL_fetch_arrayå’ŒMySQL_fetch_objæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸPHPé‡Œé¢çš„å‡½æ•°ï¼Œä¸å­¦ï¼Œç›´æ¥è·³è¿‡\n14.MyISAMè¡¨æ ¼å°†åœ¨é‚£é‡Œå­˜å‚¨ï¼Ÿå¹¶ä¸”è¿˜æä¾›å…¶å­˜å‚¨æ ¼å¼ï¼Ÿåœ¨linuxä¸‹ï¼ŒMyISAMè¡¨æ ¼ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨æ•°æ®ç›®å½•ä¸‹çš„å¯¹åº”æ•°æ®åº“ç›®å½•ä¸­ã€‚æ¯ä¸ªè¡¨æ ¼å¯¹åº”ä¸€ä¸ª.MYDæ•°æ®æ–‡ä»¶ï¼ˆç”¨äºå­˜å‚¨è¡¨æ ¼æ•°æ®ï¼‰å’Œä¸€ä¸ª.MYIç´¢å¼•æ–‡ä»¶ï¼ˆç”¨äºå­˜å‚¨è¡¨æ ¼ç´¢å¼•ï¼‰ï¼Œä»¥åŠä¸€ä¸ª.frmè¡¨æ ¼å®šä¹‰æ–‡ä»¶ï¼ˆåŒ…å«è¡¨æ ¼å®šä¹‰ä¿¡æ¯ï¼Œå¦‚å­—æ®µåã€æ•°æ®ç±»å‹ç­‰ï¼‰\nMyISAMä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œé™æ€è¡Œæ ¼å¼â€çš„å­˜å‚¨æ ¼å¼æ¥å­˜å‚¨è¡¨æ ¼æ•°æ®ã€‚è¿™ç§æ ¼å¼ç”¨äºåœ¨ç£ç›˜ä¸Šä¿å­˜ç”±å®šé•¿è¡Œç»„æˆçš„è¡¨æ ¼ï¼Œæ¯ä¸ªè¡Œå®šé•¿ï¼Œå ç”¨ç›¸åŒçš„å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾¿æ›´å¿«åœ°è¯»å–å’Œå†™å…¥æ•°æ®ã€‚MyISAMè¡¨æ ¼è¿˜æ”¯æŒåŠ¨æ€è¡Œæ ¼å¼ï¼Œè¿™ç§æ ¼å¼å…è®¸å¯å˜è¡Œé•¿åº¦ï¼Œå› æ­¤å¯ä»¥æ›´æœ‰æ•ˆåœ°å­˜å‚¨å¯å˜é•¿åº¦çš„æ•°æ®ç±»å‹ï¼ˆå¦‚VARCHARï¼ŒTEXTç­‰ï¼‰ã€‚\n15.MySQLå¦‚ä½•ä¼˜åŒ–DISTINCT?ä½¿ç”¨ç´¢å¼•ï¼Œå‡å°‘æŸ¥è¯¢è¡Œæ•°æ¥ä¼˜åŒ–å»é‡æ“ä½œ\n16.å¦‚ä½•æ˜¾ç¤ºå‰50è¡Œï¼ŸæŸ¥è¯¢è¯­å¥åå¸¦ä¸Šlimitå°±å¯ä»¥\nselect * from è¡¨å limit 50;\n\n17.å¯ä»¥ä½¿ç”¨å¤šå°‘åˆ—åˆ›å»ºç´¢å¼•ï¼Ÿæ ¹æ®å®é™…ä½¿ç”¨åœºæ™¯æ¥ç¡®å®šç”¨å‡ åˆ—ï¼Œå¹¶æ²¡æœ‰å›ºå®šé™åˆ¶ã€‚ç†è®ºä¸Šæ¥è¯´éœ€è¦ä¿æŒæœ€å°åŸåˆ™ï¼Œä¸è¦åŒ…å«å¤šä½™çš„æ— æ•ˆåˆ—ï¼ˆé™¤éä½ éœ€è¦ç”¨æ¥è¿›è¡Œç´¢å¼•ä¼˜åŒ–ï¼Œå‡å°‘å›è¡¨æ“ä½œï¼‰\n18.nowå’Œcurrent_dateæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿnowä¼šè¿”å›ä¸€ç›´åˆ°æ—¶åˆ†ç§’çš„ä¿¡æ¯ï¼Œcurrent_dateåªä¼šè¿”å›å½“æ—¥æ—¥æœŸ\n19.ä»€ä¹ˆæ˜¯éæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹\nGPT\n\néæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹æ˜¯æŒ‡åœ¨æ•°æ®åº“ä¸­æ²¡æœ‰æ˜ç¡®å®šä¹‰æˆ–æ ‡å‡†åŒ–çš„å­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚è¿™äº›ç±»å‹é€šå¸¸æ˜¯ç‰¹å®šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰æˆ–åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶æ‰€æ”¯æŒçš„æ‰©å±•ã€‚ç”±äºä¸åŒçš„DBMSå’Œæ¡†æ¶æœ‰å„è‡ªçš„ç‰¹æ€§å’Œéœ€æ±‚ï¼Œå¯èƒ½ä¼šå¼•å…¥é¢å¤–çš„éæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹ä»¥æ»¡è¶³ç‰¹å®šçš„æ•°æ®å­˜å‚¨å’Œæ“ä½œéœ€æ±‚ã€‚\nä¸¾ä¾‹æ¥è¯´ï¼ŒMySQLæ•°æ®åº“åœ¨å…¶æ ‡å‡†å­—ç¬¦ä¸²ç±»å‹ä¸­åŒ…å«äº†CHARã€VARCHARã€TEXTç­‰ã€‚è€Œéæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹å¯èƒ½æ˜¯æ ¹æ®å…·ä½“éœ€æ±‚å’Œæ‰©å±•å¼€å‘çš„ï¼Œå¦‚JSONã€XMLã€BLOBã€CLOBç­‰ã€‚è¿™äº›éæ ‡å‡†ç±»å‹åœ¨ä¸€äº›ç‰¹å®šåœºæ™¯ä¸­ä½¿ç”¨å¹¿æ³›ï¼Œä¾‹å¦‚å­˜å‚¨éç»“æ„åŒ–çš„æ–‡æœ¬æ•°æ®ã€å¤§å‹äºŒè¿›åˆ¶æ•°æ®ã€ä»¥åŠå­˜å‚¨å’ŒæŸ¥è¯¢å¤æ‚çš„ç»“æ„åŒ–æ•°æ®ç­‰ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹åœ¨ä¸åŒçš„DBMSå’Œå¼€å‘æ¡†æ¶ä¹‹é—´å¯èƒ½å­˜åœ¨å·®å¼‚ï¼Œå¹¶ä¸”åœ¨è·¨å¹³å°å’Œè¿ç§»æ—¶å¯èƒ½ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨éæ ‡å‡†å­—ç¬¦ä¸²ç±»å‹æ—¶ï¼Œå»ºè®®ä»”ç»†äº†è§£ç›¸å…³çš„æ–‡æ¡£å’Œè§„èŒƒï¼Œå¹¶è¯„ä¼°å…¶å¯¹åº”ç”¨ç¨‹åºçš„å½±å“å’Œå¯ç§»æ¤æ€§ã€‚\n20.ä»€ä¹ˆæ˜¯é€šç”¨SQLå‡½æ•°ä»¥ä¸‹åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„é€šç”¨SQLå‡½æ•°ï¼š\n\nèšåˆå‡½æ•°ï¼šå¦‚SUMã€AVGã€COUNTã€MINã€MAXç­‰ï¼Œç”¨äºå¯¹æ•°æ®è¿›è¡Œç»Ÿè®¡å’Œèšåˆè®¡ç®—ã€‚\nå­—ç¬¦ä¸²å‡½æ•°ï¼šå¦‚CONCATã€SUBSTRINGã€UPPERã€LOWERã€LENGTHç­‰ï¼Œç”¨äºå¤„ç†å’Œæ“ä½œå­—ç¬¦ä¸²æ•°æ®ã€‚\næ•°å€¼å‡½æ•°ï¼šå¦‚ABSã€ROUNDã€CEILINGã€FLOORç­‰ï¼Œç”¨äºæ‰§è¡Œæ•°å€¼è®¡ç®—å’Œè½¬æ¢ã€‚\næ—¥æœŸå’Œæ—¶é—´å‡½æ•°ï¼šå¦‚DATE, TIME, YEAR, MONTH, DAYç­‰ï¼Œç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´æ•°æ®çš„è®¡ç®—å’Œæ ¼å¼åŒ–ã€‚\næ¡ä»¶å‡½æ•°ï¼šå¦‚IF, CASE WHEN, COALESCEç­‰ï¼Œç”¨äºæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„é€»è¾‘å’Œè¿”å›ä¸åŒçš„ç»“æœã€‚\nç±»å‹è½¬æ¢å‡½æ•°ï¼šå¦‚CASTã€CONVERTç­‰ï¼Œç”¨äºåœ¨ä¸åŒçš„æ•°æ®ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚\n\nè¿™åªæ˜¯ä¸€å°éƒ¨åˆ†é€šç”¨SQLå‡½æ•°çš„ä¾‹å­ï¼Œå®é™…ä¸Šè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å‡½æ•°å¯ç”¨äºä¸åŒçš„æ•°æ®å¤„ç†å’ŒæŸ¥è¯¢éœ€æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡è¿™äº›å‡½æ•°åœ¨å¤§å¤šæ•°DBMSä¸­éƒ½å­˜åœ¨ï¼Œä½†æŸäº›ç‰¹å®šçš„DBMSå¯èƒ½ä¼šæä¾›é¢å¤–çš„å‡½æ•°æˆ–æœ‰ç¨å¾®ä¸åŒçš„è¯­æ³•ï¼Œå› æ­¤åœ¨ä½¿ç”¨å‡½æ•°æ—¶åº”æŸ¥é˜…ç›¸åº”çš„æ–‡æ¡£å’Œè§„èŒƒä»¥ç¡®ä¿å…¼å®¹æ€§å’Œæ­£ç¡®æ€§ã€‚\n21.MySQLæ”¯æŒäº‹åŠ¡å—ï¼Ÿè‚¯å®šæ”¯æŒï¼Œè¿™ä¸ªé—®é¢˜ç¬¬å››ç‚¹å°±å·²ç»è¯¦ç»†é—®äº†\n22.MySQLé‡Œé¢è®°å½•è´§å¸ç”¨ä»€ä¹ˆç±»å‹å¥½ï¼Ÿå› ä¸ºæµ®ç‚¹æ•°çš„ç²¾åº¦é—®é¢˜ï¼Œå¯ä»¥ç”¨BIGINTæ¥å­˜æ”¾ä»¥åˆ†ä¸ºå•ä½çš„è´§å¸ï¼Œå®é™…è°ƒç”¨çš„æ—¶å€™å†åŠ ä¸Šå°æ•°ç‚¹ï¼Œæ¥ä¿è¯æ•°æ®å‡†ç¡®ã€‚\nå¦‚æœä¸ç”¨BIGINTï¼Œé‚£å°±éœ€è¦ç”¨DECIMALæ¥å­˜æ”¾è´§å¸ã€‚\n\nBç«™å†²æµªçœ‹åˆ°çš„\n\n23.MySQLæœ‰å…³æƒé™çš„è¡¨æœ‰é‚£å‡ ä¸ªåœ¨MySQLä¸­ï¼Œæœ‰å‡ ä¸ªä¸æƒé™ç›¸å…³çš„ç³»ç»Ÿè¡¨å’Œè§†å›¾ï¼Œç”¨äºç®¡ç†ç”¨æˆ·ã€è§’è‰²å’Œæƒé™ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æƒé™ç›¸å…³çš„è¡¨å’Œè§†å›¾ï¼š\n\nmysql.userï¼šè¿™ä¸ªè¡¨åŒ…å«äº†MySQLå®ä¾‹ä¸Šçš„æ‰€æœ‰ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·åã€å¯†ç ç­‰ã€‚è¯¥è¡¨è®°å½•äº†æ¯ä¸ªç”¨æˆ·çš„å…¨å±€æƒé™ã€‚\nmysql.dbï¼šè¿™ä¸ªè¡¨è®°å½•äº†ç”¨æˆ·å¯¹æ•°æ®åº“çº§åˆ«çš„æƒé™ã€‚å®ƒæŒ‡å®šäº†å“ªä¸ªç”¨æˆ·å¯¹å“ªä¸ªæ•°æ®åº“å…·æœ‰ä»€ä¹ˆæ ·çš„æƒé™ã€‚\nmysql.tables_privï¼šè¿™ä¸ªè¡¨è®°å½•äº†ç”¨æˆ·å¯¹è¡¨çº§åˆ«çš„æƒé™ã€‚å®ƒå­˜å‚¨äº†ç”¨æˆ·å¯¹æŸä¸ªå…·ä½“è¡¨çš„æƒé™ä¿¡æ¯ï¼ˆå¦‚SELECTã€INSERTã€UPDATEã€DELETEç­‰ï¼‰ã€‚\nmysql.columns_privï¼šè¿™ä¸ªè¡¨è®°å½•äº†ç”¨æˆ·å¯¹åˆ—çº§åˆ«çš„æƒé™ã€‚å®ƒå­˜å‚¨äº†ç”¨æˆ·å¯¹è¡¨ä¸­æŸä¸ªå…·ä½“åˆ—çš„æƒé™ä¿¡æ¯ã€‚\nmysql.procs_privï¼šè¿™ä¸ªè¡¨è®°å½•äº†ç”¨æˆ·å¯¹å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„æƒé™ã€‚\nmysql.rolesï¼šè¿™ä¸ªè¡¨å­˜å‚¨äº†è§’è‰²çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²åã€è§’è‰²çš„åˆ›å»ºè€…ç­‰ã€‚\n\né™¤äº†ä¸Šè¿°çš„è¡¨ä¹‹å¤–ï¼ŒMySQLè¿˜æä¾›äº†ä¸€äº›æƒé™ç›¸å…³çš„è§†å›¾ï¼Œè¿™äº›è§†å›¾å¯ä»¥æ–¹ä¾¿åœ°æŸ¥çœ‹ç”¨æˆ·ã€è§’è‰²å’Œæƒé™çš„ä¿¡æ¯ï¼Œå¦‚ï¼š\n\ninformation_schema.USER_PRIVILEGESï¼šæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„æƒé™ä¿¡æ¯ã€‚\ninformation_schema.SCHEMA_PRIVILEGESï¼šæ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“çš„æƒé™ä¿¡æ¯ã€‚\ninformation_schema.TABLE_PRIVILEGESï¼šæ˜¾ç¤ºæ‰€æœ‰è¡¨çš„æƒé™ä¿¡æ¯ã€‚\ninformation_schema.COLUMN_PRIVILEGESï¼šæ˜¾ç¤ºæ‰€æœ‰åˆ—çš„æƒé™ä¿¡æ¯ã€‚\n\nå¦‚ä¸‹æ˜¯ä¸ªä½¿ç”¨ç¤ºä¾‹\nselect * from information_schema.USER_PRIVILEGES;\n\nè¿™äº›è¡¨å’Œè§†å›¾å¯ä»¥é€šè¿‡æŸ¥è¯¢ç›¸åº”çš„ç³»ç»Ÿè¡¨æˆ–è§†å›¾æ¥æŸ¥çœ‹å’Œç®¡ç†ç”¨æˆ·ã€è§’è‰²å’Œæƒé™ã€‚è¯·æ³¨æ„ï¼Œå…·ä½“çš„ç³»ç»Ÿè¡¨å’Œè§†å›¾åç§°å¯èƒ½å› MySQLç‰ˆæœ¬å’Œé…ç½®è€Œæœ‰æ‰€ä¸åŒã€‚ä¸ºäº†ç¡®ä¿å‡†ç¡®æ€§ï¼Œè¯·å‚è€ƒMySQLå®˜æ–¹æ–‡æ¡£æˆ–ç‰¹å®šç‰ˆæœ¬çš„æ–‡æ¡£ã€‚\n24.åˆ—çš„å­—ç¬¦ä¸²ç±»å‹å¯ä»¥æ˜¯ä»€ä¹ˆTEXT CHAR VARCHARï¼Œè¯¦è§ç¬¬äº”ç‚¹\n25.MySQLä½œä¸ºå‘å¸ƒç³»ç»Ÿçš„å­˜å‚¨ï¼Œä¸€å¤©äº”ä¸‡æ¡ä»¥ä¸Šçš„å¢é‡ï¼Œé¢„è®¡è¿ç»´ä¸‰å¹´ï¼Œå¦‚ä½•ä¼˜åŒ–ï¼Ÿ\næ²¡è§è¿‡è¿™ç§ä¸šåŠ¡ï¼Œåªèƒ½é—®GPT\n\nå¯¹äºä¸€ä¸ªMySQLä½œä¸ºå‘å¸ƒç³»ç»Ÿå­˜å‚¨çš„åœºæ™¯ï¼Œå¤„ç†æ¯å¤©è¶…è¿‡äº”ä¸‡æ¡å¢é‡æ•°æ®å¹¶ä¸”éœ€è¦ä¿æŒä¸‰å¹´çš„æ•°æ®ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä¼˜åŒ–å»ºè®®ï¼š\n\næ•°æ®åº“ç¡¬ä»¶å’Œé…ç½®ä¼˜åŒ–ï¼š\nç¡¬ä»¶æ€§èƒ½ï¼šç¡®ä¿æ•°æ®åº“æœåŠ¡å™¨å…·å¤‡è¶³å¤Ÿçš„è®¡ç®—ã€å†…å­˜å’Œå­˜å‚¨èµ„æºï¼Œä»¥å¤„ç†é«˜è´Ÿè½½çš„å†™å…¥å’Œè¯»å–æ“ä½œã€‚\nå­˜å‚¨è®¾å¤‡ï¼šä½¿ç”¨é«˜æ€§èƒ½çš„å­˜å‚¨è®¾å¤‡ï¼ˆå¦‚SSDï¼‰æ¥æé«˜å†™å…¥å’Œè¯»å–é€Ÿåº¦ã€‚\nMySQLå‚æ•°è°ƒä¼˜ï¼šæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´MySQLçš„é…ç½®å‚æ•°ï¼Œä¾‹å¦‚è®¾ç½®åˆç†çš„ç¼“å†²åŒºå¤§å°ã€å¹¶å‘è¿æ¥æ•°ã€æŸ¥è¯¢ç¼“å­˜ç­‰ã€‚\n\n\næ•°æ®åº“æ¶æ„ä¼˜åŒ–ï¼š\nåˆ†åº“åˆ†è¡¨ï¼šè€ƒè™‘å°†æ•°æ®è¿›è¡Œåˆ†åº“åˆ†è¡¨æ¥åˆ†æ‹…å•ä¸ªæ•°æ®åº“çš„è´Ÿè½½å‹åŠ›ã€‚æ ¹æ®æ•°æ®çš„ç‰¹ç‚¹å’Œè®¿é—®æ¨¡å¼ï¼Œåˆç†åˆ’åˆ†æ•°æ®åˆ°ä¸åŒçš„åº“è¡¨ä¸­ã€‚\nç´¢å¼•ä¼˜åŒ–ï¼šæ ¹æ®æŸ¥è¯¢éœ€æ±‚åˆ›å»ºåˆé€‚çš„ç´¢å¼•ï¼Œä»¥åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ã€‚é¿å…è¿‡å¤šçš„ç´¢å¼•å’Œå†—ä½™ç´¢å¼•ï¼Œä»¥å‡å°‘ç»´æŠ¤æˆæœ¬ã€‚\nåˆ†åŒºè¡¨ï¼šå¦‚æœæ•°æ®çš„æ—¶é—´èŒƒå›´æœ‰æ˜æ˜¾çš„ç•Œé™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨MySQLçš„åˆ†åŒºè¡¨åŠŸèƒ½ï¼Œå°†æ•°æ®æŒ‰æ—¶é—´èŒƒå›´è¿›è¡Œåˆ†åŒºï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½å’Œç»´æŠ¤æ•ˆç‡ã€‚\n\n\næ•°æ®å†™å…¥ä¼˜åŒ–ï¼š\næ‰¹é‡æ’å…¥ï¼šä½¿ç”¨æ‰¹é‡æ’å…¥æ–¹å¼ï¼ˆå¦‚INSERT INTO â€¦ VALUES (), (), ()â€¦ï¼‰æ¥å‡å°‘å•æ¡æ’å…¥çš„å¼€é”€ï¼Œæé«˜å†™å…¥æ€§èƒ½ã€‚\näº‹åŠ¡å¤„ç†ï¼šå°†å¤šä¸ªå†™å…¥æ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼Œå‡å°‘IOå¼€é”€ã€‚\n\n\næ•°æ®å½’æ¡£å’Œå‹ç¼©ï¼š\næ•°æ®å½’æ¡£ï¼šå¯¹äºå†å²æ•°æ®ï¼Œå¯ä»¥å°†å…¶å½’æ¡£åˆ°ç‹¬ç«‹çš„å­˜å‚¨ä»‹è´¨ä¸­ï¼Œä¾‹å¦‚å°†æ—§æ•°æ®è¿ç§»åˆ°å½’æ¡£æ•°æ®åº“æˆ–è€…ç¦»çº¿å­˜å‚¨ç³»ç»Ÿä¸­ä»¥å‡è½»ä¸»æ•°æ®åº“çš„è´Ÿè½½ã€‚\næ•°æ®å‹ç¼©ï¼šå¯¹äºä¸é¢‘ç¹æŸ¥è¯¢çš„å†å²æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å‹ç¼©ç®—æ³•ï¼ˆä¾‹å¦‚MySQLçš„å‹ç¼©è¡¨åŠŸèƒ½æˆ–è€…ç¬¬ä¸‰æ–¹å‹ç¼©åº“ï¼‰è¿›è¡Œå­˜å‚¨ï¼Œä»¥å‡å°‘å­˜å‚¨ç©ºé—´å ç”¨ã€‚\n\n\nç›‘æ§å’Œä¼˜åŒ–å·¥å…·ï¼š\nä½¿ç”¨ç›‘æ§å·¥å…·å®æ—¶ç›‘æµ‹æ•°æ®åº“çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚æŸ¥è¯¢é€Ÿåº¦ã€ç£ç›˜ä½¿ç”¨ã€é”ç­‰æƒ…å†µï¼ŒåŠæ—¶å‘ç°æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆå¹¶è¿›è¡Œè°ƒä¼˜ã€‚\nä½¿ç”¨æ€§èƒ½ä¼˜åŒ–å·¥å…·ï¼Œå¦‚Explainåˆ†æã€æ…¢æŸ¥è¯¢æ—¥å¿—ç­‰ï¼Œæ¥æ‰¾å‡ºæ…¢æŸ¥è¯¢å’Œä½æ•ˆçš„SQLè¯­å¥ï¼Œå¹¶è¿›è¡Œä¼˜åŒ–ã€‚\n\n\n\nä»¥ä¸Šæ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–å»ºè®®ï¼Œå…·ä½“ä¼˜åŒ–æ–¹æ¡ˆè¿˜éœ€è¦æ ¹æ®å®é™…åœºæ™¯å’Œéœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚åŒæ—¶ï¼Œå»ºè®®åœ¨è¿›è¡Œä¼˜åŒ–å‰ï¼Œå……åˆ†äº†è§£åº”ç”¨çš„è¯»å†™ç‰¹å¾ã€æ•°æ®è®¿é—®æ¨¡å¼å’Œä¸šåŠ¡éœ€æ±‚ï¼Œä»¥ä¾¿æœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–å·¥ä½œã€‚\n26.é”çš„ä¼˜åŒ–ç­–ç•¥ï¼Ÿ27.ç´¢å¼•çš„åº•å±‚å®ç°å’Œä¼˜åŒ–ï¼Ÿåº•å±‚ç”¨B+å®ç°ï¼Œä¼˜åŒ–ç´¢å¼•æ–¹å¼è§ç´¢å¼•åšå®¢ https://blog.musnow.top/posts/3474107655/\n28.ä»€ä¹ˆæƒ…å†µä¸‹æœ‰ç´¢å¼•ä½†æ˜¯æ— æ³•ä½¿ç”¨ç´¢å¼•å¤±æ•ˆï¼Œè§ç´¢å¼•åšå®¢ https://blog.musnow.top/posts/3474107655/\n29.å®è·µä¸­å¦‚ä½•ä¼˜åŒ–MySQLå¤ªå®½æ³›äº†ï¼Œä¸å¥½å›ç­”\n\nç´¢å¼•ä¼˜åŒ–\nåˆ†è¡¨\näº‹åŠ¡éš”ç¦»æ€§é€‰æ‹©\n\n30.ä¼˜åŒ–æ•°æ®åº“çš„åŠæ³•ï¼Ÿå’Œ29é¢˜é‡åˆï¼Œä¸åšå›ç­”\n31.ç®€å•æè¿°ç´¢å¼•ã€ä¸»é”®ã€å”¯ä¸€ç´¢å¼•ã€è”åˆç´¢å¼•çš„åŒºåˆ«ï¼Œå¯¹æ•°æ®åº“æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼ˆè¯»å†™ä¸¤æ–¹é¢ï¼‰è§ç´¢å¼•åšå®¢ https://blog.musnow.top/posts/3474107655/\n32.æ•°æ®åº“çš„äº‹åŠ¡æ˜¯ä»€ä¹ˆè§äº‹åŠ¡åšå®¢ https://blog.musnow.top/posts/2200233148/\n33.SQLæ³¨å…¥æ¼æ´çš„äº§ç”Ÿå’ŒåŸå› ï¼Œå¦‚ä½•é˜²æ­¢SQLæ³¨å…¥æ¼æ´æ˜¯ä¸€ç§å¸¸è§çš„å®‰å…¨æ¼æ´ï¼Œå®ƒå¯ä»¥ä½¿æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„SQLè¯­å¥æ¥ç»•è¿‡åº”ç”¨ç¨‹åºçš„è¾“å…¥éªŒè¯ï¼Œè¿›è€Œæ‰§è¡Œéæ³•çš„æ•°æ®åº“æ“ä½œæˆ–è·å–æ•æ„Ÿä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯SQLæ³¨å…¥æ¼æ´äº§ç”Ÿçš„åŸå› å’Œä¸€äº›é˜²æ­¢æ–¹æ³•ï¼š\n\nåŸå› ï¼š\nä¸æ­£ç¡®çš„è¾“å…¥éªŒè¯ï¼šå½“åº”ç”¨ç¨‹åºæ²¡æœ‰å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œå……åˆ†éªŒè¯å’Œè¿‡æ»¤æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡è¾“å…¥ç‰¹å®šçš„å­—ç¬¦æˆ–è¯­å¥æ¥ä¿®æ”¹SQLè¯­å¥çš„ç»“æ„ï¼Œä»è€Œæ‰§è¡Œæ¶æ„æ“ä½œã€‚\næ‹¼æ¥å­—ç¬¦ä¸²æ„é€ SQLè¯­å¥ï¼šå¦‚æœåº”ç”¨ç¨‹åºä½¿ç”¨æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼æ„é€ SQLæŸ¥è¯¢è¯­å¥ï¼Œå¹¶ä¸”æœªå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œæ­£ç¡®çš„è½¬ä¹‰å¤„ç†ï¼Œå°±å®¹æ˜“å—åˆ°SQLæ³¨å…¥æ”»å‡»ã€‚\n\n\né˜²æ­¢æ–¹æ³•ï¼š\nä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æˆ–é¢„ç¼–è¯‘è¯­å¥ï¼šå‚æ•°åŒ–æŸ¥è¯¢å°†ç”¨æˆ·è¾“å…¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™SQLè¯­å¥ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²ã€‚è¿™æ ·å¯ä»¥é€šè¿‡æ•°æ®åº“é©±åŠ¨ç¨‹åºè‡ªåŠ¨å¤„ç†è½¬ä¹‰å’Œç¼–ç ï¼Œæœ‰æ•ˆé˜²æ­¢SQLæ³¨å…¥æ”»å‡»ã€‚\nè¾“å…¥éªŒè¯å’Œè¿‡æ»¤ï¼šå¯¹ç”¨æˆ·çš„è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯å’Œè¿‡æ»¤ï¼Œåªæ¥å—ç¬¦åˆè§„èŒƒçš„æ•°æ®ã€‚å¯ä»¥ä½¿ç”¨ç™½åå•ã€é»‘åå•ã€æ­£åˆ™è¡¨è¾¾å¼ç­‰æ–¹æ³•è¿›è¡Œè¾“å…¥éªŒè¯å’Œè¿‡æ»¤ã€‚\næœ€å°æƒé™åŸåˆ™ï¼šåœ¨æ•°æ®åº“ä¸­ä¸ºåº”ç”¨ç¨‹åºä½¿ç”¨çš„è´¦å·è®¾ç½®æœ€å°æƒé™ï¼Œå³åªæˆäºˆåº”ç”¨ç¨‹åºå®Œæˆå¿…è¦æ“ä½œæ‰€éœ€çš„æœ€ä½æƒé™ï¼Œé¿å…æ”»å‡»è€…åˆ©ç”¨æ³¨å…¥æ¼æ´è¿›è¡Œæ›´å±é™©çš„æ“ä½œã€‚\nä¸è¦ç›´æ¥æš´éœ²æ•°æ®åº“é”™è¯¯ä¿¡æ¯ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸è¦å°†è¯¦ç»†çš„æ•°æ®åº“é”™è¯¯ä¿¡æ¯è¿”å›ç»™ç”¨æˆ·ï¼Œä»¥é˜²æ­¢æ”»å‡»è€…ä»ä¸­è·å–å…³é”®ä¿¡æ¯ã€‚å¯ä»¥è®°å½•é”™è¯¯æ—¥å¿—å¹¶ç»™ç”¨æˆ·ä¸€ä¸ªå‹å¥½çš„é”™è¯¯æç¤ºã€‚\nå®šæœŸæ›´æ–°å’Œä¿®è¡¥æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºï¼šåŠæ—¶å®‰è£…æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºçš„å®‰å…¨è¡¥ä¸ï¼Œä»¥ä¿®å¤å·²çŸ¥çš„æ¼æ´ï¼Œå¹¶ç¡®ä¿ä½¿ç”¨æœ€æ–°çš„å®‰å…¨æªæ–½ã€‚\n\n\n\næ€»ä¹‹ï¼Œä¸ºäº†é˜²æ­¢SQLæ³¨å…¥æ¼æ´ï¼Œå…³é”®æ˜¯è¦å¯¹ç”¨æˆ·è¾“å…¥æ•°æ®è¿›è¡Œåˆç†éªŒè¯ã€è¿‡æ»¤å’Œè½¬ä¹‰å¤„ç†ï¼Œå¹¶ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢æˆ–é¢„ç¼–è¯‘è¯­å¥æ¥æ„é€ SQLè¯­å¥ã€‚åŒæ—¶ï¼Œä¿æŒåº”ç”¨ç¨‹åºå’Œæ•°æ®åº“çš„å®‰å…¨æ€§ï¼Œå¹¶åŠæ—¶æ›´æ–°å’Œä¿®è¡¥å·²çŸ¥çš„å®‰å…¨æ¼æ´ã€‚\n34.å¦‚ä½•ä¸ºè¡¨ä¸­å­—æ®µé€‰æ‹©åˆé€‚æ•°æ®ç±»å‹è‚¯å®šæ˜¯æ ¹æ®å…·ä½“æƒ…å†µå›ç­”\n35.å­˜å‚¨æ—¶æœŸï¼Ÿæ„Ÿè§‰è¿™é“é¢˜æœ‰é—®é¢˜ï¼Œä¸ç®¡ä»–\n36.ç´¢å¼•ç›¸å…³é—®é¢˜ï¼Ÿå’Œ31é‡åˆï¼Œä¸å›ç­”\n37.è§£é‡ŠMySQLä¸­å¤–è¿æ¥ã€å†…è¿æ¥ã€è‡ªè¿æ¥çš„åŒºåˆ«\nå†…è¿æ¥ï¼ˆINNER JOINï¼‰ï¼š\nå†…è¿æ¥è¿”å›ä¸¤ä¸ªè¡¨ä¸­æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ï¼Œå³åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­èƒ½å¤ŸåŒ¹é…çš„è¡Œã€‚\nå†…è¿æ¥ä½¿ç”¨ä¸€ä¸ªè¿æ¥è°“è¯ï¼ˆJOINï¼‰æˆ–è€…åœ¨FROMå­å¥ä¸­ä½¿ç”¨é€—å·ï¼ˆ,ï¼‰æ¥è¡¨ç¤ºã€‚\nå†…è¿æ¥å¯ä»¥æ ¹æ®æŒ‡å®šçš„è¿æ¥æ¡ä»¶å°†ä¸¤ä¸ªè¡¨ä¸­çš„åˆ—è¿›è¡ŒåŒ¹é…ã€‚å¦‚æœæœªæä¾›è¿æ¥æ¡ä»¶ï¼Œåˆ™ä¼šè¿”å›ä¸¤ä¸ªè¡¨çš„ç¬›å¡å°”ç§¯ã€‚\nè¯­æ³•ç¤ºä¾‹ï¼šSELECT * FROM è¡¨1 INNER JOIN è¡¨2 ON è¡¨1.åˆ— &#x3D; è¡¨2.åˆ—;\n\n\nå¤–è¿æ¥ï¼ˆOUTER JOINï¼‰ï¼š\nå¤–è¿æ¥å°†è¿”å›ä¸¤ä¸ªè¡¨ä¸­æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ï¼Œå¹¶ä¸”è¿˜åŒ…æ‹¬ä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ã€‚\nå¤–è¿æ¥åˆ†ä¸ºå·¦å¤–è¿æ¥ï¼ˆLEFT JOINï¼‰å’Œå³å¤–è¿æ¥ï¼ˆRIGHT JOINï¼‰ã€‚\nå·¦å¤–è¿æ¥è¿”å›å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå³è¡¨ä¸­ä¸å·¦è¡¨æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ã€‚å¦‚æœå³è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¼šè¿”å›NULLå€¼ã€‚\nå³å¤–è¿æ¥è¿”å›å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠå·¦è¡¨ä¸­ä¸å³è¡¨æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ã€‚å¦‚æœå·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¼šè¿”å›NULLå€¼ã€‚\nè¯­æ³•ç¤ºä¾‹ï¼š\nå·¦å¤–è¿æ¥ï¼šSELECT * FROM è¡¨1 LEFT JOIN è¡¨2 ON è¡¨1.åˆ— &#x3D; è¡¨2.åˆ—;\nå³å¤–è¿æ¥ï¼šSELECT * FROM è¡¨1 RIGHT JOIN è¡¨2 ON è¡¨1.åˆ— &#x3D; è¡¨2.åˆ—;\n\n\n\n\nè‡ªè¿æ¥ï¼ˆSELF JOINï¼‰ï¼š\nè‡ªè¿æ¥æ˜¯æŒ‡å°†è¡¨è§†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å®ä¾‹ï¼Œä½¿ç”¨åˆ«åæ¥åŒºåˆ†å®ƒä»¬ï¼Œç„¶åæ ¹æ®æŸäº›æ¡ä»¶å°†å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·ã€‚\nè‡ªè¿æ¥é€šå¸¸ç”¨äºåœ¨åŒä¸€ä¸ªè¡¨ä¸­æ ¹æ®æŸç§å…³ç³»è¿›è¡Œæ•°æ®æŸ¥è¯¢ã€‚\nè¯­æ³•ç¤ºä¾‹ï¼šSELECT åˆ«å1.åˆ—, åˆ«å2.åˆ— FROM è¡¨ åˆ«å1, è¡¨ åˆ«å2 WHERE åˆ«å1.åˆ— &#x3D; åˆ«å2.åˆ—;\n\n\n\næ€»ç»“ï¼š\n\nå†…è¿æ¥è¿”å›ä¸¤ä¸ªè¡¨ä¸­åŒ¹é…çš„è®°å½•ï¼Œå¤–è¿æ¥è¿”å›æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ä»¥åŠä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ï¼Œè€Œè‡ªè¿æ¥æ˜¯å¯¹åŒä¸€ä¸ªè¡¨è¿›è¡Œè¿æ¥æ“ä½œã€‚\nå†…è¿æ¥å’Œå¤–è¿æ¥éœ€è¦ä½¿ç”¨JOINå…³é”®å­—ï¼Œè€Œè‡ªè¿æ¥ä½¿ç”¨åŒä¸€ä¸ªè¡¨çš„åˆ«åè¿›è¡Œè¿æ¥ã€‚\nå†…è¿æ¥å’Œå¤–è¿æ¥å¯ä»¥æ ¹æ®è¿æ¥æ¡ä»¶å°†ä¸¤ä¸ªè¡¨è¿›è¡Œå…³è”ï¼Œè€Œè‡ªè¿æ¥å¯ä»¥æ ¹æ®è¡¨ä¸­çš„æŸäº›æ¡ä»¶è¿›è¡Œå…³è”ã€‚\n\n38.MySQLä¸­äº‹åŠ¡å›æ»šæœºåˆ¶æè¿°è§äº‹åŠ¡åšå®¢ https://blog.musnow.top/posts/2200233148/\n39.SQLè¯­è¨€åŒ…å«å“ªå‡ éƒ¨åˆ†ï¼Ÿæ¯éƒ¨åˆ†éƒ½æœ‰å“ªäº›æ“ä½œå…³é”®å­—åŒ…æ‹¬DQLæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ŒDMLæ•°æ®æ“ä½œè¯­è¨€ï¼ˆå¢åˆ æ”¹ï¼‰ï¼Œæ•°æ®æ§åˆ¶è¯­è¨€DCLç”¨æ¥ç®¡ç†æ•°æ®åº“ï¼Œäº‹åŠ¡æ§åˆ¶è¯­è¨€TCLç”¨æ¥æ§åˆ¶äº‹åŠ¡ï¼Œæ•°æ®å®šä¹‰è¯­è¨€DDLç”¨æ¥åˆ›å»ºåˆ é™¤è¡¨\n\næ•°æ®æŸ¥è¯¢è¯­è¨€ï¼ˆData Query Languageï¼ŒDQLï¼‰ï¼šç”¨äºä»æ•°æ®åº“ä¸­æŸ¥è¯¢å’Œæ£€ç´¢æ•°æ®ã€‚å¸¸ç”¨çš„æ“ä½œå…³é”®å­—åŒ…æ‹¬ï¼š\nSELECTï¼šç”¨äºä»ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨ä¸­é€‰æ‹©æ•°æ®åˆ—ä»¥è¿›è¡ŒæŸ¥è¯¢ã€‚\nFROMï¼šæŒ‡å®šè¦æŸ¥è¯¢çš„è¡¨ã€‚\nWHEREï¼šç”¨äºæŒ‡å®šæŸ¥è¯¢çš„æ¡ä»¶ã€‚\nGROUP BYï¼šæŒ‰ç…§æŒ‡å®šçš„åˆ—å¯¹ç»“æœè¿›è¡Œåˆ†ç»„ã€‚\nHAVINGï¼šç”¨äºæŒ‡å®šå¯¹åˆ†ç»„åçš„ç»“æœè¿›è¡Œç­›é€‰çš„æ¡ä»¶ã€‚\nORDER BYï¼šæŒ‡å®šç»“æœé›†çš„æ’åºæ–¹å¼ã€‚\n\n\næ•°æ®æ“ä½œè¯­è¨€ï¼ˆData Manipulation Languageï¼ŒDMLï¼‰ï¼šç”¨äºå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€ä¿®æ”¹å’Œåˆ é™¤æ“ä½œã€‚å¸¸ç”¨çš„æ“ä½œå…³é”®å­—åŒ…æ‹¬ï¼š\nINSERT INTOï¼šå‘è¡¨ä¸­æ’å…¥æ–°çš„è¡Œæˆ–æ•°æ®ã€‚\nUPDATEï¼šæ›´æ–°è¡¨ä¸­å·²æœ‰çš„æ•°æ®ã€‚\nDELETE FROMï¼šä»è¡¨ä¸­åˆ é™¤æŒ‡å®šçš„è¡Œæˆ–æ•°æ®ã€‚\n\n\næ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData Definition Languageï¼ŒDDLï¼‰ï¼šç”¨äºåˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“å’Œè¡¨ç»“æ„ã€‚å¸¸ç”¨çš„æ“ä½œå…³é”®å­—åŒ…æ‹¬ï¼š\nCREATE DATABASEï¼šåˆ›å»ºæ–°çš„æ•°æ®åº“ã€‚\nCREATE TABLEï¼šåˆ›å»ºæ–°çš„æ•°æ®è¡¨ã€‚\nALTER TABLEï¼šä¿®æ”¹å·²å­˜åœ¨çš„æ•°æ®è¡¨ç»“æ„ã€‚\nDROP DATABASEï¼šåˆ é™¤ç°æœ‰çš„æ•°æ®åº“ã€‚\nDROP TABLEï¼šåˆ é™¤ç°æœ‰çš„æ•°æ®è¡¨ã€‚\n\n\næ•°æ®æ§åˆ¶è¯­è¨€ï¼ˆData Control Languageï¼ŒDCLï¼‰ï¼šç”¨äºç®¡ç†æ•°æ®åº“ä¸­çš„ç”¨æˆ·æƒé™å’Œè®¿é—®æƒé™ã€‚å¸¸ç”¨çš„æ“ä½œå…³é”®å­—åŒ…æ‹¬ï¼š\nGRANTï¼šæˆäºˆç”¨æˆ·ç‰¹å®šçš„æƒé™ã€‚\nREVOKEï¼šæ’¤é”€ç”¨æˆ·çš„æƒé™ã€‚\n\n\näº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼ˆTransaction Control Languageï¼ŒTCLï¼‰ï¼šç”¨äºç®¡ç†æ•°æ®åº“çš„äº‹åŠ¡å¤„ç†ã€‚å¸¸ç”¨çš„æ“ä½œå…³é”®å­—åŒ…æ‹¬ï¼š\nCOMMITï¼šæäº¤ä¸€ä¸ªäº‹åŠ¡ï¼Œä½¿å…¶æ°¸ä¹…ç”Ÿæ•ˆã€‚\nROLLBACKï¼šå›æ»šä¸€ä¸ªäº‹åŠ¡ï¼Œæ’¤é”€ä¹‹å‰çš„æ“ä½œï¼Œä½¿å…¶ä¸ç”Ÿæ•ˆã€‚\nSAVEPOINTï¼šåœ¨äº‹åŠ¡ä¸­è®¾ç½®ä¿å­˜ç‚¹ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶è¿›è¡Œå›æ»šã€‚\n\n\n\n40.å®Œæ•´æ€§çš„çº¦æŸåŒ…æ‹¬é‚£äº›ï¼ŸåŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§ï¼›è¿™é‡Œè¯´çš„å®Œæ•´æ€§åº”è¯¥å°±æ˜¯ä¸€è‡´æ€§ï¼›\nå…·ä½“çš„è§£é‡Šä¾æ—§æ˜¯å»çœ‹äº‹åŠ¡çš„åšå®¢ https://blog.musnow.top/posts/2200233148/\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["mysql"]},{"title":"ã€MySQLã€‘å¤åˆæŸ¥è¯¢ | å†…å¤–é“¾æ¥","url":"/posts/2529084145/","content":"å„ç±»å¤åˆæŸ¥è¯¢å’Œç¬›å¡å°”ç§¯ã€å†…å¤–é“¾æ¥çš„æ“ä½œ\n\n\n1.åŸºç¡€æŸ¥è¯¢åœ¨ä¹‹å‰çš„MySQLçš„CURDåŸºæœ¬æ“ä½œåšå®¢ä¸­ï¼Œè®²è¿°äº†ä¸€éƒ¨åˆ†æŸ¥è¯¢çš„è¯­æ³•ï¼Œä½†æ˜¯åœ¨å®é™…çš„ç”Ÿäº§æ´»åŠ¨ä¸­ï¼Œé‚£ç§æœ€åŸºç¡€çš„æŸ¥è¯¢æ–¹å¼ä¸è¶³ä»¥æ»¡è¶³å¤æ‚æŸ¥è¯¢æ¡ä»¶æ—¶çš„è¦æ±‚ï¼Œæ‰€ä»¥åœ¨æ™®é€šæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼ŒMySQLè¿˜æä¾›äº†åŠŸèƒ½æ›´å¼ºå¤§çš„å¤åˆæŸ¥è¯¢ï¼Œæœ¬æ–‡å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥å­¦å­¦å¤åˆæŸ¥è¯¢çš„æ“ä½œå§ï¼\n\nä¾æ—§æ˜¯ä½¿ç”¨scottæä¾›çš„è¿™å¼ è¡¨ï¼Œæ¥è¿›è¡Œå¤åˆæŸ¥è¯¢çš„æ“ä½œã€‚\n\nåœ¨é‚£ä¹‹å‰ï¼Œå…ˆå¤ä¹ ä¸€ä¸‹æ™®é€šæŸ¥è¯¢çš„åŸºæœ¬æ“ä½œå§ï¼\næŸ¥è¯¢å·¥èµ„é«˜äº500æˆ–è€…å²—ä½ä¸ºMANAGERçš„æˆå‘˜ï¼ŒåŒæ—¶ä»–ä»¬çš„å§“åé¦–å­—æ¯ä¸ºå¤§å†™Jï¼›\n-- ä½¿ç”¨%æ¥åŒ¹é…select * from emp where (sal &gt; 500 or job = &#x27;MANAGER&#x27;) and ename like &#x27;J%&#x27;;-- ä½¿ç”¨substringå‡½æ•°select * from emp where (sal &gt; 500 or job = &#x27;MANAGER&#x27;) and substring(ename,1,1) = &#x27;J&#x27;;\n\næŒ‰ç…§éƒ¨é—¨å·å‡åºã€é›‡å‘˜çš„å·¥èµ„é™åºæ’åº\n-- é»˜è®¤å°±æ˜¯å‡åºï¼Œå¯ä»¥çœç•¥ascselect * from emp order by deptno asc, sal desc;\n\næ˜¾ç¤ºå·¥èµ„é«˜äºå¹³å‡å·¥èµ„çš„å‘˜å·¥ä¿¡æ¯\nselect * from emp where sal &gt; (select avg(sal) from emp);\n\næ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œæœ€é«˜å·¥èµ„\nselect deptno, avg(sal), max(sal) from emp group by deptno;\n\næ˜¾ç¤ºæ¯ç§å²—ä½çš„é›‡å‘˜æ•°é‡å’Œå¹³å‡å·¥èµ„\nselect job,count(*),avg(sal) from emp group by job;-- é»˜è®¤æƒ…å†µä¸‹ä¼šä¿ç•™6ä½å°æ•°ï¼Œå¯ä»¥ç”¨formatå‡½æ•°ä¿ç•™åˆ°2ä½select job,count(*),format(avg(sal),2) from emp group by job;-- æ ¼å¼åŒ–åçš„è¾“å‡ºç»“æœå¦‚ä¸‹+-----------+----------+--------------------+| job       | count(*) | format(avg(sal),2) |+-----------+----------+--------------------+| ANALYST   |        2 | 3,000.00           || CLERK     |        4 | 1,037.50           || MANAGER   |        3 | 2,758.33           || PRESIDENT |        1 | 5,000.00           || SALESMAN  |        4 | 1,400.00           |+-----------+----------+--------------------+5 rows in set (0.000 sec)\n\nä½¿ç”¨å¹´è–ªè¿›è¡Œé™åºæ’åºã€‚å¹´è–ªç­‰äº12ä¸ªæœˆçš„æœˆè–ª+å¥–é‡‘ï¼Œä½†æ˜¯åœ¨empè¡¨ä¸­ï¼Œå¹¶éæ‰€æœ‰äººéƒ½æœ‰å¥–é‡‘ï¼Œä¸€äº›äººçš„å¥–é‡‘æ˜¯nullï¼Œæ­¤æ—¶ç›´æ¥ç›¸åŠ å¾—åˆ°çš„ç»“æœå°±ä¼šæœ‰null;\nMariaDB [scott]&gt; select ename,12*sal+comm from emp;+--------+-------------+| ename  | 12*sal+comm |+--------+-------------+| SMITH  |        NULL || ALLEN  |    19500.00 || WARD   |    15500.00 || JONES  |        NULL || MARTIN |    16400.00 || BLAKE  |        NULL || CLARK  |        NULL || SCOTT  |        NULL || KING   |        NULL || TURNER |    18000.00 || ADAMS  |        NULL || JAMES  |        NULL || FORD   |        NULL || MILLER |        NULL |+--------+-------------+14 rows in set (0.001 sec)\n\næˆ‘ä»¬éœ€è¦ç”¨ifnullå‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœå¥–é‡‘ä¸ºnullåˆ™è¿”å›0ï¼›\nselect ename,12*sal+ifnull(comm,0) from emp;\n\næ­¤æ—¶å°±èƒ½å¾—åˆ°æ¯ä¸ªäººçš„å¹´è–ªäº†\nMariaDB [scott]&gt; select ename,12*sal+ifnull(comm,0) from emp;+--------+-----------------------+| ename  | 12*sal+ifnull(comm,0) |+--------+-----------------------+| SMITH  |               9600.00 || ALLEN  |              19500.00 || WARD   |              15500.00 || JONES  |              35700.00 || MARTIN |              16400.00 || BLAKE  |              34200.00 || CLARK  |              29400.00 || SCOTT  |              36000.00 || KING   |              60000.00 || TURNER |              18000.00 || ADAMS  |              13200.00 || JAMES  |              11400.00 || FORD   |              36000.00 || MILLER |              15600.00 |+--------+-----------------------+14 rows in set (0.001 sec)\n\nç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åœ¨order byä¸­ç”¨å¹´è–ªè¿›è¡Œé™åºæ’åºäº†\nMariaDB [scott]&gt; select ename,12*sal+ifnull(comm,0) as å¹´è–ª from emp order by å¹´è–ª desc;+--------+----------+| ename  | å¹´è–ª     |+--------+----------+| KING   | 60000.00 || SCOTT  | 36000.00 || FORD   | 36000.00 || JONES  | 35700.00 || BLAKE  | 34200.00 || CLARK  | 29400.00 || ALLEN  | 19500.00 || TURNER | 18000.00 || MARTIN | 16400.00 || MILLER | 15600.00 || WARD   | 15500.00 || ADAMS  | 13200.00 || JAMES  | 11400.00 || SMITH  |  9600.00 |+--------+----------+14 rows in set (0.001 sec)\n\n2.å¤šè¡¨æŸ¥è¯¢åŸºç¡€æŸ¥è¯¢çš„æ“ä½œå°±å¤ä¹ ä¸Šé¢å‡ ä¸ªå°±å·®ä¸å¤šäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å…ˆçœ‹å¤åˆæŸ¥è¯¢çš„ç¬¬ä¸€ä¸ªå¤§ç‚¹ï¼Œå¤šè¡¨æŸ¥è¯¢ã€‚\næ‰€è°“å¤šè¡¨æŸ¥è¯¢ï¼Œå°±æ˜¯å°†ä¸€ä¸ªè¡¨å’Œå¦å¤–ä¸€ä¸ªè¡¨åˆå¹¶ï¼Œå†åœ¨è¿™ä¸ªåˆå¹¶äº†ä¹‹åçš„è¡¨é‡Œé¢è¿›è¡ŒæŸ¥è¯¢ï¼›\n\næ¯”å¦‚ï¼šæ˜¾ç¤ºé›‡å‘˜åã€é›‡å‘˜å·¥èµ„ä»¥åŠæ‰€åœ¨éƒ¨é—¨çš„åå­—;\n\nå› ä¸ºé›‡å‘˜åæ˜¯åœ¨empè¡¨é‡Œé¢ï¼Œéƒ¨é—¨åå­—æ˜¯åœ¨deptè¡¨é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦è¿›è¡Œå¤šè¡¨çš„è”åˆæŸ¥è¯¢æ‰èƒ½ä¸€æ¬¡å–åˆ°ç»“æœï¼ˆæ‰§è¡Œä¸€æ¬¡SQLæŸ¥è¯¢çš„æ•ˆç‡ä¼˜äºä¸¤æ¬¡ç‹¬ç«‹çš„SQLæŸ¥è¯¢ï¼‰ã€‚\nå…¶åŸºæœ¬è¯­å¥å°±æ˜¯åœ¨fromåé¢æ·»åŠ å¤šä¸ªè¡¨ï¼Œå¹¶ä½¿ç”¨è¡¨å.è¡¨ä¸­å­—æ®µåæ¥æŒ‡å®šæŸä¸€ä¸ªè¡¨ä¸­çš„å­—æ®µï¼›å¦‚æœè¿™ä¸ªå­—æ®µåªæœ‰ä¸€ä¸ªè¡¨ä¸­æœ‰ï¼Œé‚£å°±å¯ä»¥ä¸ç”¨æŒ‡å®šè¡¨åï¼ˆä½†ä¾æ—§å»ºè®®æŒ‡å®šè¡¨åé¿å…å‡ºé”™ï¼‰\nselect * from è¡¨1,è¡¨2,...;\n\n\n2.1 ç¬›å¡å°”ç§¯å…ˆæ¥ä¸€ä¸ªå…¨åˆ—æŸ¥è¯¢ï¼Œçœ‹çœ‹æ•ˆæœ\nselect * from emp,dept;\n\nå¯ä»¥çœ‹åˆ°ï¼Œdeptè¡¨ç›´æ¥æ‹¼æ¥åœ¨äº†empè¡¨ä¹‹åï¼Œè€Œä¸”empè¡¨ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½è¢«æ ¹æ®deptä¸­ä¸åŒçš„éƒ¨é—¨IDé‡å¤äº†4æ¬¡ã€‚è¿™æ˜¯å› ä¸ºåœ¨MySQLä¸­ï¼Œä»–å¹¶ä¸çŸ¥é“ä½ éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œæ‰€ä»¥è¿›è¡Œæ•°æ®æ‹¼æ¥çš„æ—¶å€™ï¼Œæ˜¯é‡‡ç”¨ç©·ä¸¾çš„æ–¹å¼æ¥æ‹¼æ¥çš„ï¼\nè¿™ä¸ªä¸åŠ ä»»ä½•è¿‡æ»¤æ¡ä»¶ï¼Œç©·ä¸¾æ‹¼æ¥å¾—åˆ°çš„ç»“æœè¢«ç§°ä¸ºç¬›å¡å°”ç§¯ï¼ç¬›å¡å°”ç§¯å¯¹è¡¨çš„ç»“æ„å¹¶æ²¡æœ‰è¦æ±‚ï¼Œä»»ä½•ä¸¤å¼ è¡¨éƒ½å¯ä»¥è¿›è¡Œç¬›å¡å°”ç§¯ã€‚\nåœ¨MySQLä¸­ï¼Œå¤šè¡¨ç»„åˆè¿‡åçš„ç»“æœï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å½“ä½œå®ƒæœ¬æ¥å°±æ˜¯ä¸€å¼ è¡¨æ¥å¤„ç†ã€‚\n\nä¸‹å›¾æ˜¯ä¸€ä¸ªæ›´è¯¦ç»†çš„ç¤ºæ„å›¾ï¼Œæˆ‘ä»¬å…ˆä»empè¡¨ä¸­å–å‡ºä¸€æ¡è®°å½•ï¼Œå°†å…¶å’Œdeptè¡¨ä¸­çš„4æ¡è®°å½•è¿›è¡Œç»„åˆï¼Œå‘ˆç°åœ¨æœ€ç»ˆç»“æœé‡Œé¢ã€‚å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸€ä¸ªç©·ä¸¾çš„ç»“æœï¼Œå› ä¸ºæ¯ä¸ªempçš„è®°å½•éƒ½ä¼šå’Œ4ä¸ªdeptçš„è®°å½•è¿›è¡Œç»„åˆï¼Œæœ€ç»ˆdeptä¸­çš„æ¯ä¸ªè®°å½•ä¹Ÿå’Œempä¸­çš„æ¯ä¸ªè®°å½•æœ‰è¿‡ä¸€æ¬¡ç»„åˆäº†ã€‚\n\näº¤æ¢empå’Œdeptçš„é¡ºåºå¹¶ä¸ä¼šå½±å“è¿™ä¸ªæ’åˆ—ç»„åˆçš„ç»“æœï¼Œä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œdeptè¡¨å’Œempçš„é¡ºåºäº¤æ¢åªä¼šäº¤æ¢ä¸¤ä¸ªè¡¨ä¸­çš„åˆ—åœ¨ç¬›å¡å°”ç§¯ä¸­å‡ºç°çš„é¡ºåºã€‚\n\n2.2 æŒ‡å®šæ¡ä»¶æ¥ä¸‹æ¥å†å›åˆ°ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼šæ˜¾ç¤ºé›‡å‘˜åã€é›‡å‘˜å·¥èµ„ä»¥åŠæ‰€åœ¨éƒ¨é—¨çš„åå­—ï¼›\nselect emp.ename,emp.sal,dept.dname from emp,dept;\n\nè™½ç„¶æˆ‘ä»¬é€‰ä¸­äº†æˆ‘ä»¬éœ€è¦çš„åˆ—æ¥æ˜¾ç¤ºï¼Œä½†ä¾æ—§æ²¡æœ‰è§£å†³ç¬›å¡å°”ç§¯ä¸­ç©·ä¸¾å‡ºæ¥çš„æ— æ•ˆæ•°æ®ï¼Œä¸€ä¸ªäººåè¿˜æ˜¯å‡ºç°äº†å››æ¬¡ï¼›\nMariaDB [scott]&gt; select emp.ename,emp.sal,dept.dname from emp,dept;+--------+---------+------------+| ename  | sal     | dname      |+--------+---------+------------+| SMITH  |  800.00 | ACCOUNTING || SMITH  |  800.00 | RESEARCH   || SMITH  |  800.00 | SALES      || SMITH  |  800.00 | OPERATIONS || ALLEN  | 1600.00 | ACCOUNTING || ALLEN  | 1600.00 | RESEARCH   || ALLEN  | 1600.00 | SALES      || ALLEN  | 1600.00 | OPERATIONS |\n\nè¿™æ—¶å€™å°±éœ€è¦æ·»åŠ ä¸Šç­›é€‰æ¡ä»¶ï¼Œæ¥å‰”é™¤æ‰æ— æ•ˆçš„æ•°æ®ã€‚\nè§‚å¯Ÿç¬›å¡å°”ç§¯çš„ç»“æ„å¯ä»¥çŸ¥é“ï¼Œå’Œå½“å‰å‘˜å·¥çš„éƒ¨é—¨ç¼–å·ä¸åŒçš„éƒ¨é—¨çš„æ•°æ®å°±æ˜¯æ— æ•ˆçš„ï¼Œæˆ‘ä»¬æ·»åŠ ä¸Šå‘˜å·¥éƒ¨é—¨ç¼–å·å’Œéƒ¨é—¨è¡¨ä¸­çš„éƒ¨é—¨ç¼–å·ç›¸åŒçš„æ¡ä»¶ï¼Œå°±å¯ä»¥å‰”é™¤æ‰æ— æ•ˆçš„æ•°æ®ã€‚\nselect emp.ename,emp.sal,dept.dname from emp,dept where emp.deptno = dept.deptno; -- é€šè¿‡whereä¿è¯å‘˜å·¥è¡¨ä¸­çš„éƒ¨é—¨ç¼–å·å’Œéƒ¨é—¨è¡¨ä¸­ç›¸åŒ\n\nè¿™æ—¶å€™ç­›é€‰å‡ºæ¥çš„æ•°æ®ï¼Œæ‰æ˜¯æ­£ç¡®çš„æ¯ä¸ªå‘˜å·¥å’Œå…¶å¯¹åº”çš„éƒ¨é—¨åå­—çš„æ•°æ®ï¼›æ¯ä¸ªå‘˜å·¥ä¹Ÿä¸åœ¨ä¼šé‡å¤4æ¬¡äº†ã€‚\nMariaDB [scott]&gt; select emp.ename,emp.sal,dept.dname from emp,dept where emp.deptno = dept.deptno;+--------+---------+------------+| ename  | sal     | dname      |+--------+---------+------------+| SMITH  |  800.00 | RESEARCH   || ALLEN  | 1600.00 | SALES      || WARD   | 1250.00 | SALES      || JONES  | 2975.00 | RESEARCH   || MARTIN | 1250.00 | SALES      || BLAKE  | 2850.00 | SALES      || CLARK  | 2450.00 | ACCOUNTING || SCOTT  | 3000.00 | RESEARCH   || KING   | 5000.00 | ACCOUNTING || TURNER | 1500.00 | SALES      || ADAMS  | 1100.00 | RESEARCH   || JAMES  |  950.00 | SALES      || FORD   | 3000.00 | RESEARCH   || MILLER | 1300.00 | ACCOUNTING |+--------+---------+------------+14 rows in set (0.004 sec)\n\n2.3 å°ç»ƒä¹ å†æ¥åšä¸¤ä¸ªå°ç»ƒä¹ \n-- æ˜¾ç¤ºéƒ¨é—¨å·ä¸º10çš„éƒ¨é—¨åå­—ï¼Œå‘˜å·¥åå­—å’Œå‘˜å·¥å·¥èµ„ï¼›MariaDB [scott]&gt; select emp.ename,emp.sal,dept.dname from emp,dept where emp.deptno = dept.deptno and dept.deptno = 10;+--------+---------+------------+| ename  | sal     | dname      |+--------+---------+------------+| CLARK  | 2450.00 | ACCOUNTING || KING   | 5000.00 | ACCOUNTING || MILLER | 1300.00 | ACCOUNTING |+--------+---------+------------+3 rows in set (0.001 sec)-- æ˜¾ç¤ºå„ä¸ªéƒ¨é—¨å‘˜å·¥çš„å§“åï¼Œå·¥èµ„ï¼Œå·¥èµ„çº§åˆ«MariaDB [scott]&gt; select emp.ename,emp.sal,salgrade.grade from emp,salgrade where emp.sal between losal and hisal;+--------+---------+-------+| ename  | sal     | grade |+--------+---------+-------+| SMITH  |  800.00 |     1 || ALLEN  | 1600.00 |     3 || WARD   | 1250.00 |     2 || JONES  | 2975.00 |     4 || MARTIN | 1250.00 |     2 || BLAKE  | 2850.00 |     4 || CLARK  | 2450.00 |     4 || SCOTT  | 3000.00 |     4 || KING   | 5000.00 |     5 || TURNER | 1500.00 |     3 || ADAMS  | 1100.00 |     1 || JAMES  |  950.00 |     1 || FORD   | 3000.00 |     4 || MILLER | 1300.00 |     2 |+--------+---------+-------+14 rows in set (0.001 sec)\n\n3.è‡ªé“¾æ¥æ‰€è°“è‡ªè¿æ¥ï¼Œæ˜¯åœ¨åŒä¸€å¼ è¡¨ä¸­è¿›è¡Œé“¾æ¥å’ŒæŸ¥è¯¢ã€‚\næ¯”å¦‚æ˜¾ç¤ºå‘˜å·¥FORDä¸Šçº§é¢†å¯¼çš„å‘˜å·¥ç¼–å·å’Œå§“åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å­æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥ç”¨empè¡¨çš„è‡ªé“¾æ¥æ¥å¤„ç†ã€‚\n-- ä½¿ç”¨å­æŸ¥è¯¢select empno,ename from emp where emp.empno = (select mgr from emp where ename=&#x27;FORD&#x27;);-- ä½¿ç”¨å¤šè¡¨æŸ¥è¯¢ï¼ˆå…¶å®æ˜¯ç»™empè¡¨èµ·ä¸¤ä¸ªä¸åŒçš„åˆ«åï¼‰-- å¦‚æœä¸èµ·åˆ«åï¼Œåˆ™æ— æ³•è‡ªé“¾æ¥æˆåŠŸï¼Œå› ä¸ºæ²¡æœ‰åŠæ³•åŒºåˆ†ä¸¤ä¸ªempè¡¨-- å‘˜å·¥çš„é¢†å¯¼ç¼–å·å’Œå‘˜å·¥ç¼–å·ä¸€è‡´ï¼Œå³ä¸ºé¢†å¯¼ç”¨æˆ·çš„ä¿¡æ¯select leader.empno,leader.ename from emp leader, emp worker where leader.empno = worker.mgr \t\tand worker.ename=&#x27;FORD&#x27;;\n\nè¿™ç§åœ¨ä¸€å¼ è¡¨é‡Œé¢è¿›è¡Œç¬›å¡å„¿ç§¯çš„æŸ¥è¯¢æ“ä½œï¼Œå°±å«åšè‡ªé“¾æ¥ã€‚æœ€ç»ˆéƒ½å¯ä»¥è·å–åˆ°æ­£ç¡®ç»“æœ\n+--------+-------+| empno  | ename |+--------+-------+| 007566 | JONES |+--------+-------+1 row in set (0.001 sec)\n\nè‡ªé“¾æ¥æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¤šè¡¨æŸ¥è¯¢ï¼Œåªä¸è¿‡ä¸¤ä¸ªè¡¨éƒ½æ˜¯empè¡¨è€Œå·²ã€‚\n4.å­æŸ¥è¯¢å­æŸ¥è¯¢æŒ‡çš„æ˜¯ï¼Œå°†ä¸€ä¸ªselectæŸ¥è¯¢è¯­å¥ä½œä¸ºå­æ“ä½œï¼ŒåµŒå…¥åˆ°ä¸€ä¸ªsqlè¯­å¥ä¸­ï¼›\næˆ‘ä»¬å¯ä»¥æŠŠå­æŸ¥è¯¢çš„ç»“æœä¹Ÿå½“ä½œæ˜¯ä¸€å¼ è¡¨æ¥è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·ä¸€æƒ³å°±èƒ½ç†è§£å­æŸ¥è¯¢æ˜¯æ€ä¹ˆç©çš„äº†ã€‚\n4.1 å•è¡Œå­æŸ¥è¯¢æ˜¾ç¤ºå’ŒSMITHåŒä¸€ä¸ªéƒ¨é—¨çš„å‘˜å·¥\nselect * from emp where deptno = (select deptno from emp where ename=&#x27;smith&#x27;);\n\nåœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œå­æŸ¥è¯¢è¯­å¥æ˜¯select deptno from emp where ename=&#39;smith&#39;ï¼Œè¿™ä¸ªè¯­å¥è¿”å›çš„ç»“æœåªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥è¢«ç§°ä¸ºå•è¡Œå­æŸ¥è¯¢ã€‚\n4.2 å¤šè¡Œå­æŸ¥è¯¢æœ‰å•è¡ŒæŸ¥è¯¢ï¼Œè‡ªç„¶ä¹Ÿæœ‰å¤šè¡ŒæŸ¥è¯¢ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªè¯­å¥è¿”å›äº†å¤šæ¡ç»“æœï¼ˆå¤šè¡Œå•åˆ—ï¼‰ï¼Œå°†å…¶ç›´æ¥ä½œä¸ºåˆ¤æ®è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè¿™ä¼šå¯¼è‡´åˆ¤æ®ä¸å”¯ä¸€ï¼ŒMySQLä¸çŸ¥é“ä½ åˆ°åº•æƒ³è¦æ¯”è¾ƒçš„æ˜¯é‚£ä¸€éƒ¨åˆ†çš„æ•°æ®ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨ä¸‹é¢å‡ ä¸ªå…³é”®å­—æ¥å¸®å¿™äº†\n\ninï¼šæŸ¥è¯¢å­˜åœ¨äºæŸæŸç»“æœé‡Œé¢çš„æ•°æ®\nallï¼šæŸ¥è¯¢æ¯”è¿™ä¸ªç»“æœä¸­æ‰€æœ‰å€¼éƒ½å¤§&#x2F;å°çš„æ•°æ®\nany&#x2F;someï¼šæŸ¥è¯¢æ¯”è¿™ä¸ªç»“æœä¸­æŸä¸€ä¸ªå€¼å¤§&#x2F;å°çš„æ•°æ®\n\nä»¥ä¸‹æ˜¯å‡ ä¸ªç¤ºä¾‹ï¼š\næŸ¥è¯¢å’Œ10å·éƒ¨é—¨å·¥ä½œå²—ä½ç›¸åŒçš„å‘˜å·¥åå­—ã€å²—ä½ã€å·¥èµ„ã€éƒ¨é—¨å·ï¼Œä½†æ˜¯ä¸åŒ…å«10å·éƒ¨é—¨è‡ªå·±çš„å‘˜å·¥\nselect ename,job,sal,deptno from emp where job in (select job from emp where deptno=10) and deptno &lt;&gt; 10;+-------+---------+---------+--------+| ename | job     | sal     | deptno |+-------+---------+---------+--------+| SMITH | CLERK   |  800.00 |     20 || JONES | MANAGER | 2975.00 |     20 || BLAKE | MANAGER | 2850.00 |     30 || ADAMS | CLERK   | 1100.00 |     20 || JAMES | CLERK   |  950.00 |     30 |+-------+---------+---------+--------+5 rows in set (0.001 sec)\n\næ˜¾ç¤ºéƒ¨é—¨å·¥èµ„æ¯”30å·éƒ¨é—¨æ‰€æœ‰å‘˜å·¥å·¥èµ„éƒ½é«˜çš„å‘˜å·¥å§“åã€å·¥èµ„ã€éƒ¨é—¨å·\nselect ename,sal,deptno from emp where sal &gt; all(select sal from emp where deptno = 30);+-------+---------+--------+| ename | sal     | deptno |+-------+---------+--------+| JONES | 2975.00 |     20 || SCOTT | 3000.00 |     20 || KING  | 5000.00 |     10 || FORD  | 3000.00 |     20 |+-------+---------+--------+4 rows in set (0.001 sec)\n\nsomeå’Œanyçš„ä½œç”¨ç›¸åŒï¼Œç”¨äºæŸ¥è¯¢æŸä¸ªæ¡ä»¶æ¯”å­æŸ¥è¯¢ç»“æœé›†ä¸­ä»»æ„ä¸€ä¸ªå€¼éƒ½å¤§&#x2F;å°çš„ç»“æœã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ŒæŸ¥è¯¢empå‘˜å·¥è¡¨ä¸­ï¼Œè–ªæ°´æ¯”å·¥ä½œæ˜¯SALESMANçš„ä»»ä½•äººå¤§çš„å‘˜å·¥ã€‚æŸ¥è¯¢ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹empå…¨è¡¨çš„æ•°æ®ï¼Œåœ¨è¿™é‡Œèƒ½å¾—å‡ºå·¥ä½œæ˜¯SALESMANçš„å‘˜å·¥çš„æœ€ä½å·¥èµ„æ˜¯1250ã€‚\nMariaDB [scott]&gt; select * from emp;+--------+--------+-----------+------+---------------------+---------+---------+--------+| empno  | ename  | job       | mgr  | hiredate            | sal     | comm    | deptno |+--------+--------+-----------+------+---------------------+---------+---------+--------+| 007369 | SMITH  | CLERK     | 7902 | 1980-12-17 00:00:00 |  800.00 |    NULL |     20 || 007499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 00:00:00 | 1600.00 |  300.00 |     30 || 007521 | WARD   | SALESMAN  | 7698 | 1981-02-22 00:00:00 | 1250.00 |  500.00 |     30 || 007566 | JONES  | MANAGER   | 7839 | 1981-04-02 00:00:00 | 2975.00 |    NULL |     20 || 007654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 00:00:00 | 1250.00 | 1400.00 |     30 || 007698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 00:00:00 | 2850.00 |    NULL |     30 || 007782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 |    NULL |     10 || 007788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 00:00:00 | 3000.00 |    NULL |     20 || 007839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 |    NULL |     10 || 007844 | TURNER | SALESMAN  | 7698 | 1981-09-08 00:00:00 | 1500.00 |    0.00 |     30 || 007876 | ADAMS  | CLERK     | 7788 | 1987-05-23 00:00:00 | 1100.00 |    NULL |     20 || 007900 | JAMES  | CLERK     | 7698 | 1981-12-03 00:00:00 |  950.00 |    NULL |     30 || 007902 | FORD   | ANALYST   | 7566 | 1981-12-03 00:00:00 | 3000.00 |    NULL |     20 || 007934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 |    NULL |     10 |+--------+--------+-----------+------+---------------------+---------+---------+--------+14 rows in set (0.000 sec)\n\nä½¿ç”¨å¦‚ä¸‹è¯­å¥æŸ¥è¯¢è–ªæ°´æ¯”SALESMANä»»æ„å‘˜å·¥å·¥èµ„é«˜çš„å‘˜å·¥ï¼Œå³è¿‡æ»¤æ‰å·¥èµ„å°äºç­‰äº1250çš„å‘˜å·¥ã€‚\nMariaDB [scott]&gt; select * from emp where sal &gt; some(select sal from emp where job = &#x27;SALESMAN&#x27;);+--------+--------+-----------+------+---------------------+---------+--------+--------+| empno  | ename  | job       | mgr  | hiredate            | sal     | comm   | deptno |+--------+--------+-----------+------+---------------------+---------+--------+--------+| 007499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 00:00:00 | 1600.00 | 300.00 |     30 || 007566 | JONES  | MANAGER   | 7839 | 1981-04-02 00:00:00 | 2975.00 |   NULL |     20 || 007698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 00:00:00 | 2850.00 |   NULL |     30 || 007782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 |   NULL |     10 || 007788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 00:00:00 | 3000.00 |   NULL |     20 || 007839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 |   NULL |     10 || 007844 | TURNER | SALESMAN  | 7698 | 1981-09-08 00:00:00 | 1500.00 |   0.00 |     30 || 007902 | FORD   | ANALYST   | 7566 | 1981-12-03 00:00:00 | 3000.00 |   NULL |     20 || 007934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 |   NULL |     10 |+--------+--------+-----------+------+---------------------+---------+--------+--------+9 rows in set (0.000 sec)\n\n4.3 å¤šåˆ—å­æŸ¥è¯¢å‰ä¸¤ä¸ªå­æŸ¥è¯¢çš„ç»“æœéƒ½æ˜¯å•åˆ—çš„ï¼Œå¦‚æœæ˜¯å¤šåˆ—çš„ç»“æœï¼Œæˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\nä¸¾ä¾‹ï¼šæŸ¥è¯¢å’ŒSMITHéƒ¨é—¨å’Œå²—ä½å®Œå…¨ç›¸åŒçš„æ‰€æœ‰é›‡å‘˜ï¼Œä¸åŒ…æ‹¬SMITHæœ¬äººã€‚\nselect ename from emp where (deptno,job)=\t(select deptno,job from emp where ename = &#x27;SMITH&#x27;)\tand ename != &#x27;SMITH&#x27;;\n\nè¿™é‡Œé¢æˆ‘ä»¬åœ¨whereæ¡ä»¶ä¸­ç›´æ¥æŒ‡å®šäº†ä¸¤åˆ—ï¼Œç”¨äºå’Œselectå­æŸ¥è¯¢çš„ç»“æœçš„ä¸¤åˆ—è¿›è¡Œæ¯”è¾ƒã€‚æ³¨æ„è¦ä¿è¯ä¸¤ä¸ªåˆ—å’ŒselectæŒ‡å®šåˆ—çš„é¡ºåºä¸€æ ·ã€‚\nMariaDB [scott]&gt; select ename from emp where (deptno,job)=    -&gt; (select deptno,job from emp where ename = &#x27;SMITH&#x27;)    -&gt; and ename != &#x27;SMITH&#x27;;+-------+| ename |+-------+| ADAMS |+-------+1 row in set (0.026 sec)\n\nåœ¨å¤šåˆ—å­æŸ¥è¯¢ä¸­ï¼Œin&#x2F;any&#x2F;allå…³é”®å­—ä¸­åªæœ‰anyå…³é”®å­—å¯ä»¥ä½¿ç”¨ã€‚\næ¯”å¦‚æˆ‘ä»¬å°†ä¸Šé¢çš„ä¾‹å­æ”¹æˆâ€œæŸ¥è¯¢åå­—ä¸ºSå¼€å¤´çš„å‘˜å·¥çš„éƒ¨é—¨å’Œå²—ä½å®Œå…¨ç›¸åŒçš„æ‰€æœ‰é›‡å‘˜â€\nMariaDB [scott]&gt; (select deptno,job from emp where ename like &#x27;S%&#x27;);+--------+---------+| deptno | job     |+--------+---------+|     20 | CLERK   ||     20 | ANALYST |+--------+---------+2 rows in set (0.002 sec)MariaDB [scott]&gt; select ename from emp where (deptno,job) = any(select deptno,job from emp where ename like &#x27;S%&#x27;);+-------+| ename |+-------+| SMITH || SCOTT || ADAMS || FORD  |+-------+4 rows in set (0.001 sec)MariaDB [scott]&gt; select ename from emp where (deptno,job) = all(select deptno,job from emp where ename like &#x27;S%&#x27;);ERROR 1241 (21000): Operand should contain 1 column(s)MariaDB [scott]&gt; select ename from emp where (deptno,job) in (select deptno,job from emp where ename like &#x27;S%&#x27;);+-------+| ename |+-------+| SMITH || SCOTT || ADAMS || FORD  |+-------+4 rows in set (0.002 sec)\n\nåœ¨æµ‹è¯•ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå­æŸ¥è¯¢çš„ç»“æœæ˜¯2è¡Œ2åˆ—ï¼Œæ­¤æ—¶æˆ‘ä»¬åªèƒ½ç”¨anyå…³é”®å­—æ¥æŒ‡å®šç»“æœå’Œè¿™ä¸¤ä¸ªå‘˜å·¥ä»»æ„ä¸€ä¸ªçš„éƒ¨é—¨ã€å·¥ä½œä¸€æ ·çš„äººï¼›inå…³é”®å­—æŒ‡å®šéƒ¨é—¨ã€å·¥ä½œåœ¨è¿™ä¸ªç»“æœä¸­çš„æ•°æ®ã€‚\nallå…³é”®å­—ä¼šæŠ¥é”™ï¼Œå› ä¸ºallå…³é”®å­—è‡ªèƒ½ç”¨äºä¸€åˆ—æ•°æ®ã€‚\n4.4 åœ¨fromä¸­ä½¿ç”¨å­æŸ¥è¯¢è¿™ä¸ªå°±æ›´å¥½ç†è§£äº†ï¼Œæˆ‘ä»¬å°†selectçš„ç»“æœè§†ä½œå¦å¤–ä¸€å¼ è¡¨ï¼Œæ”¾åˆ°fromåé¢å°±è¡Œäº†ï¼Œæ­¤æ—¶å°±ç»“åˆäº†å­æŸ¥è¯¢å’Œå¤šè¡¨æŸ¥è¯¢ã€‚\n\nä¸¾ä¾‹ï¼šæ˜¾ç¤ºæ¯ä¸ªå·¥èµ„é«˜äºè‡ªå·±éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„å§“åã€éƒ¨é—¨ã€å·¥èµ„å’Œéƒ¨é—¨å¹³å‡å·¥èµ„ï¼›\n\nè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è·å¾—å„ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„ï¼Œå¹¶å°†å…¶è§†ä½œä¸€ä¸ªæ–°è¡¨ã€‚å†å°†å‘˜å·¥è¡¨å’Œå…¶é›†åˆï¼Œç­›é€‰å‡ºæœ€ç»ˆç»“æœ\n-- formatå‡½æ•°ç”¨äºé™åˆ¶å°æ•°ç‚¹ä¸ªæ•°select ename,deptno,sal,format(avgsal,2)from emp,(select avg(sal) as avgsal,deptno as dt from         emp group by deptno) as tempwhere emp.sal &gt; temp.avgsal and emp.deptno = temp.dt; \n\nç»“æœå¦‚ä¸‹\nMariaDB [scott]&gt; select ename,deptno,sal,format(avgsal,2)    -&gt; from emp,(select avg(sal) as avgsal,deptno as dt from    -&gt;          emp group by deptno) as temp    -&gt; where emp.sal &gt; temp.avgsal and emp.deptno = temp.dt;+-------+--------+---------+------------------+| ename | deptno | sal     | format(avgsal,2) |+-------+--------+---------+------------------+| ALLEN |     30 | 1600.00 | 1,566.67         || JONES |     20 | 2975.00 | 2,175.00         || BLAKE |     30 | 2850.00 | 1,566.67         || SCOTT |     20 | 3000.00 | 2,175.00         || KING  |     10 | 5000.00 | 2,916.67         || FORD  |     20 | 3000.00 | 2,175.00         |+-------+--------+---------+------------------+6 rows in set (0.001 sec)\n\nä¾‹é¢˜è¿›é˜¶è¿›é˜¶ï¼šåœ¨â€œæ¯ä¸ªå·¥èµ„é«˜äºè‡ªå·±éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„å§“åã€éƒ¨é—¨ã€å·¥èµ„å’Œéƒ¨é—¨å¹³å‡å·¥èµ„â€è¦æ±‚çš„åŸºç¡€ä¸Šï¼Œåœ¨ç»“æœä¸­åŠ ä¸Šå‘˜å·¥çš„è–ªèµ„ç­‰çº§ã€‚\nselect ename,deptno,sal,format(avgsal,2)from emp,(select avg(sal) as avgsal,deptno as dt from         emp group by deptno) as tempwhere emp.sal &gt; temp.avgsal and emp.deptno = temp.dt; \n\né¦–å…ˆå°†åŸæœ‰ç»“æœå’Œè–ªèµ„ç­‰çº§è¡¨è¿›è¡Œç¬›å¡å°”ç§¯ï¼Œç„¶åå†å»æ‰æ— æ•ˆçš„æ•°æ®\n-- å¤‡æ³¨ï¼šè¿™ä¸ªSQLæœ‰é”™è¯¯ï¼select * from salgrade,(select ename,deptno,sal,format(avgsal,2)from emp,(select avg(sal) as avgsal,deptno as dt from         emp group by deptno) as tempwhere emp.sal &gt; temp.avgsal and emp.deptno = temp.dt);\n\nç›´æ¥æ‰§è¡Œä¸Šé¢è¿™ä¸ªSQLæ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºè¿™é‡Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªå­æŸ¥è¯¢çš„ç»“æœï¼Œå´æ²¡æœ‰ç»™è¿™ä¸ªå­æŸ¥è¯¢ä¸Šä¸€ä¸ªè¡¨çš„åˆ«åï¼Œæ­¤æ—¶MySQLä¼šæ‹’ç»æ‰§è¡Œç¬›å¡å°”ç§¯ï¼Œå¹¶ä¸”æŠ¥å‘ŠSQLè¯­æ³•é”™è¯¯ã€‚\nERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near &#x27;&#x27; at line 4\n\næ­£ç¡®çš„å†™æ³•æ˜¯ç»™å­æŸ¥è¯¢åŠ ä¸Šä¸€ä¸ªè¡¨çš„åˆ«åï¼Œå³å¯æŸ¥è¯¢åˆ°ç¬›å¡å°”ç§¯çš„ç»“æœ\n-- æ›´æ­£ï¼šç”¨äºç¬›å¡å°”ç§¯çš„å­æŸ¥è¯¢éœ€è¦æœ‰åˆ«åselect * from salgrade,(select ename,deptno,sal,format(avgsal,2)    from emp,(select avg(sal) as avgsal,deptno as dt from             emp group by deptno) as temp    where emp.sal &gt; temp.avgsal and emp.deptno = temp.dt) as subquery;\n\nä¸ºäº†æ–¹ä¾¿åœ¨åšå®¢ä¸­å±•ç¤ºï¼Œæˆ‘åœ¨æœ«å°¾æ·»åŠ äº†ä¸€ä¸ªlimit 1ï¼Œè¿™æ ·èƒ½å¿«é€ŸçŸ¥é“sqlæ˜¯å¦æœ‰é”™è¯¯ï¼Œåˆä¸ä¼šè¢«å¤§é‡æŸ¥è¯¢ç»“æœå¡«æ»¡å±å¹•ã€‚\nMariaDB [scott]&gt; select * from salgrade,(select ename,deptno,sal,format(avgsal,2)    -&gt; from emp,(select avg(sal) as avgsal,deptno as dt from    -&gt;          emp group by deptno) as temp    -&gt; where emp.sal &gt; temp.avgsal and emp.deptno = temp.dt) as subquery limit 1;+-------+-------+-------+-------+--------+---------+------------------+| grade | losal | hisal | ename | deptno | sal     | format(avgsal,2) |+-------+-------+-------+-------+--------+---------+------------------+|     1 |   700 |  1200 | ALLEN |     30 | 1600.00 | 1,566.67         |+-------+-------+-------+-------+--------+---------+------------------+1 row in set (0.001 sec)\n\nç¡®è®¤æˆ‘ä»¬çš„sqlæ­£ç¡®åï¼Œå†é€šè¿‡whereæ¡ä»¶å»æ‰æ— æ•ˆçš„æ•°æ®ï¼Œå¹¶åœ¨selectä¸­å†™æ¸…æ¥šæˆ‘ä»¬éœ€è¦çš„æœ€ç»ˆç»“æœã€‚\nselect grade,ename,deptno,sal,asal from salgrade,(select ename,deptno,sal,format(avgsal,2) as asal    from emp,(select avg(sal) as avgsal,deptno as dt from             emp group by deptno) as temp    where emp.sal &gt; temp.avgsal and emp.deptno = temp.dt) as subquerywhere subquery.sal between losal and hisal;\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±æˆåŠŸå¾—åˆ°äº†åŒ…å«å‘˜å·¥è–ªèµ„ç­‰çº§çš„ç»“æœï¼\nMariaDB [scott]&gt; select grade,ename,deptno,sal,asal from salgrade,(select ename,deptno,sal,format(avgsal,2) as asal    -&gt;     from emp,(select avg(sal) as avgsal,deptno as dt from    -&gt;              emp group by deptno) as temp    -&gt;     where emp.sal &gt; temp.avgsal and emp.deptno = temp.dt) as subquery    -&gt; where subquery.sal between losal and hisal;+-------+-------+--------+---------+----------+| grade | ename | deptno | sal     | asal     |+-------+-------+--------+---------+----------+|     3 | ALLEN |     30 | 1600.00 | 1,566.67 ||     4 | JONES |     20 | 2975.00 | 2,175.00 ||     4 | BLAKE |     30 | 2850.00 | 1,566.67 ||     4 | SCOTT |     20 | 3000.00 | 2,175.00 ||     5 | KING  |     10 | 5000.00 | 2,916.67 ||     4 | FORD  |     20 | 3000.00 | 2,175.00 |+-------+-------+--------+---------+----------+6 rows in set (0.001 sec)\n\nå°ç»ƒä¹ 1æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨å·¥èµ„æœ€é«˜çš„äººçš„å§“åã€å·¥èµ„ã€éƒ¨é—¨ã€æœ€é«˜å·¥èµ„ã€‚\nselect emp.ename, emp.sal, emp.deptno, ms from emp,(select max(sal) ms, deptno           from emp group by deptno) tempwhere emp.deptno=temp.deptno and emp.sal=temp.ms;\n\nç»“æœå¦‚ä¸‹\nMariaDB [scott]&gt; select emp.ename, emp.sal, emp.deptno, ms    -&gt; from emp,(select max(sal) ms, deptno    -&gt;       fr          from emp group by deptno) temp    -&gt; where emp.deptno=temp.deptno and emp.sal=temp.ms;+-------+---------+--------+---------+| ename | sal     | deptno | ms      |+-------+---------+--------+---------+| BLAKE | 2850.00 |     30 | 2850.00 || SCOTT | 3000.00 |     20 | 3000.00 || KING  | 5000.00 |     10 | 5000.00 || FORD  | 3000.00 |     20 | 3000.00 |+-------+---------+--------+---------+4 rows in set (0.001 sec)\n\nå°ç»ƒä¹ 2æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬éƒ¨é—¨åå­—ã€ç¼–å·ã€åœ°å€ï¼‰å’Œäººå‘˜æ•°é‡ã€‚\nè¿™ä¸ªé—®é¢˜å¯ä»¥ç”¨å¤šè¡¨æŸ¥è¯¢æˆ–ç”¨å­æŸ¥è¯¢è§£å†³ã€‚\n-- ä½¿ç”¨å¤šè¡¨select dept.dname,dept.deptno,dept.loc,count(*) as mycntfrom emp,deptwhere emp.deptno = dept.deptnogroup by dept.deptno,dept.dname,dept.loc;\n\nä½¿ç”¨å­æŸ¥è¯¢çš„æ–¹å¼å¦‚ä¸‹\nselect dept.deptno,dname,mycnt,loc from dept,(select count(*) as mycnt,deptno from emp          \tgroup by deptno) tempwhere dept.deptno=temp.deptno;\n\nè¿è¡Œç»“æœç›¸åŒï¼ˆåˆ—çš„ä½ç½®ä¸ä¸€æ ·ï¼‰\nMariaDB [scott]&gt; select dept.dname,dept.deptno,dept.loc,count(*) as mycnt    -&gt;  emp,depfrom emp,dept    -&gt; where emp.deptno = dept.deptno    -&gt; group by dept.deptno,dept.dname,dept.loc;+------------+--------+----------+-------+| dname      | deptno | loc      | mycnt |+------------+--------+----------+-------+| ACCOUNTING |     10 | NEW YORK |     3 || RESEARCH   |     20 | DALLAS   |     5 || SALES      |     30 | CHICAGO  |     6 |+------------+--------+----------+-------+3 rows in set (0.002 sec)MariaDB [scott]&gt; select dept.deptno,dname,mycnt,loc dept,(    -&gt; from dept,(select count(*) as mycnt,deptno from emp    -&gt;           group by deptno) temp    -&gt; tno;where dept.deptno=temp.deptno;+--------+------------+-------+----------+| deptno | dname      | mycnt | loc      |+--------+------------+-------+----------+|     10 | ACCOUNTING |     3 | NEW YORK ||     20 | RESEARCH   |     5 | DALLAS   ||     30 | SALES      |     6 | CHICAGO  |+--------+------------+-------+----------+3 rows in set (0.001 sec)\n\n4.5 åˆå¹¶æŸ¥è¯¢å¦‚æœæƒ³åˆå¹¶å¤šä¸ªselectçš„æ‰§è¡Œç»“æœï¼Œéœ€è¦ä½¿ç”¨unionæˆ–union allæ“ä½œç¬¦æ¥å¤„ç†ã€‚\n4.5.1 unionè¯¥æ“ä½œç¬¦ç”¨äºè·å–ä¸¤ä¸ªç»“æœé›†çš„å¹¶é›†ï¼Œå½“ä½¿ç”¨è¯¥æ“ä½œç¬¦æ—¶ï¼Œä¼šè‡ªåŠ¨å»æ‰ç»“æœé›†ä¸­çš„é‡å¤è¡Œã€‚\n\næ³¨æ„ï¼Œunionåœ¨å¤„ç†çš„æ—¶å€™ä¸ä¼šæ£€æŸ¥ä¸¤ä¸ªå­æŸ¥è¯¢ä¸­åˆ—çš„å…³ç³»ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦ä¿è¯åˆ—çš„æ•°é‡ä¸€è‡´ï¼Œä¸”å­—æ®µé¡ºåºä¸€è‡´ï¼Œå¦åˆ™é›†åˆå‡ºæ¥çš„ç»“æœæ²¡æœ‰æ„ä¹‰ã€‚\n\nä¸¾ä¾‹ï¼šå°†å·¥èµ„å¤§äº2500æˆ–è€…èŒä½æ˜¯MANAGERçš„äººç­›é€‰å‡ºæ¥ã€‚\nselect ename,sal,job from emp where sal&gt;2500 unionselect ename,sal,job from emp where job=&#x27;MANAGER&#x27;;\n\nå•ç‹¬æŸ¥è¯¢è¿™ä¸¤ä¸ªè¡¨æ—¶ï¼Œæœ‰ä¸€ä¸ªé‡å¤æ•°æ®JONES\nMariaDB [scott]&gt; select ename,sal,job from emp where sal&gt;2500;+-------+---------+-----------+| ename | sal     | job       |+-------+---------+-----------+| JONES | 2975.00 | MANAGER   || BLAKE | 2850.00 | MANAGER   || SCOTT | 3000.00 | ANALYST   || KING  | 5000.00 | PRESIDENT || FORD  | 3000.00 | ANALYST   |+-------+---------+-----------+5 rows in set (0.001 sec)MariaDB [scott]&gt; select ename,sal,job from emp where job=&#x27;MANAGER&#x27;;+-------+---------+---------+| ename | sal     | job     |+-------+---------+---------+| JONES | 2975.00 | MANAGER || BLAKE | 2850.00 | MANAGER || CLARK | 2450.00 | MANAGER |+-------+---------+---------+3 rows in set (0.001 sec)\n\nä½¿ç”¨unionåï¼Œä¼šå»æ‰è¿™ä¸ªé‡å¤æ•°æ®ã€‚\nMariaDB [scott]&gt; select ename,sal,job from emp where sal&gt;2500 union\t-&gt; select ename,sal,job from emp where job=&#x27;MANAGER&#x27;;+-------+---------+-----------+| ename | sal     | job       |+-------+---------+-----------+| JONES | 2975.00 | MANAGER   || BLAKE | 2850.00 | MANAGER   || SCOTT | 3000.00 | ANALYST   || KING  | 5000.00 | PRESIDENT || FORD  | 3000.00 | ANALYST   || CLARK | 2450.00 | MANAGER   |+-------+---------+-----------+6 rows in set (0.001 sec)\n\n4.5.2 union allå’ŒunionåŠŸèƒ½ç›¸åŒï¼Œä½†æ˜¯ä¸ä¼šå»é‡\nselect ename,sal,job from emp where sal&gt;2500 union allselect ename,sal,job from emp where job=&#x27;MANAGER&#x27;;\n\nä½¿ç”¨è¿™ä¸ªæ“ä½œç¬¦æ¥åˆå¹¶ä¸¤ä¸ªè¡¨ï¼Œå¯ä»¥çœ‹åˆ°JONESå‡ºç°äº†ä¸¤æ¬¡ï¼Œæ²¡æœ‰è¢«å»é‡ã€‚\nMariaDB [scott]&gt; select ename,sal,job from emp where sal&gt;2500 union allselect e    -&gt; select ename,sal,job from emp where job=&#x27;MANAGER&#x27;;+-------+---------+-----------+| ename | sal     | job       |+-------+---------+-----------+| JONES | 2975.00 | MANAGER   || BLAKE | 2850.00 | MANAGER   || SCOTT | 3000.00 | ANALYST   || KING  | 5000.00 | PRESIDENT || FORD  | 3000.00 | ANALYST   || JONES | 2975.00 | MANAGER   || BLAKE | 2850.00 | MANAGER   || CLARK | 2450.00 | MANAGER   |+-------+---------+-----------+8 rows in set (0.001 sec)\n\n5.å†…å¤–é“¾æ¥5.1 å†…è¿æ¥å†…è¿æ¥å…¶å®å°±æ˜¯åœ¨ç¬›å¡å°”ç§¯çš„åŸºç¡€ä¸Šé€šè¿‡æ¡ä»¶å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œå’Œä¸Šæ–‡å¤šè¡¨æŸ¥è¯¢ä¸­ä½¿ç”¨çš„whereè¯­å¥æ¥ç­›é€‰æ•°æ®æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«\nselect ... from table1 [inner] join table2on ... [and ...]; \n\næ¯”å¦‚æ˜¾ç¤ºé›‡å‘˜åã€é›‡å‘˜å·¥èµ„ä»¥åŠæ‰€åœ¨éƒ¨é—¨çš„åå­—ï¼Œåœ¨ä¹‹å‰æˆ‘ä»¬æ˜¯ç”¨whereåšæ¡ä»¶ï¼Œç°åœ¨å¯ä»¥ç›´æ¥joinäº†ï¼ˆäºŒè€…ç­‰ä»·ï¼‰\n-- å†…é“¾æ¥çš„æ—¶å€™innerå¯ä»¥ä¸å†™ï¼Œå› ä¸ºé»˜è®¤å°±æ˜¯å†…è¿æ¥select emp.ename,emp.sal,dept.dname from emp join depton emp.deptno = dept.deptno; \n\n5.2 å·¦å¤–è¿æ¥å¤–è¿æ¥åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯å·¦å¤–è¿æ¥ï¼Œä¸€ä¸ªæ˜¯å³å¤–è¿æ¥ã€‚åˆ†åˆ«å¯¹åº”å·¦ä¾§è¿˜æ˜¯å³ä¾§å®Œå…¨æ˜¾ç¤ºã€‚\nselect ... from table1 left join table2on ... [and ...]; \n\næ¯”å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªæ˜¯å­¦ç”Ÿè¡¨ï¼Œä¸€ä¸ªæ˜¯æˆç»©è¡¨ã€‚ä½¿ç”¨å¦‚ä¸‹sqlå¯¹ä¸¤ä¸ªè¡¨è¿›è¡Œåˆå§‹åŒ–\ncreate table stu (id int, name varchar(30)); -- å­¦ç”Ÿè¡¨insert into stu values(1,&#x27;jack&#x27;),(2,&#x27;tom&#x27;),(3,&#x27;kity&#x27;),(4,&#x27;nono&#x27;);create table exam (id int, grade int); -- æˆç»©è¡¨insert into exam values(1, 56),(2,76),(11, 8);\n\næŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„æˆç»©ï¼Œå¦‚æœè¿™ä¸ªå­¦ç”Ÿæ²¡æˆç»©ï¼Œä¹Ÿè¦æ˜¾ç¤ºå­¦ç”Ÿçš„ä¸ªäººä¿¡æ¯ã€‚\nè¿™é‡Œå°±æ¶‰åŠåˆ°äº†ä¸¤ä¸ªè¡¨è¿›è¡Œå¤šè¡¨æŸ¥è¯¢äº†ï¼Œè€Œä¸”ç»™å‡ºä¸€ä¸ªæ¡ä»¶ï¼šå¦‚æœå­¦ç”Ÿæ²¡æœ‰æˆç»©ï¼Œä¹Ÿéœ€è¦æ˜¾ç¤ºå­¦ç”Ÿä¸ªäººä¿¡æ¯ã€‚\nå…ˆæ¥è¯•è¯•ç¬›å¡å°”ç§¯çš„ç»“æœï¼Œå‘ç°åªæœ‰ä¸¤ä¸ªå­¦ç”Ÿæœ‰æˆç»©ï¼Œkity&#x2F;nonoåŒå­¦æ˜¯æ²¡æœ‰æˆç»©çš„ã€‚\nMariaDB [stu_test]&gt; select * from stu,exam where stu.id = exam.id;+------+------+------+-------+| id   | name | id   | grade |+------+------+------+-------+|    1 | jack |    1 |    56 ||    2 | tom  |    2 |    76 |+------+------+------+-------+2 rows in set (0.000 sec)\n\nç”±æ­¤å¯çŸ¥ï¼Œç›´æ¥ä½¿ç”¨ç¬›å¡å°”ç§¯æ— æ³•æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚æ­¤æ—¶å°±å¯ä»¥ç”¨å¤–è¿æ¥äº†\nselect * from stuleft join examon stu.id = exam.id;\n\næ‰§è¡Œå¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰æˆç»©çš„ä¸¤ä¸ªåŒå­¦ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ï¼Œåªä¸è¿‡ä»–ä»¬çš„æˆç»©éƒ½æ˜¯NULLã€‚\nMariaDB [stu_test]&gt; select * from stu    -&gt; left join exam    -&gt; on stu.id = exam.id;+------+------+------+-------+| id   | name | id   | grade |+------+------+------+-------+|    1 | jack |    1 |    56 ||    2 | tom  |    2 |    76 ||    3 | kity | NULL |  NULL ||    4 | nono | NULL |  NULL |+------+------+------+-------+4 rows in set (0.001 sec)\n\nå¦‚æœstuå’Œexamè¡¨å­˜åœ¨å¤–é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™ç§å­˜åœ¨äºexamä¸­ä½†ä¸å­˜åœ¨äºstuä¸­çš„æ•°æ®è¢«ç§°ä¸ºæ‚¬æµ®å…ƒç»„ã€‚\n5.3 å³å¤–è¿æ¥å³å¤–è¿æ¥å’Œå·¦å¤–è¿æ¥ç›¸åï¼Œé“¾æ¥çš„æ—¶å€™å¦‚æœå³ä¾§è¡¨ä¸­æ²¡æœ‰æ•°æ®ï¼Œä¹Ÿæ˜¾ç¤ºå‡ºæ¥ï¼›\nselect ... from table1 left join table2on ... [and ...]; \n\nå…ˆæŠŠä¸Šé¢ä½¿ç”¨çš„sqlè¯­å¥ä¸­çš„leftæ”¹æˆrightï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆç»“æœé‡Œé¢å°†æ²¡æœ‰ä¿¡æ¯çš„11å·åŒå­¦çš„æˆç»©ä¹Ÿæ˜¾ç¤ºå‡ºæ¥äº†ã€‚\nMariaDB [stu_test]&gt; select * from stu right join exam on stu.id = exam.id;+------+------+------+-------+| id   | name | id   | grade |+------+------+------+-------+|    1 | jack |    1 |    56 ||    2 | tom  |    2 |    76 || NULL | NULL |   11 |     8 |+------+------+------+-------+3 rows in set (0.000 sec)\n\nå¦‚æœæˆ‘ä»¬å°†sqlä¸­ä¸¤ä¸ªè¡¨çš„ä½ç½®é¢ å€’ï¼Œåˆ™å¯ä»¥å¾—åˆ°å’Œå·¦è¿æ¥ä¸€æ ·çš„ç»“æœï¼ˆåªä¸è¿‡åˆ—çš„ä½ç½®ä¸ä¸€æ ·ï¼‰\nMariaDB [stu_test]&gt; select * from exam right join stu on stu.id = exam.id;+------+-------+------+------+| id   | grade | id   | name |+------+-------+------+------+|    1 |    56 |    1 | jack ||    2 |    76 |    2 | tom  || NULL |  NULL |    3 | kity || NULL |  NULL |    4 | nono |+------+-------+------+------+4 rows in set (0.000 sec)\n\nå›åˆ°scottçš„è¡¨ï¼Œå°è¯•ç”¨å¤–è¿æ¥æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼šåˆ—å‡ºéƒ¨é—¨åç§°å’Œè¿™äº›éƒ¨é—¨çš„å‘˜å·¥ä¿¡æ¯ï¼ŒåŒæ—¶åˆ—å‡ºæ²¡æœ‰å‘˜å·¥çš„éƒ¨é—¨ï¼›\nMariaDB [scott]&gt; select d.dname, e.* from dept d left join emp e on d.deptno = e.deptno;+------------+--------+--------+-----------+------+---------------------+---------+---------+--------+| dname      | empno  | ename  | job       | mgr  | hiredate            | sal     | comm    | deptno |+------------+--------+--------+-----------+------+---------------------+---------+---------+--------+| RESEARCH   | 007369 | SMITH  | CLERK     | 7902 | 1980-12-17 00:00:00 |  800.00 |    NULL |     20 || SALES      | 007499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 00:00:00 | 1600.00 |  300.00 |     30 || SALES      | 007521 | WARD   | SALESMAN  | 7698 | 1981-02-22 00:00:00 | 1250.00 |  500.00 |     30 || RESEARCH   | 007566 | JONES  | MANAGER   | 7839 | 1981-04-02 00:00:00 | 2975.00 |    NULL |     20 || SALES      | 007654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 00:00:00 | 1250.00 | 1400.00 |     30 || SALES      | 007698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 00:00:00 | 2850.00 |    NULL |     30 || ACCOUNTING | 007782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 |    NULL |     10 || RESEARCH   | 007788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 00:00:00 | 3000.00 |    NULL |     20 || ACCOUNTING | 007839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 |    NULL |     10 || SALES      | 007844 | TURNER | SALESMAN  | 7698 | 1981-09-08 00:00:00 | 1500.00 |    0.00 |     30 || RESEARCH   | 007876 | ADAMS  | CLERK     | 7788 | 1987-05-23 00:00:00 | 1100.00 |    NULL |     20 || SALES      | 007900 | JAMES  | CLERK     | 7698 | 1981-12-03 00:00:00 |  950.00 |    NULL |     30 || RESEARCH   | 007902 | FORD   | ANALYST   | 7566 | 1981-12-03 00:00:00 | 3000.00 |    NULL |     20 || ACCOUNTING | 007934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 |    NULL |     10 || OPERATIONS |   NULL | NULL   | NULL      | NULL | NULL                |    NULL |    NULL |   NULL |+------------+--------+--------+-----------+------+---------------------+---------+---------+--------+15 rows in set (0.002 sec)\n\nThe endå…³äºå¤åˆæŸ¥è¯¢ä»¥åŠå†…å¤–é“¾æ¥çš„åšå®¢å°±è¿™ä¹ˆå¤šäº†ã€‚çŸ¥é“åŸºç¡€çš„æ¦‚å¿µåï¼Œæˆ‘ä»¬åç»­å¤„ç†æ›´åŠ å¤æ‚çš„SQLé—®é¢˜ä¹Ÿèƒ½æŠ½ä¸å‰¥èŒ§è€Œå¾—åˆ°æœ€ç»ˆç»“æœäº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘ç´¢å¼•","url":"/posts/3474107655/","content":"1.ç´¢å¼•1.1 ä¸ºå•¥éœ€è¦ç´¢å¼•ï¼Ÿå¯¹äºæ•°æ®åº“è€Œè¨€ï¼ŒæŸ¥è¯¢å§‹ç»ˆæ˜¯ä¸€ä¸ªé«˜é¢‘çš„æ“ä½œï¼›å‡è®¾åœ¨æ•°æ®é‡åˆ°ç™¾ä¸‡çº§çš„æ—¶å€™ï¼ŒæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å°±è¦èŠ±5ç§’ä¸­ï¼Œé‚£ç”¨æˆ·è‚¯å®šä¸æ„¿æ„ç­‰å¾…ä½ çš„ç³»ç»Ÿå“åº”ï¼Œè¿™å°±é€ æˆäº†ç”¨æˆ·æµå¤±ã€‚\næ‰€ä»¥ï¼ŒMySQLå¿…é¡»ä½¿ç”¨æŸç§æ–¹å¼æ¥ä¿è¯æŸ¥è¯¢çš„é«˜é€Ÿå¯é ï¼Œç´¢å¼•å°±è¯ç”Ÿäº†ï¼›\nå¯¹äºä½¿ç”¨è€…è€Œè¨€ï¼Œç´¢å¼•æ˜¯å¾ˆé¦™çš„ï¼Œå› ä¸ºä½ åªéœ€è¦æ‰§è¡Œcreate indexç»™æŒ‡å®šçš„åˆ—ï¼Œé‚£ä¹ˆMySQLå°±ä¼šè‡ªåŠ¨å¸®ä½ ç»´æŠ¤ä¸€ç³»åˆ—ç´¢å¼•åˆ›å»ºçš„æ“ä½œï¼ŒæŸ¥è¯¢å˜å˜å¿«ï¼\nä½†ï¼ŒæŸ¥è¯¢é€Ÿåº¦çš„æé«˜æ˜¯ä»¥æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰æ“ä½œçš„é€Ÿåº¦ä¸ºä»£ä»·çš„ï¼Œè¿™äº›å†™æ“ä½œä¼šå¢åŠ å¤§é‡çš„IOï¼›ç´¢å¼•çš„ä»·å€¼åœ¨äºæé«˜æµ·é‡æ•°æ®çš„æŸ¥è¯¢é€Ÿåº¦ï¼›\nå¸¸è§çš„ç´¢å¼•\n\nä¸»é”®ç´¢å¼•\nå”¯ä¸€é”®ç´¢å¼•\næ™®é€šç´¢å¼•\nå¤åˆç´¢å¼•\nå…¨æ–‡ç´¢å¼•\n\n1.2 ç´¢å¼•çš„æ•ˆæœé€šè¿‡å¦‚ä¸‹çš„å¤§æ•°æ®ç”¨ä¾‹ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ç´¢å¼•çš„æ•ˆæœå‡ ä½•\ndrop database if exists `bit_index`;create database if not exists `bit_index` default character set utf8;use `bit_index`;-- æ„å»ºä¸€ä¸ª8000000æ¡è®°å½•çš„æ•°æ®-- æ„å»ºçš„æµ·é‡è¡¨æ•°æ®éœ€è¦æœ‰å·®å¼‚æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹æ¥åˆ›å»ºï¼Œ æ‹·è´ä¸‹é¢ä»£ç å°±å¯ä»¥äº†ï¼Œæš‚æ—¶ä¸ç”¨ç†è§£-- äº§ç”Ÿéšæœºå­—ç¬¦ä¸²delimiter $$create function rand_string(n INT)returns varchar(255)begindeclare chars_str varchar(100) default&#x27;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#x27;;declare return_str varchar(255) default &#x27;&#x27;;declare i int default 0;while i &lt; n doset return_str =concat(return_str,substring(chars_str,floor(1+rand()*52),1));set i = i + 1;end while;return return_str;end $$delimiter ;-- äº§ç”Ÿéšæœºæ•°å­—delimiter $$create function rand_num( )returns int(5)begindeclare i int default 0;set i = floor(10+rand()*500);return i;end $$delimiter ;-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼Œå‘é›‡å‘˜è¡¨æ·»åŠ æµ·é‡æ•°æ®delimiter $$create procedure insert_emp(in start int(10),in max_num int(10))begindeclare i int default 0;set autocommit = 0;repeatset i = i + 1;insert into EMP values ((start+i),rand_string(6),&#x27;SALESMAN&#x27;,0001,curdate(),2000,400,rand_num());until i = max_numend repeat;commit;end $$delimiter ;-- é›‡å‘˜è¡¨CREATE TABLE `EMP` (  `empno` int(6) unsigned zerofill NOT NULL COMMENT &#x27;é›‡å‘˜ç¼–å·&#x27;,  `ename` varchar(10) DEFAULT NULL COMMENT &#x27;é›‡å‘˜å§“å&#x27;,  `job` varchar(9) DEFAULT NULL COMMENT &#x27;é›‡å‘˜èŒä½&#x27;,  `mgr` int(4) unsigned zerofill DEFAULT NULL COMMENT &#x27;é›‡å‘˜é¢†å¯¼ç¼–å·&#x27;,  `hiredate` datetime DEFAULT NULL COMMENT &#x27;é›‡ä½£æ—¶é—´&#x27;,  `sal` decimal(7,2) DEFAULT NULL COMMENT &#x27;å·¥èµ„æœˆè–ª&#x27;,  `comm` decimal(7,2) DEFAULT NULL COMMENT &#x27;å¥–é‡‘&#x27;,  `deptno` int(2) unsigned zerofill DEFAULT NULL COMMENT &#x27;éƒ¨é—¨ç¼–å·&#x27;);-- æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œæ·»åŠ 8000000æ¡è®°å½•call insert_emp(100001, 8000000);\n\nåœ¨è¿™ä¸ªè¡¨é‡Œé¢ï¼Œæœ‰å¤§é‡çš„æ•°æ®ï¼Œå…¶é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå¹¶æ²¡æœ‰é…ç½®ç´¢å¼•\nMariaDB [bit_index]&gt; desc EMP;+----------+--------------------------+------+-----+---------+-------+| Field    | Type                     | Null | Key | Default | Extra |+----------+--------------------------+------+-----+---------+-------+| empno    | int(6) unsigned zerofill | NO   |     | NULL    |       || ename    | varchar(10)              | YES  |     | NULL    |       || job      | varchar(9)               | YES  |     | NULL    |       || mgr      | int(4) unsigned zerofill | YES  |     | NULL    |       || hiredate | datetime                 | YES  |     | NULL    |       || sal      | decimal(7,2)             | YES  |     | NULL    |       || comm     | decimal(7,2)             | YES  |     | NULL    |       || deptno   | int(2) unsigned zerofill | YES  |     | NULL    |       |+----------+--------------------------+------+-----+---------+-------+8 rows in set (0.001 sec)\n\næ­¤æ—¶å¦‚æœä½ ç›´æ¥å…¨åˆ—æŸ¥è¯¢ï¼Œè¿›ç¨‹å°±ä¼šé˜»å¡åœ¨è¿™é‡Œ\n\nè¿›MySQLçš„æ–‡ä»¶è·¯å¾„çœ‹çœ‹ï¼Œä¼šå‘ç°è¿™å¼ è¡¨çš„å¤§å°å·²ç»åˆ°äº†æƒŠäººçš„564mbï¼Œè™½ç„¶æˆ‘ä»¬çš„å†…å­˜ä¹Ÿè®¸èƒ½å­˜çš„ä¸‹è¿™ä¹ˆå¤§çš„æ•°æ®ï¼Œä½†å®é™…IOè¯»å†™è¿™ä¹ˆå¤§é‡çš„æ•°æ®æ˜¯éå¸¸è€—æ—¶çš„\n[root@vm-cnt8:/var/lib/mysql/bit_index]# ll -htotal 565M-rw-rw----. 1 mysql mysql   61 Sep  6 05:36 db.opt-rw-rw----. 1 mysql mysql  770 Sep  6 05:36 EMP.frm-rw-rw----. 1 mysql mysql 564M Sep  6 05:39 EMP.ibd\n\nåœ¨ä¹‹å‰çš„æŸ¥è¯¢æ“ä½œä¸­æåˆ°è¿‡ï¼Œå¯¹äºè¿™ç§å¤§æ•°æ®è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥é¿å…ä½¿ç”¨å…¨åˆ—æŸ¥è¯¢ï¼Œè€Œåº”è¯¥è®¾ç½®limitåªæŸ¥è¯¢å‡ºå°‘é‡ç”¨ä¾‹æ•°æ®ï¼Œæ¥åˆ¤æ–­è¿™ä¸ªè¡¨çš„æ•°æ®ç»“æ„å’Œä½œç”¨\nMariaDB [bit_index]&gt; select * from EMP limit 3;+--------+--------+----------+------+---------------------+---------+--------+--------+| empno  | ename  | job      | mgr  | hiredate            | sal     | comm   | deptno |+--------+--------+----------+------+---------------------+---------+--------+--------+| 100002 | FNXAKX | SALESMAN | 0001 | 2023-09-06 00:00:00 | 2000.00 | 400.00 |    327 || 100003 | rQbLBy | SALESMAN | 0001 | 2023-09-06 00:00:00 | 2000.00 | 400.00 |    394 || 100004 | wRVdDF | SALESMAN | 0001 | 2023-09-06 00:00:00 | 2000.00 | 400.00 |    195 |+--------+--------+----------+------+---------------------+---------+--------+--------+3 rows in set (0.001 sec)\n\nåœ¨æ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹è¿›è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼Œç”¨æ—¶å¤§çº¦åœ¨1.6ç§’å·¦å³\n\nè¿™æ—¶å€™æˆ‘ä»¬æ¥å¯¹empnoåˆ—åˆ›å»ºä¸€ä¸ªä¸»é”®ç´¢å¼•\nalter table EMP add primary key(empno);\n\nå› ä¸ºè¡¨ä¸­çš„æ•°æ®å¾ˆå¤šï¼Œæ‰€ä»¥è®¾ç½®ä¸»é”®ç´¢å¼•ä¹Ÿéœ€è¦è€—è´¹ä¸€å®šæ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´å†…ï¼Œå…¶å®å°±æ˜¯MySQLåœ¨åå°å¸®æˆ‘ä»¬åˆ›å»ºç´¢å¼•æ‰€éœ€è¦çš„æ•°æ®ç»“æ„çš„è¿‡ç¨‹\nMariaDB [bit_index]&gt; alter table EMP add primary key(empno);Query OK, 0 rows affected (17.184 sec)              Records: 0  Duplicates: 0  Warnings: 0\n\nå†æ¥æŸ¥è¯¢ä¸€ä¸‹åˆšåˆšæŸ¥è¯¢çš„æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç”¨æ—¶åªæœ‰0.000 secï¼Œç›´æ¥ç§’å›ï¼\n\nè¿™ä¾¿æ˜¯ç´¢å¼•åœ¨æå‡æ€§èƒ½æ–¹é¢çš„é‡å¤§ä½œç”¨ï¼\n1.3 MySQLå’Œæ–‡ä»¶ç³»ç»Ÿ1.3.1 Linuxæ–‡ä»¶ç³»ç»Ÿåœ¨ä¹‹å‰å¯¹Linuxæ–‡ä»¶ç³»ç»Ÿçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ç£ç›˜ä¸­ï¼Œä¸€ä¸ªåŒºå—æ˜¯512KBï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œä¼šé‡‡ç”¨4KBçš„åˆ†å—å¯¹æ•°æ®è¿›è¡Œè¯»å–ã€‚å“ªæ€•ä½ åªæ˜¯ä¿®æ”¹1KBï¼Œä¹Ÿæ˜¯éœ€è¦å°†4KBå®Œæ•´è¯»å–ï¼Œå†å†™å…¥å›å»çš„ã€‚\n\nå› ä¸ºæœºæ¢°ç¡¬ç›˜ç‰©ç†ç»“æ„çš„é™åˆ¶ï¼Œéšæœºè¯»å–çš„æ€§èƒ½ä¸ä½³ï¼Œä¸€æ¬¡æ€§è¯»å–100KBæ•°æ®ï¼Œè¿œè¿œä¼˜äº100æ¬¡è¯»å–1KBã€‚å› ä¸ºä¸€æ¬¡æ€§è¯»å–çš„æ—¶å€™ï¼Œåªéœ€è¦ä¸€æ¬¡å¯»é“å°±èƒ½å°†ç£å¤´æ‘†åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œå¾€é‡Œé¢å†™æ•°æ®å°±å®Œäº‹äº†ã€‚ä½†å¤šæ¬¡è¯»å–å°æ•°æ®çš„æ—¶å€™ï¼Œå°½ç®¡ç›¸é‚»çš„ä¸¤æ¬¡IOæ“ä½œåœ¨åŒä¸€æ—¶åˆ»å‘å‡ºï¼Œä½†å¦‚æœå®ƒä»¬çš„è¯·æ±‚çš„æ‰‡åŒºåœ°å€ç›¸å·®å¾ˆå¤§çš„è¯ä¹Ÿåªèƒ½ç§°ä¸ºéšæœºè®¿é—®ï¼Œè€Œéè¿ç»­è®¿é—®ã€‚\néšæœºè®¿é—®å°±è¦å¤šæ¬¡å¯»é“ï¼Œæ¯æ¬¡å†™å…¥çš„é‡åˆå¾ˆå°‘ï¼Œå¤§å¤§å¢åŠ äº†IOçš„è´Ÿæ‹…ã€‚\n1.3.2 MySQLå’Œç£ç›˜äº¤äº’åŸºæœ¬å•ä½ 16KBè€ŒMySQLä¸­ï¼Œä¸ºäº†æ›´å¥½çš„å®ç°å¯¹æ•°æ®IOé‡çš„ç¼©å‡å’Œæ§åˆ¶ï¼Œå…¶å†…éƒ¨å°†16KBä½œä¸ºä¸€æ¬¡IOçš„åŸºæœ¬å•ä½ï¼Œè¿™ä¸ªå¤§å°æˆ‘ä»¬å«åšMySQLçš„æ–‡ä»¶Pageï¼›\n\nMySQLä¸­çš„æ•°æ®æ–‡ä»¶ï¼Œéƒ½æ˜¯ä»¥Pageä¸ºåŸºæœ¬å•ä½ä¿å­˜è‡³ç£ç›˜é‡Œé¢çš„ï¼›\nMySQLä¸­çš„CURDæ“ä½œï¼Œéƒ½éœ€è¦é€šè¿‡è®¡ç®—æ¥å®šä½åˆ°éœ€è¦ä¿®æ”¹å’Œè®¿é—®çš„æ•°æ®çš„ä½ç½®ï¼›\næ¶‰åŠåˆ°è®¡ç®—çš„æ“ä½œéƒ½éœ€è¦CPUå‚ä¸ï¼ŒCPUåªèƒ½å¤„ç†å†…å­˜ä¸­çš„æ•°æ®ï¼Œè¿™å°±è¦æ±‚MySQLéœ€è¦æå‰å°†ä¸€éƒ¨åˆ†æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼›\næ‰€ä»¥åœ¨MySQLè¿è¡Œçš„è¿™æ®µæ—¶é—´å†…ï¼Œå…¶æ“ä½œçš„æ•°æ®ä¼šåŒæ—¶å­˜åœ¨äºå†…å­˜å’Œç£ç›˜ä¸­ï¼Œéœ€è¦ä»¥ç‰¹å®šçš„ç­–ç•¥å°†å†…å­˜ä¸­çš„æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¸­ï¼›è¿™ä¸ªæ“ä½œå°±æ˜¯IOï¼ŒåŸºæœ¬å•ä½æ˜¯Pageï¼›\nä¸ºäº†æ›´å¥½çš„ç®¡ç†è¿™äº›æ“ä½œï¼ŒMySQLä¼šè‡ªå·±ç»´æŠ¤ä¸€ä¸ªbuffer poolçš„å†…å­˜ç©ºé—´ï¼Œæ¥è¿›è¡Œç¼“å­˜ã€‚\nMySQLæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒçš„æ‰€æœ‰æ–‡ä»¶IOæ“ä½œéƒ½éœ€è¦é€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£æ¥å®ç°ï¼ä½†å†…éƒ¨çš„åˆ·ç›˜é€»è¾‘æ˜¯å¯ä»¥ç”±MySQLæ¥è°ƒç”¨ç³»ç»Ÿæ¥å£æ¥è‡ªä¸»æ§åˆ¶çš„ï¼Œè€Œä¸éœ€è¦å‘†æ¿åœ°éµå®ˆæ“ä½œç³»ç»Ÿçš„è‡ªåŠ¨ç­–ç•¥ï¼›ï¼ˆMySQLåˆ›å»ºbuffer poolä¹Ÿæ˜¯åŸºäºæ›´é«˜çš„è‡ªä¸»æ€§æ¥è€ƒè™‘çš„ï¼‰\næœ€ç»ˆç›®æ ‡æ˜¯å°½å¯èƒ½åœ°å‡å°‘IOæ“ä½œï¼Œæé«˜è¿è¡Œæ•ˆç‡ï¼›\n\nè¿è¡Œå¦‚ä¸‹å‘½ä»¤å¯ä»¥çœ‹åˆ°MySQLä¸­å…³äºPageè®¾ç½®çš„å…¨å±€å˜é‡ï¼Œå³16KB\nMariaDB [bit_index]&gt; SHOW GLOBAL STATUS LIKE &#x27;innodb_page_size&#x27;;+------------------+-------+| Variable_name    | Value |+------------------+-------+| Innodb_page_size | 16384 |+------------------+-------+1 row in set (0.001 sec)\n\n1.3.3 ä¸ºä»€ä¹ˆè¦ç”¨Pageä¸ºå•ä½è¿›è¡Œäº¤äº’ï¼Ÿä¸ºä½•MySQLå’Œç£ç›˜è¿›è¡ŒIOäº¤äº’çš„æ—¶å€™ï¼Œè¦é‡‡ç”¨Pageçš„æ–¹æ¡ˆè¿›è¡Œäº¤äº’å‘¢ï¼Ÿç”¨å¤šå°‘ï¼ŒåŠ è½½å¤šå°‘ä¸é¦™å—ï¼Ÿ\nå…ˆæ¥ä¸ªæµ‹è¯•ç”¨ä¾‹çœ‹çœ‹å§ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç”¨æˆ·è¡¨\n-- ä¸»é”®é»˜è®¤ç”Ÿæˆä¸»é”®ç´¢å¼•create table if not exists user (    id int primary key,     age int not null,    name varchar(16) not null);-- æ’å…¥å¤šæ¡è®°å½•ï¼Œä¸»é”®æ²¡æœ‰æŒ‰é¡ºåºæ’å…¥mysql&gt; insert into user (id, age, name) values(3, 18, &#x27;æ¨è¿‡&#x27;);Query OK, 1 row affected (0.01 sec)mysql&gt; insert into user (id, age, name) values(4, 16, &#x27;å°é¾™å¥³&#x27;);Query OK, 1 row affected (0.00 sec)mysql&gt; insert into user (id, age, name) values(2, 26, &#x27;é»„è“‰&#x27;);Query OK, 1 row affected (0.01 sec)mysql&gt; insert into user (id, age, name) values(5, 36, &#x27;éƒ­é–&#x27;);Query OK, 1 row affected (0.00 sec)mysql&gt; insert into user (id, age, name) values(1, 56, &#x27;æ¬§é˜³é”‹&#x27;);Query OK, 1 row affected (0.00 sec)-- æœ€ç»ˆå‘ç°æ•°æ®æ˜¯æœ‰åºçš„mysql&gt; select * from user; +----+-----+-----------+| id | age | name      |+----+-----+-----------+| 1  | 56  | æ¬§é˜³é”‹     || 2  | 26  | é»„è“‰       || 3  | 18  | æ¨è¿‡       || 4  | 16  | å°é¾™å¥³     || 5  | 36  | éƒ­é–       |+----+-----+-----------+5 rows in set (0.00 sec)\n\nåœ¨ä¸Šé¢çš„5æ¡è®°å½•ä¸­ï¼Œå¦‚æœMySQLè¦æŸ¥æ‰¾id&#x3D;2çš„è®°å½•ï¼Œç¬¬ä¸€æ¬¡åŠ è½½id&#x3D;1ï¼Œç¬¬äºŒæ¬¡åŠ è½½id&#x3D;2ï¼Œä¸€æ¬¡ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆå°±éœ€è¦2æ¬¡IOã€‚å¦‚æœè¦æ‰¾id&#x3D;5ï¼Œé‚£ä¹ˆå°±éœ€è¦5æ¬¡IOã€‚\nä½†ï¼Œå¦‚æœè¿™5æ¡(æˆ–è€…æ›´å¤š)éƒ½è¢«ä¿å­˜åœ¨ä¸€ä¸ªPageä¸­(16KBï¼Œèƒ½ä¿å­˜å¾ˆå¤šè®°å½•)ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¬¡IOæŸ¥æ‰¾id&#x3D;2çš„æ—¶å€™ï¼Œæ•´ä¸ªPageä¼šè¢«åŠ è½½åˆ°MySQLçš„Buffer Poolä¸­ï¼Œè¿™é‡Œå®Œæˆäº†ä¸€æ¬¡IOã€‚ä½†æ˜¯å¾€åå¦‚æœåœ¨æŸ¥æ‰¾id&#x3D;1,3,4,5ç­‰ï¼Œå®Œå…¨ä¸éœ€è¦è¿›è¡ŒIOäº†ï¼Œè€Œæ˜¯ç›´æ¥åœ¨å†…å­˜ä¸­è¿›è¡Œäº†ã€‚æ‰€ä»¥ï¼Œå°±åœ¨å•Pageé‡Œé¢ï¼Œå¤§å¤§å‡å°‘äº†IOçš„æ¬¡æ•°ï¼\nè™½ç„¶æˆ‘ä»¬ä¸èƒ½ä¿è¯åç»­çš„å‡ æ¬¡IOä¸€å®šåœ¨è¿™æ¬¡åŠ è½½çš„Pageä¸­ï¼Œä½†æ ¹æ®å±€éƒ¨æ€§åŸç†ï¼Œå…¶è®¿é—®ç›¸è¿‘çš„å‡ æ¡æ•°æ®çš„æ¦‚ç‡æ˜¯å¾ˆå¤§çš„ï¼æ‰€ä»¥è¿™æ ·æœ€ç»ˆæ˜¯èƒ½æå‡IOæ•ˆç‡çš„ï¼\nå¾€å¾€IOæ•ˆç‡ä½ä¸‹çš„æœ€ä¸»è¦çŸ›ç›¾ä¸æ˜¯IOå•æ¬¡æ•°æ®é‡çš„å¤§å°ï¼Œè€Œæ˜¯IOçš„æ¬¡æ•°ã€‚\n1.4 B+æ ‘å’ŒPageæœ‰äº†å¯¹Pageçš„è®¤è¯†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦ç”¨ä¸€ä¸ªæ•°æ®ç»“æ„æ¥ç»´æŠ¤è¿™äº›åŠ è½½åˆ°Buffer Poolå½“ä¸­çš„Pageäº†ã€‚è¿™æ—¶å€™ï¼Œæˆ‘ä»¬çš„B+æ ‘å°±ç™»åœºäº†ã€‚\n1.4.1 å•ä¸ªPageå•ä¸ªPageé‡Œé¢å­˜æ”¾çš„è‚¯å®šæ˜¯ä¸€éƒ¨åˆ†çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šå‰åæŒ‡é’ˆï¼Œä»¥åŒé“¾è¡¨çš„å½¢å¼å°†æ‰€æœ‰Pageè¿èµ·æ¥ï¼Œè¿™æ ·å°±èƒ½å®ç°æ•°æ®çš„éå†ï¼›åœ¨MySQLä¸­ï¼Œå°±æ˜¯è¿™ä¹ˆæ“ä½œçš„ã€‚\n\nå› ä¸ºå­˜åœ¨ä¸»é”®ï¼ŒMySQLè¿˜ä¼šç»™å•ä¸ªPageä¸­çš„æ•°æ®ä¾ç…§ä¸»é”®è¿›è¡Œæ’åºï¼Œä»ä¸Šå›¾å°±èƒ½çœ‹å‡ºé˜¿é‡Œï¼Œå•ä¸ªPageä¸­æ•°æ®æ˜¯ä¾ç…§ä¸»é”®æŒ‰åºæ’åˆ—çš„ï¼›ä¸”æ¯ä¸€ä¸ªæ•°æ®éƒ½ä¼šé“¾æ¥åˆ°ä¸‹ä¸€ä¸ªæ•°æ®ä¸Šï¼›\nè¿™æ ·æ’åºåï¼Œæ•°æ®åº“åœ¨è¿›è¡Œæ•°æ®ç­›é€‰çš„æ—¶å€™ï¼Œå°±èƒ½æ›´å¥½çš„å®šä½åˆ°æ•°æ®çš„ä½ç½®ï¼Œå‡å°‘æŸ¥è¯¢è€—æ—¶ã€‚æ’å…¥æ—¶æ’åºä¹Ÿèƒ½è®©åç»­åœ¨è¿›è¡Œæ•°æ®é™åº&#x2F;å‡åºè¾“å‡ºçš„æ—¶å€™ï¼Œæ— éœ€äºŒæ¬¡å¯¹æ•°æ®è¿›è¡Œæ’åºäº†ï¼›\n1.4.2 å¤šä¸ªPageæ—¢ç„¶ä¸€ä¸ªPageæ˜¯å¦‚æ­¤ï¼Œé‚£å¤šä¸ªPageå‘¢ï¼Ÿ\n\nå‰é¢æåˆ°äº†ï¼Œå½“MySQLéœ€è¦åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œä¼šå°†å’Œè¿™ä¸ªæ•°æ®ç›¸é‚»è¿‘çš„å…¶ä»–æ•°æ®ï¼Œä»¥16KBä¸ºå•ä½ä¸€èµ·åŠ è½½åˆ°ä¸€ä¸ªPageé‡Œé¢ï¼Œå¹¶è¿æ¥åˆ°è¿™ä¸ªåŒå‘é“¾è¡¨ä¸Šï¼›\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¤šä¸ªPageçš„éå†æ¥è¿›è¡Œæ•°æ®çš„å®šä½\nå¯é“¾è¡¨æ˜¯ä¸€ä¸ªçº¿æ€§ç»“æ„ï¼ŒMySQLè‚¯å®šä¸å¯èƒ½ç”¨çº¿æ€§ç»“æ„æ¥ç»´æŠ¤æ•°æ®å§ï¼Ÿé‚£æ ·æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿå¤ªä½äº†ï¼Œæ¯æ¬¡éƒ½éœ€è¦O(N)çš„éå†ï¼Œæ•°æ®ä¸€å¤šå°±æ…¢æ…¢æ…¢ï¼\n\n\næ‰€ä»¥ï¼Œæˆ‘ä»¬è‚¯å®šè¦åœ¨åŒå‘é“¾è¡¨çš„åŸºç¡€ä¸Šæ·»åŠ å…¶ä»–çš„ç»“æ„æ¥è¿›è¡ŒæŸ¥æ‰¾çš„ä¼˜åŒ–ï¼è¿™æ—¶å€™å°±å¯ä»¥å¼•å…¥ç›®å½•äº†\né¡µç›®å½•åœ¨æˆ‘ä»¬çœ‹ä¹¦çš„æ—¶å€™ï¼Œå°±ä¼šæœ‰ç›®å½•æ¥å¸®åŠ©æˆ‘ä»¬å¿«é€ŸæŸ¥æ‰¾åˆ°æŸä¸€ä¸ªç« èŠ‚ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³çœ‹ç¬¬ä¹ç« çš„å†…å®¹ï¼Œé‚£å°±å¯ä»¥å…ˆçœ‹ç›®å½•ï¼Œæ‰¾åˆ°ç¬¬ä¹ç« çš„é¡µç ï¼Œå†è¿›è¡Œé˜…è¯»ã€‚\nå¯¹äºMySQLä¸­çš„æ•°æ®ï¼Œè¿™ä¸ªæƒ…æ™¯ä¹Ÿæ˜¯é€‚ç”¨çš„ï¼Œæˆ‘ä»¬ç»™æ•°æ®ä¸Šä¸€ä¸ªç›®å½•ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å…ˆæ ¹æ®ç›®å½•å®šä½åˆ°å…·ä½“çš„pageï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“1-10å·æ•°æ®éƒ½åœ¨è¿™ä¸ªpageé‡Œé¢ï¼Œé‚£å°±ç›´æ¥å»é‡Œé¢æ‰¾å°±è¡Œäº†ï¼›è¿™æ—¶å€™æŸ¥æ‰¾çš„æ•ˆç‡å°±æ¯”å•çº¯çš„ä»é“¾è¡¨å¼€å¤´è¿›è¡Œéå†å¿«å¤šäº†ï¼\nå½“ç„¶ï¼Œå’Œä¹¦ç±çš„ç›®å½•éœ€è¦æ¶ˆè€—çº¸å¼ ä¸€æ ·ï¼Œåœ¨MySQLä¸­å¯¹æ•°æ®è®¾ç½®ç›®å½•ä¹Ÿæ˜¯éœ€è¦æ¶ˆè€—ç©ºé—´çš„ï¼Œè¿™å°±æ˜¯ä¸€ç§ç”¨ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ—¶é—´æ˜¾ç„¶æ›´åŠ å®è´µï¼\nå•é¡µç›®å½•åœ¨å•ä¸ªPageé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å¦‚ä¸‹çš„æ–¹å¼è®¾å®šä¸€ä¸ªç›®å½•ï¼Œå—ä¸€å®šé—´éš”å°±è®¾ç½®ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ä½œä¸ºç›®å½•ã€‚åœ¨æ•°æ®é‡å°çš„æ—¶å€™ï¼Œè¿™ä¸ªç›®å½•çš„ä½œç”¨ä¸ç®—å¤§ï¼Œä½†æ•°æ®é‡ä¸€å¤§ï¼Œç›®å½•å¯¹æœç´¢æ•ˆç‡çš„æå‡æ˜¯éå¸¸å¯è§‚çš„ï¼\n\næ¯”å¦‚ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾id&#x3D;4è®°å½•ï¼Œä¹‹å‰å¿…é¡»çº¿æ€§éå†4æ¬¡ï¼Œæ‰èƒ½æ‹¿åˆ°ç»“æœã€‚ç°åœ¨ç›´æ¥é€šè¿‡ç›®å½•2[3]ï¼Œç›´æ¥è¿›è¡Œå®šä½æ–°çš„èµ·å§‹ä½ç½®ï¼Œåªéœ€è¦éå†3æ¬¡å°±èƒ½æ‰¾åˆ°ç»“æœï¼Œæé«˜äº†æ•ˆç‡ã€‚\n\nå³ä¾¿åœ¨å•ä¸ªPageä¸­æ·»åŠ ç›®å½•ä¼šå¯¼è‡´è¿™ä¸ªPageå®é™…å­˜æ”¾çš„æ•°æ®å˜å°‘ï¼Œä½†è¿™æ˜¯å¿…è¦çš„ç‰ºç‰²ï¼\n\nå¤šé¡µç›®å½•å‰é¢æåˆ°ï¼ŒMySQLä¼šè‡ªåŠ¨æŠŠæ–°çš„æ•°æ®åŠ è½½åˆ°ä¸€ä¸ªPageä¸­ï¼Œå¹¶é“¾æ¥åˆ°å·²æœ‰é“¾è¡¨ä¸Šï¼›ä½†æ˜¯çº¿æ€§éå†éœ€è¦å¤§é‡çš„IOï¼Œæ¯æ¬¡é‡åˆ°æ–°çš„Pageçš„æ—¶å€™ï¼Œå°±éœ€è¦å°†å…¶åŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œè¿›è¡Œéå†ï¼Œè¿™å°±ä½¿å¾—å•ä¸ªPageä¸­çš„ç›®å½•ä¸é‚£ä¹ˆå®ç”¨äº†ï¼›\n\nå•ä¸ªPageçš„ç›®å½•æ˜¯å°èŠ‚ç›®å½•\nå¤šä¸ªPageçš„ç›®å½•æ˜¯ç« èŠ‚ç›®å½•\n\næ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç»™å¤šä¸ªPageä¹ŸåŠ ä¸Šä¸€ä¸ªé¡¶å±‚çš„ç« èŠ‚ç›®å½•ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ•ˆç‡ï¼\n\nä½¿ç”¨ä¸€ä¸ªPageæ¥æŒ‡å‘å¤šä¸ªPageï¼Œå­˜æ”¾æ¯ä¸ªPageçš„èµ·å§‹keyå€¼ï¼ˆå‡è®¾æ¯ä¸ªPageä¸­çš„keyéƒ½æœ‰åºä¸”ä¸ºå‡åºï¼‰ï¼›è¿™ä¸ªPageä¸­ä¸å­˜æ”¾å®é™…çš„æ•°æ®ï¼Œåªæœ‰ç›®å½•å€¼ï¼›\néå†çš„æ—¶å€™ï¼Œå…ˆé€šè¿‡å¤šPageçš„ç›®å½•æ‰¾åˆ°æˆ‘ä»¬è¦å»çš„Pageï¼Œå†å»è®¿é—®è¯¥å®é™…å­˜å‚¨æ•°æ®çš„Pageä¸­çš„å•Pageç›®å½•ï¼Œæœ€ç»ˆæŸ¥æ‰¾åˆ°ç›®æ ‡æ•°æ®ï¼›\næ‰€ä»¥ï¼Œæ¯ä¸ªå¤šPageçš„ç›®å½•é¡¹ä¸­å°±æ˜¯ä¸€ä¸ªé”®å€¼+å¯¹åº”æ™®é€šPageçš„æŒ‡é’ˆ\n\n\nä¸€å±‚ç›®å½•Pageä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†åŠ ä¸€å±‚ã€‚è¿™æ ·å°±å®ç°äº†ä¸€ä¸ªç±»ä¼¼äºäºŒå‰æ ‘çš„ç»“æ„ï¼Œåªä¸è¿‡æ¯ä¸€ä¸ªèŠ‚ç‚¹Pageä¸­éƒ½åŒ…å«å¤šä¸ªPageçš„key+æŒ‡é’ˆï¼Œæœ€ç»ˆåªæœ‰å¶å­èŠ‚ç‚¹æ˜¯å®é™…å­˜å‚¨æ•°æ®çš„ï¼\n\nè¿™ä¸ªæ•°æ®ç»“æ„å°±å«åšB+æ ‘ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯Bæ ‘ï¼ï¼‰è€Œæ•´ä¸ªä¸Šå›¾ä¸­çš„æ•°æ®æ¥å°±æ˜¯MySQLä¸­å¯¹userè¡¨åšçš„ç´¢å¼•ï¼\næ­¤æ—¶çš„æŸ¥è¯¢ï¼Œéœ€è¦ç»è¿‡çš„èŠ‚ç‚¹è‚¯å®šå˜å°‘äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦æŸ¥è¯¢id=12çš„ç”¨æˆ·ï¼š\n\né¡¶å±‚åˆ¤æ–­ï¼Œ12&gt;11&gt;1ï¼Œå‘å³èµ°ã€2æ¬¡æ¯”è¾ƒã€‘\nç¬¬äºŒå±‚åˆ¤æ–­ï¼Œ12&gt;11ä¸”12&lt;16ï¼Œå‘å·¦èµ°ï¼Œæ¥åˆ°å…·ä½“çš„Pageã€2æ¬¡æ¯”è¾ƒã€‘\næŸ¥æ‰¾å•é¡µç›®å½•ï¼Œ12&gt;11ä¸”12&lt;13ï¼›ã€2æ¬¡æ¯”è¾ƒã€‘\nä»11å¼€å§‹éå†ï¼Œèµ°ä¸€æ­¥å°±èƒ½æ‰¾åˆ°ã€1æ¬¡æ¯”è¾ƒã€‘\n\næœ€ç»ˆï¼Œæˆ‘ä»¬æŸ¥æ‰¾12çš„æ“ä½œåªç”¨äº†7æ¬¡å°±æˆåŠŸäº†ã€‚è€Œä»å¤´å¼€å§‹éå†éœ€è¦12æ¬¡æ‰èƒ½æ‰¾åˆ°å®ƒï¼›\néå†æ¬¡æ•°çš„å‡å°‘ï¼Œå°±ç­‰åŒäºIOæ¬¡æ•°çš„å‡å°‘ï¼Œæœ€ç»ˆæŸ¥è¯¢çš„æ•ˆç‡å°±å˜é«˜äº†ï¼\n\nè¿™é‡Œçš„åˆ†æå¯èƒ½æœ‰è¯¯ï¼Œä¸è¿‡ç»“è®ºæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œåˆ†é¡µè‚¯å®šèƒ½å¢åŠ æŸ¥æ‰¾çš„æ•ˆç‡ï¼\n\nå¦å¤–ï¼ŒMySQLè¿˜å¯ä»¥æ ¹æ®è®¿é—®çš„é¢‘ç‡ï¼Œå®šæœŸçš„é‡Šæ”¾ä¸€äº›Pageï¼›æ¯”å¦‚åœ¨B+æ ‘ä¸­ï¼Œå¯èƒ½æ ‘çš„å³åŠéƒ¨åˆ†å¾ˆå°‘è¢«è®¿é—®ï¼Œé‚£å°±å¯ä»¥æš‚æ—¶é‡Šæ”¾è¿™éƒ¨åˆ†Pageçš„ç©ºé—´ï¼Œç»™å…¶ä»–è¡¨ä½¿ç”¨ï¼ŒçœŸåˆ°é‡åˆ°è®¿é—®çš„æ—¶å€™ï¼Œå†å»è¯»ç›˜åŠ è½½è¿™éƒ¨åˆ†æ•°æ®ã€‚è¿™æ˜¯ç”±MySQLçš„ç¼“å­˜ç­–ç•¥æ¥è‡ªä¸»å†³å®šçš„ï¼›\næ¯•ç«Ÿå½“ä¸€ä¸ªè¡¨éå¸¸å¤§çš„æ—¶å€™ï¼Œå°†å…¶å…¨éƒ¨åŠ è½½åˆ°å†…å­˜é‡Œé¢æ˜¯ä¸å¯è¡Œçš„ï¼å¿…é¡»è¦ç”¨ç¼“å­˜ç­–ç•¥å’Œå±€éƒ¨æ€§åŸç†æ¥åŠ è½½é¢‘ç¹ä½¿ç”¨çš„æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œæ‰èƒ½åœ¨æ•ˆç‡å’Œè´Ÿè½½ä¸Šè¾¾åˆ°å¹³è¡¡ï¼›\nä¸ç„¶ä½ çš„MySQLæ— è„‘ç¼“å­˜Pageå¯¼è‡´å ç”¨è¿‡å¤šå†…å­˜ï¼Œæ“ä½œç³»ç»Ÿçœ‹ä¸ä¸‹å»ç›´æ¥ç»™ä½ KILLäº†ï¼Œé‚£ä¸šåŠ¡å°±å®Œè›‹äº†ï¼ğŸ¤£\n1.4.3 å°ç»“å…³äºPageæŸ¥æ‰¾çš„å°ç»“å¦‚ä¸‹\n\nPageåˆ†ä¸ºç›®å½•é¡µå’Œæ•°æ®é¡µã€‚ç›®å½•é¡µåªæ”¾å„ä¸ªä¸‹çº§Pageçš„æœ€å°é”®å€¼å’Œè¯¥Pageçš„æŒ‡é’ˆã€‚\næŸ¥æ‰¾çš„æ—¶å€™ï¼Œè‡ªé¡¶å‘ä¸‹æ‰¾ï¼Œåªéœ€è¦åŠ è½½éƒ¨åˆ†ç›®å½•é¡µåˆ°å†…å­˜ï¼Œå³å¯å®Œæˆç®—æ³•çš„æ•´ä¸ªæŸ¥æ‰¾è¿‡ç¨‹ï¼Œå¤§å¤§å‡å°‘äº†IOæ¬¡æ•°\nèŒƒå›´æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥æ‰¾åˆ°åŒºé—´è¾¹ç•Œçš„ä¸¤ä¸ªèŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åç›´æ¥é€šè¿‡å¶å­èŠ‚ç‚¹çš„é“¾è¡¨è¿›è¡Œéå†ï¼Œå–å‡ºæ•°æ®å³å¯ï¼\nMySQLå¯ä»¥æ ¹æ®è®¿é—®é¢‘ç‡ï¼Œé€‚å½“åœ°é¢„å…ˆåŠ è½½æˆ–è€…é‡Šæ”¾ä¸€äº›Pageçš„ç©ºé—´ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å¼ è¡¨çš„æ‰€æœ‰æ•°æ®éƒ½å¿…é¡»å…¨éƒ¨åŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼›\n\nåç»­æˆ‘è¿˜ä¼šå­¦ä¹ Bæ ‘å’ŒB+æ ‘æ•°æ®ç»“æ„åœ¨CPPä¸­çš„å®ç°ï¼Œæ•¬è¯·å…³æ³¨æˆ‘çš„åšå®¢ï¼\n1.5 ä¸ºä»€ä¹ˆå…¶ä»–æ•°æ®ç»“æ„ä¸é€‚åˆç´¢å¼•ï¼Ÿåœ¨è®¤è¯†è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦è®°ä½ä¸Šæ–‡æåˆ°çš„ä¸€ä¸ªç»“è®ºï¼šçœŸæ­£å½±å“ç´¢å¼•æ€§èƒ½çš„ï¼Œæ˜¯å’Œç¡¬ç›˜IOçš„æ¬¡æ•°ï¼ŒIOæ¬¡æ•°è¶Šå°‘ï¼Œæ€§èƒ½è¶Šé«˜ï¼›\n\né“¾è¡¨ã€çº¿æ€§è¡¨ï¼šéƒ½æ˜¯çº¿æ€§éå†ï¼Œå‹æ ¹æ²¡æœ‰ç´¢å¼•çš„åŠŸèƒ½\näºŒå‰æœç´¢æ ‘ï¼šåœ¨æç«¯åœºæ™¯ä¸‹ä¼šé€€åŒ–æˆæ™®é€šäºŒå‰æ ‘ï¼Œè¿˜æ˜¯çº¿æ€§éå†\nAVLTree/RBTreeï¼šè™½ç„¶ç›¸å¯¹å¹³è¡¡ï¼Œä½†äºŒå‰ç»“æ„ä¼šå¯¼è‡´æ ‘çš„æ•´ä½“è¿‡é«˜ï¼Œè‡ªé¡¶å‘ä¸‹æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦ç»è¿‡å¤šå±‚çš„å¤šæ¬¡IOï¼Œæ‰èƒ½æ‰¾åˆ°ç›®æ ‡æ•°æ®ï¼ˆB+æ ‘çš„å±‚æ•°æ›´å°‘ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹B+æ ‘æ›´ä¼˜ç§€ï¼‰\nHASHï¼šè™½ç„¶æŸ¥æ‰¾çš„æ—¶å€™å¾ˆå¿«ï¼ŒåŸºæœ¬èƒ½åšåˆ°O(1)ï¼Œä½†èŒƒå›´æŸ¥è¯¢çš„æ•ˆæœä¸ä½³ï¼›åœ¨MySQLä¸­ä¹Ÿæ˜¯æ”¯æŒHASHç´¢å¼•çš„ï¼Œæ¯”å¦‚MEMOY/HEAP/NDBå­˜å‚¨å¼•æ“ï¼›\n\n\né‚£Bæ ‘ä¸ºä»€ä¹ˆä¸é€‚åˆå‘¢ï¼Ÿä½œä¸ºä¸€ä¸ªå¤šå‰æ ‘ç»“æ„ï¼ŒBæ ‘çš„åŒå±‚èƒ½æ¯”çº¢é»‘æ ‘å­˜å‚¨æ›´å¤šä¿¡æ¯ï¼Œçœ‹ä¸Šå»ä¹Ÿæ˜¯å¯ä»¥åšç´¢å¼•çš„å‘€ï¼Ÿ\nç‰µæ‰¯åˆ°Bæ ‘å’ŒB+æ ‘çš„åŒºåˆ«äº†ï¼Œæ¥çœ‹çœ‹äºŒè€…çš„ç»“æ„å›¾\n\næ–‡å­—è¯´æ˜å¦‚ä¸‹ï¼š\n\nBæ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šå­˜æ”¾ä¸€å®šçš„æ•°æ®å’ŒpageæŒ‡é’ˆï¼›\nB+æ ‘åªæœ‰å¶å­èŠ‚ç‚¹ä¼šå­˜æ”¾æ•°æ®ï¼Œéå¶å­èŠ‚ç‚¹åªæœ‰pageçš„ç›®å½•ï¼›\nB+æ ‘çš„å¶å­èŠ‚ç‚¹å…¨éƒ¨ç›¸è¿ï¼›\n\nè¿™å°±å¼•å‡ºäº†B+æ ‘çš„ä¸¤ä¸ªä¼˜ç‚¹ï¼š\n\nå› ä¸ºB+æ ‘çš„éå¶å­èŠ‚ç‚¹åªéœ€è¦å­˜å‚¨pageç›®å½•ï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ä¸­å°±èƒ½å­˜æ”¾è¾ƒå¤šçš„ç›®å½•ç´¢å¼•ï¼Œä½¿å¾—æ ‘æ•´ä½“æ›´çŸ®ï¼›\nB+æ ‘çš„å¶å­èŠ‚ç‚¹å…¨éƒ¨ç›¸è¿ï¼Œæ–¹ä¾¿è¿›è¡ŒèŒƒå›´éå†ï¼Œæ¯”å¦‚where sal&gt;100 and sal &lt; 300çš„è¿™ç§èŒƒå›´æ¡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡å¶å­èŠ‚ç‚¹çš„é“¾è¡¨å‘åéå†æ¥è§£å†³ï¼›\n\næœ€ç»ˆçš„æ•ˆç‡é—®é¢˜ä¾æ—§è½åˆ°äº†å¦‚ä½•è®©æ ‘æ›´çŸ®æ¥å‡å°‘IOæ¬¡æ•°ï¼Œå› ä¸ºåœ¨æ•´ä½“ä¸ŠB+æ ‘éƒ½èƒ½åšåˆ°è¾ƒçŸ®ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¼˜ç§€ï¼Œæ–¹ä¾¿èŒƒå›´æŸ¥è¯¢ï¼›æ‰€ä»¥MySQLä¸»è¦é€‰ç”¨äº†B+æ ‘ä½œä¸ºç´¢å¼•ç»“æ„ã€‚\n1.6 èšç°‡&#x2F;éèšç°‡ç´¢å¼•1.6.1 è¯´æ˜InnoDBçš„æ•°æ®æ˜¯å’ŒB+æ ‘ä¸€èµ·å­˜æ”¾çš„ï¼Œå¶å­èŠ‚ç‚¹é‡Œé¢æœ‰æ•°æ®ï¼›è¿™ç§æ•°æ®å’Œç´¢å¼•åœ¨ä¸€èµ·çš„å½¢å¼ï¼Œå«åšèšç°‡ç´¢å¼•ã€‚\n\nMyISAMçš„å¶å­ä¸­æ²¡æœ‰æ•°æ®ï¼Œè€Œæ˜¯å­˜æ”¾çš„æŒ‡å‘æ•°æ®è¡¨å¯¹åº”ä½ç½®çš„æŒ‡é’ˆï¼Œæœ‰é¢å¤–çš„ä¸€å¼ è¡¨æ¥å­˜æ”¾æ‰€æœ‰æ•°æ®ï¼›è¿™ç§æ•°æ®å’Œç´¢å¼•åˆ†ç¦»çš„å½¢å¼ï¼Œå«åšéèšç°‡ç´¢å¼•ï¼›\n\nå¯¹äºMyISAMå­˜å‚¨å¼•æ“æ¥è¯´ï¼Œå…¶å¾ˆé€‚åˆè¿›è¡ŒæŸ¥è¯¢ï¼Œç‰¹åˆ«æ˜¯å¤§æ–‡æœ¬æŸ¥æ‰¾å’Œå…¨æ–‡ç´¢å¼•ï¼ˆåæ–‡ä¼šæåˆ°ï¼‰ï¼›\n1.6.2 å®æœºæ¼”ç¤º\nåœ¨MySQLä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®é™…æ–‡ä»¶çš„æ•°é‡çœ‹å‡ºInnoDBå’ŒMyISAMå­˜å‚¨å¼•æ“çš„åŒºåˆ«ï¼›å…¶ä¹Ÿåæ˜ äº†èšç°‡&#x2F;éèšç°‡ç´¢å¼•çš„æ€§è´¨ã€‚\n\nè¿™é‡Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ›å»ºuser1è¡¨ï¼Œé»˜è®¤é‡‡ç”¨çš„æ˜¯InnoDBä½œä¸ºå­˜å‚¨å¼•æ“\nMariaDB [hello_mysql]&gt; create table user1( id int unsigned primary key, name varchar(200) NOT NULL );Query OK, 0 rows affected (0.008 sec)\n\nåœ¨MySQLçš„æ–‡ä»¶å­˜å‚¨è·¯å¾„ä¸­ï¼Œå¯ä»¥æŸ¥çœ‹åˆ°user1è¡¨å¯¹åº”äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­.ibdåç¼€æŒ‡çš„å°±æ˜¯InnoDBï¼Œå…¶å†…éƒ¨åŒæ—¶åŒ…å«äº†è¯¥è¡¨ä¸­çš„æ•°æ®å’Œç´¢å¼•å€¼ï¼›\n[root@vm-cnt8:/var/lib/mysql/hello_mysql]# lltotal 104-rw-rw----. 1 mysql mysql    61 Sep  7 02:59 db.opt-rw-rw----. 1 mysql mysql  1545 Sep  7 03:00 user1.frm-rw-rw----. 1 mysql mysql 98304 Sep  7 03:00 user1.ibd\n\nå†æ¥åˆ›å»ºä¸€ä¸ªå±æ€§å®Œå…¨ç›¸åŒçš„user2è¡¨ï¼Œä½†é‡‡ç”¨MyISAMå­˜å‚¨å¼•æ“\nMariaDB [hello_mysql]&gt; create table user2( id int unsigned primary key, name varchar(200) NOT NULL ) engine=MyISAM;Query OK, 0 rows affected (0.002 sec)\n\næ­¤æ—¶èƒ½çœ‹åˆ°ï¼ŒMyISAMå¯¹åº”çš„å­˜å‚¨æ–‡ä»¶æœ‰3ä¸ªï¼Œ.MYIåŒ…å«çš„æ˜¯ç´¢å¼•ï¼Œ.MYDåŒ…å«çš„æ˜¯å®é™…æ•°æ®ï¼›\n[root@vm-cnt8:/var/lib/mysql/hello_mysql]# lltotal 112-rw-rw----. 1 mysql mysql    61 Sep  7 02:59 db.opt-rw-rw----. 1 mysql mysql  1545 Sep  7 03:00 user1.frm-rw-rw----. 1 mysql mysql 98304 Sep  7 03:00 user1.ibd-rw-rw----. 1 mysql mysql  1545 Sep  7 03:03 user2.frm-rw-rw----. 1 mysql mysql     0 Sep  7 03:03 user2.MYD-rw-rw----. 1 mysql mysql  1024 Sep  7 03:03 user2.MYI\n\nä¸¤è¡¨éƒ½æœ‰ä¸€ä¸ªå ç”¨ç©ºé—´å®Œå…¨ç›¸åŒçš„.frmæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­å­˜å‚¨çš„å°±æ˜¯è¯¥è¡¨çš„ç»“æ„å±æ€§ä¿¡æ¯ï¼Œå› ä¸ºä¸¤ä¸ªè¡¨çš„ç»“æ„å®Œå…¨ç›¸åŒï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡ä»¶çš„å¤§å°ä¹Ÿç›¸åŒï¼›\n1.7 å›è¡¨æŸ¥æ‰¾åˆ›å»ºè¾…åŠ©ç´¢å¼•çš„æ—¶å€™ï¼ŒMyISAMä¾æ—§åˆ›å»ºä¸€ä¸ªB+æ ‘ï¼Œå¶å­èŠ‚ç‚¹ä¹Ÿæ˜¯æŒ‡å‘å¯¹åº”ä½ç½®çš„æŒ‡é’ˆï¼›æ‰€ä»¥åœ¨MyISAMä¸­ï¼Œä¸»é”®&#x2F;éä¸»é”®ç´¢å¼•åŒºåˆ«ä¸å¤§ï¼Œæ— éæ˜¯æ˜¯å¦å…è®¸å†—ä½™æ•°æ®çš„é—®é¢˜ã€‚\n\nInnoDBçš„è¾…åŠ©ç´¢å¼•ä¸­ï¼Œä¸å†ç›´æ¥å­˜æ”¾èŠ‚ç‚¹æ•°æ®ï¼Œè€Œæ˜¯å­˜æ”¾ä¸»é”®keyå€¼ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ ¹æ®keyå€¼å›åˆ°ä¸»é”®ç´¢å¼•è¡¨ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œéœ€è¦æŸ¥è¯¢ä¸¤æ¬¡æ‰èƒ½è·å–åˆ°ç»“æœã€‚\n\nå¦‚æœè¾…åŠ©ç´¢å¼•ä¸­è¿˜ä¿å­˜æ•°æ®ï¼Œå°±ä¼šé€ æˆæå¤§çš„ç©ºé—´æµªè´¹ï¼Œä¸€ä»½æ•°æ®è¢«ä¿å­˜ä¸¤æ¬¡ç”šè‡³æ›´å¤šæ¬¡ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚\n\nInnoDBè¿™ä¸ªå…ˆæŸ¥è¾…åŠ©ç´¢å¼•è¡¨ï¼Œå†å›åˆ°ä¸»é”®è¡¨ä¸­æŸ¥è¯¢çš„åŠ¨ä½œï¼Œå«åšå›è¡¨æŸ¥è¯¢ï¼›\nè¯è™½æ˜¯è¿™ä¹ˆè¯´ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ¯æ¬¡æŸ¥è¯¢æˆ‘ä»¬éƒ½éœ€è¦å›è¡¨çš„ã€‚æ¯”å¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ªå¤åˆé”®çš„ç´¢å¼•è¡¨ï¼Œå‡è®¾æ•°å­—æ˜¯ç”¨æˆ·IDï¼ˆä¸»é”®ï¼‰ï¼Œæ–‡å­—æ˜¯ç”¨æˆ·å§“åï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ç”¨æˆ·å§“åæŸ¥è¯¢ç”¨æˆ·IDçš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å›åˆ°ä¸»é”®è¡¨ä¹Ÿèƒ½è·å–åˆ°ç»“æœã€‚\n\nå¦å¤–ï¼Œåœ¨ä¸€èˆ¬çš„æ•°æ®åº“ä¸­ï¼ŒB+æ ‘å¹¶ä¸ä¼šå¾ˆæ·±ï¼Œæ‰€ä»¥å³ä¾¿éœ€è¦è¿›è¡Œå›è¡¨çš„ä¸¤æ¬¡æŸ¥è¯¢ï¼Œæ•ˆç‡ä¹Ÿä¸ä¼šå—åˆ°è¾ƒå¤§å½±å“ï¼›ï¼ˆä½†è‚¯å®šä¼šæœ‰ä¸€å®šæŸå¤±ï¼‰\n2.ç´¢å¼•æ“ä½œ2.1 åˆ›å»ºç´¢å¼•çš„åŸåˆ™\næ¯”è¾ƒé¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•\nå”¯ä¸€æ€§å¤ªå·®çš„å­—æ®µä¸é€‚åˆå•ç‹¬åˆ›å»ºç´¢å¼•ï¼Œå³ä½¿é¢‘ç¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶\næ›´æ–°éå¸¸é¢‘ç¹çš„å­—æ®µä¸é€‚åˆä½œåˆ›å»ºç´¢å¼•ï¼ˆå› ä¸ºæ¯æ¬¡æ›´æ–°éƒ½å¾—é‡ç½®ç´¢å¼•ï¼Œå¢åŠ IOå‹åŠ›ï¼‰\nä¸ä¼šå‡ºç°åœ¨whereå­å¥ä¸­çš„å­—æ®µä¸è¯¥åˆ›å»ºç´¢å¼•ï¼ˆä¸ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µï¼‰\n\nå¦å¤–ï¼Œå¦‚æœåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ä¹ˆæœ‰æŒ‡å®šä¸»é”®ï¼Œé‚£ä¹ˆMySQLä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéšè—çš„è‡ªå¢ä¸»é”®IDï¼ˆä¸ç„¶å°±æ²¡åŠæ³•æ”¯æŒå…¶ä»–ç´¢å¼•å’Œå…¶æœ¬èº«çš„å¿«é€ŸæŸ¥æ‰¾äº†ï¼‰\n2.2 åˆ›å»ºä¸»é”®ç´¢å¼•åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®šprimary keyï¼Œé»˜è®¤å°±ä¼šåˆ›å»ºä¸»é”®ç´¢å¼•\ncreate table user1( id int unsigned primary key, name varchar(200) NOT NULL );\n\nåˆ›å»ºè¡¨çš„æœ€åï¼ŒæŒ‡å®šæŸåˆ—ä¸ºä¸»é”®ç´¢å¼•ï¼Œè¿™ä¸ªå’Œç¬¬ä¸€ç§æ–¹å¼æœ¬è´¨ä¸Šæ²¡åŒºåˆ«\ncreate table user1( id int unsigned , name varchar(200) NOT NULL, primary key(id) );\n\nåˆ›å»ºè¡¨äº†ä¹‹åå†æ·»åŠ ä¸»é”®\n-- åˆ›å»ºè¡¨create table user1( id int unsigned , name varchar(200) NOT NULL);-- æ·»åŠ ä¸»é”®alter table user1 add primary key(id);\n\nä¸»é”®ç´¢å¼•çš„ç‰¹ç‚¹ï¼š\n\nä¸€ä¸ªè¡¨é‡Œé¢æœ¬æ¥å°±åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ï¼Œæ‰€ä»¥ä¸»é”®ç´¢å¼•ä¹Ÿåªæœ‰ä¸€ä¸ªï¼ˆå¤åˆä¸»é”®ä¹Ÿåªç®—ä¸€ä¸ªä¸»é”®ï¼‰\nä¸»é”®ç´¢å¼•çš„æ•ˆç‡é«˜ï¼ˆä¸»é”®åˆ—ä¸å¯é‡å¤ï¼‰\nä¸»é”®åˆ—ä¸èƒ½ä¸ºNULLï¼Œæ‰€ä»¥ä¹Ÿä¸å­˜åœ¨æ— æ³•è¢«ç´¢å¼•çš„å€¼\nä¸€èˆ¬éƒ½ä¼šç”¨æ•°å­—æ¥ä½œä¸ºä¸»é”®ï¼Œåœ¨ç´¢å¼•ä¸­æ–¹ä¾¿æ•°æ®æ¯”è¾ƒ\n\n2.3 å”¯ä¸€é”®ç´¢å¼•å½“ä½ ç»™æŸä¸€åˆ—è®¾ç½®ä¸ºå”¯ä¸€é”®çš„æ—¶å€™ï¼ŒMySQLå°±ä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€é”®ç´¢å¼•ï¼›å”¯ä¸€é”®ç´¢å¼•å…¶å®å°±æ˜¯æ™®é€šçš„è¾…åŠ©ç´¢å¼•ï¼Œåªä¸è¿‡å…¶å’Œä¸»é”®ä¸€æ ·éƒ½åŒ…å«å”¯ä¸€çš„é”®å€¼çº¦æŸï¼›\n-- ç›´æ¥æŒ‡å®šå”¯ä¸€é”®create table user2(id int primary key, name varchar(200) unique);-- åˆ›å»ºè¯­å¥æœ«å°¾æŒ‡å®šå”¯ä¸€é”®create table user2(id int primary key, name varchar(200),unique(name));-- åˆ›å»ºåå†æ·»åŠ å”¯ä¸€é”®create table user2(id int primary key, name varchar(200));alter table user2 add unique(name);\n\nå”¯ä¸€ç´¢å¼•çš„ç‰¹ç‚¹ï¼š\n\nä¸€ä¸ªè¡¨ä¸­ï¼Œå¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€ç´¢å¼•ï¼ŒåŒ…æ‹¬å¤åˆå”¯ä¸€é”®çš„ç´¢å¼•ï¼›\næŸ¥è¯¢æ•ˆç‡é«˜ï¼›\nå¦‚æœåœ¨æŸä¸€åˆ—å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼Œå¿…é¡»ä¿è¯è¿™åˆ—ä¸èƒ½æœ‰é‡å¤æ•°æ®ï¼›\nå¦‚æœä¸€ä¸ªå”¯ä¸€ç´¢å¼•ä¸ŠæŒ‡å®šnot nullï¼Œç­‰ä»·äºä¸»é”®ç´¢å¼•ï¼›\nå¦‚æœåˆ é™¤å”¯ä¸€é”®ç´¢å¼•ï¼Œä¹Ÿä¼šåŒæ—¶åˆ é™¤å”¯ä¸€çš„çº¦æŸå±æ€§ï¼›\n\n2.4 æ™®é€šé”®ç´¢å¼•åˆ›å»ºæ™®é€šç´¢å¼•ä¾æ—§æœ‰3ç§æ–¹å¼\n-- åœ¨è¡¨çš„å®šä¹‰æœ€åï¼ŒæŒ‡å®šæŸåˆ—ä¸ºç´¢å¼•create table user3(id int primary key,    name varchar(20),    email varchar(30),    index(name));-- åˆ›å»ºå®Œè¡¨ä»¥åæŒ‡å®šæŸåˆ—ä¸ºæ™®é€šç´¢å¼•create table user3(id int primary key, name varchar(20), emailvarchar(30));alter table user3 add index(name);-- åˆ›å»ºç´¢å¼•çš„æ—¶å€™æŒ‡å®šåå­—create table user3(id int primary key, name varchar(20), emailvarchar(30));create index idx_name on user3(name); -- åˆ›å»ºä¸€ä¸ªç´¢å¼•åä¸º idx_name çš„ç´¢å¼•\n\næ™®é€šç´¢å¼•çš„ç‰¹ç‚¹ï¼š\n\nä¸€ä¸ªè¡¨ä¸­å¯ä»¥æœ‰å¤šä¸ªæ™®é€šç´¢å¼•\næ™®é€šç´¢å¼•ä¸­çš„é”®å€¼å¯ä»¥é‡å¤ï¼Œä½†ä¸è¦åœ¨å¤§é‡é‡å¤çš„é”®å€¼ä¸Šå»ºç«‹ç´¢å¼•ï¼ˆæ¯”å¦‚æ€§åˆ«ï¼‰\n\n2.5 å¤åˆ&#x2F;è”åˆç´¢å¼•ç»™å¤šä¸ªé”®å€¼åˆ›å»ºç´¢å¼•ï¼Œæ“ä½œå¦‚ä¸‹\ncreate index ç´¢å¼•åå­— on è¡¨å(å­—æ®µ1,å­—æ®µ2);-- å¦‚æœéœ€è¦ç´¢å¼•æŒ‰ä¸åŒçš„è§„åˆ™æ’åºï¼Œå¯ä»¥åœ¨å­—æ®µååŠ DESCå’ŒASCcreate index ç´¢å¼•åå­— on è¡¨å(å­—æ®µ1 DESC,å­—æ®µ2 ASC);\n\næ­¤æ—¶æˆ‘ä»¬åˆ›å»ºçš„ç´¢å¼•ï¼Œåœ¨å­—æ®µ1å’Œå­—æ®µ2ä¸Šä¼šå…±ç”¨ä¸€ä¸ªç´¢å¼•çš„Key_nameï¼Œç´¢å¼•åå­—æ˜¯ç›¸åŒçš„ã€‚\nå¤åˆç´¢å¼•æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¦‚æœä½¿ç”¨InnoDBæ—¶ï¼Œéœ€è¦æŸ¥è¯¢çš„ç»“æœåŒ…å«åœ¨ç´¢å¼•å­—æ®µä¸­ï¼Œé‚£å°±å¯ä»¥èŠ‚çœä¸€æ¬¡è¿”è¿˜åˆ°ä¸»é”®ç´¢å¼•ä¸­æŸ¥è¯¢çš„å›è¡¨æ­¥éª¤ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜æ•ˆç‡ï¼ˆåœ¨ä¸Šæ–‡ä¸­å·²ç»æåŠæ­¤äº‹ï¼‰\n\nä¸Šé¢è¿™ç§æ“ä½œå«åšç´¢å¼•è¦†ç›–ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰ï¼Œç›´æ¥ä»æ™®é€šç´¢å¼•è¡¨ä¸­æŸ¥è¯¢åˆ°ç»“æœï¼›\nå»ºç«‹å¤åˆç´¢å¼•ç›¸æ¯”äºå»ºç«‹å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œè¿˜èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘ç©ºé—´æ¶ˆè€—ï¼Œæé«˜æ•ˆç‡ï¼›\n\nå¦å¤–ï¼Œåœ¨è¿›è¡Œå¤åˆç´¢å¼•çš„æŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨ç”¨æˆ·åæ¥æŸ¥è¯¢ç”¨æˆ·IDï¼Œè¿”è¿‡æ¥æ˜¯ä¸è¡Œçš„ï¼ˆä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼‰ã€‚å› ä¸ºåœ¨MySQLå¯¹ç´¢å¼•è¿›è¡ŒåŒ¹é…çš„æ—¶å€™ï¼Œåªä¼šåŒ¹é…æœ€å·¦ä¾§çš„ç´¢å¼•å€¼ï¼›\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œå……å½“åˆ¤æ–­æ¡ä»¶çš„æ˜¯ç”¨æˆ·åå­—ï¼Œé€šè¿‡ç”¨æˆ·åå­—æŸ¥ç”¨æˆ·IDæ˜¯OKçš„ï¼Œåè¿‡æ¥å°±ä¸è¡Œï¼›è¿™ç§æƒ…å†µä¸‹MySQLä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œä¾æ—§æ˜¯å…¨è¡¨éå†ï¼›\n\nè¿™ç§å«åšMySQLç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™\n\nè¯¦è§£ï¼šè”åˆç´¢å¼•-æœ€å·¦åŒ¹é…åŸåˆ™\n\nMySQLåœ¨åˆ›å»ºå¤åˆç´¢å¼•çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå¯¹æœ€å·¦è¾¹å­—æ®µæ’åºï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå­—æ®µï¼Œç„¶åå†åœ¨ä¿è¯ç¬¬ä¸€ä¸ªå­—æ®µæœ‰åºçš„æƒ…å†µä¸‹ï¼Œå†æ’åºç¬¬äºŒä¸ªå­—æ®µï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€ä»¥è”åˆç´¢å¼•æœ€å·¦åˆ—æ˜¯ç»å¯¹æœ‰åºçš„ï¼Œå…¶ä»–å­—æ®µæ— åºã€‚\nä¸¾ä¸ªä¾‹å­ï¼šå¯ä»¥æŠŠè”åˆç´¢å¼•çœ‹æˆâ€œç”µè¯ç°¿â€ï¼Œå§“åä½œä¸ºè”åˆç´¢å¼•ï¼Œå§“æ˜¯ç¬¬ä¸€åˆ—ï¼Œåæ˜¯ç¬¬äºŒåˆ—ï¼Œå½“æŸ¥æ‰¾äººåæ—¶ï¼Œæ˜¯å…ˆç¡®å®šè¿™ä¸ªäººå§“å†æ ¹æ®åç¡®å®šäººã€‚åªæœ‰åæ²¡æœ‰å§“å°±æŸ¥ä¸åˆ°ã€‚\n2.6 å…¨æ–‡ç´¢å¼•å¦‚æœå¯¹æ–‡ç« æˆ–è€…å¤§é‡æ–‡å­—çš„å­—æ®µè¿›è¡Œæ£€ç´¢çš„æ—¶å€™ï¼Œå°±ä¼šä½¿ç”¨åˆ°å…¨æ–‡ç´¢å¼•ã€‚MySQLæä¾›å…¨æ–‡ç´¢å¼•æœºåˆ¶ï¼Œä½†æ˜¯è¦æ±‚è¡¨çš„å­˜å‚¨å¼•æ“å¿…é¡»æ˜¯MyISAMï¼›è€Œä¸”é»˜è®¤çš„å…¨æ–‡ç´¢å¼•åªæ”¯æŒè‹±æ–‡ï¼Œä¸æ”¯æŒä¸­æ–‡ã€‚å¦‚æœå¯¹ä¸­æ–‡è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼Œå¯ä»¥ä½¿ç”¨sphinxçš„ä¸­æ–‡ç‰ˆ(coreseek)ã€‚\n-- åˆ›å»ºè¡¨ï¼ŒFULLTEXTè®¾ç½®å…¨æ–‡ç´¢å¼•CREATE TABLE articles (    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,    title VARCHAR(200),    body TEXT,    FULLTEXT (title,body) )engine=MyISAM;-- æ’å…¥æµ‹è¯•æ•°æ®INSERT INTO articles (title,body) VALUES    (&#x27;MySQL Tutorial&#x27;,&#x27;DBMS stands for DataBase ...&#x27;),    (&#x27;How To Use MySQL Well&#x27;,&#x27;After you went through a ...&#x27;),    (&#x27;Optimizing MySQL&#x27;,&#x27;In this tutorial we will show ...&#x27;),    (&#x27;1001 MySQL Tricks&#x27;,&#x27;1. Never run mysqld as root. 2. ...&#x27;),    (&#x27;MySQL vs. YourSQL&#x27;,&#x27;In the following database comparison ...&#x27;),    (&#x27;MySQL Security&#x27;,&#x27;When configured properly, MySQL ...&#x27;);\n\nåˆ›å»ºå¥½è¡¨ä¹‹åï¼ŒæŸ¥è¯¢è¡¨ä¸­ç´¢å¼•ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°titleå’Œbodyå­—æ®µéƒ½ç”¨ä¸Šäº†ç´¢å¼•åå­—ä¸ºtitleçš„å…¨æ–‡ç´¢å¼•\n\nå‡è®¾æˆ‘ä»¬æŸ¥è¯¢è¿™ä¸ªè¡¨ä¸­æœ‰æ²¡æœ‰åŒ…å«databaseçš„æ–‡å­—æ•°æ®ï¼Œè™½ç„¶æˆåŠŸæŸ¥è¯¢äº†ç»“æœï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨åˆ°å…¨æ–‡ç´¢å¼•\nselect * from articles where body like &#x27;%database%&#x27;;+----+-------------------+------------------------------------------+| id | title             | body                                     |+----+-------------------+------------------------------------------+|  1 | MySQL Tutorial    | DBMS stands for DataBase ...             ||  5 | MySQL vs. YourSQL | In the following database comparison ... |+----+-------------------+------------------------------------------+2 rows in set (0.000 sec)\n\nä½¿ç”¨explainè¯­å¥å¯ä»¥çœ‹å‡ºæ˜¯å¦æœ‰ä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼Œè¿™é‡Œçš„keyä¸ºNULLå°±ä»£è¡¨ä¹ˆæœ‰ä½¿ç”¨ä¸Šç´¢å¼•ï¼›è¿™ä¸ªå·¥å…·çš„ä½œç”¨æ˜¯é¢„æ‰§è¡Œï¼Œå¹¶ä¸ä¼šå®é™…ä¸Šè¿è¡Œè¿™ä¸ªè¯­å¥ï¼Œä½†æ˜¯ä¼šå‘Šè¯‰ä½ æˆ‘æƒ³æ€ä¹ˆè¿è¡Œå®ƒï¼›\nexplain select * from articles where body like &#x27;%database%&#x27;\\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: articles         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 6        Extra: Using where1 row in set (0.000 sec)\n\nè¦æƒ³ä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼Œå¾—è¿™ä¹ˆå†™\nSELECT * FROM articles WHERE MATCH (title,body) AGAINST (&#x27;database&#x27;);\n\nå†ç”¨explainå·¥å…·çœ‹çœ‹ï¼Œæ­¤æ—¶å°±å¯ä»¥çœ‹åˆ°keyé‡Œé¢æ˜¾ç¤ºçš„æ˜¯titleï¼ŒæˆåŠŸä½¿ç”¨ä¸Šäº†å…¨æ–‡ç´¢å¼•\nexplain SELECT * FROM articles WHERE MATCH (title,body) AGAINST    -&gt; (&#x27;database&#x27;)\\G*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: articles         type: fulltextpossible_keys: title          key: title      key_len: 0          ref:          rows: 1        Extra: Using where1 row in set (0.000 sec)\n\nexplainå·¥å…·è¿™é‡Œå¯¹explainå·¥å…·æ˜¾ç¤ºçš„åˆ—ä½œä¸€ä¸ªè¯´æ˜ã€‚è¿™ä¸ªå·¥å…·çš„ä½œç”¨æ˜¯é¢„æ‰§è¡Œï¼Œå¹¶ä¸ä¼šå®é™…ä¸Šè¿è¡Œè¿™ä¸ªè¯­å¥ï¼Œä½†æ˜¯ä¼šå‘Šè¯‰ä½ æˆ‘æƒ³æ€ä¹ˆè¿è¡Œå®ƒï¼›è¾“å‡ºç»“æœåŒ…å«å¦‚ä¸‹åˆ—ï¼š\n\nid â€” é€‰æ‹©æ ‡è¯†ç¬¦ï¼Œid è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆè¢«æ‰§è¡Œï¼›\nselect_type â€” è¡¨ç¤ºæŸ¥è¯¢çš„ç±»å‹ï¼›\ntable â€” è¾“å‡ºç»“æœé›†çš„è¡¨ï¼›\npartitions â€” åŒ¹é…çš„åˆ†åŒºï¼›\ntype â€” è¡¨ç¤ºè¡¨çš„è¿æ¥ç±»å‹ï¼›\npossible_keys â€” è¡¨ç¤ºæŸ¥è¯¢æ—¶ï¼Œå¯èƒ½ä½¿ç”¨çš„ç´¢å¼•ï¼›\nkey â€” è¡¨ç¤ºå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼›\nkey_len â€” ç´¢å¼•å­—æ®µçš„é•¿åº¦ï¼›\nrefâ€”  åˆ—ä¸ç´¢å¼•çš„æ¯”è¾ƒï¼›\nrows â€” å¤§æ¦‚ä¼°ç®—çš„è¡Œæ•°ï¼›\nfiltered â€” æŒ‰è¡¨æ¡ä»¶è¿‡æ»¤çš„è¡Œç™¾åˆ†æ¯”ï¼›\nExtra â€” æ‰§è¡Œæƒ…å†µçš„æè¿°å’Œè¯´æ˜ã€‚\n\n2.7 æŸ¥è¯¢&#x2F;åˆ é™¤ç´¢å¼•å¦‚æœéœ€è¦åˆ é™¤ä¸»é”®ç´¢å¼•ï¼Œç›´æ¥æŠŠä¸»é”®åˆ äº†å°±è¡Œäº†\nalter table è¡¨å drop primary key;\n\nåˆ é™¤æ™®é€šç´¢å¼•è¯­å¥å¦‚ä¸‹\nalter table è¡¨å drop index ç´¢å¼•åå­—;\n\næ³¨æ„ï¼Œç´¢å¼•çš„åå­—ä¸ä¸€å®šå’Œå­—æ®µåç›¸åŒï¼ˆåœ¨åˆ›å»ºç´¢å¼•çš„æ—¶å€™å¯ä»¥æŒ‡å®šç´¢å¼•åå­—ï¼‰ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹è¯­å¥æŸ¥çœ‹\nshow keys from è¡¨å;\n\næ¯”å¦‚user2è¡¨ä¸­åŒ…å«idä¸»é”®ç´¢å¼•å’Œnameçš„ä¸»é”®ç´¢å¼•ï¼Œå…¶ç»“æœæŸ¥è¯¢å¦‚ä¸‹ï¼›å…¶ä¸­çš„Key_nameæ‰æ˜¯ç´¢å¼•çš„åå­—ï¼Œä¸ä¸€å®šå’Œå­—æ®µåç›¸åŒï¼åˆ é™¤ç´¢å¼•çš„æ—¶å€™éœ€è¦ä½¿ç”¨ç´¢å¼•åå­—ï¼\n\nè¿˜å¯ä»¥ç”¨å¦‚ä¸‹è¯­å¥æ¥æ›´åŠ æ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªç´¢å¼•çš„ç›¸å…³å±æ€§\nshow index from è¡¨å\\G;\n\næˆ‘ç»™user2è¡¨æ·»åŠ ä¸€ä¸ªé”®å€¼ï¼Œå¹¶è®¾ç½®æ™®é€šç´¢å¼•\nalter table user2 add qq varchar(40); -- æ·»åŠ ä¸€ä¸ªé”®å€¼alter table user2 add index(qq); -- æ·»åŠ æ™®é€šç´¢å¼•\n\nä½¿ç”¨show index from è¡¨å\\G;è¯­å¥æŸ¥çœ‹user2è¡¨çš„ç´¢å¼•å±æ€§ï¼›åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå”¯ä¸€é”®ç´¢å¼•çš„å±æ€§å’Œæ™®é€šç´¢å¼•æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œæ‰€ä»¥æ‰è¯´å”¯ä¸€é”®çš„ç´¢å¼•æœ¬è´¨ä¸Šè¿˜æ˜¯æ™®é€šç´¢å¼•ã€‚\nè¿™é‡Œè¿˜å†™æ˜äº†ç´¢å¼•çš„ç±»å‹æ˜¯BTREEï¼Œå…¶å°±æ˜¯B+æ ‘ï¼›\nMariaDB [hello_mysql]&gt; desc user2;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   | PRI | NULL    |       || name  | varchar(200)     | NO   | UNI | NULL    |       || qq    | varchar(40)      | YES  | MUL | NULL    |       |+-------+------------------+------+-----+---------+-------+3 rows in set (0.001 sec)MariaDB [hello_mysql]&gt; show index from user2\\G;*************************** 1. row ***************************        Table: user2   Non_unique: 0     Key_name: PRIMARY Seq_in_index: 1  Column_name: id    Collation: A  Cardinality: 0     Sub_part: NULL       Packed: NULL         Null:    Index_type: BTREE      Comment: Index_comment: *************************** 2. row ***************************        Table: user2   Non_unique: 0     Key_name: name Seq_in_index: 1  Column_name: name    Collation: A  Cardinality: 0     Sub_part: NULL       Packed: NULL         Null:    Index_type: BTREE      Comment: Index_comment: *************************** 3. row ***************************        Table: user2   Non_unique: 1     Key_name: qq Seq_in_index: 1  Column_name: qq    Collation: A  Cardinality: NULL     Sub_part: NULL       Packed: NULL         Null: YES   Index_type: BTREE      Comment: Index_comment: 3 rows in set (0.000 sec)ERROR: No query specified\n\n2.8 ä»€ä¹ˆæ—¶å€™ç´¢å¼•ä¼šå¤±æ•ˆï¼Ÿ\nhttps://cloud.tencent.com/developer/article/2035778\nhttps://zhuanlan.zhihu.com/p/361172794\n\n2.8.1 å¦‚æœæ¡ä»¶ä¸­æœ‰or&#x2F;andå¦‚æœæ¡ä»¶ä¸­æœ‰or&#x2F;andï¼Œå³ä½¿å…¶ä¸­æœ‰éƒ¨åˆ†æ¡ä»¶å¸¦ç´¢å¼•ä¹Ÿä¸ä¼šä½¿ç”¨ï¼›\nå…ˆè¯´ç»“è®ºï¼šå¦‚æœåœ¨ä½¿ç”¨andå’Œorè¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œåªæœ‰ä¸¤åˆ—éƒ½åŒ…å«äº†ç´¢å¼•æ‰ä¼šä½¿ç”¨ï¼›\n-- åˆ›å»ºç¤ºä¾‹è¡¨ï¼Œå…¶ä¸­idæ˜¯ä¸»é”®ï¼Œuser_idæ²¡æœ‰åˆ›å»ºç´¢å¼•create table user3(\tid int unsigned primary key,\tuser_id int unsigned not null,    name varchar(30) not null);-- æ’å…¥ç¤ºä¾‹æ•°æ®insert into user3 values \t(1,10,&#x27;ç”²&#x27;),\t(2,20,&#x27;ä¸™&#x27;),\t(3,30,&#x27;ä¹™&#x27;),\t(4,40,&#x27;ä¸&#x27;),\t(5,50,&#x27;å°¼æ–¯&#x27;),(6,23,&#x27;ä¼é¹…&#x27;),(7,14,&#x27;å€ªæµ©&#x27;),(9,21,&#x27;test&#x27;);\n\nè¿™æ—¶å€™å¦‚æœç”¨å¦‚ä¸‹è¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£å°±ä¸ä¼šä½¿ç”¨ç´¢å¼•\nselect * from user3 where id=3 or user_id=40;\n\nä½¿ç”¨explainå‘½ä»¤æ¥æŸ¥çœ‹è¿è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°keyä¸€åˆ—ä¸ºç©ºï¼Œä»£è¡¨æ²¡æœ‰ä½¿ç”¨ç´¢å¼•\nMariaDB [hello_mysql]&gt; explain select * from user3 where id=3 or user_id=40\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: ALLpossible_keys: PRIMARY          key: NULL      key_len: NULL          ref: NULL         rows: 4        Extra: Using where1 row in set (0.000 sec)ERROR: No query specifiedMariaDB [hello_mysql]&gt; explain select * from user3 where id=2 and user_id=30\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: NULL         type: NULLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: NULL        Extra: Impossible WHERE noticed after reading const tables1 row in set (0.001 sec)ERROR: No query specified\n\nç›´æ¥æŸ¥è¯¢idï¼Œæœ‰ä½¿ç”¨ç´¢å¼•\nMariaDB [hello_mysql]&gt; explain select * from user3 where id=2\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 4          ref: const         rows: 1        Extra: 1 row in set (0.000 sec)ERROR: No query specified\n\næ­¤æ—¶å¦‚æœç»™user_idåˆ—åŠ ä¸Šç´¢å¼•åé‡æ–°æ“ä½œï¼Œé‚£ç»“æœå°±ä¸ä¸€æ ·äº†\nalter table user3 add unique(user_id); -- å”¯ä¸€é”®ç´¢å¼•\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä½¿ç”¨ç´¢å¼•ï¼ˆåœ¨æˆ‘çš„æµ‹è¯•ä¸­ï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè¿™å¤§æ¦‚æ˜¯å› ä¸ºæˆ‘çš„å†…å®¹åˆ—å¤ªå°‘äº†ï¼Œä¸å¦‚ç›´æ¥éå†ï¼Ÿï¼‰\nMariaDB [hello_mysql]&gt; explain select * from user3 where id=2 and user_id=20\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: constpossible_keys: PRIMARY,user_id          key: PRIMARY      key_len: 4          ref: const         rows: 1        Extra: 1 row in set (0.000 sec)ERROR: No query specified\n\n2.8.2 å¤åˆç´¢å¼•æ²¡æœ‰ä½¿ç”¨æœ€å·¦åˆ—ä½¿ç”¨sn + name + ageåˆ›å»ºå¤åˆç´¢å¼•ï¼Œæˆ‘ä»¬å‡è®¾å®ƒä»¬çš„é¡ºåºæ˜¯ A + B + Cï¼Œä»¥ä¸‹è”åˆç´¢å¼•çš„ä½¿ç”¨æƒ…å†µå¦‚ä¸‹ï¼š\n\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œåªæœ‰A+B+Cæˆ–è€…A+B&#x2F;A+Cæ‰èƒ½è§¦å‘ç´¢å¼•ï¼Œè€Œä½¿ç”¨B+Cæ— æ³•è§¦å‘ç´¢å¼•ï¼Œå› ä¸ºæ²¡æœ‰ä½¿ç”¨æœ€å·¦åˆ—ï¼›\n2.8.3  é”™è¯¯æ¨¡ç³ŠæŸ¥è¯¢æ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œåªæœ‰å…³é”®å­—%æ‰èƒ½ç”¨åˆ°ç´¢å¼•ï¼Œä½¿ç”¨%å…³é”®å­—æˆ–è€…%å…³é”®å­—%éƒ½æ˜¯æ— æ³•ä½¿ç”¨ç´¢å¼•çš„ï¼›\næµ‹è¯•è¡¨ç»“æ„å¦‚ä¸‹ï¼Œå…¶ä¸­enameæ˜¯ç”¨æˆ·åï¼Œæˆ‘ç»™ä»–æ·»åŠ äº†ä¸€ä¸ªæ™®é€šç´¢å¼•\nMariaDB [bit_index]&gt; desc EMP;+----------+--------------------------+------+-----+---------+-------+| Field    | Type                     | Null | Key | Default | Extra |+----------+--------------------------+------+-----+---------+-------+| empno    | int(6) unsigned zerofill | NO   | PRI | NULL    |       || ename    | varchar(10)              | YES  |     | NULL    |       || job      | varchar(9)               | YES  |     | NULL    |       || mgr      | int(4) unsigned zerofill | YES  |     | NULL    |       || hiredate | datetime                 | YES  |     | NULL    |       || sal      | decimal(7,2)             | YES  |     | NULL    |       || comm     | decimal(7,2)             | YES  |     | NULL    |       || deptno   | int(2) unsigned zerofill | YES  |     | NULL    |       |+----------+--------------------------+------+-----+---------+-------+8 rows in set (0.001 sec)MariaDB [bit_index]&gt; alter table EMP add index(ename);Query OK, 0 rows affected (11.911 sec)              Records: 0  Duplicates: 0  Warnings: 0\n\nç„¶åè¿›è¡Œæµ‹è¯•ã€‚æ³¨æ„çœ‹ä¸‹æ–¹3æ¬¡æŸ¥è¯¢çš„likeæ¡ä»¶åŒºåˆ«ï¼Œä»¥åŠæ˜¯å¦ä½¿ç”¨äº†ç´¢å¼•ï¼›å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä½¿ç”¨FN%ä½œä¸ºæŸ¥è¯¢æ¡ä»¶çš„æ—¶å€™ï¼Œæ‰ä½¿ç”¨äº†ç´¢å¼•\nMariaDB [bit_index]&gt; explain select * from EMP where ename like &#x27;FN%&#x27;\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: EMP         type: rangepossible_keys: ename          key: ename      key_len: 33          ref: NULL         rows: 22000        Extra: Using index condition1 row in set (0.000 sec)ERROR: No query specifiedMariaDB [bit_index]&gt; explain select * from EMP where ename like &#x27;%FN%&#x27;\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: EMP         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 7968250        Extra: Using where1 row in set (0.000 sec)ERROR: No query specifiedMariaDB [bit_index]&gt; explain select * from EMP where ename like &#x27;%FN&#x27;\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: EMP         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 7968250        Extra: Using where1 row in set (0.000 sec)ERROR: No query specified\n\n2.8.4 åˆ—è¿ç®—å¦‚æœåŒ…å«ç´¢å¼•çš„åˆ—è¿›è¡Œäº†è¿ç®—ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼›\næ¯”å¦‚ä¸‹æ–¹ï¼Œç›´æ¥è¿›è¡Œid=5æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•ï¼Œä½†ç”¨id+2=5è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼›\nMariaDB [hello_mysql]&gt; explain select * from user3 where id=5\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: constpossible_keys: PRIMARY          key: PRIMARY      key_len: 4          ref: const         rows: 1        Extra: 1 row in set (0.000 sec)ERROR: No query specifiedMariaDB [hello_mysql]&gt; explain select * from user3 where id+2=5\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 8        Extra: Using where1 row in set (0.000 sec)ERROR: No query specified\n\n2.8.5 ä½¿ç”¨å‡½æ•°æŸ¥è¯¢åˆ—å¦‚æœä½¿ç”¨ä»»æ„ MySQL æä¾›çš„å‡½æ•°å°±ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè¿™ä¸€ç‚¹çš„æƒ…å†µå’Œä¸Šä¸€ç‚¹è¿›è¡Œè¿ç®—å…¶å®æ˜¯ç±»ä¼¼çš„ï¼Œæ¯•ç«Ÿå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å†…ç½®çš„è¿ç®—ï¼›\nMariaDB [hello_mysql]&gt; explain select * from user3 where ifnull(id,0)=5\\G;*************************** 1. row ***************************           id: 1  select_type: SIMPLE        table: user3         type: ALLpossible_keys: NULL          key: NULL      key_len: NULL          ref: NULL         rows: 8        Extra: Using where1 row in set (0.001 sec)ERROR: No query specified\n\n2.8.6 ç±»å‹è½¬æ¢å½“æŸ¥è¯¢çš„æ¡ä»¶å’Œå…¶æœ¬èº«çš„æ•°æ®ç±»å‹ä¸åŒæ—¶ï¼Œä¸ä¼šè§¦å‘ç´¢å¼•ï¼›\næ¯”å¦‚ address ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œè€ŒæŸ¥è¯¢çš„æ—¶å€™è®¾ç½®äº† int ç±»å‹çš„å€¼å°±ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n2.8.7 ä½¿ç”¨is not nullå½“åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨äº† is not null ä¹Ÿä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œè€Œ is null åˆ™ä¼šæ­£å¸¸è§¦å‘ç´¢å¼•çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n3.ç´¢å¼•ä¼˜åŒ–3.1 å…³è”æŸ¥è¯¢ä¼˜åŒ–ä¿è¯è¢«é©±åŠ¨è¡¨çš„JOINå­—æ®µå·²ç»åˆ›å»ºäº†ç´¢å¼•ï¼Œéœ€è¦ JOIN çš„å­—æ®µï¼Œæ•°æ®ç±»å‹ä¿æŒç»å¯¹ä¸€è‡´ã€‚\n\nLEFT JOIN æ—¶ï¼Œé€‰æ‹©å°è¡¨ä½œä¸ºé©±åŠ¨è¡¨ï¼Œ å¤§è¡¨ä½œä¸ºè¢«é©±åŠ¨è¡¨ ã€‚å‡å°‘å¤–å±‚å¾ªç¯çš„æ¬¡æ•°ã€‚\nINNER JOIN æ—¶ï¼ŒMySQLä¼šè‡ªåŠ¨å°†å°ç»“æœé›†çš„è¡¨é€‰ä¸ºé©±åŠ¨è¡¨ ã€‚\n\né€‰æ‹©ç›¸ä¿¡MySQLä¼˜åŒ–ç­–ç•¥ã€‚èƒ½å¤Ÿç›´æ¥å¤šè¡¨å…³è”çš„å°½é‡ç›´æ¥å…³è”ï¼Œä¸ç”¨å­æŸ¥è¯¢ã€‚(å‡å°‘æŸ¥è¯¢çš„è¶Ÿæ•°ï¼‰\n\nä¸å»ºè®®ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå»ºè®®å°†å­æŸ¥è¯¢SQLæ‹†å¼€ç»“åˆç¨‹åºå¤šæ¬¡æŸ¥è¯¢ï¼Œæˆ–ä½¿ç”¨ JOIN æ¥ä»£æ›¿å­æŸ¥è¯¢ï¼Œå‚è€ƒç¬¬äºŒç‚¹ï¼›\n\nå¦å¤–ï¼Œè¡ç”Ÿè¡¨å»ºä¸äº†ç´¢å¼•ã€‚è¿™ç‚¹ä¹Ÿéœ€è¦æ³¨æ„\n3.2 å­æŸ¥è¯¢ä¼˜åŒ–MySQLä»4.1ç‰ˆæœ¬å¼€å§‹æ”¯æŒå­æŸ¥è¯¢ï¼Œä½¿ç”¨å­æŸ¥è¯¢å¯ä»¥è¿›è¡ŒSELECTè¯­å¥çš„åµŒå¥—æŸ¥è¯¢ï¼Œå³ä¸€ä¸ªSELECTæŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦ä¸€ä¸ªSELECTè¯­å¥çš„æ¡ä»¶ã€‚ \nå­æŸ¥è¯¢å¯ä»¥ä¸€æ¬¡æ€§å®Œæˆå¾ˆå¤šé€»è¾‘ä¸Šéœ€è¦å¤šä¸ªæ­¥éª¤æ‰èƒ½å®Œæˆçš„SQLæ“ä½œï¼Œå­æŸ¥è¯¢æ˜¯ MySQL çš„ä¸€é¡¹é‡è¦çš„åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª SQL è¯­å¥å®ç°æ¯”è¾ƒå¤æ‚çš„æŸ¥è¯¢ã€‚\nä½†æ˜¯ï¼Œå­æŸ¥è¯¢çš„æ‰§è¡Œæ•ˆç‡ä¸é«˜ã€‚åŸå› ï¼š \n\næ‰§è¡Œå­æŸ¥è¯¢æ—¶ï¼ŒMySQLéœ€è¦ä¸ºå†…å±‚æŸ¥è¯¢è¯­å¥çš„æŸ¥è¯¢ç»“æœ å»ºç«‹ä¸€ä¸ªä¸´æ—¶è¡¨ ï¼Œç„¶åå¤–å±‚æŸ¥è¯¢è¯­å¥ä»ä¸´æ—¶è¡¨ä¸­æŸ¥è¯¢è®°å½•ã€‚æŸ¥è¯¢å®Œæ¯•åï¼Œå†æ’¤é”€è¿™äº›ä¸´æ—¶è¡¨ã€‚è¿™æ ·ä¼šæ¶ˆè€—è¿‡å¤šçš„CPUå’ŒIOèµ„æºï¼Œäº§ç”Ÿå¤§é‡çš„æ…¢æŸ¥è¯¢ã€‚ \nå­æŸ¥è¯¢çš„ç»“æœé›†å­˜å‚¨çš„ä¸´æ—¶è¡¨ï¼Œä¸è®ºæ˜¯å†…å­˜ä¸´æ—¶è¡¨è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨éƒ½ä¸ä¼šå­˜åœ¨ç´¢å¼• ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ä¼šå—åˆ°ä¸€å®šçš„å½±å“ã€‚\nå¯¹äºè¿”å›ç»“æœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ä¹Ÿå°±è¶Šå¤§ã€‚ åœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¿æ¥ï¼ˆJOINï¼‰æŸ¥è¯¢æ¥æ›¿ä»£å­æŸ¥è¯¢ã€‚è¿æ¥æŸ¥è¯¢ä¸éœ€è¦å»ºç«‹ä¸´æ—¶è¡¨ ï¼Œå…¶é€Ÿåº¦æ¯”å­æŸ¥è¯¢è¦å¿« ï¼Œå¦‚æœæŸ¥è¯¢ä¸­ä½¿ç”¨ç´¢å¼•çš„è¯ï¼Œæ€§èƒ½å°±ä¼šæ›´å¥½ã€‚\n\nç»“è®ºï¼šå°½é‡ä¸è¦ä½¿ç”¨ NOT IN æˆ–è€… NOT EXISTSï¼Œç”¨LEFT JOIN xxx ON xx WHERE xx IS NULLæ›¿ä»£ï¼›\n3.3 æ’åºä¼˜åŒ–\nSQL ä¸­ï¼Œå¯ä»¥åœ¨ WHERE å­å¥å’Œ ORDER BY å­å¥ä¸­ä½¿ç”¨ç´¢å¼•ï¼Œç›®çš„æ˜¯åœ¨ WHERE å­å¥ä¸­ é¿å…å…¨è¡¨æ‰« æ ï¼Œåœ¨ ORDER BY å­å¥ é¿å…ä½¿ç”¨ FileSort æ’åº ã€‚å½“ç„¶ï¼ŒæŸäº›æƒ…å†µä¸‹å…¨è¡¨æ‰«æï¼Œæˆ–è€… FileSort æ’ åºä¸ä¸€å®šæ¯”ç´¢å¼•æ…¢ã€‚ä½†æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦é¿å…ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚\nå°½é‡ä½¿ç”¨ Index å®Œæˆ ORDER BY æ’åºã€‚å¦‚æœ WHERE å’Œ ORDER BY åé¢æ˜¯ç›¸åŒçš„åˆ—å°±ä½¿ç”¨å•ç´¢å¼•åˆ—ï¼› å¦‚æœä¸åŒå°±ä½¿ç”¨è”åˆç´¢å¼•ã€‚\næ— æ³•ä½¿ç”¨ Index æ—¶ï¼Œéœ€è¦å¯¹ FileSort æ–¹å¼è¿›è¡Œè°ƒä¼˜ã€‚\n\n3.4 GROUP BYä¼˜åŒ–group byä½¿ç”¨ç´¢å¼•çš„åŸåˆ™å‡ ä¹è·Ÿorder byä¸€è‡´ ï¼Œgroup byå³ä½¿æ²¡æœ‰è¿‡æ»¤æ¡ä»¶ç”¨åˆ°ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ç´¢å¼•ã€‚\n\ngroup by å…ˆæ’åºå†åˆ†ç»„ï¼Œéµç…§ç´¢å¼•å»ºçš„æœ€ä½³å·¦å‰ç¼€æ³•åˆ™ï¼›\nå½“æ— æ³•ä½¿ç”¨ç´¢å¼•åˆ—äº‹ï¼Œå¢å¤§ max_length_for_sort_data å’Œ sort_buffer_size å‚æ•°çš„è®¾ç½®ï¼›\nwhereæ•ˆç‡é«˜äºhavingï¼Œèƒ½å†™åœ¨whereé™å®šçš„æ¡ä»¶å°±ä¸è¦å†™åœ¨havingä¸­äº†ï¼\nå‡å°‘ä½¿ç”¨order byï¼Œå’Œä¸šåŠ¡æ²Ÿé€šèƒ½ä¸æ’åºå°±ä¸æ’åºï¼Œæˆ–å°†æ’åºæ”¾åˆ°ç¨‹åºç«¯å»åšã€‚Order byã€group byã€distinctè¿™äº›è¯­å¥è¾ƒä¸ºè€—è´¹CPUï¼Œæ•°æ®åº“çš„CPUèµ„æºæ˜¯æå…¶å®è´µçš„ã€‚\nåŒ…å«äº†order byã€group byã€distinctè¿™äº›æŸ¥è¯¢çš„è¯­å¥ï¼Œwhereæ¡ä»¶è¿‡æ»¤å‡ºæ¥çš„ç»“æœé›†è¯·ä¿æŒåœ¨1000è¡Œ ä»¥å†…ï¼Œå¦åˆ™SQLä¼šå¾ˆæ…¢ã€‚\n\n3.5 ç´¢å¼•è¦†ç›–è¿™ä¸€ç‚¹åœ¨ä¸Šæ–‡çš„å›è¡¨æŸ¥æ‰¾ä¸­å·²ç»æåŠäº†ï¼Œå³ä½¿ç”¨å¤åˆç´¢å¼•ï¼Œå¹¶å°†ä½ éœ€è¦æŸ¥è¯¢çš„ç›®æ ‡å­—æ®µä»¥æœ€å·¦åŒ¹é…åŸåˆ™è®¾ç½®åˆ°å¤åˆç´¢å¼•ä¸­ï¼Œå‡å°‘å›è¡¨æ“ä½œã€‚\nå½“ç„¶ï¼Œè¿™ä¾æ—§éœ€è¦éµå¾ªç´¢å¼•åˆ›å»ºçš„åŸåˆ™ï¼Œå³å¦‚æœæŸåˆ—æ•°æ®é‡å¤é‡è¿‡å¤šï¼Œåˆ™ä¸åº”è¯¥ä½œä¸ºç´¢å¼•åˆ—ï¼ˆå¦‚æœçœŸçš„éœ€è¦ï¼Œå¯ä»¥æ”¾åœ¨å¤åˆç´¢å¼•çš„æœ€åé¢ï¼Œè¿™æ ·èƒ½å‡å°‘ä»¥ä¹‹ä¸ºæŸ¥è¯¢åˆ¤æ®çš„åœºæ™¯ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘äº‹åŠ¡","url":"/posts/2200233148/","content":"å­¦ä¹ äº†ä¹‹åï¼Œä½ ä¼šå¯¹MySQLå¦‚ä½•è¿›è¡Œæ•°æ®çš„è®¿é—®æ§åˆ¶æœ‰æ›´æ·±åˆ»çš„äº†è§£ï¼›\n\n\næœ¬æ–‡ä¸­æœ‰å¤§é‡æˆªå›¾ï¼Œå¦‚æœå‡ºç°404çš„å›¾ç‰‡ï¼Œè¯·è¯„è®ºå‘ŠçŸ¥ï¼Œè°¢è°¢ï¼›\n1.ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ1.1 åœºæ™¯ä¸¾ä¾‹1.1.1 è½¬è´¦å½“Aéœ€è¦ç»™Bè½¬è´¦50å…ƒçš„æ—¶å€™ï¼Œåå°åº”è¯¥è¿›è¡Œå¦‚ä½•å¤„ç†ï¼Ÿ\n-- å…ˆåˆ¤æ–­ç”¨æˆ·è¿˜æœ‰å¤šå°‘ä½™é¢ï¼ˆè¿™é‡Œçš„user_id=Aåªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼ŒçŸ¥é“ä»€ä¹ˆæ„æ€å°±è¡Œï¼‰select money from user where user_id=A;-- å¦‚æœä½™é¢å……è¶³ï¼Œé‚£å°±ç»™Aæ‰£50update user set money = money - 50 where user_id=A;-- ç„¶åç»™BåŠ 50update user set money = money + 50 where user_id=B;\n\nè¿™ä¸€ä¸ªæ“ä½œï¼Œéœ€è¦3ä¸ªSQLè¯­å¥æ‰èƒ½å®Œæˆï¼Œä½†å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬å³ä¾¿åœ¨å½“å‰çš„æœåŠ¡å™¨ç«¯å¯¹è¿™3æ¡è¯­å¥çš„æ“ä½œè¿›è¡ŒåŠ é”ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•é¿å…å¦‚ä¸‹çš„æƒ…å†µ\n\næœåŠ¡å™¨è´Ÿè½½è¿‡é«˜ï¼Œè¿›ç¨‹è¢«killäº†\næœåŠ¡å™¨æ–­ç”µäº†\nMySQLæœåŠ¡å™¨æŠ½é£æŒ‚æ‰äº†\nç­‰ç­‰ä¸å¯æŠ—åŠ›\n\nè¿™æ—¶å€™ï¼Œå¦‚æœåœ¨æ‰§è¡Œç¬¬ä¸€æ¡æŸ¥è¯¢è¯­å¥åå°±æŒ‚æ‰äº†ï¼Œé‚£è¿˜ä¸ä¼šæœ‰å•¥é—®é¢˜ï¼›ä½†å¦‚æœæ˜¯åœ¨æ‰§è¡Œå®Œæ¯•ç¬¬äºŒæ¡æ‰£é’±çš„è¯­å¥ä¹‹åæŒ‚æ‰äº†ï¼Œé‚£é—®é¢˜å°±å¤§äº†ï¼\n\nAç»™Bè½¬é’±ï¼ŒAçš„é’±æ‰£äº†ï¼ŒBçš„é’±æ²¡æœ‰åŠ ï¼Œè¿™æ€ä¹ˆå¯ä»¥ï¼Ÿ\n\næœ€ç»ˆè¿˜éœ€è¦ç¨‹åºå‘˜é€šè¿‡MySQLçš„æ—¥å¿—ä¸€ä¸ªä¸ªæ ¸å¯¹åˆ°åº•æ˜¯è°å‡ºç°äº†è¿™æ ·çš„æƒ…å†µï¼Œç»™äººå®¶æŠŠé’±åŠ å›å»ï¼Œé‚£å¤ªè¿‡éº»çƒ¦ï¼›åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œè¿™ç§å·¥ä½œæ›´æ˜¯ä¸åº”è¯¥ç”±äººå·¥æ‰‹åŠ¨å®Œæˆçš„ï¼\næ‰€ä»¥ï¼ŒMySQLå°±éœ€è¦æä¾›ä¸€ç§æ–¹æ³•ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå®ç°ç±»ä¼¼åŸå­æ€§çš„æ“ä½œã€‚åœ¨æ‰§è¡Œè¿™3æ¡è¯­å¥çš„æ—¶å€™ï¼Œåªèƒ½å‡ºç°ä¸¤ç§æƒ…å†µï¼š\n\næˆåŠŸæ‰§è¡Œï¼ŒAæ‰£äº†é’±ï¼ŒBä¹ŸåŠ äº†é’±ï¼Œè½¬è´¦æˆåŠŸï¼›\næ‰§è¡Œå¤±è´¥ï¼Œä½†æ˜¯Aå’ŒBçš„é’±éƒ½æ²¡æœ‰å˜åŒ–ï¼Œå¹¶å‘ŠçŸ¥ç”¨æˆ·è½¬è´¦å¤±è´¥ï¼›\n\nè¿™æ ·æ‰æ˜¯é è°±çš„ç»“æœï¼\n1.1.2 å–ç¥¨å¦å¤–ä¸€ä¸ªåœºæ™¯å°±æ˜¯å–ç¥¨ï¼Œå…¶ä¹ŸåŒ…å«äº†å¤šæ¡SQL\nselect * from ticket where tid=?; -- æŸ¥è¯¢æŸæŸè½¦æ¬¡é«˜é“çš„ç¥¨è¿˜æœ‰æ²¡æœ‰ä½™é‡-- æœ‰ä½™é‡ï¼Œè¿›è¡Œå”®å–æµç¨‹ï¼›è¿™é‡Œå¯èƒ½è¦æ“ä½œå¦å¤–ä¸€å¼ è¡¨æ¥æ·»åŠ ä¹°ç¥¨è€…çš„ç”¨æˆ·ä¿¡æ¯update ticket set num=num-1 where tid=?; -- å”®å–æµç¨‹ç»“æŸï¼Œæ‰£å»è¿™å¼ ç¥¨\n\nå¦‚æœæœ‰ä¸¤ä¸ªå®¢æˆ·ç«¯éƒ½åŒæ—¶æ¥æ‰§è¡Œè¿™ä¸¤æ¡SQLè¯­å¥ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°é—®é¢˜ï¼›\n\nåªå‰©ä¸€å¼ ç¥¨\nå®¢æˆ·ç«¯Aè¿›è¡ŒæŸ¥è¯¢ï¼Œå‘ç°æœ‰ç¥¨ï¼Œå¼€å§‹æ‰§è¡Œå–ç¥¨æµç¨‹\nå®¢æˆ·ç«¯Bè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹Ÿå‘ç°æœ‰ç¥¨ï¼Œå¼€å§‹æ‰§è¡Œå–ç¥¨æµç¨‹\næ­¤æ—¶Aæ‰§è¡Œå®Œæ¯•ï¼Œå°†ç¥¨çš„æ•°é‡-1ï¼Œå–å®Œç¥¨äº†ï¼›\néšåBæ‰§è¡Œå®Œæ¯•ï¼Œä¹Ÿå°†ç¥¨çš„æ•°é‡-1ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°ç¥¨æ•°æ˜¯è´Ÿæ•°çš„æƒ…å†µï¼\næ›´éš¾å—çš„æ˜¯ï¼ŒåŒä¸€å¼ ç¥¨è¢«é”™è¯¯åœ°å–ç»™äº†ä¸¤ä¸ªç”¨æˆ·ï¼\n\nè¿™æ—¶å€™åœ¨å®¢æˆ·ç«¯é‡Œé¢åŠ é”æ˜¯ä¸é¡¶ç”¨çš„ï¼Œä¸¤ä¸ªå®¢æˆ·ç«¯éƒ½ä¸æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼Œé”æ— æ³•å…±äº«ï¼›éœ€è¦MySQLè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±è¿˜å¾—æä¾›æ›´åŠ ä¸¥æ ¼çš„è®¿é—®æ§åˆ¶ï¼Œåœ¨Aæ²¡æœ‰å®Œæˆæ•´ä¸ªå–ç¥¨é€»è¾‘ï¼Œç¥¨æ•°æ²¡æœ‰æ‰£æ‰çš„æƒ…å†µä¸‹ï¼ŒBä¸å¯ä»¥æ¥æŸ¥è¯¢ç¥¨æ•°ï¼›\n1.2 äº‹åŠ¡çš„ä»‹ç» ACIDäº‹åŠ¡ï¼ˆtransactionï¼‰å°±æ˜¯ä¸€ç»„DMLè¯­å¥çš„é›†åˆï¼Œè¿™äº›è¯­å¥åœ¨é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªæ•´ä½“ï¼›æ‰§è¡Œè¿™ç»„è¯­å¥ï¼Œå¿…é¡»å…¨éƒ¨æˆåŠŸï¼Œäº¦æˆ–è€…æ˜¯å…¨éƒ¨å¤±è´¥ã€‚\n\nåœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶å‘æ§åˆ¶çš„åŸºæœ¬å•ä½æ˜¯äº‹åŠ¡ã€‚\n\nåœ¨æ‰§è¡Œè¿™ç»„SQLçš„æ—¶å€™ï¼ŒMySQLéœ€è¦å°†å…¶è§†ä½œä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼›è¿™ä¸ªæ“ä½œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡æ‰“æ–­ï¼Œå‡ºç°é—®é¢˜çš„æ—¶å€™è¿˜éœ€è¦å›æ»šåˆ°å¼€å§‹æ‰§è¡Œä¹‹å‰çš„åˆå§‹çŠ¶æ€ï¼›äº‹åŠ¡è¿˜èƒ½ä½¿ä¸åŒå®¢æˆ·ç«¯çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸åŒçš„ï¼Œä¸åŒäº‹åŠ¡ä¹‹é—´çš„æ“ä½œä¸ä¼šç›¸äº’å½±å“ï¼›åªæœ‰äº‹åŠ¡ç»“æŸåï¼ŒåŒæ–¹æ‰èƒ½çœ‹åˆ°å¯¹æ–¹çš„æ“ä½œï¼ˆæ ¹æ®éš”ç¦»çº§åˆ«ä¸åŒï¼Œè¿™ç‚¹ä¹Ÿä¼šæœ‰åŒºåˆ«ï¼‰ï¼›\næ­£å¦‚ä¸Šé¢çš„ä¸¤ä¸ªåœºæ™¯æ‰€æåˆ°çš„æ“ä½œï¼ŒåŒä¸€ä¸ªæ—¶åˆ»å¯¹äºMySQLçš„ä¸€ä¸ªæ•°æ®åº“æ¥è¯´ï¼Œå…¶å¯èƒ½æœ‰å¤šä¸ªå®¢æˆ·ç«¯è¿›è¡Œä¸åŒä¸šåŠ¡çš„æ“ä½œï¼Œå¦‚æœéƒ½åœ¨è®¿é—®åŒä¸€ä¸ªè¡¨ï¼Œåœ¨ä¸åŠ è®¿é—®æ§åˆ¶çš„æƒ…å†µä¸‹ï¼Œä¸€å®šä¼šå‡ºç°è®¿é—®ä¸´ç•Œèµ„æºçš„æ•°æ®äºŒä¹‰æ€§é—®é¢˜ã€‚\n\näº‹åŠ¡çš„å‡ºç°ï¼Œæ˜¯å®¢æˆ·ç«¯åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸‹çš„éœ€è¦ï¼Œ\n\næ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„äº‹åŠ¡ï¼Œé™¤äº†æ˜¯å¤šæ¡DMLè¯­å¥çš„é›†åˆï¼Œè¿˜éœ€è¦æ»¡è¶³ä¸‹é¢4ä¸ªç‰¹æ€§\n\nåŸå­æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼›å¦‚æœäº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç°é”™è¯¯ï¼Œé‚£å°±éœ€è¦å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„çŠ¶æ€ï¼Œå°±å¥½æ¯”è¿™ä¸ªäº‹åŠ¡å¹¶æ²¡æœ‰æ‰§è¡Œè¿‡ä¸€èˆ¬\nä¸€è‡´æ€§ï¼šäº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œç»“æŸåï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿›è¡Œçš„æ“ä½œå¤åˆæˆ‘ä»¬é¢„è®¾çš„è¦æ±‚ï¼›è¿™åŒ…å«æ•°æ®çš„å‡†ç¡®åº¦ã€ä¸²è”æ€§ä»¥åŠåç»­æ•°æ®åº“å¯ä»¥è‡ªå‘å®Œæˆé¢„å®šçš„å·¥ä½œï¼›\néš”ç¦»æ€§ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡ŒCURDæ“ä½œï¼Œéš”ç¦»æ€§ä¿è¯è¿™äº›äº‹åŠ¡ä¹‹é—´çš„æ“ä½œå¹¶ä¸ä¼šç”±äºå¹¶å‘çš„äº¤å‰è¿è¡Œè€Œå‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µã€‚äº‹åŠ¡éš”ç¦»æ€§åˆ†ä¸ºä¸åŒçº§åˆ«ï¼Œå…·ä½“çš„åŒºåˆ«ä¼šåœ¨åæ–‡è¯¦è§£\nè¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰\nè¯»å·²æäº¤ï¼ˆRead Committedï¼‰\nå¯é‡å¤è¯»ï¼ˆRepeatble Readï¼‰\nä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰\n\n\næŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†å®Œæ¯•åï¼Œå¯¹äº‹åŠ¡çš„ä¿®æ”¹æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿå®•æœºäº†ä¹Ÿä¸ä¼šä¸¢å¤±ï¼ˆé™¤éç¡¬ç›˜åäº†ï¼‰\n\nä¸Šé¢çš„å››ä¸ªå±æ€§ï¼Œç®€ç§°ä¸ºACIDï¼›\nåŸå­æ€§ï¼ˆAtomicityï¼Œæˆ–ç§°ä¸å¯åˆ†å‰²æ€§ï¼‰ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰éš”ç¦»æ€§ï¼ˆIsolationï¼Œåˆç§°ç‹¬ç«‹æ€§ï¼‰æŒä¹…æ€§ï¼ˆDurabilityï¼‰\n\nå…¶ä¸­ï¼Œä¸€è‡´æ€§æ˜¯ç”±åŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§æ¥ä¿è¯çš„ï¼Œåªè¦æ»¡è¶³äº†è¿™ä¸‰ä¸ªæ€§è´¨ï¼Œè‡ªç„¶èƒ½å®ç°ä¸€è‡´æ€§ã€‚ç®€å•è®°å¿†ï¼ŒAIDæ¥ä¿è¯Cï¼›å¦å¤–è¿˜æœ‰ä¸ªçŸ¥è¯†ç‚¹ï¼šæ•°æ®åº“çš„å®Œæ•´æ€§æ˜¯æŒ‡æ•°æ®çš„æ­£ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚\n1.3 äº‹åŠ¡çš„å­˜å‚¨å¼•æ“æ”¯æŒåœ¨MySQLä¸­ï¼Œåªæœ‰Innodbæ”¯æŒäº‹åŠ¡ï¼ŒMyISAMæ˜¯ä¸æ”¯æŒäº‹åŠ¡çš„ï¼›\næˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹è¯­å¥æ¥æŸ¥è¯¢MySQLçš„å¼•æ“å’Œæ”¯æŒçš„ç‰¹æ€§\nMariaDB [hello_mysql]&gt; show engines \\G*************************** 1. row ***************************      Engine: MEMORY     Support: YES     Comment: Hash based, stored in memory, useful for temporary tablesTransactions: NO          XA: NO  Savepoints: NO*************************** 2. row ***************************      Engine: MRG_MyISAM     Support: YES     Comment: Collection of identical MyISAM tablesTransactions: NO          XA: NO  Savepoints: NO*************************** 3. row ***************************      Engine: CSV     Support: YES     Comment: Stores tables as CSV filesTransactions: NO          XA: NO  Savepoints: NO*************************** 4. row ***************************      Engine: BLACKHOLE     Support: YES     Comment: /dev/null storage engine (anything you write to it disappears)Transactions: NO          XA: NO  Savepoints: NO*************************** 5. row ***************************      Engine: MyISAM     Support: YES     Comment: Non-transactional engine with good performance and small data footprintTransactions: NO          XA: NO  Savepoints: NO*************************** 6. row ***************************      Engine: ARCHIVE     Support: YES     Comment: gzip-compresses tables for a low storage footprintTransactions: NO          XA: NO  Savepoints: NO*************************** 7. row ***************************      Engine: FEDERATED     Support: YES     Comment: Allows to access tables on other MariaDB servers, supports transactions and moreTransactions: YES          XA: NO  Savepoints: YES*************************** 8. row ***************************      Engine: PERFORMANCE_SCHEMA     Support: YES     Comment: Performance SchemaTransactions: NO          XA: NO  Savepoints: NO*************************** 9. row ***************************      Engine: SEQUENCE     Support: YES     Comment: Generated tables filled with sequential valuesTransactions: YES          XA: NO  Savepoints: YES*************************** 10. row ***************************      Engine: InnoDB     Support: DEFAULT -- é»˜è®¤å¼•æ“     Comment: Supports transactions, row-level locking, foreign keys and encryption for tables -- æè¿°Transactions: YES  -- æ”¯æŒäº‹åŠ¡          XA: YES    Savepoints: YES  -- æ”¯æŒäº‹åŠ¡ä¸­çš„ä¿å­˜ç‚¹*************************** 11. row ***************************      Engine: Aria     Support: YES     Comment: Crash-safe tables with MyISAM heritageTransactions: NO          XA: NO  Savepoints: NO11 rows in set (0.000 sec)\n\n1.4 ä¿å­˜ç‚¹æ‰€è°“ä¿å­˜ç‚¹ï¼Œå°±æ˜¯åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç»™å½“å‰çš„æ•°æ®è®¾ç½®ä¸€ä¸ªsavepointï¼Œè¿™æ ·åœ¨å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥å›é€€åˆ°å½“å‰çš„æ•°æ®ä¸­ï¼›å°±å¥½æ¯”ä¹‹åçš„æ“ä½œæ²¡æœ‰è¿›è¡Œä¸€æ ·ï¼›\næ¸¸æˆä¸­çš„ä¿å­˜ç‚¹å…¶å®ä¹Ÿæ˜¯è¿™æ ·çš„åŠŸèƒ½ï¼Œè®©ç©å®¶å›é€€åˆ°æ‰“æŸä¸ªBOSSä¹‹å‰ï¼ŒåŒ…æ‹¬å½“æ—¶ä½ æ”¶é›†çš„ææ–™ï¼Œéƒ½ä¼šå›é€€åˆ°æ‰“è¿™ä¸ªBOSSä¹‹å‰çš„çŠ¶æ€ï¼›\nä½ å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯ç»™å½“å‰çš„æ•°æ®æ‹äº†å¼ ç…§ç‰‡ï¼Œå‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œç”¨è¿™ä¸ªç…§ç‰‡é‡Œé¢çš„ä¸œè¥¿å¤å†™æ‰æ–°çš„ä¸œè¥¿ã€‚è¿™ä¾¿æ˜¯ä¿å­˜ç‚¹çš„ä½œç”¨ï¼›\n1.5 åŸºç¡€å‘½ä»¤æ“ä½œå…ˆæä¸€ä¸‹äº‹åŠ¡çš„å¼€å¯å’Œç»“æŸæ–¹å¼ï¼Œä»¥åŠå¦‚ä½•è®¾ç½®ä¿å­˜ç‚¹å’Œå›æ»šå§\n-- å¼€å¯ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯ä¸€æ ·çš„begin;start transaction;-- è®¾ç½®ä¿å­˜ç‚¹ï¼ˆåå­—å¯ä»¥è‡ªç”±æ›´æ”¹ï¼Œä½†ä¸èƒ½æœ‰é‡å¤ï¼‰savepoint save1; -- åˆ›å»ºä¸€ä¸ªä¿å­˜ç‚¹save1-- äº‹åŠ¡å›æ»šrollback to save1; -- å›æ»šåˆ°ä¿å­˜ç‚¹save1rollback; -- å›æ»šåˆ°äº‹åŠ¡å¼€å§‹-- ç»“æŸcommit; -- æäº¤äº‹åŠ¡\n\n2.ä½¿ç”¨äº†è§£äº†äº‹åŠ¡ä¸ºä»€ä¹ˆå­˜åœ¨ï¼Œä¸‹é¢å°±æ˜¯æ¥ä½¿ç”¨ä¸€ä¸‹äº‹åŠ¡äº†ï¼›\n2.1 æäº¤æ–¹å¼äº‹åŠ¡çš„æäº¤æ–¹å¼æœ‰ä¸¤ç§æ–¹å¼\n\nè‡ªåŠ¨æäº¤\næ‰‹åŠ¨æäº¤\n\né»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLçš„è‡ªåŠ¨æäº¤æ˜¯å¤„äºå¼€å¯çŠ¶æ€çš„\nMariaDB [hello_mysql]&gt; show variables like &#x27;autocommit&#x27;;+---------------+-------+| Variable_name | Value |+---------------+-------+| autocommit    | ON    |+---------------+-------+1 row in set (0.001 sec)\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æ¥è®¾ç½®æ˜¯å¦å¼€å¯è‡ªåŠ¨æäº¤ï¼ˆåªå¯¹å½“å‰ä¼šè¯ç”Ÿæ•ˆï¼‰\nset autocommit = 0; -- å…³é—­è‡ªåŠ¨æäº¤set autocommit = 1; -- å¼€å¯\n\nè¿™ä¸¤ä¸ªæäº¤æ–¹å¼æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¼€äº†è‡ªåŠ¨æäº¤å°±ä»€ä¹ˆéƒ½ä¸ç”¨ç®¡äº†ï¼Ÿåæ–‡æˆ‘ä»¬å†é€šè¿‡å®æµ‹æ¥è¯´æ˜ï¼›\n2.2 åœºæ™¯æ¼”ç¤ºæœ€å¼€å§‹æµ‹è¯•çš„æ—¶å€™ï¼Œå…ˆå°†äº‹åŠ¡éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºè¯»æœªæäº¤ï¼›è¯·æ³¨æ„ï¼Œä¸è¦åœ¨æœ‰ç”Ÿäº§ç¯å¢ƒçš„MySQLä¸­è¿›è¡Œæ­¤é¡¹æ“ä½œï¼›\n-- è®¾ç½®å…¨å±€éš”ç¦»çº§åˆ«ä¸ºè¯»æœªæäº¤set global transaction isolation level READ UNCOMMITTED; -- é‡å¯mysqlç»ˆç«¯åæŸ¥çœ‹éš”ç¦»çº§åˆ«select @@tx_isolation; +------------------+| @@tx_isolation   |+------------------+| READ-UNCOMMITTED |   -- æˆåŠŸè®¾ç½®è¯»æœªæäº¤çš„éš”ç¦»çº§çº§åˆ«+------------------+1 row in set (0.000 sec)\n\n2.2.1 æ•°æ®å›æ»šæ¼”ç¤ºè®¾ç½®å®Œæ¯•åï¼Œè¿›å…¥æµ‹è¯•æ•°æ®åº“ï¼Œåˆ›å»ºå¦‚ä¸‹æµ‹è¯•è¡¨\ncreate table test_ruc(\tid int unsigned primary key,\tuser_id int unsigned not null,    name varchar(30) not null);\n\nå…ˆç»™è¡¨é‡Œé¢æ’å…¥å‡ ä¸ªåŸºæœ¬çš„æ•°æ®ï¼š\ninsert into test_ruc values (1,10,&#x27;æå&#x27;),(2,20,&#x27;ç‹äº”&#x27;);\n\næ’å…¥åï¼Œæˆ‘ä»¬åœ¨ä¸¤ä¾§çš„ç»ˆç«¯ä¸­éƒ½å¯ä»¥çœ‹åˆ°å·²æœ‰çš„æ•°æ®\n\néšååœ¨ä¸¤ä¸ªç»ˆç«¯ä¸­éƒ½å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå·¦ä¾§ç»ˆç«¯æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œå³ä¾§ç»ˆç«¯æŸ¥çœ‹\ninsert into test_ruc values (3,30,&#x27;å·¦ä¾§ç»ˆç«¯æ’å…¥&#x27;);\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¾§çš„ç»ˆç«¯éƒ½å¯ä»¥çœ‹åˆ°è¿™ä»½æ•°æ®\n\næ­¤æ—¶å°†å·¦ä¾§ç»ˆç«¯å¼ºåˆ¶é€€å‡ºï¼ˆä½¿ç”¨CTRL+\\ï¼‰ï¼Œå³ä¾§å†æ¬¡æŸ¥è¯¢ï¼Œä¼šå‘ç°æ–°æ’å…¥çš„æ•°æ®æ²¡æœ‰äº†ï¼›è¿™é‡Œä¾¿æ˜¯äº‹åŠ¡çš„åŸå­æ€§çš„ä½“ç°ï¼Œå·¦ä¾§çš„ç»ˆç«¯æ‰€æ‰§è¡Œçš„äº‹åŠ¡æ²¡æœ‰commitå°±å› ä¸ºå¼‚å¸¸é€€å‡ºäº†ï¼ŒMySQLè‡ªåŠ¨å°†æ•°æ®å›æ»šåˆ°äº†è¿™ä¸ªäº‹åŠ¡æ‰§è¡Œä¹‹å‰ï¼Œå³æ²¡æœ‰æ’å…¥è¿™ä»½æ–°æ•°æ®ï¼›\n\nå·¦ä¾§é‡æ–°é“¾æ¥MySQLï¼Œå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼›åœ¨å³ä¾§æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œéšååˆ›å»ºä¿å­˜ç‚¹save1ï¼›æ’å…¥ç¬¬äºŒä¸ªæ•°æ®ï¼Œåˆ›å»ºä¿å­˜ç‚¹save2ï¼›\nåœ¨å·¦ä¾§æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å³ä¾§æ’å…¥çš„ä¸¤æ¡æ–°æ•°æ®ï¼›\n\nåœ¨å³ä¾§å›æ»šåˆ°ä¿å­˜ç‚¹save1ï¼Œä¼šå‘ç°æ’å…¥çš„æ•°æ®2æ²¡æœ‰äº†ï¼›è¿™ä¸ä¿å­˜ç‚¹çš„é¢„æœŸæ“ä½œç›¸ç¬¦åˆï¼›\n\nå°†å³ä¾§ç»ˆç«¯å¼ºåˆ¶é€€å‡ºï¼Œå†æ¬¡æŸ¥è¯¢æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡æ’å…¥çš„æ•°æ®ä¹Ÿæ²¡æœ‰äº†ï¼Œæ•°æ®åˆå›åˆ°äº†å³ä¾§ç»ˆç«¯äº‹åŠ¡å¼€å§‹ä¹‹å‰çš„æ ·å­ã€‚\n\nè¿™é‡Œèƒ½å¾—å‡ºä¸€ä¸ªç»“è®ºï¼šå¦‚æœç»ˆç«¯å¼‚å¸¸é€€å‡ºï¼ŒMySQLä¼šå°†æ•°æ®å›æ»šåˆ°äº‹åŠ¡å¼€å§‹æ—¶ï¼›ä½ å¯ä»¥ç†è§£ä¸ºï¼Œæˆ‘ä»¬ä½¿ç”¨begin;çš„æ—¶å€™å°±å·²ç»åˆ›å»ºäº†ä¸€ä¸ªéšè—çš„ä¿å­˜ç‚¹ï¼ŒMySQLåœ¨å¼‚å¸¸çš„æ—¶å€™åªä¼šå°†æ•°æ®å›é€€åˆ°è¿™ä¸ªäº‹åŠ¡å¼€å§‹ä¹‹æ—¶çš„éšè—ä¿å­˜ç‚¹ï¼Œæ— è®ºä¸­é€”ç”¨æˆ·æœ‰æ²¡æœ‰è®¾ç½®å…¶ä»–ä¿å­˜ç‚¹ï¼\nå³ï¼šåœ¨å¼‚å¸¸é€€å‡ºçš„æ—¶å€™ï¼ŒMySQLä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰§è¡Œrollbackå‘½ä»¤å›é€€åˆ°äº‹åŠ¡å¼€å¤´ï¼\nrollback; -- å›é€€åˆ°äº‹åŠ¡å¼€å¤´\n\nè¿™æ ·å°±èƒ½é¿å…æœ€å¼€å§‹æåˆ°çš„ï¼Œè½¬è´¦ç³»ç»Ÿä¸­ç»™Aæ‰£äº†é’±ä½†æ˜¯æ²¡æœ‰ç»™BåŠ é’±çš„é—®é¢˜ï¼\n2.2.2 æ•°æ®æŒä¹…åŒ–æ¼”ç¤ºæ¥ç€æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œå¦‚æœæ‰§è¡Œäº†commitä¹‹ååˆä¼šæ˜¯ä»€ä¹ˆæƒ…å†µï¼›\nå³ä¾§æäº¤äº†äº‹åŠ¡åé€€å‡ºï¼Œå·¦ä¾§ä¾æ—§èƒ½æŸ¥è¯¢å€’å·²ç»æäº¤çš„æ•°æ®ã€‚ä»£è¡¨æ•°æ®å·²ç»è¢«æŒä¹…åŒ–å†™å…¥åˆ°äº†ç£ç›˜ï¼ˆå½“ç„¶è¿™ä¸ªæ—¶å€™ä¹Ÿä¸ä¸€å®šç«‹åˆ»åˆ·ç›˜äº†ï¼Œä½†æ˜¯è¿™å·²ç»èƒ½ä»£è¡¨MySQLå°†æˆ‘ä»¬çš„æ•°æ®åŠ å…¥åˆ°äº†æŒä¹…åŒ–ç­–ç•¥ä¸­ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬ç®¡å•¥æ—¶å€™åˆ·ç›˜çš„é—®é¢˜ï¼ï¼‰\n\n2.2.3 è‡ªåŠ¨æäº¤å‰é¢æåˆ°äº†ï¼ŒMySQLçš„è‡ªåŠ¨æäº¤é»˜è®¤æ˜¯å¼€å¯çš„ï¼›é‚£ä¹ˆè¿™ä¸ªè‡ªåŠ¨æäº¤æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¼€å¯äº†è‡ªåŠ¨æäº¤ï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºäº‹åŠ¡äº†ï¼Ÿ\nå¹¶ä¸æ˜¯ï¼åœ¨ä¹‹å‰çš„æµ‹è¯•ä¸­ï¼Œautocommitæ˜¯å¼€å¯çš„ï¼›æˆ‘ä»¬å·²ç»è¯æ˜äº†ï¼Œæ‰‹åŠ¨beginåˆ›å»ºçš„äº‹åŠ¡ï¼Œåœ¨æ²¡æœ‰æ‰‹åŠ¨commitçš„æ—¶å€™ä¸ä¼šè¢«å†™å…¥ç£ç›˜ï¼ˆä¸è¿›è¡ŒæŒä¹…åŒ–ï¼‰ï¼›è¿™ä»£è¡¨æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„äº‹åŠ¡ï¼Œä¸ä¼šå—åˆ°autocommitæ˜¯å¦å¼€å…³çš„å½±å“ï¼›ï¼ˆå¼€ç€çš„æ—¶å€™éƒ½æ²¡æœ‰è‡ªåŠ¨æäº¤ï¼Œå…³é—­çš„æ—¶å€™è‚¯å®šæ›´ä¸ä¼šè‡ªåŠ¨æäº¤äº†ï¼‰\n\né‚£ä¹ˆè¿™ä¸ªautocommitä¼šå½±å“è°å‘¢ï¼Ÿ\n\nå¼€å¯ä¸¤ä¸ªç»ˆç«¯ï¼Œå·¦ä¾§å°†è‡ªåŠ¨æäº¤å…³é—­ï¼Œéšåæ’å…¥ä¸€ä¸ªæ•°æ®ï¼›æ’å…¥åä¼šå‘ç°å³ä¾§çœ‹ä¸åˆ°å·¦ä¾§æ–°æ’å…¥çš„æ•°æ®ï¼\n\nå¤‡æ³¨ï¼šset autocommit = 0;è¯­å¥åªä¼šå½±å“å½“å‰ç»ˆç«¯ï¼Œä¸ä¼šå½±å“å¦å¤–çš„ç»ˆç«¯ã€‚\n\n\næ­¤æ—¶æ‰‹åŠ¨è¿›è¡Œcommitï¼Œå³ä¾§å°±çœ‹å¾—åˆ°æ•°æ®äº†ï¼\n\nè€Œå¦‚æœæˆ‘ä»¬ä¸æ‰‹åŠ¨æ‰§è¡Œcommitå°±æŠŠå·¦ä¾§ç»ˆç«¯CTRL+\\é€€å‡ºï¼Œé‚£ä¹ˆæ–°æ’å…¥çš„è¿™ä¸€æ¡æ•°æ®ä¼šä¸¢å¤±ï¼\n2.2.4 å•æ¡SQLå’Œäº‹åŠ¡çš„å…³ç³»æ¬¸ï¼Ÿæˆ‘ä»¬æ˜æ˜æ²¡æœ‰beginå¼€å¯äº‹åŠ¡ï¼Œä¸ºä»€ä¹ˆå¯ä»¥æ‰§è¡Œcommitå‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºï¼Œåœ¨MySQLä¸­ï¼Œæ¯ä¸€ä¸ªä¸ä¸»åŠ¨ä½¿ç”¨äº‹åŠ¡çš„å•æ¡SQLè¯­å¥ï¼Œéƒ½ä¼šè§†ä½œä¸€ä¸ªäº‹åŠ¡è¿›è¡Œæ“ä½œï¼æ—¢æˆ‘ä»¬ä¹‹å‰æ²¡å­¦ä¹ äº‹åŠ¡æ—¶ï¼Œæ‰§è¡Œçš„æ‰€æœ‰å•æ¡SQLä¹Ÿæ˜¯ä¸€ä¸ªä¸ªå„è‡ªç‹¬ç«‹çš„äº‹åŠ¡ï¼\nçŸ¥é“äº†è¿™ä¸€ç‚¹ï¼Œä½ å°±èƒ½ç†è§£è‡ªåŠ¨æäº¤çš„ä½œç”¨äº†ï¼šåœ¨æ‰§è¡Œå•æ¡SQLçš„æ—¶å€™ï¼Œæ˜¯å¦è‡ªåŠ¨æäº¤è¯¥SQLè¯­å¥çš„äº‹åŠ¡ã€‚\nå°†autocommité‡æ–°å¼€å¯ï¼Œå†è¿›è¡Œæµ‹è¯•ï¼›ä¼šå‘ç°å·¦ä¾§æ’å…¥çš„æ•°æ®å³ä¾§å¯ä»¥ç«‹é©¬çœ‹åˆ°ï¼Œæ— éœ€æ‰‹åŠ¨commitã€‚è¿™ä¾¿æ˜¯è‡ªåŠ¨æäº¤çš„ä½œç”¨çš„ä½“ç°ï¼\n\n2.3 ç»“è®ºç»è¿‡ä¸Šé¢çš„è¿™äº›ç®€å•æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°äº‹åŠ¡çš„åŸå­æ€§å’ŒæŒä¹…æ€§ï¼Œåšä¸€ä¸ªæ€»ç»“\n\nè¾“å…¥äº†begin/start transactionæ‰‹åŠ¨åˆ›å»ºçš„äº‹åŠ¡ï¼Œå¿…é¡»é€šè¿‡commitæ‰‹åŠ¨æŒ¡æäº¤ï¼Œæ‰ä¼šæŒä¹…åŒ–ï¼›è¿™ä¸€ç‚¹å’Œautocommitæ— å…³ï¼\näº‹åŠ¡å¯ä»¥è®¾ç½®ä¿å­˜ç‚¹å’Œæ‰‹åŠ¨å›æ»šï¼Œå‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼ŒMySQLä¼šè‡ªåŠ¨å›é€€åˆ°äº‹åŠ¡å¼€å¤´ï¼›\nå¯¹äºInnoDBå­˜å‚¨å¼•æ“è€Œè¨€ï¼Œæ‰€æœ‰çš„å•æ¡SQLè¯­å¥éƒ½ä¼šè¢«è§†ä½œä¸€ä¸ªäº‹åŠ¡ï¼Œè‡ªåŠ¨æäº¤ï¼›\nselectè¯­å¥ä¼šæœ‰ä¸€äº›å·®åˆ«ï¼Œå› ä¸ºMySQLæœ‰MVCCè®¿é—®æ§åˆ¶ï¼ˆåæ–‡è®²è§£ï¼‰\n\næ“ä½œäº‹åŠ¡çš„ä¸€äº›æ³¨æ„äº‹é¡¹\n\nåªæœ‰InnoDBæ‰æ”¯æŒäº‹åŠ¡ï¼ŒMyISAMä¸æ”¯æŒ;\nä¸€ä¸ªäº‹åŠ¡è¢«æäº¤äº†ä¹‹åï¼Œä¸å¯ä»¥æ‰§è¡Œrollback;\nåˆ›å»ºäº†ä¿å­˜ç‚¹åï¼Œå¯ä»¥é€‰æ‹©å›é€€åˆ°å“ªä¸€ä¸ªä¿å­˜ç‚¹ï¼Œäº¦æˆ–è€…æ˜¯å›é€€åˆ°äº‹åŠ¡å¼€å¤´ï¼›\n\n3.äº‹åŠ¡éš”ç¦»çº§åˆ«3.1 åŸºæœ¬è¯´æ˜äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å’Œäº‹åŠ¡çš„éš”ç¦»æ€§æ¯æ¯ç›¸å…³\n\nMySQLçš„å•ä¸ªæ•°æ®åº“å¯èƒ½è¢«å¤šä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹åŒæ—¶è¿›è¡Œè®¿é—®å’Œäº‹åŠ¡æ“ä½œï¼›\nä¸€ä¸ªäº‹åŠ¡æ˜¯ç”±å¤šä¸ªSQLè¯­å¥ç»„æˆçš„ï¼Œä»»ä½•ä¸€ä¸ªäº‹åŠ¡ï¼Œéƒ½ä¼šå­˜åœ¨æ‰§è¡Œå‰&#x2F;ä¸­&#x2F;åçš„é˜¶æ®µã€‚æ‰€è°“åŸå­æ€§ï¼Œå°±æ˜¯MySQLè¦ä¿è¯å„ä¸ªå®¢æˆ·ç«¯è¦ä¹ˆåªèƒ½çœ‹åˆ°äº‹åŠ¡æ‰§è¡Œå‰æˆ–è€…æ‰§è¡Œåçš„æ•°æ®ï¼›æ‰§è¡Œä¸­çš„äº‹åŠ¡ï¼Œå¯¹äºå…¶ä»–ç”¨æˆ·æ¥çœ‹æ˜¯åŸå­çš„ï¼Œå‡ºç°å¼‚å¸¸ä¼šè¢«è‡ªåŠ¨å›æ»šï¼›\nä½†äº‹åŠ¡æ¯•ç«Ÿè¿˜æ˜¯å­˜åœ¨æ‰§è¡Œä¸­çš„æ¦‚å¿µï¼Œå…¶ä»–å®¢æˆ·ç«¯æ˜¯æœ‰å¯èƒ½çœ‹åˆ°æŸä¸ªäº‹ç‰©æ‰§è¡Œä¸­çš„çŠ¶æ€çš„ï¼Œè¿™å°±éœ€è¦éš”ç¦»æ€§æ¥ä»‹å…¥äº†ï¼›\néš”ç¦»æ€§ï¼šä¿è¯äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å°½é‡ä¸å—å¹²æ‰°ï¼›\néš”ç¦»çº§åˆ«ï¼šå…è®¸äº‹åŠ¡å—ä¸åŒç¨‹åº¦çš„å¹²æ‰°ï¼›\n\nå¼€å¤´å°±æåˆ°äº†ï¼ŒMySQLçš„äº‹åŠ¡æœ‰4ç§éš”ç¦»çº§åˆ«\n\nè¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ï¼šåœ¨è¿™ä¸ªéš”ç¦»çº§åˆ«ä¸­ï¼Œæ‰€æœ‰äº‹åŠ¡éƒ½å¯ä»¥çœ‹åˆ°å…¶ä»–äº‹ç‰©è¿˜æ²¡æœ‰æäº¤çš„å†…å®¹ï¼ˆä½ å¯ä»¥ç†è§£ä¸ºå‹æ ¹æ²¡æœ‰éš”ç¦»æ€§ï¼Œä¹‹å‰çš„æµ‹è¯•ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªéš”ç¦»çº§åˆ«ï¼‰è¿™ç§æƒ…å†µä¸‹å°±å®¹æ˜“å¼•èµ·å¹¶å‘å’Œè¯»å–æ•°æ®çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œè¿˜æœ‰è„è¯»é—®é¢˜ï¼ˆå¯¹æ–¹æ²¡æœ‰commitçš„æ•°æ®å°±å«åšè„æ•°æ®ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒä¸­æ˜¯æ‰“æ­»ä¸èƒ½ç”¨è¿™ä¸ªéš”ç¦»çº§åˆ«çš„ï¼\nè¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼šåœ¨è¿™ä¸ªéš”ç¦»çº§åˆ«ä¸­ï¼Œäº‹åŠ¡åªå¯ä»¥çœ‹åˆ°å…¶ä»–äº‹åŠ¡å·²ç»æäº¤äº†çš„å†…å®¹ã€‚è¿™å·²ç»æ»¡è¶³äº†éš”ç¦»çš„åŸºæœ¬å®šä¹‰ï¼šåªèƒ½çœ‹åˆ°å…¶ä»–äº‹åŠ¡å¼€å§‹å‰æˆ–è€…å¼€å§‹åçš„å†…å®¹ï¼›ä½†æ˜¯è¿™ç§éš”ç¦»æ¨¡å¼ä¼šäº§ç”Ÿä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼ˆç›¸åŒselectä¼šå‡ºç°ä¸åŒç»“æœï¼‰ï¼›\nå¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰ï¼šä¸ºäº†è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œè¿™ä¸ªéš”ç¦»çº§åˆ«ä¿è¯äº†äº‹åŠ¡åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¤šæ¬¡è¯»å–ç›¸åŒæ•°æ®æ—¶ä¼šå¾—åˆ°ç›¸åŒç»“æœï¼›ä½†æ˜¯è¿™ä¸ªéš”ç¦»çº§åˆ«åœ¨æŸäº›æ•°æ®åº“ä¸­å¯èƒ½ä¼šå‡ºç°å¹»è¯»é—®é¢˜ï¼›MySQLé»˜è®¤é‡‡ç”¨æ­¤éš”ç¦»çº§åˆ«ï¼›\nä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ï¼šæ‰€è°“ä¸²è¡ŒåŒ–ï¼Œå°±æ˜¯MySQLç»™æ•°æ®åº“çš„æ‰€æœ‰æ“ä½œéƒ½ä¸Šé”ï¼Œå¿…é¡»è¦æ’é˜Ÿè¿è¡Œã€‚ä¸€ä¸ªäº‹åŠ¡åœ¨è¿è¡Œæ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡å¾—ç­‰å®ƒè¿è¡Œå®Œæ¯•äº†æ‰èƒ½è¿›æ¥è¿è¡Œï¼Œè¿™æ ·èƒ½æœ€å¤§ç¨‹åº¦ä¿è¯éš”ç¦»æ€§ï¼›ä½†æ˜¯ä¼šé™ä½æ•ˆç‡ï¼›\n\néš”ç¦»çº§åˆ«æ˜¯ç”±MySQLè¿›è¡Œå„ç§ç±»å‹çš„åŠ é”æ¥å®ç°çš„ï¼Œæ¯”å¦‚è¡¨é”ã€è¡Œé”ã€è¯»å†™é”ã€é—´éš™é”ï¼ˆGAPï¼‰ã€NEXT-KEYé”ï¼ˆGAP+è¡Œé”ï¼‰ç­‰ç­‰ï¼›\n\nè¿™é‡Œè¿˜éœ€è¦éªŒè¯å¦å¤–ä¸€ä»¶äº‹ï¼ŒMySQLå¦‚æœå¼€å¯äº†ä¸²è¡ŒåŒ–ï¼Œå®¢æˆ·ç«¯c&#x2F;cppæ“ä½œè¿˜éœ€è¦åŠ é”å—ï¼Ÿmysqlqueryçš„æ“ä½œæ˜¯ä¼šé˜»å¡è¿˜æ˜¯ç›´æ¥é”™è¯¯é€€å‡ºï¼Ÿ\n\nåœ¨MySQLä¸­ï¼Œäº‹åŠ¡çš„éš”ç¦»çº§åˆ«å¯ä»¥åˆ†åˆ«è®¾ç½®å…¨å±€çš„éš”ç¦»çº§åˆ«å’Œå½“å‰å®¢æˆ·ç«¯çš„éš”ç¦»çº§åˆ«ï¼›å¦‚æœæ²¡æœ‰ä¸»åŠ¨è®¾ç½®å®¢æˆ·ç«¯çš„éš”ç¦»çº§åˆ«ï¼Œåˆ™ä¼šç»§æ‰¿å…¨å±€çš„éš”ç¦»çº§åˆ«ã€‚é¡¾åæ€ä¹‰ï¼Œä¼šè¯éš”ç¦»çº§åˆ«åªä¼šå½±å“å½“å‰çš„ä¼šè¯ï¼Œä¸ä¼šå½±å“å¦å¤–çš„å®¢æˆ·ç«¯ï¼›\nå¦å¤–ï¼Œå…¨å±€çš„éš”ç¦»çº§åˆ«ä¼šåœ¨æ•°æ®åº“æœåŠ¡é‡å¯åï¼Œè¢«é‡ç½®ä¸ºé…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼ˆä¸€èˆ¬æ˜¯RRï¼‰\n-- è®¾ç½® ä¼šè¯/å…¨å±€ éš”ç¦»çº§åˆ«set [session | global] transaction isolation level [read uncommitted | read committed | repeatable read | serializable ]-- æŸ¥çœ‹å½“å‰ä¼šè¯çš„éš”ç¦»çº§åˆ«select @@session.tx_isolation;-- æŸ¥çœ‹å…¨å±€çš„éš”ç¦»çº§åˆ«select @@tx_isolation;\n\n3.2 è¯»æœªæäº¤è¿™ä¸ªéš”ç¦»çº§åˆ«åœ¨ç¬¬äºŒå¤§ç‚¹é‡Œé¢å°±å·²ç»æµ‹è¯•è¿‡äº†ï¼Œå·¦ä¾§ç»ˆç«¯æ’å…¥çš„æ•°æ®ï¼Œå³ä¾¿æ²¡æœ‰commitï¼Œåœ¨å³ä¾§ç»ˆç«¯ä¸­ä¹Ÿèƒ½çœ‹å¾—åˆ°ï¼Œè¿™é‡Œå°±ä¸äºŒæ¬¡æ¼”ç¤ºäº†\n\næ¸…æ¥šå·²æœ‰çš„æ•°æ®ï¼Œæ¥æµ‹è¯•ä¸€ä¸‹ä¼šè¯éš”ç¦»çº§åˆ«çš„ä½œç”¨ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œå…¨å±€å’Œä¼šè¯çš„éš”ç¦»çº§åˆ«éƒ½æ˜¯RRï¼›\nMariaDB [hello_mysql]&gt; select @@tx_isolation;+-----------------+| @@tx_isolation  |+-----------------+| REPEATABLE-READ |+-----------------+1 row in set (0.000 sec)MariaDB [hello_mysql]&gt; select @@session.tx_isolation;+------------------------+| @@session.tx_isolation |+------------------------+| REPEATABLE-READ        |+------------------------+1 row in set (0.000 sec)\n\nå°†å·¦ä¾§çš„ç»ˆç«¯ä¸­çš„ä¼šè¯éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºè¯»æœªæäº¤\nset session transaction isolation level read uncommitted;\n\næ’å…¥æ•°æ®ä¹‹å‰ï¼Œæ‰§è¡Œä¸€æ¬¡selectå…¨åˆ—æŸ¥è¯¢ï¼Œä¸¤ä¾§éƒ½æ˜¯ç©ºï¼›\nåœ¨å·¦ä¾§æ’å…¥æ•°æ®åï¼Œå³ä¾§æŸ¥çœ‹ä¼šå‘ç°ä¾æ—§æ˜¯empty setæ²¡æœ‰ç»“æœï¼›åªæœ‰å·¦ä¾§commitä¹‹åï¼Œå³ä¾§æ‰èƒ½çœ‹åˆ°æ•°æ®ï¼›è¿™æ˜¯å› ä¸ºåœ¨ä¹‹å‰æµ‹è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†è‡ªåŠ¨æäº¤å…³é—­äº†ï¼›å³ä¾§çœ‹ä¸åˆ°æˆ‘ä»¬è¿˜æ²¡æœ‰æäº¤çš„äº‹åŠ¡ï¼›\n\nå³ä¾§æ‰‹åŠ¨å¼€å¯äº‹åŠ¡åï¼Œå³ä¾¿æ²¡æœ‰è¿›è¡Œcommitï¼Œä½†æ˜¯å·¦ä¾§å› ä¸ºè®¾ç½®äº†è¯»æœªæäº¤ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥çœ‹åˆ°å³ä¾§è¿˜æ²¡æœ‰æäº¤çš„äº‹åŠ¡ä¸­çš„ä¿®æ”¹ã€‚è¿™ä¾¿æ˜¯è¿™ä¸ªéš”ç¦»çº§åˆ«çš„ç‰¹æ€§ï¼›\n\n3.3 è¯»å·²æäº¤æ¥ä¸‹æ¥å†å°†å…¨å±€éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºè¯»å·²æäº¤ï¼Œé‡æ–°å¼€å¯ä¸¤ä¸ªç»ˆç«¯è¿›è¡Œæµ‹è¯•ï¼›\nset global transaction isolation level read committed;\n\nè®¾ç½®å®Œæ¯•ï¼Œé‡å¯ç»ˆç«¯åï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¾§çš„éš”ç¦»çº§åˆ«éƒ½æ˜¯è¯»å·²æäº¤ï¼Œè‡ªåŠ¨æäº¤éƒ½æ˜¯å¼€å¯çš„ï¼›\n\nä¸¤ä¾§éƒ½å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œå·¦ä¾§æ’å…¥æ•°æ®ï¼Œå³ä¾§æŸ¥çœ‹ï¼Œå‘ç°æ²¡æœ‰å†…å®¹ï¼›\n\nå·¦ä¾§commitä¹‹åï¼Œå³ä¾§æ‰å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ•°æ®ï¼›\n\nè¿™ç¬¦åˆæˆ‘ä»¬å¯¹è¯»å·²æäº¤è¿™ä¸ªéš”ç¦»çº§åˆ«çš„å­—é¢ç†è§£ï¼Œä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨è¿™ä¸ªéš”ç¦»çº§åˆ«æ²¡æœ‰é—®é¢˜ï¼\n3.3.1 å‡ºé—®é¢˜çš„åœºæ™¯æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š\n\nå…¬å¸éœ€è¦æ ¹æ®å‘˜å·¥å·¥èµ„ï¼Œåˆ†å‘ä¸åŒçº§åˆ«çš„å¥–é‡‘ï¼š\n2000-4000 çº§åˆ«ä¸€\n4001-8000 çº§åˆ«äºŒ\n8001-15000 çº§åˆ«ä¸‰\n\n\nç”²å¼€å¯äº†ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå¼€å§‹ç”¨MySQLç­›é€‰ä¸åŒå·¥èµ„åŒºé—´çš„å‘˜å·¥ï¼Œè®°å½•ä¸‹æ¥ï¼›\nä¹™å¼€å¯äº†ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæƒ³è¦ç»™å‘˜å·¥ä¸åŠ å·¥èµ„\nä¸åŸæœ¬çš„å·¥èµ„æ˜¯3000\nä¹™ç»™ä¸åŠ äº†2000å·¥èµ„ï¼Œä¸çš„å·¥èµ„å˜æˆäº†5000ï¼Œè·³åˆ°äº†å·¥èµ„çº§åˆ«äºŒï¼›\nä¹™æäº¤ä¿®æ”¹ï¼ˆcommitï¼‰\n\n\nå‡è®¾ç”²å·²ç»å®Œæˆäº†å¯¹2000-4000çº§åˆ«å·¥èµ„çš„å‘˜å·¥ç­›é€‰ï¼Œæ­¤æ—¶ä¹™è¿‡æ¥ç»™ä¸åŠ äº†å·¥èµ„ï¼Œä¸è·³åˆ°äº†å·¥èµ„çº§åˆ«äºŒï¼›\nå› ä¸ºéš”ç¦»çº§åˆ«æ˜¯è¯»å·²æäº¤ï¼Œç”²åœ¨ç­›é€‰å·¥èµ„çº§åˆ«äºŒçš„äººå‘˜æ—¶ï¼Œä¼šæŠŠåˆšåˆšè¢«ä¿®æ”¹è¿‡çš„ä¸ä¹Ÿç»™çº³å…¥è¿›å»ï¼›\nè¿™æ—¶å€™ï¼Œå¯¹äºç”²è€Œè¨€ï¼Œä¸å°±åŒæ—¶å‡ºç°åœ¨äº†å·¥èµ„çº§åˆ«ä¸€å’ŒäºŒçš„äººå‘˜ä¸­ï¼Œè¿™æ˜æ˜¾æ˜¯ä¸åˆç†çš„ï¼\n\nè¿™ä¸ªåœºæ™¯è¢«ç§°ä¸ºä¸å¯é‡å¤è¯»ï¼Œå³åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŒä¸€ä¸ªæŸ¥è¯¢è¯­å¥ï¼Œå¯èƒ½ä¼šå› ä¸ºå…¶ä»–äº‹åŠ¡çš„æäº¤è€Œäº§ç”Ÿä¸åŒçš„ç»“æœï¼›æ¢åšSQLè¯­å¥æ¥æè¿°ï¼Œåœ¨è¯»å·²æäº¤çš„éš”ç¦»çº§åˆ«ä¸­ï¼ŒåŒä¸€ä¸ªselectè¯­å¥åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šè·å–åˆ°å’Œç¬¬ä¸€æ¬¡ä¸åŒçš„ç»“æœï¼Œæ‰€ä»¥è¿™ä¸ªé—®é¢˜æ‰è¢«ç§°ä½œä¸å¯é‡å¤è¯»ï¼ˆä¸å¯ä»¥é‡å¤æ‰§è¡Œselectï¼‰é—®é¢˜ï¼›\n\næ¥å®é™…æ¼”ç¤ºä¸€ä¸‹ï¼Œä¸¤ä¾§éƒ½å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œå·¦ä¾§ç»ˆç«¯æ›´æ–°è¡¨ä¸­çš„ç”¨æˆ·idï¼Œåªè¦å®ƒä¸æäº¤ï¼Œå³ä¾§å°±çœ‹ä¸åˆ°ä¿®æ”¹ã€‚\n\nä½†æ˜¯æäº¤äº†ä¹‹åï¼Œå³ä¾§å°±èƒ½çœ‹åˆ°è¿™ä¸ªç”¨æˆ·idçš„æ”¹å˜ï¼Œåœ¨è¿›è¡Œæ•°æ®ç­›é€‰çš„æ—¶å€™ï¼Œè¿™ç§æƒ…å½¢å°±ä¼šå‡ºç°é—®é¢˜ï¼\n\n3.4 å¯é‡å¤è¯»æ‰€ä»¥ï¼Œä¸ºäº†é¿å…ä¸Šé¢æåˆ°çš„è¿™ä¸ªé—®é¢˜ï¼ŒMySQLè¿˜æä¾›äº†ä¸€ä¸ªå¯é‡å¤è¯»çš„éš”ç¦»çº§åˆ«ï¼Œä¸”é»˜è®¤é‡‡ç”¨çš„å°±æ˜¯è¿™ä¸ªéš”ç¦»çº§åˆ«ï¼›\nset global transaction isolation level  repeatable read;\n\nå¯é‡å¤è¯»å°±è§£å†³äº†ä¸Šé¢æåˆ°çš„é—®é¢˜ï¼Œå³ä¾¿å…¶ä»–äº‹åŠ¡æäº¤äº†ä¿®æ”¹ï¼Œå½“å‰äº‹åŠ¡ä¹Ÿçœ‹ä¸åˆ°è¿™ä»½ä¿®æ”¹ï¼Œåªæœ‰å½“å‰äº‹åŠ¡ç»“æŸåï¼Œæ‰èƒ½çœ‹åˆ°æœ€æ–°çš„æ•°æ®ï¼›\nçœ‹ä¸‹å›¾ï¼Œä¸¤ä¾§éƒ½å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œä¸ç®¡å·¦ä¾§æ˜¯å¦æœ‰æäº¤äº‹åŠ¡ï¼Œå³ä¾§éƒ½çœ‹ä¸åˆ°å·¦ä¾§æ–°æ’å…¥çš„æ•°æ®ï¼›\n\nåªæœ‰å³ä¾§ä¹Ÿæäº¤äº†è‡ªå·±çš„äº‹åŠ¡ï¼Œæ‰èƒ½çœ‹åˆ°å·¦ä¾§æ’å…¥çš„æ–°æ•°æ®ï¼›\n\nè¿™å°±ä¿è¯äº†ï¼Œå³ä¾§è¿™ä¸ªäº‹åŠ¡åœ¨è¿è¡Œçš„å§‹ç»ˆï¼Œå®ƒæ‰§è¡Œçš„ç›¸åŒselectè¯­å¥çš„ç»“æœæ°¸è¿œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸ä¼šå‡ºç°ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼\nè€Œå¦‚æœåœ¨RRçº§åˆ«ä¸­ï¼ŒåŒæ—¶è®¿é—®ç›¸åŒæ•°æ®ï¼Œä¼šå‡ºç°åŠ é”çš„æƒ…å†µï¼Œä¸‹å›¾ä¸­ï¼Œå³ä¾§æ’å…¥äº†ä¸»é”®ä¸º6çš„æ•°æ®ï¼Œæ­¤æ—¶å·¦ä¾§å¦‚æœä¹Ÿå°è¯•æ’å…¥ä¸€ä¸ªä¸»é”®ä¸º6çš„æ•°æ®ï¼Œä¼šè¿›å…¥é˜»å¡çŠ¶æ€ï¼›\n\nå¦‚æœå¾ˆä¹…éƒ½ä¸ç»§ç»­æ“ä½œï¼Œå°±ä¼šå› ä¸ºç­‰å¾…è¶…æ—¶ï¼Œè·³å‡ºç­‰å¾…\nMariaDB [hello_mysql]&gt; insert into test_ruc values (6,60,&#x27;å¤©æ•°&#x27;);ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction\n\nä½†å½“å‰äº‹åŠ¡ä¸­æ’å…¥çš„æ•°æ®ä¾æ—§æ˜¯å­˜åœ¨çš„ï¼Œå½“å‰äº‹åŠ¡ä¹Ÿæ²¡æœ‰ç»“æŸ\n\nå†æ¬¡å°è¯•æ’å…¥è¿™ä¸ªä¸»é”®ä¸º6çš„æ•°æ®ï¼Œä¾æ—§ä¼šé™·å…¥é˜»å¡æ€ï¼Œåªæœ‰å³ä¾§çš„äº‹åŠ¡è¢«æäº¤äº†ä¹‹åï¼Œå·¦ä¾§æ‰ä¼šå‡ºç°ä¸»é”®å†²çªçš„æç¤ºï¼Œç¦æ­¢æ’å…¥ï¼›\n\nå·¦ä¾§commitäº†ä¹‹åï¼Œå³ä¾§æ‰èƒ½çœ‹åˆ°å·¦ä¾§æ–°æ’å…¥çš„ä¸»é”®ä¸º5çš„æ•°æ®ï¼›\n\n3.5 ä¸²è¡ŒåŒ–è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸€ä¸ªäº‹åŠ¡æ²¡ç»“æŸï¼Œå¦å¤–ä¸€ä¸ªå°±é˜»å¡ç­‰å¾…ï¼›\nä¸²è¡ŒåŒ–æ˜¯æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œä½†å…¶å¹¶å‘æ€§èƒ½å¾ˆä½ï¼Œå®é™…ä¸Šç”¨çš„ä¹Ÿä¸å¤šï¼›\nset global transaction isolation level  serializable;\n\nä¸¤ä¾§ç»ˆç«¯éƒ½å¼€å§‹äº‹åŠ¡ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ˜¯ä¸ä¼šåŠ é”çš„ï¼Œä½†æ˜¯å·¦ä¾§æ‰§è¡Œupdateçš„æ—¶å€™ï¼Œé˜»å¡äº†ï¼ˆå¯ä»¥é€šè¿‡å·¦ä¾§updateçš„æ‰§è¡Œæ—¶é—´è§‚å¯Ÿåˆ°é˜»å¡ç°è±¡ï¼Œæˆªå›¾çœ‹çš„ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼‰ï¼›å³ä¾§ä¹Ÿæ‰§è¡Œä¸€æ¬¡updateï¼Œå·¦ä¾§çš„updateå°±ç«‹é©¬æˆåŠŸäº†ï¼Œå³ä¾§æ˜¾ç¤ºæŠ¥é”™æ£€æµ‹åˆ°æ­»é”ï¼Œå»ºè®®å°è¯•é‡å¯äº‹åŠ¡ï¼›\n\nå†æ¥è¯•è¯•ï¼Œä¸¤ä¾§éƒ½å¼€å¯äº‹åŠ¡ï¼Œå·¦ä¾§å°è¯•æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œä¼šé˜»å¡ï¼›å³ä¾§commitä¹‹åï¼Œå·¦ä¾§çš„æ’å…¥å°±ç«‹é©¬æˆåŠŸäº†ï¼\n\nè¿™ä¾¿æ˜¯ä¸²è¡ŒåŒ–çš„è¡¨ç°ï¼šä¸¤ä¸ªäº‹åŠ¡å¦‚æœéƒ½æ˜¯åœ¨æ‰§è¡Œselectçš„è¯»å–æ“ä½œï¼Œåˆ™ä¸ä¼šè¢«é˜»å¡ï¼Œä½†å¦‚æœæœ‰ä¸€ä¸ªäº‹åŠ¡è¦æ‰§è¡Œå¢åˆ æ”¹ï¼Œé‚£ä¹ˆå°±å¿…é¡»ç­‰å¾…å…¶ä»–äº‹åŠ¡éƒ½ç»“æŸäº†ï¼Œè¿™ä¸ªæ“ä½œæ‰èƒ½è¢«æ‰§è¡Œï¼›\n3.5.1 ä¸²è¡ŒåŒ–çš„é€‚ç”¨åœºæ™¯å›åˆ° 1.1.2 å–ç¥¨ çš„åœºæ™¯ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå¦‚æœä½ éœ€è¦ä¿è¯å®¢æˆ·ç«¯Açš„å–ç¥¨é€»è¾‘å®Œå…¨æ‰§è¡Œå®Œæ¯•äº†ï¼Œå®¢æˆ·ç«¯Bæ‰èƒ½è¿‡æ¥æŸ¥è¯¢ç¥¨æ•°ï¼Œé‚£å°±éœ€è¦ä½¿ç”¨ä¸²è¡ŒåŒ–ï¼›\nä½†æ˜¯ï¼Œä¸²è¡ŒåŒ–ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥æ‰§è¡ŒæŸ¥è¯¢æ“ä½œçš„ï¼é‚£ä¹ˆåœ¨Aæ²¡æœ‰ç»“æŸçš„æƒ…å†µä¸‹ï¼ŒBä¸è¿˜æ˜¯ä¼šæŸ¥è¯¢åˆ°æœ‰å‰©ä½™ç¥¨æ•°ï¼Ÿ\n\nå®é™…ä¸Šï¼Œæˆ‘ä»¬çš„å–ç¥¨æ“ä½œå¹¶ä¸æ˜¯ç›´è¿æ•°æ®åº“å®ç°çš„ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªæœåŠ¡ç«¯è¿›ç¨‹æ¥æä¾›APIï¼Œä¾›å®¢æˆ·ç«¯æ¥æŸ¥è¯¢å‰©ä½™ç¥¨æ•°ï¼Œå‰©ä¸‹çš„å–ç¥¨æ“ä½œå…¶å®éƒ½æ˜¯æœåŠ¡ç«¯æ¥å®ç°çš„ï¼ˆè®©å®¢æˆ·ç«¯ç›´è¿MySQLæ¥æ‰§è¡ŒSQLæ˜¯éå¸¸ä¸å¯é çš„ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºç°SQLæ³¨å…¥æ”»å‡»ï¼‰\n\næ‰€ä»¥ï¼Œè¿™ä¸ªé—®é¢˜å¾—åœ¨æœåŠ¡ç«¯è¿›ç¨‹ä¸­åŠ é”è§£å†³ï¼MySQLæœ¬èº«å³ä¾¿ä½¿ç”¨ä¸²è¡ŒåŒ–ä¹Ÿæ˜¯æ²¡æœ‰åŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼›\nä½†æ˜¯ï¼Œåˆ«å¿˜äº†ï¼ŒMySQLè¿˜æœ‰å¦å¤–ä¸€ä¸ªä¸œè¥¿â€”â€”çº¦æŸï¼›ä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªè§¦å‘å™¨ï¼Œæ›´æ–°å‰©ä½™ç¥¨æ•°çš„æ—¶å€™ï¼Œæ‹’ç»å°†ç¥¨æ•°è®¾ç½®ä¸ºè´Ÿæ•°ï¼›è¿™æ ·å®¢æˆ·ç«¯Bå³ä¾¿è¿›å…¥äº†å–ç¥¨ä¸šåŠ¡ï¼Œæœ€ç»ˆå°†å‰©ä½™ç¥¨æ•°çš„æ•°æ®è®¾ç½®ä¸ºè´Ÿæ•°çš„æ—¶å€™ï¼Œä¹Ÿä¼šè¢«MySQLé˜»æ­¢æ’å…¥ï¼Œè¿™ä¸ªå–ç¥¨çš„äº‹åŠ¡Bå°±ç›¸å½“äºé”™è¯¯é€€å‡ºäº†ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šè¢«å›æ»šï¼è€Œéš”ç¦»çº§åˆ«å°±æ˜¯é¿å…Aå’ŒBåŒæ—¶ä¿®æ”¹ä¸€ä¸ªæ•°æ®è€Œå¯¼è‡´çš„é”™è¯¯ï¼›\näºŒè€…ç›¸è¾…ç›¸æˆï¼Œå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼›å½“ç„¶ï¼Œåœ¨æœåŠ¡ç«¯APIå¤„ç†é€»è¾‘ä¸­åŠ é”æ˜¯æ›´å¥½çš„è§£å†³åŠæ³•ï¼Œæ—¢å¯ä»¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œåˆèƒ½éš”ç¦»å®¢æˆ·ç«¯å’ŒMySQLæœåŠ¡ï¼›\n\nåæ–‡è®²åˆ°çš„å½“å‰è¯»ä¹Ÿèƒ½åœ¨æŸç§ç¨‹åº¦ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåæ­£è§£å†³çš„åŠæ³•å¤šå¤šï¼\n\n3.5.2 ä¸²è¡ŒåŒ–å’ŒCPPå¦‚æœå°† MySQL çš„éš”ç¦»çº§åˆ«ï¼ˆisolation levelï¼‰è®¾ç½®ä¸ºæœ€é«˜çº§åˆ«çš„ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ï¼Œé‚£ä¹ˆå¹¶å‘çš„å¤šçº¿ç¨‹æ“ä½œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š\n\né˜»å¡ï¼šå½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨ä½¿ç”¨æŸä¸ªæ•°æ®æ—¶ï¼Œå…¶ä»–çº¿ç¨‹éœ€è¦ç­‰å¾…è¯¥çº¿ç¨‹é‡Šæ”¾é”æ‰èƒ½ç»§ç»­è¿›è¡Œæ“ä½œã€‚è¿™ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹åœ¨è·å¾—æ‰€éœ€é”ä¹‹å‰è¢«é˜»å¡ã€‚\né”™è¯¯é€€å‡ºï¼šå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œç›¸åŒçš„æ•°æ®ï¼Œå¹¶ä¸”å®ƒä»¬æ— æ³•åŒæ—¶æŒæœ‰è®¿é—®è¯¥æ•°æ®çš„é”ï¼Œå°±ä¼šå¼•å‘æ­»é”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸäº›çº¿ç¨‹ä¼šè¢«ç³»ç»Ÿç»ˆæ­¢ï¼Œä»è€Œå¯¼è‡´é”™è¯¯é€€å‡ºã€‚\n\næ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯è¯´ä½ å°†MySQLçš„éš”ç¦»çº§åˆ«è®¾ç½®å¥½äº†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±å•¥äº‹ä¸ç”¨å¹²äº†ï¼›æœ€å¥½çš„æ“ä½œä¾æ—§æ˜¯åœ¨å®¢æˆ·ç«¯å°±åŠ é”è¿›è¡Œä¸€å®šçš„è®¿é—®æ§åˆ¶ï¼Œå› ä¸ºMySQL Queryå‡½æ•°çš„é”™è¯¯é€€å‡º+é€€å‡ºæƒ…å†µè¯†åˆ«ï¼Œç›¸æ¯”äºå®¢æˆ·ç«¯è¿›è¡Œè®¿é—®æ§åˆ¶æ›´éš¾ä»¥æ“ä½œï¼›\n3.6 æ€»ç»“\néš”ç¦»çº§åˆ«è¶Šé«˜ï¼Œå®‰å…¨æ€§è¶Šé«˜ï¼Œæ•°æ®åº“çš„å¹¶å‘æ€§èƒ½å°±è¶Šä½ï¼›æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸šåŠ¡é€»è¾‘ï¼Œé€‰ç”¨åˆé€‚çš„éš”ç¦»çº§åˆ«ï¼›\nä¸å¯é‡å¤è¯»çš„é—®é¢˜åœ¨äºå…¶ä»–å®¢æˆ·ç«¯çš„ä¿®æ”¹å’Œåˆ é™¤ï¼ŒåŒæ ·çš„selectè¯­å¥ä¼šæŸ¥å‡ºä¸åŒçš„ç»“æœï¼Œæ˜¯ä¸åˆç†çš„ï¼›\nå¹»è¯»çš„é‡ç‚¹åœ¨äºæ–°å¢ï¼Œå…¶ä»–å®¢æˆ·ç«¯æ–°å¢çš„è®°å½•å¯èƒ½è¢«æˆ‘ä»¬å½“å‰çš„å®¢æˆ·ç«¯æŸ¥è¯¢åˆ°ï¼›ä½†æ˜¯åœ¨MySQLä¸­ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› ä¸ºInnoDBé€šè¿‡NEXT-KEYé”è§£å†³äº†å¹»è¯»é—®é¢˜ï¼›\näº‹åŠ¡ä¹Ÿåˆ†ä¸ºé•¿çŸ­äº‹åŠ¡çš„æ¦‚å¿µï¼Œäº‹åŠ¡ä¹‹é—´äº’ç›¸å½±å“ï¼Œä¸»è¦æŒ‡çš„æ˜¯äº‹åŠ¡åœ¨å¹¶è¡Œé˜¶æ®µï¼ˆéƒ½æ²¡æœ‰commitçš„æ—¶å€™ï¼‰äº§ç”Ÿçš„å½±å“ï¼›\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨MySQLé»˜è®¤çš„RRçš„äº‹åŠ¡çº§åˆ«å°±å¯ä»¥äº†ï¼›\n\nä¸‹é¢ç»™å‡ºä¸€ä¸ªä¸åŒäº‹åŠ¡çº§åˆ«ä¹‹é—´çš„åŒºåˆ«çš„è¡¨æ ¼ï¼ŒYä»£è¡¨ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼ŒNä»£è¡¨ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\n\n\néš”ç¦»çº§åˆ«\nè„è¯»\nä¸å¯é‡å¤è¯»\nå¹»è¯»\nåŠ é”è¯»\n\n\n\nè¯»æœªæäº¤\nY\nY\nY\nä¸åŠ é”\n\n\nè¯»å·²æäº¤\nN\nY\nY\nä¸åŠ é”\n\n\nå¯é‡å¤è¯»\nN\nN\nN\nä¸åŠ é”\n\n\nä¸²è¡ŒåŒ–\nN\nN\nN\nåŠ é”\n\n\n3.7 ä¸€è‡´æ€§\näº‹åŠ¡æ‰§è¡Œçš„ç»“æœï¼Œå¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ï¼Œå˜åˆ°å¦ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚å½“æ•°æ®åº“åªåŒ…å«äº‹åŠ¡ æˆåŠŸæäº¤çš„ç»“æœæ—¶ï¼Œæ•°æ®åº“å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚\nå¦‚æœç³»ç»Ÿè¿è¡Œå‘ç”Ÿä¸­æ–­ï¼ŒæŸä¸ªäº‹åŠ¡å°šæœªå®Œæˆè€Œè¢«è¿«ä¸­ æ–­ï¼Œè€Œæ”¹æœªå®Œæˆçš„äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€åšçš„ä¿®æ”¹å·²è¢«å†™å…¥æ•°æ®åº“ï¼Œæ­¤æ—¶æ•°æ®åº“å°±å¤„äºä¸€ç§ä¸æ­£ç¡®ï¼ˆä¸ä¸€è‡´ï¼‰çš„çŠ¶æ€ã€‚å› æ­¤ä¸€è‡´æ€§æ˜¯é€šè¿‡åŸå­æ€§æ¥ä¿è¯çš„ã€‚\nå…¶å®ä¸€è‡´æ€§å’Œç”¨æˆ·çš„ä¸šåŠ¡é€»è¾‘å¼ºç›¸å…³ï¼Œä¸€èˆ¬MySQLæä¾›æŠ€æœ¯æ”¯æŒï¼Œä½†æ˜¯ä¸€è‡´æ€§è¿˜æ˜¯è¦ç”¨æˆ·ä¸šåŠ¡é€»è¾‘åšæ”¯æ’‘ï¼ˆæ¯”å¦‚å®¢æˆ·ç«¯å¦‚æœä¸ä½¿ç”¨äº‹åŠ¡ï¼Œé‚£MySQLä¹Ÿæ²¡æœ‰åŠæ³•å¸®åŠ©ç»´æŠ¤ï¼‰ï¼Œæ‰€ä»¥è¯´ï¼Œä¸€è‡´æ€§æ˜¯ç”±ç”¨æˆ·å†³å®šæ˜¯å¦ç»´æŠ¤çš„ã€‚ \næŠ€æœ¯ä¸Šï¼Œé€šè¿‡AIDä¿è¯C\n\n4.éš”ç¦»æ€§çš„ç†è§£è¯´å®Œäº†éš”ç¦»çº§åˆ«ï¼Œæ¥ä¸‹æ¥å†æ·±å…¥ç†è§£ä¸€ä¸‹éš”ç¦»æ€§\n4.1 MVCCæ•°æ®åº“å¹¶å‘çš„åœºæ™¯ä¸€å…±æœ‰ä¸‹é¢ä¸‰ç§\n\nè¯»-è¯»ï¼šä¸å­˜åœ¨ä»»ä½•é—®é¢˜ï¼Œä¸éœ€è¦è®¿é—®æ§åˆ¶\nè¯»-å†™ï¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯èƒ½ä¼šé‡åˆ°éš”ç¦»æ€§ä¸­çš„è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»é—®é¢˜ï¼›\nå†™-å†™ï¼šæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿˜æœ‰å¯èƒ½å‡ºç°æ›´æ–°ä¸¢å¤±é—®é¢˜ï¼›\n\næˆ‘ä»¬ä¸»è¦å…³æ³¨çš„æ˜¯è¯»å†™å¹¶å‘çš„æƒ…å†µï¼Œè¿™ä¹Ÿæ˜¯æ•°æ®åº“æœ€å¸¸é‡åˆ°çš„å¤„ç†åœºæ™¯ï¼›\nå†MySQLä¸­ï¼Œé‡‡ç”¨äº†MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æ¥è§£å†³è¯»å†™å†²çªï¼Œè¿™æ˜¯ä¸€ç§æ— é”çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼›\nåœ¨äº†è§£MVCCä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å‡ ä¸ªå‰ç½®çŸ¥è¯†ï¼š\n\nä¸‰ä¸ªéšè—åˆ—å­—æ®µ\nUNDOæ—¥å¿—\nREAD VIEW\n\n4.1.1 éšè—åˆ—å­—æ®µåœ¨MySQLä¸­ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å­˜åœ¨ä¸‰ä¸ªéšè—çš„åˆ—å­—æ®µ\n\nDB_TRX_IDï¼š6 byteï¼Œæœ€è¿‘ä¿®æ”¹(ä¿®æ”¹&#x2F;æ’å…¥)äº‹åŠ¡IDï¼Œè®°å½•åˆ›å»ºè¿™æ¡è®°å½•&#x2F;æœ€åä¸€æ¬¡ä¿®æ”¹è¯¥è®°å½•çš„äº‹åŠ¡IDï¼›\nDB_ROLL_PTR: 7 byteï¼Œå›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™æ¡è®°å½•çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ˆç®€å•ç†è§£æˆï¼ŒæŒ‡å‘å†å²ç‰ˆæœ¬å°± è¡Œï¼Œè¿™äº›æ•°æ®ä¸€èˆ¬åœ¨ undo log ä¸­ï¼‰ \nDB_ROW_ID: 6 byteï¼Œéšå«çš„è‡ªå¢IDï¼ˆéšè—ä¸»é”®ï¼‰ï¼Œå¦‚æœæ•°æ®è¡¨æ²¡æœ‰ä¸»é”®ï¼Œ InnoDB ä¼šè‡ªåŠ¨ä»¥ DB_ROW_ID äº§ç”Ÿä¸€ä¸ªèšç°‡ç´¢å¼•ï¼›\nè¡¥å……ï¼šå®é™…è¿˜æœ‰ä¸€ä¸ªåˆ é™¤flagéšè—å­—æ®µã€‚è®°å½•è¢«æ›´æ–°æˆ–åˆ é™¤æ—¶å¹¶ä¸ä»£è¡¨çœŸçš„åˆ é™¤ï¼Œè€Œæ˜¯åˆ é™¤flagå˜äº†ï¼›è¿™åœ¨å¾ˆå¤šç³»ç»Ÿçš„åˆ é™¤æ“ä½œä¸­éƒ½æ˜¯ä¸€ä¸ªå¸¸è§åšæ³•ã€‚\n\nå‡è®¾æœ‰å¦‚ä¸‹è¡¨ç»“æ„\ncreate table if not exists student(    name varchar(11) not null,    age int not null);-- æ’å…¥ä¸€æ¡è®°å½•insert into student (name, age) values (&#x27;å¼ ä¸‰&#x27;, 19);\n\né‚£ä¹ˆè¿™ä¸ªè¡¨ä¸­çš„å®é™…æ•°æ®æ˜¯è¿™æ ·çš„\n\n\n\nname\nage\nDB_TRX_ID(åˆ›å»ºè¿™ä¸ªè®°å½•çš„äº‹åŠ¡ID)\nDB_ROW_IDï¼ˆéšè—ä¸»é”®ï¼‰\nDB_ROLL_PTRï¼ˆå›æ»šæŒ‡é’ˆï¼‰\n\n\n\nå¼ ä¸‰\n19\nNULL\n1\nNULL\n\n\næˆ‘ä»¬å¹¶ä¸çŸ¥é“åˆ›å»ºè¿™ä¸ªè®°å½•çš„äº‹åŠ¡IDï¼Œæ‰€ä»¥è®¾ç½®ä¸ºNULLï¼›å› ä¸ºæ˜¯ç¬¬ä¸€æ¡è®°å½•ï¼Œæ‰€ä»¥éšè—ä¸»é”®æ˜¯1ï¼›åŒæ ·å› ä¸ºæ˜¯ç¬¬ä¸€æ¡è®°å½•ï¼Œæ‰€ä»¥æ²¡æœ‰å›æ»šçš„åœ°æ–¹ï¼Œå›æ»šæŒ‡é’ˆä¹Ÿæ˜¯NULLï¼ˆæ¢å¥è¯è¯´ï¼Œå¦‚æœå›æ»šæŒ‡é’ˆä¸ºNULLï¼Œä»£è¡¨è¿™ä¸ªå°±æ˜¯è¿™ä¸ªè¡¨ä¸­çš„ç¬¬ä¸€æ¡è®°å½•äº†ï¼‰ã€‚\n4.1.2 undoæ—¥å¿—MySQLæ˜¯ä»¥æœåŠ¡è¿›ç¨‹çš„æ–¹å¼åœ¨å†…å­˜ä¸­è¿è¡Œçš„ï¼Œæˆ‘ä»¬å¯¹æ•°æ®çš„CURDæ“ä½œï¼Œéƒ½éœ€è¦é€šè¿‡MySQLå°†å…¶åˆ·å…¥åˆ°ç¡¬ç›˜ä¸Šè¿›è¡ŒæŒä¹…åŒ–ï¼ŒMySQLä¸ºè¿™äº›æ“ä½œä¼šæä¾›ä¸€ä¸ªä¸“é—¨çš„buffer poolå†…å­˜ç¼“å†²åŒºï¼›è€Œundo log/redo logä¹Ÿæ˜¯å†…å­˜ä¸­çš„ä¸€å—åŒºåŸŸï¼Œå¯¹äºMySQLè€Œè¨€\n\næ—¥å¿—éœ€è¦ç«‹åˆ»åˆ·ç›˜ï¼ˆæœ‰ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹æ¥ç®¡ç†æ—¥å¿—ï¼‰\næ•°æ®æ ¹æ®è¿è¡Œç­–ç•¥ï¼Œé€‰æ‹©åˆé€‚çš„æ—¶é—´åˆ·ç›˜ï¼ˆå› ä¸ºæ•°æ®é‡ä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œå¦‚æœå®æ—¶åˆ·ç›˜ä¼šé€ æˆè¾ƒå¤§IOè´Ÿè½½ï¼Œå½±å“è¿›ç¨‹è¿è¡Œï¼‰\n\nå…ˆæ¥è¯´è¯´redo logï¼Œè¿™é‡ŒåŒ…å«äº†MySQLä¸­çš„æ‰€æœ‰å°šæœªè½ç›˜çš„CURDæ“ä½œï¼›å¦‚æœMySQLè¿˜æ²¡æœ‰å†™å…¥æ•°æ®çš„æ—¶å€™å°±æŒ‚äº†ï¼Œé‚£ä¹ˆä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™å°±ä¼šä»redo logé‡Œé¢æ¢å¤æ•°æ®ï¼Œæ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼›\nåœ¨MySQLå­˜å‚¨è·¯å¾„/var/lib/mysqlä¸­çš„ib_logfile0/ib_logfile1å°±æ˜¯redo logï¼›\n-rw-rw----. 1 mysql mysql  50331648 Sep 11 03:16 ib_logfile0-rw-rw----. 1 mysql mysql  50331648 Sep  9 21:03 ib_logfile1\n\nè€Œundo logä¸»è¦ç”¨äºä»¥ä¸‹åŠŸèƒ½\n\nå›æ»šäº‹åŠ¡\nMVCCï¼ˆå¤šç‰ˆæœ¬æ§åˆ¶&#x2F;éš”ç¦»æ€§å’Œéš”ç¦»çº§åˆ«ï¼‰\n\nå‡è®¾æˆ‘ä»¬æ¥äº†ä¸€ä¸ªupdateæ“ä½œï¼Œå°†åˆšåˆšæ’å…¥çš„å¼ ä¸‰çš„å¹´é¾„æ”¹æˆ30å²ï¼Œå¯¹äºMySQLè€Œè¨€å°±ä¼šåœ¨undo logé‡Œé¢åšå¦‚ä¸‹å¤„ç†ï¼›\n\nè¯¥updateæ“ä½œå¯¹åº”çš„äº‹åŠ¡DB_TRX_IDæ˜¯10ï¼›\nå°†æ—§æ•°æ®æ”¾å…¥undo logä¸­ï¼Œå¹¶å°†å½“å‰æ•°æ®çš„DB_ROLL_PTRæŒ‡å‘æ—§æ•°æ®çš„åœ°å€ï¼›\nå¦‚æœéœ€è¦å›æ»šï¼Œé‚£ä¹ˆå°±é€šè¿‡DB_ROLL_PTRæ‰¾åˆ°æ—§æ•°æ®ï¼Œå¤å†™å›å»ï¼›\n\n\nå¦‚æœå†æ¥ä¸€æ¬¡ä¿®æ”¹ï¼Œå°†å¼ ä¸‰çš„åå­—æ”¹æˆæå››ï¼Œä¹Ÿæ˜¯ä¾ç…§è¿™ä¸ªé€»è¾‘åœ¨undo logä¸­æ–°å¢æ—§æ•°æ®ï¼Œå¹¶é“¾æ¥DB_ROLL_PTRæŒ‡é’ˆï¼›\n\näº‹åŠ¡11ä¿®æ”¹è¿™æ¡æ•°æ®ï¼Œå…ˆç”³è¯·é”ï¼›\nå°†ç°æœ‰æ•°æ®å¤åˆ¶åˆ°undo logä¸­ï¼ˆå¤´æ’ï¼‰ï¼Œå¹¶å°†DB_ROLL_PTRæŒ‡é’ˆæŒ‡å‘æ—§æ•°æ®çš„åœ°å€ï¼›\nä¿®æ”¹è®°å½•ä¸­çš„nameï¼Œå¹¶ä¸”å°†DB_TRX_IDæ”¹æˆå½“å‰äº‹åŠ¡çš„ID 11ï¼›\näº‹åŠ¡11æäº¤ï¼Œé‡Šæ”¾é”ï¼›\n\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªç±»ä¼¼äºé“¾è¡¨çš„å†å²ç‰ˆæœ¬é“¾ï¼›æ¯æ¬¡å›é€€çš„æ—¶å€™ï¼Œéƒ½å¯ä»¥æ‰¾åˆ°å†å²æ•°æ®ï¼Œè¦†ç›–å½“å‰çš„æ•°æ®ã€‚è¿™äº›ç‰ˆæœ¬æˆ‘ä»¬ç§°ä¹‹ä¸ºå¿«ç…§ï¼›\nè€Œæ’å…¥å’Œåˆ é™¤éƒ½å¯ä»¥å†™å…¥undo logï¼Œä½†æ˜¯åªæœ‰æ›´æ–°å’Œåˆ é™¤èƒ½å½¢æˆå†å²ç‰ˆæœ¬é“¾ï¼›\n\nåˆ é™¤æ˜¯å°†åˆ é™¤flagç½®ä¸ºçœŸï¼Œæ—§æ•°æ®ä¾æ—§å¯ä»¥å†™å…¥åˆ°undo logä¸­ï¼Œå¦‚æœéœ€è¦å›æ»šï¼Œå°†è¿™è¡Œè®°å½•æ¢å¤ï¼›\næ’å…¥å¹¶æ²¡æœ‰å†å²ç‰ˆæœ¬ï¼Œä½†ä¹Ÿéœ€è¦å°†å…¶æ”¾å…¥undo logä¸­ï¼Œäº‹åŠ¡å›æ»šçš„æ—¶å€™éœ€è¦å°†æ–°æ’å…¥çš„æ•°æ®åˆ é™¤ï¼›\näº‹åŠ¡æäº¤äº†ä¹‹åï¼Œå·²æœ‰çš„å†å²è®°å½•å¯ä»¥è¢«åˆ é™¤ï¼›\n\nå¢åˆ æ”¹éƒ½è¯´äº†ï¼Œé‚£ä¹ˆselectå‘¢ï¼Ÿ\nä¸€èˆ¬è€Œè¨€ï¼ŒæŸ¥è¯¢ä¸ä¼šäº§ç”Ÿæ•°æ®å†™å…¥æ“ä½œï¼Œä¹Ÿä¸éœ€è¦è®¾ç½®å†å²ç‰ˆæœ¬é“¾ï¼›\nä½†æ˜¯åœ¨ä¹‹å‰å…³äºRRçº§åˆ«éš”ç¦»æ€§çš„éªŒè¯ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†selectæ— æ³•çœ‹åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤äº†çš„æ•°æ®ï¼Œè¿™è¯´æ˜selectæœ‰æ—¶å€™è¯»å–çš„æ˜¯å†å²ç‰ˆæœ¬çš„æ•°æ®ï¼Œè€Œå¹¶éå½“å‰æœ€æ–°çš„æ•°æ®ï¼\nè¯»å–å†å²æ•°æ®æˆ‘ä»¬ç§°ä¹‹ä¸ºå¿«ç…§è¯»ï¼Œåœ¨RRçº§åˆ«ä¸­é»˜è®¤é‡‡ç”¨çš„å°±æ˜¯å¿«ç…§è¯»ï¼›è¯»å–æœ€æ–°æ•°æ®å«åšå½“å‰è¯»ï¼ˆå¢åˆ æ”¹éƒ½æ˜¯å½“å‰è¯»ï¼‰ï¼›è¿˜æœ‰ä¸€ç§è¯»å–æ˜¯ä¸ºäº†æ›´æ–°è€ŒæŸ¥è¯¢ï¼›\nselect ... -- åœ¨RRçº§åˆ«ä¸‹ï¼Œé»˜è®¤æ˜¯å¿«ç…§è¯»select ... for update; -- ä¸ºäº†æ›´æ–°è€ŒæŸ¥è¯¢-- MySQLä¼šå°†å½“å‰è¡Œä¸Šæ’ä»–é”ï¼Œä¸Šé”äº†ä¹‹åï¼Œå…¶ä»–å®¢æˆ·ç«¯åªèƒ½æŸ¥è¯¢è¯¥è¡Œï¼Œæ— æ³•ä¿®æ”¹select ... lock in share mode; -- æŸ¥è¯¢æœ€æ–°æ•°æ®ï¼ˆå½“å‰è¯»ï¼‰-- æ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œåªæœ‰å…¶ä»–äº‹åŠ¡å®Œæˆäº†ï¼Œæ‰èƒ½æŸ¥è¯¢åˆ°æœ€æ–°ç»“æœï¼›\n\né™¤äº†æ‰‹åŠ¨æŒ‡å®šselectçš„æŸ¥è¯¢æ–¹å¼ä»¥å¤–ï¼Œéš”ç¦»çº§åˆ«ä¼šå½±å“selectçš„é»˜è®¤è¡Œä¸ºï¼Œæ¯”å¦‚åœ¨ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«çš„åœºæ™¯ä¸‹ï¼Œé»˜è®¤æ‰§è¡Œçš„å°±æ˜¯å½“å‰è¯»ï¼›\nåœ¨RRæ¨¡å¼ä¸‹è¿›è¡Œæµ‹è¯•ï¼Œä¼šå‘ç°å½“å‰è¯»ä¼šé˜»å¡å½“å‰çš„å®¢æˆ·ç«¯ï¼ˆå³ä¾§å®¢æˆ·ç«¯é˜»å¡ï¼‰ï¼›\n\nåªæœ‰å·¦ä¾§çš„äº‹åŠ¡åœ¨æäº¤äº†ä¹‹åï¼Œå³ä¾§çš„æŸ¥è¯¢æ‰ä¼šè¿”å›æœ€æ–°çš„ç»“æœï¼›\n\nè¿™æ˜¯å› ä¸ºå½“å‰è¯»ï¼ŒåŒ…æ‹¬å¢åˆ æ”¹æ“ä½œï¼Œæ˜¯éœ€è¦åŠ é”çš„ï¼›å¦‚æœè¦åœ¨RRæ¨¡å¼ä¸‹å®ç°å½“å‰è¯»ï¼Œé‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿå°±éœ€è¦ä¸²è¡ŒåŒ–æ‰§è¡Œï¼›\nè€Œå¿«ç…§è¯»ä¸éœ€è¦åŠ é”ï¼Œå› ä¸ºå®ƒå¯ä»¥è¯»å–å†å²ç‰ˆæœ¬ï¼Œè€Œå†å²ç‰ˆæœ¬æ˜¯ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹çš„ï¼Œä¹Ÿå°±ä¸éœ€è¦ç»´æŠ¤è®¿é—®æ§åˆ¶ï¼Œæé«˜äº†å¹¶å‘æ•ˆç‡ï¼›\né‚£ä¹ˆï¼ŒMySQLæ˜¯å¦‚ä½•å®ç°å¿«ç…§è¯»çš„å‘¢ï¼Ÿ\n4.1.3 Read ViewRead Viewå°±æ˜¯MySQLä¸ºå¿«ç…§è¯»ç”Ÿæˆçš„ä¸€ä¸ªè¯»è§†å›¾ï¼›åœ¨äº‹åŠ¡æ‰§è¡Œå¿«ç…§è¯»çš„æ—¶å€™ï¼ˆå³æ‰§è¡Œselectçš„æ—¶å€™ï¼‰å°†å½“å‰æ•°æ®æ‹ä¸€å¼ ç…§ï¼Œè¿™æ ·åœ¨è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œåç»­çš„æ‰€æœ‰selectéƒ½åªä¼šçœ‹åˆ°è¿™ä¸ªç…§ç‰‡é‡Œé¢çš„ç»“æœï¼Œçœ‹ä¸åˆ°å…¶ä»–äº‹åŠ¡æœ€æ–°çš„ä¿®æ”¹ï¼ˆä¸ç®¡å…¶ä»–äº‹åŠ¡æ˜¯å¦commitï¼‰ã€‚\n\nå¿«ç…§è¯»çš„ç°è±¡æˆ‘ä»¬å·²ç»åœ¨æœ¬æ–‡ 3.4 å¯é‡å¤è¯» ä¸­æ¼”ç¤ºè¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†äºŒæ¬¡æ¼”ç¤ºäº†ï¼›\n\nRead Viewåœ¨MySQLçš„æºç ä¸­å…¶å®å°±æ˜¯ä¸€ä¸ªç±»ï¼Œè¯¥ç±»ä¸­åŒ…å«ä¸€äº›å¯è¯»æ€§åˆ¤æ–­çš„ä¿¡æ¯ï¼Œå†…éƒ¨æœ‰æ¡ä»¶ï¼Œæ¥æ ‡æ˜å½“å‰äº‹åŠ¡èƒ½å¤Ÿçœ‹åˆ°é‚£ä¸ªç‰ˆæœ¬çš„æ•°æ®ï¼Œå³æœ‰å¯èƒ½æ˜¯å½“å‰æœ€æ–°çš„æ•°æ®ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯undo logä¸­çš„æŸä¸ªå†å²ç‰ˆæœ¬ï¼›\nclass ReadView &#123;// çœç•¥...private:    /** é«˜æ°´ä½ï¼Œå¤§äºç­‰äºè¿™ä¸ªIDçš„äº‹åŠ¡å‡ä¸å¯è§*/    trx_id_t m_low_limit_id    /** ä½æ°´ä½ï¼šå°äºè¿™ä¸ªIDçš„äº‹åŠ¡å‡å¯è§ */    trx_id_t m_up_limit_id;    /** åˆ›å»ºè¯¥ Read View çš„äº‹åŠ¡ID*/    trx_id_t m_creator_trx_id;    /** åˆ›å»ºè§†å›¾æ—¶çš„æ´»è·ƒäº‹åŠ¡idåˆ—è¡¨ï¼Œæ˜¯ä¸€ä¸ªä½å›¾ */    ids_t m_ids;    /** é…åˆpurgeï¼Œæ ‡è¯†è¯¥è§†å›¾ä¸éœ€è¦å°äºm_low_limit_noçš„UNDO LOGï¼Œ    * å¦‚æœå…¶ä»–è§†å›¾ä¹Ÿä¸éœ€è¦ï¼Œåˆ™å¯ä»¥åˆ é™¤å°äºm_low_limit_noçš„UNDO LOG*/    trx_id_t m_low_limit_no;    /** æ ‡è®°è§†å›¾æ˜¯å¦è¢«å…³é—­*/    bool m_closed;    // çœç•¥...&#125;;\n\nå•ç‹¬è¯´æ˜ä¸€ä¸‹è¿™é‡Œçš„4ä¸ªé‡è¦çš„å˜é‡ï¼›å…¶ä¸­éœ€è¦æ³¨æ„ï¼Œåœ¨è¿™é‡Œé¢upæ˜¯ä½æ°´ä½ï¼Œlowæ˜¯é«˜æ°´ä½ï¼Œè¿™æ˜¯ç”±ä»–ä»¬ä¿å­˜çš„æ•°æ®çš„æ€§è´¨å†³å®šçš„ï¼Œè¯·ä¸è¦å’Œè¿™ä¸¤ä¸ªå•è¯çš„æœ¬æ„æ··æ·†ï¼\nm_ids; // ä¸€å¼ ä½å›¾ï¼Œç”¨æ¥ä¿å­˜Read Viewç”Ÿæˆæ—¶ï¼Œç³»ç»Ÿæ­£æ´»è·ƒï¼ˆæ²¡æœ‰ç»“æŸçš„ï¼‰çš„äº‹åŠ¡IDup_limit_id; // è®°å½•m_idsåˆ—è¡¨ä¸­äº‹åŠ¡IDæœ€å°çš„ID low_limit_id; // ReadViewç”Ÿæˆæ—¶åˆ»ç³»ç»Ÿå°šæœªåˆ†é…çš„ä¸‹ä¸€ä¸ªäº‹åŠ¡IDï¼Œä¹Ÿå°±æ˜¯ç›®å‰å·²å‡ºç°è¿‡çš„äº‹åŠ¡IDçš„æœ€å¤§å€¼+1creator_trx_id // åˆ›å»ºè¯¥ReadViewçš„äº‹åŠ¡ID\n\nè¦çŸ¥é“ï¼Œå½“å‰äº‹åŠ¡æ˜¯çŸ¥é“è‡ªå·±çš„äº‹åŠ¡IDçš„ï¼ˆDB_TRX_IDï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰‹ä¸­å°±æœ‰å¿«ç…§è¯»ä¸­æœ€å¤§æœ€å°çš„äº‹åŠ¡IDï¼Œä»¥åŠå½“å‰æ´»è·ƒä¸­çš„äº‹åŠ¡IDï¼›é‚£ä¹ˆåœ¨è¯»å–ç‰ˆæœ¬é“¾çš„æ—¶å€™ï¼Œå°±è¿›è¡Œå¦‚ä¸‹åŒ¹é…ï¼Œè®¾å½“å‰å¼€å¯çš„è¿™ä¸ªäº‹åŠ¡ä¸ºA:\n\nç‰ˆæœ¬é“¾ä¸­çš„äº‹åŠ¡IDä¸å­˜åœ¨äºm_idsä¸­ï¼Œä»£è¡¨äº‹åŠ¡Aå¼€å¯çš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹åŠ¡å·²ç»æäº¤äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯»å–è¿™ä¸ªäº‹åŠ¡æ“ä½œçš„ç»“æœï¼›\nç‰ˆæœ¬é“¾ä¸­çš„äº‹åŠ¡IDå­˜åœ¨äºm_idsä¸­ï¼Œä»£è¡¨äº‹åŠ¡Aå¼€å¯çš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹åŠ¡æ˜¯æ´»è·ƒçŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘å°±ä¸åº”è¯¥è¯»åˆ°è¿™ä¸ªäº‹åŠ¡çš„æ“ä½œç»“æœï¼›\nç‰ˆæœ¬é“¾çš„ä¸­çš„äº‹åŠ¡IDå¤§äºlow_limit_idï¼Œä»£è¡¨äº‹åŠ¡Aå¼€å¯çš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹åŠ¡è¿˜ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿä¸åº”è¯¥çœ‹åˆ°è¿™ä¸ªåœ¨Aä¹‹åæ¥çš„äº‹åŠ¡çš„æ“ä½œç»“æœï¼›ï¼ˆAè¿˜æ²¡æ“ä½œå®Œæ¯•ï¼Œè¿™ä¸ªæ–°äº‹åŠ¡å°±æ¥äº†ï¼‰\nç‰ˆæœ¬é“¾ä¸­çš„äº‹ç‰©IDå°äºup_limit_idï¼Œä»£è¡¨äº‹ç‰©Aå¼€å¯çš„æ—¶å€™ï¼Œè¿™ä¸ªäº‹ç‰©éƒ½ä¸çŸ¥é“æ˜¯æ˜¯å®ƒçš„çˆ¶äº²è¾ˆè¿˜æ˜¯çˆ·çˆ·è¾ˆäº†ï¼Œé•¿è¾ˆç»™ä½ ç•™ä¸‹çš„ä¸œè¥¿è‚¯å®šå¾—å¥½å¥½æ”¶ç€ï¼›è¯´äººè¯ï¼šè¿™ä¸ªæ˜¯Aæ¥ä¹‹å‰çš„ä¹‹å‰å°±å·²ç»ç»“æŸäº†çš„äº‹ç‰©ï¼Œè‚¯å®šæ˜¯å¯ä»¥è¯»å–å…¶ç»“æœçš„ï¼›\n\nåœ¨MySQLä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æºç ï¼Œé“¾æ¥ä¹Ÿè´´å‡ºæ¥äº†ï¼Œgithubä¸Šå¯ä»¥æŸ¥çœ‹æºç ï¼›è¿™ä¸ªå‡½æ•°å°±æ˜¯ç”¨æ¥åˆ¤æ–­å½“å‰äº‹åŠ¡åº”è¯¥èƒ½çœ‹åˆ°é‚£äº›ç‰ˆæœ¬é“¾çš„ï¼Œå…·ä½“çš„åˆ¤æ–­é€»è¾‘å‚è€ƒä¸­æ–‡æ³¨é‡Šï¼ˆè‹±æ–‡æ³¨é‡Šæ˜¯å®˜æ–¹ç•™çš„ï¼‰\n// è¿™ä¸ªå‡½æ•°æ˜¯ReadViewç±»çš„æˆå‘˜å‡½æ•° ReadView::changes_visible // æºç é“¾æ¥ https://github.com/mysql/mysql-server/blob/ea1efa9822d81044b726aab20c857d5e1b7e046a/storage/innobase/include/read0types.h#L162  // [[nodiscard]] ä»£è¡¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸èƒ½è¢«å¿½ç•¥ï¼Œä¸€å®šéœ€è¦ä½¿ç”¨è¯¥è¿”å›å€¼ï¼›å¦åˆ™ç¼–è¯‘å™¨ä¼šçˆ†è­¦å‘Šï¼›å³å‘ŠçŸ¥ç¨‹åºå‘˜å¿…é¡»å…³æ³¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ï¼// å‡½æ•°çš„è¿”å›å€¼æ˜¯å½“å‰äº‹åŠ¡èƒ½å¦çœ‹åˆ°æŸä¸€ä¸ªäº‹åŠ¡idå€¼çš„ç‰ˆæœ¬é“¾ï¼Œå…¥å‚æ˜¯ç›®æ ‡äº‹åŠ¡id/** Check whether the changes by id are visible.  @param[in]    id      transaction id to check against the view  @param[in]    name    table name  @return whether the view sees the modifications of id. */  [[nodiscard]] bool changes_visible(trx_id_t id,                                     const table_name_t &amp;name) const &#123;    ut_ad(id &gt; 0);\t    // å°äºæœ€å°çš„äº‹åŠ¡idæˆ–è€…ç­‰äºå½“å‰äº‹åŠ¡idï¼Œåˆ™ä»£è¡¨è¿™ä¸ªäº‹åŠ¡æˆ‘ä»¬å¯ä»¥çœ‹åˆ°     if (id &lt; m_up_limit_id || id == m_creator_trx_id) &#123;      return (true);    &#125;    check_trx_id_sanity(id, name);\t// å¦‚æœè¿™ä¸ªidæ¯”å½“å‰äº‹åŠ¡ä¸­çš„é«˜æ°´ä½è¿˜å¤§ï¼Œè¯´æ˜è¿™ä¸ªidæ˜¯åæ¥è€…ï¼Œä¸åº”è¯¥çœ‹åˆ°    if (id &gt;= m_low_limit_id) &#123;      return (false);    &#125;\t// å¦‚æœå½“å‰äº‹åŠ¡åˆ›å»ºæ—¶ï¼Œæ²¡æœ‰æ´»è·ƒäº‹åŠ¡    // ä¸” m_up_limit_id &lt;= id &lt; m_low_limit_id     // é‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡IDå°±å¯ä»¥è¢«çœ‹åˆ°ï¼Œè¿”å›çœŸ     else if (m_ids.empty()) &#123;      return (true);    &#125;    const ids_t::value_type *p = m_ids.data();\t// å¦‚æœä¸Šé¢éƒ½æ²¡æœ‰åŒ¹é…åˆ°ï¼Œé‚£å°±æ£€æŸ¥è¿™ä¸ªidæ˜¯å¦åœ¨æ´»è·ƒåˆ—è¡¨m_idsä¸­    // std::binary_searchçš„è¿”å›å€¼ï¼šæ˜¯å¦åœ¨ä½å›¾ä¸­ï¼Œtrueä»£è¡¨åœ¨ï¼Œfalseä»£è¡¨ä¸åœ¨    // å¦‚æœåœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡æ˜¯æ´»è·ƒçŠ¶æ€ï¼Œä¸èƒ½è¢«çœ‹åˆ°    // å¦‚æœä¸åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªäº‹åŠ¡æ˜¯å·²ç»æäº¤äº†ï¼Œå¯ä»¥è¢«çœ‹åˆ°    return (!std::binary_search(p, p + m_ids.size(), id));  &#125;\n\nå¦‚æœæŸ¥åˆ°ä¸åº”è¯¥çœ‹åˆ°å½“å‰ç‰ˆæœ¬ï¼Œæ¥ä¸‹æ¥å°±æ˜¯éå†ä¸‹ä¸€ä¸ªç‰ˆæœ¬ï¼Œç›´åˆ°ç¬¦åˆæ¡ä»¶ï¼Œå³å¯ä»¥çœ‹åˆ°ã€‚è¿™ä¾¿æ˜¯æˆ‘ä»¬selectå½“å‰è¯»çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿçš„ReadViewç»“æ„ä½“çš„ä½œç”¨ï¼›\næ ¹æ®è¿™ä»½æºç ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½çŸ¥é“m_idsä½å›¾ä¸­ï¼Œå¹¶ä¸éœ€è¦å­˜æ”¾å½“å‰äº‹åŠ¡IDï¼Œå› ä¸ºä¼šæœ‰é¢å¤–çš„åˆ¤æ–­æ¥å¤„ç†å½“å‰äº‹åŠ¡IDï¼\n4.2 å¿«ç…§è¯»å®æ“4.2.1 å¿«ç…§æ˜¯ä»€ä¹ˆæ—¶å€™ç”Ÿæˆçš„ï¼Ÿå‡è®¾å½“å‰çš„äº‹åŠ¡æµç¨‹å¦‚ä¸‹ï¼Œçœç•¥å·ä»£è¡¨è¿™ä¸ªäº‹åŠ¡æ²¡æœ‰è¿›è¡Œæ“ä½œï¼Œäº‹åŠ¡2èƒ½çœ‹åˆ°äº‹åŠ¡1çš„æ“ä½œç»“æœå—ï¼Ÿ\n\n\n\näº‹åŠ¡1\näº‹åŠ¡2\n\n\n\näº‹åŠ¡å¼€å§‹\näº‹åŠ¡å¼€å§‹\n\n\næ’å…¥æ•°æ®1å¹¶æäº¤äº‹åŠ¡\nâ€¦â€¦\n\n\nâ€¦â€¦\nç¬¬ä¸€æ¬¡æŸ¥è¯¢\n\n\né‡å¼€ä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œæ’å…¥æ•°æ®2å¹¶æäº¤\nâ€¦â€¦\n\n\nâ€¦â€¦\nç¬¬äºŒæ¬¡æŸ¥è¯¢\n\n\næ¥å®æ“ä¸€ä¸‹ï¼Œå¼€ä¸¤ä¸ªMySQLç»ˆç«¯ï¼Œéš”ç¦»çº§åˆ«è®¾ç½®ä¸ºRRï¼›å›¾ä¸­é»„å­—æ ‡å‡ºäº†æ¯ä¸€ä¸ªSQLçš„æ‰§è¡Œé¡ºåºï¼›æˆ‘ä»¬ä¼šå‘ç°ï¼Œå½“å·¦ä¾§ç»ˆç«¯æäº¤äº†ç¬¬ä¸€ä¸ªæ’å…¥çš„æ•°æ®åï¼Œå³ä¾§æ‰æŸ¥è¯¢ï¼Œæ˜¯å¯ä»¥çœ‹åˆ°è¿™æ¡æ–°æ’å…¥çš„æ•°æ®çš„ï¼\nè€Œå·¦ä¾§æ’å…¥çš„ç¬¬äºŒæ¡æ•°æ®å³ä¾§å°±çœ‹ä¸åˆ°äº†ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ­¤æ—¶è®¿é—®çš„å°±æ˜¯å¿«ç…§ä¸­çš„æ—§æ•°æ®ï¼Œè€Œä¸æ˜¯æ–°æ•°æ®äº†ï¼›\n\nè¿™å°±å‘Šè¯‰æˆ‘ä»¬ï¼šå¿«ç…§è¯»çš„å¿«ç…§æ˜¯åœ¨äº‹åŠ¡ä¸­ç¬¬ä¸€æ¬¡æ‰§è¡Œselectè¯­å¥çš„æ—¶å€™ç”Ÿæˆçš„ï¼å¹¶ä¸æ˜¯äº‹åŠ¡å¼€å§‹çš„æ—¶å€™ç”Ÿæˆçš„ï¼\nè¿™ä¹Ÿéå¸¸åˆç†ï¼Œå¦‚æœä½ çš„å½“å‰äº‹åŠ¡å‹æ ¹æ²¡æœ‰è¿›è¡Œselectè¯­å¥ï¼Œé‚£æˆ‘ä¹Ÿå°±æ²¡æœ‰å¿…è¦ç”Ÿæˆå¿«ç…§äº†ã€‚æ¯•ç«Ÿå¿«ç…§çš„åº•å±‚æ˜¯ReadViewå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¼šå ç”¨å†…å­˜ç©ºé—´çš„ï¼è€Œå¢åˆ æ”¹æ“ä½œæœ¬èº«å°±æ˜¯å½“å‰è¯»ï¼Œæ— éœ€ç”Ÿæˆå¿«ç…§ï¼\n4.2.2 å®ä¾‹è§£é‡ŠReadViewçš„æˆå‘˜å˜é‡ç”¨å®é™…ä¾‹å­æ¥è§£é‡Šä¸€ä¸‹ReadViewé‡Œé¢çš„4ä¸ªæˆå‘˜å˜é‡åˆ°åº•åº”è¯¥å­˜æ”¾ä»€ä¹ˆå€¼ï¼›\nå‡è®¾æœ‰ä¸‹é¢è¿™ä¸ªæ•°æ®\n\n\n\nname\nage\nDB_TRX_ID(åˆ›å»ºè¿™ä¸ªè®°å½•çš„äº‹åŠ¡ID)\nDB_ROW_IDï¼ˆéšè—ä¸»é”®ï¼‰\nDB_ROLL_PTRï¼ˆå›æ»šæŒ‡é’ˆï¼‰\n\n\n\nå¼ ä¸‰\n19\nNULL\n1\nNULL\n\n\nä¸€å…±æœ‰4ä¸ªäº‹åŠ¡åŒæ—¶è¿è¡Œï¼Œè®¤ä¸ºäº‹åŠ¡åºå·å°±æ˜¯äº‹åŠ¡IDï¼›\n\n\n\näº‹åŠ¡2\näº‹åŠ¡3\näº‹åŠ¡4\näº‹åŠ¡5\n\n\n\näº‹åŠ¡å¼€å§‹\näº‹åŠ¡å¼€å§‹\näº‹åŠ¡å¼€å§‹\näº‹åŠ¡å¼€å§‹\n\n\nâ€¦â€¦\nâ€¦â€¦\nâ€¦â€¦\nä¿®æ”¹å¼ ä¸‰çš„å¹´é¾„å¹¶æäº¤\n\n\nè¿è¡Œ\nå¿«ç…§è¯»\nè¿è¡Œ\nâ€¦â€¦\n\n\nâ€¦â€¦\nâ€¦â€¦\nâ€¦â€¦\nâ€¦â€¦\n\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº‹åŠ¡3å¯¹æŸè¡Œæ•°æ®è¿›è¡Œäº†å¿«ç…§è¯»ï¼ŒMySQLå°±ä¼šåœ¨è¿™æ—¶å€™ç”Ÿæˆä¸€ä¸ªReadViewï¼Œå†…éƒ¨å˜é‡èµ‹å€¼å¦‚ä¸‹\nm_ids; // 2,4 (å½“å‰äº‹åŠ¡5å·²ç»æäº¤äº†ï¼Œæ‰€ä»¥é™¤äº†è‡ªå·±å°±åªæœ‰2å’Œ4æ´»è·ƒä¸­)up_limit_id; // 2 (m_idsä¸­æœ€å°äº‹åŠ¡ID)low_limit_id; // 5 + 1 = 6 (å½“å‰å·²ç»å‡ºç°çš„æœ€å¤§äº‹åŠ¡ID+1)creator_trx_id // 3 (å½“å‰äº‹åŠ¡ID)\n\nå½“äº‹åŠ¡3è¿›è¡Œå¿«ç…§è¯»çš„æ—¶å€™ï¼Œå°±ä¼šæ‹¿äº‹åŠ¡5çš„è¿™ä»½æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ï¼Œäº‹åŠ¡3çš„å¿«ç…§æ˜¯å¯ä»¥çœ‹åˆ°äº‹åŠ¡5å¯¹æ•°æ®è¿›è¡Œçš„ä¿®æ”¹çš„ï¼\nè€Œä¸”å¯¹äºå…¨å±€æ¥è¯´ï¼Œäº‹åŠ¡5æäº¤çš„è¿™ä»½æ•°æ®ä¹Ÿæ˜¯å½“å‰æœ€æ–°çš„æ•°æ®ï¼\n// æ¯”è¾ƒæµç¨‹ï¼ˆä¾ç…§ä¸Šæ–¹MySQLçš„æºç ï¼‰5 &lt; up_limit_id || 5 == 3; // ä¸å°äºæœ€å°çš„ï¼Œä¸”ä¹Ÿä¸ç­‰äºå½“å‰çš„äº‹åŠ¡ID 35 &gt; low_limit_id; // ä¸å¤§äºæœ€å¤§çš„// åˆ¤æ–­5æ˜¯å¦åœ¨m_idsé‡Œé¢m_ids.contains(5); // ä¸åœ¨// ç»“è®ºï¼šreturn true;// ä¹Ÿå°±æ˜¯äº‹åŠ¡3å¯ä»¥çœ‹åˆ°äº‹åŠ¡5çš„ä¿®æ”¹\n\n4.3 å½“å‰è¯»å®æ“å¿«ç…§è¯»çš„åœºæ™¯åŸºæœ¬ææ˜ç™½äº†ï¼Œå†æ¥è¯•è¯•å½“å‰è¯»ï¼ˆè¿™é‡Œå°æä¸€å˜´ï¼Œå†™-å†™å¹¶å‘å¯ä»¥ç†è§£ä¸ºæ‰€æœ‰æ“ä½œéƒ½æ˜¯å½“å‰è¯»ï¼Œéœ€è¦ä¸²è¡ŒåŒ–ï¼‰\nselect ... lock in share mode;\n\nä¸‹é¢æ˜¯ä¸¤ä¸ªä¸åŒçš„æ“ä½œæµç¨‹ï¼Œæœ€ç»ˆä¼šå¾—åˆ°ä¸åŒçš„ç»“æœï¼›æ“ä½œä¹‹å‰ï¼Œå…ˆæ‰§è¡Œå¦‚ä¸‹ä¸¤ä¸ªsql\ndelete from test_ruc;insert into test_ruc values (1,20,&#x27;å¼ ä¸‰&#x27;);\n\nåœ¨ç¬¬ä¸€æ¬¡æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬åœ¨å·¦ä¾§ç»ˆç«¯æ›´æ–°æ•°æ®ä¹‹å‰å°±æ‰§è¡Œäº†ä¸€æ¬¡å¿«ç…§è¯»ï¼Œæ­¤æ—¶MySQLä¼šç”Ÿæˆå¿«ç…§ï¼Œå³ä¾¿åœ¨å·¦ä¾§ç»ˆç«¯çš„äº‹åŠ¡commitäº†ä¹‹åï¼Œå³ä¾§ä¹Ÿæ— æ³•çœ‹åˆ°æœ€æ–°çš„user_id=18çš„æ•°æ®ï¼›\nä½†æ­¤æ—¶ä½¿ç”¨å½“å‰è¯»ï¼Œå°±å¯ä»¥è¯»å–åˆ°æœ€æ–°çš„æ•°æ®ï¼è§å›¾ä¸­å³ä¸‹è§’çš„çº¢è‰²ç¬¬å…­æ¬¡å½“å‰è¯»æ“ä½œï¼Œè¯»åˆ°äº†æœ€æ–°ä¿®æ”¹çš„user_id=18çš„æ•°æ®ã€‚\n\nè€Œåœ¨ç¬¬äºŒæ¬¡æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬è®©å·¦ä¾§ç»ˆç«¯å®Œæˆæ‰€æœ‰æ“ä½œå¹¶æäº¤äº‹åŠ¡åï¼Œå³ä¾§ç»ˆç«¯å†å»æŸ¥è¯¢ã€‚ä¼šå‘ç°å¿«ç…§è¯»å’Œå½“å‰è¯»éƒ½èƒ½æŸ¥è¯¢åˆ°æœ€æ–°çš„ä¿®æ”¹ï¼Œå› ä¸ºæ­¤æ—¶å¯¹äºå³ä¾§ç»ˆç«¯è€Œè¨€å¹¶æ²¡æœ‰å…¶ä»–æ´»è·ƒçš„äº‹åŠ¡ï¼Œå½“å‰è¯»å’Œå¿«ç…§è¯»å°±æ²¡æœ‰åŒºåˆ«äº†ã€‚\n\nç”±æ­¤å¯è§\n\nå¿«ç…§è¯»çš„å¿«ç…§æ˜¯ç¬¬ä¸€æ¬¡selectæŸ¥è¯¢çš„æ—¶å€™ç”Ÿæˆçš„ï¼›\nå½“å‰è¯»èƒ½ç»•è¿‡å¿«ç…§ï¼Œå®æ—¶æŸ¥çœ‹åˆ°æœ€æ–°æ•°æ®ï¼\n\n4.4 RRå’ŒRCçš„åŒºåˆ«å…ˆå¤ä¹ ä¸€ä¸‹ï¼ŒRCæ˜¯è¯»å·²æäº¤ï¼ˆRead Committedï¼‰ï¼ŒRRæ˜¯å¯é‡å¤è¯»ï¼ˆRepeatble Readï¼‰ã€‚\n\nç»è¿‡ä¸Šé¢çš„æµ‹è¯•æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ­£æ˜¯Read Viewç”Ÿæˆæ—¶æœºçš„ä¸åŒï¼Œä»è€Œé€ æˆRC&#x2F;RRçº§åˆ«ä¸‹å¿«ç…§è¯»çš„ç»“æœçš„ä¸åŒï¼›\nåœ¨RRçº§åˆ«ä¸‹çš„æŸä¸ªäº‹åŠ¡çš„å¯¹æŸæ¡è®°å½•çš„ç¬¬ä¸€æ¬¡å¿«ç…§è¯»ä¼šåˆ›å»ºä¸€ä¸ªå¿«ç…§åŠRead View, å°†å½“å‰ç³»ç»Ÿæ´»è·ƒçš„å…¶ä»–äº‹åŠ¡è®°å½•èµ·æ¥ï¼›\n\næ­¤ååœ¨è°ƒç”¨å¿«ç…§è¯»çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªRead Viewï¼Œæ‰€ä»¥åªè¦å½“å‰äº‹åŠ¡åœ¨å…¶ä»–äº‹åŠ¡æäº¤æ›´æ–°ä¹‹å‰ä½¿ç”¨è¿‡å¿«ç…§è¯»ï¼Œé‚£ä¹ˆä¹‹åçš„å¿«ç…§è¯»ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªRead Viewï¼Œæ‰€ä»¥å½“å‰äº‹åŠ¡å¯¹ç¬¬ä¸€æ¬¡å¿«ç…§è¯»ä¹‹åçš„ä¿®æ”¹ä¸å¯è§ã€‚\n\nå³RRçº§åˆ«ä¸‹ï¼Œå¿«ç…§è¯»ç”ŸæˆRead Viewæ—¶ï¼ŒRead Viewä¼šè®°å½•æ­¤æ—¶æ‰€æœ‰å…¶ä»–æ´»åŠ¨äº‹åŠ¡çš„å¿«ç…§ï¼Œè¿™äº›äº‹åŠ¡çš„ä¿®æ”¹å¯¹äºå½“å‰äº‹åŠ¡éƒ½æ˜¯ä¸å¯è§çš„ã€‚è€Œæ—©äºRead Viewåˆ›å»ºçš„äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹å‡æ˜¯å¯è§ã€‚\nè€Œåœ¨RCçº§åˆ«ä¸‹çš„äº‹åŠ¡ä¸­ï¼Œæ¯æ¬¡å¿«ç…§è¯»éƒ½ä¼šæ–°ç”Ÿæˆä¸€ä¸ªå¿«ç…§å’ŒRead View, è¿™å°±æ˜¯æˆ‘ä»¬åœ¨RCçº§åˆ«ä¸‹çš„äº‹åŠ¡ä¸­å¯ä»¥çœ‹åˆ°åˆ«çš„äº‹åŠ¡æäº¤çš„æ›´æ–°çš„åŸå› ï¼›\n\næ€»ä¹‹åœ¨RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œæ˜¯æ¯ä¸ªå¿«ç…§è¯»éƒ½ä¼šç”Ÿæˆå¹¶è·å–æœ€æ–°çš„Read Viewï¼›è€Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œåˆ™æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå¿«ç…§è¯»æ‰ä¼šåˆ›å»ºRead Viewï¼Œä¹‹åçš„å¿«ç…§è¯»è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªRead Viewã€‚ \næ­£æ˜¯RCæ¯æ¬¡å¿«ç…§è¯»ï¼Œéƒ½ä¼šå½¢æˆæ–°çš„Read Viewï¼Œèƒ½çœ‹åˆ°å…¶ä»–äº‹åŠ¡çš„å®æ—¶ä¿®æ”¹ï¼Œæ‰€ä»¥ï¼ŒRCæ‰ä¼šæœ‰ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚\n4.5 å°é”å’Œå°é”åè®®åœ¨ã€Šæ•°æ®åº“ç³»ç»ŸåŸç†ã€‹å­¦ä¹ ä¸­ä¼šæ¶‰åŠåˆ°è¿™ä¸ªæ¦‚å¿µã€‚\n4.5.1 Xé”å’ŒSé”é¦–å…ˆè®¤è¯†ä¸€ä¸‹ä¸¤ç§å°é”ç±»å‹ï¼Œåˆ†åˆ«æ˜¯Xé”å’ŒSé”ï¼š\n\nXé”ï¼ˆå†™é”ï¼‰ï¼šä¸Šäº†Xé”åå…¶ä»–äº‹åŠ¡ä¸èƒ½å¯¹å¯¹è±¡ä¸Šå…¶ä»–é”ï¼Œåªæœ‰ä¸Šé”çš„äº‹åŠ¡æ‰èƒ½æ“ä½œè¯»å†™ï¼›\nSé”ï¼ˆè¯»é”ï¼‰ï¼šä¸Šäº†Sé”åï¼Œå…¶ä»–äº‹åŠ¡ä¹Ÿèƒ½ä¸ŠSé”å’Œè¯»å–ï¼Œä½†æ˜¯ä¸èƒ½ä¿®æ”¹ã€‚ä¸Šäº†Sé”åä¸èƒ½ä¸ŠXé”ï¼›\n\nå…¶å®Sé”å’ŒXé”å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„è¯»å†™é”çš„æ¦‚å¿µï¼Œæ¯”è¾ƒå¥½ç†è§£ã€‚\nä¸‹å›¾æ˜¯ä¸€ä¸ªå°é”ç±»å‹çš„ç›¸å®¹çŸ©é˜µã€‚\n\n4.5.2 ä¸‰çº§å°é”åè®®ç„¶åæ˜¯åˆ†ä¸ºä¸‰çº§çš„å°é”åè®®ï¼š\n\nä¸€çº§ï¼šäº‹åŠ¡Tæ“ä½œæ•°æ®ä¹‹å‰ä¸ŠXé”ï¼Œäº‹åŠ¡ç»“æŸæ‰èƒ½é‡Šæ”¾\näºŒçº§ï¼šäº‹åŠ¡Tæ“ä½œæ•°æ®ä¹‹å‰ä¸ŠXé”ï¼ˆä¸€çº§ï¼‰å…¶ä»–äº‹åŠ¡è¯»å–è¯¥æ•°æ®ä¹‹å‰ä¸ŠSé”ï¼Œè¯»å–å®Œæ¯•åé‡Šæ”¾Sï¼›\nä¸‰çº§ï¼šäº‹åŠ¡Tæ“ä½œæ•°æ®ä¹‹å‰ä¸ŠXé”ï¼ˆä¸€çº§ï¼‰å…¶ä»–äº‹åŠ¡è¯»å–è¯¥æ•°æ®ä¹‹å‰ä¸ŠSé”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸé‡Šæ”¾ï¼›è¿™æ ·èƒ½é¿å…ä¸¢å¤±ä¿®æ”¹ã€è¯»è„æ•°æ®å’Œä¸å¯é‡å¤è¯»ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ç»´æŠ¤ä¸€è‡´æ€§çš„æ‰‹æ®µï¼›\n\nå¦‚æœæ‰€æœ‰äº‹åŠ¡éƒ½éµå¾ªç¬¬ä¸‰çº§å°é”åè®®ï¼Œç”±äºå…¶éš”ç¦»çº§åˆ«é«˜ï¼Œè¿™äº›äº‹åŠ¡æ— è®ºå¦‚ä½•äº¤å‰å¹¶è¡Œï¼Œæœ€ç»ˆéƒ½æ˜¯å¯ä¸²è¡ŒåŒ–çš„è°ƒåº¦ã€‚\n4.5.3 ä¸¤æ®µé”åè®® 2PLå› ä¸ºç¬¬ä¸‰çº§å°é”åè®®å¤ªè¿‡ä¸¥è‹›ï¼Œå¯¹å¹¶å‘æ€§æœ‰è´Ÿé¢å½±å“ï¼Œä¸‰çº§å°é”åè®®å…¶å®æ˜¯ä¸¤æ®µé”åè®®çš„ç‰¹ä¾‹ï¼ˆæ›´ä¸¥è‹›çš„ä¸¤æ®µé”åè®®ï¼‰\nä¸¤æ®µé”åè®®è¦æ±‚ï¼šäº‹åŠ¡åœ¨å¯¹ä»»ä½•æ•°æ®è¿›è¡Œè¯»å†™å‰ï¼Œéœ€è¦è·å¾—å¯¹è¯¥æ•°æ®çš„å°é”ï¼›è€Œäº‹åŠ¡åœ¨é‡Šæ”¾ä»»ä½•ä¸€ä¸ªå°é”åï¼Œä¸å¯ä»¥åœ¨è·å¾—ä»»ä½•å…¶ä»–å°é”ã€‚\näº‹åŠ¡éµé¡¼ä¸¤æ®µé”åè®®æ˜¯å¯ä¸²è¡ŒåŒ–çš„å……åˆ†æ¡ä»¶ï¼Œä½†éµå¾ªä¸¤æ®µé”åè®®æ˜¯å¯èƒ½å‘ç”Ÿæ­»é”çš„ã€‚\nThe endå…³äºMySQLäº‹åŠ¡çš„å†…å®¹åˆ°è¿™é‡ŒåŸºæœ¬å°±OVERäº†ï¼Œå†…å®¹å¤šå¤šï¼Œä¹Ÿéœ€è¦å¤šå¤šç†è§£å’Œå¤ä¹ ï¼\nå¯ä»¥æ·±å…¥é˜…è¯»å¦‚ä¸‹æ–‡ç« https://blog.csdn.net/SnailMann/article/details/94724197https://www.cnblogs.com/f-ck-need-u/archive/2018/05/08/9010872.htmlhttps://blog.csdn.net/chenghan_yang/article/details/97630626\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘C/C++ä»£ç æ“ä½œæ•°æ®åº“","url":"/posts/2109090511/","content":"ç®€å•å°è¯•ä½¿ç”¨ c è¯­è¨€çš„åº“å¯¹ mysql çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚\n\n\n1.æ–°å¢æ•°æ®åº“å’Œè¡¨åˆšå¼€å§‹æ•°æ®åº“æ²¡æœ‰è®¾å®šå¯†ç å’Œç”¨æˆ·ï¼Œç›´æ¥ç”¨rootç”¨æˆ·ç™»å½•\nmysql -uroot;\n\nåˆ›å»ºä¸€ä¸ªhelloæ•°æ®åº“ï¼Œå¹¶è¿›å…¥è¿™ä¸ªæ•°æ®åº“\ncreate database hello;use hello;\n\nåˆ›å»ºä¸€ä¸ªstu_studentæ•°æ®è¡¨\ncreate table stu_test( id int primary key auto_increment, name varchar(30), age int, score decimal(4,2));\n\nå…¶ä¸­ç¬¬ä¸€ä¸ªidçš„ç±»å‹æ˜¯intï¼Œå¹¶è®¾ç½®ä¸ºäº†auto_incrementï¼Œæ¯æ¬¡æ’å…¥æ•°æ®çš„æ—¶å€™å®ƒéƒ½ä¼šè‡ªå¢ã€‚\nnameæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œageæ˜¯intç±»å‹ï¼Œscoreåˆ†æ•°æ˜¯æµ®ç‚¹ç±»å‹\ndecimal(4,2)         è¡¨ç¤ºçš„èŒƒå›´æ˜¯ -99.99 ~ 99.99decimal(4,2)unsigned è¡¨ç¤ºçš„èŒƒå›´æ˜¯ 0 ~ 99.99\n\nåˆ°è¿™é‡Œï¼Œå‰æœŸçš„å‡†å¤‡å°±å®Œæˆäº†\n2.æ¥å£ç®€å•è®¤è¯†ä¾ç…§æ³¨é‡Šï¼Œç®€å•è®¤è¯†ä¸€ä¸‹mysqlåº“çš„ä¸€äº›æ¥å£\n//å¤´æ–‡ä»¶#include &lt;mysql/mysql.h&gt;//MySQLæ“ä½œå¥æŸ„åˆå§‹åŒ–MYSQL *mysql_init(MYSQL *mysql)ï¼›//å‚æ•°ä¸ºç©ºåˆ™åŠ¨æ€ç”³è¯·å¥æŸ„ç©ºé—´è¿›è¡Œåˆå§‹åŒ–//å¤±è´¥è¿”å›NULL//è¿æ¥mysqlæœåŠ¡å™¨MYSQL *mysql_real_connect(MYSQL *mysql, const char *host, const char *user,  const char *passwd,const char *db, unsigned int port,  const char *unix_socket, unsigned long client_flag); //mysql--åˆå§‹åŒ–å®Œæˆçš„å¥æŸ„//host---è¿æ¥çš„mysqlæœåŠ¡å™¨çš„åœ°å€//user---è¿æ¥çš„æœåŠ¡å™¨çš„ç”¨æˆ·å//passwd-è¿æ¥çš„æœåŠ¡å™¨çš„å¯†ç //db ----é»˜è®¤é€‰æ‹©çš„æ•°æ®åº“åç§°//port---è¿æ¥çš„æœåŠ¡å™¨çš„ç«¯å£ï¼š é»˜è®¤0æ˜¯3306ç«¯å£//unix_socket---é€šä¿¡ç®¡é“æ–‡ä»¶æˆ–è€…socketæ–‡ä»¶ï¼Œé€šå¸¸ç½®NULL //client_flag---å®¢æˆ·ç«¯æ ‡å¿—ä½ï¼Œé€šå¸¸ç½®0 //è¿”å›å€¼ï¼šæˆåŠŸè¿”å›å¥æŸ„ï¼Œå¤±è´¥è¿”å›NULL//è®¾ç½®å½“å‰å®¢æˆ·ç«¯çš„å­—ç¬¦é›†int mysql_set_character_set(MYSQL *mysql, const char *csname) //mysql--åˆå§‹åŒ–å®Œæˆçš„å¥æŸ„//csname--å­—ç¬¦é›†åç§°ï¼Œé€šå¸¸ï¼š&quot;utf8&quot; //è¿”å›å€¼ï¼šæˆåŠŸè¿”å›0ï¼Œ å¤±è´¥è¿”å›é0    //é€‰æ‹©æ“ä½œçš„æ•°æ®åº“int mysql_select_db(MYSQL *mysql, const char *db) //mysql--åˆå§‹åŒ–å®Œæˆçš„å¥æŸ„//db-----è¦åˆ‡æ¢é€‰æ‹©çš„æ•°æ®åº“åç§°//è¿”å›å€¼ï¼šæˆåŠŸè¿”å›0ï¼Œ å¤±è´¥è¿”å›é0    //æ‰§è¡Œsqlè¯­å¥int mysql_query(MYSQL *mysql, const char *stmt_str) //mysql--åˆå§‹åŒ–å®Œæˆçš„å¥æŸ„//stmt_str--è¦æ‰§è¡Œçš„sqlè¯­å¥//è¿”å›å€¼ï¼šæˆåŠŸè¿”å›0ï¼Œ å¤±è´¥è¿”å›é0    //ä¿å­˜æŸ¥è¯¢ç»“æœåˆ°æœ¬åœ°MYSQL_RES *mysql_store_result(MYSQL *mysql) //mysql--åˆå§‹åŒ–å®Œæˆçš„å¥æŸ„//è¿”å›å€¼ï¼šæˆåŠŸè¿”å›ç»“æœé›†çš„æŒ‡é’ˆï¼Œ å¤±è´¥è¿”å›NULL    //è·å–ç»“æœé›†ä¸­çš„è¡Œæ•°ä¸åˆ—æ•°uint64_t mysql_num_rows(MYSQL_RES *result)ï¼›//result--ä¿å­˜åˆ°æœ¬åœ°çš„ç»“æœé›†åœ°å€//è¿”å›å€¼ï¼šç»“æœé›†ä¸­æ•°æ®çš„æ¡æ•°ï¼›unsigned int mysql_num_fields(MYSQL_RES *result) //result--ä¿å­˜åˆ°æœ¬åœ°çš„ç»“æœé›†åœ°å€//è¿”å›å€¼ï¼šç»“æœé›†ä¸­æ¯ä¸€æ¡æ•°æ®çš„åˆ—æ•°ï¼›    //éå†ç»“æœé›†MYSQL_ROW mysql_fetch_row(MYSQL_RES *result) //result--ä¿å­˜åˆ°æœ¬åœ°çš„ç»“æœé›†åœ°å€//è¿”å›å€¼ï¼šå®é™…ä¸Šæ˜¯ä¸€ä¸ªchar **çš„æŒ‡é’ˆï¼Œå°†æ¯ä¸€æ¡æ•°æ®åšæˆäº†å­—ç¬¦ä¸²æŒ‡é’ˆæ•°ç»„ row[0]-ç¬¬0åˆ— row[1]-ç¬¬1åˆ—//å¹¶ä¸”è¿™ä¸ªæ¥å£ä¼šä¿å­˜å½“å‰è¯»å–ç»“æœä½ç½®ï¼Œæ¯æ¬¡è·å–çš„éƒ½æ˜¯ä¸‹ä¸€æ¡æ•°æ®//é‡Šæ”¾ç»“æœé›†void mysql_free_result(MYSQL_RES *result) //result--ä¿å­˜åˆ°æœ¬åœ°çš„ç»“æœé›†åœ°å€//è¿”å›å€¼ï¼švoid  //å…³é—­æ•°æ®åº“å®¢æˆ·ç«¯è¿æ¥ï¼Œé”€æ¯å¥æŸ„ï¼švoid mysql_close(MYSQL *mysql)  //è·å–mysqlæ¥å£æ‰§è¡Œé”™è¯¯åŸå› const char *mysql_error(MYSQL *mysql)\n\nå› ä¸ºmysqlæ˜¯ä¸€ä¸ªåŠ¨æ€åº“ï¼Œæ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Šåº“åçš„é“¾æ¥\ng++ test.cpp -o test -lmysqlclient\n\nåœ¨æˆ‘çš„ç³»ç»Ÿä¸‹ï¼ŒMySQLçš„åº“æ˜¯åœ¨/usr/lib64ç›®å½•ä¸‹çš„ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦é¢å¤–æŒ‡å®šåº“çš„è·¯å¾„ã€‚å¦‚æœä½ çš„ç³»ç»Ÿè¯¥ç›®å½•ä¸‹æ²¡æœ‰libmysqlclient.so ï¼Œåˆ™éœ€è¦æ‰¾åˆ°åº“å®‰è£…çš„è·¯å¾„ï¼Œä½¿ç”¨-Lå‘½ä»¤æŒ‡å®šè¯¥è·¯å¾„\ng++ test.cpp -o test -L/path/to/mysql/lib -lmysqlclient\n\n3.ä»£ç å¼€å§‹å†™ä»£ç ï¼Œä¸€æ­¥ä¸€æ­¥è®¤è¯†mysqlçš„å„ä¸ªæ¥å£\n3.1 è¿æ¥æ•°æ®åº“å› ä¸ºæˆ‘çš„æ•°æ®åº“éƒ½æ˜¯é»˜è®¤çš„ç¯å¢ƒï¼Œæ‰€ä»¥ä¸éœ€è¦è´¦æˆ·çš„å¯†ç ï¼ŒæŒ‰å¦‚ä¸‹å®å®šä¹‰ä¸€ä¸‹æˆ‘ä»¬éœ€è¦æ“ä½œçš„æ•°æ®åº“ä¿¡æ¯ï¼Œæ–¹ä¾¿åç»­çš„ä¿®æ”¹\n#include &lt;mysql/mysql.h&gt;#define HOST &quot;127.0.0.1&quot;#define PORT 3306#define USER &quot;root&quot;#define PASSWD &quot;&quot;#define DBNAME &quot;hello&quot;\n\nç¬¬ä¸€æ­¥ï¼Œæ˜¯ç”¨initæ¥åˆå§‹åŒ–ä¸€ä¸ªMYSQLçš„ç»“æ„ä½“ï¼Œå¹¶ç”¨ä¸€ä¸ªæŒ‡é’ˆæ¥æ¥æ”¶ï¼›\nç¬¬äºŒæ­¥ï¼Œç”¨mysql_real_connectå‡½æ•°æ¥è¿›è¡Œæ•°æ®åº“çš„è¿æ¥ï¼Œå¡«å…¥æˆ‘ä»¬åˆšåˆšçš„å®å®šä¹‰å³å¯ã€‚\nç¬¬ä¸‰æ­¥ï¼Œå› ä¸ºåœ¨æœ€åˆé…ç½®mariadbçš„ç¯å¢ƒæ—¶ï¼Œä¸ºäº†æ›´å¥½çš„æ”¯æŒä¸­æ–‡ï¼Œæˆ‘ä»¬å°†æ•°æ®åº“çš„å­—ç¬¦é›†è®¾ç½®ä¸ºäº†utf8ï¼Œä»£ç ä¸­ä¹Ÿéœ€è¦åŒæ­¥ä¿®æ”¹ï¼Œé¿å…å› ä¸ºç¼–ç é—®é¢˜äº§ç”Ÿçš„æ•°æ®ä¹±ç \næœ€åä¸€æ­¥ï¼Œé”€æ¯mysqlç»“æ„ä½“\nint main()&#123;    // è¿æ¥æ•°æ®åº“    // åˆå§‹åŒ–    MYSQL *mysql = mysql_init(nullptr);    if (mysql == nullptr) // è¿”å›å€¼ä¸ºç©ºä»£è¡¨initå¤±è´¥    &#123;         cerr &lt;&lt; &quot;[ERR] init mysql handle failed!\\n&quot;;         return -1;     &#125;    // è¿æ¥    cout &lt;&lt; &quot;[INFO] connect to &quot; &lt;&lt; HOST &lt;&lt; &quot;:&quot; &lt;&lt; PORT &lt;&lt; &quot; &quot; &lt;&lt; USER &lt;&lt; &quot; &quot; &lt;&lt; DBNAME &lt;&lt; endl;    // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¾“å‡ºå‹å‚æ•°ã€‚è¿”å›å€¼ä¸ºMYSQLçš„èµ·å§‹åœ°å€ï¼Œå¦‚æœé”™è¯¯è¿”å›NULL    if (mysql_real_connect(mysql, HOST, USER, PASSWD, DBNAME, PORT, nullptr, 0) == nullptr)     &#123;        cerr &lt;&lt; &quot;[ERR] mysql connect error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;         return -1;    &#125;    // é…ç½®ä¸ºå’Œæ•°æ®åº“åŒæ­¥çš„utf8å­—ç¬¦é›†    mysql_set_character_set(mysql, &quot;utf8&quot;);    // åˆ°è¿™é‡Œå°±å·²ç»æˆåŠŸäº†    cout &lt;&lt; &quot;[INFO] mysql database connect success!&quot; &lt;&lt; endl;         // å…³é—­è¿æ¥    mysql_close(mysql);     return 0;&#125;\n\nç¼–è¯‘æ‰§è¡Œï¼ŒæˆåŠŸé“¾æ¥ä¸Šäº†æ•°æ®åº“\n$ makeg++ test.cpp -o test -lmysqlclient$ ./test[INFO] connect to 127.0.0.1:3306 root hello[INFO] mysql database connect success!\n\n3.2 å¢åŠ é”®å€¼ä¸‹é¢è¦åšçš„ï¼Œå°±æ˜¯ç»™å·²æœ‰è¡¨æ–°å¢ä¸€ä¸ªé”®å€¼\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmysqlçš„ä»£ç æ“ä½œï¼Œå®é™…ä¸Šä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨sqlè¯­å¥çš„ï¼ˆè¿™ç‚¹æˆ‘è§‰å¾—å¥½éº»çƒ¦ï¼‰\næ’å…¥è¯­å¥å¦‚ä¸‹ï¼Œæ‹¬å·ä¸­çš„é”®å€¼åº”è¯¥å’Œæ•°æ®åº“ä¸­è¡¨çš„é”®å€¼ä¸€ä¸€å¯¹åº”\ninsert into stu_test value (null,&#x27;ç‰›çˆ·çˆ·&#x27;,50,64.6);\n\næ‰€ä»¥æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¼ å…¥çš„å‚æ•°åˆå¹¶æˆä¸€ä¸ªsqlè¯­å¥ï¼Œä¼ å…¥mysqlè¿›è¡Œå¤„ç†\n// å°†doubleè½¬ä¸ºstringstd::string double2string(const double&amp; d)&#123;    std::stringstream s_tmp;    s_tmp &lt;&lt; d;      std::string s = s_tmp.str();    return s;&#125;int add_key_to_stu(MYSQL *mysql,const std::string&amp; name,int age,double score)&#123;    // 1.å°†ä¼ å…¥çš„å‚æ•°å¤„ç†ä¸ºä¸€ä¸ªå®Œæ•´çš„sqlè¯­å¥    // å› ä¸ºç¬¬ä¸€ä¸ªç¼–å·å‚æ•°ï¼Œé…ç½®çš„æ˜¯è‡ªå¢ï¼Œæ‰€ä»¥éœ€è¦ä¼ å…¥null    std::string sql_cmd = &quot;insert into stu_test value (null,&#x27;&quot;;    sql_cmd+= name;    sql_cmd+= &quot;&#x27;,&quot;;    sql_cmd+= std::to_string(age);    sql_cmd+= &quot;,&quot;;    sql_cmd+= double2string(score);    sql_cmd+= &quot;);&quot;;    cout &lt;&lt; &quot;[INFO] &quot; &lt;&lt; sql_cmd &lt;&lt; endl;        // 2.æ‰§è¡Œè¯­å¥    int ret = mysql_query(mysql,sql_cmd.c_str());    if(ret!=0)    &#123;        cerr &lt;&lt; &quot;[ERR] mysql insert error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;     &#125;    return ret;&#125;\n\nå¦‚ä¸‹ä»£ç æµ‹è¯•\n// æ·»åŠ ä¸€ä¸ªæ•°æ®add_key_to_stu(mysql,&quot;ç‰›çˆ·çˆ·&quot;,50,64.6);add_key_to_stu(mysql,&quot;å°å›¾å›¾&quot;,5,72.8);\n\nå¯ä»¥çœ‹åˆ°ï¼ŒæˆåŠŸè¿è¡Œï¼\n$ ./test[INFO] connect to 127.0.0.1:3306 root hello[INFO] mysql database connect success![INFO] insert into stu_test value (null,&#x27;ç‰›çˆ·çˆ·&#x27;,50,64.6);[INFO] insert into stu_test value (null,&#x27;å°å›¾å›¾&#x27;,5,72.8);\n\nè¿›å…¥mysqlå‘½ä»¤è¡Œï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯æŸ¥è¯¢åˆ°å·²æœ‰çš„é”®å€¼\nselect * from stu_test;\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤„ç†æˆåŠŸï¼\n+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  1 | ç‰›çˆ·çˆ·    |   50 | 64.60 ||  2 | å°å›¾å›¾    |    5 | 72.80 |+----+-----------+------+-------+2 rows in set (0.001 sec)\n\n3.3 ä¿®æ”¹å·²æœ‰é”®å€¼sqlè¯­å¥å¦‚ä¸‹ï¼Œä¿®æ”¹å½“å‰æ•°æ®åº“ä¸­ï¼Œstu_testè¡¨ä¸­nameä¸ºç‰›çˆ·çˆ·çš„æ¡ç›®çš„æˆç»©ä¸º70\nupdate stu_test set score=70 where name=&#x27;ç‰›çˆ·çˆ·&#x27;;\n\n// ä¿®æ”¹å·²æœ‰å­¦ç”Ÿçš„æˆç»©int mod_score_in_stu(MYSQL *mysql,const std::string&amp; name,double score)&#123;    std::string sql_cmd = &quot;update &quot;;    sql_cmd += TABLENAME;    sql_cmd += &quot; set score=&quot;;    sql_cmd += double2string(score);    sql_cmd += &quot; where name=&#x27;&quot;;    sql_cmd += name;    sql_cmd += &quot;&#x27;;&quot;;    cout &lt;&lt; &quot;[INFO] &quot; &lt;&lt; sql_cmd &lt;&lt; endl;        // 2.æ‰§è¡Œè¯­å¥    int ret = mysql_query(mysql,sql_cmd.c_str());    if(ret!=0)    &#123;        cerr &lt;&lt; &quot;[ERR] mysql mod_score error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;     &#125;    return ret;&#125;\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ‰§è¡ŒæˆåŠŸäº†ä¹‹åï¼Œç‰›çˆ·çˆ·çš„æˆç»©å‘ç”Ÿäº†å˜åŒ–\n$ ./test[INFO] connect to 127.0.0.1:3306 root hello[INFO] mysql database connect success![INFO] update stu_test set score=70 where name=&#x27;ç‰›çˆ·çˆ·&#x27;;\n\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  1 | ç‰›çˆ·çˆ·    |   50 | 64.60 ||  2 | å°å›¾å›¾    |    5 | 72.80 |+----+-----------+------+-------+2 rows in set (0.001 sec)MariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  1 | ç‰›çˆ·çˆ·    |   50 | 70.00 ||  2 | å°å›¾å›¾    |    5 | 72.80 |+----+-----------+------+-------+2 rows in set (0.000 sec)\n\nå¦‚æœæƒ³ä¿®æ”¹å…¶ä»–é”®å€¼ï¼Œä¹Ÿæ˜¯ä¾ç…§æ­¤æ­¥éª¤è¿›è¡Œã€‚\nåœ¨å®é™…åœºæ™¯ä¸­ï¼Œä¸€ä¸ªæ•°æ®æ¡ç›®è‚¯å®šä¼šæœ‰ä¸€ä¸ªé”®å€¼æ˜¯ä¸å˜çš„ã€‚æ¯”å¦‚åœ¨æˆ‘çš„å­¦ç”Ÿè¡¨ä¸­ï¼Œå‡å®šæ¯ä¸€ä¸ªå­¦ç”Ÿçš„åå­—éƒ½ä¸å˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®nameå­—æ®µæ¥æŸ¥æ‰¾é”®å€¼ï¼Œå¯¹ä¹‹è¿›è¡Œå…¶ä»–å€¼çš„ä¿®æ”¹ã€‚\nå¦‚æœçœŸè¦ä¸¥è‚ƒèµ·æ¥ï¼Œç”¨åå­—æ¥æŸ¥æ‰¾è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬åº”è¯¥ç»™æ¯ä¸€ä¸ªå­¦ç”Ÿéƒ½ç”Ÿæˆä¸€ä¸ªå­¦å·æˆ–UIDï¼Œç”¨è¿™ä¸ªidæ¥è¿›è¡Œæ£€ç´¢ã€‚ä¿®æ”¹æ•°æ®ä¹‹å‰ï¼Œéƒ½éœ€è¦çŸ¥é“ç›®æ ‡æ•°æ®çš„uidå€¼ï¼Œæ‰èƒ½ä¿®æ”¹ã€‚\n3.4 åˆ é™¤é”®å€¼å¦‚ä¸‹è¯­å¥ï¼Œåœ¨test_tbè¡¨ä¸­ï¼Œåˆ é™¤åå­—ä¸ºå¼ ä¸‰çš„é”®å€¼\ndelete from test_tb where name=&#x27;å¼ ä¸‰&#x27;;\n\nåœ¨åˆ é™¤ä¹‹å‰ï¼Œæˆ‘åˆç»™æ•°æ®åº“æ–°å¢äº†ä¸€ä¸ªé”®å€¼\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  1 | ç‰›çˆ·çˆ·    |   50 | 70.00 ||  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 |+----+-----------+------+-------+3 rows in set (0.001 sec)\n\nä¸‹é¢æˆ‘è¦ç”¨ä»£ç ï¼Œåˆ é™¤æ‰ç‰›çˆ·çˆ·\n// åˆ é™¤é”®å€¼(æ ¹æ®åå­—)int del_key_in_stu(MYSQL *mysql,const std::string&amp; name)&#123;    std::string sql_cmd = &quot;delete from &quot;;    sql_cmd += TABLENAME;    sql_cmd += &quot; where name=&#x27;&quot;;    sql_cmd += name;    sql_cmd += &quot;&#x27;;&quot;;    cout &lt;&lt; &quot;[INFO] &quot; &lt;&lt; sql_cmd &lt;&lt; endl;        // æ‰§è¡Œè¯­å¥    int ret = mysql_query(mysql,sql_cmd.c_str());    if(ret!=0)    &#123;        cerr &lt;&lt; &quot;[ERR] mysql mod_score error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;     &#125;    return ret;&#125;\n\n// åˆ é™¤å·²æœ‰é”®å€¼del_key_in_stu(mysql,&quot;ç‰›çˆ·çˆ·&quot;);\n\nç¼–è¯‘æ‰§è¡Œ\n$ ./test[INFO] connect to 127.0.0.1:3306 root hello[INFO] mysql database connect success![INFO] delete from stu_test where name=&#x27;ç‰›çˆ·çˆ·&#x27;;\n\nç‰›çˆ·çˆ·è¢«åˆ æ‰äº†\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 |+----+-----------+------+-------+2 rows in set (0.000 sec)\n\n3.4.1 å…³äºè‡ªå¢çš„idæ­¤æ—¶å†æ’å…¥ä¸€ä¸ªæ–°çš„é”®å€¼ï¼Œå¯ä»¥çœ‹åˆ°idå¹¶ä¹ˆæœ‰æŠŠç©ºä½™çš„1ç»™è¡¥ä¸Šï¼Œè€Œæ˜¯ä»4å¼€å§‹ç»§ç»­å¾€åå¢åŠ \nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 ||  4 | ä¹è¿ª      |   32 | 99.00 |+----+-----------+------+-------+3 rows in set (0.001 sec)\n\nçŸ¥é“è¿™ä¸€ç‚¹å°±è¡Œ\n3.5 æŸ¥è¯¢å¯¹äºæ•°æ®åº“è€Œè¨€ï¼ŒæŸ¥è¯¢ä¹Ÿæ˜¯ä¸€ä¸ªé«˜é¢‘æ“ä½œ\nselect * from  tb  where name=key;\n\nä¸Šé¢çš„è¯­å¥ï¼Œæ˜¯åœ¨æ•°æ®åº“è¡¨tbä¸­æŸ¥æ‰¾é”®å€¼nameä¸ºkeyçš„çš„æ•°æ®\n// è¿”å›ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯,nameä¸ºç©ºè¿”å›æ‰€æœ‰void get_all_in_stu(MYSQL *mysql,const std::string&amp; name=&quot;&quot;)&#123;    std::string sql_cmd = &quot;select * from &quot;;    sql_cmd += TABLENAME;    if(name.size()!=0)    &#123;        sql_cmd += &quot; where name=&#x27;&quot;;        sql_cmd += name;        sql_cmd += &quot;&#x27;&quot;;    &#125;    sql_cmd += &quot;;&quot;;    cout &lt;&lt; &quot;[INFO] &quot; &lt;&lt; sql_cmd &lt;&lt; endl;    int ret = mysql_query(mysql,sql_cmd.c_str());    if(ret!=0)    &#123;        cerr &lt;&lt; &quot;[ERR] mysql query error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;         return ;    &#125;    // è·å–ç»“æœ    MYSQL_RES *res = mysql_store_result(mysql);    if (res == nullptr)     &#123;         cerr &lt;&lt; &quot;[ERR] mysql store_result error: &quot; &lt;&lt; mysql_error(mysql) &lt;&lt; endl;         return ;     &#125;        int row = mysql_num_rows(res); // è¡Œ    int col = mysql_num_fields(res); //åˆ—    printf(&quot;%10s%10s%10s%10s\\n&quot;, &quot;ID&quot;, &quot;å§“å&quot;, &quot;å¹´é¾„&quot;, &quot;æˆç»©&quot;);     for (int i = 0; i &lt; row; i++)     &#123;         MYSQL_ROW row_data = mysql_fetch_row(res);         for (int i = 0; i &lt; col; i++)         &#123;            printf(&quot;%10s&quot;, row_data[i]);         &#125;        printf(&quot;\\n&quot;);     &#125;     // é‡Šæ”¾ç»“æœ    mysql_free_result(res);&#125;\n\nget_all_in_stu(mysql);\n\næ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œæ˜¾ç¤ºå‡ºäº†è¡¨ä¸­æ‰€æœ‰çš„å€¼\n[INFO] connect to 127.0.0.1:3306 root hello[INFO] mysql database connect success![INFO] select * from stu_test;        ID    å§“å    å¹´é¾„    æˆç»©         2 å°å›¾å›¾         5     72.80         3 å¤§å¸é©¬        42     87.30         4    ä¹è¿ª        32     99.00\n\nä¼ å…¥ç‰¹å®šåå­—ï¼Œåˆ™åªè¿”å›æ”¹åå­—æ‰€æœ‰å€¼\nget_all_in_stu(mysql,&quot;ä¹è¿ª&quot;);\n\n[INFO] select * from stu_test where name=&#x27;ä¹è¿ª&#x27;;        ID    å§“å    å¹´é¾„    æˆç»©         4    ä¹è¿ª        32     99.00\n\nè¿™æ ·ä¾¿å®ç°äº†æŸ¥è¯¢æ“ä½œã€‚\n\n3.5.1 æ¨¡ç³ŠåŒ¹é…é™¤äº†ä½¿ç”¨name=ï¼Œè¿˜å¯ä»¥ä½¿ç”¨name like %åå­—%è¿™æ¡è¯­å¥è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ï¼Œå³ä¸åœ¨ä¹åå­—å‰åçš„å†…å®¹ï¼Œåªè¦æœ‰åŒ…å«åå­—çš„æ•°æ®ï¼Œå°±ç­›é€‰å‡ºæ¥ã€‚\nselect * from %s where name like &#x27;%ç‰›%&#x27;;\n\nè¿™æ ·å°±èƒ½å°†åå­—é‡Œé¢åŒ…å«ç‰›çš„æ‰€æœ‰æ•°æ®éƒ½ç­›é€‰å‡ºæ¥\n3.5.2 æŸ¥è¯¢æ¥å£æ“ä½œæ³¨æ„äº‹é¡¹å› ä¸ºæŸ¥è¯¢çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²äºŒç»´æ•°ç»„ï¼Œå¹¶ä¸èƒ½é€šè¿‡å­—æ®µåå­—è·å–åˆ°å¯¹åº”å­—æ®µçš„å†…å®¹ã€‚è¿™è¦æ±‚ç¨‹åºçŒ¿çŸ¥æ™“è¿™ä¸ªè¡¨ä¸­å­—æ®µçš„é¡ºåºï¼Œæ‰èƒ½é€šè¿‡ä¸‹æ ‡è·å–åˆ°æ­£ç¡®çš„å­—æ®µå¯¹å…¶è¿›è¡Œå¤„ç†ã€‚\nå› ä¸ºcppå¹¶ä¸åƒpythoné‚£æ ·æ”¯æŒå¯å˜å˜é‡ç±»å‹ï¼Œæ‰€ä»¥è¦æƒ³ç­›é€‰å‡ºå¯¹åº”ç±»å‹çš„æ•°æ®ï¼Œè¿˜éœ€è¦æˆ‘ä»¬è‡ªè¡Œè°ƒç”¨å¯¹åº”çš„å‡½æ•°è¿›è¡Œæ•°æ®çš„è½¬æ¢ã€‚\næ¯”å¦‚ç”¨atoiå‡½æ•°å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•´å‹ã€‚\nThe endåŸºæœ¬çš„æ“ä½œåˆ°è¿™é‡Œå°±OVERäº†ï¼Œåç»­çš„å…¶ä»–æ“ä½œä¼šæ›´æ–°æœ¬åšå®¢ï¼›\nè¯¦ç»†çš„ç”¨ä¾‹å¯ä»¥çœ‹æˆ‘çš„è§†é¢‘ç‚¹æ’­é¡¹ç›®å†…éƒ¨ä¸­å’Œmysqlç›¸å…³çš„ä»£ç \n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘ç”¨æˆ·ç®¡ç†","url":"/posts/1572064315/","content":"ç”¨æˆ·ç®¡ç†æ˜¯mysqlæƒé™æ§åˆ¶çš„é‡è¦ä¸€ç¯ã€‚\n1.MySQLçš„ç”¨æˆ·è¡¨åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œæ‰€æœ‰çš„ç”¨æˆ·éƒ½å­˜åœ¨ç³»ç»Ÿæ•°æ®åº“mysqlçš„userè¡¨å†…\nMariaDB [(none)]&gt; use mysql;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [mysql]&gt; select host,user,authentication_string from user;+-----------+-------------+-----------------------+| Host      | User        | authentication_string |+-----------+-------------+-----------------------+| localhost | mariadb.sys |                       || localhost | root        | invalid               || localhost | mysql       | invalid               |+-----------+-------------+-----------------------+3 rows in set (0.001 sec)\n\nå› ä¸ºæˆ‘è¿™æ˜¯ä¸€ä¸ªåˆšåˆšåˆå§‹åŒ–çš„æ•°æ®åº“ï¼Œå†…éƒ¨åªæœ‰ç³»ç»Ÿè‡ªå¸¦çš„å‡ ä¸ªç”¨æˆ·ã€‚å½“æˆ‘ä»¬ä½¿ç”¨mysql -urooté“¾æ¥æ•°æ®åº“æ—¶ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨äº†rootç”¨æˆ·ã€‚é»˜è®¤æƒ…å†µä¸‹rootç”¨æˆ·æ²¡æœ‰å¯†ç ï¼Œæ‰€ä»¥authentication_stringå­—æ®µæ˜¾ç¤ºinvalidï¼›\ndesc user; -- æŸ¥çœ‹è¡¨çš„ç»“æ„\n\nå¯¹è¿™å¼ è¡¨é‡Œçš„å­—æ®µåšä¸€ä¸ªç®€å•çš„è§£é‡Š\nhostï¼šç”¨æˆ·å¯ä»¥ä»ä»€ä¹ˆä¸»æœºä¸Šé“¾æ¥æ•°æ®åº“ï¼Œlocalhostä»£è¡¨åªå…è®¸æœ¬åœ°é“¾æ¥userï¼šç”¨æˆ·åpasswordï¼šæ—§ç‰ˆæœ¬ä½¿ç”¨çš„å¯†ç å­—æ®µauthentication_stringï¼šæ–°ç‰ˆæœ¬ä½¿ç”¨çš„å¯†ç å­—æ®µï¼Œç”¨æˆ·å¯†ç ç”¨passwordå‡½æ•°åŠ å¯†åçš„å­—ç¬¦ä¸²ï¼›å¾ˆå¤šå¾ˆå¤šä»¥_privç»“å°¾çš„å­—æ®µï¼šç”¨æˆ·æƒé™è®°å½•\n\nç”¨æˆ·å’Œæƒé™ç®¡ç†çš„å­˜åœ¨ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¯¹MySQLä¸­ä¸åŒçš„è¡¨è¿›è¡Œä¸€å®šçš„æƒé™é£æ§ï¼Œé¿å…æŸä¸ªç”¨æˆ·çš„è¯¯æ“ä½œè®©æ•´ä¸ªæ•°æ®åº“äº§ç”Ÿä¸å¯é€†çš„æŸå¤±ã€‚\n2.ç”¨æˆ·ç®¡ç†2.1 åˆ›å»ºç”¨æˆ·åœ¨MySQLä¸­åˆ›å»ºç”¨æˆ·çš„è¯­æ³•å¦‚ä¸‹\ncreate user &#x27;ç”¨æˆ·å&#x27;@&#x27;ç™»é™†ä¸»æœºæˆ–IP&#x27;identified by &#x27;å¯†ç &#x27;;\n\nç¤ºä¾‹å¦‚ä¸‹\nMariaDB [(none)]&gt; create user &#x27;mu&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;Query OK, 0 rows affected (0.006 sec)\n\nè¿™é‡Œæˆ‘ä½¿ç”¨äº†%ä½œä¸ºç™»å½•ä¸»æœºï¼Œå…¶ç­‰ä»·äºIPå±‚é¢ç†è§£çš„0.0.0.0ï¼Œå³è¯¥ç”¨æˆ·å…è®¸ä»»ä½•æ¥æºåœ°çš„é“¾æ¥ã€‚\nå†æ¬¡æŸ¥è¯¢ç”¨æˆ·è¡¨ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶muç”¨æˆ·æ˜¯æœ‰authentication_stringå­—æ®µçš„ï¼Œå…¶å€¼æ˜¯é€šè¿‡passwordå‡½æ•°åŠ å¯†åçš„123456ï¼›\nMariaDB [mysql]&gt; select host,user,authentication_string from user;+-----------+-------------+-------------------------------------------+| Host      | User        | authentication_string                     |+-----------+-------------+-------------------------------------------+| localhost | mariadb.sys |                                           || localhost | root        | invalid                                   || localhost | mysql       | invalid                                   || %         | mu          | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |+-----------+-------------+-------------------------------------------+4 rows in set (0.001 sec)\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œè°ƒç”¨passwordå‡½æ•°ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºå€¼å’Œä¸Šè¡¨ä¸­çš„å€¼ä¸€è‡´ã€‚\nMariaDB [mysql]&gt; select password(&#x27;123456&#x27;);+-------------------------------------------+| password(&#x27;123456&#x27;)                        |+-------------------------------------------+| *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |+-------------------------------------------+1 row in set (0.000 sec)\n\næ­¤æ—¶æƒ³ç”¨è¿™ä¸ªæ–°ç”¨æˆ·è¿›è¡Œç™»å½•ï¼Œåœ¨linuxçš„å‘½ä»¤è¡Œä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç™»å½•\nmysql -uç”¨æˆ·å -på¯†ç \n\n\nå¦‚æœä½ ç°åœ¨å¤„äºLinuxçš„å­ç”¨æˆ·ï¼Œç™»å½•MySQLçš„rootç”¨æˆ·éœ€è¦sudoæƒé™ï¼Œä½†ç™»å½•æ–°åˆ›å»ºçš„MySQLç”¨æˆ·æ˜¯ä¸éœ€è¦sudoçš„ã€‚\n\nç¤ºä¾‹å¦‚ä¸‹ï¼Œç™»å½•MySQLåå¯ä»¥ç”¨select user();è¯­å¥æŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·æ˜¯è°ã€‚\nâ¯ mysql -umu -p123456Welcome to the MariaDB monitor.  Commands end with ; or \\g.Your MariaDB connection id is 35Server version: 10.6.16-MariaDB-0ubuntu0.22.04.1 Ubuntu 22.04Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.Type &#x27;help;&#x27; or &#x27;\\h&#x27; for help. Type &#x27;\\c&#x27; to clear the current input statement.    MariaDB [(none)]&gt; select user();+--------------+| user()       |+--------------+| mu@localhost |+--------------+1 row in set (0.000 sec)\n\n2.2 åˆ é™¤ç”¨æˆ·åªæœ‰é«˜æƒé™ç”¨æˆ·æˆ–è€…rootç”¨æˆ·æ‰èƒ½åˆ é™¤å…¶ä»–ç”¨æˆ·ã€‚\ndrop user &#x27;ç”¨æˆ·å&#x27;@&#x27;ä¸»æœºå&#x27;;\n\nå¦‚æœåœ¨ä¼ å…¥ç”¨æˆ·åæ—¶ä¸æä¾›ä¸»æœºåï¼Œåˆ™ä¸»æœºåé»˜è®¤ä¸º%ï¼›\ndrop user &#x27;ç”¨æˆ·å&#x27;;-- ç­‰ä»·äºdrop user &#x27;ç”¨æˆ·å&#x27;@&#x27;%&#x27;;\n\nç¤ºä¾‹å¦‚ä¸‹\nMariaDB [mysql]&gt; drop user &#x27;mu&#x27;@&#x27;192.168.1.30&#x27;;Query OK, 0 rows affected (0.006 sec)\n\nä¸ºä»€ä¹ˆåœ¨åˆ é™¤ç”¨æˆ·çš„æ—¶å€™éœ€è¦æŒ‡å®šä¸»æœºåï¼Ÿä¸ºä»€ä¹ˆåœ¨åˆ é™¤ç”¨æˆ·çš„æ—¶å€™éœ€è¦æŒ‡å®šä¸»æœºåï¼Ÿå› ä¸ºåŒä¸€ä¸ªç”¨æˆ·åï¼Œä¸åŒä¸»æœºåæ˜¯å¯ä»¥åˆ›å»ºå¤šä¸ªçš„ï¼ŒMySQLå¹¶æ²¡æœ‰é™åˆ¶ä¸€ä¸ªç”¨æˆ·ååªèƒ½åˆ›å»ºä¸€æ¡è®°å½•ã€‚\næ¯”å¦‚æˆ‘ä»¬å¯ä»¥å…è®¸å¼ ä¸‰åœ¨IP1å’ŒIP2ç™»å½•ï¼Œè¿™æ ·å°±èƒ½åˆ›å»ºä¸¤æ¡ç”¨æˆ·è®°å½•ï¼Œè¿™ä¸¤æ¡ç”¨æˆ·è®°å½•çš„ç”¨æˆ·åéƒ½æ˜¯å¼ ä¸‰ï¼Œä½†å¯ä»¥æœ‰ä¸åŒçš„ç™»å½•æ¥æºhostå’Œä¸åŒçš„å¯†ç ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥æ§åˆ¶å•ä¸ªç”¨æˆ·åœ¨ä¸åŒä¸»æœºä¸Šçš„ä¸åŒæƒé™ã€‚\nMariaDB [mysql]&gt; create user &#x27;mu&#x27;@&#x27;192.168.1.30&#x27; identified by &#x27;123456&#x27;;Query OK, 0 rows affected (0.006 sec)MariaDB [mysql]&gt; select host,user,authentication_string from user;+--------------+-------------+-------------------------------------------+        | Host         | User        | authentication_string                     |        +--------------+-------------+-------------------------------------------+        | localhost    | mariadb.sys |                                           |        | localhost    | root        | invalid                                   |        | localhost    | mysql       | invalid                                   |        | %            | mu          | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |        | 192.168.1.30 | mu          | *6BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 |        +--------------+-------------+-------------------------------------------+        5 rows in set (0.001 sec)\n\n2.3 è®¾ç½®ç”¨æˆ·å¯†ç è®¾ç½®å½“å‰ç”¨æˆ·çš„å¯†ç \nset password=password(&#x27;æ–°å¯†ç &#x27;);\n\nä¿®æ”¹ç‰¹å®šç”¨æˆ·çš„å¯†ç \nset password for &#x27;ç”¨æˆ·å&#x27;@&#x27;ä¸»æœºå&#x27;=password(&#x27;æ–°å¯†ç &#x27;);\n\nç¤ºä¾‹å¦‚ä¸‹\nMariaDB [mysql]&gt; set password for &#x27;mu&#x27;@&#x27;%&#x27;=password(&#x27;654321&#x27;);Query OK, 0 rows affected (0.006 sec)MariaDB [mysql]&gt; select host,user,authentication_string from user;+-----------+-------------+-------------------------------------------+| Host      | User        | authentication_string                     |+-----------+-------------+-------------------------------------------+| localhost | mariadb.sys |                                           || localhost | root        | invalid                                   || localhost | mysql       | invalid                                   || %         | mu          | *2A032F7C5BA932872F0F045E0CF6B53CF702F2C5 |+-----------+-------------+-------------------------------------------+4 rows in set (0.001 sec)\n\n2.4 å‘½ä»¤æ±‡æ€»å°ç»“åœ¨æˆ‘çš„å®é™…ä½¿ç”¨ä¸­ï¼Œæœ€å¸¸ç”¨çš„ç”¨æˆ·ç®¡ç†å°±æ˜¯åœ¨é…ç½®éœ€è¦ä½¿ç”¨MySQLæ•°æ®åº“çš„dockeræ—¶çš„æ“ä½œäº†ã€‚éœ€è¦ç»™ä¸€ä¸ªæ–°çš„dockerè®¾ç½®æ–°çš„æ•°æ®åº“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç”¨æˆ·ç»™è¿™ä¸ªdockeræ¥æ“ä½œã€‚\n-- å¦‚æœæ˜¯dockerå®‰è£…çš„MySQL-- éœ€è¦å…ˆåœ¨Linuxç³»ç»Ÿä¸­è¿›å…¥MySQLå®¹å™¨çš„ç»ˆç«¯é‡Œé¢docker exec -it å®¹å™¨å /bin/sh-- åœ¨ç»ˆç«¯å‘½ä»¤è¡Œä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤mysql -uroot -på¯†ç -- è¿›å…¥MySQLå‘½ä»¤è¡Œåï¼Œåˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·create database æ•°æ®åº“åå­—;-- æ•°æ®åº“åå­—è¦å’Œä¸Šé¢åˆ›å»ºçš„è¿™ä¸ªæ•°æ®åº“å¯¹åº”-- ç»™å®šæ–°è¡¨çš„æ‰€æœ‰æƒé™åˆ°æ–°ç”¨æˆ·ä¸ŠCREATE USER &#x27;ç”¨æˆ·å&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;ç”¨æˆ·çš„å¯†ç &#x27;;GRANT ALL ON æ•°æ®åº“åå­—.* TO &#x27;ç”¨æˆ·å&#x27;@&#x27;%&#x27;;\n\n3.æƒé™ç®¡ç†3.1 æƒé™åˆ—è¡¨MySQLæ•°æ®åº“æä¾›çš„æƒé™éå¸¸ç»†è‡´ï¼Œåˆ—è¡¨å¦‚ä¸‹\n\n3.2 ç»™ç”¨æˆ·æˆæƒæˆæƒçš„è¯­æ³•\ngrant æƒé™åˆ—è¡¨ on æ•°æ®åº“.å¯¹è±¡å to &#x27;ç”¨æˆ·å&#x27;@&#x27;ä¸»æœº&#x27; [identified by &#x27;å¯†ç &#x27;]\n\nå¦‚æœéœ€è¦æˆäºˆå¤šä¸ªæƒé™ï¼Œç”¨é€—å·åˆ†éš”ã€‚\ngrant select,delete on æ•°æ®åº“.å¯¹è±¡å to &#x27;ç”¨æˆ·å&#x27;@&#x27;ä¸»æœº&#x27; [identified by &#x27;å¯†ç &#x27;]\n\nå¦‚æœæƒ³æˆäºˆæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ä½¿ç”¨allï¼Œæˆ–è€…all privilegesï¼ŒäºŒè€…éƒ½ä»£è¡¨æ‰€æœ‰æƒé™ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚\ngrant all [privileges] on ... \n\nå‡ ç‚¹è¯´æ˜\n\nå‘½ä»¤ä¸­çš„[identified by &#39;å¯†ç &#39;]æ˜¯å¯é€‰é¡¹ï¼Œå¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œåˆ™ä¿®æ”¹å…¶å¯†ç ã€‚å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ™ä»¥è¯¥å¯†ç åˆ›å»ºç”¨æˆ·ã€‚\næ•°æ®åº“.å¯¹è±¡åå¯ä½¿ç”¨*.* ï¼Œä»£è¡¨å½“å‰MySQLä¸­çš„æ‰€æœ‰æ•°æ®å¯¹è±¡ï¼›\næ•°æ®åº“.*ä»£è¡¨æŸä¸ªæ•°æ®åº“ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼›\n\næˆæƒç¤ºä¾‹åˆšåˆ›å»ºçš„ç”¨æˆ·æ˜¯æ²¡æœ‰ä»»ä½•æƒé™çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘åˆšåˆšåˆ›å»ºçš„muç”¨æˆ·å¹¶æ²¡æœ‰çœ‹åˆ°åŸæœ¬å·²æœ‰çš„stu_testæ•°æ®åº“ã€‚\nMariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema |+--------------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select user();+--------------+| user()       |+--------------+| mu@localhost |+--------------+1 row in set (0.000 sec)\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç»™ç”¨æˆ·æˆæƒ\ngrant select on stu_test.student to &#x27;mu&#x27;@&#x27;%&#x27;;\n\næˆæƒä¹‹åï¼Œmuç”¨æˆ·å°±èƒ½çœ‹åˆ°è¿™ä¸ªè¡¨äº†\nMariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || stu_test           |+--------------------+2 rows in set (0.001 sec)\n\nmuç”¨æˆ·å¯ä»¥è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œä½†æ˜¯ä¸èƒ½åˆ æ”¹studentè¡¨ï¼Œæ“ä½œä¼šè¢«æ•°æ®åº“æ‹’ç»ã€‚\nMariaDB [(none)]&gt; use stu_test;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedMariaDB [stu_test]&gt; select * from student;+------+--------+| id   | name   |+------+--------+|    1 | å¼ ä¸‰   ||    2 | æå››   ||    3 | ç‹äº”   ||    4 | èµµå…­   ||    5 | åˆ˜ä¸ƒ   |+------+--------+5 rows in set (0.000 sec)MariaDB [stu_test]&gt; insert into student values (6,&#x27;ç‹ç’&#x27;);ERROR 1142 (42000): INSERT command denied to user &#x27;mu&#x27;@&#x27;localhost&#x27; for table `stu_test`.`student`\n\nå†æ¬¡ç»™äºˆæ›´æ–°å’Œåˆ é™¤çš„æƒé™\ngrant select,update,delete,insert on stu_test.student to &#x27;mu&#x27;@&#x27;%&#x27;;\n\næ­¤æ—¶muç”¨æˆ·å°±èƒ½è¿›è¡Œæ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œäº†\nMariaDB [stu_test]&gt; insert into student values (6,&#x27;ç‹ç’&#x27;);Query OK, 1 row affected (0.006 sec)MariaDB [stu_test]&gt; delete from student where id = 5;Query OK, 1 row affected (0.007 sec)\n\nåˆ·æ–°æƒé™å¦‚æœå‘ç°èµ‹äºˆæƒé™åç”¨æˆ·è¿˜æ˜¯ä¸èƒ½æ‰§è¡ŒæŸäº›æ“ä½œï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤åˆ·æ–°æƒé™\nflush privileges;\n\n3.3 å›æ”¶æƒé™è¯­æ³•\nrevoke æƒé™åˆ—è¡¨ on æ•°æ®åº“.å¯¹è±¡å from &#x27;ç”¨æˆ·å&#x27;@&#x27;ä¸»æœº&#x27;;\n\næ¯”å¦‚å›æ”¶muç”¨æˆ·å¯¹äºstudentè¡¨çš„æ’å…¥æƒé™\nrevoke insert on stu_test.student from &#x27;mu&#x27;@&#x27;%&#x27;;\n\næ­¤æ—¶muç”¨æˆ·åˆä¸èƒ½è¿›è¡Œæ’å…¥æ“ä½œäº†\nMariaDB [stu_test]&gt; insert into student values (7,&#x27;ä½ å¥½&#x27;);ERROR 1142 (42000): INSERT command denied to user &#x27;mu&#x27;@&#x27;localhost&#x27; for table `stu_test`.`student`\n\nThe endMySQLä¸­ç”¨æˆ·ç®¡ç†çš„åŸºæœ¬æ“ä½œå°±æ˜¯è¿™äº›äº†ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç”¨æˆ·ç®¡ç†æ˜¯æ•°æ®åº“å®‰å…¨æ€§çš„é‡è¦ä¸€ç¯ï¼Œå¾—å¤šåŠ æ³¨æ„ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["mysql"]},{"title":"ã€MySQLã€‘åŸºç¡€å‘½ä»¤æ“ä½œ","url":"/posts/2109090510/","content":"æœ¬æ–‡è®°å½•äº†MySQLçš„åŸºç¡€SQLå‘½ä»¤ã€‚\n\n\næœ¬æ–‡æ¼”ç¤ºæ‰€ç”¨mariadbç‰ˆæœ¬ï¼Œå¯ä»¥è®¤ä¸ºå…¶ä¸MySQL8å¯¹åº”ã€‚\nmysql  Ver 15.1 Distrib 10.3.28-MariaDB, for Linux (x86_64) using readline 5.1\n\nå‰è¨€ï¼šSQLè¯­å¥çš„åˆ†ç±»å­¦ä¹ MySQLä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹MySQLä¸­SQLçš„åˆ†ç±»\n\nDDLã€data definition languageã€‘ æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥ç»´æŠ¤å­˜å‚¨æ•°æ®çš„ç»“æ„ã€‚ä»£è¡¨æŒ‡ä»¤: create, drop, alter \nDMLã€data manipulation languageã€‘ æ•°æ®æ“çºµè¯­è¨€ï¼Œç”¨æ¥å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚ä»£è¡¨æŒ‡ä»¤ï¼š insertï¼Œdeleteï¼Œupdate \nDMLä¸­åˆå•ç‹¬åˆ†äº†ä¸€ä¸ªDQLï¼Œæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œä»£è¡¨æŒ‡ä»¤ï¼š select \n\n\nDCLã€Data Control Languageã€‘ æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œä¸»è¦è´Ÿè´£æƒé™ç®¡ç†å’Œäº‹åŠ¡ã€‚ ä»£è¡¨æŒ‡ä»¤ï¼š grantï¼Œrevokeï¼Œcommit\n\n0.è¿æ¥mysqlé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„mysqlæ²¡æœ‰å¯†ç ï¼Œç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå°±èƒ½é“¾æ¥ä¸Šmysql\nmysql -uroot\n\nmysqlæ•°æ®åº“æ–‡ä»¶è·¯å¾„\n/var/lib/mysql\n\nmysqlçš„è¯­å¥æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼Œå¤§å°å†™éƒ½å¯ä»¥ã€‚\nå¦‚æœä½ çš„MySQLæœ‰å¯†ç ï¼Œé‚£å°±æ˜¯ç”¨å¦‚ä¸‹å‘½ä»¤è¿›å…¥MySQLå‘½ä»¤è¡Œ\nmysql -uroot -p123456 # ç¤ºä¾‹mysql -uç”¨æˆ·å -på¯†ç   # åŸºæœ¬æ“ä½œ\n\n0.1 æŸ¥çœ‹æœ‰è°è¿æ¥äº†show processlist;\n\nè¯¥å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰æœ‰è°è¿æ¥äº†MySQLæœåŠ¡ï¼Œæ‰€åœ¨æ•°æ®åº“æ˜¯ä»€ä¹ˆï¼Œæ­£åœ¨æ‰§è¡Œçš„cmdæ˜¯ä»€ä¹ˆ\n\n0.2 æŸ¥çœ‹æ”¯æŒçš„å­˜å‚¨å¼•æ“mysqlæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“\n\nå­˜å‚¨å¼•æ“æ˜¯ï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå¦‚ä½•å­˜å‚¨æ•°æ®ã€å¦‚ä½•ä¸ºå­˜å‚¨çš„æ•°æ®å»ºç«‹ç´¢å¼•å’Œå¦‚ä½•æ›´æ–°ã€æŸ¥è¯¢æ•°æ®ç­‰æŠ€æœ¯çš„å®ç°æ–¹æ³•ã€‚\n\næ¯ä¸ªå¼•æ“å„æœ‰å…¶ä¼˜åŠ¿ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥æŸ¥è¯¢å½“å‰æ”¯æŒçš„å¼•æ“\nshow engines;\n\n\n1.æ•°æ®åº“1.1 åˆ›å»ºcreate database æ•°æ®åº“åå­—;create database if not exists æ•°æ®åº“åå­—; # å¦‚æœä¸å­˜åœ¨æ‰åˆ›å»ºcreate database hello;\n\nä¸Šé¢çš„å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåä¸ºhelloçš„æ•°æ®åº“ã€‚å¯¹äºmysqlæœåŠ¡ç«¯è€Œè¨€ï¼Œå…¶å®é™…ä¸Šæ˜¯åœ¨æ•°æ®æ–‡ä»¶è·¯å¾„ä¸­ï¼Œå¸®æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¯¹åº”çš„æ–‡ä»¶å¤¹\n\nå¦‚æœæ˜¯mysql5.7ï¼Œåœ¨åˆ›å»ºè¯­å¥ä¹‹å‰æ–°å¢ä¸€ä¸ªshowï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ‰§è¡Œè¯­å¥çš„è¯¦ç»†ä¿¡æ¯ã€‚æˆ‘å½“å‰ä½¿ç”¨çš„æ˜¯é«˜ç‰ˆæœ¬çš„mariadbï¼Œä¸æ”¯æŒè¿™ä¸ªæ“ä½œ\nshow create database hello;\n\nåˆ›å»ºæ•°æ®åº“æˆ–è€…è¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™åç§°å¸¦ä¸Šå¦‚ä¸‹ç¬¦å·ä½œä¸ºåˆ†å‰²ç¬¦\ncreate database `æ•°æ®åº“åç§°`;\n\nMariaDB [(none)]&gt; create database `test2`;Query OK, 1 row affected (0.001 sec)\n\nå¸¦ä¸Šè¯¥ç¬¦å·åï¼Œå¯ä»¥ç”¨äºåŒºåˆ†ä½ çš„è¡¨åå’Œæ•°æ®åº“çš„å†…ç½®è¯­å¥ã€‚å»ºè®®åˆ›å»ºã€åˆ é™¤æ“ä½œçš„æ—¶å€™ï¼Œéƒ½ç»™åå­—å¸¦ä¸Šè¿™ä¸ªç¬¦å·ã€‚\nå½“ç„¶ï¼Œåˆ›å»ºçš„æ•°æ®åº“ã€è¡¨åæœ€å¥½ä¸è¦å’Œmysqlå†…ç½®è¯­å¥å†²çªï¼Œè¿™å’Œå†™ä»£ç çš„æ—¶å€™ä¸è¦ç”¨ç¼–ç¨‹è¯­è¨€çš„å…³é”®å­—&#x2F;åº“å‡½æ•°åæ¥å‘½åå˜é‡ä¸€æ ·ã€‚\n1.2 æŸ¥çœ‹å·²æœ‰show databases;\n\næŸ¥çœ‹å½“å‰å·²æœ‰æ•°æ®åº“\n+--------------------+| Database           |+--------------------+| hello              || information_schema || mysql              || performance_schema |+--------------------+4 rows in set (0.001 sec)\n\n1.3 è¿›å…¥è¿›å…¥è¿™ä¸ªæ•°æ®åº“\nuse hello;\n\n1.4 åˆ é™¤drop database [if exists] åå­—;\n\nå¦‚ä¸‹ï¼Œæˆ‘å…ˆæ˜¯åˆ›å»ºäº†ä¸€ä¸ªtest1æ•°æ®åº“\nMariaDB [(none)]&gt; create database test1;Query OK, 1 row affected (0.001 sec)MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| hello              || information_schema || mysql              || performance_schema || test1              |+--------------------+5 rows in set (0.000 sec)\n\nç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤åˆ é™¤è¯¥æ•°æ®åº“\ndrop database test1;\n\næˆåŠŸåˆ é™¤\nMariaDB [(none)]&gt; drop database test1;Query OK, 0 rows affected (0.035 sec)MariaDB [(none)]&gt; show databases;+--------------------+| Database           |+--------------------+| hello              || information_schema || mysql              || performance_schema |+--------------------+4 rows in set (0.001 sec)\n\næ•°æ®æ–‡ä»¶è·¯å¾„ä¸­ï¼Œtest1æ–‡ä»¶å¤¹ä¹Ÿè¢«å¯¹åº”åˆ é™¤\n\n1.5 å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™å­—ç¬¦é›†ä¼šæœ‰è‡ªå·±å¯¹åº”çš„æ ¡éªŒè§„åˆ™\n\nå­—ç¬¦é›†ç”¨äºå°†æ•°æ®ä»¥ç‰¹å®šç¼–ç å­˜å…¥æ•°æ®åº“\næ ¡éªŒè§„åˆ™ç”¨äºå–æ•°æ®æ—¶å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒ\n\nä¿®æ”¹å­—ç¬¦é›†çš„æ—¶å€™ï¼Œmysqlä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨æŒ‡å®šå¯¹åº”çš„æ ¡éªŒè§„åˆ™\n1.5.1 å­—ç¬¦é›†ä¸€ä¸ªæ•°æ®è¢«å­˜æ”¾çš„æ—¶å€™ï¼Œæ˜¯ä¼šæœ‰å…¶æ‰€ç”¨çš„ç¼–ç çš„ã€‚ç¼–ç ä¸ç›¸åŒï¼Œä¼šå¯¼è‡´æ•°æ®åœ¨ä¸åŒè½¯ä»¶ä¸­æ˜¾ç¤ºå‡ºä¸åŒçš„ç»“æœã€‚\n\næ¯”å¦‚ æˆ‘ä»¬ä½¿ç”¨VSå†™çš„Cè¯­è¨€ä»£ç ï¼Œæ–‡ä»¶å†…çš„ä¸­æ–‡æ³¨é‡Šæ”¾å…¥devc++ä¹‹ä¸­ï¼Œæœ‰å¯èƒ½ä¼šä¹±ç ï¼Œè¿™å°±æ˜¯å­—ç¬¦ç¼–ç ä¸åŒ¹é…çš„åŸå› \n\nshow variables like è¯­å¥å¯ä»¥æŸ¥çœ‹mysqlçš„å†…ç½®å˜é‡ï¼Œå…¶ä¸­å¦‚ä¸‹å˜é‡å°±æ˜¯æ•°æ®åº“å­—ç¬¦é›†çš„ç¼–ç æ ¼å¼\nshow variables like &#x27;character_set_database&#x27;;\n\nå¯ä»¥çœ‹åˆ°ï¼Œä¸ºutf-8\n+------------------------+-------+| Variable_name          | Value |+------------------------+-------+| character_set_database | utf8  |+------------------------+-------+1 row in set (0.002 sec)\n\nåœ¨é…ç½®mariadbçš„æ—¶å€™ï¼Œå°±å·²ç»ä¿®æ”¹è¿‡äº†é…ç½®æ–‡ä»¶ä¸­æ•°æ®åº“çš„ç¼–ç è§„åˆ™ï¼Œæ‰€ä»¥æ‰€æœ‰ç›¸å…³å­—ç¬¦é›†ç¼–ç éƒ½æ˜¯utf-8\nshow variables like &#x27;character_set_%&#x27;;\n\nMariaDB [(none)]&gt; show variables like &#x27;character_set_%&#x27;;+--------------------------+------------------------------+| Variable_name            | Value                        |+--------------------------+------------------------------+| character_set_client     | utf8                         || character_set_connection | utf8                         || character_set_database   | utf8                         || character_set_filesystem | binary                       || character_set_results    | utf8                         || character_set_server     | utf8                         || character_set_system     | utf8                         || character_sets_dir       | /usr/share/mariadb/charsets/ |+--------------------------+------------------------------+8 rows in set (0.002 sec)\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„æ‰€æœ‰ç¼–ç \nshow charset;\n\nMariaDB [(none)]&gt; show charset;+----------+-----------------------------+---------------------+--------+| Charset  | Description                 | Default collation   | Maxlen |+----------+-----------------------------+---------------------+--------+| big5     | Big5 Traditional Chinese    | big5_chinese_ci     |      2 || dec8     | DEC West European           | dec8_swedish_ci     |      1 || cp850    | DOS West European           | cp850_general_ci    |      1 || hp8      | HP West European            | hp8_english_ci      |      1 || koi8r    | KOI8-R Relcom Russian       | koi8r_general_ci    |      1 || latin1   | cp1252 West European        | latin1_swedish_ci   |      1 || latin2   | ISO 8859-2 Central European | latin2_general_ci   |      1 || swe7     | 7bit Swedish                | swe7_swedish_ci     |      1 || ascii    | US ASCII                    | ascii_general_ci    |      1 || ujis     | EUC-JP Japanese             | ujis_japanese_ci    |      3 || sjis     | Shift-JIS Japanese          | sjis_japanese_ci    |      2 || hebrew   | ISO 8859-8 Hebrew           | hebrew_general_ci   |      1 || tis620   | TIS620 Thai                 | tis620_thai_ci      |      1 || euckr    | EUC-KR Korean               | euckr_korean_ci     |      2 || koi8u    | KOI8-U Ukrainian            | koi8u_general_ci    |      1 || gb2312   | GB2312 Simplified Chinese   | gb2312_chinese_ci   |      2 || greek    | ISO 8859-7 Greek            | greek_general_ci    |      1 || cp1250   | Windows Central European    | cp1250_general_ci   |      1 || gbk      | GBK Simplified Chinese      | gbk_chinese_ci      |      2 || latin5   | ISO 8859-9 Turkish          | latin5_turkish_ci   |      1 || armscii8 | ARMSCII-8 Armenian          | armscii8_general_ci |      1 || utf8     | UTF-8 Unicode               | utf8_general_ci     |      3 || ucs2     | UCS-2 Unicode               | ucs2_general_ci     |      2 || cp866    | DOS Russian                 | cp866_general_ci    |      1 || keybcs2  | DOS Kamenicky Czech-Slovak  | keybcs2_general_ci  |      1 || macce    | Mac Central European        | macce_general_ci    |      1 || macroman | Mac West European           | macroman_general_ci |      1 || cp852    | DOS Central European        | cp852_general_ci    |      1 || latin7   | ISO 8859-13 Baltic          | latin7_general_ci   |      1 || utf8mb4  | UTF-8 Unicode               | utf8mb4_general_ci  |      4 || cp1251   | Windows Cyrillic            | cp1251_general_ci   |      1 || utf16    | UTF-16 Unicode              | utf16_general_ci    |      4 || utf16le  | UTF-16LE Unicode            | utf16le_general_ci  |      4 || cp1256   | Windows Arabic              | cp1256_general_ci   |      1 || cp1257   | Windows Baltic              | cp1257_general_ci   |      1 || utf32    | UTF-32 Unicode              | utf32_general_ci    |      4 || binary   | Binary pseudo charset       | binary              |      1 || geostd8  | GEOSTD8 Georgian            | geostd8_general_ci  |      1 || cp932    | SJIS for Windows Japanese   | cp932_japanese_ci   |      2 || eucjpms  | UJIS for Windows Japanese   | eucjpms_japanese_ci |      3 |+----------+-----------------------------+---------------------+--------+40 rows in set (0.001 sec)\n\n1.5.2 æ ¡éªŒè§„åˆ™show variables like &#x27;collation_%&#x27;;\n\nå¦‚ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰çš„æ ¡éªŒè§„åˆ™éƒ½æ˜¯utf-8ç›¸å…³çš„\nMariaDB [(none)]&gt; show variables like &#x27;collation_%&#x27;;+----------------------+-----------------+| Variable_name        | Value           |+----------------------+-----------------+| collation_connection | utf8_general_ci || collation_database   | utf8_general_ci || collation_server     | utf8_general_ci |+----------------------+-----------------+3 rows in set (0.001 sec)\n\næŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰æ ¡éªŒé›†\nshow collation;\n\nç»“æœå¾ˆé•¿ï¼Œå°±ä¸å…¨è´´å‡ºæ¥äº†ã€‚èƒ½çœ‹åˆ°æ¯ä¸€ä¸ªç¼–ç é›†éƒ½å¯¹åº”äº†ä¸€ä¸ªå­—ç¬¦é›†\n\n1.5.3 åˆ›å»ºåº“æ—¶æŒ‡å®šCREATE DATABASE [IF NOT EXISTS] db_name [create_specification [,create_specification] ...]create_specification:    [DEFAULT] CHARACTER SET charset_name    [DEFAULT] COLLATE collation_name\n\nå…¶ä¸­[]ä»£è¡¨æ˜¯å¯é€‰é¡¹\n\nCHARACTER SET  æŒ‡å®šæ•°æ®åº“é‡‡ç”¨çš„å­—ç¬¦é›† \nCOLLATE  æŒ‡å®šæ•°æ®åº“å­—ç¬¦é›†çš„æ ¡éªŒè§„åˆ™\n\nå¦‚æœåœ¨åˆ›å»ºæ•°æ®åº“æ—¶æ²¡æœ‰æŒ‡å®šå­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™ï¼Œåˆ™ä¼šé‡‡ç”¨æ•°æ®åº“é»˜è®¤çš„ã€‚\nåœ¨æ•°æ®åº“çš„æ–‡ä»¶å¤¹ä¸­ï¼Œæœ‰ä¸€ä¸ªdb.optæ–‡ä»¶ï¼Œå…¶ä¸­å°±åŒ…å«äº†å½“å‰æ•°æ®åº“ä½¿ç”¨çš„å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™\n[root@1c2261732150:/var/lib/mysql]# ls hellodb.opt  stu_test.frm  stu_test.ibd[root@1c2261732150:/var/lib/mysql]# cat hello/db.optdefault-character-set=utf8default-collation=utf8_general_ci\n\nå¦‚æœåœ¨åˆ›å»ºçš„æ—¶å€™æŒ‡æ˜å­—ç¬¦é›†ç¼–ç \ncreate database `test1` character set gbk; create database `test1` charset=gbk; # ä¸¤ç§å†™æ³•ç›¸åŒ \n\næŸ¥çœ‹db.optï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿè‡ªåŠ¨æŒ‡å®šäº†gbkå­—ç¬¦é›†å¯¹åº”çš„æ ¡éªŒå’Œ\n[root@1c2261732150:/var/lib/mysql]# ls test1db.opt[root@1c2261732150:/var/lib/mysql]# cat test1/db.optdefault-character-set=gbkdefault-collation=gbk_chinese_ci\n\nåŒæ—¶æŒ‡å®šå­—ç¬¦é›†å’Œç¼–ç \ncreate database `test2` charset=utf8 collate utf8_bin;\n\næ‰§è¡ŒæˆåŠŸåï¼ŒæŸ¥çœ‹æœ¬åœ°æ–‡ä»¶\n[root@1c2261732150:/var/lib/mysql]# cat test2/db.optdefault-character-set=utf8default-collation=utf8_bin\n\næˆåŠŸè®¾ç½®äº†å­—ç¬¦é›†å’Œç¼–ç è§„åˆ™\n\nè™½ç„¶åœ¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥è¿™ä¹ˆåšï¼Œä½†æˆ‘ä»¬ä¿æŒé»˜è®¤é…ç½®çš„utf8å³å¯\n1.5.4 æ ¡éªŒçš„å½±å“é€šè¿‡æŒ‡å®šä¸åŒçš„ç¼–ç ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªæ ¡éªŒè§„åˆ™ä¸åŒçš„æ•°æ®åº“\nMariaDB [(none)]&gt; create database test_ci charset=utf8;Query OK, 1 row affected (0.001 sec)MariaDB [(none)]&gt; create database test_bin charset=utf8 collate utf8_bin;Query OK, 1 row affected (0.000 sec)\n\nå…¶ä¸­ä¸€ä¸ªçš„æ ¡éªŒè§„åˆ™æ˜¯utf8_general_ciï¼Œå¦å¤–ä¸€ä¸ªæ˜¯utf8_bin\n[root@1c2261732150:/var/lib/mysql]# cat test_bin/db.optdefault-character-set=utf8default-collation=utf8_bin[root@1c2261732150:/var/lib/mysql]# cat test_ci/db.optdefault-character-set=utf8default-collation=utf8_general_ci\n\nutf8_binå…ˆè¿›å…¥test_binæ•°æ®åº“\nuse test_bin;\n\nåˆ›å»ºä¸€ä¸ªstudentè¡¨ï¼Œåªæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„nameå­—æ®µ\ncreate table student(name varchar(30));\n\næ’å…¥å¦‚ä¸‹æ•°æ®\nMariaDB [test_bin]&gt; insert into student value (&#x27;a&#x27;);Query OK, 1 row affected (0.042 sec)MariaDB [test_bin]&gt; insert into student value (&#x27;A&#x27;);Query OK, 1 row affected (0.008 sec)MariaDB [test_bin]&gt; insert into student value (&#x27;b&#x27;);Query OK, 1 row affected (0.003 sec)MariaDB [test_bin]&gt; insert into student value (&#x27;B&#x27;);Query OK, 1 row affected (0.004 sec)MariaDB [test_bin]&gt; insert into student value (&#x27;c&#x27;);Query OK, 1 row affected (0.009 sec)MariaDB [test_bin]&gt; insert into student value (&#x27;C&#x27;);Query OK, 1 row affected (0.007 sec)\n\næŸ¥çœ‹å·²æœ‰æ•°æ®ï¼Œåˆ†åˆ«æ˜¯å¤§å°å†™çš„abc\nMariaDB [test_bin]&gt; select * from  student;+------+| name |+------+| a    || A    || b    || B    || c    || C    |+------+6 rows in set (0.001 sec)\n\næŸ¥è¯¢æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿”å›çš„ç»“æœæ˜¯åªæœ‰å°å†™açš„\nMariaDB [test_bin]&gt; select * from student where name=&#x27;a&#x27;;+------+| name |+------+| a    |+------+1 row in set (0.001 sec)\n\næ‰§è¡Œæ’åºï¼ˆå‡åºï¼‰åè¾“å‡ºï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå°å†™å­—æ¯çš„ASCIIæ˜¯åœ¨å¤§å†™å­—æ¯çš„ä¹‹åçš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ’åºç»“æœæ˜¯æ­£ç¡®çš„ã€‚\nMariaDB [test_bin]&gt; select * from student order by name;+------+| name |+------+| A    || B    || C    || a    || b    || c    |+------+6 rows in set (0.001 sec)\n\nutf8_general_ciuse test_ci;\n\nåœ¨è¿™ä¸ªæ•°æ®åº“ä¸­è¿›è¡Œç›¸åŒçš„æ’å…¥å·¥ä½œï¼Œåˆ›å»ºè¡¨ï¼Œæ’å…¥å¤§å°å†™abcï¼ˆå‘½ä»¤åŒä¸Šä¸å†é‡å¤ï¼‰\nMariaDB [test_ci]&gt; select * from  student;+------+| name |+------+| a    || A    || b    || B    || c    || C    |+------+6 rows in set (0.000 sec)\n\næ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå‘ç°å½“æˆ‘ä»¬æŸ¥è¯¢å°açš„æ—¶å€™ï¼ŒåŒæ—¶è¿”å›äº†Aå’Œaçš„ç»“æœ\nMariaDB [test_ci]&gt; select * from student where name=&#x27;a&#x27;;+------+| name |+------+| a    || A    |+------+2 rows in set (0.001 sec)\n\næ’åºçš„æ—¶å€™ï¼Œå¤§å°aæ²¡æœ‰æŒ‰ASCIIç é¡ºåºæ’ï¼Œè€Œæ˜¯æ”¾åˆ°äº†ä¸€èµ·\nMariaDB [test_ci]&gt; select * from student order by name;+------+| name |+------+| a    || A    || b    || B    || c    || C    |+------+6 rows in set (0.001 sec)\n\nç»“è®º\nutf8_binï¼šæŸ¥è¯¢çš„æ—¶å€™åŒºåˆ†å¤§å°å†™\nutf8_general_ciï¼šæŸ¥è¯¢æ—¶å¿½ç•¥å¤§å°å†™\n\nåœ¨å®é™…åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©è¿™ä¸¤ä¸ªæ ¡éªŒè§„åˆ™ä¸­çš„å…¶ä¸€ä½œä¸ºæˆ‘ä»¬æ•°æ®åº“çš„æ ¡éªŒè§„åˆ™ã€‚\nè¿™ä¸¤ä¸ªåªæ˜¯ä¼—å¤šæ ¡éªŒè§„åˆ™ä¹‹ä¸€ï¼Œæ›´å¤šç¼–ç çš„åŒºåˆ«ï¼Œè¿˜å¾—ç­‰åç»­æ…¢æ…¢æ¢å¯»ã€‚åœ¨ä¸€èˆ¬åœºæ™¯ä¸­ï¼Œä½¿ç”¨utf8æ˜¯å®Œå…¨è¶³å¤Ÿçš„ã€‚\n1.6 ä¿®æ”¹alter database æ•°æ®åº“å [create_specification [,create_specification] ...];\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¿®æ”¹çš„æ˜¯æ•°æ®åº“çš„å­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™ã€‚\nç¤ºä¾‹å¦‚ä¸‹ï¼Œä¿®æ”¹æ•°æ®åº“test_ciçš„å­—ç¬¦é›†ä¸ºgbk\nMariaDB [test_ci]&gt; alter database test_ci charset=gbk;Query OK, 1 row affected (0.006 sec)\n\nä¿®æ”¹åæŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œå­—ç¬¦é›†å’Œæ ¡éªŒè§„åˆ™ç¡®å®å˜åŒ–äº†ï¼ˆç³»ç»Ÿè‡ªåŠ¨æŸ¥æ‰¾å¯¹åº”çš„æ ¡éªŒè§„åˆ™ï¼‰\n[root@1c2261732150:/var/lib/mysql]# cat test_ci/db.optdefault-character-set=utf8default-collation=utf8_general_ci[root@1c2261732150:/var/lib/mysql]# cat test_ci/db.optdefault-character-set=gbkdefault-collation=gbk_chinese_ci\n\nä¹Ÿå¯ä»¥åŒæ—¶ä¿®æ”¹æ ¡éªŒè§„åˆ™ï¼Œè¿™é‡Œå’Œæ–°å»ºæ•°æ®åº“æ—¶çš„æ“ä½œæ˜¯ä¸€æ ·çš„\nalter database test_ci charset=utf8 collate utf8_bin;\n\n[root@1c2261732150:/var/lib/mysql]# cat test_ci/db.optdefault-character-set=gbkdefault-collation=gbk_chinese_ci[root@1c2261732150:/var/lib/mysql]# cat test_ci/db.optdefault-character-set=utf8default-collation=utf8_bin\n\n1.7 å¤‡ä»½æ•°æ®åº“1.7.1 å¤‡ä»½ä¸€ä¸ªæ•°æ®åº“å¦‚ä¸‹æ“ä½œæ˜¯åœ¨linuxå‘½ä»¤è¡Œä¸­æ‰§è¡Œçš„\nmysqldump -P3306 -u root -p å¯†ç  -B æ•°æ®åº“å &gt; æ•°æ®åº“å¤‡ä»½å­˜å‚¨çš„æ–‡ä»¶è·¯å¾„\n\nç¤ºä¾‹\nmysqldump -P3306 -u root -B hello &gt; hello.bak.sql\n\nè¿™ä¼šåœ¨å½“å‰è·¯å¾„ä¸­å‡ºç°äº†ä¸€ä¸ªsqlæ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ã€‚\n-- MySQL dump 10.19  Distrib 10.3.28-MariaDB, for Linux (x86_64)---- Host: localhost    Database: hello-- -------------------------------------------------------- Server version       10.3.28-MariaDB/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;/*!40101 SET NAMES utf8 */;/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;/*!40103 SET TIME_ZONE=&#x27;+00:00&#x27; */;/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE=&#x27;NO_AUTO_VALUE_ON_ZERO&#x27; */;/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;---- Current Database: `hello`--CREATE DATABASE /*!32312 IF NOT EXISTS*/ `hello` /*!40100 DEFAULT CHARACTER SET utf8 */;USE `hello`;---- Table structure for table `stu_test`--DROP TABLE IF EXISTS `stu_test`;/*!40101 SET @saved_cs_client     = @@character_set_client */;/*!40101 SET character_set_client = utf8 */;CREATE TABLE `stu_test` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `name` varchar(30) DEFAULT NULL,  `age` int(11) DEFAULT NULL,  `score` decimal(4,2) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;/*!40101 SET character_set_client = @saved_cs_client */;---- Dumping data for table `stu_test`--LOCK TABLES `stu_test` WRITE;/*!40000 ALTER TABLE `stu_test` DISABLE KEYS */;INSERT INTO `stu_test` VALUES (2,&#x27;å°å›¾å›¾&#x27;,5,72.80),(3,&#x27;å¤§å¸é©¬&#x27;,42,87.30),(4,&#x27;ä¹è¿ª&#x27;,32,99.00);/*!40000 ALTER TABLE `stu_test` ENABLE KEYS */;UNLOCK TABLES;/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;-- Dump completed on 2023-04-15 15:20:25\n\næˆ‘ä»¬ä¼šå‘ç°è¿™é‡Œé¢çš„å†…å®¹å…¶å®éƒ½æ˜¯sqlè¯­å¥ï¼Œå¦‚æœå°†è¿™ä¸ªå¤‡ä»½å¯¼å…¥åˆ°å¦å¤–ä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œå®é™…ä¸Šå°±æ˜¯å°†å†å²çš„æ‰€æœ‰sqlè¯­å¥å…¨éƒ¨æ‰§è¡Œä¸€éï¼\n\né™¤æ­¤ä¹‹å¤–ï¼Œå¤åˆ¶/var/lib/mysqlä¸‹çš„æ•°æ®åº“æ–‡ä»¶ä¹Ÿæ˜¯å¯è¡Œçš„ä¸€ç§å¤‡ä»½æ–¹æ¡ˆã€‚ä½†å¹¶ä¸æ¨èè¿™ä¹ˆåšï¼\n\n1.7.2 å¤‡ä»½æ•°æ®åº“ä¸­çš„å¤šå¼ è¡¨mysqldump -u root -p æ•°æ®åº“å è¡¨å1 è¡¨å2 &gt; å¤‡ä»½æ–‡ä»¶å\n\n1.7.3 åŒæ—¶å¤‡ä»½å¤šä¸ªæ•°æ®åº“mysqldump -u root -p -B æ•°æ®åº“å1 æ•°æ®åº“å2  &gt; å¤‡ä»½æ–‡ä»¶å\n\n1.7.4 è¿˜åŸå¦‚ä¸‹å‘½ä»¤éœ€è¦åœ¨mysqlä¸­æ‰§è¡Œ\nsource å¤‡ä»½æ–‡ä»¶è·¯å¾„# ç¤ºä¾‹source /root/hello.bak.sql;\n\n\næ•°æ®åº“ä¸­çš„å†…å®¹å’ŒåŸæœ‰æ•°æ®åº“æ˜¯å®Œå…¨ç›¸åŒçš„\nMariaDB [hello]&gt; show tables;+-----------------+| Tables_in_hello |+-----------------+| stu_test        |+-----------------+1 row in set (0.001 sec)MariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 ||  4 | ä¹è¿ª      |   32 | 99.00 |+----+-----------+------+-------+3 rows in set (0.001 sec)\n\n1.7.5 åŒ–ç®€å¦‚æœä½ çœ‹è¿‡äº†ä¸Šé¢å¯¹æ ¡éªŒå½±å“çš„éªŒè¯ï¼Œå…¶ä¸­æˆ‘å¾€test_binæ•°æ®åº“ä¸­ä½¿ç”¨6æ¡è¯­å¥æ’å…¥äº†å¤§å°å†™çš„abcã€‚\nä½†å½“æˆ‘ä»¬æ‰§è¡Œå¤‡ä»½çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å¤‡ä»½å‡ºæ¥çš„sqlæ–‡ä»¶ï¼Œå…­ä¸ªè¯­å¥è¢«åˆå¹¶äº†ï¼\nINSERT INTO `student` VALUES (&#x27;a&#x27;),(&#x27;A&#x27;),(&#x27;b&#x27;),(&#x27;B&#x27;),(&#x27;c&#x27;),(&#x27;C&#x27;);\n\nè¿™ä¹Ÿæ˜¯mysqlå¤‡ä»½çš„æ™ºèƒ½ä¹‹å¤„ä¹‹ä¸€ï¼\n1.8 æ¸…ç©ºå±å¹•åœ¨MySQLä¸­ï¼Œå¯ä»¥é€šè¿‡system æ¥æ‰§è¡Œlinuxç³»ç»Ÿå‘½ä»¤\nsystem clear\n\næ¯”å¦‚ä½¿ç”¨å¦‚ä¸Šå‘½ä»¤å¯ä»¥æ¸…ç©ºå±å¹•\n2.è¡¨å¦‚ä¸‹å‘½ä»¤éœ€è¦å…ˆè¿›å…¥ç‰¹å®šdatabaseæ‰èƒ½æ‰§è¡Œ\n2.1 åˆ›å»ºè¡¨åŸºç¡€çš„åˆ›å»ºæ“ä½œå¦‚ä¸‹ã€‚å…¶ä¸­æœ«å°¾çš„å­—ç¬¦é›†ã€æ ¡éªŒè§„åˆ™ã€å­˜å‚¨å¼•æ“çš„è®¾ç½®é¡¹å¯ä»¥ç•™ç©ºä¸å¡«\n\nfield åˆ—å\ndatatype åˆ—çš„ç±»å‹\n\ncreate table è¡¨å (    field1 datatype,    field2 datatype,    field3 datatype) character set å­—ç¬¦é›† collate æ ¡éªŒè§„åˆ™ engine å­˜å‚¨å¼•æ“;\n\nç¤ºä¾‹å¦‚ä¸‹ï¼Œåˆ›å»ºäº†ä¸€ä¸ªstudentè¡¨ï¼Œå¹¶é…ç½®äº†ä¸¤ä¸ªé”®å€¼nameå’Œageï¼Œç±»å‹åˆ†åˆ«ä¸ºå­—ç¬¦ä¸²å’Œint\ncreate table student(    name varchar(30),    age int);\n\né™¤äº†åŸºç¡€æ“ä½œä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™è¿™ä¸ªè¡¨æ–°å¢ä¸€ä¸ªcommentä½œä¸ºåˆ—å¤‡æ³¨\ncreate table student(    name varchar(30) comment &#x27;å­¦ç”Ÿåå­—&#x27;,    age int comment &#x27;å­¦ç”Ÿå¹´é¾„&#x27;);\n\nç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥æŸ¥çœ‹åˆ›å»ºè¡¨æ—¶å€™çš„æ“ä½œ\nshow create table è¡¨å;\n\n\nè¿™éƒ¨åˆ†å’Œå¤‡ä»½çš„æ—¶å€™çš„sqlä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œmysqlä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è§„æ•´è¯­å¥ï¼Œä½¿å…¶è¯­æ³•è§„åˆ™æ›´è§„æ•´ï¼›\nå¦‚ä¸‹è¯­å¥ä¹Ÿèƒ½çœ‹åˆ°åˆ›å»ºè¡¨æ—¶æ‰€ç”¨å‘½ä»¤\nshow create table stu_test\\G\n\nåœ¨æ•°æ®åº“å¸®æˆ‘ä»¬åˆ›å»ºè¿™å¼ è¡¨çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨æŒ‡å®šå¼•æ“å’Œå­—ç¬¦é›†ï¼Œåˆ™ä¼šä½¿ç”¨æ•°æ®åº“çš„é»˜è®¤è®¾ç½®ï¼›\nMariaDB [hello]&gt; show create table stu_test\\G*************************** 1. row ***************************       Table: stu_testCreate Table: CREATE TABLE `stu_test` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `name` varchar(30) DEFAULT NULL,  `age` int(11) DEFAULT NULL,  `score` decimal(4,2) DEFAULT NULL,  `avatar` varchar(100) NOT NULL DEFAULT &#x27;default-avatar.png&#x27; COMMENT &#x27;å¤´åƒå›¾ç‰‡è·¯å¾„&#x27;,  PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf81 row in set (0.000 sec)\n\nè¿™ä¸¤ä¸ªshowå‘½ä»¤çš„ç»“æœæ˜¯ç±»ä¼¼çš„\n\nå¦‚æœæƒ³åœ¨å»ºç«‹è¡¨çš„æ—¶å€™ï¼Œè®¾ç½®æ•°æ®åº“æ‰€ç”¨å¼•æ“å’Œå­—ç¬¦é›†ï¼Œå¯ä»¥åœ¨createè¯­å¥çš„æ‹¬å·ä¹‹åï¼Œä¾ç…§æ ¼å¼æ·»åŠ é…ç½®é¡¹\nCREATE TABLE xxx() ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n2.2 æŸ¥çœ‹å·²æœ‰è¡¨show tables;\n\nMariaDB [hello]&gt; show tables;+-----------------+| Tables_in_hello |+-----------------+| student         |+-----------------+1 row in set (0.001 sec)\n\n2.3 æŸ¥çœ‹è¡¨çš„å±æ€§&#x2F;ç»“æ„desc è¡¨å;\n\nMariaDB [hello]&gt; desc stu_test;+-------+--------------+------+-----+---------+----------------+| Field | Type         | Null | Key | Default | Extra          |+-------+--------------+------+-----+---------+----------------+| id    | int(11)      | NO   | PRI | NULL    | auto_increment || name  | varchar(30)  | YES  |     | NULL    |                || age   | int(11)      | YES  |     | NULL    |                || score | decimal(4,2) | YES  |     | NULL    |                |+-------+--------------+------+-----+---------+----------------+4 rows in set (0.002 sec)\n\nè¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œè¾“å‡ºçš„ç»“æœåŒ…æ‹¬æ›´å¤šä¿¡æ¯\nSHOW FULL COLUMNS FROM è¡¨å;\n\n\n2.4 åˆ é™¤è¯¥è¡¨drop table student;\n\n2.5 ä¿®æ”¹è¡¨çš„ç»“æ„æ³¨æ„ï¼Œè¿™é‡Œæ˜¯å¯¹è¡¨çš„å±æ€§çš„ä¿®æ”¹ï¼Œå¹¶ä¸æ˜¯å¯¹æ•°æ®çš„ä¿®æ”¹ï¼\næ¯”å¦‚æˆ‘æƒ³æ–°å¢å­—æ®µï¼Œæˆ–è€…ä¿®æ”¹å·²æœ‰å­—æ®µçš„å±æ€§ï¼Œæˆ–è€…åˆ é™¤å­—æ®µ\n-- æ–°å¢å­—æ®µALTER TABLE tablename ADD (column datatype [DEFAULT expr][,columndatatype]...);-- ä¿®æ”¹å­—æ®µALTER TABLE tablename MODIfy (column datatype [DEFAULT expr][,columndatatype]...);-- åˆ é™¤å­—æ®µALTER TABLE tablename DROP (column);\n\n2.5.0 æ³¨æ„äº‹é¡¹è¯·æ³¨æ„ï¼šä¿®æ”¹è¡¨çš„å­—æ®µæ˜¯ä¸€ä¸ªå¾ˆéº»çƒ¦çš„æ“ä½œï¼Œå…¶å¯èƒ½ä¼šæ¶‰åŠåˆ°å·²æœ‰æ•°æ®çš„æœ‰æ•ˆæ€§é—®é¢˜\n\nè¯·åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šçº¿å‰çš„æµ‹è¯•é˜¶æ®µï¼Œå®Œæˆè¡¨å­—æ®µçš„å®šä¹‰ï¼\n\nè¯´äººè¯å°±æ˜¯ï¼Œå‰æœŸè®¾è®¡è¦æƒ³çš„å°½é‡åˆ°ä½ï¼Œé¿å…åæœŸè¡¨ä¸­å·²æœ‰æ•°æ®çš„æ—¶å€™ä¿®æ”¹è¡¨çš„å±æ€§ï¼\n2.5.1 æ–°å¢å­—æ®µæ¯”å¦‚æˆ‘ç»™ä¸Šæ–¹2.5ä¸­å‡ºç°è¿‡çš„stu_testè¡¨æ–°å¢ä¸€åˆ—ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹çš„å‘½ä»¤\n alter table stu_test add avatar varchar(100) comment &#x27;å¤´åƒå›¾ç‰‡è·¯å¾„&#x27; after score;\n\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 ||  4 | ä¹è¿ª      |   32 | 99.00 ||  5 | dc872458  |   25 |  NULL |+----+-----------+------+-------+4 rows in set (0.000 sec)MariaDB [hello]&gt; alter table stu_test add avatar varchar(100) comment &#x27;å¤´åƒå›¾ç‰‡è·¯å¾„&#x27; after    -&gt; score;Query OK, 0 rows affected (0.005 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------+| id | name      | age  | score | avatar |+----+-----------+------+-------+--------+|  2 | å°å›¾å›¾    |    5 | 72.80 | NULL   ||  3 | å¤§å¸é©¬    |   42 | 87.30 | NULL   ||  4 | ä¹è¿ª      |   32 | 99.00 | NULL   ||  5 | dc872458  |   25 |  NULL | NULL   |+----+-----------+------+-------+--------+4 rows in set (0.000 sec)\n\næ­¤æ—¶å¯ä»¥çœ‹åˆ°ï¼Œå·²æœ‰æ•°æ®éƒ½å¤šäº†ä¸€ä¸ªavatarå­—æ®µï¼Œä¸”è¿™äº›å·²æœ‰æ•°æ®çš„æ–°å­—æ®µéƒ½ä¸ºNULL\nè¯´æ˜æ–°å¢å­—æ®µå¹¶ä¸ä¼šå½±å“æ—§æ•°æ®çš„æ—§å­—æ®µã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ–°å¢å­—æ®µä¹‹åï¼Œç»™æ—§çš„æ•°æ®ä¿®æ”¹é»˜è®¤å€¼\n2.5.2 åˆ é™¤å­—æ®µ\nå¦‚æœè¡¨ä¸­çš„æ•°æ®åªå‰©ä¸€åˆ—ï¼ˆåªæœ‰ä¸€ä¸ªå­—æ®µï¼‰æ˜¯ä¸èƒ½åˆ é™¤è¿™ä¸ªå­—æ®µçš„ï¼ˆåªèƒ½åˆ é™¤è¿™ä¸ªè¡¨ï¼‰\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œåˆ é™¤åˆšåˆšæ–°å¢çš„avatarå­—æ®µ\nalter table stu_test drop avatar;\n\nå¯ä»¥çœ‹åˆ°avataråˆ—è¢«åˆ é™¤äº†\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------+| id | name      | age  | score | avatar |+----+-----------+------+-------+--------+|  2 | å°å›¾å›¾    |    5 | 72.80 | NULL   ||  3 | å¤§å¸é©¬    |   42 | 87.30 | NULL   ||  4 | ä¹è¿ª      |   32 | 99.00 | NULL   ||  5 | dc872458  |   25 |  NULL | NULL   |+----+-----------+------+-------+--------+4 rows in set (0.000 sec)MariaDB [hello]&gt; alter table stu_test drop avatar;Query OK, 0 rows affected (0.034 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+| id | name      | age  | score |+----+-----------+------+-------+|  2 | å°å›¾å›¾    |    5 | 72.80 ||  3 | å¤§å¸é©¬    |   42 | 87.30 ||  4 | ä¹è¿ª      |   32 | 99.00 ||  5 | dc872458  |   25 |  NULL |+----+-----------+------+-------+4 rows in set (0.000 sec)\n\nåœ¨å…·ä½“åœºæ™¯ä¸­ï¼Œå¦‚æœéœ€è¦ç»™å·²æœ‰ç”¨æˆ·æ–°å¢å¤´åƒï¼Œä¸€èˆ¬å­˜æ”¾çš„æ˜¯å¤´åƒçš„æ–‡ä»¶è·¯å¾„ï¼ˆè€Œä¸æ˜¯å›¾ç‰‡ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥è®¾è®¡ä¸€ä¸ªé»˜è®¤å¤´åƒï¼Œå¹¶åœ¨æ–°å¢å­—æ®µçš„æ—¶å€™å°†é»˜è®¤å€¼ï¼ˆé»˜è®¤çš„å¤´åƒæ–‡ä»¶è·¯å¾„ï¼‰ä¿®æ”¹ä¸ºè¿™ä¸ªé»˜è®¤å¤´åƒå›¾ç‰‡çš„è·¯å¾„ã€‚\næ¯”å¦‚æˆ‘ç°åœ¨çš„å¤´åƒå­˜å‚¨çš„æ–‡ä»¶è·¯å¾„æ˜¯\n./images/\n\næ­¤æ—¶å­˜æ”¾çš„ç”¨æˆ·å¤´åƒæ–‡ä»¶å°±åº”è¯¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸­ï¼Œè€Œmysqlä¸­åªéœ€è¦å­˜æ”¾æ–‡ä»¶çš„è·¯å¾„ã€‚\næ¯”å¦‚ç”¨æˆ·ä¸Šä¼ äº†ä¸€ä¸ªå¤´åƒå›¾ç‰‡ï¼Œæˆ‘ä»¬å°†å¤´åƒå›¾ç‰‡ä¿å­˜åˆ°è¿™ä¸ªè·¯å¾„ï¼Œå†å¾€sqlä¸­çš„avatarå­—æ®µæ’å…¥è·¯å¾„\n./images/test-img.pngsqlä¸­åªéœ€è¦ä¿å­˜test-img.pngï¼Œå–å›¾ç‰‡çš„æ—¶å€™æ‹¼æ¥ä¸Šå‰æ–¹çš„æ–‡ä»¶è·¯å¾„\n\nè®¾è®¡ä¸€ä¸ªé»˜è®¤å¤´åƒï¼Œä¹Ÿæ˜¯æ”¾åœ¨è¿™ä¸ªè·¯å¾„ä¸­\n./images/test-img.png./images/default-avatar.png\n\nè¿™æ—¶å€™æ–°å¢avatarå­—æ®µçš„æ—¶å€™ï¼Œå°±å¯ä»¥æŒ‡å®šé»˜è®¤å€¼\nalter table stu_test add avatar varchar(100) not null default &#x27;default-avatar.png&#x27;  comment &#x27;å¤´åƒå›¾ç‰‡è·¯å¾„&#x27; afterscore;\n\nè¿™æ—¶å€™å°±èƒ½çœ‹åˆ°ï¼Œæ—§æ•°æ®çš„å¤´åƒéƒ½æ˜¯é»˜è®¤å¤´åƒäº†ï¼\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------------------+| id | name      | age  | score | avatar             |+----+-----------+------+-------+--------------------+|  2 | å°å›¾å›¾    |    5 | 72.80 | default-avatar.png ||  3 | å¤§å¸é©¬    |   42 | 87.30 | default-avatar.png ||  4 | ä¹è¿ª      |   32 | 99.00 | default-avatar.png ||  5 | dc872458  |   25 |  NULL | default-avatar.png |+----+-----------+------+-------+--------------------+4 rows in set (0.000 sec)\n\né»˜è®¤å¤´åƒæ€»å¥½è¿‡æ²¡æœ‰å›¾ç‰‡å˜›ï¼\n2.5.3 ä¿®æ”¹å­—æ®µç±»å‹åœ¨è®¾è®¡stu_testè¡¨çš„æ—¶å€™ï¼Œåªç»™nameåˆ†é…äº†30ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚æ­¤æ—¶å¦‚æœæ¥äº†ä¸ªåå­—ç‰¹åˆ«ç‰¹åˆ«é•¿çš„æ–°åŒå­¦ï¼ˆæœ‰äº›åœ°æ–¹çš„äººåç¡®å®å¾ˆé•¿ï¼‰\næˆ‘ä»¬å‘ç°30ä¸ªå­—èŠ‚å­˜ä¸ä¸‹è¿™ä¸ªåå­—äº†ï¼Œå°±å¯ä»¥è€ƒè™‘å°†åå­—å­—æ®µçš„é•¿åº¦å¢åŠ \nalter table stu_test modify name varchar(60);\n\nå¦‚ä¸‹ï¼ŒæˆåŠŸä¿®æ”¹ï¼\nMariaDB [hello]&gt; desc stu_test;+--------+--------------+------+-----+--------------------+----------------+| Field  | Type         | Null | Key | Default            | Extra          |+--------+--------------+------+-----+--------------------+----------------+| id     | int(11)      | NO   | PRI | NULL               | auto_increment || name   | varchar(30)  | YES  |     | NULL               |                || age    | int(11)      | YES  |     | NULL               |                || score  | decimal(4,2) | YES  |     | NULL               |                || avatar | varchar(100) | NO   |     | default-avatar.png |                |+--------+--------------+------+-----+--------------------+----------------+5 rows in set (0.001 sec)MariaDB [hello]&gt; alter table stu_test modify name varchar(60);Query OK, 0 rows affected (0.013 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; desc stu_test;+--------+--------------+------+-----+--------------------+----------------+| Field  | Type         | Null | Key | Default            | Extra          |+--------+--------------+------+-----+--------------------+----------------+| id     | int(11)      | NO   | PRI | NULL               | auto_increment || name   | varchar(60)  | YES  |     | NULL               |                || age    | int(11)      | YES  |     | NULL               |                || score  | decimal(4,2) | YES  |     | NULL               |                || avatar | varchar(100) | NO   |     | default-avatar.png |                |+--------+--------------+------+-----+--------------------+----------------+5 rows in set (0.001 sec)\n\nå› ä¸ºæ˜¯å¢åŠ å­—æ®µçš„é•¿åº¦ï¼Œæ‰€ä»¥ä¹Ÿä¸å½±å“å·²æœ‰æ•°æ®\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------------------+| id | name      | age  | score | avatar             |+----+-----------+------+-------+--------------------+|  2 | å°å›¾å›¾    |    5 | 72.80 | default-avatar.png ||  3 | å¤§å¸é©¬    |   42 | 87.30 | default-avatar.png ||  4 | ä¹è¿ª      |   32 | 99.00 | default-avatar.png ||  5 | dc872458  |   25 |  NULL | default-avatar.png |+----+-----------+------+-------+--------------------+4 rows in set (0.000 sec)\n\nå¦‚æœæ˜¯å‡å°å­—æ®µé•¿åº¦ï¼Œå°±éœ€è¦ç¡®è®¤å·²æœ‰æ•°æ®æ˜¯å¦æœ‰è¶…è¿‡æ–°é•¿åº¦çš„å†…å®¹äº†ï¼æ¯”å¦‚ä»60å‡å°åˆ°30ï¼Œé‚£ä¹ˆé•¿åº¦ä¸º40çš„æ•°æ®å°±ä¼šå‡ºç°é”™è¯¯ï¼\né‚£å¦‚æœæ˜¯å°†varcharç›´æ¥æ”¹æˆintï¼Œæˆ–è€…å°†intæ”¹æˆcharï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\nè¡¨ä¸­çš„idå­—æ®µæ˜¯ä¸€ä¸ªintï¼Œå°è¯•å°†å…¶ä¿®æ”¹æˆchar\nalter table stu_test modify id varchar(32);\n\nMariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------------------+| id | name      | age  | score | avatar             |+----+-----------+------+-------+--------------------+| 2  | å°å›¾å›¾    |    5 | 72.80 | default-avatar.png || 3  | å¤§å¸é©¬    |   42 | 87.30 | default-avatar.png || 4  | ä¹è¿ª      |   32 | 99.00 | default-avatar.png || 5  | dc872458  |   25 |  NULL | default-avatar.png |+----+-----------+------+-------+--------------------+4 rows in set (0.001 sec)MariaDB [hello]&gt; desc stu_test;+--------+--------------+------+-----+--------------------+-------+| Field  | Type         | Null | Key | Default            | Extra |+--------+--------------+------+-----+--------------------+-------+| id     | varchar(32)  | NO   | PRI | NULL               |       || name   | varchar(60)  | YES  |     | NULL               |       || age    | int(11)      | YES  |     | NULL               |       || score  | decimal(4,2) | YES  |     | NULL               |       || avatar | varchar(100) | NO   |     | default-avatar.png |       |+--------+--------------+------+-----+--------------------+-------+5 rows in set (0.002 sec)\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸ä»…æˆåŠŸå˜æˆäº†å­—ç¬¦ä¸²ç±»å‹ï¼Œå·²æœ‰çš„å€¼ä¹Ÿæ²¡æœ‰å‡ºé”™ã€‚æ¯•ç«Ÿintæ•°å­—æ”¹æˆå­—ç¬¦ä¸²æ˜¯å¯è¡Œçš„ã€‚é‚£åè¿‡æ¥å‘¢ï¼Ÿ\nMariaDB [hello]&gt; insert into stu_test (id,name,age,score,avatar) values (&#x27;kb&#x27;,&#x27;ä½ å¥½&#x27;,30,60,&#x27;æµ‹è¯•å›¾ç‰‡.png&#x27;);Query OK, 1 row affected (0.007 sec)MariaDB [hello]&gt; select * from stu_test;+----+-----------+------+-------+--------------------+| id | name      | age  | score | avatar             |+----+-----------+------+-------+--------------------+| 2  | å°å›¾å›¾    |    5 | 72.80 | default-avatar.png || 3  | å¤§å¸é©¬    |   42 | 87.30 | default-avatar.png || 4  | ä¹è¿ª      |   32 | 99.00 | default-avatar.png || 5  | dc872458  |   25 |  NULL | default-avatar.png || kb | ä½ å¥½      |   30 | 60.00 | æµ‹è¯•å›¾ç‰‡.png       |+----+-----------+------+-------+--------------------+5 rows in set (0.000 sec)\n\næ­¤æ—¶æˆ‘å¾€è¡¨ä¸­æ’å…¥äº†ä¸€ä¸ªidä¸ºkbçš„æ•°æ®ï¼Œå†å°è¯•å°†idä»varcharæ”¹å›intç±»å‹\nMariaDB [hello]&gt; alter table stu_test modify id int;ERROR 1292 (22007): Truncated incorrect INTEGER value: &#x27;kb&#x27;MariaDB [hello]&gt; desc stu_test;+--------+--------------+------+-----+--------------------+-------+| Field  | Type         | Null | Key | Default            | Extra |+--------+--------------+------+-----+--------------------+-------+| id     | varchar(32)  | NO   | PRI | NULL               |       || name   | varchar(60)  | YES  |     | NULL               |       || age    | int(11)      | YES  |     | NULL               |       || score  | decimal(4,2) | YES  |     | NULL               |       || avatar | varchar(100) | NO   |     | default-avatar.png |       |+--------+--------------+------+-----+--------------------+-------+5 rows in set (0.001 sec)\n\næ­¤æ—¶å°±ä¼šæŠ¥é”™ï¼Œkbä¸ç¬¦åˆintç±»å‹ï¼›ä¿®æ”¹å¤±è´¥äº†ï¼\næ‰€ä»¥ï¼Œä¿®æ”¹å­—æ®µçš„ç±»å‹ï¼Œéœ€è¦ä¿è¯åŸæœ‰ç±»å‹å’Œç›®æ ‡ç±»å‹ä¹‹é—´æ˜¯å¯ä»¥æ­£å¸¸åŒå‘è½¬æ¢çš„ï¼\n2.5.4 ä¿®æ”¹å­—æ®µåå­—å¦‚ä¸‹ä½¿ç”¨changeä¿®æ”¹å­—æ®µid -&gt; numï¼ŒåŒæ—¶è¿˜éœ€è¦æ³¨æ˜å±æ€§ï¼ˆä¹Ÿå¯ä»¥ä¿®æ”¹å±æ€§ï¼‰\nalter table stu_test change id num varchar(32);\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ° 0 rows affectedï¼Œå› ä¸ºæˆ‘ä»¬ä¿®æ”¹çš„æ˜¯å­—æ®µåå­—è€Œå·²ï¼Œæ‰€ä»¥ä¸ä¼šå½±å“åˆ°æ•°æ®\nMariaDB [hello]&gt; alter table stu_test change id num varchar(32);Query OK, 0 rows affected (0.008 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; desc stu_test;+--------+--------------+------+-----+--------------------+-------+| Field  | Type         | Null | Key | Default            | Extra |+--------+--------------+------+-----+--------------------+-------+| num    | varchar(32)  | NO   | PRI | NULL               |       || name   | varchar(60)  | YES  |     | NULL               |       || age    | int(11)      | YES  |     | NULL               |       || score  | decimal(4,2) | YES  |     | NULL               |       || avatar | varchar(100) | NO   |     | default-avatar.png |       |+--------+--------------+------+-----+--------------------+-------+5 rows in set (0.001 sec)\n\n2.6 ä¿®æ”¹è¡¨åalter table stu_test rename stu;\n\nå¯ä»¥çœ‹åˆ°ä¿®æ”¹æˆåŠŸäº†\nMariaDB [hello]&gt; alter table stu_test rename stu;Query OK, 0 rows affected (0.015 sec)MariaDB [hello]&gt; show tables;+-----------------+| Tables_in_hello |+-----------------+| stu             || tb_video        |+-----------------+2 rows in set (0.000 sec)\n\n2.7 æ–°å¢è‡ªå¢ä¸»é”®ä¸”ä¸å½±å“åŸæœ‰æ•°æ®æ–°å¢äº†ä¸€ä¸ªè‡ªå¢çš„int idä¸»é”®åˆ°è¡¨å†…ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤\nALTER TABLE è¡¨å ADD id INT NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST;\n\n2.8 è¡¨å­—æ®µçš„çº¦æŸå‚è€ƒ ã€mysqlå­—æ®µçº¦æŸ ã€‘ä¸€æ–‡ï¼å»ºè®®çœ‹äº†è¿™ä¸ªä¹‹åå†å¾€ä¸‹çœ‹ã€‚\n3.æ•°æ®è®°å½• CURDä¸‹æ–¹å­¦ä¹ çš„éƒ½æ˜¯æ•°æ®æ“æ§è¯­è¨€DMLï¼›ä¸»è¦é’ˆå¯¹çš„å°±æ˜¯è¡¨çš„å¢åŠ åˆ é™¤ä¿®æ”¹å’ŒæŸ¥è¯¢ï¼Œç®€ç§°CRUDï¼ˆå¢æŸ¥æ”¹åˆ ï¼‰\nCreate   åˆ›å»ºRetrieve è¯»å–Update   æ›´æ–°Delete   åˆ é™¤\n\nåœ¨MySQLä¸­ï¼Œæˆ‘ä»¬å°†ä¸€è¡Œæ–°å¢çš„æ•°æ®ï¼Œç§°ä¸ºä¸€æ¡è®°å½•\n3.1 æ–°å¢ Createè¦æƒ³å¾€ä¸€ä¸ªè¡¨é‡Œé¢æ’å…¥æ•°æ®ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºè¡¨ï¼ˆå¥½åƒæ˜¯ä¸€å¥åºŸè¯ï¼‰\nå…ˆä½¿ç”¨å¦‚ä¸‹è¡¨è¿›è¡Œæµ‹è¯•\nCREATE TABLE students (\tid INT UNSIGNED PRIMARY KEY AUTO_INCREMENT comment &#x27;ä¸»é”®åºå·&#x27;,\tsn INT NOT NULL UNIQUE COMMENT &#x27;å­¦å·&#x27;,\tname VARCHAR(20) NOT NULL COMMENT  &#x27;å­¦ç”Ÿåå­—&#x27;,\tqq VARCHAR(20) COMMENT &#x27;å­¦ç”ŸQQ&#x27;);\n\nåœ¨å­¦ä¹ æ’å…¥ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ä¼šæœ€åŸºæœ¬çš„æŸ¥è¯¢è¯­å¥\nselect * from  è¡¨å; -- æ˜¾ç¤ºè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®\n\n3.1.1 å•è¡Œå…¨åˆ—æ’å…¥æ‰€è°“å•è¡Œï¼Œä»£è¡¨ä¸€æ¬¡åªæ’å…¥ä¸€æ¡è®°å½•ï¼›\næ‰€è°“å…¨åˆ—æ’å…¥ï¼Œä»£è¡¨æ’å…¥è¿™æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°†å…¨éƒ¨åˆ—çš„æ•°æ®éƒ½æ‰‹åŠ¨æŒ‡å®šã€‚\ninsert into students values (1,1000,&#x27;å°æ˜&#x27;,&#x27;123124&#x27;);insert into students values (2,1001,&#x27;å°çº¢&#x27;,NULL);\n\nå¦‚ä¸Šå°±æ˜¯ä¸¤ä¸ªå…¨åˆ—æ’å…¥çš„ç¤ºä¾‹ï¼›æ‰§è¡Œå®Œæ¯•è¿™æ¡sqlçš„æ—¶å€™ï¼ŒMySQLä¼šæ˜¾ç¤º 1 row affectedï¼Œä»£è¡¨åªæœ‰ä¸€è¡Œæ”¶åˆ°äº†å½±å“ï¼ˆæ–°å¢äº†ä¸€æ¡è®°å½•ï¼‰\nMariaDB [hello_mysql]&gt; insert into students values (1,1000,&#x27;å°æ˜&#x27;,&#x27;123124&#x27;);Query OK, 1 row affected (0.007 sec)MariaDB [hello_mysql]&gt; insert into students values (2,1001,&#x27;å°çº¢&#x27;,NULL);Query OK, 1 row affected (0.002 sec)\n\næŸ¥è¯¢è¡¨ä¸­æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšæ’å…¥çš„è®°å½•\nMariaDB [hello_mysql]&gt; select * from students;+----+------+--------+--------+| id | sn   | name   | qq     |+----+------+--------+--------+|  1 | 1000 | å°æ˜   | 123124 ||  2 | 1001 | å°çº¢   | NULL   |+----+------+--------+--------+2 rows in set (0.001 sec)\n\n3.1.2 å¤šè¡ŒæŒ‡å®šåˆ—æ’å…¥æ‰€è°“å¤šè¡Œæ’å…¥ï¼Œå°±æ˜¯ä¸€æ¬¡æ’å…¥å¤šæ¡æ•°æ®ã€‚æŒ‡å®šåˆ—æ˜¯åœ¨æ’å…¥çš„æ—¶å€™ï¼Œæ˜ç¡®å‘Šè¯‰MySQLæˆ‘ä»¬æƒ³æ’å…¥çš„åˆ—æ•°æ˜¯å“ªå‡ ä¸ªã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªè¦æŸä¸€åˆ—æ²¡æœ‰DEFAULTå€¼ï¼Œå¦‚æœä¸æŒ‡å®šæ­¤åˆ—ï¼Œåˆ™ä¼šè¢«é»˜è®¤ä¸ºNULLï¼›å¦‚æœæŸä¸€åˆ—è®¾ç½®äº†NOT NULLå¹¶ä¸”æ²¡æœ‰è®¾ç½®DEFAULTå€¼ï¼Œé‚£å°±å¿…é¡»è¦æŒ‡å®šå€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚\nå¦å¤–ï¼ŒæŒ‡å®šçš„åˆ—çš„ä¸ªæ•°å’Œvaluesä¸­æ•°æ®çš„ä¸ªæ•°éœ€è¦å¯¹åº”ä¸Šã€‚\nINSERT INTO students (id, sn, name) VALUES    (102, 20001, &#x27;æ›¹å­Ÿå¾·&#x27;),    (103, 20002, &#x27;å­™ä»²è°‹&#x27;);\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹\nMariaDB [hello_mysql]&gt; INSERT INTO students (id, sn, name) VALUES    -&gt;     (102, 20001, &#x27;æ›¹å­Ÿå¾·&#x27;),    -&gt;     (103, 20002, &#x27;å­™ä»²è°‹&#x27;);Query OK, 2 rows affected (0.013 sec)Records: 2  Duplicates: 0  Warnings: 0MariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 |  1000 | å°æ˜      | 123124 ||   2 |  1001 | å°çº¢      | NULL   || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   |+-----+-------+-----------+--------+4 rows in set (0.000 sec)\n\n3.1.3 æ’å…¥å¦åˆ™æ›´æ–°å¦‚æœæˆ‘ä»¬å¾€è¡¨é‡Œé¢æ’å…¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ä¸»é”®&#x2F;å”¯ä¸€é”®çš„å€¼ï¼Œå°±ä¼šå‡ºç°ä¸»é”®&#x2F;å”¯ä¸€é”®å†²çªè€Œå¯¼è‡´çš„æ‹’ç»æ’å…¥ã€‚\nMariaDB [hello_mysql]&gt; insert into students values (1,1003,&#x27;æå&#x27;,&#x27;12354&#x27;);ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;MariaDB [hello_mysql]&gt; insert into students values (5,1000,&#x27;å°å¯&#x27;,&#x27;53134&#x27;);ERROR 1062 (23000): Duplicate entry &#x27;1000&#x27; for key &#x27;sn&#x27;\n\næ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µï¼Œå°†æ’å…¥æ”¹æˆæ’å…¥å¦åˆ™æ›´æ–°ï¼Œå³å¦‚æœä¸»é”®å’Œå”¯ä¸€é”®å†²çªï¼Œåˆ™æ›´æ–°å·²æœ‰è®°å½•ã€‚ä¸å†²çªåˆ™æ­£å¸¸æ’å…¥ï¼›\nè¿™æ ·å°±å¯ä»¥æŠŠæ’å…¥å’Œæ›´æ–°çš„è¯­å¥ç»™ç»Ÿä¸€æˆä¸€ä¸ªã€‚ä½†éœ€è¦é¿å…å‡ºç°æ˜æ˜æ˜¯è¦æ’å…¥ä¸€ä¸ªæ–°çš„ï¼Œä½†å´å› ä¸ºä¸»é”®è®¾ç½®é”™è¯¯è€Œæ›´æ–°äº†æ—§å€¼ï¼Œå¯¼è‡´è®°å½•ä¸¢å¤±ï¼Œé‚£æ ·å°±ä¸å¥½äº†ã€‚\næ’å…¥å¦åˆ™æ›´æ–°çš„è¯­æ³•æ˜¯ä¸‹é¢è¿™æ ·\nINSERT ... ON DUPLICATE KEY UPDATE column = value [, column = value] ...\n\nç¤ºä¾‹å¦‚ä¸‹ï¼Œè¿™ä¸ªè¯­å¥çš„æ„æ€æ˜¯ï¼Œå¦‚æœå”¯ä¸€é”®å’Œä¸»é”®æ²¡æœ‰å†²çªï¼Œåˆ™æ’å…¥ (100, 10010, &#39;å”å¤§å¸ˆ&#39;)çš„è®°å½•ï¼Œå¦‚æœidå’Œsnå†²çªäº†ï¼Œåˆ™å°†snæ›´æ–°ä¸º10010ï¼Œnameæ›´æ–°ä¸ºå”å¤§å¸ˆã€‚\nINSERT INTO students (id, sn, name) VALUES (1, 10010, &#x27;å”å¤§å¸ˆ&#x27;)\tON DUPLICATE KEY UPDATE sn = 10010, name = &#x27;å”å¤§å¸ˆ&#x27;;\n\næ‰§è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œæ‰§è¡Œåï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€è¡Œè®°å½•å› ä¸ºä¸»é”®å†²çªï¼Œè€Œæ›´æ–°äº†è¿™æ¡è®°å½•çš„snå’Œname\nMariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 |  1000 | å°æ˜      | 123124 ||   2 |  1001 | å°çº¢      | NULL   || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   |+-----+-------+-----------+--------+4 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; INSERT INTO students (id, sn, name) VALUES (1, 10010, &#x27;å”å¤§å¸ˆ&#x27;)    -&gt; ON DUPLICATE KEY UPDATE sn = 10010, name = &#x27;å”å¤§å¸ˆ&#x27;;Query OK, 2 rows affected (0.001 sec)MariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 ||   2 |  1001 | å°çº¢      | NULL   || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   |+-----+-------+-----------+--------+4 rows in set (0.000 sec)\n\nå”¯ä¸€é”®å†²çªçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œä¸‹å›¾ä¸­æ˜¯å”¯ä¸€é”®snä¸åŸæœ‰çš„ç¬¬äºŒæ¡è®°å½•å†²çªï¼Œæœ€ç»ˆå°†ç¬¬äºŒæ¡è®°å½•çš„snå’Œnameåšäº†æ›´æ–°ã€‚\nMariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 ||   2 |  1001 | å°çº¢      | NULL   || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   |+-----+-------+-----------+--------+4 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; INSERT INTO students (id, sn, name) VALUES (3, 1001, &#x27;å”å¤§å¸ˆ2&#x27;) ON DUPLICATE KEY UPDATE sn = 1005, name = &#x27;å”å¤§å¸ˆ&#x27;;Query OK, 2 rows affected (0.001 sec)MariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 ||   2 |  1005 | å”å¤§å¸ˆ    | NULL   || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   |+-----+-------+-----------+--------+4 rows in set (0.000 sec)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨UPDATEè¯­å¥ä¹‹åçš„snä¹Ÿä¸èƒ½å’Œå·²æœ‰çš„snå†²çªï¼Œä¸ç„¶ä¼šå› ä¸ºå”¯ä¸€é”®å†²çªï¼ˆå› ä¸ºä½ éœ€è¦æ›´æ–°åˆ°è¿™ä¸ªå€¼ï¼Œè€Œè¿™ä¸ªå€¼å·²æœ‰äº†ï¼‰è€Œæ‹’ç»æ›´æ–°\nMariaDB [hello_mysql]&gt; INSERT INTO students (id, sn, name) VALUES (3, 1001, &#x27;å”å¤§å¸ˆ2&#x27;) ON DUPLICATE KEY UPDATE sn = 10010, name = &#x27;å”å¤§å¸ˆ&#x27;;ERROR 1062 (23000): Duplicate entry &#x27;10010&#x27; for key &#x27;sn&#x27;\n\n3.1.4 æ›¿æ¢ Replaceé™¤äº†ä¸Šé¢é‚£ç§æ›´æ–°çš„æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ›¿æ¢è¯­å¥å¯ä»¥ç”¨æ¥æ›¿æ¢å€¼\n\nå¦‚æœæ²¡æœ‰å†²çªåˆ™ç›´æ¥æ’å…¥\nå¦‚æœå·²ç»å†²çªäº†åˆ™åˆ é™¤åŸæœ‰çš„è®°å½•ï¼Œç„¶åå†æ’å…¥\n\nè¿™é‡Œè¦æ³¨æ„æ›¿æ¢å’Œæ’å…¥å¦åˆ™æ›´æ–°çš„åŒºåˆ«ï¼æ’å…¥å¦åˆ™æ›´æ–°æ˜¯éœ€è¦ä½ æŒ‡å®šè¦æ›´æ–°é‚£äº›åˆ—çš„æ•°æ®ï¼Œè€Œæ›¿æ¢æ˜¯ä¼šç›´æ¥å°†åŸè§†æ•°æ®åˆ é™¤çš„ï¼\nä¸‹é¢ç»™å‡ºä¸¤æ¡sqlè¯­å¥ï¼Œå…¶ä¸­ç¬¬ä¸€æ¡æ²¡æœ‰å†²çªï¼Œç¬¬äºŒæ¡çš„snå†²çª\n-- æ— å†²çªREPLACE INTO students (sn,name) VALUES (20000,&#x27;é—°åœŸ&#x27;);-- æœ‰å†²çªREPLACE INTO students (sn,name) VALUES (1005,&#x27;å‘¨æ ‘äºº&#x27;);\n\nå…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªsqlï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„æ˜¯1è¡Œå—åˆ°å½±å“ï¼Œä»£è¡¨æ•°æ®è¢«æ’å…¥\nMariaDB [hello_mysql]&gt; REPLACE INTO students (sn,name) VALUES (20000,&#x27;é—°åœŸ&#x27;);Query OK, 1 row affected (0.001 sec)\n\nå†æ‰§è¡Œæœ‰å†²çªçš„ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯2è¡Œå—å½±å“ï¼Œå› ä¸ºè¿™æ¡è¯­å¥ä¼šåˆ é™¤åŸæœ‰çš„å†æ’å…¥ï¼Œç›¸å½“äºæ‰§è¡Œäº†ä¸€æ¬¡åˆ é™¤å’Œä¸€æ¬¡æ’å…¥ï¼Œå½±å“äº†ä¸¤è¡Œçš„æ•°æ®ã€‚\nMariaDB [hello_mysql]&gt; REPLACE INTO students (sn,name) VALUES (1005,&#x27;å‘¨æ ‘äºº&#x27;);Query OK, 2 rows affected (0.001 sec)\n\n3.2 æŸ¥è¯¢ RetrieveæŸ¥è¯¢çš„åŸºç¡€è¯­æ³•å¦‚ä¸‹\nSELECT    [DISTINCT] &#123;* | &#123;column [, column] ...&#125;    [FROM table_name]    [WHERE ...]    [ORDER BY column [ASC | DESC], ...]    LIMIT ...\n\n3.2.1 å…¨åˆ—æŸ¥è¯¢ç”¨é€šé…ç¬¦*è¡¨ç¤ºæŸ¥è¯¢æ•´ä¸ªè¡¨çš„æ•°æ®\nselect * from  students;\n\nè¯¥è¯­å¥ä¼šæŸ¥è¡¨ä¸­çš„æ‰€æœ‰å€¼ï¼Œåœ¨å‰é¢æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡äº†\nMariaDB [hello_mysql]&gt; select * from  students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   || 104 | 20000 | é—°åœŸ      | NULL   || 105 |  1005 | å‘¨æ ‘äºº    | NULL   |+-----+-------+-----------+--------+5 rows in set (0.000 sec)\n\n  ä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹ä¸å»ºè®®ç”¨å…¨åˆ—æŸ¥è¯¢ï¼š\n\næŸ¥è¯¢çš„åˆ—è¶Šå¤šï¼Œæ„å‘³ç€éœ€è¦ä¼ è¾“çš„æ•°æ®é‡è¶Šå¤§ï¼› \nå¯èƒ½ä¼šå½±å“åˆ°ç´¢å¼•çš„ä½¿ç”¨ï¼ˆåç»­ä¼šå­¦ä¹ åˆ°ï¼‰\n\n3.2.2 æŒ‡å®šåˆ—æŸ¥è¯¢æ‰€è°“æŒ‡å®šåˆ—ï¼Œå°±æ˜¯åœ¨æŸ¥è¯¢çš„æ—¶å€™è¿”å›ç‰¹å®šçš„åˆ—ï¼Œæ¯”å¦‚å¦‚ä¸‹å°±æ˜¯åœ¨å­¦ç”Ÿè¡¨é‡Œé¢è¿”å›snå’Œnameè¿™ä¸¤åˆ—çš„æ•°æ®\nselect sn,name from  students;\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œæœ€ç»ˆåªæ˜¾ç¤ºäº†æˆ‘ä»¬æŒ‡å®šçš„ä¸¤ä¸ªåˆ—ï¼Œå¹¶æ²¡æœ‰æŠŠidå’Œqqåˆ—ä¹Ÿç»™å±•ç¤ºå‡ºæ¥\nMariaDB [hello_mysql]&gt; select sn,name from  students;+-------+-----------+| sn    | name      |+-------+-----------+| 10010 | å”å¤§å¸ˆ    || 20001 | æ›¹å­Ÿå¾·    || 20002 | å­™ä»²è°‹    || 20000 | é—°åœŸ      ||  1005 | å‘¨æ ‘äºº    |+-------+-----------+5 rows in set (0.000 sec)\n\n3.2.3 è¡¨è¾¾å¼æŸ¥è¯¢ä¸ºäº†è¿›è¡Œåç»­çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å…ˆæ¥æ„é€ ä¸€ä¸ªæµ‹è¯•è¡¨\n-- è¡¨åˆ›å»ºCREATE TABLE exam_result (    id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,    name VARCHAR(20) NOT NULL COMMENT &#x27;åŒå­¦å§“å&#x27;,    chinese float DEFAULT 0.0 COMMENT &#x27;è¯­æ–‡æˆç»©&#x27;,    math float DEFAULT 0.0 COMMENT &#x27;æ•°å­¦æˆç»©&#x27;,    english float DEFAULT 0.0 COMMENT &#x27;è‹±è¯­æˆç»©&#x27;);-- æ’å…¥å¤šè¡Œæµ‹è¯•æ•°æ®INSERT INTO exam_result (name, chinese, math, english) VALUES    (&#x27;å”ä¸‰è—&#x27;, 67, 98, 56),    (&#x27;å­™æ‚Ÿç©º&#x27;, 87, 78, 77),    (&#x27;çŒªæ‚Ÿèƒ½&#x27;, 88, 98, 90),    (&#x27;æ›¹å­Ÿå¾·&#x27;, 82, 84, 67),    (&#x27;åˆ˜ç„å¾·&#x27;, 55, 85, 45),    (&#x27;å­™æƒ&#x27;, 70, 73, 78),    (&#x27;å®‹å…¬æ˜&#x27;, 75, 65, 30);\n\nåœ¨å‰é¢ä¸¤ç§æŸ¥è¯¢ä¸­ï¼Œæˆ‘ä»¬éƒ½åªæ˜¯æŸ¥è¯¢è¡¨é‡Œé¢å·²ç»æœ‰çš„æ•°æ®ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬åœ¨æŸ¥è¯¢ç»“æœå±•ç¤ºçš„æ—¶å€™ï¼Œè¿˜å¯ä»¥è®©MySQLå¸®æˆ‘ä»¬å®Œæˆä¸€å®šçš„è¡¨è¾¾å¼è®¡ç®—\nselect id,name,english,10 from exam_result;\n\næ¯”å¦‚å¦‚ä¸Šçš„sqlï¼Œæˆ‘ä»¬åœ¨åŸæœ¬çš„æŒ‡å®šåˆ—æŸ¥è¯¢åæ–°å¢äº†ä¸€ä¸ª10ï¼Œè¿™ä¸ª10å°±æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒå¹¶ä¸åŒ…å«è¡¨ä¸­å·²ç»æœ‰çš„å­—æ®µï¼Œæ‰€ä»¥ä¼šæ‹¼æ¥åœ¨è¡¨çš„åŸæœ‰æ•°æ®ä¹‹åå±•ç¤ºå‡ºæ¥\nMariaDB [hello_mysql]&gt; select id,name,english,10 from exam_result;+----+-----------+---------+----+| id | name      | english | 10 |+----+-----------+---------+----+|  1 | å”ä¸‰è—    |      56 | 10 ||  2 | å­™æ‚Ÿç©º    |      77 | 10 ||  3 | çŒªæ‚Ÿèƒ½    |      90 | 10 ||  4 | æ›¹å­Ÿå¾·    |      67 | 10 ||  5 | åˆ˜ç„å¾·    |      45 | 10 ||  6 | å­™æƒ      |      78 | 10 ||  7 | å®‹å…¬æ˜    |      30 | 10 |+----+-----------+---------+----+7 rows in set (0.000 sec)\n\nåœ¨è¿™é‡Œå†™ä¸ªç®—å¼ï¼ŒMySQLä¹Ÿä¼šå¸®æˆ‘ä»¬è®¡ç®—å¹¶å±•ç¤ºå‡ºæ¥\nMariaDB [hello_mysql]&gt; select id,name,english,10+20 from exam_result;+----+-----------+---------+-------+| id | name      | english | 10+20 |+----+-----------+---------+-------+|  1 | å”ä¸‰è—    |      56 |    30 ||  2 | å­™æ‚Ÿç©º    |      77 |    30 ||  3 | çŒªæ‚Ÿèƒ½    |      90 |    30 ||  4 | æ›¹å­Ÿå¾·    |      67 |    30 ||  5 | åˆ˜ç„å¾·    |      45 |    30 ||  6 | å­™æƒ      |      78 |    30 ||  7 | å®‹å…¬æ˜    |      30 |    30 |+----+-----------+---------+-------+7 rows in set (0.001 sec)\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿”å›ç»“æœçš„æ—¶å€™ï¼Œå¯¹åŸè§†çš„æ•°æ®åšä¸€äº›å¤„ç†ï¼Œæ¯”å¦‚å°†æ•°å­¦å’Œè‹±è¯­æˆç»©ç»™åŠ èµ·æ¥è¿”å›\nMariaDB [hello_mysql]&gt; select id,name,english+math from exam_result;+----+-----------+--------------+| id | name      | english+math |+----+-----------+--------------+|  1 | å”ä¸‰è—    |          154 ||  2 | å­™æ‚Ÿç©º    |          155 ||  3 | çŒªæ‚Ÿèƒ½    |          188 ||  4 | æ›¹å­Ÿå¾·    |          151 ||  5 | åˆ˜ç„å¾·    |          130 ||  6 | å­™æƒ      |          151 ||  7 | å®‹å…¬æ˜    |           95 |+----+-----------+--------------+7 rows in set (0.000 sec)\n\n3.2.4 ä¸ºè¡¨è¾¾å¼è®¾ç½®åˆ«ååœ¨è¡¨è¾¾å¼æŸ¥è¯¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¡¨è¾¾å¼è®¾ç½®ä¸€äº›åˆ«åæ¥æé«˜å¯è¯»æ€§ï¼ŒåŸºç¡€è¯­æ³•å¦‚ä¸‹\nSELECT column [AS] alias_name [...] FROM table_name;\n\næ¯”å¦‚å½“æˆ‘ä»¬å°†ä¸‰ç§‘æ€»åˆ†åŠ èµ·æ¥è¿”å›çš„æ—¶å€™ï¼Œå°±å¯ä»¥å°†å…¶è®¾ç½®ä¸€ä¸ªæ€»åˆ†åˆ«åæ¥è¿”å›\nMariaDB [hello_mysql]&gt; select id,name,chinese+english+math as &#x27;æ€»åˆ†&#x27; from exam_result;+----+-----------+--------+| id | name      | æ€»åˆ†   |+----+-----------+--------+|  1 | å”ä¸‰è—    |    221 ||  2 | å­™æ‚Ÿç©º    |    242 ||  3 | çŒªæ‚Ÿèƒ½    |    276 ||  4 | æ›¹å­Ÿå¾·    |    233 ||  5 | åˆ˜ç„å¾·    |    185 ||  6 | å­™æƒ      |    221 ||  7 | å®‹å…¬æ˜    |    170 |+----+-----------+--------+7 rows in set (0.000 sec)\n\næ­¤æ—¶MySQLå±•ç¤ºçš„æ˜¯æ€»åˆ†ï¼Œè€Œä¸æ˜¯åŸè§†è¡¨è¾¾å¼ï¼Œå¯è¯»æ€§æ›´å¥½ï¼\n3.2.5 ç»“æœå»é‡ distinctæœ‰çš„æ—¶å€™æˆ‘ä»¬æƒ³çŸ¥é“ç­é‡ŒåŒå­¦çš„æˆç»©éƒ½æœ‰é‚£äº›åˆ†æ®µï¼Œå¹¶ä¸æƒ³çœ‹åˆ°åº•æ˜¯è°è€ƒå‡ºæ¥çš„ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨distinctå»é‡æŸ¥è¯¢è¿‡æ»¤å‡ºä¸é‡å¤çš„ä¸€ä¸ªé›†å’Œå¹¶å±•ç¤ºå‡ºæ¥\nselect distinct math from exam_result;\n\nå¦‚ä¸Šè¯­å¥å°±æ˜¯åœ¨å±•ç¤ºmathåˆ—çš„ç»“æœçš„æ—¶å€™å¯¹ç»“æœè¿›è¡Œå»é‡ï¼ŒåŸæœ¬çš„æ•°æ®ä¸­98åˆ†æ˜¯é‡å¤çš„ï¼Œæ·»åŠ ä¸Šè¿™ä¸ªå…³é”®å­—åï¼Œé‡å¤çš„98å°±è¢«å»æ‰äº†ã€‚\nMariaDB [hello_mysql]&gt; select math from exam_result;+------+| math |+------+|   98 ||   78 ||   98 ||   84 ||   85 ||   73 ||   65 |+------+7 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; select distinct math from exam_result;+------+| math |+------+|   98 ||   78 ||   84 ||   85 ||   73 ||   65 |+------+6 rows in set (0.001 sec)\n\n3.2.6 whereæ¡ä»¶æŸ¥è¯¢è¿ç®—ç¬¦è¯´å®Œäº†åŸºæœ¬çš„æŸ¥è¯¢ï¼Œå°±å¾—æ¥çœ‹å¤§å¤´æ¡ä»¶æŸ¥è¯¢äº†ï¼ŒåŸºæœ¬ç”¨æ³•æ˜¯åœ¨è¡¨ååç”¨whereå¸¦ä¸Šå…·ä½“æ¡ä»¶ã€‚åœ¨é‚£ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹whereæ”¯æŒä»€ä¹ˆæ¯”è¾ƒè¿ç®—ç¬¦å§\n\n\n\næ¯”è¾ƒè¿ç®—ç¬¦\nè¯´æ˜\n\n\n\n&gt;,&gt;=,&lt;,&lt;=\nè¿™ä¸ªåº”è¯¥ä¸éœ€è¦è¯´å§\n\n\n=\nç­‰äºï¼ŒNULLä¸å®‰å…¨ï¼ŒNULL=NULLçš„ç»“æœæ˜¯NULL\n\n\n&lt;=&gt;\nç­‰äºï¼ŒNULLå®‰å…¨ï¼ŒNULL&lt;=&gt;NULLçš„ç»“æœæ˜¯ TRUE(1)\n\n\n!=,&lt;&gt;\nä¸ç­‰äº\n\n\nBETWEEN a AND b\nèŒƒå›´åŒ¹é…ï¼Œé—­åŒºé—´ï¼Œå¦‚æœ a&lt;=value&lt;=bè¿”å› TRUE(1)\n\n\nIN (option,...)\nå¦‚æœæ˜¯optionä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œåˆ™è¿”å› TRUE(1)\n\n\nIS NULL\næ˜¯NULL\n\n\nIS NOT NULL\nä¸æ˜¯NULL\n\n\nLIKE\næ¨¡ç³ŠåŒ¹é…ï¼Œ%è¡¨ç¤ºä»»æ„å¤šä¸ªï¼ˆåŒ…æ‹¬0ä¸ªï¼‰å­—ç¬¦ï¼›_è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼›\n\n\né™¤äº†æ¯”è¾ƒçš„è¿ç®—ç¬¦ï¼Œè¿˜æœ‰é€»è¾‘è¿ç®—ç¬¦\n\n\n\né€»è¾‘è¿ç®—ç¬¦å·\nè¯´æ˜\n\n\n\nAND\nä¸ï¼Œç›¸å½“äºcppä¸­çš„&amp;&amp;ï¼Œå…¨çœŸä¸º1ï¼Œæœ‰å‡ä¸º0\n\n\nOR\næˆ–ï¼Œç›¸å½“äºcppä¸­çš„&#96;\n\n\nNOT\né€»è¾‘å–åï¼Œæ¡ä»¶ä¸ºTRUE(1)çš„æ—¶å€™ç»“æœä¸ºFALSE(0)\n\n\nå¤§äºå°äºå’ŒåŒºé—´ç­›é€‰æ¯”å¦‚æœ€åŸºç¡€çš„ï¼ŒæŸ¥è¯¢æˆç»©è¡¨é‡Œé¢æŸç§‘æˆç»©ä½äºå¤šå°‘åˆ†çš„ç”¨æˆ·\nselect name,english from exam_result where english &lt; 60;\n\nè¿è¡Œç»“æœå¦‚ä¸‹ï¼ŒæˆåŠŸå±•ç¤ºå‡ºæ¥äº†è‹±è¯­æˆç»©å°äº60åˆ†çš„äºº\nMariaDB [hello_mysql]&gt; select name,english from exam_result where english &lt; 60;+-----------+---------+| name      | english |+-----------+---------+| å”ä¸‰è—    |      56 || åˆ˜ç„å¾·    |      45 || å®‹å…¬æ˜    |      30 |+-----------+---------+3 rows in set (0.000 sec)\n\næˆ‘ä»¬è¿˜å¯ä»¥ç”¨andè¿›è¡Œæ‹¼æ¥å¤šä¸ªæ¡ä»¶\nselect name,chinese,english from exam_result where english &lt; 60 and chinese &lt; 60;\n\næ¯”å¦‚å¦‚ä¸Šsqlæ˜¯æŸ¥è¯¢è‹±è¯­å’Œè¯­æ–‡éƒ½ä¸åŠæ ¼çš„äºº\nMariaDB [hello_mysql]&gt; select name,chinese,english from exam_result where english &lt; 60 and chinese &lt; 60;+-----------+---------+---------+| name      | chinese | english |+-----------+---------+---------+| åˆ˜ç„å¾·    |      55 |      45 |+-----------+---------+---------+1 row in set (0.000 sec)\n\nè¿˜æœ‰é€šè¿‡between ... and ...è¯­å¥æŸ¥è¯¢è¯­æ–‡æˆç»©åœ¨[30,60]åŒºé—´çš„äºº\nMariaDB [hello_mysql]&gt; select name,chinese from exam_result where chinese between 30 and 65;+-----------+---------+| name      | chinese |+-----------+---------+| åˆ˜ç„å¾·    |      55 |+-----------+---------+1 row in set (0.000 sec)\n\nå½“ç„¶ï¼Œå¤§äºå°äºçš„æ¯”è¾ƒä¹Ÿå¯ä»¥ç”¨äºä¸¤ä¸ªå­—æ®µä¹‹é—´çš„æ¯”è¾ƒï¼Œåªè¦ä¸¤ä¸ªå­—æ®µæ˜¯å¯æ¯”è¾ƒçš„ï¼ˆæ¯”å¦‚éƒ½æ˜¯integerï¼‰ï¼Œæ¯”å¦‚å¦‚ä¸‹ç­›é€‰å‡ºè¯­æ–‡æ¯”è‹±è¯­å¥½çš„åŒå­¦\nMariaDB [hello_mysql]&gt; SELECT name, chinese, english FROM exam_result WHERE chinese &gt; english;+-----------+---------+---------+| name      | chinese | english |+-----------+---------+---------+| å”ä¸‰è—    |      67 |      56 || å­™æ‚Ÿç©º    |      87 |      77 || æ›¹å­Ÿå¾·    |      82 |      67 || åˆ˜ç„å¾·    |      55 |      45 || å®‹å…¬æ˜    |      75 |      30 |+-----------+---------+---------+5 rows in set (0.000 sec)\n\nç›¸ç­‰ç­›é€‰select name,math from exam_result where math = 50 \tor math = 59 \tor math = 98 \tor math = 99;\n\nå¦‚ä¸Šè¯­å¥å¯ä»¥å¸®æˆ‘ä»¬ç­›é€‰å‡ºæ•°å­¦æˆç»©ç­‰äº 50ã€59ã€98ã€99å…¶ä¸­ä¸€ä¸ªçš„å­¦ç”Ÿ\nMariaDB [hello_mysql]&gt; select name,math from exam_result where math = 50 or math = 59 or math = 98 or math = 99;+-----------+------+| name      | math |+-----------+------+| å”ä¸‰è—    |   98 || çŒªæ‚Ÿèƒ½    |   98 |+-----------+------+2 rows in set (0.000 sec)\n\nå’Œè¿™ä¸ªè¯­å¥ç›¸åŒæ•ˆæœçš„ï¼Œè¿˜æœ‰å¦‚ä¸‹çš„inè¿ç®—ç¬¦\nMariaDB [hello_mysql]&gt; select name,math from exam_result where math in (50,59,98,99);+-----------+------+| name      | math |+-----------+------+| å”ä¸‰è—    |   98 || çŒªæ‚Ÿèƒ½    |   98 |+-----------+------+2 rows in set (0.001 sec)\n\nå­—ç¬¦åŒ¹é… LIKE-- % åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹è¯­å¥ä»£è¡¨åŒ¹é…åå­—ä¸ºå­™å¼€å¤´çš„äººselect name from exam_result where name LIKE &#x27;å­™%&#x27;;-- _ åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹è¯­å¥ä»£è¡¨åŒ¹é…åå­—å¼€å¤´ä¸ºå­™ï¼Œä½†åªæœ‰ä¸¤ä¸ªå­—çš„äººselect name from exam_result where name LIKE &#x27;å­™_&#x27;;\n\næ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ç¬¬äºŒä¸ªå•å­—åŒ¹é…çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰å°†å­™æ‚Ÿç©ºä¹ŸåŒ¹é…è¿›å»\nMariaDB [hello_mysql]&gt; select name from exam_result where name LIKE &#x27;å­™%&#x27;;+-----------+| name      |+-----------+| å­™æ‚Ÿç©º    || å­™æƒ      |+-----------+2 rows in set (0.013 sec)MariaDB [hello_mysql]&gt; select name from exam_result where name LIKE &#x27;å­™_&#x27;;+--------+| name   |+--------+| å­™æƒ   |+--------+1 row in set (0.000 sec)\n\nå¦‚ä¸‹è¯­å¥å¯ä»¥ç­›é€‰å‡ºè¯­æ–‡æˆç»©å¤§äº80åˆ†ä¸”ä¸å§“å­™çš„åŒå­¦ï¼ŒåŒæ—¶ç”¨åˆ°äº†andå’Œnot\nMariaDB [hello_mysql]&gt; SELECT name, chinese FROM exam_result    -&gt; WHERE chinese &gt; 80 AND name NOT LIKE &#x27;å­™%&#x27;;+-----------+---------+| name      | chinese |+-----------+---------+| çŒªæ‚Ÿèƒ½    |      88 || æ›¹å­Ÿå¾·    |      82 |+-----------+---------+2 rows in set (0.000 sec)\n\nè®¡ç®—åç­›é€‰ä¸Šé¢æˆ‘ä»¬ç­›é€‰çš„éƒ½æ˜¯å­—æ®µæœ¬èº«ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥å°†ä¸€äº›å­—æ®µåŠ èµ·æ¥ä¹‹åå†è¿›è¡Œç­›é€‰ï¼›\nMariaDB [hello_mysql]&gt; SELECT name, chinese + math + english æ€»åˆ† FROM exam_result WHERE chinese + math + english &lt; 200;+-----------+--------+| name      | æ€»åˆ†   |+-----------+--------+| åˆ˜ç„å¾·    |    185 || å®‹å…¬æ˜    |    170 |+-----------+--------+2 rows in set (0.000 sec)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œè™½ç„¶æˆ‘ä»¬ç»™ä¸‰ç§‘åˆ†æ•°åŠ èµ·æ¥è®¾ç½®äº†åˆ«åï¼Œä½†æ˜¯åˆ«åæ˜¯ä¸èƒ½åœ¨whereæ¡ä»¶ä¸­ä½¿ç”¨çš„ï¼ä½ å¯ä»¥ç†è§£ä¸ºåˆ«åå…¶å®åªæ˜¯æœ€ç»ˆæ˜¾ç¤ºç»“æœçš„æ—¶å€™è¢«ä¿®æ”¹äº†ï¼Œåœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­åˆ«åå®é™…ä¸Šå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼\nMariaDB [hello_mysql]&gt; SELECT name, chinese + math + english æ€»åˆ† FROM exam_result WHERE æ€»åˆ† &lt; 200;ERROR 1054 (42S22): Unknown column &#x27;æ€»åˆ†&#x27; in &#x27;where clause&#x27;\n\nNULLçš„æŸ¥è¯¢åœ¨ä¹‹å‰çš„studentsè¡¨ä¸­ï¼Œæˆ‘ä»¬æœ‰äº›è®°å½•çš„qqå·æ˜¯NULLï¼Œè¿™æ—¶å€™åº”è¯¥ä½¿ç”¨ IS NULL/IS NOT NULLæ¥è¿›è¡Œé’ˆå¯¹NULLçš„æŸ¥è¯¢\n-- qqå·ä¸æ˜¯ç©ºçš„äººMariaDB [hello_mysql]&gt; select * from students where qq is not null;+----+-------+-----------+--------+| id | sn    | name      | qq     |+----+-------+-----------+--------+|  1 | 10010 | å”å¤§å¸ˆ    | 123124 |+----+-------+-----------+--------+1 row in set (0.000 sec)-- qqå·æ˜¯ç©ºçš„äººMariaDB [hello_mysql]&gt; select * from students where qq is null;+-----+-------+-----------+------+| id  | sn    | name      | qq   |+-----+-------+-----------+------+| 102 | 20001 | æ›¹å­Ÿå¾·    | NULL || 103 | 20002 | å­™ä»²è°‹    | NULL || 104 | 20000 | é—°åœŸ      | NULL || 105 |  1005 | å‘¨æ ‘äºº    | NULL |+-----+-------+-----------+------+4 rows in set (0.000 sec)\n\nè¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥è¯•éªŒä¸€ä¸‹ =å’Œ&lt;=&gt;çš„ä¸åŒï¼Œå‰æ–‡æåˆ°ï¼Œ=æ˜¯NULLä¸å®‰å…¨çš„ï¼Œè¿™æ˜¯å› ä¸ºNULL=NULLä¸ºNULLï¼Œè€Œæˆ‘ä»¬é¢„æœŸçš„ç»“æœåº”è¯¥æ˜¯TRUE(1)ã€‚\nä»æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ = ç­›é€‰å‡ºæ¥çš„æ˜¯ç©ºçš„ï¼Œå› ä¸ºNULLåœ¨MySQLä¸­è®¤ä¸ºæ˜¯å‡ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œåˆ¤æ–­ï¼Œè€Œä½¿ç”¨ &lt;=&gt;çš„æˆåŠŸç­›é€‰å‡ºäº†æ­£ç¡®çš„ç»“æœ\nMariaDB [hello_mysql]&gt; select * from students where qq = null;Empty set (0.000 sec)MariaDB [hello_mysql]&gt; select * from students where qq &lt;=&gt; null;+-----+-------+-----------+------+| id  | sn    | name      | qq   |+-----+-------+-----------+------+| 102 | 20001 | æ›¹å­Ÿå¾·    | NULL || 103 | 20002 | å­™ä»²è°‹    | NULL || 104 | 20000 | é—°åœŸ      | NULL || 105 |  1005 | å‘¨æ ‘äºº    | NULL |+-----+-------+-----------+------+4 rows in set (0.000 sec)\n\nåŒæ—¶æˆ‘ä»¬å¯ä»¥å°†NULLå’Œ01è¿›è¡Œä¸€ä¸‹å¯¹æ¯”ï¼Œä¹Ÿèƒ½çœ‹å‡ºæ¥NULLçš„ç‰¹æ®Šæ€§ï¼›NULLå’Œæˆ‘ä»¬è®¤è¯†çš„çœŸ1ä¸å‡0æ²¡æœ‰å…³ç³»ï¼Œå…¶ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç‰¹æ®Šå€¼ï¼ŒNULLåªèƒ½ç”¨æ¥å’ŒNULLè¿›è¡Œæ¯”è¾ƒã€‚\nMariaDB [hello_mysql]&gt; SELECT NULL &lt;=&gt; NULL, NULL &lt;=&gt; 1, NULL &lt;=&gt; 0;+---------------+------------+------------+| NULL &lt;=&gt; NULL | NULL &lt;=&gt; 1 | NULL &lt;=&gt; 0 |+---------------+------------+------------+|             1 |          0 |          0 |+---------------+------------+------------+1 row in set (0.000 sec)MariaDB [hello_mysql]&gt; SELECT NULL = NULL, NULL = 1, NULL = 0;+-------------+----------+----------+| NULL = NULL | NULL = 1 | NULL = 0 |+-------------+----------+----------+|        NULL |     NULL |     NULL |+-------------+----------+----------+1 row in set (0.000 sec)\n\næŸ¥è¯¢æ¡ä»¶ä¸ä¸€å®šéœ€è¦æ˜¾ç¤ºå¦‚ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†mathä½œä¸ºæŸ¥è¯¢çš„æ¡ä»¶ï¼Œä½†æœ€ç»ˆå±•ç¤ºçš„ç»“æœé‡Œé¢å¹¶æ²¡æœ‰mathï¼Œè¿™ä¹Ÿæ˜¯è¢«å…è®¸çš„ã€‚\nMariaDB [hello_mysql]&gt; select name,chinese from exam_result where math &gt; 70;+-----------+---------+| name      | chinese |+-----------+---------+| å”ä¸‰è—    |      67 || å­™æ‚Ÿç©º    |      87 || çŒªæ‚Ÿèƒ½    |      88 || æ›¹å­Ÿå¾·    |      82 || åˆ˜ç„å¾·    |      55 || å­™æƒ      |      70 |+-----------+---------+6 rows in set (0.012 sec)\n\n3.2.7 ç»“æœæ’åºåœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†æƒ³è·å–åˆ°æŒ‡å®šçš„ç»“æœï¼Œè¿˜å¸Œæœ›å¯¹ç»“æœè¿›è¡Œä¸€å®šçš„æ’åºï¼Œä»¥ç­›é€‰å‡ºæ›´åŠ ç²¾ç»†çš„æ•°æ®\n-- ASC  ä¸ºå‡åºï¼ˆä»å°åˆ°å¤§ï¼‰-- DESC ä¸ºé™åºï¼ˆä»å¤§åˆ°å°ï¼‰-- ORDER BY é»˜è®¤ä¸º ASCSELECT ... FROM table_name [WHERE ...]\tORDER BY column [ASC|DESC], [...];\n\næ³¨æ„ï¼šæ²¡æœ‰ORDER BYå­å¥çš„æŸ¥è¯¢ï¼Œè¿”å›çš„é¡ºåºæ˜¯æœªå®šä¹‰çš„ï¼ˆä¹±åºï¼‰ï¼›\nå¦‚æœæŸä¸ªå€¼æ˜¯NULLï¼Œé‚£å®ƒæ¯”ä»»ä½•å€¼éƒ½å°ï¼\nå•å­—æ®µå‡åº&#x2F;é™åºæ˜¾ç¤ºSELECT name, math FROM exam_result ORDER BY math; -- é»˜è®¤å‡åºSELECT name, math FROM exam_result ORDER BY math DESC; -- é™åº\n\nä½¿ç”¨è¿™ä¸ªè¯­å¥ï¼Œå¯ä»¥è®©ç»“æœä»¥æŸä¸ªå­—æ®µçš„å‡åºæˆ–è€…é™åºæ¥æ˜¾ç¤ºï¼›\nMariaDB [hello_mysql]&gt; SELECT name, math FROM exam_result ORDER BY math;+-----------+------+| name      | math |+-----------+------+| å®‹å…¬æ˜    |   65 || å­™æƒ      |   73 || å­™æ‚Ÿç©º    |   78 || æ›¹å­Ÿå¾·    |   84 || åˆ˜ç„å¾·    |   85 || å”ä¸‰è—    |   98 || çŒªæ‚Ÿèƒ½    |   98 |+-----------+------+7 rows in set (0.012 sec)MariaDB [hello_mysql]&gt; SELECT name, math FROM exam_result ORDER BY math DESC;+-----------+------+| name      | math |+-----------+------+| å”ä¸‰è—    |   98 || çŒªæ‚Ÿèƒ½    |   98 || åˆ˜ç„å¾·    |   85 || æ›¹å­Ÿå¾·    |   84 || å­™æ‚Ÿç©º    |   78 || å­™æƒ      |   73 || å®‹å…¬æ˜    |   65 |+-----------+------+7 rows in set (0.000 sec)\n\nNULLæ¯”æ‰€æœ‰å­—æ®µéƒ½å°ï¼Œæ¯”å¦‚ä¸‹æ–¹æ’åºçš„æ—¶å€™ï¼ŒNULLä¼šæ˜¾ç¤ºåœ¨å·²æœ‰æ•°æ®çš„ä¸‹é¢ï¼›\nMySQLå¯¹å­—ç¬¦ä¸²çš„æ’åºæ˜¯æŒ‰å­—å…¸åºçš„ï¼ä¼šæ ¹æ®å­—ç¬¦çš„ Unicode å€¼è¿›è¡Œå­—å…¸é¡ºåºçš„æ¯”è¾ƒï¼›\nMariaDB [hello_mysql]&gt; select name,qq from students order by qq desc;+-----------+--------+| name      | qq     |+-----------+--------+| å”å¤§å¸ˆ    | 123124 || æ›¹å­Ÿå¾·    | NULL   || å­™ä»²è°‹    | NULL   || é—°åœŸ      | NULL   || å‘¨æ ‘äºº    | NULL   |+-----------+--------+5 rows in set (0.001 sec)\n\næ’åºçš„é”®å€¼ä¸ä¸€å®šéœ€è¦å‡ºç°åœ¨selectçš„æŒ‡å®šåˆ—ä¸­ï¼Œå¦‚ä¸‹æˆ‘ä»¬æœ€ç»ˆè¿”å›çš„ç»“æœå¹¶æ²¡æœ‰qqï¼Œä½†ä¾æ—§å¯ä»¥é€šè¿‡qqè¿›è¡Œæ’åº\nMariaDB [hello_mysql]&gt; select name from students order by qq desc;+-----------+| name      |+-----------+| å”å¤§å¸ˆ    || æ›¹å­Ÿå¾·    || å­™ä»²è°‹    || é—°åœŸ      || å‘¨æ ‘äºº    |+-----------+5 rows in set (0.000 sec)\n\nå¤šå­—æ®µæ’åºå¤šå­—æ®µæ’åºä¸­ï¼Œæ’åºçš„ä¼˜å…ˆçº§ä¾ç…§è¿™é‡Œçš„ä¹¦å†™é¡ºåºï¼›\næ¯”å¦‚ä¸‹é¢çš„è¯­å¥å°±ä¼šå…ˆæŒ‰æ•°å­¦è¿›è¡Œé™åºæ’åºï¼Œå†æŒ‰è‹±è¯­è¿›è¡Œå‡åºæ’åºï¼Œæœ€åæŒ‰è¯­æ–‡è¿›è¡Œå‡åºæ’åº\nSELECT name, math, english, chinese FROM exam_result\tORDER BY math DESC, english, chinese;\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [hello_mysql]&gt; SELECT name, math, english, chinese FROM exam_result    -&gt; ORDER BY math DESC, english, chinese;+-----------+------+---------+---------+| name      | math | english | chinese |+-----------+------+---------+---------+| å”ä¸‰è—    |   98 |      56 |      67 || çŒªæ‚Ÿèƒ½    |   98 |      90 |      88 || åˆ˜ç„å¾·    |   85 |      45 |      55 || æ›¹å­Ÿå¾·    |   84 |      67 |      82 || å­™æ‚Ÿç©º    |   78 |      77 |      87 || å­™æƒ      |   73 |      78 |      70 || å®‹å…¬æ˜    |   65 |      30 |      75 |+-----------+------+---------+---------+7 rows in set (0.000 sec)\n\næ±‚å’Œåæ’åºåœ¨ORDER BYé‡Œé¢æ˜¯æ”¯æŒè¡¨è¾¾å¼çš„ï¼Œä¹Ÿæ”¯æŒåˆ«å\n-- è¡¨è¾¾å¼SELECT name, chinese + english + math FROM exam_result\tORDER BY chinese + english + math DESC;-- åˆ«åSELECT name, chinese + english + math æ€»åˆ† FROM exam_result\tORDER BY æ€»åˆ† DESC;\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [hello_mysql]&gt; SELECT name, chinese + english + math FROM exam_result    -&gt; ORDER BY chinese + english + math DESC;+-----------+--------------------------+| name      | chinese + english + math |+-----------+--------------------------+| çŒªæ‚Ÿèƒ½    |                      276 || å­™æ‚Ÿç©º    |                      242 || æ›¹å­Ÿå¾·    |                      233 || å”ä¸‰è—    |                      221 || å­™æƒ      |                      221 || åˆ˜ç„å¾·    |                      185 || å®‹å…¬æ˜    |                      170 |+-----------+--------------------------+7 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; SELECT name, chinese + english + math æ€»åˆ† FROM exam_result    -&gt; ORDER BY æ€»åˆ† DESC;+-----------+--------+| name      | æ€»åˆ†   |+-----------+--------+| çŒªæ‚Ÿèƒ½    |    276 || å­™æ‚Ÿç©º    |    242 || æ›¹å­Ÿå¾·    |    233 || å”ä¸‰è—    |    221 || å­™æƒ      |    221 || åˆ˜ç„å¾·    |    185 || å®‹å…¬æ˜    |    170 |+-----------+--------+7 rows in set (0.000 sec)\n\nwhere+orderbywhereæ¡ä»¶è¯­å¥å’Œæ’åºè¯­å¥è”åˆä½¿ç”¨\nSELECT name, math FROM exam_result\tWHERE name LIKE &#x27;å­™%&#x27; OR name LIKE &#x27;æ›¹%&#x27;\tORDER BY math DESC;\n\nMariaDB [hello_mysql]&gt; SELECT name, math FROM exam_result    -&gt; WHERE name LIKE &#x27;å­™%&#x27; OR name LIKE &#x27;æ›¹%&#x27;    -&gt; ORDER BY math DESC;+-----------+------+| name      | math |+-----------+------+| æ›¹å­Ÿå¾·    |   84 || å­™æ‚Ÿç©º    |   78 || å­™æƒ      |   73 |+-----------+------+3 rows in set (0.001 sec)\n\n3.2.8 ç­›é€‰åˆ†é¡µç»“æœå¯¹è¡¨çš„ç­›é€‰ç»“æœè¿›è¡Œåˆ†é¡µçš„è¯­å¥æ ¼å¼å¦‚ä¸‹\n-- èµ·å§‹ä¸‹æ ‡ä¸º 0-- ä» 0 å¼€å§‹ï¼Œç­›é€‰ n æ¡ç»“æœSELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT n;-- ä» s å¼€å§‹ï¼Œç­›é€‰ n æ¡ç»“æœSELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT s, n;-- ä» s å¼€å§‹ï¼Œç­›é€‰ n æ¡ç»“æœï¼Œæ¯”ç¬¬äºŒç§ç”¨æ³•æ›´æ˜ç¡®ï¼Œå»ºè®®ä½¿ç”¨SELECT ... FROM table_name [WHERE ...] [ORDER BY ...] LIMIT n OFFSET s;\n\nä¸ºä»€ä¹ˆéœ€è¦åˆ†é¡µï¼Ÿ\nå‡è®¾ä¸€ä¸ªè¡¨é‡Œé¢æœ‰ä¸Šåƒä¸‡æ¡æ•°æ®ï¼Œå¦‚æœä½ ä½¿ç”¨select * from è¡¨è¿›è¡Œå…¨åˆ—æŸ¥è¯¢ï¼Œé‚£å¯èƒ½MySQLæ•°æ®åº“å°±ä¼šå› ä¸ºè¦ä¸€æ¬¡æ€§ç»™ä½ è¿”å›å¤§é‡æ•°æ®è€Œå¡æ­»ï¼Œç›´æ¥å½±å“å…¶ä»–åº”ç”¨ä½¿ç”¨è¯¥æ•°æ®åº“ï¼Œå¯¼è‡´æœåŠ¡å®•æœºï¼\næ‰€ä»¥ï¼Œåœ¨æŸ¥è¯¢ä¸€ä¸ªæœªçŸ¥è¡¨çš„æ—¶å€™ï¼Œå»ºè®®å…ˆä½¿ç”¨descæŸ¥çœ‹è¡¨ç»“æ„ï¼Œåœ¨å†åŠ ä¸Šä¸€ä¸ªLIMIT 1ï¼Œæ¥æŸ¥çœ‹å¾ˆå°‘çš„å‡ æ¡æ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›è¡Œäººä¸ºåˆ†æï¼Œç¡®å®šè¿™ä¸ªè¡¨çš„åŠŸèƒ½ï¼›\n\nå½“ç„¶ï¼Œåœ¨é¡¹ç›®åˆä½œä¸­ï¼Œè‚¯å®šéœ€è¦æœ‰äººç¼–å†™æ–‡æ¡£æ¥è¯´æ˜è¿™äº›è¡¨çš„ä½œç”¨ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œåº”è¯¥å…ˆå»æŸ¥é¡¹ç›®æ–‡æ¡£å†è¿›è¡Œæ“ä½œã€‚\n\nSELECT id, name, math, english, chinese FROM exam_result\tORDER BY id LIMIT 3 OFFSET 0;\n\nä¸Šé¢çš„è¯­å¥çš„æ„æ€æ˜¯ï¼Œä»åç§»é‡ä¸º0çš„æœªçŸ¥ï¼ˆå³è¡¨å¼€å¤´ï¼‰ç­›é€‰å‡º3ä¸ªæ•°æ®ï¼›æœ€ç»ˆå±•ç¤ºçš„å°±åªæœ‰3æ¡æ•°æ®\nMariaDB [hello_mysql]&gt; SELECT id, name, math, english, chinese FROM exam_result    -&gt; ORDER BY id LIMIT 3 OFFSET 0;+----+-----------+------+---------+---------+| id | name      | math | english | chinese |+----+-----------+------+---------+---------+|  1 | å”ä¸‰è—    |   98 |      56 |      67 ||  2 | å­™æ‚Ÿç©º    |   78 |      77 |      87 ||  3 | çŒªæ‚Ÿèƒ½    |   98 |      90 |      88 |+----+-----------+------+---------+---------+3 rows in set (0.000 sec)\n\nä¿®æ”¹offsetï¼Œå¯ä»¥é€šè¿‡idçœ‹åˆ°æ•°æ®çš„å˜åŒ–\nMariaDB [hello_mysql]&gt; SELECT id, name, math, english, chinese FROM exam_result    -&gt; ORDER BY id LIMIT 3 OFFSET 4;+----+-----------+------+---------+---------+| id | name      | math | english | chinese |+----+-----------+------+---------+---------+|  5 | åˆ˜ç„å¾·    |   85 |      45 |      55 ||  6 | å­™æƒ      |   73 |      78 |      70 ||  7 | å®‹å…¬æ˜    |   65 |      30 |      75 |+----+-----------+------+---------+---------+3 rows in set (0.001 sec)\n\nå¦‚æœoffsetåå¹¶æ²¡æœ‰3ä¸ªæ•°æ®ï¼Œä¹Ÿä¸ä¼šå‡ºé—®é¢˜ï¼Œèƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºæ¥\nMariaDB [hello_mysql]&gt; SELECT id, name, math, english, chinese FROM exam_result ORDER BY id LIMIT 3 OFFSET 6;+----+-----------+------+---------+---------+| id | name      | math | english | chinese |+----+-----------+------+---------+---------+|  7 | å®‹å…¬æ˜    |   65 |      30 |      75 |+----+-----------+------+---------+---------+1 row in set (0.001 sec)\n\nå¦‚æœoffsetå¤§äºè¡¨ä¸­å·²æœ‰æ•°æ®æ•°é‡ï¼Œé‚£å°±ä¼šæ˜¾ç¤ºç©ºï¼Œå¹¶ä¸ä¼šæ‰§è¡Œå‡ºé”™ï¼\nMariaDB [hello_mysql]&gt; SELECT id, name, math, english, chinese FROM exam_result ORDER BY id LIMIT 3 OFFSET 10;Empty set (0.001 sec)\n\n3.2.9 æ‰§è¡Œé¡ºåºåœ¨æ‰§è¡Œè¿™äº›sqlè¯­å¥ä¸­çš„è¯­æ³•çš„æ—¶å€™ï¼ŒMySQLæ˜¯ä¼šæœ‰ä¸€ä¸ªæ‰§è¡Œé¡ºåºçš„\n\nå…ˆé€šè¿‡fromè¡¨ä»è¡¨ä¸­æ‹¿åˆ°æ•°æ®\nå†é€šè¿‡whereçš„æ¡ä»¶ç­›é€‰æ•°æ®\næ ¹æ® SELECT å­å¥ä¸­æŒ‡å®šçš„åˆ—ï¼ŒMySQL æœ€ç»ˆç¡®å®šè¦è¿”å›çš„æ•°æ®ï¼›\nç­›é€‰å®Œæ¯•æœ€ç»ˆéœ€è¦æ˜¾ç¤ºçš„æ•°æ®åï¼Œæ ¹æ®order byå¯¹æ•°æ®è¿›è¡Œæ’åºï¼›æ’åºå¯ä»¥ä½¿ç”¨åˆ«åï¼›æ’åºçš„å­—æ®µä¸ä¸€å®šéœ€è¦å‡ºç°åœ¨selectæŒ‡å®šçš„åˆ—ä¸­ï¼›\nå¦‚æœæŸ¥è¯¢åŒ…å« DISTINCT å…³é”®å­—ï¼ŒMySQL ä¼šè¿›è¡Œå»é‡æ“ä½œï¼Œç¡®ä¿ç»“æœé›†ä¸­çš„è¡Œæ˜¯å”¯ä¸€çš„ï¼›\n\nåœ¨åæ–‡è®²åˆ°èšåˆè¯­å¥çš„æ—¶å€™ï¼Œè¿˜ä¼šé‡è°ˆä¸€éæ‰§è¡Œé¡ºåº\n3.3 æ›´æ–° UpdateUPDATE è¡¨å SET å­—æ®µå = æ–°å€¼ WHERE æŸ¥è¯¢æ¡ä»¶...;\n\n3.3.1 æ›´æ–°å•ä¸ªè®°å½•-- æŸ¥çœ‹åŸè§†æ•°æ®MariaDB [hello_mysql]&gt; SELECT name, math FROM exam_result WHERE name = &#x27;å­™æ‚Ÿç©º&#x27;;+-----------+------+| name      | math |+-----------+------+| å­™æ‚Ÿç©º    |   78 |+-----------+------+1 row in set (0.000 sec)-- æ›´æ–°æ•°æ®MariaDB [hello_mysql]&gt; UPDATE exam_result SET math = 80 WHERE name = &#x27;å­™æ‚Ÿç©º&#x27;;Query OK, 1 row affected (0.019 sec)Rows matched: 1  Changed: 1  Warnings: 0-- å†æ¬¡æŸ¥çœ‹ç»“æœï¼ŒæˆåŠŸæ›´æ–°MariaDB [hello_mysql]&gt; SELECT name, math FROM exam_result WHERE name = &#x27;å­™æ‚Ÿç©º&#x27;;+-----------+------+| name      | math |+-----------+------+| å­™æ‚Ÿç©º    |   80 |+-----------+------+1 row in set (0.000 sec)\n\n3.3.2 ä¸€æ¬¡æ›´æ–°å¤šåˆ—MariaDB [hello_mysql]&gt; SELECT name, math, chinese FROM exam_result WHERE name = &#x27;æ›¹å­Ÿå¾·&#x27;;+-----------+------+---------+| name      | math | chinese |+-----------+------+---------+| æ›¹å­Ÿå¾·    |   84 |      82 |+-----------+------+---------+1 row in set (0.001 sec)-- ä¸€æ¬¡æ›´æ–°å¤šåˆ— MariaDB [hello_mysql]&gt; UPDATE exam_result SET math = 60, chinese = 70 WHERE name = &#x27;æ›¹å­Ÿå¾·&#x27;;Query OK, 1 row affected (0.001 sec)Rows matched: 1  Changed: 1  Warnings: 0MariaDB [hello_mysql]&gt; SELECT name, math, chinese FROM exam_result WHERE name = &#x27;æ›¹å­Ÿå¾·&#x27;;+-----------+------+---------+| name      | math | chinese |+-----------+------+---------+| æ›¹å­Ÿå¾·    |   60 |      70 |+-----------+------+---------+1 row in set (0.000 sec)\n\n3.3.3 å°†æ€»æˆç»©å€’æ•°å‰ä¸‰çš„æ•°å­¦æˆç»©åŠ ä¸Š30åˆ†-- æŸ¥çœ‹å…ƒæ•°æ®SELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result\tORDER BY æ€»åˆ† LIMIT 3;-- æ›´æ–°ï¼Œéœ€è¦æ³¨æ„ä¸æ”¯æŒ+=è¿™ç§è¿ç®—ç¬¦UPDATE exam_result SET math = math + 30\tORDER BY chinese + math + english LIMIT 3;-- æŸ¥çœ‹æ›´æ–°åç»“æœSELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result\tWHERE name IN (&#x27;å®‹å…¬æ˜&#x27;, &#x27;åˆ˜ç„å¾·&#x27;, &#x27;æ›¹å­Ÿå¾·&#x27;);-- æŒ‰æ€»æˆç»©æ’åºåç»“æœSELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result\tORDER BY æ€»åˆ† LIMIT 3;\n\nç»“æœå¦‚ä¸‹\nMariaDB [hello_mysql]&gt; SELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result    -&gt; ORDER BY æ€»åˆ† LIMIT 3;+-----------+------+--------+| name      | math | æ€»åˆ†   |+-----------+------+--------+| å®‹å…¬æ˜    |   65 |    170 || åˆ˜ç„å¾·    |   85 |    185 || æ›¹å­Ÿå¾·    |   60 |    197 |+-----------+------+--------+3 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; UPDATE exam_result SET math = math + 30    -&gt; ORDER BY chinese + math + english LIMIT 3;Query OK, 3 rows affected (0.043 sec)Rows matched: 3  Changed: 3  Warnings: 0MariaDB [hello_mysql]&gt; SELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result    -&gt; WHERE name IN (&#x27;å®‹å…¬æ˜&#x27;, &#x27;åˆ˜ç„å¾·&#x27;, &#x27;æ›¹å­Ÿå¾·&#x27;);+-----------+------+--------+| name      | math | æ€»åˆ†   |+-----------+------+--------+| æ›¹å­Ÿå¾·    |   90 |    227 || åˆ˜ç„å¾·    |  115 |    215 || å®‹å…¬æ˜    |   95 |    200 |+-----------+------+--------+3 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; SELECT name, math, chinese + math + english æ€»åˆ† FROM exam_result    -&gt; ORDER BY æ€»åˆ† LIMIT 3;+-----------+------+--------+| name      | math | æ€»åˆ†   |+-----------+------+--------+| å®‹å…¬æ˜    |   95 |    200 || åˆ˜ç„å¾·    |  115 |    215 || å”ä¸‰è—    |   98 |    221 |+-----------+------+--------+3 rows in set (0.000 sec)\n\n3.3.4 å°†æ‰€æœ‰åŒå­¦çš„è¯­æ–‡æˆç»©æ›´æ–°ä¸ºåŸæœ‰çš„2å€MariaDB [hello_mysql]&gt; SELECT * FROM exam_result;+----+-----------+---------+------+---------+| id | name      | chinese | math | english |+----+-----------+---------+------+---------+|  1 | å”ä¸‰è—    |      67 |   98 |      56 ||  2 | å­™æ‚Ÿç©º    |      87 |   80 |      77 ||  3 | çŒªæ‚Ÿèƒ½    |      88 |   98 |      90 ||  4 | æ›¹å­Ÿå¾·    |      70 |   90 |      67 ||  5 | åˆ˜ç„å¾·    |      55 |  115 |      45 ||  6 | å­™æƒ      |      70 |   73 |      78 ||  7 | å®‹å…¬æ˜    |      75 |   95 |      30 |+----+-----------+---------+------+---------+7 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; UPDATE exam_result SET chinese = chinese * 2;Query OK, 7 rows affected (0.001 sec)Rows matched: 7  Changed: 7  Warnings: 0MariaDB [hello_mysql]&gt; SELECT * FROM exam_result;+----+-----------+---------+------+---------+| id | name      | chinese | math | english |+----+-----------+---------+------+---------+|  1 | å”ä¸‰è—    |     134 |   98 |      56 ||  2 | å­™æ‚Ÿç©º    |     174 |   80 |      77 ||  3 | çŒªæ‚Ÿèƒ½    |     176 |   98 |      90 ||  4 | æ›¹å­Ÿå¾·    |     140 |   90 |      67 ||  5 | åˆ˜ç„å¾·    |     110 |  115 |      45 ||  6 | å­™æƒ      |     140 |   73 |      78 ||  7 | å®‹å…¬æ˜    |     150 |   95 |      30 |+----+-----------+---------+------+---------+7 rows in set (0.000 sec)\n\næ›´æ–°è¯­å¥çš„åŸºæœ¬æ“ä½œå°±åªæœ‰è¿™äº›ï¼\n3.4 åˆ é™¤ Deleteè¯­æ³•\nDELETE FROM table_name [WHERE ...] [ORDER BY ...] [LIMIT ...]\n\n3.4.1 åˆ é™¤å­™æ‚Ÿç©ºçš„è€ƒè¯•æˆç»©DELETE FROM exam_result WHERE name = &#x27;å­™æ‚Ÿç©º&#x27;;\n\næ•ˆæœ\nMariaDB [hello_mysql]&gt; SELECT * FROM exam_result;+----+-----------+---------+------+---------+| id | name      | chinese | math | english |+----+-----------+---------+------+---------+|  1 | å”ä¸‰è—    |     134 |   98 |      56 ||  2 | å­™æ‚Ÿç©º    |     174 |   80 |      77 ||  3 | çŒªæ‚Ÿèƒ½    |     176 |   98 |      90 ||  4 | æ›¹å­Ÿå¾·    |     140 |   90 |      67 ||  5 | åˆ˜ç„å¾·    |     110 |  115 |      45 ||  6 | å­™æƒ      |     140 |   73 |      78 ||  7 | å®‹å…¬æ˜    |     150 |   95 |      30 |+----+-----------+---------+------+---------+7 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; DELETE FROM exam_result WHERE name = &#x27;å­™æ‚Ÿç©º&#x27;;Query OK, 1 row affected (0.043 sec)MariaDB [hello_mysql]&gt; SELECT * FROM exam_result;+----+-----------+---------+------+---------+| id | name      | chinese | math | english |+----+-----------+---------+------+---------+|  1 | å”ä¸‰è—    |     134 |   98 |      56 ||  3 | çŒªæ‚Ÿèƒ½    |     176 |   98 |      90 ||  4 | æ›¹å­Ÿå¾·    |     140 |   90 |      67 ||  5 | åˆ˜ç„å¾·    |     110 |  115 |      45 ||  6 | å­™æƒ      |     140 |   73 |      78 ||  7 | å®‹å…¬æ˜    |     150 |   95 |      30 |+----+-----------+---------+------+---------+6 rows in set (0.000 sec)\n\n3.4.2 åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼ˆä¸æ˜¯åˆ é™¤è¡¨ï¼‰æ…ç”¨ï¼ä¸ç„¶å°±æ˜¯ä»åˆ åº“åˆ°è·‘è·¯äº†ï¼\nDELETE FROM è¡¨å;\n\næ³¨æ„ï¼Œè¿™ä¸ªè¯­å¥æ˜¯åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œè¡¨ä¸ä¼šè¢«åˆ é™¤ï¼Œ AUTO_INCREMENT é¡¹ä¹Ÿä¸ä¼šè¢«é‡ç½®ï¼Œä¼šåœ¨åŸæœ‰åŸºç¡€ä¸Šç»§ç»­å¢åŠ \n3.4.3 æˆªæ–­è¡¨è¯­æ³•å¦‚ä¸‹ï¼Œè¿™ä¸ªæ“ä½œæ›´è¦æ…ç”¨ã€‚\nTRUNCATE [TABLE] table_name\n\n\nåªèƒ½å¯¹æ•´è¡¨æ“ä½œï¼Œä¸èƒ½åƒ DELETE ä¸€æ ·é’ˆå¯¹éƒ¨åˆ†æ•°æ®æ“ä½œï¼› \nå®é™…ä¸Š MySQL ä¸å¯¹æ•°æ®æ“ä½œï¼Œæ‰€ä»¥æ¯” DELETE æ›´å¿«ï¼Œä½†æ˜¯TRUNCATEåœ¨åˆ é™¤æ•°æ®çš„æ—¶å€™ï¼Œå¹¶ä¸ç»è¿‡çœŸæ­£çš„äº‹åŠ¡ï¼Œæ‰€ä»¥æ— æ³•å›æ»šï¼›\nä¼šé‡ç½® AUTO_INCREMENT é¡¹ï¼›\n\n-- å‡†å¤‡æµ‹è¯•è¡¨CREATE TABLE for_truncate (id INT PRIMARY KEY AUTO_INCREMENT,name VARCHAR(20));Query OK, 0 rows affected (0.16 sec)-- æ’å…¥æµ‹è¯•æ•°æ®INSERT INTO for_truncate (name) VALUES (&#x27;A&#x27;), (&#x27;B&#x27;), (&#x27;C&#x27;);Query OK, 3 rows affected (1.05 sec)Records: 3 Duplicates: 0 Warnings: 0-- æŸ¥çœ‹æµ‹è¯•æ•°æ®SELECT * FROM for_truncate;+----+------+| id | name |+----+------+| 1 | A || 2 | B || 3 | C |+----+------+3 rows in set (0.00 sec)\n\næˆªæ–­æ•´è¡¨æ•°æ®ï¼Œæ³¨æ„å½±å“è¡Œæ•°æ˜¯ 0ï¼Œæ‰€ä»¥å®é™…ä¸Šæ²¡æœ‰å¯¹æ•°æ®çœŸæ­£æ“ä½œ\n-- æˆªæ–­è¡¨TRUNCATE for_truncate;Query OK, 0 rows affected (0.10 sec)-- æŸ¥çœ‹åˆ é™¤ç»“æœSELECT * FROM for_truncate;Empty set (0.00 sec)\n\næˆªæ–­æ•°æ®æ˜¯ä¼šé‡ç½®è‡ªå¢é”®å€¼çš„å½“å‰å€¼çš„ï¼Œæ–°æ’å…¥çš„æ•°æ®ä¼šä»1å¼€å§‹é‡æ–°è‡ªå¢ï¼›\n-- å†æ’å…¥ä¸€æ¡æ•°æ®ï¼Œè‡ªå¢ id åœ¨é‡æ–°å¢é•¿INSERT INTO for_truncate (name) VALUES (&#x27;D&#x27;);Query OK, 1 row affected (0.00 sec)-- æŸ¥çœ‹æ•°æ®SELECT * FROM for_truncate;+----+------+| id | name |+----+------+| 1 | D     |+----+------+1 row in set (0.00 sec)\n\nåœ¨linuxçš„æ–‡ä»¶æ“ä½œé‡Œé¢ï¼Œä¹Ÿæœ‰ä¸€ä¸ªO_TRUNCæ ‡è®°ä½ï¼Œä½œç”¨æ˜¯æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œå°†æ–‡ä»¶åŸæœ‰å†…å®¹æ¸…ç©ºï¼›\n3.5 æ’å…¥æŸ¥è¯¢ç»“æœINSERT INTO table_name [(column [, column ...])] SELECT ...\n\nè¿™ä¸ªè¯­æ³•çš„ä½œç”¨æœ‰ä¸¤ä¸ª\n\nå°†è¡¨1çš„æ•°æ®ç§»æ¤ä¸€éƒ¨åˆ†åˆ°å®Œå…¨ç›¸åŒçš„è¡¨2ï¼ˆè¡¨ç»“æ„è¦å®Œå…¨ä¸€è‡´ï¼‰\nå°†è¡¨1çš„æ•°æ®æ‹·è´ä¸€éƒ¨åˆ†åˆ°è‡ªå·±ï¼Œç›¸å½“äºæ–°å¢ä¸€éƒ¨åˆ†å†—ä½™æ•°æ®\n\næ¯”å¦‚æˆ‘ä»¬æƒ³å°†ä¸€ä¸ªè¡¨ä¸­çš„é‡å¤æ•°æ®ç»™åˆ é™¤ï¼Œä½†æ˜¯deleteè¯­å¥å¹¶æ²¡æœ‰ç›´æ¥ä¸ä¹‹ç›¸å…³çš„è¯­æ³•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é‡‡å–å¦‚ä¸‹æªæ–½\n\nåˆ›å»ºä¸è¡¨1å®Œå…¨ç›¸åŒçš„è¡¨2ï¼ˆåå­—æ”¹ä¸€ä¸‹ï¼‰\nä»è¡¨1ä¸­æŸ¥è¯¢ç›®æ ‡æ•°æ®ï¼Œå¹¶å¸¦ä¸Šdistinctå¯¹æŸ¥è¯¢ç»“æœå»é‡\nå°†è¡¨1æŸ¥è¯¢åˆ°çš„è¿™ä¸ªå»é‡åçš„æ•°æ®æ’å…¥åˆ°è¡¨2\nåˆ é™¤è¡¨1\né‡å‘½åè¡¨2ä¸ºè¡¨1çš„åå­—\n\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹æ“ä½œ\n-- åˆ›å»ºåŸæ•°æ®è¡¨CREATE TABLE duplicate_table (id int, name varchar(20));Query OK, 0 rows affected (0.01 sec)-- æ’å…¥æµ‹è¯•æ•°æ®ï¼Œæœ‰é‡å¤INSERT INTO duplicate_table VALUES    (100, &#x27;aaa&#x27;),    (100, &#x27;aaa&#x27;),    (200, &#x27;bbb&#x27;),    (200, &#x27;bbb&#x27;),    (200, &#x27;bbb&#x27;),    (300, &#x27;ccc&#x27;);Query OK, 6 rows affected (0.002 sec)Records: 6  Duplicates: 0  Warnings: 0-- åˆ›å»ºä¸€å¼ ç©ºè¡¨ no_duplicate_tableï¼Œç»“æ„å’Œ duplicate_table ä¸€æ ·CREATE TABLE no_duplicate_table LIKE duplicate_table;Query OK, 0 rows affected (0.00 sec)-- å°† duplicate_table çš„å»é‡æ•°æ®æ’å…¥åˆ° no_duplicate_tableINSERT INTO no_duplicate_table SELECT DISTINCT * FROM duplicate_table;Query OK, 3 rows affected (0.002 sec)Records: 3  Duplicates: 0  Warnings: 0-- é‡å‘½åè¡¨RENAME TABLE duplicate_table TO old_duplicate_table,no_duplicate_table TO duplicate_table;Query OK, 0 rows affected (0.00 sec)-- æŸ¥çœ‹æœ€ç»ˆç»“æœï¼Œæ•°æ®æ²¡æœ‰é‡å¤SELECT * FROM duplicate_table;+------+------+| id | name |+------+------+| 100 | aaa || 200 | bbb || 300 | ccc |+------+------+3 rows in set (0.00 sec)\n\n4.èšåˆå‡½æ•°èšåˆç»Ÿè®¡æ˜¯é—´æ¥æˆ–è€…ç›´æ¥ç»Ÿè®¡åˆ—æ–¹å‘ä¸Šçš„æŸäº›æ•°æ®\n\n\n\nå‡½æ•°\nè¯´æ˜\n\n\n\nCOUNT([DISTINCT] expr)\nè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®çš„ æ•°é‡\n\n\nSUM([DISTINCT] expr)\nè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®çš„ æ€»å’Œï¼Œä¸æ˜¯æ•°å­—æ²¡æœ‰æ„ä¹‰\n\n\nAVG([DISTINCT] expr)\nè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®çš„ å¹³å‡å€¼ï¼Œä¸æ˜¯æ•°å­—æ²¡æœ‰æ„ä¹‰\n\n\nMAX([DISTINCT] expr)\nè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®çš„ æœ€å¤§å€¼ï¼Œä¸æ˜¯æ•°å­—æ²¡æœ‰æ„ä¹‰\n\n\nMIN([DISTINCT] expr)\nè¿”å›æŸ¥è¯¢åˆ°çš„æ•°æ®çš„ æœ€å°å€¼ï¼Œä¸æ˜¯æ•°å­—æ²¡æœ‰æ„ä¹‰\n\n\n4.1 ç»Ÿè®¡ç­çº§æœ‰å¤šå°‘äººå½“æˆ‘ä»¬éœ€è¦ç»Ÿè®¡è¡¨ä¸­è®°å½•ä¸ªæ•°æ—¶ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„è¯­å¥ã€‚\nselect count(*) from students;+----------+| count(*) |+----------+|        5 |+----------+1 row in set (0.000 sec)\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¡¨è¾¾å¼è¿›è¡Œç»Ÿè®¡ã€‚\nSELECT COUNT(1) FROM students;+----------+| COUNT(1) |+----------+|        5 |+----------+1 row in set (0.000 sec)\n\nä½ ä¼šå‘ç°è¿™é‡Œè™½ç„¶æ˜¯count1ï¼Œä½†æ˜¯ç»“æœä¾æ—§æ˜¯5ã€‚è¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬åœ¨selectçš„ç›®æ ‡åˆ—é‡Œé¢æ·»åŠ ä¸€ä¸ªå¸¸æ•°æˆ–è€…ä¸€ä¸ªè¡¨è¾¾å¼çš„æ—¶å€™ï¼Œä»–ä¼šè¿½åŠ åˆ°åŸæœ‰è¡¨çš„æœ«å°¾ã€‚è¿™é‡Œæˆ‘ä»¬ç›´æ¥å†™ä¸ª1ï¼Œå°±ä¼šæŠŠ1è¿½åŠ åˆ°è¡¨ä¸­æ¯ä¸€è¡Œçš„æœ«å°¾ï¼ˆç›¸å½“äºæ–°å¢ä¸€åˆ—ï¼Œå†…å®¹å…¨ä¸º1ï¼‰ï¼Œæ‰€ä»¥æœ€ç»ˆç»Ÿè®¡å‡ºæ¥çš„ç»“æœä¾æ—§æ˜¯è¡¨ä¸­è®°å½•çš„ä¸ªæ•°ï¼\nMariaDB [stu_test]&gt; select * from student;+------+--------+| id   | name   |+------+--------+|    1 | å¼ ä¸‰   ||    2 | æå››   ||    3 | ç‹äº”   ||    4 | èµµå…­   ||    5 | åˆ˜ä¸ƒ   |+------+--------+5 rows in set (0.000 sec)MariaDB [stu_test]&gt; select *,1 from student;+------+--------+---+| id   | name   | 1 |+------+--------+---+|    1 | å¼ ä¸‰   | 1 ||    2 | æå››   | 1 ||    3 | ç‹äº”   | 1 ||    4 | èµµå…­   | 1 ||    5 | åˆ˜ä¸ƒ   | 1 |+------+--------+---+5 rows in set (0.000 sec)\n\n4.2 ç»Ÿè®¡ç­çº§æœ‰å¤šå°‘äººæœ‰qqå·è¿™é‡Œèƒ½çœ‹å‡ºæ¥NULLæ˜¯ä¸è®¡å…¥countçš„\n&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   || 104 | 20000 | é—°åœŸ      | NULL   || 105 |  1005 | å‘¨æ ‘äºº    | NULL   |+-----+-------+-----------+--------+5 rows in set (0.000 sec)&gt; SELECT COUNT(qq) FROM students;+-----------+| COUNT(qq) |+-----------+|         1 |+-----------+1 row in set (0.000 sec)\n\nä½†ç©ºå­—ç¬¦ä¸²æ˜¯ä¼šè¢«æ­£å¸¸ç»Ÿè®¡çš„ã€‚è¿™é‡Œåˆä¸€æ¬¡å±•ç°å‡ºäº†ç©ºå­—ç¬¦ä¸²å’ŒNULLçš„åŒºåˆ«ï¼ŒNULLè¡¨è¾¾çš„æ„æ€å°±æ˜¯è¿™æ¡è®°å½•çš„è¿™ä¸ªå­—æ®µæ˜¯æ²¡æœ‰æ•°æ®çš„ï¼è€Œç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯å­—ç¬¦ä¸²çš„ä¸€ç§ï¼Œå¯¹äºæ•°æ®åº“æ¥è¯´ä¾æ—§ä»£è¡¨æœ‰æ•°æ®ã€‚\nMariaDB [hello_mysql]&gt; insert into students values (2,10123,&#x27;èƒ¡å›¾å›¾&#x27;,&#x27;&#x27;);Query OK, 1 row affected (0.001 sec)MariaDB [hello_mysql]&gt; select * from students;+-----+-------+-----------+--------+| id  | sn    | name      | qq     |+-----+-------+-----------+--------+|   1 | 10010 | å”å¤§å¸ˆ    | 123124 ||   2 | 10123 | èƒ¡å›¾å›¾    |        || 102 | 20001 | æ›¹å­Ÿå¾·    | NULL   || 103 | 20002 | å­™ä»²è°‹    | NULL   || 104 | 20000 | é—°åœŸ      | NULL   || 105 |  1005 | å‘¨æ ‘äºº    | NULL   |+-----+-------+-----------+--------+6 rows in set (0.000 sec)MariaDB [hello_mysql]&gt; SELECT COUNT(qq) FROM students;+-----------+| COUNT(qq) |+-----------+|         2 |+-----------+1 row in set (0.000 sec)\n\n4.3 ç»Ÿè®¡æ•°å­¦æˆç»©åˆ†æ•°çš„ä¸ªæ•°-- COUNT(math) ç»Ÿè®¡çš„æ˜¯å…¨éƒ¨æˆç»©SELECT COUNT(math) FROM exam_result;+-------------+| COUNT(math) |+-------------+|           6 |+-------------+1 row in set (0.000 sec)-- COUNT(DISTINCT math) ç»Ÿè®¡çš„æ˜¯å»é‡æˆç»©æ•°é‡-- è¿™é‡Œçš„DISTINCTä¸€å®šè¦æ”¾åœ¨æ‹¬å·é‡Œï¼Œä¸ç„¶æ˜¯æ— æ•ˆçš„ï¼Œè¿™ç‚¹ä»è¯­ä¹‰ä¸Šä¹Ÿèƒ½ç†è§£ï¼›SELECT COUNT(DISTINCT math) FROM exam_result;+----------------------+| COUNT(DISTINCT math) |+----------------------+|                    5 |+----------------------+1 row in set (0.001 sec)\n\n4.4 ç»Ÿè®¡æ•°å­¦æˆç»©æ€»åˆ†MariaDB [hello_mysql]&gt; SELECT SUM(math) FROM exam_result;+-----------+| SUM(math) |+-----------+|       569 |+-----------+1 row in set (0.000 sec)-- æ²¡æœ‰ç»“æœçš„æ—¶å€™ï¼Œè¿”å›NULLMariaDB [hello_mysql]&gt; SELECT SUM(math) FROM exam_result WHERE math &lt; 60;+-----------+| SUM(math) |+-----------+|      NULL |+-----------+1 row in set (0.042 sec)\n\n4.5 ç»Ÿè®¡å¹³å‡åˆ†SELECT AVG(chinese + math + english) å¹³å‡æ€»åˆ† FROM exam_result;+--------------+| å¹³å‡æ€»åˆ†      |+--------------+| 297.5        |+--------------+\n\nä½ ä¹Ÿå¯ä»¥å°†sumå’Œcountè¿ç”¨æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœ\nSELECT SUM(chinese + math + english)/COUNT(1) å¹³å‡æ€»åˆ† FROM exam_result;+--------------+| å¹³å‡æ€»åˆ†     |+--------------+|        297.5 |+--------------+1 row in set (0.001 sec)\n\n4.6 ç»Ÿè®¡æœ€é«˜&#x2F;æœ€ä½è¿”å›è‹±è¯­çš„æœ€é«˜åˆ†\nSELECT MAX(english) FROM exam_result;+--------------+| MAX(english) |+--------------+|          90  |+--------------+1 row in set (0.00 sec)\n\nè¿”å›å¤§äºä¸ƒååˆ†ä»¥ä¸Šçš„æ•°å­¦æœ€ä½åˆ†\nSELECT MIN(math) FROM exam_result WHERE math &gt; 70;+-----------+| MIN(math) |+-----------+|        73 |+-----------+1 row in set (0.001 sec)\n\n5.group byåŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼Œå«ä¹‰æ˜¯åœ¨selectçš„æ—¶å€™å¯¹ç»“æœè¿›è¡Œä¸€å®šçš„åˆ†ç»„\nselect column1, column2, .. from table group by column;\n\n5.0 æµ‹è¯•è¡¨è¿™é‡Œç»™å¤§å®¶å‡†å¤‡äº†ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„æµ‹è¯•è¡¨ï¼Œæ¥è‡ªoracle 9iï¼Œä½ å¯ä»¥åœ¨æˆ‘çš„Giteeä»“åº“æ‰¾åˆ°ä»–ï¼›\nä½¿ç”¨ftpå°†è¿™ä¸ªsqlä¼ åˆ°linuxé‡Œé¢ï¼Œè¿›å…¥mysqlçš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨source æ–‡ä»¶è·¯å¾„çš„è¯­å¥ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªè¡¨é‡Œé¢çš„æ•°æ®å¯¼å…¥åˆ°mysqlä¸­ï¼›\nsource /root/scott_data.sql\n\nè¿™ä¸ªsqlé‡Œé¢åŒ…å«EMPå‘˜å·¥è¡¨ã€DEPTéƒ¨é—¨è¡¨ã€SALGRADEå·¥èµ„ç­‰çº§è¡¨ä¸‰å¼ è¡¨ç»“æ„ï¼Œå¾ˆæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼›è¡¨ç»“æ„å¦‚ä¸‹\nMariaDB [scott]&gt; desc dept;+--------+--------------------------+------+-----+---------+-------+| Field  | Type                     | Null | Key | Default | Extra |+--------+--------------------------+------+-----+---------+-------+| deptno | int(2) unsigned zerofill | NO   |     | NULL    |       || dname  | varchar(14)              | YES  |     | NULL    |       || loc    | varchar(13)              | YES  |     | NULL    |       |+--------+--------------------------+------+-----+---------+-------+3 rows in set (0.001 sec)MariaDB [scott]&gt; desc salgrade;+-------+---------+------+-----+---------+-------+| Field | Type    | Null | Key | Default | Extra |+-------+---------+------+-----+---------+-------+| grade | int(11) | YES  |     | NULL    |       || losal | int(11) | YES  |     | NULL    |       || hisal | int(11) | YES  |     | NULL    |       |+-------+---------+------+-----+---------+-------+3 rows in set (0.001 sec)MariaDB [scott]&gt; desc emp;+----------+--------------------------+------+-----+---------+-------+| Field    | Type                     | Null | Key | Default | Extra |+----------+--------------------------+------+-----+---------+-------+| empno    | int(6) unsigned zerofill | NO   |     | NULL    |       || ename    | varchar(10)              | YES  |     | NULL    |       || job      | varchar(9)               | YES  |     | NULL    |       || mgr      | int(4) unsigned zerofill | YES  |     | NULL    |       || hiredate | datetime                 | YES  |     | NULL    |       || sal      | decimal(7,2)             | YES  |     | NULL    |       || comm     | decimal(7,2)             | YES  |     | NULL    |       || deptno   | int(2) unsigned zerofill | YES  |     | NULL    |       |+----------+--------------------------+------+-----+---------+-------+8 rows in set (0.001 sec)\n\n\n\n5.1 å¦‚ä½•æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„å’Œæœ€é«˜å·¥èµ„select deptno,avg(sal),max(sal) from emp group by deptno;+--------+-------------+----------+| deptno | avg(sal)    | max(sal) |+--------+-------------+----------+|     10 | 2916.666667 |  5000.00 ||     20 | 2175.000000 |  3000.00 ||     30 | 1566.666667 |  2850.00 |+--------+-------------+----------+3 rows in set (0.012 sec)\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„èšåˆå‡½æ•°ï¼ˆæ¯”å¦‚avg(sal)ï¼‰æ˜¯æ— æ³•ç”¨ä½œwhereçš„æ¡ä»¶çš„ï¼Œå› ä¸ºwhereçš„æ‰§è¡Œé¡ºåºæ—©äºèšåˆå‡½æ•°ï¼Œä½ è¿ç›®æ ‡æ•°æ®éƒ½è¿˜æ²¡æœ‰é€šè¿‡whereç­›é€‰å‡ºæ¥ï¼Œæ€ä¹ˆå¯ä»¥èšåˆå‘¢ï¼Ÿ\nselect deptno,avg(sal),max(sal) from emp where avg(sal)&gt;200 group by deptno;\n\nå°è¯•ç”¨èšåˆå‡½æ•°æ¥åšwhereçš„ç­›é€‰æ¡ä»¶ï¼Œæ‰§è¡Œçš„æ—¶å€™ä¼šæŠ¥é”™\nMariaDB [scott]&gt; select deptno,avg(sal),max(sal) from emp where avg(sal)&gt;200 group by deptno;ERROR 1111 (HY000): Invalid use of group function\n\ngroup byçš„é™åˆ¶åœ¨MySQLä¸­ï¼Œå½“ä½ ä½¿ç”¨äº†group byä¹‹åï¼Œselectçš„ç»“æœæŒ‡å®šåˆ—å°±åªèƒ½åŒ…å«group byé‡Œé¢å‡ºç°è¿‡çš„åˆ—ï¼Œä»¥åŠèšåˆå‡½æ•°ï¼›\nä½†åœ¨æˆ‘å½“å‰ä½¿ç”¨çš„mariadbä¸­å¹¶æ²¡æœ‰å‡ºç°è¿™ä¸ªæŠ¥é”™ï¼Œå³ä¾¿group byåæ²¡æœ‰å‡ºç°enameå­—æ®µï¼Œæ•°æ®ä¾æ—§å¯ä»¥è¢«ç­›é€‰å‡ºæ¥ã€‚\nMariaDB [scott]&gt; select ename,deptno,job,avg(sal) as å¹³å‡å·¥èµ„, min(sal) as æœ€ä½å·¥èµ„ from emp group by deptno,job;+--------+--------+-----------+--------------+--------------+| ename  | deptno | job       | å¹³å‡å·¥èµ„     | æœ€ä½å·¥èµ„     |+--------+--------+-----------+--------------+--------------+| MILLER |     10 | CLERK     |  1300.000000 |      1300.00 || CLARK  |     10 | MANAGER   |  2450.000000 |      2450.00 || KING   |     10 | PRESIDENT |  5000.000000 |      5000.00 || SCOTT  |     20 | ANALYST   |  3000.000000 |      3000.00 || SMITH  |     20 | CLERK     |   950.000000 |       800.00 || JONES  |     20 | MANAGER   |  2975.000000 |      2975.00 || JAMES  |     30 | CLERK     |   950.000000 |       950.00 || BLAKE  |     30 | MANAGER   |  2850.000000 |      2850.00 || ALLEN  |     30 | SALESMAN  |  1400.000000 |      1250.00 |+--------+--------+-----------+--------------+--------------+9 rows in set (0.001 sec)\n\nä¸ºäº†ç¡®è®¤è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä½¿ç”¨dockeréƒ¨ç½²äº†ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„MySQL5.7ï¼ŒåŠ è½½scottè¡¨åä½¿ç”¨ç›¸åŒçš„SQLå‘½ä»¤è¿›è¡Œæµ‹è¯•ã€‚åœ¨Linuxä¸­å®‰è£…å®Œæ¯•dockeråï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªMySQL5.7ç‰ˆæœ¬çš„dockerå®¹å™¨ã€‚\nsudo docker run -d \\    -p 13306:3306 \\    -v /home/wsl/docker/mysql5.7/log:/var/log/mysql \\    -v /home/wsl/docker/mysql5.7/data:/var/lib/mysql \\    -v /home/wsl/docker/mysql5.7/conf:/etc/mysql/conf.d \\    -e MYSQL_ROOT_PASSWORD=123456 \\    --name mysql57 \\    mysql:5.7\n\nå°†scott_data.sqlæ‹·è´åˆ°/home/wsl/docker/mysql5.7/confé‡Œé¢ï¼Œå¹¶ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åœ¨MySQLå‘½ä»¤è¡Œä¸­åŠ è½½\n# åœ¨linuxä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿›å…¥dockerä¸­MySQLçš„å‘½ä»¤è¡Œsudo docker exec -it mysql57 mysql -uroot -p123456# åœ¨MySQLå‘½ä»¤è¡Œä¸­åŠ è½½sqlæ–‡ä»¶source /etc/mysql/conf.d/scott_data.sql\n\néšååˆ‡æ¢åˆ°æ•°æ®åº“ï¼Œå°è¯•æ‰§è¡Œä¸Šé¢è¿™ä¸ªgroup byçš„SQLè¯­å¥ã€‚\nselect ename,deptno,job,avg(sal), min(sal)from emp group by deptno,job;\n\nä¼šå‘ç°åœ¨MySQL5.7ä¸­æ˜¯ä¸å…è®¸è¿™ä¹ˆæ‰§è¡Œçš„ï¼Œå› ä¸ºenameå¹¶ä¸åœ¨group byçš„åˆ†ç»„åˆ—ä¸­ã€‚\nmysql&gt; select ename,deptno,job,avg(sal), min(sal)    -&gt; from emp     -&gt; group by deptno,job;ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;scott.emp.ename&#x27; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by\n\nå¦‚æœå°†selectä¸­çš„enameå»æ‰ï¼Œåˆ™å¯ä»¥è¢«æ‰§è¡Œ\nmysql&gt; select deptno,job,avg(sal), min(sal) from emp  group by deptno,job;+--------+-----------+-------------+----------+| deptno | job       | avg(sal)    | min(sal) |+--------+-----------+-------------+----------+|     10 | CLERK     | 1300.000000 |  1300.00 ||     10 | MANAGER   | 2450.000000 |  2450.00 ||     10 | PRESIDENT | 5000.000000 |  5000.00 ||     20 | ANALYST   | 3000.000000 |  3000.00 ||     20 | CLERK     |  950.000000 |   800.00 ||     20 | MANAGER   | 2975.000000 |  2975.00 ||     30 | CLERK     |  950.000000 |   950.00 ||     30 | MANAGER   | 2850.000000 |  2850.00 ||     30 | SALESMAN  | 1400.000000 |  1250.00 |+--------+-----------+-------------+----------+9 rows in set (0.00 sec)\n\nç„¶åï¼Œæˆ‘åˆåœ¨ä¸€ä¸ªMySQL 8.0.30çš„dockerä¸­å°è¯•æ‰§è¡Œç›¸åŒæ“ä½œï¼ˆè¿™é‡Œå°±ä¸å¤è¿°åŠ è½½è¡¨çš„å‘½ä»¤äº†ï¼‰ä¼šå‘ç°MySQL8ä¸­åŒæ ·å­˜åœ¨è¿™ä¸ªé™åˆ¶ï¼\nmysql&gt; select ename,deptno,job,avg(sal), min(sal)    -&gt; from emp     -&gt; group by deptno,job;ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &#x27;scott.emp.ename&#x27; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_bymysql&gt; select deptno,job,avg(sal), min(sal) from emp  group by deptno,job;+--------+-----------+-------------+----------+| deptno | job       | avg(sal)    | min(sal) |+--------+-----------+-------------+----------+|     20 | CLERK     |  950.000000 |   800.00 ||     30 | SALESMAN  | 1400.000000 |  1250.00 ||     20 | MANAGER   | 2975.000000 |  2975.00 ||     30 | MANAGER   | 2850.000000 |  2850.00 ||     10 | MANAGER   | 2450.000000 |  2450.00 ||     20 | ANALYST   | 3000.000000 |  3000.00 ||     10 | PRESIDENT | 5000.000000 |  5000.00 ||     30 | CLERK     |  950.000000 |   950.00 ||     10 | CLERK     | 1300.000000 |  1300.00 |+--------+-----------+-------------+----------+9 rows in set (0.00 sec)\n\nç»“è®ºï¼šMySQL5.7å’Œ8.0.30ä¸­éƒ½å­˜åœ¨å¯¹selectååªèƒ½å‡ºç°group byä¸­å·²å‡ºç°çš„åˆ—æˆ–èšåˆå‡½æ•°çš„é™åˆ¶ï¼Œè€Œ10.6.16-MariaDBä¸å­˜åœ¨è¿™ä¸ªé™åˆ¶ï¼\n5.2 æ˜¾ç¤ºæ¯ä¸ªéƒ¨é—¨çš„æ¯ç§å²—ä½çš„å¹³å‡å·¥èµ„å’Œæœ€ä½å·¥èµ„ä½¿ç”¨èšåˆå‡½æ•°å’Œgroup byæ¥è§£å†³ï¼Œé¢˜ç›®è¦æ±‚æ˜¯æ¯ä¸ªéƒ¨é—¨+æ¯ä¸ªå²—ä½ï¼Œæ‰€ä»¥æœ‰ä¸¤ä¸ªç­›é€‰æ¡ä»¶ï¼Œgroup byåé¢ä¹Ÿè¦å¸¦ä¸Šè¿™ä¸¤ä¸ªåˆ—ã€‚\n&gt; select avg(sal),min(sal),job, deptno from emp group by deptno, job;+-------------+----------+-----------+--------+| avg(sal)    | min(sal) | job       | deptno |+-------------+----------+-----------+--------+| 1300.000000 |  1300.00 | CLERK     |     10 || 2450.000000 |  2450.00 | MANAGER   |     10 || 5000.000000 |  5000.00 | PRESIDENT |     10 || 3000.000000 |  3000.00 | ANALYST   |     20 ||  950.000000 |   800.00 | CLERK     |     20 || 2975.000000 |  2975.00 | MANAGER   |     20 ||  950.000000 |   950.00 | CLERK     |     30 || 2850.000000 |  2850.00 | MANAGER   |     30 || 1400.000000 |  1250.00 | SALESMAN  |     30 |+-------------+----------+-----------+--------+9 rows in set (0.000 sec)\n\n5.3 æ˜¾ç¤ºå¹³å‡å·¥èµ„ä½äº2000çš„éƒ¨é—¨å’Œä»–çš„å¹³å‡å·¥èµ„å› ä¸ºèšåˆå‡½æ•°çš„ç»“æœæ— æ³•ä½œä¸ºwhereçš„æ¡ä»¶ï¼Œæ‰€ä»¥MySQLé¢å¤–æä¾›äº†ä¸€ä¸ªhavingå…³é”®å­—ï¼Œç”¨äºåœ¨èšåˆæŸ¥è¯¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°å¯¹æ•°æ®è¿›ä¸€æ­¥è¿›è¡Œç­›é€‰ã€‚\n-- ç»Ÿè®¡å„ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„select avg(sal) from emp group by deptno-- é€šè¿‡havingç­›é€‰å‡ºå¹³å‡å·¥èµ„ä½äº2000çš„ç»“æœselect avg(sal) as myavg from emp group by deptno having myavg&lt;2000;\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œhavingæ˜¯å¯ä»¥æ”¯æŒselectä¸­è®¾ç½®çš„åˆ«åçš„ï¼Œè¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œhavingçš„è¯­å¥æ˜¯æ™šäºselectæŒ‡å®šåˆ—æ‰§è¡Œçš„ï¼›\n&gt; select avg(sal) as myavg from emp group by deptno having myavg&lt;2000;+-------------+| myavg       |+-------------+| 1566.666667 |+-------------+1 row in set (0.042 sec)\n\n5.4 æ˜¾ç¤º10å·éƒ¨é—¨çš„æŸä¸ªå²—ä½çš„å¹³å‡å·¥èµ„ä½äº2000çš„å²—ä½havingå’Œwhereå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œwhereç”¨äºåˆæ­¥çš„æ‹†é€‰ï¼Œhavingç”¨äºæœ€ç»ˆç»“æœçš„ç­›é€‰ã€‚\nselect job,avg(sal),min(sal) from empwhere deptno = 10group by jobhaving avg(sal) &lt; 2000;\n\nç»“æœå¦‚ä¸‹ï¼Œå¯è§åœ¨10å·éƒ¨é—¨ä¸­ï¼Œåªæœ‰CLERKå²—ä½çš„å¹³å‡å·¥èµ„ä½äº2000å…ƒã€‚\nMariaDB [scott]&gt; select job,avg(sal),min(sal) from emp where deptno = 10 group by job having avg(sal) &lt; 2000;+-------+-------------+----------+| job   | avg(sal)    | min(sal) |+-------+-------------+----------+| CLERK | 1300.000000 |  1300.00 |+-------+-------------+----------+1 row in set (0.001 sec)\n\n5.5 å°ç»“\ngroup byé€šè¿‡å¯¹ç»“æœé›†åˆ†ç»„ï¼Œä¸ºèšåˆç»Ÿè®¡æä¾›åŸºæœ¬çš„åŠŸèƒ½æ”¯æŒï¼›\ngroup byåè·Ÿéšçš„æ˜¯åˆ†ç»„çš„å­—æ®µä¾æ®ï¼Œåªæœ‰åœ¨group byåé¢å‡ºç°è¿‡çš„å­—æ®µï¼Œåœ¨èšåˆç»Ÿè®¡æ—¶ï¼Œæ‰èƒ½åœ¨selectä¸­å‡ºç°ï¼ˆMySQLä¸­å­˜åœ¨æ­¤é™åˆ¶ï¼ŒMariaDBå–æ¶ˆäº†æ­¤é™åˆ¶ï¼‰ï¼›\nwhereè¯­å¥æ˜¯åœ¨è¡¨ä¸­æ•°æ®åˆæ­¥è¢«ç­›é€‰çš„æ—¶å€™ï¼Œæ¥èµ·æ•ˆæœçš„;\nhavingè¯­å¥æ˜¯åœ¨å®Œæˆæ•´ä¸ªåˆ†ç»„èšåˆç»Ÿè®¡åå†è¿›è¡Œç­›é€‰;\n\n6.SQLå„ä¸ªè¯­å¥æ‰§è¡Œé¡ºåºé¢è¯•çš„æ—¶å€™å¸¸è€ƒï¼Œå»ºè®®è®°ä½\nfrom &gt; on &gt; join &gt; where&gt; group by &gt; with &gt; having &gt; select&gt; distinct &gt; order by &gt; limit\n\nä»¥å¦‚ä¸‹çš„è¯­å¥ä¸ºä¾‹ï¼Œæ‰§è¡Œé¡ºåºå‚è€ƒæˆ‘çš„åœ†åœˆæ•°å­—æ ‡è®°\nselect deptno, avg(sal) as myavg â‘£ from emp â‘  \twhere sal &gt; 1000 â‘¡\tgroup by deptno â‘¢\thaving myavg &lt; 2000 â‘¤; \n\n7.è§†å›¾7.1 åˆ›å»ºè§†å›¾åœ¨MySQLä¸­è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„è™šæ‹Ÿè¡¨ï¼Œè¢«ç§°ä½œè§†å›¾ï¼›å…¶å¯ä»¥å°†ä¸€ä¸ªselectè¯­å¥çš„æŸ¥è¯¢ç»“æœè§†ä½œä¸€ä¸ªæ–°è¡¨ï¼Œä¾›æˆ‘ä»¬ä½¿ç”¨ï¼›\nè¯·æ³¨æ„ï¼è¿™é‡Œçš„è§†å›¾è¦å’Œäº‹åŠ¡ä¸­çš„ReadViewåšåŒºåˆ†ï¼Œä¸¤è€…æ¯«æ— å…³ç³»ï¼\ncreate view è§†å›¾å as select ...;\n\næ¯”å¦‚åœ¨scottçš„æµ‹è¯•è¡¨ä¸­ï¼ŒåŒ…å«å¦‚ä¸‹3ä¸ªè¡¨ï¼›\nMariaDB [scott]&gt; show tables;+-----------------+| Tables_in_scott |+-----------------+| dept            || emp             || salgrade        |+-----------------+3 rows in set (0.001 sec)\n\næˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹è¯­å¥åˆ›å»ºä¸€ä¸ªè§†å›¾\ncreate view v_ename_dname as \tselect ename, dname\tfrom emp,dept \twhere emp.deptno=dept.deptno;\n\nåˆ›å»ºäº†ä¹‹åï¼Œè¿™ä¸ªè§†å›¾ä¼šä»¥ä¸€ä¸ªæ–°è¡¨çš„å½¢å¼å‡ºç°åœ¨tablesä¸­\nMariaDB [scott]&gt; show tables;+-----------------+| Tables_in_scott |+-----------------+| dept            || emp             || salgrade        || v_ename_dname   |+-----------------+4 rows in set (0.000 sec)\n\nè¿™ä¸ªè¡¨çš„æŸ¥è¯¢ç»“æœå’Œç›´æ¥æ‰§è¡ŒåŸæœ‰çš„selectè¯­å¥æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚\næˆ‘ä»¬æŠŠè§†å›¾æ¶‰åŠåˆ°çš„æ•°æ®åŸæœ‰è¡¨å«åšåŸºè¡¨ï¼›\nMariaDB [scott]&gt; select * from v_ename_dname;+--------+------------+| ename  | dname      |+--------+------------+| SMITH  | RESEARCH   || ALLEN  | SALES      || WARD   | SALES      || JONES  | RESEARCH   || MARTIN | SALES      || BLAKE  | SALES      || CLARK  | ACCOUNTING || SCOTT  | RESEARCH   || KING   | ACCOUNTING || TURNER | SALES      || ADAMS  | RESEARCH   || JAMES  | SALES      || FORD   | RESEARCH   || MILLER | ACCOUNTING |+--------+------------+14 rows in set (0.001 sec)\n\nè¿›å…¥MySQLçš„å­˜å‚¨è·¯å¾„ï¼Œä½ ä¼šå‘ç°è§†å›¾åªæœ‰ä¸€ä¸ª.frmæ–‡ä»¶ï¼Œæ˜¯ä¸ä¼šæœ‰ä¿å­˜æ•°æ®çš„.ibdæ–‡ä»¶çš„ï¼›è¿™ä¹Ÿä»£è¡¨è§†å›¾æ˜¯ä¸€ä¸ªå˜ç›¸çš„æ•°æ®é“¾æ¥ï¼Œå¹¶ä¸ä¼šæ‹·è´æ•°æ®ï¼›\n[root@vm-cnt8:/var/lib/mysql/scott]# lsdb.opt  dept.frm  dept.ibd  emp.frm  emp.ibd  salgrade.frm  salgrade.ibd  v_ename_dname.frm\n\nå¦‚æœä¿®æ”¹è§†å›¾ï¼Œä¼šå¯¹åŸºè¡¨æ•°æ®æœ‰å½±å“ï¼›ä¿®æ”¹åŸºè¡¨ï¼Œä¹Ÿä¼šå¯¹è§†å›¾æœ‰å½±å“ï¼›\nåˆ é™¤è§†å›¾ä¸ä¼šå½±å“åŸºè¡¨ä¸­çš„æ•°æ®ï¼›\ndrop view è§†å›¾;\n\n7.2 è§†å›¾çš„è§„åˆ™å’Œé™åˆ¶å¯¹äºMySQLè€Œè¨€ï¼Œè§†å›¾æ˜¯ä¸€ä¸ªç”¨äºæƒé™æ§åˆ¶&#x2F;åº”ç”¨æ§åˆ¶çš„å¥½æ–¹å¼ã€‚ä½ å¯ä»¥ç»™æŸäº›ç”¨æˆ·ç‰¹å®šè§†å›¾çš„æƒé™ï¼Œè€Œä¸ç»™ä»–ä»¬æ•´å¼ è¡¨çš„æƒé™ã€‚è¿™æ ·å°±èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šé¿å…æ•°æ®æ³„éœ²ï¼Œä¿æŠ¤å®‰å…¨æ€§ã€‚\n\nä¸è¡¨ä¸€æ ·ï¼Œå¿…é¡»å”¯ä¸€å‘½åï¼ˆä¸èƒ½å‡ºç°åŒåè§†å›¾æˆ–è¡¨åï¼‰ \nåˆ›å»ºè§†å›¾æ•°ç›®æ— é™åˆ¶ï¼Œä½†è¦è€ƒè™‘å¤æ‚æŸ¥è¯¢åˆ›å»ºä¸ºè§†å›¾ä¹‹åçš„æ€§èƒ½å½±å“\nè§†å›¾ä¸èƒ½æ·»åŠ ç´¢å¼•ï¼Œä¹Ÿä¸èƒ½æœ‰å…³è”çš„è§¦å‘å™¨æˆ–è€…é»˜è®¤å€¼\nè§†å›¾å¯ä»¥æé«˜å®‰å…¨æ€§ï¼Œå¿…é¡»å…·æœ‰è¶³å¤Ÿçš„è®¿é—®æƒé™ï¼›\norder by å¯ä»¥ç”¨åœ¨æŸ¥è¯¢è§†å›¾çš„æ•°æ®ä¸­ï¼Œä½†æ˜¯å¦‚æœä»è¯¥è§†å›¾æ£€ç´¢æ•°æ® select ä¸­ä¹Ÿå«æœ‰ order byï¼Œé‚£ä¹ˆè¯¥è§†å›¾æŸ¥è¯¢ä¸­çš„ order by å°†è¢«è¦†ç›– \nè§†å›¾å¯ä»¥å’Œè¡¨ä¸€èµ·ä½¿ç”¨\nä¸æ˜¯æ‰€æœ‰è§†å›¾éƒ½å¯ä»¥è¢«æ›´æ–°\n\n8.ä»æ–‡ä»¶ä¸­åŠ è½½æ•°æ®åˆ°å¯¹åº”è¡¨8.1 åŸºæœ¬è¯­æ³•mariadb æ”¯æŒé€šè¿‡ load å‘½ä»¤å‘½ä»¤åŠ è½½æ–‡ä»¶ä¸­çš„æ•°æ®åˆ°å¯¹åº”è¡¨ã€‚å‘½ä»¤æ ¼å¼å¦‚ä¸‹\nLOAD DATA INFILE &#x27;/path/to/data/file&#x27; INTO TABLE my_tableFIELDS TERMINATED BY &#x27;,&#x27; ENCLOSED BY &#x27;&quot;&#x27;LINES TERMINATED BY &#x27;\\n&#x27;;\n\nå…¶ä¸­ /path/to/data/file æ˜¯æ•°æ®æ–‡ä»¶çš„è·¯å¾„ï¼Œmy_table æ˜¯è¦æ’å…¥æ•°æ®çš„è¡¨åã€‚FIELDS TERMINATED BY &#39;,&#39; æŒ‡å®šå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦ä¸ºé€—å·ï¼ŒENCLOSED BY &#39;&quot;&#39; è¡¨ç¤ºå­—æ®µå€¼è¢«åŒå¼•å·åŒ…å›´ï¼ŒLINES TERMINATED BY &#39;\\n&#39; åˆ™è¡¨ç¤ºæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œä»¥æ¢è¡Œç¬¦ç»“æŸã€‚\n8.2 æµ‹è¯•æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ª pc.txt æ–‡ä»¶, æ–‡ä»¶ä¸­çš„æ ¼å¼å¦‚ä¸‹ï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯å¯¹é½çš„ï¼Œæ¯ä¸€åˆ—ç”¨ç©ºæ ¼ä½œä¸ºåˆ†å‰²ï¼Œå’Œå­—æ®µè¦æ±‚å¯¹åº”ã€‚\n1001 2.66 1024 250 21141002 2.10 512  250 9551003 1.42 512  80  478\n\né‚£ä¹ˆåœ¨åˆ›å»ºå‡ºæ¥ä¸€ä¸ªå¯¹åº”çš„è¡¨åï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æ¥åŠ è½½æ–‡ä»¶ä¸­çš„æ•°æ®\ncreate table PC(    model integer unsigned primary key,    speed float(4,2),    ram integer unsigned,    hd integer unsigned,    price integer unsigned);\n\nLOAD DATA INFILE &#x27;/root/pc.txt&#x27;INTO TABLE PCFIELDS TERMINATED BY &#x27;\\t&#x27;(model,speed,ram,hd,price);\n\næ‰§è¡Œåçš„æ•ˆæœå¦‚ä¸‹ï¼ŒæˆåŠŸåŠ è½½\nMariaDB [products]&gt; LOAD DATA INFILE &#x27;/root/pc.txt&#x27;    -&gt; INTO TABLE PC    -&gt; FIELDS TERMINATED BY &#x27;\\t&#x27;    -&gt; (model,speed,ram,hd,price);Query OK, 13 rows affected, 12 warnings (0.015 sec)  Records: 13  Deleted: 0  Skipped: 0  Warnings: 12MariaDB [products]&gt; select * from PC;+-------+-------+------+------+-------+| model | speed | ram  | hd   | price |+-------+-------+------+------+-------+|  1001 |  2.66 | 1024 |  250 |  2114 ||  1002 |  2.10 |  512 |  250 |   995 ||  1003 |  1.42 |  512 |   80 |   478 ||  1004 |  2.80 | 1024 |  250 |   649 ||  1005 |  3.20 |  512 |  250 |   630 ||  1006 |  3.20 | 1024 |  320 |  1049 ||  1007 |  2.20 | 1024 |  200 |   510 ||  1008 |  2.20 | 2048 |  250 |   770 ||  1009 |  2.00 | 1024 |  250 |   650 ||  1010 |  2.80 | 2048 |  300 |   770 ||  1011 |  1.86 | 2048 |  160 |   959 ||  1012 |  2.80 | 1024 |  160 |   649 ||  1013 |  3.06 |  512 |   80 |   529 |+-------+-------+------+------+-------+13 rows in set (0.002 sec)\n\nè¯·æ³¨æ„ï¼Œè¯¥å‘½ä»¤ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºé”™ï¼åœ¨åŠ è½½ä¹‹å‰ï¼Œè¯·åœ¨ä¸€ä¸ªç©ºçš„æ•°æ®åº“ä¸­è¿›è¡Œæµ‹è¯•ï¼\nç°åœ¨è¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠæ³•ï¼Œå°±æ˜¯æŠŠè¡¨ç»“æ„å’Œtxtå†…å®¹å¤åˆ¶ç»™GPTï¼Œè®©ä»–å¸®ä½ å†™ä¸ªinsertçš„SQLã€‚\nThe endåŸºæœ¬çŸ¥è¯†å°±è¿™äº›äº†!\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€Sqlite3ã€‘maraidbå’Œsqlite3éƒ¨åˆ†å‘½ä»¤æ“ä½œåŒºåˆ«","url":"/posts/2259981507/","content":"maraidbå’Œsqlite3éƒ¨åˆ†å‘½ä»¤æ“ä½œåŒºåˆ«è®°å½•\n\n\n1.å®‰è£…sqlite3åœ¨å®ç°æˆ‘çš„è§†é¢‘ç‚¹æ’­ç³»ç»Ÿé¡¹ç›®æ—¶ï¼Œæˆ‘å°è¯•å°è£…äº†ä¸¤ç§æ•°æ®åº“çš„è°ƒç”¨é€»è¾‘\n\nmysqlï¼ˆmaraidbï¼‰\nsqlite3\n\nè¿™é‡Œå°è£…sqlite3çš„åŸå› æ˜¯ï¼Œsqlite3ä¸»è¦é’ˆå¯¹çš„å°±æ˜¯åµŒå…¥å¼æ•°æ®åº“ï¼Œå…¶æ€§èƒ½å¯èƒ½ä¸å¦‚mysqlï¼Œä½†æ˜¯å°±å¥½åœ¨å¯ä»¥å¸¦ç€èµ°ã€‚å®‰è£…ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå†…å­˜å ç”¨ç›¸å¯¹äºmariadbæ¥è¯´ä¹Ÿé™ä½äº†å¾ˆå¤šã€‚\n\næ•™ç¨‹ï¼šå®‰è£…maraidb\n\nåœ¨ä¸Šé¢çš„åšå®¢ä¸­ï¼Œå®‰è£…maraidbéœ€è¦å¾ˆå¤šæ­¥éª¤ï¼Œè¿˜éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤å­—ç¬¦é›†ä¸ºUTF8ã€‚\nè€Œå®‰è£…sqlite3å°±è¦å¤šæ–¹ä¾¿æœ‰æ–¹ä¾¿äº†ï¼Œè€Œä¸”sqlite3é»˜è®¤é‡‡ç”¨çš„å°±æ˜¯uft8å­—ç¬¦é›†ï¼Œå®Œå…¨ä¸éœ€è¦ä¿®æ”¹ï¼\n# centossudo yum install sqlite-devel# ubuntusudo apt install sqlite3 libsqlite3-dev \n\nå°±è¿™ä¸€è¡Œå‘½ä»¤å°±æå®šå®‰è£…äº†ï¼å®‰è£…å®Œæˆåï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤çœ‹çœ‹sqlite3çš„ç‰ˆæœ¬ã€‚\nsqlite3 --version \n\nå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ä¼šå‘ŠçŸ¥ command not foundï¼›\n[root@1c2261732150:~]# sqlite3 --version3.26.0 2018-12-01 12:34:55 bf8c1b2b7a5960c282e543b9c293686dccff272512d08865f4600fb58238alt1\n\nå®‰è£…æ–°ç‰ˆæœ¬ sqlite3é»˜è®¤å®‰è£…çš„ç‰ˆæœ¬å¯ä»¥çœ‹åˆ°å·²ç»æ˜¯ 2018 å¹´çš„è€ä¸œè¥¿äº†ï¼Œå¯ä»¥å°è¯•ç”¨ä¸‹é¢çš„åŠæ³•å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œéœ€è¦ä¿®æ”¹ä»¥ä¸‹å‘½ä»¤ä¸­çš„é“¾æ¥å’Œæ–‡ä»¶åï¼Œæœ€æ–°ç‰ˆæœ¬çš„ sqlite å»å®˜ç½‘ä¸Šæ‰¾ https://www.sqlite.org/download.html\nsudo yum remove sqlite-develwget https://www.sqlite.org/2019/sqlite-autoconf-3280000.tar.gztar -xzf sqlite-autoconf-3280000.tar.gzcd sqlite-autoconf-3280000./configuremakesudo make install\n\né€‰æ‹©å®˜ç½‘ä¸Šåå­—ä¸º sqlite-autoconf çš„ tar.gz ä¸‹è½½å°±è¡Œäº†ã€‚è¯·æ³¨æ„å®‰è£…ä¹‹å‰ä¸€å®šè¦å¸è½½åŸæœ‰çš„ sqliteã€‚\nè¯·æ³¨æ„ï¼Œå¦‚æœä½ éœ€è¦ç”¨ python æ“ä½œ sqliteï¼Œåœ¨æ›´æ–° sqlite ç‰ˆæœ¬åéœ€è¦é‡æ–°ç¼–è¯‘å®‰è£… pythonã€‚\nä¾ç…§å¦‚ä¸Šå‘½ä»¤ï¼Œæˆ‘æˆåŠŸæ›´æ–° sqlite åˆ° 2023 å¹´çš„æœ€æ–°ç‰ˆæœ¬äº†\n# sqlite3 --version3.44.0 2023-11-01 11:23:50 17129ba1ff7f0daf37100ee82d507aef7827cf38de1866e2633096ae6ad81301 (64-bit)\n\n\næ›´æ–°å‚è€ƒåšå®¢ https://number1.co.za/upgrading-sqlite-on-centos-to-3-8-3-or-later/\n\n2.åŸºæœ¬æ“ä½œçš„åŒºåˆ«å¦‚ä¸‹åˆ—å‡ºä¸€äº›åŸºæœ¬æ“ä½œåœ¨mariadbå‘½ä»¤è¡Œä¸­ï¼Œå’Œåœ¨sqlite3å‘½ä»¤è¡Œä¸­çš„åŒºåˆ«\nä¸ºäº†æ–¹ä¾¿ï¼Œæ³¨é‡Šä¸­mæŒ‡ä»£mysqlï¼ŒsæŒ‡ä»£sqlite3\nshow databases; -- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ mariadb.database       -- æŸ¥çœ‹å½“å‰æ•°æ®åº“ sqlite3use db_name;      -- è¿›å…¥æ•°æ®åº“ m.open db_name.db; -- æä¾›.dbæ–‡ä»¶çš„è·¯å¾„ï¼Œè¿›å…¥æ•°æ®åº“ sshow tables;    -- æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ m.tables         -- æŸ¥çœ‹æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ squit  -- é€€å‡ºæ•°æ®åº“å‘½ä»¤è¡Œ m.quit -- é€€å‡ºæ•°æ®åº“å‘½ä»¤è¡Œ s\n\nè¿™ä¾¿æ˜¯åŸºç¡€æ“ä½œçš„ä¸€äº›åŒºåˆ«ï¼Œæ›´æ·±å…¥çš„æ“ä½œæˆ‘æš‚æ—¶è¿˜æ²¡æœ‰å­¦åˆ°ã€‚\nå…¶ä¸­è¿›å…¥æ•°æ®åº“çš„æ“ä½œå°±èƒ½çœ‹å‡ºæ¥sqliteçš„ç‰¹æ€§ï¼Œåªè¦æœ‰è¿™ä¸ª.dbæ–‡ä»¶ï¼Œä½ å°±å¯ä»¥å¾ˆè½»æ¾çš„åœ¨å¦å¤–ä¸€ä¸ªä¸»æœºä¸Šæ¢å¤ä¹‹å‰çš„æ•°æ®ï¼ˆæˆ–è€…è¿›è¡Œå¤‡ä»½ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å¸¦ç€èµ°çš„ä½“ç°ã€‚\n3.åˆ›å»ºè¡¨mysqlå’Œsqlite3æ‰€æ”¯æŒçš„æ•°æ®ç±»å‹ä¹Ÿæœ‰åŒºåˆ«\n\n\n\nsqlite3æ•°æ®ç±»å‹\næè¿°\n\n\n\nNULL\nå€¼æ˜¯ä¸€ä¸ª NULL å€¼ã€‚\n\n\nINTEGER\nå€¼æ˜¯ä¸€ä¸ªå¸¦ç¬¦å·çš„æ•´æ•°ï¼Œæ ¹æ®å€¼çš„å¤§å°å­˜å‚¨åœ¨ 1ã€2ã€3ã€4ã€6 æˆ– 8 å­—èŠ‚ä¸­ã€‚\n\n\nREAL\nå€¼æ˜¯ä¸€ä¸ªæµ®ç‚¹å€¼ï¼Œå­˜å‚¨ä¸º 8 å­—èŠ‚çš„ IEEE æµ®ç‚¹æ•°å­—ã€‚\n\n\nTEXT\nå€¼æ˜¯ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ•°æ®åº“ç¼–ç ï¼ˆUTF-8ã€UTF-16BE æˆ– UTF-16LEï¼‰å­˜å‚¨ã€‚\n\n\nBLOB\nå€¼æ˜¯ä¸€ä¸ª blob æ•°æ®ï¼Œå®Œå…¨æ ¹æ®å®ƒçš„è¾“å…¥å­˜å‚¨ã€‚\n\n\nåœ¨sqlite3ä¸­ï¼Œæ²¡æœ‰varcharç±»å‹ã€‚ä½†æˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨TEST(8)æ¥é™åˆ¶å­—ç¬¦ä¸²ç±»å‹çš„é•¿åº¦\nä»¥æˆ‘çš„è§†é¢‘ç‚¹æ’­é¡¹ç›®æ‰€ç”¨æ•°æ®åº“ä¸ºä¾‹ï¼Œä»¥ä¸‹æ˜¯mariadbåˆ›å»ºæ•°æ®è¡¨çš„sqlè¯­å¥\ncreate table tb_video(    id VARCHAR(8) NOT NULL DEFAULT (substring(UUID(), 1, 8)) comment &#x27;è§†é¢‘id&#x27;,    name VARCHAR(50) comment &#x27;è§†é¢‘æ ‡é¢˜&#x27;,    info text comment &#x27;è§†é¢‘ç®€ä»‹&#x27;,    video VARCHAR(255) comment &#x27;è§†é¢‘é“¾æ¥&#x27;,    cover VARCHAR(255) comment &#x27;è§†é¢‘å°é¢é“¾æ¥&#x27;,    insert_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP comment &#x27;è§†é¢‘åˆ›å»ºæ—¶é—´&#x27;);\n\nåœ¨è¿™é‡Œæˆ‘é‡‡ç”¨äº†mariadbè‡ªå¸¦çš„uuidå‡½æ•°æ¥ç”Ÿæˆuuidå­—ç¬¦ä¸²ï¼Œå¹¶ä½¿ç”¨substringå‡½æ•°æˆªå–äº†uuidå‰8ä½çš„å†…å®¹ï¼Œä½œä¸ºè§†é¢‘çš„å”¯ä¸€id\nè€Œå¦‚æœæƒ³è®©mariadbæ¥ä¿è¯idå­—æ®µå”¯ä¸€ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œçº¦æŸ\ncreate table tb_video(    id VARCHAR(8) NOT NULL DEFAULT (substring(UUID(), 1, 8)) comment &#x27;è§†é¢‘id&#x27;,    name VARCHAR(50) comment &#x27;è§†é¢‘æ ‡é¢˜&#x27;,    info text comment &#x27;è§†é¢‘ç®€ä»‹&#x27;,    video VARCHAR(255) comment &#x27;è§†é¢‘é“¾æ¥&#x27;,    cover VARCHAR(255) comment &#x27;è§†é¢‘å°é¢é“¾æ¥&#x27;,    insert_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP comment &#x27;è§†é¢‘åˆ›å»ºæ—¶é—´&#x27;,    UNIQUE (id));\n\n\nä»¥ä¸‹æ˜¯sqlite3çš„æ“ä½œï¼Œsqlite3ä¸­å¹¶ä¸æ”¯æŒcommentå¯¹å­—æ®µè¿›è¡Œæ³¨é‡Šã€‚\nè¿™é‡Œè¦æƒ³è®©idå­—æ®µå”¯ä¸€ï¼Œç›´æ¥åœ¨å­—æ®µç±»å‹åé¢è·Ÿç€UNIQUEå°±å¯ä»¥äº†\n-- sqlite3ä¸­ä¸æ”¯æŒuuidå‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦ç”¨randomblobå‡½æ•°ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œå†ç”¨hexè½¬æˆ16è¿›åˆ¶ä½œä¸ºè§†é¢‘çš„id-- sqlite3é»˜è®¤çš„æ—¶é—´æ˜¯utcï¼Œæ‰€ä»¥éœ€è¦ç”¨datetimeå‡½æ•°å°†å…¶è½¬åŒ–ä¸ºä¸œå…«åŒºçš„æ—¶é—´CREATE TABLE IF NOT EXISTS tb_video(    id TEXT(8) UNIQUE NOT NULL DEFAULT (lower((hex(randomblob(4))))),    name TEXT NOT NULL,    info TEXT,    video TEXT NOT NULL,    cover TEXT NOT NULL,    insert_time TIMESTAMP DEFAULT (datetime(&#x27;now&#x27;, &#x27;+8 hours&#x27;)));\n\næŸ¥çœ‹è¡¨ç»“æ„åœ¨ msyql ä¸­å¯ä»¥ç”¨ desc å¿«æ·æŸ¥çœ‹è¡¨ç»“æ„ï¼Œä½†æ˜¯ sqlite3 ä¸­ä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚\nåœ¨ sqlite3 æ•°æ®åº“ä¸­ç”¨å¦‚ä¸‹è¯­å¥æŸ¥çœ‹æ•°æ®åº“ä¸­çš„å»ºè¡¨è¯­å¥ï¼Œä¾æ­¤å¯ä»¥çœ‹åˆ°è¡¨ç»“æ„ã€‚\nSELECT sql FROM sqlite_master WHERE type=&quot;table&quot;;\n\n4.æ’å…¥åˆ é™¤æ•°æ®åœ¨æˆ‘é¡¹ç›®æ‰€ç”¨å­—æ®µä¸­ï¼ŒäºŒè€…æ’å…¥&#x2F;åˆ é™¤æ•°æ®çš„æ“ä½œå®Œå…¨ç›¸åŒï¼Œè¿™é‡Œå°±ä¸è®°å½•äº†\n-- åˆ é™¤è¡¨drop table tb_video;-- æ’å…¥æ•°æ®insert into tb_video (name, info, video, cover) values (&#x27;åå­—1&#x27;,&#x27;è¯´æ˜ä¿¡æ¯1&#x27;,&#x27;test1&#x27;,&#x27;testc1&#x27;);-- æŸ¥çœ‹æ‰€æœ‰å­—æ®µselect * from tb_video;select * from tb_video where id=&#x27;45f78a68&#x27;; -- åˆ é™¤æ•°æ®delete from tb_video where id = &#x27;D81382A8&#x27;;\n\n5.ä½¿ç”¨cppæ“ä½œçš„æ—¶å€™\nmysqlå¿…é¡»è¦è¿›è¡Œinitï¼Œæ­¤æ—¶å°±éœ€è¦æŒ‡å®šç›®æ ‡æ•°æ®åº“äº†\nè€Œsqlite3å¹¶ä¸éœ€è¦è¿›è¡Œæ•°æ®åº“çš„è¿æ¥æ“ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°åœ¨cppä¸­è¿›è¡Œæ•°æ®åº“çš„åˆ›å»ºã€æ•°æ®è¡¨çš„åˆ›å»ºç­‰æ“ä½œã€‚\n\ncè¯­è¨€æ“ä½œsqlite3çš„æ–¹æ³•ï¼Œå¯ä»¥æŸ¥çœ‹èœé¸Ÿæ•™ç¨‹ã€‚ä¸Šé¢çš„ç”¨ä¾‹å¾ˆè¯¦ç»†ï¼ˆè™½ç„¶æ²¡æœ‰å†™æ³¨é‡Šï¼Œä½†è¿˜æ˜¯èƒ½çœ‹æ‡‚çš„ï¼‰æˆ‘å°±ä¸å†™åšå®¢äº†~\n5.1 æŸ¥è¯¢æ—¶çš„å›è°ƒè¿™é‡Œåªå¯¹selectå‘½ä»¤æ“ä½œè¿›è¡Œè¯´æ˜ï¼Œåœ¨sqlite3ä¸­ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½æ˜¯ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°æ¥æ‰§è¡Œçš„\nSQLITE_API int sqlite3_exec(  sqlite3*,                                  /* An open database */  const char *sql,                           /* SQL to be evaluated */  int (*callback)(void*,int,char**,char**),  /* Callback function */  void *,                                    /* 1st argument to callback */  char **errmsg                              /* Error msg written here */);\n\nå¦‚æœä½ æ‰§è¡Œçš„æ˜¯æ’å…¥ã€æ›´æ–°ç­‰ç­‰sqlè¯­å¥ï¼Œsqlite_callbackå‡½æ•°ä¸ä¼šè¢«è°ƒç”¨ï¼ˆæˆ‘æµ‹è¯•è¿‡äº†ï¼‰ã€‚ç›®å‰æˆ‘åªå‘ç°selectè¯­å¥ä¼šè°ƒç”¨è¿™ä¸ªcallbackå‡½æ•°ã€‚\næ¯”å¦‚æˆ‘çš„æ•°æ®åº“tb_videoä¸­æœ‰å¦‚ä¸‹ä¸¤è¡Œæ•°æ®\ndf65c8c5|åå­—1|è¯´æ˜ä¿¡æ¯1|test1|testc1|2023-05-04 16:57:1080cd3f51|åå­—1|è¯´æ˜ä¿¡æ¯1|test1|testc1|2023-05-04 19:02:05\n\n#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sqlite3.h&gt;// æ¯å½“æœ‰ç»“æœè¿”å›çš„æ—¶å€™ï¼Œç”¨è¿™ä¸ªå‡½æ•°æ¥å¤„ç†ç»“æœ// ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä»sqlite3_execä¸­ä¸»åŠ¨ä¼ å…¥// argc æ˜¯ç»“æœçš„è¡Œæ•°ï¼ˆäºŒç»´æ•°ç»„è¡Œæ•°ï¼‰// argv æ˜¯å­˜æ”¾æ•°æ®çš„äºŒç»´æ•°ç»„// azColName æ˜¯å­˜æ”¾å­—æ®µåç§°çš„äºŒç»´æ•°ç»„static int callback(void *NotUsed, int argc, char **argv, char **azColName)&#123;\tint i;\tfor (i = 0; i &lt; argc; i++)\t&#123;\t\tprintf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;);\t&#125;\tprintf(&quot;\\n&quot;);\treturn 0;&#125;// sqlite3æ•°æ®åº“æ‰“å¼€æµ‹è¯•void SqliteTest()&#123;\tsqlite3 *db;// æ•°æ®åº“æŒ‡é’ˆ\tchar *zErrMsg = 0;\tstd::string sql;\tint ret;\t// æ‰“å¼€æ•°æ®åº“æ–‡ä»¶\tif (sqlite3_open(&quot;test.db&quot;, &amp;db))\t&#123;\t\tfprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db));\t\texit(0);\t&#125;\telse\t&#123;\t\tfprintf(stderr, &quot;Opened database successfully\\n&quot;);\t&#125;\tsql = &quot;select * from tb_video;&quot;;\t// æ‰§è¡Œsqlè¯­å¥\tret = sqlite3_exec(db, sql.c_str(), callback, 0, &amp;zErrMsg);\tif (ret != SQLITE_OK)\t&#123;\t\tfprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg);\t\tsqlite3_free(zErrMsg);\t&#125;\telse\t&#123;\t\tfprintf(stdout, &quot;SQL successfully\\n&quot;);\t&#125;\tsqlite3_close(db);&#125;\n\nç”¨è¿™ä¸ªå‡½æ•°æ¥æŸ¥è¯¢ï¼Œä¼šæ‰“å°å¦‚ä¸‹çš„ç»“æœã€‚ä»è¿™ä¸ªç»“æœä¸­ï¼Œå°±èƒ½æ¨æµ‹å‡ºcallbackå‡½æ•°4ä¸ªå‚æ•°åˆ†åˆ«çš„ä½œç”¨ï¼Œå·²ç»åœ¨ä»£ç çš„æ³¨é‡Šä¸­è¯´æ˜äº†ã€‚\nOpened database successfullyid = df65c8c5name = åå­—1info = è¯´æ˜ä¿¡æ¯1video = test1cover = testc1insert_time = 2023-05-04 16:57:10id = 80cd3f51name = åå­—1info = è¯´æ˜ä¿¡æ¯1video = test1cover = testc1insert_time = 2023-05-04 19:02:05\n\nå…¶ä¸­ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ç»™callbackå‡½æ•°ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå…¥å‚ã€‚\n5.2 é€šè¿‡å›è°ƒæ’å…¥æ•°æ®åˆ°Jsonå­—ç¬¦ä¸²æˆ‘çš„è§†é¢‘ç‚¹æ’­é¡¹ç›®åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦å°†ç»“æœä¿å­˜ä¸ºjsonå­—ç¬¦ä¸²ï¼Œå¦‚æœä½¿ç”¨mysqlçš„c++æ“ä½œï¼Œå°±å¯ä»¥ç›´æ¥åœ¨éå†ç»“æœçš„äºŒç»´æ•°ç»„æ—¶ï¼Œå°†ç»“æœæ”¾å…¥åˆ°Json::Valueä¸­\n// æŸ¥è¯¢æ‰€æœ‰-è¾“å‡ºæ‰€æœ‰è§†é¢‘ä¿¡æ¯ï¼ˆè§†é¢‘åˆ—è¡¨ï¼‰bool SelectAll(Json::Value *video_s)&#123;    #define SELET_ALL &quot;select * from %s;&quot;    std::string sql;    sql.resize(512);    sprintf((char*)sql.c_str(),SELET_ALL,_video_table.c_str());    // è¿™é‡ŒåŠ é”æ˜¯ä¸ºäº†ä¿è¯ç»“æœé›†èƒ½è¢«æ­£å¸¸æŠ¥é”™ï¼ˆå¹¶ä¸æ˜¯é˜²æ­¢ä¿®æ”¹åŸå­æ€§é—®é¢˜,mysqlæœ¬èº«å°±å·²ç»ç»´æŠ¤äº†åŸå­æ€§ï¼‰    // ä¸‹æ–¹æ‰§è¡Œè¯­å¥åï¼Œå¦‚æœä¸ä¿å­˜ç»“æœé›† è€Œåˆæ‰§è¡Œä¸€æ¬¡æœç´¢è¯­å¥ï¼Œä¹‹å‰æœç´¢çš„ç»“æœå°±ä¼šä¸¢å¤±    // åŠ é”æ˜¯ä¸ºäº†ä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæ‰§è¡Œæµåœ¨è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œé¿å…ç»“æœé›†ä¸¢å¤±    _mutex.lock();    // è¯­å¥æ‰§è¡Œå¤±è´¥äº†    if (!MysqlQuery(_mysql, sql)) &#123;        _mutex.unlock();        _log.error(&quot;Video SelectAll&quot;,&quot;query failed&quot;);        return false;    &#125;    // ä¿å­˜ç»“æœé›†åˆ°æœ¬åœ°    MYSQL_RES *res = mysql_store_result(_mysql);    if (res == nullptr) &#123;        _mutex.unlock();        _log.error(&quot;Video SelectAll&quot;,&quot;mysql store result failed&quot;);        return false;    &#125;    // éå†ç»“æœé›†ï¼Œå­˜åˆ°jsonä¸­    int num_rows = mysql_num_rows(res);//è·å–ç»“æœé›†çš„è¡Œæ•°    for (int i = 0; i &lt; num_rows; i++) &#123;        MYSQL_ROW row = mysql_fetch_row(res);//è·å–æ¯ä¸€è¡Œçš„åˆ—æ•°        Json::Value video;        video[&quot;id&quot;] = row[0];        video[&quot;name&quot;] = row[1];        video[&quot;info&quot;] = row[2];        video[&quot;video&quot;] = row[3];        video[&quot;cover&quot;] = row[4];        video[&quot;insert_time&quot;] = row[5]; //mysqlä¸­å­˜æ”¾çš„å°±æ˜¯å¯è¯»æ—¶é—´ ï¼ˆå…¶å®å­˜æ—¶é—´æˆ³æ›´å¥½ï¼‰        //json list        video_s-&gt;append(video);    &#125;    mysql_free_result(res);//é‡Šæ”¾ç»“æœé›†    _mutex.unlock();    _log.info(&quot;Video SelectAll&quot;,&quot;select all finished&quot;);    return true;&#125;\n\nè€Œåœ¨sqlite3ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨callbackå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ¥è¿›è¡Œjsonå­—ç¬¦ä¸²çš„ä¿å­˜ï¼›è¿™é‡Œå› ä¸ºsqlite3ä¼šç»™æˆ‘ä»¬è¿”å›å­—æ®µåå­—ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨å­—æ®µæ˜ä½œä¸ºjsonçš„å­—æ®µåï¼Œå°†å‚æ•°ä½œä¸ºjsonå­—æ®µçš„å¯¹åº”å‚æ•°ã€‚æ›´çœäº‹äº†ï¼\nstatic int callback(void *json_videos, int argc, char **argv, char **azColName)&#123;\tJson::Value* video_s =  (Json::Value*)json_videos;//è½¬ä¸ºåŸæœ¬çš„ç±»å‹\tJson::Value video;//å•ä¸ªè§†é¢‘\tfor (int i = 0; i &lt; argc; i++)\t&#123;\t\tvideo[azColName[i]] = argv[i] ? argv[i] : &quot;NULL&quot;;//å­˜å…¥æ•°æ®\t\tprintf(&quot;%s = %s\\n&quot;, azColName[i], argv[i] ? argv[i] : &quot;NULL&quot;);\t&#125;\tprintf(&quot;\\n&quot;);\tvideo_s-&gt;append(video);//æ’å…¥åˆ°jsonæ•°ç»„ä¸­\treturn 0;&#125;\n\nåœ¨ä¸»å‡½æ•°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªJson::Valueå¯¹è±¡ï¼Œå°†å…¶å¼ºè½¬ä¸ºvoid*çš„æŒ‡é’ˆï¼Œä¼ ç»™callbackå‡½æ•°\n// æŸ¥è¯¢Json::Value videos;sql = &quot;select * from tb_video;&quot;;// æ‰§è¡Œsqlè¯­å¥ret = sqlite3_exec(db, sql.c_str(), callback, (void*)&amp;videos, &amp;zErrMsg);if (ret != SQLITE_OK)&#123;\tfprintf(stderr, &quot;SQL error: %s\\n&quot;, zErrMsg);\tsqlite3_free(zErrMsg);&#125;else&#123;\tfprintf(stdout, &quot;Table created successfully\\n&quot;);&#125;sqlite3_close(db);std::string json_str;vod::JsonUtil::Serialize(videos,&amp;json_str);std::cout &lt;&lt; json_str &lt;&lt; std::endl;\n\nç¼–è¯‘æ‰§è¡Œï¼Œæœ€ç»ˆæ‰“å°çš„jsonå­—ç¬¦ä¸²å¦‚ä¸‹ï¼ˆå®Œæ•´ä»£ç è§ Githubï¼‰\n[        &#123;                &quot;cover&quot; : &quot;testc1&quot;,                &quot;id&quot; : &quot;df65c8c5&quot;,                &quot;info&quot; : &quot;\\u8bf4\\u660e\\u4fe1\\u606f1&quot;,                &quot;insert_time&quot; : &quot;2023-05-04 16:57:10&quot;,                &quot;name&quot; : &quot;\\u540d\\u5b571&quot;,                &quot;video&quot; : &quot;test1&quot;        &#125;,        &#123;                &quot;cover&quot; : &quot;testc1&quot;,                &quot;id&quot; : &quot;80cd3f51&quot;,                &quot;info&quot; : &quot;\\u8bf4\\u660e\\u4fe1\\u606f1&quot;,                &quot;insert_time&quot; : &quot;2023-05-04 19:02:05&quot;,                &quot;name&quot; : &quot;\\u540d\\u5b571&quot;,                &quot;video&quot; : &quot;test1&quot;        &#125;]\n\n5.3 å¯¹è¡¨çš„æŸ¥è¯¢é™¤äº†ä½¿ç”¨sqlite3_execé’ˆå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œè¿˜å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œå¯¹æŒ‡å®šçš„è¡¨è¿›è¡ŒæŸ¥è¯¢\nint sqlite3_get_table(  sqlite3* db,              /* æ•°æ®åº“è¿æ¥ */  const char *zSql,         /* æŸ¥è¯¢è¯­å¥ */  char ***pazResult,        /* æŸ¥è¯¢ç»“æœ */  int *pnRow,               /* æŸ¥è¯¢ç»“æœçš„è¡Œæ•° */  int *pnColumn,            /* æŸ¥è¯¢ç»“æœçš„åˆ—æ•° */  char **pzErrmsg           /* é”™è¯¯ä¿¡æ¯ */);\n\nå‚æ•°è¯´æ˜å¦‚ä¸‹ï¼Œè¿™é‡Œå°±æ¯”è¾ƒç±»ä¼¼mysqlçš„æŸ¥è¯¢å‡½æ•°äº†ï¼Œå…¶ä¼šç»™æˆ‘ä»¬è¿”å›ç»“æœé›†ï¼Œä»¥åŠç»“æœçš„è¡Œæ•°ã€åˆ—æ•°ï¼Œè®©æˆ‘ä»¬è‡ªå·±éå†è¿›è¡Œæ“ä½œã€‚\n\ndb: æ•°æ®åº“è¿æ¥å¯¹è±¡ï¼Œæ˜¯å·²ç»æ‰“å¼€çš„æ•°æ®åº“è¿æ¥ã€‚\nzSql: æ‰§è¡Œçš„ SQL æŸ¥è¯¢è¯­å¥ã€‚\npazResult: ä¸€ä¸ª char ç±»å‹çš„æŒ‡é’ˆæ•°ç»„ï¼ˆäºŒç»´ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼Œç”¨äºå­˜å‚¨æŸ¥è¯¢ç»“æœã€‚æ¯ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸€ä¸ªè¡¨ç¤ºæ¯è¡Œæ•°æ®çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚æœ€åä¸€ä¸ªå…ƒç´ ä¸º NULLã€‚\npnRow: ç”¨äºå­˜å‚¨æŸ¥è¯¢ç»“æœçš„è¡Œæ•°ã€‚\npnColumn: ç”¨äºå­˜å‚¨æŸ¥è¯¢ç»“æœçš„åˆ—æ•°ã€‚\npzErrmsg: ç”¨äºå­˜å‚¨é”™è¯¯ä¿¡æ¯ã€‚\n\nsqlite3_get_table å‡½æ•°æ‰§è¡ŒæŸ¥è¯¢è¯­å¥æ—¶ï¼Œç»“æœé›†ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼éƒ½è¢«è§£é‡Šä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æŸ¥è¯¢ç»“æœå°†è¢«å­˜å‚¨åœ¨æŒ‡é’ˆæ•°ç»„ pazResult ä¸­ï¼Œæ¯è¡Œæ•°æ®å ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼ˆé™¤äº†æœ€åä¸€ä¸ªå…ƒç´ ä¸º NULLï¼‰ã€‚è¡¨æ ¼çš„ç¬¬ä¸€è¡ŒåŒ…å«åˆ—åï¼Œåé¢çš„æ¯è¡Œåˆ™ä¸ºæŸ¥è¯¢ç»“æœä¸­çš„ä¸€æ¡è®°å½•ã€‚\nsqlite3_get_table å‡½æ•°çš„ä½œç”¨æ˜¯æ‰§è¡Œä¸€æ¡ SQL æŸ¥è¯¢è¯­å¥ï¼Œå¹¶å°†å…¶ç»“æœå­˜å‚¨åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œä»¥ä¾¿åç»­å¤„ç†å’Œåˆ†æã€‚\nè°ƒç”¨å®Œæ¯•è¿™ä¸ªå‡½æ•°ï¼Œå¤„ç†å®Œç»“æœé›†åï¼Œéœ€è¦è°ƒç”¨å¦‚ä¸‹å‡½æ•°é‡Šæ”¾ç»“æœé›†ã€‚\nchar **pazResult; /* äºŒç»´æŒ‡é’ˆæ•°ç»„ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœ */int nRow = 0, nColumn = 0;/* è·å¾—æŸ¥è¯¢ç»“æœçš„è¡Œæ•°å’Œåˆ—æ•° */sqlite3_get_table(db, &quot;SELECT * FROM tb_video;&quot;, &amp;pazResult, &amp;nRow, &amp;nColumn, NULL);// éå†å¤„ç†ç»“æœé›†// ....sqlite3_free_table(pazResult);// å¤„ç†å®Œæ¯•ç»“æœé›†åé‡Šæ”¾\n\n\n5.3.1 é”™è¯¯ç¤ºä¾‹å¦‚ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹çš„é”™è¯¯ä»£ç ï¼\nchar **pazResult; /* äºŒç»´æŒ‡é’ˆæ•°ç»„ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœ *//* è·å¾—æŸ¥è¯¢ç»“æœçš„è¡Œæ•°å’Œåˆ—æ•° */int nRow = 0, nColumn = 0,index=0;sqlite3_get_table(db, &quot;SELECT * FROM tb_video;&quot;, &amp;pazResult, &amp;nRow, &amp;nColumn, NULL);std::cout &lt;&lt; nRow &lt;&lt; &quot; &quot; &lt;&lt;  nColumn &lt;&lt; std::endl;for (int i = 0; i &lt; nRow; i++)&#123;\tfor (int j = 0; j &lt; nColumn; j++)\t&#123;\t\tprintf(&quot;%-8s : %-8s\\n&quot;, pazResult[j],pazResult[i][j]);\t&#125;   &#125;sqlite3_free_table(pazResult);\n\nç¼–è¯‘ä¸ä¼šå‡ºé”™ï¼Œä½†æ˜¯æ‰§è¡Œçš„æ—¶å€™ï¼Œç›´æ¥ä¼šå‡ºç°æ®µé”™è¯¯\nOpened database successfully2 6Segmentation fault\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„pazResultåªæ˜¯ä¸€ä¸ªäºŒçº§æŒ‡é’ˆï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç»™ä»–åˆå§‹åŒ–ä¸ºå¤šå°‘è¡Œå¤šå°‘åˆ—çš„æ¨¡å¼ï¼Œå¯¼è‡´æœ€ç»ˆ++çš„æ—¶å€™ï¼Œä¼šå‡ºç°è®¿é—®é”™ä½çš„æƒ…å†µã€‚\nå¦‚æœæ”¹æˆä¸‹é¢è¿™æ ·çš„æ‰“å°\ncout &lt;&lt;  pazResult[j] &lt;&lt; endl;cout &lt;&lt; &quot;--&quot; &lt;&lt; endl;cout &lt;&lt; pazResult[i][j] &lt;&lt; endl;cout &lt;&lt; &quot;---&quot; &lt;&lt; endl;\n\næ‰“å°çš„ç»“æœå°±æ˜¯è¿™æ ·çš„ï¼Œåˆè®¡æ˜¯åœ¨éå†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼\nid--i---name--d---info-----video-----cover-----insert_time--åé¢é‡å¤çš„å°±çœç•¥æ‰äº†\n\nä¸ºä»€ä¹ˆä¸è¡Œå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºpazResultå®é™…ä¸Šçš„ç»“æ„æ˜¯è¿™æ ·çš„\nidnameinfovideocoverinsert_timedf65c8c5åå­—1è¯´æ˜ä¿¡æ¯1test1testc12023-05-04 16:57:10\n\nä½¿ç”¨pazResult[i][j]è¿›è¡Œè®¿é—®ï¼š\n\nå½“iæ˜¯0çš„æ—¶å€™ï¼Œè®¿é—®çš„æ˜¯idå­—ç¬¦ä¸²\næ­¤æ—¶jå°±å˜æˆidå­—ç¬¦ä¸²é‡Œé¢çš„ä¸‹æ ‡äº†\nè€ŒnColumnè¿œå¤§äºidå­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆidåªæœ‰ä¸¤ä¸ªå­—ç¬¦ï¼Œè€Œåœ¨æˆ‘è¿™é‡ŒnColumn=6ï¼‰\næ‰€ä»¥å°±å‡ºç°äº†æ®µé”™è¯¯ Segmentation faultï¼\n\næˆ‘è¿˜æ˜¯å­¦è‰ºä¸ç²¾å‘€ï¼ğŸ¤£\n\n5.3.2 æ­£ç¡®æ“ä½œæ­£ç¡®çš„åŠæ³•åº”è¯¥æ˜¯è¿™æ ·çš„\nJson::Value videos;char **pazResult; /* äºŒç»´æŒ‡é’ˆæ•°ç»„ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœ *//* è·å¾—æŸ¥è¯¢ç»“æœçš„è¡Œæ•°å’Œåˆ—æ•° */int nRow = 0, nColumn = 0,index=0;sqlite3_get_table(db, &quot;SELECT * FROM tb_video;&quot;, &amp;pazResult, &amp;nRow, &amp;nColumn, NULL);std::cout &lt;&lt; nRow &lt;&lt;&quot; &quot; &lt;&lt;  nColumn &lt;&lt; std::endl;index = nColumn;//ä»ç¬¬äºŒåˆ—å¼€å§‹ï¼Œè·³è¿‡ç¬¬ä¸€è¡Œï¼ˆç¬¬ä¸€è¡Œéƒ½æ˜¯å­—æ®µåï¼‰for (int i = 0; i &lt; nRow; i++)&#123;\tfor (int j = 0; j &lt; nColumn; j++)\t&#123;            // å‰nColumnä¸ªæ•°æ®éƒ½æ˜¯å­—æ®µåï¼Œæ‰€ä»¥å¯ä»¥ç”¨ pazResult[j] æ¥æ‰“å°\t\tprintf(&quot;%-8s : %-8s\\n&quot;, pazResult[j],pazResult[index]);\t\tindex++;\t&#125;&#125;sqlite3_free_table(pazResult);\n\næˆåŠŸæ‰“å°å‡ºäº†æ•°æ®åº“ä¸­ä¸¤è¡Œçš„æ•°æ®\nOpened database successfully2 6id       : df65c8c5name     : åå­—1 info     : è¯´æ˜ä¿¡æ¯1video    : test1   cover    : testc1  insert_time : 2023-05-04 16:57:10id       : da6d27bename     : åå­—2 info     : è¯´æ˜ä¿¡æ¯2video    : test2   cover    : testc2  insert_time : 2023-05-04 19:59:38\n\nå’Œä»æ•°æ®åº“å‘½ä»¤è¡Œä¸­è¯»å–åˆ°çš„ç»“æœç›¸åŒ\nsqlite&gt; select * from tb_video;df65c8c5|åå­—1|è¯´æ˜ä¿¡æ¯1|test1|testc1|2023-05-04 16:57:10da6d27be|åå­—2|è¯´æ˜ä¿¡æ¯2|test2|testc2|2023-05-04 19:59:38\n\næœ€ç»ˆçš„å®Œæ•´ä»£ç å¦‚ä¸‹\nvoid SqliteTest()&#123;\tsqlite3 *db; // æ•°æ®åº“æŒ‡é’ˆ\tchar *zErrMsg = 0;\tstd::string sql;\tint ret;\t// æ‰“å¼€æ•°æ®åº“æ–‡ä»¶\tif (sqlite3_open(&quot;test.db&quot;, &amp;db))\t&#123;\t\tfprintf(stderr, &quot;Can&#x27;t open database: %s\\n&quot;, sqlite3_errmsg(db));\t\texit(0);\t&#125;\telse\t&#123;\t\tfprintf(stderr, &quot;Opened database successfully\\n&quot;);\t&#125;\t// æŸ¥è¯¢\tJson::Value videos;\tchar **pazResult; /* äºŒç»´æŒ‡é’ˆæ•°ç»„ï¼Œå­˜å‚¨æŸ¥è¯¢ç»“æœ */\t/* è·å¾—æŸ¥è¯¢ç»“æœçš„è¡Œæ•°å’Œåˆ—æ•° */\tint nRow = 0, nColumn = 0;\tsqlite3_get_table(db, &quot;SELECT * FROM tb_video;&quot;, &amp;pazResult, &amp;nRow, &amp;nColumn, NULL);\tstd::cout &lt;&lt; nRow &lt;&lt;&quot; &quot; &lt;&lt;  nColumn &lt;&lt; std::endl;\tint index = nColumn;//ä»ç¬¬äºŒåˆ—å¼€å§‹ï¼Œè·³è¿‡ç¬¬ä¸€è¡Œï¼ˆç¬¬ä¸€è¡Œéƒ½æ˜¯å­—æ®µåï¼‰\tfor (int i = 0; i &lt; nRow; i++)\t&#123;\t\tJson::Value video;\t\tfor (int j = 0; j &lt; nColumn; j++)\t\t&#123;\t\t\t// å‰nColumnä¸ªæ•°æ®éƒ½æ˜¯å­—æ®µåï¼Œæ‰€ä»¥å¯ä»¥ç”¨ pazResult[j] æ¥æ‰“å°\t\t\t// printf(&quot;%-8s : %-8s\\n&quot;, pazResult[j],pazResult[index]);\t\t\tvideo[pazResult[j]] = pazResult[index] ?pazResult[index] : &quot;NULL&quot;; // å­˜å…¥æ•°æ®\t\t\tindex++;\t\t&#125;\t\t// json list\t\tvideos.append(video);\t&#125;\tstd::string json_str;\tvod::JsonUtil::Serialize(videos, &amp;json_str);\tstd::cout &lt;&lt; json_str &lt;&lt; std::endl;\t\tsqlite3_free_table(pazResult);\tsqlite3_close(db);&#125;\n\nå®Œæ•´è¾“å‡ºå¦‚ä¸‹ï¼Œjsonå­—ç¬¦ä¸²å†…çš„æ•°æ®æ˜¯æ­£ç¡®çš„ï¼\nOpened database successfully2 6[        &#123;                &quot;cover&quot; : &quot;testc1&quot;,                &quot;id&quot; : &quot;df65c8c5&quot;,                &quot;info&quot; : &quot;\\u8bf4\\u660e\\u4fe1\\u606f1&quot;,                &quot;insert_time&quot; : &quot;2023-05-04 16:57:10&quot;,                &quot;name&quot; : &quot;\\u540d\\u5b571&quot;,                &quot;video&quot; : &quot;test1&quot;        &#125;,        &#123;                &quot;cover&quot; : &quot;testc2&quot;,                &quot;id&quot; : &quot;da6d27be&quot;,                &quot;info&quot; : &quot;\\u8bf4\\u660e\\u4fe1\\u606f2&quot;,                &quot;insert_time&quot; : &quot;2023-05-04 19:59:38&quot;,                &quot;name&quot; : &quot;\\u540d\\u5b572&quot;,                &quot;video&quot; : &quot;test2&quot;        &#125;]\n\nsqlite3åœ¨è¿”å›æ•°æ®çš„æ—¶å€™ä¹Ÿä¼šç»™æˆ‘ä»¬è¿”å›è¡¨ä¸­çš„å­—æ®µåã€‚æˆ‘ä»¬å¯ä»¥å°†jsonå­—æ®µçš„keyè®¾ç½®æˆå­—æ®µåï¼Œè¿™æ ·å°±å®ç°äº†å­—æ®µçš„ç»Ÿä¸€\n\nä¸ªäººè®¤ä¸ºï¼Œä¸ºäº†é¿å…å‡ºç°åŒä¸€valueè€Œkeyä¸åŒçš„æƒ…å†µï¼Œæœ€å¥½æ˜¯å°†åº”ç”¨å±‚å’Œæ•°æ®åº“ä¸­çš„å­—æ®µç»Ÿä¸€ã€‚å¦åˆ™å‡ºç°äºŒä¹‰æ€§é—®é¢˜ä¸å¥½æ’æŸ¥ã€‚ç‰¹åˆ«æ˜¯å½“ä¸€ä¸ªè¡¨ä¸­çš„å­—æ®µè¾ƒå¤šçš„æ—¶å€™ã€‚\n\nç»“è¯­éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒè€…åªæ˜¯é€‚ç”¨èŒƒå›´çš„åŒºåˆ«ï¼Œå¹¶æ²¡æœ‰å­°å¼ºå­°å¼±çš„å·®è·ã€‚\nä»¥ä¸‹æ˜¯gpt3.5å¯¹äºŒè€…åŒºåˆ«çš„æ€»ç»“ï¼š\n\nSQLite3 å’Œ MySQL éƒ½æ˜¯æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œä½†å®ƒä»¬æœ‰ä¸åŒçš„ç”¨é€”å’Œè®¾è®¡é‡ç‚¹ã€‚\n\nSQLite3 çš„ä¸»è¦ç›®æ ‡æ˜¯ä½œä¸ºåµŒå…¥å¼æ•°æ®åº“ä½¿ç”¨ï¼ŒåŒ…æ‹¬åœ¨ç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢åº”ç”¨ç¨‹åºä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè½»é‡çº§æ•°æ®åº“ä½¿ç”¨ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒMySQL çš„ä¸»è¦é‡ç‚¹æ˜¯æ”¯æŒå¤§å‹ä¼ä¸šçº§åº”ç”¨ç¨‹åºå’Œé«˜è´Ÿè½½æœåŠ¡å™¨ã€‚\nSQLite3 æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ä¸éœ€è¦å®¢æˆ·ç«¯çš„å®Œå…¨ç‹¬ç«‹çš„è‡ªåŒ…å«æ•°æ®åº“ï¼ŒMySQL æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å‹çš„æ•°æ®åº“ï¼Œéœ€è¦ä¸€ä¸ªä¸“ç”¨çš„æœåŠ¡å™¨ç«¯ã€‚\nSQLite3 æ”¯æŒ SQL-92 æ ‡å‡†çš„åŸºæœ¬åŠŸèƒ½ï¼Œè€Œ MySQL æ”¯æŒæ›´å¹¿æ³›çš„ SQL æ ‡å‡†ä»¥åŠè®¸å¤šæ‰©å±•åŠŸèƒ½ã€‚\nSQLite3 çš„æ•°æ®å­˜å‚¨åœ¨å•ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œ MySQL çš„æ•°æ®é€šå¸¸å­˜å‚¨åœ¨å¤šä¸ªæ–‡ä»¶æˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ã€‚\n\n\nå°±è®°å½•è¿™ä¹ˆå¤šå§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql","sqlite3"]},{"title":"ã€MySQLã€‘æ•°æ®ç±»å‹","url":"/posts/3544156851/","content":"mysqlçš„æ•°æ®ç±»å‹è€å¤šäº†ï¼Œå•å¼€ä¸€ç¯‡åšå®¢è®°å½•ä¸€ä¸‹å§\n\n\nmysql  Ver 15.1 Distrib 10.3.28-MariaDB, for Linux (x86_64) using readline 5.1\n\n1.æ•°å€¼ç±»å‹\n\n\næ•°æ®ç±»å‹\nè¯´æ˜\nå­—èŠ‚\n\n\n\nBIT(M)\nä½ç±»å‹ï¼ŒMæŒ‡å®šä½æ•°ï¼Œé»˜è®¤ä½1ï¼Œå¯1-64\n\n\n\nTINYINT [UNSIGNED]\næœ‰ç¬¦å·-127 ~ 128ï¼›æ— ç¬¦å· 0 ~ 255\n1\n\n\nBOOL\nç”¨0å’Œ1è¡¨ç¤ºçœŸå‡ï¼ˆå®é™…ä¸ºtinyint(1))\n1\n\n\nSMALLINT [UNSIGNED]\næœ‰ç¬¦å·-2^15 ~ 2^15 -1; æ— ç¬¦å·2^16 -1\n2\n\n\nMEDIUMINT [UNSIGNED]\næœ‰ç¬¦å·-2^23 ~2^23 -1; æ— ç¬¦å· 2^24 -1\n3\n\n\nINT [UNSIGNED]\næœ‰ç¬¦å·-2^31 ~ 2^31 -1; æ— ç¬¦å·2^32 -1\n4\n\n\nBIGINT [UNSIGNED]\næœ‰ç¬¦å·-2^63 ~ 2^63 -1; æ— ç¬¦å·2^64 -1\n8\n\n\nFLOAT [(M,D)] [UNSIGNED]\nMæŒ‡å®šæ˜¾ç¤ºé•¿åº¦ï¼ŒDæŒ‡å®šå°æ•°ä½æ•°\n4\n\n\nDOUBLE [(M,D)] [UNSIGNED]\nåŒä¸Šï¼Œç²¾åº¦æ›´é«˜\n8\n\n\nDECIMAL (M,D) [UNSIGNED]\nåŒä¸Šï¼ŒMå’ŒDå¿…é¡»ç»™å‡º\n\n\n\n1.1 æ’å…¥è¶…èŒƒå›´æ•°æ®å’Œç¼–è¯‘å™¨ä¸­ä¼šå¯¹æ•°æ®è¿›è¡Œæˆªæ–­ä¸åŒï¼Œmysqlä¸­çš„æ•°æ®èŒƒå›´å¿…é¡»ä¸¥æ ¼éµå®ˆå…¶å®šä¹‰çš„èŒƒå›´\nMariaDB [hello]&gt; create table test(    -&gt; id TINYINT UNSIGNED);Query OK, 0 rows affected (0.021 sec)\n\nè¿™é‡Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªä½¿ç”¨TINYINTç±»å‹çš„è¡¨ï¼Œå‘é‡Œé¢æ’å…¥å¦‚ä¸‹çš„æ­£ç¡®æ•°æ®\nMariaDB [hello]&gt; insert into test value (3);Query OK, 1 row affected (0.040 sec)MariaDB [hello]&gt; insert into test value (0);Query OK, 1 row affected (0.040 sec)MariaDB [hello]&gt; insert into test value (10);Query OK, 1 row affected (0.007 sec)\n\nå†å°è¯•æ’å…¥è´Ÿæ•°å’Œè¶…è¿‡èŒƒå›´çš„æ•°\nMariaDB [hello]&gt; insert into test value (-1);ERROR 1264 (22003): Out of range value for column &#x27;id&#x27; at row 1MariaDB [hello]&gt; insert into test value (300);ERROR 1264 (22003): Out of range value for column &#x27;id&#x27; at row 1MariaDB [hello]&gt; \n\nå¯ä»¥çœ‹åˆ°ï¼Œmysqlé˜»æ­¢äº†æˆ‘ä»¬çš„æ’å…¥ã€‚\n1.2 çº¦æŸè¿™å°±æ˜¯mysqlå¯¹åº”ç”¨å±‚çš„çº¦æŸï¼Œä½ å¿…é¡»éµå®ˆå…ˆå‰å¯¹è¡¨ä¸­å¯¹å­—æ®µç±»å‹çš„å®šä¹‰å’ŒèŒƒå›´çš„è¦æ±‚ï¼Œæ‰èƒ½å°†æ•°æ®æ’å…¥åˆ°æ•°æ®åº“ä¸­ã€‚\nè¿™æ ·å°±ä¿è¯äº†ï¼Œæˆ‘ä»¬åœ¨mysqlä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ˜¯èƒ½ä¿è¯èŒƒå›´æ­£ç¡®çš„ï¼\nå¹¶ä¸ä¼šå‡ºç°è¿™ä¸ªæ•°æ®æ˜¯å› ä¸ºæˆªæ–­è€Œè¢«å­˜å…¥çš„ç¼ºçœå€¼ï¼Œä»è€Œé€ æˆçš„éç²¾ç¡®é—®é¢˜ã€‚\n\nå½“ç„¶ï¼Œä½ è¦æ˜¯åœ¨ä»£ç ä¸­å¼ºè½¬æ•°æ®æ’å…¥ï¼Œmysqlè‚¯å®šçœ‹ä¸å‡ºæ¥ã€‚ä½†é‚£æ ·å°±æ˜¯ç¨‹åºäº‘çš„é”…äº†ï¼Œå’Œmysqlæœ¬èº«æ— å…³ï¼\n\næ³¨æ„ï¼Œå½“ä¸€ä¸ªæ— ç¬¦å·æ•°æ®æ— æ³•è¢«intç±»å‹å­˜æ”¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸è¦ç”¨æ— ç¬¦å·intæ¥å­˜æ”¾è¿™ä¸ªæ•°æ®ï¼Œè€Œåº”è¯¥ä½¿ç”¨bigintã€‚è¿™æ ·æ‰èƒ½ä¿è¯æ•°æ®ä¸€å®šèƒ½è¢«å­˜å…¥ã€‚\nè€Œæˆ‘ä»¬è¦å­˜æ”¾çš„æ•°æ®æ²¡æœ‰è´Ÿæ•°çš„æ—¶å€™ï¼ˆæ¯”å¦‚å¹´é¾„ã€å½“å‰æ—¶é—´æˆ³ï¼‰åˆ™å»ºè®®ä½¿ç”¨æ— ç¬¦å·æ•°æ¥å­˜æ”¾ã€‚å› ä¸ºè¿™æ ·èƒ½æ˜¾å¼å‘ŠçŸ¥å…¶ä»–éœ€è¦æ“ä½œè¿™ä¸ªæ•°æ®åº“çš„äººï¼Œå½“å‰å­—æ®µæ˜¯æ²¡æœ‰è´Ÿæ•°çš„ã€‚\n1.3 BITç±»å‹BITç±»å‹å°±æ˜¯ç”¨æ¯”ç‰¹ä½æ¥è¡¨ç¤ºä¸€äº›0&#x2F;1çš„ä¿¡æ¯\n\nç”¨æˆ·åœ¨çº¿çŠ¶æ€\nç”¨æˆ·æ€§åˆ«ï¼ˆä¸è€ƒè™‘ä¸é€‰æ‹©çš„æƒ…å†µä¸‹ï¼‰\nç”¨æˆ·æ˜¯å¦å·²ç»éªŒè¯é‚®ç®±\nç”¨æˆ·æ˜¯å¦ç»‘å®šäº†æ‰‹æœº\nç”¨æˆ·ä¸€ç³»åˆ—æƒé™ä½\nâ€¦\n\nè¿™äº›æ•°æ®éƒ½æ˜¯åªæœ‰çœŸå‡åŒºåˆ†çš„ï¼Œä½¿ç”¨bitæ¥ä¿å­˜çš„æ—¶å€™ï¼Œå°±èƒ½èŠ‚çœä¸€å®šçš„ç©ºé—´ã€‚\n1.4 æµ®ç‚¹æ•°FLOAT [(M,D)] [UNSIGNED]\n\næµ®ç‚¹æ•°è¿™é‡Œçš„Må’ŒDæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ\nalter table test add ft float(4,2) after id;\n\nè¿™é‡Œæˆ‘å…ˆå¾€ä¹‹å‰å·²æœ‰çš„testè¡¨ä¸­æ’å…¥ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œæ¥æµ‹è¯•ä¸€ä¸‹æƒ…å†µ\nMariaDB [hello]&gt; desc test;+-------+---------------------+------+-----+---------+-------+| Field | Type                | Null | Key | Default | Extra |+-------+---------------------+------+-----+---------+-------+| id    | tinyint(3) unsigned | YES  |     | NULL    |       || ft    | float(4,2)          | YES  |     | NULL    |       |+-------+---------------------+------+-----+---------+-------+2 rows in set (0.002 sec)\n\nå½“æ’å…¥ä¸€ä¸ªæ•´æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨åè¡¥0\nMariaDB [hello]&gt; insert into test values (1,99);Query OK, 1 row affected (0.007 sec)MariaDB [hello]&gt; select * from test;+------+-------+| id   | ft    |+------+-------+|    3 |  NULL ||    0 |  NULL ||   10 |  NULL ||    1 | 99.00 |+------+-------+4 rows in set (0.000 sec)\n\næ’å…¥è´Ÿæ•°ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„\nMariaDB [hello]&gt; insert into test values (1,-99.3);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; select * from test;+------+--------+| id   | ft     |+------+--------+|    3 |   NULL ||    0 |   NULL ||   10 |   NULL ||    1 |  99.00 ||    1 | -99.30 |+------+--------+5 rows in set (0.001 sec)\n\nä½†å½“ä½ æƒ³æ’å…¥å¦‚ä¸‹æ•°å­—çš„æ—¶å€™ï¼Œå°±å¼€å§‹æŠ¥é”™äº†\nMariaDB [hello]&gt; insert into test values (1,-99.99542);ERROR 1264 (22003): Out of range value for column &#x27;ft&#x27; at row 1MariaDB [hello]&gt; insert into test values (1,100.99542);ERROR 1264 (22003): Out of range value for column &#x27;ft&#x27; at row 1MariaDB [hello]&gt; insert into test values (1,100.9942);ERROR 1264 (22003): Out of range value for column &#x27;ft&#x27; at row 1MariaDB [hello]&gt; insert into test values (1,100.99);ERROR 1264 (22003): Out of range value for column &#x27;ft&#x27; at row 1\n\nç®€å•æ€»ç»“\n\næµ®ç‚¹æ•°çš„Mä»£è¡¨æµ®ç‚¹æ•°æ€»å…±çš„ä½æ•°ï¼ˆåŒ…æ‹¬æ•´æ•°éƒ¨åˆ†å’Œå°æ•°éƒ¨åˆ†ï¼‰\nåç»­çš„Dä»£è¡¨å°æ•°ç‚¹ä¹‹åçš„ä½æ•°\nå¦‚æœDä¸º2ï¼Œåˆ™å¯ä»¥æ’å…¥0.994ï¼Œä¸å¯ä»¥æ’å…¥0.995ï¼ˆä¸´ç•Œæ•°æ®åªèƒ½å››èˆï¼Œä¸æ”¯æŒäº”å…¥ï¼Œå› ä¸ºäº”å…¥äº†ä¹‹åå°±ç›¸å½“äºè¶…é™äº†ï¼‰\næ’å…¥30.945ä¼šè¢«å››èˆäº”å…¥ä¸º30.95\nfloat(4,2)çš„èŒƒå›´å°±æ˜¯ -99.99 ~ 99.99; å¦‚æœæ˜¯æ— ç¬¦å·ï¼Œåˆ™ä¸º 0 ~ 99.99\n\nMariaDB [hello]&gt; insert into test values (1,30.945);Query OK, 1 row affected (0.003 sec)MariaDB [hello]&gt; select * from test;+------+--------+| id   | ft     |+------+--------+|    3 |   NULL ||    0 |   NULL ||   10 |   NULL ||    1 |  99.00 ||    1 | -99.30 ||    1 | -99.34 ||    1 |  30.95 |+------+--------+7 rows in set (0.000 sec)\n\n1.5 decimalDECIMAL (M,D) [UNSIGNED]\n\nè¿™ä¸ªæ•°æ®ç±»å‹å’Œfloatçš„åŒºåˆ«ä¹Ÿæ˜¯ç²¾åº¦ä¸Šçš„\n\nfloatæœ€å¤§ç²¾åº¦çº¦7ä½\ndecimalæœ€å¤§Mä¸º65ï¼ŒDä¸º30ï¼›çœç•¥æ—¶Dé»˜è®¤ä¸º0ï¼ŒMé»˜è®¤ä¸º10\n\nåœ¨æˆ‘å½“å‰çš„mariadbä¸­è¿›è¡Œæµ‹è¯•ï¼ŒåŒæ ·æ˜¯æ’å…¥10.123456789ï¼Œfloatæ˜¾ç¤ºçš„æ˜¯10.12345695ï¼Œdecimalæ˜¾ç¤ºçš„æ˜¯10.12345679 \nå¾ˆæ˜æ˜¾ï¼Œdecimalçš„ç²¾å‡†åº¦æ›´é«˜ï¼Œæ­£ç¡®å¯¹10.123456789è¿›è¡Œå››èˆäº”å…¥äº†ã€‚è€Œfloatå°±æŠŠæ•°æ®ç»™æåäº†ã€‚\nMariaDB [hello]&gt; drop table test;Query OK, 0 rows affected (0.046 sec)MariaDB [hello]&gt; create table test (    -&gt; f1 float(10,8),    -&gt; f2 decimal(10,8));Query OK, 0 rows affected (0.058 sec)MariaDB [hello]&gt; insert into test values (10.123456789,10.123456789);Query OK, 1 row affected, 1 warning (0.010 sec)MariaDB [hello]&gt; select * from test;+-------------+-------------+| f1          | f2          |+-------------+-------------+| 10.12345695 | 10.12345679 |+-------------+-------------+1 row in set (0.001 sec)\n\næ‰€ä»¥ï¼Œå¦‚æœéœ€è¦å­˜å‚¨å°æ•°ï¼Œæœ€å¥½ä½¿ç”¨decimal\n1.6 æµ®ç‚¹æ•°å–æ•´çš„å‡ ç§æ–¹å¼è¿™ä¸ªå’Œmysqlæ— å…³ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹\n\né›¶å‘å–æ•´ï¼šä¸¢å¼ƒå°æ•°éƒ¨åˆ†\nå‘ä¸Šå–æ•´ï¼š2.1è§†ä½œ3ï¼Œ-2.5è§†ä½œ-2ï¼ˆ2.0ä¸å˜ï¼‰\nå‘ä¸‹å–æ•´ï¼š2.1è§†ä½œ2ï¼Œ-2.5è§†ä½œ-3ï¼ˆ2.0ä¸å˜ï¼‰\nå››èˆäº”å…¥ï¼ˆåˆšåˆšçš„æµ‹è¯•èƒ½çœ‹åˆ°ï¼Œmysqlé‡‡ç”¨çš„æ˜¯è¿™ä¸ªï¼‰\n\n2.æ–‡æœ¬ã€äºŒè¿›åˆ¶ç±»å‹\n\n\næ•°æ®ç±»å‹\nè¯´æ˜\n\n\n\nCHAR (SIZE)\nå®šé•¿å­—ç¬¦ä¸²ï¼Œæœ€å¤§255\n\n\nVARCHAR (SIZE)\nå¯å˜é•¿åº¦å­—ç¬¦ä¸²ï¼Œæœ€å¤§é•¿åº¦ 65535\n\n\nBLOB\näºŒè¿›åˆ¶æ•°æ®\n\n\nTEXT\nå¤§æ–‡æœ¬ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼•\n\n\nTEXTå’ŒVARCHARéƒ½æ˜¯æ”¯æŒå…¨æ–‡ç´¢å¼•çš„ï¼\nMariaDB [hello_mysql]&gt; CREATE TABLE articles (    -&gt;     id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,    -&gt;     title VARCHAR(200),    -&gt;     body TEXT DEFAULT &#x27;&#x27;,    -&gt;     FULLTEXT (title,body)     -&gt; )engine=MyISAM;Query OK, 0 rows affected (0.003 sec)\n2.1 charåœ¨mysqlä¸­ï¼Œsizeå¹¶ä¸æ˜¯å­—èŠ‚ï¼Œè€Œæ˜¯å­—ç¬¦æ•°é‡ã€‚\nchar(2)\n\nå®ƒå¯ä»¥å­˜æ”¾ä¸¤ä¸ªè‹±æ–‡å­—æ¯ï¼Œä¸¤ä¸ªç¬¦å·ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªä¸­æ–‡ã€‚ä½†å®é™…ä¸Šä¸¤ä¸ªä¸­æ–‡å ç”¨çš„å­—èŠ‚æ•°å¹¶é2ã€‚\næ¯”å¦‚ä¸‹æ–¹c1å’Œc2åˆ†åˆ«æ˜¯char(3)/varchar(3)ï¼Œå¯ä»¥æ’å…¥3ä¸ªå­—çš„ä¸­æ–‡\nMariaDB [hello]&gt; select * from test;+---------+-----------+| c1      | c2        |+---------+-----------+| 1ca     | 23a       || 123     | 234       || 3       | 23        || ä½ å¥½     | æˆ‘åœ¨å‘¢    |+---------+-----------+4 rows in set (0.001 sec)\n\nè¶…è¿‡2ä¸ªå­—ç¬¦çš„æ•°æ®ä¼šè¢«æ‹’ç»æ’å…¥ï¼›\nMariaDB [hello]&gt; insert into test values (&#x27;1ca&#x27;,&#x27;23a3&#x27;);ERROR 1406 (22001): Data too long for column &#x27;c2&#x27; at row 1\n\n2.2 charå’Œvarcharçš„åŒºåˆ«è¡¨ä¸­æåˆ°ï¼Œè¿™ä¸¤ä¸ªé™¤äº†æœ€å¤§é•¿åº¦çš„é™åˆ¶ï¼Œè¿˜æœ‰ä¸€ä¸ªåŒºåˆ«æ˜¯å®šé•¿/å˜é•¿\nç®€å•ç†è§£ä¸ºï¼Œcharæ˜¯Cè¯­è¨€ä¸­çš„char*ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå®šä¹‰ä¸ºCHAR(3)ï¼Œå°±æ— è®ºå¦‚ä½•éƒ½ä¼šå¼€3ä¸ªå­—ç¬¦çš„ç©ºé—´æ¥å­˜æ”¾æ•°æ®ï¼Œä¸ç®¡ä½ çš„å­—ç¬¦ä¸²æ˜¯1ä¸ªå­—ç¬¦è¿˜æ˜¯2ä¸ªå­—ç¬¦ï¼›\nè€Œvarcharæ˜¯C++çš„stringï¼Œå®ƒå¯ä»¥åŠ¨æ€å¼€è¾Ÿé•¿åº¦ï¼Œå¦‚æœVARCHAR(20)ï¼Œå½“å­—ç¬¦ä¸²åªæœ‰3ä¸ªçš„æ—¶å€™ï¼Œåªä¼šå ç”¨3å­—èŠ‚çš„ç©ºé—´ã€‚æ—¢ç„¶æ˜¯stringï¼Œé‚£å°±éœ€è¦æœ‰é¢å¤–ç©ºé—´æ¥å­˜æ”¾å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚åœ¨mysqlä¸­ï¼Œvarcharä¼šé‡‡ç”¨1-3å­—èŠ‚çš„ç©ºé—´æ¥å­˜æ”¾VARCHARæ•°æ®ç±»å‹çš„å½“å‰é•¿åº¦ã€‚\n\nå½“æˆ‘éœ€è¦ä¸€ä¸ªé•¿åº¦å›ºå®šçš„8ä½uuidï¼Œå¯ä»¥é€‰æ‹©charæ¥èŠ‚çœç©ºé—´ï¼ˆä¸éœ€è¦é¢å¤–ç©ºé—´å­˜æ”¾é•¿åº¦ï¼‰\nå½“æˆ‘éœ€è¦å­˜æ”¾åå­—ã€åœ°å€ç­‰ä¿¡æ¯çš„æ—¶å€™ï¼Œé€‰æ‹©varcharï¼ˆä½†è¦ä¿è¯é•¿åº¦ä¸è¶…è¿‡varcharçš„ä¸Šé™ï¼‰\n\n3.æ—¶é—´ç±»å‹\n\n\næ•°æ®ç±»å‹\nè¯´æ˜\n\n\n\nDATE\nyyyy-mm-dd\n\n\nDATETIME\nyyyy-mm-dd hh:mm:ss\n\n\nTIMESTAMP\næ—¶é—´æˆ³\n\n\nè¿™ä¸ªåº”è¯¥å¾ˆå¥½çœ‹æ˜ç™½ï¼Œæ—¶é—´ç±»å‹å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¡¨ç¤ºä¸€äº›æ—¶é—´\n\næ•°æ®æ›´æ–°æ—¶é—´\næ•°æ®æ’å…¥çš„æ—¶é—´\nå½“å‰æ•°æ®å…³è”çš„æ“ä½œæ—¶é—´\nâ€¦\n\n3.1 ç¤ºä¾‹åœ¨æˆ‘çš„è§†é¢‘ç‚¹æ’­é¡¹ç›®ä¸­ï¼Œå°±æ˜¯ç”¨äº†å¦‚ä¸‹è¯­å¥è®¾ç½®äº†ä¸€ä¸ªTIMESTAMPå­—æ®µï¼Œåšä¸ºè§†é¢‘çš„ä¸Šä¼ æ—¶é—´\ninsert_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP comment &#x27;è§†é¢‘åˆ›å»ºæ—¶é—´&#x27;,\n\nä½†æˆ‘å‘ç°ï¼Œå³ä¾¿æ˜¯ç”¨äº†TIMESTAMPï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¾æ—§æ˜¾ç¤ºçš„æ˜¯å¯è¯»æ—¶é—´\n\néœ€è¦ä½¿ç”¨å¦‚ä¸‹çš„è¯­å¥è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰ä¼šæ˜¾ç¤ºæ—¶é—´æˆ³çš„æ•°å­—\nSELECT UNIX_TIMESTAMP(insert_time) AS timestamp FROM tb_video;\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [vod_system]&gt; SELECT UNIX_TIMESTAMP(insert_time) AS timestamp FROM tb_video;+------------+| timestamp  |+------------+| 1683213543 || 1683256245 |+------------+2 rows in set (0.001 sec)\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¿å­˜æ—¶é—´æˆ³æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºä¸ç®¡ä½ æ˜¯åœ¨é‚£ä¸ªæ—¶åŒºï¼Œæ—¶é—´æˆ³éƒ½æ˜¯ç»Ÿä¸€çš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨åº”ç”¨å±‚å°†æ—¶é—´æˆ³é€šè¿‡å‡½æ•°ï¼ˆä¸€èˆ¬éƒ½æœ‰ä¸“é—¨çš„åº“å‡½æ•°æ¥è½¬åŒ–ï¼‰æˆå¯¹åº”æ—¶åŒºçš„å¯è¯»æ—¶é—´ã€‚\nä½†å¦‚æœä½ èƒ½ç‰¹åˆ«ç¡®å®šä½ çš„åº”ç”¨åªä¼šåœ¨å½“å‰æ—¶åŒºä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘å†™äº†ä¸€ä¸ªæ•°æ®çº¯æœ¬åœ°åŒ–çš„åº”ç”¨ï¼Œåœ¨å“ªé‡Œéƒ¨ç½²å°±ä½¿ç”¨é‚£ä¸ªåœ°æ–¹çš„æ—¶é—´ã€‚è¿™æ—¶å€™å°±å¯ä»¥é€‰æ‹©ä½¿ç”¨dateç±»å‹æ¥å­˜æ”¾strå­—ç¬¦ä¸²ï¼Œçœå»äº†åœ¨åº”ç”¨å±‚é‡æ–°å¯¹æ—¶é—´æ“ä½œçš„ç¹çã€‚\nè€Œä¸”ï¼Œåƒpythonè¿™æ ·çš„è¯­è¨€ï¼Œä¹Ÿæ˜¯æ”¯æŒå°†ç‰¹å®šæ ¼å¼çš„stræ—¶é—´è½¬å›æ—¶é—´æˆ³çš„ã€‚\n3.2 timestampå’Œdatetimeçš„åŒºåˆ«åœ¨MySQLä¸­ï¼ŒTIMESTAMPç±»å‹å’ŒDATETIMEç±»å‹éƒ½ç”¨äºå­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ï¼š\n\nå­˜å‚¨èŒƒå›´ï¼š\nTIMESTAMPç±»å‹ï¼šä½¿ç”¨4ä¸ªå­—èŠ‚è¿›è¡Œå­˜å‚¨ï¼Œå¯ä»¥è¡¨ç¤ºçš„èŒƒå›´ä¸º1970-01-01 00:00:01åˆ°2038-01-19 03:14:07ã€‚å› ä¸ºä½¿ç”¨è¾ƒå°‘çš„å­—èŠ‚ï¼Œæ‰€ä»¥TIMESTAMPç±»å‹åœ¨å­˜å‚¨ä¸Šæ›´åŠ èŠ‚çœç©ºé—´ã€‚\nDATETIMEç±»å‹ï¼šä½¿ç”¨8ä¸ªå­—èŠ‚è¿›è¡Œå­˜å‚¨ï¼Œå¯ä»¥è¡¨ç¤ºçš„èŒƒå›´ä¸º1000-01-01 00:00:00åˆ°9999-12-31 23:59:59ã€‚ç”±äºä½¿ç”¨æ›´å¤šçš„å­—èŠ‚ï¼ŒDATETIMEç±»å‹å¯ä»¥è¡¨ç¤ºçš„æ—¶é—´èŒƒå›´æ›´å¹¿ã€‚\n\n\nè‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼š\nMySQL8.0ä¸­ï¼ŒTIMESTAMPå’ŒDATETIMEç±»å‹éƒ½å¯ä»¥è®¾ç½®ä¸ºè‡ªåŠ¨æ›´æ–°ï¼ˆDEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMPï¼‰ï¼Œè¿™ä¸ªåˆ—åœ¨æ¯æ¬¡æ›´æ–°æ•°æ®æ—¶ä¼šè‡ªåŠ¨å°†å…¶è®¾ç½®ä¸ºå½“å‰æ—¶é—´ã€‚\næ—§ç‰ˆæœ¬ä¸­åªæœ‰TIMESTAMPæ‰èƒ½å®ç°è‡ªåŠ¨æ›´æ–°ã€‚\n\n\næ—¶åŒºå¤„ç†ï¼š\nTIMESTAMPç±»å‹ï¼šå­˜å‚¨çš„å€¼æ˜¯ç›¸å¯¹äºæ—¶åŒºçš„ï¼Œå³å®ƒä¼šæ ¹æ®æ•°æ®åº“ä¼šè¯çš„æ—¶åŒºè¿›è¡Œè‡ªåŠ¨è°ƒæ•´ã€‚å½“ä»æ•°æ®åº“ä¸­æ£€ç´¢TIMESTAMPç±»å‹çš„å€¼æ—¶ï¼ŒMySQLä¼šå°†å…¶è½¬æ¢ä¸ºå®¢æˆ·ç«¯è¿æ¥çš„æ—¶åŒºã€‚å› æ­¤ï¼ŒTIMESTAMPç±»å‹é€‚ç”¨äºå­˜å‚¨åŸºäºæ—¶åŒºçš„æ—¥æœŸæ—¶é—´ä¿¡æ¯ã€‚\nDATETIMEç±»å‹ï¼šä¸å—æ—¶åŒºå½±å“ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªç‰¹å®šçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œä¸ä¼šéšæ—¶åŒºå˜åŒ–è€Œå˜åŒ–ã€‚å½“ä»æ•°æ®åº“ä¸­æ£€ç´¢DATETIMEç±»å‹çš„å€¼æ—¶ï¼Œå®ƒä¼šä¿æŒå­˜å‚¨çš„åŸå§‹æ—¥æœŸæ—¶é—´å€¼ã€‚\n\n\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦å­˜å‚¨æœªæ¥è¾ƒè¿œçš„æ—¶é—´æˆ–è€…éœ€è¦è¿›è¡Œè·¨æ—¶åŒºçš„æ—¶é—´æ“ä½œï¼Œä½ å¯èƒ½æ›´å€¾å‘äºé€‰æ‹©DATETIMEç±»å‹ã€‚è€Œå¦‚æœä½ å¯¹å­˜å‚¨ç©ºé—´æ•æ„Ÿæˆ–åªéœ€è¦å­˜å‚¨è¿‘æœŸæ—¶é—´èŒƒå›´å†…çš„æ•°æ®ï¼Œå¹¶ä¸”å¸Œæœ›åˆ©ç”¨ON UPDATE CURRENT_TIMESTAMPåŠŸèƒ½ï¼Œé‚£ä¹ˆTIMESTAMPç±»å‹å¯èƒ½æ›´åˆé€‚ã€‚é€‰æ‹©ä½¿ç”¨å“ªç§ç±»å‹å–å†³äºä½ çš„å…·ä½“éœ€æ±‚å’Œåº”ç”¨åœºæ™¯ã€‚\næ…•é›ªä¸ªäººæƒ³æ³•ï¼šå¦‚æœä¸ºäº†æ•°æ®çš„é•¿è¿œè€ƒè™‘ï¼Œä½¿ç”¨bigintæ¥ç›´æ¥å­˜å‚¨æ¯«ç§’çº§æ—¶é—´æˆ³æ•°å­—æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½ä¿è¯å¯¹äºæ—¶é—´çš„å¤„ç†å¯ä»¥åœ¨ç”¨æˆ·å±‚é¢è¿›è¡Œï¼Œè€Œä¸ç”¨å…³æ³¨æ•°æ®åº“é‡Œé¢çš„dateç±»å‹åˆ°åº•æ˜¯æ€ä¹ˆå¤„ç†çš„ã€‚\n4.Stringç±»å‹\n\n\næ•°æ®ç±»å‹\nè¯´æ˜\n\n\n\nENUM\nENUMæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå…¶å€¼æ¥è‡ªè¡¨åˆ›å»ºæ—¶åœ¨åˆ—ä¸­è§„å®šçš„æšä¸¾å˜é‡å…¶ä¸­ä¹‹ä¸€çš„å€¼\n\n\nSET\nSETå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªå€¼ï¼Œå…¶å€¼æ¥ä¹‹è¡¨åˆ›å»ºæ—¶è§„å®šå…è®¸çš„ä¸€åˆ—å€¼ã€‚æŒ‡å®šåŒ…æ‹¬å¤šä¸ªsetæˆå‘˜çš„setåˆ—å€¼æ—¶ï¼Œå„æˆå‘˜ä¹‹é—´éœ€è¦ç”¨é€—å·é£æ ¼ã€‚setæˆå‘˜å€¼æœ¬èº«ä¸èƒ½æœ‰é€—å·\n\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æ’å…¥çš„æ˜¯æˆ‘ä»¬é¢„å…ˆè®¾å®šçš„æšä¸¾å€¼ï¼Œä½†åå°å­˜æ”¾çš„æ—¶å€™ï¼Œä¾æ—§æ˜¯ä»¥ æ•°å­— çš„æ–¹å¼å­˜æ”¾çš„ï¼ˆèŠ‚çœç©ºé—´ï¼‰\n4.1 enumæšä¸¾ç±»å‹å’Œæˆ‘ä»¬åœ¨Cè¯­è¨€ä¸­å®šä¹‰çš„ç±»ä¼¼ï¼Œå¯ä»¥ä½œä¸ºä¸€ç§æ•°æ®çš„é€‰é¡¹\nweekday ENUM(&#x27;Monday&#x27;, &#x27;Tuesday&#x27;, &#x27;Wednesday&#x27;, &#x27;Thursday&#x27;, &#x27;Friday&#x27;, &#x27;Saturday&#x27;, &#x27;Sunday&#x27;) NOT NULL\n\næ¯”å¦‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªweekdayçš„æšä¸¾ç±»å‹ï¼Œæ¥è¡¨ç¤ºæ˜ŸæœŸå‡ \nè¿™æ ·å°±èƒ½ä¿è¯ï¼Œè¿™ä¸€åˆ—çš„æ•°æ®ï¼Œå°±åªèƒ½æ˜¯è¿™ä¸ªæšä¸¾ç±»å‹ä¹‹ä¸­çš„æ•°æ®ï¼Œè€Œä¸ä¼šå‡ºç°monã€wedè¿™æ ·çš„ç¼©å†™æ˜ŸæœŸ\nç›¸å½“äºå¯¹ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“æ‰€æœ‰å¼€å‘è€…çš„çº¦æŸï¼Œå¿…é¡»è¦éµå®ˆæšä¸¾å†…éƒ¨çš„æ•°æ®è¦æ±‚ã€‚\n4.1.1 é€šè¿‡æ•°å­—æ’å…¥é™¤äº†é€šè¿‡ç›´æ¥æŒ‡å®šå…ƒç´ æ¥æ’å…¥ï¼Œè¿˜å¯ä»¥é€šè¿‡æ•°å­—æ¥æ’å…¥\n\næˆ‘é€šè¿‡æ•°å­—3æ¥æŒ‡å®šweekdayé‡Œé¢çš„å€¼ï¼Œå¯ä»¥çœ‹åˆ°æ’å…¥åçš„ç»“æœä¸ºwednesdayï¼Œå³æšä¸¾ä¸­çš„ç¬¬ä¸‰ä¸ªå€¼\nMariaDB [hello]&gt; insert into test  values (&#x27;æ¸¸æ³³&#x27;,3);Query OK, 1 row affected (0.001 sec)MariaDB [hello]&gt; select * from test;+------------------------------------------+-----------+| hobby                                    | weekday   |+------------------------------------------+-----------+| è·‘æ­¥,æ¸¸æ³³                                | Monday    || è·‘æ­¥                                     | Monday    || ç¾½æ¯›çƒ                                   | Monday    || è·‘æ­¥,ç¾½æ¯›çƒ                              | Monday    || ä¹’ä¹“çƒ                                   | Monday    ||                                          | Monday    || è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             | Monday    ||                                          | Monday    || æ¸¸æ³³                                     | Wednesday |+------------------------------------------+-----------+9 rows in set (0.000 sec)\n\nå†è¯•è¯•æ•°å­—6ï¼Œæ’å…¥çš„æ˜¯å‘¨å…­ï¼Œä¹Ÿæ˜¯ç¬¬å…­ä¸ªå€¼\nMariaDB [hello]&gt; insert into test  values (&#x27;æ¸¸æ³³&#x27;,6);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; select * from test;+------------------------------------------+-----------+| hobby                                    | weekday   |+------------------------------------------+-----------+| è·‘æ­¥,æ¸¸æ³³                                | Monday    || è·‘æ­¥                                     | Monday    || ç¾½æ¯›çƒ                                   | Monday    || è·‘æ­¥,ç¾½æ¯›çƒ                              | Monday    || ä¹’ä¹“çƒ                                   | Monday    ||                                          | Monday    || è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             | Monday    ||                                          | Monday    || æ¸¸æ³³                                     | Wednesday || æ¸¸æ³³                                     | Saturday  |+------------------------------------------+-----------+10 rows in set (0.000 sec)\n\né€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œæˆ‘ä¹°å¯ä»¥çŸ¥é“ï¼Œæšä¸¾å€¼ç”¨æ•°å­—æŒ‡å®šçš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯å®é™…çš„ç¬¬nä½ï¼Œè€Œå¹¶ä¸æ˜¯ä½¿ç”¨ä¸‹æ ‡ã€‚æ¯”å¦‚æˆ‘æƒ³æ’å…¥0æ˜¯ä¼šæŠ¥é”™çš„ï¼Œè¦æƒ³å¾€weekdayé‡Œé¢æ’å…¥æ•°æ®ï¼Œæ­£ç¡®çš„æ•°å­—èŒƒå›´æ˜¯1-7\nMariaDB [hello]&gt; insert into test  values (&#x27;æ¸¸æ³³&#x27;,0);ERROR 1265 (01000): Data truncated for column &#x27;weekday&#x27; at row 1\n\nä½†æ˜¯ï¼Œä½¿ç”¨æ•°å­—ä¼šå¤§å¤§é™ä½ä»£ç å¯è¯»æ€§ï¼Œä¸ç¬¦åˆæˆ‘ä»¬ä½¿ç”¨æšä¸¾çš„åˆè¡·ã€‚è¿˜æ˜¯æ›´æ¨èå¤§å®¶ç›´æ¥æŒ‡å®šæšä¸¾ä¸­çš„å…ƒç´ å€¼ï¼\n\n4.2 setsetå’Œenumæ˜¯ç±»ä¼¼çš„ï¼Œä½†æ˜¯å¯ä»¥å¤šé€‰\nhobby set(&#x27;è·‘æ­¥&#x27;,&#x27;ç¾½æ¯›çƒ&#x27;,&#x27;ä¹’ä¹“çƒ&#x27;,&#x27;æ¸¸æ³³&#x27;,&#x27;è·³ç»³&#x27;)\n\n4.2.1 æ’å…¥å¤šä¸ªå½“æˆ‘ä»¬æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨é€—å·æ’å…¥å¤šä¸ªé¢„å®šä¹‰setä¸­çš„å€¼\ninsert into test values (&#x27;è·‘æ­¥,æ¸¸æ³³&#x27;);\n\nMariaDB [hello]&gt; select * from test;+---------------+| hobby         |+---------------+| è·‘æ­¥,æ¸¸æ³³     |+---------------+1 row in set (0.000 sec)\n\nå¦‚æœå°è¯•æ’å…¥setä¸­ä¸åŒ…å«çš„å€¼ï¼Œåˆ™ä¼šæŠ¥é”™\nMariaDB [hello]&gt; insert into test values (&#x27;è·‘æ­¥,æ¸¸æ³³,ä»£ç &#x27;);ERROR 1265 (01000): Data truncated for column &#x27;hobby&#x27; at row 1MariaDB [hello]&gt; \n\nè¿™ä¸ªsetå°±å¯ä»¥ç”¨äºæ”¶é›†è¡¨æ¥ç»Ÿè®¡ç”¨æˆ·å›ºå®šçš„çˆ±å¥½çš„æƒ…å†µï¼Œè®©ç”¨æˆ·æ¥å¤šé€‰ï¼Œå†æ’å…¥æ•°æ®åº“ã€‚\n\n4.2.2 å…ƒç´ ä¸èƒ½æœ‰,å› ä¸ºsetå¯ä»¥æ’å…¥å¤šä¸ªï¼Œè¿™å°±è¦æ±‚setä¸­æ¯ä¸€ä¸ªå…ƒç´ æœ¬èº«ä¸èƒ½åŒ…å«, ï¼ˆä¸èƒ½å’Œmysqlçš„å…³é”®å­—å†²çªï¼Œå°±å¥½æ¯”cè¯­è¨€ä¸­ä½ ä¸èƒ½å°†å…³é”®å­—å®šä¹‰ä¸ºæˆå‘˜å˜é‡ä¸€æ ·ã€‚ï¼‰\næ¯”å¦‚ï¼Œå¦‚ä¸‹çš„è®¾ç½®å°±æ˜¯ä¸å…è®¸çš„\nhobby set(&#x27;è·‘æ­¥&#x27;,&#x27;ç¾½æ¯›çƒ&#x27;,&#x27;ä¹’ä¹“çƒ&#x27;,&#x27;æ¸¸æ³³&#x27;,&#x27;è·³,ç»³&#x27;)\n\nè¿™å¼ è¡¨ä¼šè¢«æ‹’ç»åˆ›å»ºï¼ŒæŠ¥é”™ä¹Ÿå‘Šè¯‰ä½  è·³,ç»³ æ˜¯ä¸åˆæ³•çš„setå€¼\nMariaDB [hello]&gt; create table test (    -&gt; hobby set(&#x27;è·‘æ­¥&#x27;,&#x27;ç¾½æ¯›çƒ&#x27;,&#x27;ä¹’ä¹“çƒ&#x27;,&#x27;æ¸¸æ³³&#x27;,&#x27;è·³,ç»³&#x27;));ERROR 1367 (22007): Illegal set &#x27;è·³,ç»³&#x27; value found during parsingMariaDB [hello]&gt; \n\n4.2.3 ç”¨æ•°å­—æ’å…¥ï¼Ÿé™¤äº†ç”¨setä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨æ•°å­—æ¥æ’å…¥è¿™äº›å…ƒç´ \nMariaDB [hello]&gt;  insert into test values (1);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; select * from test;+---------------+| hobby         |+---------------+| è·‘æ­¥,æ¸¸æ³³     || è·‘æ­¥          |+---------------+2 rows in set (0.001 sec)\n\nå¤šå°è¯•å‡ ä¸ªï¼Œä¼šå‘ç°ç»“æœå¾ˆå¥‡æ€ªï¼Œå¹¶ä¸æ˜¯å½“æ—¶å®šä¹‰è¡¨ä¸­ï¼Œsetå…ƒç´ çš„ä¸‹æ ‡\nMariaDB [hello]&gt; insert into test values (2);Query OK, 1 row affected (0.009 sec)MariaDB [hello]&gt; insert into test values (3);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; insert into test values (4);Query OK, 1 row affected (0.003 sec)MariaDB [hello]&gt; select * from test;+------------------+| hobby            |+------------------+| è·‘æ­¥,æ¸¸æ³³        || è·‘æ­¥             || ç¾½æ¯›çƒ           || è·‘æ­¥,ç¾½æ¯›çƒ      || ä¹’ä¹“çƒ           |+------------------+5 rows in set (0.001 sec)\n\næ¯”å¦‚ä½ æ‰“ç®—æ’å…¥0çš„æ—¶å€™ï¼Œä¼šå‘ç°æ˜¯ä¸€ä¸ªç©ºï¼ˆä½†ä¸æ˜¯NULLï¼‰\nMariaDB [hello]&gt; insert into test values (0);Query OK, 1 row affected (0.041 sec)MariaDB [hello]&gt; select * from test;+------------------+| hobby            |+------------------+| è·‘æ­¥,æ¸¸æ³³        || è·‘æ­¥             || ç¾½æ¯›çƒ           || è·‘æ­¥,ç¾½æ¯›çƒ      || ä¹’ä¹“çƒ           ||                  |+------------------+6 rows in set (0.001 sec)\n\n4.2.3 ä½å›¾å®é™…ä¸Šï¼Œè¿™é‡Œæ˜¯ç”¨ä½å›¾æ¥è¡¨ç¤ºæ¯ä¸€ä¸ªæ•°æ®çš„ä½ç½®çš„\nhobby set(&#x27;è·‘æ­¥&#x27;,&#x27;ç¾½æ¯›çƒ&#x27;,&#x27;ä¹’ä¹“çƒ&#x27;,&#x27;æ¸¸æ³³&#x27;,&#x27;è·³ç»³&#x27;)\n\nè¿™é‡Œä¸€å…±æœ‰5ä¸ªæ•°æ®ï¼Œå¯¹åº”å°±æ˜¯5ä¸ªå­—èŠ‚ã€‚éœ€è¦æ³¨æ„ï¼Œå…¶å°†setä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ”¾ç½®åœ¨äº†äºŒè¿›åˆ¶çš„ä½ä½ã€‚æ¯”å¦‚ è·‘æ­¥ å¯¹åº”çš„æ˜¯äºŒè¿›åˆ¶æ•°ç æœ€å³ä¾§çš„ï¼ˆä½ä½ï¼‰çš„ç¬¬ä¸€ä¸ªäºŒè¿›åˆ¶ä½\n0 0 0 0 0 # å•¥éƒ½ä¸æ’å…¥0 0 0 0 1 # æ’å…¥è·‘æ­¥0 0 0 1 0 # æ’å…¥ç¾½æ¯›çƒ0 0 0 1 1 # æ’å…¥è·‘æ­¥,ç¾½æ¯›çƒ0 0 1 0 1 # æ’å…¥è·‘æ­¥,ä¹’ä¹“çƒ# ä»¥æ­¤ç±»æ¨\n\nä½†å½“æˆ‘ä»¬å°è¯•æ’å…¥ä¸€ä¸ªè¶…è¿‡5ä¸ªæ¯”ç‰¹èƒ½è¡¨ç¤ºçš„æ•°æ®ï¼ˆ0~31ï¼‰æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\nMariaDB [hello]&gt; insert into test values (1000);ERROR 1265 (01000): Data truncated for column &#x27;hobby&#x27; at row 1MariaDB [hello]&gt; insert into test values (32);ERROR 1265 (01000): Data truncated for column &#x27;hobby&#x27; at row 1\n\nä¸ç»™æ’å…¥è¾£ï¼\nè€Œæ’å…¥31æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿå°±æ˜¯5ä¸ªçˆ±å¥½éƒ½å¸¦ä¸Š\nMariaDB [hello]&gt; insert into test values (31);Query OK, 1 row affected (0.042 sec)MariaDB [hello]&gt; select * from test;+------------------------------------------+| hobby                                    |+------------------------------------------+| è·‘æ­¥,æ¸¸æ³³                                || è·‘æ­¥                                     || ç¾½æ¯›çƒ                                   || è·‘æ­¥,ç¾½æ¯›çƒ                              || ä¹’ä¹“çƒ                                   ||                                          || è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             |+------------------------------------------+7 rows in set (0.001 sec)\n\nè¿™æ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£ä¸ºä»€ä¹ˆæ’å…¥0æ˜¯ä¸€ä¸ªç©ºå€¼äº†ã€‚è¿™ä¾¿ä»£è¡¨ç”¨æˆ·åœ¨æä¾›çš„é€‰é¡¹ä¸­è°éƒ½æ²¡æœ‰é€‰æ‹©ï¼ˆç›¸å½“äºå¼ƒæƒï¼‰\n4.2.4 æŸ¥è¯¢æ—¢ç„¶èƒ½ç”¨æ•°å­—æ’å…¥ï¼Œå°±èƒ½ç”¨æ•°å­—æŸ¥è¯¢\nMariaDB [hello]&gt; select * from test where hobby=31;+------------------------------------------+| hobby                                    |+------------------------------------------+| è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             |+------------------------------------------+1 row in set (0.001 sec)\n\n4.2.5 æ¡ä»¶æŸ¥è¯¢ find_in_setselect find_in_set(&#x27;a&#x27;,&#x27;a,b,c&#x27;);\n\nè¿™ä¸ªå‡½æ•°èƒ½å¸®æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸ªæ•°æ®æ˜¯å¦åœ¨å®šä¹‰çš„setä¸­ï¼Œä¸Šé¢è¿™ä¸ªè¯­å¥çš„æ„æ€æ˜¯æŸ¥è¯¢a æ˜¯å¦åœ¨set a,b,c ä¸­ã€‚æ§åˆ¶å°ä¸­æµ‹è¯•ï¼Œç»“æœè¾“å‡ºä¸º1ï¼ˆä»£è¡¨Trueï¼‰\nå¦‚æœä¸åœ¨ï¼Œè¿”å›çš„æ˜¯0ï¼ˆä»£è¡¨Falseï¼‰\nMariaDB [hello]&gt; select find_in_set(&#x27;a&#x27;,&#x27;a,b,c&#x27;);+--------------------------+| find_in_set(&#x27;a&#x27;,&#x27;a,b,c&#x27;) |+--------------------------+|                        1 |+--------------------------+1 row in set (0.000 sec)\n\nè€Œåœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªæ¥ç­›é€‰å‡ºçˆ±å¥½æœ‰å…¶ä¸­ä¸€é¡¹çš„äºº\nMariaDB [hello]&gt; select * from test where find_in_set(&#x27;æ¸¸æ³³&#x27;,hobby);+------------------------------------------+| hobby                                    |+------------------------------------------+| è·‘æ­¥,æ¸¸æ³³                                || è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             |+------------------------------------------+2 rows in set (0.001 sec)\n\nè¿™æ ·å°±æˆåŠŸæŠŠçˆ±å¥½ä¸­æœ‰æ¸¸æ³³çš„äººç»™ç­›é€‰å‡ºæ¥äº†ï¼\nè€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥ç”¨or (and)æ¥è¿æ¥ä¸¤ä¸ªæ¡ä»¶ï¼Œå®ç°æ›´å¤§èŒƒå›´çš„æŸ¥è¯¢ã€‚\nMariaDB [hello]&gt; select * from test where find_in_set(&#x27;æ¸¸æ³³&#x27;,hobby) or find_in_set(&#x27;ç¾½æ¯›çƒ&#x27;,hobby);+------------------------------------------+| hobby                                    |+------------------------------------------+| è·‘æ­¥,æ¸¸æ³³                                || ç¾½æ¯›çƒ                                   || è·‘æ­¥,ç¾½æ¯›çƒ                              || è·‘æ­¥,ç¾½æ¯›çƒ,ä¹’ä¹“çƒ,æ¸¸æ³³,è·³ç»³             |+------------------------------------------+4 rows in set (0.001 sec)\n\nThe endOverï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘sqlå­—æ®µçº¦æŸ","url":"/posts/4138950838/","content":"å‰è¨€æ•°æ®åº“å®Œæ•´æ€§æ•°æ®åº“çš„å®Œæ•´æ€§æŒ‡çš„æ˜¯æ•°æ®çš„æ­£ç¡®æ€§å’Œç›¸å®¹æ€§ã€‚\n\næ­£ç¡®æ€§ï¼šç¬¦åˆç°å®ä¸–ç•Œè¯­ä¹‰\nç›¸å®¹æ€§ï¼šåŒä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒè¡¨ä¸­çš„æ•°æ®ç¬¦åˆé€»è¾‘\n\nè¦æƒ³ç»´æŠ¤æ•°æ®åº“çš„å®Œæ•´æ€§ï¼Œéœ€è¦æä¾›å¦‚ä¸‹æœºåˆ¶\n\næä¾›å®šä¹‰å®Œæ•´æ€§çº¦æŸæ¡ä»¶çš„æœºåˆ¶\næä¾›å®Œæ•´æ€§æ£€æŸ¥æ–¹æ³•\nè¿›è¡Œè¿çº¦å¤„ç†\n\nå®Œæ•´æ€§ä¸€èˆ¬åˆ†ä¸ºä¸‰ç±»ï¼š\n\nå®ä½“å®Œæ•´æ€§ï¼šä¸»é”®å”¯ä¸€ä¸”éç©ºï¼Œå¯¹åº”åæ–‡çš„primary keyï¼›\nå‚ç…§å®Œæ•´æ€§ï¼šå¤–é”®çº¦æŸï¼Œå¯¹åº”åæ–‡çš„foreign keyï¼›\nç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ï¼šå±æ€§ä¸Šçº¦æŸæ¡ä»¶çš„å®šä¹‰ï¼Œå¯¹åº”åæ–‡å¯ä¾›ç”¨æˆ·è®¾ç½®çš„å…¶ä»–çº¦æŸæ¡ä»¶ã€‚\n\nMySQLä¸­çš„æ•°æ®çº¦æŸåœ¨MySQLä¸­ï¼Œæˆ‘ä»¬éœ€è¦å­˜å‚¨çš„æ•°æ®åœ¨ç‰¹å®šçš„åœºæ™¯ä¸­éœ€è¦ä¸åŒçš„çº¦æŸã€‚å½“æ–°æ’å…¥çš„æ•°æ®è¿èƒŒäº†è¯¥å­—æ®µçš„çº¦æŸå­—æ®µï¼ŒMySQLä¼šç›´æ¥ç¦æ­¢æ’å…¥ã€‚\n\næ•°æ®ç±»å‹ä¹Ÿæ˜¯ä¸€ç§çº¦æŸï¼Œä½†æ•°æ®ç±»å‹è¿™ä¸ªçº¦æŸå¤ªè¿‡å•ä¸€ï¼›\næ¯”å¦‚æˆ‘éœ€è¦å­˜å‚¨çš„æ˜¯ä¸€ä¸ªåºå·ï¼Œé‚£å°±ä¸å¯èƒ½ä¼šæœ‰è´Ÿæ•°ï¼Œè¿™æ—¶å€™å°±è¦ç”¨æ— ç¬¦å·æ¥å¯¹æ•´å½¢è¿›è¡Œçº¦æŸï¼›\nå¦‚æœæˆ‘è¦å­˜å‚¨çš„æ˜¯ä¸€ä¸ªæ—¥æœŸï¼Œä¸”è¿™ä¸ªæ—¥æœŸæ¯ä¸ªå­—æ®µéƒ½å¿…é¡»è¦æœ‰ï¼Œé‚£å°±éœ€è¦ç”¨NOT NULLä¸ä¸ºç©ºæ¥è¿›è¡Œçº¦æŸï¼›\nå¦‚æœæˆ‘è¦å­˜å‚¨çš„æ˜¯ä¸€ä¸ªç”¨æˆ·IDï¼Œåœ¨æ•´ä¸ªç”¨æˆ·ç³»ç»Ÿä¸­è¿™ä¸ªå€¼è‚¯å®šæ˜¯å”¯ä¸€çš„ï¼Œå°±å¯ä»¥ä½¿ç”¨UNIQUEæ¥çº¦æŸå”¯ä¸€æ€§\n\næœ¬æ–‡ä¸»è¦ä»‹ç»ä¸‹é¢å‡ ç§çº¦æŸçš„ç±»å‹ï¼Œè¿™ä¾æ—§æ˜¯MySQLä¸­ddlç±»å‹çš„è¯­å¥æ“ä½œã€‚\nnull/not null æ˜¯å¦å¯ä»¥ä¸ºç©ºdefault é»˜è®¤å€¼comment åˆ—è¯„è®ºzerofill å‰è¡¥0primary key ä¸»é”®auto_increment è‡ªå¢unique key å”¯ä¸€é”®foreign key å¤–é”®check æ•°æ®æ£€æŸ¥çº¦æŸï¼ˆæ¯”å¦‚æ•°æ®èŒƒå›´åˆ¤æ–­ï¼‰\n\né¡ºå¸¦ä¸€æï¼Œåœ¨MySQLä¸­ï¼Œæ¯ä¸€åˆ—çš„å€¼å¯ä»¥ç§°ä¹‹ä¸ºåˆ—æˆ–è€…å­—æ®µï¼Œä¸€èˆ¬ä¸ç§°ä¹‹ä¸ºé”®å€¼ã€‚è€Œè¡¨ä¸­çš„æ¯ä¸€è¡Œè¢«ç§°ä½œä¸€æ¡è®°å½•ï¼›\n\næˆ‘å†™pythonçš„æ—¶å€™å°±ä¸€ç›´æŠŠdictçš„keyå«åšé”®å€¼ï¼Œç„¶åå°±å«ä¹ æƒ¯äº†â€¦\n\n1.ç©ºå±æ€§null1.1 è¯´æ˜ç©ºå±æ€§åŒ…å«ä¸¤ä¸ªå€¼ï¼ŒNULL/NOT NULLï¼Œåˆ†åˆ«å¯¹åº”ä¸ºç©ºå’Œä¸ä¸ºç©º\nåœ¨æ•°æ®åº“ä¸­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ’å…¥ä¸€è¡Œæ—¶æ²¡æœ‰æŒ‡å®šæŸä¸€åˆ—çš„å€¼ï¼Œé‚£ä¹ˆæ•°æ®åº“å°±ä¼šæŠŠè¿™ä¸ªå€¼è®¾ç½®ä¸ºNULLï¼›\n\nè¿™é‡Œè¦æ³¨æ„åŒºåˆ†NULLå’Œç©ºå­—ç¬¦ä¸²ï¼Œç©ºå­—ç¬¦ä¸²å¹¶ä¸æ˜¯NULLï¼\n\nä½†å®é™…ä½¿ç”¨æ•°æ®çš„æ—¶å€™ï¼Œå‡è®¾è¿™æ˜¯ä¸€ä¸ªæ•´å½¢çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å–å‡ºæ¥åå¯¹å…¶è¿›è¡Œè¿ç®—ã€‚æ­¤æ—¶NULLå–å‡ºæ¥çš„ç»“æœå°±ä¸æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ²¡æœ‰åŠæ³•è¿›è¡Œè¿ç®—ã€‚æ‰€ä»¥åœ¨å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šæŠŠä¸€ä¸ªå­—æ®µçš„çº¦æŸè®¾ç½®ä¸ºNOT NULLå¹¶æ·»åŠ ä¸Šä¸€ä¸ªé»˜è®¤å€¼ï¼ˆæ¯”å¦‚0æˆ–è€…ç©ºå­—ç¬¦ä¸²ï¼‰\nMariaDB [hello]&gt; select null;+------+| NULL |+------+| NULL |+------+1 row in set (0.000 sec)MariaDB [hello]&gt; select not null;+----------+| not null |+----------+|     NULL |+----------+1 row in set (0.001 sec)\n\nç”±ä¸‹å¯è§ç©ºå±æ€§æ˜¯æ²¡åŠæ³•å‚ä¸è¿ç®—çš„ï¼Œä¸ç®¡å¦‚ä½•è¿ç®—å…¶ç»“æœéƒ½æ˜¯NULL\nåœ¨Pythonä¸­ï¼ŒNULLç›´æ¥å¯¹åº”çš„å°±æ˜¯Noneï¼Œå½“ä½ å°è¯•ç”¨Noneå’Œintç±»å‹è¿›è¡Œè¿ç®—çš„æ—¶å€™ï¼ŒPythonå°±ä¼šæŠ¥é”™äº†ã€‚CPPä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚\nMariaDB [hello]&gt; select 1+null;+--------+| 1+null |+--------+|   NULL |+--------+1 row in set (0.001 sec)\n\n1.2 æ¡ˆä¾‹å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥¼å±‚ä¸­çš„ç­çº§å’Œæ•™å®¤å¯¹åº”çš„è¡¨ï¼Œå…¶ä¸­åŒ…å«ç­çº§ç¼–å·å’Œæ•™å®¤ç¼–å·è¿™ä¸¤ä¸ªå­—æ®µ\n\nå¦‚æœç­çº§ç¼–å·ä¸ºç©ºï¼Œé‚£å°±ä¸çŸ¥é“åœ¨è¿™é—´æ•™å®¤ä¸Šè¯¾çš„æ˜¯é‚£ä¸ªç­çº§\nå¦‚æœæ•™å®¤ç¼–å·ä¸ºç©ºï¼Œé‚£å°±ä¸çŸ¥é“æŸä¸ªç­çº§åˆ°åº•æ˜¯åœ¨å“ªé‡Œä¸Šè¯¾\n\nç”±å®é™…åœºæ™¯å¯è§ï¼Œè¿™ä¸¤ä¸ªå­—æ®µéƒ½ä¸å¯ä»¥ä¸ºç©ºï¼Œæ‰€ä»¥åœ¨å»ºè¡¨çš„æ—¶å€™å°±éœ€è¦è€ƒè™‘åˆ°è¿™ä¸€ç‚¹\ncreate table if not exists myclass(\tclass_name varchar(30) not null,    class_room varchar(30) not null)default charset=utf8;\n\nåˆ›å»ºäº†è¡¨ä¹‹åï¼Œå½“æˆ‘ä»¬å°è¯•å°†ä¸€ä¸ªNULLçš„å­—æ®µæ’å…¥ï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„æç¤ºï¼Œæ ‡è¯†æŸä¸€åˆ—ä¸èƒ½ä¸ºç©º\nMariaDB [hello]&gt; insert into myclass values (&#x27;510&#x27;,NULL);ERROR 1048 (23000): Column &#x27;class_room&#x27; cannot be null\n\nè€Œç©ºå­—ç¬¦ä¸²æ˜¯å¯ä»¥è¢«æ’å…¥çš„ï¼Œè¿™é‡Œåˆä¸€æ¬¡è¯´æ˜äº†æˆ‘ä»¬è®¤ä¸ºçš„ç©ºå’ŒNULLå¹¶ä¸ç›¸åŒï¼Œç©ºå­—ç¬¦ä¸²ä¸æ˜¯NULL\nMariaDB [hello]&gt; insert into myclass values (&#x27;510&#x27;,&#x27;&#x27;);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from myclass;+------------+------------+| class_name | class_room |+------------+------------+| 510        |            |+------------+------------+1 row in set (0.000 sec)\n\n2.é»˜è®¤å€¼defaultå½“æˆ‘ä»¬æ³¨å†ŒæŸäº›ç½‘ç«™çš„æ—¶å€™ï¼Œä¸€äº›ä¿¡æ¯ä¸å¡«ï¼Œå°±ä¼šè¢«ç³»ç»Ÿè®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚\næ¯”å¦‚ä½ ä¸é€‰æ‹©å¹´é¾„çš„æ—¶å€™ï¼Œç³»ç»Ÿå¯èƒ½å°±ä¼šæ˜¾ç¤ºä½ ä¸º0å²ï¼›å…¶ä»–ç”¨æˆ·çœ‹åˆ°ä½ çš„ä¸ªäººä¸»é¡µä¸Šæ˜¾ç¤ºçš„0å²ï¼Œå°±çŸ¥é“ä½ å¹¶æ²¡æœ‰å¡«å†™è‡ªå·±çš„çœŸå®å¹´é¾„ã€‚ï¼ˆè€Œå‰ç«¯å¼€å‘çš„æ—¶å€™ä¹Ÿå¯ä»¥å°†0è®¤ä½œæ²¡æœ‰å¡«å†™ï¼Œæ˜¾ç¤ºæˆâ€éšè—å¹´é¾„â€œï¼‰\nå†æ¯”å¦‚æˆ‘ä»¬çš„ç½‘ç«™ä¸Šæœ‰ä¸€ä¸ªç”¨æˆ·ç§¯åˆ†çš„æ•°å€¼ï¼Œå½“ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œç§¯åˆ†è‚¯å®šæ˜¯0ï¼ˆæš‚æ—¶ä¸è€ƒè™‘æ–°äººé€ç§¯åˆ†ä»€ä¹ˆçš„æ“ä½œï¼‰ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠç§¯åˆ†é‚£ä¸€åˆ—çš„é»˜è®¤å€¼è®¾ç½®æˆ0ï¼Œåœ¨æ’å…¥çš„æ—¶å€™å°±å¯ä»¥ä¸æ˜¾å¼æ’å…¥è¿™åˆ—çš„æ•°æ®ï¼›\nåœ¨MySQLä¸­ï¼ŒæŸä¸€åˆ—è®¾ç½®äº†é»˜è®¤å€¼åã€‚åœ¨insertæ—¶å€™å¦‚æœæ²¡æœ‰æŒ‡å®šè¿™ä¸€åˆ—çš„æ•°æ®ï¼Œé‚£å°±ä¼šé‡‡ç”¨é»˜è®¤å€¼ã€‚\ncreate table if not exists web_user(    name varchar(30) not null default &#x27;é»˜è®¤ç”¨æˆ·å&#x27;,    age tinyint not null default 0,    gender char(2) not null default &#x27;ç”·&#x27; );\n\nåˆ›å»ºå®Œæ¯•è¿™ä¸ªè¡¨ï¼Œå½“æˆ‘ä»¬æŸ¥çœ‹è¡¨ç»“æ„çš„æ—¶å€™ï¼Œå°±èƒ½çœ‹åˆ°æ˜¯å¦ä¸ºç©ºï¼Œä»¥åŠé»˜è®¤ç›´çš„ç›¸å…³å±æ€§\nMariaDB [hello]&gt; desc web_user;+--------+-------------+------+-----+-----------------+-------+| Field  | Type        | Null | Key | Default         | Extra |+--------+-------------+------+-----+-----------------+-------+| name   | varchar(30) | NO   |     | é»˜è®¤ç”¨æˆ·å      |       || age    | tinyint(4)  | NO   |     | 0               |       || gender | char(2)     | NO   |     | ç”·              |       |+--------+-------------+------+-----+-----------------+-------+3 rows in set (0.004 sec)\n\nç”±äºè¿™ä¸ªè¡¨é‡Œé¢çš„3ä¸ªå­—æ®µæˆ‘ä»¬éƒ½è®¾ç½®äº†åˆå§‹å€¼ï¼Œä½ ç”šè‡³å¯ä»¥ç›´æ¥å•¥éƒ½ä¸æŒ‡å®šåœ°æ’å…¥ä¸€ä¸ªæ•°æ®ï¼›ä¸‹æ–¹å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰åˆ—éƒ½è¢«è®¾ç½®æˆäº†è¯¥åˆ—çš„åˆå§‹å€¼ã€‚\nMariaDB [hello]&gt; insert into web_user values ();Query OK, 1 row affected (0.001 sec)MariaDB [hello]&gt; select * from web_user;+-----------------+-----+--------+| name            | age | gender |+-----------------+-----+--------+| é»˜è®¤ç”¨æˆ·å      |   0 | ç”·     |+-----------------+-----+--------+1 row in set (0.000 sec)\n\nå½“æˆ‘ä»¬æƒ³ä¸è®¾ç½®æŸä¸€åˆ—çš„å€¼çš„æ—¶å€™ï¼Œé»˜è®¤å€¼å°±èƒ½å¸®ä¸Šå¿™ã€‚\nè¿™é‡Œå…ˆç»™ä¸€ä¸ªé”™è¯¯çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬åªåœ¨valuesé‡Œé¢è®¾ç½®äº†ä¸¤ä¸ªå€¼ï¼Œç›®çš„æ˜¯è®©æ–°æ’å…¥çš„è¿™ä¸ªç”¨æˆ·çš„æ€§åˆ«é‡‡ç”¨é»˜è®¤å€¼ã€‚ä½†MySQLæŠ¥é”™äº†ï¼ŒæŠ¥é”™çš„ä¿¡æ¯æç¤ºæ˜¯valueçš„ä¸ªæ•°å’Œåˆ—çš„æ•°é‡ä¸ä¸€è‡´\nMariaDB [hello]&gt; insert into web_user values (&#x27;æå&#x27;,16);ERROR 1136 (21S01): Column count doesn&#x27;t match value count at row 1\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ’å…¥çš„æ—¶å€™ï¼Œæ²¡æœ‰æ˜¾ç¤ºçš„å‘Šè¯‰MySQLæˆ‘ä»¬è¿™ä¸¤ä¸ªå€¼åˆ°åº•æ˜¯å“ªä¸¤åˆ—çš„å€¼ã€‚æåæ˜¯ç»™nameåˆ—è¿˜æ˜¯ç»™genderåˆ—ï¼ŸMySQLæ²¡æœ‰åŠæ³•è‡ªä¸»å†³å®šï¼æ‰€ä»¥å¹²è„†æ‹’ç»æ’å…¥ã€‚\næ‰€ä»¥ï¼Œå½“æˆ‘ä»¬æƒ³è®©æŸä¸€åˆ—ä½¿ç”¨ç¼ºçœå€¼çš„æ—¶å€™ï¼Œå°±éœ€è¦å‘Šè¯‰MySQLï¼Œæˆ‘ä»¬å½“å‰æŒ‡å®šçš„valuesåˆ°åº•æ˜¯å“ªå‡ åˆ—çš„æ•°æ®\ninsert into web_user (name,age) values (&#x27;æå&#x27;,16);\n\nè¿™æ ·æ‰èƒ½æ’å…¥æˆåŠŸ\nMariaDB [hello]&gt; insert into web_user (name,age) values (&#x27;æå&#x27;,16);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from web_user;+-----------------+-----+--------+| name            | age | gender |+-----------------+-----+--------+| é»˜è®¤ç”¨æˆ·å      |   0 | ç”·     || æå            |  16 | ç”·     |+-----------------+-----+--------+2 rows in set (0.001 sec)\n\nå› ä¸ºè¿™é‡Œåšäº†å¯¹åˆ—åçš„æ˜¾ç¤ºæŒ‡å®šï¼Œæ‰€ä»¥é¡ºåºå¹¶ä¸ä¸€å®šéœ€è¦ä¾ç…§è¡¨ä¸­åˆ—åçš„é¡ºåºï¼Œæ¯”å¦‚ä¸‹æ–¹æˆ‘ä»¬åè¿‡æ¥ä¹Ÿæ˜¯å¯ä»¥æ’å…¥çš„ã€‚ä½†å¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œåœ¨æ’å…¥çš„æ—¶å€™çš„åˆ—åé¡ºåºåº”è¯¥å’Œè¡¨ä¸­åˆ—é¡ºåºä¿æŒä¸€è‡´ï¼\nMariaDB [hello]&gt; insert into web_user (age,name) values (18,&#x27;å°æ&#x27;);Query OK, 1 row affected (0.001 sec)MariaDB [hello]&gt; select * from web_user;+-----------------+-----+--------+| name            | age | gender |+-----------------+-----+--------+| é»˜è®¤ç”¨æˆ·å      |   0 | ç”·     || æå            |  16 | ç”·     || å°æ            |  18 | ç”·     |+-----------------+-----+--------+3 rows in set (0.001 sec)\n\nå¦‚æœæƒ³è®©ageåˆ—é‡‡ç”¨åˆå§‹å€¼ï¼Œé‚£å°±æ˜¯å¦‚ä¸‹çš„æ’å…¥ï¼›\nMariaDB [hello]&gt; insert into web_user (name,gender) values (&#x27;è²è²å…¬ä¸»&#x27;,&#x27;å¥³&#x27;);Query OK, 1 row affected (0.005 sec)\n\n2.1 é»˜è®¤å€¼å’ŒNULLéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤å€¼å’ŒNOT NULLå¹¶ä¸æ˜¯å¿…é¡»ä¸€èµ·ä½¿ç”¨çš„\n\nå½“æˆ‘ä»¬è®¾ç½®äº†é»˜è®¤å€¼ï¼Œä½†æ˜¯æ²¡æœ‰è®¾ç½®NOT NULLï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾å¼åœ°æ’å…¥NULL\né»˜è®¤å€¼ä¹Ÿå¯ä»¥è®¾ç½®æˆNULL\n\ncreate table if not exists test_user(    name varchar(30) not null default &#x27;é»˜è®¤ç”¨æˆ·å&#x27;,    age tinyint not null default 0,    gender char(2) default null);\n\nä½¿ç”¨å¦‚ä¸Šsqlåˆ›å»ºè¡¨ï¼Œæ•°æ®åº“æ²¡æœ‰æŠ¥é”™ï¼Œå³ä»£è¡¨æˆ‘ä»¬çš„è¯­æ³•æ˜¯è¢«æ”¯æŒçš„ã€‚å› ä¸ºæ€§åˆ«å¹¶ä¸éœ€è¦å‚ä¸è¿ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå½“æ€§åˆ«åˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œå°±æ˜¯æœªé€‰æ‹©æ€§åˆ«çš„é€‰é¡¹ã€‚ä¸è¿‡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç©ºå­—ç¬¦ä¸²ä½œä¸ºé»˜è®¤å€¼æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œç›¸æ¯”ä¹‹ä¸‹ç”¨ç©ºå­—ç¬¦ä¸²æ›´å¥½ï¼Œå› ä¸ºè¿™æ ·èƒ½ä¿è¯è¿™ä¸ªå­—æ®µçš„å€¼å§‹ç»ˆæ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸éœ€è¦å¯¹nullè¿›è¡Œç‰¹æ®Šå¤„ç†\n\ndefault null å’Œ not nullä¸èƒ½ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ˜¯è‚¯å®šçš„ï¼\n3.åˆ—æè¿°commentéœ€è¦æ³¨æ„ï¼Œåœ¨sqliteä¸­æ˜¯ä¸æ”¯æŒcommentçš„ï¼Œä¸åŒçš„æ•°æ®åº“å¯¹sqlå­—æ®µçš„æ”¯æŒä¼šæœ‰äº›è®¸çš„å·®è·ï¼Œè¯·æ ¹æ®ä½ ä½¿ç”¨çš„æ•°æ®åº“ä¸ºå‡†ã€‚æœ¬æ–‡æ‰€è¿°åŸºäºMySQLå’ŒMariaDBã€‚\næ‰€è°“çš„åˆ—æè¿°ï¼Œå°±æ˜¯å¯¹è¿™åˆ—åˆ°åº•æ˜¯å¹²å˜›çš„ä¸€ä¸ªè¯´æ˜ä¿¡æ¯ï¼Œç›¸å½“äºä»£ç çš„æ³¨é‡Šã€‚å…¶æœ¬èº«æ²¡æœ‰ä»»ä½•å«ä¹‰ï¼›\nåˆ—æ³¨é‡Šçš„ä¸»è¦ä½œç”¨ï¼Œå°±æ˜¯è®©æ‰€æœ‰ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“ï¼Œä½¿ç”¨è¿™å¼ è¡¨çš„äººéƒ½èƒ½ç†è§£è¿™ä¸ªå­—æ®µçš„ä½œç”¨ã€‚å…¶ä¸­è¿˜å¯ä»¥æ·»åŠ é¢å¤–çš„æ³¨é‡Šè¯´æ˜ï¼Œæ¥è®©ç¨‹åºå‘˜ç»Ÿä¸€åœ¨ä¸åŒæ¨¡å—çš„ä¸Šä¼ ä»£ç ä¸­è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚\næ¯”å¦‚æˆ‘ä»¬å°†ç¬¬äºŒç‚¹ä¸­å‡ºç°è¿‡çš„ç”¨æˆ·è¡¨æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼Œæ¯ä¸ªå­—æ®µéƒ½æ·»åŠ ä¸Šæ³¨é‡Š\ncreate table if not exists web_user(    name varchar(30) not null default &#x27;é»˜è®¤ç”¨æˆ·å&#x27; comment &#x27;ç”¨æˆ·å&#x27;,    age tinyint not null default 0 comment &#x27;ç”¨æˆ·å¹´é¾„&#x27;,    gender char(2) not null default &#x27;ç”·&#x27; comment &#x27;ç”¨æˆ·æ€§åˆ«&#x27; );\n\nå½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªsqlåˆ›å»ºäº†è¿™ä¸ªè¡¨åï¼Œå¦‚æœæƒ³æŸ¥è¯¢å­—æ®µçš„æ³¨é‡Šï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹åˆ›å»ºè¡¨æ—¶ä½¿ç”¨çš„å‘½ä»¤ï¼ˆå…¶ä¸­å°±åŒ…å«äº†è¡¨çš„æ³¨é‡Šï¼‰\nSHOW CREATE TABLE web_user;\n\næ˜¾ç¤ºå¦‚ä¸‹\nMariaDB [hello]&gt; SHOW CREATE TABLE web_user;+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table    | Create Table                                                                                                                                                                                                                                                               |+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| web_user | CREATE TABLE `web_user` (  `name` varchar(30) NOT NULL DEFAULT &#x27;é»˜è®¤ç”¨æˆ·å&#x27; COMMENT &#x27;ç”¨æˆ·å&#x27;,  `age` tinyint(4) NOT NULL DEFAULT 0 COMMENT &#x27;ç”¨æˆ·å¹´é¾„&#x27;,  `gender` char(2) NOT NULL DEFAULT &#x27;ç”·&#x27; COMMENT &#x27;ç”¨æˆ·æ€§åˆ«&#x27;) ENGINE=InnoDB DEFAULT CHARSET=utf8                  |+----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.000 sec)\n\nä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å±•ç¤ºæ‰€æœ‰åˆ—å’Œåˆ—çš„å±æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬æ³¨é‡Š\nSHOW FULL COLUMNS FROM web_user;\n\nMariaDB [hello]&gt; SHOW FULL COLUMNS FROM web_user;+--------+-------------+-----------------+------+-----+-----------------+-------+---------------------------------+--------------+| Field  | Type        | Collation       | Null | Key | Default         | Extra | Privileges                      | Comment      |+--------+-------------+-----------------+------+-----+-----------------+-------+---------------------------------+--------------+| name   | varchar(30) | utf8_general_ci | NO   |     | é»˜è®¤ç”¨æˆ·å      |       | select,insert,update,references | ç”¨æˆ·å       || age    | tinyint(4)  | NULL            | NO   |     | 0               |       | select,insert,update,references | ç”¨æˆ·å¹´é¾„     || gender | char(2)     | utf8_general_ci | NO   |     | ç”·              |       | select,insert,update,references | ç”¨æˆ·æ€§åˆ«     |+--------+-------------+-----------------+------+-----+-----------------+-------+---------------------------------+--------------+3 rows in set (0.002 sec)\n\néœ€è¦æ³¨æ„ï¼Œdescå‘½ä»¤æ˜¾ç¤ºçš„ç»“æœä¸­æ˜¯ä¸åŒ…å«åˆ—æ³¨é‡Šçš„\nMariaDB [hello]&gt; desc web_user;+--------+-------------+------+-----+-----------------+-------+| Field  | Type        | Null | Key | Default         | Extra |+--------+-------------+------+-----+-----------------+-------+| name   | varchar(30) | NO   |     | é»˜è®¤ç”¨æˆ·å      |       || age    | tinyint(4)  | NO   |     | 0               |       || gender | char(2)     | NO   |     | ç”·              |       |+--------+-------------+------+-----+-----------------+-------+3 rows in set (0.001 sec)\n\n\n4.zerofill4.1 æµ‹è¯•ç»“æœå…ˆæ¥ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªè¡¨\ncreate table if not exists test_int(\ta int not null,\tb int unsigned not null);\n\nåˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬æŸ¥çœ‹åˆ›å»ºè¿™ä¸ªè¡¨æ—¶ä½¿ç”¨çš„è¯­å¥ï¼Œä¼šå‘ç°åœ¨intä¹‹åå¤šäº†ä¸€ä¸ªæ‹¬å·ï¼Œé‡Œé¢è·Ÿäº†ä¸€ä¸ªæ•°å­—ã€‚\næˆ‘ä»¬çŸ¥é“åœ¨charå’Œvarcharé‡Œé¢ï¼Œè¿™ä¸ªæ‹¬å·æ˜¯ç”¨æ¥é™åˆ¶å­—ç¬¦ä¸²å­—ç¬¦é•¿åº¦çš„ï¼Œé‚£ä¹ˆåœ¨æ•´å½¢è¿™é‡Œçš„æ‹¬å·æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿ\nMariaDB [hello]&gt; show create table test_int;+----------+------------------------------------------------------------------------------------------------------------------------+| Table    | Create Table                                                                                                           |+----------+------------------------------------------------------------------------------------------------------------------------+| test_int | CREATE TABLE `test_int` (  `a` int(11) NOT NULL,  `b` int(10) unsigned NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+----------+------------------------------------------------------------------------------------------------------------------------+1 row in set (0.001 sec)\n\nå…ˆå¾€è¿™ä¸ªè¡¨å†…æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œå¹¶æŸ¥è¯¢æ˜¾ç¤ºå‡ºæ¥\nMariaDB [hello]&gt; insert into test_int values (3,1);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from test_int;+---+---+| a | b |+---+---+| 3 | 1 |+---+---+1 row in set (0.000 sec)\n\nå¦‚æœæˆ‘ä»¬æŠŠaåˆ—çš„å±æ€§è¿›è¡Œä¿®æ”¹ä¸ºå¦‚ä¸‹çš„å­—æ®µç±»å‹\nalter table test_int change a a int(5) unsigned zerofill;\n\nå†å»æŸ¥çœ‹åˆ›å»ºè¡¨çš„å‘½ä»¤ï¼Œæ­¤æ—¶ç»“æœå¦‚ä¸‹ï¼Œaåˆ—å·²ç»è¢«ä¿®æ”¹æˆäº†ä¿¡çš„å±æ€§\nMariaDB [hello]&gt; alter table test_int change a a int(5) unsigned zerofill;Query OK, 1 row affected (0.005 sec)               Records: 1  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; show create table test_int;+----------+---------------------------------------------------------------------------------------------------------------------------------------------+| Table    | Create Table                                                                                                                                |+----------+---------------------------------------------------------------------------------------------------------------------------------------------+| test_int | CREATE TABLE `test_int` (  `a` int(5) unsigned zerofill DEFAULT NULL,  `b` int(10) unsigned NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 |+----------+---------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.000 sec)\n\né‚£ä¹ˆè¿™ä¸ªæ‹¬å·é‡Œé¢çš„æ•°å­—ï¼Œå’Œzerofillæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ\nå†æ¬¡æŸ¥è¯¢æ­¤è¡¨ï¼Œä¼šå‘ç°åˆšåˆšæ’å…¥çš„æ•°æ®ï¼Œaåˆ—çš„3å˜æˆäº†00003ï¼\nMariaDB [hello]&gt; select * from test_int;+-------+---+| a     | b |+-------+---+| 00003 | 1 |+-------+---+1 row in set (0.000 sec)\n\n4.2 å‰è¡¥0æ­¤æ—¶è¿™ä¸ªå±æ€§çš„ä½œç”¨å°±å¾ˆæ˜ç¡®äº†ï¼Œå…¶ç”¨äºç»™æ•°å­—è¿›è¡Œå‰è¡¥0ï¼›è€Œ5å°±æ˜¯è§„å®šçš„å‰è¡¥0çš„é•¿åº¦ï¼Œè€Œä¸æ˜¯æ•°å­—çš„é•¿åº¦ï¼›å½“æ•°å­—çš„ä½æ•°å°äº5ä½ï¼Œå°±ä¼šè§¦å‘å‰è¡¥0ï¼›\nå¯ä»¥çœ‹åˆ°ï¼Œå³ä¾¿è¡¨ç»“æ„ä¸­å‡ºç°äº†int(5)ï¼Œæˆ‘ä»¬ä¾æ—§å¯ä»¥å¾€è¿™ä¸ªè¡¨é‡Œé¢æ’å…¥é•¿åº¦å¤§äº5ä½çš„æ•°å­—\nMariaDB [hello]&gt; insert into test_int values (12345678,1);Query OK, 1 row affected (0.005 sec)\n\næ‰€ä»¥è¿™ä¸ªæ‹¬å·å¹¶ä¸æ˜¯ç”¨æ¥é™åˆ¶intçš„é•¿åº¦çš„ï¼Œè€Œæ˜¯å½“ä¸€ä¸ªæ•°å­—å°äº5ä½çš„æ—¶å€™ï¼Œä¼šç»™è¿™ä¸ªæ•°å­—å‰è¡¥0\nMariaDB [hello]&gt; insert into test_int values (18,3);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from test_int;+----------+---+| a        | b |+----------+---+|    00003 | 1 || 12345678 | 1 ||    00018 | 3 |+----------+---+3 rows in set (0.001 sec)\n\nå¦‚æœå†æŠŠint(5) zerofillæ”¹æˆæ›´é•¿çš„æ•°å€¼ï¼Œå‰è¡¥0çš„é•¿åº¦å°±ä¼šå˜åŒ–\nalter table test_int change a a int(7) unsigned zerofill;\n\næ•ˆæœå¦‚ä¸‹ï¼Œå°‘äº7ä½çš„æ•°å­—éƒ½ä¼šå‰è¡¥0åˆ°ä¸ƒä½\nMariaDB [hello]&gt; alter table test_int change a a int(7) unsigned zerofill;Query OK, 0 rows affected (0.007 sec)Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; select * from test_int;+----------+---+| a        | b |+----------+---+|  0000003 | 1 || 12345678 | 1 ||  0000018 | 3 |+----------+---+3 rows in set (0.001 sec)\n\néœ€è¦æ³¨æ„ï¼Œint(n)çš„å±æ€§åªæœ‰å’Œzerofillä¸€èµ·ä½¿ç”¨ï¼Œæ‰ä¼šè§¦å‘å‰è¡¥0çš„æ“ä½œã€‚è¿™ä¾¿èƒ½è§£é‡Šä¸ºä½•æœ€åˆåˆ›å»ºçš„è¡¨é‡Œé¢æ˜¯int(11)ï¼Œä½†æ•°å­—å¹¶æ²¡æœ‰è¢«å‰è¡¥0ï¼›\nè€Œè¿™é‡Œçš„å‰è¡¥0ï¼Œåªæ˜¯ä¸€ä¸ªåœ¨MySQLå†…éƒ¨æ˜¾ç¤ºçš„ä¼˜åŒ–ï¼Œå®é™…ä¸Šå­˜å‚¨çš„ä¾æ—§æ˜¯æ•°å­—æœ¬èº«ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸Šè¡¨ä¸­æŸ¥è¯¢3ï¼Œæ˜¯å¯ä»¥ç›´æ¥æŸ¥å‡ºæ¥çš„ã€‚\nMariaDB [hello]&gt; select * from test_int where a = 3;+---------+---+| a       | b |+---------+---+| 0000003 | 1 |+---------+---+1 row in set (0.001 sec)\n\næ¯”å¦‚æˆ‘è¦å­˜å‚¨çš„æ•°å­—éƒ½æ˜¯5ä½çš„ï¼Œè®¾ç½®äº†å‰è¡¥0ï¼ŒæŸ¥è¯¢æ•´è¡¨æ—¶çœ‹åˆ°çš„æ ¼å¼åŒ–è¾“å‡ºçš„ç»“æœä¼šæ¯”æ²¡æœ‰å‰è¡¥0çš„ç»“æœçœ‹ä¸Šå»èˆ’æœå¾ˆå¤šã€‚\n4.3 ä¸ºä»€ä¹ˆintæ˜¯11ï¼Œæ— ç¬¦å·æ˜¯10ï¼Ÿåœ¨å‰é¢æŸ¥è¯¢é»˜è®¤çš„åˆ›å»ºè¡¨iè¯­å¥çš„æ—¶å€™ï¼Œä¼šå‘ç°MySQLç³»ç»Ÿé»˜è®¤ç»™intäº†11ä½ï¼Œæ— ç¬¦å·intæ˜¯10ä½\n\nè¿™æ˜¯å› ä¸º10ä½çš„é•¿åº¦å·²ç»èƒ½æ ‡è¯†intèŒƒå›´å†…çš„æ‰€æœ‰å€¼äº†ï¼Œè€Œæœ‰ç¬¦å·æ•´æ•°å¤šäº†ä¸€ä½ï¼Œæ˜¯ç”¨æ¥æ˜¾ç¤ºæ­£è´Ÿå·çš„ã€‚\n5.ä¸»é”®primary keyä¸»é”®æ˜¯ç”¨äºçº¦æŸå­—æ®µé‡Œé¢çš„æ•°æ®ï¼Œä¸èƒ½é‡å¤ï¼Œä¸èƒ½ä¸ºç©ºï¼›ä¸€å¼ è¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼ˆæˆ–è€…æ²¡æœ‰ï¼‰ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨æ•´å½¢ä½œä¸ºä¸»é”®ã€‚\nä¸»é”®æ˜¯ç”¨äºç¡®å®šè¡¨ä¸­æ¯ä¸€æ¡è®°å½•çš„å”¯ä¸€æ€§çš„ï¼Œå…¶å‘ŠçŸ¥äº†ä½¿ç”¨è€…ï¼Œè¦æƒ³å¾€è¿™ä¸ªè¡¨ä¸­æ’å…¥æ•°æ®ï¼Œå°±å¿…é¡»ä¿è¯ä¸»é”®çš„å€¼ä¸å†²çªã€‚\n5.1 ä¸»é”®çš„è®¾è®¡ç±»å‹ä»¥ä¸€ä¸ªç”¨æˆ·ç³»ç»Ÿä¸ºä¾‹\n\næˆ‘ä»¬å¯ä»¥æŠŠç”¨æˆ·åè®¾ç½®ä¸ºä¸»é”®ï¼Œå½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç”¨æˆ·åæ—¶ï¼Œæ‹’ç»æ­¤ç”¨æˆ·åå¹¶å‘ŠçŸ¥ç”¨æˆ·ï¼›\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ— å…³çš„æ•°å­—ä½œä¸ºä¸»é”®ï¼Œæ¯”å¦‚QQä¸­å°±ä½¿ç”¨äº†QQå·æ¥æ ‡è¯†ç”¨æˆ·å”¯ä¸€æ€§ï¼Œå¹¶ä¸è¦æ±‚ç”¨æˆ·çš„ç”¨æˆ·åä¸èƒ½ç›¸ç›¸åŒï¼ˆç°åœ¨ç»å¤§éƒ¨åˆ†èŠå¤©è½¯ä»¶éƒ½ä½¿ç”¨äº†è¿™ç§æ–¹å¼ï¼Œæ¯”å¦‚QQå’ŒKOOKï¼Œå¾®ä¿¡è™½ç„¶æ²¡æœ‰QQé‚£æ ·çš„å”¯ä¸€æ ‡è¯†ï¼Œä½†åå°è‚¯å®šä¹Ÿæ˜¯æœ‰ä¸»é”®ä½œä¸ºå”¯ä¸€æ€§æ ‡è¯†çš„ï¼‰ã€\næˆ‘ä»¬å¯ä»¥å°†å¤šåˆ—ç»„æˆå¤åˆä¸»é”®\n\n5.2 åˆ é™¤å’Œæ·»åŠ ä¸»é”®åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šä¸»é”®\n-- æ–¹æ³•1ï¼Œåœ¨å­—æ®µåæŒ‡æ˜create table test_pri_1(\tid int unsigned not null primary key,    name varchar(30) not null);-- æ–¹æ³•2ï¼Œåœ¨è¡¨çš„æœ€åæŒ‡æ˜create table test_pri_2(\tid int unsigned not null,    name varchar(30) not null,    primary key(id));\n\näºŒè€…éƒ½èƒ½æ‰§è¡ŒæˆåŠŸã€‚\nå¦å¤–ï¼Œä¸»é”®æœ¬èº«å°±æ˜¯ä¸èƒ½ä¸ºç©ºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸»é”®åˆ—çš„æ—¶å€™å¯ä»¥ä¸ç”¨å†™not null\nMariaDB [hello]&gt; create table test_pri_1(    -&gt; id int unsigned not null primary key,    -&gt;     name varchar(30) not null    -&gt; );Query OK, 0 rows affected (0.017 sec)MariaDB [hello]&gt; create table test_pri_2(    -&gt; id int unsigned not null,    -&gt;     name varchar(30) not null,    -&gt;     primary key(id)    -&gt; );Query OK, 0 rows affected (0.019 sec)\n\nè€Œä¸”è¡¨ç»“æ„ç›¸åŒï¼Œåœ¨idåˆ—çš„Keyå¤„å¯ä»¥çœ‹åˆ°PRIï¼Œå°±æ˜¯Primaryçš„ç¼©å†™ï¼Œä»£è¡¨idåˆ—æ˜¯ä¸»é”®\nMariaDB [hello]&gt; desc test_pri_1;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   | PRI | NULL    |       || name  | varchar(30)      | NO   |     | NULL    |       |+-------+------------------+------+-----+---------+-------+2 rows in set (0.001 sec)MariaDB [hello]&gt; desc test_pri_2;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   | PRI | NULL    |       || name  | varchar(30)      | NO   |     | NULL    |       |+-------+------------------+------+-----+---------+-------+2 rows in set (0.001 sec)\n\nå¦‚æœæ˜¯ä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¡¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾€é‡Œé¢è¿½åŠ ä¸»é”®æˆ–è€…åˆ é™¤ä¸»é”®\nalter table è¡¨å drop primary key;-- ç”¨äºåˆ é™¤ä¸»é”®åˆ—çš„ä¸»é”®å±æ€§ï¼Œå› ä¸ºä¸»é”®åˆ—åªèƒ½æœ‰ä¸€ä¸ª-- æ³¨æ„ï¼Œè¿™ä¸ªè¯­å¥ä¸ä¼šåˆ é™¤è¯¥åˆ—alter table è¡¨å add primary key(id);-- ç»™idåˆ—åŠ ä¸Šä¸»é”®å±æ€§ï¼ˆä½†æ˜¯IDåˆ—é‡Œé¢ä¸èƒ½æœ‰é‡å¤å€¼ï¼‰\n\næµ‹è¯•ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°idåˆ—çš„PRIå±æ€§æ²¡æœ‰äº†\nMariaDB [hello]&gt; alter table test_pri_1 drop primary key;Query OK, 0 rows affected (0.010 sec)              Records: 0  Duplicates: 0  Warnings: 0MariaDB [hello]&gt; desc test_pri_1;+-------+------------------+------+-----+---------+-------+| Field | Type             | Null | Key | Default | Extra |+-------+------------------+------+-----+---------+-------+| id    | int(10) unsigned | NO   |     | NULL    |       || name  | varchar(30)      | NO   |     | NULL    |       |+-------+------------------+------+-----+---------+-------+2 rows in set (0.002 sec)\n\nå½“æˆ‘ä»¬å¾€è¡¨é‡Œé¢æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœæƒ³å¾€ä¸»é”®åˆ—æ’å…¥ä¸€ä¸ªç›¸åŒçš„è®°å½•ï¼ŒMySQLä¼šæ‹’ç»æ’å…¥\nMariaDB [hello]&gt; insert into test_pri_2  values (1,&#x27;æå&#x27;);Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; insert into test_pri_2  values (1,&#x27;ææ˜&#x27;);ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;\n\n5.3 å¤åˆä¸»é”®ä¸€å¼ è¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†æ˜¯ä¸»é”®å¯ä»¥ä¸æ­¢ä¸€åˆ—ï¼›\nä»¥æˆ‘è‡ªå·±å†™çš„æ´»è·ƒåº¦ç»Ÿè®¡æœºå™¨äººä¸ºä¾‹ï¼Œæœºå™¨äººå¤„åœ¨ä¸åŒæœåŠ¡å™¨ä¸­ï¼Œä¼šæ”¶åˆ°ä¸åŒçš„æœåŠ¡å™¨IDï¼Œå’Œä¸åŒç”¨æˆ·çš„æ“ä½œï¼›ä¸ºäº†è®°å½•ä¸åŒæœåŠ¡å™¨çš„ä¸åŒç”¨æˆ·çš„æ´»è·ƒåº¦æƒ…å†µï¼Œåœ¨ç”¨æˆ·ç»Ÿè®¡è¡¨ä¸­ï¼Œéœ€è¦åŒæ—¶æœ‰æœåŠ¡å™¨IDå’Œç”¨æˆ·IDï¼›æ­¤æ—¶å°±ä¼šå‡ºç°ä¸€ä¸ªç”¨æˆ·åŠ å…¥äº†ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œè€Œè¿™ä¸¤ä¸ªæœåŠ¡å™¨éƒ½ä½¿ç”¨äº†æˆ‘è¿™ä¸ªæœºå™¨äººçš„æƒ…å†µã€‚åé¦ˆåˆ°è¡¨ä¸­ï¼Œå°±æ˜¯ä¸€ä¸ªç”¨æˆ·IDå‡ºç°äº†ä¸¤æ¬¡ï¼Œä½†å¯¹åº”çš„æœåŠ¡å™¨IDä¸åŒï¼›\nåœ¨è¿™ç§æƒ…å½¢ä¸‹ï¼Œè‚¯å®šæ˜¯ä¸èƒ½æŠŠç”¨æˆ·IDæˆ–æœåŠ¡å™¨IDå•ç‹¬è®¾ç½®æˆä¸»é”®çš„ã€‚æˆ‘ä»¬å°±å¯ä»¥æŠŠç”¨æˆ·IDå’ŒæœåŠ¡å™¨IDç»Ÿä¸€è®¾ç½®æˆç¬¦åˆä¸»é”®ï¼›\nè®¾ç½®äº†å¤åˆä¸»é”®åï¼Œæˆ‘ä»¬å¯ä»¥å‡ºç°ç›¸åŒçš„æœåŠ¡å™¨IDï¼Œå’Œç›¸åŒçš„ç”¨æˆ·IDã€‚ä½†åªèƒ½æ˜¯æŸä¸ªæœåŠ¡å™¨çš„æŸä¸ªç”¨æˆ·ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡æœåŠ¡å™¨IDå’Œç”¨æˆ·IDéƒ½ç›¸åŒçš„è®°å½•ã€‚è¿™ä¾¿æ˜¯å¤åˆä¸»é”®çš„ä½œç”¨ï¼\ncreate table user(\tguild_id int unsigned comment &#x27;æœåŠ¡å™¨ID&#x27;,\tuser_id int unsigned not null comment &#x27;ç”¨æˆ·ID&#x27;,\tscore tinyint unsigned not null default 0 comment &#x27;ç”¨æˆ·ç§¯åˆ†&#x27;,\tprimary key(guild_id, user_id) -- guild_id + user_id ä¸ºå¤åˆä¸»é”®);\n\næ­¤æ—¶æŸ¥çœ‹è¡¨ç»“æ„ï¼Œä¼šå‘ç°æœåŠ¡å™¨idå’Œç”¨æˆ·idçš„ä¸¤ä¸ªé”®å€¼ï¼Œåœ¨Keyé‡Œé¢éƒ½æœ‰PRIå±æ€§ï¼Œå³ä»–ä»¬éƒ½æ˜¯ä¸»é”®ï¼›\nè€Œä¸”ï¼Œå³ä¾¿æˆ‘ä»¬çš„guild_idæ²¡æœ‰æŒ‡å®šnot nullï¼Œå…¶çš„NULLå±æ€§ä¾æ—§æ˜¯NOã€‚å› ä¸ºä¸»é”®æ˜¯ä¸å…è®¸ä¸ºNULLçš„ï¼\nMariaDB [hello]&gt; create table user(    -&gt; guild_id int unsigned comment &#x27;æœåŠ¡å™¨ID&#x27;,    -&gt; user_id int unsigned not null comment &#x27;ç”¨æˆ·ID&#x27;,    -&gt; score tinyint unsigned not null default 0 comment &#x27;ç”¨æˆ·ç§¯åˆ†&#x27;,    -&gt; primary key(guild_id, user_id) -- guild_id + user_id ä¸ºå¤åˆä¸»é”®    -&gt; );Query OK, 0 rows affected (0.011 sec)MariaDB [hello]&gt; desc user;+----------+---------------------+------+-----+---------+-------+| Field    | Type                | Null | Key | Default | Extra |+----------+---------------------+------+-----+---------+-------+| guild_id | int(10) unsigned    | NO   | PRI | NULL    |       || user_id  | int(10) unsigned    | NO   | PRI | NULL    |       || score    | tinyint(3) unsigned | NO   |     | 0       |       |+----------+---------------------+------+-----+---------+-------+3 rows in set (0.003 sec)\n\nå½“æˆ‘ä»¬æ’å…¥æ—¶ï¼ŒæœåŠ¡å™¨idå’Œç”¨æˆ·idå¯ä»¥åœ¨å„è‡ªåˆ—ä¸­é‡å¤ã€‚\nMariaDB [hello]&gt; insert into user values (1,1,0);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; insert into user values (1,2,0);Query OK, 1 row affected (0.008 sec)MariaDB [hello]&gt; insert into user values (2,1,0);Query OK, 1 row affected (0.001 sec)\n\nä½†å¦‚æœä½ æƒ³åœ¨å·²ç»æœ‰æœåŠ¡å™¨idä¸º1ï¼Œç”¨æˆ·idä¸º1çš„è®°å½•çš„åŸºç¡€ä¸Šå†æ’å…¥ä¸€æ¡è¿™æ ·çš„è®°å½•ï¼Œé‚£å°±ä¼šæŠ¥é”™æ‹’ç»æ’å…¥\nMariaDB [hello]&gt; select * from user;+----------+---------+-------+| guild_id | user_id | score |+----------+---------+-------+|        1 |       1 |     0 ||        1 |       2 |     0 ||        2 |       1 |     0 |+----------+---------+-------+3 rows in set (0.000 sec)MariaDB [hello]&gt; insert into user values (1,1,10);ERROR 1062 (23000): Duplicate entry &#x27;1-1&#x27; for key &#x27;PRIMARY&#x27;\n\n6.è‡ªå¢auto_incrementè‡ªå¢ï¼Œäººå¦‚å…¶åï¼Œå°±æ˜¯MySQLä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¾€è¿™ä¸ªåˆ—æ·»åŠ æ•°æ®ã€‚æ¯”å¦‚ä¸€ä¸ªåºå·ï¼Œæ–°å¢ä¸€æ¡è®°å½•å°±ä¼šå°†åºå·åŠ ä¸€ï¼›è‡ªå¢å±æ€§åªèƒ½æ·»åŠ ç»™æ•´å½¢ï¼\nè‡ªå¢çš„åˆ—å¿…é¡»æ˜¯ä¸»é”®ï¼\n6.1 ä½¿ç”¨è‡ªå¢çš„ä½¿ç”¨åŠæ³•æ˜¯åœ¨åˆ›å»ºè¡¨çš„é”®å€¼åæ·»åŠ è¿™ä¸ªçº¦æŸ\ncreate table test_pri_3(\tid int unsigned auto_increment,    name varchar(30) not null,    primary key(id));\n\næŸ¥çœ‹è¡¨ç»“æ„ï¼Œå¯ä»¥çœ‹åˆ°idåˆ—æ˜¯ä¸»é”®ï¼Œéç©ºï¼Œä¸”å…·æœ‰è‡ªå¢å±æ€§\nMariaDB [hello]&gt; desc test_pri_3;+-------+------------------+------+-----+---------+----------------+| Field | Type             | Null | Key | Default | Extra          |+-------+------------------+------+-----+---------+----------------+| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment || name  | varchar(30)      | NO   |     | NULL    |                |+-------+------------------+------+-----+---------+----------------+2 rows in set (0.003 sec)\n\nç”±äºè‡ªå¢çš„åˆ—å¿…é¡»æ˜¯ä¸»é”®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å°†å…¶å’Œä¸»é”®åˆ†å¼€æ¥ä½¿ç”¨ï¼›\nå¦‚æœåœ¨è®¾ç½®è‡ªå¢çš„æ—¶å€™æ²¡æœ‰å°†è¿™åˆ—åŒæ—¶è®¾ç½®ä¸ºä¸»é”®ï¼Œé‚£ä¹ˆåˆ›å»ºè¡¨çš„æ—¶å€™å°±ä¼šæŠ¥é”™\nMariaDB [hello]&gt; create table test_pri_4(    -&gt; id int unsigned auto_increment,    -&gt;     name varchar(30) not null    -&gt; );ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key\n\nè®¾ç½®äº†è‡ªå¢ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ˜¾ç¤ºçš„æŒ‡å®šè¯¥åˆ—çš„å€¼ï¼›ä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼Œç›´æ¥æ’å…¥å…¶ä»–åˆ—çš„æ•°æ®ã€‚MySQLä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠå½“å‰è®°å½•+1ã€‚\nMariaDB [hello]&gt; insert into test_pri_3 values (1,&#x27;æå&#x27;);Query OK, 1 row affected (0.007 sec)MariaDB [hello]&gt; select * from test_pri_3;+----+--------+| id | name   |+----+--------+|  1 | æå   |+----+--------+1 row in set (0.001 sec)MariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;å°æ˜&#x27;);Query OK, 1 row affected (0.001 sec)MariaDB [hello]&gt; select * from test_pri_3;+----+--------+| id | name   |+----+--------+|  1 | æå   ||  2 | å°æ˜   |+----+--------+2 rows in set (0.000 sec)\n\nå¤šæ’å…¥å‡ æ¡æ•°æ®ï¼Œå¯ä»¥çœ‹åˆ°idåˆ—éƒ½æˆåŠŸè‡ªå¢äº†\nMariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;å°æ˜3&#x27;);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;å°æ˜5&#x27;);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from test_pri_3;+----+---------+| id | name    |+----+---------+|  1 | æå    ||  2 | å°æ˜    ||  3 | å°æ˜3   ||  4 | å°æ˜5   |+----+---------+4 rows in set (0.000 sec)\n\n6.2 è‡ªå¢æ˜¯æ€ä¹ˆåˆ¤æ–­å½“å‰æ‰€å¤„åºå·ä½ç½®çš„ï¼Ÿè‡ªå¢çš„é•¿åº¦æ˜¯æŒ‰æœ€å¤§çš„é‚£ä¸ªæ•°å­—å¼€å§‹è‡ªå¢çš„ï¼Ÿè¿˜æ˜¯è¯´æœ‰å…¶ä»–å¤„ç†æµç¨‹ï¼Ÿ\nå…ˆå°è¯•å¾€è¡¨é‡Œé¢ä¸»åŠ¨æ’å…¥ä¸€ä¸ª1000ä¸ºidçš„é”®å€¼ï¼Œç„¶åå†ä¸æŒ‡å®šidçš„æƒ…å†µä¸‹å†æ’å…¥ä¸¤è¡Œè®°å½•\nMariaDB [hello]&gt; insert into test_pri_3 values (1000,&#x27;test&#x27;);Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;test1&#x27;);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;test2&#x27;);Query OK, 1 row affected (0.001 sec)\n\næŸ¥è¯¢åˆ—è¡¨ï¼Œä¼šå‘ç°åœ¨è¿™1000ä¹‹åçš„çš„è®°å½•ï¼Œå…¨éƒ½æ˜¯ä»1000å¼€å§‹å¢åŠ çš„ã€‚\nMariaDB [hello]&gt; select * from test_pri_3;+------+---------+| id   | name    |+------+---------+|    1 | æå    ||    2 | å°æ˜    ||    3 | å°æ˜3   ||    4 | å°æ˜5   || 1000 | test    || 1001 | test1   || 1002 | test2   |+------+---------+7 rows in set (0.000 sec)\n\nè«éæ˜¯ä¾ç…§æœ€å¤§çš„idæ¥è¿›è¡Œè‡ªå¢çš„å—ï¼Ÿæˆ‘ä»¬å†æ¥è¯•è¯•ã€‚\nå…ˆæŠŠæœ€å¤§idçš„è®°å½•åˆ é™¤ï¼Œå†æ’å…¥ä¸€ä¸ªæ–°æ•°æ®\nMariaDB [hello]&gt; delete from test_pri_3 where id = 1002;Query OK, 1 row affected (0.007 sec)MariaDB [hello]&gt; insert into test_pri_3 (name) values (&#x27;test3&#x27;);Query OK, 1 row affected (0.006 sec)\n\nå†æ¬¡æŸ¥è¯¢ï¼Œä¼šå‘ç°è‡ªå¢çš„idæ˜¯1003ã€‚å¯è§å…¶å†…éƒ¨è®°å½•è¿‡ä¸€ä¸ªidçš„æœ€å¤§å€¼ï¼Œæ˜¯æŒ‰å†…éƒ¨ä¸€ä¸ªé¢å¤–çš„è®°å½•æ¥è¿›è¡Œè‡ªå¢çš„ï¼Œè€Œä¸æ˜¯åˆ¤æ–­è¡¨ä¸­idåˆ—çš„æœ€å¤§å€¼ï¼\nMariaDB [hello]&gt; select * from test_pri_3;+------+---------+| id   | name    |+------+---------+|    1 | æå    ||    2 | å°æ˜    ||    3 | å°æ˜3   ||    4 | å°æ˜5   || 1000 | test    || 1001 | test1   || 1003 | test3   |+------+---------+7 rows in set (0.001 sec)\n\né‚£è¿™ä¸ªé¢å¤–çš„è®°å½•åœ¨å“ªé‡Œå‘¢ï¼Ÿ\nshow create table test_pri_3;\n\nä½¿ç”¨å¦‚ä¸Šå‘½ä»¤æŸ¥çœ‹åˆ›å»ºè¡¨çš„sqlè¯­å¥ï¼Œä½ ä¼šå‘ç°ç´§è·Ÿåœ¨è¡¨ä¹‹åçš„ï¼Œå°±æœ‰ä¸€ä¸ªè‡ªå¢çš„å­—æ®µAUTO_INCREMENT=1004\nMariaDB [hello]&gt; show create table test_pri_3;+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table      | Create Table                                                                                                                                                                              |+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| test_pri_3 | CREATE TABLE `test_pri_3` (  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  `name` varchar(30) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=1004 DEFAULT CHARSET=utf8 |+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.000 sec)\n\nè¿™å°±æ˜¯MySQLä¸­å¯¹è‡ªå¢å­—æ®µå½“å‰å€¼çš„å®šä¹‰ï¼Œè¿™é‡Œå­˜æ”¾çš„å°±æ˜¯ä¸‹ä¸€ä¸ªæ’å…¥çš„è®°å½•ï¼Œå…¶idçš„è‡ªå¢å€¼ã€‚æ¯æ¬¡æ’å…¥ä¸€ä¸ªä¿¡çš„è®°å½•ï¼Œè¿™é‡Œçš„è‡ªå¢å€¼å°±ä¼šå¯¹åº”å˜æ¢ä¸ºä¸‹ä¸€ä¸ªè®°å½•åº”è¯¥æ˜¯å¤šå°‘çš„æ•°å€¼ï¼›\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è®©ä¸€ä¸ªç³»ç»Ÿçš„IDä»10001å¼€å§‹è‡ªå¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨åˆ›å»ºäº†è¡¨ä¹‹åï¼Œç›´æ¥å¾€è¡¨é‡Œé¢æ’å…¥ä¸€ä¸ªidä¸º10000çš„è®°å½•ã€‚åœ¨è¿™ä¹‹ååˆ›å»ºçš„å…¶ä»–è®°å½•ï¼Œidå°±ä¼šä»10001å¼€å§‹è‡ªå¢äº†ï¼\n\n6.3 ç´¢å¼•è®²åˆ°è¿™é‡Œï¼Œé¡ºå¸¦ä¸€æMySQLä¸­ç´¢å¼•çš„æ¦‚å¿µ\nç´¢å¼•ï¼š åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œç´¢å¼•æ˜¯ä¸€ç§å•ç‹¬çš„ã€ç‰©ç†çš„å¯¹æ•°æ®åº“è¡¨ä¸­ä¸€åˆ—æˆ–å¤šåˆ—çš„å€¼è¿›è¡Œæ’åºçš„ä¸€ç§å­˜å‚¨ç»“æ„ã€‚å®ƒæ˜¯æŸä¸ªè¡¨ä¸­ä¸€åˆ—æˆ–è‹¥å¹²åˆ—å€¼çš„é›†åˆå’Œç›¸åº”çš„æŒ‡å‘è¡¨ä¸­ç‰©ç†æ ‡è¯†è¿™äº›å€¼çš„æ•°æ®é¡µçš„é€»è¾‘æŒ‡é’ˆæ¸…å•ã€‚ \nç´¢å¼•çš„ä½œç”¨ç›¸å½“äºå›¾ä¹¦çš„ç›®å½•ï¼Œå¯ä»¥æ ¹æ®ç›®å½•ä¸­çš„é¡µç å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ã€‚ç´¢å¼•æä¾›æŒ‡å‘å­˜å‚¨åœ¨è¡¨çš„æŒ‡å®šåˆ—ä¸­çš„æ•°æ®å€¼çš„æŒ‡é’ˆï¼Œç„¶åæ ¹æ®æ‚¨æŒ‡å®šçš„æ’åºé¡ºåºå¯¹è¿™äº›æŒ‡é’ˆæ’åºã€‚ æ•°æ®åº“ä½¿ç”¨ç´¢å¼•ä»¥æ‰¾åˆ°ç‰¹å®šå€¼ï¼Œç„¶åé¡ºæŒ‡é’ˆæ‰¾åˆ°åŒ…å«è¯¥å€¼çš„è¡Œã€‚\nè¿™æ ·å¯ä»¥ä½¿å¯¹åº”äºè¡¨çš„SQLè¯­å¥æ‰§è¡Œå¾—æ›´å¿«ï¼Œå¯å¿«é€Ÿè®¿é—®æ•°æ®åº“è¡¨ä¸­çš„ç‰¹å®šä¿¡æ¯ã€‚\nç´¢å¼•æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç”¨ç©ºé—´æ¢æ—¶é—´çš„å¥—è·¯ã€‚åœ¨å½“å‰å¤šå¹¶å‘çš„ä¸šåŠ¡ä¸­ï¼Œæ‰§è¡Œé€Ÿåº¦è¿œæ¯”å ç”¨å†…å­˜ã€ç£ç›˜å¤šå°‘æ¥çš„æ›´é‡è¦ï¼\n7.å”¯ä¸€é”®uniqueå”¯ä¸€é”®å¯¹å­—æ®µçš„çº¦æŸï¼Œé‚£å°±æ˜¯è¿™ä¸€åˆ—çš„æ•°æ®éƒ½ä¸èƒ½å‡ºç°ç›¸åŒçš„ã€‚\nçœ‹èµ·æ¥å’Œä¸»é”®æœ‰ç‚¹ç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šå…¶æ˜¯ç‹¬ç«‹äºä¸»é”®ä¹‹å¤–çš„ä¸€ç§å”¯ä¸€æ€§çš„çº¦æŸã€‚å’Œä¸»é”®çš„åŒºåˆ«åœ¨äºï¼šå”¯ä¸€é”®å¯ä»¥ä¸ºNULL\nè¦çŸ¥é“ï¼Œä¸€ä¸ªè¡¨é‡Œé¢çš„ä¸»é”®åªèƒ½è®¾ç½®ä¸€ä¸ªã€‚å¤åˆä¸»é”®åœ¨æŸäº›æ—¶å€™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚äºæ˜¯MySQLå°±åœ¨ä¸»é”®ä¹‹å¤–ï¼Œé¢å¤–æä¾›äº†å”¯ä¸€é”®çš„çº¦æŸï¼Œè®©æˆ‘ä»¬å¯ä»¥ç»™å…¶ä»–åˆ—è®¾ç½®å”¯ä¸€æ€§ã€‚\nè‡³äºä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿå°±å¥½æ¯”ä¸€ä¸ªå…è´£å£°æ˜ï¼šæˆ‘è¿™åˆ—çš„æ•°æ®è®¾ç½®äº†å”¯ä¸€ï¼Œé‚£ä¹ˆå°±ä¸å¯èƒ½æ¥å—ä¸¤ä¸ªç›¸åŒçš„è®°å½•ï¼ˆæ¯”å¦‚ç”¨æˆ·è¡¨ä¸­ä¸¤ä¸ªäººå´æœ‰ç›¸åŒæ‰‹æœºå·ï¼Œæ˜¯ä¸åº”è¯¥çš„ï¼‰å¦‚æœä½ çš„ä¸šåŠ¡ä¸­å‡ºç°äº†æ‹’ç»æ’å…¥çš„æŠ¥é”™ï¼Œé‚£ä¹ˆå°±åº”è¯¥å»çœ‹ä¸šåŠ¡å¤„ç†ä»£ç ä¸­æ˜¯å“ªé‡Œæœ‰BUGï¼Œè€Œä¸åº”è¯¥æ€ªç½ªMySQLæ²¡æœ‰ç»´æŠ¤å”¯ä¸€æ€§æˆ–è€…æ‹’ç»è®°å½•çš„æ’å…¥ã€‚\n7.1 å•ç‹¬å”¯ä¸€é”®å‡è®¾æˆ‘æœ‰ä¸€ä¸ªå¹³å°ï¼Œç±»ä¼¼äºqqä¸€æ ·ä½¿ç”¨äº†ä¸€ä¸ªqqå·ä½œä¸ºç”¨æˆ·çš„ä¸»é”®ï¼›ä½†ä¸ºäº†å®åè®¤è¯ï¼Œæˆ‘ä»¬åˆè¦æ±‚ä¸€ä¸ªèº«ä»½è¯åªèƒ½æ³¨å†Œä¸€ä¸ªè´¦æˆ·ã€‚æ­¤æ—¶å°±æ— æ³•ç”¨å¤åˆä¸»é”®æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¤åˆä¸»é”®æ˜¯å…è®¸å…¶ä¸­æŸä¸€åˆ—æœ‰é‡å¤çš„ï¼›è€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ç”¨æˆ·è´¦æˆ·ç¼–å·å’Œç”¨æˆ·èº«ä»½è¯å·éƒ½ä¸èƒ½é‡å¤ï¼\n\nåŒæ—¶ï¼Œåœ¨ç”¨æˆ·çš„è”ç³»æ–¹å¼ä¸­ï¼Œä¸¤ä¸ªç”¨æˆ·çš„ç”µè¯å·ç ã€å¾®ä¿¡å·ä¹Ÿä¸åº”è¯¥å‡ºç°ç›¸åŒï¼Œå¦‚æœè¦æ·»åŠ ç”µè¯å·ç çš„é”®å€¼ï¼Œä¹Ÿå¯ä»¥å°†å…¶è®¾ç½®ä¸ºuniqueï¼\n\næ­¤æ—¶å°±å¯ä»¥å°†ç”¨æˆ·ç¼–å·ä½œä¸ºä¸»é”®ï¼Œç”¨æˆ·èº«åˆ†è¯å·è®¾ç½®uniqueä½œä¸ºå”¯ä¸€é”®ï¼›\ncreate table test_unique_1(\tno int unsigned not null primary key,\tname varchar(30) not null,    id_card varchar(30) not null unique );\n\næŸ¥çœ‹è¡¨ç»“æ„ï¼Œå”¯ä¸€é”®çš„åˆ—ï¼ŒKeyçš„çº¦æŸæ˜¯UNIï¼Œå³uniqueçš„ç¼©å†™\nMariaDB [hello]&gt; desc test_unique_1;+---------+------------------+------+-----+---------+-------+| Field   | Type             | Null | Key | Default | Extra |+---------+------------------+------+-----+---------+-------+| no      | int(10) unsigned | NO   | PRI | NULL    |       || name    | varchar(30)      | NO   |     | NULL    |       || id_card | varchar(30)      | NO   | UNI | NULL    |       |+---------+------------------+------+-----+---------+-------+3 rows in set (0.001 sec)\n\nå½“æˆ‘ä»¬å¾€è¿™ä¸ªè¡¨ä¸­çš„ä¸»é”®åˆ—æˆ–è€…id_cardåˆ—æ’å…¥ç›¸åŒè®°å½•æ—¶ï¼ŒMySQLéƒ½ä¼šæ‹’ç»æ’å…¥\nMariaDB [hello]&gt; insert into test_unique_1 values (1,&#x27;æå&#x27;,123456);Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; insert into test_unique_1 values (1,&#x27;æå&#x27;,1234567);ERROR 1062 (23000): Duplicate entry &#x27;1&#x27; for key &#x27;PRIMARY&#x27;MariaDB [hello]&gt; insert into test_unique_1 values (3,&#x27;å°æ˜&#x27;,123456);ERROR 1062 (23000): Duplicate entry &#x27;123456&#x27; for key &#x27;id_card&#x27;\n\n7.2 å¤åˆå”¯ä¸€é”®å”¯ä¸€é”®ä¹Ÿèƒ½è®¾ç½®å¤šåˆ—ï¼Œæ•ˆæœå’Œå¤åˆä¸»é”®ç›¸åŒï¼›è¿™é‡Œä¸å†è¯´æ˜\ncreate table user(\tuser_no int unsigned primary key auto_increment comment &#x27;ç”¨æˆ·ç¼–å· ä¸»é”®&#x27;,\tguild_id int unsigned comment &#x27;æœåŠ¡å™¨ID&#x27;,\tuser_id int unsigned not null comment &#x27;ç”¨æˆ·ID&#x27;,\tscore tinyint unsigned not null default 0 comment &#x27;ç”¨æˆ·ç§¯åˆ†&#x27;,\tunique(guild_id, user_id) -- guild_id + user_id ä¸ºå¤åˆå”¯ä¸€é”®);\n\nè¡¨ä¸­å¯¹guild_idå’Œuser_idçš„çº¦æŸå°±å˜æˆäº†MULï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼›\nå…¶ä¸­èƒ½è§‚å¯Ÿåˆ°ï¼Œguild_idå› ä¸ºæ²¡æœ‰è®¾ç½®not nullï¼Œå…¶NULLä¸€æ ä¸ºYESï¼Œä»£è¡¨è¿™åˆ—å¯ä»¥ä¸ºNULLï¼ˆå”¯ä¸€é”®å¯ä»¥ä¸ºNULLï¼Œä¸»é”®ä¸èƒ½ï¼‰\nè€ŒMULåˆ™ä»£è¡¨ç›®å‰å…è®¸å¤šè¡Œåœ¨æ­¤åˆ—å…·æœ‰ç›¸åŒçš„å€¼ï¼Œä½†guild_idå’Œuser_idéƒ½ç›¸åŒçš„ä¸¤è¡Œæ˜¯ä¸å…è®¸å­˜åœ¨çš„\nMariaDB [hello]&gt; desc user;+----------+---------------------+------+-----+---------+----------------+| Field    | Type                | Null | Key | Default | Extra          |+----------+---------------------+------+-----+---------+----------------+| user_no  | int(10) unsigned    | NO   | PRI | NULL    | auto_increment || guild_id | int(10) unsigned    | YES  | MUL | NULL    |                || user_id  | int(10) unsigned    | NO   |     | NULL    |                || score    | tinyint(3) unsigned | NO   |     | 0       |                |+----------+---------------------+------+-----+---------+----------------+4 rows in set (0.001 sec)\n\nå¦‚ä¸‹ï¼Œæœ€åçš„æ’å…¥å’Œç¬¬ä¸€æ¬¡çš„æ’å…¥ä¸­çš„guild_idå’Œuser_idç›¸åŒï¼Œäºæ˜¯å°±å‡ºç°äº†æ‹’ç»æ’å…¥çš„æŠ¥é”™\nMariaDB [hello]&gt; insert into user values (1,1,1,20);Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; insert into user values (2,1,2,21);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; insert into user values (3,2,3,22);Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; insert into user values (4,1,1,23);ERROR 1062 (23000): Duplicate entry &#x27;1-1&#x27; for key &#x27;guild_id&#x27;\n\n7.3 åœ¨MySQLä¸­MULã€PRIå’ŒUNIæ˜¯ä»€ä¹ˆï¼Ÿä»Mysql 5.7å®˜ç½‘æ–‡æ¡£å¯çŸ¥ï¼š\n\nå¦‚æœé”®æ˜¯PRIï¼Œåˆ™åˆ—æ˜¯ä¸»é”®æˆ–å¤šåˆ—ä¸»é”®ä¸­çš„åˆ—ä¹‹ä¸€ï¼›\nå¦‚æœé”®æ˜¯UNIï¼Œåˆ™è¯¥åˆ—æ˜¯å”¯ä¸€ç´¢å¼•çš„ç¬¬ä¸€åˆ—(å”¯ä¸€ç´¢å¼•å…è®¸å¤šä¸ªç©ºå€¼ï¼Œä½†å¯ä»¥é€šè¿‡æ£€æŸ¥NULLå­—æ®µæ¥åˆ¤æ–­è¯¥åˆ—æ˜¯å¦å…è®¸ç©º)ï¼›\nå¦‚æœé”®ä¸ºMULï¼Œåˆ™è¯¥åˆ—æ˜¯éå”¯ä¸€ç´¢å¼•çš„ç¬¬ä¸€åˆ—ï¼Œå…¶ä¸­å…è®¸åœ¨åˆ—ä¸­å¤šæ¬¡å‡ºç°ç»™å®šå€¼ï¼›\n\n8.å¤–é”®foreign key8.1 è¯´æ˜å¤–é”®æ˜¯ç”¨æ¥å®šä¹‰ä¸¤å¼ è¡¨ä¸­æŸäº›å­—æ®µçš„å…³ç³»ï¼Œå¹¶æ¥çº¦æŸè®°å½•çš„ï¼›\nåŸºç¡€è¯­æ³•å¦‚ä¸‹ï¼Œåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ä½¿ç”¨ã€‚éœ€è¦è®¾ç½®å¤–é”®çš„è¡¨æ˜¯ä»è¡¨ï¼\nALTER TABLE è¡¨å ADD CONSTRAINT å¤–é”®çº¦æŸå FOREIGN KEY (å¤–é”®åˆ—å) REFERENCES ä¸»è¡¨å(ä¸»è¡¨åˆ—å) [ON DELETE CASCADE] [ON UPDATE CASCADE];\n\n\nON DELETE CASCADE é€‰é¡¹ï¼Œå½“ä¸»è¡¨ä¸­çš„å­—æ®µåˆ é™¤ï¼Œä»è¡¨ä¸­çš„è®°å½•ä¹Ÿä¼šåˆ é™¤\nON UPDATE CASCADE é€‰é¡¹ï¼Œå½“ä¸»è¡¨ä¸­å­—æ®µæ›´æ–°ï¼Œä»è¡¨ä¸­è®°å½•ä¹Ÿå¾—æ›´æ–°\n\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œå­¦ç”Ÿè¡¨ä¸­æ¯ä¸ªå­¦ç”Ÿçš„ç­çº§ç¼–å·éƒ½å¯¹åº”äº†ç­çº§è¡¨ä¸­ç­çº§çš„idï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥å°†ç­çº§è¡¨çš„idè®¾ç½®ä¸ºå­¦ç”Ÿè¡¨ä¸­class_idçš„å¤–é”®ï¼›\nè™½ç„¶æˆ‘ä»¬å¯ä»¥å°†classè¡¨ä¸­çš„æ•°æ®ç›´æ¥æ’å…¥åˆ°å­¦ç”Ÿè¡¨é‡Œé¢ï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸åˆç†ã€‚å¦‚æœæˆ‘ä»¬é’ˆå¯¹ä¸€ä¸ªç­çº§ï¼Œæˆ–è€…é’ˆå¯¹ä¸€ä¸ªå­¦ç”Ÿçš„å­—æ®µæœ‰éå¸¸å¤šçš„è¯ï¼Œå°†è¿™ä¸¤å¼ è¡¨åˆèµ·æ¥æ˜¯éå¸¸ä¸æ–¹ä¾¿çš„ã€‚å› ä¸ºåŒä¸€ä¸ªç­çº§ä¼šæœ‰å¾ˆå¤šå­¦ç”Ÿï¼Œåˆå¹¶è¡¨ä¹‹åï¼Œå°±ç›¸å½“äºåŒä¸€ä¸ªç­çº§çš„å­¦ç”Ÿï¼Œä»–ä»¬çš„ç­çº§åˆ—çš„ä¿¡æ¯å…¨æ˜¯ç›¸ç­‰çš„ï¼Œè¿™å°±å­˜åœ¨äº†æ— æ„ä¹‰çš„èµ„æºå ç”¨ï¼ˆå†—ä½™ï¼‰ã€‚\nç›¸æ¯”ä¹‹ä¸‹ï¼Œåˆ†è¡¨äº†ä¹‹åï¼Œå†é‡‡ç”¨å¤–é”®çš„æ–¹å¼æ¥ç»‘å®šä¸¤ä¸ªå­—æ®µï¼Œæ˜¯æ›´å¥½çš„é€‰æ‹©ï¼\n\nåœ¨ä¸Šå›¾çš„æƒ…å†µä¸­ï¼Œmyclassæ˜¯ä¸»è¡¨ï¼Œstuæ˜¯ä¸€ä¸ªä»è¡¨ï¼›ä½ ä¹Ÿå¯ä»¥ä»å¤§å°è§„æ¨¡çš„é€»è¾‘æ¥ç†è§£ï¼Œåªæœ‰ç­çº§æ‰èƒ½åŒ…å«å­¦ç”Ÿï¼Œå­¦ç”Ÿä¸èƒ½åŒ…å«ç­çº§ï¼Œæ‰€ä»¥ç­çº§è¡¨æ›´â€œå¤§â€ï¼Œä¸ºä¸»è¡¨ï¼Œå­¦ç”Ÿè¡¨ä¸ºä»è¡¨ã€‚\næ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦å…ˆå¾€ä¸»è¡¨æ’å…¥ï¼Œå†å¾€ä»è¡¨æ’å…¥ã€‚å…ˆæœ‰ç­çº§ï¼Œæ‰èƒ½ç»™è¿™ä¸ªç­çº§æ·»åŠ å­¦ç”Ÿ\nå»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼Œä»è¡¨stuä¸­æ·»åŠ äº†å¤–é”®çº¦æŸå‘½ä»¤ã€‚\n-- ä¸»è¡¨ ç­çº§create table myclass (\tid int primary key comment &#x27;ç­çº§å·&#x27;,\tname varchar(30) not null comment &#x27;ç­çº§å&#x27;);-- ä»è¡¨ å­¦ç”Ÿcreate table stu (\tid int primary key,\tname varchar(30) not null comment &#x27;å­¦ç”Ÿå&#x27;,\tclass_id int,\tforeign key (class_id) references myclass(id) -- è®¾ç½®ä»è¡¨å¤–é”®çº¦æŸ);\n\n8.2 åŸºæœ¬æµ‹è¯•åˆ›å»ºå¥½è¡¨ä¹‹åï¼Œå…ˆæ¥çœ‹çœ‹å­¦ç”Ÿè¡¨içš„å±æ€§ï¼Œå¯ä»¥çœ‹åˆ°class_idè¡¨çš„keyæ˜¯ä¸€ä¸ªMULï¼Œå’Œå‰é¢è®¾ç½®å¤åˆå”¯ä¸€é”®çš„æ—¶å€™ç›¸åŒã€‚\nMariaDB [hello]&gt; desc stu;+----------+-------------+------+-----+---------+-------+| Field    | Type        | Null | Key | Default | Extra |+----------+-------------+------+-----+---------+-------+| id       | int(11)     | NO   | PRI | NULL    |       || name     | varchar(30) | NO   |     | NULL    |       || class_id | int(11)     | YES  | MUL | NULL    |       |+----------+-------------+------+-----+---------+-------+3 rows in set (0.001 sec)\n\nå½“æˆ‘ä»¬å°è¯•å¾€å­¦ç”Ÿè¡¨é‡Œé¢æ’å…¥ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œä¼šæŠ¥é”™\nMariaDB [hello]&gt; insert into stu values (1,&#x27;æå&#x27;,2);ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`hello`.`stu`, CONSTRAINT `stu_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `myclass` (`id`))\n\nè¿™æ˜¯å› ä¸ºä½ è®¾ç½®çš„è¿™ä¸ªè®°å½•ä¸­ï¼Œå­¦ç”Ÿçš„ç­çº§ç¼–å·2å‹æ ¹åœ¨ç­çº§è¡¨é‡Œé¢ä¸å­˜åœ¨ã€‚ä¸€ä¸ªä¸å­˜åœ¨çš„ç­çº§æ€ä¹ˆå¯ä»¥æœ‰å­¦ç”Ÿå‘¢ï¼Ÿæ‰€ä»¥è‡ªç„¶å°±æ‹’ç»äº†ä½ çš„æ’å…¥ã€‚\næ‰€ä»¥ï¼Œè¦æƒ³æ’å…¥å­¦ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯è¿™ä¸ªå­¦ç”Ÿçš„è®°å½•æ‰€åœ¨ç­çº§ï¼Œæ˜¯å­˜åœ¨äºç­çº§è¡¨é‡Œé¢çš„ï¼è¿™æ ·å°±å®ç°äº†å­¦ç”Ÿå’Œç­çº§Nå¯¹1çš„ç»‘å®šã€‚\nMariaDB [hello]&gt; insert into myclass values (1,&#x27;å°‘åç­&#x27;);Query OK, 1 row affected (0.002 sec)MariaDB [hello]&gt; insert into stu values (1,&#x27;æå&#x27;,1);Query OK, 1 row affected (0.005 sec)MariaDB [hello]&gt; select * from myclass;+----+-----------+| id | name      |+----+-----------+|  1 | å°‘åç­    |+----+-----------+1 row in set (0.001 sec)MariaDB [hello]&gt; select * from stu;+----+--------+----------+| id | name   | class_id |+----+--------+----------+|  1 | æå   |        1 |+----+--------+----------+1 row in set (0.000 sec)\n\nè¿™é‡Œæˆ‘åˆå¤šæ’å…¥äº†å‡ ä¸ªæ•°æ®\nMariaDB [hello]&gt; select * from stu;+----+-----------+----------+| id | name      | class_id |+----+-----------+----------+|  1 | æå      |        1 ||  2 | å°æ˜      |        1 ||  3 | å°æµ      |        1 ||  4 | å°æµ2     |        2 ||  5 | çŒªçŒªä¾     |        2 ||  6 | è‹—æ¡ä¿Š    |        2 |+----+-----------+----------+6 rows in set (0.000 sec)MariaDB [hello]&gt; select * from myclass;+----+-----------+| id | name      |+----+-----------+|  1 | å°‘åç­    ||  2 | ä½ å¥½ç­    |+----+-----------+2 rows in set (0.000 sec)\n\næ­¤æ—¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœè¿™ä¸ªç­çº§æœ‰å­¦ç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç­çº§åˆ æ‰å—ï¼Ÿ\nè€ƒè™‘çœ‹æ¥ï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ï¼šæ—¢ç„¶æ²¡æœ‰è¿™ä¸ªç­çº§ï¼Œä½ ä¸èƒ½æ’å…¥å¯¹åº”çš„å­¦ç”Ÿã€‚é‚£ä¹ˆè¿™ä¸ªç­çº§æœ‰å­¦ç”Ÿçš„æ—¶å€™ï¼Œä½ ä¹Ÿä¸åº”è¯¥æŠŠç­çº§åˆ é™¤ã€‚äºŒè€…æ˜¯ç›¸äº’çš„é€»è¾‘ï¼›åœ¨MySQLé‡Œé¢ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå½“ä¸€ä¸ªç­çº§æœ‰å¯¹åº”çš„å­¦ç”Ÿçš„æ—¶å€™ï¼Œæ˜¯ä¸å…è®¸åˆ é™¤çš„ã€‚\nMariaDB [hello]&gt; delete from myclass where id = 1;ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`hello`.`stu`, CONSTRAINT `stu_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `myclass` (`id`))\n\nåªæœ‰å½“è¿™ä¸ªç­çº§æ²¡æœ‰å­¦ç”Ÿäº†ï¼Œæ‰èƒ½ä»ç­çº§è¡¨ä¸­è¢«åˆ é™¤ï¼\nMariaDB [hello]&gt; delete from stu where class_id = 2;Query OK, 3 rows affected (0.005 sec)MariaDB [hello]&gt; delete from myclass where id = 2;Query OK, 1 row affected (0.006 sec)MariaDB [hello]&gt; \n\næ›´æ–°ç­çº§idåŒæ ·æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºåœ¨å­¦ç”Ÿè¡¨ä¸­æœ‰å­¦ç”Ÿç»‘å®šäº†è¿™ä¸ªç­çº§ã€‚MySQLå¹¶ä¸èƒ½åšåˆ°å¸®æˆ‘ä»¬ç›´æ¥æ›´æ–°æ‰€æœ‰å­¦ç”Ÿçš„ç­çº§å·ã€‚\nMariaDB [hello]&gt; update  myclass set id = 3 where name = &#x27;ä½ å¥½ç­&#x27;; ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`hello`.`stu`, CONSTRAINT `stu_ibfk_1` FOREIGN KEY (`class_id`) REFERENCES `myclass` (`id`))\n\n8.3 å¤–é”®çº¦æŸæ¦‚å¿µåœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å»ºç«‹ä¸¤ä¸ªæ²¡æœ‰å¤–é”®å…³ç³»çš„ç‹¬ç«‹è¡¨ï¼Œåœ¨ä»£ç å±‚è¿›è¡Œä¸¤è€…å…³ç³»çš„ç»´æŠ¤ã€‚\nä½†æ˜¯è¿™æ ·ï¼Œè¿™ä¸¤ä¸ªè¡¨çš„æ“ä½œä¾æ—§æ˜¯ç‹¬ç«‹çš„ï¼ŒMySQLæ˜¯ä¸çŸ¥é“è¿™ä¸¤ä¸ªè¡¨ä¹‹é—´æœ‰æ¯›çº¿å…³è”çš„ï¼›æ­¤æ—¶ä½ å°±å¯ä»¥å¾€ä¸å­˜åœ¨çš„ç­çº§é‡Œé¢æ’å­¦ç”Ÿï¼ŒæŠŠè¿˜æœ‰å­¦ç”Ÿçš„ç­çº§åˆ æ‰ï¼Œæœ€ç»ˆå°±ä¹±äº†å¥—äº†ï¼›\n\nè‡ªå·±ç»´æŠ¤ï¼šä¸¤ä¸ªè¡¨çš„ä¿¡æ¯æœ‰å…³è”\nåŠ ä¸Šå¤–é”®ï¼šMySQLç›´æ¥è¿›è¡Œçº¦æŸ\n\nä¸¤è€…åˆä¸€ï¼Œæ‰æ˜¯å¤–é”®çš„å®Œå…¨ä½“ï¼\n\nå¦‚æœåªåœ¨ä¸Šå±‚ä»£ç ä¸­çº¦æŸï¼Œç‰¹åˆ«æ˜¯å¤šç«¯åä½œå…¬ç”¨æ•°æ®åº“çš„æ—¶å€™ï¼Œææœ‰å¯èƒ½å› ä¸ºåŒæ–¹ç¨‹åºçŒ¿æ²Ÿé€šä¸åˆ°ä½è€Œå¯¼è‡´æ•°æ®åº“ä¸­äº§ç”Ÿæ— æ•ˆè®°å½•ã€‚å¤–é”®çš„å­˜åœ¨å¸®æˆ‘ä»¬é¿å…äº†è¿™ä¸ªåœ¨åä½œä¸­çš„æ²Ÿé€šé—®é¢˜ã€‚\n\næ‰€ä»¥æˆ‘ä»¬æ‰éœ€è¦åœ¨MySQLä¸­ï¼Œå°†è¿™ä¸¤ä¸ªè¡¨ä¹‹é—´å®šä¹‰å¤–é”®çš„çº¦æŸï¼Œè®©MySQLååŠ©æˆ‘ä»¬ç»´æŠ¤ä¸¤å¼ è¡¨ä¸­çš„æ•°æ®å…³ç³»ã€‚\næ³¨æ„ï¼šè™½ç„¶æ­¤æ—¶MySQLä¼šçº¦æŸæˆ‘ä»¬çš„æ“ä½œï¼Œä½†å®é™…ä¸Šçš„ä¸šåŠ¡æµç¨‹è¿˜æ˜¯éœ€è¦ç¨‹åºè¢åœ¨ä»£ç ä¸­å¤„ç†ã€‚æ¯”å¦‚ä¸è¦å¾€MySQLä¸­æ’å…¥ç­çº§ä¸å­˜åœ¨çš„å­¦ç”Ÿï¼ˆMySQLåªä¼šæ‹’ç»æ’å…¥ï¼Œå¹¶ä¸èƒ½å¸®ä½ æŠŠç­çº§ç»™ä¿®æ­£ï¼‰\n8.4 alteræ·»åŠ å¤–é”®çº¦æŸç»™å®šå¦‚ä¸‹ä¸¤å¼ è¡¨\n-- æ‰€æœ‰äº§å“çš„æ€»è¡¨create table Product(    maker char(2),    model integer unsigned primary key,    type varchar(10) NOT NULL);-- å°å¼ç”µè„‘çš„è¡¨create table PC(    model integer unsigned primary key,    speed float(4,2),    ram integer unsigned,    hd integer unsigned,    price integer unsigned);\n\nå¾ˆæ˜æ˜¾ï¼ŒPCå’ŒProductè¡¨ä¸­éƒ½æœ‰ä¸€ä¸ªmodelå­—æ®µï¼Œè¿™ä¸¤ä¸ªå­—æ®µå°±æ„æˆäº†å¤–é”®çº¦æŸå…³ç³»ã€‚ä¸”äº§å“æ€»è¡¨Productåœ¨è§„æ¨¡ä¸Šå¤§äºå°å¼ç”µè„‘è¡¨PCï¼Œæ‰€ä»¥Productè¡¨æ˜¯ä¸»è¡¨ï¼ŒPCè¡¨æ˜¯ä»è¡¨ï¼Œæˆ‘ä»¬åº”è¯¥ç»™PCè¡¨ä¸Šå¤–é”®çº¦æŸï¼Œä¸ºäº†é˜²æ­¢æ•°æ®ä¸€è‡´æ€§å‡ºç°é”™è¯¯ã€‚\n\næ¯”å¦‚PCè¡¨ä¸­å‡ºç°äº†ä¸€ä¸ªä¸å­˜åœ¨äºProductè¡¨ä¸­çš„ç”µè„‘äº§å“ï¼Œè‚¯å®šæ˜¯ä¸å¯¹åŠ²çš„\n\nä½¿ç”¨alter tableå‘½ä»¤ï¼Œåœ¨è¡¨å·²ç»åˆ›å»ºä¹‹åä¿®æ”¹å®ƒçš„å¤–é”®çº¦æŸã€‚\nALTER TABLE PCADD CONSTRAINT cpc -- å¤–é”®çº¦æŸçš„åå­—ä¸ºcpcFOREIGN KEY (model) REFERENCES Product(model);\n\n\nå¦‚ä¸‹ï¼Œæ“ä½œæˆåŠŸï¼ŒPCè¡¨é‡Œé¢çš„æ‰€æœ‰æ•°æ®éƒ½ç¬¦åˆè¿™ä¸ªå¤–é”®çº¦æŸï¼Œæ²¡æœ‰å‡ºé”™ã€‚\nMariaDB [products]&gt; ALTER TABLE PC    -&gt; ADD CONSTRAINT cpc -- å¤–é”®çº¦æŸçš„åå­—ä¸ºcpc    -&gt; FOREIGN KEY (model) REFERENCES Product(model);Query OK, 13 rows affected (0.019 sec)             Records: 13  Duplicates: 0  Warnings: 0\n\næ­¤æ—¶å¾€PCé‡Œé¢æ’å…¥ä¸€ä¸ªProductä¸­ä¸å­˜åœ¨çš„é¢å¤–è®°å½•\nINSERT INTO PC (model, speed, ram, hd, price) VALUES (1050, 2.66, 1024, 250, 2114);\n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œæ— æ³•æ’å…¥æˆåŠŸã€‚\nMariaDB [products]&gt; INSERT INTO PC (model, speed, ram, hd, price) VALUES    -&gt; (1050, 2.66, 1024, 250, 2114);ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`products`.`PC`, CONSTRAINT `cpc` FOREIGN KEY (`model`) REFERENCES `Product` (`model`))\n\nåˆ é™¤å¤–é”®çº¦æŸä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œä»PCè¡¨ä¸­åˆ é™¤å¤–é”®çº¦æŸcpc\nALTER TABLE PCDROP FOREIGN KEY cpc;\n\nåˆ é™¤äº†ä¹‹åï¼Œæˆ‘ä»¬å†æ¬¡å°è¯•å¾€PCé‡Œé¢æ’å…¥ä¸€ä¸ªProductä¸­ä¸å­˜åœ¨çš„é¢å¤–çš„è®°å½•\nINSERT INTO PC (model, speed, ram, hd, price) VALUES (1050, 2.66, 1024, 250, 2114);\n\nè¿™ä¸€æ¬¡æ’å…¥å°±æˆåŠŸäº†\nMariaDB [products]&gt; INSERT INTO PC (model, speed, ram, hd, price)     -&gt; VALUES (1050, 2.66, 1024, 250, 2114);Query OK, 1 row affected (0.002 sec)\n\nç»™å·²æœ‰æ•°æ®å†²çªçš„è¡¨æ·»åŠ å¤–é”®å¦‚æœæˆ‘ä»¬å°è¯•ç»™ä¸¤ä¸ªå¤–é”®å­˜åœ¨å†²çªçš„è¡¨æ·»åŠ ä¸Šå¤–é”®ä¼šå¦‚ä½•ï¼Ÿ\nALTER TABLE PCADD CONSTRAINT cpc -- å¤–é”®çº¦æŸçš„åå­—ä¸ºcpcFOREIGN KEY (model) REFERENCES Product(model);\n\nmysqlæŠ¥å‡ºè­¦å‘Šï¼Œä¸å…è®¸æ’å…¥ï¼ŒæŠ¥é”™çš„æ„æ€æ˜¯å¤–é”®æ£€æŸ¥å¤±è´¥ï¼Œç¬¦åˆé¢„æœŸï¼\nMariaDB [products]&gt; ALTER TABLE PC    -&gt; ADD CONSTRAINT cpc -- å¤–é”®çº¦æŸçš„åå­—ä¸ºcpc    -&gt; FOREIGN KEY (model) REFERENCES Product(model);ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`products`.`#sql-alter-42184-25`, CONSTRAINT `cpc` FOREIGN KEY (`model`) REFERENCES `Product` (`model`))\n\n9.æ•°æ®æ£€æŸ¥Checkå‰é¢æåˆ°çš„éƒ½æ˜¯mysqlç»™æˆ‘ä»¬æä¾›çš„â€œå›ºå®šæ–¹å¼â€çš„çº¦æŸç±»å‹ï¼Œè€Œcheckåˆ™å¯ä»¥ç”±ç”¨æˆ·æ¥è‡ªä¸»é€‰æ‹©çº¦æŸçš„æ¡ä»¶ï¼Œå³å¯¹æ’å…¥è¡¨çš„æ•°æ®è¿›è¡Œæœ‰æ•ˆæ€§æ£€æŸ¥ã€‚\n\næŸäº›æ•°æ®æ˜¯å¦å¤§äº0ï¼Ÿ\næŸäº›æ•°æ®æ˜¯å¦åœ¨æŸä¸ªèŒƒå›´å†…ï¼Ÿ\næŸäº›æ•°æ®æ˜¯å¦ç¬¦åˆæŸä¸ªæ¡ä»¶ï¼Ÿ\n\n9.1 æ•°æ®èŒƒå›´æ£€æŸ¥ç»™å®šå¦‚ä¸‹è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªç¬”è®°æœ¬çš„è¡¨ï¼Œå†…éƒ¨åŒ…å«äº†ä¸€å°ç¬”è®°æœ¬çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚\ncreate table Laptop(    model integer unsigned primary key,    speed float(4,2),    ram integer unsigned,    hd integer unsigned,    screen float(4,2),    price integer unsigned);\n\næˆ‘ä»¬éœ€è¦æ£€æŸ¥çš„æ˜¯ç¬”è®°æœ¬çš„å±å¹•å¤§å°screenæ˜¯å¦åœ¨[13,22]ä¹‹é—´ï¼Œå¦‚æœä¸åœ¨ï¼Œåˆ™ä»£è¡¨æœ‰é—®é¢˜ï¼Œä¸æ˜¯æˆ‘ä»¬éœ€è¦å”®å–çš„ç¬”è®°æœ¬ã€‚\nå¯¹åº”çš„çº¦æŸæ¡ä»¶å¦‚ä¸‹ï¼Œé€šè¿‡ANDé“¾æ¥ä¸åŒæ¡ä»¶ï¼Œå¹¶ç”¨æ‹¬å·å°†å®Œæ•´çš„åˆ¤æ–­æ¡ä»¶åŒ…æ‹¬èµ·æ¥ã€‚\nALTER TABLE LaptopADD CONSTRAINT con_screenCHECK (screen &gt;= 13 AND screen &lt;= 22);\n\næ·»åŠ è¯¥çº¦æŸæ¡ä»¶åï¼Œå°è¯•æ’å…¥ä¸€ä¸ªå±å¹•å¤§å°ä¸º25å¯¸çš„ç¬”è®°æœ¬ï¼Œæ•°æ®åº“æ‹’ç»æ’å…¥ã€‚\nMariaDB [products]&gt; INSERT INTO Laptop (model, speed, ram, hd, screen, price)     -&gt; VALUES (2050, 2, 2048, 240, 25, 3673);ERROR 4025 (23000): CONSTRAINT `con_screen` failed for `products`.`Laptop`\n\n9.2 æ•°æ®æ˜¯å¦åœ¨ç»™å®šé€‰é¡¹ä¸­ç»™å®šå¦‚ä¸‹è¡¨ï¼Œå¸Œæœ›printerçš„typeåªèƒ½æ˜¯laseræˆ–è€…ink-jetå…¶ä¸­ä¸€ç§\ncreate table Printer(    model integer unsigned primary key,    color char(6) NOT NULL,    type varchar(10) NOT NULL,    price integer unsigned);\n\nå› ä¸ºå¯é€‰é¡¹åªæœ‰ä¸¤ä¸ªï¼Œå¯ä»¥ç›´æ¥ç”¨oræ¥é“¾æ¥ä¸¤ä¸ªç›¸ç­‰åˆ¤æ–­ï¼Œä½†æ›´å¥½çš„åŠæ³•æ˜¯é€šè¿‡inæ¥åˆ¤æ–­typeæ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚\nALTER TABLE PrinterADD CONSTRAINT con_typeCHECK (type in (&#x27;laser&#x27;,&#x27;ink-jet&#x27;));\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå·²æœ‰æ•°æ®ç¬¦åˆè¯¥æ¡ä»¶\nMariaDB [products]&gt; ALTER TABLE Printer    -&gt; ADD CONSTRAINT con_type    -&gt; CHECK (type in (&#x27;laser&#x27;,&#x27;ink-jet&#x27;));Query OK, 7 rows affected (0.021 sec)Records: 7  Duplicates: 0  Warnings: 0\n\nå°è¯•æ’å…¥éæ³•æ•°æ®\ninsert into Printer value (3050,&#x27;black&#x27;,&#x27;test&#x27;,1000);\n\næ•°æ®åº“æ‹’ç»æ’å…¥\nMariaDB [products]&gt; insert into Printer value (3050,&#x27;black&#x27;,&#x27;test&#x27;,1000);ERROR 4025 (23000): CONSTRAINT `con_type` failed for `products`.`Printer`\n\n9.3 å¤šåˆ—æ•°æ®åˆ¤æ–­create table PC(    model integer unsigned primary key,    speed float(4,2),    ram integer unsigned,    hd integer unsigned,    price integer unsigned);\n\nç»™å®šPCè¡¨ï¼Œè¦æ±‚ç¡¬ç›˜å®¹é‡hdå°äº100çš„ç”µè„‘ä»·æ ¼priceä¸èƒ½è¶…è¿‡600ã€‚\nç›´æ¥ç”¨ANDé“¾æ¥è¿™ä¸¤ä¸ªæ¡ä»¶æ˜¯ä¸è¡Œçš„ï¼Œä¼šå˜æˆåªå…è®¸hdå°äº100ä¸”ä»·æ ¼ä¸è¶…è¿‡600çš„PCæ’å…¥ã€‚\nè¿™æ¬¡çš„æ¡ä»¶éœ€è¦è¿›è¡Œé€»è¾‘ä¿®æ”¹ï¼š\n\nhdå°äº100ä¸”ä»·æ ¼å¤§äº600çš„PCæ‹’ç»æ’å…¥\né‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè®©ä¸Šè¿°æ¡ä»¶æ—¶ä¸ºfalse\nhdå¤§äº100çš„ç”µè„‘ï¼Œä»·æ ¼éšä¾¿ï¼ˆhd&gt;&#x3D;100)\nhdå°äº100çš„ç”µè„‘ï¼Œä»·æ ¼å¿…é¡»å°äº100ï¼ˆprice&lt;&#x3D;600ï¼‰\nç”¨oré“¾æ¥\n\n\n\nå¯¹åº”è¡¨è¾¾å¼å¦‚ä¸‹\nALTER TABLE PCADD CONSTRAINT con_price CHECK (hd &gt;= 100 OR price &lt;= 600);\n\nç›®æ ‡è¾¾æˆï¼\nMariaDB [products]&gt; ALTER TABLE PC    -&gt; ADD CONSTRAINT con_price CHECK (hd &gt;= 100 OR price &lt;= 600);Query OK, 13 rows affected (0.013 sec)Records: 13  Duplicates: 0  Warnings: 0\n\nå°è¯•æ›´æ–°ä¸€ä¸ªè®°å½•ï¼Œå°†ç¡¬ç›˜å®¹é‡ä¸º80çš„ï¼Œä»·æ ¼æ”¹æˆ700ã€‚æ•°æ®åº“æ‹’ç»æ­¤æ›´æ–°ã€‚\nMariaDB [products]&gt; UPDATE PC SET price = 700 WHERE model = 1013;ERROR 4025 (23000): CONSTRAINT `con_price` failed for `products`.`PC`\n\næ’å…¥ä¸€ä¸ªæ­£å¸¸è®°å½•ï¼Œå¯ä»¥æ’å…¥ï¼ˆè¿™é‡Œå…ˆæ“ä½œProductè¡¨ï¼Œæ˜¯å› ä¸ºä¹‹å‰è®¾ç½®äº†Productå’ŒPCçš„å¤–é”®çº¦æŸï¼‰\nMariaDB [products]&gt; INSERT INTO Product values (&#x27;tt&#x27;,1014,&#x27;PC&#x27;);Query OK, 1 row affected (0.002 sec)MariaDB [products]&gt; INSERT INTO PC (model, speed, ram, hd, price) VALUES (1014, 3.2, 8, 120, 700);Query OK, 1 row affected (0.002 sec)\nThe endåŸºç¡€çš„çº¦æŸæ“ä½œå°±æ˜¯è¿™äº›äº†ï¼Œæœ‰å…¶ä»–ä¼šç”¨åˆ°çš„ï¼Œæ—¥åå†æ–°å¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€é¡¹ç›®ã€‘è§†é¢‘ç‚¹æ’­é¡¹ç›®çš„è®°å½•","url":"/posts/4231483510/","content":"1.ç”¨æˆ·å¯†ç åŠ å¯†ç®—æ³•åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘æ‰“ç®—ç”¨md5åŠ ç›æ¥å­˜æ”¾ç”¨æˆ·çš„å¯†ç ï¼›åœ¨æŸ¥æ‰¾èµ„æ–™çš„æ—¶å€™ï¼Œå‘ç°äº†MD5ç®—æ³•ä¸å†é€‚ç”¨äºç”¨æˆ·å¯†ç åŠ å¯†çš„è¨€è®ºï¼Œäºæ˜¯é—®èµ·äº†GPTã€‚\næ„Ÿè§‰è¿™éƒ¨åˆ†é¢è¯•çš„æ—¶å€™å¯èƒ½ä¼šæ¶‰åŠï¼Œå¹²è„†è®°å½•ä¸‹æ¥å§ï¼\n1.1 ä»€ä¹ˆæ˜¯MD5ï¼ŸMD5ï¼ˆMessage Digest Algorithm 5ï¼‰æ˜¯ä¸€ç§å¸¸ç”¨çš„å“ˆå¸Œç®—æ³•ï¼Œç”¨äºå°†ä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºå›ºå®šé•¿åº¦ï¼ˆ128ä½æˆ–16å­—èŠ‚ï¼‰çš„å“ˆå¸Œå€¼ã€‚\nMD5 å“ˆå¸Œå€¼é€šå¸¸ä»¥åå…­è¿›åˆ¶å­—ç¬¦ä¸²çš„å½¢å¼è¡¨ç¤ºã€‚ç”±äºæ¯ä¸ªå­—èŠ‚å¯ä»¥ç”¨ä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦è¡¨ç¤ºï¼Œå› æ­¤ MD5 å“ˆå¸Œå€¼çš„é•¿åº¦ä¸º 32 ä¸ªå­—ç¬¦ï¼ˆ16å­—èŠ‚ * 2ï¼‰ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ MD5 å“ˆå¸Œå€¼å›ºå®šä¸º 128 ä½ï¼ˆ16å­—èŠ‚ï¼‰ï¼Œä½†å¹¶ä¸æ„å‘³ç€è¾“å…¥æ•°æ®çš„é•¿åº¦ä¸å“ˆå¸Œå€¼é•¿åº¦ç›¸åŒã€‚æ— è®ºè¾“å…¥æ•°æ®çš„é•¿åº¦æ˜¯å¤šå°‘ï¼ŒMD5 å“ˆå¸Œå€¼å§‹ç»ˆæ˜¯å›ºå®šçš„ 128 ä½é•¿åº¦ã€‚\n1.2 MD5çš„ç¼ºé™·ï¼ŸMD5 ç®—æ³•å­˜åœ¨å®‰å…¨æ¼æ´ä¸»è¦æ˜¯ç”±äºå…¶è®¾è®¡å’Œæ€§è´¨çš„é™åˆ¶ã€‚\né¦–å…ˆï¼ŒMD5 ç®—æ³•æ˜¯ä¸€ä¸ªå•å‘å“ˆå¸Œå‡½æ•°ï¼Œå³æ— æ³•ä»å“ˆå¸Œå€¼é€†æ¨å‡ºåŸå§‹è¾“å…¥æ•°æ®ã€‚ç„¶è€Œï¼Œç ”ç©¶äººå‘˜å‘ç°ï¼Œé€šè¿‡å¯¹ä¸åŒçš„è¾“å…¥æ•°æ®è®¡ç®—ç›¸åŒçš„ MD5 å“ˆå¸Œå€¼ï¼ˆä¹Ÿç§°ä¸ºå“ˆå¸Œç¢°æ’ï¼‰ï¼Œå¯ä»¥å¯¼è‡´å®‰å…¨é—®é¢˜ã€‚è¿™æ„å‘³ç€æ”»å‡»è€…å¯ä»¥é€šè¿‡å¯»æ‰¾å…·æœ‰ç›¸åŒ MD5 å“ˆå¸Œå€¼çš„ä¸¤ä¸ªä¸åŒè¾“å…¥ï¼Œæ¥ä¼ªé€ æ•°æ®æˆ–ç»•è¿‡éªŒè¯æœºåˆ¶ã€‚\nå…¶æ¬¡ï¼ŒMD5 çš„è¾“å‡ºé•¿åº¦è¾ƒçŸ­ï¼Œåªæœ‰ 128 ä½ï¼ˆ16 å­—èŠ‚ï¼‰ã€‚è¿™ç§è¾ƒçŸ­çš„å“ˆå¸Œå€¼ä½¿å¾—ç¢°æ’çš„å¯èƒ½æ€§æ›´é«˜ã€‚éšç€è®¡ç®—èƒ½åŠ›çš„æå‡ï¼Œé€šè¿‡ç©·ä¸¾è®¡ç®—æˆ–ä½¿ç”¨ä¸“é—¨çš„ç¢°æ’æ”»å‡»ç®—æ³•ï¼Œæ›´å®¹æ˜“æ‰¾åˆ°ä¸¤ä¸ªä¸åŒçš„è¾“å…¥æ•°æ®äº§ç”Ÿç›¸åŒçš„ MD5 å“ˆå¸Œå€¼ã€‚\nå› æ­¤ï¼ŒåŸºäºè¿™äº›å®‰å…¨æ¼æ´ï¼ŒMD5 å·²è¢«è¯å®ä¸å†é€‚ç”¨äºè¯¸å¦‚å¯†ç å­˜å‚¨ç­‰å…³é”®å®‰å…¨åœºæ™¯ã€‚ç›¸åï¼Œåº”è¯¥é€‰æ‹©æ›´å¼ºå¤§ä¸”æŠ—ç¢°æ’æ€§æ›´å¥½çš„å“ˆå¸Œç®—æ³•ï¼Œä¾‹å¦‚ SHA-256 æˆ– SHA-3 ç­‰ç®—æ³•ï¼Œä»¥æä¾›æ›´é«˜çº§åˆ«çš„æ•°æ®å®Œæ•´æ€§å’Œå®‰å…¨æ€§ä¿æŠ¤ã€‚\n1.3 SHA256çš„ä¼˜åŠ¿SHA-256 ç›¸å¯¹äº MD5 å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦çš„ä¼˜åŠ¿ï¼š\n\nå®‰å…¨æ€§ï¼šMD5 å·²ç»è¢«è¯å®å­˜åœ¨å®‰å…¨æ¼æ´ï¼Œå®¹æ˜“å—åˆ°ç¢°æ’æ”»å‡»å’Œé¢„æ˜ åƒæ”»å‡»ã€‚ç›¸åï¼ŒSHA-256 æ˜¯ä¸€ç§æ›´ä¸ºå®‰å…¨çš„å“ˆå¸Œç®—æ³•ï¼Œç›®å‰æ²¡æœ‰å·²çŸ¥çš„æœ‰æ•ˆæ”»å‡»æ–¹æ³•ï¼Œèƒ½å¤Ÿä»å“ˆå¸Œå€¼é€†æ¨å‡ºåŸå§‹è¾“å…¥æ•°æ®æˆ–æ‰¾åˆ°ç¢°æ’ã€‚\nå“ˆå¸Œé•¿åº¦ï¼šMD5 çš„å“ˆå¸Œé•¿åº¦ä¸º 128 ä½ï¼ˆ16 å­—èŠ‚ï¼‰ï¼Œè€Œ SHA-256 çš„å“ˆå¸Œé•¿åº¦ä¸º 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰ï¼Œæ˜æ˜¾æ›´é•¿ã€‚æ›´é•¿çš„å“ˆå¸Œé•¿åº¦å¢åŠ äº†å“ˆå¸Œç¢°æ’çš„éš¾åº¦ï¼Œä½¿å¾—æ‰¾åˆ°ä¸¤ä¸ªä¸åŒçš„è¾“å…¥äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼çš„æ¦‚ç‡å¤§å¤§é™ä½ã€‚\næŠ—ç¢°æ’æ€§ï¼šSHA-256 æä¾›äº†æ›´å¼ºå¤§çš„æŠ—ç¢°æ’æ€§ï¼Œå³è¾“å…¥æ•°æ®çš„å¾®å°å˜åŒ–ä¹Ÿä¼šå¯¼è‡´è¾“å‡ºå“ˆå¸Œå€¼çš„è¾ƒå¤§å˜åŒ–ã€‚è¿™æ„å‘³ç€æ— æ³•é€šè¿‡å¾®å°çš„ä¿®æ”¹æ¥ç”Ÿæˆå…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„ä¸åŒè¾“å…¥æ•°æ®ã€‚\n\nç»¼ä¸Šæ‰€è¿°ï¼ŒSHA-256 ç›¸å¯¹äº MD5 å…·æœ‰æ›´é«˜çš„å®‰å…¨æ€§å’ŒæŠ—ç¢°æ’æ€§ï¼Œå› æ­¤åœ¨å®‰å…¨æ•æ„Ÿçš„åœºæ™¯ä¸­ï¼Œåº”è¯¥ä½¿ç”¨ SHA-256 æˆ–å…¶ä»–æ›´å¼ºå¤§çš„å“ˆå¸Œç®—æ³•æ¥ä¿æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚\n\nç„¶è€Œï¼Œå¯¹äºéå®‰å…¨ç›¸å…³çš„ç®€å•æ ¡éªŒå’Œä¸€äº›éå…³é”®åº”ç”¨ï¼ŒMD5 ä»ç„¶æ˜¯ä¸€ä¸ªå¿«é€Ÿä¸”æœ‰æ•ˆçš„å“ˆå¸Œç®—æ³•é€‰æ‹©ã€‚\n\n2.å‰ç«¯é”™ä½230810ä¸‹åˆæ”¹äº†ä¸€æ•´ä¸ªä¸‹åˆçš„å‰ç«¯ï¼Œä¸€ç›´ç”¨çš„ç«ç‹ã€‚å›¾æ ‡å’Œè¾“å…¥æ¡†çš„æ ·å¼éƒ½æ˜¯ç›´æ¥æ‰‹æ’¸çš„ï¼Œè€—æ—¶è¾ƒé•¿ã€‚\n\nåŸä»¥ä¸ºå¤§åŠŸå‘Šæˆäº†ã€‚ç»“æœæŠŠurlå¾€edgeä¸€ç²˜è´´ï¼Œå®Œè›‹äº†ï¼Œå›¾æ ‡ç›´æ¥å…¨éƒ¨é”™ä½\n\nåæ¥å’¨è¯¢äº†å‰ç«¯å¤§ä½¬æ‰çŸ¥é“ï¼Œä¸åŒæµè§ˆå™¨å¯¹ç›¸åŒä»£ç çš„æ¸²æŸ“å¤„ç†å¯èƒ½æœ‰æ‰€ä¸åŒã€‚å¦‚æœç”¨å‰ç«¯æ¡†æ¶bootstrapå°±èƒ½è¾ƒå¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nè€Œæˆ‘çš„é¡¹ç›®æ‰€ä½¿ç”¨çš„æ¨¡æ¿é‡Œé¢ï¼Œä¹Ÿç¡®å®å¼•å…¥äº†bootstrapï¼Œä½†æˆ‘ä¸å¤ªä¼šä½¿ç”¨â€¦â€¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","é¡¹ç›®å¼€å‘è®°å½•"],"tags":["Linux","mysql","Cpp"]},{"title":"ã€SQLã€‘è¿‡ç¨‹åŒ–SQL","url":"/posts/3614589784/","content":"è¯¾ç¨‹åŸºäº é«˜ç­‰æ•™è‚²å‡ºç‰ˆç¤¾ã€Šæ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºï¼ˆç¬¬6ç‰ˆï¼‰ã€‹ç‹çŠã€æœå°å‹‡ã€é™ˆçº¢\nè¿‡ç¨‹åŒ–SQL\nç›¸å…³å†…å®¹åœ¨ä¹¦æœ¬çš„ P250\n\nè¿‡ç¨‹åŒ–SQLæ˜¯å¯¹åŸºæœ¬SQLçš„æ‰©å±•ï¼Œåœ¨å…¶åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›æ§åˆ¶è¿‡ç¨‹çš„è¯­å¥ã€‚\nè¿‡ç¨‹åŒ–SQLçš„åŸºæœ¬ç»“æ„æ˜¯å—ï¼Œæ¯ä¸ªå—å¯ä»¥åŒ…å«å®šä¹‰éƒ¨åˆ†å’Œæ‰§è¡Œéƒ¨åˆ†ï¼Œå—ä¸å—ä¹‹é—´å¯ä»¥ç›¸äº’åµŒå¥—ï¼›\n-- å®šä¹‰éƒ¨åˆ†DECLAREå˜é‡ã€å¸¸é‡ã€æ¸¸æ ‡ã€å¼‚å¸¸ç­‰-- æ‰§è¡Œéƒ¨åˆ†BEGIN\t-- SQLè¯­å¥ã€è¿‡ç¨‹åŒ–SQLæ§åˆ¶è¯­å¥\tEXCEPTION -- é‡åˆ°ä¸èƒ½ç»§ç»­æ‰§è¡Œæƒ…å†µç§°ä¸ºå¼‚å¸¸\t-- å¼‚å¸¸å¤„ç†éƒ¨åˆ†END;\n\nå˜é‡å®šä¹‰-- å˜é‡å®šä¹‰å˜é‡å æ•°æ®ç±»å‹ [[NOT NULL]:=åˆå€¼è¡¨è¾¾å¼]å˜é‡å æ•°æ®ç±»å‹ [[NOT NULL] åˆå€¼è¡¨è¾¾å¼]-- å˜é‡èµ‹å€¼å˜é‡å:=è¡¨è¾¾å¼-- å¸¸é‡å®šä¹‰å¸¸é‡å æ•°æ®ç±»å‹ CONSTANT:=å¸¸é‡è¡¨è¾¾å¼ -- å¸¸é‡å¿…é¡»è¦åœ¨å®šä¹‰çš„æ—¶å€™èµ‹å€¼ï¼Œä¸”åç»­ä¸å¯ä»¥ä¿®æ”¹\n\næµç¨‹æ§åˆ¶æ¡ä»¶åˆ¤æ–­IFè¯­å¥å¯ä»¥åµŒå¥—\nIF æ¡ä»¶ THEN\t-- æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡Œçš„æ“ä½œEND IF;IF æ¡ä»¶ THEN\t-- æ¡ä»¶ä¸ºçœŸæ—¶æ‰§è¡ŒELSE\t-- æ¡ä»¶ä¸ºå‡æ—¶æ‰§è¡ŒEND IF;\n\nå¾ªç¯æ§åˆ¶è¯­å¥æ­»å¾ªç¯LOOP\t-- å¾ªç¯ä½“END LOOP;\n\nè¿™ä¸ªå¾ªç¯ä½“æ²¡æœ‰ç±»ä¼¼while(æ¡ä»¶)â€‹ä¸€æ ·çš„å¾ªç¯ç»ˆæ­¢ï¼Œè€Œæ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œä¸€èˆ¬çš„å…³ç³»å‹æ•°æ®åº“éƒ½ä¼šæä¾›EXIT\\BREAK\\LEAVEç­‰è¯­å¥æ¥é€€å‡ºè¿™ä¸ªå¾ªç¯\nWHILEå¾ªç¯WHILE æ¡ä»¶ LOOP\t-- å¾ªç¯ä½“END LOOP;\n\nè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ç¼–ç¨‹è¯­è¨€ä¸­å¸¸ç”¨çš„WHILEå¾ªç¯äº†ï¼Œæ²¡å•¥å¥½è¯´çš„ã€‚è€Œä¸”åŒæ ·æ”¯æŒæå‰é€€å‡ºçš„è¯­å¥ã€‚\nFOR-LOOPFOR count IN [REVERSE] bound1 .. bound2 LOOP\t-- å¾ªç¯ä½“END LOOP;\n\nè¿™ä¸ªå¾ªç¯ä½“çš„åŸºæœ¬æ­¥éª¤ï¼šå°†countå˜é‡è®¾ç½®ä¸ºå¾ªç¯ä¸‹ç•Œbound1ï¼Œæ£€æŸ¥ä»–æ˜¯å¦å°äºä¸Šç•Œbound2ï¼Œæ¯æ¬¡å¾ªç¯count+1ï¼›\nå½“æŒ‡å®šREVERSEçš„æ—¶å€™ï¼Œå°†countè®¾ç½®ä¸ºbound2ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦å¤§äºä¸‹ç•Œbound1ï¼ˆåå‘è¿­ä»£ï¼‰ï¼Œæ¯æ¬¡å¾ªç¯count-1ï¼›\n\nä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œéå†PCè¡¨ä¸­çš„priceå­—æ®µï¼Œå¹¶å°†å…¶speedå¤§äºpspeedéƒ¨åˆ†æ±‚å’Œ\nFOR getprice IN (select price from PC where speed&gt;pspeed) LOOP   mCount:= mCount +1;   total:= total+ getprice; END LOOP;\n\næ¸¸æ ‡çš„æ¦‚å¿µå’Œä½¿ç”¨è¿‡ç¨‹\næ¸¸æ ‡çš„æ¦‚å¿µ ã€ä½¿ç”¨è¿‡ç¨‹   p253\n\nåœ¨è¿‡ç¨‹åŒ–SQLä¸­ï¼Œå¦‚æœSELECTè¯­å¥åªè¿”å›ä¸€æ¡è®°å½•ï¼Œå¯ä»¥å°†è¯¥ç»“æœå­˜æ”¾åˆ°å˜é‡ä¸­ï¼Œå½“æŸ¥è¯¢è¿”å›å¤šæ¡è®°å½•çš„æ—¶å€™ï¼Œå°±è¦ä½¿ç”¨ç”¨è¡¨å¯¹ç»“æœé›†è¿›è¡Œå¤„ç†ã€‚\nä¸€ä¸ªæ¸¸æ ‡å’Œä¸€ä¸ªSQLè¯­å¥ç›¸å…³è”ã€‚\nä½¿ç”¨æ¸¸æ ‡çš„æ­¥éª¤1.å£°æ˜&#x2F;å®šä¹‰æ¸¸æ ‡DECLARE æ¸¸æ ‡å [(å‚æ•°1 æ•°æ®ç±»å‹,å‚æ•°2 æ•°æ®ç±»å‹,...)]CURSOR FOR SELECT è¯­å¥;\n\nå®šä¹‰æ¸¸æ ‡ä»…ä»…æ˜¯ä¸€æ¡è¯´æ˜æ€§è¯­å¥ï¼Œè¿™é‡Œçš„SELECTè¯­å¥å¹¶æ²¡æœ‰è¢«ç«‹åˆ»æ‰§è¡Œ\n2.æ‰“å¼€æ¸¸æ ‡OPEN æ¸¸æ ‡å [(å‚æ•°1 æ•°æ®ç±»å‹,å‚æ•°2 æ•°æ®ç±»å‹,...)];\n\næ‰“å¼€æ¸¸æ ‡çš„æ—¶å€™ä¼šæ‰§è¡Œå¯¹åº”çš„SELECTè¯­å¥ï¼Œå¹¶æŠŠæŸ¥è¯¢ç»“æœå–åˆ°ç¼“å†²åŒºä¸­ã€‚æ­¤æ—¶æ¸¸æ ‡å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ŒæŒ‡é’ˆæŒ‡å‘æŸ¥è¯¢ç»“æœé›†ä¸­çš„ç¬¬ä¸€æ¡è®°å½•ã€‚\n3.ä½¿ç”¨æ¸¸æ ‡æ¨è¿›æ¸¸æ ‡å¹¶è¯»å–å½“å‰è®°å½•\nFETCH æ¸¸æ ‡å INTO å˜é‡1[,å˜é‡2,....];\n\nå…¶ä¸­å˜é‡å¿…é¡»å’ŒSELECTè¯­å¥ä¸­çš„ç›®æ ‡åˆ—è¡¨è¾¾å¼å…·æœ‰ä¸€ä¸€å¯¹åº”å…³ç³»\nç”¨FETCHè¯­å¥å°†æ¸¸æ ‡æŒ‡é’ˆå‘å‰æ¨è¿›ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶å°†ç¼“å†²åŒºä¸­çš„è®°å½•å–å‡ºé€è‡³å˜é‡ä¾›è¿‡ç¨‹åŒ–SQLè¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚é€šè¿‡å†…ç¯æŒ‡å‘FETCHè¯­å¥é€æ¡å–èµ°ç»“æœé›†ä¸­çš„è¡Œè¿›è¡Œå¤„ç†ã€‚\n4.å…³é—­æ¸¸æ ‡é‡Šæ”¾ç»“æœé›†å ç”¨çš„ç¼“å†²åŒºå’Œå…¶ä»–èµ„æº\nCLOSE æ¸¸æ ‡å;\n\nè¢«å…³é—­çš„æ¸¸æ ‡å¯ä»¥è¢«å†æ¬¡æ‰“å¼€ï¼Œæ­¤æ—¶ä¼šé‡æ–°å†æ¬¡æ‰§è¡Œä¸€æ¬¡SELECTè¯­å¥ï¼Œä¸¤æ¬¡çš„ç»“æœå¹¶ä¸ä¸€å®šç›¸åŒã€‚\nå­˜å‚¨è¿‡ç¨‹ï¼ˆè‡ªå®šä¹‰å‡½æ•°ï¼‰åˆ›å»ºå­˜å‚¨è¿‡ç¨‹CREATE OR REPLACE PROCEDURE è¿‡ç¨‹å([\t[IN|OUT|INOUT] å‚æ•°1 æ•°æ®ç±»å‹,\t[IN|OUT|INOUT] å‚æ•°2 æ•°æ®ç±»å‹,\t...])AS &lt;è¿‡ç¨‹å—SQL&gt;; -- è¿™é‡Œçš„è¿‡ç¨‹å—SQLå°±æ˜¯ä¸Šé¢æåˆ°çš„è¿‡ç¨‹åŒ–SQLçš„ä¸€ä¸ªå—\n\nå­˜å‚¨è¿‡ç¨‹æä¾›äº†IN,OUT,INOUTä¸‰ç§å‚æ•°æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯å…¥å‚ã€è¾“å‡ºå‚æ•°ã€è¾“å…¥è¾“å‡ºå‚æ•°ã€‚ä¸å£°æ˜å‚æ•°ç±»å‹çš„æ—¶å€™é»˜è®¤æ˜¯INç±»å‹ã€‚\n\nè¾“å…¥å‚æ•°éœ€è¦æ‰‹åŠ¨ä¼ å…¥\nè¾“å‡ºå‚æ•°ä¸éœ€è¦æ‰‹åŠ¨ä¼ å…¥ï¼Œè€Œæ˜¯ä»¥è¿”å›å€¼è¿”å›\nè¾“å…¥è¾“å‡ºå‚æ•°è°ƒç”¨çš„æ—¶å€™éœ€è¦ä¼ å…¥åˆå€¼ï¼Œè¿˜ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å€¼\n\nå¦‚æœæ˜¯è¾“å‡ºå‚æ•°ï¼Œåˆ™éœ€è¦ä¸€ä¸ªå˜é‡æ¥å­˜æ”¾è¾“å‡ºåçš„å€¼ã€‚\nç¤ºä¾‹-å®éªŒ2ä¸­çš„é¢˜ç›®åœ¨PCè¡¨ä¸­ï¼Œå°†æŸä¸€é€Ÿåº¦ï¼ˆæ•´å‹ï¼‰ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œæ±‚å¤§äºè¯¥é€Ÿåº¦çš„PCæœºçš„å¹³å‡ä»·æ ¼ã€‚\n-- realæ˜¯æµ®ç‚¹å‹CREATE OR REPLACE FUNCTION Meanprice (in pspeed int, out mean real) AS $$DECLARE getprice INT; mCount INT; total INT;BEGIN\tmean:=0; mCount:=0;total:=0; \tFOR getprice IN select price from PC \twhere speed&gt;pspeed\tLOOP\t   mCount:= mCount +1;\t   total:= total+ getprice; \tEND LOOP;\tmean:= total/ mCount; END;$$ LANGUAGE plpgsql;\n\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹CALL [PROCEDURE] è¿‡ç¨‹å([å‚æ•°1,å‚æ•°2,....]);PERFROM [PROCEDURE] è¿‡ç¨‹å([å‚æ•°1,å‚æ•°2,....]); -- ç­‰ä»·\n\nä¿®æ”¹å­˜å‚¨è¿‡ç¨‹å­˜å‚¨è¿‡ç¨‹å¯ä»¥é‡å‘½å\nALTER PROCEDURE è¿‡ç¨‹å RENAME TO æ–°åå­—;\n\nå¯ä»¥é‡æ–°ç¼–è¯‘ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹\nALTER PROCEDURE è¿‡ç¨‹å COMPLIE;\n\nåˆ é™¤å­˜å‚¨è¿‡ç¨‹\nDELETE PROCEDURE è¿‡ç¨‹å;\n\nå­˜å‚¨è¿‡ç¨‹çš„å¥½å¤„å­˜å‚¨è¿‡ç¨‹åœ¨å®šä¹‰çš„æ—¶å€™å°±è¿›è¡Œäº†SQLçš„è¯­æ³•åˆ†æï¼Œè€Œæ™®é€šæ‰§è¡ŒSQLæ¯æ¬¡éƒ½ä¼šé‡æ–°è¿›è¡Œè¯­æ³•åˆ†æ\nå­˜å‚¨è¿‡ç¨‹é™ä½äº†å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡é‡ï¼Œå› ä¸ºå­˜å‚¨è¿‡ç¨‹ä¸­å¯èƒ½åŒ…å«å¤šæ¡SQLï¼Œå®¢æˆ·æœºä¸å†éœ€è¦å°†è¿™å¤šæ¡SQLé‡å¤å‘é€ã€‚\næ–¹ä¾¿ç»´æŠ¤ï¼šå½“æŸä¸ªæ–¹æ³•éœ€è¦æ”¹å˜çš„æ—¶å€™ï¼Œåªéœ€è¦æ”¹å˜å¯¹åº”çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå¹¶ä¸éœ€è¦æ”¹å˜å®¢æˆ·ç«¯ç¨‹åºã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["mysql"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘å‡ºç°æŠ¥é”™pragama once in main file","url":"/posts/3252921223/","content":"\n\nå‰è¨€ä¼—æ‰€å‘¨çŸ¥ï¼Œ#pragma onceè¯­å¥æ˜¯é˜²æ­¢å¤´æ–‡ä»¶é‡å¤åŒ…å«éå¸¸å¸¸ç”¨çš„ä¸€æ¡è¯­å¥VSç¼–è¯‘å™¨åœ¨åˆ›å»º.hæ–‡ä»¶çš„æ—¶å€™ä¼šè‡ªåŠ¨å¸®ä½ åœ¨å¼€å¤´æ·»åŠ è¿™ä¸ªè¯­å¥ä½†æ˜¯åœ¨gccç¼–è¯‘å™¨ä¸‹ï¼Œè¿™ä¸ªè¯­å¥å°±å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜\n\næ‰€ä½¿ç”¨ç¼–è¯‘å™¨ï¼š\n\nVS2019ï¼ˆwindows10ï¼‰\næ ‘è“æ´¾ï¼ˆlinux-gccï¼‰\n\n\nwarning: #pragma once in main fileåœ¨æˆ‘å°è¯•åœ¨linuxç¯å¢ƒä¸‹ä½¿ç”¨#pragma onceè¯­å¥æ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸è¦ç¼–è¯‘å¤´æ–‡ä»¶\n\nç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å±•å¼€å¤´æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¯‘\n\n\n\nå‡ºç°é—®é¢˜åŸå› ç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼šå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘å¤´æ–‡ä»¶çš„æ—¶å€™ï¼Œ#pragma onceæœ¬èº«æ˜¯æ²¡æœ‰å«ä¹‰çš„è¯­å¥ï¼Œæ‰€ä»¥æŠ¥é”™äº†ã€‚\n\nä¹Ÿæœ‰äººè¯´æ˜¯å› ä¸ºlinuxä¸æ”¯æŒè¿™ä¸ªè¯­å¥ï¼Œæˆ‘ä»¬æ¥è¯•è¯•\n\nå³ä¾§ä»£ç ä¸­åŒ…å«äº†ä¸¤ä¸ªtest.hçš„å¼•ç”¨ï¼Œåœ¨é¢„å¤„ç†ä¸­åªåŒ…å«äº†ä¸€æ¬¡\n\nå»æ‰å¤´æ–‡ä»¶ä¸­çš„#pragma onceï¼Œå†æ¬¡ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°é¢„å¤„ç†æ–‡ä»¶ä¸­å‡ºç°äº†ä¸¤æ¬¡å¤´æ–‡ä»¶çš„å†…å®¹\n\nè¿™è¯´æ˜linux-gccç¼–è¯‘å™¨æ˜¯æ”¯æŒè¯¥è¯­å¥çš„ï¼Œå¹¶éç½‘ä¸Šè¯´çš„ä¸æ”¯æŒï¼\nå…¶ä»–è§£å†³æ–¹æ³•å¦‚æœä½ çš„gccç¼–è¯‘å™¨ä¸ç®¡å’‹å¼„éƒ½æœ‰è¿™ä¸ªæŠ¥é”™ï¼Œå’±å¯ä»¥ä¸ç”¨å®ƒå˜›ï¼ä½¿ç”¨æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤ifndefä¹Ÿå¯ä»¥è¾¾æˆé˜²æ­¢å¤´æ–‡ä»¶é‡å¤åŒ…å«çš„æ•ˆæœ\n#ifndef __TEST_H__//å¦‚æœæ²¡æœ‰å®šä¹‰è¿‡è¿™ä¸ªç¬¦å·#define __TEST_H__//å®šä¹‰è¯¥ç¬¦å·//å¤´æ–‡ä»¶å†…å®¹#endif\n\n\næŸ¥èµ„æ–™æŸ¥åˆ°å¤–ç½‘å»äº†~åˆšåˆšå†™é¢„å¤„ç†åšå®¢çš„æ—¶å€™ï¼ŒæŸ¥æœ‰å…³è¿™ä¸ªé—®é¢˜çš„èµ„æ–™ï¼Œç™¾åº¦éƒ½ç»™æˆ‘æ¨äº†å¤–ç½‘çš„è®ºå›\n\nå‚è€ƒï¼šhttps://bbs.csdn.net/topics/395771733?page=1\n\n\nç½‘ä¸Šæœ‰å…³è¿™ä¸ªæŠ¥é”™çš„ä¿¡æ¯çš„ç¡®ä¸å¤šï¼Œç‰¹æ­¤å†™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘ä½¿ç”¨æ ‘è“æ´¾åœ¨Linuxç¯å¢ƒä¸‹ç¼–å†™Cè¯­è¨€ä»£ç ","url":"/posts/3611814801/","content":"\n\n\n\nå‰è¨€å¦‚ä½•ä½¿ç”¨æ ‘è“æ´¾ç¼–è¯‘Cè¯­è¨€ä»£ç å‘¢ï¼Ÿ\n\n\n21å¹´æš‘å‡çš„æ—¶å€™ï¼Œå­¦ä¹ ç¼–ç¨‹çš„åŠ²å¤´é«˜æ¶¨ï¼Œç„¶åå†²åŠ¨æ¶ˆè´¹ä¹°äº†ä¸ªæ ‘è“æ´¾4Bâ€¦â€¦ç»“æœå‹æ ¹ä¸ä¼šç”¨ï¼Œåƒç°äº†åŠå¹´\n\nä¸è¿‡ç°åœ¨å·²ç»å­¦å®Œäº†Cè¯­è¨€ï¼Œä¹Ÿæ¥è§¦äº†ä¸€ä¸¢ä¸¢Linuxç³»ç»Ÿä¸‹çš„gccæŒ‡ä»¤ï¼Œå¯ä»¥å°è¯•ç”¨å®ƒæ¥ç¼–å†™Cè¯­è¨€ä»£ç äº†ï¼\n\n1.åˆ›å»ºtest.cæ–‡ä»¶é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶\n\nç‚¹å‡»test.cæ–‡ä»¶åï¼Œæ ‘è“æ´¾ä¼šç”¨è‡ªå¸¦çš„Geanyç¼–è¾‘å™¨æ‰“å¼€å®ƒ\nç„¶åæˆ‘ä»¬å¯ä»¥å¾€é‡Œå†™å…¥Cè¯­è¨€æœ€ç»å…¸çš„hellowordä»£ç \n#include &lt;stdio.h&gt;int main(void)&#123;\tprintf(&quot;hello wordl!\\n&quot;); \treturn 0;&#125;\n\n2.ç¼–è¯‘è¿è¡Œè¯¥æ–‡ä»¶ä¿å­˜æ–‡ä»¶åï¼Œæ‰“å¼€é¡¶éƒ¨çš„å‘½ä»¤è¡Œ\n\nè¾“å…¥ä»¥ä¸‹ä»£ç \n\næ³¨æ„cdåéœ€è¦ç©ºæ ¼ï¼Œå¡«å†™çš„æ˜¯åˆšåˆšåˆ›å»ºçš„test1.cæ–‡ä»¶çš„è·¯å¾„\n\ncd /home/pi/code\n\nå¡«å†™å®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œå‰é¢å¤šå‡ºäº†ä¸€ä¸ªæ–‡ä»¶åœ°å€\n\nè¿™ä»£è¡¨ç›®å‰æˆ‘ä»¬æ“ä½œçš„æ˜¯codeæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹\nè¾“å…¥lsï¼Œå¯ä»¥çœ‹åˆ°å½“ä¸‹æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶\n\nè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶\ngcc test1.c -o test1\n\n\næœ€åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œå¯ä»¥è¿è¡Œè¯¥æ–‡ä»¶ï¼\n./test1\n\nå¯ä»¥çœ‹åˆ°ï¼Œç¨‹åºå·²ç»æˆåŠŸè¿è¡Œäº†ï¼\n\n\n3.ç¼–è¯‘å¹¶é“¾æ¥ä¸¤ä¸ªæºæ–‡ä»¶æ¥ä¸‹æ¥æˆ‘ä»¬å†å°è¯•ä¸€ä¸ªç›¸å¯¹æ¥è¯´æ›´å¤æ‚çš„ä»£ç \nåˆ†å¼€ä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯test.cï¼ŒåŒ…å«äº†mainå‡½æ•°\nå¦å¤–ä¸€ä¸ªæ˜¯Add.cï¼ŒåŒ…å«äº†Addå‡½æ•°\nå› ä¸ºæ˜¯åœ¨ä¸åŒçš„æºæ–‡ä»¶é‡Œé¢ï¼Œæˆ‘ä»¬éœ€è¦ç”¨externæ¥å£°æ˜å¤–éƒ¨å‡½æ•°\n#include &lt;stdio.h&gt; extern int Add(int x,int y); int main(void)&#123;\tint a=3;\tint b=5;\tprintf(&quot;%d&quot;,Add(a,b); \treturn 0;&#125;\n\n\næ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨-cæŒ‡ä»¤æ¥ç”Ÿæˆ.oç›®æ ‡æ–‡ä»¶\n\nåœ¨vsä¸‹ï¼Œç›®æ ‡æ–‡ä»¶çš„åç¼€æ˜¯.obj\n.iæ–‡ä»¶ä¸ºé¢„ç¼–è¯‘æ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘çš„ä»£ç é‡Œé¢externå†™é”™äº†ï¼ˆå¾ˆæ˜¯å°´å°¬ï¼‰ï¼Œç¼–è¯‘å™¨æŠ¥äº†è­¦å‘Š\næ›´æ”¹äº†ä»¥åå°±ç¼–è¯‘æˆåŠŸäº†\n\nè¿™ä¸€æ­¥æ˜¯æŠŠCè¯­è¨€ä»£ç è½¬æ¢æˆæœºå™¨è®¤è¯†çš„äºŒè¿›åˆ¶æŒ‡ä»¤\n\n\nç„¶åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œé“¾æ¥è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶test\ngcc test1.c Add.c -o test\n\n\næœ€åè¿˜æ˜¯ä½¿ç”¨./testæŒ‡ä»¤æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶\nå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç»“æœå·²ç»è¾“å‡ºäº†ï¼\n\nç»“è¯­ç¬¬ä¸€æ¬¡å°è¯•ç”¨linuxçš„gccæŒ‡ä»¤æ¥ç¼–è¯‘Cè¯­è¨€ä»£ç ï¼Œè¿˜æœ‰ç‚¹å°æ¿€åŠ¨\nåƒç°çš„æ ‘è“æ´¾ç»ˆäºæœ‰ç”¨äº†ï¼ğŸ˜\n\nå¦‚æœæœ‰å†™çš„ä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·å¤§ä½¬æ— æƒ…æŒ‡å‡ºï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘ä½¿ç”¨cpolarå®ç°å†…ç½‘ç©¿é€ï¼Œè¿œç¨‹è¿æ¥åœ¨å®¶é‡Œçš„æ ‘è“æ´¾","url":"/posts/412631379/","content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿œç¨‹è¿æ¥æ ‘è“æ´¾ï¼Œéœ€è¦å®ƒå’Œæˆ‘ä»¬çš„ç”µè„‘åœ¨åŒä¸€å±€åŸŸç½‘ä¸‹ã€‚å¦‚æœå‡ºé—¨è¦ç”¨æ ‘è“æ´¾çš„è¯ï¼Œåªèƒ½æŠŠå®ƒä¸€å¹¶å¸¦å‡ºé—¨ã€‚\nå¯å¦‚æœæˆ‘ä»¬æƒ³å·æ‡’ï¼ŒæŠŠæ ‘è“æ´¾è¿ä¸Šç½‘çº¿æˆ–wifiä¸¢å®¶é‡Œï¼Œç„¶ååœ¨å¦å¤–ä¸€ä¸ªç½‘ç»œä¸‹è¿œç¨‹è¿æ¥æ ‘è“æ´¾çš„è¯ï¼Œå°±éœ€è¦å€ŸåŠ©cpolaræ¥å®ç°å†…ç½‘ç©¿é€ï¼ŒæŠŠæ ‘è“æ´¾å˜ä¸ºè”ç½‘çš„è¿œç¨‹LINUXæœåŠ¡å™¨\n\n\n\nå¦‚æœä½ è¿˜æ²¡æœ‰é…ç½®å¥½æ ‘è“æ´¾çš„åŸºæœ¬ä½¿ç”¨ç¯å¢ƒï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢ğŸšªã€ä¼ é€é—¨ã€‘\n\n\nå…³äºcpolaråœ¨æ ‘è“æ´¾ä¸Šçš„åŸºæœ¬é…ç½®ï¼Œå®˜æ–¹æœ‰å¾ˆè¯¦ç»†çš„å¸®åŠ©æ–‡æ¡£ï¼Œä½†æ˜¯é‡Œé¢æœ‰ä¸€äº›é—®é¢˜ä»‹ç»çš„å¹¶ä¸ç®—æ¸…æ¥šã€å®˜æ–¹æ–‡æ¡£è¿æ¥ã€‘\næœ¬æ–‡æ˜¯å¯¹å®˜æ–¹å¸®åŠ©æ–‡æ¡£çš„ç»†åŒ–ï¼ˆå¾ˆå¤šæˆ‘æœåˆ°çš„åšå®¢åŸºæœ¬å°±æ˜¯ç…§æ¬å®˜æ–¹å¸®åŠ©æ–‡æ¡£ï¼‰\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·å…ˆæ³¨å†Œä¸€ä¸ªä½ çš„cpolarè´¦æˆ·\n\nhttps://www.cpolar.com/\n\n1.ä¿®æ”¹æ ‘è“æ´¾å¯†ç æ³¨æ„ï¼šä½¿ç”¨cpolarå…±äº«çš„SSHæ¥å£ï¼Œä¸»æœºåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ç«¯å£å·ä¸ä¸€æ ·\nä¸ºäº†é¿å…æœ‰å°äººï¼Œéšæœºç”Ÿæˆç«¯å£å·ï¼Œå·å·æ‘¸æ‘¸è¿æ¥æˆ‘ä»¬çš„æ ‘è“æ´¾æç ´å\nè¿™é‡Œå»ºè®®å¤§å®¶ä¸€å®šè¦å…ˆä¿®æ”¹ä½ çš„åˆå§‹å¯†ç ï¼\nsudo passwd pi\n\n2.åœ¨æ ‘è“æ´¾ä¸Šåˆå§‹åŒ–cpolar2.1ä¸‹è½½ç”¨è¿™ä¸ªè¯­å¥å®‰è£…cpolarï¼ˆå›½å†…ç”¨æˆ·ï¼‰\ncurl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash\n\næˆ–è€…è¿™ä¸ªè¯­å¥ï¼ˆé€‚ç”¨äºå›½å¤–ç”¨æˆ·ï¼‰\ncurl -sL https://git.io/cpolar | sudo bash\n\nè½¯ä»¶ä¸æ˜¯å¾ˆå¤§ï¼Œä¸€ä¸‹å­å°±ä¸‹å¥½äº†\n\nä½¿ç”¨è¿™ä¸ªè¯­å¥æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯\ncpolar version\n\nå¦‚æœå‡ºç°ä¸‹å›¾ä»£è¡¨å·²ç»å®‰è£…OKäº†\n\n2.2tokenéªŒè¯æ³¨å†Œè´¦å·åï¼Œé€‰æ‹©äº†å…è´¹ç•Œé¢ï¼Œä½ å°±å¯ä»¥è¿›å…¥åå°ç®¡ç†ç³»ç»Ÿ\nç‚¹å‡»éªŒè¯ï¼Œå¯ä»¥æ‰¾åˆ°ä½ çš„éš§é“Authtoken\n\nå¤åˆ¶å®ƒï¼Œç„¶ååœ¨æ ‘è“æ´¾ä¸Šç”¨ä¸‹é¢çš„è¯­å¥è®¾ç½®token\ncpolar authtoken xxxxxxxxxxxxxxxxxx\n\n\n2.3è®¾ç½®cpolarå¼€æœºè‡ªå¯å’Œç³»ç»Ÿä¿æŠ¤å¼€æœºè‡ªå¯åŠ¨\nsudo systemctl enable cpolar\n\nå®ˆæŠ¤è¿›ç¨‹æ–¹å¼ï¼Œå¯åŠ¨cpolarï¼ˆç±»ä¼¼äºæŠŠcpolarè®¾ç½®æˆäº†ç™½åå•åº”ç”¨ï¼‰\nsudo systemctl start cpolar\n\næŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹çŠ¶æ€\nsudo systemctl status cpolar\n\n\nå¦‚å›¾ï¼ŒçŠ¶æ€ä¸ºactive, è¯´æ˜å¯åŠ¨çŠ¶æ€æˆåŠŸ\n2.4æŸ¥çœ‹éš§é“ç«¯å£cpolarä¼šé»˜è®¤å®‰è£…ä¸¤ä¸ªæ ·ä¾‹éš§é“ï¼Œä¸€ä¸ªæ˜¯Websiteéš§é“æŒ‡å‘http 8080ç«¯å£ï¼Œä¸€ä¸ªæ˜¯sshéš§é“ï¼ŒæŒ‡å‘tcp 22ç«¯å£\nä¸ºäº†ä¸æš´éœ²æˆ‘è‡ªå·±çš„SSHè¿æ¥åœ°å€ï¼Œè¿™é‡Œç›´æ¥ä¸¢å®˜æ–¹å¸®åŠ©æ–‡æ¡£é‡Œé¢çš„å›¾\n\nå’Œå®˜æ–¹è¿™é‡Œä¸åŒï¼Œæˆ‘çš„åå°ç®¡ç†ä¸­åªæœ‰ä¸¤ä¸ªwebsiteåœ°å€å’Œä¸€ä¸ªsshåœ°å€\n2.5ä½¿ç”¨puttyæˆ–è€…Xshellè¿œç¨‹è¿æ¥æ ‘è“æ´¾ç¡®è®¤ä½ çš„sshè¿æ¥åï¼Œéœ€è¦åœ¨æ ‘è“æ´¾æœ¬åœ°è®¾ç½®ä¸€ä¸‹\nssh pi@1.tcp.vip.cpolar.cn -p 20013\n\nè¿™é‡Œä¼šè®©ä½ å¡«å†™æ ‘è“æ´¾çš„å¯†ç ï¼Œå¹¶ä¸æ˜¯cpolarçš„å¯†ç \nå¡«å†™å®Œæ¯•åï¼Œåˆ°è¿™é‡Œå·²ç»è®¾ç½®å®Œæ¯•å•¦ï¼æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ\n\nä¸‹é¢æ¥è¯•è¯•è¿œç¨‹ä½¿ç”¨æ ‘è“æ´¾\nå‡è®¾æˆ‘ä»¬çš„SSHåœ°å€æ˜¯ä¸‹é¢è¿™ä¸ª\ntcp://1.tcp.vip.cpolar.cn:20013\n\né‚£ä¹ˆåœ¨Xshellä¸­çš„ä¸»æœºå’Œç«¯å£åˆ†åˆ«å°±è¦å¡«å†™\n\nä¸»æœº1.tcp.vip.cpolar.cn\nç«¯å£20013\n\nç„¶åå°±èƒ½è¿æ¥ä¸Šä½ çš„æ ‘è“æ´¾\nè¿™é‡Œéœ€è¦ä½ è¾“å…¥ä½ æ ‘è“æ´¾çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥å®Œæ¯•åï¼Œå°±å’Œå±€åŸŸç½‘ä½¿ç”¨æ ‘è“æ´¾æ²¡å•¥åŒºåˆ«å•¦ï¼\n\næˆ‘æœèµ„æ–™çš„æ—¶å€™ï¼Œå°±æ˜¯è¿™é‡Œå¡«é”™äº†ï¼Œå¯¼è‡´ä¸€ç›´æ²¡è¿ä¸Šæ ‘è“æ´¾\n\nç»“è¯­å¦‚æœå¯¹äºåˆå§‹åŒ–è®¾ç½®cpolaræœ‰å•¥é—®é¢˜ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€\nå¤æ‚é—®é¢˜åˆ«é—®ï¼Œæˆ‘ä¸ä¼šï¼ï¼ï¼ï¼ï¼ğŸ˜‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€MySQLã€‘å†…ç½®å‡½æ•°","url":"/posts/4252514363/","content":"åƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒMySQLåŒæ ·ä¹Ÿæä¾›äº†ä¸€éƒ¨åˆ†å†…ç½®å‡½æ•°ä¾›ç”¨æˆ·åœ¨SQLä¸­è¿›è¡Œè°ƒç”¨ã€‚è¿™äº›å†…ç½®å‡½æ•°èƒ½ç®€å•å¤„ç†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œé¿å…æˆ‘ä»¬åœ¨ä¸åŒçš„ç”¨æˆ·å±‚è¯­è¨€ä¸­è¿›è¡Œé€»è¾‘ç¼–å†™ã€‚\n1.æ—¥æœŸå‡½æ•°\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\ncurrent_date()\nå½“å‰æ—¥æœŸ\n\n\ncurrent_time()\nå½“å‰æ—¶é—´\n\n\ncurrent_timestamp()\nå½“å‰æ—¥æœŸå’Œæ—¶é—´\n\n\nnow()\nå½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼ˆåŒä¸Šï¼‰\n\n\nunix_timestamp()\nå½“å‰æ—¶é—´æˆ³æ•°å­—\n\n\ndate(datetime)\nè¿”å›datetimeå‚æ•°ä¸­çš„æ—¥æœŸéƒ¨åˆ†\n\n\ndate_add(date,interval d_value_type)\nåœ¨dateä¸­æ·»åŠ æ—¥æœŸæˆ–æ—¶é—´ï¼Œintervalåçš„å‚æ•°å¯ä»¥æ˜¯year/month/day/hour/mintue/second\n\n\ndate_sub(date,interval d_value_type)\nåœ¨dateä¸­å‡å»æ—¥æœŸæˆ–æ—¶é—´ï¼Œintervalåçš„å‚æ•°å¯ä»¥æ˜¯year/month/day/hour/mintue/second\n\n\ndatediff(date1,date2)\nè®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„æ—¶é—´å·®ï¼Œå•ä½ä¸ºå¤©\n\n\ndate_format(date,format_string)\næ ¹æ®format_stringå­—ç¬¦ä¸²æ¥æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\n\n\nyear(date)\nè·å–æ—¥æœŸä¸­çš„å¹´ä»½\n\n\nmonth(date)\nè·å–æ—¥æœŸä¸­çš„æœˆä»½\n\n\nday(date)\nè·å–æ—¥æœŸä¸­çš„å¤©\n\n\nstr_to_date(string,format_string)\nå­—ç¬¦ä¸²è½¬æ—¶é—´\n\n\nä¸‹é¢æŒ¨ä¸ªåšä¸ªæ¼”ç¤º\n1.1 è·å–æ—¥æœŸå’Œæ—¶é—´è·å–æ—¶é—´åˆ†ä¸ºè·å–å½“å‰æ—¥æœŸï¼Œè·å–å½“å‰æ—¶é—´ï¼Œå’Œè·å–å½“å‰æ—¥æœŸ+æ—¶é—´ï¼›\nMariaDB [(none)]&gt; select current_time();+----------------+| current_time() |+----------------+| 14:27:49       |+----------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select now();+---------------------+| now()               |+---------------------+| 2024-01-30 14:27:53 |+---------------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select current_date();+----------------+| current_date() |+----------------+| 2024-01-30     |+----------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select current_timestamp();+---------------------+| current_timestamp() |+---------------------+| 2024-01-30 14:30:39 |+---------------------+1 row in set (0.000 sec)\n\nç»è¿‡æµ‹è¯•å¯ä»¥å‘ç°ï¼Œåœ¨MySQLä¸­ï¼Œcurrent_timestamp()å‡½æ•°å’Œnow()å‡½æ•°çš„æ•ˆæœç­‰æ•ˆã€‚\nåªæœ‰UNIX_TIMESTAMP()å‡½æ•°è¿”å›çš„æ‰æ˜¯æ—¶é—´æˆ³çš„æ•°å­—\nMariaDB [(none)]&gt; SELECT UNIX_TIMESTAMP();+------------------+| UNIX_TIMESTAMP() |+------------------+|       1706596346 |+------------------+1 row in set (0.000 sec)\n\n\n1.2 è·å–æ—¶é—´çš„éƒ¨åˆ†å€¼ä½¿ç”¨YEAR\\MONTH\\DAYå‡½æ•°ä»ä¸€ä¸ªæ—¶é—´ä¸­æå–æ—¥æœŸçš„éƒ¨åˆ†ä¿¡æ¯\nSELECT YEAR(NOW()) AS current_year;SELECT MONTH(NOW()) AS current_month;SELECT DAY(NOW()) AS current_day;\n\næ‰§è¡Œæ•ˆæœå¦‚ä¸‹\nMariaDB [(none)]&gt; SELECT YEAR(NOW()) AS current_year;+--------------+| current_year |+--------------+|         2024 |+--------------+1 row in set (0.001 sec)MariaDB [(none)]&gt; SELECT MONTH(NOW()) AS current_month;+---------------+| current_month |+---------------+|             1 |+---------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; SELECT DAY(NOW()) AS current_day;+-------------+| current_day |+-------------+|          30 |+-------------+1 row in set (0.000 sec)\n\n1.3 æ—¶é—´è¿ç®—MySQLä¸­æ—¶é—´å¯ä»¥ç›´æ¥ç”¨åŠ å‡è¿›è¡Œè¿ç®—ï¼Œæ—¶é—´åˆ—å’Œæ—¶é—´å‡½æ•°è¿”å›çš„æ—¶é—´ä¹‹é—´å¯ä»¥é€šè¿‡å¤§äºå°äºæ¥æ¯”è¾ƒå¤§å°ï¼›\nMariaDB [(none)]&gt; SELECT NOW() + INTERVAL 1 DAY;+------------------------+| NOW() + INTERVAL 1 DAY |+------------------------+| 2024-01-31 14:49:57    |+------------------------+1 row in set (0.000 sec)\n\nåœ¨å¤§å­¦æ•°æ®åº“çš„è€ƒè¯•ä¸­ä¸€èˆ¬ä¼šç»™å‡ºä¸€å¼ è¡¨ï¼Œå­˜äº†å­¦ç”Ÿçš„å‡ºç”Ÿæ—¥æœŸï¼Œè®©ä½ ç­›é€‰å‡ºå¹´é¾„å°äº20å²çš„å­¦ç”Ÿï¼Œæ­¤æ—¶å°±éœ€è¦è¿›è¡Œå¹´ä»½çš„æå–å’Œæ—¶é—´è®¡ç®—\n-- å‡è®¾å­¦ç”Ÿè¡¨ä¸­æ˜¯id,name,birthä¸‰ä¸ªå­—æ®µselect id,name from studentwhere (year(now()) - year(birth)) &lt; 20;\n\nä¸‹é¢æ¼”ç¤ºè¡¨æ ¼ä¸­æåˆ°çš„date_add/date_subè¿ç®—å‡½æ•°çš„ç”¨æ³•\n-- åœ¨æ—¥æœŸçš„åŸºç¡€ä¸ŠåŠ ä¸Šæ—¶é—´select date_add(&#x27;2024-1-1&#x27;,interval 2 month);-- åœ¨æ—¥æœŸçš„åŸºç¡€ä¸Šå‡å»æ—¶é—´select date_sub(&#x27;2023-10-1&#x27;, interval 2 day);-- ç¬¬äºŒä¸ªå‚æ•°å¯é€‰çš„æ—¶é—´é—´éš”INTERVAL 1 YEARINTERVAL 1 MONTHINTERVAL 1 DAYINTERVAL 1 HOURINTERVAL 1 MINUTEINTERVAL 1 SECOND\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [(none)]&gt; select date_sub(&#x27;2023-10-1&#x27;, interval 2 day);+---------------------------------------+| date_sub(&#x27;2023-10-1&#x27;, interval 2 day) |+---------------------------------------+| 2023-09-29                            |+---------------------------------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select date_add(&#x27;2024-1-1&#x27;,interval 2 month);+---------------------------------------+| date_add(&#x27;2024-1-1&#x27;,interval 2 month) |+---------------------------------------+| 2024-03-01                            |+---------------------------------------+1 row in set (0.000 sec)\n\nå¦å¤–ï¼ŒMySQLä¸­æ˜¯å…è®¸æ—¥æœŸä¸­å‡ºç°å‰å¯¼0çš„ï¼Œä¾æ—§å¯ä»¥è¢«æ­£å¸¸è¯†åˆ«\nMariaDB [(none)]&gt; select date_sub(&#x27;2023-01-01&#x27;, interval 2 day);+----------------------------------------+| date_sub(&#x27;2023-01-01&#x27;, interval 2 day) |+----------------------------------------+| 2022-12-30                             |+----------------------------------------+1 row in set (0.000 sec)\n\nä½¿ç”¨datediffå‡½æ•°è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼ï¼ˆæ—¥æœŸè¦ç”¨å•å¼•å·ä¼ å…¥ï¼‰\nMariaDB [(none)]&gt; SELECT DATEDIFF(&#x27;2022-01-30&#x27;, &#x27;2022-01-15&#x27;);+--------------------------------------+| DATEDIFF(&#x27;2022-01-30&#x27;, &#x27;2022-01-15&#x27;) |+--------------------------------------+|                                   15 |+--------------------------------------+1 row in set (0.000 sec)\n\nå…·ä½“ä¾‹å­ï¼šåœ¨msgè¡¨ä¸­æŸ¥è¯¢ä¸¤åˆ†é’Ÿå†…å‘å¸ƒçš„æ¶ˆæ¯ï¼Œå¯ä»¥ç”¨date_addå‡½æ•°æ¥å®ç°ã€‚\nselect * from msg where date_add(sendtime, interval 2 minute) &gt; now();\n\n1.4 æ—¥æœŸæ ¼å¼åŒ–ä½¿ç”¨date_formatå‡½æ•°å°†æ—¶é—´æ ¼å¼åŒ–è¾“å‡º\nselect DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:%i:%s&#x27;);\n\nåœ¨è¿™ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²ä¸­ï¼Œä½ å¯ä»¥æŠŠä¸€äº›å€¼ç»™å†™æ­»ï¼Œæ¯”å¦‚å°†åˆ†é’Ÿå’Œç§’å†™æ­»ä¸º0ç‚¹0åˆ†ï¼›\nselect DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:00:00&#x27;);\n\næœ€ç»ˆæ•ˆæœå¦‚ä¸‹\nMariaDB [(none)]&gt; select DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:%i:%s&#x27;);+----------------------------------------+| DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:%i:%s&#x27;) |+----------------------------------------+| 2024-01-30 14:59:33                    |+----------------------------------------+1 row in set (0.000 sec)MariaDB [(none)]&gt; select DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:00:00&#x27;);+----------------------------------------+| DATE_FORMAT(now(),&#x27;%Y-%m-%d %H:00:00&#x27;) |+----------------------------------------+| 2024-01-30 14:00:00                    |+----------------------------------------+1 row in set (0.000 sec)\n\nå¹´ä»½Yå¯ä»¥ä¸ºå°yï¼Œæ­¤æ—¶åªæ˜¾ç¤ºå¹´ä»½çš„åäºŒä½\nMariaDB [(none)]&gt; select DATE_FORMAT(now(),&#x27;%y-%m-%d %H:%i:%s&#x27;);+----------------------------------------+| DATE_FORMAT(now(),&#x27;%y-%m-%d %H:%i:%s&#x27;) |+----------------------------------------+| 24-01-30 15:00:23                      |+----------------------------------------+1 row in set (0.000 sec)\n\n1.5 å­—ç¬¦ä¸²è½¬æ—¶é—´str_to_dateå‡½æ•°å¯ä»¥å°†ç»™å®šçš„æ—¶é—´å­—ç¬¦ä¸²å’Œç»™å®šçš„å­—ç¬¦ä¸²æ—¶é—´æ ¼å¼ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªdatetimeç±»å‹\nselect str_to_date(&#x27;2024-01-02 20:37:14&#x27;, &#x27;%Y-%m-%d %H:%i:%s&#x27;);\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [(none)]&gt; select str_to_date(&#x27;2024-01-02 20:37:14&#x27;, &#x27;%Y-%m-%d %H:%i:%s&#x27;);+---------------------------------------------------------+| str_to_date(&#x27;2024-01-02 20:37:14&#x27;, &#x27;%Y-%m-%d %H:%i:%s&#x27;) |+---------------------------------------------------------+| 2024-01-02 20:37:14                                     |+---------------------------------------------------------+1 row in set (0.000 sec)\n\nå¦‚æœä½ ç»™å®šçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²å’Œæ—¶é—´å­—ç¬¦ä¸²ä¸ç¬¦åˆï¼Œåˆ™æ— æ³•æˆåŠŸè½¬æ¢ï¼Œç»“æœä¸ºNULL\nMariaDB [(none)]&gt; select str_to_date(&#x27;2024-01-02 20:37:14&#x27;, &#x27;%y-%m-%d %H:%i:%s&#x27;);+---------------------------------------------------------+| str_to_date(&#x27;2024-01-02 20:37:14&#x27;, &#x27;%y-%m-%d %H:%i:%s&#x27;) |+---------------------------------------------------------+| NULL                                                    |+---------------------------------------------------------+1 row in set, 1 warning (0.000 sec)\n\n1.6 å…¶ä»–å‚è€ƒå‡½æ•°ä»¥ä¸‹æ˜¯æ¯”è¾ƒå…¨çš„MySQLæ—¥æœŸå‡½æ•°ï¼Œå¯ä¾›å‚è€ƒ\n\nç‚¹æˆ‘æŸ¥çœ‹\n\nåŸæ–‡é“¾æ¥ï¼šMySQLä¹‹æ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•°\n-- MySQLæ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•°-- å½“å‰æ—¥æœŸï¼š2017-05-12ï¼ˆçªç„¶å‘ç°ä»Šå¤©512ï¼Œæ˜¯ä¸æ˜¯ä¼šæ‹‰é˜²ç©ºè­¦æŠ¥ï¼‰SELECT NOW() FROM DUAL;-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:41:47-- åœ¨MySQLé‡Œä¹Ÿå­˜åœ¨å’ŒOracleé‡Œç±»ä¼¼çš„dualè™šæ‹Ÿè¡¨ï¼šå®˜æ–¹å£°æ˜çº¯ç²¹æ˜¯ä¸ºäº†æ»¡è¶³select ... from...è¿™ä¸€ä¹ æƒ¯é—®é¢˜ï¼Œmysqlä¼šå¿½ç•¥å¯¹è¯¥è¡¨çš„å¼•ç”¨ã€‚-- é‚£ä¹ˆMySQLä¸­å°±ä¸ç”¨DUALäº†å§ã€‚SELECT NOW();-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:41:55-- é™¤äº† now() å‡½æ•°èƒ½è·å¾—å½“å‰çš„æ—¥æœŸæ—¶é—´å¤–ï¼ŒMySQL ä¸­è¿˜æœ‰ä¸‹é¢çš„å‡½æ•°ï¼šSELECT CURRENT_TIMESTAMP();-- 2017-05-15 10:19:31SELECT CURRENT_TIMESTAMP;-- 2017-05-15 10:19:51SELECT LOCALTIME();-- 2017-05-15 10:20:00SELECT LOCALTIME;-- 2017-05-15 10:20:10SELECT LOCALTIMESTAMP();-- 2017-05-15 10:20:21(v4.0.6)SELECT LOCALTIMESTAMP;-- 2017-05-15 10:20:30(v4.0.6)-- è¿™äº›æ—¥æœŸæ—¶é—´å‡½æ•°ï¼Œéƒ½ç­‰åŒäº now()ã€‚é‰´äº now() å‡½æ•°ç®€çŸ­æ˜“è®°ï¼Œå»ºè®®æ€»æ˜¯ä½¿ç”¨ now()æ¥æ›¿ä»£ä¸Šé¢åˆ—å‡ºçš„å‡½æ•°ã€‚ SELECT SYSDATE();-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:42:03-- sysdate() æ—¥æœŸæ—¶é—´å‡½æ•°è·Ÿ now() ç±»ä¼¼ï¼Œ-- ä¸åŒä¹‹å¤„åœ¨äºï¼šnow() åœ¨æ‰§è¡Œå¼€å§‹æ—¶å€¼å°±å¾—åˆ°äº†;sysdate() åœ¨å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€å¾—åˆ°å€¼ã€‚-- çœ‹ä¸‹é¢çš„ä¾‹å­å°±æ˜ç™½äº†ï¼šSELECT NOW(), SLEEP(3), NOW();SELECT SYSDATE(), SLEEP(3), SYSDATE();  SELECT CURDATE();-- å½“å‰æ—¥æœŸï¼š2017-05-12SELECT CURRENT_DATE();-- å½“å‰æ—¥æœŸï¼šç­‰åŒäº CURDATE()SELECT CURRENT_DATE;-- å½“å‰æ—¥æœŸï¼šç­‰åŒäº CURDATE() SELECT CURTIME();-- å½“å‰æ—¶é—´ï¼š11:42:47SELECT CURRENT_TIME();-- å½“å‰æ—¶é—´ï¼šç­‰åŒäº CURTIME()SELECT CURRENT_TIME;-- å½“å‰æ—¶é—´ï¼šç­‰åŒäº CURTIME() -- è·å¾—å½“å‰ UTC æ—¥æœŸæ—¶é—´å‡½æ•°SELECT UTC_TIMESTAMP(), UTC_DATE(), UTC_TIME()-- MySQL è·å¾—å½“å‰æ—¶é—´æˆ³å‡½æ•°ï¼šcurrent_timestamp, current_timestamp()SELECT CURRENT_TIMESTAMP, CURRENT_TIMESTAMP();-- 2017-05-15 10:32:21 | 2017-05-15 10:32:21  -- MySQL æ—¥æœŸæ—¶é—´ Extractï¼ˆé€‰å–ï¼‰ å‡½æ•°SET @dt = &#x27;2017-05-15 10:37:14.123456&#x27;;SELECT DATE(@dt);-- è·å–æ—¥æœŸï¼š2017-05-15SELECT TIME(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–æ—¶é—´ï¼š10:37:14.123456SELECT YEAR(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–å¹´ä»½SELECT MONTH(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–æœˆä»½SELECT DAY(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–æ—¥SELECT HOUR(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–æ—¶SELECT MINUTE(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–åˆ†SELECT SECOND(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–ç§’SELECT MICROSECOND(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–æ¯«ç§’SELECT QUARTER(&#x27;2017-05-15 10:37:14.123456&#x27;);-- è·å–å­£åº¦SELECT WEEK(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 20 (è·å–å‘¨)SELECT WEEK(&#x27;2017-05-15 10:37:14.123456&#x27;, 7);-- ****** æµ‹è¯•æ­¤å‡½æ•°åœ¨MySQL5.6ä¸‹æ— æ•ˆSELECT WEEKOFYEAR(&#x27;2017-05-15 10:37:14.123456&#x27;);-- åŒweek()SELECT DAYOFYEAR(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 135 (æ—¥æœŸåœ¨å¹´åº¦ä¸­ç¬¬å‡ å¤©)SELECT DAYOFMONTH(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 5 (æ—¥æœŸåœ¨æœˆåº¦ä¸­ç¬¬å‡ å¤©)SELECT DAYOFWEEK(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 2 (æ—¥æœŸåœ¨å‘¨ä¸­ç¬¬å‡ å¤©ï¼›å‘¨æ—¥ä¸ºç¬¬ä¸€å¤©)SELECT WEEKDAY(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 0SELECT WEEKDAY(&#x27;2017-05-21 10:37:14.123456&#x27;);-- 6(ä¸dayofweek()éƒ½è¡¨ç¤ºæ—¥æœŸåœ¨å‘¨çš„ç¬¬å‡ å¤©ï¼Œåªæ˜¯å‚è€ƒæ ‡å‡†ä¸åŒï¼Œweekday()å‘¨ä¸€ä¸ºç¬¬0å¤©ï¼Œå‘¨æ—¥ä¸ºç¬¬6å¤©)SELECT YEARWEEK(&#x27;2017-05-15 10:37:14.123456&#x27;);-- 201720(å¹´å’Œå‘¨) SELECT EXTRACT(YEAR FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(MONTH FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(DAY FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(HOUR FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(MINUTE FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(SECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(MICROSECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(QUARTER FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(WEEK FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(YEAR_MONTH FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(DAY_HOUR FROM &#x27;2017-05-15 10:37:14.123456&#x27;);SELECT EXTRACT(DAY_MINUTE FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 151037(æ—¥æ—¶åˆ†)SELECT EXTRACT(DAY_SECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 15103714(æ—¥æ—¶åˆ†ç§’)SELECT EXTRACT(DAY_MICROSECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 15103714123456(æ—¥æ—¶åˆ†ç§’æ¯«ç§’)SELECT EXTRACT(HOUR_MINUTE FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 1037(æ—¶åˆ†)SELECT EXTRACT(HOUR_SECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 103714(æ—¶åˆ†ç§’)SELECT EXTRACT(HOUR_MICROSECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 103714123456(æ—¥æ—¶åˆ†ç§’æ¯«ç§’)SELECT EXTRACT(MINUTE_SECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 3714(åˆ†ç§’)SELECT EXTRACT(MINUTE_MICROSECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 3714123456(åˆ†ç§’æ¯«ç§’)SELECT EXTRACT(SECOND_MICROSECOND FROM &#x27;2017-05-15 10:37:14.123456&#x27;);-- 14123456(ç§’æ¯«ç§’)-- MySQL Extract() å‡½æ•°é™¤äº†æ²¡æœ‰date(),time() çš„åŠŸèƒ½å¤–ï¼Œå…¶ä»–åŠŸèƒ½ä¸€åº”å…·å…¨ã€‚-- å¹¶ä¸”è¿˜å…·æœ‰é€‰å–â€˜day_microsecond&#x27; ç­‰åŠŸèƒ½ã€‚-- æ³¨æ„è¿™é‡Œä¸æ˜¯åªé€‰å– day å’Œ microsecondï¼Œè€Œæ˜¯ä»æ—¥æœŸçš„ day éƒ¨åˆ†ä¸€ç›´é€‰å–åˆ° microsecond éƒ¨åˆ†ã€‚  SELECT DAYNAME(&#x27;2017-05-15 10:37:14.123456&#x27;);-- Monday(è¿”å›è‹±æ–‡æ˜ŸæœŸ)SELECT MONTHNAME(&#x27;2017-05-15 10:37:14.123456&#x27;);-- May(è¿”å›è‹±æ–‡æœˆä»½)SELECT LAST_DAY(&#x27;2016-02-01&#x27;);-- 2016-02-29 (è¿”å›æœˆä»½ä¸­æœ€åä¸€å¤©)SELECT LAST_DAY(&#x27;2016-05-01&#x27;);-- 2016-05-31 -- DATE_ADD(date,INTERVAL expr type) ä»æ—¥æœŸåŠ ä¸ŠæŒ‡å®šçš„æ—¶é—´é—´éš”-- typeå‚æ•°å¯å‚è€ƒï¼šhttp://www.w3school.com.cn/sql/func_date_sub.aspSELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 YEAR);-- è¡¨ç¤ºï¼š2018-05-15 10:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 QUARTER);-- è¡¨ç¤ºï¼š2017-08-15 10:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MONTH);-- è¡¨ç¤ºï¼š2017-06-15 10:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 WEEK);-- è¡¨ç¤ºï¼š2017-05-22 10:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 DAY);-- è¡¨ç¤ºï¼š2017-05-16 10:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 HOUR);-- è¡¨ç¤ºï¼š2017-05-15 11:37:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MINUTE);-- è¡¨ç¤ºï¼š2017-05-15 10:38:14.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 SECOND);-- è¡¨ç¤ºï¼š2017-05-15 10:37:15.123456SELECT DATE_ADD(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MICROSECOND);-- è¡¨ç¤ºï¼š2017-05-15 10:37:14.123457  -- DATE_SUB(date,INTERVAL expr type) ä»æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 YEAR);-- è¡¨ç¤ºï¼š2016-05-15 10:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 QUARTER);-- è¡¨ç¤ºï¼š2017-02-15 10:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MONTH);-- è¡¨ç¤ºï¼š2017-04-15 10:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 WEEK);-- è¡¨ç¤ºï¼š2017-05-08 10:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 DAY);-- è¡¨ç¤ºï¼š2017-05-14 10:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 HOUR);-- è¡¨ç¤ºï¼š2017-05-15 09:37:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MINUTE);-- è¡¨ç¤ºï¼š2017-05-15 10:36:14.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 SECOND);-- è¡¨ç¤ºï¼š2017-05-15 10:37:13.123456SELECT DATE_SUB(&#x27;2017-05-15 10:37:14.123456&#x27;,INTERVAL 1 MICROSECOND);-- è¡¨ç¤ºï¼š2017-05-15 10:37:14.123455 -- ç»ç‰¹æ®Šæ—¥æœŸæµ‹è¯•ï¼ŒDATE_SUB(date,INTERVAL expr type)å¯æ”¾å¿ƒä½¿ç”¨SELECT DATE_SUB(CURDATE(),INTERVAL 1 DAY);-- å‰ä¸€å¤©ï¼š2017-05-11SELECT DATE_SUB(CURDATE(),INTERVAL -1 DAY);-- åä¸€å¤©ï¼š2017-05-13SELECT DATE_SUB(CURDATE(),INTERVAL 1 MONTH);-- ä¸€ä¸ªæœˆå‰æ—¥æœŸï¼š2017-04-12SELECT DATE_SUB(CURDATE(),INTERVAL -1 MONTH);-- ä¸€ä¸ªæœˆåæ—¥æœŸï¼š2017-06-12SELECT DATE_SUB(CURDATE(),INTERVAL 1 YEAR);-- ä¸€å¹´å‰æ—¥æœŸï¼š2016-05-12SELECT DATE_SUB(CURDATE(),INTERVAL -1 YEAR);-- ä¸€å¹´åæ—¥æœŸï¼š20178-06-12-- MySQL date_sub() æ—¥æœŸæ—¶é—´å‡½æ•° å’Œ date_add() ç”¨æ³•ä¸€è‡´ï¼Œå¹¶ä¸”å¯ä»¥ç”¨INTERNAL -1 xxxçš„å½¢å¼äº’æ¢ä½¿ç”¨ï¼›-- å¦å¤–ï¼ŒMySQL ä¸­è¿˜æœ‰ä¸¤ä¸ªå‡½æ•° subdate(), subtime()ï¼Œå»ºè®®ï¼Œç”¨ date_sub() æ¥æ›¿ä»£ã€‚ -- MySQL å¦ç±»æ—¥æœŸå‡½æ•°ï¼šperiod_add(P,N), period_diff(P1,P2)-- å‡½æ•°å‚æ•°â€œPâ€ çš„æ ¼å¼ä¸ºâ€œYYYYMMâ€ æˆ–è€… â€œYYMMâ€ï¼Œç¬¬äºŒä¸ªå‚æ•°â€œNâ€ è¡¨ç¤ºå¢åŠ æˆ–å‡å» N monthï¼ˆæœˆï¼‰ã€‚-- MySQL period_add(P,N)ï¼šæ—¥æœŸåŠ /å‡å»Næœˆã€‚SELECT PERIOD_ADD(201705,2), PERIOD_ADD(201705,-2);-- 201707  20170503-- period_diff(P1,P2)ï¼šæ—¥æœŸ P1-P2ï¼Œè¿”å› N ä¸ªæœˆã€‚SELECT PERIOD_DIFF(201706, 201703);-- -- datediff(date1,date2)ï¼šä¸¤ä¸ªæ—¥æœŸç›¸å‡ date1 - date2ï¼Œè¿”å›å¤©æ•°SELECT DATEDIFF(&#x27;2017-06-05&#x27;,&#x27;2017-05-29&#x27;);-- 7-- TIMEDIFF(time1,time2)ï¼šä¸¤ä¸ªæ—¥æœŸç›¸å‡ time1 - time2ï¼Œè¿”å› TIME å·®å€¼SELECT TIMEDIFF(&#x27;2017-06-05 19:28:37&#x27;, &#x27;2017-06-05 17:00:00&#x27;);-- 02:28:37  -- MySQLæ—¥æœŸè½¬æ¢å‡½æ•°SELECT TIME_TO_SEC(&#x27;01:00:05&#x27;); -- 3605SELECT SEC_TO_TIME(3605);-- 01:00:05 -- MySQL ï¼ˆæ—¥æœŸã€å¤©æ•°ï¼‰è½¬æ¢å‡½æ•°ï¼što_days(date), from_days(days)SELECT TO_DAYS(&#x27;0000-00-00&#x27;); -- NULL SELECT TO_DAYS(&#x27;2017-06-05&#x27;); -- 736850SELECT FROM_DAYS(0);           -- &#x27;0000-00-00&#x27; SELECT FROM_DAYS(736850);      -- &#x27;2017-06-05&#x27; -- MySQL Str to Date ï¼ˆå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸï¼‰å‡½æ•°ï¼šstr_to_date(str, format) SELECT STR_TO_DATE(&#x27;06.05.2017 19:40:30&#x27;, &#x27;%m.%d.%Y %H:%i:%s&#x27;);-- 2017-06-05 19:40:30SELECT STR_TO_DATE(&#x27;06/05/2017&#x27;, &#x27;%m/%d/%Y&#x27;);                  -- 2017-06-05SELECT STR_TO_DATE(&#x27;2017/12/3&#x27;,&#x27;%Y/%m/%d&#x27;)\t\t       -- 2017-12-03SELECT STR_TO_DATE(&#x27;20:09:30&#x27;, &#x27;%h:%i:%s&#x27;)\t\t       -- NULL(è¶…è¿‡12æ—¶çš„å°æ—¶ç”¨å°å†™hï¼Œå¾—åˆ°çš„ç»“æœä¸ºNULL) -- æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–SELECT DATE_FORMAT(&#x27;2017-05-12 17:03:51&#x27;, &#x27;%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’&#x27;);-- 2017å¹´05æœˆ12æ—¥ 17æ—¶03åˆ†51ç§’(å…·ä½“éœ€è¦ä»€ä¹ˆæ ¼å¼çš„æ•°æ®æ ¹æ®å®é™…æƒ…å†µæ¥;å°å†™hä¸º12å°æ—¶åˆ¶;)SELECT TIME_FORMAT(&#x27;2017-05-12 17:03:51&#x27;, &#x27;%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’&#x27;);-- 0000å¹´00æœˆ00æ—¥ 17æ—¶03åˆ†51ç§’(time_format()åªèƒ½ç”¨äºæ—¶é—´çš„æ ¼å¼åŒ–)-- STR_TO_DATE()å’ŒDATE_FORMATE()ä¸ºäº’é€†æ“ä½œ -- MySQL è·å¾—å›½å®¶åœ°åŒºæ—¶é—´æ ¼å¼å‡½æ•°ï¼šget_format()-- MySQL get_format() è¯­æ³•ï¼šget_format(date|time|datetime, &#x27;eur&#x27;|&#x27;usa&#x27;|&#x27;jis&#x27;|&#x27;iso&#x27;|&#x27;internal&#x27;-- MySQL get_format() ç”¨æ³•çš„å…¨éƒ¨ç¤ºä¾‹ï¼šSELECT GET_FORMAT(DATE,&#x27;usa&#x27;);   \t-- &#x27;%m.%d.%Y&#x27; SELECT GET_FORMAT(DATE,&#x27;jis&#x27;);   \t-- &#x27;%Y-%m-%d&#x27; SELECT GET_FORMAT(DATE,&#x27;iso&#x27;);   \t-- &#x27;%Y-%m-%d&#x27; SELECT GET_FORMAT(DATE,&#x27;eur&#x27;);   \t-- &#x27;%d.%m.%Y&#x27; SELECT GET_FORMAT(DATE,&#x27;internal&#x27;);   \t-- &#x27;%Y%m%d&#x27; SELECT GET_FORMAT(DATETIME,&#x27;usa&#x27;);   \t-- &#x27;%Y-%m-%d %H.%i.%s&#x27; SELECT GET_FORMAT(DATETIME,&#x27;jis&#x27;);   \t-- &#x27;%Y-%m-%d %H:%i:%s&#x27; SELECT GET_FORMAT(DATETIME,&#x27;iso&#x27;);   \t-- &#x27;%Y-%m-%d %H:%i:%s&#x27; SELECT GET_FORMAT(DATETIME,&#x27;eur&#x27;);   \t-- &#x27;%Y-%m-%d %H.%i.%s&#x27; SELECT GET_FORMAT(DATETIME,&#x27;internal&#x27;); -- &#x27;%Y%m%d%H%i%s&#x27; SELECT GET_FORMAT(TIME,&#x27;usa&#x27;);   \t-- &#x27;%h:%i:%s %p&#x27; SELECT GET_FORMAT(TIME,&#x27;jis&#x27;);   \t-- &#x27;%H:%i:%s&#x27; SELECT GET_FORMAT(TIME,&#x27;iso&#x27;);   \t-- &#x27;%H:%i:%s&#x27; SELECT GET_FORMAT(TIME,&#x27;eur&#x27;);   \t-- &#x27;%H.%i.%s&#x27; SELECT GET_FORMAT(TIME,&#x27;internal&#x27;);     -- &#x27;%H%i%s&#x27;  -- MySQL æ‹¼å‡‘æ—¥æœŸã€æ—¶é—´å‡½æ•°ï¼šmakdedate(year,dayofyear), maketime(hour,minute,second)SELECT MAKEDATE(2017,31);   -- &#x27;2017-01-31&#x27; SELECT MAKEDATE(2017,32);   -- &#x27;2017-02-01&#x27;SELECT MAKETIME(19,52,35);  -- &#x27;19:52:35&#x27; -- MySQL æ—¶åŒºï¼ˆtimezoneï¼‰è½¬æ¢å‡½æ•°ï¼šconvert_tz(dt,from_tz,to_tz)SELECT CONVERT_TZ(&#x27;2017-06-05 19:54:12&#x27;, &#x27;+08:00&#x27;, &#x27;+00:00&#x27;); -- 2017-06-05 11:54:12  -- MySQL ï¼ˆUnix æ—¶é—´æˆ³ã€æ—¥æœŸï¼‰è½¬æ¢å‡½æ•°-- unix_timestamp(), unix_timestamp(date), from_unixtime(unix_timestamp), from_unixtime(unix_timestamp,format)-- å°†å…·ä½“æ—¶é—´æ—¶é—´è½¬ä¸ºtimestampSELECT UNIX_TIMESTAMP();-- å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼š1494815779SELECT UNIX_TIMESTAMP(&#x27;2017-05-15&#x27;);-- æŒ‡å®šæ—¥æœŸçš„æ—¶é—´æˆ³ï¼š1494777600SELECT UNIX_TIMESTAMP(&#x27;2017-05-15 10:37:14&#x27;);-- æŒ‡å®šæ—¥æœŸæ—¶é—´çš„æ—¶é—´æˆ³ï¼š1494815834 -- å°†æ—¶é—´æˆ³è½¬ä¸ºå…·ä½“æ—¶é—´SELECT FROM_UNIXTIME(1494815834);-- 2017-05-15 10:37:14SELECT FROM_UNIXTIME(1494815834, &#x27;%Yå¹´%mæœˆ%dæ—¥ %hæ—¶%åˆ†:%sç§’&#x27;);-- è·å–æ—¶é—´æˆ³å¯¹åº”çš„æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ -- MySQL æ—¶é—´æˆ³ï¼ˆtimestampï¼‰è½¬æ¢ã€å¢ã€å‡å‡½æ•°SELECT TIMESTAMP(&#x27;2017-05-15&#x27;);-- 2017-05-15 00:00:00SELECT TIMESTAMP(&#x27;2017-05-15 08:12:25&#x27;, &#x27;01:01:01&#x27;);-- 2017-05-15 09:13:26SELECT DATE_ADD(&#x27;2017-05-15 08:12:25&#x27;, INTERVAL 1 DAY);-- 2017-05-16 08:12:25SELECT TIMESTAMPADD(DAY, 1, &#x27;2017-05-15 08:12:25&#x27;);-- 2017-05-16 08:12:25; MySQL timestampadd() å‡½æ•°ç±»ä¼¼äº date_add()ã€‚ SELECT TIMESTAMPDIFF(YEAR, &#x27;2017-06-01&#x27;, &#x27;2016-05-15&#x27;);-- -1SELECT TIMESTAMPDIFF(MONTH, &#x27;2017-06-01&#x27;, &#x27;2016-06-15&#x27;);-- -11SELECT TIMESTAMPDIFF(DAY, &#x27;2017-06-01&#x27;, &#x27;2016-06-15&#x27;);-- -351SELECT TIMESTAMPDIFF(HOUR, &#x27;2017-06-01 08:12:25&#x27;, &#x27;2016-06-15 00:00:00&#x27;);-- -8432SELECT TIMESTAMPDIFF(MINUTE, &#x27;2017-06-01 08:12:25&#x27;, &#x27;2016-06-15 00:00:00&#x27;);-- -505932SELECT TIMESTAMPDIFF(SECOND, &#x27;2017-06-01 08:12:25&#x27;, &#x27;2016-06-15 00:00:00&#x27;);-- -30355945\n\n\n\n1.7 è‡ªåŠ¨èµ‹å€¼æ—¶é—´æˆ³å®˜æ–¹æ–‡æ¡£ï¼šhttps://dev.mysql.com/doc/refman/8.0/en/timestamp-initialization.html\nMySQLæœ‰æ—¶é—´å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨æ’å…¥å’Œæ“ä½œæ•°æ®çš„æ—¶å€™è‡ªåŠ¨å¸®æˆ‘ä»¬æ›´æ–°æ—¶é—´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹è¯­å¥ï¼Œåœ¨TIMESTAMPå’ŒDATETIMEç±»å‹ä¸­éƒ½å¯ä»¥è¿™ä¹ˆä½¿ç”¨ã€‚\nCREATE TABLE t1 (  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  dt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);\n\nON UPDATEè¯­å¥çš„å«ä¹‰ä¸ºå½“è¡Œè¢«æ›´æ–°çš„æ—¶å€™ï¼Œå°±è‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´ï¼ˆå³æ›´æ–°æ—¶é—´ï¼‰\nä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼šç”¨æˆ·è¡¨ä¸­ï¼Œæˆ‘ä»¬çš„ä¸€æ¡è®°å½•å¯ä»¥æœ‰ä¸¤ä¸ªæ—¶é—´å­—æ®µï¼Œä¸€ä¸ªæ˜¯æ›´æ–°æ—¶é—´ï¼Œå³ç”¨æˆ·ä¿¡æ¯è¢«ç”¨æˆ·ä¿®æ”¹åçš„æ—¶é—´ï¼ˆè¿™ä¸ªæ—¶é—´å¯ä»¥ç”¨æ¥é™åˆ¶ç”¨æˆ·å¤šä¹…æ‰èƒ½ä¿®æ”¹ä¸€æ¬¡ä¸ªäººä¿¡æ¯ç­‰æ“ä½œï¼‰ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æ’å…¥æ—¶é—´ï¼Œå³ç”¨æˆ·æ³¨å†Œçš„æ—¶é—´ã€‚\næ­¤æ—¶å¯ä»¥è®©MySQLæ¥è‡ªåŠ¨å¸®æˆ‘ä»¬ç»´æŠ¤æ’å…¥æ—¶é—´å’Œæ›´æ–°æ—¶é—´ã€‚\nCREATE TABLE your_table (  id INT PRIMARY KEY,  data VARCHAR(255),  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);\n\n2.å­—ç¬¦ä¸²å‡½æ•°\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\ncharset(str)\nè¿”å›å­—ç¬¦ä¸²çš„å­—ç¬¦é›†\n\n\nconcat(str1,str2[,â€¦])\næ‹¼æ¥å¤šä¸ªå­—ç¬¦ä¸²\n\n\ninstr(str,substr)\nè¿”å›substråœ¨strä¸­å‡ºç°çš„ä½ç½®ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0\n\n\nucase(string)\nå­—ç¬¦ä¸²è½¬å¤§å†™\n\n\nlcase(string)\nå­—ç¬¦ä¸²è½¬å°å†™\n\n\nleft(string,length)&#x2F;right(string,length)\nä»stringçš„å·¦è¾¹&#x2F;å³è¾¹èµ·å–lengthä¸ªå­—ç¬¦\n\n\nlength(string)\nå­—ç¬¦ä¸²é•¿åº¦\n\n\nreplace(str,search_str,replace_str)\nå°†strä¸­çš„replace_stréƒ¨åˆ†æ›¿æ¢ä¸ºsearch_str\n\n\nstrcmp(str1,str2)\né€å­—ç¬¦æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°\n\n\nsubstring(str,position [,length])\nä»strçš„positionå¼€å§‹å–lengthä¸ªå­—ç¬¦\n\n\nltrim(strin)&#x2F;rtrim(str)&#x2F;trim(str)\nå»é™¤å­—ç¬¦ä¸²ä¸­çš„å‰ç©ºæ ¼æˆ–è€…åç©ºæ ¼\n\n\nç®€å•æµ‹è¯•ä¸€ä¸‹è¿™äº›å‡½æ•°çš„ä½¿ç”¨å§\n2.1 æŸ¥çœ‹å­—ç¬¦ä¸²å­—ç¬¦é›†MariaDB [stu_test]&gt; select charset(&quot;ä½ å¥½&quot;);+-------------------+| charset(&quot;ä½ å¥½&quot;)   |+-------------------+| utf8mb3           |+-------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select charset(&quot;125412446&quot;);+----------------------+| charset(&quot;125412446&quot;) |+----------------------+| utf8mb3              |+----------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select charset(name) from student;+---------------+| charset(name) |+---------------+| utf8mb4       || utf8mb4       || utf8mb4       || utf8mb4       || utf8mb4       |+---------------+5 rows in set (0.000 sec)\n\n2.2 å­—ç¬¦ä¸²æ‹¼æ¥MariaDB [stu_test]&gt; select concat(&#x27;ä½ å¥½&#x27;,&#x27;ï¼Œ&#x27;,&#x27;ä»Šå¤©å¤©æ°”ä¸é”™&#x27;);+---------------------------------------------+| concat(&#x27;ä½ å¥½&#x27;,&#x27;ï¼Œ&#x27;,&#x27;ä»Šå¤©å¤©æ°”ä¸é”™&#x27;)          |+---------------------------------------------+| ä½ å¥½ï¼Œä»Šå¤©å¤©æ°”ä¸é”™                          |+---------------------------------------------+1 row in set (0.000 sec)\n\n2.3 å­å­—ç¬¦ä¸²æŸ¥è¯¢ä½¿ç”¨instræŸ¥è¯¢ï¼Œåœ¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­æŸ¥è¯¢ç¬¬äºŒä¸ªå‚æ•°çš„å­—ç¬¦ä¸²ã€‚æ‰¾åˆ°äº†å­ä¸²åï¼Œè¿”å›èµ·å§‹ä½ç½®çš„åç§»é‡ï¼ˆå¹¶éä¸‹æ ‡ï¼‰ï¼Œæ²¡æœ‰æ‰¾åˆ°è¿”å›0ã€‚\nMariaDB [stu_test]&gt; select instr(&#x27;abcdef&#x27;,&#x27;bc&#x27;);+----------------------+| instr(&#x27;abcdef&#x27;,&#x27;bc&#x27;) |+----------------------+|                    2 |+----------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select instr(&#x27;abcdef&#x27;,&#x27;asdfa&#x27;);+-------------------------+| instr(&#x27;abcdef&#x27;,&#x27;asdfa&#x27;) |+-------------------------+|                       0 |+-------------------------+1 row in set (0.000 sec)\n\n2.4 å­—ç¬¦ä¸²æ¯”è¾ƒå’ŒCè¯­è¨€ä¸­ç”¨çš„æ˜¯åŒä¸€ä¸ªå‡½æ•°åstrcmpï¼›\n\nç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ›´å¤§è¿”å›1ï¼›\nç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ›´å¤§è¿”å›-1ï¼›\nä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒè¿”å›0ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼›\n\næ³¨æ„å®ƒçš„æ¯”è¾ƒæ˜¯æ ¹æ®å­—ç¬¦çš„ASCIIç æ¥é€å­—ç¬¦æ¯”è¾ƒçš„ï¼Œæ¯”å¦‚å°å†™å­—æ¯çš„ASCIIç å°±æ›´å¤§ï¼Œæ‰€ä»¥ABå’Œadæ¯”è¾ƒçš„ç»“æœæ˜¯è´Ÿä¸€ã€‚\nMariaDB [stu_test]&gt; select strcmp(&#x27;AB&#x27;,&#x27;AB&#x27;);+-------------------+| strcmp(&#x27;AB&#x27;,&#x27;AB&#x27;) |+-------------------+|                 0 |+-------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;AB&#x27;,&#x27;aB&#x27;);+-------------------+| strcmp(&#x27;AB&#x27;,&#x27;aB&#x27;) |+-------------------+|                 0 |+-------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;AB&#x27;,&#x27;ad&#x27;);+-------------------+| strcmp(&#x27;AB&#x27;,&#x27;ad&#x27;) |+-------------------+|                -1 |+-------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;AB&#x27;,&#x27;ABC&#x27;);+--------------------+| strcmp(&#x27;AB&#x27;,&#x27;ABC&#x27;) |+--------------------+|                 -1 |+--------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;ABcd&#x27;,&#x27;ABC&#x27;);+----------------------+| strcmp(&#x27;ABcd&#x27;,&#x27;ABC&#x27;) |+----------------------+|                    1 |+----------------------+1 row in set (0.000 sec)\n\nä¸­æ–‡æ¯”è¾ƒåº”è¯¥ä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ï¼Œåªä¸è¿‡ä¸­æ–‡ç¼–ç è¿™æ–¹é¢æˆ‘ä¸å¤ªæ‡‚ï¼Œå°±ä¸æ·±å…¥æ¢ç©¶äº†ã€‚\nMariaDB [stu_test]&gt; select strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ å¥½å—&#x27;);+------------------------------+| strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ å¥½å—&#x27;)      |+------------------------------+|                           -1 |+------------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ &#x27;);+------------------------+| strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ &#x27;)    |+------------------------+|                      1 |+------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ å¥½&#x27;);+---------------------------+| strcmp(&#x27;ä½ å¥½&#x27;,&#x27;ä½ å¥½&#x27;)     |+---------------------------+|                         0 |+---------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select strcmp(&#x27;ä½ å¥½&#x27;,&#x27;åœ¨å—&#x27;);+---------------------------+| strcmp(&#x27;ä½ å¥½&#x27;,&#x27;åœ¨å—&#x27;)     |+---------------------------+|                        -1 |+---------------------------+1 row in set (0.000 sec)\n\n2.5 å¤§å°å†™è½¬æ¢MariaDB [stu_test]&gt; select ucase(&#x27;adfasbasdf324r&#x27;);+-------------------------+| ucase(&#x27;adfasbasdf324r&#x27;) |+-------------------------+| ADFASBASDF324R          |+-------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select lcase(&#x27;ADSB3QRdsadsfweq2&#x27;);+----------------------------+| lcase(&#x27;ADSB3QRdsadsfweq2&#x27;) |+----------------------------+| adsb3qrdsadsfweq2          |+----------------------------+1 row in set (0.000 sec)\n\n2.6 æˆªå–å­—ç¬¦ä¸²leftå’Œrightç”¨äºä»å­—ç¬¦ä¸²çš„å·¦è¾¹æˆ–å³è¾¹å¼€å§‹æˆªå–ç»™å®šé•¿åº¦çš„ä¸²\nMariaDB [stu_test]&gt; select left(&#x27;123456&#x27;,2);+------------------+| left(&#x27;123456&#x27;,2) |+------------------+| 12               |+------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select right(&#x27;123456&#x27;,2);+-------------------+| right(&#x27;123456&#x27;,2) |+-------------------+| 56                |+-------------------+1 row in set (0.000 sec)\n\nå¯¹äºä¸­æ–‡è€Œè¨€ä¹Ÿæ˜¯æˆªå–ä¸¤ä¸ªæ±‰å­—\nMariaDB [stu_test]&gt; select right(&#x27;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&#x27;,2);+-------------------------------+| right(&#x27;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&#x27;,2)       |+-------------------------------+| æµ‹è¯•                          |+-------------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select left(&#x27;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&#x27;,2);+------------------------------+| left(&#x27;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•&#x27;,2)       |+------------------------------+| è¿™æ˜¯                         |+------------------------------+1 row in set (0.000 sec)\n\nç„¶åè¿˜æœ‰substringå‡½æ•°ï¼Œå¯ä»¥ä»ç»™å®šä½ç½®æˆªå–å­—ç¬¦ä¸²\nMariaDB [stu_test]&gt; select substring(&#x27;123456&#x27;,2,2);+-------------------------+| substring(&#x27;123456&#x27;,2,2) |+-------------------------+| 23                      |+-------------------------+1 row in set (0.000 sec)\n\n2.7 å»é™¤ç©ºæ ¼ltrimå’Œrtrimç”¨äºå»é™¤å­—ç¬¦ä¸²å·¦ä¾§æˆ–è€…å³ä¾§çš„ç©ºæ ¼\nMariaDB [stu_test]&gt; select ltrim(&#x27; æµ‹è¯•&#x27;);+------------------+| ltrim(&#x27; æµ‹è¯•&#x27;)   |+------------------+| æµ‹è¯•             |+------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select rtrim(&#x27;å³è¾¹ç©ºæ ¼æµ‹è¯•              &#x27;);+-------------------------------------------+| rtrim(&#x27;å³è¾¹ç©ºæ ¼æµ‹è¯•              &#x27;)       |+-------------------------------------------+| å³è¾¹ç©ºæ ¼æµ‹è¯•                              |+-------------------------------------------+1 row in set (0.000 sec)\n\ntrimæ˜¯åŒæ—¶å»é™¤å­—ç¬¦ä¸²å·¦ä¾§å’Œå³ä¾§çš„ç©ºæ ¼ï¼Œä¸ä¼šå¯¹å­—ç¬¦ä¸²å†…éƒ¨çš„ç©ºæ ¼åšæ“ä½œ\nMariaDB [stu_test]&gt; select trim(&#x27; ç©º æ ¼ å»é™¤æµ‹è¯• &#x27;);+--------------------------------+| trim( &#x27;ç©º æ ¼ å»é™¤æµ‹è¯• &#x27;)       |+--------------------------------+| ç©º æ ¼ å»é™¤æµ‹è¯•                 |+--------------------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select trim(&#x27;ç©º æ ¼ å»é™¤æµ‹è¯•&#x27;);+------------------------------+| trim(&#x27;ç©º æ ¼ å»é™¤æµ‹è¯•&#x27;)       |+------------------------------+| ç©º æ ¼ å»é™¤æµ‹è¯•               |+------------------------------+1 row in set (0.000 sec)\n\n2.8 å­—ç¬¦ä¸²é•¿åº¦æ³¨æ„ï¼Œå½“å‰ä¸ºäº†æ”¯æŒä¸­æ–‡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†utf8ä½œä¸ºMySQLçš„å­—ç¬¦é›†ï¼Œåœ¨utf8ä¸­ä¸­æ–‡æ˜¯3å­—èŠ‚å­˜å‚¨çš„\nMariaDB [stu_test]&gt; select *,length(name) from stu;+------+--------+--------------+| id   | name   | length(name) |+------+--------+--------------+|    1 | jack   |            4 ||    2 | tom    |            3 ||    3 | kity   |            4 ||    4 | nono   |            4 ||    5 | å°æ˜   |            6 |+------+--------+--------------+5 rows in set (0.000 sec)\n\n3.æ•°å­¦å‡½æ•°\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\nabs(num)\nç»å¯¹å€¼\n\n\nbin(decimal_num)\nåè¿›åˆ¶è½¬äºŒè¿›åˆ¶\n\n\nhex(decimal_num)\nåè¿›åˆ¶è½¬åå…­è¿›åˆ¶\n\n\nconv(num,from_base,to_base)\nè¿›åˆ¶è½¬æ¢\n\n\nceiling(num)\nå‘ä¸Šå–æ•´\n\n\nfloor(num)\nå‘ä¸‹å–æ•´\n\n\nrand()\nè¿”å›éšæœºæµ®ç‚¹æ•°ï¼ŒèŒƒå›´[0.0, 1.0)\n\n\nmod(num,denominator)\nå–æ¨¡ï¼Œæ±‚ä½™\n\n\nformat(num,dnum)\nä¿ç•™numçš„dnumä½å°æ•°\n\n\n3.1 ç»å¯¹å€¼MariaDB [stu_test]&gt; select abs(-1241.12431);+------------------+| abs(-1241.12431) |+------------------+|       1241.12431 |+------------------+1 row in set (0.000 sec)\n\n3.2 è¿›åˆ¶è½¬æ¢åè¿›åˆ¶è½¬äºŒè¿›åˆ¶å’Œåå…­è¿›åˆ¶\nMariaDB [stu_test]&gt; select bin(100);+----------+| bin(100) |+----------+| 1100100  |+----------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select hex(100);+----------+| hex(100) |+----------+| 64       |+----------+1 row in set (0.000 sec)\n\nåœ¨ä»»æ„è¿›åˆ¶ä¸­è½¬æ¢ï¼Œæºè¿›åˆ¶å’Œç›®æ ‡è¿›åˆ¶éƒ½æ˜¯é€šè¿‡æ•°å­—ä¼ å…¥ï¼Œæ¯”å¦‚2/8/10/16ï¼›\nconv(ç›®æ ‡æ•°å­—,æºè¿›åˆ¶,ç›®æ ‡è¿›åˆ¶);\n\næµ‹è¯•å¦‚ä¸‹\nMariaDB [stu_test]&gt; select conv(100,2,16);+----------------+| conv(100,2,16) |+----------------+| 4              |+----------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select conv(100,16,10);+-----------------+| conv(100,16,10) |+-----------------+| 256             |+-----------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select conv(100,2,10);+----------------+| conv(100,2,10) |+----------------+| 4              |+----------------+1 row in set (0.000 sec)\n\n3.3 å‘ä¸‹å’Œå‘ä¸Šå–æ•´å‘ä¸‹å–æ•´å’Œå‘ä¸Šå–æ•´æ˜¯åŸºäºå°æ•°çš„\n\nå‘ä¸‹å–æ•´ï¼šä¸ç®¡å°æ•°æœ‰å‡ ä½ï¼Œéƒ½å»é™¤å°æ•°ï¼Œæ•´æ•°éƒ¨åˆ†ä¸å˜ï¼›\nå‘ä¸Šå–æ•´ï¼šä¸ç®¡å°æ•°æœ‰å‡ ä½ï¼Œéƒ½å»é™¤å°æ•°ï¼Œå¹¶æŠŠæ•´æ•°éƒ¨åˆ†åŠ ä¸€ï¼›\n\nMariaDB [stu_test]&gt; select ceiling(99);+-------------+| ceiling(99) |+-------------+|          99 |+-------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select floor(99.1);+-------------+| floor(99.1) |+-------------+|          99 |+-------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select ceiling(99.2);+---------------+| ceiling(99.2) |+---------------+|           100 |+---------------+1 row in set (0.000 sec)\n\n3.4 æ¨¡è¿ç®—mod(a,b); -- ç­‰ä»·äº a/b çš„ä½™æ•°\n\næ•ˆæœå¦‚ä¸‹\nMariaDB [stu_test]&gt; SELECT MOD(17, 5);+------------+| MOD(17, 5) |+------------+|          2 |+------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; SELECT MOD(15, 5);+------------+| MOD(15, 5) |+------------+|          0 |+------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; SELECT MOD(13, 5);+------------+| MOD(13, 5) |+------------+|          3 |+------------+1 row in set (0.000 sec)\n\n3.5 å°æ•°æ ¼å¼åŒ–ä½¿ç”¨formatå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¿ç•™å‡ ä½å°æ•°ã€‚\nMariaDB [stu_test]&gt; select format(3.1415,2);+------------------+| format(3.1415,2) |+------------------+| 3.14             |+------------------+1 row in set (0.000 sec)\n\n3.6 è·å–éšæœºæ•°MariaDB [stu_test]&gt; select rand();+--------------------+| rand()             |+--------------------+| 0.5338426274562652 |+--------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select rand();+--------------------+| rand()             |+--------------------+| 0.7618099523352552 |+--------------------+1 row in set (0.000 sec)\n\n4.å…¶ä»–å‡½æ•°\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\nuser()\næŸ¥è¯¢å½“å‰ç”¨æˆ·\n\n\ndatabase()\næŸ¥è¯¢å½“å‰æ‰€åœ¨æ•°æ®åº“\n\n\npassword(str)\nå¯¹å¯†ç è¿›è¡ŒåŠ å¯†\n\n\nmd5(str)\nè®¡ç®—å­—ç¬¦ä¸²çš„md5\n\n\nifnull(val1,val2)\nå¦‚æœval1ä¸ºnullï¼Œè¿”å›val2ï¼Œå¦åˆ™è¿”å›val1\n\n\nè¿™é‡Œåªå¯¹ifnullå‡½æ•°åšä¸ªæµ‹è¯•\nMariaDB [stu_test]&gt; select ifnull(null,&#x27;124&#x27;);+--------------------+| ifnull(null,&#x27;124&#x27;) |+--------------------+| 124                |+--------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select ifnull(&#x27;aba&#x27;,&#x27;124&#x27;);+---------------------+| ifnull(&#x27;aba&#x27;,&#x27;124&#x27;) |+---------------------+| aba                 |+---------------------+1 row in set (0.000 sec)MariaDB [stu_test]&gt; select ifnull(&#x27;&#x27;,&#x27;124&#x27;);+------------------+| ifnull(&#x27;&#x27;,&#x27;124&#x27;) |+------------------+|                  |+------------------+1 row in set (0.000 sec)\n\nThe endå…³äºMySQLå†…ç½®å‡½æ•°çš„ç« èŠ‚å°±è¿™äº›äº†ï¼Œå¦‚æœåç»­é‡åˆ°æœ¬æ–‡æ²¡æœ‰è®°å½•çš„å‡½æ•°ï¼Œä¼šæ›´æ–°æœ¬æ–‡ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["mysql"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘æ ‘è“æ´¾GeanyIDEå’Œæ§åˆ¶å°ä¸‹C/C++ä¸­æ–‡ä¹±ç é—®é¢˜è§£å†³æ–¹æ³•","url":"/posts/330726760/","content":"\n\n\n\næƒ…å†µè¯´æ˜ä¹‹å‰ä½¿ç”¨æ ‘è“æ´¾çš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸­æ–‡ä¹±ç çš„é—®é¢˜ã€‚\n\nVS2019ç¼–è¯‘å™¨ä¸‹å†™çš„.cæ–‡ä»¶ï¼Œé‡Œé¢çš„ä¸­æ–‡æ³¨é‡Šåœ¨æ ‘è“æ´¾ideä¸Šä¹±ç \næ ‘è“æ´¾æ§åˆ¶å°ä¸Šï¼ŒCè¯­è¨€ä»£ç è¾“å‡ºä¸­æ–‡æ—¶ä¹±ç \n\nè¿™é‡Œéœ€è¦è°ƒæ•´ä¸‰ä¸ªè®¾ç½®æ¥è§£å†³è¯¥é—®é¢˜\n1.è®¾ç½®VSï¼Œå°†æ–‡ä»¶ä¿å­˜ä¸ºUTF8ç¼–ç VS2019é»˜è®¤ç”¨çš„æ˜¯GBKç¼–ç ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬ä¸­æ–‡éœ€è¦çš„UTF8ç¼–ç \nè¿™é‡Œæˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªForce UTF-8(No BOM)æ’ä»¶æ¥è§£å†³è¯¥é—®é¢˜\n\nåœ¨VSé¡¶éƒ¨å·¥å…·æ é‡Œæ‰¾åˆ°â€œæ‹“å±•â€-ç®¡ç†æ‹“å±•\n\n\n\næœç´¢Force UTF-8(No BOM)ï¼Œæ‰¾åˆ°è¯¥æ’ä»¶å¹¶å®‰è£…\n\n\nè¿™ä¸ªæ’ä»¶çš„ä½œç”¨ï¼Œæ˜¯è®©VSä¿å­˜æ–‡ä»¶éƒ½ä½¿ç”¨UTF8ç¼–ç ä¿å­˜\nå®‰è£…å®Œæ¯•åï¼Œå¯ä»¥åœ¨åŸæœ¬æ–‡ä»¶ä¸­æ‰“ä¸€ä¸ªæ³¨é‡Šå¹¶ä¿å­˜ï¼Œè¿™æ—¶å€™.cæ–‡ä»¶å°±å·²ç»æ˜¯UTF8ç¼–ç äº†\n\n\n\næ ‘è“æ´¾ä¸­å¯ä»¥æ›´æ”¹æ–‡ä»¶ç¼–ç ï¼Œä½†è¿™ä¸ªæ›´æ”¹å¹¶ä¸ä¼šå¯¹å·²ç»ä¹±ç äº†çš„ä¸­æ–‡ç”Ÿæ•ˆ\n\næ›´æ–°22.03.01ï¼šä½¿ç”¨è¯¥æ’ä»¶å¯èƒ½ä¼šå¯¼è‡´æŠ¥é”™è¯¥æ–‡ä»¶åŒ…å«ä¸èƒ½åœ¨å½“å‰ä»£ç é¡µ(936)ä¸­è¡¨ç¤ºçš„å­—ç¬¦ã€‚è¯·å°†è¯¥æ–‡ä»¶ä¿å­˜ä¸º Unicode æ ¼å¼ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±å‡ºç°è¿™ç§æƒ…å†µéœ€è¦ç¦ç”¨æ’ä»¶ï¼Œé‡å¯VSæ‰èƒ½è§£å†³ã€‚å¦åˆ™ç¨‹åºæœ‰ä¸­æ–‡æ³¨é‡Šå°±æ— æ³•è¿è¡Œ\n2.æ›´æ”¹Geany IDEç¼–ç è®¾ç½®æ›´æ”¹å®ŒVSçš„è®¾ç½®åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹æ ‘è“æ´¾ä¸‹IDEçš„è®¾ç½®\nåœ¨ç¼–è¾‘-é¦–é€‰é¡¹é‡Œé¢é€‰æ‹©æ–‡ä»¶ï¼Œå°†ä¸¤ä¸ªè®¾ç½®é€‰é¡¹éƒ½æ”¹ä¸ºUTF8\n\n\n3.æ›´æ”¹æ ‘è“æ´¾ç³»ç»Ÿè®¾ç½®å‰é¢ä¸¤ä¸ªè®¾ç½®å®Œä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ ‘è“æ´¾çš„æ§åˆ¶ç³»ç»Ÿä¸­è¾“å…¥ä¸€ä¸²å‘½ä»¤\nsudo raspi-config\n\n\né€‰æ‹©ç¬¬4ä¸ªï¼ŒåŒºåŸŸè¯­è¨€è®¾å®šï¼Œè¿›å…¥åé€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œæ¥åˆ°å¦‚ä¸‹ç•Œé¢\n\næ‰¾åˆ°zh_cn.UTF8\n\né€‰æ‹©åï¼Œä¼šè¿›å…¥è®¾ç½®ç•Œé¢ï¼Œæç¤ºcompleteå°±å®Œæˆè®¾ç½®äº†\n\nå†æ¬¡è¿›å…¥æ ‘è“æ´¾ï¼Œç”¨æ§åˆ¶å°è¿è¡Œæˆ‘ä»¬çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ä¸­æ–‡å·²ç»æ­£å¸¸æ˜¾ç¤ºäº†ï¼\n\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹ï¼Œè°¢è°¢ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾å¼€å‘ã€‘æ ‘è“æ´¾å®‰è£…vimç¼–è¾‘å™¨ï¼ˆé™„å¸¦æ’é”™æµç¨‹ï¼‰","url":"/posts/919850587/","content":"\n\nå‰è¨€Linuxè‡ªå¸¦çš„ç¼–è¾‘å™¨æœ‰nanoå’Œviï¼Œä½†viç¼–è¾‘å™¨ä½¿ç”¨èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚\næˆ‘ä»¬è¦å…ˆåœ¨æ ‘è“æ´¾ä¸Šä¸‹è½½vimç¼–è¾‘å™¨ï¼Œå®ƒæ˜¯viç¼–è¾‘å™¨çš„å‡çº§ç‰ˆæœ¬ï¼Œä½¿ç”¨æ›´åŠ äººæ€§åŒ–\n\nä½†å®é™…ä¸Šå®‰è£…vimç¼–è¾‘å™¨å¹¶æ²¡æœ‰ç½‘ä¸Šå†™çš„é‚£ä¹ˆç®€å•ï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°äº†ç§ç§é—®é¢˜ğŸ˜­\n\n1.ç”¨puttyè½¯ä»¶é“¾æ¥æ ‘è“æ´¾Puttyè½¯ä»¶æƒ³å¿…æŠŠç©æ ‘è“æ´¾çš„ä½ åº”è¯¥æ˜¯å¾ˆç†Ÿæ‚‰çš„ã€‚\nè¾“å…¥ipåå³å¯é“¾æ¥åˆ°ä½ çš„æ ‘è“æ´¾ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œåç»­çš„æ“ä½œ\n\n2.ä¸‹è½½vimé¦–å…ˆæ›´æ–°ç´¢å¼•æº\nsudo apt-get update \n\nå®‰è£…vimç¼–è¾‘å™¨\nsudo apt-get install vim\n\n2.1é”™è¯¯ï¼š404æ— æ³•ä¸‹è½½å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰é”™è¯¯æç¤ºï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±æ˜¾ç¤ºæ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨404ï¼Œä¸”è½¯ä»¶åŒ…ä¸‹è½½å¤±è´¥\n\n\nè§£å†³æ–¹æ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨1\n\nå› ä¸ºæ ‘è“æ´¾é»˜è®¤çš„è½¯ä»¶æºæ˜¯å›½å¤–çš„ï¼Œå›½å†…å¯èƒ½é“¾æ¥ä¸å°‘ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠä¸‹è½½æºä¿®æ”¹ä¸ºå›½å†…æ¸…åçš„\néœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶æ¥è¿›è¡Œè¿™ä¸ªæ“ä½œ\nsudo nano /etc/apt/sources.list\n\nåœ¨å¥é¦–åŠ ä¸Š#æ³¨é‡Šæ‰ç¬¬ä¸€è¡Œçš„è¯­å¥åï¼Œåœ¨åé¢åŠ ä¸Šä¸‹é¢è¿™ä¸¤è¡Œè¯­å¥\næ³¨æ„ï¼šè¿™é‡Œä¸èƒ½å¤åˆ¶ç²˜è´´ï¼Œè€è€å®å®æ•²å§ğŸ˜¥\ndebç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpideb-srcç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpi\n\n\nç¼–è¾‘å¥½åï¼ŒæŒ‰CTRL+Xä¿å­˜ï¼Œå†æŒ‰yç¡®è®¤ï¼Œæœ€åæŒ‰å›è½¦å›åˆ°å‘½ä»¤è¡Œ\n\n\nå†è¿è¡Œä¸‹é¢è¿™æ¡æŒ‡ä»¤ï¼Œæ‰“å¼€å¦å¤–ä¸€ä¸ªæ–‡ä»¶\nsudo nano /etc/apt/sources.list.d/raspi.list\n\nä¾æ—§è¦#æ³¨é‡Šæ‰ç¬¬ä¸€è¡Œçš„è¯­å¥ï¼Œåœ¨æœ«å°¾åŠ ä¸Š ä¸Šé¢çš„ä¸¤ä¸ªdebè¯­å¥\ndebç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpideb-srcç©ºæ ¼http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ç©ºæ ¼stretchç©ºæ ¼mainç©ºæ ¼contribç©ºæ ¼non-freeç©ºæ ¼rpi\n\nç¼–è¾‘å¥½åï¼ŒæŒ‰CTRL+Xä¿å­˜ï¼Œå†æŒ‰yç¡®è®¤ï¼Œæœ€åæŒ‰å›è½¦å›åˆ°å‘½ä»¤è¡Œ\n\nä¸¤ä¸ªæ–‡ä»¶éƒ½ç¼–è¾‘å®Œåï¼Œä½¿ç”¨sudo apt-get updateæŸ¥çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œå¦‚æœæœ‰ä»€ä¹ˆå¥‡æ€ªçš„æŠ¥é”™ï¼Œå»ºè®®å›å»æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯å†™é”™äº†ã€‚\næˆ‘è¿™é‡Œæ˜¯è¿™æ ·çš„æƒ…å†µï¼Œå®é™…ä¸Šå®ƒå·²ç»æå®šäº†\n\nè¿™æ—¶å€™å°±å¯ä»¥å†æ¬¡ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å®‰è£…vimäº†\nsudo apt-get install vim\n\n2.2é”™è¯¯ï¼šä¸‹åˆ—è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»ä½†å¾ˆå¿«æˆ‘å°±å‡ºç°äº†ç¬¬äºŒä¸ªé—®é¢˜ğŸ‘‡\nä¸‹åˆ—è½¯ä»¶åŒ…æœ‰æœªæ»¡è¶³çš„ä¾èµ–å…³ç³»ï¼š vim : ä¾èµ–: vim-common (= 2:8.0.1453-1ubuntu1) ä½†æ˜¯ 2:8.0.1453-1ubuntu1.4 æ­£è¦è¢«å®‰è£…E: æ— æ³•ä¿®æ­£\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç¬¬ä¸€æ¬¡æ²¡æœ‰æ­£å¸¸ä¸‹è½½vimçš„æ—¶å€™ï¼Œç•™ä¸‹äº†ä¸€ä¸ªæ—§ç‰ˆæœ¬çš„å®‰è£…åŒ…\n\nè§£å†³æ–¹æ³•å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰ä¼ é€é—¨2\n\nä¾æ¬¡è¿è¡Œä¸‹é¢çš„è¯­å¥ï¼Œå¸è½½vim-common\nsudo apt-get purge vim-commonsudo apt-get updatesudo apt-get upgrade\n\n\nå®Œæˆä¸Šè¿°æ“ä½œåï¼Œå†æ¬¡å°è¯•å®‰è£…vim\nsudo apt-get install vim\n\nè¿™ä¸€æ¬¡æˆ‘æ‰æˆåŠŸæŠŠvimå®‰è£…ä¸‹æ¥\n\n\n3.æŸ¥çœ‹vimæ˜¯å¦å®‰è£…æˆåŠŸç”¨ä¸‹é¢è¿™ä¸ªæœ€ç®€å•çš„æ–¹æ³•æŸ¥çœ‹vimæœ‰æ²¡æœ‰å®‰è£…æˆåŠŸ\nvim test.txt\n\nå¦‚æœå®‰è£…å¤±è´¥ï¼Œä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ã€‚å°è¯•è·Ÿç€ä¸Šé¢çš„æ­¥éª¤å†èµ°ä¸€éï¼Œå¦‚æœè¿˜ä¸è¡Œæˆ‘ä¹Ÿä¸çŸ¥é“å’‹åŠğŸ˜‚\n-bash: vim: æœªæ‰¾åˆ°å‘½ä»¤\n\nå‡ºç°è¿™ä¸ªç•Œé¢å°±ä»£è¡¨å®‰è£…å®Œæ¯•äº†ï¼Œå¯ä»¥è¾“å…¥:qé€€å‡º\n\nå…ˆæ¥é…ç½®ä¸€ä¸‹vimç¼–è¾‘å™¨\nsudo nano /etc/vim/vimrc\n\nåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­ï¼Œç”¨æ–¹å‘é”®â¬‡æ¥åˆ°æœ€åï¼Œè¾“å…¥ä¸‹é¢çš„ä¸‰å¥è¯ï¼ˆå¯ä»¥ä¸åŠ æ³¨é‡Šï¼‰\nset nu   #æ˜¾ç¤ºè¡Œå·syntax on   #è¯­æ³•é«˜äº®set tabstop=4 # tabé€€å››æ ¼,é»˜è®¤æ˜¯8æ ¼set softtabstop=4  set shiftwidth=4  #è®¾ç½®ç¼©è¿›çš„ç©ºæ ¼æ•°set autoindent #æ¯è¡Œçš„ç¼©è¿›å€¼ä¸ä¸Šä¸€è¡Œç›¸ç­‰\n\n4.vimçš„åŸºæœ¬æ“ä½œå‰äººæ ½æ ‘ï¼Œåäººä¹˜å‡‰\n\nåŸºæœ¬æ“ä½œå‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‰åšå®¢å›­ã€\n\nå…¶å®åªæ˜¯æˆ‘æ‡’ï¼Œä¸æƒ³å†™è€Œå·²ğŸ˜¥\n5.ç”¨vimç¼–å†™ä¸€ä¸ªCè¯­è¨€ä»£ç åˆ°è¿™é‡Œï¼Œä½ çš„vimå°±åŸºæœ¬é…ç½®å®Œæ¯•å•¦ï¼è®©æˆ‘ä»¬æ¥è¯•è¯•ç”¨å®ƒå†™ä¸€ä¸ªä»£ç \nvim test.c\n\nè¿™ä¸ªä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸ªæœ€ç®€å•çš„printfä»£ç \n\nç¼–è¾‘å®Œæ¯•åï¼ŒæŒ‰ESCé€€å‡ºç¼–è¾‘çŠ¶æ€ï¼Œå›åˆ°åˆå§‹æ¨¡å¼\n\nè¾“å…¥:wqä¿å­˜å¹¶é€€å‡ºå½“å‰æ–‡ä»¶\n\nlsä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å¤šå‡ºæ¥äº†ä¸€ä¸ªtest.cçš„æ–‡ä»¶ï¼Œåé¢çš„æ“ä½œå°±æ˜¯gccæŒ‡ä»¤äº†\n\ngcc test.c -o TEST\n\nå†æ¬¡lså¯ä»¥çœ‹åˆ°å¤šå‡ºäº†ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶TESTï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œç¨‹åºæˆåŠŸè¿è¡Œ\n\nç»“è¯­åˆ°è¿™é‡Œï¼Œå’±ä»¬çš„vimç¼–è¾‘å™¨çš„åˆå§‹å­¦ä¹ å°±ç»“æŸå•¦ï¼åç»­è¿›é˜¶çš„æŒ‡ä»¤å­¦ä¹ ï¼Œå¤§å®¶å¯ä»¥çœ‹ç¬¬4ç‚¹ä¸­åšä¸»çš„è®²è§£å¶ï¼\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ01-åŒè‰²LED","url":"/posts/3585041582/","content":"\n\nå‰è¨€ä»Šæ™šä¸Šæ²¡å•¥äº‹ï¼ˆå…¶å®ä½œä¸šæ²¡å†™å®Œï¼‰ï¼Œå°±å¼€å§‹æŠ˜è…¾æ ‘è“æ´¾äº†\næˆ‘å½“åˆä¹°çš„æ˜¯æ ‘è“æ´¾4B(4GB)ç‰ˆæœ¬çš„å¥—ä»¶ï¼Œä¸œè¥¿è¿˜æ˜¯éå¸¸å…¨çš„ï¼Œåº—å®¶è¿˜é€äº†å…¨å¥—å­¦ä¹ èµ„æ–™+æŒ‡å¯¼è§†é¢‘ï¼ŒåŠ ä¸Šä¸€æœ¬è¿˜ç®—ä¸é”™çš„ä¹¦ã€‚\næœ¬ç¯‡åšå®¢ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥å®Œæˆç¬¬ä¸€ä¸ªå®éªŒï¼šåŒè‰²LED\n\nå­¦ä¹ èµ„æ–™æ¥æºäºï¼šæ¹–å—åˆ›ä¹åšæ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸\næœ¬åšå®¢ä»…ä¾›å‚è€ƒï¼Œè¯·å‹¿è½¬è½½ï¼\n\n\n1.å®éªŒå™¨æ\nè£…å¥½ç³»ç»Ÿçš„æ ‘è“æ´¾å¼€å‘æ¿+ç”µæºé€‚é…å™¨\né¢åŒ…æ¿+Tå‹è½¬æ¥æ¿\n40pè½¯æ’çº¿\nåŒè‰²LED\nè‹¥å¹²è·³çº¿\n\n\n2.å®éªŒåŸç†å°†å¼•è„šSï¼ˆç»¿è‰²ï¼‰å’Œä¸­é—´ç®¡è„šï¼ˆçº¢è‰²ï¼‰é“¾æ¥åˆ°é¢åŒ…æ¿çš„æ¥å£ä¸Šï¼Œå¯¹æ ‘è“æ´¾è¿›è¡Œç¼–ç¨‹æ§åˆ¶ï¼Œä½¿LEDçš„é¢œè‰²ç”±çº¢å˜ç»¿ã€‚å¹¶åˆ©ç”¨PWMæ··åˆæˆå…¶ä»–é¢œè‰²ã€‚\n\nå¯¹åº”æ¥çº¿è¡¨æ ¼\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPI01\nGPI018\nS\n\n\nGPI00\nGPI017\nR\n\n\nGND\nGND\nGND\n\n\nå®é™…æ¥çº¿å›¾å¦‚ä¸‹ï¼ˆæ‰‹æœºç”»è´¨ä¹Ÿå¤ªæ¸£äº†ï¼‰\n\n3.æ§åˆ¶ä»£ç å½“æ ‘è“æ´¾éœ€è¦ä¸å¤–éƒ¨å…ƒä»¶ç›¸æ¥æ—¶ï¼Œè¦ç”¨åˆ°ä¸€äº›å†™å¥½çš„åº“ã€‚å¦‚æ ‘è“æ´¾wiringPiåº“\n\næ ‘è“æ´¾wiringPiåº“ï¼šwiringPiæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ ‘è“æ´¾IOæ§åˆ¶åº“ï¼Œä½¿ç”¨Cè¯­è¨€å¼€å‘ï¼Œæä¾›äº†ä¸°å¯Œçš„æ¥å£ï¼šGPIOæ§åˆ¶ï¼Œä¸­æ–­ï¼Œå¤šçº¿ç¨‹ï¼Œç­‰ç­‰\n\nè¿˜æœ‰softPwm.håº“ï¼šGitHubé“¾æ¥\n\næœ¬æ¬¡åŒè‰²LEDå®éªŒéœ€è¦ç”¨åˆ°çš„å°±æ˜¯è¿™ä¸¤ä¸ªåº“ï¼Œä»¥åŠCè¯­è¨€è‡ªå¸¦çš„åº“å‡½æ•°stdio.h\nä»£ç å¦‚ä¸‹ï¼š\n#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define uchar unsigned char#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init(void)&#123;\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);&#125;// è®¾ç½®LED äº®åº¦PWMè°ƒèŠ‚èŒƒå›´æ˜¯0x00-0xffvoid makerobo_led_ColorSet(uchar r_val, uchar g_val)&#123;\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);&#125;int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tmakerobo_led_Init(); // LED åˆå§‹åŒ–\twhile(1)&#123;\t\tmakerobo_led_ColorSet(0xff,0x00);   //çº¢è‰²\t\t\tdelay(500);                         //å»¶æ—¶500ms\t\tmakerobo_led_ColorSet(0x00,0xff);   //ç»¿è‰²\t\tdelay(500);\t\tmakerobo_led_ColorSet(0xff,0x45);\t\t\tdelay(500);\t\tmakerobo_led_ColorSet(0xff,0xff);\t\t\tdelay(500);\t\tmakerobo_led_ColorSet(0x7c,0xfc);\t\t\tdelay(500);\t&#125;\treturn 0;&#125;\n\nåœ¨wiringPiåº“ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå‡½æ•°çš„ä½¿ç”¨è¯´æ˜\n\nCreateå‡½æ•°ç›¸å½“äºåˆå§‹åŒ–é’ˆè„š\nWriteå‡½æ•°ä¼šæ›´æ”¹è¯¥ç®¡è„šçš„pwmå€¼ï¼Œä»¥è¾¾åˆ°æ§åˆ¶LEDäº®åº¦çš„ç›®çš„\n\n\n3.1æ˜¾ç¤ºå™¨çš„PWMè°ƒå…‰å’ŒDCè°ƒå…‰å¦‚æœä½ æœ‰äº†è§£è¿‡æ˜¾ç¤ºå™¨çš„é€‰è´­çŸ¥è¯†ï¼Œä¼°è®¡å¬è¯´è¿‡æ˜¾ç¤ºå™¨çš„PWMè°ƒå…‰å’ŒDCè°ƒå…‰ã€‚\nä½¿ç”¨DCè°ƒå…‰çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•èƒŒå…‰å°†å¸¸äº®ï¼›ä½¿ç”¨PWMè°ƒå…‰çš„æ˜¾ç¤ºå™¨ï¼Œå±å¹•èƒŒå…‰å°†é«˜é€Ÿå¼€å…³æ¥ç‚¹äº®å±å¹•ã€‚åªè¦PWMé«˜äºä¸€å®šå€¼ï¼Œäººçœ¼å°±åˆ†è¾¨ä¸å‡ºè¯¥å±å¹•çš„é—ªçƒã€‚å½“ä¸€å—æ˜¾ç¤ºå™¨ä½¿ç”¨é«˜é¢‘PWMè°ƒå…‰æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä¸DCè°ƒå…‰æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚\nä½†æ€»çš„æ¥è¯´ï¼Œä½¿ç”¨DCè°ƒå…‰æŠ€æœ¯çš„æ˜¾ç¤ºå™¨æ›´åŠ â€œæŠ¤çœ¼â€ï¼Œè€Œä½¿ç”¨ä½é¢‘PWMè°ƒå…‰çš„æ˜¾ç¤ºå™¨å°±æ˜¯æåº¦è¾£çœ¼ç›ï¼ˆè¿™ä¹Ÿæ˜¯æœ‰äº›å±å¹•åœ¨æ‘„åƒå¤´ä¸­ä¼šå±é—ªçš„åŸå› ï¼‰\nç›®å‰ä¸»æµæ‰‹æœºéƒ½ä¸Šäº†OLEDå±å¹•ï¼Œè¯¥å±å¹•æè´¨æ™®éä½¿ç”¨çš„æ˜¯PWMè°ƒå…‰ã€‚éƒ¨åˆ†æ‰‹æœºå‚å®¶åœ¨å±å¹•è®¾ç½®ä¸­æ¨å‡ºäº†â€œç±»DCè°ƒå…‰é€‰é¡¹â€ï¼Œå…¶åŸç†å°±æ˜¯ç”¨é«˜é¢‘PWMæ¥æ¨¡æ‹ŸDCè°ƒå…‰ã€‚\n\nå¦‚æœä½ æƒ³äº†è§£è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªè§†é¢‘ğŸ‘‰é“¾æ¥\n\nå¥½åƒbbäº†ä¸€äº›å’Œè¿™ä¸ªå®éªŒæ²¡å•¥å…³ç³»çš„å†…å®¹ï¼Œèµ¶å¿«å›åˆ°æ­£é¢˜ï¼\n\n3.2 ç¼–è¯‘ä»£ç æ ‘è“æ´¾ä¸­æœ‰ä¸¤ç§æ–¹å¼ç¼–è¯‘è¿è¡Œæˆ‘ä»¬çš„ä»£ç \n3.2.1ç›´æ¥ä½¿ç”¨Geanyç¼–è¯‘å™¨å†…éƒ¨é€‰é¡¹\n\n3.2.2 ä½¿ç”¨linuxè¯­è¨€æ ‘è“æ´¾çš„ç³»ç»Ÿæ˜¯åŸºäºlinuxçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨linuxä¸­çš„gccè¯­è¨€æ¥ç¼–è¯‘è¿™ä¸ª.cæ–‡ä»¶\n\nåœ¨æœ¬ä¸“æ ä¹‹å‰çš„åšå®¢ä¸­ï¼Œæœ‰ä»‹ç»è¿‡è¿™ç§æ–¹å¼ğŸ‘‰é“¾æ¥\n\n\nè¾“å…¥æŒ‡ä»¤ï¼Œä½ ä¼šå‘ç°ç³»ç»ŸæŠ¥é”™æ˜¾ç¤ºdelayå‡½æ•°æœªå®šä¹‰\nundefined reference to `delay`\n\n\nè¿™æ˜¯å› ä¸ºdelayå‡½æ•°å¹¶ä¸æ˜¯ä¸€ä¸ªCè¯­è¨€çš„åº“å‡½æ•°æˆ‘ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰é¢è‡ªå·±æ•´ä¸€ä¸ªdelayå‡½æ•°çš„åŸå‹\n\nç¬¬ä¸€æ¬¡ä½¿ç”¨Geanyç¼–è¯‘çš„æ—¶å€™å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Geanyé‡Œé¢å·²ç»ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨äº†wiringPiåº“\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\n// å»¶æ—¶zæ¯«ç§’çš„delayå‡½æ•°void delay(unsigned int z)&#123;    unsigned int i,j;    for(i=z;i&gt;0;i--)        for(j=110;j&gt;0;j--)            ;//åˆ©ç”¨æ— æ„ä¹‰çš„forå¾ªç¯æ¥è¿›è¡Œå»¶æ—¶&#125;\n\næˆ‘ä»¬åœ¨linuxæ§åˆ¶å°ä¸­ç”¨cdæ‰“å¼€æ–‡ä»¶è·¯å¾„åï¼Œè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤\n1. gcc 01DuoColorLED.c -o GPIO -lwiringPi2. -lwiringPié€‰é¡¹ï¼Œé“¾æ¥WiringPiåº“ã€‚\n\nç¬¬ä¸€æ¡æŒ‡ä»¤æ˜¯ç¼–è¯‘ç¨‹åºï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶GPIO\n\nä½¿ç”¨./GPIOæŒ‡ä»¤æ¥æ‰§è¡Œæ­¤æ–‡ä»¶\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨è¿™ç§æ–¹æ³•è¿è¡Œç¨‹åºä¸å¤ªæ–¹ä¾¿ç»ˆæ­¢ï¼Œä½ å¯ä»¥å»æ‰mainå‡½æ•°ä¸­çš„whileå¾ªç¯ï¼Œè®©å˜è‰²åªæ‰§è¡Œä¸€æ¬¡ã€‚\n\næ‰€ä»¥åœ¨è¿›è¡Œæ­¤ç±»å¼€å‘æ—¶ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨Geanyç¼–è¯‘å™¨ï¼Œå› ä¸ºå®ƒä¼šç”Ÿæˆä¸€ä¸ªå‰å°æ§åˆ¶é¢æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ctrl+cåœæ­¢ç¨‹åº\n\nå¥‡æ€ªçš„æ˜¯ï¼Œå½“æˆ‘è¿è¡Œç¬¬ä¸€ä¸ªGeanyç¼–è¯‘å™¨ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼ŒLEDä¼šæ­£å¸¸å˜è‰²ã€‚\nä½†æ˜¯è¿è¡Œç¬¬äºŒä¸ªåœ¨linuxæ§åˆ¶å°ç”Ÿæˆçš„GPIOæ–‡ä»¶æ—¶ï¼Œå´ä¸èƒ½å˜è‰²ã€‚ä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› \n\nè€Œå½“æˆ‘é‡æ–°ç”¨Geanyç¼–è¯‘å™¨ç¼–è¯‘è¿™ä»½åŠ äº†delayå‡½æ•°å®šä¹‰çš„ä»£ç æ—¶ï¼Œå‘ç°è¿™ä¸ªdelayå‡½æ•°è¿˜æ˜¯ä¸å¤ªè¡Œå•Šï¼è¿™ç¯éƒ½é—ªçš„é£å¿«ï¼ŒçœŸçš„æœ‰500mså—\n\nä¸è¿‡è¿™ä¹Ÿä¸ç®—ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå’±ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´delayå‡½æ•°çš„å®šä¹‰ï¼Œå’Œè°ƒç”¨å‚æ•°æ¥æ§åˆ¶\n\n4.å¦‚ä½•åœ¨ä½¿ç”¨é¢åŒ…æ¿çš„åŒæ—¶ä½¿ç”¨æ•£çƒ­å°é£æ‰‡åŸæœ¬ä¸ä½¿ç”¨é¢åŒ…æ¿çš„æ—¶å€™ï¼Œå°é£æ‰‡å¯ä»¥æ’åœ¨æ¿è½½é’ˆè„šçš„2ã€3ä½\n\nä½†æ˜¯ç°åœ¨ä½¿ç”¨äº†é¢åŒ…æ¿ï¼Œè¿™æ•´ä¸ªé’ˆè„šéƒ½è¢«å ç”¨äº†ï¼Œé£æ‰‡å¾€å“ªé‡Œæ’å‘¢ï¼Ÿ\nå¾ˆç®€å•ï¼Œä½¿ç”¨ä¸¤æ ¹è·³çº¿ï¼Œå°†é£æ‰‡ä¸é¢åŒ…æ¿ä¸Šçš„5vå’ŒGNDé“¾æ¥å°±è¡Œäº†ï¼\n\nçº¢çº¿æ¥5V\né»‘çº¿æ¥GND\n\n\n\nç»“è¯­ä¸ç®¡å¦‚ä½•ï¼Œè¿™æ¬¡å®éªŒç®—æ˜¯å®Œç¾å®Œæˆå•¦ï¼\nè¿™ä¹Ÿæ˜¯æˆ‘åœ¨æ ‘è“æ´¾ä¸Šåšçš„ç¬¬ä¸€ä¸ªå®éªŒ\n\nå¦‚æœä½ æƒ³å’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾ï¼Œé‚£å°±å…³æ³¨æœ¬ä¸“æ å§ï¼\næ¬¢è¿staræœ¬ä¸“æ ä»£ç ä»“åº“ï¼šGITEEé“¾æ¥\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€é¡¹ç›®ã€‘é«˜å¹¶å‘å†…å­˜æ± é¡¹ç›®çš„å­¦ä¹ ","url":"/posts/4231483511/","content":"å­¦ä¹ ä¸€ä¸‹ç±»ä¼¼äºè°·æ­Œtcmallocçš„é«˜å¹¶å‘å†…å­˜æ± ã€‚\né¡¹ç›®ä»£ç éƒ½åœ¨GitHubä¸Šäº†ï¼Œæœ¬æ–‡æ˜¯å¯¹é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­çš„è®¾è®¡å­¦ä¹ ä»¥åŠé‡åˆ°é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚\nå¤‡æ³¨ï¼šå½“å‰é¡¹ç›®åœ¨Linuxä¸Šè¿è¡Œæœ‰äº›é—®é¢˜ï¼ˆmmapåœ°å€å¯¹é½æ²¡æœ‰è§£å†³ï¼‰ï¼Œæ‰€ä»¥æš‚æ—¶åªèƒ½åœ¨win32ä¸Šå¼€å‘ï¼\n1.ä»€ä¹ˆæ˜¯å†…å­˜æ± æ ¸å¿ƒæ€æƒ³ï¼šå†…å­˜æ± é¢„å…ˆç”³è¯·å¤§å—å†…å­˜ï¼Œå½“å…¶ä»–ä»£ç éœ€è¦ç”³è¯·å †åŒºå†…å­˜æ—¶ï¼Œä¸è°ƒç”¨malloc&#x2F;newï¼Œè€Œæ˜¯è°ƒç”¨æˆ‘ä»¬è‡ªå·±å®ç°çš„å†…å­˜æ± çš„æ¥å£æ¥ç”³è¯·å†…å­˜ã€‚\nå› ä¸ºå†…å­˜æ± é‡Œé¢å·²ç»é¢„å…ˆç”³è¯·äº†å¾ˆå¤šå†…å­˜ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç›´æ¥åˆ†é…ç»™å…¶ä»–æ¨¡å—ã€‚è€Œåˆ†é…å·²ç»ç”³è¯·çš„å†…å­˜ä¼šæ¯”ä½¿ç”¨malloc&#x2F;newå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜å¿«éå¸¸å¤šï¼\n\nè¿™å°±å¥½æ¯”åœ¨å®¶é‡Œå±¯ä¸€ç‚¹çº¸å·¾ï¼Œå½“çº¸å·¾æ²¡äº†ï¼Œç›´æ¥ç”¨å®¶é‡Œçš„çº¸å·¾ï¼Œä¸ç”¨å»å°å–éƒ¨é‡æ–°ä¹°äº†ï¼Œè‡ªç„¶ä¼šå¿«ä¸€äº›ã€‚\n\nè€Œmalloc&#x2F;newè¿™äº›èƒ½é€‚é…æ‰€æœ‰åœºæ™¯çš„å†…å­˜ç”³è¯·å‡½æ•°ï¼Œè‡ªç„¶ä¼šæœ‰é¢å¤–çš„æ€§èƒ½æŸå¤±ï¼Œå½“ä¸€ä¸ªç³»ç»Ÿå¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„æ—¶å€™ï¼Œä½¿ç”¨å†…å­˜æ± æ¥é¢„å…ˆç”³è¯·+åˆ†é…å†…å­˜ï¼Œå°±å¯ä»¥èŠ‚çœä¸å°‘çš„æ—¶é—´ï¼Œæé«˜ç³»ç»Ÿè¿è¡Œæ•ˆç‡ã€‚\nå› ä¸ºæˆ‘ä»¬æ˜¯è‡ªå·±å®ç°äº†ä¸€ä¸ªå†…å­˜æ± ï¼Œç›¸å½“äºæ›¿ä»£äº†malloc&#x2F;newçš„å·¥ä½œï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨åº•å±‚çš„ç³»ç»Ÿè°ƒç”¨æ¥å£æ¥ç›´æ¥å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼ˆmalloc&#x2F;newä¼šæœ‰é¢å¤–å°è£…ï¼‰\n\nwindows: VirtualAlloc\nLinux: BRKæˆ–MMAP\n\nåˆ†é…å†…å­˜åï¼Œå¦‚æœæ˜¯C++çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å®šä½newæ¥è°ƒç”¨ç±»çš„æ„é€ å‡½æ•°ã€‚\n1.1 ä»€ä¹ˆæ˜¯é«˜å¹¶å‘å†…å­˜æ± è¿™ä¸ªé¡¹ç›®æƒ³å®ç°çš„é«˜å¹¶å‘å†…å­˜æ± ï¼Œå°±æ˜¯åœ¨å®ç°ä¸€ä¸ªå†…å­˜æ± çš„åŸºç¡€ä¸Šï¼Œè¦æ»¡è¶³å¤šçº¿ç¨‹é«˜å¹¶å‘è¯·æ±‚ç©ºé—´ç”³è¯·æ—¶çš„æ€§èƒ½å’Œä¸å‡ºé”™ã€‚\nè¿™å°±æ¶‰åŠåˆ°å¤šçº¿ç¨‹ç«äº‰ä»¥åŠåŠ é”æœºåˆ¶äº†ï¼Œåæ–‡ä¼šè¡¥å…¨ã€‚\n1.2 å†…ç¢ç‰‡å’Œå¤–ç¢ç‰‡\nå†…ç¢ç‰‡ï¼šçº¿ç¨‹æ± å†…éƒ¨åˆ†é…äº†å´æ²¡æœ‰ä½¿ç”¨çš„å†…å­˜\nå¤–ç¢ç‰‡ï¼šè¿›ç¨‹åœ°å€ç©ºé—´ä¸­ï¼Œåˆ†é…äº†å¤šå—å†…å­˜ï¼Œæ²¡æœ‰å…¨éƒ¨å›æ”¶ï¼Œå¯¼è‡´å‰©ä½™çš„å†…å­˜è™½ç„¶æœ‰è¶³å¤Ÿå¤§å°ï¼Œä½†ä¸è¿ç»­ï¼Œæ— æ³•å®ç°å¤§å†…å­˜åˆ†é…ã€‚\n\nå†…ç¢ç‰‡å’Œå¤–ç¢ç‰‡çš„åœºæ™¯å¦‚ä¸‹å›¾æ‰€ç¤º\n\nå‡è®¾ä¸€ä¸ªè¿›ç¨‹ç”³è¯·äº†512KBçš„å†…å­˜ï¼Œå´å§‹ç»ˆåªä½¿ç”¨äº†400KBï¼Œè¿™é‡Œå°±å‡ºç°äº†112KBçš„å†…ç¢ç‰‡ï¼ˆç”³è¯·äº†ä½†æ²¡æœ‰å®Œå…¨ä½¿ç”¨ï¼‰ï¼›\nå¤–ç¢ç‰‡å°±çœ‹å›¾å§ï¼Œæ–‡å­—æè¿°ä¸æ¸…æ¥šã€‚\n2.å®šé•¿å†…å­˜æ± çš„å®ç°2.1 æ€è·¯å¯¹äºå®šé•¿å†…å­˜æ± è€Œè¨€ï¼Œå®ç°æ¯”è¾ƒç®€å•\n\nç”³è¯·å¤§å—ç©ºé—´ï¼›\nä½¿ç”¨é“¾è¡¨çš„æ–¹å¼æ¥é“¾æ¥è¿™äº›ç©ºé—´ï¼›\nå½“ç”³è¯·çš„æ—¶å€™ï¼Œé‡Šæ”¾é“¾è¡¨å¤´éƒ¨çš„ç©ºé—´ï¼›\nå½“é”€æ¯çš„æ—¶å€™ï¼Œä½¿ç”¨é“¾è¡¨å¤´æ’å°†ç©ºé—´å¤åŸåˆ°é“¾è¡¨ä¸­ï¼›\nå½“ç©ºé—´ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼ˆé“¾è¡¨ä¸ºç©ºï¼‰é‡æ–°ç”³è¯·å¤§å—ç©ºé—´ï¼›\n\nä¸ºäº†å®ç°é“¾è¡¨çš„ç»“æ„ï¼Œå®šé•¿å†…å­˜æ± çš„å•ä¸ªç©ºé—´åˆ†ç‰‡çš„å¤§å°åº”è¯¥å¤§äºå¹³å°ä¸­ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼ˆä¸ç„¶æ²¡æœ‰åŠæ³•å®ç°æŒ‡å‘ä¸‹ä¸€å—ç©ºé—´çš„åœ°å€ï¼‰\nå› ä¸ºå†…å­˜æ± ä¸­çš„å†…å­˜å·²ç»è¢«åˆ†é…å‡ºå»äº†ï¼ˆä¼šæœ‰ç¢ç‰‡ï¼‰æ‰€ä»¥å†…å­˜æ± ç”³è¯·çš„å†…å­˜æ˜¯ä¸èƒ½è¢«é‡Šæ”¾çš„ã€‚å¦‚æœä¸€ç›´æ²¡æœ‰æ¨¡å—ä»å†…å­˜æ± ä¸­ç”³è¯·å†…å­˜ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜çš„æµªè´¹ã€‚ä½†è¿™å’Œå†…å­˜æ± çš„åŠŸèƒ½ç›¸æ‚–ï¼šå¦‚æœç³»ç»Ÿç”³è¯·å†…å­˜çš„é¢‘ç‡å¾ˆä½ï¼Œé‚£è¯´æ˜ä¸éœ€è¦å†…å­˜æ± çš„ä»‹å…¥ã€‚\nåªè¦æœ€ç»ˆå†…å­˜æ± çš„è¿›ç¨‹æ˜¯æ­£å¸¸ç»“æŸçš„ï¼Œè¿™äº›è¢«ç”³è¯·çš„å†…å­˜éƒ½ä¼šè¢«æ“ä½œç³»ç»Ÿæ‰˜ç®¡å’Œé‡Šæ”¾ã€‚\n2.2 å›¾è§£åˆå§‹åŒ–çº¿ç¨‹æ± æ—¶ï¼Œä¼šå…ˆç”³è¯·å¤§å—å†…å­˜ï¼Œå¹¶ç”¨æŒ‡é’ˆæŒ‡å‘å†…å­˜å¼€å¤´ã€‚\nå½“æœ‰æ¨¡å—ç”³è¯·å†…å­˜æ—¶ï¼Œå°†å†…å­˜å¼€å¤´çš„éƒ¨åˆ†åˆ†é…å‡ºå»ï¼Œå¹¶å‘åç§»åŠ¨æŒ‡é’ˆï¼ˆåŒæ—¶è¿˜éœ€å°†å†…å­˜å¤§å°è®¡æ•°å™¨ç»™å‡å°ï¼‰\n\nå½“å›æ”¶å†…å­˜æ—¶ï¼Œå°†å¦å¤–ä¸€ä¸ªæŒ‡é’ˆFREELISTæŒ‡å‘è¢«å›æ”¶å†…å­˜çš„å¼€å¤´ï¼Œå¹¶å°†è¢«å›æ”¶å†…å­˜çš„å‰4&#x2F;8ä¸ªå­—èŠ‚æŒ‡å‘NULLPTRæˆ–è€…å¦å¤–ä¸€ä¸ªè¢«å›æ”¶çš„å†…å­˜åˆ†ç‰‡ã€‚\n\nå½“FREELISTä¸ºç©ºï¼Œä¸”ç”¨äºæ ‡ç¤ºé¢„å…ˆç”³è¯·çš„å¤§å—å†…å­˜å‰©ä½™å®¹é‡çš„sizeä¸º0çš„æ—¶å€™ï¼Œå°±éœ€è¦é‡æ–°ç”³è¯·å†…å­˜äº†ï¼ˆä»£è¡¨å½“å‰çº¿ç¨‹æ± å·²ç»æ²¡æœ‰å¯åˆ†é…çš„å†…å­˜ï¼‰\n\nå®šé•¿å†…å­˜æ± çš„æ€è·¯è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚\n2.3 ä»£ç å®ç°#include &lt;stdlib.h&gt;template&lt;class T&gt;class FixMemoryPool&#123;public:\tT* New()\t&#123;\t\tT* obj = nullptr;\t\t// ä¼˜å…ˆæŠŠè¿˜å›æ¥å†…å­˜å—å¯¹è±¡ï¼Œå†æ¬¡é‡å¤åˆ©ç”¨\t\tif (_freeList)\t\t&#123;\t\t\tvoid* next = *((void**)_freeList);\t\t\tobj = (T*)_freeList;\t\t\t_freeList = next;\t\t&#125;\t\telse\t\t&#123;\t\t\t// å‰©ä½™å†…å­˜ä¸å¤Ÿä¸€ä¸ªå¯¹è±¡å¤§å°æ—¶ï¼Œåˆ™é‡æ–°å¼€å¤§å—ç©ºé—´\t\t\tif (_remainBytes &lt; sizeof(T))\t\t\t&#123;\t\t\t\t_remainBytes = 128 * 1024;\t\t\t\t_memory = (char*)malloc(_remainBytes);\t\t\t\tif (_memory == nullptr)\t\t\t\t&#123;\t\t\t\t\tthrow std::bad_alloc();\t\t\t\t&#125;\t\t\t&#125;\t\t\tobj = (T*)_memory;\t\t\tsize_t objSize = sizeof(T) &lt; sizeof(void*) ? sizeof(void*) : sizeof(T);\t\t\t_memory += objSize;\t\t\t_remainBytes -= objSize;\t\t&#125;\t\t// å®šä½newï¼Œæ˜¾ç¤ºè°ƒç”¨Tçš„æ„é€ å‡½æ•°åˆå§‹åŒ–\t\tnew(obj)T; // å³ä¾¿æ˜¯PODç±»å‹ä¹Ÿæ˜¯æœ‰ä¸ªæ„é€ å‡½æ•°çš„\t\treturn obj;\t&#125;\tvoid Delete(T* obj)\t&#123;\t\t// æ˜¾ç¤ºè°ƒç”¨ææ„å‡½æ•°\t\tobj-&gt;~T();\t\t// å¤´æ’ï¼Œä½¿ç”¨void*å¼ºè½¬èƒ½ä¿è¯è½¬æ¢åçš„ç©ºé—´ä¸€å®šæ˜¯ä¸ªæŒ‡é’ˆçš„å¤§å°\t\t*(void*)obj = _freeList; // æŒ‡å‘åŸæœ¬çš„freelistå¼€å¤´çš„åœ°å€\t\t_freeList = obj; // æ›´æ–°å¤´èŠ‚ç‚¹\t&#125;private:\tchar* _memory = nullptr; // æŒ‡å‘å¤§å—å†…å­˜çš„æŒ‡é’ˆ\tsize_t _remainBytes = 0; // å¤§å—å†…å­˜åœ¨åˆ‡åˆ†è¿‡ç¨‹ä¸­å‰©ä½™å­—èŠ‚æ•°\tvoid* _freeList = nullptr; // è¿˜å›æ¥è¿‡ç¨‹ä¸­é“¾æ¥çš„è‡ªç”±é“¾è¡¨çš„å¤´æŒ‡é’ˆ&#125;;\n\n2.4 æ€§èƒ½æµ‹è¯•ä¸‹é¢ç”¨å¾ªç¯ç”³è¯·å†…å­˜çš„æ–¹å¼æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªå®šé•¿å†…å­˜æ± çš„æ•ˆæœã€‚\n#include &lt;iostream&gt;#include &lt;cstdlib&gt;#include &lt;vector&gt;#include &lt;ctime&gt;using namespace std;struct TreeNode&#123;\tint _val;\tTreeNode* _left;\tTreeNode* _right;\tTreeNode()\t\t:_val(0)\t\t, _left(nullptr)\t\t, _right(nullptr)\t&#123;&#125;&#125;;int main()&#123;\tconst size_t Rounds = 5; // ç”³è¯·é‡Šæ”¾çš„è½®æ¬¡\tconst size_t N = 100000; // æ¯è½®ç”³è¯·é‡Šæ”¾å¤šå°‘æ¬¡\tstd::vector&lt;TreeNode*&gt; v1;\tv1.reserve(N);\t// newçš„è€—æ—¶æµ‹è¯•\tsize_t begin1 = clock();\tfor (size_t j = 0; j &lt; Rounds; ++j)\t&#123;\t\tfor (int i = 0; i &lt; N; ++i)\t\t&#123;\t\t\tv1.push_back(new TreeNode);\t\t&#125;\t\tfor (int i = 0; i &lt; N; ++i)\t\t&#123;\t\t\tdelete v1[i];\t\t&#125;\t\tv1.clear();\t&#125;\tsize_t end1 = clock();\tstd::vector&lt;TreeNode*&gt; v2;\tv2.reserve(N);\t// å®šé•¿å†…å­˜æ± çš„è€—æ—¶æµ‹è¯•\tFixMemoryPool&lt;TreeNode&gt; TNPool;\tsize_t begin2 = clock();\tfor (size_t j = 0; j &lt; Rounds; ++j)\t&#123;\t\tfor (int i = 0; i &lt; N; ++i)\t\t&#123;\t\t\tv2.push_back(TNPool.New());\t\t&#125;\t\tfor (int i = 0; i &lt; N; ++i)\t\t&#123;\t\t\tTNPool.Delete(v2[i]);\t\t&#125;\t\tv2.clear();\t&#125;\tsize_t end2 = clock();\tcout &lt;&lt; &quot;new cost time:&quot; &lt;&lt; end1 - begin1 &lt;&lt; endl;\tcout &lt;&lt; &quot;memory pool cost time:&quot; &lt;&lt; end2 - begin2 &lt;&lt; endl;\treturn 0;&#125;\n\nä½¿ç”¨vs2019çš„x86-debugæ¨¡å¼ä¸‹è¿è¡Œï¼ŒäºŒè€…çš„æ—¶é—´æ¶ˆè€—å·²ç»å¯¹æ¯”æ˜æ˜¾\nnew cost time:195memory pool cost time:100\n\nä½¿ç”¨x86-releaseçš„æ¨¡å¼è¿è¡Œï¼Œæ—¶é—´æ¶ˆè€—å·®è·å°±æ›´å¤§äº†\nnew cost time:21memory pool cost time:1\n\nè¿™å°±æ˜¯çº¿ç¨‹æ± å­˜åœ¨çš„æ„ä¹‰ã€‚\n3.æ•´ä½“æ¡†æ¶è®¾è®¡ç®€å•å®ç°äº†ä¸€ä¸ªå®šé•¿çš„å†…å­˜æ± ï¼Œä¸‹é¢å°±è¦å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªé«˜å¹¶å‘çš„å†…å­˜æ± ã€‚è°·æ­Œçš„tcmallocåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿè®¾è®¡æ—¶ä¹Ÿéœ€è¦è€ƒè™‘ç›¸å…³çš„é—®é¢˜ï¼š\n\næ€§èƒ½åº”è¯¥ä¼˜äºmalloc&#x2F;newï¼›\nå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ç«äº‰å’Œé”ç”³è¯·é—®é¢˜ï¼›\nå†…å­˜ç¢ç‰‡é—®é¢˜ï¼›\n\næœ€ç»ˆçš„è®¾è®¡ä¸»è¦ç”±ä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†æ„æˆ\n\nThreadCacheï¼šä¾›æ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰ï¼Œç”¨äºå°äº256KBçš„å†…å­˜åˆ†é…ï¼Œå› ä¸ºæ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰ä¸€ä¸ªThreadCacheï¼Œçº¿ç¨‹ä»è¿™é‡Œç”³è¯·å†…å­˜æ—¶ä¸éœ€è¦åŠ é”ï¼Œæ•ˆç‡é«˜ï¼›\nCentralCacheï¼šä¸­å¿ƒç¼“å­˜ä¾›æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼ŒThreadCacheæŒ‰éœ€ä»CentralCacheä¸­è·å–å†…å­˜ã€‚CentralCacheåœ¨åˆé€‚çš„æ—¶å€™å›æ”¶åˆ†é…ç»™çº¿ç¨‹çš„ThreadCacheï¼Œé¿å…æŸä¸ªçº¿ç¨‹å ç”¨å¤ªå¤šæœªä½¿ç”¨çš„å†…å­˜ï¼Œè¾¾åˆ°å¤šä¸ªçº¿ç¨‹å‡è¡¡è°ƒåº¦çš„ç›®çš„ã€‚CentralCacheå­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œéœ€è¦åŠ é”ï¼›\nPageCacheï¼šä»¥é¡µä¸ºå•ä½å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ã€‚å½“CentralCacheæ²¡æœ‰å†…å­˜å¯åˆ†é…æ—¶ä¼šå‘PageCacheç”³è¯·ï¼ŒPageCacheä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å®šçš„Pageçš„å†…å­˜æ”¾å…¥spanå¯¹è±¡ï¼Œè¿™ä¸ªå¤§å—å†…å­˜ä¼šåœ¨spanå†…éƒ¨åˆ‡å‰²æˆå¤šä¸ªå®šé•¿å¤§å°çš„å°å—å†…å­˜ï¼Œæœ€ç»ˆç»™CentralCacheçš„æ˜¯spanå¯¹è±¡ã€‚å½“ä¸€ä¸ªspançš„å†…éƒ¨å°å—å†…å­˜éƒ½è¢«å›æ”¶åï¼ŒPageCacheä¼šå›æ”¶CentralCacheä¸­æ»¡è¶³æ¡ä»¶çš„å†…å­˜spanå¯¹è±¡ï¼Œå¹¶åˆå¹¶ç›¸é‚»çš„é¡µï¼Œç»„æˆæ›´å¤§çš„é¡µï¼Œç¼“è§£å†…å­˜ç¢ç‰‡é—®é¢˜ï¼›\n\nä¸‹å›¾æ˜¯è¿™ä¸ªæ¡†æ¶çš„ç¤ºæ„\n\nä¸‰å±‚è®¾è®¡åï¼Œæ¯ä¸€å±‚çš„å·¥ä½œéƒ½ä¸ä¸€æ ·äº†\n\nThreadCacheï¼šä¸ºçº¿ç¨‹åˆ†é…ç©ºé—´ï¼›\nCentralCacheï¼šä¸ºThreadCacheåˆ†é…ç©ºé—´å¹¶å›æ”¶éƒ¨åˆ†ç©ºé—´ï¼›\nPageCacheï¼šåˆ†é¡µç®¡ç†å’Œå‘æ“ä½œç³»ç»Ÿè·å–ç©ºé—´ï¼›\n\nå…¶ä¸­ï¼Œåªæœ‰å¤šä¸ªThreadCacheåŒæ—¶æ²¡å†…å­˜éœ€è¦å‘CentralCacheç”³è¯·çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç°åŠ é”çš„é—®é¢˜ã€‚è¿™ç§æƒ…å†µå…¶å®æ˜¯ä¸å¤šçš„ï¼Œæ‰€ä»¥CentralCacheå¹¶ä¸ä¼šæœ‰ç‰¹åˆ«å¤§çš„é”ç«äº‰é—®é¢˜ã€‚\nè€Œä¸”ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”³è¯·å†…å­˜å¤§å°éƒ½ä¸ä¼šå¤§äº256KBï¼Œæ‰€ä»¥ThreadCacheæ˜¯åŸºæœ¬èƒ½æ»¡è¶³çº¿ç¨‹ç”³è¯·ç©ºé—´çš„éœ€æ±‚çš„ã€‚ä¸Šè¿°äºŒè€…ç»“åˆï¼Œå°±æé«˜äº†å¤šçº¿ç¨‹å¹¶å‘çš„æ•ˆç‡ã€‚\n4.ThreadCacheè®¾è®¡ThreadCacheåªå¯¹ä¸€ä¸ªçº¿ç¨‹æœåŠ¡ï¼Œå®ƒçš„è®¾è®¡æ€è·¯å’Œå®šé•¿å†…å­˜æ± å…¶å®æ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚ä¸è¿‡ThreadCacheéœ€è¦æ”¯æŒä¸å®šé•¿å†…å­˜çš„åˆ†é…ï¼Œéœ€è¦å¯¹å›æ”¶å†…å­˜çš„FreeListåšè®¾è®¡ä¸Šçš„æ›´æ­£ã€‚\n4.1 å“ˆå¸Œæ¡¶ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„ç®¡ç†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ç”³è¯·ï¼ŒThreadCacheé‡‡ç”¨äº†å“ˆå¸Œæ¡¶çš„æ–¹å¼ï¼Œä»¥ä¸€å®šç©ºé—´ä¸ºåˆ†å‰²ï¼Œé“¾æ¥ä¸åŒå¤§å°çš„å›æ”¶å†…å­˜ï¼Œç±»ä¼¼å¤šä¸ªä¸åŒå¤§å°çš„å®šé•¿è‡ªç”±é“¾è¡¨ã€‚\n\nå½“çº¿ç¨‹éœ€è¦8å­—èŠ‚ä»¥ä¸‹ç©ºé—´æ—¶ï¼Œå°±ä»8å­—èŠ‚çš„æ¡¶é‡Œé¢åˆ†é…ç»™å®ƒï¼›å½“è¿›ç¨‹éœ€è¦8åˆ°16å­—èŠ‚ç©ºé—´æ—¶ï¼Œå°±ä»16å­—èŠ‚çš„æ¡¶é‡Œé¢åˆ†é…ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nå¾ˆæ˜æ˜¾ï¼Œè¿™ç§æ–¹å¼ä¼šäº§ç”Ÿå†…ç¢ç‰‡ï¼Œæ¯”å¦‚ç”³è¯·5å­—èŠ‚ç©ºé—´ï¼ŒThreadCacheè¿˜æ˜¯ä¼šä»8å­—èŠ‚çš„æ¡¶ä¸­åˆ†é…ç»™å®ƒï¼Œå‡ºç°äº†3å­—èŠ‚çš„ç©ºé—´æµªè´¹ã€‚\nä½†è¿™ä¸ªç©ºé—´æµªè´¹æ˜¯å¿…é¡»æ¥å—çš„ï¼Œå¦åˆ™å°±éœ€è¦ç”¨æ›´åŠ å¤æ‚çš„æ–¹å¼æ¥ç®¡ç†å›æ”¶çš„ç©ºé—´ï¼ˆæ¯”å¦‚åœ¨å†…å­˜ä¸­è®°å½•è‡ªå·±çš„å¤§å°ï¼‰ï¼Œåˆ†é…çš„æ—¶å€™è¿˜éœ€è¦éå†æ‰¾åˆ°åˆé€‚å¤§å°çš„å†…å­˜æ¥åˆ†é…ï¼Œæ•ˆç‡åè€Œä¼šé™ä½ã€‚\n4.2 åˆ†é…æ˜ å°„è§„åˆ™ä½†æ˜¯ï¼Œå¦‚æœæ•´ä¸ªå“ˆå¸Œæ¡¶éƒ½ç”¨8å­—èŠ‚æ¥åšåˆ†å‰²ï¼Œæœ€ç»ˆæ•´ä¸ªå“ˆå¸Œæ¡¶çš„æ•°ç»„éƒ¨åˆ†å°±ä¼šéå¸¸éå¸¸é•¿ã€‚$$256KB&#x2F;8B &#x3D; 32768$$æ‰€ä»¥ï¼Œæœ€ç»ˆéœ€è¦é‡‡ç”¨ä¸€ä¸ªè®©å†…ç¢ç‰‡å°½é‡ä¿æŒåœ¨10%å·¦å³çš„å“ˆå¸Œæ˜ å°„ç®—æ³•ã€‚\n\n\n\nå­—èŠ‚åŒºé—´\nå¯¹é½æ–¹å¼\nå“ˆå¸Œæ¡¶ä¸‹æ ‡åŒºé—´\n\n\n\n[1, 128]\n8B\n[0,16)\n\n\n[128+1, 1024]\n16B\n[16,72)\n\n\n[1024+1, 8*1024]\n128B\n[72,128)\n\n\n[8*1024+1, 64*1024]\n1024B\n[128,184)\n\n\n[64*1024+1,256*1024]\n8*1024B\n[184,208)\n\n\nè¿™ä¸ªè¡¨çš„å«ä¹‰æ˜¯ï¼Œå½“å­—èŠ‚èŒƒå›´åœ¨1åˆ°128ä¹‹é—´æ—¶ï¼Œå“ˆå¸Œæ¡¶çš„æ¯ä¸ªä¸‹æ ‡å¯¹åº”çš„freelistå†…å­˜å¤§å°ç›¸å·®8å­—èŠ‚ï¼›å½“å­—èŠ‚èŒƒå›´åœ¨129åˆ°1024å­—ä¹‹é—´æ—¶ï¼Œå“ˆå¸Œæ¡¶æ¯ä¸ªä¸‹æ ‡å¯¹åº”çš„freelistå†…å­˜å¤§å°ç›¸å·®16å­—èŠ‚â€¦â€¦\nè¿™æ ·å°±å¯ä»¥æ§åˆ¶å†…ç¢ç‰‡åœ¨10%å·¦å³ï¼Œä»¥129å­—èŠ‚åˆ°1024å­—èŠ‚ä¸ºä¾‹ï¼Œæœ€ç»ˆæ˜ å°„çš„å“ˆå¸Œæ¡¶å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\nå½“ç”³è¯·129åˆ°144å­—èŠ‚ä¹‹é—´çš„ç©ºé—´æ—¶ï¼Œä¼šåˆ†é…144å­—èŠ‚çš„å†…å­˜å—ç»™çº¿ç¨‹ã€‚æ­¤æ—¶æœ€å¤§çš„ç©ºé—´æµªè´¹å°±æ˜¯è¿™144å­—èŠ‚ä¸­åªä½¿ç”¨äº†129å­—èŠ‚ã€‚æµªè´¹ç‡å¤§æ¦‚æ˜¯10.5%ï¼›å…¶ä»–åŒºé—´çš„å†…ç¢ç‰‡æµªè´¹ç‡ä¹Ÿæ˜¯ç”¨è¿™ä¸ªæ–¹å¼è®¡ç®—ã€‚\næ³¨æ„ï¼šå½“æˆ‘ä»¬è€ƒè™‘å†…ç¢ç‰‡æ—¶ï¼Œåªè€ƒè™‘çº¿ç¨‹æ± è®¾è®¡ä¼šé€ æˆçš„å†…ç¢ç‰‡é—®é¢˜ï¼Œè€Œä¸è€ƒè™‘çº¿ç¨‹æœ¬èº«ç”³è¯·äº†å´ä¸ç”¨é€ æˆçš„ç©ºé—´æµªè´¹ï¼ˆè¿™æ˜¯ä¸å¯é¢„æœŸçš„ï¼Œä¸”å’Œå†…å­˜æ± çš„è®¾è®¡æ²¡æœ‰å…³ç³»ï¼‰ã€‚\n4.3 ä»£ç -åˆ†é…å†…å­˜å¤§å°ä¸‹é¢æ˜¯æŸä¸ªå¯¹é½åŒºé—´å†…ï¼Œè®¡ç®—éœ€è¦åˆ†é…çš„ç©ºé—´å¤§å°çš„å‡½æ•°\n// size: ç”³è¯·çš„å—å¤§å°// align: å½“å‰å¯¹é½å¤§å°size_t _RoundUp(size_t size, size_t align)&#123;    size_t returnSize;    if(size % align == 0)    &#123;        returnSize = size; // èƒ½ç›´æ¥æ¨¡ä»£è¡¨å°±æ˜¯éœ€è¦çš„æœ€å¤§å€¼    &#125;    else    &#123;        // å…¶ä»–ï¼Œè®¡ç®—å¯¹é½åŒºé—´å†…çš„æœ€å¤§å€¼        returnSize = (size/align + 1) * align;    &#125;    return returnSize;&#125;\n\nä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„é€»è¾‘è®¡ç®—ï¼Œå½“æˆ‘ä»¬éœ€è¦ç”³è¯·130å­—èŠ‚ç©ºé—´æ—¶ï¼ˆå¯¹é½å¤§å°æ˜¯16å­—èŠ‚ï¼Œåº”è¯¥è¿”å›144å­—èŠ‚ï¼‰ï¼Œè¿™ä¸ªå‡½æ•°è®¡ç®—å‡ºæ¥çš„ç»“æœä¹Ÿæ˜¯144ã€‚$$returnSize &#x3D; (130&#x2F;16 +1) * 16 &#x3D; 144$$è¿™ä¸ªç®—æ³•è¿˜æœ‰ä¸ªæ›´å–å·§çš„å†™æ³•ï¼Œç”¨åˆ°äº†ä½è¿ç®—ï¼Œä¸å¥½æƒ³ä¸å‡ºæ¥ã€‚ä½è¿ç®—çš„æ•ˆç‡ä¼šç•¥é«˜äºä¹˜é™¤æ³•ï¼Œæ‰€ä»¥é‡‡ç”¨è¿™ç§è®¾è®¡èƒ½æé«˜ä¸€å®šçš„æ•ˆç‡ï¼ˆå·²ç»æ˜¯å¾ˆæ·±å±‚çš„é—®é¢˜äº†ï¼‰\nsize_t _RoundUp(size_t size, size_t align)&#123;    return ((size + align - 1) &amp; (~(align - 1)));&#125;\n\nè¿™ä¸ªç®—æ³•æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿä»¥åŒºé—´9åˆ°16ä¸ºä¾‹ï¼ˆéƒ½éœ€è¦åˆ†é…16å­—èŠ‚çš„ç©ºé—´ï¼‰ï¼Œå‡è®¾éœ€è¦åˆ†é…10å­—èŠ‚ç©ºé—´\n10 + 8 - 1 = 17align - 1 = 8-1 = 77çš„äºŒè¿›åˆ¶å¦‚ä¸‹0000 01117çš„äºŒè¿›åˆ¶å–åå1111 100017çš„äºŒè¿›åˆ¶0001 0001äºŒè€…ç›¸ä¸ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯161111 10000001 0001â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”0001 0000\n\nè¿™ç§ç‰›é€¼çš„ä½è¿ç®—æ–¹æ³•æˆ‘å¯æƒ³ä¸å‡ºæ¥â€¦â€¦ğŸ˜£\næœ‰äº†å•ä¸ªå¯¹é½åŒºé—´å†…è®¡ç®—å¤§å°çš„å‡½æ•°ï¼Œå‰©ä¸‹è¦åšçš„å°±æ˜¯æŠŠæ¯ä¸ªåŒºé—´å’Œå¯¹åº”çš„å¯¹é½å¤§å°ç»™ä¼ å‚è¿›å…¥è¿™ä¸ªå‡½æ•°å°±è¡Œäº†\nsize_t RoundUp(size_t size)&#123;    if(size &lt;= 128)    &#123;        return _RoundUp(size,8);    &#125;    else if(size&lt;=1024)    &#123;        return _RoundUp(size,16);    &#125;    else if(size &lt;= (8*1024))    &#123;        return _RoundUp(size,128);    &#125;    else if(size &lt;= (64*1024))    &#123;        return _RoundUp(size,1024);    &#125;    else if(size &lt;= (256*1024))    &#123;    \treturn _RoundUp(size,8*1024);\t      &#125;    else&#123;        // ä¸æ˜¯threadCacheè´Ÿè´£çš„èŒƒå›´äº†        return 0;    &#125;&#125;\n\n4.4 ä»£ç -è®¡ç®—å“ˆå¸Œä¸‹æ ‡é™¤äº†è®¡ç®—éœ€è¦åˆ†é…çš„å†…å­˜å¤§å°ï¼Œè¿˜éœ€è¦è®¡ç®—è¿™ä¸ªå†…å­˜åº”è¯¥é“¾æ¥åœ¨å“ˆå¸Œæ¡¶çš„å“ªä¸€ä¸ªä¸‹æ ‡ã€‚\n\næŒ‡å®šä¸‹æ ‡çš„freelistæœ‰å‰©ä½™ç©ºé—´æ—¶ç›´æ¥åˆ†é…ï¼›\nå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä»é¢„å…ˆç”³è¯·çš„å¤§å—å†…å­˜ä¸­ç”³è¯·ï¼›\n\nå•ä¸ªåŒºé—´å†…è®¡ç®—ä¸‹æ ‡åç§»é‡çš„æ–¹å¼å¦‚ä¸‹\n// size: ç”³è¯·çš„å—å¤§å°// align: å½“å‰å¯¹é½å¤§å°size_t _Index(size_t size, size_t align)&#123;    if (size % align == 0)    &#123;        return size / align - 1;    &#125;    else    &#123;        return size / align;    &#125;&#125;\n\nä½¿ç”¨ä½è¿ç®—æ—¶å¯ä»¥é‡‡ç”¨å¦å¤–ä¸€ä¸ªå·§å¦™çš„è®¾è®¡æ–¹å¼ã€‚å°†1å·¦ç§»align_shiftä½ç›¸å½“äºè®¡ç®—2çš„align_shiftæ¬¡æ–¹ï¼›\n// align_shiftæ˜¯å½“å‰å¯¹é½å¤§å°æ˜¯2çš„å‡ æ¬¡æ–¹ï¼Œå¦‚æœå¯¹é½å¤§å°æ˜¯8ï¼Œåˆ™ä¼ å‚3size_t _Index(size_t size, size_t align_shift)&#123;    return ((size + (1 &lt;&lt; align_shift) - 1) &gt;&gt; align_shift) - 1;&#125;\n\nä½¿ç”¨ä½è¿ç®—çš„å‡½æ•°ï¼Œæœ€ç»ˆçš„è®¡ç®—ä»£ç å¦‚ä¸‹\nsize_t Index(size_t bytes)&#123;    assert(bytes &lt;= 256*1024); // ä¸èƒ½è¶…å‡ºThreadCacheçš„æœ€å¤§æœåŠ¡èŒƒå›´    // ç”¨æ•°ç»„è¡¨ç¤ºæ¯ä¸ªåŒºé—´æœ‰å¤šå°‘ä¸ªé“¾    static int group_array[4] = &#123; 16, 56, 56, 56 &#125;;    if (bytes &lt;= 128)&#123;        return _Index(bytes, 3);    &#125;    else if (bytes &lt;= 1024)&#123;        return _Index(bytes - 128, 4) + group_array[0];    &#125;    else if (bytes &lt;= 8 * 1024)&#123;        return _Index(bytes - 1024, 7) + group_array[1] + group_array[0];    &#125;    else if (bytes &lt;= 64 * 1024)&#123;        return _Index(bytes - 8 * 1024, 10) + group_array[2] + group_array[1] + group_array[0];    &#125;    else if (bytes &lt;= 256 * 1024)&#123;        return _Index(bytes - 64 * 1024, 13) + group_array[3] + group_array[2] + group_array[1] + group_array[0];    &#125;    else&#123;        return 0;// ä¸æ˜¯threadCacheè´Ÿè´£çš„èŒƒå›´äº†    &#125;    return 0;&#125;\n\n4.5 ThreadCacheåˆ†é…&#x2F;å›æ”¶å†…å­˜è¿™éƒ¨åˆ†æ¯”è¾ƒç®€ç­”ï¼Œå“ˆå¸Œæ¡¶å¯¹åº”çš„FreeListé‡Œé¢æœ‰å°±ç›´æ¥åˆ†é…ï¼Œæ²¡æœ‰å°±å»æ‰¾CentralCacheè¦ã€‚\nè¿™é‡Œä½¿ç”¨assertè¿›è¡Œç”³è¯·å¤§å°çš„åˆ¤æ–­ï¼Œæ˜¯å› ä¸ºThreadCacheä¸åº”è¯¥æ¥å—è¶…è¿‡256KBçš„è¯·æ±‚ï¼ˆå¦‚æœå‡ºç°äº†è¯´æ˜å¤–éƒ¨è°ƒç”¨çš„ä»£ç çš„å¤„ç†æœ‰é—®é¢˜ï¼‰\nstatic const size_t MAX_BYTES = 256 * 1024;void* ThreadCache::Allocate(size_t size)&#123;\tassert(size &lt;= MAX_BYTES);\tsize_t alignSize = RoundUp(size); // è®¡ç®—å¤§å°\tsize_t index = Index(size); // è®¡ç®—ä¸‹æ ‡\tif (!_freeLists[index].Empty())\t&#123;\t\treturn _freeLists[index].Pop();\t&#125;\telse\t&#123;\t// å‘centralcacheç”³è¯·å†…å­˜\t\treturn FetchFromCentralCache(index, alignSize);\t&#125;&#125;void ThreadCache::Deallocate(void* ptr, size_t size)&#123;\tassert(ptr);\tassert(size &lt;= MAX_BYTES);\t// æ‰¾å¯¹æ˜ å°„çš„è‡ªç”±é“¾è¡¨æ¡¶ï¼Œæ’å…¥å†…å­˜\tsize_t index = Index(size); // è®¡ç®—ä¸‹æ ‡\t_freeLists[index].Push(ptr);&#125;\n\n\n\n4.6 TLS-çº¿ç¨‹å±€éƒ¨å˜é‡è¯´æ˜TLSçš„å…¨ç§°æ˜¯Thread Local Storageï¼Œä½¿ç”¨ç‰¹æ®Šçš„å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªå˜é‡ï¼Œå¯ä»¥è®©è¿™ä¸ªå˜é‡å˜æˆä¸€ä¸ªåªæœ‰æŸä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®çš„ç‹¬ç«‹æˆå‘˜ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•è®¿é—®ã€‚\næ¯”å¦‚æˆ‘æœ‰ä¸ªå˜é‡Aï¼Œé‚£ä¹ˆå¤šä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„å˜é‡Aï¼Œä»–ä»¬éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªAï¼Œä½†è®¿é—®çš„å¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼Œä¹Ÿå°±ä¸æ¶‰åŠåˆ°åŠ é”é—®é¢˜ã€‚\nå¯¹äºçº¿ç¨‹ç‹¬æœ‰çš„ThreadCacheè€Œè¨€ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªç‰¹æ€§æ¥è®©æ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰ä¸€ä¸ªå˜é‡ï¼Œé¿å…æ„å»ºThreadCacheçš„æ—¶å€™è¿˜éœ€è¦è¾¨åˆ«å½“å‰çº¿ç¨‹å·æˆ–åŠ é”æ“ä½œã€‚\nwindowsstatic _declspec(thread) ThreadCache* TLSThreadCache = nullptr;\n\nè¿™é‡Œä½¿ç”¨_declspec(thread)å°±æ˜¯windowså¹³å°ä¸‹å£°æ˜TLSå˜é‡çš„æ–¹å¼ï¼ŒåŠ ä¸Šstaticæ˜¯ä¸ºäº†é¿å…åœ¨åŒ…å«å¤´æ–‡ä»¶çš„æ—¶å€™è¯¥å…¨å±€å˜é‡å£°æ˜è¢«å¤åˆ¶å¤šæ¬¡å¯¼è‡´é‡å¤ã€‚\n\nå¾®è½¯å®˜æ–¹æ–‡æ¡£ï¼šhttps://learn.microsoft.com/en-us/cpp/c-language/thread-local-storage?view=msvc-170&amp;redirectedfrom=MSDN\n\nç”¨ä¸‹é¢çš„ä»£ç å¯¹TLSå˜é‡åšä¸€ä¸ªç®€å•çš„æµ‹è¯•\n#include &lt;thread&gt;#include &lt;cstdio&gt;_declspec(thread) int* TLStest = nullptr;int main()&#123;\tauto test_func = []() &#123;\t\tprintf(&quot;before:%p\\n&quot;, TLStest);\t\tif (TLStest == nullptr)\t\t&#123;\t\t\tTLStest = new int(10);\t\t&#125;\t\tprintf(&quot;after:%p\\n&quot;, TLStest);         delete TLStest;\t&#125;;\tstd::thread t1(test_func);\tstd::thread t2(test_func);\tt1.detach();\tt2.join();\tstd::this_thread::sleep_for(std::chrono::seconds(1));\treturn 0;&#125;\n\nä½¿ç”¨VS2019æ‰§è¡Œï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸¤ä¸ªçº¿ç¨‹è°ƒç”¨å‡½æ•°ä¸­çš„æ‰“å°å’Œåˆå§‹åŒ–ï¼Œèƒ½å‘ç°æœ€ç»ˆåˆå§‹åŒ–å‡ºæ¥çš„åœ°å€æ˜¯ä¸åŒçš„ï¼Œè€Œä¸”&amp;TLStestçš„åœ°å€ä¹Ÿä¸ä¸€æ ·ï¼Œè¯´æ˜TLStestå˜é‡è¢«æ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰ã€‚\n[before] TLStest:00000000  &amp;TLStest:00ACCEBC[after] TLStest:00ACE0E0  &amp;TLStest:00ACCEBC[before] TLStest:00000000  &amp;TLStest:00ACCDE4[after] TLStest:00ACE1D0  &amp;TLStest:00ACCDE4\n\nLinuxåœ¨Linuxä¸‹çš„çº¿ç¨‹æœ¬åœ°å­˜å‚¨å¯ä»¥ç”¨__threadå…³é”®å­—å£°æ˜ã€‚ä½†éœ€è¦æ³¨æ„ï¼Œè¿™ä¸ªå…³é”®å­—åªèƒ½å£°æ˜PODï¼ˆå†…ç½®ç±»å‹ï¼‰ï¼Œä¸èƒ½å£°æ˜è‡ªå®šä¹‰çš„classå¯¹è±¡ã€‚å½“ç„¶ï¼Œè‡ªå®šä¹‰classçš„æŒ‡é’ˆç±»å‹ä¸åœ¨æ­¤åˆ—ï¼Œå› ä¸ºmyclass*è¿™ç±»æŒ‡é’ˆç±»å‹å§‹ç»ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå±äºC&#x2F;C++çš„å†…ç½®ç±»å‹ã€‚\n__thread int* TLStest = nullptr;\n\nLinuxä¸‹ä¸Šè¿°ä»£ç çš„æµ‹è¯•ç»“æœï¼Œå’Œwindowsä¸‹çš„æ•ˆæœç±»ä¼¼ã€‚\nâ¯ g++ test.cpp  -o test1 &amp;&amp; ./test1[before] TLStest:(nil)  &amp;TLStest:0x7f63315cd638[after] TLStest:0x7f632c000f80  &amp;TLStest:0x7f63315cd638[before] TLStest:(nil)  &amp;TLStest:0x7f6330dcc638[after] TLStest:0x7f632c000f80  &amp;TLStest:0x7f6330dcc638\n\nå¤‡æ³¨windowså’Œlinuxä¸‹çº¿ç¨‹å±€éƒ¨å˜é‡ä¼šæœ‰è‡ªå·±çš„å­˜æ”¾ä½ç½®å’Œå­˜æ”¾çš„åœ°å€ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œè¿™äº›çº¿ç¨‹å±€éƒ¨å˜é‡çš„åœ°å€æ˜¯å…¨è¿›ç¨‹å…±äº«çš„ã€‚\nå‡è®¾çº¿ç¨‹AçŸ¥é“äº†çº¿ç¨‹Bçš„å±€éƒ¨å˜é‡çš„åœ°å€ï¼Œé‚£ä¹ˆçº¿ç¨‹Aå°±å¯ä»¥è®¿é—®å¹¶ä¿®æ”¹å®ƒï¼å› ä¸ºè¿™ä¸ªåœ°å€æ˜¯åœ¨è¿›ç¨‹åœ°å€ç©ºé—´ä¸­çš„ï¼Œæ•´ä¸ªè¿›ç¨‹å…±äº«ï¼\n5.CentralCacheè®¾è®¡5.1 spanè·¨åº¦é¡µCentralCacheçš„ä¸»ä½“ä¹Ÿé‡‡ç”¨äº†å’ŒThreadCacheç±»ä¼¼çš„å“ˆå¸Œæ¡¶çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯CentralCacheçš„å“ˆå¸Œæ¡¶ä¸‹é¢é“¾æ¥çš„ä¸æ˜¯å†…å­˜ç¢ç‰‡ï¼Œè€Œæ˜¯åŒ…å«ä¸€ä¸ªå¤§å—å†…å­˜çš„spanå¯¹è±¡ï¼ˆè·¨åº¦é¡µï¼‰ã€‚\nåœ¨CentralCacheçš„å“ˆå¸Œæ¡¶ä¸­ï¼Œ8å­—èŠ‚çš„æ¡¶é“¾æ¥çš„æ˜¯å†…éƒ¨å†…å­˜è¢«æ‹†åˆ†æˆ8å­—èŠ‚å°å—çš„Spanå¯¹è±¡ã€‚\n\nSpanå¯¹è±¡çš„åŸºæœ¬æˆå‘˜å¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨win32ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªSpanå¯¹è±¡æ˜¯32å­—èŠ‚ã€‚\n#ifdef _WIN64\ttypedef unsigned long long PAGE_ID;#elif _WIN32\ttypedef size_t PAGE_ID;#endifstruct Span&#123;    PAGE_ID _pageId; //é¡µå·    size_t _n; //é¡µçš„æ•°é‡        Span* _next = nullptr;    Span* _prev = nullptr;        void* _list = nullptr; // é“¾æ¥spanæ‹†åˆ†çš„å°å—å†…å­˜    size_t _useCount = 0; // ä½¿ç”¨æ•°é‡ï¼Œä¸º0ä»£è¡¨æ²¡æœ‰è¢«ä½¿ç”¨        size_t _objSize; // æ‹†åˆ†çš„å°å—å†…å­˜çš„å¤§å°        bool _isUse = false; // æ˜¯å¦åœ¨å ç”¨    // å½“Spanè¢«åˆ†é…ç»™CentralCacheåè®¾ç½®ä¸ºtrue&#125;\n\nå¯¹è¿™ä¸ªå¯¹è±¡åšä¸€å®šè¯´æ˜\n\nå‡è®¾æˆ‘ä»¬ç»™å®šä¸€ä¸ªSpanåŒ…å«512KBçš„å†…å­˜ï¼ˆå†…å­˜æ˜¯ç”±PageCacheç”³è¯·çš„ï¼‰ï¼›\né‚£ä¹ˆ8Bçš„Spanå°±æ˜¯å°†è¿™ä¸ª512KBæ‹†åˆ†æˆ8Bé“¾æ¥åœ¨Spanå¯¹è±¡å†…éƒ¨çš„listä¸­\n256KBçš„Spanå°±æ˜¯å°†512KBæ‹†åˆ†æˆä¸¤ä¸ª256KBé“¾æ¥åœ¨Spanå¯¹è±¡å†…éƒ¨çš„listä¸­\nå½“ThreadCacheç”³è¯·å†…å­˜æ—¶ï¼Œä¼šä»å¯¹åº”å“ˆå¸Œæ¡¶ä¸‹æ ‡ä½ç½®çš„ç¬¬ä¸€ä¸ªSpanå¯¹è±¡ä¸­åˆ†é…å†…å­˜ç»™å®ƒï¼Œå¦‚æœç¬¬ä¸€ä¸ªSpanå¯¹è±¡æ²¡æœ‰å‰©ä½™å†…å­˜äº†ï¼Œå°±å¾€åæ‰¾ç¬¬äºŒä¸ªSpanå¯¹è±¡ç”³è¯·å†…å­˜æ¥åˆ†é…ç»™ThreadCacheï¼›\nå½“ä¸€ä¸ªSpançš„useCountä¸º0æ—¶ï¼Œè¯´æ˜è¿™ä¸ªSpanå†…éƒ¨çš„å†…å­˜éƒ½æ˜¯æ²¡æœ‰è¢«ä½¿ç”¨çš„ï¼Œå®ƒå¯ä»¥è¢«PageCacheå›æ”¶ï¼›\nPageCacheæ ¹æ®Spanä¸­çš„pageIDæ¥ç¡®å®šå®ƒçš„é¡µå·ï¼Œå¯ä»¥å’Œç›¸é‚»é¡µå·çš„Spanå†…å­˜åˆå¹¶æˆæ›´å¤§çš„å†…å­˜ï¼Œæš‚ä¸ºç®¡ç†æˆ–é‡Šæ”¾ç»™æ“ä½œç³»ç»Ÿï¼Œä¸€å®šç¨‹åº¦ä¸Šç¼“è§£å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚\n\nä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼ŒSpanå¯¹è±¡ä¸­ä¼¼ä¹æ²¡æœ‰ç”¨äºå­˜æ”¾å¤§å—å†…å­˜çš„æŒ‡é’ˆï¼ˆå†…éƒ¨çš„listå¹¶ä¸æ˜¯ç”¨æ¥å­˜å¤§å—å†…å­˜èµ·å§‹åœ°å€çš„ï¼Œè€Œéœ€è¦CentralCacheæ¥åˆ¶ä½œå†…å­˜é“¾è¡¨ï¼‰ï¼Œå½“PageCacheåˆ†é…ç»™CentralCacheçš„æ—¶å€™ï¼ŒCentralCacheè¦æ€ä¹ˆçŸ¥é“è¿™ä¸ªSpançš„èµ·å§‹åœ°å€å‘¢ï¼Ÿ\n\né¡µå·æ˜¯ç›´æ¥ç”¨å†…å­˜åœ°å€å¼ºè½¬æˆæ•´å½¢ï¼Œé™¤ä»¥8KBæ¥è®¡ç®—çš„ï¼›\nåªéœ€è¦å°†é¡µå·ä¹˜ä»¥8KBï¼ˆå³8*1024ï¼‰ï¼Œå°±èƒ½å¾—åˆ°è¿™ä¸ªSpanæ‰€å¯¹åº”çš„å†…å­˜èµ·å§‹åœ°å€ï¼›\né¡µå·+é¡µçš„æ•°é‡å³å¯å¾—åˆ°å†…å­˜æœ€åä¸€é¡µçš„èµ·å§‹åœ°å€ï¼Œå†åŠ ä¸Š8KBå³ä¸ºå¤§å—å†…å­˜çš„æœ«å°¾ï¼›\n\nç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±èŠ‚çœäº†ä¸€ä¸ªå¤šä½™çš„æŒ‡é’ˆã€‚é¡µå·+é¡µçš„æ•°é‡ä¹Ÿæ˜¯åç»­PageCacheå›æ”¶å†…å­˜æ—¶è¾¨åˆ«ä¸¤ä¸ªSpanå¯¹è±¡æ‰€ä¿å­˜çš„é¡µæ˜¯å¦ç›¸é‚»çš„é‡è¦åˆ¤æ®ã€‚\n5.2 æ¡¶é”ä¸ºäº†è¿›ä¸€æ­¥ç»†åŒ–é”çš„ç²’åº¦ï¼ŒCentralCacheé‡‡ç”¨æ¡¶é”çš„è®¾è®¡ï¼Œå³æ¯ä¸ªä¸åŒå¤§å°çš„å“ˆå¸Œæ¡¶ä¸‹æ ‡éƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„é”\n\nçº¿ç¨‹Aå‘CentralCacheç”³è¯·16Bå†…å­˜ï¼Œçº¿ç¨‹Bå‘CentralCacheç”³è¯·128KBå†…å­˜ï¼ŒäºŒè€…ä¸åœ¨åŒä¸€ä¸ªå“ˆå¸Œæ¡¶ä¸‹æ ‡ä½ç½®ï¼Œæ‰€ä»¥ä¸å­˜åœ¨ç«äº‰ä¹Ÿä¸éœ€è¦åŠ é”ï¼›\nçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½å‘CentralCacheç”³è¯·16Bå†…å­˜ï¼Œæ­¤æ—¶éœ€è¦åŠ é”ï¼›\n\nå®šä¹‰æ¡¶é”æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºSpanéœ€è¦ä¸€ä¸ªå•ç‹¬çš„Listæ¥ç®¡ç†ï¼ˆä¸èƒ½ä½¿ç”¨åŸæœ¬å®šé•¿å†…å­˜æ± é‡Œé¢çš„freelistå¯¹è±¡äº†ï¼‰ï¼Œæˆ‘ä»¬åœ¨å•ç‹¬å®ç°çš„SpanListé‡Œé¢åŠ ä¸€ä¸ªmutexï¼ŒPOPå’ŒPUSHçš„æ—¶å€™åŠ é”&#x2F;è§£é”å°±å¯ä»¥äº†ã€‚\n5.3 å‘PageCacheç”³è¯·&#x2F;é‡Šæ”¾å†…å­˜å½“CentralCacheä¸­çš„æ¡¶æ²¡æœ‰æŒ‡å®šå¤§å°Spançš„æ—¶å€™ï¼Œå°±éœ€è¦å»PageCacheä¸­ç”³è¯·å†…å­˜ã€‚ç”³è¯·æ—¶éœ€è¦ç»™å®šç”³è¯·çš„å¤§å°ï¼ŒéšåPageCacheä¼šå°†åŒ…å«å¯¹åº”å¤§å°å†…å­˜çš„Spanå¯¹è±¡è¿”è¿˜ç»™CentralCacheï¼Œç”±CentralCacheæ¥è´Ÿè´£å°†è¿™å—å†…å­˜åˆ‡æˆå°å—å¹¶é“¾æ¥Spanå†…éƒ¨çš„listã€‚\nå½“æŸä¸ªSpanå¯¹è±¡ä¸‹useCountä¸º0çš„æ—¶å€™ï¼ŒCentralCacheå°±å¯ä»¥å°†å…¶å½’è¿˜ç»™PageCacheã€‚\n5.4 ç”³è¯·å†…å­˜çš„æ•°é‡é™åˆ¶ThreadCacheç”³è¯·å†…å­˜çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªâ€œæ…¢å¼€å§‹â€çš„è°ƒèŠ‚ç®—æ³•ã€‚å³ç”³è¯·çš„æ—¶å€™ï¼Œä¼šç•¥å¾®ç”³è¯·å¤šä¸€äº›ï¼Œä½†ä¹Ÿä¸èƒ½ä¸€æ¬¡æ€§ç”³è¯·å¤ªå¤šï¼Œå¦åˆ™å¾ˆæœ‰å¯èƒ½ç”¨ä¸å®Œã€‚\n\nå½“ç”³è¯·å†…å­˜çš„sizeå¤§çš„æ—¶å€™ï¼Œä¸€æ¬¡å‘CentralCacheç”³è¯·çš„å†…å­˜æ•°é‡å°±è¶Šå°‘ï¼ˆå¤šå°‘ä¸ªsizeçš„å†…å­˜ï¼‰\nå½“ç”³è¯·å†…å­˜çš„sizeå°çš„æ—¶å€™ï¼Œä¸€æ¬¡å‘CentralCacheç”³è¯·çš„å†…å­˜æ•°é‡å°±ä¼šå¤šä¸€äº›\n\næ¯ç”³è¯·ä¸€æ¬¡å†…å­˜ï¼Œå°±å°†å¯¹åº”FreeListçš„é˜ˆå€¼è°ƒé«˜ä¸€äº›ï¼Œè¿™æ ·å†…å­˜æ± åˆšå¯åŠ¨çš„æ—¶å€™ï¼Œç”³è¯·çš„å†…å­˜å°±ä¼šå°‘ä¸€äº›ï¼Œè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œè®¤ä¸ºç³»ç»Ÿå¯¹å†…å­˜çš„éœ€æ±‚ä¼šæ›´åŠ é¢‘ç¹ï¼Œä¸€æ¬¡è¦çš„å†…å­˜å°±ä¼šå¤šä¸€äº›ã€‚\n5.5 å›æ”¶ThreadCacheä¸­çš„å†…å­˜å› ä¸ºThreadCacheæ˜¯ç”¨freelistæ¥ç®¡ç†å†…å­˜çš„ï¼Œæ‰€ä»¥CentralCacheçš„å›æ”¶æ¥å£ä¹Ÿæ˜¯ä»¥ä¸€ä¸ªé“¾è¡¨çš„åŒºé—´æ¥å›æ”¶ã€‚\nvoid ReleaseListToSpans(void* start, size_t size);\n\nå½“ThreadCacheæ£€æµ‹åˆ°å½“å‰æŸä¸ªå“ˆå¸Œæ¡¶å¯¹åº”çš„freelisté•¿åº¦å·²ç»å¤§äºä¸€æ¬¡æ€§ä¼šç”³è¯·çš„å†…å­˜é•¿åº¦ï¼ˆä¸Šæ–‡æåˆ°çš„FreeListé˜ˆå€¼ï¼‰æ—¶ï¼Œå°±ä¼šé‡Šæ”¾ä¸€éƒ¨åˆ†å†…å­˜ç»™CentralCacheã€‚è¿™ç§æƒ…å†µè¯´æ˜ThreadCacheä¿å­˜çš„å†…å­˜å·²ç»æœ‰ç‚¹å¤šäº†ï¼Œå¯èƒ½ä¼šç”¨ä¸å®Œã€‚\n6.PageCacheè®¾è®¡6.1 åŸºæœ¬æ¶æ„PageCacheçš„å“ˆå¸Œæ¡¶å’ŒCentralCacheåŸºæœ¬ä¸€è‡´ï¼Œéƒ½æ˜¯é“¾æ¥çš„Spanå¯¹è±¡ï¼Œåªä¸è¿‡PageCacheä¸­æ˜¯é€šè¿‡é¡µé¢æ•°é‡ä½œä¸ºå“ˆå¸Œä¸‹æ ‡çš„é€‰å€çš„ã€‚\næ¯”å¦‚ä¸€ä¸ªSpanä¸­æœ‰2é¡µï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«æ˜ å°„åˆ°ä¸‹æ ‡ä¸º2çš„å“ˆå¸Œæ¡¶ä¸­ï¼ˆåªä¸è¿‡è¿™æ ·ä¼šå¯¼è‡´ä¸‹æ ‡ä¸º0çš„å“ˆå¸Œæ¡¶ç©ºç½®ï¼Œä¹Ÿå¯ä»¥åœ¨å“ˆå¸Œå‡½æ•°é‡Œé¢å°†é¡µé¢æ•°é‡å‡ä¸€æ¥é¿å…è¿™ä¸ªæµªè´¹ï¼‰\né™¤äº†å“ˆå¸Œæ¡¶å¤–ï¼ŒPageCacheä¸­è¿˜æœ‰ä¸€ä¸ªunordered_mapç”¨äºæ˜ å°„é¡µå·å’ŒSpanå¯¹è±¡åœ°å€ï¼Œè¿™æ ·èƒ½è®©åç»­PageCacheå›æ”¶Spançš„æ—¶å€™ï¼Œæ›´å¿«åœ°æ‰¾åˆ°è¿™ä¸ªSpané¡µå·ç›¸é‚»çš„å…¶ä»–Spanå¯¹è±¡çš„åœ°å€ã€‚\næ³¨æ„ï¼Œè¿™ä¸ªunordered_mapä¸­éœ€è¦æ˜ å°„ä¸€ä¸ªSpanå¯¹åº”çš„æ‰€æœ‰é¡µå·å’ŒSpanåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œä¸èƒ½åªä¿å­˜èµ·å§‹é¡µå·å’ŒSpanåœ°å€çš„å…³ç³»ã€‚\n\n6.2 ç”³è¯·å†…å­˜å½“PageCacheçš„å“ˆå¸Œæ¡¶ä¸­æ²¡æœ‰å‰©ä½™Spanæ—¶ï¼Œå°±ä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ã€‚\nPageCacheå°†ä»¥8KBä¸ºä¸€ä¸ªé¡µï¼Œå»å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ã€‚ä¸”ä¸ºäº†æé«˜ç”³è¯·å†…å­˜çš„æ•ˆç‡ï¼Œä¼šç›´æ¥ä½¿ç”¨ç³»ç»Ÿåº•å±‚æ¥å£æ¥è·å–å†…å­˜ï¼ˆWindowsä¸‹VirutalAllocï¼ŒLinuxä¸‹btkå’Œmmapï¼‰\nç”³è¯·å†…å­˜åï¼ŒPageCacheä¼šnewä¸€ä¸ªSpanå¯¹è±¡ï¼Œå¹¶è®¾ç½®å¯¹åº”çš„é¡µå·å’Œé¡µçš„èµ·å§‹åœ°å€ã€‚éšåæ˜¯è®¾ç½®IDå’ŒSpanå¯¹è±¡åœ°å€çš„å…³ç³»ï¼Œå¹¶å°†Spanè¿”å›ç»™CentralCacheã€‚\n// kæ˜¯é¡µçš„ä¸ªæ•°void* ptr = SystemAlloc(k); // å‘ç³»ç»Ÿç”³è¯·å†…å­˜Span* span = new Span;      // è·å–ä¸€ä¸ªSpanå¯¹è±¡span-&gt;_pageId = (PAGE_ID)ptr &gt;&gt; 13; // ç›¸å½“äºé™¤ä»¥8KBï¼Œå¾—åˆ°é¡µå·span-&gt;_n = k; //è®¾ç½®é¡µçš„ä¸ªæ•°\n\nä¼˜åŒ–æ–¹å¼å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªä¸å¤ªåˆé€‚çš„åœ°æ–¹ã€‚å¯¹äºä¸€ä¸ªé«˜å¹¶å‘çš„å†…å­˜æ± è€Œè¨€ï¼Œæˆ‘ä»¬é¢„æœŸåº”è¯¥æ˜¯ä¼šæœ‰å¾ˆå¤šä¸ªSpanå¯¹è±¡çš„æ„å»ºçš„ï¼ˆå³ä¾¿æˆ‘ä»¬æœ€ç»ˆçš„æµ‹è¯•ç¯å¢ƒå¯èƒ½è¾¾ä¸åˆ°è¿™ä¸ªå¹¶å‘é‡ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œåº”è¯¥å°†new Spanæ”¹æˆä½¿ç”¨ä¸Šæ–‡æåˆ°çš„å®šé•¿å†…å­˜æ± æ¥å¤„ç†ï¼Œå¯ä»¥åœ¨PageCacheåˆå§‹åŒ–çš„æ—¶å€™å°±ç”³è¯·ä¸€éƒ¨åˆ†å†…å­˜ï¼Œä¾›æœªæ¥æ–°å»ºSpanå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ã€‚\nSpan* span = _spanPool.New();// ä½¿ç”¨å®šé•¿å†…å­˜æ± æ¥åˆ†é…å†…å­˜\n\nåªéœ€è¦åœ¨PageCacheä¸­åŒ…æ‹¬ä¸€ä¸ªå®šé•¿å†…å­˜æ± çš„å¯¹è±¡å³å¯ã€‚\n6.3 åˆ†é…å†…å­˜åˆ†é…å†…å­˜çš„æµç¨‹å¦‚ä¸‹\n\nåˆ¤æ–­å“ˆå¸Œæ¡¶ä¸­å¯¹åº”é¡µé¢å¤§å°çš„Spanæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ç›´æ¥åˆ†é…ï¼›\nä¸å­˜åœ¨åˆ™å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ï¼Œè€Œä¸”æ¯æ¬¡éƒ½ä¼šæŒ‰æœ€å¤§é¡µé¢æ¥ç”³è¯·ï¼ˆæœ€å¤§é¡µ128ï¼‰ï¼›\nç”³è¯·å¤§å—å†…å­˜åï¼Œå°†å…¶æ‹†åˆ†æˆä¸€ä¸ªCentralCacheéœ€è¦çš„Spanå’Œå¦å¤–ä¸€ä¸ªå‰©ä½™çš„Spanï¼›\nå°†å‰©ä½™çš„Spanæ”¾å…¥å“ˆå¸Œè¡¨ï¼ŒCentralCacheéœ€è¦çš„Spanè¿”å›ï¼›\n\nä¸Šè¿°æ­¥éª¤ä¸­çš„ç¬¬ä¸‰æ­¥å°±æ˜¯æ‹†åˆ†å¤§Spanå¯¹è±¡çš„æƒ…å†µï¼Œæ¯”å¦‚å½“10é¡µçš„Spanæ²¡æœ‰æ—¶ï¼Œå°†ä¸€ä¸ª128é¡µçš„Spanæ‹†åˆ†æˆ10é¡µå’Œ118é¡µçš„ã€‚è¿™æ—¶å€™ï¼Œä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šè®¿é—®PageCacheä¸­å“ˆå¸Œæ¡¶å¤šä¸ªä¸‹æ ‡ä½ç½®çš„å…ƒç´ ï¼Œæ‰€ä»¥PageCacheä¸èƒ½é‡‡ç”¨æ¡¶é”ï¼Œè€Œé‡‡ç”¨å…¨å±€é”ï¼ˆè®¿é—®PageCacheçš„æ—¶å€™åŠ é”ï¼Œè®¿é—®ç»“æŸè§£é”ï¼‰ã€‚\nå¦å¤–ï¼Œæ‹†åˆ†Spanå¯¹è±¡æ˜¯ä¸€ä¸ªé¢‘ç‡æ¯”è¾ƒé«˜çš„åŠ¨ä½œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆPageCacheä¸­ä¼šå‡ºç°å¤šä¸ªå¯ä»¥è¿›è¡Œåˆå¹¶çš„ç›¸é‚»é¡µé¢çš„Spanå¯¹è±¡ã€‚\nå¦‚æœPageCacheä¸­ä¸æ˜¯ä¸€æ¬¡æ€§ç”³è¯·æœ€å¤§é¡µé¢çš„å†…å­˜ï¼Œè€Œæ˜¯æŒ‰éœ€ç”³è¯·ï¼Œæ­¤æ—¶æ“ä½œç³»ç»Ÿç»™å®šçš„å†…å­˜å¾ˆå¤§æ¦‚ç‡å’Œä¹‹å‰çš„å¹¶ä¸æ˜¯ç›¸é‚»çš„ï¼Œé‚£PageCacheè‡ªç„¶å°±æ²¡æœ‰åŠæ³•â€œåˆå¹¶ç›¸é‚»é¡µé¢â€ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´æ“ä½œç³»ç»Ÿä¸­å†…å­˜å¤–ç¢ç‰‡è¾ƒå¤šï¼Œä¸”éš¾ä»¥å¤„ç†ã€‚\n6.4 å›æ”¶å’Œåˆå¹¶å›æ”¶æ˜¯CentralCacheåœ¨Spanä¸­useCountä¸º0çš„æ—¶å€™è§¦å‘çš„ï¼Œä¼šå°†è¿™ä¸ªSpanå½’è¿˜ç»™PageCacheã€‚\nPageCacheæ”¶åˆ°ä¸€ä¸ªSpanåï¼Œéœ€è¦è¿›è¡Œåˆå¹¶æ“ä½œ\n\nä»unordered_mapä¸­æŸ¥æ‰¾å‰ä¸€é¡µçš„Spanï¼ˆå½“å‰é¡µå·å‡ä¸€ï¼‰ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œåˆå¹¶ï¼›\næŸ¥æ‰¾åç»­çš„Spanï¼ˆå½“å‰é¡µå·åŠ ä¸Šé¡µé¢æ•°é‡å†åŠ ä¸€ï¼‰ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥è¿›è¡Œåˆå¹¶ï¼›\n\nå› ä¸ºè¿™ä¸ªunordered_mapåªåœ¨åˆå¹¶çš„æ—¶å€™éœ€è¦ä½¿ç”¨ï¼Œä¸”æ¯æ¬¡åˆå¹¶æ—¶çš„æŸ¥è¯¢æ“ä½œéƒ½æ˜¯å½“å‰spançš„é¡µå·å‡ä¸€ï¼Œå’Œå½“å‰spanæœ«å°¾é¡µå·+1ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç»™unoreder_mapä¸­è®¾ç½®å½“å‰é¡µå·ä»¥åŠæœ«å°¾é¡µå·å¯¹åº”çš„spanå¯¹è±¡åœ°å€å°±è¡Œäº†ï¼èŠ‚çœç©ºé—´ã€‚\n\nä¸ºäº†ä¿é™©èµ·è§å’Œæ–¹ä¾¿ç†è§£ï¼Œé¡¹ç›®ä¸­æˆ‘è¿˜æ˜¯é‡‡ç”¨äº†éå†é¡µå·èŒƒå›´è®¾ç½®å…¨éƒ¨çš„æ–¹å¼ï¼Œè¿™æ ·èƒ½é¿å…å‡ºç°é—®é¢˜ğŸ˜‚ä½†ä¼šæœ‰ç©ºé—´æµªè´¹å’Œæ•ˆç‡æŸå¤±ã€‚\n\nåˆå¹¶Spanéœ€è¦æ»¡è¶³ä¸‹é¢å‡ ä¸ªæ¡ä»¶ï¼š\n\nSpançš„isUseä¸ºfalseï¼Œå³è¿™ä¸ªSpanæ˜¯å¤„äºPageCacheä¸­æš‚æœªåˆ†é…çš„\nSpançš„é¡µé¢æ•°é‡åŠ ä¸Šå½“å‰Spançš„é¡µé¢æ•°é‡ä¸è¶…è¿‡128ï¼ˆè¶…è¿‡åä¼šè¶…å‡ºå“ˆå¸Œæ¡¶çš„ä¸‹æ ‡ï¼Œæ— æ³•ç®¡ç†ï¼Œè‡ªç„¶ä¸èƒ½åˆå¹¶ï¼‰\n\nåˆå¹¶æ“ä½œæ¯”è¾ƒç®€å•\n\nå¦‚æœæ˜¯åˆå¹¶å‰ä¸€ä¸ªSpanï¼Œå°†å‰ä¸€ä¸ªSpançš„é¡µé¢æ•°é‡åŠ ä¸Šå½“å‰Spançš„é¡µé¢æ•°é‡å³å¯ï¼›\nå¦‚æœæ˜¯åˆå¹¶åä¸€ä¸ªSpanï¼Œå°†å½“å‰Spançš„é¡µé¢æ•°é‡åŠ ä¸Šåä¸€ä¸ªSpançš„é¡µé¢æ•°é‡å³å¯ï¼›\nåˆå¹¶åè¦å°†è¢«åˆå¹¶çš„Spanå¯¹è±¡é‡Šæ”¾ï¼Œå¹¶å°†åˆå¹¶åçš„Spanå¯¹è±¡çš„isUseè®¾ç½®ä¸ºfalseï¼›\nå°†åˆå¹¶åçš„Spanå¯¹è±¡æ›´æ¢æ­£ç¡®çš„å“ˆå¸Œæ¡¶ä¸‹æ ‡ä½ç½®é“¾æ¥ï¼ˆå› ä¸ºåŒ…å«çš„é¡µé¢æ•°é‡æ”¹å˜äº†ï¼‰ï¼›\nä¿®æ”¹unodered_mapä¸­çš„é¡µå·å’ŒSpanå¯¹è±¡åœ°å€çš„æ˜ å°„è¡¨ï¼›\n\n6.5 è¶…å‡º256KBçš„å†…å­˜ç”³è¯·å› ä¸ºä½äº256KBçš„å†…å­˜éƒ½èƒ½è¢«ThreadCacheæ¥å¤„ç†ï¼Œæ‰€ä»¥256KBä¹Ÿç®—æ˜¯ä¸ªåˆ†æ°´å²­ã€‚è€ŒPageCacheä¸­å“ˆå¸Œæ¡¶æœ€å¤§çš„ä¸‹æ ‡æ˜¯128ï¼Œå³æœ€å¤§èƒ½æ‰˜ç®¡çš„Spanæ˜¯1MBçš„å†…å­˜ï¼Œè¶…å‡º1MBçš„å†…å­˜å°±å¾—ç›´æ¥å‘æ“ä½œç³»ç»Ÿç”³è¯·äº†ã€‚\næ­¤æ—¶å‘å†…å­˜æ± ç”³è¯·å†…å­˜çš„æµç¨‹ä¼šå˜æˆä¸‹é¢è¿™æ ·ï¼š\n\nç”³è¯·ä½äº256KBçš„è°ƒç”¨ThreadCacheçš„æ¥å£ï¼ˆåŒ…æ‹¬åˆ†é…å’Œå›æ”¶ï¼‰ï¼›\nå¤§äº256KBçš„è°ƒç”¨PageCacheçš„æ¥å£ï¼ˆåŒ…æ‹¬åˆ†é…å’Œå›æ”¶ï¼‰ï¼›\nå½“PageCacheæ£€æµ‹åˆ°ç”³è¯·çš„å†…å­˜å¤§äº128Pageçš„æ—¶å€™ï¼Œç›´æ¥å‘ç³»ç»Ÿç”³è¯·å†…å­˜å¹¶è¿”å›ï¼›\nå½“PageCacheæ£€æµ‹åˆ°å›æ”¶çš„å†…å­˜å¤§äº128Pageçš„æ—¶å€™ï¼Œç›´æ¥é‡Šæ”¾ç»™æ“ä½œç³»ç»Ÿï¼›\n\nåˆ°è¿™é‡Œï¼Œå†…å­˜æ± çš„ä¸»é¢˜æ¡†æ¶å°±å…¨éƒ¨æˆå‹äº†ï¼Œåç»­è¦åšçš„å°±æ˜¯æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–äº†ã€‚\n6.6 SpanListå’Œå­ç±»å› ä¸ºåªæœ‰CentralCacheéœ€è¦ç”¨åˆ°æ¡¶é”ï¼Œè€ŒPageCacheåŒæ„éœ€è¦ä½¿ç”¨SpanListï¼Œä¸ºäº†èŠ‚çœä¸€å®šç©ºé—´ï¼ˆPageCacheçš„SpanListä¸­çš„é”æ˜¯æ²¡ç”¨çš„ï¼‰ï¼ŒCentralCacheæˆ‘ä½¿ç”¨äº†ç»§æ‰¿è‡ªçˆ¶ç±»SpanListçš„å¦å¤–ä¸€ä¸ªç±»å‹ï¼Œåœ¨é‡Œé¢æ·»åŠ äº†ä¸€ä¸ªmutexé”ã€‚\nåœ¨32ä½windowsç¯å¢ƒä¸‹ï¼Œmutexç±»çš„å¤§å°æ˜¯48å­—èŠ‚ï¼Œ128ä¸ªSpanListï¼Œè¿˜æ˜¯èƒ½èŠ‚çœä¸€å®šç©ºé—´çš„ã€‚\nstd::mutex mtx;cout &lt;&lt; sizeof(mtx) &lt;&lt; endl; // 32ä½ä¸‹æ˜¯48å­—èŠ‚\n\n7.æµ‹è¯•7.1 ç”³è¯·å’Œé‡Šæ”¾å‡½æ•°è™½ç„¶å†™äº†ä¸‰æˆçš„è®¾è®¡ï¼Œä½†æ˜¯ç”³è¯·å’Œé‡Šæ”¾å‡½æ•°å¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨ThreadCacheçš„å‡½æ•°ï¼Œè¿˜éœ€è¦å¦å¤–ä¸€ä¸ªå‡½æ•°æ¥è¿›è¡ŒThreadCacheçš„æ„é€ ï¼Œä»¥åŠå¤§äº256KBå†…å­˜çš„å¤„ç†ã€‚\nè¿™é‡Œæœ‰ä¸ªå¤ç”¨è®¾è®¡ï¼Œå³å°†PageCacheä¸­çš„é¡µå·å¯¹åº”Spanå¯¹è±¡æŒ‡é’ˆçš„æ˜ å°„çš„unordered_mapæ¥ç¡®å®šå½“å‰ç”³è¯·çš„å†…å­˜çš„å¤§å°ï¼Œè¿™æ ·å°±ä¸éœ€è¦ç”¨æˆ·ä¸»åŠ¨ä¼ å…¥å‚æ•°äº†ï¼ˆä¸»åŠ¨ä¼ å…¥å®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼å’Œå¤„ç†é—®é¢˜ï¼‰\nstatic void* ConcurrentAlloc(size_t size)&#123;    if (size &gt; MAX_SIZE)    &#123;        size_t alignSize = SizeClass::RoundUp(size);        size_t kpage = alignSize &gt;&gt; PAGE_SHIFT;        PageCache::GetInstance()-&gt;Lock();        Span* span = PageCache::GetInstance()-&gt;NewSpan(kpage);        span-&gt;_objSize = size; // ç”³è¯·å¤§å†…å­˜æ²¡æœ‰æ‹†åˆ†        PageCache::GetInstance()-&gt;Unlock();        void* ptr = (void*)(span-&gt;_pageId &lt;&lt; PAGE_SHIFT);        return ptr;    &#125;    else    &#123;        // å› ä¸ºæ˜¯çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ é”        if (TLSThreadCache == nullptr)        &#123;            // è¿™é‡Œçš„staticå˜é‡æ˜¯å…¨å±€å¯è§çš„            static FixedMemoryPool&lt;ThreadCache&gt; tcPool;             TLSThreadCache = tcPool.New();        &#125;        return TLSThreadCache-&gt;Allocate(size);    &#125;&#125;static void ConcurrentFree(void* ptr)&#123;    Span* span = PageCache::GetInstance()-&gt;MapObjectToSpan(ptr);    size_t size = span-&gt;_objSize;    if (size &gt; MAX_SIZE)    &#123;        PageCache::GetInstance()-&gt;Lock();        PageCache::GetInstance()-&gt;ReleaseSpanToPageCache(span);        PageCache::GetInstance()-&gt;Unlock();    &#125;    else    &#123;        assert(TLSThreadCache);        TLSThreadCache-&gt;Deallocate(ptr, size);    &#125;&#125;\n\n7.2 å•çº¿ç¨‹ç”³è¯·ç”¨ä¸‹é¢çš„ä»£ç æµ‹è¯•ï¼Œç¯å¢ƒæ˜¯windows x64ï¼›\nvoid TestNormalAlloc()&#123;\tvoid* p1 = ConcurrentAlloc(6);\tvoid* p2 = ConcurrentAlloc(8);\tvoid* p3 = ConcurrentAlloc(12);\tvoid* p4 = ConcurrentAlloc(7000);\tvoid* p5 = ConcurrentAlloc(10);\tvoid* p6 = ConcurrentAlloc(800);\tvoid* p7 = ConcurrentAlloc(30);\tcout &lt;&lt; p1 &lt;&lt; endl;\tcout &lt;&lt; p2 &lt;&lt; endl;\tcout &lt;&lt; p3 &lt;&lt; endl;\tcout &lt;&lt; p4 &lt;&lt; endl;\tcout &lt;&lt; p5 &lt;&lt; endl;\tcout &lt;&lt; p6 &lt;&lt; endl;\tcout &lt;&lt; p7 &lt;&lt; endl;\tConcurrentFree(p1);\tConcurrentFree(p2);\tConcurrentFree(p3);\tConcurrentFree(p4);\tConcurrentFree(p5);\tConcurrentFree(p6);\tConcurrentFree(p7);&#125;\n\næµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œé‡Šæ”¾å’Œç”³è¯·éƒ½æ²¡æœ‰é—®é¢˜\n000001A864B20000000001A864B20008000001A864B22000000001A864B24000000001A864B22010000001A864B62000000001A864BA0000\n\n7.3 å¤šçº¿ç¨‹ç”³è¯·void MultiThreadAlloc1()&#123;\ttry&#123;\t\tstd::vector&lt;void*&gt; v;\t\tfor (int i = 0; i &lt; 50; i++)\t\t&#123;\t\t\tvoid* ptr = ConcurrentAlloc(6);\t\t\tcout &lt;&lt; &quot;1 - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - &quot; &lt;&lt; ptr &lt;&lt; endl;\t\t\tv.push_back(ptr);\t\t&#125;\t\tfor (auto e : v)\t\t&#123;\t\t\tConcurrentFree(e);\t\t&#125;\t&#125;\tcatch (...)\t&#123;\t\tcout &lt;&lt; &quot;error in MultiThreadAlloc1\\n&quot;;\t\treturn;\t&#125;&#125;void MultiThreadAlloc2()&#123;\ttry &#123;\t\tstd::vector&lt;void*&gt; v;\t\tfor (int i = 0; i &lt; 50; i++)\t\t&#123;\t\t\tvoid* ptr = ConcurrentAlloc(20);\t\t\tcout &lt;&lt; &quot;2 - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - &quot; &lt;&lt; ptr &lt;&lt; endl;\t\t\tv.push_back(ptr);\t\t&#125;\t\tfor (auto e : v)\t\t&#123;\t\t\tConcurrentFree(e);\t\t&#125;\t&#125;\tcatch (...)\t&#123;\t\tcout &lt;&lt; &quot;error in MultiThreadAlloc2\\n&quot;;\t\treturn;\t&#125;&#125;// æµ‹è¯•å¤šçº¿ç¨‹å¤„ç†æ˜¯å¦æœ‰é—®é¢˜void TestMultiThread()&#123;\tstd::thread t1(MultiThreadAlloc1);\tstd::thread t2(MultiThreadAlloc2);\tt1.detach();\tt2.join();&#125;\n\nä¹Ÿæ²¡å•¥é—®é¢˜\n1 - 34788 - 0000019E479200002 - 14252 - 0000019E479220001 - 34788 - 0000019E479200081 - 34788 - 0000019E479200102 - 14252 - 0000019E479220181 - 34788 - 0000019E479200182 - 14252 - 0000019E479220301 - 34788 - 0000019E479200201 - 34788 - 0000019E479200281 - 34788 - 0000019E479200301 - 34788 - 0000019E479200381 - 34788 - 0000019E479200401 - 34788 - 0000019E479200482 - 14252 - 0000019E47922048...\n\næ³¨æ„ï¼Œè¿›è¡Œå¤šçº¿ç¨‹æµ‹è¯•çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿è¯ä¸»çº¿ç¨‹é€€å‡ºæ—¶é—´æ™šäºå­çº¿ç¨‹ï¼ˆæ¯”å¦‚åœ¨thread.join()ä¹‹ååŠ sleep)ï¼Œé¿å…å‡ºç°ä¸»çº¿ç¨‹æå‰é€€å‡ºçš„æƒ…å†µï¼Œè¿™ä¼šå¯¼è‡´å­çº¿ç¨‹é‡Œé¢çš„æ‰“å°ä¸è¾“å‡ºï¼Œæˆ–è€…å…¶ä»–çš„ä¸€äº›é”™è¯¯ã€‚\n7.4 å®šé•¿å†…å­˜æ± æ®µé”™è¯¯è§£å†³åˆšå¼€å§‹è¿è¡Œçš„æ—¶å€™ï¼Œå¤šçº¿ç¨‹ç»å¸¸é‡åˆ°æ®µé”™è¯¯é—®é¢˜ï¼Œè€Œä¸”ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šå‡ºç°ã€‚\n\nä¸€èˆ¬é‡åˆ°è¿™ç§ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šå‡ºç°çš„æ®µé”™è¯¯ï¼Œå°±å¯ä»¥è€ƒè™‘æ˜¯å¦ä¸ºå¤šçº¿ç¨‹å¹¶å‘é—®é¢˜äº†ã€‚\n\nåæ¥å®¡æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç°é—®é¢˜æ‰€åœ¨æ˜¯ç”³è¯·å†…å­˜å‡½æ•°ä¸­çš„ThreadCacheåˆå§‹åŒ–éƒ¨åˆ†\n// é€šè¿‡TLS æ¯ä¸ªçº¿ç¨‹æ— é”çš„è·å–è‡ªå·±çš„ä¸“å±çš„ThreadCacheå¯¹è±¡if (TLSThreadCache == nullptr)&#123;    static FixedMemoryPool&lt;ThreadCache&gt; tcPool; // è¿™é‡Œçš„staticå˜é‡æ˜¯å…¨å±€å¯è§çš„    TLSThreadCache = tcPool.New();&#125;\n\nåœ¨åˆå§‹åŒ–éƒ¨åˆ†è¿™é‡Œï¼Œè®¾ç½®äº†ä¸€ä¸ªstaticçš„å®šé•¿å†…å­˜æ± ï¼Œå¯¹äºæ‰€æœ‰çº¿ç¨‹éƒ½æ˜¯å¯è§çš„ã€‚è¿™æ—¶å€™å°±ä¼šå‡ºç°å¤šçº¿ç¨‹å¹¶å‘çš„é—®é¢˜ï¼ˆä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå®šé•¿å†…å­˜æ± ï¼‰ã€‚\nåœ¨PageCacheä¸­çš„Spanå®šé•¿å†…å­˜æ± ï¼Œå› ä¸ºè®¿é—®PageCacheçš„æ—¶å€™å·²ç»åŠ è¿‡é”äº†ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°å¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œçš„ThreadCacheåˆå§‹åŒ–æ—¶å¹¶æ²¡æœ‰åŠ é”ï¼Œå°±ä¼šå‡ºç°å¤šçº¿ç¨‹è®¿é—®é—®é¢˜ã€‚\nè§£å†³æ–¹æ¡ˆï¼š\n\nåœ¨å®šé•¿å†…å­˜æ± ä¸­åŠ ä¸Šä¸€ä¸ªmutexæˆå‘˜ï¼Œå¹¶è¿›è¡ŒåŠ é”è§£é”æ“ä½œï¼›\nåœ¨ç”³è¯·å†…å­˜åˆå§‹åŒ–ThreadCacheçš„éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªé”ï¼Œå¹¶è¿›è¡ŒåŠ é”è§£é”æ“ä½œï¼›\n\né‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼è®¾ç½®å®Œæ¯•åï¼Œè¿ç»­è¿è¡Œäº†åå‡ æ¬¡ï¼Œéƒ½æ²¡æœ‰å†å‡ºç°æ®µé”™è¯¯é—®é¢˜äº†ã€‚\nåç»­ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œæˆ‘æ”¹ä¸ºäº†ç¬¬äºŒç§æ–¹å¼ã€‚å› ä¸ºPageCacheä¸­è®¿é—®Spanå¯¹è±¡çš„å®šé•¿å†…å­˜æ± çš„åŠ é”æ˜¯æ— æ„ä¹‰çš„ï¼Œä¼šæœ‰é¢å¤–æ€§èƒ½æŸå¤±ã€‚\n// é€šè¿‡TLS æ¯ä¸ªçº¿ç¨‹æ— é”çš„è·å–è‡ªå·±çš„ä¸“å±çš„ThreadCacheå¯¹è±¡if (TLSThreadCache == nullptr)&#123;    // C++11åstaticå˜é‡åˆå§‹åŒ–æ—¶çº¿ç¨‹å®‰å…¨    static FixedMemoryPool&lt;ThreadCache&gt; tcPool; // è¿™é‡Œçš„staticå˜é‡æ˜¯å…¨å±€å¯è§çš„    // åœ¨newä¹‹å‰åŠ é”å°±å¯ä»¥äº†    std::unique_lock&lt;std::mutex&gt; lockGuard(TLSThreadCacheMtx);    TLSThreadCache = tcPool.New();&#125;\n\n8.Linuxä¸‹æ¥å£è¡¥å…¨å‰æ–‡æ‰€è¿°çš„æ¥å£éƒ½æ˜¯åœ¨Windowsä¸‹ä½¿ç”¨çš„ï¼Œä¸‹é¢è¦å¯¹Linuxä¸­ä¸Windowsä¸ä¸€è‡´çš„åœ°æ–¹è¿›è¡Œè¡¥å…¨ã€‚\n8.1 PageIDçš„typedefä¹‹å‰åœ¨Windowsä¸‹æ˜¯ç”¨_WIN32å’Œ_WIN64è¿™ä¸¤ä¸ªå®æ¥ç¡®å®šå¹³å°æ˜¯32ä½è¿˜æ˜¯64ä½çš„ï¼Œä½†æ˜¯Linuxä¸‹æ²¡æœ‰ç±»ä¼¼çš„å®ã€‚æœ€ç»ˆé‡‡ç”¨å¦‚ä¸‹æ–¹å¼æ¥ç¡®è®¤Linuxä¸‹å¹³å°çš„ä½æ•°\n// å› ä¸º64ä½å’Œ32ä½ä¸­å†…å­˜åœ°å€çš„é•¿åº¦ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯¹åº”ç±»å‹ä¹Ÿå¾—ä¸ä¸€æ ·#ifdef _WIN64 // 64ä½çš„winæ‰ä¼šæœ‰è¿™ä¸ªå®\ttypedef unsigned long long PageID;#elif _WIN32 // 32å’Œ64ä½çš„winéƒ½ä¼šæœ‰è¿™ä¸ªå®\ttypedef size_t PageID;// åç»­è¿˜éœ€è¦æ’å…¥ä¸€äº›Linuxçš„å®#elif __linux__\t#if __WORDSIZE == 64 // 64ä½çš„Linux\t\ttypedef unsigned long long PageID;\t#else\t\t\t\t // 32ä½çš„Linux\t\ttypedef size_t PageID;\t#endif#endif\n\nè¿™é‡Œä½¿ç”¨äº†__WORDSIZEè¿™ä¸ªå®ï¼Œå®ƒå…¶å®æ¯”è¾ƒé€šç”¨ï¼Œå«ä¹‰æ˜¯å½“å‰å¹³å°ä¸‹æŒ‡é’ˆçš„å¤§å°ï¼ˆå•ä½æ˜¯æ¯”ç‰¹ï¼‰ï¼Œ32ä½å¹³å°ä¸‹æŒ‡é’ˆæ˜¯32æ¯”ç‰¹4å­—èŠ‚ï¼Œ64ä½å¹³å°ä¸‹æŒ‡é’ˆæ˜¯64æ¯”ç‰¹8å­—èŠ‚ã€‚\n8.2 mmapç”³è¯·å’Œé‡Šæ”¾å†…å­˜åœ¨Linuxä¸‹ä½¿ç”¨mmapå’Œmunmapä¸¤ä¸ªæ¥å£æ¥ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å‚è€ƒmanæ‰‹å†Œã€‚\n#include &lt;sys/mman.h&gt; void *mmap(void *addr, size_t length, int prot, int flags,            int fd, off_t offset); int munmap(void *addr, size_t length);\n\nmmapçš„å‚æ•°è¯´æ˜ï¼š\n\nç¬¬ä¸€ä¸ªå‚æ•°addr: æŒ‡å®šéœ€è¦ç”³è¯·çš„å†…å­˜åœ¨æ“ä½œç³»ç»Ÿä¸­çš„åç§»é‡ï¼Œè®¾ç½®ä¸ºNULLè®©æ“ä½œç³»ç»Ÿè‡ªè¡Œé€‰æ‹©ï¼›\nç¬¬äºŒä¸ªå‚æ•°length: æŒ‡å®šç”³è¯·å†…å­˜çš„æ¯”ç‰¹æ•°\nç¬¬ä¸‰ä¸ªå‚æ•°prot: æŒ‡å®šç”³è¯·å†…å­˜çš„æƒé™ï¼ˆè¯»å†™ï¼‰\nç¬¬å››ä¸ªå‚æ•°flags: æŒ‡å®šç”³è¯·å†…å­˜çš„æ–¹å¼\nç¬¬äº”ä¸ªå‚æ•°fd: ç”³è¯·çš„å†…å­˜æ˜¯å¦éœ€è¦å’ŒæŸä¸ªæ–‡ä»¶æè¿°ç¬¦ç»‘å®šï¼Œ-1ä»£è¡¨ä¸ç»‘å®šï¼›\nç¬¬å…­ä¸ªå‚æ•°offsetï¼šæŒ‡å®šåç§»ï¼Œå¯¹äºåŒ¿åæ˜ å°„é€šå¸¸è®¾ç½®ä¸º0ï¼›\n\né‡Šæ”¾å†…å­˜çš„munmapæ¥å£å°±æ¯”è¾ƒç®€å•äº†ï¼Œä¼ å…¥å†…å­˜çš„æŒ‡é’ˆå’Œé•¿åº¦å°±å¯ä»¥äº†ã€‚\nç¤ºä¾‹ä»£ç å¦‚ä¸‹\nsize_t bytes = 1000;// PROT_READ | PROT_WRITE æŒ‡å®šè¯»å†™æƒé™// MAP_PRIVATE | MAP_ANONYMOUS ç§æœ‰å’ŒåŒ¿åæ˜ å°„void *ptr = mmap(NULL, bytes, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);// é‡Šæ”¾munmap(ptr, bytes);\n\nå› ä¸ºwindowsä¸‹çš„VirtualFreeå¹¶ä¸éœ€è¦ä¼ å…¥é•¿åº¦ï¼Œæ‰€ä»¥åœ¨Linuxä¸­æ”¹é€ å†…å­˜æ± çš„æ—¶å€™ï¼Œè¿˜éœ€è¦ä¸€ä¸ªmapæ¥å­˜æ”¾æŒ‡é’ˆå…¶å®åœ°å€å’Œé•¿åº¦çš„å…³ç³»ï¼Œä¿è¯é‡Šæ”¾çš„æ—¶å€™èƒ½æŒ‰æ­£ç¡®çš„å†…å­˜é•¿åº¦è¿›è¡Œé‡Šæ”¾ã€‚\n8.3 TLSå˜é‡è¿™ä¸€ç‚¹å‰æ–‡å·²ç»æåˆ°è¿‡åŒºåˆ«ï¼ŒLinuxä¸‹å’ŒWindowsçš„ä»£ç æœ‰ä¸€å®šå·®å¼‚ã€‚\n#ifdef _WIN32\tstatic _declspec(thread) ThreadCache *TLSThreadCache = nullptr;#elif __linux__\tstatic __thread ThreadCache *TLSThreadCache = nullptr;#endif\n\n8.4 ç³»ç»Ÿå†…å­˜åˆ†é…å’Œé‡Šæ”¾åœ°å€ä¸ä¸€è‡´é—®é¢˜ï¼ˆæœªè§£å†³ï¼‰å½“ç›´æ¥ç”³è¯·å¤§å—å†…å­˜ï¼ˆæ¯”å¦‚2000KBï¼‰çš„æ—¶å€™ï¼ŒPageCacheä¼šè°ƒç”¨SystemAllocå‡½æ•°ï¼Œä¸ä½¿ç”¨malloc&#x2F;newè€Œç›´æ¥è°ƒç”¨ç³»ç»Ÿæ¥å£æ¥ç”³è¯·å¤§å—å†…å­˜ã€‚\nè¿™é‡Œå°±å‡ºç°äº†é—®é¢˜ï¼Œç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿè¿”å›çš„å†…å­˜å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰æˆ‘ä»¬é¢„å®šçš„8KBé¡µæ¥èµ·å§‹çš„ï¼Œæ¯”å¦‚ä¸‹é¢çš„0xf7617000è¿™ä¸ªåœ°å€ï¼›\nalloc ptr: 0xf7617000 - 20480002000KB: 0xf7616000free ptr: 0xf7616000\n\nå°†0xf7617000é™¤ä»¥8KBå†ä¹˜ä»¥8KBï¼Œå¾—åˆ°çš„ç»“æœæ˜¯0xf7616000ï¼Œå’ŒåŸæœ¬åˆ†é…çš„å†…å­˜ä¸ä¸€è‡´ï¼å› ä¸ºPageCacheä¸­ç”³è¯·å†…å­˜çš„æ—¶å€™ä¼šå°†å…¶æŒ‰é¡µå·æ¥ä¿å­˜åœ¨Spanå¯¹è±¡é‡Œé¢ï¼Œä½†æ“ä½œç³»ç»Ÿè¿”å›çš„å†…å­˜å¹¶ä¸ä¸€å®šæ˜¯æŸä¸ªé¡µçš„èµ·å§‹åœ°å€ï¼\n\nè€Œä¸”ä¼šå‘ç°æœ€ç»ˆè°ƒç”¨æ–¹å¾—åˆ°çš„å†…å­˜æ˜¯0xf7616000ï¼Œè¿™ä¸ªåœ°å€å°äºæ“ä½œç³»ç»Ÿåˆ†é…ç»™æˆ‘ä»¬çš„0xf7617000ï¼Œå¦‚æœç›´æ¥è®¿é—®ï¼Œä¼šè®¿é—®åˆ°å¹¶ä¸å±äºå½“å‰å·²åˆ†é…å†…å­˜çš„éƒ¨åˆ†ï¼Œç›´æ¥æ®µé”™è¯¯ï¼\nè¿™ä¸ªé—®é¢˜å¤§æ¦‚ç‡æ˜¯ç”±Windowså’ŒLinuxä¸‹ç³»ç»Ÿè°ƒç”¨æ¥å£çš„ä¸åŒè®¾è®¡å¯¼è‡´çš„ï¼Œå› ä¸ºwindowsä¸‹ä¸ç®¡æ˜¯ç”¨x86å’Œx64éƒ½æ²¡æœ‰å¤ç°å‡ºè¿™ä¸ªé—®é¢˜ï¼ˆåœ¨Linuxä¸‹ä¼šæœ‰60%çš„å‡ ç‡å‡ºç°è¯¥é—®é¢˜ï¼‰\nè€Œä¸”è¯¥é—®é¢˜å½±å“çš„ä¸åªæ˜¯è¶…è¿‡1MBçš„å¤§å†…å­˜ç”³è¯·ï¼ŒPageCacheç”³è¯·å†…å­˜çš„æ—¶å€™ä¹Ÿæœ‰å¯èƒ½ä¼šé‡åˆ°ç³»ç»Ÿè°ƒç”¨æ¥å£è¿”å›çš„å†…å­˜å¹¶éæŒ‰8KBå¯¹é½çš„æƒ…å†µï¼Œæœ€ç»ˆå¯¼è‡´æ®µé”™è¯¯ã€‚\nç”±äºè¿™ä¸æ˜¯çº¿ç¨‹æ± è®¾è®¡ä¸­çš„é‡ç‚¹ï¼Œä¹Ÿå’Œçº¿ç¨‹æ± æœ¬èº«çš„æ€è·¯æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥æš‚æ—¶æŒ‚èµ·ä¸å»æ·±ç©¶ï¼Œç»§ç»­åœ¨Windowsä¸Šä»¥32ä½å¯¹çº¿ç¨‹æ± è¿›è¡Œä¼˜åŒ–ã€‚\n9.æ€§èƒ½é—®é¢˜9.1 ç®€å•æµ‹è¯•ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹åˆ†åˆ«æµ‹è¯•çº¿ç¨‹æ± ç”³è¯·å’Œmallocç”³è¯·å†…å­˜çš„è€—æ—¶\nvoid MultiThreadAlloc2()&#123;\ttry &#123;\t\tstd::vector&lt;void*&gt; v1;\t\tstd::vector&lt;void*&gt; v2;\t\tsize_t begin1 = clock();\t\tfor (int i = 0; i &lt; 100; i++)\t\t&#123;\t\t\tvoid* ptr = ConcurrentAlloc(30);\t\t\tcout &lt;&lt; &quot;21 - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - &quot; &lt;&lt; ptr &lt;&lt; endl;\t\t\tv1.push_back(ptr);\t\t&#125;\t\tfor (auto e : v1)\t\t&#123;\t\t\tConcurrentFree(e);\t\t&#125;\t\tsize_t end1 = clock();\t\tsize_t begin2 = clock();\t\tfor (int i = 0; i &lt; 100; i++)\t\t&#123;\t\t\tvoid* ptr = malloc(30);\t\t\tcout &lt;&lt; &quot;22 - &quot; &lt;&lt; std::this_thread::get_id() &lt;&lt; &quot; - &quot; &lt;&lt; ptr &lt;&lt; endl;\t\t\tv2.push_back(ptr);\t\t&#125;\t\tfor (auto e : v2)\t\t&#123;\t\t\tfree(e);\t\t&#125;\t\tsize_t end2 = clock();\t\tstd::this_thread::sleep_for(std::chrono::seconds(2));\t\tcout &lt;&lt; &quot;2 memory pool cost time:&quot; &lt;&lt; end1 - begin1 &lt;&lt; endl;\t\tcout &lt;&lt; &quot;2 malloc cost time:&quot; &lt;&lt; end2 - begin2 &lt;&lt; endl;\t&#125;\tcatch (...)\t&#123;\t\tcout &lt;&lt; &quot;error in MultiThreadAlloc2\\n&quot;;\t\treturn;\t&#125;&#125;\n\nåœ¨vs2019çš„debug-x86æ¨¡å¼ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹\n2 memory pool cost time:982 malloc cost time:911 memory pool cost time:441 malloc cost time:95\n\nä¼šå‘ç°çº¿ç¨‹2çš„mallocç”³è¯·æ—¶é—´å°äºçº¿ç¨‹æ± ï¼Œè€Œçº¿ç¨‹1çš„çº¿ç¨‹æ± æ•ˆç‡æ›´é«˜ã€‚å†æµ‹è¯•ä¸€æ¬¡ï¼Œåˆä¼šå‘ç°ä¸¤ä¸ªçº¿ç¨‹mallocçš„æ•ˆç‡éƒ½æ›´é«˜äº†ã€‚\n2 memory pool cost time:802 malloc cost time:771 memory pool cost time:691 malloc cost time:61\n\nè¿™æ˜æ˜¾ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå¦‚æœä¸€ä¸ªå†…å­˜æ± çš„æ•ˆç‡ä½äºmallocï¼Œå®ƒå­˜åœ¨çš„æ„ä¹‰å°±ä¸æ˜¯å¾ˆå¤§äº†ã€‚æ‰€ä»¥éœ€è¦é’ˆå¯¹å½“å‰çº¿ç¨‹æ± ä¸­çš„æ€§èƒ½ç“¶é¢ˆè¿›è¡Œä¸€å®šåˆ†æå’Œä¼˜åŒ–ã€‚\n9.2 VS2019æ€§èƒ½æŸ¥çœ‹å™¨VS2019çš„è°ƒè¯•é€‰é¡¹ä¸­æœ‰ä¸€ä¸ªæ€§èƒ½æ¢æŸ¥å™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®å®šå½“å‰é¡¹ç›®ä¸­å“ªä¸€ä¸ªéƒ¨åˆ†æœ€è€—æ—¶ã€‚\n\nè°ƒæ•´åˆ°DEBUGæ¨¡å¼ä¸‹ï¼Œé€‰æ‹©æ£€æµ‹ï¼Œç‚¹å‡»å¼€å§‹\n\n\næœ€ç»ˆé€‰æ‹©å½“å‰é¡¹ç›®å¹¶ç­‰å¾…è¿è¡Œåï¼Œä¼šå¾—åˆ°ä¸€ä¸ªä¸‹é¢è¿™æ ·çš„æŠ¥å‘Šã€‚æ³¨æ„ä½¿ç”¨æ€§èƒ½ç›‘çœ‹å™¨çš„æ—¶å€™åº”è¯¥æŠŠå¤šçº¿ç¨‹ä»£ç å†…éƒ¨çš„æ‰“å°å’Œsleepç»™å»æ‰ï¼ˆå¦åˆ™ä¼šæ˜¾ç¤ºæ‰“å°å’Œsleepçš„è€—æ—¶å¾ˆé•¿ï¼‰\n\nä¸Šå›¾æ˜¯åªæœ‰ä¸¤ä¸ªçº¿ç¨‹æ—¶çš„æŠ¥å‘Šï¼Œä¸‹å›¾æ˜¯4ä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæ—¶çš„æŠ¥å‘Š\n\nè¿™é‡Œå°±èƒ½çœ‹åˆ°ï¼ŒConcurrentFreeå‡½æ•°å ç”¨äº†å¾ˆå¤§çš„CPUæ—¶é—´\n\n\nåœ¨ConcurrentFreeå‡½æ•°ä¸­ï¼ŒMapObjectToSpanå‡½æ•°å’ŒThreadCache::Deallocateå‡½æ•°å ç”¨çš„æ—¶é—´æ¯”è¾ƒé•¿ã€‚\nè¿›ä¸€æ­¥æŸ¥çœ‹ï¼Œåœ¨ThreadCache::Deallocateå‡½æ•°ä¸­ï¼Œè€—æ—¶çš„ä¹Ÿæ˜¯MapObjectToSpanè¿™ä¸ªHashMapçš„æŸ¥è¯¢æ“ä½œã€‚\n\nMapObjectToSpanå‡½æ•°ä¸­ï¼Œå ç”¨æ—¶é—´é•¿çš„æ˜¯åŠ é”å’Œfindçš„æ“ä½œã€‚\n\nå¦‚æœèƒ½çœå»è¿™é‡Œçš„åŠ é”ï¼Œé‚£ä¹ˆå†…å­˜æ± é‡Šæ”¾å†…å­˜çš„æ•ˆç‡å°±ä¼šå¤§å¤§æé«˜ã€‚\nè¿™æ—¶å€™å°±éœ€è¦å¼•å…¥å¦å¤–ä¸€ç§æ•°æ®ç»“æ„äº†ï¼šåŸºæ•°æ ‘ radix_treeã€‚\n9.3 åŸºæ•°æ ‘æ•°æ®ç»“æ„è¯´æ˜åœ¨PageCacheä¸­çš„unordered_mapæ˜¯ç”¨äºæ˜ å°„é¡µå·å’Œå¯¹åº”Spanå¯¹è±¡æŒ‡é’ˆçš„ï¼Œè¿™ä¸¤ä¸ªæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªæ•´å½¢ã€‚åŸºæ•°æ ‘å°±æ¯”è¾ƒé€‚åˆè¿™æ ·çš„åœºæ™¯ã€‚\n\nå•å±‚åŸºæ•°æ ‘å…¶å®å°±æ˜¯ä¸€ä¸ªâ€œç›´æ¥å®šå€æ³•â€çš„å“ˆå¸Œæ•°ç»„ï¼Œç”¨é¡µé¢æ•°é‡ä½œä¸ºæ•°ç»„é•¿åº¦ï¼Œæ¯ä¸ªæ•°ç»„çš„å…ƒç´ éƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼›\n\nåœ¨32ä½ç³»ç»Ÿä¸‹ï¼Œè¿™ä¸ªæ•°ç»„çš„é•¿åº¦æ˜¯32-PAGE_SHIFTï¼Œå¯¹äºå½“å‰é¡¹ç›®è€Œè¨€PAGE_SHIFTæ˜¯13ï¼Œåˆ™æœ€ç»ˆæ•°ç»„çš„é•¿åº¦æ˜¯2^19ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª4å­—èŠ‚çš„æŒ‡é’ˆç±»å‹ï¼Œæ•°ç»„çš„å¤§å°å°±æ˜¯2048KBï¼Œå³2MBã€‚è¿™ä¸ªå¤§å°å¹¶ä¸ç®—å¤§ï¼Œå¯ä»¥æ¥å—ã€‚\nå¾ˆæ˜æ˜¾ï¼Œä½¿ç”¨å•å±‚åŸºæ•°æ ‘ï¼Œæ—¶é—´å¤æ‚åº¦å°±ç›´æ¥è¢«å‹ç¼©åˆ°äº†æ•°ç»„ä¸‹æ ‡ç›´æ¥è®¿é—®çš„O(1)ï¼Œæ¯”unordered_mapæä¾›çš„å“ˆå¸Œè¡¨æ•ˆç‡æ›´é«˜ï¼ˆå› ä¸ºå•å±‚åŸºæ•°æ ‘å®Œå…¨æ²¡æœ‰å“ˆå¸Œç¢°æ’å’Œæ‰©å®¹é—®é¢˜ï¼‰ã€‚\n\nå¤šå±‚åŸºæ•°æ ‘åˆ©ç”¨é¡µå·çš„æ¯”ç‰¹ä½æ¥åˆ†å±‚\n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨32ä½ä¸‹ï¼Œé¡µå·åªæœ‰ä½19ä½æ˜¯æœ‰æ„ä¹‰çš„ã€‚å› ä¸ºé¡µå·æ˜¯ç”±32ä½åœ°å€å³ç§»13ä½å¾—æ¥çš„ã€‚\n\nå°†ä½çš„åä¹ä½è¿›ä¸€æ­¥åˆ†ä¸ºé«˜5ä½ï¼Œä½13ä½ï¼›è¿™é‡Œçš„é«˜5ä½å°±ä½œä¸ºç¬¬ä¸€å±‚çš„æ˜ å°„ï¼Œä½13ä½ä½œä¸ºç¬¬äºŒå±‚çš„æ˜ å°„\n\nç¬¬ä¸€å±‚çš„é•¿åº¦ä¸º2çš„5æ¬¡æ–¹ï¼›\nç¬¬äºŒå±‚çš„é•¿åº¦ä¸º2çš„13æ¬¡æ–¹ï¼›\n\næœ€ç»ˆåŸºæ•°æ ‘çš„æ•°ç»„é•¿åº¦æ˜¯2^5 * 2^13 = 262,144ï¼Œå ç”¨ç©ºé—´å¤§å°æ˜¯1024KBï¼Œå³1MBã€‚åˆ†å±‚ä¸ä»…èŠ‚çœäº†ç©ºé—´ï¼Œè€Œä¸”è¿˜é¿å…äº†ä¸€æ¬¡æ€§ç”³è¯·å¤§å—å†…å­˜ï¼ˆå¦‚æœæ˜¯å•å±‚åŸºæ•°æ ‘éœ€è¦ä¸€æ¬¡æ€§æŠŠæ•°ç»„çš„ç©ºé—´ç”³è¯·å‡ºæ¥ï¼‰ã€‚\n\næ›´å¤šå±‚çš„åŸºæ•°æ ‘éƒ½æ˜¯æŒ‰ä¸Šè¿°æ€è·¯å¾€ä¸‹æ‰©å±•ï¼Œå¦‚æœæ˜¯å…­åå››ä½çš„ç³»ç»Ÿå°±éœ€è¦ç”¨æ›´å¤šå±‚çš„åŸºæ•°æ ‘ã€‚\nåŸºæ•°æ ‘å› ä¸ºæ¯ä¸€ä¸ªé¡µå·éƒ½æœ‰ä¸€ä¸ªå•ç‹¬çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨ä¿®æ”¹çš„æ—¶å€™åªä¼šä¿®æ”¹å±€éƒ¨ï¼Œå¹¶ä¸å½±å“æ•´ä½“ã€‚è€Œä¸”å’Œçº¢é»‘æ ‘è¿™ç§æ•°æ®ç»“æ„æœ‰ä¸€ç‚¹ä¸åŒï¼Œçº¢é»‘æ ‘ä¸ºäº†ä¿è¯keyçš„æœ‰åºï¼Œåœ¨æ’å…¥çš„æ—¶å€™å¯èƒ½éœ€è¦è¿›è¡Œæ ‘ç»“æ„çš„æ—‹è½¬ï¼Œå‡è®¾æŸ¥è¯¢çš„æ—¶å€™é‡åˆ°è¿™ç§æ—‹è½¬ï¼Œæ•ˆç‡å°±ä¼šå˜ä½ç”šè‡³å‡ºç°é”™è¯¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨mapçš„æ—¶å€™éœ€è¦åŠ é”ã€‚unoredered_mapä¹Ÿæ˜¯åŒç†ï¼Œé‡åˆ°å“ˆå¸Œç¢°æ’å’Œç©ºé—´ä¸è¶³çš„æ—¶å€™ï¼Œéƒ½ä¼šä¿®æ”¹åŸæœ¬æ•°æ®çš„å­˜æ”¾ç»“æ„ï¼Œä¸ºäº†é¿å…å¤šçº¿ç¨‹é—®é¢˜ï¼Œå°±éœ€è¦åŠ é”æ‰èƒ½è¿›è¡ŒæŸ¥è¯¢ã€‚\nè€ŒåŸºæ•°æ ‘ä¸ç®¡æ˜¯æ’å…¥è¿˜æ˜¯åˆ é™¤æ“ä½œéƒ½ä¸ä¼šå½±å“æ•´ä¸ªæ ‘çš„ç»“æ„ï¼Œä½ å¯ä»¥ç†è§£ä¸ºåŸºæ•°æ ‘åˆ›å»ºå®Œæ¯•ä¹‹åæ•´ä¸ªæ ‘çš„ç»“æ„å°±ä¸ä¼šåŠ¨äº†ï¼Œè¿™ä¸€ç‚¹å°±è®©å®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚åªè¦å¤šçº¿ç¨‹ä¸ä¼šåŒæ—¶è¯»å†™ç›¸åŒé¡µå·çš„æ•°æ®ï¼Œå°±ä¸ä¼šå‡ºç°å¹¶å‘é—®é¢˜ã€‚\nå›åˆ°é¡¹ç›®å†æ¥çœ‹çœ‹é¡¹ç›®ä¸­ä»€ä¹ˆæ—¶å€™éœ€è¦è®¾ç½®æ˜ å°„ï¼Œä»€ä¹ˆæ—¶å€™ä¼šæŸ¥è¯¢æ˜ å°„ï¼Ÿ\nè®¾ç½®é¡µå·å’ŒSpanå¯¹è±¡çš„æŒ‡é’ˆå‡½æ•°ä¸ºSetMapObjectToSpanï¼Œåªåœ¨PageCacheçš„NewSpanå’ŒReleaseSpanToPageCacheå‡½æ•°ä¸­è¢«è°ƒç”¨ã€‚è€Œè®¿é—®PageCacheçš„æ—¶å€™éƒ½ä¼šåŠ é”ï¼Œè¿™é‡Œå¯¹æ˜ å°„çš„å†™æ“ä½œä¸å­˜åœ¨å¤šçº¿ç¨‹é—®é¢˜ã€‚\n\næŸ¥è¯¢æ“ä½œéƒ½æ˜¯åœ¨ConcurrentFreeå’ŒCentralCache::ReleaseListToSpansè¿™ä¸¤ä¸ªå†…å­˜é‡Šæ”¾å‡½æ•°ä¸­ã€‚\n\nPageCacheä¸­ä»€ä¹ˆæ—¶å€™ä¼šä¿®æ”¹æ˜ å°„ï¼š\n\nå°†å¯¹åº”å¤§å°Spanåˆ†é…ç»™CentralCacheæ—¶ï¼›\nå°†å¤§Spanæ‹†æˆå°Spanï¼Œå¹¶åˆ†é…ç»™CentralCacheæ—¶ï¼›\nå›æ”¶æ—¶å°†å°Spanä¸ç›¸é‚»Spanåˆå¹¶æ—¶ï¼›\n\nè€ŒæŸ¥è¯¢æ“ä½œéƒ½æ˜¯åœ¨å›æ”¶å†…å­˜çš„æ—¶å€™å‡ºç°çš„ï¼Œè¢«å›æ”¶çš„å†…å­˜ä¸€å®šä¸ä¼šæ˜¯åˆšåˆšå‡†å¤‡è¢«åˆ†é…çš„Spanå¯¹è±¡ï¼Œå› ä¸ºåˆ†é…å†…å­˜åçš„Spanå¯¹è±¡å°±ä¼šä»PageCacheçš„SpanListä¸­åˆ é™¤ï¼ŒPageCacheä¸ç®¡æ˜¯å›æ”¶åˆå¹¶æ“ä½œè¿˜æ˜¯æ‹†åˆ†æ“ä½œéƒ½ä¸ä¼šé‡åˆ°è¿™ä¸ªä¸å­˜åœ¨äºSpanListä¸­çš„Spanå¯¹è±¡ã€‚æ¢è€Œè¨€ä¹‹ï¼Œå½“å‰æ˜ å°„çš„å†™æ“ä½œå’Œè¯»æ“ä½œä¸ä¼šåŒæ—¶è®¿é—®ç›¸åŒé¡µå·çš„ä½ç½®ï¼è€ŒåŸºæ•°æ ‘çš„ç‰¹æ€§è®©è¿™ç§è¯»å†™ä¸åŒä¸‹æ ‡ä½ç½®çš„æ“ä½œæ— éœ€åŠ é”ï¼\nå»æ‰äº†é”ç«äº‰ï¼Œæ•ˆç‡å°±æé«˜äº†ï¼\nä»£ç å®ç°å•å±‚åŸºæ•°æ ‘ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç»™å®šä¸€ä¸ªGetå’Œä¸€ä¸ªSetï¼Œå°±å¯ä»¥äº†ã€‚\n// å•å±‚åŸºæ•°æ ‘ï¼Œåˆ©ç”¨æ¨¡æ¿å˜é‡æ¥è·å–é•¿åº¦template&lt;size_t BITS&gt;class PageMap1&#123;private:\tstatic const size_t LENGTH = 1 &lt;&lt; BITS; // ç”¨äºç¡®å®šåŸºæ•°æ ‘çš„é•¿åº¦\tvoid** _array; // ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å†…çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªvoid*æŒ‡é’ˆpublic:\tPageMap1()\t&#123;\t\tsize_t size = sizeof(void*) * LENGTH; // æ•´ä¸ªæ•°ç»„çš„é•¿åº¦\t\tsize_t alignSize = SizeClass::RoundUp(size); // è°ƒç”¨SystemAllocç”³è¯·å†…å­˜çš„æ—¶å€™éœ€è¦æŒ‰é¡µå¯¹é½\t\t_array = (void**)SystemAlloc(alignSize &gt;&gt; PAGE_SHIFT); // ä¸ºäº†å¯ç§»æ¤æ€§ï¼Œä½¿ç”¨Cè¯­è¨€çš„å¼ºåˆ¶è½¬æ¢\t\tmemset(_array, 0, size); // æ¸…é›¶\t&#125;\t// è¿™é‡Œé‡‡ç”¨uintptr_tï¼Œä¿è¯å¯ä»¥è¦†ç›–å½“å‰å¹³å°ä¸Šçš„æŒ‡é’ˆæ•°é‡\ttypedef uintptr_t Number;\t// setçš„æ—¶å€™éœ€è¦ä¿è¯keyæœ‰æ•ˆ\tvoid Set(Number key, void* value)\t&#123;\t\t_array[key] = value;\t&#125;\tvoid* Get(Number key)\t&#123;\t\t// è¶…è¿‡å½“å‰çš„å…è®¸èŒƒå›´äº†\t\tif ((key &gt;&gt; BITS) &gt; 0) &#123;\t\t\treturn NULL;\t\t&#125;\t\treturn _array[key];\t&#125;&#125;;\n\n9.4 å†æ¬¡æ€§èƒ½æµ‹è¯•å°†PageCacheä¸­çš„unordered_mapæ”¹ä¸ºå•å±‚åŸºæ•°æ ‘ï¼Œç„¶åå†è¿›è¡Œæµ‹è¯•ã€‚è¿™æ¬¡ä½¿ç”¨æ›´å¥½çš„è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ¥å¹¶å‘ç”³è¯·çš„æ–¹å¼è¿›è¡Œæµ‹è¯•ï¼Œæ–¹ä¾¿ä¿®æ”¹æµ‹è¯•å˜é‡ã€‚\n// mallocå¤šçº¿ç¨‹æµ‹è¯•// ntimes ä¸€è½®ç”³è¯·å’Œé‡Šæ”¾å†…å­˜çš„æ¬¡æ•°// nworks çº¿ç¨‹æ•°é‡// rounds è½®æ¬¡void BenchmarkMalloc(size_t ntimes, size_t nworks, size_t rounds)&#123;\tstd::vector&lt;std::thread&gt; vthread(nworks);\tstd::atomic&lt;size_t&gt; malloc_costtime = 0;\tstd::atomic&lt;size_t&gt; free_costtime = 0;\tfor (size_t k = 0; k &lt; nworks; ++k)\t&#123;\t\tvthread[k] = std::thread([&amp;, k]() &#123;\t\t\tstd::vector&lt;void*&gt; v;\t\t\tv.reserve(ntimes);\t\t\tfor (size_t j = 0; j &lt; rounds; ++j)\t\t\t&#123;\t\t\t\tsize_t begin1 = clock();\t\t\t\tfor (size_t i = 0; i &lt; ntimes; i++)\t\t\t\t&#123;\t\t\t\t\tv.push_back(malloc(35));\t\t\t\t\t//v.push_back(malloc((35 + i) % 8192 + 1));\t\t\t\t&#125;\t\t\t\tsize_t end1 = clock();\t\t\t\tsize_t begin2 = clock();\t\t\t\tfor (size_t i = 0; i &lt; ntimes; i++)\t\t\t\t&#123;\t\t\t\t\tfree(v[i]);\t\t\t\t&#125;\t\t\t\tsize_t end2 = clock();\t\t\t\tv.clear();\t\t\t\tmalloc_costtime += (end1 - begin1);\t\t\t\tfree_costtime += (end2 - begin2);\t\t\t&#125;\t\t\t&#125;);\t&#125;\tfor (auto&amp; t : vthread)\t&#123;\t\tt.join();\t&#125;\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ %u è½®æ¬¡ï¼Œæ¯è½® malloc %u æ¬¡ï¼Œè€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, rounds, ntimes, malloc_costtime.load());\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ %u è½®æ¬¡ï¼Œæ¯è½® free %u æ¬¡ï¼Œè€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, rounds, ntimes, free_costtime.load());\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œmalloc/free %u æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, nworks * rounds * ntimes, malloc_costtime.load() + free_costtime.load());&#125;// å†…å­˜æ± å¤šçº¿ç¨‹æµ‹è¯•// ntimes ä¸€è½®ç”³è¯·å’Œé‡Šæ”¾å†…å­˜çš„æ¬¡æ•°// nworks çº¿ç¨‹æ•°é‡// rounds è½®æ¬¡void BenchmarkConcurrentMalloc(size_t ntimes, size_t nworks, size_t rounds)&#123;\tstd::vector&lt;std::thread&gt; vthread(nworks);\tstd::atomic&lt;size_t&gt; malloc_costtime = 0;\tstd::atomic&lt;size_t&gt; free_costtime = 0;\tfor (size_t k = 0; k &lt; nworks; ++k)\t&#123;\t\tvthread[k] = std::thread([&amp;]() &#123;\t\t\tstd::vector&lt;void*&gt; v;\t\t\tv.reserve(ntimes);\t\t\tfor (size_t j = 0; j &lt; rounds; ++j)\t\t\t&#123;\t\t\t\tsize_t begin1 = clock();\t\t\t\tfor (size_t i = 0; i &lt; ntimes; i++)\t\t\t\t&#123;\t\t\t\t\tv.push_back(ConcurrentAlloc(35));\t\t\t\t\t//v.push_back(ConcurrentAlloc((35 + i) % 8192 + 1));\t\t\t\t&#125;\t\t\t\tsize_t end1 = clock();\t\t\t\tsize_t begin2 = clock();\t\t\t\tfor (size_t i = 0; i &lt; ntimes; i++)\t\t\t\t&#123;\t\t\t\t\tConcurrentFree(v[i]);\t\t\t\t&#125;\t\t\t\tsize_t end2 = clock();\t\t\t\tv.clear();\t\t\t\tmalloc_costtime += (end1 - begin1);\t\t\t\tfree_costtime += (end2 - begin2);\t\t\t&#125;\t\t\t&#125;);\t&#125;\tfor (auto&amp; t : vthread)\t&#123;\t\tt.join();\t&#125;\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ %u è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± ç”³è¯· %u æ¬¡ï¼Œè€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, rounds, ntimes, malloc_costtime.load());\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ %u è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± é‡Šæ”¾ %u æ¬¡ï¼Œè€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, rounds, ntimes, free_costtime.load());\tprintf(&quot;%u ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œå†…å­˜æ± ç”³è¯·å’Œé‡Šæ”¾ %u æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š%u ms\\n&quot;,\t\tnworks, nworks * rounds * ntimes, malloc_costtime.load() + free_costtime.load());&#125;void BenchMark()&#123;\tsize_t n = 10000;\tBenchmarkConcurrentMalloc(n, 4, 10);\tcout &lt;&lt; endl &lt;&lt; endl;\tBenchmarkMalloc(n, 4, 10);&#125;\n\nä»¥ä¸‹æ˜¯ä½¿ç”¨uordered_mapçš„æµ‹è¯•ç»“æœï¼ˆDEBUG-X86ï¼‰ï¼Œæ€§èƒ½è¿œä½äºmalloc&#x2F;freeã€‚\n4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± ç”³è¯· 100000 æ¬¡ï¼Œè€—æ—¶ï¼š4756 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± é‡Šæ”¾ 100000 æ¬¡ï¼Œè€—æ—¶ï¼š25577 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œå†…å­˜æ± ç”³è¯·å’Œé‡Šæ”¾ 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š30333 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® malloc 100000 æ¬¡ï¼Œè€—æ—¶ï¼š6064 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® free 100000 æ¬¡ï¼Œè€—æ—¶ï¼š1797 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œmalloc/free 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š7861 ms\n\nä»¥ä¸‹æ˜¯ä½¿ç”¨å•å±‚åŸºæ•°æ ‘çš„æµ‹è¯•ç»“æœï¼ˆDEBUG-X86ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ—¶æˆ‘ä»¬çš„å†…å­˜æ± æ•ˆç‡å°±å®Œç¾ä½“ç°å‡ºæ¥äº†ã€‚\n4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± ç”³è¯· 10000 æ¬¡ï¼Œè€—æ—¶ï¼š177 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± é‡Šæ”¾ 10000 æ¬¡ï¼Œè€—æ—¶ï¼š72 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œå†…å­˜æ± ç”³è¯·å’Œé‡Šæ”¾ 400000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š249 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® malloc 10000 æ¬¡ï¼Œè€—æ—¶ï¼š644 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® free 10000 æ¬¡ï¼Œè€—æ—¶ï¼š181 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œmalloc/free 400000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š825 ms\n\n4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± ç”³è¯· 100000 æ¬¡ï¼Œè€—æ—¶ï¼š1899 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± é‡Šæ”¾ 100000 æ¬¡ï¼Œè€—æ—¶ï¼š796 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œå†…å­˜æ± ç”³è¯·å’Œé‡Šæ”¾ 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š2695 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® malloc 100000 æ¬¡ï¼Œè€—æ—¶ï¼š5947 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® free 100000 æ¬¡ï¼Œè€—æ—¶ï¼š2298 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œmalloc/free 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š8245 ms\n\næ”¹æˆReleaseæ¨¡å¼é‡æ–°æµ‹è¯•ä¸€ä¸‹ï¼Œå¯è§Releaseæ¨¡å¼å¯¹mallocæ“ä½œæœ‰ä¸€å®šä¼˜åŒ–ï¼ŒäºŒè€…å·®è·æ²¡æœ‰é‚£ä¹ˆé«˜ï¼Œä¸è¿‡å·²ç»èƒ½ä½“ç°å½“å‰å†…å­˜æ± çš„æ€§èƒ½è¿˜ä¸é”™äº†ã€‚\n4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± ç”³è¯· 100000 æ¬¡ï¼Œè€—æ—¶ï¼š169 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½®å†…å­˜æ± é‡Šæ”¾ 100000 æ¬¡ï¼Œè€—æ—¶ï¼š118 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œå†…å­˜æ± ç”³è¯·å’Œé‡Šæ”¾ 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š287 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® malloc 100000 æ¬¡ï¼Œè€—æ—¶ï¼š165 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œ 10 è½®æ¬¡ï¼Œæ¯è½® free 100000 æ¬¡ï¼Œè€—æ—¶ï¼š189 ms4 ä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œmalloc/free 4000000 æ¬¡ï¼Œæ€»è®¡è€—æ—¶ï¼š354 ms\n\nå†ç”¨æ€§èƒ½ç›‘è§†å™¨æŸ¥çœ‹ï¼Œå‘ç°æ€§èƒ½æ¶ˆè€—æœ€å¤§çš„å·²ç»æ˜¯vectorçš„pushæ“ä½œäº†ï¼ŒåŸå…ˆè€—æ—¶çš„MapæŸ¥è¯¢æ“ä½œç°åœ¨å æ¯”å·²ç»ä¸é«˜äº†ã€‚\n\nThe endå†…å­˜æ± çš„åŸºæœ¬å­¦ä¹ å’Œé¡¹ç›®çš„å®ç°å†…å®¹åˆ°è¿™é‡Œå°±OVERå•¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","é¡¹ç›®å¼€å‘è®°å½•"],"tags":["Linux","Cpp"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ02-RGBå°ç¯","url":"/posts/178546113/","content":"\n\nå‰è¨€åˆåˆ°äº†æ ‘è“æ´¾å­¦ä¹ çš„æ—¶å€™ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\nä¸Šä¸€æ¬¡çš„å®éªŒ001-åŒè‰²LEDä¸­ï¼Œè™½ç„¶æˆ‘æŠŠåšå®¢å±•ç¤ºäº†å‡ºæ¥ï¼Œå†™çš„å¥½åƒæœ‰æ¨¡æœ‰æ ·çš„ï¼Œå®é™…ä¸Šæˆ‘å¯¹ä¸€äº›å‡½æ•°å¯è°“æ˜¯ä¸æ¯«ä¸æ‡‚ã€‚\nä½†è¿™æ¬¡ä¸ä¸€æ ·äº†ï¼Œæˆ‘æŠŠä¸€äº›å‡½æ•°çš„åŸºæœ¬ä½¿ç”¨ç»™æ•´æ˜ç™½äº†ï¼\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿\nè·³çº¿ä¸€å †\nRGBå°ç¯\n\né€šè¿‡è¿™æ¬¡è¯•éªŒï¼Œæˆ‘ä»¬å¯ä»¥åŸºæœ¬äº†è§£ä¸€ä¸‹è®©ç”µè„‘æ€§èƒ½æå‡200%çš„RGBçš„åº•å±‚æ§åˆ¶\n\n1.1æ ‘è“æ´¾è¿è¡Œåº“å‡†å¤‡å½“æ ‘è“æ´¾éœ€è¦ä¸å¤–éƒ¨å…ƒä»¶ç›¸æ¥æ—¶ï¼Œè¦ç”¨åˆ°ä¸€äº›å†™å¥½çš„åº“ã€‚å¦‚æ ‘è“æ´¾wiringPiåº“\n\n\næ ‘è“æ´¾wiringPiåº“ï¼šä¸‹è½½&#x2F;å®‰è£…æ•™ç¨‹\n\nä¸‹è½½softPwm.håº“ï¼šGitHubé“¾æ¥ï¼Œå®‰è£…æ•™ç¨‹è§README\n\n\n\n\n2.å…ƒä»¶æ¥çº¿RGBledæ¨¡å—çš„ç”µè·¯å›¾å¦‚ä¸‹ï¼Œå…¶ä¸å®ç‰©å›¾æ˜¯å¯¹åº”å…³ç³»\n\n\nä»¥ä¸‹æ˜¯æœ¬æ¬¡å®éªŒçš„æ¥çº¿å›¾\n\nå…¶å®è¿™é‡Œæˆ‘æ²¡ææ‡‚è¿™ä¸ª5Væ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Œå› ä¸ºä¸æ¥å¥½åƒä¹Ÿæ²¡æœ‰å…³ç³»\n\nè®©æˆ‘æ— è¯­çš„æ˜¯ï¼Œå»é—®åº—å®¶ï¼Œå®¢æœå›å¤æ˜¯â€œåŸç†éœ€è¦è‡ªå·±å­¦ä¹ â€\nçœ‹æ¥è¿˜æ˜¯å¾—é è‡ªå·±\n\nå¤§èƒ†çŒœæµ‹ä¸€ä¸‹ï¼Œåç»­çš„å®éªŒéœ€è¦æ›´å¤šæ¥5Vçš„è®¾å¤‡ï¼Œè¿™ä¸ª5Vå¼•çº¿å°±å¥½æ¯”æˆ‘ä»¬æ¯æ¬¡ç¼–å†™Cè¯­è¨€éƒ½éœ€è¦ç”¨stdio.hä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªä¹ æƒ¯ã€‚\nåŒæ—¶è§£é‡Šä¸€ä¸‹é¢åŒ…æ¿å·¦å³ä¸¤æ¡çº¿çš„ä½œç”¨ï¼š\n\nå½“ä½ æŠŠGNDç”¨å¼•çº¿æ¥åˆ°è“è‰²-çº¿ä¸Šï¼Œæ­¤æ—¶é‚£ä¸€æ’éƒ½æ˜¯GND\nå½“ä½ æŠŠ5Vç”¨å¼•çº¿æ¥åˆ°çº¢è‰²+ä¸Šï¼Œçº¢è‰²ä¸€æ’éƒ½æ˜¯5Väº†\n\nè¿™å°±ç›¸å½“äºä¸²è”çº¿è·¯\n\n\n3.å‡½æ•°è§£é‡Šè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°ï¼š softPwmCreateå’ŒsoftPwmWrite\nä¸Šç¯‡åšå®¢ä¸­æˆ‘åªç»™å‡ºäº†è¿™ä¸¤ä¸ªå‡½æ•°çš„è§£é‡Šæ–‡æ¡£ï¼ˆå·æ‡’ï¼‰ï¼Œè¿™ç¯‡åšå®¢è®©æˆ‘ä»¬æ¥çœŸåˆ‡è®¤è¯†ä¸€ä¸‹è¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨\n\nä»¥ä¸‹æ˜¯å‡½æ•°åŸå‹ï¼Œä»¥åŠå®˜æ–¹è§£é‡Šçš„ç¿»è¯‘\nint softPwmCreate (int pin, int initialValue, int pwmRange) ;\n\nè¿™å°†åˆ›å»ºä¸€ä¸ªè½¯ä»¶æ§åˆ¶çš„PWMå¼•è„šã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•GPIOå¼•è„šï¼Œå¼•è„šç¼–å·å°†ä¸æ‚¨ä½¿ç”¨çš„wiringPiSetup()å‡½æ•°ç›¸åŒã€‚\ninitialValueæ˜¯åˆå§‹å€¼ï¼Œå¦‚æœpwmRangeä½¿ç”¨100ï¼Œé‚£ä¹ˆç»™å®šå¼•è„šçš„å€¼å¯ä»¥æ˜¯0ï¼ˆå…³é—­ï¼‰åˆ°100ï¼ˆå®Œå…¨æ‰“å¼€ï¼‰ä¹‹é—´çš„ä»»ä½•å€¼ã€‚ è¿”å›å€¼ä¸º0è¡¨ç¤ºæˆåŠŸï¼Œ-1ä»£è¡¨å¤±è´¥ã€‚\nå¦‚æœè¿˜æœ‰å…¶ä»–æƒ…å†µï¼Œæ‚¨åº”è¯¥æ£€æŸ¥å…¨å±€errnoå˜é‡ï¼Œçœ‹çœ‹å“ªé‡Œå‡ºäº†é—®é¢˜ã€‚\nvoid softPwmWrite (int pin, int value) ;\n\næ›´æ–°ç»™å®šå¼•è„špinä¸Šçš„PWMå€¼ã€‚è¯¥å€¼å°†è¢«æ£€æŸ¥æ˜¯å¦åœ¨èŒƒå›´pwmRangeå†…\næœªé€šè¿‡softPwmCreateåˆå§‹åŒ–çš„ç®¡è„šå°†è¢«å¿½ç•¥\nåç»­è¿˜æœ‰ä¸€ä¸ªNoteï¼š\n\n\n\nPWMè¾“å‡ºçš„æ¯ä¸ªâ€œå‘¨æœŸâ€éœ€è¦10æ¯«ç§’ï¼Œé»˜è®¤èŒƒå›´å€¼ä¸º100ï¼Œå› æ­¤å°è¯•æ¯ç§’æ›´æ”¹PWMå€¼è¶…è¿‡100æ¬¡å°†æ˜¯å¾’åŠ³çš„\n\nåœ¨softPWMæ¨¡å¼ä¸‹æ¿€æ´»çš„æ¯ä¸ªå¼•è„šä½¿ç”¨å¤§çº¦0.5%çš„CPU\n\nç›®å‰æ— æ³•åœ¨ç¨‹åºè¿è¡Œæ—¶ç¦ç”¨å¼•è„šä¸Šçš„softPWM\n\næ‚¨éœ€è¦ä¿æŒç¨‹åºè¿è¡Œä»¥ä¿æŒPWMè¾“å‡ºï¼\n\n\n\n3.1å…³äºsoftPwmWriteçš„ä½¿ç”¨é—®é¢˜ï¼Œå¤§å¤§çš„ç–‘æƒ‘è¿™é‡Œæˆ‘äº§ç”Ÿäº†ä¸€ä¸ªå·¨å¤§çš„ç–‘æƒ‘ï¼Œå°±æ˜¯softPwmWriteå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ç©¶ç«Ÿåº”è¯¥å¦‚ä½•ä½¿ç”¨\n\nè¿™ä¸ªé—®é¢˜æˆ‘åœ¨CSDNçš„é—®ç­”åŒºæé—®äº†ï¼Œ22.04.01çš„17:00ç›®å‰è¿˜æ²¡æœ‰å›å¤ğŸ‘‰ç‚¹æˆ‘\n\nå¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ä½å¤§ä½¬çš„ç¨‹åºä¸­ï¼Œæ˜¯å°†ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®åˆ°è¶…è¿‡äº†100\n\nå¼•ç”¨è‡ªåšå®¢https://www.cnblogs.com/demo-lv/p/14017488.html\n\n\nè€Œå‚è€ƒèµ„æ–™ä¸­ï¼Œæä¾›çš„ä»£ç ä¹Ÿæ˜¯å°†pwmå€¼è®¾ç½®è¶…è¿‡äº†100\n\nåœ¨æŸ¥è¯¢è¿‡ä¸€äº›èµ„æ–™ï¼ˆæ˜¯çœŸçš„æ²¡æœ‰åšå®¢æåˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œæˆ‘æ‰¾åˆ°äº†RGBé¢œè‰²å¯¹ç…§è¡¨\nè¿™ä¸ªä»£ç ä¸­æä¾›çš„å‚æ•°è®¾ç½®ï¼Œå…¶å®æ˜¯å‚ç…§RGBè¡¨æ¥è®¾ç½®çš„\n\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¾¾åˆ°æ··è‰²çš„æ•ˆæœï¼Œä½ éœ€è¦åˆ©ç”¨softPwmWriteå‡½æ•°å°†çº¢ç»¿è“é’ˆè„šä¸RGBè¡¨ä¸­çš„æ•°å€¼å¯¹åº”è¿›è¡Œè¾“å‡ºã€‚\nä½†è¿™ä¸å°±å’Œå®˜æ–¹çš„pwmå€¼åº”è¯¥åœ¨èŒƒå›´å†…ï¼Œä¸”è¶…è¿‡100çš„pwmå€¼éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå†²çªäº†å—ï¼Ÿ\n\nè¿™ä¸ªé—®é¢˜å…ˆæš‚æ—¶æ”¾åœ¨è¿™é‡Œï¼Œè¹²ä¸€ä¸ªå¤§ä½¬è§£é‡Š\n\n4.ä»£ç æ ·ä¾‹4.1åˆå§‹åŒ–é’ˆè„š#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š#define makerobo_Led_PinBlue   2 // è“è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init()&#123;//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯rangeï¼Œå°†pwmè®¾ç½®æˆ100ï¼ˆå…¨å¼€ï¼‰\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);\tsoftPwmCreate(makerobo_Led_PinBlue, 0, 100);&#125;\n\nä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¦æŠŠçº¢ç»¿è“çš„ç®¡è„šè®¾ç½®æˆ0ã€1ã€2ï¼Œå®é™…ä¸Šè¿™é‡Œå’Œé¢åŒ…æ¿çš„æ¥çº¿æ˜¯å¯¹åº”çš„\n\nå¯ä»¥çœ‹åˆ°ï¼ŒGPIO 0/1/2åˆ†åˆ«å¯¹åº”çš„æ˜¯17/18/27ï¼ŒåŒæˆ‘ä»¬ç¬¬2ç‚¹ä¸­æ¥çº¿å›¾ä¸Šçš„é’ˆè„šä½ç½®å¯¹åº”\n\n4.2é¢œè‰²å‚æ•°è®¾ç½®åˆå§‹åŒ–é’ˆè„šä¹‹åï¼Œæˆ‘ä»¬å°±æ¥è®¾ç½®å„ä¸ªé’ˆè„šçš„å‚æ•°\n// LED é¢œè‰²è®¾ç½®void makerobo_led_Color_Set(uchar r_val, uchar g_val, uchar b_val)&#123;//å¯¹åº”ä¸åŒé¢œè‰²é’ˆè„šçš„è®¾ç½®ï¼Œå¦‚æœéœ€è¦çº¢è‰²ï¼Œå°±åªç»™çº¢è‰²r_valä¼ å¯¹åº”å€¼ //ç»™ä¸åŒé¢œè‰²è¾“å…¥ä¸åŒå€¼ï¼Œè¾¾æˆæ··è‰²çš„æ•ˆæœï¼\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);\tsoftPwmWrite(makerobo_Led_PinBlue,  b_val);&#125;//å‡½æ•°ä½¿ç”¨å¦‚ä¸‹makerobo_led_Color_Set(0xff,0x00,0x00);   //çº¢è‰²\tdelay(500);   //å»¶æ—¶500msï¼Œä½¿æ›´æ”¹ä¾¿äºè§‚å¯Ÿmakerobo_led_Color_Set(0x00,0xff,0x00);   //ç»¿è‰²delay(500);                makerobo_led_Color_Set(0x00,0x00,0xff);   //è“è‰²delay(500);\n\n4.3å®Œæ•´ä»£ç åŠæ•ˆæœæ¼”ç¤ºä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç ï¼Œä»¥åŠæœ€ç»ˆçš„æ•ˆæœã€\n#include &lt;wiringPi.h&gt;#include &lt;softPwm.h&gt;#include &lt;stdio.h&gt;#define uchar unsigned char#define makerobo_Led_PinRed    0 // çº¢è‰²LED ç®¡è„š#define makerobo_Led_PinGreen  1 // ç»¿è‰²LED ç®¡è„š#define makerobo_Led_PinBlue   2 // è“è‰²LED ç®¡è„š// LED åˆå§‹åŒ–void makerobo_led_Init()&#123;//ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯rangeï¼Œå°†pwmè®¾ç½®æˆ100ï¼ˆå…¨å¼€ï¼‰\tsoftPwmCreate(makerobo_Led_PinRed,  0, 100);\tsoftPwmCreate(makerobo_Led_PinGreen,0, 100);\tsoftPwmCreate(makerobo_Led_PinBlue, 0, 100);&#125;// LED é¢œè‰²è®¾ç½®void makerobo_led_Color_Set(uchar r_val, uchar g_val, uchar b_val)&#123;//å¯¹åº”ä¸åŒé¢œè‰²é’ˆè„šçš„è®¾ç½®ï¼Œå¦‚æœéœ€è¦çº¢è‰²ï¼Œå°±åªç»™çº¢è‰²r_valä¼ å¯¹åº”å€¼ //ç»™ä¸åŒé¢œè‰²è¾“å…¥ä¸åŒå€¼ï¼Œè¾¾æˆæ··è‰²çš„æ•ˆæœï¼\tsoftPwmWrite(makerobo_Led_PinRed,   r_val);\tsoftPwmWrite(makerobo_Led_PinGreen, g_val);\tsoftPwmWrite(makerobo_Led_PinBlue,  b_val);&#125;int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tmakerobo_led_Init();\t\tint n=0;\tprintf(&quot;è¯·è¾“å…¥å¾ªç¯å‘¨æœŸçš„æ¬¡æ•°&gt;&quot;);\tscanf(&quot;%d&quot;,&amp;n);//è¾“å…¥å¾ªç¯å‘¨æœŸçš„æ¬¡æ•°\twhile(n--)\t&#123;\t\tmakerobo_led_Color_Set(0xff,0x00,0x00);   //çº¢è‰²\t\t\tdelay(500);   //å»¶æ—¶500msï¼Œä½¿æ›´æ”¹ä¾¿äºè§‚å¯Ÿ\t\tmakerobo_led_Color_Set(0x00,0xff,0x00);   //ç»¿è‰²\t\tdelay(500);                   \t\tmakerobo_led_Color_Set(0x00,0x00,0xff);   //è“è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0xff,0xff,0x00);   //é»„è‰²\t\tdelay(500);                 \t\tmakerobo_led_Color_Set(0xff,0x00,0xff);   //ç²‰è‰²\t\tdelay(500);     \t\tmakerobo_led_Color_Set(0xff,0xff,0xff);   //ç™½è‰²\t\tdelay(500);       \t\tmakerobo_led_Color_Set(0x94,0x00,0xd3);   //ç´«è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0x76,0xee,0x00);   //åé»„è‰²\t\tdelay(500);\t\tmakerobo_led_Color_Set(0x00,0xc5,0xcd);\t  //æ·¡è“è‰²\t\tdelay(500);\t&#125;\t\t//æœ€åå¾ªç¯ç»“æŸæ—¶ï¼Œå…³é—­LEDï¼ˆå¦‚æœä¸è¿™ä¹ˆè®¾ç½®ï¼ŒLEDç¯ä¼šåœç•™åœ¨æœ€åä¸€ä¸ªé¢œè‰²ï¼‰\tmakerobo_led_Color_Set(0x00,0x00,0x00);\t//å‚æ•°éƒ½ä¸º0,ç›¸å½“äºå…³ç¯\tdelay(500);//å¦‚æœä¸å»¶æ—¶ï¼Œæ•ˆæœæ— æ³•å±•ç¤ºå‡ºæ¥\t\treturn 0;&#125;\n\nä½¿ç”¨æ ‘è“æ´¾Geanyç¼–è¯‘å™¨ï¼Œä¸‰æ¿æ–§ç‚¹èµ·æ¥\n\næœ€åçš„ç»“æœå¦‚ä¸‹å›¾~~RGBå°ç¯å˜è‰²å¾ªç¯æˆåŠŸï¼\n\n\n4.4 Linux-GCCç¼–è¯‘å™¨æŒ‡ä»¤Geanyå·²ç»å¯ä»¥å¾ˆå¥½åœ°æ‰§è¡Œæˆ‘ä»¬çš„ç¨‹åºäº†ï¼Œä½†å®ƒæœªå…æœ‰ç‚¹å¤ªeasyäº†ï¼Œç‚¹å‡ ä¸‹æŒ‰é’®å°±èƒ½æå®š\næˆ‘ä»¬æ¥è¯•è¯•éœ€è¦æ•²è¯­å¥çš„GCCç¼–è¯‘å™¨\né¦–å…ˆä¾æ—§æ˜¯ç”¨cdæ‰“å¼€æºæ–‡ä»¶çš„ç›®å½•\ncd æ‰“å¼€æºæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ls åˆ—å‡ºå½“å‰æ–‡ä»¶è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶\n\nä½¿ç”¨wiringPiåº“å’ŒsoftPWMåº“éœ€è¦åŠ ä¸Šä¸¤ä¸ªæŒ‡ä»¤\n\nwiringPiåº“å¯¹åº”ï¼š-lwiringPi\nsoftPWMåº“å¯¹åº”ï¼š-lpthread\n\nåœ¨linuxçš„gccä¸­ä½¿ç”¨delayå‡½æ•°éœ€è¦è°ƒç”¨å¦å¤–ä¸€ä¸ªå¤´æ–‡ä»¶&lt;unistd.h&gt;\ngcc -Wall 02rgbled.c -o TEST -lwiringPi -lpthread\n\nå¦‚æœæ²¡æœ‰æŠ¥é”™çš„è¯ï¼Œé‚£å°±æ˜¯ç¼–è¯‘æˆåŠŸäº†ï¼Œå†æ¬¡lså¯ä»¥çœ‹åˆ°å¤šå‡ºæ¥äº†ä¸€ä¸ªTESTå¯æ‰§è¡Œæ–‡ä»¶\n\n./TEST æ‰§è¡ŒTESTæ–‡ä»¶\n\nå¯ä»¥çœ‹åˆ°ç¨‹åºæ­£å¸¸è¿è¡Œäº†ï¼\n\n\nç»“è¯­ç¬¬äºŒä¸ªæ ‘è“æ´¾å®éªŒä¹Ÿåšå®Œå•¦ï¼\nè™½ç„¶è¿˜æœ‰é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªå¤§å¤§çš„ğŸ‘ï¼æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥è¯„è®ºåŒºæå‡ºæ¥å“¦\n\né€šå¾€å¤§ä½¬çš„è·¯éå¸¸æ¼«é•¿â€¦â€¦\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ00-é…ç½®ä½ çš„æ ‘è“æ´¾","url":"/posts/4174630598/","content":"\n\nå‰è¨€ä¸ºäº†å®Œå–„æœ¬ä¸“æ çš„å†…å®¹ï¼Œè¿™æ¬¡æˆ‘æŠŠæ ‘è“æ´¾çš„åˆå§‹åŒ–é…ç½®ä¹Ÿç»™å¤§å®¶åŠ ä¸Šã€‚\nå¹²è´§æ»¡æ»¡ï¼Œè·Ÿç€æˆ‘ä¸€æ­¥ä¸€æ­¥é…ç½®ï¼Œä»æ— åˆ°æœ‰ç©è½¬æ ‘è“æ´¾ï¼ğŸ˜‹\n\nå½“ç„¶å‰ææ˜¯ä½ è¦æœ‰ä¸€ä¸ªæ ‘è“æ´¾ï¼Œ2022å¹´çš„æ ‘è“æ´¾ä»·æ ¼å¯å¤ªé­”å¹»äº†ï¼Œæ¶¨ä»·1å€ï¼Œå ªæ¯”æ˜¾å¡å¸‚åœºâ€¦â€¦\n\nä¸æ‰¯è¿™äº›æ²¡ç”¨çš„äº†ï¼Œæœ¬ç¯‡åšå®¢ï¼Œå¸¦ä½ èµ°å…¥æ ‘è“æ´¾è¿™æ¬¾å°ç”µè„‘çš„ä¸–ç•Œï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.ä»€ä¹ˆæ˜¯æ ‘è“æ´¾ï¼ŸRaspberry Pi(ä¸­æ–‡åä¸ºâ€œæ ‘è“æ´¾â€,ç®€å†™ä¸ºRPiï¼Œæˆ–è€…RasPi &#x2F; RPI\nå®ƒä¸ºå­¦ä¹ è®¡ç®—æœºç¼–ç¨‹æ•™è‚²è€Œè®¾è®¡ï¼Œæ˜¯ä¸€ä¸ªåªæœ‰ä¿¡ç”¨å¡å¤§å°çš„å¾®å‹ç”µè„‘ï¼Œå…¶ç³»ç»ŸåŸºäºLinuxã€‚ è‡ªé—®ä¸–ä»¥æ¥ï¼Œå—ä¼—å¤šè®¡ç®—æœºå‘çƒ§å‹å’Œåˆ›å®¢çš„è¿½æ§ï¼Œæ›¾ç»ä¸€â€œæ´¾â€éš¾æ±‚ã€‚åˆ«çœ‹å…¶å¤–è¡¨â€œå¨‡å°â€ï¼Œå†…â€œèŠ¯â€å´å¾ˆå¼ºå¤§ï¼Œè§†é¢‘ã€éŸ³é¢‘ç­‰åŠŸèƒ½é€šé€šçš†æœ‰ï¼Œå¯è°“æ˜¯â€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ã€‚\n\nå®ƒæ˜¯ä¸€æ¬¾åŸºäºARMçš„å¾®å‹ç”µè„‘ä¸»æ¿ï¼Œä»¥SD&#x2F;MicroSDå¡ä¸ºå†…å­˜ç¡¬ç›˜ï¼Œå¡ç‰‡ä¸»æ¿å‘¨å›´æœ‰1&#x2F;2&#x2F;4ä¸ªUSBæ¥å£å’Œä¸€ä¸ª10&#x2F;100 ä»¥å¤ªç½‘æ¥å£ï¼ˆAå‹æ²¡æœ‰ç½‘å£ï¼‰ï¼Œå¯è¿æ¥é”®ç›˜ã€é¼ æ ‡å’Œç½‘çº¿ï¼ŒåŒæ—¶æ‹¥æœ‰è§†é¢‘æ¨¡æ‹Ÿä¿¡å·çš„ç”µè§†è¾“å‡ºæ¥å£å’ŒHDMIé«˜æ¸…è§†é¢‘è¾“å‡ºæ¥å£ï¼Œä»¥ä¸Šéƒ¨ä»¶å…¨éƒ¨æ•´åˆåœ¨ä¸€å¼ ä»…æ¯”ä¿¡ç”¨å¡ç¨å¤§çš„ä¸»æ¿ä¸Šï¼Œå…·å¤‡æ‰€æœ‰PCçš„åŸºæœ¬åŠŸèƒ½åªéœ€æ¥é€šç”µè§†æœºå’Œé”®ç›˜ï¼Œå°±èƒ½æ‰§è¡Œå¦‚ç”µå­è¡¨æ ¼ã€æ–‡å­—å¤„ç†ã€ç©æ¸¸æˆã€æ’­æ”¾é«˜æ¸…è§†é¢‘ç­‰è¯¸å¤šåŠŸèƒ½ã€‚\n Raspberry Pi Bæ¬¾åªæä¾›ç”µè„‘æ¿ï¼Œæ— å†…å­˜ã€ç”µæºã€é”®ç›˜ã€æœºç®±æˆ–è¿çº¿ã€‚\n\nè¿™ç§å†å²å•¥çš„å°±ä¸è¯´å¤ªå¤šå•¦ï¼Œæƒ³å¿…å¤§å®¶éƒ½æ‡’å¾—çœ‹è¿™ç§ä¸œè¥¿ğŸ˜‚\n\n1.1ä»€ä¹ˆç”¨æˆ·é€‚åˆè´­ä¹°æ ‘è“æ´¾å­¦ä¹ ç¼–ç¨‹ï¼Ÿ\nåœ¨æ·˜å®æœç´¢æ ‘è“æ´¾ï¼Œä½ ä¼šå‘ç°ç»å¤§éƒ¨åˆ†å•†å®¶éƒ½æŒ‚ç€â€œ0åŸºç¡€å­¦ä¹ çš„â€å¹Œå­ï¼Œå¤§è‚†å®£ä¼ ã€‚è€Œä¸”å®£ä¼ é›†ä¸­äºæœ€è¿‘æŒºç«çš„pythonè¯­è¨€ï¼Œå¯¹Cå’ŒC++åªæ˜¯æä¸€å˜´ã€‚\n\nä½œä¸ºC&#x2F;C++æ–¹å‘çš„ç¼–ç¨‹å­¦ä¹ è€…ï¼Œæˆ‘ä¸ªäººå»ºè®®ï¼Œè´­ä¹°æ ‘è“æ´¾ä¹‹å‰ï¼Œéœ€è¦å…ˆå­¦ä¹ å®Œåˆé˜¶çš„Cè¯­è¨€ã€‚å¦‚ä½•é‡åŒ–å‘¢ï¼Œå¤§æ¦‚å°±æ˜¯è¦æŠŠç›®å‰bç«™æœ€ç«çš„è¿™ä¸ªCè¯­è¨€è§†é¢‘çœ‹åˆ°P24ğŸ‘‰ ä¼ é€é—¨\n\nå¦‚æœä½ å’Œæˆ‘ä¸€æ ·è´­ä¹°çš„æ˜¯å¸¦å„ç±»ç”µå­å…ƒä»¶çš„å¥—ä»¶ã€‚åœ¨æ ‘è“æ´¾åŸºç¡€å®éªŒä¸­ï¼Œä¸»è¦åˆ©ç”¨çš„æ˜¯wiringPiåº“ï¼Œè¿™ä¸ªåº“å’ŒCè¯­è¨€è‡ªå·±çš„æ¡†æ¶å…¶å®æ˜¯æ²¡å•¥å…³ç³»çš„ï¼Œå³ä¾¿ä½ æŠŠè¿™ä¸ªåº“å…¨å­¦å®Œäº†ï¼Œä¹Ÿä¸ä¸€å®šèƒ½ç²¾é€šCè¯­è¨€ã€‚ç›¸åï¼Œå¦‚æœCè¯­è¨€ä»€ä¹ˆéƒ½ä¸ä¼šçš„è¯ï¼Œè‚¯å®šä¹Ÿæ•´ä¸æ˜ç™½è¿™ä¸ªåº“é‡Œé¢çš„å‡½æ•°æ˜¯æ€ä¹ˆç”¨çš„ã€‚\n\nè¯´çš„å¯èƒ½æœ‰ç‚¹ç»å¯¹ï¼Œæˆ‘çš„æ„æ€ä¸»è¦æ˜¯ï¼šå¦‚æœä½ ä¹‹å‰æ²¡æœ‰å­¦è¿‡ç¼–ç¨‹ï¼Œå¾—å…ˆæŠŠæŸä¸€ä¸ªè¯­è¨€å­¦å®Œäº†ï¼Œå†æ¥è°ˆè´­ä¹°æ ‘è“æ´¾è¿›è¡Œè¿›é˜¶å­¦ä¹ çš„äº‹\n\nPythonåŒç†ï¼Œè‚¯å®šè¦æŠŠåŸºç¡€çš„è¯­æ³•ä»€ä¹ˆéƒ½å­¦ä¼šäº†ï¼Œå†è€ƒè™‘è´­ä¹°æ ‘è“æ´¾è¿›è¡Œè¿›ä¸€æ­¥çš„å­¦ä¹ ã€‚\nå•†å®¶ç©çš„å¤šåŠä¹Ÿæ˜¯æ–‡å­—æ¸¸æˆï¼Œâ€œé›¶åŸºç¡€å­¦ä¹ â€ä»£è¡¨ä½ å¯ä»¥é›¶åŸºç¡€ä¸Šæ‰‹æ ‘è“æ´¾ï¼Œè€Œä¸èƒ½åˆ©ç”¨æ ‘è“æ´¾ä»0å¼€å§‹å­¦ä¹ ç¼–ç¨‹ï¼Œè¿™æ˜¯å¾ˆéš¾çš„ã€‚\n\n2.å¦‚ä½•åˆå§‹åŒ–ä¸€ä¸ªæ ‘è“æ´¾é¦–å…ˆå‡†å¤‡å¥½å’±ä»¬éœ€è¦çš„ä¸œè¥¿\n\næ ‘è“æ´¾å¼€å‘æ¿\n5V3Aç”µæº\nmicroSDå¡ï¼ˆ16Gèµ·æ­¥ï¼Œå»ºè®®32GBï¼‰\nä¸€å°èƒ½ä¸Šç½‘çš„windowsç”µè„‘\n\nç„¶åï¼Œæˆ‘ä»¬è¦ä¸‹å¥½ä¸‹é¢çš„ä¸€äº›è½¯ä»¶\n\nPutty (SSHè¿œç¨‹è¿æ¥å·¥å…·)\nAdvanced_IP_Scanner ï¼ˆå±€åŸŸç½‘ipæŸ¥æ‰¾å·¥å…·ï¼‰\nbalenaEtcherï¼ˆé•œåƒçƒ§å½•å·¥å…·ï¼‰\nFileZillaï¼ˆæ–‡ä»¶ä¼ è¾“å·¥å…·ï¼‰\nVNC-Viewerï¼ˆè¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼‰\nnotepad++ï¼ˆç¼–è¾‘æ–‡æœ¬ï¼‰\n\næ ‘è“æ´¾çš„ç³»ç»Ÿå¯ä»¥å»å®˜æ–¹ä¸‹è½½ğŸ‘‰å®˜æ–¹ä¸‹è½½ç«™\nä½†æ˜¯å®˜æ–¹ä¸‹è½½ä¸‹æ¥çš„ç³»ç»Ÿéå¸¸çº¯å‡€ï¼Œå‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½è¦æˆ‘ä»¬è‡ªå·±å®‰è£…ï¼ŒåŒ…æ‹¬ä¸­æ–‡è¾“å…¥æ³•ï¼Œç¼–è¯‘å™¨ï¼Œä»¥åŠå„ç±»éœ€è¦ç”¨åˆ°çš„è½¯ä»¶\n\nä¸ºæ–¹ä¾¿å¤§å®¶çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘æ•´ç†äº†ä¸€äº›è¦ç”¨åˆ°çš„è½¯ä»¶ï¼Œä»¥åŠä¸€ä¸ªå·²ç»æ­å»ºå¥½åŸºæœ¬ç¯å¢ƒçš„æ ‘è“æ´¾ç³»ç»Ÿï¼Œå¤§å®¶ç›´æ¥ä¸‹è½½æˆ‘è¿™é‡Œçš„é›†åˆåŒ…å°±è¡Œäº†ï¼æŸåº¦äº‘\n\nå¦‚æœä½ æƒ³ä»0å¼€å§‹é…ç½®ä¸€ä¸ªæ ‘è“æ´¾ç³»ç»Ÿï¼Œå¯ä»¥çœ‹è¿™ä¸ªä¸“æ å­¦ä¹ ğŸ‘‰ä¼ é€é—¨\n\n\n2.1 çƒ§å½•ç³»ç»Ÿé¦–å…ˆå°†SDå¡æ’å…¥windowsç”µè„‘ï¼Œå³é”®ï¼Œæ ¼å¼åŒ–å®ƒ\n\nå¾ˆå¤šåšä¸»è¿™é‡Œéƒ½è¯´è¦ç”¨ç‰¹åˆ«çš„æ ¼å¼åŒ–è½¯ä»¶ï¼Œå®é™…ä¸Šå¤§å¯ä¸å¿…ï¼Œç›´æ¥ç”¨winè‡ªå¸¦çš„æ ¼å¼åŒ–å°±è¡Œäº†\n\nç„¶åæ‰“å¼€balenaEtcherï¼Œé€‰æ‹©æ ‘è“æ´¾ç³»ç»Ÿé•œåƒæ–‡ä»¶.imgï¼Œç„¶åå†é€‰æ‹©ä½ çš„sdå¡\n\n\nç„¶åè¿™ä¸ªè½¯ä»¶å°±ä¼šè‡ªåŠ¨å¼€å§‹flashä½ çš„ç³»ç»Ÿï¼Œä½ è¦åšçš„å°±æ˜¯ç­‰å®ƒè‡ªå·±æå®šï¼Œè¿™æœŸé—´ä¸è¦æ’æ‹”SDå¡\n\n\næå®šä»¥åï¼Œä½ çš„SDå¡ä¼šå˜æˆä¸€ä¸ªåªæœ‰256mbçš„bootå¯åŠ¨ç›˜ï¼Œä¸è¦æ‹…å¿ƒï¼Œè¿™æ˜¯æ ‘è“æ´¾çš„ç³»ç»Ÿå·²ç»å°†å¦å¤–ä¸€éƒ¨åˆ†ç£ç›˜ç»™è‡ªå·±äº†\n\nå³é”®æˆ‘çš„ç”µè„‘-ç®¡ç†-ç£ç›˜ç®¡ç†ï¼Œå³å¯çœ‹åˆ°æ¶ˆå¤±çš„é‚£éƒ¨åˆ†å®¹é‡\n\nwin10å¯èƒ½ä¼šæç¤ºä½ ä½¿ç”¨å‰è¦å…ˆæ ¼å¼åŒ–ç£ç›˜Gï¼Œä¸€å®šä¸è¦æ ¼å¼åŒ–ï¼ï¼ï¼ä¸ç„¶ä½ çš„ç³»ç»Ÿå°±å¯„äº†\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é…ç½®æˆ‘ä»¬çš„æ ‘è“æ´¾äº†\n2.2 æµ‹è¯•å¼€æœºå°†sdå¡æ’å…¥æ ‘è“æ´¾ï¼ˆæ³¨æ„æ–¹å‘ï¼‰ï¼Œæ¥é€šç”µæºï¼Œå¦‚æœæ ‘è“æ´¾çš„çº¢ç¯å¸¸äº®ï¼Œç»¿ç¯é—ªçƒçš„è¯ï¼Œé‚£å°±æ˜¯ç³»ç»Ÿæ­£åœ¨è¿è¡Œäº†ã€‚è¿™æ—¶å€™å…ˆæ–­å¼€ç”µæºï¼Œè¿›è¡Œåé¢çš„æ“ä½œ\n\n2.3 è®¾ç½®æ ‘è“æ´¾æ˜¾ç¤ºè¾“å‡ºçš„åˆ†è¾¨ç‡ä¸ç®¡ä½ æ˜¯ç›´æ¥è®©æ ‘è“æ´¾æ¥æ˜¾ç¤ºå™¨ï¼Œè¿˜æ˜¯ç”¨VNCæ¥è¿œç¨‹é“¾æ¥æ ‘è“æ´¾ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡æ›´æ”¹configæ–‡ä»¶æ¥è®¾ç½®æ ‘è“æ´¾çš„åˆ†è¾¨ç‡\n\næ»‘å€’æœ€åº•éƒ¨ï¼Œæ‰¾åˆ°hdmi_vctï¼Œå®ƒåé¢ç´§è·Ÿç€çš„3ä¸ªå‚æ•°åˆ†åˆ«æ˜¯åˆ†è¾¨ç‡çš„é•¿å®½ï¼Œä»¥åŠè¾“å‡ºçš„åˆ·æ–°ç‡\n\nä¸ºäº†å‡å°æ ‘è“æ´¾çš„è¿ç®—è´Ÿæ‹…ï¼Œæˆ‘æŠŠåˆ†è¾¨ç‡è®¾ç½®çš„æ¯”æ ‡å‡†1080pï¼ˆ1920x1080ï¼‰ä½äº†ä¸€ç‚¹ã€‚å®é™…ä¸Šæ ‘è“æ´¾æ˜¯æ”¯æŒ4k60è¾“å‡ºçš„ã€‚\nå¦‚æœä½ ä½¿ç”¨hdmiç›´æ¥æ¥æ˜¾ç¤ºå™¨ï¼Œè¯·æ ¹æ®ä½ çš„æ˜¾ç¤ºå™¨å‚æ•°æ¥è®¾ç½®æ ‘è“æ´¾çš„è¾“å‡ºï¼Œä»¥é˜²æ¥ä¸Šåæ— ç”»é¢è¾“å‡ºçš„æƒ…å†µ\n\nå…¶å®å“ªæ€•æœ‰æ˜¾ç¤ºå™¨ä¹Ÿå»ºè®®ä½ ç›´æ¥ä½¿ç”¨VNCï¼Œæ¯æ¬¡éƒ½è¿çº¿å¤ªéº»çƒ¦äº†\nVNCçš„ä½¿ç”¨åé¢ä¼šè®²åˆ°\n\n\n2.4 ç½‘ç»œé“¾æ¥å¦‚æœä½ æœ‰ç½‘çº¿ï¼Œç›´æ¥å°†æ ‘è“æ´¾ç”¨ç½‘çº¿æ¥å…¥ç½‘ç»œå³å¯ã€‚è¿™é‡Œä»‹ç»æ²¡æœ‰ç½‘çº¿çš„æ–¹æ³•ï¼Œå³ å°†æ ‘è“æ´¾æ¥å…¥wifiã€‚\næˆ‘åˆ†äº«çš„é…ç½®æ–‡ä»¶é‡Œé¢ï¼Œæœ‰è¿™ä¸¤ä¸ªWiFié…ç½®æ–‡ä»¶\n\nä½¿ç”¨notepad++æ‰“å¼€wpa_supplicant.confæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„è¿™äº›ä¸œè¥¿ã€‚ä¾ç…§å›¾ä¸­çš„æ³¨é‡Šå¡«å†™wifiä¿¡æ¯å³å¯ï¼wifiåå­—å’Œå¯†ç ä¸è¦è®¾ç½®æˆä¸­æ–‡çš„\n\nå¦‚æœä½ æœ‰å¤šä¸ªwifiï¼Œå¯ä»¥åœ¨åŸæœ‰networkä¹‹åç»§ç»­æ·»åŠ networkï¼Œå¡«å†™æ–¹æ³•æ˜¯ä¸€æ ·çš„\ncountry=CNctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123;\tssid=&quot;zhulin&quot;\tpsk=&quot;12345678&quot;\tpriority=5&#125;network=&#123;\tssid=&quot;zadf&quot;\tpsk=&quot;12345678&quot;\tpriority=3&#125;\n\næå®šäº†ä¹‹åï¼Œå°†è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ”¾å…¥æ ‘è“æ´¾çš„bootç›˜\næ³¨æ„ï¼šæ ‘è“æ´¾å¼€æœºåè¿™ä¸¤ä¸ªæ–‡ä»¶ä¼šæ¶ˆå¤±ï¼Œå¦‚æœéœ€è¦æ›´æ”¹wifié…ç½®ï¼Œå†™å¥½æ–°çš„æ–‡ä»¶æ”¾å…¥bootç›˜å³å¯\n\n\nå¦‚æœæ˜¯ä½ å®¶é‡Œçš„wifiï¼Œå¯ä»¥åœ¨wifiçš„ç®¡ç†åå°ï¼ˆä¸€èˆ¬æ¯”è¾ƒæ–°çš„wifiéƒ½æœ‰è‡ªå·±çš„appå¯ä»¥ç®¡ç†ï¼Œæ—§çš„WiFiä¹Ÿæœ‰ç½‘é¡µç«¯ç®¡ç†é¡µé¢ï¼‰æ‰¾åˆ°æ ‘è“æ´¾çš„ip\nå¦‚æœæ˜¯ç¬”è®°æœ¬&#x2F;æ‰‹æœºå¼€çš„çƒ­ç‚¹ï¼Œå¯ä»¥ç›´æ¥åœ¨çƒ­ç‚¹ç®¡ç†é‡Œé¢çœ‹åˆ°å·²è¿æ¥è®¾å¤‡çš„ipã€‚å¦‚æœæ˜¯æ‰‹æœºå¼€çƒ­ç‚¹çš„è¯ï¼Œéœ€è¦å°†ç”µè„‘ä¹Ÿæ¥å…¥åŒä¸€çƒ­ç‚¹ã€‚\næ ¡å›­ç½‘ä¸ç®—å±€åŸŸç½‘ï¼Œå»ºè®®å¼€çƒ­ç‚¹è¿›è¡Œæ“ä½œ\n\nå¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆæ‰¾æ ‘è“æ´¾çš„ipï¼Œç›´æ¥ä½¿ç”¨ä¹‹å‰æåˆ°çš„ipæ‰«æè½¯ä»¶Advanced_IP_Scannerå°±å¯ä»¥äº†ï¼\n\nè®°ä¸‹æ ‘è“æ´¾çš„ipï¼Œåç»­æ‰€æœ‰æ“ä½œéƒ½è¦é€šè¿‡å®ƒæ¥å®ç°\næ³¨æ„ï¼šå³ä¾¿æ˜¯è¿åŒä¸€ä¸ªWiFiï¼Œæ ‘è“æ´¾çš„ipä¹Ÿä¸æ˜¯ä¸€ç›´ä¸å˜çš„ï¼Œå¦‚æœåœ¨æŸæ¬¡ä½¿ç”¨æ—¶å‡ºç°æ— æ³•é“¾æ¥çš„æƒ…å†µï¼Œè¯·æ£€æŸ¥ipæ˜¯å¦å·²ç»æ”¹å˜äº†\n\n2.5 Puttyé“¾æ¥æ ‘è“æ´¾æ¯”èµ·windowsç”µè„‘çš„å›¾å½¢æ¡Œé¢ï¼Œæ ‘è“æ´¾æ˜¯ä¸€ä¸ªlinuxå°ä¸»æœºï¼Œä½¿ç”¨linuxçš„æ—¶å€™æˆ‘ä»¬æ›´åº”è¯¥å­¦ä¹ linuxå‘½ä»¤è¡Œçš„ä½¿ç”¨ï¼Œè€Œä¸è¿‡åº¦ä¾èµ–äºæ ‘è“æ´¾ç³»ç»Ÿæœ¬èº«\nputtyçš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥è¾“å…¥æ ‘è“æ´¾çš„ipå³å¯ï¼Œé»˜è®¤çš„ç«¯å£éƒ½æ˜¯22ï¼Œæ— éœ€æ›´æ”¹\n\nåœ¨å¼¹å‡ºæ¥çš„ç•Œé¢è¾“å…¥ç”¨æˆ·åpiï¼Œè¾“å…¥å¯†ç çš„æ—¶å€™è¦ç›²æ‰“ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºä½ è¾“å…¥äº†å•¥\n\nå½“è¾“å…¥å®Œå¯†ç åï¼Œä¼šå¼¹å‡ºä¸‹é¢çš„ç•Œé¢ï¼Œè¿™å°±ä»£è¡¨ä½ çš„æ ‘è“æ´¾å·²ç»é“¾æ¥ä¸Šäº†\n\nè¾“å…¥sudo raspi-configå¯ä»¥è¿›å…¥æ ‘è“æ´¾çš„ç³»ç»Ÿè®¾ç½®ï¼Œæˆ‘ä»¬éœ€è¦å°†VNCçš„æœåŠ¡å¼€å¯ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨VNCè¿œç¨‹é“¾æ¥æ ‘è“æ´¾çš„æ¡Œé¢\n\nç”¨æ–¹å‘é”®é€‰æ‹©5 Interfacing Optionsï¼Œæ‰¾åˆ°VNCæœåŠ¡ï¼Œå›è½¦é€‰æ‹©å®ƒï¼Œä¼šæç¤ºä½ æ˜¯å¦å¼€å¯ï¼ˆenableï¼‰VNCæœåŠ¡ï¼Œæˆ‘ä»¬é€‰æ‹©æ˜¯å°±å¯ä»¥äº†\n\né€‰æ‹©å®Œæ¯•åå›åˆ°åˆå§‹èœå•ï¼Œè¦é€‰æ‹©ä¸‹é¢çš„finishä½¿å¾—è®¾ç½®ç”Ÿæ•ˆ\næ“ä½œæ–¹æ³•æ˜¯æ¥åˆ°P8åæŒ‰æ–¹å‘é”®çš„å·¦å³ï¼Œæ‰èƒ½é€‰æ‹©åº•éƒ¨çš„Selectå’ŒFinish\néšåè¾“å…¥sudo rebooté‡å¯æ ‘è“æ´¾ï¼Œä½¿å¾—è®¾ç½®ç”Ÿæ•ˆã€‚\nåˆ°è¿™é‡Œï¼Œputtyçš„åˆå§‹åŒ–è®¾ç½®å°±å®Œæˆäº†\n\n2.6 VNCé“¾æ¥æ ‘è“æ´¾å› ä¸ºæˆ‘çš„æ ‘è“æ´¾çƒ§å½•çš„æ˜¯æå‰æ­å»ºå¥½åŸºæœ¬ç¯å¢ƒçš„ç³»ç»Ÿï¼Œæ‰€ä»¥è¿™é‡Œé¢æˆ‘ä»¬ç›´æ¥ç”¨VNCvieweræ¥è¿œç¨‹é“¾æ¥æ ‘è“æ´¾çš„æ¡Œé¢\næ“ä½œå¾ˆç®€å•ï¼Œè¾“å…¥æ ‘è“æ´¾çš„ip\n\nç„¶ååœ¨å¼¹å‡ºçš„ç•Œé¢ä¸Šè¾“å…¥é»˜è®¤ç”¨æˆ·åpiå’Œå¯†ç raspberryå³å¯\n\nç°åœ¨ä½ çœ‹åˆ°çš„å°±æ˜¯æ ‘è“æ´¾çš„æ¡Œé¢å•¦ï¼Œæ˜¯ä¸æ˜¯å’Œä¸€ä¸ªæ™®é€šçš„windowsç”µè„‘å·®ä¸äº†å¤ªå¤šå‘¢ï¼Ÿ\n\nå³é”®æ¡Œé¢å¯ä»¥æ›´æ”¹å£çº¸\n\n\nè¿™é‡Œçš„æ“ä½œå’Œä½¿ç”¨ä¸€å°ç”µè„‘æ²¡å•¥åŒºåˆ«ï¼Œå°±ç•™ç»™å¤§å®¶è‡ªå·±å°è¯•å•¦ï¼\n\n2.7 ä½¿ç”¨filezillaè½¯ä»¶ä¼ è¾“æ–‡ä»¶åˆ°æ ‘è“æ´¾å®‰è£…filezillaè½¯ä»¶ï¼Œå®ƒå¯ä»¥é€šè¿‡wifiåœ¨æˆ‘ä»¬çš„windowsç”µè„‘å’Œæ ‘è“æ´¾ä¹‹é—´ä¼ è¾“æ–‡ä»¶\n\né“¾æ¥æ ‘è“æ´¾åï¼Œè¿™é‡Œå‡ºç°äº†ä¸¤ä¸ªç•Œé¢ï¼Œå…¶ä¸­å·¦è¾¹æ˜¯æˆ‘ä»¬ç”µè„‘é‡Œé¢çš„æ–‡ä»¶ï¼Œå³è¾¹æ˜¯æ ‘è“æ´¾é‡Œé¢çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œæ‹–åŠ¨æ“ä½œå³å¯\nä¼ è¾“å®Œæ¯•åï¼Œfilezillaä¼šå¼¹å‡ºç³»ç»Ÿé€šçŸ¥\n\næ³¨æ„ï¼šè¿™é‡Œæ–°å»ºæ–‡ä»¶å¤¹çš„æ“ä½œå«â€œåˆ›å»ºç›®å½•â€\n\n\næ­å–œä½ ï¼Œä½ çš„æ ‘è“æ´¾å·²ç»åˆå§‹åŒ–å®Œæ¯•å•¦ï¼å¯ä»¥æ„‰å¿«çš„ç”¨å®ƒå­¦ä¹ ä»£ç äº†ï¼\nä¸è¿‡åˆ«æ€¥ç€å…³é—­æœ¬ç¯‡åšå®¢ï¼Œåé¢è¿˜æœ‰ä¸œè¥¿å‘¢ï¼\n\n3.ä½¿ç”¨Xshellå°†æ ‘è“æ´¾ä½œä¸ºlinuxä¸»æœºæœ‰è¿™ä¹ˆä¸€ä¸ªè½¯ä»¶ï¼Œå®ƒé›†æˆäº†puttyå’Œfilezillaçš„åŠŸèƒ½ï¼Œç•Œé¢æ›´å¥½çœ‹ï¼Œä½¿ç”¨ä¹Ÿæ›´æ–¹ä¾¿\næ²¡é”™ï¼Œä»–å°±æ˜¯Xshellï¼\n\nå®ƒåŒæ ·å¯ä»¥ä½¿ç”¨sudo raspi-configè¿›å…¥æ ‘è“æ´¾çš„ç³»ç»Ÿè®¾ç½®ï¼ŒåŒæ—¶å€ŸåŠ©è¯¥å…¬å¸çš„Xftpè½¯ä»¶ï¼Œå®ƒä¹Ÿèƒ½å®ç°ä¸€æ ·çš„ä¼ è¾“æ–‡ä»¶åŠŸèƒ½ï¼\n\n\nä»Šå¤©åˆšä¸‹è½½Xshellè½¯ä»¶ï¼Œå½“æˆ‘æŠŠå®ƒè¿ä¸Šæ ‘è“æ´¾çš„æ—¶å€™ï¼Œæ„Ÿè§‰è‡ªå·±ä»æœ¬ä¸–çºªåˆç©¿è¶Šåˆ°äº†2022å¹´ã€‚è¿™ç•Œé¢ï¼Œç»ˆäºä¸å†æ˜¯é‚£ä¸ªå¤æ—©çš„æ¨¡æ ·äº†ï¼Œå¤ªæ„ŸåŠ¨äº†ï¼\n\n3.1ä¸‹è½½Xshellç‚¹è¿›å®˜ç½‘çš„ä¸‹è½½ç•Œé¢ï¼Œä¸€çœ‹ï¼Œæˆ‘å»ï¼Œåªæœ‰30å¤©è¯•ç”¨ï¼Œç©çƒå•Šï¼\nè¦æ˜¯è¿™ä¹ˆæƒ³ï¼Œä½ å°±å¤ªå¹´è½»äº†\nè®©æˆ‘ä»¬æ¥åº·åº·å³ä¸‹è§’è¿™é‡Œå†™ç€å•¥ï¼Œâ€œå…è´¹æˆæƒâ€ï¼\n\nåªè¦ä½ å¡«å†™ä½ çš„å§“åå’Œé‚®ç®±å·ï¼Œå®˜æ–¹å°±ä¼šæŠŠè¿™ä¸¤ä¸ªè½¯ä»¶çš„ä¸‹è½½é“¾æ¥å‘åˆ°ä½ çš„é‚®ç®±ã€‚\n\nä¸ªäººç”¨æˆ·ï¼ˆéå•†ç”¨ï¼‰çš„è¯ï¼Œè¿™ä¸¤ä¸ªè½¯ä»¶éƒ½æ˜¯å…è´¹çš„ï¼\n\nå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯åœ¨ä½ å…³é—­é¡µé¢çš„æ—¶å€™ï¼Œå®ƒä¼šå¼¹å‡ºæ¥è¿™æ ·ä¸€ä¸ªé¡µé¢ï¼Œä¸è¿‡è¿™ä¹Ÿä¸å½±å“å•¦ï¼\n\n3.2é“¾æ¥æ ‘è“æ´¾å®‰è£…çš„æ­¥éª¤ç›´æ¥æ— è„‘ä¸‹ä¸€æ­¥\næ‰“å¼€Xshellï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¿˜æ²¡æœ‰è®¾ç½®è¿‡æœåŠ¡å™¨ï¼Œæ‰€ä»¥æ˜¯ç©º\n\nç‚¹å‡»æ–°å»ºï¼Œè¿›å…¥è®¾ç½®æœåŠ¡å™¨çš„ç•Œé¢ï¼Œå†™å…¥ä½ çš„æ ‘è“æ´¾IPï¼Œå¹¶ç»™è¿™ä¸ªä¼šè¯èµ·ä¸ªå\n\nç‚¹å‡»é“¾æ¥ï¼Œä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥ä½ çš„æ ‘è“æ´¾ç”¨æˆ·åå’Œå¯†ç ï¼Œå’Œä¹‹å‰ä¸€æ ·æ“ä½œå°±è¡Œ\n\n\nç„¶åï¼Œä»–å°±å»ºç«‹é“¾æ¥å•¦ï¼\n\n3.3ç¼–ç è®¾ç½®ç‚¹å‡»è¿™é‡Œçš„å±æ€§\n\né€‰æ‹©ç»ˆç«¯ï¼Œæ‰¾åˆ°å³ä¸‹è§’çš„ç¼–ç ï¼Œç¡®è®¤å®ƒæ˜¯UTF-8çš„çŠ¶æ€ï¼Œä¸ç„¶ä¸­æ–‡ä¼šä¹±ç \n\n3.4æ‰“å¼€Xftpç‚¹å‡»ä¸Šé¢è¿™ä¸ªç»¿è‰²çš„æ–‡ä»¶å¤¹å°±ä¼šæ‰“å¼€Xftpï¼Œå¿«æ·é”®æ˜¯CTRL+ALT+F\n\nåç»­çš„æ“ä½œä¹Ÿæ˜¯ç›´æ¥æ‹–åŠ¨æ–‡ä»¶ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„~~\n\n4.æ ‘è“æ´¾è¿æ¥é¢åŒ…æ¿æ ‘è“æ´¾ä¸Šæœ‰40ä¸ªIOå£ï¼Œä¸ºäº†æ–¹ä¾¿å®éªŒï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨ä¸€ä¸ªè½¬æ¥æ¿æŠŠæ ‘è“æ´¾çš„IOä¿¡å·è½¬æ¥å‡ºæ¥ï¼Œä½¿ç”¨é¢åŒ…æ¿è¿›è¡ŒGPIOå¤–æ¥ã€‚æˆ‘ä»¬éœ€è¦ä»¥ä¸‹3ä¸ªéƒ¨ä»¶ï¼š\n\n40pè½¯æ’çº¿\nTå‹è½¬æ¥æ¿\né¢åŒ…æ¿\n\n\nå®‰è£…40pè½¯æ’çº¿çš„æ—¶å€™ï¼Œè¦æ³¨æ„è½¯æ’çº¿ä¸Šæœ‰ä¸€ä¸ªå°ä¸‰è§’ï¼Œå®ƒè¦å¯¹å‡†æ ‘è“æ´¾USBæ¥å£çš„å¦ä¸€ä¾§çš„æ¥å£ï¼Œä¾ç…§è¿™ä¸ªæ–¹å‘æ’å…¥è½¯æ’çº¿ã€‚è¯·å¹³å‡ç”¨åŠ›ï¼Œä¸è¦å¤§åŠ›å‡ºå¥‡è¿¹ï¼\n\n40pæ’çº¿çš„å¦ä¸€ç«¯å°±æ˜¯é“¾æ¥Tå‹è½¬æ¥æ¿äº†ï¼Œé“¾æ¥è¿™ä¸ªå°±å¾ˆç®€å•ï¼ŒTå‹è½¬æ¥æ¿ä¸Šä¼šæœ‰ä¸€ä¸ªå‡¹æ§½ï¼Œå¯¹å‡†å‡¹æ§½æ–¹å‘æ’å…¥å³å¯\n\nç„¶åå°†Tå‹è½¬æ¥æ¿å¯¹å‡†é¢åŒ…æ¿ä¸­å¤®çš„å­”ä½æ’å…¥å³å¯ï¼G17 G18å¯¹å‡†è¡Œå·1çš„å­”ä½\n\n5.è¿›é˜¶æ“ä½œç”¨ä¸ŠXshellå’Œé¢åŒ…æ¿ï¼Œä½ çš„æ ‘è“æ´¾å·²ç»æ˜¯ä¸€ä¸ªå®Œå…¨ä½“å•¦ï¼\nå…¶ä»–çš„ä¸€äº›æ“ä½œï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å¦å¤–ä¸€ä¸ªæ ‘è“æ´¾çš„ä¸“æ ğŸ‘‰ä¼ é€é—¨\n\nå¦‚æœæœ¬ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¿˜è¯·ç‚¹èµæ”¯æŒä¸€ä¸‹å“¦ï¼\n\næœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼çœ‹åˆ°äº†å°±ä¼šå›å¤çš„\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€Cè¯­è¨€ã€‘è“æ¡¥æ¯/ACMç«èµ›å…¥é—¨ A+B for Input-Output Practice","url":"/posts/2420712993/","content":"[TOC]\nã€Cè¯­è¨€ã€‘è“æ¡¥æ¯&#x2F;ACMç«èµ›&#x2F;A+Bä¸Šæ¬¡å‚åŠ äº†å­¦æ ¡çš„è“æ¡¥æ¯æ ¡é˜Ÿé€‰æ‹”â€œé›†è®­â€\nç¬¬ä¸€æ¬¡â€œæµ‹è¯•â€å°±ç›´æ¥è¢«è€ƒå‚»äº†ï¼Œè™½ç„¶éƒ½æ˜¯æˆ‘â€œå¥½åƒâ€å­¦è¿‡çš„å†…å®¹ï¼Œä½†æˆ‘é‡Œé‡Œå¤–å¤–çœŸçš„çœ‹ä¸å‡ºæ¥åˆ°åº•æ€ä¹ˆå†™ï¼Œå¤ªç¦»è°±äº†ï¼\nè€Œä¸”å­¦é•¿ç”¨çš„éƒ½æ˜¯C++ï¼Œæˆ‘åªå­¦äº†cè¯­è¨€ï¼Œåé¢çš„é¢˜ç›®å®Œå…¨çœ‹ä¸æ‡‚äº†ã€‚\nå½“ç„¶ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯æˆ‘å¤ªèœäº†\nåœ¨è¿™é‡ŒæŠŠæˆ‘æäº†å¥½ä¹…ç»ˆäºå¼„æ‡‚çš„A+Bé¢˜ç›®åˆ†äº«ç»™å¤§å®¶\n\nå¼€å§‹é›†è®­ï¼šA+Bä¸æœ‰æ‰‹å°±è¡Œï¼Ÿ\nç»“æŸåï¼šæˆ‘æ‰‹å‘¢?\n\n\næ³¨ï¼šé¢˜ç›®æ˜¯è‹±æ–‡çš„ï¼ï¼ï¼ï¼\n\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(I)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nTooâ€‚easy?!â€‚Ofâ€‚course!â€‚Iâ€‚speciallyâ€‚designedâ€‚theâ€‚problemâ€‚forâ€‚acmâ€‚beginners.â€‚â€‚\nYouâ€‚mustâ€‚haveâ€‚foundâ€‚thatâ€‚someâ€‚problemsâ€‚haveâ€‚theâ€‚sameâ€‚titlesâ€‚withâ€‚thisâ€‚one,â€‚yes,â€‚allâ€‚theseâ€‚problemsâ€‚wereâ€‚designedâ€‚forâ€‚theâ€‚sameâ€‚aim.â€‚â€‚\nInputâ€‚\nTheâ€‚inputâ€‚willâ€‚consistâ€‚ofâ€‚aâ€‚seriesâ€‚ofâ€‚pairsâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚separatedâ€‚byâ€‚aâ€‚space,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚â€‚â€‚â€‚\nSampleâ€‚Inputâ€‚\n1â€‚510â€‚20\n\nSampleâ€‚Outputâ€‚\n630â€‚\n\n\n\nè¿™é“é¢˜çœ‹èµ·æ¥éå¸¸ç®€å•ï¼Œæˆ‘ä¸€ä¸Šæ¥å°±æ‰“ä¸Šäº†ä¸¤è¡Œscanfï¼Œå•ªçš„ä¸€ä¸‹å°±æäº¤äº†\nç„¶åç³»ç»Ÿå•ªçš„ä¸€ä¸‹ç»™æˆ‘è¿”å›äº†ä¸€ä¸ªå¤§å¤§çš„çº¢è‰²WRONG ANSWER\næ­£ç¡®åšæ³•å¦‚ä¸‹ï¼š\n#include&lt;stdio.h&gt;â€‚â€‚int main()â€‚â€‚&#123;â€‚â€‚â€‚â€‚intâ€‚a,b;â€‚â€‚â€‚â€‚while(scanf(&quot;%d%d&quot;,&amp;a,&amp;b)!=EOF)       printf(&quot;%d\\n&quot;,a+b);â€‚â€‚&#125;â€‚â€‚â€‚\n\nä¸èƒ½ç›´æ¥ä½¿ç”¨ä¸¤è¡Œscanfçš„åŸå› æ˜¯\né¢˜ç›®éœ€è¦çš„æ˜¯è¿™ä¸²ä»£ç èƒ½å®Œæ•´åœ°ä½¿ç”¨å¤šæ¬¡ï¼Œè€Œä¸æ˜¯ç®€å•çš„åªæ‰§è¡Œä¸¤æ¬¡\nåœ¨whileé‡Œä½¿ç”¨EOFçš„åŸå› è¿™é‡Œä½¿ç”¨eofï¼Œå¯ä»¥è®©ç¨‹åºåœ¨æœªè¾“å…¥é”™è¯¯çš„æƒ…å†µä¸‹ä¸€ç›´è¿›è¡Œå¾ªç¯è®¡ç®—a+b\nscanfå‡½æ•°çš„è¿”å›å€¼\nscanfå‡½æ•°è¿”å›æˆåŠŸè¯»å…¥çš„æ•°æ®é¡¹æ•°ï¼Œè¯»å…¥æ•°æ®æ—¶é‡åˆ°äº†â€œæ–‡ä»¶ç»“æŸâ€åˆ™è¿”å›EOFã€‚\nå¦‚ï¼šscanf(â€œ%d %dâ€,&amp;a,&amp;b);\nå‡½æ•°è¿”å›å€¼ä¸ºintå‹ã€‚å¦‚æœaå’Œbéƒ½è¢«æˆåŠŸè¯»å…¥ï¼Œé‚£ä¹ˆscanfçš„è¿”å›å€¼å°±æ˜¯2ï¼›\nå¦‚æœåªæœ‰aè¢«æˆåŠŸè¯»å…¥ï¼Œè¿”å›å€¼ä¸º1ï¼›\nå¦‚æœaå’Œbéƒ½æœªè¢«æˆåŠŸè¯»å…¥ï¼Œè¿”å›å€¼ä¸º0ï¼›\nå¦‚æœé‡åˆ°é”™è¯¯æˆ–é‡åˆ°end of fileï¼Œè¿”å›å€¼ä¸ºEOFã€‚end of fileä¸ºCtrl+z æˆ–è€…Ctrl+dã€‚\n[æ‘˜è‡ªç™¾åº¦çŸ¥é“ç”¨æˆ·@çºµæ¨ªç«–å±çš„å›ç­”]\n\nEOFçš„å€¼ä¸º-1ï¼Œä½†ä¸èƒ½ç®€å•çš„ç”¨-1ä»£æ›¿EOF\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(II)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nInputâ€‚\nInputâ€‚containsâ€‚anâ€‚integerâ€‚Nâ€‚inâ€‚theâ€‚firstâ€‚line,â€‚andâ€‚thenâ€‚Nâ€‚linesâ€‚follow.â€‚Eachâ€‚lineâ€‚consistsâ€‚ofâ€‚aâ€‚pairâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚separatedâ€‚byâ€‚aâ€‚space,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚\nSampleâ€‚Inputâ€‚\n21â€‚510â€‚20\n\nSampleâ€‚Outputâ€‚\n630\n\n\n\nè¿™é“é¢˜çš„æ„æ€å…¶å®å°±æ˜¯åœ¨é”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ä¹‹å‰ï¼Œå…ˆé”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ç»„æ•°ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºè¡Œæ•°ï¼‰\nè¦æ±‚æˆ‘ä»¬ç”¨å¾ªç¯çš„æ–¹å¼å®Œæˆâ€œç›¸åŠ æ•°å­—è¡Œæ•°â€çš„æ“ä½œ\nå®Œæˆnè¡Œåéœ€è¦è·³å‡ºè¯¥a+bçš„å¾ªç¯\n#include&lt;stdio.h&gt;int main()&#123;    int a, b;    int i, j;    int n;    scanf(&quot;%d&quot;, &amp;n);//nå³ä¸ºè¡Œæ•°    int sum[20] = &#123; 0 &#125;;    for (i = 0; i &lt; n; i++)    &#123;        scanf(&quot;%d %d&quot;, &amp;a, &amp;b);        sum[i] = a + b;    &#125;    for (j = 0; j &lt; n; j++)    &#123;        printf(&quot;%d\\n&quot;, sum[j]);    &#125;&#125;\n\n\nA+Bâ€‚forâ€‚Input-Outputâ€‚Practiceâ€‚(III)Problemâ€‚Descriptionâ€‚\nYourâ€‚taskâ€‚isâ€‚toâ€‚Calculateâ€‚aâ€‚+â€‚b.â€‚\nInputâ€‚\nInputâ€‚containsâ€‚multipleâ€‚testâ€‚cases.â€‚Eachâ€‚testâ€‚caseâ€‚containsâ€‚aâ€‚pairâ€‚ofâ€‚integersâ€‚aâ€‚andâ€‚b,â€‚oneâ€‚pairâ€‚ofâ€‚integersâ€‚perâ€‚line.â€‚Aâ€‚testâ€‚caseâ€‚containingâ€‚0â€‚0â€‚terminatesâ€‚theâ€‚inputâ€‚andâ€‚thisâ€‚testâ€‚caseâ€‚isâ€‚notâ€‚toâ€‚beâ€‚processed.â€‚â€‚\nOutputâ€‚\nForâ€‚eachâ€‚pairâ€‚ofâ€‚inputâ€‚integersâ€‚aâ€‚andâ€‚bâ€‚youâ€‚shouldâ€‚outputâ€‚theâ€‚sumâ€‚ofâ€‚aâ€‚andâ€‚bâ€‚inâ€‚oneâ€‚line,â€‚andâ€‚withâ€‚oneâ€‚lineâ€‚ofâ€‚outputâ€‚forâ€‚eachâ€‚lineâ€‚inâ€‚input.â€‚â€‚\nSampleâ€‚Inputâ€‚\n1â€‚5â€‚10â€‚200â€‚0â€‚\n\nSampleâ€‚Outputâ€‚\n630\n\nè¿™é“é¢˜çš„è¦æ±‚æ˜¯a+bçš„ç¨‹åºåœ¨è¯»å–åˆ°ä¸¤ä¸ª0 0çš„æ—¶å€™ä¼šé€€å‡ºå¾ªç¯\nä¸”ä»£ç ä¸ä¼šå¤„ç†è¿™ä¸¤ä¸ª0 0ï¼ˆæŠŠå®ƒä»¬å½“ä½œå¾ªç¯ç»“æŸæ ‡å¿—ï¼‰\n#include&lt;stdio.h&gt;int main()&#123;\tint a = 0, b = 0, c;\twhile (1)\t&#123;\t\tscanf(&quot;%d%d&quot;, &amp;a, &amp;b);\t\tif (a == 0 &amp;&amp; b == 0)//åˆ¤æ–­é”®å…¥çš„æ˜¯å¦ä¸º0 0\t\t&#123;\t\t\tbreak;//æ˜¯0 0ï¼Œé€€å‡ºå¾ªç¯\t\t&#125;\t\telse//ä¸æ˜¯0 0ï¼Œç»§ç»­è¿è¡Œa+b\t\t&#123;\t\t\tc = a + b;\t\t\tprintf(&quot;%d\\n&quot;, c);\t\t&#125;\t\t\t&#125;\treturn 0;&#125;\n\n\nA+B  for  Input-Output  Practice (IV)Description:\nYour task is to Calculate the sum of some integers.\nInput:\nInput contains multiple test cases. Each test case contains a integer N, and then N integers follow in the same line. A test case starting with 0 terminates the input and this test case is not to be processed.\nOutput:\nFor each group of input integers you should output their sum in one line, and with one line of output for each line in input.\nSample Input:\n4 1 2 3 45 1 2 3 4 50 \n\nSample Output:\n1015\n\nä¸å‰é¢çš„ä¸¤ä¸ªæ•°å­—ç›¸åŠ ä¸åŒï¼Œè¿™é“é¢˜çš„è¦æ±‚æ˜¯ï¼Œå…ˆè¾“å…¥ä½ éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°ï¼Œå†ä¾æ¬¡é”®å…¥æ•°å­—\né‡åˆ°0çš„æ—¶å€™åœæ­¢å¾ªç¯\n\nè¿™ä¸ª0å¿…é¡»æ˜¯ç¬¬ä¸€ä¸ªæ•°å­—ï¼Œå³ä»£è¡¨éœ€è¦â€œ0ä¸ªæ•°å­—ç›¸åŠ â€\nå¦‚æœæ˜¯éœ€è¦ç›¸åŠ çš„æ•°å­—é‡Œæœ‰0ï¼Œä¸åº”é€€å‡ºå¾ªç¯\n\n#include&lt;stdio.h&gt;int main() &#123;\tint n, sum, i, t;\twhile (scanf(&quot;%d&quot;, &amp;n) != EOF &amp;&amp; n != 0) //åˆ¤æ–­æ˜¯å¦ç­‰äº0\t&#123;\t\tsum = 0;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;t);\t\t\tsum = sum + t;//ä¸æ–­å¾€sumé‡Œé¢åŠ æ•°å­—\t\t&#125;\t\tprintf(&quot;%d\\n&quot;, sum);\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (V)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains an integer N in the first line, and then N lines follow. Each line starts with a integer M, and then M integers follow in the same line.\nOutput:\nFor each group of input integers you should output their sum in one line, and with one line of output for each line in input.\nSample Input:\n24 1 2 3 45 1 2 3 4 5\n\nSample Output:\n1015\n\nè¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜çš„è¦æ±‚å·®ä¸å¤šï¼Œç»“åˆäº†ç¬¬äºŒé¢˜çš„å†…å®¹ï¼Œå³æˆ‘ä»¬åœ¨é”®å…¥éœ€è¦ç›¸åŠ çš„æ•°å­—ä¹‹å‰ï¼Œè¦å…ˆé”®å…¥â€œè¡Œæ•°â€\nå½“ç„¶å®ƒä¹Ÿå°‘äº†åœ¨é‡åˆ°0çš„æ—¶å€™é€€å‡ºå¾ªç¯\n#include&lt;stdio.h&gt;int main() &#123;\tint n, a, b, i, j, sum;\tsum = 0;\twhile (scanf(&quot;%d\\n&quot;, &amp;n) != EOF) \t&#123;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;b);\t\t\tfor (j = 0; j &lt; b; j++) \t\t\t&#123;\t\t\t\tscanf(&quot;%d&quot;, &amp;a);\t\t\t\tsum += a;\t\t\t&#125;\t\t\tprintf(&quot;%d\\n&quot;, sum);\t\t\tsum = 0;\t\t&#125;\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (VI)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains multiple test cases, and one case one line. Each case starts with an integer N, and then N integers follow in the same line.\nOutput:\nFor each test case you should output the sum of N integers in one line, and with one line of output for each line in input.\nSample Input:\n4 1 2 3 45 1 2 3 4 5\n\nSample Output:\n1015\n\nè¿™é“é¢˜å’Œç¬¬å››é¢˜å¾ˆåƒï¼Œå°±ç¼ºå°‘äº†é‡åˆ°0åœæ­¢\n#include&lt;stdio.h&gt;int main() &#123;\tint n, sum, i, t;\twhile (scanf(&quot;%d&quot;, &amp;n) != EOF) \t&#123;\t\tsum = 0;\t\tfor (i = 0; i &lt; n; i++) \t\t&#123;\t\t\tscanf(&quot;%d&quot;, &amp;t);\t\t\tsum = sum + t;\t\t&#125;\t\tprintf(&quot;%d\\n&quot;, sum);\t&#125;&#125;\n\n\nA+B  for  Input-Output  Practice (VII)Description:\nYour task is to Calculate a + b.\nInput:\nThe input will consist of a series of pairs of integers a and b, separated by a space, one pair of integers per line.\nOutput:\nFor each pair of input integers a and b you should output the sum of a and b, and followed by a blank line.\nSample Input:\n1 510 20\n\nSample Output:\n630\n\nè¿™é“é¢˜å¤šäº†ä¸€ä¸ªè¦æ±‚ï¼Œâ€œfollowed by a blank line.â€\néœ€è¦æˆ‘ä»¬åœ¨ä»£ç å®Œæˆåï¼Œè·Ÿç€æ‰“å°ä¸€ä¸ªç©ºè¡Œï¼Œä¹Ÿå°±æ˜¯\\n\n#include&lt;stdio.h&gt;int main()&#123;    int a, b;    while (scanf(&quot;%d %d&quot;, &amp;a, &amp;b) != EOF)        printf(&quot;%d\\n&quot;, a + b);        printf(&quot;\\n&quot;);//æ‰“å°ç©ºè¡Œ    return 0;&#125;\n\n\nA+B  for  Input-Output  Practice (VIII)Description:\nYour task is to calculate the sum of some integers.\nInput:\nInput contains an integer N in the first line, and then N lines follow. Each line starts with a integer M, and then M integers follow in the same line.\nOutput:\nFor each group of input integers you should output their sum in one line, and you must note that there is a blank line between outputs.\nSample Input:\n34 1 2 3 45 1 2 3 4 53 1 2 3\n\nSample Output:\n10156\n\nè¿™é“é¢˜çš„è¦æ±‚ç»“åˆäº†ä¸Šé¢çš„é¢˜ç›®\n\néœ€è¦å…ˆé”®å…¥â€œè¡Œæ•°â€\néœ€è¦åœ¨ç›¸åŠ ä¹‹å‰é”®å…¥ éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°\næ‰“å°ç­”æ¡ˆåéœ€è¦å†æ‰“å°ä¸€ä¸ª ç©ºè¡Œ\n\nä¹Ÿä¸æ€•å¤§å®¶ç¬‘è¯ï¼Œè¿™é“é¢˜æ˜¯æˆ‘æŠ„çš„ï¼ŒåŸåšå®¢åœ¨è¿™ [ç‚¹æˆ‘]\n\nåŸåšå®¢ä¸­åœ¨forå¾ªç¯çš„scanfå‰å¤šäº†ä¸€ä¸ªif(i&#x3D;&#x3D;0)çš„ä»£ç ï¼Œæˆ‘å®åœ¨æ²¡çœ‹æ‡‚è¿™å¥ä»£ç çš„æ„ä¹‰ï¼Œå»æ‰ä¹‹åç³»ç»Ÿä¾æ—§åˆ¤å¯¹ï¼\n\n#include&lt;stdio.h&gt;int main()&#123;    int test,t=0;     scanf(&quot;%d&quot;,&amp;test);//è¡Œæ•°    while(test--)//æ¯æ‰§è¡Œä¸€æ¬¡ï¼Œå‡å°‘ä¸€è¡Œ    &#123;    int s=0,i;    int n,a[1000];//ç”¨æ•°ç»„çš„æ–¹å¼å®Œæˆç›¸åŠ     scanf(&quot;%d&quot;,&amp;n);//éœ€è¦ç›¸åŠ çš„æ•°å­—çš„ä¸ªæ•°    for(i=0;i&lt;n;i++)    &#123;            scanf(&quot;%d&quot;,&amp;a[i]);            s+=a[i];    &#125;    t++;    if(t&gt;1)        printf(&quot;\\n&quot;);    printf(&quot;%d\\n&quot;,s);    &#125; return 0;&#125;\n\n\nå‘¼ï¼ç»ˆäºå†™å®Œè¿™ç¯‡åšå®¢äº†\nå¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹èµå…³æ³¨æ”¶è—å§ï¼\nè¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ04-ç»§ç”µå™¨","url":"/posts/3764013947/","content":"\n\n\n\nå‰è¨€å­¦ä¹ æ ‘è“æ´¾çš„æ—¶å€™ç»å¸¸è¦æŸ¥æ‰¾å‰è¾ˆä»¬ç•™ä¸‹çš„èµ„æ–™\n\nä½†æˆ‘å‘ç°ï¼Œæœ‰ä¸€äº›åšå®¢ï¼Œå†™çš„çœŸçš„ä¸æ•¢æ­ç»´ã€‚\næ— æ³¨é‡Šæºç ä¸€è´´ï¼Œç”µè·¯å›¾ä¸€è´´ï¼Œä»€ä¹ˆè§£é‡Šéƒ½æ²¡æœ‰ï¼Œå°±å‘å‡ºæ¥äº†ã€‚\nè¿™æ˜¯å†™ç»™è°çœ‹çš„ï¼Ÿææ€•è‡ªå·±è¿‡å‡ ä¸ªæœˆå›å¤´çœ‹è‡ªå·±éƒ½ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆæ„æ€ã€‚è¿™æ ·çš„å­¦ä¹ æœ‰å•¥æ„ä¹‰å‘¢ï¼Ÿ\n\næœ‰çš„äººå¯èƒ½è§‰å¾—æˆ‘æ˜¯æƒ³æŠ„ä½œä¸šï¼Œçš„ç¡®ï¼åµŒå…¥å¼å­¦ä¹ éœ€è¦äº†è§£å„ä¸ªå…ƒä»¶çš„å·¥ä½œåŸç†ï¼Œæˆ‘çš„èµ„æ–™å•æœ‰ç”µè·¯å›¾è¿œè¿œä¸å¤Ÿå•Šâ€¦â€¦å³ä¾¿æœ‰æºç ï¼Œä¹Ÿéœ€è¦è‡ªå·±å»å¼„æ˜ç™½æ¯ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œä¸ç„¶è¿™æ ·çš„å­¦ä¹ ä¾æ—§æ²¡æœ‰æ„ä¹‰ğŸ˜¥\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nç»§ç”µå™¨æ¨¡å—+åå­—èºä¸åˆ€\nåŒè‰²LEDæ¨¡å—ï¼ˆå®éªŒ1ä½¿ç”¨è¿‡ï¼‰\nè·³çº¿ä¸€å †\n\n2.å®éªŒåŸç†2.1ç»§ç”µå™¨æ¨¡å—ç»§ç”µå™¨æ¨¡å—æ˜¯ä¸€ç§ç”µæ§åˆ¶æœŸé—´ï¼Œå½“è¾“å…¥é‡çš„å˜åŒ–è¾¾åˆ°è§„å®šè¦æ±‚æ—¶ï¼Œåœ¨ç”µæ°”è¾“å‡ºç”µè·¯ä¸­ä½¿è¢«æ§åˆ¶é‡å‘ç”Ÿé¢„å®šé˜¶è·ƒå˜åŒ–çš„ä¸€ç§ç”µå™¨ã€‚å®ƒå…·æœ‰æ§åˆ¶ç³»ç»Ÿå’Œè¢«æ§åˆ¶ç³»ç»Ÿä¹‹é—´çš„äº’åŠ¨å…³ç³»ï¼Œé€šå¸¸è¿ç”¨äºè‡ªåŠ¨åŒ–çš„æ§åˆ¶ç”µè·¯ä¸­ã€‚å®ƒå®é™…ä¸Šæ˜¯ç”¨å°ç”µæµå»æ§åˆ¶å¤§ç”µæµè¿ä½œçš„ä¸€ç§â€œè‡ªåŠ¨å¼€å…³â€ï¼Œåœ¨ç”µè·¯ä¸­èµ·åˆ°è‡ªåŠ¨è°ƒèŠ‚ã€å®‰å…¨ä¿æŠ¤ã€è½¬æ¢ç”µè·¯ç­‰ä½œç”¨ã€‚\n\nè¯´äººè¯å°±æ˜¯ï¼Œç»§ç”µå™¨æ˜¯ä¸€ä¸ªç”µåŠ¨å¼€å…³ï¼Œé€šè¿‡æ¥æ”¶å¤–éƒ¨æºçš„ç”µä¿¡å·æ¥æ‰“å¼€å’Œå…³é—­ç”µè·¯ã€‚\nä¾‹å¦‚ï¼šæŒ‰ä¸‹ç”µè§†æœºé¥æ§å™¨çš„å¼€å¯æŒ‰é’®ï¼Œå®ƒå‘ç”µè§†èŠ‚å†…éƒ¨çš„â€œç»§ç”µå™¨â€å‘å‡ºç”µä¿¡å·ï¼Œä»è€Œæ‰“å¼€ç”µè§†æœºçš„ä¸»ç”µæºå¼€å…³ã€‚ä¸è¿‡ç”µè§†æœºå†…éƒ¨è¿˜æœ‰å¦å¤–çš„ä¿¡å·æ¥æ”¶å™¨ï¼Œç»§ç”µå™¨æœ¬èº«ä¸ä¸€å®šèƒ½æ¥æ”¶çº¢å¤–ä¿¡å·ï¼ˆä¸ªäººç†è§£ï¼‰\n\n2.2ç»§ç”µå™¨å·¥ä½œ\nå½“ç»§ç”µå™¨ä¾›ç”µæ—¶ï¼Œç”µæµå¼€å§‹ç»è¿‡æ§åˆ¶çº¿åœˆ\nç”µç£ä½“å¼€å§‹é€šç”µï¼Œå°†ä¸Šéƒ¨è¡”é“å¸é™„åˆ°çº¿åœˆä¸Šï¼Œå¸¦åŠ¨è§¦ç‚¹å‘å³ç§»åŠ¨ï¼Œä»è€Œä¸å¸¸å¼€è§¦ç‚¹é“¾æ¥\nå¸¦è´Ÿè½½çš„ç”µè·¯é€šç”µ\nç»§ç”µå™¨æ–­å¼€ä¾›ç”µï¼Œå¼¹ç°§ä¼šå°†è§¦å¤´å¤ä½ï¼Œç”µè·¯æ–­å¼€\n\n\n\n3.ç”µè·¯å›¾å’Œæ¥çº¿å›¾3.1ç”µè·¯å›¾ç»§ç”µå™¨æ¨¡å—çš„ç”µè·¯å›¾å¦‚ä¸‹\n\næ¨¡å—å®ç‰©å›¾å¦‚ä¸‹\n\n\nå¼•ç”¨å¦å¤–ä¸€ç¯‡åšå®¢å¯¹å„ä¸ªæ¥å£çš„ä»‹ç»ğŸ‘‰åŸæ–‡é“¾æ¥\n\n\n3.2æ¥çº¿å›¾ç»§ç”µå™¨çš„ä¸»æ§åˆ¶å‹å·æºæ¥åœ¨GPIO17ï¼Œå’Œç«¯å£0å¯¹åº”ï¼ˆåé¢ä»£ç ä¼šç”¨åˆ°ï¼‰\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nç»§ç”µå™¨æ¨¡å—\n\n\n\nGPIO 0\nGPIO 17\nIN\n\n\n5V\n5V\nDC+\n\n\nGND\nGND\nDC-\n\n\n5V\n5V\nCOM\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nç»§ç”µå™¨\n\n\n\nä¸­é—´ï¼ˆRï¼‰\n*\nNC\n\n\nGND\nGND\n*\n\n\nS(G)\n*\nNO\n\n\nç”±äºåŒè‰²LEDæ¨¡å—çš„Gæ¥å£(Green)æ¥åˆ°äº†ç»§ç”µå™¨çš„å¸¸é—­ç«¯å£NCï¼ˆå³ç»§ç”µå™¨æœªæ¥é€šæ—¶é»˜è®¤æ¥ä¸Šçš„ç«¯å£ï¼‰\næ‰€ä»¥åœ¨æ¥çº¿å®Œæ¯•åï¼ŒLEDæ¨¡å—ä¼šäº®ç»¿ç¯\n\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¯¹ç»§ç”µå™¨æ¥çº¿çš„æ—¶å€™ï¼Œéœ€è¦ç”¨èºä¸é”ä½å„æ¡çº¿ä½ï¼Œä¸ç„¶å®ƒä»¬æ˜¯æ¥ä¸ç¨³çš„\n\n\n4.ä»£ç ç¤ºä¾‹è¿™é‡Œç»™å‡ºCè¯­è¨€çš„ä»£ç \n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_RelayPin 0 //è®¾ç½®ç»§ç”µå™¨GPIOç®¡è„šï¼Œ0å¯¹åº”G17int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\t\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\t\t//å°†ç»§ç”µå™¨ç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_RelayPin, OUTPUT);\t\tint k=2;\twhile(k--)\t&#123;\t\t\tdigitalWrite(makerobo_RelayPin, HIGH); // æ‰“å¼€ç»§ç”µå™¨\t\t\tdelay(1000);                           // å»¶æ—¶1s\t\t\t\t\tdigitalWrite(makerobo_RelayPin, LOW);  // å…³é—­ç»§ç”µå™¨\t\t\t\t\t\tdelay(1000);                           // å»¶æ—¶1s\t&#125;\treturn 0;&#125;\n\n4.1éƒ¨åˆ†å‡½æ•°è§£é‡Š4.1.1pinModeè¯¥å‡½æ•°çš„ä½œç”¨æ˜¯è®¾ç½®é’ˆè„šå½“å‰çš„æ¨¡å¼\n\n4.1.2digitalWriteå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæåˆ°äº†åœ¨ä½¿ç”¨è¯¥å‡½æ•°ä¹‹å‰ï¼Œéœ€è¦ç”¨pinModeå‡½æ•°å°†é’ˆè„šè®¾ç½®ä¸ºOUTPUTæ¨¡å¼\n\n0 ä»£è¡¨lowå€¼\né0éƒ½ä»£è¡¨high\n\n\n4.2Geanyç¼–è¯‘å™¨è¿è¡Œä»£ç è€æ ·å­ï¼Œä¸‰æ¿æ–§\n\n\nåœ¨Geanyé‡Œé¢ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨wiringPiåº“ï¼ˆåç»­çš„åšå®¢ä¸å†è¯´æ˜ï¼‰\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\næœ€ç»ˆè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œå½“digitalWriteå†™å…¥highæ—¶ï¼Œç»§ç”µå™¨æ¥é€šï¼Œçº¢ç¯ç”µè·¯äº®èµ·\nå†™å…¥lowæ—¶ç»§ç”µå™¨å…³é—­ï¼Œæ¢å¤åŸæœ¬ç»¿ç¯å¸¸äº®çŠ¶æ€\n\nä½¿ç”¨ctrl+cå…³é—­ç¨‹åºè¿è¡Œé¢æ¿ï¼Œåœæ­¢ç¨‹åºè¿è¡Œ\n\n4.3Linux-gccç¼–è¯‘å™¨åœ¨linuxæ§åˆ¶å°é‡Œé¢ï¼Œç”¨cdæ‰“å¼€ä½ çš„æ–‡ä»¶å¤¹åï¼Œè¾“å…¥å¦‚ä¸‹ç¼–è¯‘æŒ‡ä»¤\ngcc -Wall 04relay.c -o TEST -lwiringPi\n\nå¦‚æœç¼–è¯‘æ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯æˆåŠŸç¼–è¯‘äº†ï¼Œlsä¼šå‘ç°å¤šå‡ºäº†TESTå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨./TESTæ‰§è¡Œå®ƒ\næ‰§è¡Œç»“æŸåï¼Œä¼šæ˜¾ç¤ºä¸‹ä¸€è¡Œçš„å¾…å®šè¾“å…¥\n\nä¸ºäº†é¿å…linux-gccä¸­ç¨‹åºè¿è¡Œåæ— æ³•ç»ˆæ­¢ï¼Œè¯·ä¸è¦ä½¿ç”¨while(1)æ­»å¾ªç¯ï¼\nä½¿ç”¨ç»“æŸåè¯·å…ˆæ–­å¼€5Vè·³çº¿åï¼Œå†æ–­å¼€å…¶ä»–è·³çº¿\n\nç»“è¯­æœ¬å®éªŒåªæ˜¯ç®€å•æ¼”ç¤ºäº†ç»§ç”µå™¨çš„ä½¿ç”¨ï¼Œå†åç»­æ›´å¤æ‚çš„å®éªŒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ§åˆ¶æ›´å¤æ‚çš„æ¨¡å—\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ03-ä¸ƒå½©LED","url":"/posts/2363440807/","content":"\n\n\n\nå‰è¨€å­¦ä¹ å¤ªç´¯ï¼Œé‚£å°±ç©ç©æ ‘è“æ´¾â€œé™¶å†¶æƒ…æ“â€å§ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾4Bå¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nä¸ƒå½©LEDæ¨¡å—\nè·³çº¿è‹¥å¹²\n\n\n2.å®éªŒæ¥çº¿ä¸ƒå½©LEDæ¨¡å—å†…ç½®äº†ICèŠ¯ç‰‡ï¼Œå› æ­¤æ— éœ€ç¼–å†™ä»£ç ï¼Œåªéœ€é€šç”µå°±èƒ½çœ‹åˆ°LEDé—ªçƒã€‚\nä¸åŒå‹å·çš„ä¸ƒå½©LEDæ¨¡å—ï¼Œå†…ç½®çš„é—ªçƒæƒ…å†µä¼šæœ‰æ‰€åŒºåˆ«ï¼Œå¦‚é—ªçƒå¿«æ…¢å’Œäº®åº¦ç­‰\n\nä¸ƒå½©LEDæ¨¡å—åªéœ€ä¸²è”ä¸€ä¸ªé™æµç”µé˜»å³å¯æ„æˆæ§åˆ¶ç”µè·¯ï¼Œç¤ºæ„å›¾å¦‚ä¸‹\n\næ‰€ä»¥æˆ‘ä»¬æ¥çº¿çš„æ—¶å€™ï¼Œåªéœ€æ¥ä¸ŠVCCå’ŒGNDå³å¯\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nä¸ƒå½©LEDæ¨¡å—\n\n\n\nGND\nGND\nGND(ä¸­é—´ç®¡è„š)\n\n\n5V\n5V\nVCC(ä¸€æ—æ ‡æœ‰S)\n\n\n\nå‰ä¸¤æ¬¡å®éªŒä¸­ï¼Œæˆ‘å¯¹æ¯æ¬¡éƒ½éœ€è¦æ¥5vçº¿å´å¹¶æ²¡æœ‰è¿æ¥è®¾å¤‡æ„Ÿåˆ°ç–‘æƒ‘\næœ¬æ¬¡å®éªŒæ­£å¥½å°è¯äº†æˆ‘åœ¨02RGBledå®éªŒåšå®¢é‡Œåšå‡ºçš„çŒœæµ‹ï¼\nå®ç‰©æ¥çº¿å›¾å¦‚ä¸‹ğŸ‘‡\n\n3.å®éªŒæ•ˆæœå°†ç”µè·¯æ¥é€šï¼Œå¯ä»¥çœ‹åˆ°LEDé—ªçƒäº†7ç§é¢œè‰²ï¼Œä¸”æœ‰ä¸åŒçš„é—ªçƒæ–¹å¼ï¼\n\nè¿™ä¸æ¯”è‡ªå·±å†™ä»£ç æ§åˆ¶çš„æ›´å¸…ï¼Ÿï¼ˆbushiï¼‰\nå¦‚æœä½ æƒ³çŸ¥é“å¦‚ä½•ç”¨ä»£ç æ§åˆ¶ä¸€ä¸ªLEDæ¨¡å—ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„å‰ä¸¤ç¯‡æ ‘è“æ´¾å®éªŒçš„åšå®¢\n\nå®éªŒ02ï¼šRGBå°ç¯ \nå®éªŒ01ï¼šåŒè‰²LED\n\nç»“è¯­æœ¬æ¬¡å®éªŒçš„å†…å®¹ä¸å¤šæ’’ï¼Œå’±ä¹Ÿè§è¯†äº†å†…ç½®å°èŠ¯ç‰‡çš„å¿«ä¹ï¼ˆæŒ‡ä¸éœ€è¦è‡ªå·±å†™æ§åˆ¶ä»£ç ï¼‰\nä¸‹ä¸€æ¬¡çš„å®éªŒæ˜¯ç»§ç”µå™¨å®éªŒï¼Œè¿™éƒ¨åˆ†æ¶‰åŠåˆ°ä¸€äº›åŸç†ï¼Œçœ‹æ¥è¦ç§ƒå¤´äº†\n\nå¦‚æœä½ è§‰å¾—æœ¬ç¯‡åšå®¢æŒºæœ‰æ„æ€ï¼Œé‚£å°±ç‚¹ä¸ªèµï¼Œé¡ºä¾¿æ”¶è—ä¸€ä¸‹æˆ‘çš„æ ‘è“æ´¾ä¸“æ å§ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ06-è½»è§¦å¼€å…³å®éªŒ","url":"/posts/854191546/","content":"\n\nå‰è¨€ä¹¦ä¸Šçš„ä»£ç ç¤ºä¾‹å¯å¤ªç‰›äº†ï¼Œä¸ä»…æ²¡ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°strcmpï¼Œè¿˜æ˜¯æŒ‡é’ˆç›´æ¥å’Œå­—ç¬¦ä¸²å¯¹æ¯”ğŸ˜¥\n\nå­¦ä¹ è¿˜å¾—å¸®ä¹¦æœ¬çº é”™ï¼Œé—®åº—å®¶å®¢æœä¹Ÿæ˜¯ä¸€é—®ä¸‰ä¸çŸ¥ã€‚\nä¸å¤šè¯´äº†ï¼Œä¸€èµ·å¼€å§‹æœ¬æ¬¡çš„å®éªŒå§ï¼ğŸ‘\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾\n40Pè½¯ç›˜çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nè½»è§¦å¼€å…³æŒ‰é”®æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nä¸€å †è·³çº¿\n\n\nä¸Šï¼šåŒè‰²LEDæ¨¡å—ï¼›ä¸‹ï¼šè½»è§¦å¼€å…³æ¨¡å—\n\n2.å®éªŒåŸç†2.1ç”µè·¯å›¾ä½¿ç”¨è½»è§¦å¼€å…³ä½œä¸ºæ ‘è“æ´¾çš„è¾“å…¥è®¾å¤‡ï¼ŒæŒ‰ä¸‹å¼€å…³æ—¶ï¼Œæ ‘è“æ´¾GPIOç«¯å£æ£€æµ‹åˆ°ä½ç”µå¹³(0v)ï¼Œè¡¨ç¤ºæŒ‰é”®è¢«æŒ‰ä¸‹ã€‚æ¾å¼€æŒ‰é”®æ—¶ï¼Œæ ‘è“æ´¾æ£€æµ‹åˆ°é«˜ç”µå¹³(3.3v)\nåœ¨æœ¬æ¬¡å®éªŒä¸­ï¼Œå°†é€šè¿‡æ‰“å°ä¿¡æ¯æç¤ºæŒ‰é”®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚\nè½»è§¦å¼€å…³æ¨¡å—ç”µè·¯å›¾å¦‚ä¸‹ï¼š\n\n2.2æ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nè½»è§¦å¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nSIG(S)\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND(-)\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\nåœ¨å®éªŒ2çš„åšå®¢ä¸­ï¼Œå·²ç»æåˆ°è¿‡æ ‘è“æ´¾é’ˆè„šç¼–å·å’ŒTå‹è½¬æ¥æ¿ä¸Šç¼–å·çš„å¯¹åº”å…³ç³»\nåœ¨æ ‘è“æ´¾ç³»ç»Ÿæ§åˆ¶æ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹æ ‘è“æ´¾çš„GPIOæ¥å£\ngpio readall\n\nå¯ä»¥çœ‹åˆ°ï¼Œ17å¯¹åº”0ï¼Œ18å¯¹åº”1ï¼Œ27å¯¹åº”2ã€‚å’Œæˆ‘ä»¬çš„æ¥çº¿æ–¹å¼å’Œåˆå§‹åŒ–é’ˆè„šçš„ç¼–å·æ˜¯å¯¹åº”çš„\n\næœ¬æ¬¡å®éªŒçš„æ¥çº¿å›¾å¦‚ä¸‹ï¼Œæ³¨æ„å„ä¸ªç«¯å£çš„æ¥çº¿å…³ç³»\n\nå³ä¸Šè§’çº¢é»‘çº¿æ˜¯æ ‘è“æ´¾çš„æ•£çƒ­é£æ‰‡ï¼Œå’Œå®éªŒæ— å…³\n\n\n\n3.ç¨‹åºç¤ºä¾‹ä»¥ä¸‹ç»™å‡ºCè¯­è¨€çš„ç¤ºä¾‹ä»£ç \n//è½»è§¦å¼€å…³æŒ‰é”®å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;#define makerobo_BtnPin\t\t0   // è½»è§¦æŒ‰é”®PINå£#define makerobo_Rpin\t\t1   // çº¢è‰²LEDç¯æ¨¡å—PIN#define makerobo_Gpin\t\t2   // ç»¿è‰²LEDç¯æ¨¡å—PIN//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT);  //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT);  //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼    \tif (!strcmp(color,&quot;RED&quot;))     //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH); \t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (!strcmp(color,&quot;GREEN&quot;)) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;makerobo Double color LED Error\\n&quot;);&#125;int main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed!\\n&quot;);\t\treturn 1; \t&#125;    //è½»è§¦æŒ‰é”®Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_BtnPin, INPUT);\tdouble_colorLED(&quot;GREEN&quot;);\t\twhile(1)\t&#123;\t\t//è½»è§¦æŒ‰é”®å»é™¤æŠ–åŠ¨å¤„ç†\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t&#123;   // æŒ‰é”®æœ‰æŒ‰ä¸‹\t\t\tdelay(10);   // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t\t&#123;\t\t\t\tdouble_colorLED(&quot;RED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Button is pressed\\n&quot;); // æ‰“å°å‡ºæœ‰æŒ‰é”®æŒ‰ä¸‹\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_BtnPin))\t\t&#123; // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹äº®ç»¿ç¯\t\t\tdelay(10);\t\t\tif(1 == digitalRead(makerobo_BtnPin))\t\t\t&#123;\t\t\t\tdouble_colorLED(&quot;GREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Button is pressed\\n&quot;); // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1éƒ¨åˆ†å‡½æ•°è§£æä¸€äº›å‡½æ•°åœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²å…·ä½“ä»‹ç»è¿‡ï¼Œè¿™é‡Œç®€å•åˆ—å‡ºå®ƒä»¬çš„åŠŸèƒ½\n\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\nvoid pinMode(int pin, int mode)\nè®¾ç½®é’ˆè„šæ¨¡å¼ï¼ˆè¾“å…¥ã€è¾“å‡ºã€è„‰å†²è¾“å‡ºã€GPIOæ—¶é’Ÿï¼‰\n\n\nvoid digitalWrite(int pin, int value);\nå‘æŒ‡å®šç®¡è„šå†™å…¥é«˜&#x2F;ä½ç”µå¹³ä¿¡å·ï¼Œä½¿ç”¨å‰éœ€è¦è®¾ç½®ç®¡è„šä¸ºè¾“å‡ºæ¨¡å¼\n\n\nè¿™é‡Œæœ‰ä¸ªæ–°çš„å‡½æ•°ï¼Œä½œç”¨æ˜¯è¯»å–ç®¡è„šçš„å€¼\nåœ¨æœ¬å®éªŒä¸­ç”¨äºæ¥æ”¶è½»è§¦å¼€å…³çš„æŒ‰é’®ä¿¡å·\n\n3.2 Geanyç¼–è¯‘å™¨è¿è¡Œè¿è¡Œç¨‹åºï¼Œä»£ç ä¼šå¾ªç¯æ‰“å°â€œæ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹â€ï¼ŒLEDäº®ç»¿ç¯\n\næŒ‰ä¸‹æŒ‰é”®åï¼Œæ‰“å°æ˜¾ç¤ºâ€œæŒ‰é”®å·²æŒ‰ä¸‹â€ï¼ŒLEDäº®çº¢ç¯\n\nå®éªŒæ•ˆæœå¦‚ä¸‹\n\n3.3Linux-Gccç¼–è¯‘å™¨åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹ç¼–è¯‘æŒ‡ä»¤ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\ngcc -Wall 06Button.c -o TEST -lwiringPi\n\nè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶åï¼Œå¯ä»¥è§‚æµ‹åˆ°ç›¸åŒç»“æœ\n\n3.4ç¨‹åºä¼˜åŒ–æˆ‘ä¸ªäººè§‰å¾—è¿™ä¸ªç¨‹åºç”¨while(1)æ­»å¾ªç¯å¹¶ä¸æ˜¯é‚£ä¹ˆçš„ä¼˜ï¼Œç¨‹åºéœ€è¦æ‰‹åŠ¨CTRL+Cç»ˆæ­¢ï¼Œä¸”ç»ˆæ­¢åæ— æ³•å…³é—­LEDç¯ã€‚\nä¸‹é¢å¯¹ç¨‹åºåšå‡ºä¸€äº›ä¼˜åŒ–\n\nä¾æ—§å¯ä»¥è¯•è¯•åˆ¤æ–­æŒ‰é”®æŒ‰ä¸‹æƒ…å†µ\nåœ¨ç¨‹åºè¿è¡Œåï¼Œå…³é—­å°ç¯\n\nåªéœ€æ›´æ”¹å¾ªç¯ä½“å’Œå»¶æ—¶å‡½æ•°å³å¯ï¼Œåœ¨å¾ªç¯ç»“æŸåï¼Œä½¿ç”¨digitalWriteè¾“å…¥ä½ç”µå¹³å…³é—­å°ç¯çš„çº¢&#x2F;ç»¿ç®¡è„šï¼Œå³å®Œå…¨å…³é—­åŒè‰²LED\nint k=40;while(k--)&#123;\t//è½»è§¦æŒ‰é”®å»é™¤æŠ–åŠ¨å¤„ç†\tif(0 == digitalRead(makerobo_BtnPin))\t&#123;   // æŒ‰é”®æœ‰æŒ‰ä¸‹\t\tdelay(500);   // å»¶æ—¶å»æŠ–åŠ¨\t\tif(0 == digitalRead(makerobo_BtnPin))\t\t&#123;\t\t\tdouble_colorLED(&quot;RED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\tprintf(&quot;Button is pressed\\n&quot;); // æ‰“å°å‡ºæœ‰æŒ‰é”®æŒ‰ä¸‹\t\t&#125;\t&#125;\telse if(1 == digitalRead(makerobo_BtnPin))\t&#123; // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹äº®ç»¿ç¯\t\tdelay(500);\t\tif(1 == digitalRead(makerobo_BtnPin))\t\t&#123;\t\t\tdouble_colorLED(&quot;GREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\tprintf(&quot;No Button is pressed\\n&quot;); // æ²¡æœ‰æŒ‰é”®æŒ‰ä¸‹\t\t&#125;\t&#125;&#125;//å…³é—­LEDdigitalWrite(makerobo_Rpin, LOW);digitalWrite(makerobo_Gpin, LOW);delay(500);//å»¶æ—¶æŸ¥çœ‹å…³é—­æƒ…å†µreturn 0;\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒå­¦ä¹ äº†è½»è§¦å¼€å…³çš„ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨æœªæ¥çš„å®éªŒä¸­ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥æ§åˆ¶ä¸€äº›æ›´å¤æ‚ç”µè·¯çš„å¼€åˆ\n\nä½ å­¦è´¹äº†å—ï¼Ÿ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ07-å€¾æ–œå¼€å…³","url":"/posts/2803202558/","content":"\n\nå‰è¨€æ˜¨å¤©è¡¥å…¨äº†æ ‘è“æ´¾åˆå§‹åŒ–çš„åšå®¢ï¼Œæœ¬ä¸“æ çš„æ¨¡å—å°±ç®—æ˜¯å…¨å•¦ï¼\næ¬¢è¿å¤§å®¶æŠŠæœ¬ä¸“æ æ¨èç»™å…¶ä»–æœ‰å…´è¶£å­¦ä¹ æ ‘è“æ´¾çš„æœ‹å‹ï¼\n\nä»æœ¬åšå®¢å¼€å§‹ï¼Œå°†ä¸å†è®²è¿°Geanyç¼–è¯‘å™¨çš„ç®€å•æ“ä½œï¼Œæ‰€æœ‰æ“ä½œéƒ½ç”¨linuxå‘½ä»¤è¡Œè§£å†³\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nå€¾æ–œä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šå€¾æ–œä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†åœ¨å€¾æ–œå¼€å…³ä¸­ï¼Œæœ‰ä¸€ä¸ªé‡‘å±çƒï¼Œå®ƒç”¨äºæ£€æµ‹å°è§’åº¦çš„å€¾æ–œã€‚å€¾æ–œå¼€å…³æ¨¡å—çš„ç»“æ„ä¸ºåŒå‘ä¼ åˆ°çš„çƒå½¢å€¾æ–œè¯¥å…³ã€‚åªè¦å€¾æ–œåº¦çš„åŠ›æ»¡è¶³æ¡ä»¶ï¼Œå¼€å…³å°±ä¼šé€šç”µï¼Œä»è€Œè¾“å‡ºä½ç”µå¹³ä¿¡å·ã€‚\n\n2.1å®éªŒæ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nå€¾æ–œå¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nDo\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n2.2å®ç‰©æ¥çº¿å›¾\næ¥ä¸Šæ’çº¿åï¼Œå€¾æ–œå¼€å…³æ¨¡å—çš„PWR-LEDæŒ‡ç¤ºç¯äº®èµ·\n\nå½“æ£€æµ‹åˆ°å€¾æ–œè§’åº¦æ”¹å˜æ—¶ï¼ŒDO-LEDä¹Ÿä¼šäº®èµ·ï¼Œè¿™æ—¶Doç®¡è„šå°†è¾“å‡ºä½ç”µå¹³ï¼Œå¯¹åº”å€¼ä¸º0ã€‚åç»­ç¨‹åºçš„ç¼–å†™å°†ç”¨åˆ°è¿™ä¸ªåŸç†\n\n\n3.ä»£ç ç¤ºä¾‹ä¸‹é¢ç»™å‡ºCè¯­è¨€çš„ç¤ºä¾‹ä»£ç \n//å€¾æ–œä¼ æ„Ÿå™¨å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_TiltPin\t0 //å€¾æ–œä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1 //çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2 //ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (color == &quot;makeroboRED&quot;)     //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == &quot;makeroboGREEN&quot;) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Double color LED Error&quot;);&#125;int main(void)&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //å€¾æ–œä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_TiltPin, INPUT);\tdouble_colorLED(&quot;makeroboGREEN&quot;);\t\twhile(1)&#123;\t\t//å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°å€¾æ–œï¼Œè¾“å‡ºé«˜ç”µå¹³1\t\t//æ£€æµ‹åˆ°äº†ä¹‹åï¼Œè¾“å‡ºé«˜ç”µå¹³0\t\tif(0 == digitalRead(makerobo_TiltPin))\t\t&#123;     //å€¾æ–œä¼ æ„Ÿå™¨å‘ç”Ÿå€¾æ–œ\t\t\tdelay(10); //å€¾æ–œä¼ æ„Ÿå™¨å»é™¤æŠ–åŠ¨å¤„ç†\t\t\tif(0 == digitalRead(makerobo_TiltPin))&#123;\t\t\t\tdouble_colorLED(&quot;makeroboRED&quot;); // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Tilt!\\n&quot;);   // æ‰“å°å‡ºå‡ºç°å€¾æ–œ\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_TiltPin))\t\t&#123; // å€¾æ–œä¼ æ„Ÿå™¨æ²¡æœ‰å‘ç”Ÿå€¾æ–œ\t\t\tdelay(10);\t\t\tif(1 == digitalRead(makerobo_TiltPin))&#123;\t\t\t\twhile(!digitalRead(makerobo_TiltPin));\t\t\t\tdouble_colorLED(&quot;makeroboGREEN&quot;);  // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Tilt!\\n&quot;);  // æ‰“å°æ²¡æœ‰å‡ºç°å€¾æ–œ\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1éƒ¨åˆ†ä»£ç è§£é‡Šå»æŠ–åŠ¨æ“ä½œå› ä¸ºå€¾æ–œå¼€å…³å’Œè½»è§¦å¼€å…³éƒ½æ˜¯ç‰©ç†ç»“æ„ï¼Œéœ€è¦æœ‰ä¸€å®šçš„å»¶æ—¶æ¥è¿›è¡Œå»æŠ–åŠ¨æ“ä½œ\n\nç›´æ¥ç”¨==æ¯”è¾ƒå­—ç¬¦ä¸²(color == &quot;makeroboGREEN&quot;) \n\nè¿™é‡Œç”¨åˆ°äº†==ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œä¹‹å‰æˆ‘ä»¥ä¸ºè¿™æ ·å†™æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºLinux-gccæŠ¥é”™äº†ï¼ˆä½†æ˜¯å¯ä»¥ç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼‰\n\nå®é™…ä¸Šè¿™ä¸ªåœ¨VSä¸‹æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œä¸ä¼šæŠ¥é”™\n\nä¸ªäººç†è§£ï¼Œè¿™æ ·ç›´æ¥ä¼ å…¥å­—ç¬¦ä¸²çš„æ“ä½œï¼Œå®é™…ä¸Šæ˜¯åœ¨å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªå½¢å‚colorï¼Œæ¥æ”¶äº†ä¼ è¿‡æ¥çš„å¸¸é‡å­—ç¬¦ä¸²ï¼Œéšåçš„==æ¯”è¾ƒçš„å…¶å®æ˜¯å†…å­˜ä¸­çš„å­—ç¬¦ä¸²çš„åœ°å€ï¼Œè€Œä¸æ˜¯ç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²æœ¬èº«\n\nè¿™ä¸ªä»£ç é‡Œé¢åŒ…å«çš„wiringPiå‡½æ•°ï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¸­å·²ç»è®²è§£è¿‡äº†ï¼Œè¯¦æƒ…å¯ä»¥çœ‹å®éªŒ06ğŸ‘‰ä¼ é€é—¨\nå¦‚æœæœ‰ä¸æ‡‚çš„ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n\n3.2 Linuxç¼–è¯‘è¿è¡Œä»£ç è¾“å…¥ä»¥ä¸‹è¯­å¥ç¼–è¯‘è¿™ä¸ªä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 07tiltswitch.c -o TEST -lwiringPi\n\n./TESTè¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼ŒæŒ‰CTRL+Cç»ˆæ­¢ç¨‹åº\n\n3.3è¿è¡Œæ•ˆæœæŠ¬èµ·å€¾æ–œå¼€å…³ï¼ŒLEDäº®ç»¿ç¯ã€‚æ”¾ä¸‹å®ƒåï¼Œå˜æˆé»˜è®¤çš„çº¢ç¯\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼æ„Ÿè§‰è¿™ä¸ªå€¾æ–œå¼€å…³å°±æ˜¯æ‰‹æœºä¸­é™€èºä»ªçš„é’æ˜¥ç‰ˆã€‚\nç›®å‰æˆ‘è®¾æƒ³çš„æ˜¯ï¼Œä»¥åçš„å°è½¦å®éªŒä¸­å¯ä»¥é€šè¿‡å®ƒæ¥åˆ¤æ–­å°è½¦ç°åœ¨æ˜¯åœ¨ä¸Šå¡è¿˜æ˜¯åœ¨å¹³åœ°ï¼Œå¦‚æœåœ¨ä¸Šå¡ï¼Œå°±åŠ å¤§é©¬è¾¾çš„è¾“å‡ºã€‚å—¯ï¼Œåº”è¯¥æ˜¯è¿™æ ·ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ11-Uå‹å…‰ç‚¹ä¼ æ„Ÿå™¨","url":"/posts/816458215/","content":"\n\nå‰è¨€æœ¬ç¯‡å®éªŒå’Œä¸Šç¯‡åšå®¢çš„å®éªŒç›¸ä¼¼ï¼Œæˆ‘ä»¬è¦å­¦ä¹ ç”¨Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ¥æ§åˆ¶åŒè‰²LED\n\nè¿™éƒ½æ˜¯åŸºç¡€å®éªŒä¸­ä¸å¯æˆ–ç¼ºçš„å†…å®¹ï¼Œå› ä¸ºåç»­æˆ‘ä»¬éœ€è¦å­¦ä¼šäº¤å‰ä½¿ç”¨ä¸åŒçš„ä¼ æ„Ÿå™¨æ¥æ§åˆ¶æ›´å¤æ‚çš„ç”µè·¯ã€‚é‚£äº›æ‰æ˜¯å­¦ä¹ æ ‘è“æ´¾åŸºç¡€å®éªŒçœŸæ­£çš„æ„ä¹‰\nä¸ç®¡æ€æ ·ï¼Œè¿˜æ˜¯ç»§ç»­åŠªåŠ›å§ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nUå‹å…‰ç”µä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šUå‹å…‰ç”µä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ˜¯ä¸€ç§çº¢å¤–æ„Ÿåº”å…‰ç‚¹äº§å“ã€‚å…¶æœ‰çº¢å¤–å‘å°„ç®¡å’Œæ¥æ”¶ç®¡ï¼Œåˆ†åˆ«ä½äºUå‹æ§½çš„ä¸¤ä¾§ï¼Œä»¥æ­¤å½¢æˆä¸€å…‰è½´ã€‚å½“æ£€æµ‹åˆ°ç‰©ä½“ç»è¿‡Uå‹æ§½å¹¶é˜»æ–­å…‰è½´æ—¶ï¼Œå°±èƒ½äº§ç”Ÿå¯¹åº”çš„ç”µä¿¡å·ã€‚\n2.1ç”µè·¯å›¾ä»¥ä¸‹æ˜¯Uå‹å…‰ç”µä¼ æ„Ÿå™¨æ¨¡å—çš„ç”µè·¯å›¾\n\næ— éšœç¢ç‰©é˜»æŒ¡æ—¶ï¼ŒD1\\D2-LEDéƒ½äº®èµ·ï¼ŒOUTç®¡è„šæ£€æµ‹åˆ°ä½ç”µå¹³0\næœ‰éšœç¢ç‰©é˜»æŒ¡æ—¶ï¼ŒD1-LEDç†„ç­ï¼ŒOUTç®¡è„šæ£€æµ‹åˆ°é«˜ç”µå¹³1\n\n\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nUå‹å…‰ç”µä¼ æ„Ÿå™¨\n\n\n\nGPIO 0\nGPIO 17\nOUT\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n\nä¸è¿‡æˆ‘æ‰‹ä¸Šçš„è¿™ä¸ªä¼ æ„Ÿå™¨å¹¶æ²¡æœ‰ä¸¤ä¸ªæŒ‡ç¤ºç¯ã€‚åªæœ‰ä¸€ä¸ªï¼Œè¯¥æŒ‡ç¤ºç¯åœ¨ä¼ æ„Ÿå™¨è¢«é˜»éš”çš„æ—¶å€™ä¼šå˜æš—\n\n\n3.ä»£ç ç¤ºä¾‹//Uå‹å…‰ç”µä¼ æ„Ÿå™¨å®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_LBPin\t\t0  // Uå‹å…‰ç”µä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1  // çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2  // ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰// åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(int color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); // çº¢è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); // ç»¿è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\t\tif (color == 0)&#123;                // ç‚¹äº®çº¢è‰²LEDç¯\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == 1)&#123;          // ç‚¹äº®ç»¿è‰²LEDç¯\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;&#125;// æœ‰ç‰©ä½“æŒ¡ä½æ—¶ï¼Œæ‰“å°å‡ºæç¤ºä¿¡æ¯void makerobo_Print(int x)&#123;\tif ( x == 0 )&#123;\t\tprintf(&quot;makerobo Light was blocked!\\n&quot;);\t&#125;\telse&#123;\t\tprintf(&quot;clear!\\n&quot;);// æ²¡æœ‰æŒ¡ä½\t&#125;&#125;// ä¸»å‡½æ•°int main()&#123;       //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //Uå‹å…‰ç”µä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_LBPin, INPUT);\tint clb_temp=0;\twhile(1)&#123;\t\t//Uå‹å…‰ç”µä¼ æ„Ÿå™¨æœ‰æ— ç‰©ä½“æŒ¡ä½ä¿¡æ¯æ£€æµ‹\t\tif ( digitalRead(makerobo_LBPin) == 0 )&#123;  \t\t\tclb_temp = 1;//ä½ç”µå¹³ï¼Œä»£è¡¨æ²¡æœ‰é˜»æŒ¡\t\t&#125;\t\tif ( digitalRead(makerobo_LBPin) == 1 )&#123;\t\t\tclb_temp = 0;//é«˜ç”µå¹³ï¼Œä»£è¡¨è¢«é˜»æŒ¡\t\t&#125;\t\tdouble_colorLED(clb_temp); // æ§åˆ¶åŒè‰²LEDç¯æ˜¾ç¤º\t\tmakerobo_Print(clb_temp);  // ä¿¡æ¯æ‰“å°\t&#125;\treturn 0;&#125;\n\n3.1LinuxGCCç¼–è¯‘ä»£ç åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 11photoeletricsensor.c -o TEST -lwiringPi\n\næ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå½“ä¼ æ„Ÿå™¨è¢«é˜»æŒ¡æ—¶ï¼ŒåŒè‰²LEDå˜çº¢ï¼Œå±å¹•æ‰“å°makerobo Light was blocked!\nä¸è¢«é˜»æŒ¡æ—¶ï¼ŒåŒè‰²LEDäº®ç»¿ç¯ï¼Œå±å¹•æ‰“å°clear\n\n3.2 æ•ˆæœ\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ10-å¹²ç°§ç®¡ä¼ æ„Ÿå™¨å®éªŒ","url":"/posts/722925156/","content":"\n\nå‰è¨€å¥½åƒæ²¡å•¥å¯ä»¥è¯´çš„ï¼Œç›´æ¥å¼€å§‹è¿›å…¥ä»Šå¤©çš„å®éªŒå†…å®¹å§\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nå¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LED\nè·³çº¿è‹¥å¹²\n\n\nä¸Šï¼šå¹²ç°§ç®¡ä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ä¹Ÿæ˜¯ä¸€ç§ç”¨äºæ£€æµ‹ç£åœºçš„ä¼ æ„Ÿå™¨ã€‚åœ¨å¸¸ç”¨çš„ç¨‹æ§äº¤æ¢æœºã€å¤å°æœºã€æ´—è¡£æœºã€ç”µå†°ç®±ã€ç…§ç›¸æœºã€æ¶ˆæ¯’ç¢—æŸœã€é—¨ç£ã€çª—ç£ã€ç”µç£ç»§ç”µå™¨ã€ç”µå­è¡¡å™¨ã€æ¶²ä½è®¡ã€ç…¤æ°”è¡¨ã€æ°´è¡¨ç­‰äº§å“ä¸­éƒ½å¾—åˆ°äº†å¾ˆå¥½çš„åº”ç”¨ã€‚\n\nä¸ªäººç†è§£ï¼šå¹²ç°§ç®¡ä¼ æ„Ÿå™¨çš„æ•ˆæœå’Œéœå°”å…ƒä»¶å¾ˆåƒï¼Œä¸è¿‡åè€…çš„ä½“ç§¯æ›´å°\nç¬”è®°æœ¬ç”µè„‘ä¸­å°±æœ‰éœå°”å…ƒä»¶ï¼Œç”¨äºæ£€æµ‹ç¬”è®°æœ¬å±å¹•çš„å¼€å…³ï¼Œå®ç°åˆç›–ä¼‘çœ çš„åŠŸèƒ½\n\n\nå¹²ç°§ç®¡æ˜¯å¹²å¼èˆŒç°§ç®¡çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§æœ‰è§¦ç‚¹çš„æ— æºç”µå­å¼€å…³å…ƒä»¶ï¼Œå…·æœ‰ç»“æ„ç®€å•ï¼Œä½“ç§¯å°ä¾¿äºæ§åˆ¶ç­‰ä¼˜ç‚¹ã€‚\n\nå…¶å¤–å£³ä¸€èˆ¬æ˜¯ä¸€æ ¹å¯†å°çš„ç»ç’ƒç®¡ï¼Œç®¡ä¸­è£…æœ‰ä¸¤ä¸ªé“è´¨çš„å¼¹æ€§ç°§ç‰‡ç”µæ¿ï¼Œè¿˜çŒæœ‰ä¸€ç§å«é‡‘å±çš„æƒ°æ€§æ°”ä½“ã€‚å¹³æ—¶ï¼Œç»ç’ƒç®¡ä¸­çš„ä¸¤ä¸ªç°§ç‰‡æ˜¯åˆ†å¼€çš„ã€‚\n\nå½“æœ‰ç£æ€§ç‰©è´¨é è¿‘ç»ç’ƒç®¡æ—¶ï¼Œåœ¨ç£åœºç£åŠ›çº¿çš„ä½œç”¨ä¸‹ï¼Œç®¡å†…çš„ä¸¤ä¸ªç°§ç‰‡è¢«ç£åŒ–è€Œäº’ç›¸å¸å¼•æ¥è§¦ï¼Œç°§ç‰‡å°±ä¼šå¸åˆåœ¨ä¸€èµ·ï¼Œä½¿ç»“ç‚¹æ‰€æ¥çš„ç”µè·¯è¿é€šã€‚\nå¤–ç£åŠ›æ¶ˆå¤±åï¼Œä¸¤ä¸ªç°§ç‰‡ç”±äºæœ¬èº«çš„å¼¹æ€§è€Œåˆ†å¼€ï¼Œçº¿è·¯ä¹Ÿå°±æ–­å¼€äº†ã€‚\nå› æ­¤ï¼Œä½œä¸ºä¸€ç§åˆ©ç”¨ç£åœºä¿¡å·æ¥æ§åˆ¶çš„çº¿è·¯å¼€å…³å™¨ä»¶ï¼Œå¹²ç°§ç®¡å¯ä»¥ä½œä¸ºä¼ æ„Ÿå™¨ç”¨äºè®¡æ•°ã€é™ä½ç­‰ç­‰åœºæ™¯(åœ¨å®‰é˜²ç³»ç»Ÿä¸­ä¸»è¦ç”¨äºé—¨ç£ã€çª—ç£çš„åˆ¶ä½œ)ï¼ŒåŒæ—¶è¿˜è¢«å¹¿æ³›ä½¿ç”¨äºå„ç§é€šä¿¡è®¾å¤‡ä¸­ã€‚\nåœ¨å®é™…è¿ç”¨ä¸­ï¼Œé€šå¸¸ç”¨ç£é“æ§åˆ¶è¿™ä¸¤æ ¹é‡‘å±ç‰‡çš„æ¥é€šä¸å¦ï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºâ€œç£æ§ç®¡â€\n\n\n2.1ç”µè·¯å›¾ç”µè·¯å›¾ä¸­Reed Switch(å¹²ç°§ç®¡)éƒ¨åˆ†ï¼Œå…¶å®å°±æ˜¯åŸç†éƒ¨åˆ†æåˆ°çš„å¯†å°ç»ç’ƒç®¡ï¼Œå†…éƒ¨æœ‰ä¸¤ä¸ªé“ç‰‡\n\nå½“å¹²ç°§ç®¡éƒ¨åˆ†æ¥è§¦åˆ°ç£æ€§ç‰©ä½“æ—¶ï¼Œä¸¤ä¸ªé“ç‰‡å¸é™„åœ¨ä¸€èµ·ï¼Œç”µè·¯æ¥é€šï¼ŒDOç®¡è„šè¾“å‡ºä½ç”µå¹³ã€‚åŒæ—¶ç”µè·¯æ¥é€šï¼ŒD2 LEDç‚¹äº®\næ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©ä½“ï¼Œä¸¤ä¸ªé“ç‰‡æ–­å¼€ï¼Œç”µè·¯æ–­å¼€ï¼ŒDOç®¡è„šç›´è¿VCCï¼Œè¾“å‡ºé«˜ç”µå¹³\n\n\n2.2æ¥çº¿å›¾ç±»ä¼¼è¿™ç§é€šè¿‡ä¸€ä¸ªä¼ æ„Ÿå™¨æ¨¡å—æ¥æ§åˆ¶åŒè‰²LEDçš„å®éªŒæˆ‘ä»¬å·²ç»åšè¿‡å¥½å‡ ä¸ªäº†ã€‚å®ƒä»¬çš„æ¥çº¿æ–¹å¼åŸºæœ¬æ˜¯ä¸€æ ·çš„ğŸ‘\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nå¹²ç°§ç®¡\n\n\n\nGPIO 0\nGPIO 17\nDO\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\n\n\nå½“æ¥çº¿å®Œæ¯•åï¼ŒPWM-LEDæŒ‡ç¤ºç¯å¸¸äº®\n\nå³ä¾¿æ²¡æœ‰å¼€å¯æ§åˆ¶ç¨‹åºï¼Œå½“å¹²ç°§ç®¡æ£€æµ‹åˆ°ç£æ€§ç‰©ä½“æ—¶ï¼ŒDO-LEDæŒ‡ç¤ºç¯ä¹Ÿä¼šäº®èµ·\n\n3.ä»£ç ç¤ºä¾‹å’Œä¹‹å‰æ§åˆ¶åŒè‰²LEDçš„ä»£ç ç›¸åŒï¼Œæˆ‘ä»¬ä½¿ç”¨pinModeè®¾ç½®å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ä¸ºè¾“å…¥æ¨¡å¼ï¼Œå°†çº¢ç»¿LEDçš„ç®¡è„šéƒ½è®¾ç½®æˆè¾“å‡ºæ¨¡å¼\n\nå½“digitalReadæ£€æµ‹åˆ°0ï¼ˆä½ç”µå¹³ï¼‰æ—¶ï¼Œå°†åŒè‰²LEDè®¾ç½®ä¸ºçº¢è‰²\nå½“digitalReadæ£€æµ‹åˆ°1ï¼ˆé«˜ç”µå¹³ï¼‰æ—¶ï¼Œå°†åŒè‰²LEDè®¾ç½®æˆç»¿è‰²\n\n//å¹²ç°§ç®¡æ§åˆ¶åŒè‰²LEDå®éªŒ#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_ReedPin\t0 //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨ç®¡è„šå®šä¹‰#define makerobo_Rpin\t\t1 //çº¢è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰#define makerobo_Gpin\t\t2 //ç»¿è‰²LEDæ¨¡å—ç®¡è„šå®šä¹‰// åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(char* color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //çº¢è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //ç»¿è‰²LEDç®¡è„šè®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (color == &quot;makeroboRED&quot;)       //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (color == &quot;makeroboGREEN&quot;) //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Double color LED Error&quot;);&#125;int main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_ReedPin, INPUT);\tdouble_colorLED(&quot;makeroboGREEN&quot;);  //ç‚¹äº®ç»¿è‰²LEDæ¨¡å—\t\twhile(1)&#123;\t\t//å¹²ç°§ç®¡ä¼ æ„Ÿå™¨å»é™¤æŠ–åŠ¨å¤„ç†\t\tif(0 == digitalRead(makerobo_ReedPin))        &#123; //å¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\tdelay(10);       // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(0 == digitalRead(makerobo_ReedPin))&#123;\t\t\t\tdouble_colorLED(&quot;makeroboRED&quot;);\t   // ç‚¹äº®çº¢è‰²LEDç¯\t\t\t\tprintf(&quot;Detected Magnetic Material!\\n&quot;);// æ‰“å°å‡ºæ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\t&#125;\t\t&#125;\t\telse if(1 == digitalRead(makerobo_ReedPin))        &#123; // å¹²ç°§ç®¡ä¼ æ„Ÿå™¨æ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\tdelay(10);        // å»¶æ—¶å»æŠ–åŠ¨\t\t\tif(1 == digitalRead(makerobo_ReedPin))&#123;\t\t\t\twhile(!digitalRead(makerobo_ReedPin));\t\t\t\tdouble_colorLED(&quot;makeroboGREEN&quot;);   // ç‚¹äº®ç»¿è‰²LEDç¯\t\t\t\tprintf(&quot;No Detected Magnetic Material!\\n&quot;); // æ‰“å°å‡ºæ²¡æœ‰æ£€æµ‹åˆ°ç£æ€§ç‰©è´¨\t\t\t&#125;\t\t&#125;\t&#125;\treturn 0;&#125;\n\n\næ›´è¯¦ç»†çš„å‡½æ•°è§£é‡Šï¼Œå¯ä»¥å‚è€ƒä¹‹å‰å®éªŒ6~8çš„åšå®¢ğŸ‘‰ä¸“æ é“¾æ¥\n\n3.1ç¼–è¯‘ä»£ç åœ¨linuxæ§åˆ¶å°ä¸‹è¾“å…¥ä»¥ä¸‹è¯­å¥ï¼Œç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 10reedswitch.c -o TEST -lwiringPi\n\n3.1.1 GCCä¸­-WallæŒ‡ä»¤çš„ä½œç”¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘åœ¨ç¼–è¯‘ä»£ç çš„æ—¶å€™å°±æ²¡æœ‰ä½¿ç”¨-WallæŒ‡ä»¤ï¼Œä½†ç¨‹åºä¾æ—§ç¼–è¯‘æˆåŠŸäº†\nå®é™…ä¸Šï¼Œ-WallæŒ‡ä»¤çš„ä½œç”¨æ˜¯è®©GCCç¼–è¯‘å™¨æ˜¾ç¤ºç¨‹åºçš„è­¦å‘Š\n\nç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ£€æŸ¥å‡ºé”™è¯¯æ—¶ï¼Œä¼šç»ˆæ­¢ç¼–è¯‘\nç¼–è¯‘å™¨åœ¨ç¨‹åºä¸­æ£€æŸ¥å‡ºè­¦å‘Šæ—¶ï¼Œä¾æ—§èƒ½ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶\n\nwindowsç³»ç»Ÿä¸­çš„VSç¼–è¯‘å™¨ä¸‹ï¼Œä¹Ÿæœ‰é”™è¯¯&#x2F;è­¦å‘Šä¸¤ç§æŠ¥é”™æ–¹å¼\n\nä¹‹å‰æˆ‘å°±æ²¡æœ‰å¼„æ˜ç™½Linuxç¯å¢ƒä¸‹è¿™ä¸¤ä¸ªä¹‹é—´çš„åŒºåˆ«ï¼Œå¯¼è‡´æˆ‘è®¤ä¸ºgccç¼–è¯‘å™¨ä¸­ä¸æ”¯æŒç”¨==ç›´æ¥æ¯”è¾ƒå¸¸é‡å­—ç¬¦ä¸²ï¼ˆç„¶åå°±æŠŠå®ƒæ”¹æˆäº†strcmpï¼Œå½“ç„¶è¿™æ ·ä¹Ÿæ²¡é”™å“ˆï¼‰\n\nå¦‚æœæˆ‘ä»¬åœ¨ç¼–è¯‘çš„æ—¶å€™å»æ‰-WallæŒ‡ä»¤ï¼Œå°±ä¸ä¼šæ˜¾ç¤ºè¿™ä¸¤ä¸ªè­¦å‘Š\n\n\næ›´å¤šå…³äº-WallæŒ‡ä»¤çš„çŸ¥è¯†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ä½dalaoçš„åšå®¢å­¦ä¹ ä¸€äºŒğŸ‘‰ä¼ é€é—¨\n\n\n3.2å®éªŒæ•ˆæœ./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼ŒæŸ¥çœ‹å®éªŒç»“æœ\n\næ£€æµ‹åˆ°ç£æ€§ç‰©è´¨æ—¶ï¼Œå±å¹•æ‰“å°Detected Magnetic Material!\næ²¡æœ‰æ£€æµ‹åˆ°çš„æ—¶å€™ï¼Œæ‰“å°No Detected Magnetic Material!\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒåˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¸Œæœ›å¯¹ä½ å­¦ä¹ æ ‘è“æ´¾çš„æ“ä½œæœ‰ä¸€äº›å¸®åŠ©\n\nå­¦æ ¡é«˜æ•°å’Œå¤§ç‰©æ¬ ä¸‹çš„å­¦ä¹ å€ºç»ˆäºè¡¥ä¸Šäº†ï¼Œå¯ä»¥æ‘¸ğŸŸäº†\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ12-PCF8591æ¨¡æ•°è½¬æ¢å™¨","url":"/posts/2733996002/","content":"\n\nå‰è¨€ç”±äºæ ‘è“æ´¾ä¸èƒ½ç›´æ¥è¯»å–æ¨¡æ‹Ÿä¿¡å·ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ¬ç¯‡åšå®¢ä¸­æåˆ°çš„æ¨¡æ•°è½¬æ¢å™¨æ¥æ›¿ä»£å®ç°è¯»å–æ¨¡æ‹Ÿä¿¡å·çš„åŠŸèƒ½ã€‚\næœ¬ç¯‡åšå®¢çš„è¿™ä¸ªæ¨¡æ•°è½¬æ¢å™¨æ¯”ä¹‹å‰çš„æ¨¡å—å¤æ‚å¾ˆå¤šï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ­¥ä¸€æ­¥å¼„æ˜ç™½å®ƒçš„åŸç†ï¼Œæ‰èƒ½çœŸæ­£ç†è§£å¦‚ä½•ä½¿ç”¨è¿™ä¸ªå°ä¸œè¥¿\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nåŒè‰²LEDæ¨¡å—ï¼ˆå…ƒè€çº§æœ‹å‹ï¼‰\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—\nä¸€äº›è·³çº¿\nä¸€å­—æˆ–è€…åå­—èºä¸åˆ€ğŸ› \n\n\nä¸Šï¼šPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†2.0 å…ƒä»¶ä»‹ç»PCF8591æ˜¯ä¸€ä¸ªå•ç‰‡é›†æˆã€å•ç‹¬ä¾›ç”µã€ä½åŠŸè€—ã€8-bit CMOSæ•°æ®é‡‡é›†å…ƒä»¶ã€‚\n\nPCF8591å…·æœ‰4ä¸ªæ¨¡æ‹Ÿè¾“å…¥ã€1ä¸ªæ¨¡æ‹Ÿè¾“å‡ºå’Œ1ä¸ªä¸²è¡ŒI2Cæ€»çº¿æ¥å£ã€‚\nå®ƒçš„3ä¸ªåœ°å€å¼•è„šA0, A1å’ŒA2å¯ç”¨äºç¡¬ä»¶åœ°å€ç¼–ç¨‹ï¼Œä»è€Œå…è®¸ä½¿ç”¨å¤šè¾¾8ä¸ªé“¾æ¥åˆ°I2Cæ€»çº¿çš„è®¾å¤‡ï¼Œè€Œæ— éœ€é¢å¤–çš„ç¡¬ä»¶ã€‚\nåœ¨PCF8591å™¨ä»¶ä¸Šè¾“å…¥è¾“å‡ºçš„åœ°å€ã€æ§åˆ¶å’Œæ•°æ®ä¿¡å·éƒ½æ˜¯é€šè¿‡åŒçº¿åŒå‘I2Cæ€»çº¿ä»¥ä¸²è¡Œçš„æ–¹å¼è¿›è¡Œä¼ è¾“ã€‚\n\nè¯¥å…ƒä»¶çš„åŠŸèƒ½åŒ…æ‹¬æ¨¡æ‹Ÿè¾“å…¥å¤šè·¯å¤ç”¨ï¼Œç‰‡ä¸Šè·Ÿè¸ªå’Œä¿æŒåŠŸèƒ½ï¼Œ8ä½æ¨¡æ•°è½¬æ¢å’Œ8ä½æ•°æ¨¡è½¬æ¢ã€‚æœ€å¤§è½¬æ¢ç‡ç”±I2Cæ€»çº¿çš„æœ€å¤§é€Ÿåº¦å†³å®šã€‚\n2.1 i2cæ€»çº¿\ni2cæ€»çº¿æ˜¯ç”±é£åˆ©æµ¦å…¬å¸å¼€å‘çš„ä¸€ç§ç®€å•ã€åŒå‘äºŒçº¿åˆ¶åŒæ­¥ä¸²è¡Œæ€»çº¿ã€‚å®ƒåªéœ€è¦ä¸¤æ ¹çº¿å³å¯åœ¨è¿æ¥äºæ€»çº¿ä¸Šçš„å™¨ä»¶ä¹‹é—´ä¼ é€ä¿¡æ¯ã€‚\n\né£åˆ©æµ¦å®˜æ–¹æœ‰ä¸€ä¸ªå…³äºPCF8591çš„è¯¦ç»†ä»‹ç»æ–‡æ¡£ï¼Œä¸è¿‡å®ƒæ˜¯è‹±è¯­çš„ã€‚æˆ‘ä¼šä¸Šä¼ åˆ°giteeä»“åº“é‡Œé¢åˆ†äº«ç»™å¤§å®¶ï¼Œä»“åº“é“¾æ¥åœ¨å¼€å¤´ä»‹ç»è¿‡äº†ğŸ¤¦â€â™‚ï¸å›åˆ°å¼€å¤´\n\n\ni2cæ€»çº¿ç³»ç»Ÿä¸­çš„æ¯ä¸ªPCF8591è®¾å¤‡é€šè¿‡å‘è¯¥è®¾å¤‡å‘é€æœ‰æ•ˆåœ°å€è€Œè¢«æ¿€æ´»ã€‚åœ°å€ç”±å›ºå®šéƒ¨åˆ†å’Œå¯ç¼–ç¨‹éƒ¨åˆ†ç»„æˆã€‚å¯ç¼–ç¨‹éƒ¨åˆ†å¿…é¡»æŒ‰ç…§åœ°å€å¼•è„šA0ï¼ŒA1ï¼ŒA2è¿›è¡Œè®¾ç½®ã€‚åœ°å€å¿…é¡»ä»¥é‚®å¯„æ–¹å¼å‘é€ã€‚\nåœ¨i2cæ€»çº¿åè®®ä¸­ï¼Œåœ¨å¯åŠ¨æ¡ä»¶ä¹‹åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œåœ°å€å­—èŠ‚çš„æœ€åä¸€ä¸ªä½æ˜¯è¯»&#x2F;å†™ä½ï¼Œå®ƒè®¾ç½®äº†ä¸‹åˆ—æ•°æ®ä¼ è¾“çš„æ–¹å‘ã€‚\n\n2.2 ç¬¬ä¸€å­—èŠ‚PCF8591é‡‡ç”¨å…¸å‹çš„I2Cæ€»çº¿æ¥å£å™¨ä»¶å¯»å€æ–¹æ³•ï¼Œå³æ€»çº¿åœ°å€ç”±å™¨ä»¶åœ°å€ã€å¼•è„šåœ°å€å’Œæ–¹å‘ä½ç»„æˆã€‚\né£åˆ©æµ¦å…¬å¸è§„å®šA&#x2F;Då™¨ä»¶åœ°å€ä¸º1001ï¼Œå¼•è„šåœ°å€ä¸ºA2A1A0ï¼Œå…¶å€¼ç”±ç”¨æˆ·é€‰æ‹©ã€‚å› æ­¤I2Cç³»ç»Ÿä¸­æœ€å¤šå¯æ¥2^3^ä¸ªå…·æœ‰I2Cæ€»çº¿æ¥å£çš„A&#x2F;Då™¨ä»¶ã€‚åœ°å€çš„æœ€åä¸€ä½ä¸ºæ–¹å‘ä½R&#x2F;Lï¼Œå½“ä¸»æ§å™¨å¯¹A&#x2F;Då™¨ä»¶è¿›è¡Œå†™æ“ä½œæ—¶ä¸º0ï¼Œè¿›è¡Œè¯»æ“ä½œæ—¶ä¸º1ã€‚\næ€»çº¿æ“ä½œæ—¶ï¼Œç”±å™¨ä»¶åœ°å€ã€å¼•è„šåœ°å€å’Œæ–¹å‘ä½ç»„æˆçš„ä»åœ°å€ä¸ºä¸»æ§å™¨å‘é€çš„ç¬¬ä¸€å­—èŠ‚ã€‚\n2.3 æ§åˆ¶å­—èŠ‚å‘é€åˆ°PCF8591å™¨ä»¶çš„ç¬¬äºŒä¸ªå­—èŠ‚å°†è¢«å­˜å‚¨åœ¨å…¶æ§åˆ¶å¯„å­˜å™¨ä¸­ï¼Œå¹¶ä¸”éœ€è¦æ§åˆ¶å™¨ä»¶æ¥å®ç°åŠŸèƒ½ã€‚\n\n\n\nD1ã€D0 ä¸¤ä½æ˜¯A&#x2F;Dé€šé“ç¼–å·ï¼š00é€šé“0ï¼Œ01é€šé“1ï¼Œ10é€šé“2ï¼Œ11é€šé“3\nD2 è‡ªåŠ¨å¢é‡é€‰æ‹©ï¼ˆ0ä¸ºç¦æ­¢è‡ªåŠ¨å¢é‡ï¼Œ1ä¸ºå…è®¸è‡ªåŠ¨å¢é‡ï¼‰ï¼Œå¦‚æœå…è®¸è‡ªåŠ¨å¢é‡ï¼Œåˆ™åœ¨æ¯æ¬¡A&#x2F;Dè½¬æ¢åï¼Œé€šé“ç¼–å·ä¼šè‡ªåŠ¨é€’å¢ã€‚\nD3 ç‰¹å¾ä½ï¼šå›ºå®šå€¼ä¸ºï¼š0ã€‚\nD5ã€D4 æ¨¡æ‹Ÿé‡è¾“å…¥é€‰æ‹©ï¼š00ä¸ºå››è·¯å•ç«¯è¾“å…¥ã€01ä¸ºä¸‰è·¯å·®åˆ†è¾“å…¥ã€10ä¸ºä¸¤è·¯å•ç«¯ä¸ä¸€è·¯å·®åˆ†è¾“å…¥ã€11ä¸ºä¸¤è·¯å·®åˆ†è¾“å…¥ã€‚\nD6 ä½¿èƒ½æ¨¡æ‹Ÿè¾“å‡ºAOUTæœ‰æ•ˆï¼ˆ1ä¸ºæœ‰æ•ˆï¼Œ0ä¸ºæ— æ•ˆï¼‰ã€‚\nD7 ç‰¹å¾ä½ï¼šå›ºå®šå€¼ä¸ºï¼š0ã€‚\n\nä¸Šè¿°å†…å®¹å‚è€ƒ@Makerå¼ å¤§ä½¬çš„åšå®¢ğŸ‘‰ä¼ é€é—¨\n\næ§åˆ¶å¯„å­˜å™¨çš„é«˜åŠå­—èŠ‚ç”¨äºæ¨¡æ‹Ÿè¾“å‡ºï¼Œå¹¶å°†æ¨¡æ‹Ÿè¾“å…¥ç¼–ç¨‹ä¸ºå•ç«¯æˆ–å·®åˆ†è¾“å…¥ã€‚ä¸‹åŠå­—èŠ‚é€‰æ‹©ç”±ä¸ŠåŠå­—èŠ‚å®šä¹‰çš„ä¸€ä¸ªæ¨¡æ‹Ÿè¾“å…¥é€šé“ã€‚å¦‚æœè®¾ç½®äº†è‡ªåŠ¨å¢åŠ æ ‡å¿—ï¼Œåˆ™åœ¨æ¯æ¬¡A&#x2F;Dè½¬æ¢åï¼Œé€šé“ç¼–å·ä¼šè‡ªåŠ¨é€’å¢ã€‚\n\n\næ›´å¤šå…³äºi2cæ€»çº¿çš„çŸ¥è¯†ï¼Œå¯ä»¥æŸ¥çœ‹ç™¾åº¦ç™¾ç§‘çš„è¯æ¡ğŸ‘‰æŸåº¦\n\n2.4 æ¨¡å—ç”µè·¯åœ¨æœ¬æ¬¡å®éªŒä¸­ï¼ŒAIN0ï¼ˆæ¨¡æ‹Ÿè¾“å…¥0ï¼‰ç«¯å£ç”¨äºæ¥æ”¶æ¥è‡ªç”µä½è®¡æ¨¡å—çš„æ¨¡æ‹Ÿä¿¡å·ï¼ŒAOUTï¼ˆæ¨¡æ‹Ÿè¾“å‡ºï¼‰ç”¨äºå°†æ¨¡æ‹Ÿä¿¡å·è¾“å‡ºåˆ°åŒè‰²LEDæ¨¡å—ï¼Œç”¨äºæ”¹å˜LEDçš„äº®åº¦\n\nå¦‚æœä½ æœ‰æ³¨æ„çœ‹ç”µè·¯å›¾çš„è¯ï¼Œä½ ä¼šå‘ç°AOUTä¸Šé“¾æ¥äº†ä¸€ä¸ªD4-LEDï¼Œå®ƒä¹Ÿä¼šæ¥æ”¶æ¨¡æ‹Ÿè¾“å‡ºä¿¡å·ï¼ŒåŒæ­¥æ”¹å˜äº®åº¦\n\nè€Œåœ¨æˆ‘æ‰‹å¤´ä¸Šçš„æ¨¡å—ï¼ŒD2-LEDå°±æ˜¯ä¼šåŒæ­¥æ”¹å˜äº®åº¦çš„ï¼Œåæ–‡ä¼šæåˆ°\n\n\nåœ¨å®éªŒä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠAINä¸Šçš„ç”µä½å¸½æ‹”æ‰\n\n2.5 ç”µè·¯æ¥çº¿\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nR(ä¸­é—´)\n*\nAOUT\n\n\nGND(-)\nGND\nGND\n\n\nG(S)\n*\n*\n\n\n\næ‹å‡ºæ¥çš„æ¥çº¿å›¾å¥½åƒæœ‰äº¿ç‚¹ç‚¹ä¹±ğŸ˜‚\n\næ­£å¸¸æ¥çº¿åï¼Œä¸»æ¿ä¸Šçš„D1-LEDä¼šäº®èµ·\n\næˆ‘ä»¬å¯ä»¥æ ¹æ®åŸç†å›¾åˆ©ç”¨Tå‹è½¬æ¥æ¿æ¥è¿æ¥æ¨¡æ•°è½¬æ¢å™¨å’ŒåŒè‰²LEDï¼Œä¹Ÿå¯ä»¥ç”¨è¿™ç§åŒæ¯å¤´çš„çº¿ç›´æ¥è¿æ¥AOUTç«¯å£å’ŒåŒè‰²LEDçš„ä¸­é—´ç®¡è„š\n\n\n3.ç¨‹åºæ§åˆ¶3.1 åœ¨æ ‘è“æ´¾ä¸­å¼€å¯I2Cé€šè¿‡VNCæ‰“å¼€æ ‘è“æ´¾çš„æ¡Œé¢ï¼Œç‚¹å‡»å¼€å§‹-é¦–é€‰é¡¹-Raspberry Pi Configuration-Interfacesï¼Œæ‰“å¼€I2Cçš„å¼€å…³enable\n\n3.2 ä»£ç ç¤ºä¾‹//PCF8591æ¨¡æ•°è½¬æ¢å™¨#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;//è¿™ä¸ªå¤´æ–‡ä»¶æ˜¯åŒ…å«åœ¨åº“ä¸­çš„#define makerobo_PCF  120  // åŸºç¡€ç®¡è„š120// ä¸»å‡½æ•°int main ()&#123;\tint pcf_value ;// å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨AINçš„è¾“å…¥å€¼\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\tpcf8591Setup (makerobo_PCF, 0x48);    // åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\twhile(1)\t&#123;\t\tpcf_value = analogRead  (makerobo_PCF + 0);\t\t// è·å–AIN0ä¸Šçš„å€¼ï¼Œæ’ä¸Šè·³çº¿å¸½ä¹‹åï¼Œé‡‡ç”¨çš„æ˜¯å†…éƒ¨çš„ç”µä½å™¨ï¼›\t\tprintf(&quot;%d\\n&quot;, pcf_value);        // æ‰“å°å‡ºè¯¥å€¼            \t\tanalogWrite (makerobo_PCF + 0, pcf_value);         // æ§åˆ¶AOUTè¾“å‡ºç”µå¹³æ§åˆ¶LEDç¯\t\tdelay (10) ; // å»¶æ—¶10ms\t&#125; \treturn 0 ;&#125;\n\nå¤´æ–‡ä»¶&lt;pcf8591.h&gt;åœ¨wiringPiçš„å®˜æ–¹åº“ä¸­ï¼Œå¯ä»¥æŸ¥æ‰¾åˆ°å…³äºPCF8591ä½¿ç”¨çš„ç›¸å…³å‡½æ•°ğŸ‘‰ç‚¹æˆ‘\n\n\n3.3 ç¼–è¯‘ä»£ç åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼Œç¼–è¯‘å‡ºå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 12pcf8591.c -o TEST -lwiringPi\n\n3.4 è¿è¡Œç»“æœåœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŠŠAIN0å’ŒINPUT0ä¹‹é—´çš„è·³çº¿å¸½è£…ä¸Š\néšå./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºAIN0ç®¡è„šä¸Šè·å–çš„å€¼\n\nä½†æ˜¯ä¸ç®¡æˆ‘å’‹æ‹§æ¨¡å—ä¸Šçš„ç™½è“ç”µä½è®¡ï¼Œè¿™ä¸ªæ•°å­—éƒ½ä¸åŠ¨\nåé¢å‘ç°è¿™ä¸ªä»£ç å¿…é¡»è¦åœ¨æ ‘è“æ´¾çš„OSé‡Œé¢è·‘ï¼Œæ‰èƒ½å®ç°æ§åˆ¶åŠŸèƒ½ï¼Œåº”è¯¥å’Œ3.1ä¸­çš„I2Cæ€»çº¿åŠŸèƒ½æœ‰å…³\n\näºæ˜¯åœ¨Geanyç¼–è¯‘å™¨ä¸­ç¼–è¯‘ä»£ç ï¼Œå¼€å§‹æ‰§è¡Œ\n\næ‹§åŠ¨ç™½è“ç”µä½è®¡ï¼Œå±å¹•ä¸Šæ¥æ”¶åˆ°çš„å€¼ä¼šä¸æ–­å˜åŒ–ï¼ŒåŒæ—¶LEDå°ç¯å’Œä¸»æ¿ä¸Šçš„D2-LEDçº¢è‰²äº®åº¦ä¹Ÿä¼šäº§ç”Ÿå˜åŒ–\n\n\nç»“è¯­æœ¬æ¬¡å®éªŒå¯¹äºæˆ‘è¿™ä¸ªæ¨¡ç”µå°ç™½æ¥è¯´å°±æ™•ä¹ä¹çš„ï¼Œè™½ç„¶æŸ¥æ‰¾äº†ä¸€äº›I2Cç›¸å…³çš„æ–‡æ¡£å’Œåšå®¢ï¼Œä½†è¿˜æ˜¯æ²¡å¤ªå¼„æ˜ç™½è¿™ä¸ªæ¨¡å—çš„å…·ä½“åŸç†å’Œè¿›é˜¶ä½¿ç”¨ã€‚\n\nä¸è¿‡é€šè¿‡æœ¬æ¬¡è¿™ä¸ªç®€å•çš„æ§åˆ¶åŒè‰²LEDçš„å®éªŒï¼Œè‡³å°‘æˆ‘çŸ¥é“äº†å¯ä»¥é€šè¿‡ç”µä½è®¡æ¥è°ƒèŠ‚AOUTå€¼ï¼Œæƒ³å¿…åœ¨æ›´å¤æ‚çš„å®éªŒä¸­ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥æ‰®æ¼”ä¸ä¸€æ ·çš„è§’è‰²ï¼\né‚£å°±åªèƒ½æœŸå¾…æœªæ¥æˆ‘ä¼šç”¨åˆ°å®ƒå•¦ï¼ï¼ˆæˆ‘æ€ä¹ˆæ„Ÿè§‰ä¸ä¼šå‘¢ï¼Ÿï¼‰\n\n\nçº¯å°ç™½ï¼Œæœ¬ç¯‡åšå®¢å¯èƒ½æœ‰å¾ˆå¤§çš„çº°æ¼ï¼Œè¿˜è¯·å„ä½å¤§ä½¬æ— æƒ…æŒ‡æ­£ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ08-éœ‡åŠ¨å¼€å…³","url":"/posts/2318722711/","content":"\n\nå‰è¨€ä»Šå¤©æŠ˜è…¾vimç¼–è¾‘å™¨æŠ˜è…¾äº†è€ä¹…ï¼Œæˆ‘åªæ˜¯æƒ³å®ç°åœ¨vimç¼–è¾‘å™¨ä¸­å¯ä»¥å¤åˆ¶ä»£ç åˆ°windowsç”µè„‘ä¸‹ï¼Œæ–¹ä¾¿æˆ‘å†™åšå®¢ï¼Œä½†æ˜¯å’‹å¼„éƒ½æä¸å®šï¼Œæ”¾å¼ƒäº†ï¼Œè¿˜æ˜¯ç”¨æ ‘è“æ´¾çš„ç³»ç»Ÿæ¥å¤åˆ¶å§\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næŒ¯åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—\nåŒè‰²LEDæ¨¡å—\nè·³çº¿ä¸€å †\n\n\nä¸Šï¼šåŒè‰²LEDæ¨¡å—ï¼›ä¸‹ï¼šéœ‡åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—\næŒ¯åŠ¨ä¼ æ„Ÿå™¨æ¨¡å—å’Œå€¾æ–œä¼ æ„Ÿå™¨æ¨¡å—å¾ˆåƒï¼Œéƒ½æ˜¯é€šè¿‡ç‰©ç†ç»“æ„æ¥åˆ¤æ–­å½“å‰çš„çŠ¶æ€ã€‚è€Œä¸”å®ƒä¹Ÿæœ‰PWR-LEDå’ŒDO-LEDä¸¤ä¸ªæŒ‡ç¤ºç¯\n\n2.å®éªŒåŸç†æŒ¯åŠ¨å¼€å…³ä¼ æ„Ÿå™¨ç”¨çš„æ˜¯å¸¸é—­å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨ï¼Œå¯ç”¨äºè·Ÿè¸ªæŒ¯åŠ¨è§¦å‘ä½œç”¨ï¼Œå¦‚é˜²ç›—æŠ¥è­¦ï¼Œåœ°éœ‡æŠ¥è­¦å’Œæ™ºèƒ½å°è½¦ã€‚ä¸å¸¸å¼€å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨ç›¸æ¯”ï¼Œå¸¸é—­å‹æŒ¯åŠ¨ä¼ æ„Ÿå™¨è§¦å‘æ—¶é—´é•¿ï¼Œå¯ä»¥ç”¨äºé©±åŠ¨ç»§ç”µå™¨æ¨¡å—\n\nè¯¥æ¨¡å—é‡‡ç”¨å¸¸å¼€é«˜çµæ•åº¦éœ‡åŠ¨å¼€å…³ã€‚å¼€å…³åœ¨é™æ­¢æ™‚ä¸ºå¼€è·¯OFFçŠ¶æ€ï¼Œå½“å—åˆ°å¤–åŠ›ç¢°è§¦è€Œè¾¾åˆ°ç›¸åº”éœ‡åŠ¨åŠ›æ—¶ï¼Œæˆ–ç§»åŠ¨é€Ÿåº¦è¾¾åˆ°é€‚å½“ç¦»(å)å¿ƒåŠ›æ—¶ï¼Œå¯¼ç”µæ¥è„šä¼šäº§ç”Ÿç¬é—´å¯¼é€šå‘ˆç¬é—´ONçŠ¶æ€ï¼›å½“å¤–åŠ›æ¶ˆå¤±æ™‚ï¼Œå¼€å…³æ¢å¤ä¸ºå¼€è·¯OFFçŠ¶æ€ã€‚å¯ç”¨äºå„ç§éœ‡åŠ¨è§¦å‘ä½œç”¨ï¼ŒæŠ¥ç›—æŠ¥è­¦ï¼Œæ™ºèƒ½å°è½¦ï¼Œç”µå­ç§¯æœ¨ç­‰ã€‚ä¼ æ„Ÿå™¨ç‰¹è®¾M3å›ºå®šå®‰è£…å­”ï¼Œè°ƒèŠ‚æ–¹å‘ä¸å›ºå®šæ–¹ä¾¿æ˜“ç”¨ï¼Œä½¿ç”¨å®½ç”µå‹LM393æ¯”è¾ƒå™¨ï¼Œä¿¡å·å¹²å‡€ï¼Œæ³¢å½¢å¥½ï¼Œé©±åŠ¨èƒ½åŠ›å¼ºï¼Œè¶…è¿‡15mAï¼Œé…å¯è°ƒç²¾å¯†ç”µä½å™¨è°ƒèŠ‚çµæ•åº¦ã€‚åœ¨æ­¤å®éªŒä¸­ï¼Œå°†åŒè‰²LEDæ¨¡å—è¿æ¥åˆ°Raspberry Piä½œä¸ºæŒ‡ç¤ºä½œç”¨ã€‚æ•²å‡»æˆ–æ•²å‡»æŒ¯åŠ¨ä¼ æ„Ÿå™¨æ—¶ï¼Œå®ƒå°†æ‰“å¼€åŒè‰²LEDå°†é—ªçƒçº¢è‰²ã€‚å†æ¬¡ç‚¹å‡»å®ƒï¼ŒLEDå°†å˜ä¸ºç»¿è‰²-æ¯æ¬¡æ•²å‡»æˆ–æ•²å‡»ä¸¤ç§é¢œè‰²ä¹‹é—´äº¤æ›¿é—ªçƒã€‚\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næŒ¯åŠ¨å¼€å…³\n\n\n\nGPIO 0\nGPIO 17\nDo\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nåŒè‰²LED\n\n\n\nGPIO 1\nGPIO 18\nR(ä¸­é—´)\n\n\nGND\nGND\nGND(-)\n\n\nGPIO 2\nGPIO 27\nG(S)\n\n\nå› ä¸ºæ¥å£å’Œå€¾æ–œå¼€å…³ä¸€æ¨¡ä¸€æ ·ï¼Œæ‰€ä»¥æ¥çº¿æ–¹å¼ä¹Ÿæ˜¯ä¸€æ ·çš„\n\nå®ç‰©æ¥çº¿å›¾è¿™é‡Œå°±ä¸æ”¾äº†ï¼Œå’Œå€¾æ–œå¼€å…³ä¸åŒçš„æ˜¯ï¼ŒæŒ¯åŠ¨å¼€å…³åœ¨æ¥ä¸Šåï¼Œä¸¤ä¸ªæŒ‡ç¤ºç¯éƒ½ä¼šäº®èµ·ï¼ŒæŒ¯åŠ¨è¯¥ä¼ æ„Ÿå™¨ï¼ŒDO-LEDä¼šé—ªåŠ¨\n\n\n3.ä»£ç ç¤ºä¾‹è€æ ·å­ï¼Œç»™å‡ºCè¯­è¨€çš„ä»£ç ç¤ºä¾‹\n\nè¿™é‡Œçš„wiringPiåº“å‡½æ•°åœ¨ä¸Šä¸¤æ¬¡çš„å®éªŒä¸­éƒ½æœ‰ä½¿ç”¨è¿‡ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹å®éªŒ6é‡Œçš„è§£é‡Š\n\n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_VibratePin\t0   // éœ‡åŠ¨ä¼ æ„Ÿå™¨#define makerobo_Rpin\t\t1   // çº¢è‰²LED PIN #define makerobo_Gpin\t\t2   // ç»¿è‰²LED PINint clb_tmp = 0;//å…¨å±€å˜é‡ç”¨äºæ¯”è¾ƒ//åŒè‰²LEDæ§åˆ¶å‡½æ•°void double_colorLED(int color)&#123;\tpinMode(makerobo_Rpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tpinMode(makerobo_Gpin, OUTPUT); //è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\tif (0 == color)             //ç‚¹äº®çº¢è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, HIGH);\t\tdigitalWrite(makerobo_Gpin, LOW);\t&#125;\telse if (1 == color)       //ç‚¹äº®ç»¿è‰²LEDç¯\t&#123;\t\tdigitalWrite(makerobo_Rpin, LOW);\t\tdigitalWrite(makerobo_Gpin, HIGH);\t&#125;\telse\t\tprintf(&quot;Makerobo Double color LED Error\\n&quot;); // åŒè‰²LEDé”™è¯¯&#125;// æ‰“å°ä¿¡æ¯,æ‰“å°å‡ºæŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„çŠ¶æ€\tvoid makerobo_Print(int x)&#123;\tif (x != clb_tmp)\t&#123;\t\tif (x == 0)\t\t\tprintf(&quot;...Makerobo ON\\n&quot;);\t\tif (x == 1)\t\t\tprintf(&quot;Makerobo OFF..\\n&quot;);\t\tclb_tmp = x;//å¤ä½x\t&#125;&#125;int main()&#123;\tint clb_status = 0;  //çŠ¶æ€å€¼\tint clb_tmp = 0;     //æ¯”è¾ƒå€¼\tint clb_value = 1;   //å½“å‰å€¼\t//wiringPiåˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;    //æŒ¯åŠ¨ä¼ æ„Ÿå™¨Pinè®¾ç½®ä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_VibratePin, INPUT);\t\twhile(1)&#123;\t\tclb_value = digitalRead(makerobo_VibratePin); //è·å–æŒ¯åŠ¨ä¼ æ„Ÿçš„å€¼\t\tif (clb_tmp != clb_value)\t\t&#123;\t//æŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„è¾“å‡ºå€¼å‘ç”Ÿæ”¹å˜\t\t\tclb_status ++;   //æŒ¯åŠ¨ä¼ æ„Ÿå™¨çŠ¶æ€åŠ 1\t\t\tif (clb_status &gt; 1)\t\t\t&#123;\t\t\t\t\t\t\t\tclb_status = 0; //çŠ¶æ€å‘ç”Ÿæ”¹å˜åˆ¤æ–­ï¼Œå¦‚æœå˜æˆ2äº†å¤ä½æˆ0\t\t\t&#125;\t\t\tdouble_colorLED(clb_status);  //æ§åˆ¶åŒè‰²LEDæ¨¡å—\t\t\tmakerobo_Print(clb_status);   //æ‰“å°å‡ºçŠ¶æ€\t\t\tdelay(1000);                  //å»¶æ—¶1s\t\t&#125;\t&#125;\treturn 0;&#125;\n\n3.1ä»£ç æ€è·¯è®²è§£clb_valueæ¥æ”¶æŒ¯åŠ¨ä¼ æ„Ÿå™¨çš„è¿”å›å€¼ï¼Œæ¯æ¬¡æŒ¯åŠ¨ï¼Œè¿”å›å€¼éƒ½ä¼šæ”¹å˜\n\nvalueåˆå§‹å€¼ä¸º1ï¼ŒæŒ¯åŠ¨æ—¶ï¼Œæ¥æ”¶äº†è¿”å›å€¼ä¸º0ï¼Œå’Œtmpä¸åŒï¼Œæ‰€ä»¥status++ï¼ŒåŒè‰²LEDçš„é¢œè‰²æ”¹å˜\nå¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°æŒ¯åŠ¨ï¼Œè¿”å›å€¼ä¸º1ï¼Œå’Œtmpç›¸åŒï¼Œstatusä¸æ”¹å˜ï¼ŒåŒè‰²LEDçš„é¢œè‰²ä¸å˜\n\nå‚æ•°clb_tmpé—®é¢˜void makerobo_Print(int x)å‡½æ•°ä¸­è°ƒç”¨çš„å…¶å®æ˜¯å…¨å±€å˜é‡ä¸‹çš„clb_tmp\nè€Œmainå‡½æ•°ä¸­è°ƒç”¨çš„æ˜¯int clb_tmp = 0;//æ¯”è¾ƒå€¼è¿™ä¸ªå•ç‹¬å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå’Œå…¨å±€ä¸­çš„tmpæ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥makerobo_Printå‡½æ•°ä¸­å¯¹clb_tmpå‡½æ•°çš„æ“ä½œä¸å½±å“mainä¸­å’ŒçŠ¶æ€ç çš„æ¯”è¾ƒ\nä¸ºäº†ä¸ææ··å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ï¼Œå»ºè®®å°†mainå‡½æ•°ä¸­çš„tmpæ›´åä¸ºclb_tmp1\n\n3.2linuxè¿è¡Œä»£ç gcc -Wall 08vibrationswitch.c -o TEST -lwiringPi\n\n\næ¯æ¬¡æ™ƒåŠ¨ä¼ æ„Ÿå™¨ï¼ŒåŒè‰²LEDå°±ä¼šå˜è‰²ï¼Œå±å¹•ä¸Šæ‰“å°å‡ºonå’Œoffï¼ˆæ¯æ™ƒåŠ¨ä¸€æ¬¡ï¼Œæ‰“å°ä¸€æ¬¡ï¼‰\næŒ‰CTRL+Cç»ˆæ­¢ç¨‹åºè¿è¡Œ\n\nå’Œå€¾æ–œå¼€å…³çš„å®æ—¶æ”¹å˜ä¸åŒï¼ŒæŒ¯åŠ¨å¼€å…³çš„æ”¹å˜ä¸æ˜¯å®æ—¶çš„ï¼Œè€Œæ˜¯éœ€è¦æ–°çš„æŒ¯åŠ¨æ¥è§¦å‘å®ƒï¼ˆç±»ä¼¼ä¸€ä¸ªæŒ‰é’®ï¼‰\n\nå‡è®¾æˆ‘ä»¬è¦ç”¨å®ƒæ¥åšä¸€ä¸ªæŠ¥è­¦è£…ç½®ï¼Œå‡è®¾åœ¨æŸä¸€æ®µæ—¶é—´å†…æ£€æµ‹åˆ°æŒ¯åŠ¨çŠ¶æ€å¤šæ¬¡æ”¹å˜ï¼Œå°±å¯ä»¥å‘å‡ºä¿¡å·æŠ¥è­¦ï¼Œä»£è¡¨ä½ çš„é—¨ï¼ˆæˆ–è€…æŸä¸ªä¸œè¥¿ï¼‰è¢«ç§»åŠ¨äº†\n\n\nç»“è¯­è¿™æ¬¡å®éªŒçš„ä»£ç æ¯”ä¸Šä¸€æ¬¡çš„å€¾æ–œå¼€å…³ç›¸æ¯”ï¼Œæ›´å¤æ‚äº†ä¸€äº›ã€‚å¸Œæœ›æˆ‘çš„è®²è§£å¯¹ä½ æœ‰å¸®åŠ©ï¼\n\næ„Ÿè°¢ä½ çœ‹åˆ°æœ€åï¼å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ05-æ¿€å…‰ä¼ æ„Ÿå™¨","url":"/posts/3386580555/","content":"\n\nå‰è¨€æˆ‘æ‰‹å¤´çš„èµ„æ–™ä¸Šï¼Œåˆè¯´äº†ä¸€å †å’Œæœ¬å®éªŒç›¸å…³ä½†åˆæ¯«ä¸ç›¸å…³çš„å†…å®¹\nè¿˜æ˜¯å¾—è‡ªå·±æ‰¾èµ„æ–™æ‰èƒ½ç¡®è®¤æˆ‘çš„â€œçŒœæƒ³â€ï¼Œå…·ä½“æ˜¯å•¥ï¼Œä¸”å¾€ä¸‹ç»†çœ‹ï¼\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—ï¼ˆå…¶å®åªæ˜¯ä¸€ä¸ªå‘å°„å™¨ï¼‰\nè·³çº¿è‹¥å¹²\n\n2.å®éªŒåŸç†æ¿€å…‰ä¼ æ„Ÿå™¨å¸¸è§äºæµ‹è·ç”¨é€”ã€‚å®ƒç”±æ¿€å…‰å‘å°„å™¨ã€æ¿€å…‰æ£€æµ‹å™¨å’Œæµ‹é‡ç”µè·¯ç»„æˆã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿå®ç°æ— æ¥è§¦è¿œè·ç¦»æµ‹é‡ï¼Œé€Ÿåº¦å¿«ï¼Œç²¾åº¦é«˜ï¼Œé‡ç¨‹å¤§ã€‚\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—ç”±ä¸€ä¸ª650nmçº¢è‰²æ¿€å…‰äºŒæç®¡å¤´å’Œä¸€ä¸ªç”µé˜»å™¨ç»„æˆ\n\næ¿€å…‰ä¼ æ„Ÿå™¨å·¥ä½œæ—¶ï¼Œå…ˆç”±æ¿€å…‰å‘å°„äºŒæç®¡å¯¹å‡†ç›®æ ‡å‘å°„æ¿€å…‰è„‰å†²ã€‚ç»ç›®æ ‡åå°„åæ¿€å…‰å‘å„æ–¹å‘æ•£å°„ã€‚éƒ¨åˆ†æ•£å°„å…‰è¿”å›åˆ°ä¼ æ„Ÿå™¨æ¥æ”¶å™¨ï¼Œè¢«å…‰å­¦ç³»ç»Ÿæ¥æ”¶åæˆåƒåˆ°é›ªå´©å…‰ç”µäºŒæç®¡ä¸Šã€‚é›ªå´©å…‰ç”µäºŒæç®¡æ˜¯ä¸€ç§å†…éƒ¨å…·æœ‰æ”¾å¤§åŠŸèƒ½çš„å…‰å­¦ä¼ æ„Ÿå™¨ï¼Œå› æ­¤å®ƒèƒ½æ£€æµ‹æå…¶å¾®å¼±çš„å…‰ä¿¡å·ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºç›¸åº”çš„ç”µä¿¡å·ã€‚\n\nä¹¦ä¸Šä»‹ç»äº†è¿™ä¹ˆä¸€å †ï¼Œå¼„çš„å¥½åƒè¿™ä¸ªå°å®¶ä¼™å°±é›†æˆäº†ä¸Šé¢3ä¸ªä¼ æ„Ÿå™¨ä¸€æ ·ã€‚æˆ‘åˆšçœ‹ä¹¦çš„æ—¶å€™ï¼Œä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¹ˆå°ä¸€ä¸ªç©æ„å°±èƒ½æµ‹è·ï¼Ÿè‡ªå·±æ‰¾äº†èµ„æ–™æ‰èƒ½å‹‰å¼ºç¡®è®¤ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå•çº¯çš„æ¿€å…‰å‘å°„å™¨ç½¢äº†ã€‚\n\nä½œä¸ºä¸€ä¸ªèŒæ–°ï¼Œä¹¦ä¸Šçš„å†…å®¹çš„ç¡®å¯¹æˆ‘äº§ç”Ÿäº†è¯¯å¯¼ï¼Œè¿˜éœ€è¦è‡ªå·±æŸ¥é˜…èµ„æ–™ï¼Œæœ‰ç‚¹æµªè´¹æ—¶é—´ã€‚\n\n\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næ¿€å…‰ä¼ æ„Ÿå™¨æ¨¡å—\n\n\n\nGIPO 0\nGPIO 17\nSIG(S)\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND(-)\n\n\n\nå®ç‰©æ¥çº¿å›¾å¦‚ä¸‹ï¼Œæœ¬å®éªŒæ¥çº¿æ¯”è¾ƒç®€å•\n\nå³ä¸Šè§’çš„çº¢é»‘çº¿æ˜¯æ¥ç»™æ ‘è“æ´¾æ•£çƒ­é£æ‰‡çš„ï¼Œå’Œæœ¬å®éªŒæ— å…³\n\n\n\n3.ä»£ç ç¤ºä¾‹è€æ ·å­ï¼Œç»™å‡ºCè¯­è¨€ä»£ç ã€‚\n#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_LaserPin 0  //å®šä¹‰æ¿€å…‰ä¼ æ„Ÿå™¨ç®¡è„šint main()&#123;\t//åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123; \t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1; \t&#125;\t\tpinMode(makerobo_LaserPin, OUTPUT); // æ¿€å…‰ä¼ æ„Ÿå™¨è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼\t\tint k=2;\twhile(k--)\t&#123;\t\tdigitalWrite(makerobo_LaserPin, HIGH); //æ‰“å¼€æ¿€å…‰ä¼ æ„Ÿå™¨\t\tdelay(1000); //å»¶æ—¶1s                           \t\tdigitalWrite(makerobo_LaserPin, LOW);  //å…³é—­æ¿€å…‰ä¼ æ„Ÿå™¨\t\tdelay(1000); //å»¶æ—¶1s    \t&#125;\t\tdigitalWrite(makerobo_LaserPin, LOW); //å¾ªç¯ç»“æŸåï¼Œæ¢å¤å…³é—­çŠ¶æ€\tdelay(500); \t\treturn 0;&#125;\n\n\nä»£ç ä¸­çš„ä¸¤ä¸ªwiringPiå‡½æ•°åœ¨ä¸Šç¯‡å®éªŒåšå®¢ä¸­æœ‰è®²è§£ğŸ‘‰ä¼ é€\n\n3.1Genayç¼–è¯‘å™¨è€æ ·å­ï¼Œä¸‰æ¿æ–§ï¼ˆå…¶å®è¿™å¥è¯éƒ½æ˜¯ä»ä¹‹å‰çš„åšå®¢å¤åˆ¶è¿‡æ¥çš„ğŸ˜‚ï¼‰\n\n\nåœ¨Geanyé‡Œé¢ç”¨ç”Ÿæˆå‘½ä»¤å¼•ç”¨wiringPiåº“\nåœ¨Geanyçš„build(ç”Ÿæˆ)--&gt;set build commands(è®¾ç½®ç”Ÿæˆå‘½ä»¤ï¼‰ä¸­è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤gcc -Wall -c &quot;%f&quot; -lwiringPi\n\næ•ˆæœå¦‚ä¸‹ï¼Œæ¿€å…‰å‘å°„å™¨åœ¨å»¶æ—¶åä¸æ–­å¼€å…³\nè¯·ä¸è¦å°†æ¿€å…‰å‘å°„å™¨å¯¹å‡†ä»»ä½•äººï¼ä¼¤çœ¼ï¼ï¼ï¼\n\n\n3.2LinuxGccç¼–è¯‘å™¨\nä¸ºäº†é˜²æ­¢Linux-Gccç¯å¢ƒä¸­æ— æ³•æ­£å¸¸ç»ˆæ­¢ç¨‹åºï¼Œå»ºè®®ä¸è¦ä½¿ç”¨while(1)æ­»å¾ªç¯ã€‚ä½ å¯ä»¥å°†kè®¾ç½®å¾—å¤§ä¸€ç‚¹ï¼Œæ–¹ä¾¿è§‚å¯Ÿå®éªŒç»“æœ\n\ncdæ‰“å¼€å¯¹åº”æ–‡ä»¶è·¯å¾„ï¼Œlsæ˜¾ç¤ºå½“å‰è·¯å¾„ä¸‹çš„æ–‡ä»¶\nè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ç¼–è¯‘ä»£ç ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶TEST\ngcc -Wall 05laser.c -o TEST -lwiringPi\n\n./TESTè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶\n\nå¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œé‚£å°±æ˜¯ç¼–è¯‘æˆåŠŸäº†ï¼Œä½ å¯ä»¥è§‚å¯Ÿåˆ°ç›¸åŒçš„å®éªŒç»“æœ\nç»“è¯­æ¬¸è¿™åšå®¢éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œæ€ä¹ˆä¸ç‚¹å…³æ³¨å•Šï¼Ÿ\nå°±ç®—ä½ ä¸æƒ³å…³æ³¨æˆ‘ï¼Œé‚£å°±å…³æ³¨ä¸€ä¸‹ä¸“æ å˜›ï¼ğŸ‘‰ä¼ é€é—¨\nTNNDï¼å…³æ³¨ï¼Œä¸ºä»€ä¹ˆä¸å…³æ³¨ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ13-é›¨æ»´ä¼ æ„Ÿå™¨","url":"/posts/2014251014/","content":"å¥½ä¹…æ²¡ç©æ ‘è“æ´¾äº†ï¼Œä»Šå¤©ä¸Šæ‰‹æ¥åšä¸€ä¸ªå®éªŒ\n\n\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\né›¨æ»´ä¼ æ„Ÿå™¨æ¨¡å—\nLM393æ¨¡å—\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆå®éªŒ12ï¼‰\nä¸€äº›è·³çº¿\nä¸€ä¸ªä¸€å­—èºä¸åˆ€\n\n\n2.å®éªŒåŸç†2.1åŸºæœ¬è¯´æ˜é›¨æ»´ä¼ æ„Ÿå™¨çš„æ§åˆ¶æ¨¡å—å…·æœ‰4ä¸ªè¾“å‡ºï¼Œå…¶ä¸­VCCè¿æ¥åˆ°5Vç”µæºï¼Œæ¨¡å—çš„GNDå¼•è„šæ¥åœ°ã€‚DOå¼•è„šè¿æ¥åˆ°å¾®æ§åˆ¶å™¨çš„æ•°å­—å¼•è„šä»¥è¿›è¡Œæ•°å­—è¾“å‡ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿå¼•è„šã€‚è¦ä½¿ç”¨æ¨¡æ‹Ÿè¾“å‡ºï¼Œå¯ä»¥å°†A0å¼•è„šè¿æ¥åˆ°å¾®æ§åˆ¶å™¨çš„ADCå¼•è„šã€‚\nåœ¨é›¨æ»´&#x2F;é›¨æ°´å™¨ç³»ç»Ÿä¸­ï¼Œç”¨é›¨æ»´ä¼ æ„Ÿå™¨æ£€æµ‹é™é›¨é‡å¹¶è½¬æ¢æ§åˆ¶å™¨æ£€æµ‹åˆ°çš„ä¿¡å·ã€‚ç„¶åæ ¹æ®è¿™äº›ä¿¡å·è‡ªåŠ¨è®¾ç½®é›¨åˆ®å™¨çš„é—´éš”ï¼Œä»¥æ–¹ä¾¿åœ°æ§åˆ¶é›¨åˆ®å™¨çš„ç”µæœºï¼›åœ¨æ™ºèƒ½ç…§æ˜ç³»ç»Ÿä¸­ï¼Œè‡ªåŠ¨æ£€æµ‹é©¾é©¶ç¯å¢ƒå¹¶è°ƒæ•´ç…§æ˜æ¨¡å¼ï¼Œæé«˜æ¶åŠ£ç¯å¢ƒä¸‹çš„è¡Œè½¦å®‰å…¨ï¼›åœ¨æ™ºèƒ½å¤©çª—ç³»ç»Ÿä¸­ï¼Œæ£€æµ‹æ˜¯å¦ä¸‹é›¨ï¼Œå¦‚æœæ£€æµ‹åˆ°é›¨æ»´ï¼Œåˆ™è‡ªåŠ¨å…³é—­å¤©çª—ã€‚\nä¼ æ„Ÿå™¨æ¨¡å—åŒ…æ‹¬ä¸€ä¸ªç”µä½è®¡ï¼ŒLM393æ¯”è¾ƒå™¨ï¼ŒLEDï¼Œç”µå®¹å™¨å’Œç”µé˜»å™¨ã€‚é›¨æ¿æ¨¡å—ç”±é“œè½¨ç»„æˆï¼Œé“œè½¨ç”¨ä½œå¯å˜ç”µé˜»å™¨ã€‚å®ƒçš„é˜»åŠ›éšé›¨æ¿ä¸Šçš„æ¹¿åº¦è€Œå˜åŒ–ã€‚\n2.2ç”µè·¯å›¾\n2.3æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nLM393æ¨¡å—\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nDO\nGPIO 17\n*\n\n\nAO\n*\nAIN 0\n\n\nVCC\n3.3V\n*\n\n\nGND\nGND\n*\n\n\n\nåœ¨è¿æ¥LM393å’Œé›¨æ»´ä¼ æ„Ÿå™¨çš„æ—¶å€™ï¼Œå‘ç°é›¨æ»´ä¼ æ„Ÿå™¨ä¸Šå¹¶æ²¡æœ‰æ˜ç¡®æ ‡å‡ºæ­£è´Ÿæï¼Œä½†æ˜¯åœ¨æ­£æçš„ç®¡è„šä¸‹æ–¹ç”¨å°ç‚¹åšäº†æ ‡è¯†ï¼ˆè´Ÿææ— è¯¥ç™½ç‚¹ï¼‰\n\næœ¬æ¬¡å®éªŒéœ€è¦æ¥çš„çº¿éå¸¸å¤šï¼Œæ³¨æ„ä¸è¦æ¥é”™äº†ã€‚å…¶ä¸­PCF8591æ¨¡å—åœ¨æ¥çº¿æ—¶éœ€è¦å°†æ‰€æœ‰è·³çº¿å¸½æ‹”å‡º\n\n\n3.ä»£ç æ•ˆæœ3.1ä»£ç ç¤ºä¾‹å› ä¸ºéœ€è¦ä½¿ç”¨pcf8591æ¨¡æ•°è½¬æ¢å™¨ï¼Œæ‰€ä»¥éœ€è¦å¼•ç”¨å¤´æ–‡ä»¶&lt;pcf8591.h&gt;\n//é›¨æ»´æ¢æµ‹ä¼ æ„Ÿå™¨å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#include &lt;math.h&gt;#define\tmakerobo_PCF    120 // åŸºç¡€ç®¡è„š120#define\tmakerobo_DOpin\t 0   // é›¨æ»´ä¼ æ„Ÿå™¨ç®¡è„š//æ‰“å°é›¨æ»´ä¼ æ„Ÿå™¨æç¤ºä¿¡æ¯void makerobo_Print(int x)&#123;\tswitch(x)\t&#123;\t\tcase 1:            //æ²¡æœ‰é›¨æ»´\t\t\tprintf(&quot;\\n************************\\n&quot;  );\t\t\tprintf(  &quot;* makerobo Not Raining *\\n&quot;  );\t\t\tprintf(  &quot;************************\\n\\n&quot;);\t\t\tbreak;\t\tcase 0:             //æœ‰é›¨æ»´\t\t\tprintf(&quot;\\n**********************\\n&quot;  );\t\t\tprintf(  &quot;* makerobo Raining!! *\\n&quot;  );\t\t\tprintf(  &quot;**********************\\n\\n&quot;);\t\t\tbreak;\t\tdefault:         //æ‰“å°æ•°æ®é”™è¯¯\t\t\tprintf(&quot;\\n**********************\\n&quot;  );\t\t\tprintf(  &quot;* Print value error. *\\n&quot;  );\t\t\tprintf(  &quot;**********************\\n\\n&quot;);\t\t\tbreak;\t&#125;&#125;int main()&#123;\tint makerobo_analogVal;           // å®šä¹‰æ¨¡æ‹Ÿé‡å­˜å‚¨å˜é‡\tint makerobo_tmp, makerobo_status;// å®šä¹‰çŠ¶æ€ä¿¡æ¯    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•\tif(wiringPiSetup() == -1)&#123;\t\tprintf(&quot;setup wiringPi failed !&quot;);\t\treturn 1;\t&#125;\t//åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup(makerobo_PCF, 0x48);    //è®¾ç½®é›¨æ»´ä¼ æ„Ÿå™¨ç®¡è„šä¸ºè¾“å…¥æ¨¡å¼\tpinMode(makerobo_DOpin, INPUT);    //é»˜è®¤çŠ¶æ€å€¼è®¾ç½®ä¸º0\tmakerobo_status = 0; \t//æ— é™å¾ªç¯\twhile(1) \t&#123;\t\tmakerobo_analogVal = analogRead(makerobo_PCF + 0);\t\t//è·å–AIN0ä¸Šçš„å€¼\t\tprintf(&quot;%d\\n&quot;, makerobo_analogVal); //æ‰“å°å‡ºè¯¥å€¼ \t\tmakerobo_tmp = digitalRead(makerobo_DOpin); \t\t//è¯»å–æ•°å­—IOå£ç”µå¹³ï¼Œè¯»å–æ•°å­—é›¨æ»´ä¼ æ„Ÿå™¨DOç«¯å£\t\tif (makerobo_tmp != makerobo_status) //çŠ¶æ€å‘ç”Ÿæ”¹å˜\t\t&#123;\t\t\tmakerobo_Print(makerobo_tmp); //æ‰“å°å‡ºé›¨æ»´ä¼ æ„Ÿå™¨æ£€æµ‹ä¿¡æ¯\t\t\tmakerobo_status = makerobo_tmp;  //çŠ¶æ€å€¼é‡æ–°èµ‹å€¼\t\t&#125;\t\tdelay (200);   //å»¶æ—¶200ms\t&#125;\treturn 0;&#125;\n\næ³¨æ„ï¼šé›¨æ»´ä¼ æ„Ÿå™¨å…¶å®æ˜¯LM393å’Œé›¨æ»´æ„Ÿåº”æ¨¡å—çš„é›†åˆä½“ï¼Œæ‰€ä»¥ä»£ç æ³¨é‡Šä¸­è¯´çš„è®¾ç½®ç®¡è„šä¸ºinputæ¨¡å¼ï¼Œå®é™…ä¸Šè®¾ç½®çš„æ˜¯LM393æ¨¡å—çš„ç®¡è„šï¼ˆæ¯•ç«Ÿåªæœ‰å®ƒè¿ä¸Šäº†Tå‹è½¬æ¥æ¿ï¼‰\n\næœ¬æ¬¡åšå®¢çš„ä»£ç å’Œä¹‹å‰çš„å®éªŒå¾ˆç›¸ä¼¼ï¼Œå…¶ä¸­PCF8591åœ¨ä¸Šç¯‡å®éªŒ12åšå®¢ä¸­å·²ç»æœ‰è¿‡è®²è§£ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå°±ä¸bbå•¦\n\n3.2è¿è¡Œæ•ˆæœå½“ä½ æŠŠæ¹¿çº¸å·¾å°åœ¨é›¨æ»´ä¼ æ„Ÿå™¨ä¸Šï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºmakerobo Raining!!ï¼Œæ•°å€¼ä¼šéšç€é›¨æ»´é‡çš„å¤§å°å˜åŒ–ï¼ˆæˆ‘è¿™é‡Œæµ‹è¯•çš„æ˜¯ï¼Œæ°´å¤šçš„æ—¶å€™æ‰“å°çš„å€¼å°ï¼‰ä½†æœ€åä¼šè¶‹äºç¨³å®šï¼Œæ‰“å°128\n\nå¦‚æœæ²¡æœ‰æ°´ï¼Œå±å¹•ä¸Šæ‰“å°makerobo Not Rainingï¼Œæ•°å€¼æ‰“å°255\n\nåœ¨LM393æ¨¡å—ä¸Šæœ‰ä¸¤ä¸ªLEDæŒ‡ç¤ºç¯ï¼Œåœ¨ä¼ æ„Ÿå™¨æ¢æµ‹åˆ°æ°´åï¼ŒDO-LEDä¼šäº®èµ·\n\nå¦‚æœä½ çš„DO-LEDæ²¡æœ‰äº®èµ·ï¼Œå¯ä»¥é€šè¿‡è¯¥ä¼ æ„Ÿå™¨ä¸Šè“è‰²çš„æ¨¡å—ï¼Œç”¨åå­—èºä¸è°ƒèŠ‚LM393æ¨¡å—çš„çµæ•åº¦ï¼ˆè¿™ä¸ªè“è‰²æ¨¡å—è°ƒèŠ‚çš„æ˜¯ç”µé˜»ï¼‰\nç»“è¯­æœ‰äº†è¿™ä¸ªä¸œè¥¿ï¼Œä½ å¯ä»¥æŠŠé›¨æ»´ä¼ æ„Ÿå™¨ä¸¢åˆ°çª—å°ä¸Šï¼Œåœ¨ä¸åœ¨å®¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥è¿è¡Œä»£ç ï¼Œçœ‹çœ‹å®¶é‡Œæœ‰æ— ä¸‹é›¨äº†ï¼ˆæ¯•ç«Ÿæ—¶å€™å·¥ä½œä¸Šå­¦çš„åœ°æ–¹å’Œå®¶é‡Œéš”äº†åå‡ å…¬é‡Œï¼Œå¤©æ°”å°±å¯èƒ½å®Œå…¨ä¸åŒï¼‰\n\né…åˆcpolarå®ç°å†…ç½‘ç©¿é€ï¼Œæ•ˆæœæ›´ä½³å“¦ğŸ˜€\n\nä¸è¿‡çŸ¥é“è‡ªå·±å®¶ä¸‹é›¨äº†ï¼Œè¢«å­è¿˜æ²¡æ”¶ï¼Œæ˜¯ä¸æ˜¯å¾’å¢ç„¦è™‘ï¼Ÿ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€Redisã€‘01.åˆæ­¥è®¤è¯†Rediså’Œåˆ†å¸ƒå¼ç³»ç»Ÿ","url":"/posts/996575798/","content":"1.ä»€ä¹ˆæ˜¯Redis1.1 ç®€ä»‹\nRedisæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäºé”®å€¼å¯¹key-valueçš„NoSQLæ•°æ®åº“ã€‚Rediså†…éƒ¨å­˜æ”¾çš„å€¼å¯ä»¥æ˜¯stringã€hashã€listã€setã€zsetã€bitmapsã€GEOç­‰å¤šç§æ•°æ®ç»“æ„æˆ–ç®—æ³•ï¼›é™¤äº†æ•°æ®å­˜æ”¾ï¼ŒRedisè¿˜æä¾›äº†é”®å€¼è¿‡æœŸã€è®¢é˜…å‘å¸ƒã€äº‹åŠ¡ã€æµæ°´çº¿ã€Luaè„šæœ¬ç­‰é™„åŠ åŠŸèƒ½ï¼Œå› æ­¤Redisèƒ½æ»¡è¶³å¾ˆå¤šåº”ç”¨åœºæ™¯ã€‚\n\nRedisä¼šå°†æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥Redisçš„æ£€ç´¢é€Ÿç‡éå¸¸å¿«ï¼ˆæˆ–è€…è¯´IOååé«˜ï¼‰ã€‚åŒæ—¶ï¼Œä¸ºäº†ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼ŒRedisä¼šå°†å†…å­˜ä¸­çš„æ•°æ®ç”¨å¿«ç…§æˆ–è€…æ—¥å¿—çš„æ–¹å¼å­˜åœ¨ç¡¬ç›˜ä¸Šï¼Œå®ç°ä¸€å®šç¨‹åº¦ä¸Šçš„æ•°æ®æŒä¹…åŒ–ã€‚\n1.2 ä»€ä¹ˆæ—¶å€™ç”¨Redisï¼Ÿåœ¨ç¼–ç¨‹è¯­è¨€ä¸­å®šä¹‰å˜é‡ï¼Œä¹Ÿæ˜¯å°†æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚Redisçš„ä¼˜åŠ¿æ˜¯åœ¨åˆ†å¸ƒå¼é›†ç¾¤ç³»ç»Ÿä¸­ï¼Œè€Œå•æœºï¼ˆå•è¿›ç¨‹ï¼‰ç¨‹åºé‡Œé¢ï¼Œç›´æ¥åœ¨ç¼–ç¨‹è¯­è¨€ä¸­å®šä¹‰å˜é‡&#x2F;æ•°æ®ç»“æ„æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼ˆRedisçš„å¿«åªæ˜¯ç›¸å¯¹äºMySQLè¿™ç±»æ•°æ®åº“è€Œè¨€çš„ï¼‰ã€‚\n\nå¦‚æœæœªæ¥éœ€è¦å¼•å…¥åˆ†å¸ƒå¼æ¶æ„ï¼Œä½¿ç”¨Redisæ˜¯ä¸€ä¸ªå¥½é€‰æ‹©ã€‚å¦åˆ™æ²¡æœ‰å¿…è¦ã€‚\n\nå¦‚æœä¸€ä¸ªç³»ç»Ÿéœ€è¦æ¶‰åŠåˆ°å¤šä¸ªå˜é‡ã€å¤šå°ä¸»æœºæ—¶ï¼ŒRediså°±èƒ½èµ·ä½œç”¨äº†ã€‚å®ƒåŸºäºTCPï¼Œå¯ä»¥å°†è‡ªå·±å†…å­˜ä¸­çš„å˜é‡åˆ†äº«ç»™å¤šä¸ªè¿›ç¨‹ã€å¤šä¸ªä¸»æœºæ¥è®¿é—®ï¼Œè¿™æ ·åˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´å°±èƒ½è¿›è¡Œæ•°æ®åŒæ­¥äº†ã€‚\nåˆå› ä¸ºRedisæ˜¯åœ¨å†…å­˜ä¸­å­˜æ”¾ï¼Œæ‰€ä»¥å®ƒçš„æ£€ç´¢é€Ÿåº¦ç›¸æ¯”MySQLä¼šæœ‰æ›´å¿«çš„æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨äº’è”ç½‘åº”ç”¨ä¸­å¯¹æ•°æ®åº“çš„æŸ¥è¯¢æ€§èƒ½è¦æ±‚è¾ƒé«˜ï¼Œæ‰€ä»¥Rediså°±æ¯”MySQLæ›´åŠ é€‚åˆè¿™ç§åœºæ™¯ã€‚\n\næ¯”å¦‚å­˜å‚¨æµè§ˆå™¨ä¸­çš„ç”¨æˆ·Cookieå’ŒSessionçš„å¯¹åº”å…³ç³»ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯sessionå¹¶ä¸æ˜¯å¿…é¡»è¦æ°¸ä¹…ä¿å­˜çš„æ•°æ®ï¼Œæˆ‘ä»¬èƒ½å…è®¸ä¸€å®šçš„æ•°æ®ä¸¢å¤±ï¼Œåæœæ— éæ˜¯ç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•ç½‘é¡µè€Œå·²ã€‚\n\nå½“ç„¶ï¼Œç°åœ¨æ›´å¤šçš„é€‰æ‹©æ˜¯å°†Rediså’ŒMySQLç­‰æ•°æ®åº“ç»“åˆï¼Œå°†çƒ­ç‚¹æ•°æ®ï¼ˆæœ€å¸¸è®¿é—®çš„æ•°æ®ï¼‰æ”¾å…¥Redisï¼Œå…¨é‡æ•°æ®åœ¨MySQLä¸­ã€‚æ­¤æ—¶Rediså°±å¥½æ¯”ä¸€ä¸ªæ•°æ®çš„ç¼“å­˜äº†ã€‚\n\nä¿è¯çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢æ€§èƒ½ï¼›\nä¿è¯å…¨é‡æ•°æ®çš„æ­£ç¡®ä¿å­˜ï¼›\nä½†æ˜¯ä¼šå‡ºç°Rediså’ŒMySQLä¸­å¢åˆ æ”¹çš„æ•°æ®åŒæ­¥é—®é¢˜ï¼›\nä½¿ç”¨Redis+MySQLä¼šå¤§å¤§å¢åŠ ç³»ç»Ÿå¤æ‚æ€§ã€‚\n\n1.3 Redisä¸èƒ½åšçš„äº‹æƒ…ï¼Ÿå› ä¸ºRedisæ˜¯å†…å­˜å­˜å‚¨ï¼Œæ‰€ä»¥å®ƒä¸é€‚åˆå­˜å‚¨å¤§è§„æ¨¡æ•°æ®ã€‚\n2.åˆ†å¸ƒå¼å‰é¢æåˆ°ï¼ŒRedisçš„çœŸæ­£é€‚ç”¨åœºæ™¯æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿå‘¢ï¼Ÿ\n2.1 å•æœºæ¶æ„æ‰€è°“å•æœºæ¶æ„ï¼Œå°±æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„æ‰€æœ‰æœåŠ¡éƒ½åœ¨ä¸€å°æœåŠ¡å™¨ä¸­è¿è¡Œã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡è®¾è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç”µå•†ç³»ç»Ÿï¼Œå®ƒçš„æ•°æ®åº“å’Œåº”ç”¨ç¨‹åºéƒ½åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚ç”¨æˆ·è®¿é—®è¿™ä¸ªæœåŠ¡å™¨æ¥è·å–ç”µå•†æœåŠ¡ã€‚\n\nä¹‹å‰æˆ‘å†™çš„å°é¡¹ç›®è§†é¢‘ç‚¹æ’­ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå•æœºæ¶æ„ã€‚é‡‡ç”¨MySQLä½œä¸ºæ•°æ®åº“ï¼ŒC++æ¥æä¾›åº”ç”¨æœåŠ¡ã€‚\nå¦‚æœä¸€å°ä¸»æœºçš„æ€§èƒ½èƒ½è¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„ç”¨æˆ·æœåŠ¡éœ€æ±‚äº†ï¼Œå•æœºæ¶æ„å°±æ˜¯å¾ˆä¸é”™çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒçš„ç»´æŠ¤å¤æ‚åº¦ä¸é«˜ï¼Œä¸”éƒ¨ç½²æˆæœ¬ä¹Ÿè¾ƒä½ã€‚\n2.2 åˆ†å¸ƒå¼ä¸»æœºçš„æ€§èƒ½æŒ‡æ ‡åŒ…æ‹¬IOæ€§èƒ½ï¼ˆå†…å­˜å’Œç¡¬ç›˜ï¼‰ã€ç½‘ç»œååã€CPUè®¡ç®—æ€§èƒ½ç­‰ï¼Œè¿™äº›æ€§èƒ½éƒ½ä¼šåœ¨ç”¨æˆ·é‡å¢é•¿åˆ°æŸä¸€ä¸ªé‡çº§æ—¶é¡¶ä¸ä½ï¼Œå¯¼è‡´æœåŠ¡çš„è¯·æ±‚è€—æ—¶è¾ƒé•¿ç”šè‡³å‡ºç°å¤„ç†é”™è¯¯ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚\næ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡å–ä¸¤ä¸ªæªæ–½ï¼Œå¼€æºèŠ‚æµï¼š\n\nå¼€æºï¼šç»™ä¸»æœºå‡çº§ç¡¬ä»¶\nèŠ‚æµï¼šé€šè¿‡è½¯ä»¶debugæ‰¾åˆ°å½±å“ç³»ç»Ÿæ€§èƒ½çš„éƒ¨åˆ†ï¼Œé’ˆå¯¹æ€§è¿›è¡Œè½¯ä»¶ä¼˜åŒ–ï¼›\n\nä½†æ˜¯ï¼Œä¸€å°ä¸»æœºçš„æ€§èƒ½ï¼Œä¸ç®¡å†æ€ä¹ˆå‡çº§ç¡¬ä»¶ï¼Œæ€»å½’æ˜¯æœ‰ä¸Šé™çš„ã€‚å¦‚æœä¸€ä¸ªä¸»æœºéƒ½è¢«å‡çº§åˆ°é¡¶å¤©äº†è¿˜æ²¡æœ‰åŠæ³•æœåŠ¡æˆ‘ä»¬çš„æ€§èƒ½ï¼Œæ­¤æ—¶å°±éœ€è¦å¤šå°ä¸»æœºæ¥å¸®å¿™äº†ã€‚è¿™ä¾¿æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºç¡€ã€‚\n\nå¼•å…¥åˆ†å¸ƒå¼å…¶å®æ˜¯ä¸ªä¸‡ä¸å¾—å·²çš„æ“ä½œï¼›\nä¼šå¯¼è‡´ç³»ç»Ÿå¤æ‚åº¦å¤§å¤§æé«˜ï¼›\nç³»ç»Ÿå‡ºç°BUGçš„å¯èƒ½æ€§è¶Šæ¥è¶Šé«˜ï¼›\nç¨‹åºå‘˜è¢«â€œå¼€çŒ¿èŠ‚æµâ€çš„å¯èƒ½æ€§è¶Šæ¥è¶Šé«˜â€¦â€¦\n\n2023å¹´å¹´æœ«ï¼Œå„å¤§äº’è”ç½‘å‚å®¶ï¼ˆé˜¿é‡Œã€æ»´æ»´ï¼‰æ——ä¸‹çš„æœåŠ¡æŒ¨ä¸ªboomï¼Œæ­£æ˜¯è¯´æ˜äº†è¿™ä¸€ç‚¹â€¦â€¦\nå…ˆæ¥çœ‹çœ‹ä¸€ä¸ªæœ€ç®€å•çš„åˆ†å¸ƒå¼ç³»ç»Ÿå§ï¼Œå³å°†åº”ç”¨æœåŠ¡å’Œæ•°æ®åº“æœåŠ¡åˆ†ç¦»ã€‚\n\nåº”ç”¨æœåŠ¡å™¨ï¼šCPUå’Œå†…å­˜æ€§èƒ½ï¼Œæé«˜å¤„ç†é€Ÿåº¦ï¼›\nå­˜å‚¨æœåŠ¡å™¨ï¼šæ›´å¤§æ›´å¿«çš„ç¡¬ç›˜ï¼Œå¢åŠ IOååé‡ï¼›\n\n\n2.3 è´Ÿè½½å‡è¡¡è¿›ä¸€æ­¥æ‰©å±•ï¼Œå°±éœ€è¦æ›´å¤šçš„ä¸»æœºï¼Œä»¥åŠè´Ÿè½½å‡è¡¡æªæ–½äº†ã€‚\n\nä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡å™¨å’Œä¸¤ä¸ªç‹¬ç«‹çš„åº”ç”¨æœåŠ¡å™¨ï¼›\nç”¨æˆ·è¯·æ±‚è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼›\nè´Ÿè½½å‡è¡¡æœåŠ¡å™¨æ ¹æ®ä¸¤ä¸ªåº”ç”¨æœåŠ¡å™¨å½“å‰çš„è´Ÿè½½ï¼Œé€‰æ‹©è¾ƒä½çš„æœåŠ¡å™¨æ¥å¤„ç†è¯·æ±‚ï¼ˆè¿™é‡Œæ¶‰åŠåˆ°è´Ÿè½½å‡è¡¡çš„ç®—æ³•ï¼‰ï¼›\n\næ­¤æ—¶ä¸¤ä¸ªåº”ç”¨æœåŠ¡å™¨åœ¨ä¸€å®šç¨‹åº¦ä¸Šéƒ½å¹²äº†ç›¸åŒçš„æ´»ï¼Œå°±èƒ½å‡å°‘å•ä¸ªæœºå™¨çš„å‹åŠ›ã€‚\n\næ³¨æ„ï¼Œè™½ç„¶è´Ÿè½½å‡è¡¡æœåŠ¡å™¨çœ‹ä¸Šå»ä¼šæ¥å—æ‰€æœ‰ç”¨æˆ·çš„è¯·æ±‚ï¼Œä½†å®ƒçš„è¯·æ±‚æ‰¿æ‹…èƒ½åŠ›æ˜¯è¿œè¿œå¤§äºåº”ç”¨æœåŠ¡å™¨çš„ã€‚å› ä¸ºå®ƒçš„å·¥ä½œå¾ˆç®€å•ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•çš„è¯†åˆ«å’Œåˆ†é…å·¥ä½œï¼Œå¹¶ä¸æ¶‰åŠåˆ°å…·ä½“çš„åŠŸèƒ½ã€‚\nå¦‚æœè¯·æ±‚é‡å¤§åˆ°è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¹Ÿé¡¶ä¸ä½äº†ï¼Œé‚£å¯ä»¥æ·»åŠ å¤šä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼ˆå¯ä»¥é‡‡ç”¨å¤šåœ°èŠ‚ç‚¹çš„æ–¹å¼ï¼‰ã€‚\næ·»åŠ ä¸Šè´Ÿè½½å‡è¡¡æªæ–½åï¼Œå°±æœ‰äº†æœåŠ¡é›†ç¾¤ï¼Œè¿™ä¸ªé›†ç¾¤ä¸­æŸä¸ªæœåŠ¡å™¨æŒ‚æ‰å¯¹æ•´ä¸ªæœåŠ¡å™¨çš„å½±å“ä¸é«˜ï¼ˆå®ƒçš„è¯·æ±‚å¯ä»¥ç”±å…¶ä»–æ­£å¸¸è¿è¡Œçš„æœåŠ¡å™¨æ‰¿æ‹…ï¼‰ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†å¯ç”¨æ€§ã€‚\nå¦å¤–ï¼Œè´Ÿè½½å‡è¡¡æœåŠ¡å™¨ä¹Ÿéœ€è¦ä½¿ç”¨ä¸€äº›ç®—æ³•ï¼Œæ¯”å¦‚æƒ³åŠæ³•è®©åŒä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚å§‹ç»ˆèµ°åˆ°åŒä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œé¿å…åœ¨ä¸åŒåº”ç”¨æœåŠ¡å™¨ä¸­è¿›è¡Œæ•°æ®äº¤æ¢ã€‚\n2.4 æ•°æ®åº“è¯»å†™åˆ†ç¦»å‰é¢æåˆ°çš„æªæ–½éƒ½æ˜¯åœ¨ä¼˜åŒ–åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œé‚£ä¹ˆæ•°æ®åº“æœåŠ¡å™¨çš„è´Ÿè½½åº”è¯¥å¦‚ä½•é™ä½å‘¢ï¼Ÿ\næ¯”è¾ƒç®€å•çš„ä¸€ç§åŠæ³•å°±æ˜¯æ•°æ®åº“çš„è¯»å†™åˆ†ç¦»ã€‚å³è¯»æ•°æ®åº“çš„æ“ä½œå’Œå†™æ•°æ®åº“çš„æ“ä½œç”±ä¸åŒçš„æœåŠ¡å™¨æ¥æ‰¿æ‹…ã€‚\n\nåº”ç”¨ç¨‹åºéœ€è¦å†™å…¥ï¼Œè¯·æ±‚AæœåŠ¡å™¨\nAæœåŠ¡å™¨å¤„ç†å†™å…¥åï¼Œå®šæœŸåŒæ­¥åˆ°BæœåŠ¡å™¨\nåº”ç”¨ç¨‹åºéœ€è¦è¯»å–æ—¶è¯·æ±‚BæœåŠ¡å™¨\n\nè€ƒè™‘åˆ°å®é™…åœºæ™¯ä¸­ï¼Œè¯»å–çš„é¢‘ç‡ä¼šè¿œè¿œé«˜äºå†™å…¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å–æœåŠ¡å™¨Bå¤§éƒ¨åˆ†æƒ…å†µä¸‹åªéœ€è¦å¤„ç†è¯»è¯·æ±‚ï¼Œå‹åŠ›ä¼šé™ä½ã€‚è€Œä¸”æˆ‘ä»¬å¯ä»¥æä¾›å¤šä¸ªå’ŒBä¸€æ ·çš„è¯»æœåŠ¡å™¨ï¼ŒåŠ ä¸Šè´Ÿè½½å‡è¡¡ï¼Œè¿›ä¸€æ­¥å‡å°‘è¯»æœåŠ¡å™¨çš„å‹åŠ›ã€‚\nä¸ºä»€ä¹ˆè¯´è¯»çš„é¢‘ç‡è¿œè¿œé«˜äºå†™å…¥ï¼Ÿä»¥èŠå¤©è½¯ä»¶ä¸ºä¾‹ï¼š\n\nå½“ç”¨æˆ·æ‰“å¼€èŠå¤©è½¯ä»¶çš„ä¸»ç•Œé¢æ—¶ï¼Œè½¯ä»¶éœ€è¦å¯¹å½“å‰èŠå¤©æ¡†é‡Œçš„æ‰€æœ‰è”ç³»äºº&#x2F;ç¾¤ç»„é‡Œé¢çš„æ¶ˆæ¯è¿›è¡Œä¸€æ¬¡æŸ¥è¯¢ï¼›\nå½“ç”¨æˆ·æ‰“å¼€è‡ªå·±çš„ä¸ªäººä¿¡æ¯æ—¶ï¼Œè½¯ä»¶éœ€è¦æŸ¥è¯¢ä¸ªäººä¿¡æ¯ï¼ˆå½“ç„¶è¿™ä¸ªä¿¡æ¯å¯èƒ½æ˜¯æœ¬åœ°æ—©å°±ç¼“å­˜å¥½äº†çš„ï¼‰ï¼›\nå½“ç”¨æˆ·æ‰“å¼€æœ‹å‹åœˆçš„æ—¶å€™ï¼Œéœ€è¦æŸ¥è¯¢å¥½å‹çš„æœ‹å‹åœˆï¼Œå¹¶æŠŠæœ€æ–°çš„è¯´è¯´æ¨é€ç»™å½“å‰ç”¨æˆ·\nâ€¦â€¦\n\nä¸Šè¿°çš„è¿™ä¸€ç³»åˆ—æ“ä½œéƒ½æ˜¯è¯»æŸ¥è¯¢ï¼Œå®Œå…¨æ²¡æœ‰æ¶‰åŠåˆ°å†™ã€‚å½“ç”¨æˆ·ä½¿ç”¨èŠå¤©è½¯ä»¶ï¼Œæ²¡æœ‰å‘å‡ºæ¶ˆæ¯æ—¶ï¼ŒèŠå¤©è½¯ä»¶ä¸€ç›´åœ¨åšçš„éƒ½æ˜¯è¯»æ“ä½œï¼ä»¥æ­¤ç±»æ¨ï¼Œå¤§éƒ¨åˆ†è½¯ä»¶åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¯»æ“ä½œå±…å¤šï¼Œå†™æ“ä½œç›¸å¯¹è¾ƒå°‘ã€‚\n2.5 çƒ­ç‚¹ç¼“å­˜æœ‰ä¸€ä¸ªç»å…¸çš„äºŒå…«åŸåˆ™ï¼Œåœ¨æ•°æ®åº“åœºæ™¯ä¹Ÿèƒ½é€‚ç”¨ï¼š20%çš„æ•°æ®èƒ½æ”¯æ’‘80%çš„è®¿é—®ã€‚\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼•å…¥é’ˆå¯¹è¿™20%çš„çƒ­ç‚¹æ•°æ®çš„ç¼“å­˜ï¼Œä¿è¯è¿™äº›çƒ­ç‚¹æ•°æ®èƒ½æ›´å¿«çš„è¢«æŸ¥è¯¢ï¼ˆè¯»ï¼‰ã€‚Rediså¯ä»¥è¯´å°±æ˜¯ç”¨æ¥åšç¼“å­˜çš„ã€‚\nç¼“å­˜éœ€è¦æ›´å¿«çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œä»£ä»·å°±æ˜¯å®ƒå­˜æ”¾ä¸äº†å¤ªå¤šçš„æ•°æ®ã€‚æ¯”å¦‚Rediséœ€è¦å°†æ•°æ®å­˜å…¥å†…å­˜ä¸­ï¼Œå†…å­˜çš„å®¹é‡è¿œè¿œå°äºç£ç›˜ï¼Œå­˜ä¸äº†å¾ˆå¤šæ•°æ®ã€‚æ‰€ä»¥ç¼“å­˜ä¸€å®šè¦ä½¿ç”¨é€‚åˆåœºæ™¯çš„ç®—æ³•ï¼Œä¿è¯ç¼“å­˜ä¸­çš„æ•°æ®æœ‰å°½å¯èƒ½é«˜çš„å‘½ä¸­ç‡ã€‚\nå½“ç„¶ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç¼“å­˜æœåŠ¡å™¨ä¼šæ‰¿å—è¾ƒå¤§çš„æŸ¥è¯¢å‹åŠ›ã€‚ä¸è¿‡å®Œæ•´æ•°æ®åº“çš„æŸ¥è¯¢å‹åŠ›åˆè¢«è¿›ä¸€æ­¥å‡å°‘äº†ã€‚\n2.6 åˆ†åº“åˆ†è¡¨å½“ä¸€ä¸ªæœåŠ¡å™¨å­˜å‚¨ä¸ä¸‹å½“å‰ç³»ç»Ÿçš„å…¨é‡æ•°æ®æ—¶ï¼Œå°±éœ€è¦è¿›è¡Œåˆ†åº“åˆ†è¡¨äº†ã€‚å³å°†æ•°æ®åº“è¿›è¡Œä¸€å®šçš„æ‹†åˆ†ï¼Œå­˜æ”¾åœ¨å¤šä¸ªæœåŠ¡å™¨ä¸­ã€‚\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå°†åŸæœ¬ä¸€ä¸ªæ•°æ®åº“çš„ä¸åŒè¡¨ï¼Œæ”¾åœ¨ä¸åŒæœåŠ¡å™¨ä¸­ã€‚è¿™æ ·ä¸€ä¸ªæœåŠ¡å™¨ä¸Šå°±åªç”¨å­˜æ”¾ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå‡å°‘äº†å­˜å‚¨å®¹é‡çš„åŒæ—¶ï¼Œä¹Ÿå‡å°‘äº†å•ä¸ªæœåŠ¡å™¨åœ¨æŸ¥è¯¢æ–¹é¢çš„å‹åŠ›ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæŸä¸ªè¡¨å»ºç«‹ä¸€ä¸ªå­˜å‚¨çš„é›†ç¾¤ï¼Œè¿™ä¹Ÿæ˜¯ä¾ç…§è´Ÿè½½å‡è¡¡çš„åŸºæœ¬æ€è·¯æ¥æ‰©å±•ä¸»ä»ã€‚\nå¦‚æœä¸€ä¸ªè¡¨è¿‡å¤§ï¼Œæ²¡æœ‰åŠæ³•æ”¾å…¥ä¸€å°ä¸»æœºï¼Œä¹Ÿå¯ä»¥æ ¹æ®è¡¨çš„ä¸»é”®æ¥å°†è¯¥è¡¨æ‹†åˆ†æ”¾å…¥ä¸åŒçš„æœåŠ¡å™¨ã€‚æ¯”å¦‚æœåŠ¡å™¨Aæ”¾å…¥ä¸»é”®1åˆ°10ä¸‡ï¼ŒæœåŠ¡å™¨Bæ”¾å…¥10ä¸‡é›¶1åˆ°20ä¸‡ç­‰ç­‰â€¦â€¦\nè¿™ä¸ªæ‹†åˆ†å¯ä»¥ä¸€ç›´æŒç»­ä¸‹å»ï¼Œç›´åˆ°æ€§èƒ½æ»¡è¶³äº†ä¸šåŠ¡çš„éœ€è¦ã€‚å…·ä½“çš„æ‹†åˆ†æ–¹å¼ä¹Ÿæ˜¯æ ¹æ®å…·ä½“ä¸šåŠ¡æ¥è¿›è¡Œå¤„ç†çš„ã€‚\n\nåˆ†å¸ƒå¼çš„å¤„ç†å…¶å®éƒ½æ˜¯åŸºäºå…·ä½“ä¸šåŠ¡çš„éœ€è¦æ¥åˆ†æçš„ã€‚ä¸šåŠ¡å†³å®šäº†æˆ‘ä»¬åº”è¯¥é€‰å–çš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆã€‚\n2.7 å¾®æœåŠ¡æ¶æ„å‰é¢æåˆ°çš„å¤„ç†éƒ½æ˜¯åœ¨æœåŠ¡å™¨æ‹†åˆ†ã€æ•°æ®åº“æ‹†åˆ†ä¸Šå¤„ç†çš„ã€‚æˆ‘ä»¬çš„åº”ç”¨æœåŠ¡å™¨ä¾æ—§æ˜¯ä¸€ä¸ªæœåŠ¡å™¨èƒ½å®Œæˆè¿™ä¸ªä¸šåŠ¡çš„æ‰€æœ‰ä»»åŠ¡ã€‚è¿™æ ·ä¼šå¯¼è‡´è¯¥åº”ç”¨æœåŠ¡å™¨çš„ä»£ç éå¸¸åºå¤§ï¼Œä¸”éš¾ä»¥è¿›è¡Œç»´æŠ¤ã€‚\næˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªç³»ç»Ÿæ ¹æ®åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ï¼Œç”¨æˆ·ç®¡ç†æ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ã€å•†å“äº¤æ˜“æ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ã€äº¤æ˜“å¤„ç†ä¹Ÿæ˜¯ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¹‹é—´å¯ä»¥é€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶ä¹‹ç±»çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡ã€‚\nè€Œè¯¸å¦‚å®‰å…¨å¤„ç†ç­‰å¤§å®¶éƒ½ç”¨å¾—ä¸Šçš„å…¬å…±æœåŠ¡ï¼Œå¯ä»¥å•å¼€ä¸€ä¸ªè¿›è¡Œå¤„ç†ã€‚\n\nå®é™…ä¸Šï¼Œå¾®æœåŠ¡æ˜¯åœ¨è§£å†³å›¢é˜Ÿåä½œçš„é—®é¢˜ã€‚å•ä¸€åº”ç”¨æœåŠ¡å™¨åœ¨è§„æ¨¡å¤§äº†ä¹‹åä¼šéå¸¸éå¸¸å¤æ‚ï¼Œè€Œä½¿ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œå¯ä»¥å°†å›¢é˜ŸæŒ‰ç…§ä¸šåŠ¡æ‹†åˆ†æˆä¸åŒçš„å°ç»„ï¼Œæ¯ä¸ªå°ç»„åªéœ€è¦ç»´æŠ¤äº§å“ä¸­çš„ä¸€éƒ¨åˆ†æœåŠ¡ï¼Œè¿™æ ·ç»´æŠ¤å•ä¸ªæœåŠ¡çš„éš¾åº¦å°±é™ä½äº†ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä¼ä¸šçš„ç»„ç»‡æ¶æ„çš„åˆ†é…å˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚\nå¾®æœåŠ¡çš„ä¼˜åŠ¿å¾®æœåŠ¡çš„ä¼˜åŠ¿ï¼š\n\nè§£å†³äº†å›¢é˜Ÿç»„ç»‡æ¶æ„åˆ†é…çš„é—®é¢˜\næ–¹ä¾¿ä»£ç åŠŸèƒ½çš„å¤ç”¨ï¼ˆæ¯”å¦‚ä¸åŒæœåŠ¡å®ƒçš„ç”¨æˆ·ç®¡ç†æ¨¡å—çš„ä»£ç å…¶å®æ˜¯å·®åˆ«ä¸å¤§çš„ï¼Œæ–¹ä¾¿è¿›è¡Œå¤ç”¨ï¼‰\nä¸åŒçš„æœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œé’ˆå¯¹æ€§çš„éƒ¨ç½²ï¼ˆæ¯”å¦‚æŸäº›æœåŠ¡çš„æ€§èƒ½éœ€æ±‚ä¸é«˜ï¼Œå°±å¯ä»¥éƒ¨ç½²åœ¨é…ç½®ç›¸å¯¹è¾ƒå·®çš„æœåŠ¡å™¨ä¸Šï¼‰\n\nå¾®æœåŠ¡çš„ç¼ºç‚¹å¾®æœåŠ¡æ¶æ„å¯¹åº”ç”¨æœåŠ¡çš„æ‹†åˆ†ä¼šè¿›ä¸€æ­¥æ‰©å¤§æ•´ä¸ªç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œåæ­£å°±æ˜¯è¶Šæ‹†è¶Šå¤æ‚ã€‚ç¼ºç‚¹å¦‚ä¸‹ï¼š\n\nç³»ç»Ÿå“åº”é€Ÿåº¦é™ä½ï¼šå› ä¸ºä¸åŒçš„æ¨¡å—æ˜¯åœ¨ä¸åŒçš„æœåŠ¡é›†ç¾¤ä¸Šå¤„ç†ï¼Œå®ƒä»¬ä¹‹é—´éœ€è¦ä½¿ç”¨ç½‘ç»œè¿›è¡Œé€šä¿¡ï¼Œç›¸æ¯”äºå•ä¸ªå®Œæ•´çš„åº”ç”¨æœåŠ¡å™¨ï¼Œæ•´ä¸ªç³»ç»Ÿçš„å“åº”é€Ÿåº¦é™ä½äº†ã€‚è¦æƒ³ä¿è¯ç³»ç»Ÿå“åº”é€Ÿåº¦é™ä½å¹…åº¦å°ï¼Œå°±å¾—å¼•å…¥æ›´å¤šçš„ç¡¬ä»¶èµ„æºæ¥å¤„ç†ï¼ˆæ›´å¿«çš„ç½‘å¡ï¼‰\nç³»ç»Ÿå‡ºç°é—®é¢˜æ¦‚ç‡æé«˜ï¼šå› ä¸ºå¾®æœåŠ¡ä¼šå¼•å…¥æ›´å¤šçš„æœºå™¨ï¼Œå¯¼è‡´å‡ºç°é—®é¢˜çš„æ¦‚ç‡è¢«æé«˜ã€‚éœ€è¦æ›´å¤šæ›´è¯¦ç»†çš„ç›‘æ§å’Œå‘Šè­¦æ–¹å¼æ¥ä¿è¯å¤šå°äº‘æœåŠ¡å™¨çš„å¯ç”¨æ€§ã€‚\n\n3.åˆ†å¸ƒå¼ä¸­æ¶‰åŠåˆ°çš„ç›¸å…³æ¦‚å¿µ3.1 åº”ç”¨Application&#x2F;ç³»ç»ŸSystemä¸€ä¸ªåº”ç”¨ï¼ˆç³»ç»Ÿï¼‰å°±æ˜¯ä¸€ä¸ªæˆ–è€…ä¸€ç»„æœåŠ¡å™¨ç¨‹åº\n3.2 æ¨¡å—Module&#x2F;ç»„ä»¶Componetåº”ç”¨ä¸­çš„ä¸åŒåŠŸèƒ½è¢«æ‹†åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œå…±åŒç»„æˆæœ€ç»ˆçš„åº”ç”¨ç¨‹åº\n3.3 åˆ†å¸ƒå¼Distributedå¼•å…¥å¤šä¸ªæœåŠ¡å™¨&#x2F;ä¸»æœºï¼ŒååŒé…åˆå®Œæˆä¸€ç³»åˆ—å·¥ä½œï¼ˆç‰©ç†ä¸Šçš„å¤šä¸ªä¸»æœºï¼‰\n3.4 é›†ç¾¤Clusterå¼•å…¥å¤šä¸ªæœåŠ¡å™¨&#x2F;ä¸»æœºï¼ŒååŒé…åˆå®Œæˆä¸€ç³»åˆ—å·¥ä½œï¼ˆé€»è¾‘ä¸Šçš„å¤šä¸ªä¸»æœºï¼‰\n3.5 ä¸»Master&#x2F;ä»Slaveå¤šä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ä¸­ï¼Œä¸€ä¸ªæ˜¯ä¸»èŠ‚ç‚¹ï¼Œå…¶ä»–æ˜¯ä»èŠ‚ç‚¹ã€‚ä»èŠ‚ç‚¹éœ€è¦ä»ä¸»èŠ‚ç‚¹ä¸­åŒæ­¥æ•°æ®ã€‚\n3.6 ä¸­é—´ä»¶Middlewareå’Œå…·ä½“ä¸šåŠ¡æ— å…³ï¼Œä½†åœ¨ç³»ç»Ÿä¸­éœ€è¦ä½¿ç”¨çš„æœåŠ¡ã€‚æ¯”å¦‚æ•°æ®åº“ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚\n3.7 å¯ç”¨æ€§Availabilityç³»ç»Ÿæ•´ä½“å¯ç”¨æ—¶é—´&#x2F;æ€»æ—¶é—´\n\nä¸‰ä¸ª9ä»£è¡¨å¯ç”¨æ€§æ˜¯99.999%ï¼›\n\n3.8 å“åº”æ—¶é—´Response Time RTç”¨äºè¡¡é‡æœåŠ¡å™¨çš„æ€§èƒ½ï¼Œå“åº”æ—¶é—´è¶Šå¿«è¶Šå¥½\n3.9 ååThroughputå’Œå¹¶å‘Concurrentè¡¡é‡ç³»ç»Ÿå¤„ç†è¯·æ±‚çš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯è¡¡é‡æ€§èƒ½çš„æ–¹å¼ä¹‹ä¸€ã€‚\n4.Redisçš„ç‰¹æ€§æˆ‘ä»¬å¯ä»¥åœ¨redisçš„å®˜ç½‘ä¸Šçœ‹åˆ°redisçš„ç‰¹æ€§ï¼Œä¸€ä¸ªä¸€ä¸ªæ¥è®¤è¯†ä¸€ä¸‹å§\n\n4.1 In-memory data structureså‰é¢å·²ç»æåˆ°è¿‡ï¼ŒRedisæ˜¯ä¸€ä¸ªKVæ–¹å¼çš„å†…å­˜çº§æ•°æ®åº“ï¼Œå®ƒçš„Keyéƒ½æ˜¯stringï¼Œvalueå¯ä»¥æ˜¯stringã€hashã€listã€setã€zsetã€bitmapsã€GEOç­‰å„ç§æ•°æ®ç»“æ„ã€‚\nä½¿ç”¨Key-Valueæ–¹å¼æ¥å­˜æ”¾æ•°æ®çš„æ•°æ®åº“ï¼Œè¢«ç§°ä¸ºéå…³ç³»æ•°æ®åº“ï¼ŒNoSQLä¹Ÿæ˜¯ç±»ä¼¼çš„å«ä¹‰ã€‚\n4.2 Progarmmabilityé’ˆå¯¹Redisçš„æ“ä½œï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„äº¤äº’å¼å‘½ä»¤æ¥å­˜æ”¾æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è„šæœ¬æ¥æ‰¹é‡æ‰§è¡Œä¸€äº›æ“ä½œã€‚\n4.3 ExtentsibilityRedisæä¾›äº†ä¸€ç³»åˆ—APIï¼Œå¯ä»¥åœ¨RedisåŸæœ‰åŠŸèƒ½çš„åŸºç¡€ä¸Šé…ç½®æ‰©å±•ï¼Œæ¯”å¦‚è®©Redisæ”¯æŒæ›´å¤šæ•°æ®ç»“æ„ã€‚æ”¯æŒC&#x2F;C++&#x2F;Rustè¯­è¨€ã€‚\n4.4 PersistenceRedisæ˜¯å°†æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œä½†ä¹Ÿæä¾›äº†æŒä¹…åŒ–æ–¹å¼æ¥ä¿è¯ç³»ç»Ÿé‡å¯æ—¶æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚\n4.5 ClusteringRedisä½œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸­é—´ä»¶ï¼ŒåŸç”Ÿæ”¯æŒé›†ç¾¤éƒ¨ç½²ã€‚\nHorizontal scalability æŒ‡çš„æ˜¯ç³»ç»Ÿçš„æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼Œç±»ä¼¼äºâ€œåˆ†åº“åˆ†è¡¨â€ã€‚\n4.6 High availabilityRedisåŸç”Ÿæ”¯æŒä¸»ä»ç»“æ„ï¼Œä»èŠ‚ç‚¹ç›¸å½“äºä¸»èŠ‚ç‚¹çš„å¤‡ä»½ï¼Œä¸»èŠ‚ç‚¹å¤±æ•ˆæ—¶ä»èŠ‚ç‚¹èƒ½ç«‹é©¬é¡¶ä¸Šå»ï¼ˆæ›¿è¡¥ï¼‰ã€‚\n4.7 å¤©ä¸‹æ­¦åŠŸå”¯å¿«ä¸ç ´Redisèƒ½è¢«å¹¿æ³›çš„ä½¿ç”¨ï¼Œæœ€å¤§çš„åŸå› è¿˜æ˜¯å› ä¸ºå®ƒå¾ˆå¿«ï¼\n\nRedisæ•°æ®åœ¨å†…å­˜ä¸­ï¼Œæ¯”è®¿é—®ç¡¬ç›˜çš„æ•°æ®åº“å¿«çš„å¤šï¼›\nRedisçš„æ ¸å¿ƒåŠŸèƒ½é€»è¾‘è¾ƒä¸ºç®€å•ï¼Œåªæ˜¯æ“ä½œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼›\nRedisä½¿ç”¨äº†IOå¤šè·¯å¤ç”¨(epoll)æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ï¼›\nRedisä½¿ç”¨çš„å•çº¿ç¨‹æ¨¡å‹ï¼ˆé«˜ç‰ˆæœ¬Rediså¼•å…¥äº†å¤šçº¿ç¨‹ï¼‰ï¼Œå‡å°‘äº†çº¿ç¨‹ç«äº‰çš„ä¸å¿…è¦çš„å¼€é”€ã€‚\n\nè¿™é‡Œè¦è¡¥å……ä¸€ç‚¹ï¼Œå¤šçº¿ç¨‹æé«˜æ•ˆç‡çš„å‰ææ˜¯æ‰§è¡Œçš„æ˜¯CPUå¯†é›†å‹çš„æ“ä½œï¼Œå¤šçº¿ç¨‹æ‰èƒ½å……åˆ†åˆ©ç”¨CPUçš„å¤šæ ¸å¿ƒèµ„æºã€‚è€ŒRedisçš„æ ¸å¿ƒåŠŸèƒ½åªæ˜¯æ“ä½œå†…å­˜ä¸­çš„æ•°æ®ï¼Œå¯¹CPUçš„è´Ÿè½½å¹¶ä¸é«˜ã€‚\nç›¸æ¯”MySQLåœ¨å¢åˆ æ”¹æ•°æ®çš„æ—¶å€™éœ€è¦å…³æ³¨æ•°æ®åº“ä¸­çš„å„ç§çº¦æŸï¼Œè¿™äº›æ£€æŸ¥å°±å¢åŠ äº†è´Ÿæ‹…ï¼Œè€—æ—¶ä¹Ÿä¼šè¢«Redisçš„ç®€å•ä¿®æ”¹æ›´é•¿ã€‚\nå¦å¤–ï¼ŒIOå¤šè·¯å¤ç”¨æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ï¼ˆæ¯”å¦‚Linuxæä¾›çš„Cè¯­è¨€æ¥å£ï¼Œè€ŒRedisæ­£å¥½å°±æ˜¯Cè¯­è¨€ç¼–å†™çš„ï¼‰è®©ä¸€ä¸ªçº¿ç¨‹æœ‰åŠæ³•åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰å¤šè·¯å¤ç”¨ï¼Œä¸€ä¸ªçº¿ç¨‹å°±åªèƒ½ç»™ä¸€ä¸ªè¯·æ±‚æœåŠ¡ï¼ŒRedisçš„å•çº¿ç¨‹è®¾è®¡å°±ä¸å¥½ç”¨äº†ã€‚å…·ä½“å¯ä»¥ç‚¹å‡»é“¾æ¥æŸ¥çœ‹æœ¬ç«™çš„åšå®¢ã€‚ã€Linuxã€‘é«˜çº§IOå’Œå¤šè·¯è½¬æ¥ | select&#x2F;poll&#x2F;epoll | æ…•é›ªçš„å¯’èˆ\n5.Redisçš„å•çº¿ç¨‹æ¨¡å‹ä¸Šæ–‡æåˆ°ï¼ŒRedisæ˜¯é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹è¿›è¡Œè®¾è®¡çš„ï¼Œè™½ç„¶é«˜ç‰ˆæœ¬Rediså¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œä½†åªé™äºç½‘ç»œIOéƒ¨åˆ†ï¼ˆå¤šçº¿ç¨‹æ¥å¤„ç†ç½‘ç»œè¯·æ±‚ï¼‰å®é™…çš„å­˜å‚¨æ“ä½œè¿˜æ˜¯ä½¿ç”¨å•çº¿ç¨‹æ¥å¤„ç†çš„ã€‚\nå¤ä¹ ä¸€ä¸‹å¤šçº¿ç¨‹å¹¶å‘å¯èƒ½å¯¼è‡´çš„é—®é¢˜å§ï¼šå‡è®¾ä¸¤ä¸ªRediså®¢æˆ·ç«¯é“¾æ¥äº†æœåŠ¡å™¨ï¼Œéƒ½å¸Œæœ›å¯¹åŒä¸€ä¸ªkeyè¿›è¡Œsetæ“ä½œï¼Œå®¢æˆ·ç«¯Aå¸Œæœ›å°†keyåŠ ä¸€ï¼Œå®¢æˆ·ç«¯Bä¹Ÿå¸Œæœ›å°†keyåŠ ä¸€ï¼Œè¿™ä¸¤ä¸ªè¯·æ±‚å‡ ä¹åŒæ—¶å‘é€ç»™Redisçš„æœåŠ¡å™¨ï¼Œå‡è®¾RedisæœåŠ¡å™¨é‡‡ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°\n\nAçš„è¯·æ±‚è¯»å–äº†keyçš„å½“å‰å€¼ï¼Œå‡†å¤‡è¿›è¡ŒåŠ ä¸€æ“ä½œï¼›\nBçš„è¯·æ±‚è¯»å–äº†keyçš„å½“å‰å€¼ï¼Œä¹Ÿå‡†å¤‡è¿›è¡ŒåŠ ä¸€æ“ä½œï¼›\nç”±äºä¸¤ä¸ªè¯»å–å‡ ä¹æ˜¯åŒæ—¶å‘ç”Ÿçš„ï¼ŒAå’ŒBçš„å¤„ç†çº¿ç¨‹è¯»å–åˆ°çš„keyçš„å€¼ä¸€è‡´ï¼›\næœ€ç»ˆå¯¼è‡´keyåªè¢«åŠ ä¸€äº†ï¼ˆå®é™…éœ€è¦åŠ äºŒï¼‰ï¼›\n\nè€Œå®é™…ä¸Šï¼ŒRedisé‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼ŒAå’ŒBçš„è¯·æ±‚è‚¯å®šä¼šæœ‰ä¸ªå…ˆåé¡ºåºï¼Œæœ€ç»ˆå¤„ç†æ˜¯ä¸²è¡Œï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰çš„ï¼Œè¦ä¹ˆæ˜¯å…ˆå¤„ç†Açš„åŠ ä¸€ï¼Œå†å¤„ç†Bçš„åŠ ä¸€ï¼Œæœ€ç»ˆè‚¯å®šèƒ½å¾—åˆ°åŠ äºŒçš„æ­£ç¡®ç»“æœã€‚\nRedisåœ¨ç½‘ç»œIOä¸Šå¼•å…¥å¤šçº¿ç¨‹ï¼Œä½†åœ¨æ ¸å¿ƒå¤„ç†ä¿æŒå•çº¿ç¨‹ï¼Œå¯ä»¥åœ¨æé«˜ç½‘ç»œIOå¤„ç†æ•ˆç‡çš„åŸºç¡€ä¸Šï¼Œä¿è¯å¯¹æ•°æ®çš„æ“ä½œä¸€å®šæ˜¯ä¸²è¡Œçš„ã€‚\n\nè¿™å°±å¥½æ¯”ä¸€ä¸ªé£Ÿå ‚åªæœ‰ä¸€ä¸ªæ‰“é¥­çª—å£ï¼Œä¸­åˆä¸‹è¯¾äº†ä¸€å †äººå»é£Ÿå ‚ï¼ˆç½‘ç»œIOå¤šçº¿ç¨‹ï¼‰ï¼Œä½†è¿›äº†é£Ÿå ‚ä¹‹åè¿˜æ˜¯å¾—æ’é˜Ÿæ‰“é¥­ï¼ˆä¸²è¡Œï¼‰ã€‚\n\nå› ä¸ºRedisçš„æ ¸å¿ƒæ“ä½œå¯¹CPUçš„è´Ÿè½½å¹¶ä¸é«˜ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰å¿…è¦ä½¿ç”¨å¤šçº¿ç¨‹æ¥æé«˜æ•°æ®å¤„ç†æ–¹é¢çš„æ•ˆç‡ï¼ˆå› ä¸ºä½¿ç”¨å¤šçº¿ç¨‹å°±åŠ¡å¿…éœ€è¦åŠ é”&#x2F;è§£é”ä»¥åŠèµ„æºç«äº‰ï¼Œæœ¬æ¥å¼€é—¨å–ä¸œè¥¿åªéœ€è¦ä¸€ä¸‹å­å°±æå®šäº†ï¼Œç°åœ¨è¿˜å¤šäº†è§£é”&#x2F;å…³é—¨ä¸Šé”çš„æ­¥éª¤ï¼Œæ•ˆç‡å¯èƒ½ä¸å¢åé™ï¼‰ã€‚\nThe end","categories":["ç¼–ç¨‹å­¦ä¹ ","Redis"],"tags":["Redis"]},{"title":"ã€Redisã€‘02.Ubuntu22.04å®‰è£…Redis","url":"/posts/269089114/","content":"å®‰è£…å’Œå¯åŠ¨sudo apt install -y redis\n\nå®‰è£…äº†ä¹‹åä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¯åŠ¨redis\nsudo systemctl start redis\n\nçœ‹ä¸€ä¸‹6379ç«¯å£å·æ˜¯å¦æœ‰è¿›ç¨‹åœ¨ç›‘å¬ï¼Œæœ‰ä»£è¡¨å¯åŠ¨æˆåŠŸäº†\n[root:/etc/redis]# systemctl status redisâ— redis-server.service - Advanced key-value store     Loaded: loaded (/lib/systemd/system/redis-server.service; enabled; vendor preset: enabled)     Active: active (running) since Sat 2024-02-10 14:45:11 CST; 4min 56s ago       Docs: http://redis.io/documentation,             man:redis-server(1)   Main PID: 1350 (redis-server)     Status: &quot;Ready to accept connections&quot;      Tasks: 5 (limit: 9527)     Memory: 7.5M     CGroup: /system.slice/redis-server.service             â””â”€1350 &quot;/usr/bin/redis-server 127.0.0.1:6379&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; &gt;Feb 10 14:45:11 wsl-ubuntu systemd[1]: Starting Advanced key-value store...Feb 10 14:45:11 wsl-ubuntu systemd[1]: Started Advanced key-value store.[root:/etc/redis]# netstat -nltp | grep 6379tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      1350/redis-server 1tcp6       0      0 ::1:6379                :::*                    LISTEN      1350/redis-server 1\n\næ³¨æ„ï¼Œå¦‚æœä½ å°è¯•åœ¨å­ç”¨æˆ·é‡Œç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹redisæ˜¯å¦ç»‘å®šæˆåŠŸç«¯å£ï¼Œå¯èƒ½æŸ¥è¯¢ä¸åˆ°ç»“æœã€‚\nnetstat -nltp | grep redis\n\nå› ä¸ºåœ¨å­ç”¨æˆ·ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸åˆ°å½“å‰å ç”¨6379ç«¯å£çš„è¿›ç¨‹åå­—ã€‚åªæœ‰rootç”¨æˆ·èƒ½çœ‹åˆ°ã€‚\nå…è®¸è¿œç¨‹è®¿é—®é»˜è®¤æƒ…å†µä¸‹redisç»‘å®šçš„ipæ˜¯127.0.0.1ï¼Œè¿™ä¸ªipåœ°å€åªå…è®¸æœ¬æœºè®¿é—®ï¼Œå³ä½ åªèƒ½åœ¨è¿™å°linuxä¸»æœºä¸Šè®¿é—®è¿™ä¸ªredisã€‚\nå¦‚æœæƒ³å®ç°è¿œç¨‹è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦å°†ç»‘å®šçš„ipæ”¹æˆ0.0.0.0ï¼Œå¹¶ä¸”å…³é—­è¿œç¨‹è®¿é—®çš„ä¿æŠ¤\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ‡æ¢åˆ°rootç”¨æˆ·\nsudo su - \n\nè¿›å…¥redisçš„é…ç½®æ–‡ä»¶è·¯å¾„\ncd /etc/redis\n\nè¿™é‡Œæœ‰ä¸€ä¸ªredis.confé…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„æ˜¯ä¸‹é¢çš„æ¡ç›®\nbind 127.0.0.1 ::1protected-mode yes\n\nå°†å®ƒä»¬ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼Œå³å¯ç”¨äº†rediså…è®¸è¿œç¨‹è®¿é—®çš„æ¨¡å¼ã€‚\nbind 0.0.0.0 ::1protected-mode no\n\nä¿®æ”¹å®Œæ¯•é…ç½®æ–‡ä»¶åï¼Œé‡å¯æœåŠ¡å™¨å³å¯ç”Ÿæ•ˆ\nsudo systemctl restart redis\n\nè¿æ¥rediså’ŒMySQLä¸€æ ·ï¼ŒRedisä¹Ÿæ˜¯å®¢æˆ·-æœåŠ¡ç«¯æ¶æ„çš„è½¯ä»¶ã€‚åœ¨Linuxä¸­ï¼Œä½¿ç”¨redis-cliå‘½ä»¤å³å¯ç›´æ¥è¿åˆ°å½“å‰ä¸»æœºçš„redisæœåŠ¡å™¨\n[root:/etc/redis]# redis-cli127.0.0.1:6379&gt; pingPONG127.0.0.1:6379&gt;\n\nå¦‚æœéœ€è¦é“¾æ¥éæœ¬æœºçš„redisæœåŠ¡å™¨ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š\nredis-cli -h IPåœ°å€ -p ç«¯å£\n\nå¦‚æœæƒ³è®©redis-cliä¸­å¯ä»¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼Œå¯ä»¥æ·»åŠ --rawé€‰é¡¹ã€‚æ³¨æ„ï¼šä½¿ç”¨è¯¥é€‰é¡¹ä¼šå¯¼è‡´Redisä¸­æ˜¾ç¤ºçš„(nil)å˜æˆç©ºå­—ç¬¦ä¸²ï¼Œææ˜“äº§ç”Ÿè¯¯å¯¼ï¼å¦‚æœä¸æ˜¯ç¡¬æ€§éœ€è¦åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºä¸­æ–‡ï¼Œè¯·ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ï¼\nredis-cli --raw\n\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒMySQLä¸€æ ·ä½¿ç”¨Cè¯­è¨€çš„å¼€å‘åŒ…æ¥é“¾æ¥redisï¼Œé‚£æ˜¯åè¯äº†ã€‚\nå‘½ä»¤å­¦ä¹ redisçš„å‘½ä»¤å­¦ä¹ å¯ä»¥å‚è€ƒå®˜ç½‘ Commands | Redis\nè™½ç„¶æ˜¯è‹±æ–‡æ–‡æ¡£ï¼Œä½†æ˜¯ç…§ç€ç¿»è¯‘è¯»è¯»å·®ä¸å¤šéƒ½èƒ½çœ‹æ˜ç™½æ˜¯æ€ä¹ˆç”¨çš„ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Redis"],"tags":["Linux","Redis"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ14-PS2æ¸¸æˆæ‰‹æŸ„æ‘‡æ†","url":"/posts/423245526/","content":"æœ¬æ¬¡å®éªŒè¿˜æ˜¯éœ€è¦ç”¨åˆ°PCF8591æ¨¡æ•°è½¬æ¢å™¨ï¼Œè«éå®ƒè¦å–ä»£åŒè‰²LEDæˆä¸ºæ–°çš„å¸¸é©»å˜‰å®¾å—ï¼Ÿ\n\n\n\næœ¬æ¬¡å®éªŒæ˜¯æ‘‡æ†å®éªŒã€‚è¿™ä¸ªç©æ„å¯ä»¥ç”¨äºæ“æ§æœºå™¨äººæˆ–è€…æ˜¯æ ‘è“æ´¾çš„é¥æ§å°è½¦ã€‚å½“ç„¶ï¼Œç”Ÿæ´»ä¸­æœ€å¸¸è§çš„ç”¨é€”è¿˜æ˜¯åœ¨æ¸¸æˆæ‰‹æŸ„ä¸Šã€‚ä¸çŸ¥é“ä½ æ‰“ä¸æ‰“æ¸¸æˆï¼Œæœ‰æ²¡æœ‰ç”¨è¿‡æ‰‹æŸ„ç©æ¸¸æˆå‘¢ï¼Ÿ\n\næœ¬äººæœ‰ä¸€ä¸ªæ¸¸æˆæ‰‹æŸ„ï¼Œç©3aè¿˜æ˜¯æŒºçˆ½çš„ï¼Œå“ˆå“ˆ\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nPS2æ‰‹æŸ„æ¨¡å—\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆå®éªŒ12ï¼‰\nä¸€äº›è·³çº¿\nä¸€ä¸ªä¸€å­—èºä¸åˆ€\n\n\n2.å®éªŒåŸç†\næ‰‹æŸ„æ¨¡å—é€šè¿‡ä»¥90åº¦è§’å®‰è£…ä¸¤ä¸ªç”µä½è®¡æ¥åˆ¤æ–­å½“å‰çš„Xå€¼å’ŒYå€¼ï¼Œä»è€Œè®¡ç®—å‡ºæ‰‹æŸ„çš„æ–¹å‘ã€‚å†åŠ ä¸Šä¸€ä¸ªæŒ‰é’®ï¼Œæ¥åˆ¤æ–­æ‰‹æŸ„è¢«æŒ‰ä¸‹ï¼ˆä¹Ÿå°±æ˜¯æ¸¸æˆæ‰‹æŸ„ä¸Šçš„L3å’ŒR3é”®çš„åŸç†ï¼‰\n\nå¤„äºé™æ­¢ä½ç½®æ—¶ï¼Œæ­¤æ¨¡å—ä»Xå’ŒYäº§ç”Ÿçº¦2.5Vçš„è¾“å‡ºã€‚ç§»åŠ¨æ“çºµæ†å°†å¯¼è‡´è¾“å‡ºåœ¨0våˆ°5Vä¹‹é—´å˜åŒ–ï¼Œå…·ä½“å–å†³äºå…¶æ–¹å‘ã€‚å¦‚æœå°†æ­¤æ¨¡å—è¿æ¥åˆ°å¾®æ§åˆ¶å™¨ï¼Œåˆ™å¯èƒ½ä¼šåœ¨å…¶é™æ­¢ä½ç½®è¯»å–å¤§çº¦512çš„å€¼(ç”±äºå¼¹ç°§å’Œæœºæ„çš„å¾®å°è¯¯å·®è€Œå¼•èµ·çš„ç»†å¾®å˜åŒ–)ã€‚ç§»åŠ¨æ“çºµæ†æ—¶ï¼Œåº”è¯¥çœ‹åˆ°è¯¥å€¼ä»0å˜ä¸ºåˆ°1023ï¼Œå…·ä½“å–å†³äºå…¶ä½ç½®ã€‚\nè¯¥æ¨¡å—æœ‰ä¸¤ä¸ªæ¨¡æ‹Ÿè¾“å‡º(å¯¹åº”Xå’ŒYåæ ‡)å’Œä¸€ä¸ªæ•°å­—è¾“å‡ºï¼Œè¡¨ç¤ºæ˜¯å¦åœ¨Zè½´ä¸ŠæŒ‰ä¸‹ã€‚\nåœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†å¼•è„šXå’ŒYè¿æ¥åˆ°PCF8591A&#x2F;Dè½¬æ¢å™¨çš„æ¨¡æ‹Ÿè¾“å…¥ç«¯å£ï¼Œä»¥ä¾¿å°†æ¨¡æ‹Ÿé‡è½¬æ¢ä¸ºæ•°å­—é‡ã€‚ç„¶ååœ¨æ ‘è“æ´¾ä¸Šç¼–ç¨‹ä»¥æ£€æµ‹æ“çºµæ†çš„ç§»åŠ¨æ–¹å‘\n2.1ç”µè·¯å›¾\n2.2æ¥çº¿å›¾\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nPS2æ‰‹æŸ„æ¨¡å—\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nVRY\n*\nAIN 0\n\n\nVRX\n*\nAIN 1\n\n\nSW\n*\nANI 2\n\n\n5V\n5V\n5V\n\n\nGND\nGND\nGND\n\n\n\nè¿™ä¸ªæ˜¯æˆ‘çš„æ¥çº¿å›¾ï¼Œå…¶å®å¯ä»¥ç›´æ¥ç”¨åŒæ¯å¤´è·³çº¿ç›´æ¥è¿æ¥PCF8591å’Œæ‰‹æŸ„æ¨¡å—ï¼Œä¸è¿‡è¿˜æ˜¯å€ŸåŠ©äº†Tå‹è½¬æ¥æ¿æ¥è¿æ¥äºŒè€…ã€‚\n\n3.æ•ˆæœæ¼”ç¤º3.1ä»£ç ç¤ºä¾‹//PS2æ“ä½œæ†å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#define makerobo_PCF       120   // åŸºç¡€ç®¡è„š120#define uchar\tunsigned charint pcf_AIN0 = makerobo_PCF + 0; // AIN0 ç«¯å£int pcf_AIN1 = makerobo_PCF + 1; // AIN1 ç«¯å£int pcf_AIN2 = makerobo_PCF + 2; // AIN2 ç«¯å£// æ–¹å‘çŠ¶æ€ä¿¡æ¯ char *state[7] = &#123;&quot;home&quot;, &quot;up&quot;, &quot;down&quot;, &quot;left&quot;, &quot;right&quot;, &quot;pressed&quot;&#125;;// æ–¹å‘åˆ¤æ–­å‡½æ•°int makerobo_direction()&#123;\tint ain_x, ain_y, ain_b;       // Xæ–¹å‘ï¼ŒYæ–¹å‘ï¼ŒB æ˜¯å¦æŒ‰ä¸‹\tint makerobo_tmp=0;            // çŠ¶æ€å€¼\tain_x = analogRead(pcf_AIN1);  // Xä¸ºAIN1ç«¯å£\tain_y = analogRead(pcf_AIN0);  // Yä¸ºAIN0ç«¯å£\tain_b = analogRead(pcf_AIN2);  // BæŒ‰ä¸‹ä¸ºAIN2ç«¯å£\t\tif (ain_y &lt;= 30)\t\tmakerobo_tmp = 1;\t\t// up\tif (ain_y &gt;= 225)\t\tmakerobo_tmp = 2;\t\t// down\t\tif (ain_x &gt;= 225)\t\tmakerobo_tmp = 4;\t\t// left\tif (ain_x &lt;= 30)\t\tmakerobo_tmp = 3;\t\t// right\tif (ain_b == 0)\t\tmakerobo_tmp = 5;\t\t// button æŒ‰ä¸‹\tif (ain_x-125&lt;15 &amp;&amp; ain_x-125&gt;-15 &amp;&amp; ain_y-125&lt;15 &amp;&amp; ain_y-125&gt;-15 &amp;&amp; ain_b &gt;= 60)\t\tmakerobo_tmp = 0;\t\t// home ä½ç½®\t\treturn makerobo_tmp;&#125;// ä¸»å‡½æ•°int main (void)&#123;\tint makerobo_tmp=0;       // å½“å‰å€¼\tint makerobo_status = 0;  // çŠ¶æ€å€¼\twiringPiSetup ();\t// åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup (makerobo_PCF, 0x48);\t// æ— çº¿å¾ªç¯\twhile(1) \t&#123;\t\tmakerobo_tmp = makerobo_direction(); // è°ƒç”¨æ–¹å‘åˆ¤æ–­å‡½æ•°\t\tif (makerobo_tmp != makerobo_status) // åˆ¤æ–­çŠ¶æ€æ˜¯å¦å‘ç”Ÿæ”¹å˜\t\t&#123;\t\t\tprintf(&quot;%s\\n&quot;, state[makerobo_tmp]); // æ‰“å°å‡ºæ–¹å‘ä½\t\t\tmakerobo_status = makerobo_tmp;                  // æŠŠå½“å‰çŠ¶æ€èµ‹ç»™çŠ¶æ€å€¼ï¼Œä»¥é˜²æ­¢åŒä¸€çŠ¶æ€å¤šæ¬¡æ‰“å°\t\t&#125;\t&#125;\treturn 0 ;&#125;\n\nè¿™éƒ¨åˆ†æ¯”è¾ƒå¥½ç†è§£ï¼Œä»£ç ä¹Ÿå¾ˆç›´è§‚ã€‚åªæœ‰homeä½ç½®éœ€è¦æˆ‘ä»¬å•ç‹¬è¿›è¡Œè®¡ç®—ï¼ˆå³æ‰‹æŸ„å¤„äºæ­£ä¸­å¿ƒåŒºåŸŸä¸”æ²¡æœ‰æŒ‰ä¸‹çš„æƒ…å†µï¼Œæ‰æ˜¯homeçš„æƒ…å†µï¼‰\n3.2æ•ˆæœç¿»è½¦ä¸è¿‡è½®åˆ°å®é™…æµ‹è¯•çš„æ—¶å€™ï¼Œç¿»å¤§è½¦äº†ã€‚åœ¨æˆ‘è¿˜æ²¡æœ‰åŠ¨æ‘‡æ†çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæ˜¾ç¤ºå‡ºå·¦å’ŒæŒ‰é’®è¢«æŒ‰ä¸‹çš„æç¤ºã€‚æˆ‘å°è¯•ä¿®æ”¹ä»£ç æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œå‘ç°å¹¶ä¸å¯è¡Œ\n\näºæ˜¯æˆ‘ç›´æ¥æŠŠä»£ç ç»™æ³¨é‡Šæ‰ï¼ŒåŠ äº†ä¸€ä¸ªæ‰“å°X\\Y\\Bå½“å‰å€¼çš„ä»£ç \n\nç»“æœå‘¢ï¼Œåœ¨æˆ‘æ²¡åŠ¨æ‘‡æ†çš„æ—¶å€™ï¼Œæ‰“å°å‡ºæ¥çš„Xå’ŒYéƒ½æ˜¯ä¹±ä¸ƒå…«ç³Ÿçš„ã€‚åªæœ‰æŒ‰ä¸‹æ‘‡æ†çš„B&#x3D;0å¯ä»¥è¢«æ­£å¸¸æ£€æµ‹åˆ°ï¼Œå…¶ä»–çš„æ–¹ä½å•¥çš„éƒ½æ˜¯æ¯«æ— ååº”ã€‚\n\nç›´æ¥ç»™è¿™ä¸ªæ¨¡å—ä¸‹è¾¾äº†æ­»äº¡é€šçŸ¥ä¹¦ï¼Œæ‹œæ‹œäº†æ‚¨å˜ï¼\nç»“è¯­é€šè¿‡å­¦ä¹ è¿™ä¸ªæ¨¡å—çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å®é™…ä¸Šä¸€äº›é›¶éƒ¨ä»¶çš„åŸºæœ¬åŸç†å¹¶ä¸æ˜¯éå¸¸éš¾æŒæ¡ã€‚ä¸è¿‡ä½ æƒ³æŠŠä¸€ä¸ªæ‘‡æ†å˜æˆä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆæ‰‹æŸ„ï¼Œé‚£å°±éœ€è¦æ›´å¤æ‚çš„æ§åˆ¶ä»£ç å’Œæ‰‹æŸ„çš„å†…éƒ¨èŠ¯ç‰‡æ¥è½¬ä¹‰è¿™äº›æ•°å­—å€¼äº†ã€‚\n\næœ‰ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå‘¢\n\nè¿˜æ˜¯æœ‰æ‰€æ”¶è·çš„ï¼Œè¦æ˜¯æ‘‡æ†æ²¡åå°±å¥½äº†\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ15-ç”µä½è®¡ä¼ æ„Ÿå™¨","url":"/posts/1509681384/","content":"ä»Šå¤©çš„è¿™ä¸ªå®éªŒéœ€è¦ç”¨ä¸Šä¸¤ä½å¸¸é©»å˜‰å®¾ï¼\nå®ƒä»¬å°±æ˜¯PCF8591å’ŒåŒè‰²LEDï¼\n\n\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\nåŒè‰²LEDæ¨¡å—ï¼ˆå…ƒè€çº§æœ‹å‹ï¼‰\nPCF8591æ¨¡æ•°è½¬æ¢å™¨æ¨¡å—ï¼ˆé•¿è€çº§æœ‹å‹ï¼‰\nç”µä½è®¡ä¼ æ„Ÿå™¨\nä¸€äº›è·³çº¿\n\n\nä¸Šï¼šç”µä½è®¡ä¼ æ„Ÿå™¨ï¼›ä¸‹ï¼šåŒè‰²LED\n\n2.å®éªŒåŸç†2.1åŸºæœ¬åŸç†\nç”µä½è®¡æ˜¯ä¸€ç§ç”¨äºæµ‹é‡ç”µè·¯ä¸­ç”µåŠ¿(ç”µå‹)çš„ä»ªå™¨ã€‚é€šè¿‡ç”µæµè®¡å°†æ¥è‡ªç”µé˜»å¼æ»‘åŠ¨å¯¼çº¿çš„å·²çŸ¥ç”µå‹çš„ä¸€éƒ¨åˆ†ä¸æœªçŸ¥ç”µå‹è¿›è¡Œæ¯”è¾ƒã€‚è°ƒèŠ‚ç”µä½å™¨çš„æ»‘åŠ¨è§¦ç‚¹æˆ–æ¸¸æ ‡ã€‚ç„¶åå°†æ£€æµè®¡çŸ­æš‚åœ°è¿æ¥åœ¨æ»‘åŠ¨è§¦ç‚¹å’ŒæœªçŸ¥ç”µå‹ä¹‹é—´ï¼Œè§‚å¯Ÿæ£€æµè®¡çš„æŒ åº¦ï¼Œå¹¶è°ƒèŠ‚æ»‘åŠ¨åˆ†æ¥å¤´ï¼Œç›´åˆ°æ£€æµè®¡ä¸å†ä»é›¶åæ–œä¸ºæ­¢ã€‚\næ­¤æ—¶ï¼Œæ£€æµè®¡ä¸å†ä»æœªçŸ¥æºæ±²å–ç”µæµï¼Œå¹¶ä¸”å¯ä»¥ä»æ»‘åŠ¨è§¦ç‚¹çš„ä½ç½®è®¡ç®—å‡ºç”µå‹çš„å¹…å€¼ã€‚\n\nç”µä½å™¨ï¼Œåˆç§°POTï¼Œæ˜¯å¯å˜ç”µé˜»å™¨ã€‚ä»–ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°æ”¹å˜å…¶å¤´éƒ¨é¡¶éƒ¨çš„æ—‹é’®æ¥æä¾›å¯å˜çš„ç”µé˜»ã€‚å¯ä»¥åŸºäºä¸¤ä¸ªä¸»è¦å‚æ•°å¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚ä¸€ä¸ªæ˜¯ç”µé˜»(R-ohms)æœ¬èº«ï¼Œå¦ä¸€ä¸ªæ˜¯åŠŸç‡(P-Watts)é¢å®šå€¼ã€‚\n\nåœ¨æœ¬å®éªŒä¸­ï¼ŒPCF8591ç”¨äºè¯»å–ç”µä½è®¡çš„æ¨¡æ‹Ÿå€¼å¹¶å°†å€¼è¾“å‡ºåˆ°åŒè‰²LEDã€‚\nå°†ç”µä½å™¨çš„å¼•è„šSIGï¼ˆç”µä½å™¨ä¸Šçš„OUTç®¡è„šï¼‰è¿æ¥åˆ°PCF8591çš„å¼•è„šAINOã€‚å°†åŒè‰²LEDçš„å¼•è„šRæˆ–å¼•è„šGè¿æ¥åˆ°PCF8591çš„å¼•è„šAOUTï¼Œä»¥è§‚å¯ŸLEDçš„å˜åŒ–ã€‚\n\n2.2æ¥çº¿å›¾æœ‰äº†å‰ä¸¤æ¬¡æ¥çº¿çš„ç»éªŒï¼Œè¿™ä¸€æ¬¡å°±åªéœ€è¦å¤åˆ»å°±è¡Œäº†\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nSDA\nSDA\nSDA\n\n\nSCL\nSCL\nSCL\n\n\n5V\n5V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nç”µä½è®¡\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nOUT\n*\nAIN 0\n\n\nVCC\n5v\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n\nåŒè‰²LED\nTå‹è½¬æ¥æ¿\nPCF8591\n\n\n\nR(ä¸­é—´)\n*\nAOUT\n\n\nGND(-)\nGND\nGND\n\n\nG(S)\n*\n*\n\n\n\nå®ç‰©å›¾ä¸€å¦‚æ—¢å¾€çš„ä¹±ï¼Œå“ˆå“ˆå“ˆ\n\n\n3.å®éªŒæ•ˆæœ3.1ä»£ç ç¤ºä¾‹æœ¬æ¬¡å®éªŒä½¿ç”¨ä¸Šäº†AOUTçš„æ¥å£ï¼Œç”¨äºæ¥æ”¶ç”µä½è®¡çš„ä¿¡å·è€Œæ”¹å˜åŒè‰²LEDäº®åº¦\n//ç”µä½å™¨æ¨¡å—å®éªŒ#include &lt;stdio.h&gt;#include &lt;wiringPi.h&gt;#include &lt;pcf8591.h&gt;#define makerobo_PCF  120 // åŸºç¡€ç®¡è„š120// ä¸»å‡½æ•°int main ()&#123;\tint pcf_value ;     // å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨AINçš„è¾“å…¥å€¼\twiringPiSetup () ;   // è°ƒç”¨åˆå§‹åŒ–å‡½æ•°\t// åœ¨åŸºæœ¬å¼•è„š120ä¸Šè®¾ç½®pcf8591ï¼Œåœ°å€0x48\tpcf8591Setup (makerobo_PCF, 0x48) ;\twhile(1) // æ— é™å¾ªç¯\t&#123;\t\tpcf_value = analogRead  (makerobo_PCF + 0) ;        // è·å–AIN0ä¸Šçš„å€¼ï¼Œè¯»å–ç”µä½å™¨æ¨¡æ‹Ÿé‡å€¼ï¼›\t\tprintf(&quot;Potentiometer Value: %d\\n&quot;, pcf_value);         // æ‰“å°å‡ºè¯¥å€¼    \t\tanalogWrite (makerobo_PCF + 0, pcf_value) ;            // æ§åˆ¶AOUTè¾“å‡ºç”µå¹³æ§åˆ¶LEDç¯\t\tdelay (200) ;  // å»¶æ—¶200ms\t&#125;\treturn 0 ;&#125;\n\n\nè¿™é‡Œå…ˆç”¨Readå‡½æ•°è¯»å–ç”µä½è®¡çš„å€¼ï¼Œç„¶åå†ç”¨Writeå‡½æ•°å†™å…¥åˆ°PCF8591ï¼Œå®ƒç”¨AOUTè¾“å‡ºåˆ°åŒè‰²LEDï¼Œæ¥æ§åˆ¶å®ƒçš„äº®åº¦\n\n3.2å®éªŒæ•ˆæœå¦‚æœä½ çœ‹è¿‡å®éªŒ12çš„åšå®¢çš„è¯ï¼Œä½ åº”è¯¥è¿˜è®°å¾—ï¼ŒPCF8591ä¸Šä¹Ÿæœ‰ä¸€ä¸ªç”µä½è®¡ï¼Œä»–ä¹Ÿèƒ½å®ç°æœ¬æ¬¡å®éªŒçš„æ•ˆæœã€‚\n\nä½†ä¸åŒçš„æ˜¯ï¼Œæœ¬æ¬¡å®éªŒä½¿ç”¨çš„æ˜¯å•ç‹¬çš„ç”µä½è®¡æ¨¡å—ï¼Œè°ƒèŠ‚æ›´åŠ æ–¹ä¾¿ï¼Œä¸éœ€è¦ä½¿ç”¨èºä¸åˆ€\n\nè¿è¡Œç¨‹åºï¼Œå±å¹•ä¸Šä¼šæ‰“å°å‡ºç”µä½è®¡æ¥æ”¶åˆ°çš„å€¼ï¼Œé€šè¿‡è°ƒèŠ‚æ—‹é’®ï¼Œå€¼åœ¨0-255ä¹‹é—´æ³¢åŠ¨\n\næ•ˆæœå¦‚å›¾ï¼Œè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„\n\nç»“è¯­æœ¬ç¯‡åšå®¢åˆ°æ­¤ç»“æŸï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€Curlã€‘é€šè¿‡curlæ¨¡æ‹Ÿrefererè·å–åˆ°æœ‰é˜²ç›—é“¾çš„å›¾ç‰‡","url":"/posts/2721043914/","content":"æœ¬æ–‡æ‰€æè¿°æ“ä½œä»…ä¾›å­¦ä¹ curlå‘½ä»¤ï¼Œè¯·å‹¿ç”¨äºç›—åˆ·ä»–äººå›¾åºŠç­‰è¿è§„æ“ä½œï¼ğŸ™…â€â™€ï¸\n\n\n1.è¯´æ˜å½“æˆ‘æƒ³æŠŠ51laæ·»åŠ åˆ°æˆ‘çš„å¯¼èˆªç«™ç‚¹ï¼Œå´å‘ç°å®ƒçš„iconå›¾æ ‡æœ‰é˜²ç›—é“¾ï¼Œç¦æ­¢ç©ºrefererè®¿é—®çš„ï¼›\nè¿™ç‚¹å®Œå…¨å¯ä»¥ç†è§£ï¼Œä¸ºäº†é˜²æ­¢ä»–äººç›—åˆ·æœ¬ç«™çš„å›¾ç‰‡ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½éœ€è¦ç»™å›¾ç‰‡åœ°å€åŠ ä¸Šé˜²ç›—é“¾ã€‚\n\nå…¶å®51laæä¾›äº†è‡ªå·±çš„iconï¼Œä½†è¿™é‡Œæä¾›çš„iconåƒç´ ç‰¹åˆ«ä½ï¼Œåªæœ‰16*16ï¼Œåœ¨æˆ‘çš„å¯¼èˆªç«™ç‚¹ä¸Šçš„æ˜¾ç¤ºå°±æ²¡æœ‰é‚£ä¹ˆå‹å¥½äº†\n\n\næ‰€ä»¥æˆ‘æ‰æƒ³æŠŠç¨å¾®æ¸…æ™°ä¸€ç‚¹çš„iconå›¾æ ‡ä¸‹è½½ä¸‹æ¥\n2.curlä½¿ç”¨\nå‚è€ƒ https://www.ruanyifeng.com/blog/2019/09/curl-reference.html\n\nè¦é¿å¼€è¿™ä¸ª403è®¿é—®æƒé™ï¼Œéœ€è¦åšçš„å°±æ˜¯ç»™è¯·æ±‚å¤´ç»™å®šä¸€ä¸ªrefererå­—æ®µï¼Œå‘Šè¯‰51laçš„æœåŠ¡å™¨ï¼Œæˆ‘æ˜¯é€šè¿‡ä»–è‡ªå·±çš„åŸŸåè®¿é—®å›¾æ ‡æ–‡ä»¶\ncurl \\-H &#x27;Referer: https://v6.51.la/&#x27; \\https://v6-static.51.la/v6-static/202302161047/favicon.ico \\-o favicon.ico\n\nå¯¹ä¸Šé¢æåˆ°çš„å‡ ä¸ªå‚æ•°åšä¸€å®šè§£é‡Š\n\n-H è®¾å®šè¯·æ±‚å¤´ï¼Œéœ€è¦ç¬¦å·httpåè®®çš„æ ‡å‡†key: value\n-o å°†è·å–åˆ°çš„å†…å®¹ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œåœ¨åé¢æŒ‡å®šæ–‡ä»¶åï¼ˆè¿™é‡Œæˆ‘æŒ‡å®šä¸ºäº†favicon.icoï¼‰\n\nåœ¨linuxä¸‹ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå°±èƒ½æˆåŠŸæ‹‰å–åˆ°51laçš„ç«™ç‚¹å›¾ç‰‡\n\nå¦‚æœä¸åŠ refererå­—æ®µï¼Œåˆ™è¿˜æ˜¯ä¼šè¿”å›403\n$ curl https://v6-static.51.la/v6-static/202302161047/favicon.ico &lt;html&gt;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;openresty&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;\n\nå¤‡æ³¨ï¼šwindowsä¸‹ä½¿ç”¨è¿™ä¸ªcurlå‘½ä»¤ä¼šæŠ¥é”™ï¼Œå› ä¸ºwindowsä¸‹çš„curlå‚æ•°å’Œlinuxä¸‹æ˜¯ä¸åŒçš„ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["Linux","curl"]},{"title":"ã€æ ‘è“æ´¾ã€‘å®éªŒ09-èœ‚é¸£å™¨æ¨¡å—","url":"/posts/2377108764/","content":"\n\nå‰è¨€æœ€è¿‘å­¦ä¹ æ¿€æƒ…ä¸æ˜¯å¾ˆé«˜ï¼Œè™½ç„¶ä»£ç å­¦äº†å¾ˆå¤šï¼Œä½†æ˜¯é«˜æ•°å’Œå¤§ç‰©ç›´æ¥æ‘†çƒ‚äº†ï¼Œå‘œå‘œå‘œå‘œ\n\n\nå…³æ³¨æœ¬ä¸“æ ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ æ ‘è“æ´¾å¼€å‘æ¿30+ç»å…¸å®éªŒï¼\nCè¯­è¨€ä»£ç ï¼Œ0åŸºç¡€å‰–æï¼\n\nè¿˜ç­‰ä»€ä¹ˆğŸ˜å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼ğŸ‘‰ç‚¹æˆ‘å…³æ³¨\n\næœ¬ä¸“æ ä»£ç ä»“åº“ğŸ“ï¼šRaspberry-practice\n\n\n\n\n1.å®éªŒå™¨æ\næ ‘è“æ´¾å¼€å‘æ¿\n40pè½¯æ’çº¿+Tå‹è½¬æ¥æ¿+é¢åŒ…æ¿\næœ‰æºèœ‚é¸£å™¨\næ— æºèœ‚é¸£å™¨\nä¸€å †è·³çº¿\n\n\nä¸‹ï¼šæœ‰æºèœ‚é¸£å™¨ï¼›ä¸Šï¼šæ— æºèœ‚é¸£å™¨\nå®ƒä»¬çš„å¤–è§‚å‡ ä¹ä¸€æ ·ã€‚å¦‚æœæ˜¯æ²¡æœ‰è£…é…å¥½çš„å•ç‹¬æ¨¡å—ï¼Œæ— æºèœ‚é¸£å™¨åº•éƒ¨çš„ç”µè·¯å¼•è„šå¸¦æœ‰ç»¿è‰²pcbï¼Œè€Œæœ‰æºèœ‚é¸£å™¨åº•éƒ¨æ˜¯é»‘è‰²å¡‘æ–™å¤–å£³ã€‚å› ä¸ºæ¨¡å—å·²ç»ç„Šæ¥åˆ°äº†ç”µè·¯æ¿ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹ä¸åˆ°å®ƒä»¬çš„åº•éƒ¨å¼•è„šã€‚\n\n2.å®éªŒåŸç†èœ‚é¸£å™¨å±äºå£°éŸ³æ¨¡å—ã€‚æœ‰æºèœ‚é¸£å™¨å¸¸ç”¨äºå‘å‡ºå•ä¸€çš„æç¤ºæ€§æŠ¥è­¦å£°éŸ³ï¼Œæ²¡æœ‰é¢‘ç‡å˜åŒ–ï¼Œå†…ç½®æŒ¯è¡å™¨ï¼›æ— æºèœ‚é¸£å™¨çš„é©±åŠ¨æ–¹å¼ä¸ºé¢‘ç‡è„‰å†²é©±åŠ¨ï¼Œå¯ä»¥å‘å‡ºå„ç§æœ‰é¢‘ç‡çš„ä¿¡å·å£°éŸ³ã€‚\n\næœ‰æºèœ‚é¸£å™¨å†…éƒ¨æœ‰ä¸€ä¸ªç®€å•çš„æŒ¯è¡ç”µè·¯ï¼Œèƒ½å°†æ’å®šçš„ç›´æµç”µè½¬åŒ–æˆä¸€å®šé¢‘ç‡çš„è„‰å†²ä¿¡å·ï¼Œç¨‹åºæ§åˆ¶æ–¹ä¾¿ä½†é¢‘ç‡å›ºå®šï¼Œå•ç‰‡æœºä¸€ä¸ªé«˜ä½ç”µå¹³å°±å¯ä»¥è®©å…¶å‘å‡ºå£°éŸ³ã€‚\næ— æºèœ‚é¸£å™¨å’Œç”µç£æ‰¬å£°å™¨ä¸€æ ·æ²¡æœ‰å†…éƒ¨é©±åŠ¨ç”µè·¯ï¼Œéœ€è¦æ¥åœ¨éŸ³é¢‘è¾“å‡ºç”µè·¯ä¸­æ‰èƒ½å‘å£°ã€‚å¦‚æœç»™ç›´æµä¿¡å·æ˜¯ä¸å“çš„ï¼Œå› ä¸ºç£è·¯æ’å®šï¼Œå¿…é¡»ç”¨2K-5Kçš„æ–¹æ³¢å»é©±åŠ¨å®ƒã€‚å£°éŸ³é¢‘ç‡å¯æ§ï¼Œå¯ä»¥åšå‡ºâ€œå¤šæ¥ç±³å‘ç´¢æ‹‰è¥¿â€çš„æ•ˆæœã€‚\nåœ¨ä¸€äº›ç‰¹ä¾‹ä¸­ï¼Œå¯ä»¥å’ŒLEDå¤ç”¨ä¸€ä¸ªæ§åˆ¶å£ã€‚\n\nå®ƒä»¬çš„ç”µè·¯åŸç†å›¾æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æ§åˆ¶æ–¹å¼ä¸åŒ\n\nå› ä¸ºæœ‰ä¸¤ä¸ªä¸åŒçš„æ¨¡å—ï¼Œæ‰€ä»¥ä¸‹æ–‡å°†åˆ†å¼€è®²è§£\n3.æœ‰æºèœ‚é¸£å™¨æ¨¡å—æœ‰æºèœ‚é¸£å™¨æœ‰å†…ç½®æŒ¯è¡æºï¼Œåªéœ€è¦æ¥çº¿å°±ä¼šå‘å‡ºèœ‚é¸£å£°ï¼Œä½†å®ƒçš„å‘å£°æ˜¯å›ºå®šé¢‘ç‡çš„ã€‚è¿™ç‚¹å’Œå†…ç½®äº†æ§åˆ¶èŠ¯ç‰‡çš„ä¸ƒå½©LEDæ¨¡å—å¾ˆç›¸ä¼¼ã€‚\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næœ‰æºèœ‚é¸£å™¨\n\n\n\nGPIO 0\nGPIO 17\nI&#x2F;O\n\n\n3.3V\n3.3V\nVCC\n\n\nGND\nGND\nGND\n\n\n\nåœ¨è¿æ¥ä¸Šç”µè·¯åï¼Œæœ‰æºèœ‚é¸£å™¨å°±ä¼šå“”å“”å“”å«ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶è¾“å…¥ç”µå¹³çš„é«˜ä½ï¼Œæ¥æ§åˆ¶å®ƒçš„å¼€å…³\n3.1ä»£ç ç¤ºä¾‹//æœ‰æºèœ‚é¸£å™¨#include &lt;wiringPi.h&gt;#include &lt;stdio.h&gt;#define makerobo_BuzzerPin  0  // æœ‰æºèœ‚é¸£å™¨ç®¡è„šå®šä¹‰int main()&#123;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(wiringPiSetup() == -1)&#123;         printf(&quot;setup wiringPi failed !&quot;);        return 1;      &#125;       pinMode(makerobo_BuzzerPin,  OUTPUT); // æœ‰æºèœ‚é¸£å™¨è®¾ç½®ä¸ºè¾“å‡ºæ¨¡å¼    // æ— é™å¾ªç¯    while(1)    &#123;               digitalWrite(makerobo_BuzzerPin, LOW);        \t// èœ‚é¸£å™¨ä¸ºä½ç”µå¹³è§¦å‘ï¼Œæ‰€ä»¥ä½¿èƒ½èœ‚é¸£å™¨è®©å…¶å‘å£°            delay(100);           // å»¶æ—¶100ms            digitalWrite(makerobo_BuzzerPin, HIGH);         \t// èœ‚é¸£å™¨è®¾ç½®ä¸ºé«˜ç”µå¹³ï¼Œå…³é—­èœ‚é¸£å™¨            delay(100);           // å»¶æ—¶100ms    &#125;       return 0;&#125;\n\n3.2ç¼–è¯‘ä»£ç ç¬¬ä¸€æ¬¡ç¼–è¯‘è¿™ä¸ªä»£ç çš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™ã€‚æ„æ€å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯wiringPiåº“æ²¡æœ‰è¿æ¥ä¸Šï¼Œå› ä¸ºæˆ‘å¿˜è®°åœ¨æœ€æœ«å°¾åŠ ä¸Š-lwiringPiäº†\n\næ­£ç¡®çš„ç¼–è¯‘æŒ‡ä»¤å¦‚ä¸‹\ngcc 09activebuzzer.c -o ACTIVE -lwiringPi\n\nç¼–è¯‘æˆåŠŸ\n\n3.3å®éªŒæ•ˆæœæ”¹å˜delayå‡½æ•°çš„å‚æ•°ï¼Œå°±èƒ½å¬åˆ°èœ‚é¸£å™¨å£°éŸ³çš„å˜æ¢ã€‚è®¾ç½®æˆdelay(1000)å¯ä»¥å»¶é•¿å£°éŸ³æ•ˆæœ\n\nç¬¬ä¸€æ¬¡æ¥çº¿çš„æ—¶å€™ï¼Œæˆ‘ä¸å°å¿ƒæŠŠå®ƒæ¥åœ¨äº†5vçš„ç®¡è„šä¸Šï¼Œå¯¼è‡´è¾“å…¥é«˜ç”µå¹³å¹¶ä¸èƒ½å…³é—­èœ‚é¸£å™¨ï¼Œè€Œæ˜¯è¿‘ä¼¼äºæ”¹å˜äº†èœ‚é¸£å™¨çš„é¢‘ç‡ï¼ˆæˆ‘å¬ä¸å‡ºæ˜¯éŸ³é‡å˜äº†è¿˜æ˜¯é¢‘ç‡å˜äº†ï¼‰\nä¿®æ­£é”™è¯¯ï¼Œæ¥çº¿åœ¨3.3vç®¡è„šä¸Šåï¼Œæœ‰æºèœ‚é¸£å™¨å¯ä»¥æ­£å¸¸å…³é—­\n\næ€»æ‰€å‘¨çŸ¥ï¼Œå›¾ç‰‡æ˜¯æ²¡æœ‰å£°éŸ³çš„ã€‚æ‰€ä»¥æˆ‘æŠŠä¸¤ä¸ªæƒ…å†µçš„å½•éŸ³æ–‡ä»¶éƒ½æ”¾åœ¨äº†giteeä»“åº“ğŸ‘‰ä¼ é€é—¨\n\n4.æ— æºèœ‚é¸£å™¨æ— æºèœ‚é¸£å™¨å¯ä»¥é€šè¿‡è¾“å…¥pwmæ¥æ§åˆ¶å‘å£°é¢‘ç‡\nå®ƒçš„æ¥çº¿æ–¹å¼å’Œæœ‰æºèœ‚é¸£å™¨ç›¸åŒ\n\n\n\næ ‘è“æ´¾\nTå‹è½¬æ¥æ¿\næ— æºèœ‚é¸£å™¨\n\n\n\nGPIO 0\nGPIO 17\nI&#x2F;O\n\n\n3.3V\n3.3V\nVCC\n\n\nGND\nGND\nGND\n\n\n\n\n4.1ä»£ç ç¤ºä¾‹//æ— æºèœ‚é¸£å™¨#include &lt;wiringPi.h&gt;#include &lt;softTone.h&gt;#include &lt;stdio.h&gt;#define makerobo_BuzPin    0 // æœ‰æºèœ‚é¸£å™¨ç®¡è„šå®šä¹‰// éŸ³è°±å®šä¹‰// ä½CéŸ³ç¬¦çš„é¢‘ç‡#define  Tone_CL1  131#define  Tone_CL2  147#define  Tone_CL3  165#define  Tone_CL4  175#define  Tone_CL5  196#define  Tone_CL6  221#define  Tone_CL7  248// ä¸­CéŸ³çš„é¢‘ç‡#define  Tone_CM1  262#define  Tone_CM2  294#define  Tone_CM3  330#define  Tone_CM4  350#define  Tone_CM5  393#define  Tone_CM6  441#define  Tone_CM7  495// é«˜CéŸ³ç¬¦çš„é¢‘ç‡#define  Tone_CH1  525#define  Tone_CH2  589#define  Tone_CH3  661#define  Tone_CH4  700#define  Tone_CH5  786#define  Tone_CH6  882#define  Tone_CH7  990// ç¬¬ä¸€é¦–æ­ŒéŸ³è°±int makerobo_song_1[] = &#123;Tone_CM3,Tone_CM5,Tone_CM6,Tone_CM3,Tone_CM2,Tone_CM3,Tone_CM5,Tone_CM6,Tone_CH1,Tone_CM6,Tone_CM5,Tone_CM1,Tone_CM3,Tone_CM2,                         Tone_CM2,Tone_CM3,Tone_CM5,Tone_CM2,Tone_CM3,Tone_CM3,Tone_CL6,Tone_CL6,Tone_CL6,Tone_CM1,Tone_CM2,Tone_CM3,Tone_CM2,Tone_CL7,                         Tone_CL6,Tone_CM1,Tone_CL5&#125;;// ç¬¬ä¸€é¦–æ­ŒèŠ‚æ‹int makerobo_beat_1[] = &#123;1,1,3,1,1,3,1,1,1,1,1,1,1,1,3,1,1,3,1,1,1,1,1,1,1,2,1,1,                         1,1,1,1,1,1,3&#125;;// ç¬¬äºŒé¦–æ­ŒéŸ³è°±int makerobo_song_2[] = &#123;Tone_CM1,Tone_CM1,Tone_CM1,Tone_CL5,Tone_CM3,Tone_CM3,Tone_CM3,Tone_CM1,Tone_CM1,Tone_CM3,Tone_CM5,Tone_CM5,Tone_CM4,Tone_CM3,Tone_CM2,                         Tone_CM2,Tone_CM3,Tone_CM4,Tone_CM4,Tone_CM3,Tone_CM2,Tone_CM3,Tone_CM1,Tone_CM1,Tone_CM3,Tone_CM2,Tone_CL5,Tone_CL7,Tone_CM2,Tone_CM1                        &#125;;// ç¬¬äºŒé¦–æ­ŒèŠ‚æ‹int makerobo_beat_2[] = &#123;1,1,1,3,1,1,1,3,1,1,1,1,1,1,3,1,1,1,2,1,1,1,3,1,1,1,3,3,2,3&#125;;int main()&#123;    int i;    //åˆå§‹åŒ–è¿æ¥å¤±è´¥æ—¶ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(wiringPiSetup() == -1)&#123;        printf(&quot;makerobo setup wiringPi failed !&quot;);        return 1;    &#125;    //è½¯ä»¶æ¨¡æ‹ŸToneåº“åˆå§‹åŒ–è¯†åˆ«ï¼Œå°†æ¶ˆæ¯æ‰“å°åˆ°å±å¹•    if(softToneCreate(makerobo_BuzPin) == -1)&#123;        printf(&quot;makerobo setup softTone failed !&quot;);        return 1;    &#125;    while(1)&#123;        printf(&quot;makerobo music is being played...\\n&quot;);  // å¼€å§‹æ’­æ”¾éŸ³ä¹        // æ’­æ”¾ç¬¬ä¸€é¦–æ­ŒéŸ³ä¹        for(i=0;i&lt;sizeof(makerobo_song_1)/4;i++)&#123;            softToneWrite(makerobo_BuzPin, makerobo_song_1[i]);             //ç¬¬ä¸€é¦–æ­ŒéŸ³è°±            delay(makerobo_beat_1[i] * 500);   //ç¬¬ä¸€é¦–æ­ŒèŠ‚æ‹        &#125;        // æ’­æ”¾ç¬¬äºŒé¦–æ­ŒéŸ³ä¹        for(i=0;i&lt;sizeof(makerobo_song_2)/4;i++)&#123;            softToneWrite(makerobo_BuzPin, makerobo_song_2[i]);             //ç¬¬äºŒé¦–æ­ŒéŸ³è°±            delay(makerobo_beat_2[i] * 500);     //ç¬¬äºŒé¦–æ­ŒèŠ‚æ‹        &#125;    &#125;    return 0;&#125;\n\néŸ³ç¬¦é¢‘ç‡å¯¹ç…§è¡¨\n\néŸ³é˜¶ â€ƒâ€ƒéŸ³é˜¶æ˜¯éŸ³ä¹å¿…ä¸å¯å°‘çš„è¦ç´ ï¼Œä¸»è¦ç”±å£°éŸ³çš„é¢‘ç‡å†³å®šã€‚é€šè¿‡ç»™èœ‚é¸£å™¨ä¸åŒé¢‘ç‡çš„éŸ³é¢‘è„‰å†²ï¼Œå¯ä»¥äº§ç”Ÿä¸åŒçš„éŸ³é˜¶ï¼Œè€Œè¦äº§ç”ŸæŸé¢‘ç‡çš„éŸ³é¢‘è„‰å†²ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯ä»¥è¯¥éŸ³é¢‘çš„é¢‘ç‡é™¤ä»¥2çš„å€¼ï¼Œå‡½æ•°ä½¿ç”¨è¯¥å€¼ä¸ºå‚æ•°æ”¹å˜èœ‚é¸£å™¨è¾“å…¥æ–¹æ³¢ä¿¡å·çš„é¢‘ç‡ï¼Œèœ‚é¸£å™¨ä¸Šå°±å¯å‘å‡ºè¯¥é¢‘ç‡çš„å£°éŸ³ã€‚ â€ƒâ€ƒè‹¥æƒ³æ”¹å˜éŸ³é˜¶ï¼Œåªéœ€è¦æ”¹å˜é¢‘ç‡å³å¯ã€‚ä¸‹è¡¨ä¸ºå„éŸ³è°ƒéŸ³ç¬¦é¢‘ç‡å¯¹ç…§è¡¨ï¼Œæ®æ­¤å¯äº§ç”Ÿä¸åŒéŸ³é˜¶çš„éŸ³ç¬¦ã€‚â€œ#â€è¡¨ç¤ºåŠéŸ³ï¼Œç”¨äºä¸Šå‡æˆ–ä¸‹é™åŠä¸ªéŸ³ï¼Œä¹˜ä»¥2å°±æå‡è¯¥å£°éŸ³ä¸€ä¸ª8åº¦éŸ³é˜¶ï¼Œå‡åŠåˆ™é™ä¸€ä¸ª8åº¦ã€‚\n\nèŠ‚æ‹ â€ƒâ€ƒè‹¥è¦æ„æˆéŸ³ä¹ï¼Œå…‰æœ‰éŸ³é˜¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦èŠ‚æ‹ï¼Œä¹Ÿå°±æ˜¯éŸ³ç¬¦æŒç»­æ—¶é—´çš„é•¿çŸ­ï¼Œä¸€èˆ¬ç”¨æ‹æ•°è¡¨ç¤ºã€‚è‡³äº1æ‹æ˜¯å¤šå°‘ç§’ï¼Œæ²¡æœ‰ä¸¥æ ¼çš„è§„å®šï¼Œåªè¦èŠ‚æ‹é€‚å®œï¼Œå£°éŸ³æ‚¦è€³å³å¯ã€‚å‡å¦‚æŸé¦–æ­Œæ›²çš„èŠ‚å¥æ˜¯æ¯åˆ†é’Ÿ120æ‹ï¼Œé‚£ä¹ˆ1æ‹ä¸º0.5sï¼Œ1&#x2F;4æ‹ä¸º0.125sï¼Œä»¥æ­¤ç±»æ¨å¯å¾—åˆ°å…¶ä»–èŠ‚æ‹å¯¹åº”çš„æ—¶é•¿ã€‚è¿™æ ·ï¼Œåˆ©ç”¨ä¸åŒçš„é¢‘ç‡ï¼ŒåŠ ä¸Šä¸æ‹æ•°å¯¹åº”çš„å»¶æ—¶ï¼Œå°±æ„æˆäº†ä¹æ›²ã€‚\n\n\nä»¥ä¸Šå¼•ç”¨è‡ªè¿™ä½å¤§ä½¬çš„åšå®¢ğŸ‘‰åŸæ–‡é“¾æ¥\n\næˆ‘æ‰¾æ¥äº†ä¸€ç« éŸ³ç¬¦ä¸é¢‘ç‡çš„å¯¹ç…§è¡¨ï¼Œä¾›å¤§å®¶å‚è€ƒ\n\nsoftToneè½¯ä»¶éŸ³é¢‘åº“ç±»ä¼¼äºsoftPWMï¼ŒwiringPiåº“ä¸­è¿˜åŒ…å«äº†ä¸€ä¸ªè½¯ä»¶éŸ³é¢‘åº“ï¼Œé€šè¿‡è¾“å…¥ä¸åŒçš„éŸ³é¢‘é¢‘ç‡æ¥ä½¿æ— æºèœ‚é¸£å™¨å‘å‡ºä¸åŒçš„å£°éŸ³\n\nè¿™é‡Œæåˆ°äº†éœ€è¦åœ¨ç¼–è¯‘æ–‡ä»¶æ—¶åŠ å…¥-lpthreadé€‰é¡¹ï¼Œå®æµ‹ä¸éœ€è¦åŠ å…¥ä¹Ÿå¯ä»¥æ­£å¸¸ç¼–è¯‘å‡ºæ¥\n4.2ç¼–è¯‘ä»£ç gcc 09passivebuzzer.c -o PASSIVE -lwiringPi\n\n\n4.3å®éªŒæ•ˆæœèœ‚é¸£å™¨çš„ç¡®å‘å‡ºäº†ä¸åŒé¢‘ç‡çš„å£°éŸ³ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰å®ƒå¹¶æ²¡æœ‰å”±æ­Œï¼Œå“ˆå“ˆğŸ˜‚\nå½•éŸ³æ–‡ä»¶ä¹Ÿæ”¾åœ¨giteeä»“åº“é‡Œé¢å•¦ï¼ğŸ‘‰ä¼ é€é—¨\n\nç»“è¯­è¿™ä¸¤ä¸ªä¼ æ„Ÿå™¨å’Œä¹‹å‰å®éªŒä¸­å‡ºç°çš„åŒè‰²LEDå¾ˆåƒï¼Œä¸è¿‡ä¸€ä¸ªæ˜¯ä»¥å£°éŸ³ä¸ºåª’ä»‹ï¼Œä¸€ä¸ªæ˜¯ä»¥å…‰ä¸ºåª’ä»‹æ¥ä¼ é€’ä¿¡æ¯\næœ¬ç¯‡åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ²¡äº‹å°±åƒæ ‘è“æ´¾"],"tags":["Linux","Cè¯­è¨€","æ ‘è“æ´¾"]},{"title":"ã€å¾®æœºã€‘DOSBoxåœ¨windowsä¸Šçš„å®‰è£…å’Œmasmçš„é…ç½®","url":"/posts/2839269095/","content":"æœ€è¿‘å­¦æ ¡å­¦ä¹ å¾®å‹è®¡ç®—æœºåŸç†ä¸æ¥å£æŠ€æœ¯ï¼Œéœ€è¦ç”¨åˆ°DOSBoxæ¥æ¨¡æ‹ŸDOSç¯å¢ƒè¿›è¡Œæ±‡ç¼–ç¼–ç¨‹çš„å­¦ä¹ ã€‚\næœ¬æ–‡è®°å½•äº†å¦‚ä½•åœ¨windows11&#x2F;10ä¸Šå®‰è£…DOSBox0.74å¹¶é…ç½®masm5\n1.å®‰è£…è¿™ä¸¤ä¸ªè½¯ä»¶æˆ‘æ‰“åŒ…ä¸Šä¼ åˆ°äº†ç™¾åº¦äº‘ç›˜ã€‚æ”¾å¿ƒï¼ŒåŠ èµ·æ¥ä¹Ÿå°±2mbï¼Œä¸‹è½½åº”è¯¥ä¸ä¼šå¾ˆä¹…\né“¾æ¥: https://pan.baidu.com/s/1vjbSL7iwP8WpMVA9K505ZAæå–ç : kr4x\n\n1.1 DOSBoxç‚¹å‡»DOSBox0.74çš„å®‰è£…åŒ…ï¼Œæ— è„‘ä¸‹ä¸€æ­¥å®‰è£…å³å¯\n\nå®‰è£…å‡ºæ¥çš„å›¾æ ‡å¦‚ä¸‹\n\n1.2 masm5æ‰¾ä¸€ä¸ªç©ºçš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶è·¯å¾„ä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ã€ç‰¹æ®Šå­—ç¬¦å’Œä¸­æ–‡ï¼Œå°†masm5.zipä¸­çš„æ–‡ä»¶å…¨éƒ¨è§£å‹åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚ä¸‹å›¾\n\néšåä¿®æ”¹DOSBoxè½¯ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œå³é”®æ¡Œé¢ä¸ŠDosboxè½¯ä»¶çš„å¿«æ·å›¾æ ‡ï¼Œé€‰æ‹©æ‰“å¼€æ–‡ä»¶æ‰€åœ¨ä½ç½®æ‰¾åˆ°DOSBoxè½¯ä»¶çš„å®‰è£…è·¯å¾„ï¼Œç‚¹å‡»DOSBox 0.74 Options.batæ–‡ä»¶ï¼Œç¨ç­‰ç‰‡åˆ»ï¼Œä¼šä»¥è®°äº‹æœ¬çš„æ–¹å¼æ‰“å¼€é…ç½®æ–‡ä»¶ã€‚\n\næ‹‰åˆ°é…ç½®æ–‡ä»¶æœ€åº•ä¸‹ï¼Œæ–°å¢å¦‚ä¸‹é…ç½®ã€‚ä½ åªéœ€è¦ä¿®æ”¹D:\\GAME\\masmä¸ºä½ çš„masm5æ–‡ä»¶çš„è§£å‹ç›®å½•å°±è¡Œäº†ã€‚è¿™ä¸ªæ–‡ä»¶è·¯å¾„ä¸­ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¹Ÿä¸èƒ½æœ‰ç‰¹æ®Šå­—ç¬¦å’Œä¸­æ–‡ï¼\nMOUNT C D:\\GAME\\masmpath=%path%; \\masmC: cd \\asm\n\né…ç½®å®Œæˆåï¼Œå¯åŠ¨DOSboxï¼ŒæŸ¥çœ‹masmå‘½ä»¤æ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œæ²¡æœ‰æŠ¥é”™masmå‘½ä»¤ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ˜¯é…ç½®å¥½äº†ã€‚\n\n2.ä¿®æ”¹DOSBoxçª—å£å¤§å°é»˜è®¤æƒ…å†µä¸‹DOSBoxçš„å‘½ä»¤è¡Œçª—å£æ˜¯éå¸¸éå¸¸éå¸¸å°çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ”¹å¤§ã€‚åŒæ ·æ˜¯ä¿®æ”¹DOSBoxçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚ä½•æ‰“å¼€é…ç½®æ–‡ä»¶å‚è€ƒä¸Šæ–‡ã€‚\næŒ‰ä¸‹å›¾æ‰€ç¤ºä¿®æ”¹\n\nè¯·æ³¨æ„ï¼Œè¿™é‡Œçš„1280å’Œ1080ä¸­é—´çš„æ˜¯å¤§å†™çš„Xï¼Œå¹¶ä¸æ˜¯ä¹˜å·\nwindowresolution=1280X1080output=opengl\n\nä¿®æ”¹äº†ä¹‹åä¿å­˜ï¼Œå†é‡æ–°æ‰“å¼€DOSBoxï¼Œç•Œé¢å°±åº”è¯¥ä¼šå˜å¤§äº†ã€‚å¦‚æœä½ è§‰å¾—è¿˜æ˜¯å°äº†ï¼Œå¯ä»¥ä¿®æ”¹è¿™é‡Œçš„åˆ†è¾¨ç‡ï¼Œç»§ç»­è®©ä»–å˜å¤§ä¸€ç‚¹ã€‚\n3.ç¼–è¯‘ä¸€ä¸ªæ±‡ç¼–ç¨‹åºç”¨ä¸‹é¢æœ€ç®€å•çš„æ±‡ç¼–ç¨‹åºåšæµ‹è¯•ï¼Œå°†å¦‚ä¸‹å†…å®¹å†™å…¥åˆ°test.asmä¸­ï¼Œå¹¶æ”¾å…¥å’Œmasmçš„åŒä¸€ç›®å½•ä¸‹ï¼ˆå¿…é¡»è¦æ˜¯åŒä¸€ç›®å½•ï¼‰\nCODE SEGMENT ;USE16     ASSUME CS:CODEBEG: MOV DL,&#x27;H&#x27;     MOV AH, 2 ; è°ƒç”¨2å·DOSç³»ç»Ÿè°ƒç”¨è¾“å‡ºå­—ç¬¦åˆ°å±å¹•ä¸Š     INT 21H     MOV AH, 4CH     INT 21HCODE  ENDS        END BEG\n\næ‰“å¼€DOSBoxï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤\nmasm test.asmlink test.obj\n\nè¾“å‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç¼–è¯‘æºæ–‡ä»¶ï¼ˆæ³¨æ„çœ‹æœ‰æ²¡æœ‰ç¼–è¯‘æŠ¥é”™ï¼‰ï¼›ç¬¬äºŒä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯é“¾æ¥objæ–‡ä»¶ï¼Œæœ€ç»ˆä¼šå¼¹å‡ºæ¥ä¸€ä¸ªè­¦å‘Šï¼Œä¸ç”¨ç®¡ä»–ã€‚\n\næœ€ç»ˆæ‰§è¡Œtestï¼ŒæˆåŠŸè¾“å‡ºå­—ç¬¦Håˆ°ç»ˆç«¯ä¸Šã€‚\n\nèƒ½èµ°åˆ°è¿™ä¸€æ­¥ï¼Œå°±ä»£è¡¨ä½ çš„masmåŸºæœ¬ç¯å¢ƒå·²ç»é…ç½®å¥½äº†ã€‚å¯ä»¥ç”¨æ¥ç¼–è¯‘è¿è¡Œæ±‡ç¼–ä»£ç äº†\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["ç¼–è¯‘","windows"]},{"title":"ã€å·¥å…·ã€‘å¤åˆ¶ç½‘é¡µä¸ºmarkdownçš„æµè§ˆå™¨æ’ä»¶","url":"/posts/4128600186/","content":"è¯´æ˜å¦‚æœæ‚¨éœ€è¦è½¬è½½æˆ–è€…æƒ³ä¿å­˜ä»–äººçš„æ–‡ç« ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ²¹çŒ´æ’ä»¶ï¼Œå¿«é€Ÿå°†ç½‘ç«™é¡µé¢å¤åˆ¶ä¸ºmarkdownï¼ˆä»¥ä¸‹ç®€ç§°mdï¼‰ã€‚\nåªè¦ç›®æ ‡ç½‘ç«™æ˜¯æ”¯æŒmdè¯­æ³•ï¼ˆå¤§éƒ¨åˆ†åšå®¢ç«™ç‚¹éƒ½æ˜¯æ”¯æŒçš„ï¼‰é‚£ä¹ˆå¤åˆ¶ä¸‹æ¥çš„æ•ˆæœåŸºæœ¬æ²¡é—®é¢˜ï¼ˆå·²çŸ¥æœ‰é—®é¢˜çš„æ˜¯mdä¸­è¡¨æ ¼çš„å¤åˆ¶ï¼‰\n\nå†æ¬¡æé†’ï¼šè½¬è½½ä»–äººæ–‡ç« ä¸€å®šè¦æ³¨æ˜å‡ºå¤„ï¼Œå¹¶å°½é‡åœ¨å¾—åˆ°åŸä½œè€…è®¸å¯åè½¬è½½ã€‚\n\n\nå®‰è£…æµè§ˆå™¨æ²¹çŒ´æ‰©å±•edgeå’Œchomeéƒ½å¯ä»¥å®‰è£…æ­¤æ’ä»¶ï¼Œä»¥edgeä¸ºä¾‹ï¼Œåœ¨å¦‚ä¸‹ä½ç½®å¯è¿›å…¥æ’ä»¶é…ç½®é¡µ\n\næˆ–è€…ç›´æ¥è¾“å…¥urlä¹Ÿå¯è¿›å…¥æ’ä»¶é¡µé¢\nedge://extensions/\n\nè¿›å…¥é¡µé¢åï¼Œç‚¹å‡»è·å–å•†åº—ä¸­çš„æ‰©å±•\n\næœç´¢ tampermonkeyï¼Œä¸‹è½½ä¸‹å›¾ä¸­ç»¿è‰²çš„è¿™ä¸ªæ’ä»¶ï¼ˆä¸‹è½½é‡æœ€å¤šçš„é‚£ä¸ªï¼‰\n\nå®‰è£…å¤åˆ¶ä¸ºmarkdownæ’ä»¶éšåè¿›å…¥ https://greasyfork.org/zh-CN ç½‘ç«™ï¼Œæœç´¢ä¸€ä¸ªæ’ä»¶\nå¤åˆ¶ä¸ºmarkdownæ ¼å¼\n\n\nhttps://greasyfork.org/zh-CN/scripts/370299-%E5%A4%8D%E5%88%B6%E4%B8%BAmarkdown%E6%A0%BC%E5%BC%8F\n\nå®‰è£…å®Œæ¯•åï¼Œå³ä¸Šè§’çš„æ²¹çŒ´å›¾æ ‡ä¼šå¤šå‡ºæ­¤æ’ä»¶ã€‚åœ¨è¿™é‡Œä¹Ÿå¯ä»¥é€‰æ‹©å¼€å…³æ­¤æ’ä»¶ï¼Œä¸€èˆ¬åœ¨éœ€è¦çš„æ—¶å€™æ‰“å¼€å°±è¡Œäº†ã€‚ä»¥å…æ—¥å¸¸è®¿é—®ç½‘ç«™çš„æ—¶å€™è¯¯è§¦å¤åˆ¶æŒ‰é’®\n\nä½¿ç”¨è¿™é‡Œéšä¾¿æ‰¾äº†ä¸€ä¸ªcsdnæ–‡ç« ã€é“¾æ¥ã€‘\nåœ¨å³ä¸Šè§’å¯ä»¥çœ‹åˆ°ä¸€ä¸ªè“è‰²çš„ copy æŒ‰é’®\n\nç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‡ºç°è“è‰²è™šçº¿é€‰æ‹©æ¡†ã€‚æˆ‘ä»¬ç›´æ¥æ”¾åˆ°æ–‡ç« æ­£æ–‡éƒ¨åˆ†ï¼Œç‚¹å‡»ä¸€ä¸‹ï¼Œå°±å¤åˆ¶æˆåŠŸäº†ã€‚\nç›®å‰å·²çŸ¥çš„é—®é¢˜æ˜¯è¿™ä¸ªæ’ä»¶æ— æ³•å¤„ç†è¡¨æ ¼ï¼Œå…¶ä»–éƒ½è¿˜ok\n\næœ¬æ•™ç¨‹ç»“æŸ~\n\nå†æ¬¡æé†’ï¼šè½¬è½½ä»–äººæ–‡ç« ä¸€å®šè¦æ³¨æ˜å‡ºå¤„ï¼Œå¹¶å°½é‡åœ¨å¾—åˆ°åŸä½œè€…è®¸å¯åè½¬è½½ã€‚\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"]},{"title":"ã€Redisã€‘03.åŸºæœ¬å‘½ä»¤å­¦ä¹ ","url":"/posts/3677820204/","content":"å­¦ä¹ Redisçš„å‘½ä»¤å¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼šCommands | Redisã€‚æˆ‘è¿˜å‘ç°å®˜ç½‘çš„examplesé‡Œé¢æ˜¯å¯ä»¥æ•²Rediså‘½ä»¤çš„ï¼Œå¦‚æœä½ æ²¡æœ‰é…ç½®Redisç¯å¢ƒï¼Œåº”è¯¥å¯ä»¥ç™½å«–è¿™é‡Œçš„Redisåšä¸ªä¸´æ—¶çš„ç»ƒä¹ ã€‚\n\næœ¬æ–‡ä½¿ç”¨Redisç‰ˆæœ¬ï¼š\nâ¯ sudo redis-server --versionRedis server v=6.0.16 sha=00000000:0 malloc=jemalloc-5.2.1 bits=64 build=a3fdef44459b3ad6â¯ sudo redis-cli --versionredis-cli 6.0.16\n\næ³¨æ„ï¼Œæœ¬æ–‡å¹¶éRediså‘½ä»¤å¤§å…¨ï¼Œåªæ˜¯å¯¹æœ€å¸¸ç”¨çš„å‘½ä»¤åšçš„è®°å½•ã€‚\n1.setå’ŒgetåŸºæœ¬ä½¿ç”¨åœ¨Redisä¸­ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚é¡¾åæ€ä¹‰ï¼Œsetæ˜¯ç”¨æ¥è®¾ç½®keyå€¼çš„ï¼Œgetæ˜¯ç”¨æ¥è·å–æŸä¸ªkeyå€¼çš„ã€‚\næ³¨æ„set&#x2F;getå‘½ä»¤åªèƒ½ç”¨äºè®¾ç½®å­—ç¬¦ä¸²stringå˜é‡ï¼Œå…¶ä»–ç±»å‹æœ‰å¯¹åº”çš„è®¾ç½®å‘½ä»¤ï¼Œç”¨getè·å–ä¸€ä¸ªéstringçš„keyä¼šå¤±è´¥ã€‚\nset key valueget key\n\nåœ¨redisä¸­ä¸åŒºåˆ†å‘½ä»¤çš„å¤§å°å†™ï¼ˆä½†æ˜¯åŒºåˆ†keyå’Œvalueçš„å¤§å°å†™ï¼‰ï¼Œå­—ç¬¦ä¸²ä¹Ÿä¸éœ€è¦åŠ å¼•å·ï¼ˆå¦‚æœæœ‰ç©ºæ ¼å°±éœ€è¦åŠ ï¼‰ï¼ŒsetæˆåŠŸä¼šè¿”å›OKï¼Œå¤±è´¥ä¼šè¿”å›nilã€‚\n127.0.0.1:6379&gt; set key1 value1OK127.0.0.1:6379&gt; set key2 value2OK127.0.0.1:6379&gt; get key2&quot;value2&quot;127.0.0.1:6379&gt; get key3(nil)127.0.0.1:6379&gt; get KEY2(nil)127.0.0.1:6379&gt; set k &quot;100 01&quot;OK127.0.0.1:6379&gt; get k100 01\n\næœ€åçš„key3æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„é”®å€¼ï¼ŒRedisè¿”å›äº†(nil)ï¼Œæ„æ€å’ŒNULLå…¶å®ä¸€æ ·ï¼Œå°±æ˜¯æ²¡æœ‰å€¼ã€‚åŒæ—¶å¤§å†™çš„KEY2ä¹Ÿæ²¡æœ‰å€¼ï¼Œå› ä¸ºRedisä¸­çš„keyéœ€è¦åŒºåˆ†å¤§å°å†™ã€‚\nå¦‚æœå°è¯•setä¸€ä¸ªå·²ç»å­˜åœ¨çš„keyï¼Œä¼šè‡ªåŠ¨è¦†ç›–æ—§æ•°æ®ã€‚è¦†ç›–çš„æ—¶å€™å¯èƒ½ä¼šä¿®æ”¹keyå¯¹åº”valueçš„æ•°æ®ç±»å‹ã€‚\n127.0.0.1:6379&gt; get key1&quot;value1&quot;127.0.0.1:6379&gt; set key1 value11OK127.0.0.1:6379&gt; get key1&quot;value11&quot;\n\nå¦‚æœä½ éœ€è¦è®¾ç½®çš„å­—ç¬¦ä¸²ä¸­æœ‰å¼•å·ï¼Œå¯ä»¥ç”¨\\è¿›è¡Œè½¬ä¹‰ï¼Œä½†è¿˜å¿…é¡»åœ¨å¤–éƒ¨å†å¥—ä¸€ä¸ªå¼•å·\n127.0.0.1:6379&gt; set k &quot;10&quot;OK127.0.0.1:6379&gt; get k10127.0.0.1:6379&gt; set k \\&quot;10\\&quot;Invalid argument(s)127.0.0.1:6379&gt; set k &quot;\\&quot;10\\&quot;&quot;OK127.0.0.1:6379&gt; get k&quot;10&quot;127.0.0.1:6379&gt; object encoding kembstr\n\n\nè¿›é˜¶é€‰é¡¹setå‘½ä»¤è¿˜æœ‰ä¸€äº›é¢å¤–çš„é€‰é¡¹å¯ä¾›é€‰æ‹©ï¼Œå…·ä½“å‚è€ƒå®˜ç½‘æ–‡æ¡£ SET | Redisã€‚\nSET key value [NX | XX] [GET] [EX seconds | PX milliseconds |  EXAT unix-time-seconds | PXAT unix-time-milliseconds | KEEPTTL]\n\nåœ¨Rediså®˜ç½‘ä¸Šï¼Œ[]ä»£è¡¨å¯é€‰å‘½ä»¤å‚æ•°ï¼Œ|å¯ä»¥ç†è§£ä¸ºâ€œæˆ–â€ï¼Œä»£è¡¨æ¯ä¸ªå¯é€‰å‘½ä»¤å‚æ•°ä¸­çš„ä¸åŒè®¾ç½®å€¼ï¼›æ¯ä¸ª[]ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥åŒæ—¶å­˜åœ¨ã€‚å¦‚ä¸‹æ˜¯å¯¹setå‘½ä»¤é€‰é¡¹çš„è¯´æ˜ï¼š\n\nNXï¼šåªæœ‰keyä¸å­˜åœ¨çš„æ—¶å€™æ‰èƒ½setæˆåŠŸ;\nXXï¼šåªæœ‰keyå­˜åœ¨çš„æ—¶å€™æ‰èƒ½setæˆåŠŸ;\nGETï¼šå¦‚æœkeyå·²å­˜åœ¨ï¼Œè¿”å›æ—§å€¼ï¼›å¦‚æœkeyä¸å­˜åœ¨è¿”å›nilï¼ˆç©ºï¼‰ï¼›å¦‚æœkeyå­˜åœ¨ä½†æ˜¯valueä¸æ˜¯stringï¼Œåˆ™æœ¬æ¬¡setæ“ä½œä¼šè¿”å›é”™è¯¯å¹¶ç»ˆæ­¢ï¼›\nEX&#x2F;PXï¼šsetçš„æ—¶å€™æŒ‡å®šå½“å‰keyçš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´åˆ°äº†ä¼šè‡ªåŠ¨è¢«åˆ é™¤ï¼ŒEXçš„å•ä½æ˜¯ç§’ï¼ŒPXçš„å•ä½æ˜¯æ¯«ç§’ï¼ˆç±»ä¼¼sleep_forï¼‰ï¼›\nEXAT&#x2F;PXATï¼šæŒ‡å®šè¿‡æœŸæ—¶é—´æˆ³ï¼Œå³å½“å‰æ—¶é—´åˆ°æŒ‡å®šæ—¶é—´æˆ³åkeyå€¼è¿‡æœŸã€‚EXATæ˜¯ç§’çº§æ—¶é—´æˆ³ï¼ŒPXATæ˜¯æ¯«ç§’çº§æ—¶é—´æˆ³ï¼ˆç±»ä¼¼sleep_untilï¼‰ï¼›\nKEEPTTLï¼šå¦‚æœkeyå€¼å·²å­˜åœ¨ä¸”æœ‰è¿‡æœŸæ—¶é—´ï¼Œä½¿ç”¨KEEPTTLæ›´æ–°å½“å‰keyçš„æ—¶å€™ä¼šé‡ç½®è¿‡æœŸæ—¶é—´è®¡æ•°å™¨ã€‚ä¸¾ä¾‹ï¼šAçš„è¿‡æœŸæ—¶é—´æ˜¯100ç§’ï¼Œæˆ‘åœ¨Aè®¾ç½®å60ç§’åˆæ›´æ–°äº†Aï¼Œæ­¤æ—¶æ–°çš„Açš„è¿‡æœŸè®¡æ—¶å™¨ä¼šç»§æ‰¿åŸæœ‰æ—¶é—´ï¼Œå³ä¸º40ç§’åè¿‡æœŸã€‚å¦‚æœä¸æŒ‡å®šKEEPTTLé€‰é¡¹ï¼Œåˆ™ä¼šè¢«é‡ç½®ä¸ºRedisçš„é»˜è®¤TTLï¼ˆå¦‚æœæ²¡æœ‰é…ç½®ï¼Œé»˜è®¤æ˜¯æ°¸ä¸è¿‡æœŸï¼‰ã€‚\n\næ³¨æ„ï¼Œä¸€äº›é€‰é¡¹æ˜¯é«˜ç‰ˆæœ¬ä¸­æ‰è¢«æ”¯æŒçš„ã€‚\nStarting with Redis version 2.6.12: Added the EX, PX, NX and XX options.Starting with Redis version 6.0.0: Added the KEEPTTL option.Starting with Redis version 6.2.0: Added the GET, EXAT and PXAT option.Starting with Redis version 7.0.0: Allowed the NX and GET options to be used together.\n\nNXå’ŒXXNXæ˜¯keyå€¼ä¸å­˜åœ¨æ‰èƒ½æ­£å¸¸è¢«è®¾ç½®ï¼ŒXXæ˜¯keyå€¼å­˜åœ¨æ‰èƒ½è¢«æ­£å¸¸è®¾ç½®ã€‚å¦‚æœæ²¡æœ‰è¢«setæˆåŠŸï¼Œåˆ™ä¼šè¿”å›nilï¼ŒsetæˆåŠŸè¿”å›çš„æ˜¯OKã€‚\nå¦‚ä¸‹æ‰€ç¤ºï¼Œaé”®å€¼ä¸å­˜åœ¨æ—¶ï¼Œnxè®¾ç½®aæˆåŠŸè¿”å›OKã€‚å†æ¬¡ç”¨nxå°è¯•è®¾ç½®ï¼Œå› ä¸ºæ­¤æ—¶aå·²ç»å­˜åœ¨ï¼Œä¸ç¬¦åˆnxçš„ç­–ç•¥ï¼Œè®¾ç½®å¤±è´¥ï¼Œè¿”å›nilã€‚\n127.0.0.1:6379&gt; set a test1 nxOK127.0.0.1:6379&gt; set a test1 nx(nil)\n\nä½¿ç”¨xxæµ‹è¯•ï¼Œå› ä¸ºaå­˜åœ¨ï¼Œæ‰€ä»¥è®¾ç½®æˆåŠŸã€‚è€Œbä¸å­˜åœ¨ï¼Œè®¾ç½®å¤±è´¥ã€‚\n127.0.0.1:6379&gt; set a test2 xxOK127.0.0.1:6379&gt; set b test1 xx(nil)\n\nKEEPTTLå¯¹KEEPTTLæ¥åšä¸ªæµ‹è¯•ï¼Œä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ•ˆæœï¼ŒæŠŠä¸€ä¸ªå§‹ç»ˆæ‘†åœ¨ç»ˆç«¯æ—è¾¹ã€‚\næˆ‘åœ¨19ç§’çš„æ—¶å€™æ‰§è¡Œäº†å‘½ä»¤set a test ex 20ï¼Œå³é”®å€¼aä¼šåœ¨20ç§’åè¿‡æœŸã€‚å¦‚åŒé¢„æœŸï¼Œåœ¨39ç§’å·¦å³ï¼Œaçš„é”®å€¼æ— æ³•è¢«getäº†ï¼ˆæˆªå›¾è½åäº†ä¸€äº›ï¼‰\n\nå°è¯•åœ¨è¿™20ç§’ä¸­é‡æ–°ç»™aè®¾ç½®ä¸€ä¸ªæ–°çš„å€¼ï¼ŒåŒæ—¶ä¸æºå¸¦KEEPTTLé€‰é¡¹ã€‚ä¼šå‘ç°é‡æ–°è®¾ç½®åçš„keyæ²¡æœ‰ç»§æ‰¿åŸæœ‰çš„è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯ä¸è¿‡æœŸäº†ï¼ˆRedisçš„é»˜è®¤ç­–ç•¥å°±æ˜¯æ°¸ä¸è¿‡æœŸï¼‰\nå¦‚æœæºå¸¦äº†KEEPTTLé€‰é¡¹ï¼Œåˆ™aè¿˜æ˜¯ä¼šåœ¨20ç§’åè¿‡æœŸã€‚\n\nä½¿ç”¨TTLå‘½ä»¤å¯ä»¥çœ‹çš„æ›´ç›´è§‚ä¸€ç‚¹ï¼ˆå…³äºTTLå‘½ä»¤çš„ä»‹ç»å‚è€ƒåæ–‡ï¼‰ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨KEEPTTLè®¾ç½®äº†aåï¼Œå®ƒçš„è¿‡æœŸæ—¶é—´è¿˜æ˜¯ç»§æ‰¿äº†åŸæœ¬çš„10ç§’ï¼Œéšåè¢«è¿‡æœŸåˆ é™¤ï¼ŒTTLæ˜¾ç¤º-2ä»£è¡¨é”®å€¼ä¸å­˜åœ¨ã€‚\n127.0.0.1:6379&gt; set a t1 ex 10OK127.0.0.1:6379&gt; ttl a(integer) 8127.0.0.1:6379&gt; set a t2 keepttlOK127.0.0.1:6379&gt; ttl a(integer) 2127.0.0.1:6379&gt; get a(nil)127.0.0.1:6379&gt; ttl a(integer) -2\n\nå¦‚æœä¸ä½¿ç”¨KEEPTTLé€‰é¡¹ï¼Œåˆ™è¿‡æœŸæ—¶é—´ä¼šå˜æˆ-1ä»£è¡¨æ°¸ä¸è¿‡æœŸã€‚\n127.0.0.1:6379&gt; set a t1 ex 10OK127.0.0.1:6379&gt; get a&quot;t1&quot;127.0.0.1:6379&gt; ttl a(integer) 5127.0.0.1:6379&gt; set a t2OK127.0.0.1:6379&gt; get a&quot;t2&quot;127.0.0.1:6379&gt; ttl a(integer) -1\n\n\nmsetå’Œmgetè¿™ä¸¤ä¸ªå‘½ä»¤æ˜¯set&#x2F;getçš„å˜ä½“ï¼Œå¯ä»¥ç”¨äºåŒæ—¶è®¾ç½®&#x2F;è·å–å¤šä¸ªé”®å€¼çš„æ•°æ®ã€‚è¿™ä¸¤ä¸ªå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(N)ï¼Œå…¶ä¸­Næ˜¯å‘½ä»¤åè·Ÿéšçš„keyçš„ä¸ªæ•°ã€‚\nmsetåªèƒ½å•çº¯çš„è®¾ç½®keyå’Œvalueï¼Œæ²¡æœ‰setçš„é¢å¤–çš„å‚æ•°é€‰é¡¹ã€‚\nMSET key value [key value ...]MGET key [key ...]\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; mset key1 t1 key2 t2OK127.0.0.1:6379&gt; mget key1 key2t1t2\n\nä¸ºä»€ä¹ˆè¦æä¾›ä¸€ä¸ªè¿™æ ·çš„å‘½ä»¤å‘¢ï¼Ÿè¿˜æ˜¯å…³äºç½‘ç»œè¯·æ±‚æ–¹é¢çš„æ€§èƒ½èŠ‚çœã€‚å¦‚æœæˆ‘çŸ¥é“æˆ‘éœ€è¦ä¸€æ¬¡æ€§è®¾ç½®&#x2F;è·å–å¤§é‡é”®å€¼ï¼Œé‚£å¯ä»¥ä¸€æ¡å‘½ä»¤å†™å®Œçš„ç»å¯¹å¥½è¿‡å¤šæ¬¡è¯·æ±‚RedisæœåŠ¡å™¨ï¼ŒèŠ‚çœäº†å¤šæ¬¡é€šä¿¡çš„ç½‘ç»œå»¶è¿Ÿã€‚\n\nRedisä¼šä¿è¯msetçš„æ‰§è¡Œæ˜¯åŸå­çš„ï¼Œä¸ä¼šå‡ºç°msetä¸­çš„å¤šä¸ªé”®å€¼åªè§‚å¯Ÿåˆ°å…¶ä¸­ä¸€ä¸ªè¢«ä¿®æ”¹çš„æƒ…å†µã€‚å®˜ç½‘åŸè¯ï¼šMSET is atomic, so all given keys are set at once. It is not possible for clients to see that some of the keys were updated while others are unchanged.\n\næ¯”å¦‚æˆ‘msetäº†key1å’Œkey2ï¼Œå®¢æˆ·ç«¯å¯ä»¥è§‚å¯Ÿåˆ°key1å’Œkey2éƒ½è¢«ä¿®æ”¹ï¼Œä¸ä¼šè§‚å¯Ÿåˆ°åªæœ‰key1æˆ–åªæœ‰key2è¢«ä¿®æ”¹äº†çš„æƒ…å†µã€‚\n\nè¿™ä¹Ÿæ˜¯å¾—ç›ŠäºRedisé‡‡ç”¨çš„å•çº¿ç¨‹æ¨¡å‹ï¼Œå®ƒå¿…é¡»å¤„ç†å®Œæ¯•msetçš„æ‰€æœ‰keyåæ‰ä¼šå»å“åº”å…¶ä»–å‘½ä»¤è¯·æ±‚ï¼Œé‚£å®¢æˆ·ç«¯è‡ªç„¶å°±ä¸å¯èƒ½ä¸­æ–­è®¾ç½®å¤šä¸ªkeyçš„è¿‡ç¨‹ï¼Œä¹Ÿè§‚å¯Ÿä¸åˆ°åªæœ‰ä¸€éƒ¨åˆ†keyè¢«ä¿®æ”¹äº†çš„æƒ…å†µã€‚\nä½†è¿™ä¹Ÿè­¦ç¤ºæˆ‘ä»¬ï¼šå¦‚æœå°è¯•ç”¨msetè®¾ç½®ç‰¹åˆ«å¤§é‡çš„keyï¼Œå¯èƒ½ä¼šé˜»å¡RedisæœåŠ¡å™¨å¯¼è‡´å…¶æ— æ³•å“åº”å…¶ä»–è¯·æ±‚ã€‚\n2.keyskeyså‘½ä»¤ç”¨äºæŸ¥è¯¢å½“å‰Redisä¸­çš„keyå€¼æœ‰å“ªäº›ï¼Œå¦‚æœåŒ¹é…ä¸ä¸Šåˆ™è¿”å›empty arrayã€‚\nå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼ŒKEYS | Redis\nkeys [pattern]\n\nå…¶ä¸­å‚æ•°patternæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥åŒ¹é…Redisä¸­å·²æœ‰çš„keyçš„åç§°ã€‚\nä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œkey*ä»£è¡¨åŒ¹é…ä»¥keyå¼€å¤´çš„æ‰€æœ‰é”®å€¼ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æˆ‘çš„Redisæœ‰ä¸Šæ–‡setçš„ä¸¤ä¸ªkeyã€‚\n127.0.0.1:6379&gt; keys key*1) &quot;key1&quot;2) &quot;key2&quot;\n\npatternæ”¯æŒçš„æ ¼å¼å¦‚ä¸‹ï¼š\nh?llo     matches hello, hallo and hxlloé—®å·åªåŒ¹é…ä¸€ä¸ªå­—ç¬¦h*llo     matches hllo and heeeelloæ˜Ÿå·ä»£è¡¨åŒ¹é…0ä¸ªæˆ–è€…æ— æ•°ä¸ªå­—ç¬¦h[ae]llo  matches hello and hallo, but not hilloåŒ¹é…aæˆ–è€…eè¿™ä¸¤ä¸ªå­—ç¬¦h[^e]llo  matches hallo, hbllo, ... but not helloåŒ¹é…é™¤äº†eä»¥å¤–çš„å…¶ä»–å•ä¸ªå­—ç¬¦h[a-b]llo matches hallo and hblloåŒ¹é…aåˆ°bè¿™ä¸ªåŒºé—´ä¸­çš„å•ä¸ªå­—ç¬¦\n\nå¦‚æœä½ éœ€è¦åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­åŒ…å« [ã€]ã€*ã€? è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥ç”¨\\æ¥è½¬ä¹‰å®ƒä»¬ã€‚\næ³¨æ„ï¼škeysçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼ˆå…¶é‡‡ç”¨éå†æ–¹å¼æ¥è·å–ç»“æœï¼‰ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒçš„å¤§æ•°æ®åº“ä¸­ä¸€èˆ¬éƒ½ç¦æ­¢ä½¿ç”¨keyså‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯keys *å…¨éƒ¨æŸ¥è¯¢ã€‚å› ä¸ºRedisæ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œå¦‚æœç”¨keysçš„æŸ¥è¯¢æŠŠRedisç»™å¼„é˜»å¡äº†ï¼Œå°±æ²¡æœ‰åŠæ³•æä¾›æœåŠ¡ç»™å…¶ä»–é“¾æ¥äº†ã€‚\nåœ¨Redis+MySQLçš„æ¡†æ¶ä¸­ï¼Œå¦‚æœä½¿ç”¨keyså‘½ä»¤å¯¼è‡´Redisé˜»å¡äº†ï¼Œè¯·æ±‚å°±ä¼šç›´æ¥å›æºåˆ°MySQLä¸Šï¼Œå¯¼è‡´MySQLæœåŠ¡å™¨é­å—äº†æ„æ–™ä¹‹å¤–çš„å¤§æ‰¹é‡è¯·æ±‚ï¼Œå®ƒä¹Ÿå®¹æ˜“æŒ‚æ‰ã€‚å¦‚æœRediså’ŒMySQLéƒ½æŒ‚äº†ï¼Œä¸šåŠ¡å°±å®Œè›‹äº†ğŸ¤£ã€‚ \n3.existså‘½ä»¤ä»‹ç»åˆ¤æ–­æŸä¸ªkeyæ˜¯å¦å­˜åœ¨ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼šè¿”å›å‘½ä»¤ä¸­ç»™å‡ºçš„keyä¸­ï¼Œå®é™…å­˜åœ¨çš„keyçš„ä¸ªæ•°ã€‚\nexists key [key1 key2 ...]\n\nä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ã€‚é‚£ä¹ˆè¿”å›å€¼å°±æ˜¯è¿™ä¸‰ä¸ªkeyä¸­æœ‰å‡ ä¸ªkeyæ˜¯å­˜åœ¨çš„ã€‚\nexists key1 key2 key3\n\nexistså‘½ä»¤æ£€æŸ¥ä¸€ä¸ªkeyçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå› ä¸ºRedisåº•å±‚æ˜¯ç”¨å“ˆå¸Œè¡¨æ¥ç®¡ç†keyçš„ã€‚\n\nTime complexity: O(N) where N is the number of keys to check.\n\nRedisçš„å®˜æ–¹æ–‡æ¡£è¯´existså‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œä¸è¦è¯¯è§£ï¼Œè¿™é‡Œçš„Næ˜¯å‘½ä»¤ä¸­ç»™å‡ºkeyçš„ä¸ªæ•°ã€‚ç›¸å½“äºæˆ‘ä»¬éœ€è¦æ£€æŸ¥Nä¸ªkeyï¼Œæ¯ä¸ªkeyéƒ½æ˜¯O(1)ï¼Œæœ€ç»ˆçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(N)äº†ã€‚\n\nåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢å¤šä¸ªkeyæ˜¯å¦å­˜åœ¨ï¼Œä¸€æ¡å‘½ä»¤å†™å®Œè‚¯å®šæ¯”å¤šæ¬¡æŸ¥è¯¢æ›´å¥½ã€‚å› ä¸ºæ¯ä¸€æ¬¡æŸ¥è¯¢éƒ½æ¶‰åŠåˆ°äº†ä¸€æ¬¡ç½‘ç»œè¯·æ±‚å’Œå“åº”ï¼Œä¸€æ¡å‘½ä»¤æŠŠéœ€è¦æŸ¥è¯¢çš„å¤šä¸ªkeyéƒ½å‘Šè¯‰Redisï¼Œå¾—åˆ°ä¸€ä¸ªè¿”å›ç»“æœæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚è¿™å°±å’ŒMySQLä¸­çš„è¯·æ±‚ä¸€æ ·ï¼Œä¸€æ¡SQLèƒ½è§£å†³çš„äº‹æƒ…åˆ†æˆä¸¤ä¸ªSQLå°±ä¼šå› ä¸ºç½‘ç»œé€šä¿¡è€Œå¢åŠ å»¶è¿Ÿï¼\nRedisä¸­çš„å¤§éƒ¨åˆ†å‘½ä»¤éƒ½æ”¯æŒä¸€æ¬¡æ€§ç»™å®šå¤šä¸ªkeyï¼Œå°±æ˜¯ä¸ºäº†å‡å°‘ç½‘ç»œé€šä¿¡å¸¦æ¥çš„å½±å“ã€‚\n\nå½“ç„¶ï¼Œexistså‘½ä»¤çš„è¿”å›ç»“æœå¹¶æ²¡æœ‰åŠæ³•è®©æˆ‘ä»¬çŸ¥é“ç»™å‡ºçš„keyä¸­åˆ°åº•æ˜¯å“ªä¸€ä¸ªä¸å­˜åœ¨ï¼Œè¿™æ˜¯è¦çœ‹å…·ä½“ä¸šåŠ¡æ¥ç¡®å®šçš„ã€‚\nå‘½ä»¤æµ‹è¯•å®é™…æµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; exists key1 key2(integer) 2127.0.0.1:6379&gt; exists key1(integer) 1127.0.0.1:6379&gt; exists key(integer) 0\n\næ³¨æ„ï¼Œexistsåœ¨æ£€æŸ¥æŸä¸ªkeyæ˜¯å¦å­˜åœ¨çš„æ—¶å€™å¹¶ä¸ä¼šè¿›è¡Œå»é‡æ“ä½œï¼Œå¦‚æœä½ å°è¯•æ£€æŸ¥ä¸¤ä¸ªç›¸åŒçš„keyï¼Œè¿”å›ç»“æœä¹Ÿæ˜¯2ï¼›\n127.0.0.1:6379&gt; exists key1 key1(integer) 2\n\n4.delç”¨äºåˆ é™¤æŒ‡å®škeyï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œç»™å®škeyä¸­è¢«æˆåŠŸåˆ é™¤çš„ä¸ªæ•°ã€‚\ndel key [key1 key2 ...]\n\nåˆ é™¤å•ä¸ªkeyçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå¤šä¸ªæ˜¯O(N)ï¼›\n5.expire&#x2F;pexpireç”¨äºç»™æŸä¸ªkeyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ—¶é—´åˆ°äº†ä¹‹åè‡ªåŠ¨è¢«åˆ é™¤ï¼‰å…¶ä¸­expireçš„å•ä½æ˜¯ç§’ï¼Œpexpireçš„å•ä½æ˜¯æ¯«ç§’ã€‚\nexpire key secondpexpire key millisecond\n\nè¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ï¼Œåœ¨å¾ˆå¤šå¹³å°ä¸Šæˆ‘ä»¬éƒ½ä½¿ç”¨è¿‡éªŒè¯ç ï¼Œä¸ºäº†ä¿è¯ä¸€å®šçš„å®‰å…¨æ€§ï¼ŒéªŒè¯ç éƒ½è¢«è®¾è®¡ä¸ºæœ‰è¿‡æœŸæ—¶é—´çš„ã€‚è¿™æ ·ç³»ç»Ÿç”Ÿæˆä¸€ä¸ªéªŒè¯ç åï¼Œå¯ä»¥å°†å…¶setè¿›å…¥Redisï¼Œç„¶åä½¿ç”¨expireå‘½ä»¤ç»™éªŒè¯ç è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå…¶å®setå‘½ä»¤é‡Œé¢å°±æœ‰é€‰é¡¹å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´äº†ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼‰ã€‚è¿˜æœ‰é™æ—¶ä¼˜æƒ åˆ¸ã€é™æ—¶VIPä½“éªŒåˆ¸ç­‰ç­‰â€¦â€¦\nå¦‚æœä¸ä½¿ç”¨Redisçš„expireåŠŸèƒ½ï¼Œå°±éœ€è¦åœ¨åº”ç”¨å±‚ç”šè‡³æ•°æ®åº“ä¸­è®¾è®¡è¿‡æœŸæ“ä½œï¼Œç›¸å¯¹æ¥è¯´å°±æœ‰äº›éº»çƒ¦äº†ã€‚\nè¿˜æœ‰å¦å¤–ä¸€ä¸ªåœºæ™¯ï¼Œæ˜¯åŸºäºRediså®ç°åˆ†å¸ƒå¼é”ï¼šå³åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸­å®ç°é”ï¼Œä»¥å®ç°åŒæ­¥&#x2F;äº’æ–¥åŠŸèƒ½ã€‚\n\nåŠ é”ï¼šè®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„keyï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼›\nè§£é”ï¼šåˆ é™¤è¯¥keyï¼›\nåˆ¤æ–­æ˜¯å¦æœ‰äººå ç”¨ï¼šexistsåˆ¤æ–­keyå­˜åœ¨åˆ™ä»£è¡¨æœ‰äººå·²ç»ç”³è¯·äº†é”ï¼Œéœ€è¦ç­‰å¾…åˆ°keyä¸å­˜åœ¨çš„æ—¶å€™ï¼Œåˆ™ä»£è¡¨é”å·²ç»è¢«é‡Šæ”¾ã€‚\nå¯ä»¥åœ¨setçš„æ—¶å€™ä½¿ç”¨NXé€‰é¡¹ï¼Œä¿è¯åªæœ‰keyå€¼ä¸å­˜åœ¨çš„æ—¶å€™æ‰èƒ½è®¾ç½®ä¸Škeyï¼ˆå³åªæœ‰é”æ²¡æœ‰è¢«è·å–çš„æ—¶å€™æ‰èƒ½åŠ é”ï¼‰ï¼›\nå› ä¸ºRedisæ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œæ‰€ä»¥setä»¥åŠexistsçš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œä¸ä¼šå‡ºç°å¹¶å‘è®¿é—®çš„é—®é¢˜ã€‚\n\næ­¤æ—¶ä¸ºäº†é¿å…ç”³è¯·é”çš„åº”ç”¨æœåŠ¡å™¨æ— æ³•æ­£å¸¸è§£é”ï¼ˆæ¯”å¦‚ç”³è¯·äº†é”çš„æœåŠ¡å™¨çªç„¶æŒ‚æ‰äº†ï¼‰ï¼Œéƒ½ä¼šç»™é”ä¸Šä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œé¿å…æ•´ä¸ªç³»ç»Ÿé™·å…¥æ­»é”çŠ¶æ€ã€‚è¿™ä¸ªè¿‡æœŸæ—¶é—´åº”è¯¥ç•¥å¤§äºå½“å‰æœåŠ¡å™¨éœ€è¦è®¿é—®ä¸´ç•Œèµ„æºçš„æ—¶é—´ï¼ˆé¿å…è¿˜æ²¡æœ‰è®¿é—®å®Œæ¯•å°±å› ä¸ºè¶…æ—¶è‡ªåŠ¨è§£é”äº†ï¼‰ã€‚\n6.ttl&#x2F;pttlè¿™ä¸¤ä¸ªå‘½ä»¤å’Œexpire&#x2F;pexpireå¯¹åº”ï¼Œç”¨äºå‘½ä»¤æ˜¾ç¤ºæŸä¸ªé”®å€¼çš„è¿‡æœŸæ—¶é—´è¿˜å‰©ä¸‹å¤šå°‘ï¼Œttlè¿”å›çš„å•ä½æ˜¯ç§’ï¼Œpttlè¿”å›çš„å•ä½æ˜¯æ¯«ç§’ã€‚è¯¥å‘½ä»¤æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼›\nttl keypttl key\n\nè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„è¿”å›å€¼\n\n-1 ä»£è¡¨å½“å‰é”®å€¼æ°¸ä¸è¿‡æœŸï¼›\n-2 ä»£è¡¨å½“å‰é”®å€¼ä¸å­˜åœ¨ï¼›\n\n\nStarting with Redis version 2.8.0: Added the -2 reply.\n\nRedisçš„è¿‡æœŸç­–ç•¥Redisæ˜¯æ€ä¹ˆçŸ¥é“ä¸€ä¸ªkeyæ˜¯å¦è¿‡æœŸéœ€è¦è¢«åˆ é™¤å‘¢ï¼Ÿ\nç›´æ¥éå†è‚¯å®šä¸è¡Œï¼Œå½“åº“å¾ˆå¤§çš„æ—¶å€™ï¼Œéå†ä¸€æ¬¡çš„æ—¶é—´éƒ½å¤Ÿå–ä¸€å£¶äº†ï¼Œå®Œå…¨è¾¾ä¸åˆ°è¿‡æœŸæ—¶é—´çš„è¦æ±‚ã€‚\nRedisé‡‡ç”¨äº†å®šæ—¶åˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥çš„ç»“åˆï¼š\n\nå®šæ—¶åˆ é™¤ï¼šRediså®šæ—¶ï¼ˆé»˜è®¤100msæ£€æŸ¥ä¸€æ¬¡ï¼‰æŠ½å–ä¸€éƒ¨åˆ†keyæ£€æŸ¥TTLè¿‡æœŸæ—¶é—´ï¼Œå¹¶å°†è¿‡æœŸçš„keyåˆ é™¤ã€‚å› ä¸ºåªæŠ½å–ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ£€æŸ¥çš„è€—æ—¶çŸ­ï¼›\næƒ°æ€§åˆ é™¤ï¼šç”¨æˆ·è¯·æ±‚æŸä¸ªkeyçš„æ—¶å€™æ£€æŸ¥TTLè¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸçš„keyè¢«åˆ é™¤ï¼Œä¸ä¼šè¿”å›ç»™ç”¨æˆ·ï¼›\n\nè¿™ä¸¤ä¸ªæ“ä½œè™½ç„¶ç»´æŒäº†æ€§èƒ½ï¼Œä½†å¹¶ä¸èƒ½ä¿è¯è¿‡æœŸé”®ä¸€å®šèƒ½è¢«æ¸…ç†æ‰ã€‚å¦‚æœæŸä¸ªé”®å€¼å¾ˆä¹…æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œä¸”æ²¡æœ‰è¢«Redisçš„å®šæœŸåˆ é™¤ç­–ç•¥æŠ½å–åˆ°ï¼Œå®ƒå°±ä¼šç•™å­˜åœ¨é‚£é‡Œã€‚è¦æƒ³ä¿è¯Redisä¸­ä¸å­˜åœ¨è¿‡æœŸé”®ï¼Œè¿˜éœ€ä½¿ç”¨ä¸€äº›è¾…åŠ©ç­–ç•¥æ¥å¤„ç†ã€‚\nå®šæ—¶å™¨æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ\nè¿™é‡Œè®°å½•çš„æ˜¯å®ç°ä¸€ä¸ªå®šæ—¶å™¨å¯ä»¥é‡‡å–çš„æ–¹å¼ï¼Œå’ŒRedisé‡‡ç”¨çš„ç­–ç•¥æ— å…³ã€‚\n\næ–°å»ºçº¿ç¨‹æ¥å®šæ—¶åˆ é™¤æ–¹å¼1ï¼šä½¿ç”¨çº¿ç¨‹æ¥å®ç°å®šæ—¶å™¨ã€‚å½“éœ€è¦å®šæ—¶åˆ é™¤çš„æ—¶å€™ï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä¼‘çœ æŒ‡å®šæ—¶é—´ï¼Œä¼‘çœ ç»“æŸåæ‰§è¡Œåˆ é™¤æ“ä½œã€‚ä½†è¿™ä¼šå¤§å¤§å¢åŠ çº¿ç¨‹æ•°é‡å’Œç³»ç»Ÿè´Ÿè½½ï¼Œæ•ˆç‡ä½ã€‚\nåŸºäºè¿‡æœŸæ—¶é—´çš„ä¼˜å…ˆçº§é˜Ÿåˆ—æ–¹å¼2ï¼šä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆä»¥TTLå‰©ä½™æ—¶é—´ä¸ºkeyå€¼ï¼Œå°çš„åœ¨å‰é¢ï¼‰ï¼Œæœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„é”®å€¼å°±è¢«æ’å…¥è¯¥é˜Ÿåˆ—ï¼Œé˜Ÿé¦–å…ƒç´ å°±æ˜¯æœ€å¿«è¿‡æœŸçš„é”®å€¼ã€‚é…ç½®äº†ä¼˜å…ˆçº§é˜Ÿåˆ—åï¼Œåªéœ€è¦ä¸€ä¸ªçº¿ç¨‹å»è½®è¯¢æ£€æŸ¥é˜Ÿé¦–æ¥å¤„ç†è¿‡æœŸé”®å€¼å°±è¡Œäº†ã€‚ä½†æ˜¯é¢‘ç¹çš„æ‰«æä¼šå¤§å¤§å¢åŠ CPUè´Ÿæ‹…ã€‚\næ–¹å¼3ï¼šåœ¨æ–¹å¼2çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¼‘çœ æœºåˆ¶ï¼Œè®©çº¿ç¨‹æ ¹æ®é˜Ÿé¦–é”®å€¼çš„è¿‡æœŸæ—¶é—´è¿›è¡Œä¼‘çœ ã€‚ä¼‘çœ ç»“æŸååˆ é™¤é˜Ÿé¦–å…ƒç´ ã€‚å¦‚æœæœ‰æ–°çš„é”®å€¼æ’å…¥ï¼Œåˆ™å”¤é†’è¯¥çº¿ç¨‹ï¼Œé‡æ–°æ ¹æ®é˜Ÿé¦–é”®å€¼çš„è¿‡æœŸæ—¶é—´è®¾ç½®ä¼‘çœ æ—¶é—´ã€‚è¿™å¯ä»¥é€šè¿‡æ¡ä»¶å˜é‡çš„wait_foræ¥å£åŠ ä¸Šnotifyæ¥å£æ¥å®ç°ã€‚\næ—¶é—´è½®æ–¹æ¡ˆæ–¹å¼4ï¼šä½¿ç”¨æ—¶é—´è½®æ–¹æ¡ˆï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚å·¦ä¾§ä»£è¡¨ä¸€ä¸ªåŸºäºç°åœ¨çš„æ—¶é—´åç§»é‡ï¼Œæ¯ä¸€ä¸ªæ ¼å­å¯¹åº”çš„100msæ—¶é—´åç§»ï¼Œå³ä¾§æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚ä»æ•°æ®ç»“æ„æ¥çœ‹å¯ä»¥æ˜¯ä¸€ä¸ªé¡ºåºè¡¨+é“¾è¡¨ã€‚\næˆ‘ä»¬åªéœ€è¦å°†ttlæ ¹æ®èŒƒå›´æ’å…¥å¯¹åº”çš„æ—¶é—´åç§»é‡éœ€è¦åˆ é™¤çš„keyä¸­ï¼Œçº¿ç¨‹æ¯æ¬¡ä¼‘çœ 100msï¼Œä¼‘çœ ç»“æŸåå°±ä»é“¾è¡¨é‡Œé¢å–èµ°è¿‡æœŸçš„é”®å€¼è¿›è¡Œåˆ é™¤ã€‚\n\n\n\næ—¶é—´åç§»é‡\néœ€è¦åˆ é™¤çš„keyï¼ˆé“¾è¡¨ï¼‰\n\n\n\n100ms\nttlåœ¨[0,100]ä¹‹é—´çš„\n\n\n200ms\nttlåœ¨[101,200]ä¹‹é—´çš„\n\n\n300ms\nâ€¦\n\n\nä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æ˜¯0ç§’ï¼Œè¿‡æœŸå¤„ç†çº¿ç¨‹ç”²å¼€å§‹ä¼‘çœ 100msã€‚æ­¤æ—¶æ¥äº†å‡ ä¸ªæœ‰è¿‡æœŸç­–ç•¥çš„keyï¼Œåˆ†åˆ«æ˜¯50msè¿‡æœŸkey1ã€150msè¿‡æœŸkey2ã€190msè¿‡æœŸkey3ã€210ç§’è¿‡æœŸkey4ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è·å¾—ä¸‹é¢è¿™å¼ é¡ºåºè¡¨+é“¾è¡¨ã€‚\n\n\n\næ—¶é—´åç§»é‡\néœ€è¦åˆ é™¤çš„keyï¼ˆé“¾è¡¨ï¼‰\n\n\n\n100ms\nkey1\n\n\n200ms\nkey2,key3\n\n\n300ms\nkey4\n\n\nçº¿ç¨‹ç”²ä¼‘çœ 100msåï¼Œkey1çš„è¿‡æœŸæ—¶é—´å°±å·²ç»åˆ°äº†ï¼ˆæ­¤æ—¶æ—©å·²è¿‡å»äº†50msï¼‰çº¿ç¨‹ç”²å¯ä»¥å°†å…¶åˆ é™¤ï¼Œç„¶åå†ä¼‘çœ 100msåå¤„ç†key2å’Œkey3ï¼Œå†ä¼‘çœ 100mså¤„ç†key4ã€‚\nå½“ç„¶ï¼Œå½“key1è¢«åˆ é™¤åï¼ˆç¬¬ä¸€ä¸ª100mså·²ç»ä¼‘çœ è¿‡äº†ï¼‰ï¼Œè¡¨ä¼šå‡ºç°ä¸‹é¢çš„åç§»ã€‚æ–°æ¥çš„é”®å€¼éƒ½éœ€è¦æ ¹æ®è·ç¦»å½“å‰æ—¶é—´çš„åç§»é‡æ’å…¥åˆ°å¯¹åº”çš„ä½ç½®ã€‚\n\n\n\næ—¶é—´åç§»é‡\néœ€è¦åˆ é™¤çš„keyï¼ˆé“¾è¡¨ï¼‰\n\n\n\n100ms\nkey2,key3\n\n\n200ms\nkey4\n\n\nå®é™…åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸å¯èƒ½è®©è¿™ä¸ªè¡¨æ ¼çš„é•¿åº¦ä¸€ç›´å¢é•¿ä¸‹å»ï¼Œå¦åˆ™æ¥ä¸ª30000ms(30s)æ‰è¿‡æœŸçš„keyï¼Œå°±éœ€è¦300ä¸ªè¡¨æ ¼ï¼ˆå·¦ä¾§é¡ºåºè¡¨ï¼‰çš„ç©ºé—´æ‰èƒ½å­˜ä¸‹è¿™ä¸ªéœ€è¦30sæ‰è¿‡æœŸçš„é”®å€¼ï¼Œè€Œè¿™ä¹‹ä¸­å¯èƒ½æœ‰å¾ˆå¤šè¡¨æ ¼é¡¹æ˜¯ç©ºçš„ï¼ˆæ²¡æœ‰å¯¹åº”çš„è¿‡æœŸé”®å€¼ï¼‰ï¼Œå­˜åœ¨ç©ºé—´æµªè´¹ã€‚\nä¸ºäº†èŠ‚çœè¿™éƒ¨åˆ†ç©ºé—´ï¼Œè¦é‡‡ç”¨ç±»ä¼¼å“ˆå¸Œæ˜ å°„çš„æ€æƒ³ï¼Œæ¯”å¦‚1050msè¿‡æœŸçš„keyä¹Ÿä¼šè¢«æ’å…¥åˆ°æ—¶é—´åç§»é‡ä¸º100msçš„é“¾è¡¨ä¸­ï¼Œå½“çº¿ç¨‹ä¼‘çœ ç»“æŸåéœ€è¦æ£€æŸ¥é“¾è¡¨ä¸­çš„å€¼çš„è¿‡æœŸæ—¶é—´æ˜¯å¦çœŸçš„åˆ°äº†ï¼Œåˆ°äº†æ‰æ‰§è¡Œåˆ é™¤æ“ä½œã€‚\nå¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ ¹æ®å…·ä½“ä¼‘çœ æ—¶é—´é—´éš”æ¥ç¡®å®šæ¯æ¬¡åº”è¯¥ä¼‘çœ å¤šä¹…ã€‚å‡è®¾æˆ‘ä»¬çš„keyéƒ½æ˜¯5msåˆ°20mså°±è¿‡æœŸäº†ï¼Œæ­¤æ—¶è®¾ç½®ä¼‘çœ é—´éš”ä¸º100mså°±ä¸å¤ªåˆç†äº†ã€‚\n7.typeè¯¥å‘½ä»¤è¿”å›keyå¯¹åº”valueçš„ç±»å‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼›\ntype key\n\nè¿”å›å€¼å¯ä»¥æ˜¯ string, list, set, zset, hash and stream. å¦‚æœkeyä¸å­˜åœ¨åˆ™è¿”å›noneï¼ˆæ³¨æ„è¿”å›çš„ä¸æ˜¯nilï¼‰ã€‚\nåœ¨Rediså®˜ç½‘æ–‡æ¡£ä¸­å¯ä»¥çœ‹åˆ°æ¯ä¸ªæ•°æ®ç±»å‹å¯¹åº”çš„æ•°æ®ç»“æ„ï¼šUnderstand Redis data types | Redisï¼Œå…¶ä¸­å½“redisä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—æ—¶ç±»å‹ä¸ºstreamã€‚\n127.0.0.1:6379&gt; type key1string127.0.0.1:6379&gt; lpush mylist 1 2(integer) 2127.0.0.1:6379&gt; type mylistlist\n\n8.object encoding å˜é‡ç¼–ç ç±»å‹Redisæä¾›äº†å¤šç§æ•°æ®ç±»å‹ï¼šUnderstand Redis data types | Redis\nè¿™äº›ç±»å‹å’Œæˆ‘ä»¬å¸¸è§çš„ç¼–ç¨‹è¯­è¨€ä¸­çš„æ•°æ®ç±»å‹åŸºæœ¬ç±»ä¼¼ï¼Œä½†åº•å±‚å®ç°å°±ä¸ä¸€æ ·äº†ã€‚\nRedisä¿è¯æä¾›çš„æ•°æ®ç±»å‹ç¬¦åˆè¿™ä¸ªæ•°æ®ç±»å‹åº”è¯¥æœ‰çš„é¢„æœŸï¼Œæ¯”å¦‚hashç±»å‹çš„æ’å…¥å’ŒæŸ¥è¯¢çš„æ•ˆç‡åº”è¯¥æ˜¯O(1)ï¼Œä½†åº•å±‚å¹¶ä¸ä¸€å®šä¸¥æ ¼ä½¿ç”¨å“ˆå¸Œè¡¨æ¥å®ç°ã€‚\nRedisä¼šæ ¹æ®å®é™…åœºæ™¯åŠ¨æ€é€‰æ‹©æ›´åŠ åˆé€‚çš„åº•å±‚æ•°æ®ç»“æ„å®ç°ï¼Œæ¥ä¸€å®šç¨‹åº¦çš„æé«˜æ•ˆç‡ã€‚ä¸€ä¸ªçº¯æ•´æ•°æ•°å­—çš„stringï¼Œç›´æ¥ç”¨æ•°å­—ç±»å‹æ¥å­˜æ”¾ä¼šæ¯”ä½¿ç”¨å­—ç¬¦ä¸²æ¥å­˜æ”¾å ç”¨æ›´å°‘çš„å­˜å‚¨ç©ºé—´ï¼ˆ1å­—èŠ‚å¯ä»¥å­˜æ”¾æ— ç¬¦å·æ•°0åˆ°255ï¼Œä½†255ç”¨å­—ç¬¦ä¸²æ¥å­˜æ”¾éœ€è¦3ä¸ªå­—èŠ‚ï¼‰ã€‚\n\n\n\næ•°æ®ç»“æ„\nå†…éƒ¨ç¼–ç \n\n\n\nstring\nraw(åŸå§‹å­—ç¬¦ä¸²)&#x2F;int&#x2F;embstr(ä¸ºçŸ­å­—ç¬¦ä¸²ä¼˜åŒ–)\n\n\nhash\nhashtable(å“ˆå¸Œè¡¨)&#x2F;ziplist(å‹ç¼©åˆ—è¡¨,èŠ‚çœç©ºé—´)\n\n\nlist\nlinkedlist(é“¾è¡¨)&#x2F;ziplist&#x2F;quicklist\n\n\nset\nhashtable&#x2F;intset(æ•´å½¢é›†åˆ)\n\n\nzset\nskiplist(è·³è¡¨)&#x2F;ziplist\n\n\nziplistæ˜¯ç”¨æ¥å­˜æ”¾å°åˆ—è¡¨çš„ç¼–ç æ–¹å¼ï¼Œä½¿ç”¨å®ƒç›¸æ¯”ç›´æ¥ä½¿ç”¨é“¾è¡¨æˆ–å“ˆå¸Œè¡¨èƒ½èŠ‚çœç©ºé—´å ç”¨ã€‚å½“Redisä¸­æœ‰å¾ˆå¤šä¸ªå¾ˆå°çš„listå’Œhashçš„æ—¶å€™ï¼Œziplistå°±èƒ½è¾…åŠ©èŠ‚çœå¾ˆå¯è§‚çš„å†…å­˜ç©ºé—´äº†ã€‚å…·ä½“å¯ä»¥å‚è€ƒï¼šRedis ziplist(å‹ç¼©åˆ—è¡¨) CSDNåšå®¢\nåœ¨Redisä¸­å¯ä»¥ä½¿ç”¨object encodingå‘½ä»¤æ¥æŸ¥çœ‹ä¸€ä¸ªé”®å€¼åº•å±‚å®é™…çš„ç¼–ç æ–¹å¼æ˜¯ä»€ä¹ˆ\nobject encoding key\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯”è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ˜¯embstrï¼Œlistç±»å‹æ˜¯quicketlistï¼Œå…¨æ•°å­—çš„å­—ç¬¦ä¸²æ˜¯intï¼ˆåŒ…æ‹¬è´Ÿæ•´æ•°ä¹Ÿæ˜¯ç”¨intå­˜æ”¾çš„ï¼‰ï¼›\n127.0.0.1:6379&gt; object encoding key1&quot;embstr&quot;127.0.0.1:6379&gt; object encoding mylist&quot;quicklist&quot;127.0.0.1:6379&gt; set key3 12345OK127.0.0.1:6379&gt; object encoding key3&quot;int&quot;127.0.0.1:6379&gt; get a -1127.0.0.1:6379&gt; object encoding aint\n\nRedisä¼šåœ¨é”®å€¼ä¸­æ•°æ®å¢åŠ åˆ°ä¸€å®šé‡çº§åè‡ªåŠ¨åˆ‡æ¢ç¼–ç æ–¹å¼ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦çŸ¥é“è¿™ä¸ªæ€æƒ³å°±è¡Œäº†ã€‚\n9.flushall åˆ åº“è·‘è·¯MySQLå¯ä»¥åˆ åº“è·‘è·¯ï¼ŒRedisè‡ªç„¶ä¹Ÿå¯ä»¥ã€‚è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯æ¸…é™¤Redisä¸­çš„æ‰€æœ‰é”®å€¼ã€‚\nflushall\n\nå¦‚æœé‡‡ç”¨Redisä½œä¸ºç¼“å­˜ï¼Œæ¸…ç©ºäº†é—®é¢˜ç›¸å¯¹æ¥è¯´è¿˜æ²¡é‚£ä¹ˆå¤§ï¼Œä½†å¦‚æœæ˜¯ä½œä¸ºæ•°æ®åº“ï¼Œé‚£å°±ç¥ä½ å¥½è¿å§â€¦â€¦\nè¯·ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¿™ä¸ªå‘½ä»¤å“¦ï¼\n127.0.0.1:6379&gt; flushallOK127.0.0.1:6379&gt; keys *127.0.0.1:6379&gt;\n\nThe endä»¥ä¸Šä¾¿æ˜¯Redisçš„å…¨å±€å‘½ä»¤äº†ï¼ˆæœ€å¸¸ç”¨çš„å‘½ä»¤ï¼‰ï¼Œå…³äºå…¶ä»–æ•°æ®ç±»å‹çš„å‘½ä»¤ä¼šå•ç‹¬èµ·æ–‡è®²è§£ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Redis"],"tags":["Redis"]},{"title":"ã€Pythonã€‘å¦‚ä½•ç»™ä½ çš„kookæœºå™¨äººæ·»åŠ ä¸Šç¿»è¯‘åŠŸèƒ½","url":"/posts/644618981/","content":"ç¿»è¯‘åŠŸèƒ½å®ç°æ‰“å¼€ code&#x2F;endpoints&#x2F;translate.pyï¼Œè¿™ä¾¿æ˜¯æœ¬ä»“åº“ä¸­ç¿»è¯‘ä»£ç çš„å®ç°ã€‚\nå…¶ä¸­ç¬¬ä¸€éƒ¨åˆ†æœ‰é“ç¿»è¯‘çš„ä»£ç æ¥è‡ªMany-Translatersé¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä¸Šä¸€æ¬¡ç»´æŠ¤æ˜¯åœ¨4å¹´å‰ï¼Œä¸”é‡Œé¢çš„éƒ¨åˆ†ä»£ç å·²ç»æ— æ³•ä½¿ç”¨ã€‚è¯¥ä»£ç å±äºä¸€ä¸ªç™½å«–äº§ç‰©ï¼Œç¨³å®šæ€§æœªçŸ¥ã€‚\nä¸ºäº†ä¸è®©æˆ‘çš„botåœ¨æœ‰é“ç¿»è¯‘æ¥å£å¤±æ•ˆåç›´æ¥æ²¡æœ‰äº†ç¿»è¯‘åŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†å½©äº‘å°è¯‘æ¥ä½œâ€œå¤‡èƒâ€\n\nä½ å¯ä»¥åœ¨å½©äº‘å°è¯‘çš„å®˜ç½‘ä¸Šæ‰¾åˆ°apiæ–‡æ¡£ï¼Œå†…éƒ¨åŒ…å«äº†ä¸€ä¸ªPythonä»£ç ç¤ºä¾‹ï¼Œå¼€ç®±å³ç”¨ï¼å…è´¹ç”¨æˆ·ç”³è¯·çš„api-keyï¼Œæ¯æœˆæœ‰100wå­—ç¬¦çš„å…è´¹é¢åº¦ï¼Œå¯¹äºæˆ‘ä»¬çš„botç®—æ˜¯å¤Ÿç”¨äº†ã€‚\n\n1.å…³äºaiohttpå’Œrequestsçš„ä¼˜åŠ£åœ¨khl.pyä¸€ä¼—å¤§ä½¬çš„å»ºè®®ä¸‹ï¼Œæˆ‘ç®€å•å­¦ä¹ äº†aiohttpçš„ä»£ç ï¼Œå¹¶å°†å½©äº‘å°è¯‘çš„requestsä¿®æ”¹ä¸ºäº†aiohttp\n#åŸæœ‰requestsä»£ç response = requests.request(&quot;POST&quot;, url, data=json.dumps(payload), headers=headers)return json.loads(response.text)[&quot;target&quot;]#æ›¿æ¢ä¸ºaiohttpä»£ç async with aiohttp.ClientSession() as session:    async with session.post(url, data=json.dumps(payload), headers=headers) as response:        return json.loads(await response.text())[&quot;target&quot;]\n\nè¿™é‡Œç®€å•è¯´ä¸€ä¸‹aiohttpå’Œrequestsçš„åŒºåˆ«\n\nrequestsé€”ä¸­ï¼Œç¨‹åºä¼šæŒ‚èµ·ï¼Œbotå°†ä¸ä¼šå“åº”å…¶ä»–å‘½ä»¤\naiohttpä½œä¸ºå¼‚æ­¥æ¡†æ¶ï¼Œbotåœ¨ä½¿ç”¨å®ƒçš„åŒæ—¶ï¼Œå¯ä»¥åŒæ­¥å¤„ç†å…¶ä»–å‘½ä»¤\n\nä¸¾ä¸ªæ —å­ï¼šå‡è®¾æœ‰ç”¨æˆ·æ¯1åˆ†é’Ÿè°ƒç”¨ä¸€æ¬¡botçš„ç¿»è¯‘æ¥å£ï¼Œå½©äº‘å°è¯‘çš„æœåŠ¡å™¨ç”¨äº†3ç§’é’Ÿï¼ˆå®é™…è‚¯å®šæ²¡é‚£ä¹ˆä¹…ï¼‰å“åº”äº†æˆ‘ä»¬çš„requestsã€‚è¿™3ç§’é’Ÿå†…ï¼Œå¦‚æœæœ‰å…¶ä»–ç”¨æˆ·è°ƒç”¨äº†botçš„å¦å¤–ä¸€ä¸ªæŒ‡ä»¤ï¼Œæˆ‘ä»¬çš„botå°±è·Ÿå‡æ­»äº†ä¸€æ ·ï¼Œä¸ä¼šå“åº”è¯¥ç”¨æˆ·çš„æŒ‡ä»¤\nè¿™æ ·çœ‹æ¥ï¼Œä¼˜åŠ¿å°±å¾ˆæ˜æ˜¾äº†ï¼šè™½ç„¶åœ¨ç½‘ç»œç¨³å®šçš„æ—¶å€™ï¼Œrequestså’Œaiohttpä¸ä¼šå½¢æˆé²œæ˜çš„æ•ˆç‡å·®è·ï¼Œä½†åœ¨KOOKæˆ–è€…å½©äº‘å°è¯‘æœåŠ¡å™¨æ‹¥å µæœŸé—´ï¼Œæˆ‘ä»¬çš„botä¹Ÿèƒ½åšåˆ°ä¸ä¼šå› ä¸ºrequestsæ—¶é—´å¤ªé•¿è€Œå½±å“ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚\n2.åˆ©ç”¨æŠ›å¼‚å¸¸æœºåˆ¶æ›´æ”¹ç¿»è¯‘å¼•æ“çœ‹åˆ°main.pyä¸­çš„translateéƒ¨åˆ†ï¼Œè¿™é‡Œæˆ‘importäº†translate.pyä¸­çš„ç›¸å…³å‡½æ•°ï¼Œéšåä½¿ç”¨bot.commandæ¥è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ã€‚é‚£ä¹ˆå¦‚ä½•è®©botåœ¨æœ‰é“ç¿»è¯‘æ¥å£å¯„äº†çš„æ—¶å€™ï¼Œè‡ªåŠ¨å»æ‰¾å¤‡èƒå½©äº‘å°è¯‘å‘¢ï¼Ÿ\n\nç®€å•äº†è§£æŠ›å¼‚å¸¸\n\nåœ¨pythonä¸­ï¼ŒåŸºæœ¬çš„æŠ›å¼‚å¸¸æœºåˆ¶å¦‚ä¸‹ï¼š\ntry:    num(&#x27;a&#x27;, &#x27;b&#x27;)except:    print(&#x27;ç¨‹åºå¥”æºƒå•¦ï¼&#x27;)\n\nä¸Šé¢è¿™ä¸ªä»£ç å°±æ˜¯ä¸€ä¸ªç®€å•çš„æŠ›å¼‚å¸¸æœºåˆ¶ã€‚ç¼–è¯‘å™¨ä¼šå…ˆå°è¯•è¿è¡Œtryåé¢çš„ä»£ç ï¼Œå¦‚æœè¯¥éƒ¨åˆ†æŠ¥é”™ï¼Œåˆ™ä¼šè½¬è€Œæ‰§è¡Œexceptåçš„ä»£ç ã€‚\nè½¬æ¢å€’æˆ‘ä»¬è¿™é‡Œçš„ä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨tryåé¢å†™å…¥æœ‰é“ç¿»è¯‘çš„ä»£ç ï¼Œåœ¨exceptåå†™å…¥å½©äº‘å°è¯‘çš„ä»£ç ï¼Œç¼–è¯‘å™¨å°±èƒ½åœ¨æœ‰é“çš„æ¥å£å‡ºé”™çš„æ—¶å€™ï¼Œè‡ªåŠ¨æ‰¾å¤‡èƒ\ntry:\t#æœ‰é“ä»£ç å®ç°except:    #å½©äº‘å°è¯‘ä»£ç å®ç°\n\n\n3.å…³äºå¸¦ç©ºæ ¼è‹±æ–‡å¥å­ä¼ å‚é—®é¢˜å½“æˆ‘ä»¬ç¿»è¯‘ä¸€ä¸ªå¥å­çš„æ—¶å€™ï¼Œä¸­æ–‡å†…å®¹å¾€å¾€æ²¡æœ‰ç©ºæ ¼ï¼Œä½†è‹±æ–‡å¥å­æå…¶ä¾èµ–äºç©ºæ ¼è¿›è¡Œå•è¯çš„åˆ†å‰²ã€‚\nå¦‚æœæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨stræ¥æ¥å—ä¼ å‚ï¼Œå°±ä¼šå¯¼è‡´ç”¨æˆ·éœ€è¦ç¿»è¯‘çš„è‹±æ–‡å†…å®¹ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå•è¯ä¼ äº†è¿‡æ¥\nasync def translate(msg: Message,txt:str):\n\næ¯”å¦‚å½“ç”¨æˆ·æ‰“å‡ºï¼š/TL I LOVE YOUæ—¶ï¼Œbotå®é™…æ¥æ”¶åˆ°çš„åªæœ‰é¦–å•è¯Iï¼Œå®ƒä¼šç¿»è¯‘è¯¥å•è¯ï¼Œå¯åé¢çš„LOVE YOUç›´æ¥è¢«æ— æƒ…æŠ›å¼ƒäº†ï¼\nè¿™é‡Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨pythonä¸­ç‰›é€¼çš„ä¸å®šä¼ å‚*argäº†ï¼\nasync def translate(msg: Message,*arg):\n\n*argæ˜¯pythonä¸­æ”¯æŒçš„ä¸å®šå‚æ•°ä¼ å‚ï¼Œå³å‡½æ•°å…ˆå‰ä¸çŸ¥é“ç”¨æˆ·ä¼šä¼ å…¥å¤šå°‘ä¸ªå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¼ å‚å®Œæ¯•åï¼Œå†å¯¹è¿™äº›å‚æ•°è¿›è¡Œæ“ä½œã€‚\nåˆ©ç”¨*argçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰å•è¯éƒ½æ¥æ”¶è¿‡æ¥ï¼Œå†åœ¨å‡½æ•°ä¸­å°†å®ƒä»¬æ‹¼æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œä¼ å…¥åˆ°translateå‡½æ•°ä¸­ã€‚\nasync def translate(msg: Message,*arg):    word = &quot; &quot;.join(arg)\n\nè¿™é‡Œçš„&quot; &quot;.jion(arg)ä»£è¡¨ç”¨ç©ºæ ¼æ¥åˆ†éš”æ¯ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ ·æ‰èƒ½æ‹¼å‡ºä¸€ä¸ªå®Œæ•´çš„è‹±æ–‡å¥å­ï¼\n\n\n\nå¥½äº†ï¼ŒåŸºæœ¬çš„å•å¥ç¿»è¯‘å·²ç»å†™å¥½äº†ï¼Œä½†æˆ‘ä»¬è¿˜å¯ä»¥æ•´ç‚¹èŠ±æ´»ï¼Œè®©botå¯ä»¥å®æ—¶ç¿»è¯‘æŸä¸€ä¸ªæ–‡å­—é¢‘é“å†…çš„æ‰€æœ‰æ¶ˆæ¯ï¼\n4.å®æ—¶ç¿»è¯‘ï¼ˆå…¨å±€å˜é‡ï¼‰è§main.pyä¸­çš„ListTLï¼Œè¿™é‡Œæˆ‘ä¸ºå®æ—¶ç¿»è¯‘åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€æ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾éœ€è¦å®æ—¶ç¿»è¯‘çš„æ–‡å­—é¢‘é“idã€‚\næ³¨æ„ï¼šListTLä½œä¸ºå…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°ä¸­è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦å…ˆç”¨global ListTLè¿›è¡Œå…¨å±€å˜é‡å£°æ˜ã€‚å¦ä¾§ç¨‹åºä¼šåœ¨è¯¥å‡½æ•°ä¸­åˆ›å»ºä¸´æ—¶å˜é‡ï¼\n\nå½“ç”¨æˆ·éœ€è¦å®æ—¶ç¿»è¯‘æ—¶ï¼Œåˆ©ç”¨/TLONåŠŸèƒ½åœ¨ä»–æ‰€åœ¨çš„æ–‡å­—é¢‘é“å¼€å¯è¯¥åŠŸèƒ½\n\nbotå¯ä»¥åœ¨msg.ctx.channel.idä¸­è·å–åˆ°ç”¨æˆ·æ‰€åœ¨æ–‡å­—é¢‘é“çš„idï¼Œå¹¶å°†å…¶å†™å…¥Listä¸­\n\nä½¿ç”¨@bot.command(regex=r&#39;(.+)&#39;)æ­£åˆ™è¡¨è¾¾å¼è·å–æ–‡å­—é¢‘é“çš„æ‰€æœ‰å†…å®¹ï¼Œå†é€šè¿‡åˆ¤æ–­è¯¥æ–‡å­—é¢‘é“idæ˜¯å¦å­˜äºListä¹‹ä¸­ï¼Œæ¥ç¡®è®¤æ˜¯å¦è¦è¿›è¡Œå®æ—¶ç¿»è¯‘å¹¶è¿”å›ç»“æœ\n\nè¿™ç§æ­£åˆ™æ–¹æ³•ä¹Ÿæ˜¯è®©botç›‘çœ‹æ–‡å­—é¢‘é“çš„ä¸€ä¸ªéå¸¸å¥½çš„åŠæ³•ï¼Œæ¯”å¦‚å‘ç°å…³é”®è¯ä¹‹åï¼Œè‡ªåŠ¨å‘é€å¯¹åº”æ¶ˆæ¯æç¤ºã€‚\n\nå½“ç”¨æˆ·ä½¿ç”¨/TLOFFå…³é—­å®æ—¶ç¿»è¯‘åï¼Œå°†å¯¹åº”ä½ç½®çš„Listç½®é›¶ï¼Œç©ºå‡ºæ ä½\n\nå…·ä½“çš„ä»£ç å®ç°å¯ä»¥æŸ¥çœ‹main.pyä¸­translateç›¸å…³éƒ¨åˆ†çš„å‡½æ•°\n5.å¤„ç†metå’Œrolæ¶ˆæ¯ä¸ºäº†é¿å…å†²çªï¼Œæœºå™¨äººä¸åº”è¯¥ç¿»è¯‘ @xxç”¨æˆ·å’Œ@xxè§’è‰² çš„æ¶ˆæ¯ï¼Œåœ¨kookçš„åå°ï¼Œæœºå™¨äººä¼šæ¥æ”¶åˆ° (met)user_id(met)/(rol)role_id(rol) æ ¼å¼çš„æ–‡å­—ï¼›\nç”¨ä¸‹é¢çš„ä»£ç å¤„ç†ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªä¸²æ›¿æ¢æˆç©ºä¸²ï¼Œä¸è¿›è¡Œç¿»è¯‘\n# å•ç‹¬å¤„ç†metå’Œrolæ¶ˆæ¯ï¼Œä¸ç¿»è¯‘è¿™éƒ¨åˆ†å†…å®¹def deleteByStartAndEnd(s, start, end):    # æ‰¾å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²åœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­çš„ä½ç½®    # å¼€å§‹ä½ç½®æ˜¯ï¼šå¼€å§‹å§‹å­—ç¬¦ä¸²çš„æœ€å·¦è¾¹ç¬¬ä¸€ä¸ªä½ç½®ï¼›    # ç»“æŸä½ç½®æ˜¯ï¼šç»“æŸå­—ç¬¦ä¸²çš„æœ€å³è¾¹çš„ç¬¬ä¸€ä¸ªä½ç½®    while s.find(start) != -1:        x1 = s.find(start)        x2 = s.find(end, x1 + 5) + len(end)  # s.index()å‡½æ•°ç®—å‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²çš„æœ€å·¦è¾¹çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Šé•¿åº¦æ‰¾åˆ°æœ«å°¾        # æ‰¾å‡ºä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´çš„å†…å®¹        x3 = s[x1:x2]        # å°†å†…å®¹æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²s        s = s.replace(x3, &quot;&quot;)    print(f&#x27;Handel&#123;start&#125;: &#123;s&#125;&#x27;)    return s\n\n\nç»“è¯­ä½¿ç”¨å®æ—¶ç¿»è¯‘å¯ä»¥å®ç°ä¸€äº›å¥½ç©çš„äº‹æƒ…ï¼šæ¯”å¦‚æŠŠä¸€å¥è¯æ¥å›ç¿»è¯‘Néè¿›è¡Œâ€œæçº¯â€\nï¼ˆéå¸¸æ— èŠäº†å±äºæ˜¯ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Pythonã€‘å°†kookæœºå™¨äººå’Œçˆ±å‘ç”µå¯¹æ¥ï¼Œå®ç°vipè‡ªåŠ¨åŒ–é”€å”®","url":"/posts/2140431451/","content":"demoå¼€æºåœ°å€ https://github.com/musnows/Kook-Afd-Webhook-Bot\n1.ç®€ä»‹æœ¬æ–‡æ¡£ä¸»è¦è®²è§£å¦‚ä½•å°†kookæœºå™¨äººä¸çˆ±å‘ç”µçš„webhookåŠŸèƒ½è¿›è¡Œå¯¹æ¥\n\nå•†å“ä»¥vipä½œä¸ºç¤ºä¾‹ï¼Œæä¾›ä¸€ä¸ªåŸºç¡€çš„python-demo\n\nä¸»è¦æµç¨‹å¦‚ä¸‹\n\næœºå™¨äººæä¾›vipå•†åŸå‘½ä»¤ï¼Œç”¨æˆ·æ‰§è¡Œï¼Œæœºå™¨äººå‘é€ä¸€å¼ åŒ…å«ä¸åŒä»·ä½vipä»·æ ¼å’Œè´­ä¹°urlçš„å¡ç‰‡ç»™ç”¨æˆ·ï¼ˆä¸´æ—¶æ¶ˆæ¯ï¼Œåªæœ‰è¿™ä¸ªç”¨æˆ·èƒ½çœ‹åˆ°ï¼‰\nç”¨æˆ·è´­ä¹°å•†å“æ—¶ï¼Œçˆ±å‘ç”µå‘é€webhookç»™æœºå™¨äºº\næœºå™¨äººè·å–webhookä¿¡æ¯ä¸­çš„custom_order_idï¼Œè§£æå‡ºç”¨æˆ·idå’Œè´­ä¹°å¤©æ•°ï¼Œè‡ªåŠ¨ç»™å¯¹åº”ç”¨æˆ·ä¸Švip\n\nç›¸å…³æ–‡æ¡£\n\næœºå™¨äººæ‰€ç”¨æ¡†æ¶ï¼šgithub.com&#x2F;TWT233&#x2F;khl.py\nçˆ±å‘ç”µwebhookæ¥å£æ–‡æ¡£ï¼šhttps://afdian.net/p/9c65d9cc617011ed81c352540025c377\n\nå¼€å§‹å‰ï¼Œä½ éœ€è¦å…ˆæ‹¥æœ‰è‡ªå·±çš„kook-botï¼Œå¹¶æ³¨å†Œçˆ±å‘ç”µï¼Œç”³è¯·çˆ±å‘ç”µå¼€å‘è€…æƒé™\n\nå¦‚æœä½ æƒ³ä½¿ç”¨CDKï¼ˆå³å…‘æ¢ç ï¼‰çš„æ–¹å¼æ¥åˆ†å‘vipï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„ Valorant-Shop-CN&#x2F;Kook-Valorant-Bot é¡¹ç›®\n\n2.python-demo2.1 webhook-apiè¦æƒ³å’Œçˆ±å‘ç”µçš„apiå¯¹æ¥ï¼Œé¦–å…ˆbotè‡ªå·±éœ€è¦ç»´æŠ¤ä¸€ä¸ªwebhookçš„api-urlã€‚è¿™ä¹Ÿè¦æ±‚ä½ çš„æœºå™¨äººæ˜¯éƒ¨ç½²åœ¨å¯å…¬ç½‘è®¿é—®çš„ç¯å¢ƒä¸­ï¼Œå¦åˆ™çˆ±å‘ç”µçš„webhookæ— æ³•é€è¾¾ã€‚\n\nçˆ±å‘ç”µå¼€å‘è€…é¡µé¢ https://afdian.net/dashboard/dev\nè¯¥urlå¿…é¡»ä¸ºhttpsåè®®ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦ç»‘å®šåŸŸåå¹¶é…ç½®ssl\n\nåŒæ—¶ï¼Œä¸ºäº†ä¿è¯webhookä¸­å§‹ç»ˆæœ‰custom_order_idå­—æ®µï¼Œæ‚¨éœ€è¦å‘ŠçŸ¥æ‚¨çš„ç”¨æˆ·ï¼Œåªèƒ½é€šè¿‡æœºå™¨äººç”Ÿæˆçš„urlæ¥è´­ä¹°vipã€‚å¦åˆ™è‡ªåŠ¨åŒ–æµç¨‹å°†å¤±æ•ˆ\n\næœºå™¨äººæ”¶åˆ°çˆ±å‘ç”µwebhook\nè§£æwebhookä¸­çš„é”®å€¼ï¼Œè·å–åˆ°custom_order_id\nè§£æcustom_order_idï¼Œè·å–åˆ°kookç”¨æˆ·idå’Œvipå¤©æ•°\nç»™ç”¨æˆ·æ·»åŠ ä¸Švipå¤©æ•°\n\ncustom_order_id=kookç”¨æˆ·id:vipå¤©æ•°\n\nå¤„ç†ä»£ç è¯¦è§ api.py å’Œ apiHandler.py\n2.2 æœºå™¨äººæœºå™¨äººå‘½ä»¤å¦‚ä¸‹\n\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\n&#x2F;shop\nè·å–è´­ä¹°vipçš„å¡ç‰‡\n\n\n&#x2F;vip\nçœ‹çœ‹è‡ªå·±vipå‰©ä½™æ—¶é•¿\n\n\n&#x2F;vip-l\nè·å–vipç”¨æˆ·åˆ—è¡¨ï¼ˆä¼šåˆ·æ‰è¿‡æœŸçš„vipç”¨æˆ·ï¼‰\n\n\n&#x2F;vip-test\nè¯¥å‘½ä»¤åªæœ‰vipç”¨æˆ·æ‰èƒ½æ‰§è¡Œï¼Œç”¨äºæµ‹è¯•vipæ˜¯å¦ç”Ÿæ•ˆ\n\n\n&#x2F;alive\nçœ‹çœ‹æœºå™¨äººæ´»ç€ä¸\n\n\n&#x2F;kill\næœºå™¨äººä¸‹çº¿ï¼Œå¹¶ä¿å­˜æ–‡ä»¶\n\n\nä»£ç è¯¦è§ main.py\n2.2.1 vipç‰©å“urlè·å–å…ˆåˆ›å»ºä½ çš„vipåº—é“ºã€‚çˆ±å‘ç”µçš„å•†å“æœ‰éšè—åŠŸèƒ½ï¼Œéšè—åçš„å•†å“å°†ä¸ä¼šæ˜¾ç¤ºåœ¨ä¸»é¡µä¸Šï¼Œè¿™æ ·ä¹Ÿèƒ½å®ç°ç”¨æˆ·åªèƒ½é€šè¿‡botæä¾›çš„é“¾æ¥æ¥è®¿é—®è´­ä¹°çš„æ“ä½œ\n\n\nè¿™é‡Œæˆ‘æ‹¿å‘¨vipå’Œæœˆvipä½œä¸ºç¤ºä¾‹\n\nç‚¹å‡»å•†å“ï¼Œè¿›å…¥è¯¦æƒ…é¡µï¼Œç‚¹å‡»å‘ç”µ\n\nè¿›å…¥ä»˜æ¬¾é¡µé¢åï¼Œå¤åˆ¶æœ€ä¸Šæ–¹çš„url\n\nhttps://afdian.net/order/create?product_type=1&amp;plan_id=9aea871c304911ed8ec452540025c377&amp;sku=%5B%7B%22sku_id%22%3A%229aed6edc304911edbeb552540025c377%22,%22count%22%3A1%7D%5D\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªurlå°¾éƒ¨æ·»åŠ ä¸Šcustom_order_id\n&amp;custom_order_id=kookç”¨æˆ·id:vipå¤©æ•°\n\næ·»åŠ å®Œæ¯•åçš„é“¾æ¥å¦‚ä¸‹\nhttps://afdian.net/order/create?product_type=1&amp;plan_id=9aea871c304911ed8ec452540025c377&amp;sku=%5B%7B%22sku_id%22%3A%229aed6edc304911edbeb552540025c377%22,%22count%22%3A1%7D%5D&amp;custom_order_id=kookç”¨æˆ·id:vipå¤©æ•°\n\nå¤åˆ¶åˆ°æµè§ˆå™¨ï¼Œä»å¯æ­£å¸¸è®¿é—®ï¼Œä»£è¡¨é…ç½®æ— è¯¯\n\n2.2.2 vipç‰©å“urlé…ç½®æ‰¾åˆ°main.pyä¸­çš„å¦‚ä¸‹ä»£ç ï¼Œå°†é‡Œé¢çš„vip_item_linkæ›¿æ¢æˆä½ è‡ªå·±çš„urlã€‚å¦‚æœéœ€è¦æ·»åŠ æ›´å¤šå•†å“ï¼Œå°†ä¸¤ä¸ª----------ä¸­é—´çš„éƒ¨åˆ†å¤šå¤åˆ¶å‡ ä»½å³å¯\n@bot.command(name=&#x27;shop&#x27;,case_sensitive=False)async def shop_cmd(msg:Message,*arg):    logMsg(msg)    try:        cm = CardMessage()        c =Card(Module.Section(Element.Text(&quot;æ¬¢è¿é€‰è´­æœºå™¨äººVip&quot;,Types.Text.KMD)))        # -------------        # vipå•†å“1,å‘¨vip        vip_item_link1 = &quot;https://afdian.net/order/create?product_type=1&amp;plan_id=9aea871c304911ed8ec452540025c377&amp;sku=%5B%7B%22sku_id%22%3A%229aed6edc304911edbeb552540025c377%22,%22count%22%3A1%7D%5D&quot;        # æ·»åŠ ä¸Šè‡ªå®šä¹‰è®¢å•å·çš„å­—ç¬¦ä¸²        vip_item_link1+= f&quot;&amp;custom_order_id=&#123;msg.author_id&#125;:7&quot;        c.append(            Module.Section(                Element.Text(&quot;å‘¨vip&quot;, Types.Text.KMD),                Element.Button(&quot;è´­ä¹°&quot;, vip_item_link1, Types.Click.LINK)))        # -------------                # vipå•†å“2,æœˆvip        vip_item_link2 = &quot;https://afdian.net/order/create?product_type=1&amp;plan_id=ff2949022e9611ed89d452540025c377&amp;sku=%5B%7B%22sku_id%22%3A%22ff2bb4f82e9611ed83ac52540025c377%22,%22count%22%3A1%7D%5D&quot;        # æ·»åŠ ä¸Šè‡ªå®šä¹‰è®¢å•å·çš„å­—ç¬¦ä¸²        vip_item_link2+= f&quot;&amp;custom_order_id=&#123;msg.author_id&#125;:30&quot;        c.append(            Module.Section(                Element.Text(&quot;æœˆvip&quot;, Types.Text.KMD),                Element.Button(&quot;è´­ä¹°&quot;, vip_item_link2, Types.Click.LINK)))                cm.append(c)        await msg.reply(cm,is_temp=True) # ä¸´æ—¶æ¶ˆæ¯ï¼Œæ‰€ä»¥è¿™ä¸ªæŒ‰é’®åªæœ‰å½“å‰ç”¨æˆ·å¯ä»¥ç‚¹    except:        _log.exception(f&quot;Err in shop&quot;)\n\n2.2.3 å¯åŠ¨æœºå™¨äººå¹¶é…ç½®webhookå…ˆå®‰è£…ä¾èµ–é¡¹ï¼ˆPythonç‰ˆæœ¬3.10ï¼‰\npip3.10 install -r requierments.txt\n\n\né…ç½®æ–‡ä»¶ç¤ºä¾‹config/config.exp.json\nåœ¨å†…éƒ¨å¡«å†™æ­£ç¡®çš„æœºå™¨äººtokenå­—æ®µåï¼Œé‡å‘½åä¸ºconfig.json\nå¹¶å°†config/log.expä¸­çš„ä¸¤ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°log/è·¯å¾„ä¸‹\n\nç„¶åå¯åŠ¨æœºå™¨äºº\npython3.10 start.py\n\nçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºå³ä¸ºå¯åŠ¨æˆåŠŸ\n\næˆ‘ä»¬éœ€è¦å°†apiçš„åœ°å€å¡«å†™åˆ°çˆ±å‘ç”µçš„webhook urlä¸­\n\nå¼€å‘è€…é¡µé¢ https://afdian.net/dashboard/dev\n\nè®°å¾—å¼€æ”¾å¯¹åº”ç«¯å£é˜²ç«å¢™ï¼Œå¹¶æ­£ç¡®ç»‘å®šåŸŸåå’Œå¼€å¯https\n\nå¡«å†™urlåç‚¹å‡»ä¿å­˜ï¼Œçˆ±å‘ç”µä¼šå‘é€ä¸€æ¡æµ‹è¯•webhookç»™ä½ çš„æœºå™¨äººã€‚å¦‚æœåœ¨é¢„å…ˆå®šä¹‰çš„debug_chä¸­çœ‹åˆ°äº†å¦‚ä¸‹å¡ç‰‡ï¼Œåˆ™ä»£è¡¨webhooké…ç½®æˆåŠŸ\n\n[23-04-19 19:46:07] INFO:api.py:aifadian_webhook:31 | request | /afd[23-04-19 19:46:07] INFO:apiHandler.py:afd_request:71 | trno:202106232138371083454010626 | afd-cm-send\n\nkillæ‰æœºå™¨äººåï¼Œåœ¨logæ–‡ä»¶ä¸­ä¹Ÿèƒ½çœ‹åˆ°è¿™æ¬¡æµ‹è¯•webhookçš„è¯·æ±‚ä½“\n\n2.3 å‘½ä»¤æˆªå›¾2.3.1 åŸºç¡€æµ‹è¯•å…ˆæµ‹è¯•ä¸€ä¸‹æœºå™¨äººä¸Šçº¿æ²¡æœ‰\n\nåˆšå¼€å§‹æ—¶ï¼Œæ²¡æœ‰vipç”¨æˆ·\n\n\nä½¿ç”¨å•†åŸå‘½ä»¤ï¼Œè·å–è´­ä¹°æŒ‰é’®\n\nç‚¹å‡»æŒ‰é’®ï¼Œä¼šè·³è½¬åˆ°çˆ±å‘ç”µçš„ä»˜æ¬¾é¡µé¢ï¼Œèƒ½çœ‹åˆ°urlæœ€åæˆåŠŸé™„ç€ä¸Šäº†ç”¨æˆ·idå’Œæ—¶é—´\n&amp;custom_order_id=1961572535%3A7\n\nurlä¸­çš„%3Aå°±æ˜¯:\n\n2.3.2 è´­å…¥vipæµ‹è¯•å¦‚ä¸‹ï¼Œæˆ‘è´­ä¹°äº†ä¸€ä¸ªå‘¨vipï¼Œæœºå™¨äººæˆåŠŸè·å–åˆ°äº†webhookä½“ä¸­çš„è‡ªå®šä¹‰è®¢å•id\n\næ­¤æ—¶å†æ¬¡æ‰§è¡Œvipå‘½ä»¤ï¼Œèƒ½çœ‹åˆ°å·²ç»æ­£ç¡®æ·»åŠ ä¸Šäº†7å¤©çš„vip\n\n\næ—¥å¿—æ–‡ä»¶ä¹ŸæˆåŠŸè®°å½•\n\n\næµ‹è¯•å®Œæ¯•ï¼\nThe endæœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¸®åŠ©æœåŠ¡å™¨ä¸æˆ‘è”ç³»\n\næœ¬æ–‡æ¡£å·²è¢«å®˜æ–¹è®¤å¯ï¼Œå¹¶æ”¾ç½®åœ¨äº†kookå¼€å‘è€…é¢‘é“çš„å¸¸è§é—®é¢˜ä¸­ğŸ‰\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€KOOKã€‘é˜¿ç‹¸æœºå™¨äºº | ä½¿ç”¨æ–‡æ¡£","url":"/posts/847195815/","content":"æ—¶å…‰åŒ†åŒ†ï¼Œè‡ªä»2022å¹´6æœˆ20æ—¥ï¼Œé˜¿ç‹¸çš„GITä»“åº“åˆ›å»ºç¬¬ä¸€ä¸ªcommitå¼€å§‹ï¼Œå·²ç»è¿‡å»äº†ä¸€å¹´é›¶64å¤©ï¼Œè¿™ä¹ˆé•¿çš„æ—¶é—´é‡Œï¼Œæˆ‘æ¥å—åˆ°äº†ä¸å°‘æœ‹å‹çš„æ”¯æŒï¼Œä¹Ÿæœ‰ä¸å°‘æœ‹å‹å¯¹ä»£ç ç¼–å†™çš„å¸®åŠ©ï¼Œåœ¨æ­¤è¡·å¿ƒåœ°å¯¹å¤§å®¶è¡¨ç¤ºæ„Ÿè°¢ï¼\nä½†ï¼Œç”±äºæ‹³å¤´å…¬å¸ç»™authé‰´æƒæ¥å£æ–°å¢äº†Cloudflareé˜²ç«å¢™å’ŒäººæœºéªŒè¯ï¼Œå¯¼è‡´ç±»ä¼¼é˜¿ç‹¸è¿™ç§é›†ä¸­å¼çš„æœºå™¨äººä¼šè¢«ç›´æ¥å°ç¦äº‘æœåŠ¡å™¨IPè€Œæ— æ³•ç»§ç»­ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œé˜¿ç‹¸åªèƒ½å’Œå¤§å®¶è¯´æ‹œæ‹œäº†ï¼\nè‡ª 2023-08-24 èµ·ï¼ŒKOOKé˜¿ç‹¸æœºå™¨äººå’ŒQQé¢‘é“é˜¿ç‹¸æœºå™¨äººå‡åœæ­¢æœåŠ¡ã€‚\næ„Ÿè°¢ï¼\n\næ¬¢è¿æ¥åˆ° Kook-Valorant-Bot æœºå™¨äººä½¿ç”¨æ–‡æ¡£\n\nå¼€æºä»£ç ï¼šGithub | Gitee\næœºå™¨äººçŠ¶æ€é¡µï¼šapi&#x2F;v2&#x2F;bot\nçˆ±å‘ç”µæ”¯æŒé¡µï¼šç‚¹æˆ‘å‘ç”µ\n\næœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨æœ¬é¡µä¸‹æ–¹è¯„è®ºï¼ˆæ¨èï¼‰æˆ–åŠ å…¥é˜¿ç‹¸å¸®åŠ©é¢‘é“ \n\n0.å…è´£å£°æ˜1.æŸ¥è¯¢æ¥å£è€ç”Ÿå¸¸è°ˆäº†ï¼Œç›®å‰valorantæŸ¥è¯¢çš„æ¥å£æ˜¯ä½¿ç”¨æ‹³å¤´å®˜æ–¹çš„ç™»å½•æ¥å£è·å–åˆ°è´¦æˆ·tokenåï¼Œç”¨è´¦æˆ·tokenè¯·æ±‚å¯¹åº”çš„å•†åº—ã€ä»»åŠ¡ã€æˆ˜ç»©ç­‰æ¥å£ã€‚\nè¯¥æ¥å£å®˜æ–¹æ²¡æœ‰æ­£å¼å…¬å¸ƒï¼Œç›®å‰çš„æŸ¥è¯¢æ“ä½œæ˜¯åœ¨å®˜æ–¹é»˜è®¸ä¸‹è¿›è¡Œçš„ã€‚æ ¹æ®å¤–ç½‘å¼€å‘è€…çš„ç»éªŒï¼ˆä»–ä»¬ä½¿ç”¨çš„æ›´ä¹…ï¼‰ç›®å‰æš‚æ—¶è¿˜æ²¡æœ‰å¬è¯´è¿‡æœ‰äººå› ä¸ºè¯¥æ¥å£æŸ¥è¯¢ä¿¡æ¯è€Œè¢«banå·ã€‚\nä½†ï¼Œæ²¡æœ‰ä¸ä»£è¡¨å°å·é£é™©ä¸å­˜åœ¨ï¼\næ‰€ä»¥ï¼Œä½¿ç”¨äº†ç™»é™†æŸ¥è¯¢åŠŸèƒ½ä¹‹åï¼Œå³ä»£è¡¨æ‚¨æ„¿æ„æ‰¿æ‹…æ­¤ç±»é£é™©ã€‚\n2.è´¦æˆ·å®‰å…¨æœºå™¨äººçš„ä»£ç å®Œå…¨å¼€æºï¼Œè¾“å‡ºçš„æ—¥å¿—ä¸­ä¸ä¼šåŒ…å«ç”¨æˆ·çš„è´¦æˆ·&#x2F;å¯†ç &#x2F;é‚®ç®±éªŒè¯ç ï¼Œæ‰€æœ‰ä¿¡æ¯å‡é€šè¿‡kookçš„ç§èŠå’Œkookçš„apiä¼ è¾“åˆ°æœºå™¨äººè¿›è¡Œå¤„ç†ã€‚\n\nä¼ è¾“è¿‡ç¨‹ä¸­çš„ç§å¯†æ€§å°†ç”±httpsåè®®æ¥ä¿è¯ï¼›\næ‚¨çš„è´¦æˆ·å¯†ç åªæœ‰kookçš„åå°èƒ½çœ‹åˆ°ï¼›\n\nå¦‚æœæ‚¨æ‹…å¿ƒæ‚¨çš„è´¦æˆ·å®‰å…¨ï¼Œè¯·ä¸€å®šè¦å¼€å¯é‚®ç®±åŒé‡éªŒè¯ï¼›æˆ–ä¸è¦ä½¿ç”¨æœºå™¨äººã€‚\n3.è‡ªåŠ¨é‡ç™»æœºå™¨äººä»€ä¹ˆæ—¶å€™ä¼šè¿›è¡Œé‡ç™»ï¼Ÿ\nåœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼Œæœºå™¨äººä¼šå…ˆåˆ¤æ–­è´¦æˆ·tokenæ˜¯å¦æœ‰æ•ˆï¼Œæ— æ•ˆåˆ™cookieé‡ç™»ã€‚å…·ä½“åœºæ™¯å¦‚ä¸‹:\n\næ‰§è¡Œéœ€è¦ç™»å½•çš„æŸ¥è¯¢å‘½ä»¤\næ—©å…«çš„notifyçš®è‚¤æé†’åŠŸèƒ½ä¼šè§¦å‘é‡ç™»\næ—©å…«çš„vipå•†åº—æé†’åŠŸèƒ½ä¼šè§¦å‘é‡ç™»\n\n1.å¸®åŠ©å‘½ä»¤1.helloæ‰§è¡Œæœ¬å‘½ä»¤ï¼Œé˜¿ç‹¸ä¼šå›å¤ä½ å¥½ã€‚å¯ç”¨äºæµ‹è¯•é˜¿ç‹¸æ˜¯å¦åœ¨çº¿\n/hello\n\n\n2.@é˜¿ç‹¸åœ¨é¢‘é“å†…@æœºå™¨äººï¼Œä¼šè§¦å‘ä¸€ä¸ªè¯­å¥\n@æ‰“ç“¦çš„é˜¿ç‹¸\n\nå‘€ï¼Œå¬è¯´æœ‰äººæƒ³æˆ‘äº†ï¼Œæ˜¯å—ï¼Ÿè¾“å…¥`/ahri` æˆ– `/vhelp` æ‰“å¼€å¸®åŠ©é¢æ¿ï¼Œå’Œé˜¿ç‹¸ä¸€èµ·ç©å§ï¼\n\nå¦‚æœæ˜¯å¼€å‘è€…@ï¼Œåˆ™ä¼šè¿”å›åªæœ‰å¼€å‘è€…æ‰èƒ½æ‰§è¡Œçš„å‘½ä»¤å¸®åŠ©é¢æ¿\n3.ahrié˜¿ç‹¸åŸºç¡€å¸®åŠ©å‘½ä»¤\n/ahri æˆ– /Ahri\n\n\n4.vhelpvalorantç›¸å…³å‘½ä»¤å¸®åŠ©\n/vhelp\n\n\n2.åŸºç¡€å‘½ä»¤01.val é”™è¯¯ç ä»¥ä¸‹ä¸¤ä¸ªå‘½ä»¤å®Œå…¨ç›¸åŒï¼Œvanæ˜¯valçš„åˆ«å\n/val é”™è¯¯ç ç¼–å·/van é”™è¯¯ç ç¼–å·\n\nç”¨è¿™ä¸ªå‘½ä»¤å¯ä»¥æŸ¥è¯¢æ¸¸æˆå¸¸è§é”™è¯¯ç çš„è§£å†³åŠæ³•\n/val 1067\n\n\nåŒæ—¶æ”¯æŒæŸ¥è¯¢vanå¼€å¤´çš„é”™è¯¯ç \n/val 9001\n\n\n02.DX å¼¹çª—é”™è¯¯å¦‚æœä½ å‘ç°æœ‰äººåœ¨å’¨è¯¢DirectX Runtimeç›¸å…³çš„é”™è¯¯ï¼Œå¯ä»¥æ‰§è¡Œæ­¤å‘½ä»¤\n/dx\n\n\n03.saveid&#x2F;myidæ­¤å‘½ä»¤ç”¨äºä¿å­˜ï¼ˆä¿®æ”¹ï¼‰ç”¨æˆ·çš„æ¸¸æˆid\n/saveid æ¸¸æˆid\n\n\nä¿å­˜åï¼Œåœ¨å’Œåˆ«äººå¼€é»‘çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨myidå‘½ä»¤å¿«æ·å‘å‡ºè‡ªå·±çš„æ¸¸æˆid\n/myid\n\n\n04.bundleæŸ¥è¯¢ä¸€ä¸ªçš®è‚¤ç³»åˆ—åŒ…å«ä»€ä¹ˆçš®è‚¤ï¼ˆæ†ç»‘åŒ…ï¼‰\n/bundle çš®è‚¤å\n\nä¸¾ä¸ªä¾‹å­\n/bundle RGX # æŸ¥è¯¢æ˜¾å¡å¥—\n\n\n05.loginç™»å½•å‘½ä»¤\n/login è´¦æˆ· å¯†ç \n\nç™»å½•æ‚¨çš„æ‹³å¤´è´¦æˆ·ï¼Œå¦‚æœå¼€å¯äº†é‚®ç®±éªŒè¯ï¼Œæœºå™¨äººå°†æç¤ºæ‚¨ä½¿ç”¨/tfaå‘½ä»¤è¿›è¡ŒéªŒè¯\n\n/login è´¦æˆ· å¯†ç  save\n\nåè¿½saveï¼Œå³ä»£è¡¨æ‚¨æ„¿æ„å°†è´¦æˆ·å¯†ç å­˜å‚¨åˆ°æœºå™¨äººåå°çš„ä¸´æ—¶å˜é‡ï¼ˆå†…å­˜ï¼‰ä¸­ã€‚å­˜åœ¨å†…å­˜ä¸­çš„æ•°æ®ä¼šåœ¨æœºå™¨äººè¿›ç¨‹é€€å‡ºåæ¸…ç©ºï¼Œä»–äººæ— æ³•è·å–ã€‚\n\nä¿å­˜è´¦æˆ·å¯†ç åï¼Œæœºå™¨äººå°†åœ¨å°è¯•cookieé‡æ–°ç™»å½•å¤±è´¥åï¼Œä½¿ç”¨è´¦æˆ·å¯†ç è¿›è¡Œé‡æ–°ç™»å½•\nä¸ç®¡æ˜¯vipç”¨æˆ·è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œè¯¥åŠŸèƒ½éƒ½ç”Ÿæ•ˆ\nä¸æ”¯æŒé‚®ç®±ç™»å½•ç”¨æˆ·saveå¯†ç ã€‚å¼€äº†é‚®ç®±ç™»å½•çš„ç”¨æˆ·ï¼ŒæŒ‡å®šsaveåä¾æ—§ä¸ä¼šç¼“å­˜\n\nè¯¥åŠŸèƒ½ä¸»è¦æœåŠ¡äºæœºå™¨äººé•¿æ—¶é—´å¼€æœºçš„æ—¶å€™ï¼ˆä¸è¿‡ç›®å‰ç»å¸¸éœ€è¦ç»´æŠ¤é‡å¯ï¼Œå­˜çš„æ•°æ®ä¼šä¸¢å¤±ï¼‰\n06.tfaç”¨äºè¿›è¡Œé‚®ç®±éªŒè¯\n/tfa é‚®ç®±éªŒè¯ç \n\nå¦‚ä¸‹ï¼Œåˆšå¼€å§‹å‘é€éªŒè¯ç ï¼Œæœºå™¨äººä¼šæç¤ºéªŒè¯ç xxxæ”¶åˆ°\n\nå¦‚æœç™»å½•æˆåŠŸï¼Œæœºå™¨äººä¼šåé¦ˆæ‚¨çš„æ¸¸æˆid\n\nå¦‚æœè¾“å…¥äº†ä¸€ä¸ªé”™è¯¯çš„éªŒè¯ç ï¼Œæœºå™¨äººä¼šæç¤ºæ‚¨é‡æ–°è¾“å…¥\n\n07.login-lç›®å‰æœºå™¨äººæ”¯æŒè‡³å¤š3ä¸ªæ‹³å¤´è´¦æˆ·çš„åŒæ—¶ç™»å½•ï¼Œä½¿ç”¨è¯¥å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰å·²ç™»å½•è´¦æˆ·çš„æ¸¸æˆåå’Œç™»å½•æ—¶é—´\n/login-l\n\n\n08.login-apå‰é¢æåˆ°ï¼Œloginç™»å½•å¯ä»¥æŒ‡å®šsaveä¿å­˜è´¦æˆ·å¯†ç ã€‚\næœºå™¨äººåå°ä¼šåœ¨ä½¿ç”¨è´¦æˆ·å¯†ç é‡ç™»çš„æ—¶å€™å¯¹æ—¶é—´è¿›è¡Œè®°å½•ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤å³å¯æŸ¥è¯¢\n/login-ap\n\nè¿™æ ·ä½ å°±èƒ½çŸ¥é“æœºå™¨äººå•¥æ—¶å€™ç”¨è¿‡ä½ çš„è´¦æˆ·å¯†ç æ“ä½œäº†\n09.logoutå¦‚æœä½ ä¸å¸Œæœ›æœºå™¨äººåœ¨åå°æ“ä½œä½ çš„è´¦æˆ·\né‚£å°±å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤ç™»å‡ºæ‰€æœ‰è´¦æˆ·\n/logout\n\n10.shopæŸ¥è¯¢æ¯æ—¥å•†åº—\n/shop\n\nå¦‚æœä½ ç™»å½•äº†å¤šä¸ªè´¦æˆ·ï¼Œåˆ™éœ€æŒ‡å®šç¼–å·ï¼ˆç¼–å·ä¸º/login-apä¸­æ˜¾ç¤ºçš„è´¦æˆ·åºå·ï¼‰é»˜è®¤æŸ¥è¯¢çš„æ˜¯ç¼–å·ä¸º0çš„è´¦æˆ·å•†åº—\n/shop 1\n\n\n\n11.nightæŸ¥è¯¢å¤œå¸‚\n/night\n\nå¤šè´¦æˆ·æ“ä½œå’Œshopç›¸åŒ\n/night è´¦æˆ·åºå·\n\n\n12.uinfoæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ˆç­‰çº§ã€ç»éªŒå€¼ã€ç©å®¶å¡ç‰‡ã€ç©å®¶ç§°å·ã€vpã€rpç­‰ï¼‰\n/uinfo\n\nè¯¥å‘½ä»¤ä¼šè‡ªåŠ¨æŸ¥è¯¢æ‰€æœ‰å·²ç™»é™†è´¦æˆ·ï¼Œæ— é¡»æŒ‡å®šç¼–å·\n\n\n13.matchæŸ¥è¯¢æœ€è¿‘5åœºçš„æˆ˜ç»©\n/match\n\nå¤šè´¦æˆ·æŸ¥è¯¢å’Œshopç›¸åŒ\n\nç»¿è‰²è¾¹æ¡†ä»£è¡¨æœ¬åœºèƒœåˆ©ï¼Œçº¢è‰²ä»£è¡¨è´Ÿ\n\n14.missionæŸ¥è¯¢ä½ çš„æ¯æ—¥&#x2F;æ¯å‘¨ä»»åŠ¡\n/mission\n\nç›®å‰ä»»åŠ¡uuidå°šæœªå®Œå…¨æ”¶å½•ï¼Œå¾ˆå¤šä»»åŠ¡éƒ½å¤„äºæœªçŸ¥çŠ¶æ€ã€‚\néœ€è¦å¤§å®¶åœ¨æ‰§è¡Œæœ¬å‘½ä»¤åï¼Œå¸®åŠ©å¡«å†™è¡¨å•ï¼Œå°½æ—©é›†é½æ‰€æœ‰ä»»åŠ¡ä¿¡æ¯ã€‚æ„Ÿè°¢ï¼\n\n3.çš®è‚¤æé†’1.notify-aæŸ¥è¯¢çš®è‚¤ï¼Œæœºå™¨äººä¼šè¿”å›ä¸€ä¸ªçš®è‚¤é€‰æ‹©è¡¨ï¼Œç”¨stså‘½ä»¤é€‰æ‹©æŒ‡å®šçš„çš®è‚¤ï¼ŒåŠ å…¥çš®è‚¤æé†’é˜Ÿåˆ—\n/notify-a çš®è‚¤å\n\n\næ¯”å¦‚æˆ‘æƒ³åœ¨å•†åº—åˆ·å‡ºæ˜¾å¡æš´å¾’çš„æ—¶å€™ï¼Œè®©æœºå™¨äººç§èŠæé†’æˆ‘ï¼Œé‚£å°±å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤\n/sts 0\n\nè¿™é‡Œçš„0æ˜¯ä¸Šå›¾ä¸­æ˜¾å¡æš´å¾’çš„ç¼–å·\n2.notify-l/notify-l\n\næŸ¥çœ‹å·²æ·»åŠ çš„çš®è‚¤æé†’\n\n3.notify-dåˆ é™¤notify-lä¸­ä¸éœ€è¦æé†’çš„çš®è‚¤\n/notify-d çš®è‚¤uuid\n\nç¤ºä¾‹\n/notify-d 6f2aefab-439d-140a-4dc6-87818e2d72cd\n\n\n4.çš®è‚¤è¯„ä»·æ‰€è°“çš®è‚¤è¯„ä»·ï¼Œå°±æ˜¯æŸ¥è¯¢å•†åº—çš„æ—¶å€™ï¼Œæ˜¾ç¤ºåœ¨ç»“æœä¹‹ä¸‹çš„ä¿¡æ¯ã€‚é‡‡ç”¨leancloudå­˜å‚¨çš®è‚¤è¯„ä»·ï¼Œæ•°æ®åº“å·²åœ¨kookå’Œqqé¢‘é“çš„é˜¿ç‹¸æœºå™¨äººä¸­å…±ç”¨ã€‚\nç›®å‰å°šæœ‰å¤§é‡çš®è‚¤æœªè¯„ä»·ï¼Œè®¡ç®—è€Œå‡ºçš„å•†åº—è¯„åˆ†å‚è€ƒä»·å€¼ä½ã€‚è¿˜éœ€å„ä½å¤šå¤šå¸®åŠ©ï¼\n\n1.rateè¯¥å‘½ä»¤å’Œnotify-aç±»ä¼¼ï¼Œéœ€è¦å…ˆé€šè¿‡çš®è‚¤åæŸ¥æ‰¾éœ€è¦è¯„è®ºçš„çš®è‚¤\n/rate çš®è‚¤å\n\nç¤ºä¾‹\n/rate ç¦»å­\n\n\n2.rtsæ‰§è¡Œè¿‡rateå‘½ä»¤åï¼Œç”¨rtså‘½ä»¤è¿›è¡Œé€‰æ‹©\n/rts åºå· æ‰“åˆ† åæ§½\n\n\n3.kknæ‰§è¡Œæœ¬å‘½ä»¤ï¼ŒæŸ¥çœ‹æ˜¨æ—¥è¯„åˆ†æœ€é«˜&#x2F;æœ€ä½ç”¨æˆ·\n/kkn\n\nç”±äºç›®å‰çš®è‚¤è¯„ä»·æ•°æ®ä¸è¶³ï¼Œæ‰€ä»¥å‚è€ƒæ€§ä½\n\n5.VIPä¸“å±é˜¿ç‹¸çš„VIPåŸºç¡€æƒç›Šå¦‚ä¸‹\n\nã€Œå…¨æ–°å•†åº—å±•ç¤ºå›¾ã€vipç”¨æˆ·å°†è·å–åˆ°16-9çš„è¶…å¸…å•†åº—è¿”å›å€¼\nã€Œå•†åº—å›¾ç‰‡èƒŒæ™¯è‡ªå®šä¹‰ã€vipç”¨æˆ·å¯è‡ªå®šä¹‰å•†åº—æŸ¥è¯¢ç»“æœçš„å›¾ç‰‡èƒŒæ™¯\nã€Œä¿å­˜ç™»å½•ä¿¡æ¯ã€vipç”¨æˆ·ç™»é™†åï¼Œé˜¿ç‹¸ä¼šè‡ªåŠ¨ä¿å­˜æ‚¨çš„cookieã€‚åœ¨é˜¿ç‹¸ç»´æŠ¤é‡å¯çš„æ—¶å€™ï¼Œæ‚¨çš„ç™»å½•ä¿¡æ¯ä¸ä¼šä¸¢å¤±ï¼ˆæ³¨ï¼šcookieå†…å¹¶ä¸åŒ…å«ä½ çš„è´¦æˆ·å¯†ç ï¼‰\nã€Œæ—©å…«å•†åº—æé†’ã€é˜¿ç‹¸å°†åœ¨æ—©8ç‚¹è·å–vipç”¨æˆ·çš„æ¯æ—¥å•†åº—å¹¶ç§èŠå‘å›¾ç»™ç”¨æˆ·ã€‚åŒæ—¶ä¼šå¯¹è¿™å¼ å›¾ç‰‡è¿›è¡Œç¼“å­˜ï¼Œå½“å¤©ä½¿ç”¨/shopå‘½ä»¤çš„æ—¶å€™ï¼Œåªéœ€2sè·å–ç»“æœï¼Œä¸‰å€äºæ™®é€šç”¨æˆ·çš„å“åº”é€Ÿåº¦ï¼\n\nä¸€äº›è¯´æ˜\n\nç›®å‰å•†åº—æŸ¥è¯¢diyèƒŒæ™¯å›¾æ”¯æŒ16-9(æ¨ªå±)çš„å›¾ç‰‡ \nè¯·ä¸è¦è®¾ç½®è¿è§„å›¾ç‰‡(æ“¦è¾¹ä¹Ÿä¸è¡Œ)ï¼è‹¥å› ä¸ºæ‚¨ä¸Šä¼ è¿ç¦å›¾ç‰‡åå¯¼è‡´é˜¿ç‹¸è¢«å°ï¼Œæ‚¨å°†è¢«å‰¥å¤ºvipæƒç›Šå¹¶æ°¸ä¹…ç¦æ­¢å…‘æ¢vip\n\n1.vip-uè¯¥å‘½ä»¤ç”¨äºå…‘æ¢vipçš„æ¿€æ´»ç \n/vip-u æ¿€æ´»ç \n\nå½“æ‚¨åœ¨çˆ±å‘ç”µè´­ä¹°vipåï¼Œçˆ±å‘ç”µä¼šç»™æ‚¨ç§èŠä¸€ä¸ªvipçš„æ¿€æ´»ç ã€‚ç§èŠé˜¿ç‹¸ï¼Œä½¿ç”¨è¯¥æ¿€æ´»ç å³å¯æ¿€æ´»vipã€‚åŒä¸€æ¿€æ´»ç åªå¯ä½¿ç”¨ä¸€æ¬¡ã€‚\n\n\n2.vip-cæŸ¥çœ‹vipçš„å‰©ä½™æ—¶é—´\n/vip-c\n\n\n3.vip-shopç›®å‰æ”¯æŒä¿å­˜4å¼ èƒŒæ™¯å›¾\n3.1 æŸ¥çœ‹å·²ä¿å­˜èƒŒæ™¯å›¾æŸ¥çœ‹å·²ä¿å­˜çš„å•†åº—è‡ªå®šä¹‰èƒŒæ™¯å›¾\n/vip-shop\n\n\n3.2 åˆ‡æ¢èƒŒæ™¯å›¾è¿™é‡Œå‡ºç°äº†å›¾ç‰‡çš„ç¼–å·ï¼Œå¦‚æœéœ€è¦åˆ‡æ¢å›¾ç‰‡ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤\n/vip-shop-s å›¾ç‰‡ç¼–å·\n\nå°±å¯ä»¥åˆ‡æ¢åˆ°å¯¹åº”çš„èƒŒæ™¯å›¾\n\n3.3 åˆ é™¤èƒŒæ™¯å›¾\nç”±äºä»…æ”¯æŒ4ä¸ªèƒŒæ™¯å›¾ï¼Œæ‰€ä»¥æ·»åŠ æ›´å¤šèƒŒæ™¯å›¾ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ é™¤å·²æœ‰çš„\n/vip-shop-d å›¾ç‰‡ç¼–å·\n\nç¤ºä¾‹å¦‚ä¸‹\n\n\n3.4 æ·»åŠ èƒŒæ™¯å›¾\nå›¾ç‰‡urlè·å–çœ‹3.5\n\nè¯·å°½é‡ä½¿ç”¨kookä¸Šä¼ å›¾ç‰‡åè®¾ç½®èƒŒæ™¯å›¾ï¼Œæˆ–ä½¿ç”¨å›½å†…èƒ½ç›´è¿çš„å›¾åºŠå›¾ç‰‡urlï¼Œå¦åˆ™èƒŒæ™¯å›¾è®¾ç½®å¾ˆå¯èƒ½å‡ºé”™ã€‚\n/vip-shop å›¾ç‰‡url\n\nç¤ºä¾‹\n/vip-shop https://img.kookapp.cn/assets/2023-04/QUGTtwWxuv6bk2l4.jpg\n\n\n3.5 å¦‚ä½•è·å–å›¾ç‰‡urlPCç«¯å°†å›¾ç‰‡ä¸Šä¼ åˆ°kook â†’ ç‚¹å‡»å›¾ç‰‡ â†’ åº•éƒ¨...å¤„å¤åˆ¶å›¾ç‰‡é“¾æ¥ â†’ ä½¿ç”¨/vip-shopå‘½ä»¤è®¾ç½®èƒŒæ™¯\n\n\n6.å¨±ä¹å‘½ä»¤01.roll éª°å­è¯¥å‘½ä»¤å¯ä»¥æ·éª°å­ï¼ˆç”Ÿæˆéšæœºæ•°ï¼‰\n/roll å·¦è¾¹ç•Œ å³è¾¹ç•Œ ç”Ÿæˆæ•°é‡\n\nç¤ºä¾‹\n/roll 1 100 3\n\n\nå¦‚æœä¸ç»™ç¬¬ä¸‰ä¸ªæ•°é‡å‚æ•°ï¼Œåˆ™é»˜è®¤åªç”Ÿæˆä¸€ä¸ªéšæœºæ•°\n/roll 1 100\n\n\n02.countdown å€’è®¡æ—¶åœ¨æœ¬é¢‘é“è§¦å‘ä¸€ä¸ªå€’è®¡æ—¶\n/countdown ç§’æ•°\n\nç¤ºä¾‹\n/countdown 120\n\nç”Ÿæˆä¸€ä¸ª120ç§’çš„å€’è®¡æ—¶\n\n03.tl ç¿»è¯‘è¯¥å‘½ä»¤ä¸ºtranslateçš„ç¼©å†™ï¼Œç”¨äºç¿»è¯‘ã€‚æ”¯æŒä¸­è‹±äº’è¯‘ï¼Œä»¥åŠéƒ¨åˆ†å¤–å›½è¯­è¨€ç¿»è¯‘æˆä¸­æ–‡\n/tl å†…å®¹\n\næœºç¿»ï¼Œå›¾ä¸€ä¹\n\n/tlon/tloff\n\nè¿™ä¸¤ä¸ªå‘½ä»¤æ˜¯åœ¨æœ¬é¢‘é“å¼€å¯&#x2F;å…³é—­å®æ—¶ç¿»è¯‘\n\nå¼€å¯åï¼Œç”¨æˆ·å‘é€çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šè¢«ç¿»è¯‘å‡ºæ¥\n\nç”¨/tloffå…³é—­å®æ—¶ç¿»è¯‘\n\n04.we å¤©æ°”è¯¥å‘½ä»¤å¯ä»¥ç”¨äºæŸ¥è¯¢åŸå¸‚çš„å¤©æ°”æƒ…å†µ\n/we åŸå¸‚\n\n\nThe endé˜¿ç‹¸çš„å‘½ä»¤å°±è¿™äº›å•¦ï¼Œæœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Pythonã€‘å¦‚ä½•å¤šæ–‡ä»¶ç¼–å†™KOOKæœºå™¨äºº","url":"/posts/3454615823/","content":"è¿™ä¸ªå·¥ä½œä¸€å®šè¦æ—©åšï¼ï¼ä¸ç„¶å°±ä¼šåƒæˆ‘ä¸€æ ·ï¼Œmain.py å‡ åƒè¡Œï¼Œæ‰¾ä¸ªä»£ç çš„ä½ç½®éƒ½å¾ˆå›°éš¾ğŸ™…â€â™€ï¸\nå¥½ä¸å®¹æ˜“æ‰æŠŠé˜¿ç‹¸çš„ä»£ç ç»™é‡æ„äº†ï¼Œå°†å…¶ä»–å‘½ä»¤ç§»åŠ¨åˆ°äº†å„è‡ªçš„æ–‡ä»¶\n1.åŸºç¡€åœ¨å¯¹botè¿›è¡Œç¼–ç¨‹çš„æ—¶å€™ï¼Œæ ¹æ®åŠŸèƒ½ä¸åŒï¼Œä¼šå°†ä»£ç åˆ†æˆå‡ å¤§æ¿å—ã€‚\nå¦‚æœå°†è¿™äº›å†…å®¹å…¨éƒ¨æ”¾å…¥ä¸€ä¸ªmainæ–‡ä»¶ä¸­çš„è¯ï¼Œè™½ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†ä¼šæ˜¾å¾—éå¸¸é•¿å’Œæ‚ä¹±ï¼Œä¸”ä¸æ–¹ä¾¿å®šä½é—®é¢˜ã€‚\nå†åŠ ä¸Šæœ¬äººæœ‰ä¸€å®šå¼ºè¿«ç—‡ï¼Œäºæ˜¯å°†valorantæŸ¥è¯¢ä»£ç çš„å®ç°å’ŒtranslateåŠŸèƒ½çš„å®ç°åˆ†å¼€å°è£…ï¼Œå†åœ¨main.pyæ–‡ä»¶ä¸­ä½¿ç”¨bot.commandè°ƒç”¨\n1.1 åœ¨æ”¯çº¿æ–‡ä»¶ä¸­è¦æ€ä¹ˆå†™ï¼Ÿä»¥ä¸€ä¸ªæœ€ç®€å•çš„helloä»£ç ä¸ºä¾‹ã€‚å› ä¸ºkhl.pyæ˜¯å¼‚æ­¥æ¡†æ¶ï¼Œæ‰€ä»¥åœ¨æ”¯çº¿æ–‡ä»¶ä¸­çš„å‡½æ•°éƒ½åº”è¯¥å¸¦ä¸Šasyncå’Œawaitæ¥æ‰§è¡ŒåŠŸèƒ½\nåŒæ—¶ï¼Œæ”¯çº¿æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦importä¸»æ–‡ä»¶ä¸­åŒ…å«çš„åº“å‡½æ•°ã€ä»¥åŠbotçš„tokenã€‚ä¸€ä¸ªæ¯”è¾ƒå·æ‡’çš„æ–¹æ³•å°±æ˜¯æŠŠä¸»æ–‡ä»¶importè¿‡çš„å†…å®¹åŸå°ä¸åŠ¨çš„å¤åˆ¶åˆ°æ”¯çº¿æ–‡ä»¶ä¸­\nasync def world(msg: Message):    await msg.reply(&#x27;ä½ å¥½å‘€~&#x27;)\n\n1.2 åœ¨ä¸»æ–‡ä»¶ä¸­è¦æ€ä¹ˆå†™ï¼Ÿ\nä¸»æ–‡ä»¶ï¼šåŒ…å«bot.runçš„æ–‡ä»¶ï¼Œæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ª\n\nç°åœ¨æˆ‘ä»¬çš„æ”¯çº¿æ–‡ä»¶ä¸­å·²ç»æœ‰ä¸€ä¸ªå‡½æ•°çš„å®ç°äº†ï¼Œåœ¨ä¸»æ–‡ä»¶ä¸­åªéœ€è¦importæ”¯çº¿æ–‡ä»¶çš„å‡½æ•°åï¼Œå®ç°bot.commandè®©æœºå™¨äººè°ƒç”¨è¿™æ¡å‘½ä»¤å°±è¡Œ\nfrom test import world@bot.command(name=&#x27;hello&#x27;)async def world123(msg: Message):    await world(msg)\n\nè¦çŸ¥é“ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚åƒè¿™ç§è¾ƒçŸ­çš„ç¨‹åºæ— éœ€åˆ†æ–‡ä»¶ã€‚ä½†å¦‚æœä½ çš„å‡½æ•°å®ç°éå¸¸é•¿çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨ç›¸åŒçš„åŠæ³•å®ç°å¤šæ–‡ä»¶ç¼–ç¨‹ã€‚\n2.è¿›é˜¶å‰é¢çš„åŠæ³•ï¼Œä¹Ÿåªæ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸ç”¨çš„å¯¼å…¥å‡½æ•°æ–¹å¼ã€‚å› ä¸ºPythonæ”¯æŒå‡½æ•°å†…åµŒå¥—å‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ä¸€ä¸ªéªšæ“ä½œï¼Œåœ¨å‡½æ•°é‡Œé¢æ³¨å†Œbotã€‚\nè¯´äººè¯å°±æ˜¯ï¼Œè¿™ä¸ªå‘½ä»¤çš„å®Œæ•´å®ç°ï¼ŒåŒ…æ‹¬å‘½ä»¤çš„æ³¨å†Œï¼Œéƒ½å¯ä»¥ä¸¢åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼\n\nå¦‚ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™æ”¯çº¿æ–‡ä»¶ä¸­ä¸Šä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸ºbotï¼Œå†å†…éƒ¨æ­£å¸¸ç¼–å†™ä»£ç \nfrom khl import Bot,Messagedef init(bot:Bot):    @bot.command(name=&#x27;hello&#x27;) # å¿…é¡»å†™æ˜å‘½ä»¤çš„name    async def world123(msg: Message):        await world(msg)\n\nç„¶åï¼Œåœ¨ä¸»æ–‡ä»¶ä¸­ï¼Œbotå¯åŠ¨ä¹‹å‰ï¼Œè°ƒç”¨è¿™ä¸ªinitå‡½æ•°å³å¯ï¼\nfrom test import init # æ”¯çº¿æ–‡ä»¶from khl import Bot,Messagebot = Bot(token=config[&#x27;token&#x27;][&#x27;bot&#x27;])@bot.on_startupasync def bot_init(bot: Bot):\tinit(bot) # è°ƒç”¨æ”¯çº¿æ–‡ä»¶ä¸­çš„initå‡½æ•°æ¥æ³¨å†Œå‘½ä»¤\n\nè¿™æ ·æ‰æ˜¯çœŸæ­£çš„åˆ†æ–‡ä»¶ç¼–å†™botï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Pythonã€‘å…³äºvipå’Œæ™®é€šç”¨æˆ·å•†åº—è¿”å›å€¼å›¾ç‰‡å‡ºé”™çš„é—®é¢˜å®šä½+å¤§ç™½è¯è¯´æ˜","url":"/posts/1592602771/","content":"åœ¨å¼€å‘é˜¿ç‹¸çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªå…¨å±€å˜é‡å†™é”™è€Œå¯¼è‡´çš„bugâ€¦â€¦\n\n\né—®é¢˜å¼•å‡ºå¦‚æœä½ æœ€è¿‘å‡ å¤©æœ‰ç”¨è¿‡shopæŸ¥è¯¢åŠŸèƒ½ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„æƒ…å†µ\n\nä¸Šå›¾ä¸ºæ™®é€šç”¨æˆ·çš„å•†åº—ç”¨äº†vipç”¨æˆ·16-9çš„å›¾ç‰‡ï¼›\nä¸‹å›¾ä¸ºvipç”¨æˆ·çš„å•†åº—ç”¨äº†æ™®é€šç”¨æˆ·1-1çš„å›¾ç‰‡\n\n\nç®€å•è¯´æ¥ï¼Œvipçš„å•†åº—è¿”å›å€¼æ˜¯16-9çš„å›¾ç‰‡ï¼Œè€Œæ™®é€šç”¨æˆ·çš„å•†åº—æ˜¯1-1çš„å›¾ç‰‡ã€‚\nåœ¨ä¸Šé¢çš„ä¸‰ä¸ªæ¯æ—¥å•†åº—è¿”å›å€¼ä¸­ï¼Œå°±å‡ºç°äº†vipç”¨æˆ·çš„å•†åº—ç”¨äº†1-1çš„å›¾ï¼Œæˆ–è€…æ™®é€šç”¨æˆ·çš„å•†åº—ç”¨äº†16-9çš„å›¾ã€‚\nè¿™ä¸ªbugæ˜¨å¤©ï¼ˆ22.09.12ï¼‰æˆ‘å°±å‘ç°äº†ï¼Œæ˜¯ä¸€ä½vipç”¨æˆ·çš„å•†åº—è¿”å›å€¼é‡Œé¢ç”¨äº†æ™®é€šç”¨æˆ·çš„å›¾ç‰‡ã€‚è€Œæˆ‘æ˜¨å¤©å®šä½bugçš„æ—¶å€™ï¼Œæµ‹è¯•botä¿å­˜äº†ç”»å‡ºæ¥çš„4ä¸ªå°å›¾ï¼Œæ²¡æœ‰é—®é¢˜ï¼›ç„¶åå†ä½¿ç”¨&#x2F;shopå‘½ä»¤ï¼Œå‘ç°æµ‹è¯•botæ²¡æœ‰å‡ºç°è¿™ä¸ªé—®é¢˜ã€‚äºæ˜¯æˆ‘å°±æŠŠé˜¿ç‹¸é‡å¯äº†ä¸€ä¸‹ï¼Œé—®é¢˜ä¹Ÿæ¶ˆå¤±äº†ï¼äºæ˜¯å°±ç§‰æŒâ€œé‡äº‹ä¸å†³ï¼Œé‡å¯è§£å†³â€çš„é”™è¯¯å¿ƒæ€ï¼Œæ²¡æœ‰æ‰“ç†è¿™ä¸ªé—®é¢˜ã€‚\nè€Œä»Šå¤©ï¼ˆ22.09.13ï¼‰æ—©ä¸Šï¼Œè¿™ä¸ªé—®é¢˜åˆå‡ºç°äº†ï¼Œè¿™æ¬¡æ˜¯æ™®é€šç”¨æˆ·çš„å•†åº—è¿”å›å€¼é‡Œé¢ç”¨äº†vipçš„å›¾ç‰‡ã€‚äºæ˜¯æˆ‘åˆæŠŠboté‡å¯äº†ä¸€ä¸‹ï¼Œæœç„¶ï¼Œé—®é¢˜åˆæ¶ˆå¤±äº†ã€‚å“ˆå“ˆï¼è§£å†³äº†â€”â€”ä¸ªé”¤å­ï¼\n\nä»£ç é€»è¾‘ä»‹ç»è¿™é‡Œå…ˆè¯´æ˜ä¸€ä¸‹ï¼Œé˜¿ç‹¸çš„å•†åº—è¿”å›å€¼é€»è¾‘å¦‚ä¸‹ï¼š\n\né€šè¿‡apiè·å–ç©å®¶å•†åº—ï¼Œapiè¿”å›çš„æ˜¯4ä¸ªæ­¦å™¨çš„uuid\néå†æ‰€æœ‰æ­¦å™¨ï¼Œæ‰¾åˆ°è¿™4ä¸ªæ­¦å™¨åå­—+çš®è‚¤å›¾ç‰‡+ä»·æ ¼+çš®è‚¤ç­‰çº§ï¼Œå°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œç”»å‡ºä¸€ä¸ªå°å›¾\nå†æŠŠç”»å‡ºæ¥çš„4ä¸ªå°å›¾ï¼Œé€šè¿‡åæ ‡æ˜ å°„ï¼Œå…¨éƒ¨ç²˜è´´åˆ°æœ€ç»ˆçš„å¤§å›¾ä¸Šé¢ã€‚ä¹Ÿå°±æ˜¯å¤§å®¶è·å–é“çš„è¿”å›ç»“æœ\n\nä»Šå¤©æ™šä¸Šï¼Œæˆ‘è‡ªå·±è·å–å•†åº—çš„æ—¶å€™åˆåŒé‡åˆ°äº†è¿™ä¸ªbugï¼Œäºæ˜¯å†æ¬¡è®¤çœŸçœ‹äº†ä¸€è¾¹ä»£ç ã€‚è¿™ä¸‹å¯ç®—æ˜¯å‘ç°è¿™ä¸ªé—®é¢˜çš„ä½ç½®äº†~ä¸”å¬æˆ‘ç»†ç»†é“æ¥ï¼ˆçœ‹ä¸‹é¢çš„å›¾ç‰‡ï¼‰\n\nweapon_icon_tempï¼ˆå°±å«å®ƒæŠ½å±‰å§ï¼‰æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé‡Œé¢å­˜æ”¾äº†ç”»å¥½çš„å•ä¸ªæ­¦å™¨çš„å›¾ç‰‡ï¼ˆæ­¦å™¨åå­—+æ­¦å™¨å›¾ç‰‡+ä»·æ ¼+çš®è‚¤ç­‰çº§ï¼‰ä¸‹å›¾æ˜¯ç”»å¥½çš„å•å›¾ç¤ºä¾‹\n\né™¤äº†æŠ½å±‰ï¼ˆweapon_icon_tempï¼‰ï¼Œé˜¿ç‹¸è¿˜ä¼šæŠŠè¿™ä¸ªå›¾ç‰‡å­˜æ”¾åˆ°æœ¬åœ°è·¯å¾„é‡Œé¢ï¼ˆä»“åº“ï¼‰è¿™æ ·åœ¨é˜¿ç‹¸é‡å¯ä¹‹åï¼ˆæŠ½å±‰ä¼šè¢«æ¸…ç©ºï¼‰æœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰é‡Œé¢çš„å›¾ç‰‡è¿˜åœ¨ï¼Œå¯ä»¥ä»ä»“åº“é‡Œé¢æ‹¿å‡ºæ¥ï¼Œä¹ŸèŠ‚çœäº†ç”»å›¾çš„æ—¶é—´ã€‚\né€»è¾‘å¤§æ¦‚æ˜¯è¿™æ ·çš„\n\nç”¨æˆ·Aè·å–å•†åº—ï¼Œé˜¿ç‹¸ç”»å‡ºäº†4ä¸ªçš®è‚¤çš„å›¾ç‰‡ï¼Œå¹¶æŠŠå®ƒä»¬å­˜äº†èµ·æ¥ï¼ˆæŠ½å±‰å’Œä»“åº“éƒ½å­˜äº†ï¼‰ï¼›\nç”¨æˆ·Bè·å–å•†åº—ï¼Œé˜¿ç‹¸å‘ç°è¿™ä¸¤ä¸ªç”¨æˆ·çš„å•†åº—çš®è‚¤æœ‰é‡åˆï¼Œè¿™æ—¶å€™å°±æ²¡å¿…è¦å†ç”»ä¸€å¼ å›¾äº†ï¼Œäºæ˜¯é˜¿ç‹¸å°±ä»æŠ½å±‰é‡Œï¼ˆweapon_icon_tempï¼‰æ‹¿å‡ºäº†ä¹‹å‰ç»™ç”¨æˆ·Aç”»å¥½çš„ç›¸åŒçš®è‚¤çš„å›¾ç‰‡ï¼Œç›´æ¥ç²˜è´´åˆ°ç”¨æˆ·Bæœ€åçš„å¤§å›¾ä¸Šã€‚\n\nä¸‹å›¾ä¸ºæ™®é€šç”¨æˆ·çš„ç”»å›¾é€»è¾‘\n\n\nç°åœ¨ï¼Œvipçš„å•†åº—å›¾ç‰‡æ˜¯16-9ï¼Œæ™®é€šç”¨æˆ·çš„å•†åº—å›¾ç‰‡æ˜¯1-1ã€‚æ‰€ä»¥é˜¿ç‹¸ä¼šå•ç‹¬å¤„ç†ä¸¤ç§ç”¨æˆ·ï¼Œå¹¶ç”»å‡ºä¸åŒçš„å›¾ç‰‡ï¼Œå­˜æ”¾åœ¨ä¸åŒçš„æœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰ä¸­ã€‚\n\næ™®é€šç”¨æˆ·å­˜æ”¾åœ¨img_tempæœ¬åœ°è·¯å¾„ä¸­ï¼Œvipç”¨æˆ·å­˜æ”¾åœ¨img_temp_vipæœ¬åœ°è·¯å¾„ä¸­\n\n\nå¯æ˜¯ï¼Œæœ¬åœ°è·¯å¾„ï¼ˆä»“åº“ï¼‰çš„ä½ç½®å˜å•¦ï¼Œä½†æ˜¯å…¨å±€å˜é‡ï¼ˆæŠ½å±‰ï¼‰ç”¨çš„è¿˜æ˜¯åŒä¸€ä¸ªå•Šï¼\né˜¿ç‹¸ç”»å›¾çš„æ—¶å€™ï¼Œè‚¯å®šæ˜¯å…ˆä»æŠ½å±‰é‡Œé¢æ‹¿å›¾ç‰‡ã€‚å› ä¸ºæŠ½å±‰é¡ºæ‰‹å°±èƒ½æ‹¿åˆ°ï¼Œå¹²å˜›è·‘ä»“åº“é‡Œé¢å»å‘¢ï¼Ÿï¼ˆæŒ‡å…¨å±€å˜é‡è®¿é—®æ¯”æœ¬åœ°è·¯å¾„æ›´å¿«ï¼‰\nè¿™å°±å¯¼è‡´äº†å¦‚æœæŸä¸ªçš®è‚¤Aå…ˆè¢«æ™®é€šç”¨æˆ·å¼ ä¸‰æŸ¥è¯¢åˆ°ï¼Œè€Œvipç”¨æˆ·æå››åœ¨ä¹‹åæŸ¥è¯¢çš„æ—¶å€™ï¼Œä¹Ÿè·å–åˆ°ç›¸åŒçš„çš®è‚¤Aï¼Œé‚£ä¹ˆé˜¿ç‹¸å°±ä»æŠ½å±‰é‡Œé¢æå‡ºäº†ä¸€å¼ åº”è¯¥ç»™æ™®é€šç”¨æˆ·ç”¨çš„å›¾ç‰‡ï¼Œè´´åœ¨äº†vipç”¨æˆ·æå››çš„è¿”å›å€¼ä¸Šï¼Œäºæ˜¯æå››å°±è·å–åˆ°äº†ä¸‹é¢è¿™ä¸€å¼ å›¾ç‰‡\n\nè§£å†³è§£å†³åŠæ³•å¾ˆç®€å•ï¼ŒæŠŠvipå’Œæ™®é€šç”¨æˆ·çš„æŠ½å±‰åˆ†å¼€å°±è¡Œäº†\né‚£ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜ï¼Œé‡å¯é˜¿ç‹¸å°±å¥½äº†å‘¢ï¼Ÿ\nå‰é¢æåˆ°è¿‡ï¼ŒæŠ½å±‰ä¼šåœ¨é˜¿ç‹¸å…³æœºçš„æ—¶å€™æ¸…é™¤ï¼ˆå› ä¸ºå…¨å±€å˜é‡æ˜¯å†™åœ¨å†…å­˜é‡Œé¢çš„ï¼Œä¼šåœ¨ä½¿ç”¨å®Œæ¯•åé‡Šæ”¾ï¼Œç±»ä¼¼äºä½ åˆ’æ‰æ‰‹æœºçš„åå°åº”ç”¨æ¥é‡Šæ”¾æ‰‹æœºçš„è¿å­˜ä¸€æ ·ï¼‰\nè¿™æ ·ä¸€æ¥ï¼ŒæŠ½å±‰é‡Œé¢æ²¡æœ‰ä¹‹å‰ç”»å¥½çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆé˜¿ç‹¸å°±ä¼šå»ä»“åº“é‡Œé¢ï¼ˆä»“åº“æ˜¯åˆ†å¼€çš„ï¼‰æ‰¾å‡ºäº†æ­£ç¡®çš„å›¾ç‰‡ï¼Œæµ‹è¯•å°±çœ‹ä¸å‡ºæ¥æœ‰bugäº†ï¼ï¼ˆå› ä¸ºè¿™ä¸ªbugçš„è§¦å‘å¿…é¡»è¦æ™®é€šç”¨æˆ·å’Œvipç”¨æˆ·ä½¿ç”¨é˜¿ç‹¸æŸ¥è¯¢å•†åº—ï¼Œè€Œä»–ä»¬åŒæ—¶åˆ·å‡ºäº†ä¸€ä¸ªçš®è‚¤ã€‚æˆ‘çš„æµ‹è¯•æ²¡æœ‰è¿™ç§ç¯å¢ƒï¼‰\nå’³å’³ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œä¸çŸ¥é“å¤§å®¶çœ‹æ˜ç™½äº†æ²¡æœ‰\n\nç»“è¯­é˜¿ç‹¸ä¼šåœ¨22.09.14çš„æ—©8ç‚¹åé‡å¯ï¼Œä»¥ä¿®å¤è¿™ä¸ªbugã€‚ä¸ºå•¥ç°åœ¨ä¸å¼„å‘¢ï¼Ÿå› ä¸ºé‡å¯ä¼šæŠŠæ™®é€šç”¨æˆ·çš„ç™»å½•ä¿¡æ¯æ¸…ç©ºã€‚å¯¼è‡´æ™®é€šç”¨æˆ·æ˜å¤©8ç‚¹çš„çš®è‚¤æé†’åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œä¹‹å‰å› ä¸ºé‡å¯å·²ç»è¿ç»­å‡ å¤©è¿™æ ·äº†ï¼ˆæŒ‡æ™®é€šç”¨æˆ·å› ä¸ºæ²¡æœ‰ç™»å½•ä¿¡æ¯ï¼Œæ— æ³•ä½¿ç”¨çš®è‚¤æé†’åŠŸèƒ½ï¼‰å¯¹æ™®é€šç”¨æˆ·ä¹Ÿå¤ªä¸å…¬å¹³äº†ï¼\næ„Ÿè°¢ä½ çœ‹åˆ°äº†æœ€åï¼ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","é˜¿ç‹¸å¼€å‘æ—¥å¿—","Kook"]},{"title":"ã€Redisã€‘04.å¸¸ç”¨å˜é‡ç±»å‹","url":"/posts/2729830801/","content":"æœ¬æ–‡æ˜¯å¯¹Redisçš„å˜é‡ç±»å‹ä»¥åŠå’Œç‰¹å®šæ•°æ®ç±»å‹ç›¸å…³å‘½ä»¤çš„ä»‹ç»ã€‚\n1 stringRedis Strings | Redis\n1.1 ä»‹ç»Redisä¸­ï¼Œæ‰€æœ‰keyéƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä½œä¸ºvalueçš„å­—ç¬¦ä¸²æœ‰å‡ ä¸ªç‰¹æ€§\n\næ— ç¼–ç è½¬æ¢ï¼ˆå­˜çš„æ˜¯ä»€ä¹ˆå–å‡ºæ¥å°±æ˜¯ä»€ä¹ˆï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨stringæ¥å­˜æ”¾äºŒè¿›åˆ¶æ–‡ä»¶ï¼›\né™åˆ¶å¤§å°ä¸º512MBï¼ˆé¿å…è¿‡é•¿çš„stringæ“ä½œè€—æ—¶ï¼‰ï¼›\n\nåœ¨MySQLä¸­é»˜è®¤çš„å­—ç¬¦é›†æ˜¯æ‹‰ä¸æ–‡ï¼Œæ­¤æ—¶æ’å…¥ä¸­æ–‡å†…å®¹ä¼šç›´æ¥æŠ¥é”™ç¼–ç æ— æ³•è¯†åˆ«è€Œå¤±è´¥ï¼Œéœ€è¦ä¿®æ”¹MySQLæ•°æ®åº“çš„å­—ç¬¦é›†ã€‚è€Œåœ¨Redisä¸­ï¼ˆä¸é…ç½®çš„æƒ…å†µä¸‹ï¼‰æ’å…¥ä¸­æ–‡ï¼Œå¯ä»¥æ­£å¸¸å­˜æ”¾ã€‚\n127.0.0.1:6379&gt; set key1 ä½ å¥½OK127.0.0.1:6379&gt; get key1&quot;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&quot;\n\nè¿™é‡ŒgetæŸ¥çœ‹çš„æ—¶å€™æ˜¾ç¤ºçš„æ˜¯ä¸­æ–‡ç¼–ç ã€‚æ­¤æ—¶Rediså®¢æˆ·ç«¯æ²¡æœ‰é…ç½®å­—ç¬¦é›†è½¬ç ï¼Œæ‰€ä»¥æ²¡èƒ½æ˜¾ç¤ºä¸­æ–‡ï¼Œä½†å®é™…ä¸Šä¸­æ–‡å°±æ˜¯è¿™ä¹ˆå­˜æ”¾çš„ï¼ˆè¿™å°±å¥½æ¯”è‹±æ–‡å­˜æ”¾çš„æ˜¯å¯¹åº”ASCIIç ä¸€æ ·ï¼‰ã€‚\nå› ä¸ºRedisæœåŠ¡ç«¯æ²¡æœ‰å¯¹ç¼–ç è¿›è¡Œè½¬æ¢ï¼Œæ‰€ä»¥å®ƒé‡åˆ°ä¹±ç é—®é¢˜ï¼ˆæ¯”å¦‚çƒ«çƒ«çƒ«ï¼‰çš„æ¦‚ç‡æ›´å°ã€‚ä½†ä¾æ—§ä¸å»ºè®®ä½¿ç”¨éè‹±æ–‡+æ•°å­—çš„ç»„åˆæ¥åšRedisçš„keyã€‚\nå¦‚æœæƒ³è®©redis-cliçš„ç»ˆç«¯ä¸­æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ï¼Œå¯ä»¥åœ¨å¯åŠ¨çš„æ—¶å€™æ·»åŠ --rawé€‰é¡¹ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæ·»åŠ äº†è¯¥é€‰é¡¹åï¼Œæ­£å¸¸æ˜¾ç¤ºå‡ºäº†valueçš„ä¸­æ–‡å€¼ã€‚\nâ¯ sudo redis-cli --raw127.0.0.1:6379&gt; get key1ä½ å¥½\n\n\næ³¨æ„ï¼šä½¿ç”¨è¯¥é€‰é¡¹ä¼šå¯¼è‡´Redisä¸­æ˜¾ç¤ºçš„(nil)å˜æˆç©ºå­—ç¬¦ä¸²ï¼Œææ˜“äº§ç”Ÿè¯¯å¯¼ï¼å¦‚æœä¸æ˜¯ç¡¬æ€§éœ€è¦åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºä¸­æ–‡ï¼Œè¯·ä¸è¦ä½¿ç”¨è¯¥é€‰é¡¹ï¼\n\nå¦å¤–ï¼Œåœ¨RedisåŸºç¡€å‘½ä»¤åšå®¢ä¸­æåˆ°ï¼ŒRedisä¼šå¯¹ä¸åŒçš„stringé‡‡å–ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œå…¶ä¸­å¯¹äºçº¯æ•´æ•°çš„stringé‡‡ç”¨çš„æ˜¯intæ¥å­˜æ”¾ã€‚\n127.0.0.1:6379&gt; set key1 100OK127.0.0.1:6379&gt; object encoding key1int\n\næ‰€ä»¥åœ¨Redisä¸­å¦‚æœå­˜æ”¾ä¸€ä¸ªæ•´æ•°æ•°å­—ï¼ˆåŒ…æ‹¬è´Ÿæ•°ï¼‰ï¼Œè™½ç„¶å¯¹åº”å˜é‡ç±»å‹æ˜¯stringï¼Œä½†å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªintæ•°å­—æ¥å­˜æ”¾çš„ï¼ŒRedisè¿˜æä¾›äº†ä¸€ç³»åˆ—åŸå­æ€§å‘½ä»¤æ¥å¯¹æ•´æ•°è¿›è¡ŒåŠ å‡æ“ä½œï¼\n1.2 ç›¸å…³å‘½ä»¤set&#x2F;getä»¥åŠmset&#x2F;mgetå‘½ä»¤å·²ç»åœ¨RedisåŸºç¡€å‘½ä»¤åšå®¢ä¸­è®²è§£äº†ï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚\n1.2.1 setnx&#x2F;msetnxsetnxç­‰ä»·äºsetä¸­æ·»åŠ nxé€‰é¡¹ï¼Œåªæœ‰åœ¨keyä¸å­˜åœ¨çš„æ—¶å€™æ‰èƒ½æ­£å¸¸è®¾ç½®\nsetnx key value\n\n\nå½“keyå€¼å·²ç»å­˜åœ¨çš„æ—¶å€™ï¼Œsetnxä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œè¿”å›0ï¼›\nå½“keyå€¼ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œsetnxç­‰ä»·äºsetï¼Œè¿”å›1ï¼›\n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œkey1å­˜åœ¨ï¼Œè®¾ç½®å¤±è´¥è¿”å›0ï¼›key2ä¸å­˜åœ¨ï¼Œè®¾ç½®æˆåŠŸè¿”å›1ã€‚\n127.0.0.1:6379&gt; setnx key1 value20127.0.0.1:6379&gt; setnx key2 value21\n\nè¿˜æœ‰ä¸€ä¸ªå‘½ä»¤æ˜¯msetnxï¼ˆå’Œmsetä¸€æ ·ï¼‰ï¼Œå¯ä»¥åŸå­æ€§åœ°åŒæ—¶setnxå¤šä¸ªkeyã€‚\nmset key value [key value ...]\n\n\nåªè¦ç»™å®šçš„å¤šä¸ªkeyä¸­æœ‰ä¸€ä¸ªkeyå­˜åœ¨ï¼Œmsetnxå°±ä¼šå¤±è´¥ä¸”ä»€ä¹ˆéƒ½ä¸åšï¼Œè¿”å›0ï¼›\nåªæœ‰ç»™å®šçš„å¤šä¸ªkeyå…¨éƒ¨éƒ½ä¸å­˜åœ¨ï¼Œmsetnxæ‰ä¼šæˆåŠŸï¼Œè¿”å›1ï¼›\n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œæ­¤æ—¶key1å’Œkey2å·²ç»å­˜åœ¨ï¼Œè®¾ç½®å¤±è´¥è¿”å›0ï¼›key3å’Œkey4éƒ½ä¸å­˜åœ¨ï¼Œ è®¾ç½®æˆåŠŸè¿”å›1ã€‚\n127.0.0.1:6379&gt; msetnx key1 value1 key2 value2 key3 value30127.0.0.1:6379&gt; msetnx key3 value3 key4 value41\n\n1.2.2 setex&#x2F;psetexsetex&#x2F;psetexæ˜¯åœ¨è®¾ç½®keyçš„æ—¶å€™æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼Œåªæ˜¯æ—¶é—´å•ä½ä¸ä¸€æ ·ã€‚\nsetex key value secondpsetex key value milisecond\n\nè™½ç„¶setå‘½ä»¤æœ¬èº«å·²ç»æä¾›äº†å…³äºè¿™äº›åŠŸèƒ½çš„é€‰é¡¹ï¼Œä½†ç›´æ¥ä½¿ç”¨ç‰¹å®šå‘½ä»¤æ¥è®¾ç½®è€Œä¸æ˜¯ç”¨å‘½ä»¤çš„å‚æ•°ä¼šæ›´åŠ æ–¹ä¾¿ä¸”ç¬¦åˆäººçš„ç›´è§‰ï¼Œä½¿ç”¨é—¨æ§›ä¹Ÿæ›´ä½ï¼\n\nå¯¹äºå­¦ä¹ è¿‡Linuxç³»ç»Ÿä½¿ç”¨çš„å¼€å‘äººå‘˜è€Œè¨€ï¼Œå‘½ä»¤å‚æ•°å·²ç»è§æ€ªä¸æ€ªäº†ã€‚ä½†å¯¹äºåˆæ¬¡å­¦ä¹ Redisä½¿ç”¨è€Œæ²¡æœ‰æ¥è§¦è¿‡Linuxç³»ç»Ÿçš„èŒæ–°è€Œè¨€ï¼Œä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ¥ä¼ é€’å•ä¸ªå‚æ•°ï¼Œä¼šæ¯”åœ¨setåé¢æ·»åŠ ä¸€å¤§å †é€‰é¡¹æ›´åŠ ç®€å•ä¸”ä¸å®¹æ˜“çŠ¯é”™ã€‚\n\n1.2.3 æ•°å­—åŠ å‡å‘½ä»¤å› ä¸ºRedisä¸­çš„æ•´æ•°æ˜¯ç”¨intæ¥å­˜æ”¾çš„ï¼Œæ‰€ä»¥å®ƒæä¾›äº†ä¸€äº›å‘½ä»¤æ¥åŸå­æ€§çš„æ“ä½œæ•°å­—ã€‚è¿™äº›å‘½ä»¤ä¸­å¦‚æœç»™å®šçš„keyä¸å­˜åœ¨ï¼Œåˆ™ä¼šå°†å…¶è§†ä½œ0ï¼Œæ–°å»ºä¸€ä¸ªkeyå†åŠ ä¸Šç›®æ ‡å€¼ã€‚\n\n\n\nå‘½ä»¤\nä½œç”¨\nå¤‡æ³¨\n\n\n\nincr key\nvalue + 1\nvalueå¿…é¡»æ˜¯æ•´æ•°\n\n\nincrby key n\nvalue + n\nvalueå¿…é¡»æ˜¯æ•´æ•°ï¼Œç»™å®šçš„nå¯ä»¥æ˜¯è´Ÿæ•°\n\n\ndecr key\nvalue - 1\nvalueå¿…é¡»æ˜¯æ•´æ•°\n\n\ndecrby key n\nvalue - n\nvalueå¿…é¡»æ˜¯æ•´æ•°ï¼Œç»™å®šçš„nå¯ä»¥æ˜¯è´Ÿæ•°\n\n\nincrbyfloat key n\nvalue +&#x2F;- å°æ•°\nç»™å®šçš„nå¯ä»¥æ˜¯è´Ÿæ•°æ¥å®ç°å‡æ³•\n\n\næ³¨æ„ï¼šdecrbyfloatå‘½ä»¤æ˜¯ä¸å­˜åœ¨çš„ï¼\nå‰å››ä¸ªå‘½ä»¤çš„æ“ä½œæ•°valueå¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚\n127.0.0.1:6379&gt; get key1119.3127.0.0.1:6379&gt; incr key1ERR value is not an integer or out of range127.0.0.1:6379&gt; decr key1ERR value is not an integer or out of range\n\nä½¿ç”¨incrbyfloatå‘½ä»¤æ“ä½œä¸€ä¸ªæ•´æ•°åï¼Œå®ƒçš„å­˜æ”¾æ–¹å¼å°±ä¸å†æ˜¯intï¼Œè€Œå˜æˆembsträº†ã€‚æ­¤æ—¶æˆ‘ä»¬ä¾æ—§å¯ä»¥ç”¨incrbyfloatå‘½ä»¤æ¥ç»§ç»­æ·»åŠ å°æ•°ï¼ˆåŒ…æ‹¬å‡å»å°æ•°ï¼‰ã€‚\n127.0.0.1:6379&gt; set key1 100OK127.0.0.1:6379&gt; object encoding key1int127.0.0.1:6379&gt; incrbyfloat key1 19.3119.3127.0.0.1:6379&gt; get key1119.3127.0.0.1:6379&gt; object encoding key1embstr127.0.0.1:6379&gt; incrbyfloat key1 0.7120127.0.0.1:6379&gt; object encoding key1embstr127.0.0.1:6379&gt; incrbyfloat key1 -0.7119.3\n\n1.2.4 appendappendå‘½ä»¤ç”¨äºåœ¨å­—ç¬¦ä¸²ä¹‹åè¿½åŠ å­—ç¬¦ä¸²ã€‚å¦‚æœç»™å®škeyä¸å­˜åœ¨ï¼Œåˆ™å’Œsetå‘½ä»¤ç­‰ä»·ã€‚\nappend key value\n\nè¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œè¿”å›å€¼æ˜¯è¿½åŠ åçš„å­—ç¬¦ä¸²é•¿åº¦ã€‚\n127.0.0.1:6379&gt; set k 123OK127.0.0.1:6379&gt; append k 455127.0.0.1:6379&gt; get k12345\n\nå¦‚æœå°è¯•ç»™kè¿½åŠ ä¸€ä¸ªä¸­æ–‡ï¼Œå­—ç¬¦ä¸²é•¿åº¦ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ\n127.0.0.1:6379&gt; append k ä½ å¥½11127.0.0.1:6379&gt; get k12345ä½ å¥½\n\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆé•¿åº¦æ˜¯11ï¼Œå› ä¸ºRedisä¸ä¼šå¯¹å­—ç¬¦ä¸²è¿›è¡Œè½¬ç ï¼Œä¸­æ–‡åœ¨UTF8ç¯å¢ƒä¸‹æ˜¯ç”¨ä¸‰ä¸ªå­—èŠ‚å­˜æ”¾çš„ï¼Œæ‰€ä»¥ä¸¤ä¸ªä¸­æ–‡å°±æ˜¯6å­—èŠ‚ï¼ŒåŠ ä¸ŠåŸæœ¬çš„5ä¸ªå­—èŠ‚ï¼Œæœ€ç»ˆé•¿åº¦å°±æ˜¯11å­—èŠ‚ã€‚\nä¸ä½¿ç”¨--rawå¯åŠ¨redis-cliï¼Œå°±èƒ½çœ‹åˆ°è¿™ä¸¤ä¸ªä¸­æ–‡çš„åŸå§‹ç¼–ç å€¼ã€‚\n127.0.0.1:6379&gt; get k&quot;12345\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&quot;\n\n\n1.2.5 getrangeè¿™ä¸ªå‘½ä»¤ç”¨äºè·å–å­—ç¬¦ä¸²çš„å­ä¸²ï¼Œstart&#x2F;endæŒ‡å®šä¸€ä¸ªåŒºé—´ï¼ˆé‡‡ç”¨ä¸‹æ ‡æ–¹å¼ä¸”ä¸ºé—­åŒºé—´ï¼‰ã€‚è¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼›\ngetrange key start end\n\næµ‹è¯•å¦‚ä¸‹ï¼Œ2ä»£è¡¨ä»ç¬¬ä¸‰ä¸ªå­—ç¬¦å¼€å§‹ï¼Œ4ä»£è¡¨ç¬¬äº”ä¸ªå­—ç¬¦ç»“æŸã€‚\n127.0.0.1:6379&gt; set key 123456789OK127.0.0.1:6379&gt; getrange key 2 4&quot;345&quot;\n\nè¿™é‡Œçš„start&#x2F;endè¿˜å¯ä»¥ç»™è´Ÿæ•°ã€‚å½“endä¸ºè´Ÿæ•°æ—¶ï¼Œä»£è¡¨ç›´æ¥å–åˆ°æœ«å°¾ã€‚\n127.0.0.1:6379&gt; getrange key -1 4&quot;&quot;127.0.0.1:6379&gt; getrange key 2 -1&quot;3456789&quot;\n\nå½“startå°äºendæ—¶ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²\n127.0.0.1:6379&gt; getrange key 2 0&quot;&quot;127.0.0.1:6379&gt; getrange key 2 1&quot;&quot;127.0.0.1:6379&gt; getrange key 2 2&quot;3&quot;\n\næ³¨æ„ï¼Œgetrangeçš„åˆ‡åˆ†æ˜¯ä¸¥æ ¼æŒ‰ç…§å­—èŠ‚åˆ‡åˆ†çš„ï¼Œå¦‚æœæ˜¯ä¸­æ–‡ï¼Œåˆ™éš¾ä»¥æ‹†åˆ†å‡ºä¸€ä¸ªæ­£å¸¸çš„ä¸­æ–‡å­—ç¬¦ï¼ˆè¦æŒ‰3ä¸ªå­—èŠ‚çš„é—´éš™æ‰èƒ½æ‹†å‡ºä¸€ä¸ªæ­£å¸¸çš„ä¸­æ–‡å­—ç¬¦ï¼‰ã€‚\nâ¯ sudo redis-cli127.0.0.1:6379&gt; get k&quot;12345\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&quot;127.0.0.1:6379&gt; getrange k 5 -1&quot;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&quot;127.0.0.1:6379&gt; getrange k 5 6&quot;\\xe4\\xbd&quot;â¯ sudo redis-cli --raw127.0.0.1:6379&gt; get k12345ä½ å¥½127.0.0.1:6379&gt; getrange k 5 6ï¿½127.0.0.1:6379&gt; getrange k 5 7ä½ \n\n1.2.6 setrangeä»æŒ‡å®šä¸‹æ ‡å¼€å§‹æ›¿æ¢å­—ç¬¦ä¸²ï¼Œè¿”å›å€¼æ˜¯æ›¿æ¢åå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\nsetrange key offset value\n\nç¤ºä¾‹å¦‚ä¸‹\n127.0.0.1:6379&gt; get key123456789127.0.0.1:6379&gt; setrange key 3 hhhh9127.0.0.1:6379&gt; get key123hhhh89\n\n\n1.2.7 strlenè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå•ä½æ˜¯å­—èŠ‚\nstrlen key\n\n1.3 ç¼–ç ä»‹ç»stringæœ‰ä¸‰ç§ç¼–ç æ–¹å¼\n\nembstrï¼šä¸ºçŸ­å­—ç¬¦ä¸²ä¼˜åŒ–ï¼›\nintï¼šä¸ºéè´Ÿæ•´æ•°ä¼˜åŒ–ï¼›\nrawï¼šåŸå§‹å­—ç¬¦ä¸²ï¼›\n\næ³¨æ„ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆç¼–ç æ–¹å¼ï¼Œéƒ½ä¸ä¼šå½±å“å¯¹stringçš„æ•°å­—åŠ å‡å‘½ä»¤çš„ä½¿ç”¨ï¼ˆåªè¦valueæ˜¯ä¸€ä¸ªæ•°å­—å°±è¡Œï¼Œå³ä¾¿å°æ•°çš„ç¼–ç æ–¹å¼æ˜¯embstrï¼Œä¹Ÿä¾æ—§å¯ä»¥ä½¿ç”¨æ•°å­—åŠ å‡å‘½ä»¤ï¼‰\n1.4 åº”ç”¨åœºæ™¯1.4.1 ç”¨æˆ·ä¿¡æ¯ç¼“å­˜ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è·å–çš„ä¿¡æ¯éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„ã€‚æ¯”å¦‚ç”¨æˆ·ä¸ªäººä¿¡æ¯çš„JSONå­—ç¬¦ä¸²ã€‚\næ­¤æ—¶å¯ä»¥åœ¨Redisä¸­ç”¨user:å¹³å°:ç”¨æˆ·IDçš„æ–¹å¼åškeyï¼Œæ¥ä¿å­˜ç”¨æˆ·åŸºæœ¬ä¸ªäººä¿¡æ¯çš„JSONå­—ç¬¦ä¸²ã€‚å¦‚æœä½¿ç”¨Redis+MySQLçš„ç»„åˆçš„è¯ï¼Œæ•´ä¸ªç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚æ­¥éª¤å¦‚ä¸‹ï¼š\n\nç”¨æˆ·æµè§ˆå™¨&#x2F;APPä¸­ç‚¹å‡»ä¸ªäººä¿¡æ¯é¡µé¢ï¼Œå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼Œå‡è®¾ç”¨æˆ·IDä¸º100ï¼›\nåº”ç”¨æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œå…ˆå»è¯·æ±‚RedisæœåŠ¡å™¨ï¼šget user:å¹³å°:100ï¼›\nRedisä¸­æˆåŠŸæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†Jsonå­—ç¬¦ä¸²è¿”å›ç»™ç”¨æˆ·ï¼›\næ²¡æœ‰åœ¨Redisä¸­æŸ¥è¯¢åˆ°ï¼Œä½¿ç”¨SQLè¯·æ±‚MySQLæœåŠ¡å™¨select ç”¨æˆ·ä¸ªäººä¿¡æ¯å­—æ®µ from user where user_id = &#39;100&#39;;\nå°†MySQLè¿”å›çš„ç›¸å…³é”®å€¼æŒ‰é¢„å®šæ ¼å¼åˆ¶ä½œæˆJSONå­—ç¬¦ä¸²ï¼Œè¿”å›ç»™ç”¨æˆ·ï¼›\nå°†è¯¥JSONå­—ç¬¦ä¸²å†™å…¥RedisæœåŠ¡å™¨ï¼šset user:å¹³å°:100 JSONå­—ç¬¦ä¸²ï¼›\n\nåœ¨setçš„æ—¶å€™è¿˜å¯ä»¥è®¾å®šä¸€å®šçš„è¿‡æœŸæ—¶é—´ï¼Œåœ¨ä¿è¯ç¼“å­˜çš„å®æ—¶æ€§çš„åŸºç¡€ä¸Šï¼Œé¿å…Redisä¸­çš„æ•°æ®å§‹ç»ˆå¢é•¿è€Œå¯¼è‡´å†…å­˜çˆ†æ»¡ã€‚ï¼ˆå½“ç„¶ï¼Œå†…å­˜å¿«æ»¡çš„æ—¶å€™Redisæœ‰æ·˜æ±°ç­–ç•¥å¯ä¾›é€‰æ‹©ï¼Œé‚£æ˜¯åé¢è¦å­¦ä¹ çš„å†…å®¹äº†ï¼‰ã€‚\n1.4.2 è§†é¢‘æ’­æ”¾é‡è®¡æ•°å¯¹äºè§†é¢‘ç‚¹èµã€æ’­æ”¾é‡è¿™ç§ç»å¸¸å˜åŠ¨çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨Redisæ¥åšè®¡æ•°ã€‚æ¯”å¦‚ä½¿ç”¨vedio:hit:è§†é¢‘IDä½œä¸ºkeyï¼Œä»£è¡¨è§†é¢‘çš„æ’­æ”¾é‡ã€‚\nå½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªè§†é¢‘çš„æ—¶å€™ï¼Œå‘èµ·è¯·æ±‚ç»™åº”ç”¨æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨åœ¨è¿”å›è§†é¢‘ç›¸å…³ä¿¡æ¯çš„åŒæ—¶ï¼Œå°†æ’­æ”¾é‡åŠ ä¸€çš„ä¿¡æ¯ï¼Œä½¿ç”¨incrå‘½ä»¤ä¼ é€’ç»™RedisæœåŠ¡å™¨ã€‚\nä½†åªç”¨Redisè‚¯å®šæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªMySQLæ•°æ®è¡¨æ¥å­˜æ”¾è§†é¢‘å¯¹åº”çš„ç‚¹èµã€æ’­æ”¾ã€æ”¶è—ç­‰å…¨é‡ä¿¡æ¯ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä»¤èµ·ä¸€ä¸ªæœåŠ¡ï¼Œå¼‚æ­¥åœ°åŒæ­¥è§†é¢‘æ’­æ”¾é‡ã€ç‚¹èµç­‰ç›¸å…³ä¿¡æ¯åˆ°MySQLè¡¨ä¸­ã€‚\n\nå¼‚æ­¥åŒæ­¥ï¼šå¹¶éæ¥ä¸€ä¸ªè§†é¢‘è¯·æ±‚å°±åŒæ­¥åˆ°MySQLä¸€æ¬¡ï¼Œè€Œæ˜¯ä»¥ä¸€å®šé¢‘ç‡ï¼ˆæ—¶é—´é—´éš”ï¼‰å°†Redisä¸­çš„æ•°æ®åŒæ­¥åˆ°MySQLè¡¨ä¸­ã€‚è¿™æ ·èƒ½ä¿è¯Redisä¸­çš„æ•°æ®èƒ½æœ‰å¤‡ä»½ã€‚\n\nå®é™…åœºæ™¯ä¸­ï¼Œè¦æƒ³å¼€å‘ä¸€ä¸ªç¨³å®šçš„çœŸå®è®¡æ•°ç³»ç»Ÿï¼Œè¿˜éœ€è¦è€ƒè™‘é˜²ä½œå¼Šã€ä¸åŒç»´åº¦è®¡æ•°ã€é¿å…å•ç‚¹é—®é¢˜ä»¥åŠæ•°æ®æŒä¹…åŒ–ç­‰ç­‰æ–¹é¢ã€‚è¿™äº›éƒ½éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æ¥ç‰¹æ®Šå¤„ç†ã€‚\n1.4.3 cookie+seesionåœ¨HTTPç½‘ç»œæœåŠ¡ä¸­ï¼Œcookieæ˜¯æœ€å¸¸ç”¨çš„ç”¨äºæ ‡å®šå®¢æˆ·ç«¯ä¿¡æ¯çš„æ–¹å¼ã€‚æœ‰äº›ç½‘ç«™å¹¶éæ¯æ¬¡æ‰“å¡éƒ½éœ€è¦ç™»å½•ï¼Œè€Œæ˜¯ç™»å½•äº†ä¹‹åèƒ½ç»´æŒä¸€æ®µæ—¶é—´ä¸éœ€è¦ç”¨æˆ·æ¯æ¬¡éƒ½é‡æ–°ç™»å½•ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå°±æ˜¯é€šè¿‡æµè§ˆå™¨ç«¯çš„cookieå’ŒæœåŠ¡å™¨ç«¯çš„sessionæ¥å®ç°çš„ã€‚\n\ncookieï¼šå­˜æ”¾åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ï¼Œå…¶å€¼æ˜¯é€šè¿‡HTTPçš„Set-Cookieå“åº”å¤´ç”±æœåŠ¡å™¨å‘ŠçŸ¥ç”¨æˆ·æµè§ˆå™¨çš„ï¼›\nsessionï¼šå­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼ˆå®é™…ä¸ŠæœåŠ¡å™¨ç«¯åº”è¯¥å­˜æ”¾çš„æ˜¯cookie-sessionçš„é”®å€¼å¯¹ï¼‰ï¼Œç”¨äºæ ‡å®šç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼›\n\nå½“ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªsession_idï¼Œå°†å…¶å’Œç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ç»‘å®šï¼ˆé”®å€¼å¯¹ï¼‰ï¼Œå¹¶å‘é€åŒ…å«Set-Cookieå¤´çš„HTTPæŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå°†session_idå‘ŠçŸ¥ç”¨æˆ·ã€‚æµè§ˆå™¨åœ¨æ£€æµ‹åˆ°è¿™ä¸ªå“åº”å¤´åï¼Œä¼šå°†å®ƒå¯¹åº”çš„å€¼ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸‹ä¸€æ¬¡å‘è¿™ä¸ªç½‘ç«™å‘èµ·HTTPè¯·æ±‚çš„æ—¶å€™å°±ä¼šå¸¦ä¸Šè¿™ä¸ªè®¾ç½®çš„cookieå€¼é‡Œé¢çš„session_idã€‚\næœåŠ¡å™¨æ”¶åˆ°HTTPè¯·æ±‚åï¼Œæ£€æŸ¥è¯·æ±‚å¤´ä¸­çš„Cookieå­—æ®µï¼Œå¹¶ä¸æœåŠ¡å™¨ä¸­å­˜æ”¾çš„session_idé”®å€¼å¯¹è¿›è¡Œå¯¹æ¯”ï¼Œå¾—åˆ°å¯¹åº”çš„ç”¨æˆ·ï¼Œåˆ™è¿”å›ç”¨æˆ·ç›¸å…³ä¿¡æ¯ï¼Œå³å½“å‰ç”¨æˆ·å·²ç™»å½•ã€‚\nå®ç°ç½‘é¡µç™»å½•åœ¨ä¸€å®šæ—¶é—´åè¿‡æœŸçš„åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨Redisä¸­ç»™è¿™ä¸ªé”®å€¼å¯¹è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´å°±è¡Œäº†ã€‚\nä½¿ç”¨cookie+sessionçš„æ–¹å¼ä¹Ÿæ›´åŠ æ–¹ä¾¿å¤šä¸ªåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„æ¶ˆæ¯å…±äº«ã€‚å› ä¸ºè´Ÿè½½å‡è¡¡çš„å­˜åœ¨ï¼Œç”¨æˆ·çš„è¯·æ±‚å¯èƒ½ä¼šè¢«å‘é€åˆ°ä¸åŒçš„åº”ç”¨æœåŠ¡å™¨ã€‚åªè¦è¿™äº›åº”ç”¨æœåŠ¡å™¨ä½¿ç”¨ç›¸åŒçš„Redisï¼Œå®ƒä»¬å°±éƒ½èƒ½æ£€ç´¢åˆ°ç”¨æˆ·çš„cookieå¯¹åº”çš„sessionä¿¡æ¯ï¼Œä¹Ÿå°±çŸ¥é“äº†å½“å‰ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œå¯ä»¥æ­£å¸¸è¿›è¡ŒæœåŠ¡ï¼ˆå…¶å®å°±æ˜¯ä¿¡æ¯åœ¨å¤šä¸ªåº”ç”¨æœåŠ¡å™¨ä¹‹ä¸­è¿›è¡Œå…±äº«ï¼‰ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸­ç”¨æˆ·å®Œå…¨ä¸ä¼šå‘ç°è‡ªå·±çš„è¯·æ±‚å¹¶éæ˜¯åŒä¸€ä¸ªæœåŠ¡å™¨æ¥å¤„ç†çš„ã€‚\n1.4.4 éªŒè¯ç è¿™ä¸ªåœºæ™¯å°±å¾ˆå¸¸è§äº†ï¼Œæ‰‹æœºéªŒè¯ç &#x2F;é‚®ç®±éªŒè¯ç éƒ½æ˜¯å¦‚æ­¤ï¼Œåœ¨Redisä¸­è®¾ç½®ä¸€ä¸ªéªŒè¯ç çš„keyï¼Œvalueæ˜¯å¯¹åº”ç”¨æˆ·çš„idï¼Œå¹¶ç»™è¿™ä¸ªkeyè®¾ç½®ä¸€å®šçš„è¿‡æœŸæ—¶é—´ï¼Œå°±èƒ½å®ç°éªŒè¯ç çš„åŠŸèƒ½ã€‚\nå½“ç”¨æˆ·è¾“å…¥éªŒè¯ç åï¼Œæ£€æŸ¥Redisä¸­çš„keyï¼Œå½“valueä¸­çš„idå’Œç”¨æˆ·çš„idç›¸åŒï¼Œåˆ™ä»£è¡¨éªŒè¯æˆåŠŸã€‚ç”¨æˆ·idä¸åŒæˆ–éªŒè¯ç çš„keyä¸å­˜åœ¨ï¼Œåˆ™éªŒè¯å¤±è´¥ã€‚\nè¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½è¿˜ä¼šæ¶‰åŠåˆ°é—´éš”60sç§’æ‰èƒ½å‘é€ä¸€æ¬¡éªŒè¯ç ï¼ˆè¿™ç§é™åˆ¶å¤§æ¦‚ç‡æ˜¯å‰ç«¯åšçš„å¤„ç†ï¼‰åç«¯è‡ªç„¶ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›ç¼“å­˜çš„æ—¶é—´å€¼æ¥åšæ£€æŸ¥ï¼Œé¿å…ç»™åŒä¸€ä¸ªç”¨æˆ·åœ¨è¾ƒçŸ­æ—¶é—´å†…å‘é€å¤šä¸ªéªŒè¯ç ï¼ˆä¼šå½±å“æ€§èƒ½ï¼‰ã€‚\n2 Hash2.1 ä»‹ç»å“ˆå¸Œæ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ç§æ•°æ®ç»“æ„ï¼ŒRedisæœ¬èº«çš„key-valueç»“æ„å…¶å®å°±æ˜¯é€šè¿‡å“ˆå¸Œæ¥å®ç°çš„ã€‚åŒæ—¶ï¼ŒRedisä¹Ÿæä¾›äº†hashä½œä¸ºvalueçš„æ•°æ®ç±»å‹ï¼Œä¸ºäº†å’ŒRedisæœ¬èº«çš„kvè¿›è¡ŒåŒºåˆ†ï¼Œhashç±»å‹å†…çš„é”®å€¼å¯¹è¢«ç§°ä¸ºfield-valueã€‚\næ¯”å¦‚å­˜æ”¾ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ï¼ŒåŸæœ¬æˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹å¼ï¼Œåœ¨keyä¸­ç”¨å†’å·ä½œä¸ºåˆ†éš”æ¥ä¿å­˜ä¸ªäººä¿¡æ¯ã€‚\nuser:1:name æå››user:1:age  20user:1:sex  ç”·\n\nç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†valueè®¾ç½®ä¸ºhashç±»å‹ï¼Œç„¶ååœ¨å…¶ä¸­å†è®¾ç½®å¯¹åº”çš„fieldå’Œvalueï¼Œçœ‹ä¸Šå»å°±æ›´åŠ æ˜äº†ã€‚\n\n\n\nkey\nfield\nvalue\n\n\n\nuser:1\nname\næå››\n\n\nuser:1\nag\n20\n\n\nuser:1\nsex\nç”·\n\n\n2.2 ç›¸å…³å‘½ä»¤2.2.1 HSET&#x2F;HGET&#x2F;HGETALLhttps://redis.io/commands/hget/\nHSET key field value [field value ...]HGET key field\n\nç»è¿‡ä¹‹å‰çš„å‘½ä»¤å­¦ä¹ ï¼Œç°åœ¨è¿™é‡Œçš„å‘½ä»¤å°±å¾ˆå¥½ç†è§£äº†ã€‚\n\nHSETç”¨äºè®¾ç½®hashç±»å‹å†…éƒ¨çš„fieldï¼Œå¯ä»¥åŒæ—¶è®¾ç½®å¤šä¸ªfieldï¼›\nHGETç”¨äºè·å–hashç±»å‹å†…éƒ¨çš„fieldã€‚\n\nHSETå‘½ä»¤çš„è¿”å›å€¼æ˜¯è®¾ç½®æˆåŠŸçš„fieldçš„ä¸ªæ•°ã€‚å½“HGETå‘½ä»¤æŒ‡å®šçš„keyæˆ–è€…fieldä¸å­˜åœ¨æ—¶ï¼Œä¼šè¿”å›nilã€‚\n127.0.0.1:6379&gt; HSET user:1 name æå›› age 20 sex ç”·3127.0.0.1:6379&gt; HGET user:1 name&quot;\\xe6\\x9d\\x8e\\xe5\\x9b\\x9b&quot;127.0.0.1:6379&gt; HGET user:1 age20127.0.0.1:6379&gt; HGET user:1 info(nil)127.0.0.1:6379&gt; HGET user:2 test(nil)127.0.0.1:6379&gt;\n\nä¸æ­¤ç›¸å…³çš„è¿˜æœ‰HSETNXå’ŒHGETALLä¸¤ä¸ªå‘½ä»¤\n\nHSETNXï¼šå½“hashä¸­çš„fieldä¸å­˜åœ¨æ—¶æ‰ä¼šè®¾ç½®æˆåŠŸï¼ˆè¿”å›å€¼ä¸º1ï¼‰ï¼Œå¦‚æœfieldå·²ç»å­˜åœ¨åˆ™ä¸ä¼šåšä»»ä½•æ“ä½œï¼ˆè¿”å›å€¼ä¸º0ï¼‰ï¼›\nHGETALLï¼šè¿”å›hashä¸­çš„æ‰€æœ‰field-valueå€¼\n\n127.0.0.1:6379&gt; HGETALL user:11) &quot;name&quot;2) &quot;\\xe6\\x9d\\x8e\\xe5\\x9b\\x9b&quot;3) &quot;age&quot;4) &quot;20&quot;5) &quot;sex&quot;6) &quot;\\xe7\\x94\\xb7&quot;127.0.0.1:6379&gt; HGETALL user:2(empty array)\n\n2.2.2 HEXISTSè¯¥å‘½ä»¤ç”¨äºæŸ¥è¯¢hashä¸­çš„æŸä¸ªfieldæ˜¯å¦å­˜åœ¨ã€‚å­˜åœ¨è¿”å›1ï¼Œkeyæˆ–è€…fieldä¸å­˜åœ¨è¿”å›0ï¼›\nHEXISTS key field\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; HEXISTS user:1 name(integer) 1127.0.0.1:6379&gt; HEXISTS user:1 info(integer) 0127.0.0.1:6379&gt; HEXISTS user:2 info(integer) 0\n\n2.2.3 HDELåˆ é™¤hashä¸­æŒ‡å®šçš„fieldï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç»™å®šå¤šä¸ªfieldæ¥åˆ é™¤ã€‚è¿”å›å€¼æ˜¯æœ¬æ¬¡æˆåŠŸåˆ é™¤çš„fieldä¸ªæ•°ã€‚\nHDEL key field [field ...]\n\nç¤ºä¾‹ï¼Œinfoå­—æ®µæ˜¯ä¸å­˜åœ¨çš„ï¼Œå®é™…ä¸ŠåªæˆåŠŸåˆ é™¤äº†nameå­—æ®µï¼Œæ‰€ä»¥è¿”å›å€¼ä¸º1ã€‚\n127.0.0.1:6379&gt; HDEL user:1 name info(integer) 1\n\nå¦‚æœä½ éœ€è¦åˆ é™¤æ•´ä¸ªhashï¼Œç›´æ¥ä½¿ç”¨Redisçš„delå‘½ä»¤å°†keyç»™åˆ é™¤å°±è¡Œäº†ã€‚æ¯”å¦‚del user:1;\n2.2.4 HKEYSè·å–å“ˆå¸Œä¸­çš„æ‰€æœ‰fieldï¼ˆä»…è·å–å­—æ®µï¼‰ï¼›è¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼ŒNæ˜¯hashä¸­çš„fieldä¸ªæ•°ã€‚\nHKEYS key\n\nè¿™ä¸ªå‘½ä»¤å’ŒHGETALLå‘½ä»¤æœ‰æ‰€ä¸åŒï¼ŒHGETALLå‘½ä»¤ä¼šè·å–fieldå’Œvalueï¼Œä½†HKEYSåªä¼šè·å–fieldã€‚\n127.0.0.1:6379&gt; HGETALL user:11) &quot;age&quot;2) &quot;20&quot;3) &quot;sex&quot;4) &quot;\\xe7\\x94\\xb7&quot;127.0.0.1:6379&gt; HKEYS user:11) &quot;age&quot;2) &quot;sex&quot;\n\nå½“ç„¶ï¼Œè¿™ä¸ªå‘½ä»¤å’ŒHGETALLå‘½ä»¤éƒ½éœ€è¦è°¨æ…ä½¿ç”¨ï¼Œå®ƒä»¬å°±å’Œkeys *ä¸€æ ·ï¼Œéœ€è¦éå†æ•´ä¸ªhashå¯¹è±¡ï¼Œè€Œæˆ‘ä»¬åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰å¹¶ä¸çŸ¥é“ä¸€ä¸ªhashé‡Œé¢åˆ°åº•æœ‰å¤šå°‘ä¸ªfieldã€‚å¦‚æœæŸ¥è¯¢çš„hashä¸­fieldè¿‡å¤šï¼Œé‚£å°±ä¼šé˜»å¡Redisã€‚\n2.2.5 HVALSè·å–hashä¸­çš„æ‰€æœ‰valueï¼Œå’ŒHKEYSçš„åŠŸèƒ½å¯¹åº”ã€‚\nHVALS key\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; HVALS user:11) &quot;20&quot;2) &quot;\\xe7\\x94\\xb7&quot;\n\n2.2.6 HMGETä¸€æ¬¡æ€§è·å–hashä¸­çš„å¤šä¸ªfieldï¼ˆä¸€æ¡å‘½ä»¤æŸ¥è¯¢ä¼˜äºå¤šæ¡å‘½ä»¤æŸ¥è¯¢ï¼‰\nHMGET key field [field ...]\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; HMGET user:1 age sex1) &quot;20&quot;2) &quot;\\xe7\\x94\\xb7&quot;\n\n2.2.7 HSCANï¼ˆä»…ä½œä»‹ç»ï¼‰å’ŒHGETALL&#x2F;HKEYS&#x2F;HVALSè¿™äº›ä¸€æ¬¡æ€§éå†å®Œæ¯•æ‰€æœ‰hashå†…å…ƒç´ çš„å‘½ä»¤ä¸åŒï¼ŒHSCANå‘½ä»¤æ˜¯â€œæ¸è¿›å¼éå†â€ï¼ˆå°±å¥½æ¯”è¿‡ç¨‹åŒ–SQLå’Œç¼–ç¨‹ä¸­å¸¸ç”¨çš„forå¾ªç¯ï¼‰ã€‚\næ‰€è°“æ¸è¿›å¼éå†ï¼Œå°±æ˜¯æ•²ä¸€æ¬¡å‘½ä»¤éå†ä¸€æ¬¡ï¼Œè¿™æ ·éå†çš„è¿‡ç¨‹å’Œé€Ÿåº¦éƒ½æ˜¯å¯æ§çš„ï¼Œä¸ä¼šé˜»å¡Redisã€‚å½“ä½ éœ€è¦è·å–ä¸€ä¸ªhashä¸­çš„æ‰€æœ‰field&#x2F;valueï¼Œä½¿ç”¨HSCANä¼šæ›´åŠ å®‰å…¨ã€‚\nå®˜ç½‘æ–‡æ¡£ï¼šhttps://redis.io/commands/hscan/\nHSCAN key cursor [MATCH pattern] [COUNT count]\n\n2.2.8 HLENè·å–ä¸€ä¸ªhashä¸­é”®å€¼å¯¹çš„ä¸ªæ•°ï¼Œè¯¥å‘½ä»¤æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œå› ä¸ºRedisæœ‰ä½¿ç”¨é¢å¤–å˜é‡æ¥å­˜æ”¾hashä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œæ— éœ€éå†ã€‚\nHLEN key\n\nä½¿ç”¨è¯¥å‘½ä»¤éå†ä¸€ä¸ªä¸å­˜åœ¨çš„keyæ—¶ï¼Œè¿”å›å€¼ä¸º0\n127.0.0.1:6379&gt; HLEN user:1(integer) 2127.0.0.1:6379&gt; HLEN user:2(integer) 0\n\n2.2.9 HINCRBY&#x2F;HINCRYBYFLOATè¿™äº›å‘½ä»¤å’Œstringä¸­çš„æ•°å­—æ“ä½œå‘½ä»¤ä¸€è‡´ï¼Œå› ä¸ºhashä¸­çš„valueä¹Ÿæ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿèƒ½å½“ä½œæ•°å­—æ¥å¤„ç†ã€‚å‚æ•°å¯ä»¥æ˜¯è´Ÿæ•°æ¥å·¦å‡æ³•ã€‚\nHINCRBY key field numHINCRBYFLOAT key field float\n\næµ‹è¯•å¦‚ä¸‹ï¼Œä¸¤ä¸ªå‘½ä»¤çš„è¿”å›å€¼éƒ½æ˜¯æ“ä½œä¹‹åçš„å˜é‡å€¼ã€‚\n127.0.0.1:6379&gt; hincrby user:1 age 10(integer) 30127.0.0.1:6379&gt; hincrbyfloat user:1 age 10.13&quot;40.13&quot;127.0.0.1:6379&gt; hincrbyfloat user:1 age -11.13&quot;29&quot;\n\n2.2.10 HSTRLENè®¡ç®—hashä¸­valueçš„å­—ç¬¦ä¸²é•¿åº¦\nHSTRLEN key field\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; hget user:1 age&quot;29&quot;127.0.0.1:6379&gt; hstrlen user:1 age(integer) 2\n\n2.3 ç¼–ç ä»‹ç»ä¹‹å‰åœ¨RedisåŸºç¡€å‘½ä»¤åšå®¢çš„object encodingä¸­æåˆ°ï¼Œhashæœ‰ä¸¤ç§ç¼–ç æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯ziplistï¼Œä¸€ä¸ªæ˜¯hashtableã€‚\nå…¶ä¸­ziplistæ˜¯åœ¨hashä¸­å…ƒç´ è¾ƒå°‘çš„æƒ…å†µä¸‹ä½¿ç”¨çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œåˆšå¼€å§‹hashä¸­çš„f1åªæœ‰3ä¸ªå­—èŠ‚çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œä½¿ç”¨çš„æ˜¯ziplistæ¥å­˜æ”¾ï¼›å½“æˆ‘ä¹°å°è¯•è®¾ç½®ä¸€ä¸ªéå¸¸é•¿çš„å­—ç¬¦ä¸²f2ï¼Œå°±ä¼šåˆ‡æ¢æˆhashtableæ¥å­˜æ”¾ã€‚\n127.0.0.1:6379&gt; hset key f1 111(integer) 1127.0.0.1:6379&gt; object encoding key&quot;ziplist&quot;127.0.0.1:6379&gt; hset key f2 235xczbjlkq3e5jl123j5ljlbsjlk32j6l5k1hasldg82357989789787124nlahbkasdlj3215897avsalkjl32k51432097zvlmq32j5(integer) 1127.0.0.1:6379&gt; object encoding key&quot;hashtable&quot;\n\nå¦‚æœä½ äº†è§£hashtableçš„æ•°æ®ç»“æ„ï¼Œä»¥æ‹‰é“¾æ³•ä¸ºä¾‹ï¼Œå®ƒä¼šæœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå†…éƒ¨å­˜æ”¾é“¾è¡¨æŒ‡é’ˆã€‚å­˜æ”¾æ•°æ®æ—¶ï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºkeyæ‰€åœ¨ä¸‹æ ‡ä½ç½®ï¼Œå°†valueé“¾æ¥åˆ°æ•°ç»„ä¸‹æ ‡ä½ç½®çš„å¯¹åº”æŒ‡é’ˆä¸Šï¼Œå³ä¸ºå­˜æ”¾å®Œæ¯•ã€‚å½“hashè¡¨ä¸­çš„å…ƒç´ è¾ƒå°‘æ—¶ï¼Œæ•°ç»„å¯èƒ½ä¼šç©ºå‡ºå‡ ä¸ªä¸‹æ ‡çš„ä½ç½®æ²¡æœ‰valueé“¾æ¥ï¼Œè¿™å‡ ä¸ªä¸‹æ ‡çš„ç©ºé—´å°±ç®—æ˜¯æµªè´¹äº†ã€‚\nè€Œä½¿ç”¨ziplistå°±å¯ä»¥èŠ‚çœè¿™éƒ¨åˆ†ç©ºé—´çš„æµªè´¹ï¼Œå¯¹åº”çš„ä»£ä»·æ˜¯ziplistçš„è¯»å†™é€Ÿåº¦ä¼šæ…¢äºåŸç”Ÿhashtableã€‚\nåœ¨Redisä¸­å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ä¸ªé…ç½®é¡¹æ¥è®¾ç½®hashä»€ä¹ˆæ—¶å€™ä½¿ç”¨ziplistï¼Œå†™å…¥/etc/redis/redis.confå³å¯ã€‚\n\n\n\né…ç½®\nåŠŸèƒ½\nå¤‡æ³¨\n\n\n\nhash-max-ziplist-entries\nè®¾ç½®fieldä¸ªæ•°ä¸ºå¤šå°‘ä»¥ä¸‹æ—¶ä½¿ç”¨ziplist\né»˜è®¤512ä¸ª\n\n\nhash-max-ziplist-value\nè®¾ç½®hashä¸­valueå­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦\né»˜è®¤ä¸º64å­—èŠ‚\n\n\n2.4 åº”ç”¨åœºæ™¯2.4.1 å…³ç³»æ•°æ®åº“ç¼“å­˜æ­£å¦‚ä»‹ç»é˜¶æ®µæ—¶æåˆ°çš„ï¼Œhashéå¸¸é€‚åˆç”¨äºå­˜æ”¾ä¸€äº›ç»“æ„åŒ–çš„æ•°æ®ã€‚ä»¥ç”¨æˆ·æ•°æ®ä¸ºä¾‹ï¼Œå¯ä»¥ç”¨uidä½œä¸ºkeyçš„æ ‡è¯†ï¼Œå†…éƒ¨å­˜æ”¾å¯¹åº”çš„ä¸ªäººä¿¡æ¯ã€‚æœ‰çš„æ—¶å€™ä¸ºäº†æ–¹ä¾¿ï¼Œè¿˜ä¼šåœ¨hashä¸­å†å­˜æ”¾ä¸€æ¬¡uidã€‚\n\n\n\nkey\nfield\nvalue\n\n\n\nuser:1\nuid\n1\n\n\n\nname\næå››\n\n\n\nag\n20\n\n\n\nsex\nç”·\n\n\nuser:2\nuid\n2\n\n\n\nname\nç‹äº”\n\n\n\nage\n23\n\n\n\nsex\nç”·\n\n\nè¿™æ ·å…¶å®å°±å¥½æ¯”ä¸€ä¸ªMySQLæ•°æ®åº“ä¸­çš„è¡¨\n\n\n\nuid\nname\nage\nsex\n\n\n\n1\næå››\n20\nç”·\n\n\n2\nç‹äº”\n23\nç”·\n\n\nç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†MySQLä¸­çš„è¡¨ç›´æ¥ç¼“å­˜åœ¨Redisä¸­ï¼Œæä¾›æ›´åŠ å¿«é€Ÿçš„æŸ¥è¯¢ã€‚éœ€è¦ä¿®æ”¹æ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨å…ˆä¿®æ”¹Redisä¸­çš„æ•°æ®ï¼Œå†å¼‚æ­¥åŒæ­¥åˆ°MySQLä¸­çš„æ–¹å¼æ¥æé«˜æ•ˆç‡ã€‚\nå½“ç„¶ï¼Œä½¿ç”¨string+jsonçš„æ–¹å¼ä¹Ÿå¯ä»¥å­˜æ”¾ç»“æ„åŒ–æ•°æ®ï¼Œä½†åœ¨ä½¿ç”¨çš„æ—¶å€™å°±æ¶‰åŠåˆ°äº†jsonçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œæ•ˆç‡ä¼šä½äºç›´æ¥ä½¿ç”¨Redisé‡Œé¢çš„hashæ¥å­˜æ”¾ï¼Œä¸è¿‡ä½¿ç”¨hashä¼šæœ‰æ›´å¤§çš„ç©ºé—´æ¶ˆè€—ã€‚\nè¿™é‡Œè¿˜æ¶‰åŠåˆ°äº†é«˜å†…èš&#x2F;ä½å†…èšçš„æ¦‚å¿µï¼š\n\né«˜å†…èšï¼šæŠŠæœ‰å…³è”çš„æ•°æ®å­˜æ”¾åœ¨ä¸€èµ·ï¼›\nä½å†…èšï¼šæœ‰å…³è”çš„ä¸œè¥¿æ•£å¼€å­˜æ”¾äº†ï¼›\n\nä½¿ç”¨hashæ¥å­˜æ”¾ç”¨æˆ·æ•°æ®ï¼Œå°±å±äºé«˜å†…èšã€‚å¦‚æœä½¿ç”¨user:1:nameã€user:1:ageçš„key&#x2F;valueæ¥å­˜æ”¾ç”¨æˆ·æ•°æ®ï¼Œå°±æ˜¯ä½å†…èšï¼Œå› ä¸ºç”¨æˆ·ä¿¡æ¯è¢«æ‹†å¼€å­˜æ”¾åœ¨äº†ä¸åŒçš„keyä¸­ã€‚\nåŒç†ï¼Œä¸Šæ–‡stringä¸­æåˆ°çš„è§†é¢‘æ’­æ”¾é‡ä¿¡æ¯ç»Ÿè®¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨hashæ¥å­˜æ”¾ä¸€ä¸ªè§†é¢‘çš„ç‚¹å‡»é‡&#x2F;ç‚¹èµé‡ï¼Œå°†ä¸€ä¸ªè§†é¢‘çš„æ•°æ®å­˜æ”¾åœ¨ä¸€ä¸ªhashä¸­ï¼Œè€Œä¸ç”¨stringæ¥å­˜æ”¾ã€‚\næˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™éƒ½å¼ºè°ƒé«˜å†…èšã€ä½è€¦åˆï¼Œå°±æ˜¯ä¸ºäº†æ•´ä¸ªç³»ç»Ÿèƒ½æœ‰æ›´å¥½çš„æ•´æ´åº¦ï¼Œç»´æŠ¤æ›´åŠ æ–¹ä¾¿ã€‚\n2.4.2 hashå’Œå…³ç³»æ•°æ®åº“çš„åŒºåˆ«\nå“ˆå¸Œç±»å‹æ˜¯ç¨€ç–çš„ï¼Œå…³ç³»æ•°æ®åº“æ˜¯ç»“æ„åŒ–çš„ã€‚æ¯”å¦‚ä¸åŒçš„hashé‡Œé¢çš„fieldå®Œå…¨æ²¡æœ‰å…³ç³»ï¼Œå¯ä»¥éšæ„è®¾ç½®ï¼Œä½†MySQLä¸­ä¸€ä¸ªè¡¨æƒ³æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œå°±å¿…é¡»ä¾ç…§è¡¨çš„è¦æ±‚è®¾ç½®æ‰€æœ‰æ•°æ®ï¼›\nå…³ç³»æ•°æ®åº“å¯ä»¥è¿›è¡Œå¤æ‚çš„å…³ç³»æŸ¥è¯¢ï¼ˆæ¯”å¦‚å¤šè¡¨æŸ¥è¯¢ï¼‰ï¼Œè€ŒRediså¾ˆéš¾æ¨¡æ‹Ÿå…³ç³»æŸ¥è¯¢ï¼Œç»´æŠ¤çš„å¤æ‚åº¦å¾ˆé«˜ä¸”æ²¡æœ‰å¿…è¦ã€‚\n\n\n3 List3.1 ä»‹ç»Redisä¸­çš„liståˆ—è¡¨ç±»å‹æä¾›äº†å¤´æ’å¤´åˆ &#x2F;å°¾æ’å°¾åˆ çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒå½“ä½œé¡ºåºè¡¨ã€æ ˆã€é˜Ÿåˆ—æ¥ä½¿ç”¨ã€‚\n\nåˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯æŒ‰åºå­˜æ”¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®åˆ—è¡¨ä¸­çš„å…ƒç´ æˆ–è·å–ä¸€ä¸ªèŒƒå›´ä¸­çš„å…ƒç´ ã€‚åˆ—è¡¨ä¸­çš„å…ƒç´ å…è®¸é‡å¤ã€‚\n3.2 ç›¸å…³å‘½ä»¤3.2.1 LINDEXæ ¹æ®ä¸‹æ ‡æŸ¥çœ‹listä¸­çš„æ•°æ®ï¼Œå½“ä¸‹æ ‡è¶…å‡ºèŒƒå›´æ—¶è¿”å›nilï¼›\nLINDEX key index\n\nindexæ”¯æŒè´Ÿæ•°ä¸‹æ ‡ï¼Œä»åå¾€å‰æ•°ã€‚æ¯”å¦‚-1ä»£è¡¨ä»åå¾€å‰ç¬¬ä¸€ä¸ªæ•°æ®ï¼ˆå³listæœ«å°¾æ•°æ®ï¼‰ã€‚\næ³¨æ„ï¼Œè¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œå› ä¸ºRedisä¸­çš„listå¹¶éæ—¶åˆ»é‡‡ç”¨é¡ºåºè¡¨æ¥å®ç°ï¼ˆä¼šæœ‰ä¸åŒç¼–ç æ–¹å¼ï¼‰ï¼Œä¸èƒ½ä¿è¯é¡ºåºè¡¨ä¸‹æ ‡è®¿é—®é‚£æ ·çš„å¿«é€Ÿï¼\n3.2.2 LPUSH&#x2F;RPUSHå¤´æ’å‘½ä»¤ï¼Œæ”¯æŒä¸€æ¬¡æ’å…¥å¤šä¸ªæ•°æ®ã€‚å¦‚æœæŒ‡å®šçš„keyä¸æ˜¯listç±»å‹åˆ™æŠ¥é”™ã€‚\nLPUSH key element [element ...]\n\næ³¨æ„ï¼Œå½“ä¸€æ¬¡æ’å…¥å¤šä¸ªæ•°æ®æ—¶ï¼Œæœ€åä¸€ä¸ªæ•°æ®ä¼šåœ¨listçš„å¤´éƒ¨ï¼ˆæŒ‰å‘½ä»¤ä¸­å‡ºç°çš„é¡ºåºï¼Œä»å·¦å¾€å³æ’å…¥ï¼‰\n127.0.0.1:6379&gt; clear127.0.0.1:6379&gt; lpush key 1 2 3 4(integer) 4127.0.0.1:6379&gt; lindex key 0&quot;4&quot;\n\nå°¾æ’ä¹Ÿæ˜¯ç›¸åŒçš„æ•ˆæœ\nRPUSH key element [element ...]\n\nä¸€æ¬¡æ€§æ’å…¥å¤šä¸ªæ•°æ®çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æœ€åä¸€ä¸ªæ•°æ®åœ¨listçš„æœ«å°¾ã€‚å¯ä»¥ç”¨lindexå‘½ä»¤æŒ‡å®š-1ä¸‹æ ‡æ¥è·å–æœ«å°¾çš„æ•°æ®ï¼ˆä»åå¾€å‰æ•°ç¬¬ä¸€ä¸ªå€¼ï¼‰\n127.0.0.1:6379&gt; rpush key 5 6 7 8(integer) 8127.0.0.1:6379&gt; lindex key -1&quot;8&quot;\n\n3.2.3 LPOP&#x2F;RPOPä»listçš„å¤´éƒ¨æˆ–è€…å°¾éƒ¨å»é™¤æ•°æ®\nLPOP key [count]RPOP key [count]\n\næ³¨æ„ï¼Œé«˜ç‰ˆæœ¬Redisæ‰æœ‰å¯é€‰çš„counté€‰é¡¹ï¼Œå½“å‰æˆ‘ä½¿ç”¨çš„Redisä»…å¯ä¸€æ¬¡popä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ã€‚\n\nStarting with Redis version 6.2.0: Added the count argument.\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; lpop key&quot;4&quot;\n\nå¦‚æœæ˜¯é«˜ç‰ˆæœ¬ï¼ŒæŒ‡å®šcountå‚æ•°åï¼Œä¼šè¿”å›ä¸€ä¸ªè¢«åˆ é™¤å…ƒç´ çš„arrayï¼Œæ•ˆæœå‚è€ƒä¸‹é¢è¿™ä¸ªå®˜ç½‘ç»™å‡ºçš„examplesã€‚\nredis&gt; RPUSH mylist &quot;one&quot; &quot;two&quot; &quot;three&quot; &quot;four&quot; &quot;five&quot;(integer) 5redis&gt; LPOP mylist&quot;one&quot;redis&gt; LPOP mylist 21) &quot;two&quot;2) &quot;three&quot;redis&gt; LRANGE mylist 0 -11) &quot;four&quot;2) &quot;five&quot;redis&gt; \n\nå¦‚æœå°è¯•æ“ä½œä¸€ä¸ªç©ºçš„listæˆ–è€…ä¸å­˜åœ¨çš„keyï¼Œè¿”å›å€¼æ˜¯nilï¼›å¦‚ä¸‹æ‰€ç¤ºï¼Œkey1çš„listä¸­åªæœ‰1ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€æ¬¡æˆåŠŸåˆ é™¤å…ƒç´ ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡æ“ä½œçš„æ—¶å€™key1æ˜¯ä¸€ä¸ªç©ºlistï¼Œæ“ä½œå¤±è´¥è¿”å›nilï¼›\n127.0.0.1:6379&gt; lpush key1 1(integer) 1127.0.0.1:6379&gt; lpop key1&quot;1&quot;127.0.0.1:6379&gt; lpop key1(nil)\n\nå½“ä¸€ä¸ªlistä¸­ä¸å­˜åœ¨å…ƒç´ çš„æ—¶å€™ï¼ŒRedisä¼šè‡ªåŠ¨å°†è¯¥listçš„keyåˆ é™¤ï¼å¦‚ä¸‹æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬æŠŠtesté”®å€¼ä¸­çš„å…ƒç´ å…¨éƒ¨åˆ é™¤æ—¶ï¼Œè¿™ä¸ªtesté”®å€¼å°±ç›´æ¥ä¸å­˜åœ¨äº†ã€‚\n127.0.0.1:6379&gt; keys *(empty array)127.0.0.1:6379&gt; lpush key 1 2(integer) 2127.0.0.1:6379&gt; lpush test 1(integer) 1127.0.0.1:6379&gt; keys *1) &quot;key&quot;2) &quot;test&quot;127.0.0.1:6379&gt; lpop test&quot;1&quot;127.0.0.1:6379&gt; keys *1) &quot;key&quot;127.0.0.1:6379&gt;\n\n\n3.2.4 LRANGEæŸ¥çœ‹listä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ ï¼Œè¿™é‡Œçš„åŒºé—´æ˜¯é—­åŒºé—´ï¼ˆæœ€ç»ˆç»“æœåŒ…å«startå’Œstopä¸‹æ ‡çš„æ•°æ®ï¼‰ï¼Œå½“startå°äºstopæ—¶è¿”å›empty arrayï¼›\nLRANGE key start stop\n\nç¤ºä¾‹å¦‚ä¸‹ï¼ŒæŒ‡å®šäº†0å’Œ-1ç­‰åŒäºè·å–listä¸­çš„å…¨éƒ¨å…ƒç´ ã€‚\n127.0.0.1:6379&gt; lrange key 0 -11) &quot;4&quot;2) &quot;3&quot;3) &quot;2&quot;4) &quot;1&quot;5) &quot;5&quot;6) &quot;6&quot;7) &quot;7&quot;8) &quot;8&quot;\n\næ³¨æ„ï¼Œæ­¤å¤„Redisæ˜¯ç”¨arrayè¿”å›çš„ä¸€ä¸ªç»“æœé›†ï¼Œåºå·æ˜¯ä»1å¼€å§‹çš„ï¼ˆå’Œlistä¸­çš„ä¸‹æ ‡ä¸ä¸€æ ·ä¸”æ— å…³ï¼‰\n3.2.4.1 è¶…å‡ºä¸‹æ ‡èŒƒå›´å¦å¤–ï¼Œä½¿ç”¨lrangeå‘½ä»¤æŒ‡å®šä¸‹æ ‡çš„æ—¶å€™ï¼Œå¦‚æœä¸‹æ ‡è¶…å‡ºèŒƒå›´ï¼Œä¹Ÿä¼šå¾—åˆ°å°½å¯èƒ½ç¬¦åˆä¸‹æ ‡ç»“æœçš„æ•°æ®ï¼Œè¿™ç‚¹å’Œlindexä¸åŒï¼\n127.0.0.1:6379&gt; lrange key 3 101) &quot;1&quot;2) &quot;5&quot;3) &quot;6&quot;4) &quot;7&quot;5) &quot;8&quot;\n\nå¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘å°è¯•è®¿é—®3åˆ°10çš„æ•°æ®ï¼Œä½†å®é™…ä¸Šlistä¸­çš„æ•°æ®ä¸‹æ ‡åˆ°7å°±ç»“æŸäº†ï¼ˆä¸€å…±å…«ä¸ªå…ƒç´ ï¼‰ï¼Œä½†Rediså¹¶æ²¡æœ‰æŠ¥é”™æˆ–è¿”å›empty arrayï¼Œè€Œæ˜¯è·å–äº†ä»ä¸‹æ ‡3å¼€å§‹ä¸€ç›´åˆ°listæœ«å°¾çš„æ•°æ®ã€‚\nåŒç†ï¼Œå½“ä½ è®¿é—®è¶…å‡ºèŒƒå›´çš„è´Ÿæ•°ä¸‹æ ‡ï¼Œä¹Ÿèƒ½å¾—åˆ°ç±»ä¼¼çš„ç»“æœã€‚\n127.0.0.1:6379&gt; lrange key -10 -11) &quot;4&quot;2) &quot;3&quot;3) &quot;2&quot;4) &quot;1&quot;5) &quot;5&quot;6) &quot;6&quot;7) &quot;7&quot;8) &quot;8&quot;\n\nå½“ç„¶ï¼Œå®é™…ä¸šåŠ¡æ—¶æ­£ç¡®ä½¿ç”¨åˆæ³•è‚¯å®šæ˜¯æ›´å¥½çš„ï¼\n3.2.5 LPUSHX&#x2F;RPUSHXå’ŒLPUSH&#x2F;RPUSHä½œç”¨ç›¸åŒï¼Œå¤šäº†ä¸€ä¸ªå¯¹keyæ˜¯å¦å­˜åœ¨çš„æ£€æµ‹ï¼Œåªæœ‰keyå­˜åœ¨æ—¶æ‰èƒ½æ’å…¥æˆåŠŸã€‚\nLPUSHX key element [element ...]RPUSHX key element [element ...]\n\nè¿”å›å€¼æ˜¯æ’å…¥æˆåŠŸçš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚æœkeyä¸å­˜åœ¨åˆ™è¿”å›0ï¼›\n3.2.6 LINSERTè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯åœ¨æŒ‡å®špivotå…ƒç´ ä½ç½®æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡å‚æ•°é€‰æ‹©æ˜¯åœ¨æŒ‡å®špivotå…ƒç´ ä¹‹å‰æ’å…¥ï¼Œè¿˜æ˜¯åœ¨æŒ‡å®špivotå…ƒç´ ä¹‹åæ’å…¥ã€‚\nLINSERT key &lt;BEFORE | AFTER&gt; pivot element\n\nè¯¥å‘½ä»¤æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼ŒNæ˜¯pivotå…ƒç´ å’Œlistå¼€å¤´çš„è·ç¦»ï¼Œè¿”å›å€¼å¦‚ä¸‹ï¼š\n\næˆåŠŸæ—¶è¿”å›æ’å…¥å…ƒç´ ålistçš„å…ƒç´ ä¸ªæ•°ï¼›\nkeyä¸å­˜åœ¨æ—¶è¿”å›0ï¼›\npivotå…ƒç´ ä¸å­˜åœ¨æ—¶è¿”å›-1ï¼Œä¸”ä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿï¼›\n\næµ‹è¯•å¦‚ä¸‹ï¼Œè¿™é‡Œé€‰æ‹©çš„å·²æœ‰å…ƒç´ æ˜¯4ï¼Œbeforeä¼šåœ¨4ä¹‹å‰æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œafterä¼šåœ¨4ä¹‹åæ’å…¥ä¸€ä¸ªå…ƒç´ ã€‚\n127.0.0.1:6379&gt; lpush key 1 2 3 4 5 6(integer) 6127.0.0.1:6379&gt; linsert key before 4 10(integer) 7127.0.0.1:6379&gt; lrange key 0 -11) &quot;6&quot;2) &quot;5&quot;3) &quot;10&quot;4) &quot;4&quot;5) &quot;3&quot;6) &quot;2&quot;7) &quot;1&quot;127.0.0.1:6379&gt; linsert key after 4 11(integer) 8127.0.0.1:6379&gt; lrange key 0 -11) &quot;6&quot;2) &quot;5&quot;3) &quot;10&quot;4) &quot;4&quot;5) &quot;11&quot;6) &quot;3&quot;7) &quot;2&quot;8) &quot;1&quot;\n\næ¸…ç©ºkeyåé‡æ–°æµ‹è¯•ï¼Œå¦‚æœlistä¸­æœ‰å¤šä¸ªç›¸åŒçš„pivotå…ƒç´ ï¼Œä¼šåœ¨å“ªé‡Œæ“ä½œå‘¢ï¼Ÿå¯ä»¥çœ‹åˆ°å®ƒä¼šåœ¨ç¬¬ä¸€ä¸ª5çš„ä½ç½®æ“ä½œï¼Œå³pivotä¼šé‡‡ç”¨ç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å…ƒç´ ã€‚\n127.0.0.1:6379&gt; lpush key 1 2 5 3 4 5 6(integer) 7127.0.0.1:6379&gt; linsert key before 5 10(integer) 8127.0.0.1:6379&gt; lrange key 0 -11) &quot;6&quot;2) &quot;10&quot;3) &quot;5&quot;4) &quot;4&quot;5) &quot;3&quot;6) &quot;5&quot;7) &quot;2&quot;8) &quot;1&quot;\n\n3.2.7 LLENè·å–listçš„é•¿åº¦ï¼Œå¦‚æœkeyä¸å­˜åœ¨è¿”å›0ï¼›\nLLEN key\n\n3.2.8 LREMåˆ é™¤listä¸­æŒ‡å®šçš„å€¼ï¼Œè¿”å›å€¼æ˜¯è¢«åˆ é™¤å…ƒç´ çš„ä¸ªæ•°\nLREM key count element\n\ncountå‚æ•°çš„å¯é€‰é¡¹å¦‚ä¸‹\n\ncountå¤§äº0ï¼šä»å‰å¾€ååˆ é™¤countä¸ªç­‰äºelementçš„å…ƒç´ ï¼›\ncountå°äº0ï¼šä»åå¾€å‰åˆ é™¤|count|ä¸ªç­‰äºelementçš„å…ƒç´ ï¼›\ncountç­‰äº0ï¼šåˆ é™¤æ‰€æœ‰ç­‰äºelementçš„å…ƒç´ ï¼›\n\næµ‹è¯•ä¸€ä¸‹ï¼Œä½¿ç”¨rpushå¯ä»¥è®©listå’Œæˆ‘ä»¬è¾“å…¥çš„é¡ºåºä¸€è‡´ã€‚è¿™é‡ŒæŒ‡å®šçš„countå¤§äº0ï¼Œåˆ é™¤çš„å…ƒç´ æ˜¯1ï¼Œæœ€ç»ˆåˆ é™¤äº†ä»å‰å¾€åæ•°çš„ä¸¤ä¸ª1ã€‚\n127.0.0.1:6379&gt; rpush key 1 2 3 4 1 2 3 4 1 2 3 4(integer) 12127.0.0.1:6379&gt; lrem key 2 1(integer) 2127.0.0.1:6379&gt; lrange key 0 -1 1) &quot;2&quot; 2) &quot;3&quot; 3) &quot;4&quot; 4) &quot;2&quot; 5) &quot;3&quot; 6) &quot;4&quot; 7) &quot;1&quot; 8) &quot;2&quot; 9) &quot;3&quot;10) &quot;4&quot;\n\nå†æŒ‡å®šcountä¸º-1ï¼Œåˆ é™¤å…ƒç´ æ˜¯3ï¼Œä¼šåˆ é™¤ä»åå¾€å‰æ•°çš„ç¬¬ä¸€ä¸ª3ï¼›\n127.0.0.1:6379&gt; lrem key -1 3(integer) 1127.0.0.1:6379&gt; lrange key 0 -11) &quot;2&quot;2) &quot;3&quot;3) &quot;4&quot;4) &quot;2&quot;5) &quot;3&quot;6) &quot;4&quot;7) &quot;1&quot;8) &quot;2&quot;9) &quot;4&quot;\n\næŒ‡å®šcountä¸º0ï¼Œåˆ é™¤å…ƒç´ æ˜¯4ï¼Œlistä¸­çš„æ‰€æœ‰4éƒ½ä¼šè¢«åˆ é™¤\n127.0.0.1:6379&gt; lrem key 0 4(integer) 3127.0.0.1:6379&gt; lrange key 0 -11) &quot;2&quot;2) &quot;3&quot;3) &quot;2&quot;4) &quot;3&quot;5) &quot;1&quot;6) &quot;2&quot;\n\n3.2.9 LTRIMåˆ é™¤listä¸­æŒ‡å®šåŒºé—´å¤–çš„å…ƒç´ ï¼ˆå³ä¿ç•™æŒ‡å®šçš„é—­åŒºé—´ï¼Œå…¶ä»–éƒ½åˆ é™¤ï¼‰\nLTRIM key start stop\n\nç¤ºä¾‹å¦‚ä¸‹\n127.0.0.1:6379&gt; rpush key 1 2 3 4 5 6(integer) 6127.0.0.1:6379&gt; ltrim key 2 3OK127.0.0.1:6379&gt; lrange key 0 -11) &quot;3&quot;2) &quot;4&quot;\n\n3.2.10 LSETè¯¥å‘½ä»¤å¯ä»¥è®¾ç½®æŸä¸ªä¸‹æ ‡çš„å…ƒç´ ï¼ˆæ›¿æ¢ï¼‰ã€‚\nLSET key index element\n\nè¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œè¿™å°±å’ŒLINDEXçš„åŸå› ä¸€æ ·ï¼Œå› ä¸ºRedisä¸æ€»æ˜¯ç”¨é¡ºåºè¡¨æ¥å­˜æ”¾listçš„æ•°æ®ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯O(1)ä¸‹æ ‡è®¿é—®ä¸€æ ·çš„æ—¶é—´å¤æ‚åº¦ã€‚\n3.2.11 BLPOP&#x2F;BRPOPï¼ˆé˜»å¡ç‰ˆæœ¬ï¼‰3.2.11.1 é˜»å¡å‘½ä»¤è¯´æ˜BLPOPå’ŒBRPOPæ˜¯LPOP&#x2F;RPOPçš„é˜»å¡ç‰ˆæœ¬ï¼Œå‘½ä»¤é‡Œé¢çš„Bå°±æ˜¯blocké˜»å¡çš„ç¼©å†™ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ¥è§¦Redisé‡Œé¢çš„â€œé˜»å¡å‘½ä»¤â€ã€‚\nä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œlistå°±å¯ä»¥å½“ä½œä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼ˆå’ŒLinuxçš„ç®¡é“ä¹Ÿæœ‰ç‚¹ç›¸ä¼¼ï¼‰äº†ï¼š\n\nå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œå°è¯•å‡ºé˜Ÿåˆ—æ—¶ä¼šé˜»å¡;\nå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå°è¯•å…¥é˜Ÿåˆ—æ—¶ä¼šé˜»å¡;\n\nå¯¹äºRedisè€Œè¨€ï¼Œlistä¸€èˆ¬ä¸å­˜åœ¨â€œæ»¡â€çš„æƒ…å†µï¼Œæˆ‘ä»¬å¤§å¤šè€ƒè™‘é˜Ÿåˆ—ä¸ºç©ºçš„æƒ…å†µã€‚è€ŒRedisçš„å•çº¿ç¨‹æ¨¡å‹ä¹Ÿä¿è¯äº†è¿™ä¸ªâ€œé˜»å¡é˜Ÿåˆ—â€æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\nå¦å¤–ï¼ŒRedisæä¾›çš„é˜»å¡å‘½ä»¤å¹¶ä¸ä¼šæŠŠè‡ªå·±ç»™é˜»å¡ï¼Œè€Œç±»ä¼¼äºé˜»å¡äº†å®¢æˆ·ç«¯ï¼Œä½¿ç”¨BLPOP&#x2F;BRPOPçš„æ—¶å€™éœ€è¦ç»™å®šä¸€ä¸ªtimeoutå‚æ•°ï¼Œåœ¨é˜»å¡ç­‰å¾…çš„æœŸé—´ï¼ŒRediså¯ä»¥æ­£å¸¸å“åº”å…¶ä»–çš„å‘½ä»¤å’Œè¯·æ±‚ã€‚\nè€Œè¢«é˜»å¡çš„å®¢æˆ·ç«¯å®é™…ä¸Šæ˜¯åœ¨ç­‰å¾…å…¶ä»–å®¢æˆ·ç«¯å¾€å¯¹åº”listä¸­æ’å…¥æ–°å…ƒç´ ã€‚\n3.2.11.2 å‘½ä»¤å‚æ•°https://redis.io/commands/blpop/\nBLPOP key [key ...] timeoutBRPOP key [key ...] timeout\n\næ³¨æ„ï¼štimeoutå•ä½ä¸ºç§’ï¼ŒRedis 6ä¸­å¯ä»¥è®¾ç½®ä¸ºå°æ•°ï¼Œè®¾ç½®ä¸º0æ—¶ä»£è¡¨æ°¸ä¹…é˜»å¡ã€‚\nè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½å¯ä»¥æŒ‡å®šå¤šä¸ªkeyï¼Œå½“æŒ‡å®šå¤šä¸ªkeyçš„æ—¶å€™ï¼ŒRedisä¼šè¿›è¡Œä»å·¦å¾€å³çš„éå†ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªkeyå¯¹åº”çš„listæœ‰å…ƒç´ ï¼Œå°±ä¼šç«‹åˆ»è¿”å›ã€‚ç›¸å½“äºä¸€æ¬¡ç­‰å¤šä¸ªlistã€‚\n\nå¦‚æœæœ‰å¤šä¸ªå®¢æˆ·ç«¯éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤æ¥ç­‰å¾…åŒä¸€ä¸ªkeyï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œå‘½ä»¤çš„å®¢æˆ·ç«¯ä¼šå¾—åˆ°å¼¹å‡ºçš„å…ƒç´ ã€‚\n\nå› ä¸ºblpop&#x2F;brlpopéƒ½æ”¯æŒå¤šä¸ªkeyå€¼ç­‰å¾…ï¼Œä¸ºäº†æ ‡å®šå¼¹å‡ºçš„é”®å±äºå“ªä¸€ä¸ªkeyï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤åœ¨è¿”å›çš„æ—¶å€™ä¼šè¿”å›arrayç±»å‹çš„key+valueï¼›\n127.0.0.1:6379&gt; blpop key 01) &quot;key&quot;2) &quot;4&quot;\n\nå½“è¶…æ—¶æ—¶é—´ç»“æŸæ—¶ï¼Œç»™å®šçš„å‡ ä¸ªkeyçš„listè¿˜æ˜¯ä¸ºç©ºï¼Œåˆ™ä¼šè¿”å›nilï¼›\n3.2.11.3 å‘½ä»¤é¢„æœŸè¡Œä¸ºå½“listä¸ä¸ºç©ºæ—¶ï¼Œlpopå’Œblpopçš„å‘½ä»¤è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚\nå½“listä¸ºç©ºï¼Œä¸”blpopæŒ‡å®šçš„timeoutæ—¶é—´ä¸­æ²¡æœ‰æ–°å…ƒç´ æ’å…¥listæ—¶ï¼š\n\nlpopä¼šç«‹é©¬å¾—åˆ°nilï¼›\nblpopä¼šåœ¨ç­‰å¾…timeoutæ—¶é—´åå¾—åˆ°nilï¼›\næ­¤æ—¶lpopå’Œbrlpopçš„å‘½ä»¤è¡Œä¸ºå°±ä¸ä¸€è‡´äº†ã€‚\n\nå½“listä¸ºç©ºï¼Œä¸”timeoutæ—¶é—´å†…æœ‰æ–°å…ƒç´ æ’å…¥\n\nå› ä¸ºåŸæœ¬listæ˜¯ä¸ºç©ºçš„ï¼Œæ‰€ä»¥lpopè¿˜æ˜¯ä¼šç«‹é©¬å¾—åˆ°nilï¼›\nblpopä¼šåœ¨æ–°å…ƒç´ æ’å…¥åè¿”å›keyå’Œæ–°å…ƒç´ ï¼›\n\n3.2.11.4 é˜»å¡æµ‹è¯•ä¸‹é¢æ˜¯ä¸€ä¸ªé˜»å¡æ—¶çš„æµ‹è¯•ï¼Œä½¿ç”¨0æ¥æŒ‡å®šæ°¸ä¹…é˜»å¡ï¼Œå½“å³ä¾§ç»ˆç«¯å›è½¦æäº¤æ’å…¥æ“ä½œæ—¶ï¼Œå·¦ä¾§çš„é˜»å¡ä¼šç«‹é©¬è¿”å›æ•°æ®ã€‚\n\n\nå°è¯•ç­‰å¾…å¤šä¸ªkeyï¼Œåªè¦æœ‰ä¸€ä¸ªkeyè¿”å›äº†æ•°æ®ï¼Œé˜»å¡çš„ç»ˆç«¯å°±ä¼šç«‹é©¬è¿”å›ã€‚è™½ç„¶è¯´è¿™ä¸ªç­‰å¾…æ—¶éå†çš„é¡ºåºæ˜¯ä»å·¦å¾€å³çš„ï¼Œä½†ç”±äºRedisæ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä¸ä¼šå‡ºç°ä¸¤ä¸ªkeyåŒæ—¶æ–°å¢æ•°æ®çš„æƒ…å†µï¼Œæ€»ä¼šæœ‰ä¸ªå…ˆåé¡ºåºï¼Œæ‰€ä»¥æœ€ç»ˆè¿˜æ˜¯ç­‰å¾…åˆ—è¡¨ä¸­ï¼Œå“ªä¸€ä¸ªkeyå…ˆæœ‰æ•°æ®æ’å…¥ï¼Œå“ªä¸€ä¸ªkeyå°±ä¼šè¢«blpopè¿”å›ã€‚\n\nå¦‚æœå¼€å§‹éå†çš„æ—¶å€™ï¼Œkeyæ²¡æœ‰æ•°æ®ï¼Œkey1å’Œkey2æœ‰æ•°æ®ï¼Œé‚£ä¹ˆRediså°±ä¼šæŒ‰ä»å·¦å¾€å³çš„åŸåˆ™ï¼Œè¿”å›key1çš„æ•°æ®ã€‚\n3.3 ç¼–ç æ–¹å¼æ—§ç‰ˆæœ¬Redisä¸­listçš„ç¼–ç æ–¹å¼æœ‰ä¸¤ä¸ª\n\nziplistï¼šä¸ºçŸ­listä¼˜åŒ–\nlinklistï¼šæ­£å¸¸çš„åŒå‘é“¾è¡¨\n\nä½†åœ¨æ–°ç‰ˆæœ¬ï¼ˆRedis 3.2ä»¥åï¼‰å¯¹listçš„æ•°æ®ç»“æ„è¿›è¡Œäº†æ”¹é€ ï¼Œä½¿ç”¨quicklistæ›¿ä»£äº†ziplist&#x2F;linklistï¼Œæ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒï¼šredisæ•°æ®ç»“æ„-å¿«é€Ÿåˆ—è¡¨ï¼›\n3.4 åº”ç”¨åœºæ™¯3.4.1 æ ˆå’Œé˜Ÿåˆ—ä½¿ç”¨listæ¥æ¨¡æ‹Ÿæ ˆæˆ–è€…é˜Ÿåˆ—çš„åŠŸèƒ½\n\né˜Ÿåˆ—ï¼šåªä½¿ç”¨rpushå’Œlpopå‘½ä»¤\næ ˆï¼šåªä½¿ç”¨lpushå’Œlpopå‘½ä»¤\n\n3.4.2 ç­çº§ä¸­æœ‰é‚£äº›å­¦ç”Ÿ&#x2F;éƒ¨é—¨ä¸­æœ‰é‚£äº›å‘˜å·¥å¯ä»¥ä½¿ç”¨listå°†ä¸€ä¸ªç­çº§idä½œä¸ºkeyï¼Œå­¦ç”Ÿidä½œä¸ºlisté‡Œé¢çš„å…ƒç´ ã€‚\nclass:1  [1,3,4]class:2  [2,5,6]\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡listæ¥å¾—çŸ¥æ¯ä¸ªç­çº§å¯¹åº”çš„å­¦ç”Ÿidç¼–å·ã€‚éƒ¨é—¨å’Œå‘˜å·¥çš„å…³ç³»ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼›\n3.4.3 æ¶ˆæ¯é˜Ÿåˆ—ä½¿ç”¨BLPOP&#x2F;BRPOPè¿™ä¸¤ä¸ªå‘½ä»¤å°±å¯ä»¥è®©listä½œä¸ºä¸€ä¸ªç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—æ¥ä½¿ç”¨ã€‚\nä»¥â€œç”Ÿäº§-æ¶ˆè´¹è€…æ¨¡å‹â€ä¸ºä¾‹ï¼Œç”Ÿäº§è€…å¾€listä¸­æ’å…¥æ•°æ®ï¼Œæ¶ˆè´¹è€…ä½¿ç”¨BLPOPç­‰å¾…æ–°æ•°æ®çš„æ’å…¥å¹¶è¿›è¡Œæ¶ˆè´¹ã€‚æ­¤æ—¶å¯ä»¥æœ‰å¤šä¸ªç”Ÿäº§è€…è¿›è¡Œpushï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªæ¶ˆè´¹è€…åŒæ—¶ä½¿ç”¨BLPOPå‘½ä»¤ç­‰å¾…listä¸­çš„æ–°æ•°æ®æ’å…¥ã€‚\nå› ä¸ºRedisä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰çš„é—®é¢˜ï¼Œæ‰€ä»¥æ–°æ•°æ®æ’å…¥ååªä¼šæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…èƒ½æ‹¿åˆ°æ•°æ®è¿›è¡Œæ¶ˆè´¹ã€‚å¹¶ä¸”å¤šä¸ªæ¶ˆè´¹è€…æ‰§è¡ŒBLPOPå‘½ä»¤æ—¶ä¹Ÿå­˜åœ¨ä¸€ä¸ªå…ˆåé¡ºåºï¼ŒæŒ‰123çš„é¡ºåºæ¥è¯´çš„è¯ï¼Œè¿™ä¸€æ¬¡æ¶ˆè´¹è€…1æ‹¿åˆ°äº†æ•°æ®ï¼Œä¸‹ä¸€æ¬¡å°±æ˜¯æ¶ˆè´¹è€…2ï¼Œå†ä¸‹ä¸€æ¬¡å°±æ˜¯æ¶ˆè´¹è€…3ï¼Œä¸ä¼šå‡ºç°æŸä¸ªæ¶ˆè´¹è€…é¥¥é¥¿çš„æƒ…å†µã€‚\n3.4.4 è§†é¢‘ä¿¡æ¯ä¼ é€’ä»¥ä¸€ä¸ªè§†é¢‘ç½‘ç«™ä¸ºä¾‹ï¼Œä½¿ç”¨listä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªè§†é¢‘å¯¹åº”å¤šä¸ªkeyçš„æ–¹å¼æ¥å¤„ç†\n\nè§†é¢‘æ•°æ®\nè§†é¢‘è¯„è®º\nè§†é¢‘æ–°å¼¹å¹•\nâ€¦\n\nå¯¹åº”çš„æ¶ˆè´¹è€…å¯ä»¥é€šè¿‡BLPOPå‘½ä»¤ä¸€æ¬¡æ€§ç­‰å¾…å¤šä¸ªkeyï¼Œè¿™æ ·ä¸ç®¡æ˜¯æ–°çš„è¯„è®ºæ¥äº†ï¼Œè¿˜æ˜¯æ–°çš„å¼¹å¹•æ¥äº†ï¼Œéƒ½èƒ½åœ¨ç¬¬ä¸€æ—¶é—´è¢«å¤„ç†ã€‚\n3.4.5 ç”¨æˆ·çš„timelineå› ä¸ºlisté‡Œé¢çš„å…ƒç´ æ˜¯æœ‰åºçš„ï¼Œå…ˆæ’å…¥çš„å§‹ç»ˆæ˜¯åœ¨listçš„å¤´éƒ¨ã€‚æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡listæ¥å®ç°ä¸€ä¸ªæ—¶é—´è½´çš„åŠŸèƒ½ã€‚\nå½“ç”¨æˆ·æ–°å»ºä¸€ä¸ªå¾®åšçš„æ—¶å€™ï¼Œå°±å°†è¿™ä¸ªå¾®åšçš„idæ’å…¥ç”¨æˆ·ç›¸å…³çš„listï¼Œè¿™æ ·ç”¨æˆ·å’Œä»–ä¸Šä¼ çš„å¾®åšå°±æœ‰äº†ä¸€ä¸ªæ—¶é—´çš„å…³ç³»ï¼Œè¿˜å¯ä»¥ç”¨lrangeå‘½ä»¤å¾ˆæ–¹ä¾¿çš„è·å–åˆ°ç”¨æˆ·çš„å‰nä¸ªå¾®åšï¼Œæˆ–æŸä¸ªåŒºé—´çš„å¾®åšã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†é¡µè·å–ç”¨æˆ·å¾®åšçš„ä¼ªä»£ç \n# å…ˆè·å–ç”¨æˆ·å‰10ä¸ªå¾®åškey_list = &quot;LRANGE user:1:blog 0 9&quot;# éå†æ¯ä¸ªkeyè·å–åˆ°å¾®åšçš„è¯¦ç»†ä¿¡æ¯for key in key_list: \tblog_info = &quot;HGETALL key&quot;\n\nè¿™é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå‡è®¾å°†å•ä¸ªåˆ†é¡µéœ€è¦æ˜¾ç¤ºçš„æ•°æ®è®¾ç½®ä¸º100ï¼Œé‚£ä¹ˆæ¯æ¬¡å¾ªç¯ä¸­å°±ä¼šå¤šæ¬¡è°ƒç”¨hashç±»å‹çš„HGETALLå‘½ä»¤ï¼Œå¯¼è‡´Rediså¯èƒ½è¢«é˜»å¡ã€‚\n\nè¿™ä¸ªé—®é¢˜å¯ä»¥ä½¿ç”¨pipelineæ¥è§£å†³ï¼Œç›¸å½“äºå°†å¤šä¸ªRediså‘½ä»¤åˆå¹¶æˆä¸€ä¸ªç½‘ç»œè¯·æ±‚æ¥æ‰§è¡Œï¼Œå¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“å¤šæ¬¡å¯¼è‡´çš„å»¶è¿Ÿã€‚åç»­å°†å­¦ä¹ ç›¸å…³å†…å®¹ã€‚\n\nå¦å¤–ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œlrangeé’ˆå¯¹listä¸¤å¤´çš„æŸ¥è¯¢æ•ˆç‡è¿˜ä¸é”™ï¼ˆå› ä¸ºå¯ä»¥ç›´æ¥ä»å¤´æˆ–ä»å°¾éƒ¨å¼€å§‹éå†ï¼‰ä½†å¯¹ä¸­é—´çš„åˆ†é¡µè·å–çš„æ•ˆç‡å°±æœ‰ç‚¹ä½äº†ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡listæ¥è§£å†³ï¼ˆæœ‰ç‚¹ç±»ä¼¼åˆ†åº“åˆ†è¡¨ï¼‰ã€‚\n4 Setsetæ˜¯ä¸€ä¸ªé›†åˆï¼Œé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯stringç±»å‹ã€‚å®ƒå’Œlistçš„åŒºåˆ«ä¸»è¦åœ¨äºï¼š\n\nsetçš„å…ƒç´ ä¸å¯ä»¥é‡å¤ï¼›\nsetçš„å…ƒç´ æ˜¯æ— åºçš„ï¼›\n\næ‰€è°“æ— éœ€ï¼Œæ˜¯ç›¸å¯¹äºlistçš„æœ‰åºè€Œè¨€çš„ï¼ˆæ³¨æ„ï¼Œlistçš„æœ‰åºæŒ‡çš„æ˜¯é¡ºåºè¡¨ä¸­å…ƒç´ çš„é¡ºåºï¼Œå¹¶ä¸æ˜¯è¯´listä¼šæŒ‰å¤§å°æ’åºï¼‰\n[1,2,3] å’Œ [1,3,2] æ˜¯ä¸¤ä¸ªä¸åŒçš„list[1,2,3] å’Œ [1,3,2] å’Œ [2,3,1] éƒ½æ˜¯ç›¸åŒçš„set\n\n4.1 ç›¸å…³å‘½ä»¤4.1.1 SADDSADDå‘½ä»¤ç”¨äºç»™setä¸­æ·»åŠ å…ƒç´ ï¼Œä¸ºäº†å’Œlistä¸­çš„å…ƒç´ ä½œåŒºåˆ†ï¼Œsetä¸­çš„å…ƒç´ è¢«ç§°ä¸ºmemberã€‚\nSADD key member [member ...]\n\nè¿”å›å€¼è¡¨ç¤ºæœ¬æ¬¡æ“ä½œæ·»åŠ æˆåŠŸäº†å‡ ä¸ªå…ƒç´ ï¼Œé‡å¤çš„å…ƒç´ åªä¼šè¢«æ·»åŠ ä¸€æ¬¡ã€‚\n127.0.0.1:6379&gt; sadd key 1 2 3 4(integer) 4127.0.0.1:6379&gt; sadd key1 1 2 3 4 5 4(integer) 5\n\n4.1.2 SMEMBERSæŸ¥çœ‹setçš„æ‰€æœ‰æˆå‘˜\nSMEMBERS key\n\n127.0.0.1:6379&gt; smembers key1) &quot;1&quot;2) &quot;2&quot;3) &quot;3&quot;4) &quot;4&quot;\n\n4.1.3 SISMEMBERæŸ¥çœ‹æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­\nSISMEMBER key member\n\nè¿”å›å€¼ä¸º1ä»£è¡¨å­˜åœ¨ï¼Œè¿”å›å€¼ä¸º0ä»£è¡¨ä¸å­˜åœ¨ã€‚\n127.0.0.1:6379&gt; sismember key 1(integer) 1127.0.0.1:6379&gt; sismember key 120(integer) 0\n\n4.1.4 SPOPè¯¥å‘½ä»¤å¯ä»¥å¼¹å‡ºsetä¸­çš„å…ƒç´ ã€‚ä½†å› ä¸ºsetæ˜¯æ— åºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æŒ‡å®šåˆ é™¤å…ƒç´ çš„ä¸ªæ•°ï¼ŒRedisä¼šéšæœºåˆ é™¤ï¼ˆå¼¹å‡ºï¼‰setä¸­çš„å…ƒç´ ï¼Œè¿™ä¸€ç‚¹åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¯´æ˜ã€‚\nSPOP key [count]\n\nè¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ \n127.0.0.1:6379&gt; spop key 21) &quot;1&quot;2) &quot;4&quot;127.0.0.1:6379&gt; spop key&quot;2&quot;\n\nè¿™ä¸ªå‘½ä»¤ä¹Ÿèƒ½ä½“ç°å‡ºsetä¸­å…ƒç´ æ— åºçš„æ¦‚å¿µã€‚æˆ‘ä»¬æŒ‰1234æ„æ¶ä¸¤ä¸ªsetï¼Œå°è¯•è¿›è¡Œspopï¼Œèƒ½å‘ç°æ¯æ¬¡åˆ é™¤çš„å…ƒç´ çš„é¡ºåºæ˜¯ä¸ä¸€æ ·çš„ï¼Œå®Œå…¨éšæœºã€‚\n127.0.0.1:6379&gt; sadd key1 1 2 3 4(integer) 4127.0.0.1:6379&gt; sadd key2 1 2 3 4(integer) 4127.0.0.1:6379&gt; spop key1&quot;1&quot;127.0.0.1:6379&gt; spop key1&quot;2&quot;127.0.0.1:6379&gt; spop key1&quot;4&quot;127.0.0.1:6379&gt; spop key1&quot;3&quot;127.0.0.1:6379&gt; spop key2&quot;2&quot;127.0.0.1:6379&gt; spop key2&quot;3&quot;127.0.0.1:6379&gt; spop key2&quot;4&quot;127.0.0.1:6379&gt; spop key2&quot;1&quot;\n\n4.1.5 SRANDMEMBERè¿™ä¸ªå‘½ä»¤å’ŒSPOPåŠŸèƒ½ç±»ä¼¼ï¼Œè¿”å›setä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºæ•°æ®ï¼Œä½†ä¸ä¼šåˆ é™¤è¯¥æ•°æ®ã€‚\nSRANDMEMBER key [count]\n\n4.1.6 SMOVEå°†æŸä¸ªå…ƒç´ ä»set1ç§»åŠ¨åˆ°set2ï¼Œæˆ–è€…è¯´æ˜¯ä»sourceä¸­åˆ é™¤ï¼Œåœ¨destinationä¸­æ–°å¢ã€‚\nå¦‚æœdestinationä¸­å·²ç»å­˜åœ¨è¯¥å…ƒç´ ï¼Œåˆ™åªä¼šåˆ é™¤sourceä¸­çš„å…ƒç´ ã€‚\nSMOVE source destination member\n\næµ‹è¯•å¦‚ä¸‹ï¼Œè¯¥å‘½ä»¤æˆåŠŸæ—¶è¿”å›1ï¼Œä¸æˆåŠŸè¿”å›0ï¼ˆsourceä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ æ—¶å¤±è´¥ï¼‰ï¼›\n127.0.0.1:6379&gt; sadd key1 1 2 3(integer) 3127.0.0.1:6379&gt; sadd key2 5 6(integer) 2127.0.0.1:6379&gt; smove key1 key2 3(integer) 1127.0.0.1:6379&gt; smembers key21) &quot;3&quot;2) &quot;5&quot;3) &quot;6&quot;127.0.0.1:6379&gt; smove key1 key2 33(integer) 0\n\n4.1.7 SREMåˆ é™¤setä¸­çš„æŒ‡å®šå…ƒç´ \nSREM key member [member ...]\n\n4.1.8 SINTER&#x2F;SINTERSTOREæ±‚ä¸¤ä¸ªé›†åˆçš„äº¤é›†ï¼Œå³è·å–åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªsetä¸­çš„å…ƒç´ ã€‚\nSINTER key [key ...]\n\nè¿™ä¸ªå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(M*N)ï¼Œå…¶ä¸­Mæ˜¯æœ€å°çš„é›†åˆå…ƒç´ ä¸ªæ•°ï¼ŒNæ˜¯æœ€å¤§çš„é›†åˆå…ƒç´ ä¸ªæ•°ã€‚\n127.0.0.1:6379&gt; sadd key1 1 2 3 4(integer) 4127.0.0.1:6379&gt; sadd key2 3 4 5 6(integer) 4127.0.0.1:6379&gt; sinter key1 key21) &quot;3&quot;2) &quot;4&quot;\n\nå¦å¤–ä¸€ä¸ªå‘½ä»¤æ˜¯SINTERSTOREï¼Œå®ƒå¤šäº†ä¸€ä¸ªå­˜å‚¨åŠŸèƒ½ï¼Œæ±‚äº†äº¤é›†åï¼Œå­˜å‚¨åˆ°destinationä¸­ã€‚\nSINTERSTORE destination key [key ...]\n\nè¿™ä¸ªå‘½ä»¤çš„è¿”å›å€¼æ˜¯æœ€ç»ˆäº¤é›†çš„å…ƒç´ ä¸ªæ•°ã€‚\n127.0.0.1:6379&gt; sinterstore key3 key1 key2(integer) 2\n\n4.1.9 SUNION&#x2F;SUNIONSTOREæ±‚ä¸¤ä¸ªé›†åˆçš„å¹¶é›†\nSUNION key [key ...]SUNIONSTROE destination key [key ...]\n\nåŠŸèƒ½å’Œä¸Šé¢çš„å‘½ä»¤ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†\n4.1.10 SDIFF&#x2F;SDIFFSTOREæ±‚é›†åˆçš„å·®é›†ï¼Œå³å­˜åœ¨äºç¬¬ä¸€ä¸ªkeyï¼Œä½†æ˜¯ä¸åœ¨ç¬¬äºŒä¸ªkeyä¸­çš„å€¼\nSDIFF key [key ...]SDIFFSTROE destination key [key ...]\n\nå®æµ‹å¦‚ä¸‹\n127.0.0.1:6379&gt; sadd key1 1 2 3 4(integer) 4127.0.0.1:6379&gt; sadd key2 3 4 5 6(integer) 4127.0.0.1:6379&gt; sdiff key1 key21) &quot;1&quot;2) &quot;2&quot;127.0.0.1:6379&gt; sdiff key2 key11) &quot;5&quot;2) &quot;6&quot;\n\nå¦‚æœkeyçš„æ•°é‡ä¸æ­¢ä¸¤ä¸ªï¼Œä½ å¯ä»¥ç†è§£ä¸ºRedisä¼šè¿›è¡Œä¾æ¬¡è®¡ç®—ã€‚å³å…ˆè®¡ç®—key1å’Œkey2çš„å·®é›†ï¼Œå†å°†ç»“æœå’Œkey3è¿›è¡Œè®¡ç®—ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œkey1å’Œkey2çš„å·®é›†åŒ…å«1å’Œ2ï¼Œä½†æ˜¯key3ä¸­æœ‰1ï¼Œæ‰€ä»¥æœ€ç»ˆçš„å·®é›†ç»“æœå°±åªæœ‰2äº†ã€‚\n127.0.0.1:6379&gt; sadd key3 1 3 7 8(integer) 4127.0.0.1:6379&gt; sdiff key1 key2 key31) &quot;2&quot;\n\n4.1.11 SCARDè·å–setä¸­å…ƒç´ çš„ä¸ªæ•°\nSCARD key\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; sadd key1 1 2 3 4(integer) 4127.0.0.1:6379&gt; scard key1(integer) 4\n\n4.2 ç¼–ç æ–¹å¼setæœ‰ä¸¤ç§ç¼–ç æ–¹å¼\n\nintsetï¼šå¦‚æœsetä¸­å…¨éƒ½æ˜¯æ•´æ•°ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡set-max-intset-entriesæ¥é…ç½®å…ƒç´ ä¸ªæ•°ï¼Œè¶…è¿‡è¿™ä¸ªæ•°é‡çš„ä¼šé‡‡ç”¨hashtableã€‚\nhashtableï¼šå½“setä¸­æœ‰å…¶ä»–éæ•°å­—ç±»å‹æ—¶ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼ã€‚\n\n127.0.0.1:6379&gt; sadd key 1 2 3 4(integer) 4127.0.0.1:6379&gt; object encoding key&quot;intset&quot;127.0.0.1:6379&gt; sadd key 1afb(integer) 1127.0.0.1:6379&gt; object encoding key&quot;hashtable&quot;\n\n4.3 åº”ç”¨åœºæ™¯4.3.1 ä¿å­˜æ ‡ç­¾ä¸€ä¸ªè§†é¢‘ä¼šæœ‰ç›¸å…³æ ‡ç­¾ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿä¼šæœ‰ç›¸å…³æ ‡ç­¾ï¼Œsetç±»å‹æœ‰å…ƒç´ ä¸èƒ½é‡å¤çš„ç‰¹æ€§ï¼Œæ¯”è¾ƒé€‚åˆç”¨äºä¿å­˜æŸä¸ªå¯¹è±¡çš„æ ‡ç­¾ã€‚\næ¯”å¦‚æŸä¸ªç”¨æˆ·çš„å…´è¶£çˆ±å¥½ï¼Œè¿™äº›çˆ±å¥½èƒ½å¸®åŠ©åˆ»ç”»ä¸€ä¸ªç”¨æˆ·ç”»åƒï¼Œä»¥ä¾¿æ›´åŠ ç²¾ç¡®çš„æ¨é€ç”¨æˆ·å–œæ¬¢çš„ä¸œè¥¿ï¼ˆæˆ–åˆ™å¹¿å‘Šï¼‰\n4.3.2 å…¬å…±å¥½å‹é€šè¿‡é›†åˆæ±‚äº¤é›†ï¼Œèƒ½å¾ˆå®¹æ˜“å¾—åˆ°ä¸¤ä¸ªç”¨æˆ·çš„å…¬å…±å¥½å‹ï¼Œæˆ–è€…å…±åŒå…³æ³¨äº†xxxã€‚\n4.3.3 è®°å½•ç«™ç‚¹PV&#x2F;UVç«™ç‚¹PVï¼ˆPage Viewï¼‰æŒ‡çš„æ˜¯ç«™ç‚¹çš„è®¿é—®é‡ï¼Œæ¯æ¬¡ç‚¹å‡»ä¸€ä¸ªé¡µé¢ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªPVã€‚\nç«™ç‚¹UVï¼ˆUser Viewï¼‰æŒ‡çš„æ˜¯ç«™ç‚¹çš„ç”¨æˆ·è®¿é—®é‡ï¼Œæ¯ä¸ªç”¨æˆ·åªä¼šè®°å½•ä¸€æ¬¡ã€‚\nå› ä¸ºPVå’ŒUVçš„è®°å½•å†…å®¹ä¸åŒï¼Œåœ¨è®°å½•çš„æ—¶å€™éœ€è¦è¿›è¡Œä¸€å®šçš„å»é‡ã€‚æ¯”å¦‚UVéœ€è¦æŒ‰ç”¨æˆ·å»é‡ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½è®°å½•ä¸€æ¬¡ã€‚è¿™æ—¶å€™ç”¨setæ¥å»é‡å°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼Œå½“æœ‰æ–°ç”¨æˆ·è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œå°±å°†è¿™ä¸ªç”¨æˆ·çš„idæ’å…¥åˆ°å¯¹åº”keyçš„setä¸­ï¼Œæœ€ç»ˆè®°å½•UVå°±è·å–è¿™ä¸ªsetçš„é•¿åº¦å°±è¡Œã€‚\n5.ZsetZsetæ˜¯æœ‰åºçš„é›†åˆï¼Œåœ¨é›†åˆçš„åŸºç¡€ä¸Šï¼Œå¯¹å†…å®¹ä¼šè¿›è¡Œå‡åºæ’åºã€‚\nZsetä¸­çš„memberåŒæ—¶å¼•å…¥äº†ä¸€ä¸ªscoreåˆ†æ•°çš„å±æ€§ï¼Œæ¯ä¸ªmemberéƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„åˆ†æ•°ï¼Œæ’åºçš„æ—¶å€™å°±æ˜¯æŒ‰åˆ†æ•°çš„å¤§å°æ¥è¿›è¡Œå‡åºæ’åºçš„ã€‚Zsetä¸­çš„memberå¿…é¡»å”¯ä¸€ï¼Œä½†scoreåˆ†æ•°å¯ä»¥é‡å¤ã€‚\næ³¨æ„ï¼Œmember&#x2F;scoreä¹‹é—´çš„å…³ç³»å¹¶éé”®å€¼å¯¹ï¼Œscoreåªæ˜¯memberçš„ä¸€ä¸ªç”¨äºæ’åºçš„å±æ€§å€¼ï¼åœ¨Zsetä¸­æ—¢å¯ä»¥é€šè¿‡memberæŸ¥è¯¢scoreï¼Œä¹Ÿå¯ä»¥é€šè¿‡scoreæ¥æŸ¥è¯¢memberã€‚\nZsetä¸­çš„åˆ†æ•°å¯ä»¥æ˜¯å°æ•°ã€‚å¦‚æœå¤šä¸ªå…ƒç´ æœ‰ç›¸åŒçš„åˆ†æ•°ï¼Œåˆ™æŒ‰å…ƒç´ çš„å­—å…¸åºæ’åºã€‚\n5.1 ç›¸å…³å‘½ä»¤5.1.1 ZADDZADD key [NX | XX] [GT | LT] [CH] [INCR] score member [score member  ...]\n\nZADDå‘½ä»¤æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œå…¶ä¸­ä¸€äº›é€‰é¡¹ä¹‹å‰å·²ç»è§è¿‡äº†\n\nXXï¼šåªæœ‰memberå­˜åœ¨çš„æ—¶å€™ï¼Œæ‰ä¼šæ›´æ–°åˆ†æ•°ï¼›\nNXï¼šæ’å…¥æ–°çš„memberï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¸åšä»»ä½•å¤„ç†ï¼›\nLTï¼šåªæœ‰æ–°çš„scoreå°äºå½“å‰scoreæ—¶æ‰ä¼šæ›´æ–°ï¼Œ ä¸ä¼šé˜»æ­¢æ·»åŠ æ–°å…ƒç´ ï¼ˆä¸å­˜åœ¨çš„memberæ­£å¸¸æ·»åŠ ï¼‰\nGTï¼šåŒä¸Šï¼Œä½†åªæœ‰æ–°çš„scoreå¤§äºå½“å‰scoreæ—¶æ‰ä¼šæ›´æ–°ï¼›\nCHï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒZADDè¿”å›æ–°å…ƒç´ è¢«æ·»åŠ çš„ä¸ªæ•°ã€‚æ·»åŠ CHé€‰é¡¹åï¼Œä¼šè¿”å›æ–°å…ƒç´ è¢«æ·»åŠ çš„ä¸ªæ•°+è¢«ä¿®æ”¹scoreçš„å…ƒç´ ä¸ªæ•°ã€‚\nINCRï¼šå½“æŒ‡å®šæ­¤é€‰é¡¹æ—¶ï¼ŒZADDçš„ä½œç”¨ç±»ä¼¼äºZINCRBYã€‚åœ¨æ­¤æ¨¡å¼ä¸‹åªèƒ½æŒ‡å®šä¸€ä¸ªscore-elementå¯¹ã€‚\n\nè¿™ä¸ªå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦O(log(N))ï¼ŒNæ˜¯Zsetä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚å› ä¸ºzsetä½œä¸ºæœ‰åºçš„ç»“æ„ï¼Œéœ€è¦å°†æ–°æ’å…¥çš„å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œè¿™ä¸ªæ“ä½œä¼šæœ‰è€—æ—¶ã€‚\næ’å…¥æ•°æ®åæŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®æ˜¯æŒ‰æˆ‘ä»¬é¢„å…ˆè®¾ç½®æ˜¯åˆ†æ•°è¿›è¡Œå‡åºæ’åºçš„ã€‚\n127.0.0.1:6379&gt; zadd key 98 lisi 97 zhangsan 99 wangwu(integer) 3127.0.0.1:6379&gt; zrange key 0 -11) &quot;zhangsan&quot;2) &quot;lisi&quot;3) &quot;wangwu&quot;\n\næµ‹è¯•NX&#x2F;XXé€‰é¡¹ï¼Œå¦‚æœä¸å¸¦ä»»ä½•é€‰é¡¹ï¼Œåˆ™ä¼šæ›´æ–°å·²æœ‰memberçš„åˆ†æ•°ï¼ˆåŸæœ¬lisiçš„åˆ†æ•°æ˜¯98ï¼‰ï¼Œå¸¦äº†NXé€‰é¡¹åï¼Œlisiçš„åˆ†æ•°æ²¡æœ‰è¢«ä¿®æ”¹ã€‚\n127.0.0.1:6379&gt; zadd key 99 lisi(integer) 0127.0.0.1:6379&gt;  zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;lisi&quot;4) &quot;99&quot;5) &quot;wangwu&quot;6) &quot;99&quot;127.0.0.1:6379&gt; zadd key nx 100 lisi(integer) 0127.0.0.1:6379&gt;  zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;lisi&quot;4) &quot;99&quot;5) &quot;wangwu&quot;6) &quot;99&quot;\n\nå¸¦xxé€‰é¡¹ï¼Œlisiçš„åˆ†æ•°è¢«ä¿®æ”¹æˆåŠŸ\n127.0.0.1:6379&gt; zadd key xx 100 lisi(integer) 0127.0.0.1:6379&gt; zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;wangwu&quot;4) &quot;99&quot;5) &quot;lisi&quot;6) &quot;100&quot;\n\nå¸¦xxé€‰é¡¹æ“ä½œä¸€ä¸ªä¸å­˜åœ¨çš„memberï¼Œæ²¡æœ‰è¢«æ–°å¢\n127.0.0.1:6379&gt; zadd key xx 100 kk(integer) 0127.0.0.1:6379&gt;  zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;wangwu&quot;4) &quot;99&quot;5) &quot;lisi&quot;6) &quot;100&quot;\n\nchä¼šåœ¨è¿”å›å€¼ä¸­å¸¦ä¸Šè¢«ä¿®æ”¹åˆ†æ•°çš„ä¸ªæ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œkkå·²ç»å­˜åœ¨ï¼Œå°†åˆ†æ•°ä¿®æ”¹ä¸º110ï¼Œå¸¦ché€‰é¡¹ï¼Œè¿”å›å€¼ä¸º1ï¼›å†æ¬¡ä¿®æ”¹kkçš„åˆ†æ•°ï¼Œä¸å¸¦ché€‰é¡¹ï¼Œè¿”å›å€¼ä¸º0ï¼Œä½†kkçš„åˆ†æ•°å·²ç»è¢«ä¿®æ”¹ä¸º112äº†ã€‚\n127.0.0.1:6379&gt; zadd key xx ch 110 kk(integer) 1127.0.0.1:6379&gt; zadd key xx 112 kk(integer) 0\n\n 9) &quot;kk&quot;10) &quot;112&quot;\n\n5.1.2 ZRANGEZRANGEç±»ä¼¼äºLRANGEï¼Œå¯ä»¥ç”¨ä¸‹æ ‡çš„æ–¹å¼æ¥æŸ¥çœ‹Zsetä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚å› ä¸ºZsetä¸­çš„å…ƒç´ æœ‰åºï¼Œæ‰€ä»¥å®ƒå­˜åœ¨â€œä¸‹æ ‡â€çš„æ¦‚å¿µã€‚\nZRANGE key start stop [BYSCORE | BYLEX] [REV] [LIMIT offset count]  [WITHSCORES]\n\nè¿™ä¸ªå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log(N)+M)ï¼Œå…¶ä¸­Næ˜¯ZSETä¸­çš„å…ƒç´ ä¸ªæ•°ï¼ŒMæ˜¯éœ€è¦è¿”å›çš„å…ƒç´ ä¸ªæ•°ã€‚\n127.0.0.1:6379&gt; zadd key 98 lisi 97 zhangsan 99 wangwu(integer) 3127.0.0.1:6379&gt; zrange key 0 -11) &quot;zhangsan&quot;2) &quot;lisi&quot;3) &quot;wangwu&quot;\n\nä½¿ç”¨WITHSCORESé€‰é¡¹ï¼Œå¯ä»¥è®©å…ƒç´ å’Œåˆ†æ•°ä¸€èµ·è¿”å›\n127.0.0.1:6379&gt; zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;lisi&quot;4) &quot;98&quot;5) &quot;wangwu&quot;6) &quot;99&quot;\n\n5.1.3 ZCARDè·å–Zsetä¸­å…ƒç´ çš„ä¸ªæ•°ï¼ˆè¢«ç§°ä¸ºzsetçš„åŸºæ•°ï¼‰\nZCARD key\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt;  zrange key 0 -11) &quot;zhangsan&quot;2) &quot;wangwu&quot;3) &quot;kk1&quot;4) &quot;lisi&quot;5) &quot;kk&quot;127.0.0.1:6379&gt; zcard key(integer) 5\n\n5.1.4 ZCOUNTè¿”å›åˆ†æ•°åœ¨min&#x2F;maxä¹‹é—´çš„å…ƒç´ ä¸ªæ•°ï¼Œé»˜è®¤æ˜¯é—­åŒºé—´ï¼ŒåŒ…å«minå’Œmaxçš„å€¼ã€‚è¯¥å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(log(N))ï¼ŒNæ˜¯Zsetä¸­å…ƒç´ ä¸ªæ•°ã€‚\nzsetåœ¨å­˜æ”¾ä¸€ä¸ªmemberçš„æ—¶å€™ä¼šä¿å­˜å®ƒçš„æ¬¡åºï¼ˆå¯ä»¥ç®€å•ç†è§£ä¸ºä¸‹æ ‡ï¼‰æ‰€ä»¥è¿™ä¸ªå‘½ä»¤ä¸æ˜¯é€šè¿‡minåˆ°maxçš„éå†æ¥è·å–å…ƒç´ çš„ï¼Œè€Œæ˜¯å…ˆæ‰¾åˆ°minå’Œmaxè¿™ä¸¤ä¸ªè¾¹ç•Œå€¼çš„memberï¼Œå†è·å–åˆ°å®ƒä»¬çš„å…ƒç´ æ¬¡åºï¼Œæœ€ç»ˆå°†æ¬¡åºç›¸å‡ï¼Œå°±å¾—åˆ°äº†å…ƒç´ ä¸ªæ•°ã€‚\nZCOUNT key min max\n\nå¯ä»¥ä½¿ç”¨æ‹¬å·æ¥è¡¨ç¤ºå¼€åŒºé—´ï¼Œæ³¨æ„æ‹¬å·éƒ½æ˜¯åŠ åœ¨å‰é¢çš„ã€‚\nZCOUNT key (min (max\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; zrange key 0 -1 withscores 1) &quot;zhangsan&quot; 2) &quot;97&quot; 3) &quot;wangwu&quot; 4) &quot;99&quot; 5) &quot;kk1&quot; 6) &quot;100&quot; 7) &quot;lisi&quot; 8) &quot;100&quot; 9) &quot;kk&quot;10) &quot;112&quot;127.0.0.1:6379&gt; zcount key 97 100(integer) 4127.0.0.1:6379&gt; zcount key 97 (100(integer) 2\n\nå› ä¸ºzsetä¸­çš„scoreå¯ä»¥ä½¿ç”¨æµ®ç‚¹æ•°ï¼Œåœ¨Redisä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æµ®ç‚¹æ•°ï¼Œç”¨äºè¡¨ç¤ºæ­£æ— ç©·å¤§infå’Œè´Ÿæ— ç©·å¤§-infï¼Œæ‰€ä»¥åœ¨ZCOUNTçš„min&#x2F;maxä¸­ä¹Ÿå¯ä»¥ç”¨è¿™ä¸¤ä¸ªç‰¹æ®Šçš„æµ®ç‚¹æ•°æ¥ç­›é€‰\n127.0.0.1:6379&gt; zcount key -inf 100(integer) 4\n\n5.1.5 ZREVRANCEè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨å’ŒZRANGEç±»ä¼¼ï¼Œä½†è¿”å›çš„æ•°æ®æ˜¯é™åºçš„\nZREVRANGE key start stop [WITHSCORES]\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; ZREVRANGE key 0 -1 WITHSCORES 1) &quot;kk&quot; 2) &quot;112&quot; 3) &quot;lisi&quot; 4) &quot;100&quot; 5) &quot;kk1&quot; 6) &quot;100&quot; 7) &quot;wangwu&quot; 8) &quot;99&quot; 9) &quot;zhangsan&quot;\n\næ³¨æ„ï¼Œè¯¥å‘½ä»¤åœ¨Redis6.2ä¸­å·²ç»**å¼ƒç”¨(deprecated)**ï¼Œåœ¨ZRANGEä¸­ä½¿ç”¨REVé€‰é¡¹èƒ½å®ç°å®ƒçš„åŠŸèƒ½ã€‚\n\nAs of Redis version 6.2.0, this command is regarded as deprecated.\nIt can be replaced by ZRANGE with the REV argument when migrating or writing new code.\n\n5.1.6 ZPOPMAX&#x2F;ZPOPMINåˆ é™¤å¹¶è¿”å›Zsetä¸­åˆ†æ•°æœ€é«˜çš„countä¸ªå…ƒç´ \nZPOPMAX key [count]ZPOPMIN key [count]\n\nè¿™ä¸ªå‘½ä»¤å¯ä»¥ç”¨æ¥è§£å†³TopKé—®é¢˜ï¼Œå‡è®¾æœ‰ä¸ª10å…ƒç´ çš„zsetï¼Œæƒ³è·å¾—scoreåœ¨å‰3çš„å…ƒç´ çš„ä¸€ä¸ªsetï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼\n\nZPOPMAXå°†é«˜ä¸‰ä½å¼¹å‡ºå¹¶å­˜æ”¾åˆ°å¦å¤–ä¸€ä¸ªzsetä¸­ï¼›\nZPOPMINå°†ä½ä¸ƒä½å¼¹å‡ºï¼Œæ­¤æ—¶å‰©ä¸‹çš„å°±æ˜¯é«˜ä¸‰ä½ï¼›\n\næµ‹è¯•å¦‚ä¸‹ï¼Œpopçš„æ—¶å€™ä¼šå°†memberå’Œscoreä¸€èµ·å¼¹å‡ºã€‚\n127.0.0.1:6379&gt; zpopmax key 21) &quot;kk&quot;2) &quot;112&quot;3) &quot;lisi&quot;4) &quot;100&quot;\n\n5.1.7 BZPOPMAXè¿™ä¸ªå‘½ä»¤æ˜¯ZPOPMAXçš„é˜»å¡ç‰ˆæœ¬ï¼Œå½“keyä¸­æ²¡æœ‰å…ƒç´ æ—¶ä¼šé˜»å¡\nBZPOPMAX key [key ...] timeout\n\nè¿™ä¸ªå’ŒBLPOP&#x2F;BRPOPçš„æ•ˆæœä¸€æ ·ï¼Œä¸åšæ¼”ç¤ºäº†ã€‚\n5.1.8 ZRANKè·å–ä¸€ä¸ªZsetä¸­æŸä¸ªæˆå‘˜çš„æ’åï¼ˆè¿”å›çš„æ˜¯æ’ååºå·ï¼Œä»¥0å¼€å§‹ï¼‰æ—¶é—´å¤æ‚åº¦O(log(N))ï¼ŒNæ˜¯Zsetä¸­å…ƒç´ ä¸ªæ•°ã€‚\nZRANK key member [WITHSCORE]\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; zrange key 0 -11) &quot;zhangsan&quot;2) &quot;wangwu&quot;3) &quot;kk1&quot;127.0.0.1:6379&gt; zrank key wangwu(integer) 1\n\nredis7.2åï¼Œæ·»åŠ withscoreé€‰é¡¹ï¼Œä¼šåŒæ—¶è¿”å›è¿™ä¸ªæˆå‘˜çš„åˆ†æ•°\n5.1.9 ZREVRANKè¿”å›æŸä¸ªæˆå‘˜çš„æ’åï¼Œé™åºæ’åºã€‚æ—¶é—´å¤æ‚åº¦O(log(N))ï¼ŒNæ˜¯Zsetä¸­å…ƒç´ ä¸ªæ•°ã€‚\nZREVRANK key member [WITHSCORE]\n\nredis7.2åï¼Œæ·»åŠ withscoreé€‰é¡¹ï¼Œä¼šåŒæ—¶è¿”å›è¿™ä¸ªæˆå‘˜çš„åˆ†æ•°\n127.0.0.1:6379&gt; zrange key 0 -11) &quot;zhangsan&quot;2) &quot;wangwu&quot;3) &quot;kk1&quot;127.0.0.1:6379&gt; zrevrank key wangwu(integer) 1127.0.0.1:6379&gt; zrevrank key kk1(integer) 0127.0.0.1:6379&gt; zrevrank key zhangsan(integer) 2\n\n5.1.10 ZSCOREè¿”å›zsetä¸­æŸä¸ªæˆå‘˜çš„åˆ†æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼›\nZSCORE key member\n\næµ‹è¯•å¦‚ä¸‹\n127.0.0.1:6379&gt; zrange key 0 -1 withscores1) &quot;zhangsan&quot;2) &quot;97&quot;3) &quot;wangwu&quot;4) &quot;99&quot;5) &quot;kk1&quot;6) &quot;100&quot;127.0.0.1:6379&gt; zscore key kk1&quot;100&quot;\n\n5.1.11 ZREMåˆ é™¤æŸä¸ªzsetä¸­çš„memberï¼Œå¯ä»¥ä¸€æ¬¡æ€§ä¼ å…¥å¤šä¸ªã€‚\nZREM key member [member ...]\n\næ—¶é—´å¤æ‚åº¦O(M*log(N))ï¼ŒNæ˜¯zsetä¸­å…ƒç´ ä¸ªæ•°ï¼ŒMæ˜¯éœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚\n5.1.12 ZREMRANGEBYRANKåˆ é™¤æŸä¸ªåŒºé—´çš„å…ƒç´ ï¼Œå’ŒZRANGEçš„start&#x2F;stopç›¸åŒ\nZREMRANGEBYRANK key start stop\n\næ—¶é—´å¤æ‚åº¦æ˜¯O(log(N)+M) ï¼ŒNæ˜¯zsetä¸­å…ƒç´ ä¸ªæ•°ï¼ŒMæ˜¯åŒºé—´å†…çš„å…ƒç´ ä¸ªæ•°ã€‚\n127.0.0.1:6379&gt; zadd key 1 one 2 two 3 three(integer) 3127.0.0.1:6379&gt; ZREMRANGEBYRANK key 0 1(integer) 2127.0.0.1:6379&gt;  zrange key 0 -11) &quot;three&quot;\n\n5.1.13 ZREMRANGEBYSCOREåˆ é™¤æŸä¸ªåŒºé—´çš„å…ƒç´ ï¼Œä½¿ç”¨çš„æ˜¯min&#x2F;maxåˆ†æ•°åŒºé—´ï¼Œé»˜è®¤é—­åŒºé—´ï¼Œä¹Ÿå¯ä»¥ç”¨å·¦æ‹¬å·è¡¨ç¤ºå¼€åŒºé—´ã€‚\nZREMRANGEBYSCORE key min maxZREMRANGEBYSCORE key (min (max\n\næ—¶é—´å¤æ‚åº¦æ˜¯O(log(N)+M) ï¼ŒNæ˜¯zsetä¸­å…ƒç´ ä¸ªæ•°ï¼ŒMæ˜¯åŒºé—´å†…çš„å…ƒç´ ä¸ªæ•°ã€‚ \n5.1.14 ZINCRBYç»™æŸä¸ªzsetä¸­çš„å…ƒç´ å¢åŠ åˆ†æ•°ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™å’Œzaddçš„ä½œç”¨ç›¸åŒã€‚\nZINCRBY key increment member\n\næ—¶é—´å¤æ‚åº¦O(log(N))ï¼ŒNä¸ºzsetä¸­å…ƒç´ ä¸ªæ•°ã€‚\n5.1.15 ZUNIONSTOREè¿™ä¸ªå‘½ä»¤ä¼šæ±‚ä¸¤ä¸ªzsetçš„å¹¶é›†å¹¶å­˜æ”¾åˆ°çš„destinationä¸­ã€‚\næ—¶é—´å¤æ‚åº¦ï¼šO(N)+O(M log(M))ï¼ŒNæ˜¯æ‰€æœ‰inputå‚æ•°zsetä¸­å…ƒç´ çš„ä¸ªæ•°æ€»å’Œï¼ŒMæ˜¯ç»“æœé›†ä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚\nZUNIONSTORE destination numkeys key [key ...] [WEIGHTS weight  [weight ...]] [AGGREGATE &lt;SUM | MIN | MAX&gt;]\n\nå‘½ä»¤å‚æ•°\n\ndestinationï¼šç›®æ ‡zsetçš„keyï¼Œå¦‚æœè¿™ä¸ªkeyå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šè¢«è¦†ç›–ã€‚\nnumkeysï¼šè¾“å…¥çš„keyçš„ä¸ªæ•°\nWEIGHTSï¼šç»™æ¯ä¸ªå…¥å‚çš„keyè®¾å®šçš„ä¹˜æ³•ç³»æ•°ï¼Œå½“æ±‚äº¤é›†çš„æ—¶å€™ï¼Œä¼šå°†æœ€ç»ˆç»“æœçš„åˆ†å€¼ä¹˜ä»¥è¿™ä¸ªä¹˜æ³•ç³»æ•°å†äº¤ä»˜ã€‚ä¸æä¾›çš„æ—¶å€™é»˜è®¤ä¸º1ï¼›\nAGGREGATEï¼šè¯¥é€‰é¡¹å¯ä»¥æŒ‡å®šå¹¶é›†è¿ç®—ç»“æœçš„èšåˆæ–¹å¼ã€‚è¯¥é€‰é¡¹é»˜è®¤å€¼ä¸º SUMï¼Œå³å°†è¾“å…¥ä¸­æ‰€æœ‰å­˜åœ¨è¯¥å…ƒç´ çš„é›†åˆä¸­å¯¹åº”çš„åˆ†å€¼å…¨éƒ¨åŠ ä¸€èµ·ã€‚å½“é€‰é¡¹è¢«è®¾ç½®ä¸º MIN æˆ– MAX ä»»æ„å€¼æ—¶ï¼Œç»“æœé›†åˆå°†ä¿å­˜è¾“å…¥ä¸­æ‰€æœ‰å­˜åœ¨è¯¥å…ƒç´ çš„é›†åˆä¸­å¯¹åº”çš„åˆ†å€¼çš„æœ€å°æˆ–æœ€å¤§å€¼ã€‚\n\næµ‹è¯•å¦‚ä¸‹ï¼Œå…ˆä¸ä½¿ç”¨weightsï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªzsetä¸­ï¼Œç›¸åŒçš„å…ƒç´ çš„åˆ†æ•°ä¼šç›¸åŠ ï¼Œoneçš„åˆ†å€¼å˜æˆäº†2ï¼Œtwoçš„åˆ†å€¼å˜æˆäº†4ï¼›å¦‚æœåªæœ‰ä¸€ä¸ªzsetå­˜åœ¨çš„å…ƒç´ åˆ™ä¿æŒä¸å˜ã€‚\n127.0.0.1:6379&gt; zadd zset1 1 &quot;one&quot; 2 &quot;two&quot;(integer) 2127.0.0.1:6379&gt; zadd zset2 1 &quot;one&quot; 2 &quot;two&quot; 3 &quot;three&quot;(integer) 3127.0.0.1:6379&gt; zunionstore out 2 zset1 zset2(integer) 3127.0.0.1:6379&gt; zrange out 0 -1 withscores1) &quot;one&quot;2) &quot;2&quot;3) &quot;three&quot;4) &quot;3&quot;5) &quot;two&quot;6) &quot;4&quot;\n\nä½¿ç”¨weightæä¾›ä¹˜æ³•ç³»æ•°ï¼Œzset1ä¸­çš„åˆ†å€¼è¢«ä¹˜ä»¥2ï¼Œzset2ä¸­çš„åˆ†å€¼è¢«ä¹˜ä»¥3ï¼Œç„¶åäºŒè€…å†ç›¸åŠ èµ·æ¥ã€‚\n127.0.0.1:6379&gt; zunionstore out 2 zset1 zset2 weights 2 3(integer) 3127.0.0.1:6379&gt; zrange out 0 -1 withscores1) &quot;one&quot;2) &quot;5&quot;3) &quot;three&quot;4) &quot;9&quot;5) &quot;two&quot;6) &quot;10&quot;\n\nå¦‚æœä¿®æ”¹AGGREGATEç­–ç•¥ï¼Œç»“æœåˆä¸åŒï¼Œé»˜è®¤sumæ˜¯ç›¸åŠ ï¼›æŒ‡å®šminæ˜¯å½“ä¸¤ä¸ªzsetéƒ½æœ‰æŸä¸ªå‚æ•°çš„æ—¶å€™ï¼Œé€‰ç”¨åˆ†æ•°è¾ƒå°çš„å“ªä¸€ä¸ªã€‚æ¯”å¦‚zset1ä¸­ä¹˜æ³•ç³»æ•°æ˜¯2ï¼Œæ‰€ä»¥one&#x2F;twoçš„åˆ†æ•°å°äºzset2ä¸­çš„åˆ†æ•°ï¼Œæœ€ç»ˆçš„é›†åˆoutä¸­å­˜æ”¾çš„å°±æ˜¯zset1ä¸­çš„å…ƒç´ åˆ†æ•°ã€‚\n127.0.0.1:6379&gt; zunionstore out 2 zset1 zset2 weights 2 3 aggregate min(integer) 3127.0.0.1:6379&gt; zrange out 0 -1 withscores1) &quot;one&quot;2) &quot;2&quot;3) &quot;two&quot;4) &quot;4&quot;5) &quot;three&quot;6) &quot;9&quot;\n\nä½¿ç”¨AGGREGATE MAXå­˜æ”¾çš„å°±ä¼šæ˜¯zset2ä¸­çš„åˆ†æ•°äº†ã€‚\n127.0.0.1:6379&gt; zunionstore out 2 zset1 zset2 weights 2 3 aggregate max(integer) 3127.0.0.1:6379&gt; zrange out 0 -1 withscores1) &quot;one&quot;2) &quot;3&quot;3) &quot;two&quot;4) &quot;6&quot;5) &quot;three&quot;6) &quot;9&quot;\n\n5.1.16 ZINTERSTOREè¿™ä¸ªå‘½ä»¤å­˜æ”¾å¹¶é›†åˆ°destinationä¸­ï¼Œç›¸å…³çš„å‘½ä»¤é€‰é¡¹å’ŒZUNIONSTOREä¸€è‡´ã€‚\nZINTERSTORE destination numkeys key [key ...] [WEIGHTS weight  [weight ...]] [AGGREGATE &lt;SUM | MIN | MAX&gt;]\n\næ—¶é—´å¤æ‚åº¦ï¼šæœ€åæƒ…å†µæ˜¯O(N*K)+O(M*log(M)) ï¼ŒNæ˜¯æœ€å°çš„è¾“å…¥zsetä¸­çš„å…ƒç´ ä¸ªæ•°ï¼ŒKæ˜¯è¾“å…¥å‚æ•°ä¸­zsetçš„ä¸ªæ•°ï¼ŒMæ˜¯ç»“æœé›†ä¸­å…ƒç´ ä¸ªæ•°ã€‚\n127.0.0.1:6379&gt; zadd zset1 1 &quot;one&quot; 2 &quot;two&quot;(integer) 2127.0.0.1:6379&gt; zadd zset2 1 &quot;one&quot; 2 &quot;two&quot; 3 &quot;three&quot;(integer) 3127.0.0.1:6379&gt; zinterstore out 2 zset1 zset2 weights 2 3(integer) 2127.0.0.1:6379&gt; zrange out 0 -1 withscores1) &quot;one&quot;2) &quot;5&quot;3) &quot;two&quot;4) &quot;10&quot;\n\n5.2 ç¼–ç æ–¹å¼å½“zsetä¸­å…ƒç´ ä¸ªæ•°å°‘çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ziplistï¼›\nå½“å…ƒç´ ä¸ªæ•°è¾ƒå¤šï¼Œæˆ–è€…å•ä¸ªå…ƒç´ çš„ä½“ç§¯è¾ƒå¤§ï¼ˆå­—ç¬¦ä¸²é•¿ï¼‰ï¼Œä½¿ç”¨skiplistæ¥å­˜å‚¨ã€‚\nzset-max-ziplist-entries å…ƒç´ å°‘äºè¿™ä¸ªæ•°é‡çš„æ—¶å€™ä½¿ç”¨ziplistzset-max-ziplist-value   å…ƒç´ é•¿åº¦å¤§äºè¿™ä¸ªæ•°å­—çš„æ—¶å€™ä½¿ç”¨skiplist\n\næµ‹è¯•\n127.0.0.1:6379&gt; zadd zset1 1 &quot;one&quot; 2 &quot;two&quot;(integer) 2127.0.0.1:6379&gt; object encoding zset1&quot;ziplist&quot;127.0.0.1:6379&gt; zadd zset1 20 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa(integer) 1127.0.0.1:6379&gt; object encoding zset1&quot;skiplist&quot;\n\n5.3 ä½¿ç”¨åœºæ™¯zsetæ¯”è¾ƒé€‚åˆå»ºç«‹æ’è¡Œæ¦œã€‚è¯¸å¦‚å¾®åšçƒ­æœã€Bç«™çƒ­æœã€æ¸¸æˆæ’è¡Œæ¦œè¿™äº›ï¼Œéƒ½æ˜¯ä¸€ä¸ªâ€œæ’è¡Œæ¦œâ€çš„åº”ç”¨åœºæ™¯ã€‚\næ¸¸æˆç©å®¶çš„æ’ä½ä¼šæœ‰ä¸€ä¸ªåˆ†æ•°ï¼Œæ’è¡Œæ¦œæŒ‰è¿™ä¸ªåˆ†æ•°æ¥é™åºæ’åˆ—çš„ï¼Œå¹¶å±•ç¤ºç»™ç”¨æˆ·ã€‚ä¸”å¯ä»¥ä½¿ç”¨zrangeæ¥è¿›è¡Œåˆ†é¡µæŸ¥çœ‹ã€‚\nå¾®åšçƒ­æœä¹Ÿå¯ä»¥åº”ç”¨zsetï¼Œæ¯ä¸ªè¯é¢˜è‚¯å®šä¼šæœ‰ä¸€ä¸ªçƒ­æœçš„æŒ‡æ•°ï¼Œå¦‚æœç®€å•æ¥å¤„ç†ï¼Œé‚£ä¹ˆå°±æ˜¯ç”¨æˆ·æœç´¢ä¸€æ¬¡è¿™ä¸ªè¯é¢˜ï¼Œå®ƒåœ¨zsetä¸­çš„åˆ†æ•°å°±åŠ ä¸€ï¼ˆzincrbyå‘½ä»¤ï¼‰ï¼Œè¿™æ ·è¢«æœç´¢çš„æ¬¡æ•°è¶Šå¤šçš„è¯é¢˜ï¼Œåœ¨çƒ­æœæ¦œä¸­å°±è¶Šé å‰ã€‚\nå½“ç„¶ï¼Œå¾®åšå®é™…ä¸Šç”¨çš„æ˜¯ä¸€ä¸ªç»¼åˆçš„æ•°å€¼ï¼Œè€Œä¸æ˜¯åªçœ‹æœç´¢é‡è¿™ä¸ªå•ä¸€æŒ‡æ ‡ã€‚è¿™æ—¶å€™å¯ä»¥ç”¨zinterstore&#x2F;zunionstoreä¸­çš„weightæ¥å®ç°å¤šä¸ªç»´åº¦æ•°å€¼çš„è®¡ç®—ã€‚æ¯”å¦‚æµè§ˆé‡ã€ç‚¹èµç‡ã€è½¬å‘é‡ã€è¯„è®ºé‡è¿™äº›æ•°æ®ï¼Œåœ¨æœ€ç»ˆç»“æœé›†åˆçš„æ—¶å€™éƒ½ç»™ä»–ä»¬èµ‹äºˆä¸€ä¸ªæƒå€¼å†è¿›è¡Œè®¡ç®—ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªçƒ­æ¦œçš„æŒ‡æ•°ã€‚\n6.Steamssteamsæ•°æ®ç±»å‹ç±»ä¼¼ä¸€ä¸ªappend-only logï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠä¸€ä¸ªäº‹ä»¶æŠ•æ”¾ç»™å¤šä¸ªç›®æ ‡ã€‚ä½ å¯ä»¥ç†è§£ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¯”listæ›´åŠ é€‚åˆä½œä¸ºæ¶ˆæ¯ä¸­é—´ä»¶ã€‚\nåœ¨Rediså®˜ç½‘ä¸Šæåˆ°äº†steamsç±»å‹çš„å‡ ä¸ªåº”ç”¨åœºæ™¯\n\näº‹ä»¶æ¥æºç›‘çœ‹\näº‹ä»¶é€šçŸ¥\næ¶ˆæ¯ç›‘çœ‹ï¼ˆæ¶ˆè´¹è€…è¿›è¡Œé˜»å¡ç­‰å¾…ï¼‰\n\næ‰€è°“äº‹ä»¶ï¼Œå°±æ˜¯æŸä¸ªä¸œè¥¿æ»¡è¶³äº†æŸç§çŠ¶æ€çš„åœºæ™¯ã€‚æ¯”å¦‚linuxå¤šè·¯è½¬æ¥ä¸­epoll&#x2F;selectå°±æ˜¯é€šè¿‡äº‹ä»¶æ¥é€šçŸ¥è¿›ç¨‹æ¥å¤„ç†ioè¯·æ±‚çš„ï¼Œæˆ‘ä»¬åœ¨è¿›ç¨‹ä¸­è°ƒç”¨æ¥å£è¿›è¡Œç­‰å¾…çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºæ˜¯åœ¨æ‰§è¡Œâ€œæ¶ˆæ¯ç›‘çœ‹â€è¿™ä¸€æ­¥éª¤ã€‚\n7.Geospatialè¿™ä¸ªç±»å‹å°±æ˜¯ç”¨æ¥å­˜å‚¨åæ ‡ï¼ˆç»çº¬åº¦ï¼‰çš„ï¼Œä»£è¡¨ä¸€ä¸ªåœ°ç†ä½ç½®ã€‚å®ƒå­˜å‚¨ç‚¹äº†ä¹‹åï¼Œå¯ä»¥è¿›è¡Œåœ°ç†åŠå¾„è¿›è¡ŒæŸ¥æ‰¾ï¼Œåœ¨å¯¼èˆªè½¯ä»¶ä¸­å°±å¾ˆæœ‰ç”¨ã€‚\nåŸºæœ¬å‘½ä»¤æ˜¯æ·»åŠ å’ŒæŸ¥è¯¢ï¼š\n\nGEOADDå°†ä½ç½®æ·»åŠ åˆ°ç»™å®šçš„åœ°ç†ç©ºé—´ç´¢å¼•ï¼ˆè¯·æ³¨æ„ï¼Œä½¿ç”¨æ­¤å‘½ä»¤ï¼Œç»åº¦å…ˆäºçº¬åº¦ï¼‰ã€‚\nGEOSEARCHè¿”å›å…·æœ‰ç»™å®šåŠå¾„æˆ–åœ°ç†è¾¹ç•Œæ¡†çš„ä½ç½®ã€‚\n\nå¹³æ—¶è‚¯å®šç”¨ä¸ä¸Šè¿™ä¸ªç±»å‹ï¼Œåªæœ‰æ¥è§¦äº†å…·ä½“çš„ä¸šåŠ¡æ‰éœ€è¦äº†è§£\n8.HyperLogLogè¿™ä¸ªæ•°æ®ç±»å‹çš„åº”ç”¨åœºæ™¯ä¸»è¦æ˜¯ç”¨äºè®¡ç®—ï¼ˆä¼°ç®—ï¼‰é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°ã€‚\næ¯”å¦‚ç”¨setæ¥å­˜æ”¾ç«™ç‚¹çš„UVçš„æ—¶å€™ï¼Œå‡è®¾setä¸­å­˜æ”¾ç”¨æˆ·idï¼ˆ8å­—èŠ‚ï¼‰ä¸€ä¸ª1äº¿UVçš„ç«™ç‚¹å¤§çº¦ä¼šå ç”¨800MBçš„å†…å­˜ã€‚çœ‹ä¸Šå»å¥½åƒä¸å¤šï¼Ÿæ¯•ç«Ÿä¸€äº¿UVçš„ç½‘ç«™å“ªé‡Œæœ‰é‚£ä¹ˆå¤šå•Šï¼Ÿ\nä½†HyperLogLogå¯ä»¥ä½¿ç”¨æœ€å¤š12KBçš„ç©ºé—´å°±å®ç°ä¸Šè¿°çš„æ•ˆæœï¼\n\nThe Redis HyperLogLog implementation uses up to 12 KB and provides a standard error of 0.81%.\n\nsetå ç”¨é‚£ä¹ˆå¤šå†…å­˜æ˜¯å› ä¸ºå®ƒå®Œæ•´å­˜å‚¨äº†ç”¨æˆ·çš„idï¼Œä½†HyperLogLogå¹¶ä¸å­˜æ”¾å…ƒç´ å†…å®¹ï¼Œä½†å¯ä»¥è®°å½•â€œå…ƒç´ çš„ç‰¹å¾â€ï¼Œæ–°å¢å…ƒç´ çš„æ—¶å€™å¯ä»¥åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯æ–°å¢çš„å…ƒç´ è¿˜æ˜¯å·²ç»å­˜åœ¨çš„å…ƒç´ ã€‚è¿™æ—¶å€™å°±å¯ä»¥ç”¨HyperLogLogæ¥è¿›è¡Œè®¡æ•°ï¼Œä½†ä¸èƒ½ç”¨äºçœŸæ­£å­˜æ”¾å…ƒç´ ã€‚\nè¿™é‡Œçš„åº•å±‚è‚¯å®šå¾ˆå¤æ‚ï¼Œä¸”HyperLogLogå¹¶ä¸èƒ½ä¿è¯ç™¾åˆ†ç™¾ç²¾ç¡®ã€‚å®˜æ–¹æ–‡æ¡£ä¸Šä¹Ÿæåˆ°äº†ï¼ŒHyperLogLogå¤§æ¦‚ä¼šæœ‰0.81%çš„è¯¯å·®ã€‚\næ³¨æ„ï¼šHyperLogLogæ˜¯ä¸€ä¸ªç®—æ³•æ€æƒ³ï¼Œå¹¶éRedisä¸“æœ‰çš„ã€‚å…¶ä»–å·¥å…·ä¸­ä¹Ÿå¯èƒ½æä¾›è¿™ä¸ªæ•°æ®ç»“æ„æ¥å®ç°æ­¤ç±»éœ€æ±‚ã€‚\n9.Bitmapsbitmapsæ˜¯ä½å›¾ç»“æ„ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªé›†åˆï¼Œå®ƒä½¿ç”¨æŸä¸ªæ¯”ç‰¹ä½æ¥å­˜æ”¾æŸäº›ç‰¹å®šçš„æ•°æ®ï¼Œä»¥æ­¤æ¥èŠ‚çœç©ºé—´ã€‚\næ¯”å¦‚å­˜æ”¾æ•°å­—10ï¼Œæˆ‘ä»¬ä¸æ˜¯ç›´æ¥å­˜æ”¾æ•´å½¢ï¼Œè€Œæ˜¯å°†ä½å›¾ä¸­çš„ä»å³å¾€å·¦æ•°ç¬¬10ä½ä»0æ”¹æˆ1ï¼Œè¿™æ ·å°±ä»£è¡¨10å·²ç»å­˜æ”¾äº†ã€‚\nå’ŒHyperLogLogä¸å­˜æ”¾å…ƒç´ ç›¸æ¯”ï¼Œbitmapsè™½ç„¶æ˜¯ç”¨æ¯”ç‰¹æ¥è¡¨ç¤ºæ˜¯å¦å­˜åœ¨æŸä¸ªå…ƒç´ ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯å­˜æ”¾äº†è¿™ä¸ªå…ƒç´ çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½å›¾ä¸­çš„æ•°æ®è¿˜åŸå‡ºæŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼æ¯”å¦‚ç¬¬3ä¸ªæ¯”ç‰¹ä½æ˜¯1ï¼Œé‚£ä¹ˆé›†åˆä¸­å°±æœ‰3ã€‚\n\nä¸éœ€è¦çŸ¥é“å…ƒç´ å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨HyperLogLogï¼›\næƒ³èŠ‚çœç©ºé—´çš„åŒæ—¶éœ€è¦è®°å½•æ•´å½¢å…ƒç´ ï¼Œä½¿ç”¨bitmaps\n\n10.Bitfieldsä½åŸŸBitfieldsï¼Œåœ¨Cè¯­è¨€ä¸­ä½æ®µå…¶å®å°±æ˜¯ä½åŸŸï¼›\nstruct TestBit &#123;\tint a:8; // æ•°å­—è¡¨ç¤ºæŸä¸ªå˜é‡å ç”¨å‡ ä¸ªæ¯”ç‰¹ä½\tint b:16;\tint c:8;&#125;;\n\nRedisä¸­çš„bitfieldå’ŒCè¯­è¨€ä¸­çš„ä½åŸŸç›¸ä¼¼ï¼Œå¯ä»¥ç†è§£ä½ä¸€ä¸²äºŒè¿›åˆ¶åºåˆ—ï¼Œå¹¶ç»™æŸä¸ªä½è®¾ç½®ç‰¹å®šçš„å“ˆè¡£ï¼Œå¹¶è¿›è¡Œè¯»å–&#x2F;ä¿®æ”¹&#x2F;ç®—æœ¯è¿ç®—ç­‰ç›¸å…³æ“ä½œã€‚\nç›¸æ¯”äºstringç±»å‹ï¼Œå®ƒçš„æ ¸å¿ƒç›®æ ‡è¿˜æ˜¯èŠ‚çœç©ºé—´ã€‚æ¯”å¦‚ä¸€æŠŠmobaæ¸¸æˆä¸­ç©å®¶çš„é‡‘å¸ã€KDAã€è¡¥åˆ€ç­‰ä¿¡æ¯ï¼Œå¹¶ä¸éœ€è¦ç”¨å¤§é‡ç©ºé—´æ¥å­˜å‚¨ï¼Œä½¿ç”¨ä½åŸŸå¯ä»¥èŠ‚çœç©ºé—´ã€‚åœ¨Rediså®˜ç½‘ä¸Šä¹Ÿæœ‰ç›¸å…³çš„ç¤ºä¾‹å‘½ä»¤\nhttps://redis.io/docs/data-types/bitfields/\nThe endRedisä¸­æœ€ä¸»è¦ä½¿ç”¨çš„æ•°æ®ç±»å‹å’Œå‘½ä»¤å°±æ˜¯è¿™äº›äº†ï¼Œåç»­ç›¸å…³çŸ¥è¯†ç‚¹ä¼šç»§ç»­è¡¥å……ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Redis"],"tags":["Redis"]},{"title":"ã€Pythonã€‘æ•™ä½ ç™½å«–replitéƒ¨ç½²kook-ticket-botï¼ˆå·²å¤±æ•ˆï¼‰","url":"/posts/2556995516/","content":"æ•™ä½ ç™½å«–replitéƒ¨ç½²kookçš„ticketæœºå™¨äºº(å·²å¤±æ•ˆ)ã€‚\næ³¨æ„ï¼š2024å¹´replitç­–ç•¥æ›´æ–°ï¼Œå…è´¹ç”¨æˆ·åªèƒ½éƒ¨ç½²é™æ€é¡µé¢äº†ã€‚æœ¬æ–‡æ‰€è¿°ç™½å«–æ–¹æ¡ˆå·²ç»å¤±æ•ˆï¼Œè€Œreplitçš„ä»˜è´¹ä»·æ ¼é«˜äºè‡ªè´­äº‘æœåŠ¡å™¨ä»·æ ¼ï¼Œå¹¶ä¸æ¨èã€‚å¦‚æœæ‚¨è¿˜æœ‰è‡ªéƒ¨ç½²ticketæœºå™¨äººçš„éœ€æ±‚ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„kookæœåŠ¡å™¨è”ç³»æˆ‘ã€‚\n\n\n\n1.å‰è¨€æœ€è¿‘æœ‰ä¸å°‘è€å“¥æ¥æ‰¾æˆ‘å’¨è¯¢æœ‰å…³ticketæœºå™¨äººçš„äº‹æƒ…ï¼Œå½“å‰ticketæœºå™¨äººéœ€è¦äº‘æœåŠ¡å™¨æ‰èƒ½éƒ¨ç½²ï¼Œæœ‰äº›ä¸å¤ªå‹å¥½ï¼ˆè¦é’±å•Šï¼è€Œä¸”ä¹Ÿä¸æ˜¯äººäººéƒ½ä¼šå®‰è£…pythonç¯å¢ƒï¼‰\næ‰€ä»¥åœ¨è¿™é‡Œåˆ©ç”¨replitå’Œuptimerobotä¸¤ä¸ªå¹³å°ï¼Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªç™½å«–çš„æ–¹æ³•ï¼Œå®ç°éƒ¨ç½²kook-ticket-bot\n\nè¯¥æ–¹æ³•ç†è®ºä¸Šæ”¯æŒæ‰€æœ‰ä½¿ç”¨khl.pyæ¡†æ¶ç¼–å†™çš„æœºå™¨äººï¼\n\næ³¨æ„ï¼replitä¸Šçš„å…è´¹ä»“åº“ï¼Œé»˜è®¤æ˜¯å…¬å¼€çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰äººéƒ½èƒ½è®¿é—®åˆ°ä½ è¿™ä¸ªä»“åº“é‡Œé¢çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬botçš„tokenå’Œæ—¥å¿—ä¿¡æ¯ï¼è‹¥æ‚¨çš„ticket-botå¯¹æ•°æ®ç§å¯†æ€§è¦æ±‚è¾ƒé«˜ï¼Œè¯·è‡ªè´­æœåŠ¡å™¨æˆ–æ‰¾å¼€å‘è€…ä»£ä¸ºéƒ¨ç½²ï¼\n2.å‡†å¤‡2.1 æ³¨å†Œè´¦æˆ·è¿™ä¸¤ä¸ªå¹³å°å›½å†…è®¿é—®ç¼“æ…¢ï¼Œå¦‚æœå®åœ¨è¿›ä¸å»ï¼Œå°±ä¸‹è½½ä¸€ä¸ªsteam++(åˆç§°watt toolkit)\n\nhttps://gitee.com/rmbgame/SteamTools/releases/tag/2.8.6\n\nå¦‚å›¾ï¼Œä¸‹è½½exeå°±å¯ä»¥äº†\n\nå®‰è£…æ‰“å¼€ä»¥åï¼ŒæŠŠè¿™ä¸€å †æ— å·®åˆ«å‹¾ä¸Šï¼Œç‚¹ä¸€é”®åŠ é€Ÿï¼Œåº”è¯¥å°±okäº†ï¼Œè®¿é—®ä¼šç¨å¾®å¿«ä¸€ç‚¹\n\néšåå°±æ˜¯æ³¨å†Œè¿™ä¸¤ä¸ªå¹³å°çš„è´¦æˆ·äº†ï¼Œåº”è¯¥ä¸éœ€è¦æ•™å§ï¼ˆdogeï¼‰\n2.2 æ‰“å¼€gitee&#x2F;githubä»“åº“\nhttps://gitee.com/musnow/Kook-Ticket-Bot/tree/main/code\nhttps://github.com/musnows/Kook-Ticket-Bot\n\nä¸ºäº†æ–¹ä¾¿è®¿é—®ï¼Œæˆ‘å°†ticket-botåœ¨giteeä¹Ÿä¼ äº†ä¸€ä»½ï¼Œå¤§å®¶æ‰“å¼€ä»“åº“çš„codeç›®å½•ï¼Œå‡†å¤‡æ‹·è´ä»£ç ã€‚èƒ½ä½¿ç”¨githubçš„ï¼Œå»ºè®®ç”¨GitHubï¼ˆå› ä¸ºgithubçš„ä»£ç æ›´åŠ æ–°ï¼‰\n2.3 ç”³è¯·kookå¼€å‘è€…\nç½‘é¡µ: KOOKå¼€å‘è€…ä¸­å¿ƒ\n\nåˆ°kookçš„å¼€å‘è€…å¹³å°ï¼ŒåŠ å…¥å®˜æ–¹é¢‘é“ç”³è¯·æ‰¿ä¸ºå¼€å‘è€…ï¼ˆç°åœ¨å·²ç»ä¸éœ€è¦ç”³è¯·äº†ï¼‰ï¼Œè·å–åˆ›å»ºbotçš„æƒé™ï¼›æœ‰äº†æƒé™ä¹‹åï¼Œæ–°å»ºä¸€ä¸ªåº”ç”¨\n\n\néšåè¿›å…¥æœºå™¨äººé¡µé¢ï¼Œå¤åˆ¶è¿™é‡Œçš„tokenï¼Œå…ˆä¿å­˜èµ·æ¥ï¼Œåé¢è¦ç”¨ï¼ˆä¸€ä¼šå†æ¥å¤åˆ¶ä¹Ÿè¡Œï¼‰\n\nè¿›å…¥é‚€è¯·é¡µé¢ï¼Œç»™äºˆæœºå™¨äººç®¡ç†å‘˜æƒé™ï¼ˆè¿™æ ·æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œä¸ç„¶å¾—é’©ä¸€å¤§å †ï¼‰\nç„¶åå¤åˆ¶ä¸Šé¢çš„é‚€è¯·é“¾æ¥åˆ°æµè§ˆå™¨ï¼Œé‚€è¯·æœºå™¨äººè¿›å…¥ä½ çš„æœåŠ¡å™¨\n\nä½ åº”è¯¥èƒ½åœ¨é¢‘é“é‡Œé¢çœ‹åˆ°æ¬¢è¿ä¿¡æ¯ï¼Œæœºå™¨äººå·²ç»åŠ å…¥ä½ çš„é¢‘é“äº†ã€‚\n\n3.å¼€å§‹éƒ¨ç½²3.1 åˆ›å»ºreplæ¥åˆ°replitï¼Œåˆ›å»ºä»“åº“\n\né€‰æ‹©pythonï¼Œç„¶åç»™å®ƒå–ä¸ªåå­—\n\nåˆ›å»ºä¹‹åè¿›å…¥è¿™ä¸ªé¡¹ç›®\n\nimport from githubä¼šæ˜¾ç¤ºä»“åº“ä¸å¯ç”¨ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨æ“ä½œäº†ã€‚\n3.2 æ·»åŠ ä»£ç æ–‡ä»¶è¿›æ¥ä¹‹åæ˜¯è¿™æ ·çš„é¡µé¢ï¼Œåªæœ‰ä¸€ä¸ªmain.pyï¼Œå…¶ä»–ä»€ä¹ˆéƒ½æ— \n\nç‚¹å‡»å³ä¾§shellï¼Œå¤åˆ¶åï¼Œshift+insç²˜è´´å¦‚ä¸‹å‘½ä»¤ï¼Œå¯ä¸€å»ºæ‹‰å–æ‰€æœ‰ä»£ç ï¼Œå¹¶è¦†ç›–å·²æœ‰æ–‡ä»¶ã€‚ï¼ˆåˆ›å»ºreplçš„æ—¶å€™ä¸€å®šè¦é€‰æ‹©pythonï¼Œå¦åˆ™pipä¼šæ— æ³•è¿è¡Œï¼‰\ngit clone https://github.com/musnows/Kook-Ticket-Bot.git &amp;&amp; mv -b Kook-Ticket-Bot/* ./ &amp;&amp; mv -b Kook-Ticket-Bot/.[^.]* ./  &amp;&amp; rm -rf Kook-Ticket-Bot &amp;&amp; pip install -r requirements.txt\n\n\nå¦‚æœå¦‚ä¸Šå‘½ä»¤ä¸å¯ç”¨ï¼Œåˆ™éœ€è¦æ ¹æ®æˆ‘ä»“åº“çš„ä»£ç ï¼Œæ‰‹åŠ¨åˆ›å»ºåŒåæ–‡ä»¶ï¼Œå¹¶å°†ä»£ç å¤åˆ¶è¿›å»ï¼š\n\ngithubçš„ä»£ç æ›´åŠ æ–°ï¼Œå¦‚æœèƒ½æ‰“å¼€githubï¼Œè¯·åœ¨githubå¤åˆ¶ä»£ç ï¼šhttps://github.com/musnows/Kook-Ticket-Bot\nå®åœ¨æ‰“ä¸å¼€ï¼Œå†æ¥giteeï¼šhttps://gitee.com/musnow/Kook-Ticket-Bot/tree/main/code\n\næœ‰ä¸€ä¸ªç®€ä¾¿åŠæ³•ï¼Œå°±æ˜¯åœ¨github&#x2F;giteeçš„cloneæŒ‰é’®ä¸­é€‰æ‹©ä¸‹è½½zipï¼Œç„¶åå°†zipè§£å‹åï¼Œå°†æ–‡ä»¶å¤¹ä¸Šä¼ ä¸Šå»ï¼Œå¹¶æŠŠå†…éƒ¨æ–‡ä»¶ç§»åŠ¨é“æ ¹ç›®å½•ã€‚\n\n\n3.3 æ·»åŠ é…ç½®æ–‡ä»¶å¦‚æœä½ ç›´æ¥è¿è¡Œäº†ï¼Œä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ï¼Œä»£è¡¨æ²¡æœ‰æ‰¾åˆ°config/config.jsonæ–‡ä»¶ã€‚å³æ²¡æœ‰æ‰¾åˆ°æœºå™¨äººè¿è¡Œå¿…è¦çš„é…ç½®æ–‡ä»¶ã€‚\n\næ–°ç‰ˆæœ¬çš„ticketæœºå™¨äººä¼šè‡ªåŠ¨åˆ›å»ºlogç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä½†æ˜¯configä¸‹çš„é…ç½®æ–‡ä»¶ä¾æ—§éœ€è¦æ‚¨æ‰‹åŠ¨æ“ä½œï¼\næ¥ä¸‹æ¥å°±æ˜¯æ ¹æ®ä»“åº“çš„READMEæ·»åŠ å„ç±»é…ç½®æ–‡ä»¶ï¼Œæœ¬æ–‡ä¸é‡å¤READMEä¸­å·²æœ‰å†…å®¹ã€‚\nconfig/config.json # æœºå™¨äººtokené…ç½®config/TicketConf.json # ticketé…ç½®# ä¸‹é¢çš„æ–‡ä»¶æœºå™¨äººä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¯ä»¥ä¸å¼„log/TicketLog.json # ticketæ—¥å¿—log/TicketMsgLog.json # æ¶ˆæ¯è®°å½•log/ColorID.json # è¡¨æƒ…å›åº”ä¸Šè§’è‰²\n\nå…ˆæŠŠå¦‚ä¸Šçš„å‡ ä¸ªæ–‡ä»¶å…¨éƒ¨å»ºç«‹å¥½ï¼Œç„¶åæ ¹æ®ä»“åº“çš„READMEå¾€é‡Œé¢æ·»åŠ é”®å€¼ã€‚æ–°ç‰ˆæœ¬logç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œæœºå™¨äººä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¯ä»¥ä¸æ‰‹åŠ¨åˆ›å»ºã€‚ä¸»è¦é…ç½®configå³å¯ã€‚\n3.3.1 å¼€å¯kookå¼€å‘è€…æ¨¡å¼å¾ˆå¤šæ“ä½œéƒ½éœ€è¦å¤åˆ¶IDï¼Œå…ˆåœ¨è®¾ç½®é«˜çº§è®¾ç½®ä¸­å¼€å¯å¼€å‘è€…æ¨¡å¼\n\n3.3.2 é…ç½®configä¸‹é¢ç»™å‡ºä¸€ä¸ªTicketConf.jsonä¸­éœ€è¦é…ç½®çš„å‡ é¡¹çš„æ ·ä¾‹\n\n\nåœ¨è¿™é‡Œé‡ç”³ï¼Œæ·»åŠ äº†è¿™ä¸¤ä¸ªè§’è‰²idä¹‹åï¼Œå¿…é¡»è¦ç»™äºˆç”¨æˆ·å¯¹åº”çš„è§’è‰²ï¼ˆç‰¹åˆ«æ˜¯è…ç«¹ï¼‰æ‰èƒ½æ“ä½œbotçš„å‘½ä»¤ï¼Œå¦åˆ™æç¤ºæƒé™ä¸è¶³\né…ç½®ä¸ºæ–‡ä»¶æ·»åŠ å®Œæ¯•ä¹‹åï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„\n\n3.4 å¼€å§‹è¿è¡Œ\næ–°ç‰ˆæœ¬å·²ç»é‡‡ç”¨loggingæ¥æ›¿æ¢printï¼Œä¸å†éœ€è¦æ‰‹åŠ¨é…ç½®logDup\n\né…ç½®æ–‡ä»¶ä¿®æ”¹å¥½åï¼Œå°±å¯ä»¥ç‚¹å‡»é¡¶éƒ¨çš„runï¼Œå°è¯•è¿è¡Œbotäº†ï¼Œå˜æˆä¸‹é¢çš„æ ·å­é‚£å°±æ˜¯åœ¨è¿è¡Œäº†\n\n3.4.1 å®‰è£…åŒ…åˆšå¼€å§‹æ‰“å°å¦‚æœæç¤ºè¿™ä¸ªï¼Œä»£è¡¨æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„åŒ…\n\nå…ˆå°è¯•åœ¨shellä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤\npip install -r requirements.txt\n\nå¦‚æœå‡ºç°äº†å¦‚å›¾æ‰€ç¤ºçš„å®‰è£…é¡µé¢ï¼Œé‚£å°±ä¸€åˆ‡okï¼Œå®‰è£…å¥½äº†å†ç‚¹å‡»runå°±å¯ä»¥äº†\n\nå¦‚æœä¸è¡Œã€‚é‚£å°±åœ¨å·¥å…·toolsé‡Œé¢é€‰æ‹©packgesï¼Œæœç´¢khl.py\n\n\nå¦‚ä¸‹æç¤ºï¼Œå®‰è£…æˆåŠŸï¼\n\n3.4.2 æ—¶åŒºé—®é¢˜\næ–°ç‰ˆæœ¬è‡ªå¸¦çš„.replitæ–‡ä»¶å·²ç»å†™å…¥äº†è¿™ä¸ªé…ç½®\n\nè¿è¡Œè¿˜ä¼šæœ‰è¿™ä¸ªè­¦å‘Š\n/home/runner/tk-dev/venv/lib/python3.10/site-packages/tzlocal/unix.py:183: UserWarning: Can not find any timezone configuration, defaulting to UTC.  warnings.warn(&quot;Can not find any timezone configuration, defaulting to UTC.&quot;)\n\nç‚¹å‡»æ˜¾ç¤ºéšè—æ–‡ä»¶\n\næ‰“å¼€.replitæ–‡ä»¶ï¼Œåœ¨å¦‚ä¸‹ä½ç½®æ·»åŠ ä¸€è¡Œï¼ˆç„¶è€Œè¿™ä¸ªæ—¶åŒºé…ç½®æ²¡æœ‰ç”¨ï¼‰\n[env]TZ = &#x27;Asia/Shanghai&#x27;# ....\n\nå†æ¬¡è¿è¡Œï¼Œå°±ä¸ä¼šæœ‰è¿™ä¸ªæŠ¥é”™äº†\n3.4.3 è¿è¡ŒæˆåŠŸåœ¨ç‚¹å‡»è¿è¡Œï¼Œå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„é¡µé¢ï¼Œé‚£å°±æ˜¯è¿è¡ŒæˆåŠŸäº†ï¼\n\nå› ä¸ºé‡‡ç”¨äº†webhookçš„é“¾æ¥ï¼Œéœ€è¦å»åå°å¡«å…¥callback urlï¼Œå¡«å…¥åç‚¹å‡»é‡è¯•ã€‚å¦‚æœæ²¡æœ‰çº¢è‰²å­—ä½“æŠ¥é”™ï¼Œé‚£å°±æ˜¯æˆåŠŸäº†ï¼\nreplitç»™çš„url/khl-wh\n\n\nå¦‚æœä¸æˆåŠŸï¼Œå…ˆå°è¯•åœ¨æµè§ˆå™¨ä¸­è®¿é—®æ­¤urlï¼Œçœ‹çœ‹æ˜¯å¦å‡ºç°äº†405 Method Not Allowedï¼Œå¦‚æœå‡ºç°äº†ï¼Œä»£è¡¨ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œå¤šç‚¹å‡»å‡ æ¬¡é‡è¯•å³å¯ã€‚è¿™ç‚¹åœ¨READMEé‡Œé¢ä¹Ÿæœ‰è¯´æ˜\n\nç°åœ¨è¿›kooké‡Œé¢ï¼Œå…ˆæµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„botæ˜¯å¦åœ¨çº¿\n\næµ‹è¯•é€šè¿‡ï¼åå°ä¹Ÿæ‰“å°å‡ºäº†æ—¥å¿—\n\n3.5 uptimeRobotåˆ«æ€¥åˆ«æ€¥ï¼Œè™½ç„¶åˆ°è¿™é‡Œå·²ç»okäº†ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªæ­¥éª¤è¦åšï¼\nè¿›å…¥uptimeRobotï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç›‘æ§å®ä¾‹ï¼Œæ¥è°ƒç”¨æœºå™¨äººçš„urlï¼Œä¿è¯æˆ‘ä»¬çš„botä¸ä¼šå› ä¸ºreplitçš„ç­–ç•¥ï¼ˆ5åˆ†é’Ÿä¸æ´»è·ƒå°±ä¼‘çœ ï¼‰è€Œä¸‹çº¿è¿‡ä¹…ã€‚\n\nä½¿ç”¨webhookè¿æ¥ï¼Œä¹Ÿæ˜¯ä¸ºäº†è®©kookå‘é€æŠ¥æ–‡ç»™æœºå™¨äººçš„æ—¶å€™ï¼Œè®©replä¸ä¼‘çœ ã€‚\nç†è®ºä¸Šæ¥è¯´ï¼Œåªè¦ä½ çš„æœåŠ¡å™¨ç”¨æˆ·å¤Ÿå¤šï¼Œå‘è¨€æ´»è·ƒï¼ˆæ¯æ¬¡å‘è¨€ï¼Œkookéƒ½ä¼šå‘é€ä¸€æ¡ä¿¡æ¯ç»™æœºå™¨äººï¼Œä¸ç®¡æ˜¯ä¸æ˜¯æœºå™¨äººçš„å‘½ä»¤ï¼‰æ˜¯å¯ä»¥ä¸ç”¨é…ç½®uptimerobotçš„ã€‚\nä½†æ˜¯ä¸ºäº†é¿å…æœºå™¨äººåœ¨æœåŠ¡å™¨ä¸æ´»è·ƒçš„æ—¶å€™ï¼Œæ— æ³•æ”¶åˆ°kookçš„æŠ¥æ–‡ï¼Œè€Œè¿›å…¥ä¼‘çœ æ€ï¼Œè¿˜æ˜¯å»ºè®®å¤§å®¶æŒ‰æ•™ç¨‹é…ç½®ä¸€ä¸‹uptimerobotçš„ç›‘æ§\n\n\nç‚¹å‡»add new monitorï¼Œé€‰æ‹©http\n\n\næŒ‰å¦‚ä¸‹æ‰€ç¤ºå¡«å†™\n\nnameéšä¾¿å¡«ä¸ªè‹±æ–‡å\nurlå¡«åœ¨replitå¤åˆ¶çš„é“¾æ¥ï¼Œåé¢åŠ ä¸Š/khl-wh\nintervelæ˜¯å•æ¬¡ç›‘æ§çš„é—´éš”ï¼Œé€‰æ‹©5åˆ†é’Ÿï¼ˆä½äº5åˆ†é’Ÿå¾—æ”¶è´¹ï¼‰\ntimeouté»˜è®¤30sä¸éœ€è¦ä¿®æ”¹\nä¸¤ä¸ªsslå–æ¶ˆå‹¾é€‰\n\n\nå»ºè®®å‹¾é€‰ä¸Šè¿™ä¸ªï¼Œåœ¨botä¸‹çº¿çš„æ—¶å€™ï¼Œä¼šå‘ä½ çš„é‚®ç®±å‘é€é€šçŸ¥\n\né…ç½®å®Œæ¯•ï¼Œç‚¹å‡»å³ä¸‹è§’çš„create\n\nè¿™æ—¶å€™å°±ä¼šå¼€å§‹è¿è¡Œäº†ï¼ä¸‹æ–¹çš„pauseå¯ä»¥æš‚åœè¿è¡Œã€‚\n\nå¦‚æœä½ createå®Œæ¯•ï¼Œå‘ç°æ˜¯é»‘è‰²çš„ï¼Œé‚£å°±ç‚¹å‡»ä¸€ä¸‹startè®©ä»–å¼€å§‹è¿è¡Œ\n3.5.1 è‡ªå»ºuptime-kumaç”±äºå…è´¹çš„uptimerobotçš„ç›‘æ§æœ€ä½åªèƒ½é€‰æ‹©5åˆ†é’Ÿï¼Œæ­£å¥½å’Œreplitçš„ä¼‘çœ æ—¶é—´ç›¸åŒï¼Œå¯¼è‡´å³ä¾¿ä½ è®¾ç½®äº†uptimerobotçš„pingï¼Œreplä¾æ—§æœ‰å‡ ç‡ä¼‘çœ ã€‚\næ‚¨å¯ä»¥é€‰æ‹©åœ¨replitä¸Šé¢éƒ¨ç½²ä¸€ä¸ªuptime-kumaï¼Œè¯¥é¡¹ç›®å¯ä»¥è‡ªå®šä¹‰ç›‘æ§æ—¶é—´ï¼ˆæ— é™åˆ¶ï¼‰ï¼›ç¼ºç‚¹å°±æ˜¯è¿™ä¸ªreplä¹Ÿéœ€è¦ç”¨è¯·æ±‚æ¥è¿›è¡Œä¿æ´»ï¼ˆä¸ç¡®å®šèƒ½å¦è‡ªå·±è¯·æ±‚è‡ªå·±å®ç°ä¿æ´»ï¼‰\n\nreplitåˆ›å»ºä¸€ä¸ªæ–°çš„replï¼Œåœ¨shellä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯ä¸€é”®éƒ¨ç½²ã€‚è¯¦ç»†å†…å®¹å‚è€ƒè¯¥é¡¹ç›®çš„README\ngit clone https://github.com/valetzx/uptimekumaonreplit &amp;&amp; mv -b uptimekumaonreplit/* ./ &amp;&amp; mv -b uptimekumaonreplit/.[^.]* ./ &amp;&amp; rm -rf *~ &amp;&amp; rm -rf uptimekumaonreplit\n\n\næ¸©é¦¨æç¤ºï¼šreplitçš„replé»˜è®¤å…¬å¼€ï¼Œè‹¥æ‚¨éƒ¨ç½²äº†uptime-kumaï¼Œè¯·ä¸è¦æŠŠè¯¥æœåŠ¡çš„ç”¨æˆ·å&#x2F;å¯†ç è®¾ç½®æˆä»»ä½•å’Œæ‚¨å·²æœ‰å…¶ä»–å¹³å°çš„ç”¨æˆ·å&#x2F;å¯†ç ç›¸åŒã€‚\nå»ºè®®æ‹¿å¼ çº¸è®°å½•ä¸‹ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ä½œä¸ºuptime-kumaçš„å¯†ç ï¼Œé¿å…æ‚¨å¸¸ç”¨çš„å¯†ç æ³„éœ²ã€‚\n\næœ¬äººå·²ç»éƒ¨ç½²äº†è¯¥æœåŠ¡ï¼Œè‹¥æ‚¨æœ‰replä¿æ´»éœ€æ±‚ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„å¸®åŠ©æœåŠ¡å™¨ï¼Œå°†æ‚¨çš„replit-urlå‘ŠçŸ¥æˆ‘ã€‚\nå³ï¼šä½¿ç”¨æˆ‘éƒ¨ç½²çš„uptime-kumaæ¥è¯·æ±‚æ‚¨çš„replit-urlï¼Œå®ç°ä¿æ´»ï¼\n3.5.2 è§£å†³405é”™è¯¯å¯¼è‡´çš„downåœ¨æˆ‘replitéƒ¨ç½²æœºå™¨äººï¼Œä½¿ç”¨uptimerobotçš„æ—¶å€™ï¼Œé‡åˆ°äº†ä¸‹é¢çš„é—®é¢˜ã€‚æˆ‘åœ¨uptimeroboté‡Œé¢å¡«å…¥äº†replitçš„urlå¦‚ä¸‹\nreplitç»™çš„url/khl-wh\n\nä½†ç”±äºå…è´¹ç‰ˆæœ¬çš„uptimerobotä»…æ”¯æŒheadè¯·æ±‚ï¼Œè€Œ/khl-whè·¯å¾„æ˜¯åªæ”¯æŒpostè¯·æ±‚çš„ã€‚ç”±æ­¤ä¾¿å¼•å‘äº†è¿™ä¸ªé—®é¢˜\n\n\n\nè¯´æ¥å¥‡æ€ªï¼Œæˆ‘å…¶ä»–ä¸‰ä¸ªåœ¨replitä¸Šé¢ç”¨webhookéƒ¨ç½²çš„æœºå™¨äººå¹¶æ²¡æœ‰å‡ºç°è¿™ä¸ªé—®é¢˜ï¼ˆç†è®ºä¸Šæ¥è¯´åº”è¯¥ä¼šå‡ºç°æ‰å¯¹ï¼‰ä¸ç®¡è¿™ä¸ªï¼Œæœ‰é—®é¢˜æˆ‘ä»¬å°±è§£å†³é—®é¢˜\n\n\nè§£å†³åŠæ³•å¦‚ä¸‹ï¼Œæ‰¾åˆ°main.pyï¼Œé€‰ä¸­Botï¼Œå³é”®jump to definitionï¼Œè½¬åˆ°å®šä¹‰\n\næˆ–è€…åœ¨å·¦ä¾§é€‰æ‹©show hidden filesï¼Œè¿›å…¥venvæ–‡ä»¶å¤¹\n\nè¿™æ—¶å€™ä¾¿å±•å¼€äº†éšè—çš„åŒ…æ–‡ä»¶ï¼Œè·¯å¾„ä¸º\nvenv/lib/python3.10/site-packages/khl/bot/bot.py\n\n\n\næˆ‘ä»¬éœ€è¦æ‰¾çš„æ–‡ä»¶æ˜¯\nvenv/lib/python3.10/site-packages/khl/receiver.py\n\nè¿›å»ä¹‹åï¼Œæ‰¾åˆ°å¤§æ¦‚180è¡Œçš„ä½ç½®ï¼Œæœ‰ä¸€ä¸ª\nself.app.router.add_post(self.route, on_recv)\n\nå¤åˆ¶å¦‚ä¸‹ä»£ç æ›¿æ¢åŸæœ‰ï¼Œè¿™ä¸ªä»£ç çš„ä½œç”¨æ˜¯ç»™/khl-whæ·»åŠ getè¯·æ±‚çš„æ”¯æŒï¼Œè¿™æ ·uptimerobotçš„headè¯·æ±‚å°±ä¸ä¼šæŠ¥é”™äº†ã€‚\nä¿®æ”¹çš„æ—¶å€™ï¼Œä¸€å®šè¦æ³¨æ„ä»£ç çš„ç¼©è¿›ï¼Œè¦ä¿è¯æ–°çš„ä»£ç ç¼©è¿›å’Œæ—§çš„ä»£ç ç¼©è¿›ç›¸åŒï¼å¦åˆ™å¯èƒ½å¯¼è‡´æ„æƒ³ä¸åˆ°çš„åæœã€‚\nasync def on_root(request: web.Request):    return web.Response(body=&quot;khl.py get recv!&quot;,                    content_type=&#x27;text/html&#x27;,status=200)self.app.router.add_post(self.route, on_recv)self.app.router.add_get(self.route, on_root)\n\né…ç½®äº†ä¹‹åï¼Œé‡æ–°å¯åŠ¨æœºå™¨äººï¼Œå°†urlç²˜è´´åˆ°æµè§ˆå™¨ï¼Œå°è¯•è®¿é—®\nreplitç»™çš„url/khl-wh\n\nè¿™æ—¶å€™æ˜¾ç¤ºçš„å°±ä¸å†æ˜¯405ï¼Œè€Œæ˜¯khl.py get recv!äº†ï¼Œè¡¨æ˜ä»£ç ä¿®æ”¹æ­£ç¡®ï¼\n\nè¿™æ—¶å€™å»çœ‹çœ‹uptimerobotï¼Œå®ƒçš„è¯·æ±‚å°±æ²¡æœ‰å‡ºé”™äº†ï¼\n\nå®Œç¾è§£å†³ï¼\n4.ä¸‹çº¿æœºå™¨äººbotæœ‰ä¸€ä¸ªç‰¹æ®Šçš„killå‘½ä»¤ã€‚æ‰§è¡Œæ­¤killå‘½ä»¤ï¼Œå¯ä»¥åˆ·æ–°ç¼“å†²åŒºã€‚\né¿å…å‡ºç°æ•°æ®åœ¨ç¼“å†²åŒºä¸­æ²¡æœ‰å†™å…¥åˆ°æ–‡ä»¶ï¼Œå¯¼è‡´ä¸¢å¤±æ—¥å¿—oræ•°æ®æ–‡ä»¶\n/kill @æœºå™¨äºº\n\n\nå¦‚æœä½ æƒ³é€€å‡ºbotï¼Œå»ºè®®ä½¿ç”¨killå‘½ä»¤æ¥æ“ä½œï¼\nå¤§åŠŸå‘Šæˆï¼ç°åœ¨ä½ å¯ä»¥æ ¹æ®helpå»æµ‹è¯•ä¸€ä¸‹å„ç±»å‘½ä»¤æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œå•¦\n\n\n\næ³¨æ„ï¼Œå…³é—­ticketä¹‹åå¯èƒ½ä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºç”¨æˆ·ä»æ¥æ²¡æœ‰ç»™botå‘é€è¿‡ä¿¡æ¯ï¼Œå¯¼è‡´botæ— æ³•ç”¨æˆ·å‘é€ç§ä¿¡ï¼Œå¿½ç•¥æ­¤æŠ¥é”™å³å¯ï¼ˆæ–°ç‰ˆæœ¬å·²ç»å–æ¶ˆäº†è¿™ä¸ªæŠ¥é”™ï¼‰\n\nå› ä¸ºreplitæ˜¯å…è´¹çš„ï¼Œæ‰€ä»¥botçš„ååº”å¯èƒ½æœ‰äº›è¿Ÿé’ï¼Œæ­£å¸¸æƒ…å†µï¼\nå»ºè®®ä½¿ç”¨kookç½‘é¡µç‰ˆè¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœå‡ºç°æœºå™¨äººä¸å“åº”ï¼Œå…ˆåˆ·æ–°ä¸€ä¸‹ç½‘é¡µã€‚æœ‰å¾ˆå¤šæ—¶å€™çº¯ç²¹æ˜¯kookè‡ªå·±çš„å®¢æˆ·ç«¯æŠ½é£å¯¼è‡´å‘½ä»¤æ¶ˆæ¯çœ‹ä¸åˆ°ã€‚\nå†æ¬¡æé†’å†æ¬¡æé†’ï¼replitä¸Šçš„å…è´¹ä»“åº“ï¼Œé»˜è®¤æ˜¯å…¬å¼€çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰äººéƒ½èƒ½è®¿é—®åˆ°ä½ è¿™ä¸ªä»“åº“é‡Œé¢çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬botçš„tokenå’Œæ—¥å¿—ä¿¡æ¯ï¼\n\nä¸ºäº†è§„é¿tokenæ³„æ¼é€ æˆè¿‡å¤§å½±å“ï¼Œå»ºè®®æ¯éš”ä¸€æ®µæ—¶é—´å°±ä¸Šåå°é‡ç½®token\n\nè‹¥æ‚¨çš„ticket-botå¯¹æ•°æ®ç§å¯†æ€§è¦æ±‚è¾ƒé«˜ï¼Œè¯·è‡ªè´­æœåŠ¡å™¨æˆ–æ‰¾å¼€å‘è€…ä»£ä¸ºéƒ¨ç½²ï¼\nå…³äºè‡ªè´­æœåŠ¡å™¨ç›¸å…³äº‹é¡¹ï¼Œå¯åŠ å…¥å¸®åŠ©æœåŠ¡å™¨å’¨è¯¢æˆ‘ï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ é…ç½®æœåŠ¡å™¨çš„PythonåŸºæœ¬ç¯å¢ƒ\n\n\nPSï¼šè¯·ä¸è¦è¯¯ä¼šï¼Œæˆ‘ä¸æ˜¯å–æœåŠ¡å™¨çš„ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰æ¥å¹¿å‘ŠğŸ˜‚\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","Kook"]},{"title":"ã€ç½‘ç»œã€‘P2Pæ‰“æ´åŸç†","url":"/posts/725561575/","content":"å¼•å…¥å¦‚æœä½ æŠ˜è…¾è¿‡NASæˆ–è€…BTä¸‹è½½ç­‰ç­‰ç©æ„ï¼Œå¯èƒ½å¬è¯´è¿‡â€œP2Pæ‰“æ´â€è¿™ä¸€æŠ€æœ¯åè¯ã€‚ç®€å•æ¥è¯´ï¼ŒP2Pæ‰“æ´å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥åœ¨å¤–ç½‘è®¿é—®å†…ç½‘çš„è®¾å¤‡ï¼Œä»è€Œè®©æ²¡æœ‰å…¬ç½‘IPçš„å®¶åº­è®¾å¤‡ä¹Ÿèƒ½è·å¾—â€œå…¬ç½‘ç›´è¿â€çš„é€Ÿåº¦ã€‚\næ¯”å¦‚ç»¿è”ã€æç©ºé—´ç­‰å›½äº§NASçš„å®¢æˆ·ç«¯ï¼Œåœ¨å¤–ç½‘è®¿é—®çš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆå°è¯•P2Pæ‰“æ´è®©ä½ å’Œä½ çš„NASå®ç°P2Pç›´è¿ï¼Œæ‰“æ´å¤±è´¥çš„æ—¶å€™æ‰ä¼šé‡‡ç”¨æœåŠ¡å™¨è½¬å‘çš„æ–¹å¼ï¼›\nP2Pæ‰“æ´åï¼šä½ çš„å½“å‰è®¾å¤‡å’Œå®¶é‡Œçš„NASç›´æ¥é€šä¿¡é‡‡ç”¨æœåŠ¡å™¨è½¬å‘ï¼šæŠ¥æ–‡ä»å®¶é‡ŒNAS - æœåŠ¡å™¨ - ä½ çš„å½“å‰è®¾å¤‡\n\nå› ä¸ºæœåŠ¡å™¨è½¬å‘çš„é€Ÿåº¦ç›´æ¥ä¾èµ–äºæœåŠ¡å™¨çš„å‡ºå£å¸¦å®½ï¼Œæ‰€ä»¥ä½¿ç”¨æœåŠ¡å™¨è½¬å‘çš„ç”¨æˆ·è¶Šå¤šï¼Œé€Ÿåº¦ä¹Ÿå°±è¶Šæ…¢ï¼Œæœ‰çš„æ—¶å€™ä½ ä¼šå‘ç°æœåŠ¡å™¨è½¬å‘çš„é€Ÿåº¦ç”šè‡³ä¸å¦‚æ²¡å¼€ä¼šå‘˜çš„æŸåº¦äº‘ç›˜ã€‚\nå‰ç½®æŠ€æœ¯äº†è§£åœ¨å­¦ä¹ P2Pæ‰“æ´ä¹‹å‰ï¼Œä½ éœ€è¦äº†è§£ä»¥ä¸‹çŸ¥è¯†ç‚¹ã€‚æ³¨æ„ï¼Œæœ¬æ–‡åªæ˜¯å¯¹P2Pæ‰“æ´çš„ç®€å•ç†è§£å’Œè¯´æ˜ï¼Œæ·±å…¥äº†è§£åº•å±‚åŸç†è¯·è‡ªè¡Œç™¾åº¦å…¶ä»–æ›´è¯¦ç»†çš„æ–‡ç« ï¼\nä»€ä¹ˆæ˜¯P2Pï¼ŸP2På³ Peer to Peerï¼Œæ˜¯ä¸€ç§å¯¹ç­‰è¿æ¥æ–¹å¼ï¼Œçº¯P2Pæ¶æ„åŒ…å«å¦‚ä¸‹å†…å®¹\n\næ²¡æœ‰æ€»æ˜¯åœ¨çº¿çš„æœåŠ¡å™¨\nä»»æ„ç«¯ä¹‹é—´ç›´æ¥é€šä¿¡\nå¯¹ç­‰æ–¹ä¹‹é—´å¯ä»¥é—´æ–­é“¾æ¥ï¼Œå¹¶å¯ä»¥åŠ¨æ€æ”¹å˜IPåœ°å€\n\nP2PæŠ€æœ¯çš„å®é™…çš„ç”¨ä¾‹å¦‚ä¸‹ï¼š\n\næ–‡ä»¶åˆ†å‘ï¼ˆBTä¸‹è½½ï¼‰\næµåª’ä½“\nVolP\nå†…ç½‘ç©¿é€å¼è®¿é—®ï¼ˆå»ºç«‹P2Pé“¾æ¥ï¼Œç›´æ¥å’Œå†…ç½‘ä¸»æœºé€šä¿¡ï¼‰å³æœ¬æ–‡å³å°†è¦è®²è¿°çš„P2Pæ‰“æ´ã€‚\n\nNATç±»å‹å‚è€ƒæœ¬ç«™ IPå±‚å’Œæ•°æ®é“¾è·¯å±‚ åšå®¢ä¸­4.3èŠ‚å¯¹NATæŠ€æœ¯çš„è§£æã€‚\nNAT2ï¼šåœ°å€é™åˆ¶é”¥å½¢NATæ‰€è°“åœ°å€é™åˆ¶é”¥å½¢NATï¼Œå³NATæ˜ å°„ä¹‹åçš„å¤–ç½‘ç«¯å£å’ŒIPåœ°å€å¯¹è¯·æ±‚å…·æœ‰ä¸€å®šçš„é™åˆ¶ï¼Œè¿™ä¸ªé™åˆ¶ä½“ç°ä¸ºå®ƒåªå…è®¸å·²å»ºç«‹é“¾æ¥çš„ä¸»æœºä¸ä¹‹è¿›è¡Œé€šä¿¡ã€‚\n\nå±€åŸŸç½‘ä¸»æœºCéœ€è¦å’Œå…¬ç½‘æœåŠ¡å™¨S1è¿›è¡Œé€šä¿¡\nå±€åŸŸç½‘ä¸»æœºCå‘é€è¯·æ±‚æŠ¥æ–‡ï¼Œé€šè¿‡è¿è¥å•†è·¯ç”±å™¨è½¬å‘ï¼ŒæŠµè¾¾S1æœåŠ¡å™¨\nè¿™ä¸ªè¿‡ç¨‹ä¸­æ¯ä¸€å±‚çš„è·¯ç”±å™¨éƒ½å»ºç«‹äº†ä¸€ä¸ªNATè½¬å‘è¡¨\nå¦‚æœæ˜¯é™åˆ¶é”¥å½¢NATï¼Œè¿è¥å•†çš„è·¯ç”±å™¨å°†ä¼šé™åˆ¶è¯¥NATåœ°å€çš„å¤–ç½‘è®¿é—®IPåœ°å€ï¼š\nåªæœ‰S1æœåŠ¡å™¨å‘æ¥çš„æŠ¥æ–‡èƒ½è¢«æ­£å¸¸å¾€å†…ç½‘è½¬å‘ï¼ˆç«¯å£ä¸é™åˆ¶ï¼‰ï¼Œå‘é€ç»™ç»™å±€åŸŸç½‘ä¸»æœºCï¼›\nå…¶ä»–å…¬ç½‘æœåŠ¡å™¨ï¼ˆå’ŒS1ä¸åŒIPåœ°å€ï¼‰å¦‚æœä¼å›¾å‘è¯¥NATåœ°å€å‘é€æŠ¥æ–‡ï¼Œä¼šè¢«è¿è¥å•†è·¯ç”±å™¨æ‹’ç»ï¼›\n\n\n\nä¸¾ä¸ªå…·ä½“çš„çš„ä¾‹å­ï¼Œåœ¨åœ°å€é™åˆ¶é”¥å½¢NATä¸‹\n\nCè¯·æ±‚1.1.1.1:8080ï¼Œä¼šå»ºç«‹ä¸€ä¸ªNATæ˜ å°„ï¼Œå‡è®¾æ˜¯ 2.2.2.2:9000ï¼›\nåªæœ‰1.1.1.1è¿™ä¸ªIPèƒ½å‘é€æŠ¥æ–‡ç»™NATåœ°å€ï¼Œå¯¹æ¥æºç«¯å£ä¸é™åˆ¶ï¼›\nå…¶ä»–æ¥æºIPéƒ½ä¼šè¢«NATåœ°å€æ‹’ç»\n\nNAT3ï¼šç«¯å£é™åˆ¶é”¥å½¢NATåœ¨é™åˆ¶é”¥å½¢NATçš„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†ç«¯å£çš„é™åˆ¶ï¼Œå³åªæœ‰å±€åŸŸç½‘è®¾å¤‡Cè¯·æ±‚è¿‡çš„S1çš„ç«¯å£æ‰èƒ½å‘é€ä¿¡æ¯ç»™å±€åŸŸç½‘ä¸»æœºã€‚\nç«¯å£é™åˆ¶é”¥å½¢NATä¸‹Cè¯·æ±‚ 1.1.1.1:8080åªæœ‰ 1.1.1.1:8080 èƒ½å‘é€æŠ¥æ–‡ç»™NATåœ°å€å…¶ä»–æ¥æºIPæˆ–è€…1.1.1.1ä¸Šä¸åŒçš„ç«¯å£å‘æ¥çš„æŠ¥æ–‡éƒ½ä¼šè¢«æ‹’ç»\n\nNAT1ï¼šå®Œå…¨é”¥å½¢NATå®Œå…¨é”¥å½¢NATçš„æ˜ å°„è¿‡ç¨‹åŒä¸Šï¼Œä½†æ˜¯ä¸ä¼šå¯¹å¤–ç½‘è®¿é—®åšä»»ä½•é™åˆ¶ã€‚\nå³NATåœ°å€å»ºç«‹åï¼Œä»»ä½•å¤–ç½‘ä¸»æœºéƒ½å¯ä»¥å‘é€ä¿¡æ¯ç»™è¿™ä¸ªNATåœ°å€ã€‚\nNAT4ï¼šå¯¹ç§°å¼NATï¼ˆåŠ¨æ€NATï¼‰å¯¹ç§°å¼NATæŠŠå†…ç½‘IPå’Œç«¯å£åˆ°ç›¸åŒç›®çš„åœ°å€å’Œç«¯å£çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½æ˜ å°„åˆ°åŒä¸€ä¸ªå…¬ç½‘åœ°å€å’Œç«¯å£ï¼›åŒä¸€ä¸ªå†…ç½‘ä¸»æœºï¼Œç”¨ç›¸åŒçš„å†…ç½‘IPå’Œç«¯å£å‘å¦å¤–ä¸€ä¸ªç›®çš„åœ°å€å‘é€æŠ¥æ–‡ï¼Œåˆ™ä¼šç”¨ä¸åŒçš„æ˜ å°„ï¼ˆæ¯”å¦‚æ˜ å°„åˆ°ä¸åŒçš„ç«¯å£ï¼‰ã€‚\nå’Œç«¯å£é™åˆ¶å¼NATä¸åŒçš„æ˜¯ï¼Œç«¯å£é™åˆ¶å¼NATæ˜¯æ‰€æœ‰è¯·æ±‚æ˜ å°„åˆ°ç›¸åŒçš„å…¬ç½‘IPåœ°å€å’Œç«¯å£ï¼Œè€Œå¯¹ç§°å¼NATæ˜¯ä¸ºä¸åŒçš„è¯·æ±‚å»ºç«‹ä¸åŒçš„æ˜ å°„ã€‚å®ƒå…·æœ‰ç«¯å£å—é™é”¥å‹çš„å—é™ç‰¹æ€§ï¼Œå†…éƒ¨åœ°å€æ¯ä¸€æ¬¡è¯·æ±‚ä¸€ä¸ªç‰¹å®šçš„å¤–éƒ¨åœ°å€ï¼Œéƒ½å¯èƒ½ä¼šç»‘å®šåˆ°ä¸€ä¸ªæ–°çš„ç«¯å£å·ã€‚ä¹Ÿå°±æ˜¯è¯·æ±‚ä¸åŒçš„å¤–éƒ¨åœ°å€æ˜ å°„çš„ç«¯å£å·æ˜¯å¯èƒ½ä¸åŒçš„ï¼Œç”šè‡³è¯·æ±‚åŒä¸€ä¸ªä¸»æœºçš„ä¸åŒç«¯å£ä¹Ÿä¼šæ˜ å°„åˆ°ä¸åŒçš„NATåœ°å€ä¸Šã€‚\nè¯´ç™½äº†å°±æ˜¯ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ç›®æ ‡çš„ç«¯å£ä¸åŒå°±ä¼šæ›´æ¢æ˜ å°„ï¼›ç”šè‡³ç«¯å£ç›¸åŒçš„æ—¶å€™éƒ½æœ‰å¯èƒ½æ›´æ¢æ˜ å°„ã€‚\nNATç±»å‹IPç«¯å£æ˜ å°„ç¤ºæ„å›¾æ ¹æ®NATç±»å‹ï¼Œå¯èƒ½äº§ç”Ÿå¦‚ä¸‹æ˜ å°„è¡¨ï¼Œè¡¨ä¸­&lt;-&gt;ç¬¦å·å·¦ä¾§è¡¨ç¤ºå†…ç½‘ä¸»æœºIPå’Œç«¯å£ï¼Œ&lt;-&gt;ç¬¦å·å³ä¾§è¡¨ç¤ºNATçš„å¤–ç½‘IPå’Œç«¯å£ï¼Œ@ç¬¦å·å³è¡¨ç¤ºé™åˆ¶æ¡ä»¶ï¼šå¤–ç½‘ä¸»æœºåœ°å€IPå’Œç«¯å£ã€‚\n\nå¦‚ä½•éªŒè¯NATç±»å‹é€šè¿‡è¿™ä¸ªè¡¨ï¼Œä¹Ÿèƒ½åæ¨å‡ºæˆ‘ä»¬åº”è¯¥å¦‚ä½•éªŒè¯ä¸€ä¸ªNATçš„ç±»å‹\n\nå±€åŸŸç½‘å®¢æˆ·ç«¯Cå‘æœåŠ¡å™¨S1å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨S1èƒ½å¾—åˆ°ä¸€ä¸ªCçš„NATåœ°å€å’Œç«¯å£\næœåŠ¡å™¨S1è®©Cå‘è‡ªå·±çš„å¦å¤–å‡ ä¸ªç«¯å£å‘èµ·è¯·æ±‚ï¼Œå¦‚æœè¿™äº›è¯·æ±‚çš„æ¥æºIPå’Œç«¯å£éƒ½ä¸€è‡´ï¼Œåˆ™ä»£è¡¨Cæ˜¯é”¥å½¢NATï¼Œå¦‚æœå‡ºç°äº†ä¸åŒçš„ç«¯å£ï¼Œåˆ™ä»£è¡¨æ˜¯å¯¹ç§°NATï¼›\næœåŠ¡å™¨S1å°†è¿™ä¸ªåœ°å€å’Œç«¯å£äº¤ç»™æœåŠ¡å™¨S2ï¼ŒS2å‘Cå‘é€ä¸€ä¸ªæŠ¥æ–‡\nå¦‚æœCæ”¶åˆ°äº†è¿™ä¸ªS2å‘æ¥çš„æŠ¥æ–‡ï¼Œä»£è¡¨æ˜¯å®Œå…¨é”¥å½¢NATï¼Œä¸å¯¹å¤–ç½‘æ¥æºåšé™åˆ¶\nå¦‚æœCæ²¡æœ‰æ”¶åˆ°ï¼Œè¯´æ˜æ˜¯é™åˆ¶é”¥å½¢NAT;\næœåŠ¡å™¨S1æ¢ä¸€ä¸ªç«¯å£å‘Cçš„NATåœ°å€å’Œç«¯å£å‘èµ·è¯·æ±‚ï¼›\nå¦‚æœCæ”¶åˆ°äº†ï¼Œåˆ™ä»£è¡¨æ˜¯åœ°å€é™åˆ¶é”¥å½¢NATï¼Œå¯¹ç«¯å£ä¸åšé™åˆ¶ï¼›\nå¦‚æœCæ²¡æœ‰æ”¶åˆ°ï¼Œåˆ™ä»£è¡¨æ˜¯ç«¯å£é™åˆ¶é”¥å½¢NATï¼Œå¯¹åœ°å€å’Œç«¯å£éƒ½åšäº†é™åˆ¶ï¼›\næœåŠ¡å™¨S1å°è¯•è®©å®¢æˆ·ç«¯Cç”¨ç›¸åŒçš„æœ¬åœ°ç«¯å£ï¼Œç»™S1çš„å¦å¤–ä¸€ä¸ªç«¯å£å‘é€è¯·æ±‚ï¼Œå¦‚æœä¸¤æ¬¡è¯·æ±‚çš„æ¥æºç«¯å£å‡ºç°äº†å˜åŒ–ï¼Œè¯´æ˜æ˜¯å¯¹ç§°å¼NATï¼›\n\nè¿™é‡Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æ˜¯æˆ‘ä»¬å•ç‹¬å®ç°çš„ç¨‹åºï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç‰¹å®šçš„å­—æ®µæ¥è®©å®¢æˆ·ç«¯ã€æœåŠ¡å™¨åšä¸åŒçš„æ“ä½œã€‚éªŒè¯å®¢æˆ·ç«¯çš„NATç±»å‹è‡³å°‘éœ€è¦ä¸¤ä¸ªä¸åŒIPçš„å…¬ç½‘æœåŠ¡å™¨ã€‚\nåšå®¢ï¼šNATæ‰“æ´_nat1æ‰“æ´-CSDNåšå®¢ ä¸­æœ‰ä¸€ä¸ªä¸é”™çš„æµç¨‹å›¾ï¼Œåœ¨æ­¤å¼•ç”¨ä¸€ä¸‹\n\n\nç°åœ¨å‡è®¾ 192.168.0.100 é€šè¿‡ 8000 ç«¯å£ è®¿é—® 114.135.246.90 çš„ 9001 ç«¯å£\nç»è¿‡NATä¹‹åï¼Œä¼šå½¢æˆè¿™æ ·ä¸€ç§ç»“æœï¼š\n\nå†…ç½‘çš„ 192.168.0.100:8000 â†” 120.230.117.10:9999 NATå…¬ç½‘IPï¼Œå½¢æˆç»‘å®šå…³ç³»\næœåŠ¡ç«¯ 114.135.246.90:9001 è¢« 120.230.117.10:9999 NATå…¬ç½‘IPï¼Œè®¿é—®\n\nç„¶åå¦‚æœå®¢æˆ·ç«¯ 192.168.0.100 çš„8000ç«¯å£ï¼š\n\n8000 ç«¯å£ èƒ½æ”¶åˆ° ç´«è‰² å‘æ¥çš„æ¶ˆæ¯ï¼Œå°±æ˜¯ NAT1\n8000 ç«¯å£ æ”¶ä¸åˆ° ç´«è‰² å‘æ¥çš„æ¶ˆæ¯ï¼Œå´èƒ½æ”¶åˆ° æµ…è“è‰² çº¿å‘æ¥çš„æ¶ˆæ¯ï¼Œå°±æ˜¯ NAT2\n8000 ç«¯å£ æ”¶ä¸åˆ° ç´«è‰² å’Œ æµ…è“è‰² çº¿å‘æ¥çš„æ¶ˆæ¯ï¼Œåªèƒ½æ”¶åˆ° ç»¿è‰² çº¿è¿”å›æ¥çš„æ¶ˆæ¯ï¼Œå°±æ˜¯ NAT3 | NAT4\n\nNAT3 å’Œ NAT4 çš„åŒºåˆ«ï¼š\n\nNAT3 æ˜¯ 8000 ç«¯å£ä¸ 9999 ç«¯å£å½¢æˆç»‘å®šå…³ç³»ï¼Œä¸ç®¡é€šè¿‡ 8000 ç«¯å£è®¿é—®è°ï¼ŒÂ·éƒ½æ˜¯ä» 9999 ç«¯å£å‡ºå»\nNAT4 æ˜¯ 8000 ç«¯å£ä¸ 9999 ç«¯å£å½¢æˆçš„ç»‘å®šå…³ç³»æ˜¯æœ‰æ¡ä»¶çš„ï¼Œ8000 ç«¯å£è®¿é—®åŒä¸€ ip:port æ—¶ï¼Œéƒ½ä¼šä» 9999 ç«¯å£å‡ºå»ï¼›ä½†é€šè¿‡ 8000 ç«¯å£è®¿é—®å…¶ä»– ip:port æ—¶ï¼Œå°±ä¼šç»‘å®š NAT å…¶ä»–ç«¯å£ï¼Œæ¯”å¦‚ 9990ï¼ˆç›®æ ‡ç«¯å£å˜åŒ–NATå°±ä¼šå˜åŒ–ï¼‰\n\n\næœ‰æµç¨‹å›¾ç‰‡ï¼Œçœ‹èµ·æ¥ä¼šæ›´æ¸…æ¥šä¸€ç‚¹ã€‚\nP2Pæ‰“æ´è¿‡ç¨‹å¦‚æœæƒ³å®ç°P2Pæ‰“æ´ï¼Œé‚£ä¹ˆå½“å‰å±€åŸŸç½‘å†…è®¾å¤‡å¿…é¡»æ˜¯åœ¨é”¥å½¢NATä¸‹ï¼Œæ‰èƒ½å®ç°ç›´æ¥é€šä¿¡ã€‚å› ä¸ºåœ¨å¯¹ç§°NATä¸‹ï¼ŒNATçš„ç«¯å£åœ°å€ä¼šç»å¸¸å˜åŒ–ï¼Œå¾ˆéš¾å®ç°ç¨³å®šçš„è¿æ¥ã€‚\nå¯¹äºé”¥å½¢NATï¼Œæ¯”è¾ƒå¥½æ‰“æ´çš„è‡ªç„¶æ˜¯å®Œå…¨é”¥å½¢NATäº†ï¼Œå› ä¸ºå®ƒå¯¹å¤–ç½‘çš„æ¥æºIPå’Œç«¯å£éƒ½ä¸åšé™åˆ¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨ä¸‹é¢çš„æµç¨‹æ¥å®ç°æ‰“æ´\n\néœ€è¦ä¸­é—´æœåŠ¡å™¨S\nå®¢æˆ·ç«¯C1å’ŒC2éƒ½æ˜¯å®Œå…¨é”¥å½¢NAT\nå®¢æˆ·ç«¯C1è¯·æ±‚å’ŒC2å®ç°P2Pè¿æ¥\nå®¢æˆ·ç«¯C1å‘ä¸­é—´æœåŠ¡å™¨Så‘èµ·è¯·æ±‚ï¼ŒNATä¼šä¸ºC1ç»´æŠ¤ä¸€ä¸ªç«¯å£å’Œåœ°å€\næœåŠ¡å™¨Sæ”¶åˆ°C1çš„è¯·æ±‚ï¼Œå¹¶å¯¹å†…ç½‘å®¢æˆ·ç«¯C2ä¸‹å‘ä¸€ä¸ªé€šçŸ¥ï¼Œè®©C2ä¹Ÿæ¥è¯·æ±‚S\nC2ä¹Ÿå‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼ŒNATä¸ºC2ä¹Ÿç»´æŠ¤äº†ä¸€ä¸ªåœ°å€\næ­¤æ—¶æœåŠ¡å™¨Så°±åŒæ—¶çŸ¥é“C1å’ŒC2é€šè¿‡NATå‡ºæ¥çš„ä¸€ä¸ªå…¬ç½‘ç«¯å£å’ŒIPåœ°å€\næœåŠ¡å™¨Så°†C1&#x2F;C2çš„IP:ç«¯å£äº’ç›¸å‘ŠçŸ¥å¯¹æ–¹\nC1å’ŒC2éƒ½å¾—åˆ°äº†å¯¹æ–¹çš„IPå’Œç«¯å£ï¼Œå› ä¸ºæ˜¯å®Œå…¨é”¥å½¢NATï¼ŒåŒæ–¹å¯ä»¥ç›´æ¥é€šä¿¡\næ‰“æ´å®Œæˆ\n\nè¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸­é—´æœåŠ¡å™¨Sæ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªä¸­é—´æœåŠ¡å™¨ï¼ŒC1å’ŒC2å°±å¾ˆéš¾çŸ¥é“å¯¹æ–¹çš„NATå…¬ç½‘IPå’Œç«¯å£ï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•ç›´æ¥å®ç°é€šä¿¡ã€‚ \nä¸ªäººç†è§£ï¼Œåªè¦C1å’ŒC2æœ‰ä¸€æ–¹æ˜¯å®Œå…¨é”¥å½¢NATï¼Œé‚£ä¹ˆP2Pæ‰“æ´å°±æ˜¯æ¯”è¾ƒå®¹æ˜“å®ç°çš„ï¼Œå‡è®¾C1æ˜¯å®Œå…¨é”¥å½¢NATï¼ŒC2æ˜¯æœ‰é™åˆ¶çš„NATï¼š\n\næœåŠ¡å™¨SçŸ¥é“äº†C1çš„NATçš„å…¬ç½‘IPåœ°å€å’Œç«¯å£åï¼Œå°†å…¶å‘ŠçŸ¥C2ï¼›\nC2é‡æ–°å¯¹C1çš„å®Œå…¨é”¥å½¢NATå‘é€è¯·æ±‚ï¼Œé™åˆ¶é”¥å½¢NATä¼šå¯¹C2çš„æ–°è¯·æ±‚æ›´æ–°è‡ªå·±çš„é™åˆ¶è¡¨ä¸­çš„ç™½åå•ï¼Œå°†C1çš„IPåœ°å€å’Œç«¯å£ä¹ŸåŠ å…¥åˆ°äº†è¿™ä¸ªç™½åå•ä¸­ï¼›\næ­¤æ—¶é™åˆ¶é”¥å½¢NATçš„é™åˆ¶å°±æ¶ˆå¤±äº†ï¼ŒC1å’ŒC2ä¾æ—§å¯ä»¥ç‚¹å¯¹ç‚¹å‘èµ·é€šä¿¡ã€‚\n\nä¸Šè¿°è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒå¥½å¼„æ˜ç™½çš„ã€‚\nNATç©¿é€æ€§è¡¨æ ¼ä¸‹è¡¨å±•ç¤ºäº†ä¸åŒNATç»„åˆçš„ç©¿é€æ€§ã€‚\n\nä½†æ˜¯æˆ‘æ²¡æƒ³æ˜ç™½ä¸¤è¾¹éƒ½æ˜¯ç«¯å£é™åˆ¶å‹NATå¦‚ä½•æ‰“æ´ï¼Ÿç™¾åº¦ä¹Ÿæ²¡æ‰¾åˆ°å¥½çš„è¯´æ˜ã€‚\n\nå…³äºç«¯å£å—é™å‹ NAT æ‰“æ´å¯è¡Œæ€§çš„æ€è€ƒ - ç³¯ç±³PHP\nåŒæ–¹éƒ½æ˜¯ç«¯å£é™åˆ¶NATèƒ½å®ç°P2Pæ‰“æ´å—ï¼Ÿ\n\nææ¸…æ¥šè¿™ä¸ªé—®é¢˜åæˆ‘ä¼šå›æ¥è¡¥å……æœ¬æ–‡ã€‚\næ‰“æ´å¤±è´¥å¦‚æœæ‰“æ´å¤±è´¥ï¼ŒC1å’ŒC2å°±å¾—å€ŸåŠ©ä¸­é—´æœåŠ¡å™¨Sçš„è½¬å‘æ¥å®ç°é€šä¿¡ï¼Œæ­¤æ—¶é€šä¿¡çš„é€Ÿåº¦å°±ä¼šå‡ºç°é™åˆ¶ã€‚åŒæ—¶ï¼Œä¸­é—´æœåŠ¡å™¨Sçš„å¸¦å®½&#x2F;æµé‡èµ„è´¹ä¹Ÿæ¯”è¾ƒæ„Ÿäººã€‚\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç»¿è”å’Œæç©ºé—´è™½ç„¶æä¾›äº†ä¸­é—´æœåŠ¡å™¨è½¬å‘çš„æ–¹å¼ï¼Œä½†ä¾æ—§ä¼šæƒ³åŠæ³•è®©ä½ å’Œä½ çš„NASèƒ½å®ç°P2Pç›´æ¥é€šä¿¡ã€‚é™¤äº†èƒ½æé«˜è¿æ¥é€Ÿåº¦ï¼Œæ›´å¤šçš„æ˜¯èŠ‚çœå®ƒä»¬æœåŠ¡å™¨çš„å¸¦å®½å’Œèµ„è´¹ã€‚\nThe endP2Pæ‰“æ´çš„å¤§æ¦‚åŸç†å°±æ˜¯å¦‚æ­¤ï¼Œæ›´æ·±å±‚æ¬¡çš„å°±ä¸å†ç ”ç©¶äº†~ä½ çœ‹æ˜ç™½äº†å—ï¼Ÿ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["P2P"]},{"title":"ã€KOOKã€‘linkguardæœºå™¨äººé…ç½®ä¸ªæ€§åŒ–æ’¤å›æé†’","url":"/posts/1370917284/","content":"linkguardæœºå™¨äººé…ç½®ä¸ªæ€§åŒ–æ’¤å›æé†’\n\n\nåœ¨ä¸€ä½ç”¨æˆ·çš„å»ºè®®ä¸‹ï¼Œæ¨å‡ºäº†æ­¤åŠŸèƒ½ï¼Œç»è¿‡2hçš„codingï¼ŒåŸºæœ¬é€šè¿‡äº†æµ‹è¯•\n1.å‡†å¤‡æ‰“å¼€kookçš„å¡ç‰‡ç¼–è¾‘å™¨ï¼Œç¼–è¾‘å¥½ä½ å‡†å¤‡çš„æ¶ˆæ¯\nhttps://www.kookapp.cn/tools/message-builder.html#/card\næ³¨æ„ï¼Œå¡ç‰‡æ¶ˆæ¯å†…ä¸èƒ½åŒ…å«æŒ‰é’®ï¼Œå¦åˆ™ä¼šé…ç½®å¤±è´¥\nç‰¹æ®Šå­—ç¬¦ç‰¹æ®Šå­—ç¬¦ &#123;met&#125;ï¼Œç”¨äºæ ‡è¯†æ’¤å›ç”¨æˆ·ä¿¡æ¯ä¸­æ‰€å‘é€çš„ @ç”¨æˆ·å çš„ä½ç½®ï¼›\næ¯”å¦‚ä¸‹å›¾ä¸­ï¼Œæˆ‘æ˜¯è¿™æ ·é…ç½®çš„\n\nå®é™…å‘é€çš„æ•ˆæœå°±å¦‚ä¸‹\n\nå¦‚ä½•è·å–å›¾ç‰‡urlï¼ŸPCç«¯å°†å›¾ç‰‡ä¸Šä¼ åˆ°kook â†’ ç‚¹å‡»å›¾ç‰‡ â†’ åº•éƒ¨...å¤„å¤åˆ¶å›¾ç‰‡é“¾æ¥ â†’ ä½¿ç”¨/vip-shopå‘½ä»¤è®¾ç½®èƒŒæ™¯\n\n\nå°†ä½ å‡†å¤‡çš„å›¾ç‰‡urlæ›¿æ¢å®˜æ–¹çš„ç¤ºä¾‹å›¾ç‰‡urlå°±å¯ä»¥äº†\n\n2.å‘½ä»¤åœ¨å¡ç‰‡æ¶ˆæ¯ç¼–è¾‘å™¨ä¸­ï¼Œç¼–è¾‘å¥½ä½ çš„æ¶ˆæ¯åï¼Œå°±å¯ä»¥ç”¨å‘½ä»¤æ¥ä¸Šä¼ ä½ çš„å¡ç‰‡æ¶ˆæ¯äº†\nå‘½ä»¤ä¸º /setifoï¼Œæ“ä½œå¦‚ä¸‹ï¼Œå…ˆå±•å¼€è¾“å…¥æ \n\nå…ˆé”®å…¥å‘½ä»¤ï¼Œå†ç‚¹å‡»ä»£ç å—æŒ‰é’®\n\nå°†ä½ çš„å¡ç‰‡æ¶ˆæ¯ç²˜è´´è¿›å»ï¼Œç‚¹å‡»ç¡®å®š\n\néšåå‘é€æ¶ˆæ¯\n\nå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæœºå™¨äººä¼šå…ˆå‘é€ä¸€ä¸ªæ¶ˆæ¯ç¤ºä¾‹ï¼Œå†æç¤ºæ‚¨é…ç½®æˆåŠŸ\n\næœ‰ç”¨æˆ·å‘é€é“¾æ¥æ—¶ï¼Œæœºå™¨äººæ’¤å›å°±ä¼šä½¿ç”¨æ­¤æ¨¡æ¿è¿›è¡Œæ“ä½œï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","Kook"]},{"title":"ã€Pythonã€‘seleniumé‡åˆ°ActionChains.move_to_element() takes 2 positional arguments but 4 were givenæŠ¥é”™","url":"/posts/2142561511/","content":"åˆšå¼€å§‹å­¦çš„æ—¶å€™ï¼Œç”¨ç«ç»’çš„seleniumæ’ä»¶å½•åˆ¶äº†ä¸€ä¸ªæ“ä½œï¼Œå¯¼å‡ºä¸ºäº†pythonæ–‡ä»¶ï¼›\n\n\nä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤è¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœæ²¡æœ‰pytestç”¨pipå®‰è£…ä¸€ä¸‹å°±è¡Œï¼‰\npip install pytestpip install selenium\n\nç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œå¯¼å‡ºçš„æ–‡ä»¶\npytest test_test01.py\n\nä¼šå¾—åˆ°è¿™ä¸ªæŠ¥é”™\n      actions = ActionChains(self.driver)&gt;     actions.move_to_element(element, 0, 0).perform()E     TypeError: ActionChains.move_to_element() takes 2 positional arguments but 4 were giventest_test1.py:42: TypeError\n\nå¯æˆ‘å‹æ ¹æ²¡æœ‰ä¿®æ”¹è¿‡å¯¼å‡ºçš„æ–‡ä»¶ï¼Œè¿™ä¸ªæŠ¥é”™æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ\nç›®æµ‹æ˜¯é«˜ä½ç‰ˆæœ¬çš„pythonçš„seleniumåŒ…ä¸­ï¼ŒæŠ¥é”™çš„ActionChains.move_to_element()è¿™ä¸ªå‡½æ•°çš„ä¼ å‚è¢«ä¿®æ”¹è¿‡ï¼›è€Œæ’ä»¶ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œä¸Šæ–¹çš„è¿™ä¸ªå°±æ˜¯æ­£ç¡®çš„ä¼ å‚ï¼Œä¸‹æ–¹çš„è¿™ä¸ªå¸¦0,0çš„ä¼ å‚æ˜¯é”™è¯¯çš„\n# 3 | mouseOver | css=.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget | element = self.driver.find_element(By.CSS_SELECTOR, &quot;.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget&quot;)actions = ActionChains(self.driver)actions.move_to_element(element).perform()  # æ­£ç¡®# 4 | mouseOut | css=.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget | element = self.driver.find_element(By.CSS_SELECTOR, &quot;body&quot;)actions = ActionChains(self.driver)actions.move_to_element(element, 0, 0).perform() # é”™è¯¯\n\n\nå¯ä»¥æŸ¥çœ‹å‡½æ•°å®šä¹‰ï¼Œåªæ¥å—ä¸€ä¸ªå‚æ•°\n\næŠŠè¿™é‡Œçš„ä¸¤ä¸ª0,0åˆ é™¤æ‰å°±è¡Œäº†ï¼Œè¿è¡Œçš„ç»“æœå’Œæˆ‘å½•åˆ¶çš„æ•ˆæœç›¸åŒï¼Œæ²¡æœ‰é—®é¢˜ï¼\n\né¡ºå¸¦é™„ä¸Šæœ¬æ¬¡debugçš„ç‰ˆæœ¬å·\npython             3.10.5pytest             7.4.0selenium           4.11.2ç«ç‹æµè§ˆå™¨ç‰ˆæœ¬ 116.0.2ï¼ˆ64ä½ï¼‰ç«ç‹æµè§ˆå™¨Selenium IDEæ’ä»¶ç‰ˆæœ¬ 3.17.4\n\nå¦‚æœå¸®åˆ°äº†ä½ ï¼Œè¿˜è¯·è¯„è®ºæ”¯æŒæˆ‘ä¸€ä¸‹ï¼Œè°¢è°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","selenium"]},{"title":"ã€VMwareã€‘sshè¿æ¥deepinè™šæ‹Ÿæœº","url":"/posts/1211975221/","content":"sshè¿æ¥linuxè™šæ‹Ÿæœºï¼Œä»¥deepin20.3ä¸ºä¾‹\n\n\n\n1.VMWare è™šæ‹Ÿç½‘å¡é…ç½®VMWareè™šæ‹Ÿæœºå¸¸ç”¨çš„ç½‘ç»œé“¾æ¥æ–¹å¼æœ‰ä¸‹é¢è¿™3ç§\n\næ¡¥æ¥ï¼ˆæœ€æ–¹ä¾¿ï¼‰\nnatï¼ˆéœ€è¦è®¾ç½®ç«¯å£æ˜ å°„ï¼‰\nä»…ä¸»æœºï¼ˆæ— æ³•è”ç½‘ï¼‰\n\nåœ¨æˆ‘çš„æµ‹è¯•ä¸­ï¼Œä¸ç®¡ç”¨ä¸Šé¢å“ªç§æ–¹å¼å®‰è£…ï¼Œéƒ½æ˜¯å¯ä»¥ç›´æ¥æŸ¥è¯¢IPåï¼Œè¿›è¡Œsshè¿æ¥çš„ã€‚\néœ€è¦æ³¨æ„æ˜¯ï¼Œå¦‚æœä½ æ‰€åœ¨çš„ç¯å¢ƒæ²¡æœ‰ä½ å¯ä»¥ç›´æ¥ç®¡ç†çš„è·¯ç”±å™¨ï¼ˆæ¯”å¦‚æ ¡å›­ç½‘ï¼‰é‚£å°±ä¸è¦é€‰æ‹©æ¡¥æ¥æ¨¡å¼ï¼Œä¸ç„¶ä½ çš„Linuxè™šæ‹Ÿæœºå¯èƒ½å› ä¸ºæ²¡æœ‰ç™»é™†æ ¡å›­ç½‘è€Œæ— æ³•ä¸Šç½‘ï¼›è¿™æ—¶å€™å»ºè®®é€‰æ‹©NATæ¨¡å¼ï¼\n\næ¡¥æ¥æ¨¡å¼ï¼šä»¥å½“å‰ä¸»æœºä¸ºæ¡¥ï¼Œç›´æ¥æ¥å…¥ä¸Šçº§è·¯ç”±å™¨ï¼›æ­¤æ—¶è™šæ‹Ÿæœºä¼šä½œä¸ºä¸€ä¸ªæ™®é€šè®¾å¤‡æ¥å…¥å±€åŸŸç½‘ï¼Œå¯ä»¥è¢«å±€åŸŸç½‘å†…çš„å…¶ä»–ç”µè„‘ç›´æ¥è®¿é—®ï¼›\nNATæ¨¡å¼ï¼šå€Ÿç”¨å½“å‰ä¸»æœºçš„ç«¯å£è¿›è¡Œäº’è”ç½‘è®¿é—®ï¼Œæ­¤æ—¶è™šæ‹Ÿæœºå¹¶æ²¡æœ‰ç›´æ¥æ¥å…¥å±€åŸŸç½‘ï¼Œå¦‚æœå…¶ä»–å±€åŸŸç½‘å†…è®¾å¤‡æƒ³è®¿é—®è™šæ‹Ÿæœºï¼Œå¿…é¡»è®¾ç½®ç«¯å£æ˜ å°„ï¼›å½“å‰ä¸»æœºå¯ä»¥æ­£å¸¸é€šè¿‡è™šæ‹Ÿæœºçš„IPè®¿é—®åˆ°è™šæ‹Ÿæœºã€‚\nä»…ä¸»æœºæ¨¡å¼ï¼šåªæœ‰å½“å‰ä¸»æœºèƒ½è®¿é—®åˆ°è™šæ‹Ÿæœºï¼Œä¸”è¯¥è™šæ‹Ÿæœºæ— æ³•ä¸Šç½‘ï¼›\n\nå¦‚ä¸‹ä¾¿æ˜¯æˆ‘å®‰è£…ï¼ˆåˆ›å»ºï¼‰è™šæ‹Ÿæœºæ—¶ï¼Œé€‰æ‹©æ¡¥æ¥ç½‘ç»œçš„æˆªå›¾ã€‚\n\né¡ºå¸¦æä¸€å˜´ï¼Œå®‰è£…deepinè™šæ‹Ÿæœºçš„æ—¶å€™ï¼Œç¯å¢ƒé€‰æ‹©ubuntu 64ä½å°±å¯ä»¥äº†ï¼Œå¹¶ä¸éœ€è¦å»æœdeepinåŸºäºdebainçš„ç‰ˆæœ¬å·ï¼ˆè€Œä¸”æˆ‘ä¹Ÿæ²¡æœåˆ°ï¼‰\n2.å®‰è£… opensshåœ¨ è™šæ‹Ÿæœº ä¸­æ‰§è¡Œï¼š\nsudo apt install openssh-client openssh-server\nsudo /etc/init.d/ssh restart\n\næˆ‘å®‰è£…çš„æ˜¯deepin20.3ï¼Œè‡ªå¸¦äº†è¿™ä¸¤ä¸ªè½¯ä»¶åŒ…ï¼Œæ‰€ä»¥åªéœ€è¦æ‰§è¡Œé‡å¯ä¸€ä¸‹sshï¼Œä¿è¯æœåŠ¡æ­£å¸¸å°±è¡Œäº†\n$ sudo apt install openssh-client openssh-serverè¯·è¾“å…¥å¯†ç :éªŒè¯æˆåŠŸæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ       openssh-client å·²ç»æ˜¯æœ€æ–°ç‰ˆ (1:7.9p1.10-deepin1)ã€‚openssh-server å·²ç»æ˜¯æœ€æ–°ç‰ˆ (1:7.9p1.10-deepin1)ã€‚å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚\n\nè€Œåœ¨centos8ä¸­ï¼Œopenssh-serverä¹Ÿæ˜¯è‡ªå¸¦äº†ï¼Œä¸éœ€è¦å®‰è£…ï¼Œå¯åŠ¨å°±è¡Œäº†\nsystemctl start sshd\n\n3.æŸ¥è¯¢è™šæ‹Ÿæœº IPåœ¨ Linux è™šæ‹Ÿæœº ä¸­æ‰§è¡Œï¼š\nifconfig\n\næ‰¾åˆ° ens33 ä¸‹çš„ IPv4 åœ°å€ï¼Œè®°ä¸‹æ¥ï¼ˆä½ çš„è™šæ‹Ÿæœºé‡Œé¢å¯èƒ½ä¸æ˜¯33ï¼Œè¿™ä¸é‡è¦ï¼‰\n\n4.è®¾ç½®ç«¯å£è½¬å‘\nå’³å’³ï¼Œæˆ‘å‘ç°åŸæ¥NATåœ¨è™šæ‹Ÿæœºé‡Œé¢æŸ¥è¯¢åˆ°çš„é‚£ä¸ªIPä¹Ÿæ˜¯å¯ä»¥ç›´æ¥é“¾æ¥çš„ï¼Œæ‰€ä»¥è®¾ç½®ç«¯å£è½¬å‘ä¹Ÿæ˜¯æ²¡æœ‰å¿…è¦çš„ğŸ¤£ï¼é™¤éä½ æƒ³è¦è®©å±€åŸŸç½‘å†…çš„å…¶ä»–æœºå™¨é“¾æ¥åˆ°ä½ è¿™ä¸ªè™šæ‹Ÿæœºé‡Œé¢çš„æœåŠ¡ã€‚\næ‰€ä»¥è¿™ä¸€æ­¥æ˜¯å¯ä»¥è·³è¿‡çš„ï¼›ä¸è¿‡è®°å½•ä¸‹æ¥ï¼Œå¦‚æœä½ æœ‰è¿™ä¸ªéœ€æ±‚å°±å¯ä»¥æ ¹æ®æ•™ç¨‹è®¾ç½®ä¸€ä¸‹ã€‚\n\nåœ¨ VMWare Workstation ä¸­ï¼š\nèœå•æ  â†’ ç¼–è¾‘ â†’ è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ â†’ VMNet8 -&gt; æ›´æ”¹è®¾ç½® â†’ NAT è®¾ç½® â†’ æ·»åŠ ç«¯å£è½¬å‘\n\néœ€è¦æä¾›ç®¡ç†å‘˜æƒé™ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰ç¡®å®š\n\nç¡®å®šäº†ç®¡ç†å‘˜æƒé™åï¼Œå†é€‰æ‹©VMnet8ï¼Œç‚¹å‡»NATè®¾ç½®\n\nç‚¹å‡»æ·»åŠ ç«¯å£è½¬å‘\n\n\nè¿›å…¥æ˜ å°„ä¼ å…¥ç«¯å£ç•Œé¢åï¼ŒæŒ‰ä¸‹é¢å¡«å†™\n\nä¸»æœºç«¯å£ï¼šæ˜¯ä½ å½“å‰å®¿ä¸»æœºçš„æœ¬æœºç«¯å£ï¼Œå¯ä»¥éšä¾¿å¡«ä¸€ä¸ªï¼›ä½†è¦ä¿è¯ä¸è¦å’Œwindowså·²æœ‰çš„æœ¬åœ°ç«¯å£å†²çªã€‚ç«¯å£å·èŒƒå›´æ˜¯0~65535ï¼Œå»ºè®®é€‰ç”¨5ä½æ•°çš„ä¸å¸¸ç”¨ç«¯å£ï¼\nè™šæ‹ŸæœºIPåœ°å€ï¼šä½¿ç”¨ifconfigæŸ¥åˆ°çš„è™šæ‹Ÿæœºip\nè™šæ‹Ÿæœºç«¯å£ï¼š22ï¼ˆsshé»˜è®¤ç«¯å£ï¼‰\n\nç¡®å®šï¼Œå¹¶ç‚¹å‡»è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨ä¸­çš„åº”ç”¨ï¼ˆæˆ–è€…ç¡®å®šï¼‰æŒ‰é’®ï¼›\n5.å¼€æ”¾é˜²ç«å¢™åœ¨ deepin è™šæ‹Ÿæœº ä¸­æ‰§è¡Œï¼š\nsudo ufw allow ssh\n\nå¦‚æœufwå‘½ä»¤æ‰¾ä¸åˆ°ï¼Œé‚£å°±å®‰è£…ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤\n$ sudo ufw allow sshsudo: ufwï¼šæ‰¾ä¸åˆ°å‘½ä»¤\n\n$ sudo apt-get install ufwæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ       ä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼š  ufwå‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 1 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚éœ€è¦ä¸‹è½½ 164 kB çš„å½’æ¡£ã€‚è§£å‹ç¼©åä¼šæ¶ˆè€— 852 kB çš„é¢å¤–ç©ºé—´ã€‚è·å–:1 https://community-packages.deepin.com/deepin apricot/main amd64 ufw all 0.36-1 [164 kB]å·²ä¸‹è½½ 164 kBï¼Œè€—æ—¶ 0ç§’ (1,316 kB/s)æ­£åœ¨é¢„è®¾å®šè½¯ä»¶åŒ… ...æ­£åœ¨é€‰ä¸­æœªé€‰æ‹©çš„è½¯ä»¶åŒ… ufwã€‚(æ­£åœ¨è¯»å–æ•°æ®åº“ ... ç³»ç»Ÿå½“å‰å…±å®‰è£…æœ‰ 251044 ä¸ªæ–‡ä»¶å’Œç›®å½•ã€‚)å‡†å¤‡è§£å‹ .../archives/ufw_0.36-1_all.deb  ...æ­£åœ¨è§£å‹ ufw (0.36-1) ...æ­£åœ¨è®¾ç½® ufw (0.36-1) ...Creating config file /etc/ufw/before.rules with new versionCreating config file /etc/ufw/before6.rules with new versionCreating config file /etc/ufw/after.rules with new versionCreating config file /etc/ufw/after6.rules with new versionCreated symlink /etc/systemd/system/multi-user.target.wants/ufw.service â†’ /lib/systemd/system/ufw.service.æ­£åœ¨å¤„ç†ç”¨äº rsyslog (8.1901.0.10-1+dde) çš„è§¦å‘å™¨ ...æ­£åœ¨å¤„ç†ç”¨äº man-db (2.8.5-3) çš„è§¦å‘å™¨ ...\n\nå†æ‰§è¡Œä¸€ä¸‹ï¼Œæ˜¾ç¤ºçš„ç»“æœå¦‚ä¸‹ã€‚æ­¤æ—¶å°±å·²ç»okäº†\n$ sudo ufw allow sshRules updatedRules updated (v6)\n\n6.è¿æ¥æµ‹è¯•è¿™æ˜¯sshè¿æ¥çš„é€šç”¨æ ¼å¼ï¼Œé»˜è®¤çš„sshç«¯å£æ˜¯22\nssh ç”¨æˆ·å@è™šæ‹Ÿæœºip\n\nå¦‚æœæ˜¯natç«¯å£æ˜ å°„ï¼Œéœ€è¦æŒ‡å®šipï¼Œå°±åœ¨åæ–¹æ·»åŠ -pé€‰æ‹©ç«¯å£ï¼›å‡è®¾ä½ è®¾ç½®äº†NATè™šæ‹Ÿæœº22ç«¯å£åˆ°ä¸»æœº2222ç«¯å£çš„NATæ˜ å°„ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œé“¾æ¥ï¼Œå› ä¸ºæ˜ å°„åˆ°äº†æœ¬åœ°ï¼Œæ‰€ä»¥IPæˆ‘ä»¬å¯ä»¥å¡«localhostæˆ–è€…127.0.0.1ä»£è¡¨æœ¬æœºçš„æœ¬åœ°IPï¼ŒäºŒè€…æ˜¯ç­‰ä»·çš„\nssh ç”¨æˆ·å@localhost -p 2222ssh ç”¨æˆ·å@127.0.0.1 -p 2222\n\nåœ¨windowsçš„cmdä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°±èƒ½è¿ä¸Šä½ çš„è™šæ‹Ÿæœº\nPS C:\\Users\\moth&gt; ssh mothra@192.168.6.113The authenticity of host &#x27;192.168.6.113 (192.168.6.113)&#x27; can&#x27;t be established.ED25519 key fingerprint is SHA256:ZFGdOP9rRgV3SA0V1W3yikrTWDd8V+8sYxTPgyQu5WQ.This key is not known by any other namesAre you sure you want to continue connecting (yes/no/[fingerprint])? yesWarning: Permanently added &#x27;192.168.6.113&#x27; (ED25519) to the list of known hosts.mothra@192.168.6.113&#x27;s password: éªŒè¯æˆåŠŸWelcome to Deepin 20.9 GNU/Linux    * Homepage:https://www.deepin.org/    * Bugreport:https://bbs.deepin.org/mothra@mothra-PC:~$\n\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å…¶ä»–sshç»ˆç«¯æ¥é“¾æ¥ï¼Œå…·ä½“æ–¹æ³•æ ¹æ®ç»ˆç«¯è½¯ä»¶ç™¾åº¦æ•™ç¨‹å°±è¡Œäº†ã€‚\n7.ç”Ÿæˆ ssh å¯†é’¥å¯¹ï¼ˆé€‰åšï¼‰åœ¨ å®¿ä¸»æœº (Windows) æ‰§è¡Œï¼š\nssh-keygen\n\næ•²å›è½¦ç›´åˆ°æ‰§è¡Œå®Œæˆï¼ˆå·²æœ‰å…¬é’¥å¯è·³è¿‡æ­¤æ­¥ï¼‰\nåœ¨ å®¿ä¸»æœº (Windows) ä¸­ç”¨ Powershell æ‰§è¡Œï¼š\ncat ~/.ssh/id_rsa.pub | ssh è™šæ‹Ÿæœºç”¨æˆ·å@è™šæ‹ŸæœºIP &quot;cat &gt;&gt; ~/.ssh/authorized_keys&quot;\n\nå‘½ä»¤ä¸­çš„è™šæ‹Ÿæœºç”¨æˆ·åç”¨ä½ åœ¨è™šæ‹Ÿæœºä¸­åˆ›å»ºçš„linuxç”¨æˆ·åæ›¿æ¢ï¼›\nè™šæ‹ŸæœºIPç”¨åˆšåˆšç¬¬3æ­¥ä¸­æŸ¥åˆ°çš„è™šæ‹ŸæœºIPæ›¿æ¢ï¼ˆåˆšåˆšèƒŒè¯µçš„ï¼‰ï¼›\nè¾“å…¥å¯†ç å³å¯ï¼\n\né…ç½®äº†sshå¯†é’¥åï¼Œæ— éœ€é”®å…¥å¯†ç å³å¯è¿æ¥ï¼ˆå¦‚æœä½ ä½¿ç”¨vscodeæ¥sshé“¾æ¥è™šæ‹Ÿæœºï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œéå¸¸çœäº‹ï¼‰\nssh è™šæ‹Ÿæœºç”¨æˆ·å@è™šæ‹ŸæœºIP\n\n\nå‚è€ƒåšå®¢ï¼šhttps://www.cnblogs.com/BinarySong/p/16244415.html\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","deepin","è™šæ‹Ÿæœº"]},{"title":"ã€Pythonã€‘è‡ªåŠ¨åŒ–æµ‹è¯•selenium","url":"/posts/192617188/","content":"è´ªå¤šåš¼ä¸çƒ‚ï¼Œå½“æ—¶å°±æ˜¯ä¸ºäº†é¢è¯•é›¶æ—¶æŠ±ä½›è„šå­¦çš„ï¼Œæ—¢ç„¶ç°åœ¨ç”¨ä¸åˆ°äº†ï¼ˆé¢è¯•çš„æ—¶å€™ä¹Ÿæ²¡é—®åˆ°ï¼Œæœ‰ç‚¹ç™½å­¦äº†çš„æ„Ÿè§‰ï¼‰ï¼Œé‚£æ²¡å¿…è¦ç»§ç»­è®°å½•åšå®¢äº†ã€‚æ‰€ä»¥è¯·ä¸è¦çœ‹æœ¬æ–‡ï¼\n\nè¯·ä¸è¦çœ‹æœ¬æ–‡\nè¯·ä¸è¦çœ‹æœ¬æ–‡\nè¯·ä¸è¦çœ‹æœ¬æ–‡\n\n1.ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•è‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡è½¯ä»¶æµ‹è¯•çš„è‡ªåŠ¨åŒ–ï¼Œåœ¨é¢„è®¾çŠ¶æ€ä¸‹è¿è¡Œåº”ç”¨ç¨‹åºæˆ–è€…ç³»ç»Ÿï¼Œé¢„è®¾æ¡ä»¶åŒ…æ‹¬æ­£å¸¸å’Œå¼‚å¸¸ï¼Œæœ€åè¯„ä¼°è¿è¡Œç»“æœã€‚å°†äººä¸ºé©±åŠ¨çš„æµ‹è¯•è¡Œä¸ºè½¬åŒ–ä¸ºæœºå™¨æ‰§è¡Œçš„è¿‡ç¨‹ã€‚\nè¯´ç™½äº†å°±æ˜¯ç¼–å†™ä¸€ç³»åˆ—ä»£ç æ¥å®ç°è‡ªåŠ¨å¸®æˆ‘ä»¬æµ‹è¯•æŸä¸€ä¸ªåŠŸèƒ½æ˜¯å¦æœ‰å•¥é—®é¢˜ã€‚æ¯”èµ·è‡ªå·±å¼„ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•èƒ½è¦†ç›–åˆ°æ›´å¤šæƒ…å†µï¼Œç‰¹åˆ«æ˜¯æŸäº›åœ¨å®é™…æƒ…å†µä¸­ä¸å¥½é€šè¿‡äººå·¥æ¨¡æ‹Ÿå‡ºçš„é—®é¢˜ã€‚\nä¸‹å›¾æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„é‡‘å­—å¡”æ¨¡å‹ï¼Œä»ä¸‹å¾€ä¸Šä»£è¡¨æµ‹è¯•éœ€è¦çš„æ—¶é—´å’ŒæŠ•å…¥ï¼Œå•å…ƒæµ‹è¯•åº”è¯¥æ˜¯æŠ•å…¥æœ€å¤§çš„æµ‹è¯•ã€‚\n\n1.1 å•å…ƒæµ‹è¯•æ‰€è°“å•å…ƒæµ‹è¯•ï¼Œå°±æ˜¯æˆ‘ä»¬ä»£ç ä¸­æ¯ä¸€ä¸ªå‡½æ•°ã€ç¨‹åºæ¨¡å—çš„æµ‹è¯•ã€‚\nå•å…ƒæµ‹è¯•é€šå¸¸éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š\n\nç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼šä¸ºæ¯ä¸ªå‡½æ•°ã€æ–¹æ³•æˆ–ç±»ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œè¿™äº›ç”¨ä¾‹åŒ…æ‹¬è¾“å…¥æ•°æ®ã€é¢„æœŸè¾“å‡ºä»¥åŠå¯¹åº”çš„å‡½æ•°è°ƒç”¨ã€‚\nè¿è¡Œæµ‹è¯•ï¼šä½¿ç”¨å•å…ƒæµ‹è¯•æ¡†æ¶è¿è¡Œç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ã€‚æµ‹è¯•æ¡†æ¶ä¼šæ‰§è¡Œæµ‹è¯•å¹¶æŠ¥å‘Šæ¯ä¸ªæµ‹è¯•çš„ç»“æœã€‚\næ–­è¨€æµ‹è¯•ç»“æœï¼šæµ‹è¯•æ¡†æ¶ä¼šè‡ªåŠ¨æ¯”è¾ƒå®é™…è¾“å‡ºä¸é¢„æœŸè¾“å‡ºï¼Œå¦‚æœä¸åŒ¹é…åˆ™ä¼šäº§ç”Ÿé”™è¯¯æŠ¥å‘Šã€‚\nä¿®å¤é”™è¯¯ï¼šå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œå¼€å‘äººå‘˜éœ€è¦æ£€æŸ¥ä»£ç å¹¶ä¿®å¤é—®é¢˜ï¼Œç¡®ä¿ä»£ç æŒ‰é¢„æœŸå·¥ä½œã€‚\né‡å¤æµ‹è¯•ï¼šåœ¨æ¯æ¬¡ä»£ç æ›´æ”¹åï¼Œéƒ½éœ€è¦é‡æ–°è¿è¡Œç›¸åº”çš„å•å…ƒæµ‹è¯•ï¼Œä»¥ç¡®ä¿æ–°çš„æ›´æ”¹æ²¡æœ‰ç ´åç°æœ‰çš„åŠŸèƒ½ã€‚\n\nå•å…ƒæµ‹è¯•çš„ç›®æ ‡ï¼Œå°±æ˜¯ä¿è¯æˆ‘ä»¬å†™å‡ºæ¥çš„å‡½æ•°æ˜¯ä¾ç…§æˆ‘ä»¬çš„é¢„æœŸè¿è¡Œçš„ï¼Œèƒ½å¾—åˆ°æˆ‘ä»¬éœ€è¦çš„ç»“æœã€‚è€Œæœ€ç»ˆç›®çš„ï¼Œå°±æ˜¯é¿å…å½“ä¸€ä¸ªå‡½æ•°å·²ç»æŠ•å…¥ä½¿ç”¨äº†ï¼Œæ‰å‘ç°è¿™ä¸ªå‡½æ•°çš„è¿è¡Œä¸é¢„æœŸç»“æœä¸ç¬¦åˆã€‚\n1.2 æ¥å£æµ‹è¯•ç›®å‰ä¸€èˆ¬é‡‡ç”¨åç«¯æä¾›APIæ¥å£ï¼Œå‰ç«¯ä½¿ç”¨é™æ€é¡µé¢çš„æ–¹å¼æ¥å®ç°å‰åç«¯åˆ†ç¦»ã€‚\nè€Œæ¥å£æµ‹è¯•ï¼Œå°±æ˜¯ä¿è¯æˆ‘ä»¬åç«¯æä¾›çš„APIæ¥å£èƒ½æ­£ç¡®åˆ†ç¦»æˆ‘ä»¬é¢„æœŸçš„å‚æ•°ï¼Œå¹¶æä¾›ä¸ä¹‹ç›¸ç¬¦åˆçš„è¿”å›ç»“æœã€‚\nå½“æˆ‘ä»¬å®Œæˆäº†åç«¯æ¥å£çš„ç¼–å†™åï¼Œå°±èƒ½åœ¨äº§å“å‰æœŸè¿›è¡Œæ¥å£æµ‹è¯•ï¼Œé¿å…äº§å“å·²ç»ä¸Šçº¿äº†æ‰å‘ç°æ¥å£æœ‰é—®é¢˜çš„æƒ…å†µã€‚\n\näº§å“å‰æœŸæ¥å£å®Œæˆåä»‹å…¥\nç”¨ä¾‹ç»´æŠ¤é‡å°\né€‚åˆæ¥å£å˜åŠ¨è¾ƒå°ï¼Œç•Œé¢å˜åŠ¨é¢‘ç¹çš„é¡¹ç›®\n\nå¸¸è§çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·æœ‰ï¼šRobotFrameworkï¼ŒJMeterï¼ŒSoapUIï¼ŒTestNG+HttpClientï¼ŒPostman ç­‰ã€‚\n1.3 UIæµ‹è¯•å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä»–ä»¬æ¥è§¦åˆ°çš„å…¶å®è¿˜æ˜¯UIï¼ˆå‰ç«¯ï¼‰ï¼Œåœ¨å®Œæˆäº†æ¥å£æµ‹è¯•åï¼Œæˆ‘ä»¬éœ€è¦å¯¹å‰ç«¯ç•Œé¢çš„æ“ä½œè¿›è¡Œæµ‹è¯•ã€‚ç‰¹ç‚¹ï¼š\n\nç”¨ä¾‹ç»´æŠ¤é‡å¤§\né¡µé¢ç›¸å…³æ€§å¼ºï¼Œéœ€è¦å®ŒæˆåæœŸé¡¹ç›®å¼€å‘åæ‰ä»‹å…¥\nç”±äºå‰ç«¯ç•Œé¢ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼ŒUIæµ‹è¯•é€‚åˆç•Œé¢å˜åŠ¨è¾ƒå°çš„é¡¹ç›®\n\nUIè‡ªåŠ¨åŒ–æµ‹è¯•çš„å¥½å¤„\n\nå‡å°‘é‡å¤æµ‹è¯•çš„æ—¶é—´ï¼Œå®ç°å¿«é€Ÿå›å½’æµ‹è¯•\nåˆ›å»ºå¯é çš„æµ‹è¯•è¿‡ç¨‹ï¼Œé¿å…æµ‹è¯•è¿‡ç¨‹ä¸­çš„äººä¸ºé”™è¯¯\nå¯ä»¥å®ç°å¾ˆå¤šæ›´åŠ ç¹ççš„æµ‹è¯•ï¼Œæˆ–è€…éš¾ä»¥ç”¨äººå·¥å®ç°çš„æµ‹è¯•ï¼Œå‡å°‘äººåŠ›æˆæœ¬\næ›´å¥½çš„åˆ©ç”¨èµ„æºå’Œæµ‹è¯•è„šæœ¬\n\nUIå±‚çš„æµ‹è¯•æ¡†æ¶æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚Windowså®¢æˆ·ç«¯æµ‹è¯•çš„AutoITï¼Œwebæµ‹è¯•çš„seleniumä»¥åŠTestPlant eggPlantï¼ŒRobot frameworkï¼ŒQTPç­‰ã€‚\n1.4 è‡ªåŠ¨åŒ–æµ‹è¯•é€‚ç”¨å¯¹è±¡\näº§å“å‹é¡¹ç›®ã€‚äº§å“å‹çš„é¡¹ç›®ï¼Œæ–°ç‰ˆæœ¬æ˜¯åœ¨æ—§ç‰ˆæœ¬çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼ŒåŠŸèƒ½å˜ä¸å¤§çš„é¡¹ç›®ï¼Œä½†é¡¹ç›®çš„æ–°è€åŠŸèƒ½éƒ½å¿…é¡»é‡å¤çš„è¿›è¡Œå›å½’æµ‹è¯•ã€‚å›å½’æµ‹è¯•æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¼ºé¡¹ï¼Œå®ƒèƒ½å¤Ÿå¾ˆå¥½çš„éªŒè¯ä½ æ˜¯å¦å¼•å…¥äº†æ–°çš„ç¼ºé™·ï¼Œè€çš„ç¼ºé™·æ˜¯å¦ä¿®æ”¹è¿‡æ¥äº†ã€‚åœ¨æŸç§ç¨‹åº¦ä¸Šå¯ä»¥æŠŠè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·å«åšå›å½’æµ‹è¯•å·¥å…·ã€‚\næœºæ¢°é¢‘ç¹çš„æµ‹è¯•ã€‚æ¯æ¬¡éœ€è¦è¾“å…¥å¤§é‡ç”¨ä¾‹ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­è¿è¡Œçš„å‘¨æœŸæ¯”è¾ƒé•¿ã€‚ æ¯”å¦‚å…¼å®¹æ€§æµ‹è¯•ã€‚\n\nä»¥ä¸‹æƒ…å†µå°±ä¸é€‚ç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•ï¼š\n\néœ€æ±‚å˜åŠ¨é¢‘ç¹ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬ä¸èƒ½å¾ˆå¥½çš„å¤ç”¨ï¼ˆå†™ä¸ªæµ‹è¯•è„šæœ¬çš„æ—¶é—´éƒ½å¤Ÿäººå·¥æµ‹è¯•äº†ï¼Œè‡ªç„¶ä¸é€‚åˆè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰\né¡¹ç›®å‘¨æœŸçŸ­ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬ç¼–å†™å®Œæ¯•åä½¿ç”¨æ¬¡æ•°ä¸å¤šï¼ˆæ²¡å•¥æ—¶é—´å†™è„šæœ¬ï¼‰\näº¤äº’æ€§è¾ƒå¼ºï¼Œéœ€è¦äººå·¥å¹²é¢„çš„é¡¹ç›®ï¼Œè‡ªåŠ¨åŒ–æ— æ³•å®æ–½\n\n1.5 å¦‚ä½•å®æ–½è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Ÿå•çº¯çš„è®²ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„å…·ä½“å®ç°ï¼Œåº”è¯¥æ˜¯åŒ…å«ä¸‹é¢ä¸ƒä¸ªè¿‡ç¨‹çš„ã€‚\n\nåˆ†æï¼šæ€»ä½“æŠŠæ¡ç³»ç»Ÿé€»è¾‘ï¼Œåˆ†æå‡ºç³»ç»Ÿçš„æ ¸å¿ƒä½“ç³»æ¶æ„ã€‚\nè®¾è®¡ï¼šè®¾è®¡æµ‹è¯•ç”¨ä¾‹ï¼Œæµ‹è¯•ç”¨ä¾‹è¦è¶³å¤Ÿæ˜ç¡®å’Œæ¸…æ™°ï¼Œè¦†ç›–é¢å¹¿è€Œç²¾\nå®ç°ï¼šå®ç°è„šæœ¬ï¼Œæœ‰ä¸¤ä¸ªè¦æ±‚ä¸€æ˜¯æ–­è¨€ï¼ŒäºŒæ˜¯åˆç†çš„è¿ç”¨å‚æ•°åŒ–ã€‚\næ‰§è¡Œï¼šæ‰§è¡Œè„šæœ¬è¿œè¿œæ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­é‚£ä¹ˆç®€å•ã€‚è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸éœ€è¦æˆ‘ä»¬ä»”ç»†çš„å»åˆ†æåŸå› ã€‚\næ€»ç»“ï¼šæµ‹è¯•ç»“æœçš„åˆ†æï¼Œå’Œæµ‹è¯•è¿‡ç¨‹çš„æ€»ç»“æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å…³é”®ã€‚\nç»´æŠ¤ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬çš„ç»´æŠ¤æ˜¯ä¸€ä¸ªéš¾ä»¥è§£å†³ä½†åˆå¿…é¡»è¦è§£å†³çš„é—®é¢˜ã€‚\nåˆ†æï¼šåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•è¿‡ç¨‹ä¸­æ·±åˆ»çš„åˆ†æè‡ªåŠ¨åŒ–ç”¨ä¾‹çš„è¦†ç›–é£é™©å’Œè„šæœ¬ç»´æŠ¤çš„æˆæœ¬ã€‚\n\n\n2.å®‰è£…Seleniumç¯å¢ƒæœ¬æ–‡ä½¿ç”¨å„ä¸ªè½¯ä»¶çš„ç‰ˆæœ¬å·\npython             3.10.5pytest             7.4.0selenium           4.11.2ç«ç‹æµè§ˆå™¨ç‰ˆæœ¬   116.0.2ï¼ˆ64ä½ï¼‰ç«ç‹æµè§ˆå™¨Selenium IDEæ’ä»¶ç‰ˆæœ¬ 3.17.4\n\n\n2.1 ç«ç‹å®‰è£…Selenium IDEæ‰“å¼€ç«ç‹ï¼Œç‚¹å‡»å³ä¸Šè§’é€‰æ‹©æ¡†ï¼Œè¿›å…¥æ‰©å±•å’Œä¸»é¢˜\n\nç‚¹å‡»å·¦ä¾§æ‰©å±•ï¼Œæœç´¢ Selenium IDE\n\nç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬è¦çš„ï¼Œå›¾æ ‡æ˜¯è“è‰²çš„ï¼Œä¸­é—´æœ‰ä¸€ä¸ªSeå­—æ¯\n\nè¿›å…¥åï¼Œç‚¹å‡»è·å–æ’ä»¶ï¼ˆè¿™é‡Œæˆ‘å·²ç»å®‰è£…äº†ï¼Œæ‰€ä»¥æ˜¾ç¤ºçš„æ˜¯ç§»é™¤ï¼‰\n\n2.2 windowså®‰è£…pythonåœ¨windowsä¸Špythonå®‰è£…çš„åŸºç¡€æ­¥éª¤å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢ï¼šã€Pythonã€‘åœ¨ä½ çš„äº‘æœåŠ¡&#x2F;ç”µè„‘ä¸Šæ­å»ºPythonç¯å¢ƒ\n\nåˆæ¬¡å®‰è£…pythonçš„æ—¶å€™ï¼Œä¸€å®šè¦å‹¾é€‰ADD PYTHON TO PATHè¿™ä¸ªé€‰é¡¹ï¼Œè¿™ä¸ªåœ¨ä¸Šæ–‡ä¸­æœ‰æåŠã€‚å› ä¸ºéå¸¸é‡è¦æ‰€ä»¥å¤šè¯´å‡ æ¬¡ï¼\n\nå®‰è£…å¥½pythonåï¼Œä½¿ç”¨pipå®‰è£…å¦‚ä¸‹ä¸¤ä¸ªåŒ…\npip install pytestpip install selenium\n\nå¦‚æœæŒ‰ç…§çš„å¾ˆæ…¢å¯ä»¥åŠ ä¸Šé•œåƒæº\npip install pytest -i https://pypi.tuna.tsinghua.edu.cn/simplepip install selenium  -i https://pypi.tuna.tsinghua.edu.cn/simple\n\nwindowsä¸‹å¦‚ä½•é…ç½®pipé•œåƒæºå‚è€ƒï¼šã€Pythonã€‘pipä¸‹è½½ä½¿ç”¨å›½å†…é•œåƒæº\n2.3 å®‰è£…ç«ç‹é©±åŠ¨geckodriverå¦‚æœä½ å°è¯•ç›´æ¥è¿è¡Œseleniumçš„ä»£ç ï¼Œææœ‰å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºä½ æ²¡æœ‰å®‰è£…ç«ç‹å¯¹åº”çš„é©±åŠ¨\nWebDriverException: Message: &#x27;geckodriver&#x27; executable needs to be in PATH.\n\nç«ç‹é©±åŠ¨ä¸‹è½½åœ°å€ï¼šhttps://github.com/mozilla/geckodriver/releases\n\nchromeé©±åŠ¨ä¸‹è½½åœ°å€ï¼šhttps://registry.npmmirror.com/binary.html?path=chromedriver/\nå› ä¸ºæœ¬æ–‡æ“ä½œç”¨çš„éƒ½æ˜¯ç«ç‹ï¼Œæ‰€ä»¥ä¸æåŠchromeçš„æ“ä½œã€‚è¯·è‡ªè¡ŒæŸ¥é˜…å…¶ä»–æ–‡ç« \n\nä¸‹è½½å¥½äº†ä¹‹åï¼Œå°†å…¶ä¸­çš„geckodriver.exeè§£å‹åˆ°windowsä¸‹pythonçš„å®‰è£…è·¯å¾„çš„Scriptsæ–‡ä»¶å¤¹ä¸‹ï¼›\n\nå¦‚æœä½ ç”¨çš„æ˜¯ä¸Šé¢æåˆ°é‚£ç‰‡åšå®¢é‡Œé¢çš„å®‰è£…æ–¹å¼ï¼Œé‚£ä¹ˆåœ¨windowså¹³å°ä¸‹pythoné»˜è®¤çš„å®‰è£…è·¯å¾„å¦‚ä¸‹\nC:\\Users\\moth\\AppData\\Local\\Programs\\Python\\Python310\n\nå¦‚æœä½ ä¸çŸ¥é“ä½ ç”µè„‘ä¸Špythonçš„å®‰è£…è·¯å¾„ï¼Œå¯ä»¥åœ¨vscodeçš„è§£æå™¨ä¸­æ‰¾åˆ°ï¼›å½“ä½ åœ¨vscodeä¸­æ‰“å¼€ä¸€ä¸ªtest.pyæ–‡ä»¶ï¼Œå³ä¸‹è§’å°±ä¼šæ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„è§£æå™¨\n\nç‚¹å‡»å®ƒï¼Œå°±èƒ½çœ‹åˆ°ä½ å®‰è£…çš„pythonçš„è·¯å¾„\n\næ³¨æ„ï¼šå¦‚æœä½ çš„pythonæ˜¯ç”¨windowså•†åº—å®‰è£…çš„ï¼Œé‚£è·¯å¾„é‡Œé¢æ˜¯æ²¡æœ‰Scriptsæ–‡ä»¶å¤¹çš„ï¼æ‰€ä»¥å¼ºçƒˆä¸æ¨èä½¿ç”¨windowså•†åº—æ¥å®‰è£…pythonï¼ˆè™½ç„¶ç¡®å®æ–¹ä¾¿ï¼‰\nä½ å¯ä»¥åœ¨windowsè®¾ç½®-è½¯ä»¶é‡Œé¢æ‰¾åˆ°å¾®è½¯å•†åº—å®‰è£…çš„pythonï¼Œå°†å…¶å¸è½½ï¼Œç„¶åå†ç”¨ä¸Šé¢æåˆ°çš„åŠæ³•é‡æ–°å®‰è£…ä½ éœ€è¦çš„ç‰ˆæœ¬çš„pythonï¼\n\n2.4 å°è¯•å½•åˆ¶ä¸€æ®µæ“ä½œä¸Šé¢çš„å®‰è£…éƒ½å®Œæˆåï¼Œå°±å¯ä»¥æ¥å°è¯•å½•åˆ¶ä¸€æ®µæ“ä½œäº†ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨äº†æˆ‘è‡ªå·±çš„å¯¼èˆªé¡µæ¥æµ‹è¯•ï¼Œæ‰“å¼€ç«ç‹åï¼Œç‚¹å‡»å³ä¸Šè§’çš„è¿™ä¸ªæ‹¼å›¾å›¾æ ‡\n\né€‰æ‹©selenium IDEè¿è¡Œæ‰©å±•\n\nç‚¹å‡»ç¬¬ä¸€ä¸ªï¼Œåœ¨æ–°é¡¹ç›®ä¸­å½•åˆ¶ä¸€ä¸ªæ–°æ“ä½œ\n\néšä¾¿è¾“å…¥ä¸€ä¸ªé¡¹ç›®åå­—\n\né€‰æ‹©ä½ éœ€è¦å½•åˆ¶çš„é¡µé¢urlï¼Œè¿™é‡Œæˆ‘å¡«äº†æˆ‘è‡ªå·±çš„ä¸»é¡µ web.musnow.topï¼Œå¡«å†™å¥½äº†ä¹‹åç‚¹å‡»START RECORDINGå¼€å§‹å½•åˆ¶\n\nå¼€å§‹å½•åˆ¶åï¼Œå³ä¸‹è§’ä¼šå‡ºç°æ­£åœ¨å½•åˆ¶çš„æç¤ºï¼›ä»¥ä¸‹æ˜¯æˆ‘å½•åˆ¶äº†çš„æ“ä½œã€‚\nè¿™é‡Œæˆ‘åœ¨æˆ‘ä¸»é¡µçš„è¾“å…¥æ¡†ä¸­è¾“å…¥äº†ä½ å¥½ï¼Œç‚¹å‡»å›è½¦\n\nç„¶åæˆ‘åˆç‚¹å‡»äº†ç¬¬ä¸€ä¸ªæœç´¢ç»“æœï¼Œå½•åˆ¶åˆ°è¿™é‡Œå°±ç»“æŸäº†\n\nè¿›å…¥selenium IDEçš„é¡µé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„çº¢è‰²æ–¹æ¡†åœæ­¢å½•åˆ¶ï¼ˆä¸‹å›¾ä¸­æ˜¯å·²ç»åœæ­¢å½•åˆ¶åçš„æ ·å­ï¼‰ä¸­é—´ä¼šæ˜¾ç¤ºä½ è¿™æ¬¡å½•åˆ¶åšäº†ä»€ä¹ˆ\n\nå°†æœ¬æ¬¡å½•åˆ¶ä¿å­˜ï¼Œéšä¾¿èµ·ä¸ªåå­—ï¼Œç„¶åå³é”®å·¦ä¾§çš„å½•åˆ¶åï¼Œé€‰æ‹©exportå¯¼å‡º\n\né€‰æ‹©pythonä»£ç ï¼Œç‚¹å‡»å¯¼å‡ºï¼›å¼¹å‡ºçš„æ¡†ä¼šè®©ä½ é€‰æ‹©å¯¼å‡ºè·¯å¾„\n\nä¸‹é¢å°±æ˜¯æˆ‘å¯¼å‡ºåçš„ä»£ç ï¼ŒSelenium IDEä¼šå°†æ–‡ä»¶å‘½åä¸ºé¡¹ç›®å_å½•åˆ¶å.py\n# Generated by Selenium IDEimport pytestimport timeimport jsonfrom selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.common.action_chains import ActionChainsfrom selenium.webdriver.support import expected_conditionsfrom selenium.webdriver.support.wait import WebDriverWaitfrom selenium.webdriver.common.keys import Keysfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilitiesclass TestTest1():  def setup_method(self, method):    self.driver = webdriver.Firefox()    self.vars = &#123;&#125;  def teardown_method(self, method):    self.driver.quit()  def wait_for_window(self, timeout = 2):    time.sleep(round(timeout / 1000))    wh_now = self.driver.window_handles    wh_then = self.vars[&quot;window_handles&quot;]    if len(wh_now) &gt; len(wh_then):      return set(wh_now).difference(set(wh_then)).pop()  def test_test1(self):    # Test name: test1    # Step # | name | target | value    # 1 | open | / |    self.driver.get(&quot;https://web.musnow.top/&quot;)    # 2 | setWindowSize | 1721x935 |    self.driver.set_window_size(1721, 935)    # 3 | mouseOver | css=.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget |    element = self.driver.find_element(By.CSS_SELECTOR, &quot;.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget&quot;)    actions = ActionChains(self.driver)    actions.move_to_element(element).perform()    # 4 | mouseOut | css=.row:nth-child(5) &gt; .col-sm-3:nth-child(3) &gt; .xe-widget |    element = self.driver.find_element(By.CSS_SELECTOR, &quot;body&quot;)    actions = ActionChains(self.driver)    actions.move_to_element(element, 0, 0).perform()    # 5 | click | id=txt |    self.driver.find_element(By.ID, &quot;txt&quot;).click()    # 6 | type | id=txt | ä½ å¥½    self.driver.find_element(By.ID, &quot;txt&quot;).send_keys(&quot;ä½ å¥½&quot;)    # 7 | sendKeys | id=txt | $&#123;KEY_ENTER&#125;    self.vars[&quot;window_handles&quot;] = self.driver.window_handles    # 8 | selectWindow | handle=$&#123;win5784&#125; |    self.driver.find_element(By.ID, &quot;txt&quot;).send_keys(Keys.ENTER)    # 9 | click | css=.\\_paragraph_5yh6i_2 &gt; span &gt; span |    self.vars[&quot;win5784&quot;] = self.wait_for_window(2000)    # 10 | selectWindow | handle=$&#123;win5879&#125; |    self.driver.switch_to.window(self.vars[&quot;win5784&quot;])    self.vars[&quot;window_handles&quot;] = self.driver.window_handles    self.driver.find_element(By.CSS_SELECTOR, &quot;.\\\\_paragraph_5yh6i_2 &gt; span &gt; span&quot;).click()    self.vars[&quot;win5879&quot;] = self.wait_for_window(2000)    self.driver.switch_to.window(self.vars[&quot;win5879&quot;])\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿è¡Œè¿™ä¸ªæ–‡ä»¶\npytest æ–‡ä»¶å\n\nç›´æ¥è¿è¡Œä¼šé‡åˆ°å¦‚ä¸‹çš„æŠ¥é”™\n      actions = ActionChains(self.driver)&gt;     actions.move_to_element(element, 0, 0).perform()E     TypeError: ActionChains.move_to_element() takes 2 positional arguments but 4 were giventest_test1.py:42: TypeError\n\næŠ¥é”™çš„æ„æ€æ˜¯ ActionChains.move_to_element()å‡½æ•°åªéœ€è¦æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä½†å´æä¾›äº†4ä¸ªå‚æ•°ï¼Œå‡ºé”™çš„æ˜¯ç¬¬å››åäºŒè¡Œçš„ä½ç½®\n\nè§£å†³åŠæ³•æ˜¯å°†è¿™é‡Œçš„,0,0ç»™åˆ é™¤ï¼Œç±»ä¼¼38è¡Œï¼Œåªä¼ å…¥elementå‚æ•°å°±å¯ä»¥äº†\nactions.move_to_element(element).perform()\n\nå®Œæ•´è§£å†³åŠæ³•å‚è€ƒï¼šã€Pythonã€‘seleniumé‡åˆ°ActionChains.move_to_element() takes 2 positional arguments but 4 were givenæŠ¥é”™\nä¿®æ”¹å¥½äº†ä¹‹åï¼Œå†ç”¨pytestè¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå…¶ä¼šå¼¹å‡ºä¸€ä¸ªç«ç‹çš„æµè§ˆå™¨çª—å£ï¼Œå¹¶åœ¨çª—å£é‡Œé¢å¤ç°æˆ‘ä»¬åˆšåˆšå½•åˆ¶çš„æ“ä½œäº†ï¼\n3.ä»£ç å­¦ä¹ åªä¼šå½•åˆ¶æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å­¦ä¼šè¿™ä¸ªåº“çš„webdriver APIåŸºæœ¬ä½¿ç”¨ï¼›\n\néœ€è¦æ³¨æ„æ˜¯ï¼Œä¸åŒç‰ˆæœ¬çš„python seleniumåŒ…å…¶å†…éƒ¨å‡½æ•°æœ‰æ‰€åŒºåˆ«ï¼Œè¯·ç¡®è®¤æ‚¨çš„ç‰ˆæœ¬å’Œæœ¬æ–‡æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬ç›¸åŒï¼å¦åˆ™ä¼šå‡ºé—®é¢˜çš„ğŸ˜¶â€ğŸŒ«ï¸\nselenium   4.11.2\n\n3.1 å°è¯•ç‰›åˆ€åœ¨ç™¾åº¦ä¸»é¡µï¼Œç”¨F12æ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼Œé€‰ä¸­æœç´¢æ¡†ï¼Œèƒ½å®šä½åˆ°å¦‚ä¸‹htmlä»£ç \n&lt;input id=&quot;kw&quot; name=&quot;wd&quot; class=&quot;s_ipt&quot; value=&quot;&quot; maxlength=&quot;255&quot; autocomplete=&quot;off&quot;&gt;\n\nå…ˆæ¥çœ‹çœ‹å¦‚ä¸‹çš„ç¤ºä¾‹ä»£ç å§ï¼Œè¿™ä¸ªä»£ç çš„ä½œç”¨æ˜¯åœ¨ç™¾åº¦é‡Œé¢æœç´¢seleniumï¼›\nè¿™é‡Œæˆ‘ä»¬é€‰æ‹©äº†webdriver.Firefox()ç«ç‹ä½œä¸ºé©±åŠ¨ï¼›éšåä½¿ç”¨äº†By.IDå®šä½åˆ°äº†kwçš„ä½ç½®ï¼Œå³è¿™ä¸ªæœç´¢æ¡†ï¼Œå¹¶åœ¨å†…éƒ¨send_keysè¾“å…¥äº†seleniumæ–‡å­—ã€‚\nä¼‘çœ äº†2ç§’åï¼Œåˆé€šè¿‡IDæ‰¾åˆ°äº†suçš„htmlæ ‡ç­¾ï¼ˆè¿™æ˜¯ç¡®è®¤æœç´ çš„æŒ‰é’®ï¼‰ï¼Œå¹¶ä½¿ç”¨click()æ–¹æ³•ç‚¹å‡»äº†è¿™ä¸ªæŒ‰é’®ï¼›\n# coding = utf-8from selenium import webdriverfrom selenium.webdriver.common.by import Byimport timebrowser = webdriver.Firefox()  # ä½¿ç”¨ç«ç‹çš„æµè§ˆå™¨é©±åŠ¨ï¼ˆå¿…é¡»åœ¨pythonå®‰è£…ç›®å½•é‡Œé¢å®‰è£…å¯¹åº”é©±åŠ¨ï¼‰time.sleep(2)browser.get(&quot;http://www.baidu.com&quot;)  # æ‰“å¼€ç½‘é¡µtime.sleep(2)browser.find_element(By.ID,&quot;kw&quot;).send_keys(&quot;selenium&quot;)  # æ‰¾åˆ°ç½‘é¡µä¸­çš„idä¸ºkwçš„åœ°æ–¹ï¼Œè¾“å…¥&quot;selenium&quot;time.sleep(2)browser.find_element(By.ID,&quot;su&quot;).click()  # ç‚¹å‡»idä¸ºsuçš„æŒ‰é’®time.sleep(2)browser.quit()  # é€€å‡ºç½‘é¡µ\n\né™¤äº†quit()ï¼Œè¿˜æœ‰close()åŠæ³•ä¹Ÿèƒ½å…³é—­ç½‘é¡µ\nbrowser.close() # ä¹Ÿå¯ä»¥å…³é—­çª—å£ã€‚# ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼š# closeæ–¹æ³•å…³é—­å½“å‰çš„æµè§ˆå™¨çª—å£ï¼Œquitæ–¹æ³•ä¸ä»…å…³é—­çª—å£ï¼Œè¿˜ä¼šå½»åº•çš„é€€å‡ºwebdriverï¼Œé‡Šæ”¾ä¸driver# serverä¹‹é—´çš„è¿æ¥ã€‚æ‰€ä»¥ç®€å•æ¥è¯´quitæ˜¯æ›´åŠ å½»åº•çš„closeï¼Œquitä¼šæ›´å¥½çš„é‡Šæ”¾èµ„æºã€‚\n\næœ€ç»ˆè¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼ˆå½•åˆ¶çš„åŠ¨å›¾ï¼Œæ•ˆæœå¯èƒ½ä¸å’‹åœ°ï¼‰\n\n3.2 å…ƒç´ çš„å®šä½3.2.1 åŸºæœ¬è¯´æ˜åœ¨htmlä¸­å…ƒç´ çš„å®šä½æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ ¸å¿ƒï¼Œè„šæœ¬å¿…é¡»è¦çŸ¥é“ä½ éœ€è¦æ“ä½œçš„æ˜¯ä»€ä¹ˆé¡µé¢çš„å…ƒç´ ï¼Œæ‰èƒ½æ­£å¸¸è¿›è¡Œè‡ªåŠ¨åŒ–å¤„ç†ï¼›\nè€Œåœ¨htmlä¸­ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥ç”¨ä¸åŒçš„åŠæ³•æ¥å®šä½åˆ°\nidnameclass namelink textpartial link texttag namexpathcss selector\n\nå‰é¢æåˆ°è¿‡ï¼Œç™¾åº¦çš„è¾“å…¥æ¡†htmlæ˜¯ä¸‹é¢è¿™æ ·çš„ã€‚å…‰æ˜¯åœ¨è¿™ä¸€è¡Œhtmlä»£ç ä¸­ï¼Œå°±åŒ…å«äº†idã€nameã€classè¿™ä¸‰ä¸ªå¯ä»¥ç”¨äºæˆ‘ä»¬æ¥å®šä½çš„å…ƒç´ ï¼Œè¿˜æœ‰â€œçœ‹ä¸åˆ°â€çš„cssä¹Ÿèƒ½å®šä½åˆ°è¿™é‡Œã€‚\n&lt;input id=&quot;kw&quot; name=&quot;wd&quot; class=&quot;s_ipt&quot; value=&quot;&quot; maxlength=&quot;255&quot; autocomplete=&quot;off&quot;&gt;\n\næµè§ˆå™¨å¼€å‘è€…æ¨¡å¼ä¸­ï¼Œå³ä¾§å°±èƒ½çœ‹åˆ°å’Œkwç›¸å…³çš„cssæ˜¯#kw\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æƒ³å®šä½åˆ°å”¯ä¸€å…ƒç´ ï¼Œå¿…é¡»è¦ä¿è¯è¿™ä¸ªå…ƒç´ çš„æ ‡è¯†ç¬¦åœ¨æ•´ä¸ªé¡µé¢æ˜¯å”¯ä¸€çš„ï¼å‡è®¾ç™¾åº¦çš„ä¸»é¡µæœ‰ä¸¤ä¸ªid=&quot;kw&quot;çš„å…ƒç´ ï¼Œé‚£å°±æ²¡æœ‰åŠæ³•é€šè¿‡idæ¥å®šä½åˆ°è¾“å…¥æ¡†ï¼è¿™å°±è¦æ±‚å†™å‰ç«¯çš„æœ‹å‹ä»¬ï¼Œå°½å¯èƒ½åœ°ä¸ºæ¯ä¸€ä¸ªéœ€è¦æµ‹è¯•çš„é¡µé¢å…ƒç´ ç•™ä¸‹ä¸€ä¸ªå”¯ä¸€çš„idæˆ–è€…nameï¼Œä¿è¯è‡ªåŠ¨åŒ–è„šæœ¬èƒ½æ­£å¸¸è¿è¡Œï¼\nä¸åŒå®šä½æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹By.æ¥è‡ªä»€ä¹ˆï¼Œä»¥åŠä¼ å…¥å¯¹åº”çš„å‚æ•°å°±å¯ä»¥äº†ï¼\n#  é€šè¿‡id æ–¹å¼å®šä½browser.find_element(By.ID,&quot;kw&quot;).send_keys(&quot;selenium1&quot;) # æ‰¾åˆ°ç½‘é¡µä¸­çš„idä¸ºkwçš„åœ°æ–¹ï¼Œè¾“å…¥&quot;selenium&quot;#  é€šè¿‡name æ–¹å¼å®šä½browser.find_element(By.NAME,&quot;wd&quot;).send_keys(&quot;selenium2&quot;)#  é€šè¿‡tag name æ–¹å¼å®šä½browser.find_element(By.TAG_NAME,&quot;input&quot;).send_keys(&quot;selenium3&quot;) # ä¸èƒ½æˆåŠŸï¼Œå› ä¸ºinputå…ƒç´ å¤ªå¤šäº†ï¼Œä¸å”¯ä¸€ï¼#  é€šè¿‡class name æ–¹å¼å®šä½browser.find_element(By.CLASS_NAME,&quot;s_ipt&quot;).send_keys(&quot;selenium4&quot;)#  é€šè¿‡CSS æ–¹å¼å®šä½browser.find_element(By.CSS_SELECTOR,&quot;#kw&quot;).send_keys(&quot;selenium5&quot;)#  é€šè¿‡XPATH æ–¹å¼å®šä½browser.find_element(By.XPATH,&quot;//*[@id=&#x27;kw&#x27;]&quot;).send_keys(&quot;selenium6&quot;)\n\nå½“è¿è¡Œåˆ°inputå®šä½çš„æ—¶å€™ï¼Œç”±äºå®šä½ä¸å”¯ä¸€ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™\nselenium.common.exceptions.ElementNotInteractableException: Message: Element &lt;input name=&quot;ie&quot; type=&quot;hidden&quot;&gt; is not reachable by keyboardStacktrace:RemoteError@chrome://remote/content/shared/RemoteError.sys.mjs:8:8WebDriverError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:187:5ElementNotInteractableError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:347:5webdriverSendKeysToElement@chrome://remote/content/marionette/interaction.sys.mjs:631:13interaction.sendKeysToElement@chrome://remote/content/marionette/interaction.sys.mjs:605:11sendKeysToElement@chrome://remote/content/marionette/actors/MarionetteCommandsChild.sys.mjs:535:29receiveMessage@chrome://remote/content/marionette/actors/MarionetteCommandsChild.sys.mjs:152:31\n\nè¿™æ˜¯å› ä¸ºæœ‰ä¸€ä¸ª&lt;input name=&quot;ie&quot; type=&quot;hidden&quot;&gt; æ ‡ç­¾è¢«éšè—äº†ï¼Œæˆ‘ä»¬çš„send_keyså‡½æ•°ï¼ˆç›¸å½“äºé”®ç›˜ï¼‰æ˜¯æ²¡æœ‰åŠæ³•å¾€è¿™ä¸ªæ ‡ç­¾é‡Œé¢è¾“å…¥ä¿¡æ¯çš„ï¼Œæ•´ä¸ªè¿›ç¨‹ä¹Ÿå°±æ­¤é€€å‡ºäº†ã€‚\n3.2.2 Xpathè¿™é‡Œå¯¹XPATHåšä¸€ä¸ªå°å°çš„è§£é‡Š\n\nXPathï¼ˆXML Path Languageï¼‰æ˜¯ä¸€ç§ç”¨äºåœ¨XMLæ–‡æ¡£ä¸­å®šä½å…ƒç´ å’ŒèŠ‚ç‚¹çš„è¯­è¨€ã€‚å®ƒæ˜¯ä¸€ç§åŸºäºæ ‘ç»“æ„çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œé€šå¸¸ç”¨äºåœ¨XMLæ–‡æ¡£ä¸­è¿›è¡Œå¯¼èˆªå’Œæœç´¢æ“ä½œã€‚XPath å¯ä»¥å¸®åŠ©æ‚¨æ ¹æ®å…ƒç´ çš„å±‚æ¬¡ç»“æ„ã€å±æ€§å’Œæ–‡æœ¬å†…å®¹æ¥ç²¾ç¡®å®šä½ç‰¹å®šçš„å…ƒç´ æˆ–èŠ‚ç‚¹ã€‚å› ä¸ºHTMLå¯ä»¥çœ‹åšXMLçš„ä¸€ç§å®ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨XPathæ¥å®šä½HTMLä¸­çš„å…ƒç´ ã€‚\nä½ å¯ä»¥ç†è§£ä½Xpathç±»ä¼¼äºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥é€šè¿‡ç‰¹å®šçš„è¡¨è¾¾å¼æ¥åŒ¹é…åˆ°æˆ‘ä»¬æƒ³è¦çš„ä½ç½®ã€‚è¿™é‡Œåªåšäº†è§£å³å¯ï¼Œåç»­æœ‰éœ€è¦å†æ·±å…¥å­¦ä¹ ï¼›\n\nè¯´æ˜è´ªå¤šåš¼ä¸çƒ‚ï¼Œå½“æ—¶å°±æ˜¯ä¸ºäº†é¢è¯•é›¶æ—¶æŠ±ä½›è„šå­¦çš„ï¼Œæ—¢ç„¶ç°åœ¨ç”¨ä¸åˆ°äº†ï¼Œé‚£æ²¡å¿…è¦ç»§ç»­è®°å½•åšå®¢äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Python"],"tags":["Python","selenium"]},{"title":"ã€VMwareã€‘VMwareå®‰è£…CentOS8-Streamè™šæ‹Ÿæœº","url":"/posts/3903366745/","content":"VMwareå®‰è£…CentOS8-Streamè™šæ‹Ÿæœº\n\n\n1.å®‰è£…VMwareç”±äºæœ€æ–°ç‰ˆçš„vmè¦é’±ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªVMware16proçš„å®‰è£…åŒ…ï¼›æˆ‘çŸ¥é“åº¦ç›˜ä¸‹è½½é€Ÿåº¦æ…¢ï¼Œä½†ç¡®å®æ²¡å•¥å…¶ä»–é€‰æ‹©ï¼Œè§è°…ã€‚\n\nåæ–‡å°†ç”¨vmæ¥ç®€ç§°VMware\n\næå–å˜›: gdt9  äºšç´¢åŒ…è§£æŠ¼: 8888\n\nä¸‹è½½å®‰è£…åŒ…åï¼Œå³é”®ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œï¼Œåœ¨å¼¹å‡ºçš„æç¤ºæ¡†ä¸­é€‰æ‹©æ˜¯\n\nåœ¨ç¬¬ä¸€ä¸ªé€‰æ‹©æ¡†ï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥\n\nç¬¬äºŒä¸ªç•Œé¢ï¼Œå‹¾é€‰æ¥å—åè®®ä¸­æ¡æ¬¾ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›\nç¬¬ä¸‰ä¸ªé¡µé¢è§ä¸‹å›¾ï¼Œæ­¤é¡µå°†æ§åˆ¶å°å·¥å…·æ·»åŠ åˆ°ç³»ç»ŸPATHå¿…é¡»è¦å‹¾é€‰ï¼Œå®‰è£…ä½ç½®è‡ªè¡Œé€‰æ‹©\n\nå¤‡æ³¨ï¼šæˆ‘ä¿ç•™çš„æ˜¯é»˜è®¤çš„Cç›˜å®‰è£…è·¯å¾„æ²¡æœ‰æ”¹åŠ¨ï¼Œæ‰€ä»¥ä¿®æ”¹åˆ°å…¶ä»–ç›˜æ˜¯å¦ä¼šå°å‘å…¶ä»–é—®é¢˜ï¼Œæš‚ä¸”ä¸çŸ¥ã€‚å¦‚æœä½ çš„Cç›˜ç©ºé—´è¶³å¤Ÿï¼Œå°±å®‰åœ¨Cç›˜å§ï¼è¿™é‡Œçš„å®‰è£…è·¯å¾„æ˜¯vmwareè½¯ä»¶çš„å®‰è£…è·¯å¾„ï¼Œä¸æ˜¯è™šæ‹Ÿæœºçš„å®‰è£…è·¯å¾„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒä¼šå ç”¨å¾ˆå¤šç©ºé—´\n\n\nå°†æ£€æŸ¥äº§å“æ›´æ–°å’ŒåŠ å…¥ä½“éªŒè®¡åˆ’çš„é’©éƒ½å»æ‰ï¼Œä¸‹ä¸€æ­¥\n\nå¿«æ·æ–¹å¼é»˜è®¤å°±è¡Œï¼Œåç»­ä½ å¯ä»¥è‡ªå·±æ”¹ã€‚è¿™ä¸ªæƒ³å¿…éƒ½ä¼šå§ï¼\næ­¤é¡µç‚¹å‡»ä¸‹ä¸€æ­¥åï¼Œç‚¹å‡»å®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆã€‚\n\nå®‰è£…å®Œæˆåï¼Œä¼šå‡ºç°å¦‚ä¸‹é¡µé¢ï¼Œç‚¹å‡»è®¸å¯è¯ï¼Œå¡«å…¥è®¸å¯è¯å¯†é’¥ã€‚\nè®¸å¯è¯å¯†é’¥ä½ å¯ä»¥ç™¾åº¦ï¼Œæœç´¢vmware pro 16çš„å¯†é’¥å°±å¯ä»¥äº†ï¼Œæœ‰å¾ˆå¤šéƒ½å¯ä»¥ç”¨çš„ï¼Œæˆ‘åˆ†äº«çš„å‹ç¼©åŒ…é‡Œé¢å°±æœ‰ä¸€ä¸ªè®¸å¯è¯ç ï¼Œå¡«é‚£ä¸ªå°±è¡Œäº†ã€‚\nç½‘ä¸Šæœ‰å¾ˆå¤šå¯†é’¥ï¼Œæˆ‘è¿™é‡Œè´´å‡ ä¸ªï¼Œéƒ½æ˜¯vmware pro 16çš„ã€‚\nZF3R0-FHED2-M80TY-8QYGC-NPKYF  YF390-0HF8P-M81RQ-2DXQE-M2UT6  ZF71R-DMX85-08DQY-8YMNC-PPHV8  110L3-9135J-M807A-08ARK-84V7L  FF31K-AHZD1-H8ETZ-8WWEZ-WUUVA  CV7T2-6WY5Q-48EWP-ZXY7X-QGUWD\n\n\nè¿™ä¸€æ­¥æ“ä½œå®Œæ¯•åï¼Œç‚¹å‡»å®Œæˆï¼Œè™šæ‹Ÿæœºè½¯ä»¶vmwareå°±å®‰è£…æˆåŠŸäº†ã€‚\n2.ä¸‹è½½centos8ç³»ç»Ÿisoé•œåƒå¯ä»¥å»ä¸¤ä¸ªåœ°æ–¹ä¸‹è½½ï¼Œæ¨èè·Ÿéšæœ¬æ–‡çš„æ“ä½œç”¨é˜¿é‡Œäº‘çš„é•œåƒ\n\ncentoså®˜ç½‘ï¼šhttps://www.centos.org/download/\né˜¿é‡Œäº‘é•œåƒï¼šhttp://mirrors.aliyun.com/centos/8-stream/isos/x86_64/\n\næœ¬æ–‡å®‰è£…çš„æ˜¯centos8-streamçš„isoï¼Œæœ¬ç«™æ‰€å†™çš„ç»å¤§éƒ¨åˆ†linuxåšå®¢ï¼Œéƒ½å…¼å®¹è¿™ä¸ªç³»ç»Ÿä¸Šçš„æ“ä½œï¼è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯å›¾ä¸­ç®­å¤´æ‰€æŒ‡çš„CentOS-Stream-8-x86_64-latest-boot.isoé•œåƒã€‚\nä¸ºäº†é¿å…åç»­çš„å…¶ä»–æ“ä½œå’Œæœ¬æ–‡ä¸ç¬¦ï¼Œè¿™é‡Œé¡ºä¾¿ä¹ŸæŠŠisoé•œåƒç»™ä¸Šä¼ äº†ä¸€ä¸ªç›´æ¥å»é˜¿é‡Œäº‘å®˜ç½‘ä¸‹è½½å°±å¯ä»¥äº†ï¼Œåº”è¯¥å¤§å·®ä¸å·®ï¼Œç™¾åº¦äº‘çš„é€Ÿåº¦è¿˜æ˜¯å¤ªæ…¢äº†https://pan.baidu.com/s/1jleRo4mxILq2RwSU-rxaaA æå–å˜›: t7ay\n\n\nè¿™é‡Œæˆ‘ç›´æ¥è´´å‡ºä¸Šå›¾ä¸­ç®­å¤´æ‰€æŒ‡çš„isoé•œåƒé˜¿é‡Œäº‘ä¸‹è½½é“¾æ¥\nhttp://mirrors.aliyun.com/centos/8-stream/isos/x86_64/CentOS-Stream-8-x86_64-latest-boot.iso\n\n3.å®‰è£…Centos3.1 åˆ›å»ºè™šæ‹Ÿæœºå…ˆåœ¨ä½ ç”µè„‘ç¡¬ç›˜çš„å…¶ä»–ä½ç½®ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•\n\næ‰“å¼€vmè½¯ä»¶ä¸»ç•Œé¢ï¼Œç‚¹å‡»åˆ›å»ºæ–°è™šæ‹Ÿæœº\n\nè‡ªå®šä¹‰\n\nè¿™é‡Œä¿æŒé»˜è®¤çš„ï¼Œä¸éœ€è¦ä¿®æ”¹\n\nisoé€‰æ‹©isoé€‰æ‹©åˆšåˆšä¸‹è½½çš„centos8-streamè™šæ‹Ÿæœº\n\næ“ä½œç³»ç»Ÿæ“ä½œç³»ç»Ÿé€‰æ‹©linuxå’Œcentos8\n\nå®‰è£…ç›˜é€‰æ‹©åˆšåˆšåˆ›å»ºçš„ç©ºæ–‡ä»¶å¤¹ï¼ˆè¿™é‡Œæ˜¯è™šæ‹Ÿæœºæ–‡ä»¶çš„å®‰è£…è·¯å¾„ï¼Œæ‰€ä»¥å»ºè®®é€‰æ‹©ä½ ç”µè„‘ä¸Šæ¯”è¾ƒç©ºçš„é‚£ä¸ªç›˜ï¼Œæ¥åˆ›å»ºæ–‡ä»¶å¤¹ï¼‰\n\næ ¸æ•°é€‰æ‹©æ ¸æ•°è¯·æ ¹æ®ä½ çš„CPUæ¥é€‰æ‹©ï¼Œæ¯”å¦‚æˆ‘çš„ç¬”è®°æœ¬CPUæ˜¯8æ ¸16çº¿ç¨‹çš„ï¼ˆctrl+alt+deleteæ‰“å¼€ä½ ç”µè„‘çš„ä»»åŠ¡ç®¡ç†å™¨æ¥æŸ¥çœ‹ï¼‰\n\nè¿™é‡Œæˆ‘é€‰æ‹©äº†å¤„ç†å™¨æ•°é‡4ï¼Œæ¯ä¸ªå¤„ç†å™¨å†…æ ¸æ•°é‡2ï¼›å¯¹äºæ— GUIçš„Linuxç³»ç»Ÿè€Œè¨€ï¼ŒCPUæ€§èƒ½è¦æ±‚ä¸é«˜ï¼Œé€‰æ‹©1P1Céƒ½æ²¡æœ‰é—®é¢˜ï¼ˆå»ºè®®è‡³å°‘é€‰1P2Cï¼Œå³å¤„ç†å™¨æ•°é‡ä¸º1ï¼Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡ä¸º2ï¼‰ã€‚\nè¿™é‡ŒCPUçš„é€‰æ‹©åªéœ€è¦æ»¡è¶³ä¸€ä¸ªç›®æ ‡ï¼šæœ€ç»ˆæ˜¾ç¤ºçš„â€œå¤„ç†å™¨å†…æ ¸æ€»æ•°â€ä¸å¤šäºä½ å½“å‰å®¿ä¸»æœºçš„CPUåœ¨ä»»åŠ¡ç®¡ç†å™¨é‡Œé¢æ˜¾ç¤ºçš„â€œé€»è¾‘å¤„ç†å™¨â€æ•°é‡å°±è¡Œäº†ã€‚\n\nå†…å­˜æ ¹æ®ä½ ç”µè„‘çš„å†…å­˜é€‰æ‹©ï¼Œå»ºè®®é€‰æ‹©ä½äºæ€»å†…å­˜ä¸€åŠçš„\næ¯”å¦‚ç”µè„‘æ˜¯16Gï¼Œå»ºè®®åªé€‰åˆ°8Gï¼Œå¦åˆ™è™šæ‹Ÿæœºè¿è¡Œå ç”¨å¤ªå¤šå†…å­˜ï¼Œå®¹æ˜“å¼„å¾—ç¬”è®°æœ¬ä¹Ÿå¡å¡çš„ï¼Œå¹²ä¸äº†å•¥å…¶ä»–äº‹æƒ…ã€‚\n\nè¿™é‡Œè¿˜éœ€è¦çº æ­£å°ç™½çš„ä¸€éƒ¨åˆ†é”™è¯¯è®¤è¯†ï¼Œå†…å­˜æ˜¯æŒ‡è¿è¡Œå†…å­˜ï¼Œä¸æ˜¯ä½ ç”µè„‘çš„ç¡¬ç›˜å®¹é‡ï¼ï¼ï¼å³é”®ä½ ç”µè„‘æ¡Œé¢ä¸Šçš„æ­¤ç”µè„‘ï¼Œç‚¹å‡»å±æ€§ï¼Œå°±èƒ½çœ‹åˆ°ä½ ç”µè„‘æœ‰å¤šå°‘å†…å­˜ã€‚\n\n\nCentOS8æœ¬èº«å ç”¨å†…å­˜å¹¶ä¸å¤šï¼Œä½†å¦‚æœä½ æƒ³æ·±å…¥å­¦ä¹ linuxçš„ç¼–ç¨‹æ“ä½œï¼Œåç»­å¯èƒ½ä¼šç”¨åˆ°vscodeè¿œç¨‹è¿æ¥è™šæ‹Ÿæœºï¼Œè¿™æ—¶å€™å†…å­˜å¤ªä½å°±å®¹æ˜“å¡å¡å¡ã€‚æ‰€ä»¥å»ºè®®è‡³å°‘é€‰æ‹©2GB\nç°åœ¨çš„ç”µè„‘éƒ½æ˜¯8Gå†…å­˜æ‰“åº•äº†ï¼Œä¸»æµä»·ä½çš„ç¬”è®°æœ¬ä¹Ÿæ™®åŠäº†16GBï¼Œæ‰€ä»¥å¤§å®¶ç¬”è®°æœ¬è¿è¡Œè™šæ‹Ÿæœºéƒ½æ˜¯æ²¡é—®é¢˜çš„ã€‚\n\nç½‘ç»œé€‰æ‹©æ¡¥æ¥æˆ–è€…NATï¼ˆå»ºè®®é€‰æ‹©NATï¼‰\n\nIOå’Œç£ç›˜é€‰æ‹©æ¨èçš„ï¼Œä¸ç”¨ä¿®æ”¹\n\nç£ç›˜ç±»å‹é€‰æ‹©vmæ¨èçš„å°±è¡Œï¼ˆä¸åŒç”µè„‘æ¨èçš„å¯èƒ½ä¸ä¸€æ ·ï¼‰\n\n\nç£ç›˜æœ€å°‘é€‰æ‹©20GBï¼Œæ ¹æ®è‡ªå·±ç”µè„‘ç¡¬ç›˜å®¹é‡è‡ªè¡Œé€‰æ‹©ã€‚é€‰æ‹©çš„ç¡¬ç›˜å®¹é‡å¹¶ä¸ä¼šç«‹é©¬å æ»¡ï¼Œè€Œæ˜¯éšç€ä½¿ç”¨æ—¶é•¿æ…¢æ…¢å¢åŠ çš„ï¼›\nè™šæ‹Ÿç£ç›˜å‹¾é€‰å•ä¸ªæ–‡ä»¶\n\nç£ç›˜æ–‡ä»¶åå­—ä¸ç”¨ä¿®æ”¹\nå®Œæˆçœ‹çœ‹æœ‰æ²¡æœ‰è®¾ç½®é”™è¯¯çš„ï¼Œç‚¹å‡»å®Œæˆå³å¯\n\nç‚¹å‡»å¼€å¯è™šæ‹Ÿæœºï¼Œå³å¯åŠ¨äº†centos\n3.2 åˆå§‹åŒ–CentOS8ç‚¹å‡»è™šæ‹Ÿæœºçš„å±å¹•ï¼Œä½¿ç”¨é”®ç›˜æ–¹å‘é”®é€‰ç¬¬ä¸€ä¸ªinstall\n\nä¼šå¼¹å‡ºä¸€å¤§å †æ–‡å­—ï¼Œç­‰å¾…å…¶è·‘å®Œå®‰è£…è¿›ç¨‹ï¼Œä¼šåˆ°ä¸‹é¢çš„ç•Œé¢\nè¯­è¨€å¯ä»¥é€‰æ‹©è¯­è¨€ä¸ºä¸­æ–‡ï¼Œä½†ä¸ºäº†æ–¹ä¾¿åç»­å’Œå…¶ä»–å·¥å…·çš„å­¦ä¹ æ¥è½¨ï¼ˆå¤§éƒ¨åˆ†å·¥å…·éƒ½æ²¡æœ‰ä¸­æ–‡ï¼‰ï¼Œä¾æ—§æ¨èé€‰æ‹©è‹±è¯­ï¼è€Œä¸”è¿™åœ¨ç³»ç»Ÿé‡Œé¢æ˜¯å¯ä»¥æ”¹çš„ï¼Œé—®é¢˜ä¸å¤§\n\nç½‘ç»œé…ç½®ç‚¹å‡»ç½‘ç»œ\n\nç‚¹å‡»å·¦ä¸Šè§’æŒ‰é’®ä¸ºONæ‰“å¼€è¿æ¥ï¼Œå°†hostNameä¿®æ”¹ä¸ºä¸‹å›¾æ‰€ç¤ºï¼Œapplyåç‚¹å‡»å·¦ä¸Šè§’çš„Done\n\næ—¶åŒºæˆ‘ä»¬æ˜¯ä¸œå…«åŒºï¼Œå¾—é€‰æ‹©å¯¹åº”æ—¶åŒºä¸º Asia/Shanghaiï¼Œå³ä¸Šæµ·å¸‚çš„æ—¶åŒºã€‚\n\nè¿™é‡Œè¿˜å¯ä»¥é€‰æ‹©ntpæˆæ—¶æœåŠ¡å™¨ï¼ˆå°±æ˜¯ä¸€ä¸ªç”¨æ¥å¹¿æ’­å½“å‰æ—¶é—´çš„æœåŠ¡å™¨ï¼‰ç‚¹å‡»helpä¸‹é¢çš„é‚£ä¸ªé½¿è½®ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸€ä¸ªåœ¨å›½å†…çš„æœåŠ¡å™¨ï¼Œæ–¹ä¾¿æ¥æ”¶åˆ°æ—¶é—´æ›´æ–°\ncn.pool.ntp.org\n\n\nè½¯ä»¶é€‰æ‹©éšåé€‰æ‹©software selectionï¼Œè¿™é‡Œæ˜¯é€‰æ‹©å®‰è£…çš„è½¯ä»¶å’Œç³»ç»Ÿçš„æ“ä½œæ–¹å¼çš„ã€‚\nç”±äºlinuxå¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬éƒ½æ˜¯å­¦ä¹ çš„å‘½ä»¤è¡Œæ“ä½œï¼Œå‘½ä»¤è¡Œå®‰è£…æ–¹å¼å¯¹ä¸»æœºçš„è´Ÿè½½ä¹Ÿæ›´å°ï¼Œè¿™é‡Œé€‰æ‹©serverå³å¯ï¼›å³ä¾§çš„éƒ½ä¸å‹¾é€‰ã€‚\né€‰å¥½åç‚¹å·¦ä¸Šè§’done\n\nrootå¯†ç æ¥ç€å†ç‚¹å‡»root passwordè®¾ç½®ï¼Œé»˜è®¤rootè´¦æˆ·æ˜¯è¢«å…³é—­çš„ï¼Œè¿™å¯¹æˆ‘ä»¬å­¦ä¹ ä¸åˆ©ã€‚è®¾ç½®å¯†ç æ–¹ä¾¿åç»­è¿æ¥ï¼\n\nä¾ç…§é¡ºåºï¼Œä¸Šè¿°æ“ä½œå®Œæ¯•åï¼Œå³ä¸‹è§’çš„installationå°±ä¸æ˜¯ç°è‰²çš„äº†ï¼Œè€Œå¯ä»¥ç‚¹å‡»\n\nå¦‚æœå‡ºç° installation destinationæ˜¯çº¢çš„ï¼Œç‚¹è¿›å»ç„¶åé€€å‡ºå°±ok\n\n\nç‚¹å‡»åç­‰å¾…å…¶å®‰è£…å®Œæ¯•ï¼è€å¿ƒç­‰å¾…ï¼Œè€—æ—¶æŒºä¹…çš„ã€‚\n\nè¿™é‡Œè¿˜ä¼šä¸‹è½½ä¸€äº›ç³»ç»Ÿçš„å†…å®¹ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯æ²¡æœ‰guiçš„serverï¼Œæ‰€ä»¥åªéœ€è¦ä¸‹720MBå³å¯ï¼Œå¸¦guiçš„è‚¯å®šæ›´å¤§\n\nå®Œæˆç‚¹å³ä¸‹è§’é‡å¯ç³»ç»Ÿ\n\n3.3 å¯åŠ¨è¿™é‡Œé€‰æ‹©ç¬¬ä¸€ä¸ªï¼ˆé•¿æ—¶é—´ä¸é€‰ä¼šè‡ªå·±å¼€å§‹ï¼‰\n\nå‡ºç°å¦‚ä¸‹é¡µé¢åï¼Œå¡«å…¥ç”¨æˆ·årootå’Œåˆšåˆšåˆå§‹åŒ–ç•Œé¢è®¾ç½®çš„å¯†ç ï¼Œå°±æˆåŠŸç™»å½•äº†ï¼\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Linuxä¸­ï¼Œè¾“å…¥å¯†ç çš„æ“ä½œæ˜¯ä¸ä¼šæœ‰ä»»ä½•å›æ˜¾çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦ç›²æ‰“ã€‚åªè¦å¯†ç æ˜¯å¯¹çš„ï¼Œå°±ä¸€å®šèƒ½æˆåŠŸã€‚\n4.sshè¿æ¥å…ˆä¸‹è½½sshè¿æ¥è½¯ä»¶ï¼Œå¦‚tabbyã€xshellã€puttyç­‰ï¼›æ¨èä½¿ç”¨å¼€æºçš„tabbyï¼Œè¿™é‡Œè´´å‡ºtabbyçš„ä¸‹è½½åœ°å€ï¼š\nhttps://github.com/Eugeny/tabby/releases\n4.1 å®‰è£…å¹¶å¯åŠ¨sshdå…ˆåœ¨è™šæ‹Ÿæœºé‡Œé¢æ“ä½œï¼Œä¸‹è½½sshæœåŠ¡ç«¯è½¯ä»¶\nyum install -y openssh-server\n\nå½“å‰ä½¿ç”¨çš„CentOS8ç³»ç»Ÿå·²ç»è‡ªå¸¦äº†è¿™ä¸ªè½¯ä»¶\n\nå¯åŠ¨sshd\nsystemctl start sshd\n\n4.2 æŸ¥çœ‹ipifconfig\n\nä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œèƒ½çœ‹åˆ°å½“å‰è™šæ‹Ÿæœºçš„ipä¸º192.168.6.172\n\n4.3 sshè¿æ¥ä»¥tabbyä¸ºä¾‹ï¼Œç‚¹å‡»è®¾ç½®ï¼Œé…ç½®ä¸è¿æ¥ï¼Œæ–°é…ç½®\n\né€‰æ‹©sshè¿æ¥\n\nå¡«å…¥åˆšåˆšçœ‹åˆ°çš„ipï¼Œç«¯å£22é»˜è®¤ä¸éœ€è¦åŠ¨ï¼Œç”¨æˆ·åroot\n\nåˆ›å»ºå®Œæ¯•åï¼Œåœ¨é…ç½®ä¸é“¾æ¥é¡µé¢ï¼Œç‚¹å‡»å¯åŠ¨é”®ï¼ˆå°±å’Œè§†é¢‘çš„æ’­æ”¾é”®ä¸€æ ·çš„æŒ‰é’®ï¼‰å¼€å§‹è¿æ¥\n\nä¼šå‡ºç°å¦‚ä¸‹è®©ä½ è¾“å…¥å¯†ç çš„é¡µé¢ï¼Œåœ¨è¿™é‡Œå¡«å…¥rootçš„å¯†ç ï¼Œå¹¶å‹¾é€‰rememberè®°ä½å¯†ç \n\nä¸»æœºå¯†é’¥æ ¡éªŒæ˜¯æ¯æ¬¡sshç¬¬ä¸€æ¬¡è¿æ¥æ–°ä¸»æœºæ—¶éƒ½ä¼šå‡ºç°çš„ï¼Œå‹¾é€‰æ¥å—å¹¶è®°ä½å°±å¯ä»¥äº†ï¼›\n\nåˆ°è¿™é‡Œå°±æˆåŠŸè¿ä¸Šè™šæ‹Ÿæœºé‡Œé¢çš„linuxäº†ã€‚æ—¥å¸¸ä½¿ç”¨ï¼Œä¹Ÿæ›´æ¨èåœ¨sshè½¯ä»¶ä¸Šæ“ä½œï¼Œè€Œä¸æ˜¯vmçš„è™šæ‹Ÿæœºç•Œé¢é‡Œé¢æ“ä½œlinuxå‘½ä»¤è¡Œã€‚\n\nè¿™æ ·vmçš„çª—å£å°±å¯ä»¥æ”¶èµ·æ¥ï¼Œè®©è™šæ‹Ÿæœºåœ¨åå°è¿è¡Œäº†ï¼\n\nOverï¼å¤§åŠŸå‘Šæˆï¼Œä¸€ä¸ªlinuxå­¦ä¹ ç¯å¢ƒå°±æ­å»ºå¥½å•¦ã€‚\né¡ºå¸¦çœ‹çœ‹ä¸‹é¢çš„å†…å®¹å§\n\ncentos8å®‰è£…python3.10 https://blog.musnow.top/posts/847195816/\ncentos7äº‘æœåŠ¡å™¨å­¦ä¹ ç¯å¢ƒåˆå§‹åŒ– https://blog.musnow.top/posts/656771008/\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","CentOS","è™šæ‹Ÿæœº"]},{"title":"ã€VMwareã€‘VMä¸­è™šæ‹Ÿæœºè®¾ç½®çš„å¤„ç†å™¨æ•°é‡å’Œæ¯ä¸ªå¤„ç†å™¨å†…æ ¸æ•°é‡åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ","url":"/posts/3252027724/","content":"\nåŸå‡ºå¤„ï¼šVMWareä¸­çš„å¤„ç†å™¨æ•°é‡å’Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡æ¦‚å¿µåŠæŸ¥è¯¢æ–¹æ³•\næ…•é›ªå¯¹åŸæ–‡è¿›è¡Œäº†ä¸€å®šä¿®æ”¹å’Œç»†åŒ–\n\nä¸€ã€æ¦‚å¿µï¼šå½“æˆ‘ä»¬ä½¿ç”¨vmæ¥åˆ›å»ºè™šæ‹Ÿæœºçš„æ—¶å€™ï¼Œä¸€å®šä¼šç»å†ä¸‹é¢çš„é€‰é¡¹ã€‚é‚£å°±æ˜¯ç»™è™šæ‹Ÿæœºé…ç½®åˆ†é…çš„cpuæ ¸å¿ƒæ•°é‡ã€‚ä½†vmè¿™é‡Œçš„è¯´æ³•å’Œæˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­å¯¹CPUçš„Xæ ¸Xçº¿ç¨‹çš„è¯´æ³•å¹¶ä¸ç»Ÿä¸€ã€‚å°±å®¹æ˜“æ··æ·†ä¸€äº›æ¦‚å¿µã€‚\n\nå…ˆæ¥è¯´è¯´è¿™é‡Œä¸‰ä¸ªé€‰é¡¹çš„å«ä¹‰å§\n\nå¤„ç†å™¨æ•°é‡ ï¼šè™šæ‹Ÿçš„CPUé¢—æ•°ã€‚\næ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡ï¼šè™šæ‹Ÿçš„CPUå†…æ ¸æ•°ã€‚\nå¤„ç†å™¨å†…æ ¸æ€»æ•°ï¼šå¤„ç†å™¨å†…æ ¸æ€»æ•° &#x3D; å¤„ç†å™¨æ•°é‡ * æ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡ã€‚\n\nå¤„ç†å™¨å†…æ ¸æ€»æ•° å¯¹åº”çš„æ˜¯ ç‰©ç†CPUçš„çº¿ç¨‹æ•°ï¼ˆé€»è¾‘å¤„ç†å™¨æ•°é‡ï¼‰ã€‚ \næ‰€ä»¥é…ç½®è™šæ‹Ÿæœºæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒ CPUå®é™…çš„çº¿ç¨‹æ•° æ˜¯å¤šå°‘å°±è¡Œäº†ï¼Œå³é…ç½®çš„ å¤„ç†å™¨å†…æ ¸æ€»æ•° &lt; CPUå®é™…çš„çº¿ç¨‹æ•° å°±è¡Œäº†ã€‚\næ³¨ï¼šæˆ‘ä»¬ç”µè„‘ä¸Šçš„ä¸€ä¸ªCPUï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å¤šä¸ªå†…æ ¸ï¼ˆå•æ ¸&#x2F;åŒæ ¸&#x2F;å››æ ¸&#x2F;å…­æ ¸&#x2F;å…«æ ¸&#x2F;åå…­æ ¸ï¼‰ï¼Œè€Œä¸€ä¸ªå†…æ ¸ä¸€èˆ¬å¯¹åº”ä¸€ä¸ªçº¿ç¨‹ã€‚ä½†é€šè¿‡Intelçš„è¶…çº¿ç¨‹æŠ€æœ¯ï¼Œä¸€ä¸ªæ ¸å¿ƒå¯ä»¥å¯¹åº”ä¸¤ä¸ªçº¿ç¨‹ï¼Œå³å¯ä»¥åŒæ—¶è¿è¡Œä¸¤ä¸ªçº¿ç¨‹ï¼Œå¹¶è¡Œå¤„ç†ä¸¤ä¸ªä»»åŠ¡ã€‚\nå¤§å°æ ¸æ€ä¹ˆåŠï¼Ÿä¸è¿‡ï¼Œç°åœ¨çš„æ–°intel cpuåˆå‡ºç°äº†å¤§å°æ ¸çš„è¯´æ³•ã€‚ä¸è¿‡è¿™å¹¶ä¸å½±å“æˆ‘ä»¬æ¥åˆ¤æ–­åˆ°åº•åº”è¯¥æ€ä¹ˆé…ç½®ã€‚æ¯”å¦‚ä¸‹å›¾æ˜¯ä¸å¸¦å¤§å°æ ¸è®¾è®¡çš„8ä»£i7 CPUåœ¨å®˜ç½‘ä¸Šçš„è¯¦ç»†å‚æ•°\n\nè€Œä¸‹å›¾æ˜¯æœ€æ–°çš„å¸¦å¤§å°æ ¸çš„13ä»£i9åœ¨å®˜ç½‘ä¸Šçš„è¯¦ç»†å‚æ•°\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå³ä¾¿æ–°çš„å‡ºç°äº†æ€§èƒ½æ ¸ï¼ˆå¤§æ ¸ï¼‰ã€èƒ½æ•ˆæ ¸ï¼ˆå°æ ¸ï¼‰è¿™æ ·çš„è®¾è®¡ï¼Œä½†å…¶ä¾æ—§æ²¡æœ‰è„±ç¦»å†…æ ¸æ•°å’Œçº¿ç¨‹æ•°è¿™ä¸¤ä¸ªå‚æ•°ã€‚\næˆ‘ä»¬ä¾æ—§å¯ä»¥ä¾ç…§ä¼ ç»Ÿçš„åŠæ³•ï¼Œé€šè¿‡çº¿ç¨‹æ•°æ¥åˆ¤æ–­åº”è¯¥ç»™è™šæ‹Ÿæœºçš„CPUä¸Šçš„é…ç½®\nè™šæ‹Ÿæœºçš„å¤„ç†å™¨å†…æ ¸æ€»æ•° &lt; å®é™…CPUçš„çº¿ç¨‹æ•°\n\nè€ŒAMDçš„Cpuæš‚æ—¶è¿˜æ²¡æœ‰å‡ºç°å¤§å°æ ¸çš„è®¾è®¡ï¼Œä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªåŠæ³•è¿›è¡ŒVMè™šæ‹Ÿæœºçš„é…ç½®å°±OKäº†ï¼\näºŒã€æŸ¥çœ‹ç”µè„‘é…ç½®å‚æ•°æ–¹æ³•ï¼š1ã€ç½‘ä¸ŠæŸ¥è¯¢å¯¹åº”çš„CPUå‚æ•°ï¼Œä¸€èˆ¬å¯ä»¥å»å®˜ç½‘æŸ¥è¯¢å¾—åˆ°\n\ninteläº§å“è§„èŒƒ\namdå®˜ç½‘\n\n\n\n2ã€æ‰“å¼€windowsçš„ä»»åŠ¡ç®¡ç†å™¨ï¼Œå…ˆå±•å¼€è§†å›¾ï¼Œå†æ‰¾åˆ°â€œæ€§èƒ½â€ç•Œé¢ã€‚\n\nå†…æ ¸ï¼šå³CPUæ ¸å¿ƒæ•°ã€‚\né€»è¾‘å¤„ç†å™¨ï¼šå³çº¿ç¨‹æ•°ã€‚\n\n\n\n3ã€å³é”® â€œæˆ‘çš„ç”µè„‘â€â€“â€œç®¡ç†â€â€“â€œè®¾å¤‡ç®¡ç†å™¨â€\nâ€œå¤„ç†å™¨â€é¡¹ä¸‹é¢æ˜¾ç¤ºå‡ æ¡è®°å½•å³ä»£è¡¨æœ‰å‡ ä¸ªé€»è¾‘å¤„ç†å™¨ï¼ˆçº¿ç¨‹æ•°ï¼‰ã€‚\n\n\nä¸‰ã€é…ç½®è®ºè¯å‚è€ƒçŸ¥é“äº†è‡ªå·±çš„CPUçº¿ç¨‹æ•°ï¼Œå°±å¯ä»¥æ¥éªŒè¯ä¸€ä¸‹æˆ‘ä»¬çš„ç†è®ºæ˜¯å¦æ­£ç¡®äº†\nè™šæ‹Ÿæœºçš„å¤„ç†å™¨å†…æ ¸æ€»æ•° &lt; å®é™…CPUçš„çº¿ç¨‹æ•°\n\nå®é™…ç¡¬ä»¶å‚æ•°ï¼š 6æ ¸12çº¿ç¨‹\né…ç½®æˆåŠŸ\n\n\n\né…ç½®å¤±è´¥\n\n\n\nå››ã€linuxæŸ¥çœ‹cpuæ ¸å¿ƒæ•°&#x2F;çº¿ç¨‹æ•°æˆ‘ä½¿ç”¨ä¸‹å›¾çš„é…ç½®äº†ä¸€ä¸ªdeepinçš„è™šæ‹Ÿæœº\n\nè¿›äº†è™šæ‹Ÿæœºï¼Œæ‰“å¼€ç»ˆç«¯åï¼Œå¯ä»¥ç”¨ä¸‹æ–¹çš„å‡ ä¸ªå‘½ä»¤æ¥æŸ¥è¯¢ä½ çš„cpuæ•°é‡æ˜¯å¦å’Œä¸Šæ–‡æ‰€è¿°ä¸€è‡´\n# æŸ¥çœ‹cpuæ ¸å¿ƒæ•°# å¯¹åº”vmå¤„ç†å™¨æ•°é‡cat /proc/cpuinfo | grep &quot;physical id&quot; | sort | uniq | wc -l# æŸ¥çœ‹æ¯ä¸ªcpuçš„å†…æ ¸æ•°é‡# å¯¹åº”vmæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡cat /proc/cpuinfo | grep &quot;cpu cores&quot; | uniq# æŸ¥çœ‹çº¿ç¨‹æ•°# å¯¹åº”vmçš„å¤„ç†å™¨å†…æ ¸æ€»æ•°cat /proc/cpuinfo | grep &quot;processor&quot; | wc -l\n\nå¯ä»¥çœ‹åˆ°ï¼Œåœ¨deepiné‡Œé¢æ‰§è¡Œè¿™äº›å‘½ä»¤çš„ç»“æœå’Œé¢„æœŸå®Œå…¨ä¸€è‡´ï¼æ˜¯4æ ¸å¿ƒ8çº¿ç¨‹çš„ç³»ç»Ÿï¼\n$ cat /proc/cpuinfo | grep &quot;physical id&quot; | sort | uniq | wc -l4$ cat /proc/cpuinfo | grep &quot;cpu cores&quot; | uniqcpu cores       : 2$ cat /proc/cpuinfo | grep &quot;processor&quot; | wc -l8\n\næ€»ç»“æ ¹æ®ä¸Šé¢çš„æ“ä½œï¼Œå¯ä»¥ç¡®å®šï¼Œåªè¦ä½ é…ç½®çš„å¤„ç†å™¨å†…æ ¸æ€»æ•°å°äºä½ CPUçš„å®é™…çº¿ç¨‹æ•°ï¼Œå°±ä¸ä¼šå‡ºç°é—®é¢˜ã€‚ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯éµå¾ªæœ€å¸¸ç”¨çš„ä¸€ä¸ªæ ¸å¿ƒä¸¤ä¸ªçº¿ç¨‹é…ç½®ï¼Œå°†æ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡è®¾ç½®ä¸º2ï¼Œå†å»å¯¹åº”è®¾ç½®å¤„ç†å™¨æ•°é‡ï¼Œæ¯”å¦‚\n\nå¤„ç†å™¨æ•°é‡2ï¼Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡2ï¼ˆ2æ ¸4çº¿ç¨‹ï¼‰\nå¤„ç†å™¨æ•°é‡4ï¼Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡2ï¼ˆ4æ ¸8çº¿ç¨‹ï¼‰\nå¤„ç†å™¨æ•°é‡6ï¼Œæ¯ä¸ªå¤„ç†å™¨çš„å†…æ ¸æ•°é‡2ï¼ˆ6æ ¸12çº¿ç¨‹ï¼‰\nä»¥æ­¤ç±»æ¨\n\nå¤„ç†å™¨æ•°é‡æœ€å¥½è®¾ç½®ä¸º2çš„å€æ•°ï¼Œæ¯•ç«Ÿä½ ä¹Ÿæ²¡å¬è¯´è¿‡3æ ¸å’Œ5æ ¸çš„CPUå§ï¼ŸğŸ˜‚ä¸è¿‡vmä¼¼ä¹ä¹Ÿä¸å…è®¸é€‰æ‹©å¥‡æ•°ã€‚\nåœ¨æˆ‘çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œvmæ˜¯ç”¨æ¥è£…linuxè¿›è¡Œå­¦ä¹ å’Œå¼€å‘çš„ã€‚å¯¹äºä¸å¸¦GUIçš„linuxæ¥è¯´ï¼Œ2æ ¸4çº¿ç¨‹éƒ½æ˜¯æ æ çš„äº†ã€‚æ›´åƒç´§çš„è¿˜æ˜¯å†…å­˜ï¼å¦‚æœæ˜¯ä¸å¸¦GUIçš„linuxï¼Œå»ºè®®2Gèµ·æ­¥ï¼Œ4Gå¾€ä¸Šè¶³å¤Ÿç”¨ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œéœ€è¦ç”¨vscodeçš„remote-sshåŠŸèƒ½è¿æ¥linuxè¿›è¡Œä»£ç ç¼–å†™ï¼Œé‚£æœ€å¥½æ˜¯4Gå†…å­˜èµ·æ­¥ï¼ï¼ˆ2Gå®æµ‹æœ‰ç‚¹å¡ï¼Œ1Gæ ¹æœ¬æ²¡æ³•ç”¨ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","deepin","è™šæ‹Ÿæœº"]},{"title":"ã€Linuxã€‘wslå®‰è£…çš„ubuntuä¸æ”¯æŒPOSIXæ¶ˆæ¯é˜Ÿåˆ— | å·²è§£å†³","url":"/posts/4006913293/","content":"wslå®‰è£…çš„ubuntuä¸æ”¯æŒPOSIXæ¶ˆæ¯é˜Ÿåˆ—çš„è§£å†³åŠæ³•\n\n\né—®é¢˜\nå¦‚é¢˜ï¼Œæˆ‘çš„win10ä¸Šå®‰è£…äº†wslçš„ubuntuåï¼ˆå¾®è½¯å•†åº—ä¸‹è½½çš„wslçš„Ubuntuï¼‰è¿™ä¸ªç³»ç»Ÿå†…éƒ¨ä¸æ”¯æŒPOSIXçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè™½ç„¶æœ‰&lt;mqueue.h&gt;å¤´æ–‡ä»¶ï¼Œä½†æ˜¯æ²¡æœ‰å®ç°ï¼Œä¼šæŠ¥é”™ã€‚\nå¦‚æœæƒ³æ‰¾ä¸ªç®€å•çš„åŠæ³•å‘¢ï¼Œé‚£å°±æ˜¯ç”¨systemVçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯è¿™æ˜¯ä¸ªè™šæ‹Ÿæœºæœ¬åœ°ç¯å¢ƒé—®é¢˜ï¼Œæˆ‘ç”¨virtualboxå®‰è£…çš„è™šæ‹Ÿæœºå°±èƒ½æ­£å¸¸ä½¿ç”¨ã€‚æ‰€ä»¥è‚¯å®šå¾—è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¢æˆsystemVçš„æ¶ˆæ¯é˜Ÿåˆ—å°±æœ‰ç‚¹ã€Œæ©è€³ç›—é“ƒã€çš„æ„å‘³äº†ã€‚\næµ‹è¯•ä¸‹é¢æ˜¯ä¸€ä¸ªPOSIXæ¶ˆæ¯é˜Ÿåˆ—çš„demo\n#include &lt;iostream&gt;#include &lt;cstring&gt;#include &lt;errno.h&gt;#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;#include &lt;mqueue.h&gt;using namespace std;int main()&#123;    mqd_t mqID;    mqID = mq_open(&quot;/testmQueue&quot;, O_RDWR | O_CREAT, 0666, NULL);    if (mqID &lt; 0)    &#123;        cout&lt;&lt;&quot;open message queue error...&quot;&lt;&lt;strerror(errno)&lt;&lt;endl;        return -1;    &#125;    mq_attr mqAttr;    if (mq_getattr(mqID, &amp;mqAttr) &lt; 0)    &#123;        cout&lt;&lt;&quot;get the message queue attribute error&quot;&lt;&lt;endl;        return -1;    &#125;    cout&lt;&lt;&quot;mq_flags:&quot;&lt;&lt;mqAttr.mq_flags&lt;&lt;endl;    cout&lt;&lt;&quot;mq_maxmsg:&quot;&lt;&lt;mqAttr.mq_maxmsg&lt;&lt;endl;    cout&lt;&lt;&quot;mq_msgsize:&quot;&lt;&lt;mqAttr.mq_msgsize&lt;&lt;endl;    cout&lt;&lt;&quot;mq_curmsgs:&quot;&lt;&lt;mqAttr.mq_curmsgs&lt;&lt;endl;&#125;\n\nå¦‚æœç¼–è¯‘åè¿è¡Œå‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™ï¼Œä»£è¡¨å½“å‰ç³»ç»Ÿä¸æ”¯æŒPOSIXæ¶ˆæ¯é˜Ÿåˆ—ã€‚å½“å‰ç³»ç»Ÿä¸‹æœ‰mqueueå¤´æ–‡ä»¶ï¼Œä½†å¹¶æ²¡æœ‰å‡½æ•°çš„å®ç°ä½“\nroot@DESKTOP-5SQO6N0:~# ./testopen message queue error...No such file or directoryopen message queue error...Function not implemented\nè§£å†³éœ€è¦å°†wslç‰ˆæœ¬1æ”¹æˆç‰ˆæœ¬2ï¼Œå¦åˆ™æ— å®Œæ•´Linuxå†…æ ¸æ”¯æŒï¼Œæ— æ³•ä½¿ç”¨POSIXæ¶ˆæ¯é˜Ÿåˆ—ã€‚è¿™ä¹Ÿæ˜¯WSLç‰ˆæœ¬1å’Œ2çš„é‡å¤§åŒºåˆ«ä¹‹ä¸€ã€‚\nç”¨å¦‚ä¸‹å‘½ä»¤å°†å½“å‰è™šæ‹Ÿæœºæ”¹æˆwsl2ç‰ˆæœ¬ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚\nwsl -l -v # ç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹å½“å‰è™šæ‹Ÿæœºçš„versionæ˜¯ä¸æ˜¯1wsl --update # æ›´æ–°wslwsl --set-version è™šæ‹Ÿæœºå 2  # æŠŠæŒ‡å®šè™šæ‹Ÿæœºæ”¹æˆwslç‰ˆæœ¬2\nå†æ¬¡æµ‹è¯•æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„æ¶ˆæ¯é˜Ÿåˆ—ä»£ç åº”è¯¥è¾“å‡ºå¦‚ä¸‹å†…å®¹\nroot@DESKTOP-5SQO6N0:~# ./testmq_flags:0mq_maxmsg:10mq_msgsize:8192mq_curmsgs:0\n\n\nç»‘å®šç›®å½•é™¤äº†ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä¹‹å‰è¿˜å¯ä»¥monutä¸€ä¸‹è·¯å¾„ï¼Œå‚è€ƒmanæ‰‹å†Œä¸­çš„æ•™ç¨‹ï¼ˆä¼¼ä¹ä¸æ˜¯å¿…é¡»è¦åšçš„ï¼Œmountäº†è¿™ä¸ªè·¯å¾„ä¹‹åèƒ½æ›´å¥½åœ°çœ‹åˆ°ç°æœ‰çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼‰\nmkdir /dev/mqueuemount -t mqueue none /dev/mqueue","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è™šæ‹Ÿæœº","wsl"]},{"title":"ã€ç½‘ç»œã€‘CDN/PCDN/SDNè¯¦è§£","url":"/posts/292924834/","content":"æœ´å®çš„å­¦ä¹ åŸå› ï¼šäº¬ä¸œå®ä¹ ç”Ÿæ‹›è˜æ¡ç›®ä¸Šå†™äº†è¿™äº›æŠ€æœ¯ï¼Œé‚£å°±ç»™ä»–å­¦äº†ï¼\n\n\n\nå‚è€ƒhttps://blog.csdn.net/baidu_41651554/article/details/122218513\n\nå—¨å—¨å—¨ï¼Œç›´æ¥ä¸Šèœï¼\n1.CDNCDNçš„å…¨ç¨‹æ˜¯content delivery networkï¼Œå†…å®¹åˆ†å‘ç½‘ç»œï¼›è¯´äººè¯å°±æ˜¯æŠŠç½‘ç«™äº§ç”Ÿçš„å†…å®¹åˆ†å‘åˆ°å„ä¸ªç”¨æˆ·è¯·æ±‚çš„ç½‘ç»œé‡Œå»ï¼Œå…·æœ‰ åˆ†å¸ƒå¼ ç½‘ç»œçš„ç‰¹ç‚¹ï¼\n1.1 å‰ç½®å£°æ˜å½“ä»£ç½‘ç»œå½¢åŠ¿é”™ç»¼å¤æ‚ï¼Œç‰¹åˆ«æ˜¯è§†é¢‘ã€éŸ³é¢‘ç±»ç½‘ç»œæœåŠ¡çš„å…´èµ·ï¼Œç»™äº’è”ç½‘çš„è´·æ¬¾é€ æˆäº†å¾ˆå¤§çš„å‹åŠ›å•Šï¼\nä»¥ä¹‹å‰å¾ˆç«çš„â€œå»¶ç¦§æ”»ç•¥â€ä¸ºä¾‹ï¼Œå½“æ—¶æ›¾ç»åœ¨æŸè§†é¢‘APPå®ç°äº†1åƒä¸‡ç”¨æˆ·åŒæ—¶åœ¨çº¿è§‚çœ‹ã€‚å¦‚æœå¤§å®¶è§‚çœ‹çš„æ˜¯1080pæ¸…æ™°åº¦çš„è§†é¢‘ï¼ˆç†è®ºä¸Šéœ€è¦4Mbpså¸¦å®½ï¼‰ï¼Œé‚£ä¹ˆï¼Œç´¯è®¡éœ€è¦çš„æµé‡å¸¦å®½æ˜¯$$10,000,000Ã—4Mbps&#x3D;40,000,000Mbps&#x3D;40Tbps$$è¿™ä¸ªæ•°å­—è€ææ€–äº†ï¼å¯¹äºä¼˜é…·ã€çˆ±å¥‡è‰ºè¿™æ ·çš„äº’è”ç½‘è§†é¢‘å†…å®¹æä¾›å•†æ¥è¯´ï¼Œè¿™æ— ç–‘æ˜¯éå¸¸å·¨å¤§çš„æµé‡å‹åŠ›ã€‚\nå¦‚æœæŒ‰æœåŠ¡å™¨ç”¨çš„10Gbpsçš„ä¸‡å…†ç½‘å¡æ¥ç®—ï¼Œé‚£ä¹Ÿéœ€è¦å››åƒå—ä¸‡å…†ç½‘å¡æ‰èƒ½é¡¶å¾—ä½è¿™ä¹ˆå¤§çš„æµé‡æ¶ˆè€—ï¼Œæ›´åˆ«æå‹æ ¹æ²¡æœ‰é‚£ä¹ˆå¤šåœ°æ–¹ç»™ä½ æ’è¿™ä¹ˆå¤šç½‘å¡çš„äº‹æƒ…äº†ï¼›\næœ‰è¿™ä¹ˆä¸€ä¸ªè¯´æ³•ï¼šå½“ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œç­‰å¾…è¶…è¿‡4ç§’ï¼Œä»–å°±ä¼šå…³é—­è¿™ä¸ªé¡µé¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç”¨æˆ·å°±ä¼šæµå¤±ã€‚ç”¨æˆ·æµå¤±å¯¹äºå…¬å¸æ¥è¯´å¯å°±æ˜¯é‡‘é’±æµå¤±ï¼\næ‰€ä»¥ï¼Œæ²¡æœ‰ä»»ä½•ä¸€å®¶äº’è”ç½‘æœåŠ¡æä¾›å•†åŸå› å› ä¸ºç½‘ç»œçš„é—®é¢˜è€Œæµå¤±å®¢æˆ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—åƒä¸ªåŠæ³•æ¥è§£å†³è¿™ç§æµé‡çŸ­æ—¶é—´æš´å‘çš„é—®é¢˜ï¼\nè€ŒCDNï¼Œå°±æ˜¯ä¸€é¡¹éå¸¸æœ‰æ•ˆçš„ç¼©çŸ­æ—¶å»¶çš„æŠ€æœ¯ã€‚\n1.2 æŠ€æœ¯ä¸»ä½“CDNç¼©çŸ­ç”¨æˆ·å»¶æ—¶çš„åŠæ³•ä¹Ÿéå¸¸â€œç®€å•â€ï¼Œå…¶å®å°±æ˜¯å°†äº‘æœåŠ¡éƒ¨ç½²åˆ°ç”¨æˆ·èº«è¾¹ã€‚åœ¨è®¿é—®çš„æ—¶å€™ï¼Œæ ¹æ®DNSçš„å¤šçº¿è§£æèƒ½åŠ›ï¼ˆå³ä¸ºä¸åŒåœ°åŒºæä¾›ä¸åŒçš„IPè§£æï¼‰é€‰æ‹©ç¦»ç”¨æˆ·æœ€è¿‘çš„æœåŠ¡å™¨æ¥ä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚\n\nå› ä¸ºè¿™æ ·ï¼ŒCDNå°±åœ¨å†…å®¹å±‚é¢ä¸Šè¿›è¡Œäº†ä¸€å®šçš„ç­›é€‰å’Œåˆ†å‘ï¼Œæ‰€ä»¥ä»–å°±å«å†…å®¹åˆ†å‘ç½‘ç»œï¼›\nå…·ä½“æ¥è¯´ï¼ŒCDNå°±æ˜¯é‡‡ç”¨æ›´å¤šçš„ç¼“å­˜æœåŠ¡å™¨ï¼ˆCDNè¾¹ç¼˜èŠ‚ç‚¹ï¼‰ï¼Œå¸ƒæ”¾åœ¨ç”¨æˆ·è®¿é—®ç›¸å¯¹é›†ä¸­çš„åœ°åŒºæˆ–ç½‘ç»œä¸­ã€‚å½“ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œåˆ©ç”¨å…¨å±€è´Ÿè½½æŠ€æœ¯ï¼Œå°†ç”¨æˆ·çš„è®¿é—®æŒ‡å‘è·ç¦»æœ€è¿‘çš„ç¼“å­˜æœåŠ¡å™¨ä¸Šï¼Œç”±ç¼“å­˜æœåŠ¡å™¨å“åº”ç”¨æˆ·è¯·æ±‚ã€‚ï¼ˆæœ‰ç‚¹åƒç”µå•†çš„æœ¬åœ°ä»“ï¼‰\nå¤§å®¶å¯èƒ½è§‰å¾—ï¼Œè¿™ä¸ªä¸å°±æ˜¯â€œé•œåƒæœåŠ¡å™¨â€å˜›ï¼Ÿå…¶å®ä¸ä¸€æ ·ã€‚é•œåƒæœåŠ¡å™¨æ˜¯æºå†…å®¹æœåŠ¡å™¨çš„å®Œæ•´å¤åˆ¶ã€‚è€ŒCDNï¼Œæ˜¯éƒ¨åˆ†å†…å®¹çš„ç¼“å­˜ï¼Œæ™ºèƒ½ç¨‹åº¦æ›´é«˜ã€‚\nç¡®åˆ‡åœ°è¯´ï¼ŒCDN&#x3D;æ›´æ™ºèƒ½çš„é•œåƒ+ç¼“å­˜+æµé‡å¯¼æµ\nè€Œä¸”è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCDNå¹¶ä¸æ˜¯åªèƒ½ç¼“å­˜è§†é¢‘å†…å®¹ï¼Œå®ƒè¿˜å¯ä»¥å¯¹ç½‘ç«™çš„é™æ€èµ„æºï¼ˆä¾‹å¦‚å„ç±»å‹å›¾ç‰‡ã€htmlã€cssã€jsç­‰ï¼‰è¿›è¡Œåˆ†å‘ï¼Œå¯¹ç§»åŠ¨åº”ç”¨APPçš„é™æ€å†…å®¹ï¼ˆä¾‹å¦‚å®‰è£…åŒ…apkæ–‡ä»¶ã€APPå†…çš„å›¾ç‰‡è§†é¢‘ç­‰ï¼‰è¿›è¡Œåˆ†å‘ã€‚\nCDNçš„å…·ä½“å·¥ä½œæµç¨‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæŸä¸ªç”¨æˆ·æƒ³è¦è®¿é—®ä¼˜é…·çš„è§†é¢‘ç‚¹æ’­å†…å®¹ï¼Œé‚£ä¹ˆï¼š\n\nå…·ä½“æ­¥éª¤å¦‚ä¸‹\n\nå½“ç”¨æˆ·ç‚¹å‡»å¯¹åº”èµ„æºå†…å®¹ï¼Œåº”ç”¨æ ¹æ®åŸŸååœ°å€åˆ°åº•å±‚è§¦å‘DNSè¯·æ±‚ï¼›\nå…ˆæ˜¯è¯·æ±‚çš„æœ¬åœ°è¿è¥å•†çš„DNSï¼Œå†è½¬å‘åˆ°CDNåŸŸåæœåŠ¡çš„DNSï¼›\nCDNåŸŸåæœåŠ¡çš„DNSä¼šå°†CDNçš„å…¨å±€å‡è¡¡è´Ÿè½½æœåŠ¡å™¨çš„IPåœ°å€è¿”å›ç»™ç”¨æˆ·ï¼›\nç”¨æˆ·å‘CDNçš„è´Ÿè½½å‡è¡¡è®¾å¤‡å‘èµ·URLçš„è®¿é—®è¯·æ±‚ï¼›\nCDNçš„è´Ÿè½½å‡è¡¡è®¾å¤‡æ ¹æ®ç”¨æˆ·IPåœ°å€ï¼Œä»¥åŠç”¨æˆ·è¯·æ±‚çš„å†…å®¹URLï¼Œé€‰æ‹©ä¸€å°ç”¨æˆ·æ‰€å±åŒºåŸŸï¼ˆç¦»ç”¨æˆ·è¶Šè¿‘è¶Šå¥½ï¼‰çš„ç¼“å­˜æœåŠ¡å™¨ï¼›\nè´Ÿè½½å‡è¡¡è®¾å¤‡å‘Šè¯‰ç”¨æˆ·è¿™å°ç¼“å­˜æœåŠ¡å™¨çš„IPåœ°å€ï¼Œè®©ç”¨æˆ·å‘æ‰€é€‰æ‹©çš„ç¼“å­˜æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼›\nç”¨æˆ·å‘ç¼“å­˜æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç¼“å­˜æœåŠ¡å™¨å“åº”ï¼Œå°†ç”¨æˆ·è¯·æ±‚å†…å®¹å‘é€ç»™ç”¨æˆ·\nå¦‚æœè¿™å°æœåŠ¡å™¨ä¸Šæ²¡æœ‰ç”¨æˆ·æƒ³è¦çš„å†…å®¹ï¼Œé‚£å°±æ ¹æ®CDNè®¾ç½®çš„å›æºæœåŠ¡å™¨ï¼ˆåˆç§°æºç«™ï¼‰æ¥è¯·æ±‚è¯¥URL\nç¼“å­˜æœåŠ¡å™¨ä»æºç«™æ‹‰å–å†…å®¹ç¼“å­˜åˆ°æœ¬åœ°ï¼Œå¹¶ä¼ è¾“ç»™ç”¨æˆ·ï¼›å¹¶æ ¹æ®ç”¨æˆ·è®¾ç½®çš„ç¼“å­˜ç­–ç•¥æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦ä¿ç•™è¯¥èµ„æºåˆ°æœ¬åœ°ï¼Œæ˜¯åˆ™è¿›è¡Œç¼“å­˜ã€‚\n\nåœ¨CDNå·¥ä½œçš„æ•´ä¸ªæµç¨‹ä¸­ï¼Œæºç«™çš„æœåŠ¡å™¨IPæ˜¯å¯¹ç”¨æˆ·ä¸å¯è§çš„ï¼›CDNæœåŠ¡åœ¨å®ç°äº†ä¸€å®šçš„èµ„æºè®¿é—®åŠ é€Ÿçš„åŸºç¡€ä¸Šï¼Œè¿˜é™„å¸¦äº†éšè—æºç«™IPçš„åŠŸèƒ½ï¼Œé¿å…æºç«™ç›´æ¥é­å—ç«åŠ›æ‰“å‡»ï¼ˆæŒ‡æœåŠ¡å™¨è¢«æ”»å‡»ï¼‰\n1.3 é™æ€åŠ é€Ÿæ‰€è°“é™æ€åŠ é€Ÿï¼Œæ˜¯åªåŠ é€Ÿæºç«™æ‰€æä¾›æœåŠ¡ä¸­çš„é™æ€èµ„æºï¼ŒåŒ…æ‹¬jsã€htmlã€cssã€å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰ä¸ä¼šå‡ºç°å˜åŠ¨çš„èµ„æºæ–‡ä»¶ã€‚å°†è¿™äº›èµ„æºåœ¨CDNäº‘æœåŠ¡å™¨å†…è¿›è¡Œç¼“å­˜ï¼Œç”¨æˆ·è®¿é—®é™æ€èµ„æºçš„æ—¶å€™ä»CDNä¼ è¾“ç»™ç”¨æˆ·ï¼Œè®¿é—®aspã€phpã€jspç­‰åŠ¨æ€èµ„æºçš„æ—¶å€™ï¼Œä»æºç«™æŠ“å–ï¼Œæ—¢ä¿è¯äº†æ•°æ®çš„åŠæ—¶æ€§ï¼Œåˆæé«˜äº†é™æ€èµ„æºçš„åŠ è½½é€Ÿåº¦ã€‚\nç›¸æ¯”äºåŠ¨æ€èµ„æºæ–‡ä»¶ï¼Œé™æ€èµ„æºï¼Œç‰¹åˆ«æ˜¯å›¾ç‰‡ï¼Œæ˜¯è®¿é—®è¿‡ç¨‹ä¸­æ¶ˆè€—æµé‡è¾ƒå¤§çš„éƒ¨åˆ†ï¼›ä½¿ç”¨é™æ€èµ„æºåŠ é€Ÿèƒ½å¤§å¤§å‡è½»æºç«™çš„ç½‘ç»œè´·æ¬¾å’Œèµ„æºè´Ÿè½½çš„å‹åŠ›ï¼Œåˆå‡å°‘äº†ç”¨æˆ·çš„åŠ è½½é€Ÿåº¦ï¼Œä½¿å¾—ç½‘ç»œæœåŠ¡èƒ½æ›´å¿«çš„å±•ç°åœ¨ç”¨æˆ·é¢å‰ï¼›\n1.4 åŠ¨æ€åŠ é€ŸåŠ¨æ€åŠ é€Ÿæ˜¯æŒ‡CDNçš„DNSè§£æä¸­é€šè¿‡åŠ¨æ€é“¾è·¯æ¢æµ‹ï¼Œç›‘æ§ç½‘ç»œç¯å¢ƒçš„å˜åŒ–ï¼Œç›‘æ§å„åœ°ç½‘ç»œå»¶è¿Ÿï¼Œå¯»æ‰¾åˆ°ä¸€æ¡æœ€ç¨³å®šã€æœ€é«˜æ•ˆã€æœ€å¿«é€Ÿçš„è·¯å¾„ï¼Œå›æºåŠ¨æ€èµ„æºï¼Œä»è€Œå®ç°åŠ¨æ€èµ„æºï¼ˆå¦‚aspã€phpã€jspç­‰ï¼‰åŠ é€Ÿã€‚ç„¶åæ„æˆé“¾è·¯åˆ—è¡¨ï¼Œç»‘å®šåˆ°DNSè§£æä¸Šï¼Œæ›´æ–°åˆ°CDNçš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸Šã€‚ç®€å•æ¶æ„è§ä¸‹å›¾æ‰€ç¤ºã€‚\n\n1.5 æ•°æ®èŠ‚ç‚¹çš„æ›´æ–°å’ŒåŒæ­¥cdnåˆ†ä¸ºæ¨æ‹‰ä¸¤ç§æ–¹å¼\n\næ¨æ˜¯æœåŠ¡å™¨å°†å†…å®¹æ¨åˆ°cdnèŠ‚ç‚¹ä¸Š\næ‹‰æ˜¯cdnåœ¨ç¬¬ä¸€æ¬¡æ¥å—è¯·æ±‚çš„æ—¶å€™ä»æœåŠ¡å™¨æ‹‰å–èµ„æºè¿›è¡Œå“åº”å¹¶ä¿å­˜\n\nå½“èµ„æºåœ¨cdnç¼“å­˜ä¹‹åï¼Œå¦‚æœæœåŠ¡å™¨ä¸Šçš„èµ„æºå‘ç”Ÿå˜åŒ–ï¼ŒcdnèŠ‚ç‚¹æ˜¯ä¸ä¼šçŸ¥é“çš„ï¼Œé™¤éç¼“å­˜æ—¶é—´åˆ°æœŸé‡æ–°æ‹‰å–æˆ–è€…ä¿®æ”¹æ–°èµ„æºçš„è®¿é—®ã€‚\nåŠ¨æ€èµ„æºçš„è¯ï¼Œä¸€èˆ¬éƒ½æ˜¯æ— å»¶è¿Ÿçš„ã€‚é™æ€å¯¹äº css å’Œ js æ¥è¯´ï¼Œå»ºè®®åœ¨ç¼–è¯‘ç”Ÿæˆçš„é˜¶æ®µï¼Œä¸ºæ–‡ä»¶ååŠ ä¸Šæ—¶é—´æˆ³ã€‚è€Œä¸”æœ€å¥½æ˜¯åœ¨æ–‡ä»¶åé‡Œé¢ï¼Œè€Œä¸æ˜¯ querystring é‡Œé¢åŠ ã€‚è¿™æ˜¯æœ€æ–¹ä¾¿çš„æ–¹æ¡ˆï¼Œå› ä¸ºä¸€æ—¦å‘ç”Ÿäº†æ›´æ–°ï¼Œæ¯æ¬¡å»å–çš„ä¸€å®šæ˜¯æ–°æ–‡ä»¶ï¼Œä¸æ¶‰åŠç¼“å­˜åˆ·æ–°çš„é—®é¢˜ã€‚\n1.6 CDNçš„å¥½å¤„1.6.1 å¯¹æœåŠ¡å•†é‡‡ç”¨CDNæŠ€æœ¯ï¼Œæœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯åŠ é€Ÿäº†ç½‘ç«™çš„è®¿é—®â€”â€”ç”¨æˆ·ä¸å†…å®¹ä¹‹é—´çš„ç‰©ç†è·ç¦»ç¼©çŸ­ï¼Œç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ä¹Ÿå¾—ä»¥ç¼©çŸ­ã€‚\nè€Œä¸”ï¼Œåˆ†å‘è‡³ä¸åŒçº¿è·¯çš„ç¼“å­˜æœåŠ¡å™¨ï¼Œä¹Ÿè®©è·¨è¿è¥å•†ä¹‹é—´çš„è®¿é—®å¾—ä»¥åŠ é€Ÿã€‚ä¾‹å¦‚ä¸­å›½ç§»åŠ¨æ‰‹æœºç”¨æˆ·è®¿é—®ä¸­å›½ç”µä¿¡ç½‘ç»œçš„å†…å®¹æºï¼Œå¯ä»¥é€šè¿‡åœ¨ä¸­å›½ç§»åŠ¨å‡è®¾CDNæœåŠ¡å™¨ï¼Œè¿›è¡ŒåŠ é€Ÿã€‚æ•ˆæœæ˜¯éå¸¸æ˜æ˜¾çš„ã€‚\næ­¤å¤–ï¼ŒCDNè¿˜æœ‰å®‰å…¨æ–¹é¢çš„å¥½å¤„ã€‚å†…å®¹è¿›è¡Œåˆ†å‘åï¼ŒæºæœåŠ¡å™¨çš„IPè¢«éšè—ï¼Œå—åˆ°æ”»å‡»çš„æ¦‚ç‡ä¼šå¤§å¹…ä¸‹é™ã€‚è€Œä¸”ï¼Œå½“æŸä¸ªæœåŠ¡å™¨æ•…éšœæ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ä¸´è¿‘çš„å¥åº·æœåŠ¡å™¨ï¼Œè¿›è¡ŒæœåŠ¡ï¼Œé¿å…å¯¹ç”¨æˆ·é€ æˆå½±å“ã€‚\næ­£å› ä¸ºCDNçš„å¥½å¤„å¾ˆå¤šï¼Œæ‰€ä»¥ï¼Œç›®å‰æ‰€æœ‰ä¸»æµçš„äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼Œéƒ½é‡‡ç”¨äº†CDNæŠ€æœ¯ã€‚æ‰€æœ‰çš„äº‘æœåŠ¡æä¾›å•†ï¼Œä¹Ÿéƒ½æä¾›äº†CDNæœåŠ¡ï¼ˆä»·æ ¼ï¼ŒæŒ‰æµé‡è®¡è´¹ï¼‰\n1.6.2 å¯¹é€šä¿¡è¡Œä¸š\näº’è”ç½‘æœåŠ¡æä¾›å•†é‡‡ç”¨CDNï¼Œæ˜¯ä»¥å­˜å‚¨æ¢æ—¶å»¶ã€‚èŠ±é’±è´­ç½®CDNæœåŠ¡å™¨æˆ–äº‘è®¡ç®—æœåŠ¡ï¼Œä»¥æ­¤æ¢å–æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚\né€šä¿¡è¿è¥å•†ä¹Ÿè¿½æ§CDNï¼Œä½†å®ƒä»¬çš„ç›®çš„ï¼Œæ˜¯ä»¥å­˜å‚¨æ¢å¸¦å®½ â€”â€”é€šè¿‡æœåŠ¡â€œä¸‹æ²‰â€ï¼Œå‡è½»ä¸Šå±‚éª¨å¹²ç½‘ç»œçš„æµé‡å‹åŠ›ï¼Œé¿å…ç¡¬ä»¶æ‰©å®¹ï¼Œé™ä½ç½‘ç»œå»ºè®¾æˆæœ¬ã€‚\n\nä»¥ä¸Šæ–‡æåˆ°çš„çˆ±å¥‡è‰ºçœ‹è§†é¢‘çš„é«˜å¸¦å®½é—®é¢˜ä¸ºä¾‹ï¼Œå¦‚æœä¸é‡‡ç”¨CDNï¼Œé‚£å°±æ˜¯å·¨å¤§çš„æµé‡æµå…¥åŒä¸€ä¸ªæœºæˆ¿ï¼Œè¿™ä¼šå¯¼è‡´è¿™ä¸ªæœºæˆ¿å…¥ç½‘&#x2F;å‡ºç½‘çš„çº¿è·¯è¢«æ‹¥å¡ï¼Œå½±å“å…¶ä»–ä¸šåŠ¡çš„è¿›è¡Œï¼\nåŒæ ·çš„ï¼Œå¦‚æœå¤§é‡çš„ä¸šåŠ¡æµé‡æ•°æ®åœ¨éª¨å¹²ç½‘è·‘æ¥è·‘å»ï¼Œéª¨å¹²ç½‘è‚¯å®šåƒä¸æ¶ˆï¼Œè¦æ‹¼å‘½æ‰©å®¹ã€‚å¦‚æœè¿™äº›ä¸šåŠ¡æµé‡æ•°æ®åœ¨åº•å±‚å°±è¢«è§£å†³äº†ï¼Œé‚£ä¹ˆï¼Œéª¨å¹²ç½‘çš„å¸¦å®½å‹åŠ›è‡ªç„¶å°±å‡è½»äº†ã€‚\nå¾ˆå¤šè¿è¥å•†å·²ç»å°†CDNä¸‹æ²‰åˆ°åœ°å¸‚çº§ï¼Œä»¥æ­¤å‡è½»å‹åŠ›ï¼ŒåŒæ—¶å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼å¯è°“æ˜¯ä¸€ä¸¾ä¸¤å¾—çš„ç¾äº‹ï¼\n\n2.PCDNPCDNæŠ€æœ¯æ˜¯P2PæŠ€æœ¯+CDNæŠ€æœ¯çš„é›†å’Œï¼Œåœ¨è®¤è¯†PCDNä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç®€å•äº†è§£ä¸€ä¸‹P2PæŠ€æœ¯\n2.1 P2PP2På³Peer to Peerï¼Œæ˜¯ä¸€ç§å¯¹ç­‰è¿æ¥æ–¹å¼ï¼Œçº¯P2Pæ¶æ„åŒ…å«å¦‚ä¸‹å†…å®¹\n\næ²¡æœ‰æ€»æ˜¯åœ¨çº¿çš„æœåŠ¡å™¨\nä»»æ„ç«¯ä¹‹é—´ç›´æ¥é€šä¿¡\nå¯¹ç­‰æ–¹ä¹‹é—´å¯ä»¥é—´æ–­é“¾æ¥ï¼Œå¹¶å¯ä»¥åŠ¨æ€æ”¹å˜IPåœ°å€\n\nå®é™…çš„ç”¨ä¾‹å¦‚ä¸‹\n\næ–‡ä»¶åˆ†å‘ï¼ˆBTä¸‹è½½ï¼‰\næµåª’ä½“\nVolP\nå†…ç½‘ç©¿é€å¼è®¿é—®ï¼ˆå»ºç«‹P2Pé“¾æ¥ï¼Œç›´æ¥å’Œå†…ç½‘ä¸»æœºé€šä¿¡ï¼‰\n\n\nå…³äºP2Pæƒ³äº†è§£æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥çœ‹æ­¤æ–‡ï¼šè¯¦è§£P2PæŠ€æœ¯\n2.2 PCDN2.2.1 æµç¨‹å‰é¢æåˆ°äº†ï¼ŒPCDNæ˜¯P2P+CDNï¼Œé‚£ä¹ˆå…¶æ˜¯å¦‚ä½•å°†P2PæŠ€æœ¯å’ŒCDNç»“åˆèµ·æ¥çš„å‘¢ï¼Ÿ\nåœ¨é˜¿é‡Œäº‘å®˜ç½‘ä¸Šå¯ä»¥çœ‹åˆ°å¯¹PCDNçš„ä»‹ç»ï¼šä¸€ç¯‡æ–‡ç« è§£è¯»æé€Ÿã€é™è´¹é»‘ç§‘æŠ€ï¼šPCDNå®šä¹‰ã€åŠŸèƒ½ã€æ¶æ„ã€åœºæ™¯å’Œä¼˜åŠ¿ï¼›æœ¬æ–‡æ˜¯å¯¹è¿™ç¯‡æ–‡ç« çš„ä¸ªäººç†è§£ã€‚\n\nPCDNäº§å“æ˜¯ä¸ä¼ ç»ŸCDNäº’è¡¥åä½œçš„å…³ç³»ï¼Œä»¥P2PæŠ€æœ¯ä¸ºæ ¸å¿ƒçš„åˆ†å¸ƒå¼PCDNç³»ç»Ÿå¯ä¸ä¼ ç»ŸCDNã€äº‘CDNæ— ç¼é›†æˆï¼Œå½¢æˆäº’è¡¥åä½œï¼Œç›¸å¯¹äºCDNæ‹¥æœ‰æˆæœ¬æ›´ä½ã€è´¨é‡æ›´å¥½ä¸¤æ–¹é¢çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚\n\nP2P å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆè‹±æ–‡åï¼šP2P CDNï¼Œä»¥ä¸‹ç®€ç§°PCDNï¼‰æ˜¯ä»¥P2PæŠ€æœ¯ä¸ºåŸºç¡€ï¼Œé€šè¿‡æŒ–æ˜åˆ©ç”¨è¾¹ç¼˜ç½‘ç»œæµ·é‡ç¢ç‰‡åŒ–é—²ç½®èµ„æºè€Œæ„å»ºçš„ä½æˆæœ¬é«˜å“è´¨å†…å®¹åˆ†å‘ç½‘ç»œæœåŠ¡ã€‚ä½ å¯ä»¥é€šè¿‡é›†æˆPCDN SDKï¼ˆä»¥ä¸‹ç®€ç§°SDKï¼‰æ¥å…¥è¯¥æœåŠ¡åèƒ½è·å¾—ç­‰åŒï¼ˆæˆ–ç•¥é«˜äºï¼‰CDNçš„åˆ†å‘è´¨é‡ï¼ŒåŒæ—¶æ˜¾è‘—é™ä½åˆ†å‘æˆæœ¬ã€‚é€‚ç”¨äºè§†é¢‘ç‚¹æ’­ã€ç›´æ’­ã€å¤§æ–‡ä»¶ä¸‹è½½ç­‰ä¸šåŠ¡åœºæ™¯ã€‚\nä½¿ç”¨PCDNåçš„httpè¯·æ±‚å¤„ç†æµç¨‹å¦‚ä¸‹å›¾ï¼š\n\nP2Pçš„åŠ å…¥ï¼Œå°±æ˜¯å°†ä¸€äº›æ•°æ®é¢„å…ˆç•™å­˜åœ¨éƒ¨åˆ†ç»ˆç«¯è®¾å¤‡ï¼ˆæ¯”å¦‚å®¶ç”¨è·¯ç”±å™¨ï¼Œä¸ªäººç”µè„‘ï¼Œä¸ªäººNASï¼‰ç­‰äº§å“ä¸Šï¼Œå†é€šè¿‡P2PæŠ€æœ¯ï¼Œä»è¿™äº›Peeråšç§ç«¯è·å–åˆ°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œä»¥æ­¤ä¸ºå‘¨è¾¹ç”¨æˆ·æä¾›æœåŠ¡ã€‚\nä½¿ç”¨PCDNçš„SDKåï¼Œåœ¨è¯·æ±‚DNSä¹‹åï¼Œè¿˜ä¼šå»è¯·æ±‚PCDNçš„è°ƒåº¦ç³»ç»Ÿï¼ŒPCDNåŒæ—¶ä¼šè¿”å›å¯ç”¨çš„CDNæœåŠ¡å™¨ï¼Œå’Œå¯ç”¨çš„P2Påšç§ç«¯ï¼Œç”¨æˆ·èƒ½åŒæ—¶ä»å¤šç«¯è·å–åˆ°æ•°æ®ï¼ˆæ ¹æ®æ–‡ä»¶åˆ†å—ï¼Œä»ä¸åŒåœ°æ–¹è·å–åŒä¸€æ–‡ä»¶ä¸åŒåˆ†å—çš„æ•°æ®ï¼Œæé«˜æ–‡ä»¶ä¸‹è½½é€Ÿåº¦ï¼‰\næ¯”å¦‚ä¸€ä¸ªæ–‡ä»¶æœ‰1MBï¼Œé‚£ä¹ˆä½¿ç”¨PCDNï¼Œæˆ‘ä»¬å¯èƒ½æœåŠ¡å•†çš„ä»CDNæœåŠ¡å™¨æ‹‰å–äº†500KBï¼Œå†ä»ä¸Šå›¾ä¸­æ‰€ç¤ºçš„ä¸¤ä¸ªpeeridç«¯è·å–åˆ°äº†500KBæ•°æ®ï¼›\nå› ä¸ºp2pä½¿ç”¨çš„æ˜¯ä¸ªäººçš„peerç»ˆç«¯èŠ‚ç‚¹ï¼Œä¸ä»…æ•°é‡å¤šï¼Œä¸”åˆ†å¸ƒæ¯”CDNæœåŠ¡å™¨æ›´å¹¿ï¼Œç†è®ºä¸Šæ¥è¯´è‡³å°‘èƒ½è·å¾—ç­‰åŒäºä»…ä½¿ç”¨CDNæŠ€æœ¯çš„é€Ÿåº¦ä¼˜åŠ¿ï¼Œå¦‚æœç”¨æˆ·å¯ä»¥è¿æ¥åˆ°çš„peerè¾ƒå¤šï¼Œåˆ™é€Ÿåº¦å°±ä¼šå¤§äºä»…ä½¿ç”¨CDNæŠ€æœ¯ï¼\nè€Œè¿™äº›ä½œä¸ºpeerçš„åšç§ç«¯ï¼Œä¼šå®šæœŸä»CDNç¼“å­˜ä¸€éƒ¨åˆ†çƒ­é—¨æ•°æ®åˆ°æœ¬åœ°ï¼Œå¹¶ä¸ºå…¶ä»–ä¸è‡ªå·±å»ºç«‹P2Pé“¾æ¥çš„ç»ˆç«¯æä¾›æœåŠ¡ã€‚\n\näº¬ä¸œäº‘è·¯ç”±å™¨ã€è¿…é›·çš„ç½‘å¿ƒäº‘ã€ç™¾åº¦äº‘ç›˜PCå®¢æˆ·ç«¯çš„é—²æ—¶å¸¦å®½ä¸Šä¼ ï¼Œå…¶å®éƒ½æ˜¯ä½¿ç”¨äº†PCDNæŠ€æœ¯çš„ç»ˆç«¯äº§å“ï¼Œå…¶ä¼šåœ¨å ç”¨ä¸€å°éƒ¨åˆ†ç”¨æˆ·å¸¦å®½çš„åŸºç¡€ä¸Šï¼Œç»™ç”¨æˆ·æä¾›äº¬è±†&#x2F;ç°é‡‘å¥–åŠ±ï¼›ä½†æ˜¯PCDNä¼¼ä¹å’Œè¿è¥å•†çš„æ”¿ç­–å†²çªï¼Œå…·ä½“çš„å°±ä¸äº†è§£äº†ï¼Œæœ¬æ–‡åªæ˜¯æ¥å­¦ä¹ æŠ€æœ¯çš„ã€‚\n\n2.2.2 ä¼˜ç‚¹ä»¥ä¸‹ä¼˜ç‚¹æ¥è‡ªé˜¿é‡Œäº‘é‚£ç¯‡æ–‡ç« \n\nä»·æ ¼ä½ï¼šé€šè¿‡P2PæŠ€æœ¯å¯ä¸ºå®¢æˆ·æä¾›æ›´ä½æˆæœ¬çš„å†…å®¹åˆ†å‘æœåŠ¡ï¼Œï¼ˆä»¥å³°å€¼å¸¦å®½è®¡ä»·ï¼‰ä¸ºäº‘CDNä»·æ ¼çš„1&#x2F;2ï¼Œä¸ºä¼ ç»ŸCDNä»·æ ¼çš„1&#x2F;4ï¼Œå¯æ˜¾è‘—é™ä½å®¢æˆ·çš„åˆ†å‘æˆæœ¬ï¼›\nå› ä¸ºä½¿ç”¨äº†æ›´å¤šP2PèŠ‚ç‚¹ï¼Œå‡è½»äº†CDNæœåŠ¡å™¨ã€æºç«™æœåŠ¡å™¨çš„ç½‘ç»œå¸¦å®½å‹åŠ›ï¼Œæ‰€ä»¥PCDNèƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šèµ·åˆ°é™æœ¬å¢æ•ˆçš„ä½œç”¨ã€‚\n\nè´¨é‡å¥½ï¼šé€šè¿‡CDN+P2På¤šçº§èŠ‚ç‚¹è°ƒåº¦ï¼Œä¸€ä¸ªè¯·æ±‚å¯ç”±CDNå’Œå¤šä¸ªP2PæºåŒæ—¶æä¾›å†…å®¹ï¼Œé€šè¿‡èµ„æºå†—ä½™æé«˜äº†æœåŠ¡å¯ç”¨æ€§ï¼Œæ’­æ”¾æµç•…ç‡é«˜äºçº¯CDNï¼Œåœ¨å¤§æ–‡ä»¶ä¸‹è½½åœºæ™¯ä¸­æ›´æ˜¯èƒ½æå¤§æé«˜ä¸‹è½½é€Ÿåº¦ï¼›é€šè¿‡è°ƒç”¨æµ·é‡åˆ†å¸ƒå¼P2PèŠ‚ç‚¹ï¼Œ å¹³å‡æ’­æ”¾æµç•…ç‡ &gt; 97%ï¼Œå¹³å‡é¦–æ’­æ—¶é—´å°äº1ç§’ï¼Œç”¨æˆ·ä½“éªŒå¾—åˆ°æœ‰æ•ˆæå‡ã€‚\n\næˆç†Ÿç¨³å®šï¼šå¤šå¹´ä¸ºä¼˜é…·åœŸè±†æä¾›ä¼˜è´¨çš„è§†é¢‘æ’­æ”¾ã€ä¸‹è½½ç­‰åŠ é€ŸæœåŠ¡ï¼Œæ¥å…¥å¸¦å®½è¶…10Tï¼Œç»å†äº†æµ·é‡ç”¨æˆ·è§„æ¨¡çš„é•¿æ—¶é—´éªŒè¯ã€‚æ‹¥æœ‰å†…ç½‘ç©¿é€ã€ç¼“å­˜å¤„ç†ã€ç§å­ç®¡ç†ã€ä¼ è¾“ç­–ç•¥ç­‰å„æ–¹é¢çš„æ ¸å¿ƒæŠ€æœ¯å’Œä¸“åˆ©ï¼›ï¼ˆè¿™æ˜¯é˜¿é‡Œäº‘ç»™è‡ªå·±æ‰“çš„å¹¿å‘Šï¼‰\n\n\n\n2.3 å¸¸è§åè¯ä»¥ä¸‹æ˜¯PCDNä¸­å¸¸è§çš„åè¯ï¼›è¿™é‡Œé¢æ¼äº†çš„ä¸€çº§èŠ‚ç‚¹æŒ‡çš„åº”è¯¥æ˜¯CDNæœåŠ¡å™¨ï¼›\n\nç”±æ­¤å¯è§ï¼Œä¸Šæ–‡æåˆ°çš„äº¬ä¸œäº‘è·¯ç”±å™¨ã€è¿…é›·çš„ç½‘å¿ƒäº‘ï¼Œè¿™äº›å®¢æˆ·ç«¯åœ¨ç”¨æˆ·çš„ç”µè„‘å¯åŠ¨åï¼Œå…¶å°±æ˜¯ä½œä¸ºPCDNçš„ä¸‰çº§èŠ‚ç‚¹æ¥å…¥æ•´ä¸ªPCDNçš„ç½‘ç»œçš„ï¼Œå…¶æä¾›çš„ä¹Ÿæ˜¯ä¸‰çº§å¸¦å®½ï¼›\n2.4 åŸºç¡€æ¶æ„å…³é”®ç»„ä»¶\n\nindexæœåŠ¡ï¼šå…¨å±€è°ƒåº¦ï¼ŒæŠŠç”¨æˆ·è¯·æ±‚è°ƒåº¦åˆ°æœ€ä½³çš„æœºæˆ¿\nZooKeeper (Global&amp;Local)ï¼šæœåŠ¡æ´»åŠ¨æƒ…å†µæ±‡æŠ¥ç»™è°ƒåº¦æœåŠ¡ï¼ŒåŠ¨æ€é…ç½®æ›´æ–°\nNignx Proxyï¼šæ”¯æŒç§æœ‰åè®®çš„nginxä»£ç†æœåŠ¡ï¼Œé’ˆå¯¹ä¸åŒæ–‡ä»¶ä¸€è‡´æ€§Hashåˆ°ä¸åŒçš„ChannelæœåŠ¡\nChannelæœåŠ¡ï¼šè®°å½•æ–‡ä»¶å’Œæ‹¥æœ‰æ–‡ä»¶çš„ç«¯ç‚¹åœ°å€ä¿¡æ¯ï¼Œä¸ºä¸‹è½½æä¾›å°±è¿‘çš„ç«¯ç‚¹åœ°å€\nRealyæœåŠ¡ï¼šæœåŠ¡P2På»ºç«‹è¿æ¥å’Œé€šè®¯\nHotæœåŠ¡ï¼šhotæ–‡ä»¶å‘ç°å’Œæ¨é€\n\nä»¥ä¸‹æ˜¯PCDNæŠ€æœ¯çš„æ¶æ„å›¾\n\næ•´ä¸ªæŠ€æœ¯çš„æµç¨‹åœ¨ä¸Šæ–‡å·²ç»è®²è§£è¿‡äº†ã€‚è¿™é‡Œçš„æ¶æ„å›¾é˜¿é‡Œäº‘çš„æ–‡ç« å¹¶æ²¡æœ‰æä¾›æ›´å¤šçš„è¯´æ˜ï¼Œå…·ä½“çš„å°±å¾—åœ¨çœŸæ­£éœ€è¦å¼€å‘PCDNçš„æ—¶å€™åœ¨å…¬å¸å†…éƒ¨æ·±å…¥å­¦ä¹ äº†ã€‚\n2.5 é€‚ç”¨èŒƒå›´PCDNäº§å“é€‚ç”¨äºè§†é¢‘ç‚¹æ’­ã€ç›´æ’­ã€å¤§æ–‡ä»¶ä¸‹è½½ç­‰ä¸šåŠ¡é¢†åŸŸã€‚\n\nè§†é¢‘ç‚¹æ’­ï¼šé•¿è§†é¢‘ç‚¹æ’­ï¼Œçƒ­åº¦é›†ä¸­çš„çŸ­è§†é¢‘ç‚¹æ’­ã€‚\nè§†é¢‘ç›´æ’­ï¼šå¤§å‹æ™šä¼šèµ›äº‹ç›´æ’­ã€åœ°æ–¹ç½‘å°ç›´æ’­ã€ç§€åœºäº’åŠ¨ç›´æ’­ã€‚\nå¤§æ–‡ä»¶ä¸‹è½½ï¼šè¶…è¿‡1MBä¸”çƒ­åº¦é›†ä¸­çš„çš„æ–‡ä»¶åˆ†å‘ï¼Œå¦‚åº”ç”¨å¸‚åœºåˆ†å‘ã€åœ¨çº¿éŸ³é¢‘åˆ†å‘ã€‚\n\n3.SDNSDNå…¨ç§°Software Defined Networkï¼Œæ¦‚å¿µæœ€æ—©ç”±æ–¯å¦ç¦å¤§å­¦çš„Nick McKeownæ•™æˆäº2009å¹´æå‡ºï¼›è°·æ­Œäº2010åˆ°2012å¹´å»ºç«‹çš„æ•°æ®ä¸­å¿ƒç½‘ç»œB4æ˜¯SDNçš„æˆåŠŸæ¡ˆä¾‹ï¼›\nè¯¥æŠ€æœ¯å­¦ä¹ äºbç«™ã€408 è®¡ç®—æœºç½‘ç»œæ–°å¢è€ƒç‚¹â€”è½¯ä»¶å®šä¹‰ç½‘ç»œSDNï¼ˆå­—å¹•ç‰ˆï¼‰ã€‘\n3.1 çœ‹çœ‹è·¯ç”±å™¨çš„åŠŸèƒ½è·¯ç”±å™¨å…·å¤‡å¦‚ä¸‹åŠŸèƒ½\n\næŠ¥æ–‡è½¬å‘\nè·¯ç”±é€‰æ‹©\n\nåœ¨å½“å‰çš„è·¯ç”±å™¨æ¶æ„ä¸­ï¼Œåˆ†ä¸ºæ•°æ®å±‚é¢å’Œæ§åˆ¶å±‚é¢ã€‚\n\nä¸ºäº†æ„å»ºå‡ºè‡ªå·±çš„è·¯ç”±è¡¨ï¼Œè·¯ç”±å™¨å¿…é¡»è¦å’Œå‘¨è¾¹çš„å…¶ä»–è·¯ç”±å™¨å®šæœŸé€šä¿¡ï¼Œæ‰èƒ½é€šè¿‡è‡ªå·±çš„è·¯ç”±ç®—æ³•è®¾ç½®å‡ºè·¯ç”±è¡¨ï¼Œå¹¶é€‰æ‹©æ­£ç¡®çš„è·¯ç”±è·¯å¾„ï¼ˆè¿™ä¸ªè€—æ—¶è¾ƒé•¿ï¼‰\nåœ¨æ•°æ®å±‚é¢ï¼Œè·¯ç”±å™¨é‡‡ç”¨ç¡¬ä»¶ï¼ŒæŸ¥è¡¨è¿›è¡Œè½¬å‘ï¼ˆè€—æ—¶ä½ï¼‰\n\n\n\nåˆ†ç»„æ˜¯ç½‘ç»œä¸“æœ‰åè¯ã€‚å¤§å¤šæ•°è®¡ç®—æœºç½‘ç»œéƒ½ä¸èƒ½è¿ç»­åœ°ä¼ é€ä»»æ„é•¿çš„æ•°æ®ï¼Œæ‰€ä»¥å®é™…ä¸Šç½‘ç»œç³»ç»ŸæŠŠæ•°æ®åˆ†å‰²æˆå°å—ï¼Œç„¶åé€å—åœ°å‘é€ï¼Œè¿™ç§å°å—å°±ç§°ä½œåˆ†ç»„ï¼ˆpacketï¼‰ã€‚ä¹Ÿæœ‰äº›ä¹¦ç±æŠŠåˆ†ç»„å®šä¹‰ä¸ºç½‘ç»œå±‚çš„åè®®æ•°æ®å•å…ƒã€‚\nè¯´ç™½äº†åˆ†ç»„å°±æ˜¯ä¸€ä¸ªæŠ¥æ–‡ï¼\n\n3.2 SDNæ ¸å¿ƒæ€æƒ³\nSDNè¿™ç§æ–°å‹ç½‘ç»œä½“ç³»ç»“æ„çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ˜¯å°†ç½‘ç»œçš„æ§åˆ¶å±‚å’Œæ•°æ®å±‚é¢ç»ç’ƒï¼Œè®©æ§åˆ¶å±‚å¯ä»¥é€šè¿‡è½¯ä»¶æ¥æ§åˆ¶æ•°æ®å±‚çš„è¾ƒå¤šè®¾å¤‡\n\nåœ¨SDNä½“ç³»ä¸­ï¼Œè·¯ç”±å™¨çš„è·¯ç”±è½¯ä»¶è¢«å‰¥ç¦»å¼€ï¼Œè·¯ç”±å™¨ä¹‹é—´ä¹Ÿä¸å†éœ€è¦äº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚\n\næ§åˆ¶å±‚é¢ï¼šæœ‰ä¸€ä¸ªé€»è¾‘ä¸Šé›†ä¸­çš„è¿œç¨‹æ§åˆ¶å™¨ï¼Œå¯¹å¤šä¸ªäº¤æ¢æœºè¿›è¡Œæ§åˆ¶ï¼›è¯¥è¿œç¨‹æ§åˆ¶å™¨å¯ä»¥ç”±å¤šå°ç‰©ç†ä¸»æœºç»„æˆ\n\nè¿œç¨‹æ§åˆ¶å™¨ä¼šæŒæ¡å„ä¸ªä¸»æœºå’Œæ•´ä¸ªç½‘ç»œä½“ç³»çš„çŠ¶æ€ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªè·¯ç”±åˆ†ç»„è®¡ç®—å‡ºæœ€ä½³çš„è·¯ç”±ï¼Œå’Œç”Ÿæˆæ­£ç¡®çš„è½¬å‘è¡¨ï¼›è¿™æ—¶å€™ï¼Œåº•å±‚çš„è·¯ç”±å™¨ç¡¬ä»¶å°±ä»…ä»…éœ€è¦è¿›è¡ŒæŸ¥è¡¨è½¬å‘ï¼Œè€Œä¸éœ€è¦è¿›è¡Œè€—æ—¶çš„è·¯ç”±è¡¨ç”Ÿäº§å’Œç®—æ³•è®¡ç®—äº†ï¼Œå¤§å¤§å‡è½»äº†åº•å±‚äº¤æ¢æœºå’Œè·¯ç”±å™¨ç¡¬ä»¶çš„å‹åŠ›ã€‚\n\n3.3 OpenFlowåè®®OpenFlowåè®®æ˜¯ä¸€ä¸ªå—åˆ°é«˜åº¦è®¤å¯çš„æ ‡å‡†ï¼Œå…¶ä¸€èˆ¬åœ¨SDNä¸­è¿›è¡Œä½¿ç”¨ï¼Œä½†SDNå¹¶ä¸ä¸€å®šè¦ç”¨OpenFlowï¼›\n\nOpenFlowåè®®ç”±å¼€æ”¾ç½‘ç»œåŸºé‡‘ä¼šONFè´Ÿè´£æŒ‡å®šï¼Œè¯¥åŸºé‡‘ä¼šè‡´åŠ›äºSDNçš„å‘å±•å’Œæ ‡å‡†åŒ–ï¼›OpenFlowåè®®ç›®å‰è¾ƒä¸ºæˆç†Ÿçš„æ˜¯1.3ç‰ˆæœ¬\n\nOpenFlowåè®®æ˜¯SDNä½“ç³»ç»“æ„ä¸­ï¼Œæ§åˆ¶å±‚é¢å’Œæ•°æ®å±‚é¢ä¹‹é—´çš„é€šä¿¡æ¥å£ï¼Œè¯¥åè®®å¯ä»¥å…è®¸æ§åˆ¶å±‚é¢çš„æ§åˆ¶å™¨å¯¹æ•°æ®å±‚é¢çš„ç‰©ç†è®¾å¤‡è¿›è¡Œç›´æ¥çš„è®¿é—®å’Œæ§åˆ¶ã€‚\n\n3.4 è·¯ç”±è½¬å‘çš„åŒºåˆ«3.4.1 ä¼ ç»Ÿè·¯ç”±è¡¨ä¼ ç»Ÿçš„è·¯ç”±è½¬å‘æ˜¯æŸ¥è¯¢è·¯ç”±è¡¨ï¼Œæ ¹æ®åœ°å€æ©ç è®¡ç®—ç›®çš„ç½‘ç»œï¼Œåˆ¤æ–­æ˜¯å¦ä¸å½“å‰æ¡ç›®åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™ä»å¯¹åº”çš„ã€Œä¸‹ä¸€æ¡ã€ä¸­å‘é€å‡ºå»ã€‚\nè·¯ç”±è½¬å‘è¿™éƒ¨åˆ†å†…å®¹åœ¨æˆ‘çš„IPåè®®è¯¦è§£åšå®¢ä¸­æœ‰æ‰€æ¶‰åŠï¼šç‚¹æˆ‘\n\n3.4.2 SDNå¹¿ä¹‰è½¬å‘SDNåœ¨è¿™åŸºç¡€ä¸Šæ–°å¢äº†æ›´å¤šçš„å†…å®¹ï¼Œç§°ä¸ºå¹¿ä¹‰è½¬å‘ï¼š\n\nè¿›è¡ŒåŒ¹é…ï¼šèƒ½å¤Ÿå¯¹ç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„å„å±‚ï¼ˆæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œä¼ è¾“å±‚ï¼‰é¦–éƒ¨ä¸­çš„å­—æ®µè¿›è¡ŒåŒ¹é…\næ‰§è¡ŒåŠ¨ä½œï¼šä¸ä»…è½¬å‘åˆ†ç»„ï¼Œè¿˜å¯ä»¥å®ç°è´Ÿè½½å‡è¡¡ã€é‡å†™IPé¦–éƒ¨ï¼ˆç±»ä¼¼NATä¸­çš„è·¯ç”±åœ°å€è½¬æ¢ï¼‰ã€äººä¸ºé˜»æŒ¡æˆ–ä¸¢å¼ƒä¸€äº›åˆ†ç»„ï¼ˆç±»ä¼¼é˜²ç«å¢™ï¼‰\n\nåœ¨SDNå¹¿ä¹‰è½¬å‘ä¸­ï¼Œå®Œæˆè¿™ä¸€æ“ä½œçš„è®¾å¤‡ä¸å†ç§°ä¸ºè·¯ç”±å™¨ï¼Œè€Œæ˜¯å«åšOpenFlowäº¤æ¢æœºï¼ˆæˆ–åˆ†ç»„äº¤æ¢æœºï¼‰ï¼Œä¹Ÿå¯ä»¥ç®€ç§°ä¸ºäº¤æ¢æœºã€‚\n3.4.3 æµè¡¨åœ¨SDNä¸­æ›¿ä»£ äº†ä¼ ç»Ÿè·¯ç”±è¡¨çš„æ˜¯ã€Œæµè¡¨ï¼ˆFlow Tableï¼‰ã€\n\nä¸€ä¸ªæµå°±æ˜¯æ•´ä¸ªç½‘ç»œä¸­çš„ä¸€ç»„åˆ†ç»„åºåˆ—ï¼Œåœ¨æ­¤åºåˆ—ä¸­çš„æ¯ä¸ªåˆ†ç»„éƒ½æ˜¯å…±äº«åˆ†ç»„é¦–éƒ¨æŸäº›å­—æ®µçš„å€¼ï¼Œä¾‹å¦‚ï¼ŒæŸä¸ªæµå¯ä»¥æ˜¯å…±äº«ç›¸åŒçš„æºIPå’Œç›®çš„IPåœ°å€çš„ä¸€è¿ä¸²åˆ†ç»„\nOpenFlowäº¤æ¢æœºä¸­çš„åˆ˜è¡¨æ˜¯ç”±SDNè¿œç¨‹æ§åˆ¶å™¨æ¥ç®¡ç†çš„ï¼ŒSDNè¿œç¨‹æ§åˆ¶å™¨é€šè¿‡ä¸€ä¸ªå®‰å…¨ä¿¡é“ï¼Œé€šè¿‡OpenFlowåè®®æ¥ç®¡ç†OpenFlowäº¤æ¢æœºä¸­çš„æµè¡¨\n\n\n\næ¯ä¸ªOpenFlowäº¤æ¢æœºå¿…é¡»æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæµè¡¨\næ¯ä¸€ä¸ªæµè¡¨åŒ…å«å¤šä¸ªæµè¡¨é¡¹ç›®\næ¯ä¸ªæµè¡¨é¡¹åŒ…å«ä¸‰ä¸ªå­—æ®µï¼šé¦–éƒ¨å­—æ®µå€¼ï¼ˆåŒ¹é…å­—æ®µï¼‰ã€è®¡æ•°å™¨ã€åŠ¨ä½œï¼ˆç±»ä¼¼ä¸‹ä¸€è·³ï¼‰\n\nOpenFlowçš„é¦–éƒ¨å­—æ®µå€¼è·¨è¶Šäº†ä¸‰ä¸ªå±‚æ¬¡çš„é¦–éƒ¨ï¼Œæ—¢å¯ä»¥å¤„ç†æ•°æ®é“¾è·¯å±‚çš„MACå¸§ï¼Œåˆå¯ä»¥å¤„ç†IPæŠ¥æ–‡ï¼Œæˆ–è€…æ˜¯TCP&#x2F;UDPçš„ç«¯å£\n\nè®¡æ•°å™¨å­—æ®µåŒ…å«ä¸€ç»„è®¡æ•°å™¨\n\nè®°å½•å·²ç»ä¸è¯¥æµè¡¨é¡¹åŒ¹é…çš„åˆ†ç»„æ•°é‡çš„è®¡æ•°å™¨ï¼›\nè®°å½•è¯¥æµè¡¨é¡¹ä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨ç»å†çš„æ—¶é—´çš„è®¡æ•°å™¨\n\nåŠ¨ä½œå­—æ®µæ˜¯ä¸€æ—åŠ¨ä½œï¼Œå½“åˆ†ç»„åŒ¹é…åˆ°æŸä¸ªæµè¡¨é¡¹æ—¶ï¼Œæ‰§è¡Œä¸‹æ–¹çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªåŠ¨ä½œ\n\næŠŠåˆ†ç»„è½¬å‘åˆ°æŒ‡å®šçš„ç«¯å£\nä¸¢å¼ƒåˆ†ç»„\næŠŠåˆ†ç»„è¿›è¡Œå¤åˆ¶åï¼Œä»å¤šä¸ªç«¯å£è½¬å‘å‡ºå»\né‡å†™åˆ†ç»„ä¸­çš„é¦–éƒ¨å­—æ®µ\n\n3.4.4 VLAN\nå…³äºè¯¥æŠ¥æ–‡ä¸­VLANéƒ¨åˆ†å¯ä»¥æŸ¥çœ‹æ­¤åšå®¢ï¼šhttps://blog.csdn.net/LawssssCat/article/details/127204720\n\nVLANæ˜¯ä¸€ç§ç”¨äºè¿›ä¸€æ­¥è™šæ‹ŸåŒ–åˆ’åˆ†å±€åŸŸç½‘çš„æ–¹å¼ï¼Œå‡å¦‚ä¸€å°è·¯ç”±å™¨æœ‰4ä¸ªç½‘å£ï¼Œå…¶å¯ä»¥é€šè¿‡å°†LAN1å’ŒLAN2è®¾ç½®æˆVLAN10ï¼ŒLAN3å’ŒLAN4è®¾ç½®æˆVLAN20æ¥æ¨¡æ‹Ÿå‡ºä¸¤ä¸ªå±€åŸŸç½‘\n\nvlanï¼ˆvirtual lanï¼‰æŠ€æœ¯æä¾›äº†ä¸€ç§çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼›å°†äº¤æ¢æœºçš„æ¥å£æ ¹æ®ä¸šåŠ¡éœ€è¦æ·»åŠ åˆ°ä¸åŒçš„vlanä¸­ï¼Œä»è€Œå®ç°äºŒå±‚éš”ç¦»ã€‚\n\néš”ç¦»å¹¿æ’­åŸŸï¼Œå³å¹¿æ’­åŒ…åªåœ¨æœ¬ vlan ä¸­ä¼ æ’­ï¼Œä»è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æé«˜æ•´ä¸ªç½‘ç»œçš„å¤„ç†èƒ½åŠ›ï¼›\næé«˜å®‰å…¨æ€§ï¼Œä¸€ä¸ª vlan å†…çš„ç”¨æˆ·å’Œå…¶ä»– vlan å†…çš„ç”¨æˆ·ä¸èƒ½äº’è®¿ï¼Œæé«˜äº†ç½‘ç»œçš„å®‰å…¨æ€§ï¼›\nå¢åŠ å¸¦å®½åˆ©ç”¨&#x2F;é™ä½å»¶è¿Ÿ&#x2F;ç®¡ç†ä½œç”¨\n\n3.5 ä¸¾ä¾‹3.5.1 ç®€å•è½¬å‘é€šè¿‡ä¸åŒçš„æµè¡¨é¡¹æ¥è®¾ç½®è½¬å‘è·¯å¾„å’Œè½¬å‘åŠ¨ä½œï¼ŒåŠ¨ä½œä¸­çš„è½¬å‘(3)ä»£è¡¨ä»è¯¥äº¤æ¢æœºçš„3å·ç«¯å£è½¬å‘å‡ºå»ã€‚ç«¯å£å·åœ¨å›¾ä¸­æœ‰æ ‡æ³¨ï¼›\n\n3.5.2 è´Ÿè½½å‡è¡¡ç¬¬äºŒä¸ªæ —å­æ˜¯è´Ÿè½½å‡è¡¡çš„æ —å­ï¼Œåœ¨ä¸‹é¢çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦H3å‘é€çš„åˆ†ç»„é€šè¿‡S2-S1-S3-H5/H6ï¼Œè¦H4å‘é€çš„åˆ†ç»„é€šè¿‡S2-S3-H5/H6ï¼›ä»¥è¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ã€‚\n\nä½¿ç”¨ä¼ ç»Ÿçš„æºIPå’Œç›®çš„IPçš„è½¬å‘æ–¹å¼ï¼Œæ— æ³•å®ç°è¿™æ ·çš„è´Ÿè½½å‡è¡¡ã€‚åœ¨ä¼ ç»Ÿåœºæ™¯ä¸‹ï¼Œå½“S2åœ¨æ•°æ®é“¾è·¯å±‚å‘ç°ç›®çš„MACåœ°å€æ˜¯S3çš„MACåœ°å€çš„æ—¶å€™ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šç›´æ¥å‘é€ç»™S3ï¼Œè€Œä¸æ˜¯ä»S1å¤„ç»•è·¯ã€‚\nä½†åœ¨SDNåœºæ™¯ä¸­ï¼Œå°±å¯ä»¥é€šè¿‡ä¸¤ä¸ªä¸åŒçš„æµè¡¨é¡¹æ¥è§„å®šä¸åŒè½¬å‘åŠ¨ä½œï¼Œå®ç°è¿™æ ·çš„è´Ÿè½½å‡è¡¡ï¼ˆè¿™é‡Œçš„è½¬å‘(4)ä»£è¡¨ä»S2çš„4å·ç«¯å£è½¬å‘å‡ºå»ï¼‰\n\n3.5.3 é˜²ç«å¢™å¦‚æœæˆ‘ä»¬æƒ³è®©S2ä¸»æœºåªæ¥æ”¶æ¥è‡ªS1çš„æ•°æ®è€Œä¸æ¥å—S3çš„æ•°æ®ï¼Œå°±å¯ä»¥é€šè¿‡åªè®¾ç½®S1çš„æºIPåœ°å€çš„æµè¡¨é¡¹ï¼Œæ¥ä¸¢å¼ƒS3å‘é€çš„æ•°æ®ï¼ˆåŒ¹é…ä¸ä¸Šçš„æ•°æ®å°±ä¼šè¢«ä¸¢å¼ƒï¼‰\n\n3.6 SDNä½“ç³»ç»“æ„çš„ç‰¹å¾ä¸‹å›¾ä¸­åŒ…å«äº†SDNçš„ä½“ç³»ç»“æ„ä¸€è§ˆå›¾å’ŒSDNçš„å››ä¸ªå…³é”®ç‰¹å¾\n\nåŸºäºæµçš„è½¬å‘\næ•°æ®å±‚é¢ä¸æ§åˆ¶å±‚é¢åˆ†ç¦»\nä½äºæ•°æ®å±‚é¢åˆ†ç»„äº¤æ¢æœºä¹‹å¤–çš„ç½‘ç»œæ§åˆ¶åŠŸèƒ½\nå¯ç¼–ç¨‹çš„ç½‘ç»œ\n\nå…¶ä¸­ï¼ŒSDNæ§åˆ¶å™¨æ˜¯è¿™ä¸ªæ¶æ„ä¸­æœ€å¤æ‚çš„è®¾å¤‡ï¼Œå…¶é€šè¿‡å—å‘APIæ§åˆ¶åº•å±‚çš„OpenFlowäº¤æ¢æœºï¼Œé€šè¿‡åŒ—å‘APIæ¥å—å…¶ä»–ç½‘ç»œæ§åˆ¶å™¨çš„ç­–ç•¥é…ç½®ã€‚\n\n3.6.1 SDNæ§åˆ¶å™¨SDNæ§åˆ¶å™¨å¯ä»¥åˆ†æˆä¸‰ä¸ªå±‚æ¬¡\n\nå…¶é€šä¿¡å±‚é€šè¿‡OpenFlowåè®®ä¸äº¤æ¢æœºé€šä¿¡\nä¸­é—´é—´æ¥æ ¹æ®å„ç§ç­–ç•¥ç®¡ç†å„ä¸ªäº¤æ¢æœº\nåŒ—å‘APIæ¥æ”¶æ¥è‡ªå…¶ä»–æ§åˆ¶ç­–ç•¥å‘èµ·ç«¯çš„é…ç½®\n\n\nè¿™é‡Œä½¿ç”¨çš„RESTful API æ˜¯åŸºäºHTTPçš„APIï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è¾ƒå¸¸è§çš„APIæ¥å£ï¼›\n3.6.2 å¼€æºSDNæ§åˆ¶å™¨å¸¸ç”¨çš„å¼€æºSDNæ§åˆ¶å™¨æœ‰OPEN DAYLIGHTå’ŒONOSï¼›\n3.6.3 SDNçš„ä¼˜åŠ¿\nåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/as12138/article/details/131273381\n\nSDNç›¸æ¯”äºä¼ ç»Ÿç½‘ç»œæ¶æ„ï¼Œæœ‰è®¸å¤šä¼˜ç‚¹å’Œä¼˜åŠ¿ã€‚\n\né«˜åº¦å¯ç¼–ç¨‹æ€§ï¼šSDNæ¶æ„ä¸­çš„æ§åˆ¶å™¨è´Ÿè´£ç®¡ç†äº¤æ¢æœºå’Œè·¯ç”±å™¨ï¼Œä½¿å¾—ç½‘ç»œæ›´åŠ å¯ç¼–ç¨‹ã€å¯é…ç½®ã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡æ§åˆ¶å™¨å®ç°çµæ´»è°ƒæ•´ç½‘ç»œæ‹“æ‰‘ã€ç®¡ç†æµé‡å’Œé…ç½®æµè°ƒåº¦ç­–ç•¥ï¼Œæå‡ç½‘ç»œçš„å¯æ¼”å˜æ€§ã€å¯å®šåˆ¶åŒ–å’Œå¯ä¼¸ç¼©æ€§ã€‚\n\nç½‘ç»œæ™ºèƒ½é›†ä¸­åŒ–ï¼šåœ¨SDNä¸­ï¼Œç½‘ç»œæ™ºèƒ½è¢«é›†ä¸­åœ¨æ§åˆ¶å™¨ä¸­ï¼Œé€šè¿‡æ§åˆ¶å™¨è¿›è¡Œé›†ä¸­å¼ç®¡ç†å’Œæ§åˆ¶ã€‚è¿™ç§åˆ†ç¦»çš„æ¨¡å¼é¿å…äº†ç½‘ç»œè®¾å¤‡ä¸­ä»»åŠ¡çš„å¤æ‚ï¼Œæå‡äº†ç½‘ç»œçš„å¯ç®¡ç†æ€§å’Œå¯æ§åˆ¶æ€§ã€‚æ­¤å¤–ï¼Œé›†ä¸­åŒ–çš„ç®¡ç†æ–¹å¼ä¹Ÿå¯ä»¥åœ¨ç½‘ç»œä¸­é—´ä»¶å’Œåº”ç”¨ä¸­å®ç°æ™ºèƒ½æ§åˆ¶ï¼Œå¦‚åˆ†å¸ƒå¼å­˜å‚¨ã€äº‘è®¡ç®—ç­‰ã€‚\n\nå¯æ‰©å±•æ€§ï¼šSDNä¸­çš„ç½‘ç»œè®¾å¤‡æ˜¯é€šç”¨çš„ç¡¬ä»¶è®¾å¤‡ï¼Œä¸éœ€è¦ç‰¹å®šçš„åŠŸèƒ½åŒºåˆ†ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦æ›´æ–°ç¡¬ä»¶ï¼Œåªéœ€æ›´æ–°æ§åˆ¶å™¨å³å¯å®ç°æ‹“æ‰‘å¯ä¼¸ç¼©å’Œçµæ´»çš„ç½‘ç»œç®¡ç†ã€‚\n\nè‡ªåŠ¨åŒ–å’Œæé«˜æ•ˆç‡ï¼šSDNä¸­å¯ä»¥å®ç°ç½‘ç»œçš„è‡ªåŠ¨åŒ–ï¼Œé€šè¿‡æ§åˆ¶å™¨è¿›è¡Œè‡ªåŠ¨åŒ–çš„ç½‘ç»œç®¡ç†ï¼Œå¯ä»¥é¿å…æ‰‹åŠ¨ç®¡ç†ç½‘ç»œçš„å±€é™æ€§å’Œä¸ç¡®å®šæ€§ï¼Œä»è€Œæé«˜ç½‘ç»œçš„æ•ˆç‡å’Œç¨³å®šæ€§ï¼ŒåŒæ—¶ï¼Œè‡ªåŠ¨åŒ–ç½‘ç»œç®¡ç†ä¹Ÿå¯ä»¥é™ä½ç½‘ç»œç»´æŠ¤çš„æˆæœ¬å’Œæ—¶é—´ã€‚\n\nå®‰å…¨å¯é æ€§æå‡ï¼šç½‘ç»œå®‰å…¨å’Œå¯é æ€§æ˜¯ä¼ä¸šç½‘ç»œä¸­æœ€åŸºæœ¬çš„éœ€æ±‚ã€‚ä¼ ç»Ÿçš„ç½‘ç»œå®‰å…¨å¾€å¾€éœ€è¦é€šè¿‡ä¸€äº›ç‰¹å®šè®¾å¤‡å’Œåè®®æ¥å®ç°ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒSDNä¸­çš„æ§åˆ¶å™¨å¯ä»¥æ ¹æ®ç½‘ç»œå®æ—¶çŠ¶æ€è‡ªåŠ¨ä¼˜åŒ–ç®¡ç†ç­–ç•¥ï¼Œå®‰å…¨å¯é çš„æ–¹å¼æ¥æé«˜ç½‘ç»œçš„å®‰å…¨æ€§ã€‚\n\n\næ€»ä¹‹ï¼ŒSDNçš„ä¼˜åŠ¿åœ¨äºå…¶çµæ´»çš„å¯ç¼–ç¨‹æ€§ã€é›†ä¸­å¼æ™ºèƒ½ç®¡ç†ã€é«˜æ•ˆçš„è‡ªåŠ¨åŒ–ç½‘ç»œç®¡ç†å’Œå¢å¼ºç½‘ç»œå®‰å…¨æ€§ã€‚ä»¥ä¸Šä¼˜åŠ¿ä¹Ÿæ˜¯SDNæŠ€æœ¯åº”ç”¨å¹¿æ³›çš„ä¸»è¦åŸå› ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå’Œç»„ç»‡å°†SDNæŠ€æœ¯åº”ç”¨åˆ°è‡ªå·±çš„ç½‘ç»œæ¶æ„ä¸­ï¼Œä»¥æ»¡è¶³æœªæ¥ç½‘ç»œçš„éœ€æ±‚å’ŒæŒ‘æˆ˜ã€‚\n3.6.4 SDNåº”ç”¨å‰æ™¯SDNæŠ€æœ¯ç›®å‰å·²ç»å®ç°äº†åŸºç¡€ç½‘ç»œé…ç½®ã€æµæ§åˆ¶ã€ç½‘ç»œå®‰å…¨ç­‰åŠŸèƒ½ã€‚åœ¨æœªæ¥ï¼ŒSDNæŠ€æœ¯è¿˜ä¼šé¢ä¸´æ›´å¤šçš„æŒ‘æˆ˜å’Œæœºé‡ã€‚\n\n5Gæ—¶ä»£ï¼š5GæŠ€æœ¯å°†ä¼šæ”¹å˜ç½‘ç»œçš„é¢è²Œï¼ŒåŠ é€Ÿç‰©è”ç½‘åº”ç”¨çš„æ™®åŠã€‚SDNä½œä¸ºæ¶æ„çµæ´»ã€å¯ç¼–ç¨‹çš„ç½‘ç»œæ–¹å¼ï¼Œå°†ä¼šåœ¨5Gç½‘ç»œä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œå®ç°ç½‘ç»œçš„è‡ªåŠ¨åŒ–å’Œæ™ºèƒ½åŒ–ç®¡ç†ã€‚\n\nIoTè®¾å¤‡ï¼šç‰©è”ç½‘æŠ€æœ¯å¸¦æ¥å¤§é‡è®¾å¤‡çš„è¿æ¥ï¼ŒSDNæŠ€æœ¯çš„ä»·å€¼åœ¨äºè‡ªåŠ¨åŒ–äº†ç‰©è”ç½‘è®¾å¤‡çš„ç®¡ç†ã€å®‰å…¨å’Œç›‘æ§ã€‚æœªæ¥ï¼ŒSDNæŠ€æœ¯å°†ä¼šæˆä¸ºç‰©è”ç½‘ç®¡ç†çš„é‡è¦å·¥å…·ã€‚\n\nAIï¼šéšç€äººå·¥æ™ºèƒ½çš„å‘å±•ï¼ŒSDNçš„ä¸šç•Œåº”ç”¨å·²ç»å¼€å§‹å¤§è§„æ¨¡è½åœ°ã€‚è¿™å°†åŠ é€Ÿæ™ºèƒ½äº¤é€šã€æ™ºèƒ½åŸå¸‚å’Œè‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸçš„å‘å±•ã€‚\n\né›†æˆæ–°æŠ€æœ¯ï¼šSDNå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸å…¶ä»–æŠ€æœ¯ç›¸ç»“åˆï¼Œä¾‹å¦‚NFVï¼ˆç½‘ç»œåŠŸèƒ½è™šæ‹ŸåŒ–ï¼‰å’ŒAIï¼ˆäººå·¥æ™ºèƒ½ï¼‰ï¼Œä»¥æé«˜ç½‘ç»œçš„æ•ˆç‡å’Œé€‚åº”æ€§ã€‚\n\näº‘è®¡ç®—ï¼šSDNæŠ€æœ¯çš„çµæ´»æ€§å’Œå¯ç¼–ç¨‹æ€§ï¼Œä¹Ÿä½¿å¾—SDNä¸äº‘è®¡ç®—ç­‰æ–°æŠ€æœ¯çš„ç»“åˆå˜å¾—æ›´åŠ è‡ªç„¶ã€‚åœ¨æœªæ¥ï¼ŒSDNæŠ€æœ¯å°†ä¸äº‘æŠ€æœ¯ç´§å¯†ç»“åˆï¼Œå®ç°ä¸šåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–ã€å¿«é€Ÿåº”ç”¨éƒ¨ç½²å’Œå¼¹æ€§äº‘èµ„æºç®¡ç†ã€‚\n\n\næ€»è€Œè¨€ä¹‹ï¼ŒSDNæŠ€æœ¯å°†ä¸ºæœªæ¥ç½‘ç»œçš„å‘å±•å’Œå®ç°å„ç§åº”ç”¨æä¾›æ”¯æ’‘ã€‚åœ¨æ—¥ç›Šå¢é•¿çš„ç½‘ç»œéœ€æ±‚å’Œå¤æ‚çš„ç½‘ç»œæŠ€æœ¯èƒŒæ™¯ä¸‹ï¼ŒSDNçš„çµæ´»æ€§å’Œé«˜å¯ç”¨æ€§å°†ä¼šå¸¦æ¥æ›´å¤§çš„å‘å±•ç©ºé—´å’Œå¸‚åœºéœ€æ±‚ã€‚SDNæŠ€æœ¯åº”å½“ç»§ç»­ç ”ç©¶å’Œå‘å±•ï¼Œä»¥æ»¡è¶³æ›´å¤šçš„ç½‘ç»œéœ€æ±‚å’ŒæŒ‘æˆ˜ã€‚\n3.7 æ€»ç»“\n","categories":["ç¼–ç¨‹å­¦ä¹ ","è®¡ç®—æœºç½‘ç»œ"],"tags":["nginx","P2P","CDN","SDN"]},{"title":"ã€deepinã€‘deepinå®‰è£…æ–°å­—ä½“","url":"/posts/1504301137/","content":"æ„Ÿè§‰deepiné»˜è®¤çš„å­—ä½“å¹¶ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œè™½ç„¶ä¹Ÿæ˜¯ç­‰å®½å­—ä½“ï¼Œä½†æ˜¯å¤ªç»†äº†ã€‚ä¸æ˜¯æˆ‘å–œæ¬¢çš„ç±»å‹ã€‚äºæ˜¯æ‰“ç®—ç»™deepinæ•´ä¸€ä¸ªä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„JetBrainsMonoå­—ä½“\n\n\nä¸‹è½½å­—ä½“å­—ä½“è‡ªç„¶æ˜¯å»å®˜ç½‘ä¸‹è½½ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œä¸¢ä¸ªé“¾æ¥\nhttps://blog.jetbrains.com/zh-hans/2020/03/08/jetbrains-mono/https://github.com/JetBrains/JetBrainsMono\n\nå®‰è£…å­—ä½“ä½†æ˜¯è®©æˆ‘æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œå…‰æ˜¯ä¸€ä¸ªå®‰è£…å­—ä½“çš„æ•™ç¨‹ï¼Œå°±èƒ½å‡ºè¿™ä¹ˆå¤šçƒ‚æ–‡ã€‚ä»€ä¹ˆå•Šä¸ªæ€§åŒ–é‡Œé¢å¯ä»¥é€‰æ‹©å­—ä½“ï¼Œè®¾ç½®é‡Œé¢å¯ä»¥é€‰æ‹©å­—ä½“ä¹‹ç±»çš„æ— å…³äº‹é¡¹ï¼ˆéƒ½ç”¨å¸¦GUIçš„linuxäº†è‚¯å®šä¼šå»çœ‹çœ‹ä¸ªæ€§åŒ–è®¾ç½®å•Šâ€¦â€¦è¿˜éœ€è¦ä½ æ•™ï¼Ÿï¼‰\næ‰¾äº†ä¸€å°ä¼šï¼Œæ€»ç®—æ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªæ­£å¸¸çš„æ–‡ç« ã€‚\ndeepiné‡Œé¢è‡ªå¸¦äº†ä¸€ä¸ªå­—ä½“ç®¡ç†å™¨ï¼Œåœ¨å¼€å§‹èœå•é‡Œé¢æœç´¢å­—ä½“å°±èƒ½å‡ºæ¥\n\nå…ˆæŠŠä¸‹è½½çš„å‹ç¼©åŒ…é‡Œé¢çš„fontsè§£å‹åˆ°æ¡Œé¢\n\nè¿›å…¥å­—ä½“ç®¡ç†å™¨ï¼Œç‚¹å‡»åŠ å·ï¼Œé€‰ä¸­fontsé‡Œé¢tffæ–‡ä»¶å¤¹å†…çš„å­—ä½“æ–‡ä»¶ï¼Œå°±å¯ä»¥å®‰è£…äº†ï¼\n\n\nç‚¹å‡»æ‰“å¼€ï¼Œå³å®‰è£…å®Œæ¯•ï¼\nåç»­å…¶ä»–è½¯ä»¶çš„å­—ä½“é…ç½®å°±ä¸å†™å•¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","deepin","è™šæ‹Ÿæœº"]},{"title":"ã€è™šæ‹Ÿæœºã€‘WIN11çš„WSLå®‰è£…CentOS8Streamè™šæ‹Ÿæœº","url":"/posts/4065446782/","content":"æœ¬äººæ‰€ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯ win11 22H2 å®¶åº­ç‰ˆï¼Œå¦‚æœä½ ä¸æ˜¯éCentOSä¸å¯ï¼Œå¼ºçƒˆå»ºè®®ç›´æ¥å»å¾®è½¯åº”ç”¨å•†åº—é‡Œé¢ä¸‹è½½Ubuntuï¼Œå…¨è‡ªåŠ¨å®‰è£…åˆ°WSLï¼Œå•¥éƒ½ä¸ç”¨ç®¡ã€‚(å°±æ˜¯å¥½åƒæ²¡åŠæ³•é€‰æ‹©å®‰è£…è·¯å¾„)\n1.å¯ç”¨WSLåˆšå¼€å§‹å®‰è£…WSLçš„æ—¶å€™ï¼Œå‚è€ƒçš„æ˜¯åŸºäºWindwos11çš„WSLå®‰è£…CentOSã€‚è¯´å®è¯ï¼Œæˆ‘ä¸ªäººå¹¶ä¸å–œæ¬¢è¿™ç¯‡åšå®¢ã€‚å› ä¸ºé‡Œé¢é—æ¼äº†å¾ˆå¤šä¸œè¥¿ï¼Œå¹¶ä¸”åœ¨ä¸æ°å½“çš„ä½ç½®è´´å‡ºäº†å‘½ä»¤ï¼Œå¯¼è‡´è¯»è€…ä¼šè¯¯ä»¥ä¸ºæ˜¯éœ€è¦æ‰§è¡Œè¿™äº›å‘½ä»¤ã€‚\næ¯”å¦‚æˆ‘å°±ç†è§£é”™è¯¯ï¼Œå…ˆæ‰§è¡Œäº†è®¾ç½®wslé»˜è®¤ç‰ˆæœ¬ä¸º2çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å…ˆä¸è¦æ‰§è¡Œï¼åæ–‡ä¼šå‘Šè¯‰ä½ ä¸ºä»€ä¹ˆã€‚\nè¿™ç¯‡åšå®¢ä¸­å¯¹å¼€å¯wslçš„è®¾ç½®çš„ä½ç½®æè¿°ä¹Ÿä¸å®Œå…¨ï¼Œçœ‹ä¸Šå»åƒä»ç½‘ä¸Šå“ªé‡ŒæŠ„è¿‡æ¥çš„win10çš„è®¾ç½®é€»è¾‘ï¼ˆwin11çš„ä½ç½®å®Œå…¨ä¸ä¸€æ ·ï¼‰\nè¯¥åšå®¢åŸæ–‡ï¼šåœ¨windowsè®¾ç½®ä¸­æ‰“å¼€ã€å¯ç”¨æˆ–å…³é—­WindwosåŠŸèƒ½ã€‘ï¼Œå‹¾é€‰ã€é€‚ç”¨äºLinuxçš„Windwoså­ç³»ç»Ÿã€‘ï¼Œç‚¹å‡»ç¡®å®šåä¼šç³»ç»Ÿä¼šæç¤ºé‡å¯ï¼Œé€‰æ‹©ç¡®è®¤å³å¯\n\nå®é™…ä¸Šåœ¨win11ä¸­ï¼Œéœ€è¦å¤šç‚¹å¥½å‡ ä¸ªåœ°æ–¹æ‰èƒ½æ‰¾åˆ°è¿™ä¸ªè®¾ç½®çš„ä½ç½®\nå³é”®æ¡Œé¢ - ä¸ªæ€§åŒ– - è¿›å…¥win11è®¾ç½®ç•Œé¢ - åº”ç”¨ - å¯é€‰åŠŸèƒ½ - (å¾€ä¸‹æ»‘)æ›´å¤šwindowsåŠŸèƒ½\n\n\n\nè¿™éƒ½æ˜¯æˆ‘å¯¹ä¸€ä¸ªä¸å®Œå–„åšå®¢çš„åæ§½ï¼Œä½†å¹¶æ²¡æœ‰è´¬ä½è¿™ä¸ªæ•™ç¨‹çš„æ„æ€å•Šï¼è‡³å°‘ä»–å‘Šè¯‰æˆ‘åŸºæœ¬æ­¥éª¤åº”è¯¥åšå“ªäº›ã€‚\nä¸ºä»€ä¹ˆæˆ‘è¦åæ§½å‘¢ï¼Ÿå› ä¸ºè¿™ç§å†™çš„ä¸å…¨çš„åšå®¢ç»å¸¸ä¼šè®©è¯»è€…å¾—å»é‡æ–°æœç´¢æŸäº›è®¾ç½®çš„ä½ç½®ï¼Œè€Œä½œè€…æ˜æ˜æ˜¯å·²ç»èµ°è¿‡è¿™ä¸ªæµç¨‹çš„ã€‚åšå®¢é‡Œé¢ä½œè€…çš„æˆªå›¾æ˜æ˜¾æ˜¯windows11ï¼Œä½†ä»–æä¾›çš„è®¾ç½®å´æ˜¯win10ä¸­çš„æ—§ä½ç½®ã€‚å¤šèŠ±30ç§’å†™æ¸…æ¥šä½ç½®å¹¶å¸¦ä¸Šæˆªå›¾ï¼Œä¸çŸ¥é“èƒ½èŠ‚çœè¯»è€…å¤šå°‘æ—¶é—´â€¦â€¦å¦‚æœä½ ä½“ä¼šè¿‡æŸ¥èµ„æ–™çš„æ—¶å€™é˜…è¯»è¿™äº›ã€Œæ–­å¤´çŸ­å°¾ã€çš„åšå®¢ï¼Œåº”è¯¥ä¹Ÿèƒ½ä½“ä¼šåˆ°æˆ‘çš„å¿ƒæƒ…ã€‚\n\nå›åˆ°æ­£é¢˜ã€‚åœ¨æ›´å¤š windows åŠŸèƒ½é€‰é¡¹æ¡†ä¸­ï¼ˆwin10&#x2F;11çš„è¿™ä¸ªé€‰é¡¹æ¡†åŸºæœ¬ç›¸åŒï¼‰ï¼Œå‹¾é€‰ä¸Šä¸‹é¢çš„å‡ ä¸ªé€‰é¡¹ï¼Œä¸‰ä¸ªéƒ½è¦å‹¾é€‰ä¸Šï¼\n\né€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ\nè™šæ‹Ÿæœºå¹³å°\nwindows è™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¹³å°\n\nç‚¹å‡»ç¡®å®šï¼Œå°±æˆåŠŸå¯ç”¨äº† WSLã€‚ç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªè¿›åº¦æ¡ï¼Œä¸‹è½½ä¸€äº›ä¸œè¥¿ã€‚\n\nå¤„ç†å®Œæ¯•åï¼ŒWIN+Rè¾“å…¥cmdï¼Œæ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­è¾“å…¥wsl -l -vå‘½ä»¤ï¼Œæœ‰ç›¸å…³è¾“å‡ºå°±æ˜¯å¯ç”¨æˆåŠŸäº†ï¼\nåˆå§‹åŒ–æƒ…å†µä¸‹ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œåº”è¯¥ä¼šæç¤ºä½ å½“å‰ä»€ä¹ˆè™šæ‹Ÿæœºéƒ½æ²¡æœ‰å®‰è£…ã€‚\n2.å®‰è£…Centos82.1 ä¸‹è½½ç³»ç»Ÿzipå» github&#x2F;wsldl-pg&#x2F;CentWSL ä¸Šä¸‹è½½é€‚ç”¨äºwslçš„CentOS8ç³»ç»Ÿçš„zip\n\nè¿™ä¸ªä¹Ÿå¯ä»¥ï¼šhttps://github.com/mishamosher/CentOS-WSL\n\n\næŠŠzipè§£å‹åˆ°ä½ æƒ³å®‰è£…è™šæ‹Ÿæœºçš„ä½ç½®ï¼ˆä¸€å®šè¦æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼‰ï¼Œç„¶åå³é”®CentOS8.exeï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚\n\n2.2 æŠ¥é”™HRESULT:0x80370102è§£å†³å®‰è£…CentOS8çš„æ—¶å€™ï¼Œå°±é‡åˆ°äº†è¿™ä¸ªissueä¸­çš„é—®é¢˜ğŸ‘‡\ngithub.com&#x2F;wsldl-pg&#x2F;CentWSL&#x2F;issues&#x2F;36\nç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCentOS8.exeä¹‹åï¼Œå¼¹å‡ºçš„ç»ˆç«¯ä¼šè¾“å‡ºå¦‚ä¸‹å†…å®¹\nERROR:Installation Failed!HRESULT:0x80370102\n\næ ¹æ®è¯¥issue ä¸­æœ€åä¸€ä¸ªå›å¤çš„è§£å†³åŠæ³•ï¼Œæˆ‘å…ˆå°†wslç‰ˆæœ¬è®¾ç½®å›äº†1ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‰æ–‡è¯´ä¸è¦å…ˆè®¾ç½®ä¸ºé»˜è®¤wsl2ï¼‰\n\nwsl --set-default-version 1\n\nä¿®æ”¹ç‰ˆæœ¬ä¸º1åï¼Œé‡å¤å¦‚ä¸Šå®‰è£…æ­¥éª¤ï¼ˆä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCentOS8.exeï¼‰ï¼Œå°±æˆåŠŸå®‰è£…äº†CentOSçš„è™šæ‹Ÿæœºã€‚æ­¤æ—¶åœ¨win11çš„æ–‡ä»¶ç®¡ç†å™¨å·¦ä¾§ä¼šå¤šå‡ºæ¥ä¸€ä¸ªLinuxå›¾æ ‡ï¼Œé‡Œé¢æœ‰CentOS8çš„ç³»ç»Ÿé‡Œé¢çš„æ–‡ä»¶ã€‚\n\nåœ¨windowsçš„powershellæˆ–è€…cmdä¸­ï¼Œè¾“å…¥wslï¼Œå°±å¯ä»¥è¿›å…¥CentOS8çš„bashï¼›è§ä¸‹å›¾ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸå®‰è£…å¥½äº†ä¸€ä¸ªCentOS8çš„è™šæ‹Ÿæœºã€‚å†…éƒ¨çš„æ–‡ä»¶å°±æ˜¯CentOS8ç³»ç»Ÿçš„é»˜è®¤æ–‡ä»¶ã€‚\nåœ¨å†…éƒ¨æ‰§è¡Œexitå‘½ä»¤ï¼Œå°±å¯ä»¥é€€å‡ºwslè™šæ‹Ÿæœºï¼Œå›åˆ°windowsçš„ç»ˆç«¯ä¸‹ã€‚\n\nè€Œä¸”WSLæœ‰ä¸ªæœ€å¤§çš„å¥½å¤„ï¼Œå°±æ˜¯å®ƒèƒ½è‡ªåŠ¨æŒ‚è½½windowsä¸‹çš„æ–‡ä»¶åˆ°/mntç›®å½•ä¸‹ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢å¯ä»¥çœ‹åˆ°æˆ‘çš„win11å®¿ä¸»æœºçš„3ä¸ªç¡¬ç›˜åˆ†åŒºï¼›windowsçš„æ–‡ä»¶èµ„æºç®¡ç†å™¨é‡Œé¢ä¹Ÿå¯ä»¥çœ‹åˆ°Linuxä¸­çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨windowså’Œlinuxä¸‹äº’ä¼ æ–‡ä»¶ï¼ˆå°±ä¸éœ€è¦ç”¨sftpå·¥å…·äº†ï¼‰\nç‰¹åˆ«æ˜¯å¦‚æœä½ éœ€è¦å†™å¸¦Doxygenæ–‡æ¡£çš„é¡¹ç›®ï¼Œåœ¨ç”ŸæˆDoxygençš„htmlåï¼Œå°±èƒ½ç›´æ¥ä»è¿™é‡Œåœ¨windowsçš„æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘é¡µï¼Œè€Œä¸éœ€è¦ç”¨sftpæˆ–è€…å…¶ä»–å·¥å…·ä¼ åˆ°windowsä¸‹å†æ‰“å¼€äº†ï¼\n\nå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å¸¦GUIçš„Linuxç³»ç»Ÿæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n2.3 æ›´æ–°ä¸ºWSL2ä½¿ç”¨wsl -l -vå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰è¿è¡Œçš„wslè™šæ‹Ÿæœºï¼Œç‰ˆæœ¬æ˜¯1\nPS C:\\Users\\S2522\\Desktop&gt; wsl -l -v  NAME       STATE           VERSION* CentOS8    Running         1\n\næˆ‘ä»¬å¯ä»¥å°†å…¶å‡çº§ä¸ºWSL2ç‰ˆæœ¬ï¼Œä½†æ˜¯è¿™é‡Œä¼šå‘Šè¯‰ä½ éœ€è¦æ›´æ–°å†…æ ¸ç»„ä»¶\nPS C:\\Users\\S2522\\Desktop&gt; wsl --set-version CentOS8 2æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´...æœ‰å…³ä¸ WSL 2 çš„ä¸»è¦åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2WSL 2 éœ€è¦æ›´æ–°å…¶å†…æ ¸ç»„ä»¶ã€‚æœ‰å…³ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2kernel\n\né‚£å°±æ›´æ–°å‘—ï¼å¾®è½¯å®˜æ–¹æ–‡æ¡£ ä¸­ä¼šå‘Šè¯‰ä½ éœ€è¦ wsl.exe --install æˆ– wsl.exe --updateå‘½ä»¤ã€‚\nè¿™é‡Œæˆ‘æ‰§è¡Œäº†wsl --updateå‘½ä»¤ï¼Œæ‰§è¡Œåä¼šå¼¹çª—è¦ä½ æä¾›ç®¡ç†æƒé™ï¼Œå¹¶å‡ºç°ä¸€ä¸ªè¿›åº¦æ¡ï¼Œç­‰ä»–è·‘å®Œå°±è¡Œã€‚\nPS C:\\Users\\S2522\\Desktop&gt; wsl --updateæ­£åœ¨å®‰è£…: é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿå·²å®‰è£… é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿã€‚\n\næ›´æ–°å¥½äº†ï¼Œå†é‡æ–°æ‰§è¡Œwsl --set-version CentOS8 2å‡çº§å‘½ä»¤ï¼Œä¼šæç¤ºä½ æ­£åœ¨æ‰§è¡Œè½¬æ¢ï¼Œéœ€è¦ç­‰å¾…ä¸€ä¼šã€‚\n\næœ€ç»ˆæˆåŠŸè½¬æ¢äº†ï¼Œä½¿ç”¨å‘½ä»¤wsl -l -vé‡Œé¢æ˜¾ç¤ºçš„ç‰ˆæœ¬ä¹Ÿæ˜¯2äº†ã€‚\nPS C:\\Users\\S2522\\Desktop&gt; wsl --set-version CentOS8 2æœ‰å…³ä¸ WSL 2 å…³é”®åŒºåˆ«çš„ä¿¡æ¯ï¼Œè¯·è®¿é—® https://aka.ms/wsl2æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚æ“ä½œæˆåŠŸå®Œæˆã€‚PS C:\\Users\\S2522\\Desktop&gt; wsl -l -v  NAME       STATE           VERSION* CentOS8    Stopped         2\n\næå®šï¼ç°åœ¨æˆ‘ä»¬å°±æœ‰ä¸€ä¸ªæ–¹ä¾¿çš„CentOS8çš„WSLç¯å¢ƒå•¦ï¼\nå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå°†å½“å‰çš„CentOS8è®¾ç½®ä¸ºé»˜è®¤çš„wslè™šæ‹Ÿæœºã€‚è¿™æ ·åœ¨windowså‘½ä»¤è¡Œä¸­æ‰§è¡Œwslæˆ–è€…bashå‘½ä»¤ï¼Œå°±èƒ½ç›´æ¥è¿›å…¥CentOS8ä¸­ã€‚\nwslconfig /setdefault CentOS8\n\né‡å¯ç”µè„‘åï¼Œåœ¨powershellçš„ä¸‹æ‹‰æ ä¸­ä¼šè‡ªåŠ¨å‡ºç°CentOS8çš„é€‰é¡¹ï¼Œç‚¹å‡»å®ƒä¹Ÿèƒ½è¿›å…¥wslè™šæ‹Ÿæœºç¯å¢ƒä¸­ã€‚\n\n3.è§£å†³yumæŠ¥é”™é—®é¢˜å› ä¸ºè¿™ä¸ªCentOSçš„é•œåƒæ˜¯æœ€å°å®‰è£…ç‰ˆæœ¬ï¼ˆç±»ä¼¼äºDockerå®‰è£…çš„CentOSï¼‰ï¼Œæ‰€ä»¥å†…éƒ¨çš„yumæºéƒ½æ˜¯åæ‰çš„ã€‚æ‰§è¡Œyum updateä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™ã€‚\n[root@7945R9P ~]# yum -y updateFailed to set locale, defaulting to C.UTF-8CentOS-8 - AppStream                                                                     68  B/s |  38  B     00:00Failed to download metadata for repo &#x27;AppStream&#x27;Error: Failed to download metadata for repo &#x27;AppStream&#x27;\n\nè¿™æ—¶å€™éœ€è¦è¿›è¡Œyumæºçš„é‡æ–°è®¾ç½®ï¼Œå‚è€ƒæœ¬ç«™åšå®¢è§£å†³è¿™ä¸ªé—®é¢˜å°±è¡Œ\n ã€Dockerã€‘é…ç½®CentOSå®¹å™¨æ—¶å‡ºç° Error Failed to download metadata for repo â€˜appstreamâ€™ Cannot prepare internal mirrorlist | è½¬è½½\næå®šyumä¹‹åï¼Œå°±å¯ä»¥æ­£å¸¸å®‰è£…ä½ æƒ³è¦çš„å¼€å‘è½¯ä»¶äº†ã€‚è¿™ä¸ªç³»ç»Ÿå¾ˆè½»é‡ï¼Œsudoå’Œpasswdç­‰å¾ˆå¤šå®Œæ•´ç³»ç»Ÿä¼šè‡ªå¸¦çš„å‘½ä»¤éƒ½æ²¡æœ‰ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ä¸€äº›ã€‚\nå¦å¤–ï¼Œæˆ‘å†™è¿‡ä¸€ä¸ªCentOS8çš„åˆå§‹åŒ–è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œè¿™é‡Œå®‰è£…çš„è½¯ä»¶å¹¶ä¸ä¸€å®šæ˜¯ä½ æƒ³è¦çš„ï¼Œè¯·é…Œæƒ…å‚è€ƒï¼šhttps://gitee.com/musnows/centos8-init\nrpm 30969é”™è¯¯ä½†æˆ‘åœ¨é‡è¯•çš„æ—¶å€™ï¼Œyumå®‰è£…è½¯ä»¶è¿˜é‡åˆ°äº†è¿™ä¸ªé—®é¢˜\nRPM: error: db5 error(-30969) from dbenv-&gt;open: BDB0091 DB_VERSION_MISMATCH: Database environment version mismatchRPM: error: cannot open Packages index using db5 -  (-30969)RPM: error: cannot open Packages database in /var/lib/rpmThe downloaded packages were saved in cache until the next successful transaction.You can remove cached packages by executing &#x27;yum clean packages&#x27;.Error: Could not run transaction.\n\næ‰¾åˆ°äº†GitHubçš„issueï¼šCannot install software with dnf after dnf update Â· Issue #46 Â· WhitewaterFoundry&#x2F;Fedora-Remix-for-WSL Â· GitHub\nè¯¥issueä¸­çš„è¿™ä¸ªè§£å†³æ–¹æ¡ˆæœ‰æ•ˆï¼Œæ³¨æ„ï¼Œwslçº¯å‡€å®‰è£…çš„centosæ˜¯æ²¡æœ‰sudoå‘½ä»¤çš„ï¼ŒæŠŠå‘½ä»¤é‡Œé¢çš„sudoå»æ‰å°±è¡Œäº†ã€‚ï¼ˆé»˜è®¤æƒ…å†µä¸‹è¿›å…¥çš„æ˜¯rootç”¨æˆ·ï¼Œä¹Ÿä¸éœ€è¦sudoï¼‰\nsudo dnf upgrade --refresh rpm glibcsudo rm /var/lib/rpm/.rpm.locksudo dnf upgrade dnf\n\næ‰§è¡Œåï¼Œå†é‡æ–°æ‰§è¡Œyum install vimï¼Œä¸å†å‡ºç°æŠ¥é”™ã€‚\nyum install -y sudo\n\nä½ å¯ä»¥æ‰§è¡Œä¸Šè¿°å‘½ä»¤å®‰è£…ä¸€ä¸‹sudoï¼›\nè®¾ç½®lså’Œllå‘½ä»¤åˆ«åè€Œä¸”ï¼Œé»˜è®¤æƒ…å†µä¸‹çš„lså‘½ä»¤ä¹Ÿæ²¡æœ‰é¢œè‰²è¾“å‡ºï¼Œéœ€è¦ä¿®æ”¹bashé…ç½®æ¥è®¾ç½®å‘½ä»¤åˆ«åï¼›ä¿®æ”¹~/.bashrcæ–‡ä»¶å³å¯ã€‚\nalias ls=&#x27;ls --color=auto&#x27;alias ll=&#x27;ls -l&#x27;\n\nä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œæ”¹æˆzshæˆ–è€…å…¶ä»–ç»ˆç«¯ã€‚\n4.vscodeè¿æ¥æ™®é€šçš„è™šæ‹Ÿæœºæˆ‘ä»¬éœ€è¦ç”¨vscodeçš„remote sshæ’ä»¶æ¥è¿æ¥ï¼Œä½†æ˜¯WSLä¸»æœºæˆ‘ä»¬ç›´æ¥ç”¨vscçš„WSLæ’ä»¶æ¥è¿æ¥å°±è¡Œäº†ï¼Œä½¿ç”¨çš„æ•ˆæœå’Œremote sshæ’ä»¶æ˜¯ç›¸åŒçš„\n\nåœ¨å·¦ä¾§è¿™ä¸ªè¿œç¨‹è¿æ¥æ§åˆ¶å™¨ä¸­ï¼ˆå’ŒRemote sshæ˜¯åŒä¸€ä¸ªä½ç½®ï¼‰ï¼Œæ‰¾åˆ°ä¸Šæ–¹çš„ä¸‹æ‹‰æ¡ï¼Œæ”¹æˆWSLç›®æ ‡ï¼Œå°±èƒ½çœ‹åˆ°æˆ‘ä»¬çš„CentOS8è™šæ‹Ÿæœºã€‚ç‚¹å‡»è¿æ¥å®ƒå°±å¯ä»¥äº†ã€‚\n\nä½†æ˜¯vscodeé»˜è®¤é“¾æ¥çš„æ˜¯rootç”¨æˆ·ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è‚¯å®šä¸ä¼šåœ¨rootä¸‹å†™ä»£ç çš„ã€‚æ‰€ä»¥éœ€è¦é…ç½®ä¸€ä¸‹å­ç”¨æˆ·\nä¿®æ”¹è™šæ‹Ÿæœºä¸­çš„/etc/wsl.confæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢ä¸¤è¡Œ\n[user]default=ç”¨æˆ·å\n\nç„¶åå›åˆ°windowsçš„å‘½ä»¤è¡Œï¼Œé‡å¯wsl\nwsl --shutdown CentOS8\n\nå†æ¬¡å¯åŠ¨wslï¼Œè¿™æ ·vscå°±èƒ½é»˜è®¤é“¾æ¥ä½ çš„å­ç”¨æˆ·äº†ã€‚\n5.ä¿®æ”¹wslèµ„æºé™åˆ¶é»˜è®¤æƒ…å†µä¸‹ï¼Œwsl2çš„è™šæ‹Ÿæœºèƒ½è®¿é—®åˆ°å®Œæ•´çš„ç³»ç»Ÿèµ„æºï¼ŒåŒ…æ‹¬æ‰€æœ‰CPUæ ¸å¿ƒå’Œå†…å­˜ã€‚\nè¿™å°±ä¼šå¯¼è‡´å¦‚æœLinuxä¸‹å¯¹ä¸€äº›ä¸œè¥¿è¿›è¡Œäº†ç¼“å­˜è€Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼ŒWindowsæ˜¯æ²¡åŠæ³•å›æ”¶è¿™éƒ¨åˆ†å†…å­˜çš„ã€‚æœ€ç»ˆå°±å¯¼è‡´æˆ‘ä»¬Windowså®¿ä¸»æœºæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ç”¨äº†ï¼Œè¿™æ€ä¹ˆè¡Œï¼Ÿ\n\nè¿™ç§æƒ…å†µä¸‹ï¼Œä¸€èˆ¬windowsç³»ç»Ÿä¼šæŠŠwslç›´æ¥ç»™å¹²æ‰ï¼Œé‚£æˆ‘ä»¬è™šæ‹Ÿæœºé‡Œé¢è·‘çš„æ´»ä¹Ÿæ²¡åŠæ³•å®Œæˆäº†ã€‚è¦çŸ¥é“ï¼ŒLinuxå¯æ˜¯å¾ˆå–œæ¬¢cacheå†…å­˜çš„ï¼Œå¾ˆå®¹æ˜“ä¼šæŠŠå®¿ä¸»æœºçš„å†…å­˜ç»™å¹²æ²¡ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®wslçš„è™šæ‹Ÿæœºå†…å­˜&#x2F;CPUé™åˆ¶ã€‚\nåœ¨Linuxä¸‹å¯ä»¥ç”¨è¿™ä¸¤ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹cpuå’Œå†…å­˜çš„é…ç½®ä¿¡æ¯ï¼Œåˆšå¼€å§‹çš„æ—¶å€™åº”è¯¥æ˜¯å’Œä½ çš„å®¿ä¸»æœºçš„CPUå’Œå†…å­˜ä¸€æ ·ã€‚\ncat /proc/cpuinfo | grep processor # æŸ¥çœ‹cpuæ ¸å¿ƒæ•°é‡cat /proc/meminfo | grep Total     # æŸ¥çœ‹å†…å­˜ä¿¡æ¯\n\nåœ¨windowsçš„Cç›˜çš„ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª.wslconfigæ–‡ä»¶ï¼Œå¹¶åœ¨å†…éƒ¨å†™å…¥é™åˆ¶\n\nprocessorsæ˜¯cpuæ ¸æ•°é™åˆ¶\nmemoryå’Œswapéƒ½æ˜¯å†…å­˜é™åˆ¶\n\né¡¶å¤šè®¾ç½®ä¸ºå®¿ä¸»æœºå†…å­˜çš„ä¸€åŠï¼Œé¿å…å®¿ä¸»æœºå¡é¡¿ã€‚\n[wsl2]processors=8memory=8GBswap=8GB\n\nè¿™ä¸ªé…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯ï¼ˆwindowsä¸‹ï¼‰\nC:\\Users\\ä½ çš„ç”¨æˆ·å\\.wslconfig\n\néšååœ¨windowsçš„ç»ˆç«¯ä¸­ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œç»ˆæ­¢è¿™ä¸ªwslè™šæ‹Ÿæœº\nPS C:\\Users\\S2522\\Desktop&gt; wsl --shutdown CentOS8PS C:\\Users\\S2522\\Desktop&gt; wsl -l -v  NAME       STATE           VERSION* CentOS8    Stopped         2\n\nwslå‘½ä»¤ä¸­å¹¶æ²¡æœ‰--starté€‰é¡¹ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨wslå‘½ä»¤ï¼Œå°±ä¼šè‡ªåŠ¨é‡å¯å¹¶è¿›å…¥è¿™ä¸ªè™šæ‹Ÿæœºã€‚\nè¿™æ—¶å€™å†åœ¨è™šæ‹Ÿæœºå†…éƒ¨çœ‹çœ‹CPUå’Œå†…å­˜ä¿¡æ¯ï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ åˆšåˆšé…ç½®çš„æ€§èƒ½é™åˆ¶ç»“æœäº†ã€‚\n[root@7945R9P ~]# cat /proc/cpuinfo | grep processorprocessor       : 0processor       : 1processor       : 2processor       : 3processor       : 4processor       : 5processor       : 6processor       : 7[root@7945R9P ~]# cat /proc/meminfo | grep TotalMemTotal:        8136640 kBSwapTotal:       8388608 kBVmallocTotal:   34359738367 kBHugePages_Total:       0\n\nåˆ é™¤wslä¸»æœºåˆ é™¤è™šæ‹Ÿæœºçš„å‘½ä»¤å¦‚ä¸‹\nwsl --unregister &lt;DistributionName&gt;\n\næ“ä½œåï¼Œæœ¬åœ°centoså®‰è£…ç›®å½•çš„ext4.vhdxè™šæ‹Ÿç£ç›˜æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚\nPS C:\\&gt; wsl --unregister CentOS8æ­£åœ¨æ³¨é”€ã€‚æ“ä½œæˆåŠŸå®Œæˆã€‚\n\næ›´å¤šwslå‘½ä»¤å‚è€ƒå¾®è½¯å®˜ç½‘ https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands\n6.å¯ç”¨systemctlæˆ‘ä»¬çš„ç³»ç»Ÿé‡Œé¢æœ‰systemctlå‘½ä»¤ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ³•ä½¿ç”¨ã€‚ç½‘ä¸Šæœ‰äº›æ•™ç¨‹è¯´ç”¨serviceå‘½ä»¤æ¥æ›¿ä»£ï¼Œä½†CentOSä¸­æ˜¯æ²¡æœ‰serviceå‘½ä»¤çš„ã€‚\n[root@7945R9P bison-3.8]# systemctlSystem has not been booted with systemd as init system (PID 1). Can&#x27;t operate.Failed to connect to bus: Host is down\n\n6.1 distrod ç¬¬ä¸‰æ–¹å·¥å…·æˆ‘ä»¬éœ€è¦ç”¨distrodæ¥å®‰è£…systemctlçš„ç»„ä»¶ï¼Œæ‰èƒ½æˆåŠŸå¯ç”¨å®ƒã€‚å…·ä½“æ•™ç¨‹å‚è€ƒgithubä»“åº“çš„READMEä¸­çš„ä»‹ç»ã€‚ä¸æ˜¯å¾ˆéš¾\n\nhttps://github.com/nullpo-head/wsl-distrod\n\nå…ˆä¸‹è½½ä¸€ä¸ªè‡ªåŠ¨å®‰è£…çš„è„šæœ¬ï¼ˆè¿ä¸ä¸Šgithubä¼šæŠ¥sslæˆ–è€…timeouté”™è¯¯ï¼Œè¯·ä½¿ç”¨å…¶ä»–åŠæ³•ä¸‹è½½è¿™ä¸ªè„šæœ¬å†ä¸¢åˆ°è™šæ‹Ÿæœºé‡Œé¢å»å°±è¡Œï¼‰\ncurl -L -O &quot;https://raw.githubusercontent.com/nullpo-head/wsl-distrod/main/install.sh&quot;chmod +x install.shsudo ./install.sh install\n\nç„¶åç”¨ä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ä¹‹ä¸€æ¥å¯åŠ¨ï¼ˆç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ä¼šåœ¨windowså¼€æœºè‡ªåŠ¨å¯åŠ¨çš„ï¼‰\n/opt/distrod/bin/distrod enable --start-on-windows-boot/opt/distrod/bin/distrod enable\n\næ›´å¤šå†…å®¹ç›¸è§è¯¥ä»“åº“READMEï¼›\nè¯·æ³¨æ„ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªè‡ªå¯åŠ¨å‘½ä»¤çš„æ—¶å€™éœ€è¦windowsçš„ç®¡ç†å‘˜æƒé™ï¼Œæ­¤æ—¶éœ€è¦è¾“å…¥çš„æ˜¯ç³»ç»Ÿç™»å½•çš„å¾®è½¯è´¦æˆ·çš„å¯†ç ï¼ˆä¸æ˜¯ä½ çš„PINï¼‰ï¼Œçœ‹ä¸‹é¢ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è¾“å…¥å¯†ç è¾“å…¥çš„å°±æ˜¯PINï¼Œæ˜¾ç¤ºé”™è¯¯ï¼Œç¬¬äºŒæ¬¡è¾“å…¥äº†å¾®è½¯è´¦æˆ·çš„å¯†ç æ‰æˆåŠŸã€‚\n[root@7945R9P pkg]# /opt/distrod/bin/distrod enable --start-on-windows-boot[Distrod] Distrod has been enabled. Now your shell will start under systemd.[Distrod] Enabling atuomatic startup of Distrod. UAC dialog will appear because schedulinga task requires the admin privilege. Please hit enter to proceed.ErrorIt seems the task has not been scheduled successfully. You may have typed a wrong password, or you may not have thenecessary administrative privileges. Do you want to retry?[Y] Yes  [N] No  [?] å¸®åŠ© (é»˜è®¤å€¼ä¸ºâ€œYâ€): yEnabling autostart has succeeded.[Distrod] Distrod will now start automatically on Windows startup.\n\næ“ä½œå®Œæˆåï¼Œéœ€è¦é‡å¯è™šæ‹Ÿæœºã€‚ç”¨å¦‚ä¸‹å‘½ä»¤å°†å¯¹åº”çš„wslè™šæ‹Ÿæœºå…³é—­å°±è¡Œäº†ï¼Œå†æ¬¡æ‰§è¡Œwslå°±ä¼šé‡å¯è¿™ä¸ªè™šæ‹Ÿæœºã€‚\nwsl --terminate CentOS8\n\nå¦‚å›¾ï¼Œæˆ‘çš„systemctlå‘½ä»¤å·²ç»ç”Ÿæ•ˆã€‚\n\nä¹Ÿèƒ½æ­£å¸¸é€šè¿‡systemctlå‘½ä»¤å¯åŠ¨mariadbæ•°æ®åº“\n\n6.2 å¾®è½¯å®˜æ–¹ï¼ˆæ¨èï¼‰\nå‚è€ƒ https://zhuanlan.zhihu.com/p/569883693\n\næŸ¥çœ‹wslç‰ˆæœ¬å·å‘½ä»¤ä¸ºï¼š wsl --versionï¼Œå¦‚æœæ­¤å‘½ä»¤æœªæ­£å¸¸å›æ˜¾ç‰ˆæœ¬å·ï¼Œæˆ–ç‰ˆæœ¬å·ä½äº0.67.6ï¼Œé‚£ä¹ˆä½ å®‰è£…çš„wslè¿˜ä¸æ”¯æŒsystemdã€‚å¦‚ä¸‹ï¼Œæˆ‘çš„wslç‰ˆæœ¬å·²ç»æ˜¯æ”¯æŒçš„äº†ã€‚\nPS C:\\Users\\S2522\\Desktop&gt; wsl --versionWSL ç‰ˆæœ¬ï¼š 1.2.5.0å†…æ ¸ç‰ˆæœ¬ï¼š 5.15.90.1WSLg ç‰ˆæœ¬ï¼š 1.0.51MSRDC ç‰ˆæœ¬ï¼š 1.2.3770Direct3D ç‰ˆæœ¬ï¼š 1.608.2-61064218DXCore ç‰ˆæœ¬ï¼š 10.0.25131.1002-220531-1700.rs-onecore-base2-hypWindows ç‰ˆæœ¬ï¼š 10.0.22621.2134\n\nè¿›å…¥wslçš„CentOSè™šæ‹Ÿæœºï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\necho -e &quot;[boot]\\nsystemd=true&quot; | sudo tee -a /etc/wsl.conf\n\néšåexité€€å‡ºè™šæ‹Ÿæœºï¼Œå›åˆ°windowsç»ˆç«¯å‘½ä»¤è¡Œï¼Œé‡å¯wsl\nwsl --shutdown\n\néšåå†æ¬¡åœ¨windowså‘½ä»¤è¡Œä¸‹æ‰§è¡Œwslå‘½ä»¤ï¼Œé‡å¯è¿™ä¸ªè™šæ‹Ÿæœºï¼›\né‡å¯wslè™šæ‹Ÿæœºåï¼Œåœ¨è™šæ‹Ÿæœºå†…éƒ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\nps --no-headers -o comm 1\n\n\nå¦‚æœè¿™ä¸ªå‘½ä»¤è¿”å›ç»“æœæ˜¯systemdï¼Œåˆ™ä»£è¡¨æˆ‘ä»¬çš„systemctlå‘½ä»¤å·²ç»å¯ä»¥ä½¿ç”¨ã€‚\nå¦‚æœè¿”å›çš„æ˜¯init(CentOS8)ï¼Œåˆ™è®¾ç½®å¤±è´¥ï¼ˆæ£€æŸ¥ä¸€ä¸‹centosçš„wslç‰ˆæœ¬æ˜¯å¦ä¸º2ï¼‰\n\n# ps --no-headers -o comm 1systemd\n\nå¦‚ä¸‹å›¾ï¼Œæˆ‘å·²ç»è®¾ç½®æˆåŠŸäº†ï¼\n\nå¾®è½¯å®˜æ–¹æ”¯æŒçš„systemdè¿˜æ˜¯æœ‰ä¸€ç‚¹æ˜¯ä¼˜äºdistrodçš„ï¼Œé‚£å°±æ˜¯å¯ç”¨äº†å®˜æ–¹ systemd çš„ wsl2 å®ä¾‹ï¼Œåœ¨ç”¨æˆ·åœæ­¢æ“ä½œåï¼Œä¼šè‡ªåŠ¨å…³é—­ï¼Œå’Œæœªå¯ç”¨ systemd æ—¶çš„ç‰¹æ€§ä¸€æ ·ï¼Œè¿™æœ‰åˆ©äºèŠ‚çº¦ç”µè„‘çš„è®¡ç®—èµ„æºã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è™šæ‹Ÿæœº","wsl"]},{"title":"ã€Linuxã€‘wslè™šæ‹Ÿæœºæ—¶é—´å’Œå®é™…æ—¶é—´ä¸ç¬¦åˆ","url":"/posts/1339169411/","content":"å¶ç„¶é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œè§¦å‘åŸå› æ˜¯ç”µè„‘åœ¨å¼€å¯wslçš„æƒ…å†µä¸‹è¿›å…¥äº†ä¼‘çœ æ¨¡å¼ï¼Œä¸”åœ¨æ— ç½‘ç»œæƒ…å†µä¸‹å‡ å¤©ä¸ä½¿ç”¨ã€‚\nç„¶åå¼€å¯wslï¼Œå‘ç°git logæ˜¾ç¤ºæœ€æ–°commitçš„æäº¤æ—¶é—´æ˜¯æ˜å¤©ï¼Œç»™æˆ‘å“ä¸€è·³ï¼Œç„¶åæ‰å‘ç°åŸæ¥æ˜¯wslé‡Œé¢çš„æ—¶é—´ä¸å¯¹ã€‚\nLinuxä¸‹çœ‹æ—¶é—´çš„å‘½ä»¤æ˜¯dateï¼Œæœ¬æ–‡å†™äº12æœˆ12æ—¥ï¼Œä½†wslä¸­çš„æ—¶é—´æ˜¯12æœˆ10æ—¥ï¼Œè‚¯å®šæ˜¯ä¸å¯¹ã€‚\n&gt; dateTue Dec 10 09:51:29 AM CST 2023\n\nåœ¨wslå†…éƒ¨ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œæ—¶é—´åŒæ­¥\nsudo hwclock -s\n\næ‰§è¡Œåï¼Œåœ¨windowsçš„å‘½ä»¤è¡Œé‡Œé¢æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œé‡å¯wslå­ç³»ç»Ÿã€‚\nwsl --shutdown\n\nå†åœ¨wslé‡Œé¢æ‰§è¡Œdateå‘½ä»¤ï¼Œæ—¶é—´æ­£ç¡®ã€‚\n&gt; dateTue Dec 12 09:53:21 AM CST 2023","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è™šæ‹Ÿæœº","wsl"]},{"title":"ã€Linuxã€‘ä¿®æ”¹è…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨çš„hostname","url":"/posts/4130440541/","content":"ä»Šå¤©æƒ³ä¿®æ”¹äº‘ä¸»æœºçš„hostnameï¼Œä½†æ˜¯è…¾è®¯äº‘çš„æ§åˆ¶å°é‡Œé¢å¥½åƒä¸èƒ½ç›´æ¥æ”¹è¿™ä¸ªåå­—ã€‚éœ€è¦åœ¨rootç”¨æˆ·é‡Œé¢ä¿®æ”¹ï¼\n\n\n\nå‚è€ƒ ä¿®æ”¹æœåŠ¡å™¨ä¸»æœºåç§°-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\n\nä¿®æ”¹å‰ï¼š\n[muxue@VM-12-2-centos:~]$\n\n\nä¿®æ”¹åï¼š\n[muxue@bt-7274:~]$\n\n\n1.æŸ¥çœ‹å½“å‰çš„ä¸»æœºåç§°hostname\n\n2.ä¸´æ—¶ä¿®æ”¹ä¸»æœºåç§°ä¸å»ºè®®ä½¿ç”¨ï¼Œé‡å¯ä¹‹ååˆä¼šè¿˜åŸ\n# hostname ä¸»æœºåç§°hostname XXX\n\n3.æ°¸ä¹…ä¿®æ”¹ä¸»æœºåç§°è­¦å‘Šï¼šWSL2ä¸­ä¸èƒ½ä½¿ç”¨æ­¤åŠæ³•ä¿®æ”¹ä¸»æœºåï¼ï¼å¦åˆ™ä¿®æ”¹åä¼šå¯¼è‡´WSLä¸»æœºæš‚æ—¶æ— æ³•æ­£å¸¸è¿›å…¥ï¼ï¼ˆé‡åˆ°æ­¤é—®é¢˜å¯ä»¥é‡å¯ç”µè„‘ï¼ŒWSLçš„ä¸»æœºåä¼šè‡ªåŠ¨é‡ç½®ï¼‰\n# hostnamectl set-hostname ä¸»æœºåç§°hostnamectl set-hostname XXX\n\n\n4.é‡å¯æœåŠ¡é‡å¯åæ•ˆæœå°±å‡ºç°äº†\nreboot\n\nè°¢è°¢ä½ ï¼ŒBT7274\n\n5.WSL2ä¿®æ”¹ä¸»æœºå\nå‚è€ƒï¼šWSL ä¿®æ”¹ hostname_wslä¿®æ”¹ä¸»æœºå-CSDNåšå®¢ å’Œ How to change the hostname of Ubuntu running in Windows WSL\n\nå¦‚æœæƒ³åœ¨ä¸ä¿®æ”¹windowsä¸»æœºåçš„æƒ…å†µä¸‹ï¼Œåœ¨WSLä¸­ä¿®æ”¹ä¸»æœºåï¼Œå¯ä»¥ä½¿ç”¨WSLçš„é…ç½®æ–‡ä»¶ã€‚\nsudo vim /etc/wsl.conf\n\næ·»åŠ å¦‚ä¸‹é…ç½®\n[network]hostname = &lt;hostname&gt;generateHosts = false\n\nå…¶ä¸­hostnameä¿®æ”¹ä¸ºä½ æƒ³è¦çš„ä¸»æœºåï¼ŒgenerateHostsé€‰é¡¹ä»£è¡¨ä¸è‡ªåŠ¨ç”Ÿæˆhostsæ–‡ä»¶ï¼ˆæˆ‘çš„ç†è§£æ˜¯ä¸è¦è‡ªåŠ¨é‡ç½®ï¼‰ã€‚\néšåä¿®æ”¹/etc/hostsæ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ–‡ä»¶åº”è¯¥é•¿ä¸‹é¢è¿™æ ·\n# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:# [network]# generateHosts = false127.0.0.1       localhost127.0.1.1       my-old-hostname.localdomain      my-old-hostname192.168.0.138   host.docker.internal192.168.0.138   gateway.docker.internal127.0.0.1       kubernetes.docker.internal# The following lines are desirable for IPv6 capable hosts::1     ip6-localhost ip6-loopbackfe00::0 ip6-localnetff00::0 ip6-mcastprefixff02::1 ip6-allnodesff02::2 ip6-allrouter\n\nä½ éœ€è¦åšçš„æ˜¯å°†æ–‡ä»¶ä¸­my-old-hostnameä¿®æ”¹ä¸ºä½ åˆšåˆšæ›´æ–°çš„æ–°ç”¨æˆ·åï¼Œå…¶ä»–å†…å®¹ä¸åŠ¨ã€‚åœ¨æˆ‘çš„ç”µè„‘ä¸Šç¬¬ä¸€ä¸ªmy-old-hostnameåé¢åªæœ‰ä¸€ä¸ªç‚¹ï¼Œä¸å¸¦localdomainã€‚\n127.0.1.1       new-hostname.localdomain      new-hostname\n\nå›åˆ°windowsçš„å‘½ä»¤è¡Œä¸­é‡å¯wslå³å¯ç”Ÿæ•ˆã€‚\nwsl --shutdown è™šæ‹Ÿæœºåç§°\n\nåˆæ¬¡ä¿®æ”¹åæˆ‘é‡åˆ°äº†è¿™ä¸ªsudoåˆ‡æ¢çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºä½ çš„/etc/hostsæ²¡æœ‰æ­£å¸¸ä¿®æ”¹ä¸ºæ–°çš„hostnameï¼Œè¯·æ£€æŸ¥ä¿®æ”¹æ˜¯å¦æ­£ç¡®ã€‚\nâ¯ sudo su -sudo: unable to resolve host wsl-ubuntu: Name or service not known","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘wsl2å®‰è£…ubuntuå¹¶ç§»åŠ¨å®‰è£…ä½ç½®","url":"/posts/3613882502/","content":"1.å¯ç”¨wslé¦–å…ˆæ˜¯å¯ç”¨ä½ çš„wslï¼Œå‚è€ƒæœ¬ç«™wslå®‰è£…centos8ä¸­çš„æ•™ç¨‹;\nå¯ç”¨wslåï¼Œæ›´æ–°ä¸€ä¸‹ï¼Œå¹¶è®¾ç½®ç‰ˆæœ¬ä¸º2ï¼›\nwsl --updatewsl --set-default-version 2 # è®¾ç½®wslç‰ˆæœ¬ä¸º2ï¼Œä¸ç„¶å¯èƒ½å®‰è£…å¤±è´¥\n2.å®‰è£…ubuntuåœ¨å¾®è½¯å•†åº—æœç´¢ubuntuï¼Œæ ¹æ®ä½ çš„éœ€è¦å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯è¡¨æ˜äº†ç‰ˆæœ¬å·çš„Ubuntu 22.04.3 LTSç‰ˆæœ¬ã€‚\n\nä¸‹è½½å®Œæ¯•åï¼Œåœ¨å¾®è½¯å•†åº—é‡Œé¢ç‚¹å‡»æ‰“å¼€ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¿›è¡Œå®‰è£…æµç¨‹ã€‚\n\néšåä¼šæç¤ºä½ è¾“å…¥ä¸€ä¸ªç”¨æˆ·åï¼Œä»¥åŠè¯¥ç”¨æˆ·åçš„å¯†ç ã€‚ä¸ºäº†æ–¹ä¾¿è¾¨è¯†ä¸åŒçš„è™šæ‹Ÿæœºï¼Œæˆ‘ç›´æ¥å°†ç”¨æˆ·åè®¾ç½®ä¸ºwsläº†ã€‚\nInstalling, this may take a few minutes...Please create a default UNIX user account. The username does not need to match your Windows username.For more information visit: https://aka.ms/wslusersEnter new UNIX username: wslNew password:Retype new password:passwd: password updated successfullyInstallation successful!To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.See &quot;man sudo_root&quot; for details.Welcome to Ubuntu 22.04.3 LTS (GNU/Linux 4.4.0-22621-Microsoft x86_64) * Documentation:  https://help.ubuntu.com * Management:     https://landscape.canonical.com * Support:        https://ubuntu.com/advantageThis message is shown once a day. To disable it please create the/home/wsl/.hushlogin file.wsl@7945R9P:~$\n\nåœ¨windowsçš„ç»ˆç«¯é‡Œé¢ä½¿ç”¨wslå‘½ä»¤å¯ä»¥çœ‹åˆ°å½“å‰å®‰è£…çš„ubuntu\nPS C:\\Users\\S2522&gt; wsl -l -v  NAME            STATE           VERSION* Ubuntu-22.04    Running         1\n\n3.ç§»åŠ¨å®‰è£…ä½ç½®\nå‚è€ƒ: Site Unreachable\n\næ­¤æ—¶å…ˆä¸è¦æ€¥ç€åšä¸‹ä¸€æ­¥ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªwslä¸»æœºæ˜¯å®‰è£…åœ¨Cç›˜çš„ï¼Œå¯¹äºLinuxç³»ç»Ÿè€Œè¨€ï¼Œåç»­ç”¨ä¹…äº†å®¹æ˜“æ¶¨åˆ°30GBç”šè‡³æ›´å¤§çš„å­˜å‚¨ç©ºé—´æ¶ˆè€—ã€‚é™¤éä½ çš„Cç›˜æœ‰éå¸¸éå¸¸éå¸¸å¤šçš„å‰©ä½™ç©ºé—´ï¼Œä¸ç„¶è¿˜æ˜¯å»ºè®®ç§»åŠ¨åˆ°å…¶ä»–ç›˜å»é‡æ–°å®‰è£…ã€‚\né¦–å…ˆç”¨shutdownå‘½ä»¤å…³é—­è™šæ‹Ÿæœº\nwsl --shutdown\n\néšåç”¨exportå¯¼å‡ºå‘½ä»¤å°†è¯¥è™šæ‹Ÿæœºæ‰“åŒ…å¯¼å‡ºåˆ°ä¸€ä¸ªå­˜å‚¨è·¯å¾„ä¸­\nwsl --export è™šæ‹Ÿæœºåå­— å¯¼å‡ºæ–‡ä»¶è·¯å¾„\n\nç¨ç­‰ç‰‡åˆ»å³å¯æˆåŠŸå¯¼å‡ºã€‚\nPS C:\\Users\\S2522&gt; wsl --export Ubuntu-22.04 d:\\wsl-ubuntu22.04.taræ­£åœ¨å¯¼å‡ºï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚æ“ä½œæˆåŠŸå®Œæˆã€‚\n\nåˆ é™¤å½“å‰çš„è™šæ‹Ÿæœº\nwsl --unregister Ubuntu-22.04\n\næŠŠåˆšåˆšå¯¼å‡ºçš„taræ–‡ä»¶ï¼Œå¯¼å…¥wslä¸­ã€‚æ­¤æ—¶å¯ä»¥é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„å®‰è£…è·¯å¾„ï¼Œå¹¶ä¸”æŒ‡å®šwslç‰ˆæœ¬ä¸º2ï¼ˆåœ¨è¿™ä¹‹å‰éœ€è¦æ‰§è¡Œwsl --updateï¼‰\nwsl --import è™šæ‹Ÿæœºåå­— å®‰è£…è·¯å¾„ taråŒ…è·¯å¾„ --version 2\n\næ³¨æ„ï¼Œå¦‚æœä½ çš„å®‰è£…è·¯å¾„é‡Œæœ‰ç©ºæ ¼ï¼ˆæ¯”å¦‚Progarm Filesæ–‡ä»¶å¤¹ï¼‰ï¼Œåˆ™éœ€è¦ç”¨è‹±æ–‡å¼•å·å°†è·¯å¾„ç»™æ‹¬èµ·æ¥ã€‚\nå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯¼å…¥æˆåŠŸï¼Œå¹¶ä¸”ç‰ˆæœ¬ä¸ºwsl2ï¼›å¯¼å…¥åï¼Œtaræ–‡ä»¶å¯ä»¥åˆ é™¤ï¼Œä¸ä¼šå½±å“è™šæ‹Ÿæœºä½¿ç”¨ã€‚\nPS C:\\Users\\S2522&gt; wsl --unregister Ubuntu-22.04æ­£åœ¨æ³¨é”€ã€‚æ“ä½œæˆåŠŸå®Œæˆã€‚PS C:\\Users\\S2522&gt; wsl --import Ubuntu-22.04 &quot;D:\\Program Files\\WSL&quot; &quot;D:\\Program Files\\WSL\\wsl-ubuntu22.04.tar&quot; --version 2æ­£åœ¨å¯¼å…¥ï¼Œè¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚æ“ä½œæˆåŠŸå®Œæˆã€‚PS C:\\Users\\S2522&gt; wsl -l -v  NAME            STATE           VERSION* Ubuntu-22.04    Stopped         2\n\næŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®‰è£…è·¯å¾„ï¼Œèƒ½åœ¨é‡Œé¢æ‰¾åˆ°ä¸€ä¸ªvhdxè™šæ‹Ÿç£ç›˜æ–‡ä»¶ï¼Œè¿™å°±ä»£è¡¨æˆ‘ä»¬ç§»åŠ¨å®‰è£…ç›®å½•æˆåŠŸäº†ã€‚ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„Cç›˜è¢«æŒ¤çˆ†äº†ã€‚\n\nä½¿ç”¨wslå‘½ä»¤å³å¯è¿›å…¥è¯¥è™šæ‹Ÿæœºã€‚å› ä¸ºä¸æ˜¯ä»å¾®è½¯å•†åº—ç›´æ¥å®‰è£…çš„ï¼Œæ‰€ä»¥é»˜è®¤è¿›å…¥çš„æ˜¯rootç”¨æˆ·ã€‚\nPS C:\\Users\\S2522&gt; wsl^EWelcome to Ubuntu 22.04.3 LTS (GNU/Linux 5.15.133.1-microsoft-standard-WSL2 x86_64) * Documentation:  https://help.ubuntu.com * Management:     https://landscape.canonical.com * Support:        https://ubuntu.com/advantageThis message is shown once a day. To disable it please create the/root/.hushlogin file.root@7945R9P:/mnt/c/Users/S2522#\n\nå›åˆ°windowsçš„å‘½ä»¤è¡Œï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é…ç½®é»˜è®¤ç”¨æˆ·ä¸ºåˆšåˆšæˆ‘ä»¬åˆå§‹åŒ–æ—¶è®¾ç½®çš„ç”¨æˆ·ï¼ˆå½“æ—¶æˆ‘è®¾ç½®çš„ç”¨æˆ·åæ˜¯wslï¼‰\nubuntu2204 config --default-user ç”¨æˆ·å\n\nè¿™æ ·é…ç½®äº†ä¹‹åï¼Œwslå‘½ä»¤é»˜è®¤è¿›å…¥çš„ç”¨æˆ·å°±æ˜¯ä½ åˆšåˆšä»å¾®è½¯å•†åº—ä¸‹è½½æ—¶åˆå§‹åŒ–çš„å­ç”¨æˆ·äº†ã€‚\nPS C:\\Users\\S2522&gt; ubuntu2204 config --default-user wslPS C:\\Users\\S2522&gt; wslTo run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.See &quot;man sudo_root&quot; for details.wsl@7945R9P:/mnt/c/Users/S2522$\n\n4.å®‰è£…è½¯ä»¶åŒ…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ›´æ–°è½¯ä»¶æºï¼Œæ›´æ–°å®Œæ¯•åå°±å¯ä»¥è‡ªè¡Œä¸‹è½½ä½ éœ€è¦çš„è½¯ä»¶åŒ…äº†ã€‚\nsudo apt -y update &amp;&amp; sudo apt -y upgrade\n\nè¿™é‡Œåˆ—å‡ºæˆ‘è‡ªå·±éœ€è¦ä½¿ç”¨çš„è½¯ä»¶åŒ…çš„å®‰è£…å‘½ä»¤ã€‚\nsudo apt -y install vim git net-tools cmake make automake doxygen unzip wget curl g++ gcc\n\nThe endåç»­å°±æ˜¯Ubuntuçš„æ­£å¸¸ä½¿ç”¨å’ŒLinuxç¯å¢ƒå®‰è£…è¿‡ç¨‹äº†ï¼Œç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","wsl","ubuntu"]},{"title":"ã€WSLã€‘è§£å†³'wslï¼šæ£€æµ‹åˆ°localhostä»£ç†é…ç½®ï¼Œä½†æœªé•œåƒåˆ°WSL'é—®é¢˜","url":"/posts/3693584344/","content":"ä»Šå¤©ä½¿ç”¨wsl2çš„centosçš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé—®é¢˜\nwsl: æ£€æµ‹åˆ° localhost ä»£ç†é…ç½®ï¼Œä½†æœªé•œåƒåˆ° WSLã€‚NAT æ¨¡å¼ä¸‹çš„ WSL ä¸æ”¯æŒ localhost ä»£ç†ã€‚\n\nå‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ä½ çš„å®¿ä¸»æœºå¼€å¯äº†ä»£ç†ï¼Œä½†æ˜¯ä»£ç†å¯¹wslå¹¶æ²¡æœ‰èµ·ä½œç”¨ã€‚å¦‚æœä½ æƒ³è®©wslä¹Ÿèƒ½ä½¿ç”¨ä»£ç†ï¼Œå°±éœ€è¦è¿›è¡Œé…ç½®ã€‚å¦‚æœä¸éœ€è¦åˆ™å¯ä»¥å¿½ç•¥è¿™ä¸ªæç¤ºã€‚\nå‚è€ƒ è§£å†³â€wsl: æ£€æµ‹åˆ° localhost ä»£ç†é…ç½®ï¼Œä½†æœªé•œåƒåˆ° WSLã€‚NAT æ¨¡å¼ä¸‹çš„ WSL ä¸æ”¯æŒ localhost ä»£ç†â€ - JustInCase - åšå®¢å›­\nåœ¨windowsçš„C:\\User\\&lt;ä½ çš„ç”¨æˆ·å&gt;\\ ä¸‹åˆ›å»ºä¸€ä¸ª.wslconfigï¼Œå†…éƒ¨å†™å…¥å¦‚ä¸‹å†…å®¹\n[experimental]autoMemoryReclaim=gradual  networkingMode=mirroreddnsTunneling=truefirewall=trueautoProxy=true\n\nå†™å®Œåä¿å­˜ï¼Œé‡å¯wslå³å¯\nwsl --shutdown\n\nå†æ¬¡å¯åŠ¨wslï¼Œä¸å†å¼¹å‡ºä¸Šè¿°æç¤º\n\næ³¨æ„ï¼Œæ¯æ¬¡æ›´æ¢ä»£ç†éƒ½éœ€è¦é‡å¯wslæ‰ä¼šç”Ÿæ•ˆï¼ˆwslä¼šæœ‰å³ä¸‹è§’æ¶ˆæ¯æç¤ºï¼‰\nå¦‚æœä½ çš„wslä¸éœ€è¦ä½¿ç”¨ä»£ç†ï¼Œè¯·ä¸è¦ä¿®æ”¹æ­¤è®¾ç½®ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","è™šæ‹Ÿæœº","wsl"]},{"title":"ã€è§£å†³ã€‘WSL2ä¸­å®‰è£…Cudaé‡åˆ°/usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link","url":"/posts/2859840121/","content":"é—®é¢˜è¯´æ˜æ…•é›ªé‡åˆ°çš„æƒ…å†µæ˜¯wsl2å®‰è£…çš„ubuntu22.04åœ¨aptå®‰è£…è½¯ä»¶çš„æ—¶å€™å°±ä¼šå‡ºç°è¿™ä¸ªæŠ¥é”™ï¼Œæ— è®ºå®‰è£…ä»€ä¹ˆè½¯ä»¶éƒ½ä¼šæœ‰\n/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link\n\nåšå®¢å‚è€ƒç½‘ä¸ŠåŸæœ‰çš„è§£å†³æ–¹æ³•æ˜¯ï¼šå°†/usr/lib/wsl/libä¸­çš„æ–‡ä»¶è½¯è¿æ¥åˆ°/usr/lib/wsl/lib2ä¸­ã€‚\nè¯¥æ–¹æ³•ä¼šå¯¼è‡´åç»­å‡ºç°\n\né—®é¢˜1ï¼šNVIDIA-SMI couldnâ€™t find libnvidia-ml.so library in your system.\né—®é¢˜2ï¼šerror code is libcuda.so: cannot open shared object file: No such file or directory\n\næˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ï¼šåˆ é™¤æˆ–å¤‡ä»½/usr/lib/wsl/libä¸­çš„libcuda.soä¸libcuda.so.1ï¼Œç„¶åå»ºç«‹å¯¹libcuda.so.1.1çš„è½¯è¿æ¥ã€‚\næ³¨æ„ï¼Œcpå¤‡ä»½åŸæœ¬çš„æ—¶å€™ä¸èƒ½ç›´æ¥å¤‡ä»½åˆ°/usr/lib/wsl/lib/ç›®å½•ä¸­ï¼Œå› ä¸ºä¸‹ä¸€æ¬¡å¯åŠ¨æ—¶è¿™ä¸ªç›®å½•ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨å¤„ç†ï¼Œå†…éƒ¨çš„.bakæ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚\n# å¤‡ä»½åŸæœ¬çš„sudo cp /usr/lib/wsl/lib/libcuda.so  ~/libcuda.so.baksudo cp /usr/lib/wsl/lib/libcuda.so.1 ~/libcuda.so.1.bak# åˆ é™¤åŸæœ¬çš„sudo rm -f /usr/lib/wsl/lib/libcuda.so sudo rm -f /usr/lib/wsl/lib/libcuda.so.1# è¿›è¡Œè½¯è¿æ¥sudo ln -s /usr/lib/wsl/lib/libcuda.so.1.1 /usr/lib/wsl/lib/libcuda.so.1sudo ln -s /usr/lib/wsl/lib/libcuda.so.1 /usr/lib/wsl/lib/libcuda.so\n\n\nä¿®æ”¹åçš„æ•ˆæœå¦‚ä¸‹ï¼Œlibcuda.soå’Œlibcuda.so.1å®é™…ä¸Šéƒ½æŒ‡å‘libcuda.so.1.1ï¼›\nâ¯ lltotal 216M-r-xr-xr-x 1 root root  11M Jan 13 06:30 libcudadebugger.so.1lrwxrwxrwx 1 root root   29 Feb  1 15:52 libcuda.so -&gt; /usr/lib/wsl/lib/libcuda.so.1lrwxrwxrwx 1 root root   31 Feb  1 15:52 libcuda.so.1 -&gt; /usr/lib/wsl/lib/libcuda.so.1.1-r-xr-xr-x 1 root root 155K Jan 13 06:30 libcuda.so.1.1\n\nåŸæ–‡ç‰ˆæƒè¯´æ˜ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚æœ¬æ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/pl23k/article/details/131336220\n\nåŒæ—¶å¯ä»¥å‚è€ƒï¼šWSL libcuda.so.1 is not a symbolic link çš„è§£å†³æ–¹æ³• | âœ¨kiraã®åšå®¢\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["è™šæ‹Ÿæœº","wsl"]},{"title":"ã€WSLã€‘wslä¸­ubuntuæ— æ³•é€šè¿‡useraddæ·»åŠ ç”¨æˆ·","url":"/posts/803882566/","content":"é€‚ç”¨äºhexo-butterflyä¸»é¢˜çš„front-matteræ¨¡æ¿ã€‚\næƒ…å†µè¯´æ˜åœ¨wsl2ä¸­çš„ubuntu22.04æ— æ³•ä½¿ç”¨useraddæ·»åŠ ç”¨æˆ·ï¼Œè¡¨ç°ä¸ºæ‰§è¡Œå‘½ä»¤åï¼Œåªå‡ºç°è¯¥ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œä½†/homeç›®å½•ä¸‹æ²¡æœ‰å‡ºç°è¯¥ç”¨æˆ·çš„å®¶ç›®å½•æ–‡ä»¶å¤¹ï¼Œä¸”æ— æ³•ä½¿ç”¨su - ç”¨æˆ·åæˆåŠŸåˆ‡æ¢åˆ°è¯¥ç”¨æˆ·ä¸Šã€‚\nå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘å…ˆä»wslå­ç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œç„¶åæ‰§è¡Œuseraddå‘½ä»¤ï¼Œå‘ç°ç”¨æˆ·åˆ›å»ºæ²¡æœ‰å®Œå…¨æˆåŠŸã€‚\nwsl:~$ sudo su - root:~# useradd gitroot:~# ls /homewslroot:~# sudo adduser gitadduser: The user `git&#x27; already exists.root:~# userdel -r gituserdel: git mail spool (/var/mail/git) not founduserdel: git home directory (/home/git) not foundroot:~# userdel -r gituserdel: user &#x27;git&#x27; does not exist\nåŸå› è¿™æ˜¯å› ä¸ºwsl2å’Œä¼ ç»Ÿçš„VMwareç±»å‹è™šæ‹Ÿæœºæœ‰ä¸€å®šåŒºåˆ«ï¼Œå…¶ä¸æ”¯æŒä½¿ç”¨useraddç›´æ¥æ·»åŠ ç”¨æˆ·ï¼Œè€Œæ˜¯æä¾›äº†adduserå‘½ä»¤æ¥å¤„ç†ã€‚å‡†ç¡®æ¥è¯´æ˜¯Ubuntu22.04ä¸æ”¯æŒuseraddï¼Œè€Œæ˜¯éœ€è¦ä½¿ç”¨adduserã€‚\nsudo adduser &lt;æ–°çš„ç”¨æˆ·å&gt;\n\nä½¿ç”¨è¿™ä¸ªå‘½ä»¤åˆ™å¯ä»¥æ­£å¸¸åˆ›å»ºç”¨æˆ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºæˆ‘åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·åä¸ºgitçš„ç”¨æˆ·ã€‚éœ€è¦å¡«å†™ç”¨æˆ·ä¿¡æ¯çš„éƒ¨åˆ†ç›´æ¥å›è½¦è·³è¿‡å³å¯ã€‚\nroot:~# sudo adduser gitAdding user `git&#x27; ...Adding new group `git&#x27; (1001) ...Adding new user `git&#x27; (1001) with group `git&#x27; ...Creating home directory `/home/git&#x27; ...Copying files from `/etc/skel&#x27; ...New password:Retype new password:passwd: password updated successfullyChanging the user information for gitEnter the new value, or press ENTER for the default        Full Name []:        Room Number []:        Work Phone []:        Home Phone []:        Other []:Is the information correct? [Y/n] yroot:~# ls /homegit  wsl\n\nä½¿ç”¨idå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ–°ç”¨æˆ·çš„ç”¨æˆ·ç»„ä»¥åŠuidç­‰ç›¸å…³ä¿¡æ¯ã€‚\nroot:~# id gituid=1001(git) gid=1001(git) groups=1001(git)\n\næ³¨æ„ï¼Œè¯¥æ–°ç”¨æˆ·ä¸åœ¨/etc/sudoersæ–‡ä»¶ä¸­ï¼Œæ— æ³•ä½¿ç”¨sudoå‘½ä»¤ã€‚éœ€è¦ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œåœ¨å¦‚ä¸‹ä½ç½®ä¹‹åæ·»åŠ ä¸€è¡Œ\nroot ALL=(ALL:ALL) ALL# æ–°å¢æ­¤è¡Œç”¨æˆ·å ALL=(ALL:ALL) ALL","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["è™šæ‹Ÿæœº","wsl"]},{"title":"ã€å·¥å…·ã€‘centos7ç³»ç»Ÿä¸‹ä½¿ç”¨vimplusé…ç½®vimçš„C++ç¯å¢ƒ","url":"/posts/274956107/","content":"centos7ç³»ç»Ÿä¸‹ä½¿ç”¨vimplusé…ç½®vimçš„C++ç¯å¢ƒå¼€æºé¡¹ç›®è¯·å‚è€ƒï¼šhttps://gitee.com/chxuan/vimplus\né…ç½®å¥½çš„ç•Œé¢å¦‚ä¸‹ï¼š\n\n\n1. å‡†å¤‡å·¥ä½œï¼šubuntu æˆ–è€… centos7 ç³»ç»Ÿ \nå› ä¸ºé»˜è®¤ä¸‹è½½éƒ½æ˜¯ä»githubæ‹‰çš„ï¼Œå¾ˆå®¹æ˜“å°±ä¸‹è½½ä¸ä¸‹æ¥ï¼Œå»ºè®®æå‰ä¸‹è½½vim.zipæ’ä»¶å®‰è£…åŒ… vim.zip - è“å¥äº‘ (lanzouj.com)\nä¹Ÿå¯ä»¥åˆ°æ…•é›ªçš„ Gitea å»ä¸‹è½½è¿™ä¸ªå‹ç¼©åŒ… https://gitea.musnow.top/musnow/vimplus/src/branch/master/vim-plugins.zip\n2. å…·ä½“å®ç°ï¼š# 1.1 centosä¸‹å®‰è£…gitï¼Œsz/rz:yum -y install gityum install -y lrzsz    # 1.2 ubuntuä¸‹å®‰è£…git,sz/rz:sudo apt-get install gitsudo apt-get install lrzsz    # 2.å…‹éš†æœ€æ–°ç‰ˆæœ¬git clone https://gitee.com/chxuan/vimplus.git# 3.å®Œæˆåå½“å‰è·¯å¾„ä¸‹å‡ºç°vimplusæ–‡ä»¶å¤¹ï¼Œcd vimplus,å¹¶ä¸”æ‰§è¡Œè„šæœ¬ ./install.shcd vimplus./install.sh\n\n\n\nä¸‹è½½è¿‡ç¨‹ä¸­è¯¢é—®ï¼šé€‰æ‹©python2/3ï¼Œè¿™é‡Œé€‰æ‹©3\n3\n\n\nå½“å‰è¿™ä¸€æ­¥åŒ…å«è®¸å¤šgithubä¸Šé¢çš„é¡¹ç›®æ’ä»¶ï¼Œå¦‚æœç½‘é€Ÿå…è®¸ï¼Œå°±å·²ç»ç»“æŸå®‰è£…ï¼›\nå¦‚æœç½‘é€Ÿæ…¢ï¼Œåˆ™å¯ä»¥é€€å‡ºå½“å‰åŠ è½½ç•Œé¢ï¼š\n# è¿›ç¨‹æŒ‚èµ·ï¼Œä¸­æ–­ä¸‹è½½ï¼Œæˆ–è€…å‘½ä»¤æ¨¡å¼è¾“å…¥ esc + :q é€€å‡ºCTRL+z    # åˆ‡æ¢ç›®å½•,ç„¶åæŠŠå¼€å§‹ä¸‹è½½çš„vim.zipæ‹–è¿›æ¥,ç„¶åè§£å‹ï¼š cd  /root/.vim/plugged unzip vim.zip    # è¯¢é—®æ—¶å¦æ›¿æ¢ï¼Œä¾æ¬¡è¾“å…¥ y  Aï¼Œç»“æŸå®‰è£…yA# vimè¿›å…¥ç•Œé¢ï¼Œå‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥PlugInstallæ£€éªŒæ˜¯å¦å®‰è£…å®Œæ¯•:PlugInstall# vimè¿›å…¥ä¾ç„¶æŠ¥é”™ï¼šYouCompleteMe æ’ä»¶æœ‰é—®é¢˜,è¿›å…¥è¯¥ç›®å½•ä¸‹ï¼šcd  /root/.vim/plugged/YouCompleteMe# è¾“å…¥./install.sh --clang-completer\n\nå¦‚æœæ’ä»¶éƒ½å®‰è£…å¥½äº†ï¼Œæ‰§è¡Œ:PlugInstallåº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢\n\nè‡³æ­¤vimplusé…ç½®å®‰è£…å·²ç»ç»“æŸï¼å‚è€ƒè§†é¢‘ï¼šVimå¿«é€Ÿé…ç½®C++ç¯å¢ƒ_å“”å“©å“”å“©_bilibili\nNoExtraConfDetected: No .ycm_extra_conf.py file detectedé—®é¢˜ï¼šè§£å†³ä¼ é€é—¨ï¼šhttps://blog.csdn.net/xiaozhidian/article/details/118340118\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["Linux","vim"]},{"title":"ã€Linuxã€‘è®¾ç½®ç³»ç»Ÿé˜²ç«å¢™ï¼Œè§£å†³æ§åˆ¶å°å¼€äº†é˜²ç«å¢™ä¾æ—§æ— æ³•è®¿é—®é—®é¢˜","url":"/posts/3168515672/","content":"ä»Šå¤©åœ¨æ§åˆ¶å°å¼€æ”¾äº†è…¾è®¯äº‘æœåŠ¡å™¨çš„é˜²ç«å¢™ï¼Œå‘ç°ç”¨ip:ç«¯å£è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼ŒæŸ¥è¯¢äº†ä¹‹åï¼Œæ‰çŸ¥é“éœ€è¦è®¾ç½®ç³»ç»Ÿé‡Œé¢çš„é˜²ç«å¢™\n\n\n1.å‘½ä»¤firewall-cmd --zone=public --add-port=30100/tcp --permanentfirewall-cmd --reload\n\nè¯­å¥çš„æ„æ€æ˜¯å¼€æ”¾30100çš„tcpç«¯å£ï¼Œéšåé‡æ–°åŠ è½½é˜²ç«å¢™ã€‚\nå¦‚æœè¦å¼€æ”¾udpç«¯å£ï¼Œå§tcpæ”¹æˆudpå°±å¯ä»¥äº†\n2.ä½¿ç”¨ç¤ºä¾‹# firewall-cmd --zone=public --add-port=30100/tcp --permanentsuccess# firewall-cmd --reloadsuccess\n\nè°ƒç”¨å®Œä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ï¼Œè¿˜å¯ä»¥çœ‹çœ‹å½“å‰å¼€äº†ä»€ä¹ˆç«¯å£\n# firewall-cmd --list-ports30100/tcp\n\nå‡ºç°è¿™ä¸ªå°±æ˜¯okäº†\n3.å…³é—­ç«¯å£å¼€å¯äº†ï¼Œä¹Ÿå¾—å­¦ä¼šå…³é—­\nfirewall-cmd --zone=public --remove-port=3000/tcp --permanentfirewall-cmd --reload\n\n4.txäº‘é˜²ç«å¢™æ³¨æ„å•Šï¼Œé»˜è®¤è…¾è®¯äº‘æ§åˆ¶å°çš„é˜²ç«å¢™å¼€æ”¾çš„æ˜¯tcpçš„ï¼Œå¦‚æœä½ éœ€è¦æµ‹è¯•udpæœåŠ¡ï¼Œé‚£å°±éœ€è¦å•ç‹¬å¼€æ”¾ä¸€ä¸‹udpçš„ç«¯å£ï¼\n5.ç»‘å®šç«¯å£é—®é¢˜å¦‚æœä½ å¯åŠ¨çš„æœåŠ¡æ˜¯è‡ªå·±å†™çš„æœåŠ¡ç«¯ä»£ç ï¼Œé‚£ä¹ˆç»‘å®šipçš„æ—¶å€™ä¸€å®šè¦ç»‘å®š0.0.0.0ï¼Œå¦åˆ™æ— æ³•å¤–ç½‘è®¿é—®ï¼\n127.0.0.1 #ç»‘å®šè¿™ä¸ªç«¯å£æ˜¯æ— æ³•å¤–ç½‘è®¿é—®çš„ï¼åªèƒ½åœ¨æœºå™¨å†…éƒ¨è®¿é—®\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘CentOS7.6 å‡çº§ gcc/g++","url":"/posts/3646248503/","content":"CentOS 7.6 å‡çº§ gcc&#x2F;g++çš„æ–¹æ³•ï¼Œä¸ä¸€å®šé€‚ç”¨äºå…¶ä»–linuxç³»ç»Ÿ\n\n\n1.æŸ¥çœ‹ç‰ˆæœ¬g++ -vgcc -v\n\nå½“å‰æŸ¥çœ‹ç‰ˆæœ¬ï¼Œå‘ç°æ˜¯4.8.5ï¼Œè¿™å·²ç»æ˜¯2015å¹´çš„æ—§ç‰ˆæœ¬äº†ï¼Œå¯¹c++11çš„æ”¯æŒä¸æ˜¯å¾ˆå®Œå–„ï¼Œä¸ºäº†æ–¹ä¾¿å­¦ä¹ å’Œç¼–å†™æ–°ç‰ˆæœ¬çš„ä»£ç ï¼Œå‡çº§ä¸€ä¸‹è¿˜æ˜¯å¯ä»¥çš„\nå¦‚æœä½ çš„ç³»ç»Ÿä¸Šæ²¡æœ‰gcc&#x2F;g++ï¼Œåˆ™å°è¯•ç”¨ä¸‹é¢çš„æ–¹æ³•å®‰è£…\nyum install -y gcc gcc-c++\n\nç¤ºä¾‹\n[root@bt-7274:~]# yum install -y gcc gcc-c++Loaded plugins: fastestmirror, langpacks, product-id, search-disabled-repos, subscription-managerThis system is not registered with an entitlement server. You can use subscription-manager to register.Repository epel is listed more than once in the configurationLoading mirror speeds from cached hostfile * centos-sclo-rh: ftp.sjtu.edu.cn * centos-sclo-sclo: ftp.sjtu.edu.cnPackage gcc-4.8.5-44.el7.x86_64 already installed and latest versionPackage gcc-c++-4.8.5-44.el7.x86_64 already installed and latest versionNothing to do\n\n2.å‡çº§yum list dev\\*gcc\n\nç”¨è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬æœ‰å“ªäº›\n\nå¯ä»¥çœ‹åˆ°æœ€æ–°ç‰ˆæœ¬å·²ç»æ˜¯11äº†ï¼Œé‚£æˆ‘ä»¬å°±ç›´æ¥å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„å§\nyum install devtoolset-11-gcc devtoolset-11-gcc-c++\n\nInstalled:  devtoolset-11-gcc.x86_64 0:11.2.1-9.1.el7                                                     devtoolset-11-gcc-c++.x86_64 0:11.2.1-9.1.el7                                                    Dependency Installed:  devtoolset-11-binutils.x86_64 0:2.36.1-1.el7.2                 devtoolset-11-libstdc++-devel.x86_64 0:11.2.1-9.1.el7                 devtoolset-11-runtime.x86_64 0:11.1-2.el7                Complete!\n\nçœ‹åˆ°completeå°±ä»£è¡¨å®‰è£…overäº†\n3.ç”Ÿæ•ˆç°åœ¨è¦åšçš„å°±æ˜¯è®©æ–°å®‰è£…çš„ç‰ˆæœ¬ç”Ÿæ•ˆ\nsource /opt/rh/devtoolset-11/enable\n\n\nä¸è¿‡è¿™æ ·åšï¼Œåªèƒ½åœ¨å½“å‰bashç”Ÿæ•ˆï¼Œæ–°å»ºä¸€ä¸ªbashå°±ä¼šå‘ç°è¿˜æ˜¯4.8.5ã€‚è¦åšçš„å°±æ˜¯å§è¿™ä¸ªè¯­å¥å†™å…¥bashrcçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®©æ¯æ¬¡æ–°å»ºbashçš„æ—¶å€™è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡å°±OKäº†\nè¦ä¿®æ”¹çš„æ˜¯/etc/bashrcï¼Œå¼ºçƒˆå»ºè®®ä¿®æ”¹ä¹‹å‰å…ˆå¤‡ä»½ä¸€ä¸‹\ncp /etc/bashrc ~/bashrc.bak\n\néšåæ‰§è¡Œä¸‹é¢ä¿©å‘½ä»¤\necho &quot;source /opt/rh/devtoolset-11/enable&quot; &gt;&gt; /etc/bashrcsource /etc/bashrc\n\nç°åœ¨å°±OKäº†ï¼Œæ–°å»ºä¸€ä¸ªbashï¼Œå†gcc -vï¼Œå‘ç°å·²ç»æ˜¯æ–°ç‰ˆæœ¬äº†\n\n4.å…³äºmanå¤±æ•ˆé—®é¢˜å‡çº§äº†ç‰ˆæœ¬åï¼Œå¯èƒ½å¯¼è‡´manæ‰‹å†Œå¤±æ•ˆã€‚è¿™æ˜¯å› ä¸ºmançš„ç¯å¢ƒå˜é‡è¢«ä¿®æ”¹äº†\n# echo $MANPATH/opt/rh/devtoolset-11/root/usr/share/man\n\n\nå¦‚æœä½ éœ€è¦ä½¿ç”¨manå‘½ä»¤ï¼Œåˆ™è¿˜éœ€è¦é‡æ–°ä¿®æ”¹ä¸€ä¸‹MANPATHç¯å¢ƒå˜é‡\nexport MANPATH=/usr/share/man\n\nè§£å†³å‚è€ƒ manä»€ä¹ˆéƒ½æœä¸äº†çš„è§£å†³æ–¹æ¡ˆ\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘æ¯”Xshellæ›´çˆ½ï¼Œç”¨vscodeè¿æ¥äº‘æœåŠ¡å™¨è¿›è¡Œå¼€å‘","url":"/posts/3215059456/","content":"æœ¬ç¯‡åšå®¢æ•™ä½ å¦‚ä½•ç”¨VScodeçš„remote sshæ’ä»¶è¿æ¥ä¸Šlinuxäº‘æœåŠ¡å™¨è¿›è¡Œä»£ç å¼€å‘~\n\n\n[TOC]\n1.ä¸‹è½½vscodevscodeæ˜¯å¾®è½¯å®˜æ–¹çš„ä¸€æ¬¾å¤šè¯­è¨€ä»£ç ç¼–è¾‘å™¨ï¼Œå…¶å› ä¸ºä¸°å¯Œè€Œå¼ºå¤§çš„æ’ä»¶è€Œè¢«éå¸¸å¤šç”¨æˆ·é€‰ä¸­ä½¿ç”¨ï¼\n\nå®˜ç½‘ä¸‹è½½ï¼šhttps://code.visualstudio.com/\n\nåœ¨è¿™é‡Œå¯ä»¥ç›´æ¥ä¸‹è½½windowsä¸Šçš„VSCï¼Œä½†æ˜¯é»˜è®¤çš„ä¸‹è½½é“¾æ¥ä¸‹è½½æ˜¯éå¸¸æ…¢çš„ï¼\nhttps://az764295.vo.msecnd.net/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\næˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠè¿™ä¸ªé»˜è®¤çš„ä¸‹è½½é“¾æ¥æ”¹æˆå›½å†…çš„é•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦å°±å¯ä»¥èµ·é£ï¼\nå°†ä¸‹è½½åœ°å€ä¸­çš„az764295.vo.msecnd.net æ›´æ¢ä¸º vscode.cdn.azure.cn æ›´æ”¹åï¼šhttps://vscode.cdn.azure.cn/stable/da76f93349a72022ca4670c1b84860304616aaa2/VSCodeUserSetup-x64-1.70.0.exe\n\nè¿™é€Ÿåº¦å²‚ä¸çˆ½ç‚¸äº†ï¼\n\n1.1 å®‰è£…ä¸€äº›æ’ä»¶\nåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€äº›å¿…è¦çš„æ’ä»¶ï¼š\n\nChinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack for Visual Studio Code\nRemote - SSH\n\n\nå¦‚æœä½ æ²¡æœ‰å…¶ä»–çš„å¼€å‘éœ€æ±‚çš„è¯ï¼Œé»˜è®¤å®‰è£…è¿™ä¸¤ä¸ªå°±å¯ä»¥è®©æˆ‘ä»¬æ„‰å¿«åœ°ç™»é™†ä¸ŠlinuxæœåŠ¡å™¨äº†ï¼\n1.2 è¿æ¥äº‘æœåŠ¡å™¨å®‰è£…å®Œremote sshä¹‹åï¼Œä½ çš„å·¦ä¾§åº”è¯¥ä¼šå‡ºç°è¿™æ ·ä¸€ä¸ªæŒ‰é’®\n\nåœ¨æœ€ä¸Šé¢çš„é“¾æ¥æ¨¡å¼æˆ‘ä»¬é€‰æ‹©ssh targetsï¼Œåœ¨è¿™é‡Œå¯ä»¥ç‚¹å‡»+å·æ·»åŠ linuxæœåŠ¡å™¨\n\nè¿™é‡Œå¡«å†™çš„æ ¼å¼ä¸º shh ç”¨æˆ·å@å…¬ç½‘ipã€‚æ¯”å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯userï¼Œå…¬ç½‘ipæ˜¯114.514.20.22ï¼Œé‚£ä¹ˆéœ€è¦å¡«å†™çš„ä¾¿æ˜¯\nssh user@114.514.20.22\n\n\nè¾“å…¥å®Œåä¼šè®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬é€‰ç¬¬ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿æ—¥åç®¡ç†\n\nè¿™æ—¶å€™å³ä¸‹è§’ä¼šå¼¹çª—å‘Šè¯‰ä½ host addï¼ŒæˆåŠŸæ·»åŠ äº†ä¸€ä¸ªè¿œç¨‹ç»ˆç«¯\næ‰“å¼€userè·¯å¾„ä¸‹çš„.ssh/configæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢å…³äºhostçš„ä¿¡æ¯ã€‚å…¶ä¸­æˆ‘ä»¬å¯ä»¥æŠŠHostæ”¹æˆå’ŒuseråŒåï¼Œæ³¨æ„ä¸è¦ä¿®æ”¹hostnameå“¦ï¼\n\né‡å¯vscï¼Œç„¶åä½ åº”è¯¥å°±å¯ä»¥åœ¨å·¦ä¾§çœ‹åˆ°åˆšåˆšæ·»åŠ çš„linuxäº‘æœåŠ¡å™¨ã€‚æˆ‘ä»¬å³é”®è¿™ä¸ªç»ˆç«¯ï¼Œä¼šå‡ºç°ä¸€ä¸ªé€‰é¡¹å¡è¯¢é—®ä½ æ˜¯åœ¨å½“å‰vscç•Œé¢æ‰“å¼€è¯¥ç»ˆç«¯ï¼Œè¿˜æ˜¯æ–°å»ºä¸€ä¸ªvscç•Œé¢ã€‚è¿™ä¸ªæ ¹æ®è‡ªå·±å–œå¥½é€‰ä¸€ä¸ªå°±OKï¼\n\nåˆæ¬¡é“¾æ¥ä¼šè®©ä½ é€‰æ‹©è¯¥ç»ˆç«¯çš„å¹³å°ï¼Œæˆ‘ä»¬é€‰æ‹©linuxå³å¯ï¼\n\n\næ³¨æ„ï¼šè¿™é‡Œæˆ‘å‘ç°ç›´æ¥é“¾æ¥rootä¼šå‡ºç°é”™è¯¯ï¼Œå¯èƒ½æ˜¯å®‰å…¨æ€§è€ƒè™‘é˜»æ­¢äº†vscodeåœ¨è¿œç¨‹æœåŠ¡å™¨çš„ç¯å¢ƒå®‰è£…ï¼Œåæ–‡æ”¹ä¸ºæˆ‘è‡ªå·±çš„å­è´¦æˆ·è¿›è¡Œæ¼”ç¤ºï¼\n\n1.3 å…³äºä¿®æ”¹hostç°åœ¨å‘ç°äº†é—®é¢˜ï¼Œå…¶å®æ˜¯å› ä¸ºhostéœ€è¦ä¿®æ”¹æˆå’Œuserä¸€æ ·æ‰èƒ½æ­£å¸¸è®¿é—®ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\nåŒæ—¶ä¸‹é¢sshæ˜¾ç¤ºçš„æ˜¯hoståå­—ï¼Œè€Œä¸æ˜¯å…¬ç½‘ip\n\n\nè¿™é‡Œæˆ‘æ”¹æˆè‡ªå·±çš„å­è´¦æˆ·è¿›è¡Œæ¼”ç¤ºï¼\n\nè¾“å…¥å’±ä»¬è´¦æˆ·çš„å¯†ç \n\nè¿™é‡Œvscodeä¼šåœ¨ä½ çš„äº‘æœåŠ¡å™¨ä¸Šè£…ä¸€äº›ç¯å¢ƒï¼Œå½“å·¦ä¸‹è§’å‡ºç°ä½ çš„å…¬ç½‘ipï¼ˆè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯hostï¼Œä¸ºå…¬ç½‘ipæ˜¯å› ä¸ºæˆ‘æ²¡æœ‰æ”¹ï¼‰é‚£å°±ä»£è¡¨é“¾æ¥æˆåŠŸäº†ï¼\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±å·²æˆåŠŸè¿ä¸Šäº‘æœåŠ¡å™¨äº†ï¼\n\n2. å¸¸ç”¨æ’ä»¶æ¨èvscodeè¿æ¥çš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨äº‘æœåŠ¡å™¨ç¯å¢ƒé‡Œé¢å®‰è£…æ’ä»¶ï¼è¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªéå¸¸æ£’çš„æ’ä»¶ï¼š\n\nChinese (Simplified) (ç®€ä½“ä¸­æ–‡) Language Pack for Visual Studio Code\nTerminal Hereï¼ˆè¶…çº§å¥½ç”¨ï¼Œå¿…è£…ï¼ï¼ï¼‰\nC&#x2F;C++\nC&#x2F;C++ Extension Pack\n\nå¦‚æœä½ è¿˜å­¦ä¹ pythonï¼Œå¯ä»¥å®‰è£…ä¸‹é¢çš„æ’ä»¶ï¼š\n\nPython\nPylance\nPip Manager\n\nå®‰è£…è¿™äº›æ’ä»¶çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›é™„å±æ’ä»¶è¢«åŒæ—¶å®‰è£…ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç®¡å®ƒï¼Œäº¤ç»™vscè‡ªå·±å¤„ç†å°±è¡Œæ‹‰ï¼æ³¨æ„å®‰è£…çš„æ—¶å€™ä¸€å®šæ˜¯é€‰æ‹©å®‰è£…åœ¨ä½ çš„äº‘æœåŠ¡å™¨é‡Œé¢ï¼Œå¦‚æœå®‰è£…åœ¨æœ¬åœ°ï¼Œå¯¹äºäº‘æœåŠ¡å™¨æ¥è¯´æ˜¯æ²¡æœ‰ç”¨çš„å“¦~\n\n3. å¼€å¯ç»ˆç«¯Linuxæœ€å¸¸ç”¨çš„å½“ç„¶è¿˜æ˜¯ç»ˆç«¯äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨å¿«æ·é”®ctrl+shift+pæ‰“å¼€vscçš„å‘½ä»¤é€‰æ‹©ç•Œé¢ï¼Œæœç´¢ç»ˆç«¯ï¼Œé€‰æ‹©ä¸‹é¢è¿™ä¸ªè§†å›¾ï¼šåˆ‡æ¢ç»ˆç«¯\n\nå¯ä»¥çœ‹åˆ°ä¸‹é¢ä¼šå‡ºç°ä¸€ä¸ªç†Ÿæ‚‰çš„ç•Œé¢~linuxçš„å‘½ä»¤è¡Œæœ‰å•¦ï¼\n\nä½†æ˜¯ï¼Œå¦‚æœåªç”¨linuxçš„å‘½ä»¤è¡Œå¯å®Œå…¨æ²¡å¿…è¦æŠ˜è…¾vscodeï¼Œè¿™é‡Œä»‹ç»å¦‚ä½•æ›´æ–¹ä¾¿çš„ç”¨vscå¼€å‘\n4. æ‰“å¼€æ–‡ä»¶å¤¹åœ¨å·¦ä¾§æœ€ä¸Šé¢çš„åˆ†åŒºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹\n\nè¿™æ—¶å€™ï¼Œä½ ä¾¿å¯ä»¥é€‰æ‹©ä½ å¸¸ç”¨çš„å·¥ä½œæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘çš„ä»£ç éƒ½åœ¨GITæ–‡ä»¶å¤¹é‡Œé¢ï¼Œé€‰æ‹©åvscodeä¼šæ‰“å¼€å®ƒ\n\n\nè¿™é‡Œvscodeä¼šè®©ä½ åœ¨è¾“å…¥ä¸€æ¬¡linuxç”¨æˆ·çš„å¯†ç ï¼Œåæ–‡ä¼šæåˆ°å¦‚ä½•å…å¯†ç™»å½•\n\nç°åœ¨æˆ‘å·²ç»æ‰“å¼€äº†GITæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢çš„å‡ ä¸ªå­æ–‡ä»¶å¤¹ï¼Œè¿™é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„testæ–‡ä»¶å¤¹æ¥ä½œä¸ºæ¼”ç¤º\n\nvscodeéå¸¸æ£’çš„ä¸€ç‚¹æ˜¯ï¼Œä»–ä¼šå¸®ä½ ä¿å­˜ä¸Šä¸€æ¬¡æ‰“å¼€æœ¬æ–‡ä»¶å¤¹çš„å‘½ä»¤è¡Œæ“ä½œä¿¡æ¯ï¼Œä¸åƒXshellæ‰“å¼€ä¸€ä¸ªæ–°çš„ä¹‹å‰çš„å‘½ä»¤è¡Œæ“ä½œå°±çœ‹ä¸åˆ°äº†ğŸ˜‚\n\nå’±ä»¬ç›´æ¥å³é”®åˆ›å»ºä¸€ä¸ªæ–°çš„testæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªtest.cæ–‡ä»¶\n\néšä¾¿å†™ä¸€ä¸ªå–œé—»ä¹è§çš„helloä»£ç ï¼Œvscodeçš„ä»£ç è¡¥å…¨æ¯”vimçš„æ’ä»¶å¥½äº†ä¸çŸ¥é“å¤šå°‘ï¼ˆä¸ªäººæ„Ÿå—ï¼‰\n\nè¿™æ—¶å€™ä¹‹å‰å®‰è£…çš„å‡ ä¸ªæ’ä»¶å°±æ´¾ä¸Šç”¨åœºäº†ï¼C&#x2F;C++æ’ä»¶ä¼šä¸ºæˆ‘ä»¬çš„ä»£ç æä¾›é«˜äº®\n4.1 Terminal Hereæ’ä»¶è€ŒTerminal Hereè¿™ä½æ›´æ˜¯é‡é‡çº§ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„ç›´æ¥æ‰“å¼€å½“å‰ç›®å½•ä¸‹çš„å‘½ä»¤è¡Œï¼Œä¸éœ€è¦è‡ªå·±cdè¿›å…¥æ–‡ä»¶å¤¹ï¼\nè¿˜æ˜¯ç”¨ctrl+shift+pæ‰“å¼€vscçš„å‘½ä»¤é¢æ¿ï¼Œæœç´¢terminalï¼Œæ‰¾åˆ°ä¸‹é¢è¿™ä¸ªé€‰é¡¹\n\nç›´æ¥å›è½¦é€‰æ‹©å®ƒï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªtest.cæ‰€å¤„æ–‡ä»¶å¤¹ä¸‹çš„ç»ˆç«¯ï¼å½“ä½ çš„æ–‡ä»¶ç›®å½•å±‚çº§å¾ˆå¤šçš„æ—¶å€™ï¼Œè¿™èƒ½å¸®ä¸Šå¤§å¿™ï¼\n\nè¿™é‡Œç”¨gccç¼–è¯‘ä¸€ä¸‹ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼Œéå¸¸å°é¾Ÿçš„æ“ä½œ\n\nè¿™é‡Œä½ èƒ½çœ‹åˆ°vscodeçš„å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œä»–ä¼šç»™ä½ æŠŠè¿è¡Œæ­£å¸¸çš„å‘½ä»¤æ ‡è“ï¼Œè€Œè¿è¡Œä¸æ­£å¸¸çš„åˆ™æ ‡çº¢ã€‚\næ¯”å¦‚æˆ‘ä»¬åœ¨ä»£ç é‡Œé¢å†™ä¸ªbugåœ¨å°è¯•ç¼–è¯‘ï¼Œå¯ä»¥çœ‹åˆ°å‰é¢çš„å°ç‚¹å˜çº¢äº†ï¼\n\nåŒæ—¶åœ¨å³è¾¹çš„æ»šåŠ¨æ¡ä¸Šä¹Ÿèƒ½æ¸…æ¥šåœ°çœ‹åˆ°é‚£ä¸ªåœ°æ–¹çš„å‘½ä»¤æ˜¯è¿è¡Œå¤±è´¥æ ‡çº¢çš„ï¼\n\nè€ŒTerminal Hereæ’ä»¶ç‰›é€¼çš„åœ°æ–¹è¿˜ä¸æ­¢è¿™ä¸ªï¼Œå¦‚æœä½ çš„ä»£ç æ˜¯åœ¨Python-vnevçš„è™šæ‹Ÿç¯å¢ƒå·¥ä½œç›®å½•ä¸‹ï¼Œè¯¥æ’ä»¶è¿˜ä¼šè‡ªåŠ¨å¸®ä½ æ‰“å¼€è™šæ‹Ÿç¯å¢ƒï¼çœå¾—æˆ‘ä»¬è‡ªå·±æ•²è¿™ä¸€è¡Œä»£ç äº†\n\nå¦‚æœä½ ä¸çŸ¥é“vnevè™šæ‹Ÿç¯å¢ƒæ˜¯å•¥ï¼Œç®€å•è¯´ä¸€ä¸‹ï¼špythonæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡pipä¸‹è½½å®‰è£…ã€‚ä¸ºäº†é¿å…ä¸åŒçš„é¡¹ç›®ä¸­çš„åŒ…éƒ½ç›´æ¥å®‰è£…åœ¨ç”¨æˆ·ç›®å½•ä¸‹é€ æˆç¯å¢ƒæ±¡æŸ“ï¼Œä¾¿å¯ä»¥åˆ›å»ºä¸€ä¸ªvnevè™šæ‹Ÿç¯å¢ƒï¼Œåœ¨è¿™ä¸ªè™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£…åŒ…ã€‚\nåªæœ‰åœ¨è™šæ‹Ÿç¯å¢ƒå¼€å¯ï¼Œä¸”åœ¨å®ƒçš„å·¥ä½œç›®å½•ä¸‹ï¼Œæ‰å¯ä»¥è®¿é—®åˆ°è¿™ä¸ªåŒ…ï¼\n\n\n\nå’³å’³ï¼Œæ‰¯è¿œå•¦ï¼æœ‰äº†ä¸Šé¢çš„å¼•å¯¼ï¼Œæƒ³å¿…ä½ å·²ç»å¯ä»¥æ„‰å¿«çš„ç”¨vscodeåœ¨linuxç¯å¢ƒä¸Šå¼€å‘äº†ã€‚\nä¸‹é¢ä»‹ç»ä¸€ä¸‹å¦‚ä½•é€šè¿‡sshå¯†é’¥æ¥å…å¯†ç™»å½•ï¼Œä¸éœ€è¦æ¯ä¸€æ¬¡éƒ½è¾“å…¥å¯†ç \n5. sshå…å¯†ç™»å½•\nå‚è€ƒhttps://blog.csdn.net/weixin_42907822/article/details/125237307\n\nå¦‚æœä½ ä¹‹å‰é…ç½®è¿‡gitee&#x2F;githubçš„sshè¿æ¥ï¼Œé‚£ä¹ˆè‚¯å®šå¯¹ä¸‹é¢çš„æ­¥éª¤æœ‰äº›ç†Ÿæ‚‰\n\n5.1 ç”Ÿæˆsshå¯†é’¥æˆ‘ä»¬æ‰“å¼€windowsçš„cmdï¼Œè¾“å…¥ä¸‹é¢è¿™ä¸ªè¯­å¥\nssh-keygen -t rsa -b 4096\n\nå‡ºç°çš„æç¤ºä¿¡æ¯å…¨éƒ¨å›è½¦è·³è¿‡ï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œï¼\n\nç¬¬ä¸€è¡Œæ˜¯è®©ä½ å¡«ä¸€ä¸ªæ–‡ä»¶åï¼Œå¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦å¡«å†™ï¼Œä¹Ÿå¯ä»¥ä¸å¡«ç›´æ¥å›è½¦è·³è¿‡ï¼ˆå¦‚æœå›è½¦è·³è¿‡ï¼Œé»˜è®¤å°±æ˜¯åœ¨C:/ç”¨æˆ·/ç”¨æˆ·å/.sshæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆå¯†é’¥æ–‡ä»¶ï¼‰\n\néšåç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªrsaå…¬é’¥å’Œå¯†é’¥ï¼Œæˆ‘ä»¬å°†å…¶å¤åˆ¶åˆ°C:/ç”¨æˆ·/ç”¨æˆ·å/.sshæ–‡ä»¶å¤¹ä¸­ï¼Œä¹Ÿå°±æ˜¯æœ€åˆé…ç½®vscodeçš„sshé‚£ä¸ªæ–‡ä»¶å¤¹\n\néšåæˆ‘ä»¬ç”¨Xshellé‡Œé¢çš„xtfpè¿æ¥åˆ°äº‘æœåŠ¡å™¨ï¼Œå°†æœ‰.pubåç¼€çš„æ–‡ä»¶æ‹·è´åˆ°äº‘æœåŠ¡å™¨ç”¨æˆ·ç›®å½•ä¸‹çš„.sshæ–‡ä»¶å¤¹ï¼Œå¹¶å°†å…¶æ”¹åä¸ºauthorized_keysã€‚æ³¨æ„åå­—ä¸è¦æ”¹é”™äº†ã€‚\n\n\nè®¾ç½®.sshæ–‡ä»¶æƒé™ï½/.ssh\n\nchmod 700 ~/.ssh\n\n\nè®¾ç½®authorized_keysæ–‡ä»¶æƒé™\n\nchmod 600 ~/.ssh/authorized_keys\n\nä¿®æ”¹å®Œåå¯ä»¥ç”¨llå‘½ä»¤çœ‹çœ‹æƒé™æ˜¯å¦æ­£å¸¸ä¿®æ”¹æˆåŠŸï¼Œ700å¯¹åº”çš„æ˜¯ dxrw-------ï¼Œ600å¯¹åº”çš„æ˜¯-rw--------ï¼›\nè¿˜è¦æ³¨æ„å½“å‰æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·æ˜¯è°ï¼Œå¿…é¡»è¦æ˜¯å½“å‰ç”¨æˆ·ï¼Œæ‰èƒ½æ­£å¸¸sshè¿æ¥ï¼å¦åˆ™ä¼šæç¤ºæ— æƒé™ï¼ï¼ˆæœ‰çš„æ—¶å€™ftpä¼ ä¸Šå»çš„æ–‡ä»¶æ˜¯rootç”¨æˆ·çš„ï¼Œéœ€è¦æ”¹æˆå½“å‰ç”¨æˆ·çš„æƒé™æ‰èƒ½è¢«æ­£å¸¸ä½¿ç”¨ã€‚ï¼‰\n5.2 ä¿®æ”¹rootä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆæ…é‡)å‹æƒ…æç¤ºï¼šå½“ä½ ä¿®æ”¹ä»»ä½•linuxç¯å¢ƒä¸‹çš„æ–‡ä»¶ä¹‹å‰ï¼Œéƒ½è¦è®°å¾—cpä¸€ä»½å‡ºæ¥ä½œä¸ºå¤‡ä»½ï¼\nè¿›å…¥ä½ äº‘æœåŠ¡å™¨çš„rootç”¨æˆ·ä¸‹ï¼Œä¿®æ”¹ä¸‹é¢çš„æ–‡ä»¶\nvim /etc/ssh/sshd_config \n\næŠŠ PubkeyAuthenticationå‰çš„ # å·å»æ‰ï¼Œè¿™æ ·å…¬é’¥éªŒè¯æ‰ç”Ÿæ•ˆã€‚\n\nä¿®æ”¹åä¿å­˜é€€å‡º\nç”¨ä¸‹é¢çš„è¯­å¥é‡å¯sshæœåŠ¡\nsystemctl restart sshd.service \n\nå¦‚æœæ— æ•ˆï¼Œåˆ™å°è¯•ç›´æ¥é‡å¯äº‘æœåŠ¡å™¨\nreboot\n\n5.3 ä¿®æ”¹æœ¬æœºssh configæ–‡ä»¶éšåæˆ‘ä»¬å†æ¬¡æ‰“å¼€æœ¬æœº(å°±ä½ ç°åœ¨ç”¨çš„windowsç”µè„‘)C:/ç”¨æˆ·/ç”¨æˆ·å/.sshè·¯å¾„ä¸‹çš„configæ–‡ä»¶ï¼Œæ³¨æ„æ˜¯æœ¬æœºä¸æ˜¯äº‘æœåŠ¡å™¨ï¼\nåœ¨åŸæœ¬çš„é…ç½®ä¿¡æ¯åé¢è¿½åŠ ä¸‹é¢ä¸¤ä¸ªï¼Œå…¶ä¸­IdentityFileæŒ‡ä»£çš„æ˜¯ä½ åˆšåˆšç”Ÿæˆçš„é‚£ä¸ªå¯†é’¥çš„æ–‡ä»¶åï¼Œè¯·æ ¹æ®ä½ çš„å®é™…æ–‡ä»¶åè¿›è¡Œå¡«å†™ï¼\nPreferredAuthentications publickeyIdentityFile ~/.ssh/id_linux\n\nå¦‚æœä½ çš„ä¸»æœº ssh ç«¯å£ç«¯å£ä¸æ˜¯ 22ï¼Œè¿™é‡Œè¿˜å¯ä»¥ç»§ç»­æ·»åŠ ä¸€ä¸ª Port é€‰é¡¹é€‰é¡¹æ¥è®¾ç½® ssh çš„ç«¯å£ã€‚\n\næœ€ç»ˆçš„å•ä¸ªsshé…ç½®é¡¹åº”è¯¥å¦‚ä¸‹æ‰€ç¤º\nHost å…¬ç½‘IP  HostName å…¬ç½‘IP  User ç”¨æˆ·å  PreferredAuthentications publickey  IdentityFile ~/.ssh/id_linux\n\nå‰é¢åˆ›å»ºsshkeyçš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå¯¹è¯æ¡†æ˜¯è®©ä½ å¡«å†™ä¸€ä¸ªåå­—ï¼ˆå¦‚æœè·³è¿‡åˆ™ä¼šé‡‡ç”¨é»˜è®¤åå­—id_rsaï¼‰ã€‚åœ¨sshå¤šç»ˆç«¯é…ç½®çš„æ—¶å€™ï¼Œåå­—å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ç®¡ç†ä¸åŒçš„sshå¯†é’¥ã€‚\nå¦‚ä¸‹æ˜¯æˆ‘çš„é…ç½®ï¼ŒLinuxæœåŠ¡å™¨å’Œgitee&#x2F;githubç”¨çš„æ˜¯ä¸åŒçš„sshå¯†é’¥ï¼Œè¿™æ ·èƒ½é¿å…å•ä¸ªå¯†é’¥æ³„éœ²çš„æ—¶å€™ç›´æ¥è¢«çˆ†ç ´æ‰€æœ‰æœåŠ¡ã€‚\n\nè¿™é‡Œé…ç½®å¥½ä¹‹åï¼Œä½ åº”è¯¥å°±å¯ä»¥å…å¯†ç™»å½•äº‘æœåŠ¡å™¨è€Œä¸éœ€è¦è¾“å…¥å¯†ç äº†ï¼\n\nè¿™ä¸€æ­¥å¯èƒ½ä¼šå‡ºç°å¾ˆå¤šé—®é¢˜ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶æŸ¥æ›´å¤šèµ„æ–™ä½œä¸ºè¡¥å……ã€‚ä¸è¦åœ¨è¯„è®ºé—®æˆ‘ï¼Œå› ä¸ºæˆ‘å¤§æ¦‚ç‡ä¹Ÿä¸ä¼šğŸ˜¥å½“åˆé…ç½®çš„æ—¶å€™ä¹ŸæŠ˜è…¾äº†ä¸€ä¼šï¼Œä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯æ€ä¹ˆæå®šçš„ï¼ˆçœŸçš„ä¸çŸ¥é“ï¼‰\nç¬¬ä¸€æ¬¡é…ç½®å¥½sshåå¯èƒ½ä¼šè¿ä¸ä¸Šï¼Œéœ€è¦é‡å¯vscodeå†è¯•è¯•ï¼\nç»“è¯­ä¸çŸ¥é“è¿™ç¯‡åšå®¢æœ‰æ²¡æœ‰å¸®åˆ°ä½ å‘¢ï¼Ÿ\nå¦‚æœä½ æ ¹æ®æœ¬æ•™ç¨‹æˆåŠŸé…ç½®å¥½äº†vscodeï¼Œè¿˜è¯·åœ¨ä¸‹é¢è¯„è®ºè¯´ä¸€å£°å“¦ï¼\nä¸‡åˆ†æ„Ÿè°¢ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","vscode"]},{"title":"ã€Linuxã€‘ä¿®æ”¹linuxä¸‹çš„æ—¶åŒºå’Œç³»ç»Ÿæ—¶é—´","url":"/posts/809108065/","content":"ç”¨é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹linuxç³»ç»Ÿä¸‹çš„æ—¶åŒºï¼ˆæ‰€ç”¨ç³»ç»Ÿ CentOS8ï¼‰\n\n\n1.é—®é¢˜æ¥æºåœ¨linuxä¸Šä½¿ç”¨pythonçš„loggingæ¨¡å—çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æ¨¡å—é‡Œé¢çš„%(asctime)sæ‰“å°çš„æ—¶é—´å¹¶éä¸œå…«åŒºçš„æ—¶é—´ï¼Œè€Œæ˜¯æ ¼æ—å°¼æ²»æ—¶é—´ï¼Œæ¯”ä¸œå…«åŒºçš„æ—¶é—´å°‘äº†8å°æ—¶\nå¯¹äºæ—¥å¿—æ¥è¯´ï¼Œè¿™æ€ä¹ˆè¡Œï¼Ÿæ€»ä¸èƒ½æ¯æ¬¡çœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œè‡ªå·±æ‰‹åŠ¨ç»™æ—¶é—´åŠ 8å°æ—¶å§ï¼é‚£æ ·å¯¹debugæ¥è¯´å¯ä¸æ˜¯ä»€ä¹ˆæ–¹ä¾¿äº‹ï¼\n2.è§£å†³ç™¾åº¦äº†ä¸€ä¸‹åï¼Œå‘ç°æ˜¯æˆ‘ç³»ç»Ÿçš„æ—¶åŒºé—®é¢˜ã€‚è¿™ä¸ªCentosç³»ç»Ÿæ˜¯ç”¨dockerå®‰è£…çš„ï¼Œå†…éƒ¨çš„æ—¶åŒºæ²¡æœ‰æ­£å¸¸è®¾ç½®\ndate\n\né€šè¿‡dateå‘½ä»¤å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿå½“å‰çš„æ—¶é—´\nSat Mar  4 01:29:59 UTC 2023\n\nä¼šå‘ç°æ˜¯3æœˆ4æ—¥çš„å‡Œæ™¨1ç‚¹ï¼Œä½†å®é™…ä¸Šæˆ‘æ˜¯åœ¨ä¸Šåˆ9ç‚¹å†™ä¸‹çš„è¿™ç¯‡åšå®¢\n\nè¿™å°±éœ€è¦æˆ‘ä»¬ä¿®æ”¹æ—¶åŒºäº†ï¼\n\nåˆšå¼€å§‹ï¼Œæˆ‘å°è¯•ç”¨tzselectå‘½ä»¤è¿›è¡Œæ—¶åŒºçš„é€‰æ‹©ï¼Œå†é€‰æ‹©äº†ä¸Šæµ·æ—¶åŒºåï¼Œç³»ç»Ÿçš„æ—¶é—´è¿˜æ˜¯æœ‰é—®é¢˜ã€‚ç„¶åå‘ç°ï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶é…ç½®ï¼Œæ‰èƒ½è®©æ—¶é—´ç”Ÿæ•ˆ\n/etc/timezone # æ—¶åŒºçš„é…ç½®/etc/localtime # æ—¶é—´/usr/share/zoneinfo/Asia #è¿™é‡Œè¾¹æ”¾ç€äºšæ´²ä¸»è¦åŸå¸‚çš„æ—¶é—´\n\nè€Œæˆ‘çš„ç³»ç»Ÿä¸­ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å‹æ ¹ä¸å­˜åœ¨ï¼\nè¦ç”¨ä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆrootä¸‹æ‰§è¡Œï¼‰\necho &quot;Asia/Shanghai&quot; &gt; /etc/timezone\n\nrm -rf /etc/localtimeln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n\nä¿®æ”¹å®Œæ¯•ï¼Œå†æ¬¡æ‰§è¡Œdateå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°æ—¶é—´å·²ç»æ­£å¸¸äº†\nSat Mar  4 09:31:33 CST 2023\n\npythonçš„loggingæ¨¡å—ä¸­æ‰“å°çš„æ—¶é—´ä¹Ÿæ­£å¸¸äº†\n[23-03-04 09:31:39] DEBUG:log.py:debug:9 | test in main[23-03-04 09:31:39] ERROR:log.py:exception:24 | Exception occurredTraceback (most recent call last):  File &quot;/home/kook/code/py-test/log.py&quot;, line 32, in test    a = 10/0ZeroDivisionError: division by zero\n\n3.python-loggingä¼˜åŒ–è™½ç„¶å¦‚æ­¤ï¼Œä½†loggingæœ¬èº«å…¶å®æ˜¯å¯ä»¥è®¾ç½®æ—¶åŒºçš„ï¼Œæä¾›ä¸€ä»½ç®€å•çš„æ¨¡æ¿ä»£ç ;\nåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œç”¨äº†beijingè¿™ä¸ªå‡½æ•°æ¥è·å–ä¸œå…«åŒºçš„æ—¶é—´ï¼Œè¿™æ ·è¿™ä»½ä»£ç åœ¨ä»»ä½•ç³»ç»Ÿä¸Šæ‰§è¡Œï¼Œéƒ½å°†ä¼šæ‰“å°ä¸œå…«åŒºçš„æ—¶é—´äº†ã€‚\nimport loggingfrom datetime import datetime,timezone,timedeltaLOGGER_NAME = &quot;bot-log&quot; # æ—¥å¿—å¯¹è±¡åå­—ï¼Œè¿™ä¸ªæ²¡å•¥ç”¨LOGGER_FILE = &quot;bot.log&quot; # å¦‚æœæƒ³ä¿®æ”¹logæ–‡ä»¶çš„åå­—å’Œè·¯å¾„ï¼Œä¿®æ”¹æ­¤å˜é‡&quot;&quot;&quot;æ—¥å¿—æ–‡ä»¶è·¯å¾„&quot;&quot;&quot;def beijing(sec, what):    &quot;&quot;&quot;æ—¥å¿—è¿”å›åŒ—äº¬æ—¶é—´çš„å¤„ç†&quot;&quot;&quot;    utc_dt = datetime.now(timezone.utc) # è·å–å½“å‰æ—¶é—´    beijing_time = utc_dt.astimezone(timezone(timedelta(hours=8))) # è½¬æ¢ä¸ºåŒ—äº¬æ—¶é—´    return beijing_time.timetuple()# æ—¥å¿—æ—¶é—´æ”¹ä¸ºåŒ—äº¬æ—¶é—´logging.Formatter.converter = beijing # type:ignore# åªæ‰“å°infoä»¥ä¸Šçš„æ—¥å¿—ï¼ˆdebugä½äºinfoï¼‰logging.basicConfig(level=logging.INFO,                    format=&quot;[%(asctime)s] %(levelname)s:%(filename)s:%(funcName)s:%(lineno)d | %(message)s&quot;,                    datefmt=&quot;%y-%m-%d %H:%M:%S&quot;)# è·å–ä¸€ä¸ªloggerå¯¹è±¡_log = logging.getLogger(LOGGER_NAME)&quot;&quot;&quot;è‡ªå®šä¹‰çš„loggerå¯¹è±¡&quot;&quot;&quot;# å®ä¾‹åŒ–æ§åˆ¶å°handlerå’Œæ–‡ä»¶handlerï¼ŒåŒæ—¶è¾“å‡ºåˆ°æ§åˆ¶å°å’Œæ–‡ä»¶# cmd_handler = logging.StreamHandler() # é»˜è®¤è®¾ç½®é‡Œé¢ï¼Œå°±ä¼šå¾€æ§åˆ¶å°æ‰“å°ä¿¡æ¯;è‡ªå·±åˆåŠ ä¸€ä¸ªï¼Œå¯¼è‡´æ‰“å°ä¿©æ¬¡file_handler = logging.FileHandler(LOGGER_FILE, mode=&quot;a&quot;, encoding=&quot;utf-8&quot;)fmt = logging.Formatter(fmt=&quot;[%(asctime)s] %(levelname)s:%(filename)s:%(funcName)s:%(lineno)d | %(message)s&quot;,                    datefmt=&quot;%y-%m-%d %H:%M:%S&quot;)file_handler.setFormatter(fmt)_log.addHandler(file_handler)\n\né’ˆå¯¹replitè¿™ç±»ä¸æ”¯æŒè‡ªå®šä¹‰æ—¶åŒºçš„å¹³å°ï¼Œè¿™æ ·ä¹Ÿæ›´æ–¹ä¾¿ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘manä»€ä¹ˆéƒ½æœä¸äº†ï¼ŒNo manual entry for xxxçš„è§£å†³æ–¹æ¡ˆ","url":"/posts/1013893765/","content":"manä»€ä¹ˆéƒ½æœä¸äº†ï¼ŒNo manual entry for xxxçš„è§£å†³æ–¹æ¡ˆ\n\n\n\nç³»ç»Ÿ CentOS 7.6\n\n1.é—®é¢˜æè¿°ä»Šå¤©æŸ¥æ‰‹å†Œçš„æ—¶å€™ï¼Œå‘ç°manä»€ä¹ˆéƒ½æŸ¥ä¸äº†ã€‚ä¸ç®¡æ˜¯ç³»ç»Ÿæ¥å£è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½æ˜¾ç¤ºæ²¡æœ‰å…¥å£æ–‡æ¡£ï¼ˆNo manual entry forï¼‰\n[muxue@bt-7274:~/git]$ man pthread_createNo manual entry for pthread_create[muxue@bt-7274:~/git]$ man bindNo manual entry for bind[muxue@bt-7274:~/git]$ man manNo manual entry for man[muxue@bt-7274:~/git]$ man lsNo manual entry for ls\n\nè¿™å¯å¾—éš¾å—äº†ï¼Œè¦çŸ¥é“ï¼Œæˆ‘çš„åšå®¢é‡Œé¢å…³äºæ¥å£å®šä¹‰çš„è¯´æ˜ï¼Œå¾ˆå¤šéƒ½æ˜¯ä»manæ‰‹å†Œé‡Œé¢å¤åˆ¶å‡ºæ¥çš„ã€‚\nåœ¨rootä¸‹å°è¯•äº†å®‰è£…ï¼Œå¹¶yum updateæ›´æ–°ä¹‹åï¼Œè¿˜æ˜¯æ— æ³•ä½¿ç”¨\n\näºæ˜¯æˆ‘å°±å»stackoverflowæäº†ä¸ªé—®é¢˜ ã€ç‚¹æˆ‘ã€‘ ç„¶ååˆè‡ªå·±è§£å†³äº†è¿™ä¸ªé—®é¢˜ğŸ˜‚\n2.è§£å†³æ„Ÿè°¢kooké¢‘é“çš„å¤§ä½¬ï¼Œä¸€çœ¼å°±çœ‹å‡ºæ¥è¿™ä¸ªæ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜\n2.1 é‡è£…manå…ˆè¯•è¯•reinstallé‡è£…\nyum reinstall man-pages\n\n\n2.2 æŸ¥çœ‹ç¯å¢ƒå˜é‡å®‰è£…å®Œæ¯•ï¼ŒæŸ¥çœ‹MANPATHçš„ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æŒ‡å‘çš„æ˜¯devtoolset-11é‡Œé¢çš„man\n# echo $MANPATH/opt/rh/devtoolset-11/root/usr/share/man\n\nç½ªé­ç¥¸é¦–å°±æ‰¾åˆ°äº†ï¼å‡ å¤©å‰ï¼Œæˆ‘å‡çº§äº†äº‘æœåŠ¡å™¨çš„gccç‰ˆæœ¬ã€æ•™ç¨‹ã€‘å½“æ—¶å®‰è£…çš„å°±æ˜¯devtoolset-11ï¼›\næ‰€ä»¥ï¼Œæƒ…å†µå°±æ˜¯å‡çº§çš„è¿‡ç¨‹ä¸­ï¼Œmançš„ç¯å¢ƒå˜é‡è¢«ä¿®æ”¹äº†ï¼\næˆ‘ä»¬è¦åšçš„å°±æ˜¯ç»™ä»–æ”¹å›æ¥\n2.3 ä¿®æ”¹æˆæ­£ç¡®çš„ç¯å¢ƒå˜é‡å…ˆç”¨whereis manæ‰¾ä¸€ä¸‹mançš„å®‰è£…è·¯å¾„ï¼Œä¸€èˆ¬éƒ½æ˜¯/usr/share/man\n# whereis manman: /usr/bin/man /usr/share/man /usr/share/man/man7/man.7.gz /usr/share/man/man1/man.1.gz /usr/share/man/man1p/man.1p.gz\n\nå°†/usr/share/manå¯¼å…¥åˆ°ç¯å¢ƒå˜é‡\nexport MANPATH=/usr/share/man\n\næ­¤æ—¶å†manï¼Œå‘ç°å·²ç»æ´»è¿‡æ¥äº†\nman man\n\n\n2.4 æ°¸ä¹…ç”Ÿæ•ˆexport MANPATH=/usr/share/manåªæ˜¯æš‚æ—¶ä¿®æ”¹å½“å‰bashçš„ç¯å¢ƒå˜é‡ï¼Œè¦æƒ³å®Œå…¨ç”Ÿæ•ˆï¼Œéœ€è¦ä¿®æ”¹bashçš„é…ç½®æ–‡ä»¶\næ³¨æ„ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œä¸€å®šè¦cpè¿›è¡Œå¤‡ä»½ï¼Œé¿å…ä¿®æ”¹boomï¼\n\nç”¨æˆ·ç›®å½•ä¸‹çš„.bashrc\n\nåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å‘½ä»¤\nMANPATH=/usr/share/man\n\nç„¶åå†sourceä½¿å…¶ç”Ÿæ•ˆ\nsource .bashrc\n\næ­¤æ—¶ï¼Œå½“å‰ç”¨æˆ·çš„bashå°±èƒ½æ­£å¸¸ä½¿ç”¨manäº†ï¼Œä½†æ˜¯å…¶ä»–ç”¨æˆ·è¿˜æ˜¯ä¸è¡Œã€‚è¿™å°±éœ€è¦æˆ‘ä»¬ä¿®æ”¹ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶\n\nç³»ç»Ÿé…ç½®æ–‡ä»¶/etc/bashrc\n\næ³¨æ„ï¼Œç³»ç»Ÿçš„é…ç½®æ–‡ä»¶éœ€è¦è¾“å…¥çš„æ˜¯å‘½ä»¤ã€‚åœ¨æ–°å»ºbashçš„æ—¶å€™ä¼šæ‰§è¡Œã€‚å¦‚ä¸‹\nexport MANPATH=/usr/share/man\n\nåŒæ ·çš„ï¼Œsourceä½¿å…¶ç”Ÿæ•ˆ\nsource /etc/bashrc\n\nç°åœ¨å°±OKäº†ï¼æ­¤æ—¶å…¶ä»–ç”¨æˆ·ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨manäº†\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘è®°å½•vscodeè¿linuxé‡åˆ°çš„å¥‡æ€ªæŠ¥é”™ï¼Œé™„å¸¦è§£å†³åŠæ³•","url":"/posts/643136798/","content":"ä»Šå¤©vscodeè¿ä¸ŠLinuxå‡†å¤‡å†™pythonä»£ç çš„æ—¶å€™é‡åˆ°äº†ä¸‹é¢çš„è¿™ä¸ªé—®é¢˜\n\nå¥½å®¶ä¼™ï¼Œåªæ˜¯ç”¨ä¸ªpythonè™šæ‹Ÿç¯å¢ƒè€Œå·²ï¼Œæ€ä¹ˆlså‘½ä»¤éƒ½ç”¨ä¸äº†äº†ï¼Ÿ\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œè¯´æ˜¯æœ¬åœ°ä¸»æœºç¼ºå°‘grepå‘½ä»¤\nç›´æ¥ç”¨sshè¿è¯•äº†è¯•ï¼Œå‘½ä»¤å…¨éƒ½æ˜¯å¥½çš„ã€‚\næ‰€ä»¥è§£å†³åŠæ³•å°±å¾ˆæ˜äº†äº†ï¼šæŠŠç”¨æˆ·å®¶ç›®å½•ä¸‹çš„.vscode-serveræ–‡ä»¶å¤¹ç»™åˆ é™¤äº†ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯vscodeä½¿ç”¨remote-sshæ’ä»¶è¿ä¸Šlinuxçš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»ºçš„é…ç½®æ–‡ä»¶å¤¹ã€‚\nåˆ é™¤äº†ä¹‹åéœ€è¦é‡æ–°è¿vscodeå¹¶é‡æ–°å®‰è£…æ’ä»¶ã€‚é—®é¢˜ä¸å¤§ï¼Œè§£å†³äº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘centos8å®‰è£…cmake3.27.4","url":"/posts/343476194/","content":"ç¬¬ä¸€æ­¥ï¼Œå»å®˜ç½‘ä¸‹å®‰è£…åŒ…ï¼Œä¸€å®šä¸è¦ä¸‹é”™äº†\n\nä¸‹å¥½äº†ä¹‹åï¼Œç”¨ftpè½¯ä»¶ä¼ åˆ°äº‘æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨wgetç›´æ¥ä¸‹è½½\nwget https://github.com/Kitware/CMake/releases/download/v3.27.4/cmake-3.27.4.tar.gz\n\næˆ‘ç”¨çš„æ˜¯centos8ç³»ç»Ÿï¼Œå®‰è£…ä¹‹å‰å…ˆå‡†å¤‡å¥½è¿™äº›ä¾èµ–é¡¹\nyum install -y gcc gcc-c++ make automakeyum install -y openssl  openssl-devel\n\næŠŠä¸‹è½½å¥½çš„å®‰è£…åŒ…ä¼ ä¸Šå»åï¼Œè§£å‹ï¼ˆåœ¨rootç”¨æˆ·ä¸‹æ“ä½œï¼‰\ntar -zxvf cmake-3.27.4.tar.gz \n\nè§£å‹å®Œæ¯•åè¿›å…¥æ–‡ä»¶å¤¹\ncd cmake-3.27.4\n\næ‰§è¡Œå‘½ä»¤\n./bootstrap\n\nè€å¿ƒç­‰å€™å®Œæˆåï¼Œä¾æ¬¡è¿è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤\ngmakegmake install\n\næœ€ç»ˆåˆ¤æ–­æ˜¯å¦å®‰è£…æˆåŠŸ\ncmake --version\n\nå‡ºç°å¦‚ä¸‹ä¿¡æ¯å°±æ˜¯æå®šäº†\n# cmake --versioncmake version 3.27.4CMake suite maintained and supported by Kitware (kitware.com/cmake).\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘centos8å®‰è£…bison3.8","url":"/posts/1067381808/","content":"centos8å®‰è£…bison3.8çš„æ•™ç¨‹ï¼Œæ„Ÿè§‰è¿™ä¸ªè½¯ä»¶åŒ…å¾ˆå°ä¼—å•Šï¼Œç™¾åº¦æ‰¾ä¸åˆ°å®‰è£…æ•™ç¨‹ï¼Œæœ€ç»ˆè¿˜æ˜¯åœ¨èµ·è„šæ—®æ—¯é‡Œé¢ç¿»å‡ºæ¥äº†å¾ˆä¹…ä¹‹å‰çš„æ–‡æ¡£ï¼Œå¥½åœ¨æ²¡æœ‰è¿‡æ—¶ï¼›\n\n\n\nhttps://linux.cn/lfs/LFS-BOOK-7.7-systemd/chapter06/bison.html\n\n\nè™½ç„¶centos8ä¸­ä½ å¯ä»¥ä½¿ç”¨yumç›´æ¥å®‰è£…ï¼Œä½†æ˜¯å“ªä¸ªå®‰è£…çš„ç‰ˆæœ¬å¤ªä½äº†ï¼Œè¾¾ä¸åˆ°å¦‚ä»Šçš„éœ€æ±‚\nyum install -y bison\n\næˆ‘è¿™è¾¹ç›´æ¥ç”¨yumå®‰è£…çš„æ˜¯3.0.4çš„ç‰ˆæœ¬ï¼Œå·²ç»æ˜¯2015å¹´çš„ä¸œè¥¿äº†ï¼Œæœ€æ–°çš„ç‰ˆæœ¬å·²ç»åˆ°3.8äº†ï¼Œè€Œä¸”æˆ‘æ­£åœ¨ä½¿ç”¨çš„æ–°é¡¹ç›®miniobå°±è¦æ±‚æ›´é«˜çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥è€ç‰ˆæœ¬è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼›\nbison (GNU Bison) 3.0.4Written by Robert Corbett and Richard Stallman.Copyright (C) 2015 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nå…ˆç”¨yumæŠŠå®‰è£…å¥½äº†çš„åˆ æ‰\nyum remove bison\n\n\næˆ‘çœ‹æœ‰çš„æ–‡ç« è¯´éœ€è¦å…ˆå®‰è£…å‰ç½®ä¾èµ–é¡¹flexï¼Œè¿™é‡Œå¸¦ä¸Šå§ã€‚å› ä¸ºæˆ‘çš„ç³»ç»Ÿé‡Œé¢ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å°±å·²ç»å®‰è£…å¥½äº†è¿™ä¸ªä¸œè¥¿äº†\nyum install flex\n\nå»å®˜ç½‘ http://ftp.gnu.org/gnu/bison/ ä¸‹è½½æœ€æ–°çš„å‹ç¼©åŒ…\nwget http://ftp.gnu.org/gnu/bison/bison-3.8.tar.gz\n\nè§£å‹å¹¶è¿›å…¥æ–‡ä»¶å¤¹\ntar -zxvf bison-3.8.tar.gzcd bison-3.8\n\né…ç½®å®‰è£…è·¯å¾„ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†/usr/localè¿™ä¸ªç›®å½•ï¼Œå¦‚æœä½ æŸ¥çœ‹è¿‡å®‰è£…åçš„bisonï¼Œä½ ä¼šå‘ç°å®ƒçš„å®‰è£…åŒ…çš„é€»è¾‘æ˜¯å’Œ/usr/localç›®å½•ä¸€è‡´çš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±æƒ³è¦çš„ç›®å½•\n# ls /usr/local/bin  doc  etc  games  include  lib  lib64  libexec  openssl-1.1.1  sbin  share  src\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤é…ç½®å®‰è£…è·¯å¾„ä¸º/usr/local\n./configure -prefix=/usr/local/\n\nç›®å½•é…ç½®å¥½äº†ä¹‹åï¼Œmakeå®‰è£…\nmake install\n\n\nå¦‚æœè¦å¸è½½ï¼Œç”¨make uninstall\n\nå®‰è£…å¥½äº†ä¹‹åæ‰§è¡Œbison --versionï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡º\n-bash: /usr/bin/bison: No such file or directory\n\nè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨/usr/localé‡Œé¢å®‰è£…çš„ä¸œè¥¿æ²¡æœ‰åœ¨pathä¸­ï¼Œæ²¡æœ‰åŠæ³•ç›´æ¥æ‰§è¡Œï¼Œéœ€è¦æˆ‘ä»¬å°†å…¶è½¯é“¾æ¥åˆ°/usr/biné‡Œé¢ï¼›\nå¦‚æœä½ çš„å®‰è£…æ­£ç¡®äº†ï¼Œåº”è¯¥å¯ä»¥åœ¨/usr/local/biné‡Œé¢æ‰¾åˆ°bison; å¦‚æœä½ å®‰è£…çš„è·¯å¾„ä¸åŒï¼Œé‚£å°±å»ä½ å®‰è£…è·¯å¾„ä¸‹æ‰¾bisonçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼›\n# ls /usr/local/bin2to3-3.10  bison  cmake  cpack  ctest  docker-compose  idle3.10  pip3.10  pydoc3.10  python3.10  python3.10-config  yacc\n\nå°†å…¶è½¯è¿æ¥ä¸€ä¸‹å°±okäº†\n# ln -s /usr/local/bin/bison /usr/bin/bison# ls /usr/bin/bison/usr/bin/bison\n\nå†æ¬¡æ£€æŸ¥ç‰ˆæœ¬ï¼Œå®‰è£…3.8æˆåŠŸï¼\n# bison --versionbison (GNU Bison) 3.8Written by Robert Corbett and Richard Stallman.Copyright (C) 2021 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘valgrindæ£€æµ‹ç¨‹åºå†…å­˜æ³„æ¼","url":"/posts/565285228/","content":"valgrindæ˜¯ä¸€ä¸ªç”¨äºæ£€æµ‹debugå†…å­˜æ³„æ¼çš„å‘½ä»¤è¡Œå·¥å…·\nå®‰è£…éµå¾ªå¦‚ä¸‹å‘½ä»¤ä¸‹è½½wget https://sourceware.org/pub/valgrind/valgrind-3.21.0.tar.bz2\nè§£å‹tar -xf valgrind-3.21.0.tar.bz2cd valgrind-3.21.0\n\né…ç½®&#x2F;å®‰è£…ï¼Œéœ€è¦æœ‰rootæƒé™sudo ./configuresudo makesudo make install\n\nä½¿ç”¨mencheckmencheckæ˜¯valgrindçš„ä¸€ä¸ªæ¨¡å—ï¼Œå…¶è¿˜æ‹¥æœ‰å…¶ä»–åŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨è¿™é‡Œä¸åšä½¿ç”¨Â â€“tool&#x3D;memcheckÂ  é€‰æ‹©memcheckå·¥å…·Â â€“log-file&#x3D;log.txtÂ  æŒ‡å®šæ—¥å¿—è¾“å‡ºæ–‡ä»¶åˆ°Â log.txtÂ Â â€“leak-check&#x3D;no|summary|fullÂ  æŒ‡å®šè¾“å‡ºæ—¥å¿—çš„è¯¦ç»†ç¨‹åº¦\nåŸºæœ¬ä½¿ç”¨å‘½ä»¤çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œæœ€åçš„Â ./testÂ æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶\nvalgrind --tool=memcheck --log-file=log.txt --leak-check=full ./test\n\nè¯´æ˜memcheckæ¨¡å—æ£€æµ‹çš„èŒƒå›´åŒ…æ‹¬ \n\nä½¿ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜\nä½¿ç”¨å·²ç»è¢«é‡Šæ”¾çš„å†…å­˜\nä½¿ç”¨è¶…å‡ºmallocåˆ†é…ç©ºé—´çš„å†…å­˜\nå¯¹å †æ ˆçš„éæ³•è®¿é—®\næ˜¯å¦æœ‰é‡Šæ”¾ç”³è¯·çš„ç©ºé—´\nmemcpyä¸­srcå’Œdstçš„é‡å ï¼ˆå‚æ•°çš„å†…å­˜ç©ºé—´æœ‰é‡åˆéƒ¨åˆ†ï¼‰\n\næ³¨æ„ï¼Œå¯¹äºæŸäº›newå’Œmallocå‡ºæ¥çš„å¸¸é©»å¯¹è±¡ï¼ˆæ¯”å¦‚å…¨å±€çš„æŸä¸ªå¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼ä¸­å°±ä¼šé‡åˆ°ï¼‰å¹¶ä¸èƒ½ç®—ä½œå†…å­˜æ³„æ¼ï¼Œå› ä¸ºå®ƒæ˜¯éœ€è¦è¢«ä½¿ç”¨çš„ã€‚\næµ‹è¯•æ•´äº†ä¸ªæœ€ç®€å•çš„ä»£ç \nÂ \n#include &lt;cstddef&gt;#include &lt;cstdlib&gt;#include &lt;iostream&gt;#include &lt;memory&gt;#include &lt;vector&gt;using namespace std;â€‹void test_leak()&#123;    int *p = (int *)malloc(sizeof(int));    *p = 1;    return;&#125;â€‹int main()&#123;    int *p1 = (int *)malloc(sizeof(int));    *p1 = 2;â€‹    int *p2 = (int *)malloc(sizeof(int));    *p2 = 3;    // åªææ„ä¸€ä¸ªï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ£€æŸ¥å‡ºæŠ¥é”™    free(p2);    test_leak();// åªæœ‰è°ƒç”¨çš„æ¨¡å—å‡ºç°å†…å­˜æ³„æ¼æ‰èƒ½è¢«æ£€æµ‹åˆ°    // å¦‚æœä¸è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œåˆ™ä¸ä¼šæ£€æµ‹åˆ°è¿™é‡Œçš„é—®é¢˜    // å› ä¸ºvalgrindæ˜¯æ“ä½œç›‘çœ‹å¯æ‰§è¡Œæ–‡ä»¶çš„ï¼Œå¹¶ä¸æ˜¯æ¥æ‰«æä»£ç çš„â€‹    return 0;&#125;\n\nè¿™é‡Œé¢æœ‰3ä¸ªmallocï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªæ˜¯æ²¡æœ‰freeçš„ï¼Œé‚£ä¹ˆç”¨valgrindå¯ä»¥æ£€æµ‹å‡ºæ¥å—ï¼Ÿ\nç­”æ¡ˆæ˜¯è‚¯å®šçš„:\n==24089== Memcheck, a memory error detector==24089== Copyright (C) 2002-2022, and GNU GPL&#x27;d, by Julian Seward et al.==24089== Using Valgrind-3.21.0 and LibVEX; rerun with -h for copyright info==24089== Command: ./test==24089== Parent PID: 24056==24089== ==24089== ==24089== HEAP SUMMARY:==24089==     in use at exit: 8 bytes in 2 blocks==24089==   total heap usage: 4 allocs, 2 frees, 72,716 bytes allocated==24089== ==24089== 4 bytes in 1 blocks are definitely lost in loss record 1 of 2==24089==    at 0x484880F: malloc (vg_replace_malloc.c:431)==24089==    by 0x1091F8: main (in /home/lyk/ub-vm/test)==24089== ==24089== 4 bytes in 1 blocks are definitely lost in loss record 2 of 2==24089==    at 0x484880F: malloc (vg_replace_malloc.c:431)==24089==    by 0x1091C1: test_leak() (in /home/lyk/ub-vm/test)==24089==    by 0x10922C: main (in /home/lyk/ub-vm/test)==24089== ==24089== LEAK SUMMARY:==24089==    definitely lost: 8 bytes in 2 blocks==24089==    indirectly lost: 0 bytes in 0 blocks==24089==      possibly lost: 0 bytes in 0 blocks==24089==    still reachable: 0 bytes in 0 blocks==24089==         suppressed: 0 bytes in 0 blocks==24089== ==24089== For lists of detected and suppressed errors, rerun with: -s==24089== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)\n\nåœ¨æœ€åçš„summryé‡Œé¢å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæç¤ºÂ definitely lostÂ äº†8ä¸ªå­—èŠ‚ï¼Œè€Œä¸”æ˜¯åœ¨ä¸¤ä¸ªä¸åŒçš„åŒºå—ä¸­ä¸¢å¤±çš„ã€‚å’Œæˆ‘ä»¬çš„ä»£ç å»åˆã€‚\nå¦‚æœä½ ä¸è°ƒç”¨Â  test_leak() Â å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå‡ºç°ç¬¬äºŒæ¬¡çš„å†…å­˜æ³„æ¼ï¼ŒæŠ¥å‘Šä¼šå˜æˆåªæœ‰ Â 4 bytes in 1 blocksÂ ï¼Œå› ä¸ºvalgrindæ˜¯é€šè¿‡å¯æ‰§è¡Œæ–‡ä»¶æ¥æ£€æµ‹æ˜¯å¦æœ‰å†…å­˜æ³„æ¼çš„ï¼Œä»–ä¸ä¼šæ‰«æä½ çš„ä»£ç ï¼ˆé‚£æ ·çš„æˆæœ¬å¤ªé«˜äº†è€Œä¸”ä¸ä¸€å®šå‡†ç¡®ï¼ï¼‰\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘rootå’Œå­ç”¨æˆ·éƒ½èƒ½æ‰§è¡Œçš„å‘½ä»¤ï¼Œsudoæ— æ³•æ‰§è¡Œï¼ˆå·²è§£å†³ï¼‰","url":"/posts/2473452644/","content":"\nå…¨æµç¨‹å¸–å­ https://ask.oceanbase.com/t/topic/35604437/7\n\n1.é—®é¢˜å¦‚é¢˜ï¼Œåœ¨ç¼–è¯‘miniobçš„æ—¶å€™é‡åˆ°å¦‚ä¸‹é”™è¯¯\n[mu@vm-cnt8:~/code/miniob]$ sudo bash build.sh initbuild.sh initHEAD is now at 5df3037d Merge branch &#x27;release-2.1.12-stable-pull&#x27; into patches-2.1build.sh: line 83: cmake: command not foundbuild.sh: line 91: cmake: command not foundbuild.sh: line 99: cmake: command not foundbuild.sh: line 107: cmake: command not found\næ ¹æ®å­—é¢æ„æ€ï¼Œæ˜¯cmakeå‘½ä»¤æ‰¾ä¸åˆ°ï¼Œä½†æ˜¯æˆ‘çš„ç³»ç»Ÿé‡Œé¢å·²ç»æœ‰äº†ç¬¦åˆæ¡ä»¶çš„ç¯å¢ƒï¼›ä»¥ä¸‹æ˜¯gihub&#x2F;miniobä»“åº“ä¸­docsé‡Œé¢how_to_build.mdçš„å†…å®¹\n\nMiniOB éœ€è¦ä½¿ç”¨ï¼š\n\ncmake ç‰ˆæœ¬ &gt;&#x3D; 3.13\ngcc&#x2F;clang gccå»ºè®®8.3ä»¥ä¸Šï¼Œç¼–è¯‘å™¨éœ€è¦æ”¯æŒc++20æ–°æ ‡å‡†\nflex (2.5+), bison (3.7+) ç”¨äºç”Ÿæˆè¯æ³•è¯­æ³•åˆ†æä»£ç \n\n\næˆ‘ä½¿ç”¨çš„ç³»ç»Ÿæ˜¯centos8-steamçš„vmwareè™šæ‹Ÿæœºï¼›å½“å‰ä½¿ç”¨çš„miniobçš„commitä¸º\n76221e46e66ef408771ce886aa0c586a09374b0d\n\nä»¥ä¸‹æ˜¯æˆ‘çš„ç³»ç»Ÿä¸­å„ä¸ªä¾èµ–é¡¹çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥çœ‹åˆ°åœ¨å­ç”¨æˆ·ä¸­ï¼Œä¾èµ–é¡¹çš„æ‰€æœ‰å‘½ä»¤éƒ½å¯ä»¥æ­£å¸¸æ‰§è¡Œ\n[mu@vm-cnt8:~/code/miniob]$ gcc --versiongcc (GCC) 8.5.0 20210514 (Red Hat 8.5.0-20)Copyright (C) 2018 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.[mu@vm-cnt8:~/code/miniob]$ cmake --versioncmake version 3.27.4CMake suite maintained and supported by Kitware (kitware.com/cmake).[mu@vm-cnt8:~/code/miniob]$ flex --versionflex 2.6.1[mu@vm-cnt8:~/code/miniob]$ bison --versionbison (GNU Bison) 3.8Written by Robert Corbett and Richard Stallman.Copyright (C) 2021 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nåœ¨rootä¸­ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸æ‰§è¡Œè¿™äº›å‘½ä»¤\n[root@vm-cnt8:~]# cmake --versioncmake version 3.27.4CMake suite maintained and supported by Kitware (kitware.com/cmake).[root@vm-cnt8:~]# flex --versionflex 2.6.1[root@vm-cnt8:~]# bison --versionbison (GNU Bison) 3.8Written by Robert Corbett and Richard Stallman.Copyright (C) 2021 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nä½†æ˜¯sudoæ‰§è¡Œminiobçš„å®‰è£…è„šæœ¬çš„æ—¶å€™ï¼Œå´æ‰¾ä¸åˆ°cmakeå‘½ä»¤\n2.debugè¿‡ç¨‹ç»è¿‡å¤§ä½¬çš„æ•™å­¦ï¼ŒçŸ¥é“äº†ä¸€ä¸ªæ–°çš„sudoç”¨æ³•ï¼šsudo -E\n\nsudo -E æ˜¯ç»§æ‰¿å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡è¿è¡Œsudoåé¢çš„å‘½ä»¤ï¼Œå¦åˆ™ç¯å¢ƒå˜é‡ä¼šè¢«æ¸…ç†æ‰ï¼›\n\nä½†æ˜¯åœ¨åˆæ¬¡ä½¿ç”¨çš„æ—¶å€™ï¼Œä¾æ—§æ— æ³•æˆåŠŸç¼–è¯‘miniobï¼Œä¹Ÿæ‰¾ä¸åˆ°cmakeå‘½ä»¤\n[mu@vm-cnt8:~/code/miniob]$ sudo -E bash build.sh init[sudo] password for mu: build.sh initHEAD is now at 5df3037d Merge branch &#x27;release-2.1.12-stable-pull&#x27; into patches-2.1build.sh: line 83: cmake: command not foundbuild.sh: line 91: cmake: command not foundbuild.sh: line 99: cmake: command not foundbuild.sh: line 107: cmake: command not found[mu@vm-cnt8:~]$ sudo -E cmake --version[sudo] password for mu: sudo: cmake: command not found\n\n3.æœ€ç»ˆè§£å†³ï¼šPATHç¯å¢ƒå˜é‡æœ€ç»ˆçš„è§£å†³åŠæ³•æ˜¯æˆ‘è‡ªå·±æƒ³å‡ºæ¥çš„ï¼ˆå¤§ä½¬ä¹Ÿå›å¤äº†æˆ‘è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼‰\nå½“å‰åœ¨å­ç”¨æˆ·ä½¿ç”¨ sudo -Eæ˜¯æ‰¾ä¸åˆ°cmakeå‘½ä»¤çš„ã€‚\n[mu@vm-cnt8:~]$ sudo -E cmake --version[sudo] password for mu: sudo: cmake: command not found\n\næˆ‘çš„ç³»ç»Ÿé‡Œé¢çš„PATHç¯å¢ƒå˜é‡å¦‚ä¸‹ã€‚\n[mu@vm-cnt8:~]$ sudo env | grep PATHPATH=/sbin:/bin:/usr/sbin:/usr/bin\n\nè€Œcmakeçš„è·¯å¾„å¦‚ä¸‹\n[mu@vm-cnt8:~]$ type cmakecmake is /usr/local/bin/cmake[mu@vm-cnt8:~]$ whereis cmakecmake: /usr/local/bin/cmake /usr/share/cmake\n\næœ‰æ²¡æœ‰å¯èƒ½ï¼Œæ˜¯å› ä¸ºcmakeä¸åœ¨PATHç¯å¢ƒå˜é‡é‡Œé¢ï¼Œå¯¼è‡´sudoçš„æ—¶å€™æ‰¾ä¸åˆ°å‘½ä»¤å‘¢ï¼Ÿè™½ç„¶åœ¨rootå’Œmuç”¨æˆ·ä¸‹éƒ½å¯ä»¥ç›´æ¥æ‰§è¡Œcmakeã€‚\näºæ˜¯æˆ‘å°±å»rooté‡Œé¢æ‰§è¡Œäº†ä¸€ä¸‹è½¯è¿æ¥\n[root@vm-cnt8:~]# ls /usr/bin | grep cmake[root@vm-cnt8:~]# ln -s /usr/local/bin/cmake /usr/bin/cmake[root@vm-cnt8:~]# ll /usr/bin | grep cmakelrwxrwxrwx. 1 root root          20 Sep  1 05:57 cmake -&gt; /usr/local/bin/cmake\n\nå†æ¥è¯•è¯•\n$ sudo -E cmake --versioncmake version 3.27.4CMake suite maintained and supported by Kitware (kitware.com/cmake).\n\næœ€åå†æ¥è¯•è¯•ç¼–è¯‘ï¼Œåº”è¯¥æ˜¯OKäº†ï¼ŒinitæˆåŠŸæ‰§è¡Œï¼Œç¼–è¯‘ä¹Ÿé€šè¿‡äº†ï¼Œæ²¡æœ‰æŠ¥é”™\n\næ„Ÿè°¢miniobç¤¾åŒºå¤§ä½¬ä»¬çš„å¸®åŠ©ï¼\n4.ç»“è®ºå¦‚æœå‡ºç°ä¸€ä¸ªå‘½ä»¤ï¼Œrootå’Œå­ç”¨æˆ·éƒ½å¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯å­ç”¨æˆ·ä¸­sudoå´æ‰¾ä¸åˆ°æ­¤å‘½ä»¤ï¼Œå¯ä»¥å°è¯•æ£€æŸ¥ä¸€ä¸‹è¯¥å‘½ä»¤æ‰€åœ¨è·¯å¾„æ˜¯å¦ä¸å½“å‰ç³»ç»Ÿçš„PATHç¯å¢ƒå˜é‡ä¸ç¬¦åˆï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€Linuxã€‘ubuntu/centos8å®‰è£…zshç»ˆç«¯","url":"/posts/2565866661/","content":"æ ¹æ®è¿™ç¯‡çŸ¥ä¹æ–‡ç« è¿›è¡Œ https://zhuanlan.zhihu.com/p/514636147\n1.å®‰è£…zshå…ˆå®‰è£…zshå¹¶è®¾ç½®ä¸ºé»˜è®¤çš„ç»ˆç«¯\n# ubuntusudo apt install zsh# centos sudo yum install zsh util-linux-user# é€šç”¨chsh -s /bin/zsh\n\n\nå¦‚æœcentosä¸‹æ‰¾ä¸åˆ°chshå‘½ä»¤ï¼Œå‚è€ƒæ­¤åšå®¢ï¼šhttps://blog.csdn.net/FungLeo/article/details/99448425\n\nç„¶åå®‰è£…oh-my-zshï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§ä½¬åœ¨githubä¸Šå¼€æºçš„ä¸€ä¸ªzshé…ç½®é¡¹ï¼Œç›¸å¯¹æ–¹ä¾¿ç‚¹\nwget --no-check-certificate https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh \n\nå¦‚æœgithubè¿ä¸ä¸Šå°±ç”¨giteeï¼Œå¦‚æœä½ ç”¨çš„æ˜¯å­ç”¨æˆ·ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤ä¸è¦ç”¨sudoæƒé™æ‰§è¡Œï¼å¦åˆ™åç»­å­ç”¨æˆ·ä¼šå› ä¸ºæƒé™é—®é¢˜æ²¡åŠæ³•ä½¿ç”¨ã€‚\nsh -c &quot;$(curl -fsSL https://gitee.com/shmhlsy/oh-my-zsh-install.sh/raw/master/install.sh)&quot;\n\næœ€ç»ˆå‡ºç°å¦‚å›¾æ‰€ç¤ºçš„ç•Œé¢å°±æ˜¯å®‰è£…æˆåŠŸäº†ã€‚\n\n2.å®‰è£…zshæ’ä»¶å®‰è£…è¿™ä¸¤ä¸ªæœ€å¸¸ç”¨çš„æ’ä»¶å°±å¯ä»¥äº†\n# zsh-autosuggestions å‘½ä»¤è¡Œå‘½ä»¤é”®å…¥æ—¶çš„å†å²å‘½ä»¤å»ºè®®git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions# zsh-syntax-highlighting å‘½ä»¤è¡Œè¯­æ³•é«˜äº®æ’ä»¶git clone https://gitee.com/Annihilater/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting\n\nè¿™ä¸ªå†å²å‘½ä»¤å»ºè®®çš„æ’ä»¶æ˜¯ç”¨æ–¹å‘é”®ğŸ‘‰æ¥è¿›è¡Œè¡¥å…¨çš„ï¼Œä¸è¦å’Œæˆ‘ä¸€æ ·å‚»ä¹ä¹æŒ‰tabã€‚\n3.é…ç½®æ–‡ä»¶å’Œä¸»é¢˜åŸæ–‡ä¸­çš„é…ç½®æ–‡ä»¶æœ‰å¾ˆå¤šåœ°æ–¹éƒ½ä¸å¯¹åŠ²ï¼Œéœ€è¦æˆ‘ä»¬ä¿®æ”¹ï¼›\né¦–å…ˆæ˜¯oh-my-zshçš„å®‰è£…è·¯å¾„ï¼Œéœ€è¦æ”¹æˆä½ çš„ç”¨æˆ·å®¶ç›®å½•ä¸‹ï¼Œç„¶åéœ€è¦å…ˆå®‰è£…ä¸€ä¸‹powerlevel10kä¸»é¢˜ï¼Œè¿™ä¸ªä¸»é¢˜å¾ˆå¥½ç”¨ï¼\ngit clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git $&#123;ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom&#125;/themes/powerlevel10k\n\né…ç½®æ–‡ä»¶~/.zshrcæ”¹æˆå¦‚ä¸‹å†…å®¹ï¼ˆå»ºè®®å°†åŸæœ¬çš„é…ç½®æ–‡ä»¶cpå¤‡ä»½ä¸€ä¸‹ï¼‰å…¶ä¸­çš„zshå®‰è£…è·¯å¾„ä¸€å®šè¦ä¿®æ”¹ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸é…ç½®ï¼\n# é˜²æ­¢ä¸­æ–‡ä¹±ç export LC_ALL=en_US.UTF-8export LANG=en_US.UTF-8# oh-my-zshçš„å®‰è£…è·¯å¾„ï¼ˆzshçš„é…ç½®è·¯å¾„ï¼‰ZSH=&quot;/home/ä½ çš„ç”¨æˆ·å/.oh-my-zsh&quot;# ZSH_THEME=&quot;robbyrussell&quot;# è®¾ç½®å­—ä½“æ¨¡å¼ä»¥åŠé…ç½®å‘½ä»¤è¡Œçš„ä¸»é¢˜POWERLEVEL9K_MODE=&#x27;nerdfont-complete&#x27;# ZSH_THEME=&quot;agnoster&quot;ZSH_THEME=&quot;powerlevel10k/powerlevel10k&quot; # ä¸»é¢˜æ¨èè¿™ä¸ªï¼Œéœ€è¦è¿›è¡Œå®‰è£…# å¯åŠ¨é”™è¯¯å‘½ä»¤è‡ªåŠ¨æ›´æ­£ENABLE_CORRECTION=&quot;true&quot;# åœ¨å‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å°çº¢ç‚¹è¿›è¡Œæç¤ºCOMPLETION_WAITING_DOTS=&quot;true&quot;# é…ç½®è¦ä½¿ç”¨çš„æ’ä»¶plugins=(        git        extract        zsh-autosuggestions        zsh-syntax-highlighting)source $ZSH/oh-my-zsh.shsource $ZSH_CUSTOM/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh# pythonè™šæ‹Ÿç¯å¢ƒç›¸å…³è®¾ç½®if [ -f /usr/local/bin/virtualenvwrapper.sh ];then    export WORKON_HOME=$HOME/.virtualenvs    export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3    source /usr/local/bin/virtualenvwrapper.shfi\n\næ”¹å¥½äº†ä¹‹åï¼Œå¯ç”¨ä»–ï¼Œç„¶åå°±å¯ä»¥äº†ï¼›æ‰§è¡Œä¸‹æ–¹å‘½ä»¤åï¼Œå°±ä¼šè‡ªåŠ¨å¼¹å‡ºpowerlevel10kä¸»é¢˜çš„é…ç½®å¼•å¯¼è¿‡ç¨‹ã€‚\nsource ~/.zshrc\n\n\nå¦‚æœè®¾ç½®å®Œæ¯•åï¼Œä½ å¯¹powerlevel10k/powerlevel10kçš„é…ç½®åˆä¸æ»¡æ„äº†ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é‡æ–°é…ç½®\np10k configure\n\nä½ å¯èƒ½ä¹Ÿä¼šé‡åˆ°å¦‚ä¸‹æŠ¥é”™ï¼ŒåŸå› æœªçŸ¥ï¼Œä½†ä¼¼ä¹ä¸å½±å“ä½¿ç”¨\nâ¯ ls_p9k_worker_stop:zle:4: No handler installed for fd 12_p9k_worker_stop:5: failed to close file descriptor 12: bad file descriptor\n\nå¦‚ä¸ŠæŠ¥é”™è§£å†³åŠæ³•å‚è€ƒgithubçš„issueå†…çš„è¯´æ˜\nhttps://github.com/romkatv/powerlevel10k/issues/1554\nåœ¨é…ç½®æ–‡ä»¶.zshrcçš„æœ«å°¾åŠ ä¸Šä¸‹é¢è¿™ä¸€è¡Œï¼Œç„¶åsourceè®©å…¶ç”Ÿæ•ˆå°±å¯ä»¥äº†\nunset ZSH_AUTOSUGGEST_USE_ASYNC\n4.ä½¿ç”¨å°æŠ€å·§è¾“å…¥å‘½ä»¤çš„æ—¶å€™é”®å…¥tabï¼Œä¼šå¼¹å‡ºä¸€äº›å‘½ä»¤çš„æç¤º\n\nè¾“å…¥ä¹‹å‰å†™è¿‡çš„å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šå‡ºç°å†å²å‘½ä»¤æç¤ºï¼Œä½¿ç”¨æ–¹å‘é”®å³ğŸ‘‰å°±å¯ä»¥è¡¥å…¨è¿™ä¸ªå‘½ä»¤\n\nzshä¸»è¦å°±æ˜¯è¿™ä¸€ç‚¹éå¸¸çš„æ–¹ä¾¿ï¼Œè‡³äºä¼šä¸ä¼šå’Œé»˜è®¤çš„/bin/bashæœ‰æ€§èƒ½å·®å¼‚ï¼Œé‚£å°±ä¸çŸ¥é“äº†ã€‚\nå¦å¤–ï¼Œåœ¨zshç»ˆç«¯ä¸­ç›´æ¥é‡å®šå‘ä¼šå¡ä½ï¼Œå¦‚ä¸‹å‘½ä»¤å°±ä¼šé˜»å¡æ‰ã€‚\n&gt; æ–‡æœ¬æ–‡ä»¶\n\næ‰€ä»¥è¦ç”¨echoï¼ˆä¸€èˆ¬æˆ‘æ˜¯ç”¨æ¥æ¸…ç©ºæŸä¸ªæ–‡æœ¬æ–‡ä»¶ï¼‰\necho &gt; æ–‡æœ¬æ–‡ä»¶\n\n5.zshå®‰è£…ågitä¸­æ–‡ä¹±ç å®‰è£…zshåç”¨git logæŸ¥çœ‹æäº¤ä¿¡æ¯çš„æ—¶å€™å‘ç°ä¸­æ–‡ä¹±ç ã€‚\n5.1 ä¿®æ”¹zshé…ç½®æ–‡ä»¶å…¶å®ä¸Šæ–‡ä¸­æåˆ°çš„é…ç½®æ–‡ä»¶é‡Œé¢å·²ç»æœ‰è¿™ä¸¤ä¸ªé…ç½®é¡¹äº†ï¼Œè¯´æ˜é—®é¢˜ä¸åœ¨è¿™é‡Œ\n# é˜²æ­¢ä¸­æ–‡ä¹±ç export LC_ALL=en_US.UTF-8export LANG=en_US.UTF-8\n\n5.2 æ‰§è¡Œgité…ç½®ä¸€ç¯‡åšå®¢è¯´è¦æ‰§è¡Œä¸‹é¢çš„gitå‘½ä»¤ï¼Œä¹Ÿæ²¡æœ‰ç”¨\ngit config --global core.quotepath false git config --global gui.encoding utf-8 git config --global i18n.commit.encoding utf-8 git config --global i18n.logoutputencoding utf-8 set LESSCHARSET=utf-8\n\n5.3 ä¿®æ”¹ç³»ç»Ÿå­—ç¬¦é…ç½®å¦å¤–ä¸€ç¯‡åšå®¢è¯´è¦ä¿®æ”¹ç³»ç»Ÿçš„å­—ç¬¦é›†é…ç½®ï¼Œå¦‚ä¸‹ç¯å¢ƒå˜é‡\nexport LESSCHARSET=utf-8\n\næ‰§è¡Œåç¡®å®okäº†ï¼Œå¯ä»¥ç¼–è¾‘/etc/profileæ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶æœ«å°¾è¿½åŠ å¦‚ä¸‹å†…å®¹è®©å…¶å§‹ç»ˆç”Ÿæ•ˆ\nexport LESSCHARSET=utf-8\n\néšåç”¨sourceå‘½ä»¤åˆ·æ–°è¿™ä¸ªé…ç½®æ–‡ä»¶å³å¯ã€‚\n6.ç²˜è´´æ–‡æœ¬å¾ˆæ…¢çš„é—®é¢˜å‚è€ƒ zsh-users&#x2F;zsh-autosuggestions&#x2F;issues&#x2F;238 è§£å†³è¿™ä¸ªé—®é¢˜\nåœ¨.zshrcä¹‹åæ·»åŠ å¦‚ä¸‹é…ç½®é¡¹\n# This speeds up pasting w/ autosuggest# https://github.com/zsh-users/zsh-autosuggestions/issues/238pasteinit() &#123;  OLD_SELF_INSERT=$&#123;$&#123;(s.:.)widgets[self-insert]&#125;[2,3]&#125;  zle -N self-insert url-quote-magic # I wonder if you&#x27;d need `.url-quote-magic`?&#125;pastefinish() &#123;  zle -N self-insert $OLD_SELF_INSERT&#125;zstyle :bracketed-paste-magic paste-init pasteinitzstyle :bracketed-paste-magic paste-finish pastefinish\n\né…ç½®äº†ä¹‹åï¼Œsourceä½¿å…¶ç”Ÿæ•ˆã€‚\nè¿™æ—¶å€™åœ¨ç»ˆç«¯é‡Œé¢ç²˜è´´å†…å®¹çš„æ—¶å€™ï¼Œå°±ä¸ä¼šä¸€ä¸ªä¸€ä¸ªå­—ç¬¦åœ°æ‰“å°å‡ºæ¥äº†ã€‚é‚£æ ·å®åœ¨æ˜¯å¤ªæ…¢äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€nginxã€‘nginxé€šè¿‡é…ç½®æ–‡ä»¶é˜»æ­¢æµ·å¤–ipè®¿é—®","url":"/posts/2029711168/","content":"nginxé€šè¿‡é…ç½®æ–‡ä»¶é˜»æ­¢æµ·å¤–ipè®¿é—®\nè¯´æ˜å› ä¸ºæœ€è¿‘å‘ç°æœ‰ä¸å°‘åˆ·è¯„è®ºçš„è„šæœ¬ï¼Œåœ¨nginxè¯·æ±‚æ—¥å¿—é‡Œé¢çœ‹äº†çœ¼ï¼Œéƒ½æ˜¯æµ·å¤–çš„ipï¼Œåæ­£æˆ‘çš„åšå®¢ä¹Ÿæ˜¯å…¨ä¸­æ–‡ã€‚æ‰€ä»¥å¹²è„†æŠŠæµ·å¤–ipç¦æ­¢artalkè¯„è®ºã€‚\nåœ¨/etc/nginx/nginx.confä¸­å¯ä»¥çœ‹åˆ°é»˜è®¤çš„æ—¥å¿—è·¯å¾„ï¼Œåœ¨é‡Œé¢èƒ½æ‰¾åˆ°æ¯ä¸€ä¸ªè½¬å‘çš„è¯·æ±‚å’Œå…¶æºIPã€‚å…¶ä¸­artakæ–°å¢è¯„è®ºçš„è¯·æ±‚æ˜¯/api/addè·¯å¾„\naccess_log  /var/log/nginx/access.log  main;\n\nè€ƒè™‘åˆ°æ·»åŠ æµ·å¤–ipå±è”½å¯èƒ½ä¼šé˜»æ­¢ä¸€äº›çœŸçš„åœ¨å›½å¤–çš„æœ‹å‹ï¼Œå¦‚æœä½ åœ¨é˜…è¯»æœ¬ç«™åšå®¢æ—¶ï¼Œé‡åˆ°ç›¸å…³é—®é¢˜æ— æ³•ç›´æ¥è¯„è®ºä¸æˆ‘äº¤æµï¼Œå¯ä»¥ç§»æ­¥githubéšä¾¿æ‰¾ä¸ªæˆ‘çš„ä»“åº“å¼€ä¸ªissueæé—®ï¼\nè§£å†³APNICä»‹ç»åæ–‡å‡ºç°çš„ç½‘ç«™æ˜¯æ¥è‡ªAPNIC (Asia Pacific Network Information Center)ï¼Œå…¶æ˜¯IPåœ°å€ç®¡ç†æœºæ„ä¹‹ä¸€ï¼Œè´Ÿè´£äºšæ´²ã€å¤ªå¹³æ´‹åœ°åŒºã€‚\nAPNICæä¾›äº†æ¯æ—¥æ›´æ–°çš„äºšå¤ªåœ°åŒºIPv4ï¼ŒIPv6ï¼ŒASå·åˆ†é…çš„ä¿¡æ¯è¡¨ï¼šhttp://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latestè¯¥æ–‡ä»¶çš„æ ¼å¼ä¸å…·ä½“å†…å®¹å‚è§ï¼šhttp://ftp.apnic.net/pub/apnic/stats/apnic/README.TXT\n\nè„šæœ¬è·å–ipåˆæ­¥è§£å†³æ–¹æ³•å‚è€ƒï¼šhttps://www.cnblogs.com/guoyabin/p/14263732.html\nåŸåšä¸»æä¾›çš„è„šæœ¬å¦‚ä¸‹ï¼Œå¯ä»¥ä¸‹è½½æ‰€æœ‰æµ·å¤–ipåˆ—è¡¨å¹¶ç”Ÿæˆä¸€ä¸ªnginxé…ç½®ï¼Œå†™å…¥/etc/nginx/blackip.confä¸­\n#!/bin/bashrm -f legacy-apnic-latest black_`date +%F`.conf &amp;&amp; wget http://ftp.apnic.net/apnic/stats/apnic/legacy-apnic-latestawk -F &#x27;|&#x27; &#x27;&#123;if(NR&gt;2)printf(&quot;%s %s/%d%s\\n&quot;,&quot;deny&quot;,$4,24,&quot;;&quot;)&#125;&#x27; legacy-apnic-latest &gt; black_`date +%F`.conf &amp;&amp; \\rm -f /etc/nginx/blackip.conf &amp;&amp; \\ln -s $PWD/black_`date +%F`.conf /etc/nginx/blackip.conf\n\nè„šæœ¬æ‰§è¡Œåçš„æ•ˆæœå¦‚ä¸‹\n[root@bt-7274:/etc/nginx]# lltotal 88lrwxrwxrwx 1 root root   34 Dec  9 16:03 blackip.conf -&gt; /root/docker/black_2023-12-09.conf\n\næ–‡ä»¶å†…å®¹å¦‚ä¸‹\n[root@bt-7274:/etc/nginx/conf.d]# cat ../blackip.confdeny 128.134.0.0/24;deny 128.184.0.0/24;deny 128.250.0.0/24;deny 129.60.0.0/24;deny 129.78.0.0/24;...åé¢çš„çœç•¥äº†\n\nnginxå±è”½æµ·å¤–ipå‚è€ƒåŸåšä¸»çš„åšæ³•ï¼Œä½ å¯ä»¥å°†è¿™ä¸ªblackip.confåœ¨/etc/nginx/nginx.confä¸­çš„httpæ¨¡å—é‡Œé¢includeï¼Œè¿™æ ·ä¼šé˜»æ­¢å½“å‰æœåŠ¡å™¨æ‰€æœ‰åä»£çš„æµ·å¤–çš„è¯·æ±‚ã€‚\ninclude /etc/nginx/blackip.conf;\n\nè¿˜å¯ä»¥åœ¨å•ä¸ªé…ç½®æ–‡ä»¶çš„locationé‡Œé¢å¼•ç”¨\n  location / &#123;      proxy_redirect off; # artalkçš„nginxé…ç½®ä¸­å¿…é¡»æœ‰è¿™ä¸ª      proxy_set_header X-Real-IP $remote_addr;      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;      proxy_set_header Host $host;      proxy_set_header Upgrade-Insecure-Requests 1;      proxy_set_header X-Forwarded-Proto https;      include /etc/nginx/blackip.conf; # å¼•ç”¨é…ç½®      proxy_pass http://127.0.0.1:14722;&#125;\n\nä¿®æ”¹åé‡å¯nginxï¼Œæ²¡æœ‰æŠ¥é”™å°±æ˜¯okäº†\nsystemctl restart nginx\n\nç”¨æµ·å¤–çš„æœåŠ¡å™¨è¯•è¯•èƒ½ä¸èƒ½è¯·æ±‚artalkï¼Œç”¨artk.musnow.top&#x2F;sidebar&#x2F;â€¦è¿™ä¸ªç®¡ç†å‘˜ç™»å½•é¡µé¢æ¥è¿›è¡Œæµ‹è¯•ã€‚\nå›½å†…æœåŠ¡å™¨è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼Œå’Œæµè§ˆå™¨æ‰“å¼€çš„ç»“æœåŸºæœ¬æ˜¯ä¸€æ ·ï¼ˆç®¡ç†å‘˜ç™»å½•ç•Œé¢ï¼‰\n[root@bt-7274:/etc/nginx/conf.d]# curl https://artk.musnow.top/sidebar/#/login&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;Artalk Sidebar&lt;/title&gt;    &lt;script type=&quot;module&quot; crossorigin src=&quot;./assets/index-5a0b3a93.js&quot;&gt;&lt;/script&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;./assets/index-84fdcf98.css&quot;&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\næµ·å¤–æœåŠ¡å™¨è¯·æ±‚ç»“æœä¹Ÿæ˜¯ä¸Šé¢è¿™æ ·â€¦â€¦ç„¶åå‘ç°æ˜¯å› ä¸ºæˆ‘çš„æµ·å¤–æœåŠ¡å™¨ipå‹æ ¹ä¸åœ¨é‚£ä¸ªblackçš„denyåˆ—è¡¨é‡Œé¢\nå°è¯•æŠŠipçš„ç½‘æ®µç»™åŠ è¿›å»ï¼Œé‡å¯nginxå†è¯•è¯•ã€‚å®Œç¾å¤„ç†ï¼æ·»åŠ å‰èƒ½æ­£å¸¸è¯·æ±‚åˆ°ï¼Œæ·»åŠ åå°±å˜æˆ403äº†\n[root@RainYun-8aNbbsmA:~]# curl https://artk.musnow.top/sidebar/#/login&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;Artalk Sidebar&lt;/title&gt;    &lt;script type=&quot;module&quot; crossorigin src=&quot;./assets/index-5a0b3a93.js&quot;&gt;&lt;/script&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;./assets/index-84fdcf98.css&quot;&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;[root@RainYun-8aNbbsmA:~]#[root@RainYun-8aNbbsmA:~]# curl https://artk.musnow.top/sidebar/#/login&lt;html&gt;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;nginx/1.20.1&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;[root@RainYun-8aNbbsmA:~]#\n\nnginxå±è”½éå›½å†…ipæˆ‘å‰æ–‡æåˆ°äº†æˆ‘çš„æµ·å¤–æœåŠ¡å™¨çš„ipä¸åœ¨è¿™ä¸ªdenyçš„ipåˆ—è¡¨é‡Œé¢ï¼Œæ²¡æœ‰è¢«å±è”½ã€‚\nè€ƒè™‘åˆ°ç½‘ä¸Šæœä¸åˆ°legacy-apnic-latestæ–‡ä»¶å­˜æ”¾çš„æ˜¯ä»€ä¹ˆipçš„ä¿¡æ¯ï¼Œæˆ‘å†³å®šæ¢ä¸€ä¸ªæ€è·¯ï¼šallowå›½å†…çš„ipï¼Œæ‹’ç»æ‰€æœ‰éå›½å†…çš„ip\n\nè·å–å›½å†…ipåˆ—è¡¨ https://www.cnblogs.com/sentangle/p/13201770.html\n\nä¸‹é¢è¿™ä¸ªurlé‡Œé¢çš„ipåœ°å€æ ‡æ˜äº†åœ°åŒºï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶æå–å‡ºæ¥å³å¯\nhttp://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest\n\nè¿™ä¸ªæ–‡ä»¶é‡Œé¢çš„å†…å®¹ç»“æ„å¦‚ä¸‹\nç­‰çº§æœºæ„|è·å¾—è¯¥IPæ®µçš„å›½å®¶/ç»„ç»‡|èµ„æºç±»å‹|èµ·å§‹IP|IPæ®µé•¿åº¦|åˆ†é…æ—¥æœŸ|åˆ†é…çŠ¶æ€\n\næˆ‘ä»¬åªéœ€è¦æå–CNçš„æ‰€æœ‰IPï¼Œç„¶åå…è®¸ä»–ä»¬ï¼Œå†deny allé˜»æ­¢å…¶ä»–ipå°±å¯ä»¥äº†\n#!/bin/bashrm -f delegated-apnic-latest blackcn_`date +%F`.conf &amp;&amp; wget http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latestawk -F\\| &#x27;/CN\\|ipv4/ &#123; printf(&quot;%s %s/%d%s\\n&quot;,&quot;allow&quot;,$4, 32-log($5)/log(2), &quot;;&quot;) &#125;&#x27; delegated-apnic-latest &gt; blackcn_`date +%F`.conf &amp;&amp; \\rm -f /etc/nginx/blackcn.conf &amp;&amp; \\ln -s $PWD/blackcn_`date +%F`.conf /etc/nginx/blackcn.conf\n\næ‰§è¡Œè¿™ä¸ªè„šæœ¬åï¼Œä¼šç”Ÿæˆ/etc/nginx/blackcn.confæ–‡ä»¶\n[root@bt-7274:/etc/nginx]# lltotal 88lrwxrwxrwx 1 root root   42 Dec  9 16:54 blackcn.conf -&gt; /root/docker/nginx/blackcn_2023-12-09.conflrwxrwxrwx 1 root root   40 Dec  9 16:56 blackip.conf -&gt; /root/docker/nginx/black_2023-12-09.conf\n\nå†…å®¹å¦‚ä¸‹\nallow 223.248.0.0/14;allow 223.252.128.0/17;allow 223.254.0.0/16;allow 223.255.0.0/17;allow 223.255.236.0/22;allow 223.255.252.0/23;....\n\nè¿˜æ˜¯ä¿®æ”¹nginxå•ä¸ªç«™ç‚¹é…ç½®æ–‡ä»¶çš„locationä¸­çš„å†…å®¹\n  location / &#123;      proxy_redirect off;  \tproxy_set_header X-Real-IP $remote_addr;      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;      proxy_set_header Host $host;      proxy_set_header Upgrade-Insecure-Requests 1;      proxy_set_header X-Forwarded-Proto https;# å…è®¸æ‰€æœ‰å›½å†…ip  \tinclude /etc/nginx/blackcn.conf;  \tdeny all; # é˜»æ­¢å…¶ä»–ip  \tproxy_pass http://127.0.0.1:14722;      &#125;\n\nå…ˆæ¥è¯•è¯•ä¸ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆä¸åšä»»ä½•denyå’Œallowæ“ä½œçš„æƒ…å†µä¸‹ï¼‰æµ·å¤–ipè¯·æ±‚ç»“æœ\n[root@RainYun-8aNbbsmA:~]# curl https://artk.musnow.top/sidebar/#/login&lt;!DOCTYPE html&gt;&lt;html&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;Artalk Sidebar&lt;/title&gt;    &lt;script type=&quot;module&quot; crossorigin src=&quot;./assets/index-5a0b3a93.js&quot;&gt;&lt;/script&gt;    &lt;link rel=&quot;stylesheet&quot; href=&quot;./assets/index-84fdcf98.css&quot;&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nç¬¦åˆé¢„æœŸï¼Œæ­£å¸¸è¯·æ±‚å‡ºäº†ç™»å½•é¡µé¢çš„htmlæ–‡ä»¶ã€‚\næ·»åŠ å¦‚ä¸Šä¿®æ”¹åï¼Œé‡å¯nginxï¼Œå†æ¬¡è¿›è¡Œæµ‹è¯•ã€‚è¿™ä¸€æ¬¡å·²ç»403é˜»æ­¢äº†ï¼Œå®Œç¾ï¼\n[root@RainYun-8aNbbsmA:~]# curl https://artk.musnow.top/sidebar/#/login&lt;html&gt;&lt;head&gt;&lt;title&gt;403 Forbidden&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;403 Forbidden&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;nginx/1.20.1&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;\n\nThe endä½ å¯ä»¥å†™ä¸ªcrontabè®©å…¶å®šæ—¶æ‰§è¡Œè„šæœ¬å¹¶é‡å¯nginxï¼Œæˆ‘ä¸ªäººè¿˜æ˜¯é€‰æ‹©äººå·¥å¤„ç†äº†ï¼ˆä»€ä¹ˆæ—¶å€™æƒ³èµ·æ¥å°±å»æ›´æ–°ä¸€ä¸‹ipåˆ—è¡¨ï¼‰\næ„Ÿè°¢æœ¬æ–‡ä¸­å‡ºç°çš„åšå®¢çš„åšä¸»ã€‚æ²¡æœ‰ä»–ä»¬çš„å¸®åŠ©ï¼Œæˆ‘æ— æ³•ç¼–å†™å‡ºshellè„šæœ¬ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","nginx"]},{"title":"ã€Linuxã€‘lcov2.0å®‰è£…å’Œperlä¿®æ”¹é•œåƒæº","url":"/posts/1274282021/","content":"å®‰è£…lcov 2.0ä½ å¯èƒ½ä¸çŸ¥é“lcovæ˜¯ä»€ä¹ˆï¼Œç®€è€Œè¨€ä¹‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»£ç å•å…ƒæµ‹è¯•è¦†ç›–ç‡çš„æ˜¾ç¤ºå·¥å…·ï¼ŒåŸºäºgcovã€‚\n\nä»€ä¹ˆæ˜¯å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Ÿ\n\næˆ‘ä»¬éœ€è¦å¯¹é¡¹ç›®ä¸­çš„æ¯ä¸ªå‡½æ•°ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå…¶å®å°±æ˜¯æµ‹è¯•å‡½æ•°çš„åŠŸèƒ½ã€‚é€šè¿‡gcc&#x2F;g++çš„ç›¸å…³ç¼–è¯‘é€‰é¡¹ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªgcdaæ–‡ä»¶ï¼Œå†…éƒ¨åŒ…å«æŸä¸ªcppæ–‡ä»¶ä¸­ç›¸å…³å‡½æ•°è¢«æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œä»¥åŠæŸäº›if&#x2F;switchä¸­çš„å¤šåˆ†æ”¯æ˜¯å¦è¦†ç›–ä¸Šäº†ï¼›\nlcovå°±å¯ä»¥è§£æè¿™äº›gcdaæ–‡ä»¶ï¼Œå¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å‡½æ•°æµ‹è¯•è¦†ç›–ç‡çš„æŠ¥å‘Š\n\nåŒ…æ‹¬å•å…ƒæµ‹è¯•åœ¨å†…ï¼Œè¿™éƒ¨åˆ†å¯¹ä»£ç å‡½æ•°æµ‹è¯•çš„æ“ä½œä¸€èˆ¬è¢«ç§°ä¹‹ä¸ºåŠŸèƒ½å®‰å…¨ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚\nlcov 2.0çš„å®‰è£…å‘½ä»¤ç›¸å¯¹æ¥è¯´å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸‹é¢è¿™äº›\nwget https://github.com/linux-test-project/lcov/releases/download/v2.0/lcov-2.0.tar.gztar -zxvf lcov-2.0.tar.gzcd lcov-2.0sudo make install\n\nperlä½¿ç”¨lcovçš„æ—¶å€™éœ€è¦perlï¼Œæ­¤æ—¶å°±éœ€è¦ä¿®æ”¹é•œåƒæºã€‚é»˜è®¤çš„perl moduleçš„æºæ˜¯åœ¨å›½å¤–çš„ï¼Œå›½å†…åŸºæœ¬ä¸Šæ˜¯å®Œå…¨ç”¨ä¸äº†ã€‚\n# centos8 å®‰è£…perlsudo yum install perl\n\nå¦‚æœä½ çš„lcovè¿è¡Œçš„æ—¶å€™é‡åˆ°ä¸‹é¢ç±»ä¼¼çš„é”™è¯¯ï¼Œé‚£ä¹ˆå°±æ˜¯å› ä¸ºperlç¼ºå°‘å¯¹åº”moduleå¯¼è‡´çš„ï¼Œæ¯”å¦‚å¦‚ä¸‹æŠ¥é”™æ˜¯å› ä¸ºç¼ºå°‘Capture::Tinyè¿™ä¸ªmoduleï¼›\nCan&#x27;t locate Capture/Tiny.pm in @INC (you may need to install the Capture::Tiny module) (@INC contains: /usr/local/lib/lcov /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5) at /usr/local/lib/lcov/lcovutil.pm line 14.BEGIN failed--compilation aborted at /usr/local/lib/lcov/lcovutil.pm line 14.Compilation failed in require at /usr/local/bin/lcov line 102.BEGIN failed--compilation aborted at /usr/local/bin/lcov line 102.make: *** [makefile:6: lcov] Error 2\n\nperlä½¿ç”¨æ¸…åæºä½¿ç”¨æ¸…åæºå°±è¡Œäº† https://mirrors.tuna.tsinghua.edu.cn/help/CPAN/\nå› ä¸ºæˆ‘ç”¨çš„centosçš„ç³»ç»Ÿï¼Œå®‰è£…çš„perlç‰ˆæœ¬å¾ˆè€ï¼Œv5.26.3ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸ªæ‰‹åŠ¨ä¿®æ”¹é•œåƒæºçš„åŠæ³•\nperl --version\n\nåœ¨rootç”¨æˆ·ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä¼šè¿›å…¥ä¸€ä¸ªperlçš„å‘½ä»¤è¡Œ\nperl -MCPAN -e shell\n\nåœ¨perlçš„å‘½ä»¤è¡Œä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\no conf init\n\næœ€ç»ˆå±•ç°çš„ç»“æœåº”è¯¥å¦‚ä¸‹ï¼Œä¼šè‡ªåŠ¨å¾€å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶\n\nè¿™é‡Œåˆ›å»ºçš„é…ç½®æ–‡ä»¶æ˜¯åœ¨rootç”¨æˆ·ä¸‹ï¼Œè¾“å…¥quité€€å‡ºperlçš„å‘½ä»¤è¡Œåï¼Œæˆ‘ä»¬ç›´æ¥vimæ‰“å¼€è¿™ä¸ªé…ç½®æ–‡ä»¶\nvim /root/.cpan/CPAN/MyConfig.pm\n\nåœ¨é‡Œé¢æ‰¾åˆ°urllisté€‰é¡¹ï¼Œæ ¹æ®å·²æœ‰æ ¼å¼æ·»åŠ ä¸€ä¸ªæ–°çš„é•œåƒè·¯å¾„å°±å¯ä»¥äº†\n\næˆ‘è¿™é‡Œæ·»åŠ åçš„urllisté…ç½®é¡¹å¦‚ä¸‹ï¼Œç¬¬ä¸€é¡¹æ˜¯é•œåƒæºå°±OK\n&#x27;urllist&#x27; =&gt; [q[https://mirrors.tuna.tsinghua.edu.cn/CPAN/], q[http://www.cpan.org/]],\n\nä½†æ˜¯è¦æ³¨æ„ä¸€ä¸‹ï¼Œåœ¨æˆ‘è¿™è¾¹çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œæ¸…åæºåœ¨perlå®‰è£…åŒ…çš„æ—¶å€™ä¹Ÿå®¹æ˜“æŠ½é£ï¼Œæˆ‘è¯•å‡ºæ¥æ¯”è¾ƒç¨³å®šçš„ipå¦‚ä¸‹ï¼Œå°†å…¶å†™å…¥/etc/hostsæ–‡ä»¶ä¸­ï¼Œè¿™æ ·å®‰è£…perlåŒ…çš„æ—¶å€™å°±ä¸ä¼štimeoutäº†\n101.6.15.130 mirrors.tuna.tsinghua.edu.cn\n\nè¿™ä¸ªipåç»­å¯èƒ½ä¼šæœ‰å˜åŒ–å•Šï¼Œè¯·ä»¥ä½ çš„å®é™…æƒ…å†µä¸ºå‡†ï¼\nperlå®‰è£…moduleåç»­å®‰è£…åŒ…çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨ä¸Šé•œåƒæºäº†ï¼Œå®‰è£…åŒ…çš„è¯­å¥å¦‚ä¸‹ï¼Œè¯·æ³¨æ„è¿™ä¸ªå®‰è£…è¯­å¥æœ€åè¿˜æœ‰ä¸ªè‹±æ–‡çš„å•å¼•å·ï¼Œä¸€å®šä¸è¦æŠŠä»–åˆ äº†ï¼\nsudo perl -MCPAN -e &#x27;install &quot;åŒ…å&quot;&#x27;\n\næˆ‘éœ€è¦ç”¨perlæ˜¯å› ä¸ºè¦ç”¨åˆ°lcovï¼Œåœ¨lcovä»“åº“çš„readmeé‡Œé¢æåˆ°äº†lcovéœ€è¦çš„perlåŒ…ï¼Œä¸€ä¸ªä¸€ä¸ªå®‰è£…å°±è¡Œäº†ï¼ˆä»¥ä¸‹èŠ‚é€‰è‡ªlcov2.0çš„ä»“åº“READMEï¼‰\nThese perl packages include:  - Capture::Tiny  - DateTime  - Devel::Cover  - Digest::MD5  - File::Spec  - at least one flavor of JSON module.    In order of performance/preference:       - JSON::XS       - Cpanel::JSON::XS       - JSON::PP       - JSON - Memory::Process - Module::Load::Conditional - Scalar::Util - Time::HiResIf your system is missing any of these, then you may be able to install themvia:   $ perl -MCPAN -e &#x27;install &quot;packageName&quot;&#x27;\n\næ¯”å¦‚æˆ‘éœ€è¦å®‰è£…Capture::TinyåŒ…ï¼Œå°±ç”¨å¦‚ä¸‹å‘½ä»¤\nsudo perl -MCPAN -e &#x27;install &quot;Capture::Tiny&quot;&#x27;\n\næ­£å¸¸å®‰è£…çš„å‘½ä»¤è¾“å‡ºç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º\n\nubuntuå®‰è£…perl moduleå¦‚æœæ˜¯ubuntuï¼Œå®‰è£…perlçš„åŒ…ä¼šæ–¹ä¾¿ä¸€ç‚¹ï¼Œå› ä¸ºaptæºé‡Œé¢æ˜¯æœ‰perlçš„module\n# ubuntu 22.04 å¯ä»¥ç›´æ¥å®‰è£…ä¸‹é¢çš„ä¾èµ–é¡¹ï¼Œå°±å¯ä»¥ä½¿ç”¨lcov 2.0äº†sudo apt install -y perl libcapture-tiny-perl libdatetime-perl\n\nä½ å¯ä»¥æ ¹æ®perlçš„åŒ…åä¸­çš„å…³é”®å­—ï¼Œå°è¯•åœ¨apt listé‡Œé¢æ‰¾æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„åŒ…\nsudo apt list | grep åŒ…å\n\nä½¿ç”¨lcovå¯¹äºlcov2.0çš„å‘½ä»¤ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„linuxä»“åº“ä¸­çš„æµ‹è¯•\nhttps://gitee.com/musnows/raspberry-practice/tree/master/lcov_test\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux"]},{"title":"ã€nginxã€‘nginx é…ç½®é¿å… IP è®¿é—®æ—¶è¯ä¹¦æš´éœ²åŸŸå","url":"/posts/3528013149/","content":"æœ¬æ–‡è½¬è½½è‡ªï¼šhttps://zinglix.xyz/2021/10/04/nginx-ssl-reject-handshake/\nåŸæ–‡TL;DRnginx é…ç½®é¿å… IP è®¿é—®æ—¶è¯ä¹¦æš´éœ²åŸŸå\nåˆ©ç”¨ nginx 1.19.4 åçš„æ–°ç‰¹æ€§ ssl_reject_handshake on;ï¼Œå°†å…¶ç½®äºé»˜è®¤è®¿é—®æ—¶é…ç½®ä¸­ï¼ŒIP è®¿é—®æ—¶ä¼šç»ˆæ­¢ TLS æ¡æ‰‹ï¼Œä¹Ÿå°±ä¸ä¼šæš´éœ²åŸŸåäº†ã€‚\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä½ çš„nginxç‰ˆæœ¬\n# nginx -vnginx version: nginx/1.20.1\n\nç»†è¯´CDN æ˜¯å»ºç«™æ—¶å¸¸ç”¨çš„å·¥å…·ï¼Œåœ¨è‡ªå·±çš„ä¸»æœºå¤–é¢å¥—ä¸€å±‚ CDN æ˜¯å¸¸è§æ“ä½œï¼Œä¸€èˆ¬è¿™æ ·è®¤ä¸ºè‡ªå·±çš„ä¸»æœºå°±å®‰å…¨äº†ï¼Œæœ‰äººæ¥æ”»å‡»ä¹Ÿä¼šå…ˆåˆ° CDN æœåŠ¡å™¨ï¼Œæ”»å‡»è€…æ ¹æœ¬æ— æ³•è·å–åˆ°è‡ªå·±ä¸»æœºçš„ IPï¼Œä½†äº‹å®çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ\næˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€èˆ¬é…ç½®åä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ã€‚\nserver &#123;    listen 80 default_server;    # Redirect all HTTP requests to HTTPS.    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 default_server;    server_name _;    include conf.d/ssl.config;    return 444;&#125;\n\n\nä¸Šé¢æ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„ nginx é…ç½®ï¼ŒHTTP è®¿é—®å…¨éƒ¨é‡å®šå‘åˆ° HTTPS çš„ 443 ç«¯å£ä¸Šï¼Œæ²¡æœ‰é…ç½®è¿‡çš„åŸŸåè¿”å› 444 ç»ˆæ­¢è¿æ¥ã€‚\nå¥½äº†ï¼Œç°åœ¨å°è¯•ç”¨ IP å’Œ HTTPS è®¿é—®ä½ çš„ç½‘ç«™ï¼Œä½ åº”è¯¥èƒ½å¤Ÿçœ‹åˆ°é¢„æƒ³ä¸­è®¿é—®å¤±è´¥ã€è¯ä¹¦æ— æ•ˆç­‰è¿æ¥å¤±è´¥çš„æç¤ºã€‚\nä½†æ˜¯ï¼æ³¨æ„ä¸‹æµè§ˆå™¨å·¦ä¸Šè§’æç¤ºçš„ä¸å®‰å…¨ï¼Œç‚¹å¼€æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯ï¼Œä½ å°±ä¼šå‘ç°ä½ çš„åŸŸåå…¶å®éšç€è¯ä¹¦å‘é€äº†è¿‡æ¥ã€‚æ­¤æ—¶å¦‚æœä½ æ˜¯æ”»å‡»è€…ï¼Œé‚£ä¹ˆå…¶å®å°±å¯ä»¥çŸ¥é“è¯¥åŸŸåèƒŒåçš„æºä¸»æœº IP å°±æ˜¯è¿™ä¸ªã€‚\n\nä¸Šå›¾å³ä¸ºç”¨ IP è®¿é—®åï¼Œä¾æ—§èƒ½çœ‹åˆ°è¯ä¹¦å†…å®¹ã€‚è¿™æ˜¯å› ä¸ºè¿”å› 444 æ˜¯ HTTP å±‚é¢çš„äº‹æƒ…ï¼Œæ„å‘³ç€åˆ°è¾¾è¿™ä¸€æ­¥ä¸‹å±‚çš„ TLS æ¡æ‰‹å·²ç»å®Œæˆã€‚è¯ä¹¦ä¸è¢«ä¿¡ä»»æ˜¯ä¸€å›äº‹ï¼Œä½†è¯´æ˜å·²ç»æ‹¿åˆ°äº†æœåŠ¡å™¨çš„è¯ä¹¦ã€‚\nCDN ç¡®å®é¿å…äº†ç›´æ¥ DNS æŸ¥è¯¢æš´éœ² IP çš„é—®é¢˜ï¼Œä½†æ”»å‡»è€…é€šè¿‡æ‰«æå…¨ç½‘ IPï¼Œç”¨ä¸Šè¿°æ–¹å¼ä¾æ—§å¯ä»¥çŸ¥é“æ¯ä¸ª IP å¯¹åº”çš„åŸŸåæ˜¯ä»€ä¹ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šç«™é•¿ç”¨äº† CDN åå¹¶ä¸”åå¤æ›´æ¢ IP å´ä¾æ—§è¢«æ”»å‡»è€…è¿…é€Ÿæ‰¾åˆ° IP çš„åŸå› ã€‚\n\nCensys å°±ä¸€ç›´åœ¨å¹²è¿™ä»¶äº‹ï¼Œå…¨ç½‘æ‰«æ IP å¹¶æ‰¾åˆ°å…¶å¯¹åº”çš„åŸŸå\n\né‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé—®é¢˜æ ¹æºå‡ºåœ¨ client åœ¨ TLS æ¡æ‰‹æ—¶å‘é€äº† ClientHello åï¼Œnginx åœ¨ ServerHello ä¸­å¸¦ç€å«æœ‰åŸŸåçš„é»˜è®¤è¯ä¹¦è¿”å›äº†ï¼Œå› ä¸º nginx æœŸæœ›å¯ä»¥å®Œæˆæ¡æ‰‹ï¼Œè¿™å¯èƒ½å¯ä»¥ç®—æ˜¯ nginx çš„ä¸€ä¸ªç¼ºé™·ã€‚\n\nå¦‚æœä½ ä¸ç†Ÿæ‚‰ TLS æ¡æ‰‹æµç¨‹ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹çœ‹ è¿™ç¯‡æ–‡ç« \n\nç¬¨åŠæ³•æ—¢ç„¶ nginx é»˜è®¤æä¾›äº†å¸¦æœ‰åŸŸåçš„è¯ä¹¦ï¼Œé‚£ä¹ˆæƒ³ä¸æš´éœ²ä¹Ÿå¾ˆç®€å•ï¼Œæä¾›ä¸€ä¸ªä¸å«æœ‰æ­£ç¡®åŸŸåçš„è¯ä¹¦å³å¯ã€‚\nnginx è®¾ç½®ä¸­ HTTPS è®¿é—®å¦‚æœæ²¡æœ‰è®¾ç½®è¯ä¹¦ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ã€‚ä½†åæ­£ IP è®¿é—®ä¹Ÿä¸éœ€è¦æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆç›´æ¥è‡ªç­¾ä¸€ä¸ª IP è¯ä¹¦ï¼Œæˆ–è€…éšä¾¿ä¸€ä¸ªåŸŸåçš„è¯ä¹¦éƒ½å¯ã€‚å½“ç„¶ï¼Œå¦‚æœèƒ½æå®šåˆæ³•çš„ IP è¯ä¹¦ä¹Ÿä¸æ˜¯ä¸è¡Œã€‚\næå®šè¯ä¹¦åï¼Œæ·»åŠ ä¸€ä¸ªé…ç½®ï¼Œè®© IP è®¿é—®è¿”å›é”™è¯¯è¯ä¹¦å°±å®Œäº‹äº†ã€‚\nserver &#123;    listen 443 ssl default_server;    server_name your_ip;    ssl_certificate    xxxx.pem;    // and more ssl config ...    return 444;&#125;\n\n\nå¥½æ–¹æ³•è¿™ç§æ–¹æ³•è¿˜å¾—è‡ªå·±æä¸ªè¯ä¹¦ï¼Œå¦‚æœæœåŠ¡å™¨å¤šæ¯ä¸ªéƒ½å¾—è¿™ä¹ˆæä¹ŸæŒºéº»çƒ¦çš„ï¼Œå¥½åœ¨è¿™ä¸ªé—®é¢˜ nginx è¿™å·²ç»æœ‰äº†å¾ˆå®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚\nClientHello ä¸­æ˜¯å¸¦ç€ SNI çš„ï¼Œæ‰€ä»¥å…¶å®æ¡æ‰‹é˜¶æ®µæ˜¯å¯ä»¥çŸ¥é“è®¿é—®çš„åŸŸåæ˜¯å¦åˆæ³•çš„ï¼Œnginx 1.19.4 ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ ssl_reject_handshake ç”¨äºæ‹’ç»æ¡æ‰‹ï¼Œä¹Ÿå°±ä¸ä¼šæä¾›è¯ä¹¦ã€‚\nä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°†åŸæœ¬é»˜è®¤é…ç½®ä¸­çš„ return 444 æ›¿æ¢æˆ ssl_reject_handshake on å³å¯ã€‚\nserver &#123;    listen 443 default_server;    server_name _;    include conf.d/ssl.config;    # ä¸ç”¨è¿”å› 444 äº†ï¼Œç›´æ¥æ‹’ç»æ¡æ‰‹    ssl_reject_handshake on;    # return 444;&#125;\n\n\né…ç½®åï¼Œå†å°è¯• IP è®¿é—®ï¼Œä¼šå‘ç°æµè§ˆå™¨æŠ¥äº† ERR_SSL_UNRECOGNIZED_NAME_ALERT çš„é”™è¯¯ï¼Œä¹Ÿçœ‹ä¸åˆ°è¯ä¹¦ä¿¡æ¯ï¼Œç›®æ ‡è¾¾æˆï¼\n\nå…¶å®è¿˜æ²¡å®Œä¸Šè¿°æ–¹æ³•æ˜¯é€šè¿‡ ClientHello ä¸­çš„ SNI ç¡®å®šè®¿é—®æ˜¯å¦åˆæ³•çš„ï¼Œé‚£å¦‚æœ SNI å°±æ˜¯æ­£ç¡®çš„åŸŸåå‘¢ï¼Ÿ\nè¿™ç§åœºæ™¯å‘ç”Ÿäºæ”»å‡»è€…å·²ç»ç¡®å®šè¦æ”»å‡»æŸä¸ªåŸŸåï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥å°†å¸¦ç€è¯¥åŸŸåçš„æ¡æ‰‹ä¿¡æ¯éå†æ‰€æœ‰ IPï¼Œæ¡æ‰‹æˆåŠŸå°±æ‰¾åˆ°ï¼Œè¿™æ ·è®¿é—®å…¶å®ä¸æ­£å¸¸è®¿é—®å¹¶æ— åŒºåˆ«ï¼Œå”¯ä¸€è§£å†³æ–¹æ³•å°±æ˜¯ç™½åå•åªå…è®¸ CDN æœåŠ¡å™¨è®¿é—®ã€‚\n\nä¾‹å¦‚æ”»å‡»è€…ç”¨ hosts ç›´æ¥ç¡¬å†™ IPï¼Œå°†åŸŸåå¼ºè¡ŒæŒ‡å‘æŸä¸ª IP\næˆ–è€…ç”¨è¿™ç§æ–¹å¼ curl https://example.com --resolve &#39;example.com:443:172.17.54.18&#39;\n\nå¦‚ä¸‹ï¼Œåœ¨ nginx é‡Œé¢çš„ location é…ç½®æ·»åŠ ä¸Š allow çš„ IP æ®µï¼Œåªå…è®¸ CDN è¿è¥å•†çš„ IP è®¿é—®ä½ çš„æœåŠ¡ï¼Œå°±èƒ½é¿å…ç»•è¿‡ CDN é€ æˆçš„æ”»å‡»\nlocation / &#123;    allow   172.1.2.0/24; # å…è®¸CDNè¿è¥å•†çš„IP    allow   1.2.3.4/32;    deny    all; # é˜»æ­¢å…¶ä»–ä»»ä½•IP&#125;\n\nä¸Šè¿° IP æ®µåªèƒ½å‘ CDN æœåŠ¡æä¾›å•†è¯¢é—®ï¼Œä¸€èˆ¬æ–‡æ¡£ä¸­éƒ½æ˜¯æœ‰ç›¸å…³ä¿¡æ¯çš„ã€‚\næ…•é›ªçš„æµ‹è¯•ä¸Šé¢è¿™ç¯‡æ–‡ç« æˆ‘ç¬¬ä¸€æ¬¡çœ‹çš„æ—¶å€™è¿˜æ²¡æœ‰ç†è§£ä»–è¯´çš„æ˜¯ä»€ä¹ˆå†…å®¹ã€‚åæ¥æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæ˜ç™½äº†ã€‚\nè¯´æ˜ä»¥æˆ‘çš„æœåŠ¡å™¨ä¸¾ä¾‹ï¼Œæˆ‘æ˜¯centos 7.2çš„æœåŠ¡å™¨ï¼Œç›´æ¥ç”¨yumå®‰è£…çš„nginxï¼Œç‰ˆæœ¬nginx/1.20.1ï¼Œé…ç½®è·¯å¾„æ˜¯/etc/nginxï¼›\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ ä¼šæœ‰ä¸ªnginx.confï¼Œå’Œ/etc/nginx/conf.dé‡Œé¢çš„ç”¨æˆ·é…ç½®æ–‡ä»¶\n/etc/nginx\t- nginx.conf\t- conf.d\t\t- server1.conf\t\t- server2.conf\n\nåœ¨nginx.confé‡Œé¢é™¤äº†åŠ è½½ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„serverï¼ŒæŒ‡å‘ä¸€ä¸ªé™æ€æ–‡ä»¶è·¯å¾„ã€‚\n# ç”¨æˆ·é…ç½®æ–‡ä»¶   include /etc/nginx/conf.d/*.conf;   server &#123;       listen       80;       listen       [::]:80;       server_name  _;       root         /usr/share/nginx/html; # é»˜è®¤çš„é™æ€æ–‡ä»¶è·¯å¾„       # Load configuration files for the default server block.       include /etc/nginx/default.d/*.conf;       error_page 404 /404.html;       location = /404.html &#123;       &#125;       error_page 500 502 503 504 /50x.html;       location = /50x.html &#123;       &#125;   &#125;\n\nåœ¨æˆ‘çš„æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªè·¯å¾„é‡Œé¢æ˜¯å¦‚ä¸‹å†…å®¹\n[root@bt-7274:/etc/nginx]# ls /usr/share/nginx/html404.html  50x.html  en-US  icons  img  index.html  nginx-logo.png  poweredby.png\n\næ­¤æ—¶ç›´æ¥åœ¨æµè§ˆå™¨è®¿é—®ä½ çš„ipï¼Œä¼šå±•ç¤ºè¿™ä¸ªé»˜è®¤è·¯å¾„é‡Œé¢çš„index.htmlï¼Œæ˜¯centosçš„ä¸€ä¸ªä»‹ç»é¡µé¢ã€‚\n\nä½†æ˜¯ï¼Œè¿™å¹¶ä¸ä»£è¡¨ä½ å½“å‰æ²¡æœ‰è§£æåˆ°ä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰æ–‡ä»¶ï¼nginxé»˜è®¤æƒ…å†µä¸‹ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰confæ¥ä½œä¸ºipè®¿é—®çš„ç»“æœï¼ˆè¿™æ˜¯å› ä¸ºå¯¹ç”¨æˆ·è‡ªå®šä¹‰confçš„includeæ˜¯åœ¨defualt serverä¹‹å‰çš„ï¼Œä½ å¯ä»¥ç†è§£ä¸ºç”¨æˆ·è‡ªå®šä¹‰æ–‡ä»¶ä¼šåƒCè¯­è¨€çš„å¤´æ–‡ä»¶ä¸€æ ·åœ¨nginx.confä¸­è¢«å±•å¼€ï¼‰\nå½“å‰å®é™…ä¸Šæ˜¯è®¿é—®äº†/etc/nginx/conf.dé‡Œé¢æŒ‰å­—å…¸æ’åºçš„ç¬¬ä¸€ä¸ªç”¨æˆ·confé…ç½®ï¼\n/etc/nginx\t- nginx.conf\t- conf.d\t\t- server1.conf # ç›´æ¥è®¿é—®ipï¼Œä½¿ç”¨äº†è¿™ä¸ªé…ç½®æ–‡ä»¶\t\t- server2.conf\n\nä¸ºä»€ä¹ˆåœ¨æˆ‘è¿™é‡Œä¾æ—§å±•ç¤ºäº†é»˜è®¤çš„é™æ€æ–‡ä»¶è·¯å¾„å‘¢ï¼Ÿæ˜¯å› ä¸ºæˆ‘çš„ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶a.confä¸­æ²¡æœ‰é…ç½®location /ï¼Œå…¨éƒ½æ˜¯å…¶ä»–è·¯å¾„ï¼ˆæ¯”å¦‚/a/ï¼‰çš„åä»£ï¼æ‰€ä»¥nginxå°±å¾€åé‡‡ç”¨äº†æœ€æœ«å°¾çš„default serveré‡Œé¢æä¾›çš„é»˜è®¤é™æ€æ–‡ä»¶ã€‚\nè€Œæµè§ˆå™¨é“¾æ¥å·¦ä¾§çš„çº¢è‰²ä¸å®‰å…¨å°±å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“å‰å…¶å®æ”¶åˆ°äº†ä¸€ä¸ªsslè¯ä¹¦ï¼Œè¿™ä¾¿æ˜¯ä¸Šé¢åŸæ–‡ä¸­æåˆ°çš„ipè®¿é—®ä¼šå› ä¸ºsslè¯ä¹¦æ³„æ¼åŸŸåçš„é—®é¢˜ã€‚\n\næˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸å®‰å…¨æç¤ºï¼Œå†ç‚¹å‡»å³ä¸Šè§’é‚£ä¸ªå¸¦å¾½ç« çš„å°æŒ‰é’®ï¼ŒæŸ¥çœ‹å½“å‰æ”¶åˆ°çš„è¯ä¹¦\n\nå¦‚ä¸‹å›¾ï¼Œå½“å‰æ”¶åˆ°çš„è¿™è¯ä¹¦ï¼Œæ­£æ˜¯æˆ‘çš„/etc/nginx/conf.dä¸­ç¬¬ä¸€ä¸ªç”¨æˆ·é…ç½®é‡Œé¢çš„sslè¯ä¹¦ï¼›å†…éƒ¨åŒ…å«äº†è¯¥è¯ä¹¦å¯¹åº”çš„åŸŸåï¼Œæˆ‘ä»¬çš„åŸŸåå› æ­¤æ³„æ¼ï¼\n\næ€è·¯å›é¡¾å†æ¥ç¼•ä¸€ç¼•æ€è·¯\n\nnginxä¼šå…ˆåŠ è½½ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œæœ«å°¾æ‰æ˜¯é»˜è®¤æŒ‡å‘/usr/share/nginx/htmlé™æ€è·¯å¾„çš„é…ç½®\nå½“ä½ ä½¿ç”¨ipè®¿é—®å½“å‰æœåŠ¡å™¨ï¼Œnginxä¼šç»™æµè§ˆå™¨å‘é€/etc/nginx/conf.dä¸­æŒ‰å­—å…¸åºæ’åœ¨ç¬¬ä¸€ä½çš„ç”¨æˆ·é…ç½®æ–‡ä»¶ä¸­çš„sslè¯ä¹¦ï¼ˆå³ä¸Šå›¾æ‰€ç¤ºè¯ä¹¦ï¼‰\næ¶æ„è®¿é—®äººå‘˜å¯ä»¥é€šè¿‡éå†è®¿é—®æ‰€æœ‰IPåœ°å€ï¼Œå½“è®¿é—®ä½ çš„æœåŠ¡å™¨IPåœ°å€æ—¶ï¼Œä»–æ‹¿åˆ°ä¸€ä¸ªsslè¯ä¹¦ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ä¸€ä¸ªåŸŸåAï¼›\nå‡è®¾ä½ çš„åŸŸåAæ˜¯æŒ‰åŸŸåA-&gt;CDN-&gt;æœåŠ¡å™¨IPæ¥è¿›è¡Œè§£æçš„ï¼Œæ­¤æ—¶æ¶æ„è®¿é—®äººå‘˜å°±é€šè¿‡è¿™ä¸ªsslè¯ä¹¦ç›´æ¥å¾—åˆ°äº†åŸŸåA-&gt;æœåŠ¡å™¨IPæˆ–è€…CDNåŸŸå-&gt;æœåŠ¡å™¨IPçš„å¯¹åº”å…³ç³»ï¼Œå®Œå…¨ç»•è¿‡äº†CDNçš„æœåŠ¡å™¨ï¼›\nCDNåŸŸåå¯ä»¥é€šè¿‡ping åŸŸåAç›´æ¥å¾—åˆ°ï¼ŒåŒæ ·ä¹Ÿæ˜¯å¾—åˆ°äº†åŸŸåA-&gt;æœåŠ¡å™¨IPçš„æ˜ å°„å…³ç³»ï¼ŒçŸ¥é“äº†ä½ çš„æºç«™IPï¼›\næ­¤æ—¶ä»–å°±å¯ä»¥é€šè¿‡ä¿®æ”¹hostså¼ºåˆ¶è®©åŸŸåAæŒ‡å‘æœåŠ¡å™¨IPï¼Œç»•è¿‡CDNç›´æ¥æ”»å‡»ä½ çš„æºç«™ï¼›\n\nå¥—äº†CDNè¿˜æš´éœ²æºç«™IPè‚¯å®šä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼\nè§£å†³åŠæ³•åœ¨/etc/nginx/conf.dä¸­ç›´æ¥æ·»åŠ ä¸€ä¸ªa.confï¼Œè®©å…¶æ’åºåœ¨å­—å…¸åºçš„ç¬¬ä¸€ä½ï¼Œé‡Œé¢å†™å…¥å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­server_name _çš„å«ä¹‰æ˜¯é™¤äº†æˆ‘ä»¬é…ç½®è¿‡çš„åŸŸåå¤–çš„å…¶ä»–è®¿é—®\nserver &#123;    listen 80 default_server;    server_name _;    # Redirect all HTTP requests to HTTPS.    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 default_server;    server_name _;    # ä¸ç”¨è¿”å› 444 äº†ï¼Œç›´æ¥æ‹’ç»æ¡æ‰‹    ssl_reject_handshake on;    # return 444;&#125;\n\né…ç½®åç›´æ¥é‡å¯nginxï¼Œæ²¡æœ‰æŠ¥é”™å°±æ˜¯okäº†\n[root@bt-7274:/etc/nginx/conf.d]# systemctl restart nginx[root@bt-7274:/etc/nginx/conf.d]# lltotal 28-rw-r--r-- 1 root root  193 Dec  9 17:52 a.conf\n\næ­¤æ—¶ç›´æ¥è®¿é—®å°±ä¼šæŠ¥é”™sslçš„alertäº†ï¼Œä½†æ˜¯edgeä¸­ä¼°è®¡æ˜¯å› ä¸ºç¼“å­˜çš„é—®é¢˜ï¼Œä¾æ—§èƒ½çœ‹åˆ°è¯ä¹¦\n\næ¢ç«ç‹çœ‹ä¸€ä¸‹ï¼Œæ— æ³•è¿æ¥ï¼Œæ²¡æœ‰è¯ä¹¦ï¼Œç›®æ ‡è¾¾æˆï¼\n\nè¿™é‡Œé¡ºå¸¦è´´ä¸€ä¸‹ç«ç‹ä¸­ä¸€ä¸ªæ­£å¸¸sslç½‘ç«™ä¼šæ˜¾ç¤ºæˆä»€ä¹ˆæ ·å­ã€‚å¦‚ä¸‹æ˜¯äº¬ä¸œå®˜ç½‘ï¼Œåœ¨é”çš„æŒ‰é’®é‡Œé¢èƒ½çœ‹åˆ°è¯ä¹¦çš„é¢å‘è€…ï¼Œè€Œä¸Šå›¾ä¿®æ”¹å®Œæ¯•é…ç½®æ–‡ä»¶åçš„æµ‹è¯•ä¸­æ²¡æœ‰çœ‹åˆ°è¯ä¹¦é¢å‘è€…ï¼Œå³æˆ‘ä»¬çš„è¯ä¹¦å¹¶æ²¡æœ‰æ³„æ¼ï¼Œç›®çš„è¾¾æˆã€‚\n\nå¦å¤–ï¼Œæˆ‘è¯•äº†è¯•æˆ‘å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨ä½¿ç”¨çš„1panelå®‰è£…çš„OpenRestyï¼Œè¿™ä¸ªæ¯”è¾ƒå¥½ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ç›´æ¥è®¿é—®IPåœ°å€è¿”å›çš„æ˜¯404ï¼Œä¸”æ²¡æœ‰æš´éœ²è¯ä¹¦ã€‚ä¸éœ€è¦è‡ªå·±é¢å¤–åšé…ç½®äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","nginx"]},{"title":"ã€Linuxã€‘Ubuntuä¸‹å¿«é€Ÿåˆ‡æ¢gccç‰ˆæœ¬","url":"/posts/1907126934/","content":"æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Ubuntu22.04ç‰ˆæœ¬ä¸‹å®ç°gccç‰ˆæœ¬çš„å¿«é€Ÿåˆ‡æ¢ã€‚\nå‰è¨€æœ‰çš„æ—¶å€™ï¼Œä¸åŒç‰ˆæœ¬çš„gccä¼šé€ æˆä¸€äº›ç»†å¾®çš„å·®å¼‚ï¼Œå¯¼è‡´ç›¸å…³çš„ä¸€äº›å·¥å…·ä¸å…¼å®¹ï¼Œæ¯”å¦‚ç”¨äºå•å…ƒæµ‹è¯•è¦†ç›–ç‡ç”Ÿæˆçš„gcov&#x2F;lcovå·¥å…·ï¼Œåœ¨ä¸åŒçš„gccç‰ˆæœ¬ä¸‹å¯èƒ½ä¼šå‡ºç°ä¸åŒçš„ç»“æœã€‚\nä¸ºäº†ç¡®å®šæ˜¯å¦æ˜¯gccç¼–è¯‘å™¨ç‰ˆæœ¬ä¸åŒé€ æˆçš„è¿™äº›å·®å¼‚ï¼Œæœ‰çš„æ—¶å€™éœ€è¦åœ¨ä¸€å°ä¸»æœºä¸Šè£…å¤šä¸ªç‰ˆæœ¬çš„gccï¼Œä¸åœçš„åˆ‡æ¢ä»¥æµ‹è¯•é—®é¢˜ã€‚\nå‡è®¾æˆ‘ä»¬çš„ubuntuä¸»æœºä¸Šå®‰è£…äº†gcc 11.4 ç‰ˆæœ¬å’Œ gcc 9.5 ç‰ˆæœ¬ï¼Œä¸”å½“å‰gccå‘½ä»¤æŒ‡å‘çš„æ˜¯ 11.4 ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨gcc-9å‘½ä»¤æ¥ä½¿ç”¨9.5ç‰ˆæœ¬çš„gccã€‚\nä½†æ˜¯ï¼Œå¯¹äºä¸€äº›å·²ç»å†™æ­»ä½¿ç”¨gccè¿™ä¸ªå‘½ä»¤çš„è„šæœ¬æˆ–ç¼–è¯‘å·¥å…·è€Œè¨€ï¼Œå®ƒä»¬å°±ä¸æ˜¯é‚£ä¹ˆå¥½ä¿®æ”¹gccä¸ºgcc-9çš„ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯è®©ç³»ç»Ÿçš„gccå‘½ä»¤èƒ½åœ¨11.4ç‰ˆæœ¬å’Œ9.5ç‰ˆæœ¬ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚\nå…¶ä¸­ä¸€ä¸ªåŠæ³•æ˜¯æ‰‹åŠ¨æ›¿æ¢gccå’Œg++çš„å‘½ä»¤è½¯è¿æ¥ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¹¶ä¸æ–¹ä¾¿ï¼Œubuntuä¸‹æœ‰æ›´å¥½çš„æ“ä½œï¼Œè¯·çœ‹ä¸‹æ–‡ã€‚\nå®‰è£…gcc9.5é»˜è®¤æƒ…å†µä¸‹ï¼Œubuntu22.04å®‰è£…çš„gccç‰ˆæœ¬æ˜¯11.4\n&gt; gcc --version          gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0Copyright (C) 2021 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nå…ˆç»™ä½ çš„ä¸»æœºå®‰è£…ä¸Šgcc9.4ç‰ˆæœ¬\nsudo apt install gcc-9 g++-9\n\nå®‰è£…ä¹‹åï¼Œä½ åº”è¯¥å¯ä»¥é€šè¿‡gcc-9å‘½ä»¤æ¥ä½¿ç”¨9.5ç‰ˆæœ¬çš„gccäº†\n&gt; g++-9 --versiong++-9 (Ubuntu 9.5.0-1ubuntu1~22.04) 9.5.0Copyright (C) 2019 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\né…ç½®update-alternativesæˆ‘ä»¬å¯ä»¥å°†11å’Œ9ç‰ˆæœ¬æ·»åŠ åˆ°update-alternativeså·¥å…·ä¸­ï¼Œå°±å¯ä»¥æ–¹ä¾¿çš„åˆ‡æ¢ï¼Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®å‘½ä»¤çš„è½¯è¿æ¥ã€‚\nå·¥å…·åŸºæœ¬ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹æ˜¯å·¥å…·ä½¿ç”¨çš„ä¸€ä¸ªåŸºæœ¬ç¤ºä¾‹\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 20 --slave /usr/bin/g++ g++ /usr/bin/g++-11\n\n\n--install ä»£è¡¨æˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ªæ–°çš„æœåŠ¡å\n/usr/bin/gcc ä»£è¡¨æˆ‘ä»¬ç›®æ ‡çš„æœ€ç»ˆåœ°å€ï¼Œåˆ‡æ¢è½¯é“¾æ¥çš„æ—¶å€™ä¼šåˆ‡æ¢è¯¥åœ°å€çš„è½¯é“¾æ¥\ngccä»£è¡¨æˆ‘ä»¬ç”¨äºç®¡ç†æœåŠ¡çš„åå­—\n/usr/bin/gcc-11 ä»£è¡¨è¢«ç®¡ç†çš„å‘½ä»¤çš„ç»å¯¹è·¯å¾„ï¼ˆä¼šç”¨è¿™ä¸ªå‘½ä»¤æ¥æ›¿æ¢ç¬¬äºŒä¸ªå‚æ•°çš„è½¯é“¾æ¥ï¼‰\n20 ä»£è¡¨ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ã€‚\n--slave ä»£è¡¨ä»å±å‘½ä»¤ï¼Œå‚æ•°é¡ºåºå’Œå‰é¢è¿™å‡ ä¸ªæ˜¯ä¸€æ ·çš„ï¼Œé…ç½®çš„æ˜¯g++å‘½ä»¤\n\nåœ¨update-alternativeså‘½ä»¤çš„å¸®åŠ©ä¸­å¯ä»¥çœ‹åˆ°installå’Œslaveçš„å…³ç³»ï¼Œslaveå‘½ä»¤å°±æ˜¯è·Ÿç€installå‘½ä»¤æ¥ä½¿ç”¨çš„\n--install &lt;link&gt; &lt;name&gt; &lt;path&gt; &lt;priority&gt;   [--slave &lt;link&gt; &lt;name&gt; &lt;path&gt;] ...                          add a group of alternatives to the system.\n\nå®ƒæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®å°±æ˜¯è®©ä¸»ä»å‘½ä»¤æœ‰ä¸€ä¸ªå¯¹åº”å…³ç³»ï¼šå½“æˆ‘ä»¬æŠŠgccå‘½ä»¤åˆ‡æ¢æˆ11ç‰ˆæœ¬åï¼Œä½œä¸ºslaveçš„g++å‘½ä»¤ä¹Ÿä¼šè·Ÿç€ä¸€èµ·å˜åŒ–ã€‚\nslaveå¯ä»¥æ·»åŠ å¤šä¸ªï¼Œåæ–‡ä¼šåšæ¼”ç¤ºã€‚\næ·»åŠ gccç‰ˆæœ¬é…ç½®ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰å¯ä»¥ç”¨æ¥ç›´æ¥æ›¿æ¢gccçš„ç‰ˆæœ¬å·ï¼Œä¼šå‘ç°ä¹ˆæœ‰ï¼Œå› ä¸ºä¸¤ä¸ªgccç‰ˆæœ¬éƒ½æ²¡æœ‰åŠ å…¥åˆ°è¿™ä¸ªå·¥å…·ä¸­ã€‚\n&gt; sudo update-alternatives --config gccupdate-alternatives: error: no alternatives for gcc\n\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹å½“å‰è£…å¥½çš„gccåŒ…ï¼Œå¯ä»¥çœ‹åˆ°æœ‰gcc 11å’Œ9ã€‚\n&gt; dpkg -l | grep gccii  gcc                               4:11.2.0-1ubuntu1                                               amd64        GNU C compilerii  gcc-11                            11.4.0-1ubuntu1~22.04                                           amd64        GNU C compilerii  gcc-11-base:amd64                 11.4.0-1ubuntu1~22.04                                           amd64        GCC, the GNU Compiler Collection (base package)ii  gcc-12-base:amd64                 12.3.0-1ubuntu1~22.04                                           amd64        GCC, the GNU Compiler Collection (base package)ii  gcc-9                             9.5.0-1ubuntu1~22.04                                            amd64        GNU C compilerii  gcc-9-base:amd64                  9.5.0-1ubuntu1~22.04                                            amd64        GCC, the GNU Compiler Collection (base package)ii  lib32gcc-s1                       12.3.0-1ubuntu1~22.04                                           amd64        GCC support library (32 bit Version)ii  libgcc-11-dev:amd64               11.4.0-1ubuntu1~22.04                                           amd64        GCC support library (development files)ii  libgcc-9-dev:amd64                9.5.0-1ubuntu1~22.04                                            amd64        GCC support library (development files)ii  libgcc-s1:amd64                   12.3.0-1ubuntu1~22.04                                           amd64        GCC support library\n\næ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°†gcc-9æ·»åŠ åˆ°update-alternativeså·¥å…·ä¸­ï¼Œè®©æˆ‘ä»¬å¯ä»¥é€šè¿‡configæ¥åˆ‡æ¢gccç‰ˆæœ¬\n&gt; sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 20 --slave /usr/bin/g++ g++ /usr/bin/g++-9update-alternatives: using /usr/bin/gcc-9 to provide /usr/bin/gcc (gcc) in auto mode\n\nä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹å¯åˆ‡æ¢çš„gccç‰ˆæœ¬ï¼Œå› ä¸ºå½“å‰åªç»™å·¥å…·é‡Œæ·»åŠ äº†ä¸€ä¸ªgcc-9ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤ºonly one alternativeï¼Œå³åªæœ‰ä¸€ä¸ªå¯é€‰é¡¹çš„æ„æ€ï¼Œå·¥å…·ä¼šè®¤ä¸ºæ²¡æœ‰å•¥å¥½é…ç½®çš„ã€‚\n&gt; sudo update-alternatives --config gccThere is only one alternative in link group gcc (providing /usr/bin/gcc): /usr/bin/gcc-9Nothing to configure.\n\nè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥æŠŠåŸæœ¬å®‰è£…å¥½çš„11.4ç‰ˆæœ¬çš„gccä¹Ÿç»™æ·»åŠ åˆ°è¿™ä¸ªå·¥å…·é‡Œé¢ã€‚ä¼˜å…ˆçº§çš„æ•°å­—å¯ä»¥æ ¹æ®ä½ çš„æƒ…å†µè‡ªè¡Œè°ƒæ•´\nsudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 25 --slave /usr/bin/g++ g++ /usr/bin/g++-11\n\nåˆ‡æ¢gccç‰ˆæœ¬æˆåŠŸç„¶åå†æ¬¡æ‰§è¡Œsudo update-alternatives --config gccï¼Œæ­¤æ—¶å°±èƒ½çœ‹åˆ°ä¸¤ä¸ªç‰ˆæœ¬çš„å¯é€‰é¡¹äº†ã€‚\n&gt; sudo update-alternatives --config gccThere are 2 choices for the alternative gcc (providing /usr/bin/gcc).  Selection    Path             Priority   Status------------------------------------------------------------* 0            /usr/bin/gcc-9    20        auto mode  1            /usr/bin/gcc-11   20        manual mode  2            /usr/bin/gcc-9    20        manual modePress &lt;enter&gt; to keep the current choice[*], or type selection number:\n\né”®å…¥åºå·æ¥é€‰æ‹©ä½ éœ€è¦åˆ‡æ¢çš„gccç‰ˆæœ¬ï¼Œå›è½¦å³å¯\n&gt; gcc --versiongcc (Ubuntu 9.5.0-1ubuntu1~22.04) 9.5.0Copyright (C) 2019 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“å‰çš„ç³»ç»Ÿgccå·²ç»è¢«æ¢æˆäº†9.5ç‰ˆæœ¬çš„äº†ï¼Œåˆ‡æ¢æˆåŠŸï¼è€Œä¸”å› ä¸ºæˆ‘ä»¬é€šè¿‡--slaveé…ç½®äº†g++å‘½ä»¤çš„æ›¿æ¢æ“ä½œï¼Œæ‰€ä»¥g++çš„ç‰ˆæœ¬ä¹Ÿè·Ÿç€ä¸€èµ·æ›¿æ¢æˆ9.5äº†\n&gt; g++ --versiong++ (Ubuntu 9.5.0-1ubuntu1~22.04) 9.5.0Copyright (C) 2019 Free Software Foundation, Inc.This is free software; see the source for copying conditions.  There is NOwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nå°†gccæ¢å›gcc 11ç‰ˆæœ¬æ˜¯ç›¸åŒçš„æ“ä½œï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚\næ·»åŠ å¤šä¸ªslaveå’Œgccæ†ç»‘çš„è¿˜æœ‰ä¸€ä¸ªç”¨äºåˆ†æ”¯è¦†ç›–ç‡æ£€æµ‹çš„gcovå‘½ä»¤ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡--slaveé€‰é¡¹å°†å…¶ç»‘å®šåˆ°ç‰ˆæœ¬ä¸­ï¼Œè®©gcovçš„å‘½ä»¤ç‰ˆæœ¬ä¹Ÿä¼šæ›´ç€gccç‰ˆæœ¬ä¸€åŒåˆ‡æ¢\n&gt; sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 25 --slave /usr/bin/g++ g++ /usr/bin/g++-11 --slave /usr/bin/gcov gcov /usr/bin/gcov-11update-alternatives: updating alternative /usr/bin/gcc-11 because link group gcc has changed slave links&gt; sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-9 20 --slave /usr/bin/g++ g++ /usr/bin/g++-9 --slave /usr/bin/gcov gcov /usr/bin/gcov-9\n\næ­¤æ—¶ä½¿ç”¨sudo update-alternatives --config gccåˆ‡æ¢gccç‰ˆæœ¬åï¼Œgcovå‘½ä»¤çš„ç‰ˆæœ¬ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚è¿™æ ·æˆ‘ä»¬èƒ½ä¿è¯gcovå’Œgccç‰ˆæœ¬æ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå‡ºç°ä¸ä¸€è‡´å¯¼è‡´çš„å…¼å®¹æ€§é—®é¢˜ã€‚\n&gt; gcov --versiongcov (Ubuntu 9.5.0-1ubuntu1~22.04) 9.5.0Copyright (C) 2019 Free Software Foundation, Inc.This is free software; see the source for copying conditions.There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\nä»å·¥å…·ä¸­åˆ é™¤gccç‰ˆæœ¬å¦‚æœéœ€è¦ä»è¿™ä¸ªå·¥å…·ä¸­åˆ é™¤æŸä¸ªç‰ˆæœ¬ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤\nsudo update-alternatives --remove gcc /usr/bin/gcc-9 \n\nåˆ é™¤åå°±æ— æ³•é€šè¿‡è¯¥å·¥å…·åˆ‡æ¢gccç‰ˆæœ¬ä¸º9äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","Cè¯­è¨€","Cpp"]},{"title":"ã€Linuxã€‘Linux64ä½ç¯å¢ƒä¸‹ç¼–è¯‘32ä½æŠ¥é”™çš„è§£å†³åŠæ³•","url":"/posts/3573352712/","content":"é—®é¢˜å¦‚é¢˜ï¼Œå½“æˆ‘å°è¯•åœ¨wsl2çš„ubuntuä¸­ä½¿ç”¨-m32é€‰é¡¹ç¼–è¯‘32ä½ç¨‹åºçš„æ—¶å€™ï¼Œå‡ºç°äº†ä¸‹é¢çš„ä¸¤ç§æŠ¥é”™\nâ¯ g++ -m32 test.cpp -o test1 &amp;&amp; ./test1In file included from test.cpp:1:/usr/include/stdio.h:27:10: fatal error: bits/libc-header-start.h: No such file or directory   27 | #include &lt;bits/libc-header-start.h&gt;      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~compilation terminated.\n\nâ¯ g++ -m32 test.cpp -o test1 &amp;&amp; ./test1/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/11/libstdc++.so when searching for -lstdc++/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/11/libstdc++.a when searching for -lstdc++/usr/bin/ld: cannot find -lstdc++: No such file or directory/usr/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-linux-gnu/11/libstdc++.so when searching for -lstdc++collect2: error: ld returned 1 exit status\n\nè§£å†³åŸå› æ˜¯å½“å‰ç¼ºå°‘32ä½çš„å¼€å‘åº“ï¼Œéœ€è¦å®‰è£…\nsudo apt install gcc-multilib g++-multilib libc6-dev-i386 -y\n\nå®‰è£…åé‡è¯•ï¼Œç¼–è¯‘æˆåŠŸã€‚\nâ¯ g++ -m32  test.cpp -o test1 &amp;&amp; ./test14\n\nä»£ç å¾ˆç®€å•ï¼Œæ˜¯ä¸€ä¸ªæ‰“å°æŒ‡é’ˆå¤§å°çš„ä»£ç ï¼Œåœ¨32ä½ä¸‹æŒ‡é’ˆå¤§å°æ˜¯4ï¼Œ64ä½ä¸‹æŒ‡é’ˆå¤§å°æ˜¯8ï¼›\n#include &lt;stdio.h&gt;int main()&#123;    void * ptr= nullptr;    printf(&quot;%d\\n&quot;,sizeof(ptr));    return 0;&#125;\n\næ›´å¤šè¯´æ˜åœ¨linuxä¸‹å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ä½ çš„ç³»ç»Ÿä½æ•°ã€‚\nâ¯ getconf LONG_BIT64\n\nå‚è€ƒæ–‡ç« ï¼šassembly - &#x2F;usr&#x2F;bin&#x2F;ld: skipping incompatible &#x2F;usr&#x2F;lib&#x2F;gcc&#x2F;x86_64-linux-gnu&#x2F;9&#x2F;libstdc++.a when searching for -lstdc++ &#x2F;usr&#x2F;bin&#x2F;ld: cannot find -lstdc++ - Stack Overflow\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","wsl","ubuntu"]},{"title":"ã€nginxã€‘nginxé€šè¿‡é…ç½®æ–‡ä»¶å…è®¸uptimerobotçš„è¯·æ±‚","url":"/posts/1547739098/","content":"é—®é¢˜è¯´æ˜å‰å‡ å¤©ï¼Œæˆ‘ç»™æˆ‘çš„artalkä¸Šäº†IPå±è”½ï¼Œåªæ”¾è¡Œå›½å†…IPï¼Œä¸å…è®¸ä»»ä½•å›½å¤–çš„IPåœ°å€è¯„è®ºã€‚\nã€Nginxã€‘nginxé€šè¿‡é…ç½®æ–‡ä»¶é˜»æ­¢æµ·å¤–ipè®¿é—® | æ…•é›ªçš„å¯’èˆ\nç„¶åå°±å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä½¿ç”¨çš„uptimerobotè¿™ä¸ªåœ¨çº¿çŠ¶æ€ç›‘æ§ç¨‹åºæ˜¯å›½å¤–çš„ï¼Œå®ƒçš„è¯·æ±‚è‡ªç„¶ä¹Ÿæ˜¯é€šè¿‡æµ·å¤–IPå‘èµ·çš„ï¼Œæ­¤æ—¶å°±ä¼šè¢«æˆ‘æœåŠ¡å™¨çš„nginxæ‹¦æˆªï¼Œå¯¼è‡´403ï¼Œuptimerobotè®¤ä¸º403ä¹Ÿæ˜¯æ— æ³•è®¿é—®ï¼Œservice downäº†ã€‚\n\nè§£å†³ä¹‹å‰é€šè¿‡æŠ˜è…¾ï¼Œå·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨nginxçš„é…ç½®æ–‡ä»¶æ¥allowæˆ–è€…denyä¸€ç³»åˆ—ipåœ°å€ï¼Œé‚£ä¹ˆuptimerobotçš„è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆå¥½è§£å†³ï¼šåªè¦æˆ‘ä»¬çŸ¥é“uptimerobbotçš„è¯·æ±‚æ¥æºipï¼Œé‚£ä¹ˆå°†å…¶å†™å…¥ä¸€ä¸ªå¦‚ä¸‹ç±»ä¼¼çš„nginxé…ç½®æ–‡ä»¶ï¼Œå†åœ¨å…·ä½“çš„locationä¸­includeï¼Œæ”¾è¡Œå¯¹åº”ipåœ°å€å³å¯ã€‚\nallow uptime-robot-ip1;allow uptime-robot-ip2;\n\næˆ‘åœ¨uptimerobotçš„å®˜ç½‘æ‰¾åˆ°äº†å®ƒä»¬çš„ipåœ°å€åˆ—è¡¨ï¼šLocations and IPs | UptimeRobot\ntxtæ–‡ä»¶ä¹Ÿæœ‰çš„ï¼š\n\nipv4ï¼šuptimerobot.com&#x2F;inc&#x2F;files&#x2F;ips&#x2F;IPv4.txt\nipv4+ipv6ï¼šuptimerobot.com&#x2F;inc&#x2F;files&#x2F;ips&#x2F;IPv4andIPv6.txt\n\nç”¨å¦‚ä¸‹è„šæœ¬æ¥å®ç°\n#!/bin/bashrm -f IPv4.txt black_uptime_`date +%F`.confwget https://uptimerobot.com/inc/files/ips/IPv4.txt# åˆ é™¤åŸæœ‰æ–‡ä»¶æ¯ä¸€è¡Œçš„å›è½¦ç¬¦å·sed -i &#x27;s/\\r//g&#x27; IPv4.txt while IFS= read -r linedo  echo &quot;allow $line;&quot; &gt;&gt; black_uptime_`date +%F`.confdone &lt; IPv4.txtrm -f /etc/nginx/black_uptime.conf &amp;&amp; \\ln -s $PWD/black_uptime_`date +%F`.conf /etc/nginx/black_uptime.conf\n\nå°†å…¶å†™å…¥ä¸€ä¸ªuptimerobot.shæ–‡ä»¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œå®ƒ\nsh uptimerobot.sh\n\nè¿™ä¸ªè„šæœ¬ä¼šåœ¨å½“å‰ç›®å½•é‡Œé¢ä¸‹è½½uptimerobotçš„è¿™ä¸ªIPv4.txtï¼Œå¹¶ä»¥nginxçš„å½¢å¼å†™ä¸ºallowï¼Œæœ€ååœ¨/etc/nginxé‡Œé¢åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ /etc/nginx/black_uptime.conf æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹\nallow 18.116.158.121;allow 18.223.50.16;allow 54.241.175.147;\n\néšåæˆ‘ä»¬è¿›å…¥nginxçš„é…ç½®æ–‡ä»¶ï¼Œåœ¨å¯¹åº”ç«™ç‚¹é…ç½®æ–‡ä»¶çš„locationé‡Œé¢ï¼Œincludeè¿™ä¸ªé…ç½®æ–‡ä»¶å°±å¯ä»¥äº†\nlocation / &#123;\t# å…è®¸uptimerobotçš„è¯·æ±‚\tinclude /etc/nginx/black_uptime.conf;\tdeny all; # æ‹’ç»å…¶ä»–æ‰€æœ‰è¯·æ±‚&#125;\n\næ·»åŠ ä¹‹åï¼Œé‡å¯nginxï¼Œé…ç½®å°±ç”Ÿæ•ˆå•¦\nsystemctl restart nginx\n\nå¦‚ä¸‹å›¾ï¼Œuptimerobotå·²ç»å¯ä»¥æ­£å¸¸è¯·æ±‚å’Œç›‘çœ‹æˆ‘çš„artalkè¯„è®ºé¡µé¢äº†\n\nä½¿ç”¨ç±»ä¼¼çš„æ€è·¯ï¼Œä½ å¯ä»¥é€šè¿‡nginxå®ç°è®©ä½ çš„ç«™ç‚¹åªå…è®¸CDNæœåŠ¡å•†çš„IPå›æºï¼Œç¦æ­¢ç›´æ¥è®¿é—®ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["Linux","nginx"]},{"title":"ã€MySQLã€‘windows11å®‰è£…mysql","url":"/posts/1951514193/","content":"æœ¬æ–‡æ˜¯æ‰¾åˆ°çš„ä¸é”™çš„windowsä¸‹å®‰è£…mysqlçš„æ•™ç¨‹ï¼Œåœ¨æˆ‘çš„windows11ç¬”è®°æœ¬ä¸ŠæˆåŠŸå®‰è£…å¹¶èƒ½æ­£å¸¸ä½¿ç”¨ã€‚åœ¨æ­¤è½¬è½½ä¸‹æ¥\n\n\nåŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/ouyangzhenxin/article/details/125514255\nä¸€ã€æå‰è®¤çŸ¥è¦æƒ³åœ¨windowsä¸­è¿è¡Œmysqlï¼Œéœ€è¦32ä½æˆ–è€…64çš„windowsæ“ä½œç³»ç»Ÿï¼Œä¾‹å¦‚ï¼šwindows10ã€windows11ç­‰ï¼›\nwindowså¹³å°ä¸‹æä¾›äº†ä¸¤ç§å®‰è£…æ–¹å¼ï¼š\n\nmysqläºŒè¿›åˆ¶åˆ†å‘ç‰ˆæœ¬ï¼ˆ.msiå®‰è£…æ–‡ä»¶ï¼‰ï¼›\n\nå…å®‰è£…ç‰ˆï¼ˆ.zipå‹ç¼©æ–‡ä»¶ï¼‰\n\n\nä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨äºŒè¿›åˆ¶åˆ†å‘ç‰ˆæœ¬æ¥å®‰è£…ã€‚\næˆ‘è¿™é‡Œä½¿ç”¨çš„ç¯å¢ƒæ˜¯ï¼š\nwindows11-64ä½\nmysqläºŒè¿›åˆ¶åˆ†å‘ç‰ˆæœ¬\n\nâ€‹    \näºŒã€ä¸‹è½½mysqlå®‰è£…åŒ…1ã€æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®mysqlå®˜ç½‘ä¸­çš„ä¸‹è½½åœ°å€https://dev.mysql.com/downloads/installer/\n\nâ€‹    \n2ã€ç‚¹å‡»ä¸‹è½½æŒ‰é’®ï¼Œä¸‹è½½å®‰è£…åŒ…åˆ°æœ¬åœ°è£…ç¨‹åºæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸ºmysql-installer-web-communityå’Œmysql-installer-communitylï¼Œå…¶ä¸­mysql-installer-web-communityä¸ºåœ¨çº¿å®‰è£…ç‰ˆæœ¬ï¼Œmysql-installer-communitylä¸ºç¦»çº¿å®‰è£…ç‰ˆæœ¬ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯å½“ç„¶æ˜¯é€‰æ‹©ç¦»çº¿å®‰è£…ç‰ˆæœ¬äº†ã€‚\n\nç„¶ååœ¨ä¸‹é¢çš„ç•Œé¢ä¸­ç‚¹å‡»ï¼ˆNo thanks, just start my download.ï¼‰æ„æ€æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸ç™»å½•ä¹Ÿä¸æ³¨å†Œï¼Œä»…ä»…æ˜¯ä¸‹è½½ä¸€ä¸ªå®‰è£…åŒ…ã€‚\n\nç„¶åå°±ä¼šå¯åŠ¨æˆ‘ä»¬çš„ä¸‹è½½äº†ï¼Œå½“æˆ‘ä»¬ä¸‹è½½ç»“æŸä¹‹åï¼Œä¼šå¾—åˆ°ä¸‹é¢çš„mysqlè½¯ä»¶å®‰è£…åŒ…ï¼›\n\nä¸‰ã€å®‰è£…mysqlåŒå‡»mysqlå®‰è£…åŒ…ï¼Œç¨ç­‰ä¸€ä¼šå„¿ä¹‹åï¼Œå‡ºç°å¦‚ä¸‹å®‰è£…ç•Œé¢ï¼›\n\nå¯ä»¥çœ‹åˆ°æœ‰5ä¸­å®‰è£…ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\nDeveloper Defaultï¼šé»˜è®¤å®‰è£…ç±»å‹\n\nServer onlyï¼šä»…ä½œä¸ºæœåŠ¡å™¨\n\nClient onlyï¼šä»…ä½œä¸ºå®¢æˆ·ç«¯\n\nFullï¼šå®Œå…¨å®‰è£…\n\nCustomï¼šè‡ªå®šä¹‰å®‰è£…\n\n\nåœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©Customï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰å®‰è£…ï¼Œç„¶åç‚¹å‡»Nextï¼›\n\nå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼›\n\næˆ‘ä»¬è¿›è¡Œé€‰æ‹©æ€§çš„å®‰è£…ï¼›\næˆ‘ä»¬é€‰è£…MySQL Server 8.0.29-X64ã€MYSQL Documentation 8.0.29-X86å’ŒSamples and Examples 8.0.29-X86å³å¯ã€‚\n\nç„¶åç‚¹å‡»Nextç•Œé¢ï¼Œå‡ºç°ä¸‹å›¾ï¼Œæˆ‘ä»¬ç‚¹å‡»Executeï¼ˆæ‰§è¡Œï¼‰ï¼š\n\nç„¶åå°±ä¼šæ‰§è¡Œå®‰è£…äº†ï¼Œå¦‚ä¸‹å›¾ï¼š\n\nç„¶åæˆ‘ä»¬è€å¿ƒç­‰å¾…ï¼Œç›´è‡³å‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œæˆ‘ä»¬ç‚¹å‡»Nextï¼›\n\nå‡ºç°ä¸‹å›¾ï¼Œæˆ‘ä»¬ä¾æ—§ç‚¹å‡»Nextï¼›\n\nå››ã€é…ç½®mysqlå‡ºç°æœåŠ¡å™¨ç±»å‹é…ç½®çª—å£ï¼Œå¦‚å›¾ï¼š\n\nå½“æˆ‘ä»¬ç‚¹å‡»Config Typeçš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å‡ºç°å‡ ä¸ªé€‰é¡¹ï¼›\n\nä¸Šé¢å‡ ä¸ªå«ä¹‰åˆ†åˆ«æ˜¯ï¼š\n\nDevelopment Machineï¼ˆå¼€å‘æœºå™¨ï¼‰ï¼šè¯¥é€‰é¡¹ä»£è¡¨å…¸å‹ä¸ªäººç”¨æ¡Œé¢å·¥ä½œç«™ã€‚å‡å®šæœºå™¨ä¸Šè¿è¡Œç€å¤šä¸ªæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œå°†MySQLæœåŠ¡å™¨é…ç½®æˆä½¿ç”¨æœ€å°‘çš„ç³»ç»Ÿèµ„æºã€‚\n\nServer Machineï¼ˆæœåŠ¡å™¨ï¼‰ï¼šè¯¥é€‰é¡¹ä»£è¡¨æœåŠ¡å™¨ï¼ŒMySQLæœåŠ¡å™¨å¯ä»¥åŒå…¶ä»–åº”ç”¨ç¨‹åºä¸€èµ·è¿è¡Œï¼Œä¾‹å¦‚FTPã€Emailå’ŒWebæœåŠ¡å™¨ã€‚MySQLæœåŠ¡å™¨é…ç½®æˆä½¿ç”¨é€‚å½“æ¯”ä¾‹çš„ç³»ç»Ÿèµ„æºã€‚\n\nDedicated Machineï¼ˆä¸“ç”¨æœåŠ¡å™¨ï¼‰ï¼šè¯¥é€‰é¡¹ä»£è¡¨åªè¿è¡ŒMySQLæœåŠ¡çš„æœåŠ¡å™¨ã€‚å‡å®šæ²¡æœ‰è¿è¡Œå…¶ä»–æœåŠ¡ç¨‹åºï¼ŒMySQLæœåŠ¡å™¨é…ç½®æˆä½¿ç”¨æ‰€æœ‰å¯ç”¨ç³»ç»Ÿèµ„æºã€‚\n\n\nåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Development Machineï¼ˆå¼€å‘æœºå™¨ï¼‰ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œåˆ«çš„é»˜è®¤é…ç½®éƒ½ä¸åŠ¨ï¼Œç›´æ¥ç‚¹å‡»Nextã€‚\nå‡ºç°å¦‚å›¾çš„æƒé™è®¾ç½®æ–¹å¼çª—å£ï¼Œç¬¬ä¸€ä¸ªå•é€‰é¡¹çš„å«ä¹‰æ˜¯MySQL 8.0æä¾›çš„æ–°çš„æˆæƒæ–¹å¼ï¼Œé‡‡ç”¨SHA256åŸºç¡€çš„å¯†ç åŠ å¯†æ–¹æ³•ï¼›ç¬¬äºŒä¸ªå•é€‰é¡¹çš„å«ä¹‰æ˜¯ä¼ ç»Ÿæˆæƒæ–¹æ³•ï¼ˆä¿ç•™5.xç‰ˆæœ¬å…¼å®¹æ€§ï¼‰ã€‚è¿™é‡Œé€‰æ‹©ç¬¬äºŒä¸ªå•é€‰é¡¹ã€‚\n\nç‚¹å‡»Nextä¹‹åï¼Œæˆ‘ä»¬å°±åœ¨æ–°å¼¹å‡ºçš„ç•Œé¢ä¸­ï¼Œé…ç½®mysqlæ•°æ®åº“çš„rootç”¨æˆ·åç™»å½•ä¿¡æ¯äº†ï¼Œè¿™é‡Œæˆ‘è®¾ç½®çš„æ˜¯Yunweijia0909ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥ä¸¤éå“ˆï¼›\nå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªç•Œé¢ä¸­æ–°æ·»åŠ å…¶ä»–ç”¨æˆ·ï¼Œè¿™ä¸ªæ ¹æ®å®é™…æƒ…å†µæ¥é…ç½®å³å¯ï¼›\n\né…ç½®å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­ç‚¹å‡»NextæŒ‰é’®ï¼›\nç„¶åå°±å¯ä»¥é…ç½®æ•°æ®åº“åå­—äº†ï¼Œè¿™é‡Œæˆ‘ä»¬é…ç½®æˆMySQLï¼›\n\nç‚¹å‡»Nextï¼Œç„¶åå†ç‚¹å‡»Executeï¼Œå¦‚å›¾ï¼š\n\nç³»ç»Ÿè‡ªåŠ¨é…ç½®MySQLæœåŠ¡å™¨ã€‚é…ç½®å®Œæˆåï¼Œå•å‡»Finishï¼ˆå®Œæˆï¼‰æŒ‰é’®ï¼Œå¼¹å‡ºæ–°å¯¹è¯æ¡†;\n\næ¥ä¸‹æ¥ç•Œé¢ä¸­ç‚¹å‡»Nextä¹‹åï¼Œå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼š\n\nåœ¨è¿™é‡Œæˆ‘ä»¬è¾“å…¥ä¹‹å‰é…ç½®çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå³Yunweijia0909ï¼Œç„¶åç‚¹å‡»CheckæŒ‰é’®ï¼Œå°±ä¼šå‘ç°ä»–å³ä¸Šè§’çš„Statuså˜æˆäº†Connection succeededï¼Œè¡¨ç¤ºè¿æ¥æˆåŠŸäº†ã€‚ç¡®å®šæ— è¯¯ä¹‹åï¼Œç‚¹å‡»Next;\næ–°ç•Œé¢ä¸­ç‚¹å‡»Executeï¼›\n\nè¿è¡Œå®Œæ¯•ä¹‹åä¼šå‡ºç°FinishæŒ‰é’®ï¼Œç‚¹å‡»å³å¯ï¼›\n\nç„¶ååœ¨æ–°ç•Œé¢ä¸­ç‚¹å‡»å³ä¸‹è§’çš„Nextï¼Œå‡ºç°ï¼š\n\næˆ‘ä»¬çš„MySQLå°±å®‰è£…å®Œæˆäº†ã€‚\näº”ã€éªŒè¯1ã€ä»»åŠ¡ç®¡ç†å™¨æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ä¹Ÿä¼šå‘ç°æœ‰ä¸€ä¸ªmysql.exeçš„è¿›ç¨‹ï¼Œå¦‚å›¾ï¼š\n\n2ã€å‘½ä»¤è¡ŒPS C:\\Users\\22768&gt; mysql -uroot -pEnter password: *************Welcome to the MySQL monitor.  Commands end with ; or \\g.Your MySQL connection id is 18Server version: 8.0.29 MySQL Community Server - GPLCopyright (c) 2000, 2021, Oracle and/or its affiliates.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#x27;help;&#x27; or &#x27;\\h&#x27; for help. Type &#x27;\\c&#x27; to clear the current input statement.mysql&gt;\n\n\n\nè‡³æ­¤ï¼Œæœ¬æ–‡ç»“æŸã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€Linuxã€‘ubuntuå®‰è£…google gtestæ¡†æ¶","url":"/posts/852447913/","content":"ubuntu 22.04.03 LTS å®‰è£… google gtest æ¡†æ¶\n1.ä¾èµ–é¡¹é¦–å…ˆåœ¨ubuntuä¸­å®‰è£…å¦‚ä¸‹åŒ…\nsudo apt install -y unzip g++ gcc cmake make automake\n\n2.ä¸‹è½½è½¯ä»¶åŒ…è¿›å…¥google gtestçš„githubé¡µé¢ï¼Œä¸‹è½½æºç åŒ… Releases Â· google&#x2F;googletest\nhttps://github.com/google/googletest/archive/refs/tags/v1.14.0.zip\n\n\nå°†å…¶ä¸Šä¼ åˆ°ubuntuä¸­ï¼Œå¹¶è§£å‹ã€‚ä½ ä¹Ÿå¯ä»¥ä¸‹è½½tar.gzçš„å‹ç¼©åŒ…ï¼Œå¹¶ä½¿ç”¨tar -zxvfå‘½ä»¤è§£å‹ã€‚\nunzip googletest-1.14.0.zip\n\n3.å®‰è£…è§£å‹åè¿›å…¥æ–‡ä»¶å¤¹\ncd googletest-1.14.0\n\nä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå®‰è£…google gtestï¼›\ncmake .sudo makesudo make install\n\nè¿™æ ·å°±å®‰è£…æˆåŠŸäº†ã€‚\n4.æµ‹è¯•æ˜¯å¦æ­£å¸¸å®‰è£…ç”¨å¦‚ä¸‹æµ‹è¯•ä»£ç çœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸è°ƒç”¨gtestæ¨¡å—ã€‚\n#include &lt;gtest/gtest.h&gt;#include &lt;iostream&gt;TEST(ADDTEST,ADDTEST_TRUE)&#123;    int num = 1;    EXPECT_EQ(num,1);&#125;int main(int argc, char **argv) &#123;   std::cout &lt;&lt; &quot;Running main() from gtest_main.cc\\n&quot;;   testing::InitGoogleTest(&amp;argc, argv);   return RUN_ALL_TESTS();  &#125; \n\nç¼–è¯‘å¹¶è¿è¡Œï¼Œæ²¡æœ‰é—®é¢˜ï¼\n$ g++ test.cpp -o test -lgtest$ ./testRunning main() from gtest_main.cc[==========] Running 1 test from 1 test suite.[----------] Global test environment set-up.[----------] 1 test from ADDTEST[ RUN      ] ADDTEST.ADDTEST_TRUE[       OK ] ADDTEST.ADDTEST_TRUE (0 ms)[----------] 1 test from ADDTEST (0 ms total)[----------] Global test environment tear-down[==========] 1 test from 1 test suite ran. (0 ms total)[  PASSED  ] 1 test.\n\næ³¨æ„ï¼Œgtestæ˜¯ä¸€ä¸ªåŠ¨æ€åº“ï¼Œç¼–è¯‘çš„æ—¶å€™éœ€è¦åŠ ä¸Š-lgtestè¿›è¡Œé“¾æ¥ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","å•å…ƒæµ‹è¯•"]},{"title":"ã€åšå®¢ã€‘ä¸ªäººç‹¬ç«‹åšå®¢ç«™ç‚¹åœ¨å†™åšå®¢çš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Ÿ","url":"/posts/2118926128/","content":"\nä¸ªäººç‹¬ç«‹åšå®¢ç«™ç‚¹åœ¨å†™åšå®¢çš„æ—¶å€™åº”è¯¥æ³¨æ„ä»€ä¹ˆï¼Ÿ\n\nè¿™ä¸ªé—®é¢˜æ˜¯æˆ‘å¯¹æŠ€æœ¯ç±»ä¸ªäººåšå®¢å†™ä½œæ—¶çš„çº¯ä¸»è§‚è§è§£ï¼Œå„ä½å°±å›¾ä¸€ä¹çœ‹çœ‹ï¼Œè°¢è°¢ã€‚\n1.æŠŠè¯»è€…å½“ä½œç¬¬ä¸€æ¬¡çœ‹ç›¸å…³æŠ€æœ¯æ–‡ç« è¿™ä¸€ç‚¹å…¶å®å¾ˆéš¾åšåˆ°ï¼ŒåŒ…æ‹¬æˆ‘åœ¨æœ¬ç«™å†™çš„å¾ˆå¤šåšå®¢éƒ½å¹¶æ²¡æœ‰åšåˆ°è¿™ä¸€ç‚¹ã€‚\næ‰€è°“æŠŠè¯»è€…å½“ä½œç¬¬ä¸€æ¬¡çœ‹ç›¸å…³æŠ€æœ¯æ–‡ç« ï¼Œä¸¾ä¸ªä¾‹å­ï¼šä½ å†™äº†ä¸€ç¯‡éƒ¨ç½²æŸæŸdockerå®¹å™¨çš„æ•™ç¨‹ï¼Œé‚£ä¹ˆç†åº”åœ¨åšå®¢ä¸­æ¶‰åŠå¦‚ä½•åœ¨Linuxä¸»æœºä¸Šå®‰è£…dockerçš„æ•™ç¨‹éƒ¨åˆ†ã€‚\n\nè¿™ä¸ªå®‰è£…dockerçš„æ•™ç¨‹éƒ¨åˆ†å¯ä»¥ç›´æ¥æ·»åŠ è‡³æ–‡ç« å†…ï¼Œæˆ–è€…å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« ï¼ŒæŠŠé“¾æ¥æ”¾åœ¨è¯¥æ–‡å¼€å¤´ã€‚\n\nè¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿé™¤äº†è®©åˆ«äººèƒ½ç‚¹å‡»é“¾æ¥çœ‹ä½ çš„ç«™ç‚¹é‡Œé¢çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼Œæ›´é‡è¦çš„æ˜¯ä¿è¯è¯»è€…åœ¨çœ‹ä½ è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œä¸éœ€è¦å»é¢å¤–æœç´¢å…¶ä»–çš„ä¸œè¥¿ã€‚\nä¹‹å‰åœ¨WSLå®‰è£…CENTOS8çš„åšå®¢ä¸­æˆ‘å°±åæ§½è¿‡è¿™ä¸ªé—®é¢˜ã€‚æˆ‘æ‰¾åˆ°çš„èµ„æ–™åŸæ–‡ä½œè€…å›¾æ–‡ä¸å¯¹åº”ï¼Œç”¨ç€win11çš„ç”µè„‘å†™ç€win10çš„æ­¥éª¤ï¼ˆæ­¥éª¤æ˜¯é”™çš„ï¼‰ï¼Œæ•´ä¸ªè®¾ç½®å’Œå¼€å¯çš„è¿‡ç¨‹ä¹Ÿæ²¡æœ‰å›¾ç‰‡ï¼Œå¾ˆè®©äººæ— è¯­ã€‚\nå¯¹äºä½¿ç”¨windowsç³»ç»Ÿæ¯”è¾ƒç†Ÿç»ƒï¼ŒçŸ¥é“æ€ä¹ˆæ‰¾è®¾ç½®é€‰é¡¹çš„è¯»è€…æ¥è¯´ï¼Œè¿™å¹¶ä¸æ˜¯ç¥é©¬å¤§é—®é¢˜ã€‚ä½†æ˜¯å¯¹äºå¾ˆå¤šåˆšå…¥é—¨ç¼–ç¨‹å­¦ä¹ çš„å°ç™½æ¥è¯´ï¼Œå›¾æ–‡ä¸å¯¹åªä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ï¼Œæœ€ç»ˆè¿˜æ˜¯å¾—å»æœå…¶ä»–èµ„æ–™ï¼Œæ‰¾æ€ä¹ˆåœ¨win11é‡Œé¢å¼€å¯wslã€‚\nè€ŒåŸåšä¸»åªéœ€è¦å¤šèŠ±30ç§’æŠŠé‚£ä¸ªwin10çš„æ­¥éª¤æ”¹æˆwin11çš„ï¼Œå°±èƒ½èŠ‚çœè¯»è€…å»æœç´¢å¦å¤–ä¸€ç¯‡åšå®¢çš„æ—¶é—´ã€‚\nåŒç†ï¼Œå¦‚æœæˆ‘æƒ³ä½¿ç”¨minioè¿™ä¸ªé¡¹ç›®ï¼Œå‘ç°æœ€å¥½çš„éƒ¨ç½²æ–¹å¼æ˜¯dockeréƒ¨ç½²ï¼Œä½†æˆ‘çš„ä¸»æœºä¸Šæ²¡æœ‰dockerï¼Œæ­¤æ—¶æˆ‘å°±å¾—æœç´¢ä¸¤ç¯‡åšå®¢\n\nå¦‚ä½•åœ¨linuxä¸Šå®‰è£…docker\nå¦‚ä½•åœ¨dockeré‡Œé¢å®‰è£…minio\n\nä½†å®é™…æŸ¥è¯¢èµ„æ–™çš„æ—¶å€™ï¼Œä»¥æˆ‘ä¸ªäººä¸ºä¾‹ï¼Œæˆ‘éƒ½æ˜¯å…ˆæœåˆ°ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå†å›è¿‡å¤´å»æœç¬¬ä¸€ä¸ªé—®é¢˜çš„ã€‚å¦‚æœæˆ‘æœåˆ°çš„ç¬¬äºŒä¸ªé—®é¢˜çš„åšå®¢é‡Œé¢ï¼Œä½œè€…å¼•ç”¨æˆ–è€…ä»‹ç»äº†å¦‚ä½•å®‰è£…dockerçš„æ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘å°±ä¸éœ€è¦å»é¢å¤–æœç´¢ç¬¬ä¸€ä¸ªé—®é¢˜äº†ï¼Œè¿™ä¾¿æ˜¯ç»™è¯»è€…èŠ‚çœäº†æ—¶é—´ã€‚\n2.å‡å°‘åšå®¢é‡Œé¢çš„å›¾ç‰‡æ•°é‡è¿™ä¸ªæ˜¯æ ¹æ®ä¸åŒç±»å‹çš„åšå®¢è€Œè¨€çš„ï¼Œ å¯¹äºå¾ˆå¤šæ•™ç¨‹ç±»åšå®¢è€Œè¨€ï¼Œå›¾ç‰‡&#x2F;æ­¥éª¤æˆªå›¾æ˜¯ä¸å¯æˆ–ç¼ºçš„ã€‚\nä½†æ˜¯å¯¹äºLinuxç±»ã€ä»£ç ç¼–ç¨‹ç±»çš„åšå®¢è€Œè¨€ï¼Œå®Œå…¨å¯ä»¥ç”¨ä»£ç å—æ¥æ›¿ä»£å›¾ç‰‡ã€‚æ¯”å¦‚ç®€å•æµ‹è¯•ç¨‹åºçš„è¿è¡Œç»“æœï¼Œå®Œå…¨æ²¡å¿…è¦æˆªå›¾ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ç”¨ä»£ç å—å±•ç¤ºç»“æœã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹å¯ä»¥åšåˆ°æ•´ç¯‡åšå®¢å®Œå…¨ä¸éœ€è¦æˆªå›¾ã€‚\nå‡å°‘å›¾ç‰‡æ•°é‡çš„å¥½å¤„ï¼š\n\nç”¨æˆ·åŠ è½½åšå®¢çš„æ—¶é—´ç¼©çŸ­ï¼›\nå›¾åºŠå‹åŠ›å‡å°‘ï¼›\nåšå®¢â€œå¤±æ•ˆâ€æ¦‚ç‡é™ä½ï¼›\n\næ‰€è°“åšå®¢å¤±æ•ˆï¼Œå°±æ˜¯æœ‰äº›æ•™ç¨‹åšå®¢ä¸­çš„å›¾ç‰‡ä¸è§æˆ–è€…åŠ è½½ä¸å‡ºæ¥äº†ï¼Œç›´æ¥å¯¼è‡´è¿™ç¯‡åšå®¢åºŸæ‰äº†ã€‚å¦‚æœåšå®¢ä¸­å›¾ç‰‡æ•°é‡è¾ƒå°‘ï¼Œå¯¹åšå®¢æœ‰æ•ˆæ€§çš„å½±å“å°±æ›´ä½ï¼Œåšå®¢å¤±æ•ˆçš„æ¦‚ç‡ä¹Ÿå°±é™ä½äº†ã€‚\n3.é¿å…è±†è…å—è¿™å…¶å®æ˜¯ä»å­¦ç”Ÿé˜¶æ®µå­¦åˆ°çš„ä¸œè¥¿ï¼Œå³å†™ä»»ä½•é•¿æ®µæ–‡å­—çš„æ—¶å€™éƒ½åº”è¯¥åˆ†ç‚¹åˆ†æ®µã€‚\næœ‰äº›æ–‡ç« ä¸€ä¸Šå»æ•´ä¸ªè±†è…å—æ‰’åœ¨é‚£é‡Œï¼Œæ²¡æœ‰åˆ†æ®µï¼Œçœ‹çš„å·¨éš¾å—ã€‚æ›´æœ‰ç”šè€…è¿æ ‡ç‚¹éƒ½æ²¡å‡ ä¸ªâ€¦â€¦\n4.æ‹’ç»åŠé€”è€ŒåºŸæœ‰äº›åšæ–‡éå¸¸å¥‡æ€ªå•Šï¼Œå†™åˆ°ä¸€åŠæˆ›ç„¶è€Œæ­¢ï¼Œéå¸¸æ€€ç–‘æ˜¯çˆ¬è™«æ²¡æœ‰æŠŠååŠéƒ¨åˆ†çˆ¬å‡ºæ¥â€¦â€¦\n5.è¯´æ¸…æ¥šç‰ˆæœ¬å·ç¯å¢ƒéƒ¨ç½²ã€ç¨‹åºå®‰è£…ç­‰ç­‰æ•™ç¨‹çš„æ—¶å€™ï¼Œä¸€å®šè¦åœ¨åšå®¢é‡Œé¢å†™æ¸…æ¥šä½ å½“å‰ä½¿ç”¨çš„ç³»ç»Ÿçš„ç‰ˆæœ¬å·ï¼Œå¾ˆå¤šæ—¶å€™ä¸€äº›ä¸å…¼å®¹é—®é¢˜å°±æ˜¯ç‰ˆæœ¬å·å¯¹ä¸ä¸Šå¯¼è‡´çš„ã€‚\n6.å†™æ˜ç»“æœæœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ï¼Œleetcodeçš„ä¸€ç¯‡é¢˜è§£åšå®¢ï¼Œä½ åº”è¯¥ç»™å‡ºleetcodeé€šè¿‡çš„æˆªå›¾ã€‚æˆ‘å°±é‡åˆ°è¿‡é¢˜è§£é‡Œé¢æ€è·¯å•ªå•ªå•ªä¸€é¡¿è¾“å‡ºï¼Œç»“æœæœ€ç»ˆçš„ä»£ç å¤åˆ¶ç²˜è´´è¿‡å»éƒ½æ²¡åŠæ³•é€šè¿‡çš„ã€‚\nä»£ç æ²¡åŠæ³•é€šè¿‡å¯èƒ½æ˜¯leetcodeæ›´æ”¹äº†æµ‹è¯•ç”¨ä¾‹ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é¢˜ç›®è¦æ±‚æœ‰å˜åŒ–ã€‚\nå¦‚æœä½ åœ¨æ–‡ç« é‡Œé¢è´´äº†leetcodeé€šè¿‡æˆªå›¾ï¼Œè¯»è€…å°±ä¸ä¼šæŠŠé—®é¢˜æ€€ç–‘åˆ°ä½ èº«ä¸Šã€‚ä½†å¦‚æœæ²¡æœ‰ï¼Œæˆ‘å°±å¾—åæ§½ä¸€ä¸‹ï¼šâ€œæ€ä¹ˆæœ‰äººä»£ç éƒ½æ²¡åŠæ³•é€šè¿‡è¿˜å¥½æ„æ€å‘é¢˜è§£çš„å•Šï¼Ÿâ€\nå†™æ˜ç»“æœï¼Œé¿å…è¯¯ä¼šã€‚æœ‰å¤´æœ‰å°¾æ‰èƒ½ä»¤äººä¿¡æœã€‚\nThe endæš‚æ—¶å°±æƒ³åˆ°è¿™ä¹ˆå¤šï¼Œåç»­èƒ½æƒ³åˆ°å…¶ä»–çš„å†æ¥è¡¥å……ã€‚\n","categories":["éšä¾¿å†™å†™"],"tags":["åšå®¢"]},{"title":"ã€2024ã€‘æ–°å¹´å¿«ä¹ï¼","url":"/posts/2404659746/","content":"ç»™æ‰€æœ‰é˜…è¯»æœ¬ç«™æ–‡ç« çš„æœ‹å‹ä»¬é“ä¸€å£°ï¼Œ2024 æ–°å¹´å¿«ä¹ï¼\næ–°å¹´ç›®æ ‡æ–°å¹´æ–°ç›®æ ‡\n\n å®Œæˆä¸€ä¸ªæ–°çš„ä¸ªäººé¡¹ç›®ï¼ˆcppï¼‰ âœ… 2024-03-08\n å¡«mysqlåšå®¢çš„å‘ï¼ˆä¹‹å‰æ²¡æœ‰å†™å®Œï¼‰ âœ… 2024-02-27\n å¡«cppå“ˆå¸Œã€Bæ ‘ã€å›¾ç­‰æ•°æ®ç»“æ„åšå®¢çš„å‘\n å­¦ä¹ redis\n å­¦ä¹ docker\n\næ›´å¤šçš„ç›®æ ‡å°±ä¸è®°å½•å•¦ï¼Œå­¦å®Œè¿™äº›å·®ä¸å¤šå°±è¦å‡†å¤‡æš‘æœŸå®ä¹ æˆ–è€…æ˜¯2024çš„ç§‹æ‹›äº†ï¼Œç¥æˆ‘å¥½è¿å§ï¼\n\n æ‹¿åˆ°ä¸€ä¸ªä¸­å¤§å‚çš„offer\n\nä¹Ÿå¸Œæœ›å¤§å®¶åœ¨2024èƒ½å¿ƒæƒ³äº‹æˆå“¦ï¼\n","categories":["éšä¾¿å†™å†™"],"tags":["éšç¬”"]},{"title":"ã€MySQLã€‘wslçš„ubuntuä¸­æ— æ³•systemctlå¯åŠ¨mariadbï¼ˆå·²è§£å†³ï¼‰","url":"/posts/1382619221/","content":"è¿™æ˜¯GPTçš„ç­”æ¡ˆï¼Œå®æµ‹æœ‰æ•ˆã€‚\nå¦‚æœæ‚¨åœ¨å¯åŠ¨ MariaDB æ—¶é‡åˆ° &quot;Failed to start mariadb.service: Interactive authentication required&quot; é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ Ubuntu 22.04 ä¸Šé»˜è®¤å¯ç”¨äº† systemd çš„ç”¨æˆ·ä¼šè¯é™åˆ¶ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„æ­¥éª¤æ¥è§£å†³è¯¥é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ³•ï¼š\næ‰“å¼€ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¾‘ MariaDB çš„æœåŠ¡æ–‡ä»¶ï¼š\nsudo nano /lib/systemd/system/mariadb.service\n\n\nåœ¨æ–‡ä»¶çš„ [Service] éƒ¨åˆ†ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„è¡Œï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n[Service]......ExecStartPre=/bin/sh -c &#x27;touch /etc/mysql/mariadb.conf.d/.interactive&#x27;\n\nç¡®ä¿åœ¨ [Service] éƒ¨åˆ†å†…çš„å…¶ä»–è¡Œä¹‹åæ·»åŠ æ­¤è¡Œã€‚\nä¿å­˜å¹¶å…³é—­æ–‡ä»¶ï¼ˆåœ¨ Nano ç¼–è¾‘å™¨ä¸­æŒ‰ Ctrl+Xï¼Œç„¶åæŒ‰ Y ç¡®è®¤ä¿å­˜ï¼‰ã€‚\nè¿è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°åŠ è½½ systemd é…ç½®ï¼š\nsudo systemctl daemon-reload\n\nç°åœ¨ï¼Œæ‚¨å¯ä»¥å¯åŠ¨ MariaDB æœåŠ¡ï¼š\nsudo systemctl start mariadb\n\nè¿™æ¬¡å¯åŠ¨åº”è¯¥æ²¡æœ‰å‡ºç° â€œInteractive authentication requiredâ€ é”™è¯¯ã€‚\næœ€åï¼Œæ‚¨å¯ä»¥è®¾ç½® MariaDB åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š\nsudo systemctl enable mariadb\n\nç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤ŸæˆåŠŸå¯åŠ¨å’Œè¿è¡Œ MariaDB æœåŠ¡äº†ã€‚å¦‚æœæ‚¨ä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·ç¡®ä¿æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œï¼Œå¹¶ä»”ç»†æ£€æŸ¥æ‰€åšçš„æ›´æ”¹æ˜¯å¦æ­£ç¡®ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€MySQLã€‘deepinå®‰è£…mysqlçš„cppå¼€å‘åŒ…","url":"/posts/971003431/","content":"åœ¨deepinä¸‹å®‰è£…å¥½mysqlåï¼Œå‘ç°åœ¨cè¯­è¨€ä¸­æ²¡æœ‰&lt;mysql.h&gt;çš„å¤´æ–‡ä»¶ã€‚\nè€Œæ ¹æ®ubuntuçš„åŠæ³•ç›´æ¥æŒ‰ç…§mysqlçš„å¼€å‘åŒ…ï¼Œä¼šå‡ºç°è¿™ç§æƒ…å†µï¼š\n~/Desktop$ sudo apt-get install libmysqlclient-devæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨â€¦ å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯â€¦ å®Œæˆæ²¡æœ‰å¯ç”¨çš„è½¯ä»¶åŒ… libmysqlclient-devï¼Œä½†æ˜¯å®ƒè¢«å…¶å®ƒçš„è½¯ä»¶åŒ…å¼•ç”¨äº†ã€‚è¿™å¯èƒ½æ„å‘³ç€è¿™ä¸ªç¼ºå¤±çš„è½¯ä»¶åŒ…å¯èƒ½å·²è¢«åºŸå¼ƒï¼Œæˆ–è€…åªèƒ½åœ¨å…¶ä»–å‘å¸ƒæºä¸­æ‰¾åˆ°E: è½¯ä»¶åŒ… libmysqlclient-dev æ²¡æœ‰å¯å®‰è£…å€™é€‰\n\né¦–å…ˆä½¿ç”¨å‘½ä»¤sudo apt install default-libmysqlclient-devï¼Œä¼šå‡ºç°å¦‚ä¸‹ï¼š\n~/Desktop$ sudo apt install default-libmysqlclient-devæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨â€¦ å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯â€¦ å®Œæˆå°†ä¼šåŒæ—¶å®‰è£…ä¸‹åˆ—è½¯ä»¶ï¼šlibmariadbclient-dev libmariadbclient-dev-compatä¸‹åˆ—ã€æ–°ã€‘è½¯ä»¶åŒ…å°†è¢«å®‰è£…ï¼šâ€¦â€¦â€¦\n\nå®‰è£…å¥½ååœ¨è¿è¡Œä¸€æ¬¡ï¼Œæ­¤æ—¶å·²ç»æ˜¯æœ€æ–°ç‰ˆ\nç¬¬äºŒæ­¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…mariadbçš„å¼€å‘åŒ…ï¼Œå’Œmysqlæ˜¯ä¸€æ ·çš„ï¼›è¿™æ ·æ‰§è¡Œäº†ä¹‹åï¼Œé‚£ä¹ˆä½ åœ¨linuxä¸­å°±åº”è¯¥èƒ½å¼•å…¥å¤´æ–‡ä»¶&lt;mysql/mysql.h&gt;äº†ã€‚\nsudo apt-get install libmariadbclient-dev\n\n\næ­¤æ—¶ /usr/includeé‡Œé¢å·²ç»æœ‰mysqlçš„æ–‡ä»¶å¤¹äº†ï¼\n\nè¿™æ˜¯æˆ‘åœ¨æ‰¾åˆ°æ–¹æ³•çš„é“¾æ¥ï¼š\nhttps://blog.csdn.net/guyspring/article/details/104302131\nhttps://stackoverflow.com/questions/5178292/pip-install-mysql-python-fails-with-environmenterror-mysql-config-not-found#\nå¸Œæœ›æœ‰ç”¨ï¼\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œè¡£å…œã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/wu___hao/article/details/113257493\n\nè¯¥æ–¹æ³•æ…•é›ªåœ¨deepin 20.9è™šæ‹Ÿæœºä¸Šå®æµ‹æœ‰æ•ˆï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["Linux","mysql"]},{"title":"ã€leetcodeã€‘102. äºŒå‰æ ‘çš„å±‚åºéå†ï¼ˆCè¯­è¨€+é˜Ÿåˆ—ï¼‰","url":"/posts/2026576418/","content":"è¿™é“äºŒå‰æ ‘çš„é¢˜ç›®ç›¸å¯¹æ¥è¯´æ¯•ç«Ÿéš¾ï¼Œæ‰€ä»¥åˆå•ç‹¬æ‹¿å‡ºæ¥å‘ä¸€ç¯‡é¢˜è§£\n\n\n[TOC]\n102 å±‚åºéå†ï¼ˆè¾ƒéš¾ğŸ˜¥ï¼‰\nleetcodeï¼š102. äºŒå‰æ ‘çš„å±‚åºéå†\n\n\nè¿™é“é¢˜ç›¸å¯¹æ¥è¯´å°±ä¹ˆæœ‰é‚£ä¹ˆå®¹æ˜“äº†ï¼Œä½ å¯èƒ½å’Œæˆ‘ä¸€æ ·ï¼Œå‹æ ¹æ²¡çœ‹æ˜ç™½é¢˜ç›®è¦æ±‚ä¸­çš„åä¸¤ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¹²å˜›çš„\n\n/** * Return an array of arrays of size *returnSize. * The sizes of the arrays are returned as *returnColumnSizes array. * Note: Both returned array and *columnSizes array must be malloced, assume caller calls free(). */int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes)&#123;&#125;\n\nçœ‹äº†ä¸€äº›é¢˜è§£ï¼Œè¿™æ‰ç®—ç†è§£äº†è¿™é“é¢˜çš„è¦æ±‚\n\n*returnSizeï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘çš„å±‚æ•°\n**returnColumnSizesï¼šå­˜æ”¾çš„æ˜¯äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°\nè¿”å›å€¼è¦æ±‚æ˜¯int**ï¼šéœ€è¦è¿”å›ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œè¯¥æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ•°ç»„Aï¼Œæ•°ç»„Aä¿å­˜äº†äºŒå‰æ ‘æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\n\n\n0.é”™è¯¯æ€è·¯æœ€å¼€å§‹æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œç”¨å•ç‹¬çš„å‡½æ•°è®¡ç®—å‡ºæ ‘çš„èŠ‚ç‚¹ä¸ªæ•°å’Œå±‚çº§ï¼Œå†è¿›è¡Œä¸€æ¬¡å±‚åºéå†æ¥å¾—åˆ°æ ‘çš„å€¼ã€‚\nä½†å¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸€æ€è·¯åœ¨æœ¬é¢˜æ˜¯æä¸é€šçš„ï¼ğŸ¤”\n1.æ•°ç»„é˜Ÿåˆ—åˆå§‹åŒ–åœ¨é“¾å¼äºŒå‰æ ‘åšå®¢ä¸­ï¼Œæˆ‘è®²è¿°äº†åˆ©ç”¨é˜Ÿåˆ—æ¥å®ç°å±‚åºéå†çš„æ€è·¯ã€‚è¿™é“OJé¢˜ç›®æˆ‘ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚ä¸åŒçš„æ˜¯ï¼Œåœ¨æˆ‘è‡ªå·±å†™çš„é˜Ÿåˆ—å®ç°é‡Œï¼Œä½¿ç”¨çš„æ˜¯é“¾å¼é˜Ÿåˆ—ã€‚è€Œæœ¬é¢˜ä½¿ç”¨æ•°ç»„é˜Ÿåˆ—ä¼šå¥½ä¸€ç‚¹ï¼\n#define MAX 2000int** levelOrder(struct TreeNode* root, int* returnSize, int** returnColumnSizes) &#123;    if (root == NULL)        return;    struct TreeNode* Queue[MAX];//é˜Ÿåˆ—ï¼Œå­˜æ”¾èŠ‚ç‚¹çš„åœ°å€    int front = 0, tail = 0;//æŒ‡å‘é˜Ÿå¤´å’Œé˜Ÿå°¾\n\n2.åˆå§‹åŒ–æ•°ç»„è¿™éƒ¨åˆ†ä¼šæ¯•ç«Ÿç»•ï¼Œå…ˆä¸€æ­¥ä¸€æ­¥æ¥ç†è§£\n*returnSize = 0;//å°†äºŒå‰æ ‘å±‚çº§åˆå§‹åŒ–ä¸º0//å­˜æ”¾äºŒå‰æ ‘çš„æ¯ä¸€å±‚èŠ‚ç‚¹çš„å€¼int** ret = (int**)malloc(sizeof(int*) * MAX);//å¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°*returnColumnSizes = (int*)malloc(sizeof(int*) * (MAX / 2));\n\n\nretæ˜¯ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼Œå­˜æ”¾çš„æ˜¯æ•°ç»„Aï¼Œæ•°ç»„Aé‡Œé¢æ˜¯æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼ã€‚retä¹Ÿå°±æ˜¯é¢˜ç›®è¦æ±‚çš„è¿”å›å€¼\n*returnColumnSizeså¼€è¾Ÿä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°\n\nè¿™é‡Œå…¶å®returnColumnSizesæ²¡æœ‰å•¥äºŒçº§æŒ‡é’ˆçš„å¿…è¦ï¼Œä½†æ˜¯æ—¢ç„¶é¢˜ç›®ç»™äº†æ˜¯int**ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆ*è§£å¼•ç”¨å†mallocå¼€è¾Ÿæ•°ç»„\n3.é˜Ÿåˆ—æ“ä½œæ€è·¯\nå…ˆè®©æ ¹èŠ‚ç‚¹å…¥é˜Ÿåˆ—ï¼Œtail++\nå¤–å±‚å¾ªç¯åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦éç©ºï¼Œå¦‚æœéç©ºå°±åœæ­¢æ“ä½œ\nå†…å±‚å¾ªç¯è¿›è¡Œæ¯ä¸€å±‚çš„å…¥é˜Ÿæ“ä½œï¼Œè¿™æ ·æ‰èƒ½å¾—åˆ°æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼å’ŒèŠ‚ç‚¹ä¸ªæ•°\nåœ¨å†…å±‚å¾ªç¯ä¸­åˆ›å»ºretæ•°ç»„çš„å­æ•°ç»„ï¼Œå•ç‹¬å­˜æ”¾æ¯ä¸€å±‚çš„èŠ‚ç‚¹å€¼\næœ€åå°†æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°èµ‹å€¼ç»™*returnColumnSizesæ•°ç»„ï¼Œ*returnSize++ä¸€æ¬¡\n\n   struct TreeNode* head;   Queue[tail++] = root;//æ ¹èŠ‚ç‚¹å…¥é˜Ÿ   while (front != tail)   &#123;       int Csize = 0;//æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       int end = tail;       //endæ˜¯æ¯ä¸€å±‚æœ€æœ«ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚åœ¨åç»­çš„å…¥é˜Ÿåˆ—æ“ä½œä¸­tailä¼šæ”¹å˜ï¼Œæ‰€ä»¥éœ€è¦ä¿å­˜tailçš„å€¼       ret[*returnSize] = (int*)malloc(sizeof(int*) * (end - front));       //ä¸ºæ¯ä¸€å±‚å¼€è¾Ÿä¸€ä¸ªå•ç‹¬çš„æ•°ç»„æ¥å­˜æ”¾å€¼       while (front &lt; end)       &#123;           head = Queue[front++];           ret[*returnSize][Csize++] = head-&gt;val;           //æ•°ç»„èµ‹å€¼ï¼ŒåŒæ—¶æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°Csize++           if (head-&gt;left != NULL)               Queue[tail++] = head-&gt;left;           if (head-&gt;right != NULL)               Queue[tail++] = head-&gt;right;       &#125;       (*returnColumnSizes)[*returnSize] = Csize;//èµ‹å€¼æ¯ä¸€å±‚çš„èŠ‚ç‚¹ä¸ªæ•°       (*returnSize)++;//å±‚æ•°+1   &#125;return ret;\n\nå¤–å±‚å¾ªç¯ç»“æŸåï¼Œæ­¤æ—¶retæ•°ç»„å°±æ˜¯é¢˜ç›®è¦æ±‚çš„ç»“æœäº†ï¼Œè¿”å›retå°±å¯ä»¥äº†ï¼\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå½“æ ‘ä¸ºç©ºæ ‘æ—¶ï¼Œå±‚çº§åº”è¯¥æ˜¯0ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ç¬¬ä¸€è¡Œèµ‹å€¼*returnSize = 0;ä¸ç„¶ä¼šæ‰§è¡Œå‡ºé”™\n\n\nè¿™é“é¢˜çš„æ€è·¯æ˜¯æˆ‘çœ‹è¿‡é¢˜è§£ä¹‹åæ‰ææ˜ç™½çš„ï¼Œæ‰€ä»¥ä¸Šé¢çš„åªæ˜¯ä¸€ä¸ªæ€è·¯çš„å¤ç°ğŸ˜­è¿˜æ˜¯å¤ªèœäº†ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","leetcode"]},{"title":"ã€leetcodeã€‘001.ä¸¤æ•°ä¹‹å’Œï¼ˆCè¯­è¨€ï¼Œè¶…è¯¦ç»†ï¼‰","url":"/posts/2927049053/","content":"è¿™æ˜¯åˆå­¦Cæ—¶å€™å†™çš„é¢˜è§£ï¼Œå¯èƒ½æœ‰æ€ç»´æ¼æ´ï¼Œåé¢é‡æ–°åˆ·é¢˜çš„æ—¶å€™ä¼šæ›´æ”¹ï¼\n\n\n\nPSï¼šå·²é‡æ–°æ›´æ­£å¹¶æ·»åŠ äº†C++çš„å“ˆå¸Œè§£æ³•\n\n[toc]\n\n1 é¢˜ç›®æ¥æºä¸¤æ•°ä¹‹å’Œ leetcode-001\nå¦‚ä¸‹å›¾æ‰€ç¤º\n\nå³ä¾§ç»™å‡ºäº†é¢˜ç›®çš„åŸºæœ¬æ¨¡æ¿\n/** * Note: The returned array must be malloced, assume caller calls free(). */int* twoSum(int* nums, int numsSize, int target, int* returnSize)&#123;&#125;\n\n\n2 é¢˜ç›®è¦æ±‚åšé¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ¢³ç†å‡ºé¢˜ç›®çš„å„é¡¹è¦æ±‚\nç®—æ³•é¢˜ç›®éœ€è¦æˆ‘ä»¬éå¸¸ç»†è‡´ï¼Œå› ä¸ºä¸€ä¸ªå°è¦æ±‚çš„æœªå®Œæˆï¼Œå°±ä¼šå¯¼è‡´æ ¼å¼å‡ºé—®é¢˜æˆ–è€…ç»“æœå‡ºé—®é¢˜ï¼Œæ— æ³•é€šè¿‡ç³»ç»Ÿçš„æµ‹è¯•\né¢˜ç›®è¦æ±‚å¦‚ä¸‹ï¼š\n\nåœ¨ç»™å®šæ•°ç»„numsä¸­æ‰¾å‡ºç›¸åŠ ä¸ºtargetçš„ä¸¤ä¸ªæ•°å­—\nåŒä¸€ä¸ªæ•°å­—ä¸èƒ½é‡å¤\nå‡è®¾æ¯ä¸€ä¸ªtargetåªå¯¹åº”ä¸€ç§ç­”æ¡ˆ\næ‰¾åˆ°æ•°å­—åè¿”å›å…ƒç´ çš„ä¸‹æ ‡\nä¸èƒ½æ›´æ”¹æ‘¸æ¿é‡Œçš„ä»£ç \n\nè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå®¹æ˜“è¢«å¿½ç•¥çš„éšè—æ¡ä»¶ï¼\n\nç›¸åŠ çš„ä¸¤ä¸ªæ•°å­—åœ¨æ•°ç»„ä¸­æ˜¯è¿ç»­çš„\n\nè¿™ä¸ªæ¡ä»¶æ˜¯è§‚å¯Ÿ3ä¸ªç¤ºä¾‹å¾—å‡ºçš„ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ¡ä»¶ï¼Œè¿™é“é¢˜ç›®å°±éœ€è¦æˆ‘ä»¬åœ¨æ•°ç»„ä¸­è¿›è¡Œå®Œå…¨æœç´¢ï¼\næˆ‘åšè¿™é“é¢˜ç›®çš„æ—¶å€™å°±å¡åœ¨äº†è¿™ä¸ªåœ°æ–¹ï¼\n\n3 å®ç°æ­¥éª¤3.1 æ¨¡æ¿ä¸­å››ä¸ªå€¼çš„æ„ä¹‰é¦–å…ˆæˆ‘ä»¬è¦å¼„æ˜ç™½æ‘¸æ¿é‡Œçš„4ä¸ªå€¼åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆä¸œè¥¿\nint* twoSum(int* nums, int numsSize, int target, int* returnSize)\n\n\nint* numsâ€”â€”numsæ•°ç»„ï¼ˆ æ­¤å½¢å¼ç­‰åŒäºint nums[] )\nnumsSizeâ€”â€”æ•°ç»„å…ƒç´ çš„ä¸ªæ•°\ntargetâ€”â€”éœ€è¦æ±‚å’Œçš„ç»“æœ\nint* returnSizeâ€”â€”è¿”å›å€¼çš„ä¸ªæ•°ï¼ˆè¿™ä¸ªä¸å¯ä»¥çœç•¥ï¼ï¼‰\n\nå†æ¥çœ‹é¢˜ç›®çš„è¦æ±‚\n\néœ€è¦åœ¨ç»™å®šæ•°ç»„ä¸­æ‰¾åˆ°ç›¸åŠ &#x3D;targetçš„ä¸¤ä¸ªè¿ç»­çš„æ•°å­—\n\n3.2 åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ä¸¤ä¸ªè¿ç»­çš„å…ƒç´ ä¸€èˆ¬åœ¨æ•°ç»„é‡Œé¢æŸ¥æ‰¾ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬éƒ½ä¼šæƒ³åˆ°ä½¿ç”¨forå¾ªç¯\nè¿™é‡Œéœ€è¦æŸ¥æ‰¾ä¸¤ä¸ªè¿ç»­çš„æ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªåµŒå¥—çš„forå¾ªç¯ä»¥åŠä¸¤ä¸ªå¾ªç¯å˜é‡æ¥å®ç°\n\næ›´æ–°ï¼šå®é™…ä¸Šè¿™ä¸¤ä¸ªæ•°å­—ä¸ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œç”¨åŒå¾ªç¯çš„æš´åŠ›å†™æ³•ï¼Œéè¿ç»­æ•°å­—å…¶å®ä¹Ÿæ˜¯èƒ½æå®šçš„\n\nint i=0ï¼›int j=i+1;\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œjæ¯”iå¤§äº†1ï¼Œä¸ºäº†é˜²æ­¢æ•°ç»„è¶Šç•Œè®¿é—®\nforå¾ªç¯é‡Œé¢çš„åˆ¤æ–­å˜é‡ä¹Ÿè¦ç›¸åº”çš„å·®1\nfor(int i = 0; i &lt; numsSize - 1; i++) &#123;     for(int j = i+1; j &lt; numsSize; j++)     &#123;              &#125; &#125;\n\n3.3 åˆ¤æ–­ç›¸åŠ æ˜¯å¦ç­‰äºtargetåœ¨æ•°ç»„ä¸­æ‰¾åˆ°å…ƒç´ åï¼Œéœ€è¦åˆ¤æ–­å®ƒä»¬ä¸¤ä¸ªç›¸åŠ æ˜¯å¦ç­‰äºtarget\nif(nums[i] + nums[j] == target)\n\n3.4 è¿”å›å…ƒç´ ä¸‹æ ‡å½“ä»£ç æˆåŠŸæ‰¾åˆ°äº†ä¸¤ä¸ªç›¸åŠ ç­‰äºtargetçš„å…ƒç´ åï¼Œæˆ‘ä»¬è¦è¿”å›è¿™ä¸¤ä¸ªå…ƒç´ çš„ä¸‹æ ‡\nè¿™é‡Œå°±éœ€è¦ä¸€ä¸ªæ–°çš„æ•°ç»„æ¥æ¥æ”¶è¿™ä¸¤ä¸ªä¸‹æ ‡ï¼Œè¿™æ¯”å•çº¯çš„ä½¿ç”¨ä¸¤ä¸ªå˜é‡æ›´æ–¹ä¾¿\nåˆ›å»ºè¿™ä¸ªæ•°ç»„æœ‰ä¸¤ç§æ–¹æ³•\n\nä½¿ç”¨arr[2]æ¥åˆ›å»º\nä½¿ç”¨mallocå‡½æ•°æ¥åˆ›å»º\n\nå…¶ä¸­æ–¹æ³•äºŒï¼Œæ˜¯é¢˜ç›®æ‰€ç»™æç¤ºé‡Œçš„å‡½æ•°ï¼Œåç»­å°†æåŠ\n/* Note: The returned array must be malloced, assume caller calls free(). */\n\n\n4 ä»£ç ç¤ºä¾‹1\næ³¨ï¼šleetcodeçš„å‡½æ•°é¢˜ç›®åªéœ€è¦è¡¥å…¨è‡ªå®šä¹‰å‡½æ•°ï¼Œæ— éœ€å†™mainå‡½æ•°\n\nåœ¨ç¤ºä¾‹1é‡Œé¢ï¼Œä½¿ç”¨æ™®é€šçš„æ–¹å¼åˆ›å»ºresult[2]æ•°ç»„\nint* twoSum(int* nums, int numsSize, int target,int* returnSize) &#123;    static int result[2] = &#123;0&#125;;//staticä¿®é¥°åï¼Œreturnçš„åœ°å€æ‰èƒ½è¢«mainæ¥æ”¶    for(int i = 0; i &lt; numsSize - 1; i++)    &#123;        for(int j = i+1; j &lt; numsSize; j++)        &#123;            if(nums[i] + nums[j] == target)            &#123;                result[0] = i;                result[1] = j;                *returnSize = 2;//è¿™ä¸ªä¸èƒ½åˆ é™¤                return result;            &#125;        &#125;    &#125;    return NULL;&#125;\n\nå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨mainå‡½æ•°é‡Œé¢ä½¿ç”¨resultæ•°ç»„çš„å€¼ï¼Œæ‰€ä»¥éœ€è¦ç”¨staticæ¥ä¿®é¥°è¿™ä¸ªæ•°ç»„\nä¸ç”¨staticä¿®é¥°çš„è¯ï¼Œå‡ºäº†è‡ªå®šä¹‰å‡½æ•°åï¼Œresultæ•°ç»„çš„å†…å­˜ç©ºé—´å°†è¢«é‡Šæ”¾\nå³ä¾¿æˆ‘ä»¬returnäº†è¿™ä¸ªæ•°ç»„ï¼Œå®ƒä¹Ÿä¸èƒ½è¢«ä¸»å‡½æ•°æ¥æ”¶\n\n4.1 staticçš„ä½œç”¨\nä¿®é¥°å‡½æ•°\nä¿®é¥°å…¨å±€å˜é‡\nä¿®é¥°å±€éƒ¨å˜é‡\n\nè¿™é‡Œä½¿ç”¨çš„æ˜¯staticçš„ç¬¬3ä¸ªä½œç”¨ï¼Œå°†å±€éƒ¨å˜é‡æ•°ç»„resultï¼Œå˜æˆé™æ€å±€éƒ¨å˜é‡\nå³æ•°ç»„resultä¸ä¼šåœ¨å‡ºè‡ªå®šä¹‰å‡½æ•°åé”€æ¯\n\n4.2 *returnSizeæ˜¯ä»€ä¹ˆï¼Ÿ\nå±å¹•å‰çš„ä½ æ˜¯å¦å’Œæˆ‘æœ‰ä¸€æ ·çš„ç–‘æƒ‘ï¼Œæ­¤*returnSizeåœ¨è‡ªå®šä¹‰å‡½æ•°é‡Œé¢æ²¡æœ‰æ„ä¹‰ã€‚é‚£ä¸ºä»€ä¹ˆä¸èƒ½åˆ é™¤ï¼Ÿ\n\nè¦çŸ¥é“ï¼Œè¿™é‡Œçš„*returnSizeæ˜¯é¢˜ç›®çš„æ¨¡æ¿ç»™æˆ‘ä»¬çš„\nè€Œä¸”é¢˜ç›®æ²¡æœ‰è¦æ±‚æˆ‘ä»¬ä¹¦å†™mainå‡½æ•°\nå…¶å®è¿™é‡Œçš„*returnSizeåœ¨mainå‡½æ•°æ˜¯æœ‰å˜é‡ä¼ è¿‡æ¥çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä½œä¸ºä¸€ä¸ªè¾“å‡ºå‚æ•°è¿›è¡Œèµ‹å€¼ã€‚\nåˆ é™¤è¿™ä¸ªå‚æ•°åï¼Œè‡ªå®šä¹‰å‡½æ•°é‡Œç¼ºå°‘å˜é‡æ¥æ¥å—ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œè‡ªç„¶ä¼šæŠ¥é”™\n*returnSize = 2;\n\nåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ifè¯­å¥ä¸­å°†å®ƒå®šä¹‰ä¸º2ï¼Œå³ä¸ºè¿”å›å€¼çš„ä¸ªæ•°ã€‚\nå…·ä½“çš„åˆ†æå‚è€ƒè¿™ç¯‡åšå®¢&#x3D;&#x3D;&gt; é“¾æ¥\n5 ä»£ç ç¤ºä¾‹2è¯´ç¬¬äºŒç§æ–¹æ³•å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå¼„æ˜ç™½mallocå‡½æ•°æ˜¯ä»€ä¹ˆ\n5.1 ä»€ä¹ˆæ˜¯mallocå‡½æ•°ï¼Ÿåœ¨cplusplusç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹åˆ°mallocå‡½æ•°çš„å®šä¹‰\nè¯¥å‡½æ•°å¯¹åº”çš„å¤´æ–‡ä»¶ä¸ºcstdlibï¼Œå³cè¯­è¨€ä¸­çš„&lt;stdlib.h&gt;\n\nå®ƒçš„ä½œç”¨ï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¯¹åº”å­—èŠ‚çš„ç©ºé—´ï¼Œèµ‹äºˆç»™ä¸€ä¸ªæŒ‡é’ˆå˜é‡\nint *pa = malloc(sizeof(int));\n\nä¸Šé¢è¿™ä¸ªè¯­å¥çš„æ„ä¹‰æ˜¯ï¼Œå¼€è¾Ÿä¸€ä¸ªintç±»å‹ï¼ˆå³4ä¸ªå­—èŠ‚ï¼‰çš„ç©ºé—´ï¼Œèµ‹ç»™æŒ‡é’ˆå˜é‡*pa\n\nå…¶ä¸­çš„sizeof(int)å¯ä»¥æ¢æˆ(4)ï¼›ä¹Ÿå¯ä»¥åœ¨åé¢ä¹˜ä¸Šä¸€ä¸ªæ•°sizeof(int)*2è¡¨ç¤º8ä¸ªå­—èŠ‚\n\næœ¬é¢˜éœ€è¦çš„æ˜¯å­˜æ”¾ä¸¤ä¸ªintæ•´å½¢çš„æ•°ç»„ï¼Œmallocå‡½æ•°å¯ä»¥è¿™ä¹ˆå†™\nint *num = malloc(sizeof(int)*2);\n\ncpluspluså¯¹mallocå‡½æ•°ä¸­çš„å®šä¹‰é‡Œæœ‰ä¸€å¥è¯\n\nIf the function failed to allocate the requested block of memory, a null pointer is returned.\n\nå¦‚æœæŒ‡é’ˆåˆ†é…é”™è¯¯ï¼Œå‡½æ•°å°†è¿”å›ä¸€ä¸ªNULLï¼Œç©ºæŒ‡é’ˆ\n\n5.2 mallocä½¿ç”¨åfreeé‡Šæ”¾åœ¨ä½¿ç”¨å®Œmallocå‡½æ•°å\n\néœ€è¦ç”¨freeå‡½æ•°æ¥é‡Šæ”¾mallocåˆ›å»ºçš„å†…å­˜ç©ºé—´\néœ€è¦å°†åˆ›å»ºçš„æŒ‡é’ˆå˜é‡æŒ‡å‘ç©ºæŒ‡é’ˆï¼Œä»¥é˜²ç¨‹åºé”™è¯¯è°ƒç”¨\n\nfree(pa);pa = NULL;\n\nè¿™ä¸¤ä¸ªå‡½æ•°æ˜¯é…å¯¹çš„\n\nå¦‚æœç”³è¯·åä¸é‡Šæ”¾ï¼Œä¼šå†…å­˜æ³„éœ²\n\nå¦‚æœæ— æ•…é‡Šæ”¾ï¼Œé‚£å°±æ˜¯ä»€ä¹ˆä¹Ÿæ²¡æœ‰åš\n\n\nå†…å­˜æ³„æ¼å‚è€ƒè¿™ç¯‡åšå®¢ &#x3D;&#x3D;&gt; é“¾æ¥ï¼›\nä»¥ä¸‹å°±æ˜¯æ–¹æ³•2çš„å®Œæ•´ä»£ç \n/** * Note: The returned array must be malloced, assume caller calls free(). */int* twoSum(int* nums, int numsSize, int target, int* returnSize)&#123;    int *num = malloc(sizeof(int)*2);    for(int i = 0; i &lt; numsSize - 1; i++)    &#123;        for(int j = i + 1; j &lt; numsSize; j++)        &#123;            if(nums[i] + nums[j] == target)            &#123;                num[0] = i;                num[1] = j;                *returnSize = 2;                return num;            &#125;        &#125;    &#125;    return NULL;&#125;\n\nä¸ºä»€ä¹ˆæœ¬é¢˜ä½¿ç”¨å®Œmallocå‡½æ•°åæ²¡æœ‰freeå‘¢ï¼Ÿ\nåŸå› è¿˜æ˜¯åœ¨æœ¬é¢˜çš„æç¤ºé‡Œ\n/*Note: The returned array must be malloced, assume caller calls free()*/\n\nè¿™ä¸ªè¯­å¥çš„å¤§æ¦‚æ„æ€åº”è¯¥æ˜¯ï¼šå‡è®¾mainå‡½æ•°é‡Œé¢å·²æœ‰ä¸€ä¸ªfreeå‡½æ•°æ¥é‡Šæ”¾å†…å­˜ï¼›\næ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±åŠ ä¸Šfreeå‡½æ•°; è‡ªå·±å†™è¿™ç§ç±»å‹çš„ä»£ç çš„æ—¶å€™ä¸€å®šåˆ«å¿˜äº†åŠ å“¦ï¼\n6 åˆå­¦æ€»ç»“è™½ç„¶è¿™åªæ˜¯leetcodeçš„ç¬¬ä¸€é¢˜ï¼Œç½‘ç«™æ‰“ä¸Šçš„éš¾åº¦æ˜¯â€œç®€å•â€ï¼Œä½†å¯¹äºæˆ‘è¿™ä¸ªå­¦è‰ºä¸ç²¾çš„åˆå­¦è€…æ¥è¯´ï¼Œè¿˜æ˜¯è´¹äº†ä¸€ç•ªåŠŸå¤«å»å®Œæˆè¿™é“é¢˜å¹¶ç†è§£å®ƒã€‚\næœ¬ç‰‡åšå®¢å°±æ˜¯æˆ‘æ±‚è§£è¿™é“é¢˜çš„è¿‡ç¨‹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼\n\nå°å£°åæ§½ï¼šcsdnå¤ªå¤šç¹æ‚çš„ä¸œè¥¿äº†ï¼Œæœ‰çš„åšå®¢ä»£ç ä¸è´´ä»£ç å—ï¼Œæœ‰çš„ç­”æ¡ˆä»£ç éƒ½æ˜¯é”™çš„ã€‚\nè¿˜æœ‰äº›äººå°±è¿™ä¹ˆä¸€é“é¢˜çš„ç­”æ¡ˆéƒ½ç»™ä½ ä¸Šä¼ ä¸€ä¸ªä»˜è´¹æ–‡ä»¶ï¼ˆæ— å¤´åƒæ— idæ— ç®€ä»‹ï¼Œä¸Šä¼ å‡ åƒä¸ªèµ„æºï¼Œæ€€ç–‘æ˜¯æœºå™¨äººçˆ¬è™«ï¼‰\n\nä¸ç®¡æ€ä¹ˆæ ·ï¼Œè‡³å°‘æˆ‘å¼„æ‡‚è¿™é“é¢˜å•¦ï¼\næ„Ÿè°¢å¼•ç”¨çš„ä¸¤ç¯‡åšå®¢çš„ä½œè€…ï¼Œè‹¥ä¸æ˜¯ä»–ä»¬ï¼Œæˆ‘ä¹Ÿå¼„ä¸æ˜ç™½è¿™é“é¢˜ï¼\nç‚¹ä¸ªğŸ‘å†èµ°å§ï¼Œçƒçƒäº†ï¼è¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦å•Šï¼\n7 å›é¡¾å·²ç»æ˜¯2023å¹´çš„2æœˆä»½äº†ï¼Œè·ç¦»æˆ‘å†™ä¸‹è¿™ç¯‡æ–‡ï¼Œå·²ç»è¿‡å»äº†ä¸€å¹´å¤šçš„æ—¶å…‰ã€‚å›é¡¾çœ‹æ¥ï¼Œå½“æ—¶å†™çš„æ•™ç¨‹ç€å®ä¸å¤ªå¥½ï¼Œäºæ˜¯è¿”å›æ¥æ›´æ­£ä¸€ç•ª\n7.1 ä»£ç ç¤ºä¾‹3æ­¤é¢˜æœ€ä½³çš„è§£å†³æ–¹æ¡ˆæ˜¯å“ˆå¸Œæ€æƒ³ã€‚å“ˆå¸Œå°±æ˜¯ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚\n\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å“ˆå¸Œï¼Œå»ºè®®æš‚æ—¶å…ˆé‡‡ç”¨ä¸Šé¢çš„åŒå¾ªç¯æš´åŠ›è§£æ³•ã€‚ç­‰åç»­å­¦ä¹ äº†å“ˆå¸Œæ€æƒ³ä»¥åŠå®ç°ä¹‹åï¼Œå†å›å¤´æ¥é‡åšæ­¤é¢˜\n\næˆ‘ä»¬å¯ä»¥å°†æ•°ç»„ä¸­çš„æ•°æ®å’Œå…¶å¯¹åº”çš„ä¸‹æ ‡æ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œç”±äºå“ˆå¸Œè¡¨çš„æœç´¢æ•ˆç‡æ¥è¿‘O(1)ï¼ŒæŸ¥æ‰¾çš„é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œæ­¤é¢˜çš„æ•´ä½“æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº†O(N)\næ€è·¯å¦‚ä¸‹ï¼š\n\næŸ¥æ‰¾å“ˆå¸Œè¡¨ä¸­ï¼Œæ˜¯å¦æœ‰å’Œï¼ˆç›®æ ‡-å½“å‰å€¼ï¼‰ç›¸åŒçš„å…ƒç´ \nå¦‚æœæœ‰ï¼Œé‚£ä¹ˆå¾—åˆ°ç­”æ¡ˆã€‚è¿”å›å½“å‰éå†åˆ°çš„ä¸‹æ ‡ï¼Œä»¥åŠæŸ¥æ‰¾åˆ°çš„å…ƒç´ çš„ä¸‹æ ‡\nå¦‚æœæ²¡æœ‰ï¼Œé‚£å°±æŠŠå½“å‰å…ƒç´ -å…ƒç´ ä¸‹æ ‡ä½œä¸ºé”®å€¼å¯¹ï¼Œæ’å…¥åˆ°å“ˆå¸Œè¡¨ä¸­\n\nå› ä¸ºæœ¬é¢˜æ˜¯ä¸€å®šæœ‰è§£çš„ï¼Œè¿™æ ·ä¸€æ¬¡å¾ªç¯ä¹‹åï¼Œä¸€å®šèƒ½æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„é‚£ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡\nclass Solution &#123;public:    vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;        unordered_map&lt;int,int&gt; m;//å“ˆå¸Œè¡¨ æ•°æ®-ä¸‹æ ‡        vector&lt;int&gt; ret;//è¿”å›å€¼        for(int i=0;i&lt;nums.size();i++)        &#123;\t        //æ‰¾æœ‰æ²¡æœ‰å’Œï¼ˆç›®æ ‡-å½“å‰å€¼ï¼‰ç›¸åŒçš„å…ƒç´             auto it = m.find(target-nums[i]);            if(it!=m.end())//æ‰¾åˆ°äº†            &#123;                ret.push_back(it-&gt;second);//æ’å…¥å“ˆå¸Œè¡¨ä¸­ä¸‹æ ‡                ret.push_back(i);//æ’å…¥å½“å‰ä¸‹æ ‡                break;//é€€å‡ºå¾ªç¯            &#125;            else            &#123;                m.insert(&#123;nums[i],i&#125;);//æ’å…¥å…ƒç´ å’Œä¸‹æ ‡            &#125;        &#125;        return ret;    &#125;   &#125;;\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","leetcode"]},{"title":"ã€sqlite3ã€‘MySQL8è½¬sqlite3éœ€è¦å¯¹sqlåšçš„ä¸€äº›å¤„ç†","url":"/posts/2778694447/","content":"é—®é¢˜æ¥æºæœ€è¿‘ç¼–å†™æˆ‘çš„kookæœºå™¨äººçš„æ—¶å€™ï¼Œå‘ç°MySQLå¯¹äºè¿™ç§ä½è®¿é—®é¢‘æ¬¡çš„åº”ç”¨å¹¶ä¸å‹å¥½ï¼Œç»å¸¸å‡ºç°æ–­è¿çš„é—®é¢˜ï¼Œå…·ä½“åˆ°pythonä¸­çš„æŠ¥é”™å¦‚ä¸‹\npymysql.err.InterfaceError: (0, &#x27;&#x27;)\n\nå‡ºç°è¿™ç§æŠ¥é”™ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯MySQLé‚£ç«¯å› ä¸ºè‡ªèº«ç­–ç•¥ä¸­æ–­äº†å’Œä½ çš„åº”ç”¨çš„é“¾æ¥ã€‚å› ä¸ºæˆ‘çš„æœºå™¨äººå’ŒMySQLæ˜¯åœ¨åŒä¸€å°ä¸»æœºä¸Šï¼Œè‚¯å®šä¸æ˜¯ç½‘ç»œæœ¬èº«é—®é¢˜å¯¼è‡´çš„ã€‚\næ‰€ä»¥æˆ‘éœ€è¦å°†MySQLæ•°æ®åº“æ¢æˆsqlite3æ•°æ®åº“ã€‚\n\nMySQLè½¬sqlite3å¯¼å‡ºMySQLä¸­çš„æ•°æ®å¥½åœ¨æˆ‘çš„æœºå™¨äººä½¿ç”¨çš„æ˜¯pythonçš„peeweeè¿™ä¸ªORMåº“ï¼Œåªéœ€è¦ä¿®æ”¹åº•å±‚çš„DBå¼•æ“å°±èƒ½å¿«é€Ÿåœ¨MySQLå’Œsqlite3ä¹‹é—´åˆ‡æ¢ã€‚æˆ‘ä»¬è¦è§£å†³çš„åªæ˜¯æ€ä¹ˆæŠŠMySQL8.0.30çš„æ•°æ®å¯¼å…¥åˆ°sqlite3ä¸­ã€‚\n\næœ¬æ–‡æµ‹è¯•ä½¿ç”¨çš„ç‰ˆæœ¬ä¸ºï¼šMySQL 8.0.30 å’Œ sqlite3 3.44.0\n\né¦–å…ˆæ˜¯ä»MySQLå°†æ•°æ®åº“é‡Œé¢çš„æ‰€æœ‰æ•°æ®å¯¼å‡ºä¸ºsqlæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘å®‰è£…äº†1panelæœåŠ¡å™¨é¢æ¿ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨é¢æ¿çš„å¤‡ä»½åŠŸèƒ½ï¼Œå†æŠŠå¤‡ä»½å¥½çš„tarä¸‹è½½ä¸‹æ¥ï¼ˆé‡Œé¢å°±æ˜¯sqlæ–‡ä»¶ï¼‰\nè¿™é‡Œç»™å‡ºç”¨å‘½ä»¤è¡Œæ¥å¤„ç†çš„æ–¹å¼ï¼Œä¸€èˆ¬ä½¿ç”¨çš„å·¥å…·ä¸ºmysqldumpï¼Œåœ¨å®‰è£…MySQLçš„æ—¶å€™è¿™ä¸ªå·¥å…·åº”è¯¥å°±ä¼šè¿å¸¦å®‰è£…ã€‚æˆ‘çš„MySQLæ˜¯ç”¨dockerå®‰è£…çš„ï¼Œdockerå®¹å™¨å†…çš„ç»ˆç«¯ä¹Ÿæœ‰è¿™ä¸ªå‘½ä»¤å·¥å…·ã€‚\n[root@RainYun-8aNbbsmA:~/docker]# docker exec -it mysql /bin/bashbash-4.4# mysqldumpUsage: mysqldump [OPTIONS] database [tables]OR     mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]OR     mysqldump [OPTIONS] --all-databases [OPTIONS]For more options, use mysqldump --helpbash-4.4# \n\nå¯¼å‡ºæ•´ä¸ªæ•°æ®åº“çš„æ•°æ®åˆ°sqlçš„å‘½ä»¤å¦‚ä¸‹\nmysqldump -u username -ppassword dbname &gt; dbname.sqlï¼›\n\næ¯”å¦‚æˆ‘æœ‰ä¸ªtestdbæ•°æ®åº“ï¼Œå°†å…¶å¯¼å…¥testdb.sqlçš„å‘½ä»¤å¦‚ä¸‹ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨äº†rootç”¨æˆ·æ¥å¤„ç†ã€‚\nmysqldump -uroot -p123456 testdb &gt; testdb.sql\n\nå› ä¸ºåœ¨å‘½ä»¤è¡Œä½¿ç”¨å¯†ç è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥é”®å…¥å¦‚ä¸Šå‘½ä»¤çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªè­¦å‘Šï¼Œå¯ä»¥å¿½ç•¥å®ƒã€‚\nmysqldump: [Warning] Using a password on the command line interface can be insecure.\n\nlsæŸ¥çœ‹ä¸€ä¸‹ï¼Œå½“å‰è·¯å¾„ä¸Šå·²ç»æœ‰æˆ‘ä»¬éœ€è¦çš„sqlæ•°æ®æ–‡ä»¶äº†ã€‚\ndockerå†…æ–‡ä»¶æ‹·è´åˆ°å®¿ä¸»æœºå› ä¸ºæˆ‘ç°åœ¨çš„è¿™ä¸ªæ“ä½œæ˜¯åœ¨ä¸€ä¸ªdockerå®¹å™¨é‡Œé¢ï¼Œæˆ‘è¿˜éœ€è¦å°†å…¶ä»dockerä¸­æ‹·è´å‡ºæ¥ï¼Œæ–¹æ³•æœ‰ä¸¤ä¸ª\n\nå°†sqlæ–‡ä»¶æ‹·è´åˆ°dockerçš„æŒä¹…åŒ–ç›®å½•ä¸­ï¼ˆå³æ˜ å°„åˆ°äº†å®¿ä¸»æœºçš„ç›®å½•ä¸­ï¼‰ï¼›\nä½¿ç”¨docker copyå‘½ä»¤ï¼›\n\nå¯¹äº1panelå®‰è£…çš„MySQLå®¹å™¨è€Œè¨€ï¼Œä½ å¯ä»¥åœ¨å®¹å™¨çš„è¯¦ç»†è®¾ç½®é‡Œé¢çœ‹åˆ°æ˜ å°„è·¯å¾„çš„å…³ç³»ã€‚\n\nå¦‚æœä½¿ç”¨docker cpå‘½ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹\ndocker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ å®¿ä¸»æœºè·¯å¾„\n\nè¿™é‡Œçš„å®¹å™¨IDå¯ä»¥æ˜¯å®¹å™¨çš„åå­—ï¼Œä¹Ÿå¯ä»¥æ˜¯docker pså‘½ä»¤æŸ¥çœ‹åˆ°çš„å®¹å™¨CONTAINER IDï¼›mysqldumpå‘½ä»¤å¼„å‡ºæ¥çš„sqlæ–‡ä»¶æ˜¯åœ¨å®¹å™¨å†…çš„æ ¹ç›®å½•ä¸Šã€‚\n# docker cp mysql:/testdb.sql ~/testdb.sqlSuccessfully copied 9.85MB to /root/testdb.sql\n\nä¿®æ”¹sqlæ–‡ä»¶MySQLå¯¼å‡ºçš„sqlæ–‡ä»¶ä¸èƒ½ç›´æ¥è¢«sqlite3è¯†åˆ«ï¼Œåœ¨æˆ‘çš„æœºå™¨äººæ•°æ®åº“ä¸­é‡åˆ°å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹sqlæ–‡ä»¶ã€‚\n\nç”¨peeweeåˆ›å»ºsqliteæ•°æ®åº“æ—¶ç”Ÿæˆçš„create tableè¯­å¥æ›¿æ¢MySQLå¯¼å‡ºçš„sqlæ–‡ä»¶å†…éƒ¨å·²æœ‰çš„å»ºè¡¨è¯­å¥ï¼›\nåˆ é™¤sqlæ–‡ä»¶ä¸­çš„LOCK TABLES å’ŒUNLOCK TABLES;ï¼Œå› ä¸ºsqliteä¸æ”¯æŒï¼›\nsqlæ–‡ä»¶ä¸­çš„è½¬ä¹‰å­—ç¬¦\\&quot;æ›¿æ¢æˆ&quot;ã€‚å› ä¸ºåœ¨sqlite3ä¸­ä¸éœ€è¦è¿›è¡Œæ­¤è½¬ä¹‰ã€‚å¦‚æœä¸ä¿®æ”¹ï¼Œé‚£ä¹ˆåœ¨sqlite3ä¸­listçš„jsonå­—ç¬¦ä¸²ä¸­å°±ä¼šç•™æœ‰\\&quot;å¯¼è‡´æ— æ³•è¢«json.loadsï¼ˆçŒœæµ‹sqlite3ä¸­&#39;çš„ä¼˜å…ˆçº§é«˜äº&quot;ï¼‰\n\né¦–å…ˆæ˜¯æŠŠpythonä¸­peeweeä½¿ç”¨çš„æ•°æ®åº“æ¨¡å‹æ”¹æˆsqliteï¼Œç„¶åå¯åŠ¨ä¸€ä¸‹è¿™ä¸ªæœºå™¨äººï¼Œæ­¤æ—¶peeweeå°±ä¼šåˆ›å»ºä¸€ä¸ªdbæ–‡ä»¶ã€‚\nsqlite3 æ•°æ®åº“æ–‡ä»¶å.db\n\nè¿›å…¥è¯¥dbæ–‡ä»¶åæ‰§è¡Œå¦‚ä¸‹æŸ¥è¯¢å‘½ä»¤ï¼Œèƒ½çœ‹åˆ°sqlite3çš„å»ºè¡¨è¯­å¥ï¼Œå°†å…¶æ›¿æ¢æ‰MySQLä¸­å¯¼å‡ºsqlé‡Œé¢çš„å»ºè¡¨å‘½ä»¤ã€‚\nSELECT sql FROM sqlite_master WHERE type=&#x27;table&#x27;;\n\nå¦‚æœä½ ç”¨çš„ä¸æ˜¯peeweeè¿™ç§ORMåº“ï¼Œåˆ™è¿˜éœ€è¦è‡ªè¡Œä¿®æ”¹å»ºè¡¨å‘½ä»¤ä¸ºsqlite3çš„å‘½ä»¤ï¼ˆå¯ä»¥é—®é—®gptè®©ä»–å¸®ä½ æ”¹ä¸€ä¸‹ï¼Œæˆ–è€…è‡ªå·±é‡å†™ä¸€ä¸ªï¼‰ã€‚æ¯”å¦‚åœ¨sqlite3ä¸­å°±ä¸æ”¯æŒè¡¨åè·Ÿéšçš„AUTO_INCREMENT=4728è¯­å¥ã€‚\næ–‡ä»¶å¯¼å…¥åˆ°sqlite3sqlite3çš„å¯¼å…¥å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼Œå·¦ä¾§æ˜¯æ•°æ®åº“æ–‡ä»¶åå­—ï¼Œå³ä¾§æ˜¯éœ€è¦å¯¼å…¥çš„æºsqlæ–‡ä»¶ã€‚ä¸ºäº†é¿å…æ–‡ä»¶åç¼–ç é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨å…¨è‹±æ–‡åå­—ã€‚\nsqlite3 æ•°æ®åº“åå­—.db &lt; éœ€è¦å¯¼å…¥çš„æ–‡ä»¶.sql\n\nè¿™ä¸ªå‘½ä»¤æˆåŠŸçš„æ—¶å€™ä¸ä¼šæœ‰ä»»ä½•è¾“å‡ºï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›å…¥å¯¼å…¥åç”Ÿæˆçš„dbæ–‡ä»¶ä¸­\nsqlite3 æ•°æ®åº“åå­—.db\n\nä¸å‡ºæ„å¤–çš„è¯ï¼Œæ‰€æœ‰æ•°æ®å°±å·²ç»å¯¼å…¥åˆ°è¿™ä¸ªæ–°çš„æ•°æ®åº“æ–‡ä»¶ä¸­äº†ï¼Œæ£€æŸ¥ä¸€ä¸‹å’ŒMySQLä¸­çš„æ•°æ®åº“æœ‰æ²¡æœ‰ä¸ä¸€æ ·çš„åœ°æ–¹å§ï¼\nThe endæœ‰æ›´å¤šé—®é¢˜ï¼Œæ¬¢è¿è¯„è®ºç•™è¨€è®¨è®ºã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æ•°æ®åº“SQL"],"tags":["mysql","sqlite3"]},{"title":"ã€leetcodeã€‘1137. ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°","url":"/posts/563921472/","content":"ä»Šå¤©æ˜¯å­¦ä¹ åŠ¨å½’çš„ç¬¬ä¸€å¤©ï¼Œå…ˆæ¥ä¸€é“ç®€å•é¢˜ç»ƒç»ƒæ‰‹å§ï¼\n1.é¢˜ç›®\nleetcode 1137. ç¬¬ N ä¸ªæ³°æ³¢é‚£å¥‘æ•°\n\næ³°æ³¢é‚£å¥‘åºåˆ— Tn å®šä¹‰å¦‚ä¸‹ï¼š \nT0 &#x3D; 0, T1 &#x3D; 1, T2 &#x3D; 1, ä¸”åœ¨ n &gt;&#x3D; 0 çš„æ¡ä»¶ä¸‹ Tn+3 = Tn + Tn+1 + Tn+2\nç»™ä½ æ•´æ•° nï¼Œè¯·è¿”å›ç¬¬ n ä¸ªæ³°æ³¢é‚£å¥‘æ•° Tn çš„å€¼ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„ä¸æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œå“ªä¸ªæ˜¯ Tn = Tn-1 + Tn-2ï¼Œè€Œè¿™é‡Œæ˜¯ä¸‰ä¸ªï¼›\n2.åŠ¨å½’è§£æ³•åŠ¨æ€é€’å½’çš„æ€è·¯æ˜¯éœ€è¦æ‰¾åˆ°ä¸€ä¸ªé€’å½’æ–¹ç¨‹ï¼Œæœ¬é¢˜ä¸­çš„é€’å½’æ–¹ç¨‹å·²ç»ç»™å‡ºæ¥äº†ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“nå°äº3çš„æ—¶å€™ï¼Œè¿™ä¸ªé€’å½’æ–¹ç¨‹æ˜¯ä¸å¯ç”¨çš„ï¼ˆå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åŠæ³•è®¡ç®—Tè´Ÿæ•°çš„å€¼ï¼‰\n2.1 è§£æ³•1-é€’å½’å¦‚ä¸‹æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªè§£æ³•ï¼Œé€šè¿‡é€’å½’å‡½æ•°è®¡ç®—æ•°å€¼ï¼Œå¹¶æå‰å†™å…¥0ã€1ã€2è¿™ä¸‰ä¸ªæ•°å€¼åˆ°æ•°ç»„é‡Œé¢ã€‚\nå¦‚æœæ•°ç»„é‡Œé¢æœ‰å€¼ï¼Œç›´æ¥å–å‡ºæ¥ï¼Œå¦‚æœæ²¡æœ‰å€¼ï¼Œåœ¨è®¡ç®—äº†ä¹‹åå†èµ‹å€¼åˆ°æ•°ç»„é‡Œé¢ã€‚è¿™æ ·å°±èƒ½ä¿è¯åœ¨æ•´ä¸ªé€’å½’æµç¨‹ä¸­ï¼Œç›¸åŒä¸‹æ ‡å¤„çš„æ•°æ®åªä¼šè¢«è®¡ç®—ä¸€æ¬¡ï¼ˆä¸è¿™ä¹ˆåšä¼šè¶…æ—¶ï¼‰\n#define DEF -1 //é»˜è®¤å€¼    // ç›´æ¥ç”¨é€’å½’ä¼šè¶…æ—¶    // æƒ³æ³•æ˜¯å°†æ•°æ®å­˜åˆ°vectoré‡Œé¢ï¼Œé¿å…é’ˆå¯¹æŸä¸€ä¸ªæ•°çš„äºŒæ¬¡é€’å½’è¿ç®—    long long fib(int n,vector&lt;int&gt;&amp; _map)&#123;        if(_map[n] != DEF)&#123;            return _map[n];        &#125;        long long ans = fib(n-1,_map) + fib(n-2,_map)+fib(n-3,_map);        _map[n] = ans;        return ans;    &#125;    int tribonacci(int n) &#123;        vector&lt;int&gt; _map(40,DEF);        _map[0] = 0;        _map[1] = 1;        _map[2] = 1;        // åˆå§‹åŒ–å¹¶ä¼ å¼•ç”¨ç»™é€’å½’å‡½æ•°        return fib(n,_map);    &#125;\n\nä½¿ç”¨è¯¥æ–¹æ³•çš„é€šè¿‡ç‡å¦‚å›¾\n\n2.2 æ–¹æ³•2-è¿­ä»£è¿˜æ˜¯ç›¸åŒçš„æ€è·¯ï¼Œåªä¸è¿‡è¿™æ¬¡æˆ‘ä»¬ä¸ç”¨é€’å½’ï¼Œè€Œæ˜¯ç”¨è¿­ä»£æ¥è®¡ç®—å‡ºæ•°ç»„é‡Œé¢å¯¹åº”ä¸‹æ ‡çš„å€¼ï¼Œæœ€åå†è¿”å›ç»™ç”¨æˆ·\nint tribonacci(int n) &#123;    if(n&lt;=1)&#123;        return n;    &#125;    vector&lt;int&gt; _map(n+1,DEF);    _map[0] = 0;    _map[1] = 1;    _map[2] = 1;    for(int i=3;i&lt;_map.size();i++)&#123;        _map[i] = _map[i-3] +_map[i-2]+_map[i-1];    &#125;    return _map[n];&#125;\n\nè¯¥åŠæ³•çš„é€šè¿‡ç‡å¦‚å›¾ï¼Œæ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯O(N)\n\n2.3 è¿­ä»£+å˜é‡æ—¢ç„¶åœ¨è®¡ç®—çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦ç”¨åˆ°å½“å‰æ•°æ®å’Œè¯¥æ•°æ®ä¹‹å‰çš„3ä¸ªå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨å›ºå®šçš„å‡ ä¸ªå˜é‡æ¥å®ç°è¿™ä¸ªæ“ä½œï¼Œæ¯æ¬¡è®¡ç®—ä¹‹åï¼Œéƒ½å¯¹å˜é‡è¿›è¡Œä¸€æ¬¡è½®æ¢å°±okäº†ï¼Œå®˜æ–¹çš„é¢˜è§£å°±æ˜¯è¿™ä¹ˆæ“ä½œçš„\nint tribonacci(int n) &#123;    if (n == 0) &#123;        return 0;    &#125;    if (n &lt;= 2) &#123;        return 1;    &#125;    int p = 0, q = 0, r = 1, s = 1;    for (int i = 3; i &lt;= n; ++i) &#123;        p = q;        q = r;        r = s;        s = p + q + r;    &#125;    return s;&#125;\n\nè¿™æ ·æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦è¿˜æ˜¯O(N)ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦å°±é™åˆ°O(1)äº†ï¼\n\n3.çŸ©é˜µè®¡ç®—å¦‚æœä¸ç”¨é€’å½’ï¼Œè¿˜å¯ä»¥ç”¨çŸ©é˜µä¹˜æ³•è¿ç®—ï¼Œè¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(LogN)\nhttps://leetcode.cn/problems/n-th-tribonacci-number/solutions/921898/di-n-ge-tai-bo-na-qi-shu-by-leetcode-sol-kn16/\n\nå¥ˆä½•æœ¬äººçº¿ä»£çŸ¥è¯†å¿˜è®°äº†ï¼Œå®Œå…¨çœ‹ä¸æ‡‚\nclass Solution &#123;public:    int tribonacci(int n) &#123;        if (n == 0) &#123;            return 0;        &#125;        if (n &lt;= 2) &#123;            return 1;        &#125;        vector&lt;vector&lt;long&gt;&gt; q = &#123;&#123;1, 1, 1&#125;, &#123;1, 0, 0&#125;, &#123;0, 1, 0&#125;&#125;;        vector&lt;vector&lt;long&gt;&gt; res = pow(q, n);        return res[0][2];    &#125;    vector&lt;vector&lt;long&gt;&gt; pow(vector&lt;vector&lt;long&gt;&gt;&amp; a, long n) &#123;        vector&lt;vector&lt;long&gt;&gt; ret = &#123;&#123;1, 0, 0&#125;, &#123;0, 1, 0&#125;, &#123;0, 0, 1&#125;&#125;;        while (n &gt; 0) &#123;            if ((n &amp; 1) == 1) &#123;                ret = multiply(ret, a);            &#125;            n &gt;&gt;= 1;            a = multiply(a, a);        &#125;        return ret;    &#125;    vector&lt;vector&lt;long&gt;&gt; multiply(vector&lt;vector&lt;long&gt;&gt;&amp; a, vector&lt;vector&lt;long&gt;&gt;&amp; b) &#123;        vector&lt;vector&lt;long&gt;&gt; c(3, vector&lt;long&gt;(3));        for (int i = 0; i &lt; 3; i++) &#123;            for (int j = 0; j &lt; 3; j++) &#123;                c[i][j] = a[i][0] * b[0][j] + a[i][1] * b[1][j] + a[i][2] * b[2][j];            &#125;        &#125;        return c;    &#125;&#125;;\n\næµ‹äº†ä¸€ä¸‹æ•ˆæœï¼Œå¥½åƒæ•ˆç‡å’Œä½¿ç”¨2.3çš„åŠæ³•æ²¡å•¥åŒºåˆ«ï¼Œé‚£æˆ‘è¿˜æ˜¯ç”¨åŠ¨å½’å§ğŸ˜­\n\nä»¥åæœ‰æ—¶é—´äº†å†æ¥çº ç»“è¿™ä¸ªç­”æ¡ˆçš„æ€è·¯\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","leetcode","åŠ¨æ€å½’åŒ–"]},{"title":"ã€leetcodeã€‘11.ç››æ°´æœ€å¤šçš„å®¹å™¨","url":"/posts/62868007/","content":"é¢˜ç›®11. ç››æœ€å¤šæ°´çš„å®¹å™¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ height ã€‚æœ‰ n æ¡å‚çº¿ï¼Œç¬¬ i æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ (i, 0) å’Œ (i, height[i]) ã€‚\næ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚\nè¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚\nè¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚\n\nè¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]è¾“å‡ºï¼š49 è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚\næ€è·¯æœ€å¼€å§‹æƒ³çš„æ˜¯æš´åŠ›ç ´è§£ï¼Œä¸¤ä¸ªforå°±èƒ½éå†å‡ºæ¥ã€‚ä½†å¾ˆæ˜æ˜¾è¿™ä¸ªæ€è·¯æ˜¯ä¼šè¶…æ—¶çš„ï¼Œä¸¤ä¸ªforçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N^2)ï¼›\nè¿™é“é¢˜åœ¨leetcodeçš„top100ä¸­æ˜¯åŒæŒ‡é’ˆæ³•é‡Œé¢çš„ï¼Œæ‰€ä»¥è¦æƒ³ä½¿ç”¨å‰åä¸¤ä¸ªæŒ‡é’ˆæ¥éå†ï¼Œå¯ä»¥è®©æ—¶é—´å¤æ‚åº¦é™ä½ä¸ºO(N)ï¼›è¿™ä¹Ÿæ˜¯å®˜æ–¹é¢˜è§£ä¸­æåˆ°çš„æ–¹å¼ã€‚\né¦–å…ˆæ˜¯å‰åæŒ‡é’ˆåº”è¯¥ç§»åŠ¨è°çš„é—®é¢˜ï¼Œå…ˆåˆ—å‡ºè¿™ä¸ªé¢ç§¯çš„è®¡ç®—å…¬å¼ï¼Œä¸¤ä¸ªä¸‹æ ‡çš„æ’å€¼æ˜¯xè½´çš„é•¿åº¦ï¼Œç„¶åæ˜¯ä¸¤ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„è¾ƒå°å€¼ï¼Œä½œä¸ºæŸ±å­çš„é•¿åº¦ã€‚å‡è®¾index1å’Œindex2ä¸ºä¸¤ä¸ªä¸‹æ ‡ï¼Œé»˜è®¤æƒ…å†µä¸€ä¸ªæ•°ç»„å¤´ä¸€ä¸ªæ•°ç»„å°¾éƒ¨ã€‚\n$$ range &#x3D; abs(index1-index2) * min(arr[index1],arr[index2])$$\nå‡è®¾index1çš„æ•°ç»„å…ƒç´ ï¼ˆé«˜åº¦ï¼‰å°äºindex2ï¼Œé‚£ä¹ˆè¿™ä¸ªå…¬å¼å°±å˜æˆäº†\n$$ range &#x3D; abs(index1-index2) * arr[index1]$$\næ³¨æ„ï¼Œæ­¤æ—¶ç§»åŠ¨index2ä¸‹æ ‡ï¼Œè¿™ä¸ªå®¹å™¨çš„é¢ç§¯è¿˜æ˜¯ä¸ä¼šå¤§äºè¿™ä¸ªå€¼ï¼Œxè½´é•¿åº¦å‡å°‘äº†ï¼Œä½†é«˜åº¦æ— è®ºæ€ä¹ˆå˜è¾ƒå°è€…è¿˜æ˜¯arr[index1]ï¼›æ‰€ä»¥éœ€è¦ç§»åŠ¨çš„ä¸‹æ ‡æ˜¯äºŒè€…é«˜åº¦å°çš„é‚£ä¸€ä¸ªã€‚\nå®˜æ–¹é¢˜è§£ä¸­æœ‰æ›´è¯¦ç»†çš„æ¼”ç¤ºï¼šç››æœ€å¤šæ°´çš„å®¹å™¨. - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nä»£ç class Solution &#123;public:    int maxArea(vector&lt;int&gt;&amp; height) &#123;        int maxRet = 0 ;        int left = 0,right = height.size() -1;        while(left &lt; right)        &#123;            int curMin = min(height[right],height[left]);            maxRet = max((right-left)*curMin,maxRet);            if(curMin == height[right])&#123;                right--;            &#125;            else&#123;                left++;            &#125;        &#125;        return maxRet;    &#125;&#125;;\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["é»˜è®¤æ ‡ç­¾"]},{"title":"ã€leetcodeã€‘146LRUç¼“å­˜","url":"/posts/1621367479/","content":"é¢˜ç›®146. LRU ç¼“å­˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næ€è·¯æ“ä½œç³»ç»Ÿä¸­å­¦ä¹ è¿‡LRUçš„ç›¸å…³çŸ¥è¯†ï¼Œä¸­æ–‡æ˜¯æœ€é•¿æœ€ä¹…æœªä½¿ç”¨ï¼Œæ˜¯é¡µé¢ç½®æ¢ç®—æ³•çš„ä¸€éƒ¨åˆ†ã€‚å³é¡µè¡¨åœ¨ç½®æ¢ç®—æ³•çš„æ—¶å€™ï¼Œä»å½“å‰æ—¶åˆ»å¾€å‰æ‰¾ï¼Œæ‰¾åˆ°ä»¥è½½å…¥é¡µé¢ä¸­æœ€é•¿æ—¶é—´æ²¡æœ‰è¢«ä½¿ç”¨çš„å“ªä¸€ä¸ªï¼Œå°†å…¶ç½®æ¢å‡ºå»ã€‚\nå¯¹äºä»£ç è€Œè¨€ï¼Œå¯ä»¥ç”¨list+å“ˆå¸Œè¡¨çš„ç»“æ„æ¥å®ç°ã€‚\n\nå“ˆå¸Œè¡¨å­˜æ”¾keyå’Œnodeçš„å…³ç³»\nnodeä¸­å­˜æ”¾keyå’Œvalue\n\næˆ‘ä»¬ä½¿ç”¨listæ¥ç»´æŠ¤èŠ‚ç‚¹è¢«ä½¿ç”¨çš„æ—¶é—´ï¼Œä¸€ä¸ªèŠ‚ç‚¹è¢«è®¿é—®å°±æ’å…¥åˆ°é“¾è¡¨å¤´ï¼Œè¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨å°¾éƒ¨çš„å°±æ˜¯é‚£ä¸ªæœ€ä¹…æ²¡æœ‰è¢«ä½¿ç”¨çš„èŠ‚ç‚¹ã€‚éœ€è¦åˆ é™¤çš„æ—¶å€™å°±å°†å°¾éƒ¨çš„èŠ‚ç‚¹åˆ é™¤å³å¯ã€‚\nå¦‚æœä¸€ä¸ªkeyå·²ç»å­˜åœ¨ä¸listä¸­ï¼Œè®¿é—®çš„æ—¶å€™å°±éœ€è¦å°†å…¶å…ˆåˆ é™¤ï¼Œå†å¤´æ’ã€‚ä¸ºäº†æ»¡è¶³é¢˜ç›®ä¸­O(1)æ—¶é—´å¤æ‚åº¦çš„è¦æ±‚ï¼Œä½¿ç”¨é“¾è¡¨æ‰èƒ½ä¿è¯åˆ é™¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ã€‚\nä»£ç åˆšå¼€å§‹ç”¨çš„å¤´åˆ +å°¾æ’çš„æ–¹å¼ï¼Œç»“æœå¼„äº†å¥½ä¹…éƒ½è¿˜æœ‰æ®µé”™è¯¯ï¼Œæ”¹æˆå¤´æ’+å°¾åˆ å¥½å¤„ç†ä¸€äº›ã€‚\nstruct Node&#123;    int _val;    int _key;    Node* _prev;    Node* _next;    Node():_val(0),_key(0),_prev(nullptr),_next(nullptr)&#123;&#125;    Node(int key,int val):_val(val),_key(key),_prev(nullptr),_next(nullptr)&#123;&#125;&#125;;class LRUCache &#123;    Node* _head;    Node* _tail;    unordered_map&lt;int,Node*&gt; _map;    int _size = 0;    int _capa = 0;public:    LRUCache(int capacity) &#123;        _head = new Node();        _tail = new Node();        _head-&gt;_next = _tail;        _tail-&gt;_prev = _head;        _capa = capacity;    &#125;\tvoid addNodeToHead(Node* node)    &#123;        node-&gt;_prev = _head;        node-&gt;_next = _head-&gt;_next;        _head-&gt;_next-&gt;_prev = node;        _head-&gt;_next = node;    &#125;    void removeNode(Node* node)    &#123;        node-&gt;_prev-&gt;_next = node-&gt;_next;        node-&gt;_next-&gt;_prev = node-&gt;_prev;    &#125;    int get(int key) &#123;        if(_map.count(key))        &#123;            Node* node = _map[key];            removeNode(node);            addNodeToHead(node);            return node-&gt;_val;        &#125;        return -1;    &#125;        void put(int key, int value) &#123;        // å­˜åœ¨        if(_map.count(key))        &#123;            Node* node = _map[key];            node-&gt;_val = value;            removeNode(node);            addNodeToHead(node);        &#125;        else        &#123;            // è¶…é•¿äº†            if(_size == _capa)            &#123;                Node* remove = _tail-&gt;_prev;                _map.erase(remove-&gt;_key);                removeNode(remove);                _size--;                // è¿™é‡Œå¯ä»¥ä¸freeèŠ‚ç‚¹ï¼Œå› ä¸ºOJä¸è€ƒè™‘å†…å­˜æ³„æ¼                delete remove;            &#125;            Node* node = new Node(key,value);            addNodeToHead(node);            _map[key] = node;            _size++;        &#125;    &#125;    &#125;;/** * Your LRUCache object will be instantiated and called as such: * LRUCache* obj = new LRUCache(capacity); * int param_1 = obj-&gt;get(key); * obj-&gt;put(key,value); */\n\n\n\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["é“¾è¡¨","leetcode"]},{"title":"ã€leetcodeã€‘16.æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ","url":"/posts/4003189051/","content":"è¿™ä¸‹çœŸçš„å¾—å¥½å¥½é‡å¤´å¼€å§‹å­¦ç®—æ³•äº†ï¼ŒåŸºäºã€Šä»£ç éšæƒ³å½•ã€‹ï¼Œä»Šå¤©å‘¨æ—¥çš„ç›®æ ‡æ˜¯å®Œæˆå“ˆå¸Œç« èŠ‚ï¼Œå¹¶å¤ä¹ å­—ç¬¦ä¸²ç« èŠ‚å’ŒKMPç®—æ³•ã€‚äº‰å–åœ¨å››æœˆä¸­æ—¬ä¹‹å‰å­¦å®Œã€Šä»£ç éšæƒ³å½•ã€‹é‡Œé¢çš„ç®—æ³•ï¼Œæ¬¢è¿å¤§å®¶ç›‘ç£æˆ‘ï¼\nLetsOJ_å¤šäººåˆ·é¢˜æ‰“å¡: è¿™æ˜¯ä¸€ä¸ªå¤šäººOJæ‰“å¡ä»“åº“\næ–°å»ºäº†ä¸€ä¸ªleetcodeçš„è¿›åº¦ï¼ŒOJåˆ·é¢˜æ‰“å¡ä»“åº“ä¸­çš„ä»£ç ä¹Ÿé‡æ–°å½’æ¡£ã€‚\n\næ³¨æ„ï¼šåœ¨æ‰‹æœºä¸Šä»£ç å—ä¸­çš„ä¸‹æ ‡ä½ç½®ä¼šå› ä¸ºå­—ä½“åŸå› åç¦»ï¼Œè¯·ä½¿ç”¨ç”µè„‘æŸ¥çœ‹æœ¬åšå®¢ã€‚\né—®é¢˜16. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums å’Œ ä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ ä» nums ä¸­é€‰å‡ºä¸‰ä¸ªæ•´æ•°ï¼Œä½¿å®ƒä»¬çš„å’Œä¸ target æœ€æ¥è¿‘ã€‚\nè¿”å›è¿™ä¸‰ä¸ªæ•°çš„å’Œã€‚\nå‡å®šæ¯ç»„è¾“å…¥åªå­˜åœ¨æ°å¥½ä¸€ä¸ªè§£ã€‚\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šnums = [-1,2,1,-4], target = 1è¾“å‡ºï¼š2è§£é‡Šï¼šä¸ target æœ€æ¥è¿‘çš„å’Œæ˜¯ 2 (-1 + 2 + 1 = 2) ã€‚ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šnums = [0,0,0], target = 1è¾“å‡ºï¼š0\n\næ€è·¯è¿™é“é¢˜å’Œ15ä¸‰æ•°ä¹‹å’Œçš„æ€è·¯å¾ˆç›¸ä¼¼ï¼Œ15é¢˜ä¸­è¦æ±‚æ˜¯ä¸‰æ•°å’Œä¸º0ï¼Œè¿™é“é¢˜è¦æ±‚æ˜¯å’Œtargetè¶Šæ¥è¿‘è¶Šå¥½ã€‚å…¶å®å°±æ˜¯åœ¨æŠŠç›®æ ‡å€¼ä»0æ”¹æˆtargetï¼Œå¹¶å°†ä¸‰æ•°å’Œä¸ºtargetæ”¹æˆæ¥è¿‘targetï¼Œä¸­é—´ä¼šå¤šä¸€ä¸ªè®°å½•å·®è·æ•°çš„æ“ä½œã€‚\nä½¿ç”¨æ’åº+åŒæŒ‡é’ˆæ¥å®ç°ã€‚æ’åºåçš„æ•°ç»„å·²ç»æœ‰åºï¼Œä½¿ç”¨åŒæŒ‡é’ˆçš„æ—¶å€™æ–¹ä¾¿æ§åˆ¶æŒ‡é’ˆç§»åŠ¨\n\nå¦‚æœå’Œå¤§äºtargetï¼Œåˆ™å³ä¾§æŒ‡é’ˆâ€“ï¼›\nå¦‚æœå’Œå°äºtargetï¼Œåˆ™å·¦ä¾§æŒ‡é’ˆ++ï¼›\n\nè¿™é‡Œè¿˜ä¼šæ¶‰åŠåˆ°ä¸€äº›ä¼˜åŒ–ï¼Œè™½ç„¶é¢˜ç›®ä¸­æ²¡æœ‰15é¢˜å»é‡çš„è¦æ±‚ï¼Œä½†è·³è¿‡é‡å¤å…ƒç´ ä¹Ÿèƒ½æé«˜è¿è¡Œæ•ˆç‡ã€‚\nä»£ç æœ€ç®€å•çš„æ–¹æ³•æœ€ç®€å•çš„æ–¹å¼å³ä¸åšä»»ä½•å»é‡ï¼ŒæŒ‰ç…§æ€è·¯å†™ä»£ç å°±è¡Œã€‚sumå¤§äºæˆ–è€…ç­‰äºtargetçš„æ—¶å€™å°±è®©å³ä¾§æŒ‡é’ˆå‡ä¸€ï¼Œå°äºtargetçš„æ—¶å€™è®©å·¦ä¾§æŒ‡é’ˆåŠ ä¸€ã€‚\nclass Solution &#123;public:    int threeSumClosest(vector&lt;int&gt;&amp; nums, int target) &#123;        int retNum = INT_MAX; // å·®è·å€¼        int retSum = 0;        sort(nums.begin(),nums.end());        for(int i = 0;i&lt;nums.size();i++)        &#123;            int left = i+1,right = nums.size()-1;            while(left &lt; right)            &#123;                int sum = nums[i] + nums[left] + nums[right];\t\t\t\t// æ›´æ–°ç»“æœå€¼                int diff = abs(target-sum);                if(diff &lt; retNum)                &#123;                    retNum = diff;                    retSum = sum;                &#125;                if(sum &gt;= target)&#123;                    right --;                &#125;                else if(sum &lt; target)&#123;                    left++;                &#125;            &#125;        &#125;        return retSum;    &#125;&#125;;\n\nè¿™æ ·ä¹Ÿèƒ½é€šè¿‡\n\nä¸‹æ ‡iå»é‡ä¸‹æ ‡iå»é‡çš„ç›®çš„æ˜¯è®©iä¸å¤„ç†åˆšåˆšå·²ç»å¤„ç†è¿‡çš„å€¼ã€‚æ³¨æ„ï¼Œå’Œ15é¢˜18é¢˜ä¸­çš„å»é‡éƒ½æ˜¯ç›¸åŒçš„æ€è·¯ï¼Œè¦å…ˆå¤„ç†å®Œæ¯•æŸä¸ªå€¼å†å»é‡ã€‚\nå¦‚ä¸‹æ‰€ç¤ºï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦å¯¹-1è¿™ä¸ªå…ƒç´ å»é‡ï¼ˆä¸é‡å¤å¤„ç†ï¼‰ï¼Œåº”è¯¥å…ˆæ­£å¸¸å¯¹ç¬¬ä¸€ä¸ª-1è¿›è¡Œæ“ä½œï¼Œå†è®©iè·³è¿‡ç¬¬äºŒä¸ª-1èµ°åˆ°2çš„ä½ç½®è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ\n-3 -1 -1 2 3 4    i\n\nå¦‚æœå…ˆå»é‡ï¼Œåœ¨ä¸‰æ•°ä¹‹å’Œä¸­ï¼Œå‡è®¾target&#x3D;0ï¼Œä¸‹é¢çš„æƒ…å†µå°±ä¼šè¢«å¿½ç•¥ã€‚è¿™é‡Œiå·²ç»èµ°åˆ°äº†ç¬¬äºŒä¸ª-1çš„ä½ç½®äº†ï¼Œä½†(-1) + (-1) +2 = 0 ï¼Œè¿™ç§ç¬¦åˆé¢˜æ„çš„ç»“æœå°±ç›´æ¥è¢«è·³è¿‡äº†ã€‚\n// å…ˆå»é‡çš„ä»£ç ï¼Œé”™è¯¯ï¼if(nums[i] == nums[i+1])\tcontinue;\n\n-3 -1 -1 2 3 4\t   i l   r\n\nå¦‚æœæˆ‘ä»¬ä¸å…ˆæ‰§è¡Œå»é‡ï¼Œä¸‹æ ‡åˆ†å¸ƒå¦‚ä¸‹æ‰€ç¤ºï¼Œå³ä¾§æŒ‡é’ˆä¸æ–­å‡ï¼Œå°±èƒ½åŒ¹é…ä¸Š-1 -1 2è¿™ä¸ªä¸‰å…ƒç»„ã€‚\n-3 -1 -1 2 3 4    i  l     r\n\nåŒ¹é…ä¸Šäº†ä¹‹åå†è®©iè·³è¿‡ç¬¬äºŒä¸ª-1æ‰æ˜¯æ­£ç¡®çš„ã€‚\n// æ­£ç¡®çš„å»é‡ä»£ç if(i&gt;0 &amp;&amp; nums[i] == nums[i-1])// è·³è¿‡åˆšåˆšå·²ç»å¤„ç†è¿‡çš„ç›¸åŒå€¼\tcontinue;\n\nå¯¹äºè¿™é“é¢˜ï¼ŒåŠ ä¸Šå¯¹içš„å»é‡åä»£ç å¦‚ä¸‹\nclass Solution &#123;public:    int threeSumClosest(vector&lt;int&gt;&amp; nums, int target) &#123;        int retNum = INT_MAX; // å·®è·å€¼        int retSum = 0;        sort(nums.begin(),nums.end());        for(int i = 0;i&lt;nums.size();i++)        &#123;            // å…ˆåŒ¹é…å†å»é‡            if(i&gt;0 &amp;&amp; nums[i] == nums[i-1])&#123;                continue;             &#125;            int left = i+1,right = nums.size()-1;            while(left &lt; right)            &#123;                int sum = nums[i] + nums[left] + nums[right];                // æ›´æ–°ç»“æœå€¼                int diff = abs(target-sum);                if(diff &lt; retNum)                &#123;                    retNum = diff;                    retSum = sum;                &#125;                if(sum &gt;= target)&#123;                    right --;                &#125;                else if(sum &lt; target)&#123;                    left++;                &#125;            &#125;        &#125;        return retSum;    &#125;&#125;;\n\n\n\nleft&#x2F;rightå»é‡åœ¨15é¢˜ä¸‰æ•°ä¹‹å’Œçš„é¢˜è§£ä¸­ä¼šå¯¹leftå’Œrightè¿›è¡Œå»é‡ï¼ŒåŒæ ·æ˜¯éµå¾ªå…ˆåŒ¹é…å†å»é‡çš„æ“ä½œã€‚\nå‡è®¾å½“å‰æŒ‡é’ˆä½ç½®å¦‚ä¸‹ï¼Œå½“å‰å’Œä¸º5ï¼Œå‡è®¾å°äºtargetï¼Œæ­¤æ—¶éœ€è¦ç§»åŠ¨leftæŒ‡é’ˆ\n-3 -1 -1 2 2 2 3 4    i    l       r\n\né‚£ä¹ˆleftæŒ‡é’ˆç§»åŠ¨çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥ç§»åŠ¨åˆ°æœ€åä¸€ä¸ª2çš„ä½ç½®ï¼Œå› ä¸ºå¯¹äºæ±‚å’Œè€Œè¨€å®ƒä»¬æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚\n-3 -1 -1 2 2 2 3 4    i          l r\n\nä»£ç å¦‚ä¸‹\nclass Solution &#123;public:    int threeSumClosest(vector&lt;int&gt;&amp; nums, int target) &#123;        int retNum = INT_MAX; // å·®è·å€¼        int retSum = 0;        sort(nums.begin(),nums.end());        for(int i = 0;i&lt;nums.size();i++)        &#123;            // å…ˆåŒ¹é…å†å»é‡            if(i&gt;0 &amp;&amp; nums[i] == nums[i-1])&#123;                continue;             &#125;            int left = i+1,right = nums.size()-1;            while(left &lt; right)            &#123;                int sum = nums[i] + nums[left] + nums[right];                if(sum == target)&#123;                    return target;                &#125;                // æ›´æ–°ç»“æœå€¼                int diff = abs(target-sum);                if(diff &lt; retNum)                &#123;                    retNum = diff;                    retSum = sum;                &#125;                if(sum &gt;= target)&#123;                    while(left&lt;right &amp;&amp; nums[right] == nums[right-1])&#123;                        right--;                    &#125;                    // å¿…é¡»è¦å†æ“ä½œä¸€æ¬¡æ‰æ˜¯ä¸‹ä¸€ä¸ª                    right--;                &#125;                else if(sum &lt; target)&#123;                    while(left&lt;right &amp;&amp; nums[left] == nums[left+1])&#123;                        left++;                    &#125;                    // å¿…é¡»è¦å†æ“ä½œä¸€æ¬¡æ‰æ˜¯ä¸‹ä¸€ä¸ª                    left++;                &#125;            &#125;        &#125;        return retSum;    &#125;&#125;;\n\n\né‡åˆ°targetç›´æ¥è¿”å›å¦‚æœä¸‰æ•°å’Œå·²ç»ç­‰äºtargetï¼Œå¯ä»¥ç›´æ¥è¿”å›ï¼Œä¸éœ€è¦ç»§ç»­æ‰§è¡Œã€‚\nThe endleetcodeå’Œ16é¢˜ç±»ä¼¼çš„æœ‰15é¢˜&#x2F;18é¢˜&#x2F;454é¢˜ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä»£ç éšæƒ³å½•å’Œæˆ‘çš„åˆ·é¢˜ä»“åº“ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["ç®—æ³•","leetcode"]},{"title":"ã€leetcodeã€‘239æ»‘åŠ¨çª—å£æœ€å¤§å€¼","url":"/posts/2402466745/","content":"é¢˜ç›®239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ k ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚\nè¿”å› æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ ã€‚\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3è¾“å‡ºï¼š[3,3,5,5,6,7]è§£é‡Šï¼šæ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼---------------               -----[1  3  -1] -3  5  3  6  7       3 1 [3  -1  -3] 5  3  6  7       3 1  3 [-1  -3  5] 3  6  7       5 1  3  -1 [-3  5  3] 6  7       5 1  3  -1  -3 [5  3  6] 7       6 1  3  -1  -3  5 [3  6  7]      7ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šnums = [1], k = 1è¾“å‡ºï¼š[1]\n\næç¤ºï¼š\n1 &lt;= nums.length &lt;= 105-104 &lt;= nums[i] &lt;= 1041 &lt;= k &lt;= nums.length\n\næ€è·¯ä¸€è¯´æ˜æˆ‘æœ€åˆè‡ªå·±æƒ³çš„æ€è·¯æ˜¯ï¼Œç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥ç»´æŠ¤æ»‘åŠ¨çª—å£ï¼Œå¹¶ç”¨ä¸€ä¸ªå½“å‰æœ€å¤§å€¼æ¥è®°å½•æ»‘åŠ¨çª—å£å†…çš„æœ€å¤§å€¼ã€‚æ¯æ¬¡æ»‘åŠ¨çª—å£æ»¡äº†ï¼ˆä¸ºkï¼‰ï¼Œéƒ½å°†è¿™ä¸ªæœ€å¤§å€¼å†™å…¥è¿”å›å€¼æ•°ç»„ä¸­ã€‚\nå½“æ»‘åŠ¨çª—å£å·¦ä¾§ç¼©é™çš„æ—¶å€™ï¼Œåˆ¤æ–­è¢«å‡ºé˜Ÿåˆ—çš„æ˜¯å¦ä¸ºæœ€å¤§å€¼\n\nä¸æ˜¯æœ€å¤§å€¼ï¼Œä¸ç”¨æ›´æ–°å½“å‰æœ€å¤§å€¼ï¼›\næ˜¯æœ€å¤§å€¼ï¼Œä»é˜Ÿåˆ—å‰©ä½™æ•°æ®ä¸­é€‰å‡ºä¸€ä¸ªæ–°çš„å½“å‰æœ€å¤§å€¼ï¼›\n\nè¿™æ ·å°±èƒ½ç»´æŠ¤å‡ºä¸€ä¸ªé¢˜ç›®éœ€è¦çš„æ•°ç»„ã€‚ä»£ç å¦‚ä¸‹\nä»£ç class Solution &#123;public:    vector&lt;int&gt; maxSlidingWindow(vector&lt;int&gt;&amp; nums, int k) &#123;        int curMax = INT32_MIN; // å½“å‰æœ€å¤§å€¼        vector&lt;int&gt; retV; //æœ€å¤§å€¼è¿”å›æ•°ç»„        int size = 0;// å½“å‰é˜Ÿåˆ—é•¿åº¦        queue&lt;int&gt; que;        for(auto&amp;e:nums)        &#123;            // é•¿åº¦å·²ç»ç­‰äº3äº†ï¼Œéœ€è¦å‡ºä¸€ä¸ªæ•°å­—            if(size == k)            &#123;                int popNum = que.front();                que.pop();                size--;                // å‡ºé˜Ÿåˆ—çš„å°±æ˜¯æœ€å¤§å€¼ï¼Œé‚£éœ€è¦ä»é˜Ÿåˆ—é‡Œé¢å‰©ä¸‹çš„é€‰å‡ºä¸€ä¸ªæœ€å¤§å€¼                if(popNum == curMax)                &#123;                    int count = size;                    curMax = que.front(); // é‡ç½®ä¸ºé˜Ÿåˆ—å¼€å¤´å€¼ï¼Œé¿å…æ— æ³•åŒ¹é…                    while(count --)                    &#123;                        // é€‰æœ€å¤§å€¼                        int temp = que.front();                        curMax = max(curMax,temp);                        que.pop();                        que.push(temp); // å†æ’å›å»                    &#125;                &#125;                // å‡ºé˜Ÿåˆ—çš„ä¸æ˜¯æœ€å¤§å€¼ï¼Œä¸ç”¨å¤„ç†            &#125;            // é•¿åº¦å°äº3ï¼Œéœ€è¦å…¥æ•°å­—            if(size &lt; k)            &#123;                curMax = max(curMax,e);                que.push(e);                size++;            &#125;            // æ¯æ¬¡sizeç­‰äº3çš„æ—¶å€™éƒ½å°†æœ€å¤§å€¼å†™å…¥æ•°ç»„            if(size == k)            &#123;                retV.push_back(curMax);            &#125;        &#125;        // æ•°é‡ä¸è¶³kä¸ªï¼Œæœ€å¤§å€¼éœ€è¦æ’å…¥æ•°ç»„        if(nums.size() &lt; k)        &#123;            retV.push_back(curMax);        &#125;        return retV;    &#125;&#125;;\n\nè¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N*K)ï¼Œå› ä¸ºæœ€å·®æƒ…å†µè§†ä½œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°éå†é˜Ÿåˆ—ï¼Œæ—¶é—´å¤æ‚åº¦å°±å¾ˆé«˜äº†ã€‚ä½†æ€è·¯åº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œé€šè¿‡äº†å¤§éƒ¨åˆ†æµ‹è¯•ç”¨ä¾‹ï¼Œåªä¸è¿‡åœ¨å¤§æµ‹è¯•ç”¨ä¾‹ä¸­è¶…æ—¶äº†ï¼Œå› ä¸ºæ­¤æ—¶Kå¾ˆå¤§ï¼Œå¦‚æœéœ€è¦é‡æ–°éå†å¯¹åˆ—æ‰¾å‡ºç¬¬äºŒä¸ªæœ€å¤§å€¼ï¼Œè€—æ—¶ä¼šå¾ˆé«˜ã€‚\n\nå½“ç„¶ï¼Œæˆ‘æƒ³å‡ºäº†å¦å¤–ä¸€ä¸ªä¼˜åŒ–æ–¹æ¡ˆï¼Œå°±æ˜¯å¯¹äºè¿™ç§å¤§kçš„æƒ…å†µï¼Œç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç¬¬äºŒå¤§çš„æ•°æ®ï¼Œå°±ä¸éœ€è¦éå†å¯¹åˆ—äº†ã€‚ä½†è¿™æ ·å¾ˆéº»çƒ¦ï¼Œä¸”è¿™ä¸ªæ€è·¯æœ¬èº«å°±å·²ç»ä¸é€‚åˆè§£è¿™é“é¢˜äº†ï¼Œäºæ˜¯æ²¡æœ‰å°è¯•ã€‚\næ€è·¯äºŒè¯´æ˜æ€è·¯äºŒæ˜¯ä»£ç éšæƒ³å½•ä¸Šé¢çš„ï¼Œä½¿ç”¨ä¸€ä¸ªå•è°ƒé€’å¢&#x2F;é€’å‡å¯¹åˆ—æ¥ç»´æŠ¤è¿™ä¸ªæœ€å¤§å€¼ã€‚å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œä½¿ç”¨å•è°ƒé€’å‡åºåˆ—æ›´é€‚åˆã€‚\nè¿™ä¸ªå¯¹åˆ—éœ€è¦å®ç°push&#x2F;pop&#x2F;frontä¸‰ä¸ªåŠŸèƒ½ï¼Œå…¶ä¸­frontå°±æ˜¯å½“å‰æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ï¼š\n\npushï¼šå½“å½“å‰å€¼å°äºå¯¹åˆ—å°¾éƒ¨å€¼æ—¶ï¼Œç›´æ¥æ’å…¥ï¼›å¤§äºæ—¶ï¼Œå‡ºé˜Ÿåˆ—å°¾éƒ¨æ•°å€¼ï¼Œç›´åˆ°å½“å‰å€¼å°äºé˜Ÿåˆ—å°¾éƒ¨æ•°å€¼ï¼Œæ’å…¥ï¼›\npopï¼šå¦‚æœæ»‘åŠ¨çª—å£åˆ é™¤çš„æ•°æ®å’Œé˜Ÿå¤´æ•°æ®ä¸€è‡´ï¼Œå‡ºé˜Ÿå¤´æ•°æ®ï¼ˆå› ä¸ºè¿™æ˜¯ä¸€ä¸ªéœ€è¦è¢«åˆ é™¤çš„æœ€å¤§å€¼ï¼‰ï¼›ä¸ä¸€è‡´åˆ™ä¸åšä»»ä½•æ“ä½œï¼›\nfrontï¼šè·å–é˜Ÿå¤´æ•°æ®ï¼›\n\næ³¨æ„ï¼Œè¿™ä¸ªå•è°ƒå¯¹åˆ—åªæ˜¯é’ˆå¯¹æœ¬ä½“çš„éœ€æ±‚æ¥å†™çš„ã€‚æœ¬ä½“åªæ˜¯éœ€è¦æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ï¼Œå¯¹äºå¯¹åˆ—è€Œè¨€å¹¶ä¸éœ€è¦ç»´æŠ¤æ»‘åŠ¨çª—å£ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œåªéœ€è¦ç»´æŠ¤å‡ ä¸ªé€’å‡çš„æœ€å¤§å€¼å°±è¡Œäº†ã€‚\n\næœ¬é¢˜ä¹Ÿä¸èƒ½ç”¨å †æ¥å®ç°ï¼Œå› ä¸ºå †åªèƒ½åˆ é™¤å †é¡¶å…ƒç´ ï¼Œå †é¡¶å…ƒç´ ä¸ä¸€å®šæ˜¯æ»‘åŠ¨çª—å£éœ€è¦ç§»é™¤çš„å…ƒç´ ã€‚è¿™ä¼šå¯¼è‡´å †å†…å…ƒç´ å’Œå½“å‰æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ä¸å¯¹åº”ï¼Œä¼šå‡ºç°é—®é¢˜ã€‚\n\nä½¿ç”¨C++çš„dequeæ•°æ®ç»“æ„å°±å¯ä»¥å®ç°ä¸€ä¸ªè¿™æ ·çš„å¯¹åˆ—ã€‚dequeæ˜¯stack&#x2F;queueé»˜è®¤çš„åº•å±‚å®¹å™¨ï¼Œstack&#x2F;queueåœ¨C++ä¸­æ˜¯å®¹å™¨é€‚é…å™¨ï¼ˆå› ä¸ºå®ƒä»¬å¹¶ä¸æ˜¯ç›´æ¥å®ç°çš„ï¼Œè€Œæ˜¯å€ŸåŠ©å…¶ä»–å®¹å™¨å®ç°çš„ï¼‰ã€‚dequeçš„ç‰¹æ€§è®©å®ƒæ”¯æŒé˜Ÿå¤´é˜Ÿå°¾çš„æ’å…¥åˆ é™¤æ“ä½œã€‚\n// å•è°ƒé˜Ÿåˆ—ï¼ˆä»å¤§åˆ°å°ï¼‰class MyQueue &#123; \tdeque&lt;int&gt; que; // ä½¿ç”¨dequeæ¥å®ç°å•è°ƒé˜Ÿåˆ—public:    // æ¯æ¬¡å¼¹å‡ºçš„æ—¶å€™ï¼Œæ¯”è¾ƒå½“å‰è¦å¼¹å‡ºçš„æ•°å€¼æ˜¯å¦ç­‰äºé˜Ÿåˆ—å‡ºå£å…ƒç´ çš„æ•°å€¼ï¼Œå¦‚æœç›¸ç­‰åˆ™å¼¹å‡ºã€‚    void pop(int value)     &#123;\t    // å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©ºå†åˆ¤æ–­æ˜¯å¦ç›¸ç­‰        if (!que.empty() &amp;&amp; value == que.front())         &#123;            que.pop_front();        &#125;    &#125;    // å¦‚æœpushçš„æ•°å€¼å¤§äºå…¥å£å…ƒç´ çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å°†é˜Ÿåˆ—åç«¯çš„æ•°å€¼å¼¹å‡ºï¼Œç›´åˆ°pushçš„æ•°å€¼å°äºç­‰äºé˜Ÿåˆ—å…¥å£å…ƒç´ çš„æ•°å€¼ä¸ºæ­¢ã€‚    // è¿™æ ·å°±ä¿æŒäº†é˜Ÿåˆ—é‡Œçš„æ•°å€¼æ˜¯å•è°ƒä»å¤§åˆ°å°çš„äº†ã€‚    void push(int value)     &#123;        while (!que.empty() &amp;&amp; value &gt; que.back())         &#123;            que.pop_back();        &#125;        que.push_back(value);    &#125;        // æŸ¥è¯¢å½“å‰é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œç›´æ¥è¿”å›é˜Ÿåˆ—å‰ç«¯å°±å¯ä»¥äº†ã€‚    int front()     &#123;        return que.front();    &#125;&#125;;\n\nä»£ç æœ‰äº†è¿™ä¸ªå•è°ƒé€’å‡çš„å¯¹åˆ—åï¼Œæˆ‘ä»¬ç°åœ¨åªéœ€è¦å°†vectorä¸­çš„å…ƒç´ æŒ‰Kæ»‘åŠ¨çª—å£å¤§å°å¾€å¯¹åˆ—è¾“å…¥å°±å¯ä»¥äº†ã€‚æ³¨æ„ï¼Œåˆ é™¤å…ƒç´ çš„æ—¶å€™è¦åˆ é™¤å½“å‰æ»‘åŠ¨çª—å£ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå†åŠ å…¥æ–°å…ƒç´ ã€‚\nç¬¬ä¸€æ¬¡éå†åéœ€è¦æ’å…¥ä¸€æ¬¡æœ€å¤§å€¼æ˜¯å› ä¸ºç¬¬äºŒä¸ªå¾ªç¯å¯èƒ½ä¸ä¼šè¿›å»ï¼Œè€Œä¸”ç¬¬äºŒä¸ªå¾ªç¯ä¸­ä¼šå…ˆç§»åŠ¨çª—å£å†æ’å…¥æ–°çš„æœ€å¤§å€¼ï¼Œå¦‚æœä¸æå‰æ’å…¥ç¬¬ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå¯èƒ½ä¼šæ¼æ‰ã€‚\nå¦å¤–ï¼Œæœ¬ä½“é™å®šKä¸ä¼šå¤§äºæ•°ç»„çš„é•¿åº¦ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå¾ªç¯ç”¨Kåšè¾¹ç•Œæ˜¯ä¸ä¼šæ•°ç»„è¶Šç•Œçš„ã€‚\nclass Solution &#123;    // å•è°ƒé˜Ÿåˆ—ï¼ˆä»å¤§åˆ°å°ï¼‰    class MyQueue     &#123;         deque&lt;int&gt; que; // ä½¿ç”¨dequeæ¥å®ç°å•è°ƒé˜Ÿåˆ—    public:        // æ¯æ¬¡å¼¹å‡ºçš„æ—¶å€™ï¼Œæ¯”è¾ƒå½“å‰è¦å¼¹å‡ºçš„æ•°å€¼æ˜¯å¦ç­‰äºé˜Ÿåˆ—å‡ºå£å…ƒç´ çš„æ•°å€¼ï¼Œå¦‚æœç›¸ç­‰åˆ™å¼¹å‡ºã€‚        void pop(int value)         &#123;            // å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©ºå†åˆ¤æ–­æ˜¯å¦ç›¸ç­‰            if (!que.empty() &amp;&amp; value == que.front())             &#123;                que.pop_front();            &#125;        &#125;        // å¦‚æœpushçš„æ•°å€¼å¤§äºå…¥å£å…ƒç´ çš„æ•°å€¼ï¼Œé‚£ä¹ˆå°±å°†é˜Ÿåˆ—åç«¯çš„æ•°å€¼å¼¹å‡ºï¼Œç›´åˆ°pushçš„æ•°å€¼å°äºç­‰äºé˜Ÿåˆ—å…¥å£å…ƒç´ çš„æ•°å€¼ä¸ºæ­¢ã€‚        // è¿™æ ·å°±ä¿æŒäº†é˜Ÿåˆ—é‡Œçš„æ•°å€¼æ˜¯å•è°ƒä»å¤§åˆ°å°çš„äº†ã€‚        void push(int value)         &#123;            while (!que.empty() &amp;&amp; value &gt; que.back())             &#123;                que.pop_back();            &#125;            que.push_back(value);        &#125;                // æŸ¥è¯¢å½“å‰é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œç›´æ¥è¿”å›é˜Ÿåˆ—å‰ç«¯å°±å¯ä»¥äº†ã€‚        int front()         &#123;            return que.front();        &#125;    &#125;;public:    vector&lt;int&gt; maxSlidingWindow(vector&lt;int&gt;&amp; nums, int k) &#123;        MyQueue que;        vector&lt;int&gt; retV;        // å…ˆæŠŠæ•°ç»„å‰kä¸ªå…ƒç´ é€å…¥å¯¹åˆ—        for(int i =0;i&lt;k;i++)        &#123;            que.push(nums[i]);        &#125;        // å…ˆæŠŠç¬¬ä¸€ä¸ªæœ€å¤§å€¼æ’å…¥        retV.push_back(que.front());        // ç„¶åå¼€å§‹ç§»åŠ¨æ»‘åŠ¨çª—å£        for(int i = k;i&lt;nums.size();i++)        &#123;            // å½“i == k çš„æ—¶å€™åˆ é™¤0ï¼Œç¬¦åˆé¢˜ç›®æ¡ä»¶ï¼Œä¸éœ€è¦ä¿®æ”¹å…¶ä»–åœ°æ–¹çš„ä»£ç             que.pop(nums[i - k]); // åˆ é™¤æ»‘åŠ¨çª—å£ç¬¬ä¸€ä¸ªå…ƒç´             que.push(nums[i]); // æ’å…¥æ–°å…ƒç´             // æ’å…¥æœ€å¤§å€¼            retV.push_back(que.front());        &#125;        return retV;    &#125;&#125;;\n\n\nThe endå•è°ƒé€’å¢&#x2F;å•è°ƒé€’å‡çš„å¯¹åˆ—æ€æƒ³è¿˜æ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°ï¼Œå­¦åˆ°äº†ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["é˜Ÿåˆ—","leetcode"]},{"title":"ã€leetcodeã€‘006 Nå­—å½¢å˜æ¢","url":"/posts/3624744626/","content":"å†™äº†ä¸€ä¸‹åˆç»ˆäºå†™å‡ºæ¥äº†\n\n\né¢˜ç›®\n leetcode 6. N å­—å½¢å˜æ¢\n\nå°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸² s æ ¹æ®ç»™å®šçš„è¡Œæ•° numRows ï¼Œä»¥ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æ’åˆ—ã€‚\næ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º &quot;PAYPALISHIRING&quot; è¡Œæ•°ä¸º 3 æ—¶ï¼Œæ’åˆ—å¦‚ä¸‹ï¼š\nP   A   H   NA P L S I I GY   I   R\n\nä¹‹åï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»å·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š&quot;PAHNAPLSIIGYIR&quot;ã€‚\nè¯·ä½ å®ç°è¿™ä¸ªå°†å­—ç¬¦ä¸²è¿›è¡ŒæŒ‡å®šè¡Œæ•°å˜æ¢çš„å‡½æ•°ï¼š\nstring convert(string s, int numRows);\n\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šs = &quot;PAYPALISHIRING&quot;, numRows = 3è¾“å‡ºï¼š&quot;PAHNAPLSIIGYIR&quot;\n\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šs = &quot;PAYPALISHIRING&quot;, numRows = 4è¾“å‡ºï¼š&quot;PINALSIGYAHRPI&quot;\n\nè§£é‡Šï¼š\nP     I    NA   L S  I GY A   H RP     I\n\nç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šs = &quot;A&quot;, numRows = 1è¾“å‡ºï¼š&quot;A&quot;\n\næç¤ºï¼š\n1 &lt;= s.length &lt;= 1000s ç”±è‹±æ–‡å­—æ¯ï¼ˆå°å†™å’Œå¤§å†™ï¼‰ã€&#x27;,&#x27; å’Œ &#x27;.&#x27; ç»„æˆ1 &lt;= numRows &lt;= 1000\n\nåˆ†æåˆšå¼€å§‹æˆ‘æƒ³çš„è¿‡äºç®€å•äº†ï¼Œæ‰€ä»¥å†™çš„ä»£ç ä¸‹æ ‡æ§åˆ¶æœ‰ä¸¥é‡é—®é¢˜ï¼Œå¼„äº†è¿™ä¹ˆä¹…ï¼Œå…¶å®ä¸€ç›´éƒ½æ˜¯åœ¨æ”¹ä¸‹æ ‡â€¦â€¦\n1.å†™å‡ ä¸ªä¾‹å­å¦‚ä¸‹æ˜¯nä»3åˆ°7çš„ä¾‹å­ï¼Œèƒ½åŸºæœ¬æ»¡è¶³é¢˜ç›®éœ€è¦çš„æƒ…å†µ\n\n\né¢˜ç›®çš„è¦æ±‚æ˜¯ï¼Œç»™ä½ ä¸€ä¸ª ABCDEFG...è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œå†ç»™ä¸€ä¸ªè¡Œæ•°nï¼Œè®©ä½ æŒ‰ä¸Šé¢è¿™ç§Nçš„å½¢å¼æ’åˆ—å‡ºæ¥ï¼Œå†æŒ‰è¡Œè¯»å‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚\næˆ‘ä»¬è‚¯å®šä¸å¯èƒ½çœŸçš„ç”¨äºŒç»´æ•°ç»„ç»™å¥¹æ‘†å‡ºæ¥ä¸€ä¸ªè¿™æ ·çš„å›¾åƒå†å»éå†ï¼Œå“ªæ ·æ•ˆç‡å¤ªä½äº†ã€‚è€Œæ˜¯ç”¨næ¬¡éå†ï¼Œåˆ©ç”¨ä¸‹æ ‡çš„è§„å¾‹ï¼Œä»¥ä¸‹æ ‡è®¿é—®æ‹¼å‡ºæ–°çš„å­—ç¬¦ä¸²ã€‚\n2.åˆ†æè§„å¾‹æŒ‰è¡Œå·å†™å‡ºæ¯ä¸€ä¸ªçš„é—´éš”ï¼Œèƒ½çš„å‡ºæ¥ä¸€ä¸ªåŸºæœ¬è§„å¾‹ï¼ˆæœ€å·¦åˆ—æ˜¯è¡Œä¸‹æ ‡ï¼‰\n\n\né¦–å…ˆï¼Œæˆ‘ä»¬èƒ½å‘ç°ï¼Œæ¯ä¸€ä¸ªNå‹çš„ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œçš„é—´éš”ï¼ˆæ­¥é•¿ï¼‰æ˜¯ç›¸åŒçš„ï¼Œä¸”å’Œè¡Œæ•°ç¬¦åˆä¸€ä¸ªå…¬å¼\n(è¡Œæ•° - 1) * 2\n\né™¤äº†è¿™ä¸¤ä¸ªè¾¹ç•Œè¡Œï¼Œä¸­é—´çš„è¡Œæ•°éƒ½æ˜¯ç®€å•çš„é€’å‡ 2\n\n3.æ­¥é•¿ç¿»è½¬ä½†é™¤äº†åªæœ‰ä¸‰è¡Œçš„ç¤ºä¾‹ä¹‹å¤–ï¼Œå…¶ä½™éƒ½æœ‰ä¸€ä¸ª æ­¥é•¿ç¿»è½¬ çš„é—®é¢˜\nå¦‚ä¸‹ï¼Œæ¯”å¦‚ç¬¬1è¡Œï¼ˆè¿™é‡Œè¯´çš„æ˜¯ä¸‹æ ‡ï¼‰B-&gt;Hç¬¦åˆä»ç¬¬0è¡Œå¼€å§‹é€’å‡2çš„æ­¥é•¿6ï¼Œä½†ä¸‹ä¸€æ¬¡æŸ¥æ‰¾çš„æ­¥é•¿H-&gt;Jå°±å˜æˆäº†2äº†\nåŒç†ï¼Œçœ‹ç¬¬3è¡Œï¼ŒD-&gt;Fçš„æ­¥é•¿ä¸º2ï¼Œè€ŒF-&gt;Lçš„æ­¥é•¿ä¸º6ï¼Œä¸¤è€…æ­£å¥½å’Œç¬¬1è¡Œç›¸åã€‚\nè€Œç¬¬1è¡Œå’Œç¬¬3è¡Œï¼Œæ­£å¥½æ˜¯ä¸¤ä¸ªå¯¹ç§°çš„\n\nè¿™ä¾¿æ˜¯ç¬¬äºŒä¸ªè§„å¾‹\né™¤äº†é¦–æœ«ä¸¤è¡Œï¼Œå’Œå¥‡æ•°è¡Œæ•°çš„ä¸­é—´è¡Œï¼ˆæ¯”å¦‚è¡Œæ•°ä¸º5ï¼Œç¬¬2è¡Œå³ä¸ºä¸­é—´è¡Œ 0 1 [2] 3 4 ï¼‰å…¶ä½™è¡Œæ•°æŒ‰ä¸Šä¸‹åˆ†ï¼Œå…¶æ­¥é•¿æ¯èµ°ä¸€æ¬¡éœ€è¦åˆ‡æ¢ä¸€æ¬¡\n\nä»¥ä¸Šå›¾ä¸­çš„ç¬¬1è¡Œä¸ºä¾‹\n\nç¬¬ä¸€æ­¥ï¼ŒB-&gt;Hï¼Œèµ°çš„æ˜¯æ­£å¸¸çš„6æ­¥ï¼ˆç”±8-2å¾—æ¥ï¼‰\nç¬¬äºŒæ­¥ï¼ŒH-&gt;Jï¼Œèµ°çš„æ˜¯ç¬¬ä¸‰è¡Œçš„æ­£å¸¸æ­¥2ï¼ˆç”±8-2*3å¾—æ¥ï¼‰\n\nç”±æ­¤å¾€åï¼Œæ¯èµ°ä¸€æ­¥éƒ½éœ€è¦åœ¨6å’Œ2ä¹‹é—´åˆ‡æ¢ã€‚\n\nå¤ç›˜çš„æ—¶å€™æ‰å‘ç°ä¸€ä¸ªæ›´ç®€å•çš„ç¿»è½¬ï¼Œå…¶å®æ¯ä¸€è¡Œçš„å‡ æ¬¡æŸ¥æ‰¾çš„æ­¥é•¿æœ€ç»ˆåŠ èµ·æ¥å’Œé¦–æœ«ä¸¤è¡Œæ˜¯ç›¸åŒçš„\n\n4.å¾ªç¯è§£é‡Šæ‰¾åˆ°äº†è¿™ä¸ªè§„å¾‹ä¹‹åï¼Œå†™ä»£ç å°±å¥½å†™äº†ï¼ä¸‹é¢è§£é‡Šä¸€ä¸‹å®Œæ•´ä»£ç ä¸­whileå¾ªç¯ä¸­çš„åˆ¤æ–­éƒ¨åˆ†ï¼Œä¸€å…±åˆ†ä¸ºä¸‰ç§æƒ…å†µ\n\né¦–æœ«è¡Œå’Œå¥‡æ•°ä¸­é—´è¡Œï¼Œä¸éœ€è¦ç¿»è½¬ï¼Œæ­£å¸¸è¿›è¡Œæ­¥é•¿çš„ç›¸åŠ \néœ€è¦ç¿»è½¬çš„è¡Œæ•°ï¼Œåˆ†ä¸ºä¸­é—´è¡Œä¸Šé¢çš„å’Œä¸‹é¢çš„ä¸¤ç§æƒ…å†µã€‚è¯¥è¡Œç¬¬ä¸€æ¬¡è¿›å…¥whileï¼Œä¸éœ€è¦åŠ ä¸Šç¿»è½¬æ­¥é•¿ï¼Œè€Œæ˜¯åŠ ä¸Šç”±ä¸Šä¸€è¡Œæ­¥é•¿sep-2å¾—æ¥çš„æ­£å¸¸æ­¥é•¿cur_sepã€‚æ­¤æ—¶éœ€è¦å¯¹ç¿»è½¬æ­¥é•¿reverFlagè¿›è¡Œåˆå§‹åŒ–ï¼š\nä¸­é—´è¡Œä¸Šé¢ï¼Œç¿»è½¬æ­¥é•¿ä¸ºå¯¹ç§°è¡Œæ­¥é•¿çš„è´Ÿæ•°ï¼ˆæ¯”å¦‚ç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡Œå¯¹ç§°ï¼Œæ­¤æ—¶ç¬¬ä¸€è¡Œçš„ç¿»è½¬æ­¥é•¿å°±æ˜¯ç¬¬ä¸‰æ–¹çš„æ­£å¸¸æ­¥é•¿å–è´Ÿæ•°ã€‚ï¼‰\nä¸­é—´è¡Œä¸‹é¢ï¼Œç¿»è½¬æ­¥é•¿ä¸ºå¯¹ç§°è¡Œæ­¥é•¿çš„æ­£æ•°ï¼ˆåŒä¸Šï¼‰\n\n\nè¯¥è¡Œç¬¬äºŒæ¬¡è¿›å…¥whileï¼Œéœ€è¦åŠ ä¸Šç¿»è½¬æ­¥é•¿reverFlagåï¼Œå¹¶å¯¹ç¿»è½¬æ­¥é•¿å–è´Ÿæ•°ï¼ˆå¯¹ç§°è¡Œä¸¤ä¸ªæ­¥é•¿ä¹‹é—´å·®å€¼ç›¸åŒï¼Œå–è´Ÿæ•°ç›¸å½“äºæ¢å¤åŸå§‹æ­¥é•¿ï¼‰\nç›´åˆ°indexå¤§äºstringçš„é•¿åº¦ï¼Œä¸€è¡Œéå†å®Œæ¯•ï¼Œsep-=2\n\nå®Œæ•´ä»£ç æ³¨æ„å•Šï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œå†™é¢˜çš„æ—¶å€™å–œæ¬¢ç”¨printæ¥æ‰¾bugï¼Œé‚£ä¹ˆå†™å®Œäº†ä¹‹åï¼Œä¸€å®šè¦æŠŠè¿™äº›é¢˜ç›®éœ€æ±‚ä¸­æ²¡æœ‰çš„æ‰“å°ç»™åˆ é™¤æ‰ã€‚ä¸ç„¶ä¼šå½±å“æ€§èƒ½ï¼Œç”šè‡³æœ‰å¯èƒ½å› æ­¤è¶…æ—¶æ— æ³•é€šè¿‡é¢˜ç›®ã€‚\nclass Solution &#123;public:    // å¥‡æ•°è¡Œï¼Œæœ€ä¸­é—´çš„    // 5 -&gt; 2 | 7 -&gt; 3    bool isMidRow(int n,int numRows)    &#123;        return (numRows%2!=0) &amp;&amp; n == numRows/2;    &#125;    bool isFirstEnd(int n,int numRows)    &#123;        return n==0 || n==numRows-1;    &#125;    string convert(string s, int numRows) &#123;        if(numRows&lt;=1)        &#123;            return s;        &#125;        string ret;        int begin_sep = (numRows-1)*2;        int sep = begin_sep;// ç¬¬ä¸€è¡Œå’Œæœ€åä¸€è¡Œéƒ½æ˜¯è¿™ä¸ªé•¿åº¦        // ä¸­é—´çš„æ˜¯ä»ç¬¬ä¸€è¡Œå¼€å§‹ï¼Œæ¯æ¬¡-2                // å¼€å§‹éå†ï¼Œæ’é™¤æœ€åä¸€è¡Œ        for(int i=0;i&lt;numRows;i++)        &#123;            if(i==numRows-1)&#123;                sep = begin_sep;// æœ€åä¸€è¡Œçš„é•¿åº¦åˆ†å‰²            &#125;            int index = i;            int reverFlag = 1;            int cur_sep = sep;            while(index&lt;s.size())&#123;                ret+=s[index];                //æ˜¯å¦æ˜¯å•æ•°è¡Œä¸­é—´çš„ï¼Œå¦‚æœæ˜¯é‚£å°±ä¸éœ€è¦åè½¬                if(isMidRow(i,numRows) || isFirstEnd(i,numRows))&#123;                    index+=sep;                    //cout &lt;&lt; i &lt;&lt; &quot; continue&quot; &lt;&lt; endl;                    continue;                &#125;                else if(reverFlag == 1)&#123;//æœ¬è¡Œç¬¬ä¸€æ¬¡è¿›æ¥                    index+=sep;                    //cout &lt;&lt; i &lt;&lt; &quot; 1r-sped &quot;&lt;&lt;sep&lt;&lt;endl;                    //int reverNum = abs((numRows/2-1)*2);                    //cout &lt;&lt; i &lt;&lt; &quot; 1r-rever &quot;&lt;&lt;reverNum &lt;&lt;endl;                    // 4è¡Œï¼Œä¸Šå¯¹ç§°è¡Œ1ç¬¬ä¸€æ¬¡ç¿»è½¬æ˜¯-2                    // 5è¡Œï¼Œä¸Šå¯¹ç§°è¡Œ1ç¬¬ä¸€æ¬¡åè½¬æ˜¯-4                    int k = numRows - i - 1;                    if(i&lt;(numRows/2))//ä¸Šå¯¹æˆè¡Œ                    &#123;                        //è·å–å¯¹ç§°çš„è¡Œå·çš„sepï¼Œå¹¶è®¡ç®—ä¸¤è€…å·®å€¼                        reverFlag = - abs((begin_sep - k*2) - cur_sep);                    &#125;                    else                    &#123;                        reverFlag = abs((begin_sep - k*2) - cur_sep);                    &#125;                    //cout &lt;&lt;i &lt;&lt;&quot; 1r-flag &quot;&lt;&lt;reverFlag&lt;&lt;endl;                &#125;                else//ç¬¬äºŒæ¬¡ä»¥ä¸Šï¼Œå¼€å§‹åè½¬                &#123;                    cur_sep += reverFlag;                    index+= cur_sep;                    //cout &lt;&lt;i &lt;&lt;&quot; sepd &quot;&lt;&lt;( cur_sep)&lt;&lt;endl;                    reverFlag = -reverFlag;//é€†ç½®                    //cout &lt;&lt;i &lt;&lt;&quot; flag &quot;&lt;&lt;reverFlag&lt;&lt;endl;                &#125;            &#125;            // ä¸€è¡Œèµ°å®Œäº†ï¼Œæ›´æ–°sep            sep-=2;        &#125;        return ret;    &#125;&#125;;\n\né€šè¿‡æˆªå›¾è®©æˆ‘å¾ˆä¸ç†è§£çš„æ˜¯ï¼Œè‡ªå·±æœ‰æ—¶å€™æœä¸€äº›ç½‘ä¸Šé¢˜è§£ï¼Œæœ‰äº›æ–‡ç« ç«Ÿç„¶èƒ½åšåˆ°å°†æ— æ³•é€šè¿‡çš„ä»£ç å½“ä½œé¢˜è§£å‘å‡ºæ¥ï¼Œæµªè´¹è¯»è€…çš„æ—¶é—´ã€‚å®åœ¨ä¸çŸ¥é“ä»–ä»¬æ˜¯æ€ä¹ˆåšåˆ°çš„â€¦â€¦æ‰€ä»¥ï¼Œä¸ºäº†é¿å…è‡ªå·±çš„æ–‡ç« è¢«äººè¯¯è§£ï¼Œæˆ‘å°½é‡æ¯æ¬¡ojåˆ·é¢˜éƒ½é™„ä¸Šé€šè¿‡æˆªå›¾\n\nThe endæœ€åé™„ä¸Šä¸€å¼ å½“æ—¶æ³„é¢˜ç”¨çš„ä¹±ä¸ƒå…«ç³Ÿçš„è‰ç¨¿å›¾\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","leetcode"]},{"title":"ã€leetcodeã€‘151. ç¿»è½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯","url":"/posts/4154393368/","content":"é¢˜ç›® leetcode151é¢˜ç›®é“¾æ¥ https://leetcode.cn/problems/reverse-words-in-a-string/\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ å•è¯ çš„é¡ºåºã€‚\nå•è¯ æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚s ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ å•è¯ åˆ†éš”å¼€ã€‚\nè¿”å› å•è¯ é¡ºåºé¢ å€’ä¸” å•è¯ ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚\næ³¨æ„ï¼šè¾“å…¥å­—ç¬¦ä¸² s ä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šs = &quot;the sky is blue&quot;è¾“å‡ºï¼š&quot;blue is sky the&quot;ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šs = &quot;  hello world  &quot;è¾“å‡ºï¼š&quot;world hello&quot;è§£é‡Šï¼šåè½¬åçš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å­˜åœ¨å‰å¯¼ç©ºæ ¼å’Œå°¾éšç©ºæ ¼ã€‚ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼šs = &quot;a good   example&quot;è¾“å‡ºï¼š&quot;example good a&quot;è§£é‡Šï¼šå¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œåè½¬åçš„å­—ç¬¦ä¸²éœ€è¦å°†å•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°ä»…æœ‰ä¸€ä¸ªã€‚\næ–¹æ¡ˆ1class Solution &#123;public:    //ä»beginå¼€å§‹æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä¸‹æ ‡ï¼Œä¸åŒ…æ‹¬beginæœ¬èº«    int find_space(string&amp;s,int begin=0)    &#123;        int i=0;        for(i=begin+1;i&lt;s.size();i++)        &#123;            if(s[i]==&#x27; &#x27;)&#123;                return i;            &#125;        &#125;        return s.npos;    &#125;    string reverseWords(string s) &#123;        int i=0;        vector&lt;string&gt; v;//ç”¨æ¥å­˜æ”¾å•è¯        for(i=0;i&lt;s.size();i++)        &#123;            // è·³è¿‡å‰å¯¼ç©ºæ ¼            while(s[i]==&#x27; &#x27;)&#123;                i++;            &#125;            // å¦‚æœå·²ç»åˆ°æœ€åé¢äº†ï¼Œå°±ç›´æ¥è·³å‡º            if(i&gt;=s.size())&#123;                break;            &#125;            int index = find_space(s,i);            int sz = index-i;//å•è¯é•¿åº¦            //cout &lt;&lt; i &lt;&lt; &quot; | &quot; &lt;&lt; index &lt;&lt; &quot; | &quot;&lt;&lt; sz &lt;&lt; endl;            string temp(s,i,sz);            //cout &lt;&lt; temp &lt;&lt; &quot;-&quot; &lt;&lt; endl;            v.push_back(temp);//æ’å…¥å•è¯            i = index-1;//è·³è¿‡å½“å‰å•è¯        &#125;        //åå‘è¿­ä»£å™¨        auto it = v.rbegin();        string ret = &quot;&quot;;        while(it!=v.rend())        &#123;            ret+=*it;            // ä¸æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªæ‰åŠ ç©ºæ ¼            if(++it!=v.rend())&#123;                ret+=&quot; &quot;;            &#125;        &#125;        cout &lt;&lt; ret &lt;&lt; endl;        return ret;    &#125;&#125;;\n\nä¸Šé¢çš„åŠæ³•ä¸­ï¼Œæ–°å¢äº†ä¸€ä¸ªvectoræ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œç©ºé—´å¤æ‚åº¦O(N)\næµ‹è¯• 4MS 7.2MB\næ–¹æ¡ˆ2è¿›é˜¶è¦æ±‚ï¼šå¦‚æœå­—ç¬¦ä¸²åœ¨ä½ ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€ä¸­æ˜¯ä¸€ç§å¯å˜æ•°æ®ç±»å‹ï¼Œè¯·å°è¯•ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¤æ‚åº¦çš„ åŸåœ° è§£æ³•ã€‚\n//ç‰ˆæœ¬2ï¼ŒåŸåœ°ç®—æ³•å—ï¼Ÿclass Solution &#123;public:    #define SEP &#x27;|&#x27;    //ä»beginå¼€å§‹æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä¸‹æ ‡ï¼Œä¸åŒ…æ‹¬beginæœ¬èº«    int find_space(string&amp;s,int begin=0)    &#123;        int i=0;        for(i=begin+1;i&lt;s.size();i++)        &#123;            if(s[i]==&#x27; &#x27;)&#123;                break;            &#125;            else if(s[i]==SEP)            &#123;//ç”¨ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºåŸå­—ç¬¦ä¸²ç»“å°¾                break;            &#125;        &#125;        //å¦‚æœæ˜¯å› ä¸ºæ‰¾åˆ°ç©ºæ ¼è·³å‡ºï¼Œåˆ¤æ–­è¯¥å­—ç¬¦ä¸²åé¢è¿˜æœ‰æ²¡æœ‰æœ‰æ•ˆå­—ç¬¦        int k = i;//ä¸èƒ½æ”¹i        if(s[k]!=SEP)        &#123;            while(s[k]==&#x27; &#x27;)            &#123;                k++;                //ä¸€ç›´èµ°åˆ°äº†|ï¼Œä»£è¡¨æ²¡æœ‰æœ‰æ•ˆå­—ç¬¦äº†                if(s[k]==SEP)&#123;                    return s.npos;                &#125;            &#125;            //èµ°åˆ°è¿™é‡Œä»£è¡¨æœ‰            return i;        &#125;        return s.npos;    &#125;    string reverseWords(string s) &#123;        int i=0,end_word=0,index=0;        int begin_sz = s.size();//èµ·å§‹å¤§å°        s+=SEP;//ç”¨ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºåŸå­—ç¬¦ä¸²ç»“å°¾        int sep_index = s.size()-1;//æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®å°±æ˜¯åˆ†éš”ç¬¦                for(i=0;i&lt;begin_sz;i++)        &#123;            // è·³è¿‡å‰å¯¼ç©ºæ ¼            while(s[i]==&#x27; &#x27;)&#123;                i++;            &#125;            // å¦‚æœå·²ç»åˆ°æœ€åé¢äº†ï¼Œå°±ç›´æ¥è·³å‡º            if(i&gt;=begin_sz)&#123;                break;            &#125;            index = find_space(s,i);            //å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼äº†ï¼Œä»£è¡¨å½“å‰æ˜¯åŸå­—ç¬¦ä¸²æœ€åä¸€ä¸ªå•è¯            //è·³è¿‡            if(index == s.npos)&#123;                end_word=i;                break;            &#125;            int sz = index-i;//å•è¯é•¿åº¦            string temp(s,i,sz);            temp+=&quot; &quot;;            //ä¸èƒ½å°¾æ’ï¼Œåº”è¯¥åœ¨sepä¹‹åæ’å…¥            //s += temp;            s.insert(sep_index+1,temp);            // cout &lt;&lt; i &lt;&lt; &quot; | &quot; &lt;&lt; index &lt;&lt; &quot; | &quot;&lt;&lt; sz &lt;&lt; endl;            // cout &lt;&lt; temp &lt;&lt; &quot;-&quot; &lt;&lt; endl;            //æ„é€ äº†ä¹‹åï¼ŒæŠŠåŸstrè¿™éƒ¨åˆ†åˆ äº†(é”™è¯¯ï¼åˆ äº†ä¹‹åä¸‹æ ‡å˜äº†ï¼Œå¾ªç¯æ— æ„ä¹‰)            //s.erase(i,sz);            i = index-1;//è·³è¿‡å½“å‰å•è¯            //index-1æ˜¯å› ä¸ºæœ¬æ¬¡å¾ªç¯è¿‡äº†ä¹‹åä¼šè¢«forç»™+1        &#125;        cout &lt;&lt;&quot;[end]&quot;&lt;&lt; s &lt;&lt; endl;        // å­—ç¬¦ä¸²ä¸­æ·»åŠ çš„|æ›¿æ¢ä¸ºç©ºæ ¼        index = s.find(SEP);                // åˆ é™¤indexä¹‹å‰,end_wordä¹‹åçš„ç©ºæ ¼        int k = s.find(&quot; &quot;,end_word);        //cout &lt;&lt; &quot;k:&quot; &lt;&lt;k&lt;&lt;&quot; endw:&quot; &lt;&lt; end_word &lt;&lt;endl;        if(k!=s.npos&amp;&amp;k&lt;index)&#123;            s.replace(k,1,&quot;&quot;);            index--;            //cout &lt;&lt;&quot;[while1]k:&quot;&lt;&lt;k &lt;&lt;&quot; str:&quot;&lt;&lt; s &lt;&lt; endl;            //å› ä¸ºæ›¿æ¢è¿‡äº†ä¹‹åï¼Œkçš„ä½ç½®å˜æˆäº†åŸæœ‰kçš„ä¸‹ä¸€ä½            //æ­¤æ—¶å¦‚æœkè¿˜æ˜¯ç©ºæ ¼ï¼Œä»£è¡¨åŸå­—ç¬¦ä¸²æœ«å°¾æœ‰å¤šä¸ªç©ºæ ¼            //ç»§ç»­åˆ é™¤ï¼Œä½†æ˜¯æ¯æ¬¡åˆ é™¤éƒ½éœ€è¦è®©sepçš„ä½ç½®-1            while(s[k]==&#x27; &#x27;)&#123;                s.replace(k,1,&quot;&quot;);                index--;            &#125;            //è·³å‡ºè¿™ä¸ªå¾ªç¯çš„æ—¶å€™ï¼Œä»£è¡¨ç¢°åˆ°sepåˆ†éš”ç¬¦äº†,å­—ç¬¦ä¸²å·²ç»å¤„ç†å®Œæ¯•            //cout &lt;&lt;&quot;[while2]k:&quot;&lt;&lt;k &lt;&lt;&quot; str:&quot;&lt;&lt; s &lt;&lt; endl;        &#125;        s.replace(index,1,&quot; &quot;);        s.erase(0,end_word);//åˆ æ‰å‰é¢çš„åŸæœ‰å•è¯        s.erase(s.size()-1,1);//åˆ é™¤æœ€åå•è¯å¸¦çš„ç©ºæ ¼        return s;    &#125;&#125;;\n\nç»“æœ 4MS 7MB\næ–¹æ¡ˆ3ä¸Šé¢çš„åŠæ³•çœ‹èµ·æ¥å¾ˆå¯¹ï¼Œå®é™…ä¸Šè¿˜æ˜¯ä¸æ˜¯åŸåœ°ç®—æ³•ï¼\nå› ä¸ºæˆ‘æ¯æ¬¡éƒ½æ˜¯åœ¨åé¢å°¾éšå­—ç¬¦ä¸²ï¼Œè€Œæ²¡æœ‰æŠŠåŸå­—ç¬¦ä¸²åˆ æ‰ã€‚å¦‚æœæºå­—ç¬¦ä¸²å¾ˆé•¿ï¼Œæˆ‘è¿™ä¹ˆåšå°±ç›¸å½“äºæŠŠæºå­—ç¬¦ä¸²çš„é•¿åº¦å˜ä¸ºåŸæœ‰ä¿©å€\n\nä¾æ—§æ˜¯O(N)çš„ç©ºé—´å¤æ‚åº¦\n\nè¦æƒ³åšåˆ°çœŸåŸåœ°ï¼Œå°±éœ€è¦åœ¨æ’å…¥åˆ°æŒ‡å®šä½ç½®çš„åŒæ—¶ï¼Œå°†å…¶åŸæœ¬çš„å­—ç¬¦ä¸²ç»™åˆ é™¤äº†\n//æ–¹æ¡ˆ3class Solution &#123;public:    #define SEP &#x27;|&#x27;    //ä»beginå¼€å§‹æ‰¾åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼çš„ä¸‹æ ‡ï¼Œä¸åŒ…æ‹¬beginæœ¬èº«    int find_space(string&amp;s,int begin=0)    &#123;        int i=0;        for(i=begin+1;i&lt;s.size();i++)        &#123;            if(s[i]==&#x27; &#x27;)&#123;                break;            &#125;            else if(s[i]==SEP)            &#123;//ç”¨ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºåŸå­—ç¬¦ä¸²ç»“å°¾                break;            &#125;        &#125;        //å¦‚æœæ˜¯å› ä¸ºæ‰¾åˆ°ç©ºæ ¼è·³å‡ºï¼Œåˆ¤æ–­è¯¥å­—ç¬¦ä¸²åé¢è¿˜æœ‰æ²¡æœ‰æœ‰æ•ˆå­—ç¬¦        int k = i;//ä¸èƒ½æ”¹i        if(s[k]!=SEP)        &#123;            while(s[k]==&#x27; &#x27;)            &#123;                k++;                //ä¸€ç›´èµ°åˆ°äº†|ï¼Œä»£è¡¨æ²¡æœ‰æœ‰æ•ˆå­—ç¬¦äº†                if(s[k]==SEP)&#123;                    return s.npos;                &#125;            &#125;            //èµ°åˆ°è¿™é‡Œä»£è¡¨æœ‰            return i;        &#125;        return s.npos;    &#125;    string reverseWords(string s) &#123;        int i=0,end_word=0,index=0;        int begin_sz = s.size();//èµ·å§‹å¤§å°        s+=SEP;//ç”¨ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºåŸå­—ç¬¦ä¸²ç»“å°¾        int sep_index = s.size()-1;//æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®å°±æ˜¯åˆ†éš”ç¬¦                for(i=0;i&lt;begin_sz;i++)        &#123;            // è·³è¿‡å‰å¯¼ç©ºæ ¼            while(s[i]==&#x27; &#x27;)&#123;                i++;            &#125;            // å¦‚æœå·²ç»åˆ°æœ€åé¢äº†ï¼Œå°±ç›´æ¥è·³å‡º            if(i&gt;=begin_sz)&#123;                break;            &#125;            index = find_space(s,i);            //å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªç©ºæ ¼äº†ï¼Œä»£è¡¨å½“å‰æ˜¯åŸå­—ç¬¦ä¸²æœ€åä¸€ä¸ªå•è¯            //è·³è¿‡            if(index == s.npos)&#123;                end_word=i;                break;            &#125;            int sz = index-i;//å•è¯é•¿åº¦            string temp(s,i,sz);            temp+=&quot; &quot;;            //ä¸èƒ½å°¾æ’ï¼Œåº”è¯¥åœ¨sepä¹‹åæ’å…¥            //s += temp;            s.insert(sep_index+1,temp);            //printf(&quot;[%d-%d-1]%s\\n&quot;,i,sep_index,s.c_str());            // cout &lt;&lt; i &lt;&lt; &quot; | &quot; &lt;&lt; index &lt;&lt; &quot; | &quot;&lt;&lt; sz &lt;&lt; endl;            // cout &lt;&lt; temp &lt;&lt; &quot;-&quot; &lt;&lt; endl;            //æ„é€ äº†ä¹‹åï¼ŒæŠŠåŸstrè¿™éƒ¨åˆ†åˆ äº†(é”™è¯¯ï¼åˆ äº†ä¹‹åä¸‹æ ‡å˜äº†ï¼Œå¾ªç¯æ— æ„ä¹‰)            s.erase(i,sz);            sep_index-=sz;            //printf(&quot;[%d-%d-2]%s\\n&quot;,i,sep_index,s.c_str());            // i = i;//è·³è¿‡å½“å‰å•è¯            //index-1æ˜¯å› ä¸ºæœ¬æ¬¡å¾ªç¯è¿‡äº†ä¹‹åä¼šè¢«forç»™+1        &#125;        //cout &lt;&lt;&quot;[end]&quot;&lt;&lt; s &lt;&lt; endl;        index = s.find(SEP);        // åˆ é™¤indexä¹‹å‰,end_wordä¹‹åçš„ç©ºæ ¼        int k = s.find(&quot; &quot;,0);        //cout &lt;&lt; &quot;k:&quot; &lt;&lt;k&lt;&lt;&quot; endw:&quot; &lt;&lt; end_word &lt;&lt;endl;        while(k!=s.npos&amp;&amp;k&lt;index)&#123;            s.replace(k,1,&quot;&quot;);            index--;            //cout &lt;&lt;&quot;[while1]k:&quot;&lt;&lt;k &lt;&lt;&quot; str:&quot;&lt;&lt; s &lt;&lt; endl;            //å› ä¸ºæ›¿æ¢è¿‡äº†ä¹‹åï¼Œkçš„ä½ç½®å˜æˆäº†åŸæœ‰kçš„ä¸‹ä¸€ä½            //æ­¤æ—¶å¦‚æœkè¿˜æ˜¯ç©ºæ ¼ï¼Œä»£è¡¨åŸå­—ç¬¦ä¸²æœ«å°¾æœ‰å¤šä¸ªç©ºæ ¼            //ç»§ç»­åˆ é™¤ï¼Œä½†æ˜¯æ¯æ¬¡åˆ é™¤éƒ½éœ€è¦è®©sepçš„ä½ç½®-1            while(s[k]==&#x27; &#x27;)&#123;                s.replace(k,1,&quot;&quot;);                index--;            &#125;            //è·³å‡ºè¿™ä¸ªå¾ªç¯çš„æ—¶å€™ï¼Œä»£è¡¨ç¢°åˆ°sepåˆ†éš”ç¬¦äº†,å­—ç¬¦ä¸²å·²ç»å¤„ç†å®Œæ¯•            //cout &lt;&lt;&quot;[while2]k:&quot;&lt;&lt;k &lt;&lt;&quot; str:&quot;&lt;&lt; s &lt;&lt; endl;            k = s.find(&quot; &quot;,0);        &#125;        //cout &lt;&lt;&quot;[end2]&quot;&lt;&lt; s &lt;&lt; endl;        s[index]=&#x27; &#x27;;        //s.erase(0,end_word);//åˆ æ‰å‰é¢çš„åŸæœ‰å•è¯        s.erase(s.size()-1,1);//åˆ é™¤æœ€åå•è¯å¸¦çš„ç©ºæ ¼        //cout &lt;&lt;&quot;[return]&quot;&lt;&lt; s &lt;&lt; endl;        return s;    &#125;&#125;;\n\n\næ–¹æ¡ˆ4ï¼Œæ¥è‡ªä»£ç éšæƒ³å½•P92åˆ é™¤ç©ºæ ¼è¿™é‡Œå¯¹åˆ é™¤å¤šä½™ç©ºæ ¼çš„ä»£ç åšè¯´æ˜\n_ _ a b c _ _ h e l l o _\n\nå¯¹ä¸Šè¿°å­—ç¬¦ä¸²è€Œè¨€ï¼Œfasté¦–å…ˆä¼šèµ°åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦aï¼Œç„¶åå¼€å§‹å¤å†™ã€‚\nå¯¹äºä¸¤ä¸ªå•è¯ä¸­çš„å¤šä½™ç©ºæ ¼ï¼Œfastä¼šå¤åˆ¶ç¬¬ä¸€ä¸ªç»™slowï¼Œå¹¶è·³è¿‡å‰©ä½™çš„ç©ºæ ¼ã€‚æ‰€ä»¥è¿™é‡Œåˆ¤æ–­çš„æ˜¯fast-1å’Œfastä½ç½®ç›¸ç­‰ä¸”éƒ½æ˜¯ç©ºæ ¼çš„æ—¶å€™æ‰ä¼šè·³è¿‡ã€‚\nif(fast &gt; 1 \t&amp;&amp; s[fast-1] == s[fast] \t&amp;&amp; s[fast]==&#x27; &#x27;)&#123;\tcontinue;&#125;\n\nå¯¹äºæœ«å°¾çš„ç©ºæ ¼è€Œè¨€ï¼Œæœ€åéå†çš„æ—¶å€™fastçš„ä½ç½®å¦‚ä¸‹æ—¶ï¼Œå®ƒä¼šå°†è¿™ä¸ªç©ºæ ¼å¤åˆ¶ç»™slowçš„ä½ç½®ï¼ˆå› ä¸ºåˆ¤æ–­å¤šä½™ç©ºæ ¼æ˜¯åˆ¤æ–­fastå’Œfast-1å…ƒç´ ç›¸ç­‰çš„æ—¶å€™æ‰è®¤ä¸ºæ˜¯å¤šä½™ç©ºæ ¼çš„ï¼‰\n0 1 2 3 4 5 6 7 8 9 0 1 2_ _ a b c _ _ h e l l o _\t\t\t\t\t\tf\t\t\t\t\t\ta b c _ h e l l o _ l o _ \t\t\t\t  s \tf\n\nå¤åˆ¶å®Œæ¯•åï¼Œslowå’Œfastéƒ½ä¼šåŠ ä¸€ï¼Œä½ç½®å˜åŒ–å¦‚ä¸‹ï¼ŒfastæŒ‡é’ˆè¶Šç•Œé€€å‡ºå¾ªç¯ï¼Œslowä½ç½®æ˜¯åœ¨ç©ºæ ¼çš„ä¸‹ä¸€ä½ã€‚\n0 1 2 3 4 5 6 7 8 9 0 1 2a b c _ h e l l o _ l o _ \t\t\t\t    s \t  f\n\næ‰€ä»¥æ­¤æ—¶åªéœ€è¦åˆ¤æ–­slow-1çš„ä½ç½®æ˜¯ä¸æ˜¯ç©ºæ ¼ï¼Œå¦‚æœæ˜¯ç©ºæ ¼ï¼Œåˆ™æ–°çš„å­—ç¬¦ä¸²çš„å¤§å°æ˜¯size-1ï¼Œå¦‚æœä¸æ˜¯ç©ºæ ¼ï¼Œé‚£ä¹ˆslowå°±æ˜¯æ–°å­—ç¬¦ä¸²çš„å¤§å°ã€‚\nif(slow&gt;1 &amp;&amp; s[slow-1]==&#x27; &#x27;)      &#123;          s.resize(slow-1);      &#125;      else      &#123;          s.resize(slow);      &#125;\nå®Œæ•´ä»£ç å…¶ä»–éƒ¨åˆ†çš„ä»£ç è¯´æ˜è¯¦è§æ³¨é‡Š\n//æ€è·¯4ï¼Œæ¥è‡ªä»£ç éšæƒ³å½•P92class Solution &#123;public:    //åˆ é™¤ç©ºæ ¼ï¼Œæ—¶é—´å¤æ‚åº¦O(N)    void removeSpace(string&amp; s)    &#123;        int slow=0,fast=0;        //è¿™ä¸ªå¾ªç¯ç»“æŸåï¼Œfastä¼šèµ°åˆ°ç¬¬ä¸€ä¸ªä¸ä¸ºç©ºæ ¼çš„å­—ç¬¦ä¸Š        while(s.size()&gt;0 &amp;&amp; fast&lt; s.size()&amp;&amp;s[fast]==&#x27; &#x27;)&#123;            fast++;        &#125;        //æ­¤æ—¶å¼€å§‹å¤å†™ï¼ˆä¹Ÿä¼šå°†å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºæ ¼ç»™æ›¿æ¢æ‰ï¼‰        for(/*ä¸å†™ç¬¬ä¸€ä¸ªï¼Œfastçš„ä½ç½®æ²¡æœ‰å˜åŠ¨*/;fast&lt;s.size();fast++)        &#123;               //fastè¦å¤§äº1æ‰èƒ½åˆ¤æ–­fastä¸Šä¸€ä½            //ä¸Šä¸€ä½å’Œè¿™ä¸€ä½ä¸ç›¸ç­‰ï¼ˆåˆ¤ç«¯è¿ç»­ç©ºæ ¼ï¼‰            //å½“å‰ä½æ˜¯å¦ä½ç©ºæ ¼ï¼ˆæ˜¯å°±ä»£è¡¨æ˜¯è¿ç»­ç©ºæ ¼ï¼‰            //continueä¼šæ‰¾åˆ°ä¸€æ®µç©ºæ ¼ä¹‹åçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦            if(fast &gt; 1 \t            &amp;&amp; s[fast-1] == s[fast]                &amp;&amp; s[fast]==&#x27; &#x27;)                continue;            else            &#123;//å¤å†™                s[slow]=s[fast];                slow++;            &#125;        &#125;        // å¤å†™ç»“æŸåï¼Œæ­¤æ—¶slowæ‰€åœ¨ä½ç½®æ˜¯åŸæœ‰å•è¯å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œä¸”å¯èƒ½ä¼šæœ‰ä¸€ä¸ªå¤šä½™çš„ç©ºæ ¼ï¼›        // åœ¨whileå¾ªç¯ä¸­ï¼ŒfastæŒ‡é’ˆä¼šè·³è¿‡å¤šä½™ç©ºæ ¼ï¼Œåªå¤åˆ¶ä¸€ä¸ªç©ºæ ¼ç»™slowçš„ä½ç½®        // è¿™ä¸ªæ“ä½œæ˜¯ä¿è¯ä¸¤ä¸ªå•è¯ä¹‹é—´åªæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œæ‰€ä»¥slowæ­¤æ—¶é¡¶å¤šä¼šæ˜¯ä¸€ä¸ªæœ«å°¾çš„ç©ºæ ¼ã€‚            // åªéœ€è¦åˆ¤æ–­slow-1ä½ç½®æ˜¯ä¸æ˜¯ç©ºæ ¼ï¼Œæ˜¯çš„è¯ï¼Œå°†å…¶å»æ‰å°±è¡Œ        // æ³¨æ„ï¼Œæ­¤æ—¶slowæ‰€åœ¨ä½ç½®å¯èƒ½æ˜¯æºå­—ç¬¦ä¸²ä¸­çš„å­—æ¯ä¸Šï¼Œå¹¶ä¸ä¸€å®šæ˜¯ç©ºæ ¼        if(slow&gt;1 &amp;&amp; s[slow-1]==&#x27; &#x27;)        &#123;            s.resize(slow-1);        &#125;        else        &#123;            s.resize(slow);        &#125;    &#125;        //é€†ç½®å­—ç¬¦ä¸²    //æ¯æ¬¡é€†ç½®çš„æ—¶é—´å¤æ‚åº¦ä¸ºO((START-END)/2)    void revserseString(string&amp;s,int start,int end)    &#123;        //ç­‰äºçš„æƒ…å†µä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡æ­¤æ—¶å‹æ ¹ä¸åšäº¤æ¢        assert(end&lt;s.size()&amp;&amp;start&lt;=end);        int i=start,j=end;        for(;i&lt;j;i++,j--)        &#123;            swap(s[i],s[j]);        &#125;    &#125;    //æ€è·¯æœ‰ç‚¹ç±»ä¼¼`189è½®è½¬æ•°ç»„`ä¸­çš„ä¸‰æ—‹æ³•    //å…ˆå»æ‰å†—ä½™ç©ºæ ¼    //æŠŠæ•´ä¸ªå­—ç¬¦ä¸²é€†ç½®    //å†å•ç‹¬é€†ç½®æ‰€æœ‰å•è¯    string reverseWords(string s) &#123;        //åˆ å¤šä½™ç©ºæ ¼        removeSpace(s);        //é€†ç½®å­—ç¬¦ä¸²        revserseString(s,0,s.size()-1);        //printf(&quot;|%s|\\n&quot;,s.c_str());        //æ‰«æå‡ºå•è¯ï¼Œé€†ç½®æ¯ä¸ªå•è¯        //å› ä¸ºå·²ç»åˆ é™¤å¤šä½™ç©ºæ ¼äº†ï¼Œæ‰€ä»¥s[0]è‚¯å®šæ˜¯å•è¯        int begin=0,cur=1;        while(cur&lt;s.size() &amp;&amp; begin&lt;s.size())        &#123;            //å½“å‰ä¸æ˜¯ç©ºæ ¼++            while(cur!=begin&amp;&amp;s[cur]!=&#x27; &#x27;&amp;&amp;cur&lt;s.size())            &#123;                //cout &lt;&lt; begin &lt;&lt; &quot;-&quot; &lt;&lt; cur&lt;&lt; &quot;-&quot; &lt;&lt; s[cur]&lt;&lt;endl;                cur++;            &#125;            //åœä¸‹æ¥ä»£è¡¨æ˜¯ç©ºæ ¼,é€†ç½®            //å¦‚æœæ˜¯æœ€åä¸€ä¸ªå•è¯ï¼Œåœä¸‹æ¥çš„æ—¶å€™æ˜¯å› ä¸ºcur==s.size()            //æ­¤æ—¶cur-1å°±æ­£å¥½æ˜¯å€’æ•°ç¬¬ä¸€ä¸ªå­—ç¬¦            //cout &lt;&lt; begin &lt;&lt; &quot; &quot; &lt;&lt; cur &lt;&lt;endl;            revserseString(s,begin,cur-1);            //æ›´æ–°ä¸‹æ ‡            begin= cur+1;            cur+=2;//ä¿è¯curæ˜¯beginçš„ä¸‹ä¸€ä½        &#125;        return s;    &#125;&#125;;\n\næµ‹è¯• 4MS 6.8MB\nä¸€å®šè¦è®°å¾—åˆ é™¤printfä»¥åå†™ojçš„æ—¶å€™ï¼Œä¸€å®šè¦è®°å¾—åˆ é™¤ç”¨æ¥debugçš„printfï¼Œå¦åˆ™ç”¨æ—¶ç‰¹åˆ«ç‰¹åˆ«é•¿ï¼\nå¦‚ä¸‹ç›¸åŒä»£ç ï¼Œåˆ é™¤pirntfä¹‹åå¿«äº†åå€\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","leetcode"]},{"title":"ã€leetcodeã€‘150.é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼Œä»¥åŠå‰ç¼€ä¸­ç¼€åç¼€çš„ç›¸äº’è½¬æ¢","url":"/posts/3211822811/","content":"æœ¬æ–‡æœ€åˆå†™ä½œäº2022-07-18ï¼Œäºè¿‘æ—¥å¤§é‡æ›´æ–°ï¼Œæ•…é‡æ–°å‘å¸ƒã€‚\n1. ä»€ä¹ˆæ˜¯å‰ç¼€&#x2F;ä¸­ç¼€&#x2F;åç¼€è¡¨è¾¾å¼ï¼Ÿæˆ‘ä»¬æ—¥å¸¸å­¦ä¹ æ•°å­¦ï¼Œä½¿ç”¨çš„è¡¨è¾¾å¼å°±æ˜¯ä¸­ç¼€è¡¨è¾¾å¼\n1 + 2 * 3 / 2 - 5\n\nå‰ç¼€è¡¨è¾¾å¼å°±æ˜¯å°†æ“ä½œç¬¦æ”¾åœ¨æ“ä½œæ•°ä¹‹å‰çš„è¡¨è¾¾å¼ï¼›ä¸­ç¼€è½¬å‰ç¼€çš„æ–¹å¼æ˜¯ï¼Œå…ˆå°†ä¸­ç¼€è¡¨è¾¾å¼æŒ‰è¿ç®—é¡ºåºåŠ ä¸Šæ‹¬å·ï¼Œå†å°†æ“ä½œç¬¦ç§»åŠ¨åˆ°å¯¹åº”æ‹¬å·çš„å‰é¢ï¼Œæœ€ååˆ é™¤æ‹¬å·ï¼Œå°±æ˜¯å‰ç¼€è¡¨è¾¾å¼\n((1 + ((2 * 3) / 2)) - 5)- (+(1 / (*(2 3) 2))  5)- + 1 / * 2 3 2 5\n\nåç¼€è¡¨è¾¾å¼å°±æ˜¯å°†æ“ä½œç¬¦æ”¾åœ¨æ“ä½œæ•°ä¹‹å‰çš„è¡¨è¾¾å¼ï¼›åŒæ ·æ˜¯åŠ æ‹¬å·ï¼Œå†å°†è¿ç®—ç¬¦ç§»åŠ¨åˆ°æ‹¬å·åï¼Œå†å»æ‹¬å·\n((1 + ((2 * 3) / 2)) - 5)((1 ((2 3)* 2)/) + 5) - 1 2 3 * 2 / + 5 - \n\n\nå‰ç¼€è¡¨è¾¾å¼åˆç§°â€œæ³¢å…°è¡¨è¾¾å¼â€ï¼Œåç¼€è¡¨è¾¾å¼ä¸ºâ€œé€†æ³¢å…°è¡¨è¾¾å¼â€ã€‚\n2. è¡¨è¾¾å¼è½¬æ¢2.1. ä¸­ç¼€è½¬åç¼€ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢ä¸ºåç¼€è¡¨è¾¾å¼çš„æ‰‹å·¥åšæ³•ä¸ºï¼š\næŒ‰ç…§è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å¯¹æ‰€æœ‰çš„è¿ç®—å•ä½åŠ æ‹¬å·ã€‚ä¾‹ï¼š ((a/b) + (((c*d) - (e*f))/g))æŠŠè¿ç®—ç¬¦å·ç§»åŠ¨åˆ°å¯¹åº”æ‹¬å·çš„åé¢ï¼Œç„¶åå»æ‰æ‹¬å·ã€‚ä¾‹ï¼š((ab)/ (((cd)*(ef)*)-g)/+ï¼Œå»æ‰æ‹¬å·ab/cd*ef*-g/+ï¼›\nä»¥è¿™ä¸ªä¸­ç¼€è¡¨è¾¾å¼ä¸ºä¾‹\n1 + 2 * 3 / 2 - 5\n\næˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¿ç®—é¡ºåºåº”è¯¥æ˜¯å…ˆè®¡ç®—2*3ç„¶ååœ¨è®¡ç®—6/2ï¼Œæœ€åè®¡ç®—1+3-5å¾—å‡ºç»“æœ-1ï¼›\nå› ä¸º* /æ“ä½œç¬¦çš„ä¼˜å…ˆçº§é«˜äºåŠ å‡ï¼Œè¿™é‡Œå°±éœ€è¦æ³¨æ„è¿™ç§æƒ…å†µã€‚æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæ ˆæ¥å­˜æ”¾æ“ä½œç¬¦ï¼š\n\né‡åˆ°æ“ä½œæ•°çš„æ—¶å€™ å…ˆè¾“å‡º åˆ°ç»“æœè¡¨è¾¾å¼ä¸­;\né‡åˆ°æ“ä½œç¬¦ï¼Œå’Œæ ˆé¡¶è¿›è¡Œæ¯”è¾ƒ\nå¦‚æœæ ˆä¸ºç©º&#x2F;æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶ï¼Œå…¥æ ˆï¼›\næ“ä½œç¬¦ä¼˜å…ˆçº§ä½äºæ ˆé¡¶æˆ–å’Œæ ˆé¡¶ç›¸åŒï¼Œå‡ºæ ˆé¡¶æ“ä½œç¬¦ï¼›\n\n\næœ€åå°†æ ˆä¸­çš„æ“ä½œç¬¦å…¨éƒ¨å‡ºæ ˆï¼Œå°±å¯ä»¥è·å¾—åç¼€è¡¨è¾¾å¼ï¼›\n\nç”¨ä¸Šé¢è¿™ä¸ªæ€è·¯èµ°ä¸€éï¼Œå³ä¸ºä¸‹é¢çš„æƒ…å†µï¼ˆä¸çŸ¥é“è¿™æ ·å†™çš„å¤§å®¶èƒ½ä¸èƒ½çœ‹æ˜ç™½ï¼‰\n\næœ€ç»ˆå¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼Œå³éœ€è¦çš„åç¼€è¡¨è¾¾å¼ã€‚\n1 2 3 * 2 / + 5 -\n\næˆ‘ä»¬å¯ä»¥ç”¨ä¸‹æ–‡æåˆ°çš„ä»£ç æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªç”¨ä¾‹ï¼Œå¾—å‡ºçš„ç»“æœä¹Ÿæ˜¯-1ï¼Œæ­£ç¡®ï¼\n\nå¦‚æœä¸­ç¼€è¡¨è¾¾å¼ä¸­å¸¦æ‹¬å·å’‹åŠï¼Ÿ\n\né‡åˆ°æ“ä½œæ•°çš„æ—¶å€™ å…ˆè¾“å‡º åˆ°ç»“æœè¡¨è¾¾å¼ä¸­;\né‡åˆ°æ“ä½œç¬¦ï¼Œå’Œæ ˆé¡¶è¿›è¡Œæ¯”è¾ƒ\nå¦‚æœæ ˆä¸ºç©º&#x2F;æ“ä½œç¬¦ä¼˜å…ˆçº§é«˜äºæ ˆé¡¶ï¼Œå…¥æ ˆï¼›\næ“ä½œç¬¦ä¼˜å…ˆçº§ä½äºæ ˆé¡¶æˆ–å’Œæ ˆé¡¶ç›¸åŒï¼Œå‡ºæ ˆé¡¶æ“ä½œç¬¦ï¼›\n\n\nå¦‚æœæ˜¯å·¦æ‹¬å·(ï¼Œæ­£å¸¸å…¥æ ˆï¼›\né‡åˆ°å³æ‹¬å·)ï¼Œå‡ºæ ˆå†…æ‰€æœ‰æ“ä½œç¬¦ï¼Œç›´åˆ°é‡åˆ°å¯¹åº”å·¦æ‹¬å·ï¼Œæ³¨æ„ï¼Œæœ€ç»ˆçš„è¾“å‡ºåç¼€è¡¨è¾¾å¼ä¸­ä¸éœ€è¦æ·»åŠ å·¦æ‹¬å·ï¼›\næœ€åå°†æ ˆä¸­çš„æ“ä½œç¬¦å…¨éƒ¨å‡ºæ ˆï¼Œå°±å¯ä»¥è·å¾—åç¼€è¡¨è¾¾å¼ï¼›\n\nç®€å•ç†è§£ï¼Œå·¦æ‹¬å·çš„ä¼˜å…ˆçº§ä½äºå…¶ä»–è¿ç®—ç¬¦ï¼Œå³æ‹¬å·çš„ä¼˜å…ˆçº§é«˜äºå…¶ä»–è¿ç®—ç¬¦ï¼Œå°±å¯ä»¥ç”¨å‰æ–‡æåˆ°çš„åŸºæœ¬åŠæ³•æ¥å¤„ç†å¸¦æ‹¬å·çš„ä¸­ç¼€è¡¨è¾¾å¼äº†ã€‚\n2.2. ä¸­ç¼€è½¬å‰ç¼€é¦–å…ˆè®¾å®šä¸€ä¸ªæ“ä½œç¬¦æ ˆï¼Œä»å³åˆ°å·¦é¡ºåºæ‰«ææ•´ä¸ªä¸­ç¼€è¡¨è¾¾å¼\n\nå¦‚æœæ˜¯æ“ä½œæ•°ï¼Œåˆ™ç›´æ¥å½’å…¥æœ€ç»ˆè¡¨è¾¾å¼ï¼›\nå¦‚æœæ˜¯æ“ä½œç¬¦ï¼Œåˆ™æ£€æµ‹å™¨æ˜¯å¦æ˜¯å³æ‹¬å·ï¼Œå¦‚æœæ˜¯å³æ‹¬å·ï¼Œåˆ™ç›´æ¥å°†å…¶å…¥æ ˆï¼›\nå¦‚æœæ˜¯å·¦æ‹¬å·ï¼Œåˆ™å°†æ ˆä¸­çš„æ“ä½œç¬¦ä¾æ¬¡å¼¹æ ˆï¼Œå½’å…¥æœ€ç»ˆè¡¨è¾¾å¼ï¼Œç›´è‡³é‡åˆ°å³æ‹¬å·ï¼Œå°†å³æ‹¬å·å¼¹æ ˆï¼Œå¤„ç†ç»“æŸï¼›\nå¦‚æœæ˜¯å…¶ä»–æ“ä½œç¬¦ï¼Œåˆ™æ£€æµ‹æ ˆé¡¶æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ä¸å½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å…³ç³»ï¼Œå¦‚æœæ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§å¤§äºå½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œåˆ™å¼¹æ ˆï¼Œå¹¶å½’å…¥æœ€ç»ˆè¡¨è¾¾å¼ï¼Œç›´è‡³æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§å°äºç­‰äºå½“å‰æ“ä½œç¬¦ä¼˜å…ˆçº§ï¼Œè¿™æ—¶å°†å½“å‰æ“ä½œç¬¦å‹æ ˆã€‚\nå½“æ‰«æå®Œæ¯•æ•´ä¸ªä¸­ç¼€è¡¨è¾¾å¼åï¼Œæ£€æµ‹æ“ä½œç¬¦æ ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™ä¾æ¬¡å°†æ ˆä¸­æ“ä½œç¬¦å¼¹æ ˆï¼Œå½’å…¥æœ€ç»ˆè¡¨è¾¾å¼ã€‚\næœ€åï¼Œå°†å¾—å‡ºçš„æœ€ç»ˆè¡¨è¾¾å¼è¿›è¡Œé€†ç½®ï¼Œå°±å¾—åˆ°ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„å‰ç¼€è¡¨è¾¾å¼ã€‚\n\nä»¥ä¸‹é¢è¿™ä¸ªä¸­ç¼€è¡¨è¾¾å¼ä¸ºä¾‹\n1 + 2 * 3 / 2 - 5\n\nä½¿ç”¨ä¸Šè¿°æ­¥éª¤çš„æ ˆæ“ä½œç¤ºæ„å›¾å¦‚ä¸‹\n\nå¾—åˆ°çš„å‰ç¼€è¡¨è¾¾å¼å¦‚ä¸‹ï¼Œç¬¦åˆå‰æ–‡ä½¿ç”¨åŠ æ‹¬å·æ³•å¾—åˆ°çš„ç»“æœï¼\n- + 1 / * 2 3 2 5\n\n2.3. åç¼€è½¬ä¸­ç¼€åç¼€è½¬ä¸­ç¼€ä¼šç®€å•ä¸€äº›ï¼Œå› ä¸ºä¸éœ€è¦è€ƒè™‘æ‹¬å·ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚å‚è€ƒ çŸ¥å¦;\nä»å·¦å¾€å³éå†åç¼€è¡¨è¾¾å¼ï¼š\n\nå¦‚æœæ˜¯æ“ä½œæ•°ï¼Œå…¥æ ˆï¼›\nå¦‚æœæ˜¯è¿ç®—ç¬¦ï¼ˆè®¾ç¬¦å·ä¸º#ï¼‰ï¼Œä»æ ˆé¡¶å–ä¸¤ä¸ªå…ƒç´ aå’Œbï¼Œæ³¨æ„å…ˆå–å‡ºæ¥çš„æ˜¯å³æ“ä½œæ•°ï¼Œå°†&quot;( b # a )&quot;è¿™ä¸ªå­—ç¬¦ä¸²å…¥æ ˆã€‚è¿™é‡ŒåŠ æ‹¬å·æ˜¯ä¿è¯è¿ç®—é¡ºåºã€‚\n\næœ€ç»ˆæ ˆé¡¶çš„å­—ç¬¦ä¸²å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å‰ç¼€è¡¨è¾¾å¼\n1 2 3 * 2 / + 5 - \n\n\nå¾—åˆ°çš„ä¸­ç¼€è¡¨è¾¾å¼ç¬¦åˆé¢„æœŸï¼è™½ç„¶ä¼šæœ‰å¤šä½™çš„æ‹¬å·ï¼Œä½†è¿ç®—é¡ºåºæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n1 + 2 * 3 / 2 - 5\n\nC++ä»£ç å¦‚ä¸‹ï¼Œè®¾è¾“å…¥çš„åç¼€è¡¨è¾¾å¼æ˜¯æœ‰æ•ˆçš„ã€‚\n#include &lt;stack&gt;#include &lt;vector&gt;#include &lt;string&gt;#include &lt;iostream&gt;using namespace std;string postfix_to_infix(vector&lt;string&gt; expr) &#123;    stack&lt;string&gt; s;    for (int i = 0; i &lt; expr.size(); ++i) &#123;        // a number        if (!expr[i].empty() &amp;&amp; expr[i][0] &gt;= &#x27;0&#x27; &amp;&amp; expr[i][0] &lt;= &#x27;9&#x27;) &#123;            s.push(expr[i]);        &#125;        // an operator        else &#123;            string second = s.top(); s.pop();            string first = s.top(); s.pop();            s.push(&quot;(&quot; + first + expr[i] + second + &quot;)&quot;);        &#125;    &#125;    return s.top();&#125;int main() &#123;    vector&lt;string&gt; expr = &#123;&quot;3&quot;, &quot;2&quot;, &quot;5&quot;, &quot;-&quot;, &quot;6&quot;, &quot;*&quot;, &quot;3&quot;, &quot;/&quot;, &quot;+&quot;&#125;;    // output: (3+(((2-5)*6)/3))    cout &lt;&lt; postfix_to_infix(expr) &lt;&lt; endl;    return 0;&#125;\n\n2.4. å‰ç¼€è½¬åç¼€ä¾ç…§ä¸Šè¿°åç¼€è½¬å‰ç¼€çš„æ€è·¯ï¼Œå‰ç¼€è½¬åç¼€çš„æ“ä½œå¦‚ä¸‹\nä»å³å¾€å·¦éå†åç¼€è¡¨è¾¾å¼ï¼š\n\nå¦‚æœæ˜¯æ“ä½œæ•°ï¼Œå…¥æ ˆï¼›\nå¦‚æœæ˜¯è¿ç®—ç¬¦ï¼ˆè®¾ç¬¦å·ä¸º#ï¼‰ï¼Œä»æ ˆé¡¶å–ä¸¤ä¸ªå…ƒç´ aå’Œbï¼Œæ³¨æ„å…ˆå–å‡ºæ¥çš„æ˜¯å·¦æ“ä½œæ•°ï¼Œå°†&quot;( a # b )&quot;è¿™ä¸ªå­—ç¬¦ä¸²å…¥æ ˆã€‚è¿™é‡ŒåŠ æ‹¬å·æ˜¯ä¿è¯è¿ç®—é¡ºåºã€‚\n\nè¿™æ ·è¿ç®—å°±èƒ½å¾—åˆ°ä¸­ç¼€è¡¨è¾¾å¼ã€‚è¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ã€‚\n2.5. å‰ç¼€&#x2F;åç¼€è½¬æ¢ï¼Ÿå› ä¸ºå·²ç»å­¦ä¼šäº†å‰ç¼€è½¬ä¸­ç¼€ï¼Œåç¼€è½¬ä¸­ç¼€çš„æ€è·¯ï¼Œå‰åç¼€çš„è½¬æ¢ç”¨ä¸­ç¼€åšä¸ªè·³æ¿å°±è¡Œäº†ã€‚é¢è¯•çš„æ—¶å€™èƒ½è¯´å‡ºæ€è·¯æ¥å°±å¤Ÿã€‚\n3. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼3.1. é¢˜ç›®æ¥æºleetcodeï¼š150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼\n\n3.2. æ€è·¯é€†æ³¢å…°è¡¨è¾¾å¼åˆç§°ä¸ºåç¼€è¡¨è¾¾å¼\n\nä¸­ç¼€ 1 + 2 * 3ï¼›\nåç¼€ 1 2 3 + *ï¼›\n\né¢˜ç›®æ‰€ç»™çš„å‚æ•°æ˜¯åç¼€è¡¨è¾¾å¼ï¼Œå…¶æ“ä½œçš„æ€è·¯å¦‚ä¸‹ï¼š\n\nä»å·¦å¾€å³éå†ï¼Œé‡åˆ°æ“ä½œæ•°ï¼Œå…¥æ ˆ\né‡åˆ°è¿ç®—ç¬¦ï¼Œå–æ ˆé¡¶ä¸¤ä¸ªè¿ç»­æ•°æ®è¿›è¡Œè®¡ç®—ï¼ˆç¬¬äºŒä¸ªå–å‡ºæ¥çš„æ˜¯å·¦æ“ä½œæ•°ï¼‰ï¼Œå†å°†è®¡ç®—ç»“æœå…¥æ ˆ\n\nçœ‹èµ·æ¥ä¸éš¾ï¼Œæ˜¯å› ä¸ºè¿™é“é¢˜å·²ç»æ˜¯ç®€åŒ–åçš„ç‰ˆæœ¬ï¼Œå…¶æ‰€ç»™åç¼€è¡¨è¾¾å¼ä¸­æ²¡æœ‰å‡ºç°æ‹¬å·è¿™ç§ç‰¹æ®Šä¼˜å…ˆçº§çš„æ“ä½œã€‚æ–°æ³¨ï¼šè¿™é‡Œç†è§£æœ‰è¯¯ï¼Œåç¼€&#x2F;å‰ç¼€è¡¨è¾¾å¼æœ¬æ¥å°±æ˜¯ä»ä¸­ç¼€æŒ‰ä¼˜å…ˆçº§è½¬æ¢è¿‡æ¥çš„ï¼Œå®ƒä»¬æ˜¯ä¸ä¼šåŒ…å«æ‹¬å·çš„ï¼\n3.3. å®Œæ•´ä»£ç //https://leetcode.cn/problems/evaluate-reverse-polish-notation/submissions///150é€†æ³¢å…°è¡¨è¾¾å¼class Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                switch(ch[0])                &#123;                    case &#x27;+&#x27;:                        s.push(left+right);                        break;                    case &#x27;-&#x27;:                        s.push(left-right);                        break;                    case &#x27;*&#x27;:                        s.push(left*right);                        break;                    case &#x27;/&#x27;:                        s.push(left/right);                        break;                    default:                        break;                &#125;            &#125;            else&#123;                // æ³¨æ„ï¼Œé¢˜ç›®ç»™çš„vectorä¸­æ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦è½¬æ•°å­—                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\n\nå¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥æ”¹é€ è¿™ä¸ªojçš„ä»£ç \nclass Solution &#123;public:    int evalRPN(vector&lt;string&gt;&amp; tokens) &#123;        stack&lt;int&gt; s;        map&lt;string,function&lt;int(int,int)&gt;&gt; FuncMap = &#123;            &#123;&quot;+&quot;,[](int x,int y)&#123;return x+y;&#125;&#125;,            &#123;&quot;-&quot;,[](int x,int y)&#123;return x-y;&#125;&#125;,            &#123;&quot;*&quot;,[](int x,int y)&#123;return x*y;&#125;&#125;,            &#123;&quot;/&quot;,[](int x,int y)&#123;return x/y;&#125;&#125;        &#125;;        for(auto&amp; ch : tokens)        &#123;            if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)            &#123;                int right=s.top();                s.pop();                int left=s.top();                s.pop();                int ret = FuncMap[ch](left,right);                s.push(ret);            &#125;            else&#123;                s.push(stoi(ch));            &#125;           &#125;        return s.top();    &#125;&#125;;\n\n4. å‰ç¼€è¡¨è¾¾å¼æ±‚å€¼å‰ç¼€è¡¨è¾¾å¼çš„è®¡ç®—æ–¹æ³•å’Œåç¼€åŸºæœ¬ä¸€è‡´ã€‚\n\nä»å³å¾€å·¦éå†ï¼Œé‡åˆ°æ“ä½œæ•°ï¼Œå…¥æ ˆï¼›\né‡åˆ°æ“ä½œç¬¦ï¼Œä»æ ˆé¡¶å–å‡ºä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œç¬¬ä¸€ä¸ªå–å‡ºæ¥çš„æ•°å­—æ˜¯å·¦æ“ä½œæ•°ã€‚è®¡ç®—åé‡æ–°å…¥æ ˆã€‚\n\nè¿˜æ˜¯ä»¥ä¸‹é¢çš„å‰ç¼€è¡¨è¾¾å¼ä¸ºä¾‹\n- + 1 / * 2 3 2 5\n\nä»å³å¾€å·¦éå†å…¥æ ˆ\n\nç¬¬ä¸€æ³¢æ“ä½œåï¼Œæ ˆä¸­åŒ…æ‹¬2,3,2,5ï¼›\néšåé‡åˆ°ç¬¬ä¸€ä¸ªæ“ä½œç¬¦*ï¼Œä»æ ˆå–å‡º2å’Œ3è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°6ï¼Œé‡æ–°å…¥æ ˆ6,2,5ï¼›\né‡åˆ°ç¬¬äºŒä¸ªæ“ä½œç¬¦/ï¼Œä»æ ˆå–å‡º6å’Œ2è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°3ï¼Œé‡æ–°å…¥æ ˆ3,5ï¼›\næ“ä½œæ•°1å…¥æ ˆï¼Œ1,3,5ï¼›\næ“ä½œç¬¦+ï¼Œä»æ ˆä¸­å–å‡º1å’Œ3è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°4ï¼Œå…¥æ ˆ4,5ï¼›\næ“ä½œç¬¦-ï¼Œä»æ ˆä¸­å–å‡º4å’Œ5è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°æœ€ç»ˆç»“æœ-1ï¼›\n\nè¿™ä¸ªå‰ç¼€è¡¨è¾¾å¼å¯¹åº”çš„ä¸­ç¼€å¦‚ä¸‹ï¼Œå®ƒçš„è®¡ç®—ç»“æœä¹Ÿæ˜¯-1ï¼Œå¤„ç†æ­£ç¡®ï¼\n1 + 2 * 3 / 2 - 5 = -1\n\nå’Œåç¼€è¡¨è¾¾å¼ç›¸æ¯”ï¼Œå‰ç¼€è¡¨è¾¾å¼åªæœ‰éå†é¡ºåºä¸åŒï¼Œä»¥åŠä»æ ˆå–æ•°æ®æ—¶å·¦å³æ“ä½œæ•°ä½ç½®ä¸åŒï¼Œæ‰€ä»¥åªéœ€è¦å°†éå†vectorçš„æ“ä½œæ”¹æˆåå‘è¿­ä»£å™¨å°±å¯ä»¥äº†ã€‚\n// è®¡ç®—å‰ç¼€è¡¨è¾¾å¼int evalPN(vector&lt;string&gt;&amp; tokens) &#123;    stack&lt;int&gt; s;    map&lt;string,function&lt;int(int,int)&gt;&gt; FuncMap = &#123;        &#123;&quot;+&quot;,[](int x,int y)&#123;return x+y;&#125;&#125;,        &#123;&quot;-&quot;,[](int x,int y)&#123;return x-y;&#125;&#125;,        &#123;&quot;*&quot;,[](int x,int y)&#123;return x*y;&#125;&#125;,        &#123;&quot;/&quot;,[](int x,int y)&#123;return x/y;&#125;&#125;    &#125;;    auto riter = tokens.rbegin();    for(;riter != tokens.rend();riter++)    &#123;        string ch = *riter;        if(ch==&quot;+&quot;||ch==&quot;-&quot;||ch==&quot;*&quot;||ch==&quot;/&quot;)        &#123;            // å‰ç¼€è¡¨è¾¾å¼ç¬¬ä¸€ä¸ªå–å‡ºæ¥çš„æ˜¯å·¦æ“ä½œæ•°            int left=s.top();            s.pop();            int right=s.top();            s.pop();            int ret = FuncMap[ch](left,right);            s.push(ret);        &#125;        else&#123;            s.push(stoi(ch));        &#125;       &#125;    return s.top();&#125;\n\nä½¿ç”¨è¡¨è¾¾å¼è¿›è¡Œæµ‹è¯•ï¼Œå¾—åˆ°æ­£ç¡®è¾“å‡º\nint main()&#123;    vector&lt;string&gt; v = &#123;&quot;-&quot;,&quot;+&quot;,&quot;1&quot;,&quot;/&quot;,&quot;*&quot;,&quot;2&quot;,&quot;3&quot;,&quot;2&quot; ,&quot;5&quot;&#125;;    cout &lt;&lt; evalPN(v) &lt;&lt; &quot;\\n&quot;; // è¾“å‡º -1    return 0;&#125;\n\n\n\n5. The endç½‘æ˜“é›·ç«çš„é¢è¯•è€ƒåˆ°äº†å‰ç¼€è¡¨è¾¾å¼æ±‚å€¼ï¼Œæ•…æ­¤æ›´æ–°æœ¬æ–‡\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","leetcode"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘HJ92 åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºè¿ç»­æœ€é•¿çš„æ•°å­—ä¸²","url":"/posts/3879460729/","content":"HJ92 åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºè¿ç»­æœ€é•¿çš„æ•°å­—ä¸²\né¢˜ç›®æ¥æº ç‰›å®¢ç½‘ HJ92\n\næè¿°è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å…¶æœ€é•¿çš„æ•°å­—å­ä¸²ï¼Œä»¥åŠå…¶é•¿åº¦ã€‚è‹¥æœ‰å¤šä¸ªæœ€é•¿çš„æ•°å­—å­ä¸²ï¼Œåˆ™å°†å®ƒä»¬å…¨éƒ¨è¾“å‡ºï¼ˆæŒ‰åŸå­—ç¬¦ä¸²çš„ç›¸å¯¹ä½ç½®ï¼‰\næœ¬é¢˜å«æœ‰å¤šç»„æ ·ä¾‹è¾“å…¥ã€‚\næ•°æ®èŒƒå›´ï¼šå­—ç¬¦ä¸²é•¿åº¦ 1 \\le n \\le 200 \\1â‰¤nâ‰¤200 ï¼Œ ä¿è¯æ¯ç»„è¾“å…¥éƒ½è‡³å°‘å«æœ‰ä¸€ä¸ªæ•°å­—\nè¾“å…¥æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚1&lt;&#x3D;len(å­—ç¬¦ä¸²)&lt;&#x3D;200\nè¾“å‡ºæè¿°ï¼šè¾“å‡ºå­—ç¬¦ä¸²ä¸­æœ€é•¿çš„æ•°å­—å­—ç¬¦ä¸²å’Œå®ƒçš„é•¿åº¦ï¼Œä¸­é—´ç”¨é€—å·é—´éš”ã€‚å¦‚æœæœ‰ç›¸åŒé•¿åº¦çš„ä¸²ï¼Œåˆ™è¦ä¸€å—å„¿è¾“å‡ºï¼ˆä¸­é—´ä¸è¦è¾“å‡ºç©ºæ ¼ï¼‰\nè¾“å…¥ï¼šabcd12345ed125ss123058789a8a72a6a5yy98y65ee1r2è¾“å‡ºï¼š123058789,9729865,2è¯´æ˜ï¼šæ ·ä¾‹ä¸€æœ€é•¿çš„æ•°å­—å­ä¸²ä¸º123058789ï¼Œé•¿åº¦ä¸º9æ ·ä¾‹äºŒæœ€é•¿çš„æ•°å­—å­ä¸²æœ‰72,98,65ï¼Œé•¿åº¦éƒ½ä¸º2    \n\n\né¢˜è§£ä»£ç è¿™é“é¢˜çš„æ€è·¯å¾ˆç®€ç­”ï¼Œä»å‰å¾€åéå†ä¸€éï¼Œé‡åˆ°å­—ç¬¦ä¸²å°±å¼€å§‹è®¡ç®—countï¼Œå¹¶è®°å½•èµ·å§‹ä½ç½®ã€‚æœ€åå†æŠŠèµ·å§‹ä½ç½®å’Œå­ä¸²é•¿åº¦æ’å…¥ä¸€ä¸ªpairé‡Œé¢ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå¿…é¡»è¦ç”¨pairï¼Œå› ä¸ºé¢˜ç›®è¦æ±‚ä¸­æåˆ°äº†ï¼Œå¦‚æœæœ‰å¤šä¸ªç›¸åŒé•¿åº¦çš„æ•°å­—ä¸²ï¼Œå°±éœ€è¦ä¸€å¹¶è¾“å‡ºï¼Œå¹¶åŠ ä¸Šæœ€åä½çš„,é•¿åº¦\n#include &lt;stdio.h&gt;#include &lt;iostream&gt;#include &lt;vector&gt;#include &lt;string&gt;using namespace std;//ç»™å®šä¸€ä¸ª256å­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œè¾“å‡ºå†…éƒ¨æœ€é•¿æ•°å­—å­ä¸²bool isNumStr(const char&amp; c)&#123;    return (c &gt;= &#x27;0&#x27; &amp;&amp; c &lt;= &#x27;9&#x27;);&#125;int main()&#123;    string s;//æ¥æº    while(getline(cin, s))    &#123;        //cout&lt;&lt;s&lt;&lt;endl;        //string ret_s;//ç»“æœ        vector&lt;pair&lt;int,int&gt;&gt; v;//ç”¨æ¥å­˜æ”¾æ•°å­—å­ä¸²çš„ä½ç½®        int begin = 0;//æ ‡è®°æ•°å­—ä¸²çš„å¼€å§‹        int count = 0;//æ ‡è®°é•¿åº¦        int max = 0, mbegin;//ä¸Šä¸€æ¬¡è·å–åˆ°çš„æ•°æ®ä¸²é•¿åº¦å’Œèµ·å§‹ä½ç½®        int flag = 0;//æ ‡è®°ä½        for (int i = 0; i &lt; s.size(); i++)        &#123;            if (i &lt; s.size() - 1 &amp;&amp; isNumStr(s[i]) &amp;&amp; isNumStr(s[i + 1]))            &#123;                count++;                if (flag != 1) &#123;                    begin = i;//è¯´æ˜å¼€å§‹è®¡ç®—äº†                    flag = 1;                &#125;                //cout&lt;&lt;&quot;i&quot;&lt;&lt;i&lt;&lt;&quot; c&quot;&lt;&lt;count&lt;&lt;&quot; b&quot;&lt;&lt;begin&lt;&lt;endl;            &#125;            else if (isNumStr(s[i]))//è‡ªå·±è¿˜æ˜¯æ•°å­—ï¼Œä½†æ˜¯ä¸‹ä¸€ä½ä¸æ˜¯            &#123;                count++;                //cout&lt;&lt;&quot;i&quot;&lt;&lt;i&lt;&lt;&quot; c&quot;&lt;&lt;count&lt;&lt;&quot; b&quot;&lt;&lt;begin&lt;&lt;endl;            &#125;            else &#123;                if (count &gt;= max) &#123;                    max = count;//æœ€å¤§çš„é•¿åº¦                    mbegin = begin;//æœ€å¤§é•¿åº¦çš„èµ·å§‹ä½ç½®                    v.push_back(make_pair(count, begin));                &#125;                count = 0;//ç½®é›¶                flag = 0;            &#125;        &#125;                            if (count &gt;= max)        &#123;//å¾ªç¯ç»“æŸåè¿˜éœ€è¦ä¸€æ¬¡åˆ¤æ–­ï¼Œé¿å…æœ€åä¸€ä¸ªå­—ç¬¦ä¾æ—§æ˜¯æ•°å­—çš„æƒ…å†µ            max = count;            mbegin = begin;            v.push_back(make_pair(count, begin));        &#125;                for(auto e:v)        &#123;            if(e.first==max)            &#123;                for(int i = e.second;i&lt;e.second+e.first;i++)                &#123;                    cout&lt;&lt;s[i];                &#125;            &#125;        &#125;        cout&lt;&lt;&quot;,&quot;&lt;&lt;max&lt;&lt;endl;//ç»“æŸåç»Ÿä¸€è¾“å‡ºmax    &#125;    return 0;&#125;// é€šè¿‡å…¨éƒ¨ç”¨ä¾‹  è¿è¡Œæ—¶é—´4ms å ç”¨å†…å­˜448KB\n\nåšè¿™é“é¢˜çš„èµ·å› -å¦å¤–ä¸€é“é¢˜å’³å’³ï¼Œåœ¨å­¦æ ¡ä¸Šè¯¾çš„æ—¶å€™é‡åˆ°äº†å¦å¤–ä¸€é“é¢˜ç›®ï¼Œè¿™é“é¢˜ç›®åªéœ€è¾“å‡ºä¸€ä¸ªæœ€é•¿æ•°å­—å­ä¸²å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦å…³å¿ƒé•¿åº¦ç›¸åŒçš„é—®é¢˜ã€‚\n\næˆ‘çš„æ€è·¯å’ŒHJ92ä¸€æ ·ï¼Œå°±æ˜¯éå†æ‰¾åˆ°æ•°å­—å­ä¸²çš„é•¿åº¦å’Œèµ·å§‹ä½ç½®ï¼Œç„¶åæ’å…¥ä¸€ä¸ªæ–°çš„stringå†coutè¿›è¡Œè¾“å‡ºã€‚å…¶ä¸­så’Œret_sè¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯string\nç„¶åæˆ‘å°±é‡åˆ°äº†â€œå¥‡è‘©æƒ…å†µâ€\n\næˆ‘è¿˜åœ¨æœ¬åœ°æµ‹è¯•äº†ä¸¤æ¬¡ï¼Œå‘ç°â€œåº”è¯¥â€æ˜¯ä¸ä¼šå¤šæ‰“å°ç©ºæ ¼ä»€ä¹ˆçš„\n\nä¸Šå›¾Linux G++ï¼Œä¸‹å›¾VS2019\n\nè€Œæˆ‘é€šè¿‡äº†ä¸Šé¢çš„HJ92é‚£é“é¢˜ï¼Œè¯´æ˜ä»£ç çš„æ€è·¯æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œé—®é¢˜å°±å‡ºåœ¨è¾“å‡ºè¿™é‡Œ\n\nåœ¨ç»“æŸä¹‹åï¼ˆè¿™é“é¢˜é™æ—¶ï¼Œæˆ‘æ²¡èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰æˆ‘æ‰å‘ç°è‡ªå·±æ˜¯ä¸ªå¤§ç¬¨è›‹ï¼\nè§£å†³æ–¹æ³•1ï¼šåŠ æ–œæ 0æ³¨æ„ï¼ŒåŠ endlçš„æ–¹æ³•æˆ‘å·²ç»è¯•è¿‡äº†ï¼Œä¹Ÿä¸è¡Œ\nå…¶å®åœ¨è¿™é‡Œï¼Œæˆ‘æ˜¯æœ‰æƒ³è¿‡åŠ \\0çš„ï¼Œä½†æ˜¯æˆ‘-åŠ -é”™-ä½-ç½®äº†ï¼ï¼ï¼åº”è¯¥ç»™ret_SåŠ ï¼Œå“¼å“¼å•Šå•Šå•Šå•Š\n\n\nè§£å†³æ–¹æ³•2ï¼šç›´æ¥foræ‰“å°è¿™ä¸ªæ–¹æ³•æˆ‘ä¹Ÿæ²¡æƒ³åˆ°ï¼Œæ—¢ç„¶æˆ‘éƒ½å·²ç»çŸ¥é“èµ·å§‹ä½ç½®å’Œå­ä¸²é•¿åº¦äº†ï¼Œä¸ºå•¥ä¸ç›´æ¥æ‰“å°åŸæœ¬stringé‡Œé¢çš„å†…å®¹å‘¢ï¼Ÿç›´æ¥foræ‰“å°ä¸€ä¸‹ä¸å°±è¡Œäº†???\nåªèƒ½è¯´è‡ªå·±å¯¹å®¹å™¨çš„ä½¿ç”¨è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼ŒçŸ¥è¯†æ²¡å­¦åˆ°ä½å•Šï¼Œå“­\n\næŠŠè‡ªå·±æŒ‚åœ¨è¿™é‡Œå‘Šè¯«åæ¥è€…\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","ç‰›å®¢ç½‘"]},{"title":"ã€leetcodeã€‘189. è½®è½¬æ•°ç»„ï¼ˆCè¯­è¨€ï¼‰","url":"/posts/2445477159/","content":"é—®é¢˜æ¥æº\nleetcode 189. è½®è½¬æ•°ç»„\n\nç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³è½®è½¬ k ä¸ªä½ç½®ï¼Œå…¶ä¸­ k æ˜¯éè´Ÿæ•°ã€‚\nè¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3è¾“å‡º: [5,6,7,1,2,3,4]è§£é‡Š:å‘å³è½®è½¬ 1 æ­¥: [7,1,2,3,4,5,6]å‘å³è½®è½¬ 2 æ­¥: [6,7,1,2,3,4,5]å‘å³è½®è½¬ 3 æ­¥: [5,6,7,1,2,3,4]\n\nè¿™é“é¢˜çš„åº•éƒ¨æœ‰ä¸€ä¸ªè¿›é˜¶è¦æ±‚ï¼š\n\nè¿›é˜¶ï¼š\n\nå°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ ä¸‰ç§ ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nä½ å¯ä»¥ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ åŸåœ° ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—\n\n\næ­£å¥½æœ€è¿‘å­¦ä¹ äº†ç©ºé—´å¤æ‚åº¦å’Œæ—¶é—´å¤æ‚åº¦ï¼Œè¿™é‡Œå¯ä»¥ç”¨äºç»ƒä¹ \n\næ–¹æ³•1-åŸºæœ¬æ–¹æ³•æœ€åŸºæœ¬çš„æ–¹æ³•å°±æ˜¯ç›´æ¥æ—‹è½¬ï¼ŒæŠŠæœ€åä¸€ä½æ•°å­—ç§»åŠ¨åˆ°æ•°ç»„çš„ç¬¬ä¸€ä½ï¼Œç„¶åå°†ç¬¬äºŒä½å¼€å§‹çš„æ¯ä¸€ä½å¾€å‰ç§»åŠ¨ä¸€ä½\n\néœ€è¦å…ˆæ‰§è¡Œç§»åŠ¨æ“ä½œå†æ›¿æ¢ç¬¬ä¸€ä¸ªæ•°\n\nvoid rotate(int* nums, int numsSize, int k) &#123;    k %= numsSize;    for (int i = 0; i &lt; k; i++)    &#123;        int tmp = nums[numsSize - 1];        for (int j = numsSize - 1; j &gt;0; j--)        &#123;            nums[j] = nums[j-1];        &#125;        nums[0] = tmp;    &#125;    return;&#125;\n\nè¿™ç§ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(k*N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)\nè¿™é“é¢˜çš„kæ˜¯å¸¸æ•°ï¼Œå¯ä»¥çœç•¥\n\nä½†å¾ˆä¸å¹¸ï¼Œå®ƒåœ¨è·‘leetcodeä¸­éå¸¸é•¿çš„æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ï¼Œè¿˜æ˜¯æ²¡æœ‰è·‘è¿‡å»ï¼Œè¶…æ—¶äº†\n\næ–¹æ³•2-é¢å¤–å¼€ä¸€ä¸ªæ•°ç»„è¿™ç§æ–¹æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œé¢å¤–å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨éœ€è¦æ—‹è½¬çš„å‡ ä¸ªæ•°å­—ï¼Œç„¶åå°†å®ƒä»¬ä¹‹å‰çš„æ•°æ®å­˜å‚¨åˆ°è¯¥æ•°ç»„çš„ååŠéƒ¨åˆ†\næœ€åå†æŠŠæ–°æ•°ç»„å¤åˆ¶å›åŸæ¥çš„æ•°ç»„ä¸­\nvoid rotate(int* nums, int numsSize, int k) &#123;    k %= numsSize;    int* num1 = (int*)malloc(sizeof(int) * numsSize);    int h = 0;    for (int i = numsSize - k; i &lt; numsSize; i++)    &#123;        num1[h++] = nums[i];    &#125;    for (int i = 0; i &lt; numsSize - k; i++)    &#123;        num1[i + k] = nums[i];    &#125;    memcpy(nums, num1, sizeof(int) * numsSize);    return;&#125;\n\nè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(N)\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€åçš„æ‰§è¡Œç»“æœåªæ‰“è´¥äº†leetcodeå¾ˆå°ä¸€éƒ¨åˆ†äºº\n\nåŒæ—¶è¿™ä¸ªç®—æ³•ä¹Ÿä¸ç¬¦åˆè¿›é˜¶è¦æ±‚ä¸­çš„â€œåŸåœ°â€\n\næ–¹æ³•3-ä¸‰æ—‹æ³•ï¼ˆæœ€ä¼˜ï¼‰å’Œä¸Šé¢ä¸¤ä¸ªæ–¹æ³•ç›¸æ¯”ï¼Œä¸‰æ—‹æ³•ç›¸å¯¹æ¥è¯´è¾ƒä¼˜ï¼Œè€Œä¸”ç¬¦åˆé¢˜ç›®çš„è¿›é˜¶è¦æ±‚\nä½†æ˜¯å®ƒéœ€è¦ä¸€å®šçš„ç†è§£èƒ½åŠ›ï¼š\nå‡è®¾æˆ‘ä»¬éœ€è¦æ—‹è½¬3ä¸ªæ•°å­—\n\nå…ˆå°†å‰SZ-Kä¸ªæ•°å­—é€†ç½®\nå†å°†åkä¸ªæ•°å­—é€†ç½®\næœ€åæ•´ä½“é€†ç½®\n\nè¿™æ ·å°±èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼\n1 2 3 4 5 6 7 //æ—‹è½¬3ä¸ª4 3 2 1 5 6 7 //å…ˆé€†ç½®å‰7-3=4ä¸ª4 3 2 1 7 6 5 //å†é€†ç½®å3ä¸ª5 6 7 1 2 3 4 //æœ€åæ•´ä½“é€†ç½®ï¼Œå³ä¸ºç»“æœ\n\nä»£ç å¦‚ä¸‹\nvoid Swap(int* nums, int sz)&#123;    int i = 0;    while (i &lt;  (sz/2))    &#123;        int tmp = *(nums+i);        *(nums + i) = *(nums + sz - i-1);        *(nums + sz - i - 1) = tmp;        i++;    &#125;&#125;void rotate(int* nums, int numsSize, int k)&#123;    k%=numsSize;    Swap(nums,numsSize-k);    Swap(nums+numsSize-k,k);    Swap(nums,numsSize);    return ;&#125;\n\nè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ï¼Œç¬¦åˆé¢˜ç›®è¿›é˜¶è¦æ±‚\nå¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆæ‰§è¡Œç»“æœæ¯”ä¹‹å‰ä¼˜ç§€å¤šäº†ï¼\n\n230219é‡å†™æ­¤é¢˜ï¼Œç›¸åŒæ€è·¯ï¼›æ—‹è½¬ä¸‰æ¬¡ã€‚æ³¨æ„ä¸€å®šè¦å¤„ç†kï¼Œå¦åˆ™ä¼šæœ‰æ ˆæº¢å‡ºçš„é—®é¢˜\n// æ—‹è½¬å‚æ•°çš„ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰void ReverseArr(int* arr,int begin,int end)&#123;    while(begin&lt;end)    &#123;        int tmp = arr[end];        arr[end] = arr[begin];        arr[begin] = tmp;        end--;        begin++;    &#125;&#125;void rotate(int* nums, int numsSize, int k) &#123;    k%=numsSize;    ReverseArr(nums,numsSize-k,numsSize-1);    ReverseArr(nums,0,numsSize-k-1);    ReverseArr(nums,0,numsSize-1);    return;&#125;\n\n\n\nç»“è¯­å¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘æ”¯æŒä¸€ä¸‹ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","leetcode"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘JZ65:ä¸ç”¨å››åˆ™è¿ç®—ç¬¦å®ç°ä¸¤æ•°ç›¸åŠ ","url":"/posts/1481999994/","content":"[TOC]\né—®é¢˜æ¥æº\nç‰›å®¢ç½‘æ•°æ®ç»“æ„é¢˜ç›®ğŸ‘‰JZ65\n\né¢˜ç›®è¦æ±‚å¦‚å›¾\n\n\næ€è€ƒä¸èƒ½ä½¿ç”¨å››åˆ™è¿ç®—ï¼Œæ ¹æ®è¿‡å¾€çš„å­¦ä¹ ç»å†ï¼Œæˆ‘å”¯ä¸€èƒ½æƒ³åˆ°çš„å°±æ˜¯ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦\nä¾‹ï¼šä½¿ç”¨ä½æ“ä½œç¬¦è¿›è¡Œintå˜é‡äº¤æ¢\n\nä½æ“ä½œç¬¦çš„ä½¿ç”¨å…ˆæ¥å›é¡¾ä¸€ä¸‹ä½æ“ä½œç¬¦çš„ä½œç”¨\nä½æ“ä½œç¬¦æ“ä½œçš„æ˜¯æ•´å½¢çš„äºŒè¿›åˆ¶ä½ï¼Œå®ƒçš„æ“ä½œæ•°æ˜¯2ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ•´å‹çš„äºŒè¿›åˆ¶ä½\n\n&amp;æŒ‰ä½ä¸ï¼šå¯¹åº”çš„äºŒè¿›åˆ¶ å…¨ä¸º1æ‰æ˜¯1ï¼Œå¦åˆ™0\n|æŒ‰ä½æˆ–ï¼šå¯¹åº”çš„äºŒè¿›åˆ¶ æœ‰1ä¸º1ï¼Œå…¨ä¸º0æ‰ä¸º0\n^æŒ‰ä½å¼‚æˆ–ï¼šç›¸åŒä¸º0ï¼Œä¸åŒä¸º1\n\n\næ¯”è¾ƒä¸€ä¸‹æ­£å¸¸çš„äºŒè¿›åˆ¶ç›¸åŠ å’ŒæŒ‰ä½å¼‚æˆ–ï¼Œå‘ç°æŒ‰ä½å¼‚æˆ–æ˜¯æ²¡æœ‰è¿›ä½çš„ç›¸åŠ \n\n\nåŸæœ¬åº”è¯¥æ˜¯010ï¼Œä½†æ˜¯æŒ‰ä½å¼‚æˆ–åæ˜¯000\n1+1éœ€è¦è¿›ä½çš„1å¹¶æ²¡æœ‰è¿›åˆ°ä¸‹ä¸€ä½é‡Œå»\n\nè€Œä½¿ç”¨æŒ‰ä½ä¸æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°è¿™ä¸¤ä¸ªæ•°ç›¸åŠ éœ€ä¸éœ€è¦è¿›ä½\n0 0 10 0 1//æŒ‰ä½ä¸-å…¨1ä¸º10 0 1//&lt;&lt; -å·¦ç§»1ä½0 1 0\n\nè¿™æ—¶å€™å°†æŒ‰ä½ä¸ä¹‹åçš„ç»“æœå’ŒæŒ‰ä½å¼‚æˆ–ç›¸åŠ ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ç­”æ¡ˆäº†\nä½†æ˜¯é¢˜ç›®è¦æ±‚ä¸èƒ½ä½¿ç”¨åŠ å‡\n\nå†å°†æŒ‰ä½ä¸çš„ç»“æœ0 1 0ä¸ æŒ‰ä½å¼‚æˆ–ç»“æœ0 0 0è¿›è¡ŒæŒ‰ä½ä¸\nå¾—åˆ°0 0 0 ï¼Œä»£è¡¨æ— éœ€è¿›ä½\nè¿™æ—¶å€™å°†0 1 0ä¸0 0 0 è¿›è¡ŒæŒ‰ä½å¼‚æˆ–ï¼Œå³å¾—å‡ºç›¸åŠ åçš„ç»“æœ0 1 0\n\n\nè¿™ä¸ªä¾‹å­æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥å†ç”¨å¤æ‚ä¸€ç‚¹çš„ä¾‹å­å†è¯æ˜å®ƒçš„å¯è¡Œæ€§\n3ï¼š0011å’Œ5ï¼š0101\n\n\n\næ“ä½œ\nç»“æœ\n\n\n\n\n1ï¼šæŒ‰ä½ä¸å’Œå·¦ç§»\n0 0 1 0\néœ€è¦è¿›ä½\n\n\n2ï¼šæŒ‰ä½å¼‚æˆ–\n0 1 1 0\n\n\n\n3ï¼š1å’Œ2æŒ‰ä½ä¸ï¼Œå·¦ç§»\n0 1 0 0\néœ€è¦è¿›ä½\n\n\n4ï¼š1å’Œ2æŒ‰ä½å¼‚æˆ–\n0 1 0 0\n\n\n\n5ï¼š3å’Œ4æŒ‰ä½ä¸ï¼Œå·¦ç§»\n1 0 0 0\néœ€è¦è¿›ä½\n\n\n6ï¼š3å’Œ4æŒ‰ä½å¼‚æˆ–\n0 0 0 0\n\n\n\n7ï¼š5å’Œ6æŒ‰ä½ä¸ï¼Œå·¦ç§»\n0 0 0 0\næ— éœ€è¿›ä½\n\n\n8ï¼š5å’Œ6æŒ‰ä½å¼‚æˆ–\n1 0 0 0\nå¾—åˆ°ç»“æœä¸º8\n\n\næ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å®Œæˆäº†3å’Œ5çš„ç›¸åŠ \n\nä»£ç å®ç°æœ¬é¢˜æ˜¯æ¥å£å‹é¢˜ç›®ï¼Œæˆ‘ä»¬åªéœ€è¦å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œå®ç°ç›¸åŠ çš„åŠŸèƒ½\n/** * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯ * *  * @param num1 intæ•´å‹  * @param num2 intæ•´å‹  * @return intæ•´å‹ * * Cè¯­è¨€å£°æ˜å®šä¹‰å…¨å±€å˜é‡è¯·åŠ ä¸Šstaticï¼Œé˜²æ­¢é‡å¤å®šä¹‰ */int Add(int num1, int num2) &#123;    while(num2)    &#123;        int t = (num1 &amp; num2) &lt;&lt; 1;        num1 ^= num2;        num2 = t;    &#125;    return num1;&#125;\n\nä¸è¿‡æˆ‘ä»¬å¯ä»¥è‡ªå·±å†™ä¸€ä¸ªä¸»å‡½æ•°æ¥æµ‹è¯•å®ƒçš„å¯è¡Œæ€§\nå¦‚å›¾ï¼Œå‡½æ•°æ­£ç¡®ç®—å‡ºäº†ä¸¤ä¸ªæ•°çš„å’Œ\n\n\nå¦‚æœè¿™ç¯‡åšå®¢å¸®åˆ°äº†ä½ ï¼Œè¿˜è¯·ç‚¹ä¸ªèµå•¦~\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","ç‰›å®¢ç½‘"]},{"title":"ã€ç®—æ³•ã€‘KMPç®—æ³•","url":"/posts/1835761968/","content":"å‚è€ƒã€Šä»£ç éšæƒ³å½•ã€‹ã€‚\n1.ä»‹ç»KMPç®—æ³•æ˜¯è§£å†³å­—ç¬¦ä¸²é—®é¢˜æ—¶æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªç®—æ³•ï¼Œå®ƒå¯ä»¥å°†æš´åŠ›ç ´è§£æ³•çš„æ—¶é—´å¤æ‚åº¦O(N^2)é™ä½åˆ°O(M+N)ï¼Œæ•ˆç‡æœ‰ä¸é”™çš„æå‡ã€‚\nKMPç®—æ³•ç”±Knuthã€Morriså’ŒPrattä¸‰ä½å­¦è€…å‘æ˜ï¼Œä¹Ÿå› æ­¤å¾—åKMPã€‚\n1.1 next å‰ç¼€è¡¨KMPç®—æ³•çš„æ ¸å¿ƒæ˜¯nextæ•°ç»„ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªå‰ç¼€è¡¨ï¼šè®°å½•ä¸‹æ ‡iï¼ˆåŒ…æ‹¬iï¼‰ä¹‹å‰çš„å­—ç¬¦ä¸²ä¸­æœ‰å¤šé•¿çš„ç›¸åŒå‰åç¼€ã€‚\né¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®å‰ç¼€å’Œåç¼€çš„æ¦‚å¿µï¼šé™¤äº†æœ€åä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²å…¶ä½™éƒ¨åˆ†éƒ½å¯ç§°ä¹‹ä¸ºå‰ç¼€ï¼›é™¤äº†ç¬¬ä¸€ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²å…¶ä½™éƒ¨åˆ†éƒ½å¯ä»¥ç§°ä¹‹ä¸ºåç¼€ã€‚\nå­—ç¬¦ä¸²ï¼šabbaæœ€é•¿å‰ç¼€ï¼šabbæœ€é•¿åç¼€ï¼šbbaå­—ç¬¦ä¸²ï¼šaaæœ€é•¿å‰ç¼€ï¼šaæœ€é•¿åç¼€ï¼šaå­—ç¬¦ä¸²ï¼šaæ²¡æœ‰å‰ç¼€å’Œåç¼€\n\nç›¸åŒå‰åç¼€å°±æ˜¯çœ‹å‰ç¼€å’Œåç¼€çš„ç›¸åŒéƒ¨åˆ†ï¼›æ¯”å¦‚å­—ç¬¦ä¸²abbaï¼Œå‰ç¼€å’Œåç¼€ä¸­åªæœ‰å­—ç¬¦ä¸²aæ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥è¿™ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒå‰åç¼€åªæœ‰1ã€‚\nè€ŒKMPç®—æ³•ä¸­çš„nextæ•°ç»„ï¼Œå°±æ˜¯å­˜æ”¾è¿™ä¸ªæœ€é•¿ç›¸åŒå‰åç¼€æ•°é‡çš„ã€‚ä»¥å­—ç¬¦ä¸²aabaafä¸ºä¾‹\n\n\n\nä¸‹æ ‡\nå­—ç¬¦ä¸²\næœ€å¤§ç›¸åŒå‰åç¼€\n\n\n\n0\na\n0\n\n\n1\naa\n1\n\n\n2\naab\n0\n\n\n3\naaba\n1\n\n\n4\naabaa\n2\n\n\n5\naabaaf\n0\n\n\nå¯¹aabaafå­—ç¬¦ä¸²è€Œè¨€ï¼Œæœ€ç»ˆå¾—åˆ°çš„KMPç®—æ³•nextæ•°ç»„å­˜æ”¾çš„å°±æ˜¯&#123;0,1,0,1,2,0&#125;ï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯è¯¥å­—ç¬¦ä¸²çš„å‰ç¼€è¡¨ã€‚\n1.2 nextæ•°ç»„çš„ä½œç”¨é‚£ä¹ˆè¿™ä¸ªnextæ•°ç»„æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿç»™å‡ºä¸€ä¸ªç¤ºä¾‹é¢˜ç›®ï¼šè®©ä½ åœ¨aabaabaafä¸­æŸ¥æ‰¾æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²aabaafï¼›\n\nå‡è®¾æˆ‘ä»¬ä½¿ç”¨æš´åŠ›æ³•ï¼Œå½“åŒ¹é…åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ä¸ç›¸åŒæ—¶ï¼Œä¼šå°†æºä¸²ä¸‹æ ‡+1ï¼Œç„¶åé‡æ–°åŒ¹é…å­ä¸²ã€‚\nä½†ä»”ç»†è§‚å¯Ÿä½ ä¼šå‘ç°ï¼Œè™½ç„¶è¿™é‡Œæºå­—ç¬¦ä¸²å’Œå­ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦fä¸åŒ¹é…ï¼Œä½†å‰é¢ä¸‰ä¸ªaabæ˜¯å·²ç»åŒ¹é…ä¸Šçš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä»è¿™ä¸ªå·²ç»åŒ¹é…ä¸Šçš„å­—ç¬¦ä¸²å¾€åæ‰¾ï¼Œä¼šå‘ç°æœ€ç»ˆå¯ä»¥æ‰¾åˆ°å­å­—ç¬¦ä¸²aabaafã€‚\n\nnextæ•°ç»„å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å½“å‘ç°ä¸åŒ¹é…æ—¶ï¼Œå›æº¯åˆ°å½“å‰ä½ç½®å‰ä¸€ä¸ªçš„nextæ•°ç»„ä¸­æ‰€å¯¹åº”å…ƒç´ çš„ä¸‹æ ‡ä½ç½®ã€‚ä¸‹å›¾ä¸­fæ˜¯ä¸‹æ ‡5ï¼Œé‚£ä¹ˆå°±éœ€è¦å›æº¯åˆ°next[5-1]çš„ä¸‹æ ‡å¤„ï¼Œå³å›æº¯åˆ°å­ä¸²ä¸­çš„ä¸‹æ ‡2ä½ç½®ï¼Œé‡æ–°å¼€å§‹åŒ¹é…ã€‚\n\næ­¤æ—¶ä¼šå‘ç°ä¸‹æ ‡2çš„ä½ç½®å’Œå½“å‰æºä¸²çš„å­—ç¬¦ç›¸åŒï¼Œç»§ç»­å¾€ååŒ¹é…å­ä¸²ï¼Œèƒ½æ‰¾åˆ°å®Œæ•´çš„å­ä¸²ã€‚\n\né€šè¿‡nextæ•°ç»„ï¼ŒæŠŠåŸæœ¬éœ€è¦é‡æ–°éå†çš„æ–¹å¼æ”¹ä¸ºä»ä¸Šä¸€ä¸ªå¯ä»¥è¢«åŒ¹é…çš„ä½ç½®é‡æ–°å¼€å§‹åŒ¹é…ï¼Œå°±èŠ‚çœäº†æ—¶é—´ã€‚\n1.3 ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå‰ç¼€è¡¨è®°å½•äº†æœ€é•¿ç›¸åŒå‰åç¼€çš„ä¿¡æ¯ï¼Œå½“æˆ‘ä»¬åŒ¹é…ä¸ä¸Šçš„æ—¶å€™ï¼Œæ‰¾åˆ°å‰ä¸€ä¸ªä¸‹æ ‡å¯¹åº”å‰ç¼€è¡¨å†…çš„æ•°æ®ï¼Œå°±èƒ½å¾—åˆ°å½“å‰å­—ç¬¦ä»¥å‰çš„å­—ç¬¦ä¸²æ˜¯å¦æœ‰ç›¸åŒçš„å‰ç¼€ã€‚\nä¸‹æ ‡æ•° 0 1 2 3 4 5å­—ç¬¦ä¸² a a b a a få‰ç¼€è¡¨ 0 1 0 1 2 0\n\nå½“fåŒ¹é…ä¸ä¸Šçš„æ—¶å€™ï¼Œå‰ä¸€ä½åœ¨å‰ç¼€è¡¨ä¸­ä¸º2ï¼Œä»£è¡¨å¾€å‰ä¸€å…±æœ‰2ä¸ªå­—ç¬¦ï¼ˆåç¼€ï¼‰ï¼Œå’Œæ•´ä¸ªå­—ç¬¦ä¸²çš„å‰2ä½æ˜¯ç›¸åŒçš„ï¼ˆå³aabaaé‡Œé¢åç¼€çš„aaå’Œå‰ç¼€çš„aaç›¸åŒï¼Œè¿™é‡Œçš„å‰ç¼€aaä¹Ÿæ˜¯å­—ç¬¦ä¸²çš„èµ·å§‹ä¸¤ä¸ªå­—ç¬¦ï¼‰ã€‚\nè¿™èƒ½å‘Šè¯‰æˆ‘ä»¬ï¼ŒåˆšåˆšåŒ¹é…çš„å­—ç¬¦ä¸²ä¸­ï¼Œåç¼€éƒ¨åˆ†åŒ¹é…æˆåŠŸäº†2ä¸ªaaï¼ˆä¸ç„¶ä¹Ÿèµ°ä¸åˆ°fè¿™é‡Œæ¥ï¼‰ï¼Œå¯ä»¥æŠŠè¿™ä¸ªåç¼€çš„2ä¸ªaaå½“ä½œå‰ç¼€çš„2ä¸ªaaæ¥å¤„ç†ï¼Œè€ŒæŒ‡é’ˆåªéœ€è¦å›æº¯åˆ°å‰ç¼€aaçš„ä¸‹ä¸€ä¸ªå­—ç¬¦é‡æ–°å¼€å§‹åŒ¹é…å³å¯ï¼Œå¯¹äºæ•°ç»„è€Œè¨€ï¼Œä¸‹ä¸€ä¸ªå­—ç¬¦çš„ä¸‹æ ‡å°±æ˜¯å‰ç¼€è¡¨ä¸­çš„æ•°å­—ã€‚\n\n1.4 è·å–ä¸€ä¸ªå­—ç¬¦ä¸²çš„nextæ•°ç»„è·å–nextæ•°ç»„æœ‰å‡ ç§å®ç°æ–¹å¼\n\nå°†å‰ç¼€è¡¨ä¸­çš„æ•°æ®å…¨éƒ¨å‡ä¸€ï¼›\nå°†å‰ç¼€è¡¨ä¸­çš„æ•°æ®æ•´ä½“å³ç§»ä¸€ä½ï¼›\nç›´æ¥ä½¿ç”¨å‰ç¼€è¡¨ï¼›\n\nä¸ªäººæ›´åŠ å–œæ¬¢ç›´æ¥ä½¿ç”¨å‰ç¼€è¡¨çš„æ–¹å¼ï¼Œå› ä¸ºåŸç†å°±æ˜¯è¿™ä¹ˆå­¦çš„ï¼Œç›´æ¥ä½¿ç”¨å‰ç¼€è¡¨ä¹Ÿæ¯”è¾ƒå¥½åŠ¨æ‡‚ä¸€äº›ã€‚æ„é€ å‰ç¼€è¡¨çš„ä»£ç å¦‚ä¸‹ï¼Œè¿™ä¸ªä»£ç çš„é€»è¾‘å¯èƒ½æ²¡æœ‰é‚£ä¹ˆå¥½æ‡‚ï¼Œæœ€å¥½æ˜¯æƒ³åŠæ³•èƒŒä¸‹æ¥ï¼\nvoid getNext(int* next,const std::string&amp; s)&#123;\tint j = 0;\tnext[0] = 0; // åˆå§‹åŒ–nextæ•°ç»„ç¬¬ä¸€ä½ï¼ˆç¬¬ä¸€ä½æ˜¯ä¸å­˜åœ¨å‰ç¼€å’Œåç¼€ï¼Œè‚¯å®šä¸º0ï¼‰\tfor(int i=1;i&lt;s.size();i++) //éå†è¦ä»å­—ç¬¦ä¸²ç¬¬äºŒä½å¼€å§‹\t&#123;\t\t// åç»­éœ€è¦å–j-1ä½œä¸ºä¸‹æ ‡çš„æ“ä½œï¼Œæ‰€ä»¥jå¿…é¡»å¤§äº0\t\t// å½“jå’Œiçš„å­—ç¬¦äºŒè€…ä¸åŒ¹é…çš„æ—¶å€™ï¼Œå°±éœ€è¦å¾€å‰å›æº¯\t\twhile(j&gt;0 &amp;&amp; s[i] != s[j])\t\t&#123;\t\t\tj = next[j-1]; // å›æº¯åˆ°å‰ä¸€ä½ä¸‹æ ‡åœ¨nextæ•°ç»„ä¸­çš„å…ƒç´ \t\t&#125;\t\t// äºŒè€…åŒ¹é…ï¼Œj+1\t\tif(s[i] == s[j])\t\t&#123;\t\t\tj++;\t\t&#125;\t\t// èµ‹å€¼nextæ•°ç»„\t\tnext[i] = j;\t&#125;&#125;\n\næµ‹è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸè·å¾—åˆšåˆšè®¡ç®—å‡ºæ¥çš„å‰ç¼€è¡¨\nint main()&#123;\tstring test = &quot;aabaaf&quot;;\tint next[10];\tgetNext(next, test);\tfor (int i = 0; i &lt; test.size(); i++)\t&#123;\t\tcout &lt;&lt; next[i] &lt;&lt; &quot; &quot;;\t&#125;\tcout &lt;&lt; &quot;\\n&quot;;\treturn 0;&#125;\n\nè¾“å‡º\n0 1 0 1 2 0\n\n2.leetcode-28-æ‰¾åˆ°å­ä¸²å¹¶è¿”å›èµ·å§‹ä¸‹æ ‡28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡\né¢˜ç›®ï¼šç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² haystack å’Œ needle ï¼Œè¯·ä½ åœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ needle ä¸æ˜¯ haystack çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å›  -1 ã€‚\nè¿™é“é¢˜å°±æ˜¯å­¦ä¹ KMPç®—æ³•çš„ç»å…¸é¢˜ç›®ï¼Œæ€è·¯å‰æ–‡å·²ç»æè¿°è¿‡äº†ï¼Œè¿™é‡Œåªç»™å‡ºä»£ç ã€‚\nclass Solution &#123;    public:    void getNext(int* next,const std::string&amp; s)    &#123;        int j = 0;        next[0] = 0; // åˆå§‹åŒ–nextæ•°ç»„ç¬¬ä¸€ä½ï¼ˆç¬¬ä¸€ä½æ˜¯ä¸å­˜åœ¨å‰ç¼€å’Œåç¼€ï¼Œè‚¯å®šä¸º0ï¼‰        for(int i=1;i&lt;s.size();i++) //éå†è¦ä»å­—ç¬¦ä¸²ç¬¬äºŒä½å¼€å§‹        &#123;            // åç»­éœ€è¦å–j-1ä½œä¸ºä¸‹æ ‡çš„æ“ä½œï¼Œæ‰€ä»¥jå¿…é¡»å¤§äº0            // å½“jå’Œiçš„å­—ç¬¦äºŒè€…ä¸åŒ¹é…çš„æ—¶å€™ï¼Œå°±éœ€è¦å¾€å‰å›æº¯            while(j&gt;0 &amp;&amp; s[i] != s[j])            &#123;                j = next[j-1]; // å›æº¯åˆ°å‰ä¸€ä½ä¸‹æ ‡åœ¨nextæ•°ç»„ä¸­çš„å…ƒç´             &#125;            // äºŒè€…åŒ¹é…ï¼Œj+1            if(s[i] == s[j])            &#123;                j++;            &#125;            // èµ‹å€¼nextæ•°ç»„            next[i] = j;        &#125;    &#125;    int strStr(string haystack, string needle) &#123;        // å­ä¸²ä¸ºç©ºè‚¯å®šæ‰¾ä¸åˆ°        if(needle.size() == 0)&#123;            return -1;        &#125;        int next[needle.size()];        getNext(next,needle);        int j=0;        for(int i=0;i&lt;haystack.size();i++)        &#123;            while(j&gt;0 &amp;&amp; haystack[i] != needle[j])            &#123;                j = next[j-1]; // å¾€å‰å›æº¯ä¸€ä½            &#125;            if(haystack[i] == needle[j])&#123;                j++;            &#125;            // jå·²ç»è¶…å‡ºå¤§å°ï¼Œè¯´æ˜å­ä¸²å®Œå…¨åŒ¹é…ï¼ŒæˆåŠŸã€‚            if(j&gt;=needle.size())            &#123;                return (i - needle.size() + 1); // è¿”å›å­ä¸²çš„èµ·å§‹ä¸‹æ ‡            &#125;        &#125;        return -1;//æ²¡æ‰¾åˆ°    &#125;&#125;;\n\né¢˜è§£é€šè¿‡\n\n3.leetcode-459-é‡å¤çš„å­å­—ç¬¦ä¸²3.1 é¢˜ç›®459. é‡å¤çš„å­å­—ç¬¦ä¸²\nç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸² s ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚\nç¤ºä¾‹ 1:è¾“å…¥: s = &quot;abab&quot;è¾“å‡º: trueè§£é‡Š: å¯ç”±å­ä¸² &quot;ab&quot; é‡å¤ä¸¤æ¬¡æ„æˆã€‚ç¤ºä¾‹ 2:è¾“å…¥: s = &quot;aba&quot;è¾“å‡º: false\n\n3.2 è§£é‡Šè¿™é“é¢˜åŒæ ·å¯ä»¥ç”¨KMPç®—æ³•æ¥è§£å†³ï¼Œå› ä¸ºå‰ç¼€è¡¨é—´æ¥åŒ…å«äº†å½“å‰å­—ç¬¦ä¸²æ˜¯å¦èƒ½é€šè¿‡æŸä¸ªå­ä¸²é‡å¤æ„æˆçš„åŠŸèƒ½ã€‚\nå‡è®¾ç›®æ ‡å­—ç¬¦ä¸²é•¿åº¦ä¸ºlenï¼Œå‰ç¼€è¡¨ä¸ºnextæ•°ç»„ï¼Œé‚£ä¹ˆnext[len-1]æ˜¯å‰ç¼€è¡¨çš„æœ€åä¸€ä½ï¼Œä¿å­˜äº†å®Œæ•´å­—ç¬¦ä¸²çš„æœ€é•¿ç›¸åŒå‰åç¼€çš„é•¿åº¦ã€‚\n$$len % (len - next[len-1])&#x3D;0$$\nå¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦èƒ½ æ•´é™¤ å­—ç¬¦ä¸²çš„é•¿åº¦å‡å»next[len-1]ï¼Œåˆ™ä»£è¡¨å­—ç¬¦ä¸²èƒ½è¢«é‡å¤çš„å­ä¸²å¾ªç¯æ„æˆï¼\nè§‚å¯Ÿä¸‹é¢è¿™ä¸ªå­—ç¬¦ä¸²å’Œå®ƒçš„å‰ç¼€è¡¨ï¼Œæœ€åä¸€ä½çš„æ•°æ®æ˜¯6ï¼Œæ•´ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯9ï¼Œè¿™ä»£è¡¨ï¼Œæ•´ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œæœ€é•¿ç›¸åŒå‰ç¼€å’Œåç¼€æœ‰3ä¸ªå­—ç¬¦æ˜¯é‡åˆçš„éƒ¨åˆ†ï¼Œä¸”å­—ç¬¦ä¸²çš„å‰ç¼€3ä¸ªå­—ç¬¦å’Œåç¼€3ä¸ªå­—ç¬¦éƒ½å’Œä¸­é—´è¿™ä¸ªé‡å¤çš„ä¸‰ä¸ªå­—ç¬¦ç›¸åŒï¼\nå­—ç¬¦ä¸² abcabcabcå‰ç¼€è¡¨ 000123456æºä¸² abcabcabcå‰ç¼€ abcabcåç¼€    abcabc\n\nå¦‚ä¸‹æ‰€ç¤ºï¼Œä¸­é—´ä¸‰ä¸ªå­—ç¬¦abcæ˜¯åœ¨å‰åç¼€ä¸­é‡åˆçš„ï¼Œè€Œå‰ç¼€ç¬¬ä¸€ä¸ªabcåˆèƒ½å’Œåç¼€çš„å‰ä¸€ä¸ªabcåŒ¹é…ä¸Šï¼Œåç¼€çš„æœ«å°¾abcåˆèƒ½å’Œä¸­é—´é‡å¤çš„éƒ¨åˆ†åŒ¹é…ä¸Šï¼Œåˆ™ä»£è¡¨æ•´ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ç”±abcå¾ªç¯æ„æˆçš„ã€‚\n\nè€Œä¾æ®ä¸Šè¿°çš„å…¬å¼è®¡ç®—ï¼Œ9/(9-6) = 3ï¼Œå¯ä»¥è¢«æ•´é™¤ï¼Œå³ç¬¦åˆå¾ªç¯æ„æˆçš„æ¡ä»¶ï¼\næè¿°çš„å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œä¼°è®¡è¿‡å‡ å¤©å›å¤´çœ‹æˆ‘è‡ªå·±ä¹Ÿçœ‹ä¸æ‡‚äº†â€¦â€¦ğŸ¤£\n3.3 ä»£ç class Solution &#123;public:    void getNext(int* next,const std::string&amp; s)    &#123;        int j = 0;        next[0] = 0; // åˆå§‹åŒ–nextæ•°ç»„ç¬¬ä¸€ä½ï¼ˆç¬¬ä¸€ä½æ˜¯ä¸å­˜åœ¨å‰ç¼€å’Œåç¼€ï¼Œè‚¯å®šä¸º0ï¼‰        for(int i=1;i&lt;s.size();i++) //éå†è¦ä»å­—ç¬¦ä¸²ç¬¬äºŒä½å¼€å§‹        &#123;            // åç»­éœ€è¦å–j-1ä½œä¸ºä¸‹æ ‡çš„æ“ä½œï¼Œæ‰€ä»¥jå¿…é¡»å¤§äº0            // å½“jå’Œiçš„å­—ç¬¦äºŒè€…ä¸åŒ¹é…çš„æ—¶å€™ï¼Œå°±éœ€è¦å¾€å‰å›æº¯            while(j&gt;0 &amp;&amp; s[i] != s[j])            &#123;                j = next[j-1]; // å›æº¯åˆ°å‰ä¸€ä½ä¸‹æ ‡åœ¨nextæ•°ç»„ä¸­çš„å…ƒç´             &#125;            // äºŒè€…åŒ¹é…ï¼Œj+1            if(s[i] == s[j])            &#123;                j++;            &#125;            // èµ‹å€¼nextæ•°ç»„            next[i] = j;        &#125;    &#125;    bool repeatedSubstringPattern(string s) &#123;        int next[s.size()];        getNext(next,s);        size_t len = s.size();        if(next[len-1] != 0 &amp;&amp; (len%(len-next[len-1])) == 0)&#123;            return true;        &#125;        return false;    &#125;&#125;;\n\n\nThe endKMPç®—æ³•æœ‰ç‚¹ä¸å¥½ç†è§£ï¼ŒæŠŠnextæ•°ç»„çš„æ„å»ºèƒŒä¸‹æ¥å°±å·®ä¸å¤šå¾—äº†â€¦â€¦\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["ç®—æ³•","Cpp","KMP"]},{"title":"ã€leetcodeã€‘LCR177ï¼šæ’è‰²æ­é…ï¼Œæ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°","url":"/posts/2188918016/","content":"[TOC]\né¢˜ç›®è¯´æ˜\næ¥æºï¼šå‰‘æŒ‡ Offer 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°å¦å¤–ï¼Œ260åªå‡ºç°ä»¥æ­¤çš„æ•°å­—3è¿™é“é¢˜å’Œæœ¬é¢˜æ˜¯ä¸€æ ·çš„ã€‚2023å¹´å†å›å¤´çœ‹ï¼Œå‰‘æŒ‡offeråœ¨leatcodeä¸Šæ”¹åæˆlcräº†ã€‚æ‰€ä»¥æœ¬æ–‡æ ‡é¢˜ä¹Ÿæ›´æ–°ä¸€ä¸‹ã€‚\n\néš¾åº¦ï¼šä¸­ç­‰\nä¸€ä¸ªæ•´å‹æ•°ç»„ nums é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [4,1,4,6]è¾“å‡ºï¼š[1,6] æˆ– [6,1]\n\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,10,4,1,4,3,3]è¾“å‡ºï¼š[2,10] æˆ– [10,2]\n\n\né™åˆ¶ï¼š2 &lt;= nums.length &lt;= 10000\n\næ–¹æ³•1ï¼šå¸¸è§„åšæ³•æœ€å®¹æ˜“æƒ³åˆ°çš„å¸¸è§„åšæ³•ï¼š\n\nå…ˆå¯¹è¯¥æ•°ç»„è¿›è¡Œqsortæ’åºï¼Œå†ç”¨forå¾ªç¯éå†ï¼Œæ‰¾åˆ°æ•°ç»„ä¸­ä¸‹æ ‡iå’Œi+1ä¸ç›¸ç­‰çš„å“ªä¸€é¡¹ï¼Œè¿™ä¸€é¡¹iå³ä¸ºåªå‡ºç°äº†ä¸€æ¬¡çš„æ•°å­—ã€‚\n\nè‹¥æœ€æœ«å°¾çš„æ•°æ˜¯ç›®æ ‡æ•°ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­å¹¶breakï¼Œé˜²æ­¢è¶Šç•Œè®¿é—®æ•°ç»„\n\n\n\nå¦‚æœä½ ä¸äº†è§£qsortï¼Œå¯ä»¥çœ‹è¿™ç¯‡åšå®¢å­¦ä¹ ä¸€ä¸‹ğŸ‘‰ç‚¹æˆ‘\n\n//æ–¹æ³•1ï¼Œå¤ªè¿‡ç®€å•ï¼Œä¸å¤Ÿé«˜çº§cmp(const void* e1, const void* e2)&#123;    return *(int*)e1 - *(int*)e2;&#125;int* singleNumbers(int* nums, int numsSize, int* returnSize) &#123;    int* result = (int*)calloc(2, sizeof(int));    int k = 0;    qsort(nums, numsSize, sizeof(int), cmp);//å¯¹åŸæ•°ç»„è¿›è¡Œæ’åº    int i = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        if (i == numsSize-1)//å¦‚æœiæ˜¯æœ«å°¾æ•°ï¼Œéœ€è¦è¿›è¡Œåˆ¤æ–­        &#123;            result[k] = nums[i];            break;        &#125;        if (nums[i] == nums[i + 1])        &#123;            i ++;        &#125;        else        &#123;            result[k] = nums[i];            k++;        &#125;    &#125;    *returnSize = 2;    return result;&#125;\n\n\næ–¹æ³•2ï¼šå¼‚æˆ–æ±‚è§£å¤ä¹ ä¸€ä¸‹ä½æ“ä½œç¬¦å¾ˆå°¬å°´çš„æ˜¯ï¼Œæœ¬äººå¯¹ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦å¹¶ä¸ç†Ÿæ‚‰ã€‚ç»å¸¸æŠŠå®ƒä»¬è®°æ··ã€‚å‡ æ¬¡æµ‹è¯•çš„æ—¶å€™ï¼Œæ¶‰åŠåˆ°è¿™ä¸¤ä¸ªæ“ä½œç¬¦çš„é¢˜ç›®å°±æ˜¯çè’™ã€‚\nåæ¥å‘ç°ä½æ“ä½œç¬¦å’Œç§»ä½æ“ä½œç¬¦ä¼¼ä¹æ˜¯æµ‹è¯•ä¸­ç»å¸¸è€ƒå¯Ÿçš„å¯¹è±¡ï¼Œè¿™é‡Œå»ºè®®å¤§å®¶ä¸€å®šè¦æŠŠå®ƒä»¬å¼„æ‡‚ï¼\n\n\n\nè¯­å¥\næ“ä½œç¬¦\nå¯¹åº”ç»“æœ\n\n\n\nc &#x3D; a &amp; b\n&amp;æŒ‰ä½ä¸\nå…¨1ä¸º1ï¼Œå¦åˆ™0\n\n\nc &#x3D; a | b\n| æŒ‰ä½æˆ–\næœ‰1ä¸º1ï¼Œå¦åˆ™0\n\n\nc &#x3D; a ^ b\n^æŒ‰ä½å¼‚æˆ–\nç›¸åŒä¸º0ï¼Œä¸åŒä¸º1\n\n\né¢˜è§£å¼‚æˆ–æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œa^a=0ï¼Œa^0=a\n\næ¡ˆä¾‹1è¾“å…¥ï¼šnums = [1,2,10,4,1,4,3,3]è¾“å‡ºï¼š[2,10] æˆ– [10,2]\n\nä»¥é¢˜ç›®æ‰€ç»™å‚è€ƒ2ä¸ºä¾‹\n1^2^10^4^1^4^3^3 = 2^10\n\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æŠŠæ‰€ç»™æ•°æ®å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œå…¶ç»“æœæ­£å¥½æ˜¯æˆ‘ä»¬éœ€è¦çš„ä¸¤ä¸ªæ•°ç›¸å¼‚æˆ–ã€‚\nä½†æ˜¯æˆ‘ä»¬å¥½åƒå¹¶æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•æŠŠå·²ç»å¼‚æˆ–äº†çš„ä¸¤ä¸ªæ•°æ‹†å¼€\nè¿™æ—¶å€™å°±éœ€è¦å¯¹å¾…æŸ¥æ‰¾çš„æ•°æ®è¿›è¡Œåˆ†ç»„\n\nåˆ†ç»„çš„ç›®çš„ï¼šè®©ä¸¤ä¸ªå•èº«ç‹—åˆ†å¼€åˆ°ä¸¤ç»„æ•°æ®ä¸­\nè¿™ä¸¤ç»„æ•°æ®ï¼Œé™¤ä¸¤ä¸ªå•èº«ç‹—å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡\n\n1 1 3 3 4 4 210\n\nä¸ºä»€ä¹ˆæ˜¯è¿™ä¹ˆåˆ†çš„å‘¢ï¼Ÿ\n10: 10102:  001010^2=1000\n\nå¯è§å•èº«ç‹—10å’Œ2ä¹‹é—´ï¼Œæºç ç¬¬å››ä½æ‰æœ‰å·®åˆ«\n1ï¼š 00012ï¼š 00103ï¼š 00114ï¼š 010010ï¼š1010\n\nè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç¬¬4ä½çš„å·®è·ï¼Œå°†æ•°æ®åˆ†ä¸ºä¸¤ç»„\n\nç¬¬ä¸€ç»„æ˜¯1~4ï¼Œå®ƒä»¬çš„ç¬¬4ä½éƒ½æ˜¯0\n\nç¬¬äºŒç»„æ˜¯10ï¼Œåªæœ‰å®ƒçš„ç¬¬å››ä½æ˜¯1\n\n\nå†æ ¹æ®å‰é¢å¼‚æˆ–çš„ç‰¹ç‚¹ï¼Œå¯¹è¿™ä¸¤ç»„æ•°å­—è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå³å¯å¾—åˆ°å•ç”Ÿç‹—10å’Œ2\n1^1^3^3^4^4^2 = 210 = 10\n\n\næ¡ˆä¾‹2ä¸Šé¢è¿™ç»„æ•°æ®æœ‰äº›ç‰¹æ®Šï¼Œç¬¬äºŒç»„é‡Œé¢åªæœ‰10ä¸€ä¸ªæ•°å­—\næˆ‘ä»¬å†æ¥çœ‹ä¸€ç»„æ•°æ®\n1 2 3 4 5 1 2 3 4 6\n\nè¿™ä¸€ç»„æ•°æ®ä¸­ï¼Œå•èº«ç‹—æ˜¯5å’Œ6\n5ï¼š01016ï¼š01105^6 = 0011\n\nå¯è§5å’Œ6çš„æºç ä¸­ï¼Œç¬¬ä¸€ã€äºŒä½éƒ½æœ‰åŒºåˆ«\nè¿™é‡Œæˆ‘ä»¬å–ç¬¬ä¸€ä½æ¥åˆ†ç±»å³å¯\n1ï¼š00012ï¼š00103ï¼š00114ï¼š01005ï¼š01016ï¼š0110\n\näºŒè¿›åˆ¶ç¬¬ä¸€ä½ä¸º1çš„æ•°ï¼Œæ”¾å…¥ä¸€ç»„\n1 1 3 3 52 2 4 4 6\n\nå¯¹å®ƒä»¬è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°å•èº«ç‹—5å’Œ6\n\næ•²ä»£ç //æ–¹æ³•2-å¼‚æˆ–int* singleNumbers(int* nums, int numsSize, int* returnSize) &#123;\t//1.å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·    int i = 0;    int k = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        k ^= nums[i];        //4^1^4^6 = 1^6    &#125;    //2.åˆ¤æ–­kçš„äºŒè¿›åˆ¶ç¬¬å‡ ä½æ˜¯1    int set = 0;    for (i = 0; i &lt; 32; i++)    &#123;        if (((k &gt;&gt; i) &amp; 1) == 1)//æ³¨æ„æ“ä½œç¬¦ä¼˜å…ˆçº§        &#123;            set = i;//ç¬¬iä½ä¸º1            break;        &#125;    &#125;    //3.ä»¥ç¬¬setä½ä¸º1è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ•°åˆ†å¼€    int n = 0;    int m = 0;    for (i = 0; i &lt; numsSize; i++)    &#123;        if (((nums[i] &gt;&gt; set) &amp; 1) == 1)        &#123;            n ^= nums[i];        &#125;        else        &#123;            m ^= nums[i];        &#125;    &#125;    int* result = (int*)calloc(2, sizeof(int));    //è¿”å›çš„æ•°ç»„å¿…é¡»ç”¨åŠ¨æ€å†…å­˜ç®¡ç†æ¥åˆ›å»º    result[0] = n;    result[1] = m;    *returnSize = 2;    return result;&#125;\n\néªŒè¯è‡ªå·±æ•´ä¸€ä¸ªmainå‡½æ•°æ¥æµ‹è¯•ä¸€ä¸‹ä»£ç æ˜¯å¦èƒ½è¾¾åˆ°è¦æ±‚ï¼ŒæˆåŠŸï¼\n\nåšæ¥å£é¢˜çš„æ—¶å€™ï¼Œå¦‚æœå‡ºç°è¾“å‡ºé”™è¯¯çš„æƒ…å†µï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªmainå‡½æ•°å¹¶è°ƒè¯•æ¥æ‰¾å‡ºé”™è¯¯\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œçš„ç”¨æ—¶è¿œè¿œå°äºæ–¹æ³•1çš„ç”¨æ—¶\nå‡»è´¥äº†92.9%çš„ç”¨æˆ·ï¼\n\nä½ å­¦ä¼šäº†å—ğŸ˜\n\nå¦‚æœè¿™ç¯‡åšå®¢å¯¹ä½ æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªğŸ‘å†èµ°å‘—~\n\næ‘¸é±¼ä¹‹å‘ç°å¦å¤–ä¸€é“ä¸€æ ·çš„é¢˜\nhttps://leetcode.cn/problems/single-number-iii/submissions/\n\nclass Solution &#123;public:    vector&lt;int&gt; singleNumber(vector&lt;int&gt;&amp; nums) &#123;        //1.å…¨éƒ¨å¼‚æˆ–åœ¨ä¸€èµ·        int numsSize=nums.size();        int i = 0;        int k = 0;        for (i = 0; i &lt; numsSize; i++)        &#123;            k ^= nums[i];            //4^1^4^6 = 1^6        &#125;        //2.åˆ¤æ–­kçš„äºŒè¿›åˆ¶ç¬¬å‡ ä½æ˜¯1        int set = 0;        for (i = 0; i &lt; 32; i++)        &#123;            if (((k &gt;&gt; i) &amp; 1) == 1)//æ³¨æ„æ“ä½œç¬¦ä¼˜å…ˆçº§            &#123;                set = i;//ç¬¬iä½ä¸º1                break;            &#125;        &#125;        //3.ä»¥ç¬¬setä½ä¸º1è¿›è¡Œåˆ†ç»„ï¼Œå¯ä»¥å°†è¿™ä¸¤ä¸ªæ•°åˆ†å¼€        int n = 0;        int m = 0;        for (i = 0; i &lt; numsSize; i++)        &#123;            if (((nums[i] &gt;&gt; set) &amp; 1) == 1)            &#123;                n ^= nums[i];            &#125;            else            &#123;                m ^= nums[i];            &#125;        &#125;        vector&lt;int&gt; retV;        retV.push_back(n);        retV.push_back(m);        return retV;    &#125;&#125;;\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","leetcode"]},{"title":"ã€ç®—æ³•ã€‘æ»‘åŠ¨çª—å£æ€æƒ³è§£å†³æ•°ç»„OJé¢˜ç›®","url":"/posts/19524588/","content":"åŸºæœ¬æ€è·¯æ»‘åŠ¨çª—å£åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰å®é™…ä½¿ç”¨ï¼Œæ¯”å¦‚TCPçš„å‘é€ç¼“å†²åŒºå°±ä½¿ç”¨äº†è¿™ä¸ªæ€æƒ³æ¥ç»´æŠ¤ã€‚\nå¯¹äºæ•°ç»„ç›¸å…³çš„ç®—æ³•OJé¢˜æ¥è¯´ï¼Œæ»‘åŠ¨çª—å£æ€è·¯ä¸»è¦æ˜¯åŸºäºåŒæŒ‡é’ˆæ¥å®ç°çš„ï¼Œä¸€ä¸ªä½œä¸ºçª—å£çš„å·¦è¾¹ç•Œï¼Œä¸€ä¸ªä½œä¸ºçª—å£çš„å³è¾¹ç•Œï¼Œå¹¶æ ¹æ®é¢˜ç›®çš„æ¡ä»¶æ¥ç§»åŠ¨å·¦å³è¾¹ç•Œã€‚\né¢˜ç›®1-209-é•¿åº¦æœ€å°çš„å­æ•°ç»„ç¬¬ä¸€é¢˜æ˜¯leetcodeçš„209ï¼Œ209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ï¼Œè¿™ä¹Ÿæ˜¯æ»‘åŠ¨çª—å£çš„ä¸€ä¸ªåŸºç¡€ä¸”ç»å…¸çš„é¢˜ç›®ã€‚\né¢˜å¹²ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚\næ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, ..., numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]è¾“å‡ºï¼š2è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼štarget = 4, nums = [1,4,4]è¾“å‡ºï¼š1ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]è¾“å‡ºï¼š0\n\nè¿›é˜¶ï¼šå¦‚æœä½ å·²ç»å®ç° O(n) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•, è¯·å°è¯•è®¾è®¡ä¸€ä¸ª O(n log(n)) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•ã€‚\næ€è·¯è¿™é“é¢˜è¦æ±‚çš„æ˜¯æ•°ç»„ä¸­åŠ èµ·æ¥å¤§äºç­‰äºtargetçš„æœ€å°è¿ç»­å­æ•°ç»„ã€‚æœ€ç®€å•çš„åŠæ³•æ˜¯æš´åŠ›ä¸¤æ¬¡éå†æ¥è®¡ç®—æ¯ä¸€ä¸ªå­æ•°ç»„ç»„åˆçš„å’Œï¼Œå†ä¸ç›®æ ‡targetå¯¹æ¯”ï¼Œä½†è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(N^2)ã€‚\nä½¿ç”¨æ»‘åŠ¨çª—å£æ¥è§£å†³è¿™é“é¢˜æ‰æ˜¯å¯¹çš„ï¼Œæ€è·¯å¦‚ä¸‹ã€‚\n\nleftå’Œrightä½œä¸ºæ»‘åŠ¨çª—å£çš„å·¦å³è¾¹ç•Œï¼Œä»¥rightä½œä¸ºforå¾ªç¯çš„è‡ªå¢ï¼›\nright++éå†ä¸€ä¸ªæ•°ï¼ˆæ»‘åŠ¨çª—å£æ‰©å¼ ï¼‰ï¼ŒåŠ å…¥åˆ°sumä¸­ï¼›\nå¦‚æœsumå¤§äºç­‰äºtargetï¼Œè®°å½•right-left+1ä¸ºå½“å‰å­æ•°ç»„é•¿åº¦ï¼Œå¼€å§‹æ“ä½œleftï¼›\nleft++éå†ä¸€ä¸ªæ•°ï¼ˆæ»‘åŠ¨çª—å£ç¼©é™ï¼‰ï¼Œå°†å…¶ä»sumä¸­åˆ é™¤ï¼›\nå†æ¬¡åˆ¤æ–­sumæ˜¯å¦å¤§äºç­‰äºtargetï¼Œå¦‚æœå¤§äºï¼Œç»§ç»­æ‰§è¡Œç¬¬ä¸‰éƒ¨å’Œç¬¬å››æ­¥ï¼›\nsumä¸å¤§äºtargetäº†ï¼Œç»§ç»­forå¾ªç¯æ“ä½œrightï¼Œç§»åŠ¨å³è¾¹è¾¹ç•Œï¼›\nrightå¤§äºç­‰äºä¸‹æ ‡ï¼Œå¾ªç¯ç»“æŸã€‚\n\næœ€ç»ˆå¾—åˆ°çš„lenå°±æ˜¯æœ€çŸ­çš„å­æ•°ç»„ã€‚\næ³¨æ„ï¼Œæ“ä½œleftçš„æ—¶å€™è¦ç”¨whileå¾ªç¯ï¼Œè€Œä¸æ˜¯ç”¨ifæ¥æ“ä½œï¼Œå› ä¸ºæœ€ç»ˆå¯èƒ½ä¼šé‡åˆ°ï¼Œrightå›ºå®šåœ¨æœ€åä¸€ä½ï¼Œä½†leftè¿˜èƒ½ç»§ç»­å¾€å‰èµ°çš„æƒ…å†µï¼Œå¦‚æœä½¿ç”¨ifï¼Œé‚£ä¹ˆæ¯ä¸ªå¾ªç¯ä¸­leftéƒ½æœ€å¤šåªèƒ½èµ°ä¸€æ¬¡ï¼Œä¼šæ¼æ‰æƒ…å†µã€‚\nä»£ç å¯¹äºè¿™ç±»é—®é¢˜ï¼Œå¯ä»¥ç”¨æ‰“å°ä¸‹æ ‡çš„æ–¹å¼è¿›è¡Œè°ƒè¯•ã€‚æœ€ç»ˆæµ‹è¯•çš„æ—¶å€™è®°å¾—æŠŠæ‰“å°æ³¨é‡Šæ‰ï¼Œå› ä¸ºå®ƒä»¬å¾ˆè€—æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½ çš„ç­”æ¡ˆè¶…æ—¶ã€‚\nclass Solution &#123;public:    int minSubArrayLen(int target, vector&lt;int&gt;&amp; nums) &#123;        int left = 0,right=0; // æ»‘åŠ¨çª—å£        int minRange = INT32_MAX; // å› ä¸ºéœ€è¦è·å–æœ€å°å€¼ï¼Œæ‰€ä»¥è¦ç”¨ä¸€ä¸ªæœ€å¤§å€¼æ¥æ¯”è¾ƒ        int sum = 0;        for(right =0;right&lt;nums.size();right++)        &#123;            sum += nums[right];            while(sum &gt;= target) // è¿™é‡Œå¿…é¡»è¦ç”¨whileï¼Œéœ€è¦è€ƒè™‘rightæ˜¯æœ€åä¸€ä¸ªä½†leftè¿˜å¯ä»¥ç»§ç»­èµ°çš„æƒ…å†µ            &#123;                //cout &lt;&lt; &quot;fix: &quot; &lt;&lt; left &lt;&lt; &quot; - &quot; &lt;&lt; right &lt;&lt; &quot; sum:&quot; &lt;&lt; sum &lt;&lt; &quot;\\n&quot;;                int curDiff = right - left + 1; // å½“å‰é•¿åº¦                minRange = min(minRange,curDiff);                sum -= nums[left];                left ++;// å·¦ä¾§ç¼©é™            &#125;            //cout &lt;&lt; &quot;all: &quot; &lt;&lt; left &lt;&lt; &quot; - &quot; &lt;&lt; right &lt;&lt; &quot; sum:&quot; &lt;&lt; sum &lt;&lt; &quot;\\n&quot;;        &#125;        // å¦‚æœè¿˜æ˜¯æœ€å¤§å€¼ï¼Œåˆ™è¿”å›0        return minRange == INT32_MAX ? 0 : minRange;    &#125;&#125;;\n\nè¯´æ˜ä¸€ä¸‹ï¼Œleetcode&#x2F;ç‰›å®¢ç½‘ä¸Šçš„ä»£ç å‡»è´¥äººæ•°æ˜¯æ²¡æœ‰å‚è€ƒæ„ä¹‰çš„ï¼Œè¿™ä¸ªæ—¶é—´å’Œä½ çš„ç½‘ç»œçŠ¶å†µä¹Ÿæœ‰å…³ç³»ã€‚æˆ‘çš„é¢˜è§£åšå®¢ä¸­è´´å‡ºä»£ç é€šè¿‡æˆªå›¾ï¼Œæ˜¯æƒ³å‘Šè¯‰æœªæ¥çš„è¯»è€…ï¼Œè¿™ä¸ªä»£ç åœ¨æˆ‘æµ‹è¯•çš„æ—¶å€™æ˜¯é€šè¿‡çš„ï¼Œä»¥å…æœªæ¥leetcodeæµ‹è¯•ç”¨ä¾‹å˜åŒ–æ— æ³•é€šè¿‡æ—¶äº§ç”Ÿè¯¯è§£ã€‚\n\nå¥½ä¸å®¹æ˜“æœåˆ°ä¸€ä¸ªé¢˜è§£ï¼Œç»“æœå®ƒè´´äº†æ— æ³•é€šè¿‡çš„ä»£ç ï¼Œè°çœ‹äº†ä¸æ°”ï¼ŸğŸ¤£\n\n\né¢˜ç›®2-904-æ°´æœæˆç¯®904.æ°´æœæˆç¯® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\né¢˜å¹²ä½ æ­£åœ¨æ¢è®¿ä¸€å®¶å†œåœºï¼Œå†œåœºä»å·¦åˆ°å³ç§æ¤äº†ä¸€æ’æœæ ‘ã€‚è¿™äº›æ ‘ç”¨ä¸€ä¸ªæ•´æ•°æ•°ç»„ fruits è¡¨ç¤ºï¼Œå…¶ä¸­ fruits[i] æ˜¯ç¬¬ i æ£µæ ‘ä¸Šçš„æ°´æœ ç§ç±» ã€‚\nä½ æƒ³è¦å°½å¯èƒ½å¤šåœ°æ”¶é›†æ°´æœã€‚ç„¶è€Œï¼Œå†œåœºçš„ä¸»äººè®¾å®šäº†ä¸€äº›ä¸¥æ ¼çš„è§„çŸ©ï¼Œä½ å¿…é¡»æŒ‰ç…§è¦æ±‚é‡‡æ‘˜æ°´æœï¼š\n\nä½ åªæœ‰ ä¸¤ä¸ª ç¯®å­ï¼Œå¹¶ä¸”æ¯ä¸ªç¯®å­åªèƒ½è£… å•ä¸€ç±»å‹ çš„æ°´æœã€‚æ¯ä¸ªç¯®å­èƒ½å¤Ÿè£…çš„æ°´æœæ€»é‡æ²¡æœ‰é™åˆ¶ã€‚\nä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸€æ£µæ ‘å¼€å§‹é‡‡æ‘˜ï¼Œä½ å¿…é¡»ä» æ¯æ£µ æ ‘ï¼ˆåŒ…æ‹¬å¼€å§‹é‡‡æ‘˜çš„æ ‘ï¼‰ä¸Š æ°å¥½æ‘˜ä¸€ä¸ªæ°´æœ ã€‚é‡‡æ‘˜çš„æ°´æœåº”å½“ç¬¦åˆç¯®å­ä¸­çš„æ°´æœç±»å‹ã€‚æ¯é‡‡æ‘˜ä¸€æ¬¡ï¼Œä½ å°†ä¼šå‘å³ç§»åŠ¨åˆ°ä¸‹ä¸€æ£µæ ‘ï¼Œå¹¶ç»§ç»­é‡‡æ‘˜ã€‚\nä¸€æ—¦ä½ èµ°åˆ°æŸæ£µæ ‘å‰ï¼Œä½†æ°´æœä¸ç¬¦åˆç¯®å­çš„æ°´æœç±»å‹ï¼Œé‚£ä¹ˆå°±å¿…é¡»åœæ­¢é‡‡æ‘˜ã€‚\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ fruits ï¼Œè¿”å›ä½ å¯ä»¥æ”¶é›†çš„æ°´æœçš„ æœ€å¤§ æ•°ç›®ã€‚\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šfruits = [1,2,1]è¾“å‡ºï¼š3è§£é‡Šï¼šå¯ä»¥é‡‡æ‘˜å…¨éƒ¨ 3 æ£µæ ‘ã€‚ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šfruits = [0,1,2,2]è¾“å‡ºï¼š3è§£é‡Šï¼šå¯ä»¥é‡‡æ‘˜ [1,2,2] è¿™ä¸‰æ£µæ ‘ã€‚å¦‚æœä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹é‡‡æ‘˜ï¼Œåˆ™åªèƒ½é‡‡æ‘˜ [0,1] è¿™ä¸¤æ£µæ ‘ã€‚ç¤ºä¾‹ 3ï¼šè¾“å…¥ï¼šfruits = [1,2,3,2,2]è¾“å‡ºï¼š4è§£é‡Šï¼šå¯ä»¥é‡‡æ‘˜ [2,3,2,2] è¿™å››æ£µæ ‘ã€‚å¦‚æœä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹é‡‡æ‘˜ï¼Œåˆ™åªèƒ½é‡‡æ‘˜ [1,2] è¿™ä¸¤æ£µæ ‘ã€‚ç¤ºä¾‹ 4ï¼šè¾“å…¥ï¼šfruits = [3,3,3,1,2,1,1,2,3,3,4]è¾“å‡ºï¼š5è§£é‡Šï¼šå¯ä»¥é‡‡æ‘˜ [1,2,1,1,2] è¿™äº”æ£µæ ‘ã€‚\n\næ€è·¯åˆšå¼€å§‹æˆ‘éƒ½æ²¡æœ‰è¯»æ‡‚è¿™ä¸ªé¢˜ç›®ï¼Œæ³¨æ„ï¼Œè¾“å…¥å‚æ•°ä¸­çš„æ•°ç»„å¹¶éæ¯æ£µæ ‘ä¸Šæœ‰å‡ ä¸ªç§ç±»çš„æ°´æœï¼Œè€Œæ˜¯æ¯æ£µæ ‘ä¸Šçš„æ°´æœæ˜¯ç¬¬å‡ ç±»ã€‚æ¯”å¦‚fruits[0] = 1ä»£è¡¨ç¬¬0æ£µæ ‘ä¸Šçš„æ°´æœæ˜¯ç§ç±»1ï¼Œfruits[1] = 2ä»£è¡¨ç¬¬1æ£µæ ‘ä¸Šçš„æ°´æœæ˜¯ç§ç±»2ã€‚\n\næˆ‘åˆšå¼€å§‹é”™è¯¯çš„ç†è§£ä¸º2ä»£è¡¨è¿™æ£µæ ‘ä¸Šæœ‰ä¸¤ç§æ°´æœï¼Œå¦‚æœè¿™æ ·ç†è§£è¿™é“é¢˜å°±æ²¡æ³•å†™äº†â€¦â€¦\n\nä½ çš„ç¯®å­é‡Œé¢ä¸€æ¬¡åªèƒ½è£…ä¸¤ä¸ªç§ç±»çš„æ°´æœï¼Œè¿™æ ·è¿™é“é¢˜å°±è½¬å˜æˆäº†ï¼Œç»™å‡ºçš„æ•°ç»„ä¸­åªåŒ…å«ä¸¤ä¸ªç›¸åŒæ•°å­—çš„æœ€é•¿å­æ•°ç»„ã€‚\næ¯”å¦‚æ•°ç»„ [3,3,3,1,2,1,1,2,3,3,4]ï¼Œæœ€é•¿åªåŒ…å«ä¸¤ä¸ªæ•°å­—çš„å­æ•°ç»„æ˜¯ [1,2,1,1,2]ï¼›æ•°ç»„[1,2,3,2,2]æœ€é•¿åªåŒ…å«ä¸¤ä¸ªæ•°å­—çš„å­æ•°ç»„æ˜¯[3,2,2]ï¼›\nåŒæ ·æ˜¯ç”¨æ»‘åŠ¨çª—å£æ¥è§£é¢˜ï¼Œä½¿ç”¨left&#x2F;rightå·¦å³è¾¹ç•Œï¼Œrightä½œä¸ºwhileå¾ªç¯æ¡ä»¶ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ•°å­—ç§ç±»è®¡æ•°å™¨fruitsCountã€æ•°å­—ä¸ªæ•°è®¡æ•°å™¨sizeCountå’Œä¸€ä¸ªsetæ¥ä¿å­˜å½“å‰çš„ä¸¤ä¸ªæ•°å­—ã€‚å¦å¤–è¿˜éœ€è¦ä¸€ä¸ªmaxSizeCountæ¥ä¿å­˜æœ€é•¿çš„æ•°å­—ä¸ªæ•°ï¼Œä½œä¸ºé¢˜ç›®è¿”å›å€¼ã€‚\n\nrightéå†ï¼Œå½“å½“å‰æ•°å­—ä¸å­˜åœ¨setä¸­ï¼Œä¸”countå°äº2æ—¶ï¼Œå°†å…¶åŠ å…¥åˆ°setä¸­ï¼Œå¹¶å°†fruitsCount++ï¼Œé•¿åº¦sizeCount++ï¼Œä½¿ç”¨sizeCountå¯¹æ¯”æ›´æ–°maxSizeCountï¼›\nå½“å½“å‰æ•°å­—å­˜åœ¨äºsetä¸­ï¼Œé•¿åº¦sizeCount++ï¼Œä½¿ç”¨sizeCountå¯¹æ¯”æ›´æ–°maxSizeCountï¼›\nå½“å½“å‰æ•°å­—ä¸å­˜åœ¨äºsetä¸­ï¼Œä¸”fruitsCountå·²ç»ä¸º2ï¼Œè¯´æ˜å½“å‰èµ°åˆ°äº†ç¬¬ä¸‰ä¸ªæ•°å­—çš„ä½ç½®ï¼Œé‡ç½®setå’ŒfruitsCountï¼Œä½¿ç”¨sizeCountå¯¹æ¯”æ›´æ–°maxSizeCountåï¼Œå°†sizeCounté‡ç½®ä¸º0ï¼›\nleft++ï¼ˆæ»‘åŠ¨çª—å£å·¦ä¾§ç¼©é™ï¼‰ï¼Œä¸€ç›´åŠ åŠ åˆ°å’Œå½“å‰æ•°å­—ä¸åŒçš„ä½ç½®ï¼ˆæ¯”å¦‚leftå½“å‰å¤„äº3,3,3,1,2çš„3çš„ä½ç½®ï¼Œé‚£ä¹ˆå°±éœ€è¦ç§»åŠ¨åˆ°1çš„ä½ç½®ï¼Œè¿‡æ»¤é‡å¤æ•°æ®ï¼‰ï¼›\nrighté‡ç½®åˆ°leftçš„ä½ç½®ï¼Œç»§ç»­æ‰§è¡Œä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°rightèµ°å®Œæ•°ç»„ã€‚\n\næ³¨æ„ï¼Œæ¯æ¬¡sizeCount++ä¹‹åï¼Œéƒ½éœ€è¦å’ŒmaxSizeCountå¯¹æ¯”å¹¶æ›´æ–°ã€‚å¦åˆ™å¦‚æœç»™å‡ºçš„æ•°ç»„æœ¬æ¥å°±åªæœ‰ä¸¤ç§æ•°å­—ï¼ˆæ¯”å¦‚[1,2,1]è¿™æ•´ä¸ªæ•°ç»„æœ¬èº«å°±æ˜¯ç­”æ¡ˆï¼‰çš„æƒ…å†µï¼ŒmaxSizeCountä¼šæ²¡æœ‰æ­£å¸¸æ›´æ–°ã€‚\nä»£ç å› ä¸ºæœ¬é¢˜ç›®çš„setå¹¶ä¸éœ€è¦æ’åºï¼Œæ‰€ä»¥ä½¿ç”¨å“ˆå¸Œsetä¼šä¼˜äºçº¢é»‘æ ‘çš„setã€‚\nclass Solution &#123;public:    int totalFruit(vector&lt;int&gt;&amp; fruits) &#123;        unordered_set&lt;int&gt; fruitsSet;        int fruitsCount = 0; // ç§ç±»æ•°é‡        int curCount = 0; // å½“å‰æ°´æœè®¡æ•°        int retCount = -1;        int left = 0,right = 0;        while(right &lt; fruits.size())        &#123;            // æ°´æœä¸åœ¨é‡Œé¢ï¼Œä¸”è¿˜æ²¡æœ‰2ä¸ª            if(fruitsCount &lt; 2 &amp;&amp; fruitsSet.count(fruits[right]) == 0)&#123;                fruitsCount++; // ç§ç±»æ•°é‡åŠ ä¸€                fruitsSet.insert(fruits[right]);                curCount++; // æ°´æœä¸ªæ•°åŠ ä¸€                right++;                retCount = max(curCount,retCount);                // cout &lt;&lt; right &lt;&lt; &quot; - &quot; &lt;&lt; fruits[right] &lt;&lt; &quot;\\n&quot;;            &#125;            // æ°´æœåœ¨é‡Œé¢            else if(fruitsCount &lt;= 2 &amp;&amp; fruitsSet.count(fruits[right]) != 0)            &#123;                right++;                curCount++;                retCount = max(curCount,retCount);            &#125;            // æ°´æœä¸åœ¨é‡Œé¢ï¼Œä¸”å·²ç»æœ‰ä¸¤ä¸ªäº†            else if(fruitsCount &gt;= 2 &amp;&amp; fruitsSet.count(fruits[right]) == 0)            &#123;                retCount = max(curCount,retCount);                fruitsSet.clear(); // æ¸…ç©º                curCount = 0;                fruitsCount = 0;                // æ‰¾ä¸‹ä¸€ä¸ªå’Œleftå½“å‰ä¸åŒçš„æ°´æœ                while(left &lt; fruits.size() &amp;&amp; fruits[left+1] == fruits[left])&#123;                    left++;                &#125;                // è¿˜éœ€è¦å†èµ°ä¸€æ­¥ï¼Œæ‰æ˜¯å’Œåˆšåˆšä¸ä¸€æ ·çš„æ°´æœ                left++;                right = left; // é‡æ–°å¼€å§‹æ–°ä¸€è½®è®¡æ•°            &#125;        &#125;        return retCount;    &#125;&#125;;\n\n\n\né¢˜ç›®3-76-æœ€å°è¦†ç›–å­ä¸²76. æœ€å°è¦†ç›–å­ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\né¢˜å¹²ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s ã€ä¸€ä¸ªå­—ç¬¦ä¸² t ã€‚è¿”å› s ä¸­æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„æœ€å°å­ä¸²ã€‚å¦‚æœ s ä¸­ä¸å­˜åœ¨æ¶µç›– t æ‰€æœ‰å­—ç¬¦çš„å­ä¸²ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² &quot;&quot; ã€‚ \næ³¨æ„ï¼š\n\nå¯¹äº t ä¸­é‡å¤å­—ç¬¦ï¼Œæˆ‘ä»¬å¯»æ‰¾çš„å­å­—ç¬¦ä¸²ä¸­è¯¥å­—ç¬¦æ•°é‡å¿…é¡»ä¸å°‘äº t ä¸­è¯¥å­—ç¬¦æ•°é‡ã€‚\nå¦‚æœ s ä¸­å­˜åœ¨è¿™æ ·çš„å­ä¸²ï¼Œæˆ‘ä»¬ä¿è¯å®ƒæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚\n\nç¤ºä¾‹ 1ï¼šè¾“å…¥ï¼šs = &quot;ADOBECODEBANC&quot;, t = &quot;ABC&quot;è¾“å‡ºï¼š&quot;BANC&quot;è§£é‡Šï¼šæœ€å°è¦†ç›–å­ä¸² &quot;BANC&quot; åŒ…å«æ¥è‡ªå­—ç¬¦ä¸² t çš„ &#x27;A&#x27;ã€&#x27;B&#x27; å’Œ &#x27;C&#x27;ã€‚ç¤ºä¾‹ 2ï¼šè¾“å…¥ï¼šs = &quot;a&quot;, t = &quot;a&quot;è¾“å‡ºï¼š&quot;a&quot;è§£é‡Šï¼šæ•´ä¸ªå­—ç¬¦ä¸² s æ˜¯æœ€å°è¦†ç›–å­ä¸²ã€‚ç¤ºä¾‹ 3:è¾“å…¥: s = &quot;a&quot;, t = &quot;aa&quot;è¾“å‡º: &quot;&quot;è§£é‡Š: t ä¸­ä¸¤ä¸ªå­—ç¬¦ &#x27;a&#x27; å‡åº”åŒ…å«åœ¨ s çš„å­ä¸²ä¸­ï¼Œå› æ­¤æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­å­—ç¬¦ä¸²ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚\n\ns å’Œ t ç”±è‹±æ–‡å­—æ¯ç»„æˆï¼Œä¸”å¯èƒ½ä¼šé‡å¤ï¼ˆæœªè§„å®šå¤§å°å†™ï¼‰\næ€è·¯åŒæ ·æ˜¯ä½¿ç”¨æ»‘åŠ¨çª—å£ï¼Œä½†è¿™ä¸€æ¬¡çš„ç¼©é™éœ€è¦è¿›è¡Œåˆ¤æ–­ã€‚\né¦–å…ˆè¦æ˜ç™½é¢˜ç›®ç»™å‡ºçš„æ¡ä»¶\n\nå½“tå­—ç¬¦ä¸²å¤§äºså­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›ç©ºï¼Œå› ä¸ºsçš„å­ä¸²æ— æ³•åŒ…å«tï¼›\ntä¸­çš„å­—æ¯å¯èƒ½æ˜¯å¤§å†™ä¹Ÿå¯èƒ½æ˜¯å°å†™ï¼Œè€Œä¸”tä¸­çš„æŸä¸ªå­—æ¯å¯èƒ½ä¼šé‡å¤ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªmapæ¥ä¿å­˜å­—ç¬¦åŠå…¶ä¸ªæ•°ï¼›\né¢˜ç›®è¦æ±‚è¿”å›çš„æ˜¯å­ä¸²ï¼Œæ‰€ä»¥éœ€è¦è®°å½•å­ä¸²åœ¨så†…çš„èµ·å§‹ä¸‹æ ‡åŠå…¶é•¿åº¦ï¼›\n\nè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå“ˆå¸Œmapï¼Œä¸€ä¸ªtMapsç”¨äºå­˜æ”¾tå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦å’Œä¸ªæ•°ï¼Œå¦å¤–ä¸€ä¸ªcurMapsç”¨æ¥å­˜æ”¾å½“å‰æ»‘åŠ¨çª—å£å†…åŒ…å«çš„tå­—ç¬¦ä¸²å†…å­—ç¬¦çš„ä¸ªæ•°ã€‚\n\nright++ï¼Œå½“é‡åˆ°tå­—ç¬¦ä¸²å†…çš„å­—ç¬¦ï¼Œåˆ™å°†curMapsä¸­å¯¹åº”å­—ç¬¦æ•°é‡åŠ ä¸€ï¼›\næ£€æŸ¥curMapsä¸­çš„å­—ç¬¦ä¸ªæ•°æ˜¯å¦éƒ½å·²ç»å¤§äºtMapsä¸­çš„å­—ç¬¦æ•°é‡ï¼Œä¸”æ²¡æœ‰ç¼ºå°‘å­—ç¬¦ï¼›\nå¦‚æœç¬¦åˆæ¡ä»¶ï¼Œè®°å½•å½“å‰çš„leftï¼ˆä½œä¸ºå­ä¸²èµ·å§‹ä½ç½®ï¼‰å’Œé•¿åº¦lenï¼Œéšåleft++å¼€å§‹ç¼©é™ï¼Œå¹¶å°†curMapsä¸­å¯¹åº”å­—ç¬¦å‡ä¸€ï¼Œç›´åˆ°curMapsä¸ç¬¦åˆæ¡ä»¶ä¸ºæ­¢ï¼›\nrightç»§ç»­åŠ åŠ ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°rightè¶Šç•Œã€‚\n\næ³¨æ„ï¼Œè¿™é‡Œå»ºè®®å°†ç”¨äºæ›´æ–°çš„å­ä¸²èµ·å§‹åœ°å€beginåˆå§‹åŒ–ä¸ºéæ³•ä¸‹æ ‡-1ï¼Œå¹¶åœ¨returnçš„æ—¶å€™è¿›è¡Œåˆ¤æ–­ï¼Œè¿™æ ·èƒ½çŸ¥é“så­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­ä¸²ã€‚å¦‚æœbeginåœ¨å¾ªç¯ç»“æŸåè¿˜æ˜¯-1ï¼Œåˆ™ä»£è¡¨så†…æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å­ä¸²ï¼Œæ­¤æ—¶è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚\nä»£ç class Solution &#123;public:    // åˆ¤æ–­å½“å‰mapä¸­æ˜¯å¦å·²ç»åŒ…å«ç›®æ ‡mapä¸­éœ€è¦çš„æ‰€æœ‰å­—ç¬¦    bool statusCheck(const unordered_map&lt;char,int&gt;&amp; tMaps,unordered_map&lt;char,int&gt;&amp; curMaps)    &#123;        for(auto&amp;e:tMaps)&#123;            // è¿™é‡Œä¸èƒ½ç”¨ä¸ç­‰äºåˆ¤æ–­ï¼Œå› ä¸ºcurMapsä¸­çš„è®¡æ•°å™¨å¤§äºçš„æ—¶å€™ä¹Ÿæ˜¯ç¬¦åˆæ¡ä»¶çš„            if(curMaps.count(e.first)!=0 &amp;&amp; curMaps[e.first] &lt; e.second)&#123;                return false;            &#125;            else if (curMaps.count(e.first)==0)            &#123;                return false;            &#125;        &#125;        return true;    &#125;    string minWindow(string s, string t) &#123;        if(t.size() &gt; s.size())&#123;            return &quot;&quot;;        &#125;        int left = 0,right = 0;        int begin = -1, end = -1, len = INT32_MAX; // æœ€ç»ˆç”¨äºè¿”å›ç»“æœçš„ä¸‹æ ‡åŒºé—´        // è®°å½•tä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°        unordered_map&lt;char,int&gt; tMaps;        for(auto&amp;e:t)&#123;            tMaps[e]++;        &#125;        // å½“å‰å‡ºç°çš„tmapä¸­çš„å­—ç¬¦çš„æ•°é‡        unordered_map&lt;char,int&gt; curMaps;        while(right &lt; s.size())        &#123;            // å¦‚æœç›®æ ‡mapé‡Œé¢æœ‰ï¼Œåˆ™åœ¨å½“å‰mapé‡Œé¢å°†æ•°é‡åŠ ä¸€            if(tMaps.count(s[right]) !=0)&#123;                curMaps[s[right]]++;            &#125;            // å¦‚æœç¬¦åˆæ¡ä»¶ï¼Œåˆ™ç¼©é™åˆ°ä¸èƒ½ç¼©é™ä¸ºæ­¢            while(statusCheck(tMaps,curMaps) &amp;&amp; left &lt;=right)            &#123;                // å¦‚æœé•¿åº¦å°äºå½“å‰è®°å½•çš„é•¿åº¦ï¼Œåˆ™æ›´æ–°                if(right - left + 1 &lt; len)                &#123;                    len = right - left + 1;                    begin = left;                    end = right;                &#125;                // åœ¨ç›®æ ‡mapé‡Œé¢çœ‹æ˜¯å¦æœ‰è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæœ‰åˆ™åœ¨å½“å‰mapä¸­å°†æ•°é‡å‡ä¸€                if(tMaps.count(s[left]) !=0)&#123;                    curMaps[s[left]]--;                &#125;                left++;            &#125;            right++;        &#125;        // å¦‚æœbeginæ²¡æœ‰è¢«æ›´æ–°ï¼Œåˆ™è¯´æ˜ä¸å­˜åœ¨        return begin == -1 ? &quot;&quot; : s.substr(begin,len);    &#125;&#125;;\n\n\nThe endæ»‘åŠ¨çª—å£æ–¹æ³•åŒæ—¶ä¹Ÿæ˜¯åŒæŒ‡é’ˆæ³•çš„ä¸€ä¸ªè¿ç”¨ï¼Œè¿™ä¸‰é“é¢˜ç›®éƒ½å›Šæ‹¬äº†è¿™ä¸ªæ–¹æ³•ï¼Œå¹³æ—¶è®°å¾—åŠ ä»¥å¤ä¹ ã€‚\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["æ•°ç»„","ç®—æ³•","leetcode"]},{"title":"ã€MDã€‘Markdownå¦‚ä½•æ’å…¥è§†é¢‘ã€mp3å’Œgif","url":"/posts/27591397/","content":"æ€»æ‰€å‘¨çŸ¥ï¼Œé„™äººæœ‰ä¸€ä¸ªä¸“æ å«åšã€å·®ç”Ÿæ–‡å…·å¤šã€‘ï¼Œé‡Œé¢è®°å½•äº†ä¸€äº›å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠä½¿ç”¨å·¥å…·æ—¶ä¼šé‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚\näºæ˜¯ä¹ï¼Œä¹‹å‰å°±æœ‰ä¸€ä¸ªæœ‹å‹åœ¨ç¾¤é‡Œé—®é“â€œmarkdownå¦‚ä½•æ’å…¥è§†é¢‘â€ï¼Œå½“æ—¶çš„æˆ‘ä¸ä¼šå¼„ï¼Œç„¶åå°±å‡ºç°äº†ä¸‹é¢è¿™ä¸€å¹•ğŸ‘‡\n\næ˜å¤©å°±å¼„ğŸ˜‚å¼€æ•´ï¼ï¼ˆç„¶è€Œè¿™ç¯‡åšå®¢æ˜¯åœ¨5.1åŠ³åŠ¨èŠ‚å†™çš„ï¼‰\n[TOC]\né¦–å…ˆä½ è¦çŸ¥é“ï¼Œmarkdownè¯­æ³•å…¶å®æ˜¯å…¼å®¹htmlè¯­æ³•çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŠŠmarkdownè½¬æ¢ä¸ºhtmlï¼Œæ”¾ç½®åˆ°åšå®¢ç½‘ç«™ä¸Š\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨htmlä»£ç æ¥æ’å…¥è§†é¢‘å’Œmp3éŸ³ä¹\n1.mdæ’å…¥è§†é¢‘å¯¹åº”è¯­æ³•å¦‚ä¸‹ï¼Œè¿™ä¸¤ä¸ªéƒ½å¯ä»¥\n&lt;video src=&quot;è§†é¢‘é“¾æ¥&quot;&gt;&lt;/video&gt;\n\n&lt;iframe height=498 width=510 src=&quot;è§†é¢‘é“¾æ¥&quot;&gt;\n\nå¦‚æœæˆ‘ä»¬æ’å…¥ä¸€ä¸ªBç«™è§†é¢‘çš„é“¾æ¥ï¼Œåœ¨typoraä¸­çš„æ˜¾ç¤ºå¦‚ä¸‹\n\nå®é™…ä¸Šå®ƒå°±æ˜¯æŠŠä¸€ä¸ªç½‘ç«™æ’å…¥åˆ°äº†æˆ‘ä»¬çš„markdownæ–‡ä»¶ä¸­ï¼Œå½¢æˆäº†ä¸€ä¸ªç®€æ˜“çš„æµè§ˆå™¨\nå…¶å®ä½ å¦‚æœå¤åˆ¶ä¸€ä¸ªè§†é¢‘ï¼Œç›´æ¥åœ¨typoraé‡Œé¢ç²˜è´´çš„è¯ï¼Œtyporaæ˜¯ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„htmlé“¾æ¥çš„\n&lt;video src=&quot;../../../../Desktop/md.mp4&quot;&gt;&lt;/video&gt;\n\nä½†è¿™ä¸ªé“¾æ¥å’Œä¸€ä¸ªæœ¬åœ°çš„å›¾ç‰‡é“¾æ¥ç›¸åŒï¼Œå¦‚æœéœ€è¦ä¸Šä¼ åˆ°CSDNç½‘ç«™ä¸Šçš„è¯ï¼ŒCSDNæ— æ³•æ­£å¸¸è½¬å­˜ä½ çš„è§†é¢‘\næˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æŠŠè¿™ä¸ªè§†é¢‘ä¹Ÿä¸Šä¼ åˆ°æˆ‘ä»¬çš„å›¾åºŠé‡Œé¢\n\nå¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å›¾åºŠï¼Œé‚£å°±çœ‹çœ‹æˆ‘å§ï¼šã€å›¾åºŠæ­å»ºæ•™ç¨‹ã€‘\n\nå›¾åºŠå¹¶ä¸æ˜¯åªèƒ½ä¿å­˜å›¾ç‰‡ï¼Œå®ƒå¯ä»¥ä¿å­˜ä»»ä½•æ ¼å¼çš„æ–‡ä»¶ã€‚å°†è§†é¢‘æ‹–å…¥picgoï¼Œå³å¯ä¸Šä¼ æˆ‘ä»¬çš„è§†é¢‘åˆ°å›¾åºŠ\n\nç‚¹å‡»ç®­å¤´æ‰€æŒ‡æŒ‰é’®ï¼Œå¤åˆ¶æˆ‘ä»¬è§†é¢‘çš„é“¾æ¥\n\nç„¶åæŠŠè§†é¢‘é“¾æ¥å¡«å…¥ä¸Šé¢ä¸¤ç§å½¢å¼å…¶ä¸­ä¹‹ä¸€çš„htmlä»£ç ä¸­ï¼Œå³å¯æ˜¾ç¤ºå‡ºè§†é¢‘ï¼\n\n\n1.2CSDNåšå®¢æ’å…¥è§†é¢‘ç„¶åæˆ‘å°±å‘ç°CSDNä¸æ”¯æŒä¸Šé¢ä¸¤ç§æ ·å¼ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åœ¨markdownç¼–è¾‘å™¨çš„é¡¶éƒ¨é€‰æ‹©è§†é¢‘\n\nç„¶åè¿™é‡Œä¼šè®©ä½ å¡«å†™è§†é¢‘çš„åœ°å€ï¼Œç›®å‰åªæ”¯æŒtxä¼˜é…·è¿˜æœ‰bilibiliçš„å·²ä¸Šä¼ è§†é¢‘\n\næˆ–è€…ä½ å¯ä»¥é€‰æ‹©â€œæ’å…¥å·²æœ‰è§†é¢‘â€ï¼Œè¿™ä¼šæŠŠè§†é¢‘ä¸Šä¼ åˆ°CSDNä¸Š\n\n\n2.mdæ’å…¥MP3æ–‡ä»¶2.1ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾æ’å…¥MP3æ–‡ä»¶çš„æ–¹å¼å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç½‘æ˜“äº‘éŸ³ä¹ï¼Œé€‰æ‹©ä¸€ä¸ªéVIPæ­Œæ›²ï¼Œç‚¹å‡»ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨\n\nç„¶åå¤åˆ¶è¿™é‡Œçš„htmlä»£ç å³å¯ï¼\n\n&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86 src=&quot;//music.163.com/outchain/player?type=2&amp;id=33367876&amp;auto=1&amp;height=66&quot;&gt;&lt;/iframe&gt;\n\n\n\nä¸Šé¢å°±ç”Ÿæˆäº†ä¸€ä¸ªç½‘æ˜“äº‘éŸ³ä¹çš„å¤–é“¾æ’­æ”¾å™¨\n\n2.2è‡ªå·±çš„MP3éŸ³é¢‘æ–‡ä»¶æ ¹æ®ä¸Šé¢htmlæ’å…¥è§†é¢‘çš„ä»£ç ï¼Œå°±å¯ä»¥çŒœå‡ºæ¥éŸ³é¢‘çš„ä»£ç æ˜¯å•¥\næŠŠvedioæ”¹æˆaudioå°±å¯ä»¥å•¦ï¼\n&lt;audio src=&quot;mp3æ–‡ä»¶é“¾æ¥åœ°å€&quot;&gt;&lt;/audio&gt;\n\nä¸‹é¢å°±æ˜¯ä¸€ä¸ªæˆ‘ä¸Šä¼ çš„MP3éŸ³ä¹æ–‡ä»¶\n\nåœ¨typoraä¸­çš„æ ·å¼å¦‚ä¸‹ğŸ‘‡\n\n3.mdæ’å…¥gifè¿™ä¸ªå°±æ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„æ ¼å¼äº†\ngifå›¾ç‰‡ä¹Ÿæ˜¯ä¸€ä¸ªå›¾ç‰‡ï¼Œç›´æ¥ç”¨![]()è¿™ç§æ ‡å‡†çš„markdownæ’å…¥å›¾ç‰‡çš„æ ·å¼å°±å¯ä»¥äº†\n\nç»“è¯­è¿™ä¸ªæ–°æ–‡å…·çš„åšå®¢åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼\nå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ï¼ğŸ˜\nè™½ç„¶æˆ‘æ„Ÿè§‰åœ¨markdownä¸­æ’å…¥è§†é¢‘çš„ä½¿ç”¨åœºæ™¯ä¸æ˜¯å¾ˆå¤š\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€Gitã€‘å¦‚ä½•ä½¿ç”¨sshå¯†é’¥é…ç½®git","url":"/posts/3625274788/","content":"ä¹‹å‰çš„è…¾è®¯äº‘æ­å»ºLinuxç¯å¢ƒåšå®¢ä¸­åŒ…å«äº†æœ¬æ–‡ï¼Œä½†æ˜¯ç”±äºåœ¨æˆ‘çš„ç¯å¢ƒä¸‹SSHé…ç½®gitæ— æ³•å¤šæ¬¡ç”Ÿæ•ˆã€‚ä¸ºäº†é¿å…è¯¯å¯¼ï¼Œæ‰€ä»¥æŠŠè¿™ä¸€éƒ¨åˆ†å•ç‹¬æˆæ–‡ï¼Œå¹¶åˆ é™¤åŸæ–‡ä¸­ç›¸å…³éƒ¨åˆ†\n\n22-06-19æ›´æ–°ï¼šé—®é¢˜å·²è§£å†³ï¼Œå¯æ”¾å¿ƒé˜…è¯»æœ¬æ–‡ï¼\n\n\n\n\n1.åˆ›å»ºSSHå¯†é’¥åªè¦ä½ å®‰è£…å¥½äº†gitçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œåœ¨linuxå’Œwindowsä¸‹éƒ½æ˜¯ä¸€æ ·çš„æ“ä½œã€‚\nâ‘  æœ¬åœ°åˆ›å»ºsshå¯†é’¥è¾“å…¥è¿™ä¸ªè¯­å¥ï¼ˆgithubå•¥çš„éƒ½æ˜¯åŒç†ï¼‰\nssh-keygen -t rsa -C &quot;ä½ çš„giteeè´¦æˆ·é‚®ç®±&quot;\n\nç„¶åä¼šå¼¹å‡ºæ¥è®©ä½ è¾“å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œç›´æ¥è¿æŒ‰3æ¬¡å›è½¦è·³è¿‡\nEnter file in which to save the key (/home/muxue/.ssh/id_rsa): id_rsa_ç”¨æˆ·åEnter passphrase (empty for no passphrase): Enter same passphrase again: \n\nåé¢å‡ºç°çš„passphraseè¯­å¥ç›´æ¥å›è½¦è·³è¿‡ï¼Œå‡ºç°ä¸‹é¢è¿™ä¸ªå°±æ˜¯é…ç½®å¥½äº†\nYour identification has been saved in id_rsa_ç”¨æˆ·åâ€¦â€¦#åé¢è¿˜æœ‰å¾ˆå¤šï¼Œè¿˜å‡ºç°äº†ä¸€ä¸ªæ–‡å­—ç»„æˆçš„å›¾ç‰‡\n\nâ‘¡ æŠŠSSHå…¬é’¥æ·»åŠ åˆ°gitee&#x2F;githubè´¦æˆ·ä¸Šç›´æ¥cd .sshè¿›å…¥éšè—æ–‡ä»¶å¤¹ï¼Œcatä½ åˆšåˆšç”Ÿæˆçš„pubæ–‡ä»¶ï¼Œå°†å†…å®¹å¤åˆ¶\ncd .sshcat id_rsa.pub\n\nä½ è¿˜å¯ä»¥ä½¿ç”¨Xftpæ‰“å¼€åˆšåˆšåˆ›å»ºçš„å¯†é’¥æ–‡ä»¶ï¼ŒæŠŠé‡Œé¢ç”Ÿæˆçš„å†…å®¹å¤åˆ¶ä¸€ä»½\n\n\nåœ¨giteeè´¦æˆ·è®¾ç½®ä¸­æ‰¾åˆ°SSHå…¬é’¥ï¼Œæ·»åŠ å³å¯\n\ngithubåŒç†ï¼ˆgithubä¸­æ–‡é¡µé¢æ˜¯ç”¨äº†æ²¹çŒ´æ’ä»¶ï¼‰\n\nåŒä¸€ä¸ªå¯†é’¥æ˜¯å¯ä»¥åœ¨å¤šä¸ªå¹³å°ç”¨çš„ï¼Œä½†æ˜¯åŒä¸€ä¸ªå¯†é’¥ä¸èƒ½åœ¨å¤šä¸ªè®¾å¤‡ç”¨ã€‚\nå¦åˆ™pushçš„æ—¶å€™ï¼Œè¿œç«¯æœåŠ¡å™¨ä¼šç¦æ­¢å¹¶æç¤ºä½ å½“å‰å¯†é’¥æœ‰å¦å¤–ä¸€å°è®¾å¤‡åœ¨ä½¿ç”¨ã€‚\nä¸ºäº†å®‰å…¨æ€§ï¼Œå»ºè®®ä¸€å°ä¸»æœºä¸€ä¸ªsshå¯†é’¥ï¼Œå¹¶å®šæ—¶è½®æ¢ï¼ˆé‡æ–°ç”Ÿæˆæ–°çš„ï¼Œæ›¿æ¢æ‰æ—§çš„ï¼‰\nâ‘¢ æµ‹è¯•sshè¿æ¥æå®šå¯†é’¥åï¼Œæµ‹è¯•æ˜¯å¦å¯ä»¥ç”¨sshè®¿é—®æˆ‘ä»¬çš„è¿œç¨‹ä»“åº“\nssh -T git@gitee.com# githubåªéœ€è¦æŠŠgiteeæ”¹æˆgithubå°±è¡Œäº†ssh -T git@github.com\n\nå‡ºç°ä¸‹é¢çš„å°±æ˜¯æˆåŠŸäº†\nâ¯ ssh -T git@gitee.comHi musnows(@musnows)! You&#x27;ve successfully authenticated, but GITEE.COM does not provide shell access.â¯ ssh -T git@github.comHi musnows! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.\n\n\n\nâ‘£ è¯¥æ–¹å¼æœ‰é”™è¯¯ï¼ˆå·²è§£å†³ï¼‰åˆšå¼€å§‹å¤„ç†çš„æ—¶å€™ï¼ŒSSHæ–¹å¼ä¸çŸ¥ä¸ºä½•ï¼Œåœ¨æˆ‘çš„äº‘ä¸»æœºä¸Šï¼Œåªæœ‰å½“æ¬¡è®¾ç½®æœ‰æ•ˆï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯è¿æ¥äº‘æœåŠ¡å™¨ï¼ˆäº‘æœåŠ¡å™¨æ²¡æœ‰é‡å¯ï¼‰SSHå°±ä¼šå¤±æ•ˆã€‚åœ¨æˆ‘çš„Linuxç”¨æˆ·ç›®å½•ä¸‹ä»¥åŠæˆ‘æœ‹å‹çš„ç”¨æˆ·ç›®å½•ä¸‹éƒ½å‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼\nå¦‚æœä½ ä¹Ÿå‡ºç°äº†è¿™ä¸ªé—®é¢˜ï¼Œè¯·ç›´æ¥ä½¿ç”¨è´¦æˆ·å¯†ç æ–¹å¼ï¼Œè€Œä¸æ˜¯SSH\n\n22-06-19æ›´æ–°ï¼šåœ¨åŸå…ˆåšå®¢ä¸­ï¼Œæåˆ°äº†ä¸‹é¢è¿™ä¸ªæœ¬åœ°æ·»åŠ sshå¯†é’¥çš„æ­¥éª¤ï¼ˆè¯¥æ­¥éª¤é”™è¯¯ï¼Œè¯·ä¸è¦æ‰§è¡Œï¼ä¸è¦æ‰§è¡Œï¼ä¸è¦æ‰§è¡Œï¼ï¼‰\n\næ‰§è¡Œä¸‹é¢ä¸¤ä¸ªè¯­å¥ï¼Œæ·»åŠ ä½ çš„sshå¯†é’¥åˆ°è®¾ç½®ä¸­ã€‚æ³¨æ„ï¼Œç”Ÿæˆçš„å¯†åŒ™åº”è¯¥æ˜¯åœ¨\nssh-agent bashssh-add ~/.ssh/id_rsa_ç”¨æˆ·å\n\n\n\nå®é™…ä¸Šï¼Œå‡ºç°æ— æ³•å¤šæ¬¡ä½¿ç”¨çš„é—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºè¿™è«é¡»æœ‰çš„ä¸€æ­¥æ“ä½œï¼\næ­£ç¡®æ–¹æ³•æ˜¯ï¼šåˆ«æ‰§è¡Œè¿™ä¸€æ­¥ï¼Œå°±OKäº†ï¼\nå¦‚æœä½ ä¹‹å‰åšäº†è¿™ä¸€æ­¥ï¼Œé‚£å°±åˆ é™¤è¿™é‡Œåˆ›å»ºå‡ºæ¥çš„æ–‡ä»¶ï¼Œé‡æ–°åˆ›å»ºä¸€ä¸ªsshå¯†é’¥ã€‚\n2.å…‹éš†è¿œç¨‹ä»“åº“ä½¿ç”¨mkdir æ–‡ä»¶å¤¹ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ŒCDè¿›å»åï¼Œå…‹éš†æˆ‘ä»¬çš„è¿œç¨‹ä»“åº“\ngit clone è¿œç¨‹ä»“åº“çš„sshé“¾æ¥\n\nå› ä¸ºç°åœ¨æˆ‘ä»¬é…ç½®çš„æ˜¯SSHæ–¹å¼ï¼Œæ‰€ä»¥è¦ä½¿ç”¨SSHé“¾æ¥è€Œä¸æ˜¯https\n\n\nå…‹éš†æˆåŠŸåï¼Œcdè¿›å…¥è¯¥ç›®å½•ï¼Œgit statusæŸ¥çœ‹gitä»“åº“å½“å‰çŠ¶æ€ï¼Œåº”è¯¥æ˜¯up-to-dateçš„ã€‚\n3.ä¸Šä¼ ä»£ç éšä¾¿åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œæµ‹è¯•èƒ½å¦æ­£å¸¸PUSHåˆ°è¿œç¨‹ä»“åº“\n\nè¿™éƒ¨åˆ†æ¶‰åŠåˆ°gitå‘½ä»¤è¡Œæ“ä½œï¼Œå¦‚æœä½ ä¸ä¼šï¼Œå¯ä»¥æœå‡ ç¯‡gitçš„åšå®¢å­¦ä¹ ä¸€ä¸‹\n\ngit add æ–‡ä»¶å¤¹ #æ·»åŠ éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„git commit -m &quot;è¾“å…¥pushä¿¡æ¯&quot; #git pushçš„ä¿¡æ¯git push #å’Œè¿œç¨‹ä»“åº“åŒæ­¥\n\n\nå› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œæ‰€ä»¥å‡ºç°äº†ä¸‹é¢çš„æŠ¥é”™\n\nç”¨ä¸‹é¢çš„ä¸¤è¡Œå‘½ä»¤ï¼Œå¯ä»¥å•ç‹¬è®¾ç½®å½“å‰ä»“åº“çš„ç”¨æˆ·é‚®ç®±å’Œç”¨æˆ·åã€‚å¦‚æœéœ€è¦å…¨å±€è®¾ç½®ï¼Œåˆ™ä¾ç…§ä¸Šå›¾ä¸­çš„æ“ä½œï¼Œä½¿ç”¨git config --globalè¯­å¥å³å¯\ngit config  user.email &quot;you@example.com&quot;git config  user.name &quot;Your Name&quot;\n\nåŒæ—¶æˆ‘ä»¬éœ€è¦ç”¨ä¸‹é¢çš„è¿™ä¸ªå‘½ä»¤ï¼Œè®¾ç½®è®©gité»˜è®¤pushåˆ°å½“å‰åˆ†æ”¯ä¸Š\ngit config --global push.default current\n\n\nå†æ¬¡æµ‹è¯•git pushï¼ŒæˆåŠŸï¼\n\n\næœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºå“¦ï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","git","windows"]},{"title":"ã€jsã€‘ç”¨html+javascripté™æ€é¡µé¢å®ç°ä¼ªé‡å®šå‘","url":"/posts/1472038549/","content":"javascriptä»£ç å®ç°ä¸€ä¸ªä¼ªé‡å®šå‘\n\n\n1.å‰è¨€æœ¬ç«™çš„åŸŸåä¹‹å‰æœ‰ä¿®æ”¹è¿‡ï¼Œä½†ä¸€äº›æœ‹å‹çš„å‹é“¾ï¼Œå’Œå¼€å¾€é‡Œé¢çš„é“¾æ¥å°šæœªæ›´æ–°ã€‚æ—§çš„åŸŸååˆç±³æœ‰å¤‡æ¡ˆï¼Œä¸èƒ½è§£æåˆ°å›½å†…æœåŠ¡å™¨ä¸Šç”¨nginxè¿›è¡Œ30xè½¬å‘ã€‚\nè¿™æ—¶å€™æˆ‘å°±æƒ³åˆ°äº†ä¸€æ‹›ï¼Œç”¨jsçš„ä»£ç æ¥å®ç°ä¸€ä¸ªurlçš„åˆ‡æ¢ï¼Œç›¸å½“äºä¸€ä¸ªä¼ªé‡å®šå‘ã€‚å› ä¸ºæ˜¯é™æ€æ–‡ä»¶ï¼Œèƒ½ç›´æ¥éƒ¨ç½²åˆ°netlifyç­‰å¹³å°ä¸Šã€‚\nç™¾åº¦äº†ä¸€ä¸‹jsæ˜¯å¦æ”¯æŒè¿™ç§è¯­æ³•ï¼Œå˜¿ï¼Œæ”¯æŒï¼\né‚£ä¸ç›´æ¥å¼€æ•´ï¼\n2.ä»£ç å…³äºhttpçš„30xçŠ¶æ€ç ï¼Œå…¶ä»£è¡¨ç«™ç‚¹åŸŸåæˆ–è·¯å¾„æ›´æ”¹\n\n301é‡å®šå‘ï¼šæ°¸ä¹…\n302é‡å®šå‘ï¼šä¸´æ—¶\n\nhtmlä»£ç éƒ¨åˆ†å¾ˆç®€å•ï¼Œè®¾ç½®bodyå’Œç«™ç‚¹æ ‡é¢˜éƒ½ä¸º301é‡å®šå‘ï¼Œå‘Šè¯‰è®¿é—®è€…ï¼Œç«™ç‚¹å·²ç»æ¢äº†æ–°çš„åŸŸå\n&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;301 Moved Permanently&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;301 Moved Permanently&lt;/h1&gt;&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;\n\nscriptéƒ¨åˆ†ï¼Œé€šè¿‡windowè·å–å½“å‰çš„åŸŸåï¼Œåˆ¤æ–­åŸŸåæ˜¯å¦ä¸ºç›®æ ‡åŸŸåï¼ˆä¸‹æ–‡ä»£ç ä¸­çš„æ—§åŸŸåï¼‰\nå¦‚æœä¸æ˜¯ï¼Œåˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚å¦‚æœæ˜¯ï¼Œåˆ™è¦†ç›–urlåˆ°æ–°åŸŸåã€‚\n&lt;!--æ”¾åœ¨headåï¼Œbodyå‰--&gt;&lt;script&gt;var path = window.location.href;    console.log(&quot;current path:&quot;,path)//æ‰“å°åˆ°æ§åˆ¶å°    // ç¡çœ å‡½æ•°    function sleep (time) &#123;      return new Promise((resolve) =&gt; setTimeout(resolve, time));    &#125;    // ç¡500ms,ä¹‹åæ‰§è¡Œä¸‹é¢çš„å†…å®¹    sleep(500).then(() =&gt; &#123;        // å¦‚æœurlä¸æ˜¯é¢„å…ˆè®¾å®šå¥½çš„è¿™ä¸ªï¼Œåˆ™å•¥éƒ½ä¸åš        if (path!=&quot;æ—§åŸŸå1&quot; &amp;&amp; path!=&quot;æ—§åŸŸå2&quot;) &#123;          console.log(&quot;url not match, do nothing&quot;)        &#125;        else&#123;// å¦åˆ™é‡å®šå‘          window.location.replace(&quot;https://blog.musnow.top/&quot;);        &#125;    &#125;)&lt;/script&gt;\n\nè¿™é‡Œæˆ‘è¿˜ç”¨sleepå‡½æ•°ä¼‘çœ äº†500msï¼Œå¦åˆ™åˆ‡æ¢å¾ˆå¿«ï¼Œè®¿å®¢ä¸æ³¨æ„çš„è¯ï¼Œè¿˜ä¸ä¸€å®šèƒ½å‘ç°301é‡å®šå‘ã€‚\n\nå¦‚æœä½ ä¸éœ€è¦sleepï¼Œé‚£ä»£ç æ›´å°‘\n&lt;script&gt;var path = window.location.href;    console.log(&quot;current path:&quot;,path)    // å¦‚æœurlä¸æ˜¯é¢„å…ˆè®¾å®šå¥½çš„è¿™ä¸¤ä¸ªï¼Œåˆ™å•¥éƒ½ä¸åš    if (path!=&quot;æ—§åŸŸå&quot;) &#123;        console.log(&quot;url not match, do nothing&quot;)    &#125;    else&#123;// å¦åˆ™é‡å®šå‘       window.location.replace(&quot;https://blog.musnow.top/&quot;);    &#125;&lt;/script&gt;\n\nä½†æ˜¯ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘å°±å‘ç°è®¿é—®çš„pathæœ‰çš„æ—¶å€™å¹¶ä¸æ˜¯ä¸¥æ ¼ç­‰äºæˆ‘çš„åŸŸåçš„ï¼Œåé¢å¯èƒ½ä¼šæ–°å¢ä¸€äº›å°¾éšå‚æ•°ã€‚ä¸ºäº†é¿å…æœ‰å°¾éšå‚æ•°è€Œå¯¼è‡´æ— æ³•é‡å®šå‘çš„é—®é¢˜ã€‚æˆ‘å»æ‰äº†ifçš„åˆ¤æ–­\n&lt;script&gt;// 301 Moved Permanentlyvar path = window.location.href;    console.log(&quot;current path:&quot;,path)    // ç¡çœ å‡½æ•°    function sleep (time) &#123;      return new Promise((resolve) =&gt; setTimeout(resolve, time));    &#125;    // ç¡2000ms,ä¹‹åæ‰§è¡Œä¸‹é¢çš„å†…å®¹    sleep(2000).then(() =&gt; &#123;      window.location.replace(&quot;https://blog.musnow.top/&quot;);    &#125;)&lt;/script&gt;\n\n3.netlifyéƒ¨ç½²å°†åˆšåˆšå†™å¥½çš„ä»£ç å†™å…¥ä¸€ä¸ªindex.htmlæ–‡ä»¶ï¼Œå†æ”¾å…¥ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆnetlifyçš„ä¸Šä¼ åªèƒ½ä¸Šä¼ æ–‡ä»¶å¤¹ï¼‰\nå¦‚æœä½ æƒ³ï¼Œè¿˜å¯ä»¥åœ¨æ–‡ä»¶å¤¹é‡Œé¢æ”¾ä¸€ä¸ªfavicon.icoä½œä¸ºä¸´æ—¶çš„ç«™ç‚¹logo\næ‰“å¼€netlifyï¼Œæ‰¾åˆ°Add new siteï¼Œé€‰æ‹©æ‰‹åŠ¨éƒ¨ç½²\n\nåœ¨è¿™é‡Œä¸Šä¼ æ–‡ä»¶å¤¹\n\néƒ¨ç½²å¥½äº†ä¹‹åï¼Œå¯ä»¥åœ¨domain settingsé‡Œé¢é…ç½®åŸŸåä¸ºä½ çš„æ—§åŸŸå\n\n4.æµ‹è¯•å…ˆè®¿é—®æ—§åŸŸåï¼Œæ˜¾ç¤º301é‡å®šå‘çš„ä¿¡æ¯\n\nä¼‘çœ çš„æ—¶é—´åˆ°äº†ä¹‹åï¼Œå°±ä¼šè¢«é‡å®šå‘åˆ°å½“å‰çš„ç«™ç‚¹\n\nç›®çš„è¾¾æˆï¼\n5.æ·»åŠ ä¸Šå°¾éšå‚æ•°å¦‚æœä½ çš„ç«™ç‚¹æœ‰éƒ¨ç½²umamiæˆ–è€…ç™¾åº¦ç»Ÿè®¡ç­‰è®¿é—®ç»Ÿè®¡æœåŠ¡ï¼Œåˆ™å¯ä»¥åœ¨æºç ä¸­è·³è½¬çš„é“¾æ¥é‡Œé¢åŠ ä¸Šæ¥æº\nwindow.location.replace(&quot;https://blog.musnow.top/?utm_source=æ—§åŸŸå&quot;);\n\nè¿™æ ·ï¼Œåœ¨è®¿é—®ç»Ÿè®¡ä¸­ï¼Œå°±èƒ½å¾—çŸ¥æœ‰å¤šå°‘ç”¨æˆ·ç”¨äº†æ—§åŸŸåè®¿é—®äº†ä½ çš„ç«™ç‚¹\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["nginx","Hexo"]},{"title":"ã€Gitã€‘æäº¤ä¿¡æ¯è§„èŒƒ | è½¬è½½","url":"/posts/998453050/","content":"gitä»£ç æäº¤è§„èŒƒçš„é‚£äº›äº‹\n\n\n1.æäº¤æ ¼å¼type(scope): message\n\n\n2.å‚æ•°ä»‹ç»2.1 typetypeï¼šæŒ‡çš„ä»£ç çš„æäº¤ç±»å‹ï¼Œä¸åŒçš„æäº¤ç±»å‹è¡¨ç¤ºå¯¹åº”ä¸åŒçš„ä»£ç æ”¹åŠ¨ï¼Œæ¯”å¦‚ï¼š\n\nfeatï¼šæ–°åŠŸèƒ½çš„å¼€å‘\nfixï¼šbugçš„ä¿®å¤\ndocsï¼šæ–‡æ¡£æ ¼å¼çš„æ”¹åŠ¨\nstyleï¼šä»£ç æ ¼å¼æ”¹å˜\nrefactorï¼šå¯¹å·²æœ‰çš„åŠŸèƒ½è¿›è¡Œé‡æ„\nperfï¼šæ€§èƒ½ä¼˜åŒ–\ntestï¼šå¢åŠ æµ‹è¯•\nbuildï¼šæ”¹å˜äº†buildå·¥å…·\nrevertï¼šæ’¤é”€ä¸Šä¸€æ¬¡çš„commitæäº¤\nchoreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨\n\n2.2 scopescopeï¼šç”¨äºè¯´æ˜commitå½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚ï¼šæƒé™æ¨¡å—ã€è¿˜æ˜¯é¦–é¡µ\n2.3 messagemessageï¼šå¯¹æäº¤çš„ä»£ç åšä¸€ä¸ªç®€çŸ­çš„è¯´æ˜ï¼Œä¸èƒ½è¿‡é•¿ã€‚\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæäº¤æ ¼å¼å¹¶æ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„è§„èŒƒï¼Œä¸ç®¡ä½ æœ€åé‡‡å–äº†ä»€ä¹ˆæ ¼å¼ï¼Œä¸€å®šè¦éµå®ˆä¸€ä¸ªç†å¿µï¼šé‚£å°±æ˜¯åŒä¸€ä»“åº“çš„æ‰€æœ‰ä»£ç æäº¤éœ€è¦é‡‡ç”¨ä¸€ä¸ªå›ºå®šçš„æ ¼å¼ã€‚ä¸èƒ½å‡ºç°ä¸€ä¸ªä»“åº“é‡Œé¢ç”¨ä¸¤ä¸ªé£æ ¼çš„git commitçš„æƒ…å†µ\nä½œè€…ï¼šå¬ä¹¦å…ˆç”Ÿ  é“¾æ¥ï¼šhttps://www.jianshu.com/p/2ab3a991d1f9  æ¥æºï¼šç®€ä¹¦  è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Gitã€‘å¦‚ä½•ä¿®æ”¹æœ¬åœ°ä»“åº“çš„ç”¨æˆ·åå’Œé‚®ç®±","url":"/posts/3842037185/","content":"æœ€è¿‘æˆ‘ä¿®æ”¹äº†æˆ‘giteeå’Œgithubçš„ç”¨æˆ·åè¿˜æœ‰é‚®ç®±ï¼Œæ‰€ä»¥éœ€è¦å¯¹æœ¬åœ°ä»“åº“é…ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±è¿›è¡Œæ›´æ”¹\n\n\n1.å‘½ä»¤ åˆšå¼€å§‹æˆ‘ä½¿ç”¨çš„æ˜¯å¦‚ä¸‹å‘½ä»¤\ngit config --global user.email &quot;é‚®ç®±&quot;git config --global user.name &quot;ç”¨æˆ·å&quot;\n\nä½†æ˜¯å¾ˆä¸è¾›ï¼Œè¿™ä¸ªå‘½ä»¤æ²¡æœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨æ¥åˆå§‹åŒ–ä½ çš„gitç¯å¢ƒçš„ï¼Œå¯¹å·²æœ‰çš„gitä»“åº“ä¸èµ·ä½œç”¨\nä½†æ˜¯æˆ‘ä»¬åœ¨linuxä¸‹å¯ä»¥æ·»åŠ ä¸Šå¦å¤–ä¸€ä¸ªå‚æ•°æ¥å®ç°\ngit config --global --replace-all user.email &quot;é‚®ç®±&quot; git config --global --replace-all user.name &quot;ç”¨æˆ·å&quot;\n\nè¿™æ ·å°±ä¿®æ”¹æˆåŠŸäº†\n\n\nè¿™ä¸ªå‘½ä»¤åœ¨windowsä¸‹ä¼¼ä¹æ— æ³•è¯†åˆ«ï¼Œä¼šå¼¹å‡ºgitçš„å‘½ä»¤è¡Œå¸®åŠ©\n\n\nä½†æ˜¯ï¼Œä¿®æ”¹æˆåŠŸåçš„æäº¤ï¼Œåªå¯¹æœªæ¥çš„æäº¤æœ‰æ•ˆï¼›è¿™é‡Œå¿…é¡»å¾—åæ§½ä¸€ä¸‹giteeå’Œgithubç»Ÿè®¡æäº¤çš„ä¸åŒä¹‹å¤„\n\ngiteeç»Ÿè®¡æäº¤ä¾æ®çš„æ˜¯ç”¨æˆ·å+é‚®ç®±ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸å¯¹å°±æ— æ³•ç»Ÿè®¡\ngithubç»Ÿè®¡æäº¤åªä¾æ®é‚®ç®±ï¼Œåªè¦ä½ é‚®ç®±å¯¹äº†ï¼Œç”¨æˆ·åæ˜¯ä¸ç®¡ä½ çš„\n\næ‰€ä»¥è¦æƒ³è®©giteeçš„ç»Ÿè®¡èƒ½ç”Ÿæ•ˆï¼Œé‚£å°±å¿…é¡»è¦ä¿®æ”¹ä¹‹å‰æ‰€æœ‰æäº¤ä¿¡æ¯ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±\n\n2.ä¿®æ”¹ä¹‹å‰æäº¤ä¸­çš„ç”¨æˆ·åå’Œé‚®ç®±\nå‚è€ƒåšå®¢\n\nå¤åˆ¶å¦‚ä¸‹ä»£ç åˆ°ä¸€ä¸ªæœ¬æ–‡ç¼–è¾‘å™¨é‡Œé¢ï¼Œå°†å†…éƒ¨çš„é‚®ç®±å’Œç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\ngit filter-branch -f --env-filter &#x27;OLD_EMAIL=&quot;åŸæ¥çš„é‚®ç®±&quot;CORRECT_NAME=&quot;ç°åœ¨çš„åå­—&quot;CORRECT_EMAIL=&quot;ç°åœ¨çš„é‚®ç®±&quot;if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;    export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;fiif [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]then    export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;    export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;fi&#x27; --tag-name-filter cat -- --branches --tags\n\néšåå°†å…¶ç²˜è´´åˆ°gitå‘½ä»¤è¡Œä¸­ï¼Œå›è½¦æ‰§è¡Œ\n\n\næ‰§è¡Œå®Œæ¯•ï¼Œå°±èƒ½çœ‹åˆ°æ‰€æœ‰gitæäº¤çš„ç”¨æˆ·åå’Œé‚®ç®±éƒ½ä¿®æ”¹æˆåŠŸäº†ï¼æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å¼ºåˆ¶æäº¤\ngit push -f\n\nå¼ºåˆ¶æäº¤äº†ä¹‹åï¼Œä¹‹å‰æ˜¾ç¤ºä¸å‡ºæ¥çš„ä¿¡æ¯å’Œå°ç»¿ç‚¹ï¼Œç°åœ¨ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤ºäº†\n\nå¦‚æœç”¨ä¸Šé¢çš„å‘½ä»¤ä¿®æ”¹å¤±è´¥çš„è¯ï¼Œé‚£å°±å°è¯•æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\ngit filter-branch -f --index-filter &#x27;git rm --cached --ignore-unmatch Rakefile&#x27; HEAD\n\néšåå†é‡è¯•ä¸Šé¢çš„å‘½ä»¤ï¼Œåº”è¯¥å°±OKäº†\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["Linux","git"]},{"title":"ã€npmã€‘error:03000086:digital envelope routines::initialization error","url":"/posts/2800051647/","content":"error:03000086:digital envelope routines::initialization error é—®é¢˜è§£å†³\n\n\næ…•é›ªæ˜¯åœ¨ä½¿ç”¨vuepressçš„æ—¶å€™é‡åˆ°äº†è¿™ä¸ªé”™è¯¯ã€‚æ ¹æ®å®˜æ–¹çš„æè¿°ï¼Œvuepressåº”è¯¥ä½¿ç”¨node.js 14ç‰ˆæœ¬å³å¯ï¼Œä½†æˆ‘çš„ç”µè„‘ä¸Šæ˜¯18.xã€‚\nå®Œæ•´æŠ¥é”™å¦‚ä¸‹\nPS D:\\Git_repo\\hexo\\khl.py.docs&gt; npm run docs:dev &gt; docs:dev&gt; vuepress dev docswait Extracting site metadata...tip Apply theme @vuepress/theme-default ...tip Apply plugin container (i.e. &quot;vuepress-plugin-container&quot;) ...tip Apply plugin @vuepress/register-components (i.e. &quot;@vuepress/plugin-register-components&quot;) ...tip Apply plugin @vuepress/active-header-links (i.e. &quot;@vuepress/plugin-active-header-links&quot;) ...tip Apply plugin @vuepress/search (i.e. &quot;@vuepress/plugin-search&quot;) ...tip Apply plugin @vuepress/nprogress (i.e. &quot;@vuepress/plugin-nprogress&quot;) ...* Client â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ building (40%) 1/2 modules 1 active node_modules\\webpack-dev-server\\client\\index.jsi ï½¢wdsï½£: Project is running at http://0.0.0.0:8081/i ï½¢wdsï½£: webpack output is served from /i ï½¢wdsï½£: Content not from webpack is served from D:\\Git_repo\\hexo\\khl.py.docs\\docs\\.vuepress\\publici ï½¢wdsï½£: 404s will fallback to /index.htmlnode:internal/crypto/hash:71  this[kHandle] = new _Hash(algorithm, xofLen);                  ^Error: error:0308010C:digital envelope routines::unsupported    at new Hash (node:internal/crypto/hash:71:19)    at Object.createHash (node:crypto:133:10)    at module.exports (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\webpack\\lib\\util\\createHash.js:135:53)    at NormalModule._initBuildHash (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\webpack\\lib\\NormalModule.js:417:16)            at handleParseError (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\webpack\\lib\\NormalModule.js:471:10)    at D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\webpack\\lib\\NormalModule.js:503:5    at D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\webpack\\lib\\NormalModule.js:358:12    at D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\loader-runner\\lib\\LoaderRunner.js:373:3    at iterateNormalLoaders (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\loader-runner\\lib\\LoaderRunner.js:214:10)    at Array.&lt;anonymous&gt; (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\loader-runner\\lib\\LoaderRunner.js:205:4)    at Storage.finished (D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\enhanced-resolve\\lib\\CachedInputFileSystem.js:55:16)      at D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\enhanced-resolve\\lib\\CachedInputFileSystem.js:91:9    at D:\\Git_repo\\HEXO\\khl.py.docs\\node_modules\\graceful-fs\\graceful-fs.js:123:16    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read_file_context:68:3) &#123;  opensslErrorStack: [ &#x27;error:03000086:digital envelope routines::initialization error&#x27; ],  library: &#x27;digital envelope routines&#x27;,  reason: &#x27;unsupported&#x27;,  code: &#x27;ERR_OSSL_EVP_UNSUPPORTED&#x27;&#125;Node.js v18.15.0\n\nä½¿ç”¨åŸæ–‡ä¸­çš„æ–¹æ³•3ï¼ŒæˆåŠŸè§£å†³æ­¤é—®é¢˜\n\nä»¥ä¸‹ä¸ºåŸæ–‡\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå¿™ç¢Œçš„è èã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_21271511/article/details/127996193\n\né—®é¢˜æè¿°é—®é¢˜èƒŒæ™¯æ›´æ¢æ–°æœºå™¨çš„æ—¶å€™ä¸‹è½½ä½¿ç”¨äº†æœ€æ–°ç‰ˆçš„nodejsï¼Œéƒ¨ç½²è€é¡¹ç›®çš„æ—¶å€™å¯åŠ¨æŠ¥é”™äº†\né”™è¯¯æè¿°è·‘äº†ä¸€ä¸‹ruoyiçš„é¡¹ç›®è¯•è¯•ï¼Œå°±ç›´æ¥ç»™æŠ¥äº† Error: error:0308010C:digital envelope routines::unsupported\nError: error:0308010C:digital envelope routines::unsupported\n    at new Hash (node:internal/crypto/hash:71:19)\n    at Object.createHash (node:crypto:133:10)\n    at module.exports (D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\webpack\\lib\\util\\createHash.js:135:53)\n    at NormalModule._initBuildHash (D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\webpack\\lib\\NormalModule.js:417:16)\n    at handleParseError (D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\webpack\\lib\\NormalModule.js:471:10)\n    at D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\webpack\\lib\\NormalModule.js:503:5\n    at D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\webpack\\lib\\NormalModule.js:358:12\n    at D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\loader-runner\\lib\\LoaderRunner.js:373:3\n    at iterateNormalLoaders (D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\loader-runner\\lib\\LoaderRunner.js:214:10)\n    at Array.&lt;anonymous&gt; (D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\loader-runner\\lib\\LoaderRunner.js:205:4)\n    at D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui\\node_modules\\graceful-fs\\graceful-fs.js:123:16\n    at FSReqCallback.readFileAfterClose [as oncomplete] (node:internal/fs/read_file_context:68:3) &#123;\n  opensslErrorStack: [ &#39;error:03000086:digital envelope routines::initialization error&#39; ],\n  library: &#39;digital envelope routines&#39;,\n  reason: &#39;unsupported&#39;,\n  code: &#39;ERR_OSSL_EVP_UNSUPPORTED&#39;\n\né—®é¢˜è§£å†³åŸå› åˆ†æ1ã€åŸé¡¹ç›®æ˜¯åœ¨nodejs 16ç‰ˆæœ¬ä¸Šè·‘ï¼Œç›®å‰å‡çº§ä¸ºnodejs 18ï¼Œå¯èƒ½æ˜¯ç”±äºå‡çº§å½±å“çš„2ã€å…·ä½“é”™è¯¯åŸå› ï¼šERR_OSSL_EVP_UNSUPPORTED é”™è¯¯SSL æ•°å­—ä¿¡å°ä¸æ”¯æŒ\nè§£å†³æªæ–½1ã€set NODE_OPTIONS=--openssl-legacy-provider\nè¿™ä¸ªäº²æµ‹å¹¶æ²¡æœ‰ä»€ä¹ˆè½¯ç”¨\nPS D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui&gt; set NODE_OPTIONS=--openssl-legacy-provider\nPS D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui&gt; npm run dev\n\n&gt; ruoyi@3.8.4 dev\n&gt; vue-cli-service serve\n\n INFO  Starting development server...\n10% building 2/2 modules 0 activeError: error:0308010C:digital envelope routines::unsupported\n\n2ã€é™çº§nodejs\nå‡çº§å†é™çº§ä¹Ÿæ²¡æœ‰é“ç†ï¼Œè™½ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæœ€åæ€»æ˜¯è¦å‡çº§çš„ï¼Œä¸æ¨è\nnvm ls availablenvm install 16.13.0\n\n\næˆ–è€…å¸è½½å½“å‰çš„nodejs é‡æ–°ä¸‹è½½å®‰è£…å³å¯\n3ã€ä¿®æ”¹ç¯å¢ƒå˜é‡é—®é¢˜è§£å†³\n$env:NODE_OPTIONS=&quot;--openssl-legacy-provider&quot;\n\nè¾“å‡ºå¦‚ä¸‹\nPS D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui&gt; $env:NODE_OPTIONS=&quot;--openssl-legacy-provider&quot; PS D:\\dev\\workspace\\RuoYi-Vue-master\\ruoyi-ui&gt; npm run dev&gt; ruoyi@3.8.4 dev&gt; vue-cli-service serve INFO  Starting development server...98% after emitting CopyPlugin DONE  Compiled successfully in 18898ms     \n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"]},{"title":"ã€Gitã€‘è§£å†³git statusä¸­æ–‡ä¹±ç é—®é¢˜ | è½¬è½½","url":"/posts/3422840311/","content":"è§£å†³windowsä¸‹å‘½ä»¤è¡Œä¸­git statusä¸­æ–‡ä¹±ç é—®é¢˜\n\n\nèµ·å› åœ¨é¡¹ç›®ä¸‹è¾“å…¥git statusä¹‹åï¼Œå‡ºç°å¦‚ä¸‹æƒ…å†µï¼š\n\nåœ¨çº¿æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°æ˜¯gitæ·»åŠ äº†å¦‚ä¸‹ç‰¹æ€§ï¼š\n\ngitå‚è€ƒæ–‡æ¡£ï¼šhttps://git-scm.com/docs/git-config\né—®é¢˜æ ¹æ®ä¸Šé¢çš„æ–‡æ¡£å¾—çŸ¥ï¼Œgitå¯¹è¶…è¿‡0x80çš„å­—ç¬¦éƒ½ä¼šä»¥å…«è¿›åˆ¶è¾“å‡ºï¼Œç”±äºä¸­æ–‡ä»¥UTF-8ä¿å­˜ï¼Œæ‰€ä»¥ä¸Šé¢çš„æ–‡ä»¶è·¯å¾„è¾“å‡ºäº†ä¸€å †çš„å…«è¿›åˆ¶è½¬ä¹‰ä»£ç ï¼Œè¿™å¯¹ç”¨æˆ·æå…¶ä¸å‹å¥½ã€‚\næ–‡æ¡£ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯-zï¼Œé€šè¿‡-zé€‰é¡¹çš„ç¡®å¯ä»¥è¾“å‡ºæ­£ç¡®çš„ä¸­æ–‡ï¼Œä½†æ˜¯å´ç¼ºå°‘äº†è¯¦ç»†ä¿¡æ¯ï¼š\n\næ‰€æœ‰çš„è¾“å‡ºå…¨åœ¨ä¸€è¡Œï¼Œå¯¹ç”¨æˆ·ä¹Ÿä¸å¥½å‹ã€‚\næŸ¥é˜…git statuså‘½ä»¤æ–‡æ¡£å¯çŸ¥ï¼š\n\nè¯¥é€‰é¡¹ä¼šä»¥NULä¸ºä¸€è¡Œçš„å‡ ä½ï¼Œä½†æ˜¯ç»ˆç«¯ä¸èƒ½è¯†åˆ«NULç»“å°¾ï¼Œæ‰€ä»¥ç»ˆç«¯ä¸ä¼šè‡ªåŠ¨æ¢è¡Œã€‚\nè§£å†³é‚£ä¹ˆæœ€ç»ˆçš„è§£å†³åŠæ³•ï¼šå…³é—­è¿™ä¸ªç‰¹æ€§ã€‚\ngit config --global core.quotePath false\n\n\nå†æ¬¡æ‰§è¡Œgit statusï¼Œå°±æ²¡æœ‰ä¸­æ–‡çš„ä¹±ç äº†ï¼š\n\nä¸€åˆ‡å›å½’æ­£å¸¸ã€‚\nç„¶ågit add pythonæ·»åŠ æ‰€æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œæ­¤æ—¶ä¹Ÿä¸ä¼šæœ‰ä¸­æ–‡çš„ä¹±ç \n\næ›´å¤šé»˜è®¤æƒ…å†µä¸‹ï¼Œgitä¼šå°†å…¥åº“çš„æ–‡ä»¶çš„è¡Œå°¾ç¬¦æ›¿æ¢ä¸ºLFï¼Œè¿™æ˜¯å› ä¸ºgitåŸç”Ÿçš„å·¥ä½œç¯å¢ƒæ˜¯linux&#x2F;unixï¼Œè€Œæˆ‘ç›®å‰å·¥ä½œç¯å¢ƒæ˜¯windowsï¼Œæ‰€ä»¥è¿™ä¸ªä¹ŸæŒºæ­£å¸¸çš„ã€‚å½“ä¸‹æ¬¡åœ¨windowsä¸‹æ£€å‡ºåˆ†æ”¯çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å°†LFæ›¿æ¢ä¸ºCRLFã€‚\nè¿™ä¸ªè­¦å‘Šå¹¶ä¸ä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Œå®Œå…¨å¯ä»¥å¿½ç•¥ã€‚\nç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œlengye7ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/lengye7/article/details/129208899\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Gitã€‘è§£å†³kex_exchange_identificationé”™è¯¯","url":"/posts/1015332822/","content":"kex_exchange_identification: Connection closed by remote host\n\n\nä»Šå¤©åœ¨windowså‘½ä»¤è¡Œä¸‹å‡†å¤‡ä¸Šä¼ æ–‡ä»¶åˆ°githubçš„æ—¶å€™ï¼Œsshå‡ºç°äº†å¦‚ä¸‹é—®é¢˜\n$ ssh -T git@github.comkex_exchange_identification: Connection closed by remote hostConnection closed by 20.205.243.166 port 22\n\næŒ‰ç…§è€åŠæ³•ï¼Œé‡æ–°ç”Ÿæˆäº†ssh-keyå¹¶æ·»åŠ åˆ°äº†github\nå†æ¬¡æµ‹è¯•ï¼Œä¾æ—§æ˜¯æ­¤æŠ¥é”™ï¼Œå¯å¥‡æ€ªäº†\n\näºæ˜¯ç™¾åº¦äº†ä¸€ä¸‹\nssh -Tv git@github.com\n\nç”¨äº†è¿™ä¸ªå‘½ä»¤ï¼Œæ²¡æƒ³åˆ°å°±å¥½äº†\nHi musnows! You&#x27;ve successfully authenticated, but GitHub does not provide shell access.debug1: channel 0: free: client-session, nchannels 1Transferred: sent 3136, received 2936 bytes, in 0.7 secondsBytes per second: sent 4251.8, received 3980.7debug1: Exit status 1\n\nä¸è¿‡ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯è¿™ä¸ªå‘½ä»¤çš„ä½œç”¨ï¼Œææ€•å°±æ˜¯ç„å­¦ç½‘ç»œé—®é¢˜ç½¢äº†\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Gitã€‘å¦‚ä½•ä¿®æ”¹æœ¬åœ°ä»“åº“çš„ç”¨æˆ·åå’Œé‚®ç®±","url":"/posts/3842037186/","content":"å¦‚æœä½ æƒ³åœ¨giteaä¸Šé¢åŠ å¯†å­˜å‚¨ä¸€äº›æ•°æ®ï¼ˆæ¯”å¦‚ä¸ªäººçš„å¯†ç ï¼‰ä¹‹ç±»ç§å¯†çš„ä¸œè¥¿ï¼Œå¯ä»¥å°è¯•ç”¨git-cryptåŠ å¯†æ–‡ä»¶åå†ä¸Šä¼ \n\n\n\næ¯”å¦‚æœ‰äº›è€å“¥æ‹…å¿ƒgitæ‰˜ç®¡æœåŠ¡å•†ä¼šå·çœ‹è‡ªå·±çš„æ–‡ä»¶ï¼Œé¢â€¦â€¦å’±ä¹Ÿä¸èƒ½å®Œå…¨å¦è®¤è¿™å¯èƒ½æ€§å§\n\nå¦‚ä½•ä½¿ç”¨ä»¥ä¸‹æ¼”ç¤ºçš„åªæœ‰windowsç³»ç»Ÿèƒ½ç”¨\n1.å®‰è£…\noholovko&#x2F;git-crypt-windows\n\nåœ¨ä¸Šé¢çš„é¡¹ç›®ä¸­ä¸‹è½½exeæ–‡ä»¶ï¼Œæ”¾å…¥ä½ ç”µè„‘gitå®‰è£…è·¯å¾„çš„git/cmdç›®å½•ä¸­ï¼Œå³å¯ä½¿ç”¨\nåœ¨ç”µè„‘çš„ä»»æ„ä½ç½®ä½¿ç”¨gitçš„å‘½ä»¤è¡Œè¾“å…¥git-cryptç¡®è®¤æ­£ç¡®å®‰è£…\n2.ä½¿ç”¨åœ¨éœ€è¦åŠ å¯†çš„ä»“åº“ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤\ngit-crypt init\n\nç„¶åè¾“å…¥statuså‘½ä»¤æŸ¥çœ‹çŠ¶æ€\nPS D:\\Program Files\\nas\\MyPWD&gt; git-crypt statusnot encrypted: .gitignorenot encrypted: README.mdPS D:\\Program Files\\nas\\MyPWD&gt;\n\næ·»åŠ .gitattributesæ–‡ä»¶ï¼Œé”®å…¥ä»¥ä¸‹æ ¼å¼çš„å†…å®¹\néœ€è¦åŠ å¯†çš„æ–‡ä»¶è·¯å¾„æˆ–è€…æ–‡ä»¶å filter=git-crypt diff=git-crypt\n\næ­¤æ—¶å…ˆå°†éœ€è¦åŠ å¯†çš„æ–‡ä»¶ç§»å‡ºæœ¬ä»“åº“ï¼Œcommitä¸Šä¼ .gitattributesæ–‡ä»¶ï¼Œå†å°†éœ€è¦åŠ å¯†çš„æ–‡ä»¶ç§»åŠ¨å›æ¥\næ­¤æ—¶å†æŸ¥çœ‹çŠ¶æ€ï¼Œä¼šå‘ç°å·²ç»åŠ å¯†äº†\nPS D:\\Program Files\\nas\\MyPWD&gt; git-crypt statusnot encrypted: .gitattributesnot encrypted: .gitignore    encrypted: PWD/napd.mdnot encrypted: README.mdPS D:\\Program Files\\nas\\MyPWD&gt;\n\næ­¤æ—¶å†ä½¿ç”¨gitä¸‰æ¿æ–§ï¼Œæ­¤æ—¶è¢«æ·»åŠ åˆ°è¿œç«¯çš„æ–‡ä»¶å°±å·²ç»æ˜¯åŠ å¯†è¿‡åçš„äº†\n3.è§£å¯†ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯¼å‡ºå¯†é’¥\ngit-crypt export-key æ–‡ä»¶keyçš„åå­—\n\nå› ä¸ºæ˜¯ä¸ªäººä½¿ç”¨ï¼Œä¸ºäº†é¿å…ä»¥åæ— æ³•æ‰“å¼€æ­¤æ–‡ä»¶ï¼Œåº”åœ¨å¤šå¤„å­˜æ”¾æ­¤keyï¼ˆä½†æ˜¯ä¸è¦å­˜äº‘ç›˜é‡Œé¢ï¼‰\nåªæœ‰åŒæ—¶è·å¾—ä»“åº“æ–‡ä»¶+keyæ‰èƒ½è§£å¯†å‡ºæ­¤é¡¹ç›®ä¸­çš„å†…å®¹ï¼\n\nå½“ç„¶ï¼Œæœ€åˆçš„æœ¬åœ°é¡¹ç›®ä¹Ÿæ˜¯æ˜æ–‡çš„\n\nä½¿ç”¨keyè§£å¯†ä»“åº“æ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°æ˜æ–‡å†…å®¹\ngit-crypt unlock /path/to/key\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Gitã€‘è§£å†³pushæ—¶é‡åˆ°çš„RPC 413å’Œ520é”™è¯¯","url":"/posts/89600062/","content":"è§£å†³git pushé‡åˆ°413å’Œ510RPCé”™è¯¯\n\n\nè¯´æ˜å¦‚é¢˜ï¼Œåœ¨ä½¿ç”¨gitä¸Šä¼ æˆ‘çš„hexoé…ç½®ä»“åº“åˆ°æˆ‘è‡ªå·±æ­å»ºçš„giteaä¸Šæ—¶ï¼Œé‡åˆ°äº†è¿™ä¸ªæŠ¥é”™ã€‚\nè¯´æ˜ï¼šè¯¥ä»“åº“å·²åœ¨giteaä¸­å­˜åœ¨ï¼Œä½†æ˜¯å¾ˆä¹…æ²¡æœ‰æ›´æ–°è¿‡ï¼ˆæ•°ä¸ªæœˆï¼‰ï¼Œä¸€æ¬¡pushçš„æ›´æ–°é‡è¾ƒå¤§\næ‰€ä»¥å°±é‡åˆ°äº†è¿™ä¸ªæŠ¥é”™ï¼ä¸‹é¢ç»™å‡ºä¸¤ä¸ªæŠ¥é”™çš„å®Œæ•´è¾“å‡º\nPS D:\\HEXO\\blog&gt; git push nasEnumerating objects: 30332, done.Counting objects: 100% (30332/30332), done.Delta compression using up to 16 threadsCompressing objects: 100% (12271/12271), done.Writing objects: 100% (30332/30332), 54.44 MiB | 127.27 MiB/s, done.Total 30332 (delta 10987), reused 29639 (delta 10321), pack-reused 0error: RPC failed; HTTP 520 curl 22 The requested URL returned error: 520send-pack: unexpected disconnect while reading sideband packetfatal: the remote end hung up unexpectedly\n\nPS D:\\HEXO\\blog&gt; git push nasEnumerating objects: 30332, done.Counting objects: 100% (30332/30332), done.Delta compression using up to 16 threadsCompressing objects: 100% (12271/12271), done.Writing objects: 100% (30332/30332), 54.45 MiB | 135.99 MiB/s, done.Total 30332 (delta 10984), reused 29639 (delta 10321), pack-reused 0error: RPC failed; HTTP 413 curl 22 The requested URL returned error: 413send-pack: unexpected disconnect while reading sideband packetfatal: the remote end hung up unexpectedly\n\nè§£å†³æ€è·¯ç¬¬ä¸€æ­¥å½“ç„¶æ˜¯ç™¾åº¦äº†ï¼Œç™¾åº¦åˆ°äº†è¿™ç¯‡çŸ¥ä¹æ–‡ç« \n\nçŸ¥ä¹æ–‡ç«  https://zhuanlan.zhihu.com/p/359316694\n\nå…ˆä¾ç…§ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œè®¾ç½®æœ¬åœ°çš„bufferå¤§å°ï¼Œå†å»å°è¯•push\ngit config --global http.postbuffer 524288000\n\né…ç½®å®Œæ¯•è¿™ä¸ªå‘½ä»¤åï¼ŒåŸæœ¬æ˜¯520çš„æŠ¥é”™ï¼Œå˜æˆäº†413æŠ¥é”™\nerror: RPC failed; HTTP 413 curl 22 The requested URL returned error: 413\n\nå†çœ‹æ–‡ç« å†…çš„åˆ†æ\n\n413 Request Entity Too LargeæœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚\n\nè€ƒè™‘åˆ°æˆ‘çš„äº‘æœåŠ¡å™¨æ˜¯ç”¨nginxæ¥åä»£giteaçš„ï¼Œæ‰€ä»¥å°±é‡‡ç”¨æ–‡ç« ä¸­çš„ç¬¬ä¸‰æ­¥ï¼Œä¿®æ”¹nginxé…ç½®ï¼›\nåœ¨giteaçš„nginxé…ç½®æ–‡ä»¶ä¸­çš„serverä½“å†…æ–°å¢äº†å¦‚ä¸‹é™åˆ¶\nclient_max_body_size 200m;\n\né‡æ–°å¯åŠ¨nginxï¼Œå°±æå®šäº†ï¼\nPS D:\\HEXO\\blog&gt; git push nasEnumerating objects: 30332, done.Counting objects: 100% (30332/30332), done.Delta compression using up to 16 threadsCompressing objects: 100% (12271/12271), done.Writing objects: 100% (30332/30332), 54.44 MiB | 136.63 MiB/s, done.Total 30332 (delta 10987), reused 29638 (delta 10321), pack-reused 0remote: Resolving deltas: 100% (10987/10987), done.remote:remote: Create a new pull request for &#x27;hexo&#x27;:remote:   https://gitea.musnow.top/musnow/HexoBlog/compare/main...hexoremote:remote: . Processing 1 referencesremote: Processed 1 references in totalTo https://gitea.musnow.top/musnow/HexoBlog.git * [new branch]        hexo -&gt; hexo\n\næˆåŠŸpushåˆ°giteaçš„è¿œç¨‹ä»“åº“ï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git","nginx"]},{"title":"ã€Gitã€‘å¦‚ä½•åŒæ­¥Giteeå’ŒGithubçš„ä»“åº“ï¼ˆè¶…ç®€å•ï¼‰","url":"/posts/2629909823/","content":"æœ¬ç¯‡åšå®¢çš„è®¾ç½®æ–¹æ³•åŒæ ·å¯ä»¥é€‚ç”¨äºgitlabç­‰å…¶ä»–å¹³å°\nä¸å¤šbbï¼Œç›´å…¥ä¸»é¢˜â²\n\n\nå®ç°ä¸¤ä¸ªä»“åº“çš„åŒæ­¥1.å‡†å¤‡ä¸¤ä¸ªä»“åº“åˆ†åˆ«åœ¨ä¸¤ä¸ªå¹³å°åˆ›å»ºä¸€ä¸ªç›¸åŒåå­—çš„ä»“åº“ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨aå¹³å°ä¸Šå¯¼å…¥bå¹³å°å·²æœ‰çš„ä»“åº“ï¼Œgithubå’Œgiteeç›®å‰éƒ½æ”¯æŒä»åˆ«çš„å¹³å°å¯¼å…¥ä»“åº“\nè¿™éƒ¨åˆ†æ“ä½œæƒ³å¿…å¤§å®¶éƒ½ä¼šï¼Œå°±ä¸æ¼”ç¤ºäº†\n2.å…‹éš†åˆ°æœ¬åœ°éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ è¦ä¿è¯å…¶ä¸­ä¸€ä¸ªæ˜¯ä¸»ä»“åº“ã€‚å¦‚æœæ˜¯å¤šäººåˆä½œä»“åº“çš„è¯ï¼Œæƒ³ä¸¤ä¸ªå¹³å°çš„è¿œç¨‹ä»“åº“åŒæ—¶å¤šäººåˆä½œå¹¶ä¿æŒåŒæ­¥æ˜¯ç›¸å¯¹å›°éš¾çš„ã€‚\n\nhttps://gitee.com/musnow/LetsOJ\n\n\nä»¥æˆ‘åˆ›ç«‹çš„è¿™ä¸ªå¤šäººOJæ‰“å¡ä»“åº“ä¸ºä¾‹ï¼Œç°åœ¨æˆ‘æƒ³å¾—åˆ°çš„æ•ˆæœæ˜¯ï¼Œæˆ‘å’Œæœ‹å‹ä»¬åœ¨giteeä¸Šé¢è¿›è¡Œæ‰“å¡åä½œï¼Œç„¶åæˆ‘é€šè¿‡gitæ“ä½œå°†è¿™ä¸ªä»“åº“åŒæ­¥åˆ°githubä¸Šé¢ï¼Œä»…ä¾›å±•ç¤º\n\nå½“ç„¶å¦‚æœæœ‰å°ä¼™ä¼´æ„¿æ„ç”¨githubè¿›è¡Œforkå’Œpull requestæ“ä½œé‚£æˆ‘ä¹Ÿæ˜¯ä¸¾åŒæ‰‹åŒè„šèµåŒ+æ¬¢è¿çš„\n\néœ€è¦åšçš„æ˜¯ï¼Œæ—¢ç„¶giteeæ˜¯ä¸»æˆ˜åœºï¼Œé‚£å°±å¯¹giteeè¿›è¡Œå…‹éš†æ“ä½œ\ngit clone https://gitee.com/musnow/LetsOJ.git\n\n\n3.è®¾ç½®ç¬¬äºŒä¸ªä»“åº“çš„urlå…‹éš†å®Œæ¯•åï¼Œç›´æ¥è¿›å…¥è¯¥ä»“åº“çš„.gitæ–‡ä»¶å¤¹ï¼Œä¿®æ”¹configæ–‡ä»¶\n\nåœ¨åŸæœ¬giteeçš„urlåé¢ï¼Œæ·»åŠ githubçš„ä»“åº“url\n\næ‰§è¡Œgit remote -vï¼Œä½ å¯ä»¥çœ‹åˆ°githubé“¾æ¥çš„ä»“åº“ä¹Ÿæ˜¾ç¤ºäº†å‡ºæ¥ï¼Œåé¢å¸¦æœ‰pushåç¼€ï¼Œä»£è¡¨æˆ‘ä»¬åªèƒ½å¾€è¿™ä¸ªä»“åº“ä¸Šä¼ ï¼Œå¹¶ä¸èƒ½æ‰§è¡Œgit pullæ“ä½œ\n\nè¿™æ—¶å€™çš„è®¾ç½®å·²ç»å®Œæˆäº†ï¼Œä½ å¯ä»¥è¿›è¡Œä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶åçš„git pushæ“ä½œï¼Œä¸¤ä¸ªä»“åº“éƒ½å¯ä»¥åŒæ­¥ï¼è€Œä¸”ä¸Šä¼ çš„ç¼–å·éƒ½æ˜¯ç›¸åŒçš„ï¼\n\n\nè¿™æ—¶å€™çš„åŸºæœ¬è®¾ç½®å°±å·²ç»å®Œæ¯•äº†ï¼å¦‚æœä½ è¿˜æƒ³åšåˆ°èƒ½ä»githubä»“åº“ä¸­è¿›è¡Œpullæ“ä½œï¼Œé‚£å°±æ¥ç€å¾€ä¸‹çœ‹\n4.å…³äºpullæ“ä½œå‰é¢æåˆ°ï¼Œgithubä»“åº“çš„urlåé¢æœ‰ä¸€ä¸ªpushåç¼€ï¼Œä»£è¡¨æˆ‘ä»¬ä¸èƒ½ä»è¿™ä¸ªä»“åº“é‡Œé¢è·å–æ›´æ–°\nä½ å¦‚æœä¿®æ”¹äº†githubçš„ä»“åº“ï¼Œæ‰§è¡Œgit pullæ“ä½œï¼Œä¼šæ˜¾ç¤ºAlready up-to-date.å› ä¸ºç³»ç»Ÿæ£€ç´¢çš„æ˜¯giteeä»“åº“çš„ä¿®æ”¹ï¼Œå¹¶ä¸çŸ¥é“ä½ çš„githubä»“åº“æœ‰æ— ä¿®æ”¹\n\nè¿™æ—¶å€™å¯ä»¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥\ngit remote add github git@github.com:musnows/Lets_OJ.git\n\nå†æ¬¡git remote -vï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿œç¨‹ä»“åº“ä¸­å¤šå‡ºæ¥äº†ä¸€ä¸ªgithubä¸ºåå­—çš„ä»“åº“ç±»å‹ï¼Œè€Œä¸”è¿™ä¸€æ¬¡çš„ä»“åº“æ˜¯å¯ä»¥fetchä¹Ÿå°±æ˜¯è·å–å†…å®¹çš„\n\nè¿™æ—¶å€™ä½ å¯ä»¥æ‰§è¡Œ\ngit pull github\n\nå³å¯è·å–githubä»“åº“çš„æœ€æ–°æ›´æ–°\nè¿™æ ·å°±å®ç°äº†giteeä»“åº“å’Œgithubä»“åº“çš„å¤šç«¯åŒæ­¥å•¦ï¼\n5.æ•ˆæœæ¼”ç¤ºç°åœ¨æˆ‘è®©æœ‹å‹åœ¨giteeçš„ä»“åº“ä¸­ä¸Šä¼ ä¸€ä¸ªå†…å®¹\n\næ‰§è¡Œgit pullï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿä»giteeçš„ä»“åº“ä¸­æ›´æ–°äº†å†…å®¹\n\nè¿™æ—¶å€™ä½ æ‰§è¡Œgit statusï¼Œç†è®ºä¸Šæ¥è¯´ä¼šå‡ºç°æ–°æ–‡ä»¶å¯¹å§ï¼Ÿå¹¶ä¸ä¼š\n\næ¯•ç«Ÿè¿™æ—¶å€™ç³»ç»Ÿæ£€æŸ¥çš„è¿˜æ˜¯giteeä¸»ä»“åº“ï¼Œå†…å®¹éƒ½æ˜¯å®Œå…¨åŒæ­¥çš„\næˆ‘ä»¬ä¹Ÿä¸éœ€è¦å†™git addå’Œgit commitï¼Œç›´æ¥æ‰§è¡Œgit pushå³å¯ï¼\n\nå†æ‰“å¼€githubç…ç…ï¼Œä½ ä¼šå‘ç°å·²ç»åŒæ­¥æˆåŠŸäº†ï¼\n\n\næé†’å¼ºçƒˆå»ºè®®ï¼šå¦‚æœæ˜¯å¤šäººåˆä½œä»“åº“ï¼Œè¯·ç¡®ä¿åœ¨æŸä¸€ä¸ªå¹³å°ä½œä¸ºä¸»æˆ˜åœºï¼Œå¦å¤–ä¸€ä¸ªå¹³å°ä»…ä½œå±•ç¤ºï¼ˆç•™æ¡£ï¼‰ä½¿ç”¨ï¼\nä¸è¿‡æˆ‘å‘ç°äº†ä¸€ä¸ªå¥½äº‹ï¼Œé‚£å°±æ˜¯å½“æˆ‘ä»giteeå¯¼å…¥è¿™ä¸ªä»“åº“åˆ°githubçš„æ—¶å€™ï¼Œgithubä¸ä»…ä¼šè‡ªåŠ¨åŒæ­¥å°ç»¿ç‚¹ï¼Œè¿˜ä¼šå°†è¿™ä¸ªä»“åº“çš„åä½œè€…åŒæ ·æ˜¾ç¤ºå‡ºæ¥ï¼ˆå‰ææ˜¯åä½œè€…åœ¨githubä¸Šé¢æœ‰åŒé‚®ç®±æ³¨å†Œçš„è´¦æˆ·ï¼‰\n\nä¸€äº›é—®é¢˜çš„è§£å†³1.å…³äºgithubå…‹éš†ç½‘ç»œè®¿é—®é—®é¢˜å…³äºå…‹éš†&#x2F;ä¸Šä¼ githubé—®é¢˜ï¼Œå¾ˆå¤šéƒ½æ˜¯å› ä¸ºä½¿ç”¨httpsé“¾æ¥å¯¼è‡´çš„\næˆ‘ä»¬éœ€è¦ä½¿ç”¨sshç§é’¥æ¥å®ç°githubä»“åº“çš„å…å¯†æ“ä½œ\nssh-keygen -t rsa -C &quot;ä½ çš„gitee/githubè´¦æˆ·é‚®ç®±&quot;\n\ncdè¿›å…¥.sshéšè—æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°ç”Ÿæˆçš„å¯†é’¥pubæ–‡ä»¶\ncatæŸ¥çœ‹è¯¥æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œå°†å…¶å¤åˆ¶\nåœ¨github&#x2F;giteeçš„ä¸ªäººè®¾ç½®é¡µé¢ï¼Œä½ éƒ½èƒ½æ‰¾åˆ°sshå¯†é’¥çš„æ·»åŠ å¤„\n\n\næ·»åŠ sshå¯†é’¥åï¼Œä½ å°±å¯ä»¥é€šè¿‡sshé“¾æ¥æ¥å¯¹githubè¿›è¡Œæ“ä½œäº†ï¼Œè¿™æ—¶å€™ä¸€èˆ¬å°±ä¸ä¼šå‡ºç°ç½‘ç»œé—®é¢˜äº†ï¼\n2â€¦â€¦è¿˜æ²¡é‡åˆ°â€¦â€¦ğŸ˜‚\nç»“è¯­å…³äºè¿™é¡¹æ“ä½œï¼Œç½‘ç»œä¸Šæœ‰å¾ˆå¤šç›¸ä¼¼å†…å®¹ï¼Œä½†æ€»æœ‰äº›è´§ä¸å¯¹æ¿ï¼Œä¸ç¬¦åˆæˆ‘çš„éœ€æ±‚ã€‚æ‰€ä»¥å°±è‡ªå·±å†™äº†ä¸ªåšå®¢\næœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨è¯„è®ºåŒºæå‡ºï¼\n","categories":["ç¼–ç¨‹å­¦ä¹ ","Linux"],"tags":["Linux","git"]},{"title":"ã€æ•™ç¨‹ã€‘Giteeå¦‚ä½•ä¸‹è½½å•ä¸ªæ–‡ä»¶","url":"/posts/2829756684/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•åœ¨giteeä¸Šä¸‹è½½å•ä¸ªæ–‡ä»¶\n\n\nå¼•å‡ºé—®é¢˜ä¸çŸ¥ä½¿ç”¨giteeçš„ä½ ï¼Œæœ‰æ²¡æœ‰é‡åˆ°è¿‡éœ€è¦ä¸‹è½½æŸä¸ªä»“åº“æ–‡ä»¶çš„æƒ…å†µï¼Ÿ\n\næ¯”å¦‚ä¸‹é¢è¿™ä¸ªä»“åº“ï¼Œæ˜¯@å®æ²‰ä¸€ç¬‘å¤§ä½¬è½¬è½½obsidiançš„æ’ä»¶çš„ä»“åº“é“¾æ¥\n\n\nç‚¹å‡»ä¸‹è½½ï¼Œä½ ä¼šå‘ç°giteeå¼€å§‹ç»™ä½ æ‰“åŒ…æ•´ä¸ªä»“åº“æ–‡ä»¶ï¼Œä¸€ä¸ªå‡ ç™¾mçš„ä»“åº“æ€ä¹ˆè¯´ä¹Ÿè¦å‡ åˆ†é’Ÿæ‰èƒ½ä¸‹å®Œã€‚å¯æ˜¯ï¼Œæˆ‘åªæ˜¯éœ€è¦æŸä¸€ä¸ªä¸»é¢˜æˆ–è€…æ’ä»¶ï¼Œgiteeå´ä¸èƒ½å•æ–‡ä»¶æˆ–è€…å•æ–‡ä»¶å¤¹ä¸‹è½½ï¼Œè¿™ä¸ªæ—¶å€™åˆè¦æ€ä¹ˆå¼„å‘¢ï¼Ÿ\n\nè§£å†³é—®é¢˜è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•éå¸¸ç®€å•ï¼\nåªéœ€è¦ç”¨chomeæˆ–è€…æ–°ç‰ˆedgeæµè§ˆå™¨ï¼Œå°±èƒ½ä½¿ç”¨ä¸€ä¸ªæ’ä»¶ï¼Œæ¥è§£å†³è¿™ä¸ªéš¾é¢˜ï¼\næˆ‘ä»¬å¯ä»¥åœ¨edgeè®¾ç½®é‡Œé¢æ‰“å¼€æ‰©å±•å•†åº—ï¼Œæœç´¢GITEE\n\nä¸‹è½½giteeåŠ©æ‰‹å³å¯ï¼\n\nå®‰è£…è¿™ä¸ªæ‰©å±•ä»¥åï¼Œé‡å¯æµè§ˆå™¨ï¼Œå†æ¬¡æ‰“å¼€gitee\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªæ–‡ä»¶ä¹‹åå‡ºç°äº†å•ç‹¬çš„ä¸‹è½½å›¾æ ‡ï¼Œç‚¹å‡»å®ƒå³å¯ä¸‹è½½å•ä¸ªæ–‡ä»¶äº†\n\ngiteeåŠ©æ‰‹çš„ä»£ç ä¹Ÿæ˜¯å¼€æºçš„ï¼Œä¸»é¡µé“¾æ¥ğŸ‘‰ç‚¹æˆ‘\n\nå¤§ä½¬çš„æäº¤ç»¿ç‚¹å°±æ˜¯ä¸ä¸€æ ·\n\n\nç»“è¯­ä¸ªäººä¹Ÿå»ºè®®å¤§å®¶ç›´æ¥ç”¨edgeæµè§ˆå™¨å’Œå¾®è½¯è‡ªå¸¦çš„è¾“å…¥æ³•ï¼ˆè¿™ä¸¤ä¸ªç°åœ¨å·²ç»åšçš„å¾ˆå¥½äº†ï¼‰\né¿å…å…¶ä»–å›½äº§æµæ°“æ±¡æŸ“è‡ªå·±çš„ç”µè„‘\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git","å›¾åºŠ"]},{"title":"ã€Gitã€‘åœ¨Windows CMDä¸­å’ŒVScodeä¸­é…ç½®å·²ç»å®‰è£…å¥½çš„git","url":"/posts/932852149/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•å°†sourcetreeä¸‹è½½å¥½çš„gitå¯¼å…¥åˆ°windowsçš„cmdè¿›è¡Œä½¿ç”¨\n\n\né—®é¢˜å¼•å‡º\næˆ‘ä½¿ç”¨ç³»ç»Ÿä¸ºwin11ã€‚win10çš„æ“ä½œç†åº”ç›¸åŒï¼Œåªä¸è¿‡è®¾ç½®çš„ä½ç½®å¯èƒ½æœ‰å·®å¼‚\n\næˆ‘ç°åœ¨ä½¿ç”¨gitä¸»è¦ç”¨çš„æ˜¯sourcetreeçš„å¯è§†åŒ–ç•Œé¢ï¼Œå¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°æ¯ä¸€æ¬¡æäº¤çš„diffå’Œæäº¤å†å²ï¼Œéå¸¸å¥½ç”¨ï¼Œä¹Ÿå¼ºçƒˆæ¨èå¤§å®¶ä½¿ç”¨ ã€ä½¿ç”¨æ•™ç¨‹ã€‘\n\nä¸è¿‡å½“ä½ åˆæ¬¡å®‰è£…sourcetreeçš„æ—¶å€™ï¼Œä»–ä¼šå¸®ä½ ä¸‹è½½ä¸€ä¸ªgit\nå¦‚æœç³»ç»Ÿä¸­å·²æœ‰gitï¼Œä¹Ÿå¯èƒ½ä¼šè¢«ç§»åŠ¨åˆ°sourcetreeè‡ªå·±çš„å†…ç½®ä½¿ç”¨ç›®å½•ä¸­\n\nè¿™æ ·å°±ä¼šå¯¹æˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨git-cmdé€ æˆä¸€å®šçš„ä¸ä¾¿ã€‚\nå¯¹äºgitä»“åº“ï¼Œsourcetreeä¼šæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œçš„é€‰é¡¹ã€‚ä½†æ˜¯éœ€è¦ä»è¿™é‡Œé¢æ‰“å¼€è‚¯å®šä¸å¦‚ç›´æ¥å³é”®é€‰æ‹©windows cmdæ–¹ä¾¿ï¼\n\nä¸è¿‡å¯¹äºæˆ‘æ¥è¯´ï¼Œä¸€ä¸ªéå¸¸æ£’çš„ä¼˜ç‚¹å°±æ˜¯â€”â€”å¹²æ‰äº†å³é”®èœå•çš„ä¸¤ä¸ªæŒ‰é’®ğŸ˜‚\næ‰€ä»¥ç°åœ¨æˆ‘ä»¬æƒ³åšåˆ°çš„å°±æ˜¯è®©windowsè‡ªå¸¦çš„cmdä¹Ÿå¯ä»¥ç›´æ¥ç”¨ä¸Šgitï¼Œè¿™æ ·å°±ä¸æ‹…å¿ƒå•ç‹¬ä½¿ç”¨git-cmdä¸æ–¹ä¾¿äº†\n\n1.è®¾ç½®æ–°çš„ç»ˆç«¯è·¯å¾„ä¾æ®ä¸Šé¢sourcetreeç»™å‡ºçš„è·¯å¾„ï¼Œæ‰¾åˆ°è¢«è—èµ·æ¥çš„git\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Atlassian\\SourceTree\\git_local\n\næ³¨ï¼šAppDataæ–‡ä»¶å¤¹æ˜¯éšè—çš„ï¼Œéœ€è¦æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­çš„æŸ¥çœ‹éšè—æ–‡ä»¶é€‰é¡¹\n\nåœ¨éšä¾¿ä¸€ä¸ªåœ°æ–¹å³é”®ï¼Œæ‰“å¼€cmd\n\nå³é”®ä¸Šæ–¹è¾¹æ ï¼Œé€‰æ‹©è®¾ç½®\n\nåˆ’åˆ°æœ€åº•ä¸‹ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶\n\nè¿™æ ·è®¾ç½®å³å¯ï¼Œgitçš„å›¾æ ‡ä¹Ÿæ˜¯åœ¨æˆ‘ä»¬åˆšåˆšæ‰“å¼€çš„gitç›®å½•ä¸­å¯ä»¥æ‰¾åˆ°çš„\n\næ³¨æ„ï¼Œå‘½ä»¤è¡Œè¦é€‰æ‹©binä¸­çš„bash.exeè€Œä¸æ˜¯git-bashï¼Œåè€…ä¼šæ‰“å¼€gitè‡ªå·±é‚£ä¸ªè€æ—§çš„å‘½ä»¤è¡Œç»ˆç«¯\n\n\nè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¶éƒ¨çš„å°ä¸‰è§’å›¾æ ‡ä¸­é€‰æ‹©git bashè¿›è¡Œä½¿ç”¨äº†ï¼\n\n\nä¸è¿‡ï¼è¿™æ—¶å€™å¦‚æœä½ åœ¨windows powershellé‡Œé¢æ‰“å‡ºgitï¼Œè¿˜æ˜¯ä¼šæç¤ºæ‰¾ä¸åˆ°gitå‘½ä»¤ã€‚å¦‚æœæ¯ä¸€æ¬¡éƒ½éœ€è¦åœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ï¼Œé‚£è¿˜æ˜¯å¾ˆéº»çƒ¦å‘€ï¼\n\n2.è®¾ç½®ç¯å¢ƒå˜é‡æ‰“å¼€ç”µè„‘è®¾ç½®-ç³»ç»Ÿï¼Œæ‹‰åˆ°æœ€åº•ä¸‹ï¼Œæ‰¾åˆ°ç³»ç»Ÿä¿¡æ¯\n\né€‰æ‹©é«˜çº§ç³»ç»Ÿè®¾ç½®\n\nåœ¨é«˜çº§é¢æ¿ä¸­æ‰“å¼€ç¯å¢ƒå˜é‡\n\nåœ¨ä¸‹æ–¹ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°pathï¼Œé€‰æ‹©ç¼–è¾‘\n\nåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªgitçš„ç¯å¢ƒå˜é‡ï¼Œå¡«å…¥cmdæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œæ³¨æ„æ˜¯cmdæ–‡ä»¶å¤¹ï¼\n\nC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Atlassian\\SourceTree\\git_local\\cmd\n\n\nå¡«å…¥åç¡®å®šä¿å­˜ï¼Œå†æ¬¡æ‰“å¼€windows power shellï¼Œè¾“å…¥git\nå‡ºç°ä¸‹æ–¹çš„gitå‘½ä»¤å¸®åŠ©ï¼Œé‚£å°±å¤§åŠŸå‘Šæˆï¼\n\n\nvscodeä¸­gitè·¯å¾„é…ç½®æ¥éƒ½æ¥äº†ï¼Œé¡ºä¾¿è¯´ä¸€å˜´vscä¸­çš„gitè·¯å¾„é…ç½®å§ï¼\nåœ¨è®¾ç½®ä¸­æœç´¢git pathï¼Œç‚¹å‡»åœ¨settings.jsonä¸­ç¼–è¾‘\n\nåœ¨git.pathä¸­å¡«å…¥è·¯å¾„å³å¯ï¼\næ³¨æ„ï¼šå› ä¸ºæœ‰è½¬ä¹‰ï¼Œæ‰€ä»¥è·¯å¾„åˆ†éš”ç¬¦\\éœ€è¦æ”¹æˆä¸¤ä¸ª\\\\\n\nç‚¹å‡»å·¦ä¾§gitç®¡ç†é¡µé¢ï¼Œçœ‹åˆ°æ­£å¸¸æ˜¾ç¤ºå‡ºä»“åº“å°±OKå•¦ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Gitã€‘gitä»“åº“code reviewè¡Œè¯ | è½¬è½½","url":"/posts/2882797349/","content":"ç¨‹åºå‘˜è¿™ä¸ªè¡Œä¸šï¼Œä¸ç®¡ä½ æ˜¯å¤§ä½¬è¿˜æ˜¯å°å¼Ÿï¼Œä»£ç code reviewæ˜¯å¿…ä¸å¯å°‘çš„ã€‚é‚£ä¹ˆåœ¨gitä¸Šï¼Œå¤§å®¶æ—¥å¸¸äº¤æµçš„ç¼©å†™è¯­ï¼Œå¾€å¾€ä¸€ä¸‹å°±èƒ½çœ‹å‡ºä½ é“è¡Œçš„æ·±æµ…ï¼Œè‡³å°‘æ˜¯å…¥è¡Œæ—¶é—´ï¼Œå“ˆå“ˆï¼Œä¸è¦éœ²æ€¯ï¼Œå‹‡æ•¢çš„è·Ÿå¤§ä½¬è¿‡æ‹›æ‹†æ‹›ã€‚\n\n\næ”¶é›†äº†ä¸€äº›å®ç”¨çš„ç¼©å†™ï¼Œæ–¹ä¾¿å¤§å®¶æ—¥å¸¸äº¤æµ(è£…B)  \nLGTM â€Šâ€”â€Š Looks good to meï¼Œè¡¨ç¤ºè®¤å¯è¿™æ¬¡PRï¼ŒåŒæ„merge åˆå¹¶ä»£ç åˆ°è¿œç¨‹ä»“åº“  ASAP -â€” as soon as possible! å°½å¿«  ACK â€Šâ€”â€Š acknowledgement, i.e. agreed/accepted change  NACK/NAK â€” negative acknowledgement, i.e. disagree with change and/or concept  RFC â€Šâ€”â€Š request for comments, i.e. I think this is a good idea, lets discuss  WIPï¼šWork In Progress ã€Œè¿›å±•ä¸­ã€ï¼Œå¸¸è§è¯æ±‡ï¼Œè¿™é‡Œåšä¸º Best Practice å•ç‹¬æå‡ºæ¥ï¼Œä¸»è¦é’ˆå¯¹æ”¹åŠ¨è¾ƒå¤šçš„ PRï¼Œå¯ä»¥å…ˆæäº¤éƒ¨åˆ†ï¼Œæ ‡é¢˜æˆ– Tag åŠ ä¸Š WIPï¼Œè¡¨ç¤ºå°šæœªå®Œæˆï¼Œè¿™æ ·åˆ«äººå¯ä»¥å…ˆ review å·²æäº¤çš„éƒ¨åˆ†  AFAIK/AFAICT â€Šâ€”â€Š as far as I know / can tell  IIRC â€Šâ€”â€Š if I recall correctly  IANAL â€Šâ€”â€Šâ€œ I am not a lawyer â€, but I smell licensing issues  IMO â€Šâ€”â€Šï¼ˆIn my opinionï¼‰ï¼Œåœ¨æˆ‘çœ‹æ¥  TL;DR â€Šâ€”â€Š Too Long; Didn&#x27;t Read ã€Œå¤ªé•¿æ‡’å¾—çœ‹ã€ï¼ŒREADME æ–‡æ¡£å¸¸è§ã€‚  PR â€Šâ€”â€Š Pull requestã€Œåˆå¹¶è¯·æ±‚ã€  CR â€Šâ€”â€Š Code Review ã€Œä»£ç å®¡æŸ¥ã€  PTAL â€Šâ€”â€Š Please Take A Look. ä½ æ¥ç…ç…ï¼Ÿç”¨æ¥æç¤ºåˆ«äººæ¥çœ‹ä¸€ä¸‹  TBR â€Šâ€”â€Š To Be Reviewed. æç¤ºç»´æŠ¤è€…è¿›è¡Œ review  TBD â€Šâ€”â€Š To Be Done(or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€ã€‚  TBH â€Šâ€”â€Š To be honest ã€Œè€å®è¯´ã€  atm â€Šâ€”â€Š at the moment ã€Œç°é˜¶æ®µã€ï¼Œ\n\nç«™é•¿æ³¨ï¼šå…¶å®ä¸»è¦è¿˜æ˜¯åœ¨çœ‹åˆ«äººprçš„æ—¶å€™ç”¨ï¼Œæ¯”å¦‚åˆ«äººç»™ä½ å‘äº†ä¸€ä¸ªpull rqï¼Œä½ æ£€æŸ¥äº†ä¹‹åï¼Œæ„Ÿè§‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå°±å¯ä»¥å‘ä¸€ä¸ªLGTMè¡¨ç¤ºä½ è®¤å¯äº†è¿™ä¸ªprè´¡çŒ®ï¼\nä½œè€…ï¼šå‰ç«¯å¤§é£  é“¾æ¥ï¼šhttps://www.jianshu.com/p/238a1e1f4037  æ¥æºï¼šç®€ä¹¦  è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€æ•™ç¨‹ã€‘Typora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠï¼ˆè¶…è¯¦ç»†ï¼‰","url":"/posts/1825409965/","content":"å¦‚æœä½ æƒ³æ­å»ºä¸€ä¸ªå’Œæœ¬ç«™ç±»ä¼¼çš„ä¸ªäººåšå®¢ï¼Œé‚£å°±éœ€è¦å›¾åºŠæ¥è¾…åŠ©\n\n\n[TOC]\nä¸ºä»€ä¹ˆè¦æ­å»ºåšå®¢å›¾åºŠ?ä»¥CSDNä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨å¤§éƒ¨åˆ†blogå¹³å°é€šç”¨çš„markdownè¯­æ³•è¿›è¡Œåšå®¢åˆ›ä½œ\nè™½ç„¶CSDNè‡ªå¸¦çš„ç¼–è¾‘å™¨å·²ç»èƒ½æ»¡è¶³æˆ‘ä»¬95%çš„å†™ä½œéœ€æ±‚\nä½†æ˜¯Typoraåœ¨markdownè¯­æ³•ç¼–è¾‘ä¸Šèƒ½ç»™ä½ æä¾›æ›´å¥½çš„å†™ä½œä½“éªŒ\næ‰€ä»¥æˆ‘é€‰æ‹©äº†ä»¥Typora+Picgo+å›¾åºŠçš„æ–¹å¼æ¥è¿›è¡Œåšå®¢åˆ›ä½œ\n\nè€Œåœ¨æœ¬åœ°çš„markdownæ–‡ä»¶.mdä¸­ï¼Œå›¾ç‰‡æ˜¯ä»¥â€œå¤–é“¾â€è¿™ä¸€å½¢å¼å­˜åœ¨çš„\n\nOffice wordä¸­ï¼Œå›¾ç‰‡æ˜¯ç›´æ¥æ’å…¥docxæ–‡ä»¶é‡Œé¢\nMarkdownä¸­ï¼Œå›¾ç‰‡åªæ˜¯ä¸€ä¸ªæœ¬åœ°&#x2F;è”ç½‘çš„åœ°å€\n\nå¦‚å›¾ï¼Œåœ¨markdowné‡Œé¢ï¼Œå›¾ç‰‡æ˜¾ç¤ºçš„å…¶å®æ˜¯ä¸€ä¸ªæœ¬åœ°çš„åœ°å€\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨æœ¬åœ°markdownç¼–è¯‘å™¨ï¼ˆå¦‚typoraï¼‰æ¥ç¼–è¾‘MDæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœMDé‡Œé¢æ’å…¥çš„å›¾ç‰‡çš„æºæ–‡ä»¶è¢«ç§»åŠ¨æˆ–è€…åˆ é™¤äº†ï¼Œæˆ‘ä»¬çš„MDæ–‡æ¡£é‡Œé¢å¯¹åº”çš„å›¾ç‰‡ä¹Ÿæ— æ³•æ˜¾ç¤ºå‡ºæ¥ã€‚\n\nåŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç”¨æœ¬åœ°ç¼–è¾‘å™¨å†™å¥½äº†ä¸€ç¯‡åšå®¢ï¼Œæƒ³æŠŠå®ƒä¸Šä¼ åˆ°CSDNä¸Šã€‚CSDNæ˜¯æ— æ³•è‡ªåŠ¨è½¬å­˜æ–‡ä»¶é‡Œé¢çš„å›¾ç‰‡çš„ã€‚å› ä¸ºè¿™ä¸ªå›¾ç‰‡åªæ˜¯ä¸€ä¸ªä½ ç¡¬ç›˜é‡Œé¢çš„æ–‡ä»¶è·¯å¾„ï¼Œä»–ä¹Ÿæ²¡åŠæ³•è¶Šæƒè·‘åˆ°ä½ ç”µè„‘é‡Œé¢æ‰¾æ–‡ä»¶å‘€ï¼\n[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-i1aotHJh-1679223552739)(./Snipaste_2023-03-19_18-58-37.png)]\n\nä»€ä¹ˆæ˜¯å›¾åºŠï¼Ÿåœ¨æˆ‘ä»¬å¾€typoraé‡Œæ’å…¥å›¾ç‰‡çš„æ—¶å€™ï¼ŒPicGOè‡ªåŠ¨ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠï¼Œå¹¶è¿”å›ä¸€ä¸ªå›¾ç‰‡çš„é“¾æ¥\n\nè¿™æ—¶å€™ä½ çš„å›¾ç‰‡å°±æ˜¯ä¸€ä¸ª**ç½‘ç»œçš„é“¾æ¥(ç½‘å€)**ï¼Œä¸å†æ˜¯æœ¬åœ°è·¯å¾„ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ä»»ä½•æœ‰ç½‘ç»œçš„åœ°æ–¹ã€ç”¨ä»»ä½•è®¾å¤‡è®¿é—®è¿™å¼ å›¾ç‰‡äº†ï¼\n\nå³ä¾¿æ˜¯æœ¬åœ°çš„é‚£å¼ å›¾ç‰‡ç§»åŠ¨oråˆ é™¤ï¼Œä¹Ÿä¸ä¼šå½±å“å›¾åºŠé‡Œçš„è¿™å¼ å›¾ç‰‡ã€‚\nåŒç†ï¼Œtyporaé‡Œé¢çš„å›¾ç‰‡ä¹Ÿå°±ä¸ä¼šå¤±æ•ˆäº†ï¼ŒCSDNä¹Ÿèƒ½æ­£å¸¸ä»ç½‘ç»œä¸Šå°†ä½ çš„å›¾ç‰‡ä¸‹è½½ä¸‹æ¥ï¼Œæˆ‘ä»¬çš„åšå®¢ä¹Ÿèƒ½å¾ˆæ–¹ä¾¿çš„ä»typoraæ‹·è´åˆ°CSDNä¸Šå‘å¸ƒã€‚\n\næ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ­å»ºé˜¿é‡Œäº‘OSSå›¾åºŠçš„æ•™å­¦äº†ï¼\nå‰æ’æé†’ï¼Œé˜¿é‡Œäº‘å›¾åºŠéœ€è¦ä»˜è´¹ğŸ’´ï¼Œä½†ä»·æ ¼éå¸¸ä¾¿å®œï¼ \n\nå¦‚æœä½ æƒ³ç™½å«–ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ç”¨giteeä½œä¸ºä½ çš„å›¾åºŠã€‚ä½†æ˜¯giteeæœ‰å•ä»“åº“æ–‡ä»¶å¤§å°é™åˆ¶(600mb)ã€‚åç»­å›¾ç‰‡å¤šäº†ï¼Œè½¬ç§»å›¾åºŠçš„æˆæœ¬æ›´é«˜ã€‚è¿˜ä¸å¦‚ä¸€å¼€å§‹å°±é€‰ä¸ªå¥½çš„å¹³å°ï¼Œä¸æ˜¯å˜›ï¼Ÿ\ntypora+picgo+giteeå›¾åºŠé…ç½®æ–¹æ³•ï¼Œçœ‹è¿™ä¸ªğŸ‘‰ã€é“¾æ¥ã€‘\n\n22.03.26æ›´æ–°ï¼šæœç„¶â€œå…è´¹çš„æ‰æ˜¯æœ€è´µçš„â€ï¼Œç»è¿‡å¤šä¸ªæœ‹å‹çš„åé¦ˆï¼Œç¡®è®¤giteeå›¾åºŠå·²ç»å´©æºƒï¼Œå›¾ç‰‡åœ¨giteeä»“åº“å†…æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯typora/picgo/obsidianå†…éƒ½æ— æ³•æ­£å¸¸é¢„è§ˆå›¾ç‰‡ï¼ŒCSDNä¹Ÿæ— æ³•è½¬å­˜ï¼å¯èƒ½æ˜¯giteeæ›´æ–°äº†å¤–é“¾æœºåˆ¶ï¼Œæ–°å¢äº†é˜²ç›—é“¾ã€‚\nè¿˜æ˜¯å»ºè®®å¤§å®¶æ›´ç€æœ¬ç¯‡åšå®¢ä½¿ç”¨é˜¿é‡Œäº‘OSSå§ï¼\n1.å‡†å¤‡è½¯ä»¶1.1Typora\nTyporaï¼šã€ä¸­æ–‡å®˜ç½‘ã€‘\n\næƒ³å¿…å„ä½åº”è¯¥å¬å¾ˆå¤šåšä¸»å®‰åˆ©è¿‡Typoraè¿™æ¬¾è½¯ä»¶ï¼Œè¿™é‡Œå°±ä¸å±•å¼€æè¿°äº†\næ–°ç‰ˆæœ¬typoraéœ€è¦ä»˜è´¹ä¹°æ–­ã€‚å¯ä»¥è€ƒè™‘æ”¯æŒæ­£ç‰ˆï¼Œä¹Ÿå¯ä»¥å»æ‰¾æ‰¾æ—§ç‰ˆæœ¬å®‰è£…åŒ…\n\nå‚è€ƒè¿™ä¸ªè§†é¢‘ğŸ‘‰ã€é“¾æ¥ã€‘\nå¦‚æœä½ æ‰¾åˆ°äº†æ—§ç‰ˆæœ¬å®‰è£…åŒ…ï¼Œéœ€è¦ç¡®è®¤typoraç‰ˆæœ¬é«˜äº0.9.86\n\n1.2Picgo\nPicGoï¼šã€Githubåœ°å€ã€‘\n\næ‰¾åˆ°å¯¹åº”å®‰è£…åŒ…ï¼Œä¸‹è½½å®‰è£…å³å¯\n\n2.é…ç½®é˜¿é‡Œäº‘OSSåœ¨æµè§ˆå™¨æœç´¢é˜¿é‡Œäº‘OSSï¼Œå³å¯æ‰¾åˆ°å®˜ç½‘\n\nhttps://www.aliyun.com/product/oss\n\n\n2.1æ³¨å†Œ,å¼€é€šå¯¹è±¡å‚¨å­˜æ³¨å†Œè´¦æˆ·å¹¶å®ååï¼Œè¿›å…¥ä½ çš„æ§åˆ¶å°\n\né€‰æ‹©å¯¹è±¡å‚¨å­˜å¹¶å¼€é€š\n\n2.2åˆ›å»ºbucketåœ¨å·¦ä¾§é€‰æ‹©æ¦‚è§ˆï¼Œç„¶ååœ¨å³ä¾§åˆ›å»ºä¸€ä¸ªæ–°çš„bucket\n\næ³¨æ„ï¼š \n\nBucketåå­—ä¸èƒ½æœ‰å¤§å†™å­—æ¯\næœåŠ¡å™¨å°±è¿‘é€‰æ‹©\nå›¾åºŠé€‰æ‹©æ ‡å‡†å­˜å‚¨\nè¯»å†™æƒé™å…¬å…±è¯»\n\n\nåˆ›å»ºå®Œæˆåï¼Œä½ çš„bucketåº”è¯¥å°±å‡ºç°åœ¨äº†å·¦ä¾§\n2.3æ‰¾åˆ°ä½ çš„åœ°åŸŸèŠ‚ç‚¹ç‚¹å‡»ä½ çš„bucketå\n\nç„¶åç‚¹å‡»bucketä¸‹çš„æ¦‚è§ˆ\n\nåœ¨è®¿é—®åŸŸåä¸€æ æ‰¾åˆ°ä½ çš„åœ°åŸŸèŠ‚ç‚¹ï¼Œåé¢ä¼šç”¨åˆ°\n\nå¦‚å›¾ï¼Œåªéœ€è¦å¤åˆ¶oss-cn-shenzhenå³å¯ï¼Œä¸éœ€è¦åé¢çš„.aliyuncs.com\n\n\n2.4æ‰¾åˆ°ä½ çš„Keyæ¥åˆ°å³ä¸Šè§’ï¼Œé¼ æ ‡æ”¾åœ¨ä½ çš„å¤´åƒä¸Šï¼Œåœ¨å¼¹å‡ºçš„æ¡†é‡Œé€‰æ‹©AccessKeyç®¡ç†\n\nåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†é‡Œï¼Œé€‰æ‹©â€œç»§ç»­ä½¿ç”¨â€\n\nè¿›å…¥åï¼Œåˆ›å»ºä¸€ä¸ªAccessKey\n\nåœ¨å¼¹å‡ºçš„ç•Œé¢é‡Œï¼Œè®°ä½ä½ çš„accessKeyIdå’ŒaccessKeySecret\n\n2.5ç»™ä½ çš„é˜¿é‡Œäº‘è´¦æˆ·å……å€¼2.5.1æ”¶è´¹é—®é¢˜é˜¿é‡Œäº‘OSSçš„å„é¡¹æ”¶è´¹æ˜¯ç‹¬ç«‹çš„ï¼\nå¯¹äºå›¾åºŠè€Œè¨€ï¼Œæœ‰ä¸¤ç§æ”¶è´¹å½¢å¼\n\nä»¥å……å€¼çš„æ–¹å¼ä½¿ç”¨å‚¨å­˜å®¹é‡ä»¥åŠæµé‡(é»˜è®¤çŠ¶æ€)\næŒ‰å¹´&#x2F;æœˆæ”¶è´¹ï¼Œè´­ä¹°ä¸€å®šå­˜å‚¨åŒ…ã€‚æµé‡é¢å¤–æ”¶è´¹\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿ä½ è´­ä¹°äº†ä¸‹å›¾çš„å­˜å‚¨åŒ…ï¼Œä½ ä¾æ—§è¦ä¸ºè®¿é—®å›¾åºŠçš„æµé‡ä»˜é’±ï¼\n\n\nä¸‹å›¾æ˜¯åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œå®¹é‡å’Œæµé‡æ”¶è´¹çš„ä»·æ ¼\n\nå›¾åºŠä½¿ç”¨çš„æ˜¯æ ‡å‡†å‹ï¼Œè¯·å‹¿è´­ä¹°å…¶ä»–ç±»å‹\n\n\nå‚¨å­˜å®¹é‡ï¼š0.12å…ƒ&#x2F;GB&#x2F;æœˆ\nå›¾ç‰‡ä¸Šä¼ åˆ°é˜¿é‡ŒOSSæµé‡ï¼šå…è´¹\nå¤–ç½‘æµå‡ºæµé‡(å¦‚typoraè®¿é—®å›¾åºŠå›¾ç‰‡)ï¼šé—²æ—¶0.25å…ƒ&#x2F;GBï¼Œå¿™æ—¶0.50å…ƒ&#x2F;GB\n\n\n\nä»”ç»†ç®—ç®—ï¼Œæˆ‘ä»¬å›¾åºŠçš„æ•°æ®é‡å…¶å®å¾ˆå°çš„\n\n0.12å…ƒ&#x2F;1GB&#x2F;1ä¸ªæœˆï¼Œä¸€å¹´å°±æ˜¯1.44å…ƒï¼Œè¿œä½äº40GBçš„9å…ƒæ”¶è´¹ï¼\næˆªå›¾&#x2F;ç…§ç‰‡ä»¥å¹³å‡0.5mb&#x2F;å¼ ä¼°ç®—ï¼Œ1gbå¯å­˜æ”¾è¶…è¿‡1600å¼ å›¾ç‰‡ï¼\næ•°æ®ä½äº7GBçš„æƒ…å†µä¸‹ç›´æ¥å……å€¼ï¼Œä»¥GBä»˜è´¹å…¶å®æ¯”è´­ä¹°å‚¨å­˜åŒ…æ›´åŠ å€¼å¾—ï¼\n\n2.5.2æ³¨æ„äº‹é¡¹\nè®°å¾—ç»™é˜¿é‡Œäº‘è´¦æˆ·å……å€¼ï¼ï¼åˆ«åˆ°æ—¶å€™æ¬ è´¹åœç”¨äº†ï¼ï¼\nåˆšå¼€å§‹ä½œå›¾åºŠçš„æ—¶å€™ï¼Œç›´æ¥å……å€¼ä½¿ç”¨å³å¯ï¼Œæ— éœ€è´­ä¹°å®¹é‡åŒ…ï¼\n\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬é˜¿é‡Œäº‘OSSåŸºæœ¬é…ç½®å®Œæ¯•äº†ğŸ˜\n\n3.é…ç½®picgoæ‰“å¼€picgoåï¼Œåœ¨ä½ windowsçš„çŠ¶æ€æ é‡Œæ‰¾åˆ°picgoçš„å›¾æ ‡ï¼Œæ‰“å¼€picgoçš„ä¸»ç•Œé¢\n\n3.1å›¾åºŠè®¾ç½®åœ¨å›¾åºŠè®¾ç½®é‡Œé¢é€‰æ‹©é˜¿é‡Œäº‘OSSï¼Œä¾ç…§ä»¥ä¸‹æ­¥éª¤å¡«å†™ä¿¡æ¯\n\nè®¾å®šKeyldï¼šå¡«å†™åˆšåˆšè·å¾—çš„AccessKeyID\n\nè®¾å®šKeySecretï¼šå¡«å†™AccessKeyIDSecretï¼ˆæ³¨æ„ï¼Œç›´æ¥ä»OSSæ§åˆ¶å°ä¸­å¤åˆ¶keysecretæœ‰æ¦‚ç‡ä¼šå‡ºç°ç©ºæ ¼orå›è½¦ï¼Œå»ºè®®å…ˆå¤åˆ¶åˆ°è®°äº‹æœ¬ä¸­ï¼Œå†å¤åˆ¶åˆ°picgoä¸­ï¼‰\n\nè®¾å®šå‚¨å­˜ç©ºé—´åï¼šå¡«å†™bucketåç§°ã€‚ä¸æ˜¯æµè§ˆå™¨é‡Œçš„åŸŸå\n\næŒ‡å®šå­˜å‚¨è·¯å¾„ï¼šå…¶å®å°±æ˜¯è‡ªå®šä¹‰ä¸€ä¸ªæ–‡ä»¶å¤¹çš„åå­—ï¼Œä»¥/ç»“å°¾. å®ƒä¼šè‡ªåŠ¨åœ¨ä½ çš„bucketé‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶æŠŠå›¾ç‰‡ä¸Šä¼ è¿›å»\n\n\n\nå¼„å®Œä¹‹åï¼Œè®°å¾—â€œç¡®å®šâ€ï¼Œå¹¶ç‚¹å‡»â€œè®¾ç½®ä¸ºé»˜è®¤å›¾åºŠâ€ï¼\n\n3.2picgoè®¾ç½®åœ¨è®¾ç½®é‡Œæ‰“å¼€æ—¶é—´æˆ³é‡å‘½åå’Œä¸Šä¼ åè‡ªåŠ¨å¤åˆ¶URL\n\næ—¶é—´æˆ³é‡å‘½åï¼šä»¥ä¸Šä¼ æ—¶é—´æ¥é‡å‘½åå›¾ç‰‡ï¼Œé¿å…åŒåçš„å›¾ç‰‡æ— æ³•ä¸Šä¼ ï¼ˆè¯¥è®¾ç½®ä¸å½±å“æœ¬åœ°å›¾ç‰‡åï¼‰\n\n\n4.é…ç½®typoraè¿›å…¥typoraä¸»ç•Œé¢ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„â€œæ–‡ä»¶-åå¥½è®¾ç½®â€\n\né€‰æ‹©å›¾åƒ\næ’å…¥å›¾ç‰‡æ—¶ä¸Šä¼ å›¾ç‰‡\nä¸‹é¢çš„é€‰é¡¹å…¨å‹¾ä¸Šï¼ˆç¬¬äºŒé¡¹å¯¹ç½‘ç»œä½ç½®çš„å›¾ç‰‡å¯é’©å¯ä¸é’©ï¼Œä¸»è¦æ˜¯é¿å…åŒä¸€å¼ å›¾ç‰‡è¢«å¤šæ¬¡ä¸Šä¼ ï¼‰\nä¸Šä¼ æœåŠ¡é€‰æ‹©PicGo(app)\nPicGoè·¯å¾„ï¼šæ‰¾åˆ°picgoçš„å®‰è£…è·¯å¾„ï¼Œä¸æ˜¯å®‰è£…åŒ…çš„è·¯å¾„ï¼ï¼ï¼ï¼\n\n\n\n5.æµ‹è¯•æ˜¯å¦æˆåŠŸ5.1 typoraè‡ªå¸¦ä¸Šä¼ æµ‹è¯•è®¾ç½®å®Œæ¯•åï¼Œæˆ‘ä»¬ç‚¹å‡»éªŒè¯å›¾ç‰‡ä¸Šä¼ é€‰é¡¹ï¼Œå¦‚æœå¼¹å‡ºä»¥ä¸‹å¼¹çª—ï¼Œæˆ‘ä»¬çš„å›¾åºŠå°±æå®šäº†ï¼ğŸ˜€\n\nå¦‚æœå‡ºé”™äº†ï¼Œå»ºè®®å…ˆè‡ªå·±çœ‹çœ‹picgoçš„æ—¥å¿—é‡Œé¢ä¸ºä»€ä¹ˆæŠ¥é”™ï¼Œæ£€æŸ¥ä¸€ä¸‹é…ç½®æœ‰æ²¡æœ‰å‡ºé”™ã€‚\nå¦‚æœçœ‹ä¸æ˜ç™½æ—¥å¿—çš„æŠ¥é”™ï¼Œå°±å»picgoçš„githubä»“åº“å¼€ä¸€ä¸ªissueé—®ã€‚å¯¹äºpicgoçš„é”™è¯¯æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæ¥é—®æˆ‘æ˜¯æµªè´¹ä½ çš„æ—¶é—´ğŸ™…â€â™€ï¸\nå¦‚æœä½ åœ¨æ£€æŸ¥è¿‡picgoé…ç½®å†…å®¹å’Œé˜¿é‡Œäº‘OSSè®¾ç½®ã€é‡å¯picgoã€é‡å¯ç”µè„‘åä»ç„¶æ— æ³•æˆåŠŸä¸Šä¼ ã€‚è¿˜å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢çš„é…ç½®æ–¹æ³•ğŸ‘‰ å¾ˆä¸å¹¸ï¼ŒåŸæ–‡å·²è¢«åˆ é™¤\n\n5.2 å¤åˆ¶å›¾ç‰‡æµ‹è¯•ä¸Šä¼ æœ€åæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼ŒéªŒè¯å›¾ç‰‡æ˜¯å¦æ­£å¸¸ä¸Šä¼ ã€‚\næ—¥å¸¸å†™ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦å¤åˆ¶å›¾ç‰‡ï¼Œåœ¨typoraé‡Œé¢ç²˜è´´å³å¯ï¼Œæ— éœ€æ‹–åŠ¨ï¼\nå½“ä½ çš„å›¾ç‰‡é“¾æ¥æ˜¾ç¤ºä¸ºé˜¿é‡Œäº‘çš„ç½‘ç»œé“¾æ¥ï¼Œè€Œä¸æ˜¯æœ¬åœ°è·¯å¾„æ—¶\n\n6.å¤§åŠŸå‘Šæˆï¼åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„å›¾åºŠå°±å¤§è·å…¨èƒœï¼å¼€å§‹ä½ çš„åˆ›ä½œå§ï¼ğŸ§\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€Gitã€‘Sourcetreeçš„åˆå§‹åŒ–ä¸ä½¿ç”¨","url":"/posts/2410861413/","content":"[TOC]\nå‰è¨€è¿˜åœ¨ç”¨å°ä¹Œé¾Ÿç®¡ç†ä½ çš„gitæœ¬åœ°ä»£ç å—ï¼Ÿ\nä¸ºä½•ä¸æ¥å°è¯•ä¸€ä¸‹ï¼Œè¿™æ¬¾ç•Œé¢æ›´åŠ ç›´è§‚çš„gitå¯è§†åŒ–å·¥å…·ï¼\n\nsorcetreeå®˜ç½‘ğŸ‘‰https://www.sourcetreeapp.com/\n\nåˆ«çœ‹åˆ°è‹±æ–‡å®˜ç½‘å°±è·‘äº†ï¼Œè½¯ä»¶æœ¬èº«æ˜¯ä¸­æ–‡ç•Œé¢ï¼\n\n\næ³¨ï¼šæœ¬åšæ–‡åªè®²è¿°sourcetreeåˆå§‹åŒ–æ–¹å¼ï¼Œå¹¶ä¸è®¨è®ºå…¶ä¸TortoiseGitçš„åŠŸèƒ½å¼ºå¼±\n\nä»€ä¹ˆï¼Ÿä½ è¿˜ä¸çŸ¥é“gitæ˜¯å•¥ï¼Ÿ\né‚£è¿˜ä¸èµ¶å¿«ç‚¹å‡»è¿™ç¯‡åšå®¢äº†è§£ä¸€äºŒï¼ğŸ‘‡\n\nå®ä¹ ç”Ÿ Git ä¸ç†Ÿç»ƒï¼Œè¿˜æ²¡è„¸å»é—®æ˜¯ç§ä»€ä¹ˆä½“éªŒâ€¦\n\n\n1.åˆå§‹åŒ–ä¸‹è½½å®‰è£…ä»¥åï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹ç•Œé¢\nè‹¥ä¸éœ€è¦ç”¨bitbucketï¼Œé€‰æ‹©è·³è¿‡å³å¯\n\nç¬¬äºŒæ­¥ï¼Œsourcetreeä¼šè®©ä½ ä¸‹è½½è¿™ä¸¤ä¸ªå·¥å…·\n\nå¦‚æœä½ çš„ç”µè„‘é‡Œå·²ç»æœ‰äº†ï¼Œå®ƒèƒ½æ£€æµ‹å‡ºæ¥å®‰è£…ä½ç½®\nå¦‚æœä½ çš„ç”µè„‘é‡Œæ²¡æœ‰è¿™ä¸¤ä¸ªå·¥å…·ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ ä¸‹è½½\n\n\nç¬¬ä¸‰æ­¥ï¼Œå®ƒä¼šè®©ä½ å¡«å†™ä½ çš„ç”¨æˆ·åå’Œé‚®ç®±\nå»ºè®®è¿™é‡Œå’Œä½ çš„giteeæˆ–githubä¸Šçš„ç”¨æˆ·å&#x2F;é‚®ç®±åŒæ­¥ï¼\n\nå¡«å†™å¥½åï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œä¼šå¼¹å‡ºè¿™ä¸ªç•Œé¢\né€‰æ‹©â€œå¦â€å³å¯\n\n2.å…‹éš†ä»“åº“åˆå§‹åŒ–å®Œæˆåï¼Œä¼šå˜æˆä»¥ä¸‹ç•Œé¢\n\næºè·¯å¾„ï¼šå¡«å†™ä½ çš„gitee&#x2F;githubä»“åº“é“¾æ¥\nç›®æ ‡è·¯å¾„ï¼šé€‰æ‹©ä¸€ä¸ªæœ¬åœ°çš„ç©ºæ–‡ä»¶å¤¹ï¼Œæ³¨æ„è·¯å¾„ä¸è¦æœ‰ä¸­æ–‡\nåå­—ï¼šå¡«å†™ä¸€ä¸ªä¼šåœ¨Sourcetreeé‡Œæ˜¾ç¤ºçš„ä»“åº“åå­—\n\n\n é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè¦æ€ä¹ˆæ‰¾åˆ°ä½ çš„ä»“åº“é“¾æ¥å‘¢ï¼ŸğŸ‘‡\n\n\nå¡«å†™å®Œæ¯•åï¼Œsourcetreeä¼šå¼€å§‹ä¸‹è½½ï¼Œå¹¶åœ¨ä½ é€‰æ‹©çš„è·¯å¾„ä¸‹åˆ›å»ºæœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹\n\nå¦‚æœä½ æœ‰å¤šä¸ªè¿œç¨‹ä»“åº“ï¼Œç‚¹å‡»+å·é‡å¤ä¸Šè¿°æ­¥éª¤å³å¯\n\n\næ·»åŠ å·²æœ‰æœ¬åœ°ä»“åº“å·²æœ‰æœ¬åœ°ä»“åº“çš„æƒ…å†µä¸‹ï¼Œå¯ç›´æ¥ç‚¹å‡»Addæ·»åŠ \nsourcetreeä¼šæ£€æµ‹å‡ºæ¥è¿™æ˜¯ä¸€ä¸ªgitä»“åº“\n\n3.æäº¤ä»£ç å›åˆ°ä¸»ç•Œé¢ï¼Œè¿™é‡Œä¼šå‡ºç°ä½ çš„ä»“åº“pushå†å²ï¼Œä»¥åŠæ“ä½œçš„æ—¥æœŸ\nå¦‚æœä½ çš„æœ¬åœ°ä»“åº“é‡Œé¢åšå‡ºäº†æ›´æ”¹ï¼Œå’Œç½‘ç»œä»“åº“ä¸ä¸€è‡´çš„æ—¶å€™ï¼Œè½¯ä»¶å†…ä¼šåœ¨ç¬¬ä¸€è¡Œæ˜¾ç¤ºæœ‰æœªæäº¤çš„æ›´æ”¹\n\nç‚¹å‡»æ–‡ä»¶çŠ¶æ€ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ æœ¬åœ°ä»“åº“çš„é‚£äº›æ–‡ä»¶åšå‡ºäº†æ›´æ”¹\n\næœªæš‚å­˜æ–‡ä»¶ï¼šæœ¬åœ°æ–‡ä»¶åšå‡ºäº†æ›´æ”¹ï¼Œä½†å¹¶æ²¡æœ‰ç¡®è®¤\nå·²æš‚å­˜æ–‡ä»¶ï¼šä¿å­˜äº†æœ¬åœ°æ–‡ä»¶çš„å‰¯æœ¬ï¼Œç­‰å¾…pushåˆ°è¿œç¨‹ä»“åº“\nåº•éƒ¨ç™½æ¡†ï¼šå¡«å†™pushè¯´æ˜\n\n\nä¾ç…§ä¸‹å›¾æ“ä½œå³å¯\n\nå¦‚æœä½ ä¸é€‰æ‹©â€œç«‹å³æ¨é€å˜æ›´ï¼Œå°±éœ€è¦åœ¨å·¦ä¸Šè§’çš„â€œæ¨é€â€é€‰é¡¹å†…è¿›è¡ŒäºŒæ¬¡æ“ä½œï¼Œæ‰ä¼šä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“\n\n\nå¦‚æœä½ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡gitï¼Œåœ¨è¿™ä¸€æ­¥ç‚¹å‡»æäº¤ä¹‹åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ¡†è®©ä½ å¡«å†™ä½ çš„è´¦å·å¯†ç \nå¡«å†™å¯¹åº”ç½‘ç»œä»“åº“ï¼ˆgitee&#x2F;githubï¼‰çš„è´¦å·å¯†ç å³å¯ï¼\n\nç”¨æˆ·åï¼šå¡«å†™æ³¨å†Œé‚®ç®±\n\n\nç”±äºæœ¬äººå·²ç»å¡«å†™è¿‡ï¼Œä¸”ä¸çŸ¥ä¸ºä½•æ— æ³•åœ¨è´¦æˆ·&#x2F;webå‡­æ®ä¸­æ‰¾åˆ°å¹¶åˆ é™¤å®ƒï¼Œæ•…æ— æ³•å¤ç°è¿™ä¸€æ­¥\n\næ‰€ä»¥æˆ‘å¸®åŒå­¦ä¹Ÿå¼„äº†ä¸€ä¸ªgiteeè´¦æˆ·ï¼Œé¡ºä¾¿å«–æ¥äº†è¿™å¼ å¡«å†™è´¦æˆ·å¯†ç çš„æˆªå›¾\n\nå¡«å†™å®Œè´¦æˆ·å¯†ç åï¼Œsourcetreeå°±å¼€å§‹ä¸Šä¼ ä½ çš„ä»£ç äº†ï¼\n\nå¦‚æœä¸Šä¼ é”™è¯¯ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå¯¹äºçš„gitæŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æŠ¥é”™ä¿¡æ¯ç™¾åº¦æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆå³å¯ï¼\n\n\nä¸Šä¼ æˆåŠŸåå›åˆ°Historyç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ€æ–°çš„æäº¤\n\nåˆ·æ–°ç½‘ç»œä»“åº“é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æ¨é€æˆåŠŸäº†ï¼\n\nè¿™2ä¸ªæœˆçš„ä½¿ç”¨ä¸‹æ¥ï¼Œåªè¦sourcetreeåœ¨ä¸Šä¼ çš„æ—¶å€™æ²¡æœ‰æŠ¥é”™ï¼Œé‚£ä»£ç æ˜¯é“å®šä¸Šä¼ æˆåŠŸäº†ã€‚\næ— éœ€æ‰“å¼€ç½‘ç»œä»“åº“å†ç¡®è®¤ä¸€ä¸‹ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼\n\nå¦‚æœä½ çš„æœ¬åœ°ä»“åº“å¹¶æ²¡æœ‰åšå‡ºæ›´æ”¹ï¼Œæ‰“å¼€æ–‡ä»¶çŠ¶æ€æ ç›®çš„æ—¶å€™ä¼šæ˜¾ç¤ºâ€œæ²¡æœ‰ä»€ä¹ˆå¯æäº¤çš„â€\n\n\n\n4.å›æ»šæäº¤gitæœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯ä¿å­˜æˆ‘ä»¬ä»£ç çš„å†å²ç‰ˆæœ¬\nå¦‚æœä½ æœ€æ–°pushçš„ä»£ç ä¸­å†™äº†ä¸€å †bugï¼Œæˆ–è€…ä¸å°å¿ƒåˆ æ‰äº†ä¸€äº›ä»£ç ï¼Œå°±å¯ä»¥åœ¨gité‡Œé¢æ‰¾åˆ°ä½ çš„å†å²ç‰ˆæœ¬\nåœ¨sourcetreeçš„ä¸»ç•Œé¢ä¸­ï¼Œå³é”®ä¸€ä¸ªä¹‹å‰çš„æäº¤ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªé€‰é¡¹\n\nè¿™ä¸¤ä¸ªé€‰é¡¹çš„åŒºåˆ«ï¼Œç®€å•æè¿°å¦‚ä¸‹ï¼š\n\nå›æ»šï¼šå°†æ”¹åŠ¨çš„ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œä½†æœªæ¨é€åˆ°è¿œç«¯ä»“åº“çš„æ—¶å€™\né‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤ï¼šå°†æ”¹åŠ¨çš„ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“åï¼Œå¹¶å·²æ¨é€åˆ°è¿œç«¯ä»“åº“çš„æ—¶å€™\n\nå…·ä½“çš„åŒºåˆ«åŠæ“ä½œæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡åšå®¢ğŸ‘‡\n\nsourceTreeå›æ»šæäº¤å’Œé‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤çš„åŒºåˆ«\n\né‡ç½®åˆ†æ”¯æ¼”ç¤ºåœ¨è¿™é‡Œæˆ‘ç®€å•æ¼”ç¤ºä¸€æ¬¡é‡ç½®åˆ†æ”¯çš„æ–¹æ³•\nå‡è®¾æˆ‘ä»¬ä¸å°å¿ƒåˆ é™¤äº†æœ¬åœ°æ–‡ä»¶é‡Œé¢çš„ä»£ç \n\næ¯”å¦‚æƒ³å¤åˆ¶å…¶ä»–ä»£ç åˆ°æ­¤æ–‡ä»¶ï¼Œå´åœ¨å¤åˆ¶çš„æ—¶å€™ctrl+aå…¨é€‰ï¼Œè¦†ç›–äº†ä¹‹å‰çš„ä»£ç \n\n\nè€Œåœ¨æäº¤ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬åˆå¿˜è®°æ£€æŸ¥ï¼Œç›´æ¥ä¸Šä¼ åˆ°äº†è¿œç¨‹ä»“åº“\n\n\nè¿™æ—¶å€™ï¼Œå°±å¯ä»¥é€‰æ‹©æˆ‘ä»¬ä¸Šä¸€æ¬¡çš„pushï¼Œé€‰æ‹©é‡ç½®å½“å‰åˆ†æ”¯åˆ°æ­¤æ¬¡æäº¤\nè¿™é‡Œä¼šå‡ºç°3ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æœ€åä¸€ä¸ªâ€œå¼ºè¡Œåˆå¹¶â€\n\nç¡®è®¤åï¼Œæ‰“å¼€ä¹‹å‰è¢«æˆ‘ä»¬åˆ é™¤äº†å†…å®¹çš„ä»£ç æ–‡ä»¶ï¼Œå‘ç°åˆ é™¤äº†çš„ä»£ç å·²ç»å›æ¥äº†ï¼\n\nç”±äºä¹‹å‰çš„æ›´æ”¹å·²ç»æäº¤åˆ°äº†è¿œç¨‹æ¡Œé¢ï¼Œsourcetreeå‘ç°æœ¬åœ°ä»“åº“è½åäºè¿œç¨‹ä»“åº“ï¼Œéœ€è¦æˆ‘ä»¬è¿›è¡Œæ‹‰å–æ“ä½œ\nä½†æ‹‰å–ä¹‹åï¼Œæˆ‘ä»¬é”™è¯¯çš„æ›´æ”¹å°±åˆå›æ¥äº†ï¼Œè¿™å¹¶éæˆ‘ä»¬çš„ç›®çš„\nè¿™æ—¶å€™å¯ä»¥åœ¨souretreeå·¥å…·-é€‰é¡¹ä¸­å¼€å¯gitçš„å¼ºåˆ¶æ¨é€\n\næ³¨ï¼šå¼ºåˆ¶æ¨é€å…·æœ‰é£é™©ï¼Œå»ºè®®æå‰å¤‡ä»½åˆ†æ”¯å†…å®¹\n\n\né€‰æ‹©æˆ‘ä»¬é‡ç½®çš„åˆ†æ”¯ï¼Œå¹¶é€‰æ‹©æ¨é€\n\nå‹¾é€‰ä¸Šå·¦ä¸‹è§’çš„å¼ºåˆ¶æ¨é€\n\nsourcetreeä¼šå¼€å§‹ä¸Šä¼ ï¼Œä¸Šä¼ å®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¹‹å‰çš„é‚£æ¬¡æ¨é€å·²ç»æ¶ˆå¤±äº†ï¼\n\næ‰“å¼€giteeæ£€æŸ¥ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¾ç¤ºäº†â€œå¼ºåˆ¶æ¨é€â€\n\næ‰¾åˆ°æˆ‘ä»¬ä¹‹å‰æ›´æ”¹è¿‡çš„é‚£ä¸ªæ–‡ä»¶ï¼Œå‘ç°å®ƒå·²ç»å›åˆ°äº†æˆ‘ä»¬åˆ é™¤ä¹‹å‰çš„å†…å®¹\n\næˆ‘ä»¬çš„ç›®çš„ä¹Ÿå°±å®Œç¾è¾¾æˆäº†ï¼\n\nè¿˜æ˜¯å»ºè®®å¤§å®¶ä¸Šä¼ çš„æ—¶å€™å¤šå¤šæ£€æŸ¥ï¼Œä¹‹å‰æˆ‘å°±å¹²è¿‡ä¸€æ¬¡è¿™æ ·çš„è ¢äº‹ã€‚\nç¬¬äºŒæ¬¡ç¼–å†™é‚£ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œæ‰å‘ç°ä¹‹å‰çš„ä»£ç æ— äº†ã€‚è¿˜å¥½å¯ä»¥å›é€€ç‰ˆæœ¬ï¼\n\n\nç»“è¯­ä¸ªäººç†è§£ï¼ŒSourcetreeç›¸æ¯”TortoiseGitï¼Œæœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å®ƒçš„ç•Œé¢æ›´ç¾è§‚ï¼\n\nè¿˜æœ‰å¦å¤–ä¸€ä¸ªæˆ‘å¾ˆå–œæ¬¢çš„ç‚¹ï¼šä½¿ç”¨sourcetreeä¸ä¼šè®©ä½ çš„å³é”®èœå•å¤šä¸€å †é€‰é¡¹ï¼\n\nä½¿ç”¨ä»€ä¹ˆæ ·çš„å·¥å…·æ˜¯å¤§å®¶å„è‡ªçš„é€‰æ‹©ï¼Œä¸€èµ·è¿›æ­¥æ‰æ˜¯æˆ‘ä»¬å…±åŒçš„ç›®çš„ï¼åŠ æ²¹ğŸ˜‹\n\nå¦‚æœæœ‰è¯´çš„ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["git"]},{"title":"ã€Picgoã€‘æ­£ç¡®é‡å‘½åæ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸Šä¼ ","url":"/posts/373497921/","content":"picgoæ­£ç¡®è®¾ç½®é‡å‘½åæ–‡ä»¶ï¼Œé¿å…åŒæ–‡ä»¶é‡å¤ä¸Šä¼ \n\n\n1.é—®é¢˜æ¥æºåœ¨ä¹‹å‰é…ç½®picgo+é˜¿é‡Œäº‘osså›¾åºŠçš„åšå®¢ä¸­ï¼Œæˆ‘æåˆ°äº†éœ€è¦å¼€å¯picgoçš„æ—¶é—´æˆ³é‡å‘½ååŠŸèƒ½ï¼Œä»¥é¿å…åŒåæ–‡ä»¶å†²çªã€‚\n\né˜¿é‡Œäº‘OSSé»˜è®¤ç­–ç•¥ï¼šåŒåæ–‡ä»¶ä¼šè¢«è¦†ç›–\n\nç°åœ¨çœ‹æ¥ï¼Œè¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šé‚£å°±æ˜¯æ²¡æœ‰åŠæ³•é¿å…åŒä¸€ä¸ªæ–‡ä»¶çš„å¤šæ¬¡ä¸Šä¼ \nè¯´ç™½äº†å°±æ˜¯ï¼Œæˆ‘æœ‰ä¸€ä¸ªå›¾ç‰‡ï¼Œç»“æœå› ä¸ºè‡ªå·±ä¸å°å¿ƒå¤šå¤åˆ¶äº†å‡ æ¬¡ï¼Œå¯¼è‡´picgoå¤šæ¬¡ä¸Šä¼ äº†è¿™ä¸ªæ–‡ä»¶ã€‚å†åŠ ä¸Šæ—¶é—´æˆ³ä¸åŒï¼Œä¹‹å‰ä¸Šä¼ çš„å›¾ç‰‡å¹¶ä¸ä¼šè¢«è¦†ç›–ï¼Œè€Œæ˜¯ç•™åœ¨é‚£å„¿æ— äººé—®æ´¥ï¼›\näº¦æˆ–è€…æ˜¯å¼€å¯äº†typoraä¸‹å›¾ä¸­å¯¹äºç½‘ç»œä½ç½®çš„å›¾ç‰‡åº”ç”¨ä¸Šè¿°è§„åˆ™ï¼ŒåŒä¸€ä¸ªå›¾ç‰‡éœ€è¦åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°ä¸¤æ¬¡ï¼Œå¤åˆ¶çš„æ—¶å€™ï¼Œå› ä¸ºå¼€å¯äº†è¯¥ç­–ç•¥ï¼Œtyporaè‡ªåŠ¨å¸®ä½ åˆä¸Šä¼ äº†ä¸€éï¼›\n\n1.1 è¯´æ˜é˜¿é‡Œäº‘OSSçš„ç©ºé—´æ˜¯è¦ä»˜è´¹çš„ï¼å¯¹äºä¸ªäººåšå®¢å›¾åºŠè€Œè¨€ï¼Œæˆ–è®¸å¹¶ä¸éœ€è¦å¤šå°‘ç©ºé—´ï¼ˆæœ¬äººä½¿ç”¨é˜¿é‡Œäº‘OSSåšå›¾åºŠå·²æœ‰1å¹´ï¼Œæ‰ç”¨äº†980mbï¼‰\nä»Šå¤©ä¸ºäº†è¿ç§»å…¶ä¸­ä¸€ä¸ªbucketï¼Œå‘ç°äº†é‡Œé¢æœ‰éå¸¸éå¸¸å¤šçš„é‡å¤æ–‡ä»¶ï¼Œæ–‡ä»¶å¤§å°å†…å®¹å®Œå…¨ä¸€è‡´ï¼Œè¿™å°±æ˜¯æ— æ„ä¹‰çš„ç©ºé—´æµªè´¹ï¼Œå¯¹äºå®¹é‡è®¡è´¹çš„ossæ¥è¯´ï¼Œè¿™å¯éƒ½æ˜¯ğŸ’´å•Šï¼\næ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ ‡è¯†æ–‡ä»¶çš„æ–¹æ³•ï¼Œé¿å…åŒä¸€ä¸ªæ–‡ä»¶çš„å¤šæ¬¡ä¸Šä¼ ã€‚\næ¯”è¾ƒå¥½çš„åŠæ³•ï¼Œé‚£å°±æ˜¯ç”¨æ–‡ä»¶çš„hashå€¼æ¥å‘½åè¿™ä¸ªæ–‡ä»¶ã€‚æ­¤æ—¶ï¼ŒåŒä¸€æ–‡ä»¶çš„hashå€¼æ˜¯ä¸€æ ·çš„ï¼Œä¸Šä¼ åˆ°ossé‡Œé¢ä¹‹åä¼šç›´æ¥è¦†ç›–ï¼Œå¹¶ä¸ä¼šå¤šå ç”¨ä¸€ä»½ç©ºé—´ï¼æˆ‘ä»¬çš„ç›®çš„ä¹Ÿå°±è¾¾åˆ°äº†\n2.ä½¿ç”¨picgoæ’ä»¶è§£å†³\næ’ä»¶å¼€æºåœ°å€ liuwave&#x2F;picgo-plugin-rename-file\n\n2.1 å®‰è£…æˆ‘çš„picgoæ˜¯2.3.1ç‰ˆæœ¬çš„ï¼Œèƒ½ç›´æ¥åœ¨æ’ä»¶å¸‚åœºå®‰è£…\n\nå®‰è£…å¥½äº†ä¹‹åï¼Œåœ¨è¿™é‡Œé…ç½®\n\n2.2 é…ç½®éµå¾ªä»“åº“readmeé‡Œé¢çš„é…ç½®æ–¹æ³•\n\nè¿™é‡Œæˆ‘é€‰æ‹©äº†æ¯”è¾ƒç®€å•çš„é…ç½®æ–¹æ³•ï¼Œå¹´+æœˆ+å“ˆå¸Œå€¼\n&#123;y&#125;/&#123;m&#125;/&#123;hash&#125;\n\nè¿™ä¹ˆåšæ˜¯ä¸ºäº†é¿å…hashå€¼ç¢°æ’ï¼Œè™½ç„¶åŒä¸€äººèƒ½äººå·¥å¼„å‡ºä¸¤ä¸ªhashç¢°æ’çš„å›¾ç‰‡çš„å¯èƒ½æ€§åŠå…¶ä½ï¼Œä½†åŠ ä¸Šä¸€ä¸ªå¹´ä»½å’Œæœˆä»½ï¼Œå¯èƒ½æ€§å°±æ›´ä½äº†ğŸ˜‚\nè¿™æ ·å°±èƒ½ä¿è¯åœ¨åŒä¸€æœˆä¸Šä¼ çš„å›¾ç‰‡ä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒå›¾ç‰‡ä¼šç›´æ¥è¦†ç›–ï¼Œä¸ä¼šå¤šå ç”¨ä¸€ä»½ç©ºé—´ã€‚\n\nè‡³äºå…¶ä»–é€‰é¡¹ï¼Œå‚è€ƒæ–‡æ¡£ã€‚ä¸ªäººè§‰å¾—æ²¡æœ‰å¤ªå¤§å¿…è¦ï¼Œæ¯•ç«Ÿéƒ½ä¸Šä¼ åˆ°å›¾åºŠäº†ï¼Œè°è¿˜ç®¡è¿™ä¸ªæ–‡ä»¶çš„åŸåå’Œæœ¬åœ°å­˜å‚¨è·¯å¾„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n3.æ”¶å·¥è®¾ç½®å®Œæ¯•ä¹‹åï¼Œç°åœ¨ä¸Šä¼ çš„å›¾ç‰‡å‘½åæ ¼å¼å¦‚ä¸‹\n20234d48b94bd1054488005eb239741c807d.png\n\nå†æ¬¡æ‰‹åŠ¨ä¸Šä¼ ä¸€éè¿™ä¸ªæ–‡ä»¶ï¼Œå‘ç°è¿”å›çš„urlæ˜¯ç›¸åŒçš„\næˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ"]},{"title":"ã€æ—¥å¿—ã€‘åˆæ‹äº‘CDNè¢«æ¶æ„è¯·æ±‚","url":"/posts/1758576550/","content":"è‡ª23.03.23èµ·ï¼Œå›¾åºŠCDNé­åˆ°äº†æŒç»­ä¸€å‘¨çš„æ¶æ„è¯·æ±‚ï¼\n\n\nè¯´æ˜è¯·æ±‚æ¥è‡ªåŒä¸€ä¸ªipï¼Œè¯·æ±‚çš„æ˜¯åŒä¸€å¼ å›¾ç‰‡ï¼Œæ¯ç§’è¯·æ±‚çº¦15æ¬¡ï¼Œé«˜å³°æœŸéƒ½æ˜¯åœ¨å‡Œæ™¨ï¼Œç™½å¤©æ¯ç§’ä¹Ÿåªè¯·æ±‚4æ¬¡ï¼ˆæ€•ä¸æ˜¯ç™½å¤©è¦ç”¨ç”µè„‘ï¼Œç»™çˆ¬è™«é™æµâ€¦â€¦ï¼‰ï¼Œæœ€ç»ˆå¯¼è‡´æ—¥è¯·æ±‚é‡ä¸Šäº†100wï¼Œæ—¥å‡æ‰£è´¹4å…ƒğŸ˜’\nåœ¨æˆ‘ç¦æ‰ä»–çš„ç§»åŠ¨ipåï¼Œä»–æ¢äº†å¦å¤–ä¸€ä¸ªç”µä¿¡çš„ipç»§ç»­è¯·æ±‚åŒä¸€å¼ å›¾ç‰‡ã€‚\nå› ä¸ºä¸¤ä¸ªipçš„å±åœ°ç›¸åŒï¼Œéƒ½æ˜¯å®¶å®½ï¼Œæ— æ³•è¢«pingï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºæ˜¯åŒä¸€ä¸ªäººï¼\næˆ‘å‘ç°çš„å·²ç»æœ‰ç‚¹æ™šäº†ï¼Œå¯¹æ–¹å·²ç»æ¶æ„è¯·æ±‚äº†å°†è¿‘ä¸€å‘¨ã€‚è™½ç„¶åˆæ‹äº‘OSSé…ç½®äº†IPè®¿é—®é™åˆ¶ï¼Œä½†å’¨è¯¢äº†å®¢æœåï¼Œå¾—çŸ¥å³ä¾¿è¢«403æŒ¡æ‰çš„è¯·æ±‚ï¼ˆåœ¨æ—¥å¿—ä¸­ï¼Œä¸€ä¸ªå°æ—¶å°±æœ‰4wä¸ªè¯·æ±‚è¢«403é˜»æ­¢ï¼‰ï¼Œä¾æ—§ä¼šè®¡å…¥httpsè´¹ç”¨ã€‚\nåœ¨æ­¤æé†’å¤§å®¶ï¼Œåˆæ‹äº‘çš„æ—¥æ‰£è´¹æé†’æœ€ä½åªèƒ½è®¾ç½®ä¸º10å…ƒï¼Œå»ºè®®éš”1-2å¤©ä¸Šæ§åˆ¶å°æŸ¥çœ‹ä¸€ä¸‹ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŠæ—¶å‘ç°å¹¶é˜»æ­¢å¯¹æ–¹çš„æ¶æ„è¯·æ±‚\nå‡ ç§ååˆ¶ç­–ç•¥1. ç¦æ­¢ä»–çš„ip2. åˆ é™¤æºç«™å›¾ç‰‡ï¼Œæ¸…ç©ºcdnç¼“å­˜ï¼Œå°†åŸæœ‰urlé…ç½®444è®¿é—®è§„åˆ™ï¼ˆè§ä¸‹æ–¹æˆªå›¾ï¼‰3. ä¸¥é‡çš„æ—¶å€™ç›´æ¥å…³é—­CDNçš„åŸŸåè§£æ\n\næˆªå›¾ä¸‹å›¾ä¸­è¯·æ±‚è¿…é€Ÿé™ä½æ˜¯å› ä¸ºæˆ‘å…³é—­äº†è¯¥cdnçš„åŸŸåè§£æ\n\næ˜¨å¤©ä¸Šåˆå°±è¯·æ±‚äº†44wæ¬¡ï¼Œ3.28ä¸€æ•´å¤©è¯·æ±‚äº†101wæ¬¡\n\næ‰£è´¹ï¼Œå¿ƒç–¼å•Šï¼\n\nä¸ªäººè§‰å¾—httpsè¯·æ±‚å¦‚æœè¢«403äº†è¿˜è¿›è¡Œç›¸åŒä»·æ ¼çš„æ‰£è´¹æ˜¯ä¸å¤ªåˆç†çš„ï¼ˆ\n\n$WHEN($MATCH($_URL,&quot;éœ€è¦æ‹¦æˆªçš„urlè·¯å¾„&quot;,true))$EXIT(444)\n\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ"]},{"title":"ã€ä¸ƒç‰›äº‘ã€‘artalkè¡¨æƒ…é‡åˆ°è·¨åŸŸè®¿é—®é—®é¢˜","url":"/posts/489538601/","content":"å¦‚é¢˜ï¼Œå½“æˆ‘åœ¨æˆ‘è‡ªå·±ç¼–å†™çš„æ–‡æ¡£ç«™ç‚¹ https://khl-py.eu.org/ è®¿é—®æˆ‘çš„artalkæœåŠ¡æ—¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªartalkè¡¨æƒ…çš„è¯·æ±‚ï¼Œè¢«æµè§ˆå™¨çš„è·¨åŸŸç­–ç•¥ç»™æŒ¡ä½äº†ã€‚è¿™ä¼šå¯¼è‡´artalkè¯„è®ºä¸­æ— æ³•å‘é€è¡¨æƒ…ï¼ˆè™½ç„¶æ— ä¼¤å¤§é›…ï¼‰\nAccess to fetch at &#x27;https://img.musnow.top/i/artalk-emoji.json&#x27; from origin &#x27;https://khl-py.eu.org&#x27; has been blocked by CORS policy: No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource. If an opaque response serves your needs, set the request&#x27;s mode to &#x27;no-cors&#x27; to fetch the resource with CORS disabled.\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸ƒç‰›äº‘çš„CDNç­–ç•¥ä¸­è¿›è¡Œé…ç½®ï¼ˆæˆ‘çš„ä¸ƒç‰›äº‘KODOæ˜¯ç»‘å®šåˆ°CDNä¸Šï¼Œé€šè¿‡CDNè¿›è¡Œè®¿é—®çš„ï¼‰\næ‰¾åˆ°CDNç•Œé¢ä¸­çš„HTTPå“åº”å¤´é…ç½®\n\nç‚¹å‡»ä¿®æ”¹é…ç½®ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤ç‚¹\n\nä¿å­˜åè¿‡ä¸€ä¼šï¼Œå°±ä¸ä¼šå‡ºç°è¿™ä¸ªè·¨åŸŸè®¿é—®é—®é¢˜äº†ã€‚è‡³äºè¿™éƒ¨åˆ†è®¾ç½®ä¼šä¸ä¼šå¯¼è‡´æœ‰äººç›—åˆ·ä½ çš„CDNæµé‡ï¼Œä»å¾…æ›´å¤šçš„è§‚å¯Ÿã€‚\nå¦å¤–ï¼Œå¦‚æœä½ çš„CDNè¿˜å¼€å¯äº†é˜²ç›—é“¾ï¼Œè¿˜éœ€è¦æŠŠå¯¹åº”åŸŸåå¡«å…¥é˜²ç›—é“¾çš„ç™½åå•ä¸­ï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ"]},{"title":"ã€æ•™ç¨‹ã€‘Typora+PicGo+åˆæ‹äº‘ussæ­å»ºåšå®¢å›¾åºŠ","url":"/posts/3648256488/","content":"Typora+PicGo+åˆæ‹äº‘UOSæ­å»ºåšå®¢å›¾åºŠ\n\n\n1.åˆæ‹äº‘uosé…ç½®1.1 åˆ›å»ºè¿›å…¥æ§åˆ¶å°åï¼Œç‚¹å‡»äº‘å­˜å‚¨ï¼Œåˆ›å»ºäº‘å­˜å‚¨æœåŠ¡ã€‚é…ç½®ä½ çš„æœåŠ¡åç§°ï¼Œæ“ä½œå‘˜åç§°ï¼Œå’Œæ“ä½œå‘˜çš„æƒé™ã€‚\nè¯·ä¿å­˜æ“ä½œå‘˜çš„å¯†ç ï¼Œåç»­é…ç½®picgoç”¨å¾—åˆ°\n\n1.2 åŠ é€ŸåŸŸåç‚¹å‡»å¦‚ä¸‹å›¾é½¿è½®è¿›å…¥é…ç½®é¡µé¢\n\nåœ¨ä¸‹å›¾ç»‘å®šä½ çš„åŸŸåï¼ˆéœ€è¦å·²å¤‡æ¡ˆåŸŸåï¼‰\n\n1.3 httpséšååœ¨ä¸‹å›¾æ‰€ç¤ºå¤„é…ç½®åŸŸåçš„è¯ä¹¦ã€‚å¦‚æœä½ æ²¡æœ‰sslè¯ä¹¦ï¼Œå¯ä»¥åœ¨åˆæ‹äº‘çš„æ§åˆ¶å°ä¸»é¡µç”³è¯·ä¸€ä¸ªå…è´¹çš„letâ€™s encrpyè¯ä¹¦\n\n1.4 è®¿é—®æ§åˆ¶åœ¨è®¿é—®æ§åˆ¶é‡Œé¢å¯ä»¥é…ç½®å„ç§å½¢å¼çš„æ§åˆ¶ã€‚\nå¯¹äºåšå®¢å›¾åºŠè€Œè¨€ï¼Œrefereré˜²ç›—é“¾æ˜¯ä¸€å®šè¦æ‰“å¼€çš„ï¼Œå…¶ä½™æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œé…ç½®\nIPé»‘ç™½åå• # ç™½åå•ï¼šå…è®¸çš„ip,é»‘åå•ï¼šä¸å…è®¸çš„ip# å¦‚æœå‘ç°æŸä¸€ä¸ªipçš„è¯·æ±‚æ¬¡æ•°è¿‡å¤šï¼Œæœ‰æ¶æ„è¯·æ±‚å«Œç–‘ï¼Œå¯ä»¥æš‚æ—¶å°†è¿™ä¸ªipè®¾ç½®ä¸ºé»‘åå•CORS è·¨åŸŸå…±äº« # å‚è€ƒhttp://ruanyifeng.com/blog/2016/04/cors.htmlåœ°åŒºè®¿é—®é™åˆ¶ # ç¦æ­¢æˆ–å…è®¸ç‰¹å®šåœ°åŒºçš„é™åˆ¶Referer é˜²ç›—é“¾ # é‡ç‚¹ï¼Œå»ºè®®å¼€å¯ç™½åå•ï¼Œåªå°†è‡ªå·±çš„åŸŸåæ·»åŠ åˆ°ç™½åå•ä¸­ï¼ˆå»ºè®®å¼€å¯ï¼‰User-Agent é˜²ç›—é“¾ # é™åˆ¶åªæœ‰æŸç§ç±»å‹çš„å®¢æˆ·ç«¯ã€æµè§ˆå™¨å¯ä»¥è®¿é—®èµ„æºToken é˜²ç›—é“¾ # æœ‰äº›éº»çƒ¦ï¼Œè¯·è‡ªè¡Œäº†è§£ã€‚å¯¹äºé™æ€åšå®¢è€Œè¨€ï¼Œå¹¶ä¸æ–¹ä¾¿å›æºé‰´æƒ # å¦‚æœæºç«™æœåŠ¡å™¨æœ‰é‰´æƒæ“ä½œï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®IP è®¿é—®é™åˆ¶ # å¯¹å•ä¸ªipçš„è¯·æ±‚é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼ˆå»ºè®®å¼€å¯ï¼‰CC é˜²æŠ¤ # é˜²æŠ¤ccæ”»å‡»WAF ä¿æŠ¤ # Web Application Firewall\n\n2.picgoé…ç½®ç›¸æ¯”äºé˜¿é‡Œäº‘ossï¼Œè¿™é‡Œçš„picgoé…ç½®å°±æŒºæ˜äº†äº†\n\nåœ¨picgoçš„ä¸Šä¼ åŒºæµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½æ­£å¸¸ä¸Šä¼ \n3.typoratyporaçš„åå¥½è®¾ç½®ä¸­ï¼Œå›¾åƒä¸€æ é€‰æ‹©ä¸Šä¼ å›¾ç‰‡ï¼Œå‹¾é€‰å¦‚ä¸‹å‡ é¡¹ã€‚\nä¸Šä¼ æœåŠ¡è®¾ç½®ä¸ºpicgo(app)ï¼Œè·¯å¾„å¡«å†™ä¸ºä½ picgoçš„å®‰è£…è·¯å¾„ã€‚\n\néšåç‚¹å‡»å·¦ä¸‹è§’éªŒè¯å›¾ç‰‡ä¸Šä¼ ï¼Œå‡ºç°å¦‚ä¸‹æ‰€ç¤ºä»£è¡¨é…ç½®æˆåŠŸ\n\næ­¤æ—¶æˆ‘ä»¬çš„å›¾åºŠå°±å·²ç»é…ç½®å¥½äº†\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€Typora+Lskyã€‘åœ¨deepinä½¿ç”¨YGXB-net/lsky-uploadä¸Šä¼ å›¾ç‰‡","url":"/posts/4106816943/","content":"åœ¨winå’Œdeepinä¸Šä½¿ç”¨lsky-uploadä¸Šä¼ å›¾ç‰‡\n\n\n1.è¯´æ˜å…ˆå‰ä½¿ç”¨lskyå›¾åºŠçš„æ—¶å€™ï¼Œæˆ‘ä¸€ç›´ç”¨çš„æ˜¯picgoçš„æ’ä»¶æ¥ä¸Šä¼ å›¾ç‰‡ã€‚\nä½†æœ€è¿‘picgoæ€»æ˜¯é‡åˆ°å¡ä¸Šä¼ çš„é—®é¢˜ https://github.com/Molunerfinn/PicGo/issues/1060\nåæ¥åœ¨giteeä¸Šé¢æœåˆ°äº†è¿™ä¸ªé¡¹ç›®ï¼Œå…¶èƒ½å°†typoraçš„å›¾ç‰‡ä¸Šä¼ åˆ°lskyï¼Œç¼ºç‚¹å°±æ˜¯åªæ”¯æŒlskyå›¾åºŠã€‚ä¸è¿‡æˆ‘æ­£å¥½è¦çš„å°±æ˜¯è¿™ä¸ªï¼\nhttps://github.com/YGXB-net/lsky-upload/releases\n\nè¿›releasesä¸‹è½½ä½œè€…buildå¥½çš„windowsåŒ…ï¼ŒæŒ‰ä½œè€…çš„READMEè¿›è¡Œæ“ä½œï¼Œå°±èƒ½åœ¨windowsä¸‹æˆåŠŸä¸Šä¼ å›¾ç‰‡ã€‚\nç»è¿‡äº†ä¸€å¤©çš„ä½¿ç”¨ï¼Œæ²¡æœ‰å‡ºç°picgoçš„å¡ä¸Šä¼ é—®é¢˜ã€‚å¼€å¿ƒï¼\n\näºæ˜¯å°è¯•åœ¨deepinä¸‹é¢ä¹Ÿbuildä¸€ä¸ªgoçš„åŒ…\n2.å®‰è£…goç¯å¢ƒå’Œé‡åˆ°çš„é—®é¢˜sudo apt-get install golang\n\nbuildçš„æ—¶å€™é‡åˆ°äº†å¦‚ä¸‹é—®é¢˜\nmothra@mothra-PC: ~/Downloads/lsky-upload$ go buildinternal/config/config.go:4:2: package embed is not in GOROOT (/usr/lib/go-1.15/src/embed)\n\nç™¾åº¦åˆ°çš„è§£å†³åŠæ³•è¯´è¦ä¿®æ”¹ä¸€ä¸ªgoçš„ç¯å¢ƒå˜é‡\nmothra@mothra-PC:~/Downloads/lsky-upload$ go env -w GO111MODULE=offmothra@mothra-PC:~/Downloads/lsky-upload$ go installmain.go:7:2: cannot find package &quot;github.com/tidwall/gjson&quot; in any of:        /usr/lib/go-1.15/src/github.com/tidwall/gjson (from $GOROOT)        /home/mothra/go/src/github.com/tidwall/gjson (from $GOPATH)main.go:9:2: cannot find package &quot;lsky-upload/internal/config&quot; in any of:        /usr/lib/go-1.15/src/lsky-upload/internal/config (from $GOROOT)        /home/mothra/go/src/lsky-upload/internal/config (from $GOPATH)main.go:10:2: cannot find package &quot;lsky-upload/internal/httpapi&quot; in any of:        /usr/lib/go-1.15/src/lsky-upload/internal/httpapi (from $GOROOT)        /home/mothra/go/src/lsky-upload/internal/httpapi (from $GOPATH)main.go:11:2: cannot find package &quot;lsky-upload/internal/utils&quot; in any of:        /usr/lib/go-1.15/src/lsky-upload/internal/utils (from $GOROOT)        /home/mothra/go/src/lsky-upload/internal/utils (from $GOPATH)\n\nä½†ä¿®æ”¹äº†ä¹‹åé—®é¢˜æ›´å¤šäº†â€¦â€¦æ¥æ¥å›å›æäº†åŠå°æ—¶ï¼Œæ²¡è§£å†³\n3.è§£å†³æ„å»ºé—®é¢˜çœ‹äº†ä¸€å †æ²¡ç”¨çš„åšå®¢ï¼Œè¯´è¦æ”¹ç¯å¢ƒå˜é‡ï¼Œé…ç½®é¡¹ä»€ä¹ˆçš„â€¦â€¦æœ€ç»ˆè¿˜æ˜¯å­—æœ€å°‘çš„æœ€æœ‰ç”¨ã€‚å…¶å®å°±æ˜¯æˆ‘çš„goç‰ˆæœ¬å¤ªä½äº†ï¼Œæ›´æ–°ä¸€ä¸‹æ–°ç‰ˆæœ¬å°±è¡Œäº†\nhttps://blog.csdn.net/qq_35633748/article/details/129436192\n\næˆ‘åœ¨deepinä¸‹çš„goæ˜¯ç”¨apt-getå®‰è£…çš„ï¼Œç‰ˆæœ¬æ˜¯1.15ï¼Œè€Œæœ€æ–°ç‰ˆå·²ç»æ˜¯1.20.4äº†\nhttps://golang.google.cn/dl/\n\nå»è¿™ä¸Šé¢ä¸‹è½½äº†linuxä¸‹çš„å®‰è£…åŒ…\nwget https://golang.google.cn/dl/go1.20.4.linux-amd64.tar.gz\n\næ“ä½œä¹‹å‰ï¼Œå…ˆå°†æ—§çš„golangç»™å¸è½½äº†\nsudo apt-get remove golangsudo apt autoremove\n\nè¾“å‡ºç»“æœå¦‚ä¸‹\n~/Downloads$ sudo apt-get remove golangè¯·è¾“å…¥å¯†ç :éªŒè¯æˆåŠŸæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ       è½¯ä»¶åŒ… golang æœªå®‰è£…ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å¸è½½ä¸‹åˆ—è½¯ä»¶åŒ…æ˜¯è‡ªåŠ¨å®‰è£…çš„å¹¶ä¸”ç°åœ¨ä¸éœ€è¦äº†ï¼š  golang-1.15 golang-1.15-doc golang-1.15-go golang-1.15-src golang-doc golang-go golang-srcä½¿ç”¨&#x27;sudo apt autoremove&#x27;æ¥å¸è½½å®ƒ(å®ƒä»¬)ã€‚å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚~/Downloads$ sudo apt autoremoveæ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆæ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘       æ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ       ä¸‹åˆ—è½¯ä»¶åŒ…å°†è¢«ã€å¸è½½ã€‘ï¼šè¿›åº¦ï¼š[ 93%] [#############################################################################################.......] å‡çº§äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œæ–°å®‰è£…äº† 0 ä¸ªè½¯ä»¶åŒ…ï¼Œè¦å¸è½½ 7 ä¸ªè½¯ä»¶åŒ…ï¼Œæœ‰ 0 ä¸ªè½¯ä»¶åŒ…æœªè¢«å‡çº§ã€‚è§£å‹ç¼©åå°†ä¼šç©ºå‡º 363 MB çš„ç©ºé—´ã€‚æ‚¨å¸Œæœ›ç»§ç»­æ‰§è¡Œå—ï¼Ÿ [Y/n] y\n\nå¸è½½æ—§ç‰ˆæœ¬åï¼Œè§£å‹åˆšåˆšä¸‹è½½çš„æ–°ç‰ˆæœ¬åŒ…\nsudo tar -C /usr/local -xzf go1.20.4.linux-amd64.tar.gz\n\nç„¶åä¿®æ”¹ç¯å¢ƒå˜é‡\nsudo vim /etc/profile\n\nåœ¨æœ«å°¾æ·»åŠ ï¼Œ:wqä¿å­˜å¹¶é€€å‡º\nexport PATH=$PATH:/usr/local/go/bin\n\nä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆsourceæ‰¾ä¸åˆ°å‘½ä»¤ï¼Œäºæ˜¯é‡å¯äº†æœºå™¨ï¼ˆæˆ‘ç”¨çš„è™šæ‹Ÿæœºï¼‰\nsudo source /etc/profile\n\n$ sudo source /etc/profilesudo: sourceï¼šæ‰¾ä¸åˆ°å‘½ä»¤\n\né‡å¯ä¹‹åï¼Œçœ‹çœ‹ç‰ˆæœ¬\ngo version\n\nå·²ç»æ˜¯æœ€æ–°çš„äº†\n$ go versiongo version go1.20.4 linux/amd64\n\nå…‹éš†ä½œè€…çš„ä»“åº“\nhttps://github.com/YGXB-net/lsky-upload.git\n\næˆ–è€…ç”¨giteeçš„\nhttps://gitee.com/YGXB-net/lsky-upload.git\n\nå…‹éš†åè¿›å…¥ä»“åº“è·¯å¾„\ncd lsky-upload\n\nè¿›è¡Œæ„å»º\ngo build\n\nä¸€åˆ‡æ­£å¸¸ï¼Œä¸ä¼šæœ‰è¾“å‡ºã€‚ls -læŸ¥çœ‹æ–‡ä»¶ï¼Œä¼šå¤šä¸€ä¸ªlsky-uploadå¯æ‰§è¡Œæ–‡ä»¶\n-rwxr-xr-x 1 mothra mothra 8060493 5æœˆ   7 12:12 lsky-upload\n\n\nå…ˆæ‰§è¡Œä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šæœ‰åˆå§‹é…ç½®æ–‡ä»¶çš„è¾“å‡ºã€‚ä¹Ÿæ˜¯æ ¹æ®ä»“åº“çš„READMEé…ç½®æˆä½ çš„å›¾åºŠurlå’Œtokenå°±è¡Œäº†\n./lsky-upload\n\n4.é…ç½®typoraè¿™æ—¶å€™å°±åªéœ€è¦å°†typoraçš„ä¸Šä¼ å‘½ä»¤ä¿®æ”¹ä¸ºè¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±å¯ä»¥äº†ï¼\n\nPS: deepinä¸Šçš„typoraæ˜¯æˆ‘åœ¨deepinçš„è½¯ä»¶å•†åº—é‡Œé¢ä¸‹è½½çš„typora-å…è´¹ç‰ˆï¼Œç‰ˆæœ¬æ˜¯0.11.18\n\n\nç‚¹å‡»éªŒè¯æµ‹è¯•ä¸€ä¸‹èƒ½å¦æ­£å¸¸ä¸Šä¼ ï¼Œæ²¡é—®é¢˜ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ","typora"]},{"title":"ã€å›¾åºŠã€‘é€šè¿‡Cloudflareçš„è‡ªå®šä¹‰ä¸»æœºåæœåŠ¡ä»£ç†å›¾åºŠåŸŸå","url":"/posts/923376033/","content":"è¯´æ˜æˆ‘çš„ç›®çš„æ˜¯ï¼Œå›¾åºŠçš„åŸŸåï¼Œå›½å†…ä¾æ—§ä½¿ç”¨ä¸ƒç‰›äº‘CDNï¼Œå¢ƒå¤–çš„è¯·æ±‚ä½¿ç”¨Cloudflareä»£ç†ã€‚Cloudflareèƒ½å¸®æˆ‘ä»¬æ‹¦æˆªä¸€äº›é«˜å±çš„IPåœ°å€ï¼Œèƒ½é¿å…æµ·å¤–è‚‰é¸¡åˆ·ä½ çš„å›¾åºŠæœåŠ¡ã€‚\nå¦‚æœä½ ç”¨è¿‡Cloudflareï¼Œå…¶åœ¨SSL&#x2F;TLSæ¨¡å—æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰ä¸»æœºåçš„æœåŠ¡ï¼Œå¯ä»¥è®©ç”¨æˆ·åœ¨ä¸å°†åŸŸåæ”¹æˆCloudflareçš„DNSçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Cloudflareçš„ä»£ç†åŠŸèƒ½ã€‚\nè¿™ä¸ªåŠŸèƒ½æ˜¯Cloudflare for SAASçš„ä¸€éƒ¨åˆ†ï¼Œä½ åº”è¯¥èƒ½åœ¨ç½‘ä¸Šæ‰¾åˆ°å¾ˆå¤šæ•™ç¨‹ã€‚\n\næœ€æ–° CloudFlare CNAME æ¥å…¥ç©æ³•è¯¦ç»†å›¾æ–‡æ•™ç¨‹ - SaaSÂ·æ°¸ä¹…å…è´¹Â·å®˜æ–¹ç¨³å®š - VirCloudâ€™s Blog - Learning&amp;Sharing\nCloudflare Saas æ¥å…¥CNAMEæµç¨‹-è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘\nCloudflare CNAME æ¥å…¥æ»¡è¡€å¤æ´»ï¼Œä¸€åˆ†é’±ä¸ç”¨èŠ±ï¼-CSDNåšå®¢\n\nç®€å•è¯´æ¥ï¼Œæƒ³ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œéœ€è¦å¦‚ä¸‹å‡ ä¸ªæ¡ä»¶\n\nå®é™…ä½¿ç”¨çš„åŸŸåï¼šå¯¹äºæˆ‘è€Œè¨€æ˜¯musnow.top\nç”¨äºæŒ‡å®šå›é€€æºçš„åŸŸåï¼šè¿™æ˜¯ç¬¬äºŒä¸ªåŸŸåï¼Œåå­—æ— æ‰€è°“ï¼Œå¯ä»¥ç›´æ¥å»EU.orgç”³è¯·ä¸€ä¸ªå…è´¹çš„ã€‚è¯¥åŸŸåéœ€è¦æ¥å…¥Cloudflareçš„DNSï¼Œè¿™é‡Œç”¨example.comä¸¾ä¾‹å­\nä¸€ä¸ªäº‘æœåŠ¡å™¨ï¼ŒIPç”¨1.1.1.1ä¸¾ä¾‹å­\n\nå½“ä½ é…ç½®å¥½äº†ä¹‹åï¼Œè¯·æ±‚ç½‘ç«™çš„è·¯å¾„å˜æˆäº†å¦‚ä¸‹æ¨¡æ ·\né…ç½®å‰ï¼šåŸŸåmusnow.top-&gt;Aè®°å½•-&gt;äº‘æœåŠ¡å™¨1.1.1.1é…ç½®åï¼šåŸŸåmusnow.top-&gt;CNAMEè®°å½•-&gt;å›é€€æºåŸŸåexample.com-&gt;Cloudflare-&gt;äº‘æœåŠ¡å™¨1.1.1.1\n\nä½¿ç”¨è‡ªå®šä¹‰ä¸»æœºååŠŸèƒ½ï¼Œå¯ä»¥è®©Cloudflareåœ¨è¯·æ±‚ä½ æºç«™çš„æ—¶å€™ï¼Œä½¿ç”¨åŸæœ‰åŸŸåï¼ˆå®é™…ä½¿ç”¨çš„åŸŸåï¼‰ï¼Œè€Œä¸æ˜¯å›é€€æºåŸŸåã€‚å‡è®¾ä½ éœ€è¦å›æºçš„äº‘æœåŠ¡å™¨æ˜¯å›½å†…çš„æœåŠ¡å™¨ã€‚\nå›é€€æºåŸŸåexample.comæ²¡æœ‰å¤‡æ¡ˆ -&gt; è¯·æ±‚å›½å†…æœåŠ¡å™¨ä¼šè¢«æœåŠ¡å•†æ‹¦æˆªé…ç½®è‡ªå®šä¹‰ä¸»æœºåmusnow.topåï¼›Cloudflareåœ¨å›æºåˆ°æœåŠ¡å™¨çš„æ—¶å€™ï¼Œé‡‡ç”¨è‡ªå®šä¹‰ä¸»æœºåçš„åŸŸåï¼Œå³musnow.topï¼›å®é™…ä½¿ç”¨çš„åŸŸåmusnow.topå·²å¤‡æ¡ˆ -&gt; è¯·æ±‚å›½å†…æœåŠ¡å™¨ä¸å†è¢«æ‹¦æˆª\n\næ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œå›é€€æºåŸŸåexample.comå¯¹äºç”¨æˆ·æ˜¯æ— æ„ŸçŸ¥çš„ï¼æˆ‘ä»¬å®ç°äº†åœ¨åŸæœ‰åŸŸåmusnow.topçš„DNSæ²¡æœ‰æ¥å…¥Cloudflareçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨äº†Cloudflareçš„é˜²æŠ¤æœåŠ¡ã€‚\nç›®å‰å…è´¹ç‰ˆæœ¬çš„è‡ªå®šä¹‰ä¸»æœºåæœ‰å¦‚ä¸‹è¦æ±‚\n\nCloudflareå¿…é¡»è¦éªŒè¯ä½ çš„æ”¯ä»˜æ–¹å¼ï¼Œä¸ä¼šæ‰£ä½ é’±çš„ï¼ˆpaypalæˆ–è€…é“¶è”ä¿¡ç”¨å¡ï¼Œå½“æ—¶ä¸ºæ­¤æˆ‘è¿˜ä¸“é—¨å»åŠäº†ä¸ªæ²¡æœ‰é¢åº¦çš„å­¦ç”Ÿä¿¡ç”¨å¡ï¼Œåæ¥å‘ç°å‹æ ¹ä¸éœ€è¦ï¼Œç›´æ¥ç”¨paypalç»‘å®šä¸ªé“¶è”å‚¨è“„å¡&#x2F;å€Ÿè®°å¡å°±å¯ä»¥äº†ï¼‰\nå…è´¹ç‰ˆæœ¬çš„å›é€€æºåªèƒ½æŒ‡å®šä¸€ä¸ªï¼Œå³åªèƒ½å›æºåˆ°ä¸€ä¸ªIPåœ°å€çš„æœåŠ¡ã€‚\n\né…ç½®å›é€€æºé¦–å…ˆæ˜¯è®¾ç½®å›é€€æºåŸŸåçš„DNSï¼Œå°†å…¶æ¥å…¥Cloudflareã€‚éšåæ˜¯åœ¨DNSè®°å½•ä¸­æ·»åŠ ä¸€ä¸ªAè®°å½•ï¼ŒæŒ‡å‘ä½ çš„æºç«™æœåŠ¡å™¨IPã€‚\n\nè¿™é‡Œæˆ‘ä½¿ç”¨çš„åç§°æ˜¯back.å›é€€æºåŸŸåï¼Œåœ¨SSL&#x2F;TLSæ¨¡å—çš„è‡ªå®šä¹‰ä¸»æœºåä¸­å¼€é€šCloudflare SAASæœåŠ¡ï¼Œå¹¶æ·»åŠ å›é€€æºåŸŸå\n\næ·»åŠ å›é€€æºåŸŸåå¹¶éªŒè¯æˆåŠŸåï¼Œå°±å¯ä»¥ç‚¹å‡»è“è‰²æ·»åŠ è‡ªå®šä¹‰ä¸»æœºåæŒ‰é’®ï¼Œæ·»åŠ ä½ éœ€è¦ä»£ç†çš„åŸå§‹åŸŸåäº†ã€‚\nè¿™é‡Œæˆ‘æ·»åŠ äº†æˆ‘çš„å›¾åºŠåŸŸåimg.musnow.topï¼Œé¦–å…ˆæ˜¯åœ¨è…¾è®¯äº‘çš„DNSä¸­è®¾ç½®CNAMEè§£æï¼Œå°†å¢ƒå¤–çº¿è·¯è®¾ç½®ä¸ºå›é€€æºçš„åŸŸåï¼Œé»˜è®¤çº¿è·¯è¿˜æ˜¯ä¸ƒç‰›äº‘CDNçš„CNAME\n\næ·»åŠ äº†åŸŸåè§£æä¹‹åï¼Œä½ è¿˜éœ€è¦åœ¨musnow.topçš„DNSè§£æé‡Œé¢æ·»åŠ ä¸¤ä¸ªTXTè®°å½•æ¥éªŒè¯å›é€€æºï¼Œå‚è€ƒCloudflareç»™å‡ºçš„txtè®°å½•æç¤ºå°±å¯ä»¥ã€‚ç•Œé¢ç±»ä¼¼ä¸‹å›¾\n\næ·»åŠ äº†ä¹‹åç‚¹å‡»åˆ·æ–°ï¼Œç›´åˆ°è‡ªå®šä¹‰ä¸»æœºåçš„çŠ¶æ€æ˜¾ç¤ºä¸ºæœ‰æ•ˆï¼Œå³é…ç½®æˆåŠŸã€‚\n\nä½¿ç”¨æµ·å¤–æœåŠ¡å™¨æµ‹è¯•ï¼Œé…ç½®å‰ï¼Œè§£æåˆ°ä¸ƒç‰›äº‘CDNï¼›é…ç½®åï¼Œè§£æåˆ°å›é€€æºåŸŸåï¼Œå³Cloudflare\n\nåå‘ä»£ç†ä½†è¿™é‡Œåªæ˜¯é…ç½®å¥½äº†åŸŸåè§£æè€Œå·²ï¼Œè¿˜éœ€è¦ç”¨åä»£æ‰èƒ½è®©å¢ƒå¤–è®¿é—®å›¾åºŠåŸŸåèƒ½è®¿é—®å‡ºå›¾ç‰‡æ¥ã€‚\nåä»£åŸæœ‰ä¸ƒç‰›äº‘CDNçš„CNAMEä¸èµ·ä½œç”¨ä½†æ˜¯è¿™ä¸ªåä»£è¦æ€ä¹ˆé…ç½®å‘¢ï¼Ÿå› ä¸ºåªæ˜¯è§£æçº¿è·¯ä¸åŒï¼Œç›´æ¥æŠŠimg.musnow.topåå‘ä»£ç†åˆ°img.musnow.topè‚¯å®šä¸è¡Œï¼Œè¯•è¯•åä»£åˆ°ä¸ƒç‰›äº‘çš„CNMAEï¼Ÿ\næµ‹è¯•å‘ç°ï¼Œç›´æ¥é€šè¿‡ä¸ƒç‰›äº‘CDNé‡Œé¢çš„CNAMEè®¿é—®è¿™ä¸ªå›¾ç‰‡ä¼š403ï¼ˆä¸ç®¡æ˜¯æµè§ˆå™¨è®¿é—®è¿˜æ˜¯ä½¿ç”¨curlè®¿é—®ï¼‰\nè€Œåä»£è¿‡åï¼Œcurlå’Œwgetçš„ç»“æœéƒ½å˜æˆäº†526ï¼Œæ— æ³•è®¿é—®å›¾ç‰‡\nâ•°â”€ curl https://img.musnow.top/i/2023/05/647563ddab0fb.giferror code: 526%    â•°â”€ wget https://img.musnow.top/i/2023/05/647563ddab0fb.gif--2023-12-16 18:48:21--  https://img.musnow.top/i/2023/05/647563ddab0fb.gifResolving img.musnow.top (img.musnow.top)... 172.67.157.61, 104.21.56.251, 2606:4700:3035::ac43:9d3d, ...Connecting to img.musnow.top (img.musnow.top)|172.67.157.61|:443... connected.HTTP request sent, awaiting response... 526 2023-12-16 18:48:21 ERROR 526: (no description).\n\n\nå³ä¾¿åœ¨åä»£é‡Œé¢è®¾ç½®äº†åç«¯è¯·æ±‚çš„åŸŸåä¸ºimg.musnow.topï¼Œè®¿é—®ä¾æ—§ä¼šæ˜¯526\n\næœªè®¾ç½®Cloudflareæ—¶èƒ½æˆåŠŸè§£æä½œä¸ºå¯¹æ¯”ï¼Œåœ¨æ²¡æœ‰é…ç½®è§£æåˆ°Cloudflareçš„æ—¶å€™ï¼Œä½¿ç”¨wgetæ˜¯èƒ½è®¿é—®å‡ºå›¾ç‰‡æ¥çš„\n\nå°†wgetçš„è¿™ä¸ªå›¾ç‰‡é€šè¿‡sftpä¸‹è½½ä¸‹æ¥ï¼Œèƒ½çœ‹åˆ°å®ƒæ˜¯æ­£å¸¸çš„gifï¼Œå›¾ç‰‡è®¿é—®æ²¡æœ‰é—®é¢˜ã€‚\n\nè§£å†³æ–¹æ¡ˆæˆ‘èƒ½æƒ³åˆ°çš„è§£å†³åŠæ³•ï¼Œæ˜¯ç™½å«–ä¸€ä¸‹ä¸ƒç‰›äº‘å…è´¹çš„10GB HTTPæµé‡ï¼Œæ–°å»ºä¸€ä¸ªHTTPå›æºçš„CDNï¼Œç»‘å®šåˆ°å›¾åºŠçš„bucketä¸Šå³å¯ã€‚\n\næ³¨æ„ï¼Œåªè¦ä½ çš„å›æºåœ°å€æ˜¯å›½å†…çš„bucketï¼Œé‚£ä¹ˆåŸŸåå°±å¿…é¡»è¦å¤‡æ¡ˆæ‰èƒ½é…ç½®CDNã€‚\n\nå› ä¸ºç°åœ¨æ˜¯é€šè¿‡äº‘æœåŠ¡å™¨åä»£æ¥è®¿é—®è¿™ä¸ªCDNï¼Œæ­¤æ—¶åä»£çš„proxyè®¾ç½®ä¸ºhttpï¼Œåœ¨æ·»åŠ img.musnow.topçš„certè¯ä¹¦åˆ°åä»£è®¾ç½®é‡Œé¢ï¼Œå°±èƒ½å®ç°httpsã€‚\nimg.musnow.top åä»£ img-cloudflare.musnow.top\n\n\næ³¨æ„ï¼Œåä»£ä¸­çš„åç«¯åŸŸåä¹Ÿéœ€è¦è®¾ç½®ä¸ºæ–°çš„CDNåŸŸåï¼Œå¦åˆ™è®¿é—®ä¼šå› ä¸ºåŸŸåä¸åŒ¹é…è€Œ403æ‹’ç»è®¿é—®ã€‚\n\néšåå°±æ˜¯æ·»åŠ img.musnow.topçš„SSLè¯ä¹¦\n\næµ‹è¯•ä¸€ä¸‹ï¼Œæ–°å»ºçš„è¿™ä¸ªcdnåŸŸåå¯ä»¥é€šè¿‡httpè®¿é—®åˆ°bucketé‡Œé¢çš„å›¾ç‰‡\n\nå†æµ‹è¯•ä¸€ä¸‹åä»£åçš„åŸŸåï¼Œä¹Ÿå¯ä»¥è®¿é—®åˆ°å›¾ç‰‡äº†ï¼Œè¿™é‡Œè®¿é—®çš„IPåœ°å€104.21.56.251ä¹Ÿå·²ç»æ˜¯Cloudflareçš„IPäº†ã€‚é…ç½®æˆåŠŸï¼\n\næ­¤æ—¶æµ·å¤–è®¿é—®æˆ‘çš„å›¾åºŠï¼Œè§£æå˜æˆäº†å¦‚ä¸‹è¿‡ç¨‹\nimg.musnow.top -&gt; CNAMEå›é€€æºåŸŸå -&gt; cloudflare(https) -&gt; äº‘æœåŠ¡å™¨åä»£(https) -&gt; img-cloudflare.musnow.top(http) -&gt; ä¸ƒç‰›äº‘bucket\n\nå› ä¸ºæœ€ç»ˆè®¿é—®çš„CDNæ˜¯é€šè¿‡HTTPå›æºbucketçš„ï¼Œèƒ½ç™½å«–ä¸ƒç‰›äº‘10Gçš„å…è´¹æµé‡ï¼\nå½“ç„¶ï¼Œå¦‚æœçœŸæœ‰äººåœ¨æµ·å¤–æ‰“ä½ ï¼Œåˆ·å®Œ10Gæµé‡ä¹Ÿä¸æ˜¯ä¸å¯èƒ½â€¦â€¦æ‰€ä»¥åœ¨cloudflareé‡Œé¢æœ€å¥½å†é…ç½®ä¸€ä¸‹å•IPè®¿é—®çš„é¢‘æ¬¡é™åˆ¶ï¼\næ¯”å¦‚ä¸‹å›¾ï¼Œæˆ‘è®¾ç½®è®¿é—®URLä¸ºå›¾åºŠå¼€å¤´/iæ—¶è¿›è¡Œé€Ÿç‡ç›‘çœ‹ï¼Œå¦‚æœå•IPè®¿é—®é€Ÿç‡è¶…è¿‡60æ¬¡&#x2F;10ç§’ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘cloudflareçš„é€Ÿç‡é™åˆ¶å“åº”ï¼ŒæŒç»­10ç§’ã€‚\nå› ä¸ºæˆ‘çš„åšå®¢å·²ç»è®¾ç½®äº†æ‡’åŠ è½½ï¼Œæ‰€ä»¥ä¸€æ¬¡æ€§åŠ è½½60ä¸ªå›¾ç‰‡çš„åœºæ™¯æ˜¯ä¸å­˜åœ¨çš„ï¼è¿™ç§è§„æ¨¡çš„è¯·æ±‚è‚¯å®šæ˜¯æ”»å‡»äº†ï¼å†åŠ ä¸Šæˆ‘çš„åšå®¢ç†è®ºä¸Šä¸ä¼šæœ‰å‡ ä¸ªæµ·å¤–ç”¨æˆ·é˜…è¯»ï¼Œæ‰€ä»¥è¿™ä¸ªé…ç½®ä¸ä¼šå¯¹å›½å†…ç”¨æˆ·äº§ç”Ÿå½±å“ã€‚\n\nå¦‚æœä½ ä½¿ç”¨äº†ä»£ç†ï¼Œè¯·æŠŠmusnow.topæ‰€æœ‰å­åŸŸååŠ å…¥ä»£ç†ç™½åå•ã€‚\n\n\nè¿›ä¸€æ­¥ä¼˜åŒ–è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå°±æ˜¯æŠŠæ–°åˆ›å»ºçš„è¿™ä¸ªHTTP CDNé‡Œé¢è®¾ç½®IPç™½åå•ï¼Œåªå…è®¸æˆ‘ä»¬è®¾ç½®åä»£çš„æœåŠ¡å™¨çš„é‚£ä¸ªIPåœ°å€è®¿é—®ï¼Œè¿™æ ·å°±ä¿è¯äº†å…¶ä»–äººä¸èƒ½ç›´æ¥åˆ·æˆ‘æ–°å»ºçš„è¿™ä¸ªHTTPçš„CDNåŸŸåã€‚\n\nåœ¨ä¸ƒç‰›äº‘çš„CDNé…ç½®ç•Œé¢å¯ä»¥çœ‹åˆ°IPé»‘ç™½åå•ï¼Œæ·»åŠ æœåŠ¡å™¨IPåœ°å€ä¸ºç™½åå•å³å¯\n\né…ç½®åéœ€è¦è¿‡ä¸€æ®µæ—¶é—´æ‰ä¼šç”Ÿæ•ˆï¼Œä¼šæœ‰ä¸ªè¿›åº¦æ¡ã€‚å®Œæˆåï¼Œå†æ¬¡æœ¬åœ°æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°å·²ç»403ä¸å…è®¸è®¿é—®äº†ã€‚\n\næ­¤æ—¶åœ¨æµ·å¤–æœåŠ¡å™¨å°è¯•åä»£åŸŸåè®¿é—®ï¼Œä¾æ—§æ˜¯OKçš„ï¼Œè®¿é—®çš„IPåœ°å€172.67.157.61ä¹Ÿä¾æ—§æ˜¯Cloudflareçš„IPã€‚\n\nThe endè‡³æ­¤ï¼Œé…ç½®å®Œæˆï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ","cloudflare"]},{"title":"ã€MDã€‘ç”¨Obisidiançš„ä½ ä¸€å®šä¸èƒ½å¿½ç•¥çš„å›¾ç‰‡ä¿å­˜é—®é¢˜","url":"/posts/4288058497/","content":"[TOC]\né—®é¢˜æ¥æºğŸ˜¥ä»Šå¤©åœ¨obsidianä½¿ç”¨kanbanæ’ä»¶çš„æ—¶å€™ï¼Œå‘ç°obsidianå…¶å®æ˜¯å¯ä»¥æŠŠæ’å…¥çš„å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°åº“æ–‡ä»¶å¤¹é‡Œé¢çš„ã€‚\n\nè¿™ä¸€ç‚¹å…¶å®éå¸¸é‡è¦ï¼\nä¹‹å‰æˆ‘ä»giteeå›¾åºŠè½¬åˆ°é˜¿é‡Œäº‘OSSï¼Œæœ€å¤§çš„åŸå› å°±æ˜¯ä¸Šå­¦æœŸæœŸæœ«å¤ä¹ é«˜æ•°çš„æ—¶å€™ï¼Œè‡ªå·±å†™çš„é«˜æ•°ç¬”è®°é‡Œçš„å›¾ï¼Œå› ä¸ºgiteeçš„çŸ­æš‚æ›´æ–°å¯¼è‡´æ— æ³•åŠ è½½ï¼æœ€åè¿‡äº†å·®ä¸å¤š1hå›¾ç‰‡æ‰èƒ½æ­£å¸¸åŠ è½½å‡ºæ¥ï¼Œç›¸å½“äºç™½ç™½æµªè´¹å¤ä¹ æ—¶é—´ï¼\n\nTypora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠ\n\nä½ æƒ³æƒ³ï¼Œè¿™è¿˜æ˜¯åœ¨å­¦æ ¡é‡Œï¼Œè€½è¯¯ç‚¹æ—¶é—´æ€»å½’ä¸ä¼šå‡ºç°ä»€ä¹ˆâ€œè¦äººå‘½â€çš„å¤§äº‹ã€‚ä½†å¦‚æœæ˜¯å·¥ä½œä¸­ä½ å†™çš„ä¸€äº›æ—¥å¿—ç¬”è®°ï¼Œå› ä¸ºå›¾åºŠç½‘ç«™çš„æ— æ³•è®¿é—®è€Œæš‚æ—¶çœ‹ä¸è§ï¼Œé‚£ä¸å°±å¯„äº†å—ï¼Ÿ\næ›´åˆ«æå›¾åºŠæ˜¯ä¿å­˜åœ¨ç½‘ç»œä¸­çš„ï¼Œæ€»å½’ä¼šæœ‰äº›éšç§é—®é¢˜ã€‚å°±è¿ç™¾åº¦ç½‘ç›˜éƒ½æ‰«ç”¨æˆ·æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨æˆ·åˆæ€èƒ½çŸ¥é“é˜¿é‡Œäº‘æœ‰æ²¡æœ‰å¹²è¿™ç§äº‹å‘¢ï¼Ÿ\n\nå¦‚ä½•è§£å†³ï¼ŸğŸ•µï¸â€â™‚ï¸1.typoraè®¾ç½®å›¾ç‰‡ä¿å­˜æŸ¥æ‰¾ç½‘ç»œèµ„æ–™ï¼Œçœ‹åˆ°äº†è¿™ç¯‡åšå®¢\n\ntyporaè®¾ç½®å›¾ç‰‡æ ¹ç›®å½•_ç”¨Obsidianä¸€å®šè¦æ³¨æ„çš„å›¾ç‰‡å’Œç¬”è®°é—®é¢˜ï¼\n\né‡Œé¢è®²åˆ°äº†å¯ä»¥ç”¨typoraæ¥è§£å†³è¿™ä¸ªé—®é¢˜\næ‰“å¼€typoraå·¦ä¸Šè§’çš„æ–‡ä»¶-åå¥½è®¾ç½®\nä¾ç…§ä¸‹å›¾è®¾ç½®\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¤åˆ¶è¿›å»çš„è¿™ä¸ªå›¾ç‰‡ï¼ˆå…¶å®å°±æ˜¯ä¸Šé¢è¿™ä¸ªæˆªå›¾ï¼‰æ˜¾ç¤ºå‡ºäº†å®ƒçš„ç›¸å¯¹è·¯å¾„ï¼Œå¹¶æ­£å¸¸æ¸²æŸ“ã€‚\n\næ‰“å¼€æœ¬åœ°æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°typoraåœ¨ä½ å½“å‰è¿™ä¸ªmdæ–‡ä»¶çš„ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªphotoæ–‡ä»¶å¤¹ï¼Œå°†ä½ è´´çš„å›¾å¤åˆ¶è¿›äº†è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­\n\n\nåŒæ—¶å¦‚æœæˆ‘ä»¬åœ¨obsidianæ‰“å¼€è¿™ä¸ªmdæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡æ˜¯èƒ½æ­£å¸¸æ˜¾ç¤ºå‡ºæ¥çš„\n\nåˆ°è¿™é‡Œï¼Œå…¶å®æˆ‘ä»¬çš„é—®é¢˜å·²ç»è§£å†³äº†ï¼\n\n2.åšå®¢é—®é¢˜ä½†æ˜¯ï¼è¿™å¥½åƒå’Œæˆ‘ä»¬å½“åˆä½¿ç”¨å›¾åºŠçš„ç›®æ ‡å†²çª\nå†æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªå›¾ç‰‡ï¼Œå½“æˆ‘æŠŠè¿™ç¯‡åšå®¢ä»typoraå¤åˆ¶åˆ°CSDNä¸Šçš„æ—¶å€™ï¼Œå®ƒè‚¯å®šä¼šä¿å­˜å¤±è´¥\n\n\n\nå› ä¸ºå›¾ç‰‡æœ¬èº«æ˜¯åœ¨æœ¬åœ°ç¡¬ç›˜é‡Œï¼ŒCSDNæ— æ³•åŸåŠ›è¯»å–ä½ ç¡¬ç›˜é‡Œçš„æ–‡ä»¶ï¼Œè‡ªç„¶æ— æ³•è½¬å­˜è¿™å¼ å›¾ç‰‡äº†ï¼\nè§£å†³è¿™ä¸ªé—®é¢˜åˆæœ‰ä¸¤ä¸ªæ–°çš„æ–¹æ³•~\n2.1 æ¯æ¬¡ç¼–å†™ä¸åŒæ–‡ä»¶çš„æ—¶å€™ï¼Œè¿›typoraè®¾ç½®è¿›è¡Œæ›´æ”¹å½“æˆ‘å†™åšå®¢çš„æ—¶å€™ï¼Œtyporaéœ€è¦è¿™æ ·è®¾ç½®ï¼Œå³å¯å€ŸåŠ©picgoè‡ªåŠ¨ä¸Šä¼ æˆ‘å¤åˆ¶è¿›å»çš„å›¾ç‰‡åˆ°å›¾åºŠé‡Œï¼Œä¹Ÿèƒ½æ­£å¸¸å¤åˆ¶åˆ°CSDNä¸­ï¼ˆæ•™ç¨‹åœ¨åšå®¢å¼€å¤´çš„é“¾æ¥é‡Œï¼‰\n\nè€Œå½“æˆ‘å†™ä¸ªäººéšç¬”/æ—¥è®°/å­¦ä¹ ç¬”è®°è¿™ç±»å¹¶ä¸æ‰“ç®—ä¸Šä¼ åˆ°åšå®¢é‡Œçš„å†…å®¹æ—¶ï¼Œå°±å¯ä»¥æŠŠå®ƒæ”¹æˆä¸Šé¢æåˆ°çš„æœ¬åœ°å­˜å‚¨æ–¹å¼\nä½†æ˜¯è¿™æ ·éå¸¸ä¸æ–¹ä¾¿ï¼ä¸‡ä¸€å“ªä¸€æ¬¡å†™åšå®¢çš„æ—¶å€™å¿˜è®°æ”¹å›æ¥äº†ï¼Œä¸Šä¼ åšå®¢çš„æ—¶å€™å°±æƒ³é©¬è‰¯äº†ï¼ˆæˆ‘æ˜¯è§‰å¾—æˆ‘è‚¯å®šä¼šå¿˜ï¼Œè¿™ä¸ªäºåƒä¸å¾—ï¼‰\n\n2.2 åˆ†å¼€ä¸¤ä¸ªè½¯ä»¶è¿›è¡Œå†™ä½œåˆ«æ€¥ï¼Œåˆšå¼€å¤´ä¸æ˜¯æåˆ°äº†ï¼Œæˆ‘æ˜¯åœ¨obsidiané‡Œé¢å‘ç°è¿™ä¸ªåŠŸèƒ½çš„å˜›ï¼Ÿ\nç°åœ¨æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯å°†obsidianä¹Ÿè®¾ç½®ä¸ºåŒæ ·çš„ä¿å­˜æ–¹å¼ï¼Œè®©å¤åˆ¶è¿›å»çš„å›¾ç‰‡è‡ªåŠ¨ä¿å­˜åœ¨æœ¬åœ°ç›®å½•é‡Œã€‚\nè¿™æ ·ç”¨typoraå†™åšå®¢ï¼Œobsidianå†™è‡ªå·±çš„ä¸œè¥¿ï¼Œä¸¤å…¨å…¶ç¾ï¼\n\n3.obsidianè®¾ç½®å›¾ç‰‡ä¿å­˜åœ¨1.typoraæ–¹å¼æåˆ°çš„é‚£ç¯‡åšå®¢é‡Œé¢ï¼Œä½œè€…å‘ç°äº†obsidianå¤åˆ¶å›¾ç‰‡çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯è‡ªå·±çš„æ ¼å¼![[  ]]\nè¿™ç§æ ¼å¼å¹¶ä¸æ˜¯æ‰€æœ‰markdownç¼–è¾‘å™¨éƒ½è®¤è¯†ï¼\n\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´æ”¹obsidiançš„è®¾ç½®ï¼Œè®©å®ƒå˜æˆå¤§éƒ¨åˆ†markdownç¼–è¾‘å™¨é€šç”¨çš„![ ]( )å½¢å¼\n\nå…ˆçœ‹çœ‹ä½ çš„obsidianç”¨çš„æ˜¯ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬0.13.33ï¼Œå¦‚æœä¸æ˜¯ï¼Œå…ˆæ›´æ–°ä¸€ä¸‹\n\n\næ‰“å¼€obsidianè®¾ç½®-æ–‡ä»¶ä¸é“¾æ¥ï¼Œæ‰¾åˆ°ä¸‹å›¾çš„è¿™å‡ ä¸ªè®¾ç½®ã€‚å¦‚æœä½ æ²¡æœ‰æ›´æ”¹è¿‡ï¼Œé»˜è®¤çš„è®¾ç½®å’Œå›¾ç‰‡é‡Œé¢åº”è¯¥æ˜¯ä¸€æ ·çš„\n\næˆ‘ä»¬éœ€è¦æ”¹æˆä»¥ä¸‹çš„æ ·å­\n\nå†æ¬¡å°è¯•æ’å…¥å›¾ç‰‡ï¼Œå¯ä»¥çœ‹åˆ°æ–°æ’å…¥çš„è¿™ä¸ªå›¾ç‰‡å·²ç»å˜æˆäº†mdé€šç”¨çš„![ ]( )å½¢å¼\n\nå†æ¬¡ç”¨typoraæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ä¸ªå›¾ç‰‡é“¾æ¥ä¾æ—§ä¸è®¤è¯†ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå›¾ç‰‡å·²ç»è¢«æ­£å¸¸åŠ è½½å‡ºæ¥äº†ï¼\n\nobsidiançš„è®¾ç½®ä¹Ÿæå®šäº†ï¼\nä»Šåå†™ä½œçš„æ—¶å€™ï¼Œå°±å¯ä»¥åˆ†å¼€ä¸¤ä¸ªè½¯ä»¶è¿›è¡Œå†™ä¸åŒçš„å†…å®¹å•¦ï¼\n\nä¸€äº›æå‡obsidianç¼–è¾‘ä½“éªŒçš„æ’ä»¶æœ€åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œobsidiançš„ä½¿ç”¨ä½“éªŒæ²¡æœ‰typoraå¥½å‘€ï¼\n\ntyporaå¯ä»¥å®æ—¶æ¸²æŸ“ï¼Œobsidianéœ€è¦å•ç‹¬åˆ‡æ¢\ntyporaæœ‰æ‰“å­—æœºæ¨¡å¼ï¼Œobsidianéœ€è¦æ»šæ¥æ»šå»\n\næ¬¸ï¼Œåˆ«æ€¥ï¼Œè¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªæå‡å†™ä½œä½“éªŒçš„æ’ä»¶ï¼Œè£…äº†ä¹‹åï¼Œä¸Šé¢è¿™ä¿©åŠŸèƒ½å°±éƒ½æœ‰å•¦ï¼\n\n\næ›´æ–°ï¼šå‘ç°è¿™ä¸ªåŠŸèƒ½å…¶å®obsidianå·²ç»è‡ªå¸¦äº†ï¼Œä½†æ˜¯æˆ‘åœ¨ç¼–è¾‘å™¨ä¸­é€‰æ‹©äº†æ—§ç‰ˆç¼–è¾‘å™¨å¯¼è‡´æ²¡çœ‹åˆ°è¿™ä¸ªåŠŸèƒ½ã€‚æ—¢ç„¶è‡ªå¸¦äº†å°±æ²¡å¿…è¦ä¸‹æ’ä»¶å•¦ï¼ä½†æ˜¯é—®é¢˜åˆæ¥äº†ï¼Œä¸‹é¢è¿™ä¸ªæ‰“å­—æœºæ’ä»¶åªæœ‰æ—§ç‰ˆç¼–è¾‘å™¨æ‰æœ‰æ•ˆã€‚å¦‚æœä½ éœ€è¦è¿™ä¸ªæ¨¡å¼ï¼Œé‚£å°±ä½¿ç”¨ä¸Šé¢çš„æ¸²æŸ“æ’ä»¶+è¿™ä¸ªæ‰“å­—æœºæ’ä»¶æ¥åˆ›ä½œå§ï¼ˆæœ¬äººç°åœ¨å°±æ˜¯è¿™ä¹ˆåšçš„ï¼‰ä½ è§‰å¾—äº‹æƒ…çœŸçš„æœ‰é‚£ä¹ˆç®€å•å—ï¼Ÿå¹¶ä¸æ˜¯çš„ï¼æ›´æ–°äº†æ‰“å­—æœºæ’ä»¶åˆ°0.2.1ä»¥åï¼Œå‘ç°ä»–å·²ç»æ”¯æŒäº†æ–°ç‰ˆæœ¬ç¼–è¾‘å™¨äº†ï¼ŒèŠœæ¹–èµ·é£ï¼\n\nä¸‹é¢è¿˜æœ‰picgoä¸Šä¼ å›¾åºŠçš„æ’ä»¶\nä»¥åŠä¸€ä¸ªè‡ªåŠ¨ç²˜è´´é“¾æ¥çš„æ’ä»¶\n\n\næœ€åè¿˜æœ‰è¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥ä¼˜åŒ–obsidiané€‰ä¸­ä¸­æ–‡å¥å­çš„åˆ†è¯åŠŸèƒ½\n\nå®‰è£…å®Œè¿™äº›ï¼Œä½¿ç”¨ä½“éªŒå°±å¾ˆæ¥è¿‘typoraå•¦ï¼\nå½“ç„¶æˆ‘è¿˜æ˜¯æ›´å–œæ¬¢ç”¨typoraæ¥ç¼–è¾‘\n\nç»“è¯­ğŸ˜‹ä¾ç…§è¿™ç¯‡åšå®¢è®¾ç½®å®Œåï¼Œå°±èƒ½æ›´å¥½åœ°åˆ†å¼€å†™ä½œ ç§äººå†…å®¹å’Œåšå®¢æ–‡ä»¶å•¦\nä»¥åä¹Ÿå¯ä»¥æ”¾å¿ƒåœ°å¾€mdæ–‡ä»¶ä¸­åŠ å›¾ç‰‡äº†ï¼Œæ¯•ç«Ÿåœ¨æœ¬åœ°é‡Œï¼Œè°éƒ½çœ‹ä¸åˆ°\n\nä¸è¿‡ä¹Ÿè¦è€ƒè™‘åˆ°æœ¬åœ°æ–‡ä»¶å¤§å°é—®é¢˜ï¼Œåˆ«æŠŠä½ çš„OneDriveå¡æ»¡å›¾ç‰‡å¯¼è‡´ç©ºé—´ä¸å¤Ÿç”¨äº†ã€‚é‚£å°±å¾—æğŸ’´å‡çº§å®¹é‡äº†ï¼Œæˆ‘ç°åœ¨åªæœ‰å…è´¹çš„5GB\næœ‰äº›å›¾ç‰‡å¯ä»¥è€ƒè™‘ç”¨å…‰å½±é­”æœ¯æ‰‹ç­‰è½¯ä»¶æ¥å‡å°æ–‡ä»¶ä½“ç§¯ï¼Œæ¯”å¦‚æ‰‹æœºæ‹çš„ç¬”è®°å›¾ï¼Œæ²¡å¿…è¦é‚£ä¹ˆé«˜æ¸…ï¼Œ6mbé™åˆ°500kbéƒ½è¿˜èƒ½çœ‹æ¸…æ¥š\n\nä½ å­¦åºŸäº†å—ï¼Ÿ\n\nå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·ç‚¹ä¸ªğŸ‘ï¼Œä¸‡åˆ†æ„Ÿè°¢ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ","typora","obsidian"]},{"title":"ã€å›¾åºŠã€‘åˆ é™¤å¯¹è±¡å­˜å‚¨æ¡¶å‰ä¸€å®šè¦æ£€æŸ¥ï¼","url":"/posts/3595872827/","content":"æˆ‘åˆå¹²è ¢äº‹äº†ï¼è™½ç„¶æ²¡æœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ˜¯è¿™ç§é—®é¢˜è¿˜æ˜¯ä¸è¦å‘ç”Ÿçš„å¥½ã€‚\nä»€ä¹ˆæƒ…å†µï¼Ÿæˆ‘åœ¨åšå®¢å°šæœ‰å¼•ç”¨æŸä¸ªå¯¹è±¡å­˜å‚¨bucketä¸­å›¾ç‰‡çš„æƒ…å†µä¸‹ï¼Œåˆ é™¤äº†é‚£ä¸ªbucketï¼ˆå› ä¸ºè¿™ä¸ªbucketå¾ˆä¹…æ²¡æœ‰ç”¨ï¼Œç®—æ˜¯å¼ƒç”¨çš„ï¼‰\nè¿˜å¥½ä»Šå¤©çœ‹æ—§ç¬”è®°çš„æ—¶å€™ï¼Œçªç„¶å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œç«‹é©¬å»é‡æ–°æœç´¢äº†ä¸€ä¸‹è¿™ä¸ªæ—§bucketçš„å›¾ç‰‡é“¾æ¥ï¼Œè¿˜å¥½è¿˜å¥½ï¼Œå—å½±å“çš„åªæœ‰ä¸¤ç¯‡æ–‡ç« \n\nä¸€ç¯‡ä¹‹å‰å¯¼å‡ºè¿‡PDFï¼Œå›¾ç‰‡è¿˜èƒ½æ‰¾åˆ°\nå¦å¤–ä¸€ç¯‡æ–‡ç« ä»¥æ–‡å­—ä¸ºä¸»ï¼Œå†…éƒ¨ä¸¢å¤±çš„å›¾ç‰‡å¯æœ‰å¯æ— \n\næˆ‘æ¢å¤äº†ç¬¬ä¸€ç¯‡é‡Œé¢çš„å›¾ç‰‡ï¼Œç„¶åä¿®æ”¹äº†ç¬¬äºŒç¯‡ä¸­å’Œå›¾ç‰‡ç›¸å…³çš„æ–‡å­—è¯´æ˜ï¼Œç®—æ˜¯è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚\nåˆé‡å†™æ£€æŸ¥äº†ä¸€ä¸‹ç¬”è®°ç›®å½•ï¼Œç®—æ˜¯å½»åº•æ²¡æœ‰è¿™ä¸ªè¢«æˆ‘åˆ é™¤çš„bucketé‡Œé¢çš„å›¾ç‰‡äº†ã€‚\nè¿™ä¸€æ¬¡è¿˜å¥½ï¼Œç®—æ˜¯æ²¡æœ‰ä¸¢ä¸œè¥¿ï¼Œä¸ç„¶æ•°æ®ä¸å¤‡ä»½å°±åˆ é™¤çš„ç¬‘æ–™åˆè¦å¤šä¸€ä¸ªäº†â€¦â€¦ğŸ¤£\nä»¥æ­¤ä¸ºæˆ’åˆ é™¤bucketä¹‹å‰ä¸€å®šè¦æ£€æŸ¥è‡ªå·±åˆ°åº•è¿˜æœ‰æ²¡æœ‰ä½¿ç”¨è¿™ä¸ªbucketä¸­çš„æ–‡ä»¶æˆ–è€…å›¾ç‰‡ï¼\nåˆ é™¤å›¾åºŠæœ¬åœ°ç›®å½•å‰ï¼Œä¸€å®šè¦æ£€æŸ¥è‡ªå·±è¿˜æœ‰æ²¡æœ‰è¿™ä¸ªæœ¬åœ°ç›®å½•é‡Œé¢çš„å›¾ç‰‡ï¼\næœ€ä½³æ–¹æ¡ˆï¼šä¸è¦ç®¡é‚£ä¸ªbucketï¼Œå°†å…¶è®¿é—®æƒé™æ”¹æˆç§æœ‰åï¼Œä½¿ç”¨å¤‡æ³¨åŠŸèƒ½å°†å…¶æ ‡è®°ä¸ºå¼ƒç”¨ã€‚ä»¥åä¸å†ä½¿ç”¨è¯¥bucketå³å¯ã€‚\nå› ä¸ºå¯¹äºæˆ‘ä¸ªäººä½¿ç”¨æ¥è¯´ï¼Œä¸€ä¸ªbucketé‡Œé¢ä¸ä¼šæœ‰å¤ªå¤šæ–‡ä»¶ï¼Œç›®å‰æœ€å¤§çš„å›¾åºŠbucketä¹Ÿä¸è¿‡2GBè€Œå·²ï¼ŒæŠŠå®ƒç•™åœ¨é‚£é‡ŒèŠ±ä¸äº†å‡ ä¸ªé’±ï¼ä¸ç„¶æŠŠbucketåˆ äº†ï¼Œå“ªå¤©å‘ç°éœ€è¦å»é‡Œé¢æ‰¾æ—§æ–‡ä»¶çš„æ—¶å€™æ— ä»ä¸‹æ‰‹å°±éº»çƒ¦äº†ï¼\n\nè‡³äºæˆ‘ä¸ºä»€ä¹ˆè¦åˆ â€¦â€¦å…¶å®æ˜¯å› ä¸ºæˆ‘æœ‰ç‚¹å¼ºè¿«ç—‡ï¼Œä¸ç”¨è¿˜ç•™åœ¨é‚£é‡Œçœ‹ç€æœ‰ç‚¹ä¸çˆ½â€¦â€¦\n\nå½“ç„¶è¿˜æœ‰å¦å¤–ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨rcloneç­‰å·¥å…·ï¼Œå°†s3ä¸­çš„æ‰€æœ‰æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæ‰“åŒ…å¤šåœ°å¤‡ä»½åï¼Œåˆ é™¤äº‘ç«¯bucket\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ"]},{"title":"ã€æ•°æ®å¤‡ä»½ã€‘è°ˆè°ˆå¦‚ä½•è¿›è¡Œæœ‰æ•ˆæ•°æ®å¤‡ä»½ï¼Œ3+2+1","url":"/posts/3543423459/","content":"è°ˆè°ˆå¦‚ä½•è¿›è¡Œæœ‰æ•ˆæ•°æ®å¤‡ä»½ï¼Œä»¥åŠä»€ä¹ˆæ˜¯3+2+1\n\n\nå‰è¨€æ•°æ®å¤‡ä»½å·²ç»æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†\nä»Šå¤©åœ¨ç¾¤é‡Œçœ‹åˆ°ä¸€ä½ç¾¤å‹å°±å‡ºç°äº†æ•°æ®ä¸¢å¤±çš„é—®é¢˜ï¼Œä¸¤æ¬¡è·³é—¸åï¼Œå°å¼æœºçš„å›ºæ€ç¡¬ç›˜æ— æ³•è¢«è¯†åˆ«ï¼Œåœ¨biosä¸­çœ‹ä¸åˆ°ï¼Œç¾¤å‹è¯´è‡ªå·±æ¢äº†ç”µè„‘ä¾æ—§è¯†åˆ«ä¸å‡ºæ¥ï¼ˆå¯ä»¥ç¡®å®šæ˜¯å›ºæ€æŒ‚äº†ï¼‰\n\näºæ˜¯å°±æœ‰äº†å†™è¿™ç¯‡åšå®¢çš„æƒ³æ³•ï¼Œæ¥è°ˆè°ˆæˆ‘å¯¹æ•°æ®å¤‡ä»½çš„çœ‹æ³•ä»¥åŠç®€å•çš„åšæ³•\næ•°æ®åªæœ‰ä¸¢äº†æ‰ä¼šçŸ¥é“çæƒœï¼Œè¯·ä¸è¦åœ¨ä¸¢äº†é‡è¦æ•°æ®çš„æ—¶å€™åæ‚”ã€‚\nå·¥ä½œæ–‡ä»¶ã€å­¦ä¹ èµ„æ–™ï¼ˆä¸¥è‚ƒæ­£ç»çš„ï¼‰ã€å®¶åº­ç…§ç‰‡ç­‰ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€åˆ‡ä½ è§‰å¾—å¤šå°‘æœ‰ç‚¹ä»·å€¼ï¼Œæƒ³ç•™ä¸‹æ¥çš„èµ„æºã€‚\n\nè¯´å¥é¢˜å¤–è¯ï¼Œå°æ—¶å€™çš„æˆ‘ä¸å–œæ¬¢æ‹ç…§ï¼Œå¯é•¿å¤§äº†ï¼Œå‘ç°è‡ªå·±å°æ—¶å€™åŠç‚¹ç…§ç‰‡éƒ½æ²¡æœ‰ã€‚è„‘æµ·é‡Œå¯¹å„¿æ—¶çš„è®°å¿†ï¼Œä¹Ÿæ—©å·²æ¨¡ç³Šã€‚ä¸Šäº†å¤§å­¦ä¹‹åï¼Œæˆ‘æ‹ç…§è™½ç„¶ä¾æ—§ä¸å¤šï¼Œä½†æ€»å½’è¿˜æ˜¯æ¯”å„¿æ—¶å¤šäº†å‡ å€ã€‚è€äº†ä¹‹åï¼Œè¿™äº›ä¸œè¥¿å°±æ˜¯ä½ ä¸€è¾ˆå­çš„å›å¿†äº†ã€‚\n\né¡»çŸ¥åœ¨å¤‡ä»½å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“çš„äº‹æƒ…å¦‚ä¸‹\n\nä»»ä½•ç¡¬ç›˜éƒ½æœ‰è‡ªæˆ‘å—å±ï¼ˆæŒ‡åœ¨æ­£å¸¸å·¥å†µä¸‹ä»–å°±åäº†ï¼‰çš„é£é™©ï¼Œä¸è¦è®¤ä¸ºè‡ªå·±ä¹°äº†ä¸ªå¾ˆè´µçš„å“ç‰Œå›ºæ€ç¡¬ç›˜å°±å¯ä»¥é«˜æ•æ— å¿§äº†\nåŒæ ·ï¼Œä¾¿å®œçš„å›ºæ€ç¡¬ç›˜ä¹Ÿä¸ä¸€å®šå¾ˆå®¹æ˜“åï¼Œåœ¨é‡è§†æ•°æ®å¤‡ä»½çš„åŒæ—¶ï¼Œä¹Ÿæ²¡å¿…è¦æå¿ƒåŠèƒ†\nå›ºæ€ç¡¬ç›˜ç”±äºå…¶ç‰©ç†ç»“æ„å’Œè®¾è®¡åŸç†ï¼Œæ•°æ®æ¢å¤çš„å¯èƒ½æ€§æä½ã€‚å¦‚æœä½ çš„å›ºæ€ç¡¬ç›˜åäº†ï¼Œé‚£å°±å½“æ•°æ®å…¨ä¸¢äº†å¤„ç†ã€‚\nä¸è¦å­˜æœ‰æ•°æ®åäº†å¯ä»¥å»æ•°æ®æ¢å¤çš„ä¾¥å¹¸å¿ƒç†ã€‚å³ä¾¿æœ€ç»ˆå¯ä»¥æ•°æ®æ¢å¤å‡ºæ¥ï¼Œæˆæœ¬æ¯”ä½ å¤šä¹°å‡ ä¸ªç¡¬ç›˜é«˜å¤šäº†ï¼ˆè¿™ä½ç¾¤å‹å»é—®äº†ï¼Œæ•°æ®æ¢å¤è¦800-1600ï¼Œè¿™ä¸ªä»·æ ¼éƒ½å¯ä»¥ä¹°6tçš„å›ºæ€ç¡¬ç›˜/16tçš„æœºæ¢°ç¡¬ç›˜äº†ï¼‰\n\n\nä»€ä¹ˆæ˜¯3+2+1å¤‡ä»½ä½ å¯èƒ½åœ¨åˆ«å¤„çœ‹åˆ°æœ‰äººæåˆ°è¿™ä¸ªåè¯ï¼š3+2+1å¤‡ä»½åŸåˆ™\n\nä¸‰ä¸ªå­˜å‚¨è®¾å¤‡ï¼ˆä¸€ä»½æ•°æ®åœ¨3å—ä¸åŒçš„ç¡¬ç›˜ä¸­å­˜æ”¾ï¼‰\nä¸¤ä¸ªä¸åŒä¸»æœºï¼ˆè¿™ä¸‰å—ç¡¬ç›˜ä¸­ï¼Œè‡³å°‘è¦æœ‰2å—æ˜¯ä½äºä¸åŒä¸»æœºä¸Šçš„ï¼‰\nä¸€ä¸ªå¼‚åœ°å¤‡ä»½ï¼ˆæ•°æ®è¦åœ¨å¼‚åœ°å¤‡ä»½ä¸€ä»½ï¼Œæ¯”å¦‚ä½ å®¶é‡Œç€ç«äº†è®¾å¤‡å…¨æŒ‚äº†ï¼Œé‚£ä¹ˆå¼‚åœ°çš„å¤‡ä»½å°±æœ‰ç”¨äº†ï¼‰\n\nå‰é¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå¦‚æœå®¶é‡Œæœ‰ä¸¤ä¸ªç”µè„‘çš„ç”¨æˆ·è¿˜èƒ½å‹‰å¼ºè¾¾æˆï¼Œæœ€åä¸€ä¸ªæ¡ä»¶å¯èƒ½å¾ˆå¤šäººå°±æ²¡åŠæ³•è¾¾æˆäº†\nä½†è¿™å¹¶ä¸é‡è¦ï¼Œæˆ‘ä»¬çœ¼å‰å°±æœ‰ä¸€ä¸ªæœ€ç®€å•æ˜“ç”¨çš„å¼‚åœ°å¤‡ä»½ä»‹è´¨â€”â€”ç½‘ç›˜\næœ€ç®€å•çš„åšæ³•æ‰‹æœºç”µè„‘å„ä¸€ä»½å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œå¤‡ä»½é‡è¦æ•°æ®çš„æœ€ç®€å•åŠæ³•ï¼Œé‚£å°±æ˜¯å°†é‡è¦æ•°æ®å¾€æ‰‹æœºå’Œç”µè„‘å„æ‹·è´ä¸€ä»½ï¼›\nå¦‚æœä½ æœ‰ä¸¤å°ç”µè„‘ï¼Œé‚£å°±åœ¨ä¸¤å°ç”µè„‘ä¸Šéƒ½æ‹·è´ä¸€ä»½ï¼Œè¿™æ ·å°±å·²ç»æ»¡è¶³äº†3+2+1ä¸­çš„2äº†ï¼›\nå•ä¸ªç”µè„‘å¤šç¡¬ç›˜åŒæ­¥å¦‚æœä½ çš„ç”µè„‘æœ‰å¤šä¸ªç¡¬ç›˜ï¼ˆä¸€å®šè¦æ˜¯ç‰©ç†ç¡¬ç›˜ï¼Œè€Œä¸æ˜¯ä½ Windowsé‡Œé¢çš„ç£ç›˜åˆ†åŒºï¼‰\nå»ºè®®å°†é‡è¦æ•°æ®åœ¨ä¸¤ä¸ªç¡¬ç›˜ä¸­éƒ½å­˜ä¸€ä»½ï¼\nè¿™é‡Œæ¨èä¸€ä¸ªç‰¹åˆ«å¥½ç”¨çš„åŒæ­¥è½¯ä»¶freefilesyncï¼Œä¸‹è½½åœ°å€\n\nç•Œé¢ä½¿ç”¨å¾ˆç®€å•ï¼Œå·¦ä¾§å’Œå³ä¾§åˆ†åˆ«è®¾ç½®æ–‡ä»¶å¤¹ï¼Œå³ä¸Šè§’çš„ç»¿è‰²é½¿è½®é‡Œé¢å¯ä»¥è®¾ç½®åŒæ­¥çš„ç±»å‹ä¸ºæ›´æ–°ã€é•œåƒï¼Œè¿˜æœ‰å¸¦ç‰ˆæœ¬ç®¡ç†çš„åŒæ­¥æ–¹å¼ã€‚é™¤äº†è®¾ç½®æœ¬åœ°ï¼Œè¿˜æ”¯æŒgoogle driveå’Œfrpï¼Œä½ ä¹Ÿå¯ä»¥æŠŠnasçš„ç¡¬ç›˜é€šè¿‡smbæˆ–webdavæ˜ å°„ä¸ºæœ¬åœ°ç¡¬ç›˜ï¼Œä½¿ç”¨æ­¤è½¯ä»¶è¿›è¡ŒåŒæ­¥\nå’Œè¿™ä¸ªè½¯ä»¶ä¸€èµ·çš„è¿˜æœ‰ä¸ªçº¢è‰²å›¾æ ‡çš„å®æ—¶åŒæ­¥ï¼Œåœ¨ç»¿è‰²è½¯ä»¶é‡Œé¢é…ç½®å¥½äº†ä¹‹åï¼Œå°†é…ç½®æ–‡ä»¶å¯¼å…¥è¿™ä¸ªçº¢è‰²è½¯ä»¶ï¼Œè®¾ç½®ç›‘çœ‹é—´éš”ï¼Œå°±èƒ½åšåˆ°æ•°æ®çš„å®æ—¶åŒæ­¥ã€‚\n\n\nå®Œæ•´ä½¿ç”¨æ•™å­¦å¯ä»¥æŸ¥çœ‹è¿™ä¸ªBç«™è§†é¢‘ï¼šã€14001ã€‘FreeFileSyncï¼šå·®å¼‚åŒæ­¥ã€é•œåƒå¤‡ä»½ã€å¢é‡å¤‡ä»½ å…¨èƒ½çš„åŒæ­¥è½¯ä»¶ æ–‡ä»¶åŒæ­¥ æœ¬åœ°åŒæ­¥\n\n\næ¯”å¦‚ä¸€ä»½æ•°æ®ï¼Œä½ å¯ä»¥ä»¥æŸå—å›ºæ€ä¸ºä¸»åŠ›ï¼Œç„¶åå°†è½¯ä»¶çš„åŒæ­¥æ¨¡å¼æ”¹æˆé•œåƒï¼ˆåŒæ­¥åˆ æ”¹ï¼‰åˆ°å¦å¤–ä¸€ä¸ªç¡¬ç›˜é‡Œé¢ã€‚è¿™æ ·ä¸¤è¾¹çš„æ•°æ®å°±èƒ½ä¿æŒä¸€è‡´äº†ã€‚å°±ç®—ä¸€ä¸ªç¡¬ç›˜åäº†ï¼Œå¦å¤–ä¸€ä¸ªç¡¬ç›˜è¿˜èƒ½ç¥ä½ ä¸€è‡‚ä¹‹åŠ›ã€‚\nè¦çŸ¥é“ï¼Œé™¤éä½ çš„ç”µè„‘ä¸»æ¿æŒ‚äº†ï¼Œæˆ–è€…ä½ ä¹°çš„ç”µæºæœ‰ç‚¹åŠ£è´¨ï¼ˆè¿™é‡Œä¹Ÿæé†’ä¸€ä¸‹ï¼Œçœä»€ä¹ˆé’±éƒ½ä¸è¦çœç”µæºï¼Œä¹°ä¸ªç›¸å¯¹å¤§ç“¦æ•°çš„å“ç‰Œç”µæºï¼Œæ¯”å¦‚æŒ¯åæˆ–è€…æµ·éŸµï¼Œæ¯”æŸäº›æ·˜å®çš„ä½ä»·çƒ‚è´§å¥½çš„å¤šï¼‰ï¼Œä¸ç„¶ä¸¤ä¸ªç¡¬ç›˜ä¸€èµ·æŒ‚çš„æ¦‚ç‡æ˜¯æä½æä½çš„ï¼Œè¿œè¿œä½äºä¸€ä¸ªç¡¬ç›˜åæ‰çš„æ¦‚ç‡ã€‚\nç½‘ç›˜é™¤äº†åœ¨æœ¬åœ°å¤‡ä»½ï¼Œç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«é‡è¦çš„æ•°æ®ä¹Ÿå¼ºçƒˆå»ºè®®åœ¨äº‘ç›˜ä¹Ÿå­˜ä¸€ä»½\nä¸»æµçš„äº‘ç›˜ï¼šç™¾åº¦äº‘ç›˜ï¼Œé˜¿é‡Œäº‘ç›˜ã€‚å¦‚æœä½ æ³¨å†Œçš„æ¯”è¾ƒæ—©ï¼Œå®¹é‡åº”è¯¥éƒ½æ˜¯ä¸ŠTäº†çš„ï¼Œå¯¹äºå®¶ç”¨å¤‡ä»½æ¥è¯´å®Œå…¨å¤Ÿç”¨äº†ã€‚\nè™½ç„¶äº‘ç›˜çš„ä¸‹è½½éƒ½é™é€Ÿï¼Œå‰æœŸå®£ä¼ ä¸é™é€Ÿçš„é˜¿é‡Œï¼Œç°åœ¨ä¹Ÿåªèƒ½è·‘3mbçš„ä¸‹è½½äº†ï¼ˆä¸è¿‡è¿˜æ˜¯æ¯”ç™¾åº¦å¥½å¤šäº†ï¼‰ï¼›ä¸€èˆ¬ä¸Šä¼ éƒ½æ˜¯ä¸é™é€Ÿçš„ï¼Œå¦‚æœçœŸçš„æœ‰éœ€è¦äº†ï¼Œå¤§ä¸äº†å¼€ä¸ªä¼šå‘˜ä¸‹å›æ¥ï¼Œæ€»æ¯”æ•°æ®æ•‘æ´çš„è¦ä»·é è°±ã€‚\nå°†é‡è¦æ•°æ®æ‰“ä¸ªå‹ç¼©åŒ…ï¼Œå¿…è¦çš„æ—¶å€™è®¾ç½®ä¸ªå¯†ç ï¼ˆé˜²æ­¢è¢«ç½‘ç›˜è¯¯å°ï¼‰ï¼Œå¦‚æœä½ æ‹…å¿ƒå¿˜è®°å‹ç¼©åŒ…å¯†ç ï¼Œå¯ä»¥ç›´æ¥æ‰¾ä¸ªæ–‡ä»¶åæ”¹æˆå¯†ç ï¼Œä¸€èµ·ä¸¢åˆ°å‹ç¼©åŒ…é‡Œé¢ã€‚è¿™é‡Œæˆ‘ä»¬è¦é˜²æ­¢çš„æ˜¯ç½‘ç›˜çš„AIè¯¯å°ä½ çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¿éšœæ•°æ®å®‰å…¨ã€‚\n\nä»€ä¹ˆæ—¶å€™æƒ³èµ·æ¥å°±å¼„ä¸€ä¸‹ï¼Œæ ¹æ®ä½ å¯¹æ•°æ®é‡è¦æ€§çš„æ•æ„Ÿåº¦æ¥å†³å®šå¤‡ä»½é¢‘ç‡å§ï¼\n\nç½‘ç›˜å’Œéšç§ï¼Ÿhttps://zhuanlan.zhihu.com/p/94763454\nè™½ç„¶å¾ˆå¤šäººè¯´ç½‘ç›˜ä¸å®‰å…¨å®¹æ˜“æ³„æ¼ä»€ä¹ˆçš„ï¼Œä½†å®é™…ä¸Šå“ªæ€•æ˜¯å¤©å¤©è¢«éª‚çš„ç™¾åº¦ç½‘ç›˜ä¹Ÿå¹¶æ²¡æœ‰å‡ºç°è¿‡ä¸»åŠ¨æ³„æ¼ç”¨æˆ·æ–‡ä»¶çš„æƒ…å†µï¼›\nå¾ˆå¤šæ—¶å€™éƒ½æ˜¯ä¸€äº›ä¸ä¼šç”¨è½¯ä»¶çš„äººï¼Œå¯ç”¨äº†è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½ï¼Œè¿˜æŠŠè‡ªåŠ¨å¤‡ä»½çš„æ–‡ä»¶å¤¹å¼€äº†åˆ†äº«ï¼Œç”šè‡³ç›´æ¥æŠŠåˆ†äº«é“¾æ¥å‘ç½‘ä¸Šï¼Œå¯¼è‡´æœ‰äº›çˆ¬è™«æœºå™¨äººæŠŠä½ çš„åˆ†äº«é“¾æ¥ç»™æ”¶é›†èµ·æ¥äº†ã€‚åç»­ä½ çš„ä¸œè¥¿è‚¯å®šè¢«äººå®¶çœ‹å…‰å–½ã€‚\néšç§çš„å®ˆæŠ¤æƒå§‹ç»ˆæ˜¯åœ¨ä½ è‡ªå·±æ‰‹ä¸Šï¼Œåœ¨åˆ†äº«æ–‡ä»¶çš„æ—¶å€™ï¼Œè¯·ä»”ç»†æ£€æŸ¥æ–‡ä»¶é‡Œé¢çš„ä¸œè¥¿æ˜¯ä¸æ˜¯å®Œå…¨å’Œä½ è‡ªå·±çš„éšç§æ²¡æœ‰å…³ç³»ï¼Œæœ€å¥½çš„åˆ†äº«æ˜¯åªåˆ†äº«æ–‡ä»¶ï¼Œè€Œä¸è¦åˆ†äº«æ–‡ä»¶å¤¹ï¼ˆå› ä¸ºå¯¹è¿™ä¸ªæ–‡ä»¶å¤¹çš„åç»­ä¿®æ”¹ï¼ŒåŸæœ‰çš„é‚£ä¸ªåˆ†äº«é“¾æ¥éƒ½èƒ½çœ‹å¾—åˆ°ï¼‰ï¼Œåˆ«åˆ°æ—¶å€™åˆ†äº«ä¸€ä¸ªç›—ç‰ˆæ¸¸æˆé¡ºä¾¿æŠŠè‡ªå·±èº«ä»½è¯çš„ç…§ç‰‡ä¹Ÿåˆ†äº«ç»™åˆ«äººäº†ã€‚\nç°åœ¨ç½‘ç›˜çš„ç”¨æˆ·é¡µé¢éƒ½èƒ½çœ‹åˆ°è‡ªå·±çš„åˆ†äº«é“¾æ¥ï¼Œæ—¶ä¸æ—¶å»æ£€æŸ¥ä¸€ä¸‹ï¼ŒæŠŠè¿‡æ—¶çš„ã€ä¸éœ€è¦çš„åˆ†äº«é“¾æ¥ç»™ä»–ä»¬åˆ æ‰ã€‚\n\nå¦‚æœæœ‰äº›èµ„æºä½ ä¸å¸Œæœ›è¢«ç½‘ç›˜banæ‰ï¼Œè¿˜æœ‰ä¸ªå°åŠæ³•æ˜¯å°†èµ„æºå‹ç¼©äº†ä¹‹åï¼Œæ”¾å…¥å¦å¤–ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹é‡Œé¢éšä¾¿ä¸¢å‡ ä¸ªæ–‡ä»¶æ¥æ··æ·†è§†å¬ï¼ˆä¸»è¦æ˜¯ä¸ºäº†è®©ä½ è¿™ä¸ªå‹ç¼©åŒ…çš„md5å’Œå…¶ä»–ç›¸åŒèµ„æºçš„å‹ç¼©åŒ…ä¸ä¸€æ ·ï¼‰å†åŠ ä¸Šè§£å‹å¯†ç ï¼Œèƒ½å¤§å¤§å‡å°è¢«bançš„æ¦‚ç‡ï¼\nå¦å¤–ï¼Œè¯·ä¸€å®šä¸è¦åœ¨ä»»ä½•ç½‘ç›˜è½¯ä»¶é‡Œé¢ä½¿ç”¨åœ¨çº¿è§£å‹åŠŸèƒ½ï¼Œä»–ä¼šè®°å½•ä½ è§£å‹å¯†ç ç„¶åå»ç®—å†…éƒ¨æ–‡ä»¶çš„md5ï¼Œç„¶åç»™ä½ banæ‰ã€‚ï¼ˆé€›è´´å§çš„æ—¶å€™çœ‹åˆ°è¿‡è¿™ç§æƒ…å†µï¼Œå±å®æ— è¯­ï¼‰\n\nNASnasè¯´ç™½äº†å°±æ˜¯å¦å¤–ä¸€å°å°ç”µè„‘ï¼Œåªä¸è¿‡è¿™å°ç”µè„‘ä¸Šæœ‰å¾ˆå¤šç¡¬ç›˜ä½ï¼Œå…¶ä¸»è¦çš„ç›®æ ‡å°±æ˜¯ç®¡ç†ç¡¬ç›˜é‡Œé¢çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬å°†å…¶ä»–è®¾å¤‡çš„æ•°æ®å¤‡ä»½ä¸Šå»ã€‚\næ—¢ç„¶è°ˆåˆ°å¤‡ä»½ï¼Œé‚£å°±é¡ºä¾¿è¯´è¯´ä»€ä¹ˆæ—¶å€™ä½ éœ€è¦ä¹°ä¸€å°naså§ï¼Ÿ\né¦–å…ˆè¦è¯´æ˜çš„æ˜¯ï¼Œnasæœ¬èº«å·²ç»ä¸è´µäº†ã€‚å°é²œæ¬¾å¯ä»¥ä¹°æµ·åº·çš„h99proï¼Œæœ‰åŸºç¡€çš„nasç®¡ç†åŠŸèƒ½ã€‚ä¸€èˆ¬æ—¥ç”¨å¯ä»¥ä¹°æµ·åº·çš„mega20ï¼ŒåŒç›˜ä½çš„ä»·æ ¼æ˜¯500ï¼ˆPDDï¼‰è¦çŸ¥é“ï¼Œè¿™ä¸ªä»·æ ¼å·²ç»æ¯”æŸäº›ç¡¬ç›˜æŸœéƒ½ä¾¿å®œäº†ï¼›\nå…ˆä¸è¦ç®¡nasé™„å±çš„dockerç­‰åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æµ·åº·æ˜¯æ²¡æœ‰çš„ã€‚ä½†NASæœ¬èº«è¦åšåˆ°çš„å…¶å®åªæ˜¯å­˜å‚¨ï¼Œåœ¨æ•°æ®å¤‡ä»½è¿™ç‚¹ï¼Œæµ·åº·çš„NASæ˜¯å®Œå…¨å¤Ÿç”¨çš„ï¼\n\næˆ‘å½“åˆä¹°nasçš„åŸç”±æ˜¯ï¼šæ–¹ä¾¿ä¸‹å¥½ç”µç”µå½±åœ¨æ‰‹æœºä¸Šçœ‹ï¼›ç”µè„‘çœ‹å±å¹•å¤§ç¡®å®çˆ½ï¼Œä½†è¿œæ²¡æœ‰èººç€çœ‹èˆ’æœğŸ˜‚\n\nnasè¿™ä¸œè¥¿ï¼Œç‰¹åˆ«æ˜¯å¸¦dockerçš„nasåŸºæœ¬éƒ½ä¸Š1käº†ï¼Œå…¶æœ¬èº«çš„ä»·æ ¼å·²ç»èƒ½é¡¶ä¸Šå¤šå¹´çš„ç½‘ç›˜ä¼šå‘˜äº†ã€‚æ›´åˆ«ænasåœ¨å®¶é‡Œé¢çš„è®¿é—®é€Ÿåº¦ç»å¯¹ä¸ä¼šæœ‰ç½‘ç›˜ä¼šå‘˜å¿«ï¼Œé™¤éä½ å®¶èƒ½å¼„åˆ°ipv4çš„å…¬ç½‘IPï¼ˆè¦æŠ˜è…¾å¾ˆå¤šä¸œè¥¿çš„ï¼Œå¾ˆéº»çƒ¦ï¼‰\n\nä»€ä¹ˆæ˜¯å¸¦dockerçš„nasï¼Ÿç®€å•æ¥è¯´å°±æ˜¯dockerå¯ä»¥ç†è§£ä¸ºæ˜¯nasä¸Šçš„ä¸€ä¸ªè½¯ä»¶å•†åº—ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å„ç§å¼€æºçš„dockerè½¯ä»¶ï¼Œæ¥å®ç°èµ„æºä¸‹è½½ã€æ–‡ä»¶ç®¡ç†ã€ç…§ç‰‡ç®¡ç†ã€åœ¨çº¿çœ‹è§†é¢‘ç­‰ç­‰çš„åŠŸèƒ½ã€‚\nè€Œæ²¡æœ‰dockerçš„nasåªèƒ½å±€é™äºå‚å®¶ç»™ä½ æä¾›çš„åŸºæœ¬åŠŸèƒ½ã€‚è€Œä¸”é‚£äº›ä¸å¸¦dockerçš„nasçš„ç³»ç»Ÿå¤§æ¦‚ç‡æ˜¯ä¸ä¼šæœ‰ä»€ä¹ˆå¥½çš„åŠŸèƒ½æ€§å‡çº§çš„ã€‚èƒ½ç»™ä½ æ¨ä¸ªä¿®ç³»ç»Ÿbugçš„æ›´æ–°éƒ½è°¢å¤©è°¢åœ°äº†ã€‚æ¯•ç«Ÿè¿˜æ˜¯ä¸€åˆ†é’±ä¸€åˆ†è´§çš„ã€‚\n\nå¦‚æœä½ åªæ˜¯ä¸ºäº†æ•°æ®å¤‡ä»½ï¼Œå®Œå…¨å¯ä»¥ä¸ç”¨ä¹°nasã€‚ç»™è‡ªå·±ç”µè„‘åŠ ä¸ªç¡¬ç›˜ã€æˆ–è€…ä¹°ä¸ªç§»åŠ¨ç¡¬ç›˜æ¥å†·å¤‡ä»½ï¼Œéƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ç”šè‡³ç½‘ç›˜å¼€ä¸ªå¤šå¹´ä¼šå‘˜ï¼Œè‡ªå·±æ‰‹åŠ¨å¤‡ä»½å†…å®¹åˆ°äº‘ç›˜éƒ½ä¼šæ¯”nasçš„ç»´æŠ¤æ›´åŠ æ–¹ä¾¿ã€‚\nä½†å¦‚æœæƒ³å°è¯•é™„å±çš„å½±éŸ³ç®¡ç†ã€èµ„æºä¸‹è½½ã€è¿œç¨‹å¼€å‘ç­‰åŠŸèƒ½ï¼Œæˆ–è€…åƒæˆ‘ä¸€æ ·å®æ„¿æ•°æ®åœ¨è‡ªå·±çš„æœ¬åœ°å­˜ä¹Ÿä¸æƒ³ä¸¢ç½‘ç›˜çš„è¯ï¼Œé‚£å°±å¯ä»¥åœ¨è‡ªå·±ç»æµæ¡ä»¶å…è®¸çš„æƒ…å†µä¸‹ä¹°ä¸ªå¸¦dockerçš„nasï¼Œæ¥å¤‡ä»½æ•°æ®ã€ä¸‹ç‚¹èµ„æºä»€ä¹ˆçš„ã€‚\nThe endå°±è¯´è¿™ä¹ˆå¤šå§ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚ä¸è¿‡åº”è¯¥æ²¡äººçœ‹ï¼Œå¤§æ¦‚ç‡åªæ˜¯æˆ‘è‡ªå·±ç¢ç¢å¿µï¼ˆé˜¿å·´é˜¿å·´é˜¿å·´ï¼‰\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€winã€‘windowså¿…è£…è½¯ä»¶æ±‡æ€»","url":"/posts/3861578416/","content":"è®°å½•ä¸€ä¸‹æˆ‘è‡ªå·±ä½¿ç”¨windowsç”µè„‘æ—¶å¿…è£…çš„é‚£äº›è½¯ä»¶ï¼Œæ¯æ¬¡é…ç½®æ–°ç”µè„‘è¿™äº›è½¯ä»¶éƒ½æ˜¯å¿…è£…ã€‚\næ¬¢è¿è¯„è®ºåŒºäº¤æµä½ å¸¸ç”¨çš„è½¯ä»¶ï¼\n1.ç”Ÿæ´»æ—¥å¸¸\nTIMï¼ˆå…¶å®å°±æ˜¯QQï¼Œä½†æ˜¯ä¸è£…QQï¼Œæ–°å‡ºçš„QQ9ä¹Ÿæ²¡æœ‰TIMå¥½ç”¨ï¼‰\nå¾®ä¿¡\nWPSï¼ˆä¸ªäººéå¸¸éœ€è¦äº‘åŒæ­¥ï¼Œè€Œä¸”ä¹Ÿå……äº†ä¼šå‘˜ï¼‰\nè…¾è®¯ä¼šè®®ï¼ˆä¹‹å‰ä¸Šç½‘è¯¾ç”¨ï¼Œç°åœ¨æ˜¯é¢è¯•ç”¨ï¼‰\nç½‘æ˜“é‚®ç®±å¤§å¸ˆï¼ˆç½‘é¡µç‰ˆè€æ˜¯è®©æˆ‘é‡æ–°ç™»å½•ï¼Œå¹²è„†ä¸‹ä¸ªå®¢æˆ·ç«¯ï¼‰\nedgeæµè§ˆå™¨\nç«ç‹æµè§ˆå™¨ï¼ˆå¤‡ç”¨ï¼‰\nç«ç»’ç”µè„‘ç®¡å®¶\nfoobar2000ï¼ˆå¬æ­Œï¼‰gitee.com&#x2F;dream7180&#x2F;foobox-cn\nAdobe PRå’ŒPSï¼ˆå¶å°”ä¼šç”¨ï¼‰\nå…‰å½±é­”æœ¯æ‰‹ï¼ˆç®€å•å¤„ç†å›¾ç‰‡ï¼‰å…‰å½±é­”æœ¯æ‰‹å®˜æ–¹ç½‘ç«™\nå®Œç¾è§£ç ï¼ˆçœ‹è§†é¢‘ç”¨ï¼Œå…¶å®å°±æ˜¯potplayerï¼‰å®Œç¾è§£ç å®˜æ–¹ç½‘ç«™\nå¶å°”ç”¨çš„ä¸Štodeskå’Œå‘æ—¥è‘µ\n\n2.è½¯ä»¶å¼€å‘\nVS2019ï¼ˆC++ï¼Œä¸è¿‡ç°åœ¨åŸºæœ¬éƒ½æ˜¯åœ¨linuxä¸Šå†™ä»£ç äº†ï¼‰\nVSCODE\nWSL2çš„CENTOSæˆ–UBUNTU\nVMwareï¼ˆæ¯”virtualboxæ€§èƒ½å¥½å¤ªå¤šäº†ï¼‰\nTabbyï¼ˆsshç»ˆç«¯ï¼‰Tabby - a terminal for a more modern age\nPython3.10.x Download Python | Python.org\nnodejs v16.20.2ï¼ˆhexoéœ€è¦ï¼‰Index of &#x2F;dist&#x2F;v16.20.2&#x2F;\nGitç»ˆç«¯ Git - Downloads\n\n3.ç”µè„‘ä¼˜åŒ–å’Œå·¥å…·\nGeekï¼ˆç»¿è‰²å¸è½½è½¯ä»¶ï¼‰ Geek Uninstaller - the best FREE uninstaller\nBandzip v6.26ï¼ˆæ—§ç‰ˆæœ¬æ²¡æœ‰å¹¿å‘Šï¼Œå¯ä»¥å…³é—­è‡ªåŠ¨æ›´æ–°ã€‚æ–°ç‰ˆè™½ç„¶æœ‰å¹¿å‘Šï¼Œä½†å®Œå…¨ä¸å½±å“ä½¿ç”¨ï¼‰Windows ç‰ˆæœ¬çš„ Bandizip Â· ä¸šå†…é¢†å…ˆçš„å‹ç¼©æ–‡ä»¶è§£å†³æ–¹æ¡ˆ\nShanaEncoder v5.2.2.3 Chsï¼ˆè§†é¢‘å‹ç¼©è½¯ä»¶ï¼‰Releases Â· 1265578519&#x2F;ShanaEncoder\nSanipasteï¼ˆä¸ªäººæ„Ÿè§‰ç‰¹åˆ«å¥½ç”¨ï¼Œå”¯ä¸€ç¼ºå°‘çš„å°±æ˜¯é•¿æˆªå›¾ï¼Œä¸€èˆ¬éƒ½æ˜¯TIMæŒ‚åå°ç”¨QQæˆªå›¾æ¥æˆªé•¿å±ï¼‰Snipaste - æˆªå›¾ + è´´å›¾\nFlashå›½é™…ç‰ˆï¼ˆæ²¡æœ‰å¹¿å‘Šçš„flashï¼ŒQQéœ€è¦ä½¿ç”¨ï¼‰Adobe Flash Player v34.0.0.277 å›½é™…ç‰ˆ&#x2F;çº¯å‡€ç‰ˆ\nMenuMgr_1.1_20130514ï¼ˆå³é”®èœå•ç®¡ç†å·¥å…·ï¼Œåœ¨è”æƒ³è½¯ä»¶å•†åº—é‡Œé¢ä¸‹è½½ï¼‰\nå›¾å§å·¥å…·ç®±ï¼ˆå¾ˆå¤šç”µè„‘æµ‹è¯•è½¯ä»¶ï¼‰å›¾å§å·¥å…·ç®± - æœ€çº¯å‡€çš„ç¡¬ä»¶å·¥å…·ç®±\nFreeFileSyncï¼ˆæ–‡ä»¶å¤¹åŒæ­¥å’Œå¤‡ä»½è½¯ä»¶ï¼Œç”¨äºæœ¬æœºä¸Šçš„ä¸¤ä¸ªç¡¬ç›˜å¤‡ä»½èµ„æ–™ï¼Œä¸€ä¸ªèµ„æ–™åœ¨ä¸¤ä¸ªç›˜ä¸Šéƒ½å­˜ç€ï¼‰FreeFileSync: Open Source File Synchronization &amp; Backup Software\nCaesium Image Compressorï¼ˆå›¾ç‰‡å‹ç¼©è½¯ä»¶ï¼‰Caesium - Image Compressor\nEverythingsï¼ˆæœç´¢è½¯ä»¶ï¼‰ä¸‹è½½ - voidtools\nKeePassï¼ˆå¯†ç ç®¡ç†ï¼Œé…åˆå®‰å“APP Keepass2Android å’Œ Onedrive è¿›è¡Œå¤šç«¯åŒæ­¥ï¼‰KeePass Password Safe\nEVå½•å±ï¼ˆæ²¡æœ‰æ°´å°å’Œå¹¿å‘Šï¼Œå½•å±æ¯”è¾ƒæ–¹ä¾¿ï¼‰EVå½•å± - å…è´¹é«˜æ¸…æ— æ°´å°çš„å±å¹•å½•åˆ¶è½¯ä»¶\ndraw.ioå’Œxmindï¼ˆéƒ½æ˜¯ç”»å›¾è½¯ä»¶ï¼‰\né—ªè±†ä¸‹è½½å™¨ï¼ˆä¸‹Bç«™è§†é¢‘ï¼‰\nraidrive&#x2F;cloudriveï¼ˆæŒ‚è½½äº‘ç›˜ï¼Œä½†å®é™…ä½“éªŒæ„Ÿè§‰ä¸å¦‚ç›´æ¥ç”¨äº‘ç›˜webé¡µé¢ï¼‰CloudDrive - Home\nEarTrumpetï¼ˆä¾¿æ·è°ƒæ§æ¯ä¸ªåº”ç”¨çš„éŸ³é‡ï¼Œå¾®è½¯å•†åº—ä¸‹è½½ï¼‰\n\n4.æ¸¸æˆå°å¿ƒåˆ«ä¸‹å‡å¹³å°äº†å“¦\n\nSteamå®¢æˆ·ç«¯ æ¬¢è¿æ¥åˆ° Steam\nEpicå®¢æˆ·ç«¯ Epicæ¸¸æˆå•†åŸ\nEA appï¼ˆè¿™ä¸ªæ˜¯åœ¨steamä¸Šä¹°çš„EAæ¸¸æˆä¼šæ†ç»‘ä¸‹è½½çš„ï¼‰\nç“¦ç½—å…°ç‰¹å›½æœå’Œæ¸¯æœï¼ˆå›½æœå‡ºäº†ä¹‹åå¾ˆå°‘ç©æ¸¯æœäº†ï¼Œå³ä¾¿æˆ‘å›½æœ0çš®è‚¤ï¼‰\nLOLï¼ˆç‰¹åˆ«å°‘ç©ï¼‰\né€é¥æ¨¡æ‹Ÿå™¨ï¼ˆæ‰‹æ¸¸æ¨¡æ‹Ÿå™¨ï¼Œç”¨è¿‡çš„å‡ ä¸ªæ¨¡æ‹Ÿå™¨é‡Œé¢æ€§èƒ½æœ€å¥½çš„ï¼‰é€é¥å®‰å“æ¨¡æ‹Ÿå™¨_å®‰å“æ¨¡æ‹Ÿå™¨ç”µè„‘ç‰ˆ_å®‰å“æ‰‹æ¸¸æ¨¡æ‹Ÿå™¨å“ªä¸ªå¥½ç”¨_é€é¥æ‰‹æœºæ¨¡æ‹Ÿå™¨å®˜ç½‘\né›·ç¥å‡é€Ÿå™¨ï¼ˆä¸»è¦æ˜¯ä¾¿å®œï¼‰é›·ç¥ç½‘æ¸¸åŠ é€Ÿå™¨-ä¸“çº¿åŠ é€Ÿæ¸¸æˆ,æŒ‰åˆ†é’Ÿè®¡è´¹å¯æš‚åœ,å…è´¹è¯•ç”¨\nparsecï¼ˆè¿œç¨‹æ§åˆ¶ï¼Œæ”¯æŒæ‰‹æŸ„ï¼‰Connect to Work or Games from Anywhere | Parsec\nsteam++ï¼ˆwalt toolkitsï¼Œå¾®è½¯å•†åº—å¯ä¸‹è½½ï¼‰\nmsi afterburnerï¼ˆæ€§èƒ½ç›‘çœ‹ï¼‰Afterburner\nDirectX-927ï¼ˆå¾ˆå¤šç”µè„‘éƒ½ç¼ºå°‘è¿™ä¸ªä¾èµ–åŒ…ï¼Œä¸€äº›æ¸¸æˆå°±ç©ä¸äº†ï¼Œç›®å‰é‡åˆ°çš„æ˜¯valorantæ¸¯æœç¼ºå°‘è¯¥åŒ…å°±æ— æ³•ç©ï¼‰ç™¾åº¦ç½‘ç›˜-æå–ç 1067\n\n5.ç¬”è®°\næ€æºç¬”è®° æ€æºç¬”è®° - éšç§ä¼˜å…ˆçš„ä¸ªäººçŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ Markdown æ’ç‰ˆã€å—çº§å¼•ç”¨å’ŒåŒå‘é“¾æ¥\nobsidian Obsidian - Sharpen your thinking\nTypora Typora å®˜æ–¹ä¸­æ–‡ç«™\nPicgoï¼ˆåšå®¢å›¾åºŠï¼‰PicGo\n\n6.å…¶ä»–\nè¿…é›·\nqbittorrent&#x2F;motrix\ntailscale\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€å›¾åºŠã€‘giteeå›¾åºŠå¯„äº†ï¼Œæ‰¹é‡è½¬å­˜æ–‡ä»¶åˆ°é˜¿é‡Œäº‘OSS","url":"/posts/2474096396/","content":"æœ¬ç¯‡åšå®¢å°†æ•™æ‚¨å¦‚ä½•è½¬ç§»giteeå›¾åºŠåˆ°é˜¿é‡Œäº‘OSS\n\n\n\nGiteeçš„é—®é¢˜æœ€è¿‘ä¸çŸ¥é“å¤§å®¶çš„giteeå›¾åºŠæ˜¯å¦å‡ºç°äº†æŠ½é£ç°è±¡\nç®€å•çš„è¯´æ¥å°±æ˜¯ï¼Œgiteeä»“åº“é‡Œé¢çš„å›¾ç‰‡éƒ½èƒ½æ­£å¸¸è®¿é—®ï¼Œpicgoä¹Ÿèƒ½æ­£å¸¸ä¸Šä¼ \nä½†æ˜¯æœ¬åœ°typora&#x2F;obsidianéƒ½æ— æ³•æ¸²æŸ“å‡ºå›¾ç‰‡ï¼Œç”šè‡³å‡ºç°äº†å›¾ç‰‡å…¨å˜æˆäº†giteeçš„logoçš„æƒ…å†µ\n\nè™½ç„¶ä¸çŸ¥é“å®ƒç°åœ¨æ¢å¤æ²¡æœ‰ï¼ˆå› ä¸ºæˆ‘å·²ç»å…¨éƒ¨è½¬ç§»åˆ°é˜¿é‡Œäº‘OSSäº†ï¼‰ï¼Œä½†è¿˜æ˜¯å»ºè®®å¤§å®¶ä¸è¦ç”¨giteeä½œä¸ºå›¾åºŠäº†ï¼å› ä¸ºæˆ‘ä¹‹å‰ä½¿ç”¨çš„æ—¶å€™å°±å‡ºç°äº†å¥½å‡ æ¬¡æ— æ³•æ¸²æŸ“å›¾ç‰‡çš„æƒ…å†µ\n\nå½“æ—¶æˆ‘å»é—®äº†ä¸€ä¸ªå¤§ä½¬ï¼Œå¤§ä½¬çš„å›å¤æ˜¯ï¼šâ€œä¸æå€¡ç”¨ä»£ç ä»“åº“åšå›¾åºŠâ€\n\nåœ¨æˆ‘çš„å¦å¤–ä¸€ç¯‡åšå®¢é‡Œé¢ä¹Ÿæåˆ°äº†è¿™ä¸ªé—®é¢˜\n\né˜¿é‡Œäº‘OSSæˆ‘å·²ç»ç”¨äº†3ä¸ªæœˆäº†ï¼Œå®ƒæ¯”giteeç¨³å®šå¾ˆå¤šï¼Œç›®å‰æ²¡æœ‰é‡åˆ°è¿‡æ— æ³•åŠ è½½å›¾ç‰‡çš„é—®é¢˜ã€‚\n\nä¸‹é¢ç»™å¤§å®¶æä¸€ä¸ªgiteeè½¬é˜¿é‡Œäº‘å›¾åºŠçš„è§£å†³æ–¹æ¡ˆï¼Œç†è®ºä¸Šæ¥è¯´è¿™ä¸ªæ–¹æ¡ˆæ˜¯æ‰€æœ‰å›¾åºŠéƒ½èƒ½é€šç”¨çš„\nGiteeæ‰¹é‡è½¬é˜¿é‡Œäº‘OSS\næ€è·¯æ¥è‡ªäºCSDNç”¨æˆ·@1nnoh\n\n1.é…ç½®é˜¿é‡Œäº‘OSSæ—¢ç„¶è¦è½¬é˜¿é‡Œäº‘å›¾åºŠï¼Œç¬¬ä¸€æ­¥è‚¯å®šæ˜¯é…ç½®å›¾åºŠäº†\nè¿™ä¸ªæˆ‘ä¹‹å‰å†™è¿‡åšå®¢ï¼Œæ¯”è¾ƒè¯¦ç»†ï¼Œå¤§å®¶ç›´æ¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥é˜…è¯»å³å¯ï¼\n\nTypora+PicGo+é˜¿é‡Œäº‘OSSæ­å»ºåšå®¢å›¾åºŠï¼ˆè¶…è¯¦ç»†ï¼‰\n\n\n2.æ‰¹é‡ä¸Šä¼ å°†giteeçš„å›¾åºŠä»“åº“å…¨éƒ¨ä¸‹è½½ä¸‹æ¥\n\nå»ºè®®æŠŠå›¾ç‰‡æ–‡ä»¶å¤¹æ‰“åŒ…å¤‡ä»½ä¸€ä¸‹ï¼Œä»¥å…å‡ºç°é—®é¢˜\nä»¥ä¸‹æ˜¯æˆ‘ä¹‹å‰ä½œä¸ºå›¾åºŠçš„ä»£ç ä»“åº“ï¼Œå›¾ç‰‡å…¨éƒ¨å­˜æ”¾åœ¨imgæ–‡ä»¶å¤¹é‡Œé¢\n\nä½ å¯ä»¥åœ¨é˜¿é‡Œäº‘OSSçš„bucketé‡Œé¢åˆ›å»ºä¸€ä¸ªåŒåæ–‡ä»¶å¤¹ï¼ˆä¸åŒåä¹Ÿæ²¡å…³ç³»ï¼‰\nç„¶åæŠŠè¿™äº›å›¾ç‰‡éƒ½ä¸Šä¼ è¿›å»\n\né˜¿é‡Œäº‘ossæ”¯æŒå¤šæ–‡ä»¶ä¸Šä¼ ï¼Œå»ºè®®å¤§å®¶åœ¨å·²æœ‰bucketä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œé¿å…å‡ºç°è¦†ç›–bucketå·²æœ‰æ–‡ä»¶çš„æƒ…å†µ\n\nå¦‚æœæ˜¯æ–°bucketï¼Œéšä¾¿åˆ›ä¸€ä¸ªæ–‡ä»¶å¤¹å°±OKäº†ï¼Œä¹‹å‰çš„åšå®¢é‡Œé¢éƒ½æœ‰æåˆ°\n\n\nåœ¨é…ç½®é˜¿é‡Œäº‘OSSçš„æ•™ç¨‹ä¸­ï¼Œæˆ‘å»ºè®®å¤§å®¶æ‰“å¼€picgoçš„æ—¶é—´æˆ³é‡å‘½åï¼Œå› ä¸ºè¿™ä¸ªå¯ä»¥é˜²æ­¢åŒåæ–‡ä»¶çš„å†²çª\n\nä¸ç®¡ä½ æœ‰æ²¡æœ‰å¼€å¯è¿™ä¸ªåŠŸèƒ½ï¼Œéƒ½ä¸å½±å“åç»­çš„æ“ä½œï¼ˆæ²¡å¼€çš„å»ºè®®å¼€ä¸€ä¸‹ï¼‰\n3.æ¯”è¾ƒé“¾æ¥åŒºåˆ«ä¸Šä¼ å®Œæ¯•åï¼Œæˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹é˜¿é‡Œäº‘å’Œgiteeçš„é“¾æ¥å·®åˆ«\n\nä½ çš„é“¾æ¥å¯èƒ½å’Œæˆ‘çš„ä¸åŒï¼Œè¯·ä»¥å®é™…ä¸ºå‡†\n\n# giteehttps://gitee.com/ä½ çš„giteeå/ä»“åº“å/raw/master/æ–‡ä»¶å¤¹åå­—/202108160849879.png# é˜¿é‡Œäº‘osshttps://ä½ çš„bucketåå­—.oss-cn-åœ°åŸŸ.aliyuncs.com/bucketä¸‹æ–‡ä»¶å¤¹çš„åå­—/202108160849879.png\n\nå¯ä»¥å‘ç°ï¼Œå…¶å®giteeå’Œé˜¿é‡Œäº‘OSSçš„é“¾æ¥éƒ½æ˜¯ä»¥å›¾ç‰‡çš„æ–‡ä»¶åç»“å°¾çš„\nä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰«ææˆ‘ä»¬æœ¬åœ°çš„mdæ–‡ä»¶ï¼Œå°†åŸæœ¬giteeå›¾åºŠé“¾æ¥çš„å‰é¢éƒ¨åˆ†ï¼Œæ•´ä½“æ›¿æ¢æˆé˜¿é‡Œäº‘é“¾æ¥å°±å¯ä»¥äº†ï¼\nå³ï¼šå°†giteeé“¾æ¥\nhttps://gitee.com/ä½ çš„giteeå/ä»“åº“å/raw/master/æ–‡ä»¶å¤¹åå­—/\n\næ›¿æ¢æˆ\nhttps://ä½ çš„bucketåå­—.oss-cn-åœ°åŸŸ.aliyuncs.com/bucketä¸‹æ–‡ä»¶å¤¹çš„åå­—/\n\nåé¢çš„æ–‡ä»¶åæ— éœ€æ›´æ”¹\n\n4.æ‰¹é‡ä¿®æ”¹\næˆ‘ä»¬éœ€è¦ç”¨åˆ°æ–‡æœ¬ç¼–è¾‘ç¥å™¨notepad++\nè¿™ä¸ªå·¥å…·éå¸¸å®ç”¨ï¼Œé™¤äº†å¯ä»¥ä¿®æ”¹æ–‡ä»¶ç¼–ç æ ¼å¼å¤–ï¼Œè¿˜å¯ä»¥å®Œæˆæ‰¹é‡æŸ¥æ‰¾æ–‡ä»¶å†…å®¹ç­‰å¾ˆå¤šäº‹æƒ…ï¼Œæœ¬æ–‡çš„æƒ…å†µå°±å¯ä»¥ç”¨å®ƒæ¥å®Œæˆ\n\næ‰“å¼€notepad++åï¼Œåœ¨é¡¶éƒ¨çš„æœç´¢æŒ‰é’®ä¸­ï¼Œé€‰æ‹©åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾ï¼Œç„¶åé€‰æ‹©ä½ çš„markdownæ–‡ä»¶è·¯å¾„\n\næ‰“å¼€è¿™ä¸ªé¢æ¿åï¼Œæƒ³å¿…å·²ç»ä¸éœ€è¦æˆ‘æ•™ä½ æ€ä¹ˆä¿®æ”¹äº†å§ï¼ŸğŸ˜‚\nå†æ¬¡æç¤ºï¼Œä¿®æ”¹å‰è¯·å…ˆå¤‡ä»½ä¸€éä½ çš„æ–‡ä»¶ï¼\n\n\nä½ è¿˜å¯ä»¥ç”¨VSCæ¥æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ä¸­çš„å†…å®¹å‚è€ƒè½¯é€šè¾¾çš„åšå®¢ğŸ‘‰https://cyddgh.github.io/post/20220304175458/\n\n\nThe endåˆ°è¿™é‡Œï¼Œæ“ä½œå°±å®Œæˆäº†ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œæ‰€æœ‰çš„é“¾æ¥éƒ½è¢«æ›¿æ¢äº†\nä½ å¯ä»¥æ„‰å¿«åœ°ç»§ç»­ä½¿ç”¨é˜¿é‡Œäº‘OSSä½œä¸ºä½ çš„å›¾åºŠäº†ï¼\n\nå¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¿˜è¯·åœ¨ä¸‹æ–¹è¯„è®ºè¯´ä¸€ä¸‹å“¦ï¼\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","å›¾åºŠ"],"tags":["å›¾åºŠ"]},{"title":"ã€winã€‘Windowsä¸‹MSI Afterburnerå¦‚ä½•è®©å…¶ä¸åœ¨æŸä¸ªè½¯ä»¶ä¸­æ˜¾ç¤ºå¸§æ•°","url":"/posts/4160666395/","content":"Windowsä¸‹MSI Afterburnerå¦‚ä½•è®©å…¶ä¸åœ¨æŸä¸ªè½¯ä»¶ä¸­æ˜¾ç¤ºå¸§æ•°\n\n\n1.é—®é¢˜è¯´æ˜æ€»æ‰€å‘¨çŸ¥ï¼ŒMSI Afterburnerè¿™ä¸ªè½¯ä»¶å¯ä»¥åœ¨æ¸¸æˆé‡Œé¢å±•ç¤ºä½ å½“å‰ç”µè„‘çš„å„é¡¹ç”Ÿå‘½ä½“å¾ï¼ŒåŒ…æ‹¬GPU&#x2F;CPUåŠŸè€—é¢‘ç‡æ¸©åº¦ï¼Œå†…å­˜å ç”¨ï¼Œå½“å‰å¸§æ•°ç­‰ç­‰æ•°æ®ï¼Œä¸ç®¡æ˜¯ç”¨æ¥ç›‘çœ‹ç”µè„‘è¿è¡Œæ˜¯å¦æ­£å¸¸ï¼Œè¿˜æ˜¯ç”¨æ¥å°è¶…ä¸€ä¸‹æ˜¾å¡ï¼Œéƒ½æ˜¯å¾ˆå¥½ç”¨çš„ä¸œè¥¿ï¼Œå†åŠ ä¸Šæ¯«æ— å¹¿å‘Š+å…è´¹ï¼Œå‡ ä¹æ˜¯äººæ‰‹å¿…å¤‡çš„PCè‰¯è¯\n\nä½†æ€»æœ‰æ—¶å€™è¿™ä¸ªè½¯ä»¶ä¼šæŠ½é£ï¼Œæ¯”å¦‚æˆ‘çš„ç”µè„‘é‡Œé¢ï¼Œæœ€æ–°ç‰ˆæœ¬çš„è¿™ä¸ªè½¯ä»¶ï¼Œå°±ä¼šæŠŠwindowsçš„ç³»ç»Ÿåº”ç”¨ç…§ç‰‡è«åå…¶å¦™çš„ä¹Ÿè¯†åˆ«æˆäº†ä¸€ä¸ªæ¸¸æˆï¼Œåœ¨é‡Œé¢æ˜¾ç¤ºå¸§æ•°ï¼Œæœ€ç¦»è°±çš„æ˜¯ï¼Œæœ€ä¸‹æ–¹çš„é¢„è§ˆå…¶ä»–å›¾ç‰‡çš„å°æ¡†æ¡†é‡Œé¢ï¼Œä¹Ÿç»™ä½ æ˜¾ç¤ºäº†å¸§æ•°\n\nè¿™è‚¯å®šå¾ˆæ¼ç«ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆæ ·æ‰èƒ½è®©ä»–ä¸åœ¨è¿™é‡Œé¢æ˜¾ç¤ºå‘¢ï¼Ÿ\n2.é…ç½®å’ŒMSI Afterburneræ†ç»‘ä¸‹è½½çš„æœ‰è¿™ä¹ˆä¸€ä¸ªè½¯ä»¶ï¼Œå…¶å®å®ƒæ‰æ˜¯è´Ÿè´£å°†æ•°æ®æŠ•å±åˆ°ä½ çš„å±å¹•ä¸Šçš„è½¯ä»¶ï¼Œåœ¨è¿™é‡Œé¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾ç½®åœ¨æŸä¸ªè½¯ä»¶ä¸­ä¸æ˜¾ç¤ºå¸§æ•°\n\nå¯¹äºæ­£å¸¸å®‰è£…çš„è½¯ä»¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ‰¾åˆ°è½¯ä»¶çš„å®‰è£…è·¯å¾„ï¼Œé€‰ä¸­å®ƒçš„exeå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå†è®¾ç½®ä¸€ä¸‹æŠŠå¸§æ•°å™¨å…³é—­ï¼Œå°±å¯ä»¥é¿å…é”™è¯¯åœ°æ˜¾ç¤ºå¸§æ•°å½±å“è½¯ä»¶è‡ªèº«çš„ä½¿ç”¨\n\nä½†æ˜¯windowsè‡ªå¸¦çš„ç…§ç‰‡è½¯ä»¶å°±æœ‰ç‚¹æ¼ç«äº†ï¼Œæˆ‘ä»¬å‹æ ¹ä¸çŸ¥é“å®ƒçš„å¯æ‰§è¡Œæ–‡ä»¶åœ¨å“ªé‡Œï¼\n3.windowsç³»ç»Ÿåº”ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶windowsç»å¤§éƒ¨åˆ†çš„ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶éƒ½åœ¨è¿™é‡Œé¢ï¼Œä½ éœ€è¦æ‰“å¼€æ˜¾ç¤ºéšè—æ–‡ä»¶å¤¹æ‰èƒ½çœ‹åˆ°æ­¤æ–‡ä»¶å¤¹\nC:\\Program Files\\WindowsApps\\\n\nè€Œç…§ç‰‡è½¯ä»¶è·¯å¾„å¦‚ä¸‹ï¼ˆæˆ‘çš„win11ç‰ˆæœ¬æ˜¯22H2 22621.963ï¼‰\nC:\\Program Files\\WindowsApps\\Microsoft.Windows.Photos_2023.11080.4003.0_x64__8wekyb3d8bbwe\n\nè¿™é‡Œé¢æœ‰ä¸€ä¸ªPhotosApp.exeï¼Œå°±æ˜¯windowsè‡ªå¸¦ç…§ç‰‡çš„å¯æ‰§è¡Œæ–‡ä»¶äº†ï¼›\nä½†æ˜¯ï¼ä½ ä¼šå‘ç°ä½ å‹æ ¹æ²¡æœ‰ C:\\Program Files\\WindowsApps\\è¿™ä¸ªæ–‡ä»¶å¤¹çš„è¿›å…¥æƒé™ï¼Œæ›´åˆ«ææ‰¾åˆ°è¿™ä¸ªç…§ç‰‡è½¯ä»¶çš„exeäº†ï¼\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªæ•™ç¨‹ Win10ä¸‹WindowsAppsæƒé™æ€ä¹ˆè·å–ï¼›é¡ºå¸¦ä¸€æï¼Œä¸ºäº†é¿å…åŸæ–‡å¤±æ•ˆï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿè½¬è½½åˆ°äº†æœ¬ç«™ã€‚\n\næ³¨æ„ï¼æ¯•ç«Ÿè¿™ç®—æ˜¯ç³»ç»Ÿåº•å±‚æ–‡ä»¶å¤¹äº†ï¼Œæˆ‘ä¸ç¡®å®šè¿™æ ·ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™æ˜¯å¦ä¼šå‡ºç°é—®é¢˜ï¼å¦‚æœä½ æ‹…å¿ƒå‡ºç°é—®é¢˜ï¼Œè¯·ä¸è¦æ“ä½œï¼Œåœ¨ä¸æ‰“æ¸¸æˆçš„æ—¶å€™ä¸è¦å¯åŠ¨MSI Afterbuneræ˜¯æ›´å¥½çš„é€‰æ‹©ï¼\nå¦‚æœå‡ºç°é—®é¢˜ï¼Œå‚è€ƒ ã€WindowsApps æƒé™é—®é¢˜å¯¼è‡´Microsoft StoreåŠå…¶ä¸‹è½½çš„åº”ç”¨ä¸èƒ½å¯åŠ¨ï¼ˆé—ªé€€ï¼‰çš„è§£å†³åŠæ³•ã€‘ å¤åŸæƒé™ï¼å®åœ¨ä¸è¡Œå°±ææ€•è¦é‡è£…ç³»ç»Ÿäº† ğŸ¤£\n\nç›®å‰æˆ‘è¿™è¾¹è¿˜ä¹ˆæœ‰å‡ºç°å¼‚å¸¸æƒ…å†µï¼Œæ¯•ç«Ÿæˆ‘ä¿®æ”¹ä¸ºäº†everyoneç†è®ºä¸Šæ¥è¯´æ˜¯å¹¶ä¸ä¼šå‡ºç°æƒé™ä¸å¤Ÿè€Œå¯¼è‡´æŸä¸ªç¨‹åºæ— æ³•æ‰§è¡Œçš„é—®é¢˜çš„\n\næ ¹æ®æ•™ç¨‹é‡Œé¢çš„æ­¥éª¤ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå°±å¯ä»¥è·å–åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹çš„è¿›å…¥æƒé™\n\n4.ç¦ç”¨ç…§ç‰‡ä¸­çš„å¸§æ•°æ˜¾ç¤ºæ‰¾åˆ°è¿™ä¸ªPhotosApp.exeä¹‹åï¼Œåœ¨RivaTunerè¿™ä¸ªè½¯ä»¶é‡Œé¢é€‰ä¸­è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°†å…¶çš„displayå…³é—­\n\nå¥½äº†ï¼Œè¿™ä¸‹æ²¡æœ‰èƒ¡ä¹±æ˜¾ç¤ºå¸§æ•°äº†ï¼\n\n5.ä¸æ˜¾ç¤ºæŸä¸ªæ˜¾å¡çš„æ¸©åº¦å¦‚é¢˜ï¼Œæˆ‘é‡åˆ°è¿‡msi afterburner åœ¨ç¬”è®°æœ¬ä¸Šåªæ˜¾ç¤ºGPU1ï¼ˆæ ¸æ˜¾ï¼‰çš„æ¸©åº¦é€‰é¡¹ï¼Œæ²¡æœ‰GPU2ï¼ˆç‹¬æ˜¾ï¼‰çš„æ¸©åº¦é€‰é¡¹ã€‚\nç™¾åº¦æœåˆ°äº†è¿™ä¸ªå¸–å­ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ï¼šä½ ç‚¹å¼€ç›‘æ§é‚£é‡Œï¼Œç„¶åå·²å¯ç”¨çš„ç¡¬ä»¶ç›‘æ§å›¾è¡¨ï¼Œæ—è¾¹æœ‰ä¸‰ä¸ªç‚¹ï¼Œç‚¹äº†ç„¶åå‹¾é€‰gpu.dll\nhttps://tieba.baidu.com/p/7702227770\n\nå‹¾é€‰äº†ä¹‹åï¼Œåœ¨ç›‘æ§é€‰é¡¹é‡Œé¢ä¼šå¤šå‡ºæ¥ä¸€äº›å¯é€‰é¡¹ç›®ã€‚ä½†æ˜¯è¿™è¿˜ä¸å¤Ÿï¼Œé‡å¯ç”µè„‘ä½ åº”è¯¥å°±èƒ½çœ‹åˆ°å¤šå‡ºæ¥çš„GPU2çš„æ¸©åº¦å’Œå ç”¨ç‡é€‰é¡¹äº†ã€‚\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€winã€‘vscodeæ— æ³•ä½¿ç”¨ctrl+shift+på¿«æ·é”®çš„è§£å†³æ–¹æ¡ˆ","url":"/posts/4138872091/","content":"ä»Šå¤©ä½¿ç”¨vscodeçš„æ—¶å€™é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ï¼Œæ˜æ˜å¿«æ·é”®è®¾ç½®çš„æ˜¯ctrl+shift+pï¼Œä½†æ˜¯åœ¨ç”µè„‘ä¸Šæ€ä¹ˆæ•²éƒ½æ•²ä¸å‡ºæ¥ï¼Œå› ä¸ºç”¨è¿™ä¸ªå¿«æ·é”®æ‰“å¼€å‘½ä»¤é¢æ¿éƒ½ä¹ æƒ¯äº†ï¼Œä¹Ÿä¸æƒ³æ¢ï¼Œå°±åœ¨æ‰¾åŸå› ã€‚\nåŒæ—¶ç™¾åº¦çš„æ—¶å€™è¿˜é‡åˆ°äº†å‡ ä¸ªå¯èƒ½çš„é—®é¢˜ï¼š\n\né”®ç›˜ä¸æ”¯æŒå…¨é”®æ— å†²ï¼Œctrl+shift+pçš„ç»„åˆå†²çªäº†\né”®ç›˜åäº†ï¼ˆæœ€å¼€å§‹æˆ‘è¿˜çœŸæœ‰è¿™ä¸ªæƒ³æ³•ï¼Œä½†æµ‹è¯•äº†ä¸€ä¸‹å°±å‘ç°æ²¡åï¼‰\nå¦‚æœæ˜¯ç¬”è®°æœ¬ï¼Œæµ‹è¯•è‡ªå¸¦é”®ç›˜èƒ½å¦æ­£å¸¸ä½¿ç”¨è¯¥å¿«æ·é”®\n\næœ€åå‘ç°æ˜¯æˆ‘å¼€æœºè‡ªå¯äº†picgoï¼Œè€Œpicgoçš„å¿«é€Ÿä¸Šä¼ å¿«æ·é”®å’Œvscodeå†²çªäº†ã€‚\n\nåœ¨picgoçš„è®¾ç½®-å¿«æ·é”®è®¾ç½®é‡Œé¢ï¼ŒæŠŠè¿™ä¸ªå¿«æ·é”®ç»™ç¦ç”¨å°±è¡Œã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["vscode","windows"]},{"title":"ã€winã€‘Windowsä¸‹Cç›˜é‡Œé¢çš„WindowsAppsæ–‡ä»¶å¤¹æƒé™æ€ä¹ˆè·å–","url":"/posts/3712817486/","content":"é¿å…åŸæ–‡å¤±æ•ˆï¼Œè½¬è½½æ­¤æ–‡\nåŸæ–‡ https://www.bkqs.com.cn/content/kn928o443.html\n\n\n\nWinä¸‹WindowsAppsæƒé™æ€ä¹ˆè·å–2023-01-31 14:32:17\nWin10ä¸‹WindowsAppsæƒé™æ€ä¹ˆè·å–ï¼ŸWindowsAppså®‰è£…çš„æ˜¯Windowsåº”ç”¨å•†åº—çš„åº”ç”¨ç¨‹åºï¼Œè®¿é—®æ­¤æ–‡ä»¶å¤¹éœ€è¦è·å–æƒé™æ‰èƒ½è¿›å…¥ã€‚å…·ä½“æ€ä¹ˆè®¾ç½®å‘¢ï¼Ÿä¸€èµ·æ¥äº†è§£ä¸‹å§ï¼\n\næ“ä½œæ–¹æ³•\n01\n1ã€åœ¨è®¡ç®—æœºä¸­ï¼Œæ‰“å¼€æ­¤ç”µè„‘ã€‚ç‚¹å‡»æŸ¥çœ‹é€‰é¡¹ï¼Œå¹¶å‹¾é€‰é€‰é¡¹æ¡†ä¸­çš„â€œéšè—çš„é¡¹ç›®â€ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n02\n2ã€åœ¨æ­¤ç”µè„‘çª—å£ä¸­ï¼Œæ‰¾åˆ°ç³»ç»Ÿç›˜ä¸‹çš„â€œWindowsAppsâ€ï¼ˆéšè—çš„æ–‡ä»¶å¤¹ï¼‰ï¼Œå…·ä½“è·¯å¾„ä¸ºâ€œC:\\Program Files\\WindowsAppsâ€ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n03\n3ã€é€‰ä¸­WindowsAppsæ–‡ä»¶å¤¹ï¼Œå¹¶ç‚¹å‡»é¼ æ ‡å³é”®ï¼Œåœ¨å¼¹å‡ºçš„é€‰é¡¹æ¡†ä¸­ç‚¹å‡»â€œå±æ€§â€é€‰é¡¹ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n04\n4ã€ç‚¹å‡»å±æ€§é€‰é¡¹åï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ‰“å¼€â€œWindowsAppså±æ€§â€å¯¹è¯æ¡†ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n05\n5ã€åœ¨WindowsAppså±æ€§å¯¹è¯æ¡†ä¸­ï¼Œåˆ‡æ¢åˆ°â€œå®‰å…¨â€é€‰é¡¹å¡ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n06\n6ã€åœ¨å®‰å…¨é€‰é¡¹å¡ä¸‹ï¼Œçœ‹åˆ°æç¤ºâ€œå¿…é¡»å…·æœ‰è¯»å–æƒé™æ‰èƒ½æŸ¥çœ‹å¯¹è±¡å±æ€§â€ï¼Œå¹¶ç‚¹å‡»â€œé«˜çº§â€é€‰é¡¹æŒ‰é’®ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n07\n7ã€ç‚¹å‡»é«˜çº§é€‰é¡¹åï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ‰“å¼€â€œWindowsAppsçš„é«˜çº§å®‰å…¨è®¾ç½®â€å¯¹è¯çª—å£ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n08\n8ã€åœ¨WindowsAppsçš„é«˜çº§å®‰å…¨è®¾ç½®å¯¹è¯çª—å£ä¸­ï¼Œç‚¹å‡»æ‰€æœ‰è€…åçš„â€œæ›´æ”¹â€æŒ‰é’®ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n09\n9ã€ç‚¹å‡»æ›´æ”¹åï¼Œè¿™ä¸ªæ—¶å€™ä¼šæ‰“å¼€â€œé€‰æ‹©ç”¨æˆ·æˆ–ç»„â€å¯¹è¯æ¡†ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n10\n10ã€åœ¨è¾“å…¥è¦é€‰æ‹©çš„å¯¹è±¡åç§°è¾“å…¥æ¡†ä¸­ï¼Œè¾“å…¥â€œEveryoneâ€ï¼Œå¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n11\n11ã€ç‚¹å‡»ç¡®å®šåï¼Œè¿™ä¸ªæ—¶å€™ä¼šè·³è½¬åˆ°WindowsAppsçš„é«˜çº§å®‰å…¨è®¾ç½®å¯¹è¯çª—å£ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n12\n12ã€æ¥ç€å‹¾é€‰æ‰€æœ‰è€…ä¸‹çš„â€œæ›¿æ¢å­å®¹å™¨å’Œå¯¹è±¡çš„æ‰€æœ‰è€…â€ï¼Œå¹¶ç‚¹å‡»â€œç¡®å®šâ€æŒ‰é’®ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n13\n13ã€ç‚¹å‡»ç¡®å®šåï¼Œè¿™ä¸ªæ—¶å€™ä¼šå¼¹å‡ºWindowså®‰å…¨å¯¹è¯æ¡†ï¼Œè¿›è¡Œæ›´æ”¹æ‰€æœ‰æƒã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n14\n14ã€æ›´æ”¹æ‰€æœ‰æƒå®Œæˆåï¼Œè¿™ä¸ªæ—¶å€™å°±èƒ½æ­£å¸¸è®¿é—®â€œWindowsAppsâ€æ–‡ä»¶å¤¹äº†ã€‚å¦‚å›¾æ‰€ç¤ºï¼›\n\n\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€winã€‘windowsåˆæ¬¡å¼€æœºå’Œä½¿ç”¨çš„æ³¨æ„äº‹é¡¹","url":"/posts/1529306954/","content":"é¦–æ¬¡å¼€æœºå’Œä½¿ç”¨ä¸€å°windowsç”µè„‘éœ€è¦æ³¨æ„çš„é‚£äº›äº‹\n\n\næœ¬æ–‡æ‰€è¨€ä»…ä¸ºæœ¬äººä¸ªäººè§‚ç‚¹ï¼Œä¸”åªä½œä¸ºå»ºè®®å’Œå›¾ä¸€ä¹çš„ç´ æã€‚ç”µè„‘å½’æ ¹ç»“åº•åªæ˜¯ä¸ªå·¥å…·ï¼Œä¸åŒäººä½¿ç”¨ä¹ æƒ¯ä¸åŒï¼ŒæŒ‰è‡ªå·±ç†Ÿæ‚‰çš„æ¥ç”¨å³å¯ã€‚å¤§å¯æ— éœ€å› ä¸ºæœ¬æ–‡è€Œæ”¹å˜ä½ ä½¿ç”¨ç”µè„‘çš„ä¹ æƒ¯ã€‚\n1.è·³è¿‡è”ç½‘windows11çš„å¹´ä»£ï¼Œè¿™å·²æ˜¯ä¸€ä¸ªè¿‡å»å¼äº†ï¼Œè¿˜æ˜¯è®°å½•ä¸€ä¸‹å§ã€‚\nç»™ä¸çŸ¥é“çš„äººè¯´ä¸€ä¸‹ï¼Œå¤§éƒ¨åˆ†ç¬”è®°æœ¬å‚å®¶çš„ç­–ç•¥ï¼Œéƒ½æ˜¯windowsæ¿€æ´»ä¹‹åï¼Œå°±ä¸å…è®¸é€€æ¬¾äº†ã€‚\nåœ¨windows10çš„æ—¶ä»£ï¼Œé¦–æ¬¡å¼€æœºçš„æ—¶å€™ï¼Œåœ¨è”ç½‘é˜¶æ®µï¼Œä¼šæœ‰ä¸€ä¸ªè·³è¿‡è”ç½‘çš„é€‰é¡¹ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©è¿™ä¸ªé€‰é¡¹ï¼Œå°±èƒ½è·³è¿‡è”ç½‘ï¼Œç»§ç»­æˆ‘ä»¬çš„éªŒæœºè¿‡ç¨‹ã€‚è¿™æ ·ï¼Œå‘ç°äº†ç¬”è®°æœ¬ç”µè„‘æœ‰å„ç§å„æ ·çš„çš„é—®é¢˜æˆ–è€…ä¸æ»¡æ„ï¼Œè¿˜èƒ½ä»¥ç”µè„‘æ²¡æœ‰æ¿€æ´»ä¸ºç­¹ç ï¼Œç›´æ¥ä¸ƒå¤©æ— ç†ç”±é€€è´§ã€‚\nå¯å¾®è½¯çš„é˜¿ä¸‰å·¥ç¨‹å¸ˆä¸çŸ¥é“æ€ä¹ˆæƒ³çš„ï¼Œwindows11ä¸€å‡ºæ¥ï¼Œç›´æ¥æŠŠè¿™ä¸ªæŒ‰é’®å¹²æ²¡äº†ã€‚\nèµ·åˆï¼Œè¿˜èƒ½é€šè¿‡å¿«æ·é”®orå‘½ä»¤è¡Œçš„æ–¹å¼ï¼Œå¼ºè¡Œè·³è¿‡è”ç½‘ï¼Œä½†ç°åœ¨ï¼Œä¼¼ä¹éƒ½ä¸è¡Œäº†ã€‚\n\nå¯èƒ½è¿˜æœ‰è·³è¿‡è”ç½‘çš„æ–¹å¼ï¼Œä½†ç›¸æ¯”win10çš„ä¸€ä¸ªæŒ‰é’®ï¼Œæ˜¾ç„¶ä»»ä½•æ–¹æ³•éƒ½éº»çƒ¦å¤šäº†ï¼Œå¯¹å°ç™½ä¹Ÿä¸å¤Ÿå‹å¥½ã€‚è¿™æ ·ä¼šå¯¼è‡´ç¬”è®°æœ¬é™¤éå‡ºç°å¾ˆä¸¥é‡çš„è½¯ç¡¬ä»¶é—®é¢˜ï¼Œå…¶ä»–è¯¸å¦‚æ•£çƒ­ä¸è¡Œã€å±å¹•åç‚¹ã€å±å¹•æ¼å…‰ç­‰ç­‰ä¸æ¸…ä¸ç™½çš„å“æ§é—®é¢˜ï¼Œå¾—å»å’Œå•†å®¶æ‰¯çš®æ‰èƒ½é€€æ¬¾ã€‚\n\nå“ï¼Œè°çŸ¥é“å¾®è½¯æ˜¯æ€ä¹ˆæƒ³çš„å‘¢ï¼Ÿ\n2.ç”¨æˆ·ååˆšå¼€å§‹ä½¿ç”¨ç”µè„‘çš„æ—¶å€™ï¼Œç”µè„‘çš„ç”¨æˆ·åä¸€å®šä¸€å®šä¸€å®šè¦è®¾ç½®æˆè‹±æ–‡çš„ï¼å“ªæ€•ä½ è®¾ç½®æˆæ‹¼éŸ³æˆ–ä¸€ä¸²æ•°å­—ï¼Œéƒ½ä¸è¦è®¾ç½®æˆéè‹±æ–‡çš„å…¶ä»–è¯­è¨€ï¼\nè½¯ä»¶å®‰è£…è·¯å¾„ä¸è¦æœ‰ä¸­æ–‡è™½ç„¶ç°åœ¨ï¼Œå¤§éƒ¨åˆ†è½¯ä»¶å¯¹ä¸­æ–‡çš„æ”¯æŒéƒ½è¶³å¤Ÿå‹å¥½ï¼Œä½†ä¾æ—§æœ‰éƒ¨åˆ†è½¯ä»¶ï¼ˆä»¥æ¸¸æˆæ®å¤šï¼‰ä¸æ”¯æŒä¸­æ–‡è·¯å¾„çš„å®‰è£…ç›®å½•ï¼\nè¯´äººè¯å°±æ˜¯ï¼Œå¦‚æœä½ æƒ³å®‰è£…è¿™äº›è½¯ä»¶ï¼Œå®ƒè¦æ±‚ä½ çš„å®‰è£…ç›®å½•æ˜¯å…¨è‹±æ–‡çš„\nC:\\Progarm Files\\test\\\n\nå¦‚æœä½ çš„å®‰è£…è·¯å¾„é‡Œé¢å¸¦æœ‰ä¸­æ–‡ï¼Œå¯èƒ½å®‰è£…ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è½¯ä»¶æ‰“ä¸å¼€ã€å´©æºƒã€æŠ¥é”™è¯¯ï¼Œä¸€å †bugå°±æ¥äº†\nC:\\Progarm Files\\ä½ å¥½\\\n\nä¸ºäº†é¿å…è¿™ç§bugï¼Œæˆ‘ä»¬å®‰è£…è½¯ä»¶çš„æ—¶å€™ï¼Œæœ€å¥½éƒ½è¦é€‰æ‹©å…¨è‹±æ–‡çš„å®‰è£…è·¯å¾„ã€‚\nå¤šä¸€äº‹ä¸å¦‚å°‘ä¸€äº‹ã€‚ä½ å¯ä»¥èµŒå¯¹å¾ˆå¤šä¸ªæ”¯æŒä¸­æ–‡è·¯å¾„çš„è½¯ä»¶ï¼Œä½†åªè¦æ¥ä¸€ä¸ªä½ éœ€è¦çš„è€Œä¸æ”¯æŒä¸­æ–‡å®‰è£…è·¯å¾„è½¯ä»¶ï¼Œå°±è¶³å¤Ÿè®©ä½ æŠ“ç‹‚ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯æŸäº›å°ä¼—è½¯ä»¶ï¼Œææ€•æŠ¥é”™è´´åˆ°ç™¾åº¦ä¸Šéƒ½æŸ¥ä¸åˆ°ä¸ºä»€ä¹ˆã€‚\né‚£è¿™åˆå’Œç”¨æˆ·åæœ‰å•¥å…³ç³»å‘¢ï¼Ÿwindowsåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šä»¥ä½ çš„ç”¨æˆ·åï¼Œåœ¨Cç›˜å¦‚ä¸‹è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹\nC:\\Users\\ç”¨æˆ·å\n\næ³¨æ„å•Šï¼Œè™½ç„¶ä½ æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ï¼Œä¼šå‘ç°è¿™ä¸ªæ–‡ä»¶å¤¹å«åšç”¨æˆ·ï¼Œä½†å®é™…ä¸Šä»–è¿˜æ˜¯è‹±æ–‡çš„ï¼Œæ˜¾ç¤ºä¸ºç”¨æˆ·æ˜¯å¾®è½¯å¯¹ç•Œé¢åšçš„æ±‰åŒ–å¤„ç†è€Œå·²ã€‚\n\nå³é”®è¿™ä¸ªè·¯å¾„ï¼Œé€‰æ‹©å°†åœ°å€å¤åˆ¶æˆæ–‡æœ¬ï¼Œä½ å°±ä¼šå‘ç°ç”¨æˆ·æ˜¯æ±‰åŒ–å¤„ç†äº†\nC:\\Users\\moth\n\nåœ¨ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹ï¼Œé™¤äº†ä¼šæœ‰ä¸€äº›è½¯ä»¶çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚gitã€vscodeã€pipï¼‰è¿˜ä¼šæœ‰ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹AppDataï¼Œè¿™é‡Œé¢å­˜æ”¾äº†å¤§éƒ¨åˆ†è½¯ä»¶çš„ç¼“å­˜æ–‡ä»¶ï¼Œç”šè‡³æœ‰ä¸€äº›è½¯ä»¶çš„å®‰è£…è·¯å¾„å°±æ˜¯åœ¨AppDataé‡Œçš„ï¼\nå¦‚æœä½ çš„ç”¨æˆ·åè®¾ç½®æˆäº†ä¸­æ–‡ï¼Œé‚£å¾ˆä¸å¹¸ï¼Œä¸Šé¢æåˆ°çš„è½¯ä»¶å®‰è£…è·¯å¾„ä¸èƒ½æœ‰ä¸­æ–‡çš„å¤§å¿Œï¼Œä½ å°†ä¸å¯é¿å…åœ°é‡åˆ°äº†ï¼\nC:\\Users\\æ…•é›ª\\AppData\n\nå› ä¸ºè½¯ä»¶ä¼šåœ¨ä½ çš„ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»ºç¼“å­˜æ–‡ä»¶å¤¹ï¼Œå¦‚æœä¸€ä¸ªè½¯ä»¶å¯¹ä¸­æ–‡çš„æ”¯æŒä¸å¥½ï¼Œé‚£å®ƒå°±å¯èƒ½å› æ­¤å´©æºƒï¼\nåœ¨æˆ‘å‘¨è¾¹çš„åŒå­¦é‡Œé¢ï¼Œå°±å‡ºç°è¿‡ä¸å°‘ä¸ªwindowsç”¨æˆ·åæ˜¯ä¸­æ–‡çš„\n\nå¥½æ¶ˆæ¯æ˜¯ï¼Œç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸“ä¸šå­¦ä¹ éœ€è¦çš„è½¯ä»¶éƒ½æ”¯æŒä¸­æ–‡è·¯å¾„\nåæ¶ˆæ¯æ˜¯ï¼Œè¿™éƒ½å¤§äºŒä¸‹äº†ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰å­¦è¿‡ä¸€ä¸ªä¸“ä¸šè¯¾ï¼Œè¿˜åœ¨å­¦åŸºç¡€å…¬å…±è¯¾â€¦â€¦æ¥å¤§å­¦å¿«ä¸¤å¹´äº†ï¼Œæˆ‘è¿˜è¿è‡ªå·±çš„ä¸“ä¸šæ˜¯å¹²å˜›çš„éƒ½ä¸çŸ¥é“ï¼ˆäº‹å…ˆä¸ºä½•ä¸äº†è§£ï¼Ÿé—®å°±æ˜¯è°ƒå‰‚æ¥çš„ï¼ğŸ˜’ï¼‰æ‰€ç”¨çš„è½¯ä»¶ï¼Œä¹Ÿä¸è¿‡æ˜¯ç¼–ç¨‹ideç½¢äº†\n\né˜²èŒƒäºæœªç„¶ï¼Œå“ªæ€•ä½ è®¾ç½®ä¸€ä¸ªæ‹¼éŸ³ç”¨æˆ·åä¹Ÿå¥½è¿‡ä¸­æ–‡ã€‚\n3.ä¿æŒä¸€ä¸ªè‰¯å¥½çš„æ–‡ä»¶å­˜æ”¾ä¹ æƒ¯å¯ç¬‘çš„æ˜¯ï¼Œè¿™ä»¶äº‹ï¼ŒçŸ¥é“çš„äººä¸éœ€è¦ä½ å‘Šè¯‰ä»–ï¼›ä¸åœ¨ä¹çš„äººä½ å‘Šè¯‰ä»–ä¹Ÿæ²¡ç”¨ã€‚\næœ‰å¤ªå¤šå¤ªå¤šçš„ç”¨æˆ·ï¼ˆåŒ…æ‹¬æˆ‘çš„çˆ¶æ¯ï¼‰ä»–ä»¬çš„ç”µè„‘éƒ½ä¸­äº†ä¸€ä¸ªç—…æ¯’ï¼Œå¯¼è‡´æ•´å°ç”µè„‘åªæœ‰ä¸€ä¸ªåˆ†åŒºï¼Œå«åšæ¡Œé¢ï¼›\n\nå¹¶ä¸æ˜¯è¯´æ–‡ä»¶ä¸¢æ¡Œé¢ä¸å¯ä»¥ï¼Œä½†æ˜¯ä¸¢åœ¨æ¡Œé¢ä¸Šæœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šé‡è£…çš„æ—¶å€™ï¼Œéœ€è¦æ ¼å¼åŒ–Cç›˜ã€‚\nwindowsé‡è£…ï¼Œæ˜¯å¯¹ä»˜è½¯ä»¶é—®é¢˜çš„æœ€å¥½æ–¹å¼ã€‚é‡è£…çš„æ—¶å€™ï¼Œå¤§æ¦‚ç‡æ˜¯è¦æ ¼å¼Cç›˜çš„ï¼Œè€Œæ¡Œé¢çš„æ–‡ä»¶å°±æ˜¯å­˜æ”¾åœ¨Cç›˜ä¸Šé¢çš„ã€‚\n\nè™½ç„¶å¯ä»¥ç”¨PEæ¥å–èµ°ç”µè„‘ä¸­çš„æ•°æ®ï¼Œä½†è¿™å¾ˆéº»çƒ¦ï¼\nç›¸æ¯”äºå¾®è½¯å®˜æ–¹çš„ç³»ç»Ÿå®‰è£…ç›˜ï¼ŒPEç›˜å®‰è£…ç³»ç»Ÿæ›´éº»çƒ¦ï¼ˆä¸ªäººåœ¨å¾ˆä¹…ä¹‹å‰çš„ä½“éªŒï¼Œæ²¡æœ‰è¯•è¿‡è¿‘æœŸçš„PEï¼Œæ­¤è¨€æ¬ å¦¥ï¼‰\n\næ‰€ä»¥ï¼Œä¸ºäº†åœ¨ç”µè„‘å‡ºå¥‡æ€ªçš„è½¯ä»¶é—®é¢˜ï¼Œå¿«é€Ÿé‡è£…è®©ç”µè„‘æ¢å¤å·¥ä½œçŠ¶æ€ï¼Œæœ€å¥½çš„åŠæ³•è¿˜æ˜¯ä¸è¦åœ¨Cç›˜æ”¾ä»»ä½•æ•°æ®æ–‡ä»¶ï¼\nå¦‚æœä½ çš„å®¶äººå¾—äº†è¿™ç§æ•´å°ç”µè„‘åªæœ‰æ¡Œé¢æˆ–è€…Cç›˜çš„ç—…ï¼Œå¯ä»¥è€ƒè™‘å°†æ¡Œé¢æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°å…¶ä»–ç›˜ã€‚åœ¨æˆ‘çš„ç”µè„‘é‡Œé¢å³é”®æ¡Œé¢ï¼Œç‚¹å‡»å±æ€§-ä½ç½®ï¼Œè¿™é‡Œå°±èƒ½ä¿®æ”¹æ¡Œé¢å­˜æ”¾çš„æ–‡ä»¶è·¯å¾„ã€‚\n\n4.windows11å³é”®èœå•è®¾ç½®win11çš„å³é”®èœå•è®¾è®¡å°±æ˜¯è®©äººå¾ˆæ— è¯­çš„é™çº§ï¼Œä¹Ÿä¸çŸ¥é“å¼€å‘è€…æœ‰æ²¡æœ‰è‡ªå·±ç”¨è¿‡ç³»ç»Ÿã€‚å’Œä¸ç©æ¸¸æˆçš„å¼€å‘è€…å’Œç­–åˆ’ä¸€æ ·ã€‚\næ¢å¤win10æ—§ç‰ˆå³é”®èœå•å‘½ä»¤ï¼ˆåœ¨windows11çš„å‘½ä»¤è¡Œé‡Œé¢æ‰§è¡Œï¼‰\nreg.exe add &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;\\InprocServer32&quot; /f\n\né‡æ–°å¯ç”¨win11æ–°ç‰ˆï¼š\nreg.exe delete &quot;HKCU\\Software\\Classes\\CLSID\\&#123;86ca1aa0-34aa-4e8b-a509-50c905bae2a2&#125;&quot; /f\n\nè®¾ç½®äº†åé‡å¯ç”µè„‘å°±èƒ½ç”Ÿæ•ˆã€‚\næœªå®Œå¾…ç»­æƒ³èµ·æ¥å•¥äº†å°±ç»™æœ¬æ–‡åŠ ç‚¹æ–™\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€winã€‘edgeæ›´æ¢chromeæµè§ˆå™¨","url":"/posts/1864371357/","content":"1.edgeçš„é—®é¢˜ç”±äºedgeæ–°ç‰ˆæœ¬åœ¨æˆ‘çš„ç”µè„‘ä¸Šå‡ºç°äº†è«åå…¶å¦™ä¸”æ²¡æ‰¾åˆ°è§£å†³åŠæ³•çš„æ¸²æŸ“é—®é¢˜ï¼Œå†³å®šæ›´æ¢æµè§ˆå™¨ä¸ºchromeï¼›\næˆ‘å·²ç»æ£€æŸ¥è¿‡äº†ï¼Œedgeåœ¨æ‰€æœ‰æ’ä»¶éƒ½å…³é—­çš„æƒ…å†µä¸‹ä¾æ—§ä¼šæ¸²æŸ“é”™è¯¯ï¼Œä¸”å’Œedgeçš„æ–°å¤–è§‚æ²¡æœ‰å…³ç³»ã€‚ç›®å‰æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°å‡ºç°è¿™ä¸ªæ¸²æŸ“é”™è¯¯çš„åŸå› ï¼Œå›é€€æ—§ç‰ˆæœ¬ä¹Ÿæ²¡æˆåŠŸï¼Œå¹²è„†æ¢chromeå®Œäº‹ã€‚\nè¿™ä¸ªé—®é¢˜åœ¨æˆ‘è‡ªå·±çš„ç”µè„‘edgeè‡ªåŠ¨æ›´æ–°åå‡ºç°ï¼Œä¸”åœ¨æˆ‘å®ä¹ å•ä½çš„ç”µè„‘ä¸Šä¹Ÿæœ‰æ¸²æŸ“é”™ä½é—®é¢˜ï¼Œè¯´æ˜ä¸æ˜¯ä¸ªä¾‹ã€‚åªèƒ½éª‚éª‚å¾®è½¯äº†ï¼Œä»€ä¹ˆæ—¶å€™æ”¹å¥½è¿™ä¸ªbugæˆ‘ä»€ä¹ˆæ—¶å€™æ¢å›å»ã€‚\n\næˆ‘çš„ç”µè„‘çš„edgeç‰ˆæœ¬ï¼šç‰ˆæœ¬ 121.0.2277.83 (æ­£å¼ç‰ˆæœ¬) (64 ä½)\n\n\n\nä¸åªæ˜¯bç«™çš„æ¸²æŸ“æœ‰é—®é¢˜ï¼Œè¿˜æœ‰å¾ˆå¤šç½‘é¡µä¼šå‡ºç°ç±»ä¼¼çš„æ¨ªç€çš„ä¸œè¥¿å˜æˆç«–ç€çš„ï¼Œåœ¨ä¸è¯¥æœ‰çš„ä½ç½®è«åå…¶å¦™å‡ºç°ä¸€ä¸ªæ»šåŠ¨æ¡ç­‰ç­‰\n\n\n2.edgeæ— æŸè½¬chromeå¯¹äºæµè§ˆå™¨æ¥è¯´å…¶å®åªæœ‰ä¸¤ä¸ªé‡è¦æ•°æ®ï¼Œä¸€ä¸ªæ˜¯æ”¶è—å¤¹ï¼Œä¸€ä¸ªæ˜¯ä¿å­˜çš„å¯†ç ã€‚\næ”¶è—å¤¹edgeæ”¶è—å¤¹å¯¼å‡ºï¼šå³ä¸Šè§’ä¸‰ä¸ªç‚¹-æ”¶è—å¤¹-å¼¹å‡ºæ¡†çš„å³ä¸Šè§’ä¸‰ä¸ªç‚¹-å¯¼å‡ºæ”¶è—å¤¹\n\nè¿™ä¸ªé€‰é¡¹ä¼šå°†æ”¶è—å¤¹å¯¼å‡ºä¸ºhtmlæ–‡ä»¶ï¼Œåœ¨chomeçš„ä¹¦ç­¾ä¸­ï¼Œé€‰åˆ™å¯¼å…¥ä¹¦ç­¾å’Œè®¾ç½®\n\né€‰æ‹©ä»¥å‰å¯¼å‡ºçš„ä¹¦ç­¾ï¼ˆHTMLæ–‡ä»¶ï¼‰ï¼Œç„¶åæŠŠåˆšåˆšå¯¼å‡ºçš„edgeä¹¦ç­¾htmlæ–‡ä»¶é€‰æ‹©ä¸Šå°±èƒ½æ­£å¸¸å¯¼å…¥äº†ã€‚\n\nå¯†ç edgeå¯†ç å¯¼å‡ºï¼šå³ä¸Šè§’ä¸‰ä¸ªç‚¹-è®¾ç½®-ä¸ªäººèµ„æ–™-å¯†ç -å¯¼å‡ºå¯†ç ï¼›\næ–°ç‰ˆæœ¬è¿™é‡Œå«ç”µå­é’±åŒ…ï¼Œæ—§ç‰ˆæœ¬åº”è¯¥åªæ˜¯ä¸ªå¯†ç é¡µé¢ã€‚åœ¨å¯†ç é¡µé¢å³ä¸Šè§’ä¸‰ä¸ªç‚¹é€‰æ‹©å¯¼å‡ºå¯†ç å³å¯ã€‚\n\næ³¨æ„ï¼Œå¯¼å‡ºå¯†ç ä¹‹å‰åº”è¯¥ç¡®è®¤ä½ çš„ç”µè„‘ä¸Šæ²¡æœ‰ç—…æ¯’æˆ–æ¶æ„è½¯ä»¶ï¼Œå› ä¸ºå¯¼å‡ºåæ˜¯csvæ˜æ–‡æ–‡ä»¶ï¼Œä»»ä½•è½¯ä»¶éƒ½èƒ½ç›´æ¥è¯»å–ï¼\nå¯¼å‡ºcsvåï¼Œåœ¨chromeæµè§ˆå™¨ä¸­è¿›å…¥å¯†ç ç®¡ç†å·¥å…·ï¼Œåœ¨å¯†ç ç®¡ç†å·¥å…·çš„è®¾ç½®ä¸­æœ‰å¯¼å…¥å¯†ç é€‰é¡¹ï¼Œé€‰æ‹©csvæ–‡ä»¶å³å¯å¯¼å…¥å¯†ç ã€‚å¯¼å…¥å¯†ç åå»ºè®®ç«‹é©¬å°†csvæ–‡ä»¶åˆ é™¤ã€‚\n3.å…³é—­edgeé»˜è®¤æµè§ˆå™¨é˜²æŠ¤è®°å¾—å…³é—­edgeçš„é»˜è®¤æµè§ˆå™¨è®¾ç½®ï¼šåœ¨edgeçš„è®¾ç½®-é»˜è®¤æµè§ˆå™¨ä¸­ï¼Œå…³é—­ä¿æŠ¤é»˜è®¤æµè§ˆå™¨è®¾ç½®é¦–é€‰é¡¹ã€‚\n\nåœ¨windows11çš„ç³»ç»Ÿè®¾ç½®-åº”ç”¨-é»˜è®¤åº”ç”¨ä¸­æœç´¢chromeï¼Œå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®chromeä¸ºé»˜è®¤æµè§ˆå™¨ã€‚\n\n\n\nThe endedgeç›®å‰å¯¹æ¯”chromeæ¥è¯´æœ€å¤§çš„å¥½å¤„è¿˜æ˜¯å¯ä»¥ç›´è¿çš„åŒæ­¥åŠŸèƒ½ã€‚ä½†ç°åœ¨windowsç«¯è¿é¡µé¢æ¸²æŸ“éƒ½æœ‰é—®é¢˜ï¼Œé‚£æˆ‘è‚¯å®šæ²¡åŠæ³•ï¼Œåªèƒ½è·‘è·¯chromeäº†ã€‚\nHold onä¸ºä»€ä¹ˆchromeçš„ç‰›å®¢ç½‘ä¹Ÿæœ‰è¿™ä¸ªæ¸²æŸ“é”™è¯¯çš„é—®é¢˜ï¼Ÿï¼Ÿï¼Ÿæ— è¯­äº†â€¦â€¦å¼ºè¿«ç—‡çœ‹çš„å¾ˆéš¾å—å•Šï¼ï¼ï¼\n\næˆ‘æ‰¾åˆ°é—®é¢˜äº†ï¼šæˆ‘æŠŠchromeå’Œedgeçš„æœ€å°å­—å·éƒ½è®¾ç½®æˆäº†15ï¼Œå¯¼è‡´å­—ä½“æ”¾ä¸ä¸‹â€¦â€¦\n\nè¿™ä¸ªé€‰é¡¹é»˜è®¤åº”è¯¥æ˜¯13ï¼ˆæˆ‘å¿˜è®°é»˜è®¤æ˜¯å¤šå°‘äº†ï¼Œåæ­£æ”¹æˆ13å°±è¡Œäº†ï¼‰\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["windows"]},{"title":"ã€winã€‘ä½¿ç”¨åˆ†åŒºåŠ©æ‰‹æ‰©å®¹Cç›˜","url":"/posts/3746722946/","content":"é—®é¢˜è¯´æ˜å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œç”¨çš„æ˜¯è”æƒ³çš„ç¬”è®°æœ¬ï¼Œè¿™3å¹´å†…çš„è”æƒ³ç¬”è®°æœ¬éƒ½ä¼šå‡ºå‚åˆ†ç›˜ï¼ˆæ®æˆ‘æ‰€çŸ¥æ˜¯è¿™æ ·çš„ï¼‰ï¼ŒCç›˜é›·æ‰“ä¸åŠ¨çš„200GBï¼ŒDç›˜ä¸­ä¼šå­˜æ”¾ä¸€ä¸ªåŸå‚çš„é©±åŠ¨æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬ä½ è¿™å°ç”µè„‘çš„æ‰€æœ‰é©±åŠ¨ã€‚\nä½†æ˜¯ï¼Œ200GBå¾ˆå¿«å°±ä¼šè¢«æŸäº›å¥‡å¥‡æ€ªæ€ªçš„è½¯ä»¶ç¼“å­˜ç»™æ’‘æ»¡ï¼Œå³ä¾¿æˆ‘æŠŠå¾®ä¿¡å’ŒQQä¸¤ä¸ªè½¯ä»¶çš„èµ„æ–™æ–‡ä»¶å¤¹ç»™è½¬ç§»åˆ°Dç›˜äº†ï¼ŒCç›˜åœ¨ç”¨äº†å‡ ä¸ªæœˆåå°±è«åå…¶å¦™çš„åªå‰©ä¸‹50Gç”šè‡³æ›´å°‘äº†ï¼Œçœ‹ç€è®©äººå¾ˆæ˜¯ç„¦ç»¿ï¼Œè¿˜æ˜¯ç»™å®ƒæ‰©å®¹ä¸€ä¸‹å§ã€‚\nåˆ†åŒºåŠ©æ‰‹windowsæ˜¯è‡ªå¸¦ç£ç›˜åˆ†åŒºç®¡ç†çš„ï¼Œå³é”®æˆ‘çš„ç”µè„‘-å±æ€§-å­˜å‚¨-ç£ç›˜ç®¡ç†ï¼Œè¿™é‡Œèƒ½åˆ°ä½ çš„ç³»ç»Ÿé‡Œé¢çš„æ‰€æœ‰ç‰©ç†ç¡¬ç›˜ï¼Œå’Œæ¯ä¸ªç¡¬ç›˜çš„åˆ†åŒºæƒ…å†µï¼Œå¯ä»¥åœ¨è¿™é‡Œå¯¹åˆ†åŒºè¿›è¡Œä¸€å®šçš„è°ƒæ•´ã€‚\nä½†å¾ˆé—æ†¾çš„æ˜¯ï¼Œåœ¨è¿™é‡Œå¹¶ä¸èƒ½å¯¹Cç›˜è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œå½“ä½ ç»™Dç›˜å‹ç¼©å·åå†å³é”®Cç›˜ï¼Œä¼šå‘ç°æ‰©å±•å·æŒ‰é’®æ˜¯ç°è‰²çš„ï¼Œæ— æ³•è¢«ç‚¹å‡»ï¼Œä¹Ÿå°±æ— æ³•æ‰©å®¹ã€‚\nè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·æ¥æ“ä½œäº†ï¼šå‚²æ¢…åˆ†åŒºåŠ©æ‰‹ã€è½»æ¾å¤‡ä»½ã€æ•°æ®æ¢å¤(æ¢å¤ä¹‹æ˜Ÿ)ã€è¿œç¨‹æ§åˆ¶ï¼ˆAnyViewerï¼‰ç­‰è½¯ä»¶å…è´¹ä¸‹è½½å®˜ç½‘\n\næ³¨æ„ï¼šä¹‹å‰åœ¨Bç«™çœ‹è¿‡ç›¸å…³è§†é¢‘ï¼Œæœ‰ä¸å°‘äººè¯„è®ºè¯´ä½¿ç”¨è¯¥å·¥å…·å¯¼è‡´ç³»ç»Ÿç›˜å†…èµ„æ–™ä¸¢å¤±çš„ï¼ˆè™½ç„¶åœ¨æˆ‘çš„å‡ æ¬¡ææœºä½¿ç”¨ä½“éªŒä¸­å¹¶æ²¡æœ‰é‡åˆ°ï¼‰ã€‚ä¸ºäº†ä¿é™©èµ·è§ï¼Œè¯·å…ˆå¤‡ä»½ä½ çš„Cç›˜æ‰€åœ¨ç‰©ç†ç›˜å†…çš„æ‰€æœ‰æ–‡ä»¶åå†è¿›è¡Œæ“ä½œï¼æ•°æ®æ— ä»·ï¼å¤‡ä»½ï¼Œå¤‡ä»½ï¼Œå¤‡ä»½ï¼ï¼\n\nä¸‹è½½è½¯ä»¶åå®‰è£…ï¼Œå®‰è£…å®Œæ¯•åæ‰“å¼€è½¯ä»¶ä¼šè®©ä½ è¾“å…¥ä¸€ä¸ªå…è´¹ä½¿ç”¨å¯†ç ï¼Œè¿™ä¸ªå¯†ç ä¸€ç›´æ˜¯1122ï¼ˆè‡³å°‘ä¸€å¹´æ²¡å˜è¿‡äº†ï¼Œå¦‚æœä¸è¡Œå°±å»å®ƒä»¬çš„å…¬ä¼—å·è·å–ä¸€ä¸‹æœ€æ–°å¯†ç å§ï¼‰\næœ¬æ¬¡æµ‹è¯•ä½¿ç”¨çš„æ˜¯æ–°ç‰ˆ10.2ç‰ˆæœ¬ã€‚\nè¿›å…¥è½¯ä»¶åçœ‹åˆ°çš„ç•Œé¢å’Œwindowsè‡ªå¸¦çš„ç£ç›˜ç®¡ç†ç±»ä¼¼ï¼Œè¿™é‡Œèƒ½çœ‹åˆ°åŸè£…1TBçš„å›ºæ€åˆ†äº†ä¸€ä¸ªCç›˜å’Œä¸€ä¸ªDç›˜ï¼ˆä¸‹å›¾ä¸­å·²ç»æ˜¯æˆ‘æ“ä½œåçš„ç»“æœäº†ï¼Œæ‰€ä»¥Cç›˜æ˜¯300GBï¼‰\n\nå¦‚æœä½ æƒ³æ‰©å®¹Cç›˜ï¼Œå³é”®çº¢è‰²æ¡†æ¡†åŒºåŸŸçš„Cç›˜ï¼Œé€‰æ‹©è°ƒæ•´/ç§»åŠ¨åˆ†åŒºï¼Œä¼šæ‰“å¼€å¦‚ä¸‹ç•Œé¢ã€‚å‹¾é€‰ä»(*)åˆ†åŒºä¸­åˆ’åˆ†ç©ºé—´ç»™(C)ï¼Œæ­¤æ—¶å³ä¾§ä¼šå‡ºç°ä¸€ä¸ªä¸‹æ‹‰èœå•ï¼Œå‹¾é€‰Dç›˜ï¼ˆä¸€å®šä¸è¦å‹¾é€‰é‚£ä¸¤ä¸ª*å¼€å¤´çš„ä¿ç•™åˆ†åŒºï¼‰ï¼Œæ­¤æ—¶å°±å¯ä»¥è¾“å…¥ä½ æƒ³ç»™Cç›˜æ‰©å®¹åçš„å®¹é‡äº†ï¼Œæ¯”å¦‚æƒ³æŠŠCç›˜æ‰©å®¹åˆ°300GBå°±è¾“å…¥300å³å¯ã€‚\n\nå†æ¬¡æé†’ï¼šè¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œè¯·å…ˆå¤‡ä»½Cç›˜æ‰€åœ¨æ–‡ä»¶å¤¹çš„èµ„æ–™æ–‡ä»¶ï¼ï¼ï¼\nä½œä¸ºç¤ºä¾‹ï¼Œè¿™é‡Œæˆ‘è¾“å…¥Cç›˜æ‰©å®¹åˆ°350GB\n\nç‚¹å‡»ç¡®å®šï¼Œä¼šå‘ç°ä¸‹æ–¹åˆ†åŒºå¤§å°å·²ç»å˜åŒ–äº†ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬çš„æ“ä½œè¿˜æ²¡æäº¤ï¼Œå³ä¸Šè§’å¯ä»¥çœ‹åˆ°æäº¤æŒ‰é’®äº®èµ·ï¼Œæœ‰ä¸‰ä¸ªæ“ä½œéœ€è¦è¿›è¡Œ\n\nè¿™ä¸‰ä¸ªæ“ä½œåˆ†åˆ«æ˜¯ç¼©å®¹Dç›˜ï¼Œç§»åŠ¨åˆ†åŒºï¼Œæ‰©å®¹Cç›˜ã€‚è¿™é‡Œæ˜¾ç¤ºçš„é¢„æœŸæ—¶é—´å¾ˆå¤¸å¼ ï¼Œä½†å®é™…ä¸Š15åˆ†é’Ÿå·¦å³å°±èƒ½å®Œæˆã€‚\n\næ­¤æ—¶ç‚¹å‡»æ‰§è¡Œï¼Œä¼šè®©ä½ é€‰æ‹©åœ¨ä»€ä¹ˆæ¨¡å¼ä¸‹æ“ä½œï¼Œä¸€èˆ¬æƒ…å†µé€‰æ‹©Windows PEæ¨¡å¼å³å¯ã€‚é€‰æ‹©åç‚¹å‡»ç¡®å®šï¼Œåˆ†åŒºåŠ©æ‰‹å°±ä¼šé‡å¯ç”µè„‘å¹¶å¼€å§‹æ‰©å®¹æ“ä½œã€‚\nå†æ¬¡æé†’ï¼šè¿™ä¸€æ­¥çš„ç¡®å®šåå°±æ²¡æœ‰å›å¤´è·¯äº†ï¼ï¼ï¼ä¸€å®šè¦å¤‡ä»½å“¦ï¼\n\nä¼šå…ˆåœ¨è½¯ä»¶å†…èµ°ä¸ªè¿›åº¦æ¡ï¼Œéšåé‡å¯ç”µè„‘è¿›å…¥PEæ¨¡å¼æ“ä½œï¼ŒPEç•Œé¢é•¿ä¸‹é¢è¿™æ ·ã€‚\n\nè€å¿ƒç­‰å¾…ä»–å®Œæˆå³å¯ï¼Œåˆ†åŒºåŠ©æ‰‹ä¼šè‡ªåŠ¨é‡å¯ç”µè„‘å›åˆ°windowsã€‚\nThe endç„¶åå°±æå®šäº†ï¼æˆåŠŸå°†Cç›˜ä»200GBæ‰©å®¹åˆ°300GBï¼Œä¸”ä¸¤ä¸ªç›˜çš„èµ„æ–™éƒ½åœ¨ã€‚\n\næœ€åè¿˜æ˜¯å¾—ä¸Šä¸ªæé†’ï¼Œè™½ç„¶æˆ‘è¿™è¾¹å®æµ‹èƒ½æˆåŠŸï¼Œä½†ä¸ä»£è¡¨ä½ é‚£è¾¹ä¸€å®šèƒ½ä¿ç•™èµ„æ–™ï¼å¤‡ä»½å‡†æ²¡é”™å“¦ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€vscodeã€‘vscode paste imageæ’ä»¶è®¾ç½®","url":"/posts/4210795894/","content":"vscodeç¼–è¾‘mdæ–‡ä»¶çš„æ—¶å€™ï¼Œå¦‚æœæƒ³æ’å…¥å›¾ç‰‡ï¼Œè‡ªå¸¦çš„ç²˜è´´åªä¼šç²˜è´´åˆ°å½“å‰ç›®å½•ä¸‹ï¼Œä¹Ÿæ²¡æœ‰æ–‡ä»¶é‡å‘½åï¼Œå¾ˆä¸å‹å¥½ã€‚\nåœ¨æ‰©å±•å•†åº—é‡Œé¢æœ‰mushançš„Paste Imageæ’ä»¶ï¼Œç›¸æ¯”è‡ªå¸¦çš„ï¼Œæ›´åŠ å‹å¥½ä¸€ç‚¹ã€‚ä½†æ˜¯å®ƒçš„é…ç½®æŠŠæˆ‘å¼„ç³Šæ¶‚äº†ï¼Œç®€å•æµ‹è¯•äº†ä¸€ä¸‹æ‰æ˜ç™½å¤„ç†çš„é€»è¾‘ã€‚\næ³¨æ„ï¼Œæœ¬æ–‡ç¼–å†™çš„æ˜¯å¯¹mushançš„Paste Imageæ’ä»¶çš„æ•™ç¨‹ã€‚\n\né¦–å…ˆæ˜¯å®‰è£…è¿™ä¸ªæ’ä»¶ï¼Œè¿™ä¸ªä¸å¤šè¯´ï¼Œç„¶åè¿›å…¥æ’ä»¶è®¾ç½®ã€‚æˆ‘è¿™é‡Œè¯´æ˜ä¸€ä¸‹æ¯ä¸€ä¸ªè®¾ç½®é¡¹çš„ä½œç”¨ï¼Œåªåˆ—å‡ºäº†éœ€è¦ä¿®æ”¹çš„é…ç½®é¡¹ã€‚\næ³¨æ„ï¼šè¯¥æ’ä»¶çš„ç²˜è´´å›¾ç‰‡å¿«æ·é”®æ˜¯CTRL+ALT+Vã€‚\n\n\n\nè®¾ç½®é¡¹\nä½œç”¨\nç¤ºä¾‹é…ç½®\nè¯´æ˜\n\n\n\nBase Path\nåŸºç¡€ç›®å½•\n${currentFileDir}\nè¯¥é¡¹ç›¸å½“äºç²˜è´´æ–‡ä»¶çš„æ—¶å€™ï¼Œåº”è¯¥æŠŠä»€ä¹ˆç›®å½•è§†ä½œå·¥ä½œç›®å½•ï¼Œæœ€ç»ˆå›¾ç‰‡è·¯å¾„ä¼šä»¥è¿™ä¸ªpathæ¥è®¡ç®—ç›¸å¯¹è·¯å¾„ï¼›currentFileDirå°±æ˜¯å½“å‰å·¥ä½œåŒºæ–‡ä»¶çš„è·¯å¾„ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿®æ”¹è¿™ä¸ªé…ç½®ã€‚\n\n\nDefault Name\nå›¾ç‰‡æ–‡ä»¶å\nY-MM-DD-HH-mm-ss\nç²˜è´´åçš„å›¾ç‰‡æ–‡ä»¶åï¼Œå¯ä»¥æ ¹æ®å½“å‰æ—¶é—´æ ¼å¼åŒ–å‘½åã€‚æ³¨æ„è¿™é‡Œä¸è¦æ·»åŠ å…¶ä»–éæ ¼å¼åŒ–é¡¹ï¼Œä¸ç„¶å®¹æ˜“å‘½ä»¤å‡ºé”™ã€‚\n\n\nName Prefix\nå›¾ç‰‡æ–‡ä»¶åå‰ç¼€\nç•™ç©º\nè¯¥é¡¹æ˜¯å›¾ç‰‡æ–‡ä»¶åçš„å‰ç¼€ï¼Œæ¯”å¦‚è®¾ç½®ä¸ºimage-ï¼Œåˆ™ç²˜è´´çš„å›¾ç‰‡æ–‡ä»¶åå‰é¢ä¼šå¸¦ä¸Šimage-ï¼›\n\n\nName Suffix\nå›¾ç‰‡æ–‡ä»¶ååç¼€\nç•™ç©º\nè¯¥é¡¹æ˜¯å›¾ç‰‡æ–‡ä»¶åçš„åç¼€ï¼Œè®¾ç½®æ•ˆæœåŒä¸Šã€‚ï¼ˆæ–‡ä»¶ååç¼€æ˜¯åœ¨æ–‡ä»¶æ‰©å±•åä¹‹å‰çš„ï¼‰\n\n\nPath\nå›¾ç‰‡æ–‡ä»¶ä¿å­˜ä½ç½®\n${currentFileDir}\nå›¾ç‰‡æ–‡ä»¶ä¼šä¿å­˜çš„ç›®å½•ï¼Œæ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹ï¼›\n\n\nPrefix\næœ€ç»ˆæ–‡ä»¶è·¯å¾„çš„å‰ç¼€\nç•™ç©º\næœ€ç»ˆæ–‡ä»¶è·¯å¾„çš„å‰ç¼€ï¼Œå»ºè®®è®¾ç½®ä¸º./ï¼›\n\n\nSuffix\næœ€ç»ˆæ–‡ä»¶è·¯å¾„åç¼€\nç•™ç©º\næœ€ç»ˆæ–‡ä»¶è·¯å¾„çš„åç¼€ï¼Œä¸å»ºè®®æ·»åŠ å€¼ï¼Œå¦åˆ™ä¼šå› ä¸ºæ‰©å±•åè¢«è¦†ç›–è€Œå½±å“è§£æï¼›\n\n\næ ¹æ®æˆ‘çš„éœ€è¦ï¼Œæˆ‘éœ€è¦å°†å›¾ç‰‡ç²˜è´´åˆ°å½“å‰mdæ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹çš„imgè·¯å¾„ä¸­ï¼Œé‚£ä¹ˆæˆ‘å°±éœ€è¦ä¿®æ”¹Pathå’ŒPrefixä¸¤ä¸ªé…ç½®é¡¹\n\n\n\né¡¹ç›®\nè®¾ç½®\n\n\n\nPath\n${currentFileDir}&#x2F;img&#x2F;\n\n\nPrefix\n.&#x2F;\n\n\nå¦‚æœä½ ä¸è®¾ç½®Prefixï¼Œæœ€ç»ˆç²˜è´´çš„å›¾ç‰‡è·¯å¾„å¦‚ä¸‹\n![](img/image-20240124161634.png)\n\nå¯¹äºç»å¤§éƒ¨åˆ†markdownè½¯ä»¶ï¼Œè¿™ä¸ªè·¯å¾„éƒ½èƒ½è¢«æ­£å¸¸è¯†åˆ«ä¸ºç›¸å¯¹è·¯å¾„å¹¶è®¿é—®åˆ°å›¾ç‰‡ã€‚ä½†æ˜¯å¯¹äºæˆ‘æ­£åœ¨ä½¿ç”¨çš„vuepressæ¡†æ¶è€Œè¨€ï¼Œå¿…é¡»å°†å›¾ç‰‡è·¯å¾„æ·»åŠ ä¸Š./ä»–æ‰èƒ½è¯†åˆ«å‡ºæ¥\n![](./img/image-20240124160742.png)\n\nè®¾ç½®äº†Prefixä¹‹åå°±æ²¡æœ‰é—®é¢˜äº†ï¼\nè¿™ä¸ªæ’ä»¶è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œå¦‚æœä½ å‘ç°æŸäº›è®¾ç½®ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥é‡å¯vscodeæˆ–è€…é‡æ–°å†™å…¥é…ç½®é¡¹è¯•è¯•ï¼ˆæˆ‘å°±é‡åˆ°è¿‡ï¼Œç„å­¦é—®é¢˜ï¼‰ã€‚\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["vscode"]},{"title":"ã€vscodeã€‘è¿œç¨‹ä¸»æœºå¯èƒ½ä¸ç¬¦åˆglibcå’Œlibstdc++ vscodeæœåŠ¡å™¨çš„å…ˆå†³æ¡ä»¶","url":"/posts/1712214675/","content":"é—®é¢˜å¦‚å›¾ï¼ŒVSCODE 1.86ç‰ˆæœ¬çªç„¶ä¸æ”¯æŒæˆ‘çš„centos7.6æœåŠ¡å™¨äº†ï¼Œè¿™å¯å’‹åŠ?\n\nç™¾åº¦äº†ä¸€ä¸‹ï¼Œå®˜ç½‘ä¸Šè¯´æ˜¯centos7ç¼ºå°‘ä¾èµ–é¡¹ï¼Œå·²ç»æ— æ³•è¢«æ”¯æŒã€‚\n\nå›é€€ç‰ˆæœ¬ä¸è¿‡å¹¶ä¸æ˜¯æ²¡æœ‰åŠæ³•è§£å†³ï¼Œå›é€€åˆ°1.85ç‰ˆæœ¬å°±è¡Œäº†ã€‚\n\nå‚è€ƒï¼švscodeçš„sshå¿½ç„¶è¿ä¸ä¸ŠæœåŠ¡å™¨ï¼šè¿œç¨‹ä¸»æœºå¯èƒ½ä¸ç¬¦åˆglibcå’Œlibstdc++ VS CodeæœåŠ¡å™¨çš„å…ˆå†³æ¡ä»¶-CSDNåšå®¢\n\nå…³é—­è‡ªåŠ¨æ›´æ–°å›é€€ä¹‹å‰ï¼Œä½ å…ˆè¦æŠŠvscodeçš„è‡ªåŠ¨æ›´æ–°å…³æ‰ï¼Œä¸ç„¶ä½ å®‰è£…äº†1.85åä¸ç”¨è¿‡10ç§’å°±ä¼šè‡ªåŠ¨æ›´æ–°â€¦â€¦\nåœ¨vscodeçš„è®¾ç½®é‡Œé¢æœç´¢æ›´æ–°ï¼Œç‚¹å‡»å·¦ä¾§çš„åº”ç”¨ç¨‹åº-æ›´æ–°ï¼Œæ‰¾åˆ°æ›´æ–°æ¨¡å¼ï¼Œè®¾ç½®ä¸ºNoneå³å–æ¶ˆè‡ªåŠ¨æ›´æ–°ï¼Œç„¶åå†å»æ‰åå°ä¸‹è½½æ–°ç‰ˆæœ¬çš„å‹¾ã€‚\n\nç„¶åå»å¾®è½¯å®˜ç½‘ä¸‹è½½1.85æ—§ç‰ˆæœ¬ï¼Œä½ç½®æ˜¯vscodeå®˜ç½‘çš„updateæ¨¡å—ï¼Œåœ¨æ›´æ–°æ—¥å¿—November 2023 (version 1.85)é‡Œé¢èƒ½æ‰¾åˆ°æ—§ç‰ˆæœ¬ã€‚\nVisual Studio Code November 2023\nwindowsä¸»æœºç‚¹å‡»è¿™ä¸ªx64ä¸‹è½½å°±è¡Œäº†ã€‚\n\nå›é€€æ’ä»¶ç‰ˆæœ¬å®‰è£…1.85åremote-sshå’Œwslæ’ä»¶éƒ½ä¼šæ˜¾ç¤ºä¸å¯ç”¨ï¼Œä¼šæ˜¯ç°è‰²çŠ¶æ€å¸¦ä¸€ä¸ªçº¢è‰²æ„Ÿå¹å·ã€‚\nç‚¹å‡»æ’ä»¶æ—è¾¹çš„é½¿è½®ï¼Œé€‰æ‹©å®‰è£…å¦å¤–ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®‰è£…4ä¸ªæœˆå‰çš„ç‰ˆæœ¬å°±è¡Œäº†ã€‚\n\nwslæ’ä»¶ï¼š0.81.8\nremote-sshæ’ä»¶ï¼š0.107.0\n\n\n\nThe endå®‰è£…å®Œæ¯•è¿™ä¸¤ä¸ªæ—§ç‰ˆæœ¬æ’ä»¶åï¼Œå°±èƒ½è¿ä¸Šcentos7.6çš„æœåŠ¡å™¨äº†ã€‚\n\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç¼–ç¨‹å·¥å…·"],"tags":["vscode"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘BM1ï¼šç¿»è½¬é“¾è¡¨","url":"/posts/3018206681/","content":"ä»Šå¤©æ‰“ç®—å¼€å¯æ–°ä¸€è½®åˆ·é¢˜äº†ï¼Œå¿…é¡»å¾—åˆ·äº†ï¼Œå†ä¸åˆ·å°±å¾—æˆåºŸç‰©äº†ã€‚\nä¹Ÿå¸Œæœ›çœ‹æˆ‘åšå®¢çš„è€å“¥èƒ½ç›‘ç£ä¸€ä¸‹æˆ‘ï¼Œä¸€èµ·è¿›æ­¥å˜›ï¼\n\n\né¢˜ç›®BM001æ‰“ç®—ä»ç‰›å®¢ç½‘çš„é¢è¯•top101å¼€å§‹åˆ·èµ·æ¥ï¼Œä»Šå¤©æ˜¯BM001åè½¬é“¾è¡¨\n\nç»™å®šä¸€ä¸ªå•é“¾è¡¨çš„å¤´ç»“ç‚¹pHead(è¯¥å¤´èŠ‚ç‚¹æ˜¯æœ‰å€¼çš„ï¼Œæ¯”å¦‚åœ¨ä¸‹å›¾ï¼Œå®ƒçš„valæ˜¯1)ï¼Œé•¿åº¦ä¸ºnï¼Œåè½¬è¯¥é“¾è¡¨åï¼Œè¿”å›æ–°é“¾è¡¨çš„è¡¨å¤´ã€‚\næ•°æ®èŒƒå›´ï¼š 0â‰¤nâ‰¤1000\nè¦æ±‚ï¼šç©ºé—´å¤æ‚åº¦ O(1) ï¼Œæ—¶é—´å¤æ‚åº¦ O(n) ã€‚\n\nè§£æ³•1ï¼šå¾ªç¯æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ç”¨æŒ‡é’ˆæ¥ä¸€ä¸ªä¸€ä¸ªä¿®æ”¹é“¾æ¥ï¼Œæ¯æ¬¡éƒ½å°†å½“å‰èŠ‚ç‚¹çš„nexté“¾æ¥ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆå†å°†å¼€å¤´çš„èŠ‚ç‚¹ï¼ˆå•ç‹¬å­˜ä¸€ä¸‹åŸæœ¬çš„å¼€å¤´ï¼‰çš„nexté“¾æ¥ä¸ºç©ºï¼Œè¿”å›æœ€åä¸€ä¸ªèŠ‚ç‚¹å³å¯ã€‚\nå¾ˆå¸¸è§„çš„å†™æ³•ï¼Œå‚è€ƒæ³¨é‡Š\nclass Solution&#123;public:    ListNode *ReverseList(ListNode *head)    &#123;        // å› ä¸ºéœ€è¦O(1)ç©ºé—´å¤æ‚åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç”¨å¾ˆè ¢çš„å°†æ•°æ®éå†å‡ºæ¥åå€’åºæ”¾å›çš„åŠæ³•        // æ—¶é—´å¤æ‚åº¦æ˜¯O(N) ä¹Ÿè¦æ±‚æˆ‘ä»¬å†™çš„ä»£ç ç›¸å¯¹æ¥è¯´æ•ˆç‡éœ€è¦é«˜ä¸€äº›        if (head == nullptr || head-&gt;next == nullptr)        &#123;            return head; // åªæœ‰ä¸€ä¸ªæˆ–è€…ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œç›´æ¥è·³è¿‡        &#125;        ListNode *old_head = head; // å•ç‹¬å­˜å¤´        ListNode *A, *B, *C;       // ä¸‰ä¸ªæŒ‡é’ˆ        A = head;        B = head-&gt;next;        C = head-&gt;next-&gt;next;        while (C != nullptr)        &#123;            // Bä¿®æ”¹é“¾æ¥ä¸ºBçš„å‰ä¸€ä¸ªï¼ˆAåœ¨åŸè§†é“¾è¡¨ä¸­æ˜¯Bçš„å‰ä¸€ä¸ªï¼‰            B-&gt;next = A;            A = B;       // Aå˜æˆBï¼ˆä¹Ÿç›¸å½“äºAåœ¨åŸè§†é“¾è¡¨ä¸­ï¼Œå¾€åèµ°ä¸€æ­¥ï¼‰            B = C;       // Bå¾€åèµ°ä¸€æ­¥            C = C-&gt;next; // Cå¾€åèµ°ä¸€æ­¥        &#125;        // èµ°åˆ°è¿™é‡Œæ˜¯Bçš„ä¸‹ä¸€ä¸ªCå·²ç»ä¸ºnullptrï¼Œä»£è¡¨Bæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹        B-&gt;next = A; // ä¾æ—§æ˜¯é“¾æ¥        old_head-&gt;next = nullptr;        return B; // Bæ˜¯åŸè§†é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ–°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹    &#125;&#125;;\n\nè§£æ³•2ï¼šé€’å½’ä¸€èˆ¬é¢è¯•çš„æ—¶å€™ï¼Œé¢è¯•å®˜æ›´å¸Œæœ›çœ‹åˆ°é€’å½’çš„åŠæ³•ï¼Œå› ä¸ºè¿™æ ·çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œæ€è·¯ä¹Ÿæ›´åŠ æœ‰æŒ‘æˆ˜æ€§ï¼ˆåæ­£ä½ å°±è¦å¾€éš¾çš„åŠæ³•æƒ³ï¼‰\né€’å½’çš„æ€è·¯ä¹Ÿæ˜¯è®©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„nexté“¾æ¥ä¸ºå½“å‰èŠ‚ç‚¹ã€‚ä¸»è¦åœ¨äºé€’å½’çš„æœ«ç«¯æ¡ä»¶åº”è¯¥æ˜¯head-&gt;next==nullptrçš„æ—¶å€™å°±éœ€è¦é€€å‡ºäº†ï¼Œå› ä¸ºæ­¤æ—¶ head-&gt;next-&gt;nextæ˜¯æ— æ•ˆçš„ï¼Œæ²¡æœ‰åŠæ³•è¿›è¡Œé“¾æ¥ã€‚\næ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™ä¸ªç®€å›¾äº†ï¼Œå…¶ä¸­æ–¹æ¡†ä»£è¡¨çš„æ˜¯èŠ‚ç‚¹ï¼Œåœ†å½¢ä»£è¡¨æ¯ä¸€æ­¥\n\nä¸Šä»£ç ï¼Œè¿™é‡Œå°† head-&gt;next = NULL;æ˜¯ä¸ºäº†æ“ä½œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåŸè§†é“¾è¡¨çš„é¦–èŠ‚ç‚¹ï¼‰çš„æ—¶å€™ï¼Œå°†ä¸‹ä¸€ä½æ”¹æˆç©ºã€‚è€Œåœ¨ä¸­é—´èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå› ä¸ºå½“å‰èŠ‚ç‚¹çš„nextä¼šåœ¨ä¸Šä¸€å±‚é€’å½’çš„æ—¶å€™è¢«ä¿®æ”¹å›å»ï¼Œæ‰€ä»¥è®¾ç½®ä¸ºç©ºä¸ä¼šå‡ºç°é—®é¢˜ã€‚\nListNode *ReverseList(ListNode *head)&#123;    // ç‰¹åˆ¤ï¼šæ³¨æ„ä¸è¦æ¼æ‰head-&gt;next==NULLçš„æƒ…å†µ    if (head == NULL || head-&gt;next == NULL)    &#123;        return head;    &#125;    // é€’å½’è°ƒç”¨    ListNode *ans = ReverseList(head-&gt;next);    // è®©å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹    head-&gt;next-&gt;next = head;    // åŒæ—¶è®©å½“å‰ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘NULL ï¼Œä»è€Œå®ç°ä»é“¾è¡¨å°¾éƒ¨å¼€å§‹çš„å±€éƒ¨åè½¬    head-&gt;next = NULL;    return ans;&#125;\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["Cè¯­è¨€","OJåˆ·é¢˜","ç‰›å®¢ç½‘"]},{"title":"ã€winã€‘windowsç£ç›˜ç®¡ç†åˆ†åŒº,å®ç°æ•´æ•°å®¹é‡","url":"/posts/2962575673/","content":"windowsç£ç›˜ç®¡ç†åˆ†ç›˜åˆ†å‡ºæ•´æ•°å®¹é‡\n\n\n1.é—®é¢˜ä¸çŸ¥é“å„ä½åœ¨ä½¿ç”¨windowsç”µè„‘åˆ†åŒºçš„æ—¶å€™ï¼Œæœ‰æ²¡æœ‰é‡åˆ°ä¸€ä¸ªæŠ“ç‹‚çš„é—®é¢˜ï¼šé‚£å°±æ˜¯windowsçš„åˆ†åŒºæ€»æ˜¯åˆ†ä¸å‡ºæ•´æ•°ï¼\nä¸æ˜¯299.9gbï¼Œå°±æ˜¯300.1gb\nå¯¹äºå¼ºè¿«ç—‡è€Œè¨€ï¼Œçœ‹ç€é‚£å¤šå‡ºæ¥çš„å°æ•°ç‚¹ï¼Œåˆ«ææœ‰å¤šéš¾å—äº†ï¼\n\n2.è§£å†³äºæ˜¯ï¼Œæˆ‘å°±ç™¾åº¦äº†ä¸€ä¸‹ï¼Œåˆ°åº•è¦æ€ä¹ˆè®¾ç½®åˆ†åŒºçš„å®¹é‡ï¼Œæ‰èƒ½è®©å®ƒåˆ†å‡ºä¸€ä¸ªæ•´æ•°gbçš„ç›˜æ¥ï¼Ÿ\næœ€åï¼Œæˆ‘æŸ¥åˆ°äº†ä¸‹é¢è¿™ä¸ªåŠæ³•\næƒ³è¦æ•´æ•°GBçš„åˆ†åŒºï¼Œåªéœ€è¦åœ¨åŸæ•°å­—ä¸Š+1å°±è¡Œäº†N*1024+1\n\næ¯”å¦‚ï¼Œæˆ‘æƒ³è¦æŠŠcç›˜åˆ†å‡ºå»70GBä½œä¸ºæ•°æ®ç›˜ï¼Œé‚£æˆ‘åº”è¯¥åœ¨windowsç£ç›˜ç®¡ç†å‹ç¼©å·é‡Œè®¾ç½®çš„æ•°å­—å¦‚ä¸‹\n70*1024+1\n\nçœ‹ï¼Œå®Œç¾çš„70gbï¼Œå¼ºè¿«ç—‡æœ‰æ•‘äº†ï¼\n\n\nå…³æ³¨æœ¬å¯’èˆï¼Œåˆ†äº«æ›´å¤šwindowsç”µè„‘ä½¿ç”¨çš„å°tipsï¼\n","categories":["å·®ç”Ÿæ–‡å…·å¤š","ç”µè„‘ä½¿ç”¨å°è´´å£«"],"tags":["windows"]},{"title":"ã€ç‰›å®¢ç½‘ã€‘BM3ï¼šé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ¯kä¸ªä¸€ç»„ç¿»è½¬","url":"/posts/3391123821/","content":"BM3é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ¯kä¸ªä¸€ç»„ç¿»è½¬\n\n\n1.é¢˜ç›®BM3 é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ¯kä¸ªä¸€ç»„ç¿»è½¬\nå°†ç»™å‡ºçš„é“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ¯ k ä¸ªä¸€ç»„ç¿»è½¬ï¼Œè¿”å›ç¿»è½¬åçš„é“¾è¡¨å¦‚æœé“¾è¡¨ä¸­çš„èŠ‚ç‚¹æ•°ä¸æ˜¯ k çš„å€æ•°ï¼Œå°†æœ€åå‰©ä¸‹çš„èŠ‚ç‚¹ä¿æŒåŸæ ·ä½ ä¸èƒ½æ›´æ”¹èŠ‚ç‚¹ä¸­çš„å€¼ï¼Œåªèƒ½æ›´æ”¹èŠ‚ç‚¹æœ¬èº«ã€‚\n\n2.è§£æ2.1 é“¾è¡¨é€†ç½®å…¶ä»–éƒ¨åˆ†å…¶å®å¾ˆå¥½è§£å†³ï¼ŒåŸºäºé“¾è¡¨é€†ç½®çš„ä»£ç ï¼ˆå³é€†ç½®æ•´ä¸ªé“¾è¡¨çš„ä»£ç ï¼‰\næˆ‘ä»¬åªéœ€è¦å°†æ¯ä¸€ä¸ªéœ€è¦é€†ç½®çš„å°åŒºé—´çš„å¼€å¤´ç»™è®°ä¸‹æ¥ï¼Œäº¤ä»˜ç»™é“¾è¡¨é€†ç½®å°±å¯ä»¥äº†ã€‚\n// æ— å·®åˆ«é€†ç½®ListNode* reverseNode(ListNode* head) &#123;    if (head == nullptr || head-&gt;next == nullptr) &#123;        return head;    &#125;    ListNode* ans = reverseNode(head-&gt;next);    head-&gt;next-&gt;next = head;    head-&gt;next = nullptr;    return ans;&#125;\n\n2.2 è®°å½•æ¯ä¸ªéœ€è¦é€†ç½®çš„åŒºé—´æ¯”å¦‚å¦‚ä¸‹éƒ¨åˆ†ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿è¿›è¡Œéå†å’ŒæŒ‡é’ˆæ§åˆ¶ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªå¤´èŠ‚ç‚¹æ”¾ç½®åœ¨äº†åŸæœ¬é“¾è¡¨å¼€å¤´\n// å¤´èŠ‚ç‚¹å’Œéå†æŒ‡é’ˆListNode phead(0);phead.next = head;ListNode* cur = &amp;phead;// æŠŠæ¯kä¸ªèŠ‚ç‚¹å•ç‹¬å–å‡ºæ¥ï¼Œåˆ†åˆ«é€†ç½®åé“¾æ¥èµ·æ¥std::vector&lt;ListNode*&gt; begin_node_v,begin_node_prev_v;int index = k-1; // åˆå§‹åŒ–ä¸ºk-1(å¿½ç•¥å¤´èŠ‚ç‚¹)ï¼ŒåŸæœ‰é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å§‹ç»ˆå…¥æ ˆint node_count = 0;// èŠ‚ç‚¹æ€»æ•°ï¼ˆåŒ…å«å¤´èŠ‚ç‚¹ï¼‰while (cur != nullptr) &#123; // ä¸çŸ¥é“æœ‰å¤šé•¿ï¼Œå¾—æ­»å¾ªç¯    if(index+1 == k &amp;&amp; cur != &amp;phead)&#123;        begin_node_prev_v.push_back(cur);    &#125;    else if (index == k) &#123;        begin_node_v.push_back(cur);        index = 0;    &#125;    cur = cur-&gt;next;    index++;    node_count ++;&#125;\n\nè¿™é‡Œè¿˜åˆ›å»ºäº†ä¸¤ä¸ªvectoræ•°ç»„\n\nbegin_node_vï¼šå¾…é€†ç½®åŒºé—´çš„å¼€å¤´\nbegin_node_prev_vï¼šå¾…é€†ç½®åŒºé—´çš„å¼€å¤´çš„ä¸Šä¸€ä¸ª\n\nä¸‹é¢æ˜¯å¯¹è¿™ä¸¤ä¸ªæ•°ç»„çš„è¯´æ˜ï¼Œå¦‚æœç»™å‡ºçš„ç¤ºä¾‹æ˜¯å¦‚ä¸‹å½¢å¼\n&#123;1,2,3,4,5&#125;,2\n\né‚£ä¹ˆä¸¤ä¸ªæ•°ç»„åˆ†åˆ«å­˜å‚¨äº†å¦‚ä¸‹å€¼\nbegin_node_v:     &#123;1,3,5&#125;begin_node_prev_v: &#123;2,4&#125;\n\nè¿™æ ·ä¸€æ¥ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„å®é™…ä¸Šå­˜æ”¾çš„æ˜¯æ¯ä¸ªåŒºé—´çš„å¼€å¤´ï¼Œç¬¬äºŒä¸ªæ•°ç»„å­˜æ”¾çš„åˆ™æ˜¯æ¯ä¸ªåŒºé—´çš„ç»“å°¾ã€‚é€†ç½®äº†ä¹‹å:\n\nç¬¬äºŒä¸ªæ•°ç»„å°±æ˜¯æ–°åŒºé—´çš„å¼€å¤´\nç¬¬ä¸€ä¸ªæ•°ç»„å°±æ˜¯æ–°åŒºé—´çš„ç»“å°¾\n\næ–¹ä¾¿æˆ‘ä»¬å°†é€†ç½®åçš„é“¾è¡¨é‡æ–°è¿èµ·æ¥ï¼\n2.3 æŠ›å¼ƒæ— éœ€é€†ç½®çš„åŒºé—´åœ¨ä¸Šé¢çš„å¾ªç¯ä¸­ï¼Œç”¨äº†node_countæ¥è®¡ç®—äº†æ•´ä¸ªé“¾è¡¨çš„é•¿åº¦ï¼Œå‡1å‰”é™¤æˆ‘è‡ªå·±æ·»åŠ çš„å¤´èŠ‚ç‚¹ï¼Œå°±æ˜¯åŸå§‹é“¾è¡¨çš„é•¿åº¦ã€‚\né¢˜ç›®æœ‰ä¸ªç‰¹æ®Šè¦æ±‚ï¼šå¦‚æœåŸå§‹é“¾è¡¨çš„é•¿åº¦å¹¶ékçš„æ•´æ•°å€ï¼Œé‚£ä¹ˆæœ€åä¸€æ®µåŒºåŸŸçš„é“¾è¡¨æ˜¯ä¸éœ€è¦é€†ç½®çš„\n1 - 2 - 3 - 4 - 5å½“k=3çš„æ—¶å€™ï¼Œåªéœ€è¦é€†ç½® 1-2-3            4-5ä¸éœ€è¦é€†ç½®3 - 2 - 1 - 4 - 5\n\nåœ¨è¿™ç§æƒ…å†µï¼Œç”¨ä¾‹å’Œä¸¤ä¸ªæ•°ç»„å­˜æ”¾çš„èŠ‚ç‚¹å¦‚ä¸‹\nç”¨ä¾‹ &#123;1,2,3,4,5&#125;,3begin_node_v:     &#123;1,4&#125;begin_node_prev_v: &#123;3&#125;\n\nå¦‚æœæˆ‘ä»¬ç›´æ¥å°†begin_node_vé‡Œé¢çš„èŠ‚ç‚¹äº¤ä»˜ç»™é“¾è¡¨é€†ç½®å‡½æ•°ï¼Œå°±ä¼šå°†4-5è¿™ä¸€æ®µå¤œç»™é€†ç½®ï¼Œæœ€ç»ˆè¿”å›çš„ç»“æœæ˜¯3-2-1-5-4ï¼Œä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ï¼\næ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†4ä»ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­åˆ é™¤ï¼å¦‚æœåŸè§†é“¾è¡¨çš„èŠ‚ç‚¹æ•°é‡å·²ç»å°äºkäº†ï¼Œåˆ™ä¹Ÿä¸éœ€è¦é€†ç½®ï¼Œç›´æ¥è¿”å›å³å¯ã€‚\n// å¦‚æœèŠ‚ç‚¹æ€»æ•°é‡å°äºkåˆ™ä¸é€†ç½®ç›´æ¥è¿”å›node_count --;//å‡-1 å¤´èŠ‚ç‚¹if(node_count &lt;k)&#123;    return head;&#125;// ä¸æ˜¯æ•´æ•°å€ï¼Œä»£è¡¨æœ€åä¸€ä¸ªæ˜¯ä¸è¦å¤„ç†çš„ListNode* last_link = nullptr;if((node_count %k) != 0) &#123;    last_link = begin_node_v[begin_node_v.size()-1];// æœ€åä¸€ä¸ª    begin_node_v.pop_back();// åˆ é™¤æœ€åä¸€ä¸ª&#125;\n\nå¦å¤–ï¼Œä¸ºäº†æœ€ç»ˆå°†è¿™æ®µä¹ˆæœ‰é€†ç½®çš„é“¾è¡¨å’Œæ–°é“¾è¡¨è¿èµ·æ¥ï¼Œæˆ‘ä»¬è¿˜éœ€ç”¨ä¸€ä¸ªæŒ‡é’ˆè®°å½•ä¸‹è¿™ä¸€æ®µçš„å¼€å¤´ï¼›last_linkåˆå§‹åŒ–ä¸ºç©ºæ˜¯æ–¹ä¾¿åç»­çš„åˆ¤æ–­ï¼Œå¦‚æœä¸ºç©ºä»£è¡¨ä¸å­˜åœ¨è¿™ä¸€æ®µé“¾è¡¨ï¼Œä¸éœ€è¦é“¾æ¥ã€‚\n2.4 åŒºé—´ç»“æŸæ ‡è¯†ä¸ºäº†æ ‡è¯†æ¯æ¬¡é€†ç½®çš„ç»“æŸç¬¦ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†å¾…é€†ç½®çš„æ¯ä¸€ä¸ªå°åŒºé—´çš„æœ«å°¾éƒ½æ”¹æˆnullptr\n// å°†æ¯ä¸ªåŒºé—´çš„æœ«å°¾èŠ‚ç‚¹çš„nexté“¾æ¥ä¸ºNullä½œä¸ºé€’å½’æ ‡è¯†for(auto&amp;n:begin_node_prev_v)&#123;    n-&gt;next = nullptr;&#125;\n\n2.5 é€†ç½®å’Œé‡æ–°é“¾æ¥ä¸Šé¢çš„æ­¥éª¤éƒ½æ•²å®šäº†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ç¬¬ä¸€ä¸ªæ•°ç»„begin_node_vçš„èŠ‚ç‚¹å–‚ç»™é“¾è¡¨é€†ç½®å‡½æ•°äº†ï¼Œè¯¥é€†ç½®å‡½æ•°çš„è¿”å›å€¼æ˜¯æ–°é“¾è¡¨çš„å¼€å¤´ã€‚\n// å°†æ¯ä¸ªåŒºé—´äº¤ä»˜ç»™é€’å½’å¼€å§‹é€†ç½®ï¼Œå¹¶å°†é€†ç½®çš„è¿”å›å€¼ä¸ä¸Šä¸€ä¸ªåŒºé—´çš„å¼€å¤´è¿èµ·æ¥cur = &amp;phead;for(auto&amp; n:begin_node_v)&#123;    ListNode* ptr=reverseNode(n);    cur-&gt;next = ptr;    cur = n;&#125;\n\nè¿™é‡Œè¯´ä¸€ä¸‹curæŒ‡é’ˆçš„ä½œç”¨ï¼Œä»¥ç”¨ä¾‹&#123;1,2,3,4,5&#125;,2ä¸ºæ —å­ï¼Œæ­¤æ—¶begin_node_væ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯&#123;1,3,5&#125;\n\nåˆå§‹åŒ–ä¸ºphead\nç¬¬ä¸€æ¬¡å¾ªç¯ï¼ŒnæŒ‡å‘çš„æ˜¯1ï¼ŒcuræŒ‡å‘çš„æ˜¯pheadï¼›é€†ç½®ç»“æŸåï¼ŒptræŒ‡å‘çš„æ˜¯2ï¼Œåˆšå¥½å°±æ˜¯æ–°é“¾è¡¨çš„å¼€å¤´ï¼Œå°†curçš„nexté“¾æ¥ä¸ºå®ƒï¼Œå¹¶å°†curæ›´æ–°ä¸º1\nç¬¬äºŒæ¬¡å¾ªç¯ï¼ŒnæŒ‡å‘çš„æ˜¯3ï¼ŒcuræŒ‡å‘çš„æ˜¯1ï¼›é€†ç½®ç»“æŸåï¼ŒptræŒ‡å‘çš„æ˜¯4ï¼Œæ­¤æ—¶curçš„nextæŒ‡å‘å®ƒï¼Œå°±æ˜¯å°†1çš„nexté“¾æ¥ä¸º4ï¼Œå†æ¬¡æ›´æ–°curä¸º3ã€‚\nç¬¬ä¸‰æ¬¡å¾ªç¯ï¼ŒnæŒ‡å‘çš„æ˜¯5ï¼ŒcuræŒ‡å‘çš„æ˜¯3ï¼›é€†ç½®ç»“æŸåï¼Œå°†3çš„nexté“¾æ¥ä¸º5ï¼Œcuræ›´æ–°ä¸º5\nå¾ªç¯ç»“æŸ\n\nç»“æŸæ—¶ï¼Œè¿™ä¸ªé“¾è¡¨å°±å·²ç»å®Œå·¥äº†ï¼æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ä¸€ä¸‹è¿˜æ²¡æœ‰å‰©ä¸‹çš„æ²¡æœ‰é€†ç½®çš„èŠ‚ç‚¹ï¼Œå°†å…¶é“¾æ¥ç»™begin_node_væ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆä¹Ÿæ˜¯é€†ç½®éƒ¨åˆ†çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼‰çš„nextå°±å¯ä»¥äº†\n// åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å‰©ä¸‹çš„èŠ‚ç‚¹if(last_link !=nullptr)&#123;    begin_node_v[begin_node_v.size()-1]-&gt;next = last_link;&#125;\n\n3.å®Œæ•´ä»£ç class Solution &#123;  public:    /**     * ä»£ç ä¸­çš„ç±»åã€æ–¹æ³•åã€å‚æ•°åå·²ç»æŒ‡å®šï¼Œè¯·å‹¿ä¿®æ”¹ï¼Œç›´æ¥è¿”å›æ–¹æ³•è§„å®šçš„å€¼å³å¯     *     *     * @param head ListNodeç±»     * @param k intæ•´å‹     * @return ListNodeç±»     */    // æ— å·®åˆ«é€†ç½®    ListNode* reverseNode(ListNode* head) &#123;        if (head == nullptr || head-&gt;next == nullptr) &#123;            return head;        &#125;        ListNode* ans = reverseNode(head-&gt;next);        head-&gt;next-&gt;next = head;        head-&gt;next = nullptr;        return ans;    &#125;    void cout_vector(std::vector&lt;ListNode*&gt;&amp; begin_node_v) &#123;        for (auto&amp; e : begin_node_v) &#123;            cout &lt;&lt; e-&gt;val &lt;&lt; &quot; &quot; ;        &#125;        cout &lt;&lt; endl;    &#125;    ListNode* reverseKGroup(ListNode* head, int k) &#123;        // åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ–è€…é€†ç½®åŒºé—´ä¸º1çš„éƒ½ä¸éœ€è¦æ“ä½œ        if (head == nullptr || head-&gt;next == nullptr || k &lt;= 1) &#123;            return head;        &#125;        // å¤´èŠ‚ç‚¹å’Œéå†æŒ‡é’ˆ        ListNode phead(0);        phead.next = head;        ListNode* cur = &amp;phead;        // æŠŠæ¯kä¸ªèŠ‚ç‚¹å•ç‹¬å–å‡ºæ¥ï¼Œåˆ†åˆ«é€†ç½®åé“¾æ¥èµ·æ¥        std::vector&lt;ListNode*&gt; begin_node_v,begin_node_prev_v;        int index = k-1; // åˆå§‹åŒ–ä¸ºk-1(å¿½ç•¥å¤´èŠ‚ç‚¹)ï¼ŒåŸæœ‰é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å§‹ç»ˆå…¥æ ˆ        int node_count = 0;// èŠ‚ç‚¹æ€»æ•°ï¼ˆåŒ…å«å¤´èŠ‚ç‚¹ï¼‰        while (cur != nullptr) &#123; // ä¸çŸ¥é“æœ‰å¤šé•¿ï¼Œå¾—æ­»å¾ªç¯            if(index+1 == k &amp;&amp; cur != &amp;phead)&#123;                begin_node_prev_v.push_back(cur);            &#125;            else if (index == k) &#123;                begin_node_v.push_back(cur);                index = 0;            &#125;            cur = cur-&gt;next;            index++;            node_count ++;        &#125;        // èµ°åˆ°è¿™é‡Œå·²ç»æŠŠæ¯ä¸ªéœ€è¦é€†ç½®çš„å¼€å¤´èŠ‚ç‚¹ç»™è®°å½•ä¸‹æ¥äº†        // å¦‚æœèŠ‚ç‚¹æ€»æ•°é‡å°äºkåˆ™ä¸é€†ç½®ç›´æ¥è¿”å›        node_count --;//å‡-1 å¤´èŠ‚ç‚¹        if(node_count &lt;k)&#123;            return head;        &#125;        // ä¸æ˜¯æ•´æ•°å€ï¼Œä»£è¡¨æœ€åä¸€ä¸ªæ˜¯ä¸è¦å¤„ç†çš„        ListNode* last_link = nullptr;        if((node_count %k) != 0) &#123;            last_link = begin_node_v[begin_node_v.size()-1];// æœ€åä¸€ä¸ª            begin_node_v.pop_back();// åˆ é™¤æœ€åä¸€ä¸ª        &#125;        // cout_vector(begin_node_v);        // cout_vector(begin_node_prev_v);        // å°†æ¯ä¸ªåŒºé—´çš„æœ«å°¾èŠ‚ç‚¹çš„nexté“¾æ¥ä¸ºNullä½œä¸ºé€’å½’æ ‡è¯†        for(auto&amp;n:begin_node_prev_v)&#123;            n-&gt;next = nullptr;        &#125;        // å°†æ¯ä¸ªåŒºé—´äº¤ä»˜ç»™é€’å½’å¼€å§‹é€†ç½®ï¼Œå¹¶å°†é€†ç½®çš„è¿”å›å€¼ä¸ä¸Šä¸€ä¸ªåŒºé—´çš„å¼€å¤´è¿èµ·æ¥        cur = &amp;phead;        for(auto&amp; n:begin_node_v)&#123;            ListNode* ptr=reverseNode(n);            cur-&gt;next = ptr;            cur = n;        &#125;        // åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å‰©ä¸‹çš„èŠ‚ç‚¹        if(last_link !=nullptr)&#123;            begin_node_v[begin_node_v.size()-1]-&gt;next = last_link;        &#125;        return phead.next;    &#125;&#125;;\n\né€šè¿‡æˆªå›¾\n\n","categories":["ç¼–ç¨‹å­¦ä¹ ","æŠŠé¢˜ç›®éƒ½ç»™åˆ·å¹²å‡€"],"tags":["OJåˆ·é¢˜","Cpp","ç‰›å®¢ç½‘"]}]